var shadow$provide = {};
var $jscomp=$jscomp||{};$jscomp.scope={};$jscomp.ASSUME_ES5=!1;$jscomp.ASSUME_NO_NATIVE_MAP=!1;$jscomp.ASSUME_NO_NATIVE_SET=!1;$jscomp.SIMPLE_FROUND_POLYFILL=!1;$jscomp.ISOLATE_POLYFILLS=!1;$jscomp.FORCE_POLYFILL_PROMISE=!1;$jscomp.FORCE_POLYFILL_PROMISE_WHEN_NO_UNHANDLED_REJECTION=!1;$jscomp.IS_SYMBOL_NATIVE="function"===typeof Symbol&&"symbol"===typeof Symbol("x");$jscomp.TRUST_ES6_POLYFILLS=!$jscomp.ISOLATE_POLYFILLS||$jscomp.IS_SYMBOL_NATIVE;
$jscomp.defineProperty=$jscomp.ASSUME_ES5||"function"==typeof Object.defineProperties?Object.defineProperty:function(a,b,c){if(a==Array.prototype||a==Object.prototype)return a;a[b]=c.value;return a};$jscomp.getGlobal=function(a){a=["object"==typeof globalThis&&globalThis,a,"object"==typeof window&&window,"object"==typeof self&&self,"object"==typeof global&&global];for(var b=0;b<a.length;++b){var c=a[b];if(c&&c.Math==Math)return c}throw Error("Cannot find global object");};$jscomp.global=$jscomp.getGlobal(this);
$jscomp.polyfills={};$jscomp.propertyToPolyfillSymbol={};$jscomp.POLYFILL_PREFIX="$jscp$";var $jscomp$lookupPolyfilledValue=function(a,b){var c=$jscomp.propertyToPolyfillSymbol[b];if(null==c)return a[b];c=a[c];return void 0!==c?c:a[b]};$jscomp.polyfill=function(a,b,c,d){b&&($jscomp.ISOLATE_POLYFILLS?$jscomp.polyfillIsolated(a,b,c,d):$jscomp.polyfillUnisolated(a,b,c,d))};
$jscomp.polyfillUnisolated=function(a,b,c,d){c=$jscomp.global;a=a.split(".");for(d=0;d<a.length-1;d++){var e=a[d];if(!(e in c))return;c=c[e]}a=a[a.length-1];d=c[a];b=b(d);b!=d&&null!=b&&$jscomp.defineProperty(c,a,{configurable:!0,writable:!0,value:b})};
$jscomp.polyfillIsolated=function(a,b,c,d){var e=a.split(".");a=1===e.length;d=e[0];d=!a&&d in $jscomp.polyfills?$jscomp.polyfills:$jscomp.global;for(var f=0;f<e.length-1;f++){var g=e[f];if(!(g in d))return;d=d[g]}e=e[e.length-1];c=$jscomp.IS_SYMBOL_NATIVE&&"es6"===c?d[e]:null;b=b(c);null!=b&&(a?$jscomp.defineProperty($jscomp.polyfills,e,{configurable:!0,writable:!0,value:b}):b!==c&&(void 0===$jscomp.propertyToPolyfillSymbol[e]&&($jscomp.propertyToPolyfillSymbol[e]=$jscomp.IS_SYMBOL_NATIVE?$jscomp.global.Symbol(e):
$jscomp.POLYFILL_PREFIX+e),$jscomp.defineProperty(d,$jscomp.propertyToPolyfillSymbol[e],{configurable:!0,writable:!0,value:b})))};$jscomp.arrayIteratorImpl=function(a){var b=0;return function(){return b<a.length?{done:!1,value:a[b++]}:{done:!0}}};$jscomp.arrayIterator=function(a){return{next:$jscomp.arrayIteratorImpl(a)}};$jscomp.initSymbol=function(){};
$jscomp.polyfill("Symbol",function(a){if(a)return a;var b=function(e,f){this.$jscomp$symbol$id_=e;$jscomp.defineProperty(this,"description",{configurable:!0,writable:!0,value:f})};b.prototype.toString=function(){return this.$jscomp$symbol$id_};var c=0,d=function(e){if(this instanceof d)throw new TypeError("Symbol is not a constructor");return new b("jscomp_symbol_"+(e||"")+"_"+c++,e)};return d},"es6","es3");
$jscomp.polyfill("Symbol.iterator",function(a){if(a)return a;a=Symbol("Symbol.iterator");for(var b="Array Int8Array Uint8Array Uint8ClampedArray Int16Array Uint16Array Int32Array Uint32Array Float32Array Float64Array".split(" "),c=0;c<b.length;c++){var d=$jscomp.global[b[c]];"function"===typeof d&&"function"!=typeof d.prototype[a]&&$jscomp.defineProperty(d.prototype,a,{configurable:!0,writable:!0,value:function(){return $jscomp.iteratorPrototype($jscomp.arrayIteratorImpl(this))}})}return a},"es6",
"es3");$jscomp.polyfill("Symbol.asyncIterator",function(a){return a?a:Symbol("Symbol.asyncIterator")},"es9","es3");$jscomp.iteratorPrototype=function(a){a={next:a};a[Symbol.iterator]=function(){return this};return a};
(function(){
shadow$provide[0]=function(od,Fd,Zd,ed){var b=Object.getOwnPropertySymbols,N=Object.prototype.hasOwnProperty,I=Object.prototype.propertyIsEnumerable;Zd.exports=function(){try{if(!Object.assign)return!1;var r=new String("abc");r[5]="de";if("5"===Object.getOwnPropertyNames(r)[0])return!1;var q={};for(r=0;10>r;r++)q["_"+String.fromCharCode(r)]=r;if("0123456789"!==Object.getOwnPropertyNames(q).map(function(l){return q[l]}).join(""))return!1;var m={};"abcdefghijklmnopqrst".split("").forEach(function(l){m[l]=
l});return"abcdefghijklmnopqrst"!==Object.keys(Object.assign({},m)).join("")?!1:!0}catch(l){return!1}}()?Object.assign:function(r,q){if(null===r||void 0===r)throw new TypeError("Object.assign cannot be called with null or undefined");var m=Object(r);for(var l,a=1;a<arguments.length;a++){var h=Object(arguments[a]);for(var g in h)N.call(h,g)&&(m[g]=h[g]);if(b){l=b(h);for(var n=0;n<l.length;n++)I.call(h,l[n])&&(m[l[n]]=h[l[n]])}}return m}};
shadow$provide[1]=function(od,Fd,Zd,ed){function b(O){for(var U="https://reactjs.org/docs/error-decoder.html?invariant\x3d"+O,S=1;S<arguments.length;S++)U+="\x26args[]\x3d"+encodeURIComponent(arguments[S]);return"Minified React error #"+O+"; visit "+U+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function N(O,U,S){this.props=O;this.context=U;this.refs=L;this.updater=S||J}function I(){}function r(O,U,S){this.props=O;this.context=U;
this.refs=L;this.updater=S||J}function q(O,U,S){var X,ba={},ca=null,ia=null;if(null!=U)for(X in void 0!==U.ref&&(ia=U.ref),void 0!==U.key&&(ca=""+U.key),U)H.call(U,X)&&!Q.hasOwnProperty(X)&&(ba[X]=U[X]);var ja=arguments.length-2;if(1===ja)ba.children=S;else if(1<ja){for(var la=Array(ja),da=0;da<ja;da++)la[da]=arguments[da+2];ba.children=la}if(O&&O.defaultProps)for(X in ja=O.defaultProps,ja)void 0===ba[X]&&(ba[X]=ja[X]);return{$$typeof:y,type:O,key:ca,ref:ia,props:ba,_owner:K.current}}function m(O,
U){return{$$typeof:y,type:O.type,key:U,ref:O.ref,props:O.props,_owner:O._owner}}function l(O){return"object"===typeof O&&null!==O&&O.$$typeof===y}function a(O){var U={"\x3d":"\x3d0",":":"\x3d2"};return"$"+(""+O).replace(/[=:]/g,function(S){return U[S]})}function h(O,U,S,X){if(P.length){var ba=P.pop();ba.result=O;ba.keyPrefix=U;ba.func=S;ba.context=X;ba.count=0;return ba}return{result:O,keyPrefix:U,func:S,context:X,count:0}}function g(O){O.result=null;O.keyPrefix=null;O.func=null;O.context=null;O.count=
0;10>P.length&&P.push(O)}function n(O,U,S,X){var ba=typeof O;if("undefined"===ba||"boolean"===ba)O=null;var ca=!1;if(null===O)ca=!0;else switch(ba){case "string":case "number":ca=!0;break;case "object":switch(O.$$typeof){case y:case B:ca=!0}}if(ca)return S(X,O,""===U?"."+d(O,0):U),1;ca=0;U=""===U?".":U+":";if(Array.isArray(O))for(var ia=0;ia<O.length;ia++){ba=O[ia];var ja=U+d(ba,ia);ca+=n(ba,ja,S,X)}else if(null===O||"object"!==typeof O?ja=null:(ja=G&&O[G]||O["@@iterator"],ja="function"===typeof ja?
ja:null),"function"===typeof ja)for(O=ja.call(O),ia=0;!(ba=O.next()).done;)ba=ba.value,ja=U+d(ba,ia++),ca+=n(ba,ja,S,X);else if("object"===ba)throw S=""+O,Error(b(31,"[object Object]"===S?"object with keys {"+Object.keys(O).join(", ")+"}":S,""));return ca}function p(O,U,S){return null==O?0:n(O,"",U,S)}function d(O,U){return"object"===typeof O&&null!==O&&null!=O.key?a(O.key):U.toString(36)}function e(O,U){O.func.call(O.context,U,O.count++)}function f(O,U,S){var X=O.result,ba=O.keyPrefix;O=O.func.call(O.context,
U,O.count++);Array.isArray(O)?k(O,X,S,function(ca){return ca}):null!=O&&(l(O)&&(O=m(O,ba+(!O.key||U&&U.key===O.key?"":(""+O.key).replace(M,"$\x26/")+"/")+S)),X.push(O))}function k(O,U,S,X,ba){var ca="";null!=S&&(ca=(""+S).replace(M,"$\x26/")+"/");U=h(U,ca,X,ba);p(O,f,U);g(U)}function t(){var O=T.current;if(null===O)throw Error(b(321));return O}var v=Fd(0),w="function"===typeof Symbol&&Symbol.for,y=w?Symbol.for("react.element"):60103,B=w?Symbol.for("react.portal"):60106;od=w?Symbol.for("react.fragment"):
60107;Fd=w?Symbol.for("react.strict_mode"):60108;Zd=w?Symbol.for("react.profiler"):60114;var A=w?Symbol.for("react.provider"):60109,z=w?Symbol.for("react.context"):60110,E=w?Symbol.for("react.forward_ref"):60112,C=w?Symbol.for("react.suspense"):60113,u=w?Symbol.for("react.memo"):60115,D=w?Symbol.for("react.lazy"):60116,G="function"===typeof Symbol&&Symbol.iterator,J={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},L={};
N.prototype.isReactComponent={};N.prototype.setState=function(O,U){if("object"!==typeof O&&"function"!==typeof O&&null!=O)throw Error(b(85));this.updater.enqueueSetState(this,O,U,"setState")};N.prototype.forceUpdate=function(O){this.updater.enqueueForceUpdate(this,O,"forceUpdate")};I.prototype=N.prototype;w=r.prototype=new I;w.constructor=r;v(w,N.prototype);w.isPureReactComponent=!0;var K={current:null},H=Object.prototype.hasOwnProperty,Q={key:!0,ref:!0,__self:!0,__source:!0},M=/\/+/g,P=[],T={current:null};
w={ReactCurrentDispatcher:T,ReactCurrentBatchConfig:{suspense:null},ReactCurrentOwner:K,IsSomeRendererActing:{current:!1},assign:v};ed.Children={map:function(O,U,S){if(null==O)return O;var X=[];k(O,X,null,U,S);return X},forEach:function(O,U,S){if(null==O)return O;U=h(null,null,U,S);p(O,e,U);g(U)},count:function(O){return p(O,function(){return null},null)},toArray:function(O){var U=[];k(O,U,null,function(S){return S});return U},only:function(O){if(!l(O))throw Error(b(143));return O}};ed.Component=
N;ed.Fragment=od;ed.Profiler=Zd;ed.PureComponent=r;ed.StrictMode=Fd;ed.Suspense=C;ed.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=w;ed.cloneElement=function(O,U,S){if(null===O||void 0===O)throw Error(b(267,O));var X=v({},O.props),ba=O.key,ca=O.ref,ia=O._owner;if(null!=U){void 0!==U.ref&&(ca=U.ref,ia=K.current);void 0!==U.key&&(ba=""+U.key);if(O.type&&O.type.defaultProps)var ja=O.type.defaultProps;for(la in U)H.call(U,la)&&!Q.hasOwnProperty(la)&&(X[la]=void 0===U[la]&&void 0!==ja?ja[la]:U[la])}var la=
arguments.length-2;if(1===la)X.children=S;else if(1<la){ja=Array(la);for(var da=0;da<la;da++)ja[da]=arguments[da+2];X.children=ja}return{$$typeof:y,type:O.type,key:ba,ref:ca,props:X,_owner:ia}};ed.createContext=function(O,U){void 0===U&&(U=null);O={$$typeof:z,_calculateChangedBits:U,_currentValue:O,_currentValue2:O,_threadCount:0,Provider:null,Consumer:null};O.Provider={$$typeof:A,_context:O};return O.Consumer=O};ed.createElement=q;ed.createFactory=function(O){var U=q.bind(null,O);U.type=O;return U};
ed.createRef=function(){return{current:null}};ed.forwardRef=function(O){return{$$typeof:E,render:O}};ed.isValidElement=l;ed.lazy=function(O){return{$$typeof:D,_ctor:O,_status:-1,_result:null}};ed.memo=function(O,U){return{$$typeof:u,type:O,compare:void 0===U?null:U}};ed.useCallback=function(O,U){return t().useCallback(O,U)};ed.useContext=function(O,U){return t().useContext(O,U)};ed.useDebugValue=function(){};ed.useEffect=function(O,U){return t().useEffect(O,U)};ed.useImperativeHandle=function(O,U,
S){return t().useImperativeHandle(O,U,S)};ed.useLayoutEffect=function(O,U){return t().useLayoutEffect(O,U)};ed.useMemo=function(O,U){return t().useMemo(O,U)};ed.useReducer=function(O,U,S){return t().useReducer(O,U,S)};ed.useRef=function(O){return t().useRef(O)};ed.useState=function(O){return t().useState(O)};ed.version="16.14.0"};
shadow$provide[2]=function(od,Fd,Zd,ed){Zd.exports="SECRET_DO_NOT_PASS_THIS_OR_YOU_WILL_BE_FIRED"};
shadow$provide[5]=function(od,Fd,Zd,ed){Zd.exports=Fd(1)};
shadow$provide[10]=function(od,Fd,Zd,ed){function b(){}function N(){}var I=Fd(2);N.resetWarningCache=b;Zd.exports=function(){function r(l,a,h,g,n,p){if(p!==I)throw l=Error("Calling PropTypes validators directly is not supported by the `prop-types` package. Use PropTypes.checkPropTypes() to call them. Read more at http://fb.me/use-check-prop-types"),l.name="Invariant Violation",l;}function q(){return r}r.isRequired=r;var m={array:r,bool:r,func:r,number:r,object:r,string:r,symbol:r,any:r,arrayOf:q,
element:r,elementType:r,instanceOf:q,node:r,objectOf:q,oneOf:q,oneOfType:q,shape:q,exact:q,checkPropTypes:N,resetWarningCache:b};return m.PropTypes=m}};
shadow$provide[11]=function(od,Fd,Zd,ed){Zd.exports=Fd(10)()};
shadow$provide[12]=function(od,Fd,Zd,ed){function b(k){"@babel/helpers - typeof";b="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"===typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t};return b(k)}function N(){if("function"!==typeof WeakMap)return null;var k=new WeakMap;N=function(){return k};return k}function I(k,t){for(var v=0;v<t.length;v++){var w=t[v];w.enumerable=w.enumerable||!1;w.configurable=
!0;"value"in w&&(w.writable=!0);Object.defineProperty(k,w.key,w)}}function r(k,t,v){t&&I(k.prototype,t);v&&I(k,v);return k}function q(k,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");k.prototype=Object.create(t&&t.prototype,{constructor:{value:k,writable:!0,configurable:!0}});t&&m(k,t)}function m(k,t){m=Object.setPrototypeOf||function(v,w){v.__proto__=w;return v};return m(k,t)}function l(k){var t=h();return function(){var v=g(k);if(t){var w=
g(this).constructor;v=Reflect.construct(v,arguments,w)}else v=v.apply(this,arguments);v=!v||"object"!==b(v)&&"function"!==typeof v?a(this):v;return v}}function a(k){if(void 0===k)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return k}function h(){if("undefined"===typeof Reflect||!Reflect.construct||Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),!0}catch(k){return!1}}
function g(k){g=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)};return g(k)}Object.defineProperty(ed,"__esModule",{value:!0});ed["default"]=function(k){var t=function(v){function w(B){if(!(this instanceof w))throw new TypeError("Cannot call a class as a function");B=y.call(this,B);B.p=Promise.resolve();B.resizeHandler=null;B.handlers={};B.syncWindowResize=B.syncWindowResize.bind(a(B));B.syncEventHandlers=B.syncEventHandlers.bind(a(B));B.attachUpdateEvents=
B.attachUpdateEvents.bind(a(B));B.getRef=B.getRef.bind(a(B));B.handleUpdate=B.handleUpdate.bind(a(B));B.figureCallback=B.figureCallback.bind(a(B));B.updatePlotly=B.updatePlotly.bind(a(B));return B}q(w,v);var y=l(w);r(w,[{key:"updatePlotly",value:function(B,A,z){var E=this;this.p=this.p.then(function(){if(!E.unmounting){if(!E.el)throw Error("Missing element reference");return k.react(E.el,{data:E.props.data,layout:E.props.layout,config:E.props.config,frames:E.props.frames})}}).then(function(){E.unmounting||
(E.syncWindowResize(B),E.syncEventHandlers(),E.figureCallback(A),z&&E.attachUpdateEvents())})["catch"](function(C){if(E.props.onError)E.props.onError(C)})}},{key:"componentDidMount",value:function(){this.unmounting=!1;this.updatePlotly(!0,this.props.onInitialized,!0)}},{key:"componentDidUpdate",value:function(B){this.unmounting=!1;var A=B.frames&&B.frames.length?B.frames.length:0,z=this.props.frames&&this.props.frames.length?this.props.frames.length:0,E=void 0!==B.revision,C=B.revision!==this.props.revision;
(B.layout!==this.props.layout||B.data!==this.props.data||B.config!==this.props.config||z!==A||E&&(!E||C))&&this.updatePlotly(!1,this.props.onUpdate,!1)}},{key:"componentWillUnmount",value:function(){this.unmounting=!0;this.figureCallback(this.props.onPurge);this.resizeHandler&&f&&(window.removeEventListener("resize",this.resizeHandler),this.resizeHandler=null);this.removeUpdateEvents();k.purge(this.el)}},{key:"attachUpdateEvents",value:function(){var B=this;this.el&&this.el.removeListener&&e.forEach(function(A){B.el.on(A,
B.handleUpdate)})}},{key:"removeUpdateEvents",value:function(){var B=this;this.el&&this.el.removeListener&&e.forEach(function(A){B.el.removeListener(A,B.handleUpdate)})}},{key:"handleUpdate",value:function(){this.figureCallback(this.props.onUpdate)}},{key:"figureCallback",value:function(B){if("function"===typeof B){var A=this.el;B({data:A.data,layout:A.layout,frames:this.el._transitionData?this.el._transitionData._frames:null},this.el)}}},{key:"syncWindowResize",value:function(B){var A=this;f&&(this.props.useResizeHandler&&
!this.resizeHandler?(this.resizeHandler=function(){return k.Plots.resize(A.el)},window.addEventListener("resize",this.resizeHandler),B&&this.resizeHandler()):!this.props.useResizeHandler&&this.resizeHandler&&(window.removeEventListener("resize",this.resizeHandler),this.resizeHandler=null))}},{key:"getRef",value:function(B){this.el=B;this.props.debug&&f&&(window.gd=this.el)}},{key:"syncEventHandlers",value:function(){var B=this;d.forEach(function(A){var z=B.props["on"+A],E=B.handlers[A],C=!!E;z&&!C?
B.addEventHandler(A,z):!z&&C?B.removeEventHandler(A):z&&C&&z!==E&&(B.removeEventHandler(A),B.addEventHandler(A,z))})}},{key:"addEventHandler",value:function(B,A){this.handlers[B]=A;this.el.on(this.getPlotlyEventName(B),this.handlers[B])}},{key:"removeEventHandler",value:function(B){this.el.removeListener(this.getPlotlyEventName(B),this.handlers[B]);delete this.handlers[B]}},{key:"getPlotlyEventName",value:function(B){return"plotly_"+B.toLowerCase()}},{key:"render",value:function(){return n["default"].createElement("div",
{id:this.props.divId,style:this.props.style,ref:this.getRef,className:this.props.className})}}]);return w}(n.Component);t.propTypes={data:p["default"].arrayOf(p["default"].object),config:p["default"].object,layout:p["default"].object,frames:p["default"].arrayOf(p["default"].object),revision:p["default"].number,onInitialized:p["default"].func,onPurge:p["default"].func,onError:p["default"].func,onUpdate:p["default"].func,debug:p["default"].bool,style:p["default"].object,className:p["default"].string,
useResizeHandler:p["default"].bool,divId:p["default"].string};d.forEach(function(v){t.propTypes["on"+v]=p["default"].func});t.defaultProps={debug:!1,useResizeHandler:!1,data:[],style:{position:"relative",display:"inline-block"}};return t};var n=function(k){if(k&&k.__esModule)return k;if(null===k||"object"!==b(k)&&"function"!==typeof k)return{"default":k};var t=N();if(t&&t.has(k))return t.get(k);var v={},w=Object.defineProperty&&Object.getOwnPropertyDescriptor,y;for(y in k)if(Object.prototype.hasOwnProperty.call(k,
y)){var B=w?Object.getOwnPropertyDescriptor(k,y):null;B&&(B.get||B.set)?Object.defineProperty(v,y,B):v[y]=k[y]}v["default"]=k;t&&t.set(k,v);return v}(Fd(5)),p=function(k){return k&&k.__esModule?k:{"default":k}}(Fd(11)),d="AfterExport AfterPlot Animated AnimatingFrame AnimationInterrupted AutoSize BeforeExport BeforeHover ButtonClicked Click ClickAnnotation Deselect DoubleClick Framework Hover LegendClick LegendDoubleClick Relayout Relayouting Restyle Redraw Selected Selecting SliderChange SliderEnd SliderStart SunburstClick Transitioning TransitionInterrupted Unhover".split(" "),
e="plotly_restyle plotly_redraw plotly_relayout plotly_relayouting plotly_doubleclick plotly_animated plotly_sunburstclick".split(" "),f="undefined"!==typeof window};
shadow$provide[13]=function(od,Fd,Zd,ed){(function(b){"object"===typeof ed&&"undefined"!==typeof Zd?Zd.exports=b():"function"===typeof define&&define.amd?define([],b):("undefined"!==typeof window?window:"undefined"!==typeof od?od:"undefined"!==typeof self?self:this).Plotly=b()})(function(){return function(){function b(N,I,r){function q(a,h){if(!I[a]){if(!N[a]){var g="function"==typeof Fd&&Fd;if(!h&&g)return g(a,!0);if(m)return m(a,!0);h=Error("Cannot find module '"+a+"'");throw h.code="MODULE_NOT_FOUND",
h;}h=I[a]={exports:{}};N[a][0].call(h.exports,function(n){return q(N[a][1][n]||n)},h,h.exports,b,N,I,r)}return I[a].exports}for(var m="function"==typeof Fd&&Fd,l=0;l<r.length;l++)q(r[l]);return q}return b}()({1:[function(b,N,I){b=b("../src/lib");N={"X,X div":"direction:ltr;font-family:'Open Sans', verdana, arial, sans-serif;margin:0;padding:0;","X input,X button":"font-family:'Open Sans', verdana, arial, sans-serif;","X input:focus,X button:focus":"outline:none;","X a":"text-decoration:none;","X a:hover":"text-decoration:none;",
"X .crisp":"shape-rendering:crispEdges;","X .user-select-none":"-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;-o-user-select:none;user-select:none;","X svg":"overflow:hidden;","X svg a":"fill:#447adb;","X svg a:hover":"fill:#3c6dc5;","X .main-svg":"position:absolute;top:0;left:0;pointer-events:none;","X .main-svg .draglayer":"pointer-events:all;","X .cursor-default":"cursor:default;","X .cursor-pointer":"cursor:pointer;","X .cursor-crosshair":"cursor:crosshair;","X .cursor-move":"cursor:move;",
"X .cursor-col-resize":"cursor:col-resize;","X .cursor-row-resize":"cursor:row-resize;","X .cursor-ns-resize":"cursor:ns-resize;","X .cursor-ew-resize":"cursor:ew-resize;","X .cursor-sw-resize":"cursor:sw-resize;","X .cursor-s-resize":"cursor:s-resize;","X .cursor-se-resize":"cursor:se-resize;","X .cursor-w-resize":"cursor:w-resize;","X .cursor-e-resize":"cursor:e-resize;","X .cursor-nw-resize":"cursor:nw-resize;","X .cursor-n-resize":"cursor:n-resize;","X .cursor-ne-resize":"cursor:ne-resize;","X .cursor-grab":"cursor:-webkit-grab;cursor:grab;",
"X .modebar":"position:absolute;top:2px;right:2px;","X .ease-bg":"-webkit-transition:background-color 0.3s ease 0s;-moz-transition:background-color 0.3s ease 0s;-ms-transition:background-color 0.3s ease 0s;-o-transition:background-color 0.3s ease 0s;transition:background-color 0.3s ease 0s;","X .modebar--hover\x3e:not(.watermark)":"opacity:0;-webkit-transition:opacity 0.3s ease 0s;-moz-transition:opacity 0.3s ease 0s;-ms-transition:opacity 0.3s ease 0s;-o-transition:opacity 0.3s ease 0s;transition:opacity 0.3s ease 0s;",
"X:hover .modebar--hover .modebar-group":"opacity:1;","X .modebar-group":"float:left;display:inline-block;box-sizing:border-box;padding-left:8px;position:relative;vertical-align:middle;white-space:nowrap;","X .modebar-btn":"position:relative;font-size:16px;padding:3px 4px;height:22px;cursor:pointer;line-height:normal;box-sizing:border-box;","X .modebar-btn svg":"position:relative;top:2px;","X .modebar.vertical":"display:flex;flex-direction:column;flex-wrap:wrap;align-content:flex-end;max-height:100%;",
"X .modebar.vertical svg":"top:-1px;","X .modebar.vertical .modebar-group":"display:block;float:none;padding-left:0px;padding-bottom:8px;","X .modebar.vertical .modebar-group .modebar-btn":"display:block;text-align:center;","X [data-title]:before,X [data-title]:after":"position:absolute;-webkit-transform:translate3d(0, 0, 0);-moz-transform:translate3d(0, 0, 0);-ms-transform:translate3d(0, 0, 0);-o-transform:translate3d(0, 0, 0);transform:translate3d(0, 0, 0);display:none;opacity:0;z-index:1001;pointer-events:none;top:110%;right:50%;",
"X [data-title]:hover:before,X [data-title]:hover:after":"display:block;opacity:1;","X [data-title]:before":"content:'';position:absolute;background:transparent;border:6px solid transparent;z-index:1002;margin-top:-12px;border-bottom-color:#69738a;margin-right:-6px;","X [data-title]:after":"content:attr(data-title);background:#69738a;color:white;padding:8px 10px;font-size:12px;line-height:12px;white-space:nowrap;margin-right:-18px;border-radius:2px;","X .vertical [data-title]:before,X .vertical [data-title]:after":"top:0%;right:200%;",
"X .vertical [data-title]:before":"border:6px solid transparent;border-left-color:#69738a;margin-top:8px;margin-right:-30px;","X .select-outline":"fill:none;stroke-width:1;shape-rendering:crispEdges;","X .select-outline-1":"stroke:white;","X .select-outline-2":"stroke:black;stroke-dasharray:2px 2px;",Y:"font-family:'Open Sans', verdana, arial, sans-serif;position:fixed;top:50px;right:20px;z-index:10000;font-size:10pt;max-width:180px;","Y p":"margin:0;","Y .notifier-note":"min-width:180px;max-width:250px;border:1px solid #fff;z-index:3000;margin:0;background-color:#8c97af;background-color:rgba(140,151,175,0.9);color:#fff;padding:10px;overflow-wrap:break-word;word-wrap:break-word;-ms-hyphens:auto;-webkit-hyphens:auto;hyphens:auto;",
"Y .notifier-close":"color:#fff;opacity:0.8;float:right;padding:0 5px;background:none;border:none;font-size:20px;font-weight:bold;line-height:20px;","Y .notifier-close:hover":"color:#444;text-decoration:none;cursor:pointer;"};for(var r in N)I=r.replace(/^,/," ,").replace(/X/g,".js-plotly-plot .plotly").replace(/Y/g,".plotly-notifier"),b.addStyleRule(I,N[r])},{"../src/lib":778}],2:[function(b,N,I){N.exports=b("../src/transforms/aggregate")},{"../src/transforms/aggregate":1365}],3:[function(b,N,I){N.exports=
b("../src/traces/bar")},{"../src/traces/bar":929}],4:[function(b,N,I){N.exports=b("../src/traces/barpolar")},{"../src/traces/barpolar":942}],5:[function(b,N,I){N.exports=b("../src/traces/box")},{"../src/traces/box":952}],6:[function(b,N,I){N.exports=b("../src/components/calendars")},{"../src/components/calendars":641}],7:[function(b,N,I){N.exports=b("../src/traces/candlestick")},{"../src/traces/candlestick":961}],8:[function(b,N,I){N.exports=b("../src/traces/carpet")},{"../src/traces/carpet":980}],
9:[function(b,N,I){N.exports=b("../src/traces/choropleth")},{"../src/traces/choropleth":994}],10:[function(b,N,I){N.exports=b("../src/traces/choroplethmapbox")},{"../src/traces/choroplethmapbox":1001}],11:[function(b,N,I){N.exports=b("../src/traces/cone")},{"../src/traces/cone":1007}],12:[function(b,N,I){N.exports=b("../src/traces/contour")},{"../src/traces/contour":1022}],13:[function(b,N,I){N.exports=b("../src/traces/contourcarpet")},{"../src/traces/contourcarpet":1033}],14:[function(b,N,I){N.exports=
b("../src/core")},{"../src/core":755}],15:[function(b,N,I){N.exports=b("../src/traces/densitymapbox")},{"../src/traces/densitymapbox":1041}],16:[function(b,N,I){N.exports=b("../src/transforms/filter")},{"../src/transforms/filter":1366}],17:[function(b,N,I){N.exports=b("../src/traces/funnel")},{"../src/traces/funnel":1051}],18:[function(b,N,I){N.exports=b("../src/traces/funnelarea")},{"../src/traces/funnelarea":1060}],19:[function(b,N,I){N.exports=b("../src/transforms/groupby")},{"../src/transforms/groupby":1367}],
20:[function(b,N,I){N.exports=b("../src/traces/heatmap")},{"../src/traces/heatmap":1073}],21:[function(b,N,I){N.exports=b("../src/traces/heatmapgl")},{"../src/traces/heatmapgl":1083}],22:[function(b,N,I){N.exports=b("../src/traces/histogram")},{"../src/traces/histogram":1095}],23:[function(b,N,I){N.exports=b("../src/traces/histogram2d")},{"../src/traces/histogram2d":1101}],24:[function(b,N,I){N.exports=b("../src/traces/histogram2dcontour")},{"../src/traces/histogram2dcontour":1105}],25:[function(b,
N,I){N.exports=b("../src/traces/image")},{"../src/traces/image":1113}],26:[function(b,N,I){I=b("./core");I.register([b("./bar"),b("./box"),b("./heatmap"),b("./histogram"),b("./histogram2d"),b("./histogram2dcontour"),b("./contour"),b("./scatterternary"),b("./violin"),b("./funnel"),b("./waterfall"),b("./image"),b("./pie"),b("./sunburst"),b("./treemap"),b("./funnelarea"),b("./scatter3d"),b("./surface"),b("./isosurface"),b("./volume"),b("./mesh3d"),b("./cone"),b("./streamtube"),b("./scattergeo"),b("./choropleth"),
b("./scattergl"),b("./splom"),b("./pointcloud"),b("./heatmapgl"),b("./parcoords"),b("./parcats"),b("./scattermapbox"),b("./choroplethmapbox"),b("./densitymapbox"),b("./sankey"),b("./indicator"),b("./table"),b("./carpet"),b("./scattercarpet"),b("./contourcarpet"),b("./ohlc"),b("./candlestick"),b("./scatterpolar"),b("./scatterpolargl"),b("./barpolar")]);I.register([b("./aggregate"),b("./filter"),b("./groupby"),b("./sort")]);I.register([b("./calendars")]);N.exports=I},{"./aggregate":2,"./bar":3,"./barpolar":4,
"./box":5,"./calendars":6,"./candlestick":7,"./carpet":8,"./choropleth":9,"./choroplethmapbox":10,"./cone":11,"./contour":12,"./contourcarpet":13,"./core":14,"./densitymapbox":15,"./filter":16,"./funnel":17,"./funnelarea":18,"./groupby":19,"./heatmap":20,"./heatmapgl":21,"./histogram":22,"./histogram2d":23,"./histogram2dcontour":24,"./image":25,"./indicator":27,"./isosurface":28,"./mesh3d":29,"./ohlc":30,"./parcats":31,"./parcoords":32,"./pie":33,"./pointcloud":34,"./sankey":35,"./scatter3d":36,"./scattercarpet":37,
"./scattergeo":38,"./scattergl":39,"./scattermapbox":40,"./scatterpolar":41,"./scatterpolargl":42,"./scatterternary":43,"./sort":44,"./splom":45,"./streamtube":46,"./sunburst":47,"./surface":48,"./table":49,"./treemap":50,"./violin":51,"./volume":52,"./waterfall":53}],27:[function(b,N,I){N.exports=b("../src/traces/indicator")},{"../src/traces/indicator":1121}],28:[function(b,N,I){N.exports=b("../src/traces/isosurface")},{"../src/traces/isosurface":1127}],29:[function(b,N,I){N.exports=b("../src/traces/mesh3d")},
{"../src/traces/mesh3d":1132}],30:[function(b,N,I){N.exports=b("../src/traces/ohlc")},{"../src/traces/ohlc":1137}],31:[function(b,N,I){N.exports=b("../src/traces/parcats")},{"../src/traces/parcats":1146}],32:[function(b,N,I){N.exports=b("../src/traces/parcoords")},{"../src/traces/parcoords":1156}],33:[function(b,N,I){N.exports=b("../src/traces/pie")},{"../src/traces/pie":1167}],34:[function(b,N,I){N.exports=b("../src/traces/pointcloud")},{"../src/traces/pointcloud":1176}],35:[function(b,N,I){N.exports=
b("../src/traces/sankey")},{"../src/traces/sankey":1182}],36:[function(b,N,I){N.exports=b("../src/traces/scatter3d")},{"../src/traces/scatter3d":1220}],37:[function(b,N,I){N.exports=b("../src/traces/scattercarpet")},{"../src/traces/scattercarpet":1227}],38:[function(b,N,I){N.exports=b("../src/traces/scattergeo")},{"../src/traces/scattergeo":1235}],39:[function(b,N,I){N.exports=b("../src/traces/scattergl")},{"../src/traces/scattergl":1248}],40:[function(b,N,I){N.exports=b("../src/traces/scattermapbox")},
{"../src/traces/scattermapbox":1258}],41:[function(b,N,I){N.exports=b("../src/traces/scatterpolar")},{"../src/traces/scatterpolar":1266}],42:[function(b,N,I){N.exports=b("../src/traces/scatterpolargl")},{"../src/traces/scatterpolargl":1273}],43:[function(b,N,I){N.exports=b("../src/traces/scatterternary")},{"../src/traces/scatterternary":1281}],44:[function(b,N,I){N.exports=b("../src/transforms/sort")},{"../src/transforms/sort":1369}],45:[function(b,N,I){N.exports=b("../src/traces/splom")},{"../src/traces/splom":1290}],
46:[function(b,N,I){N.exports=b("../src/traces/streamtube")},{"../src/traces/streamtube":1298}],47:[function(b,N,I){N.exports=b("../src/traces/sunburst")},{"../src/traces/sunburst":1306}],48:[function(b,N,I){N.exports=b("../src/traces/surface")},{"../src/traces/surface":1315}],49:[function(b,N,I){N.exports=b("../src/traces/table")},{"../src/traces/table":1323}],50:[function(b,N,I){N.exports=b("../src/traces/treemap")},{"../src/traces/treemap":1332}],51:[function(b,N,I){N.exports=b("../src/traces/violin")},
{"../src/traces/violin":1344}],52:[function(b,N,I){N.exports=b("../src/traces/volume")},{"../src/traces/volume":1352}],53:[function(b,N,I){N.exports=b("../src/traces/waterfall")},{"../src/traces/waterfall":1360}],54:[function(b,N,I){function r(h,g){this._controllerNames=Object.keys(h);this._controllerList=this._controllerNames.map(function(n){return h[n]});this._mode=g;this._active=h[g];this._active||(this._mode="turntable",this._active=h.turntable);this.modes=this._controllerNames;this.computedMatrix=
this._active.computedMatrix;this.computedEye=this._active.computedEye;this.computedUp=this._active.computedUp;this.computedCenter=this._active.computedCenter;this.computedRadius=this._active.computedRadius}N.exports=function(h){h=h||{};var g=h.eye||[0,0,1],n=h.center||[0,0,0],p=h.up||[0,1,0],d=h.distanceLimits||[0,Infinity];h=h.mode||"turntable";var e=q(),f=m(),k=l();e.setDistanceLimits(d[0],d[1]);e.lookAt(0,g,n,p);f.setDistanceLimits(d[0],d[1]);f.lookAt(0,g,n,p);k.setDistanceLimits(d[0],d[1]);k.lookAt(0,
g,n,p);return new r({turntable:e,orbit:f,matrix:k},h)};var q=b("turntable-camera-controller"),m=b("orbit-camera-controller"),l=b("matrix-camera-controller"),a=r.prototype;[["flush",1],["idle",1],["lookAt",4],["rotate",4],["pan",4],["translate",4],["setMatrix",2],["setDistanceLimits",2],["setDistance",2]].forEach(function(h){for(var g=h[0],n=[],p=0;p<h[1];++p)n.push("a"+p);h="var cc\x3dthis._controllerList;for(var i\x3d0;i\x3ccc.length;++i){cc[i]."+h[0]+"("+n.join()+")}";a[g]=Function.apply(null,n.concat(h))});
a.recalcMatrix=function(h){this._active.recalcMatrix(h)};a.getDistance=function(h){return this._active.getDistance(h)};a.getDistanceLimits=function(h){return this._active.getDistanceLimits(h)};a.lastT=function(){return this._active.lastT()};a.setMode=function(h){if(h!==this._mode){var g=this._controllerNames.indexOf(h);if(!(0>g)){var n=this._active;g=this._controllerList[g];var p=Math.max(n.lastT(),g.lastT());n.recalcMatrix(p);g.setMatrix(p,n.computedMatrix);this._active=g;this._mode=h;this.computedMatrix=
this._active.computedMatrix;this.computedEye=this._active.computedEye;this.computedUp=this._active.computedUp;this.computedCenter=this._active.computedCenter;this.computedRadius=this._active.computedRadius}}};a.getMode=function(){return this._mode}},{"matrix-camera-controller":480,"orbit-camera-controller":501,"turntable-camera-controller":581}],55:[function(b,N,I){(function(r,q){"object"===typeof I&&"undefined"!==typeof N?q(I,b("d3-array"),b("d3-collection"),b("d3-shape"),b("elementary-circuits-directed-graph")):
q(r.d3=r.d3||{},r.d3,r.d3,r.d3,null)})(this,function(r,q,m,l,a){function h(da){return da.target.depth}function g(da,oa){return da.sourceLinks.length?da.depth:oa-1}function n(da){return function(){return da}}function p(da,oa){return e(da.source,oa.source)||da.index-oa.index}function d(da,oa){return e(da.target,oa.target)||da.index-oa.index}function e(da,oa){return da.partOfCycle===oa.partOfCycle?da.y0-oa.y0:"top"===da.circularLinkType||"bottom"===oa.circularLinkType?-1:1}function f(da){return da.value}
function k(da){return(da.y0+da.y1)/2}function t(da){return k(da.source)}function v(da){return k(da.target)}function w(da){return da.index}function y(da){return da.nodes}function B(da){return da.links}function A(da,oa){da=da.get(oa);if(!da)throw Error("missing: "+oa);return da}function z(da,oa,sa){var ma=0;if(null===sa){var qa=[];for(oa=0;oa<da.links.length;oa++){var pa=da.links[oa],na=pa.source.index;pa=pa.target.index;qa[na]||(qa[na]=[]);qa[pa]||(qa[pa]=[]);-1===qa[na].indexOf(pa)&&qa[na].push(pa)}qa=
a(qa);qa.sort(function(ua,va){return ua.length-va.length});var ka={};for(oa=0;oa<qa.length;oa++)na=qa[oa].slice(-2),ka[na[0]]||(ka[na[0]]={}),ka[na[0]][na[1]]=!0;da.links.forEach(function(ua){var va=ua.target.index,Ca=ua.source.index;va===Ca||ka[Ca]&&ka[Ca][va]?(ua.circular=!0,ua.circularLinkID=ma,ma+=1):ua.circular=!1})}else da.links.forEach(function(ua){ua.source[sa]<ua.target[sa]?ua.circular=!1:(ua.circular=!0,ua.circularLinkID=ma,ma+=1)})}function E(da,oa){var sa=0,ma=0;da.links.forEach(function(qa){qa.circular&&
(qa.circularLinkType=qa.source.circularLinkType||qa.target.circularLinkType?qa.source.circularLinkType?qa.source.circularLinkType:qa.target.circularLinkType:sa<ma?"top":"bottom","top"==qa.circularLinkType?sa+=1:ma+=1,da.nodes.forEach(function(pa){if(oa(pa)==oa(qa.source)||oa(pa)==oa(qa.target))pa.circularLinkType=qa.circularLinkType}))});da.links.forEach(function(qa){qa.circular&&(qa.source.circularLinkType==qa.target.circularLinkType&&(qa.circularLinkType=qa.source.circularLinkType),ia(qa,oa)&&(qa.circularLinkType=
qa.source.circularLinkType))})}function C(da){return Math.atan(Math.abs(da.target.x0-da.source.x1)/Math.abs(da.y1-da.y0))}function u(da,oa){var sa=0;da.sourceLinks.forEach(function(qa){sa=qa.circular&&!ia(qa,oa)?sa+1:sa});var ma=0;da.targetLinks.forEach(function(qa){ma=qa.circular&&!ia(qa,oa)?ma+1:ma});return sa+ma}function D(da){var oa=0;da.source.sourceLinks.forEach(function(ma){oa=ma.circular?oa+1:oa});var sa=0;da.target.targetLinks.forEach(function(ma){sa=ma.circular?sa+1:sa});return 1<oa||1<
sa?!1:!0}function G(da,oa,sa){da.sort(L);da.forEach(function(ma,qa){var pa=0;if(!ia(ma,sa)||!D(ma)){var na=0;for(na;na<qa;na++){var ka=da[qa];var ua=da[na];ka=ka.source.column<ua.target.column?!1:ka.target.column>ua.source.column?!1:!0;ka&&(ka=da[na].circularPathData.verticalBuffer+da[na].width/2+oa,pa=ka>pa?ka:pa)}}ma.circularPathData.verticalBuffer=pa+ma.width/2});return da}function J(da,oa,sa,ma){var qa=q.min(da.links,function(na){return na.source.y0});da.links.forEach(function(na){na.circular&&
(na.circularPathData={})});var pa=da.links.filter(function(na){return"top"==na.circularLinkType});G(pa,oa,ma);pa=da.links.filter(function(na){return"bottom"==na.circularLinkType});G(pa,oa,ma);da.links.forEach(function(na){if(na.circular){na.circularPathData.arcRadius=na.width+10;na.circularPathData.leftNodeBuffer=5;na.circularPathData.rightNodeBuffer=5;na.circularPathData.sourceWidth=na.source.x1-na.source.x0;na.circularPathData.sourceX=na.source.x0+na.circularPathData.sourceWidth;na.circularPathData.targetX=
na.target.x0;na.circularPathData.sourceY=na.y0;na.circularPathData.targetY=na.y1;if(ia(na,ma)&&D(na))na.circularPathData.leftSmallArcRadius=10+na.width/2,na.circularPathData.leftLargeArcRadius=10+na.width/2,na.circularPathData.rightSmallArcRadius=10+na.width/2,na.circularPathData.rightLargeArcRadius=10+na.width/2,"bottom"==na.circularLinkType?(na.circularPathData.verticalFullExtent=na.source.y1+25+na.circularPathData.verticalBuffer,na.circularPathData.verticalLeftInnerExtent=na.circularPathData.verticalFullExtent-
na.circularPathData.leftLargeArcRadius,na.circularPathData.verticalRightInnerExtent=na.circularPathData.verticalFullExtent-na.circularPathData.rightLargeArcRadius):(na.circularPathData.verticalFullExtent=na.source.y0-25-na.circularPathData.verticalBuffer,na.circularPathData.verticalLeftInnerExtent=na.circularPathData.verticalFullExtent+na.circularPathData.leftLargeArcRadius,na.circularPathData.verticalRightInnerExtent=na.circularPathData.verticalFullExtent+na.circularPathData.rightLargeArcRadius);
else{var ka=na.source.column,ua=na.circularLinkType,va=da.links.filter(function(Ma){return Ma.source.column==ka&&Ma.circularLinkType==ua});"bottom"==na.circularLinkType?va.sort(H):va.sort(K);var Ca=0;va.forEach(function(Ma,Ua){Ma.circularLinkID==na.circularLinkID&&(na.circularPathData.leftSmallArcRadius=10+na.width/2+Ca,na.circularPathData.leftLargeArcRadius=10+na.width/2+Ua*oa+Ca);Ca+=Ma.width});ka=na.target.column;va=da.links.filter(function(Ma){return Ma.target.column==ka&&Ma.circularLinkType==
ua});"bottom"==na.circularLinkType?va.sort(M):va.sort(Q);Ca=0;va.forEach(function(Ma,Ua){Ma.circularLinkID==na.circularLinkID&&(na.circularPathData.rightSmallArcRadius=10+na.width/2+Ca,na.circularPathData.rightLargeArcRadius=10+na.width/2+Ua*oa+Ca);Ca+=Ma.width});"bottom"==na.circularLinkType?(na.circularPathData.verticalFullExtent=Math.max(sa,na.source.y1,na.target.y1)+25+na.circularPathData.verticalBuffer,na.circularPathData.verticalLeftInnerExtent=na.circularPathData.verticalFullExtent-na.circularPathData.leftLargeArcRadius,
na.circularPathData.verticalRightInnerExtent=na.circularPathData.verticalFullExtent-na.circularPathData.rightLargeArcRadius):(na.circularPathData.verticalFullExtent=qa-25-na.circularPathData.verticalBuffer,na.circularPathData.verticalLeftInnerExtent=na.circularPathData.verticalFullExtent+na.circularPathData.leftLargeArcRadius,na.circularPathData.verticalRightInnerExtent=na.circularPathData.verticalFullExtent+na.circularPathData.rightLargeArcRadius)}na.circularPathData.leftInnerExtent=na.circularPathData.sourceX+
na.circularPathData.leftNodeBuffer;na.circularPathData.rightInnerExtent=na.circularPathData.targetX-na.circularPathData.rightNodeBuffer;na.circularPathData.leftFullExtent=na.circularPathData.sourceX+na.circularPathData.leftLargeArcRadius+na.circularPathData.leftNodeBuffer;na.circularPathData.rightFullExtent=na.circularPathData.targetX-na.circularPathData.rightLargeArcRadius-na.circularPathData.rightNodeBuffer}na.circular?na.path="top"==na.circularLinkType?"M"+na.circularPathData.sourceX+" "+na.circularPathData.sourceY+
" L"+na.circularPathData.leftInnerExtent+" "+na.circularPathData.sourceY+" A"+na.circularPathData.leftLargeArcRadius+" "+na.circularPathData.leftSmallArcRadius+" 0 0 0 "+na.circularPathData.leftFullExtent+" "+(na.circularPathData.sourceY-na.circularPathData.leftSmallArcRadius)+" L"+na.circularPathData.leftFullExtent+" "+na.circularPathData.verticalLeftInnerExtent+" A"+na.circularPathData.leftLargeArcRadius+" "+na.circularPathData.leftLargeArcRadius+" 0 0 0 "+na.circularPathData.leftInnerExtent+" "+
na.circularPathData.verticalFullExtent+" L"+na.circularPathData.rightInnerExtent+" "+na.circularPathData.verticalFullExtent+" A"+na.circularPathData.rightLargeArcRadius+" "+na.circularPathData.rightLargeArcRadius+" 0 0 0 "+na.circularPathData.rightFullExtent+" "+na.circularPathData.verticalRightInnerExtent+" L"+na.circularPathData.rightFullExtent+" "+(na.circularPathData.targetY-na.circularPathData.rightSmallArcRadius)+" A"+na.circularPathData.rightLargeArcRadius+" "+na.circularPathData.rightSmallArcRadius+
" 0 0 0 "+na.circularPathData.rightInnerExtent+" "+na.circularPathData.targetY+" L"+na.circularPathData.targetX+" "+na.circularPathData.targetY:"M"+na.circularPathData.sourceX+" "+na.circularPathData.sourceY+" L"+na.circularPathData.leftInnerExtent+" "+na.circularPathData.sourceY+" A"+na.circularPathData.leftLargeArcRadius+" "+na.circularPathData.leftSmallArcRadius+" 0 0 1 "+na.circularPathData.leftFullExtent+" "+(na.circularPathData.sourceY+na.circularPathData.leftSmallArcRadius)+" L"+na.circularPathData.leftFullExtent+
" "+na.circularPathData.verticalLeftInnerExtent+" A"+na.circularPathData.leftLargeArcRadius+" "+na.circularPathData.leftLargeArcRadius+" 0 0 1 "+na.circularPathData.leftInnerExtent+" "+na.circularPathData.verticalFullExtent+" L"+na.circularPathData.rightInnerExtent+" "+na.circularPathData.verticalFullExtent+" A"+na.circularPathData.rightLargeArcRadius+" "+na.circularPathData.rightLargeArcRadius+" 0 0 1 "+na.circularPathData.rightFullExtent+" "+na.circularPathData.verticalRightInnerExtent+" L"+na.circularPathData.rightFullExtent+
" "+(na.circularPathData.targetY+na.circularPathData.rightSmallArcRadius)+" A"+na.circularPathData.rightLargeArcRadius+" "+na.circularPathData.rightSmallArcRadius+" 0 0 1 "+na.circularPathData.rightInnerExtent+" "+na.circularPathData.targetY+" L"+na.circularPathData.targetX+" "+na.circularPathData.targetY:(va=l.linkHorizontal().source(function(Ma){return[Ma.source.x0+(Ma.source.x1-Ma.source.x0),Ma.y0]}).target(function(Ma){return[Ma.target.x0,Ma.y1]}),na.path=va(na))})}function L(da,oa){return P(da)==
P(oa)?"bottom"==da.circularLinkType?H(da,oa):K(da,oa):P(oa)-P(da)}function K(da,oa){return da.y0-oa.y0}function H(da,oa){return oa.y0-da.y0}function Q(da,oa){return da.y1-oa.y1}function M(da,oa){return oa.y1-da.y1}function P(da){return da.target.column-da.source.column}function T(da,oa){var sa=C(da);oa=(oa.target.x0-oa.source.x1)/Math.tan(sa);return"up"==ca(da)?da.y1+oa:da.y1-oa}function O(da,oa){var sa=C(da);oa=(oa.target.x0-oa.source.x1)/Math.tan(sa);return"up"==ca(da)?da.y1-oa:da.y1+oa}function U(da,
oa,sa,ma){da.links.forEach(function(qa){if(!qa.circular&&1<qa.target.column-qa.source.column){var pa=qa.source.column+1,na=qa.target.column-1,ka=1,ua=na-pa+1;for(ka=1;pa<=na;pa++,ka++)da.nodes.forEach(function(va){if(va.column==pa){var Ca=ka/(ua+1),Ma=Math.pow(1-Ca,3)*qa.y0+3*Ca*Math.pow(1-Ca,2)*qa.y0+3*Math.pow(Ca,2)*(1-Ca)*qa.y1+Math.pow(Ca,3)*qa.y1;Ca=Ma-qa.width/2;Ma+=qa.width/2;if(Ca>va.y0&&Ca<va.y1){var Ua=va.y1-Ca+10;Ua="bottom"==va.circularLinkType?Ua:-Ua;va=S(va,Ua,oa,sa);da.nodes.forEach(function(eb){ma(eb)!=
ma(va)&&eb.column==va.column&&(va.y0>eb.y0&&va.y0<eb.y1||va.y1>eb.y0&&va.y1<eb.y1||va.y0<eb.y0&&va.y1>eb.y1)&&S(eb,Ua,oa,sa)})}else Ma>va.y0&&Ma<va.y1?(Ua=Ma-va.y0+10,va=S(va,Ua,oa,sa),da.nodes.forEach(function(eb){ma(eb)!=ma(va)&&eb.column==va.column&&eb.y0<va.y1&&eb.y1>va.y1&&S(eb,Ua,oa,sa)})):Ca<va.y0&&Ma>va.y1&&(Ua=Ma-va.y0+10,va=S(va,Ua,oa,sa),da.nodes.forEach(function(eb){ma(eb)!=ma(va)&&eb.column==va.column&&eb.y0<va.y1&&eb.y1>va.y1&&S(eb,Ua,oa,sa)}))}})}})}function S(da,oa,sa,ma){da.y0+oa>=
sa&&da.y1+oa<=ma&&(da.y0+=oa,da.y1+=oa,da.targetLinks.forEach(function(qa){qa.y1+=oa}),da.sourceLinks.forEach(function(qa){qa.y0+=oa}));return da}function X(da,oa,sa,ma){da.nodes.forEach(function(qa){ma&&qa.y+(qa.y1-qa.y0)>oa&&(qa.y-=qa.y+(qa.y1-qa.y0)-oa);var pa=da.links.filter(function(ua){return sa(ua.source)==sa(qa)}),na=pa.length;1<na&&pa.sort(function(ua,va){if(!ua.circular&&!va.circular)if(ua.target.column!=va.target.column&&ca(ua)==ca(va)){if(ua.target.column>va.target.column)return va=O(va,
ua),ua.y1-va;if(va.target.column>ua.target.column)return O(ua,va)-va.y1}else return ua.y1-va.y1;if(ua.circular&&!va.circular)return"top"==ua.circularLinkType?-1:1;if(va.circular&&!ua.circular)return"top"==va.circularLinkType?1:-1;if(ua.circular&&va.circular)return ua.circularLinkType===va.circularLinkType&&"top"==ua.circularLinkType?ua.target.column===va.target.column?ua.target.y1-va.target.y1:va.target.column-ua.target.column:ua.circularLinkType===va.circularLinkType&&"bottom"==ua.circularLinkType?
ua.target.column===va.target.column?va.target.y1-ua.target.y1:ua.target.column-va.target.column:"top"==ua.circularLinkType?-1:1});var ka=qa.y0;pa.forEach(function(ua){ua.y0=ka+ua.width/2;ka+=ua.width});pa.forEach(function(ua,va){if("bottom"==ua.circularLinkType){va+=1;var Ca=0;for(va;va<na;va++)Ca+=pa[va].width;ua.y0=qa.y1-Ca-ua.width/2}})})}function ba(da,oa,sa){da.nodes.forEach(function(ma){var qa=da.links.filter(function(ka){return sa(ka.target)==sa(ma)}),pa=qa.length;1<pa&&qa.sort(function(ka,
ua){if(!ka.circular&&!ua.circular)if(ka.source.column!=ua.source.column&&ca(ka)==ca(ua)){if(ua.source.column<ka.source.column)return ua=T(ua,ka),ka.y0-ua;if(ka.source.column<ua.source.column)return T(ka,ua)-ua.y0}else return ka.y0-ua.y0;if(ka.circular&&!ua.circular)return"top"==ka.circularLinkType?-1:1;if(ua.circular&&!ka.circular)return"top"==ua.circularLinkType?1:-1;if(ka.circular&&ua.circular)return ka.circularLinkType===ua.circularLinkType&&"top"==ka.circularLinkType?ka.source.column===ua.source.column?
ka.source.y1-ua.source.y1:ka.source.column-ua.source.column:ka.circularLinkType===ua.circularLinkType&&"bottom"==ka.circularLinkType?ka.source.column===ua.source.column?ka.source.y1-ua.source.y1:ua.source.column-ka.source.column:"top"==ka.circularLinkType?-1:1});var na=ma.y0;qa.forEach(function(ka){ka.y1=na+ka.width/2;na+=ka.width});qa.forEach(function(ka,ua){if("bottom"==ka.circularLinkType){ua+=1;var va=0;for(ua;ua<pa;ua++)va+=qa[ua].width;ka.y1=ma.y1-va-ka.width/2}})})}function ca(da){return 0<
da.y0-da.y1?"up":"down"}function ia(da,oa){return oa(da.source)==oa(da.target)}function ja(da,oa,sa){var ma=da.nodes;da=da.links;var qa=!1,pa=!1;da.forEach(function(va){"top"==va.circularLinkType?qa=!0:"bottom"==va.circularLinkType&&(pa=!0)});if(0==qa||0==pa){var na=q.min(ma,function(va){return va.y0}),ka=q.max(ma,function(va){return va.y1}),ua=(sa-oa)/(ka-na);ma.forEach(function(va){var Ca=(va.y1-va.y0)*ua;va.y0=(va.y0-na)*ua;va.y1=va.y0+Ca});da.forEach(function(va){va.y0=(va.y0-na)*ua;va.y1=(va.y1-
na)*ua;va.width*=ua})}}a=a&&a.hasOwnProperty("default")?a["default"]:a;var la="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function(da){return typeof da}:function(da){return da&&"function"===typeof Symbol&&da.constructor===Symbol&&da!==Symbol.prototype?"symbol":typeof da};r.sankeyCircular=function(){function da(){var Ia={nodes:cb.apply(null,arguments),links:$a.apply(null,arguments)};oa(Ia);z(Ia,fb,Ea);sa(Ia);pa(Ia);E(Ia,fb);na(Ia,jb,fb);ka(Ia);for(var Oa=0;4>Oa;Oa++)X(Ia,Ma,fb),ba(Ia,
Ma,fb),U(Ia,va,Ma,fb),X(Ia,Ma,fb),ba(Ia,Ma,fb);ja(Ia,va,Ma);J(Ia,pb,Ma,fb);return Ia}function oa(Ia){Ia.nodes.forEach(function(bb,Xa){bb.index=Xa;bb.sourceLinks=[];bb.targetLinks=[]});var Oa=m.map(Ia.nodes,fb);Ia.links.forEach(function(bb,Xa){bb.index=Xa;Xa=bb.source;var tb=bb.target;"object"!==("undefined"===typeof Xa?"undefined":la(Xa))&&(Xa=bb.source=A(Oa,Xa));"object"!==("undefined"===typeof tb?"undefined":la(tb))&&(tb=bb.target=A(Oa,tb));Xa.sourceLinks.push(bb);tb.targetLinks.push(bb)});return Ia}
function sa(Ia){Ia.nodes.forEach(function(Oa){Oa.partOfCycle=!1;Oa.value=Math.max(q.sum(Oa.sourceLinks,f),q.sum(Oa.targetLinks,f));Oa.sourceLinks.forEach(function(bb){bb.circular&&(Oa.partOfCycle=!0,Oa.circularLinkType=bb.circularLinkType)});Oa.targetLinks.forEach(function(bb){bb.circular&&(Oa.partOfCycle=!0,Oa.circularLinkType=bb.circularLinkType)})})}function ma(Ia){var Oa=0,bb=0,Xa=0,tb=0,Ka=q.max(Ia.nodes,function(Ta){return Ta.column});Ia.links.forEach(function(Ta){Ta.circular&&("top"==Ta.circularLinkType?
Oa+=Ta.width:bb+=Ta.width,0==Ta.target.column&&(tb+=Ta.width),Ta.source.column==Ka&&(Xa+=Ta.width))});Oa=0<Oa?Oa+25+10:Oa;bb=0<bb?bb+25+10:bb;Xa=0<Xa?Xa+25+10:Xa;tb=0<tb?tb+25+10:tb;return{top:Oa,bottom:bb,left:tb,right:Xa}}function qa(Ia,Oa){var bb=q.max(Ia.nodes,function(Ka){return Ka.column}),Xa=Ca-ua,tb=Ma-va;Xa/=Xa+Oa.right+Oa.left;tb/=tb+Oa.top+Oa.bottom;ua=ua*Xa+Oa.left;Ca=0==Oa.right?Ca:Ca*Xa;va=va*tb+Oa.top;Ma*=tb;Ia.nodes.forEach(function(Ka){Ka.x0=ua+(Ca-ua-Ua)/bb*Ka.column;Ka.x1=Ka.x0+
Ua});return tb}function pa(Ia){var Oa;var bb=Ia.nodes;var Xa=[];for(Oa=0;bb.length;++Oa,bb=Xa,Xa=[])bb.forEach(function(tb){tb.depth=Oa;tb.sourceLinks.forEach(function(Ka){0>Xa.indexOf(Ka.target)&&!Ka.circular&&Xa.push(Ka.target)})});bb=Ia.nodes;Xa=[];for(Oa=0;bb.length;++Oa,bb=Xa,Xa=[])bb.forEach(function(tb){tb.height=Oa;tb.targetLinks.forEach(function(Ka){0>Xa.indexOf(Ka.source)&&!Ka.circular&&Xa.push(Ka.source)})});Ia.nodes.forEach(function(tb){tb.column=Math.floor(nb.call(null,tb,Oa))})}function na(Ia,
Oa,bb){function Xa(Na,ib){var qb=Ka.length;Ka.forEach(function(sb){var Ba=sb.length,Fa=sb[0].depth;sb.forEach(function(La){if((La.sourceLinks.length||La.targetLinks.length)&&!(La.partOfCycle&&0<u(La,ib)))if(0==Fa&&1==Ba){var Va=La.y1-La.y0;La.y0=Ma/2-Va/2;La.y1=Ma/2+Va/2}else if(Fa==qb-1&&1==Ba)Va=La.y1-La.y0,La.y0=Ma/2-Va/2,La.y1=Ma/2+Va/2;else{Va=q.mean(La.sourceLinks,v);var Za=q.mean(La.targetLinks,t);Va=((Va&&Za?(Va+Za)/2:Va||Za)-k(La))*Na;La.y0+=Va;La.y1+=Va}})})}function tb(){Ka.forEach(function(Na){var ib=
va,qb=Na.length,sb;Na.sort(e);for(sb=0;sb<qb;++sb){var Ba=Na[sb];var Fa=ib-Ba.y0;0<Fa&&(Ba.y0+=Fa,Ba.y1+=Fa);ib=Ba.y1+eb}Fa=ib-eb-Ma;if(0<Fa)for(ib=Ba.y0-=Fa,Ba.y1-=Fa,sb=qb-2;0<=sb;--sb)Ba=Na[sb],Fa=Ba.y1+eb-ib,0<Fa&&(Ba.y0-=Fa,Ba.y1-=Fa),ib=Ba.y0})}var Ka=m.nest().key(function(Na){return Na.column}).sortKeys(q.ascending).entries(Ia.nodes).map(function(Na){return Na.values});(function(Na){if(xa){var ib=Infinity;Ka.forEach(function(Fa){Fa=Ma*xa/(Fa.length+1);ib=Fa<ib?Fa:ib});eb=ib}var qb=q.min(Ka,
function(Fa){return(Ma-va-(Fa.length-1)*eb)/q.sum(Fa,f)});qb*=.3;Ia.links.forEach(function(Fa){Fa.width=Fa.value*qb});var sb=ma(Ia),Ba=qa(Ia,sb);qb*=Ba;Ia.links.forEach(function(Fa){Fa.width=Fa.value*qb});Ka.forEach(function(Fa){var La=Fa.length;Fa.forEach(function(Va,Za){Va.depth==Ka.length-1&&1==La?Va.y0=Ma/2-Va.value*qb:0==Va.depth&&1==La?Va.y0=Ma/2-Va.value*qb:Va.partOfCycle?0==u(Va,Na)?Va.y0=Ma/2+Za:Va.y0="top"==Va.circularLinkType?va+Za:Ma-Va.value*qb-Za:Va.y0=0==sb.top||0==sb.bottom?(Ma-va)/
La*Za:(Ma-va)/2-La/2+Za;Va.y1=Va.y0+Va.value*qb})})})(bb);tb();for(var Ta=1;0<Oa;--Oa)Xa(Ta*=.99,bb),tb()}function ka(Ia){Ia.nodes.forEach(function(Oa){Oa.sourceLinks.sort(d);Oa.targetLinks.sort(p)});Ia.nodes.forEach(function(Oa){var bb=Oa.y0,Xa=bb,tb=Oa.y1,Ka=tb;Oa.sourceLinks.forEach(function(Ta){Ta.circular?(Ta.y0=tb-Ta.width/2,tb-=Ta.width):(Ta.y0=bb+Ta.width/2,bb+=Ta.width)});Oa.targetLinks.forEach(function(Ta){Ta.circular?(Ta.y1=Ka-Ta.width/2,Ka-=Ta.width):(Ta.y1=Xa+Ta.width/2,Xa+=Ta.width)})})}
var ua=0,va=0,Ca=1,Ma=1,Ua=24,eb,fb=w,nb=g,cb=y,$a=B,jb=32,pb=2,xa,Ea=null;da.nodeId=function(Ia){return arguments.length?(fb="function"===typeof Ia?Ia:n(Ia),da):fb};da.nodeAlign=function(Ia){return arguments.length?(nb="function"===typeof Ia?Ia:n(Ia),da):nb};da.nodeWidth=function(Ia){return arguments.length?(Ua=+Ia,da):Ua};da.nodePadding=function(Ia){return arguments.length?(eb=+Ia,da):eb};da.nodes=function(Ia){return arguments.length?(cb="function"===typeof Ia?Ia:n(Ia),da):cb};da.links=function(Ia){return arguments.length?
($a="function"===typeof Ia?Ia:n(Ia),da):$a};da.size=function(Ia){return arguments.length?(ua=va=0,Ca=+Ia[0],Ma=+Ia[1],da):[Ca-ua,Ma-va]};da.extent=function(Ia){return arguments.length?(ua=+Ia[0][0],Ca=+Ia[1][0],va=+Ia[0][1],Ma=+Ia[1][1],da):[[ua,va],[Ca,Ma]]};da.iterations=function(Ia){return arguments.length?(jb=+Ia,da):jb};da.circularLinkGap=function(Ia){return arguments.length?(pb=+Ia,da):pb};da.nodePaddingRatio=function(Ia){return arguments.length?(xa=+Ia,da):xa};da.sortNodes=function(Ia){return arguments.length?
(Ea=Ia,da):Ea};da.update=function(Ia){E(Ia,fb);ka(Ia);Ia.links.forEach(function(Oa){Oa.circular&&(Oa.circularLinkType=Oa.y0+Oa.y1<Ma?"top":"bottom",Oa.source.circularLinkType=Oa.circularLinkType,Oa.target.circularLinkType=Oa.circularLinkType)});X(Ia,Ma,fb,!1);ba(Ia,Ma,fb);J(Ia,pb,Ma,fb);return Ia};return da};r.sankeyCenter=function(da){return da.targetLinks.length?da.depth:da.sourceLinks.length?q.min(da.sourceLinks,h)-1:0};r.sankeyLeft=function(da){return da.depth};r.sankeyRight=function(da,oa){return oa-
1-da.height};r.sankeyJustify=g;Object.defineProperty(r,"__esModule",{value:!0})})},{"d3-array":156,"d3-collection":157,"d3-shape":165,"elementary-circuits-directed-graph":179}],56:[function(b,N,I){(function(r,q){"object"===typeof I&&"undefined"!==typeof N?q(I,b("d3-array"),b("d3-collection"),b("d3-shape")):q(r.d3=r.d3||{},r.d3,r.d3,r.d3)})(this,function(r,q,m,l){function a(E){return E.target.depth}function h(E,C){return E.sourceLinks.length?E.depth:C-1}function g(E){return function(){return E}}function n(E,
C){return d(E.source,C.source)||E.index-C.index}function p(E,C){return d(E.target,C.target)||E.index-C.index}function d(E,C){return E.y0-C.y0}function e(E){return E.value}function f(E){return(E.y0+E.y1)/2}function k(E){return f(E.source)*E.value}function t(E){return f(E.target)*E.value}function v(E){return E.index}function w(E){return E.nodes}function y(E){return E.links}function B(E,C){E=E.get(C);if(!E)throw Error("missing: "+C);return E}function A(E){return[E.source.x1,E.y0]}function z(E){return[E.target.x0,
E.y1]}r.sankey=function(){function E(){var ca={nodes:U.apply(null,arguments),links:S.apply(null,arguments)};C(ca);u(ca);D(ca);G(ca,X);J(ca);return ca}function C(ca){ca.nodes.forEach(function(ja,la){ja.index=la;ja.sourceLinks=[];ja.targetLinks=[]});var ia=m.map(ca.nodes,T);ca.links.forEach(function(ja,la){ja.index=la;la=ja.source;var da=ja.target;"object"!==typeof la&&(la=ja.source=B(ia,la));"object"!==typeof da&&(da=ja.target=B(ia,da));la.sourceLinks.push(ja);da.targetLinks.push(ja)})}function u(ca){ca.nodes.forEach(function(ia){ia.value=
Math.max(q.sum(ia.sourceLinks,e),q.sum(ia.targetLinks,e))})}function D(ca){var ia;var ja=ca.nodes;var la=[];for(ia=0;ja.length;++ia,ja=la,la=[])ja.forEach(function(oa){oa.depth=ia;oa.sourceLinks.forEach(function(sa){0>la.indexOf(sa.target)&&la.push(sa.target)})});ja=ca.nodes;la=[];for(ia=0;ja.length;++ia,ja=la,la=[])ja.forEach(function(oa){oa.height=ia;oa.targetLinks.forEach(function(sa){0>la.indexOf(sa.source)&&la.push(sa.source)})});var da=(H-L-M)/(ia-1);ca.nodes.forEach(function(oa){oa.x1=(oa.x0=
L+Math.max(0,Math.min(ia-1,Math.floor(O.call(null,oa,ia))))*da)+M})}function G(ca){function ia(ma){da.forEach(function(qa){qa.forEach(function(pa){if(pa.targetLinks.length){var na=(q.sum(pa.targetLinks,k)/q.sum(pa.targetLinks,e)-f(pa))*ma;pa.y0+=na;pa.y1+=na}})})}function ja(ma){da.slice().reverse().forEach(function(qa){qa.forEach(function(pa){if(pa.sourceLinks.length){var na=(q.sum(pa.sourceLinks,t)/q.sum(pa.sourceLinks,e)-f(pa))*ma;pa.y0+=na;pa.y1+=na}})})}function la(){da.forEach(function(ma){var qa=
K,pa=ma.length,na;ma.sort(d);for(na=0;na<pa;++na){var ka=ma[na];var ua=qa-ka.y0;0<ua&&(ka.y0+=ua,ka.y1+=ua);qa=ka.y1+P}ua=qa-P-Q;if(0<ua)for(qa=ka.y0-=ua,ka.y1-=ua,na=pa-2;0<=na;--na)ka=ma[na],ua=ka.y1+P-qa,0<ua&&(ka.y0-=ua,ka.y1-=ua),qa=ka.y0})}var da=m.nest().key(function(ma){return ma.x0}).sortKeys(q.ascending).entries(ca.nodes).map(function(ma){return ma.values});(function(){var ma=q.max(da,function(pa){return pa.length});ma=ba*(Q-K)/(ma-1);P>ma&&(P=ma);var qa=q.min(da,function(pa){return(Q-K-
(pa.length-1)*P)/q.sum(pa,e)});da.forEach(function(pa){pa.forEach(function(na,ka){na.y1=(na.y0=ka)+na.value*qa})});ca.links.forEach(function(pa){pa.width=pa.value*qa})})();la();for(var oa=1,sa=X;0<sa;--sa)ja(oa*=.99),la(),ia(oa),la()}function J(ca){ca.nodes.forEach(function(ia){ia.sourceLinks.sort(p);ia.targetLinks.sort(n)});ca.nodes.forEach(function(ia){var ja=ia.y0,la=ja;ia.sourceLinks.forEach(function(da){da.y0=ja+da.width/2;ja+=da.width});ia.targetLinks.forEach(function(da){da.y1=la+da.width/
2;la+=da.width})})}var L=0,K=0,H=1,Q=1,M=24,P=8,T=v,O=h,U=w,S=y,X=32,ba=2/3;E.update=function(ca){J(ca);return ca};E.nodeId=function(ca){return arguments.length?(T="function"===typeof ca?ca:g(ca),E):T};E.nodeAlign=function(ca){return arguments.length?(O="function"===typeof ca?ca:g(ca),E):O};E.nodeWidth=function(ca){return arguments.length?(M=+ca,E):M};E.nodePadding=function(ca){return arguments.length?(P=+ca,E):P};E.nodes=function(ca){return arguments.length?(U="function"===typeof ca?ca:g(ca),E):
U};E.links=function(ca){return arguments.length?(S="function"===typeof ca?ca:g(ca),E):S};E.size=function(ca){return arguments.length?(L=K=0,H=+ca[0],Q=+ca[1],E):[H-L,Q-K]};E.extent=function(ca){return arguments.length?(L=+ca[0][0],H=+ca[1][0],K=+ca[0][1],Q=+ca[1][1],E):[[L,K],[H,Q]]};E.iterations=function(ca){return arguments.length?(X=+ca,E):X};return E};r.sankeyCenter=function(E){return E.targetLinks.length?E.depth:E.sourceLinks.length?q.min(E.sourceLinks,a)-1:0};r.sankeyLeft=function(E){return E.depth};
r.sankeyRight=function(E,C){return C-1-E.height};r.sankeyJustify=h;r.sankeyLinkHorizontal=function(){return l.linkHorizontal().source(A).target(z)};Object.defineProperty(r,"__esModule",{value:!0})})},{"d3-array":156,"d3-collection":157,"d3-shape":165}],57:[function(b,N,I){N.exports=b("./quad")},{"./quad":58}],58:[function(b,N,I){function r(f,k){var t=k[0],v=k[1],w=1/(k[2]-t);k=1/(k[3]-v);for(var y=Array(f.length),B=0,A=f.length/2;B<A;B++)y[2*B]=m((f[2*B]-t)*w,0,1),y[2*B+1]=m((f[2*B+1]-v)*k,0,1);return y}
var q=b("binary-search-bounds"),m=b("clamp"),l=b("parse-rect"),a=b("array-bounds"),h=b("pick-by-alias"),g=b("defined"),n=b("flatten-vertex-data"),p=b("is-obj"),d=b("dtype"),e=b("math-log2");N.exports=function(f,k){function t(H,Q,M,P,T,O){if(!P.length)return null;var U=C[T]||(C[T]=[]),S=D[T]||(D[T]=[]),X=u[T]||(u[T]=[]),ba=U.length;T++;if(T>y||1073741824<O){for(H=0;H<P.length;H++)U.push(P[H]),S.push(O),X.push(null,null,null,null);return ba}U.push(P[0]);S.push(O);if(1>=P.length)return X.push(null,null,
null,null),ba;U=.5*M;S=H+U;M=Q+U;for(var ca=[],ia=[],ja=[],la=[],da=1,oa=P.length;da<oa;da++){var sa=P[da],ma=A[2*sa+1];A[2*sa]<S?ma<M?ca.push(sa):ia.push(sa):ma<M?ja.push(sa):la.push(sa)}O<<=2;X.push(t(H,Q,U,ca,T,O),t(H,M,U,ia,T,O+1),t(S,Q,U,ja,T,O+2),t(S,M,U,la,T,O+3));return ba}function v(H,Q,M,P,T){for(var O=[],U=0;U<T;U++){var S=D[U],X=G[U][0],ba=w(H,Q,U),ca=w(M,P,U);ba=q.ge(S,ba);S=q.gt(S,ca,ba,S.length-1);O[U]=[ba+X,S+X]}return O}function w(H,Q,M){for(var P=1,T=.5,O=.5,U=.5,S=0;S<M;S++)P<<=
2,P+=H<T?Q<O?0:1:Q<O?2:3,U*=.5,T+=H<T?-U:U,O+=Q<O?-U:U;return P}k||(k={});f=n(f,"float64");k=h(k,{bounds:"range bounds dataBox databox",maxDepth:"depth maxDepth maxdepth level maxLevel maxlevel levels",dtype:"type dtype format out dst output destination"});var y=g(k.maxDepth,255),B=g(k.bounds,a(f,2));B[0]===B[2]&&B[2]++;B[1]===B[3]&&B[3]++;var A=r(f,B),z=f.length>>>1;k.dtype||(k.dtype="array");if("string"===typeof k.dtype)var E=new (d(k.dtype))(z);else k.dtype&&(E=k.dtype,Array.isArray(E)&&(E.length=
z));for(k=0;k<z;++k)E[k]=k;var C=[],u=[],D=[],G=[];t(0,0,1,E,0,1);for(k=z=0;k<C.length;k++){var J=C[k];if(E.set)E.set(J,z);else for(var L=0,K=J.length;L<K;L++)E[L+z]=J[L];J=z+C[k].length;G[k]=[z,J];z=J}E.range=function(){function H(oa,sa,ma,qa,pa,na){if(null!==pa&&null!==na&&!(X>oa+ma||ba>sa+ma||ca<oa||ia<sa||qa>=ja||pa===na)){var ka=C[qa];void 0===na&&(na=ka.length);for(var ua=pa;ua<na;ua++){var va=ka[ua],Ca=f[2*va],Ma=f[2*va+1];Ca>=T&&Ca<=U&&Ma>=O&&Ma<=S&&da.push(va)}Ca=u[qa];na=Ca[4*pa];ka=Ca[4*
pa+1];ua=Ca[4*pa+2];va=Ca[4*pa+3];a:{Ma=null;for(var Ua=0;null===Ma;)if(Ma=Ca[4*(pa+1)+Ua],Ua++,Ua>Ca.length){pa=null;break a}pa=Ma}ma*=.5;qa+=1;H(oa,sa,ma,qa,na,ka||ua||va||pa);H(oa,sa+ma,ma,qa,ka,ua||va||pa);H(oa+ma,sa,ma,qa,ua,va||pa);H(oa+ma,sa+ma,ma,qa,va,pa)}}for(var Q=[],M=arguments.length;M--;)Q[M]=arguments[M];if(p(Q[Q.length-1])){var P=Q.pop();Q.length||null==P.x&&null==P.l&&null==P.left||(Q=[P],M={});M=h(P,{level:"level maxLevel",d:"d diam diameter r radius px pxSize pixel pixelSize maxD size minSize",
lod:"lod details ranges offsets"})}else M={};Q.length||(Q=B);Q=l.apply(void 0,Q);Q=[Math.min(Q.x,Q.x+Q.width),Math.min(Q.y,Q.y+Q.height),Math.max(Q.x,Q.x+Q.width),Math.max(Q.y,Q.y+Q.height)];var T=Q[0],O=Q[1],U=Q[2],S=Q[3];Q=r([T,O,U,S],B);var X=Q[0],ba=Q[1],ca=Q[2],ia=Q[3],ja=g(M.level,C.length);if(null!=M.d){if("number"===typeof M.d)var la=[M.d,M.d];else M.d.length&&(la=M.d);ja=Math.min(Math.max(Math.ceil(-e(Math.abs(la[0])/(B[2]-B[0]))),Math.ceil(-e(Math.abs(la[1])/(B[3]-B[1])))),ja)}ja=Math.min(ja,
C.length);if(M.lod)return v(X,ba,ca,ia,ja);var da=[];H(0,0,1,0,0,1);return da};return E}},{"array-bounds":70,"binary-search-bounds":96,clamp:120,defined:170,dtype:175,"flatten-vertex-data":244,"is-obj":468,"math-log2":479,"parse-rect":504,"pick-by-alias":511}],59:[function(b,N,I){function r(l){var a=0;if(l&&0<l.length){a+=Math.abs(q(l[0]));for(var h=1;h<l.length;h++)a-=Math.abs(q(l[h]))}return a}function q(l){var a,h=0,g=l.length;if(2<g){for(a=0;a<g;a++){if(a===g-2){var n=g-2;var p=g-1;var d=0}else a===
g-1?(n=g-1,p=0,d=1):(n=a,p=a+1,d=a+2);n=l[n];p=l[p];d=l[d];h+=(d[0]*Math.PI/180-n[0]*Math.PI/180)*Math.sin(p[1]*Math.PI/180)}h=40680631590769*h/2}return h}Object.defineProperty(I,"__esModule",{value:!0});var m=b("@turf/meta");I.default=function(l){return m.geomReduce(l,function(a,h){a:{var g=0,n;switch(h.type){case "Polygon":h=r(h.coordinates);break a;case "MultiPolygon":for(n=0;n<h.coordinates.length;n++)g+=r(h.coordinates[n]);h=g;break a}h=0}return a+h},0)}},{"@turf/meta":63}],60:[function(b,N,
I){Object.defineProperty(I,"__esModule",{value:!0});var r=b("@turf/meta");I.default=function(q){var m=[Infinity,Infinity,-Infinity,-Infinity];r.coordEach(q,function(l){m[0]>l[0]&&(m[0]=l[0]);m[1]>l[1]&&(m[1]=l[1]);m[2]<l[0]&&(m[2]=l[0]);m[3]<l[1]&&(m[3]=l[1])});return m}},{"@turf/meta":63}],61:[function(b,N,I){Object.defineProperty(I,"__esModule",{value:!0});var r=b("@turf/meta"),q=b("@turf/helpers");I.default=function(m,l){void 0===l&&(l={});var a=0,h=0,g=0;r.coordEach(m,function(n){a+=n[0];h+=n[1];
g++});return q.point([a/g,h/g],l.properties)}},{"@turf/helpers":62,"@turf/meta":63}],62:[function(b,N,I){function r(k,t,v){void 0===v&&(v={});var w={type:"Feature"};if(0===v.id||v.id)w.id=v.id;v.bbox&&(w.bbox=v.bbox);w.properties=t||{};w.geometry=k;return w}function q(k,t,v){void 0===v&&(v={});return r({type:"Point",coordinates:k},t,v)}function m(k,t,v){void 0===v&&(v={});for(var w=0;w<k.length;w++){var y=k[w];if(4>y.length)throw Error("Each LinearRing of a Polygon must have 4 or more Positions.");
for(var B=0;B<y[y.length-1].length;B++)if(y[y.length-1][B]!==y[0][B])throw Error("First and last Position are not equivalent.");}return r({type:"Polygon",coordinates:k},t,v)}function l(k,t,v){void 0===v&&(v={});if(2>k.length)throw Error("coordinates must be an array of two or more positions");return r({type:"LineString",coordinates:k},t,v)}function a(k,t){void 0===t&&(t={});var v={type:"FeatureCollection"};t.id&&(v.id=t.id);t.bbox&&(v.bbox=t.bbox);v.features=k;return v}function h(k,t,v){void 0===
v&&(v={});return r({type:"MultiLineString",coordinates:k},t,v)}function g(k,t,v){void 0===v&&(v={});return r({type:"MultiPoint",coordinates:k},t,v)}function n(k,t,v){void 0===v&&(v={});return r({type:"MultiPolygon",coordinates:k},t,v)}function p(k,t){void 0===t&&(t="kilometers");var v=I.factors[t];if(!v)throw Error(t+" units is invalid");return k*v}function d(k,t){void 0===t&&(t="kilometers");var v=I.factors[t];if(!v)throw Error(t+" units is invalid");return k/v}function e(k){return k%(2*Math.PI)*
180/Math.PI}function f(k){return!isNaN(k)&&null!==k&&!Array.isArray(k)&&!/^\s*$/.test(k)}Object.defineProperty(I,"__esModule",{value:!0});I.earthRadius=6371008.8;I.factors={centimeters:100*I.earthRadius,centimetres:100*I.earthRadius,degrees:I.earthRadius/111325,feet:3.28084*I.earthRadius,inches:39.37*I.earthRadius,kilometers:I.earthRadius/1E3,kilometres:I.earthRadius/1E3,meters:I.earthRadius,metres:I.earthRadius,miles:I.earthRadius/1609.344,millimeters:1E3*I.earthRadius,millimetres:1E3*I.earthRadius,
nauticalmiles:I.earthRadius/1852,radians:1,yards:I.earthRadius/1.0936};I.unitsFactors={centimeters:100,centimetres:100,degrees:1/111325,feet:3.28084,inches:39.37,kilometers:.001,kilometres:.001,meters:1,metres:1,miles:1/1609.344,millimeters:1E3,millimetres:1E3,nauticalmiles:1/1852,radians:1/I.earthRadius,yards:1/1.0936};I.areaFactors={acres:2.47105E-4,centimeters:1E4,centimetres:1E4,feet:10.763910417,inches:1550.003100006,kilometers:1E-6,kilometres:1E-6,meters:1,metres:1,miles:3.86E-7,millimeters:1E6,
millimetres:1E6,yards:1.195990046};I.feature=r;I.geometry=function(k,t,v){switch(k){case "Point":return q(t).geometry;case "LineString":return l(t).geometry;case "Polygon":return m(t).geometry;case "MultiPoint":return g(t).geometry;case "MultiLineString":return h(t).geometry;case "MultiPolygon":return n(t).geometry;default:throw Error(k+" is invalid");}};I.point=q;I.points=function(k,t,v){void 0===v&&(v={});return a(k.map(function(w){return q(w,t)}),v)};I.polygon=m;I.polygons=function(k,t,v){void 0===
v&&(v={});return a(k.map(function(w){return m(w,t)}),v)};I.lineString=l;I.lineStrings=function(k,t,v){void 0===v&&(v={});return a(k.map(function(w){return l(w,t)}),v)};I.featureCollection=a;I.multiLineString=h;I.multiPoint=g;I.multiPolygon=n;I.geometryCollection=function(k,t,v){void 0===v&&(v={});return r({type:"GeometryCollection",geometries:k},t,v)};I.round=function(k,t){void 0===t&&(t=0);if(t&&!(0<=t))throw Error("precision must be a positive number");t=Math.pow(10,t||0);return Math.round(k*t)/
t};I.radiansToLength=p;I.lengthToRadians=d;I.lengthToDegrees=function(k,t){return e(d(k,t))};I.bearingToAzimuth=function(k){k%=360;0>k&&(k+=360);return k};I.radiansToDegrees=e;I.degreesToRadians=function(k){return k%360*Math.PI/180};I.convertLength=function(k,t,v){void 0===t&&(t="kilometers");void 0===v&&(v="kilometers");if(!(0<=k))throw Error("length must be a positive number");return p(d(k,t),v)};I.convertArea=function(k,t,v){void 0===t&&(t="meters");void 0===v&&(v="kilometers");if(!(0<=k))throw Error("area must be a positive number");
t=I.areaFactors[t];if(!t)throw Error("invalid original units");v=I.areaFactors[v];if(!v)throw Error("invalid final units");return k/t*v};I.isNumber=f;I.isObject=function(k){return!!k&&k.constructor===Object};I.validateBBox=function(k){if(!k)throw Error("bbox is required");if(!Array.isArray(k))throw Error("bbox must be an Array");if(4!==k.length&&6!==k.length)throw Error("bbox must be an Array of 4 or 6 numbers");k.forEach(function(t){if(!f(t))throw Error("bbox must only contain numbers");})};I.validateId=
function(k){if(!k)throw Error("id is required");if(-1===["string","number"].indexOf(typeof k))throw Error("id must be a number or a string");};I.radians2degrees=function(){throw Error("method has been renamed to `radiansToDegrees`");};I.degrees2radians=function(){throw Error("method has been renamed to `degreesToRadians`");};I.distanceToDegrees=function(){throw Error("method has been renamed to `lengthToDegrees`");};I.distanceToRadians=function(){throw Error("method has been renamed to `lengthToRadians`");
};I.radiansToDistance=function(){throw Error("method has been renamed to `radiansToLength`");};I.bearingToAngle=function(){throw Error("method has been renamed to `bearingToAzimuth`");};I.convertDistance=function(){throw Error("method has been renamed to `convertLength`");}},{}],63:[function(b,N,I){function r(p,d,e){if(null!==p){var f,k=0,t;var v=p.type;for(var w="FeatureCollection"===v,y="Feature"===v,B=w?p.features.length:1,A=0;A<B;A++){var z=(t=(f=w?p.features[A].geometry:y?p.geometry:p)?"GeometryCollection"===
f.type:!1)?f.geometries.length:1;for(var E=0;E<z;E++){var C=0,u=0;var D=t?f.geometries[E]:f;if(null!==D){var G=D.coordinates;var J=D.type;var L=!e||"Polygon"!==J&&"MultiPolygon"!==J?0:1;switch(J){case null:break;case "Point":if(!1===d(G,k,A,C,u))return!1;k++;break;case "LineString":case "MultiPoint":for(v=0;v<G.length;v++){if(!1===d(G[v],k,A,C,u))return!1;k++;"MultiPoint"===J&&C++}break;case "Polygon":case "MultiLineString":for(v=0;v<G.length;v++){for(D=0;D<G[v].length-L;D++){if(!1===d(G[v][D],k,
A,C,u))return!1;k++}"MultiLineString"===J&&C++;"Polygon"===J&&u++}break;case "MultiPolygon":for(v=0;v<G.length;v++){for(D=u=0;D<G[v].length;D++){for(J=0;J<G[v][D].length-L;J++){if(!1===d(G[v][D][J],k,A,C,u))return!1;k++}u++}C++}break;case "GeometryCollection":for(v=0;v<D.geometries.length;v++)if(!1===r(D.geometries[v],d,e))return!1;break;default:throw Error("Unknown Geometry Type");}}}}}}function q(p,d){var e;switch(p.type){case "FeatureCollection":for(e=0;e<p.features.length&&!1!==d(p.features[e].properties,
e);e++);break;case "Feature":d(p.properties,0)}}function m(p,d){if("Feature"===p.type)d(p,0);else if("FeatureCollection"===p.type)for(var e=0;e<p.features.length&&!1!==d(p.features[e],e);e++);}function l(p,d){var e,f,k,t,v=0,w="FeatureCollection"===p.type,y="Feature"===p.type,B=w?p.features.length:1;for(e=0;e<B;e++){var A=w?p.features[e].geometry:y?p.geometry:p;var z=w?p.features[e].properties:y?p.properties:{};var E=w?p.features[e].bbox:y?p.bbox:void 0;var C=w?p.features[e].id:y?p.id:void 0;var u=
(t=A?"GeometryCollection"===A.type:!1)?A.geometries.length:1;for(k=0;k<u;k++){var D=t?A.geometries[k]:A;if(null===D){if(!1===d(null,v,z,E,C))return!1}else switch(D.type){case "Point":case "LineString":case "MultiPoint":case "Polygon":case "MultiLineString":case "MultiPolygon":if(!1===d(D,v,z,E,C))return!1;break;case "GeometryCollection":for(f=0;f<D.geometries.length;f++)if(!1===d(D.geometries[f],v,z,E,C))return!1;break;default:throw Error("Unknown Geometry Type");}}v++}}function a(p,d){l(p,function(e,
f,k,t,v){var w=null===e?null:e.type;switch(w){case null:case "Point":case "LineString":case "Polygon":if(!1===d(n.feature(e,k,{bbox:t,id:v}),f,0))return!1;return}switch(w){case "MultiPoint":var y="Point";break;case "MultiLineString":y="LineString";break;case "MultiPolygon":y="Polygon"}for(t=0;t<e.coordinates.length;t++)if(!1===d(n.feature({type:y,coordinates:e.coordinates[t]},k),f,t))return!1})}function h(p,d){a(p,function(e,f,k){var t=0;if(e.geometry){var v=e.geometry.type;if("Point"!==v&&"MultiPoint"!==
v){var w,y=0,B=0,A=0;if(!1===r(e,function(z,E,C,u,D){if(void 0===w||f>y||u>B||D>A)w=z,y=f,B=u,A=D,t=0;else{E=n.lineString([w,z],e.properties);if(!1===d(E,f,k,D,t))return!1;t++;w=z}}))return!1}}})}function g(p,d){if(!p)throw Error("geojson is required");a(p,function(e,f,k){if(null!==e.geometry){var t=e.geometry.coordinates;switch(e.geometry.type){case "LineString":if(!1===d(e,f,k,0,0))return!1;break;case "Polygon":for(var v=0;v<t.length;v++)if(!1===d(n.lineString(t[v],e.properties),f,k,v))return!1}}})}
Object.defineProperty(I,"__esModule",{value:!0});var n=b("@turf/helpers");I.coordEach=r;I.coordReduce=function(p,d,e,f){var k=e;r(p,function(t,v,w,y,B){k=0===v&&void 0===e?t:d(k,t,v,w,y,B)},f);return k};I.propEach=q;I.propReduce=function(p,d,e){var f=e;q(p,function(k,t){f=0===t&&void 0===e?k:d(f,k,t)});return f};I.featureEach=m;I.featureReduce=function(p,d,e){var f=e;m(p,function(k,t){f=0===t&&void 0===e?k:d(f,k,t)});return f};I.coordAll=function(p){var d=[];r(p,function(e){d.push(e)});return d};
I.geomEach=l;I.geomReduce=function(p,d,e){var f=e;l(p,function(k,t,v,w,y){f=0===t&&void 0===e?k:d(f,k,t,v,w,y)});return f};I.flattenEach=a;I.flattenReduce=function(p,d,e){var f=e;a(p,function(k,t,v){f=0===t&&0===v&&void 0===e?k:d(f,k,t,v)});return f};I.segmentEach=h;I.segmentReduce=function(p,d,e){var f=e,k=!1;h(p,function(t,v,w,y,B){f=!1===k&&void 0===e?t:d(f,t,v,w,y,B);k=!0});return f};I.lineEach=g;I.lineReduce=function(p,d,e){var f=e;g(p,function(k,t,v,w){f=0===t&&void 0===e?k:d(f,k,t,v,w)});return f};
I.findSegment=function(p,d){d=d||{};if(!n.isObject(d))throw Error("options is invalid");var e=d.featureIndex||0,f=d.multiFeatureIndex||0,k=d.geometryIndex||0,t=d.segmentIndex||0,v=d.properties;switch(p.type){case "FeatureCollection":0>e&&(e=p.features.length+e);v=v||p.features[e].properties;p=p.features[e].geometry;break;case "Feature":v=v||p.properties;p=p.geometry;break;case "Point":case "MultiPoint":return null;case "LineString":case "Polygon":case "MultiLineString":case "MultiPolygon":break;default:throw Error("geojson is invalid");
}if(null===p)return null;e=p.coordinates;switch(p.type){case "Point":case "MultiPoint":return null;case "LineString":return 0>t&&(t=e.length+t-1),n.lineString([e[t],e[t+1]],v,d);case "Polygon":return 0>k&&(k=e.length+k),0>t&&(t=e[k].length+t-1),n.lineString([e[k][t],e[k][t+1]],v,d);case "MultiLineString":return 0>f&&(f=e.length+f),0>t&&(t=e[f].length+t-1),n.lineString([e[f][t],e[f][t+1]],v,d);case "MultiPolygon":return 0>f&&(f=e.length+f),0>k&&(k=e[f].length+k),0>t&&(t=e[f][k].length-t-1),n.lineString([e[f][k][t],
e[f][k][t+1]],v,d)}throw Error("geojson is invalid");};I.findPoint=function(p,d){d=d||{};if(!n.isObject(d))throw Error("options is invalid");var e=d.featureIndex||0,f=d.multiFeatureIndex||0,k=d.geometryIndex||0,t=d.coordIndex||0,v=d.properties;switch(p.type){case "FeatureCollection":0>e&&(e=p.features.length+e);v=v||p.features[e].properties;p=p.features[e].geometry;break;case "Feature":v=v||p.properties;p=p.geometry;break;case "Point":case "MultiPoint":return null;case "LineString":case "Polygon":case "MultiLineString":case "MultiPolygon":break;
default:throw Error("geojson is invalid");}if(null===p)return null;e=p.coordinates;switch(p.type){case "Point":return n.point(e,v,d);case "MultiPoint":return 0>f&&(f=e.length+f),n.point(e[f],v,d);case "LineString":return 0>t&&(t=e.length+t),n.point(e[t],v,d);case "Polygon":return 0>k&&(k=e.length+k),0>t&&(t=e[k].length+t),n.point(e[k][t],v,d);case "MultiLineString":return 0>f&&(f=e.length+f),0>t&&(t=e[f].length+t),n.point(e[f][t],v,d);case "MultiPolygon":return 0>f&&(f=e.length+f),0>k&&(k=e[f].length+
k),0>t&&(t=e[f][k].length-t),n.point(e[f][k][t],v,d)}throw Error("geojson is invalid");}},{"@turf/helpers":62}],64:[function(b,N,I){I="undefined"===typeof WeakMap?b("weak-map"):WeakMap;var r=b("gl-buffer"),q=b("gl-vao"),m=new I;N.exports=function(l){var a=m.get(l),h=a&&(a._triangleBuffer.handle||a._triangleBuffer.buffer);h&&l.isBuffer(h)||(h=r(l,new Float32Array([-1,-1,-1,4,4,-1])),a=q(l,[{buffer:h,type:l.FLOAT,size:2}]),a._triangleBuffer=h,m.set(l,a));a.bind();l.drawArrays(l.TRIANGLES,0,3);a.unbind()}},
{"gl-buffer":259,"gl-vao":358,"weak-map":602}],65:[function(b,N,I){N.exports=function(r){var q=0,m=0,l=0,a=0;return r.map(function(h){h=h.slice();var g=h[0],n=g.toUpperCase();if(g!=n)switch(h[0]=n,g){case "a":h[6]+=l;h[7]+=a;break;case "v":h[1]+=a;break;case "h":h[1]+=l;break;default:for(g=1;g<h.length;)h[g++]+=l,h[g++]+=a}switch(n){case "Z":l=q;a=m;break;case "H":l=h[1];break;case "V":a=h[1];break;case "M":l=q=h[1];a=m=h[2];break;default:l=h[h.length-2],a=h[h.length-1]}return h})}},{}],66:[function(b,
N,I){var r=b("pad-left");N.exports=function(q,m,l){m="number"===typeof m?m:1;l=l||": ";q=q.split(/\r?\n/);var a=String(q.length+m-1).length;return q.map(function(h,g){g+=m;return r(g,a-String(g).length)+l+h}).join("\n")}},{"pad-left":502}],67:[function(b,N,I){N.exports=function(q){var m=q.length;if(0===m)return[];if(1===m)return[0];for(var l=q[0].length,a=[q[0]],h=[0],g=1;g<m;++g){a.push(q[g]);a:{var n=a;for(var p=l,d=Array(p+1),e=0;e<n.length;++e)d[e]=n[e];for(e=0;e<=n.length;++e){for(var f=n.length;f<=
p;++f){for(var k=Array(p),t=0;t<p;++t)k[t]=Math.pow(f+1-e,t);d[f]=k}if(r.apply(void 0,d)){n=!0;break a}}n=!1}if(n){if(h.push(g),h.length===l+1)break}else a.pop()}return h};var r=b("robust-orientation")},{"robust-orientation":548}],68:[function(b,N,I){N.exports=function(m,l){return r(l).filter(function(a){for(var h=Array(a.length),g=0;g<a.length;++g)h[g]=l[a[g]];return 1>q(h)*m})};var r=b("delaunay-triangulate"),q=b("circumradius")},{circumradius:119,"delaunay-triangulate":171}],69:[function(b,N,I){N.exports=
function(m,l){return q(r(m,l))};var r=b("alpha-complex"),q=b("simplicial-complex-boundary")},{"alpha-complex":68,"simplicial-complex-boundary":555}],70:[function(b,N,I){N.exports=function(r,q){if(!r||null==r.length)throw Error("Argument should be an array");q=null==q?1:Math.floor(q);for(var m=Array(2*q),l=0;l<q;l++){for(var a=-Infinity,h=Infinity,g=l,n=r.length;g<n;g+=q)r[g]>a&&(a=r[g]),r[g]<h&&(h=r[g]);m[l]=h;m[q+l]=a}return m}},{}],71:[function(b,N,I){var r=b("array-bounds");N.exports=function(q,
m,l){if(!q||null==q.length)throw Error("Argument should be an array");null==m&&(m=1);null==l&&(l=r(q,m));for(var a=0;a<m;a++){var h=l[m+a],g=l[a],n,p=q.length;if(Infinity===h&&-Infinity===g)for(n=a;n<p;n+=m)q[n]=q[n]===h?1:q[n]===g?0:.5;else if(Infinity===h)for(n=a;n<p;n+=m)q[n]=q[n]===h?1:0;else if(-Infinity===g)for(n=a;n<p;n+=m)q[n]=q[n]===g?0:1;else for(h-=g,n=a;n<p;n+=m)isNaN(q[n])||(q[n]=0===h?.5:(q[n]-g)/h)}return q}},{"array-bounds":70}],72:[function(b,N,I){N.exports=function(r,q){var m="number"===
typeof r,l="number"===typeof q;m&&!l?(q=r,r=0):m||l||(q=r=0);r|=0;q=(q|0)-r;if(0>q)throw Error("array length must be positive");m=Array(q);for(l=0;l<q;l++,r++)m[l]=r;return m}},{}],73:[function(b,N,I){(function(r){(function(){function q(G,J){if(G===J)return 0;for(var L=G.length,K=J.length,H=0,Q=Math.min(L,K);H<Q;++H)if(G[H]!==J[H]){L=G[H];K=J[H];break}return L<K?-1:K<L?1:0}function m(G){return r.Buffer&&"function"===typeof r.Buffer.isBuffer?r.Buffer.isBuffer(G):!(null==G||!G._isBuffer)}function l(G){return m(G)||
"function"!==typeof r.ArrayBuffer?!1:"function"===typeof ArrayBuffer.isView?ArrayBuffer.isView(G):G?G instanceof DataView||G.buffer&&G.buffer instanceof ArrayBuffer?!0:!1:!1}function a(G){if(B.isFunction(G))return E?G.name:(G=G.toString().match(u))&&G[1]}function h(G,J){return"string"===typeof G?G.length<J?G:G.slice(0,J):G}function g(G){if(E||!B.isFunction(G))return B.inspect(G);G=a(G);return"[Function"+(G?": "+G:"")+"]"}function n(G,J,L,K,H){throw new C.AssertionError({message:L,actual:G,expected:J,
operator:K,stackStartFunction:H});}function p(G,J){G||n(G,!0,J,"\x3d\x3d",C.ok)}function d(G,J,L,K){if(G===J)return!0;if(m(G)&&m(J))return 0===q(G,J);if(B.isDate(G)&&B.isDate(J))return G.getTime()===J.getTime();if(B.isRegExp(G)&&B.isRegExp(J))return G.source===J.source&&G.global===J.global&&G.multiline===J.multiline&&G.lastIndex===J.lastIndex&&G.ignoreCase===J.ignoreCase;if(null!==G&&"object"===typeof G||null!==J&&"object"===typeof J){if(!l(G)||!l(J)||Object.prototype.toString.call(G)!==Object.prototype.toString.call(J)||
G instanceof Float32Array||G instanceof Float64Array){if(m(G)!==m(J))return!1;K=K||{actual:[],expected:[]};var H=K.actual.indexOf(G);if(-1!==H&&H===K.expected.indexOf(J))return!0;K.actual.push(G);K.expected.push(J);return f(G,J,L,K)}return 0===q(new Uint8Array(G.buffer),new Uint8Array(J.buffer))}return L?G===J:G==J}function e(G){return"[object Arguments]"==Object.prototype.toString.call(G)}function f(G,J,L,K){if(null===G||void 0===G||null===J||void 0===J)return!1;if(B.isPrimitive(G)||B.isPrimitive(J))return G===
J;if(L&&Object.getPrototypeOf(G)!==Object.getPrototypeOf(J))return!1;var H=e(G),Q=e(J);if(H&&!Q||!H&&Q)return!1;if(H)return G=z.call(G),J=z.call(J),d(G,J,L);H=D(G);var M=D(J);if(H.length!==M.length)return!1;H.sort();M.sort();for(Q=H.length-1;0<=Q;Q--)if(H[Q]!==M[Q])return!1;for(Q=H.length-1;0<=Q;Q--)if(M=H[Q],!d(G[M],J[M],L,K))return!1;return!0}function k(G,J,L){d(G,J,!0)&&n(G,J,L,"notDeepStrictEqual",k)}function t(G,J){if(!G||!J)return!1;if("[object RegExp]"==Object.prototype.toString.call(J))return J.test(G);
try{if(G instanceof J)return!0}catch(L){}return Error.isPrototypeOf(J)?!1:!0===J.call({},G)}function v(G,J,L,K){if("function"!==typeof J)throw new TypeError('"block" argument must be a function');"string"===typeof L&&(K=L,L=null);try{J()}catch(P){var H=P}J=H;K=(L&&L.name?" ("+L.name+").":".")+(K?" "+K:".");G&&!J&&n(J,L,"Missing expected exception"+K);H="string"===typeof K;var Q=!G&&B.isError(J),M=!G&&J&&!L;(Q&&H&&t(J,L)||M)&&n(J,L,"Got unwanted exception"+K);if(G&&J&&L&&!t(J,L)||!G&&J)throw J;}function w(G,
J){G||n(G,!0,J,"\x3d\x3d",w)}var y=b("object-assign"),B=b("util/"),A=Object.prototype.hasOwnProperty,z=Array.prototype.slice,E=function(){return"foo"===function(){}.name}(),C=N.exports=p,u=/\s*function\s+([^\(\s]*)\s*/;C.AssertionError=function(G){this.name="AssertionError";this.actual=G.actual;this.expected=G.expected;this.operator=G.operator;G.message?(this.message=G.message,this.generatedMessage=!1):(this.message=h(g(this.actual),128)+" "+this.operator+" "+h(g(this.expected),128),this.generatedMessage=
!0);var J=G.stackStartFunction||n;Error.captureStackTrace?Error.captureStackTrace(this,J):(G=Error(),G.stack&&(G=G.stack,J=a(J),J=G.indexOf("\n"+J),0<=J&&(J=G.indexOf("\n",J+1),G=G.substring(J+1)),this.stack=G))};B.inherits(C.AssertionError,Error);C.fail=n;C.ok=p;C.equal=function(G,J,L){G!=J&&n(G,J,L,"\x3d\x3d",C.equal)};C.notEqual=function(G,J,L){G==J&&n(G,J,L,"!\x3d",C.notEqual)};C.deepEqual=function(G,J,L){d(G,J,!1)||n(G,J,L,"deepEqual",C.deepEqual)};C.deepStrictEqual=function(G,J,L){d(G,J,!0)||
n(G,J,L,"deepStrictEqual",C.deepStrictEqual)};C.notDeepEqual=function(G,J,L){d(G,J,!1)&&n(G,J,L,"notDeepEqual",C.notDeepEqual)};C.notDeepStrictEqual=k;C.strictEqual=function(G,J,L){G!==J&&n(G,J,L,"\x3d\x3d\x3d",C.strictEqual)};C.notStrictEqual=function(G,J,L){G===J&&n(G,J,L,"!\x3d\x3d",C.notStrictEqual)};C.throws=function(G,J,L){v(!0,G,J,L)};C.doesNotThrow=function(G,J,L){v(!1,G,J,L)};C.ifError=function(G){if(G)throw G;};C.strict=y(w,C,{equal:C.strictEqual,deepEqual:C.deepStrictEqual,notEqual:C.notStrictEqual,
notDeepEqual:C.notDeepStrictEqual});C.strict.strict=C.strict;var D=Object.keys||function(G){var J=[],L;for(L in G)A.call(G,L)&&J.push(L);return J}}).call(this)}).call(this,"undefined"!==typeof od?od:"undefined"!==typeof self?self:"undefined"!==typeof window?window:{})},{"object-assign":499,"util/":76}],74:[function(b,N,I){N.exports="function"===typeof Object.create?function(r,q){r.super_=q;r.prototype=Object.create(q.prototype,{constructor:{value:r,enumerable:!1,writable:!0,configurable:!0}})}:function(r,
q){r.super_=q;var m=function(){};m.prototype=q.prototype;r.prototype=new m;r.prototype.constructor=r}},{}],75:[function(b,N,I){N.exports=function(r){return r&&"object"===typeof r&&"function"===typeof r.copy&&"function"===typeof r.fill&&"function"===typeof r.readUInt8}},{}],76:[function(b,N,I){(function(r,q){(function(){function m(K,H){var Q={seen:[],stylize:a};3<=arguments.length&&(Q.depth=arguments[2]);4<=arguments.length&&(Q.colors=arguments[3]);t(H)?Q.showHidden=H:H&&I._extend(Q,H);y(Q.showHidden)&&
(Q.showHidden=!1);y(Q.depth)&&(Q.depth=2);y(Q.colors)&&(Q.colors=!1);y(Q.customInspect)&&(Q.customInspect=!0);Q.colors&&(Q.stylize=l);return g(Q,K,Q.depth)}function l(K,H){return(H=m.styles[H])?"["+m.colors[H][0]+"m"+K+"["+m.colors[H][1]+"m":K}function a(K,H){return K}function h(K){var H={};K.forEach(function(Q,M){H[Q]=!0});return H}function g(K,H,Q){if(K.customInspect&&H&&C(H.inspect)&&H.inspect!==I.inspect&&(!H.constructor||H.constructor.prototype!==H)){var M=H.inspect(Q,K);w(M)||(M=g(K,M,Q));
return M}if(M=n(K,H))return M;var P=Object.keys(H),T=h(P);K.showHidden&&(P=Object.getOwnPropertyNames(H));if(E(H)&&(0<=P.indexOf("message")||0<=P.indexOf("description")))return p(H);if(0===P.length){if(C(H))return K.stylize("[Function"+(H.name?": "+H.name:"")+"]","special");if(B(H))return K.stylize(RegExp.prototype.toString.call(H),"regexp");if(z(H))return K.stylize(Date.prototype.toString.call(H),"date");if(E(H))return p(H)}M="";var O=!1,U=["{","}"];k(H)&&(O=!0,U=["[","]"]);C(H)&&(M=" [Function"+
(H.name?": "+H.name:"")+"]");B(H)&&(M=" "+RegExp.prototype.toString.call(H));z(H)&&(M=" "+Date.prototype.toUTCString.call(H));E(H)&&(M=" "+p(H));if(0===P.length&&(!O||0==H.length))return U[0]+M+U[1];if(0>Q)return B(H)?K.stylize(RegExp.prototype.toString.call(H),"regexp"):K.stylize("[Object]","special");K.seen.push(H);P=O?d(K,H,Q,T,P):P.map(function(S){return e(K,H,Q,T,S,O)});K.seen.pop();return f(P,M,U)}function n(K,H){if(y(H))return K.stylize("undefined","undefined");if(w(H))return H="'"+JSON.stringify(H).replace(/^"|"$/g,
"").replace(/'/g,"\\'").replace(/\\"/g,'"')+"'",K.stylize(H,"string");if(v(H))return K.stylize(""+H,"number");if(t(H))return K.stylize(""+H,"boolean");if(null===H)return K.stylize("null","null")}function p(K){return"["+Error.prototype.toString.call(K)+"]"}function d(K,H,Q,M,P){for(var T=[],O=0,U=H.length;O<U;++O)Object.prototype.hasOwnProperty.call(H,String(O))?T.push(e(K,H,Q,M,String(O),!0)):T.push("");P.forEach(function(S){S.match(/^\d+$/)||T.push(e(K,H,Q,M,S,!0))});return T}function e(K,H,Q,M,
P,T){var O,U;H=Object.getOwnPropertyDescriptor(H,P)||{value:H[P]};H.get?U=H.set?K.stylize("[Getter/Setter]","special"):K.stylize("[Getter]","special"):H.set&&(U=K.stylize("[Setter]","special"));Object.prototype.hasOwnProperty.call(M,P)||(O="["+P+"]");U||(0>K.seen.indexOf(H.value)?(U=null===Q?g(K,H.value,null):g(K,H.value,Q-1),-1<U.indexOf("\n")&&(U=T?U.split("\n").map(function(S){return"  "+S}).join("\n").substr(2):"\n"+U.split("\n").map(function(S){return"   "+S}).join("\n"))):U=K.stylize("[Circular]",
"special"));if(y(O)){if(T&&P.match(/^\d+$/))return U;O=JSON.stringify(""+P);O.match(/^"([a-zA-Z_][a-zA-Z_0-9]*)"$/)?(O=O.substr(1,O.length-2),O=K.stylize(O,"name")):(O=O.replace(/'/g,"\\'").replace(/\\"/g,'"').replace(/(^"|"$)/g,"'"),O=K.stylize(O,"string"))}return O+": "+U}function f(K,H,Q){var M=0;return 60<K.reduce(function(P,T){M++;0<=T.indexOf("\n")&&M++;return P+T.replace(/\u001b\[\d\d?m/g,"").length+1},0)?Q[0]+(""===H?"":H+"\n ")+" "+K.join(",\n  ")+" "+Q[1]:Q[0]+H+" "+K.join(", ")+" "+Q[1]}
function k(K){return Array.isArray(K)}function t(K){return"boolean"===typeof K}function v(K){return"number"===typeof K}function w(K){return"string"===typeof K}function y(K){return void 0===K}function B(K){return A(K)&&"[object RegExp]"===Object.prototype.toString.call(K)}function A(K){return"object"===typeof K&&null!==K}function z(K){return A(K)&&"[object Date]"===Object.prototype.toString.call(K)}function E(K){return A(K)&&("[object Error]"===Object.prototype.toString.call(K)||K instanceof Error)}
function C(K){return"function"===typeof K}function u(K){return 10>K?"0"+K.toString(10):K.toString(10)}var D=/%[sdj%]/g;I.format=function(K){if(!w(K)){for(var H=[],Q=0;Q<arguments.length;Q++)H.push(m(arguments[Q]));return H.join(" ")}Q=1;var M=arguments,P=M.length;H=String(K).replace(D,function(O){if("%%"===O)return"%";if(Q>=P)return O;switch(O){case "%s":return String(M[Q++]);case "%d":return Number(M[Q++]);case "%j":try{return JSON.stringify(M[Q++])}catch(U){return"[Circular]"}default:return O}});
for(var T=M[Q];Q<P;T=M[++Q])H=null!==T&&A(T)?H+(" "+m(T)):H+(" "+T);return H};I.deprecate=function(K,H){if(y(q.process))return function(){return I.deprecate(K,H).apply(this,arguments)};if(!0===r.noDeprecation)return K;var Q=!1;return function(){if(!Q){if(r.throwDeprecation)throw Error(H);r.traceDeprecation?console.trace(H):console.error(H);Q=!0}return K.apply(this,arguments)}};var G={},J;I.debuglog=function(K){y(J)&&(J=r.env.NODE_DEBUG||"");K=K.toUpperCase();if(!G[K])if((new RegExp("\\b"+K+"\\b",
"i")).test(J)){var H=r.pid;G[K]=function(){var Q=I.format.apply(I,arguments);console.error("%s %d: %s",K,H,Q)}}else G[K]=function(){};return G[K]};I.inspect=m;m.colors={bold:[1,22],italic:[3,23],underline:[4,24],inverse:[7,27],white:[37,39],grey:[90,39],black:[30,39],blue:[34,39],cyan:[36,39],green:[32,39],magenta:[35,39],red:[31,39],yellow:[33,39]};m.styles={special:"cyan",number:"yellow","boolean":"yellow",undefined:"grey","null":"bold",string:"green",date:"magenta",regexp:"red"};I.isArray=k;I.isBoolean=
t;I.isNull=function(K){return null===K};I.isNullOrUndefined=function(K){return null==K};I.isNumber=v;I.isString=w;I.isSymbol=function(K){return"symbol"===typeof K};I.isUndefined=y;I.isRegExp=B;I.isObject=A;I.isDate=z;I.isError=E;I.isFunction=C;I.isPrimitive=function(K){return null===K||"boolean"===typeof K||"number"===typeof K||"string"===typeof K||"symbol"===typeof K||"undefined"===typeof K};I.isBuffer=b("./support/isBuffer");var L="Jan Feb Mar Apr May Jun Jul Aug Sep Oct Nov Dec".split(" ");I.log=
function(){var K=console,H=K.log;var Q=new Date;var M=[u(Q.getHours()),u(Q.getMinutes()),u(Q.getSeconds())].join(":");Q=[Q.getDate(),L[Q.getMonth()],M].join(" ");H.call(K,"%s - %s",Q,I.format.apply(I,arguments))};I.inherits=b("inherits");I._extend=function(K,H){if(!H||!A(H))return K;for(var Q=Object.keys(H),M=Q.length;M--;)K[Q[M]]=H[Q[M]];return K}}).call(this)}).call(this,b("_process"),"undefined"!==typeof od?od:"undefined"!==typeof self?self:"undefined"!==typeof window?window:{})},{"./support/isBuffer":75,
_process:526,inherits:74}],77:[function(b,N,I){N.exports=function(r){return atob(r)}},{}],78:[function(b,N,I){function r(m){for(var l=0,a=0;a<m.length;++a)l+=m[a];return l}N.exports=function(m,l){for(var a=l.length,h=Array(a+1),g=0;g<a;++g){for(var n=Array(a+1),p=0;p<=a;++p)n[p]=m[p][g];h[g]=n}h[a]=Array(a+1);for(g=0;g<=a;++g)h[a][g]=1;m=Array(a+1);for(g=0;g<a;++g)m[g]=l[g];m[a]=1;l=q(h,m);h=r(l[a+1]);0===h&&(h=1);m=Array(a+1);for(g=0;g<=a;++g)m[g]=r(l[g])/h;return m};var q=b("robust-linear-solve")},
{"robust-linear-solve":547}],79:[function(b,N,I){function r(a){var h=a.length;if(0<h%4)throw Error("Invalid string. Length must be a multiple of 4");a=a.indexOf("\x3d");-1===a&&(a=h);return[a,a===h?0:4-a%4]}I.byteLength=function(a){a=r(a);var h=a[1];return 3*(a[0]+h)/4-h};I.toByteArray=function(a){var h=r(a);var g=h[0];h=h[1];var n=new l(3*(g+h)/4-h),p=0,d=0<h?g-4:g,e;for(e=0;e<d;e+=4)g=m[a.charCodeAt(e)]<<18|m[a.charCodeAt(e+1)]<<12|m[a.charCodeAt(e+2)]<<6|m[a.charCodeAt(e+3)],n[p++]=g>>16&255,n[p++]=
g>>8&255,n[p++]=g&255;2===h&&(g=m[a.charCodeAt(e)]<<2|m[a.charCodeAt(e+1)]>>4,n[p++]=g&255);1===h&&(g=m[a.charCodeAt(e)]<<10|m[a.charCodeAt(e+1)]<<4|m[a.charCodeAt(e+2)]>>2,n[p++]=g>>8&255,n[p++]=g&255);return n};I.fromByteArray=function(a){for(var h=a.length,g=h%3,n=[],p=0,d=h-g;p<d;p+=16383){for(var e=n,f=e.push,k,t=a,v=p+16383>d?d:p+16383,w=[],y=p;y<v;y+=3)k=(t[y]<<16&16711680)+(t[y+1]<<8&65280)+(t[y+2]&255),w.push(q[k>>18&63]+q[k>>12&63]+q[k>>6&63]+q[k&63]);k=w.join("");f.call(e,k)}1===g?(a=a[h-
1],n.push(q[a>>2]+q[a<<4&63]+"\x3d\x3d")):2===g&&(a=(a[h-2]<<8)+a[h-1],n.push(q[a>>10]+q[a>>4&63]+q[a<<2&63]+"\x3d"));return n.join("")};var q=[],m=[],l="undefined"!==typeof Uint8Array?Uint8Array:Array;for(b=0;64>b;++b)q[b]="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/"[b],m["ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/".charCodeAt(b)]=b;m[45]=62;m[95]=63},{}],80:[function(b,N,I){var r=b("./lib/rationalize");N.exports=function(q,m){return r(q[0].mul(m[1]).add(m[0].mul(q[1])),
q[1].mul(m[1]))}},{"./lib/rationalize":90}],81:[function(b,N,I){N.exports=function(r,q){return r[0].mul(q[1]).cmp(q[0].mul(r[1]))}},{}],82:[function(b,N,I){var r=b("./lib/rationalize");N.exports=function(q,m){return r(q[0].mul(m[1]),q[1].mul(m[0]))}},{"./lib/rationalize":90}],83:[function(b,N,I){function r(n,p){if(q(n))return p?g(n,r(p)):[n[0].clone(),n[1].clone()];var d=0;if(m(n))n=n.clone();else if("string"===typeof n)n=a(n);else{if(0===n)return[l(0),l(1)];if(n!==Math.floor(n))for(;n!==Math.floor(n);)n*=
Math.pow(2,256),d-=256;n=l(n)}if(q(p))n.mul(p[1]),p=p[0].clone();else if(m(p))p=p.clone();else if("string"===typeof p)p=a(p);else if(p){if(p!==Math.floor(p))for(;p!==Math.floor(p);)p*=Math.pow(2,256),d+=256;p=l(p)}else p=l(1);0<d?n=n.ushln(d):0>d&&(p=p.ushln(-d));return h(n,p)}var q=b("./is-rat"),m=b("./lib/is-bn"),l=b("./lib/num-to-bn"),a=b("./lib/str-to-bn"),h=b("./lib/rationalize"),g=b("./div");N.exports=r},{"./div":82,"./is-rat":84,"./lib/is-bn":88,"./lib/num-to-bn":89,"./lib/rationalize":90,
"./lib/str-to-bn":91}],84:[function(b,N,I){var r=b("./lib/is-bn");N.exports=function(q){return Array.isArray(q)&&2===q.length&&r(q[0])&&r(q[1])}},{"./lib/is-bn":88}],85:[function(b,N,I){var r=b("bn.js");N.exports=function(q){return q.cmp(new r(0))}},{"bn.js":99}],86:[function(b,N,I){var r=b("./bn-sign");N.exports=function(q){var m=q.length,l=q.words,a=0;if(1===m)a=l[0];else if(2===m)a=l[0]+67108864*l[1];else for(var h=0;h<m;h++)a+=l[h]*Math.pow(67108864,h);return r(q)*a}},{"./bn-sign":85}],87:[function(b,
N,I){var r=b("double-bits"),q=b("bit-twiddle").countTrailingZeros;N.exports=function(m){var l=q(r.lo(m));if(32>l)return l;m=q(r.hi(m));return 20<m?52:m+32}},{"bit-twiddle":97,"double-bits":173}],88:[function(b,N,I){b("bn.js");N.exports=function(r){return r&&"object"===typeof r&&!!r.words}},{"bn.js":99}],89:[function(b,N,I){var r=b("bn.js"),q=b("double-bits");N.exports=function(m){var l=q.exponent(m);return 52>l?new r(m):(new r(m*Math.pow(2,52-l))).ushln(l-52)}},{"bn.js":99,"double-bits":173}],90:[function(b,
N,I){var r=b("./num-to-bn"),q=b("./bn-sign");N.exports=function(m,l){var a=q(m),h=q(l);if(0===a)return[r(0),r(1)];if(0===h)return[r(0),r(0)];0>h&&(m=m.neg(),l=l.neg());a=m.gcd(l);return a.cmpn(1)?[m.div(a),l.div(a)]:[m,l]}},{"./bn-sign":85,"./num-to-bn":89}],91:[function(b,N,I){var r=b("bn.js");N.exports=function(q){return new r(q)}},{"bn.js":99}],92:[function(b,N,I){var r=b("./lib/rationalize");N.exports=function(q,m){return r(q[0].mul(m[0]),q[1].mul(m[1]))}},{"./lib/rationalize":90}],93:[function(b,
N,I){var r=b("./lib/bn-sign");N.exports=function(q){return r(q[0])*r(q[1])}},{"./lib/bn-sign":85}],94:[function(b,N,I){var r=b("./lib/rationalize");N.exports=function(q,m){return r(q[0].mul(m[1]).sub(q[1].mul(m[0])),q[1].mul(m[1]))}},{"./lib/rationalize":90}],95:[function(b,N,I){var r=b("./lib/bn-to-num"),q=b("./lib/ctz");N.exports=function(m){var l=m[0];m=m[1];if(0===l.cmpn(0))return 0;var a=l.abs().divmod(m.abs()),h=r(a.div);a=a.mod;l=l.negative!==m.negative?-1:1;if(0===a.cmpn(0))return l*h;if(h){var g=
q(h)+4;m=r(a.ushln(g).divRound(m));return l*(h+m*Math.pow(2,-g))}h=m.bitLength()-a.bitLength()+53;m=r(a.ushln(h).divRound(m));if(1023>h)return l*m*Math.pow(2,-h);m*=Math.pow(2,-1023);return l*m*Math.pow(2,1023-h)}},{"./lib/bn-to-num":86,"./lib/ctz":87}],96:[function(b,N,I){function r(m,l,a,h,g){m=["function ",m,"(a,l,h,",h.join(","),"){",g?"":"var i\x3d",a?"l-1":"h+1",";while(l\x3c\x3dh){var m\x3d(l+h)\x3e\x3e\x3e1,x\x3da[m]"];g?0>l.indexOf("c")?m.push(";if(x\x3d\x3d\x3dy){return m}else if(x\x3c\x3dy){"):
m.push(";var p\x3dc(x,y);if(p\x3d\x3d\x3d0){return m}else if(p\x3c\x3d0){"):m.push(";if(",l,"){i\x3dm;");a?m.push("l\x3dm+1}else{h\x3dm-1}"):m.push("h\x3dm-1}else{l\x3dm+1}");m.push("}");g?m.push("return -1};"):m.push("return i};");return m.join("")}function q(m,l,a,h){return(new Function([r("A","x"+m+"y",l,["y"],h),r("P","c(x,y)"+m+"0",l,["y","c"],h),"function dispatchBsearch",a,"(a,y,c,l,h){if(typeof(c)\x3d\x3d\x3d'function'){return P(a,(l\x3d\x3d\x3dvoid 0)?0:l|0,(h\x3d\x3d\x3dvoid 0)?a.length-1:h|0,y,c)}else{return A(a,(c\x3d\x3d\x3dvoid 0)?0:c|0,(l\x3d\x3d\x3dvoid 0)?a.length-1:l|0,y)}}return dispatchBsearch",
a].join("")))()}N.exports={ge:q("\x3e\x3d",!1,"GE"),gt:q("\x3e",!1,"GT"),lt:q("\x3c",!0,"LT"),le:q("\x3c\x3d",!0,"LE"),eq:q("-",!0,"EQ",!0)}},{}],97:[function(b,N,I){function r(m){var l=32;(m&=-m)&&l--;m&65535&&(l-=16);m&16711935&&(l-=8);m&252645135&&(l-=4);m&858993459&&(l-=2);m&1431655765&&--l;return l}"use restrict";I.INT_BITS=32;I.INT_MAX=2147483647;I.INT_MIN=-2147483648;I.sign=function(m){return(0<m)-(0>m)};I.abs=function(m){var l=m>>31;return(m^l)-l};I.min=function(m,l){return l^(m^l)&-(m<l)};
I.max=function(m,l){return m^(m^l)&-(m<l)};I.isPow2=function(m){return!(m&m-1)&&!!m};I.log2=function(m){var l=(65535<m)<<4;m>>>=l;var a=(255<m)<<3;m>>>=a;l|=a;a=(15<m)<<2;m>>>=a;l|=a;a=(3<m)<<1;return l|a|m>>>a>>1};I.log10=function(m){return 1E9<=m?9:1E8<=m?8:1E7<=m?7:1E6<=m?6:1E5<=m?5:1E4<=m?4:1E3<=m?3:100<=m?2:10<=m?1:0};I.popCount=function(m){m-=m>>>1&1431655765;m=(m&858993459)+(m>>>2&858993459);return 16843009*(m+(m>>>4)&252645135)>>>24};I.countTrailingZeros=r;I.nextPow2=function(m){m+=0===m;
--m;m|=m>>>1;m|=m>>>2;m|=m>>>4;m|=m>>>8;return(m|m>>>16)+1};I.prevPow2=function(m){m|=m>>>1;m|=m>>>2;m|=m>>>4;m|=m>>>8;m|=m>>>16;return m-(m>>>1)};I.parity=function(m){m^=m>>>16;m^=m>>>8;return 27030>>>((m^m>>>4)&15)&1};var q=Array(256);(function(m){for(var l=0;256>l;++l){var a=l,h=l,g=7;for(a>>>=1;a;a>>>=1)h<<=1,h|=a&1,--g;m[l]=h<<g&255}})(q);I.reverse=function(m){return q[m&255]<<24|q[m>>>8&255]<<16|q[m>>>16&255]<<8|q[m>>>24&255]};I.interleave2=function(m,l){m&=65535;m=(m|m<<8)&16711935;m=(m|m<<
4)&252645135;m=(m|m<<2)&858993459;l&=65535;l=(l|l<<8)&16711935;l=(l|l<<4)&252645135;l=(l|l<<2)&858993459;return(m|m<<1)&1431655765|((l|l<<1)&1431655765)<<1};I.deinterleave2=function(m,l){m=m>>>l&1431655765;m=(m|m>>>1)&858993459;m=(m|m>>>2)&252645135;m=(m|m>>>4)&16711935;return((m|m>>>16)&65535)<<16>>16};I.interleave3=function(m,l,a){m&=1023;m=(m|m<<16)&4278190335;m=(m|m<<8)&251719695;m=(m|m<<4)&3272356035;l&=1023;l=(l|l<<16)&4278190335;l=(l|l<<8)&251719695;l=(l|l<<4)&3272356035;a&=1023;a=(a|a<<16)&
4278190335;a=(a|a<<8)&251719695;a=(a|a<<4)&3272356035;return(m|m<<2)&1227133513|((l|l<<2)&1227133513)<<1|((a|a<<2)&1227133513)<<2};I.deinterleave3=function(m,l){m=m>>>l&1227133513;m=(m|m>>>2)&3272356035;m=(m|m>>>4)&251719695;m=(m|m>>>8)&4278190335;return((m|m>>>16)&1023)<<22>>22};I.nextCombination=function(m){var l=m|m-1;return l+1|(~l&-~l)-1>>>r(m)+1}},{}],98:[function(b,N,I){function r(a,h,g,n,p,d,e){for(var f=0;f<h;f++){for(var k=0;k<g;k++)n[k]=a[k*h+f];q(n,p,d,e,g);for(k=0;k<g;k++)a[k*h+f]=p[k]}for(k=
0;k<g;k++){for(f=0;f<h;f++)n[f]=a[k*h+f];q(n,p,d,e,h);for(f=0;f<h;f++)a[k*h+f]=Math.sqrt(p[f])}}function q(a,h,g,n,p){g[0]=0;n[0]=-l;n[1]=+l;for(var d=1,e=0;d<p;d++){for(var f=(a[d]+d*d-(a[g[e]]+g[e]*g[e]))/(2*d-2*g[e]);f<=n[e];)e--,f=(a[d]+d*d-(a[g[e]]+g[e]*g[e]))/(2*d-2*g[e]);e++;g[e]=d;n[e]=f;n[e+1]=+l}for(e=d=0;d<p;d++){for(;n[e+1]<d;)e++;h[d]=(d-g[e])*(d-g[e])+a[g[e]]}}var m=b("clamp");N.exports=function(a,h){h||(h={});var g=null==h.cutoff?.25:h.cutoff,n=null==h.radius?8:h.radius,p=h.channel||
0;if(ArrayBuffer.isView(a)||Array.isArray(a)){if(!h.width||!h.height)throw Error("For raw data width and height should be provided by options");var d=h.width;var e=h.height;var f=a;var k=h.stride?h.stride:Math.floor(a.length/d/e)}else window.HTMLCanvasElement&&a instanceof window.HTMLCanvasElement?(e=a,f=e.getContext("2d"),d=e.width,e=e.height,f=f.getImageData(0,0,d,e),f=f.data,k=4):window.CanvasRenderingContext2D&&a instanceof window.CanvasRenderingContext2D?(e=a.canvas,d=e.width,e=e.height,f=a.getImageData(0,
0,d,e),f=f.data,k=4):window.ImageData&&a instanceof window.ImageData&&(d=a.width,e=a.height,f=a.data,k=4);var t=Math.max(d,e);if(window.Uint8ClampedArray&&f instanceof window.Uint8ClampedArray||window.Uint8Array&&f instanceof window.Uint8Array){var v=f;f=Array(d*e);a=0;for(h=v.length;a<h;a++)f[a]=v[a*k+p]/255}else if(1!==k)throw Error("Raw data can have only 1 value per pixel");p=Array(d*e);k=Array(d*e);v=Array(t);var w=Array(t),y=Array(t+1);t=Array(t);a=0;for(h=d*e;a<h;a++){var B=f[a];p[a]=1===B?
0:0===B?l:Math.pow(Math.max(0,.5-B),2);k[a]=1===B?l:0===B?0:Math.pow(Math.max(0,B-.5),2)}r(p,d,e,v,w,t,y);r(k,d,e,v,w,t,y);f=window.Float32Array?new Float32Array(d*e):Array(d*e);a=0;for(h=d*e;a<h;a++)f[a]=m(1-((p[a]-k[a])/n+g),0,1);return f};var l=1E20},{clamp:120}],99:[function(b,N,I){(function(r,q){function m(u,D){if(!u)throw Error(D||"Assertion failed");}function l(u,D){u.super_=D;var G=function(){};G.prototype=D.prototype;u.prototype=new G;u.prototype.constructor=u}function a(u,D,G){if(a.isBN(u))return u;
this.negative=0;this.words=null;this.length=0;this.red=null;if(null!==u){if("le"===D||"be"===D)G=D,D=10;this._init(u||0,D||10,G||"be")}}function h(u,D,G){var J=0;for(G=Math.min(u.length,G);D<G;D++){var L=u.charCodeAt(D)-48;J<<=4;J=49<=L&&54>=L?J|L-49+10:17<=L&&22>=L?J|L-17+10:J|L&15}return J}function g(u,D,G,J){var L=0;for(G=Math.min(u.length,G);D<G;D++){var K=u.charCodeAt(D)-48;L*=J;L=49<=K?L+(K-49+10):17<=K?L+(K-17+10):L+K}return L}function n(u,D,G){G.negative=D.negative^u.negative;var J=u.length+
D.length|0;G.length=J;J=J-1|0;var L=u.words[0]|0,K=D.words[0]|0;L*=K;var H=L/67108864|0;G.words[0]=L&67108863;for(var Q=1;Q<J;Q++){var M=H>>>26,P=H&67108863;H=Math.min(Q,D.length-1);for(var T=Math.max(0,Q-u.length+1);T<=H;T++)L=u.words[Q-T|0]|0,K=D.words[T]|0,L=L*K+P,M+=L/67108864|0,P=L&67108863;G.words[Q]=P|0;H=M|0}0!==H?G.words[Q]=H|0:G.length--;return G.strip()}function p(u,D){this.x=u;this.y=D}function d(u,D){this.name=u;this.p=new a(D,16);this.n=this.p.bitLength();this.k=(new a(1)).iushln(this.n).isub(this.p);
this.tmp=this._tmp()}function e(){d.call(this,"k256","ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff fffffffe fffffc2f")}function f(){d.call(this,"p224","ffffffff ffffffff ffffffff ffffffff 00000000 00000000 00000001")}function k(){d.call(this,"p192","ffffffff ffffffff ffffffff fffffffe ffffffff ffffffff")}function t(){d.call(this,"25519","7fffffffffffffff ffffffffffffffff ffffffffffffffff ffffffffffffffed")}function v(u){"string"===typeof u?(u=a._prime(u),this.m=u.p,this.prime=u):(m(u.gtn(1),
"modulus must be greater than 1"),this.m=u,this.prime=null)}function w(u){v.call(this,u);this.shift=this.m.bitLength();0!==this.shift%26&&(this.shift+=26-this.shift%26);this.r=(new a(1)).iushln(this.shift);this.r2=this.imod(this.r.sqr());this.rinv=this.r._invmp(this.m);this.minv=this.rinv.mul(this.r).isubn(1).div(this.m);this.minv=this.minv.umod(this.r);this.minv=this.r.sub(this.minv)}"object"===typeof r?r.exports=a:q.BN=a;a.BN=a;a.wordSize=26;try{var y=b("buffer").Buffer}catch(u){}a.isBN=function(u){return u instanceof
a?!0:null!==u&&"object"===typeof u&&u.constructor.wordSize===a.wordSize&&Array.isArray(u.words)};a.max=function(u,D){return 0<u.cmp(D)?u:D};a.min=function(u,D){return 0>u.cmp(D)?u:D};a.prototype._init=function(u,D,G){if("number"===typeof u)return this._initNumber(u,D,G);if("object"===typeof u)return this._initArray(u,D,G);"hex"===D&&(D=16);m(D===(D|0)&&2<=D&&36>=D);u=u.toString().replace(/\s+/g,"");var J=0;"-"===u[0]&&J++;16===D?this._parseHex(u,J):this._parseBase(u,D,J);"-"===u[0]&&(this.negative=
1);this.strip();"le"===G&&this._initArray(this.toArray(),D,G)};a.prototype._initNumber=function(u,D,G){0>u&&(this.negative=1,u=-u);67108864>u?(this.words=[u&67108863],this.length=1):4503599627370496>u?(this.words=[u&67108863,u/67108864&67108863],this.length=2):(m(9007199254740992>u),this.words=[u&67108863,u/67108864&67108863,1],this.length=3);"le"===G&&this._initArray(this.toArray(),D,G)};a.prototype._initArray=function(u,D,G){m("number"===typeof u.length);if(0>=u.length)return this.words=[0],this.length=
1,this;this.length=Math.ceil(u.length/3);this.words=Array(this.length);for(D=0;D<this.length;D++)this.words[D]=0;var J=0;if("be"===G)for(D=u.length-1,G=0;0<=D;D-=3){var L=u[D]|u[D-1]<<8|u[D-2]<<16;this.words[G]|=L<<J&67108863;this.words[G+1]=L>>>26-J&67108863;J+=24;26<=J&&(J-=26,G++)}else if("le"===G)for(G=D=0;D<u.length;D+=3)L=u[D]|u[D+1]<<8|u[D+2]<<16,this.words[G]|=L<<J&67108863,this.words[G+1]=L>>>26-J&67108863,J+=24,26<=J&&(J-=26,G++);return this.strip()};a.prototype._parseHex=function(u,D){this.length=
Math.ceil((u.length-D)/6);this.words=Array(this.length);for(var G=0;G<this.length;G++)this.words[G]=0;var J,L=0;G=u.length-6;for(J=0;G>=D;G-=6){var K=h(u,G,G+6);this.words[J]|=K<<L&67108863;this.words[J+1]|=K>>>26-L&4194303;L+=24;26<=L&&(L-=26,J++)}G+6!==D&&(K=h(u,D,G+6),this.words[J]|=K<<L&67108863,this.words[J+1]|=K>>>26-L&4194303);this.strip()};a.prototype._parseBase=function(u,D,G){this.words=[0];this.length=1;for(var J=0,L=1;67108863>=L;L*=D)J++;J--;L=L/D|0;var K=u.length-G,H=K%J;K=Math.min(K,
K-H)+G;for(var Q=G;Q<K;Q+=J)G=g(u,Q,Q+J,D),this.imuln(L),67108864>this.words[0]+G?this.words[0]+=G:this._iaddn(G);if(0!==H){J=1;G=g(u,Q,u.length,D);for(Q=0;Q<H;Q++)J*=D;this.imuln(J);67108864>this.words[0]+G?this.words[0]+=G:this._iaddn(G)}};a.prototype.copy=function(u){u.words=Array(this.length);for(var D=0;D<this.length;D++)u.words[D]=this.words[D];u.length=this.length;u.negative=this.negative;u.red=this.red};a.prototype.clone=function(){var u=new a(null);this.copy(u);return u};a.prototype._expand=
function(u){for(;this.length<u;)this.words[this.length++]=0;return this};a.prototype.strip=function(){for(;1<this.length&&0===this.words[this.length-1];)this.length--;return this._normSign()};a.prototype._normSign=function(){1===this.length&&0===this.words[0]&&(this.negative=0);return this};a.prototype.inspect=function(){return(this.red?"\x3cBN-R: ":"\x3cBN: ")+this.toString(16)+"\x3e"};var B=" 0 00 000 0000 00000 000000 0000000 00000000 000000000 0000000000 00000000000 000000000000 0000000000000 00000000000000 000000000000000 0000000000000000 00000000000000000 000000000000000000 0000000000000000000 00000000000000000000 000000000000000000000 0000000000000000000000 00000000000000000000000 000000000000000000000000 0000000000000000000000000".split(" "),
A=[0,0,25,16,12,11,10,9,8,8,7,7,7,7,6,6,6,6,6,6,6,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5],z=[0,0,33554432,43046721,16777216,48828125,60466176,40353607,16777216,43046721,1E7,19487171,35831808,62748517,7529536,11390625,16777216,24137569,34012224,47045881,64E6,4084101,5153632,6436343,7962624,9765625,11881376,14348907,17210368,20511149,243E5,28629151,33554432,39135393,45435424,52521875,60466176];a.prototype.toString=function(u,D){u=u||10;D=D|0||1;if(16===u||"hex"===u){var G="";for(var J=u=0,L=0;L<this.length;L++){var K=
this.words[L],H=((K<<u|J)&16777215).toString(16);J=K>>>24-u&16777215;G=0!==J||L!==this.length-1?B[6-H.length]+H+G:H+G;u+=2;26<=u&&(u-=26,L--)}for(0!==J&&(G=J.toString(16)+G);0!==G.length%D;)G="0"+G;0!==this.negative&&(G="-"+G);return G}if(u===(u|0)&&2<=u&&36>=u){J=A[u];L=z[u];G="";K=this.clone();for(K.negative=0;!K.isZero();)H=K.modn(L).toString(u),K=K.idivn(L),G=K.isZero()?H+G:B[J-H.length]+H+G;for(this.isZero()&&(G="0"+G);0!==G.length%D;)G="0"+G;0!==this.negative&&(G="-"+G);return G}m(!1,"Base should be between 2 and 36")};
a.prototype.toNumber=function(){var u=this.words[0];2===this.length?u+=67108864*this.words[1]:3===this.length&&1===this.words[2]?u+=4503599627370496+67108864*this.words[1]:2<this.length&&m(!1,"Number can only safely store up to 53 bits");return 0!==this.negative?-u:u};a.prototype.toJSON=function(){return this.toString(16)};a.prototype.toBuffer=function(u,D){m("undefined"!==typeof y);return this.toArrayLike(y,u,D)};a.prototype.toArray=function(u,D){return this.toArrayLike(Array,u,D)};a.prototype.toArrayLike=
function(u,D,G){var J=this.byteLength();G=G||Math.max(1,J);m(J<=G,"byte array longer than desired length");m(0<G,"Requested array length \x3c\x3d 0");this.strip();var L="le"===D;u=new u(G);D=this.clone();if(L){for(L=0;!D.isZero();L++)J=D.andln(255),D.iushrn(8),u[L]=J;for(;L<G;L++)u[L]=0}else{for(L=0;L<G-J;L++)u[L]=0;for(L=0;!D.isZero();L++)J=D.andln(255),D.iushrn(8),u[G-L-1]=J}return u};a.prototype._countBits=Math.clz32?function(u){return 32-Math.clz32(u)}:function(u){var D=0;4096<=u&&(D+=13,u>>>=
13);64<=u&&(D+=7,u>>>=7);8<=u&&(D+=4,u>>>=4);2<=u&&(D+=2,u>>>=2);return D+u};a.prototype._zeroBits=function(u){if(0===u)return 26;var D=0;0===(u&8191)&&(D+=13,u>>>=13);0===(u&127)&&(D+=7,u>>>=7);0===(u&15)&&(D+=4,u>>>=4);0===(u&3)&&(D+=2,u>>>=2);0===(u&1)&&D++;return D};a.prototype.bitLength=function(){var u=this._countBits(this.words[this.length-1]);return 26*(this.length-1)+u};a.prototype.zeroBits=function(){if(this.isZero())return 0;for(var u=0,D=0;D<this.length;D++){var G=this._zeroBits(this.words[D]);
u+=G;if(26!==G)break}return u};a.prototype.byteLength=function(){return Math.ceil(this.bitLength()/8)};a.prototype.toTwos=function(u){return 0!==this.negative?this.abs().inotn(u).iaddn(1):this.clone()};a.prototype.fromTwos=function(u){return this.testn(u-1)?this.notn(u).iaddn(1).ineg():this.clone()};a.prototype.isNeg=function(){return 0!==this.negative};a.prototype.neg=function(){return this.clone().ineg()};a.prototype.ineg=function(){this.isZero()||(this.negative^=1);return this};a.prototype.iuor=
function(u){for(;this.length<u.length;)this.words[this.length++]=0;for(var D=0;D<u.length;D++)this.words[D]|=u.words[D];return this.strip()};a.prototype.ior=function(u){m(0===(this.negative|u.negative));return this.iuor(u)};a.prototype.or=function(u){return this.length>u.length?this.clone().ior(u):u.clone().ior(this)};a.prototype.uor=function(u){return this.length>u.length?this.clone().iuor(u):u.clone().iuor(this)};a.prototype.iuand=function(u){var D=this.length>u.length?u:this;for(var G=0;G<D.length;G++)this.words[G]&=
u.words[G];this.length=D.length;return this.strip()};a.prototype.iand=function(u){m(0===(this.negative|u.negative));return this.iuand(u)};a.prototype.and=function(u){return this.length>u.length?this.clone().iand(u):u.clone().iand(this)};a.prototype.uand=function(u){return this.length>u.length?this.clone().iuand(u):u.clone().iuand(this)};a.prototype.iuxor=function(u){if(this.length>u.length)var D=this;else D=u,u=this;for(var G=0;G<u.length;G++)this.words[G]=D.words[G]^u.words[G];if(this!==D)for(;G<
D.length;G++)this.words[G]=D.words[G];this.length=D.length;return this.strip()};a.prototype.ixor=function(u){m(0===(this.negative|u.negative));return this.iuxor(u)};a.prototype.xor=function(u){return this.length>u.length?this.clone().ixor(u):u.clone().ixor(this)};a.prototype.uxor=function(u){return this.length>u.length?this.clone().iuxor(u):u.clone().iuxor(this)};a.prototype.inotn=function(u){m("number"===typeof u&&0<=u);var D=Math.ceil(u/26)|0;u%=26;this._expand(D);0<u&&D--;for(var G=0;G<D;G++)this.words[G]=
~this.words[G]&67108863;0<u&&(this.words[G]=~this.words[G]&67108863>>26-u);return this.strip()};a.prototype.notn=function(u){return this.clone().inotn(u)};a.prototype.setn=function(u,D){m("number"===typeof u&&0<=u);var G=u/26|0;u%=26;this._expand(G+1);this.words[G]=D?this.words[G]|1<<u:this.words[G]&~(1<<u);return this.strip()};a.prototype.iadd=function(u){if(0!==this.negative&&0===u.negative)return this.negative=0,this.isub(u),this.negative^=1,this._normSign();if(0===this.negative&&0!==u.negative){u.negative=
0;var D=this.isub(u);u.negative=1;return D._normSign()}if(this.length>u.length)var G=this;else G=u,u=this;for(var J=D=0;J<u.length;J++)D=(G.words[J]|0)+(u.words[J]|0)+D,this.words[J]=D&67108863,D>>>=26;for(;0!==D&&J<G.length;J++)D=(G.words[J]|0)+D,this.words[J]=D&67108863,D>>>=26;this.length=G.length;if(0!==D)this.words[this.length]=D,this.length++;else if(G!==this)for(;J<G.length;J++)this.words[J]=G.words[J];return this};a.prototype.add=function(u){if(0!==u.negative&&0===this.negative){u.negative=
0;var D=this.sub(u);u.negative^=1;return D}return 0===u.negative&&0!==this.negative?(this.negative=0,D=u.sub(this),this.negative=1,D):this.length>u.length?this.clone().iadd(u):u.clone().iadd(this)};a.prototype.isub=function(u){if(0!==u.negative){u.negative=0;var D=this.iadd(u);u.negative=1;return D._normSign()}if(0!==this.negative)return this.negative=0,this.iadd(u),this.negative=1,this._normSign();D=this.cmp(u);if(0===D)return this.negative=0,this.length=1,this.words[0]=0,this;if(0<D)var G=this;
else G=u,u=this;for(var J=0,L=0;L<u.length;L++)D=(G.words[L]|0)-(u.words[L]|0)+J,J=D>>26,this.words[L]=D&67108863;for(;0!==J&&L<G.length;L++)D=(G.words[L]|0)+J,J=D>>26,this.words[L]=D&67108863;if(0===J&&L<G.length&&G!==this)for(;L<G.length;L++)this.words[L]=G.words[L];this.length=Math.max(this.length,L);G!==this&&(this.negative=1);return this.strip()};a.prototype.sub=function(u){return this.clone().isub(u)};var E=function(u,D,G){var J=u.words,L=D.words,K=G.words,H=0,Q=J[0]|0,M=Q&8191,P=Q>>>13,T=J[1]|
0;Q=T&8191;var O=T>>>13,U=J[2]|0;T=U&8191;var S=U>>>13,X=J[3]|0;U=X&8191;var ba=X>>>13,ca=J[4]|0;X=ca&8191;var ia=ca>>>13,ja=J[5]|0;ca=ja&8191;var la=ja>>>13,da=J[6]|0;ja=da&8191;var oa=da>>>13,sa=J[7]|0;da=sa&8191;var ma=sa>>>13,qa=J[8]|0;sa=qa&8191;qa>>>=13;var pa=J[9]|0;J=pa&8191;pa>>>=13;var na=L[0]|0,ka=na&8191,ua=na>>>13,va=L[1]|0;na=va&8191;var Ca=va>>>13,Ma=L[2]|0;va=Ma&8191;var Ua=Ma>>>13,eb=L[3]|0;Ma=eb&8191;var fb=eb>>>13,nb=L[4]|0;eb=nb&8191;var cb=nb>>>13,$a=L[5]|0;nb=$a&8191;var jb=
$a>>>13,pb=L[6]|0;$a=pb&8191;var xa=pb>>>13,Ea=L[7]|0;pb=Ea&8191;var Ia=Ea>>>13,Oa=L[8]|0;Ea=Oa&8191;Oa>>>=13;var bb=L[9]|0;L=bb&8191;bb>>>=13;G.negative=u.negative^D.negative;G.length=19;var Xa=Math.imul(M,ka);u=Math.imul(M,ua);u=u+Math.imul(P,ka)|0;D=Math.imul(P,ua);var tb=(H+Xa|0)+((u&8191)<<13)|0;H=(D+(u>>>13)|0)+(tb>>>26)|0;tb&=67108863;Xa=Math.imul(Q,ka);u=Math.imul(Q,ua);u=u+Math.imul(O,ka)|0;D=Math.imul(O,ua);Xa=Xa+Math.imul(M,na)|0;u=u+Math.imul(M,Ca)|0;u=u+Math.imul(P,na)|0;D=D+Math.imul(P,
Ca)|0;var Ka=(H+Xa|0)+((u&8191)<<13)|0;H=(D+(u>>>13)|0)+(Ka>>>26)|0;Ka&=67108863;Xa=Math.imul(T,ka);u=Math.imul(T,ua);u=u+Math.imul(S,ka)|0;D=Math.imul(S,ua);Xa=Xa+Math.imul(Q,na)|0;u=u+Math.imul(Q,Ca)|0;u=u+Math.imul(O,na)|0;D=D+Math.imul(O,Ca)|0;Xa=Xa+Math.imul(M,va)|0;u=u+Math.imul(M,Ua)|0;u=u+Math.imul(P,va)|0;D=D+Math.imul(P,Ua)|0;var Ta=(H+Xa|0)+((u&8191)<<13)|0;H=(D+(u>>>13)|0)+(Ta>>>26)|0;Ta&=67108863;Xa=Math.imul(U,ka);u=Math.imul(U,ua);u=u+Math.imul(ba,ka)|0;D=Math.imul(ba,ua);Xa=Xa+Math.imul(T,
na)|0;u=u+Math.imul(T,Ca)|0;u=u+Math.imul(S,na)|0;D=D+Math.imul(S,Ca)|0;Xa=Xa+Math.imul(Q,va)|0;u=u+Math.imul(Q,Ua)|0;u=u+Math.imul(O,va)|0;D=D+Math.imul(O,Ua)|0;Xa=Xa+Math.imul(M,Ma)|0;u=u+Math.imul(M,fb)|0;u=u+Math.imul(P,Ma)|0;D=D+Math.imul(P,fb)|0;var Na=(H+Xa|0)+((u&8191)<<13)|0;H=(D+(u>>>13)|0)+(Na>>>26)|0;Na&=67108863;Xa=Math.imul(X,ka);u=Math.imul(X,ua);u=u+Math.imul(ia,ka)|0;D=Math.imul(ia,ua);Xa=Xa+Math.imul(U,na)|0;u=u+Math.imul(U,Ca)|0;u=u+Math.imul(ba,na)|0;D=D+Math.imul(ba,Ca)|0;Xa=
Xa+Math.imul(T,va)|0;u=u+Math.imul(T,Ua)|0;u=u+Math.imul(S,va)|0;D=D+Math.imul(S,Ua)|0;Xa=Xa+Math.imul(Q,Ma)|0;u=u+Math.imul(Q,fb)|0;u=u+Math.imul(O,Ma)|0;D=D+Math.imul(O,fb)|0;Xa=Xa+Math.imul(M,eb)|0;u=u+Math.imul(M,cb)|0;u=u+Math.imul(P,eb)|0;D=D+Math.imul(P,cb)|0;var ib=(H+Xa|0)+((u&8191)<<13)|0;H=(D+(u>>>13)|0)+(ib>>>26)|0;ib&=67108863;Xa=Math.imul(ca,ka);u=Math.imul(ca,ua);u=u+Math.imul(la,ka)|0;D=Math.imul(la,ua);Xa=Xa+Math.imul(X,na)|0;u=u+Math.imul(X,Ca)|0;u=u+Math.imul(ia,na)|0;D=D+Math.imul(ia,
Ca)|0;Xa=Xa+Math.imul(U,va)|0;u=u+Math.imul(U,Ua)|0;u=u+Math.imul(ba,va)|0;D=D+Math.imul(ba,Ua)|0;Xa=Xa+Math.imul(T,Ma)|0;u=u+Math.imul(T,fb)|0;u=u+Math.imul(S,Ma)|0;D=D+Math.imul(S,fb)|0;Xa=Xa+Math.imul(Q,eb)|0;u=u+Math.imul(Q,cb)|0;u=u+Math.imul(O,eb)|0;D=D+Math.imul(O,cb)|0;Xa=Xa+Math.imul(M,nb)|0;u=u+Math.imul(M,jb)|0;u=u+Math.imul(P,nb)|0;D=D+Math.imul(P,jb)|0;var qb=(H+Xa|0)+((u&8191)<<13)|0;H=(D+(u>>>13)|0)+(qb>>>26)|0;qb&=67108863;Xa=Math.imul(ja,ka);u=Math.imul(ja,ua);u=u+Math.imul(oa,ka)|
0;D=Math.imul(oa,ua);Xa=Xa+Math.imul(ca,na)|0;u=u+Math.imul(ca,Ca)|0;u=u+Math.imul(la,na)|0;D=D+Math.imul(la,Ca)|0;Xa=Xa+Math.imul(X,va)|0;u=u+Math.imul(X,Ua)|0;u=u+Math.imul(ia,va)|0;D=D+Math.imul(ia,Ua)|0;Xa=Xa+Math.imul(U,Ma)|0;u=u+Math.imul(U,fb)|0;u=u+Math.imul(ba,Ma)|0;D=D+Math.imul(ba,fb)|0;Xa=Xa+Math.imul(T,eb)|0;u=u+Math.imul(T,cb)|0;u=u+Math.imul(S,eb)|0;D=D+Math.imul(S,cb)|0;Xa=Xa+Math.imul(Q,nb)|0;u=u+Math.imul(Q,jb)|0;u=u+Math.imul(O,nb)|0;D=D+Math.imul(O,jb)|0;Xa=Xa+Math.imul(M,$a)|
0;u=u+Math.imul(M,xa)|0;u=u+Math.imul(P,$a)|0;D=D+Math.imul(P,xa)|0;var sb=(H+Xa|0)+((u&8191)<<13)|0;H=(D+(u>>>13)|0)+(sb>>>26)|0;sb&=67108863;Xa=Math.imul(da,ka);u=Math.imul(da,ua);u=u+Math.imul(ma,ka)|0;D=Math.imul(ma,ua);Xa=Xa+Math.imul(ja,na)|0;u=u+Math.imul(ja,Ca)|0;u=u+Math.imul(oa,na)|0;D=D+Math.imul(oa,Ca)|0;Xa=Xa+Math.imul(ca,va)|0;u=u+Math.imul(ca,Ua)|0;u=u+Math.imul(la,va)|0;D=D+Math.imul(la,Ua)|0;Xa=Xa+Math.imul(X,Ma)|0;u=u+Math.imul(X,fb)|0;u=u+Math.imul(ia,Ma)|0;D=D+Math.imul(ia,fb)|
0;Xa=Xa+Math.imul(U,eb)|0;u=u+Math.imul(U,cb)|0;u=u+Math.imul(ba,eb)|0;D=D+Math.imul(ba,cb)|0;Xa=Xa+Math.imul(T,nb)|0;u=u+Math.imul(T,jb)|0;u=u+Math.imul(S,nb)|0;D=D+Math.imul(S,jb)|0;Xa=Xa+Math.imul(Q,$a)|0;u=u+Math.imul(Q,xa)|0;u=u+Math.imul(O,$a)|0;D=D+Math.imul(O,xa)|0;Xa=Xa+Math.imul(M,pb)|0;u=u+Math.imul(M,Ia)|0;u=u+Math.imul(P,pb)|0;D=D+Math.imul(P,Ia)|0;var Ba=(H+Xa|0)+((u&8191)<<13)|0;H=(D+(u>>>13)|0)+(Ba>>>26)|0;Ba&=67108863;Xa=Math.imul(sa,ka);u=Math.imul(sa,ua);u=u+Math.imul(qa,ka)|0;
D=Math.imul(qa,ua);Xa=Xa+Math.imul(da,na)|0;u=u+Math.imul(da,Ca)|0;u=u+Math.imul(ma,na)|0;D=D+Math.imul(ma,Ca)|0;Xa=Xa+Math.imul(ja,va)|0;u=u+Math.imul(ja,Ua)|0;u=u+Math.imul(oa,va)|0;D=D+Math.imul(oa,Ua)|0;Xa=Xa+Math.imul(ca,Ma)|0;u=u+Math.imul(ca,fb)|0;u=u+Math.imul(la,Ma)|0;D=D+Math.imul(la,fb)|0;Xa=Xa+Math.imul(X,eb)|0;u=u+Math.imul(X,cb)|0;u=u+Math.imul(ia,eb)|0;D=D+Math.imul(ia,cb)|0;Xa=Xa+Math.imul(U,nb)|0;u=u+Math.imul(U,jb)|0;u=u+Math.imul(ba,nb)|0;D=D+Math.imul(ba,jb)|0;Xa=Xa+Math.imul(T,
$a)|0;u=u+Math.imul(T,xa)|0;u=u+Math.imul(S,$a)|0;D=D+Math.imul(S,xa)|0;Xa=Xa+Math.imul(Q,pb)|0;u=u+Math.imul(Q,Ia)|0;u=u+Math.imul(O,pb)|0;D=D+Math.imul(O,Ia)|0;Xa=Xa+Math.imul(M,Ea)|0;u=u+Math.imul(M,Oa)|0;u=u+Math.imul(P,Ea)|0;D=D+Math.imul(P,Oa)|0;var Fa=(H+Xa|0)+((u&8191)<<13)|0;H=(D+(u>>>13)|0)+(Fa>>>26)|0;Fa&=67108863;Xa=Math.imul(J,ka);u=Math.imul(J,ua);u=u+Math.imul(pa,ka)|0;D=Math.imul(pa,ua);Xa=Xa+Math.imul(sa,na)|0;u=u+Math.imul(sa,Ca)|0;u=u+Math.imul(qa,na)|0;D=D+Math.imul(qa,Ca)|0;Xa=
Xa+Math.imul(da,va)|0;u=u+Math.imul(da,Ua)|0;u=u+Math.imul(ma,va)|0;D=D+Math.imul(ma,Ua)|0;Xa=Xa+Math.imul(ja,Ma)|0;u=u+Math.imul(ja,fb)|0;u=u+Math.imul(oa,Ma)|0;D=D+Math.imul(oa,fb)|0;Xa=Xa+Math.imul(ca,eb)|0;u=u+Math.imul(ca,cb)|0;u=u+Math.imul(la,eb)|0;D=D+Math.imul(la,cb)|0;Xa=Xa+Math.imul(X,nb)|0;u=u+Math.imul(X,jb)|0;u=u+Math.imul(ia,nb)|0;D=D+Math.imul(ia,jb)|0;Xa=Xa+Math.imul(U,$a)|0;u=u+Math.imul(U,xa)|0;u=u+Math.imul(ba,$a)|0;D=D+Math.imul(ba,xa)|0;Xa=Xa+Math.imul(T,pb)|0;u=u+Math.imul(T,
Ia)|0;u=u+Math.imul(S,pb)|0;D=D+Math.imul(S,Ia)|0;Xa=Xa+Math.imul(Q,Ea)|0;u=u+Math.imul(Q,Oa)|0;u=u+Math.imul(O,Ea)|0;D=D+Math.imul(O,Oa)|0;Xa=Xa+Math.imul(M,L)|0;u=u+Math.imul(M,bb)|0;u=u+Math.imul(P,L)|0;D=D+Math.imul(P,bb)|0;M=(H+Xa|0)+((u&8191)<<13)|0;H=(D+(u>>>13)|0)+(M>>>26)|0;M&=67108863;Xa=Math.imul(J,na);u=Math.imul(J,Ca);u=u+Math.imul(pa,na)|0;D=Math.imul(pa,Ca);Xa=Xa+Math.imul(sa,va)|0;u=u+Math.imul(sa,Ua)|0;u=u+Math.imul(qa,va)|0;D=D+Math.imul(qa,Ua)|0;Xa=Xa+Math.imul(da,Ma)|0;u=u+Math.imul(da,
fb)|0;u=u+Math.imul(ma,Ma)|0;D=D+Math.imul(ma,fb)|0;Xa=Xa+Math.imul(ja,eb)|0;u=u+Math.imul(ja,cb)|0;u=u+Math.imul(oa,eb)|0;D=D+Math.imul(oa,cb)|0;Xa=Xa+Math.imul(ca,nb)|0;u=u+Math.imul(ca,jb)|0;u=u+Math.imul(la,nb)|0;D=D+Math.imul(la,jb)|0;Xa=Xa+Math.imul(X,$a)|0;u=u+Math.imul(X,xa)|0;u=u+Math.imul(ia,$a)|0;D=D+Math.imul(ia,xa)|0;Xa=Xa+Math.imul(U,pb)|0;u=u+Math.imul(U,Ia)|0;u=u+Math.imul(ba,pb)|0;D=D+Math.imul(ba,Ia)|0;Xa=Xa+Math.imul(T,Ea)|0;u=u+Math.imul(T,Oa)|0;u=u+Math.imul(S,Ea)|0;D=D+Math.imul(S,
Oa)|0;Xa=Xa+Math.imul(Q,L)|0;u=u+Math.imul(Q,bb)|0;u=u+Math.imul(O,L)|0;D=D+Math.imul(O,bb)|0;Q=(H+Xa|0)+((u&8191)<<13)|0;H=(D+(u>>>13)|0)+(Q>>>26)|0;Q&=67108863;Xa=Math.imul(J,va);u=Math.imul(J,Ua);u=u+Math.imul(pa,va)|0;D=Math.imul(pa,Ua);Xa=Xa+Math.imul(sa,Ma)|0;u=u+Math.imul(sa,fb)|0;u=u+Math.imul(qa,Ma)|0;D=D+Math.imul(qa,fb)|0;Xa=Xa+Math.imul(da,eb)|0;u=u+Math.imul(da,cb)|0;u=u+Math.imul(ma,eb)|0;D=D+Math.imul(ma,cb)|0;Xa=Xa+Math.imul(ja,nb)|0;u=u+Math.imul(ja,jb)|0;u=u+Math.imul(oa,nb)|0;D=
D+Math.imul(oa,jb)|0;Xa=Xa+Math.imul(ca,$a)|0;u=u+Math.imul(ca,xa)|0;u=u+Math.imul(la,$a)|0;D=D+Math.imul(la,xa)|0;Xa=Xa+Math.imul(X,pb)|0;u=u+Math.imul(X,Ia)|0;u=u+Math.imul(ia,pb)|0;D=D+Math.imul(ia,Ia)|0;Xa=Xa+Math.imul(U,Ea)|0;u=u+Math.imul(U,Oa)|0;u=u+Math.imul(ba,Ea)|0;D=D+Math.imul(ba,Oa)|0;Xa=Xa+Math.imul(T,L)|0;u=u+Math.imul(T,bb)|0;u=u+Math.imul(S,L)|0;D=D+Math.imul(S,bb)|0;T=(H+Xa|0)+((u&8191)<<13)|0;H=(D+(u>>>13)|0)+(T>>>26)|0;T&=67108863;Xa=Math.imul(J,Ma);u=Math.imul(J,fb);u=u+Math.imul(pa,
Ma)|0;D=Math.imul(pa,fb);Xa=Xa+Math.imul(sa,eb)|0;u=u+Math.imul(sa,cb)|0;u=u+Math.imul(qa,eb)|0;D=D+Math.imul(qa,cb)|0;Xa=Xa+Math.imul(da,nb)|0;u=u+Math.imul(da,jb)|0;u=u+Math.imul(ma,nb)|0;D=D+Math.imul(ma,jb)|0;Xa=Xa+Math.imul(ja,$a)|0;u=u+Math.imul(ja,xa)|0;u=u+Math.imul(oa,$a)|0;D=D+Math.imul(oa,xa)|0;Xa=Xa+Math.imul(ca,pb)|0;u=u+Math.imul(ca,Ia)|0;u=u+Math.imul(la,pb)|0;D=D+Math.imul(la,Ia)|0;Xa=Xa+Math.imul(X,Ea)|0;u=u+Math.imul(X,Oa)|0;u=u+Math.imul(ia,Ea)|0;D=D+Math.imul(ia,Oa)|0;Xa=Xa+Math.imul(U,
L)|0;u=u+Math.imul(U,bb)|0;u=u+Math.imul(ba,L)|0;D=D+Math.imul(ba,bb)|0;U=(H+Xa|0)+((u&8191)<<13)|0;H=(D+(u>>>13)|0)+(U>>>26)|0;U&=67108863;Xa=Math.imul(J,eb);u=Math.imul(J,cb);u=u+Math.imul(pa,eb)|0;D=Math.imul(pa,cb);Xa=Xa+Math.imul(sa,nb)|0;u=u+Math.imul(sa,jb)|0;u=u+Math.imul(qa,nb)|0;D=D+Math.imul(qa,jb)|0;Xa=Xa+Math.imul(da,$a)|0;u=u+Math.imul(da,xa)|0;u=u+Math.imul(ma,$a)|0;D=D+Math.imul(ma,xa)|0;Xa=Xa+Math.imul(ja,pb)|0;u=u+Math.imul(ja,Ia)|0;u=u+Math.imul(oa,pb)|0;D=D+Math.imul(oa,Ia)|0;
Xa=Xa+Math.imul(ca,Ea)|0;u=u+Math.imul(ca,Oa)|0;u=u+Math.imul(la,Ea)|0;D=D+Math.imul(la,Oa)|0;Xa=Xa+Math.imul(X,L)|0;u=u+Math.imul(X,bb)|0;u=u+Math.imul(ia,L)|0;D=D+Math.imul(ia,bb)|0;X=(H+Xa|0)+((u&8191)<<13)|0;H=(D+(u>>>13)|0)+(X>>>26)|0;X&=67108863;Xa=Math.imul(J,nb);u=Math.imul(J,jb);u=u+Math.imul(pa,nb)|0;D=Math.imul(pa,jb);Xa=Xa+Math.imul(sa,$a)|0;u=u+Math.imul(sa,xa)|0;u=u+Math.imul(qa,$a)|0;D=D+Math.imul(qa,xa)|0;Xa=Xa+Math.imul(da,pb)|0;u=u+Math.imul(da,Ia)|0;u=u+Math.imul(ma,pb)|0;D=D+Math.imul(ma,
Ia)|0;Xa=Xa+Math.imul(ja,Ea)|0;u=u+Math.imul(ja,Oa)|0;u=u+Math.imul(oa,Ea)|0;D=D+Math.imul(oa,Oa)|0;Xa=Xa+Math.imul(ca,L)|0;u=u+Math.imul(ca,bb)|0;u=u+Math.imul(la,L)|0;D=D+Math.imul(la,bb)|0;ca=(H+Xa|0)+((u&8191)<<13)|0;H=(D+(u>>>13)|0)+(ca>>>26)|0;ca&=67108863;Xa=Math.imul(J,$a);u=Math.imul(J,xa);u=u+Math.imul(pa,$a)|0;D=Math.imul(pa,xa);Xa=Xa+Math.imul(sa,pb)|0;u=u+Math.imul(sa,Ia)|0;u=u+Math.imul(qa,pb)|0;D=D+Math.imul(qa,Ia)|0;Xa=Xa+Math.imul(da,Ea)|0;u=u+Math.imul(da,Oa)|0;u=u+Math.imul(ma,
Ea)|0;D=D+Math.imul(ma,Oa)|0;Xa=Xa+Math.imul(ja,L)|0;u=u+Math.imul(ja,bb)|0;u=u+Math.imul(oa,L)|0;D=D+Math.imul(oa,bb)|0;ja=(H+Xa|0)+((u&8191)<<13)|0;H=(D+(u>>>13)|0)+(ja>>>26)|0;ja&=67108863;Xa=Math.imul(J,pb);u=Math.imul(J,Ia);u=u+Math.imul(pa,pb)|0;D=Math.imul(pa,Ia);Xa=Xa+Math.imul(sa,Ea)|0;u=u+Math.imul(sa,Oa)|0;u=u+Math.imul(qa,Ea)|0;D=D+Math.imul(qa,Oa)|0;Xa=Xa+Math.imul(da,L)|0;u=u+Math.imul(da,bb)|0;u=u+Math.imul(ma,L)|0;D=D+Math.imul(ma,bb)|0;da=(H+Xa|0)+((u&8191)<<13)|0;H=(D+(u>>>13)|0)+
(da>>>26)|0;da&=67108863;Xa=Math.imul(J,Ea);u=Math.imul(J,Oa);u=u+Math.imul(pa,Ea)|0;D=Math.imul(pa,Oa);Xa=Xa+Math.imul(sa,L)|0;u=u+Math.imul(sa,bb)|0;u=u+Math.imul(qa,L)|0;D=D+Math.imul(qa,bb)|0;sa=(H+Xa|0)+((u&8191)<<13)|0;H=(D+(u>>>13)|0)+(sa>>>26)|0;sa&=67108863;Xa=Math.imul(J,L);u=Math.imul(J,bb);u=u+Math.imul(pa,L)|0;D=Math.imul(pa,bb);P=(H+Xa|0)+((u&8191)<<13)|0;H=(D+(u>>>13)|0)+(P>>>26)|0;K[0]=tb;K[1]=Ka;K[2]=Ta;K[3]=Na;K[4]=ib;K[5]=qb;K[6]=sb;K[7]=Ba;K[8]=Fa;K[9]=M;K[10]=Q;K[11]=T;K[12]=
U;K[13]=X;K[14]=ca;K[15]=ja;K[16]=da;K[17]=sa;K[18]=P&67108863;0!==H&&(K[19]=H,G.length++);return G};Math.imul||(E=n);a.prototype.mulTo=function(u,D){var G=this.length+u.length;if(10===this.length&&10===u.length)u=E(this,u,D);else if(63>G)u=n(this,u,D);else if(1024>G){D.negative=u.negative^this.negative;D.length=this.length+u.length;for(var J=0,L=G=0;L<D.length-1;L++){var K=G;G=0;J&=67108863;for(var H=Math.min(L,u.length-1),Q=Math.max(0,L-this.length+1);Q<=H;Q++){var M=(this.words[L-Q]|0)*(u.words[Q]|
0),P=M&67108863;K=K+(M/67108864|0)|0;P=P+J|0;J=P&67108863;K=K+(P>>>26)|0;G+=K>>>26;K&=67108863}D.words[L]=J;J=K}0!==J?D.words[L]=J:D.length--;u=D.strip()}else u=(new p).mulp(this,u,D);return u};p.prototype.makeRBT=function(u){for(var D=Array(u),G=a.prototype._countBits(u)-1,J=0;J<u;J++)D[J]=this.revBin(J,G,u);return D};p.prototype.revBin=function(u,D,G){if(0===u||u===G-1)return u;for(var J=G=0;J<D;J++)G|=(u&1)<<D-J-1,u>>=1;return G};p.prototype.permute=function(u,D,G,J,L,K){for(var H=0;H<K;H++)J[H]=
D[u[H]],L[H]=G[u[H]]};p.prototype.transform=function(u,D,G,J,L,K){this.permute(K,u,D,G,J,L);for(u=1;u<L;u<<=1){D=u<<1;K=Math.cos(2*Math.PI/D);for(var H=Math.sin(2*Math.PI/D),Q=0;Q<L;Q+=D)for(var M=K,P=H,T=0;T<u;T++){var O=G[Q+T],U=J[Q+T],S=G[Q+T+u],X=J[Q+T+u],ba=M*S-P*X;X=M*X+P*S;S=ba;G[Q+T]=O+S;J[Q+T]=U+X;G[Q+T+u]=O-S;J[Q+T+u]=U-X;T!==D&&(ba=K*M-H*P,P=K*P+H*M,M=ba)}}};p.prototype.guessLen13b=function(u,D){u=Math.max(D,u)|1;D=u&1;var G=0;for(u=u/2|0;u;u>>>=1)G++;return 1<<G+1+D};p.prototype.conjugate=
function(u,D,G){if(!(1>=G))for(var J=0;J<G/2;J++){var L=u[J];u[J]=u[G-J-1];u[G-J-1]=L;L=D[J];D[J]=-D[G-J-1];D[G-J-1]=-L}};p.prototype.normalize13b=function(u,D){for(var G=0,J=0;J<D/2;J++)G=8192*Math.round(u[2*J+1]/D)+Math.round(u[2*J]/D)+G,u[J]=G&67108863,G=67108864>G?0:G/67108864|0;return u};p.prototype.convert13b=function(u,D,G,J){for(var L=0,K=0;K<D;K++)L+=u[K]|0,G[2*K]=L&8191,L>>>=13,G[2*K+1]=L&8191,L>>>=13;for(K=2*D;K<J;++K)G[K]=0;m(0===L);m(0===(L&-8192))};p.prototype.stub=function(u){for(var D=
Array(u),G=0;G<u;G++)D[G]=0;return D};p.prototype.mulp=function(u,D,G){var J=2*this.guessLen13b(u.length,D.length),L=this.makeRBT(J),K=this.stub(J),H=Array(J),Q=Array(J),M=Array(J),P=Array(J),T=Array(J),O=Array(J),U=G.words;U.length=J;this.convert13b(u.words,u.length,H,J);this.convert13b(D.words,D.length,P,J);this.transform(H,K,Q,M,J,L);this.transform(P,K,T,O,J,L);for(H=0;H<J;H++)P=Q[H]*T[H]-M[H]*O[H],M[H]=Q[H]*O[H]+M[H]*T[H],Q[H]=P;this.conjugate(Q,M,J);this.transform(Q,M,U,K,J,L);this.conjugate(U,
K,J);this.normalize13b(U,J);G.negative=u.negative^D.negative;G.length=u.length+D.length;return G.strip()};a.prototype.mul=function(u){var D=new a(null);D.words=Array(this.length+u.length);return this.mulTo(u,D)};a.prototype.mulf=function(u){var D=new a(null);D.words=Array(this.length+u.length);return(new p).mulp(this,u,D)};a.prototype.imul=function(u){return this.clone().mulTo(u,this)};a.prototype.imuln=function(u){m("number"===typeof u);m(67108864>u);for(var D=0,G=0;G<this.length;G++){var J=(this.words[G]|
0)*u,L=(J&67108863)+(D&67108863);D>>=26;D+=J/67108864|0;D+=L>>>26;this.words[G]=L&67108863}0!==D&&(this.words[G]=D,this.length++);return this};a.prototype.muln=function(u){return this.clone().imuln(u)};a.prototype.sqr=function(){return this.mul(this)};a.prototype.isqr=function(){return this.imul(this.clone())};a.prototype.pow=function(u){for(var D=Array(u.bitLength()),G=0;G<D.length;G++){var J=G%26;D[G]=(u.words[G/26|0]&1<<J)>>>J}if(0===D.length)return new a(1);u=this;for(G=0;G<D.length&&0===D[G];G++,
u=u.sqr());if(++G<D.length)for(J=u.sqr();G<D.length;G++,J=J.sqr())0!==D[G]&&(u=u.mul(J));return u};a.prototype.iushln=function(u){m("number"===typeof u&&0<=u);var D=u%26;u=(u-D)/26;var G=67108863>>>26-D<<26-D,J;if(0!==D){var L=0;for(J=0;J<this.length;J++){var K=this.words[J]&G;this.words[J]=(this.words[J]|0)-K<<D|L;L=K>>>26-D}L&&(this.words[J]=L,this.length++)}if(0!==u){for(J=this.length-1;0<=J;J--)this.words[J+u]=this.words[J];for(J=0;J<u;J++)this.words[J]=0;this.length+=u}return this.strip()};a.prototype.ishln=
function(u){m(0===this.negative);return this.iushln(u)};a.prototype.iushrn=function(u,D,G){m("number"===typeof u&&0<=u);var J=u%26,L=Math.min((u-J)/26,this.length);u=67108863^67108863>>>J<<J;D=Math.max(0,(D?(D-D%26)/26:0)-L);if(G){for(var K=0;K<L;K++)G.words[K]=this.words[K];G.length=L}if(0!==L)if(this.length>L)for(this.length-=L,K=0;K<this.length;K++)this.words[K]=this.words[K+L];else this.words[0]=0,this.length=1;L=0;for(K=this.length-1;0<=K&&(0!==L||K>=D);K--){var H=this.words[K]|0;this.words[K]=
L<<26-J|H>>>J;L=H&u}G&&0!==L&&(G.words[G.length++]=L);0===this.length&&(this.words[0]=0,this.length=1);return this.strip()};a.prototype.ishrn=function(u,D,G){m(0===this.negative);return this.iushrn(u,D,G)};a.prototype.shln=function(u){return this.clone().ishln(u)};a.prototype.ushln=function(u){return this.clone().iushln(u)};a.prototype.shrn=function(u){return this.clone().ishrn(u)};a.prototype.ushrn=function(u){return this.clone().iushrn(u)};a.prototype.testn=function(u){m("number"===typeof u&&0<=
u);var D=u%26;u=(u-D)/26;return this.length<=u?!1:!!(this.words[u]&1<<D)};a.prototype.imaskn=function(u){m("number"===typeof u&&0<=u);var D=u%26;u=(u-D)/26;m(0===this.negative,"imaskn works only with positive numbers");if(this.length<=u)return this;0!==D&&u++;this.length=Math.min(u,this.length);0!==D&&(this.words[this.length-1]&=67108863^67108863>>>D<<D);return this.strip()};a.prototype.maskn=function(u){return this.clone().imaskn(u)};a.prototype.iaddn=function(u){m("number"===typeof u);m(67108864>
u);if(0>u)return this.isubn(-u);if(0!==this.negative){if(1===this.length&&(this.words[0]|0)<u)return this.words[0]=u-(this.words[0]|0),this.negative=0,this;this.negative=0;this.isubn(u);this.negative=1;return this}return this._iaddn(u)};a.prototype._iaddn=function(u){this.words[0]+=u;for(u=0;u<this.length&&67108864<=this.words[u];u++)this.words[u]-=67108864,u===this.length-1?this.words[u+1]=1:this.words[u+1]++;this.length=Math.max(this.length,u+1);return this};a.prototype.isubn=function(u){m("number"===
typeof u);m(67108864>u);if(0>u)return this.iaddn(-u);if(0!==this.negative)return this.negative=0,this.iaddn(u),this.negative=1,this;this.words[0]-=u;if(1===this.length&&0>this.words[0])this.words[0]=-this.words[0],this.negative=1;else for(u=0;u<this.length&&0>this.words[u];u++)this.words[u]+=67108864,--this.words[u+1];return this.strip()};a.prototype.addn=function(u){return this.clone().iaddn(u)};a.prototype.subn=function(u){return this.clone().isubn(u)};a.prototype.iabs=function(){this.negative=
0;return this};a.prototype.abs=function(){return this.clone().iabs()};a.prototype._ishlnsubmul=function(u,D,G){var J;this._expand(u.length+G);var L=0;for(J=0;J<u.length;J++){var K=(this.words[J+G]|0)+L;L=(u.words[J]|0)*D;K-=L&67108863;L=(K>>26)-(L/67108864|0);this.words[J+G]=K&67108863}for(;J<this.length-G;J++)K=(this.words[J+G]|0)+L,L=K>>26,this.words[J+G]=K&67108863;if(0===L)return this.strip();m(-1===L);for(J=L=0;J<this.length;J++)K=-(this.words[J]|0)+L,L=K>>26,this.words[J]=K&67108863;this.negative=
1;return this.strip()};a.prototype._wordDiv=function(u,D){var G=this.clone(),J=u,L=J.words[J.length-1]|0;u=26-this._countBits(L);0!==u&&(J=J.ushln(u),G.iushln(u),L=J.words[J.length-1]|0);var K=G.length-J.length;if("mod"!==D){var H=new a(null);H.length=K+1;H.words=Array(H.length);for(var Q=0;Q<H.length;Q++)H.words[Q]=0}Q=G.clone()._ishlnsubmul(J,1,K);0===Q.negative&&(G=Q,H&&(H.words[K]=1));for(--K;0<=K;K--){Q=67108864*(G.words[J.length+K]|0)+(G.words[J.length+K-1]|0);Q=Math.min(Q/L|0,67108863);for(G._ishlnsubmul(J,
Q,K);0!==G.negative;)Q--,G.negative=0,G._ishlnsubmul(J,1,K),G.isZero()||(G.negative^=1);H&&(H.words[K]=Q)}H&&H.strip();G.strip();"div"!==D&&0!==u&&G.iushrn(u);return{div:H||null,mod:G}};a.prototype.divmod=function(u,D,G){m(!u.isZero());if(this.isZero())return{div:new a(0),mod:new a(0)};var J;if(0!==this.negative&&0===u.negative){var L=this.neg().divmod(u,D);"mod"!==D&&(J=L.div.neg());if("div"!==D){var K=L.mod.neg();G&&0!==K.negative&&K.iadd(u)}return{div:J,mod:K}}return 0===this.negative&&0!==u.negative?
(L=this.divmod(u.neg(),D),"mod"!==D&&(J=L.div.neg()),{div:J,mod:L.mod}):0!==(this.negative&u.negative)?(L=this.neg().divmod(u.neg(),D),"div"!==D&&(K=L.mod.neg(),G&&0!==K.negative&&K.isub(u)),{div:L.div,mod:K}):u.length>this.length||0>this.cmp(u)?{div:new a(0),mod:this}:1===u.length?"div"===D?{div:this.divn(u.words[0]),mod:null}:"mod"===D?{div:null,mod:new a(this.modn(u.words[0]))}:{div:this.divn(u.words[0]),mod:new a(this.modn(u.words[0]))}:this._wordDiv(u,D)};a.prototype.div=function(u){return this.divmod(u,
"div",!1).div};a.prototype.mod=function(u){return this.divmod(u,"mod",!1).mod};a.prototype.umod=function(u){return this.divmod(u,"mod",!0).mod};a.prototype.divRound=function(u){var D=this.divmod(u);if(D.mod.isZero())return D.div;var G=0!==D.div.negative?D.mod.isub(u):D.mod,J=u.ushrn(1);u=u.andln(1);G=G.cmp(J);return 0>G||1===u&&0===G?D.div:0!==D.div.negative?D.div.isubn(1):D.div.iaddn(1)};a.prototype.modn=function(u){m(67108863>=u);for(var D=67108864%u,G=0,J=this.length-1;0<=J;J--)G=(D*G+(this.words[J]|
0))%u;return G};a.prototype.idivn=function(u){m(67108863>=u);for(var D=0,G=this.length-1;0<=G;G--)D=(this.words[G]|0)+67108864*D,this.words[G]=D/u|0,D%=u;return this.strip()};a.prototype.divn=function(u){return this.clone().idivn(u)};a.prototype.egcd=function(u){m(0===u.negative);m(!u.isZero());var D=this,G=u.clone();D=0!==D.negative?D.umod(u):D.clone();u=new a(1);for(var J=new a(0),L=new a(0),K=new a(1),H=0;D.isEven()&&G.isEven();)D.iushrn(1),G.iushrn(1),++H;for(var Q=G.clone(),M=D.clone();!D.isZero();){for(var P=
0,T=1;0===(D.words[0]&T)&&26>P;++P,T<<=1);if(0<P)for(D.iushrn(P);0<P--;){if(u.isOdd()||J.isOdd())u.iadd(Q),J.isub(M);u.iushrn(1);J.iushrn(1)}P=0;for(T=1;0===(G.words[0]&T)&&26>P;++P,T<<=1);if(0<P)for(G.iushrn(P);0<P--;){if(L.isOdd()||K.isOdd())L.iadd(Q),K.isub(M);L.iushrn(1);K.iushrn(1)}0<=D.cmp(G)?(D.isub(G),u.isub(L),J.isub(K)):(G.isub(D),L.isub(u),K.isub(J))}return{a:L,b:K,gcd:G.iushln(H)}};a.prototype._invmp=function(u){m(0===u.negative);m(!u.isZero());var D=this,G=u.clone();D=0!==D.negative?
D.umod(u):D.clone();for(var J=new a(1),L=new a(0),K=G.clone();0<D.cmpn(1)&&0<G.cmpn(1);){for(var H=0,Q=1;0===(D.words[0]&Q)&&26>H;++H,Q<<=1);if(0<H)for(D.iushrn(H);0<H--;)J.isOdd()&&J.iadd(K),J.iushrn(1);H=0;for(Q=1;0===(G.words[0]&Q)&&26>H;++H,Q<<=1);if(0<H)for(G.iushrn(H);0<H--;)L.isOdd()&&L.iadd(K),L.iushrn(1);0<=D.cmp(G)?(D.isub(G),J.isub(L)):(G.isub(D),L.isub(J))}D=0===D.cmpn(1)?J:L;0>D.cmpn(0)&&D.iadd(u);return D};a.prototype.gcd=function(u){if(this.isZero())return u.abs();if(u.isZero())return this.abs();
var D=this.clone();u=u.clone();D.negative=0;for(var G=u.negative=0;D.isEven()&&u.isEven();G++)D.iushrn(1),u.iushrn(1);do{for(;D.isEven();)D.iushrn(1);for(;u.isEven();)u.iushrn(1);var J=D.cmp(u);if(0>J)J=D,D=u,u=J;else if(0===J||0===u.cmpn(1))break;D.isub(u)}while(1);return u.iushln(G)};a.prototype.invm=function(u){return this.egcd(u).a.umod(u)};a.prototype.isEven=function(){return 0===(this.words[0]&1)};a.prototype.isOdd=function(){return 1===(this.words[0]&1)};a.prototype.andln=function(u){return this.words[0]&
u};a.prototype.bincn=function(u){m("number"===typeof u);var D=u%26;u=(u-D)/26;D=1<<D;if(this.length<=u)return this._expand(u+1),this.words[u]|=D,this;for(;0!==D&&u<this.length;u++){var G=this.words[u]|0;G+=D;D=G>>>26;G&=67108863;this.words[u]=G}0!==D&&(this.words[u]=D,this.length++);return this};a.prototype.isZero=function(){return 1===this.length&&0===this.words[0]};a.prototype.cmpn=function(u){var D=0>u;if(0!==this.negative&&!D)return-1;if(0===this.negative&&D)return 1;this.strip();1<this.length?
u=1:(D&&(u=-u),m(67108863>=u,"Number is too big"),D=this.words[0]|0,u=D===u?0:D<u?-1:1);return 0!==this.negative?-u|0:u};a.prototype.cmp=function(u){if(0!==this.negative&&0===u.negative)return-1;if(0===this.negative&&0!==u.negative)return 1;u=this.ucmp(u);return 0!==this.negative?-u|0:u};a.prototype.ucmp=function(u){if(this.length>u.length)return 1;if(this.length<u.length)return-1;for(var D=0,G=this.length-1;0<=G;G--){var J=this.words[G]|0,L=u.words[G]|0;if(J!==L){J<L?D=-1:J>L&&(D=1);break}}return D};
a.prototype.gtn=function(u){return 1===this.cmpn(u)};a.prototype.gt=function(u){return 1===this.cmp(u)};a.prototype.gten=function(u){return 0<=this.cmpn(u)};a.prototype.gte=function(u){return 0<=this.cmp(u)};a.prototype.ltn=function(u){return-1===this.cmpn(u)};a.prototype.lt=function(u){return-1===this.cmp(u)};a.prototype.lten=function(u){return 0>=this.cmpn(u)};a.prototype.lte=function(u){return 0>=this.cmp(u)};a.prototype.eqn=function(u){return 0===this.cmpn(u)};a.prototype.eq=function(u){return 0===
this.cmp(u)};a.red=function(u){return new v(u)};a.prototype.toRed=function(u){m(!this.red,"Already a number in reduction context");m(0===this.negative,"red works only with positives");return u.convertTo(this)._forceRed(u)};a.prototype.fromRed=function(){m(this.red,"fromRed works only with numbers in reduction context");return this.red.convertFrom(this)};a.prototype._forceRed=function(u){this.red=u;return this};a.prototype.forceRed=function(u){m(!this.red,"Already a number in reduction context");return this._forceRed(u)};
a.prototype.redAdd=function(u){m(this.red,"redAdd works only with red numbers");return this.red.add(this,u)};a.prototype.redIAdd=function(u){m(this.red,"redIAdd works only with red numbers");return this.red.iadd(this,u)};a.prototype.redSub=function(u){m(this.red,"redSub works only with red numbers");return this.red.sub(this,u)};a.prototype.redISub=function(u){m(this.red,"redISub works only with red numbers");return this.red.isub(this,u)};a.prototype.redShl=function(u){m(this.red,"redShl works only with red numbers");
return this.red.shl(this,u)};a.prototype.redMul=function(u){m(this.red,"redMul works only with red numbers");this.red._verify2(this,u);return this.red.mul(this,u)};a.prototype.redIMul=function(u){m(this.red,"redMul works only with red numbers");this.red._verify2(this,u);return this.red.imul(this,u)};a.prototype.redSqr=function(){m(this.red,"redSqr works only with red numbers");this.red._verify1(this);return this.red.sqr(this)};a.prototype.redISqr=function(){m(this.red,"redISqr works only with red numbers");
this.red._verify1(this);return this.red.isqr(this)};a.prototype.redSqrt=function(){m(this.red,"redSqrt works only with red numbers");this.red._verify1(this);return this.red.sqrt(this)};a.prototype.redInvm=function(){m(this.red,"redInvm works only with red numbers");this.red._verify1(this);return this.red.invm(this)};a.prototype.redNeg=function(){m(this.red,"redNeg works only with red numbers");this.red._verify1(this);return this.red.neg(this)};a.prototype.redPow=function(u){m(this.red&&!u.red,"redPow(normalNum)");
this.red._verify1(this);return this.red.pow(this,u)};var C={k256:null,p224:null,p192:null,p25519:null};d.prototype._tmp=function(){var u=new a(null);u.words=Array(Math.ceil(this.n/13));return u};d.prototype.ireduce=function(u){do{this.split(u,this.tmp);u=this.imulK(u);u=u.iadd(this.tmp);var D=u.bitLength()}while(D>this.n);D=D<this.n?-1:u.ucmp(this.p);0===D?(u.words[0]=0,u.length=1):0<D?u.isub(this.p):u.strip();return u};d.prototype.split=function(u,D){u.iushrn(this.n,0,D)};d.prototype.imulK=function(u){return u.imul(this.k)};
l(e,d);e.prototype.split=function(u,D){for(var G=Math.min(u.length,9),J=0;J<G;J++)D.words[J]=u.words[J];D.length=G;if(9>=u.length)u.words[0]=0,u.length=1;else{G=u.words[9];D.words[D.length++]=G&4194303;for(J=10;J<u.length;J++)D=u.words[J]|0,u.words[J-10]=(D&4194303)<<4|G>>>22,G=D;G>>>=22;u.words[J-10]=G;u.length=0===G&&10<u.length?u.length-10:u.length-9}};e.prototype.imulK=function(u){u.words[u.length]=0;u.words[u.length+1]=0;u.length+=2;for(var D=0,G=0;G<u.length;G++){var J=u.words[G]|0;D+=977*J;
u.words[G]=D&67108863;D=64*J+(D/67108864|0)}0===u.words[u.length-1]&&(u.length--,0===u.words[u.length-1]&&u.length--);return u};l(f,d);l(k,d);l(t,d);t.prototype.imulK=function(u){for(var D=0,G=0;G<u.length;G++){D=19*(u.words[G]|0)+D;var J=D&67108863;D>>>=26;u.words[G]=J}0!==D&&(u.words[u.length++]=D);return u};a._prime=function(u){if(C[u])return C[u];if("k256"===u)var D=new e;else if("p224"===u)D=new f;else if("p192"===u)D=new k;else if("p25519"===u)D=new t;else throw Error("Unknown prime "+u);return C[u]=
D};v.prototype._verify1=function(u){m(0===u.negative,"red works only with positives");m(u.red,"red works only with red numbers")};v.prototype._verify2=function(u,D){m(0===(u.negative|D.negative),"red works only with positives");m(u.red&&u.red===D.red,"red works only with red numbers")};v.prototype.imod=function(u){return this.prime?this.prime.ireduce(u)._forceRed(this):u.umod(this.m)._forceRed(this)};v.prototype.neg=function(u){return u.isZero()?u.clone():this.m.sub(u)._forceRed(this)};v.prototype.add=
function(u,D){this._verify2(u,D);u=u.add(D);0<=u.cmp(this.m)&&u.isub(this.m);return u._forceRed(this)};v.prototype.iadd=function(u,D){this._verify2(u,D);u=u.iadd(D);0<=u.cmp(this.m)&&u.isub(this.m);return u};v.prototype.sub=function(u,D){this._verify2(u,D);u=u.sub(D);0>u.cmpn(0)&&u.iadd(this.m);return u._forceRed(this)};v.prototype.isub=function(u,D){this._verify2(u,D);u=u.isub(D);0>u.cmpn(0)&&u.iadd(this.m);return u};v.prototype.shl=function(u,D){this._verify1(u);return this.imod(u.ushln(D))};v.prototype.imul=
function(u,D){this._verify2(u,D);return this.imod(u.imul(D))};v.prototype.mul=function(u,D){this._verify2(u,D);return this.imod(u.mul(D))};v.prototype.isqr=function(u){return this.imul(u,u.clone())};v.prototype.sqr=function(u){return this.mul(u,u)};v.prototype.sqrt=function(u){if(u.isZero())return u.clone();var D=this.m.andln(3);m(1===D%2);if(3===D)return D=this.m.add(new a(1)).iushrn(2),this.pow(u,D);for(var G=this.m.subn(1),J=0;!G.isZero()&&0===G.andln(1);)J++,G.iushrn(1);m(!G.isZero());D=(new a(1)).toRed(this);
var L=D.redNeg(),K=this.m.subn(1).iushrn(1),H=this.m.bitLength();for(H=(new a(2*H*H)).toRed(this);0!==this.pow(H,K).cmp(L);)H.redIAdd(L);K=this.pow(H,G);L=this.pow(u,G.addn(1).iushrn(1));u=this.pow(u,G);for(G=J;0!==u.cmp(D);){H=u;for(J=0;0!==H.cmp(D);J++)H=H.redSqr();m(J<G);K=this.pow(K,(new a(1)).iushln(G-J-1));L=L.redMul(K);K=K.redSqr();u=u.redMul(K);G=J}return L};v.prototype.invm=function(u){u=u._invmp(this.m);return 0!==u.negative?(u.negative=0,this.imod(u).redNeg()):this.imod(u)};v.prototype.pow=
function(u,D){if(D.isZero())return(new a(1)).toRed(this);if(0===D.cmpn(1))return u.clone();var G=Array(16);G[0]=(new a(1)).toRed(this);G[1]=u;for(var J=2;J<G.length;J++)G[J]=this.mul(G[J-1],u);u=G[0];var L=0,K=0,H=D.bitLength()%26;0===H&&(H=26);for(J=D.length-1;0<=J;J--){var Q=D.words[J];for(--H;0<=H;H--){var M=Q>>H&1;u!==G[0]&&(u=this.sqr(u));if(0===M&&0===L)K=0;else if(L<<=1,L|=M,K++,4===K||0===J&&0===H)u=this.mul(u,G[L]),L=K=0}H=26}return u};v.prototype.convertTo=function(u){var D=u.umod(this.m);
return D===u?D.clone():D};v.prototype.convertFrom=function(u){u=u.clone();u.red=null;return u};a.mont=function(u){return new w(u)};l(w,v);w.prototype.convertTo=function(u){return this.imod(u.ushln(this.shift))};w.prototype.convertFrom=function(u){u=this.imod(u.mul(this.rinv));u.red=null;return u};w.prototype.imul=function(u,D){if(u.isZero()||D.isZero())return u.words[0]=0,u.length=1,u;u=u.imul(D);D=u.maskn(this.shift).mul(this.minv).imaskn(this.shift).mul(this.m);D=u=u.isub(D).iushrn(this.shift);
0<=u.cmp(this.m)?D=u.isub(this.m):0>u.cmpn(0)&&(D=u.iadd(this.m));return D._forceRed(this)};w.prototype.mul=function(u,D){if(u.isZero()||D.isZero())return(new a(0))._forceRed(this);u=u.mul(D);D=u.maskn(this.shift).mul(this.minv).imaskn(this.shift).mul(this.m);D=u=u.isub(D).iushrn(this.shift);0<=u.cmp(this.m)?D=u.isub(this.m):0>u.cmpn(0)&&(D=u.iadd(this.m));return D._forceRed(this)};w.prototype.invm=function(u){return this.imod(u._invmp(this.m).mul(this.r2))._forceRed(this)}})("undefined"===typeof N||
N,this)},{buffer:108}],100:[function(b,N,I){N.exports=function(r){var q,m,l,a=r.length;for(q=m=0;q<a;++q)m+=r[q].length;var h=Array(m),g=0;for(q=0;q<a;++q){var n=r[q],p=n.length;for(m=0;m<p;++m){var d=h[g++]=Array(p-1),e=0;for(l=0;l<p;++l)l!==m&&(d[e++]=n[l]);m&1&&(l=d[1],d[1]=d[0],d[0]=l)}}return h}},{}],101:[function(b,N,I){function r(n,p,d,e){for(var f=0,k=0,t=0,v=n.length;t<v;++t){var w=n[t],y;a:{for(y=0;y<p;++y)if(!(w[y]<=w[y+p])){y=!0;break a}y=!1}if(!y){for(y=0;y<2*p;++y)d[f++]=w[y];e[k++]=
t}}return k}function q(n,p,d,e){var f=n.length,k=p.length;if(!(0>=f||0>=k)){var t=n[0].length>>>1;if(!(0>=t)){var v=l.mallocDouble(2*t*f),w=l.mallocInt32(f);f=r(n,t,v,w);if(0<f){if(1===t&&e){a.init(f);var y=a.sweepComplete(t,d,0,f,v,w,0,f,v,w)}else{n=l.mallocDouble(2*t*k);var B=l.mallocInt32(k);k=r(p,t,n,B);0<k&&(a.init(f+k),y=1===t?a.sweepBipartite(t,d,0,f,v,w,0,k,n,B):h(t,d,e,f,v,w,k,n,B),l.free(n),l.free(B))}l.free(v);l.free(w)}return y}}}function m(n,p){g.push([n,p])}N.exports=function(n,p,d){switch(arguments.length){case 1:return g=
[],q(n,n,m,!0),g;case 2:if("function"===typeof p)return q(n,n,p,!0);g=[];q(n,p,m,!1);return g;case 3:return q(n,p,d,!1);default:throw Error("box-intersect: Invalid arguments");}};var l=b("typedarray-pool"),a=b("./lib/sweep"),h=b("./lib/intersect"),g},{"./lib/intersect":103,"./lib/sweep":107,"typedarray-pool":595}],102:[function(b,N,I){function r(m){function l(p,d){var e="bruteForce"+(p?"Red":"Blue")+(d?"Flip":"")+(m?"Full":""),f=["function ",e,"(",q.join(),"){","var ","es","\x3d2*","d",";"],k="for(var j\x3dbs,bp\x3des*bs;j\x3cbe;++j,bp+\x3des){var y0\x3dbb[ax+bp],"+
(m?"y1\x3dbb[ax+bp+d],":"")+"yi\x3dbi[j];";p?f.push("for(var i\x3drs,rp\x3des*rs;i\x3cre;++i,rp+\x3des){var x0\x3drb[ax+rp],x1\x3drb[ax+rp+d],xi\x3dri[i];","Q",":",k):f.push(k,"Q",":","for(var i\x3drs,rp\x3des*rs;i\x3cre;++i,rp+\x3des){var x0\x3drb[ax+rp],x1\x3drb[ax+rp+d],xi\x3dri[i];");m?f.push("if(y1\x3cx0||x1\x3cy0)continue;"):d?f.push("if(y0\x3c\x3dx0||x1\x3cy0)continue;"):f.push("if(y0\x3cx0||x1\x3cy0)continue;");f.push("for(var k\x3dax+1;k\x3cd;++k){var r0\x3drb[k+rp],r1\x3drb[k+d+rp],b0\x3dbb[k+bp],b1\x3dbb[k+d+bp];if(r1\x3cb0||b1\x3cr0)continue Q;}var rv\x3dvv(");
d?f.push("yi,xi"):f.push("xi,yi");f.push(");if(rv!\x3d\x3dvoid 0)return rv;}}}");p=f.join("");h.push(p);n.push("return "+e+"("+q.join()+");")}var a="bruteForce"+(m?"Full":"Partial"),h=[],g=q.slice();m||g.splice(3,0,"fp");var n=["function "+a+"("+g.join()+"){"];n.push("if(re-rs\x3ebe-bs){");m?(l(!0,!1),n.push("}else{"),l(!1,!1)):(n.push("if(fp){"),l(!0,!0),n.push("}else{"),l(!0,!1),n.push("}}else{if(fp){"),l(!1,!0),n.push("}else{"),l(!1,!1),n.push("}"));n.push("}}return "+a);a=h.join("")+n.join("");
return(new Function(a))()}var q="d ax vv rs re rb ri bs be bb bi".split(" ");I.partial=r(!1);I.full=r(!0)},{}],103:[function(b,N,I){function r(E,C,u,D,G,J,L,K,H){var Q=y*E;A[Q]=C;A[Q+1]=u;A[Q+2]=D;A[Q+3]=G;A[Q+4]=J;A[Q+5]=L;E*=B;z[E]=K;z[E+1]=H}N.exports=function(E,C,u,D,G,J,L,K,H){var Q=8*m.log2(D+L+1)*(E+1)|0,M=m.nextPow2(y*Q);A.length<M&&(q.free(A),A=q.mallocInt32(M));Q=m.nextPow2(B*Q);z.length<Q&&(q.free(z),z=q.mallocDouble(Q));Q=0;M=2*E;r(Q++,0,0,D,0,L,u?16:0,-Infinity,Infinity);for(u||r(Q++,
0,0,L,0,D,1,-Infinity,Infinity);0<Q;){--Q;u=Q*y;var P=A[u];L=A[u+1];var T=A[u+2],O=A[u+3],U=A[u+4];u=A[u+5];D=Q*B;var S=z[D],X=z[D+1],ba=u&1,ca=!!(u&16),ia=G,ja=J,la=K;D=H;ba&&(ia=K,ja=H,la=G,D=J);if(u&2&&(T=k(E,P,L,T,ia,ja,X),L>=T))continue;if(u&4&&(L=t(E,P,L,T,ia,ja,S),L>=T))continue;u=T-L;var da=U-O;if(ca){if(E*u*(u+da)<d){var oa=h.scanComplete(E,P,C,L,T,ia,ja,O,U,la,D);if(void 0!==oa)return oa;continue}}else if(E*Math.min(u,da)<n){oa=l(E,P,C,ba,L,T,ia,ja,O,U,la,D);if(void 0!==oa)return oa;continue}else if(E*
u*da<p){oa=h.scanBipartite(E,P,C,ba,L,T,ia,ja,O,U,la,D);if(void 0!==oa)return oa;continue}u=e(E,P,L,T,ia,ja,S,X);if(L<u)if(E*(u-L)<n){if(oa=a(E,P+1,C,L,u,ia,ja,O,U,la,D),void 0!==oa)return oa}else if(P===E-2){if(oa=ba?h.sweepBipartite(E,C,O,U,la,D,L,u,ia,ja):h.sweepBipartite(E,C,L,u,ia,ja,O,U,la,D),void 0!==oa)return oa}else r(Q++,P+1,L,u,O,U,ba,-Infinity,Infinity),r(Q++,P+1,O,U,L,u,ba^1,-Infinity,Infinity);if(u<T)if(L=g(E,P,O,U,la,D),oa=la[M*L+P],da=f(E,P,L,U,la,D,oa),da<U&&r(Q++,P,u,T,da,U,(ba|
4)+(ca?16:0),oa,X),O<L&&r(Q++,P,u,T,O,L,(ba|2)+(ca?16:0),S,oa),L+1===da){if(ca)a:{O=E;U=C;D=D[L];ba=2*O;L*=ba;S=la[L+P];X=u;u*=ba;b:for(;X<T;++X,u+=ba)if(ca=ja[X],ca!==D&&(da=ia[u+P],oa=ia[u+P+O],!(S<da||oa<S))){for(var sa=P+1;sa<O;++sa){da=ia[u+sa];oa=ia[u+sa+O];var ma=la[L+sa+O];if(oa<la[L+sa]||ma<da)continue b}ca=U(ca,D);if(void 0!==ca){oa=ca;break a}}oa=void 0}else a:{O=E;U=C;D=D[L];S=2*O;L*=S;X=la[L+P];ca=u;u*=S;b:for(;ca<T;++ca,u+=S)if(da=ia[u+P],oa=ia[u+P+O],!(X<da||oa<X||ba&&X===da)){sa=ja[ca];
for(ma=P+1;ma<O;++ma){da=ia[u+ma];oa=ia[u+ma+O];var qa=la[L+ma+O];if(oa<la[L+ma]||qa<da)continue b}da=ba?U(D,sa):U(sa,D);if(void 0!==da){oa=da;break a}}oa=void 0}if(void 0!==oa)return oa}else if(L<da)if(ca){if(T=v(E,P,u,T,ia,ja,oa),u<T)if(O=f(E,P,u,T,ia,ja,oa),P===E-2){if(u<O&&(oa=h.sweepComplete(E,C,u,O,ia,ja,L,da,la,D),void 0!==oa)||O<T&&(oa=h.sweepBipartite(E,C,O,T,ia,ja,L,da,la,D),void 0!==oa))return oa}else u<O&&r(Q++,P+1,u,O,L,da,16,-Infinity,Infinity),O<T&&(r(Q++,P+1,O,T,L,da,0,-Infinity,Infinity),
r(Q++,P+1,L,da,O,T,1,-Infinity,Infinity))}else T=ba?w(E,P,u,T,ia,ja,oa):v(E,P,u,T,ia,ja,oa),u<T&&(P===E-2?ba?h.sweepBipartite(E,C,L,da,la,D,u,T,ia,ja):h.sweepBipartite(E,C,u,T,ia,ja,L,da,la,D):(r(Q++,P+1,u,T,L,da,ba,-Infinity,Infinity),r(Q++,P+1,L,da,u,T,ba^1,-Infinity,Infinity)))}};var q=b("typedarray-pool"),m=b("bit-twiddle");N=b("./brute");var l=N.partial,a=N.full,h=b("./sweep"),g=b("./median");b=b("./partition");var n=128,p=4194304,d=4194304,e=b("!(lo\x3e\x3dp0)\x26\x26!(p1\x3e\x3dhi)",["p0",
"p1"]),f=b("lo\x3d\x3d\x3dp0",["p0"]),k=b("lo\x3cp0",["p0"]),t=b("hi\x3c\x3dp0",["p0"]),v=b("lo\x3c\x3dp0\x26\x26p0\x3c\x3dhi",["p0"]),w=b("lo\x3cp0\x26\x26p0\x3c\x3dhi",["p0"]),y=6,B=2,A=q.mallocInt32(1024),z=q.mallocDouble(1024)},{"./brute":102,"./median":104,"./partition":105,"./sweep":107,"bit-twiddle":97,"typedarray-pool":595}],104:[function(b,N,I){N.exports=function(m,l,a,h,g,n){if(h<=a+1)return a;var p=a,d=h;h=h+a>>>1;for(var e=2*m,f,k;p<d;){if(d-p<q){f=l;k=g;for(var t=n,v=2*m,w=v*(p+1)+f,
y=p+1;y<d;++y,w+=v)for(var B=k[w],A=y,z=v*(y-1);A>p&&k[z+f]>B;--A,z-=v){for(var E=z,C=z+v,u=0;u<v;++u,++E,++C){var D=k[E];k[E]=k[C];k[C]=D}E=t[A];t[A]=t[A-1];t[A-1]=E}break}w=d-p;f=Math.random()*w+p|0;k=g[e*f+l];v=Math.random()*w+p|0;t=g[e*v+l];y=Math.random()*w+p|0;w=g[e*y+l];k<=t?w>=t?(f=v,k=t):k>=w||(f=y,k=w):t>=w?(f=v,k=t):w>=k||(f=y,k=w);t=e*(d-1);v=e*f;for(w=0;w<e;++w,++t,++v)y=g[t],g[t]=g[v],g[v]=y;t=n[d-1];n[d-1]=n[f];n[f]=t;f=r(m,l,p,d-1,g,n,k);t=e*(d-1);v=e*f;for(w=0;w<e;++w,++t,++v)y=g[t],
g[t]=g[v],g[v]=y;t=n[d-1];n[d-1]=n[f];n[f]=t;if(h<f){for(d=f-1;p<d&&g[e*(d-1)+l]===k;)--d;d+=1}else if(f<h)for(p=f+1;p<d&&g[e*p+l]===k;)p+=1;else break}return r(m,l,a,h,g,n,g[e*h+l])};var r=b("./partition")("lo\x3cp0",["p0"]),q=8},{"./partition":105}],105:[function(b,N,I){N.exports=function(q,m){m="abcdef".split("").concat(m);var l=[];0<=q.indexOf("lo")&&l.push("lo\x3de[k+n]");0<=q.indexOf("hi")&&l.push("hi\x3de[k+o]");m.push(r.replace("_",l.join()).replace("$",q));return Function.apply(void 0,m)};
var r="for(var j\x3d2*a,k\x3dj*c,l\x3dk,m\x3dc,n\x3db,o\x3da+b,p\x3dc;d\x3ep;++p,k+\x3dj){var _;if($)if(m\x3d\x3d\x3dp)m+\x3d1,l+\x3dj;else{for(var s\x3d0;j\x3es;++s){var t\x3de[k+s];e[k+s]\x3de[l],e[l++]\x3dt}var u\x3df[p];f[p]\x3df[m],f[m++]\x3du}}return m"},{}],106:[function(b,N,I){function r(p,d,e){for(var f=2*(p+1),k=p+1;k<=d;++k){for(var t=e[f++],v=e[f++],w=k,y=f-2;w-- >p;){var B=e[y-2],A=e[y-1];if(B<t)break;else if(B===t&&A<v)break;e[y]=B;e[y+1]=A;y-=2}e[y]=t;e[y+1]=v}}function q(p,d,e){p*=
2;d*=2;var f=e[p],k=e[p+1];e[p]=e[d];e[p+1]=e[d+1];e[d]=f;e[d+1]=k}function m(p,d,e){p*=2;d*=2;e[p]=e[d];e[p+1]=e[d+1]}function l(p,d,e,f,k){p*=2;d*=2;k[p]=k[d];k[d]=e;k[p+1]=k[d+1];k[d+1]=f}function a(p,d,e){p*=2;d*=2;var f=e[p],k=e[d];return f<k?!1:f===k?e[p+1]>e[d+1]:!0}function h(p,d,e,f){p*=2;var k=f[p];return k<d?!0:k===d?f[p+1]<e:!1}function g(p,d,e){var f=(d-p+1)/6|0,k=p+f,t=d-f,v=p+d>>1,w=v-f,y=v+f,B=k,A=w,z=v,E=y,C=t;f=p+1;var u=d-1;if(a(B,A,e)){var D=B;B=A;A=D}a(E,C,e)&&(D=E,E=C,C=D);a(B,
z,e)&&(D=B,B=z,z=D);a(A,z,e)&&(D=A,A=z,z=D);a(B,E,e)&&(D=B,B=E,E=D);a(z,E,e)&&(D=z,z=E,E=D);a(A,C,e)&&(D=A,A=C,C=D);a(A,z,e)&&(D=A,A=z,z=D);a(E,C,e)&&(D=E,E=C,C=D);D=e[2*A];A=e[2*A+1];var G=e[2*E];E=e[2*E+1];B*=2;z*=2;C*=2;k*=2;v*=2;t*=2;for(var J=0;2>J;++J){var L=e[z+J],K=e[C+J];e[k+J]=e[B+J];e[v+J]=L;e[t+J]=K}m(w,p,e);m(y,d,e);for(w=f;w<=u;++w)if(h(w,D,A,e))w!==f&&q(w,f,e),++f;else if(!h(w,G,E,e))for(;;)if(h(u,G,E,e)){h(u,D,A,e)?(y=w,t=f,v=u,B=e,y*=2,t*=2,v*=2,k=B[y],z=B[y+1],B[y]=B[t],B[y+1]=B[t+
1],B[t]=B[v],B[t+1]=B[v+1],B[v]=k,B[v+1]=z,++f):q(w,u,e);--u;break}else if(--u<w)break;l(p,f-1,D,A,e);l(d,u+1,G,E,e);f-2-p<=n?r(p,f-2,e):g(p,f-2,e);d-(u+2)<=n?r(u+2,d,e):g(u+2,d,e);u-f<=n?r(f,u,e):g(f,u,e)}N.exports=function(p,d){d<=4*n?r(0,d-1,p):g(0,d-1,p)};var n=32},{}],107:[function(b,N,I){function r(k,t,v,w){w=t[w];v=k[v-1];k[w]=v;t[v]=w}N.exports={init:function(k){k=m.nextPow2(k);h.length<k&&(q.free(h),h=q.mallocInt32(k));g.length<k&&(q.free(g),g=q.mallocInt32(k));n.length<k&&(q.free(n),n=q.mallocInt32(k));
p.length<k&&(q.free(p),p=q.mallocInt32(k));d.length<k&&(q.free(d),d=q.mallocInt32(k));e.length<k&&(q.free(e),e=q.mallocInt32(k));k*=8;f.length<k&&(q.free(f),f=q.mallocDouble(k))},sweepBipartite:function(k,t,v,w,y,B,A,z,E,C){var u=0,D=2*k;--k;for(var G=D-1;v<w;++v){var J=B[v],L=D*v;f[u++]=y[L+k];f[u++]=-(J+1);f[u++]=y[L+G];f[u++]=J}for(v=A;v<z;++v)J=C[v]+a,w=D*v,f[u++]=E[w+k],f[u++]=-J,f[u++]=E[w+G],f[u++]=J;z=u>>>1;l(f,z);for(v=C=E=0;v<z;++v)if(u=f[2*v+1]|0,u>=a)u=u-a|0,r(n,p,C--,u);else if(0<=u)r(h,
g,E--,u);else if(u<=-a){u=-u-a|0;for(D=0;D<E;++D)if(w=t(h[D],u),void 0!==w)return w;D=p;w=C++;n[w]=u;D[u]=w}else{u=-u-1|0;for(D=0;D<C;++D)if(w=t(u,n[D]),void 0!==w)return w;D=g;w=E++;h[w]=u;D[u]=w}},sweepComplete:function(k,t,v,w,y,B,A,z,E,C){var u=0,D=2*k;--k;for(var G=D-1;v<w;++v){var J=B[v]+1<<1,L=D*v;f[u++]=y[L+k];f[u++]=-J;f[u++]=y[L+G];f[u++]=J}for(v=A;v<z;++v)J=C[v]+1<<1,w=D*v,f[u++]=E[w+k],f[u++]=-J|1,f[u++]=E[w+G],f[u++]=J|1;z=u>>>1;l(f,z);for(v=u=C=E=0;v<z;++v)if(D=f[2*v+1]|0,w=D&1,v<z-
1&&D>>1===f[2*v+3]>>1&&(w=2,v+=1),0>D){D=-(D>>1)-1;for(y=0;y<u;++y)if(B=t(d[y],D),void 0!==B)return B;if(0!==w)for(y=0;y<E;++y)if(B=t(h[y],D),void 0!==B)return B;if(1!==w)for(y=0;y<C;++y)if(B=t(n[y],D),void 0!==B)return B;0===w?(w=g,y=E++,h[y]=D,w[D]=y):1===w?(w=p,y=C++,n[y]=D,w[D]=y):2===w&&(w=e,y=u++,d[y]=D,w[D]=y)}else D=(D>>1)-1,0===w?r(h,g,E--,D):1===w?r(n,p,C--,D):2===w&&r(d,e,u--,D)},scanBipartite:function(k,t,v,w,y,B,A,z,E,C,u,D){var G=0,J=2*k,L=t+k,K=1,H=1;for(w?H=a:K=a;y<B;++y){var Q=y+
K,M=J*y;f[G++]=A[M+t];f[G++]=-Q;f[G++]=A[M+L];f[G++]=Q}for(y=E;y<C;++y)Q=y+H,B=J*y,f[G++]=u[B+t],f[G++]=-Q;C=G>>>1;l(f,C);for(y=G=0;y<C;++y)if(Q=f[2*y+1]|0,0>Q)if(Q=-Q,Q>=a?(H=!w,Q-=a):(H=!!w,--Q),H)H=g,B=G++,h[B]=Q,H[Q]=B;else a:for(H=D[Q],Q*=J,B=u[Q+t+1],E=u[Q+t+1+k],L=0;L<G;++L){M=h[L];var P=J*M;if(!(E<A[P+t+1]||A[P+t+1+k]<B)){for(var T=t+2;T<k;++T)if(u[Q+T+k]<A[P+T]||A[P+T+k]<u[Q+T])continue a;M=z[M];M=w?v(H,M):v(M,H);if(void 0!==M)return M}}else r(h,g,G--,Q-K)},scanComplete:function(k,t,v,w,
y,B,A,z,E,C,u){for(var D=0,G=2*k,J=t+k;w<y;++w){var L=w+a,K=G*w;f[D++]=B[K+t];f[D++]=-L;f[D++]=B[K+J];f[D++]=L}for(w=z;w<E;++w)L=w+1,y=G*w,f[D++]=C[y+t],f[D++]=-L;E=D>>>1;l(f,E);for(w=D=0;w<E;++w)if(y=f[2*w+1]|0,0>y)if(L=-y,L>=a)h[D++]=L-a;else a:for(--L,y=u[L],L*=G,J=C[L+t+1],K=C[L+t+1+k],z=0;z<D;++z){var H=h[z],Q=A[H];if(Q===y)break;H*=G;if(!(K<B[H+t+1]||B[H+t+1+k]<J)){for(var M=t+2;M<k;++M)if(C[L+M+k]<B[H+M]||B[H+M+k]<C[L+M])continue a;Q=v(Q,y);if(void 0!==Q)return Q}}else{L=y-a;for(z=D-1;0<=z;--z)if(h[z]===
L){for(M=z+1;M<D;++M)h[M-1]=h[M];break}--D}}};var q=b("typedarray-pool"),m=b("bit-twiddle"),l=b("./sort"),a=268435456,h=q.mallocInt32(1024),g=q.mallocInt32(1024),n=q.mallocInt32(1024),p=q.mallocInt32(1024),d=q.mallocInt32(1024),e=q.mallocInt32(1024),f=q.mallocDouble(8192)},{"./sort":106,"bit-twiddle":97,"typedarray-pool":595}],108:[function(b,N,I){},{}],109:[function(b,N,I){arguments[4][108][0].apply(I,arguments)},{dup:108}],110:[function(b,N,I){function r(){r.init.call(this)}function q(k){if("function"!==
typeof k)throw new TypeError('The "listener" argument must be of type Function. Received type '+typeof k);}function m(k,t,v,w){q(v);var y=k._events;if(void 0===y)y=k._events=Object.create(null),k._eventsCount=0;else{void 0!==y.newListener&&(k.emit("newListener",t,v.listener?v.listener:v),y=k._events);var B=y[t]}void 0===B?(y[t]=v,++k._eventsCount):("function"===typeof B?B=y[t]=w?[v,B]:[B,v]:w?B.unshift(v):B.push(v),v=void 0===k._maxListeners?r.defaultMaxListeners:k._maxListeners,0<v&&B.length>v&&
!B.warned&&(B.warned=!0,v=Error("Possible EventEmitter memory leak detected. "+B.length+" "+String(t)+" listeners added. Use emitter.setMaxListeners() to increase limit"),v.name="MaxListenersExceededWarning",v.emitter=k,v.type=t,v.count=B.length,console&&console.warn&&console.warn(v)));return k}function l(){if(!this.fired)return this.target.removeListener(this.type,this.wrapFn),this.fired=!0,0===arguments.length?this.listener.call(this.target):this.listener.apply(this.target,arguments)}function a(k,
t,v){k={fired:!1,wrapFn:void 0,target:k,type:t,listener:v};t=l.bind(k);t.listener=v;return k.wrapFn=t}function h(k,t,v){k=k._events;if(void 0===k)return[];t=k[t];if(void 0===t)return[];if("function"===typeof t)return v?[t.listener||t]:[t];if(v)for(v=Array(t.length),k=0;k<v.length;++k)v[k]=t[k].listener||t[k];else v=n(t,t.length);return v}function g(k){var t=this._events;if(void 0!==t){k=t[k];if("function"===typeof k)return 1;if(void 0!==k)return k.length}return 0}function n(k,t){for(var v=Array(t),
w=0;w<t;++w)v[w]=k[w];return v}var p=(b="object"===typeof Reflect?Reflect:null)&&"function"===typeof b.apply?b.apply:function(k,t,v){return Function.prototype.apply.call(k,t,v)};var d=b&&"function"===typeof b.ownKeys?b.ownKeys:Object.getOwnPropertySymbols?function(k){return Object.getOwnPropertyNames(k).concat(Object.getOwnPropertySymbols(k))}:function(k){return Object.getOwnPropertyNames(k)};var e=Number.isNaN||function(k){return k!==k};N.exports=r;N.exports.once=function(k,t){return new Promise(function(v,
w){function y(){void 0!==B&&k.removeListener("error",B);v([].slice.call(arguments))}if("error"!==t){var B=function(A){k.removeListener(t,y);w(A)};k.once("error",B)}k.once(t,y)})};r.EventEmitter=r;r.prototype._events=void 0;r.prototype._eventsCount=0;r.prototype._maxListeners=void 0;var f=10;Object.defineProperty(r,"defaultMaxListeners",{enumerable:!0,get:function(){return f},set:function(k){if("number"!==typeof k||0>k||e(k))throw new RangeError('The value of "defaultMaxListeners" is out of range. It must be a non-negative number. Received '+
k+".");f=k}});r.init=function(){if(void 0===this._events||this._events===Object.getPrototypeOf(this)._events)this._events=Object.create(null),this._eventsCount=0;this._maxListeners=this._maxListeners||void 0};r.prototype.setMaxListeners=function(k){if("number"!==typeof k||0>k||e(k))throw new RangeError('The value of "n" is out of range. It must be a non-negative number. Received '+k+".");this._maxListeners=k;return this};r.prototype.getMaxListeners=function(){return void 0===this._maxListeners?r.defaultMaxListeners:
this._maxListeners};r.prototype.emit=function(k){for(var t=[],v=1;v<arguments.length;v++)t.push(arguments[v]);v="error"===k;var w=this._events;if(void 0!==w)v=v&&void 0===w.error;else if(!v)return!1;if(v){var y;0<t.length&&(y=t[0]);if(y instanceof Error)throw y;t=Error("Unhandled error."+(y?" ("+y.message+")":""));t.context=y;throw t;}v=w[k];if(void 0===v)return!1;if("function"===typeof v)p(v,this,t);else for(y=v.length,w=n(v,y),v=0;v<y;++v)p(w[v],this,t);return!0};r.prototype.addListener=function(k,
t){return m(this,k,t,!1)};r.prototype.on=r.prototype.addListener;r.prototype.prependListener=function(k,t){return m(this,k,t,!0)};r.prototype.once=function(k,t){q(t);this.on(k,a(this,k,t));return this};r.prototype.prependOnceListener=function(k,t){q(t);this.prependListener(k,a(this,k,t));return this};r.prototype.removeListener=function(k,t){var v;q(t);var w=this._events;if(void 0===w)return this;var y=w[k];if(void 0===y)return this;if(y===t||y.listener===t)0===--this._eventsCount?this._events=Object.create(null):
(delete w[k],w.removeListener&&this.emit("removeListener",k,y.listener||t));else if("function"!==typeof y){var B=-1;for(v=y.length-1;0<=v;v--)if(y[v]===t||y[v].listener===t){var A=y[v].listener;B=v;break}if(0>B)return this;if(0===B)y.shift();else{for(;B+1<y.length;B++)y[B]=y[B+1];y.pop()}1===y.length&&(w[k]=y[0]);void 0!==w.removeListener&&this.emit("removeListener",k,A||t)}return this};r.prototype.off=r.prototype.removeListener;r.prototype.removeAllListeners=function(k){var t=this._events;if(void 0===
t)return this;if(void 0===t.removeListener)return 0===arguments.length?(this._events=Object.create(null),this._eventsCount=0):void 0!==t[k]&&(0===--this._eventsCount?this._events=Object.create(null):delete t[k]),this;if(0===arguments.length){var v=Object.keys(t);for(t=0;t<v.length;++t){var w=v[t];"removeListener"!==w&&this.removeAllListeners(w)}this.removeAllListeners("removeListener");this._events=Object.create(null);this._eventsCount=0;return this}v=t[k];if("function"===typeof v)this.removeListener(k,
v);else if(void 0!==v)for(t=v.length-1;0<=t;t--)this.removeListener(k,v[t]);return this};r.prototype.listeners=function(k){return h(this,k,!0)};r.prototype.rawListeners=function(k){return h(this,k,!1)};r.listenerCount=function(k,t){return"function"===typeof k.listenerCount?k.listenerCount(t):g.call(k,t)};r.prototype.listenerCount=g;r.prototype.eventNames=function(){return 0<this._eventsCount?d(this._events):[]}},{}],111:[function(b,N,I){(function(r){(function(){function q(M){if(M>K)throw new RangeError('The value "'+
M+'" is invalid for option "size"');M=new Uint8Array(M);M.__proto__=m.prototype;return M}function m(M,P,T){if("number"===typeof M){if("string"===typeof P)throw new TypeError('The "string" argument must be of type string. Received type number');return h(M)}return l(M,P,T)}function l(M,P,T){if("string"===typeof M){var O=P;if("string"!==typeof O||""===O)O="utf8";if(!m.isEncoding(O))throw new TypeError("Unknown encoding: "+O);P=d(M,O)|0;T=q(P);M=T.write(M,O);M!==P&&(T=T.slice(0,M));return T}if(ArrayBuffer.isView(M))return g(M);
if(null==M)throw TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+typeof M);if(G(M,ArrayBuffer)||M&&G(M.buffer,ArrayBuffer)){if(0>P||M.byteLength<P)throw new RangeError('"offset" is outside of buffer bounds');if(M.byteLength<P+(T||0))throw new RangeError('"length" is outside of buffer bounds');M=void 0===P&&void 0===T?new Uint8Array(M):void 0===T?new Uint8Array(M,P):new Uint8Array(M,P,T);M.__proto__=m.prototype;return M}if("number"===
typeof M)throw new TypeError('The "value" argument must not be of type number. Received type number');O=M.valueOf&&M.valueOf();if(null!=O&&O!==M)return m.from(O,P,T);if(O=n(M))return O;if("undefined"!==typeof Symbol&&null!=Symbol.toPrimitive&&"function"===typeof M[Symbol.toPrimitive])return m.from(M[Symbol.toPrimitive]("string"),P,T);throw new TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+typeof M);}function a(M){if("number"!==
typeof M)throw new TypeError('"size" argument must be of type number');if(0>M)throw new RangeError('The value "'+M+'" is invalid for option "size"');}function h(M){a(M);return q(0>M?0:p(M)|0)}function g(M){for(var P=0>M.length?0:p(M.length)|0,T=q(P),O=0;O<P;O+=1)T[O]=M[O]&255;return T}function n(M){if(m.isBuffer(M)){var P=p(M.length)|0,T=q(P);if(0===T.length)return T;M.copy(T,0,0,P);return T}if(void 0!==M.length)return(P="number"!==typeof M.length)||(P=M.length,P=P!==P),P?q(0):g(M);if("Buffer"===
M.type&&Array.isArray(M.data))return g(M.data)}function p(M){if(M>=K)throw new RangeError("Attempt to allocate Buffer larger than maximum size: 0x"+K.toString(16)+" bytes");return M|0}function d(M,P){if(m.isBuffer(M))return M.length;if(ArrayBuffer.isView(M)||G(M,ArrayBuffer))return M.byteLength;if("string"!==typeof M)throw new TypeError('The "string" argument must be one of type string, Buffer, or ArrayBuffer. Received type '+typeof M);var T=M.length,O=2<arguments.length&&!0===arguments[2];if(!O&&
0===T)return 0;for(var U=!1;;)switch(P){case "ascii":case "latin1":case "binary":return T;case "utf8":case "utf-8":return E(M).length;case "ucs2":case "ucs-2":case "utf16le":case "utf-16le":return 2*T;case "hex":return T>>>1;case "base64":return u(M).length;default:if(U)return O?-1:E(M).length;P=(""+P).toLowerCase();U=!0}}function e(M,P,T){var O=!1;if(void 0===P||0>P)P=0;if(P>this.length)return"";if(void 0===T||T>this.length)T=this.length;if(0>=T)return"";T>>>=0;P>>>=0;if(T<=P)return"";for(M||(M=
"utf8");;)switch(M){case "hex":M=P;P=T;T=this.length;if(!M||0>M)M=0;if(!P||0>P||P>T)P=T;O="";for(T=M;T<P;++T)M=O,O=this[T],O=16>O?"0"+O.toString(16):O.toString(16),O=M+O;return O;case "utf8":case "utf-8":return v(this,P,T);case "ascii":M="";for(T=Math.min(this.length,T);P<T;++P)M+=String.fromCharCode(this[P]&127);return M;case "latin1":case "binary":M="";for(T=Math.min(this.length,T);P<T;++P)M+=String.fromCharCode(this[P]);return M;case "base64":return P=0===P&&T===this.length?J.fromByteArray(this):
J.fromByteArray(this.slice(P,T)),P;case "ucs2":case "ucs-2":case "utf16le":case "utf-16le":P=this.slice(P,T);T="";for(M=0;M<P.length;M+=2)T+=String.fromCharCode(P[M]+256*P[M+1]);return T;default:if(O)throw new TypeError("Unknown encoding: "+M);M=(M+"").toLowerCase();O=!0}}function f(M,P,T){var O=M[P];M[P]=M[T];M[T]=O}function k(M,P,T,O,U){if(0===M.length)return-1;"string"===typeof T?(O=T,T=0):2147483647<T?T=2147483647:-2147483648>T&&(T=-2147483648);T=+T;T!==T&&(T=U?0:M.length-1);0>T&&(T=M.length+
T);if(T>=M.length){if(U)return-1;T=M.length-1}else if(0>T)if(U)T=0;else return-1;"string"===typeof P&&(P=m.from(P,O));if(m.isBuffer(P))return 0===P.length?-1:t(M,P,T,O,U);if("number"===typeof P)return P&=255,"function"===typeof Uint8Array.prototype.indexOf?U?Uint8Array.prototype.indexOf.call(M,P,T):Uint8Array.prototype.lastIndexOf.call(M,P,T):t(M,[P],T,O,U);throw new TypeError("val must be string, number or Buffer");}function t(M,P,T,O,U){function S(ia,ja){return 1===X?ia[ja]:ia.readUInt16BE(ja*X)}
var X=1,ba=M.length,ca=P.length;if(void 0!==O&&(O=String(O).toLowerCase(),"ucs2"===O||"ucs-2"===O||"utf16le"===O||"utf-16le"===O)){if(2>M.length||2>P.length)return-1;X=2;ba/=2;ca/=2;T/=2}if(U)for(O=-1;T<ba;T++)if(S(M,T)===S(P,-1===O?0:T-O)){if(-1===O&&(O=T),T-O+1===ca)return O*X}else-1!==O&&(T-=T-O),O=-1;else for(T+ca>ba&&(T=ba-ca);0<=T;T--){ba=!0;for(O=0;O<ca;O++)if(S(M,T+O)!==S(P,O)){ba=!1;break}if(ba)return T}return-1}function v(M,P,T){T=Math.min(M.length,T);for(var O=[];P<T;){var U=M[P],S=null,
X=239<U?4:223<U?3:191<U?2:1;if(P+X<=T)switch(X){case 1:128>U&&(S=U);break;case 2:var ba=M[P+1];128===(ba&192)&&(U=(U&31)<<6|ba&63,127<U&&(S=U));break;case 3:ba=M[P+1];var ca=M[P+2];128===(ba&192)&&128===(ca&192)&&(U=(U&15)<<12|(ba&63)<<6|ca&63,2047<U&&(55296>U||57343<U)&&(S=U));break;case 4:ba=M[P+1];ca=M[P+2];var ia=M[P+3];128===(ba&192)&&128===(ca&192)&&128===(ia&192)&&(U=(U&15)<<18|(ba&63)<<12|(ca&63)<<6|ia&63,65535<U&&1114112>U&&(S=U))}null===S?(S=65533,X=1):65535<S&&(S-=65536,O.push(S>>>10&1023|
55296),S=56320|S&1023);O.push(S);P+=X}M=O.length;if(M<=H)O=String.fromCharCode.apply(String,O);else{T="";for(P=0;P<M;)T+=String.fromCharCode.apply(String,O.slice(P,P+=H));O=T}return O}function w(M,P,T){if(0!==M%1||0>M)throw new RangeError("offset is not uint");if(M+P>T)throw new RangeError("Trying to access beyond buffer length");}function y(M,P,T,O,U,S){if(!m.isBuffer(M))throw new TypeError('"buffer" argument must be a Buffer instance');if(P>U||P<S)throw new RangeError('"value" argument is out of bounds');
if(T+O>M.length)throw new RangeError("Index out of range");}function B(M,P,T,O,U,S){if(T+O>M.length)throw new RangeError("Index out of range");if(0>T)throw new RangeError("Index out of range");}function A(M,P,T,O,U){P=+P;T>>>=0;U||B(M,P,T,4,3.4028234663852886E38,-3.4028234663852886E38);L.write(M,P,T,O,23,4);return T+4}function z(M,P,T,O,U){P=+P;T>>>=0;U||B(M,P,T,8,1.7976931348623157E308,-1.7976931348623157E308);L.write(M,P,T,O,52,8);return T+8}function E(M,P){P=P||Infinity;for(var T,O=M.length,U=
null,S=[],X=0;X<O;++X){T=M.charCodeAt(X);if(55295<T&&57344>T){if(!U){if(56319<T){-1<(P-=3)&&S.push(239,191,189);continue}else if(X+1===O){-1<(P-=3)&&S.push(239,191,189);continue}U=T;continue}if(56320>T){-1<(P-=3)&&S.push(239,191,189);U=T;continue}T=(U-55296<<10|T-56320)+65536}else U&&-1<(P-=3)&&S.push(239,191,189);U=null;if(128>T){if(0>--P)break;S.push(T)}else if(2048>T){if(0>(P-=2))break;S.push(T>>6|192,T&63|128)}else if(65536>T){if(0>(P-=3))break;S.push(T>>12|224,T>>6&63|128,T&63|128)}else if(1114112>
T){if(0>(P-=4))break;S.push(T>>18|240,T>>12&63|128,T>>6&63|128,T&63|128)}else throw Error("Invalid code point");}return S}function C(M){for(var P=[],T=0;T<M.length;++T)P.push(M.charCodeAt(T)&255);return P}function u(M){var P=J,T=P.toByteArray;M=M.split("\x3d")[0];M=M.trim().replace(Q,"");if(2>M.length)M="";else for(;0!==M.length%4;)M+="\x3d";return T.call(P,M)}function D(M,P,T,O){for(var U=0;U<O&&!(U+T>=P.length||U>=M.length);++U)P[U+T]=M[U];return U}function G(M,P){return M instanceof P||null!=M&&
null!=M.constructor&&null!=M.constructor.name&&M.constructor.name===P.name}var J=b("base64-js"),L=b("ieee754");I.Buffer=m;I.SlowBuffer=function(M){+M!=M&&(M=0);return m.alloc(+M)};I.INSPECT_MAX_BYTES=50;var K=2147483647;I.kMaxLength=K;m.TYPED_ARRAY_SUPPORT=function(){try{var M=new Uint8Array(1);M.__proto__={__proto__:Uint8Array.prototype,foo:function(){return 42}};return 42===M.foo()}catch(P){return!1}}();m.TYPED_ARRAY_SUPPORT||"undefined"===typeof console||"function"!==typeof console.error||console.error("This browser lacks typed array (Uint8Array) support which is required by `buffer` v5.x. Use `buffer` v4.x if you require old browser support.");
Object.defineProperty(m.prototype,"parent",{enumerable:!0,get:function(){if(m.isBuffer(this))return this.buffer}});Object.defineProperty(m.prototype,"offset",{enumerable:!0,get:function(){if(m.isBuffer(this))return this.byteOffset}});"undefined"!==typeof Symbol&&null!=Symbol.species&&m[Symbol.species]===m&&Object.defineProperty(m,Symbol.species,{value:null,configurable:!0,enumerable:!1,writable:!1});m.poolSize=8192;m.from=function(M,P,T){return l(M,P,T)};m.prototype.__proto__=Uint8Array.prototype;
m.__proto__=Uint8Array;m.alloc=function(M,P,T){a(M);M=0>=M?q(M):void 0!==P?"string"===typeof T?q(M).fill(P,T):q(M).fill(P):q(M);return M};m.allocUnsafe=function(M){return h(M)};m.allocUnsafeSlow=function(M){return h(M)};m.isBuffer=function(M){return null!=M&&!0===M._isBuffer&&M!==m.prototype};m.compare=function(M,P){G(M,Uint8Array)&&(M=m.from(M,M.offset,M.byteLength));G(P,Uint8Array)&&(P=m.from(P,P.offset,P.byteLength));if(!m.isBuffer(M)||!m.isBuffer(P))throw new TypeError('The "buf1", "buf2" arguments must be one of type Buffer or Uint8Array');
if(M===P)return 0;for(var T=M.length,O=P.length,U=0,S=Math.min(T,O);U<S;++U)if(M[U]!==P[U]){T=M[U];O=P[U];break}return T<O?-1:O<T?1:0};m.isEncoding=function(M){switch(String(M).toLowerCase()){case "hex":case "utf8":case "utf-8":case "ascii":case "latin1":case "binary":case "base64":case "ucs2":case "ucs-2":case "utf16le":case "utf-16le":return!0;default:return!1}};m.concat=function(M,P){if(!Array.isArray(M))throw new TypeError('"list" argument must be an Array of Buffers');if(0===M.length)return m.alloc(0);
var T;if(void 0===P)for(T=P=0;T<M.length;++T)P+=M[T].length;P=m.allocUnsafe(P);var O=0;for(T=0;T<M.length;++T){var U=M[T];G(U,Uint8Array)&&(U=m.from(U));if(!m.isBuffer(U))throw new TypeError('"list" argument must be an Array of Buffers');U.copy(P,O);O+=U.length}return P};m.byteLength=d;m.prototype._isBuffer=!0;m.prototype.swap16=function(){var M=this.length;if(0!==M%2)throw new RangeError("Buffer size must be a multiple of 16-bits");for(var P=0;P<M;P+=2)f(this,P,P+1);return this};m.prototype.swap32=
function(){var M=this.length;if(0!==M%4)throw new RangeError("Buffer size must be a multiple of 32-bits");for(var P=0;P<M;P+=4)f(this,P,P+3),f(this,P+1,P+2);return this};m.prototype.swap64=function(){var M=this.length;if(0!==M%8)throw new RangeError("Buffer size must be a multiple of 64-bits");for(var P=0;P<M;P+=8)f(this,P,P+7),f(this,P+1,P+6),f(this,P+2,P+5),f(this,P+3,P+4);return this};m.prototype.toString=function(){var M=this.length;return 0===M?"":0===arguments.length?v(this,0,M):e.apply(this,
arguments)};m.prototype.toLocaleString=m.prototype.toString;m.prototype.equals=function(M){if(!m.isBuffer(M))throw new TypeError("Argument must be a Buffer");return this===M?!0:0===m.compare(this,M)};m.prototype.inspect=function(){var M=I.INSPECT_MAX_BYTES;var P=this.toString("hex",0,M).replace(/(.{2})/g,"$1 ").trim();this.length>M&&(P+=" ... ");return"\x3cBuffer "+P+"\x3e"};m.prototype.compare=function(M,P,T,O,U){G(M,Uint8Array)&&(M=m.from(M,M.offset,M.byteLength));if(!m.isBuffer(M))throw new TypeError('The "target" argument must be one of type Buffer or Uint8Array. Received type '+
typeof M);void 0===P&&(P=0);void 0===T&&(T=M?M.length:0);void 0===O&&(O=0);void 0===U&&(U=this.length);if(0>P||T>M.length||0>O||U>this.length)throw new RangeError("out of range index");if(O>=U&&P>=T)return 0;if(O>=U)return-1;if(P>=T)return 1;P>>>=0;T>>>=0;O>>>=0;U>>>=0;if(this===M)return 0;var S=U-O,X=T-P,ba=Math.min(S,X);O=this.slice(O,U);M=M.slice(P,T);for(P=0;P<ba;++P)if(O[P]!==M[P]){S=O[P];X=M[P];break}return S<X?-1:X<S?1:0};m.prototype.includes=function(M,P,T){return-1!==this.indexOf(M,P,T)};
m.prototype.indexOf=function(M,P,T){return k(this,M,P,T,!0)};m.prototype.lastIndexOf=function(M,P,T){return k(this,M,P,T,!1)};m.prototype.write=function(M,P,T,O){if(void 0===P)O="utf8",T=this.length,P=0;else if(void 0===T&&"string"===typeof P)O=P,T=this.length,P=0;else if(isFinite(P))P>>>=0,isFinite(T)?(T>>>=0,void 0===O&&(O="utf8")):(O=T,T=void 0);else throw Error("Buffer.write(string, encoding, offset[, length]) is no longer supported");var U=this.length-P;if(void 0===T||T>U)T=U;if(0<M.length&&
(0>T||0>P)||P>this.length)throw new RangeError("Attempt to write outside buffer bounds");O||(O="utf8");for(U=!1;;)switch(O){case "hex":a:{P=Number(P)||0;O=this.length-P;T?(T=Number(T),T>O&&(T=O)):T=O;O=M.length;T>O/2&&(T=O/2);for(O=0;O<T;++O){U=parseInt(M.substr(2*O,2),16);if(U!==U){M=O;break a}this[P+O]=U}M=O}return M;case "utf8":case "utf-8":return D(E(M,this.length-P),this,P,T);case "ascii":return D(C(M),this,P,T);case "latin1":case "binary":return D(C(M),this,P,T);case "base64":return D(u(M),
this,P,T);case "ucs2":case "ucs-2":case "utf16le":case "utf-16le":O=M;U=this.length-P;for(var S=[],X=0;X<O.length&&!(0>(U-=2));++X){var ba=O.charCodeAt(X);M=ba>>8;ba%=256;S.push(ba);S.push(M)}return D(S,this,P,T);default:if(U)throw new TypeError("Unknown encoding: "+O);O=(""+O).toLowerCase();U=!0}};m.prototype.toJSON=function(){return{type:"Buffer",data:Array.prototype.slice.call(this._arr||this,0)}};var H=4096;m.prototype.slice=function(M,P){var T=this.length;M=~~M;P=void 0===P?T:~~P;0>M?(M+=T,0>
M&&(M=0)):M>T&&(M=T);0>P?(P+=T,0>P&&(P=0)):P>T&&(P=T);P<M&&(P=M);M=this.subarray(M,P);M.__proto__=m.prototype;return M};m.prototype.readUIntLE=function(M,P,T){M>>>=0;P>>>=0;T||w(M,P,this.length);T=this[M];for(var O=1,U=0;++U<P&&(O*=256);)T+=this[M+U]*O;return T};m.prototype.readUIntBE=function(M,P,T){M>>>=0;P>>>=0;T||w(M,P,this.length);T=this[M+--P];for(var O=1;0<P&&(O*=256);)T+=this[M+--P]*O;return T};m.prototype.readUInt8=function(M,P){M>>>=0;P||w(M,1,this.length);return this[M]};m.prototype.readUInt16LE=
function(M,P){M>>>=0;P||w(M,2,this.length);return this[M]|this[M+1]<<8};m.prototype.readUInt16BE=function(M,P){M>>>=0;P||w(M,2,this.length);return this[M]<<8|this[M+1]};m.prototype.readUInt32LE=function(M,P){M>>>=0;P||w(M,4,this.length);return(this[M]|this[M+1]<<8|this[M+2]<<16)+16777216*this[M+3]};m.prototype.readUInt32BE=function(M,P){M>>>=0;P||w(M,4,this.length);return 16777216*this[M]+(this[M+1]<<16|this[M+2]<<8|this[M+3])};m.prototype.readIntLE=function(M,P,T){M>>>=0;P>>>=0;T||w(M,P,this.length);
T=this[M];for(var O=1,U=0;++U<P&&(O*=256);)T+=this[M+U]*O;T>=128*O&&(T-=Math.pow(2,8*P));return T};m.prototype.readIntBE=function(M,P,T){M>>>=0;P>>>=0;T||w(M,P,this.length);T=P;for(var O=1,U=this[M+--T];0<T&&(O*=256);)U+=this[M+--T]*O;U>=128*O&&(U-=Math.pow(2,8*P));return U};m.prototype.readInt8=function(M,P){M>>>=0;P||w(M,1,this.length);return this[M]&128?-1*(255-this[M]+1):this[M]};m.prototype.readInt16LE=function(M,P){M>>>=0;P||w(M,2,this.length);M=this[M]|this[M+1]<<8;return M&32768?M|4294901760:
M};m.prototype.readInt16BE=function(M,P){M>>>=0;P||w(M,2,this.length);M=this[M+1]|this[M]<<8;return M&32768?M|4294901760:M};m.prototype.readInt32LE=function(M,P){M>>>=0;P||w(M,4,this.length);return this[M]|this[M+1]<<8|this[M+2]<<16|this[M+3]<<24};m.prototype.readInt32BE=function(M,P){M>>>=0;P||w(M,4,this.length);return this[M]<<24|this[M+1]<<16|this[M+2]<<8|this[M+3]};m.prototype.readFloatLE=function(M,P){M>>>=0;P||w(M,4,this.length);return L.read(this,M,!0,23,4)};m.prototype.readFloatBE=function(M,
P){M>>>=0;P||w(M,4,this.length);return L.read(this,M,!1,23,4)};m.prototype.readDoubleLE=function(M,P){M>>>=0;P||w(M,8,this.length);return L.read(this,M,!0,52,8)};m.prototype.readDoubleBE=function(M,P){M>>>=0;P||w(M,8,this.length);return L.read(this,M,!1,52,8)};m.prototype.writeUIntLE=function(M,P,T,O){M=+M;P>>>=0;T>>>=0;O||y(this,M,P,T,Math.pow(2,8*T)-1,0);O=1;var U=0;for(this[P]=M&255;++U<T&&(O*=256);)this[P+U]=M/O&255;return P+T};m.prototype.writeUIntBE=function(M,P,T,O){M=+M;P>>>=0;T>>>=0;O||y(this,
M,P,T,Math.pow(2,8*T)-1,0);O=T-1;var U=1;for(this[P+O]=M&255;0<=--O&&(U*=256);)this[P+O]=M/U&255;return P+T};m.prototype.writeUInt8=function(M,P,T){M=+M;P>>>=0;T||y(this,M,P,1,255,0);this[P]=M&255;return P+1};m.prototype.writeUInt16LE=function(M,P,T){M=+M;P>>>=0;T||y(this,M,P,2,65535,0);this[P]=M&255;this[P+1]=M>>>8;return P+2};m.prototype.writeUInt16BE=function(M,P,T){M=+M;P>>>=0;T||y(this,M,P,2,65535,0);this[P]=M>>>8;this[P+1]=M&255;return P+2};m.prototype.writeUInt32LE=function(M,P,T){M=+M;P>>>=
0;T||y(this,M,P,4,4294967295,0);this[P+3]=M>>>24;this[P+2]=M>>>16;this[P+1]=M>>>8;this[P]=M&255;return P+4};m.prototype.writeUInt32BE=function(M,P,T){M=+M;P>>>=0;T||y(this,M,P,4,4294967295,0);this[P]=M>>>24;this[P+1]=M>>>16;this[P+2]=M>>>8;this[P+3]=M&255;return P+4};m.prototype.writeIntLE=function(M,P,T,O){M=+M;P>>>=0;O||(O=Math.pow(2,8*T-1),y(this,M,P,T,O-1,-O));O=0;var U=1,S=0;for(this[P]=M&255;++O<T&&(U*=256);)0>M&&0===S&&0!==this[P+O-1]&&(S=1),this[P+O]=(M/U>>0)-S&255;return P+T};m.prototype.writeIntBE=
function(M,P,T,O){M=+M;P>>>=0;O||(O=Math.pow(2,8*T-1),y(this,M,P,T,O-1,-O));O=T-1;var U=1,S=0;for(this[P+O]=M&255;0<=--O&&(U*=256);)0>M&&0===S&&0!==this[P+O+1]&&(S=1),this[P+O]=(M/U>>0)-S&255;return P+T};m.prototype.writeInt8=function(M,P,T){M=+M;P>>>=0;T||y(this,M,P,1,127,-128);0>M&&(M=255+M+1);this[P]=M&255;return P+1};m.prototype.writeInt16LE=function(M,P,T){M=+M;P>>>=0;T||y(this,M,P,2,32767,-32768);this[P]=M&255;this[P+1]=M>>>8;return P+2};m.prototype.writeInt16BE=function(M,P,T){M=+M;P>>>=0;
T||y(this,M,P,2,32767,-32768);this[P]=M>>>8;this[P+1]=M&255;return P+2};m.prototype.writeInt32LE=function(M,P,T){M=+M;P>>>=0;T||y(this,M,P,4,2147483647,-2147483648);this[P]=M&255;this[P+1]=M>>>8;this[P+2]=M>>>16;this[P+3]=M>>>24;return P+4};m.prototype.writeInt32BE=function(M,P,T){M=+M;P>>>=0;T||y(this,M,P,4,2147483647,-2147483648);0>M&&(M=4294967295+M+1);this[P]=M>>>24;this[P+1]=M>>>16;this[P+2]=M>>>8;this[P+3]=M&255;return P+4};m.prototype.writeFloatLE=function(M,P,T){return A(this,M,P,!0,T)};m.prototype.writeFloatBE=
function(M,P,T){return A(this,M,P,!1,T)};m.prototype.writeDoubleLE=function(M,P,T){return z(this,M,P,!0,T)};m.prototype.writeDoubleBE=function(M,P,T){return z(this,M,P,!1,T)};m.prototype.copy=function(M,P,T,O){if(!m.isBuffer(M))throw new TypeError("argument should be a Buffer");T||(T=0);O||0===O||(O=this.length);P>=M.length&&(P=M.length);P||(P=0);0<O&&O<T&&(O=T);if(O===T||0===M.length||0===this.length)return 0;if(0>P)throw new RangeError("targetStart out of bounds");if(0>T||T>=this.length)throw new RangeError("Index out of range");
if(0>O)throw new RangeError("sourceEnd out of bounds");O>this.length&&(O=this.length);M.length-P<O-T&&(O=M.length-P+T);var U=O-T;if(this===M&&"function"===typeof Uint8Array.prototype.copyWithin)this.copyWithin(P,T,O);else if(this===M&&T<P&&P<O)for(O=U-1;0<=O;--O)M[O+P]=this[O+T];else Uint8Array.prototype.set.call(M,this.subarray(T,O),P);return U};m.prototype.fill=function(M,P,T,O){if("string"===typeof M){"string"===typeof P?(O=P,P=0,T=this.length):"string"===typeof T&&(O=T,T=this.length);if(void 0!==
O&&"string"!==typeof O)throw new TypeError("encoding must be a string");if("string"===typeof O&&!m.isEncoding(O))throw new TypeError("Unknown encoding: "+O);if(1===M.length){var U=M.charCodeAt(0);if("utf8"===O&&128>U||"latin1"===O)M=U}}else"number"===typeof M&&(M&=255);if(0>P||this.length<P||this.length<T)throw new RangeError("Out of range index");if(T<=P)return this;P>>>=0;T=void 0===T?this.length:T>>>0;M||(M=0);if("number"===typeof M)for(O=P;O<T;++O)this[O]=M;else{U=m.isBuffer(M)?M:m.from(M,O);
var S=U.length;if(0===S)throw new TypeError('The value "'+M+'" is invalid for argument "value"');for(O=0;O<T-P;++O)this[O+P]=U[O%S]}return this};var Q=/[^+/0-9A-Za-z-_]/g}).call(this)}).call(this,b("buffer").Buffer)},{"base64-js":79,buffer:111,ieee754:442}],112:[function(b,N,I){function r(n){return[Math.min(n[0],n[1]),Math.max(n[0],n[1])]}function q(n,p){return n[0]-p[0]||n[1]-p[1]}function m(n,p,d){return p in n?n[p]:d}var l=b("./lib/monotone"),a=b("./lib/triangulation"),h=b("./lib/delaunay"),g=
b("./lib/filter");N.exports=function(n,p,d){Array.isArray(p)?(d=d||{},p=p||[]):(d=p||{},p=[]);var e=!!m(d,"delaunay",!0),f=!!m(d,"interior",!0),k=!!m(d,"exterior",!0);d=!!m(d,"infinity",!1);if(!f&&!k||0===n.length)return[];var t=l(n,p);if(e||f!==k||d){p=a(n.length,p.map(r).sort(q));for(var v=0;v<t.length;++v){var w=t[v];p.addTriangle(w[0],w[1],w[2])}e&&h(n,p);return k?f?d?g(p,0,d):p.cells():g(p,1,d):g(p,-1)}return t}},{"./lib/delaunay":113,"./lib/filter":114,"./lib/monotone":115,"./lib/triangulation":116}],
113:[function(b,N,I){function r(m,l,a,h,g,n){var p=l.opposite(h,g);if(!(0>p)){if(g<h){var d=h;h=g;g=d;d=n;n=p;p=d}l.isConstraint(h,g)||0>q(m[h],m[g],m[n],m[p])&&a.push(h,g)}}var q=b("robust-in-sphere")[4];b("binary-search-bounds");N.exports=function(m,l){for(var a=[],h=m.length,g=l.stars,n=0;n<h;++n)for(var p=g[n],d=1;d<p.length;d+=2){var e=p[d];if(!(e<n||l.isConstraint(n,e))){for(var f=p[d-1],k=-1,t=1;t<p.length;t+=2)if(p[t-1]===e){k=p[t];break}0>k||0>q(m[n],m[e],m[f],m[k])&&a.push(n,e)}}for(;0<
a.length;){e=a.pop();n=a.pop();k=f=-1;p=g[n];for(h=1;h<p.length;h+=2)d=p[h-1],t=p[h],d===e?k=t:t===e&&(f=d);0>f||0>k||0<=q(m[n],m[e],m[f],m[k])||(l.flip(n,e),r(m,l,a,f,n,k),r(m,l,a,n,k,f),r(m,l,a,k,e,f),r(m,l,a,e,f,k))}}},{"binary-search-bounds":96,"robust-in-sphere":546}],114:[function(b,N,I){function r(l,a,h,g,n,p,d){this.cells=l;this.neighbor=a;this.flags=g;this.constraint=h;this.active=n;this.next=p;this.boundary=d}function q(l,a){return l[0]-a[0]||l[1]-a[1]||l[2]-a[2]}var m=b("binary-search-bounds");
N.exports=function(l,a,h){for(var g=l.cells(),n=g.length,p=0;p<n;++p){var d=g[p],e=d[0],f=d[1],k=d[2];f<k?f<e&&(d[0]=f,d[1]=k,d[2]=e):k<e&&(d[0]=k,d[1]=e,d[2]=f)}g.sort(q);var t=Array(n);for(p=0;p<t.length;++p)t[p]=0;var v=[],w=[],y=Array(3*n),B=Array(3*n),A=null;h&&(A=[]);k=new r(g,y,B,t,v,w,A);for(p=0;p<n;++p){d=g[p];for(var z=0;3>z;++z){e=d[z];f=d[(z+1)%3];var E=y[3*p+z]=k.locate(f,e,l.opposite(f,e)),C=B[3*p+z]=l.isConstraint(e,f);0>E&&(C?w.push(p):(v.push(p),t[p]=1),h&&A.push([f,e,-1]))}}if(0===
a)return h?k.cells.concat(k.boundary):k.cells;n=1;p=k.active;d=k.next;l=k.flags;g=k.cells;e=k.constraint;for(f=k.neighbor;0<p.length||0<d.length;){for(;0<p.length;)if(t=p.pop(),l[t]!==-n)for(l[t]=n,v=0;3>v;++v)w=f[3*t+v],0<=w&&0===l[w]&&(e[3*t+v]?d.push(w):(p.push(w),l[w]=n));t=d;d=p;p=t;d.length=0;n=-n}for(p=n=0;p<g.length;++p)l[p]===a&&(g[n++]=g[p]);g.length=n;return h?g.concat(k.boundary):g};r.prototype.locate=function(){var l=[0,0,0];return function(a,h,g){var n=a,p=h,d=g;h<g?h<a&&(n=h,p=g,d=
a):g<a&&(n=g,p=a,d=h);if(0>n)return-1;l[0]=n;l[1]=p;l[2]=d;return m.eq(this.cells,l,q)}}()},{"binary-search-bounds":96}],115:[function(b,N,I){function r(n,p,d,e,f){this.a=n;this.b=p;this.idx=d;this.lowerIds=e;this.upperIds=f}function q(n,p,d,e){this.a=n;this.b=p;this.type=d;this.idx=e}function m(n,p){var d=n.a[0]-p.a[0]||n.a[1]-p.a[1]||n.type-p.type;return d||0!==n.type&&(d=g(n.a,n.b,p.b))?d:n.idx-p.idx}function l(n,p){return g(n.a,n.b,p)}function a(n,p){var d;return(d=n.a[0]<p.a[0]?g(n.a,n.b,p.a):
g(p.b,p.a,n.a))?d:(d=p.b[0]<n.b[0]?g(n.a,n.b,p.b):g(p.b,p.a,n.b))||n.idx-p.idx}var h=b("binary-search-bounds"),g=b("robust-orientation")[3];N.exports=function(n,p){for(var d=n.length,e=p.length,f=[],k=0;k<d;++k)f.push(new q(n[k],null,0,k));for(k=0;k<e;++k){var t=p[k];d=n[t[0]];t=n[t[1]];d[0]<t[0]?f.push(new q(d,t,2,k),new q(t,d,1,k)):d[0]>t[0]&&f.push(new q(t,d,2,k),new q(d,t,1,k))}f.sort(m);k=f[0].a[0]-(1+Math.abs(f[0].a[0]))*Math.pow(2,-52);p=[new r([k,1],[k,0],-1,[],[],[],[])];e=[];k=0;for(d=f.length;k<
d;++k){var v=f[k];t=v.type;if(0===t){t=e;var w=p,y=n,B=v.a;v=v.idx;for(var A=h.lt(w,B,l),z=h.gt(w,B,l);A<z;++A){for(var E=w[A],C=E.lowerIds,u=C.length;1<u&&0<g(y[C[u-2]],y[C[u-1]],B);)t.push([C[u-1],C[u-2],v]),--u;C.length=u;C.push(v);E=E.upperIds;for(u=E.length;1<u&&0>g(y[E[u-2]],y[E[u-1]],B);)t.push([E[u-2],E[u-1],v]),--u;E.length=u;E.push(v)}}else 2===t?(t=p,w=v,y=h.le(t,w,a),B=t[y],v=B.upperIds,z=v[v.length-1],B.upperIds=[z],t.splice(y+1,0,new r(w.a,w.b,w.idx,[z],v))):(t=p,w=v,y=w.a,w.a=w.b,w.b=
y,w=h.eq(t,w,a),t[w-1].upperIds=t[w].upperIds,t.splice(w,1))}return e}},{"binary-search-bounds":96,"robust-orientation":548}],116:[function(b,N,I){function r(l,a){this.stars=l;this.edges=a}function q(l,a,h){for(var g=1,n=l.length;g<n;g+=2)if(l[g-1]===a&&l[g]===h){l[g-1]=l[n-2];l[g]=l[n-1];l.length=n-2;break}}var m=b("binary-search-bounds");N.exports=function(l,a){for(var h=Array(l),g=0;g<l;++g)h[g]=[];return new r(h,a)};b=r.prototype;b.isConstraint=function(){function l(h,g){return h[0]-g[0]||h[1]-
g[1]}var a=[0,0];return function(h,g){a[0]=Math.min(h,g);a[1]=Math.max(h,g);return 0<=m.eq(this.edges,a,l)}}();b.removeTriangle=function(l,a,h){var g=this.stars;q(g[l],a,h);q(g[a],h,l);q(g[h],l,a)};b.addTriangle=function(l,a,h){var g=this.stars;g[l].push(a,h);g[a].push(h,l);g[h].push(l,a)};b.opposite=function(l,a){a=this.stars[a];for(var h=1,g=a.length;h<g;h+=2)if(a[h]===l)return a[h-1];return-1};b.flip=function(l,a){var h=this.opposite(l,a),g=this.opposite(a,l);this.removeTriangle(l,a,h);this.removeTriangle(a,
l,g);this.addTriangle(l,g,h);this.addTriangle(a,h,g)};b.edges=function(){for(var l=this.stars,a=[],h=0,g=l.length;h<g;++h)for(var n=l[h],p=0,d=n.length;p<d;p+=2)a.push([n[p],n[p+1]]);return a};b.cells=function(){for(var l=this.stars,a=[],h=0,g=l.length;h<g;++h)for(var n=l[h],p=0,d=n.length;p<d;p+=2){var e=n[p],f=n[p+1];h<Math.min(e,f)&&a.push([h,e,f])}return a}},{"binary-search-bounds":96}],117:[function(b,N,I){N.exports=function(r){for(var q=1,m=1;m<r.length;++m)for(var l=0;l<m;++l)if(r[m]<r[l])q=
-q;else if(r[l]===r[m])return 0;return q}},{}],118:[function(b,N,I){function r(h,g){for(var n=0,p=h.length,d=0;d<p;++d)n+=h[d]*g[d];return n}function q(h){var g=h.length;if(0===g)return[];for(var n=l([h.length+1,h.length+1],1),p=l([h.length+1],1),d=n[g][g]=0;d<g;++d){for(var e=0;e<=d;++e)n[e][d]=n[d][e]=2*r(h[d],h[e]);p[d]=r(h[d],h[d])}h=a(n,p);n=0;p=h[g+1];for(d=0;d<p.length;++d)n+=p[d];var f=Array(g);for(d=0;d<g;++d){p=h[d];var k=0;for(e=0;e<p.length;++e)k+=p[e];f[d]=k/n}return f}function m(h){if(0===
h.length)return[];for(var g=h[0].length,n=l([g]),p=q(h),d=0;d<h.length;++d)for(var e=0;e<g;++e)n[e]+=h[d][e]*p[d];return n}var l=b("dup"),a=b("robust-linear-solve");m.barycenetric=q;N.exports=m},{dup:176,"robust-linear-solve":547}],119:[function(b,N,I){N.exports=function(q){for(var m=r(q),l=0,a=0;a<q.length;++a)for(var h=q[a],g=0;g<m.length;++g)l+=Math.pow(h[g]-m[g],2);return Math.sqrt(l/q.length)};var r=b("circumcenter")},{circumcenter:118}],120:[function(b,N,I){N.exports=function(r,q,m){return q<
m?r<q?q:r>m?m:r:r<m?m:r>q?q:r}},{}],121:[function(b,N,I){function r(z){z=w(z);return[B(z,-Infinity),B(z,Infinity)]}function q(z){for(var E=Array(z.length),C=0;C<z.length;++C){var u=z[C];E[C]=[B(u[0],-Infinity),B(u[1],-Infinity),B(u[0],Infinity),B(u[1],Infinity)]}return E}function m(z,E,C){var u=[];f(C,function(D,G){var J=E[D],L=E[G];J[0]!==L[0]&&J[0]!==L[1]&&J[1]!==L[0]&&J[1]!==L[1]&&k(z[J[0]],z[J[1]],z[L[0]],z[L[1]])&&u.push([D,G])});return u}function l(z,E,C,u){var D=[];f(C,u,function(G,J){var L=
E[G];if(L[0]!==J&&L[1]!==J){var K=z[J];k(z[L[0]],z[L[1]],K,K)&&D.push([G,J])}});return D}function a(z,E,C,u,D){var G,J=z.map(function(O){return[t(O[0]),t(O[1])]});for(G=0;G<C.length;++G){var L=C[G];var K=L[0];L=L[1];var H=E[K],Q=E[L];if(H=A(y(z[H[0]]),y(z[H[1]]),y(z[Q[0]]),y(z[Q[1]])))Q=z.length,z.push([w(H[0]),w(H[1])]),J.push(H),u.push([K,Q],[L,Q])}u.sort(function(O,U){if(O[0]!==U[0])return O[0]-U[0];O=J[O[1]];U=J[U[1]];return v(O[0],U[0])||v(O[1],U[1])});for(G=u.length-1;0<=G;--G){L=u[G];K=L[0];
H=E[K];Q=H[0];C=H[1];var M=z[Q],P=z[C];0>(M[0]-P[0]||M[1]-P[1])&&(M=Q,Q=C,C=M);H[0]=Q;Q=H[1]=L[1];var T;for(D&&(T=H[2]);0<G&&u[G-1][0]===K;)L=u[--G],L=L[1],D?E.push([Q,L,T]):E.push([Q,L]),Q=L;D?E.push([Q,C,T]):E.push([Q,C])}return J}function h(z,E,C){C=E.length;for(var u=new e(C),D=[],G=0;G<E.length;++G){var J=E[G],L=r(J[0]);J=r(J[1]);D.push([B(L[0],-Infinity),B(J[0],-Infinity),B(L[1],Infinity),B(J[1],Infinity)])}f(D,function(K,H){u.link(K,H)});L=!0;E=Array(C);for(G=0;G<C;++G)D=u.find(G),D!==G&&(L=
!1,z[D]=[Math.min(z[G][0],z[D][0]),Math.min(z[G][1],z[D][1])]);if(L)return null;for(G=L=0;G<C;++G)D=u.find(G),D===G?(E[G]=L,z[L++]=z[G]):E[G]=-1;z.length=L;for(G=0;G<C;++G)0>E[G]&&(E[G]=E[u.find(G)]);return E}function g(z,E){return z[0]-E[0]||z[1]-E[1]}function n(z,E){var C=z[0]-E[0]||z[1]-E[1];return C?C:z[2]<E[2]?-1:z[2]>E[2]?1:0}function p(z,E,C){if(0!==z.length){if(E)for(var u=0;u<z.length;++u){var D=z[u],G=E[D[0]],J=E[D[1]];D[0]=Math.min(G,J);D[1]=Math.max(G,J)}else for(u=0;u<z.length;++u)D=
z[u],G=D[0],J=D[1],D[0]=Math.min(G,J),D[1]=Math.max(G,J);C?z.sort(n):z.sort(g);for(u=E=1;u<z.length;++u)if(D=z[u-1],G=z[u],G[0]!==D[0]||G[1]!==D[1]||C&&G[2]!==D[2])z[E++]=G;z.length=E}}function d(z,E,C){for(var u=Array(E.length),D=0;D<E.length;++D){var G=E[D],J=z[G[0]];G=z[G[1]];u[D]=[B(Math.min(J[0],G[0]),-Infinity),B(Math.min(J[1],G[1]),-Infinity),B(Math.max(J[0],G[0]),Infinity),B(Math.max(J[1],G[1]),Infinity)]}D=m(z,E,u);J=q(z);u=l(z,E,u,J);G=a(z,E,D,u,C);z=h(z,G,J);p(E,z,C);return z?!0:0<D.length||
0<u.length}N.exports=function(z,E,C){if(C){var u=E;for(var D=Array(E.length),G=0;G<E.length;++G){var J=E[G];D[G]=[J[0],J[1],C[G]]}E=D}G=E;J=!!C;D=h(z,[],q(z));p(G,D,J);for(D=!!D;d(z,E,!!C);)D=!0;if(C&&D)for(u.length=0,G=C.length=0;G<E.length;++G)J=E[G],u.push([J[0],J[1]]),C.push(J[2]);return D};var e=b("union-find"),f=b("box-intersect"),k=b("robust-segment-intersect"),t=b("big-rat"),v=b("big-rat/cmp"),w=b("big-rat/to-float"),y=b("rat-vec"),B=b("nextafter"),A=b("./lib/rat-seg-intersect")},{"./lib/rat-seg-intersect":122,
"big-rat":83,"big-rat/cmp":81,"big-rat/to-float":95,"box-intersect":101,nextafter:496,"rat-vec":530,"robust-segment-intersect":551,"union-find":596}],122:[function(b,N,I){function r(p,d){return l(q(p[0],d[1]),q(p[1],d[0]))}N.exports=function(p,d,e,f){d=h(d,p);var k=h(f,e);f=r(d,k);if(0===a(f))return null;e=h(p,e);e=r(k,e);e=m(e,f);d=n(d,e);return g(p,d)};var q=b("big-rat/mul"),m=b("big-rat/div"),l=b("big-rat/sub"),a=b("big-rat/sign"),h=b("rat-vec/sub"),g=b("rat-vec/add"),n=b("rat-vec/muls")},{"big-rat/div":82,
"big-rat/mul":92,"big-rat/sign":93,"big-rat/sub":94,"rat-vec/add":529,"rat-vec/muls":531,"rat-vec/sub":532}],123:[function(b,N,I){function r(m,l){null==l&&(l=!0);var a=m[0],h=m[1],g=m[2];m=m[3];null==m&&(m=l?1:255);l&&(a*=255,h*=255,g*=255,m*=255);a=q(a,0,255)&255;h=q(h,0,255)&255;g=q(g,0,255)&255;m=q(m,0,255)&255;return 16777216*a+(h<<16)+(g<<8)+m}var q=b("clamp");N.exports=r;N.exports.to=r;N.exports.from=function(m,l){m=+m;var a=m>>>24,h=(m&16711680)>>>16,g=(m&65280)>>>8;m&=255;return!1===l?[a,
h,g,m]:[a/255,h/255,g/255,m/255]}},{clamp:120}],124:[function(b,N,I){N.exports={aliceblue:[240,248,255],antiquewhite:[250,235,215],aqua:[0,255,255],aquamarine:[127,255,212],azure:[240,255,255],beige:[245,245,220],bisque:[255,228,196],black:[0,0,0],blanchedalmond:[255,235,205],blue:[0,0,255],blueviolet:[138,43,226],brown:[165,42,42],burlywood:[222,184,135],cadetblue:[95,158,160],chartreuse:[127,255,0],chocolate:[210,105,30],coral:[255,127,80],cornflowerblue:[100,149,237],cornsilk:[255,248,220],crimson:[220,
20,60],cyan:[0,255,255],darkblue:[0,0,139],darkcyan:[0,139,139],darkgoldenrod:[184,134,11],darkgray:[169,169,169],darkgreen:[0,100,0],darkgrey:[169,169,169],darkkhaki:[189,183,107],darkmagenta:[139,0,139],darkolivegreen:[85,107,47],darkorange:[255,140,0],darkorchid:[153,50,204],darkred:[139,0,0],darksalmon:[233,150,122],darkseagreen:[143,188,143],darkslateblue:[72,61,139],darkslategray:[47,79,79],darkslategrey:[47,79,79],darkturquoise:[0,206,209],darkviolet:[148,0,211],deeppink:[255,20,147],deepskyblue:[0,
191,255],dimgray:[105,105,105],dimgrey:[105,105,105],dodgerblue:[30,144,255],firebrick:[178,34,34],floralwhite:[255,250,240],forestgreen:[34,139,34],fuchsia:[255,0,255],gainsboro:[220,220,220],ghostwhite:[248,248,255],gold:[255,215,0],goldenrod:[218,165,32],gray:[128,128,128],green:[0,128,0],greenyellow:[173,255,47],grey:[128,128,128],honeydew:[240,255,240],hotpink:[255,105,180],indianred:[205,92,92],indigo:[75,0,130],ivory:[255,255,240],khaki:[240,230,140],lavender:[230,230,250],lavenderblush:[255,
240,245],lawngreen:[124,252,0],lemonchiffon:[255,250,205],lightblue:[173,216,230],lightcoral:[240,128,128],lightcyan:[224,255,255],lightgoldenrodyellow:[250,250,210],lightgray:[211,211,211],lightgreen:[144,238,144],lightgrey:[211,211,211],lightpink:[255,182,193],lightsalmon:[255,160,122],lightseagreen:[32,178,170],lightskyblue:[135,206,250],lightslategray:[119,136,153],lightslategrey:[119,136,153],lightsteelblue:[176,196,222],lightyellow:[255,255,224],lime:[0,255,0],limegreen:[50,205,50],linen:[250,
240,230],magenta:[255,0,255],maroon:[128,0,0],mediumaquamarine:[102,205,170],mediumblue:[0,0,205],mediumorchid:[186,85,211],mediumpurple:[147,112,219],mediumseagreen:[60,179,113],mediumslateblue:[123,104,238],mediumspringgreen:[0,250,154],mediumturquoise:[72,209,204],mediumvioletred:[199,21,133],midnightblue:[25,25,112],mintcream:[245,255,250],mistyrose:[255,228,225],moccasin:[255,228,181],navajowhite:[255,222,173],navy:[0,0,128],oldlace:[253,245,230],olive:[128,128,0],olivedrab:[107,142,35],orange:[255,
165,0],orangered:[255,69,0],orchid:[218,112,214],palegoldenrod:[238,232,170],palegreen:[152,251,152],paleturquoise:[175,238,238],palevioletred:[219,112,147],papayawhip:[255,239,213],peachpuff:[255,218,185],peru:[205,133,63],pink:[255,192,203],plum:[221,160,221],powderblue:[176,224,230],purple:[128,0,128],rebeccapurple:[102,51,153],red:[255,0,0],rosybrown:[188,143,143],royalblue:[65,105,225],saddlebrown:[139,69,19],salmon:[250,128,114],sandybrown:[244,164,96],seagreen:[46,139,87],seashell:[255,245,
238],sienna:[160,82,45],silver:[192,192,192],skyblue:[135,206,235],slateblue:[106,90,205],slategray:[112,128,144],slategrey:[112,128,144],snow:[255,250,250],springgreen:[0,255,127],steelblue:[70,130,180],tan:[210,180,140],teal:[0,128,128],thistle:[216,191,216],tomato:[255,99,71],turquoise:[64,224,208],violet:[238,130,238],wheat:[245,222,179],white:[255,255,255],whitesmoke:[245,245,245],yellow:[255,255,0],yellowgreen:[154,205,50]}},{}],125:[function(b,N,I){var r=b("color-rgba"),q=b("clamp"),m=b("dtype");
N.exports=function(l,a){"float"!==a&&a||(a="array");"uint"===a&&(a="uint8");"uint_clamped"===a&&(a="uint8_clamped");var h=new (m(a))(4);a="uint8"!==a&&"uint8_clamped"!==a;l.length&&"string"!==typeof l||(l=r(l),l[0]/=255,l[1]/=255,l[2]/=255);var g=l;g=g instanceof Uint8Array||g instanceof Uint8ClampedArray?!0:Array.isArray(g)&&(1<g[0]||0===g[0])&&(1<g[1]||0===g[1])&&(1<g[2]||0===g[2])&&(!g[3]||1<g[3])?!0:!1;if(g)return h[0]=l[0],h[1]=l[1],h[2]=l[2],h[3]=null!=l[3]?l[3]:255,a&&(h[0]/=255,h[1]/=255,
h[2]/=255,h[3]/=255),h;a?(h[0]=l[0],h[1]=l[1],h[2]=l[2],h[3]=null!=l[3]?l[3]:1):(h[0]=q(Math.floor(255*l[0]),0,255),h[1]=q(Math.floor(255*l[1]),0,255),h[2]=q(Math.floor(255*l[2]),0,255),h[3]=null==l[3]?255:q(Math.floor(255*l[3]),0,255));return h}},{clamp:120,"color-rgba":127,dtype:175}],126:[function(b,N,I){(function(r){(function(){var q=b("color-name"),m=b("is-plain-obj"),l=b("defined");N.exports=function(h){var g,n=[],p=1;if("string"===typeof h)if(q[h]){n=q[h].slice();var d="rgb"}else if("transparent"===
h)p=0,d="rgb",n=[0,0,0];else if(/^#[A-Fa-f0-9]+$/.test(h)){var e=h.slice(1),f=e.length;p=1;4>=f?(n=[parseInt(e[0]+e[0],16),parseInt(e[1]+e[1],16),parseInt(e[2]+e[2],16)],4===f&&(p=parseInt(e[3]+e[3],16)/255)):(n=[parseInt(e[0]+e[1],16),parseInt(e[2]+e[3],16),parseInt(e[4]+e[5],16)],8===f&&(p=parseInt(e[6]+e[7],16)/255));n[0]||(n[0]=0);n[1]||(n[1]=0);n[2]||(n[2]=0);d="rgb"}else(g=/^((?:rgb|hs[lvb]|hwb|cmyk?|xy[zy]|gray|lab|lchu?v?|[ly]uv|lms)a?)\s*\(([^\)]*)\)/.exec(h))?(h=g[1],p="rgb"===h,d=e=h.replace(/a$/,
""),f="cmyk"===e?4:"gray"===e?1:3,n=g[2].trim().split(/\s*,\s*/).map(function(k,t){if(/%$/.test(k)){if(t===f)return parseFloat(k)/100;if("rgb"===e)return 255*parseFloat(k)/100}else if("h"===e[t]&&!/deg$/.test(k)&&void 0!==a[k])return a[k];return parseFloat(k)}),h===e&&n.push(1),p=p?1:void 0===n[f]?1:n[f],n=n.slice(0,f)):10<h.length&&/[0-9](?:\s|\/)/.test(h)&&(n=h.match(/([0-9]+)/g).map(function(k){return parseFloat(k)}),d=h.match(/([a-z])/ig).join("").toLowerCase());else if(!isNaN(h))d="rgb",n=[h>>>
16,(h&65280)>>>8,h&255];else if(m(h))g=l(h.r,h.red,h.R,null),null!==g?(d="rgb",n=[g,l(h.g,h.green,h.G),l(h.b,h.blue,h.B)]):(d="hsl",n=[l(h.h,h.hue,h.H),l(h.s,h.saturation,h.S),l(h.l,h.lightness,h.L,h.b,h.brightness)]),p=l(h.a,h.alpha,h.opacity,1),null!=h.opacity&&(p/=100);else if(Array.isArray(h)||r.ArrayBuffer&&ArrayBuffer.isView&&ArrayBuffer.isView(h))n=[h[0],h[1],h[2]],d="rgb",p=4===h.length?h[3]:1;return{space:d,values:n,alpha:p}};var a={red:0,orange:60,yellow:120,green:180,blue:240,purple:300}}).call(this)}).call(this,
"undefined"!==typeof od?od:"undefined"!==typeof self?self:"undefined"!==typeof window?window:{})},{"color-name":124,defined:170,"is-plain-obj":469}],127:[function(b,N,I){var r=b("color-parse"),q=b("color-space/hsl"),m=b("clamp");N.exports=function(l){var a=r(l);if(!a.space)return[];l=Array(3);l[0]=m(a.values[0],0,255);l[1]=m(a.values[1],0,255);l[2]=m(a.values[2],0,255);"h"===a.space[0]&&(l=q.rgb(l));l.push(m(a.alpha,0,1));return l}},{clamp:120,"color-parse":126,"color-space/hsl":128}],128:[function(b,
N,I){b=b("./rgb");N.exports={name:"hsl",min:[0,0,0],max:[360,100,100],channel:["hue","saturation","lightness"],alias:["HSL"],rgb:function(r){var q=r[0]/360,m=r[1]/100;r=r[2]/100;if(0===m){var l=255*r;return[l,l,l]}m=.5>r?r*(1+m):r+m-r*m;r=2*r-m;var a=[0,0,0];for(var h=0;3>h;h++)l=q+1/3*-(h-1),0>l?l++:1<l&&l--,l=1>6*l?r+6*(m-r)*l:1>2*l?m:2>3*l?r+(m-r)*(2/3-l)*6:r,a[h]=255*l;return a}};b.hsl=function(r){var q=r[0]/255,m=r[1]/255,l=r[2]/255;r=Math.min(q,m,l);var a=Math.max(q,m,l),h=a-r,g;a===r?g=0:q===
a?g=(m-l)/h:m===a?g=2+(l-q)/h:l===a&&(g=4+(q-m)/h);g=Math.min(60*g,360);0>g&&(g+=360);q=(r+a)/2;return[g,100*(a===r?0:.5>=q?h/(a+r):h/(2-a-r)),100*q]}},{"./rgb":129}],129:[function(b,N,I){N.exports={name:"rgb",min:[0,0,0],max:[255,255,255],channel:["red","green","blue"],alias:["RGB"]}},{}],130:[function(b,N,I){N.exports={jet:[{index:0,rgb:[0,0,131]},{index:.125,rgb:[0,60,170]},{index:.375,rgb:[5,255,255]},{index:.625,rgb:[255,255,0]},{index:.875,rgb:[250,0,0]},{index:1,rgb:[128,0,0]}],hsv:[{index:0,
rgb:[255,0,0]},{index:.169,rgb:[253,255,2]},{index:.173,rgb:[247,255,2]},{index:.337,rgb:[0,252,4]},{index:.341,rgb:[0,252,10]},{index:.506,rgb:[1,249,255]},{index:.671,rgb:[2,0,253]},{index:.675,rgb:[8,0,253]},{index:.839,rgb:[255,0,251]},{index:.843,rgb:[255,0,245]},{index:1,rgb:[255,0,6]}],hot:[{index:0,rgb:[0,0,0]},{index:.3,rgb:[230,0,0]},{index:.6,rgb:[255,210,0]},{index:1,rgb:[255,255,255]}],cool:[{index:0,rgb:[0,255,255]},{index:1,rgb:[255,0,255]}],spring:[{index:0,rgb:[255,0,255]},{index:1,
rgb:[255,255,0]}],summer:[{index:0,rgb:[0,128,102]},{index:1,rgb:[255,255,102]}],autumn:[{index:0,rgb:[255,0,0]},{index:1,rgb:[255,255,0]}],winter:[{index:0,rgb:[0,0,255]},{index:1,rgb:[0,255,128]}],bone:[{index:0,rgb:[0,0,0]},{index:.376,rgb:[84,84,116]},{index:.753,rgb:[169,200,200]},{index:1,rgb:[255,255,255]}],copper:[{index:0,rgb:[0,0,0]},{index:.804,rgb:[255,160,102]},{index:1,rgb:[255,199,127]}],greys:[{index:0,rgb:[0,0,0]},{index:1,rgb:[255,255,255]}],yignbu:[{index:0,rgb:[8,29,88]},{index:.125,
rgb:[37,52,148]},{index:.25,rgb:[34,94,168]},{index:.375,rgb:[29,145,192]},{index:.5,rgb:[65,182,196]},{index:.625,rgb:[127,205,187]},{index:.75,rgb:[199,233,180]},{index:.875,rgb:[237,248,217]},{index:1,rgb:[255,255,217]}],greens:[{index:0,rgb:[0,68,27]},{index:.125,rgb:[0,109,44]},{index:.25,rgb:[35,139,69]},{index:.375,rgb:[65,171,93]},{index:.5,rgb:[116,196,118]},{index:.625,rgb:[161,217,155]},{index:.75,rgb:[199,233,192]},{index:.875,rgb:[229,245,224]},{index:1,rgb:[247,252,245]}],yiorrd:[{index:0,
rgb:[128,0,38]},{index:.125,rgb:[189,0,38]},{index:.25,rgb:[227,26,28]},{index:.375,rgb:[252,78,42]},{index:.5,rgb:[253,141,60]},{index:.625,rgb:[254,178,76]},{index:.75,rgb:[254,217,118]},{index:.875,rgb:[255,237,160]},{index:1,rgb:[255,255,204]}],bluered:[{index:0,rgb:[0,0,255]},{index:1,rgb:[255,0,0]}],rdbu:[{index:0,rgb:[5,10,172]},{index:.35,rgb:[106,137,247]},{index:.5,rgb:[190,190,190]},{index:.6,rgb:[220,170,132]},{index:.7,rgb:[230,145,90]},{index:1,rgb:[178,10,28]}],picnic:[{index:0,rgb:[0,
0,255]},{index:.1,rgb:[51,153,255]},{index:.2,rgb:[102,204,255]},{index:.3,rgb:[153,204,255]},{index:.4,rgb:[204,204,255]},{index:.5,rgb:[255,255,255]},{index:.6,rgb:[255,204,255]},{index:.7,rgb:[255,153,255]},{index:.8,rgb:[255,102,204]},{index:.9,rgb:[255,102,102]},{index:1,rgb:[255,0,0]}],rainbow:[{index:0,rgb:[150,0,90]},{index:.125,rgb:[0,0,200]},{index:.25,rgb:[0,25,255]},{index:.375,rgb:[0,152,255]},{index:.5,rgb:[44,255,150]},{index:.625,rgb:[151,255,0]},{index:.75,rgb:[255,234,0]},{index:.875,
rgb:[255,111,0]},{index:1,rgb:[255,0,0]}],portland:[{index:0,rgb:[12,51,131]},{index:.25,rgb:[10,136,186]},{index:.5,rgb:[242,211,56]},{index:.75,rgb:[242,143,56]},{index:1,rgb:[217,30,30]}],blackbody:[{index:0,rgb:[0,0,0]},{index:.2,rgb:[230,0,0]},{index:.4,rgb:[230,210,0]},{index:.7,rgb:[255,255,255]},{index:1,rgb:[160,200,255]}],earth:[{index:0,rgb:[0,0,130]},{index:.1,rgb:[0,180,180]},{index:.2,rgb:[40,210,40]},{index:.4,rgb:[230,230,50]},{index:.6,rgb:[120,70,20]},{index:1,rgb:[255,255,255]}],
electric:[{index:0,rgb:[0,0,0]},{index:.15,rgb:[30,0,100]},{index:.4,rgb:[120,0,100]},{index:.6,rgb:[160,90,0]},{index:.8,rgb:[230,200,0]},{index:1,rgb:[255,250,220]}],alpha:[{index:0,rgb:[255,255,255,0]},{index:1,rgb:[255,255,255,1]}],viridis:[{index:0,rgb:[68,1,84]},{index:.13,rgb:[71,44,122]},{index:.25,rgb:[59,81,139]},{index:.38,rgb:[44,113,142]},{index:.5,rgb:[33,144,141]},{index:.63,rgb:[39,173,129]},{index:.75,rgb:[92,200,99]},{index:.88,rgb:[170,220,50]},{index:1,rgb:[253,231,37]}],inferno:[{index:0,
rgb:[0,0,4]},{index:.13,rgb:[31,12,72]},{index:.25,rgb:[85,15,109]},{index:.38,rgb:[136,34,106]},{index:.5,rgb:[186,54,85]},{index:.63,rgb:[227,89,51]},{index:.75,rgb:[249,140,10]},{index:.88,rgb:[249,201,50]},{index:1,rgb:[252,255,164]}],magma:[{index:0,rgb:[0,0,4]},{index:.13,rgb:[28,16,68]},{index:.25,rgb:[79,18,123]},{index:.38,rgb:[129,37,129]},{index:.5,rgb:[181,54,122]},{index:.63,rgb:[229,80,100]},{index:.75,rgb:[251,135,97]},{index:.88,rgb:[254,194,135]},{index:1,rgb:[252,253,191]}],plasma:[{index:0,
rgb:[13,8,135]},{index:.13,rgb:[75,3,161]},{index:.25,rgb:[125,3,168]},{index:.38,rgb:[168,34,150]},{index:.5,rgb:[203,70,121]},{index:.63,rgb:[229,107,93]},{index:.75,rgb:[248,148,65]},{index:.88,rgb:[253,195,40]},{index:1,rgb:[240,249,33]}],warm:[{index:0,rgb:[125,0,179]},{index:.13,rgb:[172,0,187]},{index:.25,rgb:[219,0,170]},{index:.38,rgb:[255,0,130]},{index:.5,rgb:[255,63,74]},{index:.63,rgb:[255,123,0]},{index:.75,rgb:[234,176,0]},{index:.88,rgb:[190,228,0]},{index:1,rgb:[147,255,0]}],cool:[{index:0,
rgb:[125,0,179]},{index:.13,rgb:[116,0,218]},{index:.25,rgb:[98,74,237]},{index:.38,rgb:[68,146,231]},{index:.5,rgb:[0,204,197]},{index:.63,rgb:[0,247,146]},{index:.75,rgb:[0,255,88]},{index:.88,rgb:[40,255,8]},{index:1,rgb:[147,255,0]}],"rainbow-soft":[{index:0,rgb:[125,0,179]},{index:.1,rgb:[199,0,180]},{index:.2,rgb:[255,0,121]},{index:.3,rgb:[255,108,0]},{index:.4,rgb:[222,194,0]},{index:.5,rgb:[150,255,0]},{index:.6,rgb:[0,255,55]},{index:.7,rgb:[0,246,150]},{index:.8,rgb:[50,167,222]},{index:.9,
rgb:[103,51,235]},{index:1,rgb:[124,0,186]}],bathymetry:[{index:0,rgb:[40,26,44]},{index:.13,rgb:[59,49,90]},{index:.25,rgb:[64,76,139]},{index:.38,rgb:[63,110,151]},{index:.5,rgb:[72,142,158]},{index:.63,rgb:[85,174,163]},{index:.75,rgb:[120,206,163]},{index:.88,rgb:[187,230,172]},{index:1,rgb:[253,254,204]}],cdom:[{index:0,rgb:[47,15,62]},{index:.13,rgb:[87,23,86]},{index:.25,rgb:[130,28,99]},{index:.38,rgb:[171,41,96]},{index:.5,rgb:[206,67,86]},{index:.63,rgb:[230,106,84]},{index:.75,rgb:[242,
149,103]},{index:.88,rgb:[249,193,135]},{index:1,rgb:[254,237,176]}],chlorophyll:[{index:0,rgb:[18,36,20]},{index:.13,rgb:[25,63,41]},{index:.25,rgb:[24,91,59]},{index:.38,rgb:[13,119,72]},{index:.5,rgb:[18,148,80]},{index:.63,rgb:[80,173,89]},{index:.75,rgb:[132,196,122]},{index:.88,rgb:[175,221,162]},{index:1,rgb:[215,249,208]}],density:[{index:0,rgb:[54,14,36]},{index:.13,rgb:[89,23,80]},{index:.25,rgb:[110,45,132]},{index:.38,rgb:[120,77,178]},{index:.5,rgb:[120,113,213]},{index:.63,rgb:[115,
151,228]},{index:.75,rgb:[134,185,227]},{index:.88,rgb:[177,214,227]},{index:1,rgb:[230,241,241]}],"freesurface-blue":[{index:0,rgb:[30,4,110]},{index:.13,rgb:[47,14,176]},{index:.25,rgb:[41,45,236]},{index:.38,rgb:[25,99,212]},{index:.5,rgb:[68,131,200]},{index:.63,rgb:[114,156,197]},{index:.75,rgb:[157,181,203]},{index:.88,rgb:[200,208,216]},{index:1,rgb:[241,237,236]}],"freesurface-red":[{index:0,rgb:[60,9,18]},{index:.13,rgb:[100,17,27]},{index:.25,rgb:[142,20,29]},{index:.38,rgb:[177,43,27]},
{index:.5,rgb:[192,87,63]},{index:.63,rgb:[205,125,105]},{index:.75,rgb:[216,162,148]},{index:.88,rgb:[227,199,193]},{index:1,rgb:[241,237,236]}],oxygen:[{index:0,rgb:[64,5,5]},{index:.13,rgb:[106,6,15]},{index:.25,rgb:[144,26,7]},{index:.38,rgb:[168,64,3]},{index:.5,rgb:[188,100,4]},{index:.63,rgb:[206,136,11]},{index:.75,rgb:[220,174,25]},{index:.88,rgb:[231,215,44]},{index:1,rgb:[248,254,105]}],par:[{index:0,rgb:[51,20,24]},{index:.13,rgb:[90,32,35]},{index:.25,rgb:[129,44,34]},{index:.38,rgb:[159,
68,25]},{index:.5,rgb:[182,99,19]},{index:.63,rgb:[199,134,22]},{index:.75,rgb:[212,171,35]},{index:.88,rgb:[221,210,54]},{index:1,rgb:[225,253,75]}],phase:[{index:0,rgb:[145,105,18]},{index:.13,rgb:[184,71,38]},{index:.25,rgb:[186,58,115]},{index:.38,rgb:[160,71,185]},{index:.5,rgb:[110,97,218]},{index:.63,rgb:[50,123,164]},{index:.75,rgb:[31,131,110]},{index:.88,rgb:[77,129,34]},{index:1,rgb:[145,105,18]}],salinity:[{index:0,rgb:[42,24,108]},{index:.13,rgb:[33,50,162]},{index:.25,rgb:[15,90,145]},
{index:.38,rgb:[40,118,137]},{index:.5,rgb:[59,146,135]},{index:.63,rgb:[79,175,126]},{index:.75,rgb:[120,203,104]},{index:.88,rgb:[193,221,100]},{index:1,rgb:[253,239,154]}],temperature:[{index:0,rgb:[4,35,51]},{index:.13,rgb:[23,51,122]},{index:.25,rgb:[85,59,157]},{index:.38,rgb:[129,79,143]},{index:.5,rgb:[175,95,130]},{index:.63,rgb:[222,112,101]},{index:.75,rgb:[249,146,66]},{index:.88,rgb:[249,196,65]},{index:1,rgb:[232,250,91]}],turbidity:[{index:0,rgb:[34,31,27]},{index:.13,rgb:[65,50,41]},
{index:.25,rgb:[98,69,52]},{index:.38,rgb:[131,89,57]},{index:.5,rgb:[161,112,59]},{index:.63,rgb:[185,140,66]},{index:.75,rgb:[202,174,88]},{index:.88,rgb:[216,209,126]},{index:1,rgb:[233,246,171]}],"velocity-blue":[{index:0,rgb:[17,32,64]},{index:.13,rgb:[35,52,116]},{index:.25,rgb:[29,81,156]},{index:.38,rgb:[31,113,162]},{index:.5,rgb:[50,144,169]},{index:.63,rgb:[87,173,176]},{index:.75,rgb:[149,196,189]},{index:.88,rgb:[203,221,211]},{index:1,rgb:[254,251,230]}],"velocity-green":[{index:0,rgb:[23,
35,19]},{index:.13,rgb:[24,64,38]},{index:.25,rgb:[11,95,45]},{index:.38,rgb:[39,123,35]},{index:.5,rgb:[95,146,12]},{index:.63,rgb:[152,165,18]},{index:.75,rgb:[201,186,69]},{index:.88,rgb:[233,216,137]},{index:1,rgb:[255,253,205]}],cubehelix:[{index:0,rgb:[0,0,0]},{index:.07,rgb:[22,5,59]},{index:.13,rgb:[60,4,105]},{index:.2,rgb:[109,1,135]},{index:.27,rgb:[161,0,147]},{index:.33,rgb:[210,2,142]},{index:.4,rgb:[251,11,123]},{index:.47,rgb:[255,29,97]},{index:.53,rgb:[255,54,69]},{index:.6,rgb:[255,
85,46]},{index:.67,rgb:[255,120,34]},{index:.73,rgb:[255,157,37]},{index:.8,rgb:[241,191,57]},{index:.87,rgb:[224,220,93]},{index:.93,rgb:[218,241,142]},{index:1,rgb:[227,253,198]}]}},{}],131:[function(b,N,I){function r(h){return[h[0]/255,h[1]/255,h[2]/255,h[3]]}function q(h){for(var g,n="#",p=0;3>p;++p)g=h[p],g=g.toString(16),n+=("00"+g).substr(g.length);return n}function m(h){return"rgba("+h.join(",")+")"}var l=b("./colorScale"),a=b("lerp");N.exports=function(h){var g,n;h||(h={});var p=(h.nshades||
72)-1;var d=h.format||"hex";(g=h.colormap)||(g="jet");if("string"===typeof g){g=g.toLowerCase();if(!l[g])throw Error(g+" not a supported colorscale");var e=l[g]}else if(Array.isArray(g))e=g.slice();else throw Error("unsupported colormap option",g);if(e.length>p+1)throw Error(g+" map requires nshades to be at least size "+e.length);var f=Array.isArray(h.alpha)?2!==h.alpha.length?[1,1]:h.alpha.slice():"number"===typeof h.alpha?[h.alpha,h.alpha]:[1,1];h=e.map(function(A){return Math.round(A.index*p)});
f[0]=Math.min(Math.max(f[0],0),1);f[1]=Math.min(Math.max(f[1],0),1);var k=e.map(function(A,z){A=e[z].index;z=e[z].rgb.slice();if(4===z.length&&0<=z[3]&&1>=z[3])return z;z[3]=f[0]+(f[1]-f[0])*A;return z});var t=[];for(n=0;n<h.length-1;++n){var v=h[n+1]-h[n];g=k[n];var w=k[n+1];for(var y=0;y<v;y++){var B=y/v;t.push([Math.round(a(g[0],w[0],B)),Math.round(a(g[1],w[1],B)),Math.round(a(g[2],w[2],B)),a(g[3],w[3],B)])}}t.push(e[e.length-1].rgb.concat(f[1]));"hex"===d?t=t.map(q):"rgbaString"===d?t=t.map(m):
"float"===d&&(t=t.map(r));return t}},{"./colorScale":130,lerp:472}],132:[function(b,N,I){function r(g,n,p){var d=l(g[0],-n[0]);g=l(g[1],-n[1]);var e=l(p[0],-n[0]);n=l(p[1],-n[1]);d=h(a(d,e),a(g,n));return 0<=d[d.length-1]}N.exports=function(g,n,p,d){var e=q(n,p,d);if(0===e){e=m(q(g,n,p));var f=m(q(g,n,d));return e===f?0===e&&(p=r(g,n,p),g=r(g,n,d),p!==g)?p?1:-1:0:0===f?0<e?-1:r(g,n,d)?-1:1:0===e?0<f?1:r(g,n,p)?1:-1:m(f-e)}f=q(g,n,p);return 0<f?0<e&&0<q(g,n,d)?1:-1:0>f?0<e||0<q(g,n,d)?1:-1:0<q(g,n,
d)?1:r(g,n,p)?1:-1};var q=b("robust-orientation"),m=b("signum"),l=b("two-sum"),a=b("robust-product"),h=b("robust-sum")},{"robust-orientation":548,"robust-product":549,"robust-sum":553,signum:554,"two-sum":583}],133:[function(b,N,I){function r(m,l){return m-l}N.exports=function(m,l){var a=m.length,h=m.length-l.length;if(h)return h;switch(a){case 0:return 0;case 1:return m[0]-l[0];case 2:return m[0]+m[1]-l[0]-l[1]||q(m[0],m[1])-q(l[0],l[1]);case 3:a=m[0]+m[1];var g=l[0]+l[1];if(h=a+m[2]-(g+l[2]))return h;
h=q(m[0],m[1]);var n=q(l[0],l[1]);return q(h,m[2])-q(n,l[2])||q(h+m[2],a)-q(n+l[2],g);case 4:h=m[0];a=m[1];g=m[2];m=m[3];n=l[0];var p=l[1],d=l[2];l=l[3];return h+a+g+m-(n+p+d+l)||q(h,a,g,m)-q(n,p,d,l,n)||q(h+a,h+g,h+m,a+g,a+m,g+m)-q(n+p,n+d,n+l,p+d,p+l,d+l)||q(h+a+g,h+a+m,h+g+m,a+g+m)-q(n+p+d,n+p+l,n+d+l,p+d+l);default:m=m.slice().sort(r);l=l.slice().sort(r);for(g=0;g<a;++g)if(h=m[g]-l[g])return h;return 0}};var q=Math.min},{}],134:[function(b,N,I){var r=b("compare-cell"),q=b("cell-orientation");
N.exports=function(m,l){return r(m,l)||q(m)-q(l)}},{"cell-orientation":117,"compare-cell":133}],135:[function(b,N,I){var r=b("./lib/ch1d"),q=b("./lib/ch2d"),m=b("./lib/chnd");N.exports=function(l){var a=l.length;if(0===a)return[];if(1===a)return[[0]];a=l[0].length;return 0===a?[]:1===a?r(l):2===a?q(l):m(l,a)}},{"./lib/ch1d":136,"./lib/ch2d":137,"./lib/chnd":138}],136:[function(b,N,I){N.exports=function(r){for(var q=0,m=0,l=1;l<r.length;++l)r[l][0]<r[q][0]&&(q=l),r[l][0]>r[m][0]&&(m=l);return q<m?
[[q],[m]]:q>m?[[m],[q]]:[[q]]}},{}],137:[function(b,N,I){N.exports=function(q){q=r(q);var m=q.length;if(2>=m)return[];for(var l=Array(m),a=q[m-1],h=0;h<m;++h){var g=q[h];l[h]=[a,g];a=g}return l};var r=b("monotone-convex-hull-2d")},{"monotone-convex-hull-2d":482}],138:[function(b,N,I){N.exports=function(m,l){try{return r(m,!0)}catch(f){var a=q(m);if(a.length<=l)return[];l=m.length;for(var h=Array(l),g=0;g<a.length;++g)h[g]=m[a[g]];var n=a.length;for(g=0;g<l;++g)0>a.indexOf(g)&&(h[n++]=m[g]);m=r(h,
!0);l=m.length;h=a.length;for(g=0;g<l;++g){n=m[g];for(var p=0;p<n.length;++p){var d=n[p];if(d<h)n[p]=a[d];else{d-=h;for(var e=0;e<h;++e)d>=a[e]&&(d+=1);n[p]=d}}}return m}};var r=b("incremental-convex-hull"),q=b("affine-hull")},{"affine-hull":67,"incremental-convex-hull":459}],139:[function(b,N,I){N.exports={AFG:"afghan",ALA:"\\b\\wland",ALB:"albania",DZA:"algeria",ASM:"^(?\x3d.*americ).*samoa",AND:"andorra",AGO:"angola",AIA:"anguill?a",ATA:"antarctica",ATG:"antigua",ARG:"argentin",ARM:"armenia",ABW:"^(?!.*bonaire).*\\baruba",
AUS:"australia",AUT:"^(?!.*hungary).*austria|\\baustri.*\\bemp",AZE:"azerbaijan",BHS:"bahamas",BHR:"bahrain",BGD:"bangladesh|^(?\x3d.*east).*paki?stan",BRB:"barbados",BLR:"belarus|byelo",BEL:"^(?!.*luxem).*belgium",BLZ:"belize|^(?\x3d.*british).*honduras",BEN:"benin|dahome",BMU:"bermuda",BTN:"bhutan",BOL:"bolivia",BES:"^(?\x3d.*bonaire).*eustatius|^(?\x3d.*carib).*netherlands|\\bbes.?islands",BIH:"herzegovina|bosnia",BWA:"botswana|bechuana",BVT:"bouvet",BRA:"brazil",IOT:"british.?indian.?ocean",BRN:"brunei",
BGR:"bulgaria",BFA:"burkina|\\bfaso|upper.?volta",BDI:"burundi",CPV:"verde",KHM:"cambodia|kampuchea|khmer",CMR:"cameroon",CAN:"canada",CYM:"cayman",CAF:"\\bcentral.african.republic",TCD:"\\bchad",CHL:"\\bchile",CHN:"^(?!.*\\bmac)(?!.*\\bhong)(?!.*\\btai)(?!.*\\brep).*china|^(?\x3d.*peo)(?\x3d.*rep).*china",CXR:"christmas",CCK:"\\bcocos|keeling",COL:"colombia",COM:"comoro",COG:"^(?!.*\\bdem)(?!.*\\bd[\\.]?r)(?!.*kinshasa)(?!.*zaire)(?!.*belg)(?!.*l.opoldville)(?!.*free).*\\bcongo",COK:"\\bcook",CRI:"costa.?rica",
CIV:"ivoire|ivory",HRV:"croatia",CUB:"\\bcuba",CUW:"^(?!.*bonaire).*\\bcura(c|)ao",CYP:"cyprus",CSK:"czechoslovakia",CZE:"^(?\x3d.*rep).*czech|czechia|bohemia",COD:"\\bdem.*congo|congo.*\\bdem|congo.*\\bd[\\.]?r|\\bd[\\.]?r.*congo|belgian.?congo|congo.?free.?state|kinshasa|zaire|l.opoldville|drc|droc|rdc",DNK:"denmark",DJI:"djibouti",DMA:"dominica(?!n)",DOM:"dominican.rep",ECU:"ecuador",EGY:"egypt",SLV:"el.?salvador",GNQ:"guine.*eq|eq.*guine|^(?\x3d.*span).*guinea",ERI:"eritrea",EST:"estonia",ETH:"ethiopia|abyssinia",
FLK:"falkland|malvinas",FRO:"faroe|faeroe",FJI:"fiji",FIN:"finland",FRA:"^(?!.*\\bdep)(?!.*martinique).*france|french.?republic|\\bgaul",GUF:"^(?\x3d.*french).*guiana",PYF:"french.?polynesia|tahiti",ATF:"french.?southern",GAB:"gabon",GMB:"gambia",GEO:"^(?!.*south).*georgia",DDR:"german.?democratic.?republic|democratic.?republic.*germany|east.germany",DEU:"^(?!.*east).*germany|^(?\x3d.*\\bfed.*\\brep).*german",GHA:"ghana|gold.?coast",GIB:"gibraltar",GRC:"greece|hellenic|hellas",GRL:"greenland",GRD:"grenada",
GLP:"guadeloupe",GUM:"\\bguam",GTM:"guatemala",GGY:"guernsey",GIN:"^(?!.*eq)(?!.*span)(?!.*bissau)(?!.*portu)(?!.*new).*guinea",GNB:"bissau|^(?\x3d.*portu).*guinea",GUY:"guyana|british.?guiana",HTI:"haiti",HMD:"heard.*mcdonald",VAT:"holy.?see|vatican|papal.?st",HND:"^(?!.*brit).*honduras",HKG:"hong.?kong",HUN:"^(?!.*austr).*hungary",ISL:"iceland",IND:"india(?!.*ocea)",IDN:"indonesia",IRN:"\\biran|persia",IRQ:"\\biraq|mesopotamia",IRL:"(^ireland)|(^republic.*ireland)",IMN:"^(?\x3d.*isle).*\\bman",
ISR:"israel",ITA:"italy",JAM:"jamaica",JPN:"japan",JEY:"jersey",JOR:"jordan",KAZ:"kazak",KEN:"kenya|british.?east.?africa|east.?africa.?prot",KIR:"kiribati",PRK:"^(?\x3d.*democrat|people|north|d.*p.*.r).*\\bkorea|dprk|korea.*(d.*p.*r)",KWT:"kuwait",KGZ:"kyrgyz|kirghiz",LAO:"\\blaos?\\b",LVA:"latvia",LBN:"lebanon",LSO:"lesotho|basuto",LBR:"liberia",LBY:"libya",LIE:"liechtenstein",LTU:"lithuania",LUX:"^(?!.*belg).*luxem",MAC:"maca(o|u)",MDG:"madagascar|malagasy",MWI:"malawi|nyasa",MYS:"malaysia",MDV:"maldive",
MLI:"\\bmali\\b",MLT:"\\bmalta",MHL:"marshall",MTQ:"martinique",MRT:"mauritania",MUS:"mauritius",MYT:"\\bmayotte",MEX:"\\bmexic",FSM:"fed.*micronesia|micronesia.*fed",MCO:"monaco",MNG:"mongolia",MNE:"^(?!.*serbia).*montenegro",MSR:"montserrat",MAR:"morocco|\\bmaroc",MOZ:"mozambique",MMR:"myanmar|burma",NAM:"namibia",NRU:"nauru",NPL:"nepal",NLD:"^(?!.*\\bant)(?!.*\\bcarib).*netherlands",ANT:"^(?\x3d.*\\bant).*(nether|dutch)",NCL:"new.?caledonia",NZL:"new.?zealand",NIC:"nicaragua",NER:"\\bniger(?!ia)",
NGA:"nigeria",NIU:"niue",NFK:"norfolk",MNP:"mariana",NOR:"norway",OMN:"\\boman|trucial",PAK:"^(?!.*east).*paki?stan",PLW:"palau",PSE:"palestin|\\bgaza|west.?bank",PAN:"panama",PNG:"papua|new.?guinea",PRY:"paraguay",PER:"peru",PHL:"philippines",PCN:"pitcairn",POL:"poland",PRT:"portugal",PRI:"puerto.?rico",QAT:"qatar",KOR:"^(?!.*d.*p.*r)(?!.*democrat)(?!.*people)(?!.*north).*\\bkorea(?!.*d.*p.*r)",MDA:"moldov|b(a|e)ssarabia",REU:"r(e|)union",ROU:"r(o|u|ou)mania",RUS:"\\brussia|soviet.?union|u\\.?s\\.?s\\.?r|socialist.?republics",
RWA:"rwanda",BLM:"barth(e|)lemy",SHN:"helena",KNA:"kitts|\\bnevis",LCA:"\\blucia",MAF:"^(?\x3d.*collectivity).*martin|^(?\x3d.*france).*martin(?!ique)|^(?\x3d.*french).*martin(?!ique)",SPM:"miquelon",VCT:"vincent",WSM:"^(?!.*amer).*samoa",SMR:"san.?marino",STP:"\\bs(a|)o.?tom(e|)",SAU:"\\bsa\\w*.?arabia",SEN:"senegal",SRB:"^(?!.*monte).*serbia",SYC:"seychell",SLE:"sierra",SGP:"singapore",SXM:"^(?!.*martin)(?!.*saba).*maarten",SVK:"^(?!.*cze).*slovak",SVN:"slovenia",SLB:"solomon",SOM:"somali",ZAF:"south.africa|s\\\\..?africa",
SGS:"south.?georgia|sandwich",SSD:"\\bs\\w*.?sudan",ESP:"spain",LKA:"sri.?lanka|ceylon",SDN:"^(?!.*\\bs(?!u)).*sudan",SUR:"surinam|dutch.?guiana",SJM:"svalbard",SWZ:"swaziland",SWE:"sweden",CHE:"switz|swiss",SYR:"syria",TWN:"taiwan|taipei|formosa|^(?!.*peo)(?\x3d.*rep).*china",TJK:"tajik",THA:"thailand|\\bsiam",MKD:"macedonia|fyrom",TLS:"^(?\x3d.*leste).*timor|^(?\x3d.*east).*timor",TGO:"togo",TKL:"tokelau",TON:"tonga",TTO:"trinidad|tobago",TUN:"tunisia",TUR:"turkey",TKM:"turkmen",TCA:"turks",TUV:"tuvalu",
UGA:"uganda",UKR:"ukrain",ARE:"emirates|^u\\.?a\\.?e\\.?$|united.?arab.?em",GBR:"united.?kingdom|britain|^u\\.?k\\.?$",TZA:"tanzania",USA:"united.?states\\b(?!.*islands)|\\bu\\.?s\\.?a\\.?\\b|^\\s*u\\.?s\\.?\\b(?!.*islands)",UMI:"minor.?outlying.?is",URY:"uruguay",UZB:"uzbek",VUT:"vanuatu|new.?hebrides",VEN:"venezuela",VNM:"^(?!.*republic).*viet.?nam|^(?\x3d.*socialist).*viet.?nam",VGB:"^(?\x3d.*\\bu\\.?\\s?k).*virgin|^(?\x3d.*brit).*virgin|^(?\x3d.*kingdom).*virgin",VIR:"^(?\x3d.*\\bu\\.?\\s?s).*virgin|^(?\x3d.*states).*virgin",
WLF:"futuna|wallis",ESH:"western.sahara",YEM:"^(?!.*arab)(?!.*north)(?!.*sana)(?!.*peo)(?!.*dem)(?!.*south)(?!.*aden)(?!.*\\bp\\.?d\\.?r).*yemen",YMD:"^(?\x3d.*peo).*yemen|^(?!.*rep)(?\x3d.*dem).*yemen|^(?\x3d.*south).*yemen|^(?\x3d.*aden).*yemen|^(?\x3d.*\\bp\\.?d\\.?r).*yemen",YUG:"yugoslavia",ZMB:"zambia|northern.?rhodesia",EAZ:"zanzibar",ZWE:"zimbabwe|^(?!.*northern).*rhodesia"}},{}],140:[function(b,N,I){N.exports="xx-small x-small small medium large x-large xx-large larger smaller".split(" ")},
{}],141:[function(b,N,I){N.exports="normal condensed semi-condensed extra-condensed ultra-condensed expanded semi-expanded extra-expanded ultra-expanded".split(" ")},{}],142:[function(b,N,I){N.exports=["normal","italic","oblique"]},{}],143:[function(b,N,I){N.exports="normal bold bolder lighter 100 200 300 400 500 600 700 800 900".split(" ")},{}],144:[function(b,N,I){N.exports={parse:b("./parse"),stringify:b("./stringify")}},{"./parse":146,"./stringify":147}],145:[function(b,N,I){var r=b("css-font-size-keywords");
N.exports={isSize:function(q){return/^[\d\.]/.test(q)||-1!==q.indexOf("/")||-1!==r.indexOf(q)}}},{"css-font-size-keywords":140}],146:[function(b,N,I){function r(f){if("string"!==typeof f)throw Error("Font argument must be a string.");if(e[f])return e[f];if(""===f)throw Error("Cannot parse an empty string.");if(-1!==a.indexOf(f))return e[f]={system:f};for(var k={style:"normal",variant:"normal",weight:"normal",stretch:"normal",lineHeight:"normal",size:"1rem",family:["serif"]},t=p(f,/\s+/),v;v=t.shift();){if(-1!==
l.indexOf(v))return["style","variant","weight","stretch"].forEach(function(y){k[y]=v}),e[f]=k;if(-1!==g.indexOf(v))k.style=v;else if("normal"===v||"small-caps"===v)k.variant=v;else if(-1!==n.indexOf(v))k.stretch=v;else if(-1!==h.indexOf(v))k.weight=v;else{if(d(v)){var w=p(v,"/");k.size=w[0];null!=w[1]?k.lineHeight=q(w[1]):"/"===t[0]&&(t.shift(),k.lineHeight=q(t.shift()));if(!t.length)throw Error("Missing required font-family.");k.family=p(t.join(" "),/\s*,\s*/).map(m);return e[f]=k}throw Error("Unknown or unsupported font token: "+
v);}}throw Error("Missing required font-size.");}function q(f){var k=parseFloat(f);return k.toString()===f?k:f}var m=b("unquote"),l=b("css-global-keywords"),a=b("css-system-font-keywords"),h=b("css-font-weight-keywords"),g=b("css-font-style-keywords"),n=b("css-font-stretch-keywords"),p=b("string-split-by"),d=b("./lib/util").isSize;N.exports=r;var e=r.cache={}},{"./lib/util":145,"css-font-stretch-keywords":141,"css-font-style-keywords":142,"css-font-weight-keywords":143,"css-global-keywords":148,"css-system-font-keywords":149,
"string-split-by":568,unquote:598}],147:[function(b,N,I){function r(f,k){if(f&&!k[f]&&!a[f])throw Error("Unknown keyword `"+f+"`");return f}function q(f){for(var k={},t=0;t<f.length;t++)k[f[t]]=1;return k}var m=b("pick-by-alias"),l=b("./lib/util").isSize,a=q(b("css-global-keywords")),h=q(b("css-system-font-keywords")),g=q(b("css-font-weight-keywords")),n=q(b("css-font-style-keywords")),p=q(b("css-font-stretch-keywords")),d={normal:1,"small-caps":1},e={serif:1,"sans-serif":1,monospace:1,cursive:1,
fantasy:1,"system-ui":1};N.exports=function(f){f=m(f,{style:"style fontstyle fontStyle font-style slope distinction",variant:"variant font-variant fontVariant fontvariant var capitalization",weight:"weight w font-weight fontWeight fontweight",stretch:"stretch font-stretch fontStretch fontstretch width",size:"size s font-size fontSize fontsize height em emSize",lineHeight:"lh line-height lineHeight lineheight leading",family:"font family fontFamily font-family fontfamily type typeface face",system:"system reserved default global"});
if(f.system)return f.system&&r(f.system,h),f.system;r(f.style,n);r(f.variant,d);r(f.weight,g);r(f.stretch,p);null==f.size&&(f.size="1rem");"number"===typeof f.size&&(f.size+="px");if(!l)throw Error("Bad size value `"+f.size+"`");f.family||(f.family="serif");Array.isArray(f.family)&&(f.family.length||(f.family=["serif"]),f.family=f.family.map(function(t){return e[t]?t:'"'+t+'"'}).join(", "));var k=[];k.push(f.style);f.variant!==f.style&&k.push(f.variant);f.weight!==f.variant&&f.weight!==f.style&&k.push(f.weight);
f.stretch!==f.weight&&f.stretch!==f.variant&&f.stretch!==f.style&&k.push(f.stretch);k.push(f.size+(null==f.lineHeight||"normal"===f.lineHeight||"1"===f.lineHeight+""?"":"/"+f.lineHeight));k.push(f.family);return k.filter(Boolean).join(" ")}},{"./lib/util":145,"css-font-stretch-keywords":141,"css-font-style-keywords":142,"css-font-weight-keywords":143,"css-global-keywords":148,"css-system-font-keywords":149,"pick-by-alias":511}],148:[function(b,N,I){N.exports=["inherit","initial","unset"]},{}],149:[function(b,
N,I){N.exports="caption icon menu message-box small-caption status-bar".split(" ")},{}],150:[function(b,N,I){N.exports=function(r,q,m,l,a,h){var g=a-1,n=a*a,p=g*g,d=(1+2*a)*p;p*=a;a=n*(3-2*a);g*=n;if(r.length){h||(h=Array(r.length));for(n=r.length-1;0<=n;--n)h[n]=d*r[n]+p*q[n]+a*m[n]+g*l[n];return h}return d*r+p*q+a*m+g*l};N.exports.derivative=function(r,q,m,l,a,h){var g=6*a*a-6*a,n=3*a*a-4*a+1,p=-6*a*a+6*a;a=3*a*a-2*a;if(r.length){h||(h=Array(r.length));for(var d=r.length-1;0<=d;--d)h[d]=g*r[d]+
n*q[d]+p*m[d]+a*l[d];return h}return g*r+n*q+p*m[d]+a*l}},{}],151:[function(b,N,I){function r(){this.argTypes=[];this.shimArgs=[];this.arrayArgs=[];this.arrayBlockIndices=[];this.scalarArgs=[];this.offsetArgs=[];this.offsetArgIndex=[];this.indexArgs=[];this.shapeArgs=[];this.funcName="";this.post=this.body=this.pre=null;this.debug=!1}var q=b("./lib/thunk.js");N.exports=function(m){var l=new r;l.pre=m.pre;l.body=m.body;l.post=m.post;var a=m.args.slice(0);l.argTypes=a;for(var h=0;h<a.length;++h){var g=
a[h];if("array"===g||"object"===typeof g&&g.blockIndices){l.argTypes[h]="array";l.arrayArgs.push(h);l.arrayBlockIndices.push(g.blockIndices?g.blockIndices:0);l.shimArgs.push("array"+h);if(h<l.pre.args.length&&0<l.pre.args[h].count)throw Error("cwise: pre() block may not reference array args");if(h<l.post.args.length&&0<l.post.args[h].count)throw Error("cwise: post() block may not reference array args");}else if("scalar"===g)l.scalarArgs.push(h),l.shimArgs.push("scalar"+h);else if("index"===g){l.indexArgs.push(h);
if(h<l.pre.args.length&&0<l.pre.args[h].count)throw Error("cwise: pre() block may not reference array index");if(h<l.body.args.length&&l.body.args[h].lvalue)throw Error("cwise: body() block may not write to array index");if(h<l.post.args.length&&0<l.post.args[h].count)throw Error("cwise: post() block may not reference array index");}else if("shape"===g){l.shapeArgs.push(h);if(h<l.pre.args.length&&l.pre.args[h].lvalue)throw Error("cwise: pre() block may not write to array shape");if(h<l.body.args.length&&
l.body.args[h].lvalue)throw Error("cwise: body() block may not write to array shape");if(h<l.post.args.length&&l.post.args[h].lvalue)throw Error("cwise: post() block may not write to array shape");}else if("object"===typeof g&&g.offset)l.argTypes[h]="offset",l.offsetArgs.push({array:g.array,offset:g.offset}),l.offsetArgIndex.push(h);else throw Error("cwise: Unknown argument type "+a[h]);}if(0>=l.arrayArgs.length)throw Error("cwise: No array arguments specified");if(l.pre.args.length>a.length)throw Error("cwise: Too many arguments in pre() block");
if(l.body.args.length>a.length)throw Error("cwise: Too many arguments in body() block");if(l.post.args.length>a.length)throw Error("cwise: Too many arguments in post() block");l.debug=!!m.printCode||!!m.debug;l.funcName=m.funcName||"cwise";l.blockSize=m.blockSize||64;return q(l)}},{"./lib/thunk.js":153}],152:[function(b,N,I){function r(l,a,h){var g=l.length,n=a.arrayArgs.length;a=0<a.indexArgs.length;var p=[],d=[],e=0,f,k;for(f=0;f<g;++f)d.push(["i",f,"\x3d0"].join(""));for(k=0;k<n;++k)for(f=0;f<
g;++f){var t=e;e=l[f];0===f?d.push(["d",k,"s",f,"\x3dt",k,"p",e].join("")):d.push(["d",k,"s",f,"\x3d(t",k,"p",e,"-s",t,"*t",k,"p",t,")"].join(""))}0<d.length&&p.push("var "+d.join(","));for(f=g-1;0<=f;--f)e=l[f],p.push(["for(i",f,"\x3d0;i",f,"\x3cs",e,";++i",f,"){"].join(""));p.push(h);for(f=0;f<g;++f){t=e;e=l[f];for(k=0;k<n;++k)p.push(["p",k,"+\x3dd",k,"s",f].join(""));a&&(0<f&&p.push(["index[",t,"]-\x3ds",t].join("")),p.push(["++index[",e,"]"].join("")));p.push("}")}return p.join("\n")}function q(l,
a,h){for(var g=l.body,n=[],p=[],d=0;d<l.args.length;++d){var e=l.args[d];if(!(0>=e.count)){var f=new RegExp(e.name,"g"),k="",t=a.arrayArgs.indexOf(d);switch(a.argTypes[d]){case "offset":var v=a.offsetArgIndex.indexOf(d);t=a.offsetArgs[v].array;k="+q"+v;case "array":k="p"+t+k;var w="l"+d;v="a"+t;if(0===a.arrayBlockIndices[t])1===e.count?"generic"===h[t]?e.lvalue?(n.push(["var ",w,"\x3d",v,".get(",k,")"].join("")),g=g.replace(f,w),p.push([v,".set(",k,",",w,")"].join(""))):g=g.replace(f,[v,".get(",k,
")"].join("")):g=g.replace(f,[v,"[",k,"]"].join("")):"generic"===h[t]?(n.push(["var ",w,"\x3d",v,".get(",k,")"].join("")),g=g.replace(f,w),e.lvalue&&p.push([v,".set(",k,",",w,")"].join(""))):(n.push(["var ",w,"\x3d",v,"[",k,"]"].join("")),g=g.replace(f,w),e.lvalue&&p.push([v,"[",k,"]\x3d",w].join("")));else{f=[e.name];e=[k];for(k=0;k<Math.abs(a.arrayBlockIndices[t]);k++)f.push("\\s*\\[([^\\]]+)\\]"),e.push("$"+(k+1)+"*t"+t+"b"+k);f=new RegExp(f.join(""),"g");k=e.join("+");if("generic"===h[t])throw Error("cwise: Generic arrays not supported in combination with blocks!");
g=g.replace(f,[v,"[",k,"]"].join(""))}break;case "scalar":g=g.replace(f,"Y"+a.scalarArgs.indexOf(d));break;case "index":g=g.replace(f,"index");break;case "shape":g=g.replace(f,"shape")}}}return[n.join("\n"),g,p.join("\n")].join("\n").trim()}var m=b("uniq");N.exports=function(l,a){for(var h=a[1].length-Math.abs(l.arrayBlockIndices[0])|0,g=Array(l.arrayArgs.length),n=Array(l.arrayArgs.length),p=0;p<l.arrayArgs.length;++p)n[p]=a[2*p],g[p]=a[2*p+1];var d=[],e=[],f=[],k=[],t=[];for(p=0;p<l.arrayArgs.length;++p){0>
l.arrayBlockIndices[p]?(f.push(0),k.push(h),d.push(h),e.push(h+l.arrayBlockIndices[p])):(f.push(l.arrayBlockIndices[p]),k.push(l.arrayBlockIndices[p]+h),d.push(0),e.push(l.arrayBlockIndices[p]));for(var v=[],w=0;w<g[p].length;w++)f[p]<=g[p][w]&&g[p][w]<k[p]&&v.push(g[p][w]-f[p]);t.push(v)}e=["SS"];k=["'use strict'"];v=[];for(w=0;w<h;++w)v.push(["s",w,"\x3dSS[",w,"]"].join(""));for(p=0;p<l.arrayArgs.length;++p){e.push("a"+p);e.push("t"+p);e.push("p"+p);for(w=0;w<h;++w)v.push(["t",p,"p",w,"\x3dt",p,
"[",f[p]+w,"]"].join(""));for(w=0;w<Math.abs(l.arrayBlockIndices[p]);++w)v.push(["t",p,"b",w,"\x3dt",p,"[",d[p]+w,"]"].join(""))}for(p=0;p<l.scalarArgs.length;++p)e.push("Y"+p);0<l.shapeArgs.length&&v.push("shape\x3dSS.slice(0)");if(0<l.indexArgs.length){w=Array(h);for(p=0;p<h;++p)w[p]="0";v.push(["index\x3d[",w.join(","),"]"].join(""))}for(p=0;p<l.offsetArgs.length;++p){d=l.offsetArgs[p];f=[];for(w=0;w<d.offset.length;++w)0!==d.offset[w]&&(1===d.offset[w]?f.push(["t",d.array,"p",w].join("")):f.push([d.offset[w],
"*t",d.array,"p",w].join("")));0===f.length?v.push("q"+p+"\x3d0"):v.push(["q",p,"\x3d",f.join("+")].join(""))}p=m([].concat(l.pre.thisVars).concat(l.body.thisVars).concat(l.post.thisVars));v=v.concat(p);0<v.length&&k.push("var "+v.join(","));for(p=0;p<l.arrayArgs.length;++p)k.push("p"+p+"|\x3d0");3<l.pre.body.length&&k.push(q(l.pre,l,n));w=q(l.body,l,n);a:for(p=0,v=t[0].length;p<v;){for(d=1;d<t.length;++d)if(t[d][p]!==t[0][p])break a;++p}if(p<h){h=k.push;v=p;t=t[0];d=t.length;f=l.arrayArgs.length;
for(var y=l.blockSize,B=0<l.indexArgs.length,A=[],z=0;z<f;++z)A.push(["var offset",z,"\x3dp",z].join(""));for(z=v;z<d;++z)A.push(["for(var j"+z+"\x3dSS[",t[z],"]|0;j",z,"\x3e0;){"].join("")),A.push(["if(j",z,"\x3c",y,"){"].join("")),A.push(["s",t[z],"\x3dj",z].join("")),A.push(["j",z,"\x3d0"].join("")),A.push(["}else{s",t[z],"\x3d",y].join("")),A.push(["j",z,"-\x3d",y,"}"].join("")),B&&A.push(["index[",t[z],"]\x3dj",z].join(""));for(z=0;z<f;++z){y=["offset"+z];for(B=v;B<d;++B)y.push(["j",B,"*t",z,
"p",t[B]].join(""));A.push(["p",z,"\x3d(",y.join("+"),")"].join(""))}A.push(r(t,l,w));for(z=v;z<d;++z)A.push("}");t=A.join("\n");h.call(k,t)}else k.push(r(t[0],l,w));3<l.post.body.length&&k.push(q(l.post,l,n));l.debug&&console.log("-----Generated cwise routine for ",a,":\n"+k.join("\n")+"\n----------");l=l.funcName||"unnamed";g=g[0].join("s");a=Array(n.length);t=!0;for(h=0;h<n.length;++h)w=n[h],v=(v=w.match(/\d+/))?v[0]:"",0===w.charAt(0)?a[h]="u"+w.charAt(1)+v:a[h]=w.charAt(0)+v,0<h&&(t=t&&a[h]===
a[h-1]);n=t?a[0]:a.join("");n=[l,"_cwise_loop_",g,"m",p,n].join("");return(new Function(["function ",n,"(",e.join(","),"){",k.join("\n"),"} return ",n].join("")))()}},{uniq:597}],153:[function(b,N,I){var r=b("./compile.js");N.exports=function(q){var m=["'use strict'","var CACHED\x3d{}"],l=[];m.push(["return function ",q.funcName+"_cwise_thunk","(",q.shimArgs.join(","),"){"].join(""));for(var a=[],h=[],g=[["array",q.arrayArgs[0],".shape.slice(",Math.max(0,q.arrayBlockIndices[0]),0>q.arrayBlockIndices[0]?
","+q.arrayBlockIndices[0]+")":")"].join("")],n=[],p=[],d=0;d<q.arrayArgs.length;++d){var e=q.arrayArgs[d];l.push(["t",e,"\x3darray",e,".dtype,r",e,"\x3darray",e,".order"].join(""));a.push("t"+e);a.push("r"+e);h.push("t"+e);h.push("r"+e+".join()");g.push("array"+e+".data");g.push("array"+e+".stride");g.push("array"+e+".offset|0");0<d&&(n.push("array"+q.arrayArgs[0]+".shape.length\x3d\x3d\x3darray"+e+".shape.length+"+(Math.abs(q.arrayBlockIndices[0])-Math.abs(q.arrayBlockIndices[d]))),p.push("array"+
q.arrayArgs[0]+".shape[shapeIndex+"+Math.max(0,q.arrayBlockIndices[0])+"]\x3d\x3d\x3darray"+e+".shape[shapeIndex+"+Math.max(0,q.arrayBlockIndices[d])+"]"))}1<q.arrayArgs.length&&(m.push("if (!("+n.join(" \x26\x26 ")+")) throw new Error('cwise: Arrays do not all have the same dimensionality!')"),m.push("for(var shapeIndex\x3darray"+q.arrayArgs[0]+".shape.length-"+Math.abs(q.arrayBlockIndices[0])+"; shapeIndex--\x3e0;) {"),m.push("if (!("+p.join(" \x26\x26 ")+")) throw new Error('cwise: Arrays do not all have the same shape!')"),
m.push("}"));for(d=0;d<q.scalarArgs.length;++d)g.push("scalar"+q.scalarArgs[d]);l.push(["type\x3d[",h.join(","),"].join()"].join(""));l.push("proc\x3dCACHED[type]");m.push("var "+l.join(","));m.push(["if(!proc){CACHED[type]\x3dproc\x3dcompile([",a.join(","),"])}return proc(",g.join(","),")}"].join(""));q.debug&&console.log("-----Generated thunk:\n"+m.join("\n")+"\n----------");return(new Function("compile",m.join("\n")))(r.bind(void 0,q))}},{"./compile.js":152}],154:[function(b,N,I){var r=b("type/value/is"),
q=b("type/value/ensure"),m=b("type/plain-function/ensure"),l=b("es5-ext/object/copy"),a=b("es5-ext/object/normalize-options"),h=b("es5-ext/object/map"),g=Function.prototype.bind,n=Object.defineProperty,p=Object.prototype.hasOwnProperty;var d=function(e,f,k){var t=q(f)&&m(f.value);var v=l(f);delete v.writable;delete v.value;v.get=function(){if(!k.overwriteDefinition&&p.call(this,e))return t;f.value=g.call(t,k.resolveContext?k.resolveContext(this):this);n(this,e,f);return this[e]};return v};N.exports=
function(e,f){var k=a(f);r(k.resolveContext)&&m(k.resolveContext);return h(e,function(t,v){return d(v,t,k)})}},{"es5-ext/object/copy":196,"es5-ext/object/map":204,"es5-ext/object/normalize-options":205,"type/plain-function/ensure":589,"type/value/ensure":593,"type/value/is":594}],155:[function(b,N,I){var r=b("type/value/is"),q=b("type/plain-function/is"),m=b("es5-ext/object/assign"),l=b("es5-ext/object/normalize-options"),a=b("es5-ext/string/#/contains");(N.exports=function(h,g){if(2>arguments.length||
"string"!==typeof h){var n=g;g=h;h=null}else n=arguments[2];if(r(h)){var p=a.call(h,"c");var d=a.call(h,"e");var e=a.call(h,"w")}else p=e=!0,d=!1;p={value:g,configurable:p,enumerable:d,writable:e};return n?m(l(n),p):p}).gs=function(h,g,n,p){"string"!==typeof h&&(p=n,n=g,g=h,h=null);r(g)?q(g)?r(n)?q(n)||(p=n,n=void 0):n=void 0:(p=g,g=n=void 0):g=void 0;if(r(h)){var d=a.call(h,"c");h=a.call(h,"e")}else d=!0,h=!1;g={get:g,set:n,configurable:d,enumerable:h};return p?m(l(p),g):g}},{"es5-ext/object/assign":193,
"es5-ext/object/normalize-options":205,"es5-ext/string/#/contains":212,"type/plain-function/is":590,"type/value/is":594}],156:[function(b,N,I){(function(r,q){"object"===typeof I&&"undefined"!==typeof N?q(I):q(r.d3=r.d3||{})})(this,function(r){function q(K,H){return K<H?-1:K>H?1:K>=H?0:NaN}function m(K){1===K.length&&(K=l(K));return{left:function(H,Q,M,P){null==M&&(M=0);null==P&&(P=H.length);for(;M<P;){var T=M+P>>>1;0>K(H[T],Q)?M=T+1:P=T}return M},right:function(H,Q,M,P){null==M&&(M=0);null==P&&(P=
H.length);for(;M<P;){var T=M+P>>>1;0<K(H[T],Q)?P=T:M=T+1}return M}}}function l(K){return function(H,Q){return q(K(H),Q)}}function a(K,H){return[K,H]}function h(K){return null===K?NaN:+K}function g(K,H){var Q=K.length,M=0,P=-1,T=0,O,U=0;if(null==H)for(;++P<Q;){if(!isNaN(O=h(K[P]))){var S=O-T;T+=S/++M;U+=S*(O-T)}}else for(;++P<Q;)isNaN(O=h(H(K[P],P,K)))||(S=O-T,T+=S/++M,U+=S*(O-T));if(1<M)return U/(M-1)}function n(K,H){return(K=g(K,H))?Math.sqrt(K):K}function p(K,H){var Q=K.length,M=-1,P,T,O;if(null==
H)for(;++M<Q;){if(null!=(P=K[M])&&P>=P)for(T=O=P;++M<Q;)null!=(P=K[M])&&(T>P&&(T=P),O<P&&(O=P))}else for(;++M<Q;)if(null!=(P=H(K[M],M,K))&&P>=P)for(T=O=P;++M<Q;)null!=(P=H(K[M],M,K))&&(T>P&&(T=P),O<P&&(O=P));return[T,O]}function d(K){return function(){return K}}function e(K){return K}function f(K,H,Q){K=+K;H=+H;Q=2>(P=arguments.length)?(H=K,K=0,1):3>P?1:+Q;for(var M=-1,P=Math.max(0,Math.ceil((H-K)/Q))|0,T=Array(P);++M<P;)T[M]=K+M*Q;return T}function k(K,H,Q){H=(H-K)/Math.max(0,Q);K=Math.floor(Math.log(H)/
Math.LN10);H/=Math.pow(10,K);return 0<=K?(H>=G?10:H>=J?5:H>=L?2:1)*Math.pow(10,K):-Math.pow(10,-K)/(H>=G?10:H>=J?5:H>=L?2:1)}function t(K,H,Q){var M=Math.abs(H-K)/Math.max(0,Q);Q=Math.pow(10,Math.floor(Math.log(M)/Math.LN10));M/=Q;M>=G?Q*=10:M>=J?Q*=5:M>=L&&(Q*=2);return H<K?-Q:Q}function v(K){return Math.ceil(Math.log(K.length)/Math.LN2)+1}function w(K,H,Q){null==Q&&(Q=h);if(M=K.length){if(0>=(H=+H)||2>M)return+Q(K[0],0,K);if(1<=H)return+Q(K[M-1],M-1,K);var M;H*=M-1;M=Math.floor(H);var P=+Q(K[M],
M,K);K=+Q(K[M+1],M+1,K);return P+(K-P)*(H-M)}}function y(K,H){var Q=K.length,M=-1,P,T;if(null==H)for(;++M<Q;){if(null!=(P=K[M])&&P>=P)for(T=P;++M<Q;)null!=(P=K[M])&&T>P&&(T=P)}else for(;++M<Q;)if(null!=(P=H(K[M],M,K))&&P>=P)for(T=P;++M<Q;)null!=(P=H(K[M],M,K))&&T>P&&(T=P);return T}function B(K){if(!(T=K.length))return[];for(var H=-1,Q=y(K,A),M=Array(Q);++H<Q;)for(var P=-1,T,O=M[H]=Array(T);++P<T;)O[P]=K[P][H];return M}function A(K){return K.length}var z=m(q),E=z.right;z=z.left;var C=Array.prototype,
u=C.slice,D=C.map,G=Math.sqrt(50),J=Math.sqrt(10),L=Math.sqrt(2);r.bisect=E;r.bisectRight=E;r.bisectLeft=z;r.ascending=q;r.bisector=m;r.cross=function(K,H,Q){var M=K.length,P=H.length,T=Array(M*P),O,U,S;null==Q&&(Q=a);for(O=S=0;O<M;++O){var X=K[O];for(U=0;U<P;++U,++S)T[S]=Q(X,H[U])}return T};r.descending=function(K,H){return H<K?-1:H>K?1:H>=K?0:NaN};r.deviation=n;r.extent=p;r.histogram=function(){function K(P){var T,O=P.length,U=Array(O);for(T=0;T<O;++T)U[T]=H(P[T],T,P);T=Q(U);var S=T[0],X=T[1],ba=
M(U,S,X);Array.isArray(ba)||(ba=t(S,X,ba),ba=f(Math.ceil(S/ba)*ba,X,ba));for(var ca=ba.length;ba[0]<=S;)ba.shift(),--ca;for(;ba[ca-1]>X;)ba.pop(),--ca;var ia=Array(ca+1);for(T=0;T<=ca;++T){var ja=ia[T]=[];ja.x0=0<T?ba[T-1]:S;ja.x1=T<ca?ba[T]:X}for(T=0;T<O;++T)ja=U[T],S<=ja&&ja<=X&&ia[E(ba,ja,0,ca)].push(P[T]);return ia}var H=e,Q=p,M=v;K.value=function(P){return arguments.length?(H="function"===typeof P?P:d(P),K):H};K.domain=function(P){return arguments.length?(Q="function"===typeof P?P:d([P[0],P[1]]),
K):Q};K.thresholds=function(P){return arguments.length?(M="function"===typeof P?P:Array.isArray(P)?d(u.call(P)):d(P),K):M};return K};r.thresholdFreedmanDiaconis=function(K,H,Q){K=D.call(K,h).sort(q);return Math.ceil((Q-H)/(2*(w(K,.75)-w(K,.25))*Math.pow(K.length,-1/3)))};r.thresholdScott=function(K,H,Q){return Math.ceil((Q-H)/(3.5*n(K)*Math.pow(K.length,-1/3)))};r.thresholdSturges=v;r.max=function(K,H){var Q=K.length,M=-1,P,T;if(null==H)for(;++M<Q;){if(null!=(P=K[M])&&P>=P)for(T=P;++M<Q;)null!=(P=
K[M])&&P>T&&(T=P)}else for(;++M<Q;)if(null!=(P=H(K[M],M,K))&&P>=P)for(T=P;++M<Q;)null!=(P=H(K[M],M,K))&&P>T&&(T=P);return T};r.mean=function(K,H){var Q=K.length,M=Q,P=-1,T,O=0;if(null==H)for(;++P<Q;)isNaN(T=h(K[P]))?--M:O+=T;else for(;++P<Q;)isNaN(T=h(H(K[P],P,K)))?--M:O+=T;if(M)return O/M};r.median=function(K,H){var Q=K.length,M=-1,P,T=[];if(null==H)for(;++M<Q;)isNaN(P=h(K[M]))||T.push(P);else for(;++M<Q;)isNaN(P=h(H(K[M],M,K)))||T.push(P);return w(T.sort(q),.5)};r.merge=function(K){var H=K.length;
var Q=-1;for(var M=0,P,T;++Q<H;)M+=K[Q].length;for(P=Array(M);0<=--H;)for(T=K[H],Q=T.length;0<=--Q;)P[--M]=T[Q];return P};r.min=y;r.pairs=function(K,H){null==H&&(H=a);for(var Q=0,M=K.length-1,P=K[0],T=Array(0>M?0:M);Q<M;)T[Q]=H(P,P=K[++Q]);return T};r.permute=function(K,H){for(var Q=H.length,M=Array(Q);Q--;)M[Q]=K[H[Q]];return M};r.quantile=w;r.range=f;r.scan=function(K,H){if(Q=K.length){var Q,M=0,P=0,T,O=K[P];for(null==H&&(H=q);++M<Q;)if(0>H(T=K[M],O)||0!==H(O,O))O=T,P=M;if(0===H(O,O))return P}};
r.shuffle=function(K,H,Q){Q=(null==Q?K.length:Q)-(H=null==H?0:+H);for(var M,P;Q;)P=Math.random()*Q--|0,M=K[Q+H],K[Q+H]=K[P+H],K[P+H]=M;return K};r.sum=function(K,H){var Q=K.length,M=-1,P,T=0;if(null==H)for(;++M<Q;){if(P=+K[M])T+=P}else for(;++M<Q;)if(P=+H(K[M],M,K))T+=P;return T};r.ticks=function(K,H,Q){var M,P=-1,T;H=+H;K=+K;Q=+Q;if(K===H&&0<Q)return[K];if(M=H<K){var O=K;K=H;H=O}if(0===(T=k(K,H,Q))||!isFinite(T))return[];if(0<T)for(K=Math.ceil(K/T),H=Math.floor(H/T),H=Array(O=Math.ceil(H-K+1));++P<
O;)H[P]=(K+P)*T;else for(K=Math.floor(K*T),H=Math.ceil(H*T),H=Array(O=Math.ceil(K-H+1));++P<O;)H[P]=(K-P)/T;M&&H.reverse();return H};r.tickIncrement=k;r.tickStep=t;r.transpose=B;r.variance=g;r.zip=function(){return B(arguments)};Object.defineProperty(r,"__esModule",{value:!0})})},{}],157:[function(b,N,I){(function(r,q){"object"===typeof I&&"undefined"!==typeof N?q(I):q(r.d3=r.d3||{})})(this,function(r){function q(){}function m(e,f){var k=new q;if(e instanceof q)e.each(function(y,B){k.set(B,y)});else if(Array.isArray(e)){var t=
-1,v=e.length,w;if(null==f)for(;++t<v;)k.set(t,e[t]);else for(;++t<v;)k.set(f(w=e[t],t,e),w)}else if(e)for(t in e)k.set(t,e[t]);return k}function l(){return{}}function a(e,f,k){e[f]=k}function h(){return m()}function g(e,f,k){e.set(f,k)}function n(){}function p(e,f){var k=new n;if(e instanceof n)e.each(function(w){k.add(w)});else if(e){var t=-1,v=e.length;if(null==f)for(;++t<v;)k.add(e[t]);else for(;++t<v;)k.add(f(e[t],t,e))}return k}q.prototype=m.prototype={constructor:q,has:function(e){return"$"+
e in this},get:function(e){return this["$"+e]},set:function(e,f){this["$"+e]=f;return this},remove:function(e){e="$"+e;return e in this&&delete this[e]},clear:function(){for(var e in this)"$"===e[0]&&delete this[e]},keys:function(){var e=[],f;for(f in this)"$"===f[0]&&e.push(f.slice(1));return e},values:function(){var e=[],f;for(f in this)"$"===f[0]&&e.push(this[f]);return e},entries:function(){var e=[],f;for(f in this)"$"===f[0]&&e.push({key:f.slice(1),value:this[f]});return e},size:function(){var e=
0,f;for(f in this)"$"===f[0]&&++e;return e},empty:function(){for(var e in this)if("$"===e[0])return!1;return!0},each:function(e){for(var f in this)"$"===f[0]&&e(this[f],f.slice(1),this)}};var d=m.prototype;n.prototype=p.prototype={constructor:n,has:d.has,add:function(e){e+="";this["$"+e]=e;return this},remove:d.remove,clear:d.clear,values:d.keys,size:d.size,empty:d.empty,each:d.each};r.nest=function(){function e(B,A,z,E){if(A>=k.length)return null!=v&&B.sort(v),null!=w?w(B):B;for(var C=-1,u=B.length,
D=k[A++],G,J,L=m(),K,H=z();++C<u;)(K=L.get(G=D(J=B[C])+""))?K.push(J):L.set(G,[J]);L.each(function(Q,M){E(H,M,e(Q,A,z,E))});return H}function f(B,A){if(++A>k.length)return B;var z=t[A-1];if(null!=w&&A>=k.length)var E=B.entries();else E=[],B.each(function(C,u){E.push({key:u,values:f(C,A)})});return null!=z?E.sort(function(C,u){return z(C.key,u.key)}):E}var k=[],t=[],v,w,y;return y={object:function(B){return e(B,0,l,a)},map:function(B){return e(B,0,h,g)},entries:function(B){return f(e(B,0,h,g),0)},
key:function(B){k.push(B);return y},sortKeys:function(B){t[k.length-1]=B;return y},sortValues:function(B){v=B;return y},rollup:function(B){w=B;return y}}};r.set=p;r.map=m;r.keys=function(e){var f=[],k;for(k in e)f.push(k);return f};r.values=function(e){var f=[],k;for(k in e)f.push(e[k]);return f};r.entries=function(e){var f=[],k;for(k in e)f.push({key:k,value:e[k]});return f};Object.defineProperty(r,"__esModule",{value:!0})})},{}],158:[function(b,N,I){(function(r,q){"object"===typeof I&&"undefined"!==
typeof N?q(I):(r=r||self,q(r.d3=r.d3||{}))})(this,function(r){function q(ka,ua,va){ka.prototype=ua.prototype=va;va.constructor=ka}function m(ka,ua){ka=Object.create(ka.prototype);for(var va in ua)ka[va]=ua[va];return ka}function l(){}function a(){return this.rgb().formatHex()}function h(){return this.rgb().formatRgb()}function g(ka){var ua,va;ka=(ka+"").trim().toLowerCase();return(ua=U.exec(ka))?(va=ua[1].length,ua=parseInt(ua[1],16),6===va?n(ua):3===va?new f(ua>>8&15|ua>>4&240,ua>>4&15|ua&240,(ua&
15)<<4|ua&15,1):8===va?p(ua>>24&255,ua>>16&255,ua>>8&255,(ua&255)/255):4===va?p(ua>>12&15|ua>>8&240,ua>>8&15|ua>>4&240,ua>>4&15|ua&240,((ua&15)<<4|ua&15)/255):null):(ua=S.exec(ka))?new f(ua[1],ua[2],ua[3],1):(ua=X.exec(ka))?new f(255*ua[1]/100,255*ua[2]/100,255*ua[3]/100,1):(ua=ba.exec(ka))?p(ua[1],ua[2],ua[3],ua[4]):(ua=ca.exec(ka))?p(255*ua[1]/100,255*ua[2]/100,255*ua[3]/100,ua[4]):(ua=ia.exec(ka))?w(ua[1],ua[2]/100,ua[3]/100,1):(ua=ja.exec(ka))?w(ua[1],ua[2]/100,ua[3]/100,ua[4]):la.hasOwnProperty(ka)?
n(la[ka]):"transparent"===ka?new f(NaN,NaN,NaN,0):null}function n(ka){return new f(ka>>16&255,ka>>8&255,ka&255,1)}function p(ka,ua,va,Ca){0>=Ca&&(ka=ua=va=NaN);return new f(ka,ua,va,Ca)}function d(ka){ka instanceof l||(ka=g(ka));if(!ka)return new f;ka=ka.rgb();return new f(ka.r,ka.g,ka.b,ka.opacity)}function e(ka,ua,va,Ca){return 1===arguments.length?d(ka):new f(ka,ua,va,null==Ca?1:Ca)}function f(ka,ua,va,Ca){this.r=+ka;this.g=+ua;this.b=+va;this.opacity=+Ca}function k(){return"#"+v(this.r)+v(this.g)+
v(this.b)}function t(){var ka=this.opacity;ka=isNaN(ka)?1:Math.max(0,Math.min(1,ka));return(1===ka?"rgb(":"rgba(")+Math.max(0,Math.min(255,Math.round(this.r)||0))+", "+Math.max(0,Math.min(255,Math.round(this.g)||0))+", "+Math.max(0,Math.min(255,Math.round(this.b)||0))+(1===ka?")":", "+ka+")")}function v(ka){ka=Math.max(0,Math.min(255,Math.round(ka)||0));return(16>ka?"0":"")+ka.toString(16)}function w(ka,ua,va,Ca){0>=Ca?ka=ua=va=NaN:0>=va||1<=va?ka=ua=NaN:0>=ua&&(ka=NaN);return new A(ka,ua,va,Ca)}
function y(ka){if(ka instanceof A)return new A(ka.h,ka.s,ka.l,ka.opacity);ka instanceof l||(ka=g(ka));if(!ka)return new A;if(ka instanceof A)return ka;ka=ka.rgb();var ua=ka.r/255,va=ka.g/255,Ca=ka.b/255,Ma=Math.min(ua,va,Ca),Ua=Math.max(ua,va,Ca),eb=NaN,fb=Ua-Ma,nb=(Ua+Ma)/2;fb?(eb=ua===Ua?(va-Ca)/fb+6*(va<Ca):va===Ua?(Ca-ua)/fb+2:(ua-va)/fb+4,fb/=.5>nb?Ua+Ma:2-Ua-Ma,eb*=60):fb=0<nb&&1>nb?0:eb;return new A(eb,fb,nb,ka.opacity)}function B(ka,ua,va,Ca){return 1===arguments.length?y(ka):new A(ka,ua,
va,null==Ca?1:Ca)}function A(ka,ua,va,Ca){this.h=+ka;this.s=+ua;this.l=+va;this.opacity=+Ca}function z(ka,ua,va){return 255*(60>ka?ua+(va-ua)*ka/60:180>ka?va:240>ka?ua+(va-ua)*(240-ka)/60:ua)}function E(ka){if(ka instanceof u)return new u(ka.l,ka.a,ka.b,ka.opacity);if(ka instanceof Q)return M(ka);ka instanceof f||(ka=d(ka));var ua=L(ka.r),va=L(ka.g),Ca=L(ka.b),Ma=D(.2225045*ua+.7168786*va+.0606169*Ca);if(ua===va&&va===Ca)var Ua=ua=Ma;else Ua=D((.4360747*ua+.3850649*va+.1430804*Ca)/.96422),ua=D((.0139322*
ua+.0971045*va+.7141733*Ca)/.82521);return new u(116*Ma-16,500*(Ua-Ma),200*(Ma-ua),ka.opacity)}function C(ka,ua,va,Ca){return 1===arguments.length?E(ka):new u(ka,ua,va,null==Ca?1:Ca)}function u(ka,ua,va,Ca){this.l=+ka;this.a=+ua;this.b=+va;this.opacity=+Ca}function D(ka){return ka>pa?Math.pow(ka,1/3):ka/qa+sa}function G(ka){return ka>ma?ka*ka*ka:qa*(ka-sa)}function J(ka){return 255*(.0031308>=ka?12.92*ka:1.055*Math.pow(ka,1/2.4)-.055)}function L(ka){return.04045>=(ka/=255)?ka/12.92:Math.pow((ka+.055)/
1.055,2.4)}function K(ka){if(ka instanceof Q)return new Q(ka.h,ka.c,ka.l,ka.opacity);ka instanceof u||(ka=E(ka));if(0===ka.a&&0===ka.b)return new Q(NaN,0<ka.l&&100>ka.l?0:NaN,ka.l,ka.opacity);var ua=Math.atan2(ka.b,ka.a)*oa;return new Q(0>ua?ua+360:ua,Math.sqrt(ka.a*ka.a+ka.b*ka.b),ka.l,ka.opacity)}function H(ka,ua,va,Ca){return 1===arguments.length?K(ka):new Q(ka,ua,va,null==Ca?1:Ca)}function Q(ka,ua,va,Ca){this.h=+ka;this.c=+ua;this.l=+va;this.opacity=+Ca}function M(ka){if(isNaN(ka.h))return new u(ka.l,
0,0,ka.opacity);var ua=ka.h*da;return new u(ka.l,Math.cos(ua)*ka.c,Math.sin(ua)*ka.c,ka.opacity)}function P(ka,ua,va,Ca){if(1===arguments.length){var Ma=ka;if(Ma instanceof T)Ma=new T(Ma.h,Ma.s,Ma.l,Ma.opacity);else{Ma instanceof f||(Ma=d(Ma));var Ua=Ma.g/255,eb=Ma.b/255,fb=(na*eb+Ma.r/255*-1.7884503806-3.5172982438*Ua)/(na+-1.7884503806-3.5172982438);eb-=fb;var nb=(1.97294*(Ua-fb)- -.29227*eb)/-.90649;eb=(Ua=Math.sqrt(nb*nb+eb*eb)/(1.97294*fb*(1-fb)))?Math.atan2(nb,eb)*oa-120:NaN;Ma=new T(0>eb?eb+
360:eb,Ua,fb,Ma.opacity)}}else Ma=new T(ka,ua,va,null==Ca?1:Ca);return Ma}function T(ka,ua,va,Ca){this.h=+ka;this.s=+ua;this.l=+va;this.opacity=+Ca}var O=1/.7,U=/^#([0-9a-f]{3,8})$/,S=/^rgb\(\s*([+-]?\d+)\s*,\s*([+-]?\d+)\s*,\s*([+-]?\d+)\s*\)$/,X=/^rgb\(\s*([+-]?\d*\.?\d+(?:[eE][+-]?\d+)?)%\s*,\s*([+-]?\d*\.?\d+(?:[eE][+-]?\d+)?)%\s*,\s*([+-]?\d*\.?\d+(?:[eE][+-]?\d+)?)%\s*\)$/,ba=/^rgba\(\s*([+-]?\d+)\s*,\s*([+-]?\d+)\s*,\s*([+-]?\d+)\s*,\s*([+-]?\d*\.?\d+(?:[eE][+-]?\d+)?)\s*\)$/,ca=/^rgba\(\s*([+-]?\d*\.?\d+(?:[eE][+-]?\d+)?)%\s*,\s*([+-]?\d*\.?\d+(?:[eE][+-]?\d+)?)%\s*,\s*([+-]?\d*\.?\d+(?:[eE][+-]?\d+)?)%\s*,\s*([+-]?\d*\.?\d+(?:[eE][+-]?\d+)?)\s*\)$/,
ia=/^hsl\(\s*([+-]?\d*\.?\d+(?:[eE][+-]?\d+)?)\s*,\s*([+-]?\d*\.?\d+(?:[eE][+-]?\d+)?)%\s*,\s*([+-]?\d*\.?\d+(?:[eE][+-]?\d+)?)%\s*\)$/,ja=/^hsla\(\s*([+-]?\d*\.?\d+(?:[eE][+-]?\d+)?)\s*,\s*([+-]?\d*\.?\d+(?:[eE][+-]?\d+)?)%\s*,\s*([+-]?\d*\.?\d+(?:[eE][+-]?\d+)?)%\s*,\s*([+-]?\d*\.?\d+(?:[eE][+-]?\d+)?)\s*\)$/,la={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,
burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,
darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,
lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,
mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,
red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074};q(l,g,{copy:function(ka){return Object.assign(new this.constructor,
this,ka)},displayable:function(){return this.rgb().displayable()},hex:a,formatHex:a,formatHsl:function(){return y(this).formatHsl()},formatRgb:h,toString:h});q(f,e,m(l,{brighter:function(ka){ka=null==ka?O:Math.pow(O,ka);return new f(this.r*ka,this.g*ka,this.b*ka,this.opacity)},darker:function(ka){ka=null==ka?.7:Math.pow(.7,ka);return new f(this.r*ka,this.g*ka,this.b*ka,this.opacity)},rgb:function(){return this},displayable:function(){return-.5<=this.r&&255.5>this.r&&-.5<=this.g&&255.5>this.g&&-.5<=
this.b&&255.5>this.b&&0<=this.opacity&&1>=this.opacity},hex:k,formatHex:k,formatRgb:t,toString:t}));q(A,B,m(l,{brighter:function(ka){ka=null==ka?O:Math.pow(O,ka);return new A(this.h,this.s,this.l*ka,this.opacity)},darker:function(ka){ka=null==ka?.7:Math.pow(.7,ka);return new A(this.h,this.s,this.l*ka,this.opacity)},rgb:function(){var ka=this.h%360+360*(0>this.h),ua=isNaN(ka)||isNaN(this.s)?0:this.s,va=this.l;ua=va+(.5>va?va:1-va)*ua;va=2*va-ua;return new f(z(240<=ka?ka-240:ka+120,va,ua),z(ka,va,ua),
z(120>ka?ka+240:ka-120,va,ua),this.opacity)},displayable:function(){return(0<=this.s&&1>=this.s||isNaN(this.s))&&0<=this.l&&1>=this.l&&0<=this.opacity&&1>=this.opacity},formatHsl:function(){var ka=this.opacity;ka=isNaN(ka)?1:Math.max(0,Math.min(1,ka));return(1===ka?"hsl(":"hsla(")+(this.h||0)+", "+100*(this.s||0)+"%, "+100*(this.l||0)+"%"+(1===ka?")":", "+ka+")")}}));var da=Math.PI/180,oa=180/Math.PI,sa=4/29,ma=6/29,qa=3*ma*ma,pa=ma*ma*ma;q(u,C,m(l,{brighter:function(ka){return new u(this.l+18*(null==
ka?1:ka),this.a,this.b,this.opacity)},darker:function(ka){return new u(this.l-18*(null==ka?1:ka),this.a,this.b,this.opacity)},rgb:function(){var ka=(this.l+16)/116,ua=isNaN(this.a)?ka:ka+this.a/500,va=isNaN(this.b)?ka:ka-this.b/200;ua=.96422*G(ua);ka=1*G(ka);va=.82521*G(va);return new f(J(3.1338561*ua-1.6168667*ka-.4906146*va),J(-.9787684*ua+1.9161415*ka+.033454*va),J(.0719453*ua-.2289914*ka+1.4052427*va),this.opacity)}}));q(Q,H,m(l,{brighter:function(ka){return new Q(this.h,this.c,this.l+18*(null==
ka?1:ka),this.opacity)},darker:function(ka){return new Q(this.h,this.c,this.l-18*(null==ka?1:ka),this.opacity)},rgb:function(){return M(this).rgb()}}));var na=1.78277*-.29227-.1347134789;q(T,P,m(l,{brighter:function(ka){ka=null==ka?O:Math.pow(O,ka);return new T(this.h,this.s,this.l*ka,this.opacity)},darker:function(ka){ka=null==ka?.7:Math.pow(.7,ka);return new T(this.h,this.s,this.l*ka,this.opacity)},rgb:function(){var ka=isNaN(this.h)?0:(this.h+120)*da,ua=+this.l,va=isNaN(this.s)?0:this.s*ua*(1-
ua),Ca=Math.cos(ka);ka=Math.sin(ka);return new f(255*(ua+va*(-.14861*Ca+1.78277*ka)),255*(ua+va*(-.29227*Ca+-.90649*ka)),255*(ua+1.97294*va*Ca),this.opacity)}}));r.color=g;r.cubehelix=P;r.gray=function(ka,ua){return new u(ka,0,0,null==ua?1:ua)};r.hcl=H;r.hsl=B;r.lab=C;r.lch=function(ka,ua,va,Ca){return 1===arguments.length?K(ka):new Q(va,ua,ka,null==Ca?1:Ca)};r.rgb=e;Object.defineProperty(r,"__esModule",{value:!0})})},{}],159:[function(b,N,I){(function(r,q){"object"===typeof I&&"undefined"!==typeof N?
q(I):(r=r||self,q(r.d3=r.d3||{}))})(this,function(r){function q(){for(var g=0,n=arguments.length,p={},d;g<n;++g){if(!(d=arguments[g]+"")||d in p||/[\s.]/.test(d))throw Error("illegal type: "+d);p[d]=[]}return new m(p)}function m(g){this._=g}function l(g,n){return g.trim().split(/^|\s+/).map(function(p){var d="",e=p.indexOf(".");0<=e&&(d=p.slice(e+1),p=p.slice(0,e));if(p&&!n.hasOwnProperty(p))throw Error("unknown type: "+p);return{type:p,name:d}})}function a(g,n,p){for(var d=0,e=g.length;d<e;++d)if(g[d].name===
n){g[d]=h;g=g.slice(0,d).concat(g.slice(d+1));break}null!=p&&g.push({name:n,value:p});return g}var h={value:function(){}};m.prototype=q.prototype={constructor:m,on:function(g,n){var p=this._,d=l(g+"",p),e,f=-1,k=d.length;if(2>arguments.length)for(;++f<k;){var t;if(t=e=(g=d[f]).type){a:{t=p[e];for(var v=0,w=t.length;v<w;++v)if((e=t[v]).name===g.name){e=e.value;break a}e=void 0}t=e}if(t)return e}else{if(null!=n&&"function"!==typeof n)throw Error("invalid callback: "+n);for(;++f<k;)if(e=(g=d[f]).type)p[e]=
a(p[e],g.name,n);else if(null==n)for(e in p)p[e]=a(p[e],g.name,null);return this}},copy:function(){var g={},n=this._,p;for(p in n)g[p]=n[p].slice();return new m(g)},call:function(g,n){if(0<(e=arguments.length-2))for(var p=Array(e),d=0,e,f;d<e;++d)p[d]=arguments[d+2];if(!this._.hasOwnProperty(g))throw Error("unknown type: "+g);f=this._[g];d=0;for(e=f.length;d<e;++d)f[d].value.apply(n,p)},apply:function(g,n,p){if(!this._.hasOwnProperty(g))throw Error("unknown type: "+g);g=this._[g];for(var d=0,e=g.length;d<
e;++d)g[d].value.apply(n,p)}};r.dispatch=q;Object.defineProperty(r,"__esModule",{value:!0})})},{}],160:[function(b,N,I){(function(r,q){"object"===typeof I&&"undefined"!==typeof N?q(I,b("d3-quadtree"),b("d3-collection"),b("d3-dispatch"),b("d3-timer")):q(r.d3=r.d3||{},r.d3,r.d3,r.d3,r.d3)})(this,function(r,q,m,l,a){function h(v){return function(){return v}}function g(){return 1E-6*(Math.random()-.5)}function n(v){return v.x+v.vx}function p(v){return v.y+v.vy}function d(v){return v.index}function e(v,
w){v=v.get(w);if(!v)throw Error("missing: "+w);return v}function f(v){return v.x}function k(v){return v.y}var t=Math.PI*(3-Math.sqrt(5));r.forceCenter=function(v,w){function y(){var A,z=B.length,E=0,C=0;for(A=0;A<z;++A){var u=B[A];E+=u.x;C+=u.y}E=E/z-v;C=C/z-w;for(A=0;A<z;++A)u=B[A],u.x-=E,u.y-=C}var B;null==v&&(v=0);null==w&&(w=0);y.initialize=function(A){B=A};y.x=function(A){return arguments.length?(v=+A,y):v};y.y=function(A){return arguments.length?(w=+A,y):w};return y};r.forceCollide=function(v){function w(){function u(T,
O,U,S,X){var ba=T.data;T=T.r;var ca=Q+T;if(ba)ba.index>L.index&&(O=K-ba.x-ba.vx,U=H-ba.y-ba.vy,S=O*O+U*U,S<ca*ca&&(0===O&&(O=g(),S+=O*O),0===U&&(U=g(),S+=U*U),S=(ca-(S=Math.sqrt(S)))/S*E,L.vx+=(O*=S)*(ca=(T*=T)/(M+T)),L.vy+=(U*=S)*ca,ba.vx-=O*(ca=1-ca),ba.vy-=U*ca));else return O>K+ca||S<K-ca||U>H+ca||X<H-ca}for(var D,G=A.length,J,L,K,H,Q,M,P=0;P<C;++P)for(J=q.quadtree(A,n,p).visitAfter(y),D=0;D<G;++D)L=A[D],Q=z[L.index],M=Q*Q,K=L.x+L.vx,H=L.y+L.vy,J.visit(u)}function y(u){if(u.data)return u.r=z[u.data.index];
for(var D=u.r=0;4>D;++D)u[D]&&u[D].r>u.r&&(u.r=u[D].r)}function B(){if(A){var u,D=A.length;z=Array(D);for(u=0;u<D;++u){var G=A[u];z[G.index]=+v(G,u,A)}}}var A,z,E=1,C=1;"function"!==typeof v&&(v=h(null==v?1:+v));w.initialize=function(u){A=u;B()};w.iterations=function(u){return arguments.length?(C=+u,w):C};w.strength=function(u){return arguments.length?(E=+u,w):E};w.radius=function(u){return arguments.length?(v="function"===typeof u?u:h(+u),B(),w):v};return w};r.forceLink=function(v){function w(H){for(var Q=
0,M=v.length;Q<K;++Q)for(var P=0,T,O,U,S,X;P<M;++P)T=v[P],O=T.source,T=T.target,U=T.x+T.vx-O.x-O.vx||g(),S=T.y+T.vy-O.y-O.vy||g(),X=Math.sqrt(U*U+S*S),X=(X-D[P])/X*H*C[P],U*=X,S*=X,T.vx-=U*(X=L[P]),T.vy-=S*X,O.vx+=U*(X=1-X),O.vy+=S*X}function y(){if(G){var H=G.length,Q=v.length,M=m.map(G,z);var P=0;for(J=Array(H);P<Q;++P)H=v[P],H.index=P,"object"!==typeof H.source&&(H.source=e(M,H.source)),"object"!==typeof H.target&&(H.target=e(M,H.target)),J[H.source.index]=(J[H.source.index]||0)+1,J[H.target.index]=
(J[H.target.index]||0)+1;P=0;for(L=Array(Q);P<Q;++P)H=v[P],L[P]=J[H.source.index]/(J[H.source.index]+J[H.target.index]);C=Array(Q);B();D=Array(Q);A()}}function B(){if(G)for(var H=0,Q=v.length;H<Q;++H)C[H]=+E(v[H],H,v)}function A(){if(G)for(var H=0,Q=v.length;H<Q;++H)D[H]=+u(v[H],H,v)}var z=d,E=function(H){return 1/Math.min(J[H.source.index],J[H.target.index])},C,u=h(30),D,G,J,L,K=1;null==v&&(v=[]);w.initialize=function(H){G=H;y()};w.links=function(H){return arguments.length?(v=H,y(),w):v};w.id=function(H){return arguments.length?
(z=H,w):z};w.iterations=function(H){return arguments.length?(K=+H,w):K};w.strength=function(H){return arguments.length?(E="function"===typeof H?H:h(+H),B(),w):E};w.distance=function(H){return arguments.length?(u="function"===typeof H?H:h(+H),A(),w):u};return w};r.forceManyBody=function(){function v(L){var K=A.length,H=q.quadtree(A,f,k).visitAfter(y);E=L;for(L=0;L<K;++L)z=A[L],H.visit(B)}function w(){if(A){var L,K=A.length;u=Array(K);for(L=0;L<K;++L){var H=A[L];u[H.index]=+C(H,L,A)}}}function y(L){var K=
0,H,Q,M=0,P,T,O;if(L.length){for(P=T=O=0;4>O;++O)(H=L[O])&&(Q=Math.abs(H.value))&&(K+=H.value,M+=Q,P+=Q*H.x,T+=Q*H.y);L.x=P/M;L.y=T/M}else{H=L;H.x=H.data.x;H.y=H.data.y;do K+=u[H.data.index];while(H=H.next)}L.value=K}function B(L,K,H,Q){if(!L.value)return!0;H=L.x-z.x;var M=L.y-z.y;K=Q-K;Q=H*H+M*M;if(K*K/J<Q)return Q<G&&(0===H&&(H=g(),Q+=H*H),0===M&&(M=g(),Q+=M*M),Q<D&&(Q=Math.sqrt(D*Q)),z.vx+=H*L.value*E/Q,z.vy+=M*L.value*E/Q),!0;if(!(L.length||Q>=G)){if(L.data!==z||L.next)0===H&&(H=g(),Q+=H*H),0===
M&&(M=g(),Q+=M*M),Q<D&&(Q=Math.sqrt(D*Q));do L.data!==z&&(K=u[L.data.index]*E/Q,z.vx+=H*K,z.vy+=M*K);while(L=L.next)}}var A,z,E,C=h(-30),u,D=1,G=Infinity,J=.81;v.initialize=function(L){A=L;w()};v.strength=function(L){return arguments.length?(C="function"===typeof L?L:h(+L),w(),v):C};v.distanceMin=function(L){return arguments.length?(D=L*L,v):Math.sqrt(D)};v.distanceMax=function(L){return arguments.length?(G=L*L,v):Math.sqrt(G)};v.theta=function(L){return arguments.length?(J=L*L,v):Math.sqrt(J)};return v};
r.forceRadial=function(v,w,y){function B(D){for(var G=0,J=z.length;G<J;++G){var L=z[G],K=L.x-w||1E-6,H=L.y-y||1E-6,Q=Math.sqrt(K*K+H*H);Q=(u[G]-Q)*C[G]*D/Q;L.vx+=K*Q;L.vy+=H*Q}}function A(){if(z){var D,G=z.length;C=Array(G);u=Array(G);for(D=0;D<G;++D)u[D]=+v(z[D],D,z),C[D]=isNaN(u[D])?0:+E(z[D],D,z)}}var z,E=h(.1),C,u;"function"!==typeof v&&(v=h(+v));null==w&&(w=0);null==y&&(y=0);B.initialize=function(D){z=D;A()};B.strength=function(D){return arguments.length?(E="function"===typeof D?D:h(+D),A(),
B):E};B.radius=function(D){return arguments.length?(v="function"===typeof D?D:h(+D),A(),B):v};B.x=function(D){return arguments.length?(w=+D,B):w};B.y=function(D){return arguments.length?(y=+D,B):y};return B};r.forceSimulation=function(v){function w(){y();K.call("tick",z);E<C&&(L.stop(),K.call("end",z))}function y(H){var Q,M=v.length;void 0===H&&(H=1);for(var P=0;P<H;++P)for(E+=(D-E)*u,J.each(function(O){O(E)}),Q=0;Q<M;++Q){var T=v[Q];null==T.fx?T.x+=T.vx*=G:(T.x=T.fx,T.vx=0);null==T.fy?T.y+=T.vy*=
G:(T.y=T.fy,T.vy=0)}return z}function B(){for(var H=0,Q=v.length,M;H<Q;++H){M=v[H];M.index=H;null!=M.fx&&(M.x=M.fx);null!=M.fy&&(M.y=M.fy);if(isNaN(M.x)||isNaN(M.y)){var P=10*Math.sqrt(H),T=H*t;M.x=P*Math.cos(T);M.y=P*Math.sin(T)}if(isNaN(M.vx)||isNaN(M.vy))M.vx=M.vy=0}}function A(H){H.initialize&&H.initialize(v);return H}var z,E=1,C=.001,u=1-Math.pow(C,1/300),D=0,G=.6,J=m.map(),L=a.timer(w),K=l.dispatch("tick","end");null==v&&(v=[]);B();return z={tick:y,restart:function(){return L.restart(w),z},
stop:function(){return L.stop(),z},nodes:function(H){return arguments.length?(v=H,B(),J.each(A),z):v},alpha:function(H){return arguments.length?(E=+H,z):E},alphaMin:function(H){return arguments.length?(C=+H,z):C},alphaDecay:function(H){return arguments.length?(u=+H,z):+u},alphaTarget:function(H){return arguments.length?(D=+H,z):D},velocityDecay:function(H){return arguments.length?(G=1-H,z):1-G},force:function(H,Q){return 1<arguments.length?(null==Q?J.remove(H):J.set(H,A(Q)),z):J.get(H)},find:function(H,
Q,M){var P,T=v.length;M=null==M?Infinity:M*M;for(P=0;P<T;++P){var O=v[P];var U=H-O.x;var S=Q-O.y;U=U*U+S*S;if(U<M){var X=O;M=U}}return X},on:function(H,Q){return 1<arguments.length?(K.on(H,Q),z):K.on(H)}}};r.forceX=function(v){function w(C){for(var u=0,D=A.length,G;u<D;++u)G=A[u],G.vx+=(E[u]-G.x)*z[u]*C}function y(){if(A){var C,u=A.length;z=Array(u);E=Array(u);for(C=0;C<u;++C)z[C]=isNaN(E[C]=+v(A[C],C,A))?0:+B(A[C],C,A)}}var B=h(.1),A,z,E;"function"!==typeof v&&(v=h(null==v?0:+v));w.initialize=function(C){A=
C;y()};w.strength=function(C){return arguments.length?(B="function"===typeof C?C:h(+C),y(),w):B};w.x=function(C){return arguments.length?(v="function"===typeof C?C:h(+C),y(),w):v};return w};r.forceY=function(v){function w(C){for(var u=0,D=A.length,G;u<D;++u)G=A[u],G.vy+=(E[u]-G.y)*z[u]*C}function y(){if(A){var C,u=A.length;z=Array(u);E=Array(u);for(C=0;C<u;++C)z[C]=isNaN(E[C]=+v(A[C],C,A))?0:+B(A[C],C,A)}}var B=h(.1),A,z,E;"function"!==typeof v&&(v=h(null==v?0:+v));w.initialize=function(C){A=C;y()};
w.strength=function(C){return arguments.length?(B="function"===typeof C?C:h(+C),y(),w):B};w.y=function(C){return arguments.length?(v="function"===typeof C?C:h(+C),y(),w):v};return w};Object.defineProperty(r,"__esModule",{value:!0})})},{"d3-collection":157,"d3-dispatch":159,"d3-quadtree":164,"d3-timer":168}],161:[function(b,N,I){(function(r,q){"object"===typeof I&&"undefined"!==typeof N?q(I):(r=r||self,q(r.d3=r.d3||{}))})(this,function(r){function q(qa,pa){return qa.parent===pa.parent?1:2}function m(qa,
pa){return qa+pa.x}function l(qa,pa){return Math.max(qa,pa.y)}function a(qa){for(var pa;pa=qa.children;)qa=pa[0];return qa}function h(qa){for(var pa;pa=qa.children;)qa=pa[pa.length-1];return qa}function g(qa){var pa=0,na=qa.children,ka=na&&na.length;if(ka)for(;0<=--ka;)pa+=na[ka].value;else pa=1;qa.value=pa}function n(qa,pa){var na=new f(qa);qa=+qa.value&&(na.value=qa.value);var ka,ua=[na],va,Ca,Ma,Ua;for(null==pa&&(pa=p);ka=ua.pop();)if(qa&&(ka.value=+ka.data.value),(Ca=pa(ka.data))&&(Ua=Ca.length))for(ka.children=
Array(Ua),Ma=Ua-1;0<=Ma;--Ma)ua.push(va=ka.children[Ma]=new f(Ca[Ma])),va.parent=ka,va.depth=ka.depth+1;return na.eachBefore(e)}function p(qa){return qa.children}function d(qa){qa.data=qa.data.data}function e(qa){var pa=0;do qa.height=pa;while((qa=qa.parent)&&qa.height<++pa)}function f(qa){this.data=qa;this.depth=this.height=0;this.parent=null}function k(qa){var pa=0;qa=la.call(qa);for(var na=qa.length,ka,ua;na;)ua=Math.random()*na--|0,ka=qa[na],qa[na]=qa[ua],qa[ua]=ka;na=qa.length;ka=[];for(var va;pa<
na;)if(ua=qa[pa],va&&v(va,ua))++pa;else{a:if(pa=ka,w(ua,pa))pa=[ua];else{for(ka=0;ka<pa.length;++ka)if(t(ua,pa[ka])&&w(y(pa[ka],ua),pa)){pa=[pa[ka],ua];break a}for(ka=0;ka<pa.length-1;++ka)for(va=ka+1;va<pa.length;++va)if(t(y(pa[ka],pa[va]),ua)&&t(y(pa[ka],ua),pa[va])&&t(y(pa[va],ua),pa[ka])&&w(B(pa[ka],pa[va],ua),pa)){pa=[pa[ka],pa[va],ua];break a}throw Error();}a:{pa=ka=pa;switch(pa.length){case 1:pa=pa[0];pa={x:pa.x,y:pa.y,r:pa.r};break a;case 2:pa=y(pa[0],pa[1]);break a;case 3:pa=B(pa[0],pa[1],
pa[2]);break a}pa=void 0}va=pa;pa=0}return va}function t(qa,pa){var na=qa.r-pa.r,ka=pa.x-qa.x;qa=pa.y-qa.y;return 0>na||na*na<ka*ka+qa*qa}function v(qa,pa){var na=qa.r-pa.r+1E-6,ka=pa.x-qa.x;qa=pa.y-qa.y;return 0<na&&na*na>ka*ka+qa*qa}function w(qa,pa){for(var na=0;na<pa.length;++na)if(!v(qa,pa[na]))return!1;return!0}function y(qa,pa){var na=qa.x,ka=qa.y;qa=qa.r;var ua=pa.x,va=pa.y;pa=pa.r;var Ca=ua-na,Ma=va-ka,Ua=pa-qa,eb=Math.sqrt(Ca*Ca+Ma*Ma);return{x:(na+ua+Ca/eb*Ua)/2,y:(ka+va+Ma/eb*Ua)/2,r:(eb+
qa+pa)/2}}function B(qa,pa,na){var ka=qa.x,ua=qa.y;qa=qa.r;var va=pa.x,Ca=pa.y,Ma=pa.r,Ua=na.x,eb=na.y,fb=na.r;na=ka-va;pa=ka-Ua;var nb=ua-Ca,cb=ua-eb,$a=Ma-qa,jb=fb-qa,pb=ka*ka+ua*ua-qa*qa;Ca=pb-va*va-Ca*Ca+Ma*Ma;eb=pb-Ua*Ua-eb*eb+fb*fb;Ua=pa*nb-na*cb;va=(nb*eb-cb*Ca)/(2*Ua)-ka;nb=(cb*$a-nb*jb)/Ua;cb=(pa*Ca-na*eb)/(2*Ua)-ua;na=(na*jb-pa*$a)/Ua;pa=nb*nb+na*na-1;$a=2*(qa+va*nb+cb*na);qa=va*va+cb*cb-qa*qa;qa=-(pa?($a+Math.sqrt($a*$a-4*pa*qa))/(2*pa):qa/$a);return{x:ka+va+nb*qa,y:ua+cb+na*qa,r:qa}}function A(qa,
pa,na){var ka=qa.x-pa.x,ua=qa.y-pa.y,va=ka*ka+ua*ua;if(va){var Ca=pa.r+na.r;Ca*=Ca;var Ma=qa.r+na.r;Ma*=Ma;if(Ca>Ma){var Ua=(va+Ma-Ca)/(2*va);Ca=Math.sqrt(Math.max(0,Ma/va-Ua*Ua));na.x=qa.x-Ua*ka-Ca*ua;na.y=qa.y-Ua*ua+Ca*ka}else Ua=(va+Ca-Ma)/(2*va),Ca=Math.sqrt(Math.max(0,Ca/va-Ua*Ua)),na.x=pa.x+Ua*ka-Ca*ua,na.y=pa.y+Ua*ua+Ca*ka}else na.x=pa.x+na.r,na.y=pa.y}function z(qa,pa){var na=qa.r+pa.r-1E-6,ka=pa.x-qa.x;qa=pa.y-qa.y;return 0<na&&na*na>ka*ka+qa*qa}function E(qa){var pa=qa._,na=qa.next._,ka=
pa.r+na.r;qa=(pa.x*na.r+na.x*pa.r)/ka;pa=(pa.y*na.r+na.y*pa.r)/ka;return qa*qa+pa*pa}function C(qa){this._=qa;this.previous=this.next=null}function u(qa){if(!(na=qa.length))return 0;var pa,na;var ka=qa[0];ka.x=0;ka.y=0;if(!(1<na))return ka.r;var ua=qa[1];ka.x=-ua.r;ua.x=ka.r;ua.y=0;if(!(2<na))return ka.r+ua.r;A(ua,ka,pa=qa[2]);ka=new C(ka);ua=new C(ua);pa=new C(pa);ka.next=pa.previous=ua;ua.next=ka.previous=pa;pa.next=ua.previous=ka;var va=3;a:for(;va<na;++va){A(ka._,ua._,pa=qa[va]);pa=new C(pa);
var Ca=ua.next;var Ma=ka.previous;var Ua=ua._.r;var eb=ka._.r;do if(Ua<=eb){if(z(Ca._,pa._)){ua=Ca;ka.next=ua;ua.previous=ka;--va;continue a}Ua+=Ca._.r;Ca=Ca.next}else{if(z(Ma._,pa._)){ka=Ma;ka.next=ua;ua.previous=ka;--va;continue a}eb+=Ma._.r;Ma=Ma.previous}while(Ca!==Ma.next);pa.previous=ka;pa.next=ua;ka.next=ua.previous=ua=pa;for(Ca=E(ka);(pa=pa.next)!==ua;)(Ma=E(pa))<Ca&&(ka=pa,Ca=Ma);ua=ka.next}ka=[ua._];for(pa=ua;(pa=pa.next)!==ua;)ka.push(pa._);pa=k(ka);for(va=0;va<na;++va)ka=qa[va],ka.x-=
pa.x,ka.y-=pa.y;return pa.r}function D(qa){if("function"!==typeof qa)throw Error();return qa}function G(){return 0}function J(qa){return function(){return qa}}function L(qa){return Math.sqrt(qa.value)}function K(qa){return function(pa){pa.children||(pa.r=Math.max(0,+qa(pa)||0))}}function H(qa,pa){return function(na){if(ka=na.children){var ka,ua,va=ka.length,Ca=qa(na)*pa||0;if(Ca)for(ua=0;ua<va;++ua)ka[ua].r+=Ca;var Ma=u(ka);if(Ca)for(ua=0;ua<va;++ua)ka[ua].r-=Ca;na.r=Ma+Ca}}}function Q(qa){return function(pa){var na=
pa.parent;pa.r*=qa;na&&(pa.x=na.x+qa*pa.x,pa.y=na.y+qa*pa.y)}}function M(qa){qa.x0=Math.round(qa.x0);qa.y0=Math.round(qa.y0);qa.x1=Math.round(qa.x1);qa.y1=Math.round(qa.y1)}function P(qa,pa,na,ka,ua){var va=qa.children,Ca=-1,Ma=va.length;for(ka=qa.value&&(ka-pa)/qa.value;++Ca<Ma;)qa=va[Ca],qa.y0=na,qa.y1=ua,qa.x0=pa,qa.x1=pa+=qa.value*ka}function T(qa){return qa.id}function O(qa){return qa.parentId}function U(qa,pa){return qa.parent===pa.parent?1:2}function S(qa){var pa=qa.children;return pa?pa[0]:
qa.t}function X(qa){var pa=qa.children;return pa?pa[pa.length-1]:qa.t}function ba(qa,pa){this._=qa;this.A=this.children=this.parent=null;this.a=this;this.s=this.c=this.m=this.z=0;this.t=null;this.i=pa}function ca(qa){qa=new ba(qa,0);for(var pa,na=[qa],ka,ua,va;pa=na.pop();)if(ua=pa._.children)for(pa.children=Array(ka=ua.length),va=ka-1;0<=va;--va)na.push(ka=pa.children[va]=new ba(ua[va],va)),ka.parent=pa;(qa.parent=new ba(null,0)).children=[qa];return qa}function ia(qa,pa,na,ka,ua){var va=qa.children,
Ca=-1,Ma=va.length;for(ua=qa.value&&(ua-na)/qa.value;++Ca<Ma;)qa=va[Ca],qa.x0=pa,qa.x1=ka,qa.y0=na,qa.y1=na+=qa.value*ua}function ja(qa,pa,na,ka,ua,va){for(var Ca=[],Ma=pa.children,Ua,eb,fb=Ua=0,nb=Ma.length,cb,$a=pa.value,jb,pb,xa,Ea,Ia,Oa;Ua<nb;){pa=ua-na;cb=va-ka;do jb=Ma[fb++].value;while(!jb&&fb<nb);pb=xa=jb;Oa=Math.max(cb/pa,pa/cb)/($a*qa);Ea=jb*jb*Oa;for(Ia=Math.max(xa/Ea,Ea/pb);fb<nb;++fb){jb+=eb=Ma[fb].value;eb<pb&&(pb=eb);eb>xa&&(xa=eb);Ea=jb*jb*Oa;Ea=Math.max(xa/Ea,Ea/pb);if(Ea>Ia){jb-=
eb;break}Ia=Ea}Ca.push(Ua={value:jb,dice:pa<cb,children:Ma.slice(Ua,fb)});Ua.dice?P(Ua,na,ka,ua,$a?ka+=cb*jb/$a:va):ia(Ua,na,ka,$a?na+=pa*jb/$a:ua,va);$a-=jb;Ua=fb}return Ca}f.prototype=n.prototype={constructor:f,count:function(){return this.eachAfter(g)},each:function(qa){var pa,na=[this],ka;do{var ua=na.reverse();for(na=[];pa=ua.pop();)if(qa(pa),pa=pa.children){var va=0;for(ka=pa.length;va<ka;++va)na.push(pa[va])}}while(na.length);return this},eachAfter:function(qa){for(var pa,na=[this],ka=[],ua,
va;pa=na.pop();)if(ka.push(pa),pa=pa.children)for(ua=0,va=pa.length;ua<va;++ua)na.push(pa[ua]);for(;pa=ka.pop();)qa(pa);return this},eachBefore:function(qa){for(var pa,na=[this],ka;pa=na.pop();)if(qa(pa),pa=pa.children)for(ka=pa.length-1;0<=ka;--ka)na.push(pa[ka]);return this},sum:function(qa){return this.eachAfter(function(pa){for(var na=+qa(pa.data)||0,ka=pa.children,ua=ka&&ka.length;0<=--ua;)na+=ka[ua].value;pa.value=na})},sort:function(qa){return this.eachBefore(function(pa){pa.children&&pa.children.sort(qa)})},
path:function(qa){var pa=this;var na=pa;var ka=qa;if(na!==ka){var ua=na.ancestors(),va=ka.ancestors(),Ca=null;na=ua.pop();for(ka=va.pop();na===ka;)Ca=na,na=ua.pop(),ka=va.pop();na=Ca}for(ka=[pa];pa!==na;)pa=pa.parent,ka.push(pa);for(pa=ka.length;qa!==na;)ka.splice(pa,0,qa),qa=qa.parent;return ka},ancestors:function(){for(var qa=this,pa=[qa];qa=qa.parent;)pa.push(qa);return pa},descendants:function(){var qa=[];this.each(function(pa){qa.push(pa)});return qa},leaves:function(){var qa=[];this.eachBefore(function(pa){pa.children||
qa.push(pa)});return qa},links:function(){var qa=this,pa=[];qa.each(function(na){na!==qa&&pa.push({source:na.parent,target:na})});return pa},copy:function(){return n(this).eachBefore(d)}};var la=Array.prototype.slice,da={depth:-1},oa={};ba.prototype=Object.create(f.prototype);var sa=(1+Math.sqrt(5))/2,ma=function na(pa){function ka(ua,va,Ca,Ma,Ua){ja(pa,ua,va,Ca,Ma,Ua)}ka.ratio=function(ua){return na(1<(ua=+ua)?ua:1)};return ka}(sa);sa=function ka(na){function ua(va,Ca,Ma,Ua,eb){if((fb=va._squarify)&&
fb.ratio===na)for(var fb,nb,cb,$a=-1,jb,pb=fb.length,xa=va.value;++$a<pb;){va=fb[$a];nb=va.children;cb=va.value=0;for(jb=nb.length;cb<jb;++cb)va.value+=nb[cb].value;va.dice?P(va,Ca,Ma,Ua,Ma+=(eb-Ma)*va.value/xa):ia(va,Ca,Ma,Ca+=(Ua-Ca)*va.value/xa,eb);xa-=va.value}else va._squarify=fb=ja(na,va,Ca,Ma,Ua,eb),fb.ratio=na}ua.ratio=function(va){return ka(1<(va=+va)?va:1)};return ua}(sa);r.cluster=function(){function na(Ma){var Ua,eb=0;Ma.eachAfter(function(jb){var pb=jb.children;if(pb){var xa=pb.reduce(m,
0)/pb.length;jb.x=xa;jb.y=1+pb.reduce(l,0)}else jb.x=Ua?eb+=ka(jb,Ua):0,jb.y=0,Ua=jb});var fb=a(Ma),nb=h(Ma),cb=fb.x-ka(fb,nb)/2,$a=nb.x+ka(nb,fb)/2;return Ma.eachAfter(Ca?function(jb){jb.x=(jb.x-Ma.x)*ua;jb.y=(Ma.y-jb.y)*va}:function(jb){jb.x=(jb.x-cb)/($a-cb)*ua;jb.y=(1-(Ma.y?jb.y/Ma.y:1))*va})}var ka=q,ua=1,va=1,Ca=!1;na.separation=function(Ma){return arguments.length?(ka=Ma,na):ka};na.size=function(Ma){return arguments.length?(Ca=!1,ua=+Ma[0],va=+Ma[1],na):Ca?null:[ua,va]};na.nodeSize=function(Ma){return arguments.length?
(Ca=!0,ua=+Ma[0],va=+Ma[1],na):Ca?[ua,va]:null};return na};r.hierarchy=n;r.pack=function(){function na(Ma){Ma.x=ua/2;Ma.y=va/2;ka?Ma.eachBefore(K(ka)).eachAfter(H(Ca,.5)).eachBefore(Q(1)):Ma.eachBefore(K(L)).eachAfter(H(G,1)).eachAfter(H(Ca,Ma.r/Math.min(ua,va))).eachBefore(Q(Math.min(ua,va)/(2*Ma.r)));return Ma}var ka=null,ua=1,va=1,Ca=G;na.radius=function(Ma){return arguments.length?(ka=null==Ma?null:D(Ma),na):ka};na.size=function(Ma){return arguments.length?(ua=+Ma[0],va=+Ma[1],na):[ua,va]};na.padding=
function(Ma){return arguments.length?(Ca="function"===typeof Ma?Ma:J(+Ma),na):Ca};return na};r.packEnclose=k;r.packSiblings=function(na){u(na);return na};r.partition=function(){function na(Ua){var eb=Ua.height+1;Ua.x0=Ua.y0=Ca;Ua.x1=ua;Ua.y1=va/eb;Ua.eachBefore(ka(va,eb));Ma&&Ua.eachBefore(M);return Ua}function ka(Ua,eb){return function(fb){fb.children&&P(fb,fb.x0,Ua*(fb.depth+1)/eb,fb.x1,Ua*(fb.depth+2)/eb);var nb=fb.x0,cb=fb.y0,$a=fb.x1-Ca,jb=fb.y1-Ca;$a<nb&&(nb=$a=(nb+$a)/2);jb<cb&&(cb=jb=(cb+
jb)/2);fb.x0=nb;fb.y0=cb;fb.x1=$a;fb.y1=jb}}var ua=1,va=1,Ca=0,Ma=!1;na.round=function(Ua){return arguments.length?(Ma=!!Ua,na):Ma};na.size=function(Ua){return arguments.length?(ua=+Ua[0],va=+Ua[1],na):[ua,va]};na.padding=function(Ua){return arguments.length?(Ca=+Ua,na):Ca};return na};r.stratify=function(){function na(va){var Ca,Ma=va.length,Ua=Array(Ma),eb,fb={};for(Ca=0;Ca<Ma;++Ca){var nb=va[Ca];var cb=Ua[Ca]=new f(nb);null!=(eb=ka(nb,Ca,va))&&(eb+="")&&(nb="$"+(cb.id=eb),fb[nb]=nb in fb?oa:cb)}for(Ca=
0;Ca<Ma;++Ca)if(cb=Ua[Ca],eb=ua(va[Ca],Ca,va),null!=eb&&(eb+="")){nb=fb["$"+eb];if(!nb)throw Error("missing: "+eb);if(nb===oa)throw Error("ambiguous: "+eb);nb.children?nb.children.push(cb):nb.children=[cb];cb.parent=nb}else{if($a)throw Error("multiple roots");var $a=cb}if(!$a)throw Error("no root");$a.parent=da;$a.eachBefore(function(jb){jb.depth=jb.parent.depth+1;--Ma}).eachBefore(e);$a.parent=null;if(0<Ma)throw Error("cycle");return $a}var ka=T,ua=O;na.id=function(va){return arguments.length?(ka=
D(va),na):ka};na.parentId=function(va){return arguments.length?(ua=D(va),na):ua};return na};r.tree=function(){function na(fb){var nb=ca(fb);nb.eachAfter(ka);nb.parent.m=-nb.z;nb.eachBefore(ua);if(eb)fb.eachBefore(va);else{var cb=fb,$a=fb,jb=fb;fb.eachBefore(function(Ia){Ia.x<cb.x&&(cb=Ia);Ia.x>$a.x&&($a=Ia);Ia.depth>jb.depth&&(jb=Ia)});nb=cb===$a?1:Ca(cb,$a)/2;var pb=nb-cb.x,xa=Ma/($a.x+nb+pb),Ea=Ua/(jb.depth||1);fb.eachBefore(function(Ia){Ia.x=(Ia.x+pb)*xa;Ia.y=Ia.depth*Ea})}return fb}function ka(fb){var nb=
fb.children,cb=fb.parent.children,$a=fb.i?cb[fb.i-1]:null;if(nb){for(var jb=0,pb=0,xa=fb.children,Ea=xa.length,Ia;0<=--Ea;)Ia=xa[Ea],Ia.z+=jb,Ia.m+=jb,jb+=Ia.s+(pb+=Ia.c);nb=(nb[0].z+nb[nb.length-1].z)/2;$a?(fb.z=$a.z+Ca(fb._,$a._),fb.m=fb.z-nb):fb.z=nb}else $a&&(fb.z=$a.z+Ca(fb._,$a._));nb=fb.parent;cb=fb.parent.A||cb[0];if($a){pb=jb=fb;xa=jb.parent.children[0];Ea=jb.m;Ia=pb.m;for(var Oa=$a.m,bb=xa.m,Xa;$a=X($a),jb=S(jb),$a&&jb;){xa=S(xa);pb=X(pb);pb.a=fb;Xa=$a.z+Oa-jb.z-Ea+Ca($a._,jb._);if(0<Xa){var tb=
$a.a.parent===fb.parent?$a.a:cb,Ka=fb,Ta=Xa,Na=Ta/(Ka.i-tb.i);Ka.c-=Na;Ka.s+=Ta;tb.c+=Na;Ka.z+=Ta;Ka.m+=Ta;Ea+=Xa;Ia+=Xa}Oa+=$a.m;Ea+=jb.m;bb+=xa.m;Ia+=pb.m}$a&&!X(pb)&&(pb.t=$a,pb.m+=Oa-Ia);jb&&!S(xa)&&(xa.t=jb,xa.m+=Ea-bb,cb=fb)}nb.A=cb}function ua(fb){fb._.x=fb.z+fb.parent.m;fb.m+=fb.parent.m}function va(fb){fb.x*=Ma;fb.y=fb.depth*Ua}var Ca=U,Ma=1,Ua=1,eb=null;na.separation=function(fb){return arguments.length?(Ca=fb,na):Ca};na.size=function(fb){return arguments.length?(eb=!1,Ma=+fb[0],Ua=+fb[1],
na):eb?null:[Ma,Ua]};na.nodeSize=function(fb){return arguments.length?(eb=!0,Ma=+fb[0],Ua=+fb[1],na):eb?[Ma,Ua]:null};return na};r.treemap=function(){function na(jb){jb.x0=jb.y0=0;jb.x1=Ca;jb.y1=Ma;jb.eachBefore(ka);Ua=[0];va&&jb.eachBefore(M);return jb}function ka(jb){var pb=Ua[jb.depth],xa=jb.x0+pb,Ea=jb.y0+pb,Ia=jb.x1-pb,Oa=jb.y1-pb;Ia<xa&&(xa=Ia=(xa+Ia)/2);Oa<Ea&&(Ea=Oa=(Ea+Oa)/2);jb.x0=xa;jb.y0=Ea;jb.x1=Ia;jb.y1=Oa;jb.children&&(pb=Ua[jb.depth+1]=eb(jb)/2,xa+=$a(jb)-pb,Ea+=fb(jb)-pb,Ia-=nb(jb)-
pb,Oa-=cb(jb)-pb,Ia<xa&&(xa=Ia=(xa+Ia)/2),Oa<Ea&&(Ea=Oa=(Ea+Oa)/2),ua(jb,xa,Ea,Ia,Oa))}var ua=ma,va=!1,Ca=1,Ma=1,Ua=[0],eb=G,fb=G,nb=G,cb=G,$a=G;na.round=function(jb){return arguments.length?(va=!!jb,na):va};na.size=function(jb){return arguments.length?(Ca=+jb[0],Ma=+jb[1],na):[Ca,Ma]};na.tile=function(jb){return arguments.length?(ua=D(jb),na):ua};na.padding=function(jb){return arguments.length?na.paddingInner(jb).paddingOuter(jb):na.paddingInner()};na.paddingInner=function(jb){return arguments.length?
(eb="function"===typeof jb?jb:J(+jb),na):eb};na.paddingOuter=function(jb){return arguments.length?na.paddingTop(jb).paddingRight(jb).paddingBottom(jb).paddingLeft(jb):na.paddingTop()};na.paddingTop=function(jb){return arguments.length?(fb="function"===typeof jb?jb:J(+jb),na):fb};na.paddingRight=function(jb){return arguments.length?(nb="function"===typeof jb?jb:J(+jb),na):nb};na.paddingBottom=function(jb){return arguments.length?(cb="function"===typeof jb?jb:J(+jb),na):cb};na.paddingLeft=function(jb){return arguments.length?
($a="function"===typeof jb?jb:J(+jb),na):$a};return na};r.treemapBinary=function(na,ka,ua,va,Ca){function Ma($a,jb,pb,xa,Ea,Ia,Oa){if($a>=jb-1)$a=Ua[$a],$a.x0=xa,$a.y0=Ea,$a.x1=Ia,$a.y1=Oa;else{for(var bb=cb[$a],Xa=pb/2+bb,tb=$a+1,Ka=jb-1;tb<Ka;){var Ta=tb+Ka>>>1;cb[Ta]<Xa?tb=Ta+1:Ka=Ta}Xa-cb[tb-1]<cb[tb]-Xa&&$a+1<tb&&--tb;bb=cb[tb]-bb;Xa=pb-bb;Ia-xa>Oa-Ea?(pb=(xa*Xa+Ia*bb)/pb,Ma($a,tb,bb,xa,Ea,pb,Oa),Ma(tb,jb,Xa,pb,Ea,Ia,Oa)):(pb=(Ea*Xa+Oa*bb)/pb,Ma($a,tb,bb,xa,Ea,Ia,pb),Ma(tb,jb,Xa,xa,pb,Ia,Oa))}}
var Ua=na.children,eb,fb=Ua.length,nb,cb=Array(fb+1);for(cb[0]=nb=eb=0;eb<fb;++eb)cb[eb+1]=nb+=Ua[eb].value;Ma(0,fb,na.value,ka,ua,va,Ca)};r.treemapDice=P;r.treemapResquarify=sa;r.treemapSlice=ia;r.treemapSliceDice=function(na,ka,ua,va,Ca){(na.depth&1?ia:P)(na,ka,ua,va,Ca)};r.treemapSquarify=ma;Object.defineProperty(r,"__esModule",{value:!0})})},{}],162:[function(b,N,I){(function(r,q){"object"===typeof I&&"undefined"!==typeof N?q(I,b("d3-color")):(r=r||self,q(r.d3=r.d3||{},r.d3))})(this,function(r,
q){function m(na,ka,ua,va,Ca){var Ma=na*na,Ua=Ma*na;return((1-3*na+3*Ma-Ua)*ka+(4-6*Ma+3*Ua)*ua+(1+3*na+3*Ma-3*Ua)*va+Ua*Ca)/6}function l(na){var ka=na.length-1;return function(ua){var va=0>=ua?ua=0:1<=ua?(ua=1,ka-1):Math.floor(ua*ka),Ca=na[va],Ma=na[va+1];return m((ua-va/ka)*ka,0<va?na[va-1]:2*Ca-Ma,Ca,Ma,va<ka-1?na[va+2]:2*Ma-Ca)}}function a(na){var ka=na.length;return function(ua){var va=Math.floor((0>(ua%=1)?++ua:ua)*ka);return m((ua-va/ka)*ka,na[(va+ka-1)%ka],na[va%ka],na[(va+1)%ka],na[(va+2)%
ka])}}function h(na){return function(){return na}}function g(na,ka){return function(ua){return na+ua*ka}}function n(na,ka,ua){return na=Math.pow(na,ua),ka=Math.pow(ka,ua)-na,ua=1/ua,function(va){return Math.pow(na+va*ka,ua)}}function p(na,ka){var ua=ka-na;return ua?g(na,180<ua||-180>ua?ua-360*Math.round(ua/360):ua):h(isNaN(na)?ka:na)}function d(na){return 1===(na=+na)?e:function(ka,ua){return ua-ka?n(ka,ua,na):h(isNaN(ka)?ua:ka)}}function e(na,ka){var ua=ka-na;return ua?g(na,ua):h(isNaN(na)?ka:na)}
function f(na){return function(ka){var ua=ka.length,va=Array(ua),Ca=Array(ua),Ma=Array(ua),Ua;for(Ua=0;Ua<ua;++Ua){var eb=q.rgb(ka[Ua]);va[Ua]=eb.r||0;Ca[Ua]=eb.g||0;Ma[Ua]=eb.b||0}va=na(va);Ca=na(Ca);Ma=na(Ma);eb.opacity=1;return function(fb){eb.r=va(fb);eb.g=Ca(fb);eb.b=Ma(fb);return eb+""}}}function k(na,ka){ka||(ka=[]);var ua=na?Math.min(ka.length,na.length):0,va=ka.slice(),Ca;return function(Ma){for(Ca=0;Ca<ua;++Ca)va[Ca]=na[Ca]*(1-Ma)+ka[Ca]*Ma;return va}}function t(na){return ArrayBuffer.isView(na)&&
!(na instanceof DataView)}function v(na,ka){var ua=ka?ka.length:0,va=na?Math.min(ua,na.length):0,Ca=Array(va),Ma=Array(ua),Ua;for(Ua=0;Ua<va;++Ua)Ca[Ua]=C(na[Ua],ka[Ua]);for(;Ua<ua;++Ua)Ma[Ua]=ka[Ua];return function(eb){for(Ua=0;Ua<va;++Ua)Ma[Ua]=Ca[Ua](eb);return Ma}}function w(na,ka){var ua=new Date;return na=+na,ka=+ka,function(va){return ua.setTime(na*(1-va)+ka*va),ua}}function y(na,ka){return na=+na,ka=+ka,function(ua){return na*(1-ua)+ka*ua}}function B(na,ka){var ua={},va={},Ca;if(null===na||
"object"!==typeof na)na={};if(null===ka||"object"!==typeof ka)ka={};for(Ca in ka)Ca in na?ua[Ca]=C(na[Ca],ka[Ca]):va[Ca]=ka[Ca];return function(Ma){for(Ca in ua)va[Ca]=ua[Ca](Ma);return va}}function A(na){return function(){return na}}function z(na){return function(ka){return na(ka)+""}}function E(na,ka){var ua=P.lastIndex=T.lastIndex=0,va,Ca,Ma,Ua=-1,eb=[],fb=[];na+="";for(ka+="";(va=P.exec(na))&&(Ca=T.exec(ka));)(Ma=Ca.index)>ua&&(Ma=ka.slice(ua,Ma),eb[Ua]?eb[Ua]+=Ma:eb[++Ua]=Ma),(va=va[0])===(Ca=
Ca[0])?eb[Ua]?eb[Ua]+=Ca:eb[++Ua]=Ca:(eb[++Ua]=null,fb.push({i:Ua,x:y(va,Ca)})),ua=T.lastIndex;ua<ka.length&&(Ma=ka.slice(ua),eb[Ua]?eb[Ua]+=Ma:eb[++Ua]=Ma);return 2>eb.length?fb[0]?z(fb[0].x):A(ka):(ka=fb.length,function(nb){for(var cb=0,$a;cb<ka;++cb)eb[($a=fb[cb]).i]=$a.x(nb);return eb.join("")})}function C(na,ka){var ua=typeof ka,va;return null==ka||"boolean"===ua?h(ka):("number"===ua?y:"string"===ua?(va=q.color(ka))?(ka=va,H):E:ka instanceof q.color?H:ka instanceof Date?w:t(ka)?k:Array.isArray(ka)?
v:"function"!==typeof ka.valueOf&&"function"!==typeof ka.toString||isNaN(ka)?B:y)(na,ka)}function u(na,ka,ua,va,Ca,Ma){var Ua,eb,fb;if(Ua=Math.sqrt(na*na+ka*ka))na/=Ua,ka/=Ua;if(fb=na*ua+ka*va)ua-=na*fb,va-=ka*fb;if(eb=Math.sqrt(ua*ua+va*va))ua/=eb,va/=eb,fb/=eb;na*va<ka*ua&&(na=-na,ka=-ka,fb=-fb,Ua=-Ua);return{translateX:Ca,translateY:Ma,rotate:Math.atan2(ka,na)*O,skewX:Math.atan(fb)*O,scaleX:Ua,scaleY:eb}}function D(na,ka,ua,va){function Ca(nb){return nb.length?nb.pop()+" ":""}function Ma(nb,cb,
$a,jb,pb,xa){nb!==$a||cb!==jb?(pb=pb.push("translate(",null,ka,null,ua),xa.push({i:pb-4,x:y(nb,$a)},{i:pb-2,x:y(cb,jb)})):($a||jb)&&pb.push("translate("+$a+ka+jb+ua)}function Ua(nb,cb,$a,jb){nb!==cb?(180<nb-cb?cb+=360:180<cb-nb&&(nb+=360),jb.push({i:$a.push(Ca($a)+"rotate(",null,va)-2,x:y(nb,cb)})):cb&&$a.push(Ca($a)+"rotate("+cb+va)}function eb(nb,cb,$a,jb){nb!==cb?jb.push({i:$a.push(Ca($a)+"skewX(",null,va)-2,x:y(nb,cb)}):cb&&$a.push(Ca($a)+"skewX("+cb+va)}function fb(nb,cb,$a,jb,pb,xa){nb!==$a||
cb!==jb?(pb=pb.push(Ca(pb)+"scale(",null,",",null,")"),xa.push({i:pb-4,x:y(nb,$a)},{i:pb-2,x:y(cb,jb)})):1===$a&&1===jb||pb.push(Ca(pb)+"scale("+$a+","+jb+")")}return function(nb,cb){var $a=[],jb=[];nb=na(nb);cb=na(cb);Ma(nb.translateX,nb.translateY,cb.translateX,cb.translateY,$a,jb);Ua(nb.rotate,cb.rotate,$a,jb);eb(nb.skewX,cb.skewX,$a,jb);fb(nb.scaleX,nb.scaleY,cb.scaleX,cb.scaleY,$a,jb);nb=cb=null;return function(pb){for(var xa=-1,Ea=jb.length,Ia;++xa<Ea;)$a[(Ia=jb[xa]).i]=Ia.x(pb);return $a.join("")}}}
function G(na){return((na=Math.exp(na))+1/na)/2}function J(na){return function(ka,ua){var va=na((ka=q.hsl(ka)).h,(ua=q.hsl(ua)).h),Ca=e(ka.s,ua.s),Ma=e(ka.l,ua.l),Ua=e(ka.opacity,ua.opacity);return function(eb){ka.h=va(eb);ka.s=Ca(eb);ka.l=Ma(eb);ka.opacity=Ua(eb);return ka+""}}}function L(na){return function(ka,ua){var va=na((ka=q.hcl(ka)).h,(ua=q.hcl(ua)).h),Ca=e(ka.c,ua.c),Ma=e(ka.l,ua.l),Ua=e(ka.opacity,ua.opacity);return function(eb){ka.h=va(eb);ka.c=Ca(eb);ka.l=Ma(eb);ka.opacity=Ua(eb);return ka+
""}}}function K(na){return function va(ua){function Ca(Ma,Ua){var eb=na((Ma=q.cubehelix(Ma)).h,(Ua=q.cubehelix(Ua)).h),fb=e(Ma.s,Ua.s),nb=e(Ma.l,Ua.l),cb=e(Ma.opacity,Ua.opacity);return function($a){Ma.h=eb($a);Ma.s=fb($a);Ma.l=nb(Math.pow($a,ua));Ma.opacity=cb($a);return Ma+""}}ua=+ua;Ca.gamma=va;return Ca}(1)}var H=function ua(ka){function va(Ma,Ua){var eb=Ca((Ma=q.rgb(Ma)).r,(Ua=q.rgb(Ua)).r),fb=Ca(Ma.g,Ua.g),nb=Ca(Ma.b,Ua.b),cb=e(Ma.opacity,Ua.opacity);return function($a){Ma.r=eb($a);Ma.g=fb($a);
Ma.b=nb($a);Ma.opacity=cb($a);return Ma+""}}var Ca=d(ka);va.gamma=ua;return va}(1),Q=f(l),M=f(a),P=/[-+]?(?:\d+\.?\d*|\.?\d+)(?:[eE][-+]?\d+)?/g,T=new RegExp(P.source,"g"),O=180/Math.PI,U={translateX:0,translateY:0,rotate:0,skewX:0,scaleX:1,scaleY:1},S,X,ba,ca,ia=D(function(ka){if("none"===ka)return U;S||(S=document.createElement("DIV"),X=document.documentElement,ba=document.defaultView);S.style.transform=ka;ka=ba.getComputedStyle(X.appendChild(S),null).getPropertyValue("transform");X.removeChild(S);
ka=ka.slice(7,-1).split(",");return u(+ka[0],+ka[1],+ka[2],+ka[3],+ka[4],+ka[5])},"px, ","px)","deg)"),ja=D(function(ka){if(null==ka)return U;ca||(ca=document.createElementNS("http://www.w3.org/2000/svg","g"));ca.setAttribute("transform",ka);if(!(ka=ca.transform.baseVal.consolidate()))return U;ka=ka.matrix;return u(ka.a,ka.b,ka.c,ka.d,ka.e,ka.f)},", ",")",")"),la=Math.SQRT2,da=J(p),oa=J(e),sa=L(p),ma=L(e),qa=K(p),pa=K(e);r.interpolate=C;r.interpolateArray=function(ka,ua){return(t(ua)?k:v)(ka,ua)};
r.interpolateBasis=l;r.interpolateBasisClosed=a;r.interpolateCubehelix=qa;r.interpolateCubehelixLong=pa;r.interpolateDate=w;r.interpolateDiscrete=function(ka){var ua=ka.length;return function(va){return ka[Math.max(0,Math.min(ua-1,Math.floor(va*ua)))]}};r.interpolateHcl=sa;r.interpolateHclLong=ma;r.interpolateHsl=da;r.interpolateHslLong=oa;r.interpolateHue=function(ka,ua){var va=p(+ka,+ua);return function(Ca){Ca=va(Ca);return Ca-360*Math.floor(Ca/360)}};r.interpolateLab=function(ka,ua){var va=e((ka=
q.lab(ka)).l,(ua=q.lab(ua)).l),Ca=e(ka.a,ua.a),Ma=e(ka.b,ua.b),Ua=e(ka.opacity,ua.opacity);return function(eb){ka.l=va(eb);ka.a=Ca(eb);ka.b=Ma(eb);ka.opacity=Ua(eb);return ka+""}};r.interpolateNumber=y;r.interpolateNumberArray=k;r.interpolateObject=B;r.interpolateRgb=H;r.interpolateRgbBasis=Q;r.interpolateRgbBasisClosed=M;r.interpolateRound=function(ka,ua){return ka=+ka,ua=+ua,function(va){return Math.round(ka*(1-va)+ua*va)}};r.interpolateString=E;r.interpolateTransformCss=ia;r.interpolateTransformSvg=
ja;r.interpolateZoom=function(ka,ua){var va=ka[0],Ca=ka[1],Ma=ka[2];ka=ua[2];var Ua=ua[0]-va,eb=ua[1]-Ca,fb=Ua*Ua+eb*eb;if(1E-12>fb){var nb=Math.log(ka/Ma)/la;ka=function(jb){return[va+jb*Ua,Ca+jb*eb,Ma*Math.exp(la*jb*nb)]}}else{var cb=Math.sqrt(fb);ua=(ka*ka-Ma*Ma+4*fb)/(4*Ma*cb);ka=(ka*ka-Ma*Ma-4*fb)/(4*ka*cb);var $a=Math.log(Math.sqrt(ua*ua+1)-ua);nb=(Math.log(Math.sqrt(ka*ka+1)-ka)-$a)/la;ka=function(jb){jb*=nb;var pb=G($a),xa=la*jb+$a;var Ea=((xa=Math.exp(2*xa))-1)/(xa+1);var Ia=$a;xa=((Ia=Math.exp(Ia))-
1/Ia)/2;Ea=Ma/(2*cb)*(pb*Ea-xa);return[va+Ea*Ua,Ca+Ea*eb,Ma*pb/G(la*jb+$a)]}}ka.duration=1E3*nb;return ka};r.piecewise=function(ka,ua){for(var va=0,Ca=ua.length-1,Ma=ua[0],Ua=Array(0>Ca?0:Ca);va<Ca;)Ua[va]=ka(Ma,Ma=ua[++va]);return function(eb){var fb=Math.max(0,Math.min(Ca-1,Math.floor(eb*=Ca)));return Ua[fb](eb-fb)}};r.quantize=function(ka,ua){for(var va=Array(ua),Ca=0;Ca<ua;++Ca)va[Ca]=ka(Ca/(ua-1));return va};Object.defineProperty(r,"__esModule",{value:!0})})},{"d3-color":158}],163:[function(b,
N,I){(function(r,q){"object"===typeof I&&"undefined"!==typeof N?q(I):(r=r||self,q(r.d3=r.d3||{}))})(this,function(r){function q(){this._x0=this._y0=this._x1=this._y1=null;this._=""}function m(){return new q}var l=Math.PI,a=2*l,h=a-1E-6;q.prototype=m.prototype={constructor:q,moveTo:function(g,n){this._+="M"+(this._x0=this._x1=+g)+","+(this._y0=this._y1=+n)},closePath:function(){null!==this._x1&&(this._x1=this._x0,this._y1=this._y0,this._+="Z")},lineTo:function(g,n){this._+="L"+(this._x1=+g)+","+(this._y1=
+n)},quadraticCurveTo:function(g,n,p,d){this._+="Q"+ +g+","+ +n+","+(this._x1=+p)+","+(this._y1=+d)},bezierCurveTo:function(g,n,p,d,e,f){this._+="C"+ +g+","+ +n+","+ +p+","+ +d+","+(this._x1=+e)+","+(this._y1=+f)},arcTo:function(g,n,p,d,e){g=+g;n=+n;p=+p;d=+d;e=+e;var f=this._x1,k=this._y1,t=p-g,v=d-n,w=f-g,y=k-n,B=w*w+y*y;if(0>e)throw Error("negative radius: "+e);if(null===this._x1)this._+="M"+(this._x1=g)+","+(this._y1=n);else if(1E-6<B)if(1E-6<Math.abs(y*t-v*w)&&e){p-=f;d-=k;var A=t*t+v*v;k=Math.sqrt(A);
f=Math.sqrt(B);B=e*Math.tan((l-Math.acos((A+B-(p*p+d*d))/(2*k*f)))/2);f=B/f;B/=k;1E-6<Math.abs(f-1)&&(this._+="L"+(g+f*w)+","+(n+f*y));this._+="A"+e+","+e+",0,0,"+ +(y*p>w*d)+","+(this._x1=g+B*t)+","+(this._y1=n+B*v)}else this._+="L"+(this._x1=g)+","+(this._y1=n)},arc:function(g,n,p,d,e,f){g=+g;n=+n;p=+p;f=!!f;var k=p*Math.cos(d),t=p*Math.sin(d),v=g+k,w=n+t,y=1^f;d=f?d-e:e-d;if(0>p)throw Error("negative radius: "+p);if(null===this._x1)this._+="M"+v+","+w;else if(1E-6<Math.abs(this._x1-v)||1E-6<Math.abs(this._y1-
w))this._+="L"+v+","+w;p&&(0>d&&(d=d%a+a),d>h?this._+="A"+p+","+p+",0,1,"+y+","+(g-k)+","+(n-t)+"A"+p+","+p+",0,1,"+y+","+(this._x1=v)+","+(this._y1=w):1E-6<d&&(this._+="A"+p+","+p+",0,"+ +(d>=l)+","+y+","+(this._x1=g+p*Math.cos(e))+","+(this._y1=n+p*Math.sin(e))))},rect:function(g,n,p,d){this._+="M"+(this._x0=this._x1=+g)+","+(this._y0=this._y1=+n)+"h"+ +p+"v"+ +d+"h"+-p+"Z"},toString:function(){return this._}};r.path=m;Object.defineProperty(r,"__esModule",{value:!0})})},{}],164:[function(b,N,I){(function(r,
q){"object"===typeof I&&"undefined"!==typeof N?q(I):(r=r||self,q(r.d3=r.d3||{}))})(this,function(r){function q(d,e,f,k){if(isNaN(e)||isNaN(f))return d;var t,v=d._root;k={data:k};var w=d._x0,y=d._y0,B=d._x1,A=d._y1,z,E,C,u;if(!v)return d._root=k,d;for(;v.length;)if((C=e>=(z=(w+B)/2))?w=z:B=z,(u=f>=(E=(y+A)/2))?y=E:A=E,t=v,!(v=v[C|=u<<1]))return t[C]=k,d;var D=+d._x.call(null,v.data);var G=+d._y.call(null,v.data);if(e===D&&f===G)return k.next=v,t?t[C]=k:d._root=k,d;do t=t?t[C]=Array(4):d._root=Array(4),
(C=e>=(z=(w+B)/2))?w=z:B=z,(u=f>=(E=(y+A)/2))?y=E:A=E;while((C|=u<<1)===(u=(G>=E)<<1|D>=z));return t[u]=v,t[C]=k,d}function m(d,e,f,k,t){this.node=d;this.x0=e;this.y0=f;this.x1=k;this.y1=t}function l(d){return d[0]}function a(d){return d[1]}function h(d,e,f){e=new g(null==e?l:e,null==f?a:f,NaN,NaN,NaN,NaN);return null==d?e:e.addAll(d)}function g(d,e,f,k,t,v){this._x=d;this._y=e;this._x0=f;this._y0=k;this._x1=t;this._y1=v;this._root=void 0}function n(d){for(var e={data:d.data},f=e;d=d.next;)f=f.next=
{data:d.data};return e}var p=h.prototype=g.prototype;p.copy=function(){var d=new g(this._x,this._y,this._x0,this._y0,this._x1,this._y1),e=this._root,f,k;if(!e)return d;if(!e.length)return d._root=n(e),d;for(f=[{source:e,target:d._root=Array(4)}];e=f.pop();)for(var t=0;4>t;++t)if(k=e.source[t])k.length?f.push({source:k,target:e.target[t]=Array(4)}):e.target[t]=n(k);return d};p.add=function(d){var e=+this._x.call(null,d),f=+this._y.call(null,d);return q(this.cover(e,f),e,f,d)};p.addAll=function(d){var e,
f,k=d.length,t,v,w=Array(k),y=Array(k),B=Infinity,A=Infinity,z=-Infinity,E=-Infinity;for(f=0;f<k;++f)isNaN(t=+this._x.call(null,e=d[f]))||isNaN(v=+this._y.call(null,e))||(w[f]=t,y[f]=v,t<B&&(B=t),t>z&&(z=t),v<A&&(A=v),v>E&&(E=v));if(B>z||A>E)return this;this.cover(B,A).cover(z,E);for(f=0;f<k;++f)q(this,w[f],y[f],d[f]);return this};p.cover=function(d,e){if(isNaN(d=+d)||isNaN(e=+e))return this;var f=this._x0,k=this._y0,t=this._x1,v=this._y1;if(isNaN(f))t=(f=Math.floor(d))+1,v=(k=Math.floor(e))+1;else{for(var w=
t-f,y=this._root,B,A;f>d||d>=t||k>e||e>=v;)switch(A=(e<k)<<1|d<f,B=Array(4),B[A]=y,y=B,w*=2,A){case 0:t=f+w;v=k+w;break;case 1:f=t-w;v=k+w;break;case 2:t=f+w;k=v-w;break;case 3:f=t-w,k=v-w}this._root&&this._root.length&&(this._root=y)}this._x0=f;this._y0=k;this._x1=t;this._y1=v;return this};p.data=function(){var d=[];this.visit(function(e){if(!e.length){do d.push(e.data);while(e=e.next)}});return d};p.extent=function(d){return arguments.length?this.cover(+d[0][0],+d[0][1]).cover(+d[1][0],+d[1][1]):
isNaN(this._x0)?void 0:[[this._x0,this._y0],[this._x1,this._y1]]};p.find=function(d,e,f){var k=this._x0,t=this._y0,v,w,y,B,A=this._x1,z=this._y1,E=[],C=this._root,u;C&&E.push(new m(C,k,t,A,z));null==f?f=Infinity:(k=d-f,t=e-f,A=d+f,z=e+f,f*=f);for(;u=E.pop();)if(!(!(C=u.node)||(v=u.x0)>A||(w=u.y0)>z||(y=u.x1)<k||(B=u.y1)<t))if(C.length){u=(v+y)/2;var D=(w+B)/2;E.push(new m(C[3],u,D,y,B),new m(C[2],v,D,u,B),new m(C[1],u,w,y,D),new m(C[0],v,w,u,D));if(C=(e>=D)<<1|d>=u)u=E[E.length-1],E[E.length-1]=E[E.length-
1-C],E[E.length-1-C]=u}else if(u=d-+this._x.call(null,C.data),D=e-+this._y.call(null,C.data),u=u*u+D*D,u<f){var G=Math.sqrt(f=u);k=d-G;t=e-G;A=d+G;z=e+G;G=C.data}return G};p.remove=function(d){if(isNaN(B=+this._x.call(null,d))||isNaN(A=+this._y.call(null,d)))return this;var e,f=this._root,k,t=this._x0,v=this._y0,w=this._x1,y=this._y1,B,A,z,E,C,u;if(!f)return this;if(f.length)for(;;){(C=B>=(z=(t+w)/2))?t=z:w=z;(u=A>=(E=(v+y)/2))?v=E:y=E;if(!(e=f,f=f[C|=u<<1]))return this;if(!f.length)break;if(e[C+
1&3]||e[C+2&3]||e[C+3&3]){var D=e;var G=C}}for(;f.data!==d;)if(!(k=f,f=f.next))return this;(d=f.next)&&delete f.next;if(k)return d?k.next=d:delete k.next,this;if(!e)return this._root=d,this;d?e[C]=d:delete e[C];(f=e[0]||e[1]||e[2]||e[3])&&f===(e[3]||e[2]||e[1]||e[0])&&!f.length&&(D?D[G]=f:this._root=f);return this};p.removeAll=function(d){for(var e=0,f=d.length;e<f;++e)this.remove(d[e]);return this};p.root=function(){return this._root};p.size=function(){var d=0;this.visit(function(e){if(!e.length){do++d;
while(e=e.next)}});return d};p.visit=function(d){var e=[],f,k=this._root,t,v,w,y;for(k&&e.push(new m(k,this._x0,this._y0,this._x1,this._y1));f=e.pop();)if(!d(k=f.node,v=f.x0,w=f.y0,y=f.x1,f=f.y1)&&k.length){var B=(v+y)/2,A=(w+f)/2;(t=k[3])&&e.push(new m(t,B,A,y,f));(t=k[2])&&e.push(new m(t,v,A,B,f));(t=k[1])&&e.push(new m(t,B,w,y,A));(t=k[0])&&e.push(new m(t,v,w,B,A))}return this};p.visitAfter=function(d){var e=[],f=[],k;for(this._root&&e.push(new m(this._root,this._x0,this._y0,this._x1,this._y1));k=
e.pop();){var t=k.node;if(t.length){var v,w=k.x0,y=k.y0,B=k.x1,A=k.y1,z=(w+B)/2,E=(y+A)/2;(v=t[0])&&e.push(new m(v,w,y,z,E));(v=t[1])&&e.push(new m(v,z,y,B,E));(v=t[2])&&e.push(new m(v,w,E,z,A));(v=t[3])&&e.push(new m(v,z,E,B,A))}f.push(k)}for(;k=f.pop();)d(k.node,k.x0,k.y0,k.x1,k.y1);return this};p.x=function(d){return arguments.length?(this._x=d,this):this._x};p.y=function(d){return arguments.length?(this._y=d,this):this._y};r.quadtree=h;Object.defineProperty(r,"__esModule",{value:!0})})},{}],165:[function(b,
N,I){(function(r,q){"object"===typeof I&&"undefined"!==typeof N?q(I,b("d3-path")):(r=r||self,q(r.d3=r.d3||{},r.d3))})(this,function(r,q){function m(gb){return function(){return gb}}function l(gb){return 1<=gb?Ka:-1>=gb?-Ka:Math.asin(gb)}function a(gb){return gb.innerRadius}function h(gb){return gb.outerRadius}function g(gb){return gb.startAngle}function n(gb){return gb.endAngle}function p(gb){return gb&&gb.padAngle}function d(gb,vb,Sb,ic,ac,bc,Ub){var wb=gb-Sb,Lb=vb-ic;Ub=(Ub?bc:-bc)/Xa(wb*wb+Lb*
Lb);Lb*=Ub;wb*=-Ub;var Bb=gb+Lb,Mb=vb+wb,Yb=Sb+Lb,qc=ic+wb;Sb=(Bb+Yb)/2;ic=(Mb+qc)/2;vb=Yb-Bb;gb=qc-Mb;Ub=vb*vb+gb*gb;bc=ac-bc;qc=Bb*qc-Yb*Mb;var Tc=(0>gb?-1:1)*Xa(Ia(0,bc*bc*Ub-qc*qc));Bb=(qc*gb-vb*Tc)/Ub;Mb=(-qc*vb-gb*Tc)/Ub;Yb=(qc*gb+vb*Tc)/Ub;vb=(-qc*vb+gb*Tc)/Ub;gb=Bb-Sb;Ub=Mb-ic;Sb=Yb-Sb;ic=vb-ic;gb*gb+Ub*Ub>Sb*Sb+ic*ic&&(Bb=Yb,Mb=vb);return{cx:Bb,cy:Mb,x01:-Lb,y01:-wb,x11:Bb*(ac/bc-1),y11:Mb*(ac/bc-1)}}function e(gb){this._context=gb}function f(gb){return new e(gb)}function k(gb){return gb[0]}
function t(gb){return gb[1]}function v(){function gb(wb){var Lb,Bb=wb.length,Mb,Yb=!1,qc;null==ac&&(Ub=bc(qc=q.path()));for(Lb=0;Lb<=Bb;++Lb)!(Lb<Bb&&ic(Mb=wb[Lb],Lb,wb))===Yb&&((Yb=!Yb)?Ub.lineStart():Ub.lineEnd()),Yb&&Ub.point(+vb(Mb,Lb,wb),+Sb(Mb,Lb,wb));if(qc)return Ub=null,qc+""||null}var vb=k,Sb=t,ic=m(!0),ac=null,bc=f,Ub=null;gb.x=function(wb){return arguments.length?(vb="function"===typeof wb?wb:m(+wb),gb):vb};gb.y=function(wb){return arguments.length?(Sb="function"===typeof wb?wb:m(+wb),
gb):Sb};gb.defined=function(wb){return arguments.length?(ic="function"===typeof wb?wb:m(!!wb),gb):ic};gb.curve=function(wb){return arguments.length?(bc=wb,null!=ac&&(Ub=bc(ac)),gb):bc};gb.context=function(wb){return arguments.length?(null==wb?ac=Ub=null:Ub=bc(ac=wb),gb):ac};return gb}function w(){function gb(Mb){var Yb,qc,Tc=Mb.length,Yc,ad=!1,ec,Fc=Array(Tc),dd=Array(Tc);null==wb&&(Bb=Lb(ec=q.path()));for(Yb=0;Yb<=Tc;++Yb){if(!(Yb<Tc&&Ub(Yc=Mb[Yb],Yb,Mb))===ad)if(ad=!ad){var Ac=Yb;Bb.areaStart();
Bb.lineStart()}else{Bb.lineEnd();Bb.lineStart();for(qc=Yb-1;qc>=Ac;--qc)Bb.point(Fc[qc],dd[qc]);Bb.lineEnd();Bb.areaEnd()}ad&&(Fc[Yb]=+Sb(Yc,Yb,Mb),dd[Yb]=+ac(Yc,Yb,Mb),Bb.point(ic?+ic(Yc,Yb,Mb):Fc[Yb],bc?+bc(Yc,Yb,Mb):dd[Yb]))}if(ec)return Bb=null,ec+""||null}function vb(){return v().defined(Ub).curve(Lb).context(wb)}var Sb=k,ic=null,ac=m(0),bc=t,Ub=m(!0),wb=null,Lb=f,Bb=null;gb.x=function(Mb){return arguments.length?(Sb="function"===typeof Mb?Mb:m(+Mb),ic=null,gb):Sb};gb.x0=function(Mb){return arguments.length?
(Sb="function"===typeof Mb?Mb:m(+Mb),gb):Sb};gb.x1=function(Mb){return arguments.length?(ic=null==Mb?null:"function"===typeof Mb?Mb:m(+Mb),gb):ic};gb.y=function(Mb){return arguments.length?(ac="function"===typeof Mb?Mb:m(+Mb),bc=null,gb):ac};gb.y0=function(Mb){return arguments.length?(ac="function"===typeof Mb?Mb:m(+Mb),gb):ac};gb.y1=function(Mb){return arguments.length?(bc=null==Mb?null:"function"===typeof Mb?Mb:m(+Mb),gb):bc};gb.lineX0=gb.lineY0=function(){return vb().x(Sb).y(ac)};gb.lineY1=function(){return vb().x(Sb).y(bc)};
gb.lineX1=function(){return vb().x(ic).y(ac)};gb.defined=function(Mb){return arguments.length?(Ub="function"===typeof Mb?Mb:m(!!Mb),gb):Ub};gb.curve=function(Mb){return arguments.length?(Lb=Mb,null!=wb&&(Bb=Lb(wb)),gb):Lb};gb.context=function(Mb){return arguments.length?(null==Mb?wb=Bb=null:Bb=Lb(wb=Mb),gb):wb};return gb}function y(gb,vb){return vb<gb?-1:vb>gb?1:vb>=gb?0:NaN}function B(gb){return gb}function A(gb){this._curve=gb}function z(gb){function vb(Sb){return new A(gb(Sb))}vb._curve=gb;return vb}
function E(gb){var vb=gb.curve;gb.angle=gb.x;delete gb.x;gb.radius=gb.y;delete gb.y;gb.curve=function(Sb){return arguments.length?vb(z(Sb)):vb()._curve};return gb}function C(){return E(v().curve(Na))}function u(){var gb=w().curve(Na),vb=gb.curve,Sb=gb.lineX0,ic=gb.lineX1,ac=gb.lineY0,bc=gb.lineY1;gb.angle=gb.x;delete gb.x;gb.startAngle=gb.x0;delete gb.x0;gb.endAngle=gb.x1;delete gb.x1;gb.radius=gb.y;delete gb.y;gb.innerRadius=gb.y0;delete gb.y0;gb.outerRadius=gb.y1;delete gb.y1;gb.lineStartAngle=
function(){return E(Sb())};delete gb.lineX0;gb.lineEndAngle=function(){return E(ic())};delete gb.lineX1;gb.lineInnerRadius=function(){return E(ac())};delete gb.lineY0;gb.lineOuterRadius=function(){return E(bc())};delete gb.lineY1;gb.curve=function(Ub){return arguments.length?vb(z(Ub)):vb()._curve};return gb}function D(gb,vb){return[(vb=+vb)*Math.cos(gb-=Math.PI/2),vb*Math.sin(gb)]}function G(gb){return gb.source}function J(gb){return gb.target}function L(gb){function vb(){var wb,Lb=ib.call(arguments),
Bb=Sb.apply(this,Lb),Mb=ic.apply(this,Lb);Ub||(Ub=wb=q.path());gb(Ub,+ac.apply(this,(Lb[0]=Bb,Lb)),+bc.apply(this,Lb),+ac.apply(this,(Lb[0]=Mb,Lb)),+bc.apply(this,Lb));if(wb)return Ub=null,wb+""||null}var Sb=G,ic=J,ac=k,bc=t,Ub=null;vb.source=function(wb){return arguments.length?(Sb=wb,vb):Sb};vb.target=function(wb){return arguments.length?(ic=wb,vb):ic};vb.x=function(wb){return arguments.length?(ac="function"===typeof wb?wb:m(+wb),vb):ac};vb.y=function(wb){return arguments.length?(bc="function"===
typeof wb?wb:m(+wb),vb):bc};vb.context=function(wb){return arguments.length?(Ub=null==wb?null:wb,vb):Ub};return vb}function K(gb,vb,Sb,ic,ac){gb.moveTo(vb,Sb);gb.bezierCurveTo(vb=(vb+ic)/2,Sb,vb,ac,ic,ac)}function H(gb,vb,Sb,ic,ac){gb.moveTo(vb,Sb);gb.bezierCurveTo(vb,Sb=(Sb+ac)/2,ic,Sb,ic,ac)}function Q(gb,vb,Sb,ic,ac){var bc=D(vb,Sb);vb=D(vb,Sb=(Sb+ac)/2);Sb=D(ic,Sb);ic=D(ic,ac);gb.moveTo(bc[0],bc[1]);gb.bezierCurveTo(vb[0],vb[1],Sb[0],Sb[1],ic[0],ic[1])}function M(){}function P(gb,vb,Sb){gb._context.bezierCurveTo((2*
gb._x0+gb._x1)/3,(2*gb._y0+gb._y1)/3,(gb._x0+2*gb._x1)/3,(gb._y0+2*gb._y1)/3,(gb._x0+4*gb._x1+vb)/6,(gb._y0+4*gb._y1+Sb)/6)}function T(gb){this._context=gb}function O(gb){this._context=gb}function U(gb){this._context=gb}function S(gb,vb){this._basis=new T(gb);this._beta=vb}function X(gb,vb,Sb){gb._context.bezierCurveTo(gb._x1+gb._k*(gb._x2-gb._x0),gb._y1+gb._k*(gb._y2-gb._y0),gb._x2+gb._k*(gb._x1-vb),gb._y2+gb._k*(gb._y1-Sb),gb._x2,gb._y2)}function ba(gb,vb){this._context=gb;this._k=(1-vb)/6}function ca(gb,
vb){this._context=gb;this._k=(1-vb)/6}function ia(gb,vb){this._context=gb;this._k=(1-vb)/6}function ja(gb,vb,Sb){var ic=gb._x1,ac=gb._y1,bc=gb._x2,Ub=gb._y2;if(1E-12<gb._l01_a){var wb=2*gb._l01_2a+3*gb._l01_a*gb._l12_a+gb._l12_2a,Lb=3*gb._l01_a*(gb._l01_a+gb._l12_a);ic=(ic*wb-gb._x0*gb._l12_2a+gb._x2*gb._l01_2a)/Lb;ac=(ac*wb-gb._y0*gb._l12_2a+gb._y2*gb._l01_2a)/Lb}1E-12<gb._l23_a&&(wb=2*gb._l23_2a+3*gb._l23_a*gb._l12_a+gb._l12_2a,Lb=3*gb._l23_a*(gb._l23_a+gb._l12_a),bc=(bc*wb+gb._x1*gb._l23_2a-vb*
gb._l12_2a)/Lb,Ub=(Ub*wb+gb._y1*gb._l23_2a-Sb*gb._l12_2a)/Lb);gb._context.bezierCurveTo(ic,ac,bc,Ub,gb._x2,gb._y2)}function la(gb,vb){this._context=gb;this._alpha=vb}function da(gb,vb){this._context=gb;this._alpha=vb}function oa(gb,vb){this._context=gb;this._alpha=vb}function sa(gb){this._context=gb}function ma(gb,vb,Sb){var ic=gb._x1-gb._x0;vb-=gb._x1;var ac=(gb._y1-gb._y0)/(ic||0>vb&&-0);gb=(Sb-gb._y1)/(vb||0>ic&&-0);return((0>ac?-1:1)+(0>gb?-1:1))*Math.min(Math.abs(ac),Math.abs(gb),.5*Math.abs((ac*
vb+gb*ic)/(ic+vb)))||0}function qa(gb,vb){var Sb=gb._x1-gb._x0;return Sb?(3*(gb._y1-gb._y0)/Sb-vb)/2:vb}function pa(gb,vb,Sb){var ic=gb._x0,ac=gb._x1,bc=gb._y1,Ub=(ac-ic)/3;gb._context.bezierCurveTo(ic+Ub,gb._y0+Ub*vb,ac-Ub,bc-Ub*Sb,ac,bc)}function na(gb){this._context=gb}function ka(gb){this._context=new ua(gb)}function ua(gb){this._context=gb}function va(gb){this._context=gb}function Ca(gb){var vb,Sb=gb.length-1,ic=Array(Sb),ac=Array(Sb),bc=Array(Sb);ic[0]=0;ac[0]=2;bc[0]=gb[0]+2*gb[1];for(vb=1;vb<
Sb-1;++vb)ic[vb]=1,ac[vb]=4,bc[vb]=4*gb[vb]+2*gb[vb+1];ic[Sb-1]=2;ac[Sb-1]=7;bc[Sb-1]=8*gb[Sb-1]+gb[Sb];for(vb=1;vb<Sb;++vb){var Ub=ic[vb]/ac[vb-1];ac[vb]-=Ub;bc[vb]-=Ub*bc[vb-1]}ic[Sb-1]=bc[Sb-1]/ac[Sb-1];for(vb=Sb-2;0<=vb;--vb)ic[vb]=(bc[vb]-ic[vb+1])/ac[vb];ac[Sb-1]=(gb[Sb]+ic[Sb-1])/2;for(vb=0;vb<Sb-1;++vb)ac[vb]=2*gb[vb+1]-ic[vb+1];return[ic,ac]}function Ma(gb,vb){this._context=gb;this._t=vb}function Ua(gb,vb){if(1<(Ub=gb.length))for(var Sb=1,ic,ac,bc=gb[vb[0]],Ub,wb=bc.length;Sb<Ub;++Sb)for(ac=
bc,bc=gb[vb[Sb]],ic=0;ic<wb;++ic)bc[ic][1]+=bc[ic][0]=isNaN(ac[ic][1])?ac[ic][0]:ac[ic][1]}function eb(gb){gb=gb.length;for(var vb=Array(gb);0<=--gb;)vb[gb]=gb;return vb}function fb(gb,vb){return gb[vb]}function nb(gb){var vb=gb.map(cb);return eb(gb).sort(function(Sb,ic){return vb[Sb]-vb[ic]})}function cb(gb){for(var vb=-1,Sb=0,ic=gb.length,ac,bc=-Infinity;++vb<ic;)(ac=+gb[vb][1])>bc&&(bc=ac,Sb=vb);return Sb}function $a(gb){var vb=gb.map(jb);return eb(gb).sort(function(Sb,ic){return vb[Sb]-vb[ic]})}
function jb(gb){for(var vb=0,Sb=-1,ic=gb.length,ac;++Sb<ic;)if(ac=+gb[Sb][1])vb+=ac;return vb}var pb=Math.abs,xa=Math.atan2,Ea=Math.cos,Ia=Math.max,Oa=Math.min,bb=Math.sin,Xa=Math.sqrt,tb=Math.PI,Ka=tb/2,Ta=2*tb;e.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._point=0},lineEnd:function(){(this._line||0!==this._line&&1===this._point)&&this._context.closePath();this._line=1-this._line},point:function(gb,vb){gb=+gb;vb=+vb;switch(this._point){case 0:this._point=
1;this._line?this._context.lineTo(gb,vb):this._context.moveTo(gb,vb);break;case 1:this._point=2;default:this._context.lineTo(gb,vb)}}};var Na=z(f);A.prototype={areaStart:function(){this._curve.areaStart()},areaEnd:function(){this._curve.areaEnd()},lineStart:function(){this._curve.lineStart()},lineEnd:function(){this._curve.lineEnd()},point:function(gb,vb){this._curve.point(vb*Math.sin(gb),vb*-Math.cos(gb))}};var ib=Array.prototype.slice,qb={draw:function(gb,vb){vb=Math.sqrt(vb/tb);gb.moveTo(vb,0);
gb.arc(0,0,vb,0,Ta)}},sb={draw:function(gb,vb){vb=Math.sqrt(vb/5)/2;gb.moveTo(-3*vb,-vb);gb.lineTo(-vb,-vb);gb.lineTo(-vb,-3*vb);gb.lineTo(vb,-3*vb);gb.lineTo(vb,-vb);gb.lineTo(3*vb,-vb);gb.lineTo(3*vb,vb);gb.lineTo(vb,vb);gb.lineTo(vb,3*vb);gb.lineTo(-vb,3*vb);gb.lineTo(-vb,vb);gb.lineTo(-3*vb,vb);gb.closePath()}},Ba=Math.sqrt(1/3),Fa=2*Ba,La={draw:function(gb,vb){vb=Math.sqrt(vb/Fa);var Sb=vb*Ba;gb.moveTo(0,-vb);gb.lineTo(Sb,0);gb.lineTo(0,vb);gb.lineTo(-Sb,0);gb.closePath()}},Va=Math.sin(tb/10)/
Math.sin(7*tb/10),Za=Math.sin(Ta/10)*Va,mb=-Math.cos(Ta/10)*Va;Va={draw:function(gb,vb){vb=Math.sqrt(.8908130915292852*vb);var Sb=Za*vb,ic=mb*vb;gb.moveTo(0,-vb);gb.lineTo(Sb,ic);for(var ac=1;5>ac;++ac){var bc=Ta*ac/5,Ub=Math.cos(bc);bc=Math.sin(bc);gb.lineTo(bc*vb,-Ub*vb);gb.lineTo(Ub*Sb-bc*ic,bc*Sb+Ub*ic)}gb.closePath()}};var ub={draw:function(gb,vb){vb=Math.sqrt(vb);var Sb=-vb/2;gb.rect(Sb,Sb,vb,vb)}},Pb=Math.sqrt(3),Kb={draw:function(gb,vb){vb=-Math.sqrt(vb/(3*Pb));gb.moveTo(0,2*vb);gb.lineTo(-Pb*
vb,-vb);gb.lineTo(Pb*vb,-vb);gb.closePath()}},Ob=Math.sqrt(3)/2,Wb=1/Math.sqrt(12),Bc=3*(Wb/2+1),Kc={draw:function(gb,vb){var Sb=Math.sqrt(vb/Bc);vb=Sb/2;var ic=Sb*Wb;Sb=Sb*Wb+Sb;var ac=-vb;gb.moveTo(vb,ic);gb.lineTo(vb,Sb);gb.lineTo(ac,Sb);gb.lineTo(-.5*vb-Ob*ic,Ob*vb+-.5*ic);gb.lineTo(-.5*vb-Ob*Sb,Ob*vb+-.5*Sb);gb.lineTo(-.5*ac-Ob*Sb,Ob*ac+-.5*Sb);gb.lineTo(-.5*vb+Ob*ic,-.5*ic-Ob*vb);gb.lineTo(-.5*vb+Ob*Sb,-.5*Sb-Ob*vb);gb.lineTo(-.5*ac+Ob*Sb,-.5*Sb-Ob*ac);gb.closePath()}},Nc=[qb,sb,La,ub,Va,Kb,
Kc];T.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._y0=this._y1=NaN;this._point=0},lineEnd:function(){switch(this._point){case 3:P(this,this._x1,this._y1);case 2:this._context.lineTo(this._x1,this._y1)}(this._line||0!==this._line&&1===this._point)&&this._context.closePath();this._line=1-this._line},point:function(gb,vb){gb=+gb;vb=+vb;switch(this._point){case 0:this._point=1;this._line?this._context.lineTo(gb,vb):this._context.moveTo(gb,
vb);break;case 1:this._point=2;break;case 2:this._point=3,this._context.lineTo((5*this._x0+this._x1)/6,(5*this._y0+this._y1)/6);default:P(this,gb,vb)}this._x0=this._x1;this._x1=gb;this._y0=this._y1;this._y1=vb}};O.prototype={areaStart:M,areaEnd:M,lineStart:function(){this._x0=this._x1=this._x2=this._x3=this._x4=this._y0=this._y1=this._y2=this._y3=this._y4=NaN;this._point=0},lineEnd:function(){switch(this._point){case 1:this._context.moveTo(this._x2,this._y2);this._context.closePath();break;case 2:this._context.moveTo((this._x2+
2*this._x3)/3,(this._y2+2*this._y3)/3);this._context.lineTo((this._x3+2*this._x2)/3,(this._y3+2*this._y2)/3);this._context.closePath();break;case 3:this.point(this._x2,this._y2),this.point(this._x3,this._y3),this.point(this._x4,this._y4)}},point:function(gb,vb){gb=+gb;vb=+vb;switch(this._point){case 0:this._point=1;this._x2=gb;this._y2=vb;break;case 1:this._point=2;this._x3=gb;this._y3=vb;break;case 2:this._point=3;this._x4=gb;this._y4=vb;this._context.moveTo((this._x0+4*this._x1+gb)/6,(this._y0+
4*this._y1+vb)/6);break;default:P(this,gb,vb)}this._x0=this._x1;this._x1=gb;this._y0=this._y1;this._y1=vb}};U.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._y0=this._y1=NaN;this._point=0},lineEnd:function(){(this._line||0!==this._line&&3===this._point)&&this._context.closePath();this._line=1-this._line},point:function(gb,vb){gb=+gb;vb=+vb;switch(this._point){case 0:this._point=1;break;case 1:this._point=2;break;case 2:this._point=
3;var Sb=(this._x0+4*this._x1+gb)/6,ic=(this._y0+4*this._y1+vb)/6;this._line?this._context.lineTo(Sb,ic):this._context.moveTo(Sb,ic);break;case 3:this._point=4;default:P(this,gb,vb)}this._x0=this._x1;this._x1=gb;this._y0=this._y1;this._y1=vb}};S.prototype={lineStart:function(){this._x=[];this._y=[];this._basis.lineStart()},lineEnd:function(){var gb=this._x,vb=this._y,Sb=gb.length-1;if(0<Sb)for(var ic=gb[0],ac=vb[0],bc=gb[Sb]-ic,Ub=vb[Sb]-ac,wb=-1,Lb;++wb<=Sb;)Lb=wb/Sb,this._basis.point(this._beta*
gb[wb]+(1-this._beta)*(ic+Lb*bc),this._beta*vb[wb]+(1-this._beta)*(ac+Lb*Ub));this._x=this._y=null;this._basis.lineEnd()},point:function(gb,vb){this._x.push(+gb);this._y.push(+vb)}};var bd=function Sb(vb){function ic(ac){return 1===vb?new T(ac):new S(ac,vb)}ic.beta=function(ac){return Sb(+ac)};return ic}(.85);ba.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._x2=this._y0=this._y1=this._y2=NaN;this._point=0},lineEnd:function(){switch(this._point){case 2:this._context.lineTo(this._x2,
this._y2);break;case 3:X(this,this._x1,this._y1)}(this._line||0!==this._line&&1===this._point)&&this._context.closePath();this._line=1-this._line},point:function(vb,Sb){vb=+vb;Sb=+Sb;switch(this._point){case 0:this._point=1;this._line?this._context.lineTo(vb,Sb):this._context.moveTo(vb,Sb);break;case 1:this._point=2;this._x1=vb;this._y1=Sb;break;case 2:this._point=3;default:X(this,vb,Sb)}this._x0=this._x1;this._x1=this._x2;this._x2=vb;this._y0=this._y1;this._y1=this._y2;this._y2=Sb}};var kb=function ic(Sb){function ac(bc){return new ba(bc,
Sb)}ac.tension=function(bc){return ic(+bc)};return ac}(0);ca.prototype={areaStart:M,areaEnd:M,lineStart:function(){this._x0=this._x1=this._x2=this._x3=this._x4=this._x5=this._y0=this._y1=this._y2=this._y3=this._y4=this._y5=NaN;this._point=0},lineEnd:function(){switch(this._point){case 1:this._context.moveTo(this._x3,this._y3);this._context.closePath();break;case 2:this._context.lineTo(this._x3,this._y3);this._context.closePath();break;case 3:this.point(this._x3,this._y3),this.point(this._x4,this._y4),
this.point(this._x5,this._y5)}},point:function(Sb,ic){Sb=+Sb;ic=+ic;switch(this._point){case 0:this._point=1;this._x3=Sb;this._y3=ic;break;case 1:this._point=2;this._context.moveTo(this._x4=Sb,this._y4=ic);break;case 2:this._point=3;this._x5=Sb;this._y5=ic;break;default:X(this,Sb,ic)}this._x0=this._x1;this._x1=this._x2;this._x2=Sb;this._y0=this._y1;this._y1=this._y2;this._y2=ic}};var $b=function ac(ic){function bc(Ub){return new ca(Ub,ic)}bc.tension=function(Ub){return ac(+Ub)};return bc}(0);ia.prototype=
{areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._x2=this._y0=this._y1=this._y2=NaN;this._point=0},lineEnd:function(){(this._line||0!==this._line&&3===this._point)&&this._context.closePath();this._line=1-this._line},point:function(ic,ac){ic=+ic;ac=+ac;switch(this._point){case 0:this._point=1;break;case 1:this._point=2;break;case 2:this._point=3;this._line?this._context.lineTo(this._x2,this._y2):this._context.moveTo(this._x2,this._y2);
break;case 3:this._point=4;default:X(this,ic,ac)}this._x0=this._x1;this._x1=this._x2;this._x2=ic;this._y0=this._y1;this._y1=this._y2;this._y2=ac}};var gc=function bc(ac){function Ub(wb){return new ia(wb,ac)}Ub.tension=function(wb){return bc(+wb)};return Ub}(0);la.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._x2=this._y0=this._y1=this._y2=NaN;this._l01_a=this._l12_a=this._l23_a=this._l01_2a=this._l12_2a=this._l23_2a=this._point=
0},lineEnd:function(){switch(this._point){case 2:this._context.lineTo(this._x2,this._y2);break;case 3:this.point(this._x2,this._y2)}(this._line||0!==this._line&&1===this._point)&&this._context.closePath();this._line=1-this._line},point:function(ac,bc){ac=+ac;bc=+bc;if(this._point){var Ub=this._x2-ac,wb=this._y2-bc;this._l23_a=Math.sqrt(this._l23_2a=Math.pow(Ub*Ub+wb*wb,this._alpha))}switch(this._point){case 0:this._point=1;this._line?this._context.lineTo(ac,bc):this._context.moveTo(ac,bc);break;case 1:this._point=
2;break;case 2:this._point=3;default:ja(this,ac,bc)}this._l01_a=this._l12_a;this._l12_a=this._l23_a;this._l01_2a=this._l12_2a;this._l12_2a=this._l23_2a;this._x0=this._x1;this._x1=this._x2;this._x2=ac;this._y0=this._y1;this._y1=this._y2;this._y2=bc}};var rc=function Ub(bc){function wb(Lb){return bc?new la(Lb,bc):new ba(Lb,0)}wb.alpha=function(Lb){return Ub(+Lb)};return wb}(.5);da.prototype={areaStart:M,areaEnd:M,lineStart:function(){this._x0=this._x1=this._x2=this._x3=this._x4=this._x5=this._y0=this._y1=
this._y2=this._y3=this._y4=this._y5=NaN;this._l01_a=this._l12_a=this._l23_a=this._l01_2a=this._l12_2a=this._l23_2a=this._point=0},lineEnd:function(){switch(this._point){case 1:this._context.moveTo(this._x3,this._y3);this._context.closePath();break;case 2:this._context.lineTo(this._x3,this._y3);this._context.closePath();break;case 3:this.point(this._x3,this._y3),this.point(this._x4,this._y4),this.point(this._x5,this._y5)}},point:function(bc,Ub){bc=+bc;Ub=+Ub;if(this._point){var wb=this._x2-bc,Lb=this._y2-
Ub;this._l23_a=Math.sqrt(this._l23_2a=Math.pow(wb*wb+Lb*Lb,this._alpha))}switch(this._point){case 0:this._point=1;this._x3=bc;this._y3=Ub;break;case 1:this._point=2;this._context.moveTo(this._x4=bc,this._y4=Ub);break;case 2:this._point=3;this._x5=bc;this._y5=Ub;break;default:ja(this,bc,Ub)}this._l01_a=this._l12_a;this._l12_a=this._l23_a;this._l01_2a=this._l12_2a;this._l12_2a=this._l23_2a;this._x0=this._x1;this._x1=this._x2;this._x2=bc;this._y0=this._y1;this._y1=this._y2;this._y2=Ub}};var xc=function wb(Ub){function Lb(Bb){return Ub?
new da(Bb,Ub):new ca(Bb,0)}Lb.alpha=function(Bb){return wb(+Bb)};return Lb}(.5);oa.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._x2=this._y0=this._y1=this._y2=NaN;this._l01_a=this._l12_a=this._l23_a=this._l01_2a=this._l12_2a=this._l23_2a=this._point=0},lineEnd:function(){(this._line||0!==this._line&&3===this._point)&&this._context.closePath();this._line=1-this._line},point:function(Ub,wb){Ub=+Ub;wb=+wb;if(this._point){var Lb=
this._x2-Ub,Bb=this._y2-wb;this._l23_a=Math.sqrt(this._l23_2a=Math.pow(Lb*Lb+Bb*Bb,this._alpha))}switch(this._point){case 0:this._point=1;break;case 1:this._point=2;break;case 2:this._point=3;this._line?this._context.lineTo(this._x2,this._y2):this._context.moveTo(this._x2,this._y2);break;case 3:this._point=4;default:ja(this,Ub,wb)}this._l01_a=this._l12_a;this._l12_a=this._l23_a;this._l01_2a=this._l12_2a;this._l12_2a=this._l23_2a;this._x0=this._x1;this._x1=this._x2;this._x2=Ub;this._y0=this._y1;this._y1=
this._y2;this._y2=wb}};var Rc=function Lb(wb){function Bb(Mb){return wb?new oa(Mb,wb):new ia(Mb,0)}Bb.alpha=function(Mb){return Lb(+Mb)};return Bb}(.5);sa.prototype={areaStart:M,areaEnd:M,lineStart:function(){this._point=0},lineEnd:function(){this._point&&this._context.closePath()},point:function(wb,Lb){wb=+wb;Lb=+Lb;this._point?this._context.lineTo(wb,Lb):(this._point=1,this._context.moveTo(wb,Lb))}};na.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=
this._x1=this._y0=this._y1=this._t0=NaN;this._point=0},lineEnd:function(){switch(this._point){case 2:this._context.lineTo(this._x1,this._y1);break;case 3:pa(this,this._t0,qa(this,this._t0))}(this._line||0!==this._line&&1===this._point)&&this._context.closePath();this._line=1-this._line},point:function(wb,Lb){var Bb=NaN;wb=+wb;Lb=+Lb;if(wb!==this._x1||Lb!==this._y1){switch(this._point){case 0:this._point=1;this._line?this._context.lineTo(wb,Lb):this._context.moveTo(wb,Lb);break;case 1:this._point=
2;break;case 2:this._point=3;pa(this,qa(this,Bb=ma(this,wb,Lb)),Bb);break;default:pa(this,this._t0,Bb=ma(this,wb,Lb))}this._x0=this._x1;this._x1=wb;this._y0=this._y1;this._y1=Lb;this._t0=Bb}}};(ka.prototype=Object.create(na.prototype)).point=function(wb,Lb){na.prototype.point.call(this,Lb,wb)};ua.prototype={moveTo:function(wb,Lb){this._context.moveTo(Lb,wb)},closePath:function(){this._context.closePath()},lineTo:function(wb,Lb){this._context.lineTo(Lb,wb)},bezierCurveTo:function(wb,Lb,Bb,Mb,Yb,qc){this._context.bezierCurveTo(Lb,
wb,Mb,Bb,qc,Yb)}};va.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x=[];this._y=[]},lineEnd:function(){var wb=this._x,Lb=this._y,Bb=wb.length;if(Bb)if(this._line?this._context.lineTo(wb[0],Lb[0]):this._context.moveTo(wb[0],Lb[0]),2===Bb)this._context.lineTo(wb[1],Lb[1]);else for(var Mb=Ca(wb),Yb=Ca(Lb),qc=0,Tc=1;Tc<Bb;++qc,++Tc)this._context.bezierCurveTo(Mb[0][qc],Yb[0][qc],Mb[1][qc],Yb[1][qc],wb[Tc],Lb[Tc]);(this._line||0!==this._line&&
1===Bb)&&this._context.closePath();this._line=1-this._line;this._x=this._y=null},point:function(wb,Lb){this._x.push(+wb);this._y.push(+Lb)}};Ma.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x=this._y=NaN;this._point=0},lineEnd:function(){0<this._t&&1>this._t&&2===this._point&&this._context.lineTo(this._x,this._y);(this._line||0!==this._line&&1===this._point)&&this._context.closePath();0<=this._line&&(this._t=1-this._t,this._line=1-this._line)},
point:function(wb,Lb){wb=+wb;Lb=+Lb;switch(this._point){case 0:this._point=1;this._line?this._context.lineTo(wb,Lb):this._context.moveTo(wb,Lb);break;case 1:this._point=2;default:if(0>=this._t)this._context.lineTo(this._x,Lb),this._context.lineTo(wb,Lb);else{var Bb=this._x*(1-this._t)+wb*this._t;this._context.lineTo(Bb,this._y);this._context.lineTo(Bb,Lb)}}this._x=wb;this._y=Lb}};r.arc=function(){function wb(){var ec,Fc=+Lb.apply(this,arguments),dd=+Bb.apply(this,arguments),Ac=qc.apply(this,arguments)-
Ka,Jc=Tc.apply(this,arguments)-Ka,gd=pb(Jc-Ac),Vc=Jc>Ac;ad||(ad=ec=q.path());if(dd<Fc){var Gc=dd;dd=Fc;Fc=Gc}if(1E-12<dd)if(gd>Ta-1E-12)ad.moveTo(dd*Ea(Ac),dd*bb(Ac)),ad.arc(0,0,dd,Ac,Jc,!Vc),1E-12<Fc&&(ad.moveTo(Fc*Ea(Jc),Fc*bb(Jc)),ad.arc(0,0,Fc,Jc,Ac,Vc));else{var pd=Ac,md=Jc;Gc=Ac;var rd=Jc,re=gd,Ad=gd,Bd=Yc.apply(this,arguments)/2,be=1E-12<Bd&&(Yb?+Yb.apply(this,arguments):Xa(Fc*Fc+dd*dd)),le=Oa(pb(dd-Fc)/2,+Mb.apply(this,arguments)),Rd=le,Fe=le;if(1E-12<be){var Je=l(be/Fc*bb(Bd));Bd=l(be/dd*
bb(Bd));1E-12<(re-=2*Je)?(Je*=Vc?1:-1,Gc+=Je,rd-=Je):(re=0,Gc=rd=(Ac+Jc)/2);1E-12<(Ad-=2*Bd)?(Bd*=Vc?1:-1,pd+=Bd,md-=Bd):(Ad=0,pd=md=(Ac+Jc)/2)}Ac=dd*Ea(pd);Jc=dd*bb(pd);Je=Fc*Ea(rd);Bd=Fc*bb(rd);if(1E-12<le){var Kd=dd*Ea(md),Dd=dd*bb(md),we=Fc*Ea(Gc),se=Fc*bb(Gc);if(gd=gd<tb){var Xd=we-Ac;gd=se-Jc;be=Je-Kd;var ye=Bd-Dd,kf=ye*Xd-be*gd;1E-12>kf*kf?Xd=void 0:(kf=(be*(Jc-Dd)-ye*(Ac-Kd))/kf,Xd=[Ac+kf*Xd,Jc+kf*gd]);gd=Xd}gd&&(Rd=Ac-Xd[0],Fe=Jc-Xd[1],gd=Kd-Xd[0],be=Dd-Xd[1],Rd=(Rd*gd+Fe*be)/(Xa(Rd*Rd+Fe*
Fe)*Xa(gd*gd+be*be)),Fe=1/bb((1<Rd?0:-1>Rd?tb:Math.acos(Rd))/2),Xd=Xa(Xd[0]*Xd[0]+Xd[1]*Xd[1]),Rd=Oa(le,(Fc-Xd)/(Fe-1)),Fe=Oa(le,(dd-Xd)/(Fe+1)))}1E-12<Ad?1E-12<Fe?(pd=d(we,se,Ac,Jc,dd,Fe,Vc),md=d(Kd,Dd,Je,Bd,dd,Fe,Vc),ad.moveTo(pd.cx+pd.x01,pd.cy+pd.y01),Fe<le?ad.arc(pd.cx,pd.cy,Fe,xa(pd.y01,pd.x01),xa(md.y01,md.x01),!Vc):(ad.arc(pd.cx,pd.cy,Fe,xa(pd.y01,pd.x01),xa(pd.y11,pd.x11),!Vc),ad.arc(0,0,dd,xa(pd.cy+pd.y11,pd.cx+pd.x11),xa(md.cy+md.y11,md.cx+md.x11),!Vc),ad.arc(md.cx,md.cy,Fe,xa(md.y11,md.x11),
xa(md.y01,md.x01),!Vc))):(ad.moveTo(Ac,Jc),ad.arc(0,0,dd,pd,md,!Vc)):ad.moveTo(Ac,Jc);1E-12<Fc&&1E-12<re?1E-12<Rd?(pd=d(Je,Bd,Kd,Dd,Fc,-Rd,Vc),md=d(Ac,Jc,we,se,Fc,-Rd,Vc),ad.lineTo(pd.cx+pd.x01,pd.cy+pd.y01),Rd<le?ad.arc(pd.cx,pd.cy,Rd,xa(pd.y01,pd.x01),xa(md.y01,md.x01),!Vc):(ad.arc(pd.cx,pd.cy,Rd,xa(pd.y01,pd.x01),xa(pd.y11,pd.x11),!Vc),ad.arc(0,0,Fc,xa(pd.cy+pd.y11,pd.cx+pd.x11),xa(md.cy+md.y11,md.cx+md.x11),Vc),ad.arc(md.cx,md.cy,Rd,xa(md.y11,md.x11),xa(md.y01,md.x01),!Vc))):ad.arc(0,0,Fc,rd,
Gc,Vc):ad.lineTo(Je,Bd)}else ad.moveTo(0,0);ad.closePath();if(ec)return ad=null,ec+""||null}var Lb=a,Bb=h,Mb=m(0),Yb=null,qc=g,Tc=n,Yc=p,ad=null;wb.centroid=function(){var ec=(+Lb.apply(this,arguments)+ +Bb.apply(this,arguments))/2,Fc=(+qc.apply(this,arguments)+ +Tc.apply(this,arguments))/2-tb/2;return[Ea(Fc)*ec,bb(Fc)*ec]};wb.innerRadius=function(ec){return arguments.length?(Lb="function"===typeof ec?ec:m(+ec),wb):Lb};wb.outerRadius=function(ec){return arguments.length?(Bb="function"===typeof ec?
ec:m(+ec),wb):Bb};wb.cornerRadius=function(ec){return arguments.length?(Mb="function"===typeof ec?ec:m(+ec),wb):Mb};wb.padRadius=function(ec){return arguments.length?(Yb=null==ec?null:"function"===typeof ec?ec:m(+ec),wb):Yb};wb.startAngle=function(ec){return arguments.length?(qc="function"===typeof ec?ec:m(+ec),wb):qc};wb.endAngle=function(ec){return arguments.length?(Tc="function"===typeof ec?ec:m(+ec),wb):Tc};wb.padAngle=function(ec){return arguments.length?(Yc="function"===typeof ec?ec:m(+ec),
wb):Yc};wb.context=function(ec){return arguments.length?(ad=null==ec?null:ec,wb):ad};return wb};r.area=w;r.areaRadial=u;r.curveBasis=function(wb){return new T(wb)};r.curveBasisClosed=function(wb){return new O(wb)};r.curveBasisOpen=function(wb){return new U(wb)};r.curveBundle=bd;r.curveCardinal=kb;r.curveCardinalClosed=$b;r.curveCardinalOpen=gc;r.curveCatmullRom=rc;r.curveCatmullRomClosed=xc;r.curveCatmullRomOpen=Rc;r.curveLinear=f;r.curveLinearClosed=function(wb){return new sa(wb)};r.curveMonotoneX=
function(wb){return new na(wb)};r.curveMonotoneY=function(wb){return new ka(wb)};r.curveNatural=function(wb){return new va(wb)};r.curveStep=function(wb){return new Ma(wb,.5)};r.curveStepAfter=function(wb){return new Ma(wb,1)};r.curveStepBefore=function(wb){return new Ma(wb,0)};r.line=v;r.lineRadial=C;r.linkHorizontal=function(){return L(K)};r.linkRadial=function(){var wb=L(Q);wb.angle=wb.x;delete wb.x;wb.radius=wb.y;delete wb.y;return wb};r.linkVertical=function(){return L(H)};r.pie=function(){function wb(Yc){var ad,
ec=Yc.length;var Fc=0;var dd=Array(ec),Ac=Array(ec),Jc=+Yb.apply(this,arguments);var gd=Math.min(Ta,Math.max(-Ta,qc.apply(this,arguments)-Jc));var Vc=Math.min(Math.abs(gd)/ec,Tc.apply(this,arguments)),Gc=Vc*(0>gd?-1:1),pd;for(ad=0;ad<ec;++ad)0<(pd=Ac[dd[ad]=ad]=+Lb(Yc[ad],ad,Yc))&&(Fc+=pd);null!=Bb?dd.sort(function(rd,re){return Bb(Ac[rd],Ac[re])}):null!=Mb&&dd.sort(function(rd,re){return Mb(Yc[rd],Yc[re])});ad=0;for(gd=Fc?(gd-ec*Gc)/Fc:0;ad<ec;++ad,Jc=md){Fc=dd[ad];pd=Ac[Fc];var md=Jc+(0<pd?pd*gd:
0)+Gc;Ac[Fc]={data:Yc[Fc],index:ad,value:pd,startAngle:Jc,endAngle:md,padAngle:Vc}}return Ac}var Lb=B,Bb=y,Mb=null,Yb=m(0),qc=m(Ta),Tc=m(0);wb.value=function(Yc){return arguments.length?(Lb="function"===typeof Yc?Yc:m(+Yc),wb):Lb};wb.sortValues=function(Yc){return arguments.length?(Bb=Yc,Mb=null,wb):Bb};wb.sort=function(Yc){return arguments.length?(Mb=Yc,Bb=null,wb):Mb};wb.startAngle=function(Yc){return arguments.length?(Yb="function"===typeof Yc?Yc:m(+Yc),wb):Yb};wb.endAngle=function(Yc){return arguments.length?
(qc="function"===typeof Yc?Yc:m(+Yc),wb):qc};wb.padAngle=function(Yc){return arguments.length?(Tc="function"===typeof Yc?Yc:m(+Yc),wb):Tc};return wb};r.pointRadial=D;r.radialArea=u;r.radialLine=C;r.stack=function(){function wb(qc){var Tc=Lb.apply(this,arguments),Yc,ad=qc.length,ec=Tc.length,Fc=Array(ec);for(Yc=0;Yc<ec;++Yc){for(var dd=Tc[Yc],Ac=Fc[Yc]=Array(ad),Jc=0,gd;Jc<ad;++Jc)Ac[Jc]=gd=[0,+Yb(qc[Jc],dd,Jc,qc)],gd.data=qc[Jc];Ac.key=dd}Yc=0;for(Tc=Bb(Fc);Yc<ec;++Yc)Fc[Tc[Yc]].index=Yc;Mb(Fc,Tc);
return Fc}var Lb=m([]),Bb=eb,Mb=Ua,Yb=fb;wb.keys=function(qc){return arguments.length?(Lb="function"===typeof qc?qc:m(ib.call(qc)),wb):Lb};wb.value=function(qc){return arguments.length?(Yb="function"===typeof qc?qc:m(+qc),wb):Yb};wb.order=function(qc){return arguments.length?(Bb=null==qc?eb:"function"===typeof qc?qc:m(ib.call(qc)),wb):Bb};wb.offset=function(qc){return arguments.length?(Mb=null==qc?Ua:qc,wb):Mb};return wb};r.stackOffsetDiverging=function(wb,Lb){if(0<(ad=wb.length))for(var Bb,Mb=0,
Yb,qc,Tc,Yc,ad,ec=wb[Lb[0]].length;Mb<ec;++Mb)for(Bb=Tc=Yc=0;Bb<ad;++Bb)0<(qc=(Yb=wb[Lb[Bb]][Mb])[1]-Yb[0])?(Yb[0]=Tc,Yb[1]=Tc+=qc):0>qc?(Yb[1]=Yc,Yb[0]=Yc+=qc):(Yb[0]=0,Yb[1]=qc)};r.stackOffsetExpand=function(wb,Lb){if(0<(Mb=wb.length)){for(var Bb,Mb,Yb=0,qc=wb[0].length,Tc;Yb<qc;++Yb){for(Tc=Bb=0;Bb<Mb;++Bb)Tc+=wb[Bb][Yb][1]||0;if(Tc)for(Bb=0;Bb<Mb;++Bb)wb[Bb][Yb][1]/=Tc}Ua(wb,Lb)}};r.stackOffsetNone=Ua;r.stackOffsetSilhouette=function(wb,Lb){if(0<(Yb=wb.length)){for(var Bb=0,Mb=wb[Lb[0]],Yb,qc=
Mb.length;Bb<qc;++Bb){for(var Tc=0,Yc=0;Tc<Yb;++Tc)Yc+=wb[Tc][Bb][1]||0;Mb[Bb][1]+=Mb[Bb][0]=-Yc/2}Ua(wb,Lb)}};r.stackOffsetWiggle=function(wb,Lb){if(0<(Tc=wb.length)&&0<(qc=(Yb=wb[Lb[0]]).length)){for(var Bb=0,Mb=1,Yb,qc,Tc;Mb<qc;++Mb){for(var Yc=0,ad=0,ec=0;Yc<Tc;++Yc){var Fc=wb[Lb[Yc]],dd=Fc[Mb][1]||0;Fc=(dd-(Fc[Mb-1][1]||0))/2;for(var Ac=0;Ac<Yc;++Ac){var Jc=wb[Lb[Ac]];Fc+=(Jc[Mb][1]||0)-(Jc[Mb-1][1]||0)}ad+=dd;ec+=Fc*dd}Yb[Mb-1][1]+=Yb[Mb-1][0]=Bb;ad&&(Bb-=ec/ad)}Yb[Mb-1][1]+=Yb[Mb-1][0]=Bb;
Ua(wb,Lb)}};r.stackOrderAppearance=nb;r.stackOrderAscending=$a;r.stackOrderDescending=function(wb){return $a(wb).reverse()};r.stackOrderInsideOut=function(wb){var Lb=wb.length,Bb=wb.map(jb),Mb=nb(wb),Yb=0,qc=0,Tc=[],Yc=[];for(wb=0;wb<Lb;++wb){var ad=Mb[wb];Yb<qc?(Yb+=Bb[ad],Tc.push(ad)):(qc+=Bb[ad],Yc.push(ad))}return Yc.reverse().concat(Tc)};r.stackOrderNone=eb;r.stackOrderReverse=function(wb){return eb(wb).reverse()};r.symbol=function(){function wb(){var Yb;Mb||(Mb=Yb=q.path());Lb.apply(this,arguments).draw(Mb,
+Bb.apply(this,arguments));if(Yb)return Mb=null,Yb+""||null}var Lb=m(qb),Bb=m(64),Mb=null;wb.type=function(Yb){return arguments.length?(Lb="function"===typeof Yb?Yb:m(Yb),wb):Lb};wb.size=function(Yb){return arguments.length?(Bb="function"===typeof Yb?Yb:m(+Yb),wb):Bb};wb.context=function(Yb){return arguments.length?(Mb=null==Yb?null:Yb,wb):Mb};return wb};r.symbolCircle=qb;r.symbolCross=sb;r.symbolDiamond=La;r.symbolSquare=ub;r.symbolStar=Va;r.symbolTriangle=Kb;r.symbolWye=Kc;r.symbols=Nc;Object.defineProperty(r,
"__esModule",{value:!0})})},{"d3-path":163}],166:[function(b,N,I){(function(r,q){"object"===typeof I&&"undefined"!==typeof N?q(I,b("d3-time")):(r=r||self,q(r.d3=r.d3||{},r.d3))})(this,function(r,q){function m(La){if(0<=La.y&&100>La.y){var Va=new Date(-1,La.m,La.d,La.H,La.M,La.S,La.L);Va.setFullYear(La.y);return Va}return new Date(La.y,La.m,La.d,La.H,La.M,La.S,La.L)}function l(La){if(0<=La.y&&100>La.y){var Va=new Date(Date.UTC(-1,La.m,La.d,La.H,La.M,La.S,La.L));Va.setUTCFullYear(La.y);return Va}return new Date(Date.UTC(La.y,
La.m,La.d,La.H,La.M,La.S,La.L))}function a(La,Va,Za){return{y:La,m:Va,d:Za,H:0,M:0,S:0,L:0}}function h(La){function Va(Ub,wb){return function(Lb){var Bb=[],Mb=-1,Yb=0,qc=Ub.length,Tc,Yc;for(Lb instanceof Date||(Lb=new Date(+Lb));++Mb<qc;)if(37===Ub.charCodeAt(Mb)){Bb.push(Ub.slice(Yb,Mb));null!=(Yb=Ta[Tc=Ub.charAt(++Mb)])?Tc=Ub.charAt(++Mb):Yb="e"===Tc?" ":"0";if(Yc=wb[Tc])Tc=Yc(Lb,Yb);Bb.push(Tc);Yb=Mb+1}Bb.push(Ub.slice(Yb,Mb));return Bb.join("")}}function Za(Ub,wb){return function(Lb){var Bb=a(1900,
void 0,1);if(mb(Bb,Ub,Lb+="",0)!=Lb.length)return null;if("Q"in Bb)return new Date(Bb.Q);if("s"in Bb)return new Date(1E3*Bb.s+("L"in Bb?Bb.L:0));!wb||"Z"in Bb||(Bb.Z=0);"p"in Bb&&(Bb.H=Bb.H%12+12*Bb.p);void 0===Bb.m&&(Bb.m="q"in Bb?Bb.q:0);if("V"in Bb){if(1>Bb.V||53<Bb.V)return null;"w"in Bb||(Bb.w=1);if("Z"in Bb){Lb=l(a(Bb.y,0,1));var Mb=Lb.getUTCDay();Lb=4<Mb||0===Mb?q.utcMonday.ceil(Lb):q.utcMonday(Lb);Lb=q.utcDay.offset(Lb,7*(Bb.V-1));Bb.y=Lb.getUTCFullYear();Bb.m=Lb.getUTCMonth();Bb.d=Lb.getUTCDate()+
(Bb.w+6)%7}else Lb=m(a(Bb.y,0,1)),Mb=Lb.getDay(),Lb=4<Mb||0===Mb?q.timeMonday.ceil(Lb):q.timeMonday(Lb),Lb=q.timeDay.offset(Lb,7*(Bb.V-1)),Bb.y=Lb.getFullYear(),Bb.m=Lb.getMonth(),Bb.d=Lb.getDate()+(Bb.w+6)%7}else if("W"in Bb||"U"in Bb)"w"in Bb||(Bb.w="u"in Bb?Bb.u%7:"W"in Bb?1:0),Mb="Z"in Bb?l(a(Bb.y,0,1)).getUTCDay():m(a(Bb.y,0,1)).getDay(),Bb.m=0,Bb.d="W"in Bb?(Bb.w+6)%7+7*Bb.W-(Mb+5)%7:Bb.w+7*Bb.U-(Mb+6)%7;return"Z"in Bb?(Bb.H+=Bb.Z/100|0,Bb.M+=Bb.Z%100,l(Bb)):m(Bb)}}function mb(Ub,wb,Lb,Bb){for(var Mb=
0,Yb=wb.length,qc=Lb.length,Tc;Mb<Yb;){if(Bb>=qc)return-1;Tc=wb.charCodeAt(Mb++);if(37===Tc){if(Tc=wb.charAt(Mb++),Tc=bc[Tc in Ta?wb.charAt(Mb++):Tc],!Tc||0>(Bb=Tc(Ub,Lb,Bb)))return-1}else if(Tc!=Lb.charCodeAt(Bb++))return-1}return Bb}var ub=La.dateTime,Pb=La.date,Kb=La.time,Ob=La.periods,Wb=La.days,Bc=La.shortDays,Kc=La.months,Nc=La.shortMonths,bd=p(Ob),kb=d(Ob),$b=p(Wb),gc=d(Wb),rc=p(Bc),xc=d(Bc),Rc=p(Kc),gb=d(Kc),vb=p(Nc),Sb=d(Nc),ic={a:function(Ub){return Bc[Ub.getDay()]},A:function(Ub){return Wb[Ub.getDay()]},
b:function(Ub){return Nc[Ub.getMonth()]},B:function(Ub){return Kc[Ub.getMonth()]},c:null,d:M,e:M,f:S,H:P,I:T,j:O,L:U,m:X,M:ba,p:function(Ub){return Ob[+(12<=Ub.getHours())]},q:function(Ub){return 1+~~(Ub.getMonth()/3)},Q:Oa,s:bb,S:ca,u:ia,U:ja,V:la,w:da,W:oa,x:null,X:null,y:sa,Y:ma,Z:qa,"%":Ia},ac={a:function(Ub){return Bc[Ub.getUTCDay()]},A:function(Ub){return Wb[Ub.getUTCDay()]},b:function(Ub){return Nc[Ub.getUTCMonth()]},B:function(Ub){return Kc[Ub.getUTCMonth()]},c:null,d:pa,e:pa,f:Ca,H:na,I:ka,
j:ua,L:va,m:Ma,M:Ua,p:function(Ub){return Ob[+(12<=Ub.getUTCHours())]},q:function(Ub){return 1+~~(Ub.getUTCMonth()/3)},Q:Oa,s:bb,S:eb,u:fb,U:nb,V:cb,w:$a,W:jb,x:null,X:null,y:pb,Y:xa,Z:Ea,"%":Ia},bc={a:function(Ub,wb,Lb){return(wb=rc.exec(wb.slice(Lb)))?(Ub.w=xc[wb[0].toLowerCase()],Lb+wb[0].length):-1},A:function(Ub,wb,Lb){return(wb=$b.exec(wb.slice(Lb)))?(Ub.w=gc[wb[0].toLowerCase()],Lb+wb[0].length):-1},b:function(Ub,wb,Lb){return(wb=vb.exec(wb.slice(Lb)))?(Ub.m=Sb[wb[0].toLowerCase()],Lb+wb[0].length):
-1},B:function(Ub,wb,Lb){return(wb=Rc.exec(wb.slice(Lb)))?(Ub.m=gb[wb[0].toLowerCase()],Lb+wb[0].length):-1},c:function(Ub,wb,Lb){return mb(Ub,ub,wb,Lb)},d:E,e:E,f:L,H:u,I:u,j:C,L:J,m:z,M:D,p:function(Ub,wb,Lb){return(wb=bd.exec(wb.slice(Lb)))?(Ub.p=kb[wb[0].toLowerCase()],Lb+wb[0].length):-1},q:A,Q:H,s:Q,S:G,u:f,U:k,V:t,w:e,W:v,x:function(Ub,wb,Lb){return mb(Ub,Pb,wb,Lb)},X:function(Ub,wb,Lb){return mb(Ub,Kb,wb,Lb)},y:y,Y:w,Z:B,"%":K};ic.x=Va(Pb,ic);ic.X=Va(Kb,ic);ic.c=Va(ub,ic);ac.x=Va(Pb,ac);ac.X=
Va(Kb,ac);ac.c=Va(ub,ac);return{format:function(Ub){var wb=Va(Ub+="",ic);wb.toString=function(){return Ub};return wb},parse:function(Ub){var wb=Za(Ub+="",!1);wb.toString=function(){return Ub};return wb},utcFormat:function(Ub){var wb=Va(Ub+="",ac);wb.toString=function(){return Ub};return wb},utcParse:function(Ub){var wb=Za(Ub+="",!0);wb.toString=function(){return Ub};return wb}}}function g(La,Va,Za){var mb=0>La?"-":"";La=(mb?-La:La)+"";var ub=La.length;return mb+(ub<Za?Array(Za-ub+1).join(Va)+La:La)}
function n(La){return La.replace(qb,"\\$\x26")}function p(La){return new RegExp("^(?:"+La.map(n).join("|")+")","i")}function d(La){for(var Va={},Za=-1,mb=La.length;++Za<mb;)Va[La[Za].toLowerCase()]=Za;return Va}function e(La,Va,Za){return(Va=Na.exec(Va.slice(Za,Za+1)))?(La.w=+Va[0],Za+Va[0].length):-1}function f(La,Va,Za){return(Va=Na.exec(Va.slice(Za,Za+1)))?(La.u=+Va[0],Za+Va[0].length):-1}function k(La,Va,Za){return(Va=Na.exec(Va.slice(Za,Za+2)))?(La.U=+Va[0],Za+Va[0].length):-1}function t(La,
Va,Za){return(Va=Na.exec(Va.slice(Za,Za+2)))?(La.V=+Va[0],Za+Va[0].length):-1}function v(La,Va,Za){return(Va=Na.exec(Va.slice(Za,Za+2)))?(La.W=+Va[0],Za+Va[0].length):-1}function w(La,Va,Za){return(Va=Na.exec(Va.slice(Za,Za+4)))?(La.y=+Va[0],Za+Va[0].length):-1}function y(La,Va,Za){return(Va=Na.exec(Va.slice(Za,Za+2)))?(La.y=+Va[0]+(68<+Va[0]?1900:2E3),Za+Va[0].length):-1}function B(La,Va,Za){return(Va=/^(Z)|([+-]\d\d)(?::?(\d\d))?/.exec(Va.slice(Za,Za+6)))?(La.Z=Va[1]?0:-(Va[2]+(Va[3]||"00")),Za+
Va[0].length):-1}function A(La,Va,Za){return(Va=Na.exec(Va.slice(Za,Za+1)))?(La.q=3*Va[0]-3,Za+Va[0].length):-1}function z(La,Va,Za){return(Va=Na.exec(Va.slice(Za,Za+2)))?(La.m=Va[0]-1,Za+Va[0].length):-1}function E(La,Va,Za){return(Va=Na.exec(Va.slice(Za,Za+2)))?(La.d=+Va[0],Za+Va[0].length):-1}function C(La,Va,Za){return(Va=Na.exec(Va.slice(Za,Za+3)))?(La.m=0,La.d=+Va[0],Za+Va[0].length):-1}function u(La,Va,Za){return(Va=Na.exec(Va.slice(Za,Za+2)))?(La.H=+Va[0],Za+Va[0].length):-1}function D(La,
Va,Za){return(Va=Na.exec(Va.slice(Za,Za+2)))?(La.M=+Va[0],Za+Va[0].length):-1}function G(La,Va,Za){return(Va=Na.exec(Va.slice(Za,Za+2)))?(La.S=+Va[0],Za+Va[0].length):-1}function J(La,Va,Za){return(Va=Na.exec(Va.slice(Za,Za+3)))?(La.L=+Va[0],Za+Va[0].length):-1}function L(La,Va,Za){return(Va=Na.exec(Va.slice(Za,Za+6)))?(La.L=Math.floor(Va[0]/1E3),Za+Va[0].length):-1}function K(La,Va,Za){return(La=ib.exec(Va.slice(Za,Za+1)))?Za+La[0].length:-1}function H(La,Va,Za){return(Va=Na.exec(Va.slice(Za)))?
(La.Q=+Va[0],Za+Va[0].length):-1}function Q(La,Va,Za){return(Va=Na.exec(Va.slice(Za)))?(La.s=+Va[0],Za+Va[0].length):-1}function M(La,Va){return g(La.getDate(),Va,2)}function P(La,Va){return g(La.getHours(),Va,2)}function T(La,Va){return g(La.getHours()%12||12,Va,2)}function O(La,Va){return g(1+q.timeDay.count(q.timeYear(La),La),Va,3)}function U(La,Va){return g(La.getMilliseconds(),Va,3)}function S(La,Va){return U(La,Va)+"000"}function X(La,Va){return g(La.getMonth()+1,Va,2)}function ba(La,Va){return g(La.getMinutes(),
Va,2)}function ca(La,Va){return g(La.getSeconds(),Va,2)}function ia(La){La=La.getDay();return 0===La?7:La}function ja(La,Va){return g(q.timeSunday.count(q.timeYear(La)-1,La),Va,2)}function la(La,Va){var Za=La.getDay();La=4<=Za||0===Za?q.timeThursday(La):q.timeThursday.ceil(La);return g(q.timeThursday.count(q.timeYear(La),La)+(4===q.timeYear(La).getDay()),Va,2)}function da(La){return La.getDay()}function oa(La,Va){return g(q.timeMonday.count(q.timeYear(La)-1,La),Va,2)}function sa(La,Va){return g(La.getFullYear()%
100,Va,2)}function ma(La,Va){return g(La.getFullYear()%1E4,Va,4)}function qa(La){La=La.getTimezoneOffset();return(0<La?"-":(La*=-1,"+"))+g(La/60|0,"0",2)+g(La%60,"0",2)}function pa(La,Va){return g(La.getUTCDate(),Va,2)}function na(La,Va){return g(La.getUTCHours(),Va,2)}function ka(La,Va){return g(La.getUTCHours()%12||12,Va,2)}function ua(La,Va){return g(1+q.utcDay.count(q.utcYear(La),La),Va,3)}function va(La,Va){return g(La.getUTCMilliseconds(),Va,3)}function Ca(La,Va){return va(La,Va)+"000"}function Ma(La,
Va){return g(La.getUTCMonth()+1,Va,2)}function Ua(La,Va){return g(La.getUTCMinutes(),Va,2)}function eb(La,Va){return g(La.getUTCSeconds(),Va,2)}function fb(La){La=La.getUTCDay();return 0===La?7:La}function nb(La,Va){return g(q.utcSunday.count(q.utcYear(La)-1,La),Va,2)}function cb(La,Va){var Za=La.getUTCDay();La=4<=Za||0===Za?q.utcThursday(La):q.utcThursday.ceil(La);return g(q.utcThursday.count(q.utcYear(La),La)+(4===q.utcYear(La).getUTCDay()),Va,2)}function $a(La){return La.getUTCDay()}function jb(La,
Va){return g(q.utcMonday.count(q.utcYear(La)-1,La),Va,2)}function pb(La,Va){return g(La.getUTCFullYear()%100,Va,2)}function xa(La,Va){return g(La.getUTCFullYear()%1E4,Va,4)}function Ea(){return"+0000"}function Ia(){return"%"}function Oa(La){return+La}function bb(La){return Math.floor(+La/1E3)}function Xa(La){sb=h(La);r.timeFormat=sb.format;r.timeParse=sb.parse;r.utcFormat=sb.utcFormat;r.utcParse=sb.utcParse;return sb}function tb(La){return La.toISOString()}function Ka(La){La=new Date(La);return isNaN(La)?
null:La}var Ta={"-":"",_:" ",0:"0"},Na=/^\s*\d+/,ib=/^%/,qb=/[\\^$*+?|[\]().{}]/g,sb;Xa({dateTime:"%x, %X",date:"%-m/%-d/%Y",time:"%-I:%M:%S %p",periods:["AM","PM"],days:"Sunday Monday Tuesday Wednesday Thursday Friday Saturday".split(" "),shortDays:"Sun Mon Tue Wed Thu Fri Sat".split(" "),months:"January February March April May June July August September October November December".split(" "),shortMonths:"Jan Feb Mar Apr May Jun Jul Aug Sep Oct Nov Dec".split(" ")});var Ba=Date.prototype.toISOString?
tb:r.utcFormat("%Y-%m-%dT%H:%M:%S.%LZ"),Fa=+new Date("2000-01-01T00:00:00.000Z")?Ka:r.utcParse("%Y-%m-%dT%H:%M:%S.%LZ");r.isoFormat=Ba;r.isoParse=Fa;r.timeFormatDefaultLocale=Xa;r.timeFormatLocale=h;Object.defineProperty(r,"__esModule",{value:!0})})},{"d3-time":167}],167:[function(b,N,I){(function(r,q){"object"===typeof I&&"undefined"!==typeof N?q(I):(r=r||self,q(r.d3=r.d3||{}))})(this,function(r){function q(cb,$a,jb,pb){function xa(Ea){return cb(Ea=0===arguments.length?new Date:new Date(+Ea)),Ea}
xa.floor=function(Ea){return cb(Ea=new Date(+Ea)),Ea};xa.ceil=function(Ea){return cb(Ea=new Date(Ea-1)),$a(Ea,1),cb(Ea),Ea};xa.round=function(Ea){var Ia=xa(Ea),Oa=xa.ceil(Ea);return Ea-Ia<Oa-Ea?Ia:Oa};xa.offset=function(Ea,Ia){return $a(Ea=new Date(+Ea),null==Ia?1:Math.floor(Ia)),Ea};xa.range=function(Ea,Ia,Oa){var bb=[],Xa;Ea=xa.ceil(Ea);Oa=null==Oa?1:Math.floor(Oa);if(!(Ea<Ia&&0<Oa))return bb;do bb.push(Xa=new Date(+Ea)),$a(Ea,Oa),cb(Ea);while(Xa<Ea&&Ea<Ia);return bb};xa.filter=function(Ea){return q(function(Ia){if(Ia>=
Ia)for(;cb(Ia),!Ea(Ia);)Ia.setTime(Ia-1)},function(Ia,Oa){if(Ia>=Ia)if(0>Oa)for(;0>=++Oa;)for(;$a(Ia,-1),!Ea(Ia););else for(;0<=--Oa;)for(;$a(Ia,1),!Ea(Ia););})};jb&&(xa.count=function(Ea,Ia){a.setTime(+Ea);h.setTime(+Ia);cb(a);cb(h);return Math.floor(jb(a,h))},xa.every=function(Ea){Ea=Math.floor(Ea);return isFinite(Ea)&&0<Ea?1<Ea?xa.filter(pb?function(Ia){return 0===pb(Ia)%Ea}:function(Ia){return 0===xa.count(0,Ia)%Ea}):xa:null});return xa}function m(cb){return q(function($a){$a.setDate($a.getDate()-
($a.getDay()+7-cb)%7);$a.setHours(0,0,0,0)},function($a,jb){$a.setDate($a.getDate()+7*jb)},function($a,jb){return(jb-$a-6E4*(jb.getTimezoneOffset()-$a.getTimezoneOffset()))/6048E5})}function l(cb){return q(function($a){$a.setUTCDate($a.getUTCDate()-($a.getUTCDay()+7-cb)%7);$a.setUTCHours(0,0,0,0)},function($a,jb){$a.setUTCDate($a.getUTCDate()+7*jb)},function($a,jb){return(jb-$a)/6048E5})}var a=new Date,h=new Date,g=q(function(){},function(cb,$a){cb.setTime(+cb+$a)},function(cb,$a){return $a-cb});
g.every=function(cb){cb=Math.floor(cb);return isFinite(cb)&&0<cb?1<cb?q(function($a){$a.setTime(Math.floor($a/cb)*cb)},function($a,jb){$a.setTime(+$a+jb*cb)},function($a,jb){return(jb-$a)/cb}):g:null};var n=g.range,p=q(function(cb){cb.setTime(cb-cb.getMilliseconds())},function(cb,$a){cb.setTime(+cb+1E3*$a)},function(cb,$a){return($a-cb)/1E3},function(cb){return cb.getUTCSeconds()}),d=p.range,e=q(function(cb){cb.setTime(cb-cb.getMilliseconds()-1E3*cb.getSeconds())},function(cb,$a){cb.setTime(+cb+6E4*
$a)},function(cb,$a){return($a-cb)/6E4},function(cb){return cb.getMinutes()}),f=e.range,k=q(function(cb){cb.setTime(cb-cb.getMilliseconds()-1E3*cb.getSeconds()-6E4*cb.getMinutes())},function(cb,$a){cb.setTime(+cb+36E5*$a)},function(cb,$a){return($a-cb)/36E5},function(cb){return cb.getHours()}),t=k.range,v=q(function(cb){cb.setHours(0,0,0,0)},function(cb,$a){cb.setDate(cb.getDate()+$a)},function(cb,$a){return($a-cb-6E4*($a.getTimezoneOffset()-cb.getTimezoneOffset()))/864E5},function(cb){return cb.getDate()-
1}),w=v.range,y=m(0),B=m(1),A=m(2),z=m(3),E=m(4),C=m(5),u=m(6),D=y.range,G=B.range,J=A.range,L=z.range,K=E.range,H=C.range,Q=u.range,M=q(function(cb){cb.setDate(1);cb.setHours(0,0,0,0)},function(cb,$a){cb.setMonth(cb.getMonth()+$a)},function(cb,$a){return $a.getMonth()-cb.getMonth()+12*($a.getFullYear()-cb.getFullYear())},function(cb){return cb.getMonth()}),P=M.range,T=q(function(cb){cb.setMonth(0,1);cb.setHours(0,0,0,0)},function(cb,$a){cb.setFullYear(cb.getFullYear()+$a)},function(cb,$a){return $a.getFullYear()-
cb.getFullYear()},function(cb){return cb.getFullYear()});T.every=function(cb){return isFinite(cb=Math.floor(cb))&&0<cb?q(function($a){$a.setFullYear(Math.floor($a.getFullYear()/cb)*cb);$a.setMonth(0,1);$a.setHours(0,0,0,0)},function($a,jb){$a.setFullYear($a.getFullYear()+jb*cb)}):null};var O=T.range,U=q(function(cb){cb.setUTCSeconds(0,0)},function(cb,$a){cb.setTime(+cb+6E4*$a)},function(cb,$a){return($a-cb)/6E4},function(cb){return cb.getUTCMinutes()}),S=U.range,X=q(function(cb){cb.setUTCMinutes(0,
0,0)},function(cb,$a){cb.setTime(+cb+36E5*$a)},function(cb,$a){return($a-cb)/36E5},function(cb){return cb.getUTCHours()}),ba=X.range,ca=q(function(cb){cb.setUTCHours(0,0,0,0)},function(cb,$a){cb.setUTCDate(cb.getUTCDate()+$a)},function(cb,$a){return($a-cb)/864E5},function(cb){return cb.getUTCDate()-1}),ia=ca.range,ja=l(0),la=l(1),da=l(2),oa=l(3),sa=l(4),ma=l(5),qa=l(6),pa=ja.range,na=la.range,ka=da.range,ua=oa.range,va=sa.range,Ca=ma.range,Ma=qa.range,Ua=q(function(cb){cb.setUTCDate(1);cb.setUTCHours(0,
0,0,0)},function(cb,$a){cb.setUTCMonth(cb.getUTCMonth()+$a)},function(cb,$a){return $a.getUTCMonth()-cb.getUTCMonth()+12*($a.getUTCFullYear()-cb.getUTCFullYear())},function(cb){return cb.getUTCMonth()}),eb=Ua.range,fb=q(function(cb){cb.setUTCMonth(0,1);cb.setUTCHours(0,0,0,0)},function(cb,$a){cb.setUTCFullYear(cb.getUTCFullYear()+$a)},function(cb,$a){return $a.getUTCFullYear()-cb.getUTCFullYear()},function(cb){return cb.getUTCFullYear()});fb.every=function(cb){return isFinite(cb=Math.floor(cb))&&
0<cb?q(function($a){$a.setUTCFullYear(Math.floor($a.getUTCFullYear()/cb)*cb);$a.setUTCMonth(0,1);$a.setUTCHours(0,0,0,0)},function($a,jb){$a.setUTCFullYear($a.getUTCFullYear()+jb*cb)}):null};var nb=fb.range;r.timeDay=v;r.timeDays=w;r.timeFriday=C;r.timeFridays=H;r.timeHour=k;r.timeHours=t;r.timeInterval=q;r.timeMillisecond=g;r.timeMilliseconds=n;r.timeMinute=e;r.timeMinutes=f;r.timeMonday=B;r.timeMondays=G;r.timeMonth=M;r.timeMonths=P;r.timeSaturday=u;r.timeSaturdays=Q;r.timeSecond=p;r.timeSeconds=
d;r.timeSunday=y;r.timeSundays=D;r.timeThursday=E;r.timeThursdays=K;r.timeTuesday=A;r.timeTuesdays=J;r.timeWednesday=z;r.timeWednesdays=L;r.timeWeek=y;r.timeWeeks=D;r.timeYear=T;r.timeYears=O;r.utcDay=ca;r.utcDays=ia;r.utcFriday=ma;r.utcFridays=Ca;r.utcHour=X;r.utcHours=ba;r.utcMillisecond=g;r.utcMilliseconds=n;r.utcMinute=U;r.utcMinutes=S;r.utcMonday=la;r.utcMondays=na;r.utcMonth=Ua;r.utcMonths=eb;r.utcSaturday=qa;r.utcSaturdays=Ma;r.utcSecond=p;r.utcSeconds=d;r.utcSunday=ja;r.utcSundays=pa;r.utcThursday=
sa;r.utcThursdays=va;r.utcTuesday=da;r.utcTuesdays=ka;r.utcWednesday=oa;r.utcWednesdays=ua;r.utcWeek=ja;r.utcWeeks=pa;r.utcYear=fb;r.utcYears=nb;Object.defineProperty(r,"__esModule",{value:!0})})},{}],168:[function(b,N,I){(function(r,q){"object"===typeof I&&"undefined"!==typeof N?q(I):(r=r||self,q(r.d3=r.d3||{}))})(this,function(r){function q(){return w||(A(m),w=B.now()+y)}function m(){w=0}function l(){this._call=this._time=this._next=null}function a(z,E,C){var u=new l;u.restart(z,E,C);return u}function h(){q();
++d;for(var z=k,E;z;)0<=(E=w-z._time)&&z._call.call(null,E),z=z._next;--d}function g(){w=(v=B.now())+y;d=e=0;try{h()}finally{d=0;for(var z,E=k,C,u=Infinity;E;)E._call?(u>E._time&&(u=E._time),z=E,E=E._next):(C=E._next,E._next=null,E=z?z._next=C:k=C);t=z;p(u);w=0}}function n(){var z=B.now(),E=z-v;1E3<E&&(y-=E,v=z)}function p(z){d||(e&&(e=clearTimeout(e)),24<z-w?(Infinity>z&&(e=setTimeout(g,z-B.now()-y)),f&&(f=clearInterval(f))):(f||(v=B.now(),f=setInterval(n,1E3)),d=1,A(g)))}var d=0,e=0,f=0,k,t,v=0,
w=0,y=0,B="object"===typeof performance&&performance.now?performance:Date,A="object"===typeof window&&window.requestAnimationFrame?window.requestAnimationFrame.bind(window):function(z){setTimeout(z,17)};l.prototype=a.prototype={constructor:l,restart:function(z,E,C){if("function"!==typeof z)throw new TypeError("callback is not a function");C=(null==C?q():+C)+(null==E?0:+E);this._next||t===this||(t?t._next=this:k=this,t=this);this._call=z;this._time=C;p()},stop:function(){this._call&&(this._call=null,
this._time=Infinity,p())}};r.interval=function(z,E,C){var u=new l,D=E;if(null==E)return u.restart(z,E,C),u;E=+E;C=null==C?q():+C;u.restart(function L(J){J+=D;u.restart(L,D+=E,C);z(J)},E,C);return u};r.now=q;r.timeout=function(z,E,C){var u=new l;E=null==E?0:+E;u.restart(function(D){u.stop();z(D+E)},E,C);return u};r.timer=a;r.timerFlush=h;Object.defineProperty(r,"__esModule",{value:!0})})},{}],169:[function(b,N,I){!function(){function r(R){return R&&(R.ownerDocument&&R.ownerDocument.defaultView||R.document&&
R||R.defaultView)}function q(R,ha){return R<ha?-1:R>ha?1:R>=ha?0:NaN}function m(R){return null===R?NaN:+R}function l(R){return!isNaN(R)}function a(R){return{left:function(ha,ta,za,Aa){3>arguments.length&&(za=0);4>arguments.length&&(Aa=ha.length);for(;za<Aa;){var Da=za+Aa>>>1;0>R(ha[Da],ta)?za=Da+1:Aa=Da}return za},right:function(ha,ta,za,Aa){3>arguments.length&&(za=0);4>arguments.length&&(Aa=ha.length);for(;za<Aa;){var Da=za+Aa>>>1;0<R(ha[Da],ta)?Aa=Da:za=Da+1}return za}}}function h(R){return R.length}
function g(R,ha){for(var ta in ha)Object.defineProperty(R.prototype,ta,{value:ha[ta],enumerable:!1})}function n(){this._=Object.create(null)}function p(R){return"__proto__"===(R+="")||"\x00"===R[0]?"\x00"+R:R}function d(R){return"\x00"===(R+="")[0]?R.slice(1):R}function e(R){return p(R)in this._}function f(R){return(R=p(R))in this._&&delete this._[R]}function k(){var R=[],ha;for(ha in this._)R.push(d(ha));return R}function t(){var R=0,ha;for(ha in this._)++R;return R}function v(){for(var R in this._)return!1;
return!0}function w(){this._=Object.create(null)}function y(R){return R}function B(R,ha,ta){return function(){var za=ta.apply(ha,arguments);return za===ha?R:za}}function A(R,ha){if(ha in R)return ha;ha=ha.charAt(0).toUpperCase()+ha.slice(1);for(var ta=0,za=ii.length;ta<za;++ta){var Aa=ii[ta]+ha;if(Aa in R)return Aa}}function z(){}function E(){}function C(R){function ha(){for(var Aa=ta,Da=-1,Qa=Aa.length,Ja;++Da<Qa;)(Ja=Aa[Da].on)&&Ja.apply(this,arguments);return R}var ta=[],za=new n;ha.on=function(Aa,
Da){var Qa=za.get(Aa),Ja;if(2>arguments.length)return Qa&&Qa.on;Qa&&(Qa.on=null,ta=ta.slice(0,Ja=ta.indexOf(Qa)).concat(ta.slice(Ja+1)),za.remove(Aa));Da&&ta.push(za.set(Aa,{on:Da}));return R};return ha}function u(){Db.event.preventDefault()}function D(){for(var R=Db.event,ha;ha=R.sourceEvent;)R=ha;return R}function G(R){for(var ha=new E,ta=0,za=arguments.length;++ta<za;)ha[arguments[ta]]=C(ha);ha.of=function(Aa,Da){return function(Qa){try{var Ja=Qa.sourceEvent=Db.event;Qa.target=R;Db.event=Qa;ha[Qa.type].apply(Aa,
Da)}finally{Db.event=Ja}}};return ha}function J(R){Wg(R,Pe);return R}function L(R){return"function"===typeof R?R:function(){return pk(R,this)}}function K(R){return"function"===typeof R?R:function(){return qk(R,this)}}function H(R,ha){function ta(){this.removeAttribute(R)}function za(){this.removeAttributeNS(R.space,R.local)}function Aa(){this.setAttribute(R,ha)}function Da(){this.setAttributeNS(R.space,R.local,ha)}function Qa(){var Ra=ha.apply(this,arguments);null==Ra?this.removeAttribute(R):this.setAttribute(R,
Ra)}function Ja(){var Ra=ha.apply(this,arguments);null==Ra?this.removeAttributeNS(R.space,R.local):this.setAttributeNS(R.space,R.local,Ra)}R=Db.ns.qualify(R);return null==ha?R.local?za:ta:"function"===typeof ha?R.local?Ja:Qa:R.local?Da:Aa}function Q(R){return new RegExp("(?:^|\\s+)"+Db.requote(R)+"(?:\\s+|$)","g")}function M(R,ha){function ta(){for(var Da=-1;++Da<Aa;)R[Da](this,ha)}function za(){for(var Da=-1,Qa=ha.apply(this,arguments);++Da<Aa;)R[Da](this,Qa)}R=(R+"").trim().split(/^|\s+/).map(P);
var Aa=R.length;return"function"===typeof ha?za:ta}function P(R){var ha=Q(R);return function(ta,za){if(Aa=ta.classList)return za?Aa.add(R):Aa.remove(R);var Aa=ta.getAttribute("class")||"";za?(ha.lastIndex=0,ha.test(Aa)||ta.setAttribute("class",(Aa+" "+R).trim().replace(/\s+/g," "))):ta.setAttribute("class",Aa.replace(ha," ").trim().replace(/\s+/g," "))}}function T(R,ha,ta){function za(){this.style.removeProperty(R)}function Aa(){this.style.setProperty(R,ha,ta)}function Da(){var Qa=ha.apply(this,arguments);
null==Qa?this.style.removeProperty(R):this.style.setProperty(R,Qa,ta)}return null==ha?za:"function"===typeof ha?Da:Aa}function O(R,ha){function ta(){delete this[R]}function za(){this[R]=ha}function Aa(){var Da=ha.apply(this,arguments);null==Da?delete this[R]:this[R]=Da}return null==ha?ta:"function"===typeof ha?Aa:za}function U(R){function ha(){var za=this.ownerDocument,Aa=this.namespaceURI;return"http://www.w3.org/1999/xhtml"===Aa&&"http://www.w3.org/1999/xhtml"===za.documentElement.namespaceURI?
za.createElement(R):za.createElementNS(Aa,R)}function ta(){return this.ownerDocument.createElementNS(R.space,R.local)}return"function"===typeof R?R:(R=Db.ns.qualify(R)).local?ta:ha}function S(){var R=this.parentNode;R&&R.removeChild(this)}function X(R){return function(){return Yj(this,R)}}function ba(R){arguments.length||(R=q);return function(ha,ta){return ha&&ta?R(ha.__data__,ta.__data__):!ha-!ta}}function ca(R,ha){for(var ta=0,za=R.length;ta<za;ta++)for(var Aa=R[ta],Da=0,Qa=Aa.length,Ja;Da<Qa;Da++)(Ja=
Aa[Da])&&ha(Ja,Da,ta);return R}function ia(R){Wg(R,Xg);return R}function ja(R){var ha,ta;return function(za,Aa,Da){za=R[Da].update;var Qa=za.length;Da!=ta&&(ta=Da,ha=0);for(Aa>=ha&&(ha=Aa+1);!(Aa=za[ha])&&++ha<Qa;);return Aa}}function la(R,ha,ta){function za(){var db=this[Qa];db&&(this.removeEventListener(R,db,db.$),delete this[Qa])}function Aa(){var db=Ra(ha,Kg(arguments));za.call(this);this.addEventListener(R,this[Qa]=db,db.$=ta);db._=ha}function Da(){var db=new RegExp("^__on([^.]+)"+Db.requote(R)+
"$"),ob,xb;for(xb in this)if(ob=xb.match(db)){var Cb=this[xb];this.removeEventListener(ob[1],Cb,Cb.$);delete this[xb]}}var Qa="__on"+R,Ja=R.indexOf("."),Ra=da;0<Ja&&(R=R.slice(0,Ja));var Wa=Hh.get(R);Wa&&(R=Wa,Ra=oa);return Ja?ha?Aa:za:ha?z:Da}function da(R,ha){return function(ta){var za=Db.event;Db.event=ta;ha[0]=this.__data__;try{R.apply(this,ha)}finally{Db.event=za}}}function oa(R,ha){var ta=da(R,ha);return function(za){var Aa=za.relatedTarget;Aa&&(Aa===this||Aa.compareDocumentPosition(this)&8)||
ta.call(this,za)}}function sa(R){var ha=".dragsuppress-"+ ++ji,ta="click"+ha,za=Db.select(r(R)).on("touchmove"+ha,u).on("dragstart"+ha,u).on("selectstart"+ha,u);null==$f&&($f="onselectstart"in R?!1:A(R.style,"userSelect"));if($f){var Aa=(R&&(R.ownerDocument||R.document||R).documentElement).style,Da=Aa[$f];Aa[$f]="none"}return function(Qa){za.on(ha,null);$f&&(Aa[$f]=Da);if(Qa){var Ja=function(){za.on(ta,null)};za.on(ta,function(){u();Ja()},!0);setTimeout(Ja,0)}}}function ma(R,ha){ha.changedTouches&&
(ha=ha.changedTouches[0]);var ta=R.ownerSVGElement||R;if(ta.createSVGPoint){var za=ta.createSVGPoint();if(0>ki&&(ta=r(R),ta.scrollX||ta.scrollY)){ta=Db.select("body").append("svg").style({position:"absolute",top:0,left:0,margin:0,padding:0,border:"none"},"important");var Aa=ta[0][0].getScreenCTM();ki=!(Aa.f||Aa.e);ta.remove()}ki?(za.x=ha.pageX,za.y=ha.pageY):(za.x=ha.clientX,za.y=ha.clientY);za=za.matrixTransform(R.getScreenCTM().inverse());return[za.x,za.y]}za=R.getBoundingClientRect();return[ha.clientX-
za.left-R.clientLeft,ha.clientY-za.top-R.clientTop]}function qa(){return Db.event.changedTouches[0].identifier}function pa(R,ha,ta){return(ha[0]-R[0])*(ta[1]-R[1])-(ha[1]-R[1])*(ta[0]-R[0])}function na(R){return 1<R?0:-1>R?Yd:Math.acos(R)}function ka(R){return 1<R?Ze:-1>R?-Ze:Math.asin(R)}function ua(R){return((R=Math.exp(R))+1/R)/2}function va(R){return(R=Math.sin(R/2))*R}function Ca(){}function Ma(R,ha,ta){return this instanceof Ma?void(this.h=+R,this.s=+ha,this.l=+ta):2>arguments.length?R instanceof
Ma?new Ma(R.h,R.s,R.l):bb(""+R,Xa,Ma):new Ma(R,ha,ta)}function Ua(R,ha,ta){function za(Qa){360<Qa?Qa-=360:0>Qa&&(Qa+=360);return 60>Qa?Da+(Aa-Da)*Qa/60:180>Qa?Aa:240>Qa?Da+(Aa-Da)*(240-Qa)/60:Da}R=isNaN(R)?0:0>(R%=360)?R+360:R;ha=isNaN(ha)?0:0>ha?0:1<ha?1:ha;ta=0>ta?0:1<ta?1:ta;var Aa=.5>=ta?ta*(1+ha):ta+ha-ta*ha;var Da=2*ta-Aa;return new Ea(Math.round(255*za(R+120)),Math.round(255*za(R)),Math.round(255*za(R-120)))}function eb(R,ha,ta){return this instanceof eb?void(this.h=+R,this.c=+ha,this.l=+ta):
2>arguments.length?R instanceof eb?new eb(R.h,R.c,R.l):R instanceof nb?$a(R.l,R.a,R.b):$a((R=tb((R=Db.rgb(R)).r,R.g,R.b)).l,R.a,R.b):new eb(R,ha,ta)}function fb(R,ha,ta){isNaN(R)&&(R=0);isNaN(ha)&&(ha=0);return new nb(ta,Math.cos(R*=je)*ha,Math.sin(R)*ha)}function nb(R,ha,ta){return this instanceof nb?void(this.l=+R,this.a=+ha,this.b=+ta):2>arguments.length?R instanceof nb?new nb(R.l,R.a,R.b):R instanceof eb?fb(R.h,R.c,R.l):tb((R=Ea(R)).r,R.g,R.b):new nb(R,ha,ta)}function cb(R,ha,ta){R=(R+16)/116;
ta=R-ta/200;ha=jb(R+ha/500)*Zj;R=jb(R)*Gd;ta=jb(ta)*rk;return new Ea(xa(3.2404542*ha-1.5371385*R-.4985314*ta),xa(-.969266*ha+1.8760108*R+.041556*ta),xa(.0556434*ha-.2040259*R+1.0572252*ta))}function $a(R,ha,ta){return 0<R?new eb(Math.atan2(ta,ha)*We,Math.sqrt(ha*ha+ta*ta),R):new eb(NaN,NaN,R)}function jb(R){return.206893034<R?R*R*R:(R-4/29)/7.787037}function pb(R){return.008856<R?Math.pow(R,1/3):7.787037*R+4/29}function xa(R){return Math.round(255*(.00304>=R?12.92*R:1.055*Math.pow(R,1/2.4)-.055))}
function Ea(R,ha,ta){return this instanceof Ea?void(this.r=~~R,this.g=~~ha,this.b=~~ta):2>arguments.length?R instanceof Ea?new Ea(R.r,R.g,R.b):bb(""+R,Ea,Ua):new Ea(R,ha,ta)}function Ia(R){return new Ea(R>>16,R>>8&255,R&255)+""}function Oa(R){return 16>R?"0"+Math.max(0,R).toString(16):Math.min(255,R).toString(16)}function bb(R,ha,ta){var za=0,Aa=0,Da=0,Qa;if(Qa=/([a-z]+)\((.*)\)/.exec(R=R.toLowerCase())){var Ja=Qa[2].split(",");switch(Qa[1]){case "hsl":return ta(parseFloat(Ja[0]),parseFloat(Ja[1])/
100,parseFloat(Ja[2])/100);case "rgb":return ha(Ta(Ja[0]),Ta(Ja[1]),Ta(Ja[2]))}}if(ta=li.get(R))return ha(ta.r,ta.g,ta.b);null==R||"#"!==R.charAt(0)||isNaN(ta=parseInt(R.slice(1),16))||(4===R.length?(za=(ta&3840)>>4,za|=za>>4,Aa=ta&240,Aa|=Aa>>4,Da=ta&15,Da|=Da<<4):7===R.length&&(za=(ta&16711680)>>16,Aa=(ta&65280)>>8,Da=ta&255));return ha(za,Aa,Da)}function Xa(R,ha,ta){var za=Math.min(R/=255,ha/=255,ta/=255),Aa=Math.max(R,ha,ta),Da=Aa-za,Qa=(Aa+za)/2;Da?(za=.5>Qa?Da/(Aa+za):Da/(2-Aa-za),R=60*(R==
Aa?(ha-ta)/Da+(ha<ta?6:0):ha==Aa?(ta-R)/Da+2:(R-ha)/Da+4)):(R=NaN,za=0<Qa&&1>Qa?0:R);return new Ma(R,za,Qa)}function tb(R,ha,ta){R=Ka(R);ha=Ka(ha);ta=Ka(ta);var za=pb((.4124564*R+.3575761*ha+.1804375*ta)/Zj),Aa=pb((.2126729*R+.7151522*ha+.072175*ta)/Gd);R=pb((.0193339*R+.119192*ha+.9503041*ta)/rk);return nb(116*Aa-16,500*(za-Aa),200*(Aa-R))}function Ka(R){return.04045>=(R/=255)?R/12.92:Math.pow((R+.055)/1.055,2.4)}function Ta(R){var ha=parseFloat(R);return"%"===R.charAt(R.length-1)?Math.round(2.55*
ha):ha}function Na(R){return"function"===typeof R?R:function(){return R}}function ib(R){return function(ha,ta,za){2===arguments.length&&"function"===typeof ta&&(za=ta,ta=null);return qb(ha,ta,R,za)}}function qb(R,ha,ta,za){function Aa(){var db=Ra.status,ob;if(ob=!db)ob=(ob=Ra.responseType)&&"text"!==ob?Ra.response:Ra.responseText;if(ob||200<=db&&300>db||304===db){try{var xb=ta.call(Da,Ra)}catch(Cb){Qa.error.call(Da,Cb);return}Qa.load.call(Da,xb)}else Qa.error.call(Da,Ra)}var Da={},Qa=Db.dispatch("beforesend",
"progress","load","error"),Ja={},Ra=new XMLHttpRequest,Wa=null;!this.XDomainRequest||"withCredentials"in Ra||!/^(http(s)?:)?\/\//.test(R)||(Ra=new XDomainRequest);"onload"in Ra?Ra.onload=Ra.onerror=Aa:Ra.onreadystatechange=function(){3<Ra.readyState&&Aa()};Ra.onprogress=function(db){var ob=Db.event;Db.event=db;try{Qa.progress.call(Da,Ra)}finally{Db.event=ob}};Da.header=function(db,ob){db=(db+"").toLowerCase();if(2>arguments.length)return Ja[db];null==ob?delete Ja[db]:Ja[db]=ob+"";return Da};Da.mimeType=
function(db){if(!arguments.length)return ha;ha=null==db?null:db+"";return Da};Da.responseType=function(db){if(!arguments.length)return Wa;Wa=db;return Da};Da.response=function(db){ta=db;return Da};["get","post"].forEach(function(db){Da[db]=function(){return Da.send.apply(Da,[db].concat(Kg(arguments)))}});Da.send=function(db,ob,xb){2===arguments.length&&"function"===typeof ob&&(xb=ob,ob=null);Ra.open(db,R,!0);null==ha||"accept"in Ja||(Ja.accept=ha+",*/*");if(Ra.setRequestHeader)for(var Cb in Ja)Ra.setRequestHeader(Cb,
Ja[Cb]);null!=ha&&Ra.overrideMimeType&&Ra.overrideMimeType(ha);null!=Wa&&(Ra.responseType=Wa);if(null!=xb)Da.on("error",xb).on("load",function(Eb){xb(null,Eb)});Qa.beforesend.call(Da,Ra);Ra.send(null==ob?null:ob);return Da};Da.abort=function(){Ra.abort();return Da};Db.rebind(Da,Qa,"on");return null==za?Da:Da.get(sb(za))}function sb(R){return 1===R.length?function(ha,ta){R(null==ha?ta:null)}:R}function Ba(R,ha,ta){var za=arguments.length;2>za&&(ha=0);3>za&&(ta=Date.now());za={c:R,t:ta+ha,n:null};ak?
ak.n=za:Dj=za;ak=za;ag||(Xe=clearTimeout(Xe),ag=1,mi(Fa));return za}function Fa(){var R=La();R=Va()-R;24<R?(isFinite(R)&&(clearTimeout(Xe),Xe=setTimeout(Fa,R)),ag=0):(ag=1,mi(Fa))}function La(){for(var R=Date.now(),ha=Dj;ha;)R>=ha.t&&ha.c(R-ha.t)&&(ha.c=null),ha=ha.n;return R}function Va(){for(var R,ha=Dj,ta=Infinity;ha;)ha.c?(ha.t<ta&&(ta=ha.t),ha=(R=ha).n):ha=R?R.n=ha.n:Dj=ha.n;ak=R;return ta}function Za(R,ha){return ha-(R?Math.ceil(Math.log(R)/Math.LN10):1)}function mb(R){var ha=R.decimal,ta=R.thousands,
za=R.grouping,Aa=R.currency,Da=za&&ta?function(Qa,Ja){for(var Ra=Qa.length,Wa=[],db=0,ob=za[0],xb=0;0<Ra&&0<ob;){xb+ob+1>Ja&&(ob=Math.max(1,Ja-xb));Wa.push(Qa.substring(Ra-=ob,Ra+ob));if((xb+=ob+1)>Ja)break;ob=za[db=(db+1)%za.length]}return Wa.reverse().join(ta)}:y;return function(Qa){Qa=fh.exec(Qa);var Ja=Qa[1]||" ",Ra=Qa[2]||"\x3e",Wa=Qa[3]||"-",db=Qa[4]||"",ob=Qa[5],xb=+Qa[6],Cb=Qa[7],Eb=Qa[8],Qb=Qa[9],Xb=1,fc="",uc="",zc=!1,Ec=!0;Eb&&(Eb=+Eb.substring(1));if(ob||"0"===Ja&&"\x3d"===Ra)ob=Ja="0",
Ra="\x3d";switch(Qb){case "n":Cb=!0;Qb="g";break;case "%":Xb=100;uc="%";Qb="f";break;case "p":Xb=100;uc="%";Qb="r";break;case "b":case "o":case "x":case "X":"#"===db&&(fc="0"+Qb.toLowerCase());case "c":Ec=!1;case "d":zc=!0;Eb=0;break;case "s":Xb=-1,Qb="r"}"$"===db&&(fc=Aa[0],uc=Aa[1]);"r"!=Qb||Eb||(Qb="g");if(null!=Eb)if("g"==Qb)Eb=Math.max(1,Math.min(21,Eb));else if("e"==Qb||"f"==Qb)Eb=Math.max(0,Math.min(20,Eb));Qb=bk.get(Qb)||ub;var Qc=ob&&Cb;return function(Nb){var Zb=uc;if(zc&&Nb%1)return"";
var wc=0>Nb||0===Nb&&0>1/Nb?(Nb=-Nb,"-"):"-"===Wa?"":Wa;0>Xb?(Zb=Db.formatPrefix(Nb,Eb),Nb=Zb.scale(Nb),Zb=Zb.symbol+uc):Nb*=Xb;Nb=Qb(Nb,Eb);var Xc=Nb.lastIndexOf(".");if(0>Xc)if(Xc=Ec?Nb.lastIndexOf("e"):-1,0>Xc){var Zc=Nb;Nb=""}else Zc=Nb.substring(0,Xc),Nb=Nb.substring(Xc);else Zc=Nb.substring(0,Xc),Nb=ha+Nb.substring(Xc+1);!ob&&Cb&&(Zc=Da(Zc,Infinity));Xc=fc.length+Zc.length+Nb.length+(Qc?0:wc.length);var cd=Xc<xb?Array(Xc=xb-Xc+1).join(Ja):"";Qc&&(Zc=Da(cd+Zc,cd.length?xb-Nb.length:Infinity));
wc+=fc;Nb=Zc+Nb;return("\x3c"===Ra?wc+Nb+cd:"\x3e"===Ra?cd+wc+Nb:"^"===Ra?cd.substring(0,Xc>>=1)+wc+Nb+cd.substring(Xc):wc+(Qc?Nb:cd+Nb))+Zb}}}function ub(R){return R+""}function Pb(){this._=new Date(1<arguments.length?Date.UTC.apply(this,arguments):arguments[0])}function Kb(R,ha,ta){function za(Ra){var Wa=R(Ra),db=Da(Wa,1);return Ra-Wa<db-Ra?Wa:db}function Aa(Ra){ha(Ra=R(new Ef(Ra-1)),1);return Ra}function Da(Ra,Wa){ha(Ra=new Ef(+Ra),Wa);return Ra}function Qa(Ra,Wa,db){Ra=Aa(Ra);var ob=[];if(1<db)for(;Ra<
Wa;)ta(Ra)%db||ob.push(new Date(+Ra)),ha(Ra,1);else for(;Ra<Wa;)ob.push(new Date(+Ra)),ha(Ra,1);return ob}R.floor=R;R.round=za;R.ceil=Aa;R.offset=Da;R.range=Qa;var Ja=R.utc=Ob(R);Ja.floor=Ja;Ja.round=Ob(za);Ja.ceil=Ob(Aa);Ja.offset=Ob(Da);Ja.range=function(Ra,Wa,db){try{Ef=Pb;var ob=new Pb;ob._=Ra;return Qa(ob,Wa,db)}finally{Ef=Date}};return R}function Ob(R){return function(ha,ta){try{Ef=Pb;var za=new Pb;za._=ha;return R(za,ta)._}finally{Ef=Date}}}function Wb(R){function ha(Nb){function Zb(Xc){for(var Zc=
[],cd=-1,Oc=0,Ed,Nd;++cd<wc;)if(37===Nb.charCodeAt(cd)){Zc.push(Nb.slice(Oc,cd));null!=(Ed=Yg[Oc=Nb.charAt(++cd)])&&(Oc=Nb.charAt(++cd));if(Nd=Ec[Oc])Oc=Nd(Xc,null==Ed?"e"===Oc?" ":"0":Ed);Zc.push(Oc);Oc=cd+1}Zc.push(Nb.slice(Oc,cd));return Zc.join("")}var wc=Nb.length;Zb.parse=function(Xc){var Zc={y:1900,m:0,d:1,H:0,M:0,S:0,L:0,Z:null};if(ta(Zc,Nb,Xc,0)!=Xc.length)return null;"p"in Zc&&(Zc.H=Zc.H%12+12*Zc.p);Xc=null!=Zc.Z&&Ef!==Pb;var cd=new (Xc?Pb:Ef);"j"in Zc?cd.setFullYear(Zc.y,0,Zc.j):"W"in Zc||
"U"in Zc?("w"in Zc||(Zc.w="W"in Zc?1:0),cd.setFullYear(Zc.y,0,1),cd.setFullYear(Zc.y,0,"W"in Zc?(Zc.w+6)%7+7*Zc.W-(cd.getDay()+5)%7:Zc.w+7*Zc.U-(cd.getDay()+6)%7)):cd.setFullYear(Zc.y,Zc.m,Zc.d);cd.setHours(Zc.H+(Zc.Z/100|0),Zc.M+Zc.Z%100,Zc.S,Zc.L);return Xc?cd._:cd};Zb.toString=function(){return Nb};return Zb}function ta(Nb,Zb,wc,Xc){for(var Zc,cd=0,Oc=Zb.length,Ed=wc.length;cd<Oc;){if(Xc>=Ed)return-1;Zc=Zb.charCodeAt(cd++);if(37===Zc){if(Zc=Zb.charAt(cd++),Zc=Qc[Zc in Yg?Zb.charAt(cd++):Zc],!Zc||
0>(Xc=Zc(Nb,wc,Xc)))return-1}else if(Zc!=wc.charCodeAt(Xc++))return-1}return Xc}var za=R.dateTime,Aa=R.date,Da=R.time,Qa=R.periods,Ja=R.days,Ra=R.shortDays,Wa=R.months,db=R.shortMonths;ha.utc=function(Nb){function Zb(Xc){try{Ef=Pb;var Zc=new Ef;Zc._=Xc;return wc(Zc)}finally{Ef=Date}}var wc=ha(Nb);Zb.parse=function(Xc){try{Ef=Pb;var Zc=wc.parse(Xc);return Zc&&Zc._}finally{Ef=Date}};Zb.toString=wc.toString;return Zb};ha.multi=ha.utc.multi=Lb;var ob=Db.map(),xb=Kc(Ja),Cb=Nc(Ja),Eb=Kc(Ra),Qb=Nc(Ra),Xb=
Kc(Wa),fc=Nc(Wa),uc=Kc(db),zc=Nc(db);Qa.forEach(function(Nb,Zb){ob.set(Nb.toLowerCase(),Zb)});var Ec={a:function(Nb){return Ra[Nb.getDay()]},A:function(Nb){return Ja[Nb.getDay()]},b:function(Nb){return db[Nb.getMonth()]},B:function(Nb){return Wa[Nb.getMonth()]},c:ha(za),d:function(Nb,Zb){return Bc(Nb.getDate(),Zb,2)},e:function(Nb,Zb){return Bc(Nb.getDate(),Zb,2)},H:function(Nb,Zb){return Bc(Nb.getHours(),Zb,2)},I:function(Nb,Zb){return Bc(Nb.getHours()%12||12,Zb,2)},j:function(Nb,Zb){return Bc(1+
Hd.dayOfYear(Nb),Zb,3)},L:function(Nb,Zb){return Bc(Nb.getMilliseconds(),Zb,3)},m:function(Nb,Zb){return Bc(Nb.getMonth()+1,Zb,2)},M:function(Nb,Zb){return Bc(Nb.getMinutes(),Zb,2)},p:function(Nb){return Qa[+(12<=Nb.getHours())]},S:function(Nb,Zb){return Bc(Nb.getSeconds(),Zb,2)},U:function(Nb,Zb){return Bc(Hd.sundayOfYear(Nb),Zb,2)},w:function(Nb){return Nb.getDay()},W:function(Nb,Zb){return Bc(Hd.mondayOfYear(Nb),Zb,2)},x:ha(Aa),X:ha(Da),y:function(Nb,Zb){return Bc(Nb.getFullYear()%100,Zb,2)},Y:function(Nb,
Zb){return Bc(Nb.getFullYear()%1E4,Zb,4)},Z:Ub,"%":function(){return"%"}},Qc={a:function(Nb,Zb,wc){Eb.lastIndex=0;return(Zb=Eb.exec(Zb.slice(wc)))?(Nb.w=Qb.get(Zb[0].toLowerCase()),wc+Zb[0].length):-1},A:function(Nb,Zb,wc){xb.lastIndex=0;return(Zb=xb.exec(Zb.slice(wc)))?(Nb.w=Cb.get(Zb[0].toLowerCase()),wc+Zb[0].length):-1},b:function(Nb,Zb,wc){uc.lastIndex=0;return(Zb=uc.exec(Zb.slice(wc)))?(Nb.m=zc.get(Zb[0].toLowerCase()),wc+Zb[0].length):-1},B:function(Nb,Zb,wc){Xb.lastIndex=0;return(Zb=Xb.exec(Zb.slice(wc)))?
(Nb.m=fc.get(Zb[0].toLowerCase()),wc+Zb[0].length):-1},c:function(Nb,Zb,wc){return ta(Nb,Ec.c.toString(),Zb,wc)},d:gb,e:gb,H:Sb,I:Sb,j:vb,L:bc,m:Rc,M:ic,p:function(Nb,Zb,wc){Zb=ob.get(Zb.slice(wc,wc+=2).toLowerCase());return null==Zb?-1:(Nb.p=Zb,wc)},S:ac,U:kb,w:bd,W:$b,x:function(Nb,Zb,wc){return ta(Nb,Ec.x.toString(),Zb,wc)},X:function(Nb,Zb,wc){return ta(Nb,Ec.X.toString(),Zb,wc)},y:rc,Y:gc,Z:xc,"%":wb};return ha}function Bc(R,ha,ta){var za=0>R?"-":"";R=(za?-R:R)+"";var Aa=R.length;return za+(Aa<
ta?Array(ta-Aa+1).join(ha)+R:R)}function Kc(R){return new RegExp("^(?:"+R.map(Db.requote).join("|")+")","i")}function Nc(R){for(var ha=new n,ta=-1,za=R.length;++ta<za;)ha.set(R[ta].toLowerCase(),ta);return ha}function bd(R,ha,ta){Cd.lastIndex=0;return(ha=Cd.exec(ha.slice(ta,ta+1)))?(R.w=+ha[0],ta+ha[0].length):-1}function kb(R,ha,ta){Cd.lastIndex=0;return(ha=Cd.exec(ha.slice(ta)))?(R.U=+ha[0],ta+ha[0].length):-1}function $b(R,ha,ta){Cd.lastIndex=0;return(ha=Cd.exec(ha.slice(ta)))?(R.W=+ha[0],ta+ha[0].length):
-1}function gc(R,ha,ta){Cd.lastIndex=0;return(ha=Cd.exec(ha.slice(ta,ta+4)))?(R.y=+ha[0],ta+ha[0].length):-1}function rc(R,ha,ta){Cd.lastIndex=0;if(ha=Cd.exec(ha.slice(ta,ta+2))){var za=+ha[0];R=(R.y=za+(68<za?1900:2E3),ta+ha[0].length)}else R=-1;return R}function xc(R,ha,ta){return/^[+-]\d{4}$/.test(ha=ha.slice(ta,ta+5))?(R.Z=-ha,ta+5):-1}function Rc(R,ha,ta){Cd.lastIndex=0;return(ha=Cd.exec(ha.slice(ta,ta+2)))?(R.m=ha[0]-1,ta+ha[0].length):-1}function gb(R,ha,ta){Cd.lastIndex=0;return(ha=Cd.exec(ha.slice(ta,
ta+2)))?(R.d=+ha[0],ta+ha[0].length):-1}function vb(R,ha,ta){Cd.lastIndex=0;return(ha=Cd.exec(ha.slice(ta,ta+3)))?(R.j=+ha[0],ta+ha[0].length):-1}function Sb(R,ha,ta){Cd.lastIndex=0;return(ha=Cd.exec(ha.slice(ta,ta+2)))?(R.H=+ha[0],ta+ha[0].length):-1}function ic(R,ha,ta){Cd.lastIndex=0;return(ha=Cd.exec(ha.slice(ta,ta+2)))?(R.M=+ha[0],ta+ha[0].length):-1}function ac(R,ha,ta){Cd.lastIndex=0;return(ha=Cd.exec(ha.slice(ta,ta+2)))?(R.S=+ha[0],ta+ha[0].length):-1}function bc(R,ha,ta){Cd.lastIndex=0;return(ha=
Cd.exec(ha.slice(ta,ta+3)))?(R.L=+ha[0],ta+ha[0].length):-1}function Ub(R){var ha=R.getTimezoneOffset();R=0<ha?"-":"+";var ta=de(ha)/60|0;ha=de(ha)%60;return R+Bc(ta,"0",2)+Bc(ha,"0",2)}function wb(R,ha,ta){ee.lastIndex=0;return(R=ee.exec(ha.slice(ta,ta+1)))?ta+R[0].length:-1}function Lb(R){for(var ha=R.length,ta=-1;++ta<ha;)R[ta][0]=this(R[ta][0]);return function(za){for(var Aa=0,Da=R[Aa];!Da[1](za);)Da=R[++Aa];return Da[0](za)}}function Bb(){}function Mb(R,ha,ta){var za=ta.s=R+ha,Aa=za-R;ta.t=R-
(za-Aa)+(ha-Aa)}function Yb(R,ha){if(R&&wg.hasOwnProperty(R.type))wg[R.type](R,ha)}function qc(R,ha,ta){var za=-1;ta=R.length-ta;for(ha.lineStart();++za<ta;){var Aa=R[za];ha.point(Aa[0],Aa[1],Aa[2])}ha.lineEnd()}function Tc(R,ha){var ta=-1,za=R.length;for(ha.polygonStart();++ta<za;)qc(R[ta],ha,1);ha.polygonEnd()}function Yc(){function R(Qa,Ja){Qa*=je;Ja=Ja*je/2+Yd/4;var Ra=Qa-za,Wa=0<=Ra?1:-1;Ra*=Wa;var db=Math.cos(Ja);Ja=Math.sin(Ja);var ob=Da*Ja;hj.add(Math.atan2(ob*Wa*Math.sin(Ra),Aa*db+ob*Math.cos(Ra)));
za=Qa;Aa=db;Da=Ja}var ha,ta,za,Aa,Da;Uf.point=function(Qa,Ja){Uf.point=R;za=(ha=Qa)*je;Aa=Math.cos(Ja=(ta=Ja)*je/2+Yd/4);Da=Math.sin(Ja)};Uf.lineEnd=function(){R(ha,ta)}}function ad(R){var ha=R[0];R=R[1];var ta=Math.cos(R);return[ta*Math.cos(ha),ta*Math.sin(ha),Math.sin(R)]}function ec(R,ha){return R[0]*ha[0]+R[1]*ha[1]+R[2]*ha[2]}function Fc(R,ha){return[R[1]*ha[2]-R[2]*ha[1],R[2]*ha[0]-R[0]*ha[2],R[0]*ha[1]-R[1]*ha[0]]}function dd(R,ha){R[0]+=ha[0];R[1]+=ha[1];R[2]+=ha[2]}function Ac(R,ha){return[R[0]*
ha,R[1]*ha,R[2]*ha]}function Jc(R){var ha=Math.sqrt(R[0]*R[0]+R[1]*R[1]+R[2]*R[2]);R[0]/=ha;R[1]/=ha;R[2]/=ha}function gd(R){return[Math.atan2(R[1],R[0]),ka(R[2])]}function Vc(R,ha){return 1E-6>de(R[0]-ha[0])&&1E-6>de(R[1]-ha[1])}function Gc(R,ha){R*=je;var ta=Math.cos(ha*=je);pd(ta*Math.cos(R),ta*Math.sin(R),Math.sin(ha))}function pd(R,ha,ta){++Oe;Ih+=(R-Ih)/Oe;Jh+=(ha-Jh)/Oe;Of+=(ta-Of)/Oe}function md(){function R(Aa,Da){Aa*=je;var Qa=Math.cos(Da*=je),Ja=Qa*Math.cos(Aa);Aa=Qa*Math.sin(Aa);Da=Math.sin(Da);
var Ra=Math.atan2(Math.sqrt((Ra=ta*Da-za*Aa)*Ra+(Ra=za*Ja-ha*Da)*Ra+(Ra=ha*Aa-ta*Ja)*Ra),ha*Ja+ta*Aa+za*Da);Oi+=Ra;lg+=Ra*(ha+(ha=Ja));xg+=Ra*(ta+(ta=Aa));gh+=Ra*(za+(za=Da));pd(ha,ta,za)}var ha,ta,za;bg.point=function(Aa,Da){Aa*=je;var Qa=Math.cos(Da*=je);ha=Qa*Math.cos(Aa);ta=Qa*Math.sin(Aa);za=Math.sin(Da);bg.point=R;pd(ha,ta,za)}}function rd(){bg.point=Gc}function re(){function R(Qa,Ja){Qa*=je;var Ra=Math.cos(Ja*=je),Wa=Ra*Math.cos(Qa);Qa=Ra*Math.sin(Qa);Ja=Math.sin(Ja);Ra=Aa*Ja-Da*Qa;var db=
Da*Wa-za*Ja,ob=za*Qa-Aa*Wa,xb=Math.sqrt(Ra*Ra+db*db+ob*ob),Cb=za*Wa+Aa*Qa+Da*Ja,Eb=xb&&-na(Cb)/xb;xb=Math.atan2(xb,Cb);Pi+=Eb*Ra;ni+=Eb*db;yg+=Eb*ob;Oi+=xb;lg+=xb*(za+(za=Wa));xg+=xb*(Aa+(Aa=Qa));gh+=xb*(Da+(Da=Ja));pd(za,Aa,Da)}var ha,ta,za,Aa,Da;bg.point=function(Qa,Ja){ha=Qa;ta=Ja;bg.point=R;Qa*=je;var Ra=Math.cos(Ja*=je);za=Ra*Math.cos(Qa);Aa=Ra*Math.sin(Qa);Da=Math.sin(Ja);pd(za,Aa,Da)};bg.lineEnd=function(){R(ha,ta);bg.lineEnd=rd;bg.point=Gc}}function Ad(R,ha){function ta(za,Aa){return za=R(za,
Aa),ha(za[0],za[1])}R.invert&&ha.invert&&(ta.invert=function(za,Aa){return za=ha.invert(za,Aa),za&&R.invert(za[0],za[1])});return ta}function Bd(){return!0}function be(R,ha,ta,za,Aa){var Da=[],Qa=[];R.forEach(function(ob){if(!(0>=(xb=ob.length-1))){var xb,Cb=ob[0],Eb=ob[xb];if(Vc(Cb,Eb)){Aa.lineStart();for(Eb=0;Eb<xb;++Eb)Aa.point((Cb=ob[Eb])[0],Cb[1]);Aa.lineEnd()}else xb=new Rd(Cb,ob,null,!0),Cb=new Rd(Cb,null,xb,!1),xb.o=Cb,Da.push(xb),Qa.push(Cb),xb=new Rd(Eb,ob,null,!1),Cb=new Rd(Eb,null,xb,
!0),xb.o=Cb,Da.push(xb),Qa.push(Cb)}});Qa.sort(ha);le(Da);le(Qa);if(Da.length){R=0;ha=ta;for(ta=Qa.length;R<ta;++R)Qa[R].e=ha=!ha;ha=Da[0];for(var Ja,Ra;;){for(var Wa=ha,db=!0;Wa.v;)if((Wa=Wa.n)===ha)return;Ja=Wa.z;Aa.lineStart();do{Wa.v=Wa.o.v=!0;if(Wa.e){if(db)for(R=0,ta=Ja.length;R<ta;++R)Aa.point((Ra=Ja[R])[0],Ra[1]);else za(Wa.x,Wa.n.x,1,Aa);Wa=Wa.n}else{if(db)for(Ja=Wa.p.z,R=Ja.length-1;0<=R;--R)Aa.point((Ra=Ja[R])[0],Ra[1]);else za(Wa.x,Wa.p.x,-1,Aa);Wa=Wa.p}Wa=Wa.o;Ja=Wa.z;db=!db}while(!Wa.v);
Aa.lineEnd()}}}function le(R){if(ha=R.length){for(var ha,ta=0,za=R[0],Aa;++ta<ha;)za.n=Aa=R[ta],Aa.p=za,za=Aa;za.n=Aa=R[0];Aa.p=za}}function Rd(R,ha,ta,za){this.x=R;this.z=ha;this.o=ta;this.e=za;this.v=!1;this.n=this.p=null}function Fe(R,ha,ta,za){return function(Aa,Da){function Qa(Nb,Zb){var wc=Aa(Nb,Zb);R(Nb=wc[0],Zb=wc[1])&&Da.point(Nb,Zb)}function Ja(Nb,Zb){Nb=Aa(Nb,Zb);Cb.point(Nb[0],Nb[1])}function Ra(){Qb.point=Ja;Cb.lineStart()}function Wa(){Qb.point=Qa;Cb.lineEnd()}function db(Nb,Zb){Qc.push([Nb,
Zb]);Nb=Aa(Nb,Zb);uc.point(Nb[0],Nb[1])}function ob(){uc.lineStart();Qc=[]}function xb(){db(Qc[0][0],Qc[0][1]);uc.lineEnd();var Nb=uc.clean(),Zb=fc.buffer(),wc=Zb.length;Qc.pop();Ec.push(Qc);Qc=null;if(wc)if(Nb&1){Nb=Zb[0];wc=Nb.length-1;Zb=-1;var Xc;if(0<wc){zc||(Da.polygonStart(),zc=!0);for(Da.lineStart();++Zb<wc;)Da.point((Xc=Nb[Zb])[0],Xc[1]);Da.lineEnd()}}else 1<wc&&Nb&2&&Zb.push(Zb.pop().concat(Zb.shift())),Xb.push(Zb.filter(Je))}var Cb=ha(Da),Eb=Aa.invert(za[0],za[1]),Qb={point:Qa,lineStart:Ra,
lineEnd:Wa,polygonStart:function(){Qb.point=db;Qb.lineStart=ob;Qb.lineEnd=xb;Xb=[];Ec=[]},polygonEnd:function(){Qb.point=Qa;Qb.lineStart=Ra;Qb.lineEnd=Wa;Xb=Db.merge(Xb);var Nb=Eb;var Zb=Ec;var wc=Nb[0],Xc=Nb[1],Zc=[Math.sin(wc),-Math.cos(wc),0],cd=0,Oc=0;hj.reset();for(var Ed=0,Nd=Zb.length;Ed<Nd;++Ed){var $d=Zb[Ed],me=$d.length;if(me){var ke=$d[0],te=ke[0];Nb=ke[1]/2+Yd/4;for(var Sd=Math.sin(Nb),Ff=Math.cos(Nb),gf=1;;){gf===me&&(gf=0);Nb=$d[gf];var ne=Nb[0],Pf=Nb[1]/2+Yd/4,De=Math.sin(Pf);Pf=Math.cos(Pf);
var xf=ne-te,yf=0<=xf?1:-1,Ye=yf*xf,Ke=Ye>Yd;Sd*=De;hj.add(Math.atan2(Sd*yf*Math.sin(Ye),Ff*Pf+Sd*Math.cos(Ye)));cd+=Ke?xf+yf*lf:xf;Ke^te>=wc^ne>=wc&&(ke=Fc(ad(ke),ad(Nb)),Jc(ke),te=Fc(Zc,ke),Jc(te),te=(Ke^0<=xf?-1:1)*ka(te[2]),Xc>te||Xc===te&&(ke[0]||ke[1]))&&(Oc+=Ke^0<=xf?1:-1);if(!gf++)break;te=ne;Sd=De;Ff=Pf;ke=Nb}}}Zb=(-1E-6>cd||1E-6>cd&&-1E-6>hj)^Oc&1;Xb.length?(zc||(Da.polygonStart(),zc=!0),be(Xb,Dd,Zb,ta,Da)):Zb&&(zc||(Da.polygonStart(),zc=!0),Da.lineStart(),ta(null,null,1,Da),Da.lineEnd());
zc&&(Da.polygonEnd(),zc=!1);Xb=Ec=null},sphere:function(){Da.polygonStart();Da.lineStart();ta(null,null,1,Da);Da.lineEnd();Da.polygonEnd()}},Xb,fc=Kd(),uc=ha(fc),zc=!1,Ec,Qc;return Qb}}function Je(R){return 1<R.length}function Kd(){var R=[],ha;return{lineStart:function(){R.push(ha=[])},point:function(ta,za){ha.push([ta,za])},lineEnd:z,buffer:function(){var ta=R;R=[];ha=null;return ta},rejoin:function(){1<R.length&&R.push(R.pop().concat(R.shift()))}}}function Dd(R,ha){return(0>(R=R.x)[0]?R[1]-Ze-1E-6:
Ze-R[1])-(0>(ha=ha.x)[0]?ha[1]-Ze-1E-6:Ze-ha[1])}function we(R){function ha(Ra,Wa){return Math.cos(Ra)*Math.cos(Wa)>Aa}function ta(Ra,Wa,db){var ob=ad(Ra),xb=ad(Wa),Cb=[1,0,0];xb=Fc(ob,xb);var Eb=ec(xb,xb);ob=xb[0];var Qb=Eb-ob*ob;if(!Qb)return!db&&Ra;Eb=Aa*Eb/Qb;Qb=-Aa*ob/Qb;ob=Fc(Cb,xb);Cb=Ac(Cb,Eb);xb=Ac(xb,Qb);dd(Cb,xb);xb=ec(Cb,ob);Eb=ec(ob,ob);Qb=xb*xb-Eb*(ec(Cb,Cb)-1);if(!(0>Qb)){var Xb=Math.sqrt(Qb);Qb=Ac(ob,(-xb-Xb)/Eb);dd(Qb,Cb);Qb=gd(Qb);if(!db)return Qb;db=Ra[0];var fc=Wa[0];Ra=Ra[1];
Wa=Wa[1];if(fc<db){var uc=db;db=fc;fc=uc}var zc=fc-db,Ec=1E-6>de(zc-Yd);!Ec&&Wa<Ra&&(uc=Ra,Ra=Wa,Wa=uc);if(Ec||1E-6>zc?Ec?0<Ra+Wa^Qb[1]<(1E-6>de(Qb[0]-db)?Ra:Wa):Ra<=Qb[1]&&Qb[1]<=Wa:zc>Yd^(db<=Qb[0]&&Qb[0]<=fc))return Wa=Ac(ob,(-xb+Xb)/Eb),dd(Wa,Cb),[Qb,gd(Wa)]}}function za(Ra,Wa){var db=Da?R:Yd-R,ob=0;Ra<-db?ob|=1:Ra>db&&(ob|=2);Wa<-db?ob|=4:Wa>db&&(ob|=8);return ob}var Aa=Math.cos(R),Da=0<Aa,Qa=1E-6<de(Aa),Ja=oc(R,6*je);return Fe(ha,function(Ra){var Wa,db,ob,xb,Cb;return{lineStart:function(){xb=
ob=!1;Cb=1},point:function(Eb,Qb){var Xb=[Eb,Qb],fc=ha(Eb,Qb);Qb=Da?fc?0:za(Eb,Qb):fc?za(Eb+(0>Eb?Yd:-Yd),Qb):0;!Wa&&(xb=ob=fc)&&Ra.lineStart();fc!==ob&&(Eb=ta(Wa,Xb),Vc(Wa,Eb)||Vc(Xb,Eb))&&(Xb[0]+=1E-6,Xb[1]+=1E-6,fc=ha(Xb[0],Xb[1]));if(fc!==ob)Cb=0,fc?(Ra.lineStart(),Eb=ta(Xb,Wa),Ra.point(Eb[0],Eb[1])):(Eb=ta(Wa,Xb),Ra.point(Eb[0],Eb[1]),Ra.lineEnd()),Wa=Eb;else if(Qa&&Wa&&Da^fc){var uc;Qb&db||!(uc=ta(Xb,Wa,!0))||(Cb=0,Da?(Ra.lineStart(),Ra.point(uc[0][0],uc[0][1]),Ra.point(uc[1][0],uc[1][1]),Ra.lineEnd()):
(Ra.point(uc[1][0],uc[1][1]),Ra.lineEnd(),Ra.lineStart(),Ra.point(uc[0][0],uc[0][1])))}!fc||Wa&&Vc(Wa,Xb)||Ra.point(Xb[0],Xb[1]);Wa=Xb;ob=fc;db=Qb},lineEnd:function(){ob&&Ra.lineEnd();Wa=null},clean:function(){return Cb|(xb&&ob)<<1}}},Ja,Da?[0,-R]:[-Yd,R-Yd])}function se(R,ha,ta,za){return function(Aa){var Da=Aa.a,Qa=Aa.b,Ja=Da.x;Da=Da.y;var Ra=0,Wa=1,db=Qa.x-Ja;Qa=Qa.y-Da;var ob=R-Ja;if(db||!(0<ob)){ob/=db;if(0>db){if(ob<Ra)return;ob<Wa&&(Wa=ob)}else if(0<db){if(ob>Wa)return;ob>Ra&&(Ra=ob)}ob=ta-
Ja;if(db||!(0>ob)){ob/=db;if(0>db){if(ob>Wa)return;ob>Ra&&(Ra=ob)}else if(0<db){if(ob<Ra)return;ob<Wa&&(Wa=ob)}ob=ha-Da;if(Qa||!(0<ob)){ob/=Qa;if(0>Qa){if(ob<Ra)return;ob<Wa&&(Wa=ob)}else if(0<Qa){if(ob>Wa)return;ob>Ra&&(Ra=ob)}ob=za-Da;if(Qa||!(0>ob)){ob/=Qa;if(0>Qa){if(ob>Wa)return;ob>Ra&&(Ra=ob)}else if(0<Qa){if(ob<Ra)return;ob<Wa&&(Wa=ob)}0<Ra&&(Aa.a={x:Ja+Ra*db,y:Da+Ra*Qa});1>Wa&&(Aa.b={x:Ja+Wa*db,y:Da+Wa*Qa});return Aa}}}}}}function Xd(R,ha,ta,za){function Aa(Ja,Ra){return 1E-6>de(Ja[0]-R)?
0<Ra?0:3:1E-6>de(Ja[0]-ta)?0<Ra?2:1:1E-6>de(Ja[1]-ha)?0<Ra?1:0:0<Ra?3:2}function Da(Ja,Ra){return Qa(Ja.x,Ra.x)}function Qa(Ja,Ra){var Wa=Aa(Ja,1),db=Aa(Ra,1);return Wa!==db?Wa-db:0===Wa?Ra[1]-Ja[1]:1===Wa?Ja[0]-Ra[0]:2===Wa?Ja[1]-Ra[1]:Ra[0]-Ja[0]}return function(Ja){function Ra(Zc,cd,Oc,Ed){var Nd=0,$d=0;if(null==Zc||(Nd=Aa(Zc,Oc))!==($d=Aa(cd,Oc))||0>Qa(Zc,cd)^0<Oc){do Ed.point(0===Nd||3===Nd?R:ta,1<Nd?za:ha);while((Nd=(Nd+Oc+4)%4)!==$d)}else Ed.point(cd[0],cd[1])}function Wa(Zc,cd){R<=Zc&&Zc<=
ta&&ha<=cd&&cd<=za&&Ja.point(Zc,cd)}function db(Zc,cd){Zc=Math.max(-1E9,Math.min(1E9,Zc));cd=Math.max(-1E9,Math.min(1E9,cd));var Oc=R<=Zc&&Zc<=ta&&ha<=cd&&cd<=za;Qb&&Xb.push([Zc,cd]);if(wc)uc=Zc,zc=cd,Ec=Oc,wc=!1,Oc&&(Ja.lineStart(),Ja.point(Zc,cd));else if(Oc&&Zb)Ja.point(Zc,cd);else{var Ed={a:{x:Qc,y:Nb},b:{x:Zc,y:cd}};Cb(Ed)?(Zb||(Ja.lineStart(),Ja.point(Ed.a.x,Ed.a.y)),Ja.point(Ed.b.x,Ed.b.y),Oc||Ja.lineEnd(),Xc=!1):Oc&&(Ja.lineStart(),Ja.point(Zc,cd),Xc=!1)}Qc=Zc;Nb=cd;Zb=Oc}var ob=Ja,xb=Kd(),
Cb=se(R,ha,ta,za),Eb,Qb,Xb,fc={point:Wa,lineStart:function(){fc.point=db;Qb&&Qb.push(Xb=[]);wc=!0;Zb=!1;Qc=Nb=NaN},lineEnd:function(){Eb&&(db(uc,zc),Ec&&Zb&&xb.rejoin(),Eb.push(xb.buffer()));fc.point=Wa;Zb&&Ja.lineEnd()},polygonStart:function(){Ja=xb;Eb=[];Qb=[];Xc=!0},polygonEnd:function(){Ja=ob;Eb=Db.merge(Eb);var Zc=[R,za];for(var cd=0,Oc=Qb.length,Ed=Zc[1],Nd=0;Nd<Oc;++Nd)for(var $d=1,me=Qb[Nd],ke=me.length,te=me[0],Sd;$d<ke;++$d)Sd=me[$d],te[1]<=Ed?Sd[1]>Ed&&0<pa(te,Sd,Zc)&&++cd:Sd[1]<=Ed&&0>
pa(te,Sd,Zc)&&--cd,te=Sd;Zc=0!==cd;cd=Xc&&Zc;Oc=Eb.length;if(cd||Oc)Ja.polygonStart(),cd&&(Ja.lineStart(),Ra(null,null,1,Ja),Ja.lineEnd()),Oc&&be(Eb,Da,Zc,Ra,Ja),Ja.polygonEnd();Eb=Qb=Xb=null}},uc,zc,Ec,Qc,Nb,Zb,wc,Xc;return fc}}function ye(R){var ha=0,ta=Yd/3,za=Tb(R);R=za(ha,ta);R.parallels=function(Aa){return arguments.length?za(ha=Aa[0]*Yd/180,ta=Aa[1]*Yd/180):[ha/Yd*180,ta/Yd*180]};return R}function kf(R,ha){function ta(Qa,Ja){Ja=Math.sqrt(Aa-2*za*Math.sin(Ja))/za;return[Ja*Math.sin(Qa*=za),
Da-Ja*Math.cos(Qa)]}R=Math.sin(R);var za=(R+Math.sin(ha))/2,Aa=1+R*(2*za-R),Da=Math.sqrt(Aa)/za;ta.invert=function(Qa,Ja){Ja=Da-Ja;return[Math.atan2(Qa,Ja)/za,ka((Aa-(Qa*Qa+Ja*Ja)*za*za)/(2*za))]};return ta}function Qe(){function R(Da,Qa){oi+=Aa*Da-za*Qa;za=Da;Aa=Qa}var ha,ta,za,Aa;Kh.point=function(Da,Qa){Kh.point=R;ha=za=Da;ta=Aa=Qa};Kh.lineEnd=function(){R(ha,ta)}}function pf(){function R(Ra,Wa){Qa.push("M",Ra,",",Wa,Da)}function ha(Ra,Wa){Qa.push("M",Ra,",",Wa);Ja.point=ta}function ta(Ra,Wa){Qa.push("L",
Ra,",",Wa)}function za(){Ja.point=R}function Aa(){Qa.push("Z")}var Da=ff(4.5),Qa=[],Ja={point:R,lineStart:function(){Ja.point=ha},lineEnd:za,polygonStart:function(){Ja.lineEnd=Aa},polygonEnd:function(){Ja.lineEnd=za;Ja.point=R},pointRadius:function(Ra){Da=ff(Ra);return Ja},result:function(){if(Qa.length){var Ra=Qa.join("");Qa=[];return Ra}}};return Ja}function ff(R){return"m0,"+R+"a"+R+","+R+" 0 1,1 0,"+-2*R+"a"+R+","+R+" 0 1,1 0,"+2*R+"z"}function Vb(R,ha){Ih+=R;Jh+=ha;++Of}function Sc(){function R(za,
Aa){var Da=za-ha,Qa=Aa-ta;Da=Math.sqrt(Da*Da+Qa*Qa);lg+=Da*(ha+za)/2;xg+=Da*(ta+Aa)/2;gh+=Da;Vb(ha=za,ta=Aa)}var ha,ta;zg.point=function(za,Aa){zg.point=R;Vb(ha=za,ta=Aa)}}function yc(){zg.point=Vb}function kd(){function R(Da,Qa){var Ja=Da-za,Ra=Qa-Aa;Ja=Math.sqrt(Ja*Ja+Ra*Ra);lg+=Ja*(za+Da)/2;xg+=Ja*(Aa+Qa)/2;gh+=Ja;Ja=Aa*Da-za*Qa;Pi+=Ja*(za+Da);ni+=Ja*(Aa+Qa);yg+=3*Ja;Vb(za=Da,Aa=Qa)}var ha,ta,za,Aa;zg.point=function(Da,Qa){zg.point=R;Vb(ha=za=Da,ta=Aa=Qa)};zg.lineEnd=function(){R(ha,ta)}}function Od(R){function ha(Ra,
Wa){R.moveTo(Ra+Qa,Wa);R.arc(Ra,Wa,Qa,0,lf)}function ta(Ra,Wa){R.moveTo(Ra,Wa);Ja.point=za}function za(Ra,Wa){R.lineTo(Ra,Wa)}function Aa(){Ja.point=ha}function Da(){R.closePath()}var Qa=4.5,Ja={point:ha,lineStart:function(){Ja.point=ta},lineEnd:Aa,polygonStart:function(){Ja.lineEnd=Da},polygonEnd:function(){Ja.lineEnd=Aa;Ja.point=ha},pointRadius:function(Ra){Qa=Ra;return Ja},result:z};return Ja}function Td(R){function ha(Ra){return(Ja?za:ta)(Ra)}function ta(Ra){return fe(Ra,function(Wa,db){Wa=R(Wa,
db);Ra.point(Wa[0],Wa[1])})}function za(Ra){function Wa(Ed,Nd){Ed=R(Ed,Nd);Ra.point(Ed[0],Ed[1])}function db(){Zb=NaN;Oc.point=ob;Ra.lineStart()}function ob(Ed,Nd){var $d=ad([Ed,Nd]);Nd=R(Ed,Nd);Aa(Zb,wc,Nb,Xc,Zc,cd,Zb=Nd[0],wc=Nd[1],Nb=Ed,Xc=$d[0],Zc=$d[1],cd=$d[2],Ja,Ra);Ra.point(Zb,wc)}function xb(){Oc.point=Wa;Ra.lineEnd()}function Cb(){db();Oc.point=Eb;Oc.lineEnd=Qb}function Eb(Ed,Nd){ob(Xb=Ed,Nd);fc=Zb;uc=wc;zc=Xc;Ec=Zc;Qc=cd;Oc.point=ob}function Qb(){Aa(Zb,wc,Nb,Xc,Zc,cd,fc,uc,Xb,zc,Ec,Qc,
Ja,Ra);Oc.lineEnd=xb;xb()}var Xb,fc,uc,zc,Ec,Qc,Nb,Zb,wc,Xc,Zc,cd,Oc={point:Wa,lineStart:db,lineEnd:xb,polygonStart:function(){Ra.polygonStart();Oc.lineStart=Cb},polygonEnd:function(){Ra.polygonEnd();Oc.lineStart=db}};return Oc}function Aa(Ra,Wa,db,ob,xb,Cb,Eb,Qb,Xb,fc,uc,zc,Ec,Qc){var Nb=Eb-Ra,Zb=Qb-Wa,wc=Nb*Nb+Zb*Zb;if(wc>4*Da&&Ec--){var Xc=ob+fc,Zc=xb+uc,cd=Cb+zc,Oc=Math.sqrt(Xc*Xc+Zc*Zc+cd*cd),Ed=Math.asin(cd/=Oc),Nd=1E-6>de(de(cd)-1)||1E-6>de(db-Xb)?(db+Xb)/2:Math.atan2(Zc,Xc),$d=R(Nd,Ed);Ed=
$d[0];$d=$d[1];var me=Ed-Ra,ke=$d-Wa,te=Zb*me-Nb*ke;if(te*te/wc>Da||.3<de((Nb*me+Zb*ke)/wc-.5)||ob*fc+xb*uc+Cb*zc<Qa)Aa(Ra,Wa,db,ob,xb,Cb,Ed,$d,Nd,Xc/=Oc,Zc/=Oc,cd,Ec,Qc),Qc.point(Ed,$d),Aa(Ed,$d,Nd,Xc,Zc,cd,Eb,Qb,Xb,fc,uc,zc,Ec,Qc)}}var Da=.5,Qa=Math.cos(30*je),Ja=16;ha.precision=function(Ra){if(!arguments.length)return Math.sqrt(Da);Ja=0<(Da=Ra*Ra)&&16;return ha};return ha}function Ld(R){var ha=Td(function(ta,za){return R([ta*We,za*We])});return function(ta){return jc(ha(ta))}}function Jd(R){this.stream=
R}function fe(R,ha){return{point:ha,sphere:function(){R.sphere()},lineStart:function(){R.lineStart()},lineEnd:function(){R.lineEnd()},polygonStart:function(){R.polygonStart()},polygonEnd:function(){R.polygonEnd()}}}function pe(R){return Tb(function(){return R})()}function Tb(R){function ha(wc){wc=Ja(wc[0]*je,wc[1]*je);return[wc[0]*Wa+fc,uc-wc[1]*Wa]}function ta(wc){return(wc=Ja.invert((wc[0]-fc)/Wa,(uc-wc[1])/Wa))&&[wc[0]*We,wc[1]*We]}function za(){Ja=Ad(Qa=Lc(Eb,Qb,Xb),Da);var wc=Da(xb,Cb);fc=db-
wc[0]*Wa;uc=ob+wc[1]*Wa;return Aa()}function Aa(){Zb&&(Zb.valid=!1,Zb=null);return ha}var Da,Qa,Ja,Ra=Td(function(wc,Xc){wc=Da(wc,Xc);return[wc[0]*Wa+fc,uc-wc[1]*Wa]}),Wa=150,db=480,ob=250,xb=0,Cb=0,Eb=0,Qb=0,Xb=0,fc,uc,zc=Ej,Ec=y,Qc=null,Nb=null,Zb;ha.stream=function(wc){Zb&&(Zb.valid=!1);Zb=jc(zc(Qa,Ra(Ec(wc))));Zb.valid=!0;return Zb};ha.clipAngle=function(wc){if(!arguments.length)return Qc;zc=null==wc?(Qc=wc,Ej):we((Qc=+wc)*je);return Aa()};ha.clipExtent=function(wc){if(!arguments.length)return Nb;
Ec=(Nb=wc)?Xd(wc[0][0],wc[0][1],wc[1][0],wc[1][1]):y;return Aa()};ha.scale=function(wc){if(!arguments.length)return Wa;Wa=+wc;return za()};ha.translate=function(wc){if(!arguments.length)return[db,ob];db=+wc[0];ob=+wc[1];return za()};ha.center=function(wc){if(!arguments.length)return[xb*We,Cb*We];xb=wc[0]%360*je;Cb=wc[1]%360*je;return za()};ha.rotate=function(wc){if(!arguments.length)return[Eb*We,Qb*We,Xb*We];Eb=wc[0]%360*je;Qb=wc[1]%360*je;Xb=2<wc.length?wc[2]%360*je:0;return za()};Db.rebind(ha,Ra,
"precision");return function(){Da=R.apply(this,arguments);ha.invert=Da.invert&&ta;return za()}}function jc(R){return fe(R,function(ha,ta){R.point(ha*je,ta*je)})}function Hc(R,ha){return[R,ha]}function Wc(R,ha){return[R>Yd?R-lf:R<-Yd?R+lf:R,ha]}function Lc(R,ha,ta){return R?ha||ta?Ad(Pc(R),Cc(ha,ta)):Pc(R):ha||ta?Cc(ha,ta):Wc}function Mc(R){return function(ha,ta){return ha+=R,[ha>Yd?ha-lf:ha<-Yd?ha+lf:ha,ta]}}function Pc(R){var ha=Mc(R);ha.invert=Mc(-R);return ha}function Cc(R,ha){function ta(Ja,Ra){var Wa=
Math.cos(Ra),db=Math.cos(Ja)*Wa;Ja=Math.sin(Ja)*Wa;Ra=Math.sin(Ra);Wa=Ra*za+db*Aa;return[Math.atan2(Ja*Da-Wa*Qa,db*za-Ra*Aa),ka(Wa*Da+Ja*Qa)]}var za=Math.cos(R),Aa=Math.sin(R),Da=Math.cos(ha),Qa=Math.sin(ha);ta.invert=function(Ja,Ra){var Wa=Math.cos(Ra),db=Math.cos(Ja)*Wa;Ja=Math.sin(Ja)*Wa;Ra=Math.sin(Ra);Wa=Ra*Da-Ja*Qa;return[Math.atan2(Ja*Da+Ra*Qa,db*za+Wa*Aa),ka(Wa*za-db*Aa)]};return ta}function oc(R,ha){var ta=Math.cos(R),za=Math.sin(R);return function(Aa,Da,Qa,Ja){var Ra=Qa*ha;if(null!=Aa){if(Aa=
sc(ta,Aa),Da=sc(ta,Da),0<Qa?Aa<Da:Aa>Da)Aa+=Qa*lf}else Aa=R+Qa*lf,Da=R-.5*Ra;for(var Wa;0<Qa?Aa>Da:Aa<Da;Aa-=Ra)Ja.point((Wa=gd([ta,-za*Math.cos(Aa),-za*Math.sin(Aa)]))[0],Wa[1])}}function sc(R,ha){ha=ad(ha);ha[0]-=R;Jc(ha);R=na(-ha[1]);return((0>-ha[2]?-R:R)+2*Math.PI-1E-6)%(2*Math.PI)}function tc(R,ha,ta){var za=Db.range(R,ha-1E-6,ta).concat(ha);return function(Aa){return za.map(function(Da){return[Aa,Da]})}}function hd(R,ha,ta){var za=Db.range(R,ha-1E-6,ta).concat(ha);return function(Aa){return za.map(function(Da){return[Da,
Aa]})}}function qd(R){return R.source}function td(R){return R.target}function wd(R,ha,ta,za){var Aa=Math.cos(ha),Da=Math.sin(ha),Qa=Math.cos(za),Ja=Math.sin(za),Ra=Aa*Math.cos(R),Wa=Aa*Math.sin(R),db=Qa*Math.cos(ta),ob=Qa*Math.sin(ta),xb=2*Math.asin(Math.sqrt(va(za-ha)+Aa*Qa*va(ta-R))),Cb=1/Math.sin(xb);ta=xb?function(Eb){var Qb=Math.sin(Eb*=xb)*Cb;Eb=Math.sin(xb-Eb)*Cb;var Xb=Eb*Ra+Qb*db,fc=Eb*Wa+Qb*ob;return[Math.atan2(fc,Xb)*We,Math.atan2(Eb*Da+Qb*Ja,Math.sqrt(Xb*Xb+fc*fc))*We]}:function(){return[R*
We,ha*We]};ta.distance=xb;return ta}function sd(R,ha){function ta(za,Aa){var Da=Math.cos(Aa),Qa=R(Math.cos(za)*Da);return[Qa*Da*Math.sin(za),Qa*Math.sin(Aa)]}ta.invert=function(za,Aa){var Da=Math.sqrt(za*za+Aa*Aa),Qa=ha(Da),Ja=Math.sin(Qa);return[Math.atan2(za*Ja,Da*Math.cos(Qa)),Math.asin(Da&&Aa*Ja/Da)]};return ta}function xe(R,ha){function ta(Qa,Ja){0<Da?Ja<-Ze+1E-6&&(Ja=-Ze+1E-6):Ja>Ze-1E-6&&(Ja=Ze-1E-6);Ja=Da/Math.pow(Math.tan(Yd/4+Ja/2),Aa);return[Ja*Math.sin(Aa*Qa),Da-Ja*Math.cos(Aa*Qa)]}var za=
Math.cos(R),Aa=R===ha?Math.sin(R):Math.log(za/Math.cos(ha))/Math.log(Math.tan(Yd/4+ha/2)/Math.tan(Yd/4+R/2)),Da=za*Math.pow(Math.tan(Yd/4+R/2),Aa)/Aa;if(!Aa)return Le;ta.invert=function(Qa,Ja){Ja=Da-Ja;return[Math.atan2(Qa,Ja)/Aa,2*Math.atan(Math.pow(Da/((0<Aa?1:0>Aa?-1:0)*Math.sqrt(Qa*Qa+Ja*Ja)),1/Aa))-Ze]};return ta}function ue(R,ha){function ta(Qa,Ja){Ja=Da-Ja;return[Ja*Math.sin(Aa*Qa),Da-Ja*Math.cos(Aa*Qa)]}var za=Math.cos(R),Aa=R===ha?Math.sin(R):(za-Math.cos(ha))/(ha-R),Da=za/Aa+R;if(1E-6>de(Aa))return Hc;
ta.invert=function(Qa,Ja){Ja=Da-Ja;return[Math.atan2(Qa,Ja)/Aa,Da-(0<Aa?1:0>Aa?-1:0)*Math.sqrt(Qa*Qa+Ja*Ja)]};return ta}function Le(R,ha){return[R,Math.log(Math.tan(Yd/4+ha/2))]}function oe(R){var ha=pe(R),ta=ha.scale,za=ha.translate,Aa=ha.clipExtent,Da;ha.scale=function(){var Qa=ta.apply(ha,arguments);return Qa===ha?Da?ha.clipExtent(null):ha:Qa};ha.translate=function(){var Qa=za.apply(ha,arguments);return Qa===ha?Da?ha.clipExtent(null):ha:Qa};ha.clipExtent=function(Qa){var Ja=Aa.apply(ha,arguments);
if(Ja===ha){if(Da=null==Qa){var Ra=Yd*ta(),Wa=za();Aa([[Wa[0]-Ra,Wa[1]-Ra],[Wa[0]+Ra,Wa[1]+Ra]])}}else Da&&(Ja=null);return Ja};return ha.clipExtent(null)}function Re(R,ha){return[Math.log(Math.tan(Yd/4+ha/2)),-R]}function Gf(R){return R[0]}function Zg(R){return R[1]}function th(R){for(var ha=R.length,ta=[0,1],za=2,Aa=2;Aa<ha;Aa++){for(;1<za&&0>=pa(R[ta[za-2]],R[ta[za-1]],R[Aa]);)--za;ta[za++]=Aa}return ta.slice(0,za)}function Fj(R,ha){return R[0]-ha[0]||R[1]-ha[1]}function ij(R,ha,ta){return(ta[0]-
ha[0])*(R[1]-ha[1])<(ta[1]-ha[1])*(R[0]-ha[0])}function hh(R,ha,ta,za){var Aa=R[0],Da=ta[0],Qa=ha[0]-Aa,Ja=za[0]-Da;R=R[1];ta=ta[1];ha=ha[1]-R;za=za[1]-ta;Da=(Ja*(R-ta)-za*(Aa-Da))/(za*Qa-Ja*ha);return[Aa+Da*Qa,R+Da*ha]}function Gj(R){var ha=R[0];R=R[R.length-1];return!(ha[0]-R[0]||ha[1]-R[1])}function cg(){mg(this);this.edge=this.site=this.circle=null}function Hj(R){var ha=Lk.pop()||new cg;ha.site=R;return ha}function pi(R){Lh(R);jj.remove(R);Lk.push(R);mg(R)}function uh(R,ha){var ta=R.site,za=ta.x,
Aa=ta.y,Da=Aa-ha;if(!Da)return za;R=R.P;if(!R)return-Infinity;ta=R.site;R=ta.x;ta=ta.y;ha=ta-ha;if(!ha)return R;var Qa=R-za,Ja=1/Da-1/ha,Ra=Qa/ha;return Ja?(-Ra+Math.sqrt(Ra*Ra-2*Ja*(Qa*Qa/(-2*ha)-ta+ha/2+Aa-Da/2)))/Ja+za:(za+R)/2}function Ag(R){this.site=R;this.edges=[]}function Mh(R,ha){return ha.angle-R.angle}function kj(){mg(this);this.x=this.y=this.arc=this.site=this.cy=null}function vh(R){var ha=R.P,ta=R.N;if(ha&&ta){var za=ha.site;ha=R.site;var Aa=ta.site;if(za!==Aa){ta=ha.x;var Da=ha.y,Qa=
za.x-ta,Ja=za.y-Da;za=Aa.x-ta;Aa=Aa.y-Da;var Ra=2*(Qa*Aa-Ja*za);if(!(-1E-12<=Ra)){var Wa=Qa*Qa+Ja*Ja,db=za*za+Aa*Aa;Ja=(Aa*Wa-Ja*db)/Ra;Qa=(Qa*db-za*Wa)/Ra;Aa=Qa+Da;Da=Mk.pop()||new kj;Da.arc=R;Da.site=ha;Da.x=Ja+ta;Da.y=Aa+Math.sqrt(Ja*Ja+Qa*Qa);Da.cy=Aa;R.circle=Da;R=null;for(ha=Ij._;ha;)if(Da.y<ha.y||Da.y===ha.y&&Da.x<=ha.x)if(ha.L)ha=ha.L;else{R=ha.P;break}else if(ha.R)ha=ha.R;else{R=ha;break}Ij.insert(R,Da);R||(zf=Da)}}}}function Lh(R){var ha=R.circle;ha&&(ha.P||(zf=ha.N),Ij.remove(ha),Mk.push(ha),
mg(ha),R.circle=null)}function qi(R,ha){var ta=R.b;if(ta)return!0;var za=R.a;ta=ha[0][0];var Aa=ha[1][0],Da=ha[0][1];ha=ha[1][1];var Qa=R.l,Ja=R.r,Ra=Qa.x;Qa=Qa.y;var Wa=Ja.x;Ja=Ja.y;var db=(Ra+Wa)/2;if(Ja===Qa){if(db<ta||db>=Aa)return;if(Ra>Wa){if(!za)za={x:db,y:Da};else if(za.y>=ha)return;ta={x:db,y:ha}}else{if(!za)za={x:db,y:ha};else if(za.y<Da)return;ta={x:db,y:Da}}}else{var ob=(Ra-Wa)/(Ja-Qa);db=(Qa+Ja)/2-ob*db;if(-1>ob||1<ob)if(Ra>Wa){if(!za)za={x:(Da-db)/ob,y:Da};else if(za.y>=ha)return;ta=
{x:(ha-db)/ob,y:ha}}else{if(!za)za={x:(ha-db)/ob,y:ha};else if(za.y<Da)return;ta={x:(Da-db)/ob,y:Da}}else if(Qa<Ja){if(!za)za={x:ta,y:ob*ta+db};else if(za.x>=Aa)return;ta={x:Aa,y:ob*Aa+db}}else{if(!za)za={x:Aa,y:ob*Aa+db};else if(za.x<ta)return;ta={x:ta,y:ob*ta+db}}}R.a=za;R.b=ta;return!0}function ri(R,ha){this.l=R;this.r=ha;this.a=this.b=null}function Nh(R,ha,ta,za){var Aa=new ri(R,ha);wh.push(Aa);ta&&si(Aa,R,ha,ta);za&&si(Aa,ha,R,za);Oh[R.i].edges.push(new Ph(Aa,R,ha));Oh[ha.i].edges.push(new Ph(Aa,
ha,R));return Aa}function si(R,ha,ta,za){R.a||R.b?R.l===ta?R.b=za:R.a=za:(R.a=za,R.l=ha,R.r=ta)}function Ph(R,ha,ta){var za=R.a,Aa=R.b;this.edge=R;this.site=ha;this.angle=ta?Math.atan2(ta.y-ha.y,ta.x-ha.x):R.l===ha?Math.atan2(Aa.x-za.x,za.y-Aa.y):Math.atan2(za.x-Aa.x,Aa.y-za.y)}function He(){this._=null}function mg(R){R.U=R.C=R.L=R.R=R.P=R.N=null}function ti(R,ha){var ta=ha.R,za=ha.U;za?za.L===ha?za.L=ta:za.R=ta:R._=ta;ta.U=za;ha.U=ta;ha.R=ta.L;ha.R&&(ha.R.U=ha);ta.L=ha}function ui(R,ha){var ta=ha.L,
za=ha.U;za?za.L===ha?za.L=ta:za.R=ta:R._=ta;ta.U=za;ha.U=ta;ha.L=ta.R;ha.L&&(ha.L.U=ha);ta.R=ha}function Jj(R){for(;R.L;)R=R.L;return R}function Qi(R,ha){var ta=R.sort(vi).pop(),za;wh=[];Oh=Array(R.length);jj=new He;for(Ij=new He;;){var Aa=zf;if(ta&&(!Aa||ta.y<Aa.y||ta.y===Aa.y&&ta.x<Aa.x)){if(ta.x!==za||ta.y!==Da){Oh[ta.i]=new Ag(ta);var Da=za=void 0;Aa=ta;for(var Qa=Aa.x,Ja=Aa.y,Ra=jj._;Ra;){var Wa=uh(Ra,Ja)-Qa;if(1E-6<Wa)Ra=Ra.L;else{var db=Ra;var ob=Ja;var xb=db.N;xb?ob=uh(xb,ob):(db=db.site,
ob=db.y===ob?db.x:Infinity);ob=Qa-ob;if(1E-6<ob){if(!Ra.R){Da=Ra;break}Ra=Ra.R}else{-1E-6<Wa?(Da=Ra.P,za=Ra):-1E-6<ob?(Da=Ra,za=Ra.N):Da=za=Ra;break}}}Wa=Hj(Aa);jj.insert(Da,Wa);if(Da||za)if(Da===za)Lh(Da),za=Hj(Da.site),jj.insert(Wa,za),Wa.edge=za.edge=Nh(Da.site,Wa.site),vh(Da),vh(za);else if(za){Lh(Da);Lh(za);Qa=Da.site;Ra=Qa.x;ob=Qa.y;db=Aa.x-Ra;xb=Aa.y-ob;Ja=za.site;var Cb=Ja.x-Ra,Eb=Ja.y-ob,Qb=2*(db*Eb-xb*Cb),Xb=db*db+xb*xb,fc=Cb*Cb+Eb*Eb;Ra={x:(Eb*Xb-xb*fc)/Qb+Ra,y:(db*fc-Cb*Xb)/Qb+ob};si(za.edge,
Qa,Ja,Ra);Wa.edge=Nh(Qa,Aa,null,Ra);za.edge=Nh(Aa,Ja,null,Ra);vh(Da);vh(za)}else Wa.edge=Nh(Da.site,Wa.site);za=ta.x;Da=ta.y}ta=R.pop()}else if(Aa){Ja=Aa.arc;Aa=Ja.circle;Qa=Aa.x;Ra=Aa.cy;Aa={x:Qa,y:Ra};db=Ja.P;ob=Ja.N;Wa=[Ja];pi(Ja);for(Ja=db;Ja.circle&&1E-6>de(Qa-Ja.circle.x)&&1E-6>de(Ra-Ja.circle.cy);)db=Ja.P,Wa.unshift(Ja),pi(Ja),Ja=db;Wa.unshift(Ja);Lh(Ja);for(db=ob;db.circle&&1E-6>de(Qa-db.circle.x)&&1E-6>de(Ra-db.circle.cy);)ob=db.N,Wa.push(db),pi(db),db=ob;Wa.push(db);Lh(db);Ra=Wa.length;
for(Qa=1;Qa<Ra;++Qa)db=Wa[Qa],Ja=Wa[Qa-1],si(db.edge,Ja.site,db.site,Aa);Ja=Wa[0];db=Wa[Ra-1];db.edge=Nh(Ja.site,db.site,null,Aa);vh(Ja);vh(db)}else break}if(ha){R=wh;ta=se(ha[0][0],ha[0][1],ha[1][0],ha[1][1]);for(za=R.length;za--;)if(Da=R[za],!qi(Da,ha)||!ta(Da)||1E-6>de(Da.a.x-Da.b.x)&&1E-6>de(Da.a.y-Da.b.y))Da.a=Da.b=null,R.splice(za,1);R=ha[0][0];ta=ha[1][0];za=ha[0][1];ha=ha[1][1];Da=Oh;for(Aa=Da.length;Aa--;)if((Wa=Da[Aa])&&Wa.prepare())for(Ja=Wa.edges,Ra=Ja.length,Qa=0;Qa<Ra;)if(Xb=Ja[Qa].end(),
Eb=Xb.x,Qb=Xb.y,ob=Ja[++Qa%Ra].start(),Cb=ob.x,fc=ob.y,1E-6<de(Eb-Cb)||1E-6<de(Qb-fc))ob=Ja,db=ob.splice,xb=Qa,Cb=1E-6>de(Eb-R)&&1E-6<ha-Qb?{x:R,y:1E-6>de(Cb-R)?fc:ha}:1E-6>de(Qb-ha)&&1E-6<ta-Eb?{x:1E-6>de(fc-ha)?Cb:ta,y:ha}:1E-6>de(Eb-ta)&&1E-6<Qb-za?{x:ta,y:1E-6>de(Cb-ta)?fc:za}:1E-6>de(Qb-za)&&1E-6<Eb-R?{x:1E-6>de(fc-za)?Cb:R,y:za}:null,Eb=new ri(Wa.site,null),Eb.a=Xb,Eb.b=Cb,wh.push(Eb),db.call(ob,xb,0,new Ph(Eb,Wa.site,null)),++Ra}ha={cells:Oh,edges:wh};jj=Ij=wh=Oh=null;return ha}function vi(R,
ha){return ha.y-R.y||ha.x-R.x}function ck(R){return R.x}function Kj(R){return R.y}function dk(){return{leaf:!0,nodes:[],point:null,x:null,y:null}}function Ri(R,ha,ta,za,Aa,Da){if(!R(ha,ta,za,Aa,Da)){var Qa=.5*(ta+Aa),Ja=.5*(za+Da);ha=ha.nodes;ha[0]&&Ri(R,ha[0],ta,za,Qa,Ja);ha[1]&&Ri(R,ha[1],Qa,za,Aa,Ja);ha[2]&&Ri(R,ha[2],ta,Ja,Qa,Da);ha[3]&&Ri(R,ha[3],Qa,Ja,Aa,Da)}}function sk(R,ha,ta,za,Aa,Da,Qa){var Ja=Infinity,Ra;(function Qb(db,ob,xb,Cb,Eb){if(!(ob>Da||xb>Qa||Cb<za||Eb<Aa)){if(Xb=db.point){var Xb,
fc=ha-db.x,uc=ta-db.y;fc=fc*fc+uc*uc;fc<Ja&&(fc=Math.sqrt(Ja=fc),za=ha-fc,Aa=ta-fc,Da=ha+fc,Qa=ta+fc,Ra=Xb)}Xb=db.nodes;fc=.5*(ob+Cb);uc=.5*(xb+Eb);for(var zc=(ta>=uc)<<1|ha>=fc,Ec=zc+4;zc<Ec;++zc)if(db=Xb[zc&3])switch(zc&3){case 0:Qb(db,ob,xb,fc,uc);break;case 1:Qb(db,fc,xb,Cb,uc);break;case 2:Qb(db,ob,uc,fc,Eb);break;case 3:Qb(db,fc,uc,Cb,Eb)}}})(R,za,Aa,Da,Qa);return Ra}function Qh(R,ha){R=Db.rgb(R);ha=Db.rgb(ha);var ta=R.r,za=R.g,Aa=R.b,Da=ha.r-ta,Qa=ha.g-za,Ja=ha.b-Aa;return function(Ra){return"#"+
Oa(Math.round(ta+Da*Ra))+Oa(Math.round(za+Qa*Ra))+Oa(Math.round(Aa+Ja*Ra))}}function Rh(R,ha){var ta={},za={},Aa;for(Aa in R)Aa in ha?ta[Aa]=xh(R[Aa],ha[Aa]):za[Aa]=R[Aa];for(Aa in ha)Aa in R||(za[Aa]=ha[Aa]);return function(Da){for(Aa in ta)za[Aa]=ta[Aa](Da);return za}}function Bg(R,ha){R=+R;ha=+ha;return function(ta){return R*(1-ta)+ha*ta}}function ng(R,ha){var ta=lj.lastIndex=wi.lastIndex=0,za,Aa,Da,Qa=-1,Ja=[],Ra=[];R+="";for(ha+="";(za=lj.exec(R))&&(Aa=wi.exec(ha));)(Da=Aa.index)>ta&&(Da=ha.slice(ta,
Da),Ja[Qa]?Ja[Qa]+=Da:Ja[++Qa]=Da),(za=za[0])===(Aa=Aa[0])?Ja[Qa]?Ja[Qa]+=Aa:Ja[++Qa]=Aa:(Ja[++Qa]=null,Ra.push({i:Qa,x:Bg(za,Aa)})),ta=wi.lastIndex;ta<ha.length&&(Da=ha.slice(ta),Ja[Qa]?Ja[Qa]+=Da:Ja[++Qa]=Da);return 2>Ja.length?Ra[0]?(ha=Ra[0].x,function(Wa){return ha(Wa)+""}):function(){return ha}:(ha=Ra.length,function(Wa){for(var db=0,ob;db<ha;++db)Ja[(ob=Ra[db]).i]=ob.x(Wa);return Ja.join("")})}function xh(R,ha){for(var ta=Db.interpolators.length,za;0<=--ta&&!(za=Db.interpolators[ta](R,ha)););
return za}function Si(R,ha){var ta=[],za=[],Aa=R.length,Da=ha.length,Qa=Math.min(R.length,ha.length),Ja;for(Ja=0;Ja<Qa;++Ja)ta.push(xh(R[Ja],ha[Ja]));for(;Ja<Aa;++Ja)za[Ja]=R[Ja];for(;Ja<Da;++Ja)za[Ja]=ha[Ja];return function(Ra){for(Ja=0;Ja<Qa;++Ja)za[Ja]=ta[Ja](Ra);return za}}function $e(R){return function(ha){return 0>=ha?0:1<=ha?1:R(ha)}}function Sh(R){return function(ha){return 1-R(1-ha)}}function ih(R){return function(ha){return.5*(.5>ha?R(2*ha):2-R(2-2*ha))}}function yh(R){return R*R}function Se(R){return R*
R*R}function Ue(R){if(0>=R)return 0;if(1<=R)return 1;var ha=R*R,ta=ha*R;return 4*(.5>R?ta:3*(R-ha)+ta-.75)}function jh(R){return 1-Math.cos(R*Ze)}function xi(R){return Math.pow(2,10*(R-1))}function Lj(R){return 1-Math.sqrt(1-R*R)}function Mj(R){return R<1/2.75?7.5625*R*R:R<2/2.75?7.5625*(R-=1.5/2.75)*R+.75:R<2.5/2.75?7.5625*(R-=2.25/2.75)*R+.9375:7.5625*(R-=2.625/2.75)*R+.984375}function $g(R,ha){ha-=R;return function(ta){return Math.round(R+ha*ta)}}function Ti(R){var ha=[R.a,R.b],ta=[R.c,R.d],za=
yi(ha),Aa=ha[0]*ta[0]+ha[1]*ta[1],Da=-Aa;ta[0]+=Da*ha[0];ta[1]+=Da*ha[1];Da=yi(ta)||0;ha[0]*ta[1]<ta[0]*ha[1]&&(ha[0]*=-1,ha[1]*=-1,za*=-1,Aa*=-1);this.rotate=(za?Math.atan2(ha[1],ha[0]):Math.atan2(-ta[0],ta[1]))*We;this.translate=[R.e,R.f];this.scale=[za,Da];this.skew=Da?Math.atan2(Aa,Da)*We:0}function yi(R){var ha=Math.sqrt(R[0]*R[0]+R[1]*R[1]);ha&&(R[0]/=ha,R[1]/=ha);return ha}function Lf(R){return R.length?R.pop()+",":""}function Ui(R,ha,ta,za){R[0]!==ha[0]||R[1]!==ha[1]?(ta=ta.push("translate(",
null,",",null,")"),za.push({i:ta-4,x:Bg(R[0],ha[0])},{i:ta-2,x:Bg(R[1],ha[1])})):(ha[0]||ha[1])&&ta.push("translate("+ha+")")}function ek(R,ha,ta,za){R!==ha?(180<R-ha?ha+=360:180<ha-R&&(R+=360),za.push({i:ta.push(Lf(ta)+"rotate(",null,")")-2,x:Bg(R,ha)})):ha&&ta.push(Lf(ta)+"rotate("+ha+")")}function Hf(R,ha,ta,za){R!==ha?za.push({i:ta.push(Lf(ta)+"skewX(",null,")")-2,x:Bg(R,ha)}):ha&&ta.push(Lf(ta)+"skewX("+ha+")")}function Lg(R,ha,ta,za){R[0]!==ha[0]||R[1]!==ha[1]?(ta=ta.push(Lf(ta)+"scale(",null,
",",null,")"),za.push({i:ta-4,x:Bg(R[0],ha[0])},{i:ta-2,x:Bg(R[1],ha[1])})):1===ha[0]&&1===ha[1]||ta.push(Lf(ta)+"scale("+ha+")")}function dg(R,ha){var ta=[],za=[];R=Db.transform(R);ha=Db.transform(ha);Ui(R.translate,ha.translate,ta,za);ek(R.rotate,ha.rotate,ta,za);Hf(R.skew,ha.skew,ta,za);Lg(R.scale,ha.scale,ta,za);R=ha=null;return function(Aa){for(var Da=-1,Qa=za.length,Ja;++Da<Qa;)ta[(Ja=za[Da]).i]=Ja.x(Aa);return ta.join("")}}function zi(R,ha){ha=(ha-=R=+R)||1/ha;return function(ta){return(ta-
R)/ha}}function Th(R,ha){ha=(ha-=R=+R)||1/ha;return function(ta){return Math.max(0,Math.min(1,(ta-R)/ha))}}function ah(R){for(var ha=[],ta=R.parent;null!=ta;)ha.push(R),R=ta,ta=ta.parent;ha.push(R);return ha}function og(R){R.fixed|=2}function Ai(R){R.fixed&=-7}function Nj(R){R.fixed|=4;R.px=R.x;R.py=R.y}function mj(R){R.fixed&=-5}function eg(R,ha,ta){var za=0,Aa=0;R.charge=0;if(!R.leaf)for(var Da=R.nodes,Qa=Da.length,Ja=-1,Ra;++Ja<Qa;)Ra=Da[Ja],null!=Ra&&(eg(Ra,ha,ta),R.charge+=Ra.charge,za+=Ra.charge*
Ra.cx,Aa+=Ra.charge*Ra.cy);R.point&&(R.leaf||(R.point.x+=Math.random()-.5,R.point.y+=Math.random()-.5),ha*=ta[R.point.index],R.charge+=R.pointCharge=ha,za+=ha*R.point.x,Aa+=ha*R.point.y);R.cx=za/R.charge;R.cy=Aa/R.charge}function tf(R,ha){Db.rebind(R,ha,"sort","children","value");R.nodes=R;R.links=fg;return R}function Vi(R,ha){for(var ta=[R];null!=(R=ta.pop());)if(ha(R),(Aa=R.children)&&(za=Aa.length))for(var za,Aa;0<=--za;)ta.push(Aa[za])}function gg(R,ha){for(var ta=[R],za=[];null!=(R=ta.pop());)if(za.push(R),
(Da=R.children)&&(Aa=Da.length)){R=-1;for(var Aa,Da;++R<Aa;)ta.push(Da[R])}for(;null!=(R=za.pop());)ha(R)}function Oj(R){return R.children}function Uh(R){return R.value}function Qf(R,ha){return ha.value-R.value}function fg(R){return Db.merge(R.map(function(ha){return(ha.children||[]).map(function(ta){return{source:ha,target:ta}})}))}function pg(R){return R.x}function If(R){return R.y}function Mg(R,ha,ta){R.y0=ha;R.y=ta}function bh(R){return Db.range(R.length)}function qf(R){var ha=-1;R=R[0].length;
for(var ta=[];++ha<R;)ta[ha]=0;return ta}function nj(R){for(var ha=1,ta=0,za=R[0][1],Aa,Da=R.length;ha<Da;++ha)(Aa=R[ha][1])>za&&(ta=ha,za=Aa);return ta}function Pj(R){return R.reduce(Ud,0)}function Ud(R,ha){return R+ha[1]}function tk(R,ha){return Ng(R,Math.ceil(Math.log(ha.length)/Math.LN2+1))}function Ng(R,ha){var ta=-1,za=+R[0];R=(R[1]-za)/ha;for(var Aa=[];++ta<=ha;)Aa[ta]=R*ta+za;return Aa}function qg(R){return[Db.min(R),Db.max(R)]}function Vh(R,ha){return R.value-ha.value}function Bi(R,ha){var ta=
R._pack_next;R._pack_next=ha;ha._pack_prev=R;ha._pack_next=ta;ta._pack_prev=ha}function Ci(R,ha){R._pack_next=ha;ha._pack_prev=R}function zh(R,ha){var ta=ha.x-R.x,za=ha.y-R.y;R=R.r+ha.r;return.999*R*R>ta*ta+za*za}function Og(R){function ha(fc){za=Math.min(fc.x-fc.r,za);Aa=Math.max(fc.x+fc.r,Aa);Da=Math.min(fc.y-fc.r,Da);Qa=Math.max(fc.y+fc.r,Qa)}if((ta=R.children)&&(db=ta.length)){var ta,za=Infinity,Aa=-Infinity,Da=Infinity,Qa=-Infinity,Ja,Ra,Wa,db;ta.forEach(uk);var ob=ta[0];ob.x=-ob.r;ob.y=0;ha(ob);
if(1<db){var xb=ta[1];xb.x=xb.r;xb.y=0;ha(xb);if(2<db){var Cb=ta[2];Cg(ob,xb,Cb);ha(Cb);Bi(ob,Cb);ob._pack_prev=Cb;Bi(Cb,xb);xb=ob._pack_next;for(Ja=3;Ja<db;Ja++){Cg(ob,xb,Cb=ta[Ja]);var Eb=0,Qb=1,Xb=1;for(Ra=xb._pack_next;Ra!==xb;Ra=Ra._pack_next,Qb++)if(zh(Ra,Cb)){Eb=1;break}if(1==Eb)for(Wa=ob._pack_prev;Wa!==Ra._pack_prev&&!zh(Wa,Cb);Wa=Wa._pack_prev,Xb++);Eb?(Qb<Xb||Qb==Xb&&xb.r<ob.r?Ci(ob,xb=Ra):Ci(ob=Wa,xb),Ja--):(Bi(ob,Cb),xb=Cb,ha(Cb))}}}ob=(za+Aa)/2;xb=(Da+Qa)/2;for(Ja=Ra=0;Ja<db;Ja++)Cb=
ta[Ja],Cb.x-=ob,Cb.y-=xb,Ra=Math.max(Ra,Cb.r+Math.sqrt(Cb.x*Cb.x+Cb.y*Cb.y));R.r=Ra;ta.forEach(fk)}}function uk(R){R._pack_next=R._pack_prev=R}function fk(R){delete R._pack_next;delete R._pack_prev}function Wh(R,ha,ta,za){var Aa=R.children;R.x=ha+=za*R.x;R.y=ta+=za*R.y;R.r*=za;if(Aa){R=-1;for(var Da=Aa.length;++R<Da;)Wh(Aa[R],ha,ta,za)}}function Cg(R,ha,ta){var za=R.r+ta.r,Aa=ha.x-R.x,Da=ha.y-R.y;if(za&&(Aa||Da)){var Qa=ha.r+ta.r,Ja=Aa*Aa+Da*Da;Qa*=Qa;za*=za;ha=.5+(za-Qa)/(2*Ja);Qa=Math.sqrt(Math.max(0,
2*Qa*(za+Ja)-(za-=Ja)*za-Qa*Qa))/(2*Ja);ta.x=R.x+ha*Aa+Qa*Da;ta.y=R.y+ha*Da-Qa*Aa}else ta.x=R.x+za,ta.y=R.y}function Ve(R,ha){return R.parent==ha.parent?1:2}function Dg(R){var ha=R.children;return ha.length?ha[0]:R.t}function Xh(R){var ha=R.children,ta;return(ta=ha.length)?ha[ta-1]:R.t}function oj(R){return 1+Db.max(R,function(ha){return ha.y})}function Mf(R){return R.reduce(function(ha,ta){return ha+ta.x},0)/R.length}function Yh(R){var ha=R.children;return ha&&ha.length?Yh(ha[0]):R}function Wi(R){var ha=
R.children,ta;return ha&&(ta=ha.length)?Wi(ha[ta-1]):R}function kh(R){return{x:R.x,y:R.y,dx:R.dx,dy:R.dy}}function lh(R,ha){var ta=R.x+ha[3],za=R.y+ha[0],Aa=R.dx-ha[1]-ha[3];R=R.dy-ha[0]-ha[2];0>Aa&&(ta+=Aa/2,Aa=0);0>R&&(za+=R/2,R=0);return{x:ta,y:za,dx:Aa,dy:R}}function mf(R){var ha=R[0];R=R[R.length-1];return ha<R?[ha,R]:[R,ha]}function hg(R){return R.rangeExtent?R.rangeExtent():mf(R.range())}function vk(R,ha,ta,za){var Aa=ta(R[0],R[1]),Da=za(ha[0],ha[1]);return function(Qa){return Da(Aa(Qa))}}
function mh(R,ha){var ta=0,za=R.length-1,Aa=R[ta],Da=R[za];if(Da<Aa){var Qa=ta;ta=za;za=Qa;Qa=Aa;Aa=Da;Da=Qa}R[ta]=ha.floor(Aa);R[za]=ha.ceil(Da);return R}function Di(R){return R?{floor:function(ha){return Math.floor(ha/R)*R},ceil:function(ha){return Math.ceil(ha/R)*R}}:nh}function lb(R,ha,ta,za){var Aa=[],Da=[],Qa=0,Ja=Math.min(R.length,ha.length)-1;R[Ja]<R[0]&&(R=R.slice().reverse(),ha=ha.slice().reverse());for(;++Qa<=Ja;)Aa.push(ta(R[Qa-1],R[Qa])),Da.push(za(ha[Qa-1],ha[Qa]));return function(Ra){var Wa=
Db.bisect(R,Ra,1,Ja)-1;return Da[Wa](Aa[Wa](Ra))}}function W(R,ha,ta,za){function Aa(){var Ra=2<Math.min(R.length,ha.length)?lb:vk,Wa=za?Th:zi;Qa=Ra(R,ha,Wa,ta);Ja=Ra(ha,R,Wa,xh);return Da}function Da(Ra){return Qa(Ra)}var Qa,Ja;Da.invert=function(Ra){return Ja(Ra)};Da.domain=function(Ra){if(!arguments.length)return R;R=Ra.map(Number);return Aa()};Da.range=function(Ra){if(!arguments.length)return ha;ha=Ra;return Aa()};Da.rangeRound=function(Ra){return Da.range(Ra).interpolate($g)};Da.clamp=function(Ra){if(!arguments.length)return za;
za=Ra;return Aa()};Da.interpolate=function(Ra){if(!arguments.length)return ta;ta=Ra;return Aa()};Da.ticks=function(Ra){return Db.range.apply(Db,ea(R,Ra))};Da.tickFormat=function(Ra,Wa){return wa(R,Ra,Wa)};Da.nice=function(Ra){Z(R,Ra);return Aa()};Da.copy=function(){return W(R,ha,ta,za)};return Aa()}function aa(R,ha){return Db.rebind(R,ha,"range","rangeRound","interpolate","clamp")}function Z(R,ha){mh(R,Di(ea(R,ha)[2]));mh(R,Di(ea(R,ha)[2]));return R}function ea(R,ha){null==ha&&(ha=10);R=mf(R);var ta=
R[1]-R[0],za=Math.pow(10,Math.floor(Math.log(ta/ha)/Math.LN10));ha=ha/ta*za;.15>=ha?za*=10:.35>=ha?za*=5:.75>=ha&&(za*=2);R[0]=Math.ceil(R[0]/za)*za;R[1]=Math.floor(R[1]/za)*za+.5*za;R[2]=za;return R}function wa(R,ha,ta){R=ea(R,ha);if(ta){ha=fh.exec(ta);ha.shift();if("s"===ha[8]){var za=Db.formatPrefix(Math.max(de(R[0]),de(R[1])));ha[7]||(ha[7]="."+Ga(za.scale(R[2])));ha[8]="f";ta=Db.format(ha.join(""));return function(Aa){return ta(za.scale(Aa))+za.symbol}}ha[7]||(ha[7]="."+Sa(ha[8],R));ta=ha.join("")}else ta=
",."+Ga(R[2])+"f";return Db.format(ta)}function Ga(R){return-Math.floor(Math.log(R)/Math.LN10+.01)}function Sa(R,ha){var ta=Ga(ha[2]);return R in Xi?Math.abs(ta-Ga(Math.max(de(ha[0]),de(ha[1]))))+ +("e"!==R):ta-2*("%"===R)}function ab(R,ha,ta,za){function Aa(Ja){return(ta?Math.log(0>Ja?0:Ja):-Math.log(0<Ja?0:-Ja))/Math.log(ha)}function Da(Ja){return ta?Math.pow(ha,Ja):-Math.pow(ha,-Ja)}function Qa(Ja){return R(Aa(Ja))}Qa.invert=function(Ja){return Da(R.invert(Ja))};Qa.domain=function(Ja){if(!arguments.length)return za;
ta=0<=Ja[0];R.domain((za=Ja.map(Number)).map(Aa));return Qa};Qa.base=function(Ja){if(!arguments.length)return ha;ha=+Ja;R.domain(za.map(Aa));return Qa};Qa.nice=function(){var Ja=mh(za.map(Aa),ta?Math:ig);R.domain(Ja);za=Ja.map(Da);return Qa};Qa.ticks=function(){var Ja=mf(za),Ra=[],Wa=Ja[0];Ja=Ja[1];var db=Math.floor(Aa(Wa)),ob=Math.ceil(Aa(Ja)),xb=ha%1?2:ha;if(isFinite(ob-db)){if(ta){for(;db<ob;db++)for(var Cb=1;Cb<xb;Cb++)Ra.push(Da(db)*Cb);Ra.push(Da(db))}else for(Ra.push(Da(db));db++<ob;)for(Cb=
xb-1;0<Cb;Cb--)Ra.push(Da(db)*Cb);for(db=0;Ra[db]<Wa;db++);for(ob=Ra.length;Ra[ob-1]>Ja;ob--);Ra=Ra.slice(db,ob)}return Ra};Qa.tickFormat=function(Ja,Ra){if(!arguments.length)return rg;2>arguments.length?Ra=rg:"function"!==typeof Ra&&(Ra=Db.format(Ra));var Wa=Math.max(1,ha*Ja/Qa.ticks().length);return function(db){var ob=db/Da(Math.round(Aa(db)));ob*ha<ha-.5&&(ob*=ha);return ob<=Wa?Ra(db):""}};Qa.copy=function(){return ab(R.copy(),ha,ta,za)};return aa(Qa,R)}function yb(R,ha,ta){function za(Qa){return R(Aa(Qa))}
var Aa=Hb(ha),Da=Hb(1/ha);za.invert=function(Qa){return Da(R.invert(Qa))};za.domain=function(Qa){if(!arguments.length)return ta;R.domain((ta=Qa.map(Number)).map(Aa));return za};za.ticks=function(Qa){return Db.range.apply(Db,ea(ta,Qa))};za.tickFormat=function(Qa,Ja){return wa(ta,Qa,Ja)};za.nice=function(Qa){return za.domain(Z(ta,Qa))};za.exponent=function(Qa){if(!arguments.length)return ha;Aa=Hb(ha=Qa);Da=Hb(1/ha);R.domain(ta.map(Aa));return za};za.copy=function(){return yb(R.copy(),ha,ta)};return aa(za,
R)}function Hb(R){return function(ha){return 0>ha?-Math.pow(-ha,R):Math.pow(ha,R)}}function Ib(R,ha){function ta(Ja){return Da[((Aa.get(Ja)||("range"===ha.t?Aa.set(Ja,R.push(Ja)):NaN))-1)%Da.length]}function za(Ja,Ra){return Db.range(R.length).map(function(Wa){return Ja+Ra*Wa})}var Aa,Da,Qa;ta.domain=function(Ja){if(!arguments.length)return R;R=[];Aa=new n;for(var Ra=-1,Wa=Ja.length,db;++Ra<Wa;)Aa.has(db=Ja[Ra])||Aa.set(db,R.push(db));return ta[ha.t].apply(ta,ha.a)};ta.range=function(Ja){if(!arguments.length)return Da;
Da=Ja;Qa=0;ha={t:"range",a:arguments};return ta};ta.rangePoints=function(Ja,Ra){2>arguments.length&&(Ra=0);var Wa=Ja[0],db=Ja[1];db=2>R.length?(Wa=(Wa+db)/2,0):(db-Wa)/(R.length-1+Ra);Da=za(Wa+db*Ra/2,db);Qa=0;ha={t:"rangePoints",a:arguments};return ta};ta.rangeRoundPoints=function(Ja,Ra){2>arguments.length&&(Ra=0);var Wa=Ja[0],db=Ja[1],ob=2>R.length?(Wa=db=Math.round((Wa+db)/2),0):(db-Wa)/(R.length-1+Ra)|0;Da=za(Wa+Math.round(ob*Ra/2+(db-Wa-(R.length-1+Ra)*ob)/2),ob);Qa=0;ha={t:"rangeRoundPoints",
a:arguments};return ta};ta.rangeBands=function(Ja,Ra,Wa){2>arguments.length&&(Ra=0);3>arguments.length&&(Wa=Ra);var db=Ja[1]<Ja[0],ob=Ja[db-0],xb=(Ja[1-db]-ob)/(R.length-Ra+2*Wa);Da=za(ob+xb*Wa,xb);db&&Da.reverse();Qa=xb*(1-Ra);ha={t:"rangeBands",a:arguments};return ta};ta.rangeRoundBands=function(Ja,Ra,Wa){2>arguments.length&&(Ra=0);3>arguments.length&&(Wa=Ra);var db=Ja[1]<Ja[0],ob=Ja[db-0],xb=Ja[1-db],Cb=Math.floor((xb-ob)/(R.length-Ra+2*Wa));Da=za(ob+Math.round((xb-ob-(R.length-Ra)*Cb)/2),Cb);
db&&Da.reverse();Qa=Math.round(Cb*(1-Ra));ha={t:"rangeRoundBands",a:arguments};return ta};ta.rangeBand=function(){return Qa};ta.rangeExtent=function(){return mf(ha.a[0])};ta.copy=function(){return Ib(R,ha)};return ta.domain(R)}function nc(R,ha){function ta(){var Da=0,Qa=ha.length;for(Aa=[];++Da<Qa;)Aa[Da-1]=Db.quantile(R,Da/Qa);return za}function za(Da){if(!isNaN(Da=+Da))return ha[Db.bisect(Aa,Da)]}var Aa;za.domain=function(Da){if(!arguments.length)return R;R=Da.map(m).filter(l).sort(q);return ta()};
za.range=function(Da){if(!arguments.length)return ha;ha=Da;return ta()};za.quantiles=function(){return Aa};za.invertExtent=function(Da){Da=ha.indexOf(Da);return 0>Da?[NaN,NaN]:[0<Da?Aa[Da-1]:R[0],Da<Aa.length?Aa[Da]:R[R.length-1]]};za.copy=function(){return nc(R,ha)};return ta()}function mc(R,ha,ta){function za(Ja){return ta[Math.max(0,Math.min(Qa,Math.floor(Da*(Ja-R))))]}function Aa(){Da=ta.length/(ha-R);Qa=ta.length-1;return za}var Da,Qa;za.domain=function(Ja){if(!arguments.length)return[R,ha];
R=+Ja[0];ha=+Ja[Ja.length-1];return Aa()};za.range=function(Ja){if(!arguments.length)return ta;ta=Ja;return Aa()};za.invertExtent=function(Ja){Ja=ta.indexOf(Ja);Ja=0>Ja?NaN:Ja/Da+R;return[Ja,Ja+1/Da]};za.copy=function(){return mc(R,ha,ta)};return Aa()}function cc(R,ha){function ta(za){if(za<=za)return ha[Db.bisect(R,za)]}ta.domain=function(za){if(!arguments.length)return R;R=za;return ta};ta.range=function(za){if(!arguments.length)return ha;ha=za;return ta};ta.invertExtent=function(za){za=ha.indexOf(za);
return[R[za-1],R[za]]};ta.copy=function(){return cc(R,ha)};return ta}function lc(R){function ha(ta){return+ta}ha.invert=ha;ha.domain=ha.range=function(ta){if(!arguments.length)return R;R=ta.map(ha);return ha};ha.ticks=function(ta){return Db.range.apply(Db,ea(R,ta))};ha.tickFormat=function(ta,za){return wa(R,ta,za)};ha.copy=function(){return lc(R)};return ha}function kc(){return 0}function Gb(R){return R.innerRadius}function dc(R){return R.outerRadius}function Dc(R){return R.startAngle}function Uc(R){return R.endAngle}
function jd(R){return R&&R.padAngle}function Ic(R,ha,ta,za){return 0<(R-ta)*ha-(ha-za)*R?0:1}function ld(R,ha,ta,za,Aa){var Da=R[0]-ha[0],Qa=R[1]-ha[1];Aa=(Aa?za:-za)/Math.sqrt(Da*Da+Qa*Qa);Qa*=Aa;Da*=-Aa;var Ja=R[0]+Qa,Ra=R[1]+Da,Wa=ha[0]+Qa,db=ha[1]+Da;R=(Ja+Wa)/2;ha=(Ra+db)/2;Aa=Wa-Ja;var ob=db-Ra,xb=Aa*Aa+ob*ob;za=ta-za;db=Ja*db-Wa*Ra;var Cb=(0>ob?-1:1)*Math.sqrt(Math.max(0,za*za*xb-db*db));Ja=(db*ob-Aa*Cb)/xb;Ra=(-db*Aa-ob*Cb)/xb;Wa=(db*ob+Aa*Cb)/xb;Aa=(-db*Aa+ob*Cb)/xb;ob=Ja-R;xb=Ra-ha;R=Wa-
R;ha=Aa-ha;ob*ob+xb*xb>R*R+ha*ha&&(Ja=Wa,Ra=Aa);return[[Ja-Qa,Ra-Da],[Ja*ta/za,Ra*ta/za]]}function id(R){function ha(Ra){function Wa(){db.push("M",Da(R(ob),Ja))}for(var db=[],ob=[],xb=-1,Cb=Ra.length,Eb,Qb=Na(ta),Xb=Na(za);++xb<Cb;)Aa.call(this,Eb=Ra[xb],xb)?ob.push([+Qb.call(this,Eb,xb),+Xb.call(this,Eb,xb)]):ob.length&&(Wa(),ob=[]);ob.length&&Wa();return db.length?db.join(""):null}var ta=Gf,za=Zg,Aa=Bd,Da=yd,Qa=Da.key,Ja=.7;ha.x=function(Ra){if(!arguments.length)return ta;ta=Ra;return ha};ha.y=
function(Ra){if(!arguments.length)return za;za=Ra;return ha};ha.defined=function(Ra){if(!arguments.length)return Aa;Aa=Ra;return ha};ha.interpolate=function(Ra){if(!arguments.length)return Qa;Qa="function"===typeof Ra?Da=Ra:(Da=wk.get(Ra)||yd).key;return ha};ha.tension=function(Ra){if(!arguments.length)return Ja;Ja=Ra;return ha};return ha}function yd(R){return 1<R.length?R.join("L"):R+"Z"}function zd(R){return R.join("L")+"Z"}function ud(R){for(var ha=0,ta=R.length,za=R[0],Aa=[za[0],",",za[1]];++ha<
ta;)Aa.push("V",(za=R[ha])[1],"H",za[0]);return Aa.join("")}function ie(R){for(var ha=0,ta=R.length,za=R[0],Aa=[za[0],",",za[1]];++ha<ta;)Aa.push("H",(za=R[ha])[0],"V",za[1]);return Aa.join("")}function ge(R,ha){if(1>ha.length||R.length!=ha.length&&R.length!=ha.length+2)return yd(R);var ta=R.length!=ha.length,za="",Aa=R[0],Da=R[1],Qa=ha[0],Ja=Qa,Ra=1;ta&&(za+="Q"+(Da[0]-2*Qa[0]/3)+","+(Da[1]-2*Qa[1]/3)+","+Da[0]+","+Da[1],Aa=R[1],Ra=2);if(1<ha.length)for(Ja=ha[1],Da=R[Ra],Ra++,za+="C"+(Aa[0]+Qa[0])+
","+(Aa[1]+Qa[1])+","+(Da[0]-Ja[0])+","+(Da[1]-Ja[1])+","+Da[0]+","+Da[1],Aa=2;Aa<ha.length;Aa++,Ra++)Da=R[Ra],Ja=ha[Aa],za+="S"+(Da[0]-Ja[0])+","+(Da[1]-Ja[1])+","+Da[0]+","+Da[1];ta&&(R=R[Ra],za+="Q"+(Da[0]+2*Ja[0]/3)+","+(Da[1]+2*Ja[1]/3)+","+R[0]+","+R[1]);return za}function Ee(R,ha){var ta=[];ha=(1-ha)/2;for(var za,Aa=R[0],Da=R[1],Qa=1,Ja=R.length;++Qa<Ja;)za=Aa,Aa=Da,Da=R[Qa],ta.push([ha*(Da[0]-za[0]),ha*(Da[1]-za[1])]);return ta}function Ge(R){if(3>R.length)return yd(R);var ha=1,ta=R.length,
za=R[0],Aa=za[0],Da=za[1],Qa=[Aa,Aa,Aa,(za=R[1])[0]],Ja=[Da,Da,Da,za[1]];Aa=[Aa,",",Da,"L",Be(Ah,Qa),",",Be(Ah,Ja)];for(R.push(R[ta-1]);++ha<=ta;)za=R[ha],Qa.shift(),Qa.push(za[0]),Ja.shift(),Ja.push(za[1]),Qd(Aa,Qa,Ja);R.pop();Aa.push("L",za);return Aa.join("")}function Be(R,ha){return R[0]*ha[0]+R[1]*ha[1]+R[2]*ha[2]+R[3]*ha[3]}function Qd(R,ha,ta){R.push("C",Be(Nk,ha),",",Be(Nk,ta),",",Be(sg,ha),",",Be(sg,ta),",",Be(Ah,ha),",",Be(Ah,ta))}function qe(R,ha){return(ha[1]-R[1])/(ha[0]-R[0])}function Ne(R){for(var ha,
ta=-1,za=R.length,Aa,Da;++ta<za;)ha=R[ta],Aa=ha[0],Da=ha[1]-Ze,ha[0]=Aa*Math.cos(Da),ha[1]=Aa*Math.sin(Da);return R}function ze(R){function ha(xb){function Cb(){Eb.push("M",Ja(R(Xb),ob),db,Wa(R(Qb.reverse()),ob),"Z")}for(var Eb=[],Qb=[],Xb=[],fc=-1,uc=xb.length,zc,Ec=Na(ta),Qc=Na(Aa),Nb=ta===za?function(){return wc}:Na(za),Zb=Aa===Da?function(){return Xc}:Na(Da),wc,Xc;++fc<uc;)Qa.call(this,zc=xb[fc],fc)?(Qb.push([wc=+Ec.call(this,zc,fc),Xc=+Qc.call(this,zc,fc)]),Xb.push([+Nb.call(this,zc,fc),+Zb.call(this,
zc,fc)])):Qb.length&&(Cb(),Qb=[],Xb=[]);Qb.length&&Cb();return Eb.length?Eb.join(""):null}var ta=Gf,za=Gf,Aa=0,Da=Zg,Qa=Bd,Ja=yd,Ra=Ja.key,Wa=Ja,db="L",ob=.7;ha.x=function(xb){if(!arguments.length)return za;ta=za=xb;return ha};ha.x0=function(xb){if(!arguments.length)return ta;ta=xb;return ha};ha.x1=function(xb){if(!arguments.length)return za;za=xb;return ha};ha.y=function(xb){if(!arguments.length)return Da;Aa=Da=xb;return ha};ha.y0=function(xb){if(!arguments.length)return Aa;Aa=xb;return ha};ha.y1=
function(xb){if(!arguments.length)return Da;Da=xb;return ha};ha.defined=function(xb){if(!arguments.length)return Qa;Qa=xb;return ha};ha.interpolate=function(xb){if(!arguments.length)return Ra;Ra="function"===typeof xb?Ja=xb:(Ja=wk.get(xb)||yd).key;Wa=Ja.reverse||Ja;db=Ja.closed?"M":"L";return ha};ha.tension=function(xb){if(!arguments.length)return ob;ob=xb;return ha};return ha}function Te(R){return R.radius}function nf(R){return[R.x,R.y]}function rf(R){return function(){var ha=R.apply(this,arguments),
ta=ha[0];ha=ha[1]-Ze;return[ta*Math.cos(ha),ta*Math.sin(ha)]}}function Eg(){return 64}function df(){return"circle"}function Rf(R){R=Math.sqrt(R/Yd);return"M0,"+R+"A"+R+","+R+" 0 1,1 0,"+-R+"A"+R+","+R+" 0 1,1 0,"+R+"Z"}function Pg(R){return function(){var ha,ta,za;(ha=this[R])&&(za=ha[ta=ha.active])&&(za.timer.c=null,za.timer.t=NaN,--ha.count?delete ha[ta]:delete this[R],ha.active+=.5,za.event&&za.event.interrupt.call(this,this.__data__,za.index))}}function Ei(R,ha,ta){Wg(R,uf);R.namespace=ha;R.id=
ta;return R}function Vf(R,ha,ta,za){var Aa=R.id,Da=R.namespace;return ca(R,"function"===typeof ta?function(Qa,Ja,Ra){Qa[Da][Aa].tween.set(ha,za(ta.call(Qa,Qa.__data__,Ja,Ra)))}:(ta=za(ta),function(Qa){Qa[Da][Aa].tween.set(ha,ta)}))}function Af(R){null==R&&(R="");return function(){this.textContent=R}}function Ce(R){return null==R?"__transition__":"__transition_"+R+"__"}function Ie(R,ha,ta,za,Aa){function Da(Qb){var Xb=Wa.delay;Eb.t=Xb+Cb;if(Xb<=Qb)return Qa(Qb-Xb);Eb.c=Qa}function Qa(Qb){var Xb=Ra.active,
fc=Ra[Xb];fc&&(fc.timer.c=null,fc.timer.t=NaN,--Ra.count,delete Ra[Xb],fc.event&&fc.event.interrupt.call(R,R.__data__,fc.index));for(var uc in Ra)+uc<za&&(Xb=Ra[uc],Xb.timer.c=null,Xb.timer.t=NaN,--Ra.count,delete Ra[uc]);Eb.c=Ja;Ba(function(){Eb.c&&Ja(Qb||1)&&(Eb.c=null,Eb.t=NaN);return 1},0,Cb);Ra.active=za;Wa.event&&Wa.event.start.call(R,R.__data__,ha);xb=[];Wa.tween.forEach(function(zc,Ec){(Ec=Ec.call(R,R.__data__,ha))&&xb.push(Ec)});ob=Wa.ease;db=Wa.duration}function Ja(Qb){Qb/=db;for(var Xb=
ob(Qb),fc=xb.length;0<fc;)xb[--fc].call(R,Xb);if(1<=Qb)return Wa.event&&Wa.event.end.call(R,R.__data__,ha),--Ra.count?delete Ra[za]:delete R[ta],1}var Ra=R[ta]||(R[ta]={active:0,count:0}),Wa=Ra[za],db,ob,xb;if(!Wa){var Cb=Aa.time;var Eb=Ba(Da,0,Cb);Wa=Ra[za]={tween:new n,time:Cb,timer:Eb,delay:Aa.delay,duration:Aa.duration,ease:Aa.ease,index:ha};Aa=null;++Ra.count}}function Qg(R,ha,ta){R.attr("transform",function(za){var Aa=ha(za);return"translate("+(isFinite(Aa)?Aa:ta(za))+",0)"})}function bf(R,
ha,ta){R.attr("transform",function(za){var Aa=ha(za);return"translate(0,"+(isFinite(Aa)?Aa:ta(za))+")"})}function Fg(R){return R.toISOString()}function jg(R,ha,ta){function za(Da){return R(Da)}function Aa(Da,Qa){var Ja=(Da[1]-Da[0])/Qa,Ra=Db.bisect(oh,Ja);return Ra==oh.length?[ha.year,ea(Da.map(function(Wa){return Wa/31536E6}),Qa)[2]]:Ra?ha[Ja/oh[Ra-1]<oh[Ra]/Ja?Ra-1:Ra]:[Gg,ea(Da,Qa)[2]]}za.invert=function(Da){return of(R.invert(Da))};za.domain=function(Da){if(!arguments.length)return R.domain().map(of);
R.domain(Da);return za};za.nice=function(Da,Qa){function Ja(db){return!isNaN(db)&&!Da.range(db,of(+db+1),Qa).length}var Ra=za.domain(),Wa=mf(Ra);if(Wa=null==Da?Aa(Wa,10):"number"===typeof Da&&Aa(Wa,Da))Da=Wa[0],Qa=Wa[1];return za.domain(mh(Ra,1<Qa?{floor:function(db){for(;Ja(db=Da.floor(db));)db=of(db-1);return db},ceil:function(db){for(;Ja(db=Da.ceil(db));)db=of(+db+1);return db}}:Da))};za.ticks=function(Da,Qa){var Ja=mf(za.domain()),Ra=null==Da?Aa(Ja,10):"number"===typeof Da?Aa(Ja,Da):!Da.range&&
[{range:Da},Qa];Ra&&(Da=Ra[0],Qa=Ra[1]);return Da.range(Ja[0],of(+Ja[1]+1),1>Qa?1:Qa)};za.tickFormat=function(){return ta};za.copy=function(){return jg(R.copy(),ha,ta)};return aa(za,R)}function of(R){return new Date(R)}function pj(R){return JSON.parse(R.responseText)}function Zh(R){var ha=Bf.createRange();ha.selectNode(Bf.body);return ha.createContextualFragment(R.responseText)}var Db={version:"3.5.17"},Ok=[].slice,Kg=function(R){return Ok.call(R)},Bf=this.document;if(Bf)try{Kg(Bf.documentElement.childNodes)[0].nodeType}catch(R){Kg=
function(ha){for(var ta=ha.length,za=Array(ta);ta--;)za[ta]=ha[ta];return za}}Date.now||(Date.now=function(){return+new Date});if(Bf)try{Bf.createElement("DIV").style.setProperty("opacity",0,"")}catch(R){var Yi=this.Element.prototype,Nf=Yi.setAttribute,$h=Yi.setAttributeNS,ai=this.CSSStyleDeclaration.prototype,Zi=ai.setProperty;Yi.setAttribute=function(ha,ta){Nf.call(this,ha,ta+"")};Yi.setAttributeNS=function(ha,ta,za){$h.call(this,ha,ta,za+"")};ai.setProperty=function(ha,ta,za){Zi.call(this,ha,ta+
"",za)}}Db.ascending=q;Db.descending=function(R,ha){return ha<R?-1:ha>R?1:ha>=R?0:NaN};Db.min=function(R,ha){var ta=-1,za=R.length,Aa;if(1===arguments.length){for(;++ta<za;)if(null!=(Aa=R[ta])&&Aa>=Aa){var Da=Aa;break}for(;++ta<za;)null!=(Aa=R[ta])&&Da>Aa&&(Da=Aa)}else{for(;++ta<za;)if(null!=(Aa=ha.call(R,R[ta],ta))&&Aa>=Aa){Da=Aa;break}for(;++ta<za;)null!=(Aa=ha.call(R,R[ta],ta))&&Da>Aa&&(Da=Aa)}return Da};Db.max=function(R,ha){var ta=-1,za=R.length,Aa;if(1===arguments.length){for(;++ta<za;)if(null!=
(Aa=R[ta])&&Aa>=Aa){var Da=Aa;break}for(;++ta<za;)null!=(Aa=R[ta])&&Aa>Da&&(Da=Aa)}else{for(;++ta<za;)if(null!=(Aa=ha.call(R,R[ta],ta))&&Aa>=Aa){Da=Aa;break}for(;++ta<za;)null!=(Aa=ha.call(R,R[ta],ta))&&Aa>Da&&(Da=Aa)}return Da};Db.extent=function(R,ha){var ta=-1,za=R.length,Aa,Da;if(1===arguments.length){for(;++ta<za;)if(null!=(Aa=R[ta])&&Aa>=Aa){var Qa=Da=Aa;break}for(;++ta<za;)null!=(Aa=R[ta])&&(Qa>Aa&&(Qa=Aa),Da<Aa&&(Da=Aa))}else{for(;++ta<za;)if(null!=(Aa=ha.call(R,R[ta],ta))&&Aa>=Aa){Qa=Da=
Aa;break}for(;++ta<za;)null!=(Aa=ha.call(R,R[ta],ta))&&(Qa>Aa&&(Qa=Aa),Da<Aa&&(Da=Aa))}return[Qa,Da]};Db.sum=function(R,ha){var ta=0,za=R.length,Aa,Da=-1;if(1===arguments.length)for(;++Da<za;)isNaN(Aa=+R[Da])||(ta+=Aa);else for(;++Da<za;)isNaN(Aa=+ha.call(R,R[Da],Da))||(ta+=Aa);return ta};Db.mean=function(R,ha){var ta=0,za=R.length,Aa,Da=-1,Qa=za;if(1===arguments.length)for(;++Da<za;)isNaN(Aa=m(R[Da]))?--Qa:ta+=Aa;else for(;++Da<za;)isNaN(Aa=m(ha.call(R,R[Da],Da)))?--Qa:ta+=Aa;if(Qa)return ta/Qa};
Db.quantile=function(R,ha){var ta=(R.length-1)*ha+1;ha=Math.floor(ta);var za=+R[ha-1];return(ta-=ha)?za+ta*(R[ha]-za):za};Db.median=function(R,ha){var ta=[],za=R.length,Aa,Da=-1;if(1===arguments.length)for(;++Da<za;)isNaN(Aa=m(R[Da]))||ta.push(Aa);else for(;++Da<za;)isNaN(Aa=m(ha.call(R,R[Da],Da)))||ta.push(Aa);if(ta.length)return Db.quantile(ta.sort(q),.5)};Db.variance=function(R,ha){var ta=R.length,za=0,Aa,Da=0,Qa=-1,Ja=0;if(1===arguments.length)for(;++Qa<ta;){if(!isNaN(Aa=m(R[Qa]))){var Ra=Aa-
za;za+=Ra/++Ja;Da+=Ra*(Aa-za)}}else for(;++Qa<ta;)isNaN(Aa=m(ha.call(R,R[Qa],Qa)))||(Ra=Aa-za,za+=Ra/++Ja,Da+=Ra*(Aa-za));if(1<Ja)return Da/(Ja-1)};Db.deviation=function(){var R=Db.variance.apply(this,arguments);return R?Math.sqrt(R):R};var Fi=a(q);Db.bisectLeft=Fi.left;Db.bisect=Db.bisectRight=Fi.right;Db.bisector=function(R){return a(1===R.length?function(ha,ta){return q(R(ha),ta)}:R)};Db.shuffle=function(R,ha,ta){3>(za=arguments.length)&&(ta=R.length,2>za&&(ha=0));for(var za=ta-ha,Aa,Da;za;)Da=
Math.random()*za--|0,Aa=R[za+ha],R[za+ha]=R[Da+ha],R[Da+ha]=Aa;return R};Db.permute=function(R,ha){for(var ta=ha.length,za=Array(ta);ta--;)za[ta]=R[ha[ta]];return za};Db.pairs=function(R){for(var ha=0,ta=R.length-1,za=R[0],Aa=Array(0>ta?0:ta);ha<ta;)Aa[ha]=[za,za=R[++ha]];return Aa};Db.transpose=function(R){if(!(Da=R.length))return[];for(var ha=-1,ta=Db.min(R,h),za=Array(ta);++ha<ta;)for(var Aa=-1,Da,Qa=za[ha]=Array(Da);++Aa<Da;)Qa[Aa]=R[Aa][ha];return za};Db.zip=function(){return Db.transpose(arguments)};
Db.keys=function(R){var ha=[],ta;for(ta in R)ha.push(ta);return ha};Db.values=function(R){var ha=[],ta;for(ta in R)ha.push(R[ta]);return ha};Db.entries=function(R){var ha=[],ta;for(ta in R)ha.push({key:ta,value:R[ta]});return ha};Db.merge=function(R){var ha=R.length;var ta=-1;for(var za=0,Aa,Da;++ta<ha;)za+=R[ta].length;for(Aa=Array(za);0<=--ha;)for(Da=R[ha],ta=Da.length;0<=--ta;)Aa[--za]=Da[ta];return Aa};var de=Math.abs;Db.range=function(R,ha,ta){3>arguments.length&&(ta=1,2>arguments.length&&(ha=
R,R=0));if(Infinity===(ha-R)/ta)throw Error("infinite range");var za=[];var Aa=de(ta);for(var Da=1;Aa*Da%1;)Da*=10;Aa=Da;Da=-1;var Qa;R*=Aa;ha*=Aa;ta*=Aa;if(0>ta)for(;(Qa=R+ta*++Da)>ha;)za.push(Qa/Aa);else for(;(Qa=R+ta*++Da)<ha;)za.push(Qa/Aa);return za};Db.map=function(R,ha){var ta=new n;if(R instanceof n)R.forEach(function(Qa,Ja){ta.set(Qa,Ja)});else if(Array.isArray(R)){var za=-1,Aa=R.length,Da;if(1===arguments.length)for(;++za<Aa;)ta.set(za,R[za]);else for(;++za<Aa;)ta.set(ha.call(R,Da=R[za],
za),Da)}else for(za in R)ta.set(za,R[za]);return ta};g(n,{has:e,get:function(R){return this._[p(R)]},set:function(R,ha){return this._[p(R)]=ha},remove:f,keys:k,values:function(){var R=[],ha;for(ha in this._)R.push(this._[ha]);return R},entries:function(){var R=[],ha;for(ha in this._)R.push({key:d(ha),value:this._[ha]});return R},size:t,empty:v,forEach:function(R){for(var ha in this._)R.call(this,d(ha),this._[ha])}});Db.nest=function(){function R(Ja,Ra,Wa){if(Wa>=za.length)return Qa?Qa.call(ta,Ra):
Da?Ra.sort(Da):Ra;for(var db=-1,ob=Ra.length,xb=za[Wa++],Cb,Eb,Qb=new n,Xb;++db<ob;)(Xb=Qb.get(Cb=xb(Eb=Ra[db])))?Xb.push(Eb):Qb.set(Cb,[Eb]);Ja?(Eb=Ja(),Ra=function(fc,uc){Eb.set(fc,R(Ja,uc,Wa))}):(Eb={},Ra=function(fc,uc){Eb[fc]=R(Ja,uc,Wa)});Qb.forEach(Ra);return Eb}function ha(Ja,Ra){if(Ra>=za.length)return Ja;var Wa=[],db=Aa[Ra++];Ja.forEach(function(ob,xb){Wa.push({key:ob,values:ha(xb,Ra)})});return db?Wa.sort(function(ob,xb){return db(ob.key,xb.key)}):Wa}var ta={},za=[],Aa=[],Da,Qa;ta.map=
function(Ja,Ra){return R(Ra,Ja,0)};ta.entries=function(Ja){return ha(R(Db.map,Ja,0),0)};ta.key=function(Ja){za.push(Ja);return ta};ta.sortKeys=function(Ja){Aa[za.length-1]=Ja;return ta};ta.sortValues=function(Ja){Da=Ja;return ta};ta.rollup=function(Ja){Qa=Ja;return ta};return ta};Db.set=function(R){var ha=new w;if(R)for(var ta=0,za=R.length;ta<za;++ta)ha.add(R[ta]);return ha};g(w,{has:e,add:function(R){this._[p(R+="")]=!0;return R},remove:f,values:k,size:t,empty:v,forEach:function(R){for(var ha in this._)R.call(this,
d(ha))}});Db.behavior={};Db.rebind=function(R,ha){for(var ta=1,za=arguments.length,Aa;++ta<za;)R[Aa=arguments[ta]]=B(R,ha,ha[Aa]);return R};var ii="webkit ms moz Moz o O".split(" ");Db.dispatch=function(){for(var R=new E,ha=-1,ta=arguments.length;++ha<ta;)R[arguments[ha]]=C(R);return R};E.prototype.on=function(R,ha){var ta=R.indexOf("."),za="";0<=ta&&(za=R.slice(ta+1),R=R.slice(0,ta));if(R)return 2>arguments.length?this[R].on(za):this[R].on(za,ha);if(2===arguments.length){if(null==ha)for(R in this)if(this.hasOwnProperty(R))this[R].on(za,
null);return this}};Db.event=null;Db.requote=function(R){return R.replace(ph,"\\$\x26")};var ph=/[\\\^\$\*\+\?\|\[\]\(\)\.\{\}]/g,Wg={}.__proto__?function(R,ha){R.__proto__=ha}:function(R,ha){for(var ta in ha)R[ta]=ha[ta]},pk=function(R,ha){return ha.querySelector(R)},qk=function(R,ha){return ha.querySelectorAll(R)},Yj=function(R,ha){var ta=R.matches||R[A(R,"matchesSelector")];Yj=function(za,Aa){return ta.call(za,Aa)};return Yj(R,ha)};"function"===typeof Sizzle&&(pk=function(R,ha){return Sizzle(R,
ha)[0]||null},qk=Sizzle,Yj=Sizzle.matchesSelector);Db.selection=function(){return Db.select(Bf.documentElement)};var Pe=Db.selection.prototype=[];Pe.select=function(R){var ha=[],ta,za,Aa,Da;R=L(R);for(var Qa=-1,Ja=this.length;++Qa<Ja;){ha.push(ta=[]);ta.parentNode=(Aa=this[Qa]).parentNode;for(var Ra=-1,Wa=Aa.length;++Ra<Wa;)(Da=Aa[Ra])?(ta.push(za=R.call(Da,Da.__data__,Ra,Qa)),za&&"__data__"in Da&&(za.__data__=Da.__data__)):ta.push(null)}return J(ha)};Pe.selectAll=function(R){var ha=[],ta,za;R=K(R);
for(var Aa=-1,Da=this.length;++Aa<Da;)for(var Qa=this[Aa],Ja=-1,Ra=Qa.length;++Ja<Ra;)if(za=Qa[Ja])ha.push(ta=Kg(R.call(za,za.__data__,Ja,Aa))),ta.parentNode=za;return J(ha)};var xk={svg:"http://www.w3.org/2000/svg",xhtml:"http://www.w3.org/1999/xhtml",xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/"};Db.ns={prefix:xk,qualify:function(R){var ha=R.indexOf(":"),ta=R;0<=ha&&"xmlns"!==(ta=R.slice(0,ha))&&(R=R.slice(ha+1));return xk.hasOwnProperty(ta)?
{space:xk[ta],local:R}:R}};Pe.attr=function(R,ha){if(2>arguments.length){if("string"===typeof R){var ta=this.node();R=Db.ns.qualify(R);return R.local?ta.getAttributeNS(R.space,R.local):ta.getAttribute(R)}for(ha in R)this.each(H(ha,R[ha]));return this}return this.each(H(R,ha))};Pe.classed=function(R,ha){if(2>arguments.length){if("string"===typeof R){var ta=this.node(),za=(R=(R+"").trim().split(/^|\s+/)).length,Aa=-1;if(ha=ta.classList)for(;++Aa<za;){if(!ha.contains(R[Aa]))return!1}else for(ha=ta.getAttribute("class");++Aa<
za;)if(!Q(R[Aa]).test(ha))return!1;return!0}for(ha in R)this.each(M(ha,R[ha]));return this}return this.each(M(R,ha))};Pe.style=function(R,ha,ta){var za=arguments.length;if(3>za){if("string"!==typeof R){2>za&&(ha="");for(ta in R)this.each(T(ta,R[ta],ha));return this}if(2>za)return za=this.node(),r(za).getComputedStyle(za,null).getPropertyValue(R);ta=""}return this.each(T(R,ha,ta))};Pe.property=function(R,ha){if(2>arguments.length){if("string"===typeof R)return this.node()[R];for(ha in R)this.each(O(ha,
R[ha]));return this}return this.each(O(R,ha))};Pe.text=function(R){return arguments.length?this.each("function"===typeof R?function(){var ha=R.apply(this,arguments);this.textContent=null==ha?"":ha}:null==R?function(){this.textContent=""}:function(){this.textContent=R}):this.node().textContent};Pe.html=function(R){return arguments.length?this.each("function"===typeof R?function(){var ha=R.apply(this,arguments);this.innerHTML=null==ha?"":ha}:null==R?function(){this.innerHTML=""}:function(){this.innerHTML=
R}):this.node().innerHTML};Pe.append=function(R){R=U(R);return this.select(function(){return this.appendChild(R.apply(this,arguments))})};Pe.insert=function(R,ha){R=U(R);ha=L(ha);return this.select(function(){return this.insertBefore(R.apply(this,arguments),ha.apply(this,arguments)||null)})};Pe.remove=function(){return this.each(S)};Pe.data=function(R,ha){function ta(db,ob){var xb,Cb=db.length,Eb=ob.length,Qb=Math.min(Cb,Eb),Xb=Array(Eb),fc=Array(Eb),uc=Array(Cb),zc,Ec;if(ha){Qb=new n;var Qc=Array(Cb),
Nb;for(xb=-1;++xb<Cb;)if(zc=db[xb])Qb.has(Nb=ha.call(zc,zc.__data__,xb))?uc[xb]=zc:Qb.set(Nb,zc),Qc[xb]=Nb;for(xb=-1;++xb<Eb;)(zc=Qb.get(Nb=ha.call(ob,Ec=ob[xb],xb)))?!0!==zc&&(Xb[xb]=zc,zc.__data__=Ec):fc[xb]={__data__:Ec},Qb.set(Nb,!0);for(xb=-1;++xb<Cb;)xb in Qc&&!0!==Qb.get(Qc[xb])&&(uc[xb]=db[xb])}else{for(xb=-1;++xb<Qb;)zc=db[xb],Ec=ob[xb],zc?(zc.__data__=Ec,Xb[xb]=zc):fc[xb]={__data__:Ec};for(;xb<Eb;++xb)fc[xb]={__data__:ob[xb]};for(;xb<Cb;++xb)uc[xb]=db[xb]}fc.update=Xb;fc.parentNode=Xb.parentNode=
uc.parentNode=db.parentNode;Ja.push(fc);Ra.push(Xb);Wa.push(uc)}var za=-1,Aa=this.length,Da,Qa;if(!arguments.length){for(R=Array(Aa=(Da=this[0]).length);++za<Aa;)if(Qa=Da[za])R[za]=Qa.__data__;return R}var Ja=ia([]),Ra=J([]),Wa=J([]);if("function"===typeof R)for(;++za<Aa;)ta(Da=this[za],R.call(Da,Da.parentNode.__data__,za));else for(;++za<Aa;)ta(Da=this[za],R);Ra.enter=function(){return Ja};Ra.exit=function(){return Wa};return Ra};Pe.datum=function(R){return arguments.length?this.property("__data__",
R):this.property("__data__")};Pe.filter=function(R){var ha=[],ta,za,Aa;"function"!==typeof R&&(R=X(R));for(var Da=0,Qa=this.length;Da<Qa;Da++){ha.push(ta=[]);ta.parentNode=(za=this[Da]).parentNode;for(var Ja=0,Ra=za.length;Ja<Ra;Ja++)(Aa=za[Ja])&&R.call(Aa,Aa.__data__,Ja,Da)&&ta.push(Aa)}return J(ha)};Pe.order=function(){for(var R=-1,ha=this.length;++R<ha;)for(var ta=this[R],za=ta.length-1,Aa=ta[za],Da;0<=--za;)if(Da=ta[za])Aa&&Aa!==Da.nextSibling&&Aa.parentNode.insertBefore(Da,Aa),Aa=Da;return this};
Pe.sort=function(R){R=ba.apply(this,arguments);for(var ha=-1,ta=this.length;++ha<ta;)this[ha].sort(R);return this.order()};Pe.each=function(R){return ca(this,function(ha,ta,za){R.call(ha,ha.__data__,ta,za)})};Pe.call=function(R){var ha=Kg(arguments);R.apply(ha[0]=this,ha);return this};Pe.empty=function(){return!this.node()};Pe.node=function(){for(var R=0,ha=this.length;R<ha;R++)for(var ta=this[R],za=0,Aa=ta.length;za<Aa;za++){var Da=ta[za];if(Da)return Da}return null};Pe.size=function(){var R=0;ca(this,
function(){++R});return R};var Xg=[];Db.selection.enter=ia;Db.selection.enter.prototype=Xg;Xg.append=Pe.append;Xg.empty=Pe.empty;Xg.node=Pe.node;Xg.call=Pe.call;Xg.size=Pe.size;Xg.select=function(R){for(var ha=[],ta,za,Aa,Da,Qa,Ja=-1,Ra=this.length;++Ja<Ra;){Aa=(Da=this[Ja]).update;ha.push(ta=[]);ta.parentNode=Da.parentNode;for(var Wa=-1,db=Da.length;++Wa<db;)(Qa=Da[Wa])?(ta.push(Aa[Wa]=za=R.call(Da.parentNode,Qa.__data__,Wa,Ja)),za.__data__=Qa.__data__):ta.push(null)}return J(ha)};Xg.insert=function(R,
ha){2>arguments.length&&(ha=ja(this));return Pe.insert.call(this,R,ha)};Db.select=function(R){if("string"===typeof R){var ha=[pk(R,Bf)];ha.parentNode=Bf.documentElement}else ha=[R],ha.parentNode=R&&(R.ownerDocument||R.document||R).documentElement;return J([ha])};Db.selectAll=function(R){"string"===typeof R?(R=Kg(qk(R,Bf)),R.parentNode=Bf.documentElement):(R=Kg(R),R.parentNode=null);return J([R])};Pe.on=function(R,ha,ta){var za=arguments.length;if(3>za){if("string"!==typeof R){2>za&&(ha=!1);for(ta in R)this.each(la(ta,
R[ta],ha));return this}if(2>za)return(za=this.node()["__on"+R])&&za._;ta=!1}return this.each(la(R,ha,ta))};var Hh=Db.map({mouseenter:"mouseover",mouseleave:"mouseout"});Bf&&Hh.forEach(function(R){"on"+R in Bf&&Hh.remove(R)});var $f,ji=0;Db.mouse=function(R){return ma(R,D())};var ki=this.navigator&&/WebKit/.test(this.navigator.userAgent)?-1:0;Db.touch=function(R,ha,ta){3>arguments.length&&(ta=ha,ha=D().changedTouches);if(ha)for(var za=0,Aa=ha.length,Da;za<Aa;++za)if((Da=ha[za]).identifier===ta)return ma(R,
Da)};Db.behavior.drag=function(){function R(){this.on("mousedown.drag",Aa).on("touchstart.drag",Da)}function ha(Qa,Ja,Ra,Wa,db){return function(){var ob=Db.event.target.correspondingElement||Db.event.target,xb=this.parentNode,Cb=ta.of(this,arguments),Eb=0,Qb=Qa(),Xb=".drag"+(null==Qb?"":"-"+Qb),fc=Db.select(Ra(ob)).on(Wa+Xb,function(){var Qc=Ja(xb,Qb);if(Qc){var Nb=Qc[0]-zc[0];var Zb=Qc[1]-zc[1];Eb|=Nb|Zb;zc=Qc;Cb({type:"drag",x:Qc[0]+Ec[0],y:Qc[1]+Ec[1],dx:Nb,dy:Zb})}}).on(db+Xb,function(){Ja(xb,
Qb)&&(fc.on(Wa+Xb,null).on(db+Xb,null),uc(Eb),Cb({type:"dragend"}))}),uc=sa(ob),zc=Ja(xb,Qb);if(za){var Ec=za.apply(this,arguments);Ec=[Ec.x-zc[0],Ec.y-zc[1]]}else Ec=[0,0];Cb({type:"dragstart"})}}var ta=G(R,"drag","dragstart","dragend"),za=null,Aa=ha(z,Db.mouse,r,"mousemove","mouseup"),Da=ha(qa,Db.touch,y,"touchmove","touchend");R.origin=function(Qa){if(!arguments.length)return za;za=Qa;return R};return Db.rebind(R,ta,"on")};Db.touches=function(R,ha){2>arguments.length&&(ha=D().touches);return ha?
Kg(ha).map(function(ta){var za=ma(R,ta);za.identifier=ta.identifier;return za}):[]};var Yd=Math.PI,lf=2*Yd,qh=lf-1E-6,Ze=Yd/2,je=Yd/180,We=180/Yd,Gi=Math.SQRT2;Db.interpolateZoom=function(R,ha){var ta=R[0],za=R[1],Aa=R[2];R=ha[2];var Da=ha[0]-ta,Qa=ha[1]-za,Ja=Da*Da+Qa*Qa;if(1E-12>Ja){var Ra=Math.log(R/Aa)/Gi;R=function(ob){return[ta+ob*Da,za+ob*Qa,Aa*Math.exp(Gi*ob*Ra)]}}else{var Wa=Math.sqrt(Ja);ha=(R*R-Aa*Aa+4*Ja)/(4*Aa*Wa);R=(R*R-Aa*Aa-4*Ja)/(4*R*Wa);var db=Math.log(Math.sqrt(ha*ha+1)-ha);Ra=
(Math.log(Math.sqrt(R*R+1)-R)-db)/Gi;R=function(ob){ob*=Ra;var xb=ua(db),Cb=Gi*ob+db;var Eb=((Cb=Math.exp(2*Cb))-1)/(Cb+1);var Qb=db;Cb=((Qb=Math.exp(Qb))-1/Qb)/2;Eb=Aa/(2*Wa)*(xb*Eb-Cb);return[ta+Eb*Da,za+Eb*Qa,Aa*xb/ua(Gi*ob+db)]}}R.duration=1E3*Ra;return R};Db.behavior.zoom=function(){function R(Oc){Oc.on("mousedown.zoom",Wa).on(gk+".zoom",ob).on("dblclick.zoom",xb).on("touchstart.zoom",db)}function ha(Oc){return[(Oc[0]-Cb.x)/Cb.k,(Oc[1]-Cb.y)/Cb.k]}function ta(Oc){Cb.k=Math.max(uc[0],Math.min(uc[1],
Oc))}function za(Oc,Ed){Ed=[Ed[0]*Cb.k+Cb.x,Ed[1]*Cb.k+Cb.y];Cb.x+=Oc[0]-Ed[0];Cb.y+=Oc[1]-Ed[1]}function Aa(Oc,Ed,Nd,$d){Oc.__chart__={x:Cb.x,y:Cb.y,k:Cb.k};ta(Math.pow(2,$d));za(Qb=Ed,Nd);Oc=Db.select(Oc);0<zc&&(Oc=Oc.transition().duration(zc));Oc.call(R.event)}function Da(){Xc&&Xc.domain(wc.range().map(function(Oc){return(Oc-Cb.x)/Cb.k}).map(wc.invert));cd&&cd.domain(Zc.range().map(function(Oc){return(Oc-Cb.y)/Cb.k}).map(Zc.invert))}function Qa(Oc){Ec++||Oc({type:"zoomstart"})}function Ja(Oc){Da();
Oc({type:"zoom",scale:Cb.k,translate:[Cb.x,Cb.y]})}function Ra(Oc){--Ec||(Oc({type:"zoomend"}),Qb=null)}function Wa(){var Oc=this,Ed=Zb.of(Oc,arguments),Nd=0,$d=Db.select(r(Oc)).on("mousemove.zoom",function(){Nd=1;za(Db.mouse(Oc),me);Ja(Ed)}).on("mouseup.zoom",function(){$d.on("mousemove.zoom",null).on("mouseup.zoom",null);ke(Nd);Ra(Ed)}),me=ha(Db.mouse(Oc)),ke=sa(Oc);Cf.call(Oc);Qa(Ed)}function db(){function Oc(){var Ye=Db.touches(me);Ff=Cb.k;Ye.forEach(function(Ke){Ke.identifier in te&&(te[Ke.identifier]=
ha(Ke))});return Ye}function Ed(){var Ye=Db.event.target;Db.select(Ye).on(ne,Nd).on(Pf,$d);De.push(Ye);Ye=Db.event.changedTouches;for(var Ke=0,kg=Ye.length;Ke<kg;++Ke)te[Ye[Ke].identifier]=null;Ke=Oc();kg=Date.now();1===Ke.length?(500>kg-Nb&&(Ye=Ke[0],Aa(me,Ye,te[Ye.identifier],Math.floor(Math.log(Cb.k)/Math.LN2)+1),u()),Nb=kg):1<Ke.length&&(Ye=Ke[0],kg=Ke[1],Ke=Ye[0]-kg[0],Ye=Ye[1]-kg[1],Sd=Ke*Ke+Ye*Ye)}function Nd(){var Ye=Db.touches(me),Ke;Cf.call(me);for(var kg=0,Qj=Ye.length;kg<Qj;++kg,Ke=null){var Bh=
Ye[kg];if(Ke=te[Bh.identifier]){if($i)break;var bi=Bh;var $i=Ke}}if(Ke){var Hi=(Hi=Bh[0]-bi[0])*Hi+(Hi=Bh[1]-bi[1])*Hi;Ye=Sd&&Math.sqrt(Hi/Sd);bi=[(bi[0]+Bh[0])/2,(bi[1]+Bh[1])/2];$i=[($i[0]+Ke[0])/2,($i[1]+Ke[1])/2];ta(Ye*Ff)}Nb=null;za(bi,$i);Ja(ke)}function $d(){if(Db.event.touches.length){for(var Ye=Db.event.changedTouches,Ke=0,kg=Ye.length;Ke<kg;++Ke)delete te[Ye[Ke].identifier];for(var Qj in te)return void Oc()}Db.selectAll(De).on(gf,null);xf.on("mousedown.zoom",Wa).on("touchstart.zoom",db);
yf();Ra(ke)}var me=this,ke=Zb.of(me,arguments),te={},Sd=0,Ff,gf=".zoom-"+Db.event.changedTouches[0].identifier,ne="touchmove"+gf,Pf="touchend"+gf,De=[],xf=Db.select(me),yf=sa(me);Ed();Qa(ke);xf.on("mousedown.zoom",null).on("touchstart.zoom",Ed)}function ob(){var Oc=Zb.of(this,arguments);Qc?clearTimeout(Qc):(Cf.call(this),Eb=ha(Qb=Xb||Db.mouse(this)),Qa(Oc));Qc=setTimeout(function(){Qc=null;Ra(Oc)},50);u();ta(Math.pow(2,.002*yk())*Cb.k);za(Qb,Eb);Ja(Oc)}function xb(){var Oc=Db.mouse(this),Ed=Math.log(Cb.k)/
Math.LN2;Aa(this,Oc,ha(Oc),Db.event.shiftKey?Math.ceil(Ed)-1:Math.floor(Ed)+1)}var Cb={x:0,y:0,k:1},Eb,Qb,Xb,fc=[960,500],uc=zk,zc=250,Ec=0,Qc,Nb,Zb=G(R,"zoomstart","zoom","zoomend"),wc,Xc,Zc,cd;gk||(gk="onwheel"in Bf?(yk=function(){return-Db.event.deltaY*(Db.event.deltaMode?120:1)},"wheel"):"onmousewheel"in Bf?(yk=function(){return Db.event.wheelDelta},"mousewheel"):(yk=function(){return-Db.event.detail},"MozMousePixelScroll"));R.event=function(Oc){Oc.each(function(){var Ed=Zb.of(this,arguments),
Nd=Cb;Wf?Db.select(this).transition().each("start.zoom",function(){Cb=this.__chart__||{x:0,y:0,k:1};Qa(Ed)}).tween("zoom:zoom",function(){var $d=fc[0],me=fc[1],ke=Qb?Qb[0]:$d/2,te=Qb?Qb[1]:me/2,Sd=Db.interpolateZoom([(ke-Cb.x)/Cb.k,(te-Cb.y)/Cb.k,$d/Cb.k],[(ke-Nd.x)/Nd.k,(te-Nd.y)/Nd.k,$d/Nd.k]);return function(Ff){Ff=Sd(Ff);var gf=$d/Ff[2];this.__chart__=Cb={x:ke-Ff[0]*gf,y:te-Ff[1]*gf,k:gf};Ja(Ed)}}).each("interrupt.zoom",function(){Ra(Ed)}).each("end.zoom",function(){Ra(Ed)}):(this.__chart__=Cb,
Qa(Ed),Ja(Ed),Ra(Ed))})};R.translate=function(Oc){if(!arguments.length)return[Cb.x,Cb.y];Cb={x:+Oc[0],y:+Oc[1],k:Cb.k};Da();return R};R.scale=function(Oc){if(!arguments.length)return Cb.k;Cb={x:Cb.x,y:Cb.y,k:null};ta(+Oc);Da();return R};R.scaleExtent=function(Oc){if(!arguments.length)return uc;uc=null==Oc?zk:[+Oc[0],+Oc[1]];return R};R.center=function(Oc){if(!arguments.length)return Xb;Xb=Oc&&[+Oc[0],+Oc[1]];return R};R.size=function(Oc){if(!arguments.length)return fc;fc=Oc&&[+Oc[0],+Oc[1]];return R};
R.duration=function(Oc){if(!arguments.length)return zc;zc=+Oc;return R};R.x=function(Oc){if(!arguments.length)return Xc;Xc=Oc;wc=Oc.copy();Cb={x:0,y:0,k:1};return R};R.y=function(Oc){if(!arguments.length)return cd;cd=Oc;Zc=Oc.copy();Cb={x:0,y:0,k:1};return R};return Db.rebind(R,Zb,"on")};var zk=[0,Infinity],yk,gk;Db.color=Ca;Ca.prototype.toString=function(){return this.rgb()+""};Db.hsl=Ma;var qj=Ma.prototype=new Ca;qj.brighter=function(R){R=Math.pow(.7,arguments.length?R:1);return new Ma(this.h,this.s,
this.l/R)};qj.darker=function(R){R=Math.pow(.7,arguments.length?R:1);return new Ma(this.h,this.s,R*this.l)};qj.rgb=function(){return Ua(this.h,this.s,this.l)};Db.hcl=eb;var Ii=eb.prototype=new Ca;Ii.brighter=function(R){return new eb(this.h,this.c,Math.min(100,this.l+rj*(arguments.length?R:1)))};Ii.darker=function(R){return new eb(this.h,this.c,Math.max(0,this.l-rj*(arguments.length?R:1)))};Ii.rgb=function(){return fb(this.h,this.c,this.l).rgb()};Db.lab=nb;var rj=18,Zj=.95047,Gd=1,rk=1.08883,Xf=nb.prototype=
new Ca;Xf.brighter=function(R){return new nb(Math.min(100,this.l+rj*(arguments.length?R:1)),this.a,this.b)};Xf.darker=function(R){return new nb(Math.max(0,this.l-rj*(arguments.length?R:1)),this.a,this.b)};Xf.rgb=function(){return cb(this.l,this.a,this.b)};Db.rgb=Ea;var Rg=Ea.prototype=new Ca;Rg.brighter=function(R){R=Math.pow(.7,arguments.length?R:1);var ha=this.r,ta=this.g,za=this.b;if(!ha&&!ta&&!za)return new Ea(30,30,30);ha&&30>ha&&(ha=30);ta&&30>ta&&(ta=30);za&&30>za&&(za=30);return new Ea(Math.min(255,
ha/R),Math.min(255,ta/R),Math.min(255,za/R))};Rg.darker=function(R){R=Math.pow(.7,arguments.length?R:1);return new Ea(R*this.r,R*this.g,R*this.b)};Rg.hsl=function(){return Xa(this.r,this.g,this.b)};Rg.toString=function(){return"#"+Oa(this.r)+Oa(this.g)+Oa(this.b)};var li=Db.map({aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,
chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,
deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,
lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,
mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,
saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074});li.forEach(function(R,ha){li.set(R,new Ea(ha>>16,ha>>8&255,ha&255))});Db.functor=
Na;Db.xhr=ib(y);Db.dsv=function(R,ha){function ta(Wa,db,ob){3>arguments.length&&(ob=db,db=null);var xb=qb(Wa,ha,null==db?za:Aa(db),ob);xb.row=function(Cb){return arguments.length?xb.response(null==(db=Cb)?za:Aa(Cb)):db};return xb}function za(Wa){return ta.parse(Wa.responseText)}function Aa(Wa){return function(db){return ta.parse(db.responseText,Wa)}}function Da(Wa){return Wa.map(Qa).join(R)}function Qa(Wa){return Ja.test(Wa)?'"'+Wa.replace(/"/g,'""')+'"':Wa}var Ja=new RegExp('["'+R+"\n]"),Ra=R.charCodeAt(0);
ta.parse=function(Wa,db){var ob;return ta.parseRows(Wa,function(xb,Cb){if(ob)return ob(xb,Cb-1);var Eb=new Function("d","return {"+xb.map(function(Qb,Xb){return JSON.stringify(Qb)+": d["+Xb+"]"}).join(",")+"}");ob=db?function(Qb,Xb){return db(Eb(Qb),Xb)}:Eb})};ta.parseRows=function(Wa,db){function ob(){if(Xb>=Qb)return Cb;if(zc)return zc=!1,xb;var Qc=Xb;if(34===Wa.charCodeAt(Qc)){for(var Nb=Qc;Nb++<Qb;)if(34===Wa.charCodeAt(Nb)){if(34!==Wa.charCodeAt(Nb+1))break;++Nb}Xb=Nb+2;var Zb=Wa.charCodeAt(Nb+
1);13===Zb?(zc=!0,10===Wa.charCodeAt(Nb+2)&&++Xb):10===Zb&&(zc=!0);return Wa.slice(Qc+1,Nb).replace(/""/g,'"')}for(;Xb<Qb;){Zb=Wa.charCodeAt(Xb++);Nb=1;if(10===Zb)zc=!0;else if(13===Zb)zc=!0,10===Wa.charCodeAt(Xb)&&(++Xb,++Nb);else if(Zb!==Ra)continue;return Wa.slice(Qc,Xb-Nb)}return Wa.slice(Qc)}for(var xb={},Cb={},Eb=[],Qb=Wa.length,Xb=0,fc=0,uc,zc;(uc=ob())!==Cb;){for(var Ec=[];uc!==xb&&uc!==Cb;)Ec.push(uc),uc=ob();db&&null==(Ec=db(Ec,fc++))||Eb.push(Ec)}return Eb};ta.format=function(Wa){if(Array.isArray(Wa[0]))return ta.formatRows(Wa);
var db=new w,ob=[];Wa.forEach(function(xb){for(var Cb in xb)db.has(Cb)||ob.push(db.add(Cb))});return[ob.map(Qa).join(R)].concat(Wa.map(function(xb){return ob.map(function(Cb){return Qa(xb[Cb])}).join(R)})).join("\n")};ta.formatRows=function(Wa){return Wa.map(Da).join("\n")};return ta};Db.csv=Db.dsv(",","text/csv");Db.tsv=Db.dsv("\t","text/tab-separated-values");var Dj,ak,ag,Xe,mi=this[A(this,"requestAnimationFrame")]||function(R){setTimeout(R,17)};Db.timer=function(){Ba.apply(this,arguments)};Db.timer.flush=
function(){La();Va()};Db.round=function(R,ha){return ha?Math.round(R*(ha=Math.pow(10,ha)))/ha:Math.round(R)};var sj="y z a f p n  m  k M G T P E Z Y".split(" ").map(function(R,ha){var ta=Math.pow(10,3*de(8-ha));return{scale:8<ha?function(za){return za/ta}:function(za){return za*ta},symbol:R}});Db.formatPrefix=function(R,ha){var ta=0;if(R=+R)0>R&&(R*=-1),ha&&(R=Db.round(R,Za(R,ha))),ta=1+Math.floor(1E-12+Math.log(R)/Math.LN10),ta=Math.max(-24,Math.min(24,3*Math.floor((ta-1)/3)));return sj[8+ta/3]};
var fh=/(?:([^{])?([<>=^]))?([+\- ])?([$#])?(0)?(\d+)?(,)?(\.-?\d+)?([a-z%])?/i,bk=Db.map({b:function(R){return R.toString(2)},c:function(R){return String.fromCharCode(R)},o:function(R){return R.toString(8)},x:function(R){return R.toString(16)},X:function(R){return R.toString(16).toUpperCase()},g:function(R,ha){return R.toPrecision(ha)},e:function(R,ha){return R.toExponential(ha)},f:function(R,ha){return R.toFixed(ha)},r:function(R,ha){return(R=Db.round(R,Za(R,ha))).toFixed(Math.max(0,Math.min(20,
Za(R*(1+1E-15),ha))))}}),Hd=Db.time={},Ef=Date;Pb.prototype={getDate:function(){return this._.getUTCDate()},getDay:function(){return this._.getUTCDay()},getFullYear:function(){return this._.getUTCFullYear()},getHours:function(){return this._.getUTCHours()},getMilliseconds:function(){return this._.getUTCMilliseconds()},getMinutes:function(){return this._.getUTCMinutes()},getMonth:function(){return this._.getUTCMonth()},getSeconds:function(){return this._.getUTCSeconds()},getTime:function(){return this._.getTime()},
getTimezoneOffset:function(){return 0},valueOf:function(){return this._.valueOf()},setDate:function(){vf.setUTCDate.apply(this._,arguments)},setDay:function(){vf.setUTCDay.apply(this._,arguments)},setFullYear:function(){vf.setUTCFullYear.apply(this._,arguments)},setHours:function(){vf.setUTCHours.apply(this._,arguments)},setMilliseconds:function(){vf.setUTCMilliseconds.apply(this._,arguments)},setMinutes:function(){vf.setUTCMinutes.apply(this._,arguments)},setMonth:function(){vf.setUTCMonth.apply(this._,
arguments)},setSeconds:function(){vf.setUTCSeconds.apply(this._,arguments)},setTime:function(){vf.setTime.apply(this._,arguments)}};var vf=Date.prototype;Hd.year=Kb(function(R){R=Hd.day(R);R.setMonth(0,1);return R},function(R,ha){R.setFullYear(R.getFullYear()+ha)},function(R){return R.getFullYear()});Hd.years=Hd.year.range;Hd.years.utc=Hd.year.utc.range;Hd.day=Kb(function(R){var ha=new Ef(2E3,0);ha.setFullYear(R.getFullYear(),R.getMonth(),R.getDate());return ha},function(R,ha){R.setDate(R.getDate()+
ha)},function(R){return R.getDate()-1});Hd.days=Hd.day.range;Hd.days.utc=Hd.day.utc.range;Hd.dayOfYear=function(R){var ha=Hd.year(R);return Math.floor((R-ha-6E4*(R.getTimezoneOffset()-ha.getTimezoneOffset()))/864E5)};"sunday monday tuesday wednesday thursday friday saturday".split(" ").forEach(function(R,ha){ha=7-ha;var ta=Hd[R]=Kb(function(za){(za=Hd.day(za)).setDate(za.getDate()-(za.getDay()+ha)%7);return za},function(za,Aa){za.setDate(za.getDate()+7*Math.floor(Aa))},function(za){var Aa=Hd.year(za).getDay();
return Math.floor((Hd.dayOfYear(za)+(Aa+ha)%7)/7)-(Aa!==ha)});Hd[R+"s"]=ta.range;Hd[R+"s"].utc=ta.utc.range;Hd[R+"OfYear"]=function(za){var Aa=Hd.year(za).getDay();return Math.floor((Hd.dayOfYear(za)+(Aa+ha)%7)/7)}});Hd.week=Hd.sunday;Hd.weeks=Hd.sunday.range;Hd.weeks.utc=Hd.sunday.utc.range;Hd.weekOfYear=Hd.sundayOfYear;var Yg={"-":"",_:" ",0:"0"},Cd=/^\s*\d+/,ee=/^%/;Db.locale=function(R){return{numberFormat:mb(R),timeFormat:Wb(R)}};var rh=Db.locale({decimal:".",thousands:",",grouping:[3],currency:["$",
""],dateTime:"%a %b %e %X %Y",date:"%m/%d/%Y",time:"%H:%M:%S",periods:["AM","PM"],days:"Sunday Monday Tuesday Wednesday Thursday Friday Saturday".split(" "),shortDays:"Sun Mon Tue Wed Thu Fri Sat".split(" "),months:"January February March April May June July August September October November December".split(" "),shortMonths:"Jan Feb Mar Apr May Jun Jul Aug Sep Oct Nov Dec".split(" ")});Db.format=rh.numberFormat;Db.geo={};Bb.prototype={s:0,t:0,add:function(R){Mb(R,this.t,Ch);Mb(Ch.s,this.s,this);this.s?
this.t+=Ch.t:this.s=Ch.t},reset:function(){this.s=this.t=0},valueOf:function(){return this.s}};var Ch=new Bb;Db.geo.stream=function(R,ha){if(R&&Ji.hasOwnProperty(R.type))Ji[R.type](R,ha);else Yb(R,ha)};var Ji={Feature:function(R,ha){Yb(R.geometry,ha)},FeatureCollection:function(R,ha){R=R.features;for(var ta=-1,za=R.length;++ta<za;)Yb(R[ta].geometry,ha)}},wg={Sphere:function(R,ha){ha.sphere()},Point:function(R,ha){R=R.coordinates;ha.point(R[0],R[1],R[2])},MultiPoint:function(R,ha){for(var ta=R.coordinates,
za=-1,Aa=ta.length;++za<Aa;)R=ta[za],ha.point(R[0],R[1],R[2])},LineString:function(R,ha){qc(R.coordinates,ha,0)},MultiLineString:function(R,ha){R=R.coordinates;for(var ta=-1,za=R.length;++ta<za;)qc(R[ta],ha,0)},Polygon:function(R,ha){Tc(R.coordinates,ha)},MultiPolygon:function(R,ha){R=R.coordinates;for(var ta=-1,za=R.length;++ta<za;)Tc(R[ta],ha)},GeometryCollection:function(R,ha){R=R.geometries;for(var ta=-1,za=R.length;++ta<za;)Yb(R[ta],ha)}};Db.geo.area=function(R){ch=0;Db.geo.stream(R,Uf);return ch};
var ch,hj=new Bb,Uf={sphere:function(){ch+=4*Yd},point:z,lineStart:z,lineEnd:z,polygonStart:function(){hj.reset();Uf.lineStart=Yc},polygonEnd:function(){var R=2*hj;ch+=0>R?4*Yd+R:R;Uf.lineStart=Uf.lineEnd=Uf.point=z}};Db.geo.bounds=function(){function R(Nb,Zb){zc.push(Ec=[db=Nb,xb=Nb]);Zb<ob&&(ob=Zb);Zb>Cb&&(Cb=Zb)}function ha(Nb,Zb){var wc=ad([Nb*je,Zb*je]);if(fc){var Xc=Fc(fc,wc);Xc=Fc([Xc[1],-Xc[0],0],Xc);Jc(Xc);Xc=gd(Xc);var Zc=Nb-Eb,cd=0<Zc?1:-1,Oc=Xc[0]*We*cd;Zc=180<de(Zc);Zc^(cd*Eb<Oc&&Oc<
cd*Nb)?(Zb=Xc[1]*We,Zb>Cb&&(Cb=Zb)):(Oc=(Oc+360)%360-180,Zc^(cd*Eb<Oc&&Oc<cd*Nb))?(Zb=-Xc[1]*We,Zb<ob&&(ob=Zb)):(Zb<ob&&(ob=Zb),Zb>Cb&&(Cb=Zb));Zc?Nb<Eb?Ja(db,Nb)>Ja(db,xb)&&(xb=Nb):Ja(Nb,xb)>Ja(db,xb)&&(db=Nb):xb>=db?(Nb<db&&(db=Nb),Nb>xb&&(xb=Nb)):Nb>Eb?Ja(db,Nb)>Ja(db,xb)&&(xb=Nb):Ja(Nb,xb)>Ja(db,xb)&&(db=Nb)}else R(Nb,Zb);fc=wc;Eb=Nb}function ta(){Qc.point=ha}function za(){Ec[0]=db;Ec[1]=xb;Qc.point=R;fc=null}function Aa(Nb,Zb){if(fc){var wc=Nb-Eb;uc+=180<de(wc)?wc+(0<wc?360:-360):wc}else Qb=
Nb,Xb=Zb;Uf.point(Nb,Zb);ha(Nb,Zb)}function Da(){Uf.lineStart()}function Qa(){Aa(Qb,Xb);Uf.lineEnd();1E-6<de(uc)&&(db=-(xb=180));Ec[0]=db;Ec[1]=xb;fc=null}function Ja(Nb,Zb){return 0>(Zb-=Nb)?Zb+360:Zb}function Ra(Nb,Zb){return Nb[0]-Zb[0]}function Wa(Nb,Zb){return Zb[0]<=Zb[1]?Zb[0]<=Nb&&Nb<=Zb[1]:Nb<Zb[0]||Zb[1]<Nb}var db,ob,xb,Cb,Eb,Qb,Xb,fc,uc,zc,Ec,Qc={point:R,lineStart:ta,lineEnd:za,polygonStart:function(){Qc.point=Aa;Qc.lineStart=Da;Qc.lineEnd=Qa;uc=0;Uf.polygonStart()},polygonEnd:function(){Uf.polygonEnd();
Qc.point=R;Qc.lineStart=ta;Qc.lineEnd=za;0>hj?(db=-(xb=180),ob=-(Cb=90)):1E-6<uc?Cb=90:-1E-6>uc&&(ob=-90);Ec[0]=db;Ec[1]=xb}};return function(Nb){Cb=xb=-(db=ob=Infinity);zc=[];Db.geo.stream(Nb,Qc);if(Nb=zc.length){zc.sort(Ra);for(var Zb=1,wc=zc[0],Xc,Zc=[wc];Zb<Nb;++Zb)Xc=zc[Zb],Wa(Xc[0],wc)||Wa(Xc[1],wc)?(Ja(wc[0],Xc[1])>Ja(wc[0],wc[1])&&(wc[1]=Xc[1]),Ja(Xc[0],wc[1])>Ja(wc[0],wc[1])&&(wc[0]=Xc[0])):Zc.push(wc=Xc);var cd=-Infinity,Oc;Nb=Zc.length-1;Zb=0;for(wc=Zc[Nb];Zb<=Nb;wc=Xc,++Zb)Xc=Zc[Zb],(Oc=
Ja(wc[1],Xc[0]))>cd&&(cd=Oc,db=Xc[0],xb=wc[1])}zc=Ec=null;return Infinity===db||Infinity===ob?[[NaN,NaN],[NaN,NaN]]:[[db,ob],[xb,Cb]]}}();Db.geo.centroid=function(R){Oe=Oi=Ih=Jh=Of=lg=xg=gh=Pi=ni=yg=0;Db.geo.stream(R,bg);R=Pi;var ha=ni,ta=yg,za=R*R+ha*ha+ta*ta;return 1E-12>za&&(R=lg,ha=xg,ta=gh,1E-6>Oi&&(R=Ih,ha=Jh,ta=Of),za=R*R+ha*ha+ta*ta,1E-12>za)?[NaN,NaN]:[Math.atan2(ha,R)*We,ka(ta/Math.sqrt(za))*We]};var Oe,Oi,Ih,Jh,Of,lg,xg,gh,Pi,ni,yg,bg={sphere:z,point:Gc,lineStart:md,lineEnd:rd,polygonStart:function(){bg.lineStart=
re},polygonEnd:function(){bg.lineStart=md}},Ej=Fe(Bd,function(R){var ha=NaN,ta=NaN,za=NaN,Aa;return{lineStart:function(){R.lineStart();Aa=1},point:function(Da,Qa){var Ja=0<Da?Yd:-Yd,Ra=de(Da-ha);if(1E-6>de(Ra-Yd))R.point(ha,ta=0<(ta+Qa)/2?Ze:-Ze),R.point(za,ta),R.lineEnd(),R.lineStart(),R.point(Ja,ta),R.point(Da,ta),Aa=0;else if(za!==Ja&&Ra>=Yd){1E-6>de(ha-za)&&(ha-=1E-6*za);1E-6>de(Da-Ja)&&(Da-=1E-6*Ja);Ra=ha;var Wa=ta,db=Da,ob,xb,Cb=Math.sin(Ra-db);ta=1E-6<de(Cb)?Math.atan((Math.sin(Wa)*(xb=Math.cos(Qa))*
Math.sin(db)-Math.sin(Qa)*(ob=Math.cos(Wa))*Math.sin(Ra))/(ob*xb*Cb)):(Wa+Qa)/2;R.point(za,ta);R.lineEnd();R.lineStart();R.point(Ja,ta);Aa=0}R.point(ha=Da,ta=Qa);za=Ja},lineEnd:function(){R.lineEnd();ha=ta=NaN},clean:function(){return 2-Aa}}},function(R,ha,ta,za){null==R?(ta*=Ze,za.point(-Yd,ta),za.point(0,ta),za.point(Yd,ta),za.point(Yd,0),za.point(Yd,-ta),za.point(0,-ta),za.point(-Yd,-ta),za.point(-Yd,0),za.point(-Yd,ta)):1E-6<de(R[0]-ha[0])?(R=R[0]<ha[0]?Yd:-Yd,ta=ta*R/2,za.point(-R,ta),za.point(0,
ta),za.point(R,ta)):za.point(ha[0],ha[1])},[-Yd,-Yd/2]);Db.geo.clipExtent=function(){var R,ha,ta,za,Aa,Da,Qa={stream:function(Ja){Aa&&(Aa.valid=!1);Aa=Da(Ja);Aa.valid=!0;return Aa},extent:function(Ja){if(!arguments.length)return[[R,ha],[ta,za]];Da=Xd(R=+Ja[0][0],ha=+Ja[0][1],ta=+Ja[1][0],za=+Ja[1][1]);Aa&&(Aa.valid=!1,Aa=null);return Qa}};return Qa.extent([[0,0],[960,500]])};(Db.geo.conicEqualArea=function(){return ye(kf)}).raw=kf;Db.geo.albers=function(){return Db.geo.conicEqualArea().rotate([96,
0]).center([-.6,38.7]).parallels([29.5,45.5]).scale(1070)};Db.geo.albersUsa=function(){function R(Wa){var db=Wa[0];Wa=Wa[1];Aa=null;(Qa(db,Wa),Aa)||(Ja(db,Wa),Aa)||Ra(db,Wa);return Aa}var ha=Db.geo.albers(),ta=Db.geo.conicEqualArea().rotate([154,0]).center([-2,58.5]).parallels([55,65]),za=Db.geo.conicEqualArea().rotate([157,0]).center([-3,19.9]).parallels([8,18]),Aa,Da={point:function(Wa,db){Aa=[Wa,db]}},Qa,Ja,Ra;R.invert=function(Wa){var db=ha.scale(),ob=ha.translate(),xb=(Wa[0]-ob[0])/db;db=(Wa[1]-
ob[1])/db;return(.12<=db&&.234>db&&-.425<=xb&&-.214>xb?ta:.166<=db&&.234>db&&-.214<=xb&&-.115>xb?za:ha).invert(Wa)};R.stream=function(Wa){var db=ha.stream(Wa),ob=ta.stream(Wa),xb=za.stream(Wa);return{point:function(Cb,Eb){db.point(Cb,Eb);ob.point(Cb,Eb);xb.point(Cb,Eb)},sphere:function(){db.sphere();ob.sphere();xb.sphere()},lineStart:function(){db.lineStart();ob.lineStart();xb.lineStart()},lineEnd:function(){db.lineEnd();ob.lineEnd();xb.lineEnd()},polygonStart:function(){db.polygonStart();ob.polygonStart();
xb.polygonStart()},polygonEnd:function(){db.polygonEnd();ob.polygonEnd();xb.polygonEnd()}}};R.precision=function(Wa){if(!arguments.length)return ha.precision();ha.precision(Wa);ta.precision(Wa);za.precision(Wa);return R};R.scale=function(Wa){if(!arguments.length)return ha.scale();ha.scale(Wa);ta.scale(.35*Wa);za.scale(Wa);return R.translate(ha.translate())};R.translate=function(Wa){if(!arguments.length)return ha.translate();var db=ha.scale(),ob=+Wa[0],xb=+Wa[1];Qa=ha.translate(Wa).clipExtent([[ob-
.455*db,xb-.238*db],[ob+.455*db,xb+.238*db]]).stream(Da).point;Ja=ta.translate([ob-.307*db,xb+.201*db]).clipExtent([[ob-.425*db+1E-6,xb+.12*db+1E-6],[ob-.214*db-1E-6,xb+.234*db-1E-6]]).stream(Da).point;Ra=za.translate([ob-.205*db,xb+.212*db]).clipExtent([[ob-.214*db+1E-6,xb+.166*db+1E-6],[ob-.115*db-1E-6,xb+.234*db-1E-6]]).stream(Da).point;return R};return R.scale(1070)};var ci,oi,Kh={point:z,lineStart:z,lineEnd:z,polygonStart:function(){oi=0;Kh.lineStart=Qe},polygonEnd:function(){Kh.lineStart=Kh.lineEnd=
Kh.point=z;ci+=de(oi/2)}},aj,tj,uj,Ki,vj={point:function(R,ha){R<aj&&(aj=R);R>uj&&(uj=R);ha<tj&&(tj=ha);ha>Ki&&(Ki=ha)},lineStart:z,lineEnd:z,polygonStart:z,polygonEnd:z},zg={point:Vb,lineStart:Sc,lineEnd:yc,polygonStart:function(){zg.lineStart=kd},polygonEnd:function(){zg.point=Vb;zg.lineStart=Sc;zg.lineEnd=yc}};Db.geo.path=function(){function R(Ra){Ra&&("function"===typeof ta&&Qa.pointRadius(+ta.apply(this,arguments)),Ja&&Ja.valid||(Ja=Da(Qa)),Db.geo.stream(Ra,Ja));return Qa.result()}function ha(){Ja=
null;return R}var ta=4.5,za,Aa,Da,Qa,Ja;R.area=function(Ra){ci=0;Db.geo.stream(Ra,Da(Kh));return ci};R.centroid=function(Ra){Ih=Jh=Of=lg=xg=gh=Pi=ni=yg=0;Db.geo.stream(Ra,Da(zg));return yg?[Pi/yg,ni/yg]:gh?[lg/gh,xg/gh]:Of?[Ih/Of,Jh/Of]:[NaN,NaN]};R.bounds=function(Ra){uj=Ki=-(aj=tj=Infinity);Db.geo.stream(Ra,Da(vj));return[[aj,tj],[uj,Ki]]};R.projection=function(Ra){if(!arguments.length)return za;Da=(za=Ra)?Ra.stream||Ld(Ra):y;return ha()};R.context=function(Ra){if(!arguments.length)return Aa;Qa=
null==(Aa=Ra)?new pf:new Od(Ra);"function"!==typeof ta&&Qa.pointRadius(ta);return ha()};R.pointRadius=function(Ra){if(!arguments.length)return ta;ta="function"===typeof Ra?Ra:(Qa.pointRadius(+Ra),+Ra);return R};return R.projection(Db.geo.albersUsa()).context(null)};Db.geo.transform=function(R){return{stream:function(ha){ha=new Jd(ha);for(var ta in R)ha[ta]=R[ta];return ha}}};Jd.prototype={point:function(R,ha){this.stream.point(R,ha)},sphere:function(){this.stream.sphere()},lineStart:function(){this.stream.lineStart()},
lineEnd:function(){this.stream.lineEnd()},polygonStart:function(){this.stream.polygonStart()},polygonEnd:function(){this.stream.polygonEnd()}};Db.geo.projection=pe;Db.geo.projectionMutator=Tb;(Db.geo.equirectangular=function(){return pe(Hc)}).raw=Hc.invert=Hc;Db.geo.rotation=function(R){function ha(ta){ta=R(ta[0]*je,ta[1]*je);return ta[0]*=We,ta[1]*=We,ta}R=Lc(R[0]%360*je,R[1]*je,2<R.length?R[2]*je:0);ha.invert=function(ta){ta=R.invert(ta[0]*je,ta[1]*je);return ta[0]*=We,ta[1]*=We,ta};return ha};
Wc.invert=Hc;Db.geo.circle=function(){function R(){var Da="function"===typeof ha?ha.apply(this,arguments):ha,Qa=Lc(-Da[0]*je,-Da[1]*je,0).invert,Ja=[];Aa(null,null,1,{point:function(Ra,Wa){Ja.push(Ra=Qa(Ra,Wa));Ra[0]*=We;Ra[1]*=We}});return{type:"Polygon",coordinates:[Ja]}}var ha=[0,0],ta,za=6,Aa;R.origin=function(Da){if(!arguments.length)return ha;ha=Da;return R};R.angle=function(Da){if(!arguments.length)return ta;Aa=oc((ta=+Da)*je,za*je);return R};R.precision=function(Da){if(!arguments.length)return za;
Aa=oc(ta*je,(za=+Da)*je);return R};return R.angle(90)};Db.geo.distance=function(R,ha){var ta=(ha[0]-R[0])*je,za=R[1]*je,Aa=ha[1]*je;ha=Math.cos(ta);R=Math.sin(za);za=Math.cos(za);var Da=Math.sin(Aa);Aa=Math.cos(Aa);var Qa;return Math.atan2(Math.sqrt((Qa=Aa*Math.sin(ta))*Qa+(Qa=za*Da-R*Aa*ha)*Qa),R*Da+za*Aa*ha)};Db.geo.graticule=function(){function R(){return{type:"MultiLineString",coordinates:ha()}}function ha(){return Db.range(Math.ceil(Da/xb)*xb,Aa,xb).map(Xb).concat(Db.range(Math.ceil(Wa/Cb)*Cb,
Ra,Cb).map(fc)).concat(Db.range(Math.ceil(za/db)*db,ta,db).filter(function(zc){return 1E-6<de(zc%xb)}).map(Eb)).concat(Db.range(Math.ceil(Ja/ob)*ob,Qa,ob).filter(function(zc){return 1E-6<de(zc%Cb)}).map(Qb))}var ta,za,Aa,Da,Qa,Ja,Ra,Wa,db=10,ob=db,xb=90,Cb=360,Eb,Qb,Xb,fc,uc=2.5;R.lines=function(){return ha().map(function(zc){return{type:"LineString",coordinates:zc}})};R.outline=function(){return{type:"Polygon",coordinates:[Xb(Da).concat(fc(Ra).slice(1),Xb(Aa).reverse().slice(1),fc(Wa).reverse().slice(1))]}};
R.extent=function(zc){return arguments.length?R.majorExtent(zc).minorExtent(zc):R.minorExtent()};R.majorExtent=function(zc){if(!arguments.length)return[[Da,Wa],[Aa,Ra]];Da=+zc[0][0];Aa=+zc[1][0];Wa=+zc[0][1];Ra=+zc[1][1];Da>Aa&&(zc=Da,Da=Aa,Aa=zc);Wa>Ra&&(zc=Wa,Wa=Ra,Ra=zc);return R.precision(uc)};R.minorExtent=function(zc){if(!arguments.length)return[[za,Ja],[ta,Qa]];za=+zc[0][0];ta=+zc[1][0];Ja=+zc[0][1];Qa=+zc[1][1];za>ta&&(zc=za,za=ta,ta=zc);Ja>Qa&&(zc=Ja,Ja=Qa,Qa=zc);return R.precision(uc)};
R.step=function(zc){return arguments.length?R.majorStep(zc).minorStep(zc):R.minorStep()};R.majorStep=function(zc){if(!arguments.length)return[xb,Cb];xb=+zc[0];Cb=+zc[1];return R};R.minorStep=function(zc){if(!arguments.length)return[db,ob];db=+zc[0];ob=+zc[1];return R};R.precision=function(zc){if(!arguments.length)return uc;uc=+zc;Eb=tc(Ja,Qa,90);Qb=hd(za,ta,uc);Xb=tc(Wa,Ra,90);fc=hd(Da,Aa,uc);return R};return R.majorExtent([[-180,-89.999999],[180,89.999999]]).minorExtent([[-180,-80.000001],[180,80.000001]])};
Db.geo.greatArc=function(){function R(){return{type:"LineString",coordinates:[ta||ha.apply(this,arguments),Aa||za.apply(this,arguments)]}}var ha=qd,ta,za=td,Aa;R.distance=function(){return Db.geo.distance(ta||ha.apply(this,arguments),Aa||za.apply(this,arguments))};R.source=function(Da){if(!arguments.length)return ha;ha=Da;ta="function"===typeof Da?null:Da;return R};R.target=function(Da){if(!arguments.length)return za;za=Da;Aa="function"===typeof Da?null:Da;return R};R.precision=function(){return arguments.length?
R:0};return R};Db.geo.interpolate=function(R,ha){return wd(R[0]*je,R[1]*je,ha[0]*je,ha[1]*je)};Db.geo.length=function(R){Li=0;Db.geo.stream(R,wj);return Li};var Li,wj={sphere:z,point:z,lineStart:function(){function R(Aa,Da){var Qa=Math.sin(Da*=je);Da=Math.cos(Da);var Ja=de((Aa*=je)-ha),Ra=Math.cos(Ja);Li+=Math.atan2(Math.sqrt((Ja=Da*Math.sin(Ja))*Ja+(Ja=za*Qa-ta*Da*Ra)*Ja),ta*Qa+za*Da*Ra);ha=Aa;ta=Qa;za=Da}var ha,ta,za;wj.point=function(Aa,Da){ha=Aa*je;ta=Math.sin(Da*=je);za=Math.cos(Da);wj.point=
R};wj.lineEnd=function(){wj.point=wj.lineEnd=z}},lineEnd:z,polygonStart:z,polygonEnd:z},di=sd(function(R){return Math.sqrt(2/(1+R))},function(R){return 2*Math.asin(R/2)});(Db.geo.azimuthalEqualArea=function(){return pe(di)}).raw=di;var Pk=sd(function(R){return(R=Math.acos(R))&&R/Math.sin(R)},y);(Db.geo.azimuthalEquidistant=function(){return pe(Pk)}).raw=Pk;(Db.geo.conicConformal=function(){return ye(xe)}).raw=xe;(Db.geo.conicEquidistant=function(){return ye(ue)}).raw=ue;var Qk=sd(function(R){return 1/
R},Math.atan);(Db.geo.gnomonic=function(){return pe(Qk)}).raw=Qk;Le.invert=function(R,ha){return[R,2*Math.atan(Math.exp(ha))-Ze]};(Db.geo.mercator=function(){return oe(Le)}).raw=Le;var Ak=sd(function(){return 1},Math.asin);(Db.geo.orthographic=function(){return pe(Ak)}).raw=Ak;var bj=sd(function(R){return 1/(1+R)},function(R){return 2*Math.atan(R)});(Db.geo.stereographic=function(){return pe(bj)}).raw=bj;Re.invert=function(R,ha){return[-ha,2*Math.atan(Math.exp(R))-Ze]};(Db.geo.transverseMercator=
function(){var R=oe(Re),ha=R.center,ta=R.rotate;R.center=function(za){return za?ha([-za[1],za[0]]):(za=ha(),[za[1],-za[0]])};R.rotate=function(za){return za?ta([za[0],za[1],2<za.length?za[2]+90:90]):(za=ta(),[za[0],za[1],za[2]-90])};return ta([0,0,90])}).raw=Re;Db.geom={};Db.geom.hull=function(R){function ha(Aa){if(3>Aa.length)return[];var Da=Na(ta),Qa=Na(za),Ja,Ra=Aa.length,Wa=[],db=[];for(Ja=0;Ja<Ra;Ja++)Wa.push([+Da.call(this,Aa[Ja],Ja),+Qa.call(this,Aa[Ja],Ja),Ja]);Wa.sort(Fj);for(Ja=0;Ja<Ra;Ja++)db.push([Wa[Ja][0],
-Wa[Ja][1]]);Da=th(Wa);db=th(db);Qa=db[0]===Da[0];Ra=db[db.length-1]===Da[Da.length-1];var ob=[];for(Ja=Da.length-1;0<=Ja;--Ja)ob.push(Aa[Wa[Da[Ja]][2]]);for(Ja=+Qa;Ja<db.length-Ra;++Ja)ob.push(Aa[Wa[db[Ja]][2]]);return ob}var ta=Gf,za=Zg;if(arguments.length)return ha(R);ha.x=function(Aa){return arguments.length?(ta=Aa,ha):ta};ha.y=function(Aa){return arguments.length?(za=Aa,ha):za};return ha};Db.geom.polygon=function(R){Wg(R,xj);return R};var xj=Db.geom.polygon.prototype=[];xj.area=function(){for(var R=
-1,ha=this.length,ta,za=this[ha-1],Aa=0;++R<ha;)ta=za,za=this[R],Aa+=ta[1]*za[0]-ta[0]*za[1];return.5*Aa};xj.centroid=function(R){var ha=-1,ta=this.length,za=0,Aa=0,Da=this[ta-1];for(arguments.length||(R=-1/(6*this.area()));++ha<ta;){var Qa=Da;Da=this[ha];var Ja=Qa[0]*Da[1]-Da[0]*Qa[1];za+=(Qa[0]+Da[0])*Ja;Aa+=(Qa[1]+Da[1])*Ja}return[za*R,Aa*R]};xj.clip=function(R){for(var ha,ta=Gj(R),za=-1,Aa=this.length-Gj(this),Da,Qa,Ja=this[Aa-1],Ra,Wa,db;++za<Aa;){ha=R.slice();R.length=0;Ra=this[za];Wa=ha[(Qa=
ha.length-ta)-1];for(Da=-1;++Da<Qa;)db=ha[Da],ij(db,Ja,Ra)?(ij(Wa,Ja,Ra)||R.push(hh(Wa,db,Ja,Ra)),R.push(db)):ij(Wa,Ja,Ra)&&R.push(hh(Wa,db,Ja,Ra)),Wa=db;ta&&R.push(R[0]);Ja=Ra}return R};var wh,Oh,jj,Lk=[],zf,Ij,Mk=[];Ag.prototype.prepare=function(){for(var R=this.edges,ha=R.length,ta;ha--;)ta=R[ha].edge,ta.b&&ta.a||R.splice(ha,1);R.sort(Mh);return R.length};Ph.prototype={start:function(){return this.edge.l===this.site?this.edge.a:this.edge.b},end:function(){return this.edge.l===this.site?this.edge.b:
this.edge.a}};He.prototype={insert:function(R,ha){var ta;if(R){ha.P=R;if(ha.N=R.N)R.N.P=ha;R.N=ha;if(R.R){for(R=R.R;R.L;)R=R.L;R.L=ha}else R.R=ha;var za=R}else this._?(R=Jj(this._),ha.P=null,ha.N=R,R.P=R.L=ha,za=R):(ha.P=ha.N=null,this._=ha,za=null);ha.L=ha.R=null;ha.U=za;ha.C=!0;for(R=ha;za&&za.C;)ha=za.U,za===ha.L?(ta=ha.R)&&ta.C?(za.C=ta.C=!1,ha.C=!0,R=ha):(R===za.R&&(ti(this,za),R=za,za=R.U),za.C=!1,ha.C=!0,ui(this,ha)):(ta=ha.L)&&ta.C?(za.C=ta.C=!1,ha.C=!0,R=ha):(R===za.L&&(ui(this,za),R=za,
za=R.U),za.C=!1,ha.C=!0,ti(this,ha)),za=R.U;this._.C=!1},remove:function(R){R.N&&(R.N.P=R.P);R.P&&(R.P.N=R.N);R.N=R.P=null;var ha=R.U,ta=R.L,za=R.R;var Aa=ta?za?Jj(za):ta:za;ha?ha.L===R?ha.L=Aa:ha.R=Aa:this._=Aa;if(ta&&za){var Da=Aa.C;Aa.C=R.C;Aa.L=ta;ta.U=Aa;Aa!==za?(ha=Aa.U,Aa.U=R.U,R=Aa.R,ha.L=R,Aa.R=za,za.U=Aa):(Aa.U=ha,ha=Aa,R=Aa.R)}else Da=R.C,R=Aa;R&&(R.U=ha);if(!Da)if(R&&R.C)R.C=!1;else{do{if(R===this._)break;if(R===ha.L){if(R=ha.R,R.C&&(R.C=!1,ha.C=!0,ti(this,ha),R=ha.R),R.L&&R.L.C||R.R&&
R.R.C){R.R&&R.R.C||(R.L.C=!1,R.C=!0,ui(this,R),R=ha.R);R.C=ha.C;ha.C=R.R.C=!1;ti(this,ha);R=this._;break}}else if(R=ha.L,R.C&&(R.C=!1,ha.C=!0,ui(this,ha),R=ha.L),R.L&&R.L.C||R.R&&R.R.C){R.L&&R.L.C||(R.R.C=!1,R.C=!0,ti(this,R),R=ha.L);R.C=ha.C;ha.C=R.L.C=!1;ui(this,ha);R=this._;break}R.C=!0;R=ha;ha=ha.U}while(!R.C);R&&(R.C=!1)}}};Db.geom.voronoi=function(R){function ha(Ra){var Wa=Array(Ra.length),db=Ja[0][0],ob=Ja[0][1],xb=Ja[1][0],Cb=Ja[1][1];Qi(ta(Ra),Ja).cells.forEach(function(Eb,Qb){var Xb=Eb.edges;
Eb=Eb.site;(Wa[Qb]=Xb.length?Xb.map(function(fc){fc=fc.start();return[fc.x,fc.y]}):Eb.x>=db&&Eb.x<=xb&&Eb.y>=ob&&Eb.y<=Cb?[[db,Cb],[xb,Cb],[xb,ob],[db,ob]]:[]).point=Ra[Qb]});return Wa}function ta(Ra){return Ra.map(function(Wa,db){return{x:1E-6*Math.round(Da(Wa,db)/1E-6),y:1E-6*Math.round(Qa(Wa,db)/1E-6),i:db}})}var za=Gf,Aa=Zg,Da=za,Qa=Aa,Ja=Bk;if(R)return ha(R);ha.links=function(Ra){return Qi(ta(Ra)).edges.filter(function(Wa){return Wa.l&&Wa.r}).map(function(Wa){return{source:Ra[Wa.l.i],target:Ra[Wa.r.i]}})};
ha.triangles=function(Ra){var Wa=[];Qi(ta(Ra)).cells.forEach(function(db,ob){var xb=db.site;db=db.edges.sort(Mh);var Cb=-1,Eb=db.length,Qb=db[Eb-1].edge;for(Qb=Qb.l===xb?Qb.r:Qb.l;++Cb<Eb;){var Xb=Qb;Qb=db[Cb].edge;Qb=Qb.l===xb?Qb.r:Qb.l;ob<Xb.i&&ob<Qb.i&&0>(xb.x-Qb.x)*(Xb.y-xb.y)-(xb.x-Xb.x)*(Qb.y-xb.y)&&Wa.push([Ra[ob],Ra[Xb.i],Ra[Qb.i]])}});return Wa};ha.x=function(Ra){return arguments.length?(Da=Na(za=Ra),ha):za};ha.y=function(Ra){return arguments.length?(Qa=Na(Aa=Ra),ha):Aa};ha.clipExtent=function(Ra){if(!arguments.length)return Ja===
Bk?null:Ja;Ja=null==Ra?Bk:Ra;return ha};ha.size=function(Ra){return arguments.length?ha.clipExtent(Ra&&[[0,0],Ra]):Ja===Bk?null:Ja&&Ja[1]};return ha};var Bk=[[-1E6,-1E6],[1E6,1E6]];Db.geom.delaunay=function(R){return Db.geom.voronoi().triangles(R)};Db.geom.quadtree=function(R,ha,ta,za,Aa){function Da(Wa){function db(Xc,Zc,cd,Oc,Ed,Nd,$d,me){if(!isNaN(cd)&&!isNaN(Oc))if(Xc.leaf){var ke=Xc.x,te=Xc.y;if(null!=ke){if(!(.01>de(ke-cd)+de(te-Oc))){var Sd=Xc.point;Xc.x=Xc.y=Xc.point=null;ob(Xc,Sd,ke,te,Ed,
Nd,$d,me)}ob(Xc,Zc,cd,Oc,Ed,Nd,$d,me)}else Xc.x=cd,Xc.y=Oc,Xc.point=Zc}else ob(Xc,Zc,cd,Oc,Ed,Nd,$d,me)}function ob(Xc,Zc,cd,Oc,Ed,Nd,$d,me){var ke=.5*(Ed+$d),te=.5*(Nd+me),Sd=cd>=ke,Ff=Oc>=te,gf=Ff<<1|Sd;Xc.leaf=!1;Xc=Xc.nodes[gf]||(Xc.nodes[gf]=dk());Sd?Ed=ke:$d=ke;Ff?Nd=te:me=te;db(Xc,Zc,cd,Oc,Ed,Nd,$d,me)}var xb=Na(Qa),Cb=Na(Ja),Eb;if(null!=ha){var Qb=ha;var Xb=ta;var fc=za;var uc=Aa}else{fc=uc=-(Qb=Xb=Infinity);var zc=[];var Ec=[];var Qc=Wa.length;if(Ra)for(Eb=0;Eb<Qc;++Eb){var Nb=Wa[Eb];Nb.x<
Qb&&(Qb=Nb.x);Nb.y<Xb&&(Xb=Nb.y);Nb.x>fc&&(fc=Nb.x);Nb.y>uc&&(uc=Nb.y);zc.push(Nb.x);Ec.push(Nb.y)}else for(Eb=0;Eb<Qc;++Eb){var Zb=+xb(Nb=Wa[Eb],Eb);Nb=+Cb(Nb,Eb);Zb<Qb&&(Qb=Zb);Nb<Xb&&(Xb=Nb);Zb>fc&&(fc=Zb);Nb>uc&&(uc=Nb);zc.push(Zb);Ec.push(Nb)}}Zb=fc-Qb;Nb=uc-Xb;Zb>Nb?uc=Xb+Zb:fc=Qb+Nb;var wc=dk();wc.add=function(Xc){db(wc,Xc,+xb(Xc,++Eb),+Cb(Xc,Eb),Qb,Xb,fc,uc)};wc.visit=function(Xc){Ri(Xc,wc,Qb,Xb,fc,uc)};wc.find=function(Xc){return sk(wc,Xc[0],Xc[1],Qb,Xb,fc,uc)};Eb=-1;if(null==ha){for(;++Eb<
Qc;)db(wc,Wa[Eb],zc[Eb],Ec[Eb],Qb,Xb,fc,uc);--Eb}else Wa.forEach(wc.add);zc=Ec=Wa=Nb=null;return wc}var Qa=Gf,Ja=Zg,Ra;if(Ra=arguments.length)return Qa=ck,Ja=Kj,3===Ra&&(Aa=ta,za=ha,ta=ha=0),Da(R);Da.x=function(Wa){return arguments.length?(Qa=Wa,Da):Qa};Da.y=function(Wa){return arguments.length?(Ja=Wa,Da):Ja};Da.extent=function(Wa){if(!arguments.length)return null==ha?null:[[ha,ta],[za,Aa]];null==Wa?ha=ta=za=Aa=null:(ha=+Wa[0][0],ta=+Wa[0][1],za=+Wa[1][0],Aa=+Wa[1][1]);return Da};Da.size=function(Wa){if(!arguments.length)return null==
ha?null:[za-ha,Aa-ta];null==Wa?ha=ta=za=Aa=null:(ha=ta=0,za=+Wa[0],Aa=+Wa[1]);return Da};return Da};Db.interpolateRgb=Qh;Db.interpolateObject=Rh;Db.interpolateNumber=Bg;Db.interpolateString=ng;var lj=/[-+]?(?:\d+\.?\d*|\.?\d+)(?:[eE][-+]?\d+)?/g,wi=new RegExp(lj.source,"g");Db.interpolate=xh;Db.interpolators=[function(R,ha){var ta=typeof ha;return("string"===ta?li.has(ha.toLowerCase())||/^(#|rgb\(|hsl\()/i.test(ha)?Qh:ng:ha instanceof Ca?Qh:Array.isArray(ha)?Si:"object"===ta&&isNaN(ha)?Rh:Bg)(R,ha)}];
Db.interpolateArray=Si;var al=function(){return y},yj=Db.map({linear:al,poly:function(R){return function(ha){return Math.pow(ha,R)}},quad:function(){return yh},cubic:function(){return Se},sin:function(){return jh},exp:function(){return xi},circle:function(){return Lj},elastic:function(R,ha){2>arguments.length&&(ha=.45);if(arguments.length)var ta=ha/lf*Math.asin(1/R);else R=1,ta=ha/4;return function(za){return 1+R*Math.pow(2,-10*za)*Math.sin((za-ta)*lf/ha)}},back:function(R){R||(R=1.70158);return function(ha){return ha*
ha*((R+1)*ha-R)}},bounce:function(){return Mj}}),ll=Db.map({"in":y,out:Sh,"in-out":ih,"out-in":function(R){return ih(Sh(R))}});Db.ease=function(R){var ha=R.indexOf("-"),ta=0<=ha?R.slice(0,ha):R;ha=0<=ha?R.slice(ha+1):"in";ta=yj.get(ta)||al;ha=ll.get(ha)||y;return $e(ha(ta.apply(null,Ok.call(arguments,1))))};Db.interpolateHcl=function(R,ha){R=Db.hcl(R);ha=Db.hcl(ha);var ta=R.h,za=R.c,Aa=R.l,Da=ha.h-ta,Qa=ha.c-za,Ja=ha.l-Aa;isNaN(Qa)&&(Qa=0,za=isNaN(za)?ha.c:za);isNaN(Da)?(Da=0,ta=isNaN(ta)?ha.h:ta):
180<Da?Da-=360:-180>Da&&(Da+=360);return function(Ra){return fb(ta+Da*Ra,za+Qa*Ra,Aa+Ja*Ra)+""}};Db.interpolateHsl=function(R,ha){R=Db.hsl(R);ha=Db.hsl(ha);var ta=R.h,za=R.s,Aa=R.l,Da=ha.h-ta,Qa=ha.s-za,Ja=ha.l-Aa;isNaN(Qa)&&(Qa=0,za=isNaN(za)?ha.s:za);isNaN(Da)?(Da=0,ta=isNaN(ta)?ha.h:ta):180<Da?Da-=360:-180>Da&&(Da+=360);return function(Ra){return Ua(ta+Da*Ra,za+Qa*Ra,Aa+Ja*Ra)+""}};Db.interpolateLab=function(R,ha){R=Db.lab(R);ha=Db.lab(ha);var ta=R.l,za=R.a,Aa=R.b,Da=ha.l-ta,Qa=ha.a-za,Ja=ha.b-
Aa;return function(Ra){return cb(ta+Da*Ra,za+Qa*Ra,Aa+Ja*Ra)+""}};Db.interpolateRound=$g;Db.transform=function(R){var ha=Bf.createElementNS(Db.ns.prefix.svg,"g");return(Db.transform=function(ta){if(null!=ta){ha.setAttribute("transform",ta);var za=ha.transform.baseVal.consolidate()}return new Ti(za?za.matrix:Ck)})(R)};Ti.prototype.toString=function(){return"translate("+this.translate+")rotate("+this.rotate+")skewX("+this.skew+")scale("+this.scale+")"};var Ck={a:1,b:0,c:0,d:1,e:0,f:0};Db.interpolateTransform=
dg;Db.layout={};Db.layout.bundle=function(){return function(R){for(var ha=[],ta=-1,za=R.length;++ta<za;){var Aa=ha,Da=Aa.push,Qa=R[ta],Ja=Qa.source;Qa=Qa.target;var Ra=Qa;if(Ja===Ra)var Wa=Ja;else{Wa=ah(Ja);Ra=ah(Ra);for(var db=Wa.pop(),ob=Ra.pop(),xb=null;db===ob;)xb=db,db=Wa.pop(),ob=Ra.pop();Wa=xb}for(Ra=[Ja];Ja!==Wa;)Ja=Ja.parent,Ra.push(Ja);for(Ja=Ra.length;Qa!==Wa;)Ra.splice(Ja,0,Qa),Qa=Qa.parent;Da.call(Aa,Ra)}return ha}};Db.layout.chord=function(){function R(){var ob={},xb=[],Cb=Db.range(Qa),
Eb=[],Qb,Xb;za=[];Aa=[];var fc=0;for(Qb=-1;++Qb<Qa;){var uc=0;for(Xb=-1;++Xb<Qa;)uc+=Da[Qb][Xb];xb.push(uc);Eb.push(Db.range(Qa));fc+=uc}Ra&&Cb.sort(function(Xc,Zc){return Ra(xb[Xc],xb[Zc])});Wa&&Eb.forEach(function(Xc,Zc){Xc.sort(function(cd,Oc){return Wa(Da[Zc][cd],Da[Zc][Oc])})});fc=(lf-Ja*Qa)/fc;uc=0;for(Qb=-1;++Qb<Qa;){var zc=uc;for(Xb=-1;++Xb<Qa;){var Ec=Cb[Qb],Qc=Eb[Ec][Xb],Nb=Da[Ec][Qc],Zb=uc,wc=uc+=Nb*fc;ob[Ec+"-"+Qc]={index:Ec,subindex:Qc,startAngle:Zb,endAngle:wc,value:Nb}}Aa[Ec]={index:Ec,
startAngle:zc,endAngle:uc,value:xb[Ec]};uc+=Ja}for(Qb=-1;++Qb<Qa;)for(Xb=Qb-1;++Xb<Qa;)Cb=ob[Qb+"-"+Xb],Eb=ob[Xb+"-"+Qb],(Cb.value||Eb.value)&&za.push(Cb.value<Eb.value?{source:Eb,target:Cb}:{source:Cb,target:Eb});db&&ha()}function ha(){za.sort(function(ob,xb){return db((ob.source.value+ob.target.value)/2,(xb.source.value+xb.target.value)/2)})}var ta={},za,Aa,Da,Qa,Ja=0,Ra,Wa,db;ta.matrix=function(ob){if(!arguments.length)return Da;Qa=(Da=ob)&&Da.length;za=Aa=null;return ta};ta.padding=function(ob){if(!arguments.length)return Ja;
Ja=ob;za=Aa=null;return ta};ta.sortGroups=function(ob){if(!arguments.length)return Ra;Ra=ob;za=Aa=null;return ta};ta.sortSubgroups=function(ob){if(!arguments.length)return Wa;Wa=ob;za=null;return ta};ta.sortChords=function(ob){if(!arguments.length)return db;db=ob;za&&ha();return ta};ta.chords=function(){za||R();return za};ta.groups=function(){Aa||R();return Aa};return ta};Db.layout.force=function(){function R(Ec){return function(Qc,Nb,Zb,wc){if(Qc.point!==Ec){Zb=Qc.cx-Ec.x;var Xc=Qc.cy-Ec.y;Nb=wc-
Nb;wc=Zb*Zb+Xc*Xc;if(Nb*Nb/Eb<wc)return wc<xb&&(Nb=Qc.charge/wc,Ec.px-=Zb*Nb,Ec.py-=Xc*Nb),!0;Qc.point&&wc&&wc<xb&&(Nb=Qc.pointCharge/wc,Ec.px-=Zb*Nb,Ec.py-=Xc*Nb)}return!Qc.charge}}function ha(Ec){Ec.px=Db.event.x;Ec.py=Db.event.y;ta.resume()}var ta={},za=Db.dispatch("start","tick","end"),Aa,Da=[1,1],Qa,Ja,Ra=.9,Wa=ml,db=Rk,ob=-30,xb=zj,Cb=.1,Eb=.64,Qb=[],Xb=[],fc,uc,zc;ta.tick=function(){if(.005>(Ja*=.99))return Aa=null,za.end({type:"end",alpha:Ja=0}),!0;var Ec=Qb.length,Qc=Xb.length,Nb,Zb;for(Nb=
0;Nb<Qc;++Nb){var wc=Xb[Nb];var Xc=wc.source;var Zc=wc.target;var cd=Zc.x-Xc.x;var Oc=Zc.y-Xc.y;if(Zb=cd*cd+Oc*Oc)Zb=Ja*uc[Nb]*((Zb=Math.sqrt(Zb))-fc[Nb])/Zb,cd*=Zb,Oc*=Zb,Zc.x-=cd*(Zb=Xc.weight+Zc.weight?Xc.weight/(Xc.weight+Zc.weight):.5),Zc.y-=Oc*Zb,Xc.x+=cd*(Zb=1-Zb),Xc.y+=Oc*Zb}if(Zb=Ja*Cb)if(cd=Da[0]/2,Oc=Da[1]/2,Nb=-1,Zb)for(;++Nb<Ec;)wc=Qb[Nb],wc.x+=(cd-wc.x)*Zb,wc.y+=(Oc-wc.y)*Zb;if(ob)for(eg(Qc=Db.geom.quadtree(Qb),Ja,zc),Nb=-1;++Nb<Ec;)(wc=Qb[Nb]).fixed||Qc.visit(R(wc));for(Nb=-1;++Nb<
Ec;)wc=Qb[Nb],wc.fixed?(wc.x=wc.px,wc.y=wc.py):(wc.x-=(wc.px-(wc.px=wc.x))*Ra,wc.y-=(wc.py-(wc.py=wc.y))*Ra);za.tick({type:"tick",alpha:Ja})};ta.nodes=function(Ec){if(!arguments.length)return Qb;Qb=Ec;return ta};ta.links=function(Ec){if(!arguments.length)return Xb;Xb=Ec;return ta};ta.size=function(Ec){if(!arguments.length)return Da;Da=Ec;return ta};ta.linkDistance=function(Ec){if(!arguments.length)return Wa;Wa="function"===typeof Ec?Ec:+Ec;return ta};ta.distance=ta.linkDistance;ta.linkStrength=function(Ec){if(!arguments.length)return db;
db="function"===typeof Ec?Ec:+Ec;return ta};ta.friction=function(Ec){if(!arguments.length)return Ra;Ra=+Ec;return ta};ta.charge=function(Ec){if(!arguments.length)return ob;ob="function"===typeof Ec?Ec:+Ec;return ta};ta.chargeDistance=function(Ec){if(!arguments.length)return Math.sqrt(xb);xb=Ec*Ec;return ta};ta.gravity=function(Ec){if(!arguments.length)return Cb;Cb=+Ec;return ta};ta.theta=function(Ec){if(!arguments.length)return Math.sqrt(Eb);Eb=Ec*Ec;return ta};ta.alpha=function(Ec){if(!arguments.length)return Ja;
Ec=+Ec;Ja?0<Ec?Ja=Ec:(Aa.c=null,Aa.t=NaN,Aa=null,za.end({type:"end",alpha:Ja=0})):0<Ec&&(za.start({type:"start",alpha:Ja=Ec}),Aa=Ba(ta.tick));return ta};ta.start=function(){function Ec(Oc,Ed){if(!Zc){Zc=Array(Nb);for($d=0;$d<Nb;++$d)Zc[$d]=[];for($d=0;$d<Zb;++$d){var Nd=Xb[$d];Zc[Nd.source.index].push(Nd.target);Zc[Nd.target.index].push(Nd.source)}}Nd=Zc[Qc];for(var $d=-1,me=Nd.length,ke;++$d<me;)if(!isNaN(ke=Nd[$d][Oc]))return ke;return Math.random()*Ed}var Qc,Nb=Qb.length,Zb=Xb.length,wc=Da[0],
Xc=Da[1],Zc,cd;for(Qc=0;Qc<Nb;++Qc)(cd=Qb[Qc]).index=Qc,cd.weight=0;for(Qc=0;Qc<Zb;++Qc)cd=Xb[Qc],"number"==typeof cd.source&&(cd.source=Qb[cd.source]),"number"==typeof cd.target&&(cd.target=Qb[cd.target]),++cd.source.weight,++cd.target.weight;for(Qc=0;Qc<Nb;++Qc)cd=Qb[Qc],isNaN(cd.x)&&(cd.x=Ec("x",wc)),isNaN(cd.y)&&(cd.y=Ec("y",Xc)),isNaN(cd.px)&&(cd.px=cd.x),isNaN(cd.py)&&(cd.py=cd.y);fc=[];if("function"===typeof Wa)for(Qc=0;Qc<Zb;++Qc)fc[Qc]=+Wa.call(this,Xb[Qc],Qc);else for(Qc=0;Qc<Zb;++Qc)fc[Qc]=
Wa;uc=[];if("function"===typeof db)for(Qc=0;Qc<Zb;++Qc)uc[Qc]=+db.call(this,Xb[Qc],Qc);else for(Qc=0;Qc<Zb;++Qc)uc[Qc]=db;zc=[];if("function"===typeof ob)for(Qc=0;Qc<Nb;++Qc)zc[Qc]=+ob.call(this,Qb[Qc],Qc);else for(Qc=0;Qc<Nb;++Qc)zc[Qc]=ob;return ta.resume()};ta.resume=function(){return ta.alpha(.1)};ta.stop=function(){return ta.alpha(0)};ta.drag=function(){Qa||(Qa=Db.behavior.drag().origin(y).on("dragstart.force",og).on("drag.force",ha).on("dragend.force",Ai));if(!arguments.length)return Qa;this.on("mouseover.force",
Nj).on("mouseout.force",mj).call(Qa)};return Db.rebind(ta,za,"on")};var ml=20,Rk=1,zj=Infinity;Db.layout.hierarchy=function(){function R(Aa){var Da=[Aa],Qa=[],Ja;for(Aa.depth=0;null!=(Ja=Da.pop());)if(Qa.push(Ja),(Wa=ta.call(R,Ja,Ja.depth))&&(Ra=Wa.length)){for(var Ra,Wa,db;0<=--Ra;)Da.push(db=Wa[Ra]),db.parent=Ja,db.depth=Ja.depth+1;za&&(Ja.value=0);Ja.children=Wa}else za&&(Ja.value=+za.call(R,Ja,Ja.depth)||0),delete Ja.children;gg(Aa,function(ob){var xb,Cb;ha&&(xb=ob.children)&&xb.sort(ha);za&&
(Cb=ob.parent)&&(Cb.value+=ob.value)});return Qa}var ha=Qf,ta=Oj,za=Uh;R.sort=function(Aa){if(!arguments.length)return ha;ha=Aa;return R};R.children=function(Aa){if(!arguments.length)return ta;ta=Aa;return R};R.value=function(Aa){if(!arguments.length)return za;za=Aa;return R};R.revalue=function(Aa){za&&(Vi(Aa,function(Da){Da.children&&(Da.value=0)}),gg(Aa,function(Da){var Qa;Da.children||(Da.value=+za.call(R,Da,Da.depth)||0);if(Qa=Da.parent)Qa.value+=Da.value}));return Aa};return R};Db.layout.partition=
function(){function R(Da,Qa,Ja,Ra){var Wa=Da.children;Da.x=Qa;Da.y=Da.depth*Ra;Da.dx=Ja;Da.dy=Ra;if(Wa&&(ob=Wa.length)){var db=-1,ob,xb;for(Ja=Da.value?Ja/Da.value:0;++db<ob;)R(xb=Wa[db],Qa,Da=xb.value*Ja,Ra),Qa+=Da}}function ha(Da){Da=Da.children;var Qa=0;if(Da&&(Ra=Da.length))for(var Ja=-1,Ra;++Ja<Ra;)Qa=Math.max(Qa,ha(Da[Ja]));return 1+Qa}function ta(Da,Qa){Da=za.call(this,Da,Qa);R(Da[0],0,Aa[0],Aa[1]/ha(Da[0]));return Da}var za=Db.layout.hierarchy(),Aa=[1,1];ta.size=function(Da){if(!arguments.length)return Aa;
Aa=Da;return ta};return tf(ta,za)};Db.layout.pie=function(){function R(Qa){var Ja=Qa.length,Ra=Qa.map(function(fc,uc){return+ha.call(R,fc,uc)}),Wa=+("function"===typeof za?za.apply(this,arguments):za),db=("function"===typeof Aa?Aa.apply(this,arguments):Aa)-Wa,ob=Math.min(Math.abs(db)/Ja,+("function"===typeof Da?Da.apply(this,arguments):Da)),xb=ob*(0>db?-1:1),Cb=Db.sum(Ra),Eb=Cb?(db-Ja*xb)/Cb:0;Ja=Db.range(Ja);var Qb=[],Xb;null!=ta&&Ja.sort(ta===ei?function(fc,uc){return Ra[uc]-Ra[fc]}:function(fc,
uc){return ta(Qa[fc],Qa[uc])});Ja.forEach(function(fc){Qb[fc]={data:Qa[fc],value:Xb=Ra[fc],startAngle:Wa,endAngle:Wa+=Xb*Eb+xb,padAngle:ob}});return Qb}var ha=Number,ta=ei,za=0,Aa=lf,Da=0;R.value=function(Qa){if(!arguments.length)return ha;ha=Qa;return R};R.sort=function(Qa){if(!arguments.length)return ta;ta=Qa;return R};R.startAngle=function(Qa){if(!arguments.length)return za;za=Qa;return R};R.endAngle=function(Qa){if(!arguments.length)return Aa;Aa=Qa;return R};R.padAngle=function(Qa){if(!arguments.length)return Da;
Da=Qa;return R};return R};var ei={};Db.layout.stack=function(){function R(Ja,Ra){if(!(xb=Ja.length))return Ja;var Wa=Ja.map(function(Xb,fc){return ha.call(R,Xb,fc)}),db=Wa.map(function(Xb){return Xb.map(function(fc,uc){return[Da.call(R,fc,uc),Qa.call(R,fc,uc)]})}),ob=ta.call(R,db,Ra);Wa=Db.permute(Wa,ob);db=Db.permute(db,ob);Ra=za.call(R,db,Ra);ob=Wa[0].length;var xb,Cb,Eb,Qb;for(Eb=0;Eb<ob;++Eb)for(Aa.call(R,Wa[0][Eb],Qb=Ra[Eb],db[0][Eb][1]),Cb=1;Cb<xb;++Cb)Aa.call(R,Wa[Cb][Eb],Qb+=db[Cb-1][Eb][1],
db[Cb][Eb][1]);return Ja}var ha=y,ta=bh,za=qf,Aa=Mg,Da=pg,Qa=If;R.values=function(Ja){if(!arguments.length)return ha;ha=Ja;return R};R.order=function(Ja){if(!arguments.length)return ta;ta="function"===typeof Ja?Ja:tg.get(Ja)||bh;return R};R.offset=function(Ja){if(!arguments.length)return za;za="function"===typeof Ja?Ja:Sg.get(Ja)||qf;return R};R.x=function(Ja){if(!arguments.length)return Da;Da=Ja;return R};R.y=function(Ja){if(!arguments.length)return Qa;Qa=Ja;return R};R.out=function(Ja){if(!arguments.length)return Aa;
Aa=Ja;return R};return R};var tg=Db.map({"inside-out":function(R){var ha=R.length,ta=R.map(nj),za=R.map(Pj),Aa=Db.range(ha).sort(function(db,ob){return ta[db]-ta[ob]}),Da=0,Qa=0,Ja=[],Ra=[];for(R=0;R<ha;++R){var Wa=Aa[R];Da<Qa?(Da+=za[Wa],Ja.push(Wa)):(Qa+=za[Wa],Ra.push(Wa))}return Ra.reverse().concat(Ja)},reverse:function(R){return Db.range(R.length).reverse()},"default":bh}),Sg=Db.map({silhouette:function(R){var ha=R.length,ta=R[0].length,za=[],Aa=0,Da,Qa,Ja,Ra=[];for(Qa=0;Qa<ta;++Qa){for(Ja=Da=
0;Da<ha;Da++)Ja+=R[Da][Qa][1];Ja>Aa&&(Aa=Ja);za.push(Ja)}for(Qa=0;Qa<ta;++Qa)Ra[Qa]=(Aa-za[Qa])/2;return Ra},wiggle:function(R){var ha=R.length,ta=R[0],za=ta.length,Aa,Da,Qa,Ja,Ra,Wa,db,ob=[];ob[0]=Wa=db=0;for(Da=1;Da<za;++Da){for(Qa=Aa=0;Aa<ha;++Aa)Qa+=R[Aa][Da][1];var xb=Aa=0;for(Ra=ta[Da][0]-ta[Da-1][0];Aa<ha;++Aa){var Cb=0;for(Ja=(R[Aa][Da][1]-R[Aa][Da-1][1])/(2*Ra);Cb<Aa;++Cb)Ja+=(R[Cb][Da][1]-R[Cb][Da-1][1])/Ra;xb+=Ja*R[Aa][Da][1]}ob[Da]=Wa-=Qa?xb/Qa*Ra:0;Wa<db&&(db=Wa)}for(Da=0;Da<za;++Da)ob[Da]-=
db;return ob},expand:function(R){var ha=R.length,ta=R[0].length,za=1/ha,Aa,Da,Qa,Ja=[];for(Da=0;Da<ta;++Da){for(Qa=Aa=0;Aa<ha;Aa++)Qa+=R[Aa][Da][1];if(Qa)for(Aa=0;Aa<ha;Aa++)R[Aa][Da][1]/=Qa;else for(Aa=0;Aa<ha;Aa++)R[Aa][Da][1]=za}for(Da=0;Da<ta;++Da)Ja[Da]=0;return Ja},zero:qf});Db.layout.histogram=function(){function R(Da,Qa){var Ja=[],Ra=Da.map(ta,this),Wa=za.call(this,Ra,Qa),db=Aa.call(this,Wa,Ra,Qa);Qa=-1;for(var ob=Ra.length,xb=db.length-1,Cb=ha?1:1/ob;++Qa<xb;){var Eb=Ja[Qa]=[];Eb.dx=db[Qa+
1]-(Eb.x=db[Qa]);Eb.y=0}if(0<xb)for(Qa=-1;++Qa<ob;)Eb=Ra[Qa],Eb>=Wa[0]&&Eb<=Wa[1]&&(Eb=Ja[Db.bisect(db,Eb,1,xb)-1],Eb.y+=Cb,Eb.push(Da[Qa]));return Ja}var ha=!0,ta=Number,za=qg,Aa=tk;R.value=function(Da){if(!arguments.length)return ta;ta=Da;return R};R.range=function(Da){if(!arguments.length)return za;za=Na(Da);return R};R.bins=function(Da){if(!arguments.length)return Aa;Aa="number"===typeof Da?function(Qa){return Ng(Qa,Da)}:Na(Da);return R};R.frequency=function(Da){if(!arguments.length)return ha;
ha=!!Da;return R};return R};Db.layout.pack=function(){function R(Da,Qa){Da=ha.call(this,Da,Qa);Qa=Da[0];var Ja=za[0],Ra=za[1],Wa=null==Aa?Math.sqrt:"function"===typeof Aa?Aa:function(){return Aa};Qa.x=Qa.y=0;gg(Qa,function(ob){ob.r=+Wa(ob.value)});gg(Qa,Og);if(ta){var db=ta*(Aa?1:Math.max(2*Qa.r/Ja,2*Qa.r/Ra))/2;gg(Qa,function(ob){ob.r+=db});gg(Qa,Og);gg(Qa,function(ob){ob.r-=db})}Wh(Qa,Ja/2,Ra/2,Aa?1:1/Math.max(2*Qa.r/Ja,2*Qa.r/Ra));return Da}var ha=Db.layout.hierarchy().sort(Vh),ta=0,za=[1,1],Aa;
R.size=function(Da){if(!arguments.length)return za;za=Da;return R};R.radius=function(Da){if(!arguments.length)return Aa;Aa=null==Da||"function"===typeof Da?Da:+Da;return R};R.padding=function(Da){if(!arguments.length)return ta;ta=+Da;return R};return tf(R,ha)};Db.layout.tree=function(){function R(Wa,db){Wa=Da.call(this,Wa,db);db=Wa[0];var ob=ha(db);gg(ob,ta);ob.parent.m=-ob.z;Vi(ob,za);if(Ra)Vi(db,Aa);else{var xb=db,Cb=db,Eb=db;Vi(db,function(uc){uc.x<xb.x&&(xb=uc);uc.x>Cb.x&&(Cb=uc);uc.depth>Eb.depth&&
(Eb=uc)});var Qb=Qa(xb,Cb)/2-xb.x,Xb=Ja[0]/(Cb.x+Qa(Cb,xb)/2+Qb),fc=Ja[1]/(Eb.depth||1);Vi(db,function(uc){uc.x=(uc.x+Qb)*Xb;uc.y=uc.depth*fc})}return Wa}function ha(Wa){Wa={A:null,children:[Wa]};for(var db=[Wa],ob;null!=(ob=db.pop());)for(var xb=ob.children,Cb,Eb=0,Qb=xb.length;Eb<Qb;++Eb)db.push((xb[Eb]=Cb={_:xb[Eb],parent:ob,children:(Cb=xb[Eb].children)&&Cb.slice()||[],A:null,a:null,z:0,m:0,c:0,s:0,t:null,i:Eb}).a=Cb);return Wa.children[0]}function ta(Wa){var db=Wa.children,ob=Wa.parent.children,
xb=Wa.i?ob[Wa.i-1]:null;if(db.length){for(var Cb=0,Eb=0,Qb=Wa.children,Xb=Qb.length,fc;0<=--Xb;)fc=Qb[Xb],fc.z+=Cb,fc.m+=Cb,Cb+=fc.s+(Eb+=fc.c);db=(db[0].z+db[db.length-1].z)/2;xb?(Wa.z=xb.z+Qa(Wa._,xb._),Wa.m=Wa.z-db):Wa.z=db}else xb&&(Wa.z=xb.z+Qa(Wa._,xb._));db=Wa.parent;ob=Wa.parent.A||ob[0];if(xb){Eb=Cb=Wa;Qb=Cb.parent.children[0];Xb=Cb.m;fc=Eb.m;for(var uc=xb.m,zc=Qb.m,Ec;xb=Xh(xb),Cb=Dg(Cb),xb&&Cb;){Qb=Dg(Qb);Eb=Xh(Eb);Eb.a=Wa;Ec=xb.z+uc-Cb.z-Xb+Qa(xb._,Cb._);if(0<Ec){var Qc=xb.a.parent===
Wa.parent?xb.a:ob,Nb=Wa,Zb=Ec,wc=Zb/(Nb.i-Qc.i);Nb.c-=wc;Nb.s+=Zb;Qc.c+=wc;Nb.z+=Zb;Nb.m+=Zb;Xb+=Ec;fc+=Ec}uc+=xb.m;Xb+=Cb.m;zc+=Qb.m;fc+=Eb.m}xb&&!Xh(Eb)&&(Eb.t=xb,Eb.m+=uc-fc);Cb&&!Dg(Qb)&&(Qb.t=Cb,Qb.m+=Xb-zc,ob=Wa)}db.A=ob}function za(Wa){Wa._.x=Wa.z+Wa.parent.m;Wa.m+=Wa.parent.m}function Aa(Wa){Wa.x*=Ja[0];Wa.y=Wa.depth*Ja[1]}var Da=Db.layout.hierarchy().sort(null).value(null),Qa=Ve,Ja=[1,1],Ra=null;R.separation=function(Wa){if(!arguments.length)return Qa;Qa=Wa;return R};R.size=function(Wa){if(!arguments.length)return Ra?
null:Ja;Ra=null==(Ja=Wa)?Aa:null;return R};R.nodeSize=function(Wa){if(!arguments.length)return Ra?Ja:null;Ra=null==(Ja=Wa)?null:Aa;return R};return tf(R,Da)};Db.layout.cluster=function(){function R(Da,Qa){Da=ha.call(this,Da,Qa);var Ja=Da[0],Ra,Wa=0;gg(Ja,function(Cb){var Eb=Cb.children;Eb&&Eb.length?(Cb.x=Mf(Eb),Cb.y=oj(Eb)):(Cb.x=Ra?Wa+=ta(Cb,Ra):0,Cb.y=0,Ra=Cb)});Qa=Yh(Ja);var db=Wi(Ja),ob=Qa.x-ta(Qa,db)/2,xb=db.x+ta(db,Qa)/2;gg(Ja,Aa?function(Cb){Cb.x=(Cb.x-Ja.x)*za[0];Cb.y=(Ja.y-Cb.y)*za[1]}:
function(Cb){Cb.x=(Cb.x-ob)/(xb-ob)*za[0];Cb.y=(1-(Ja.y?Cb.y/Ja.y:1))*za[1]});return Da}var ha=Db.layout.hierarchy().sort(null).value(null),ta=Ve,za=[1,1],Aa=!1;R.separation=function(Da){if(!arguments.length)return ta;ta=Da;return R};R.size=function(Da){if(!arguments.length)return Aa?null:za;Aa=null==(za=Da);return R};R.nodeSize=function(Da){if(!arguments.length)return Aa?za:null;Aa=null!=(za=Da);return R};return tf(R,ha)};Db.layout.treemap=function(){function R(Eb,Qb){for(var Xb=-1,fc=Eb.length,
uc,zc;++Xb<fc;)zc=(uc=Eb[Xb]).value*(0>Qb?0:Qb),uc.area=isNaN(zc)||0>=zc?0:zc}function ha(Eb){var Qb=Eb.children;if(Qb&&Qb.length){var Xb=Wa(Eb),fc=[],uc=Qb.slice(),zc=Infinity,Ec,Qc="slice"===xb?Xb.dx:"dice"===xb?Xb.dy:"slice-dice"===xb?Eb.depth&1?Xb.dy:Xb.dx:Math.min(Xb.dx,Xb.dy);R(uc,Xb.dx*Xb.dy/Eb.value);for(fc.area=0;0<(Eb=uc.length);){fc.push(Eb=uc[Eb-1]);fc.area+=Eb.area;if(!(Eb="squarify"!==xb)){Eb=Qc;for(var Nb=fc.area,Zb=0,wc=Infinity,Xc=-1,Zc=fc.length;++Xc<Zc;)if(Ec=fc[Xc].area)Ec<wc&&
(wc=Ec),Ec>Zb&&(Zb=Ec);Nb*=Nb;Eb*=Eb;Eb=(Ec=Nb?Math.max(Eb*Zb*Cb/Nb,Nb/(Eb*wc*Cb)):Infinity)<=zc}Eb?(uc.pop(),zc=Ec):(fc.area-=fc.pop().area,za(fc,Qc,Xb,!1),Qc=Math.min(Xb.dx,Xb.dy),fc.length=fc.area=0,zc=Infinity)}fc.length&&(za(fc,Qc,Xb,!0),fc.length=fc.area=0);Qb.forEach(ha)}}function ta(Eb){var Qb=Eb.children;if(Qb&&Qb.length){var Xb=Wa(Eb),fc=Qb.slice(),uc=[];R(fc,Xb.dx*Xb.dy/Eb.value);for(uc.area=0;Eb=fc.pop();)uc.push(Eb),uc.area+=Eb.area,null!=Eb.z&&(za(uc,Eb.z?Xb.dx:Xb.dy,Xb,!fc.length),
uc.length=uc.area=0);Qb.forEach(ta)}}function za(Eb,Qb,Xb,fc){var uc=-1,zc=Eb.length,Ec=Xb.x,Qc=Xb.y,Nb=Qb?Qa(Eb.area/Qb):0;if(Qb==Xb.dx){if(fc||Nb>Xb.dy)Nb=Xb.dy;for(;++uc<zc;){var Zb=Eb[uc];Zb.x=Ec;Zb.y=Qc;Zb.dy=Nb;Ec+=Zb.dx=Math.min(Xb.x+Xb.dx-Ec,Nb?Qa(Zb.area/Nb):0)}Zb.z=!0;Zb.dx+=Xb.x+Xb.dx-Ec;Xb.y+=Nb;Xb.dy-=Nb}else{if(fc||Nb>Xb.dx)Nb=Xb.dx;for(;++uc<zc;)Zb=Eb[uc],Zb.x=Ec,Zb.y=Qc,Zb.dx=Nb,Qc+=Zb.dy=Math.min(Xb.y+Xb.dy-Qc,Nb?Qa(Zb.area/Nb):0);Zb.z=!1;Zb.dy+=Xb.y+Xb.dy-Qc;Xb.x+=Nb;Xb.dx-=Nb}}
function Aa(Eb){Eb=ob||Da(Eb);var Qb=Eb[0];Qb.x=Qb.y=0;Qb.value?(Qb.dx=Ja[0],Qb.dy=Ja[1]):Qb.dx=Qb.dy=0;ob&&Da.revalue(Qb);R([Qb],Qb.dx*Qb.dy/Qb.value);(ob?ta:ha)(Qb);db&&(ob=Eb);return Eb}var Da=Db.layout.hierarchy(),Qa=Math.round,Ja=[1,1],Ra=null,Wa=kh,db=!1,ob,xb="squarify",Cb=.5*(1+Math.sqrt(5));Aa.size=function(Eb){if(!arguments.length)return Ja;Ja=Eb;return Aa};Aa.padding=function(Eb){function Qb(uc){var zc=Eb.call(Aa,uc,uc.depth);return null==zc?kh(uc):lh(uc,"number"===typeof zc?[zc,zc,zc,
zc]:zc)}function Xb(uc){return lh(uc,Eb)}if(!arguments.length)return Ra;var fc;Wa=null==(Ra=Eb)?kh:"function"===(fc=typeof Eb)?Qb:"number"===fc?(Eb=[Eb,Eb,Eb,Eb],Xb):Xb;return Aa};Aa.round=function(Eb){if(!arguments.length)return Qa!=Number;Qa=Eb?Math.round:Number;return Aa};Aa.sticky=function(Eb){if(!arguments.length)return db;db=Eb;ob=null;return Aa};Aa.ratio=function(Eb){if(!arguments.length)return Cb;Cb=Eb;return Aa};Aa.mode=function(Eb){if(!arguments.length)return xb;xb=Eb+"";return Aa};return tf(Aa,
Da)};Db.random={normal:function(R,ha){var ta=arguments.length;2>ta&&(ha=1);1>ta&&(R=0);return function(){do{var za=2*Math.random()-1;var Aa=2*Math.random()-1;Aa=za*za+Aa*Aa}while(!Aa||1<Aa);return R+ha*za*Math.sqrt(-2*Math.log(Aa)/Aa)}},logNormal:function(){var R=Db.random.normal.apply(Db,arguments);return function(){return Math.exp(R())}},bates:function(R){var ha=Db.random.irwinHall(R);return function(){return ha()/R}},irwinHall:function(R){return function(){for(var ha=0,ta=0;ta<R;ta++)ha+=Math.random();
return ha}}};Db.scale={};var nh={floor:y,ceil:y};Db.scale.linear=function(){return W([0,1],[0,1],xh,!1)};var Xi={s:1,g:1,p:1,r:1,e:1};Db.scale.log=function(){return ab(Db.scale.linear().domain([0,1]),10,!0,[1,10])};var rg=Db.format(".0e"),ig={floor:function(R){return-Math.ceil(-R)},ceil:function(R){return-Math.floor(-R)}};Db.scale.pow=function(){return yb(Db.scale.linear(),1,[0,1])};Db.scale.sqrt=function(){return Db.scale.pow().exponent(.5)};Db.scale.ordinal=function(){return Ib([],{t:"range",a:[[]]})};
Db.scale.category10=function(){return Db.scale.ordinal().range(dh)};Db.scale.category20=function(){return Db.scale.ordinal().range(Hg)};Db.scale.category20b=function(){return Db.scale.ordinal().range(sh)};Db.scale.category20c=function(){return Db.scale.ordinal().range(Dh)};var dh=[2062260,16744206,2924588,14034728,9725885,9197131,14907330,8355711,12369186,1556175].map(Ia),Hg=[2062260,11454440,16744206,16759672,2924588,10018698,14034728,16750742,9725885,12955861,9197131,12885140,14907330,16234194,
8355711,13092807,12369186,14408589,1556175,10410725].map(Ia),sh=[3750777,5395619,7040719,10264286,6519097,9216594,11915115,13556636,9202993,12426809,15186514,15190932,8666169,11356490,14049643,15177372,8077683,10834324,13528509,14589654].map(Ia),Dh=[3244733,7057110,10406625,13032431,15095053,16616764,16625259,16634018,3253076,7652470,10607003,13101504,7695281,10394312,12369372,14342891,6513507,9868950,12434877,14277081].map(Ia);Db.scale.quantile=function(){return nc([],[])};Db.scale.quantize=function(){return mc(0,
1,[0,1])};Db.scale.threshold=function(){return cc([.5],[0,1])};Db.scale.identity=function(){return lc([0,1])};Db.svg={};Db.svg.arc=function(){function R(){var Wa=Math.max(0,+ta.apply(this,arguments)),db=Math.max(0,+za.apply(this,arguments)),ob=Qa.apply(this,arguments)-Ze,xb=Ja.apply(this,arguments)-Ze,Cb=Math.abs(xb-ob),Eb=ob>xb?0:1;if(db<Wa){var Qb=db;db=Wa;Wa=Qb}if(Cb>=qh)return ha(db,Eb)+(Wa?ha(Wa,1-Eb):"")+"Z";var Xb,fc=0,uc=0,zc=[];if(Xb=(+Ra.apply(this,arguments)||0)/2){var Ec=Da===Tg?Math.sqrt(Wa*
Wa+db*db):+Da.apply(this,arguments);Eb||(uc*=-1);db&&(uc=ka(Ec/db*Math.sin(Xb)));Wa&&(fc=ka(Ec/Wa*Math.sin(Xb)))}if(db){Ec=db*Math.cos(ob+uc);Xb=db*Math.sin(ob+uc);var Qc=db*Math.cos(xb-uc);var Nb=db*Math.sin(xb-uc);var Zb=Math.abs(xb-ob-2*uc)<=Yd?0:1;uc&&Ic(Ec,Xb,Qc,Nb)===Eb^Zb&&(Qc=(ob+xb)/2,Ec=db*Math.cos(Qc),Xb=db*Math.sin(Qc),Qc=Nb=null)}else Ec=Xb=0;if(Wa){uc=Wa*Math.cos(xb-fc);var wc=Wa*Math.sin(xb-fc);var Xc=Wa*Math.cos(ob+fc);var Zc=Wa*Math.sin(ob+fc);var cd=Math.abs(ob-xb+2*fc)<=Yd?0:1;
fc&&Ic(uc,wc,Xc,Zc)===1-Eb^cd&&(Xc=(ob+xb)/2,uc=Wa*Math.cos(Xc),wc=Wa*Math.sin(Xc),Xc=Zc=null)}else uc=wc=0;1E-6<Cb&&.001<(Qb=Math.min(Math.abs(db-Wa)/2,+Aa.apply(this,arguments)))?(Zb=Wa<db^Eb?0:1,cd=ob=Qb,Cb<Yd&&(Cb=null==Xc?[uc,wc]:null==Qc?[Ec,Xb]:hh([Ec,Xb],[Xc,Zc],[Qc,Nb],[uc,wc]),cd=Ec-Cb[0],ob=Xb-Cb[1],xb=Qc-Cb[0],fc=Nb-Cb[1],ob=1/Math.sin(Math.acos((cd*xb+ob*fc)/(Math.sqrt(cd*cd+ob*ob)*Math.sqrt(xb*xb+fc*fc)))/2),Cb=Math.sqrt(Cb[0]*Cb[0]+Cb[1]*Cb[1]),cd=Math.min(Qb,(Wa-Cb)/(ob-1)),ob=Math.min(Qb,
(db-Cb)/(ob+1))),null!=Qc?(Cb=ld(null==Xc?[uc,wc]:[Xc,Zc],[Ec,Xb],db,ob,Eb),xb=ld([Qc,Nb],[uc,wc],db,ob,Eb),Qb===ob?zc.push("M",Cb[0],"A",ob,",",ob," 0 0,",Zb," ",Cb[1],"A",db,",",db," 0 ",1-Eb^Ic(Cb[1][0],Cb[1][1],xb[1][0],xb[1][1]),",",Eb," ",xb[1],"A",ob,",",ob," 0 0,",Zb," ",xb[0]):zc.push("M",Cb[0],"A",ob,",",ob," 0 1,",Zb," ",xb[0])):zc.push("M",Ec,",",Xb),null!=Xc?(db=ld([Ec,Xb],[Xc,Zc],Wa,-cd,Eb),Qc=ld([uc,wc],null==Qc?[Ec,Xb]:[Qc,Nb],Wa,-cd,Eb),Qb===cd?zc.push("L",Qc[0],"A",cd,",",cd," 0 0,",
Zb," ",Qc[1],"A",Wa,",",Wa," 0 ",Eb^Ic(Qc[1][0],Qc[1][1],db[1][0],db[1][1]),",",1-Eb," ",db[1],"A",cd,",",cd," 0 0,",Zb," ",db[0]):zc.push("L",Qc[0],"A",cd,",",cd," 0 0,",Zb," ",db[0])):zc.push("L",uc,",",wc)):(zc.push("M",Ec,",",Xb),null!=Qc&&zc.push("A",db,",",db," 0 ",Zb,",",Eb," ",Qc,",",Nb),zc.push("L",uc,",",wc),null!=Xc&&zc.push("A",Wa,",",Wa," 0 ",cd,",",1-Eb," ",Xc,",",Zc));zc.push("Z");return zc.join("")}function ha(Wa,db){return"M0,"+Wa+"A"+Wa+","+Wa+" 0 1,"+db+" 0,"+-Wa+"A"+Wa+","+Wa+
" 0 1,"+db+" 0,"+Wa}var ta=Gb,za=dc,Aa=kc,Da=Tg,Qa=Dc,Ja=Uc,Ra=jd;R.innerRadius=function(Wa){if(!arguments.length)return ta;ta=Na(Wa);return R};R.outerRadius=function(Wa){if(!arguments.length)return za;za=Na(Wa);return R};R.cornerRadius=function(Wa){if(!arguments.length)return Aa;Aa=Na(Wa);return R};R.padRadius=function(Wa){if(!arguments.length)return Da;Da=Wa==Tg?Tg:Na(Wa);return R};R.startAngle=function(Wa){if(!arguments.length)return Qa;Qa=Na(Wa);return R};R.endAngle=function(Wa){if(!arguments.length)return Ja;
Ja=Na(Wa);return R};R.padAngle=function(Wa){if(!arguments.length)return Ra;Ra=Na(Wa);return R};R.centroid=function(){var Wa=(+ta.apply(this,arguments)+ +za.apply(this,arguments))/2,db=(+Qa.apply(this,arguments)+ +Ja.apply(this,arguments))/2-Ze;return[Math.cos(db)*Wa,Math.sin(db)*Wa]};return R};var Tg="auto";Db.svg.line=function(){return id(y)};var wk=Db.map({linear:yd,"linear-closed":zd,step:function(R){for(var ha=0,ta=R.length,za=R[0],Aa=[za[0],",",za[1]];++ha<ta;)Aa.push("H",(za[0]+(za=R[ha])[0])/
2,"V",za[1]);1<ta&&Aa.push("H",za[0]);return Aa.join("")},"step-before":ud,"step-after":ie,basis:Ge,"basis-open":function(R){if(4>R.length)return yd(R);for(var ha=[],ta=-1,za=R.length,Aa,Da=[0],Qa=[0];3>++ta;)Aa=R[ta],Da.push(Aa[0]),Qa.push(Aa[1]);ha.push(Be(Ah,Da)+","+Be(Ah,Qa));for(--ta;++ta<za;)Aa=R[ta],Da.shift(),Da.push(Aa[0]),Qa.shift(),Qa.push(Aa[1]),Qd(ha,Da,Qa);return ha.join("")},"basis-closed":function(R){for(var ha,ta=-1,za=R.length,Aa=za+4,Da,Qa=[],Ja=[];4>++ta;)Da=R[ta%za],Qa.push(Da[0]),
Ja.push(Da[1]);ha=[Be(Ah,Qa),",",Be(Ah,Ja)];for(--ta;++ta<Aa;)Da=R[ta%za],Qa.shift(),Qa.push(Da[0]),Ja.shift(),Ja.push(Da[1]),Qd(ha,Qa,Ja);return ha.join("")},bundle:function(R,ha){var ta=R.length-1;if(ta)for(var za=R[0][0],Aa=R[0][1],Da=R[ta][0]-za,Qa=R[ta][1]-Aa,Ja=-1,Ra,Wa;++Ja<=ta;)Ra=R[Ja],Wa=Ja/ta,Ra[0]=ha*Ra[0]+(1-ha)*(za+Wa*Da),Ra[1]=ha*Ra[1]+(1-ha)*(Aa+Wa*Qa);return Ge(R)},cardinal:function(R,ha){return 3>R.length?yd(R):R[0]+ge(R,Ee(R,ha))},"cardinal-open":function(R,ha){return 4>R.length?
yd(R):R[1]+ge(R.slice(1,-1),Ee(R,ha))},"cardinal-closed":function(R,ha){return 3>R.length?zd(R):R[0]+ge((R.push(R[0]),R),Ee([R[R.length-2]].concat(R,[R[1]]),ha))},monotone:function(R){if(3>R.length)R=yd(R);else{var ha=R[0],ta=[],za;var Aa=0;var Da=R.length-1;var Qa=[];var Ja=R[1];for(za=Qa[0]=qe(R[0],Ja);++Aa<Da;)Qa[Aa]=(za+(za=qe(Ja,Ja=R[Aa+1])))/2;Qa[Aa]=za;for(var Ra=-1,Wa=R.length-1;++Ra<Wa;)Aa=qe(R[Ra],R[Ra+1]),1E-6>de(Aa)?Qa[Ra]=Qa[Ra+1]=0:(Da=Qa[Ra]/Aa,Ja=Qa[Ra+1]/Aa,za=Da*Da+Ja*Ja,9<za&&(za=
3*Aa/Math.sqrt(za),Qa[Ra]=za*Da,Qa[Ra+1]=za*Ja));for(Ra=-1;++Ra<=Wa;)za=(R[Math.min(Wa,Ra+1)][0]-R[Math.max(0,Ra-1)][0])/(6*(1+Qa[Ra]*Qa[Ra])),ta.push([za||0,Qa[Ra]*za||0]);R=ha+ge(R,ta)}return R}});wk.forEach(function(R,ha){ha.key=R;ha.closed=/-closed$/.test(R)});var Nk=[0,2/3,1/3,0],sg=[0,1/3,2/3,0],Ah=[0,1/6,2/3,1/6];Db.svg.line.radial=function(){var R=id(Ne);R.radius=R.x;delete R.x;R.angle=R.y;delete R.y;return R};ud.reverse=ie;ie.reverse=ud;Db.svg.area=function(){return ze(y)};Db.svg.area.radial=
function(){var R=ze(Ne);R.radius=R.x;delete R.x;R.innerRadius=R.x0;delete R.x0;R.outerRadius=R.x1;delete R.x1;R.angle=R.y;delete R.y;R.startAngle=R.y0;delete R.y0;R.endAngle=R.y1;delete R.y1;return R};Db.svg.chord=function(){function R(Ra,Wa){var db=ha(this,za,Ra,Wa);Ra=ha(this,Aa,Ra,Wa);return"M"+db.p0+ta(db.r,db.p1,db.a1-db.a0)+(db.a0==Ra.a0&&db.a1==Ra.a1?"Q 0,0 "+db.p0:"Q 0,0 "+Ra.p0+ta(Ra.r,Ra.p1,Ra.a1-Ra.a0)+("Q 0,0 "+db.p0))+"Z"}function ha(Ra,Wa,db,ob){var xb=Wa.call(Ra,db,ob);Wa=Da.call(Ra,
xb,ob);db=Qa.call(Ra,xb,ob)-Ze;Ra=Ja.call(Ra,xb,ob)-Ze;return{r:Wa,a0:db,a1:Ra,p0:[Wa*Math.cos(db),Wa*Math.sin(db)],p1:[Wa*Math.cos(Ra),Wa*Math.sin(Ra)]}}function ta(Ra,Wa,db){return"A"+Ra+","+Ra+" 0 "+ +(db>Yd)+",1 "+Wa}var za=qd,Aa=td,Da=Te,Qa=Dc,Ja=Uc;R.radius=function(Ra){if(!arguments.length)return Da;Da=Na(Ra);return R};R.source=function(Ra){if(!arguments.length)return za;za=Na(Ra);return R};R.target=function(Ra){if(!arguments.length)return Aa;Aa=Na(Ra);return R};R.startAngle=function(Ra){if(!arguments.length)return Qa;
Qa=Na(Ra);return R};R.endAngle=function(Ra){if(!arguments.length)return Ja;Ja=Na(Ra);return R};return R};Db.svg.diagonal=function(){function R(Aa,Da){var Qa=ha.call(this,Aa,Da);Aa=ta.call(this,Aa,Da);Da=(Qa.y+Aa.y)/2;Qa=[Qa,{x:Qa.x,y:Da},{x:Aa.x,y:Da},Aa];Qa=Qa.map(za);return"M"+Qa[0]+"C"+Qa[1]+" "+Qa[2]+" "+Qa[3]}var ha=qd,ta=td,za=nf;R.source=function(Aa){if(!arguments.length)return ha;ha=Na(Aa);return R};R.target=function(Aa){if(!arguments.length)return ta;ta=Na(Aa);return R};R.projection=function(Aa){if(!arguments.length)return za;
za=Aa;return R};return R};Db.svg.diagonal.radial=function(){var R=Db.svg.diagonal(),ha=nf,ta=R.projection;R.projection=function(za){return arguments.length?ta(rf(ha=za)):ha};return R};Db.svg.symbol=function(){function R(za,Aa){return(bl.get(ha.call(this,za,Aa))||Rf)(ta.call(this,za,Aa))}var ha=df,ta=Eg;R.type=function(za){if(!arguments.length)return ha;ha=Na(za);return R};R.size=function(za){if(!arguments.length)return ta;ta=Na(za);return R};return R};var bl=Db.map({circle:Rf,cross:function(R){R=
Math.sqrt(R/5)/2;return"M"+-3*R+","+-R+"H"+-R+"V"+-3*R+"H"+R+"V"+-R+"H"+3*R+"V"+R+"H"+R+"V"+3*R+"H"+-R+"V"+R+"H"+-3*R+"Z"},diamond:function(R){R=Math.sqrt(R/(2*ug));var ha=R*ug;return"M0,"+-R+"L"+ha+",0 0,"+R+" "+-ha+",0Z"},square:function(R){R=Math.sqrt(R)/2;return"M"+-R+","+-R+"L"+R+","+-R+" "+R+","+R+" "+-R+","+R+"Z"},"triangle-down":function(R){R=Math.sqrt(R/hk);var ha=R*hk/2;return"M0,"+ha+"L"+R+","+-ha+" "+-R+","+-ha+"Z"},"triangle-up":function(R){R=Math.sqrt(R/hk);var ha=R*hk/2;return"M0,"+
-ha+"L"+R+","+ha+" "+-R+","+ha+"Z"}});Db.svg.symbolTypes=bl.keys();var hk=Math.sqrt(3),ug=Math.tan(30*je);Pe.transition=function(R){var ha=Wf||++Sk;R=Ce(R);for(var ta=[],za,Aa,Da=Aj||{time:Date.now(),ease:Ue,delay:0,duration:250},Qa=-1,Ja=this.length;++Qa<Ja;){ta.push(za=[]);for(var Ra=this[Qa],Wa=-1,db=Ra.length;++Wa<db;)(Aa=Ra[Wa])&&Ie(Aa,Wa,R,ha,Da),za.push(Aa)}return Ei(ta,R,ha)};Pe.interrupt=function(R){return this.each(null==R?Cf:Pg(Ce(R)))};var Cf=Pg(Ce()),uf=[],Sk=0,Wf,Aj;uf.call=Pe.call;
uf.empty=Pe.empty;uf.node=Pe.node;uf.size=Pe.size;Db.transition=function(R,ha){return R&&R.transition?Wf?R.transition(ha):R:Db.selection().transition(R)};Db.transition.prototype=uf;uf.select=function(R){var ha=this.id,ta=this.namespace,za=[],Aa,Da,Qa;R=L(R);for(var Ja=-1,Ra=this.length;++Ja<Ra;){za.push(Aa=[]);for(var Wa=this[Ja],db=-1,ob=Wa.length;++db<ob;)(Qa=Wa[db])&&(Da=R.call(Qa,Qa.__data__,db,Ja))?("__data__"in Qa&&(Da.__data__=Qa.__data__),Ie(Da,db,ta,ha,Qa[ta][ha]),Aa.push(Da)):Aa.push(null)}return Ei(za,
ta,ha)};uf.selectAll=function(R){var ha=this.id,ta=this.namespace,za=[],Aa,Da;R=K(R);for(var Qa=-1,Ja=this.length;++Qa<Ja;)for(var Ra=this[Qa],Wa=-1,db=Ra.length;++Wa<db;)if(Aa=Ra[Wa]){var ob=Aa[ta][ha];var xb=R.call(Aa,Aa.__data__,Wa,Qa);za.push(Aa=[]);for(var Cb=-1,Eb=xb.length;++Cb<Eb;)(Da=xb[Cb])&&Ie(Da,Cb,ta,ha,ob),Aa.push(Da)}return Ei(za,ta,ha)};uf.filter=function(R){var ha=[],ta,za;"function"!==typeof R&&(R=X(R));for(var Aa=0,Da=this.length;Aa<Da;Aa++){ha.push(ta=[]);var Qa=this[Aa];for(var Ja=
0,Ra=Qa.length;Ja<Ra;Ja++)(za=Qa[Ja])&&R.call(za,za.__data__,Ja,Aa)&&ta.push(za)}return Ei(ha,this.namespace,this.id)};uf.tween=function(R,ha){var ta=this.id,za=this.namespace;return 2>arguments.length?this.node()[za][ta].tween.get(R):ca(this,null==ha?function(Aa){Aa[za][ta].tween.remove(R)}:function(Aa){Aa[za][ta].tween.set(R,ha)})};uf.attr=function(R,ha){function ta(){this.removeAttribute(Ja)}function za(){this.removeAttributeNS(Ja.space,Ja.local)}function Aa(Ra){return null==Ra?ta:(Ra+="",function(){var Wa=
this.getAttribute(Ja),db;return Wa!==Ra&&(db=Qa(Wa,Ra),function(ob){this.setAttribute(Ja,db(ob))})})}function Da(Ra){return null==Ra?za:(Ra+="",function(){var Wa=this.getAttributeNS(Ja.space,Ja.local),db;return Wa!==Ra&&(db=Qa(Wa,Ra),function(ob){this.setAttributeNS(Ja.space,Ja.local,db(ob))})})}if(2>arguments.length){for(ha in R)this.attr(ha,R[ha]);return this}var Qa="transform"==R?dg:xh,Ja=Db.ns.qualify(R);return Vf(this,"attr."+R,ha,Ja.local?Da:Aa)};uf.attrTween=function(R,ha){function ta(Da,Qa){var Ja=
ha.call(this,Da,Qa,this.getAttribute(Aa));return Ja&&function(Ra){this.setAttribute(Aa,Ja(Ra))}}function za(Da,Qa){var Ja=ha.call(this,Da,Qa,this.getAttributeNS(Aa.space,Aa.local));return Ja&&function(Ra){this.setAttributeNS(Aa.space,Aa.local,Ja(Ra))}}var Aa=Db.ns.qualify(R);return this.tween("attr."+R,Aa.local?za:ta)};uf.style=function(R,ha,ta){function za(){this.style.removeProperty(R)}var Aa=arguments.length;if(3>Aa){if("string"!==typeof R){2>Aa&&(ha="");for(ta in R)this.style(ta,R[ta],ha);return this}ta=
""}return Vf(this,"style."+R,ha,function(Da){return null==Da?za:(Da+="",function(){var Qa=r(this).getComputedStyle(this,null).getPropertyValue(R),Ja;return Qa!==Da&&(Ja=xh(Qa,Da),function(Ra){this.style.setProperty(R,Ja(Ra),ta)})})})};uf.styleTween=function(R,ha,ta){3>arguments.length&&(ta="");return this.tween("style."+R,function(za,Aa){var Da=ha.call(this,za,Aa,r(this).getComputedStyle(this,null).getPropertyValue(R));return Da&&function(Qa){this.style.setProperty(R,Da(Qa),ta)}})};uf.text=function(R){return Vf(this,
"text",R,Af)};uf.remove=function(){var R=this.namespace;return this.each("end.transition",function(){var ha;2>this[R].count&&(ha=this.parentNode)&&ha.removeChild(this)})};uf.ease=function(R){var ha=this.id,ta=this.namespace;if(1>arguments.length)return this.node()[ta][ha].ease;"function"!==typeof R&&(R=Db.ease.apply(Db,arguments));return ca(this,function(za){za[ta][ha].ease=R})};uf.delay=function(R){var ha=this.id,ta=this.namespace;return 1>arguments.length?this.node()[ta][ha].delay:ca(this,"function"===
typeof R?function(za,Aa,Da){za[ta][ha].delay=+R.call(za,za.__data__,Aa,Da)}:(R=+R,function(za){za[ta][ha].delay=R}))};uf.duration=function(R){var ha=this.id,ta=this.namespace;return 1>arguments.length?this.node()[ta][ha].duration:ca(this,"function"===typeof R?function(za,Aa,Da){za[ta][ha].duration=Math.max(1,R.call(za,za.__data__,Aa,Da))}:(R=Math.max(1,R),function(za){za[ta][ha].duration=R}))};uf.each=function(R,ha){var ta=this.id,za=this.namespace;if(2>arguments.length){var Aa=Aj,Da=Wf;try{Wf=ta,
ca(this,function(Qa,Ja,Ra){Aj=Qa[za][ta];R.call(Qa,Qa.__data__,Ja,Ra)})}finally{Aj=Aa,Wf=Da}}else ca(this,function(Qa){Qa=Qa[za][ta];(Qa.event||(Qa.event=Db.dispatch("start","end","interrupt"))).on(R,ha)});return this};uf.transition=function(){for(var R=this.id,ha=++Sk,ta=this.namespace,za=[],Aa,Da,Qa,Ja,Ra=0,Wa=this.length;Ra<Wa;Ra++){za.push(Aa=[]);Da=this[Ra];for(var db=0,ob=Da.length;db<ob;db++){if(Qa=Da[db])Ja=Qa[ta][R],Ie(Qa,db,ta,ha,{time:Ja.time,ease:Ja.ease,delay:Ja.delay+Ja.duration,duration:Ja.duration});
Aa.push(Qa)}}return Ei(za,ta,ha)};Db.svg.axis=function(){function R(Wa){Wa.each(function(){var db=Db.select(this),ob=this.__chart__||ha,xb=this.__chart__=ha.copy(),Cb=null==Ja?xb.ticks?xb.ticks.apply(xb,Qa):xb.domain():Ja,Eb=null==Ra?xb.tickFormat?xb.tickFormat.apply(xb,Qa):y:Ra,Qb=db.selectAll(".tick").data(Cb,xb);Cb=Qb.enter().insert("g",".domain").attr("class","tick").style("opacity",1E-6);var Xb=Db.transition(Qb.exit()).style("opacity",1E-6).remove(),fc=Db.transition(Qb.order()).style("opacity",
1),uc=Math.max(za,0)+Da,zc=hg(xb);db=db.selectAll(".domain").data([0]);db=(db.enter().append("path").attr("class","domain"),Db.transition(db));Cb.append("line");Cb.append("text");var Ec=Cb.select("line"),Qc=fc.select("line");Qb=Qb.select("text").text(Eb);var Nb=Cb.select("text"),Zb=fc.select("text"),wc="top"===ta||"left"===ta?-1:1;if("bottom"===ta||"top"===ta){Eb=Qg;var Xc="x";var Zc="y";var cd="x2";var Oc="y2";Qb.attr("dy",0>wc?"0em":".71em").style("text-anchor","middle");db.attr("d","M"+zc[0]+","+
wc*Aa+"V0H"+zc[1]+"V"+wc*Aa)}else Eb=bf,Xc="y",Zc="x",cd="y2",Oc="x2",Qb.attr("dy",".32em").style("text-anchor",0>wc?"end":"start"),db.attr("d","M"+wc*Aa+","+zc[0]+"H0V"+zc[1]+"H"+wc*Aa);Ec.attr(Oc,wc*za);Nb.attr(Zc,wc*uc);Qc.attr(cd,0).attr(Oc,wc*za);Zb.attr(Xc,0).attr(Zc,wc*uc);if(xb.rangeBand){var Ed=xb,Nd=Ed.rangeBand()/2;ob=xb=function($d){return Ed($d)+Nd}}else ob.rangeBand?ob=xb:Xb.call(Eb,xb,ob);Cb.call(Eb,ob,xb);fc.call(Eb,xb,xb)})}var ha=Db.scale.linear(),ta=cj,za=6,Aa=6,Da=3,Qa=[10],Ja=
null,Ra;R.scale=function(Wa){if(!arguments.length)return ha;ha=Wa;return R};R.orient=function(Wa){if(!arguments.length)return ta;ta=Wa in Yf?Wa+"":cj;return R};R.ticks=function(){if(!arguments.length)return Qa;Qa=Kg(arguments);return R};R.tickValues=function(Wa){if(!arguments.length)return Ja;Ja=Wa;return R};R.tickFormat=function(Wa){if(!arguments.length)return Ra;Ra=Wa;return R};R.tickSize=function(Wa){var db=arguments.length;if(!db)return za;za=+Wa;Aa=+arguments[db-1];return R};R.innerTickSize=
function(Wa){if(!arguments.length)return za;za=+Wa;return R};R.outerTickSize=function(Wa){if(!arguments.length)return Aa;Aa=+Wa;return R};R.tickPadding=function(Wa){if(!arguments.length)return Da;Da=+Wa;return R};R.tickSubdivide=function(){return arguments.length&&R};return R};var cj="bottom",Yf={top:1,right:1,bottom:1,left:1};Db.svg.brush=function(){function R(Qb){Qb.each(function(){var Xb=Db.select(this).style("pointer-events","all").style("-webkit-tap-highlight-color","rgba(0,0,0,0)").on("mousedown.brush",
Aa).on("touchstart.brush",Aa),fc=Xb.selectAll(".background").data([0]);fc.enter().append("rect").attr("class","background").style("visibility","hidden").style("cursor","crosshair");Xb.selectAll(".extent").data([0]).enter().append("rect").attr("class","extent").style("cursor","move");var uc=Xb.selectAll(".resize").data(Eb,y);uc.exit().remove();uc.enter().append("g").attr("class",function(zc){return"resize "+zc}).style("cursor",function(zc){return Rj[zc]}).append("rect").attr("x",function(zc){return/[ew]$/.test(zc)?
-3:null}).attr("y",function(zc){return/^[ns]/.test(zc)?-3:null}).attr("width",6).attr("height",6).style("visibility","hidden");uc.style("display",R.empty()?"none":null);Xb=Db.transition(Xb);fc=Db.transition(fc);Qa&&(uc=hg(Qa),fc.attr("x",uc[0]).attr("width",uc[1]-uc[0]),ta(Xb));Ja&&(uc=hg(Ja),fc.attr("y",uc[0]).attr("height",uc[1]-uc[0]),za(Xb));ha(Xb)})}function ha(Qb){Qb.selectAll(".resize").attr("transform",function(Xb){return"translate("+Ra[+/e$/.test(Xb)]+","+Wa[+/^s/.test(Xb)]+")"})}function ta(Qb){Qb.select(".extent").attr("x",
Ra[0]);Qb.selectAll(".extent,.n\x3erect,.s\x3erect").attr("width",Ra[1]-Ra[0])}function za(Qb){Qb.select(".extent").attr("y",Wa[0]);Qb.selectAll(".extent,.e\x3erect,.w\x3erect").attr("height",Wa[1]-Wa[0])}function Aa(){function Qb(){var me=Db.mouse(uc),ke=!1;$d&&(me[0]+=$d[0],me[1]+=$d[1]);Xc||(Db.event.altKey?(cd||(cd=[(Ra[0]+Ra[1])/2,(Wa[0]+Wa[1])/2]),Oc[0]=Ra[+(me[0]<cd[0])],Oc[1]=Wa[+(me[1]<cd[1])]):cd=null);Zb&&Xb(me,Qa,0)&&(ta(Qc),ke=!0);wc&&Xb(me,Ja,1)&&(za(Qc),ke=!0);ke&&(ha(Qc),Ec({type:"brush",
mode:Xc?"move":"resize"}))}function Xb(me,ke,te){var Sd=hg(ke);ke=Sd[0];var Ff=Sd[1];Sd=Oc[te];var gf=te?Wa:Ra,ne=gf[1]-gf[0];Xc&&(ke-=Sd,Ff-=ne+Sd);me=(te?Cb:xb)?Math.max(ke,Math.min(Ff,me[te])):me[te];Xc?ke=(me+=Sd)+ne:(cd&&(Sd=Math.max(ke,Math.min(Ff,2*cd[te]-me))),Sd<me?(ke=me,me=Sd):ke=Sd);if(gf[0]!=me||gf[1]!=ke)return te?ob=null:db=null,gf[0]=me,gf[1]=ke,!0}function fc(){Qb();Qc.style("pointer-events","all").selectAll(".resize").style("display",R.empty()?"none":null);Db.select("body").style("cursor",
null);Ed.on("mousemove.brush",null).on("mouseup.brush",null).on("touchmove.brush",null).on("touchend.brush",null).on("keydown.brush",null).on("keyup.brush",null);Zc();Ec({type:"brushend"})}var uc=this,zc=Db.select(Db.event.target),Ec=Da.of(uc,arguments),Qc=Db.select(uc),Nb=zc.datum(),Zb=!/^(n|s)$/.test(Nb)&&Qa,wc=!/^(e|w)$/.test(Nb)&&Ja,Xc=zc.classed("extent"),Zc=sa(uc),cd,Oc=Db.mouse(uc),Ed=Db.select(r(uc)).on("keydown.brush",function(){32==Db.event.keyCode&&(Xc||(cd=null,Oc[0]-=Ra[1],Oc[1]-=Wa[1],
Xc=2),u())}).on("keyup.brush",function(){32==Db.event.keyCode&&2==Xc&&(Oc[0]+=Ra[1],Oc[1]+=Wa[1],Xc=0,u())});if(Db.event.changedTouches)Ed.on("touchmove.brush",Qb).on("touchend.brush",fc);else Ed.on("mousemove.brush",Qb).on("mouseup.brush",fc);Qc.interrupt().selectAll("*").interrupt();if(Xc)Oc[0]=Ra[0]-Oc[0],Oc[1]=Wa[0]-Oc[1];else if(Nb){var Nd=+/w$/.test(Nb);Nb=+/^n/.test(Nb);var $d=[Ra[1-Nd]-Oc[0],Wa[1-Nb]-Oc[1]];Oc[0]=Ra[Nd];Oc[1]=Wa[Nb]}else Db.event.altKey&&(cd=Oc.slice());Qc.style("pointer-events",
"none").selectAll(".resize").style("display",null);Db.select("body").style("cursor",zc.style("cursor"));Ec({type:"brushstart"});Qb()}var Da=G(R,"brushstart","brush","brushend"),Qa=null,Ja=null,Ra=[0,0],Wa=[0,0],db,ob,xb=!0,Cb=!0,Eb=fi[0];R.event=function(Qb){Qb.each(function(){var Xb=Da.of(this,arguments),fc={x:Ra,y:Wa,i:db,j:ob},uc=this.__chart__||fc;this.__chart__=fc;Wf?Db.select(this).transition().each("start.brush",function(){db=uc.i;ob=uc.j;Ra=uc.x;Wa=uc.y;Xb({type:"brushstart"})}).tween("brush:brush",
function(){var zc=Si(Ra,fc.x),Ec=Si(Wa,fc.y);db=ob=null;return function(Qc){Ra=fc.x=zc(Qc);Wa=fc.y=Ec(Qc);Xb({type:"brush",mode:"resize"})}}).each("end.brush",function(){db=fc.i;ob=fc.j;Xb({type:"brush",mode:"resize"});Xb({type:"brushend"})}):(Xb({type:"brushstart"}),Xb({type:"brush",mode:"resize"}),Xb({type:"brushend"}))})};R.x=function(Qb){if(!arguments.length)return Qa;Qa=Qb;Eb=fi[!Qa<<1|!Ja];return R};R.y=function(Qb){if(!arguments.length)return Ja;Ja=Qb;Eb=fi[!Qa<<1|!Ja];return R};R.clamp=function(Qb){if(!arguments.length)return Qa&&
Ja?[xb,Cb]:Qa?xb:Ja?Cb:null;Qa&&Ja?(xb=!!Qb[0],Cb=!!Qb[1]):Qa?xb=!!Qb:Ja&&(Cb=!!Qb);return R};R.extent=function(Qb){if(!arguments.length){if(Qa)if(db){var Xb=db[0];var fc=db[1]}else if(Xb=Ra[0],fc=Ra[1],Qa.invert&&(Xb=Qa.invert(Xb),fc=Qa.invert(fc)),fc<Xb){var uc=Xb;Xb=fc;fc=uc}if(Ja)if(ob){var zc=ob[0];var Ec=ob[1]}else zc=Wa[0],Ec=Wa[1],Ja.invert&&(zc=Ja.invert(zc),Ec=Ja.invert(Ec)),Ec<zc&&(uc=zc,zc=Ec,Ec=uc);return Qa&&Ja?[[Xb,zc],[fc,Ec]]:Qa?[Xb,fc]:Ja&&[zc,Ec]}Qa&&(Xb=Qb[0],fc=Qb[1],Ja&&(Xb=
Xb[0],fc=fc[0]),db=[Xb,fc],Qa.invert&&(Xb=Qa(Xb),fc=Qa(fc)),fc<Xb&&(uc=Xb,Xb=fc,fc=uc),Xb!=Ra[0]||fc!=Ra[1])&&(Ra=[Xb,fc]);Ja&&(zc=Qb[0],Ec=Qb[1],Qa&&(zc=zc[1],Ec=Ec[1]),ob=[zc,Ec],Ja.invert&&(zc=Ja(zc),Ec=Ja(Ec)),Ec<zc&&(uc=zc,zc=Ec,Ec=uc),zc!=Wa[0]||Ec!=Wa[1])&&(Wa=[zc,Ec]);return R};R.clear=function(){R.empty()||(Ra=[0,0],Wa=[0,0],db=ob=null);return R};R.empty=function(){return!!Qa&&Ra[0]==Ra[1]||!!Ja&&Wa[0]==Wa[1]};return Db.rebind(R,Da,"on")};var Rj={n:"ns-resize",e:"ew-resize",s:"ns-resize",
w:"ew-resize",nw:"nwse-resize",ne:"nesw-resize",se:"nwse-resize",sw:"nesw-resize"},fi=["n e s w nw ne se sw".split(" "),["e","w"],["n","s"],[]],Bj=Hd.format=rh.timeFormat,Dk=Bj.utc,Sj=Dk("%Y-%m-%dT%H:%M:%S.%LZ");Bj.iso=Date.prototype.toISOString&&+new Date("2000-01-01T00:00:00.000Z")?Fg:Sj;Fg.parse=function(R){R=new Date(R);return isNaN(R)?null:R};Fg.toString=Sj.toString;Hd.second=Kb(function(R){return new Ef(1E3*Math.floor(R/1E3))},function(R,ha){R.setTime(R.getTime()+1E3*Math.floor(ha))},function(R){return R.getSeconds()});
Hd.seconds=Hd.second.range;Hd.seconds.utc=Hd.second.utc.range;Hd.minute=Kb(function(R){return new Ef(6E4*Math.floor(R/6E4))},function(R,ha){R.setTime(R.getTime()+6E4*Math.floor(ha))},function(R){return R.getMinutes()});Hd.minutes=Hd.minute.range;Hd.minutes.utc=Hd.minute.utc.range;Hd.hour=Kb(function(R){var ha=R.getTimezoneOffset()/60;return new Ef(36E5*(Math.floor(R/36E5-ha)+ha))},function(R,ha){R.setTime(R.getTime()+36E5*Math.floor(ha))},function(R){return R.getHours()});Hd.hours=Hd.hour.range;Hd.hours.utc=
Hd.hour.utc.range;Hd.month=Kb(function(R){R=Hd.day(R);R.setDate(1);return R},function(R,ha){R.setMonth(R.getMonth()+ha)},function(R){return R.getMonth()});Hd.months=Hd.month.range;Hd.months.utc=Hd.month.utc.range;var oh=[1E3,5E3,15E3,3E4,6E4,3E5,9E5,18E5,36E5,108E5,216E5,432E5,864E5,1728E5,6048E5,2592E6,7776E6,31536E6],dj=[[Hd.second,1],[Hd.second,5],[Hd.second,15],[Hd.second,30],[Hd.minute,1],[Hd.minute,5],[Hd.minute,15],[Hd.minute,30],[Hd.hour,1],[Hd.hour,3],[Hd.hour,6],[Hd.hour,12],[Hd.day,1],
[Hd.day,2],[Hd.week,1],[Hd.month,1],[Hd.month,3],[Hd.year,1]],ik=Bj.multi([[".%L",function(R){return R.getMilliseconds()}],[":%S",function(R){return R.getSeconds()}],["%I:%M",function(R){return R.getMinutes()}],["%I %p",function(R){return R.getHours()}],["%a %d",function(R){return R.getDay()&&1!=R.getDate()}],["%b %d",function(R){return 1!=R.getDate()}],["%B",function(R){return R.getMonth()}],["%Y",Bd]]),Gg={range:function(R,ha,ta){return Db.range(Math.ceil(R/ta)*ta,+ha,ta).map(of)},floor:y,ceil:y};
dj.year=Hd.year;Hd.scale=function(){return jg(Db.scale.linear(),dj,ik)};var Eh=dj.map(function(R){return[R[0].utc,R[1]]}),jk=Dk.multi([[".%L",function(R){return R.getUTCMilliseconds()}],[":%S",function(R){return R.getUTCSeconds()}],["%I:%M",function(R){return R.getUTCMinutes()}],["%I %p",function(R){return R.getUTCHours()}],["%a %d",function(R){return R.getUTCDay()&&1!=R.getUTCDate()}],["%b %d",function(R){return 1!=R.getUTCDate()}],["%B",function(R){return R.getUTCMonth()}],["%Y",Bd]]);Eh.year=Hd.year.utc;
Hd.scale.utc=function(){return jg(Db.scale.linear(),Eh,jk)};Db.text=ib(function(R){return R.responseText});Db.json=function(R,ha){return qb(R,"application/json",pj,ha)};Db.html=function(R,ha){return qb(R,"text/html",Zh,ha)};Db.xml=ib(function(R){return R.responseXML});"object"===typeof N&&N.exports?N.exports=Db:this.d3=Db}()},{}],170:[function(b,N,I){N.exports=function(){for(var r=0;r<arguments.length;r++)if(void 0!==arguments[r])return arguments[r]}},{}],171:[function(b,N,I){function r(h,g){this.point=
h;this.index=g}function q(h,g){h=h.point;g=g.point;for(var n=h.length,p=0;p<n;++p){var d=g[p]-h[p];if(d)return d}return 0}function m(h,g,n){if(1===h)return n?[[-1,0]]:[];g=g.map(function(e,f){return[e[0],f]});g.sort(function(e,f){return e[0]-f[0]});for(var p=Array(h-1),d=1;d<h;++d)p[d-1]=[g[d-1][1],g[d][1]];n&&p.push([-1,p[0][1]],[p[h-1][1],-1]);return p}var l=b("incremental-convex-hull"),a=b("uniq");N.exports=function(h,g){var n=h.length;if(0===n)return[];var p=h[0].length;if(1>p)return[];if(1===
p)return m(n,h,g);for(var d=Array(n),e=1,f=0;f<n;++f){for(var k=h[f],t=Array(p+1),v=0,w=0;w<p;++w){var y=k[w];t[w]=y;v+=y*y}t[p]=v;d[f]=new r(t,f);e=Math.max(v,e)}a(d,q);n=d.length;h=Array(n+p+1);var B=Array(n+p+1);k=Array(p+1);for(f=0;f<=p;++f)k[f]=0;k[p]=(p+1)*(p+1)*e;h[0]=k.slice();B[0]=-1;for(f=0;f<=p;++f)t=k.slice(),t[f]=1,h[f+1]=t,B[f+1]=-1;for(f=0;f<n;++f)e=d[f],h[f+p+1]=e.point,B[f+p+1]=e.index;n=l(h,!1);n=g?n.filter(function(A){for(var z=0,E=0;E<=p;++E){var C=B[A[E]];if(0>C&&2<=++z)return!1;
A[E]=C}return!0}):n.filter(function(A){for(var z=0;z<=p;++z){var E=B[A[z]];if(0>E)return!1;A[z]=E}return!0});if(p&1)for(f=0;f<n.length;++f)e=n[f],t=e[0],e[0]=e[1],e[1]=t;return n}},{"incremental-convex-hull":459,uniq:597}],172:[function(b,N,I){function r(a,h){Array.isArray(a)&&(a=a.join(", "));var g={},n=16,p=.05;if(h)if(2===h.length&&"number"===typeof h[0])var d=q(h);else Array.isArray(h)?d=h:(h.o?d=q(h.o):h.pairs&&(d=h.pairs),h.fontSize&&(n=h.fontSize),null!=h.threshold&&(p=h.threshold));d||(d=
l);m.font=n+"px "+a;for(a=0;a<d.length;a++){h=d[a];var e=m.measureText(h[0]).width+m.measureText(h[1]).width,f=m.measureText(h).width;Math.abs(e-f)>n*p&&(g[h]=(f-e)/n*1E3)}return g}function q(a){for(var h=[],g=a[0];g<=a[1];g++)for(var n=String.fromCharCode(g),p=a[0];p<a[1];p++){var d=String.fromCharCode(p);h.push(n+d)}return h}N.exports=r;var m=(r.canvas=document.createElement("canvas")).getContext("2d"),l=q([32,126]);r.createPairs=q;r.ascii=l},{}],173:[function(b,N,I){(function(r){(function(){var q=
!1;if("undefined"!==typeof Float64Array){var m=new Float64Array(1),l=new Uint32Array(m.buffer);m[0]=1;q=!0;1072693248===l[1]?(N.exports=function(h){m[0]=h;return[l[0],l[1]]},N.exports.pack=function(h,g){l[0]=h;l[1]=g;return m[0]},N.exports.lo=function(h){m[0]=h;return l[0]},N.exports.hi=function(h){m[0]=h;return l[1]}):1072693248===l[0]?(N.exports=function(h){m[0]=h;return[l[1],l[0]]},N.exports.pack=function(h,g){l[1]=h;l[0]=g;return m[0]},N.exports.lo=function(h){m[0]=h;return l[1]},N.exports.hi=
function(h){m[0]=h;return l[0]}):q=!1}if(!q){var a=new r(8);N.exports=function(h){a.writeDoubleLE(h,0,!0);return[a.readUInt32LE(0,!0),a.readUInt32LE(4,!0)]};N.exports.pack=function(h,g){a.writeUInt32LE(h,0,!0);a.writeUInt32LE(g,4,!0);return a.readDoubleLE(0,!0)};N.exports.lo=function(h){a.writeDoubleLE(h,0,!0);return a.readUInt32LE(0,!0)};N.exports.hi=function(h){a.writeDoubleLE(h,0,!0);return a.readUInt32LE(4,!0)}}N.exports.sign=function(h){return N.exports.hi(h)>>>31};N.exports.exponent=function(h){return(N.exports.hi(h)<<
1>>>21)-1023};N.exports.fraction=function(h){var g=N.exports.lo(h);h=N.exports.hi(h);var n=h&1048575;h&2146435072&&(n+=1048576);return[g,n]};N.exports.denormalized=function(h){return!(N.exports.hi(h)&2146435072)}}).call(this)}).call(this,b("buffer").Buffer)},{buffer:111}],174:[function(b,N,I){var r=b("abs-svg-path"),q=b("normalize-svg-path"),m={M:"moveTo",C:"bezierCurveTo"};N.exports=function(l,a){l.beginPath();q(r(a)).forEach(function(h){var g=h[0];h=h.slice(1);l[m[g]].apply(l,h)});l.closePath()}},
{"abs-svg-path":65,"normalize-svg-path":497}],175:[function(b,N,I){N.exports=function(r){switch(r){case "int8":return Int8Array;case "int16":return Int16Array;case "int32":return Int32Array;case "uint8":return Uint8Array;case "uint16":return Uint16Array;case "uint32":return Uint32Array;case "float32":return Float32Array;case "float64":return Float64Array;case "array":return Array;case "uint8_clamped":return Uint8ClampedArray}}},{}],176:[function(b,N,I){function r(q,m,l){var a=q[l]|0;if(0>=a)return[];
var h=Array(a),g;if(l===q.length-1)for(g=0;g<a;++g)h[g]=m;else for(g=0;g<a;++g)h[g]=r(q,m,l+1);return h}N.exports=function(q,m){"undefined"===typeof m&&(m=0);switch(typeof q){case "number":if(0<q){q|=0;var l;var a=Array(q);for(l=0;l<q;++l)a[l]=m;return a}break;case "object":if("number"===typeof q.length)return r(q,m,0)}return[]}},{}],177:[function(b,N,I){function r(E,C,u){u=u||2;var D=C&&C.length,G=D?C[0]*u:E.length,J=q(E,0,G,u,!0),L=[];if(!J||J.next===J.prev)return L;var K;if(D){var H=u;D=[];var Q;
var M=0;for(Q=C.length;M<Q;M++){var P=C[M]*H;var T=M<Q-1?C[M+1]*H:E.length;P=q(E,P,T,H,!1);P===P.next&&(P.steiner=!0);T=D;var O=T.push,U=P,S=P;do{if(U.x<S.x||U.x===S.x&&U.y<S.y)S=U;U=U.next}while(U!==P);O.call(T,S)}D.sort(h);for(M=0;M<D.length;M++){H=D[M];C=J;if(C=g(H,C))H=w(C,H),m(C,C.next),m(H,H.next);J=m(J,J.next)}}if(E.length>80*u){var X=K=E[0];var ba=D=E[1];for(H=u;H<G;H+=u)M=E[H],C=E[H+1],M<X&&(X=M),C<ba&&(ba=C),M>K&&(K=M),C>D&&(D=C);K=Math.max(K-X,D-ba);K=0!==K?1/K:0}l(J,L,u,X,ba,K);return L}
function q(E,C,u,D,G){if(G===0<z(E,C,u,D))for(G=C;G<u;G+=D)var J=y(G,E[G],E[G+1],J);else for(G=u-D;G>=C;G-=D)J=y(G,E[G],E[G+1],J);J&&e(J,J.next)&&(B(J),J=J.next);return J}function m(E,C){if(!E)return E;C||(C=E);do{var u=!1;if(E.steiner||!e(E,E.next)&&0!==d(E.prev,E,E.next))E=E.next;else{B(E);E=C=E.prev;if(E===E.next)break;u=!0}}while(u||E!==C);return C}function l(E,C,u,D,G,J,L){if(E){if(!L&&J){var K=E,H=K;do null===H.z&&(H.z=n(H.x,H.y,D,G,J)),H.prevZ=H.prev,H=H.nextZ=H.next;while(H!==K);H.prevZ.nextZ=
null;H.prevZ=null;K=H;var Q,M,P,T,O=1;do{H=K;var U=K=null;for(M=0;H;){M++;var S=H;for(Q=P=0;Q<O&&(P++,S=S.nextZ,S);Q++);for(T=O;0<P||0<T&&S;)0!==P&&(0===T||!S||H.z<=S.z)?(Q=H,H=H.nextZ,P--):(Q=S,S=S.nextZ,T--),U?U.nextZ=Q:K=Q,Q.prevZ=U,U=Q;H=S}U.nextZ=null;O*=2}while(1<M)}for(K=E;E.prev!==E.next;){H=E.prev;S=E.next;if(J)U=a(E,D,G,J);else a:if(U=E,M=U.prev,P=U,O=U.next,0<=d(M,P,O))U=!1;else{for(Q=U.next.next;Q!==U.prev;){if(p(M.x,M.y,P.x,P.y,O.x,O.y,Q.x,Q.y)&&0<=d(Q.prev,Q,Q.next)){U=!1;break a}Q=
Q.next}U=!0}if(U)C.push(H.i/u),C.push(E.i/u),C.push(S.i/u),B(E),K=E=S.next;else if(E=S,E===K){if(!L)l(m(E),C,u,D,G,J,1);else if(1===L){E=m(E);L=C;K=u;H=E;do S=H.prev,U=H.next.next,!e(S,U)&&f(S,H,H.next,U)&&v(S,U)&&v(U,S)&&(L.push(S.i/K),L.push(H.i/K),L.push(U.i/K),B(H),B(H.next),H=E=U),H=H.next;while(H!==E);E=m(H);l(E,C,u,D,G,J,2)}else if(2===L)a:{L=E;do{for(K=L.next.next;K!==L.prev;){if(H=L.i!==K.i){H=L;S=K;if(U=H.next.i!==S.i&&H.prev.i!==S.i){b:{U=H;do{if(U.i!==H.i&&U.next.i!==H.i&&U.i!==S.i&&U.next.i!==
S.i&&f(U,U.next,H,S)){U=!0;break b}U=U.next}while(U!==H);U=!1}U=!U}if(U){if(U=v(H,S)&&v(S,H)){U=H;M=!1;P=(H.x+S.x)/2;O=(H.y+S.y)/2;do U.y>O!==U.next.y>O&&U.next.y!==U.y&&P<(U.next.x-U.x)*(O-U.y)/(U.next.y-U.y)+U.x&&(M=!M),U=U.next;while(U!==H);U=M}U=U&&(d(H.prev,H,S.prev)||d(H,S.prev,S))||e(H,S)&&0<d(H.prev,H,H.next)&&0<d(S.prev,S,S.next)}H=U}if(H){E=w(L,K);L=m(L,L.next);E=m(E,E.next);l(L,C,u,D,G,J);l(E,C,u,D,G,J);break a}K=K.next}L=L.next}while(L!==E)}break}}}}function a(E,C,u,D){var G=E.prev,J=
E.next;if(0<=d(G,E,J))return!1;var L=G.x>E.x?G.x>J.x?G.x:J.x:E.x>J.x?E.x:J.x,K=G.y>E.y?G.y>J.y?G.y:J.y:E.y>J.y?E.y:J.y,H=n(G.x<E.x?G.x<J.x?G.x:J.x:E.x<J.x?E.x:J.x,G.y<E.y?G.y<J.y?G.y:J.y:E.y<J.y?E.y:J.y,C,u,D);C=n(L,K,C,u,D);u=E.prevZ;for(D=E.nextZ;u&&u.z>=H&&D&&D.z<=C;){if(u!==E.prev&&u!==E.next&&p(G.x,G.y,E.x,E.y,J.x,J.y,u.x,u.y)&&0<=d(u.prev,u,u.next))return!1;u=u.prevZ;if(D!==E.prev&&D!==E.next&&p(G.x,G.y,E.x,E.y,J.x,J.y,D.x,D.y)&&0<=d(D.prev,D,D.next))return!1;D=D.nextZ}for(;u&&u.z>=H;){if(u!==
E.prev&&u!==E.next&&p(G.x,G.y,E.x,E.y,J.x,J.y,u.x,u.y)&&0<=d(u.prev,u,u.next))return!1;u=u.prevZ}for(;D&&D.z<=C;){if(D!==E.prev&&D!==E.next&&p(G.x,G.y,E.x,E.y,J.x,J.y,D.x,D.y)&&0<=d(D.prev,D,D.next))return!1;D=D.nextZ}return!0}function h(E,C){return E.x-C.x}function g(E,C){var u=C,D=E.x,G=E.y,J=-Infinity;do{if(G<=u.y&&G>=u.next.y&&u.next.y!==u.y){var L=u.x+(G-u.y)*(u.next.x-u.x)/(u.next.y-u.y);if(L<=D&&L>J){J=L;if(L===D){if(G===u.y)return u;if(G===u.next.y)return u.next}var K=u.x<u.next.x?u:u.next}}u=
u.next}while(u!==C);if(!K)return null;if(D===J)return K;C=K;L=K.x;var H=K.y,Q=Infinity;u=K;do{if(D>=u.x&&u.x>=L&&D!==u.x&&p(G<H?D:J,G,L,H,G<H?J:D,G,u.x,u.y)){var M=Math.abs(G-u.y)/(D-u.x);var P;if((P=v(u,E))&&!(P=M<Q)&&(P=M===Q)&&!(P=u.x>K.x)&&(P=u.x===K.x)){P=K;var T=u;P=0>d(P.prev,P,T.prev)&&0>d(T.next,P,P.next)}P&&(K=u,Q=M)}u=u.next}while(u!==C);return K}function n(E,C,u,D,G){E=32767*(E-u)*G;C=32767*(C-D)*G;E=(E|E<<8)&16711935;E=(E|E<<4)&252645135;E=(E|E<<2)&858993459;C=(C|C<<8)&16711935;C=(C|
C<<4)&252645135;C=(C|C<<2)&858993459;return(E|E<<1)&1431655765|((C|C<<1)&1431655765)<<1}function p(E,C,u,D,G,J,L,K){return 0<=(G-L)*(C-K)-(E-L)*(J-K)&&0<=(E-L)*(D-K)-(u-L)*(C-K)&&0<=(u-L)*(J-K)-(G-L)*(D-K)}function d(E,C,u){return(C.y-E.y)*(u.x-C.x)-(C.x-E.x)*(u.y-C.y)}function e(E,C){return E.x===C.x&&E.y===C.y}function f(E,C,u,D){var G=t(d(E,C,u)),J=t(d(E,C,D)),L=t(d(u,D,E)),K=t(d(u,D,C));return G!==J&&L!==K||0===G&&k(E,u,C)||0===J&&k(E,D,C)||0===L&&k(u,E,D)||0===K&&k(u,C,D)?!0:!1}function k(E,
C,u){return C.x<=Math.max(E.x,u.x)&&C.x>=Math.min(E.x,u.x)&&C.y<=Math.max(E.y,u.y)&&C.y>=Math.min(E.y,u.y)}function t(E){return 0<E?1:0>E?-1:0}function v(E,C){return 0>d(E.prev,E,E.next)?0<=d(E,C,E.next)&&0<=d(E,E.prev,C):0>d(E,C,E.prev)||0>d(E,E.next,C)}function w(E,C){var u=new A(E.i,E.x,E.y),D=new A(C.i,C.x,C.y),G=E.next,J=C.prev;E.next=C;C.prev=E;u.next=G;G.prev=u;D.next=u;u.prev=D;J.next=D;D.prev=J;return D}function y(E,C,u,D){E=new A(E,C,u);D?(E.next=D.next,E.prev=D,D.next.prev=E,D.next=E):
(E.prev=E,E.next=E);return E}function B(E){E.next.prev=E.prev;E.prev.next=E.next;E.prevZ&&(E.prevZ.nextZ=E.nextZ);E.nextZ&&(E.nextZ.prevZ=E.prevZ)}function A(E,C,u){this.i=E;this.x=C;this.y=u;this.nextZ=this.prevZ=this.z=this.next=this.prev=null;this.steiner=!1}function z(E,C,u,D){for(var G=0,J=u-D;C<u;C+=D)G+=(E[J]-E[C])*(E[C+1]+E[J+1]),J=C;return G}N.exports=r;N.exports.default=r;r.deviation=function(E,C,u,D){var G=C&&C.length,J=Math.abs(z(E,0,G?C[0]*u:E.length,u));if(G){G=0;for(var L=C.length;G<
L;G++)J-=Math.abs(z(E,C[G]*u,G<L-1?C[G+1]*u:E.length,u))}for(G=C=0;G<D.length;G+=3){L=D[G]*u;var K=D[G+1]*u,H=D[G+2]*u;C+=Math.abs((E[L]-E[H])*(E[K+1]-E[L+1])-(E[L]-E[K])*(E[H+1]-E[L+1]))}return 0===J&&0===C?0:Math.abs((C-J)/J)};r.flatten=function(E){for(var C=E[0][0].length,u={vertices:[],holes:[],dimensions:C},D=0,G=0;G<E.length;G++){for(var J=0;J<E[G].length;J++)for(var L=0;L<C;L++)u.vertices.push(E[G][J][L]);0<G&&(D+=E[G-1].length,u.holes.push(D))}return u}},{}],178:[function(b,N,I){N.exports=
function(q,m){var l=q.length;if("number"!==typeof m){for(var a=m=0;a<l;++a){var h=q[a];m=Math.max(m,h[0],h[1])}m=(m|0)+1}m|=0;var g=Array(m);for(a=0;a<m;++a)g[a]=[];for(a=0;a<l;++a)h=q[a],g[h[0]].push(h[1]),g[h[1]].push(h[0]);for(q=0;q<m;++q)r(g[q],function(n,p){return n-p});return g};var r=b("uniq")},{uniq:597}],179:[function(b,N,I){var r=b("strongly-connected-components");N.exports=function(q,m){function l(B){d[B]=!1;e.hasOwnProperty(B)&&Object.keys(e[B]).forEach(function(A){delete e[B][A];d[A]&&
l(A)})}function a(B){var A=!1;p.push(B);d[B]=!0;var z;for(z=0;z<f[B].length;z++){var E=f[B][z];E===k?(A=k,A=[].concat(p).concat(A),m?m(a):n.push(A),A=!0):d[E]||(A=a(E))}if(A)l(B);else for(z=0;z<f[B].length;z++){E=f[B][z];var C=e[E];C||(C={},e[E]=C);C[E]=!0}p.pop();return A}function h(B){for(var A=0;A<q.length;A++)A<B&&(q[A]=[]),q[A]=q[A].filter(function(z){return z>=B})}function g(B){h(B);var A=r(q).components.filter(function(D){return 1<D.length});B=Infinity;for(var z,E=0;E<A.length;E++)for(var C=
0;C<A[E].length;C++)A[E][C]<B&&(B=A[E][C],z=E);var u=A[z];if(!u)return!1;z=q.map(function(D,G){return-1===u.indexOf(G)?[]:D.filter(function(J){return-1!==u.indexOf(J)})});return{leastVertex:B,adjList:z}}var n=[],p=[],d=[],e={},f=[];var k=0;for(var t=q.length;k<t;){var v=g(k);k=v.leastVertex;if(f=v.adjList){for(v=0;v<f.length;v++)for(var w=0;w<f[v].length;w++){var y=f[v][w];d[+y]=!1;e[y]={}}a(k);k+=1}else k=t}if(!m)return n}},{"strongly-connected-components":569}],180:[function(b,N,I){var r=b("../../object/valid-value");
N.exports=function(){r(this).length=0;return this}},{"../../object/valid-value":211}],181:[function(b,N,I){N.exports=b("./is-implemented")()?Array.from:b("./shim")},{"./is-implemented":182,"./shim":183}],182:[function(b,N,I){N.exports=function(){var r=Array.from;if("function"!==typeof r)return!1;var q=["raz","dwa"];r=r(q);return!(!r||r===q||"dwa"!==r[1])}},{}],183:[function(b,N,I){var r=b("es6-symbol").iterator,q=b("../../function/is-arguments"),m=b("../../function/is-function"),l=b("../../number/to-pos-integer"),
a=b("../../object/valid-callable"),h=b("../../object/valid-value"),g=b("../../object/is-value"),n=b("../../string/is-string"),p=Array.isArray,d=Function.prototype.call,e={configurable:!0,enumerable:!0,writable:!0,value:null},f=Object.defineProperty;N.exports=function(k,t,v){var w,y;k=Object(h(k));g(t)&&a(t);if(this&&this!==Array&&m(this))var B=this;else{if(!t){if(q(k)){var A=k.length;if(1!==A)return Array.apply(null,k);var z=Array(1);z[0]=k[0];return z}if(p(k)){z=Array(A=k.length);for(w=0;w<A;++w)z[w]=
k[w];return z}}z=[]}if(!p(k))if(void 0!==(w=k[r])){A=a(w).call(k);B&&(z=new B);var E=A.next();for(w=0;!E.done;)E=t?d.call(t,v,E.value,w):E.value,B?(e.value=E,f(z,w,e)):z[w]=E,E=A.next(),++w;A=w}else if(n(k)){A=k.length;B&&(z=new B);for(y=w=0;w<A;++w){E=k[w];if(w+1<A){var C=E.charCodeAt(0);55296<=C&&56319>=C&&(E+=k[++w])}E=t?d.call(t,v,E,y):E;B?(e.value=E,f(z,y,e)):z[y]=E;++y}A=y}if(void 0===A)for(A=l(k.length),B&&(z=new B(A)),w=0;w<A;++w)E=t?d.call(t,v,k[w],w):k[w],B?(e.value=E,f(z,w,e)):z[w]=E;B&&
(e.value=null,z.length=A);return z}},{"../../function/is-arguments":184,"../../function/is-function":185,"../../number/to-pos-integer":191,"../../object/is-value":200,"../../object/valid-callable":209,"../../object/valid-value":211,"../../string/is-string":215,"es6-symbol":225}],184:[function(b,N,I){var r=Object.prototype.toString,q=r.call(function(){return arguments}());N.exports=function(m){return r.call(m)===q}},{}],185:[function(b,N,I){var r=Object.prototype.toString,q=RegExp.prototype.test.bind(/^[object [A-Za-z0-9]*Function]$/);
N.exports=function(m){return"function"===typeof m&&q(r.call(m))}},{}],186:[function(b,N,I){N.exports=function(){}},{}],187:[function(b,N,I){N.exports=b("./is-implemented")()?Math.sign:b("./shim")},{"./is-implemented":188,"./shim":189}],188:[function(b,N,I){N.exports=function(){var r=Math.sign;return"function"!==typeof r?!1:1===r(10)&&-1===r(-20)}},{}],189:[function(b,N,I){N.exports=function(r){r=Number(r);return isNaN(r)||0===r?r:0<r?1:-1}},{}],190:[function(b,N,I){var r=b("../math/sign"),q=Math.abs,
m=Math.floor;N.exports=function(l){if(isNaN(l))return 0;l=Number(l);return 0!==l&&isFinite(l)?r(l)*m(q(l)):l}},{"../math/sign":187}],191:[function(b,N,I){var r=b("./to-integer"),q=Math.max;N.exports=function(m){return q(0,r(m))}},{"./to-integer":190}],192:[function(b,N,I){var r=b("./valid-callable"),q=b("./valid-value"),m=Function.prototype.bind,l=Function.prototype.call,a=Object.keys,h=Object.prototype.propertyIsEnumerable;N.exports=function(g,n){return function(p,d,e,f){p=Object(q(p));r(d);var k=
a(p);f&&k.sort("function"===typeof f?m.call(f,p):void 0);"function"!==typeof g&&(g=k[g]);return l.call(g,k,function(t,v){return h.call(p,t)?l.call(d,e,p[t],t,p,v):n})}}},{"./valid-callable":209,"./valid-value":211}],193:[function(b,N,I){N.exports=b("./is-implemented")()?Object.assign:b("./shim")},{"./is-implemented":194,"./shim":195}],194:[function(b,N,I){N.exports=function(){var r=Object.assign;if("function"!==typeof r)return!1;var q={foo:"raz"};r(q,{bar:"dwa"},{trzy:"trzy"});return"razdwatrzy"===
q.foo+q.bar+q.trzy}},{}],195:[function(b,N,I){var r=b("../keys"),q=b("../valid-value"),m=Math.max;N.exports=function(l,a){var h,g,n=m(arguments.length,2);l=Object(q(l));var p=function(d){try{l[d]=a[d]}catch(e){h||(h=e)}};for(g=1;g<n;++g)a=arguments[g],r(a).forEach(p);if(void 0!==h)throw h;return l}},{"../keys":201,"../valid-value":211}],196:[function(b,N,I){var r=b("../array/from"),q=b("./assign"),m=b("./valid-value");N.exports=function(l,a,h){var g=Object(m(l)),n=Object(h);if(g!==l&&!a)return g;
var p={};a?r(a,function(d){if(n.ensure||d in l)p[d]=l[d]}):q(p,l);return p}},{"../array/from":181,"./assign":193,"./valid-value":211}],197:[function(b,N,I){var r=Object.create,q;b("./set-prototype-of/is-implemented")()||(q=b("./set-prototype-of/shim"));N.exports=function(){if(!q||1!==q.level)return r;var m={};var l={};var a={configurable:!1,enumerable:!1,writable:!0,value:void 0};Object.getOwnPropertyNames(Object.prototype).forEach(function(h){l[h]="__proto__"===h?{configurable:!0,enumerable:!1,writable:!0,
value:void 0}:a});Object.defineProperties(m,l);Object.defineProperty(q,"nullPolyfill",{configurable:!1,enumerable:!1,writable:!1,value:m});return function(h,g){return r(null===h?m:h,g)}}()},{"./set-prototype-of/is-implemented":207,"./set-prototype-of/shim":208}],198:[function(b,N,I){N.exports=b("./_iterate")("forEach")},{"./_iterate":192}],199:[function(b,N,I){var r=b("./is-value"),q={function:!0,object:!0};N.exports=function(m){return r(m)&&q[typeof m]||!1}},{"./is-value":200}],200:[function(b,N,
I){var r=b("../function/noop")();N.exports=function(q){return q!==r&&null!==q}},{"../function/noop":186}],201:[function(b,N,I){N.exports=b("./is-implemented")()?Object.keys:b("./shim")},{"./is-implemented":202,"./shim":203}],202:[function(b,N,I){N.exports=function(){try{return Object.keys("primitive"),!0}catch(r){return!1}}},{}],203:[function(b,N,I){var r=b("../is-value"),q=Object.keys;N.exports=function(m){return q(r(m)?Object(m):m)}},{"../is-value":200}],204:[function(b,N,I){var r=b("./valid-callable"),
q=b("./for-each"),m=Function.prototype.call;N.exports=function(l,a,h){var g={};r(a);q(l,function(n,p,d,e){g[p]=m.call(a,h,n,p,d,e)});return g}},{"./for-each":198,"./valid-callable":209}],205:[function(b,N,I){var r=b("./is-value"),q=Array.prototype.forEach,m=Object.create;N.exports=function(l){var a=m(null);q.call(arguments,function(h){if(r(h)){h=Object(h);for(var g in h)a[g]=h[g]}});return a}},{"./is-value":200}],206:[function(b,N,I){N.exports=b("./is-implemented")()?Object.setPrototypeOf:b("./shim")},
{"./is-implemented":207,"./shim":208}],207:[function(b,N,I){var r=Object.create,q=Object.getPrototypeOf,m={};N.exports=function(l){var a=Object.setPrototypeOf;return"function"!==typeof a?!1:q(a((l||r)(null),m))===m}},{}],208:[function(b,N,I){var r=b("../is-object"),q=b("../valid-value"),m=Object.prototype.isPrototypeOf,l=Object.defineProperty,a={configurable:!0,enumerable:!1,writable:!0,value:void 0};var h=function(g,n){q(g);if(null===n||r(n))return g;throw new TypeError("Prototype must be null or an object");
};N.exports=function(g){if(!g)return null;if(2===g.level)if(g.set){var n=g.set;var p=function(d,e){n.call(h(d,e),e);return d}}else p=function(d,e){h(d,e).__proto__=e;return d};else p=function k(e,f){var t;h(e,f);(t=m.call(k.nullPolyfill,e))&&delete k.nullPolyfill.__proto__;null===f&&(f=k.nullPolyfill);e.__proto__=f;t&&l(k.nullPolyfill,"__proto__",a);return e};return Object.defineProperty(p,"level",{configurable:!1,enumerable:!1,writable:!1,value:g.level})}(function(){var g=Object.create(null),n={},
p=Object.getOwnPropertyDescriptor(Object.prototype,"__proto__");if(p){try{var d=p.set;d.call(g,n)}catch(e){}if(Object.getPrototypeOf(g)===n)return{set:d,level:2}}g.__proto__=n;if(Object.getPrototypeOf(g)===n)return{level:2};g={};g.__proto__=n;return Object.getPrototypeOf(g)===n?{level:1}:!1}());b("../create")},{"../create":197,"../is-object":199,"../valid-value":211}],209:[function(b,N,I){N.exports=function(r){if("function"!==typeof r)throw new TypeError(r+" is not a function");return r}},{}],210:[function(b,
N,I){var r=b("./is-object");N.exports=function(q){if(!r(q))throw new TypeError(q+" is not an Object");return q}},{"./is-object":199}],211:[function(b,N,I){var r=b("./is-value");N.exports=function(q){if(!r(q))throw new TypeError("Cannot use null or undefined");return q}},{"./is-value":200}],212:[function(b,N,I){N.exports=b("./is-implemented")()?String.prototype.contains:b("./shim")},{"./is-implemented":213,"./shim":214}],213:[function(b,N,I){N.exports=function(){return"function"!==typeof"razdwatrzy".contains?
!1:!0==="razdwatrzy".contains("dwa")&&!1==="razdwatrzy".contains("foo")}},{}],214:[function(b,N,I){var r=String.prototype.indexOf;N.exports=function(q,m){return-1<r.call(this,q,m)}},{}],215:[function(b,N,I){var r=Object.prototype.toString,q=r.call("");N.exports=function(m){return"string"===typeof m||m&&"object"===typeof m&&(m instanceof String||r.call(m)===q)||!1}},{}],216:[function(b,N,I){var r=Object.create(null),q=Math.random;N.exports=function(){do var m=q().toString(36).slice(2);while(r[m]);
return m}},{}],217:[function(b,N,I){I=b("es5-ext/object/set-prototype-of");var r=b("es5-ext/string/#/contains"),q=b("d"),m=b("es6-symbol"),l=b("./"),a=Object.defineProperty;var h=N.exports=function(g,n){if(!(this instanceof h))throw new TypeError("Constructor requires 'new'");l.call(this,g);n=n?r.call(n,"key+value")?"key+value":r.call(n,"key")?"key":"value":"value";a(this,"__kind__",q("",n))};I&&I(h,l);delete h.prototype.constructor;h.prototype=Object.create(l.prototype,{_resolve:q(function(g){return"value"===
this.__kind__?this.__list__[g]:"key+value"===this.__kind__?[g,this.__list__[g]]:g})});a(h.prototype,m.toStringTag,q("c","Array Iterator"))},{"./":220,d:155,"es5-ext/object/set-prototype-of":206,"es5-ext/string/#/contains":212,"es6-symbol":225}],218:[function(b,N,I){var r=b("es5-ext/function/is-arguments"),q=b("es5-ext/object/valid-callable"),m=b("es5-ext/string/is-string"),l=b("./get"),a=Array.isArray,h=Function.prototype.call,g=Array.prototype.some;N.exports=function(n,p,d){var e,f;a(n)||r(n)?e=
"array":m(n)?e="string":n=l(n);q(p);var k=function(){f=!0};if("array"===e)g.call(n,function(y){h.call(p,d,y,k);return f});else if("string"===e){var t=n.length;for(e=0;e<t;++e){var v=n[e];if(e+1<t){var w=v.charCodeAt(0);55296<=w&&56319>=w&&(v+=n[++e])}h.call(p,d,v,k);if(f)break}}else for(e=n.next();!e.done;){h.call(p,d,e.value,k);if(f)break;e=n.next()}}},{"./get":219,"es5-ext/function/is-arguments":184,"es5-ext/object/valid-callable":209,"es5-ext/string/is-string":215}],219:[function(b,N,I){var r=
b("es5-ext/function/is-arguments"),q=b("es5-ext/string/is-string"),m=b("./array"),l=b("./string"),a=b("./valid-iterable"),h=b("es6-symbol").iterator;N.exports=function(g){return"function"===typeof a(g)[h]?g[h]():r(g)?new m(g):q(g)?new l(g):new m(g)}},{"./array":217,"./string":222,"./valid-iterable":223,"es5-ext/function/is-arguments":184,"es5-ext/string/is-string":215,"es6-symbol":225}],220:[function(b,N,I){var r=b("es5-ext/array/#/clear");I=b("es5-ext/object/assign");var q=b("es5-ext/object/valid-callable"),
m=b("es5-ext/object/valid-value"),l=b("d"),a=b("d/auto-bind"),h=b("es6-symbol"),g=Object.defineProperty,n=Object.defineProperties,p;N.exports=p=function(d,e){if(!(this instanceof p))throw new TypeError("Constructor requires 'new'");n(this,{__list__:l("w",m(d)),__context__:l("w",e),__nextIndex__:l("w",0)});e&&(q(e.on),e.on("_add",this._onAdd),e.on("_delete",this._onDelete),e.on("_clear",this._onClear))};delete p.prototype.constructor;n(p.prototype,I({_next:l(function(){if(this.__list__){if(this.__redo__){var d=
this.__redo__.shift();if(void 0!==d)return d}if(this.__nextIndex__<this.__list__.length)return this.__nextIndex__++;this._unBind()}}),next:l(function(){return this._createResult(this._next())}),_createResult:l(function(d){return void 0===d?{done:!0,value:void 0}:{done:!1,value:this._resolve(d)}}),_resolve:l(function(d){return this.__list__[d]}),_unBind:l(function(){this.__list__=null;delete this.__redo__;this.__context__&&(this.__context__.off("_add",this._onAdd),this.__context__.off("_delete",this._onDelete),
this.__context__.off("_clear",this._onClear),this.__context__=null)}),toString:l(function(){return"[object "+(this[h.toStringTag]||"Object")+"]"})},a({_onAdd:l(function(d){d>=this.__nextIndex__||(++this.__nextIndex__,this.__redo__?(this.__redo__.forEach(function(e,f){e>=d&&(this.__redo__[f]=++e)},this),this.__redo__.push(d)):g(this,"__redo__",l("c",[d])))}),_onDelete:l(function(d){if(!(d>=this.__nextIndex__)&&(--this.__nextIndex__,this.__redo__)){var e=this.__redo__.indexOf(d);-1!==e&&this.__redo__.splice(e,
1);this.__redo__.forEach(function(f,k){f>d&&(this.__redo__[k]=--f)},this)}}),_onClear:l(function(){this.__redo__&&r.call(this.__redo__);this.__nextIndex__=0})})));g(p.prototype,h.iterator,l(function(){return this}))},{d:155,"d/auto-bind":154,"es5-ext/array/#/clear":180,"es5-ext/object/assign":193,"es5-ext/object/valid-callable":209,"es5-ext/object/valid-value":211,"es6-symbol":225}],221:[function(b,N,I){var r=b("es5-ext/function/is-arguments"),q=b("es5-ext/object/is-value"),m=b("es5-ext/string/is-string"),
l=b("es6-symbol").iterator,a=Array.isArray;N.exports=function(h){return q(h)?a(h)||m(h)||r(h)?!0:"function"===typeof h[l]:!1}},{"es5-ext/function/is-arguments":184,"es5-ext/object/is-value":200,"es5-ext/string/is-string":215,"es6-symbol":225}],222:[function(b,N,I){I=b("es5-ext/object/set-prototype-of");var r=b("d"),q=b("es6-symbol"),m=b("./"),l=Object.defineProperty;var a=N.exports=function(h){if(!(this instanceof a))throw new TypeError("Constructor requires 'new'");h=String(h);m.call(this,h);l(this,
"__length__",r("",h.length))};I&&I(a,m);delete a.prototype.constructor;a.prototype=Object.create(m.prototype,{_next:r(function(){if(this.__list__){if(this.__nextIndex__<this.__length__)return this.__nextIndex__++;this._unBind()}}),_resolve:r(function(h){h=this.__list__[h];if(this.__nextIndex__===this.__length__)return h;var g=h.charCodeAt(0);return 55296<=g&&56319>=g?h+this.__list__[this.__nextIndex__++]:h})});l(a.prototype,q.toStringTag,r("c","String Iterator"))},{"./":220,d:155,"es5-ext/object/set-prototype-of":206,
"es6-symbol":225}],223:[function(b,N,I){var r=b("./is-iterable");N.exports=function(q){if(!r(q))throw new TypeError(q+" is not iterable");return q}},{"./is-iterable":221}],224:[function(b,N,I){(function(r,q){(function(){(function(m,l){"object"===typeof I&&"undefined"!==typeof N?N.exports=l():m.ES6Promise=l()})(this,function(){function m(sa){return"function"===typeof sa}function l(){return function(){return r.nextTick(p)}}function a(){return"undefined"!==typeof Q?function(){Q(p)}:n()}function h(){var sa=
0,ma=new O(p),qa=document.createTextNode("");ma.observe(qa,{characterData:!0});return function(){qa.data=sa=++sa%2}}function g(){var sa=new MessageChannel;sa.port1.onmessage=p;return function(){return sa.port2.postMessage(0)}}function n(){var sa=setTimeout;return function(){return sa(p,1)}}function p(){for(var sa=0;sa<H;sa+=2)(0,S[sa])(S[sa+1]),S[sa]=void 0,S[sa+1]=void 0;H=0}function d(){try{var sa=Function("return this")().require("vertx");Q=sa.runOnLoop||sa.runOnContext;return a()}catch(ma){return n()}}
function e(sa,ma){var qa=this,pa=new this.constructor(k);void 0===pa[ba]&&J(pa);var na=qa._state;if(na){var ka=arguments[na-1];P(function(){return D(na,pa,ka,qa._result)})}else C(qa,pa,sa,ma);return pa}function f(sa){if(sa&&"object"===typeof sa&&sa.constructor===this)return sa;var ma=new this(k);B(ma,sa);return ma}function k(){}function t(sa,ma,qa,pa){try{sa.call(ma,qa,pa)}catch(na){return na}}function v(sa,ma,qa){P(function(pa){var na=!1,ka=t(qa,ma,function(ua){na||(na=!0,ma!==ua?B(pa,ua):z(pa,ua))},
function(ua){na||(na=!0,E(pa,ua))},"Settle: "+(pa._label||" unknown promise"));!na&&ka&&(na=!0,E(pa,ka))},sa)}function w(sa,ma){ma._state===ia?z(sa,ma._result):ma._state===ja?E(sa,ma._result):C(ma,void 0,function(qa){return B(sa,qa)},function(qa){return E(sa,qa)})}function y(sa,ma,qa){ma.constructor===sa.constructor&&qa===e&&ma.constructor.resolve===f?w(sa,ma):void 0===qa?z(sa,ma):m(qa)?v(sa,ma,qa):z(sa,ma)}function B(sa,ma){if(sa===ma)E(sa,new TypeError("You cannot resolve a promise with itself"));
else{var qa=typeof ma;if(null===ma||"object"!==qa&&"function"!==qa)z(sa,ma);else{qa=void 0;try{qa=ma.then}catch(pa){E(sa,pa);return}y(sa,ma,qa)}}}function A(sa){sa._onerror&&sa._onerror(sa._result);u(sa)}function z(sa,ma){sa._state===ca&&(sa._result=ma,sa._state=ia,0!==sa._subscribers.length&&P(u,sa))}function E(sa,ma){sa._state===ca&&(sa._state=ja,sa._result=ma,P(A,sa))}function C(sa,ma,qa,pa){var na=sa._subscribers,ka=na.length;sa._onerror=null;na[ka]=ma;na[ka+ia]=qa;na[ka+ja]=pa;0===ka&&sa._state&&
P(u,sa)}function u(sa){var ma=sa._subscribers,qa=sa._state;if(0!==ma.length){for(var pa,na,ka=sa._result,ua=0;ua<ma.length;ua+=3)pa=ma[ua],na=ma[ua+qa],pa?D(qa,pa,na,ka):na(ka);sa._subscribers.length=0}}function D(sa,ma,qa,pa){var na=m(qa),ka=void 0,ua=void 0,va=!0;if(na){try{ka=qa(pa)}catch(Ca){va=!1,ua=Ca}if(ma===ka){E(ma,new TypeError("A promises callback cannot return that same promise."));return}}else ka=pa;ma._state===ca&&(na&&va?B(ma,ka):!1===va?E(ma,ua):sa===ia?z(ma,ka):sa===ja&&E(ma,ka))}
function G(sa,ma){try{ma(function(qa){B(sa,qa)},function(qa){E(sa,qa)})}catch(qa){E(sa,qa)}}function J(sa){sa[ba]=la++;sa._state=void 0;sa._result=void 0;sa._subscribers=[]}var L=void 0,K=L=Array.isArray?Array.isArray:function(sa){return"[object Array]"===Object.prototype.toString.call(sa)},H=0,Q=void 0,M=void 0,P=function(sa,ma){S[H]=sa;S[H+1]=ma;H+=2;2===H&&(M?M(p):X())},T=(L="undefined"!==typeof window?window:void 0)||{},O=T.MutationObserver||T.WebKitMutationObserver;T="undefined"===typeof self&&
"undefined"!==typeof r&&"[object process]"==={}.toString.call(r);var U="undefined"!==typeof Uint8ClampedArray&&"undefined"!==typeof importScripts&&"undefined"!==typeof MessageChannel,S=Array(1E3),X=void 0;X=T?l():O?h():U?g():void 0===L&&"function"===typeof b?d():n();var ba=Math.random().toString(36).substring(2),ca=void 0,ia=1,ja=2,la=0,da=function(){function sa(ma,qa){this._instanceConstructor=ma;this.promise=new ma(k);this.promise[ba]||J(this.promise);K(qa)?(this._remaining=this.length=qa.length,
this._result=Array(this.length),0===this.length?z(this.promise,this._result):(this.length=this.length||0,this._enumerate(qa),0===this._remaining&&z(this.promise,this._result))):E(this.promise,Error("Array Methods must be provided an Array"))}sa.prototype._enumerate=function(ma){for(var qa=0;this._state===ca&&qa<ma.length;qa++)this._eachEntry(ma[qa],qa)};sa.prototype._eachEntry=function(ma,qa){var pa=this._instanceConstructor,na=pa.resolve;if(na===f){var ka=na=void 0,ua=!1;try{na=ma.then}catch(va){ua=
!0,ka=va}na===e&&ma._state!==ca?this._settledAt(ma._state,qa,ma._result):"function"!==typeof na?(this._remaining--,this._result[qa]=ma):pa===oa?(pa=new pa(k),ua?E(pa,ka):y(pa,ma,na),this._willSettleAt(pa,qa)):this._willSettleAt(new pa(function(va){return va(ma)}),qa)}else this._willSettleAt(na(ma),qa)};sa.prototype._settledAt=function(ma,qa,pa){var na=this.promise;na._state===ca&&(this._remaining--,ma===ja?E(na,pa):this._result[qa]=pa);0===this._remaining&&z(na,this._result)};sa.prototype._willSettleAt=
function(ma,qa){var pa=this;C(ma,void 0,function(na){return pa._settledAt(ia,qa,na)},function(na){return pa._settledAt(ja,qa,na)})};return sa}(),oa=function(){function sa(ma){this[ba]=la++;this._result=this._state=void 0;this._subscribers=[];if(k!==ma){if("function"!==typeof ma)throw new TypeError("You must pass a resolver function as the first argument to the promise constructor");if(this instanceof sa)G(this,ma);else throw new TypeError("Failed to construct 'Promise': Please use the 'new' operator, this object constructor cannot be called as a function.");
}}sa.prototype.catch=function(ma){return this.then(null,ma)};sa.prototype.finally=function(ma){var qa=this.constructor;return m(ma)?this.then(function(pa){return qa.resolve(ma()).then(function(){return pa})},function(pa){return qa.resolve(ma()).then(function(){throw pa;})}):this.then(ma,ma)};return sa}();oa.prototype.then=e;oa.all=function(sa){return(new da(this,sa)).promise};oa.race=function(sa){var ma=this;return K(sa)?new ma(function(qa,pa){for(var na=sa.length,ka=0;ka<na;ka++)ma.resolve(sa[ka]).then(qa,
pa)}):new ma(function(qa,pa){return pa(new TypeError("You must pass an array to race."))})};oa.resolve=f;oa.reject=function(sa){var ma=new this(k);E(ma,sa);return ma};oa._setScheduler=function(sa){M=sa};oa._setAsap=function(sa){P=sa};oa._asap=P;oa.polyfill=function(){var sa=void 0;if("undefined"!==typeof q)sa=q;else if("undefined"!==typeof self)sa=self;else try{sa=Function("return this")()}catch(pa){throw Error("polyfill failed because global object is unavailable in this environment");}var ma=sa.Promise;
if(ma){var qa=null;try{qa=Object.prototype.toString.call(ma.resolve())}catch(pa){}if("[object Promise]"===qa&&!ma.cast)return}sa.Promise=oa};return oa.Promise=oa})}).call(this)}).call(this,b("_process"),"undefined"!==typeof od?od:"undefined"!==typeof self?self:"undefined"!==typeof window?window:{})},{_process:526}],225:[function(b,N,I){N.exports=b("./is-implemented")()?b("ext/global-this").Symbol:b("./polyfill")},{"./is-implemented":226,"./polyfill":231,"ext/global-this":238}],226:[function(b,N,I){var r=
b("ext/global-this"),q={object:!0,symbol:!0};N.exports=function(){var m=r.Symbol;if("function"!==typeof m)return!1;var l=m("test symbol");try{String(l)}catch(a){return!1}return q[typeof m.iterator]&&q[typeof m.toPrimitive]&&q[typeof m.toStringTag]?!0:!1}},{"ext/global-this":238}],227:[function(b,N,I){N.exports=function(r){return r?"symbol"===typeof r?!0:r.constructor&&"Symbol"===r.constructor.name?"Symbol"===r[r.constructor.toStringTag]:!1:!1}},{}],228:[function(b,N,I){var r=b("d");b=Object.create;
var q=Object.defineProperty,m=Object.prototype,l=b(null);N.exports=function(a){for(var h=0,g,n;l[a+(h||"")];)++h;a+=h||"";l[a]=!0;g="@@"+a;q(m,g,r.gs(null,function(p){n||(n=!0,q(this,g,r(p)),n=!1)}));return g}},{d:155}],229:[function(b,N,I){var r=b("d"),q=b("ext/global-this").Symbol;N.exports=function(m){return Object.defineProperties(m,{hasInstance:r("",q&&q.hasInstance||m("hasInstance")),isConcatSpreadable:r("",q&&q.isConcatSpreadable||m("isConcatSpreadable")),iterator:r("",q&&q.iterator||m("iterator")),
match:r("",q&&q.match||m("match")),replace:r("",q&&q.replace||m("replace")),search:r("",q&&q.search||m("search")),species:r("",q&&q.species||m("species")),split:r("",q&&q.split||m("split")),toPrimitive:r("",q&&q.toPrimitive||m("toPrimitive")),toStringTag:r("",q&&q.toStringTag||m("toStringTag")),unscopables:r("",q&&q.unscopables||m("unscopables"))})}},{d:155,"ext/global-this":238}],230:[function(b,N,I){var r=b("d"),q=b("../../../validate-symbol"),m=Object.create(null);N.exports=function(l){return Object.defineProperties(l,
{for:r(function(a){return m[a]?m[a]:m[a]=l(String(a))}),keyFor:r(function(a){var h;q(a);for(h in m)if(m[h]===a)return h})})}},{"../../../validate-symbol":232,d:155}],231:[function(b,N,I){var r=b("d"),q=b("./validate-symbol"),m=b("ext/global-this").Symbol,l=b("./lib/private/generate-name");I=b("./lib/private/setup/standard-symbols");b=b("./lib/private/setup/symbol-registry");var a=Object.create,h=Object.defineProperties,g=Object.defineProperty,n;if("function"===typeof m)try{String(m());var p=!0}catch(e){}else m=
null;var d=function(e){if(this instanceof d)throw new TypeError("Symbol is not a constructor");return n(e)};N.exports=n=function k(f){if(this instanceof k)throw new TypeError("Symbol is not a constructor");if(p)return m(f);var t=a(d.prototype);f=void 0===f?"":String(f);return h(t,{__description__:r("",f),__name__:r("",l(f))})};I(n);b(n);h(d.prototype,{constructor:r(n),toString:r("",function(){return this.__name__})});h(n.prototype,{toString:r(function(){return"Symbol ("+q(this).__description__+")"}),
valueOf:r(function(){return q(this)})});g(n.prototype,n.toPrimitive,r("",function(){var f=q(this);return"symbol"===typeof f?f:f.toString()}));g(n.prototype,n.toStringTag,r("c","Symbol"));g(d.prototype,n.toStringTag,r("c",n.prototype[n.toStringTag]));g(d.prototype,n.toPrimitive,r("c",n.prototype[n.toPrimitive]))},{"./lib/private/generate-name":228,"./lib/private/setup/standard-symbols":229,"./lib/private/setup/symbol-registry":230,"./validate-symbol":232,d:155,"ext/global-this":238}],232:[function(b,
N,I){var r=b("./is-symbol");N.exports=function(q){if(!r(q))throw new TypeError(q+" is not a symbol");return q}},{"./is-symbol":227}],233:[function(b,N,I){N.exports=b("./is-implemented")()?WeakMap:b("./polyfill")},{"./is-implemented":234,"./polyfill":236}],234:[function(b,N,I){N.exports=function(){var r;if("function"!==typeof WeakMap)return!1;try{var q=new WeakMap([[r={},"one"],[{},"two"],[{},"three"]])}catch(m){return!1}return"[object WeakMap]"!==String(q)||"function"!==typeof q.set||q.set({},1)!==
q||"function"!==typeof q.delete||"function"!==typeof q.has||"one"!==q.get(r)?!1:!0}},{}],235:[function(b,N,I){b="function"!==typeof WeakMap?!1:"[object WeakMap]"===Object.prototype.toString.call(new WeakMap);N.exports=b},{}],236:[function(b,N,I){var r=b("es5-ext/object/is-value"),q=b("es5-ext/object/set-prototype-of"),m=b("es5-ext/object/valid-object"),l=b("es5-ext/object/valid-value"),a=b("es5-ext/string/random-uniq"),h=b("d"),g=b("es6-iterator/get"),n=b("es6-iterator/for-of");I=b("es6-symbol").toStringTag;
var p=b("./is-native-implemented"),d=Array.isArray,e=Object.defineProperty,f=Object.prototype.hasOwnProperty,k=Object.getPrototypeOf,t;N.exports=t=function(v){if(!(this instanceof t))throw new TypeError("Constructor requires 'new'");var w=p&&q&&WeakMap!==t?q(new WeakMap,k(this)):this;r(v)&&(d(v)||(v=g(v)));e(w,"__weakMapData__",h("c","$weakMap$"+a()));if(!v)return w;n(v,function(y){l(y);w.set(y[0],y[1])});return w};p&&(q&&q(t,WeakMap),t.prototype=Object.create(WeakMap.prototype,{constructor:h(t)}));
Object.defineProperties(t.prototype,{delete:h(function(v){return f.call(m(v),this.__weakMapData__)?(delete v[this.__weakMapData__],!0):!1}),get:h(function(v){if(f.call(m(v),this.__weakMapData__))return v[this.__weakMapData__]}),has:h(function(v){return f.call(m(v),this.__weakMapData__)}),set:h(function(v,w){e(m(v),this.__weakMapData__,h("c",w));return this}),toString:h(function(){return"[object WeakMap]"})});e(t.prototype,I,h("c","WeakMap"))},{"./is-native-implemented":235,d:155,"es5-ext/object/is-value":200,
"es5-ext/object/set-prototype-of":206,"es5-ext/object/valid-object":210,"es5-ext/object/valid-value":211,"es5-ext/string/random-uniq":216,"es6-iterator/for-of":218,"es6-iterator/get":219,"es6-symbol":225}],237:[function(b,N,I){var r=function(){if("object"===typeof self&&self)return self;if("object"===typeof window&&window)return window;throw Error("Unable to resolve global `this`");};N.exports=function(){if(this)return this;try{Object.defineProperty(Object.prototype,"__global__",{get:function(){return this},
configurable:!0})}catch(q){return r()}try{return __global__?__global__:r()}finally{delete Object.prototype.__global__}}()},{}],238:[function(b,N,I){N.exports=b("./is-implemented")()?globalThis:b("./implementation")},{"./implementation":237,"./is-implemented":239}],239:[function(b,N,I){N.exports=function(){return"object"===typeof globalThis&&globalThis?globalThis.Array===Array:!1}},{}],240:[function(b,N,I){N.exports=function(r,q,m){q=q||0;m=m||1;return[[r[12]+r[0],r[13]+r[1],r[14]+r[2],r[15]+r[3]],
[r[12]-r[0],r[13]-r[1],r[14]-r[2],r[15]-r[3]],[r[12]+r[4],r[13]+r[5],r[14]+r[6],r[15]+r[7]],[r[12]-r[4],r[13]-r[5],r[14]-r[6],r[15]-r[7]],[q*r[12]+r[8],q*r[13]+r[9],q*r[14]+r[10],q*r[15]+r[11]],[m*r[12]-r[8],m*r[13]-r[9],m*r[14]-r[10],m*r[15]-r[11]]]}},{}],241:[function(b,N,I){var r=b("is-string-blank");N.exports=function(q){var m=typeof q;if("string"===m){if(m=q,q=+q,0===q&&r(m))return!1}else if("number"!==m)return!1;return 1>q-q}},{"is-string-blank":470}],242:[function(b,N,I){function r(h,g,n){return Math.min(g,
Math.max(h,n))}function q(h,g,n){this.dimension=h.length;this.bounds=[Array(this.dimension),Array(this.dimension)];for(var p=0;p<this.dimension;++p)this.bounds[0][p]=-Infinity,this.bounds[1][p]=Infinity;this._state=h.slice().reverse();this._velocity=g.slice().reverse();this._time=[n];this._scratch=[h.slice(),h.slice(),h.slice(),h.slice(),h.slice()]}function m(h){for(var g=Array(h),n=0;n<h;++n)g[n]=0;return g}N.exports=function(h,g,n){switch(arguments.length){case 0:return new q([0],[0],0);case 1:if("number"===
typeof h){var p=m(h);return new q(p,p,0)}return new q(h,m(h.length),0);case 2:if("number"===typeof g)return p=m(h.length),new q(h,p,+g);n=0;case 3:if(h.length!==g.length)throw Error("state and velocity lengths must match");return new q(h,g,n)}};var l=b("cubic-hermite"),a=b("binary-search-bounds");b=q.prototype;b.flush=function(h){h=a.gt(this._time,h)-1;0>=h||(this._time.splice(0,h),this._state.splice(0,h*this.dimension),this._velocity.splice(0,h*this.dimension))};b.curve=function(h){var g=this._time,
n=g.length,p=a.le(g,h),d=this._scratch[0],e=this._state,f=this._velocity,k=this.dimension,t=this.bounds;if(0>p){var v=k-1;for(g=0;g<k;++g,--v)d[g]=e[v]}else if(p>=n-1)for(v=e.length-1,h-=g[n-1],g=0;g<k;++g,--v)d[g]=e[v]+h*f[v];else{v=k*(p+1)-1;n=g[p];p=g[p+1]-n||1;var w=this._scratch[1],y=this._scratch[2],B=this._scratch[3],A=this._scratch[4],z=!0;for(g=0;g<k;++g,--v)w[g]=e[v],B[g]=f[v]*p,y[g]=e[v+k],A[g]=f[v+k]*p,z=z&&w[g]===y[g]&&B[g]===A[g]&&0===B[g];if(z)for(g=0;g<k;++g)d[g]=w[g];else l(w,B,y,
A,(h-n)/p,d)}e=t[0];t=t[1];for(g=0;g<k;++g)d[g]=r(e[g],t[g],d[g]);return d};b.dcurve=function(h){var g=this._time,n=g.length,p=a.le(g,h),d=this._scratch[0],e=this._state,f=this._velocity,k=this.dimension;if(p>=n-1)for(n=e.length-1,g=0;g<k;++g,--n)d[g]=f[n];else{n=k*(p+1)-1;var t=g[p];p=g[p+1]-t||1;var v=this._scratch[1],w=this._scratch[2],y=this._scratch[3],B=this._scratch[4],A=!0;for(g=0;g<k;++g,--n)v[g]=e[n],y[g]=f[n]*p,w[g]=e[n+k],B[g]=f[n+k]*p,A=A&&v[g]===w[g]&&y[g]===B[g]&&0===y[g];if(A)for(g=
0;g<k;++g)d[g]=0;else for(l.derivative(v,y,w,B,(h-t)/p,d),g=0;g<k;++g)d[g]/=p}return d};b.lastT=function(){var h=this._time;return h[h.length-1]};b.stable=function(){for(var h=this._velocity,g=h.length,n=this.dimension-1;0<=n;--n)if(h[--g])return!1;return!0};b.jump=function(h){var g=this.lastT(),n=this.dimension;if(!(h<g||arguments.length!==n+1)){var p=this._state,d=this._velocity,e=p.length-this.dimension,f=this.bounds,k=f[0];f=f[1];this._time.push(g,h);for(g=0;2>g;++g)for(var t=0;t<n;++t)p.push(p[e++]),
d.push(0);this._time.push(h);for(t=n;0<t;--t)p.push(r(k[t-1],f[t-1],arguments[t])),d.push(0)}};b.push=function(h){var g=this.lastT(),n=this.dimension;if(!(h<g||arguments.length!==n+1)){var p=this._state,d=this._velocity,e=p.length-this.dimension,f=h-g,k=this.bounds;g=k[0];k=k[1];f=1E-6<f?1/f:0;for(this._time.push(h);0<n;--n){var t=r(g[n-1],k[n-1],arguments[n]);p.push(t);d.push((t-p[e++])*f)}}};b.set=function(h){var g=this.dimension;if(!(h<this.lastT()||arguments.length!==g+1)){var n=this._state,p=
this._velocity,d=this.bounds,e=d[0];d=d[1];for(this._time.push(h);0<g;--g)n.push(r(e[g-1],d[g-1],arguments[g])),p.push(0)}};b.move=function(h){var g=this.lastT(),n=this.dimension;if(!(h<=g||arguments.length!==n+1)){var p=this._state,d=this._velocity,e=p.length-this.dimension,f=this.bounds,k=f[0];f=f[1];g=h-g;g=1E-6<g?1/g:0;for(this._time.push(h);0<n;--n){var t=arguments[n];p.push(r(k[n-1],f[n-1],p[e++]+t));d.push(t*g)}}};b.idle=function(h){var g=this.lastT();if(!(h<g)){var n=this.dimension,p=this._state,
d=this._velocity,e=p.length-n,f=this.bounds,k=f[0];f=f[1];g=h-g;this._time.push(h);for(h=n-1;0<=h;--h)p.push(r(k[h],f[h],p[e]+g*d[e])),d.push(0),e+=1}}},{"binary-search-bounds":243,"cubic-hermite":150}],243:[function(b,N,I){function r(m,l,a,h,g,n){m=["function ",m,"(a,l,h,",h.join(","),"){",n?"":"var i\x3d",a?"l-1":"h+1",";while(l\x3c\x3dh){var m\x3d(l+h)\x3e\x3e\x3e1,x\x3da",g?".get(m)":"[m]"];n?0>l.indexOf("c")?m.push(";if(x\x3d\x3d\x3dy){return m}else if(x\x3c\x3dy){"):m.push(";var p\x3dc(x,y);if(p\x3d\x3d\x3d0){return m}else if(p\x3c\x3d0){"):
m.push(";if(",l,"){i\x3dm;");a?m.push("l\x3dm+1}else{h\x3dm-1}"):m.push("h\x3dm-1}else{l\x3dm+1}");m.push("}");n?m.push("return -1};"):m.push("return i};");return m.join("")}function q(m,l,a,h){return(new Function([r("A","x"+m+"y",l,["y"],!1,h),r("B","x"+m+"y",l,["y"],!0,h),r("P","c(x,y)"+m+"0",l,["y","c"],!1,h),r("Q","c(x,y)"+m+"0",l,["y","c"],!0,h),"function dispatchBsearch",a,"(a,y,c,l,h){if(a.shape){if(typeof(c)\x3d\x3d\x3d'function'){return Q(a,(l\x3d\x3d\x3dundefined)?0:l|0,(h\x3d\x3d\x3dundefined)?a.shape[0]-1:h|0,y,c)}else{return B(a,(c\x3d\x3d\x3dundefined)?0:c|0,(l\x3d\x3d\x3dundefined)?a.shape[0]-1:l|0,y)}}else{if(typeof(c)\x3d\x3d\x3d'function'){return P(a,(l\x3d\x3d\x3dundefined)?0:l|0,(h\x3d\x3d\x3dundefined)?a.length-1:h|0,y,c)}else{return A(a,(c\x3d\x3d\x3dundefined)?0:c|0,(l\x3d\x3d\x3dundefined)?a.length-1:l|0,y)}}}return dispatchBsearch",
a].join("")))()}N.exports={ge:q("\x3e\x3d",!1,"GE"),gt:q("\x3e",!1,"GT"),lt:q("\x3c",!0,"LT"),le:q("\x3c\x3d",!0,"LE"),eq:q("-",!0,"EQ",!0)}},{}],244:[function(b,N,I){var r=b("dtype");N.exports=function(q,m,l){if(!q)throw new TypeError("must specify data as first parameter");l=+(l||0)|0;if(Array.isArray(q)&&q[0]&&"number"===typeof q[0][0]){var a=q[0].length,h=q.length*a;m&&"string"!==typeof m||(m=new (r(m||"float32"))(h+l));var g=m.length-l;if(h!==g)throw Error("source length "+h+" ("+a+"x"+q.length+
") does not match destination length "+g);for(h=0;h<q.length;h++)for(g=0;g<a;g++)m[l++]=null===q[h][g]?NaN:q[h][g]}else if(m&&"string"!==typeof m)m.set(q,l);else if(a=r(m||"float32"),Array.isArray(q)||"array"===m)for(m=new a(q.length+l),h=0,a=m.length;l<a;l++,h++)m[l]=null===q[h]?NaN:q[h];else 0===l?m=new a(q):(m=new a(q.length+l),m.set(q,l));return m}},{dtype:175}],245:[function(b,N,I){var r=b("css-font/stringify"),q=[32,126];N.exports=function(m){m=m||{};var l=m.shape?m.shape:m.canvas?[m.canvas.width,
m.canvas.height]:[512,512],a=m.canvas||document.createElement("canvas"),h=m.font,g="number"===typeof m.step?[m.step,m.step]:m.step||[32,32];m=m.chars||q;h&&"string"!==typeof h&&(h=r(h));if(!Array.isArray(m))m=String(m).split("");else if(2===m.length&&"number"===typeof m[0]&&"number"===typeof m[1]){for(var n=[],p=m[0],d=0;p<=m[1];p++)n[d++]=String.fromCharCode(p);m=n}l=l.slice();a.width=l[0];a.height=l[1];n=a.getContext("2d");n.fillStyle="#000";n.fillRect(0,0,a.width,a.height);n.font=h;n.textAlign=
"center";n.textBaseline="middle";n.fillStyle="#fff";h=g[0]/2;d=g[1]/2;for(p=0;p<m.length;p++)n.fillText(m[p],h,d),(h+=g[0])>l[0]-g[0]/2&&(h=g[0]/2,d+=g[1]);return a}},{"css-font/stringify":147}],246:[function(b,N,I){function r(a,h){h||(h={});if("string"===typeof a||Array.isArray(a))h.family=a;var g=Array.isArray(h.family)?h.family.join(", "):h.family;if(!g)throw Error("`family` must be defined");var n=h.size||h.fontSize||h.em||48;a=[h.style||h.fontStyle||"",h.weight||h.fontWeight||"",n].join(" ")+
"px "+g;var p=h.origin||"top";if(r.cache[g]&&n<=r.cache[g].em)return q(r.cache[g],p);var d=h.canvas||r.canvas,e=d.getContext("2d"),f=void 0!==h.upper?h.upper:"H",k=void 0!==h.lower?h.lower:"x",t=void 0!==h.descent?h.descent:"p",v=void 0!==h.ascent?h.ascent:"h",w=void 0!==h.tittle?h.tittle:"i";h=void 0!==h.overshoot?h.overshoot:"O";var y=Math.ceil(1.5*n);d.height=y;d.width=.5*y;e.font=a;a={top:0};e.clearRect(0,0,y,y);e.textBaseline="top";e.fillStyle="black";e.fillText("H",0,0);d=m(e.getImageData(0,
0,y,y));e.clearRect(0,0,y,y);e.textBaseline="bottom";e.fillText("H",0,y);var B=m(e.getImageData(0,0,y,y));a.lineHeight=a.bottom=y-B+d;e.clearRect(0,0,y,y);e.textBaseline="alphabetic";e.fillText("H",0,y);B=m(e.getImageData(0,0,y,y));B=y-B-1+d;a.baseline=a.alphabetic=B;e.clearRect(0,0,y,y);e.textBaseline="middle";e.fillText("H",0,.5*y);var A=m(e.getImageData(0,0,y,y));a.median=a.middle=y-A-1+d-.5*y;e.clearRect(0,0,y,y);e.textBaseline="hanging";e.fillText("H",0,.5*y);A=m(e.getImageData(0,0,y,y));a.hanging=
y-A-1+d-.5*y;e.clearRect(0,0,y,y);e.textBaseline="ideographic";e.fillText("H",0,y);A=m(e.getImageData(0,0,y,y));a.ideographic=y-A-1+d;f&&(e.clearRect(0,0,y,y),e.textBaseline="top",e.fillText(f,0,0),a.upper=m(e.getImageData(0,0,y,y)),a.capHeight=a.baseline-a.upper);k&&(e.clearRect(0,0,y,y),e.textBaseline="top",e.fillText(k,0,0),a.lower=m(e.getImageData(0,0,y,y)),a.xHeight=a.baseline-a.lower);w&&(e.clearRect(0,0,y,y),e.textBaseline="top",e.fillText(w,0,0),a.tittle=m(e.getImageData(0,0,y,y)));v&&(e.clearRect(0,
0,y,y),e.textBaseline="top",e.fillText(v,0,0),a.ascent=m(e.getImageData(0,0,y,y)));t&&(e.clearRect(0,0,y,y),e.textBaseline="top",e.fillText(t,0,0),a.descent=l(e.getImageData(0,0,y,y)));h&&(e.clearRect(0,0,y,y),e.textBaseline="top",e.fillText(h,0,0),e=l(e.getImageData(0,0,y,y)),a.overshoot=e-B);for(var z in a)a[z]/=n;a.em=n;r.cache[g]=a;return q(a,p)}function q(a,h){var g={};"string"===typeof h&&(h=a[h]);for(var n in a)"em"!==n&&(g[n]=a[n]-h);return g}function m(a){var h=a.height;a=a.data;for(var g=
3;g<a.length;g+=4)if(0!==a[g])return Math.floor(.25*(g-3)/h)}function l(a){var h=a.height;a=a.data;for(var g=a.length-1;0<g;g-=4)if(0!==a[g])return Math.floor(.25*(g-3)/h)}N.exports=r;r.canvas=document.createElement("canvas");r.cache={}},{}],247:[function(b,N,I){function r(f,k,t,v,w,y){this._color=f;this.key=k;this.value=t;this.left=v;this.right=w;this._count=y}function q(f){return new r(f._color,f.key,f.value,f.left,f.right,f._count)}function m(f,k){return new r(f,k.key,k.value,k.left,k.right,k._count)}
function l(f){f._count=1+(f.left?f.left._count:0)+(f.right?f.right._count:0)}function a(f,k){this._compare=f;this.root=k}function h(f,k){if(k.left){var t=h(f,k.left);if(t)return t}if(t=f(k.key,k.value))return t;if(k.right)return h(f,k.right)}function g(f,k,t,v){if(0>=k(f,v.key)){if(v.left){var w=g(f,k,t,v.left);if(w)return w}if(w=t(v.key,v.value))return w}if(v.right)return g(f,k,t,v.right)}function n(f,k,t,v,w){var y=t(f,w.key),B=t(k,w.key);if(0>=y&&(w.left&&(y=n(f,k,t,v,w.left))||0<B&&(y=v(w.key,
w.value))))return y;if(0<B&&w.right)return n(f,k,t,v,w.right)}function p(f,k){this.tree=f;this._stack=k}function d(f,k){f.key=k.key;f.value=k.value;f.left=k.left;f.right=k.right;f._color=k._color;f._count=k._count}function e(f,k){return f<k?-1:f>k?1:0}N.exports=function(f){return new a(f||e,null)};b=a.prototype;Object.defineProperty(b,"keys",{get:function(){var f=[];this.forEach(function(k,t){f.push(k)});return f}});Object.defineProperty(b,"values",{get:function(){var f=[];this.forEach(function(k,
t){f.push(t)});return f}});Object.defineProperty(b,"length",{get:function(){return this.root?this.root._count:0}});b.insert=function(f,k){for(var t=this._compare,v=this.root,w=[],y=[];v;){var B=t(f,v.key);w.push(v);y.push(B);v=0>=B?v.left:v.right}w.push(new r(0,f,k,null,null,1));for(f=w.length-2;0<=f;--f)v=w[f],w[f]=0>=y[f]?new r(v._color,v.key,v.value,w[f+1],v.right,v._count+1):new r(v._color,v.key,v.value,v.left,w[f+1],v._count+1);for(f=w.length-1;1<f;--f){y=w[f-1];v=w[f];if(1===y._color||1===v._color)break;
k=w[f-2];if(k.left===y)if(y.left===v)if((B=k.right)&&0===B._color)y._color=1,k.right=m(1,B),k._color=0,--f;else{k._color=0;k.left=y.right;y._color=1;y.right=k;w[f-2]=y;w[f-1]=v;l(k);l(y);3<=f&&(f=w[f-3],f.left===k?f.left=y:f.right=y);break}else if((B=k.right)&&0===B._color)y._color=1,k.right=m(1,B),k._color=0,--f;else{y.right=v.left;k._color=0;k.left=v.right;v._color=1;v.left=y;v.right=k;w[f-2]=v;w[f-1]=y;l(k);l(y);l(v);3<=f&&(f=w[f-3],f.left===k?f.left=v:f.right=v);break}else if(y.right===v)if((B=
k.left)&&0===B._color)y._color=1,k.left=m(1,B),k._color=0,--f;else{k._color=0;k.right=y.left;y._color=1;y.left=k;w[f-2]=y;w[f-1]=v;l(k);l(y);3<=f&&(f=w[f-3],f.right===k?f.right=y:f.left=y);break}else if((B=k.left)&&0===B._color)y._color=1,k.left=m(1,B),k._color=0,--f;else{y.left=v.right;k._color=0;k.right=v.left;v._color=1;v.right=y;v.left=k;w[f-2]=v;w[f-1]=y;l(k);l(y);l(v);3<=f&&(f=w[f-3],f.right===k?f.right=v:f.left=v);break}}w[0]._color=1;return new a(t,w[0])};b.forEach=function(f,k,t){if(this.root)switch(arguments.length){case 1:return h(f,
this.root);case 2:return g(k,this._compare,f,this.root);case 3:if(!(0<=this._compare(k,t)))return n(k,t,this._compare,f,this.root)}};Object.defineProperty(b,"begin",{get:function(){for(var f=[],k=this.root;k;)f.push(k),k=k.left;return new p(this,f)}});Object.defineProperty(b,"end",{get:function(){for(var f=[],k=this.root;k;)f.push(k),k=k.right;return new p(this,f)}});b.at=function(f){if(0>f)return new p(this,[]);for(var k=this.root,t=[];;){t.push(k);if(k.left){if(f<k.left._count){k=k.left;continue}f-=
k.left._count}if(!f)return new p(this,t);--f;if(k.right){if(f>=k.right._count)break;k=k.right}else break}return new p(this,[])};b.ge=function(f){for(var k=this._compare,t=this.root,v=[],w=0;t;){var y=k(f,t.key);v.push(t);0>=y&&(w=v.length);t=0>=y?t.left:t.right}v.length=w;return new p(this,v)};b.gt=function(f){for(var k=this._compare,t=this.root,v=[],w=0;t;){var y=k(f,t.key);v.push(t);0>y&&(w=v.length);t=0>y?t.left:t.right}v.length=w;return new p(this,v)};b.lt=function(f){for(var k=this._compare,
t=this.root,v=[],w=0;t;){var y=k(f,t.key);v.push(t);0<y&&(w=v.length);t=0>=y?t.left:t.right}v.length=w;return new p(this,v)};b.le=function(f){for(var k=this._compare,t=this.root,v=[],w=0;t;){var y=k(f,t.key);v.push(t);0<=y&&(w=v.length);t=0>y?t.left:t.right}v.length=w;return new p(this,v)};b.find=function(f){for(var k=this._compare,t=this.root,v=[];t;){var w=k(f,t.key);v.push(t);if(0===w)return new p(this,v);t=0>=w?t.left:t.right}return new p(this,[])};b.remove=function(f){return(f=this.find(f))?
f.remove():this};b.get=function(f){for(var k=this._compare,t=this.root;t;){var v=k(f,t.key);if(0===v)return t.value;t=0>=v?t.left:t.right}};b=p.prototype;Object.defineProperty(b,"valid",{get:function(){return 0<this._stack.length}});Object.defineProperty(b,"node",{get:function(){return 0<this._stack.length?this._stack[this._stack.length-1]:null},enumerable:!0});b.clone=function(){return new p(this.tree,this._stack.slice())};b.remove=function(){var f=this._stack;if(0===f.length)return this.tree;var k=
Array(f.length),t=f[f.length-1];k[k.length-1]=new r(t._color,t.key,t.value,t.left,t.right,t._count);for(var v=f.length-2;0<=v;--v)t=f[v],k[v]=t.left===f[v+1]?new r(t._color,t.key,t.value,k[v+1],t.right,t._count):new r(t._color,t.key,t.value,t.left,k[v+1],t._count);t=k[k.length-1];if(t.left&&t.right){f=k.length;for(t=t.left;t.right;)k.push(t),t=t.right;v=k[f-1];k.push(new r(t._color,v.key,v.value,t.left,t.right,t._count));k[f-1].key=t.key;k[f-1].value=t.value;for(v=k.length-2;v>=f;--v)t=k[v],k[v]=
new r(t._color,t.key,t.value,t.left,k[v+1],t._count);k[f-1].left=k[f]}t=k[k.length-1];if(0===t._color)for(v=k[k.length-2],v.left===t?v.left=null:v.right===t&&(v.right=null),k.pop(),v=0;v<k.length;++v)k[v]._count--;else if(t.left||t.right)for(t.left?d(t,t.left):t.right&&d(t,t.right),t._color=1,v=0;v<k.length-1;++v)k[v]._count--;else{if(1===k.length)return new a(this.tree._compare,null);for(v=0;v<k.length;++v)k[v]._count--;v=k[k.length-2];for(var w,y,B,A=k.length-1;0<=A;--A){f=k[A];if(0===A){f._color=
1;break}w=k[A-1];if(w.left===f){y=w.right;if(y.right&&0===y.right._color){y=w.right=q(y);B=y.right=q(y.right);w.right=y.left;y.left=w;y.right=B;y._color=w._color;f._color=1;w._color=1;B._color=1;l(w);l(y);if(1<A){var z=k[A-2];z.left===w?z.left=y:z.right=y}k[A-1]=y;break}else if(y.left&&0===y.left._color){y=w.right=q(y);B=y.left=q(y.left);w.right=B.left;y.left=B.right;B.left=w;B.right=y;B._color=w._color;w._color=1;y._color=1;f._color=1;l(w);l(y);l(B);1<A&&(z=k[A-2],z.left===w?z.left=B:z.right=B);
k[A-1]=B;break}if(1===y._color)if(0===w._color){w._color=1;w.right=m(0,y);break}else w.right=m(0,y);else y=q(y),w.right=y.left,y.left=w,y._color=w._color,w._color=0,l(w),l(y),1<A&&(z=k[A-2],z.left===w?z.left=y:z.right=y),k[A-1]=y,k[A]=w,A+1<k.length?k[A+1]=f:k.push(f),A+=2}else{y=w.left;if(y.left&&0===y.left._color){y=w.left=q(y);B=y.left=q(y.left);w.left=y.right;y.right=w;y.left=B;y._color=w._color;f._color=1;w._color=1;B._color=1;l(w);l(y);1<A&&(z=k[A-2],z.right===w?z.right=y:z.left=y);k[A-1]=y;
break}else if(y.right&&0===y.right._color){y=w.left=q(y);B=y.right=q(y.right);w.left=B.right;y.right=B.left;B.right=w;B.left=y;B._color=w._color;w._color=1;y._color=1;f._color=1;l(w);l(y);l(B);1<A&&(z=k[A-2],z.right===w?z.right=B:z.left=B);k[A-1]=B;break}if(1===y._color)if(0===w._color){w._color=1;w.left=m(0,y);break}else w.left=m(0,y);else y=q(y),w.left=y.right,y.right=w,y._color=w._color,w._color=0,l(w),l(y),1<A&&(z=k[A-2],z.right===w?z.right=y:z.left=y),k[A-1]=y,k[A]=w,A+1<k.length?k[A+1]=f:k.push(f),
A+=2}}v.left===t?v.left=null:v.right=null}return new a(this.tree._compare,k[0])};Object.defineProperty(b,"key",{get:function(){if(0<this._stack.length)return this._stack[this._stack.length-1].key},enumerable:!0});Object.defineProperty(b,"value",{get:function(){if(0<this._stack.length)return this._stack[this._stack.length-1].value},enumerable:!0});Object.defineProperty(b,"index",{get:function(){var f=0,k=this._stack;if(0===k.length)return(f=this.tree.root)?f._count:0;k[k.length-1].left&&(f=k[k.length-
1].left._count);for(var t=k.length-2;0<=t;--t)k[t+1]===k[t].right&&(++f,k[t].left&&(f+=k[t].left._count));return f},enumerable:!0});b.next=function(){var f=this._stack;if(0!==f.length){var k=f[f.length-1];if(k.right)for(k=k.right;k;)f.push(k),k=k.left;else for(f.pop();0<f.length&&f[f.length-1].right===k;)k=f[f.length-1],f.pop()}};Object.defineProperty(b,"hasNext",{get:function(){var f=this._stack;if(0===f.length)return!1;if(f[f.length-1].right)return!0;for(var k=f.length-1;0<k;--k)if(f[k-1].left===
f[k])return!0;return!1}});b.update=function(f){var k=this._stack;if(0===k.length)throw Error("Can't update empty node!");var t=Array(k.length),v=k[k.length-1];t[t.length-1]=new r(v._color,v.key,f,v.left,v.right,v._count);for(f=k.length-2;0<=f;--f)v=k[f],t[f]=v.left===k[f+1]?new r(v._color,v.key,v.value,t[f+1],v.right,v._count):new r(v._color,v.key,v.value,v.left,t[f+1],v._count);return new a(this.tree._compare,t[0])};b.prev=function(){var f=this._stack;if(0!==f.length){var k=f[f.length-1];if(k.left)for(k=
k.left;k;)f.push(k),k=k.right;else for(f.pop();0<f.length&&f[f.length-1].left===k;)k=f[f.length-1],f.pop()}};Object.defineProperty(b,"hasPrev",{get:function(){var f=this._stack;if(0===f.length)return!1;if(f[f.length-1].left)return!0;for(var k=f.length-1;0<k;--k)if(f[k-1].right===f[k])return!0;return!1}})},{}],248:[function(b,N,I){function r(l){if(0>l)return Number("0/0");for(var a=m[0],h=m.length-1;0<h;--h)a+=m[h]/(l+h);h=l+4.7421875+.5;return.5*Math.log(2*Math.PI)+(l+.5)*Math.log(h)-h+Math.log(a)-
Math.log(l)}var q=[.9999999999998099,676.5203681218851,-1259.1392167224028,771.3234287776531,-176.6150291621406,12.507343278686905,-.13857109526572012,9.984369578019572E-6,1.5056327351493116E-7],m=[.9999999999999971,57.15623566586292,-59.59796035547549,14.136097974741746,-.4919138160976202,3.399464998481189E-5,4.652362892704858E-5,-9.837447530487956E-5,1.580887032249125E-4,-2.1026444172410488E-4,2.1743961811521265E-4,-1.643181065367639E-4,8.441822398385275E-5,-2.6190838401581408E-5,3.6899182659531625E-6];
N.exports=function h(a){if(.5>a)return Math.PI/(Math.sin(Math.PI*a)*h(1-a));if(100<a)return Math.exp(r(a));--a;for(var g=q[0],n=1;9>n;n++)g+=q[n]/(a+n);n=a+7+.5;return Math.sqrt(2*Math.PI)*Math.pow(n,a+.5)*Math.exp(-n)*g};N.exports.log=r},{}],249:[function(b,N,I){N.exports=function(r,q){if("string"!==typeof r)throw new TypeError("must specify type string");q=q||{};if("undefined"===typeof document&&!q.canvas)return null;var m=q.canvas||document.createElement("canvas");"number"===typeof q.width&&(m.width=
q.width);"number"===typeof q.height&&(m.height=q.height);var l;try{var a=[r];0===r.indexOf("webgl")&&a.push("experimental-"+r);for(r=0;r<a.length;r++)if(l=m.getContext(a[r],q))return l}catch(h){l=null}return l||null}},{}],250:[function(b,N,I){function r(y,B){y[0]=B[0];y[1]=B[1];y[2]=B[2];return y}function q(y){this.gl=y;this.pixelRatio=1;this.bounds=[[-10,-10,-10],[10,10,10]];this.ticks=[[],[],[]];this.autoTicks=!0;this.tickSpacing=[1,1,1];this.tickEnable=[!0,!0,!0];this.tickFont=["sans-serif","sans-serif",
"sans-serif"];this.tickSize=[12,12,12];this.tickAngle=[0,0,0];this.tickAlign=["auto","auto","auto"];this.tickColor=[[0,0,0,1],[0,0,0,1],[0,0,0,1]];this.tickPad=[10,10,10];this.lastCubeProps={cubeEdges:[0,0,0],axis:[0,0,0]};this.labels=["x","y","z"];this.labelEnable=[!0,!0,!0];this.labelFont="sans-serif";this.labelSize=[20,20,20];this.labelAngle=[0,0,0];this.labelAlign=["auto","auto","auto"];this.labelColor=[[0,0,0,1],[0,0,0,1],[0,0,0,1]];this.labelPad=[10,10,10];this.lineEnable=[!0,!0,!0];this.lineMirror=
[!1,!1,!1];this.lineWidth=[1,1,1];this.lineColor=[[0,0,0,1],[0,0,0,1],[0,0,0,1]];this.lineTickEnable=[!0,!0,!0];this.lineTickMirror=[!1,!1,!1];this.lineTickLength=[0,0,0];this.lineTickWidth=[1,1,1];this.lineTickColor=[[0,0,0,1],[0,0,0,1],[0,0,0,1]];this.gridEnable=[!0,!0,!0];this.gridWidth=[1,1,1];this.gridColor=[[0,0,0,1],[0,0,0,1],[0,0,0,1]];this.zeroEnable=[!0,!0,!0];this.zeroLineColor=[[0,0,0,1],[0,0,0,1],[0,0,0,1]];this.zeroLineWidth=[2,2,2];this.backgroundEnable=[!1,!1,!1];this.backgroundColor=
[[.8,.8,.8,.5],[.8,.8,.8,.5],[.8,.8,.8,.5]];this._firstInit=!0;this._lines=this._text=null;this._background=g(y)}function m(){this.primalOffset=[0,0,0];this.primalMinor=[0,0,0];this.mirrorOffset=[0,0,0];this.mirrorMinor=[0,0,0]}function l(y,B,A,z,E){var C=y.primalOffset,u=y.primalMinor,D=y.mirrorOffset;y=y.mirrorMinor;z=z[B];for(var G=0;3>G;++G)if(B!==G){var J=C,L=D,K=u,H=y;z&1<<G&&(J=D,L=C,K=y,H=u);J[G]=A[0][G];L[G]=A[1][G];0<E[G]?(K[G]=-1,H[G]=0):(K[G]=0,H[G]=1)}}N.exports=function(y,B){y=new q(y);
y.update(B);return y};var a=b("./lib/text.js"),h=b("./lib/lines.js"),g=b("./lib/background.js"),n=b("./lib/cube.js"),p=b("./lib/ticks.js"),d=new Float32Array([1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1]);b=q.prototype;b.update=function(y){function B(H,Q,M){if(M in y){var P=y[M],T=this[M],O;(H?Array.isArray(P)&&Array.isArray(P[0]):Array.isArray(P))?this[M]=O=[Q(P[0]),Q(P[1]),Q(P[2])]:this[M]=O=[Q(P),Q(P),Q(P)];for(H=0;3>H;++H)if(O[H]!==T[H])return!0}return!1}y=y||{};var A=B.bind(this,!1,Number),z=B.bind(this,
!1,Boolean),E=B.bind(this,!1,String),C=B.bind(this,!0,function(H){if(Array.isArray(H)){if(3===H.length)return[+H[0],+H[1],+H[2],1];if(4===H.length)return[+H[0],+H[1],+H[2],+H[3]]}return[0,0,0,1]}),u=!1,D=!1;if("bounds"in y){var G=y.bounds,J=0;for(;2>J;++J)for(var L=0;3>L;++L)G[J][L]!==this.bounds[J][L]&&(D=!0),this.bounds[J][L]=G[J][L]}if("ticks"in y){var K=y.ticks;u=!0;this.autoTicks=!1;for(J=0;3>J;++J)this.tickSpacing[J]=0}else A("tickSpacing")&&(D=this.autoTicks=!0);this._firstInit&&("ticks"in
y||"tickSpacing"in y||(this.autoTicks=!0),u=D=!0,this._firstInit=!1);D&&this.autoTicks&&(K=p.create(this.bounds,this.tickSpacing),u=!0);if(u){for(J=0;3>J;++J)K[J].sort(function(H,Q){return H.x-Q.x});p.equal(K,this.ticks)?u=!1:this.ticks=K}z("tickEnable");E("tickFont")&&(u=!0);A("tickSize");A("tickAngle");A("tickPad");C("tickColor");K=E("labels");E("labelFont")&&(K=!0);z("labelEnable");A("labelSize");A("labelPad");C("labelColor");z("lineEnable");z("lineMirror");A("lineWidth");C("lineColor");z("lineTickEnable");
z("lineTickMirror");A("lineTickLength");A("lineTickWidth");C("lineTickColor");z("gridEnable");A("gridWidth");C("gridColor");z("zeroEnable");C("zeroLineColor");A("zeroLineWidth");z("backgroundEnable");C("backgroundColor");this._text?this._text&&(K||u)&&this._text.update(this.bounds,this.labels,this.labelFont,this.ticks,this.tickFont):this._text=a(this.gl,this.bounds,this.labels,this.labelFont,this.ticks,this.tickFont);this._lines&&u&&(this._lines.dispose(),this._lines=null);this._lines||(this._lines=
h(this.gl,this.bounds,this.ticks))};var e=[new m,new m,new m],f=[0,0,0],k={model:d,view:d,projection:d,_ortho:!1};b.isOpaque=function(){return!0};b.isTransparent=function(){return!1};b.drawTransparent=function(y){};var t=[0,0,0],v=[0,0,0],w=[0,0,0];b.draw=function(y){function B(M){Q=[0,0,0];Q[M]=1}function A(M,P,T){var O=(M+1)%3;M=(M+2)%3;var U=P[O];P=P[M];var S=T[O];T=T[M];0<U&&0<T?B(O):0<U&&0>T?B(O):0>U&&0<T?B(O):0>U&&0>T?B(O):0<P&&0<S?B(M):0<P&&0>S?B(M):0>P&&0<S?B(M):0>P&&0>S&&B(M)}y=y||k;var z=
this.gl,E=y.model||d,C=y.view||d,u=y.projection||d,D=this.bounds;y=y._ortho||!1;var G=n(E,C,u,D,y),J=G.cubeEdges;G=G.axis;y=(y?2:1)*this.pixelRatio*(u[3]*C[12]+u[7]*C[13]+u[11]*C[14]+u[15]*C[15])/z.drawingBufferHeight;for(z=0;3>z;++z)this.lastCubeProps.cubeEdges[z]=J[z],this.lastCubeProps.axis[z]=G[z];for(z=0;3>z;++z)l(e[z],z,this.bounds,J,G);z=this.gl;for(z=0;3>z;++z)f[z]=this.backgroundEnable[z]?G[z]:0;this._background.draw(E,C,u,D,f,this.backgroundColor);this._lines.bind(E,C,u,this);for(z=0;3>
z;++z){var L=[0,0,0];L[z]=0<G[z]?D[1][z]:D[0][z];for(J=0;2>J;++J){var K=(z+1+J)%3,H=(z+1+(J^1))%3;this.gridEnable[K]&&this._lines.drawGrid(K,H,this.bounds,L,this.gridColor[K],this.gridWidth[K]*this.pixelRatio)}for(J=0;2>J;++J)K=(z+1+J)%3,H=(z+1+(J^1))%3,this.zeroEnable[H]&&0>=Math.min(D[0][H],D[1][H])&&0<=Math.max(D[0][H],D[1][H])&&this._lines.drawZero(K,H,this.bounds,L,this.zeroLineColor[H],this.zeroLineWidth[H]*this.pixelRatio)}for(z=0;3>z;++z){this.lineEnable[z]&&this._lines.drawAxisLine(z,this.bounds,
e[z].primalOffset,this.lineColor[z],this.lineWidth[z]*this.pixelRatio);this.lineMirror[z]&&this._lines.drawAxisLine(z,this.bounds,e[z].mirrorOffset,this.lineColor[z],this.lineWidth[z]*this.pixelRatio);G=r(t,e[z].primalMinor);L=r(v,e[z].mirrorMinor);K=this.lineTickLength;for(J=0;3>J;++J)H=y/E[5*J],G[J]=G[J]*K[J]*H,L[J]=L[J]*K[J]*H;this.lineTickEnable[z]&&this._lines.drawAxisTicks(z,e[z].primalOffset,G,this.lineTickColor[z],this.lineTickWidth[z]*this.pixelRatio);this.lineTickMirror[z]&&this._lines.drawAxisTicks(z,
e[z].mirrorOffset,L,this.lineTickColor[z],this.lineTickWidth[z]*this.pixelRatio)}this._lines.unbind();this._text.bind(E,C,u,this.pixelRatio);for(z=0;3>z;++z){C=e[z].primalMinor;u=e[z].mirrorMinor;G=r(w,e[z].primalOffset);for(J=0;3>J;++J)this.lineTickEnable[z]&&(G[J]+=y*C[J]*Math.max(this.lineTickLength[J],0)/E[5*J]);L=[0,0,0];L[z]=1;if(this.tickEnable[z]){-3600===this.tickAngle[z]?(this.tickAngle[z]=0,this.tickAlign[z]="auto"):this.tickAlign[z]=-1;J=1;K=[this.tickAlign[z],.5,J];K[0]="auto"===K[0]?
0:parseInt(""+K[0]);var Q=[0,0,0];A(z,C,u);for(J=0;3>J;++J)G[J]+=y*C[J]*this.tickPad[J]/E[5*J];this._text.drawTicks(z,this.tickSize[z],this.tickAngle[z],G,this.tickColor[z],L,Q,K)}if(this.labelEnable[z]){J=0;Q=[0,0,0];4<this.labels[z].length&&(B(z),J=1);K=[this.labelAlign[z],.5,J];K[0]="auto"===K[0]?0:parseInt(""+K[0]);for(J=0;3>J;++J)G[J]+=y*C[J]*this.labelPad[J]/E[5*J];G[z]+=.5*(D[0][z]+D[1][z]);this._text.drawLabel(z,this.labelSize[z],this.labelAngle[z],G,this.labelColor[z],[0,0,0],Q,K)}}this._text.unbind()};
b.dispose=function(){this._text.dispose();this._lines.dispose();this._background.dispose();this.gl=this._background=this._text=this._lines=null}},{"./lib/background.js":251,"./lib/cube.js":252,"./lib/lines.js":253,"./lib/text.js":255,"./lib/ticks.js":256}],251:[function(b,N,I){function r(a,h,g,n){this.gl=a;this.buffer=h;this.vao=g;this.shader=n}N.exports=function(a){for(var h=[],g=[],n=0,p=0;3>p;++p)for(var d=(p+1)%3,e=(p+2)%3,f=[0,0,0],k=[0,0,0],t=-1;1>=t;t+=2){g.push(n,n+2,n+1,n+1,n+2,n+3);f[p]=
t;k[p]=t;for(var v=-1;1>=v;v+=2){f[d]=v;for(var w=-1;1>=w;w+=2)f[e]=w,h.push(f[0],f[1],f[2],k[0],k[1],k[2]),n+=1}v=d;d=e;e=v}h=q(a,new Float32Array(h));g=q(a,new Uint16Array(g),a.ELEMENT_ARRAY_BUFFER);g=m(a,[{buffer:h,type:a.FLOAT,size:3,offset:0,stride:24},{buffer:h,type:a.FLOAT,size:3,offset:12,stride:24}],g);n=l(a);n.attributes.position.location=0;n.attributes.normal.location=1;return new r(a,h,g,n)};var q=b("gl-buffer"),m=b("gl-vao"),l=b("./shaders").bg;b=r.prototype;b.draw=function(a,h,g,n,p,
d){for(var e=!1,f=0;3>f;++f)e=e||p[f];e&&(e=this.gl,e.enable(e.POLYGON_OFFSET_FILL),e.polygonOffset(1,2),this.shader.bind(),this.shader.uniforms={model:a,view:h,projection:g,bounds:n,enable:p,colors:d},this.vao.bind(),this.vao.draw(this.gl.TRIANGLES,36),this.vao.unbind(),e.disable(e.POLYGON_OFFSET_FILL))};b.dispose=function(){this.vao.dispose();this.buffer.dispose();this.shader.dispose()}},{"./shaders":254,"gl-buffer":259,"gl-vao":358}],252:[function(b,N,I){N.exports=function(t,v,w,y,B){q(a,v,t);
q(a,w,a);for(t=v=0;2>t;++t)for(n[2]=y[t][2],w=0;2>w;++w){n[1]=y[w][1];for(var A=0;2>A;++A){n[0]=y[A][0];for(var z=h[v],E=n,C=a,u=0;4>u;++u){z[u]=C[12+u];for(var D=0;3>D;++D)z[u]+=E[D]*C[4*D+u]}v+=1}}y=-1;for(t=0;8>t;++t){v=h[t][3];for(w=0;3>w;++w)g[t][w]=h[t][w]/v;B&&(g[t][2]*=-1);0>v&&(0>y?y=t:g[t][2]<g[y][2]&&(y=t))}if(0>y)for(t=y=0;3>t;++t){v=(t+2)%3;B=(t+1)%3;A=w=-1;for(z=0;2>z;++z)E=z<<t,C=E+(z<<v)+(1-z<<B),u=E+(1-z<<v)+(z<<B),0>l(g[E],g[C],g[u],p)||(z?w=1:A=1);if(!(0>w||0>A))for(z=0;2>z;++z){E=
z<<t;C=E+(z<<v)+(1-z<<B);u=E+(1-z<<v)+(z<<B);a:{E=[h[E],h[C],h[u],h[E+(1<<v)+(1<<B)]];for(u=0;u<d.length;++u)if(E=m.positive(E,d[u]),3>E.length){E=0;break a}u=E[0];C=u[0]/u[3];D=u[1]/u[3];var G=0;for(u=1;u+1<E.length;++u){var J=E[u],L=E[u+1];G+=Math.abs((J[0]/J[3]-C)*(L[1]/L[3]-D)-(J[1]/J[3]-D)*(L[0]/L[3]-C))}E=G}z?w=E:A=E}A>w&&(y|=1<<t)}v=7^y;z=-1;for(t=0;8>t;++t)t!==y&&t!==v&&(0>z?z=t:g[z][1]>g[t][1]&&(z=t));w=-1;for(t=0;3>t;++t)E=z^1<<t,E!==y&&E!==v&&(0>w&&(w=E),B=g[E],B[0]<g[w][0]&&(w=E));A=-1;
for(t=0;3>t;++t)E=z^1<<t,E!==y&&E!==v&&E!==w&&(0>A&&(A=E),B=g[E],B[0]>g[A][0]&&(A=E));B=e;B[0]=B[1]=B[2]=0;B[r.log2(w^z)]=z&w;B[r.log2(z^A)]=z&A;t=A^7;t===y||t===v?(t=w^7,B[r.log2(A^t)]=t&A):B[r.log2(w^t)]=t&w;B=f;for(t=0;3>t;++t)B[t]=y&1<<t?-1:1;return k};var r=b("bit-twiddle"),q=b("gl-mat4/multiply"),m=b("split-polygon"),l=b("robust-orientation"),a=Array(16),h=Array(8),g=Array(8),n=Array(3),p=[0,0,0];(function(){for(var t=0;8>t;++t)h[t]=[1,1,1,1],g[t]=[1,1,1]})();var d=[[0,0,1,0,0],[0,0,-1,1,0],
[0,-1,0,1,0],[0,1,0,1,0],[-1,0,0,1,0],[1,0,0,1,0]],e=[1,1,1],f=[0,0,0],k={cubeEdges:e,axis:f}},{"bit-twiddle":97,"gl-mat4/multiply":295,"robust-orientation":548,"split-polygon":566}],253:[function(b,N,I){function r(f){f[0]=f[1]=f[2]=0;return f}function q(f,k){f[0]=k[0];f[1]=k[1];f[2]=k[2];return f}function m(f,k,t,v,w,y,B,A){this.gl=f;this.vertBuffer=k;this.vao=t;this.shader=v;this.tickCount=w;this.tickOffset=y;this.gridCount=B;this.gridOffset=A}N.exports=function(f,k,t){var v=[];k=[0,0,0];var w=
[0,0,0],y=[0,0,0],B=[0,0,0];v.push(0,0,1,0,1,1,0,0,-1,0,0,-1,0,1,1,0,1,-1);for(var A=0;3>A;++A){for(var z=v.length/3|0,E=0;E<t[A].length;++E){var C=+t[A][E].x;v.push(C,0,1,C,1,1,C,0,-1,C,0,-1,C,1,1,C,1,-1)}C=v.length/3|0;k[A]=z;w[A]=C-z;z=v.length/3|0;for(E=0;E<t[A].length;++E)C=+t[A][E].x,v.push(C,0,1,C,1,1,C,0,-1,C,0,-1,C,1,1,C,1,-1);C=v.length/3|0;y[A]=z;B[A]=C-z}t=l(f,new Float32Array(v));v=a(f,[{buffer:t,type:f.FLOAT,size:3,stride:0,offset:0}]);A=h(f);A.attributes.position.location=0;return new m(f,
t,v,A,w,k,B,y)};var l=b("gl-buffer"),a=b("gl-vao"),h=b("./shaders").line,g=[0,0,0],n=[0,0,0],p=[0,0,0],d=[0,0,0],e=[1,1];b=m.prototype;b.bind=function(f,k,t){this.shader.bind();this.shader.uniforms.model=f;this.shader.uniforms.view=k;this.shader.uniforms.projection=t;e[0]=this.gl.drawingBufferWidth;e[1]=this.gl.drawingBufferHeight;this.shader.uniforms.screenShape=e;this.vao.bind()};b.unbind=function(){this.vao.unbind()};b.drawAxisLine=function(f,k,t,v,w){var y=r(n);this.shader.uniforms.majorAxis=
n;y[f]=k[1][f]-k[0][f];this.shader.uniforms.minorAxis=y;t=q(d,t);t[f]+=k[0][f];this.shader.uniforms.offset=t;this.shader.uniforms.lineWidth=w;this.shader.uniforms.color=v;k=r(p);k[(f+2)%3]=1;this.shader.uniforms.screenAxis=k;this.vao.draw(this.gl.TRIANGLES,6);k=r(p);k[(f+1)%3]=1;this.shader.uniforms.screenAxis=k;this.vao.draw(this.gl.TRIANGLES,6)};b.drawAxisTicks=function(f,k,t,v,w){if(this.tickCount[f]){var y=r(g);y[f]=1;this.shader.uniforms.majorAxis=y;this.shader.uniforms.offset=k;this.shader.uniforms.minorAxis=
t;this.shader.uniforms.color=v;this.shader.uniforms.lineWidth=w;k=r(p);k[f]=1;this.shader.uniforms.screenAxis=k;this.vao.draw(this.gl.TRIANGLES,this.tickCount[f],this.tickOffset[f])}};b.drawGrid=function(f,k,t,v,w,y){if(this.gridCount[f]){var B=r(n);B[k]=t[1][k]-t[0][k];this.shader.uniforms.minorAxis=B;v=q(d,v);v[k]+=t[0][k];this.shader.uniforms.offset=v;k=r(g);k[f]=1;this.shader.uniforms.majorAxis=k;k=r(p);k[f]=1;this.shader.uniforms.screenAxis=k;this.shader.uniforms.lineWidth=y;this.shader.uniforms.color=
w;this.vao.draw(this.gl.TRIANGLES,this.gridCount[f],this.gridOffset[f])}};b.drawZero=function(f,k,t,v,w,y){var B=r(n);this.shader.uniforms.majorAxis=B;B[f]=t[1][f]-t[0][f];this.shader.uniforms.minorAxis=B;v=q(d,v);v[f]+=t[0][f];this.shader.uniforms.offset=v;f=r(p);f[k]=1;this.shader.uniforms.screenAxis=f;this.shader.uniforms.lineWidth=y;this.shader.uniforms.color=w;this.vao.draw(this.gl.TRIANGLES,6)};b.dispose=function(){this.vao.dispose();this.vertBuffer.dispose();this.shader.dispose()}},{"./shaders":254,
"gl-buffer":259,"gl-vao":358}],254:[function(b,N,I){N=b("glslify");var r=b("gl-shader"),q=N(["precision highp float;\n#define GLSLIFY 1\n\nattribute vec3 position;\n\nuniform mat4 model, view, projection;\nuniform vec3 offset, majorAxis, minorAxis, screenAxis;\nuniform float lineWidth;\nuniform vec2 screenShape;\n\nvec3 project(vec3 p) {\n  vec4 pp \x3d projection * view * model * vec4(p, 1.0);\n  return pp.xyz / max(pp.w, 0.0001);\n}\n\nvoid main() {\n  vec3 major \x3d position.x * majorAxis;\n  vec3 minor \x3d position.y * minorAxis;\n\n  vec3 vPosition \x3d major + minor + offset;\n  vec3 pPosition \x3d project(vPosition);\n  vec3 offset \x3d project(vPosition + screenAxis * position.z);\n\n  vec2 screen \x3d normalize((offset - pPosition).xy * screenShape) / screenShape;\n\n  gl_Position \x3d vec4(pPosition + vec3(0.5 * screen * lineWidth, 0), 1.0);\n}\n"]),
m=N(["precision highp float;\n#define GLSLIFY 1\n\nuniform vec4 color;\nvoid main() {\n  gl_FragColor \x3d color;\n}"]);I.line=function(n){return r(n,q,m,null,[{name:"position",type:"vec3"}])};var l=N(["precision highp float;\n#define GLSLIFY 1\n\nattribute vec3 position;\n\nuniform mat4 model, view, projection;\nuniform vec3 offset, axis, alignDir, alignOpt;\nuniform float scale, angle, pixelScale;\nuniform vec2 resolution;\n\nvec3 project(vec3 p) {\n  vec4 pp \x3d projection * view * model * vec4(p, 1.0);\n  return pp.xyz / max(pp.w, 0.0001);\n}\n\nfloat computeViewAngle(vec3 a, vec3 b) {\n  vec3 A \x3d project(a);\n  vec3 B \x3d project(b);\n\n  return atan(\n    (B.y - A.y) * resolution.y,\n    (B.x - A.x) * resolution.x\n  );\n}\n\nconst float PI \x3d 3.141592;\nconst float TWO_PI \x3d 2.0 * PI;\nconst float HALF_PI \x3d 0.5 * PI;\nconst float ONE_AND_HALF_PI \x3d 1.5 * PI;\n\nint option \x3d int(floor(alignOpt.x + 0.001));\nfloat hv_ratio \x3d       alignOpt.y;\nbool enableAlign \x3d    (alignOpt.z !\x3d 0.0);\n\nfloat mod_angle(float a) {\n  return mod(a, PI);\n}\n\nfloat positive_angle(float a) {\n  return mod_angle((a \x3c 0.0) ?\n    a + TWO_PI :\n    a\n  );\n}\n\nfloat look_upwards(float a) {\n  float b \x3d positive_angle(a);\n  return ((b \x3e HALF_PI) \x26\x26 (b \x3c\x3d ONE_AND_HALF_PI)) ?\n    b - PI :\n    b;\n}\n\nfloat look_horizontal_or_vertical(float a, float ratio) {\n  // ratio controls the ratio between being horizontal to (vertical + horizontal)\n  // if ratio is set to 0.5 then it is 50%, 50%.\n  // when using a higher ratio e.g. 0.75 the result would\n  // likely be more horizontal than vertical.\n\n  float b \x3d positive_angle(a);\n\n  return\n    (b \x3c (      ratio) * HALF_PI) ? 0.0 :\n    (b \x3c (2.0 - ratio) * HALF_PI) ? -HALF_PI :\n    (b \x3c (2.0 + ratio) * HALF_PI) ? 0.0 :\n    (b \x3c (4.0 - ratio) * HALF_PI) ? HALF_PI :\n                                    0.0;\n}\n\nfloat roundTo(float a, float b) {\n  return float(b * floor((a + 0.5 * b) / b));\n}\n\nfloat look_round_n_directions(float a, int n) {\n  float b \x3d positive_angle(a);\n  float div \x3d TWO_PI / float(n);\n  float c \x3d roundTo(b, div);\n  return look_upwards(c);\n}\n\nfloat applyAlignOption(float rawAngle, float delta) {\n  return\n    (option \x3e  2) ? look_round_n_directions(rawAngle + delta, option) :       // option 3-n: round to n directions\n    (option \x3d\x3d 2) ? look_horizontal_or_vertical(rawAngle + delta, hv_ratio) : // horizontal or vertical\n    (option \x3d\x3d 1) ? rawAngle + delta :       // use free angle, and flip to align with one direction of the axis\n    (option \x3d\x3d 0) ? look_upwards(rawAngle) : // use free angle, and stay upwards\n    (option \x3d\x3d-1) ? 0.0 :                    // useful for backward compatibility, all texts remains horizontal\n                    rawAngle;                // otherwise return back raw input angle\n}\n\nbool isAxisTitle \x3d (axis.x \x3d\x3d 0.0) \x26\x26\n                   (axis.y \x3d\x3d 0.0) \x26\x26\n                   (axis.z \x3d\x3d 0.0);\n\nvoid main() {\n  //Compute world offset\n  float axisDistance \x3d position.z;\n  vec3 dataPosition \x3d axisDistance * axis + offset;\n\n  float beta \x3d angle; // i.e. user defined attributes for each tick\n\n  float axisAngle;\n  float clipAngle;\n  float flip;\n\n  if (enableAlign) {\n    axisAngle \x3d (isAxisTitle) ? HALF_PI :\n                      computeViewAngle(dataPosition, dataPosition + axis);\n    clipAngle \x3d computeViewAngle(dataPosition, dataPosition + alignDir);\n\n    axisAngle +\x3d (sin(axisAngle) \x3c 0.0) ? PI : 0.0;\n    clipAngle +\x3d (sin(clipAngle) \x3c 0.0) ? PI : 0.0;\n\n    flip \x3d (dot(vec2(cos(axisAngle), sin(axisAngle)),\n                vec2(sin(clipAngle),-cos(clipAngle))) \x3e 0.0) ? 1.0 : 0.0;\n\n    beta +\x3d applyAlignOption(clipAngle, flip * PI);\n  }\n\n  //Compute plane offset\n  vec2 planeCoord \x3d position.xy * pixelScale;\n\n  mat2 planeXform \x3d scale * mat2(\n     cos(beta), sin(beta),\n    -sin(beta), cos(beta)\n  );\n\n  vec2 viewOffset \x3d 2.0 * planeXform * planeCoord / resolution;\n\n  //Compute clip position\n  vec3 clipPosition \x3d project(dataPosition);\n\n  //Apply text offset in clip coordinates\n  clipPosition +\x3d vec3(viewOffset, 0.0);\n\n  //Done\n  gl_Position \x3d vec4(clipPosition, 1.0);\n}"]),
a=N(["precision highp float;\n#define GLSLIFY 1\n\nuniform vec4 color;\nvoid main() {\n  gl_FragColor \x3d color;\n}"]);I.text=function(n){return r(n,l,a,null,[{name:"position",type:"vec3"}])};var h=N(["precision highp float;\n#define GLSLIFY 1\n\nattribute vec3 position;\nattribute vec3 normal;\n\nuniform mat4 model, view, projection;\nuniform vec3 enable;\nuniform vec3 bounds[2];\n\nvarying vec3 colorChannel;\n\nvoid main() {\n\n  vec3 signAxis \x3d sign(bounds[1] - bounds[0]);\n\n  vec3 realNormal \x3d signAxis * normal;\n\n  if(dot(realNormal, enable) \x3e 0.0) {\n    vec3 minRange \x3d min(bounds[0], bounds[1]);\n    vec3 maxRange \x3d max(bounds[0], bounds[1]);\n    vec3 nPosition \x3d mix(minRange, maxRange, 0.5 * (position + 1.0));\n    gl_Position \x3d projection * view * model * vec4(nPosition, 1.0);\n  } else {\n    gl_Position \x3d vec4(0,0,0,0);\n  }\n\n  colorChannel \x3d abs(realNormal);\n}"]),
g=N(["precision highp float;\n#define GLSLIFY 1\n\nuniform vec4 colors[3];\n\nvarying vec3 colorChannel;\n\nvoid main() {\n  gl_FragColor \x3d colorChannel.x * colors[0] +\n                 colorChannel.y * colors[1] +\n                 colorChannel.z * colors[2];\n}"]);I.bg=function(n){return r(n,h,g,null,[{name:"position",type:"vec3"},{name:"normal",type:"vec3"}])}},{"gl-shader":335,glslify:257}],255:[function(b,N,I){(function(r){(function(){function q(d,e,f,k){this.gl=d;this.shader=e;this.buffer=
f;this.vao=k;this.tickOffset=this.tickCount=this.labelOffset=this.labelCount=null}N.exports=function(d,e,f,k,t,v){var w=m(d),y=l(d,[{buffer:w,size:3}]),B=h(d);B.attributes.position.location=0;d=new q(d,B,w,y);d.update(e,f,k,t,v);return d};var m=b("gl-buffer"),l=b("gl-vao"),a=b("vectorize-text"),h=b("./shaders").text,g=window||r.global||{},n=g.__TEXT_CACHE||{};g.__TEXT_CACHE={};g=q.prototype;var p=[0,0];g.bind=function(d,e,f,k){this.vao.bind();this.shader.bind();var t=this.shader.uniforms;t.model=
d;t.view=e;t.projection=f;t.pixelScale=k;p[0]=this.gl.drawingBufferWidth;p[1]=this.gl.drawingBufferHeight;this.shader.uniforms.resolution=p};g.unbind=function(){this.vao.unbind()};g.update=function(d,e,f,k,t){function v(D,G,J,L,K,H){var Q=n[J];Q||(Q=n[J]={});var M=Q[G];if(!M){M=Q;J={triangles:!0,font:J,textAlign:"center",textBaseline:"middle",lineSpacing:K,styletags:H};try{var P=a(G,J)}catch(T){console.warn('error vectorizing text:"'+G+'" error:',T),P={cells:[],positions:[]}}M=M[G]=P}G=(L||12)/12;
L=M.positions;M=M.cells;P=0;for(J=M.length;P<J;++P)for(K=M[P],H=2;0<=H;--H)Q=L[K[H]],w.push(G*Q[0],-G*Q[1],D)}for(var w=[],y=[0,0,0],B=[0,0,0],A=[0,0,0],z=[0,0,0],E={breaklines:!0,bolds:!0,italics:!0,subscripts:!0,superscripts:!0},C=0;3>C;++C){A[C]=w.length/3|0;v(.5*(d[0][C]+d[1][C]),e[C],f[C],12,1.25,E);z[C]=(w.length/3|0)-A[C];y[C]=w.length/3|0;for(var u=0;u<k[C].length;++u)k[C][u].text&&v(k[C][u].x,k[C][u].text,k[C][u].font||t,k[C][u].fontSize||12,1.25,E);B[C]=(w.length/3|0)-y[C]}this.buffer.update(w);
this.tickOffset=y;this.tickCount=B;this.labelOffset=A;this.labelCount=z};g.drawTicks=function(d,e,f,k,t,v,w,y){this.tickCount[d]&&(this.shader.uniforms.axis=v,this.shader.uniforms.color=t,this.shader.uniforms.angle=f,this.shader.uniforms.scale=e,this.shader.uniforms.offset=k,this.shader.uniforms.alignDir=w,this.shader.uniforms.alignOpt=y,this.vao.draw(this.gl.TRIANGLES,this.tickCount[d],this.tickOffset[d]))};g.drawLabel=function(d,e,f,k,t,v,w,y){this.labelCount[d]&&(this.shader.uniforms.axis=v,this.shader.uniforms.color=
t,this.shader.uniforms.angle=f,this.shader.uniforms.scale=e,this.shader.uniforms.offset=k,this.shader.uniforms.alignDir=w,this.shader.uniforms.alignOpt=y,this.vao.draw(this.gl.TRIANGLES,this.labelCount[d],this.labelOffset[d]))};g.dispose=function(){this.shader.dispose();this.vao.dispose();this.buffer.dispose()}}).call(this)}).call(this,b("_process"))},{"./shaders":254,_process:526,"gl-buffer":259,"gl-vao":358,"vectorize-text":600}],256:[function(b,N,I){function r(q,m){var l=q+"",a=l.indexOf("."),
h=0;0<=a&&(h=l.length-a-1);l=Math.pow(10,h);q=Math.round(q*m*l);m=q+"";if(0<=m.indexOf("e"))return m;m=q/l;l=q%l;0>q?(m=-Math.ceil(m)|0,l=-l|0):(m=Math.floor(m)|0,l|=0);m=""+m;0>q&&(m="-"+m);if(h){for(l=""+l;l.length<h;)l="0"+l;return m+"."+l}return m}I.create=function(q,m){for(var l=[],a=0;3>a;++a){for(var h=[],g=0;g*m[a]<=q[1][a];++g)h.push({x:g*m[a],text:r(m[a],g)});for(g=-1;g*m[a]>=q[0][a];--g)h.push({x:g*m[a],text:r(m[a],g)});l.push(h)}return l};I.equal=function(q,m){for(var l=0;3>l;++l){if(q[l].length!==
m[l].length)return!1;for(var a=0;a<q[l].length;++a){var h=q[l][a],g=m[l][a];if(h.x!==g.x||h.text!==g.text||h.font!==g.font||h.fontColor!==g.fontColor||h.fontSize!==g.fontSize||h.dx!==g.dx||h.dy!==g.dy)return!1}}return!0}},{}],257:[function(b,N,I){N.exports=function(r){"string"===typeof r&&(r=[r]);for(var q=[].slice.call(arguments,1),m=[],l=0;l<r.length-1;l++)m.push(r[l],q[l]||"");m.push(r[l]);return m.join("")}},{}],258:[function(b,N,I){function r(t,v,w){this.lo=t;this.hi=v;this.pixelsPerDataUnit=
w}N.exports=function(t,v,w,y,B){var A=v.model||n,z=v.view||n,E=v.projection||n;v=v._ortho||!1;t=t.bounds;B=B||l(A,z,E,t,v);B=B.axis;a(p,z,A);a(p,E,p);A=f;for(z=0;3>z;++z)A[z].lo=Infinity,A[z].hi=-Infinity,A[z].pixelsPerDataUnit=Infinity;E=q(h(p,p));h(p,p);for(var C=0;3>C;++C){var u=(C+1)%3,D=(C+2)%3,G=k;z=0;a:for(;2>z;++z){var J=[];if(0>B[C]!==!!z){G[C]=t[z][C];for(var L=0;2>L;++L){G[u]=t[L^z][u];for(var K=0;2>K;++K)G[D]=t[K^L^z][D],J.push(G.slice())}for(L=K=v?5:4;L===K;++L){if(0===J.length)continue a;
J=m.positive(J,E[L])}for(L=0;L<J.length;++L){D=J[L];K=k;var H=p;for(var Q=D,M=w,P=y,T=0;3>T;++T){for(var O=d,U=e,S=0;3>S;++S)U[S]=O[S]=Q[S];U[3]=O[3]=1;U[T]+=1;g(U,U,H);0>U[3]&&(K[T]=Infinity);--O[T];g(O,O,H);0>O[3]&&(K[T]=Infinity);S=(O[0]/O[3]-U[0]/U[3])*M;O=(O[1]/O[3]-U[1]/U[3])*P;K[T]=.25*Math.sqrt(S*S+O*O)}H=K;for(K=0;3>K;++K)A[K].lo=Math.min(A[K].lo,D[K]),A[K].hi=Math.max(A[K].hi,D[K]),K!==C&&(A[K].pixelsPerDataUnit=Math.min(A[K].pixelsPerDataUnit,Math.abs(H[K])))}}}}return A};var q=b("extract-frustum-planes"),
m=b("split-polygon"),l=b("./lib/cube.js"),a=b("gl-mat4/multiply"),h=b("gl-mat4/transpose"),g=b("gl-vec4/transformMat4"),n=new Float32Array([1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1]),p=new Float32Array(16),d=[0,0,0,1],e=[0,0,0,1],f=[new r(Infinity,-Infinity,Infinity),new r(Infinity,-Infinity,Infinity),new r(Infinity,-Infinity,Infinity)],k=[0,0,0]},{"./lib/cube.js":252,"extract-frustum-planes":240,"gl-mat4/multiply":295,"gl-mat4/transpose":306,"gl-vec4/transformMat4":429,"split-polygon":566}],259:[function(b,
N,I){function r(n,p,d,e,f){this.gl=n;this.type=p;this.handle=d;this.length=e;this.usage=f}function q(n,p,d,e,f,k){var t=f.length*f.BYTES_PER_ELEMENT;if(0>k)return n.bufferData(p,f,e),t;if(t+k>d)throw Error("gl-buffer: If resizing buffer, must not specify offset");n.bufferSubData(p,k,f);return d}function m(n,p){p=l.malloc(n.length,p);for(var d=n.length,e=0;e<d;++e)p[e]=n[e];return p}var l=b("typedarray-pool"),a=b("ndarray-ops"),h=b("ndarray"),g="uint8 uint8_clamped uint16 uint32 int8 int16 int32 float32".split(" ");
b=r.prototype;b.bind=function(){this.gl.bindBuffer(this.type,this.handle)};b.unbind=function(){this.gl.bindBuffer(this.type,null)};b.dispose=function(){this.gl.deleteBuffer(this.handle)};b.update=function(n,p){"number"!==typeof p&&(p=-1);this.bind();if("object"===typeof n&&"undefined"!==typeof n.shape){var d=n.dtype;0>g.indexOf(d)&&(d="float32");this.type===this.gl.ELEMENT_ARRAY_BUFFER&&(d=gl.getExtension("OES_element_index_uint")&&"uint16"!==d?"uint32":"uint16");var e;if(e=d===n.dtype)a:{e=n.stride;
for(var f=1,k=e.length-1;0<=k;--k){if(e[k]!==f){e=!1;break a}f*=n.shape[k]}e=!0}e?this.length=0===n.offset&&n.data.length===n.shape[0]?q(this.gl,this.type,this.length,this.usage,n.data,p):q(this.gl,this.type,this.length,this.usage,n.data.subarray(n.offset,n.shape[0]),p):(d=l.malloc(n.size,d),e=h(d,n.shape),a.assign(e,n),this.length=0>p?q(this.gl,this.type,this.length,this.usage,d,p):q(this.gl,this.type,this.length,this.usage,d.subarray(0,n.size),p),l.free(d))}else if(Array.isArray(n))d=this.type===
this.gl.ELEMENT_ARRAY_BUFFER?m(n,"uint16"):m(n,"float32"),this.length=0>p?q(this.gl,this.type,this.length,this.usage,d,p):q(this.gl,this.type,this.length,this.usage,d.subarray(0,n.length),p),l.free(d);else if("object"===typeof n&&"number"===typeof n.length)this.length=q(this.gl,this.type,this.length,this.usage,n,p);else if("number"===typeof n||void 0===n){if(0<=p)throw Error("gl-buffer: Cannot specify offset when resizing buffer");n|=0;0>=n&&(n=1);this.gl.bufferData(this.type,n|0,this.usage);this.length=
n}else throw Error("gl-buffer: Invalid data type");};N.exports=function(n,p,d,e){d=d||n.ARRAY_BUFFER;e=e||n.DYNAMIC_DRAW;if(d!==n.ARRAY_BUFFER&&d!==n.ELEMENT_ARRAY_BUFFER)throw Error("gl-buffer: Invalid type for webgl buffer, must be either gl.ARRAY_BUFFER or gl.ELEMENT_ARRAY_BUFFER");if(e!==n.DYNAMIC_DRAW&&e!==n.STATIC_DRAW&&e!==n.STREAM_DRAW)throw Error("gl-buffer: Invalid usage for buffer, must be either gl.DYNAMIC_DRAW, gl.STATIC_DRAW or gl.STREAM_DRAW");var f=n.createBuffer();n=new r(n,d,f,0,
e);n.update(p);return n}},{ndarray:495,"ndarray-ops":490,"typedarray-pool":595}],260:[function(b,N,I){var r=b("gl-vec3");N.exports=function(m,l){var a=m.positions,h=m.vectors,g={positions:[],vertexIntensity:[],vertexIntensityBounds:m.vertexIntensityBounds,vectors:[],cells:[],coneOffset:m.coneOffset,colormap:m.colormap};if(0===m.positions.length)return l&&(l[0]=[0,0,0],l[1]=[0,0,0]),g;for(var n=0,p=Infinity,d=-Infinity,e=Infinity,f=-Infinity,k=Infinity,t=-Infinity,v=null,w=null,y=[],B=Infinity,A=!1,
z=0;z<a.length;z++){var E=a[z];p=Math.min(E[0],p);d=Math.max(E[0],d);e=Math.min(E[1],e);f=Math.max(E[1],f);k=Math.min(E[2],k);t=Math.max(E[2],t);var C=h[z];r.length(C)>n&&(n=r.length(C));z&&((A=2*r.distance(v,E)/(r.length(w)+r.length(C)))?(B=Math.min(B,A),A=!1):A=!0);A||(v=E,w=C);y.push(C)}z=[p,e,k];E=[d,f,t];l&&(l[0]=z,l[1]=E);0===n&&(n=1);l=1/n;isFinite(B)||(B=1);g.vectorScale=B;z=m.coneSize||.5;m.absoluteConeSize&&(z=m.absoluteConeSize*l);g.coneScale=z;for(m=z=0;z<a.length;z++)for(E=a[z],B=E[0],
n=E[1],E=E[2],d=y[z],f=r.length(d)*l,t=0;8>t;t++)g.positions.push([B,n,E,m++]),g.positions.push([B,n,E,m++]),g.positions.push([B,n,E,m++]),g.positions.push([B,n,E,m++]),g.positions.push([B,n,E,m++]),g.positions.push([B,n,E,m++]),g.vectors.push(d),g.vectors.push(d),g.vectors.push(d),g.vectors.push(d),g.vectors.push(d),g.vectors.push(d),g.vertexIntensity.push(f,f,f),g.vertexIntensity.push(f,f,f),h=g.positions.length,g.cells.push([h-6,h-5,h-4],[h-3,h-2,h-1]);return g};var q=b("./lib/shaders");N.exports.createMesh=
b("./create_mesh");N.exports.createConeMesh=function(m,l){return N.exports.createMesh(m,l,{shaders:q,traceType:"cone"})}},{"./create_mesh":261,"./lib/shaders":262,"gl-vec3":377}],261:[function(b,N,I){function r(e,f,k,t,v,w,y,B,A,z,E){this.gl=e;this.pixelRatio=1;this.cells=[];this.positions=[];this.intensity=[];this.texture=f;this.dirty=!0;this.triShader=k;this.pickShader=t;this.trianglePositions=v;this.triangleVectors=w;this.triangleColors=B;this.triangleUVs=A;this.triangleIds=y;this.triangleVAO=
z;this.triangleCount=0;this.pickId=1;this.bounds=[[Infinity,Infinity,Infinity],[-Infinity,-Infinity,-Infinity]];this.clipBounds=[[-Infinity,-Infinity,-Infinity],[Infinity,Infinity,Infinity]];this.lightPosition=[1E5,1E5,0];this.diffuseLight=this.ambientLight=.8;this.specularLight=2;this.roughness=.5;this.fresnel=1.5;this.opacity=1;this.traceType=E;this.tubeScale=1;this.coneScale=2;this.vectorScale=1;this.coneOffset=.25;this._projection=this._view=this._model=d;this._resolution=[1,1]}var q=b("gl-shader"),
m=b("gl-buffer"),l=b("gl-vao"),a=b("gl-texture2d"),h=b("gl-mat4/multiply"),g=b("gl-mat4/invert"),n=b("ndarray"),p=b("colormap"),d=[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1];b=r.prototype;b.isOpaque=function(){return 1<=this.opacity};b.isTransparent=function(){return 1>this.opacity};b.pickSlots=1;b.setPickBase=function(e){this.pickId=e};b.update=function(e){e=e||{};var f=this.gl;this.dirty=!0;"lightPosition"in e&&(this.lightPosition=e.lightPosition);"opacity"in e&&(this.opacity=e.opacity);"ambient"in e&&(this.ambientLight=
e.ambient);"diffuse"in e&&(this.diffuseLight=e.diffuse);"specular"in e&&(this.specularLight=e.specular);"roughness"in e&&(this.roughness=e.roughness);"fresnel"in e&&(this.fresnel=e.fresnel);void 0!==e.tubeScale&&(this.tubeScale=e.tubeScale);void 0!==e.vectorScale&&(this.vectorScale=e.vectorScale);void 0!==e.coneScale&&(this.coneScale=e.coneScale);void 0!==e.coneOffset&&(this.coneOffset=e.coneOffset);if(e.colormap){this.texture.shape=[256,256];this.texture.minFilter=f.LINEAR_MIPMAP_LINEAR;this.texture.magFilter=
f.LINEAR;f=this.texture;var k=f.setPixels;var t=p({colormap:e.colormap,nshades:256,format:"rgba"});for(var v=new Uint8Array(1024),w=0;256>w;++w){for(var y=t[w],B=0;3>B;++B)v[4*w+B]=y[B];v[4*w+3]=255*y[3]}t=n(v,[256,256,4],[4,0,1]);k.call(f,t);this.texture.generateMipmap()}f=e.cells;k=e.positions;t=e.vectors;if(k&&f&&t){v=[];w=[];y=[];B=[];var A=[];this.cells=f;this.positions=k;this.vectors=t;var z=e.meshColor||[1,1,1,1],E=e.vertexIntensity,C=Infinity,u=-Infinity;if(E)if(e.vertexIntensityBounds)C=
+e.vertexIntensityBounds[0],u=+e.vertexIntensityBounds[1];else for(e=0;e<E.length;++e){var D=E[e];C=Math.min(C,D);u=Math.max(u,D)}else for(e=0;e<k.length;++e)D=k[e][2],C=Math.min(C,D),u=Math.max(u,D);if(E)this.intensity=E;else{e=k.length;D=Array(e);for(var G=0;G<e;++G)D[G]=k[G][2];this.intensity=D}this.bounds=[[Infinity,Infinity,Infinity],[-Infinity,-Infinity,-Infinity]];for(e=0;e<k.length;++e){var J=k[e];for(D=0;3>D;++D)!isNaN(J[D])&&isFinite(J[D])&&(this.bounds[0][D]=Math.min(this.bounds[0][D],
J[D]),this.bounds[1][D]=Math.max(this.bounds[1][D],J[D]))}e=G=0;a:for(;e<f.length;++e){var L=f[e];switch(L.length){case 3:for(D=0;3>D;++D){var K=L[D];J=k[K];for(K=0;3>K;++K)if(isNaN(J[K])||!isFinite(J[K]))continue a}for(D=0;3>D;++D){K=L[2-D];J=k[K];v.push(J[0],J[1],J[2],J[3]);var H=t[K];w.push(H[0],H[1],H[2],H[3]||0);H=z;3===H.length?y.push(H[0],H[1],H[2],1):y.push(H[0],H[1],H[2],H[3]);J=E?[(E[K]-C)/(u-C),0]:[(J[2]-C)/(u-C),0];B.push(J[0],J[1]);A.push(e)}G+=1}}this.triangleCount=G;this.trianglePositions.update(v);
this.triangleVectors.update(w);this.triangleColors.update(y);this.triangleUVs.update(B);this.triangleIds.update(new Uint32Array(A))}};b.drawTransparent=b.draw=function(e){e=e||{};var f=this.gl,k=e.model||d,t=e.view||d,v=e.projection||d,w=[[-1E6,-1E6,-1E6],[1E6,1E6,1E6]];for(e=0;3>e;++e)w[0][e]=Math.max(w[0][e],this.clipBounds[0][e]),w[1][e]=Math.min(w[1][e],this.clipBounds[1][e]);k={model:k,view:t,projection:v,inverseModel:d.slice(),clipBounds:w,kambient:this.ambientLight,kdiffuse:this.diffuseLight,
kspecular:this.specularLight,roughness:this.roughness,fresnel:this.fresnel,eyePosition:[0,0,0],lightPosition:[0,0,0],opacity:this.opacity,tubeScale:this.tubeScale,vectorScale:this.vectorScale,coneScale:this.coneScale,coneOffset:this.coneOffset,texture:0};k.inverseModel=g(k.inverseModel,k.model);f.disable(f.CULL_FACE);this.texture.bind(0);t=Array(16);h(t,k.view,k.model);h(t,k.projection,t);g(t,t);for(e=0;3>e;++e)k.eyePosition[e]=t[12+e]/t[15];v=t[15];for(e=0;3>e;++e)v+=this.lightPosition[e]*t[4*e+
3];for(e=0;3>e;++e){w=t[12+e];for(var y=0;3>y;++y)w+=t[4*y+e]*this.lightPosition[y];k.lightPosition[e]=w/v}0<this.triangleCount&&(e=this.triShader,e.bind(),e.uniforms=k,this.triangleVAO.bind(),f.drawArrays(f.TRIANGLES,0,3*this.triangleCount),this.triangleVAO.unbind())};b.drawPick=function(e){e=e||{};var f=this.gl,k=e.model||d,t=e.view||d;e=e.projection||d;for(var v=[[-1E6,-1E6,-1E6],[1E6,1E6,1E6]],w=0;3>w;++w)v[0][w]=Math.max(v[0][w],this.clipBounds[0][w]),v[1][w]=Math.min(v[1][w],this.clipBounds[1][w]);
this._model=[].slice.call(k);this._view=[].slice.call(t);this._projection=[].slice.call(e);this._resolution=[f.drawingBufferWidth,f.drawingBufferHeight];k={model:k,view:t,projection:e,clipBounds:v,tubeScale:this.tubeScale,vectorScale:this.vectorScale,coneScale:this.coneScale,coneOffset:this.coneOffset,pickId:this.pickId/255};t=this.pickShader;t.bind();t.uniforms=k;0<this.triangleCount&&(this.triangleVAO.bind(),f.drawArrays(f.TRIANGLES,0,3*this.triangleCount),this.triangleVAO.unbind())};b.pick=function(e){if(!e||
e.id!==this.pickId)return null;e=e.value[0]+256*e.value[1]+65536*e.value[2];var f=this.cells[e],k=this.positions[f[1]].slice(0,3);k={position:k,dataCoordinate:k,index:Math.floor(f[1]/48)};"cone"===this.traceType?k.index=Math.floor(f[1]/48):"streamtube"===this.traceType&&(k.intensity=this.intensity[f[1]],k.velocity=this.vectors[f[1]].slice(0,3),k.divergence=this.vectors[f[1]][3],k.index=e);return k};b.dispose=function(){this.texture.dispose();this.triShader.dispose();this.pickShader.dispose();this.triangleVAO.dispose();
this.trianglePositions.dispose();this.triangleVectors.dispose();this.triangleColors.dispose();this.triangleUVs.dispose();this.triangleIds.dispose()};N.exports=function(e,f,k){var t=k.shaders;1===arguments.length&&(f=e,e=f.gl);var v=q(e,t.meshShader.vertex,t.meshShader.fragment,null,t.meshShader.attributes);v.attributes.position.location=0;v.attributes.color.location=2;v.attributes.uv.location=3;v.attributes.vector.location=4;t=q(e,t.pickShader.vertex,t.pickShader.fragment,null,t.pickShader.attributes);
t.attributes.position.location=0;t.attributes.id.location=1;t.attributes.vector.location=4;var w=a(e,n(new Uint8Array([255,255,255,255]),[1,1,4]));w.generateMipmap();w.minFilter=e.LINEAR_MIPMAP_LINEAR;w.magFilter=e.LINEAR;var y=m(e),B=m(e),A=m(e),z=m(e),E=m(e),C=l(e,[{buffer:y,type:e.FLOAT,size:4},{buffer:E,type:e.UNSIGNED_BYTE,size:4,normalized:!0},{buffer:A,type:e.FLOAT,size:4},{buffer:z,type:e.FLOAT,size:2},{buffer:B,type:e.FLOAT,size:4}]);v=new r(e,w,v,t,y,B,E,A,z,C,k.traceType||"cone");v.update(f);
return v}},{colormap:131,"gl-buffer":259,"gl-mat4/invert":293,"gl-mat4/multiply":295,"gl-shader":335,"gl-texture2d":353,"gl-vao":358,ndarray:495}],262:[function(b,N,I){var r=b("glslify");b=r(["precision highp float;\n\nprecision highp float;\n#define GLSLIFY 1\n\nvec3 getOrthogonalVector(vec3 v) {\n  // Return up-vector for only-z vector.\n  // Return ax + by + cz \x3d 0, a point that lies on the plane that has v as a normal and that isn't (0,0,0).\n  // From the above if-statement we have ||a|| \x3e 0  U  ||b|| \x3e 0.\n  // Assign z \x3d 0, x \x3d -b, y \x3d a:\n  // a*-b + b*a + c*0 \x3d -ba + ba + 0 \x3d 0\n  if (v.x*v.x \x3e v.z*v.z || v.y*v.y \x3e v.z*v.z) {\n    return normalize(vec3(-v.y, v.x, 0.0));\n  } else {\n    return normalize(vec3(0.0, v.z, -v.y));\n  }\n}\n\n// Calculate the cone vertex and normal at the given index.\n//\n// The returned vertex is for a cone with its top at origin and height of 1.0,\n// pointing in the direction of the vector attribute.\n//\n// Each cone is made up of a top vertex, a center base vertex and base perimeter vertices.\n// These vertices are used to make up the triangles of the cone by the following:\n//   segment + 0 top vertex\n//   segment + 1 perimeter vertex a+1\n//   segment + 2 perimeter vertex a\n//   segment + 3 center base vertex\n//   segment + 4 perimeter vertex a\n//   segment + 5 perimeter vertex a+1\n// Where segment is the number of the radial segment * 6 and a is the angle at that radial segment.\n// To go from index to segment, floor(index / 6)\n// To go from segment to angle, 2*pi * (segment/segmentCount)\n// To go from index to segment index, index - (segment*6)\n//\nvec3 getConePosition(vec3 d, float rawIndex, float coneOffset, out vec3 normal) {\n\n  const float segmentCount \x3d 8.0;\n\n  float index \x3d rawIndex - floor(rawIndex /\n    (segmentCount * 6.0)) *\n    (segmentCount * 6.0);\n\n  float segment \x3d floor(0.001 + index/6.0);\n  float segmentIndex \x3d index - (segment*6.0);\n\n  normal \x3d -normalize(d);\n\n  if (segmentIndex \x3e 2.99 \x26\x26 segmentIndex \x3c 3.01) {\n    return mix(vec3(0.0), -d, coneOffset);\n  }\n\n  float nextAngle \x3d (\n    (segmentIndex \x3e 0.99 \x26\x26  segmentIndex \x3c 1.01) ||\n    (segmentIndex \x3e 4.99 \x26\x26  segmentIndex \x3c 5.01)\n  ) ? 1.0 : 0.0;\n  float angle \x3d 2.0 * 3.14159 * ((segment + nextAngle) / segmentCount);\n\n  vec3 v1 \x3d mix(d, vec3(0.0), coneOffset);\n  vec3 v2 \x3d v1 - d;\n\n  vec3 u \x3d getOrthogonalVector(d);\n  vec3 v \x3d normalize(cross(u, d));\n\n  vec3 x \x3d u * cos(angle) * length(d)*0.25;\n  vec3 y \x3d v * sin(angle) * length(d)*0.25;\n  vec3 v3 \x3d v2 + x + y;\n  if (segmentIndex \x3c 3.0) {\n    vec3 tx \x3d u * sin(angle);\n    vec3 ty \x3d v * -cos(angle);\n    vec3 tangent \x3d tx + ty;\n    normal \x3d normalize(cross(v3 - v1, tangent));\n  }\n\n  if (segmentIndex \x3d\x3d 0.0) {\n    return mix(d, vec3(0.0), coneOffset);\n  }\n  return v3;\n}\n\nattribute vec3 vector;\nattribute vec4 color, position;\nattribute vec2 uv;\n\nuniform float vectorScale, coneScale, coneOffset;\nuniform mat4 model, view, projection, inverseModel;\nuniform vec3 eyePosition, lightPosition;\n\nvarying vec3 f_normal, f_lightDirection, f_eyeDirection, f_data, f_position;\nvarying vec4 f_color;\nvarying vec2 f_uv;\n\nvoid main() {\n  // Scale the vector magnitude to stay constant with\n  // model \x26 view changes.\n  vec3 normal;\n  vec3 XYZ \x3d getConePosition(mat3(model) * ((vectorScale * coneScale) * vector), position.w, coneOffset, normal);\n  vec4 conePosition \x3d model * vec4(position.xyz, 1.0) + vec4(XYZ, 0.0);\n\n  //Lighting geometry parameters\n  vec4 cameraCoordinate \x3d view * conePosition;\n  cameraCoordinate.xyz /\x3d cameraCoordinate.w;\n  f_lightDirection \x3d lightPosition - cameraCoordinate.xyz;\n  f_eyeDirection   \x3d eyePosition - cameraCoordinate.xyz;\n  f_normal \x3d normalize((vec4(normal, 0.0) * inverseModel).xyz);\n\n  // vec4 m_position  \x3d model * vec4(conePosition, 1.0);\n  vec4 t_position  \x3d view * conePosition;\n  gl_Position      \x3d projection * t_position;\n\n  f_color          \x3d color;\n  f_data           \x3d conePosition.xyz;\n  f_position       \x3d position.xyz;\n  f_uv             \x3d uv;\n}\n"]);
N=r(["#extension GL_OES_standard_derivatives : enable\n\nprecision highp float;\n#define GLSLIFY 1\n\nfloat beckmannDistribution(float x, float roughness) {\n  float NdotH \x3d max(x, 0.0001);\n  float cos2Alpha \x3d NdotH * NdotH;\n  float tan2Alpha \x3d (cos2Alpha - 1.0) / cos2Alpha;\n  float roughness2 \x3d roughness * roughness;\n  float denom \x3d 3.141592653589793 * roughness2 * cos2Alpha * cos2Alpha;\n  return exp(tan2Alpha / roughness2) / denom;\n}\n\nfloat cookTorranceSpecular(\n  vec3 lightDirection,\n  vec3 viewDirection,\n  vec3 surfaceNormal,\n  float roughness,\n  float fresnel) {\n\n  float VdotN \x3d max(dot(viewDirection, surfaceNormal), 0.0);\n  float LdotN \x3d max(dot(lightDirection, surfaceNormal), 0.0);\n\n  //Half angle vector\n  vec3 H \x3d normalize(lightDirection + viewDirection);\n\n  //Geometric term\n  float NdotH \x3d max(dot(surfaceNormal, H), 0.0);\n  float VdotH \x3d max(dot(viewDirection, H), 0.000001);\n  float LdotH \x3d max(dot(lightDirection, H), 0.000001);\n  float G1 \x3d (2.0 * NdotH * VdotN) / VdotH;\n  float G2 \x3d (2.0 * NdotH * LdotN) / LdotH;\n  float G \x3d min(1.0, min(G1, G2));\n  \n  //Distribution term\n  float D \x3d beckmannDistribution(NdotH, roughness);\n\n  //Fresnel term\n  float F \x3d pow(1.0 - VdotN, fresnel);\n\n  //Multiply terms and done\n  return  G * F * D / max(3.14159265 * VdotN, 0.000001);\n}\n\nbool outOfRange(float a, float b, float p) {\n  return ((p \x3e max(a, b)) || \n          (p \x3c min(a, b)));\n}\n\nbool outOfRange(vec2 a, vec2 b, vec2 p) {\n  return (outOfRange(a.x, b.x, p.x) ||\n          outOfRange(a.y, b.y, p.y));\n}\n\nbool outOfRange(vec3 a, vec3 b, vec3 p) {\n  return (outOfRange(a.x, b.x, p.x) ||\n          outOfRange(a.y, b.y, p.y) ||\n          outOfRange(a.z, b.z, p.z));\n}\n\nbool outOfRange(vec4 a, vec4 b, vec4 p) {\n  return outOfRange(a.xyz, b.xyz, p.xyz);\n}\n\nuniform vec3 clipBounds[2];\nuniform float roughness, fresnel, kambient, kdiffuse, kspecular, opacity;\nuniform sampler2D texture;\n\nvarying vec3 f_normal, f_lightDirection, f_eyeDirection, f_data, f_position;\nvarying vec4 f_color;\nvarying vec2 f_uv;\n\nvoid main() {\n  if (outOfRange(clipBounds[0], clipBounds[1], f_position)) discard;\n  vec3 N \x3d normalize(f_normal);\n  vec3 L \x3d normalize(f_lightDirection);\n  vec3 V \x3d normalize(f_eyeDirection);\n\n  if(gl_FrontFacing) {\n    N \x3d -N;\n  }\n\n  float specular \x3d min(1.0, max(0.0, cookTorranceSpecular(L, V, N, roughness, fresnel)));\n  float diffuse  \x3d min(kambient + kdiffuse * max(dot(N, L), 0.0), 1.0);\n\n  vec4 surfaceColor \x3d f_color * texture2D(texture, f_uv);\n  vec4 litColor \x3d surfaceColor.a * vec4(diffuse * surfaceColor.rgb + kspecular * vec3(1,1,1) * specular,  1.0);\n\n  gl_FragColor \x3d litColor * opacity;\n}\n"]);
var q=r(["precision highp float;\n\nprecision highp float;\n#define GLSLIFY 1\n\nvec3 getOrthogonalVector(vec3 v) {\n  // Return up-vector for only-z vector.\n  // Return ax + by + cz \x3d 0, a point that lies on the plane that has v as a normal and that isn't (0,0,0).\n  // From the above if-statement we have ||a|| \x3e 0  U  ||b|| \x3e 0.\n  // Assign z \x3d 0, x \x3d -b, y \x3d a:\n  // a*-b + b*a + c*0 \x3d -ba + ba + 0 \x3d 0\n  if (v.x*v.x \x3e v.z*v.z || v.y*v.y \x3e v.z*v.z) {\n    return normalize(vec3(-v.y, v.x, 0.0));\n  } else {\n    return normalize(vec3(0.0, v.z, -v.y));\n  }\n}\n\n// Calculate the cone vertex and normal at the given index.\n//\n// The returned vertex is for a cone with its top at origin and height of 1.0,\n// pointing in the direction of the vector attribute.\n//\n// Each cone is made up of a top vertex, a center base vertex and base perimeter vertices.\n// These vertices are used to make up the triangles of the cone by the following:\n//   segment + 0 top vertex\n//   segment + 1 perimeter vertex a+1\n//   segment + 2 perimeter vertex a\n//   segment + 3 center base vertex\n//   segment + 4 perimeter vertex a\n//   segment + 5 perimeter vertex a+1\n// Where segment is the number of the radial segment * 6 and a is the angle at that radial segment.\n// To go from index to segment, floor(index / 6)\n// To go from segment to angle, 2*pi * (segment/segmentCount)\n// To go from index to segment index, index - (segment*6)\n//\nvec3 getConePosition(vec3 d, float rawIndex, float coneOffset, out vec3 normal) {\n\n  const float segmentCount \x3d 8.0;\n\n  float index \x3d rawIndex - floor(rawIndex /\n    (segmentCount * 6.0)) *\n    (segmentCount * 6.0);\n\n  float segment \x3d floor(0.001 + index/6.0);\n  float segmentIndex \x3d index - (segment*6.0);\n\n  normal \x3d -normalize(d);\n\n  if (segmentIndex \x3e 2.99 \x26\x26 segmentIndex \x3c 3.01) {\n    return mix(vec3(0.0), -d, coneOffset);\n  }\n\n  float nextAngle \x3d (\n    (segmentIndex \x3e 0.99 \x26\x26  segmentIndex \x3c 1.01) ||\n    (segmentIndex \x3e 4.99 \x26\x26  segmentIndex \x3c 5.01)\n  ) ? 1.0 : 0.0;\n  float angle \x3d 2.0 * 3.14159 * ((segment + nextAngle) / segmentCount);\n\n  vec3 v1 \x3d mix(d, vec3(0.0), coneOffset);\n  vec3 v2 \x3d v1 - d;\n\n  vec3 u \x3d getOrthogonalVector(d);\n  vec3 v \x3d normalize(cross(u, d));\n\n  vec3 x \x3d u * cos(angle) * length(d)*0.25;\n  vec3 y \x3d v * sin(angle) * length(d)*0.25;\n  vec3 v3 \x3d v2 + x + y;\n  if (segmentIndex \x3c 3.0) {\n    vec3 tx \x3d u * sin(angle);\n    vec3 ty \x3d v * -cos(angle);\n    vec3 tangent \x3d tx + ty;\n    normal \x3d normalize(cross(v3 - v1, tangent));\n  }\n\n  if (segmentIndex \x3d\x3d 0.0) {\n    return mix(d, vec3(0.0), coneOffset);\n  }\n  return v3;\n}\n\nattribute vec4 vector;\nattribute vec4 position;\nattribute vec4 id;\n\nuniform mat4 model, view, projection;\nuniform float vectorScale, coneScale, coneOffset;\n\nvarying vec3 f_position;\nvarying vec4 f_id;\n\nvoid main() {\n  vec3 normal;\n  vec3 XYZ \x3d getConePosition(mat3(model) * ((vectorScale * coneScale) * vector.xyz), position.w, coneOffset, normal);\n  vec4 conePosition \x3d model * vec4(position.xyz, 1.0) + vec4(XYZ, 0.0);\n  gl_Position \x3d projection * view * conePosition;\n  f_id        \x3d id;\n  f_position  \x3d position.xyz;\n}\n"]);
r=r(["precision highp float;\n#define GLSLIFY 1\n\nbool outOfRange(float a, float b, float p) {\n  return ((p \x3e max(a, b)) || \n          (p \x3c min(a, b)));\n}\n\nbool outOfRange(vec2 a, vec2 b, vec2 p) {\n  return (outOfRange(a.x, b.x, p.x) ||\n          outOfRange(a.y, b.y, p.y));\n}\n\nbool outOfRange(vec3 a, vec3 b, vec3 p) {\n  return (outOfRange(a.x, b.x, p.x) ||\n          outOfRange(a.y, b.y, p.y) ||\n          outOfRange(a.z, b.z, p.z));\n}\n\nbool outOfRange(vec4 a, vec4 b, vec4 p) {\n  return outOfRange(a.xyz, b.xyz, p.xyz);\n}\n\nuniform vec3  clipBounds[2];\nuniform float pickId;\n\nvarying vec3 f_position;\nvarying vec4 f_id;\n\nvoid main() {\n  if (outOfRange(clipBounds[0], clipBounds[1], f_position)) discard;\n\n  gl_FragColor \x3d vec4(pickId, f_id.xyz);\n}"]);
I.meshShader={vertex:b,fragment:N,attributes:[{name:"position",type:"vec4"},{name:"color",type:"vec4"},{name:"uv",type:"vec2"},{name:"vector",type:"vec3"}]};I.pickShader={vertex:q,fragment:r,attributes:[{name:"position",type:"vec4"},{name:"id",type:"vec4"},{name:"vector",type:"vec3"}]}},{glslify:263}],263:[function(b,N,I){arguments[4][257][0].apply(I,arguments)},{dup:257}],264:[function(b,N,I){N.exports={0:"NONE",1:"ONE",2:"LINE_LOOP",3:"LINE_STRIP",4:"TRIANGLES",5:"TRIANGLE_STRIP",6:"TRIANGLE_FAN",
256:"DEPTH_BUFFER_BIT",512:"NEVER",513:"LESS",514:"EQUAL",515:"LEQUAL",516:"GREATER",517:"NOTEQUAL",518:"GEQUAL",519:"ALWAYS",768:"SRC_COLOR",769:"ONE_MINUS_SRC_COLOR",770:"SRC_ALPHA",771:"ONE_MINUS_SRC_ALPHA",772:"DST_ALPHA",773:"ONE_MINUS_DST_ALPHA",774:"DST_COLOR",775:"ONE_MINUS_DST_COLOR",776:"SRC_ALPHA_SATURATE",1024:"STENCIL_BUFFER_BIT",1028:"FRONT",1029:"BACK",1032:"FRONT_AND_BACK",1280:"INVALID_ENUM",1281:"INVALID_VALUE",1282:"INVALID_OPERATION",1285:"OUT_OF_MEMORY",1286:"INVALID_FRAMEBUFFER_OPERATION",
2304:"CW",2305:"CCW",2849:"LINE_WIDTH",2884:"CULL_FACE",2885:"CULL_FACE_MODE",2886:"FRONT_FACE",2928:"DEPTH_RANGE",2929:"DEPTH_TEST",2930:"DEPTH_WRITEMASK",2931:"DEPTH_CLEAR_VALUE",2932:"DEPTH_FUNC",2960:"STENCIL_TEST",2961:"STENCIL_CLEAR_VALUE",2962:"STENCIL_FUNC",2963:"STENCIL_VALUE_MASK",2964:"STENCIL_FAIL",2965:"STENCIL_PASS_DEPTH_FAIL",2966:"STENCIL_PASS_DEPTH_PASS",2967:"STENCIL_REF",2968:"STENCIL_WRITEMASK",2978:"VIEWPORT",3024:"DITHER",3042:"BLEND",3088:"SCISSOR_BOX",3089:"SCISSOR_TEST",3106:"COLOR_CLEAR_VALUE",
3107:"COLOR_WRITEMASK",3317:"UNPACK_ALIGNMENT",3333:"PACK_ALIGNMENT",3379:"MAX_TEXTURE_SIZE",3386:"MAX_VIEWPORT_DIMS",3408:"SUBPIXEL_BITS",3410:"RED_BITS",3411:"GREEN_BITS",3412:"BLUE_BITS",3413:"ALPHA_BITS",3414:"DEPTH_BITS",3415:"STENCIL_BITS",3553:"TEXTURE_2D",4352:"DONT_CARE",4353:"FASTEST",4354:"NICEST",5120:"BYTE",5121:"UNSIGNED_BYTE",5122:"SHORT",5123:"UNSIGNED_SHORT",5124:"INT",5125:"UNSIGNED_INT",5126:"FLOAT",5386:"INVERT",5890:"TEXTURE",6401:"STENCIL_INDEX",6402:"DEPTH_COMPONENT",6406:"ALPHA",
6407:"RGB",6408:"RGBA",6409:"LUMINANCE",6410:"LUMINANCE_ALPHA",7680:"KEEP",7681:"REPLACE",7682:"INCR",7683:"DECR",7936:"VENDOR",7937:"RENDERER",7938:"VERSION",9728:"NEAREST",9729:"LINEAR",9984:"NEAREST_MIPMAP_NEAREST",9985:"LINEAR_MIPMAP_NEAREST",9986:"NEAREST_MIPMAP_LINEAR",9987:"LINEAR_MIPMAP_LINEAR",10240:"TEXTURE_MAG_FILTER",10241:"TEXTURE_MIN_FILTER",10242:"TEXTURE_WRAP_S",10243:"TEXTURE_WRAP_T",10497:"REPEAT",10752:"POLYGON_OFFSET_UNITS",16384:"COLOR_BUFFER_BIT",32769:"CONSTANT_COLOR",32770:"ONE_MINUS_CONSTANT_COLOR",
32771:"CONSTANT_ALPHA",32772:"ONE_MINUS_CONSTANT_ALPHA",32773:"BLEND_COLOR",32774:"FUNC_ADD",32777:"BLEND_EQUATION_RGB",32778:"FUNC_SUBTRACT",32779:"FUNC_REVERSE_SUBTRACT",32819:"UNSIGNED_SHORT_4_4_4_4",32820:"UNSIGNED_SHORT_5_5_5_1",32823:"POLYGON_OFFSET_FILL",32824:"POLYGON_OFFSET_FACTOR",32854:"RGBA4",32855:"RGB5_A1",32873:"TEXTURE_BINDING_2D",32926:"SAMPLE_ALPHA_TO_COVERAGE",32928:"SAMPLE_COVERAGE",32936:"SAMPLE_BUFFERS",32937:"SAMPLES",32938:"SAMPLE_COVERAGE_VALUE",32939:"SAMPLE_COVERAGE_INVERT",
32968:"BLEND_DST_RGB",32969:"BLEND_SRC_RGB",32970:"BLEND_DST_ALPHA",32971:"BLEND_SRC_ALPHA",33071:"CLAMP_TO_EDGE",33170:"GENERATE_MIPMAP_HINT",33189:"DEPTH_COMPONENT16",33306:"DEPTH_STENCIL_ATTACHMENT",33635:"UNSIGNED_SHORT_5_6_5",33648:"MIRRORED_REPEAT",33901:"ALIASED_POINT_SIZE_RANGE",33902:"ALIASED_LINE_WIDTH_RANGE",33984:"TEXTURE0",33985:"TEXTURE1",33986:"TEXTURE2",33987:"TEXTURE3",33988:"TEXTURE4",33989:"TEXTURE5",33990:"TEXTURE6",33991:"TEXTURE7",33992:"TEXTURE8",33993:"TEXTURE9",33994:"TEXTURE10",
33995:"TEXTURE11",33996:"TEXTURE12",33997:"TEXTURE13",33998:"TEXTURE14",33999:"TEXTURE15",34E3:"TEXTURE16",34001:"TEXTURE17",34002:"TEXTURE18",34003:"TEXTURE19",34004:"TEXTURE20",34005:"TEXTURE21",34006:"TEXTURE22",34007:"TEXTURE23",34008:"TEXTURE24",34009:"TEXTURE25",34010:"TEXTURE26",34011:"TEXTURE27",34012:"TEXTURE28",34013:"TEXTURE29",34014:"TEXTURE30",34015:"TEXTURE31",34016:"ACTIVE_TEXTURE",34024:"MAX_RENDERBUFFER_SIZE",34041:"DEPTH_STENCIL",34055:"INCR_WRAP",34056:"DECR_WRAP",34067:"TEXTURE_CUBE_MAP",
34068:"TEXTURE_BINDING_CUBE_MAP",34069:"TEXTURE_CUBE_MAP_POSITIVE_X",34070:"TEXTURE_CUBE_MAP_NEGATIVE_X",34071:"TEXTURE_CUBE_MAP_POSITIVE_Y",34072:"TEXTURE_CUBE_MAP_NEGATIVE_Y",34073:"TEXTURE_CUBE_MAP_POSITIVE_Z",34074:"TEXTURE_CUBE_MAP_NEGATIVE_Z",34076:"MAX_CUBE_MAP_TEXTURE_SIZE",34338:"VERTEX_ATTRIB_ARRAY_ENABLED",34339:"VERTEX_ATTRIB_ARRAY_SIZE",34340:"VERTEX_ATTRIB_ARRAY_STRIDE",34341:"VERTEX_ATTRIB_ARRAY_TYPE",34342:"CURRENT_VERTEX_ATTRIB",34373:"VERTEX_ATTRIB_ARRAY_POINTER",34466:"NUM_COMPRESSED_TEXTURE_FORMATS",
34467:"COMPRESSED_TEXTURE_FORMATS",34660:"BUFFER_SIZE",34661:"BUFFER_USAGE",34816:"STENCIL_BACK_FUNC",34817:"STENCIL_BACK_FAIL",34818:"STENCIL_BACK_PASS_DEPTH_FAIL",34819:"STENCIL_BACK_PASS_DEPTH_PASS",34877:"BLEND_EQUATION_ALPHA",34921:"MAX_VERTEX_ATTRIBS",34922:"VERTEX_ATTRIB_ARRAY_NORMALIZED",34930:"MAX_TEXTURE_IMAGE_UNITS",34962:"ARRAY_BUFFER",34963:"ELEMENT_ARRAY_BUFFER",34964:"ARRAY_BUFFER_BINDING",34965:"ELEMENT_ARRAY_BUFFER_BINDING",34975:"VERTEX_ATTRIB_ARRAY_BUFFER_BINDING",35040:"STREAM_DRAW",
35044:"STATIC_DRAW",35048:"DYNAMIC_DRAW",35632:"FRAGMENT_SHADER",35633:"VERTEX_SHADER",35660:"MAX_VERTEX_TEXTURE_IMAGE_UNITS",35661:"MAX_COMBINED_TEXTURE_IMAGE_UNITS",35663:"SHADER_TYPE",35664:"FLOAT_VEC2",35665:"FLOAT_VEC3",35666:"FLOAT_VEC4",35667:"INT_VEC2",35668:"INT_VEC3",35669:"INT_VEC4",35670:"BOOL",35671:"BOOL_VEC2",35672:"BOOL_VEC3",35673:"BOOL_VEC4",35674:"FLOAT_MAT2",35675:"FLOAT_MAT3",35676:"FLOAT_MAT4",35678:"SAMPLER_2D",35680:"SAMPLER_CUBE",35712:"DELETE_STATUS",35713:"COMPILE_STATUS",
35714:"LINK_STATUS",35715:"VALIDATE_STATUS",35716:"INFO_LOG_LENGTH",35717:"ATTACHED_SHADERS",35718:"ACTIVE_UNIFORMS",35719:"ACTIVE_UNIFORM_MAX_LENGTH",35720:"SHADER_SOURCE_LENGTH",35721:"ACTIVE_ATTRIBUTES",35722:"ACTIVE_ATTRIBUTE_MAX_LENGTH",35724:"SHADING_LANGUAGE_VERSION",35725:"CURRENT_PROGRAM",36003:"STENCIL_BACK_REF",36004:"STENCIL_BACK_VALUE_MASK",36005:"STENCIL_BACK_WRITEMASK",36006:"FRAMEBUFFER_BINDING",36007:"RENDERBUFFER_BINDING",36048:"FRAMEBUFFER_ATTACHMENT_OBJECT_TYPE",36049:"FRAMEBUFFER_ATTACHMENT_OBJECT_NAME",
36050:"FRAMEBUFFER_ATTACHMENT_TEXTURE_LEVEL",36051:"FRAMEBUFFER_ATTACHMENT_TEXTURE_CUBE_MAP_FACE",36053:"FRAMEBUFFER_COMPLETE",36054:"FRAMEBUFFER_INCOMPLETE_ATTACHMENT",36055:"FRAMEBUFFER_INCOMPLETE_MISSING_ATTACHMENT",36057:"FRAMEBUFFER_INCOMPLETE_DIMENSIONS",36061:"FRAMEBUFFER_UNSUPPORTED",36064:"COLOR_ATTACHMENT0",36096:"DEPTH_ATTACHMENT",36128:"STENCIL_ATTACHMENT",36160:"FRAMEBUFFER",36161:"RENDERBUFFER",36162:"RENDERBUFFER_WIDTH",36163:"RENDERBUFFER_HEIGHT",36164:"RENDERBUFFER_INTERNAL_FORMAT",
36168:"STENCIL_INDEX8",36176:"RENDERBUFFER_RED_SIZE",36177:"RENDERBUFFER_GREEN_SIZE",36178:"RENDERBUFFER_BLUE_SIZE",36179:"RENDERBUFFER_ALPHA_SIZE",36180:"RENDERBUFFER_DEPTH_SIZE",36181:"RENDERBUFFER_STENCIL_SIZE",36194:"RGB565",36336:"LOW_FLOAT",36337:"MEDIUM_FLOAT",36338:"HIGH_FLOAT",36339:"LOW_INT",36340:"MEDIUM_INT",36341:"HIGH_INT",36346:"SHADER_COMPILER",36347:"MAX_VERTEX_UNIFORM_VECTORS",36348:"MAX_VARYING_VECTORS",36349:"MAX_FRAGMENT_UNIFORM_VECTORS",37440:"UNPACK_FLIP_Y_WEBGL",37441:"UNPACK_PREMULTIPLY_ALPHA_WEBGL",
37442:"CONTEXT_LOST_WEBGL",37443:"UNPACK_COLORSPACE_CONVERSION_WEBGL",37444:"BROWSER_DEFAULT_WEBGL"}},{}],265:[function(b,N,I){var r=b("./1.0/numbers");N.exports=function(q){return r[q]}},{"./1.0/numbers":264}],266:[function(b,N,I){function r(p,d,e,f){this.gl=p;this.shader=f;this.buffer=d;this.vao=e;this.pixelRatio=1;this.bounds=[[Infinity,Infinity,Infinity],[-Infinity,-Infinity,-Infinity]];this.clipBounds=[[-Infinity,-Infinity,-Infinity],[Infinity,Infinity,Infinity]];this.lineWidth=[1,1,1];this.capSize=
[10,10,10];this.lineCount=[0,0,0];this.lineOffset=[0,0,0];this.opacity=1;this.hasAlpha=!1}function q(p,d){for(var e=0;3>e;++e)p[0][e]=Math.min(p[0][e],d[e]),p[1][e]=Math.max(p[1][e],d[e])}function m(p,d,e,f){f=n[f];for(var k=0;k<f.length;++k){var t=f[k];p.push(d[0],d[1],d[2],e[0],e[1],e[2],e[3],t[0],t[1],t[2])}return f.length}N.exports=function(p){var d=p.gl,e=l(d),f=a(d,[{buffer:e,type:d.FLOAT,size:3,offset:0,stride:40},{buffer:e,type:d.FLOAT,size:4,offset:12,stride:40},{buffer:e,type:d.FLOAT,size:3,
offset:28,stride:40}]),k=h(d);k.attributes.position.location=0;k.attributes.color.location=1;k.attributes.offset.location=2;d=new r(d,e,f,k);d.update(p);return d};var l=b("gl-buffer"),a=b("gl-vao"),h=b("./shaders/index"),g=[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1];b=r.prototype;b.isOpaque=function(){return!this.hasAlpha};b.isTransparent=function(){return this.hasAlpha};b.drawTransparent=b.draw=function(p){var d=this.gl,e=this.shader.uniforms;this.shader.bind();var f=e.view=p.view||g,k=e.projection=p.projection||
g;e.model=p.model||g;e.clipBounds=this.clipBounds;e.opacity=this.opacity;p=(p._ortho?2:1)*this.pixelRatio*(k[3]*f[12]+k[7]*f[13]+k[11]*f[14]+k[15]*f[15])/d.drawingBufferHeight;this.vao.bind();for(f=0;3>f;++f)d.lineWidth(this.lineWidth[f]*this.pixelRatio),e.capSize=this.capSize[f]*p,this.lineCount[f]&&d.drawArrays(d.LINES,this.lineOffset[f],this.lineCount[f]);this.vao.unbind()};var n=function(){for(var p=Array(3),d=0;3>d;++d){for(var e=[],f=1;2>=f;++f)for(var k=-1;1>=k;k+=2){var t=[0,0,0];t[(f+d)%
3]=k;e.push(t)}p[d]=e}return p}();b.update=function(p){p=p||{};"lineWidth"in p&&(this.lineWidth=p.lineWidth,Array.isArray(this.lineWidth)||(this.lineWidth=[this.lineWidth,this.lineWidth,this.lineWidth]));"capSize"in p&&(this.capSize=p.capSize,Array.isArray(this.capSize)||(this.capSize=[this.capSize,this.capSize,this.capSize]));this.hasAlpha=!1;"opacity"in p&&(this.opacity=+p.opacity,1>this.opacity&&(this.hasAlpha=!0));var d=p.color||[[0,0,0],[0,0,0],[0,0,0]],e=p.position;p=p.error;Array.isArray(d[0])||
(d=[d,d,d]);if(e&&p){var f=[],k=e.length,t=0;this.bounds=[[Infinity,Infinity,Infinity],[-Infinity,-Infinity,-Infinity]];this.lineCount=[0,0,0];for(var v=0;3>v;++v){this.lineOffset[v]=t;var w=0;a:for(;w<k;++w){for(var y=e[w],B=0;3>B;++B)if(isNaN(y[B])||!isFinite(y[B]))continue a;B=p[w];var A=d[v];Array.isArray(A[0])&&(A=d[w]);3===A.length?A=[A[0],A[1],A[2],1]:4===A.length&&(A=[A[0],A[1],A[2],A[3]],!this.hasAlpha&&1>A[3]&&(this.hasAlpha=!0));if(!isNaN(B[0][v])&&!isNaN(B[1][v])){if(0>B[0][v]){var z=
y.slice();z[v]+=B[0][v];f.push(y[0],y[1],y[2],A[0],A[1],A[2],A[3],0,0,0,z[0],z[1],z[2],A[0],A[1],A[2],A[3],0,0,0);q(this.bounds,z);t+=2+m(f,z,A,v)}0<B[1][v]&&(z=y.slice(),z[v]+=B[1][v],f.push(y[0],y[1],y[2],A[0],A[1],A[2],A[3],0,0,0,z[0],z[1],z[2],A[0],A[1],A[2],A[3],0,0,0),q(this.bounds,z),t+=2+m(f,z,A,v))}}this.lineCount[v]=t-this.lineOffset[v]}this.buffer.update(f)}};b.dispose=function(){this.shader.dispose();this.buffer.dispose();this.vao.dispose()}},{"./shaders/index":268,"gl-buffer":259,"gl-vao":358}],
267:[function(b,N,I){arguments[4][257][0].apply(I,arguments)},{dup:257}],268:[function(b,N,I){I=b("glslify");var r=b("gl-shader"),q=I(["precision highp float;\n#define GLSLIFY 1\n\nattribute vec3 position, offset;\nattribute vec4 color;\nuniform mat4 model, view, projection;\nuniform float capSize;\nvarying vec4 fragColor;\nvarying vec3 fragPosition;\n\nvoid main() {\n  vec4 worldPosition  \x3d model * vec4(position, 1.0);\n  worldPosition       \x3d (worldPosition / worldPosition.w) + vec4(capSize * offset, 0.0);\n  gl_Position         \x3d projection * view * worldPosition;\n  fragColor           \x3d color;\n  fragPosition        \x3d position;\n}"]),
m=I(["precision highp float;\n#define GLSLIFY 1\n\nbool outOfRange(float a, float b, float p) {\n  return ((p \x3e max(a, b)) || \n          (p \x3c min(a, b)));\n}\n\nbool outOfRange(vec2 a, vec2 b, vec2 p) {\n  return (outOfRange(a.x, b.x, p.x) ||\n          outOfRange(a.y, b.y, p.y));\n}\n\nbool outOfRange(vec3 a, vec3 b, vec3 p) {\n  return (outOfRange(a.x, b.x, p.x) ||\n          outOfRange(a.y, b.y, p.y) ||\n          outOfRange(a.z, b.z, p.z));\n}\n\nbool outOfRange(vec4 a, vec4 b, vec4 p) {\n  return outOfRange(a.xyz, b.xyz, p.xyz);\n}\n\nuniform vec3 clipBounds[2];\nuniform float opacity;\nvarying vec3 fragPosition;\nvarying vec4 fragColor;\n\nvoid main() {\n  if (\n    outOfRange(clipBounds[0], clipBounds[1], fragPosition) ||\n    fragColor.a * opacity \x3d\x3d 0.\n  ) discard;\n\n  gl_FragColor \x3d opacity * fragColor;\n}"]);
N.exports=function(l){return r(l,q,m,null,[{name:"position",type:"vec3"},{name:"color",type:"vec4"},{name:"offset",type:"vec3"}])}},{"gl-shader":335,glslify:267}],269:[function(b,N,I){function r(v){var w=v.getParameter(v.FRAMEBUFFER_BINDING),y=v.getParameter(v.RENDERBUFFER_BINDING);v=v.getParameter(v.TEXTURE_BINDING_2D);return[w,y,v]}function q(v,w){v.bindFramebuffer(v.FRAMEBUFFER,w[0]);v.bindRenderbuffer(v.RENDERBUFFER,w[1]);v.bindTexture(v.TEXTURE_2D,w[2])}function m(v){switch(v){case e:throw Error("gl-fbo: Framebuffer unsupported");
case f:throw Error("gl-fbo: Framebuffer incomplete attachment");case k:throw Error("gl-fbo: Framebuffer incomplete dimensions");case t:throw Error("gl-fbo: Framebuffer incomplete missing attachment");default:throw Error("gl-fbo: Framebuffer failed for unspecified reason");}}function l(v,w,y,B,A,z){if(!B)return null;w=p(v,w,y,A,B);w.magFilter=v.NEAREST;w.minFilter=v.NEAREST;w.mipSamples=1;w.bind();v.framebufferTexture2D(v.FRAMEBUFFER,z,v.TEXTURE_2D,w.handle,0);return w}function a(v,w,y,B,A){var z=
v.createRenderbuffer();v.bindRenderbuffer(v.RENDERBUFFER,z);v.renderbufferStorage(v.RENDERBUFFER,B,w,y);v.framebufferRenderbuffer(v.FRAMEBUFFER,A,v.RENDERBUFFER,z);return z}function h(v){var w=r(v.gl),y=v.gl,B=v.handle=y.createFramebuffer(),A=v._shape[0],z=v._shape[1],E=v.color.length,C=v._ext,u=v._useStencil,D=v._useDepth,G=v._colorType;y.bindFramebuffer(y.FRAMEBUFFER,B);for(B=0;B<E;++B)v.color[B]=l(y,A,z,G,y.RGBA,y.COLOR_ATTACHMENT0+B);0===E?(v._color_rb=a(y,A,z,y.RGBA4,y.COLOR_ATTACHMENT0),C&&
C.drawBuffersWEBGL(d[0])):1<E&&C.drawBuffersWEBGL(d[E]);(E=y.getExtension("WEBGL_depth_texture"))?u?v.depth=l(y,A,z,E.UNSIGNED_INT_24_8_WEBGL,y.DEPTH_STENCIL,y.DEPTH_STENCIL_ATTACHMENT):D&&(v.depth=l(y,A,z,y.UNSIGNED_SHORT,y.DEPTH_COMPONENT,y.DEPTH_ATTACHMENT)):D&&u?v._depth_rb=a(y,A,z,y.DEPTH_STENCIL,y.DEPTH_STENCIL_ATTACHMENT):D?v._depth_rb=a(y,A,z,y.DEPTH_COMPONENT16,y.DEPTH_ATTACHMENT):u&&(v._depth_rb=a(y,A,z,y.STENCIL_INDEX,y.STENCIL_ATTACHMENT));A=y.checkFramebufferStatus(y.FRAMEBUFFER);if(A!==
y.FRAMEBUFFER_COMPLETE){v._destroyed=!0;y.bindFramebuffer(y.FRAMEBUFFER,null);y.deleteFramebuffer(v.handle);v.handle=null;v.depth&&(v.depth.dispose(),v.depth=null);v._depth_rb&&(y.deleteRenderbuffer(v._depth_rb),v._depth_rb=null);for(B=0;B<v.color.length;++B)v.color[B].dispose(),v.color[B]=null;v._color_rb&&(y.deleteRenderbuffer(v._color_rb),v._color_rb=null);q(y,w);m(A)}q(y,w)}function g(v,w,y,B,A,z,E,C){this.gl=v;this._shape=[w|0,y|0];this._destroyed=!1;this._ext=C;this.color=Array(A);for(v=0;v<
A;++v)this.color[v]=null;this._depth_rb=this.depth=this._color_rb=null;this._colorType=B;this._useDepth=z;this._useStencil=E;var u=this;w=[w|0,y|0];Object.defineProperties(w,{0:{get:function(){return u._shape[0]},set:function(D){return u.width=D}},1:{get:function(){return u._shape[1]},set:function(D){return u.height=D}}});this._shapeVector=w;h(this)}function n(v,w,y){if(v._destroyed)throw Error("gl-fbo: Can't resize destroyed FBO");if(v._shape[0]!==w||v._shape[1]!==y){var B=v.gl,A=B.getParameter(B.MAX_RENDERBUFFER_SIZE);
if(0>w||w>A||0>y||y>A)throw Error("gl-fbo: Can't resize FBO, invalid dimensions");v._shape[0]=w;v._shape[1]=y;w=r(B);for(y=0;y<v.color.length;++y)v.color[y].shape=v._shape;v._color_rb&&(B.bindRenderbuffer(B.RENDERBUFFER,v._color_rb),B.renderbufferStorage(B.RENDERBUFFER,B.RGBA4,v._shape[0],v._shape[1]));v.depth&&(v.depth.shape=v._shape);v._depth_rb&&(B.bindRenderbuffer(B.RENDERBUFFER,v._depth_rb),v._useDepth&&v._useStencil?B.renderbufferStorage(B.RENDERBUFFER,B.DEPTH_STENCIL,v._shape[0],v._shape[1]):
v._useDepth?B.renderbufferStorage(B.RENDERBUFFER,B.DEPTH_COMPONENT16,v._shape[0],v._shape[1]):v._useStencil&&B.renderbufferStorage(B.RENDERBUFFER,B.STENCIL_INDEX,v._shape[0],v._shape[1]));B.bindFramebuffer(B.FRAMEBUFFER,v.handle);y=B.checkFramebufferStatus(B.FRAMEBUFFER);y!==B.FRAMEBUFFER_COMPLETE&&(v.dispose(),q(B,w),m(y));q(B,w)}}var p=b("gl-texture2d");N.exports=function(v,w,y,B){e||(e=v.FRAMEBUFFER_UNSUPPORTED,f=v.FRAMEBUFFER_INCOMPLETE_ATTACHMENT,k=v.FRAMEBUFFER_INCOMPLETE_DIMENSIONS,t=v.FRAMEBUFFER_INCOMPLETE_MISSING_ATTACHMENT);
var A=v.getExtension("WEBGL_draw_buffers");if(!d&&A){var z=v.getParameter(A.MAX_COLOR_ATTACHMENTS_WEBGL);d=Array(z+1);for(var E=0;E<=z;++E){for(var C=Array(z),u=0;u<E;++u)C[u]=v.COLOR_ATTACHMENT0+u;for(u=E;u<z;++u)C[u]=v.NONE;d[E]=C}}Array.isArray(w)&&(B=y,y=w[1]|0,w=w[0]|0);if("number"!==typeof w)throw Error("gl-fbo: Missing shape parameter");z=v.getParameter(v.MAX_RENDERBUFFER_SIZE);if(0>w||w>z||0>y||y>z)throw Error("gl-fbo: Parameters are too large for FBO");B=B||{};z=1;if("color"in B){z=Math.max(B.color|
0,0);if(0>z)throw Error("gl-fbo: Must specify a nonnegative number of colors");if(1<z){if(!A)throw Error("gl-fbo: Multiple draw buffer extension not supported");if(z>v.getParameter(A.MAX_COLOR_ATTACHMENTS_WEBGL))throw Error("gl-fbo: Context does not support "+z+" draw buffers");}}E=v.UNSIGNED_BYTE;C=v.getExtension("OES_texture_float");if(B.float&&0<z){if(!C)throw Error("gl-fbo: Context does not support floating point textures");E=v.FLOAT}else B.preferFloat&&0<z&&C&&(E=v.FLOAT);C=!0;"depth"in B&&(C=
!!B.depth);u=!1;"stencil"in B&&(u=!!B.stencil);return new g(v,w,y,E,z,C,u,A)};var d=null,e,f,k,t;b=g.prototype;Object.defineProperties(b,{shape:{get:function(){return this._destroyed?[0,0]:this._shapeVector},set:function(v){Array.isArray(v)||(v=[v|0,v|0]);if(2!==v.length)throw Error("gl-fbo: Shape vector must be length 2");var w=v[0]|0;v=v[1]|0;n(this,w,v);return[w,v]},enumerable:!1},width:{get:function(){return this._destroyed?0:this._shape[0]},set:function(v){v|=0;n(this,v,this._shape[1]);return v},
enumerable:!1},height:{get:function(){return this._destroyed?0:this._shape[1]},set:function(v){v|=0;n(this,this._shape[0],v);return v},enumerable:!1}});b.bind=function(){if(!this._destroyed){var v=this.gl;v.bindFramebuffer(v.FRAMEBUFFER,this.handle);v.viewport(0,0,this._shape[0],this._shape[1])}};b.dispose=function(){if(!this._destroyed){this._destroyed=!0;var v=this.gl;v.deleteFramebuffer(this.handle);this.handle=null;this.depth&&(this.depth.dispose(),this.depth=null);this._depth_rb&&(v.deleteRenderbuffer(this._depth_rb),
this._depth_rb=null);for(var w=0;w<this.color.length;++w)this.color[w].dispose(),this.color[w]=null;this._color_rb&&(v.deleteRenderbuffer(this._color_rb),this._color_rb=null)}}},{"gl-texture2d":353}],270:[function(b,N,I){var r=b("sprintf-js").sprintf,q=b("gl-constants/lookup"),m=b("glsl-shader-name"),l=b("add-line-numbers");N.exports=function(a,h,g){var n=m(h)||"of unknown name (see npm glsl-shader-name)",p="unknown type";void 0!==g&&(p=g===q.FRAGMENT_SHADER?"fragment":"vertex");g=r("Error compiling %s shader %s:\n",
p,n);n=r("%s%s",g,a);var d=a.split("\n");a={};for(p=0;p<d.length;p++){var e=d[p];if(""!==e&&"\x00"!==e){var f=parseInt(e.split(":")[2]);if(isNaN(f))throw Error(r("Could not parse error: %s",e));a[f]=e}}h=l(h).split("\n");for(p=0;p<h.length;p++)if(a[p+3]||a[p+2]||a[p+1])g+=h[p]+"\n",a[p+1]&&(d=a[p+1],d=d.substr(d.split(":",3).join(":").length+1).trim(),g+=r("^^^ %s\n\n",d));return{long:g.trim(),short:n.trim()}}},{"add-line-numbers":66,"gl-constants/lookup":265,"glsl-shader-name":431,"sprintf-js":567}],
271:[function(b,N,I){function r(p,d,e,f,k,t,v){this.plot=p;this.shader=d;this.pickShader=e;this.positionBuffer=f;this.weightBuffer=k;this.colorBuffer=t;this.idBuffer=v;this.xData=[];this.yData=[];this.shape=[0,0];this.bounds=[Infinity,Infinity,-Infinity,-Infinity];this.pickOffset=0}N.exports=function(p,d){var e=p.gl,f=a(e,g.vertex,g.fragment),k=a(e,g.pickVertex,g.pickFragment),t=h(e),v=h(e),w=h(e);e=h(e);f=new r(p,f,k,t,v,w,e);f.update(d);p.addObject(f);return f};var q=b("binary-search-bounds"),m=
b("iota-array"),l=b("typedarray-pool"),a=b("gl-shader"),h=b("gl-buffer"),g=b("./lib/shaders");b=r.prototype;var n=[0,0,1,0,0,1,1,0,1,1,0,1];b.draw=function(){var p=[1,0,0,0,1,0,0,0,1];return function(){var d=this.plot,e=this.shader,f=this.bounds,k=this.numVertices;if(!(0>=k)){var t=d.gl;d=d.dataBox;var v=f[3]-f[1],w=d[2]-d[0],y=d[3]-d[1];p[0]=2*(f[2]-f[0])/w;p[4]=2*v/y;p[6]=2*(f[0]-d[0])/w-1;p[7]=2*(f[1]-d[1])/y-1;e.bind();f=e.uniforms;f.viewTransform=p;f.shape=this.shape;e=e.attributes;this.positionBuffer.bind();
e.position.pointer();this.weightBuffer.bind();e.weight.pointer(t.UNSIGNED_BYTE,!1);this.colorBuffer.bind();e.color.pointer(t.UNSIGNED_BYTE,!0);t.drawArrays(t.TRIANGLES,0,k)}}}();b.drawPick=function(){var p=[1,0,0,0,1,0,0,0,1],d=[0,0,0,0];return function(e){var f=this.plot,k=this.pickShader,t=this.bounds,v=this.numVertices;if(!(0>=v)){var w=f.gl;f=f.dataBox;var y=t[3]-t[1],B=f[2]-f[0],A=f[3]-f[1];p[0]=2*(t[2]-t[0])/B;p[4]=2*y/A;p[6]=2*(t[0]-f[0])/B-1;p[7]=2*(t[1]-f[1])/A-1;for(t=0;4>t;++t)d[t]=e>>
8*t&255;this.pickOffset=e;k.bind();t=k.uniforms;t.viewTransform=p;t.pickOffset=d;t.shape=this.shape;k=k.attributes;this.positionBuffer.bind();k.position.pointer();this.weightBuffer.bind();k.weight.pointer(w.UNSIGNED_BYTE,!1);this.idBuffer.bind();k.pickId.pointer(w.UNSIGNED_BYTE,!1);w.drawArrays(w.TRIANGLES,0,v);return e+this.shape[0]*this.shape[1]}}}();b.pick=function(p,d,e){p=this.pickOffset;d=this.shape[0]*this.shape[1];if(e<p||e>=p+d)return null;e-=p;return{object:this,pointId:e,dataCoord:[this.xData[e%
this.shape[0]],this.yData[e/this.shape[0]|0]]}};b.update=function(p){p=p||{};var d=p.shape||[0,0],e=p.x||m(d[0]),f=p.y||m(d[1]),k=p.z||new Float32Array(d[0]*d[1]),t=!1!==p.zsmooth;this.xData=e;this.yData=f;var v=p.colorLevels||[0];p=p.colorValues||[0,0,0,1];var w=v.length,y=this.bounds;if(t){var B=y[0]=e[0];var A=y[1]=f[0];var z=y[2]=e[e.length-1];y=y[3]=f[f.length-1]}else B=y[0]=e[0]+(e[1]-e[0])/2,A=y[1]=f[0]+(f[1]-f[0])/2,z=y[2]=e[e.length-1]+(e[e.length-1]-e[e.length-2])/2,y=y[3]=f[f.length-1]+
(f[f.length-1]-f[f.length-2])/2;z=1/(z-B);y=1/(y-A);var E=d[0];d=d[1];this.shape=[E,d];var C=(t?(E-1)*(d-1):E*d)*(n.length>>>1);this.numVertices=C;var u=l.mallocUint8(4*C),D=l.mallocFloat32(2*C),G=l.mallocUint8(2*C);C=l.mallocUint32(C);for(var J=0,L=t?E-1:E,K=t?d-1:d,H=0;H<K;++H){if(t){var Q=y*(f[H]-A);var M=y*(f[H+1]-A)}else Q=H<d-1?y*(f[H]-(f[H+1]-f[H])/2-A):y*(f[H]-(f[H]-f[H-1])/2-A),M=H<d-1?y*(f[H]+(f[H+1]-f[H])/2-A):y*(f[H]+(f[H]-f[H-1])/2-A);for(var P=0;P<L;++P){if(t){var T=z*(e[P]-B);var O=
z*(e[P+1]-B)}else T=P<E-1?z*(e[P]-(e[P+1]-e[P])/2-B):z*(e[P]-(e[P]-e[P-1])/2-B),O=P<E-1?z*(e[P]+(e[P+1]-e[P])/2-B):z*(e[P]+(e[P]-e[P-1])/2-B);for(var U=0;U<n.length;U+=2){var S=n[U],X=n[U+1],ba=k[t?(H+X)*E+(P+S):H*E+P],ca=q.le(v,ba);if(0>ca){ca=p[0];ba=p[1];var ia=p[2];var ja=p[3]}else if(ca===w-1)ca=p[4*w-4],ba=p[4*w-3],ia=p[4*w-2],ja=p[4*w-1];else{ja=(ba-v[ca])/(v[ca+1]-v[ca]);var la=1-ja,da=4*ca,oa=4*(ca+1);ca=la*p[da]+ja*p[oa];ba=la*p[da+1]+ja*p[oa+1];ia=la*p[da+2]+ja*p[oa+2];ja=la*p[da+3]+ja*
p[oa+3]}u[4*J]=255*ca;u[4*J+1]=255*ba;u[4*J+2]=255*ia;u[4*J+3]=255*ja;D[2*J]=.5*T+.5*O;D[2*J+1]=.5*Q+.5*M;G[2*J]=S;G[2*J+1]=X;C[J]=H*E+P;J+=1}}}this.positionBuffer.update(D);this.weightBuffer.update(G);this.colorBuffer.update(u);this.idBuffer.update(C);l.free(D);l.free(u);l.free(G);l.free(C)};b.dispose=function(){this.shader.dispose();this.pickShader.dispose();this.positionBuffer.dispose();this.weightBuffer.dispose();this.colorBuffer.dispose();this.idBuffer.dispose();this.plot.removeObject(this)}},
{"./lib/shaders":272,"binary-search-bounds":96,"gl-buffer":259,"gl-shader":335,"iota-array":463,"typedarray-pool":595}],272:[function(b,N,I){b=b("glslify");N.exports={fragment:b(["precision lowp float;\n#define GLSLIFY 1\nvarying vec4 fragColor;\nvoid main() {\n  gl_FragColor \x3d vec4(fragColor.rgb * fragColor.a, fragColor.a);\n}\n"]),vertex:b(["precision mediump float;\n#define GLSLIFY 1\n\nattribute vec2 position;\nattribute vec4 color;\nattribute vec2 weight;\n\nuniform vec2 shape;\nuniform mat3 viewTransform;\n\nvarying vec4 fragColor;\n\nvoid main() {\n  vec3 vPosition \x3d viewTransform * vec3( position + (weight-.5)/(shape-1.) , 1.0);\n  fragColor \x3d color;\n  gl_Position \x3d vec4(vPosition.xy, 0, vPosition.z);\n}\n"]),
pickFragment:b(["precision mediump float;\n#define GLSLIFY 1\n\nvarying vec4 fragId;\nvarying vec2 vWeight;\n\nuniform vec2 shape;\nuniform vec4 pickOffset;\n\nvoid main() {\n  vec2 d \x3d step(.5, vWeight);\n  vec4 id \x3d fragId + pickOffset;\n  id.x +\x3d d.x + d.y*shape.x;\n\n  id.y +\x3d floor(id.x / 256.0);\n  id.x -\x3d floor(id.x / 256.0) * 256.0;\n\n  id.z +\x3d floor(id.y / 256.0);\n  id.y -\x3d floor(id.y / 256.0) * 256.0;\n\n  id.w +\x3d floor(id.z / 256.0);\n  id.z -\x3d floor(id.z / 256.0) * 256.0;\n\n  gl_FragColor \x3d id/255.;\n}\n"]),
pickVertex:b(["precision mediump float;\n#define GLSLIFY 1\n\nattribute vec2 position;\nattribute vec4 pickId;\nattribute vec2 weight;\n\nuniform vec2 shape;\nuniform mat3 viewTransform;\n\nvarying vec4 fragId;\nvarying vec2 vWeight;\n\nvoid main() {\n  vWeight \x3d weight;\n\n  fragId \x3d pickId;\n\n  vec3 vPosition \x3d viewTransform * vec3( position + (weight-.5)/(shape-1.) , 1.0);\n  gl_Position \x3d vec4(vPosition.xy, 0, vPosition.z);\n}\n"])}},{glslify:273}],273:[function(b,N,I){arguments[4][257][0].apply(I,
arguments)},{dup:257}],274:[function(b,N,I){N=b("glslify");var r=b("gl-shader"),q=N(["precision highp float;\n#define GLSLIFY 1\n\nattribute vec3 position, nextPosition;\nattribute float arcLength, lineWidth;\nattribute vec4 color;\n\nuniform vec2 screenShape;\nuniform float pixelRatio;\nuniform mat4 model, view, projection;\n\nvarying vec4 fragColor;\nvarying vec3 worldPosition;\nvarying float pixelArcLength;\n\nvec4 project(vec3 p) {\n  return projection * view * model * vec4(p, 1.0);\n}\n\nvoid main() {\n  vec4 startPoint \x3d project(position);\n  vec4 endPoint   \x3d project(nextPosition);\n\n  vec2 A \x3d startPoint.xy / startPoint.w;\n  vec2 B \x3d   endPoint.xy /   endPoint.w;\n\n  float clipAngle \x3d atan(\n    (B.y - A.y) * screenShape.y,\n    (B.x - A.x) * screenShape.x\n  );\n\n  vec2 offset \x3d 0.5 * pixelRatio * lineWidth * vec2(\n    sin(clipAngle),\n    -cos(clipAngle)\n  ) / screenShape;\n\n  gl_Position \x3d vec4(startPoint.xy + startPoint.w * offset, startPoint.zw);\n\n  worldPosition \x3d position;\n  pixelArcLength \x3d arcLength;\n  fragColor \x3d color;\n}\n"]),
m=N(["precision highp float;\n#define GLSLIFY 1\n\nbool outOfRange(float a, float b, float p) {\n  return ((p \x3e max(a, b)) || \n          (p \x3c min(a, b)));\n}\n\nbool outOfRange(vec2 a, vec2 b, vec2 p) {\n  return (outOfRange(a.x, b.x, p.x) ||\n          outOfRange(a.y, b.y, p.y));\n}\n\nbool outOfRange(vec3 a, vec3 b, vec3 p) {\n  return (outOfRange(a.x, b.x, p.x) ||\n          outOfRange(a.y, b.y, p.y) ||\n          outOfRange(a.z, b.z, p.z));\n}\n\nbool outOfRange(vec4 a, vec4 b, vec4 p) {\n  return outOfRange(a.xyz, b.xyz, p.xyz);\n}\n\nuniform vec3      clipBounds[2];\nuniform sampler2D dashTexture;\nuniform float     dashScale;\nuniform float     opacity;\n\nvarying vec3    worldPosition;\nvarying float   pixelArcLength;\nvarying vec4    fragColor;\n\nvoid main() {\n  if (\n    outOfRange(clipBounds[0], clipBounds[1], worldPosition) ||\n    fragColor.a * opacity \x3d\x3d 0.\n  ) discard;\n\n  float dashWeight \x3d texture2D(dashTexture, vec2(dashScale * pixelArcLength, 0)).r;\n  if(dashWeight \x3c 0.5) {\n    discard;\n  }\n  gl_FragColor \x3d fragColor * opacity;\n}\n"]),
l=N(["precision highp float;\n#define GLSLIFY 1\n\n#define FLOAT_MAX  1.70141184e38\n#define FLOAT_MIN  1.17549435e-38\n\n// https://github.com/mikolalysenko/glsl-read-float/blob/master/index.glsl\nvec4 packFloat(float v) {\n  float av \x3d abs(v);\n\n  //Handle special cases\n  if(av \x3c FLOAT_MIN) {\n    return vec4(0.0, 0.0, 0.0, 0.0);\n  } else if(v \x3e FLOAT_MAX) {\n    return vec4(127.0, 128.0, 0.0, 0.0) / 255.0;\n  } else if(v \x3c -FLOAT_MAX) {\n    return vec4(255.0, 128.0, 0.0, 0.0) / 255.0;\n  }\n\n  vec4 c \x3d vec4(0,0,0,0);\n\n  //Compute exponent and mantissa\n  float e \x3d floor(log2(av));\n  float m \x3d av * pow(2.0, -e) - 1.0;\n\n  //Unpack mantissa\n  c[1] \x3d floor(128.0 * m);\n  m -\x3d c[1] / 128.0;\n  c[2] \x3d floor(32768.0 * m);\n  m -\x3d c[2] / 32768.0;\n  c[3] \x3d floor(8388608.0 * m);\n\n  //Unpack exponent\n  float ebias \x3d e + 127.0;\n  c[0] \x3d floor(ebias / 2.0);\n  ebias -\x3d c[0] * 2.0;\n  c[1] +\x3d floor(ebias) * 128.0;\n\n  //Unpack sign bit\n  c[0] +\x3d 128.0 * step(0.0, -v);\n\n  //Scale back to range\n  return c / 255.0;\n}\n\nbool outOfRange(float a, float b, float p) {\n  return ((p \x3e max(a, b)) || \n          (p \x3c min(a, b)));\n}\n\nbool outOfRange(vec2 a, vec2 b, vec2 p) {\n  return (outOfRange(a.x, b.x, p.x) ||\n          outOfRange(a.y, b.y, p.y));\n}\n\nbool outOfRange(vec3 a, vec3 b, vec3 p) {\n  return (outOfRange(a.x, b.x, p.x) ||\n          outOfRange(a.y, b.y, p.y) ||\n          outOfRange(a.z, b.z, p.z));\n}\n\nbool outOfRange(vec4 a, vec4 b, vec4 p) {\n  return outOfRange(a.xyz, b.xyz, p.xyz);\n}\n\nuniform float pickId;\nuniform vec3 clipBounds[2];\n\nvarying vec3 worldPosition;\nvarying float pixelArcLength;\nvarying vec4 fragColor;\n\nvoid main() {\n  if (outOfRange(clipBounds[0], clipBounds[1], worldPosition)) discard;\n\n  gl_FragColor \x3d vec4(pickId/255.0, packFloat(pixelArcLength).xyz);\n}"]),
a=[{name:"position",type:"vec3"},{name:"nextPosition",type:"vec3"},{name:"arcLength",type:"float"},{name:"lineWidth",type:"float"},{name:"color",type:"vec4"}];I.createShader=function(h){return r(h,q,m,null,a)};I.createPickShader=function(h){return r(h,q,l,null,a)}},{"gl-shader":335,glslify:276}],275:[function(b,N,I){function r(t){for(var v=[[-1E6,-1E6,-1E6],[1E6,1E6,1E6]],w=0;3>w;++w)v[0][w]=Math.max(t[0][w],v[0][w]),v[1][w]=Math.min(t[1][w],v[1][w]);return v}function q(t,v,w,y){this.arcLength=t;
this.position=v;this.index=w;this.dataCoordinate=y}function m(t,v,w,y,B,A){this.gl=t;this.shader=v;this.pickShader=w;this.buffer=y;this.vao=B;this.clipBounds=[[-Infinity,-Infinity,-Infinity],[Infinity,Infinity,Infinity]];this.points=[];this.arcLength=[];this.vertexCount=0;this.bounds=[[0,0,0],[0,0,0]];this.pickId=0;this.lineWidth=1;this.texture=A;this.opacity=this.dashScale=1;this.hasAlpha=!1;this.dirty=!0;this.pixelRatio=1}N.exports=function(t){var v=t.gl||t.scene&&t.scene.gl,w=e(v);w.attributes.position.location=
0;w.attributes.nextPosition.location=1;w.attributes.arcLength.location=2;w.attributes.lineWidth.location=3;w.attributes.color.location=4;var y=f(v);y.attributes.position.location=0;y.attributes.nextPosition.location=1;y.attributes.arcLength.location=2;y.attributes.lineWidth.location=3;y.attributes.color.location=4;for(var B=l(v),A=a(v,[{buffer:B,size:3,offset:0,stride:48},{buffer:B,size:3,offset:12,stride:48},{buffer:B,size:1,offset:24,stride:48},{buffer:B,size:1,offset:28,stride:48},{buffer:B,size:4,
offset:32,stride:48}]),z=d(Array(1024),[256,1,4]),E=0;1024>E;++E)z.data[E]=255;z=h(v,z);z.wrap=v.REPEAT;v=new m(v,w,y,B,A,z);v.update(t);return v};var l=b("gl-buffer"),a=b("gl-vao"),h=b("gl-texture2d"),g=new Uint8Array(4),n=new Float32Array(g.buffer),p=b("binary-search-bounds"),d=b("ndarray");b=b("./lib/shaders");var e=b.createShader,f=b.createPickShader,k=[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1];b=m.prototype;b.isTransparent=function(){return this.hasAlpha};b.isOpaque=function(){return!this.hasAlpha};b.pickSlots=
1;b.setPickBase=function(t){this.pickId=t};b.drawTransparent=b.draw=function(t){if(this.vertexCount){var v=this.gl,w=this.shader,y=this.vao;w.bind();w.uniforms={model:t.model||k,view:t.view||k,projection:t.projection||k,clipBounds:r(this.clipBounds),dashTexture:this.texture.bind(),dashScale:this.dashScale/this.arcLength[this.arcLength.length-1],opacity:this.opacity,screenShape:[v.drawingBufferWidth,v.drawingBufferHeight],pixelRatio:this.pixelRatio};y.bind();y.draw(v.TRIANGLE_STRIP,this.vertexCount);
y.unbind()}};b.drawPick=function(t){if(this.vertexCount){var v=this.gl,w=this.pickShader,y=this.vao;w.bind();w.uniforms={model:t.model||k,view:t.view||k,projection:t.projection||k,pickId:this.pickId,clipBounds:r(this.clipBounds),screenShape:[v.drawingBufferWidth,v.drawingBufferHeight],pixelRatio:this.pixelRatio};y.bind();y.draw(v.TRIANGLE_STRIP,this.vertexCount);y.unbind()}};b.update=function(t){var v;this.dirty=!0;var w=!!t.connectGaps;"dashScale"in t&&(this.dashScale=t.dashScale);this.hasAlpha=
!1;"opacity"in t&&(this.opacity=+t.opacity,1>this.opacity&&(this.hasAlpha=!0));var y=[],B=[],A=[],z=0,E=0,C=[[Infinity,Infinity,Infinity],[-Infinity,-Infinity,-Infinity]],u=t.position||t.positions;if(u){var D=t.color||t.colors||[0,0,0,1],G=t.lineWidth||1,J=!1;var L=1;a:for(;L<u.length;++L){var K=u[L-1],H=u[L];B.push(z);A.push(K.slice());for(v=0;3>v;++v){if(isNaN(K[v])||isNaN(H[v])||!isFinite(K[v])||!isFinite(H[v])){if(!w&&0<y.length){for(J=0;24>J;++J)y.push(y[y.length-12]);E+=2;J=!0}continue a}C[0][v]=
Math.min(C[0][v],K[v],H[v]);C[1][v]=Math.max(C[1][v],K[v],H[v])}if(Array.isArray(D[0])){var Q=D.length>L-1?D[L-1]:0<D.length?D[D.length-1]:[0,0,0,1];var M=D.length>L?D[L]:0<D.length?D[D.length-1]:[0,0,0,1]}else Q=M=D;3===Q.length&&(Q=[Q[0],Q[1],Q[2],1]);3===M.length&&(M=[M[0],M[1],M[2],1]);!this.hasAlpha&&1>Q[3]&&(this.hasAlpha=!0);var P=Array.isArray(G)?G.length>L-1?G[L-1]:0<G.length?G[G.length-1]:[0,0,0,1]:G;var T=z;v=z;for(var O=z=0;3>O;++O){var U=K[O]-H[O];z+=U*U}z=v+Math.sqrt(z);if(J){for(v=
0;2>v;++v)y.push(K[0],K[1],K[2],H[0],H[1],H[2],T,P,Q[0],Q[1],Q[2],Q[3]);E+=2;J=!1}y.push(K[0],K[1],K[2],H[0],H[1],H[2],T,P,Q[0],Q[1],Q[2],Q[3],K[0],K[1],K[2],H[0],H[1],H[2],T,-P,Q[0],Q[1],Q[2],Q[3],H[0],H[1],H[2],K[0],K[1],K[2],z,-P,M[0],M[1],M[2],M[3],H[0],H[1],H[2],K[0],K[1],K[2],z,P,M[0],M[1],M[2],M[3]);E+=4}}this.buffer.update(y);B.push(z);A.push(u[u.length-1].slice());this.bounds=C;this.vertexCount=E;this.points=A;this.arcLength=B;if("dashes"in t){t=t.dashes.slice();t.unshift(0);for(L=1;L<t.length;++L)t[L]=
t[L-1]+t[L];w=d(Array(1024),[256,1,4]);for(L=0;256>L;++L){for(v=0;4>v;++v)w.set(L,0,v,0);p.le(t,t[t.length-1]*L/255)&1?w.set(L,0,0,0):w.set(L,0,0,255)}this.texture.setPixels(w)}};b.dispose=function(){this.shader.dispose();this.vao.dispose();this.buffer.dispose()};b.pick=function(t){if(!t||t.id!==this.pickId)return null;var v=t.value[0];var w=t.value[1];t=t.value[2];g[0]=0;g[1]=t;g[2]=w;g[3]=v;v=n[0];t=p.le(this.arcLength,v);if(0>t)return null;if(t===this.arcLength.length-1)return new q(this.arcLength[this.arcLength.length-
1],this.points[this.points.length-1].slice(),t);var y=this.points[t],B=this.points[Math.min(t+1,this.points.length-1)],A=(v-this.arcLength[t])/(this.arcLength[t+1]-this.arcLength[t]),z=1-A;w=[0,0,0];for(var E=0;3>E;++E)w[E]=z*y[E]+A*B[E];t=Math.min(.5>A?t:t+1,this.points.length-1);return new q(v,w,t,this.points[t])}},{"./lib/shaders":274,"binary-search-bounds":96,"gl-buffer":259,"gl-texture2d":353,"gl-vao":358,ndarray:495}],276:[function(b,N,I){arguments[4][257][0].apply(I,arguments)},{dup:257}],
277:[function(b,N,I){N.exports=function(r,q){var m=q[0],l=q[1],a=q[2],h=q[3],g=q[4],n=q[5],p=q[6],d=q[7],e=q[8],f=q[9],k=q[10],t=q[11],v=q[12],w=q[13],y=q[14];q=q[15];r[0]=n*(k*q-t*y)-f*(p*q-d*y)+w*(p*t-d*k);r[1]=-(l*(k*q-t*y)-f*(a*q-h*y)+w*(a*t-h*k));r[2]=l*(p*q-d*y)-n*(a*q-h*y)+w*(a*d-h*p);r[3]=-(l*(p*t-d*k)-n*(a*t-h*k)+f*(a*d-h*p));r[4]=-(g*(k*q-t*y)-e*(p*q-d*y)+v*(p*t-d*k));r[5]=m*(k*q-t*y)-e*(a*q-h*y)+v*(a*t-h*k);r[6]=-(m*(p*q-d*y)-g*(a*q-h*y)+v*(a*d-h*p));r[7]=m*(p*t-d*k)-g*(a*t-h*k)+e*(a*d-
h*p);r[8]=g*(f*q-t*w)-e*(n*q-d*w)+v*(n*t-d*f);r[9]=-(m*(f*q-t*w)-e*(l*q-h*w)+v*(l*t-h*f));r[10]=m*(n*q-d*w)-g*(l*q-h*w)+v*(l*d-h*n);r[11]=-(m*(n*t-d*f)-g*(l*t-h*f)+e*(l*d-h*n));r[12]=-(g*(f*y-k*w)-e*(n*y-p*w)+v*(n*k-p*f));r[13]=m*(f*y-k*w)-e*(l*y-a*w)+v*(l*k-a*f);r[14]=-(m*(n*y-p*w)-g*(l*y-a*w)+v*(l*p-a*n));r[15]=m*(n*k-p*f)-g*(l*k-a*f)+e*(l*p-a*n);return r}},{}],278:[function(b,N,I){N.exports=function(r){var q=new Float32Array(16);q[0]=r[0];q[1]=r[1];q[2]=r[2];q[3]=r[3];q[4]=r[4];q[5]=r[5];q[6]=
r[6];q[7]=r[7];q[8]=r[8];q[9]=r[9];q[10]=r[10];q[11]=r[11];q[12]=r[12];q[13]=r[13];q[14]=r[14];q[15]=r[15];return q}},{}],279:[function(b,N,I){N.exports=function(r,q){r[0]=q[0];r[1]=q[1];r[2]=q[2];r[3]=q[3];r[4]=q[4];r[5]=q[5];r[6]=q[6];r[7]=q[7];r[8]=q[8];r[9]=q[9];r[10]=q[10];r[11]=q[11];r[12]=q[12];r[13]=q[13];r[14]=q[14];r[15]=q[15];return r}},{}],280:[function(b,N,I){N.exports=function(){var r=new Float32Array(16);r[0]=1;r[1]=0;r[2]=0;r[3]=0;r[4]=0;r[5]=1;r[6]=0;r[7]=0;r[8]=0;r[9]=0;r[10]=1;
r[11]=0;r[12]=0;r[13]=0;r[14]=0;r[15]=1;return r}},{}],281:[function(b,N,I){N.exports=function(r){var q=r[0],m=r[1],l=r[2],a=r[3],h=r[4],g=r[5],n=r[6],p=r[7],d=r[8],e=r[9],f=r[10],k=r[11],t=r[12],v=r[13],w=r[14];r=r[15];return(q*g-m*h)*(f*r-k*w)-(q*n-l*h)*(e*r-k*v)+(q*p-a*h)*(e*w-f*v)+(m*n-l*g)*(d*r-k*t)-(m*p-a*g)*(d*w-f*t)+(l*p-a*n)*(d*v-e*t)}},{}],282:[function(b,N,I){N.exports=function(r,q){var m=q[0],l=q[1],a=q[2];q=q[3];var h=m+m,g=l+l,n=a+a;m*=h;var p=l*h;l*=g;var d=a*h,e=a*g;a*=n;h*=q;g*=q;
q*=n;r[0]=1-l-a;r[1]=p+q;r[2]=d-g;r[3]=0;r[4]=p-q;r[5]=1-m-a;r[6]=e+h;r[7]=0;r[8]=d+g;r[9]=e-h;r[10]=1-m-l;r[11]=0;r[12]=0;r[13]=0;r[14]=0;r[15]=1;return r}},{}],283:[function(b,N,I){N.exports=function(r,q,m){var l=m[0],a=m[1];m=m[2];var h=Math.sqrt(l*l+a*a+m*m);if(1E-6>Math.abs(h))return null;h=1/h;l*=h;a*=h;m*=h;h=Math.sin(q);q=Math.cos(q);var g=1-q;r[0]=l*l*g+q;r[1]=a*l*g+m*h;r[2]=m*l*g-a*h;r[3]=0;r[4]=l*a*g-m*h;r[5]=a*a*g+q;r[6]=m*a*g+l*h;r[7]=0;r[8]=l*m*g+a*h;r[9]=a*m*g-l*h;r[10]=m*m*g+q;r[11]=
0;r[12]=0;r[13]=0;r[14]=0;r[15]=1;return r}},{}],284:[function(b,N,I){N.exports=function(r,q,m){var l=q[0],a=q[1],h=q[2],g=q[3],n=l+l,p=a+a,d=h+h;q=l*n;var e=l*p;l*=d;var f=a*p;a*=d;h*=d;n*=g;p*=g;g*=d;r[0]=1-(f+h);r[1]=e+g;r[2]=l-p;r[3]=0;r[4]=e-g;r[5]=1-(q+h);r[6]=a+n;r[7]=0;r[8]=l+p;r[9]=a-n;r[10]=1-(q+f);r[11]=0;r[12]=m[0];r[13]=m[1];r[14]=m[2];r[15]=1;return r}},{}],285:[function(b,N,I){N.exports=function(r,q){r[0]=q[0];r[1]=0;r[2]=0;r[3]=0;r[4]=0;r[5]=q[1];r[6]=0;r[7]=0;r[8]=0;r[9]=0;r[10]=
q[2];r[11]=0;r[12]=0;r[13]=0;r[14]=0;r[15]=1;return r}},{}],286:[function(b,N,I){N.exports=function(r,q){r[0]=1;r[1]=0;r[2]=0;r[3]=0;r[4]=0;r[5]=1;r[6]=0;r[7]=0;r[8]=0;r[9]=0;r[10]=1;r[11]=0;r[12]=q[0];r[13]=q[1];r[14]=q[2];r[15]=1;return r}},{}],287:[function(b,N,I){N.exports=function(r,q){var m=Math.sin(q);q=Math.cos(q);r[0]=1;r[1]=0;r[2]=0;r[3]=0;r[4]=0;r[5]=q;r[6]=m;r[7]=0;r[8]=0;r[9]=-m;r[10]=q;r[11]=0;r[12]=0;r[13]=0;r[14]=0;r[15]=1;return r}},{}],288:[function(b,N,I){N.exports=function(r,q){var m=
Math.sin(q);q=Math.cos(q);r[0]=q;r[1]=0;r[2]=-m;r[3]=0;r[4]=0;r[5]=1;r[6]=0;r[7]=0;r[8]=m;r[9]=0;r[10]=q;r[11]=0;r[12]=0;r[13]=0;r[14]=0;r[15]=1;return r}},{}],289:[function(b,N,I){N.exports=function(r,q){var m=Math.sin(q);q=Math.cos(q);r[0]=q;r[1]=m;r[2]=0;r[3]=0;r[4]=-m;r[5]=q;r[6]=0;r[7]=0;r[8]=0;r[9]=0;r[10]=1;r[11]=0;r[12]=0;r[13]=0;r[14]=0;r[15]=1;return r}},{}],290:[function(b,N,I){N.exports=function(r,q,m,l,a,h,g){var n=1/(m-q),p=1/(a-l),d=1/(h-g);r[0]=2*h*n;r[1]=0;r[2]=0;r[3]=0;r[4]=0;r[5]=
2*h*p;r[6]=0;r[7]=0;r[8]=(m+q)*n;r[9]=(a+l)*p;r[10]=(g+h)*d;r[11]=-1;r[12]=0;r[13]=0;r[14]=g*h*2*d;r[15]=0;return r}},{}],291:[function(b,N,I){N.exports=function(r){r[0]=1;r[1]=0;r[2]=0;r[3]=0;r[4]=0;r[5]=1;r[6]=0;r[7]=0;r[8]=0;r[9]=0;r[10]=1;r[11]=0;r[12]=0;r[13]=0;r[14]=0;r[15]=1;return r}},{}],292:[function(b,N,I){N.exports={create:b("./create"),clone:b("./clone"),copy:b("./copy"),identity:b("./identity"),transpose:b("./transpose"),invert:b("./invert"),adjoint:b("./adjoint"),determinant:b("./determinant"),
multiply:b("./multiply"),translate:b("./translate"),scale:b("./scale"),rotate:b("./rotate"),rotateX:b("./rotateX"),rotateY:b("./rotateY"),rotateZ:b("./rotateZ"),fromRotation:b("./fromRotation"),fromRotationTranslation:b("./fromRotationTranslation"),fromScaling:b("./fromScaling"),fromTranslation:b("./fromTranslation"),fromXRotation:b("./fromXRotation"),fromYRotation:b("./fromYRotation"),fromZRotation:b("./fromZRotation"),fromQuat:b("./fromQuat"),frustum:b("./frustum"),perspective:b("./perspective"),
perspectiveFromFieldOfView:b("./perspectiveFromFieldOfView"),ortho:b("./ortho"),lookAt:b("./lookAt"),str:b("./str")}},{"./adjoint":277,"./clone":278,"./copy":279,"./create":280,"./determinant":281,"./fromQuat":282,"./fromRotation":283,"./fromRotationTranslation":284,"./fromScaling":285,"./fromTranslation":286,"./fromXRotation":287,"./fromYRotation":288,"./fromZRotation":289,"./frustum":290,"./identity":291,"./invert":293,"./lookAt":294,"./multiply":295,"./ortho":296,"./perspective":297,"./perspectiveFromFieldOfView":298,
"./rotate":299,"./rotateX":300,"./rotateY":301,"./rotateZ":302,"./scale":303,"./str":304,"./translate":305,"./transpose":306}],293:[function(b,N,I){N.exports=function(r,q){var m=q[0],l=q[1],a=q[2],h=q[3],g=q[4],n=q[5],p=q[6],d=q[7],e=q[8],f=q[9],k=q[10],t=q[11],v=q[12],w=q[13],y=q[14];q=q[15];var B=m*n-l*g,A=m*p-a*g,z=m*d-h*g,E=l*p-a*n,C=l*d-h*n,u=a*d-h*p,D=e*w-f*v,G=e*y-k*v,J=e*q-t*v,L=f*y-k*w,K=f*q-t*w,H=k*q-t*y,Q=B*H-A*K+z*L+E*J-C*G+u*D;if(!Q)return null;Q=1/Q;r[0]=(n*H-p*K+d*L)*Q;r[1]=(a*K-l*
H-h*L)*Q;r[2]=(w*u-y*C+q*E)*Q;r[3]=(k*C-f*u-t*E)*Q;r[4]=(p*J-g*H-d*G)*Q;r[5]=(m*H-a*J+h*G)*Q;r[6]=(y*z-v*u-q*A)*Q;r[7]=(e*u-k*z+t*A)*Q;r[8]=(g*K-n*J+d*D)*Q;r[9]=(l*J-m*K-h*D)*Q;r[10]=(v*C-w*z+q*B)*Q;r[11]=(f*z-e*C-t*B)*Q;r[12]=(n*G-g*L-p*D)*Q;r[13]=(m*L-l*G+a*D)*Q;r[14]=(w*A-v*E-y*B)*Q;r[15]=(e*E-f*A+k*B)*Q;return r}},{}],294:[function(b,N,I){var r=b("./identity");N.exports=function(q,m,l,a){var h=m[0],g=m[1];m=m[2];var n=a[0];var p=a[1];var d=a[2];var e=l[0];a=l[1];var f=l[2];if(1E-6>Math.abs(h-
e)&&1E-6>Math.abs(g-a)&&1E-6>Math.abs(m-f))return r(q);l=h-e;a=g-a;e=m-f;var k=1/Math.sqrt(l*l+a*a+e*e);l*=k;a*=k;e*=k;f=p*e-d*a;d=d*l-n*e;n=n*a-p*l;(k=Math.sqrt(f*f+d*d+n*n))?(k=1/k,f*=k,d*=k,n*=k):n=d=f=0;p=a*n-e*d;var t=e*f-l*n;var v=l*d-a*f;(k=Math.sqrt(p*p+t*t+v*v))?(k=1/k,p*=k,t*=k,v*=k):v=t=p=0;q[0]=f;q[1]=p;q[2]=l;q[3]=0;q[4]=d;q[5]=t;q[6]=a;q[7]=0;q[8]=n;q[9]=v;q[10]=e;q[11]=0;q[12]=-(f*h+d*g+n*m);q[13]=-(p*h+t*g+v*m);q[14]=-(l*h+a*g+e*m);q[15]=1;return q}},{"./identity":291}],295:[function(b,
N,I){N.exports=function(r,q,m){var l=q[0],a=q[1],h=q[2],g=q[3],n=q[4],p=q[5],d=q[6],e=q[7],f=q[8],k=q[9],t=q[10],v=q[11],w=q[12],y=q[13],B=q[14];q=q[15];var A=m[0],z=m[1],E=m[2],C=m[3];r[0]=A*l+z*n+E*f+C*w;r[1]=A*a+z*p+E*k+C*y;r[2]=A*h+z*d+E*t+C*B;r[3]=A*g+z*e+E*v+C*q;A=m[4];z=m[5];E=m[6];C=m[7];r[4]=A*l+z*n+E*f+C*w;r[5]=A*a+z*p+E*k+C*y;r[6]=A*h+z*d+E*t+C*B;r[7]=A*g+z*e+E*v+C*q;A=m[8];z=m[9];E=m[10];C=m[11];r[8]=A*l+z*n+E*f+C*w;r[9]=A*a+z*p+E*k+C*y;r[10]=A*h+z*d+E*t+C*B;r[11]=A*g+z*e+E*v+C*q;A=m[12];
z=m[13];E=m[14];C=m[15];r[12]=A*l+z*n+E*f+C*w;r[13]=A*a+z*p+E*k+C*y;r[14]=A*h+z*d+E*t+C*B;r[15]=A*g+z*e+E*v+C*q;return r}},{}],296:[function(b,N,I){N.exports=function(r,q,m,l,a,h,g){var n=1/(q-m),p=1/(l-a),d=1/(h-g);r[0]=-2*n;r[1]=0;r[2]=0;r[3]=0;r[4]=0;r[5]=-2*p;r[6]=0;r[7]=0;r[8]=0;r[9]=0;r[10]=2*d;r[11]=0;r[12]=(q+m)*n;r[13]=(a+l)*p;r[14]=(g+h)*d;r[15]=1;return r}},{}],297:[function(b,N,I){N.exports=function(r,q,m,l,a){q=1/Math.tan(q/2);var h=1/(l-a);r[0]=q/m;r[1]=0;r[2]=0;r[3]=0;r[4]=0;r[5]=q;
r[6]=0;r[7]=0;r[8]=0;r[9]=0;r[10]=(a+l)*h;r[11]=-1;r[12]=0;r[13]=0;r[14]=2*a*l*h;r[15]=0;return r}},{}],298:[function(b,N,I){N.exports=function(r,q,m,l){var a=Math.tan(q.upDegrees*Math.PI/180),h=Math.tan(q.downDegrees*Math.PI/180),g=Math.tan(q.leftDegrees*Math.PI/180);q=Math.tan(q.rightDegrees*Math.PI/180);var n=2/(g+q),p=2/(a+h);r[0]=n;r[1]=0;r[2]=0;r[3]=0;r[4]=0;r[5]=p;r[6]=0;r[7]=0;r[8]=-((g-q)*n*.5);r[9]=(a-h)*p*.5;r[10]=l/(m-l);r[11]=-1;r[12]=0;r[13]=0;r[14]=l*m/(m-l);r[15]=0;return r}},{}],
299:[function(b,N,I){N.exports=function(r,q,m,l){var a=l[0],h=l[1];l=l[2];var g=Math.sqrt(a*a+h*h+l*l);if(1E-6>Math.abs(g))return null;g=1/g;a*=g;h*=g;l*=g;var n=Math.sin(m);var p=Math.cos(m);var d=1-p;m=q[0];g=q[1];var e=q[2];var f=q[3];var k=q[4];var t=q[5];var v=q[6];var w=q[7];var y=q[8];var B=q[9];var A=q[10];var z=q[11];var E=a*a*d+p;var C=h*a*d+l*n;var u=l*a*d-h*n;var D=a*h*d-l*n;var G=h*h*d+p;var J=l*h*d+a*n;var L=a*l*d+h*n;a=h*l*d-a*n;h=l*l*d+p;r[0]=m*E+k*C+y*u;r[1]=g*E+t*C+B*u;r[2]=e*E+
v*C+A*u;r[3]=f*E+w*C+z*u;r[4]=m*D+k*G+y*J;r[5]=g*D+t*G+B*J;r[6]=e*D+v*G+A*J;r[7]=f*D+w*G+z*J;r[8]=m*L+k*a+y*h;r[9]=g*L+t*a+B*h;r[10]=e*L+v*a+A*h;r[11]=f*L+w*a+z*h;q!==r&&(r[12]=q[12],r[13]=q[13],r[14]=q[14],r[15]=q[15]);return r}},{}],300:[function(b,N,I){N.exports=function(r,q,m){var l=Math.sin(m);m=Math.cos(m);var a=q[4],h=q[5],g=q[6],n=q[7],p=q[8],d=q[9],e=q[10],f=q[11];q!==r&&(r[0]=q[0],r[1]=q[1],r[2]=q[2],r[3]=q[3],r[12]=q[12],r[13]=q[13],r[14]=q[14],r[15]=q[15]);r[4]=a*m+p*l;r[5]=h*m+d*l;r[6]=
g*m+e*l;r[7]=n*m+f*l;r[8]=p*m-a*l;r[9]=d*m-h*l;r[10]=e*m-g*l;r[11]=f*m-n*l;return r}},{}],301:[function(b,N,I){N.exports=function(r,q,m){var l=Math.sin(m);m=Math.cos(m);var a=q[0],h=q[1],g=q[2],n=q[3],p=q[8],d=q[9],e=q[10],f=q[11];q!==r&&(r[4]=q[4],r[5]=q[5],r[6]=q[6],r[7]=q[7],r[12]=q[12],r[13]=q[13],r[14]=q[14],r[15]=q[15]);r[0]=a*m-p*l;r[1]=h*m-d*l;r[2]=g*m-e*l;r[3]=n*m-f*l;r[8]=a*l+p*m;r[9]=h*l+d*m;r[10]=g*l+e*m;r[11]=n*l+f*m;return r}},{}],302:[function(b,N,I){N.exports=function(r,q,m){var l=
Math.sin(m);m=Math.cos(m);var a=q[0],h=q[1],g=q[2],n=q[3],p=q[4],d=q[5],e=q[6],f=q[7];q!==r&&(r[8]=q[8],r[9]=q[9],r[10]=q[10],r[11]=q[11],r[12]=q[12],r[13]=q[13],r[14]=q[14],r[15]=q[15]);r[0]=a*m+p*l;r[1]=h*m+d*l;r[2]=g*m+e*l;r[3]=n*m+f*l;r[4]=p*m-a*l;r[5]=d*m-h*l;r[6]=e*m-g*l;r[7]=f*m-n*l;return r}},{}],303:[function(b,N,I){N.exports=function(r,q,m){var l=m[0],a=m[1];m=m[2];r[0]=q[0]*l;r[1]=q[1]*l;r[2]=q[2]*l;r[3]=q[3]*l;r[4]=q[4]*a;r[5]=q[5]*a;r[6]=q[6]*a;r[7]=q[7]*a;r[8]=q[8]*m;r[9]=q[9]*m;r[10]=
q[10]*m;r[11]=q[11]*m;r[12]=q[12];r[13]=q[13];r[14]=q[14];r[15]=q[15];return r}},{}],304:[function(b,N,I){N.exports=function(r){return"mat4("+r[0]+", "+r[1]+", "+r[2]+", "+r[3]+", "+r[4]+", "+r[5]+", "+r[6]+", "+r[7]+", "+r[8]+", "+r[9]+", "+r[10]+", "+r[11]+", "+r[12]+", "+r[13]+", "+r[14]+", "+r[15]+")"}},{}],305:[function(b,N,I){N.exports=function(r,q,m){var l=m[0],a=m[1];m=m[2];if(q===r)r[12]=q[0]*l+q[4]*a+q[8]*m+q[12],r[13]=q[1]*l+q[5]*a+q[9]*m+q[13],r[14]=q[2]*l+q[6]*a+q[10]*m+q[14],r[15]=q[3]*
l+q[7]*a+q[11]*m+q[15];else{var h=q[0];var g=q[1];var n=q[2];var p=q[3];var d=q[4];var e=q[5];var f=q[6];var k=q[7];var t=q[8];var v=q[9];var w=q[10];var y=q[11];r[0]=h;r[1]=g;r[2]=n;r[3]=p;r[4]=d;r[5]=e;r[6]=f;r[7]=k;r[8]=t;r[9]=v;r[10]=w;r[11]=y;r[12]=h*l+d*a+t*m+q[12];r[13]=g*l+e*a+v*m+q[13];r[14]=n*l+f*a+w*m+q[14];r[15]=p*l+k*a+y*m+q[15]}return r}},{}],306:[function(b,N,I){N.exports=function(r,q){if(r===q){var m=q[1],l=q[2],a=q[3],h=q[6],g=q[7],n=q[11];r[1]=q[4];r[2]=q[8];r[3]=q[12];r[4]=m;r[6]=
q[9];r[7]=q[13];r[8]=l;r[9]=h;r[11]=q[14];r[12]=a;r[13]=g;r[14]=n}else r[0]=q[0],r[1]=q[4],r[2]=q[8],r[3]=q[12],r[4]=q[1],r[5]=q[5],r[6]=q[9],r[7]=q[13],r[8]=q[2],r[9]=q[6],r[10]=q[10],r[11]=q[14],r[12]=q[3],r[13]=q[7],r[14]=q[11],r[15]=q[15];return r}},{}],307:[function(b,N,I){function r(l,a){for(var h=[0,0,0,0],g=0;4>g;++g)for(var n=0;4>n;++n)h[n]+=l[4*g+n]*a[g];return h}var q=b("barycentric"),m=b("polytope-closest-point/lib/closest_point_2d.js");N.exports=function(l,a,h,g,n,p){if(1===l.length)return[0,
l[0].slice()];for(var d=Array(l.length),e=0;e<l.length;++e){var f=e,k=l[e],t=p;k=r(n,r(g,r(h,[k[0],k[1],k[2],1])));for(var v=0;3>v;++v)k[v]/=k[3];d[f]=[.5*t[0]*(1+k[0]),.5*t[1]*(1-k[1])]}h=0;g=Infinity;for(e=0;e<d.length;++e){for(p=n=0;2>p;++p)n+=Math.pow(d[e][p]-a[p],2);n<g&&(g=n,h=e)}if(2===d.length){for(n=g=e=0;2>n;++n)e+=Math.pow(a[n]-d[0][n],2),g+=Math.pow(a[n]-d[1][n],2);e=Math.sqrt(e);g=Math.sqrt(g);a=1E-6>e+g?[1,0]:[g/(e+g),e/(g+e)]}else 3===d.length?(e=[0,0],m(d[0],d[1],d[2],a,e),a=q(d,e)):
a=[];for(e=d=0;3>e;++e){if(-.001>a[e]||1.0001<a[e])return null;d+=a[e]}if(.001<Math.abs(d-1))return null;d=[0,0,0];for(e=0;e<l.length;++e)for(g=l[e],n=a[e],p=0;3>p;++p)d[p]+=n*g[p];return[h,d,a]}},{barycentric:78,"polytope-closest-point/lib/closest_point_2d.js":525}],308:[function(b,N,I){var r=b("glslify");b=r(["precision highp float;\n#define GLSLIFY 1\n\nattribute vec3 position, normal;\nattribute vec4 color;\nattribute vec2 uv;\n\nuniform mat4 model\n           , view\n           , projection\n           , inverseModel;\nuniform vec3 eyePosition\n           , lightPosition;\n\nvarying vec3 f_normal\n           , f_lightDirection\n           , f_eyeDirection\n           , f_data;\nvarying vec4 f_color;\nvarying vec2 f_uv;\n\nvec4 project(vec3 p) {\n  return projection * view * model * vec4(p, 1.0);\n}\n\nvoid main() {\n  gl_Position      \x3d project(position);\n\n  //Lighting geometry parameters\n  vec4 cameraCoordinate \x3d view * vec4(position , 1.0);\n  cameraCoordinate.xyz /\x3d cameraCoordinate.w;\n  f_lightDirection \x3d lightPosition - cameraCoordinate.xyz;\n  f_eyeDirection   \x3d eyePosition - cameraCoordinate.xyz;\n  f_normal  \x3d normalize((vec4(normal, 0.0) * inverseModel).xyz);\n\n  f_color          \x3d color;\n  f_data           \x3d position;\n  f_uv             \x3d uv;\n}\n"]);
N=r(["#extension GL_OES_standard_derivatives : enable\n\nprecision highp float;\n#define GLSLIFY 1\n\nfloat beckmannDistribution(float x, float roughness) {\n  float NdotH \x3d max(x, 0.0001);\n  float cos2Alpha \x3d NdotH * NdotH;\n  float tan2Alpha \x3d (cos2Alpha - 1.0) / cos2Alpha;\n  float roughness2 \x3d roughness * roughness;\n  float denom \x3d 3.141592653589793 * roughness2 * cos2Alpha * cos2Alpha;\n  return exp(tan2Alpha / roughness2) / denom;\n}\n\nfloat cookTorranceSpecular(\n  vec3 lightDirection,\n  vec3 viewDirection,\n  vec3 surfaceNormal,\n  float roughness,\n  float fresnel) {\n\n  float VdotN \x3d max(dot(viewDirection, surfaceNormal), 0.0);\n  float LdotN \x3d max(dot(lightDirection, surfaceNormal), 0.0);\n\n  //Half angle vector\n  vec3 H \x3d normalize(lightDirection + viewDirection);\n\n  //Geometric term\n  float NdotH \x3d max(dot(surfaceNormal, H), 0.0);\n  float VdotH \x3d max(dot(viewDirection, H), 0.000001);\n  float LdotH \x3d max(dot(lightDirection, H), 0.000001);\n  float G1 \x3d (2.0 * NdotH * VdotN) / VdotH;\n  float G2 \x3d (2.0 * NdotH * LdotN) / LdotH;\n  float G \x3d min(1.0, min(G1, G2));\n  \n  //Distribution term\n  float D \x3d beckmannDistribution(NdotH, roughness);\n\n  //Fresnel term\n  float F \x3d pow(1.0 - VdotN, fresnel);\n\n  //Multiply terms and done\n  return  G * F * D / max(3.14159265 * VdotN, 0.000001);\n}\n\n//#pragma glslify: beckmann \x3d require(glsl-specular-beckmann) // used in gl-surface3d\n\nbool outOfRange(float a, float b, float p) {\n  return ((p \x3e max(a, b)) || \n          (p \x3c min(a, b)));\n}\n\nbool outOfRange(vec2 a, vec2 b, vec2 p) {\n  return (outOfRange(a.x, b.x, p.x) ||\n          outOfRange(a.y, b.y, p.y));\n}\n\nbool outOfRange(vec3 a, vec3 b, vec3 p) {\n  return (outOfRange(a.x, b.x, p.x) ||\n          outOfRange(a.y, b.y, p.y) ||\n          outOfRange(a.z, b.z, p.z));\n}\n\nbool outOfRange(vec4 a, vec4 b, vec4 p) {\n  return outOfRange(a.xyz, b.xyz, p.xyz);\n}\n\nuniform vec3 clipBounds[2];\nuniform float roughness\n            , fresnel\n            , kambient\n            , kdiffuse\n            , kspecular;\nuniform sampler2D texture;\n\nvarying vec3 f_normal\n           , f_lightDirection\n           , f_eyeDirection\n           , f_data;\nvarying vec4 f_color;\nvarying vec2 f_uv;\n\nvoid main() {\n  if (f_color.a \x3d\x3d 0.0 ||\n    outOfRange(clipBounds[0], clipBounds[1], f_data)\n  ) discard;\n\n  vec3 N \x3d normalize(f_normal);\n  vec3 L \x3d normalize(f_lightDirection);\n  vec3 V \x3d normalize(f_eyeDirection);\n\n  if(gl_FrontFacing) {\n    N \x3d -N;\n  }\n\n  float specular \x3d min(1.0, max(0.0, cookTorranceSpecular(L, V, N, roughness, fresnel)));\n  //float specular \x3d max(0.0, beckmann(L, V, N, roughness)); // used in gl-surface3d\n\n  float diffuse  \x3d min(kambient + kdiffuse * max(dot(N, L), 0.0), 1.0);\n\n  vec4 surfaceColor \x3d vec4(f_color.rgb, 1.0) * texture2D(texture, f_uv);\n  vec4 litColor \x3d surfaceColor.a * vec4(diffuse * surfaceColor.rgb + kspecular * vec3(1,1,1) * specular,  1.0);\n\n  gl_FragColor \x3d litColor * f_color.a;\n}\n"]);
var q=r(["precision highp float;\n#define GLSLIFY 1\n\nattribute vec3 position;\nattribute vec4 color;\nattribute vec2 uv;\n\nuniform mat4 model, view, projection;\n\nvarying vec4 f_color;\nvarying vec3 f_data;\nvarying vec2 f_uv;\n\nvoid main() {\n  gl_Position \x3d projection * view * model * vec4(position, 1.0);\n  f_color \x3d color;\n  f_data  \x3d position;\n  f_uv    \x3d uv;\n}"]),m=r(["precision highp float;\n#define GLSLIFY 1\n\nbool outOfRange(float a, float b, float p) {\n  return ((p \x3e max(a, b)) || \n          (p \x3c min(a, b)));\n}\n\nbool outOfRange(vec2 a, vec2 b, vec2 p) {\n  return (outOfRange(a.x, b.x, p.x) ||\n          outOfRange(a.y, b.y, p.y));\n}\n\nbool outOfRange(vec3 a, vec3 b, vec3 p) {\n  return (outOfRange(a.x, b.x, p.x) ||\n          outOfRange(a.y, b.y, p.y) ||\n          outOfRange(a.z, b.z, p.z));\n}\n\nbool outOfRange(vec4 a, vec4 b, vec4 p) {\n  return outOfRange(a.xyz, b.xyz, p.xyz);\n}\n\nuniform vec3 clipBounds[2];\nuniform sampler2D texture;\nuniform float opacity;\n\nvarying vec4 f_color;\nvarying vec3 f_data;\nvarying vec2 f_uv;\n\nvoid main() {\n  if (outOfRange(clipBounds[0], clipBounds[1], f_data)) discard;\n\n  gl_FragColor \x3d f_color * texture2D(texture, f_uv) * opacity;\n}"]),
l=r(["precision highp float;\n#define GLSLIFY 1\n\nbool outOfRange(float a, float b, float p) {\n  return ((p \x3e max(a, b)) || \n          (p \x3c min(a, b)));\n}\n\nbool outOfRange(vec2 a, vec2 b, vec2 p) {\n  return (outOfRange(a.x, b.x, p.x) ||\n          outOfRange(a.y, b.y, p.y));\n}\n\nbool outOfRange(vec3 a, vec3 b, vec3 p) {\n  return (outOfRange(a.x, b.x, p.x) ||\n          outOfRange(a.y, b.y, p.y) ||\n          outOfRange(a.z, b.z, p.z));\n}\n\nbool outOfRange(vec4 a, vec4 b, vec4 p) {\n  return outOfRange(a.xyz, b.xyz, p.xyz);\n}\n\nattribute vec3 position;\nattribute vec4 color;\nattribute vec2 uv;\nattribute float pointSize;\n\nuniform mat4 model, view, projection;\nuniform vec3 clipBounds[2];\n\nvarying vec4 f_color;\nvarying vec2 f_uv;\n\nvoid main() {\n  if (outOfRange(clipBounds[0], clipBounds[1], position)) {\n\n    gl_Position \x3d vec4(0.0, 0.0 ,0.0 ,0.0);\n  } else {\n    gl_Position \x3d projection * view * model * vec4(position, 1.0);\n  }\n  gl_PointSize \x3d pointSize;\n  f_color \x3d color;\n  f_uv \x3d uv;\n}"]),
a=r(["precision highp float;\n#define GLSLIFY 1\n\nuniform sampler2D texture;\nuniform float opacity;\n\nvarying vec4 f_color;\nvarying vec2 f_uv;\n\nvoid main() {\n  vec2 pointR \x3d gl_PointCoord.xy - vec2(0.5, 0.5);\n  if(dot(pointR, pointR) \x3e 0.25) {\n    discard;\n  }\n  gl_FragColor \x3d f_color * texture2D(texture, f_uv) * opacity;\n}"]),h=r(["precision highp float;\n#define GLSLIFY 1\n\nattribute vec3 position;\nattribute vec4 id;\n\nuniform mat4 model, view, projection;\n\nvarying vec3 f_position;\nvarying vec4 f_id;\n\nvoid main() {\n  gl_Position \x3d projection * view * model * vec4(position, 1.0);\n  f_id        \x3d id;\n  f_position  \x3d position;\n}"]),
g=r(["precision highp float;\n#define GLSLIFY 1\n\nbool outOfRange(float a, float b, float p) {\n  return ((p \x3e max(a, b)) || \n          (p \x3c min(a, b)));\n}\n\nbool outOfRange(vec2 a, vec2 b, vec2 p) {\n  return (outOfRange(a.x, b.x, p.x) ||\n          outOfRange(a.y, b.y, p.y));\n}\n\nbool outOfRange(vec3 a, vec3 b, vec3 p) {\n  return (outOfRange(a.x, b.x, p.x) ||\n          outOfRange(a.y, b.y, p.y) ||\n          outOfRange(a.z, b.z, p.z));\n}\n\nbool outOfRange(vec4 a, vec4 b, vec4 p) {\n  return outOfRange(a.xyz, b.xyz, p.xyz);\n}\n\nuniform vec3  clipBounds[2];\nuniform float pickId;\n\nvarying vec3 f_position;\nvarying vec4 f_id;\n\nvoid main() {\n  if (outOfRange(clipBounds[0], clipBounds[1], f_position)) discard;\n\n  gl_FragColor \x3d vec4(pickId, f_id.xyz);\n}"]),
n=r(["precision highp float;\n#define GLSLIFY 1\n\nbool outOfRange(float a, float b, float p) {\n  return ((p \x3e max(a, b)) || \n          (p \x3c min(a, b)));\n}\n\nbool outOfRange(vec2 a, vec2 b, vec2 p) {\n  return (outOfRange(a.x, b.x, p.x) ||\n          outOfRange(a.y, b.y, p.y));\n}\n\nbool outOfRange(vec3 a, vec3 b, vec3 p) {\n  return (outOfRange(a.x, b.x, p.x) ||\n          outOfRange(a.y, b.y, p.y) ||\n          outOfRange(a.z, b.z, p.z));\n}\n\nbool outOfRange(vec4 a, vec4 b, vec4 p) {\n  return outOfRange(a.xyz, b.xyz, p.xyz);\n}\n\nattribute vec3  position;\nattribute float pointSize;\nattribute vec4  id;\n\nuniform mat4 model, view, projection;\nuniform vec3 clipBounds[2];\n\nvarying vec3 f_position;\nvarying vec4 f_id;\n\nvoid main() {\n  if (outOfRange(clipBounds[0], clipBounds[1], position)) {\n\n    gl_Position \x3d vec4(0.0, 0.0, 0.0, 0.0);\n  } else {\n    gl_Position  \x3d projection * view * model * vec4(position, 1.0);\n    gl_PointSize \x3d pointSize;\n  }\n  f_id         \x3d id;\n  f_position   \x3d position;\n}"]),
p=r(["precision highp float;\n#define GLSLIFY 1\n\nattribute vec3 position;\n\nuniform mat4 model, view, projection;\n\nvoid main() {\n  gl_Position \x3d projection * view * model * vec4(position, 1.0);\n}"]);r=r(["precision highp float;\n#define GLSLIFY 1\n\nuniform vec3 contourColor;\n\nvoid main() {\n  gl_FragColor \x3d vec4(contourColor, 1.0);\n}\n"]);I.meshShader={vertex:b,fragment:N,attributes:[{name:"position",type:"vec3"},{name:"normal",type:"vec3"},{name:"color",type:"vec4"},{name:"uv",type:"vec2"}]};
I.wireShader={vertex:q,fragment:m,attributes:[{name:"position",type:"vec3"},{name:"color",type:"vec4"},{name:"uv",type:"vec2"}]};I.pointShader={vertex:l,fragment:a,attributes:[{name:"position",type:"vec3"},{name:"color",type:"vec4"},{name:"uv",type:"vec2"},{name:"pointSize",type:"float"}]};I.pickShader={vertex:h,fragment:g,attributes:[{name:"position",type:"vec3"},{name:"id",type:"vec4"}]};I.pointPickShader={vertex:n,fragment:g,attributes:[{name:"position",type:"vec3"},{name:"pointSize",type:"float"},
{name:"id",type:"vec4"}]};I.contourShader={vertex:p,fragment:r,attributes:[{name:"position",type:"vec3"}]}},{glslify:310}],309:[function(b,N,I){function r(C,u,D,G,J,L,K,H,Q,M,P,T,O,U,S,X,ba,ca,ia,ja,la,da,oa,sa,ma,qa,pa){this.gl=C;this.pixelRatio=1;this.cells=[];this.positions=[];this.intensity=[];this.texture=u;this.dirty=!0;this.triShader=D;this.lineShader=G;this.pointShader=J;this.pickShader=L;this.pointPickShader=K;this.contourShader=H;this.trianglePositions=Q;this.triangleColors=P;this.triangleNormals=
O;this.triangleUVs=T;this.triangleIds=M;this.triangleVAO=U;this.triangleCount=0;this.lineWidth=1;this.edgePositions=S;this.edgeColors=ba;this.edgeUVs=ca;this.edgeIds=X;this.edgeVAO=ia;this.edgeCount=0;this.pointPositions=ja;this.pointColors=da;this.pointUVs=oa;this.pointSizes=sa;this.pointIds=la;this.pointVAO=ma;this.pointCount=0;this.contourLineWidth=1;this.contourPositions=qa;this.contourVAO=pa;this.contourCount=0;this.contourColor=[0,0,0];this.pickVertex=this.contourEnable=!0;this.pickId=1;this.bounds=
[[Infinity,Infinity,Infinity],[-Infinity,-Infinity,-Infinity]];this.clipBounds=[[-Infinity,-Infinity,-Infinity],[Infinity,Infinity,Infinity]];this.lightPosition=[1E5,1E5,0];this.diffuseLight=this.ambientLight=.8;this.specularLight=2;this.roughness=.5;this.fresnel=1.5;this.opacity=1;this.opacityscale=this.hasAlpha=!1;this._projection=this._view=this._model=E;this._resolution=[1,1]}function q(C,u){if(!u||!u.length)return 1;for(var D=0;D<u.length&&!(2>u.length);++D){if(u[D][0]===C)return u[D][1];if(u[D][0]>
C&&0<D)return C=(u[D][0]-C)/(u[D][0]-u[D-1][0]),u[D][1]*(1-C)+C*u[D-1][1]}return 1}var m=b("gl-shader"),l=b("gl-buffer"),a=b("gl-vao"),h=b("gl-texture2d"),g=b("normals"),n=b("gl-mat4/multiply"),p=b("gl-mat4/invert"),d=b("ndarray"),e=b("colormap"),f=b("simplicial-complex-contour"),k=b("typedarray-pool");I=b("./lib/shaders");var t=b("./lib/closest-point"),v=I.meshShader,w=I.wireShader,y=I.pointShader,B=I.pickShader,A=I.pointPickShader,z=I.contourShader,E=[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1];b=r.prototype;
b.isOpaque=function(){return!this.hasAlpha};b.isTransparent=function(){return this.hasAlpha};b.pickSlots=1;b.setPickBase=function(C){this.pickId=C};b.highlight=function(C){if(C&&this.contourEnable){var u=f(this.cells,this.intensity,C.intensity);C=u.cells;var D=u.vertexIds;u=u.vertexWeights;for(var G=C.length,J=k.mallocFloat32(6*G),L=0,K=0;K<G;++K)for(var H=C[K],Q=0;2>Q;++Q){var M=H[0];2===H.length&&(M=H[Q]);var P=u[M],T=1-P,O=this.positions[D[M][0]];M=this.positions[D[M][1]];for(var U=0;3>U;++U)J[L++]=
P*O[U]+T*M[U]}this.contourCount=L/3|0;this.contourPositions.update(J.subarray(0,L));k.free(J)}else this.contourCount=0};b.update=function(C){C=C||{};var u=this.gl;this.dirty=!0;"contourEnable"in C&&(this.contourEnable=C.contourEnable);"contourColor"in C&&(this.contourColor=C.contourColor);"lineWidth"in C&&(this.lineWidth=C.lineWidth);"lightPosition"in C&&(this.lightPosition=C.lightPosition);this.hasAlpha=!1;"opacity"in C&&(this.opacity=C.opacity,1>this.opacity&&(this.hasAlpha=!0));"opacityscale"in
C&&(this.opacityscale=C.opacityscale,this.hasAlpha=!0);"ambient"in C&&(this.ambientLight=C.ambient);"diffuse"in C&&(this.diffuseLight=C.diffuse);"specular"in C&&(this.specularLight=C.specular);"roughness"in C&&(this.roughness=C.roughness);"fresnel"in C&&(this.fresnel=C.fresnel);if(C.texture)this.texture.dispose(),this.texture=h(u,C.texture);else if(C.colormap){this.texture.shape=[256,256];this.texture.minFilter=u.LINEAR_MIPMAP_LINEAR;this.texture.magFilter=u.LINEAR;u=this.texture;var D=u.setPixels;
var G=this.opacityscale;for(var J=e({colormap:C.colormap,nshades:256,format:"rgba"}),L=new Uint8Array(1024),K=0;256>K;++K){for(var H=J[K],Q=0;3>Q;++Q)L[4*K+Q]=H[Q];L[4*K+3]=G?255*q(K/255,G):255*H[3]}G=d(L,[256,256,4],[4,0,1]);D.call(u,G);this.texture.generateMipmap()}u=C.cells;if((D=C.positions)&&u){G=[];J=[];L=[];K=[];H=[];Q=[];var M=[],P=[],T=[],O=[],U=[],S=[],X=[],ba=[];this.cells=u;this.positions=D;var ca=C.vertexNormals,ia=C.cellNormals,ja=void 0===C.vertexNormalsEpsilon?1E-6:C.vertexNormalsEpsilon,
la=void 0===C.faceNormalsEpsilon?1E-6:C.faceNormalsEpsilon;C.useFacetNormals&&!ia&&(ia=g.faceNormals(u,D,la));ia||ca||(ca=g.vertexNormals(u,D,ja));ja=C.vertexColors;la=C.cellColors;var da=C.meshColor||[1,1,1,1],oa=C.vertexUVs,sa=C.vertexIntensity,ma=C.cellUVs,qa=C.cellIntensity,pa=Infinity,na=-Infinity;if(!oa&&!ma)if(sa)if(C.vertexIntensityBounds)pa=+C.vertexIntensityBounds[0],na=+C.vertexIntensityBounds[1];else for(var ka=0;ka<sa.length;++ka){var ua=sa[ka];pa=Math.min(pa,ua);na=Math.max(na,ua)}else if(qa)if(C.cellIntensityBounds)pa=
+C.cellIntensityBounds[0],na=+C.cellIntensityBounds[1];else for(ka=0;ka<qa.length;++ka)ua=qa[ka],pa=Math.min(pa,ua),na=Math.max(na,ua);else for(ka=0;ka<D.length;++ka)ua=D[ka][2],pa=Math.min(pa,ua),na=Math.max(na,ua);if(sa)this.intensity=sa;else if(qa)this.intensity=qa;else{ka=D.length;ua=Array(ka);for(var va=0;va<ka;++va)ua[va]=D[va][2];this.intensity=ua}this.pickVertex=!(qa||la);ua=C.pointSizes;C=C.pointSize||1;this.bounds=[[Infinity,Infinity,Infinity],[-Infinity,-Infinity,-Infinity]];for(ka=0;ka<
D.length;++ka){var Ca=D[ka];for(va=0;3>va;++va)!isNaN(Ca[va])&&isFinite(Ca[va])&&(this.bounds[0][va]=Math.min(this.bounds[0][va],Ca[va]),this.bounds[1][va]=Math.max(this.bounds[1][va],Ca[va]))}var Ma=0,Ua=0,eb=0;ka=0;a:for(;ka<u.length;++ka){var fb=u[ka];switch(fb.length){case 1:var nb=fb[0];Ca=D[nb];for(va=0;3>va;++va)if(isNaN(Ca[va])||!isFinite(Ca[va]))continue a;O.push(Ca[0],Ca[1],Ca[2]);var cb=ja?ja[nb]:la?la[ka]:da;this.opacityscale&&sa?J.push(cb[0],cb[1],cb[2],this.opacity*q((sa[nb]-pa)/(na-
pa),this.opacityscale)):3===cb.length?U.push(cb[0],cb[1],cb[2],this.opacity):(U.push(cb[0],cb[1],cb[2],cb[3]*this.opacity),1>cb[3]&&(this.hasAlpha=!0));Ca=oa?oa[nb]:sa?[(sa[nb]-pa)/(na-pa),0]:ma?ma[ka]:qa?[(qa[ka]-pa)/(na-pa),0]:[(Ca[2]-pa)/(na-pa),0];S.push(Ca[0],Ca[1]);ua?X.push(ua[nb]):X.push(C);ba.push(ka);eb+=1;break;case 2:for(va=0;2>va;++va)for(nb=fb[va],Ca=D[nb],nb=0;3>nb;++nb)if(isNaN(Ca[nb])||!isFinite(Ca[nb]))continue a;for(va=0;2>va;++va)nb=fb[va],Ca=D[nb],Q.push(Ca[0],Ca[1],Ca[2]),cb=
ja?ja[nb]:la?la[ka]:da,this.opacityscale&&sa?J.push(cb[0],cb[1],cb[2],this.opacity*q((sa[nb]-pa)/(na-pa),this.opacityscale)):3===cb.length?M.push(cb[0],cb[1],cb[2],this.opacity):(M.push(cb[0],cb[1],cb[2],cb[3]*this.opacity),1>cb[3]&&(this.hasAlpha=!0)),Ca=oa?oa[nb]:sa?[(sa[nb]-pa)/(na-pa),0]:ma?ma[ka]:qa?[(qa[ka]-pa)/(na-pa),0]:[(Ca[2]-pa)/(na-pa),0],P.push(Ca[0],Ca[1]),T.push(ka);Ua+=1;break;case 3:for(va=0;3>va;++va)for(nb=fb[va],Ca=D[nb],nb=0;3>nb;++nb)if(isNaN(Ca[nb])||!isFinite(Ca[nb]))continue a;
for(va=0;3>va;++va)nb=fb[2-va],Ca=D[nb],G.push(Ca[0],Ca[1],Ca[2]),(cb=ja?ja[nb]:la?la[ka]:da)?this.opacityscale&&sa?J.push(cb[0],cb[1],cb[2],this.opacity*q((sa[nb]-pa)/(na-pa),this.opacityscale)):3===cb.length?J.push(cb[0],cb[1],cb[2],this.opacity):(J.push(cb[0],cb[1],cb[2],cb[3]*this.opacity),1>cb[3]&&(this.hasAlpha=!0)):J.push(.5,.5,.5,1),Ca=oa?oa[nb]:sa?[(sa[nb]-pa)/(na-pa),0]:ma?ma[ka]:qa?[(qa[ka]-pa)/(na-pa),0]:[(Ca[2]-pa)/(na-pa),0],K.push(Ca[0],Ca[1]),Ca=ca?ca[nb]:ia[ka],L.push(Ca[0],Ca[1],
Ca[2]),H.push(ka);Ma+=1}}this.pointCount=eb;this.edgeCount=Ua;this.triangleCount=Ma;this.pointPositions.update(O);this.pointColors.update(U);this.pointUVs.update(S);this.pointSizes.update(X);this.pointIds.update(new Uint32Array(ba));this.edgePositions.update(Q);this.edgeColors.update(M);this.edgeUVs.update(P);this.edgeIds.update(new Uint32Array(T));this.trianglePositions.update(G);this.triangleColors.update(J);this.triangleUVs.update(K);this.triangleNormals.update(L);this.triangleIds.update(new Uint32Array(H))}};
b.drawTransparent=b.draw=function(C){C=C||{};var u=this.gl,D=C.model||E,G=C.view||E,J=C.projection||E,L=[[-1E6,-1E6,-1E6],[1E6,1E6,1E6]];for(C=0;3>C;++C)L[0][C]=Math.max(L[0][C],this.clipBounds[0][C]),L[1][C]=Math.min(L[1][C],this.clipBounds[1][C]);D={model:D,view:G,projection:J,inverseModel:E.slice(),clipBounds:L,kambient:this.ambientLight,kdiffuse:this.diffuseLight,kspecular:this.specularLight,roughness:this.roughness,fresnel:this.fresnel,eyePosition:[0,0,0],lightPosition:[0,0,0],contourColor:this.contourColor,
texture:0};D.inverseModel=p(D.inverseModel,D.model);u.disable(u.CULL_FACE);this.texture.bind(0);G=Array(16);n(G,D.view,D.model);n(G,D.projection,G);p(G,G);for(C=0;3>C;++C)D.eyePosition[C]=G[12+C]/G[15];J=G[15];for(C=0;3>C;++C)J+=this.lightPosition[C]*G[4*C+3];for(C=0;3>C;++C){L=G[12+C];for(var K=0;3>K;++K)L+=G[4*K+C]*this.lightPosition[K];D.lightPosition[C]=L/J}0<this.triangleCount&&(C=this.triShader,C.bind(),C.uniforms=D,this.triangleVAO.bind(),u.drawArrays(u.TRIANGLES,0,3*this.triangleCount),this.triangleVAO.unbind());
0<this.edgeCount&&0<this.lineWidth&&(C=this.lineShader,C.bind(),C.uniforms=D,this.edgeVAO.bind(),u.lineWidth(this.lineWidth*this.pixelRatio),u.drawArrays(u.LINES,0,2*this.edgeCount),this.edgeVAO.unbind());0<this.pointCount&&(C=this.pointShader,C.bind(),C.uniforms=D,this.pointVAO.bind(),u.drawArrays(u.POINTS,0,this.pointCount),this.pointVAO.unbind());this.contourEnable&&0<this.contourCount&&0<this.contourLineWidth&&(C=this.contourShader,C.bind(),C.uniforms=D,this.contourVAO.bind(),u.drawArrays(u.LINES,
0,this.contourCount),this.contourVAO.unbind())};b.drawPick=function(C){C=C||{};var u=this.gl,D=C.model||E,G=C.view||E;C=C.projection||E;for(var J=[[-1E6,-1E6,-1E6],[1E6,1E6,1E6]],L=0;3>L;++L)J[0][L]=Math.max(J[0][L],this.clipBounds[0][L]),J[1][L]=Math.min(J[1][L],this.clipBounds[1][L]);this._model=[].slice.call(D);this._view=[].slice.call(G);this._projection=[].slice.call(C);this._resolution=[u.drawingBufferWidth,u.drawingBufferHeight];D={model:D,view:G,projection:C,clipBounds:J,pickId:this.pickId/
255};G=this.pickShader;G.bind();G.uniforms=D;0<this.triangleCount&&(this.triangleVAO.bind(),u.drawArrays(u.TRIANGLES,0,3*this.triangleCount),this.triangleVAO.unbind());0<this.edgeCount&&(this.edgeVAO.bind(),u.lineWidth(this.lineWidth*this.pixelRatio),u.drawArrays(u.LINES,0,2*this.edgeCount),this.edgeVAO.unbind());0<this.pointCount&&(G=this.pointPickShader,G.bind(),G.uniforms=D,this.pointVAO.bind(),u.drawArrays(u.POINTS,0,this.pointCount),this.pointVAO.unbind())};b.pick=function(C){if(!C||C.id!==this.pickId)return null;
for(var u=C.value[0]+256*C.value[1]+65536*C.value[2],D=this.cells[u],G=this.positions,J=Array(D.length),L=0;L<D.length;++L)J[L]=G[D[L]];L=C.coord[0];C=C.coord[1];if(!this.pickVertex){J=this.positions[D[0]];G=this.positions[D[1]];var K=this.positions[D[2]];return{_cellCenter:!0,position:[L,C],index:u,cell:D,cellId:u,intensity:this.intensity[u],dataCoordinate:[(J[0]+G[0]+K[0])/3,(J[1]+G[1]+K[1])/3,(J[2]+G[2]+K[2])/3]}}J=t(J,[L*this.pixelRatio,this._resolution[1]-C*this.pixelRatio],this._model,this._view,
this._projection,this._resolution);if(!J)return null;C=J[2];for(L=G=0;L<D.length;++L)G+=C[L]*this.intensity[D[L]];return{position:J[1],index:D[J[0]],cell:D,cellId:u,intensity:G,dataCoordinate:this.positions[D[J[0]]]}};b.dispose=function(){this.texture.dispose();this.triShader.dispose();this.lineShader.dispose();this.pointShader.dispose();this.pickShader.dispose();this.pointPickShader.dispose();this.triangleVAO.dispose();this.trianglePositions.dispose();this.triangleColors.dispose();this.triangleUVs.dispose();
this.triangleNormals.dispose();this.triangleIds.dispose();this.edgeVAO.dispose();this.edgePositions.dispose();this.edgeColors.dispose();this.edgeUVs.dispose();this.edgeIds.dispose();this.pointVAO.dispose();this.pointPositions.dispose();this.pointColors.dispose();this.pointUVs.dispose();this.pointSizes.dispose();this.pointIds.dispose();this.contourVAO.dispose();this.contourPositions.dispose();this.contourShader.dispose()};N.exports=function(C,u){1===arguments.length&&(u=C,C=u.gl);if(!(C.getExtension("OES_standard_derivatives")||
C.getExtension("MOZ_OES_standard_derivatives")||C.getExtension("WEBKIT_OES_standard_derivatives")))throw Error("derivatives not supported");var D=m(C,v.vertex,v.fragment);D.attributes.position.location=0;D.attributes.color.location=2;D.attributes.uv.location=3;D.attributes.normal.location=4;var G=m(C,w.vertex,w.fragment);G.attributes.position.location=0;G.attributes.color.location=2;G.attributes.uv.location=3;var J=m(C,y.vertex,y.fragment);J.attributes.position.location=0;J.attributes.color.location=
2;J.attributes.uv.location=3;J.attributes.pointSize.location=4;var L=m(C,B.vertex,B.fragment);L.attributes.position.location=0;L.attributes.id.location=1;var K=m(C,A.vertex,A.fragment);K.attributes.position.location=0;K.attributes.id.location=1;K.attributes.pointSize.location=4;var H=m(C,z.vertex,z.fragment);H.attributes.position.location=0;var Q=h(C,d(new Uint8Array([255,255,255,255]),[1,1,4]));Q.generateMipmap();Q.minFilter=C.LINEAR_MIPMAP_LINEAR;Q.magFilter=C.LINEAR;var M=l(C),P=l(C),T=l(C),O=
l(C),U=l(C),S=a(C,[{buffer:M,type:C.FLOAT,size:3},{buffer:U,type:C.UNSIGNED_BYTE,size:4,normalized:!0},{buffer:P,type:C.FLOAT,size:4},{buffer:T,type:C.FLOAT,size:2},{buffer:O,type:C.FLOAT,size:3}]),X=l(C),ba=l(C),ca=l(C),ia=l(C),ja=a(C,[{buffer:X,type:C.FLOAT,size:3},{buffer:ia,type:C.UNSIGNED_BYTE,size:4,normalized:!0},{buffer:ba,type:C.FLOAT,size:4},{buffer:ca,type:C.FLOAT,size:2}]),la=l(C),da=l(C),oa=l(C),sa=l(C),ma=l(C),qa=a(C,[{buffer:la,type:C.FLOAT,size:3},{buffer:ma,type:C.UNSIGNED_BYTE,size:4,
normalized:!0},{buffer:da,type:C.FLOAT,size:4},{buffer:oa,type:C.FLOAT,size:2},{buffer:sa,type:C.FLOAT,size:1}]),pa=l(C),na=a(C,[{buffer:pa,type:C.FLOAT,size:3}]);D=new r(C,Q,D,G,J,L,K,H,M,U,P,T,O,S,X,ia,ba,ca,ja,la,ma,da,oa,sa,qa,pa,na);D.update(u);return D}},{"./lib/closest-point":307,"./lib/shaders":308,colormap:131,"gl-buffer":259,"gl-mat4/invert":293,"gl-mat4/multiply":295,"gl-shader":335,"gl-texture2d":353,"gl-vao":358,ndarray:495,normals:498,"simplicial-complex-contour":556,"typedarray-pool":595}],
310:[function(b,N,I){arguments[4][257][0].apply(I,arguments)},{dup:257}],311:[function(b,N,I){function r(a,h,g){this.plot=a;this.vbo=h;this.shader=g}N.exports=function(a){var h=a.gl,g=q(h,[0,0,0,1,1,0,1,1]);h=m(h,l.boxVert,l.lineFrag);return new r(a,g,h)};var q=b("gl-buffer"),m=b("gl-shader"),l=b("./shaders");b=r.prototype;b.bind=function(){var a=this.shader;this.vbo.bind();this.shader.bind();a.attributes.coord.pointer();a.uniforms.screenBox=this.plot.screenBox};b.drawBox=function(){var a=[0,0],h=
[0,0];return function(g,n,p,d,e){var f=this.shader,k=this.plot.gl;a[0]=g;a[1]=n;h[0]=p;h[1]=d;f.uniforms.lo=a;f.uniforms.hi=h;f.uniforms.color=e;k.drawArrays(k.TRIANGLE_STRIP,0,4)}}();b.dispose=function(){this.vbo.dispose();this.shader.dispose()}},{"./shaders":314,"gl-buffer":259,"gl-shader":335}],312:[function(b,N,I){function r(g,n,p,d){this.plot=g;this.vbo=n;this.shader=p;this.tickShader=d;this.ticks=[[],[]]}function q(g,n){return g-n}N.exports=function(g){var n=g.gl,p=m(n),d=l(n,h.gridVert,h.gridFrag);
n=l(n,h.tickVert,h.gridFrag);return new r(g,p,d,n)};var m=b("gl-buffer"),l=b("gl-shader"),a=b("binary-search-bounds"),h=b("./shaders");b=r.prototype;b.draw=function(){var g=[0,0],n=[0,0],p=[0,0];return function(){var d=this.plot,e=this.vbo,f=this.shader,k=this.ticks,t=d.gl,v=d._tickBounds,w=d.dataBox,y=d.viewBox,B=d.gridLineWidth,A=d.gridLineColor,z=d.gridLineEnable;d=d.pixelRatio;for(var E=0;2>E;++E){var C=v[E],u=.5*(w[E+2]+w[E]),D=w[E+2]-w[E];n[E]=2*(v[E+2]-C)/D;g[E]=2*(C-u)/D}f.bind();e.bind();
f.attributes.dataCoord.pointer();f.uniforms.dataShift=g;f.uniforms.dataScale=n;for(E=e=0;2>E;++E)p[0]=p[1]=0,p[E]=1,f.uniforms.dataAxis=p,f.uniforms.lineWidth=B[E]/(y[E+2]-y[E])*d,f.uniforms.color=A[E],v=6*k[E].length,z[E]&&v&&t.drawArrays(t.TRIANGLES,e,v),e+=v}}();b.drawTickMarks=function(){var g=[0,0],n=[0,0],p=[1,0],d=[0,1],e=[0,0],f=[0,0];return function(){var k=this.plot,t=this.vbo,v=this.tickShader,w=this.ticks,y=k.gl,B=k._tickBounds,A=k.dataBox,z=k.viewBox,E=k.pixelRatio,C=k.screenBox,u=C[2]-
C[0];C=C[3]-C[1];for(var D=z[2]-z[0],G=z[3]-z[1],J=0;2>J;++J){var L=B[J],K=.5*(A[J+2]+A[J]),H=A[J+2]-A[J];n[J]=2*(B[J+2]-L)/H;g[J]=2*(L-K)/H}n[0]*=D/u;g[0]*=D/u;n[1]*=G/C;g[1]*=G/C;v.bind();t.bind();v.attributes.dataCoord.pointer();t=v.uniforms;t.dataShift=g;t.dataScale=n;v=k.tickMarkLength;D=k.tickMarkWidth;k=k.tickMarkColor;J=6*w[0].length;L=Math.min(a.ge(w[0],(A[0]-B[0])/(B[2]-B[0]),q),w[0].length);K=Math.min(a.gt(w[0],(A[2]-B[0])/(B[2]-B[0]),q),w[0].length);G=6*L;L=6*Math.max(0,K-L);K=Math.min(a.ge(w[1],
(A[1]-B[1])/(B[3]-B[1]),q),w[1].length);w=Math.min(a.gt(w[1],(A[3]-B[1])/(B[3]-B[1]),q),w[1].length);B=J+6*K;w=6*Math.max(0,w-K);e[0]=2*(z[0]-v[1])/u-1;e[1]=(z[3]+z[1])/C-1;f[0]=v[1]*E/u;f[1]=D[1]*E/C;w&&(t.color=k[1],t.tickScale=f,t.dataAxis=d,t.screenOffset=e,y.drawArrays(y.TRIANGLES,B,w));e[0]=(z[2]+z[0])/u-1;e[1]=2*(z[1]-v[0])/C-1;f[0]=D[0]*E/u;f[1]=v[0]*E/C;L&&(t.color=k[0],t.tickScale=f,t.dataAxis=p,t.screenOffset=e,y.drawArrays(y.TRIANGLES,G,L));e[0]=2*(z[2]+v[3])/u-1;e[1]=(z[3]+z[1])/C-1;
f[0]=v[3]*E/u;f[1]=D[3]*E/C;w&&(t.color=k[3],t.tickScale=f,t.dataAxis=d,t.screenOffset=e,y.drawArrays(y.TRIANGLES,B,w));e[0]=(z[2]+z[0])/u-1;e[1]=2*(z[3]+v[2])/C-1;f[0]=D[2]*E/u;f[1]=v[2]*E/C;L&&(t.color=k[2],t.tickScale=f,t.dataAxis=p,t.screenOffset=e,y.drawArrays(y.TRIANGLES,G,L))}}();b.update=function(){var g=[1,1,-1,-1,1,-1],n=[1,-1,1,1,-1,-1];return function(p){var d=p.ticks;p=p.bounds;for(var e=new Float32Array(18*(d[0].length+d[1].length)),f=0,k=[[],[]],t=0;2>t;++t)for(var v=k[t],w=d[t],y=
p[t],B=p[t+2],A=0;A<w.length;++A){var z=(w[A].x-y)/(B-y);v.push(z);for(var E=0;6>E;++E)e[f++]=z,e[f++]=g[E],e[f++]=n[E]}this.ticks=k;this.vbo.update(e)}}();b.dispose=function(){this.vbo.dispose();this.shader.dispose();this.tickShader.dispose()}},{"./shaders":314,"binary-search-bounds":96,"gl-buffer":259,"gl-shader":335}],313:[function(b,N,I){function r(a,h,g){this.plot=a;this.vbo=h;this.shader=g}N.exports=function(a){var h=a.gl,g=q(h,[-1,-1,-1,1,1,-1,1,1]);h=m(h,l.lineVert,l.lineFrag);return new r(a,
g,h)};var q=b("gl-buffer"),m=b("gl-shader"),l=b("./shaders");b=r.prototype;b.bind=function(){var a=this.shader;this.vbo.bind();this.shader.bind();a.attributes.coord.pointer();a.uniforms.screenBox=this.plot.screenBox};b.drawLine=function(){var a=[0,0],h=[0,0];return function(g,n,p,d,e,f){var k=this.plot,t=this.shader,v=k.gl;a[0]=g;a[1]=n;h[0]=p;h[1]=d;t.uniforms.start=a;t.uniforms.end=h;t.uniforms.width=e*k.pixelRatio;t.uniforms.color=f;v.drawArrays(v.TRIANGLE_STRIP,0,4)}}();b.dispose=function(){this.vbo.dispose();
this.shader.dispose()}},{"./shaders":314,"gl-buffer":259,"gl-shader":335}],314:[function(b,N,I){b=b("glslify");I=b(["precision lowp float;\n#define GLSLIFY 1\nuniform vec4 color;\nvoid main() {\n  gl_FragColor \x3d vec4(color.xyz * color.w, color.w);\n}\n"]);N.exports={lineVert:b(["precision mediump float;\n#define GLSLIFY 1\n\nattribute vec2 coord;\n\nuniform vec4 screenBox;\nuniform vec2 start, end;\nuniform float width;\n\nvec2 perp(vec2 v) {\n  return vec2(v.y, -v.x);\n}\n\nvec2 screen(vec2 v) {\n  return 2.0 * (v - screenBox.xy) / (screenBox.zw - screenBox.xy) - 1.0;\n}\n\nvoid main() {\n  vec2 delta \x3d normalize(perp(start - end));\n  vec2 offset \x3d mix(start, end, 0.5 * (coord.y+1.0));\n  gl_Position \x3d vec4(screen(offset + 0.5 * width * delta * coord.x), 0, 1);\n}\n"]),
lineFrag:I,textVert:b(["#define GLSLIFY 1\nattribute vec3 textCoordinate;\n\nuniform vec2 dataScale, dataShift, dataAxis, screenOffset, textScale;\nuniform float angle;\n\nvoid main() {\n  float dataOffset  \x3d textCoordinate.z;\n  vec2 glyphOffset  \x3d textCoordinate.xy;\n  mat2 glyphMatrix \x3d mat2(cos(angle), sin(angle), -sin(angle), cos(angle));\n  vec2 screenCoordinate \x3d dataAxis * (dataScale * dataOffset + dataShift) +\n    glyphMatrix * glyphOffset * textScale + screenOffset;\n  gl_Position \x3d vec4(screenCoordinate, 0, 1);\n}\n"]),
textFrag:I,gridVert:b(["precision mediump float;\n#define GLSLIFY 1\n\nattribute vec3 dataCoord;\n\nuniform vec2 dataAxis, dataShift, dataScale;\nuniform float lineWidth;\n\nvoid main() {\n  vec2 pos \x3d dataAxis * (dataScale * dataCoord.x + dataShift);\n  pos +\x3d 10.0 * dataCoord.y * vec2(dataAxis.y, -dataAxis.x) + dataCoord.z * lineWidth;\n  gl_Position \x3d vec4(pos, 0, 1);\n}\n"]),gridFrag:I,boxVert:b(["precision mediump float;\n#define GLSLIFY 1\n\nattribute vec2 coord;\n\nuniform vec4 screenBox;\nuniform vec2 lo, hi;\n\nvec2 screen(vec2 v) {\n  return 2.0 * (v - screenBox.xy) / (screenBox.zw - screenBox.xy) - 1.0;\n}\n\nvoid main() {\n  gl_Position \x3d vec4(screen(mix(lo, hi, coord)), 0, 1);\n}\n"]),
tickVert:b(["precision mediump float;\n#define GLSLIFY 1\n\nattribute vec3 dataCoord;\n\nuniform vec2 dataAxis, dataShift, dataScale, screenOffset, tickScale;\n\nvoid main() {\n  vec2 pos \x3d dataAxis * (dataScale * dataCoord.x + dataShift);\n  gl_Position \x3d vec4(pos + tickScale*dataCoord.yz + screenOffset, 0, 1);\n}\n"])}},{glslify:316}],315:[function(b,N,I){function r(g,n,p){this.plot=g;this.vbo=n;this.shader=p;this.tickOffset=[[],[]];this.tickX=[[],[]];this.labelOffset=[0,0];this.labelCount=
[0,0]}N.exports=function(g){var n=g.gl,p=q(n);n=m(n,h.textVert,h.textFrag);return new r(g,p,n)};var q=b("gl-buffer"),m=b("gl-shader"),l=b("text-cache"),a=b("binary-search-bounds"),h=b("./shaders");b=r.prototype;b.drawTicks=function(){var g=[0,0],n=[0,0],p=[0,0];return function(d){var e=this.plot,f=this.shader,k=this.tickX[d],t=this.tickOffset[d],v=e.gl,w=e.viewBox,y=e.dataBox,B=e.screenBox,A=e.pixelRatio,z=e.tickEnable,E=e.tickPad,C=e.tickColor,u=e.tickAngle,D=e.labelEnable,G=e.labelPad,J=e.labelColor;
e=e.labelAngle;var L=this.labelOffset[d],K=this.labelCount[d],H=a.lt(k,y[d]);k=a.le(k,y[d+2]);g[0]=g[1]=0;g[d]=1;n[d]=(w[2+d]+w[d])/(B[2+d]-B[d])-1;B=2/B[2+(d^1)]-B[d^1];n[d^1]=B*w[d^1]-1;z[d]&&(n[d^1]-=B*A*E[d],H<k&&t[k]>t[H]&&(f.uniforms.dataAxis=g,f.uniforms.screenOffset=n,f.uniforms.color=C[d],f.uniforms.angle=u[d],v.drawArrays(v.TRIANGLES,t[H],t[k]-t[H])));D[d]&&K&&(n[d^1]-=B*A*G[d],f.uniforms.dataAxis=p,f.uniforms.screenOffset=n,f.uniforms.color=J[d],f.uniforms.angle=e[d],v.drawArrays(v.TRIANGLES,
L,K));n[d^1]=B*w[2+(d^1)]-1;z[d+2]&&(n[d^1]+=B*A*E[d+2],H<k&&t[k]>t[H]&&(f.uniforms.dataAxis=g,f.uniforms.screenOffset=n,f.uniforms.color=C[d+2],f.uniforms.angle=u[d+2],v.drawArrays(v.TRIANGLES,t[H],t[k]-t[H])));D[d+2]&&K&&(n[d^1]+=B*A*G[d+2],f.uniforms.dataAxis=p,f.uniforms.screenOffset=n,f.uniforms.color=J[d+2],f.uniforms.angle=e[d+2],v.drawArrays(v.TRIANGLES,L,K))}}();b.drawTitle=function(){var g=[0,0],n=[0,0];return function(){var p=this.plot,d=this.shader,e=p.gl,f=p.screenBox,k=p.titleCenter,
t=p.titleAngle,v=p.titleColor;p=p.pixelRatio;if(this.titleCount){for(var w=0;2>w;++w)n[w]=2*(k[w]*p-f[w])/(f[2+w]-f[w])-1;d.bind();d.uniforms.dataAxis=g;d.uniforms.screenOffset=n;d.uniforms.angle=t;d.uniforms.color=v;e.drawArrays(e.TRIANGLES,this.titleOffset,this.titleCount)}}}();b.bind=function(){var g=[0,0],n=[0,0],p=[0,0];return function(){var d=this.plot,e=this.shader,f=d._tickBounds,k=d.dataBox,t=d.screenBox,v=d.viewBox;e.bind();for(var w=0;2>w;++w){var y=f[w],B=.5*(k[w+2]+k[w]),A=k[w+2]-k[w],
z=v[w+2]-v[w],E=t[w+2]-t[w];n[w]=2*(f[w+2]-y)/A*z/E;g[w]=2*(y-B)/A*z/E}p[1]=2*d.pixelRatio/(t[3]-t[1]);p[0]=p[1]*(t[3]-t[1])/(t[2]-t[0]);e.uniforms.dataScale=n;e.uniforms.dataShift=g;e.uniforms.textScale=p;this.vbo.bind();e.attributes.textCoordinate.pointer()}}();b.update=function(g){var n=[],p=g.ticks,d=g.bounds,e,f;for(f=0;2>f;++f){var k=[Math.floor(n.length/3)],t=[-Infinity],v=p[f];for(e=0;e<v.length;++e){var w=v[e];var y=w.x;var B=w.text;var A=w.font||"sans-serif";w=w.fontSize||12;for(var z=1/
(d[f+2]-d[f]),E=d[f],C=B.split("\n"),u=0;u<C.length;u++){var D=l(A,C[u]).data;for(B=0;B<D.length;B+=2)n.push(D[B]*w,-D[B+1]*w-u*w*1.2,(y-E)*z)}k.push(Math.floor(n.length/3));t.push(y)}this.tickOffset[f]=k;this.tickX[f]=t}for(f=0;2>f;++f){this.labelOffset[f]=Math.floor(n.length/3);D=l(g.labelFont[f],g.labels[f],{textAlign:"center"}).data;w=g.labelSize[f];for(e=0;e<D.length;e+=2)n.push(D[e]*w,-D[e+1]*w,0);this.labelCount[f]=Math.floor(n.length/3)-this.labelOffset[f]}this.titleOffset=Math.floor(n.length/
3);D=l(g.titleFont,g.title).data;w=g.titleSize;for(e=0;e<D.length;e+=2)n.push(D[e]*w,-D[e+1]*w,0);this.titleCount=Math.floor(n.length/3)-this.titleOffset;this.vbo.update(n)};b.dispose=function(){this.vbo.dispose();this.shader.dispose()}},{"./shaders":314,"binary-search-bounds":96,"gl-buffer":259,"gl-shader":335,"text-cache":575}],316:[function(b,N,I){arguments[4][257][0].apply(I,arguments)},{dup:257}],317:[function(b,N,I){function r(p,d){this.gl=p;this.pickBuffer=d;this.screenBox=[0,0,p.drawingBufferWidth,
p.drawingBufferHeight];this.viewBox=[0,0,0,0];this.dataBox=[-10,-10,10,10];this.gridLineEnable=[!0,!0];this.gridLineWidth=[1,1];this.gridLineColor=[[0,0,0,1],[0,0,0,1]];this.pixelRatio=1;this.tickMarkLength=[0,0,0,0];this.tickMarkWidth=[0,0,0,0];this.tickMarkColor=[[0,0,0,1],[0,0,0,1],[0,0,0,1],[0,0,0,1]];this.tickPad=[15,15,15,15];this.tickAngle=[0,0,0,0];this.tickEnable=[!0,!0,!0,!0];this.tickColor=[[0,0,0,1],[0,0,0,1],[0,0,0,1],[0,0,0,1]];this.labelPad=[15,15,15,15];this.labelAngle=[0,Math.PI/
2,0,3*Math.PI/2];this.labelEnable=[!0,!0,!0,!0];this.labelColor=[[0,0,0,1],[0,0,0,1],[0,0,0,1],[0,0,0,1]];this.titleCenter=[0,0];this.titleEnable=!0;this.titleAngle=0;this.titleColor=[0,0,0,1];this.borderColor=[0,0,0,0];this.backgroundColor=[0,0,0,0];this.zeroLineEnable=[!0,!0];this.zeroLineWidth=[4,4];this.zeroLineColor=[[0,0,0,1],[0,0,0,1]];this.borderLineEnable=[!0,!0,!0,!0];this.borderLineWidth=[2,2,2,2];this.borderLineColor=[[0,0,0,1],[0,0,0,1],[0,0,0,1],[0,0,0,1]];this.box=this.line=this.text=
this.grid=null;this.objects=[];this.overlays=[];this._tickBounds=[Infinity,Infinity,-Infinity,-Infinity];this.pickDirty=this.dirty=this.static=!1;this.pickDelay=120;this.pickRadius=10;this._pickTimeout=null;this._drawPick=this.drawPick.bind(this);this._depthCounter=0}function q(p){p=p.slice();for(var d=0;d<p.length;++d)p[d]=p[d].slice();return p}function m(p,d){return p.x-d.x}N.exports=function(p){var d=p.gl,e=l(d,[d.drawingBufferWidth,d.drawingBufferHeight]);d=new r(d,e);d.grid=a(d);d.text=h(d);
d.line=g(d);d.box=n(d);d.update(p);return d};var l=b("gl-select-static"),a=b("./lib/grid"),h=b("./lib/text"),g=b("./lib/line"),n=b("./lib/box");b=r.prototype;b.setDirty=function(){this.dirty=this.pickDirty=!0};b.setOverlayDirty=function(){this.dirty=!0};b.nextDepthValue=function(){return this._depthCounter++/65536};b.draw=function(){return function(){var p=this.gl,d=this.screenBox,e=this.viewBox,f=this.dataBox,k=this.pixelRatio,t=this.grid,v=this.line,w=this.text,y=this.objects;this._depthCounter=
0;this.pickDirty&&(this._pickTimeout&&clearTimeout(this._pickTimeout),this.pickDirty=!1,this._pickTimeout=setTimeout(this._drawPick,this.pickDelay));if(this.dirty){this.dirty=!1;p.bindFramebuffer(p.FRAMEBUFFER,null);p.enable(p.SCISSOR_TEST);p.disable(p.DEPTH_TEST);p.depthFunc(p.LESS);p.depthMask(!1);p.enable(p.BLEND);p.blendEquation(p.FUNC_ADD,p.FUNC_ADD);p.blendFunc(p.ONE,p.ONE_MINUS_SRC_ALPHA);if(this.borderColor){p.scissor(d[0],d[1],d[2]-d[0],d[3]-d[1]);var B=this.borderColor;p.clearColor(B[0]*
B[3],B[1]*B[3],B[2]*B[3],B[3]);p.clear(p.COLOR_BUFFER_BIT|p.DEPTH_BUFFER_BIT)}p.scissor(e[0],e[1],e[2]-e[0],e[3]-e[1]);p.viewport(e[0],e[1],e[2]-e[0],e[3]-e[1]);B=this.backgroundColor;p.clearColor(B[0]*B[3],B[1]*B[3],B[2]*B[3],B[3]);p.clear(p.COLOR_BUFFER_BIT);t.draw();B=this.zeroLineEnable;var A=this.zeroLineColor,z=this.zeroLineWidth;if(B[0]||B[1])for(v.bind(),t=0;2>t;++t)if(B[t]&&0>=f[t]&&0<=f[t+2]){var E=d[t]-f[t]*(d[t+2]-d[t])/(f[t+2]-f[t]);0===t?v.drawLine(E,d[1],E,d[3],z[t],A[t]):v.drawLine(d[0],
E,d[2],E,z[t],A[t])}for(t=0;t<y.length;++t)y[t].draw();p.viewport(d[0],d[1],d[2]-d[0],d[3]-d[1]);p.scissor(d[0],d[1],d[2]-d[0],d[3]-d[1]);this.grid.drawTickMarks();v.bind();d=this.borderLineEnable;f=this.borderLineWidth;y=this.borderLineColor;d[1]&&v.drawLine(e[0],e[1]-.5*f[1]*k,e[0],e[3]+.5*f[3]*k,f[1],y[1]);d[0]&&v.drawLine(e[0]-.5*f[0]*k,e[1],e[2]+.5*f[2]*k,e[1],f[0],y[0]);d[3]&&v.drawLine(e[2],e[1]-.5*f[1]*k,e[2],e[3]+.5*f[3]*k,f[3],y[3]);d[2]&&v.drawLine(e[0]-.5*f[0]*k,e[3],e[2]+.5*f[2]*k,e[3],
f[2],y[2]);w.bind();for(t=0;2>t;++t)w.drawTicks(t);this.titleEnable&&w.drawTitle();e=this.overlays;for(t=0;t<e.length;++t)e[t].draw();p.disable(p.SCISSOR_TEST);p.disable(p.BLEND);p.depthMask(!0)}}}();b.drawPick=function(){return function(){if(!this.static){var p=this.pickBuffer;this._pickTimeout=null;p.begin();for(var d=1,e=this.objects,f=0;f<e.length;++f)d=e[f].drawPick(d);p.end()}}}();b.pick=function(){return function(p,d){if(!this.static){var e=this.pixelRatio,f=this.pickPixelRatio,k=this.viewBox;
p=Math.round((p-k[0]/e)*f)|0;d=Math.round((d-k[1]/e)*f)|0;e=this.pickBuffer.query(p,d,this.pickRadius);if(!e)return null;e=e.id+(e.value[0]<<8)+(e.value[1]<<16)+(e.value[2]<<24);f=this.objects;for(k=0;k<f.length;++k){var t=f[k].pick(p,d,e);if(t)return t}return null}}}();b.setScreenBox=function(p){var d=this.screenBox,e=this.pixelRatio;d[0]=Math.round(p[0]*e)|0;d[1]=Math.round(p[1]*e)|0;d[2]=Math.round(p[2]*e)|0;d[3]=Math.round(p[3]*e)|0;this.setDirty()};b.setDataBox=function(p){var d=this.dataBox;
if(d[0]!==p[0]||d[1]!==p[1]||d[2]!==p[2]||d[3]!==p[3])d[0]=p[0],d[1]=p[1],d[2]=p[2],d[3]=p[3],this.setDirty()};b.setViewBox=function(p){var d=this.pixelRatio,e=this.viewBox;e[0]=Math.round(p[0]*d)|0;e[1]=Math.round(p[1]*d)|0;e[2]=Math.round(p[2]*d)|0;e[3]=Math.round(p[3]*d)|0;d=this.pickPixelRatio;this.pickBuffer.shape=[Math.round((p[2]-p[0])*d)|0,Math.round((p[3]-p[1])*d)|0];this.setDirty()};b.update=function(p){p=p||{};var d=this.gl,e=this.pixelRatio=p.pixelRatio||1;this.pickPixelRatio=Math.max(e,
1);this.setScreenBox(p.screenBox||[0,0,d.drawingBufferWidth/e,d.drawingBufferHeight/e]);this.setViewBox(p.viewBox||[.125*(this.screenBox[2]-this.screenBox[0])/e,.125*(this.screenBox[3]-this.screenBox[1])/e,.875*(this.screenBox[2]-this.screenBox[0])/e,.875*(this.screenBox[3]-this.screenBox[1])/e]);d=this.viewBox;var f=(d[2]-d[0])/(d[3]-d[1]);this.setDataBox(p.dataBox||[-10,-10/f,10,10/f]);this.borderColor=!1!==p.borderColor?(p.borderColor||[0,0,0,0]).slice():!1;this.backgroundColor=(p.backgroundColor||
[0,0,0,0]).slice();this.gridLineEnable=(p.gridLineEnable||[!0,!0]).slice();this.gridLineWidth=(p.gridLineWidth||[1,1]).slice();this.gridLineColor=q(p.gridLineColor||[[.5,.5,.5,1],[.5,.5,.5,1]]);this.zeroLineEnable=(p.zeroLineEnable||[!0,!0]).slice();this.zeroLineWidth=(p.zeroLineWidth||[4,4]).slice();this.zeroLineColor=q(p.zeroLineColor||[[0,0,0,1],[0,0,0,1]]);this.tickMarkLength=(p.tickMarkLength||[0,0,0,0]).slice();this.tickMarkWidth=(p.tickMarkWidth||[0,0,0,0]).slice();this.tickMarkColor=q(p.tickMarkColor||
[[0,0,0,1],[0,0,0,1],[0,0,0,1],[0,0,0,1]]);this.titleCenter=(p.titleCenter||[.5*(d[0]+d[2])/e,(d[3]+120)/e]).slice();this.titleEnable=!("titleEnable"in p)||!!p.titleEnable;this.titleAngle=p.titleAngle||0;this.titleColor=(p.titleColor||[0,0,0,1]).slice();this.labelPad=(p.labelPad||[15,15,15,15]).slice();this.labelAngle=(p.labelAngle||[0,Math.PI/2,0,3*Math.PI/2]).slice();this.labelEnable=(p.labelEnable||[!0,!0,!0,!0]).slice();this.labelColor=q(p.labelColor||[[0,0,0,1],[0,0,0,1],[0,0,0,1],[0,0,0,1]]);
this.tickPad=(p.tickPad||[15,15,15,15]).slice();this.tickAngle=(p.tickAngle||[0,0,0,0]).slice();this.tickEnable=(p.tickEnable||[!0,!0,!0,!0]).slice();this.tickColor=q(p.tickColor||[[0,0,0,1],[0,0,0,1],[0,0,0,1],[0,0,0,1]]);this.borderLineEnable=(p.borderLineEnable||[!0,!0,!0,!0]).slice();this.borderLineWidth=(p.borderLineWidth||[2,2,2,2]).slice();this.borderLineColor=q(p.borderLineColor||[[0,0,0,1],[0,0,0,1],[0,0,0,1],[0,0,0,1]]);e=p.ticks||[[],[]];d=this._tickBounds;d[0]=d[1]=Infinity;d[2]=d[3]=
-Infinity;for(f=0;2>f;++f){var k=e[f].slice(0);0!==k.length&&(k.sort(m),d[f]=Math.min(d[f],k[0].x),d[f+2]=Math.max(d[f+2],k[k.length-1].x))}this.grid.update({bounds:d,ticks:e});this.text.update({bounds:d,ticks:e,labels:p.labels||["x","y"],labelSize:p.labelSize||[12,12],labelFont:p.labelFont||["sans-serif","sans-serif"],title:p.title||"",titleSize:p.titleSize||18,titleFont:p.titleFont||"sans-serif"});this.static=!!p.static;this.setDirty()};b.dispose=function(){this.box.dispose();this.grid.dispose();
this.text.dispose();this.line.dispose();for(var p=this.objects.length-1;0<=p;--p)this.objects[p].dispose();this.objects.length=0;for(p=this.overlays.length-1;0<=p;--p)this.overlays[p].dispose();this.overlays.length=0;this.gl=null};b.addObject=function(p){0>this.objects.indexOf(p)&&(this.objects.push(p),this.setDirty())};b.removeObject=function(p){for(var d=this.objects,e=0;e<d.length;++e)if(d[e]===p){d.splice(e,1);this.setDirty();break}};b.addOverlay=function(p){0>this.overlays.indexOf(p)&&(this.overlays.push(p),
this.setOverlayDirty())};b.removeOverlay=function(p){for(var d=this.overlays,e=0;e<d.length;++e)if(d[e]===p){d.splice(e,1);this.setOverlayDirty();break}}},{"./lib/box":311,"./lib/grid":312,"./lib/line":313,"./lib/text":315,"gl-select-static":334}],318:[function(b,N,I){N.exports=function(g,n){g=g||document.body;n=n||{};var p=[.01,Infinity];"distanceLimits"in n&&(p[0]=n.distanceLimits[0],p[1]=n.distanceLimits[1]);"zoomMin"in n&&(p[0]=n.zoomMin);"zoomMax"in n&&(p[1]=n.zoomMax);var d=q({center:n.center||
[0,0,0],up:n.up||[0,1,0],eye:n.eye||[0,0,10],mode:n.mode||"orbit",distanceLimits:p}),e=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],f=0,k=g.clientWidth,t=g.clientHeight,v={keyBindingMode:"rotate",enableWheel:!0,view:d,element:g,delay:n.delay||16,rotateSpeed:n.rotateSpeed||1,zoomSpeed:n.zoomSpeed||1,translateSpeed:n.translateSpeed||1,flipX:!!n.flipX,flipY:!!n.flipY,modes:d.modes,_ortho:n._ortho||n.projection&&"orthographic"===n.projection.type||!1,tick:function(){var w=r(),y=this.delay,B=w-2*y;d.idle(w-y);d.recalcMatrix(B);
d.flush(w-(100+2*y));w=!0;y=d.computedMatrix;for(B=0;16>B;++B)w=w&&e[B]===y[B],e[B]=y[B];y=g.clientWidth===k&&g.clientHeight===t;k=g.clientWidth;t=g.clientHeight;if(w)return!y;f=Math.exp(d.computedRadius[0]);return!0},lookAt:function(w,y,B){d.lookAt(d.lastT(),w,y,B)},rotate:function(w,y,B){d.rotate(d.lastT(),w,y,B)},pan:function(w,y,B){d.pan(d.lastT(),w,y,B)},translate:function(w,y,B){d.translate(d.lastT(),w,y,B)}};Object.defineProperties(v,{matrix:{get:function(){return d.computedMatrix},set:function(w){d.setMatrix(d.lastT(),
w);return d.computedMatrix},enumerable:!0},mode:{get:function(){return d.getMode()},set:function(w){var y=d.computedUp.slice(),B=d.computedEye.slice(),A=d.computedCenter.slice();d.setMode(w);"turntable"===w&&(w=r(),d._active.lookAt(w,B,A,y),d._active.lookAt(w+500,B,A,[0,0,1]),d._active.flush(w));return d.getMode()},enumerable:!0},center:{get:function(){return d.computedCenter},set:function(w){d.lookAt(d.lastT(),null,w);return d.computedCenter},enumerable:!0},eye:{get:function(){return d.computedEye},
set:function(w){d.lookAt(d.lastT(),w);return d.computedEye},enumerable:!0},up:{get:function(){return d.computedUp},set:function(w){d.lookAt(d.lastT(),null,null,w);return d.computedUp},enumerable:!0},distance:{get:function(){return f},set:function(w){d.setDistance(d.lastT(),w);return w},enumerable:!0},distanceLimits:{get:function(){return d.getDistanceLimits(p)},set:function(w){d.setDistanceLimits(w);return w},enumerable:!0}});g.addEventListener("contextmenu",function(w){w.preventDefault();return!1});
v._lastX=-1;v._lastY=-1;v._lastMods={shift:!1,control:!1,alt:!1,meta:!1};v.enableMouseListeners=function(){function w(y,B,A,z){var E=v.keyBindingMode;if(!1!==E){var C="rotate"===E,u="pan"===E;E="zoom"===E;var D=!!z.control,G=!!z.alt,J=!!z.shift,L=!!(y&1),K=!!(y&2);y=!!(y&4);var H=1/g.clientHeight,Q=H*(B-v._lastX),M=H*(A-v._lastY),P=v.flipX?1:-1,T=v.flipY?1:-1,O=Math.PI*v.rotateSpeed;H=r();-1!==v._lastX&&-1!==v._lastY&&((C&&L&&!D&&!G&&!J||L&&!D&&!G&&J)&&d.rotate(H,P*O*Q,-T*O*M,0),(u&&L&&!D&&!G&&!J||
K||L&&D&&!G&&!J)&&d.pan(H,-v.translateSpeed*Q*f,v.translateSpeed*M*f,0),E&&L&&!D&&!G&&!J||y||L&&!D&&G&&!J)&&(C=-v.zoomSpeed*M/window.innerHeight*(H-d.lastT())*100,d.pan(H,0,0,f*(Math.exp(C)-1)));v._lastX=B;v._lastY=A;v._lastMods=z;return!0}}v.mouseListener=m(g,w);g.addEventListener("touchstart",function(y){y=a(y.changedTouches[0],g);w(0,y[0],y[1],v._lastMods);w(1,y[0],y[1],v._lastMods)},h?{passive:!0}:!1);g.addEventListener("touchmove",function(y){var B=a(y.changedTouches[0],g);w(1,B[0],B[1],v._lastMods);
y.preventDefault()},h?{passive:!1}:!1);g.addEventListener("touchend",function(y){w(0,v._lastX,v._lastY,v._lastMods)},h?{passive:!0}:!1);v.wheelListener=l(g,function(y,B){if(!1!==v.keyBindingMode&&v.enableWheel){var A=v.flipX?1:-1,z=v.flipY?1:-1,E=r();Math.abs(y)>Math.abs(B)?d.rotate(E,0,0,-y*A*Math.PI*v.rotateSpeed/window.innerWidth):v._ortho||(y=-v.zoomSpeed*z*B/window.innerHeight*(E-d.lastT())/20,d.pan(E,0,0,f*(Math.exp(y)-1)))}},!0)};v.enableMouseListeners();return v};var r=b("right-now"),q=b("3d-view"),
m=b("mouse-change"),l=b("mouse-wheel"),a=b("mouse-event-offset"),h=b("has-passive-events")},{"3d-view":54,"has-passive-events":441,"mouse-change":483,"mouse-event-offset":484,"mouse-wheel":486,"right-now":542}],319:[function(b,N,I){I=b("glslify");var r=b("gl-shader"),q=I(["precision mediump float;\n#define GLSLIFY 1\nattribute vec2 position;\nvarying vec2 uv;\nvoid main() {\n  uv \x3d position;\n  gl_Position \x3d vec4(position, 0, 1);\n}"]),m=I(["precision mediump float;\n#define GLSLIFY 1\n\nuniform sampler2D accumBuffer;\nvarying vec2 uv;\n\nvoid main() {\n  vec4 accum \x3d texture2D(accumBuffer, 0.5 * (uv + 1.0));\n  gl_FragColor \x3d min(vec4(1,1,1,1), accum);\n}"]);
N.exports=function(l){return r(l,q,m,null,[{name:"position",type:"vec2"}])}},{"gl-shader":335,glslify:320}],320:[function(b,N,I){arguments[4][257][0].apply(I,arguments)},{dup:257}],321:[function(b,N,I){function r(){this.mouse=[-1,-1];this.screen=null;this.distance=Infinity;this.data=this.object=this.dataPosition=this.dataCoordinate=this.index=null}function q(w,y){var B=null;try{(B=w.getContext("webgl",y))||(B=w.getContext("experimental-webgl",y))}catch(A){return null}return B}function m(w){return"boolean"===
typeof w?w:!0}var l=b("./camera.js"),a=b("gl-axes3d"),h=b("gl-axes3d/properties"),g=b("gl-spikes3d"),n=b("gl-select-static"),p=b("gl-fbo"),d=b("a-big-triangle"),e=b("mouse-change"),f=b("gl-mat4/perspective"),k=b("gl-mat4/ortho"),t=b("./lib/shader"),v=b("is-mobile")({tablet:!0,featureDetect:!0});N.exports={createScene:function(w){function y(){if(!ja._stopped&&ja.autoResize){var sa=C.parentNode;if(sa&&sa!==document.body){var ma=sa.clientWidth;sa=sa.clientHeight}else ma=window.innerWidth,sa=window.innerHeight;
var qa=Math.ceil(ma*ja.pixelRatio)|0,pa=Math.ceil(sa*ja.pixelRatio)|0;if(qa!==C.width||pa!==C.height)C.width=qa,C.height=pa,qa=C.style,qa.position=qa.position||"absolute",qa.left="0px",qa.top="0px",qa.width=ma+"px",qa.height=sa+"px",X=!0}}function B(){for(var sa=T.length,ma=S.length,qa=0;qa<ma;++qa)U[qa]=0;qa=0;a:for(;qa<sa;++qa){var pa=T[qa],na=pa.pickSlots;if(na){for(var ka=0;ka<ma;++ka)if(255>U[ka]+na){O[qa]=ka;pa.setPickBase(U[ka]+1);U[ka]+=na;continue a}ka=n(u,ia);O[qa]=ma;S.push(ka);U.push(na);
pa.setPickBase(1);ma+=1}else O[qa]=-1}for(;0<ma&&0===U[ma-1];)U.pop(),S.pop().dispose()}function A(){if(ja.contextLost)return!0;if(u.isContextLost()&&(ja.contextLost=!0,ja.mouseListener.enabled=!1,ja.selection.object=null,ja.oncontextloss))ja.oncontextloss()}function z(){if(!A()){y();var sa=ja.camera.tick();ca.view=ja.camera.matrix;X=X||sa;ba=ba||sa;M.pixelRatio=ja.pixelRatio;P.pixelRatio=ja.pixelRatio;sa=T.length;var ma=da[0],qa=da[1];ma[0]=ma[1]=ma[2]=Infinity;qa[0]=qa[1]=qa[2]=-Infinity;for(var pa=
0;pa<sa;++pa){var na=T[pa];na.pixelRatio=ja.pixelRatio;na.axes=ja.axes;X=X||!!na.dirty;ba=ba||!!na.dirty;if(na=na.bounds){var ka=na[0],ua=na[1];for(na=0;3>na;++na)ma[na]=Math.min(ma[na],ka[na]),qa[na]=Math.max(qa[na],ua[na])}}ka=ja.bounds;if(ja.autoBounds)for(na=0;3>na;++na)qa[na]<ma[na]?(ma[na]=-1,qa[na]=1):(ma[na]===qa[na]&&(--ma[na],qa[na]+=1),pa=.05*(qa[na]-ma[na]),ma[na]-=pa,qa[na]+=pa),ka[0][na]=ma[na],ka[1][na]=qa[na];ma=!1;for(na=0;3>na;++na)ma=ma||oa[0][na]!==ka[0][na]||oa[1][na]!==ka[1][na],
oa[0][na]=ka[0][na],oa[1][na]=ka[1][na];ba=ba||ma;if(X=X||ma){if(ma){ma=[0,0,0];for(pa=0;3>pa;++pa)qa=pa,na=(ka[1][pa]-ka[0][pa])/10,ua=Math.round(Math.log(Math.abs(na))/Math.log(10)),0>ua?(ua=Math.round(Math.pow(10,-ua)),na=Math.ceil(na*ua)/ua):0<ua?(ua=Math.round(Math.pow(10,ua)),na=Math.ceil(na/ua)*ua):na=Math.ceil(na),ma[qa]=na;M.autoTicks?M.update({bounds:ka,tickSpacing:ma}):M.update({bounds:ka})}ma=u.drawingBufferWidth;qa=u.drawingBufferHeight;ia[0]=ma;ia[1]=qa;la[0]=Math.max(ma/ja.pixelRatio,
1)|0;la[1]=Math.max(qa/ja.pixelRatio,1)|0;pa=ja;na=pa.bounds;var va=pa.cameraParams,Ca=va.projection;ua=va.model;var Ma=pa.zNear,Ua=pa.zFar,eb=pa.fovy,fb=pa.gl.drawingBufferWidth/pa.gl.drawingBufferHeight;K?(k(Ca,-fb,fb,-1,1,Ma,Ua),va._ortho=!0):(f(Ca,eb,fb,Ma,Ua),va._ortho=!1);for(va=0;16>va;++va)ua[va]=0;ua[15]=1;for(va=Ca=0;3>va;++va)Ca=Math.max(Ca,na[1][va]-na[0][va]);for(va=0;3>va;++va)ua[5*va]=pa.autoScale?pa.aspect[va]/(na[1][va]-na[0][va]):1/Ca,pa.autoCenter&&(ua[12+va]=.5*-ua[5*va]*(na[0][va]+
na[1][va]));for(pa=0;pa<sa;++pa)na=T[pa],na.axesBounds=ka,ja.clipToBounds&&(na.clipBounds=ka);G.object&&(P.position=ja.snapToData?G.dataCoordinate:G.dataPosition,P.bounds=ka);if(ba&&(ba=!1,!A()))for(u.colorMask(!0,!0,!0,!0),u.depthMask(!0),u.disable(u.BLEND),u.enable(u.DEPTH_TEST),u.depthFunc(u.LEQUAL),ka=T.length,pa=S.length,na=0;na<pa;++na){ua=S[na];ua.shape=la;ua.begin();for(va=0;va<ka;++va)O[va]===na&&(Ca=T[va],Ca.drawPick&&(Ca.pixelRatio=1,Ca.drawPick(ca)));ua.end()}ja.axesPixels=h(ja.axes,ca,
ma,qa);if(ja.onrender)ja.onrender();u.bindFramebuffer(u.FRAMEBUFFER,null);u.viewport(0,0,ma,qa);ja.clearRGBA();u.depthMask(!0);u.colorMask(!0,!0,!0,!0);u.enable(u.DEPTH_TEST);u.depthFunc(u.LEQUAL);u.disable(u.BLEND);u.disable(u.CULL_FACE);ka=!1;M.enable&&(ka=ka||M.isTransparent(),M.draw(ca));P.axes=M;G.object&&P.draw(ca);u.disable(u.CULL_FACE);for(pa=0;pa<sa;++pa)na=T[pa],na.axes=M,na.pixelRatio=ja.pixelRatio,na.isOpaque&&na.isOpaque()&&na.draw(ca),na.isTransparent&&na.isTransparent()&&(ka=!0);if(ka){J.shape=
ia;J.bind();u.clear(u.DEPTH_BUFFER_BIT);u.colorMask(!1,!1,!1,!1);u.depthMask(!0);u.depthFunc(u.LESS);M.enable&&M.isTransparent()&&M.drawTransparent(ca);for(pa=0;pa<sa;++pa)na=T[pa],na.isOpaque&&na.isOpaque()&&na.draw(ca);u.enable(u.BLEND);u.blendEquation(u.FUNC_ADD);u.blendFunc(u.ONE,u.ONE_MINUS_SRC_ALPHA);u.colorMask(!0,!0,!0,!0);u.depthMask(!1);u.clearColor(0,0,0,0);u.clear(u.COLOR_BUFFER_BIT);M.isTransparent()&&M.drawTransparent(ca);for(pa=0;pa<sa;++pa)na=T[pa],na.isTransparent&&na.isTransparent()&&
na.drawTransparent(ca);u.bindFramebuffer(u.FRAMEBUFFER,null);u.blendFunc(u.ONE,u.ONE_MINUS_SRC_ALPHA);u.disable(u.DEPTH_TEST);L.bind();J.color[0].bind(0);L.uniforms.accumBuffer=0;d(u);u.disable(u.BLEND)}X=!1;for(pa=0;pa<sa;++pa)T[pa].dirty=!1}}}function E(){ja._stopped||ja.contextLost||(z(),requestAnimationFrame(E))}w=w||{};w.camera=w.camera||{};var C=w.canvas;C||(C=document.createElement("canvas"),w.container?w.container.appendChild(C):document.body.appendChild(C));var u=w.gl;u||(w.glOptions&&(v=
!!w.glOptions.preserveDrawingBuffer),u=q(C,w.glOptions||{premultipliedAlpha:!0,antialias:!0,preserveDrawingBuffer:v}));if(!u)throw Error("webgl not supported");var D=w.bounds||[[-10,-10,-10],[10,10,10]],G=new r,J=p(u,u.drawingBufferWidth,u.drawingBufferHeight,{preferFloat:!v}),L=t(u),K=w.cameraObject&&!0===w.cameraObject._ortho||w.camera.projection&&"orthographic"===w.camera.projection.type||!1,H={eye:w.camera.eye||[2,0,0],center:w.camera.center||[0,0,0],up:w.camera.up||[0,1,0],zoomMin:w.camera.zoomMax||
.1,zoomMax:w.camera.zoomMin||100,mode:w.camera.mode||"turntable",_ortho:K},Q=w.axes||{},M=a(u,Q);M.enable=!Q.disable;var P=g(u,w.spikes||{}),T=[],O=[],U=[],S=[],X=!0,ba=!0,ca={view:null,projection:Array(16),model:Array(16),_ortho:!1};ba=!0;var ia=[u.drawingBufferWidth,u.drawingBufferHeight];H=w.cameraObject||l(C,H);var ja={gl:u,contextLost:!1,pixelRatio:w.pixelRatio||1,canvas:C,selection:G,camera:H,axes:M,axesPixels:null,spikes:P,bounds:D,objects:T,shape:ia,aspect:w.aspectRatio||[1,1,1],pickRadius:w.pickRadius||
10,zNear:w.zNear||.01,zFar:w.zFar||1E3,fovy:w.fovy||Math.PI/4,clearColor:w.clearColor||[0,0,0,0],autoResize:m(w.autoResize),autoBounds:m(w.autoBounds),autoScale:!!w.autoScale,autoCenter:m(w.autoCenter),clipToBounds:m(w.clipToBounds),snapToData:!!w.snapToData,onselect:w.onselect||null,onrender:w.onrender||null,onclick:w.onclick||null,cameraParams:ca,oncontextloss:null,mouseListener:null,_stopped:!1,getAspectratio:function(){return{x:this.aspect[0],y:this.aspect[1],z:this.aspect[2]}},setAspectratio:function(sa){this.aspect[0]=
sa.x;this.aspect[1]=sa.y;this.aspect[2]=sa.z;ba=!0},setBounds:function(sa,ma){this.bounds[0][sa]=ma.min;this.bounds[1][sa]=ma.max},setClearColor:function(sa){this.clearColor=sa},clearRGBA:function(){this.gl.clearColor(this.clearColor[0],this.clearColor[1],this.clearColor[2],this.clearColor[3]);this.gl.clear(this.gl.COLOR_BUFFER_BIT|this.gl.DEPTH_BUFFER_BIT)}},la=[u.drawingBufferWidth/ja.pixelRatio|0,u.drawingBufferHeight/ja.pixelRatio|0];ja.autoResize&&y();window.addEventListener("resize",y);ja.update=
function(sa){ja._stopped||(ba=X=!0)};ja.add=function(sa){ja._stopped||(sa.axes=M,T.push(sa),O.push(-1),ba=X=!0,B())};ja.remove=function(sa){ja._stopped||(sa=T.indexOf(sa),0>sa||(T.splice(sa,1),O.pop(),ba=X=!0,B()))};ja.dispose=function(){if(!ja._stopped&&(ja._stopped=!0,window.removeEventListener("resize",y),C.removeEventListener("webglcontextlost",A),ja.mouseListener.enabled=!1,!ja.contextLost)){M.dispose();P.dispose();for(var sa=0;sa<T.length;++sa)T[sa].dispose();J.dispose();for(sa=0;sa<S.length;++sa)S[sa].dispose();
L.dispose();P=M=u=null;T=[]}};ja._mouseRotating=!1;ja._prevButtons=0;ja.enableMouseListeners=function(){ja.mouseListener=e(C,function(sa,ma,qa){if(!ja._stopped){var pa=S.length,na=T.length,ka=G.object;G.distance=Infinity;G.mouse[0]=ma;G.mouse[1]=qa;G.object=null;G.screen=null;G.dataCoordinate=G.dataPosition=null;var ua=!1;if(sa&&ja._prevButtons)ja._mouseRotating=!0;else{ja._mouseRotating&&(ba=!0);ja._mouseRotating=!1;for(var va=0;va<pa;++va){var Ca=S[va].query(ma,la[1]-qa-1,ja.pickRadius);if(Ca&&
!(Ca.distance>G.distance))for(var Ma=0;Ma<na;++Ma){var Ua=T[Ma];if(O[Ma]===va){var eb=Ua.pick(Ca);eb&&(G.buttons=sa,G.screen=Ca.coord,G.distance=Ca.distance,G.object=Ua,G.index=eb.distance,G.dataPosition=eb.position,G.dataCoordinate=eb.dataCoordinate,G.data=eb,ua=!0)}}}}ka&&ka!==G.object&&(ka.highlight&&ka.highlight(null),X=!0);G.object&&(G.object.highlight&&G.object.highlight(G.data),X=!0);if((ua=ua||G.object!==ka)&&ja.onselect)ja.onselect(G);if(sa&1&&!(ja._prevButtons&1)&&ja.onclick)ja.onclick(G);
ja._prevButtons=sa}})};C.addEventListener("webglcontextlost",A);var da=[[Infinity,Infinity,Infinity],[-Infinity,-Infinity,-Infinity]],oa=[da[0].slice(),da[1].slice()];ja.enableMouseListeners();E();ja.redraw=function(){ja._stopped||(X=!0,z())};return ja},createCamera:l}},{"./camera.js":318,"./lib/shader":319,"a-big-triangle":64,"gl-axes3d":250,"gl-axes3d/properties":258,"gl-fbo":269,"gl-mat4/ortho":296,"gl-mat4/perspective":297,"gl-select-static":334,"gl-spikes3d":345,"is-mobile":467,"mouse-change":483}],
322:[function(b,N,I){b=b("glslify");I.pointVertex=b(["precision mediump float;\n#define GLSLIFY 1\n\nattribute vec2 position;\n\nuniform mat3 matrix;\nuniform float pointSize;\nuniform float pointCloud;\n\nhighp float rand(vec2 co) {\n  highp float a \x3d 12.9898;\n  highp float b \x3d 78.233;\n  highp float c \x3d 43758.5453;\n  highp float d \x3d dot(co.xy, vec2(a, b));\n  highp float e \x3d mod(d, 3.14);\n  return fract(sin(e) * c);\n}\n\nvoid main() {\n  vec3 hgPosition \x3d matrix * vec3(position, 1);\n  gl_Position  \x3d vec4(hgPosition.xy, 0, hgPosition.z);\n    // if we don't jitter the point size a bit, overall point cloud\n    // saturation 'jumps' on zooming, which is disturbing and confusing\n  gl_PointSize \x3d pointSize * ((19.5 + rand(position)) / 20.0);\n  if(pointCloud !\x3d 0.0) { // pointCloud is truthy\n    // get the same square surface as circle would be\n    gl_PointSize *\x3d 0.886;\n  }\n}"]);
I.pointFragment=b(["precision mediump float;\n#define GLSLIFY 1\n\nuniform vec4 color, borderColor;\nuniform float centerFraction;\nuniform float pointCloud;\n\nvoid main() {\n  float radius;\n  vec4 baseColor;\n  if(pointCloud !\x3d 0.0) { // pointCloud is truthy\n    if(centerFraction \x3d\x3d 1.0) {\n      gl_FragColor \x3d color;\n    } else {\n      gl_FragColor \x3d mix(borderColor, color, centerFraction);\n    }\n  } else {\n    radius \x3d length(2.0 * gl_PointCoord.xy - 1.0);\n    if(radius \x3e 1.0) {\n      discard;\n    }\n    baseColor \x3d mix(borderColor, color, step(radius, centerFraction));\n    gl_FragColor \x3d vec4(baseColor.rgb * baseColor.a, baseColor.a);\n  }\n}\n"]);
I.pickVertex=b(["precision mediump float;\n#define GLSLIFY 1\n\nattribute vec2 position;\nattribute vec4 pickId;\n\nuniform mat3 matrix;\nuniform float pointSize;\nuniform vec4 pickOffset;\n\nvarying vec4 fragId;\n\nvoid main() {\n  vec3 hgPosition \x3d matrix * vec3(position, 1);\n  gl_Position  \x3d vec4(hgPosition.xy, 0, hgPosition.z);\n  gl_PointSize \x3d pointSize;\n\n  vec4 id \x3d pickId + pickOffset;\n  id.y +\x3d floor(id.x / 256.0);\n  id.x -\x3d floor(id.x / 256.0) * 256.0;\n\n  id.z +\x3d floor(id.y / 256.0);\n  id.y -\x3d floor(id.y / 256.0) * 256.0;\n\n  id.w +\x3d floor(id.z / 256.0);\n  id.z -\x3d floor(id.z / 256.0) * 256.0;\n\n  fragId \x3d id;\n}\n"]);
I.pickFragment=b(["precision mediump float;\n#define GLSLIFY 1\n\nvarying vec4 fragId;\n\nvoid main() {\n  float radius \x3d length(2.0 * gl_PointCoord.xy - 1.0);\n  if(radius \x3e 1.0) {\n    discard;\n  }\n  gl_FragColor \x3d fragId / 255.0;\n}\n"])},{glslify:323}],323:[function(b,N,I){arguments[4][257][0].apply(I,arguments)},{dup:257}],324:[function(b,N,I){function r(h,g,n,p,d){this.plot=h;this.offsetBuffer=g;this.pickBuffer=n;this.shader=p;this.pickShader=d;this.sizeMin=.5;this.sizeMinCap=2;this.sizeMax=
20;this.areaRatio=1;this.pointCount=0;this.color=[1,0,0,1];this.borderColor=[0,0,0,1];this.blend=!1;this.pickOffset=0;this.points=null}var q=b("gl-shader"),m=b("gl-buffer"),l=b("typedarray-pool"),a=b("./lib/shader");N.exports=function(h,g){var n=h.gl,p=m(n),d=m(n),e=q(n,a.pointVertex,a.pointFragment);n=q(n,a.pickVertex,a.pickFragment);p=new r(h,p,d,e,n);p.update(g);h.addObject(p);return p};b=r.prototype;b.dispose=function(){this.shader.dispose();this.pickShader.dispose();this.offsetBuffer.dispose();
this.pickBuffer.dispose();this.plot.removeObject(this)};b.update=function(h){function g(v,w){return v in h?h[v]:w}var n;h=h||{};this.sizeMin=g("sizeMin",.5);this.sizeMax=g("sizeMax",20);this.color=g("color",[1,0,0,1]).slice();this.areaRatio=g("areaRatio",1);this.borderColor=g("borderColor",[0,0,0,1]).slice();this.blend=g("blend",!1);var p=h.positions.length>>>1,d=h.positions instanceof Float32Array,e=h.idToIndex instanceof Int32Array&&h.idToIndex.length>=p,f=h.positions,k=d?f:l.mallocFloat32(f.length),
t=e?h.idToIndex:l.mallocInt32(p);d||k.set(f);if(!e)for(k.set(f),n=0;n<p;n++)t[n]=n;this.points=f;this.offsetBuffer.update(k);this.pickBuffer.update(t);d||l.free(k);e||l.free(t);this.pointCount=p;this.pickOffset=0};b.unifiedDraw=function(){var h=[1,0,0,0,1,0,0,0,1],g=[0,0,0,0];return function(n){var p=void 0!==n,d=p?this.pickShader:this.shader,e=this.plot.gl,f=this.plot.dataBox;if(0===this.pointCount)return n;var k=f[2]-f[0],t=f[3]-f[1],v=this.points,w=0,y=v.length>>>1,B;for(B=0;B<y;B++){var A=v[2*
B],z=v[2*B+1];A>=f[0]&&A<=f[2]&&z>=f[1]&&z<=f[3]&&w++}v=this.plot.pickPixelRatio*Math.max(Math.min(this.sizeMinCap,this.sizeMin),Math.min(this.sizeMax,this.sizeMax/Math.pow(w,.33333)));h[0]=2/k;h[4]=2/t;h[6]=-2*f[0]/k-1;h[7]=-2*f[1]/t-1;this.offsetBuffer.bind();d.bind();d.attributes.position.pointer();d.uniforms.matrix=h;d.uniforms.color=this.color;d.uniforms.borderColor=this.borderColor;d.uniforms.pointCloud=5>v;d.uniforms.pointSize=v;d.uniforms.centerFraction=Math.min(1,Math.max(0,Math.sqrt(1-this.areaRatio)));
p&&(g[0]=n&255,g[1]=n>>8&255,g[2]=n>>16&255,g[3]=n>>24&255,this.pickBuffer.bind(),d.attributes.pickId.pointer(e.UNSIGNED_BYTE),d.uniforms.pickOffset=g,this.pickOffset=n);p=e.getParameter(e.BLEND);d=e.getParameter(e.DITHER);p&&!this.blend&&e.disable(e.BLEND);d&&e.disable(e.DITHER);e.drawArrays(e.POINTS,0,this.pointCount);p&&!this.blend&&e.enable(e.BLEND);d&&e.enable(e.DITHER);return n+this.pointCount}}();b.draw=b.unifiedDraw;b.drawPick=b.unifiedDraw;b.pick=function(h,g,n){h=this.pickOffset;g=this.pointCount;
if(n<h||n>=h+g)return null;n-=h;h=this.points;return{object:this,pointId:n,dataCoord:[h[2*n],h[2*n+1]]}}},{"./lib/shader":322,"gl-buffer":259,"gl-shader":335,"typedarray-pool":595}],325:[function(b,N,I){N.exports=function(r,q,m,l){var a=q[0],h=q[1],g=q[2];q=q[3];var n=m[0],p=m[1],d=m[2];m=m[3];var e=a*n+h*p+g*d+q*m;0>e&&(e=-e,n=-n,p=-p,d=-d,m=-m);if(1E-6<1-e){var f=Math.acos(e);var k=Math.sin(f);e=Math.sin((1-l)*f)/k;l=Math.sin(l*f)/k}else e=1-l;r[0]=e*a+l*n;r[1]=e*h+l*p;r[2]=e*g+l*d;r[3]=e*q+l*m;
return r}},{}],326:[function(b,N,I){N.exports=function(r){return r||0===r?r.toString():""}},{}],327:[function(b,N,I){var r=b("vectorize-text");N.exports=function(m,l,a){var h=q[l];h||(h=q[l]={});if(m in h)return h[m];var g={textAlign:"center",textBaseline:"middle",lineHeight:1,font:l,lineSpacing:1.25,styletags:{breaklines:!0,bolds:!0,italics:!0,subscripts:!0,superscripts:!0},triangles:!0};l=r(m,g);g.triangles=!1;g=r(m,g);var n,p;if(a&&1!==a){for(n=0;n<l.positions.length;++n)for(p=0;p<l.positions[n].length;++p)l.positions[n][p]/=
a;for(n=0;n<g.positions.length;++n)for(p=0;p<g.positions[n].length;++p)g.positions[n][p]/=a}a=[[Infinity,Infinity],[-Infinity,-Infinity]];var d=g.positions.length;for(n=0;n<d;++n){var e=g.positions[n];for(p=0;2>p;++p)a[0][p]=Math.min(a[0][p],e[p]),a[1][p]=Math.max(a[1][p],e[p])}return h[m]=[l,g,a]};var q={}},{"vectorize-text":600}],328:[function(b,N,I){function r(k,t){k=q(k,t);t=k.attributes;t.position.location=0;t.color.location=1;t.glyph.location=2;t.id.location=3;return k}var q=b("gl-shader"),
m=b("glslify");b=m(["precision highp float;\n#define GLSLIFY 1\n\nbool outOfRange(float a, float b, float p) {\n  return ((p \x3e max(a, b)) || \n          (p \x3c min(a, b)));\n}\n\nbool outOfRange(vec2 a, vec2 b, vec2 p) {\n  return (outOfRange(a.x, b.x, p.x) ||\n          outOfRange(a.y, b.y, p.y));\n}\n\nbool outOfRange(vec3 a, vec3 b, vec3 p) {\n  return (outOfRange(a.x, b.x, p.x) ||\n          outOfRange(a.y, b.y, p.y) ||\n          outOfRange(a.z, b.z, p.z));\n}\n\nbool outOfRange(vec4 a, vec4 b, vec4 p) {\n  return outOfRange(a.xyz, b.xyz, p.xyz);\n}\n\nattribute vec3 position;\nattribute vec4 color;\nattribute vec2 glyph;\nattribute vec4 id;\n\nuniform vec4 highlightId;\nuniform float highlightScale;\nuniform mat4 model, view, projection;\nuniform vec3 clipBounds[2];\n\nvarying vec4 interpColor;\nvarying vec4 pickId;\nvarying vec3 dataCoordinate;\n\nvoid main() {\n  if (outOfRange(clipBounds[0], clipBounds[1], position)) {\n\n    gl_Position \x3d vec4(0,0,0,0);\n  } else {\n    float scale \x3d 1.0;\n    if(distance(highlightId, id) \x3c 0.0001) {\n      scale \x3d highlightScale;\n    }\n\n    vec4 worldPosition \x3d model * vec4(position, 1);\n    vec4 viewPosition \x3d view * worldPosition;\n    viewPosition \x3d viewPosition / viewPosition.w;\n    vec4 clipPosition \x3d projection * (viewPosition + scale * vec4(glyph.x, -glyph.y, 0, 0));\n\n    gl_Position \x3d clipPosition;\n    interpColor \x3d color;\n    pickId \x3d id;\n    dataCoordinate \x3d position;\n  }\n}"]);
N=m(["precision highp float;\n#define GLSLIFY 1\n\nbool outOfRange(float a, float b, float p) {\n  return ((p \x3e max(a, b)) || \n          (p \x3c min(a, b)));\n}\n\nbool outOfRange(vec2 a, vec2 b, vec2 p) {\n  return (outOfRange(a.x, b.x, p.x) ||\n          outOfRange(a.y, b.y, p.y));\n}\n\nbool outOfRange(vec3 a, vec3 b, vec3 p) {\n  return (outOfRange(a.x, b.x, p.x) ||\n          outOfRange(a.y, b.y, p.y) ||\n          outOfRange(a.z, b.z, p.z));\n}\n\nbool outOfRange(vec4 a, vec4 b, vec4 p) {\n  return outOfRange(a.xyz, b.xyz, p.xyz);\n}\n\nattribute vec3 position;\nattribute vec4 color;\nattribute vec2 glyph;\nattribute vec4 id;\n\nuniform mat4 model, view, projection;\nuniform vec2 screenSize;\nuniform vec3 clipBounds[2];\nuniform float highlightScale, pixelRatio;\nuniform vec4 highlightId;\n\nvarying vec4 interpColor;\nvarying vec4 pickId;\nvarying vec3 dataCoordinate;\n\nvoid main() {\n  if (outOfRange(clipBounds[0], clipBounds[1], position)) {\n\n    gl_Position \x3d vec4(0,0,0,0);\n  } else {\n    float scale \x3d pixelRatio;\n    if(distance(highlightId.bgr, id.bgr) \x3c 0.001) {\n      scale *\x3d highlightScale;\n    }\n\n    vec4 worldPosition \x3d model * vec4(position, 1.0);\n    vec4 viewPosition \x3d view * worldPosition;\n    vec4 clipPosition \x3d projection * viewPosition;\n    clipPosition /\x3d clipPosition.w;\n\n    gl_Position \x3d clipPosition + vec4(screenSize * scale * vec2(glyph.x, -glyph.y), 0.0, 0.0);\n    interpColor \x3d color;\n    pickId \x3d id;\n    dataCoordinate \x3d position;\n  }\n}"]);
var l=m(["precision highp float;\n#define GLSLIFY 1\n\nbool outOfRange(float a, float b, float p) {\n  return ((p \x3e max(a, b)) || \n          (p \x3c min(a, b)));\n}\n\nbool outOfRange(vec2 a, vec2 b, vec2 p) {\n  return (outOfRange(a.x, b.x, p.x) ||\n          outOfRange(a.y, b.y, p.y));\n}\n\nbool outOfRange(vec3 a, vec3 b, vec3 p) {\n  return (outOfRange(a.x, b.x, p.x) ||\n          outOfRange(a.y, b.y, p.y) ||\n          outOfRange(a.z, b.z, p.z));\n}\n\nbool outOfRange(vec4 a, vec4 b, vec4 p) {\n  return outOfRange(a.xyz, b.xyz, p.xyz);\n}\n\nattribute vec3 position;\nattribute vec4 color;\nattribute vec2 glyph;\nattribute vec4 id;\n\nuniform float highlightScale;\nuniform vec4 highlightId;\nuniform vec3 axes[2];\nuniform mat4 model, view, projection;\nuniform vec2 screenSize;\nuniform vec3 clipBounds[2];\nuniform float scale, pixelRatio;\n\nvarying vec4 interpColor;\nvarying vec4 pickId;\nvarying vec3 dataCoordinate;\n\nvoid main() {\n  if (outOfRange(clipBounds[0], clipBounds[1], position)) {\n\n    gl_Position \x3d vec4(0,0,0,0);\n  } else {\n    float lscale \x3d pixelRatio * scale;\n    if(distance(highlightId, id) \x3c 0.0001) {\n      lscale *\x3d highlightScale;\n    }\n\n    vec4 clipCenter   \x3d projection * view * model * vec4(position, 1);\n    vec3 dataPosition \x3d position + 0.5*lscale*(axes[0] * glyph.x + axes[1] * glyph.y) * clipCenter.w * screenSize.y;\n    vec4 clipPosition \x3d projection * view * model * vec4(dataPosition, 1);\n\n    gl_Position \x3d clipPosition;\n    interpColor \x3d color;\n    pickId \x3d id;\n    dataCoordinate \x3d dataPosition;\n  }\n}\n"]),
a=m(["precision highp float;\n#define GLSLIFY 1\n\nbool outOfRange(float a, float b, float p) {\n  return ((p \x3e max(a, b)) || \n          (p \x3c min(a, b)));\n}\n\nbool outOfRange(vec2 a, vec2 b, vec2 p) {\n  return (outOfRange(a.x, b.x, p.x) ||\n          outOfRange(a.y, b.y, p.y));\n}\n\nbool outOfRange(vec3 a, vec3 b, vec3 p) {\n  return (outOfRange(a.x, b.x, p.x) ||\n          outOfRange(a.y, b.y, p.y) ||\n          outOfRange(a.z, b.z, p.z));\n}\n\nbool outOfRange(vec4 a, vec4 b, vec4 p) {\n  return outOfRange(a.xyz, b.xyz, p.xyz);\n}\n\nuniform vec3 fragClipBounds[2];\nuniform float opacity;\n\nvarying vec4 interpColor;\nvarying vec3 dataCoordinate;\n\nvoid main() {\n  if (\n    outOfRange(fragClipBounds[0], fragClipBounds[1], dataCoordinate) ||\n    interpColor.a * opacity \x3d\x3d 0.\n  ) discard;\n  gl_FragColor \x3d interpColor * opacity;\n}\n"]);
m=m(["precision highp float;\n#define GLSLIFY 1\n\nbool outOfRange(float a, float b, float p) {\n  return ((p \x3e max(a, b)) || \n          (p \x3c min(a, b)));\n}\n\nbool outOfRange(vec2 a, vec2 b, vec2 p) {\n  return (outOfRange(a.x, b.x, p.x) ||\n          outOfRange(a.y, b.y, p.y));\n}\n\nbool outOfRange(vec3 a, vec3 b, vec3 p) {\n  return (outOfRange(a.x, b.x, p.x) ||\n          outOfRange(a.y, b.y, p.y) ||\n          outOfRange(a.z, b.z, p.z));\n}\n\nbool outOfRange(vec4 a, vec4 b, vec4 p) {\n  return outOfRange(a.xyz, b.xyz, p.xyz);\n}\n\nuniform vec3 fragClipBounds[2];\nuniform float pickGroup;\n\nvarying vec4 pickId;\nvarying vec3 dataCoordinate;\n\nvoid main() {\n  if (outOfRange(fragClipBounds[0], fragClipBounds[1], dataCoordinate)) discard;\n\n  gl_FragColor \x3d vec4(pickGroup, pickId.bgr);\n}"]);
var h=[{name:"position",type:"vec3"},{name:"color",type:"vec4"},{name:"glyph",type:"vec2"},{name:"id",type:"vec4"}],g={vertex:b,fragment:a,attributes:h},n={vertex:N,fragment:a,attributes:h},p={vertex:l,fragment:a,attributes:h},d={vertex:b,fragment:m,attributes:h},e={vertex:N,fragment:m,attributes:h},f={vertex:l,fragment:m,attributes:h};I.createPerspective=function(k){return r(k,g)};I.createOrtho=function(k){return r(k,n)};I.createProject=function(k){return r(k,p)};I.createPickPerspective=function(k){return r(k,
d)};I.createPickOrtho=function(k){return r(k,e)};I.createPickProject=function(k){return r(k,f)}},{"gl-shader":335,glslify:329}],329:[function(b,N,I){arguments[4][257][0].apply(I,arguments)},{dup:257}],330:[function(b,N,I){function r(H,Q){var M=H[0],P=H[1],T=H[2],O=H[3];H[0]=Q[0]*M+Q[4]*P+Q[8]*T+Q[12]*O;H[1]=Q[1]*M+Q[5]*P+Q[9]*T+Q[13]*O;H[2]=Q[2]*M+Q[6]*P+Q[10]*T+Q[14]*O;H[3]=Q[3]*M+Q[7]*P+Q[11]*T+Q[15]*O;return H}function q(H,Q,M,P){r(P,P,M);r(P,P,Q);return r(P,P,H)}function m(H,Q){this.index=H;this.dataCoordinate=
this.position=Q}function l(H){return!0===H||1<H?1:H}function a(H,Q,M,P,T,O,U,S,X,ba,ca,ia){this.gl=H;this.pixelRatio=1;this.shader=Q;this.orthoShader=M;this.projectShader=P;this.pointBuffer=T;this.colorBuffer=O;this.glyphBuffer=U;this.idBuffer=S;this.vao=X;this.lineVertexCount=this.vertexCount=0;this.opacity=1;this.hasAlpha=!1;this.lineWidth=0;this.projectScale=[2/3,2/3,2/3];this.projectOpacity=[1,1,1];this.projectHasAlpha=!1;this.pickId=0;this.pickPerspectiveShader=ba;this.pickOrthoShader=ca;this.pickProjectShader=
ia;this.points=[];this._selectResult=new m(0,[0,0,0]);this.useOrtho=!0;this.bounds=[[Infinity,Infinity,Infinity],[-Infinity,-Infinity,-Infinity]];this.axesProject=[!0,!0,!0];this.axesBounds=[[-Infinity,-Infinity,-Infinity],[Infinity,Infinity,Infinity]];this.highlightId=[1,1,1,1];this.highlightScale=2;this.clipBounds=[[-Infinity,-Infinity,-Infinity],[Infinity,Infinity,Infinity]];this.dirty=!0}function h(H){H[0]=H[1]=H[2]=0;return H}function g(H,Q){H[0]=Q[0];H[1]=Q[1];H[2]=Q[2];H[3]=1;return H}function n(H,
Q,M,P){H[0]=Q[0];H[1]=Q[1];H[2]=Q[2];H[M]=P;return H}function p(H,Q,M,P,T,O,U){var S=M.gl;if(O===M.projectHasAlpha||U){for(var X=M.axesProject,ba=M.gl,ca=Q.uniforms,ia=P.model||A,ja=P.view||A,la=P.projection||A,da=M.axesBounds,oa=M.clipBounds,sa=L,ma=0;2>ma;++ma)for(var qa=0;3>qa;++qa)sa[ma][qa]=Math.max(Math.min(oa[ma][qa],1E8),-1E8);oa=M.axes&&M.axes.lastCubeProps?M.axes.lastCubeProps.axis:[1,1,1];z[0]=2/ba.drawingBufferWidth;z[1]=2/ba.drawingBufferHeight;Q.bind();ca.view=ja;ca.projection=la;ca.screenSize=
z;ca.highlightId=M.highlightId;ca.highlightScale=M.highlightScale;ca.clipBounds=sa;ca.pickGroup=M.pickId/255;ca.pixelRatio=T;for(Q=0;3>Q;++Q)if(X[Q]){ca.scale=M.projectScale[Q];ca.opacity=M.projectOpacity[Q];ma=G;for(var pa=0;16>pa;++pa)ma[pa]=0;for(pa=0;4>pa;++pa)ma[5*pa]=1;ma[5*Q]=0;ma[12+Q]=0>oa[Q]?da[0][Q]:da[1][Q];v(ma,ia,ma);ca.model=ma;ma=(Q+1)%3;qa=(Q+2)%3;var na=h(E),ka=h(C);na[ma]=1;ka[qa]=1;pa=q(la,ja,ia,g(u,na));var ua=q(la,ja,ia,g(D,ka));if(Math.abs(pa[1])>Math.abs(ua[1])){var va=pa;
pa=ua;ua=va;va=na;na=ka;ka=va;va=ma;ma=qa;qa=va}0>pa[0]&&(na[ma]=-1);0<ua[1]&&(ka[qa]=-1);for(pa=va=ua=0;4>pa;++pa)ua+=Math.pow(ia[4*ma+pa],2),va+=Math.pow(ia[4*qa+pa],2);na[ma]/=Math.sqrt(ua);ka[qa]/=Math.sqrt(va);ca.axes[0]=na;ca.axes[1]=ka;ca.fragClipBounds[0]=n(J,sa[0],Q,-1E8);ca.fragClipBounds[1]=n(J,sa[1],Q,1E8);M.vao.bind();M.vao.draw(ba.TRIANGLES,M.vertexCount);0<M.lineWidth&&(ba.lineWidth(M.lineWidth*T),M.vao.draw(ba.LINES,M.lineVertexCount,M.vertexCount));M.vao.unbind()}}if(O===M.hasAlpha||
U)H.bind(),H=H.uniforms,H.model=P.model||A,H.view=P.view||A,H.projection=P.projection||A,z[0]=2/S.drawingBufferWidth,z[1]=2/S.drawingBufferHeight,H.screenSize=z,H.highlightId=M.highlightId,H.highlightScale=M.highlightScale,H.fragClipBounds=K,H.clipBounds=M.axes.bounds,H.opacity=M.opacity,H.pickGroup=M.pickId/255,H.pixelRatio=T,M.vao.bind(),M.vao.draw(S.TRIANGLES,M.vertexCount),0<M.lineWidth&&(S.lineWidth(M.lineWidth*T),M.vao.draw(S.LINES,M.lineVertexCount,M.vertexCount)),M.vao.unbind()}function d(H,
Q,M,P){Q=Array.isArray(H)?Q<H.length?H[Q]:void 0:H;Q=B(Q);H=!0;e(Q)&&(Q="",H=!1);M=y(Q,M,P);return{mesh:M[0],lines:M[1],bounds:M[2],visible:H}}var e=b("is-string-blank"),f=b("gl-buffer"),k=b("gl-vao"),t=b("typedarray-pool"),v=b("gl-mat4/multiply"),w=b("./lib/shaders"),y=b("./lib/glyphs"),B=b("./lib/get-simple-string"),A=[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1];N.exports=function(H){var Q=H.gl,M=w.createPerspective(Q),P=w.createOrtho(Q),T=w.createProject(Q),O=w.createPickPerspective(Q),U=w.createPickOrtho(Q),
S=w.createPickProject(Q),X=f(Q),ba=f(Q),ca=f(Q),ia=f(Q),ja=k(Q,[{buffer:X,size:3,type:Q.FLOAT},{buffer:ba,size:4,type:Q.FLOAT},{buffer:ca,size:2,type:Q.FLOAT},{buffer:ia,size:4,type:Q.UNSIGNED_BYTE,normalized:!0}]);Q=new a(Q,M,P,T,X,ba,ca,ia,ja,O,U,S);Q.update(H);return Q};b=a.prototype;b.pickSlots=1;b.setPickBase=function(H){this.pickId=H};b.isTransparent=function(){if(this.hasAlpha)return!0;for(var H=0;3>H;++H)if(this.axesProject[H]&&this.projectHasAlpha)return!0;return!1};b.isOpaque=function(){if(!this.hasAlpha)return!0;
for(var H=0;3>H;++H)if(this.axesProject[H]&&!this.projectHasAlpha)return!0;return!1};var z=[0,0],E=[0,0,0],C=[0,0,0],u=[0,0,0,1],D=[0,0,0,1],G=A.slice(),J=[0,0,0],L=[[0,0,0],[0,0,0]],K=[[-1E8,-1E8,-1E8],[1E8,1E8,1E8]];b.draw=function(H){p(this.useOrtho?this.orthoShader:this.shader,this.projectShader,this,H,this.pixelRatio,!1,!1)};b.drawTransparent=function(H){p(this.useOrtho?this.orthoShader:this.shader,this.projectShader,this,H,this.pixelRatio,!0,!1)};b.drawPick=function(H){p(this.useOrtho?this.pickOrthoShader:
this.pickPerspectiveShader,this.pickProjectShader,this,H,1,!0,!0)};b.pick=function(H){if(!H||H.id!==this.pickId)return null;var Q=H.value[2]+(H.value[1]<<8)+(H.value[0]<<16);if(Q>=this.pointCount||0>Q)return null;H=this.points[Q];var M=this._selectResult;M.index=Q;for(Q=0;3>Q;++Q)M.position[Q]=M.dataCoordinate[Q]=H[Q];return M};b.highlight=function(H){H?(H=H.index,this.highlightId=[(H&255)/255,(H>>8&255)/255,(H>>16&255)/255,0]):this.highlightId=[1,1,1,1]};b.update=function(H){H=H||{};"perspective"in
H&&(this.useOrtho=!H.perspective);"orthographic"in H&&(this.useOrtho=!!H.orthographic);"lineWidth"in H&&(this.lineWidth=H.lineWidth);if("project"in H)if(Array.isArray(H.project))this.axesProject=H.project;else{var Q=!!H.project;this.axesProject=[Q,Q,Q]}"projectScale"in H&&(Array.isArray(H.projectScale)?this.projectScale=H.projectScale.slice():(Q=+H.projectScale,this.projectScale=[Q,Q,Q]));this.projectHasAlpha=!1;if("projectOpacity"in H){Array.isArray(H.projectOpacity)?this.projectOpacity=H.projectOpacity.slice():
(Q=+H.projectOpacity,this.projectOpacity=[Q,Q,Q]);for(var M=0;3>M;++M)this.projectOpacity[M]=l(this.projectOpacity[M]),1>this.projectOpacity[M]&&(this.projectHasAlpha=!0)}this.hasAlpha=!1;"opacity"in H&&(this.opacity=l(H.opacity),1>this.opacity&&(this.hasAlpha=!0));this.dirty=!0;Q=H.position;var P=H.font||"normal",T=H.alignment||[0,0];if(2===T.length){var O=T[0];var U=T[1]}else for(O=[],U=[],M=0;M<T.length;++M)O[M]=T[M][0],U[M]=T[M][1];T=[Infinity,Infinity,Infinity];var S=[-Infinity,-Infinity,-Infinity],
X=H.glyph,ba=H.color,ca=H.size,ia=H.angle;H=H.lineColor;var ja=-1,la=0,da=0,oa=0;if(Q.length)a:for(oa=Q.length,M=0;M<oa;++M){for(var sa=Q[M],ma=0;3>ma;++ma)if(isNaN(sa[ma])||!isFinite(sa[ma]))continue a;var qa=d(X,M,P,this.pixelRatio),pa=qa.mesh,na=qa.lines;la+=3*pa.cells.length;da+=2*na.edges.length}M=la+da;var ka=t.mallocFloat(3*M),ua=t.mallocFloat(4*M),va=t.mallocFloat(2*M),Ca=t.mallocUint32(M);if(0<M){var Ma=0,Ua=la,eb=[0,0,0,1],fb=[0,0,0,1],nb=Array.isArray(ba)&&Array.isArray(ba[0]),cb=Array.isArray(H)&&
Array.isArray(H[0]);M=0;a:for(;M<oa;++M){ja+=1;sa=Q[M];for(ma=0;3>ma;++ma){if(isNaN(sa[ma])||!isFinite(sa[ma]))continue a;S[ma]=Math.max(S[ma],sa[ma]);T[ma]=Math.min(T[ma],sa[ma])}qa=d(X,M,P,this.pixelRatio);pa=qa.mesh;na=qa.lines;var $a=qa.bounds;var jb=qa.visible;if(jb)if(Array.isArray(ba))if(qa=nb?M<ba.length?ba[M]:[0,0,0,0]:ba,3===qa.length){for(ma=0;3>ma;++ma)eb[ma]=qa[ma];eb[3]=1}else{if(4===qa.length){for(ma=0;4>ma;++ma)eb[ma]=qa[ma];!this.hasAlpha&&1>qa[3]&&(this.hasAlpha=!0)}}else eb[0]=
eb[1]=eb[2]=0,eb[3]=1;else eb=[1,1,1,0];if(jb)if(Array.isArray(H))if(qa=cb?M<H.length?H[M]:[0,0,0,0]:H,3===qa.length){for(ma=0;3>ma;++ma)fb[ma]=qa[ma];fb[ma]=1}else{if(4===qa.length){for(ma=0;4>ma;++ma)fb[ma]=qa[ma];!this.hasAlpha&&1>qa[3]&&(this.hasAlpha=!0)}}else fb[0]=fb[1]=fb[2]=0,fb[3]=1;else fb=[1,1,1,0];qa=.5;jb?Array.isArray(ca)?qa=M<ca.length?+ca[M]:12:ca?qa=+ca:this.useOrtho&&(qa=12):qa=0;sa=0;Array.isArray(ia)?sa=M<ia.length?+ia[M]:0:ia&&(sa=+ia);jb=Math.cos(sa);var pb=Math.sin(sa);sa=
Q[M];for(ma=0;3>ma;++ma)S[ma]=Math.max(S[ma],sa[ma]),T[ma]=Math.min(T[ma],sa[ma]);ma=0;Array.isArray(O)?ma=M<O.length?O[M]:0:O&&(ma=O);var xa=0;Array.isArray(U)?xa=M<U.length?U[M]:0:U&&(xa=U);ma*=0<ma?1-$a[0][0]:0>ma?1+$a[1][0]:1;xa*=0<xa?1-$a[0][1]:0>xa?1+$a[1][1]:1;$a=[ma,xa];xa=pa.cells||[];pa=pa.positions||[];for(ma=0;ma<xa.length;++ma)for(var Ea=xa[ma],Ia=0;3>Ia;++Ia){for(var Oa=0;3>Oa;++Oa)ka[3*Ma+Oa]=sa[Oa];for(Oa=0;4>Oa;++Oa)ua[4*Ma+Oa]=eb[Oa];Ca[Ma]=ja;Oa=pa[Ea[Ia]];va[2*Ma]=qa*(jb*Oa[0]-
pb*Oa[1]+$a[0]);va[2*Ma+1]=qa*(pb*Oa[0]+jb*Oa[1]+$a[1]);Ma+=1}xa=na.edges;pa=na.positions;for(ma=0;ma<xa.length;++ma)for(Ea=xa[ma],Ia=0;2>Ia;++Ia){for(Oa=0;3>Oa;++Oa)ka[3*Ua+Oa]=sa[Oa];for(Oa=0;4>Oa;++Oa)ua[4*Ua+Oa]=fb[Oa];Ca[Ua]=ja;Oa=pa[Ea[Ia]];va[2*Ua]=qa*(jb*Oa[0]-pb*Oa[1]+$a[0]);va[2*Ua+1]=qa*(pb*Oa[0]+jb*Oa[1]+$a[1]);Ua+=1}}}this.bounds=[T,S];this.points=Q;this.pointCount=Q.length;this.vertexCount=la;this.lineVertexCount=da;this.pointBuffer.update(ka);this.colorBuffer.update(ua);this.glyphBuffer.update(va);
this.idBuffer.update(Ca);t.free(ka);t.free(ua);t.free(va);t.free(Ca)};b.dispose=function(){this.shader.dispose();this.orthoShader.dispose();this.pickPerspectiveShader.dispose();this.pickOrthoShader.dispose();this.vao.dispose();this.pointBuffer.dispose();this.colorBuffer.dispose();this.glyphBuffer.dispose();this.idBuffer.dispose()}},{"./lib/get-simple-string":326,"./lib/glyphs":327,"./lib/shaders":328,"gl-buffer":259,"gl-mat4/multiply":295,"gl-vao":358,"is-string-blank":470,"typedarray-pool":595}],
331:[function(b,N,I){b=b("glslify");I.boxVertex=b(["precision mediump float;\n#define GLSLIFY 1\n\nattribute vec2 vertex;\n\nuniform vec2 cornerA, cornerB;\n\nvoid main() {\n  gl_Position \x3d vec4(mix(cornerA, cornerB, vertex), 0, 1);\n}\n"]);I.boxFragment=b(["precision mediump float;\n#define GLSLIFY 1\n\nuniform vec4 color;\n\nvoid main() {\n  gl_FragColor \x3d color;\n}\n"])},{glslify:332}],332:[function(b,N,I){arguments[4][257][0].apply(I,arguments)},{dup:257}],333:[function(b,N,I){function r(a,
h,g){this.plot=a;this.boxBuffer=h;this.boxShader=g;this.enabled=!0;this.selectBox=[Infinity,Infinity,-Infinity,-Infinity];this.borderColor=[0,0,0,1];this.innerFill=!1;this.innerColor=[0,0,0,.25];this.outerFill=!0;this.outerColor=[0,0,0,.5];this.borderWidth=10}var q=b("gl-shader"),m=b("gl-buffer"),l=b("./lib/shaders");N.exports=function(a,h){var g=a.gl,n=m(g,[0,0,0,1,1,0,1,1]);g=q(g,l.boxVertex,l.boxFragment);n=new r(a,n,g);n.update(h);a.addOverlay(n);return n};b=r.prototype;b.draw=function(){if(this.enabled){var a=
this.plot,h=this.selectBox,g=this.borderWidth,n=this.innerColor,p=this.outerColor,d=this.borderColor,e=a.box,f=a.screenBox,k=a.dataBox,t=a.viewBox,v=a.pixelRatio;a=(h[0]-k[0])*(t[2]-t[0])/(k[2]-k[0])+t[0];var w=(h[1]-k[1])*(t[3]-t[1])/(k[3]-k[1])+t[1],y=(h[2]-k[0])*(t[2]-t[0])/(k[2]-k[0])+t[0];h=(h[3]-k[1])*(t[3]-t[1])/(k[3]-k[1])+t[1];a=Math.max(a,t[0]);w=Math.max(w,t[1]);y=Math.min(y,t[2]);h=Math.min(h,t[3]);y<a||h<w||(e.bind(),t=f[2]-f[0],f=f[3]-f[1],this.outerFill&&(e.drawBox(0,0,t,w,p),e.drawBox(0,
w,a,h,p),e.drawBox(0,h,t,f,p),e.drawBox(y,w,t,h,p)),this.innerFill&&e.drawBox(a,w,y,h,n),0<g&&(g*=v,e.drawBox(a-g,w-g,y+g,w+g,d),e.drawBox(a-g,h-g,y+g,h+g,d),e.drawBox(a-g,w-g,a+g,h+g,d),e.drawBox(y-g,w-g,y+g,h+g,d)))}};b.update=function(a){a=a||{};this.innerFill=!!a.innerFill;this.outerFill=!!a.outerFill;this.innerColor=(a.innerColor||[0,0,0,.5]).slice();this.outerColor=(a.outerColor||[0,0,0,.5]).slice();this.borderColor=(a.borderColor||[0,0,0,1]).slice();this.borderWidth=a.borderWidth||0;this.selectBox=
(a.selectBox||this.selectBox).slice()};b.dispose=function(){this.boxBuffer.dispose();this.boxShader.dispose();this.plot.removeOverlay(this)}},{"./lib/shaders":331,"gl-buffer":259,"gl-shader":335}],334:[function(b,N,I){function r(g,n,p,d,e){this.coord=[g,n];this.id=p;this.value=d;this.distance=e}function q(g,n,p){this.gl=g;this.fbo=n;this.buffer=p;this._readTimeout=null;var d=this;this._readCallback=function(){d.gl&&(n.bind(),g.readPixels(0,0,n.shape[0],n.shape[1],g.RGBA,g.UNSIGNED_BYTE,d.buffer),
d._readTimeout=null)}}N.exports=function(g,n){var p=n[0],d=n[1];n=m(g,p,d,{});p=l.mallocUint8(p*d*4);return new q(g,n,p)};var m=b("gl-fbo"),l=b("typedarray-pool"),a=b("ndarray"),h=b("bit-twiddle").nextPow2;b=q.prototype;Object.defineProperty(b,"shape",{get:function(){return this.gl?this.fbo.shape.slice():[0,0]},set:function(g){if(this.gl){this.fbo.shape=g;var n=this.fbo.shape[0],p=this.fbo.shape[1];if(p*n*4>this.buffer.length){l.free(this.buffer);for(var d=this.buffer=l.mallocUint8(h(p*n*4)),e=0;e<
p*n*4;++e)d[e]=255}return g}}});b.begin=function(){var g=this.gl;g&&(this.fbo.bind(),g.clearColor(1,1,1,1),g.clear(g.COLOR_BUFFER_BIT|g.DEPTH_BUFFER_BIT))};b.end=function(){var g=this.gl;g&&(g.bindFramebuffer(g.FRAMEBUFFER,null),this._readTimeout||clearTimeout(this._readTimeout),this._readTimeout=setTimeout(this._readCallback,1))};b.query=function(g,n,p){if(!this.gl)return null;var d=this.fbo.shape.slice();g|=0;n|=0;"number"!==typeof p&&(p=1);var e=Math.min(Math.max(g-p,0),d[0])|0,f=Math.min(Math.max(g+
p,0),d[0])|0;g=Math.min(Math.max(n-p,0),d[1])|0;n=Math.min(Math.max(n+p,0),d[1])|0;if(f<=e||n<=g)return null;n=[f-e,n-g];d=a(this.buffer,[n[0],n[1],4],[4,4*d[0],1],4*(e+d[0]*g));n=d.hi(n[0],n[1],1);f=p;for(var k=1E8,t=-1,v=-1,w=n.shape[0],y=n.shape[1],B=0;B<w;B++)for(var A=0;A<y;A++){var z=n.get(B,A,0),E=n.get(B,A,1),C=n.get(B,A,2),u=n.get(B,A,3);if(255>z||255>E||255>C||255>u)z=f-B,E=p-A,z=z*z+E*E,z<k&&(k=z,t=B,v=A)}n=[t,v,k];f=n[0];p=n[1];if(0>f||Math.pow(this.radius,2)<n[2])return null;k=d.get(f,
p,0);t=d.get(f,p,1);v=d.get(f,p,2);d=d.get(f,p,3);return new r(f+e|0,p+g|0,k,[t,v,d],Math.sqrt(n[2]))};b.dispose=function(){this.gl&&(this.fbo.dispose(),l.free(this.buffer),this.gl=null,this._readTimeout&&clearTimeout(this._readTimeout))}},{"bit-twiddle":97,"gl-fbo":269,ndarray:495,"typedarray-pool":595}],335:[function(b,N,I){function r(p){this.gl=p;this.gl.lastAttribCount=0;this._vref=this._fref=this._relink=this.vertShader=this.fragShader=this.program=this.attributes=this.uniforms=this.types=null}
function q(p,d){return p.name<d.name?-1:1}var m=b("./lib/create-uniforms"),l=b("./lib/create-attributes"),a=b("./lib/reflect"),h=b("./lib/shader-cache"),g=b("./lib/runtime-reflect"),n=b("./lib/GLError");b=r.prototype;b.bind=function(){this.program||this._relink();var p,d=this.gl.getProgramParameter(this.program,this.gl.ACTIVE_ATTRIBUTES),e=this.gl.lastAttribCount;if(d>e)for(p=e;p<d;p++)this.gl.enableVertexAttribArray(p);else if(e>d)for(p=d;p<e;p++)this.gl.disableVertexAttribArray(p);this.gl.lastAttribCount=
d;this.gl.useProgram(this.program)};b.dispose=function(){for(var p=this.gl.lastAttribCount,d=0;d<p;d++)this.gl.disableVertexAttribArray(d);this.gl.lastAttribCount=0;this._fref&&this._fref.dispose();this._vref&&this._vref.dispose();this.attributes=this.types=this.vertShader=this.fragShader=this.program=this._relink=this._fref=this._vref=null};b.update=function(p,d,e,f){function k(){v.program=h.program(w,v._vref,v._fref,y,B);for(var G=0;G<e.length;++G)D[G]=w.getUniformLocation(v.program,e[G].name)}
if(!d||1===arguments.length){var t=p;p=t.vertex;d=t.fragment;e=t.uniforms;f=t.attributes}var v=this,w=v.gl;t=v._vref;v._vref=h.shader(w,w.VERTEX_SHADER,p);t&&t.dispose();v.vertShader=v._vref.shader;t=this._fref;v._fref=h.shader(w,w.FRAGMENT_SHADER,d);t&&t.dispose();v.fragShader=v._fref.shader;if(!e||!f){t=w.createProgram();w.attachShader(t,v.fragShader);w.attachShader(t,v.vertShader);w.linkProgram(t);if(!w.getProgramParameter(t,w.LINK_STATUS))throw t=w.getProgramInfoLog(t),new n(t,"Error linking program:"+
t);e=e||g.uniforms(w,t);f=f||g.attributes(w,t);w.deleteProgram(t)}f=f.slice();f.sort(q);t=[];var y=[],B=[],A;for(A=0;A<f.length;++A){var z=f[A];if(0<=z.type.indexOf("mat")){for(var E=z.type.charAt(z.type.length-1)|0,C=Array(E),u=0;u<E;++u)C[u]=B.length,y.push(z.name+"["+u+"]"),"number"===typeof z.location?B.push(z.location+u):Array.isArray(z.location)&&z.location.length===E&&"number"===typeof z.location[u]?B.push(z.location[u]|0):B.push(-1);t.push({name:z.name,type:z.type,locations:C})}else t.push({name:z.name,
type:z.type,locations:[B.length]}),y.push(z.name),"number"===typeof z.location?B.push(z.location|0):B.push(-1)}for(A=z=0;A<B.length;++A)if(0>B[A]){for(;0<=B.indexOf(z);)z+=1;B[A]=z}var D=Array(e.length);k();v._relink=k;v.types={uniforms:a(e),attributes:a(f)};v.attributes=l(w,v,t,B);Object.defineProperty(v,"uniforms",m(w,v,e,D))};N.exports=function(p,d,e,f,k){p=new r(p);p.update(d,e,f,k);return p}},{"./lib/GLError":336,"./lib/create-attributes":337,"./lib/create-uniforms":338,"./lib/reflect":339,"./lib/runtime-reflect":340,
"./lib/shader-cache":341}],336:[function(b,N,I){function r(q,m,l){this.shortMessage=m||"";this.longMessage=l||"";this.rawError=q||"";this.message="gl-shader: "+(m||q||"")+(l?"\n"+l:"");this.stack=Error().stack}r.prototype=Error();r.prototype.name="GLError";r.prototype.constructor=r;N.exports=r},{}],337:[function(b,N,I){function r(a,h,g,n,p,d){this._gl=a;this._wrapper=h;this._index=g;this._locations=n;this._dimension=p;this._constFunc=d}function q(a,h,g,n,p,d,e){for(var f=["gl","v"],k=[],t=0;t<p;++t)f.push("x"+
t),k.push("x"+t);f.push("if(x0.length\x3d\x3d\x3dvoid 0){return gl.vertexAttrib"+p+"f(v,"+k.join()+")}else{return gl.vertexAttrib"+p+"fv(v,x0)}");var v=Function.apply(null,f),w=new r(a,h,g,n,p,v);Object.defineProperty(d,e,{set:function(y){a.disableVertexAttribArray(n[g]);v(a,n[g],y);return y},get:function(){return w},enumerable:!0})}function m(a,h,g,n,p,d,e){for(var f=Array(p),k=Array(p),t=0;t<p;++t)q(a,h,g[t],n,p,f,t),k[t]=f[t];Object.defineProperty(f,"location",{set:function(y){if(Array.isArray(y))for(var B=
0;B<p;++B)k[B].location=y[B];else for(B=0;B<p;++B)k[B].location=y+B;return y},get:function(){for(var y=Array(p),B=0;B<p;++B)y[B]=n[g[B]];return y},enumerable:!0});f.pointer=function(y,B,A,z){y=y||a.FLOAT;B=!!B;A=A||p*p;z=z||0;for(var E=0;E<p;++E){var C=n[g[E]];a.vertexAttribPointer(C,p,y,B,A,z+E*p);a.enableVertexAttribArray(C)}};var v=Array(p),w=a["vertexAttrib"+p+"fv"];Object.defineProperty(d,e,{set:function(y){for(var B=0;B<p;++B){var A=n[g[B]];a.disableVertexAttribArray(A);if(Array.isArray(y[0]))w.call(a,
A,y[B]);else{for(var z=0;z<p;++z)v[z]=y[p*B+z];w.call(a,A,v)}}return y},get:function(){return f},enumerable:!0})}N.exports=function(a,h,g,n){for(var p={},d=0,e=g.length;d<e;++d){var f=g[d],k=f.name,t=f.type;f=f.locations;switch(t){case "bool":case "int":case "float":q(a,h,f[0],n,1,p,k);break;default:if(0<=t.indexOf("vec")){var v=t.charCodeAt(t.length-1)-48;if(2>v||4<v)throw new l("","Invalid data type for attribute "+k+": "+t);q(a,h,f[0],n,v,p,k)}else if(0<=t.indexOf("mat")){v=t.charCodeAt(t.length-
1)-48;if(2>v||4<v)throw new l("","Invalid data type for attribute "+k+": "+t);m(a,h,f,n,v,p,k)}else throw new l("","Unknown data type for attribute "+k+": "+t);}}return p};var l=b("./GLError");b=r.prototype;b.pointer=function(a,h,g,n){var p=this._gl,d=this._locations[this._index];p.vertexAttribPointer(d,this._dimension,a||p.FLOAT,!!h,g||0,n||0);p.enableVertexAttribArray(d)};b.set=function(a,h,g,n){return this._constFunc(this._locations[this._index],a,h,g,n)};Object.defineProperty(b,"location",{get:function(){return this._locations[this._index]},
set:function(a){a!==this._locations[this._index]&&(this._locations[this._index]=a|0,this._wrapper.program=null);return a|0}})},{"./GLError":336}],338:[function(b,N,I){function r(a){return(new Function("y","return function(){return y}"))(a)}function q(a,h){for(var g=Array(a),n=0;n<a;++n)g[n]=h;return g}var m=b("./reflect"),l=b("./GLError");N.exports=function(a,h,g,n){function p(w,y,B){switch(B){case "bool":case "int":case "sampler2D":case "samplerCube":return"gl.uniform1i(locations["+y+"],obj"+w+")";
case "float":return"gl.uniform1f(locations["+y+"],obj"+w+")";default:var A=B.indexOf("vec");if(0<=A&&1>=A&&B.length===4+A){A=B.charCodeAt(B.length-1)-48;if(2>A||4<A)throw new l("","Invalid data type");switch(B.charAt(0)){case "b":case "i":return"gl.uniform"+A+"iv(locations["+y+"],obj"+w+")";case "v":return"gl.uniform"+A+"fv(locations["+y+"],obj"+w+")";default:throw new l("","Unrecognized data type for vector "+name+": "+B);}}else{if(0===B.indexOf("mat")&&4===B.length){A=B.charCodeAt(B.length-1)-48;
if(2>A||4<A)throw new l("","Invalid uniform dimension type for matrix "+name+": "+B);return"gl.uniformMatrix"+A+"fv(locations["+y+"],false,obj"+w+")"}throw new l("","Unknown uniform data type for "+name+": "+B);}}}function d(w,y){if("object"!==typeof y)return[[w,y]];var B=[],A;for(A in y){var z=y[A],E=w;E=parseInt(A)+""===A?E+("["+A+"]"):E+("."+A);"object"===typeof z?B.push.apply(B,d(E,z)):B.push([E,z])}return B}function e(w){var y=["return function updateProperty(obj){"];w=d("",w);for(var B=0;B<
w.length;++B){var A=w[B],z=A[0];A=A[1];n[A]&&y.push(p(z,A,g[A].type))}y.push("return obj}");return(new Function("gl","locations",y.join("\n")))(a,n)}function f(w){switch(w){case "bool":return!1;case "int":case "sampler2D":case "samplerCube":return 0;case "float":return 0;default:var y=w.indexOf("vec");if(0<=y&&1>=y&&w.length===4+y){y=w.charCodeAt(w.length-1)-48;if(2>y||4<y)throw new l("","Invalid data type");return"b"===w.charAt(0)?q(y,!1):q(y,0)}if(0===w.indexOf("mat")&&4===w.length){y=w.charCodeAt(w.length-
1)-48;if(2>y||4<y)throw new l("","Invalid uniform dimension type for matrix "+name+": "+w);return q(y*y,0)}throw new l("","Unknown uniform data type for "+name+": "+w);}}function k(w,y,B){if("object"===typeof B){var A=t(B);Object.defineProperty(w,y,{get:r(A),set:e(B),enumerable:!0,configurable:!1})}else if(n[B]){A=Object;var z=A.defineProperty;var E=(new Function("gl","wrapper","locations","return function(){return gl.getUniform(wrapper.program,locations["+B+"])}"))(a,h,n);z.call(A,w,y,{get:E,set:e(B),
enumerable:!0,configurable:!1})}else w[y]=f(g[B].type)}function t(w){if(Array.isArray(w)){var y=Array(w.length);for(var B=0;B<w.length;++B)k(y,B,w[B])}else for(B in y={},w)k(y,B,w[B]);return y}var v=m(g,!0);return{get:r(t(v)),set:e(v),enumerable:!0,configurable:!0}}},{"./GLError":336,"./reflect":339}],339:[function(b,N,I){N.exports=function(r,q){for(var m={},l=0;l<r.length;++l)for(var a=r[l].name.split("."),h=m,g=0;g<a.length;++g){var n=a[g].split("[");if(1<n.length){n[0]in h||(h[n[0]]=[]);h=h[n[0]];
for(var p=1;p<n.length;++p){var d=parseInt(n[p]);p<n.length-1||g<a.length-1?(d in h||(h[d]=p<n.length-1?[]:{}),h=h[d]):h[d]=q?l:r[l].type}}else g<a.length-1?(n[0]in h||(h[n[0]]={}),h=h[n[0]]):h[n[0]]=q?l:r[l].type}return m}},{}],340:[function(b,N,I){function r(l,a){if(!m){var h=Object.keys(q);m={};for(var g=0;g<h.length;++g){var n=h[g];m[l[n]]=q[n]}}return m[a]}I.uniforms=function(l,a){for(var h=l.getProgramParameter(a,l.ACTIVE_UNIFORMS),g=[],n=0;n<h;++n){var p=l.getActiveUniform(a,n);if(p){var d=
r(l,p.type);if(1<p.size)for(var e=0;e<p.size;++e)g.push({name:p.name.replace("[0]","["+e+"]"),type:d});else g.push({name:p.name,type:d})}}return g};I.attributes=function(l,a){for(var h=l.getProgramParameter(a,l.ACTIVE_ATTRIBUTES),g=[],n=0;n<h;++n){var p=l.getActiveAttrib(a,n);p&&g.push({name:p.name,type:r(l,p.type)})}return g};var q={FLOAT:"float",FLOAT_VEC2:"vec2",FLOAT_VEC3:"vec3",FLOAT_VEC4:"vec4",INT:"int",INT_VEC2:"ivec2",INT_VEC3:"ivec3",INT_VEC4:"ivec4",BOOL:"bool",BOOL_VEC2:"bvec2",BOOL_VEC3:"bvec3",
BOOL_VEC4:"bvec4",FLOAT_MAT2:"mat2",FLOAT_MAT3:"mat3",FLOAT_MAT4:"mat4",SAMPLER_2D:"sampler2D",SAMPLER_CUBE:"samplerCube"},m=null},{}],341:[function(b,N,I){function r(n,p,d,e,f,k,t){this.id=n;this.src=p;this.type=d;this.shader=e;this.count=k;this.programs=[];this.cache=t}function q(n){this.gl=n;this.shaders=[{},{}];this.programs={}}function m(n){var p=h.get(n);p||(p=new q(n),h.set(n,p));return p}I.shader=function(n,p,d){return m(n).getShaderReference(p,d)};I.program=function(n,p,d,e,f){return m(n).getProgram(p,
d,e,f)};var l=b("./GLError"),a=b("gl-format-compiler-error"),h=new ("undefined"===typeof WeakMap?b("weakmap-shim"):WeakMap),g=0;r.prototype.dispose=function(){if(0===--this.count){for(var n=this.cache,p=n.gl,d=this.programs,e=0,f=d.length;e<f;++e){var k=n.programs[d[e]];k&&(delete n.programs[e],p.deleteProgram(k))}p.deleteShader(this.shader);delete n.shaders[this.type===p.FRAGMENT_SHADER|0][this.src]}};b=q.prototype;b.getShaderReference=function(n,p){var d=this.gl,e=this.shaders[n===d.FRAGMENT_SHADER|
0],f=e[p];if(f&&d.isShader(f.shader))f.count+=1;else{f=d.createShader(n);d.shaderSource(f,p);d.compileShader(f);if(!d.getShaderParameter(f,d.COMPILE_STATUS)){d=d.getShaderInfoLog(f);try{var k=a(d,p,n)}catch(t){throw console.warn("Failed to format compiler error: "+t),new l(d,"Error compiling shader:\n"+d);}throw new l(d,k.short,k.long);}f=e[p]=new r(g++,p,n,f,[],1,this)}return f};b.getProgram=function(n,p,d,e){var f=[n.id,p.id,d.join(":"),e.join(":")].join("@"),k=this.programs[f];if(!k||!this.gl.isProgram(k)){k=
this.programs;var t=this.gl,v=n.shader,w=p.shader,y=t.createProgram();t.attachShader(y,v);t.attachShader(y,w);for(v=0;v<d.length;++v)t.bindAttribLocation(y,e[v],d[v]);t.linkProgram(y);if(!t.getProgramParameter(y,t.LINK_STATUS))throw n=t.getProgramInfoLog(y),new l(n,"Error linking program: "+n);k[f]=k=y;n.programs.push(f);p.programs.push(f)}return k}},{"./GLError":336,"gl-format-compiler-error":270,"weakmap-shim":605}],342:[function(b,N,I){function r(q){this.plot=q;this.enable=[!0,!0,!1,!1];this.width=
[1,1,1,1];this.color=[[0,0,0,1],[0,0,0,1],[0,0,0,1],[0,0,0,1]];this.center=[Infinity,Infinity]}N.exports=function(q,m){var l=new r(q);l.update(m);q.addOverlay(l);return l};b=r.prototype;b.update=function(q){q=q||{};this.enable=(q.enable||[!0,!0,!1,!1]).slice();this.width=(q.width||[1,1,1,1]).slice();this.color=(q.color||[[0,0,0,1],[0,0,0,1],[0,0,0,1],[0,0,0,1]]).map(function(m){return m.slice()});this.center=(q.center||[Infinity,Infinity]).slice();this.plot.setOverlayDirty()};b.draw=function(){var q=
this.enable,m=this.width,l=this.color,a=this.center,h=this.plot,g=h.line,n=h.dataBox;h=h.viewBox;g.bind();if(n[0]<=a[0]&&a[0]<=n[2]&&n[1]<=a[1]&&a[1]<=n[3]){var p=h[0]+(a[0]-n[0])/(n[2]-n[0])*(h[2]-h[0]);a=h[1]+(a[1]-n[1])/(n[3]-n[1])*(h[3]-h[1]);q[0]&&g.drawLine(p,a,h[0],a,m[0],l[0]);q[1]&&g.drawLine(p,a,p,h[1],m[1],l[1]);q[2]&&g.drawLine(p,a,h[2],a,m[2],l[2]);q[3]&&g.drawLine(p,a,p,h[3],m[3],l[3])}};b.dispose=function(){this.plot.removeOverlay(this)}},{}],343:[function(b,N,I){arguments[4][257][0].apply(I,
arguments)},{dup:257}],344:[function(b,N,I){I=b("glslify");var r=b("gl-shader"),q=I(["precision mediump float;\n#define GLSLIFY 1\n\nattribute vec3 position, color;\nattribute float weight;\n\nuniform mat4 model, view, projection;\nuniform vec3 coordinates[3];\nuniform vec4 colors[3];\nuniform vec2 screenShape;\nuniform float lineWidth;\n\nvarying vec4 fragColor;\n\nvoid main() {\n  vec3 vertexPosition \x3d mix(coordinates[0],\n    mix(coordinates[2], coordinates[1], 0.5 * (position + 1.0)), abs(position));\n\n  vec4 clipPos \x3d projection * view * model * vec4(vertexPosition, 1.0);\n  vec2 clipOffset \x3d (projection * view * model * vec4(color, 0.0)).xy;\n  vec2 delta \x3d weight * clipOffset * screenShape;\n  vec2 lineOffset \x3d normalize(vec2(delta.y, -delta.x)) / screenShape;\n\n  gl_Position   \x3d vec4(clipPos.xy + clipPos.w * 0.5 * lineWidth * lineOffset, clipPos.z, clipPos.w);\n  fragColor     \x3d color.x * colors[0] + color.y * colors[1] + color.z * colors[2];\n}\n"]),
m=I(["precision mediump float;\n#define GLSLIFY 1\n\nvarying vec4 fragColor;\n\nvoid main() {\n  gl_FragColor \x3d fragColor;\n}"]);N.exports=function(l){return r(l,q,m,null,[{name:"position",type:"vec3"},{name:"color",type:"vec3"},{name:"weight",type:"float"}])}},{"gl-shader":335,glslify:343}],345:[function(b,N,I){function r(p,d,e,f){this.gl=p;this.buffer=d;this.vao=e;this.shader=f;this.pixelRatio=1;this.bounds=[[-1E3,-1E3,-1E3],[1E3,1E3,1E3]];this.position=[0,0,0];this.lineWidth=[2,2,2];this.colors=
[[0,0,0,1],[0,0,0,1],[0,0,0,1]];this.enabled=[!0,!0,!0];this.drawSides=[!0,!0,!0];this.axes=null}var q=b("gl-buffer"),m=b("gl-vao"),l=b("./shaders/index");N.exports=function(p,d){function e(w,y,B,A,z,E){w=[w,y,B,0,0,0,1];w[A+3]=1;w[A]=z;f.push.apply(f,w);w[6]=-1;f.push.apply(f,w);w[A]=E;f.push.apply(f,w);f.push.apply(f,w);w[6]=1;f.push.apply(f,w);w[A]=z;f.push.apply(f,w)}var f=[];e(0,0,0,0,0,1);e(0,0,0,1,0,1);e(0,0,0,2,0,1);e(1,0,0,1,-1,1);e(1,0,0,2,-1,1);e(0,1,0,0,-1,1);e(0,1,0,2,-1,1);e(0,0,1,0,
-1,1);e(0,0,1,1,-1,1);var k=q(p,f),t=m(p,[{type:p.FLOAT,buffer:k,size:3,offset:0,stride:28},{type:p.FLOAT,buffer:k,size:3,offset:12,stride:28},{type:p.FLOAT,buffer:k,size:1,offset:24,stride:28}]),v=l(p);v.attributes.position.location=0;v.attributes.color.location=1;v.attributes.weight.location=2;p=new r(p,k,t,v);p.update(d);return p};var a=[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1];b=r.prototype;var h=[0,0,0],g=[0,0,0],n=[0,0];b.isTransparent=function(){return!1};b.drawTransparent=function(p){};b.draw=function(p){var d=
this.gl,e=this.vao,f=this.shader;e.bind();f.bind();var k=p.model||a,t=p.view||a;p=p.projection||a;if(this.axes)var v=this.axes.lastCubeProps.axis;for(var w=0;3>w;++w)v&&0>v[w]?(h[w]=this.bounds[0][w],g[w]=this.bounds[1][w]):(h[w]=this.bounds[1][w],g[w]=this.bounds[0][w]);n[0]=d.drawingBufferWidth;n[1]=d.drawingBufferHeight;f.uniforms.model=k;f.uniforms.view=t;f.uniforms.projection=p;f.uniforms.coordinates=[this.position,h,g];f.uniforms.colors=this.colors;f.uniforms.screenShape=n;for(w=0;3>w;++w)f.uniforms.lineWidth=
this.lineWidth[w]*this.pixelRatio,this.enabled[w]&&(e.draw(d.TRIANGLES,6,6*w),this.drawSides[w]&&e.draw(d.TRIANGLES,12,18+12*w));e.unbind()};b.update=function(p){p&&("bounds"in p&&(this.bounds=p.bounds),"position"in p&&(this.position=p.position),"lineWidth"in p&&(this.lineWidth=p.lineWidth),"colors"in p&&(this.colors=p.colors),"enabled"in p&&(this.enabled=p.enabled),"drawSides"in p&&(this.drawSides=p.drawSides))};b.dispose=function(){this.vao.dispose();this.buffer.dispose();this.shader.dispose()}},
{"./shaders/index":344,"gl-buffer":259,"gl-vao":358}],346:[function(b,N,I){var r=b("glslify");b=r(["precision highp float;\n\nprecision highp float;\n#define GLSLIFY 1\n\nvec3 getOrthogonalVector(vec3 v) {\n  // Return up-vector for only-z vector.\n  // Return ax + by + cz \x3d 0, a point that lies on the plane that has v as a normal and that isn't (0,0,0).\n  // From the above if-statement we have ||a|| \x3e 0  U  ||b|| \x3e 0.\n  // Assign z \x3d 0, x \x3d -b, y \x3d a:\n  // a*-b + b*a + c*0 \x3d -ba + ba + 0 \x3d 0\n  if (v.x*v.x \x3e v.z*v.z || v.y*v.y \x3e v.z*v.z) {\n    return normalize(vec3(-v.y, v.x, 0.0));\n  } else {\n    return normalize(vec3(0.0, v.z, -v.y));\n  }\n}\n\n// Calculate the tube vertex and normal at the given index.\n//\n// The returned vertex is for a tube ring with its center at origin, radius of length(d), pointing in the direction of d.\n//\n// Each tube segment is made up of a ring of vertices.\n// These vertices are used to make up the triangles of the tube by connecting them together in the vertex array.\n// The indexes of tube segments run from 0 to 8.\n//\nvec3 getTubePosition(vec3 d, float index, out vec3 normal) {\n  float segmentCount \x3d 8.0;\n\n  float angle \x3d 2.0 * 3.14159 * (index / segmentCount);\n\n  vec3 u \x3d getOrthogonalVector(d);\n  vec3 v \x3d normalize(cross(u, d));\n\n  vec3 x \x3d u * cos(angle) * length(d);\n  vec3 y \x3d v * sin(angle) * length(d);\n  vec3 v3 \x3d x + y;\n\n  normal \x3d normalize(v3);\n\n  return v3;\n}\n\nattribute vec4 vector;\nattribute vec4 color, position;\nattribute vec2 uv;\n\nuniform float vectorScale, tubeScale;\nuniform mat4 model, view, projection, inverseModel;\nuniform vec3 eyePosition, lightPosition;\n\nvarying vec3 f_normal, f_lightDirection, f_eyeDirection, f_data, f_position;\nvarying vec4 f_color;\nvarying vec2 f_uv;\n\nvoid main() {\n  // Scale the vector magnitude to stay constant with\n  // model \x26 view changes.\n  vec3 normal;\n  vec3 XYZ \x3d getTubePosition(mat3(model) * (tubeScale * vector.w * normalize(vector.xyz)), position.w, normal);\n  vec4 tubePosition \x3d model * vec4(position.xyz, 1.0) + vec4(XYZ, 0.0);\n\n  //Lighting geometry parameters\n  vec4 cameraCoordinate \x3d view * tubePosition;\n  cameraCoordinate.xyz /\x3d cameraCoordinate.w;\n  f_lightDirection \x3d lightPosition - cameraCoordinate.xyz;\n  f_eyeDirection   \x3d eyePosition - cameraCoordinate.xyz;\n  f_normal \x3d normalize((vec4(normal, 0.0) * inverseModel).xyz);\n\n  // vec4 m_position  \x3d model * vec4(tubePosition, 1.0);\n  vec4 t_position  \x3d view * tubePosition;\n  gl_Position      \x3d projection * t_position;\n\n  f_color          \x3d color;\n  f_data           \x3d tubePosition.xyz;\n  f_position       \x3d position.xyz;\n  f_uv             \x3d uv;\n}\n"]);
N=r(["#extension GL_OES_standard_derivatives : enable\n\nprecision highp float;\n#define GLSLIFY 1\n\nfloat beckmannDistribution(float x, float roughness) {\n  float NdotH \x3d max(x, 0.0001);\n  float cos2Alpha \x3d NdotH * NdotH;\n  float tan2Alpha \x3d (cos2Alpha - 1.0) / cos2Alpha;\n  float roughness2 \x3d roughness * roughness;\n  float denom \x3d 3.141592653589793 * roughness2 * cos2Alpha * cos2Alpha;\n  return exp(tan2Alpha / roughness2) / denom;\n}\n\nfloat cookTorranceSpecular(\n  vec3 lightDirection,\n  vec3 viewDirection,\n  vec3 surfaceNormal,\n  float roughness,\n  float fresnel) {\n\n  float VdotN \x3d max(dot(viewDirection, surfaceNormal), 0.0);\n  float LdotN \x3d max(dot(lightDirection, surfaceNormal), 0.0);\n\n  //Half angle vector\n  vec3 H \x3d normalize(lightDirection + viewDirection);\n\n  //Geometric term\n  float NdotH \x3d max(dot(surfaceNormal, H), 0.0);\n  float VdotH \x3d max(dot(viewDirection, H), 0.000001);\n  float LdotH \x3d max(dot(lightDirection, H), 0.000001);\n  float G1 \x3d (2.0 * NdotH * VdotN) / VdotH;\n  float G2 \x3d (2.0 * NdotH * LdotN) / LdotH;\n  float G \x3d min(1.0, min(G1, G2));\n  \n  //Distribution term\n  float D \x3d beckmannDistribution(NdotH, roughness);\n\n  //Fresnel term\n  float F \x3d pow(1.0 - VdotN, fresnel);\n\n  //Multiply terms and done\n  return  G * F * D / max(3.14159265 * VdotN, 0.000001);\n}\n\nbool outOfRange(float a, float b, float p) {\n  return ((p \x3e max(a, b)) || \n          (p \x3c min(a, b)));\n}\n\nbool outOfRange(vec2 a, vec2 b, vec2 p) {\n  return (outOfRange(a.x, b.x, p.x) ||\n          outOfRange(a.y, b.y, p.y));\n}\n\nbool outOfRange(vec3 a, vec3 b, vec3 p) {\n  return (outOfRange(a.x, b.x, p.x) ||\n          outOfRange(a.y, b.y, p.y) ||\n          outOfRange(a.z, b.z, p.z));\n}\n\nbool outOfRange(vec4 a, vec4 b, vec4 p) {\n  return outOfRange(a.xyz, b.xyz, p.xyz);\n}\n\nuniform vec3 clipBounds[2];\nuniform float roughness, fresnel, kambient, kdiffuse, kspecular, opacity;\nuniform sampler2D texture;\n\nvarying vec3 f_normal, f_lightDirection, f_eyeDirection, f_data, f_position;\nvarying vec4 f_color;\nvarying vec2 f_uv;\n\nvoid main() {\n  if (outOfRange(clipBounds[0], clipBounds[1], f_position)) discard;\n  vec3 N \x3d normalize(f_normal);\n  vec3 L \x3d normalize(f_lightDirection);\n  vec3 V \x3d normalize(f_eyeDirection);\n\n  if(gl_FrontFacing) {\n    N \x3d -N;\n  }\n\n  float specular \x3d min(1.0, max(0.0, cookTorranceSpecular(L, V, N, roughness, fresnel)));\n  float diffuse  \x3d min(kambient + kdiffuse * max(dot(N, L), 0.0), 1.0);\n\n  vec4 surfaceColor \x3d f_color * texture2D(texture, f_uv);\n  vec4 litColor \x3d surfaceColor.a * vec4(diffuse * surfaceColor.rgb + kspecular * vec3(1,1,1) * specular,  1.0);\n\n  gl_FragColor \x3d litColor * opacity;\n}\n"]);
var q=r(["precision highp float;\n\nprecision highp float;\n#define GLSLIFY 1\n\nvec3 getOrthogonalVector(vec3 v) {\n  // Return up-vector for only-z vector.\n  // Return ax + by + cz \x3d 0, a point that lies on the plane that has v as a normal and that isn't (0,0,0).\n  // From the above if-statement we have ||a|| \x3e 0  U  ||b|| \x3e 0.\n  // Assign z \x3d 0, x \x3d -b, y \x3d a:\n  // a*-b + b*a + c*0 \x3d -ba + ba + 0 \x3d 0\n  if (v.x*v.x \x3e v.z*v.z || v.y*v.y \x3e v.z*v.z) {\n    return normalize(vec3(-v.y, v.x, 0.0));\n  } else {\n    return normalize(vec3(0.0, v.z, -v.y));\n  }\n}\n\n// Calculate the tube vertex and normal at the given index.\n//\n// The returned vertex is for a tube ring with its center at origin, radius of length(d), pointing in the direction of d.\n//\n// Each tube segment is made up of a ring of vertices.\n// These vertices are used to make up the triangles of the tube by connecting them together in the vertex array.\n// The indexes of tube segments run from 0 to 8.\n//\nvec3 getTubePosition(vec3 d, float index, out vec3 normal) {\n  float segmentCount \x3d 8.0;\n\n  float angle \x3d 2.0 * 3.14159 * (index / segmentCount);\n\n  vec3 u \x3d getOrthogonalVector(d);\n  vec3 v \x3d normalize(cross(u, d));\n\n  vec3 x \x3d u * cos(angle) * length(d);\n  vec3 y \x3d v * sin(angle) * length(d);\n  vec3 v3 \x3d x + y;\n\n  normal \x3d normalize(v3);\n\n  return v3;\n}\n\nattribute vec4 vector;\nattribute vec4 position;\nattribute vec4 id;\n\nuniform mat4 model, view, projection;\nuniform float tubeScale;\n\nvarying vec3 f_position;\nvarying vec4 f_id;\n\nvoid main() {\n  vec3 normal;\n  vec3 XYZ \x3d getTubePosition(mat3(model) * (tubeScale * vector.w * normalize(vector.xyz)), position.w, normal);\n  vec4 tubePosition \x3d model * vec4(position.xyz, 1.0) + vec4(XYZ, 0.0);\n\n  gl_Position \x3d projection * view * tubePosition;\n  f_id        \x3d id;\n  f_position  \x3d position.xyz;\n}\n"]);
r=r(["precision highp float;\n#define GLSLIFY 1\n\nbool outOfRange(float a, float b, float p) {\n  return ((p \x3e max(a, b)) || \n          (p \x3c min(a, b)));\n}\n\nbool outOfRange(vec2 a, vec2 b, vec2 p) {\n  return (outOfRange(a.x, b.x, p.x) ||\n          outOfRange(a.y, b.y, p.y));\n}\n\nbool outOfRange(vec3 a, vec3 b, vec3 p) {\n  return (outOfRange(a.x, b.x, p.x) ||\n          outOfRange(a.y, b.y, p.y) ||\n          outOfRange(a.z, b.z, p.z));\n}\n\nbool outOfRange(vec4 a, vec4 b, vec4 p) {\n  return outOfRange(a.xyz, b.xyz, p.xyz);\n}\n\nuniform vec3  clipBounds[2];\nuniform float pickId;\n\nvarying vec3 f_position;\nvarying vec4 f_id;\n\nvoid main() {\n  if (outOfRange(clipBounds[0], clipBounds[1], f_position)) discard;\n\n  gl_FragColor \x3d vec4(pickId, f_id.xyz);\n}"]);
I.meshShader={vertex:b,fragment:N,attributes:[{name:"position",type:"vec4"},{name:"color",type:"vec4"},{name:"uv",type:"vec2"},{name:"vector",type:"vec4"}]};I.pickShader={vertex:q,fragment:r,attributes:[{name:"position",type:"vec4"},{name:"id",type:"vec4"},{name:"vector",type:"vec4"}]}},{glslify:347}],347:[function(b,N,I){arguments[4][257][0].apply(I,arguments)},{dup:257}],348:[function(b,N,I){var r=b("gl-vec3"),q=b("gl-vec4"),m="xyz xzy yxz yzx zxy zyx".split(" "),l=function(e,f,k,t){for(var v=0,
w=0;w<e.length;w++)for(var y=e[w].velocities,B=0;B<y.length;B++)v=Math.max(v,r.length(y[B]));e=e.map(function(L){var K=v,H=L.points,Q=L.velocities;L=L.divergences;var M=[],P=[],T=[],O=[],U=[],S=[],X=0;q.create();for(var ba=q.create(),ca=0;ca<H.length;ca++){var ia=H[ca],ja=Q[ca],la=L[ca];0===k&&(la=.05*t);var da=r.length(ja)/K;var oa=q.create();r.copy(oa,ja);oa[3]=la;for(ja=0;8>ja;ja++)U[ja]=[ia[0],ia[1],ia[2],ja];if(0<O.length)for(ja=0;8>ja;ja++)ia=(ja+1)%8,M.push(O[ja],U[ja],U[ia],U[ia],O[ia],O[ja]),
T.push(ba,oa,oa,oa,ba,ba),S.push(X,da,da,da,X,X),ia=M.length,P.push([ia-6,ia-5,ia-4],[ia-3,ia-2,ia-1]);X=O;O=U;U=X;ba=oa;X=da}return{positions:M,cells:P,vectors:T,vertexIntensity:S}});y=[];var A=[],z=[],E=[];for(w=0;w<e.length;w++){var C=e[w],u=y.length;y=y.concat(C.positions);z=z.concat(C.vectors);E=E.concat(C.vertexIntensity);for(B=0;B<C.cells.length;B++){var D=C.cells[B],G=[];A.push(G);for(var J=0;J<D.length;J++)G.push(D[J]+u)}}return{positions:y,cells:A,vectors:z,vertexIntensity:E,colormap:f}},
a=function(e,f){var k=e.length,t;for(t=0;t<k;t++){var v=e[t];if(v===f)break;else if(v>f)return t-1}return t},h=function(e,f,k){return e<f?f:e>k?k:e},g=function(e){var f=Infinity;e.sort(function(w,y){return w-y});for(var k=e.length,t=1;t<k;t++){var v=Math.abs(e[t]-e[t-1]);v<f&&(f=v)}return f},n=function(e){for(var f=[],k=[],t=[],v={},w={},y={},B=e.length,A=0;A<B;A++){var z=e[A],E=z[0],C=z[1];z=z[2];v[E]||(f.push(E),v[E]=!0);w[C]||(k.push(C),w[C]=!0);y[z]||(t.push(z),y[z]=!0)}e=g(f);k=g(k);t=g(t);t=
Math.min(e,k,t);return isFinite(t)?t:1};N.exports=function(e,f){var k=e.startingPositions,t=e.maxLength||1E3,v=e.tubeSize||1,w=e.absoluteTubeSize,y=e.gridFill||"+x+y+z",B,A,z;-1!==y.indexOf("-x")&&(B=!0);-1!==y.indexOf("-y")&&(A=!0);-1!==y.indexOf("-z")&&(z=!0);var E=m.indexOf(y.replace(/-/g,"").replace(/\+/g,""));var C=e.getVelocity||function(sa){var ma=e.vectors,qa=e.meshgrid;var pa=sa[0];var na=sa[1],ka=sa[2];sa=qa[0].length;var ua=qa[1].length,va=qa[2].length,Ca=a(qa[0],pa),Ma=a(qa[1],na),Ua=
a(qa[2],ka),eb=Ca+1,fb=Ma+1,nb=Ua+1;Ca=h(Ca,0,sa-1);eb=h(eb,0,sa-1);Ma=h(Ma,0,ua-1);fb=h(fb,0,ua-1);Ua=h(Ua,0,va-1);nb=h(nb,0,va-1);if(0>Ca||0>Ma||0>Ua||eb>sa-1||fb>ua-1||nb>va-1)pa=r.create();else{var cb=qa[0][Ca],$a=qa[1][Ma],jb=qa[2][Ua];pa=(pa-cb)/(qa[0][eb]-cb);na=(na-$a)/(qa[1][fb]-$a);qa=(ka-jb)/(qa[2][nb]-jb);isFinite(pa)||(pa=.5);isFinite(na)||(na=.5);isFinite(qa)||(qa=.5);B&&(Ca=sa-1-Ca,eb=sa-1-eb);A&&(Ma=ua-1-Ma,fb=ua-1-fb);z&&(Ua=va-1-Ua,nb=va-1-nb);switch(E){case 5:Ma*=va;fb*=va;Ca=Ca*
va*ua;eb=eb*va*ua;break;case 4:Ca*=va;eb*=va;Ma=Ma*va*sa;fb=fb*va*sa;break;case 3:Ua*=ua;nb*=ua;Ca=Ca*ua*va;eb=eb*ua*va;break;case 2:Ca*=ua;eb*=ua;Ua=Ua*ua*sa;nb=nb*ua*sa;break;case 1:Ua*=sa;nb*=sa;Ma=Ma*sa*va;fb=fb*sa*va;break;default:Ma*=sa,fb*=sa,Ua=Ua*sa*ua,nb=nb*sa*ua}sa=ma[Ca+Ma+Ua];ua=ma[Ca+Ma+nb];va=ma[Ca+fb+Ua];Ca=ma[Ca+fb+nb];ka=ma[eb+Ma+Ua];Ma=ma[eb+Ma+nb];Ua=ma[eb+fb+Ua];jb=ma[eb+fb+nb];ma=r.create();eb=r.create();fb=r.create();nb=r.create();r.lerp(ma,sa,ka,pa);r.lerp(eb,ua,Ma,pa);r.lerp(fb,
va,Ua,pa);r.lerp(nb,Ca,jb,pa);pa=r.create();sa=r.create();r.lerp(pa,ma,fb,na);r.lerp(sa,eb,nb,na);na=r.create();r.lerp(na,pa,sa,qa);pa=na}return pa};y=e.getDivergence||function(sa,ma){var qa=r.create();r.add(qa,sa,[1E-4,0,0]);var pa=C(qa);r.subtract(pa,pa,ma);r.scale(pa,pa,1E4);r.add(qa,sa,[0,1E-4,0]);var na=C(qa);r.subtract(na,na,ma);r.scale(na,na,1E4);r.add(qa,sa,[0,0,1E-4]);sa=C(qa);r.subtract(sa,sa,ma);r.scale(sa,sa,1E4);r.add(qa,pa,na);r.add(qa,qa,sa);return qa};var u=[],D=f[0][0],G=f[0][1],
J=f[0][2],L=f[1][0],K=f[1][1],H=f[1][2],Q=function(sa){var ma=sa[0],qa=sa[1];sa=sa[2];return!(ma<D||ma>L||qa<G||qa>K||sa<J||sa>H)},M=10*r.distance(f[0],f[1])/t,P=M*M;f=1;var T=0,O=k.length;1<O&&(f=n(k));for(var U=0;U<O;U++){var S=r.create();r.copy(S,k[U]);var X=[S],ba=[],ca=C(S),ia=S;ba.push(ca);var ja=[],la=y(S,ca);la=r.length(la);isFinite(la)&&la>T&&(T=la);ja.push(la);u.push({points:X,velocities:ba,divergences:ja});for(var da=0;da<100*t&&X.length<t&&Q(S);){da++;var oa=r.clone(ca);ca=r.squaredLength(oa);
if(0===ca)break;else ca>P&&r.scale(oa,oa,M/Math.sqrt(ca));r.add(oa,oa,S);ca=C(oa);r.squaredDistance(ia,oa)-P>-1E-4*P&&(X.push(oa),ia=oa,ba.push(ca),la=y(oa,ca),la=r.length(la),isFinite(la)&&la>T&&(T=la),ja.push(la));S=oa}}k=l(u,e.colormap,T,f);w?k.tubeScale=w:(0===T&&(T=1),k.tubeScale=.5*v*f/T);return k};var p=b("./lib/shaders"),d=b("gl-cone3d").createMesh;N.exports.createTubeMesh=function(e,f){return d(e,f,{shaders:p,traceType:"streamtube"})}},{"./lib/shaders":346,"gl-cone3d":260,"gl-vec3":377,"gl-vec4":413}],
349:[function(b,N,I){var r=b("gl-shader");b=b("glslify");var q=b(["precision highp float;\n#define GLSLIFY 1\n\nattribute vec4 uv;\nattribute vec3 f;\nattribute vec3 normal;\n\nuniform vec3 objectOffset;\nuniform mat4 model, view, projection, inverseModel;\nuniform vec3 lightPosition, eyePosition;\nuniform sampler2D colormap;\n\nvarying float value, kill;\nvarying vec3 worldCoordinate;\nvarying vec2 planeCoordinate;\nvarying vec3 lightDirection, eyeDirection, surfaceNormal;\nvarying vec4 vColor;\n\nvoid main() {\n  vec3 localCoordinate \x3d vec3(uv.zw, f.x);\n  worldCoordinate \x3d objectOffset + localCoordinate;\n  vec4 worldPosition \x3d model * vec4(worldCoordinate, 1.0);\n  vec4 clipPosition \x3d projection * view * worldPosition;\n  gl_Position \x3d clipPosition;\n  kill \x3d f.y;\n  value \x3d f.z;\n  planeCoordinate \x3d uv.xy;\n\n  vColor \x3d texture2D(colormap, vec2(value, value));\n\n  //Lighting geometry parameters\n  vec4 cameraCoordinate \x3d view * worldPosition;\n  cameraCoordinate.xyz /\x3d cameraCoordinate.w;\n  lightDirection \x3d lightPosition - cameraCoordinate.xyz;\n  eyeDirection   \x3d eyePosition - cameraCoordinate.xyz;\n  surfaceNormal  \x3d normalize((vec4(normal,0) * inverseModel).xyz);\n}\n"]),
m=b(["precision highp float;\n#define GLSLIFY 1\n\nfloat beckmannDistribution(float x, float roughness) {\n  float NdotH \x3d max(x, 0.0001);\n  float cos2Alpha \x3d NdotH * NdotH;\n  float tan2Alpha \x3d (cos2Alpha - 1.0) / cos2Alpha;\n  float roughness2 \x3d roughness * roughness;\n  float denom \x3d 3.141592653589793 * roughness2 * cos2Alpha * cos2Alpha;\n  return exp(tan2Alpha / roughness2) / denom;\n}\n\nfloat beckmannSpecular(\n  vec3 lightDirection,\n  vec3 viewDirection,\n  vec3 surfaceNormal,\n  float roughness) {\n  return beckmannDistribution(dot(surfaceNormal, normalize(lightDirection + viewDirection)), roughness);\n}\n\nbool outOfRange(float a, float b, float p) {\n  return ((p \x3e max(a, b)) || \n          (p \x3c min(a, b)));\n}\n\nbool outOfRange(vec2 a, vec2 b, vec2 p) {\n  return (outOfRange(a.x, b.x, p.x) ||\n          outOfRange(a.y, b.y, p.y));\n}\n\nbool outOfRange(vec3 a, vec3 b, vec3 p) {\n  return (outOfRange(a.x, b.x, p.x) ||\n          outOfRange(a.y, b.y, p.y) ||\n          outOfRange(a.z, b.z, p.z));\n}\n\nbool outOfRange(vec4 a, vec4 b, vec4 p) {\n  return outOfRange(a.xyz, b.xyz, p.xyz);\n}\n\nuniform vec3 lowerBound, upperBound;\nuniform float contourTint;\nuniform vec4 contourColor;\nuniform sampler2D colormap;\nuniform vec3 clipBounds[2];\nuniform float roughness, fresnel, kambient, kdiffuse, kspecular, opacity;\nuniform float vertexColor;\n\nvarying float value, kill;\nvarying vec3 worldCoordinate;\nvarying vec3 lightDirection, eyeDirection, surfaceNormal;\nvarying vec4 vColor;\n\nvoid main() {\n  if (\n    kill \x3e 0.0 ||\n    vColor.a \x3d\x3d 0.0 ||\n    outOfRange(clipBounds[0], clipBounds[1], worldCoordinate)\n  ) discard;\n\n  vec3 N \x3d normalize(surfaceNormal);\n  vec3 V \x3d normalize(eyeDirection);\n  vec3 L \x3d normalize(lightDirection);\n\n  if(gl_FrontFacing) {\n    N \x3d -N;\n  }\n\n  float specular \x3d max(beckmannSpecular(L, V, N, roughness), 0.);\n  float diffuse  \x3d min(kambient + kdiffuse * max(dot(N, L), 0.0), 1.0);\n\n  //decide how to interpolate color  in vertex or in fragment\n  vec4 surfaceColor \x3d\n    step(vertexColor, .5) * texture2D(colormap, vec2(value, value)) +\n    step(.5, vertexColor) * vColor;\n\n  vec4 litColor \x3d surfaceColor.a * vec4(diffuse * surfaceColor.rgb + kspecular * vec3(1,1,1) * specular,  1.0);\n\n  gl_FragColor \x3d mix(litColor, contourColor, contourTint) * opacity;\n}\n"]),
l=b(["precision highp float;\n#define GLSLIFY 1\n\nattribute vec4 uv;\nattribute float f;\n\nuniform vec3 objectOffset;\nuniform mat3 permutation;\nuniform mat4 model, view, projection;\nuniform float height, zOffset;\nuniform sampler2D colormap;\n\nvarying float value, kill;\nvarying vec3 worldCoordinate;\nvarying vec2 planeCoordinate;\nvarying vec3 lightDirection, eyeDirection, surfaceNormal;\nvarying vec4 vColor;\n\nvoid main() {\n  vec3 dataCoordinate \x3d permutation * vec3(uv.xy, height);\n  worldCoordinate \x3d objectOffset + dataCoordinate;\n  vec4 worldPosition \x3d model * vec4(worldCoordinate, 1.0);\n\n  vec4 clipPosition \x3d projection * view * worldPosition;\n  clipPosition.z +\x3d zOffset;\n\n  gl_Position \x3d clipPosition;\n  value \x3d f + objectOffset.z;\n  kill \x3d -1.0;\n  planeCoordinate \x3d uv.zw;\n\n  vColor \x3d texture2D(colormap, vec2(value, value));\n\n  //Don't do lighting for contours\n  surfaceNormal   \x3d vec3(1,0,0);\n  eyeDirection    \x3d vec3(0,1,0);\n  lightDirection  \x3d vec3(0,0,1);\n}\n"]),
a=b(["precision highp float;\n#define GLSLIFY 1\n\nbool outOfRange(float a, float b, float p) {\n  return ((p \x3e max(a, b)) || \n          (p \x3c min(a, b)));\n}\n\nbool outOfRange(vec2 a, vec2 b, vec2 p) {\n  return (outOfRange(a.x, b.x, p.x) ||\n          outOfRange(a.y, b.y, p.y));\n}\n\nbool outOfRange(vec3 a, vec3 b, vec3 p) {\n  return (outOfRange(a.x, b.x, p.x) ||\n          outOfRange(a.y, b.y, p.y) ||\n          outOfRange(a.z, b.z, p.z));\n}\n\nbool outOfRange(vec4 a, vec4 b, vec4 p) {\n  return outOfRange(a.xyz, b.xyz, p.xyz);\n}\n\nuniform vec2 shape;\nuniform vec3 clipBounds[2];\nuniform float pickId;\n\nvarying float value, kill;\nvarying vec3 worldCoordinate;\nvarying vec2 planeCoordinate;\nvarying vec3 surfaceNormal;\n\nvec2 splitFloat(float v) {\n  float vh \x3d 255.0 * v;\n  float upper \x3d floor(vh);\n  float lower \x3d fract(vh);\n  return vec2(upper / 255.0, floor(lower * 16.0) / 16.0);\n}\n\nvoid main() {\n  if ((kill \x3e 0.0) ||\n      (outOfRange(clipBounds[0], clipBounds[1], worldCoordinate))) discard;\n\n  vec2 ux \x3d splitFloat(planeCoordinate.x / shape.x);\n  vec2 uy \x3d splitFloat(planeCoordinate.y / shape.y);\n  gl_FragColor \x3d vec4(pickId, ux.x, uy.x, ux.y + (uy.y/16.0));\n}\n"]);
I.createShader=function(h){h=r(h,q,m,null,[{name:"uv",type:"vec4"},{name:"f",type:"vec3"},{name:"normal",type:"vec3"}]);h.attributes.uv.location=0;h.attributes.f.location=1;h.attributes.normal.location=2;return h};I.createPickShader=function(h){h=r(h,q,a,null,[{name:"uv",type:"vec4"},{name:"f",type:"vec3"},{name:"normal",type:"vec3"}]);h.attributes.uv.location=0;h.attributes.f.location=1;h.attributes.normal.location=2;return h};I.createContourShader=function(h){h=r(h,l,m,null,[{name:"uv",type:"vec4"},
{name:"f",type:"float"}]);h.attributes.uv.location=0;h.attributes.f.location=1;return h};I.createPickContourShader=function(h){h=r(h,l,a,null,[{name:"uv",type:"vec4"},{name:"f",type:"float"}]);h.attributes.uv.location=0;h.attributes.f.location=1;return h}},{"gl-shader":335,glslify:350}],350:[function(b,N,I){arguments[4][257][0].apply(I,arguments)},{dup:257}],351:[function(b,N,I){function r(ba,ca,ia,ja,la){this.position=ba;this.index=ca;this.uv=ia;this.level=ja;this.dataCoordinate=la}function q(ba,
ca,ia,ja,la,da,oa,sa,ma,qa,pa,na,ka,ua,va){this.gl=ba;this.shape=ca;this.bounds=ia;this.objectOffset=va;this.intensityBounds=[];this._shader=ja;this._pickShader=la;this._coordinateBuffer=da;this._vao=oa;this._colorMap=sa;this._contourShader=ma;this._contourPickShader=qa;this._contourBuffer=pa;this._contourVAO=na;this._contourOffsets=[[],[],[]];this._contourCounts=[[],[],[]];this._vertexCount=0;this._pickResult=new r([0,0,0],[0,0],[0,0],[0,0,0],[0,0,0]);this._dynamicBuffer=ka;this._dynamicVAO=ua;this._dynamicOffsets=
[0,0,0];this._dynamicCounts=[0,0,0];this.contourWidth=[1,1,1];this.contourLevels=[[1],[1],[1]];this.contourTint=[0,0,0];this.contourColor=[[.5,.5,.5,1],[.5,.5,.5,1],[.5,.5,.5,1]];this.showSurface=this.showContour=!0;this.enableHighlight=[!0,!0,!0];this.highlightColor=[[0,0,0,1],[0,0,0,1],[0,0,0,1]];this.highlightTint=[1,1,1];this.highlightLevel=[-1,-1,-1];this.enableDynamic=[!0,!0,!0];this.dynamicLevel=[NaN,NaN,NaN];this.dynamicColor=[[0,0,0,1],[0,0,0,1],[0,0,0,1]];this.dynamicTint=[1,1,1];this.dynamicWidth=
[1,1,1];this.axesBounds=[[Infinity,Infinity,Infinity],[-Infinity,-Infinity,-Infinity]];this.surfaceProject=[!1,!1,!1];this.contourProject=[[!1,!1,!1],[!1,!1,!1],[!1,!1,!1]];this.colorBounds=[!1,!1];this._field=[y(k.mallocFloat(1024),[0,0]),y(k.mallocFloat(1024),[0,0]),y(k.mallocFloat(1024),[0,0])];this.pickId=1;this.clipBounds=[[-Infinity,-Infinity,-Infinity],[Infinity,Infinity,Infinity]];this.snapToData=!1;this.opacity=this.pixelRatio=1;this.lightPosition=[10,1E4,0];this.diffuseLight=this.ambientLight=
.8;this.specularLight=2;this.roughness=.5;this.fresnel=1.5;this.vertexColor=0;this.dirty=!0}function m(ba,ca){if(!ca||!ca.length)return 1;for(var ia=0;ia<ca.length&&!(2>ca.length);++ia){if(ca[ia][0]===ba)return ca[ia][1];if(ca[ia][0]>ba&&0<ia)return ba=(ca[ia][0]-ba)/(ca[ia][0]-ca[ia-1][0]),ca[ia][1]*(1-ba)+ba*ca[ia-1][1]}return 1}function l(ba,ca){var ia,ja,la=ca.axes&&ca.axes.lastCubeProps.axis||P,da=ca.showSurface,oa=ca.showContour;for(ia=0;3>ia;++ia)for(da=da||ca.surfaceProject[ia],ja=0;3>ja;++ja)oa=
oa||ca.contourProject[ia][ja];for(ia=0;3>ia;++ia){var sa=T.projections[ia];for(ja=0;16>ja;++ja)sa[ja]=0;for(ja=0;4>ja;++ja)sa[5*ja]=1;sa[5*ia]=0;sa[12+ia]=ca.axesBounds[+(0<la[ia])][ia];A(sa,ba.model,sa);var ma=T.clipBounds[ia];for(sa=0;2>sa;++sa)for(ja=0;3>ja;++ja)ma[sa][ja]=ba.clipBounds[sa][ja];ma[0][ia]=-1E8;ma[1][ia]=1E8}T.showSurface=da;T.showContour=oa;return T}function a(ba,ca){ba=ba||{};ca=this.gl;ca.disable(ca.CULL_FACE);this._colorMap.bind(0);var ia=O;ia.model=ba.model||K;ia.view=ba.view||
K;ia.projection=ba.projection||K;ia.lowerBound=[this.bounds[0][0],this.bounds[0][1],this.colorBounds[0]||this.bounds[0][2]];ia.upperBound=[this.bounds[1][0],this.bounds[1][1],this.colorBounds[1]||this.bounds[1][2]];ia.objectOffset=this.objectOffset;ia.contourColor=this.contourColor[0];ia.inverseModel=z(ia.inverseModel,ia.model);for(ba=0;2>ba;++ba)for(var ja=ia.clipBounds[ba],la=0;3>la;++la)ja[la]=Math.min(Math.max(this.clipBounds[ba][la],-1E8),1E8);ia.kambient=this.ambientLight;ia.kdiffuse=this.diffuseLight;
ia.kspecular=this.specularLight;ia.roughness=this.roughness;ia.fresnel=this.fresnel;ia.opacity=this.opacity;ia.height=0;ia.permutation=S;ia.vertexColor=this.vertexColor;ja=U;A(ja,ia.view,ia.model);A(ja,ia.projection,ja);z(ja,ja);for(ba=0;3>ba;++ba)ia.eyePosition[ba]=ja[12+ba]/ja[15];var da=ja[15];for(ba=0;3>ba;++ba)da+=this.lightPosition[ba]*ja[4*ba+3];for(ba=0;3>ba;++ba){var oa=ja[12+ba];for(la=0;3>la;++la)oa+=ja[4*la+ba]*this.lightPosition[la];ia.lightPosition[ba]=oa/da}ja=l(ia,this);if(ja.showSurface){this._shader.bind();
this._shader.uniforms=ia;this._vao.bind();this.showSurface&&this._vertexCount&&this._vao.draw(ca.TRIANGLES,this._vertexCount);for(ba=0;3>ba;++ba)this.surfaceProject[ba]&&this.vertexCount&&(this._shader.uniforms.model=ja.projections[ba],this._shader.uniforms.clipBounds=ja.clipBounds[ba],this._vao.draw(ca.TRIANGLES,this._vertexCount));this._vao.unbind()}if(ja.showContour){da=this._contourShader;ia.kambient=1;ia.kdiffuse=0;ia.kspecular=0;ia.opacity=1;da.bind();da.uniforms=ia;oa=this._contourVAO;oa.bind();
for(ba=0;3>ba;++ba)for(da.uniforms.permutation=Q[ba],ca.lineWidth(this.contourWidth[ba]*this.pixelRatio),la=0;la<this.contourLevels[ba].length;++la){if(la===this.highlightLevel[ba])da.uniforms.contourColor=this.highlightColor[ba],da.uniforms.contourTint=this.highlightTint[ba];else if(0===la||la-1===this.highlightLevel[ba])da.uniforms.contourColor=this.contourColor[ba],da.uniforms.contourTint=this.contourTint[ba];this._contourCounts[ba][la]&&(da.uniforms.height=this.contourLevels[ba][la],oa.draw(ca.LINES,
this._contourCounts[ba][la],this._contourOffsets[ba][la]))}for(ba=0;3>ba;++ba)for(da.uniforms.model=ja.projections[ba],da.uniforms.clipBounds=ja.clipBounds[ba],la=0;3>la;++la)if(this.contourProject[ba][la]){da.uniforms.permutation=Q[la];ca.lineWidth(this.contourWidth[la]*this.pixelRatio);for(var sa=0;sa<this.contourLevels[la].length;++sa){if(sa===this.highlightLevel[la])da.uniforms.contourColor=this.highlightColor[la],da.uniforms.contourTint=this.highlightTint[la];else if(0===sa||sa-1===this.highlightLevel[la])da.uniforms.contourColor=
this.contourColor[la],da.uniforms.contourTint=this.contourTint[la];this._contourCounts[la][sa]&&(da.uniforms.height=this.contourLevels[la][sa],oa.draw(ca.LINES,this._contourCounts[la][sa],this._contourOffsets[la][sa]))}}oa.unbind();oa=this._dynamicVAO;oa.bind();for(ba=0;3>ba;++ba)if(0!==this._dynamicCounts[ba])for(da.uniforms.model=ia.model,da.uniforms.clipBounds=ia.clipBounds,da.uniforms.permutation=Q[ba],ca.lineWidth(this.dynamicWidth[ba]*this.pixelRatio),da.uniforms.contourColor=this.dynamicColor[ba],
da.uniforms.contourTint=this.dynamicTint[ba],da.uniforms.height=this.dynamicLevel[ba],oa.draw(ca.LINES,this._dynamicCounts[ba],this._dynamicOffsets[ba]),la=0;3>la;++la)this.contourProject[la][ba]&&(da.uniforms.model=ja.projections[la],da.uniforms.clipBounds=ja.clipBounds[la],oa.draw(ca.LINES,this._dynamicCounts[ba],this._dynamicOffsets[ba]));oa.unbind()}}function h(ba,ca){return Array.isArray(ba)?[ca(ba[0]),ca(ba[1]),ca(ba[2])]:[ca(ba),ca(ba),ca(ba)]}function g(ba){return Array.isArray(ba)?3===ba.length?
[ba[0],ba[1],ba[2],1]:[ba[0],ba[1],ba[2],ba[3]]:[0,0,0,1]}function n(ba){if(Array.isArray(ba)){if(Array.isArray(ba))return[g(ba[0]),g(ba[1]),g(ba[2])];ba=g(ba);return[ba.slice(),ba.slice(),ba.slice()]}}N.exports=function(ba){var ca=ba.gl,ia=u(ca),ja=G(ca),la=D(ca),da=J(ca),oa=d(ca),sa=e(ca,[{buffer:oa,size:4,stride:L,offset:0},{buffer:oa,size:3,stride:L,offset:16},{buffer:oa,size:3,stride:L,offset:28}]),ma=d(ca),qa=e(ca,[{buffer:ma,size:4,stride:20,offset:0},{buffer:ma,size:1,stride:20,offset:16}]),
pa=d(ca),na=e(ca,[{buffer:pa,size:2,type:ca.FLOAT}]),ka=f(ca,1,M,ca.RGBA,ca.UNSIGNED_BYTE);ka.minFilter=ca.LINEAR;ka.magFilter=ca.LINEAR;ca=new q(ca,[0,0],[[0,0,0],[0,0,0]],ia,ja,oa,sa,ka,la,da,ma,qa,pa,na,[0,0,0]);ia={levels:[[],[],[]]};for(var ua in ba)ia[ua]=ba[ua];ia.colormap=ia.colormap||"jet";ca.update(ia);return ca};var p=b("bit-twiddle"),d=b("gl-buffer"),e=b("gl-vao"),f=b("gl-texture2d"),k=b("typedarray-pool"),t=b("colormap"),v=b("ndarray-ops"),w=b("ndarray-pack"),y=b("ndarray"),B=b("surface-nets"),
A=b("gl-mat4/multiply"),z=b("gl-mat4/invert"),E=b("binary-search-bounds"),C=b("ndarray-gradient");b=b("./lib/shaders");var u=b.createShader,D=b.createContourShader,G=b.createPickShader,J=b.createPickContourShader,L=40,K=[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1],H=[[0,0],[0,1],[1,0],[1,1],[1,0],[0,1]],Q=[[0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0]];(function(){for(var ba=0;3>ba;++ba){var ca=Q[ba],ia=(ba+2)%3;ca[(ba+1)%3]=1;ca[ia+3]=1;ca[ba+6]=1}})();var M=256;b=q.prototype;b.genColormap=function(ba,
ca){var ia=!1;ba=w([t({colormap:ba,nshades:M,format:"rgba"}).map(function(ja,la){la=ca?m(la/255,ca):ja[3];1>la&&(ia=!0);return[ja[0],ja[1],ja[2],255*la]})]);v.divseq(ba,255);this.hasAlphaScale=ia;return ba};b.isTransparent=function(){return 1>this.opacity||this.hasAlphaScale};b.isOpaque=function(){return!this.isTransparent()};b.pickSlots=1;b.setPickBase=function(ba){this.pickId=ba};var P=[0,0,0],T={showSurface:!1,showContour:!1,projections:[K.slice(),K.slice(),K.slice()],clipBounds:[[[0,0,0],[0,0,
0]],[[0,0,0],[0,0,0]],[[0,0,0],[0,0,0]]]},O={model:K,view:K,projection:K,inverseModel:K.slice(),lowerBound:[0,0,0],upperBound:[0,0,0],colorMap:0,clipBounds:[[0,0,0],[0,0,0]],height:0,contourTint:0,contourColor:[0,0,0,1],permutation:[1,0,0,0,1,0,0,0,1],zOffset:-1E-4,objectOffset:[0,0,0],kambient:1,kdiffuse:1,kspecular:1,lightPosition:[1E3,1E3,1E3],eyePosition:[0,0,0],roughness:1,fresnel:1,opacity:1,vertexColor:0},U=K.slice(),S=[1,0,0,0,1,0,0,0,1];b.draw=function(ba){return a.call(this,ba,!1)};b.drawTransparent=
function(ba){return a.call(this,ba,!0)};var X={model:K,view:K,projection:K,inverseModel:K,clipBounds:[[0,0,0],[0,0,0]],height:0,shape:[0,0],pickId:0,lowerBound:[0,0,0],upperBound:[0,0,0],zOffset:0,objectOffset:[0,0,0],permutation:[1,0,0,0,1,0,0,0,1],lightPosition:[0,0,0],eyePosition:[0,0,0]};b.drawPick=function(ba){ba=ba||{};var ca=this.gl;ca.disable(ca.CULL_FACE);X.model=ba.model||K;X.view=ba.view||K;X.projection=ba.projection||K;X.shape=this._field[2].shape;X.pickId=this.pickId/255;X.lowerBound=
this.bounds[0];X.upperBound=this.bounds[1];X.objectOffset=this.objectOffset;X.permutation=S;for(ba=0;2>ba;++ba)for(var ia=X.clipBounds[ba],ja=0;3>ja;++ja)ia[ja]=Math.min(Math.max(this.clipBounds[ba][ja],-1E8),1E8);ia=l(X,this);if(ia.showSurface){this._pickShader.bind();this._pickShader.uniforms=X;this._vao.bind();this._vao.draw(ca.TRIANGLES,this._vertexCount);for(ba=0;3>ba;++ba)this.surfaceProject[ba]&&(this._pickShader.uniforms.model=ia.projections[ba],this._pickShader.uniforms.clipBounds=ia.clipBounds[ba],
this._vao.draw(ca.TRIANGLES,this._vertexCount));this._vao.unbind()}if(ia.showContour){var la=this._contourPickShader;la.bind();la.uniforms=X;var da=this._contourVAO;da.bind();for(ja=0;3>ja;++ja)for(ca.lineWidth(this.contourWidth[ja]*this.pixelRatio),la.uniforms.permutation=Q[ja],ba=0;ba<this.contourLevels[ja].length;++ba)this._contourCounts[ja][ba]&&(la.uniforms.height=this.contourLevels[ja][ba],da.draw(ca.LINES,this._contourCounts[ja][ba],this._contourOffsets[ja][ba]));for(ba=0;3>ba;++ba)for(la.uniforms.model=
ia.projections[ba],la.uniforms.clipBounds=ia.clipBounds[ba],ja=0;3>ja;++ja)if(this.contourProject[ba][ja]){la.uniforms.permutation=Q[ja];ca.lineWidth(this.contourWidth[ja]*this.pixelRatio);for(var oa=0;oa<this.contourLevels[ja].length;++oa)this._contourCounts[ja][oa]&&(la.uniforms.height=this.contourLevels[ja][oa],da.draw(ca.LINES,this._contourCounts[ja][oa],this._contourOffsets[ja][oa]))}da.unbind()}};b.pick=function(ba){if(!ba||ba.id!==this.pickId)return null;var ca=this._field[2].shape,ia=this._pickResult,
ja=ca[0]*(ba.value[0]+(ba.value[2]>>4)/16)/255,la=Math.floor(ja),da=ja-la;ba=ca[1]*(ba.value[1]+(ba.value[2]&15)/16)/255;var oa=Math.floor(ba),sa=ba-oa;la+=1;oa+=1;for(var ma=ia.position,qa=ma[0]=ma[1]=ma[2]=0;2>qa;++qa)for(var pa=qa?da:1-da,na=0;2>na;++na)for(var ka=la+qa,ua=oa+na,va=pa*(na?sa:1-sa),Ca=0;3>Ca;++Ca)ma[Ca]+=this._field[Ca].get(ka,ua)*va;qa=this._pickResult.level;for(pa=0;3>pa;++pa)qa[pa]=E.le(this.contourLevels[pa],ma[pa]),0>qa[pa]?0<this.contourLevels[pa].length&&(qa[pa]=0):qa[pa]<
this.contourLevels[pa].length-1&&Math.abs(this.contourLevels[pa][qa[pa]]-ma[pa])>Math.abs(this.contourLevels[pa][qa[pa]+1]-ma[pa])&&(qa[pa]+=1);ia.index[0]=.5>da?la:la+1;ia.index[1]=.5>sa?oa:oa+1;ia.uv[0]=ja/ca[0];ia.uv[1]=ba/ca[1];for(Ca=0;3>Ca;++Ca)ia.dataCoordinate[Ca]=this._field[Ca].get(ia.index[0],ia.index[1]);return ia};b.padField=function(ba,ca){var ia=ca.shape.slice(),ja=ba.shape.slice();v.assign(ba.lo(1,1).hi(ia[0],ia[1]),ca);v.assign(ba.lo(1).hi(ia[0],1),ca.hi(ia[0],1));v.assign(ba.lo(1,
ja[1]-1).hi(ia[0],1),ca.lo(0,ia[1]-1).hi(ia[0],1));v.assign(ba.lo(0,1).hi(1,ia[1]),ca.hi(1));v.assign(ba.lo(ja[0]-1,1).hi(1,ia[1]),ca.lo(ia[0]-1));ba.set(0,0,ca.get(0,0));ba.set(0,ja[1]-1,ca.get(0,ia[1]-1));ba.set(ja[0]-1,0,ca.get(ia[0]-1,0));ba.set(ja[0]-1,ja[1]-1,ca.get(ia[0]-1,ia[1]-1))};b.update=function(ba){ba=ba||{};this.objectOffset=ba.objectOffset||this.objectOffset;this.dirty=!0;"contourWidth"in ba&&(this.contourWidth=h(ba.contourWidth,Number));"showContour"in ba&&(this.showContour=h(ba.showContour,
Boolean));"showSurface"in ba&&(this.showSurface=!!ba.showSurface);"contourTint"in ba&&(this.contourTint=h(ba.contourTint,Boolean));"contourColor"in ba&&(this.contourColor=n(ba.contourColor));"contourProject"in ba&&(this.contourProject=h(ba.contourProject,function(Oa){return h(Oa,Boolean)}));"surfaceProject"in ba&&(this.surfaceProject=ba.surfaceProject);"dynamicColor"in ba&&(this.dynamicColor=n(ba.dynamicColor));"dynamicTint"in ba&&(this.dynamicTint=h(ba.dynamicTint,Number));"dynamicWidth"in ba&&(this.dynamicWidth=
h(ba.dynamicWidth,Number));"opacity"in ba&&(this.opacity=ba.opacity);"opacityscale"in ba&&(this.opacityscale=ba.opacityscale);"colorBounds"in ba&&(this.colorBounds=ba.colorBounds);"vertexColor"in ba&&(this.vertexColor=ba.vertexColor?1:0);"colormap"in ba&&this._colorMap.setPixels(this.genColormap(ba.colormap,this.opacityscale));var ca=ba.field||ba.coords&&ba.coords[2]||null,ia=!1;ca||(ca=this._field[2].shape[0]||this._field[2].shape[2]?this._field[2].lo(1,1).hi(this._field[2].shape[0]-2,this._field[2].shape[1]-
2):this._field[2].hi(0,0));if("field"in ba||"coords"in ba){var ja=(ca.shape[0]+2)*(ca.shape[1]+2);ja>this._field[2].data.length&&(k.freeFloat(this._field[2].data),this._field[2].data=k.mallocFloat(p.nextPow2(ja)));this._field[2]=y(this._field[2].data,[ca.shape[0]+2,ca.shape[1]+2]);this.padField(this._field[2],ca);ja=this.shape=ca.shape.slice();for(ca=0;2>ca;++ca)this._field[2].size>this._field[ca].data.length&&(k.freeFloat(this._field[ca].data),this._field[ca].data=k.mallocFloat(this._field[2].size)),
this._field[ca]=y(this._field[ca].data,[ja[0]+2,ja[1]+2]);if(ba.coords){var la=ba.coords;if(!Array.isArray(la)||3!==la.length)throw Error("gl-surface: invalid coordinates for x/y");for(ca=0;2>ca;++ca){var da=la[ca];for(oa=0;2>oa;++oa)if(da.shape[oa]!==ja[oa])throw Error("gl-surface: coords have incorrect shape");this.padField(this._field[ca],da)}}else if(ba.ticks){oa=ba.ticks;if(!Array.isArray(oa)||2!==oa.length)throw Error("gl-surface: invalid ticks");for(ca=0;2>ca;++ca){la=oa[ca];if(Array.isArray(la)||
la.length)la=y(la);if(la.shape[0]!==ja[ca])throw Error("gl-surface: invalid tick length");da=y(la.data,ja);da.stride[ca]=la.stride[0];da.stride[ca^1]=0;this.padField(this._field[ca],da)}}else{for(ca=0;2>ca;++ca)oa=[0,0],oa[ca]=1,this._field[ca]=y(this._field[ca].data,[ja[0]+2,ja[1]+2],oa,0);this._field[0].set(0,0,0);for(var oa=0;oa<ja[0];++oa)this._field[0].set(oa+1,0,oa);this._field[0].set(ja[0]+1,0,ja[0]-1);this._field[1].set(0,0,0);for(oa=0;oa<ja[1];++oa)this._field[1].set(0,oa+1,oa);this._field[1].set(0,
ja[1]+1,ja[1]-1)}oa=this._field;la=y(k.mallocFloat(6*oa[2].size),[3,ja[0]+2,ja[1]+2,2]);for(ca=0;3>ca;++ca)C(la.pick(ca),oa[ca],"mirror");var sa=y(k.mallocFloat(3*oa[2].size),[ja[0]+2,ja[1]+2,3]);for(ca=0;ca<ja[0]+2;++ca)for(oa=0;oa<ja[1]+2;++oa){da=la.get(0,ca,oa,0);var ma=la.get(0,ca,oa,1),qa=la.get(1,ca,oa,0),pa=la.get(1,ca,oa,1),na=la.get(2,ca,oa,0),ka=la.get(2,ca,oa,1),ua=qa*ka-pa*na;na=na*ma-ka*da;ka=da*pa-ma*qa;da=Math.sqrt(ua*ua+na*na+ka*ka);1E-8>da?(da=Math.max(Math.abs(ua),Math.abs(na),
Math.abs(ka)),1E-8>da?(ka=1,na=ua=0,da=1):da=1/da):da=1/Math.sqrt(da);sa.set(ca,oa,0,ua*da);sa.set(ca,oa,1,na*da);sa.set(ca,oa,2,ka*da)}k.free(la.data);var va=[Infinity,Infinity,Infinity],Ca=[-Infinity,-Infinity,-Infinity],Ma=Infinity,Ua=-Infinity,eb=k.mallocFloat(p.nextPow2((ja[0]-1)*(ja[1]-1)*60)),fb=0;for(ca=la=0;ca<ja[0]-1;++ca)a:for(oa=0;oa<ja[1]-1;++oa){for(ua=0;2>ua;++ua)for(na=0;2>na;++na)for(da=0;3>da;++da)if(ma=this._field[da].get(1+ca+ua,1+oa+na),isNaN(ma)||!isFinite(ma))continue a;for(da=
0;6>da;++da){qa=ca+H[da][0];pa=oa+H[da][1];var nb=this._field[0].get(qa+1,pa+1),cb=this._field[1].get(qa+1,pa+1);ma=this._field[2].get(qa+1,pa+1);ua=sa.get(qa+1,pa+1,0);na=sa.get(qa+1,pa+1,1);ka=sa.get(qa+1,pa+1,2);ba.intensity&&($a=ba.intensity.get(qa,pa));var $a=ba.intensity?ba.intensity.get(qa,pa):ma+this.objectOffset[2];eb[fb++]=qa;eb[fb++]=pa;eb[fb++]=nb;eb[fb++]=cb;eb[fb++]=ma;eb[fb++]=0;eb[fb++]=$a;eb[fb++]=ua;eb[fb++]=na;eb[fb++]=ka;va[0]=Math.min(va[0],nb+this.objectOffset[0]);va[1]=Math.min(va[1],
cb+this.objectOffset[1]);va[2]=Math.min(va[2],ma+this.objectOffset[2]);Ma=Math.min(Ma,$a);Ca[0]=Math.max(Ca[0],nb+this.objectOffset[0]);Ca[1]=Math.max(Ca[1],cb+this.objectOffset[1]);Ca[2]=Math.max(Ca[2],ma+this.objectOffset[2]);Ua=Math.max(Ua,$a);la+=1}}ba.intensityBounds&&(Ma=+ba.intensityBounds[0],Ua=+ba.intensityBounds[1]);for(ca=6;ca<fb;ca+=10)eb[ca]=(eb[ca]-Ma)/(Ua-Ma);this._vertexCount=la;this._coordinateBuffer.update(eb.subarray(0,fb));k.freeFloat(eb);k.free(sa.data);this.bounds=[va,Ca];this.intensity=
ba.intensity||this._field[2];if(this.intensityBounds[0]!==Ma||this.intensityBounds[1]!==Ua)ia=!0;this.intensityBounds=[Ma,Ua]}if("levels"in ba){ja=ba.levels;ja=Array.isArray(ja[0])?ja.slice():[[],[],ja];for(ca=0;3>ca;++ca)ja[ca]=ja[ca].slice(),ja[ca].sort(function(Oa,bb){return Oa-bb});for(ca=0;3>ca;++ca)for(oa=0;oa<ja[ca].length;++oa)ja[ca][oa]-=this.objectOffset[ca];ca=0;a:for(;3>ca;++ca){if(ja[ca].length!==this.contourLevels[ca].length){ia=!0;break}for(oa=0;oa<ja[ca].length;++oa)if(ja[ca][oa]!==
this.contourLevels[ca][oa]){ia=!0;break a}}this.contourLevels=ja}if(ia){oa=this._field;ja=this.shape;ia=[];for(ba=0;3>ba;++ba){sa=this.contourLevels[ba];ka=[];va=[];Ca=[0,0,0];for(ca=0;ca<sa.length;++ca){Ma=B(this._field[ba],sa[ca]);ka.push(ia.length/5|0);oa=la=0;a:for(;oa<Ma.cells.length;++oa)for(Ua=Ma.cells[oa],da=0;2>da;++da){eb=Ma.positions[Ua[da]];ma=eb[0];fb=Math.floor(ma)|0;nb=ma-fb;ma=eb[1];cb=Math.floor(ma)|0;$a=ma-cb;var jb=!1,pb=0;b:for(;3>pb;++pb){Ca[pb]=0;var xa=(ba+pb+1)%3;for(ua=0;2>
ua;++ua){var Ea=ua?nb:1-nb;qa=Math.min(Math.max(fb+ua,0),ja[0])|0;for(na=0;2>na;++na){var Ia=na?$a:1-$a;pa=Math.min(Math.max(cb+na,0),ja[1])|0;ma=2>pb?this._field[xa].get(qa,pa):(this.intensity.get(qa,pa)-this.intensityBounds[0])/(this.intensityBounds[1]-this.intensityBounds[0]);if(!isFinite(ma)||isNaN(ma)){jb=!0;break b}Ca[pb]+=Ea*Ia*ma}}}if(jb){if(0<da){for(da=0;5>da;++da)ia.pop();--la}continue a}else ia.push(Ca[0],Ca[1],eb[0],eb[1],Ca[2]),la+=1}va.push(la)}this._contourOffsets[ba]=ka;this._contourCounts[ba]=
va}ja=k.mallocFloat(ia.length);for(ca=0;ca<ia.length;++ca)ja[ca]=ia[ca];this._contourBuffer.update(ja);k.freeFloat(ja)}};b.dispose=function(){this._shader.dispose();this._vao.dispose();this._coordinateBuffer.dispose();this._colorMap.dispose();this._contourBuffer.dispose();this._contourVAO.dispose();this._contourShader.dispose();this._contourPickShader.dispose();this._dynamicBuffer.dispose();this._dynamicVAO.dispose();for(var ba=0;3>ba;++ba)k.freeFloat(this._field[ba].data)};b.highlight=function(ba){var ca;
if(ba){for(ca=0;3>ca;++ca)this.highlightLevel[ca]=this.enableHighlight[ca]?ba.level[ca]:-1;ba=this.snapToData?ba.dataCoordinate:ba.position;for(ca=0;3>ca;++ca)ba[ca]-=this.objectOffset[ca];if(this.enableDynamic[0]&&ba[0]!==this.dynamicLevel[0]||this.enableDynamic[1]&&ba[1]!==this.dynamicLevel[1]||this.enableDynamic[2]&&ba[2]!==this.dynamicLevel[2]){for(var ia=0,ja=this.shape,la=k.mallocFloat(12*ja[0]*ja[1]),da=0;3>da;++da)if(this.enableDynamic[da]){this.dynamicLevel[da]=ba[da];var oa=this._field[(da+
1)%3],sa=this._field[(da+2)%3];ca=B(this._field[da],ba[da]);var ma=ca.cells,qa=ca.positions;this._dynamicOffsets[da]=ia;for(ca=0;ca<ma.length;++ca)for(var pa=ma[ca],na=0;2>na;++na){var ka=qa[pa[na]],ua=+ka[0],va=ua|0,Ca=Math.min(va+1,ja[0])|0,Ma=ua-va,Ua=1-Ma,eb=+ka[1];ka=eb|0;ua=Math.min(ka+1,ja[1])|0;var fb=eb-ka,nb=1-fb;eb=Ua*nb;Ua*=fb;nb*=Ma;fb*=Ma;Ma=eb*oa.get(va,ka)+Ua*oa.get(va,ua)+nb*oa.get(Ca,ka)+fb*oa.get(Ca,ua);va=eb*sa.get(va,ka)+Ua*sa.get(va,ua)+nb*sa.get(Ca,ka)+fb*sa.get(Ca,ua);if(isNaN(Ma)||
isNaN(va)){na&&--ia;break}la[2*ia]=Ma;la[2*ia+1]=va;ia+=1}this._dynamicCounts[da]=ia-this._dynamicOffsets[da]}else this.dynamicLevel[da]=NaN,this._dynamicCounts[da]=0;this._dynamicBuffer.update(la.subarray(0,2*ia));k.freeFloat(la)}}else this._dynamicCounts=[0,0,0],this.dyanamicLevel=[NaN,NaN,NaN],this.highlightLevel=[-1,-1,-1]}},{"./lib/shaders":349,"binary-search-bounds":96,"bit-twiddle":97,colormap:131,"gl-buffer":259,"gl-mat4/invert":293,"gl-mat4/multiply":295,"gl-texture2d":353,"gl-vao":358,ndarray:495,
"ndarray-gradient":488,"ndarray-ops":490,"ndarray-pack":491,"surface-nets":570,"typedarray-pool":595}],352:[function(b,N,I){var r=b("css-font"),q=b("pick-by-alias"),m=b("regl"),l=b("gl-util/context");I=b("es6-weak-map");var a=b("color-normalize"),h=b("font-atlas"),g=b("typedarray-pool"),n=b("parse-rect"),p=b("is-plain-obj"),d=b("parse-unit"),e=b("to-px"),f=b("detect-kerning"),k=b("object-assign"),t=b("font-measure"),v=b("flatten-vertex-data"),w=b("bit-twiddle").nextPow2,y=new I,B=!1;document.body&&
(b=document.body.appendChild(document.createElement("div")),b.style.font="italic small-caps bold condensed 16px/2 cursive",getComputedStyle(b).fontStretch&&(B=!0),document.body.removeChild(b));var A=function(z){"function"===typeof z&&z._gl&&z.prop&&z.texture&&z.buffer?(z={regl:z},this.gl=z.regl._gl):this.gl=l(z);this.regl=(this.shader=y.get(this.gl))?this.shader.regl:z.regl||m({gl:this.gl});this.charBuffer=this.regl.buffer({type:"uint8",usage:"stream"});this.sizeBuffer=this.regl.buffer({type:"float",
usage:"stream"});this.shader||(this.shader=this.createShader(),y.set(this.gl,this.shader));this.batch=[];this.fontSize=[];this.font=[];this.fontAtlas=[];this.draw=this.shader.draw.bind(this);this.render=function(){this.regl._refresh();this.draw(this.batch)};this.canvas=this.gl.canvas;this.update(p(z)?z:{})};A.prototype.createShader=function(){var z=this.regl,E=z({blend:{enable:!0,color:[0,0,0,1],func:{srcRGB:"src alpha",dstRGB:"one minus src alpha",srcAlpha:"one minus dst alpha",dstAlpha:"one"}},
stencil:{enable:!1},depth:{enable:!1},count:z.prop("count"),offset:z.prop("offset"),attributes:{charOffset:{offset:4,stride:8,buffer:z.this("sizeBuffer")},width:{offset:0,stride:8,buffer:z.this("sizeBuffer")},char:z.this("charBuffer"),position:z.this("position")},uniforms:{atlasSize:function(C,u){return[u.atlas.width,u.atlas.height]},atlasDim:function(C,u){return[u.atlas.cols,u.atlas.rows]},atlas:function(C,u){return u.atlas.texture},charStep:function(C,u){return u.atlas.step},em:function(C,u){return u.atlas.em},
color:z.prop("color"),opacity:z.prop("opacity"),viewport:z.this("viewportArray"),scale:z.this("scale"),align:z.prop("align"),baseline:z.prop("baseline"),translate:z.this("translate"),positionOffset:z.prop("positionOffset")},primitive:"points",viewport:z.this("viewport"),vert:"\n\t\t\tprecision highp float;\n\t\t\tattribute float width, charOffset, char;\n\t\t\tattribute vec2 position;\n\t\t\tuniform float fontSize, charStep, em, align, baseline;\n\t\t\tuniform vec4 viewport;\n\t\t\tuniform vec4 color;\n\t\t\tuniform vec2 atlasSize, atlasDim, scale, translate, positionOffset;\n\t\t\tvarying vec2 charCoord, charId;\n\t\t\tvarying float charWidth;\n\t\t\tvarying vec4 fontColor;\n\t\t\tvoid main () {\n\t\t\t\t"+
(A.normalViewport?"":"vec2 positionOffset \x3d vec2(positionOffset.x,- positionOffset.y);")+"\n\n\t\t\t\tvec2 offset \x3d floor(em * (vec2(align + charOffset, baseline)\n\t\t\t\t\t+ positionOffset))\n\t\t\t\t\t/ (viewport.zw * scale.xy);\n\n\t\t\t\tvec2 position \x3d (position + translate) * scale;\n\t\t\t\tposition +\x3d offset * scale;\n\n\t\t\t\t"+(A.normalViewport?"position.y \x3d 1. - position.y;":"")+"\n\n\t\t\t\tcharCoord \x3d position * viewport.zw + viewport.xy;\n\n\t\t\t\tgl_Position \x3d vec4(position * 2. - 1., 0, 1);\n\n\t\t\t\tgl_PointSize \x3d charStep;\n\n\t\t\t\tcharId.x \x3d mod(char, atlasDim.x);\n\t\t\t\tcharId.y \x3d floor(char / atlasDim.x);\n\n\t\t\t\tcharWidth \x3d width * em;\n\n\t\t\t\tfontColor \x3d color / 255.;\n\t\t\t}",
frag:"\n\t\t\tprecision highp float;\n\t\t\tuniform sampler2D atlas;\n\t\t\tuniform float fontSize, charStep, opacity;\n\t\t\tuniform vec2 atlasSize;\n\t\t\tuniform vec4 viewport;\n\t\t\tvarying vec4 fontColor;\n\t\t\tvarying vec2 charCoord, charId;\n\t\t\tvarying float charWidth;\n\n\t\t\tfloat lightness(vec4 color) {\n\t\t\t\treturn color.r * 0.299 + color.g * 0.587 + color.b * 0.114;\n\t\t\t}\n\n\t\t\tvoid main () {\n\t\t\t\tvec2 uv \x3d gl_FragCoord.xy - charCoord + charStep * .5;\n\t\t\t\tfloat halfCharStep \x3d floor(charStep * .5 + .5);\n\n\t\t\t\t// invert y and shift by 1px (FF expecially needs that)\n\t\t\t\tuv.y \x3d charStep - uv.y;\n\n\t\t\t\t// ignore points outside of character bounding box\n\t\t\t\tfloat halfCharWidth \x3d ceil(charWidth * .5);\n\t\t\t\tif (floor(uv.x) \x3e halfCharStep + halfCharWidth ||\n\t\t\t\t\tfloor(uv.x) \x3c halfCharStep - halfCharWidth) return;\n\n\t\t\t\tuv +\x3d charId * charStep;\n\t\t\t\tuv \x3d uv / atlasSize;\n\n\t\t\t\tvec4 color \x3d fontColor;\n\t\t\t\tvec4 mask \x3d texture2D(atlas, uv);\n\n\t\t\t\tfloat maskY \x3d lightness(mask);\n\t\t\t\t// float colorY \x3d lightness(color);\n\t\t\t\tcolor.a *\x3d maskY;\n\t\t\t\tcolor.a *\x3d opacity;\n\n\t\t\t\t// color.a +\x3d .1;\n\n\t\t\t\t// antialiasing, see yiq color space y-channel formula\n\t\t\t\t// color.rgb +\x3d (1. - color.rgb) * (1. - mask.rgb);\n\n\t\t\t\tgl_FragColor \x3d color;\n\t\t\t}"});
return{regl:z,draw:E,atlas:{}}};A.prototype.update=function(z){var E=this;if("string"===typeof z)z={text:z};else if(!z)return;z=q(z,{position:"position positions coord coords coordinates",font:"font fontFace fontface typeface cssFont css-font family fontFamily",fontSize:"fontSize fontsize size font-size",text:"text texts chars characters value values symbols",align:"align alignment textAlign textbaseline",baseline:"baseline textBaseline textbaseline",direction:"dir direction textDirection",color:"color colour fill fill-color fillColor textColor textcolor",
kerning:"kerning kern",range:"range dataBox",viewport:"vp viewport viewBox viewbox viewPort",opacity:"opacity alpha transparency visible visibility opaque",offset:"offset positionOffset padding shift indent indentation"},!0);null!=z.opacity&&(Array.isArray(z.opacity)?this.opacity=z.opacity.map(function(S){return parseFloat(S)}):this.opacity=parseFloat(z.opacity));null!=z.viewport&&(this.viewport=n(z.viewport),A.normalViewport&&(this.viewport.y=this.canvas.height-this.viewport.y-this.viewport.height),
this.viewportArray=[this.viewport.x,this.viewport.y,this.viewport.width,this.viewport.height]);null==this.viewport&&(this.viewport={x:0,y:0,width:this.gl.drawingBufferWidth,height:this.gl.drawingBufferHeight},this.viewportArray=[this.viewport.x,this.viewport.y,this.viewport.width,this.viewport.height]);null!=z.kerning&&(this.kerning=z.kerning);null!=z.offset&&("number"===typeof z.offset&&(z.offset=[z.offset,0]),this.positionOffset=v(z.offset));z.direction&&(this.direction=z.direction);z.range&&(this.range=
z.range,this.scale=[1/(z.range[2]-z.range[0]),1/(z.range[3]-z.range[1])],this.translate=[-z.range[0],-z.range[1]]);z.scale&&(this.scale=z.scale);z.translate&&(this.translate=z.translate);this.scale||(this.scale=[1/this.viewport.width,1/this.viewport.height]);this.translate||(this.translate=[0,0]);this.font.length||z.font||(z.font=A.baseFontSize+"px sans-serif");var C=!1,u=!1;z.font&&(Array.isArray(z.font)?z.font:[z.font]).forEach(function(S,X){if("string"===typeof S)try{S=r.parse(S)}catch(ja){S=r.parse(A.baseFontSize+
"px "+S)}else S=r.parse(r.stringify(S));var ba=r.stringify({size:A.baseFontSize,family:S.family,stretch:B?S.stretch:void 0,variant:S.variant,weight:S.weight,style:S.style}),ca=d(S.size);ca=Math.round(ca[0]*e(ca[1]));ca!==E.fontSize[X]&&(u=!0,E.fontSize[X]=ca);if(!E.font[X]||ba!=E.font[X].baseString)if(C=!0,E.font[X]=A.fonts[ba],!E.font[X]){ca=S.family.join(", ");var ia=[S.style];S.style!=S.variant&&ia.push(S.variant);S.variant!=S.weight&&ia.push(S.weight);B&&S.weight!=S.stretch&&ia.push(S.stretch);
E.font[X]={baseString:ba,family:ca,weight:S.weight,stretch:S.stretch,style:S.style,variant:S.variant,width:{},kerning:{},metrics:t(ca,{origin:"top",fontSize:A.baseFontSize,fontStyle:ia.join(" ")})};A.fonts[ba]=E.font[X]}});(C||u)&&this.font.forEach(function(S,X){var ba=r.stringify({size:E.fontSize[X],family:S.family,stretch:B?S.stretch:void 0,variant:S.variant,weight:S.weight,style:S.style});E.fontAtlas[X]=E.shader.atlas[ba];E.fontAtlas[X]||(E.shader.atlas[ba]=E.fontAtlas[X]={fontString:ba,step:2*
Math.ceil(E.fontSize[X]*S.metrics.bottom*.5),em:E.fontSize[X],cols:0,rows:0,height:0,width:0,chars:[],ids:{},texture:E.regl.texture()});null==z.text&&(z.text=E.text)});if("string"===typeof z.text&&z.position&&2<z.position.length){for(var D=Array(.5*z.position.length),G=0;G<D.length;G++)D[G]=z.text;z.text=D}if(null!=z.text||C){this.textOffsets=[0];if(Array.isArray(z.text)){this.count=z.text[0].length;this.counts=[this.count];for(D=1;D<z.text.length;D++)this.textOffsets[D]=this.textOffsets[D-1]+z.text[D-
1].length,this.count+=z.text[D].length,this.counts.push(z.text[D].length);this.text=z.text.join("")}else this.text=z.text,this.count=this.text.length,this.counts=[this.count];var J=[];this.font.forEach(function(S,X){A.atlasContext.font=S.baseString;X=E.fontAtlas[X];for(var ba=0;ba<E.text.length;ba++){var ca=E.text.charAt(ba);null==X.ids[ca]&&(X.ids[ca]=X.chars.length,X.chars.push(ca),J.push(ca));if(null==S.width[ca]&&(S.width[ca]=A.atlasContext.measureText(ca).width/A.baseFontSize,E.kerning)){var ia=
[],ja;for(ja in S.width)ia.push(ja+ca,ca+ja);k(S.kerning,f(S.family,{pairs:ia}))}}})}if(z.position)if(2<z.position.length){D=!z.position[0].length;G=g.mallocFloat(2*this.count);for(var L=0,K=0;L<this.counts.length;L++){var H=this.counts[L];if(D)for(var Q=0;Q<H;Q++)G[K++]=z.position[2*L],G[K++]=z.position[2*L+1];else for(Q=0;Q<H;Q++)G[K++]=z.position[L][0],G[K++]=z.position[L][1]}this.position.call?this.position({type:"float",data:G}):this.position=this.regl.buffer({type:"float",data:G});g.freeFloat(G)}else this.position.destroy&&
this.position.destroy(),this.position={constant:z.position};if(z.text||C){D=g.mallocUint8(this.count);G=g.mallocFloat(2*this.count);this.textWidth=[];for(K=L=0;L<this.counts.length;L++){H=this.counts[L];Q=this.font[L]||this.font[0];for(var M=this.fontAtlas[L]||this.fontAtlas[0],P=0;P<H;P++){var T=this.text.charAt(K),O=this.text.charAt(K-1);D[K]=M.ids[T];G[2*K]=Q.width[T];if(P){var U=G[2*K-1]+.5*G[2*K-2]+.5*G[2*K];this.kerning&&(T=Q.kerning[O+T])&&(U+=.001*T);G[2*K+1]=U}else G[2*K+1]=.5*G[2*K];K++}this.textWidth.push(G.length?
.5*G[2*K-2]+G[2*K-1]:0)}z.align||(z.align=this.align);this.charBuffer({data:D,type:"uint8",usage:"stream"});this.sizeBuffer({data:G,type:"float",usage:"stream"});g.freeUint8(D);g.freeFloat(G);J.length&&this.font.forEach(function(S,X){S=E.fontAtlas[X];X=S.step;var ba=Math.min(Math.floor(A.maxAtlasSize/X),S.chars.length),ca=Math.ceil(S.chars.length/ba),ia=w(ba*X),ja=w(ca*X);S.width=ia;S.height=ja;S.rows=ca;S.cols=ba;S.em&&S.texture({data:h({canvas:A.atlasCanvas,font:S.fontString,chars:S.chars,shape:[ia,
ja],step:[X,X]})})})}z.align&&(this.align=z.align,this.alignOffset=this.textWidth.map(function(S,X){X=Array.isArray(E.align)?1<E.align.length?E.align[X]:E.align[0]:E.align;if("number"===typeof X)return X;switch(X){case "right":case "end":return-S;case "center":case "centre":case "middle":return.5*-S}return 0}));null==this.baseline&&null==z.baseline&&(z.baseline=0);null!=z.baseline&&(this.baseline=z.baseline,Array.isArray(this.baseline)||(this.baseline=[this.baseline]),this.baselineOffset=this.baseline.map(function(S,
X){X=(E.font[X]||E.font[0]).metrics;var ba=.5*X.bottom;ba="number"===typeof S?ba+(S-X.baseline):ba+-X[S];A.normalViewport||(ba*=-1);return ba}));if(null!=z.color)if(z.color||(z.color="transparent"),"string"!==typeof z.color&&isNaN(z.color)){if("number"===typeof z.color[0]&&z.color.length>this.counts.length)for(G=z.color.length,D=g.mallocUint8(G),L=(z.color.subarray||z.color.slice).bind(z.color),K=0;K<G;K+=4)D.set(a(L(K,K+4),"uint8"),K);else for(G=z.color.length,D=g.mallocUint8(4*G),L=0;L<G;L++)D.set(a(z.color[L]||
0,"uint8"),4*L);this.color=D}else this.color=a(z.color,"uint8");if(z.position||z.text||z.color||z.baseline||z.align||z.font||z.offset||z.opacity)if(4<this.color.length||1<this.baselineOffset.length||this.align&&1<this.align.length||1<this.fontAtlas.length||2<this.positionOffset.length)for(this.batch=Array(Math.max(.5*this.position.length||0,.25*this.color.length||0,this.baselineOffset.length||0,this.alignOffset.length||0,this.font.length||0,this.opacity.length||0,.5*this.positionOffset.length||0)),
D=0;D<this.batch.length;D++)this.batch[D]={count:1<this.counts.length?this.counts[D]:this.counts[0],offset:1<this.textOffsets.length?this.textOffsets[D]:this.textOffsets[0],color:this.color?4>=this.color.length?this.color:this.color.subarray(4*D,4*D+4):[0,0,0,255],opacity:Array.isArray(this.opacity)?this.opacity[D]:this.opacity,baseline:null!=this.baselineOffset[D]?this.baselineOffset[D]:this.baselineOffset[0],align:this.align?null!=this.alignOffset[D]?this.alignOffset[D]:this.alignOffset[0]:0,atlas:this.fontAtlas[D]||
this.fontAtlas[0],positionOffset:2<this.positionOffset.length?this.positionOffset.subarray(2*D,2*D+2):this.positionOffset};else this.batch=this.count?[{count:this.count,offset:0,color:this.color||[0,0,0,255],opacity:Array.isArray(this.opacity)?this.opacity[0]:this.opacity,baseline:this.baselineOffset[0],align:this.alignOffset?this.alignOffset[0]:0,atlas:this.fontAtlas[0],positionOffset:this.positionOffset}]:[]};A.prototype.destroy=function(){};A.prototype.kerning=!0;A.prototype.position={constant:new Float32Array(2)};
A.prototype.translate=null;A.prototype.scale=null;A.prototype.font=null;A.prototype.text="";A.prototype.positionOffset=[0,0];A.prototype.opacity=1;A.prototype.color=new Uint8Array([0,0,0,255]);A.prototype.alignOffset=[0,0];A.normalViewport=!1;A.maxAtlasSize=1024;A.atlasCanvas=document.createElement("canvas");A.atlasContext=A.atlasCanvas.getContext("2d",{alpha:!1});A.baseFontSize=64;A.fonts={};N.exports=A},{"bit-twiddle":97,"color-normalize":125,"css-font":144,"detect-kerning":172,"es6-weak-map":233,
"flatten-vertex-data":244,"font-atlas":245,"font-measure":246,"gl-util/context":354,"is-plain-obj":469,"object-assign":499,"parse-rect":504,"parse-unit":506,"pick-by-alias":511,regl:540,"to-px":578,"typedarray-pool":595}],353:[function(b,N,I){function r(k){return"undefined"!=typeof HTMLCanvasElement&&k instanceof HTMLCanvasElement||"undefined"!=typeof HTMLImageElement&&k instanceof HTMLImageElement||"undefined"!=typeof HTMLVideoElement&&k instanceof HTMLVideoElement||"undefined"!=typeof ImageData&&
k instanceof ImageData}function q(k,t,v){var w=k.gl,y=w.getParameter(w.MAX_TEXTURE_SIZE);if(0>t||t>y||0>v||v>y)throw Error("gl-texture2d: Invalid texture size");k._shape=[t,v];k.bind();w.texImage2D(w.TEXTURE_2D,0,k.format,t,v,0,k.format,k.type,null);k._mipLevels=[0];return k}function m(k,t,v,w,y,B){this.gl=k;this.handle=t;this.format=y;this.type=B;this._shape=[v,w];this._mipLevels=[0];this._minFilter=this._magFilter=k.NEAREST;this._wrapT=this._wrapS=k.CLAMP_TO_EDGE;this._anisoSamples=1;var A=this;
k=[this._wrapS,this._wrapT];Object.defineProperties(k,[{get:function(){return A._wrapS},set:function(z){return A.wrapS=z}},{get:function(){return A._wrapT},set:function(z){return A.wrapT=z}}]);this._wrapVector=k;k=[this._shape[0],this._shape[1]];Object.defineProperties(k,[{get:function(){return A._shape[0]},set:function(z){return A.width=z}},{get:function(){return A._shape[1]},set:function(z){return A.height=z}}]);this._shapeVector=k}function l(k,t){return 3===k.length?1===t[2]&&t[1]===k[0]*k[2]&&
t[0]===k[2]:1===t[0]&&t[1]===k[0]}function a(k){var t=k.createTexture();k.bindTexture(k.TEXTURE_2D,t);k.texParameteri(k.TEXTURE_2D,k.TEXTURE_MIN_FILTER,k.NEAREST);k.texParameteri(k.TEXTURE_2D,k.TEXTURE_MAG_FILTER,k.NEAREST);k.texParameteri(k.TEXTURE_2D,k.TEXTURE_WRAP_S,k.CLAMP_TO_EDGE);k.texParameteri(k.TEXTURE_2D,k.TEXTURE_WRAP_T,k.CLAMP_TO_EDGE);return t}function h(k,t,v,w,y){var B=k.getParameter(k.MAX_TEXTURE_SIZE);if(0>t||t>B||0>v||v>B)throw Error("gl-texture2d: Invalid texture shape");if(y===
k.FLOAT&&!k.getExtension("OES_texture_float"))throw Error("gl-texture2d: Floating point textures not supported on this platform");B=a(k);k.texImage2D(k.TEXTURE_2D,0,w,t,v,0,w,y,null);return new m(k,B,t,v,w,y)}var g=b("ndarray"),n=b("ndarray-ops"),p=b("typedarray-pool");N.exports=function(k){if(1>=arguments.length)throw Error("gl-texture2d: Missing arguments for texture2d constructor");d||(d=[k.LINEAR,k.NEAREST_MIPMAP_LINEAR,k.LINEAR_MIPMAP_NEAREST,k.LINEAR_MIPMAP_NEAREST],e=[k.NEAREST,k.LINEAR,k.NEAREST_MIPMAP_NEAREST,
k.NEAREST_MIPMAP_LINEAR,k.LINEAR_MIPMAP_NEAREST,k.LINEAR_MIPMAP_LINEAR],f=[k.REPEAT,k.CLAMP_TO_EDGE,k.MIRRORED_REPEAT]);if("number"===typeof arguments[1])return h(k,arguments[1],arguments[2],arguments[3]||k.RGBA,arguments[4]||k.UNSIGNED_BYTE);if(Array.isArray(arguments[1]))return h(k,arguments[1][0]|0,arguments[1][1]|0,arguments[2]||k.RGBA,arguments[3]||k.UNSIGNED_BYTE);if("object"===typeof arguments[1]){var t=arguments[1],v=r(t)?t:t.raw;if(v){var w=t.width|0;t=t.height|0;var y=arguments[2]||k.RGBA,
B=arguments[3]||k.UNSIGNED_BYTE,A=a(k);k.texImage2D(k.TEXTURE_2D,0,y,y,B,v);return new m(k,A,w,t,y,B)}if(t.shape&&t.data&&t.stride){A=t;var z=A.dtype;v=A.shape.slice();t=k.getParameter(k.MAX_TEXTURE_SIZE);if(0>v[0]||v[0]>t||0>v[1]||v[1]>t)throw Error("gl-texture2d: Invalid texture size");t=l(v,A.stride.slice());"float32"===z?y=k.FLOAT:"float64"===z?(y=k.FLOAT,t=!1,z="float32"):"uint8"===z?y=k.UNSIGNED_BYTE:(y=k.UNSIGNED_BYTE,t=!1,z="uint8");if(2===v.length)B=k.LUMINANCE,v=[v[0],v[1],1],A=g(A.data,
v,[A.stride[0],A.stride[1],1],A.offset);else if(3===v.length)if(1===v[2])B=k.ALPHA;else if(2===v[2])B=k.LUMINANCE_ALPHA;else if(3===v[2])B=k.RGB;else if(4===v[2])B=k.RGBA;else throw Error("gl-texture2d: Invalid shape for pixel coords");else throw Error("gl-texture2d: Invalid shape for texture");y!==k.FLOAT||k.getExtension("OES_texture_float")||(y=k.UNSIGNED_BYTE,t=!1);var E=A.size;if(t)A=0===A.offset&&A.data.length===E?A.data:A.data.subarray(A.offset,A.offset+E);else{var C=[v[2],v[2]*v[0],1];w=p.malloc(E,
z);C=g(w,v,C,0);"float32"!==z&&"float64"!==z||y!==k.UNSIGNED_BYTE?n.assign(C,A):n.muls(C,A,255);A=w.subarray(0,E)}z=a(k);k.texImage2D(k.TEXTURE_2D,0,B,v[0],v[1],0,B,y,A);t||p.free(w);return new m(k,z,v[0],v[1],B,y)}}throw Error("gl-texture2d: Invalid arguments for texture2d constructor");};var d=null,e=null,f=null;b=m.prototype;Object.defineProperties(b,{minFilter:{get:function(){return this._minFilter},set:function(k){this.bind();var t=this.gl;this.type===t.FLOAT&&0<=d.indexOf(k)&&!t.getExtension("OES_texture_float_linear")&&
(k=t.NEAREST);if(0>e.indexOf(k))throw Error("gl-texture2d: Unknown filter mode "+k);t.texParameteri(t.TEXTURE_2D,t.TEXTURE_MIN_FILTER,k);return this._minFilter=k}},magFilter:{get:function(){return this._magFilter},set:function(k){this.bind();var t=this.gl;this.type===t.FLOAT&&0<=d.indexOf(k)&&!t.getExtension("OES_texture_float_linear")&&(k=t.NEAREST);if(0>e.indexOf(k))throw Error("gl-texture2d: Unknown filter mode "+k);t.texParameteri(t.TEXTURE_2D,t.TEXTURE_MAG_FILTER,k);return this._magFilter=k}},
mipSamples:{get:function(){return this._anisoSamples},set:function(k){var t=this._anisoSamples;this._anisoSamples=Math.max(k,1)|0;t!==this._anisoSamples&&(k=this.gl.getExtension("EXT_texture_filter_anisotropic"))&&this.gl.texParameterf(this.gl.TEXTURE_2D,k.TEXTURE_MAX_ANISOTROPY_EXT,this._anisoSamples);return this._anisoSamples}},wrapS:{get:function(){return this._wrapS},set:function(k){this.bind();if(0>f.indexOf(k))throw Error("gl-texture2d: Unknown wrap mode "+k);this.gl.texParameteri(this.gl.TEXTURE_2D,
this.gl.TEXTURE_WRAP_S,k);return this._wrapS=k}},wrapT:{get:function(){return this._wrapT},set:function(k){this.bind();if(0>f.indexOf(k))throw Error("gl-texture2d: Unknown wrap mode "+k);this.gl.texParameteri(this.gl.TEXTURE_2D,this.gl.TEXTURE_WRAP_T,k);return this._wrapT=k}},wrap:{get:function(){return this._wrapVector},set:function(k){Array.isArray(k)||(k=[k,k]);if(2!==k.length)throw Error("gl-texture2d: Must specify wrap mode for rows and columns");for(var t=0;2>t;++t)if(0>f.indexOf(k[t]))throw Error("gl-texture2d: Unknown wrap mode "+
k);this._wrapS=k[0];this._wrapT=k[1];t=this.gl;this.bind();t.texParameteri(t.TEXTURE_2D,t.TEXTURE_WRAP_S,this._wrapS);t.texParameteri(t.TEXTURE_2D,t.TEXTURE_WRAP_T,this._wrapT);return k}},shape:{get:function(){return this._shapeVector},set:function(k){if(!Array.isArray(k))k=[k|0,k|0];else if(2!==k.length)throw Error("gl-texture2d: Invalid texture shape");q(this,k[0]|0,k[1]|0);return[k[0]|0,k[1]|0]}},width:{get:function(){return this._shape[0]},set:function(k){k|=0;q(this,k,this._shape[1]);return k}},
height:{get:function(){return this._shape[1]},set:function(k){k|=0;q(this,this._shape[0],k);return k}}});b.bind=function(k){var t=this.gl;void 0!==k&&t.activeTexture(t.TEXTURE0+(k|0));t.bindTexture(t.TEXTURE_2D,this.handle);return void 0!==k?k|0:t.getParameter(t.ACTIVE_TEXTURE)-t.TEXTURE0};b.dispose=function(){this.gl.deleteTexture(this.handle)};b.generateMipmap=function(){this.bind();this.gl.generateMipmap(this.gl.TEXTURE_2D);for(var k=Math.min(this._shape[0],this._shape[1]),t=0;0<k;++t,k>>>=1)0>
this._mipLevels.indexOf(t)&&this._mipLevels.push(t)};b.setPixels=function(k,t,v,w){var y=this.gl;this.bind();Array.isArray(t)?(w=v,v=t[1]|0,t=t[0]|0):(t=t||0,v=v||0);w=w||0;var B=r(k)?k:k.raw;if(B)0>this._mipLevels.indexOf(w)?(y.texImage2D(y.TEXTURE_2D,0,this.format,this.format,this.type,B),this._mipLevels.push(w)):y.texSubImage2D(y.TEXTURE_2D,w,t,v,this.format,this.type,B);else if(k.shape&&k.stride&&k.data){if(2>k.shape.length||t+k.shape[1]>this._shape[1]>>>w||v+k.shape[0]>this._shape[0]>>>w||0>
t||0>v)throw Error("gl-texture2d: Texture dimensions are out of bounds");B=this.format;var A=this.type,z=this._mipLevels,E=k.dtype,C=k.shape.slice();if(2>C.length||3<C.length)throw Error("gl-texture2d: Invalid ndarray, must be 2d or 3d");var u=l(C,k.stride.slice());"float32"===E?E=y.FLOAT:"float64"===E?(E=y.FLOAT,u=!1):"uint8"===E?E=y.UNSIGNED_BYTE:(E=y.UNSIGNED_BYTE,u=!1);if(2===C.length){var D=y.LUMINANCE;C=[C[0],C[1],1];k=g(k.data,C,[k.stride[0],k.stride[1],1],k.offset)}else if(3===C.length)if(1===
C[2])D=y.ALPHA;else if(2===C[2])D=y.LUMINANCE_ALPHA;else if(3===C[2])D=y.RGB;else if(4===C[2])D=y.RGBA;else throw Error("gl-texture2d: Invalid shape for pixel coords");else throw Error("gl-texture2d: Invalid shape for texture");D!==y.LUMINANCE&&D!==y.ALPHA||B!==y.LUMINANCE&&B!==y.ALPHA||(D=B);if(D!==B)throw Error("gl-texture2d: Incompatible texture format for setPixels");D=k.size;var G=0>z.indexOf(w);G&&z.push(w);E===A&&u?0===k.offset&&k.data.length===D?G?y.texImage2D(y.TEXTURE_2D,w,B,C[0],C[1],0,
B,A,k.data):y.texSubImage2D(y.TEXTURE_2D,w,t,v,C[0],C[1],B,A,k.data):G?y.texImage2D(y.TEXTURE_2D,w,B,C[0],C[1],0,B,A,k.data.subarray(k.offset,k.offset+D)):y.texSubImage2D(y.TEXTURE_2D,w,t,v,C[0],C[1],B,A,k.data.subarray(k.offset,k.offset+D)):(z=A===y.FLOAT?p.mallocFloat32(D):p.mallocUint8(D),u=g(z,C,[C[2],C[2]*C[0],1]),E===y.FLOAT&&A===y.UNSIGNED_BYTE?n.muls(u,k,255):n.assign(u,k),G?y.texImage2D(y.TEXTURE_2D,w,B,C[0],C[1],0,B,A,z.subarray(0,D)):y.texSubImage2D(y.TEXTURE_2D,w,t,v,C[0],C[1],B,A,z.subarray(0,
D)),A===y.FLOAT?p.freeFloat32(z):p.freeUint8(z))}else throw Error("gl-texture2d: Unsupported data type");}},{ndarray:495,"ndarray-ops":490,"typedarray-pool":595}],354:[function(b,N,I){(function(r){(function(){function q(h){if(h.container)if(h.container==document.body)document.body.style.width||(h.canvas.width=h.width||h.pixelRatio*r.innerWidth),document.body.style.height||(h.canvas.height=h.height||h.pixelRatio*r.innerHeight);else{var g=h.container.getBoundingClientRect();h.canvas.width=h.width||
g.right-g.left;h.canvas.height=h.height||g.bottom-g.top}}function m(h){return"function"===typeof h.getContext&&"width"in h&&"height"in h}function l(){var h=document.createElement("canvas");h.style.position="absolute";h.style.top=0;h.style.left=0;return h}var a=b("pick-by-alias");N.exports=function(h){h?"string"===typeof h&&(h={container:h}):h={};h=m(h)?{container:h}:"string"===typeof h.nodeName&&"function"===typeof h.appendChild&&"function"===typeof h.getBoundingClientRect?{container:h}:"function"===
typeof h.drawArrays||"function"===typeof h.drawElements?{gl:h}:a(h,{container:"container target element el canvas holder parent parentNode wrapper use ref root node",gl:"gl context webgl glContext",attrs:"attributes attrs contextAttributes",pixelRatio:"pixelRatio pxRatio px ratio pxratio pixelratio",width:"w width",height:"h height"},!0);h.pixelRatio||(h.pixelRatio=r.pixelRatio||1);if(h.gl)return h.gl;h.canvas&&(h.container=h.canvas.parentNode);if(h.container){if("string"===typeof h.container){var g=
document.querySelector(h.container);if(!g)throw Error("Element "+h.container+" is not found");h.container=g}m(h.container)?(h.canvas=h.container,h.container=h.canvas.parentNode):h.canvas||(h.canvas=l(),h.container.appendChild(h.canvas),q(h))}else if(!h.canvas)if("undefined"!==typeof document)h.container=document.body||document.documentElement,h.canvas=l(),h.container.appendChild(h.canvas),q(h);else throw Error("Not DOM environment. Use headless-gl.");if(!h.gl)try{h.gl=h.canvas.getContext("webgl",
h.attrs)}catch(n){try{h.gl=h.canvas.getContext("experimental-webgl",h.attrs)}catch(p){h.gl=h.canvas.getContext("webgl-experimental",h.attrs)}}return h.gl}}).call(this)}).call(this,"undefined"!==typeof od?od:"undefined"!==typeof self?self:"undefined"!==typeof window?window:{})},{"pick-by-alias":511}],355:[function(b,N,I){N.exports=function(r,q,m){q?q.bind():r.bindBuffer(r.ELEMENT_ARRAY_BUFFER,null);q=r.getParameter(r.MAX_VERTEX_ATTRIBS)|0;if(m){if(m.length>q)throw Error("gl-vao: Too many vertex attributes");
for(var l=0;l<m.length;++l){var a=m[l];if(a.buffer){var h=a.size||4,g=a.type||r.FLOAT,n=!!a.normalized,p=a.stride||0,d=a.offset||0;a.buffer.bind();r.enableVertexAttribArray(l);r.vertexAttribPointer(l,h,g,n,p,d)}else{if("number"===typeof a)r.vertexAttrib1f(l,a);else if(1===a.length)r.vertexAttrib1f(l,a[0]);else if(2===a.length)r.vertexAttrib2f(l,a[0],a[1]);else if(3===a.length)r.vertexAttrib3f(l,a[0],a[1],a[2]);else if(4===a.length)r.vertexAttrib4f(l,a[0],a[1],a[2],a[3]);else throw Error("gl-vao: Invalid vertex attribute");
r.disableVertexAttribArray(l)}}}else r.bindBuffer(r.ARRAY_BUFFER,null),l=0;for(;l<q;++l)r.disableVertexAttribArray(l)}},{}],356:[function(b,N,I){function r(m){this.gl=m;this._attributes=this._elements=null;this._elementsType=m.UNSIGNED_SHORT}var q=b("./do-bind.js");r.prototype.bind=function(){q(this.gl,this._elements,this._attributes)};r.prototype.update=function(m,l,a){this._elements=l;this._attributes=m;this._elementsType=a||this.gl.UNSIGNED_SHORT};r.prototype.dispose=function(){};r.prototype.unbind=
function(){};r.prototype.draw=function(m,l,a){a=a||0;var h=this.gl;this._elements?h.drawElements(m,l,this._elementsType,a):h.drawArrays(m,a,l)};N.exports=function(m){return new r(m)}},{"./do-bind.js":355}],357:[function(b,N,I){function r(l,a,h,g,n,p){this.location=l;this.dimension=a;this.a=h;this.b=g;this.c=n;this.d=p}function q(l,a,h){this.gl=l;this._ext=a;this.handle=h;this._attribs=[];this._useElements=!1;this._elementsType=l.UNSIGNED_SHORT}var m=b("./do-bind.js");r.prototype.bind=function(l){switch(this.dimension){case 1:l.vertexAttrib1f(this.location,
this.a);break;case 2:l.vertexAttrib2f(this.location,this.a,this.b);break;case 3:l.vertexAttrib3f(this.location,this.a,this.b,this.c);break;case 4:l.vertexAttrib4f(this.location,this.a,this.b,this.c,this.d)}};q.prototype.bind=function(){this._ext.bindVertexArrayOES(this.handle);for(var l=0;l<this._attribs.length;++l)this._attribs[l].bind(this.gl)};q.prototype.unbind=function(){this._ext.bindVertexArrayOES(null)};q.prototype.dispose=function(){this._ext.deleteVertexArrayOES(this.handle)};q.prototype.update=
function(l,a,h){this.bind();m(this.gl,a,l);this.unbind();this._attribs.length=0;if(l)for(var g=0;g<l.length;++g){var n=l[g];"number"===typeof n?this._attribs.push(new r(g,1,n)):Array.isArray(n)&&this._attribs.push(new r(g,n.length,n[0],n[1],n[2],n[3]))}this._useElements=!!a;this._elementsType=h||this.gl.UNSIGNED_SHORT};q.prototype.draw=function(l,a,h){h=h||0;var g=this.gl;this._useElements?g.drawElements(l,a,this._elementsType,h):g.drawArrays(l,h,a)};N.exports=function(l,a){return new q(l,a,a.createVertexArrayOES())}},
{"./do-bind.js":355}],358:[function(b,N,I){function r(l){this.bindVertexArrayOES=l.bindVertexArray.bind(l);this.createVertexArrayOES=l.createVertexArray.bind(l);this.deleteVertexArrayOES=l.deleteVertexArray.bind(l)}var q=b("./lib/vao-native.js"),m=b("./lib/vao-emulated.js");N.exports=function(l,a,h,g){var n=l.createVertexArray?new r(l):l.getExtension("OES_vertex_array_object");l=n?q(l,n):m(l);l.update(a,h,g);return l}},{"./lib/vao-emulated.js":356,"./lib/vao-native.js":357}],359:[function(b,N,I){N.exports=
function(r,q,m){r[0]=q[0]+m[0];r[1]=q[1]+m[1];r[2]=q[2]+m[2];return r}},{}],360:[function(b,N,I){N.exports=function(l,a){l=r(l[0],l[1],l[2]);a=r(a[0],a[1],a[2]);q(l,l);q(a,a);a=m(l,a);return 1<a?0:Math.acos(a)};var r=b("./fromValues"),q=b("./normalize"),m=b("./dot")},{"./dot":370,"./fromValues":376,"./normalize":387}],361:[function(b,N,I){N.exports=function(r,q){r[0]=Math.ceil(q[0]);r[1]=Math.ceil(q[1]);r[2]=Math.ceil(q[2]);return r}},{}],362:[function(b,N,I){N.exports=function(r){var q=new Float32Array(3);
q[0]=r[0];q[1]=r[1];q[2]=r[2];return q}},{}],363:[function(b,N,I){N.exports=function(r,q){r[0]=q[0];r[1]=q[1];r[2]=q[2];return r}},{}],364:[function(b,N,I){N.exports=function(){var r=new Float32Array(3);r[0]=0;r[1]=0;r[2]=0;return r}},{}],365:[function(b,N,I){N.exports=function(r,q,m){var l=q[0],a=q[1];q=q[2];var h=m[0],g=m[1];m=m[2];r[0]=a*m-q*g;r[1]=q*h-l*m;r[2]=l*g-a*h;return r}},{}],366:[function(b,N,I){N.exports=b("./distance")},{"./distance":367}],367:[function(b,N,I){N.exports=function(r,q){var m=
q[0]-r[0],l=q[1]-r[1];r=q[2]-r[2];return Math.sqrt(m*m+l*l+r*r)}},{}],368:[function(b,N,I){N.exports=b("./divide")},{"./divide":369}],369:[function(b,N,I){N.exports=function(r,q,m){r[0]=q[0]/m[0];r[1]=q[1]/m[1];r[2]=q[2]/m[2];return r}},{}],370:[function(b,N,I){N.exports=function(r,q){return r[0]*q[0]+r[1]*q[1]+r[2]*q[2]}},{}],371:[function(b,N,I){N.exports=1E-6},{}],372:[function(b,N,I){N.exports=function(q,m){var l=q[0],a=q[1];q=q[2];var h=m[0],g=m[1];m=m[2];return Math.abs(l-h)<=r*Math.max(1,Math.abs(l),
Math.abs(h))&&Math.abs(a-g)<=r*Math.max(1,Math.abs(a),Math.abs(g))&&Math.abs(q-m)<=r*Math.max(1,Math.abs(q),Math.abs(m))};var r=b("./epsilon")},{"./epsilon":371}],373:[function(b,N,I){N.exports=function(r,q){return r[0]===q[0]&&r[1]===q[1]&&r[2]===q[2]}},{}],374:[function(b,N,I){N.exports=function(r,q){r[0]=Math.floor(q[0]);r[1]=Math.floor(q[1]);r[2]=Math.floor(q[2]);return r}},{}],375:[function(b,N,I){N.exports=function(q,m,l,a,h,g){m||(m=3);l||(l=0);for(a=a?Math.min(a*m+l,q.length):q.length;l<a;l+=
m)r[0]=q[l],r[1]=q[l+1],r[2]=q[l+2],h(r,r,g),q[l]=r[0],q[l+1]=r[1],q[l+2]=r[2];return q};var r=b("./create")()},{"./create":364}],376:[function(b,N,I){N.exports=function(r,q,m){var l=new Float32Array(3);l[0]=r;l[1]=q;l[2]=m;return l}},{}],377:[function(b,N,I){N.exports={EPSILON:b("./epsilon"),create:b("./create"),clone:b("./clone"),angle:b("./angle"),fromValues:b("./fromValues"),copy:b("./copy"),set:b("./set"),equals:b("./equals"),exactEquals:b("./exactEquals"),add:b("./add"),subtract:b("./subtract"),
sub:b("./sub"),multiply:b("./multiply"),mul:b("./mul"),divide:b("./divide"),div:b("./div"),min:b("./min"),max:b("./max"),floor:b("./floor"),ceil:b("./ceil"),round:b("./round"),scale:b("./scale"),scaleAndAdd:b("./scaleAndAdd"),distance:b("./distance"),dist:b("./dist"),squaredDistance:b("./squaredDistance"),sqrDist:b("./sqrDist"),length:b("./length"),len:b("./len"),squaredLength:b("./squaredLength"),sqrLen:b("./sqrLen"),negate:b("./negate"),inverse:b("./inverse"),normalize:b("./normalize"),dot:b("./dot"),
cross:b("./cross"),lerp:b("./lerp"),random:b("./random"),transformMat4:b("./transformMat4"),transformMat3:b("./transformMat3"),transformQuat:b("./transformQuat"),rotateX:b("./rotateX"),rotateY:b("./rotateY"),rotateZ:b("./rotateZ"),forEach:b("./forEach")}},{"./add":359,"./angle":360,"./ceil":361,"./clone":362,"./copy":363,"./create":364,"./cross":365,"./dist":366,"./distance":367,"./div":368,"./divide":369,"./dot":370,"./epsilon":371,"./equals":372,"./exactEquals":373,"./floor":374,"./forEach":375,
"./fromValues":376,"./inverse":378,"./len":379,"./length":380,"./lerp":381,"./max":382,"./min":383,"./mul":384,"./multiply":385,"./negate":386,"./normalize":387,"./random":388,"./rotateX":389,"./rotateY":390,"./rotateZ":391,"./round":392,"./scale":393,"./scaleAndAdd":394,"./set":395,"./sqrDist":396,"./sqrLen":397,"./squaredDistance":398,"./squaredLength":399,"./sub":400,"./subtract":401,"./transformMat3":402,"./transformMat4":403,"./transformQuat":404}],378:[function(b,N,I){N.exports=function(r,q){r[0]=
1/q[0];r[1]=1/q[1];r[2]=1/q[2];return r}},{}],379:[function(b,N,I){N.exports=b("./length")},{"./length":380}],380:[function(b,N,I){N.exports=function(r){var q=r[0],m=r[1];r=r[2];return Math.sqrt(q*q+m*m+r*r)}},{}],381:[function(b,N,I){N.exports=function(r,q,m,l){var a=q[0],h=q[1];q=q[2];r[0]=a+l*(m[0]-a);r[1]=h+l*(m[1]-h);r[2]=q+l*(m[2]-q);return r}},{}],382:[function(b,N,I){N.exports=function(r,q,m){r[0]=Math.max(q[0],m[0]);r[1]=Math.max(q[1],m[1]);r[2]=Math.max(q[2],m[2]);return r}},{}],383:[function(b,
N,I){N.exports=function(r,q,m){r[0]=Math.min(q[0],m[0]);r[1]=Math.min(q[1],m[1]);r[2]=Math.min(q[2],m[2]);return r}},{}],384:[function(b,N,I){N.exports=b("./multiply")},{"./multiply":385}],385:[function(b,N,I){N.exports=function(r,q,m){r[0]=q[0]*m[0];r[1]=q[1]*m[1];r[2]=q[2]*m[2];return r}},{}],386:[function(b,N,I){N.exports=function(r,q){r[0]=-q[0];r[1]=-q[1];r[2]=-q[2];return r}},{}],387:[function(b,N,I){N.exports=function(r,q){var m=q[0],l=q[1],a=q[2];m=m*m+l*l+a*a;0<m&&(m=1/Math.sqrt(m),r[0]=
q[0]*m,r[1]=q[1]*m,r[2]=q[2]*m);return r}},{}],388:[function(b,N,I){N.exports=function(r,q){q=q||1;var m=2*Math.random()*Math.PI,l=2*Math.random()-1,a=Math.sqrt(1-l*l)*q;r[0]=Math.cos(m)*a;r[1]=Math.sin(m)*a;r[2]=l*q;return r}},{}],389:[function(b,N,I){N.exports=function(r,q,m,l){var a=m[1];m=m[2];var h=q[1]-a,g=q[2]-m,n=Math.sin(l);l=Math.cos(l);r[0]=q[0];r[1]=a+h*l-g*n;r[2]=m+h*n+g*l;return r}},{}],390:[function(b,N,I){N.exports=function(r,q,m,l){var a=m[0];m=m[2];var h=q[0]-a,g=q[2]-m,n=Math.sin(l);
l=Math.cos(l);r[0]=a+g*n+h*l;r[1]=q[1];r[2]=m+g*l-h*n;return r}},{}],391:[function(b,N,I){N.exports=function(r,q,m,l){var a=m[0];m=m[1];var h=q[0]-a,g=q[1]-m,n=Math.sin(l);l=Math.cos(l);r[0]=a+h*l-g*n;r[1]=m+h*n+g*l;r[2]=q[2];return r}},{}],392:[function(b,N,I){N.exports=function(r,q){r[0]=Math.round(q[0]);r[1]=Math.round(q[1]);r[2]=Math.round(q[2]);return r}},{}],393:[function(b,N,I){N.exports=function(r,q,m){r[0]=q[0]*m;r[1]=q[1]*m;r[2]=q[2]*m;return r}},{}],394:[function(b,N,I){N.exports=function(r,
q,m,l){r[0]=q[0]+m[0]*l;r[1]=q[1]+m[1]*l;r[2]=q[2]+m[2]*l;return r}},{}],395:[function(b,N,I){N.exports=function(r,q,m,l){r[0]=q;r[1]=m;r[2]=l;return r}},{}],396:[function(b,N,I){N.exports=b("./squaredDistance")},{"./squaredDistance":398}],397:[function(b,N,I){N.exports=b("./squaredLength")},{"./squaredLength":399}],398:[function(b,N,I){N.exports=function(r,q){var m=q[0]-r[0],l=q[1]-r[1];r=q[2]-r[2];return m*m+l*l+r*r}},{}],399:[function(b,N,I){N.exports=function(r){var q=r[0],m=r[1];r=r[2];return q*
q+m*m+r*r}},{}],400:[function(b,N,I){N.exports=b("./subtract")},{"./subtract":401}],401:[function(b,N,I){N.exports=function(r,q,m){r[0]=q[0]-m[0];r[1]=q[1]-m[1];r[2]=q[2]-m[2];return r}},{}],402:[function(b,N,I){N.exports=function(r,q,m){var l=q[0],a=q[1];q=q[2];r[0]=l*m[0]+a*m[3]+q*m[6];r[1]=l*m[1]+a*m[4]+q*m[7];r[2]=l*m[2]+a*m[5]+q*m[8];return r}},{}],403:[function(b,N,I){N.exports=function(r,q,m){var l=q[0],a=q[1];q=q[2];var h=m[3]*l+m[7]*a+m[11]*q+m[15];h=h||1;r[0]=(m[0]*l+m[4]*a+m[8]*q+m[12])/
h;r[1]=(m[1]*l+m[5]*a+m[9]*q+m[13])/h;r[2]=(m[2]*l+m[6]*a+m[10]*q+m[14])/h;return r}},{}],404:[function(b,N,I){N.exports=function(r,q,m){var l=q[0],a=q[1],h=q[2];q=m[0];var g=m[1],n=m[2];m=m[3];var p=m*l+g*h-n*a,d=m*a+n*l-q*h,e=m*h+q*a-g*l;l=-q*l-g*a-n*h;r[0]=p*m+l*-q+d*-n-e*-g;r[1]=d*m+l*-g+e*-q-p*-n;r[2]=e*m+l*-n+p*-g-d*-q;return r}},{}],405:[function(b,N,I){N.exports=function(r,q,m){r[0]=q[0]+m[0];r[1]=q[1]+m[1];r[2]=q[2]+m[2];r[3]=q[3]+m[3];return r}},{}],406:[function(b,N,I){N.exports=function(r){var q=
new Float32Array(4);q[0]=r[0];q[1]=r[1];q[2]=r[2];q[3]=r[3];return q}},{}],407:[function(b,N,I){N.exports=function(r,q){r[0]=q[0];r[1]=q[1];r[2]=q[2];r[3]=q[3];return r}},{}],408:[function(b,N,I){N.exports=function(){var r=new Float32Array(4);r[0]=0;r[1]=0;r[2]=0;r[3]=0;return r}},{}],409:[function(b,N,I){N.exports=function(r,q){var m=q[0]-r[0],l=q[1]-r[1],a=q[2]-r[2];r=q[3]-r[3];return Math.sqrt(m*m+l*l+a*a+r*r)}},{}],410:[function(b,N,I){N.exports=function(r,q,m){r[0]=q[0]/m[0];r[1]=q[1]/m[1];r[2]=
q[2]/m[2];r[3]=q[3]/m[3];return r}},{}],411:[function(b,N,I){N.exports=function(r,q){return r[0]*q[0]+r[1]*q[1]+r[2]*q[2]+r[3]*q[3]}},{}],412:[function(b,N,I){N.exports=function(r,q,m,l){var a=new Float32Array(4);a[0]=r;a[1]=q;a[2]=m;a[3]=l;return a}},{}],413:[function(b,N,I){N.exports={create:b("./create"),clone:b("./clone"),fromValues:b("./fromValues"),copy:b("./copy"),set:b("./set"),add:b("./add"),subtract:b("./subtract"),multiply:b("./multiply"),divide:b("./divide"),min:b("./min"),max:b("./max"),
scale:b("./scale"),scaleAndAdd:b("./scaleAndAdd"),distance:b("./distance"),squaredDistance:b("./squaredDistance"),length:b("./length"),squaredLength:b("./squaredLength"),negate:b("./negate"),inverse:b("./inverse"),normalize:b("./normalize"),dot:b("./dot"),lerp:b("./lerp"),random:b("./random"),transformMat4:b("./transformMat4"),transformQuat:b("./transformQuat")}},{"./add":405,"./clone":406,"./copy":407,"./create":408,"./distance":409,"./divide":410,"./dot":411,"./fromValues":412,"./inverse":414,"./length":415,
"./lerp":416,"./max":417,"./min":418,"./multiply":419,"./negate":420,"./normalize":421,"./random":422,"./scale":423,"./scaleAndAdd":424,"./set":425,"./squaredDistance":426,"./squaredLength":427,"./subtract":428,"./transformMat4":429,"./transformQuat":430}],414:[function(b,N,I){N.exports=function(r,q){r[0]=1/q[0];r[1]=1/q[1];r[2]=1/q[2];r[3]=1/q[3];return r}},{}],415:[function(b,N,I){N.exports=function(r){var q=r[0],m=r[1],l=r[2];r=r[3];return Math.sqrt(q*q+m*m+l*l+r*r)}},{}],416:[function(b,N,I){N.exports=
function(r,q,m,l){var a=q[0],h=q[1],g=q[2];q=q[3];r[0]=a+l*(m[0]-a);r[1]=h+l*(m[1]-h);r[2]=g+l*(m[2]-g);r[3]=q+l*(m[3]-q);return r}},{}],417:[function(b,N,I){N.exports=function(r,q,m){r[0]=Math.max(q[0],m[0]);r[1]=Math.max(q[1],m[1]);r[2]=Math.max(q[2],m[2]);r[3]=Math.max(q[3],m[3]);return r}},{}],418:[function(b,N,I){N.exports=function(r,q,m){r[0]=Math.min(q[0],m[0]);r[1]=Math.min(q[1],m[1]);r[2]=Math.min(q[2],m[2]);r[3]=Math.min(q[3],m[3]);return r}},{}],419:[function(b,N,I){N.exports=function(r,
q,m){r[0]=q[0]*m[0];r[1]=q[1]*m[1];r[2]=q[2]*m[2];r[3]=q[3]*m[3];return r}},{}],420:[function(b,N,I){N.exports=function(r,q){r[0]=-q[0];r[1]=-q[1];r[2]=-q[2];r[3]=-q[3];return r}},{}],421:[function(b,N,I){N.exports=function(r,q){var m=q[0],l=q[1],a=q[2];q=q[3];var h=m*m+l*l+a*a+q*q;0<h&&(h=1/Math.sqrt(h),r[0]=m*h,r[1]=l*h,r[2]=a*h,r[3]=q*h);return r}},{}],422:[function(b,N,I){var r=b("./normalize"),q=b("./scale");N.exports=function(m,l){l=l||1;m[0]=Math.random();m[1]=Math.random();m[2]=Math.random();
m[3]=Math.random();r(m,m);q(m,m,l);return m}},{"./normalize":421,"./scale":423}],423:[function(b,N,I){N.exports=function(r,q,m){r[0]=q[0]*m;r[1]=q[1]*m;r[2]=q[2]*m;r[3]=q[3]*m;return r}},{}],424:[function(b,N,I){N.exports=function(r,q,m,l){r[0]=q[0]+m[0]*l;r[1]=q[1]+m[1]*l;r[2]=q[2]+m[2]*l;r[3]=q[3]+m[3]*l;return r}},{}],425:[function(b,N,I){N.exports=function(r,q,m,l,a){r[0]=q;r[1]=m;r[2]=l;r[3]=a;return r}},{}],426:[function(b,N,I){N.exports=function(r,q){var m=q[0]-r[0],l=q[1]-r[1],a=q[2]-r[2];
r=q[3]-r[3];return m*m+l*l+a*a+r*r}},{}],427:[function(b,N,I){N.exports=function(r){var q=r[0],m=r[1],l=r[2];r=r[3];return q*q+m*m+l*l+r*r}},{}],428:[function(b,N,I){N.exports=function(r,q,m){r[0]=q[0]-m[0];r[1]=q[1]-m[1];r[2]=q[2]-m[2];r[3]=q[3]-m[3];return r}},{}],429:[function(b,N,I){N.exports=function(r,q,m){var l=q[0],a=q[1],h=q[2];q=q[3];r[0]=m[0]*l+m[4]*a+m[8]*h+m[12]*q;r[1]=m[1]*l+m[5]*a+m[9]*h+m[13]*q;r[2]=m[2]*l+m[6]*a+m[10]*h+m[14]*q;r[3]=m[3]*l+m[7]*a+m[11]*h+m[15]*q;return r}},{}],430:[function(b,
N,I){N.exports=function(r,q,m){var l=q[0],a=q[1],h=q[2],g=m[0],n=m[1],p=m[2];m=m[3];var d=m*l+n*h-p*a,e=m*a+p*l-g*h,f=m*h+g*a-n*l;l=-g*l-n*a-p*h;r[0]=d*m+l*-g+e*-p-f*-n;r[1]=e*m+l*-n+f*-g-d*-p;r[2]=f*m+l*-p+d*-n-e*-g;r[3]=q[3];return r}},{}],431:[function(b,N,I){var r=b("glsl-tokenizer"),q=b("atob-lite");N.exports=function(m){m=Array.isArray(m)?m:r(m);for(var l=0;l<m.length;l++){var a=m[l];if("preprocessor"===a.type&&(a=a.data.match(/#define\s+SHADER_NAME(_B64)?\s+(.+)$/))&&a[2])return m=a[2],(a[1]?
q(m):m).trim()}}},{"atob-lite":77,"glsl-tokenizer":438}],432:[function(b,N,I){N.exports=function(E){function C(qa){qa.length&&U.push({type:z[M],data:qa,position:ba,line:S,column:X})}function u(){O=O.length?[]:O;if("/"===T&&"*"===P)return ba=Q+H-1,M=n,T=P,H+1;if("/"===T&&"/"===P)return ba=Q+H-1,M=p,T=P,H+1;if("#"===P)return M=d,ba=Q+H,H;if(/\s/.test(P))return M=y,ba=Q+H,H;ca=/\d/.test(P);ia=/[^\w_]/.test(P);ba=Q+H;M=ca?f:ia?e:g;return H}function D(){if(("\r"===P||"\n"===P)&&"\\"!==T)return C(O.join("")),
M=h,H;O.push(P);T=P;return H+1}function G(){if("."===T&&/\d/.test(P))return M=k,H;if("/"===T&&"*"===P)return M=n,H;if("/"===T&&"/"===P)return M=p,H;if("."===P&&O.length){for(;J(O););M=k;return H}if(";"===P||")"===P||"("===P){if(O.length)for(;J(O););C(P);M=h;return H+1}var qa=2===O.length&&"\x3d"!==P;if(/[\w_\d\s]/.test(P)||qa){for(;J(O););M=h;return H}O.push(P);T=P;return H+1}function J(qa){var pa=0;do{var na=q.indexOf(qa.slice(0,qa.length+pa).join(""));var ka=q[na];if(-1===na){if(0<pa--+qa.length)continue;
ka=qa.slice(0,1).join("")}C(ka);ba+=ka.length;O=O.slice(ka.length);return O.length}while(1)}function L(){if("."===P||/[eE]/.test(P))return O.push(P),M=k,T=P,H+1;if("x"===P&&1===O.length&&"0"===O[0])return M=A,O.push(P),T=P,H+1;if(/[^\d]/.test(P))return C(O.join("")),M=h,H;O.push(P);T=P;return H+1}function K(){"f"===P&&(O.push(P),T=P,H+=1);if(/[eE]/.test(P)||("-"===P||"+"===P)&&/[eE]/.test(T))return O.push(P),T=P,H+1;if(/[^\d]/.test(P))return C(O.join("")),M=h,H;O.push(P);T=P;return H+1}var H=0,Q=
0,M=h,P,T,O=[],U=[],S=1,X=0,ba=0,ca=!1,ia=!1,ja="",la;E=E||{};var da=m,oa=r;"300 es"===E.version&&(da=a,oa=l);var sa={},ma={};for(H=0;H<da.length;H++)sa[da[H]]=!0;for(H=0;H<oa.length;H++)ma[oa[H]]=!0;return function(qa){U=[];if(null!==qa){H=0;qa.toString&&(qa=qa.toString());ja+=qa.replace(/\r\n/g,"\n");for(la=ja.length;P=ja[H],H<la;){qa=H;switch(M){case n:"/"===P&&"*"===T?(O.push(P),C(O.join("")),M=h):(O.push(P),T=P);H+=1;break;case p:H=D();break;case d:H=D();break;case e:H=G();break;case f:H=L();
break;case A:/[^a-fA-F0-9]/.test(P)?(C(O.join("")),M=h):(O.push(P),T=P,H+=1);break;case k:H=K();break;case g:if(/[^\d\w_]/.test(P)){var pa=O.join("");M=ma[pa]?w:sa[pa]?v:t;C(O.join(""));M=h}else O.push(P),T=P,H+=1;break;case y:/[^\s]/g.test(P)?(C(O.join("")),M=h):(O.push(P),T=P,H+=1);break;case h:H=u()}if(qa!==H)switch(ja[qa]){case "\n":X=0;++S;break;default:++X}}Q+=H;ja=ja.slice(H);return U}O.length&&C(O.join(""));M=B;C("(eof)");return U}};var r=b("./lib/literals"),q=b("./lib/operators"),m=b("./lib/builtins"),
l=b("./lib/literals-300es"),a=b("./lib/builtins-300es"),h=999,g=9999,n=0,p=1,d=2,e=3,f=4,k=5,t=6,v=7,w=8,y=9,B=10,A=11,z="block-comment line-comment preprocessor operator integer float ident builtin keyword whitespace eof integer".split(" ")},{"./lib/builtins":434,"./lib/builtins-300es":433,"./lib/literals":436,"./lib/literals-300es":435,"./lib/operators":437}],433:[function(b,N,I){b=b("./builtins");b=b.slice().filter(function(r){return!/^(gl_|texture)/.test(r)});N.exports=b.concat("gl_VertexID gl_InstanceID gl_Position gl_PointSize gl_FragCoord gl_FrontFacing gl_FragDepth gl_PointCoord gl_MaxVertexAttribs gl_MaxVertexUniformVectors gl_MaxVertexOutputVectors gl_MaxFragmentInputVectors gl_MaxVertexTextureImageUnits gl_MaxCombinedTextureImageUnits gl_MaxTextureImageUnits gl_MaxFragmentUniformVectors gl_MaxDrawBuffers gl_MinProgramTexelOffset gl_MaxProgramTexelOffset gl_DepthRangeParameters gl_DepthRange trunc round roundEven isnan isinf floatBitsToInt floatBitsToUint intBitsToFloat uintBitsToFloat packSnorm2x16 unpackSnorm2x16 packUnorm2x16 unpackUnorm2x16 packHalf2x16 unpackHalf2x16 outerProduct transpose determinant inverse texture textureSize textureProj textureLod textureOffset texelFetch texelFetchOffset textureProjOffset textureLodOffset textureProjLod textureProjLodOffset textureGrad textureGradOffset textureProjGrad textureProjGradOffset".split(" "))},
{"./builtins":434}],434:[function(b,N,I){N.exports="abs acos all any asin atan ceil clamp cos cross dFdx dFdy degrees distance dot equal exp exp2 faceforward floor fract gl_BackColor gl_BackLightModelProduct gl_BackLightProduct gl_BackMaterial gl_BackSecondaryColor gl_ClipPlane gl_ClipVertex gl_Color gl_DepthRange gl_DepthRangeParameters gl_EyePlaneQ gl_EyePlaneR gl_EyePlaneS gl_EyePlaneT gl_Fog gl_FogCoord gl_FogFragCoord gl_FogParameters gl_FragColor gl_FragCoord gl_FragData gl_FragDepth gl_FragDepthEXT gl_FrontColor gl_FrontFacing gl_FrontLightModelProduct gl_FrontLightProduct gl_FrontMaterial gl_FrontSecondaryColor gl_LightModel gl_LightModelParameters gl_LightModelProducts gl_LightProducts gl_LightSource gl_LightSourceParameters gl_MaterialParameters gl_MaxClipPlanes gl_MaxCombinedTextureImageUnits gl_MaxDrawBuffers gl_MaxFragmentUniformComponents gl_MaxLights gl_MaxTextureCoords gl_MaxTextureImageUnits gl_MaxTextureUnits gl_MaxVaryingFloats gl_MaxVertexAttribs gl_MaxVertexTextureImageUnits gl_MaxVertexUniformComponents gl_ModelViewMatrix gl_ModelViewMatrixInverse gl_ModelViewMatrixInverseTranspose gl_ModelViewMatrixTranspose gl_ModelViewProjectionMatrix gl_ModelViewProjectionMatrixInverse gl_ModelViewProjectionMatrixInverseTranspose gl_ModelViewProjectionMatrixTranspose gl_MultiTexCoord0 gl_MultiTexCoord1 gl_MultiTexCoord2 gl_MultiTexCoord3 gl_MultiTexCoord4 gl_MultiTexCoord5 gl_MultiTexCoord6 gl_MultiTexCoord7 gl_Normal gl_NormalMatrix gl_NormalScale gl_ObjectPlaneQ gl_ObjectPlaneR gl_ObjectPlaneS gl_ObjectPlaneT gl_Point gl_PointCoord gl_PointParameters gl_PointSize gl_Position gl_ProjectionMatrix gl_ProjectionMatrixInverse gl_ProjectionMatrixInverseTranspose gl_ProjectionMatrixTranspose gl_SecondaryColor gl_TexCoord gl_TextureEnvColor gl_TextureMatrix gl_TextureMatrixInverse gl_TextureMatrixInverseTranspose gl_TextureMatrixTranspose gl_Vertex greaterThan greaterThanEqual inversesqrt length lessThan lessThanEqual log log2 matrixCompMult max min mix mod normalize not notEqual pow radians reflect refract sign sin smoothstep sqrt step tan texture2D texture2DLod texture2DProj texture2DProjLod textureCube textureCubeLod texture2DLodEXT texture2DProjLodEXT textureCubeLodEXT texture2DGradEXT texture2DProjGradEXT textureCubeGradEXT".split(" ")},
{}],435:[function(b,N,I){b=b("./literals");N.exports=b.slice().concat("layout centroid smooth case mat2x2 mat2x3 mat2x4 mat3x2 mat3x3 mat3x4 mat4x2 mat4x3 mat4x4 uvec2 uvec3 uvec4 samplerCubeShadow sampler2DArray sampler2DArrayShadow isampler2D isampler3D isamplerCube isampler2DArray usampler2D usampler3D usamplerCube usampler2DArray coherent restrict readonly writeonly resource atomic_uint noperspective patch sample subroutine common partition active filter image1D image2D image3D imageCube iimage1D iimage2D iimage3D iimageCube uimage1D uimage2D uimage3D uimageCube image1DArray image2DArray iimage1DArray iimage2DArray uimage1DArray uimage2DArray image1DShadow image2DShadow image1DArrayShadow image2DArrayShadow imageBuffer iimageBuffer uimageBuffer sampler1DArray sampler1DArrayShadow isampler1D isampler1DArray usampler1D usampler1DArray isampler2DRect usampler2DRect samplerBuffer isamplerBuffer usamplerBuffer sampler2DMS isampler2DMS usampler2DMS sampler2DMSArray isampler2DMSArray usampler2DMSArray".split(" "))},
{"./literals":436}],436:[function(b,N,I){N.exports="precision highp mediump lowp attribute const uniform varying break continue do for while if else in out inout float int uint void bool true false discard return mat2 mat3 mat4 vec2 vec3 vec4 ivec2 ivec3 ivec4 bvec2 bvec3 bvec4 sampler1D sampler2D sampler3D samplerCube sampler1DShadow sampler2DShadow struct asm class union enum typedef template this packed goto switch default inline noinline volatile public static extern external interface long short double half fixed unsigned input output hvec2 hvec3 hvec4 dvec2 dvec3 dvec4 fvec2 fvec3 fvec4 sampler2DRect sampler3DRect sampler2DRectShadow sizeof cast namespace using".split(" ")},
{}],437:[function(b,N,I){N.exports="\x3c\x3c\x3d \x3e\x3e\x3d ++ -- \x3c\x3c \x3e\x3e \x3c\x3d \x3e\x3d \x3d\x3d !\x3d \x26\x26 || +\x3d -\x3d *\x3d /\x3d %\x3d \x26\x3d ^^ ^\x3d |\x3d ( ) [ ] . ! ~ * / % + - \x3c \x3e \x26 ^ | ? : \x3d , ; { }".split(" ")},{}],438:[function(b,N,I){var r=b("./index");N.exports=function(q,m){m=r(m);var l=[];l=l.concat(m(q));return l=l.concat(m(null))}},{"./index":432}],439:[function(b,N,I){arguments[4][257][0].apply(I,arguments)},{dup:257}],440:[function(b,N,I){I=
"undefined"!==typeof od?od:"undefined"!==typeof self?self:"undefined"!==typeof window?window:{};b=b("is-browser");b="function"===typeof I.matchMedia?!I.matchMedia("(hover: none)").matches:b;N.exports=b},{"is-browser":464}],441:[function(b,N,I){function r(){var q=!1;try{var m=Object.defineProperty({},"passive",{get:function(){q=!0}});window.addEventListener("test",null,m);window.removeEventListener("test",null,m)}catch(l){q=!1}return q}b=b("is-browser");N.exports=b&&r()},{"is-browser":464}],442:[function(b,
N,I){I.read=function(r,q,m,l,a){var h=8*a-l-1;var g=(1<<h)-1,n=g>>1,p=-7;a=m?a-1:0;var d=m?-1:1,e=r[q+a];a+=d;m=e&(1<<-p)-1;e>>=-p;for(p+=h;0<p;m=256*m+r[q+a],a+=d,p-=8);h=m&(1<<-p)-1;m>>=-p;for(p+=l;0<p;h=256*h+r[q+a],a+=d,p-=8);if(0===m)m=1-n;else{if(m===g)return h?NaN:Infinity*(e?-1:1);h+=Math.pow(2,l);m-=n}return(e?-1:1)*h*Math.pow(2,m-l)};I.write=function(r,q,m,l,a,h){var g,n=8*h-a-1,p=(1<<n)-1,d=p>>1,e=23===a?Math.pow(2,-24)-Math.pow(2,-77):0;h=l?0:h-1;var f=l?1:-1,k=0>q||0===q&&0>1/q?1:0;q=
Math.abs(q);isNaN(q)||Infinity===q?(q=isNaN(q)?1:0,l=p):(l=Math.floor(Math.log(q)/Math.LN2),1>q*(g=Math.pow(2,-l))&&(l--,g*=2),q=1<=l+d?q+e/g:q+e*Math.pow(2,1-d),2<=q*g&&(l++,g/=2),l+d>=p?(q=0,l=p):1<=l+d?(q=(q*g-1)*Math.pow(2,a),l+=d):(q=q*Math.pow(2,d-1)*Math.pow(2,a),l=0));for(;8<=a;r[m+h]=q&255,h+=f,q/=256,a-=8);l=l<<a|q;for(n+=a;0<n;r[m+h]=l&255,h+=f,l/=256,n-=8);r[m+h-f]|=128*k}},{}],443:[function(b,N,I){var r=b("./types");N.exports=function(q,m){var l,a;for(l in r)if(a=r[l].detect(q,m))return l}},
{"./types":446}],444:[function(b,N,I){(function(r){(function(){function q(p,d){var e=n(p,d);if(e in g&&(p=g[e].calculate(p,d),!1!==p))return p.type=e,p;throw new TypeError("unsupported file type: "+e+" (file: "+d+")");}function m(p,d){a.open(p,"r",function(e,f){if(e)return d(e);a.fstat(f,function(k,t){if(k)return d(k);k=t.size;if(0>=k)return d(Error("File size is not greater than 0  "+p));k=Math.min(k,524288);var v=r.alloc(k);a.read(f,v,0,k,0,function(w){if(w)return d(w);a.close(f,function(y){d(y,
v)})})})})}function l(p){p=a.openSync(p,"r");var d=a.fstatSync(p).size;d=Math.min(d,524288);var e=r.alloc(d);a.readSync(p,e,0,d,0);a.closeSync(p);return e}var a=b("fs"),h=b("path"),g=b("./types"),n=b("./detector");N.exports=function(p,d){if(r.isBuffer(p))return q(p);if("string"!==typeof p)throw new TypeError("invalid invocation");var e=h.resolve(p);if("function"===typeof d)m(e,function(f,k){if(f)return d(f);try{var t=q(k,e)}catch(v){f=v}d(f,t)});else return p=l(e),q(p,e)};N.exports.types=Object.keys(g)}).call(this)}).call(this,
b("buffer").Buffer)},{"./detector":443,"./types":446,buffer:111,fs:109,path:507}],445:[function(b,N,I){N.exports=function(r,q,m,l){return r["readUInt"+q+(l?"BE":"LE")].call(r,m||0)}},{}],446:[function(b,N,I){b={bmp:b("./types/bmp"),cur:b("./types/cur"),dds:b("./types/dds"),gif:b("./types/gif"),icns:b("./types/icns"),ico:b("./types/ico"),jpg:b("./types/jpg"),png:b("./types/png"),psd:b("./types/psd"),svg:b("./types/svg"),tiff:b("./types/tiff"),webp:b("./types/webp")};N.exports=b},{"./types/bmp":447,
"./types/cur":448,"./types/dds":449,"./types/gif":450,"./types/icns":451,"./types/ico":452,"./types/jpg":453,"./types/png":454,"./types/psd":455,"./types/svg":456,"./types/tiff":457,"./types/webp":458}],447:[function(b,N,I){N.exports={detect:function(r){return"BM"===r.toString("ascii",0,2)},calculate:function(r){return{width:r.readUInt32LE(18),height:Math.abs(r.readInt32LE(22))}}}},{}],448:[function(b,N,I){N.exports={detect:function(r){return 0!==r.readUInt16LE(0)?!1:2===r.readUInt16LE(2)},calculate:b("./ico").calculate}},
{"./ico":452}],449:[function(b,N,I){N.exports={detect:function(r){return 542327876===r.readUInt32LE(0)},calculate:function(r){return{height:r.readUInt32LE(12),width:r.readUInt32LE(16)}}}},{}],450:[function(b,N,I){var r=/^GIF8[79]a/;N.exports={detect:function(q){q=q.toString("ascii",0,6);return r.test(q)},calculate:function(q){return{width:q.readUInt16LE(6),height:q.readUInt16LE(8)}}}},{}],451:[function(b,N,I){function r(l,a){var h=a+4;return[l.toString("ascii",a,h),l.readUInt32BE(h)]}function q(l){var a=
m[l];return{width:a,height:a,type:l}}var m={ICON:32,"ICN#":32,"icm#":16,icm4:16,icm8:16,"ics#":16,ics4:16,ics8:16,is32:16,s8mk:16,icp4:16,icl4:32,icl8:32,il32:32,l8mk:32,icp5:32,ic11:32,ich4:48,ich8:48,ih32:48,h8mk:48,icp6:64,ic12:32,it32:128,t8mk:128,ic07:128,ic08:256,ic13:256,ic09:512,ic14:512,ic10:1024};N.exports={detect:function(l){return"icns"===l.toString("ascii",0,4)},calculate:function(l){var a=l.length,h=8,g=l.readUInt32BE(4),n;var p=r(l,h);var d=q(p[0]);h+=p[1];if(h===g)return d;for(n={width:d.width,
height:d.height,images:[d]};h<g&&h<a;)p=r(l,h),d=q(p[0]),h+=p[1],n.images.push(d);return n}}},{}],452:[function(b,N,I){function r(m,l){m=m.readUInt8(l);return 0===m?256:m}function q(m,l){l=6+16*l;return{width:r(m,l),height:r(m,l+1)}}N.exports={detect:function(m){return 0!==m.readUInt16LE(0)?!1:1===m.readUInt16LE(2)},calculate:function(m){var l=m.readUInt16LE(4),a=q(m,0),h;if(1===l)return a;a.images=[{width:a.width,height:a.height}];for(h=1;h<l;h+=1)a.images.push(q(m,h));return a}}},{}],453:[function(b,
N,I){var r=b("../readUInt");N.exports={detect:function(q){return"ffd8"===q.toString("hex",0,2)},calculate:function(q){q=q.slice(4);for(var m,l,a;q.length;){l=q.readUInt16BE(0);if("45786966"===q.toString("hex",2,6)){m=q.slice(2,l);var h=m.toString("hex",6,8);a="4d4d"===h;h="4949"===h;if(a||h)b:{h=r(m,16,14,a);for(var g=0;g<h;g++){var n=16+12*g;var p=n+12;if(n>m.length)break;p=m.slice(n,p);if(274===r(p,16,0,a)){if(3!==r(p,16,2,a))break;if(1!==r(p,32,4,a))break;m=r(p,16,8,a);break b}}m=void 0}else m=
void 0}a=q;h=l;if(h>a.length)throw new TypeError("Corrupt JPG, exceeded buffer limits");if(255!==a[h])throw new TypeError("Invalid JPG, marker table corrupted");a=q[l+1];if(192===a||193===a||194===a)return l+=5,l={height:q.readUInt16BE(l),width:q.readUInt16BE(l+2)},m?{width:l.width,height:l.height,orientation:m}:l;q=q.slice(l+2)}throw new TypeError("Invalid JPG, no size found");}}},{"../readUInt":445}],454:[function(b,N,I){N.exports={detect:function(r){if("PNG\r\n\n"===r.toString("ascii",1,8)){var q=
r.toString("ascii",12,16);"CgBI"===q&&(q=r.toString("ascii",28,32));if("IHDR"!==q)throw new TypeError("invalid png");return!0}},calculate:function(r){return"CgBI"===r.toString("ascii",12,16)?{width:r.readUInt32BE(32),height:r.readUInt32BE(36)}:{width:r.readUInt32BE(16),height:r.readUInt32BE(20)}}}},{}],455:[function(b,N,I){N.exports={detect:function(r){return"8BPS"===r.toString("ascii",0,4)},calculate:function(r){return{width:r.readUInt32BE(18),height:r.readUInt32BE(14)}}}},{}],456:[function(b,N,
I){function r(g){if(g=/([0-9.]+)([a-z]*)/.exec(g))return Math.round(parseFloat(g[1])*(h[g[2]]||1))}var q=/<svg\s([^>"']|"[^"]*"|'[^']*')*>/,m=/\swidth=(['"])([^%]+?)\1/,l=/\sheight=(['"])([^%]+?)\1/,a=/\sviewBox=(['"])(.+?)\1/,h={cm:96/2.54,mm:96/2.54/10,m:96/2.54*100,pt:96/72,pc:96/72/12,em:16,ex:8};N.exports={detect:function(g){return q.test(g)},calculate:function(g){if(g=g.toString("utf8").match(q)){var n=g[0];g=n.match(m);var p=n.match(l);n=n.match(a);g=g&&r(g[2]);p=p&&r(p[2]);var d;if(d=n)n=
n[2].split(" "),d={width:r(n[2]),height:r(n[3])};n=d;if(g&&p)return{width:g,height:p};if(n)return d=n.width/n.height,g=g?{width:g,height:Math.floor(g/d)}:p?{width:Math.floor(p*d),height:p}:{width:n.width,height:n.height},g}throw new TypeError("invalid svg");}}},{}],457:[function(b,N,I){(function(r){(function(){var q=b("fs"),m=b("../readUInt");N.exports={detect:function(l){l=l.toString("hex",0,4);return"49492a00"===l||"4d4d002a"===l},calculate:function(l,a){if(!a)throw new TypeError("Tiff doesn't support buffer");
var h=l.toString("ascii",0,2);h="BE"===("II"===h?"LE":"MM"===h?"BE":void 0);l=m(l,32,4,h);var g=1024,n=q.statSync(a).size;l+g>n&&(g=n-l-10);n=r.alloc(g);a=q.openSync(a,"r");q.readSync(a,n,0,g,l);l=n.slice(2);a={};for(var p;l&&l.length&&(g=m(l,16,0,h),n=m(l,16,2,h),p=m(l,32,4,h),0!==g);){if(1===p&&(3===n||4===n)){n=l;p=h;var d=m(n,16,8,p);n=(m(n,16,10,p)<<16)+d;a[g]=n}l=24<l.length?l.slice(12):void 0}h=a[256];a=a[257];if(!h||!a)throw new TypeError("Invalid Tiff, missing tags");return{width:h,height:a}}}}).call(this)}).call(this,
b("buffer").Buffer)},{"../readUInt":445,buffer:111,fs:109}],458:[function(b,N,I){N.exports={detect:function(r){var q="RIFF"===r.toString("ascii",0,4),m="WEBP"===r.toString("ascii",8,12);r="VP8"===r.toString("ascii",12,15);return q&&m&&r},calculate:function(r){var q=r.toString("ascii",12,16);r=r.slice(20,30);if("VP8X"===q)return q=r[0],0===(q&192)&&0===(q&1)?{width:1+r.readUIntLE(4,3),height:1+r.readUIntLE(7,3)}:!1;if("VP8 "===q&&47!==r[0])return{width:r.readInt16LE(6)&16383,height:r.readInt16LE(8)&
16383};var m=r.toString("hex",3,6);return"VP8L"===q&&"9d012a"!==m?{width:1+((r[2]&63)<<8|r[1]),height:1+((r[4]&15)<<10|r[3]<<2|(r[2]&192)>>6)}:!1}}},{}],459:[function(b,N,I){function r(p,d,e){this.vertices=p;this.adjacent=d;this.boundary=e;this.lastVisited=-1}function q(p,d,e){this.vertices=p;this.cell=d;this.index=e}function m(p,d){return g(p.vertices,d.vertices)}function l(p){for(var d=["function orient(){var tuple\x3dthis.tuple;return test("],e=0;e<=p;++e)0<e&&d.push(","),d.push("tuple[",e,"]");
d.push(")}return orient");d=new Function("test",d.join(""));(p=h[p+1])||(p=h);return d(p)}function a(p,d,e){this.dimension=p;this.vertices=d;this.simplices=e;this.interior=e.filter(function(f){return!f.boundary});this.tuple=Array(p+1);for(d=0;d<=p;++d)this.tuple[d]=this.vertices[d];(d=n[p])||(d=n[p]=l(p));this.orient=d}N.exports=function(p,d){var e=p.length;if(0===e)throw Error("Must have at least d+1 points");var f=p[0].length;if(e<=f)throw Error("Must input at least d+1 points");var k=p.slice(0,
f+1),t=h.apply(void 0,k);if(0===t)throw Error("Input not in general position");for(var v=Array(f+1),w=0;w<=f;++w)v[w]=w;0>t&&(v[0]=1,v[1]=0);t=new r(v,Array(f+1),!1);var y=t.adjacent,B=Array(f+2);for(w=0;w<=f;++w){for(var A=v.slice(),z=0;z<=f;++z)z===w&&(A[z]=-1);z=A[0];A[0]=A[1];A[1]=z;A=new r(A,Array(f+1),!0);y[w]=A;B[w]=A}B[f+1]=t;for(w=0;w<=f;++w)for(A=y[w].vertices,v=y[w].adjacent,z=0;z<=f;++z){var E=A[z];if(0>E)v[z]=t;else for(var C=0;C<=f;++C)0>y[C].vertices.indexOf(E)&&(v[z]=y[C])}k=new a(f,
k,B);d=!!d;for(w=f+1;w<e;++w)k.insert(p[w],d);return k.boundary()};var h=b("robust-orientation"),g=b("simplicial-complex").compareCells;r.prototype.flip=function(){var p=this.vertices[0];this.vertices[0]=this.vertices[1];this.vertices[1]=p;p=this.adjacent[0];this.adjacent[0]=this.adjacent[1];this.adjacent[1]=p};var n=[];b=a.prototype;b.handleBoundaryDegeneracy=function(p,d){var e=this.dimension,f=this.vertices.length-1,k=this.tuple,t=this.vertices,v=[p];for(p.lastVisited=-f;0<v.length;){p=v.pop();
p=p.adjacent;for(var w=0;w<=e;++w){var y=p[w];if(y.boundary&&!(y.lastVisited<=-f)){for(var B=y.vertices,A=0;A<=e;++A){var z=B[A];k[A]=0>z?d:t[z]}B=this.orient();if(0<B)return y;y.lastVisited=-f;0===B&&v.push(y)}}}return null};b.walk=function(p,d){var e=this.vertices.length-1,f=this.dimension,k=this.vertices,t=this.tuple,v=this.interior[d?this.interior.length*Math.random()|0:this.interior.length-1];a:for(;!v.boundary;){var w=v.vertices;d=v.adjacent;for(var y=0;y<=f;++y)t[y]=k[w[y]];v.lastVisited=e;
for(y=0;y<=f;++y)if(v=d[y],!(v.lastVisited>=e)){w=t[y];t[y]=p;var B=this.orient();t[y]=w;if(0>B)continue a;else v.lastVisited=v.boundary?-e:e}return}return v};b.addPeaks=function(p,d){var e=this.vertices.length-1,f=this.dimension,k=this.vertices,t=this.tuple,v=this.interior,w=this.simplices,y=[d];d.lastVisited=e;d.vertices[d.vertices.indexOf(-1)]=e;d.boundary=!1;v.push(d);for(var B=[];0<y.length;){d=y.pop();var A=d.vertices,z=d.adjacent,E=A.indexOf(e);if(!(0>E))for(var C=0;C<=f;++C)if(C!==E){var u=
z[C];if(u.boundary&&!(u.lastVisited>=e)){var D=u.vertices;if(u.lastVisited!==-e){for(var G=0,J=0;J<=f;++J)0>D[J]?(G=J,t[J]=p):t[J]=k[D[J]];if(0<this.orient()){D[G]=e;u.boundary=!1;v.push(u);y.push(u);u.lastVisited=e;continue}else u.lastVisited=-e}J=u.adjacent;D=A.slice();var L=z.slice();G=new r(D,L,!0);w.push(G);var K=J.indexOf(d);if(!(0>K))for(J[K]=G,L[E]=u,D[C]=-1,L[C]=d,z[C]=G,G.flip(),J=0;J<=f;++J)if(u=D[J],!(0>u||u===e)){u=Array(f-1);for(K=L=0;K<=f;++K){var H=D[K];0>H||K===J||(u[L++]=H)}B.push(new q(u,
G,J))}}}}B.sort(m);for(C=0;C+1<B.length;C+=2)p=B[C],d=B[C+1],e=d.index,0>p.index||0>e||(p.cell.adjacent[p.index]=d.cell,d.cell.adjacent[d.index]=p.cell)};b.insert=function(p,d){var e=this.vertices;e.push(p);if(d=this.walk(p,d)){for(var f=this.dimension,k=this.tuple,t=0;t<=f;++t){var v=d.vertices[t];k[t]=0>v?p:e[v]}e=this.orient(k);if(!(0>e)){if(0===e&&(d=this.handleBoundaryDegeneracy(d,p),!d))return;this.addPeaks(p,d)}}};b.boundary=function(){for(var p=this.dimension,d=[],e=this.simplices,f=e.length,
k=0;k<f;++k){var t=e[k];if(t.boundary){var v=Array(p);t=t.vertices;for(var w=0,y=0,B=0;B<=p;++B)0<=t[B]?v[w++]=t[B]:y=B&1;y===(p&1)&&(t=v[0],v[0]=v[1],v[1]=t);d.push(v)}}return d}},{"robust-orientation":548,"simplicial-complex":558}],460:[function(b,N,I){function r(t,v,w,y,B){this.mid=t;this.left=v;this.right=w;this.leftPoints=y;this.rightPoints=B;this.count=(v?v.count:0)+(w?w.count:0)+y.length}function q(t,v){t.mid=v.mid;t.left=v.left;t.right=v.right;t.leftPoints=v.leftPoints;t.rightPoints=v.rightPoints;
t.count=v.count}function m(t,v){v=e(v);t.mid=v.mid;t.left=v.left;t.right=v.right;t.leftPoints=v.leftPoints;t.rightPoints=v.rightPoints;t.count=v.count}function l(t,v){var w=t.intervals([]);v=w.indexOf(v);if(0>v)return 0;w.splice(v,1);m(t,w);return 1}function a(t,v,w){for(var y=0;y<t.length&&t[y][0]<=v;++y){var B=w(t[y]);if(B)return B}}function h(t,v,w){for(var y=t.length-1;0<=y&&t[y][1]>=v;--y){var B=w(t[y]);if(B)return B}}function g(t,v){for(var w=0;w<t.length;++w){var y=v(t[w]);if(y)return y}}function n(t,
v){return t-v}function p(t,v){var w=t[0]-v[0];return w?w:t[1]-v[1]}function d(t,v){var w=t[1]-v[1];return w?w:t[0]-v[0]}function e(t){if(0===t.length)return null;for(var v=[],w=0;w<t.length;++w)v.push(t[w][0],t[w][1]);v.sort(n);v=v[v.length>>1];var y=[],B=[],A=[];for(w=0;w<t.length;++w){var z=t[w];z[1]<v?y.push(z):v<z[0]?B.push(z):A.push(z)}t=A.slice();A.sort(p);t.sort(d);return new r(v,e(y),e(B),A,t)}function f(t){this.root=t}var k=b("binary-search-bounds");N.exports=function(t){return t&&0!==t.length?
new f(e(t)):new f(null)};b=r.prototype;b.intervals=function(t){t.push.apply(t,this.leftPoints);this.left&&this.left.intervals(t);this.right&&this.right.intervals(t);return t};b.insert=function(t){var v=this.count-this.leftPoints.length;this.count+=1;if(t[1]<this.mid)this.left?4*(this.left.count+1)>3*(v+1)?(v=this.intervals([]),v.push(t),m(this,v)):this.left.insert(t):this.left=e([t]);else if(t[0]>this.mid)this.right?4*(this.right.count+1)>3*(v+1)?(v=this.intervals([]),v.push(t),m(this,v)):this.right.insert(t):
this.right=e([t]);else{v=k.ge(this.leftPoints,t,p);var w=k.ge(this.rightPoints,t,d);this.leftPoints.splice(v,0,t);this.rightPoints.splice(w,0,t)}};b.remove=function(t){var v=this.count-this.leftPoints;if(t[1]<this.mid){if(!this.left)return 0;if(4*(this.right?this.right.count:0)>3*(v-1))return l(this,t);v=this.left.remove(t);if(2===v)return this.left=null,--this.count,1;1===v&&--this.count;return v}if(t[0]>this.mid){if(!this.right)return 0;if(4*(this.left?this.left.count:0)>3*(v-1))return l(this,t);
v=this.right.remove(t);if(2===v)return this.right=null,--this.count,1;1===v&&--this.count;return v}if(1===this.count)return this.leftPoints[0]===t?2:0;if(1===this.leftPoints.length&&this.leftPoints[0]===t){if(this.left&&this.right){t=this;for(var w=this.left;w.right;)t=w,w=w.right;if(t===this)w.right=this.right;else{var y=this.left;v=this.right;t.count-=w.count;t.right=w.left;w.left=y;w.right=v}q(this,w);this.count=(this.left?this.left.count:0)+(this.right?this.right.count:0)+this.leftPoints.length}else this.left?
q(this,this.left):q(this,this.right);return 1}for(y=k.ge(this.leftPoints,t,p);y<this.leftPoints.length&&this.leftPoints[y][0]===t[0];++y)if(this.leftPoints[y]===t)for(--this.count,this.leftPoints.splice(y,1),v=k.ge(this.rightPoints,t,d);v<this.rightPoints.length&&this.rightPoints[v][1]===t[1];++v)if(this.rightPoints[v]===t)return this.rightPoints.splice(v,1),1;return 0};b.queryPoint=function(t,v){if(t<this.mid){if(this.left){var w=this.left.queryPoint(t,v);if(w)return w}return a(this.leftPoints,t,
v)}return t>this.mid?this.right&&(w=this.right.queryPoint(t,v))?w:h(this.rightPoints,t,v):g(this.leftPoints,v)};b.queryInterval=function(t,v,w){if(t<this.mid&&this.left){var y=this.left.queryInterval(t,v,w);if(y)return y}return v>this.mid&&this.right&&(y=this.right.queryInterval(t,v,w))?y:v<this.mid?a(this.leftPoints,v,w):t>this.mid?h(this.rightPoints,t,w):g(this.leftPoints,w)};b=f.prototype;b.insert=function(t){this.root?this.root.insert(t):this.root=new r(t[0],null,null,[t],[t])};b.remove=function(t){return this.root?
(t=this.root.remove(t),2===t&&(this.root=null),0!==t):!1};b.queryPoint=function(t,v){if(this.root)return this.root.queryPoint(t,v)};b.queryInterval=function(t,v,w){if(t<=v&&this.root)return this.root.queryInterval(t,v,w)};Object.defineProperty(b,"count",{get:function(){return this.root?this.root.count:0}});Object.defineProperty(b,"intervals",{get:function(){return this.root?this.root.intervals([]):[]}})},{"binary-search-bounds":461}],461:[function(b,N,I){arguments[4][243][0].apply(I,arguments)},{dup:243}],
462:[function(b,N,I){N.exports=function(r,q){q=q||Array(r.length);for(var m=0;m<r.length;++m)q[r[m]]=m;return q}},{}],463:[function(b,N,I){N.exports=function(r){for(var q=Array(r),m=0;m<r;++m)q[m]=m;return q}},{}],464:[function(b,N,I){N.exports=!0},{}],465:[function(b,N,I){function r(q){return!!q.constructor&&"function"===typeof q.constructor.isBuffer&&q.constructor.isBuffer(q)}N.exports=function(q){return null!=q&&(r(q)||"function"===typeof q.readFloatLE&&"function"===typeof q.slice&&r(q.slice(0,
0))||!!q._isBuffer)}},{}],466:[function(b,N,I){N.exports="undefined"!==typeof navigator&&(/MSIE/.test(navigator.userAgent)||/Trident\//.test(navigator.appVersion))},{}],467:[function(b,N,I){function r(l){l||(l={});var a=l.ua;a||"undefined"===typeof navigator||(a=navigator.userAgent);a&&a.headers&&"string"===typeof a.headers["user-agent"]&&(a=a.headers["user-agent"]);if("string"!==typeof a)return!1;var h=l.tablet?m.test(a):q.test(a);!h&&l.tablet&&l.featureDetect&&navigator&&1<navigator.maxTouchPoints&&
-1!==a.indexOf("Macintosh")&&-1!==a.indexOf("Safari")&&(h=!0);return h}N.exports=r;N.exports.isMobile=r;N.exports.default=r;var q=/(android|bb\d+|meego).+mobile|avantgo|bada\/|blackberry|blazer|compal|elaine|fennec|hiptop|iemobile|ip(hone|od)|iris|kindle|lge |maemo|midp|mmp|mobile.+firefox|netfront|opera m(ob|in)i|palm( os)?|phone|p(ixi|re)\/|plucker|pocket|psp|series[46]0|symbian|treo|up\.(browser|link)|vodafone|wap|windows (ce|phone)|xda|xiino/i,m=/(android|bb\d+|meego).+mobile|avantgo|bada\/|blackberry|blazer|compal|elaine|fennec|hiptop|iemobile|ip(hone|od)|iris|kindle|lge |maemo|midp|mmp|mobile.+firefox|netfront|opera m(ob|in)i|palm( os)?|phone|p(ixi|re)\/|plucker|pocket|psp|series[46]0|symbian|treo|up\.(browser|link)|vodafone|wap|windows (ce|phone)|xda|xiino|android|ipad|playbook|silk/i},
{}],468:[function(b,N,I){N.exports=function(r){var q=typeof r;return null!==r&&("object"===q||"function"===q)}},{}],469:[function(b,N,I){var r=Object.prototype.toString;N.exports=function(q){var m;return"[object Object]"===r.call(q)&&(m=Object.getPrototypeOf(q),null===m||m===Object.getPrototypeOf({}))}},{}],470:[function(b,N,I){N.exports=function(r){for(var q=r.length,m,l=0;l<q;l++)if(m=r.charCodeAt(l),(9>m||13<m)&&32!==m&&133!==m&&160!==m&&5760!==m&&6158!==m&&(8192>m||8205<m)&&8232!==m&&8233!==m&&
8239!==m&&8287!==m&&8288!==m&&12288!==m&&65279!==m)return!1;return!0}},{}],471:[function(b,N,I){N.exports=function(r){if("string"!==typeof r)return!1;r=r.trim();return/^[mzlhvcsqta]\s*[-+.0-9][^mlhvzcsqta]+/i.test(r)&&/[\dz]$/i.test(r)&&4<r.length?!0:!1}},{}],472:[function(b,N,I){N.exports=function(r,q,m){return r*(1-m)+q*m}},{}],473:[function(b,N,I){(function(r,q){"object"===typeof I&&"undefined"!==typeof N?N.exports=q():(r=r||self,r.mapboxgl=q())})(this,function(){function r(a,h){if(q)if(m){a="var sharedChunk \x3d {}; ("+
q+")(sharedChunk); ("+m+")(sharedChunk);";var g={};q(g);l=h(g);l.workerUrl=window.URL.createObjectURL(new Blob([a],{type:"text/javascript"}))}else m=h;else q=h}var q,m,l;r(["exports"],function(a){function h(c,x){return c(x={exports:{}},x.exports),x.exports}function g(c,x,F,V){this.cx=3*c;this.bx=3*(F-c)-this.cx;this.ax=1-this.cx-this.bx;this.cy=3*x;this.by=3*(V-x)-this.cy;this.ay=1-this.cy-this.by;this.p1x=c;this.p1y=V;this.p2x=F;this.p2y=V}function n(c,x){this.x=c;this.y=x}function p(c,x,F,V){var fa=
new Pj(c,x,F,V);return function(ra){return fa.solve(ra)}}function d(c,x,F){return Math.min(F,Math.max(x,c))}function e(c,x,F){var V=F-x;c=((c-x)%V+V)%V+x;return c===x?F:c}function f(c){for(var x=[],F=arguments.length-1;0<F--;)x[F]=arguments[F+1];for(F=0;F<x.length;F+=1){var V=x[F],fa;for(fa in V)c[fa]=V[fa]}return c}function k(){return function F(x){return x?(x^16*Math.random()>>x/4).toString(16):"10000000-1000-4000-8000-100000000000".replace(/[018]/g,F)}()}function t(c){return!!c&&/^[0-9a-f]{8}-[0-9a-f]{4}-[4][0-9a-f]{3}-[89ab][0-9a-f]{3}-[0-9a-f]{12}$/i.test(c)}
function v(c,x){c.forEach(function(F){x[F]&&(x[F]=x[F].bind(x))})}function w(c,x){return-1!==c.indexOf(x,c.length-x.length)}function y(c,x,F){var V={},fa;for(fa in c)V[fa]=x.call(F||this,c[fa],fa,c);return V}function B(c,x,F){var V={},fa;for(fa in c)x.call(F||this,c[fa],fa,c)&&(V[fa]=c[fa]);return V}function A(c){return Array.isArray(c)?c.map(A):"object"==typeof c&&c?y(c,A):c}function z(c){qg[c]||("undefined"!=typeof console&&console.warn(c),qg[c]=!0)}function E(c,x,F){return(F.y-c.y)*(x.x-c.x)>(x.y-
c.y)*(F.x-c.x)}function C(){return"undefined"!=typeof WorkerGlobalScope&&"undefined"!=typeof self&&self instanceof WorkerGlobalScope}function u(c){var x={};if(c.replace(/(?:^|(?:\s*,\s*))([^\x00-\x20\(\)<>@,;:\\"\/\[\]\?=\{\}\x7F]+)(?:=(?:([^\x00-\x20\(\)<>@,;:\\"\/\[\]\?=\{\}\x7F]+)|(?:"((?:[^"\\]|\\.)*)")))?/g,function(F,V,fa,ra){F=fa||ra;return x[V]=!F||F.toLowerCase(),""}),x["max-age"])c=parseInt(x["max-age"],10),isNaN(c)?delete x["max-age"]:x["max-age"]=c;return x}function D(c){if(null==Vh){var x=
c.navigator?c.navigator.userAgent:null;Vh=!!c.safari||!(!x||!(/\b(iPad|iPhone|iPod)\b/.test(x)||x.match("Safari")&&!x.match("Chrome")))}return Vh}function G(c){try{var x=self[c];return x.setItem("_mapbox_test_",1),x.removeItem("_mapbox_test_"),!0}catch(F){return!1}}function J(c){var x=c.createTexture();c.bindTexture(c.TEXTURE_2D,x);try{if(c.texImage2D(c.TEXTURE_2D,0,c.RGBA,c.RGBA,c.UNSIGNED_BYTE,Og),c.isContextLost())return;Dg.supported=!0}catch(F){}c.deleteTexture(x);Xh=!0}function L(c){return 0===
c.indexOf("mapbox:")}function K(c){c=c.match(Wi);if(!c)throw Error("Unable to parse URL object");return{protocol:c[1],authority:c[2],path:c[3]||"/",params:c[4]?c[4].split("\x26"):[]}}function H(c){var x=c.params.length?"?"+c.params.join("\x26"):"";return c.protocol+"://"+c.authority+c.path+x}function Q(c){if(!c)return null;c=c.split(".");if(!c||3!==c.length)return null;try{return JSON.parse(decodeURIComponent(self.atob(c[1]).split("").map(function(x){return"%"+("00"+x.charCodeAt(0).toString(16)).slice(-2)}).join("")))}catch(x){return null}}
function M(){self.caches&&!lh&&(lh=self.caches.open("mapbox-tiles"))}function P(c){var x=c.indexOf("?");return 0>x?c:c.slice(0,x)}function T(){return null==Z&&(Z=self.OffscreenCanvas&&(new self.OffscreenCanvas(1,1)).getContext("2d")&&"function"==typeof self.createImageBitmap),Z}function O(c,x,F){F[c]&&-1!==F[c].indexOf(x)||(F[c]=F[c]||[],F[c].push(x))}function U(c,x,F){F&&F[c]&&(x=F[c].indexOf(x),-1!==x&&F[c].splice(x,1))}function S(c){var x=c.value;return x?[new dc(c.key,x,"constants have been deprecated as of v8")]:
[]}function X(c){for(var x=[],F=arguments.length-1;0<F--;)x[F]=arguments[F+1];for(F=0;F<x.length;F+=1){var V=x[F],fa;for(fa in V)c[fa]=V[fa]}return c}function ba(c){return c instanceof Number||c instanceof String||c instanceof Boolean?c.valueOf():c}function ca(c){if(Array.isArray(c))return c.map(ca);if(c instanceof Object&&!(c instanceof Number||c instanceof String||c instanceof Boolean)){var x={},F;for(F in c)x[F]=ca(c[F]);return x}return ba(c)}function ia(c,x){return{kind:"array",itemType:c,N:x}}
function ja(c){if("array"===c.kind){var x=ja(c.itemType);return"number"==typeof c.N?"array\x3c"+x+", "+c.N+"\x3e":"value"===c.itemType.kind?"array":"array\x3c"+x+"\x3e"}return c.kind}function la(c,x){if("error"===x.kind)return null;if("array"===c.kind){if("array"===x.kind&&(0===x.N&&"value"===x.itemType.kind||!la(c.itemType,x.itemType))&&("number"!=typeof c.N||c.N===x.N))return null}else{if(c.kind===x.kind)return null;if("value"===c.kind)for(var F=0,V=Ge;F<V.length;F+=1)if(!la(V[F],x))return null}return"Expected "+
ja(c)+" but found "+ja(x)+" instead."}function da(c,x){return x.some(function(F){return F.kind===c.kind})}function oa(c,x){return x.some(function(F){return"null"===F?null===c:"array"===F?Array.isArray(c):"object"===F?c&&!Array.isArray(c)&&"object"==typeof c:F===typeof c})}function sa(c,x,F,V){return"number"==typeof c&&0<=c&&255>=c&&"number"==typeof x&&0<=x&&255>=x&&"number"==typeof F&&0<=F&&255>=F?void 0===V||"number"==typeof V&&0<=V&&1>=V?null:"Invalid rgba value ["+[c,x,F,V].join(", ")+"]: 'a' must be between 0 and 1.":
"Invalid rgba value ["+("number"==typeof V?[c,x,F,V]:[c,x,F]).join(", ")+"]: 'r', 'g', and 'b' must be between 0 and 255."}function ma(c){if(null===c||"string"==typeof c||"boolean"==typeof c||"number"==typeof c||c instanceof Qd||c instanceof qe||c instanceof ze||c instanceof Te)return!0;if(Array.isArray(c)){for(var x=0;x<c.length;x+=1)if(!ma(c[x]))return!1;return!0}if("object"==typeof c){for(x in c)if(!ma(c[x]))return!1;return!0}return!1}function qa(c){if(null===c)return jd;if("string"==typeof c)return ld;
if("boolean"==typeof c)return id;if("number"==typeof c)return Ic;if(c instanceof Qd)return yd;if(c instanceof qe)return ie;if(c instanceof ze)return ge;if(c instanceof Te)return Ee;if(Array.isArray(c)){for(var x,F=c.length,V=0;V<c.length;V+=1){var fa=qa(c[V]);if(x){if(x===fa)continue;x=ud;break}x=fa}return ia(x||ud,F)}return zd}function pa(c){var x=typeof c;return null===c?"":"string"===x||"number"===x||"boolean"===x?String(c):c instanceof Qd||c instanceof ze||c instanceof Te?c.toString():JSON.stringify(c)}
function na(c,x){c[0]=Math.min(c[0],x[0]);c[1]=Math.min(c[1],x[1]);c[2]=Math.max(c[2],x[0]);c[3]=Math.max(c[3],x[1])}function ka(c,x){return!(c[0]<=x[0]||c[2]>=x[2]||c[1]<=x[1]||c[3]>=x[3])}function ua(c,x){for(var F,V,fa,ra,ya,Ha,Pa,Ya=!1,hb=0,Ab=x.length;hb<Ab;hb++)for(var Fb=x[hb],Jb=0,Rb=Fb.length;Jb<Rb-1;Jb++){if(0==(ra=(F=c)[0]-(V=Fb[Jb])[0])*(Pa=F[1]-(fa=Fb[Jb+1])[1])-(Ha=F[0]-fa[0])*(ya=F[1]-V[1])&&0>=ra*Ha&&0>=ya*Pa)return!1;var rb=Fb[Jb],zb=Fb[Jb+1];rb[1]>c[1]!=zb[1]>c[1]&&c[0]<(zb[0]-rb[0])*
(c[1]-rb[1])/(zb[1]-rb[1])+rb[0]&&(Ya=!Ya)}return Ya}function va(c,x,F,V){var fa=V[0]-F[0];V=V[1]-F[1];c=(c[0]-F[0])*V-fa*(c[1]-F[1]);x=(x[0]-F[0])*V-fa*(x[1]-F[1]);return 0<c&&0>x||0>c&&0<x}function Ca(c,x){for(var F=0;F<c.length;++F)if(!ua(c[F],x))return!1;for(F=0;F<c.length-1;++F){var V;a:{for(var fa=V=void 0,ra=void 0,ya=void 0,Ha=void 0,Pa=void 0,Ya=c[F],hb=c[F+1],Ab=0,Fb=x;Ab<Fb.length;Ab+=1)for(var Jb=Fb[Ab],Rb=0;Rb<Jb.length-1;++Rb)if(0!=(fa=[(ra=Jb[Rb+1])[0]-(ya=Jb[Rb])[0],ra[1]-ya[1]])[0]*
(V=[(Ha=hb)[0]-(Pa=Ya)[0],Ha[1]-Pa[1]])[1]-fa[1]*V[0]&&va(Pa,Ha,ya,ra)&&va(ya,ra,Pa,Ha)){V=!0;break a}V=!1}if(V)return!1}return!0}function Ma(c,x,F){for(var V=[],fa=0;fa<c.length;fa++){for(var ra=[],ya=0;ya<c[fa].length;ya++){var Ha=c[fa][ya];var Pa=Math.pow(2,F.z);Ha=[Math.round((180+Ha[0])/360*Pa*8192),Math.round((180-180/Math.PI*Math.log(Math.tan(Math.PI/4+Ha[1]*Math.PI/360)))/360*Pa*8192)];na(x,Ha);ra.push(Ha)}V.push(ra)}return V}function Ua(c,x,F){for(var V=[],fa=0;fa<c.length;fa++){var ra=Ma(c[fa],
x,F);V.push(ra)}return V}function eb(c,x,F,V){if(c[0]<F[0]||c[0]>F[2]){var fa=.5*V,ra=c[0]-F[0]>fa?-V:F[0]-c[0]>fa?V:0;0===ra&&(ra=c[0]-F[2]>fa?-V:F[2]-c[0]>fa?V:0);c[0]+=ra}na(x,c)}function fb(c,x,F,V){var fa=8192*Math.pow(2,V.z);V=[8192*V.x,8192*V.y];for(var ra=[],ya=0;ya<c.length;ya+=1)for(var Ha=0,Pa=c[ya];Ha<Pa.length;Ha+=1){var Ya=Pa[Ha];Ya=[Ya.x+V[0],Ya.y+V[1]];eb(Ya,x,F,fa);ra.push(Ya)}return ra}function nb(c,x,F,V){var fa=8192*Math.pow(2,V.z),ra=[8192*V.x,8192*V.y];V=[];for(var ya=0;ya<c.length;ya+=
1){for(var Ha=[],Pa=0,Ya=c[ya];Pa<Ya.length;Pa+=1){var hb=Ya[Pa];hb=[hb.x+ra[0],hb.y+ra[1]];na(x,hb);Ha.push(hb)}V.push(Ha)}if(x[2]-x[0]<=fa/2)for(x[0]=x[1]=1/0,x[2]=x[3]=-1/0,c=0;c<V.length;c+=1)for(ra=0,ya=V[c];ra<ya.length;ra+=1)eb(ya[ra],x,F,fa);return V}function cb(c){if(c instanceof Ie&&("get"===c.name&&1===c.args.length||"feature-state"===c.name||"has"===c.name&&1===c.args.length||"properties"===c.name||"geometry-type"===c.name||"id"===c.name||/^filter-/.test(c.name))||c instanceof bf)return!1;
var x=!0;return c.eachChild(function(F){x&&!cb(F)&&(x=!1)}),x}function $a(c){if(c instanceof Ie&&"feature-state"===c.name)return!1;var x=!0;return c.eachChild(function(F){x&&!$a(F)&&(x=!1)}),x}function jb(c,x){if(c instanceof Ie&&0<=x.indexOf(c.name))return!1;var F=!0;return c.eachChild(function(V){F&&!jb(V,x)&&(F=!1)}),F}function pb(c,x){for(var F,V=c.length-1,fa=0,ra=V,ya;fa<=ra;)if((F=c[ya=Math.floor((fa+ra)/2)])<=x){if(ya===V||x<c[ya+1])return ya;fa=ya+1}else{if(!(F>x))throw new rf("Input is not a number.");
ra=ya-1}return 0}function xa(c,x,F){return c*(1-F)+x*F}function Ea(c){return.008856451679035631<c?Math.pow(c,1/3):c/Zh+4/29}function Ia(c){return c>6/29?c*c*c:Zh*(c-4/29)}function Oa(c){return 255*(.0031308>=c?12.92*c:1.055*Math.pow(c,1/2.4)-.055)}function bb(c){return.04045>=(c/=255)?c/12.92:Math.pow((c+.055)/1.055,2.4)}function Xa(c){var x=bb(c.r),F=bb(c.g),V=bb(c.b),fa=Ea((.4124564*x+.3575761*F+.1804375*V)/.95047),ra=Ea(.2126729*x+.7151522*F+.072175*V);return{l:116*ra-16,a:500*(fa-ra),b:200*(ra-
Ea((.0193339*x+.119192*F+.9503041*V)/1.08883)),alpha:c.a}}function tb(c){var x=(c.l+16)/116,F=isNaN(c.a)?x:x+c.a/500,V=isNaN(c.b)?x:x-c.b/200;return x=1*Ia(x),F=.95047*Ia(F),V=1.08883*Ia(V),new Qd(Oa(3.2404542*F-1.5371385*x-.4985314*V),Oa(-.969266*F+1.8760108*x+.041556*V),Oa(.0556434*F-.2040259*x+1.0572252*V),c.alpha)}function Ka(c,x,F,V){V-=F;c-=F;return 0===V?0:1===x?c/V:(Math.pow(x,c)-1)/(Math.pow(x,V)-1)}function Ta(c,x){return"\x3d\x3d"===c||"!\x3d"===c?"boolean"===x.kind||"string"===x.kind||
"number"===x.kind||"null"===x.kind||"value"===x.kind:"string"===x.kind||"number"===x.kind||"value"===x.kind}function Na(c,x,F,V){return 0===V.compare(x,F)}function ib(c,x,F){var V="\x3d\x3d"!==c&&"!\x3d"!==c;return function(){function fa(ra,ya,Ha){this.type=id;this.lhs=ra;this.rhs=ya;this.collator=Ha;this.hasUntypedArgument="value"===ra.type.kind||"value"===ya.type.kind}return fa.parse=function(ra,ya){if(3!==ra.length&&4!==ra.length)return ya.error("Expected two or three arguments.");var Ha=ra[0],
Pa=ya.parse(ra[1],1,ud);if(!Pa)return null;if(!Ta(Ha,Pa.type))return ya.concat(1).error('"'+Ha+"\" comparisons are not supported for type '"+ja(Pa.type)+"'.");var Ya=ya.parse(ra[2],2,ud);if(!Ya)return null;if(!Ta(Ha,Ya.type))return ya.concat(2).error('"'+Ha+"\" comparisons are not supported for type '"+ja(Ya.type)+"'.");if(Pa.type.kind!==Ya.type.kind&&"value"!==Pa.type.kind&&"value"!==Ya.type.kind)return ya.error("Cannot compare types '"+ja(Pa.type)+"' and '"+ja(Ya.type)+"'.");V&&("value"===Pa.type.kind&&
"value"!==Ya.type.kind?Pa=new df(Ya.type,[Pa]):"value"!==Pa.type.kind&&"value"===Ya.type.kind&&(Ya=new df(Pa.type,[Ya])));Ha=null;if(4===ra.length){if("string"!==Pa.type.kind&&"string"!==Ya.type.kind&&"value"!==Pa.type.kind&&"value"!==Ya.type.kind)return ya.error("Cannot use collator to compare non-string types.");if(!(Ha=ya.parse(ra[3],3,ie)))return null}return new fa(Pa,Ya,Ha)},fa.prototype.evaluate=function(ra){var ya=this.lhs.evaluate(ra),Ha=this.rhs.evaluate(ra);if(V&&this.hasUntypedArgument){var Pa=
qa(ya),Ya=qa(Ha);if(Pa.kind!==Ya.kind||"string"!==Pa.kind&&"number"!==Pa.kind)throw new rf('Expected arguments for "'+c+'" to be (string, string) or (number, number), but found ('+Pa.kind+", "+Ya.kind+") instead.");}return this.collator&&!V&&this.hasUntypedArgument&&(Pa=qa(ya),Ya=qa(Ha),"string"!==Pa.kind||"string"!==Ya.kind)?x(ra,ya,Ha):this.collator?F(ra,ya,Ha,this.collator.evaluate(ra)):x(ra,ya,Ha)},fa.prototype.eachChild=function(ra){ra(this.lhs);ra(this.rhs);this.collator&&ra(this.collator)},
fa.prototype.outputDefined=function(){return!0},fa.prototype.serialize=function(){var ra=[c];return this.eachChild(function(ya){ra.push(ya.serialize())}),ra},fa}()}function qb(c,x){var F=x[0],V=x[1],fa=x[2];x=x[3];F=F.evaluate(c);V=V.evaluate(c);fa=fa.evaluate(c);c=x?x.evaluate(c):1;if(x=sa(F,V,fa,c))throw new rf(x);return new Qd(F/255*c,V/255*c,fa/255*c,c)}function sb(c,x){c=x[c];return void 0===c?null:c}function Ba(c){return{result:"error",value:c}}function Fa(c){return"data-driven"===c["property-type"]||
"cross-faded-data-driven"===c["property-type"]}function La(c){return!!c.expression&&-1<c.expression.parameters.indexOf("zoom")}function Va(c){return!!c.expression&&c.expression.interpolated}function Za(c){return c instanceof Number?"number":c instanceof String?"string":c instanceof Boolean?"boolean":Array.isArray(c)?"array":null===c?"null":typeof c}function mb(c){return"object"==typeof c&&null!==c&&!Array.isArray(c)}function ub(c){return c}function Pb(c,x,F){return void 0!==c?c:void 0!==x?x:void 0!==
F?F:void 0}function Kb(c,x,F,V,fa){return Pb(typeof F===fa?V[F]:void 0,c.default,x.default)}function Ob(c,x,F){if("number"!==Za(F))return Pb(c.default,x.default);x=c.stops.length;if(1===x||F<=c.stops[0][0])return c.stops[0][1];if(F>=c.stops[x-1][0])return c.stops[x-1][1];F=pb(c.stops.map(function(V){return V[0]}),F);return c.stops[F][1]}function Wb(c,x,F){var V=void 0!==c.base?c.base:1;if("number"!==Za(F))return Pb(c.default,x.default);var fa=c.stops.length;if(1===fa||F<=c.stops[0][0])return c.stops[0][1];
if(F>=c.stops[fa-1][0])return c.stops[fa-1][1];fa=pb(c.stops.map(function(hb){return hb[0]}),F);var ra=function(hb,Ab,Fb,Jb){Jb-=Fb;hb-=Fb;return 0===Jb?0:1===Ab?hb/Jb:(Math.pow(Ab,hb)-1)/(Math.pow(Ab,Jb)-1)}(F,V,c.stops[fa][0],c.stops[fa+1][0]),ya=c.stops[fa][1],Ha=c.stops[fa+1][1],Pa=pj[x.type]||ub;if(c.colorSpace&&"rgb"!==c.colorSpace){var Ya=Yi[c.colorSpace];Pa=function(hb,Ab){return Ya.reverse(Ya.interpolate(Ya.forward(hb),Ya.forward(Ab),ra))}}return"function"==typeof ya.evaluate?{evaluate:function(){for(var hb=
[],Ab=arguments.length;Ab--;)hb[Ab]=arguments[Ab];Ab=ya.evaluate.apply(void 0,hb);hb=Ha.evaluate.apply(void 0,hb);if(void 0!==Ab&&void 0!==hb)return Pa(Ab,hb,ra)}}:Pa(ya,Ha,ra)}function Bc(c,x,F){return"color"===x.type?F=Qd.parse(F):"formatted"===x.type?F=ze.fromString(F.toString()):"resolvedImage"===x.type?F=Te.fromString(F.toString()):Za(F)===x.type||"enum"===x.type&&x.values[F]||(F=void 0),Pb(F,c.default,x.default)}function Kc(c){return Array.isArray(c)&&0<c.length&&"string"==typeof c[0]&&c[0]in
ji}function Nc(c,x){var F=jg;if(x){var V={color:yd,string:ld,number:Ic,enum:ld,boolean:id,formatted:ge,resolvedImage:Ee};V="array"===x.type?ia(V[x.value]||ud,x.length):V[x.type]}else V=void 0;F=new F(ji,[],V);return(c=F.parse(c,void 0,void 0,void 0,x&&"string"===x.type?{typeAnnotation:"coerce"}:void 0))?{result:"success",value:new ki(c,x)}:Ba(F.errors)}function bd(c,x){if("error"===(c=Nc(c,x)).result)return c;var F=c.value.expression,V=cb(F);if(!V&&!Fa(x))return Ba([new Dc("","data expressions not supported")]);
var fa=jb(F,["zoom"]);return fa||La(x)?(F=function Ha(ya){var Pa=null;if(ya instanceof ai)Pa=Ha(ya.result);else if(ya instanceof $h)for(var Ya=0,hb=ya.args;Ya<hb.length&&!(Pa=Ha(hb[Ya]));Ya+=1);else(ya instanceof of||ya instanceof Nf)&&ya.input instanceof Ie&&"zoom"===ya.input.name&&(Pa=ya);return Pa instanceof Dc||ya.eachChild(function(Ab){Ab=Ha(Ab);Ab instanceof Dc?Pa=Ab:!Pa&&Ab?Pa=new Dc("",'"zoom" expression may only be used as input to a top-level "step" or "interpolate" expression.'):Pa&&Ab&&
Pa!==Ab&&(Pa=new Dc("",'Only one zoom-based "step" or "interpolate" subexpression may be used in an expression.'))}),Pa}(F))||fa?F instanceof Dc?Ba([F]):F instanceof Nf&&!Va(x)?Ba([new Dc("",'"interpolate" expressions cannot be used with this property')]):{result:"success",value:F?new lf(V?"camera":"composite",c.value,F.labels,F instanceof Nf?F.interpolation:void 0):new Yd(V?"constant":"source",c.value)}:Ba([new Dc("",'"zoom" expression may only be used as input to a top-level "step" or "interpolate" expression.')]):
Ba([new Dc("","zoom expressions not supported")])}function kb(c){var x=c.key,F=c.value,V=c.valueSpec||{},fa=c.objectElementValidators||{},ra=c.style;c=c.styleSpec;var ya=[],Ha=Za(F);if("object"!==Ha)return[new dc(x,F,"object expected, "+Ha+" found")];for(var Pa in F){var Ya=Pa.split(".")[0];Ha=V[Ya]||V["*"];if(fa[Ya])Ya=fa[Ya];else if(V[Ya])Ya=ec;else if(fa["*"])Ya=fa["*"];else{if(!V["*"]){ya.push(new dc(x,F[Pa],'unknown property "'+Pa+'"'));continue}Ya=ec}ya=ya.concat(Ya({key:(x?x+".":x)+Pa,value:F[Pa],
valueSpec:Ha,style:ra,styleSpec:c,object:F,objectKey:Pa},F))}for(var hb in V)fa[hb]||V[hb].required&&void 0===V[hb].default&&void 0===F[hb]&&ya.push(new dc(x,F,'missing required property "'+hb+'"'));return ya}function $b(c){var x=c.value,F=c.valueSpec,V=c.style,fa=c.styleSpec,ra=c.key;c=c.arrayElementValidator||ec;if("array"!==Za(x))return[new dc(ra,x,"array expected, "+Za(x)+" found")];if(F.length&&x.length!==F.length)return[new dc(ra,x,"array length "+F.length+" expected, length "+x.length+" found")];
if(F["min-length"]&&x.length<F["min-length"])return[new dc(ra,x,"array length at least "+F["min-length"]+" expected, length "+x.length+" found")];var ya={type:F.value,values:F.values};7>fa.$version&&(ya.function=F.function);"object"===Za(F.value)&&(ya=F.value);F=[];for(var Ha=0;Ha<x.length;Ha++)F=F.concat(c({array:x,arrayIndex:Ha,value:x[Ha],valueSpec:ya,style:V,styleSpec:fa,key:ra+"["+Ha+"]"}));return F}function gc(c){var x=c.key,F=c.value;c=c.valueSpec;var V=Za(F);return"number"===V&&F!=F&&(V="NaN"),
"number"!==V?[new dc(x,F,"number expected, "+V+" found")]:"minimum"in c&&F<c.minimum?[new dc(x,F,F+" is less than the minimum value "+c.minimum)]:"maximum"in c&&F>c.maximum?[new dc(x,F,F+" is greater than the maximum value "+c.maximum)]:[]}function rc(c){function x(Jb){var Rb=[],rb=Jb.value,zb=Jb.key;if("array"!==Za(rb))return[new dc(zb,rb,"array expected, "+Za(rb)+" found")];if(2!==rb.length)return[new dc(zb,rb,"array length 2 expected, length "+rb.length+" found")];if(Ab){if("object"!==Za(rb[0]))return[new dc(zb,
rb,"object expected, "+Za(rb[0])+" found")];if(void 0===rb[0].zoom)return[new dc(zb,rb,"object stop key must have zoom")];if(void 0===rb[0].value)return[new dc(zb,rb,"object stop key must have value")];if(ra&&ra>ba(rb[0].zoom))return[new dc(zb,rb[0].zoom,"stop zoom values must appear in ascending order")];ba(rb[0].zoom)!==ra&&(ra=ba(rb[0].zoom),fa=void 0,Pa={});Rb=Rb.concat(kb({key:zb+"[0]",value:rb[0],valueSpec:{zoom:{}},style:Jb.style,styleSpec:Jb.styleSpec,objectElementValidators:{zoom:gc,value:F}}))}else Rb=
Rb.concat(F({key:zb+"[0]",value:rb[0],valueSpec:{},style:Jb.style,styleSpec:Jb.styleSpec},rb));return Kc(ca(rb[1]))?Rb.concat([new dc(zb+"[1]",rb[1],"expressions are not allowed in function stops.")]):Rb.concat(ec({key:zb+"[1]",value:rb[1],valueSpec:ya,style:Jb.style,styleSpec:Jb.styleSpec}))}function F(Jb,Rb){var rb=Za(Jb.value),zb=ba(Jb.value);Rb=null!==Jb.value?Jb.value:Rb;if(V){if(rb!==V)return[new dc(Jb.key,Rb,rb+" stop domain type must match previous stop domain type "+V)]}else V=rb;return"number"!==
rb&&"string"!==rb&&"boolean"!==rb?[new dc(Jb.key,Rb,"stop domain value must be a number, string, or boolean")]:"number"!==rb&&"categorical"!==Ha?(rb="number expected, "+rb+" found",Fa(ya)&&void 0===Ha&&(rb+='\nIf you intended to use a categorical function, specify `"type": "categorical"`.'),[new dc(Jb.key,Rb,rb)]):"categorical"!==Ha||"number"!==rb||isFinite(zb)&&Math.floor(zb)===zb?"categorical"!==Ha&&"number"===rb&&void 0!==fa&&zb<fa?[new dc(Jb.key,Rb,"stop domain values must appear in ascending order")]:
(fa=zb,"categorical"===Ha&&zb in Pa?[new dc(Jb.key,Rb,"stop domain values must be unique")]:(Pa[zb]=!0,[])):[new dc(Jb.key,Rb,"integer expected, found "+zb)]}var V,fa,ra,ya=c.valueSpec,Ha=ba(c.value.type),Pa={},Ya="categorical"!==Ha&&void 0===c.value.property,hb=!Ya,Ab="array"===Za(c.value.stops)&&"array"===Za(c.value.stops[0])&&"object"===Za(c.value.stops[0][0]),Fb=kb({key:c.key,value:c.value,valueSpec:c.styleSpec.function,style:c.style,styleSpec:c.styleSpec,objectElementValidators:{stops:function(Jb){if("identity"===
Ha)return[new dc(Jb.key,Jb.value,'identity function may not have a "stops" property')];var Rb=[],rb=Jb.value;return Rb=Rb.concat($b({key:Jb.key,value:rb,valueSpec:Jb.valueSpec,style:Jb.style,styleSpec:Jb.styleSpec,arrayElementValidator:x})),"array"===Za(rb)&&0===rb.length&&Rb.push(new dc(Jb.key,rb,"array must have at least one stop")),Rb},default:function(Jb){return ec({key:Jb.key,value:Jb.value,valueSpec:ya,style:Jb.style,styleSpec:Jb.styleSpec})}}});return"identity"===Ha&&Ya&&Fb.push(new dc(c.key,
c.value,'missing required property "property"')),"identity"===Ha||c.value.stops||Fb.push(new dc(c.key,c.value,'missing required property "stops"')),"exponential"===Ha&&c.valueSpec.expression&&!Va(c.valueSpec)&&Fb.push(new dc(c.key,c.value,"exponential functions not supported")),8<=c.styleSpec.$version&&(hb&&!Fa(c.valueSpec)?Fb.push(new dc(c.key,c.value,"property functions not supported")):Ya&&!La(c.valueSpec)&&Fb.push(new dc(c.key,c.value,"zoom functions not supported"))),"categorical"!==Ha&&!Ab||
void 0!==c.value.property||Fb.push(new dc(c.key,c.value,'"property" property is required')),Fb}function xc(c){var x=("property"===c.expressionContext?bd:Nc)(ca(c.value),c.valueSpec);if("error"===x.result)return x.value.map(function(F){return new dc(""+c.key+F.key,c.value,F.message)});x=x.value.expression||x.value._styleExpression.expression;if("property"===c.expressionContext&&"text-font"===c.propertyKey&&!x.outputDefined())return[new dc(c.key,c.value,'Invalid data expression for "'+c.propertyKey+
'". Output values must be contained as literals within the expression.')];if("property"===c.expressionContext&&"layout"===c.propertyType&&!$a(x))return[new dc(c.key,c.value,'"feature-state" data expressions are not supported with layout properties.')];if("filter"===c.expressionContext&&!$a(x))return[new dc(c.key,c.value,'"feature-state" data expressions are not supported with filters.')];if(c.expressionContext&&0===c.expressionContext.indexOf("cluster")){if(!jb(x,["zoom","feature-state"]))return[new dc(c.key,
c.value,'"zoom" and "feature-state" expressions are not supported with cluster properties.')];if("cluster-initial"===c.expressionContext&&!cb(x))return[new dc(c.key,c.value,"Feature data expressions are not supported with initial expression part of cluster properties.")]}return[]}function Rc(c){var x=c.key,F=c.value;c=c.valueSpec;var V=[];return Array.isArray(c.values)?-1===c.values.indexOf(ba(F))&&V.push(new dc(x,F,"expected one of ["+c.values.join(", ")+"], "+JSON.stringify(F)+" found")):-1===Object.keys(c.values).indexOf(ba(F))&&
V.push(new dc(x,F,"expected one of ["+Object.keys(c.values).join(", ")+"], "+JSON.stringify(F)+" found")),V}function gb(c){if(!0===c||!1===c)return!0;if(!Array.isArray(c)||0===c.length)return!1;switch(c[0]){case "has":return 2<=c.length&&"$id"!==c[1]&&"$type"!==c[1];case "in":return 3<=c.length&&("string"!=typeof c[1]||Array.isArray(c[2]));case "!in":case "!has":case "none":return!1;case "\x3d\x3d":case "!\x3d":case "\x3e":case "\x3e\x3d":case "\x3c":case "\x3c\x3d":return 3!==c.length||Array.isArray(c[1])||
Array.isArray(c[2]);case "any":case "all":var x=0;for(c=c.slice(1);x<c.length;x+=1){var F=c[x];if(!gb(F)&&"boolean"!=typeof F)return!1}return!0;default:return!0}}function vb(c){if(null==c)return{filter:function(){return!0},needGeometry:!1};gb(c)||(c=ic(c));var x=Nc(c,Ze);if("error"===x.result)throw Error(x.value.map(function(F){return F.key+": "+F.message}).join(", "));return{filter:function(F,V,fa){return x.value.evaluate(F,V,{},fa)},needGeometry:function fa(V){if(!Array.isArray(V))return!1;if("within"===
V[0])return!0;for(var ra=1;ra<V.length;ra++)if(fa(V[ra]))return!0;return!1}(c)}}function Sb(c,x){return c<x?-1:c>x?1:0}function ic(c){if(!c)return!0;var x,F=c[0];return 1>=c.length?"any"!==F:"\x3d\x3d"===F?ac(c[1],c[2],"\x3d\x3d"):"!\x3d"===F?wb(ac(c[1],c[2],"\x3d\x3d")):"\x3c"===F||"\x3e"===F||"\x3c\x3d"===F||"\x3e\x3d"===F?ac(c[1],c[2],F):"any"===F?(x=c.slice(1),["any"].concat(x.map(ic))):"all"===F?["all"].concat(c.slice(1).map(ic)):"none"===F?["all"].concat(c.slice(1).map(ic).map(wb)):"in"===F?
bc(c[1],c.slice(2)):"!in"===F?wb(bc(c[1],c.slice(2))):"has"===F?Ub(c[1]):"!has"===F?wb(Ub(c[1])):"within"!==F||c}function ac(c,x,F){switch(c){case "$type":return["filter-type-"+F,x];case "$id":return["filter-id-"+F,x];default:return["filter-"+F,c,x]}}function bc(c,x){if(0===x.length)return!1;switch(c){case "$type":return["filter-type-in",["literal",x]];case "$id":return["filter-id-in",["literal",x]];default:return 200<x.length&&!x.some(function(F){return typeof F!=typeof x[0]})?["filter-in-large",
c,["literal",x.sort(Sb)]]:["filter-in-small",c,["literal",x]]}}function Ub(c){switch(c){case "$type":return!0;case "$id":return["filter-has-id"];default:return["filter-has",c]}}function wb(c){return["!",c]}function Lb(c){return gb(ca(c.value))?xc(X({},c,{expressionContext:"filter",valueSpec:{value:"boolean"}})):function V(F){var fa=F.value,ra=F.key;if("array"!==Za(fa))return[new dc(ra,fa,"array expected, "+Za(fa)+" found")];var ya,Ha=F.styleSpec,Pa=[];if(1>fa.length)return[new dc(ra,fa,"filter array must have at least 1 element")];
switch(Pa=Pa.concat(Rc({key:ra+"[0]",value:fa[0],valueSpec:Ha.filter_operator,style:F.style,styleSpec:F.styleSpec})),ba(fa[0])){case "\x3c":case "\x3c\x3d":case "\x3e":case "\x3e\x3d":2<=fa.length&&"$type"===ba(fa[1])&&Pa.push(new dc(ra,fa,'"$type" cannot be use with operator "'+fa[0]+'"'));case "\x3d\x3d":case "!\x3d":3!==fa.length&&Pa.push(new dc(ra,fa,'filter array for operator "'+fa[0]+'" must have 3 elements'));case "in":case "!in":2<=fa.length&&"string"!==(ya=Za(fa[1]))&&Pa.push(new dc(ra+"[1]",
fa[1],"string expected, "+ya+" found"));for(var Ya=2;Ya<fa.length;Ya++)ya=Za(fa[Ya]),"$type"===ba(fa[1])?Pa=Pa.concat(Rc({key:ra+"["+Ya+"]",value:fa[Ya],valueSpec:Ha.geometry_type,style:F.style,styleSpec:F.styleSpec})):"string"!==ya&&"number"!==ya&&"boolean"!==ya&&Pa.push(new dc(ra+"["+Ya+"]",fa[Ya],"string, number, or boolean expected, "+ya+" found"));break;case "any":case "all":case "none":for(ya=1;ya<fa.length;ya++)Pa=Pa.concat(V({key:ra+"["+ya+"]",value:fa[ya],style:F.style,styleSpec:F.styleSpec}));
break;case "has":case "!has":ya=Za(fa[1]);2!==fa.length?Pa.push(new dc(ra,fa,'filter array for "'+fa[0]+'" operator must have 2 elements')):"string"!==ya&&Pa.push(new dc(ra+"[1]",fa[1],"string expected, "+ya+" found"));break;case "within":ya=Za(fa[1]),2!==fa.length?Pa.push(new dc(ra,fa,'filter array for "'+fa[0]+'" operator must have 2 elements')):"object"!==ya&&Pa.push(new dc(ra+"[1]",fa[1],"object expected, "+ya+" found"))}return Pa}(c)}function Bb(c,x){var F=c.key,V=c.style,fa=c.styleSpec,ra=c.value,
ya=c.objectKey,Ha=fa[x+"_"+c.layerType];if(!Ha)return[];var Pa=ya.match(/^(.*)-transition$/);if("paint"===x&&Pa&&Ha[Pa[1]]&&Ha[Pa[1]].transition)return ec({key:F,value:ra,valueSpec:fa.transition,style:V,styleSpec:fa});var Ya;Ha=c.valueSpec||Ha[ya];if(!Ha)return[new dc(F,ra,'unknown property "'+ya+'"')];if("string"===Za(ra)&&Fa(Ha)&&!Ha.tokens&&(Ya=/^{([^}]+)}$/.exec(ra)))return[new dc(F,ra,'"'+ya+'" does not support interpolation syntax\nUse an identity property function instead: `{ "type": "identity", "property": '+
JSON.stringify(Ya[1])+" }`.")];Ya=[];return"symbol"===c.layerType&&("text-field"===ya&&V&&!V.glyphs&&Ya.push(new dc(F,ra,'use of "text-field" requires a style "glyphs" property')),"text-font"===ya&&mb(ca(ra))&&"identity"===ba(ra.type)&&Ya.push(new dc(F,ra,'"text-font" does not support identity functions'))),Ya.concat(ec({key:c.key,value:ra,valueSpec:Ha,style:V,styleSpec:fa,expressionContext:"property",propertyType:x,propertyKey:ya}))}function Mb(c){return Bb(c,"paint")}function Yb(c){return Bb(c,
"layout")}function qc(c){var x=[],F=c.value,V=c.key,fa=c.style,ra=c.styleSpec;F.type||F.ref||x.push(new dc(V,F,'either "type" or "ref" is required'));var ya,Ha=ba(F.type),Pa=ba(F.ref);if(F.id)for(var Ya=ba(F.id),hb=0;hb<c.arrayIndex;hb++){var Ab=fa.layers[hb];ba(Ab.id)===Ya&&x.push(new dc(V,F.id,'duplicate layer id "'+F.id+'", previously used at line '+Ab.id.__line__))}"ref"in F?(["type","source","source-layer","filter","layout"].forEach(function(Fb){Fb in F&&x.push(new dc(V,F[Fb],'"'+Fb+'" is prohibited for ref layers'))}),
fa.layers.forEach(function(Fb){ba(Fb.id)===Pa&&(ya=Fb)}),ya?ya.ref?x.push(new dc(V,F.ref,"ref cannot reference another ref layer")):Ha=ba(ya.type):x.push(new dc(V,F.ref,'ref layer "'+Pa+'" not found'))):"background"!==Ha&&(F.source?(Ya=(fa=fa.sources&&fa.sources[F.source])&&ba(fa.type),fa?"vector"===Ya&&"raster"===Ha?x.push(new dc(V,F.source,'layer "'+F.id+'" requires a raster source')):"raster"===Ya&&"raster"!==Ha?x.push(new dc(V,F.source,'layer "'+F.id+'" requires a vector source')):"vector"!==
Ya||F["source-layer"]?"raster-dem"===Ya&&"hillshade"!==Ha?x.push(new dc(V,F.source,"raster-dem source can only be used with layer type 'hillshade'.")):"line"!==Ha||!F.paint||!F.paint["line-gradient"]||"geojson"===Ya&&fa.lineMetrics||x.push(new dc(V,F,'layer "'+F.id+'" specifies a line-gradient, which requires a GeoJSON source with `lineMetrics` enabled.')):x.push(new dc(V,F,'layer "'+F.id+'" must specify a "source-layer"')):x.push(new dc(V,F.source,'source "'+F.source+'" not found'))):x.push(new dc(V,
F,'missing required property "source"')));return x=x.concat(kb({key:V,value:F,valueSpec:ra.layer,style:c.style,styleSpec:c.styleSpec,objectElementValidators:{"*":function(){return[]},type:function(){return ec({key:V+".type",value:F.type,valueSpec:ra.layer.type,style:c.style,styleSpec:c.styleSpec,object:F,objectKey:"type"})},filter:Lb,layout:function(Fb){return kb({layer:F,key:Fb.key,value:Fb.value,style:Fb.style,styleSpec:Fb.styleSpec,objectElementValidators:{"*":function(Jb){return Yb(X({layerType:Ha},
Jb))}}})},paint:function(Fb){return kb({layer:F,key:Fb.key,value:Fb.value,style:Fb.style,styleSpec:Fb.styleSpec,objectElementValidators:{"*":function(Jb){return Mb(X({layerType:Ha},Jb))}}})}}}))}function Tc(c){var x=c.value;c=c.key;var F=Za(x);return"string"!==F?[new dc(c,x,"string expected, "+F+" found")]:[]}function Yc(c){var x=c.value,F=c.key,V=c.styleSpec,fa=c.style;if(!x.type)return[new dc(F,x,'"type" is required')];var ra=ba(x.type);switch(ra){case "vector":case "raster":case "raster-dem":return kb({key:F,
value:x,valueSpec:V["source_"+ra.replace("-","_")],style:c.style,styleSpec:V,objectElementValidators:je});case "geojson":if(c=kb({key:F,value:x,valueSpec:V.source_geojson,style:fa,styleSpec:V,objectElementValidators:je}),x.cluster)for(var ya in x.clusterProperties)V=x.clusterProperties[ya],fa=V[0],fa="string"==typeof fa?[fa,["accumulated"],["get",ya]]:fa,c.push.apply(c,xc({key:F+"."+ya+".map",value:V[1],expressionContext:"cluster-map"})),c.push.apply(c,xc({key:F+"."+ya+".reduce",value:fa,expressionContext:"cluster-reduce"}));
return c;case "video":return kb({key:F,value:x,valueSpec:V.source_video,style:fa,styleSpec:V});case "image":return kb({key:F,value:x,valueSpec:V.source_image,style:fa,styleSpec:V});case "canvas":return[new dc(F,null,"Please use runtime APIs to add canvas sources, rather than including them in stylesheets.","source.canvas")];default:return Rc({key:F+".type",value:x.type,valueSpec:{values:"vector raster raster-dem geojson video image".split(" ")},style:fa,styleSpec:V})}}function ad(c){var x=c.value,
F=c.styleSpec,V=F.light;c=c.style;var fa=[],ra=Za(x);if(void 0===x)return fa;if("object"!==ra)return fa.concat([new dc("light",x,"object expected, "+ra+" found")]);for(var ya in x)ra=ya.match(/^(.*)-transition$/),fa=fa.concat(ra&&V[ra[1]]&&V[ra[1]].transition?ec({key:ya,value:x[ya],valueSpec:F.transition,style:c,styleSpec:F}):V[ya]?ec({key:ya,value:x[ya],valueSpec:V[ya],style:c,styleSpec:F}):[new dc(ya,x[ya],'unknown property "'+ya+'"')]);return fa}function ec(c){var x=c.value,F=c.valueSpec,V=c.styleSpec;
return F.expression&&mb(ba(x))?rc(c):F.expression&&Kc(ca(x))?xc(c):F.type&&We[F.type]?We[F.type](c):kb(X({},c,{valueSpec:F.type?V[F.type]:F}))}function Fc(c){var x=c.value,F=c.key;c=Tc(c);return c.length||(-1===x.indexOf("{fontstack}")&&c.push(new dc(F,x,'"glyphs" url must include a "{fontstack}" token')),-1===x.indexOf("{range}")&&c.push(new dc(F,x,'"glyphs" url must include a "{range}" token'))),c}function dd(c,x){void 0===x&&(x=Gb);var F=[];return F=F.concat(ec({key:"",value:c,valueSpec:x.$root,
styleSpec:x,style:c,objectElementValidators:{glyphs:Fc,"*":function(){return[]}}})),c.constants&&(F=F.concat(S({key:"constants",value:c.constants,style:c,styleSpec:x}))),Ac(F)}function Ac(c){return[].concat(c).sort(function(x,F){return x.line-F.line})}function Jc(c){return function(){for(var x=[],F=arguments.length;F--;)x[F]=arguments[F];return Ac(c.apply(this,x))}}function gd(c,x){var F=!1;if(x&&x.length)for(var V=0;V<x.length;V+=1)c.fire(new lc(Error(x[V].message))),F=!0;return F}function Vc(c,
x,F){var V=this.cells=[];if(c instanceof ArrayBuffer){this.arrayBuffer=c;var fa=new Int32Array(this.arrayBuffer);c=fa[0];this.d=(x=fa[1])+2*(F=fa[2]);for(var ra=0;ra<this.d*this.d;ra++){var ya=fa[3+ra],Ha=fa[3+ra+1];V.push(ya===Ha?null:fa.subarray(ya,Ha))}ra=fa[3+V.length+1];this.keys=fa.subarray(fa[3+V.length],ra);this.bboxes=fa.subarray(ra);this.insert=this._insertReadonly}else{this.d=x+2*F;for(fa=0;fa<this.d*this.d;fa++)V.push([]);this.keys=[];this.bboxes=[]}this.n=x;this.extent=c;this.padding=
F;this.scale=x/c;this.uid=0;x=F/x*c;this.min=-x;this.max=c+x}function Gc(c,x,F){void 0===F&&(F={});Object.defineProperty(x,"_classRegistryKey",{value:c,writeable:!1});Ii[c]={klass:x,omit:F.omit||[],shallow:F.shallow||[]}}function pd(c){return c&&"undefined"!=typeof ArrayBuffer&&(c instanceof ArrayBuffer||c.constructor&&"ArrayBuffer"===c.constructor.name)}function md(c,x){if(null==c||"boolean"==typeof c||"number"==typeof c||"string"==typeof c||c instanceof Boolean||c instanceof Number||c instanceof
String||c instanceof Date||c instanceof RegExp)return c;if(pd(c)||qj&&c instanceof qj)return x&&x.push(c),c;if(ArrayBuffer.isView(c))return x&&x.push(c.buffer),c;if(c instanceof gk)return x&&x.push(c.data.buffer),c;if(Array.isArray(c)){for(var F=[],V=0;V<c.length;V+=1)F.push(md(c[V],x));return F}if("object"==typeof c){var fa=c.constructor;F=fa._classRegistryKey;if(!F)throw Error("can't serialize object of unregistered class");V=fa.serialize?fa.serialize(c,x):{};if(!fa.serialize){for(var ra in c)!c.hasOwnProperty(ra)||
0<=Ii[F].omit.indexOf(ra)||(fa=c[ra],V[ra]=0<=Ii[F].shallow.indexOf(ra)?fa:md(fa,x));c instanceof Error&&(V.message=c.message)}if(V.$name)throw Error("$name property is reserved for worker serialization logic.");return"Object"!==F&&(V.$name=F),V}throw Error("can't serialize object of type "+typeof c);}function rd(c){if(null==c||"boolean"==typeof c||"number"==typeof c||"string"==typeof c||c instanceof Boolean||c instanceof Number||c instanceof String||c instanceof Date||c instanceof RegExp||pd(c)||
qj&&c instanceof qj||ArrayBuffer.isView(c)||c instanceof gk)return c;if(Array.isArray(c))return c.map(rd);if("object"==typeof c){var x=c.$name||"Object",F=Ii[x].klass;if(!F)throw Error("can't deserialize unregistered class "+x);if(F.deserialize)return F.deserialize(c);F=Object.create(F.prototype);for(var V=0,fa=Object.keys(c);V<fa.length;V+=1){var ra=fa[V];if("$name"!==ra){var ya=c[ra];F[ra]=0<=Ii[x].shallow.indexOf(ra)?ya:rd(ya)}}return F}throw Error("can't deserialize object of type "+typeof c);
}function re(c){for(var x=0;x<c.length;x+=1)if(Ad(c[x].charCodeAt(0)))return!0;return!1}function Ad(c){return!(746!==c&&747!==c&&(4352>c||!(Gd["Bopomofo Extended"](c)||Gd.Bopomofo(c)||Gd["CJK Compatibility Forms"](c)&&!(65097<=c&&65103>=c)||Gd["CJK Compatibility Ideographs"](c)||Gd["CJK Compatibility"](c)||Gd["CJK Radicals Supplement"](c)||Gd["CJK Strokes"](c)||!(!Gd["CJK Symbols and Punctuation"](c)||12296<=c&&12305>=c||12308<=c&&12319>=c||12336===c)||Gd["CJK Unified Ideographs Extension A"](c)||
Gd["CJK Unified Ideographs"](c)||Gd["Enclosed CJK Letters and Months"](c)||Gd["Hangul Compatibility Jamo"](c)||Gd["Hangul Jamo Extended-A"](c)||Gd["Hangul Jamo Extended-B"](c)||Gd["Hangul Jamo"](c)||Gd["Hangul Syllables"](c)||Gd.Hiragana(c)||Gd["Ideographic Description Characters"](c)||Gd.Kanbun(c)||Gd["Kangxi Radicals"](c)||Gd["Katakana Phonetic Extensions"](c)||Gd.Katakana(c)&&12540!==c||!(!Gd["Halfwidth and Fullwidth Forms"](c)||65288===c||65289===c||65293===c||65306<=c&&65310>=c||65339===c||65341===
c||65343===c||65371<=c&&65503>=c||65507===c||65512<=c&&65519>=c)||!(!Gd["Small Form Variants"](c)||65112<=c&&65118>=c||65123<=c&&65126>=c)||Gd["Unified Canadian Aboriginal Syllabics"](c)||Gd["Unified Canadian Aboriginal Syllabics Extended"](c)||Gd["Vertical Forms"](c)||Gd["Yijing Hexagram Symbols"](c)||Gd["Yi Syllables"](c)||Gd["Yi Radicals"](c))))}function Bd(c){var x;(x=Ad(c))||(x=!!(Gd["Latin-1 Supplement"](c)&&(167===c||169===c||174===c||177===c||188===c||189===c||190===c||215===c||247===c)||
Gd["General Punctuation"](c)&&(8214===c||8224===c||8225===c||8240===c||8241===c||8251===c||8252===c||8258===c||8263===c||8264===c||8265===c||8273===c)||Gd["Letterlike Symbols"](c)||Gd["Number Forms"](c)||Gd["Miscellaneous Technical"](c)&&(8960<=c&&8967>=c||8972<=c&&8991>=c||8996<=c&&9E3>=c||9003===c||9085<=c&&9114>=c||9150<=c&&9165>=c||9167===c||9169<=c&&9179>=c||9186<=c&&9215>=c)||Gd["Control Pictures"](c)&&9251!==c||Gd["Optical Character Recognition"](c)||Gd["Enclosed Alphanumerics"](c)||Gd["Geometric Shapes"](c)||
Gd["Miscellaneous Symbols"](c)&&!(9754<=c&&9759>=c)||Gd["Miscellaneous Symbols and Arrows"](c)&&(11026<=c&&11055>=c||11088<=c&&11097>=c||11192<=c&&11243>=c)||Gd["CJK Symbols and Punctuation"](c)||Gd.Katakana(c)||Gd["Private Use Area"](c)||Gd["CJK Compatibility Forms"](c)||Gd["Small Form Variants"](c)||Gd["Halfwidth and Fullwidth Forms"](c)||8734===c||8756===c||8757===c||9984<=c&&10087>=c||10102<=c&&10131>=c||65532===c||65533===c));return!x}function be(c){return 1424<=c&&2303>=c||Gd["Arabic Presentation Forms-A"](c)||
Gd["Arabic Presentation Forms-B"](c)}function le(){Dj.fire(new cc("pluginStateChange",{pluginStatus:Xf,pluginURL:Rg}))}function Rd(c,x){void 0===x&&(x=1);var F=0,V=0;return{members:c.map(function(fa){var ra=hj[fa.type].BYTES_PER_ELEMENT,ya=F=Fe(F,Math.max(x,ra)),Ha=fa.components||1;return V=Math.max(V,ra),F+=ra*Ha,{name:fa.name,type:fa.type,components:Ha,offset:ya}}),size:Fe(F,Math.max(V,x)),alignment:x}}function Fe(c,x){return Math.ceil(c/x)*x}function Je(c,x){return 256*d(Math.floor(c),0,255)+d(Math.floor(x),
0,255)}function Kd(c){var x=+c;return!isNaN(x)&&x<=al?x:lj(String(c))}function Dd(c,x,F){var V=c[x];c[x]=c[F];c[F]=V}function we(c){return[Je(255*c.r,255*c.g),Je(255*c.b,255*c.a)]}function se(c,x,F){var V={color:{source:zg,composite:Li},number:{source:aj,composite:zg}};return(c={"line-pattern":{source:lg,composite:lg},"fill-pattern":{source:lg,composite:lg},"fill-extrusion-pattern":{source:lg,composite:lg}}[c])&&c[F]||V[x][F]}function Xd(c){var x=8192/c.extent;c=c.loadGeometry();for(var F=0;F<c.length;F++)for(var V=
c[F],fa=0;fa<V.length;fa++){var ra=V[fa];ra.x=Math.round(ra.x*x);ra.y=Math.round(ra.y*x);(ra.x<Dh.min||ra.x>Dh.max||ra.y<Dh.min||ra.y>Dh.max)&&(z("Geometry exceeds allowed extent, reduce your vector tile buffer size"),ra.x=d(ra.x,Dh.min,Dh.max),ra.y=d(ra.y,Dh.min,Dh.max))}return c}function ye(c,x,F,V,fa){c.emplaceBack(2*x+(V+1)/2,2*F+(fa+1)/2)}function kf(c,x){for(var F=0;F<c.length;F++)if(kd(x,c[F]))return!0;for(F=0;F<x.length;F++)if(kd(c,x[F]))return!0;return!!ff(c,x)}function Qe(c,x,F){return!!kd(c,
x)||!!Vb(x,c,F)}function pf(c,x){if(1===c.length)return yc(x,c[0]);for(var F=0;F<x.length;F++)for(var V=x[F],fa=0;fa<V.length;fa++)if(kd(c,V[fa]))return!0;for(F=0;F<c.length;F++)if(yc(x,c[F]))return!0;for(F=0;F<x.length;F++)if(ff(c,x[F]))return!0;return!1}function ff(c,x){if(0===c.length||0===x.length)return!1;for(var F=0;F<c.length-1;F++)for(var V=c[F],fa=c[F+1],ra=0;ra<x.length-1;ra++){var ya=V,Ha=fa,Pa=x[ra],Ya=x[ra+1];if(E(ya,Pa,Ya)!==E(Ha,Pa,Ya)&&E(ya,Ha,Pa)!==E(ya,Ha,Ya))return!0}return!1}function Vb(c,
x,F){F*=F;if(1===x.length)return c.distSqr(x[0])<F;for(var V=1;V<x.length;V++)if(Sc(c,x[V-1],x[V])<F)return!0;return!1}function Sc(c,x,F){var V=x.distSqr(F);if(0===V)return c.distSqr(x);V=((c.x-x.x)*(F.x-x.x)+(c.y-x.y)*(F.y-x.y))/V;return c.distSqr(0>V?x:1<V?F:F.sub(x)._mult(V)._add(x))}function yc(c,x){for(var F,V,fa,ra=!1,ya=0;ya<c.length;ya++)for(var Ha=0,Pa=(F=c[ya]).length-1;Ha<F.length;Pa=Ha++)(V=F[Ha]).y>x.y!=(fa=F[Pa]).y>x.y&&x.x<(fa.x-V.x)*(x.y-V.y)/(fa.y-V.y)+V.x&&(ra=!ra);return ra}function kd(c,
x){for(var F=!1,V=0,fa=c.length-1;V<c.length;fa=V++){var ra=c[V];fa=c[fa];ra.y>x.y!=fa.y>x.y&&x.x<(fa.x-ra.x)*(x.y-ra.y)/(fa.y-ra.y)+ra.x&&(F=!F)}return F}function Od(c,x,F){var V=x.paint.get(c).value;return"constant"===V.kind?V.value:F.programConfigurations.get(x.id).getMaxValue(c)}function Td(c){return Math.sqrt(c[0]*c[0]+c[1]*c[1])}function Ld(c,x,F,V,fa){if(!x[0]&&!x[1])return c;x=Ud.convert(x)._mult(fa);"viewport"===F&&x._rotate(-V);F=[];for(V=0;V<c.length;V++)F.push(c[V].sub(x));return F}function Jd(c){return c[0]=
1,c[1]=0,c[2]=0,c[3]=0,c[4]=0,c[5]=1,c[6]=0,c[7]=0,c[8]=0,c[9]=0,c[10]=1,c[11]=0,c[12]=0,c[13]=0,c[14]=0,c[15]=1,c}function fe(c,x,F){var V=x[0],fa=x[1],ra=x[2],ya=x[3],Ha=x[4],Pa=x[5],Ya=x[6],hb=x[7],Ab=x[8],Fb=x[9],Jb=x[10],Rb=x[11],rb=x[12],zb=x[13],hc=x[14];x=x[15];var vc=F[0],pc=F[1],$c=F[2],fd=F[3];return c[0]=vc*V+pc*Ha+$c*Ab+fd*rb,c[1]=vc*fa+pc*Pa+$c*Fb+fd*zb,c[2]=vc*ra+pc*Ya+$c*Jb+fd*hc,c[3]=vc*ya+pc*hb+$c*Rb+fd*x,c[4]=(vc=F[4])*V+(pc=F[5])*Ha+($c=F[6])*Ab+(fd=F[7])*rb,c[5]=vc*fa+pc*Pa+$c*
Fb+fd*zb,c[6]=vc*ra+pc*Ya+$c*Jb+fd*hc,c[7]=vc*ya+pc*hb+$c*Rb+fd*x,c[8]=(vc=F[8])*V+(pc=F[9])*Ha+($c=F[10])*Ab+(fd=F[11])*rb,c[9]=vc*fa+pc*Pa+$c*Fb+fd*zb,c[10]=vc*ra+pc*Ya+$c*Jb+fd*hc,c[11]=vc*ya+pc*hb+$c*Rb+fd*x,c[12]=(vc=F[12])*V+(pc=F[13])*Ha+($c=F[14])*Ab+(fd=F[15])*rb,c[13]=vc*fa+pc*Pa+$c*Fb+fd*zb,c[14]=vc*ra+pc*Ya+$c*Jb+fd*hc,c[15]=vc*ya+pc*hb+$c*Rb+fd*x,c}function pe(c,x,F){var V=x[0],fa=x[1],ra=x[2];x=x[3];return c[0]=F[0]*V+F[4]*fa+F[8]*ra+F[12]*x,c[1]=F[1]*V+F[5]*fa+F[9]*ra+F[13]*x,c[2]=
F[2]*V+F[6]*fa+F[10]*ra+F[14]*x,c[3]=F[3]*V+F[7]*fa+F[11]*ra+F[15]*x,c}function Tb(c,x){c=pe([],[c.x,c.y,0,1],x);return new Ud(c[0]/c[3],c[1]/c[3])}function jc(c,x,F,V){var fa=x.width;x=x.height;if(V)if(V instanceof Uint8ClampedArray)V=new Uint8Array(V.buffer);else{if(V.length!==fa*x*F)throw new RangeError("mismatched image size");}else V=new Uint8Array(fa*x*F);return c.width=fa,c.height=x,c.data=V,c}function Hc(c,x,F){var V=x.width;x=x.height;if(V!==c.width||x!==c.height){var fa=jc({},{width:V,height:x},
F);Wc(c,fa,{x:0,y:0},{x:0,y:0},{width:Math.min(c.width,V),height:Math.min(c.height,x)},F);c.width=V;c.height=x;c.data=fa.data}}function Wc(c,x,F,V,fa,ra){if(0===fa.width||0===fa.height)return x;if(fa.width>c.width||fa.height>c.height||F.x>c.width-fa.width||F.y>c.height-fa.height)throw new RangeError("out of range source coordinates for image copy");if(fa.width>x.width||fa.height>x.height||V.x>x.width-fa.width||V.y>x.height-fa.height)throw new RangeError("out of range destination coordinates for image copy");
for(var ya=c.data,Ha=x.data,Pa=0;Pa<fa.height;Pa++)for(var Ya=((F.y+Pa)*c.width+F.x)*ra,hb=((V.y+Pa)*x.width+V.x)*ra,Ab=0;Ab<fa.width*ra;Ab++)Ha[hb+Ab]=ya[Ya+Ab];return x}function Lc(c,x){for(var F=new Uint8Array(1024),V={},fa=0,ra=0;256>fa;fa++,ra+=4){V[x]=fa/255;var ya=c.evaluate(V);F[ra+0]=Math.floor(255*ya.r/ya.a);F[ra+1]=Math.floor(255*ya.g/ya.a);F[ra+2]=Math.floor(255*ya.b/ya.a);F[ra+3]=Math.floor(255*ya.a)}return new Cf({width:256,height:1},F)}function Mc(c,x,F){F=F||2;var V,fa,ra,ya=x&&x.length,
Ha=ya?x[0]*F:c.length,Pa=Pc(c,0,Ha,F,!0),Ya=[];if(!Pa||Pa.next===Pa.prev)return Ya;if(ya){ya=F;var hb,Ab=[];var Fb=0;for(hb=x.length;Fb<hb;Fb++){(V=Pc(c,x[Fb]*ya,Fb<hb-1?x[Fb+1]*ya:c.length,ya,!1))===V.next&&(V.steiner=!0);var Jb=Ab,Rb=Jb.push,rb=V,zb=V;do(rb.x<zb.x||rb.x===zb.x&&rb.y<zb.y)&&(zb=rb),rb=rb.next;while(rb!==V);Rb.call(Jb,zb)}Ab.sort(sc);for(Fb=0;Fb<Ab.length;Fb++)tc(Ab[Fb],Pa),Pa=Cc(Pa,Pa.next)}if(c.length>80*F){var hc=x=c[0];var vc=V=c[1];for(ya=F;ya<Ha;ya+=F)(fa=c[ya])<hc&&(hc=fa),
(ra=c[ya+1])<vc&&(vc=ra),fa>x&&(x=fa),ra>V&&(V=ra);var pc=0!==(pc=Math.max(x-hc,V-vc))?1/pc:0}return oc(Pa,Ya,F,hc,vc,pc),Ya}function Pc(c,x,F,V,fa){if(fa===0<Fj(c,x,F,V))for(fa=x;fa<F;fa+=V)var ra=Gf(fa,c[fa],c[fa+1],ra);else for(fa=F-V;fa>=x;fa-=V)ra=Gf(fa,c[fa],c[fa+1],ra);return ra&&sd(ra,ra.next)&&(Zg(ra),ra=ra.next),ra}function Cc(c,x){if(!c)return c;x||(x=c);var F=c;do if(c=!1,F.steiner||!sd(F,F.next)&&0!==wd(F.prev,F,F.next))F=F.next;else{if(Zg(F),(F=x=F.prev)===F.next)break;c=!0}while(c||
F!==x);return x}function oc(c,x,F,V,fa,ra,ya){if(c){if(!ya&&ra){var Ha=c,Pa=Ha;do null===Pa.z&&(Pa.z=hd(Pa.x,Pa.y,V,fa,ra)),Pa.prevZ=Pa.prev,Pa=Pa.nextZ=Pa.next;while(Pa!==Ha);Pa.prevZ.nextZ=null;Pa.prevZ=null;Ha=Pa;var Ya,hb,Ab,Fb,Jb=1;do{Pa=Ha;var Rb=Ha=null;for(Ab=0;Pa;){Ab++;var rb=Pa;for(Ya=Fb=0;Ya<Jb&&(Fb++,rb=rb.nextZ);Ya++);for(Ya=Jb;0<Fb||0<Ya&&rb;)0!==Fb&&(0===Ya||!rb||Pa.z<=rb.z)?(hb=Pa,Pa=Pa.nextZ,Fb--):(hb=rb,rb=rb.nextZ,Ya--),Rb?Rb.nextZ=hb:Ha=hb,hb.prevZ=Rb,Rb=hb;Pa=rb}Rb.nextZ=null;
Jb*=2}while(1<Ab)}for(Pa=c;c.prev!==c.next;){hb=c.prev;Ha=c.next;if(ra)a:{rb=c;Jb=V;Ya=fa;var zb=ra;Rb=rb.prev;Ab=rb.next;if(0<=wd(Rb,rb,Ab))rb=!1;else{var hc=Rb.x>rb.x?Rb.x>Ab.x?Rb.x:Ab.x:rb.x>Ab.x?rb.x:Ab.x,vc=Rb.y>rb.y?Rb.y>Ab.y?Rb.y:Ab.y:rb.y>Ab.y?rb.y:Ab.y;Fb=hd(Rb.x<rb.x?Rb.x<Ab.x?Rb.x:Ab.x:rb.x<Ab.x?rb.x:Ab.x,Rb.y<rb.y?Rb.y<Ab.y?Rb.y:Ab.y:rb.y<Ab.y?rb.y:Ab.y,Jb,Ya,zb);Jb=hd(hc,vc,Jb,Ya,zb);Ya=rb.prevZ;for(zb=rb.nextZ;Ya&&Ya.z>=Fb&&zb&&zb.z<=Jb;){if(Ya!==rb.prev&&Ya!==rb.next&&qd(Rb.x,Rb.y,
rb.x,rb.y,Ab.x,Ab.y,Ya.x,Ya.y)&&0<=wd(Ya.prev,Ya,Ya.next)||(Ya=Ya.prevZ,zb!==rb.prev&&zb!==rb.next&&qd(Rb.x,Rb.y,rb.x,rb.y,Ab.x,Ab.y,zb.x,zb.y)&&0<=wd(zb.prev,zb,zb.next))){rb=!1;break a}zb=zb.nextZ}for(;Ya&&Ya.z>=Fb;){if(Ya!==rb.prev&&Ya!==rb.next&&qd(Rb.x,Rb.y,rb.x,rb.y,Ab.x,Ab.y,Ya.x,Ya.y)&&0<=wd(Ya.prev,Ya,Ya.next)){rb=!1;break a}Ya=Ya.prevZ}for(;zb&&zb.z<=Jb;){if(zb!==rb.prev&&zb!==rb.next&&qd(Rb.x,Rb.y,rb.x,rb.y,Ab.x,Ab.y,zb.x,zb.y)&&0<=wd(zb.prev,zb,zb.next)){rb=!1;break a}zb=zb.nextZ}rb=!0}}else a:if(rb=
c,Rb=rb.prev,Ab=rb.next,0<=wd(Rb,rb,Ab))rb=!1;else{for(Fb=rb.next.next;Fb!==rb.prev;){if(qd(Rb.x,Rb.y,rb.x,rb.y,Ab.x,Ab.y,Fb.x,Fb.y)&&0<=wd(Fb.prev,Fb,Fb.next)){rb=!1;break a}Fb=Fb.next}rb=!0}if(rb)x.push(hb.i/F),x.push(c.i/F),x.push(Ha.i/F),Zg(c),Pa=c=Ha.next;else if((c=Ha)===Pa){if(ya)if(1===ya){c=Cc(c);ya=x;hb=F;Ha=c;do Pa=Ha.prev,rb=Ha.next.next,!sd(Pa,rb)&&xe(Pa,Ha,Ha.next,rb)&&oe(Pa,rb)&&oe(rb,Pa)&&(ya.push(Pa.i/hb),ya.push(Ha.i/hb),ya.push(rb.i/hb),Zg(Ha),Zg(Ha.next),Ha=c=rb),Ha=Ha.next;while(Ha!==
c);c=Cc(Ha);oc(c,x,F,V,fa,ra,2)}else{if(2===ya)a:{ya=c;do{for(hb=ya.next.next;hb!==ya.prev;){if(ya.i!==hb.i&&td(ya,hb)){c=Re(ya,hb);ya=Cc(ya,ya.next);c=Cc(c,c.next);oc(ya,x,F,V,fa,ra);oc(c,x,F,V,fa,ra);break a}hb=hb.next}ya=ya.next}while(ya!==c)}}else oc(Cc(c),x,F,V,fa,ra,1);break}}}}function sc(c,x){return c.x-x.x}function tc(c,x){if(x=function(F,V){var fa=V,ra=F.x,ya=F.y,Ha=-1/0;do{if(ya<=fa.y&&ya>=fa.next.y&&fa.next.y!==fa.y){var Pa=fa.x+(ya-fa.y)*(fa.next.x-fa.x)/(fa.next.y-fa.y);if(Pa<=ra&&Pa>
Ha){if(Ha=Pa,Pa===ra){if(ya===fa.y)return fa;if(ya===fa.next.y)return fa.next}var Ya=fa.x<fa.next.x?fa:fa.next}}fa=fa.next}while(fa!==V);if(!Ya)return null;if(ra===Ha)return Ya;Pa=Ya;var hb=Ya.x,Ab=Ya.y,Fb=1/0;fa=Ya;do{if(ra>=fa.x&&fa.x>=hb&&ra!==fa.x&&qd(ya<Ab?ra:Ha,ya,hb,Ab,ya<Ab?Ha:ra,ya,fa.x,fa.y)){V=Math.abs(ya-fa.y)/(ra-fa.x);var Jb;if((Jb=oe(fa,F))&&!(Jb=V<Fb)&&(Jb=V===Fb)&&!(Jb=fa.x>Ya.x)&&(Jb=fa.x===Ya.x)){Jb=Ya;var Rb=fa;Jb=0>wd(Jb.prev,Jb,Rb.prev)&&0>wd(Rb.next,Jb,Jb.next)}Jb&&(Ya=fa,Fb=
V)}fa=fa.next}while(fa!==Pa);return Ya}(c,x))c=Re(x,c),Cc(x,x.next),Cc(c,c.next)}function hd(c,x,F,V,fa){return 1431655765&((c=858993459&((c=252645135&((c=16711935&((c=32767*(c-F)*fa)|c<<8))|c<<4))|c<<2))|c<<1)|(1431655765&((x=858993459&((x=252645135&((x=16711935&((x=32767*(x-V)*fa)|x<<8))|x<<4))|x<<2))|x<<1))<<1}function qd(c,x,F,V,fa,ra,ya,Ha){return 0<=(fa-ya)*(x-Ha)-(c-ya)*(ra-Ha)&&0<=(c-ya)*(V-Ha)-(F-ya)*(x-Ha)&&0<=(F-ya)*(ra-Ha)-(fa-ya)*(V-Ha)}function td(c,x){return c.next.i!==x.i&&c.prev.i!==
x.i&&!function(F,V){var fa=F;do{if(fa.i!==F.i&&fa.next.i!==F.i&&fa.i!==V.i&&fa.next.i!==V.i&&xe(fa,fa.next,F,V))return!0;fa=fa.next}while(fa!==F);return!1}(c,x)&&(oe(c,x)&&oe(x,c)&&function(F,V){var fa=F,ra=!1,ya=(F.x+V.x)/2;V=(F.y+V.y)/2;do fa.y>V!=fa.next.y>V&&fa.next.y!==fa.y&&ya<(fa.next.x-fa.x)*(V-fa.y)/(fa.next.y-fa.y)+fa.x&&(ra=!ra),fa=fa.next;while(fa!==F);return ra}(c,x)&&(wd(c.prev,c,x.prev)||wd(c,x.prev,x))||sd(c,x)&&0<wd(c.prev,c,c.next)&&0<wd(x.prev,x,x.next))}function wd(c,x,F){return(x.y-
c.y)*(F.x-x.x)-(x.x-c.x)*(F.y-x.y)}function sd(c,x){return c.x===x.x&&c.y===x.y}function xe(c,x,F,V){var fa=Le(wd(c,x,F)),ra=Le(wd(c,x,V)),ya=Le(wd(F,V,c)),Ha=Le(wd(F,V,x));return fa!==ra&&ya!==Ha||!(0!==fa||!ue(c,F,x))||!(0!==ra||!ue(c,V,x))||!(0!==ya||!ue(F,c,V))||!(0!==Ha||!ue(F,x,V))}function ue(c,x,F){return x.x<=Math.max(c.x,F.x)&&x.x>=Math.min(c.x,F.x)&&x.y<=Math.max(c.y,F.y)&&x.y>=Math.min(c.y,F.y)}function Le(c){return 0<c?1:0>c?-1:0}function oe(c,x){return 0>wd(c.prev,c,c.next)?0<=wd(c,
x,c.next)&&0<=wd(c,c.prev,x):0>wd(c,x,c.prev)||0>wd(c,c.next,x)}function Re(c,x){var F=new th(c.i,c.x,c.y),V=new th(x.i,x.x,x.y),fa=c.next,ra=x.prev;return c.next=x,x.prev=c,F.next=fa,fa.prev=F,V.next=F,F.prev=V,ra.next=V,V.prev=ra,V}function Gf(c,x,F,V){c=new th(c,x,F);return V?(c.next=V.next,c.prev=V,V.next.prev=c,V.next=c):(c.prev=c,c.next=c),c}function Zg(c){c.next.prev=c.prev;c.prev.next=c.next;c.prevZ&&(c.prevZ.nextZ=c.nextZ);c.nextZ&&(c.nextZ.prevZ=c.prevZ)}function th(c,x,F){this.i=c;this.x=
x;this.y=F;this.nextZ=this.prevZ=this.z=this.next=this.prev=null;this.steiner=!1}function Fj(c,x,F,V){for(var fa=0,ra=F-V;x<F;x+=V)fa+=(c[ra]-c[x])*(c[x+1]+c[ra+1]),ra=x;return fa}function ij(c,x,F,V,fa){!function Ab(ya,Ha,Pa,Ya,hb){for(;Ya>Pa;){if(600<Ya-Pa){var Fb=Ya-Pa+1,Jb=Ha-Pa+1,Rb=Math.log(Fb),rb=.5*Math.exp(2*Rb/3);Rb=.5*Math.sqrt(Rb*rb*(Fb-rb)/Fb)*(0>Jb-Fb/2?-1:1);Ab(ya,Ha,Math.max(Pa,Math.floor(Ha-Jb*rb/Fb+Rb)),Math.min(Ya,Math.floor(Ha+(Fb-Jb)*rb/Fb+Rb)),hb)}Fb=ya[Ha];Jb=Pa;rb=Ya;hh(ya,
Pa,Ha);for(0<hb(ya[Ya],Fb)&&hh(ya,Pa,Ya);Jb<rb;){hh(ya,Jb,rb);Jb++;for(rb--;0>hb(ya[Jb],Fb);)Jb++;for(;0<hb(ya[rb],Fb);)rb--}0===hb(ya[Pa],Fb)?hh(ya,Pa,rb):hh(ya,++rb,Ya);rb<=Ha&&(Pa=rb+1);Ha<=rb&&(Ya=rb-1)}}(c,x,F||0,V||c.length-1,fa||Gj)}function hh(c,x,F){var V=c[x];c[x]=c[F];c[F]=V}function Gj(c,x){return c<x?-1:c>x?1:0}function cg(c,x){var F=c.length;if(1>=F)return[c];for(var V,fa,ra=[],ya=0;ya<F;ya++){var Ha=c[ya];for(var Pa=0,Ya=0,hb=Ha.length,Ab=hb-1,Fb=void 0,Jb=void 0;Ya<hb;Ab=Ya++)Pa+=
((Jb=Ha[Ab]).x-(Fb=Ha[Ya]).x)*(Fb.y+Jb.y);Ha=Pa;0!==Ha&&(c[ya].area=Math.abs(Ha),void 0===fa&&(fa=0>Ha),fa===0>Ha?(V&&ra.push(V),V=[c[ya]]):V.push(c[ya]))}if(V&&ra.push(V),1<x)for(c=0;c<ra.length;c++)ra[c].length<=x||(ij(ra[c],x,1,ra[c].length-1,Hj),ra[c]=ra[c].slice(0,x));return ra}function Hj(c,x){return x.area-c.area}function pi(c,x,F){F=F.patternDependencies;for(var V=!1,fa=0;fa<x.length;fa+=1){var ra=x[fa].paint.get(c+"-pattern");ra.isConstant()||(V=!0);(ra=ra.constantOr(null))&&(V=!0,F[ra.to]=
!0,F[ra.from]=!0)}return V}function uh(c,x,F,V,fa){for(var ra=fa.patternDependencies,ya=0;ya<x.length;ya+=1){var Ha=x[ya],Pa=Ha.paint.get(c+"-pattern").value;if("constant"!==Pa.kind){var Ya=Pa.evaluate({zoom:V-1},F,{},fa.availableImages),hb=Pa.evaluate({zoom:V},F,{},fa.availableImages);Pa=Pa.evaluate({zoom:V+1},F,{},fa.availableImages);hb=hb&&hb.name?hb.name:hb;Pa=Pa&&Pa.name?Pa.name:Pa;ra[Ya=Ya&&Ya.name?Ya.name:Ya]=!0;ra[hb]=!0;ra[Pa]=!0;F.patterns[Ha.id]={min:Ya,mid:hb,max:Pa}}}return F}function Ag(c,
x,F,V,fa){this.properties={};this.extent=F;this.type=0;this._pbf=c;this._geometry=-1;this._keys=V;this._values=fa;c.readFields(Mh,this,x)}function Mh(c,x,F){if(1==c)x.id=F.readVarint();else if(2==c)for(c=F.readVarint()+F.pos;F.pos<c;){var V=x._keys[F.readVarint()],fa=x._values[F.readVarint()];x.properties[V]=fa}else 3==c?x.type=F.readVarint():4==c&&(x._geometry=F.pos)}function kj(c,x){this.version=1;this.name=null;this.extent=4096;this.length=0;this._pbf=c;this._keys=[];this._values=[];this._features=
[];c.readFields(vh,this,x);this.length=this._features.length}function vh(c,x,F){if(15===c)x.version=F.readVarint();else if(1===c)x.name=F.readString();else if(5===c)x.extent=F.readVarint();else if(2===c)x._features.push(F.pos);else if(3===c)x._keys.push(F.readString());else if(4===c){c=x._values;x=c.push;for(var V=null,fa=F.readVarint()+F.pos;F.pos<fa;)V=F.readVarint()>>3,V=1===V?F.readString():2===V?F.readFloat():3===V?F.readDouble():4===V?F.readVarint64():5===V?F.readVarint():6===V?F.readSVarint():
7===V?F.readBoolean():null;x.call(c,V)}}function Lh(c,x,F){3===c&&(c=new Sj(F,F.readVarint()+F.pos),c.length&&(x[c.name]=c))}function qi(c,x,F,V,fa,ra,ya,Ha){c.emplaceBack(x,F,2*Math.floor(V*ik)+ya,fa*ik*2,ra*ik*2,Math.round(Ha))}function ri(c,x){return c.x*x.x+c.y*x.y}function Nh(c,x){if(1===c.length){for(var F,V=0,fa=x[V++];!F||fa.equals(F);)if(!(F=x[V++]))return 1/0;for(;V<x.length;V++){var ra=x[V],ya=c[0],Ha=F.sub(fa),Pa=ra.sub(fa),Ya=ya.sub(fa);ya=ri(Ha,Ha);var hb=ri(Ha,Pa),Ab=ri(Pa,Pa);Ha=ri(Ya,
Ha);Pa=ri(Ya,Pa);Ya=ya*Ab-hb*hb;Ab=(Ab*Ha-hb*Pa)/Ya;ya=(ya*Pa-hb*Ha)/Ya;ra=fa.z*(1-Ab-ya)+F.z*Ab+ra.z*ya;if(isFinite(ra))return ra}return 1/0}c=1/0;for(F=0;F<x.length;F+=1)c=Math.min(c,x[F].z);return c}function si(c,x){return 0<x?x+2*c:c}function Ph(c,x,F){return c.sections.forEach(function(V){var fa=V.text;var ra=x.layout.get("text-transform").evaluate(F,{});ra=("uppercase"===ra?fa=fa.toLocaleUpperCase():"lowercase"===ra&&(fa=fa.toLocaleLowerCase()),ag.applyArabicShaping&&(fa=ag.applyArabicShaping(fa)),
fa);V.text=ra}),c}function He(c){this.buf=ArrayBuffer.isView&&ArrayBuffer.isView(c)?c:new Uint8Array(c||0);this.type=this.pos=0;this.length=this.buf.length}function mg(c){return c.type===He.Bytes?c.readVarint()+c.pos:c.pos+1}function ti(c,x,F){x=16383>=x?1:2097151>=x?2:268435455>=x?3:Math.floor(Math.log(x)/(7*Math.LN2));F.realloc(x);for(var V=F.pos-1;V>=c;V--)F.buf[V+x]=F.buf[V]}function ui(c,x){for(var F=0;F<c.length;F++)x.writeVarint(c[F])}function Jj(c,x){for(var F=0;F<c.length;F++)x.writeSVarint(c[F])}
function Qi(c,x){for(var F=0;F<c.length;F++)x.writeFloat(c[F])}function vi(c,x){for(var F=0;F<c.length;F++)x.writeDouble(c[F])}function ck(c,x){for(var F=0;F<c.length;F++)x.writeBoolean(c[F])}function Kj(c,x){for(var F=0;F<c.length;F++)x.writeFixed32(c[F])}function dk(c,x){for(var F=0;F<c.length;F++)x.writeSFixed32(c[F])}function Ri(c,x){for(var F=0;F<c.length;F++)x.writeFixed64(c[F])}function sk(c,x){for(var F=0;F<c.length;F++)x.writeSFixed64(c[F])}function Qh(c,x){return(c[x]|c[x+1]<<8|c[x+2]<<
16)+16777216*c[x+3]}function Rh(c,x,F){c[F]=x;c[F+1]=x>>>8;c[F+2]=x>>>16;c[F+3]=x>>>24}function Bg(c,x){return(c[x]|c[x+1]<<8|c[x+2]<<16)+(c[x+3]<<24)}function ng(c,x,F){1===c&&F.readMessage(xh,x)}function xh(c,x,F){if(3===c){c=F.readMessage(Si,{});F=c.width;var V=c.height,fa=c.left,ra=c.top,ya=c.advance;x.push({id:c.id,bitmap:new ug({width:F+6,height:V+6},c.bitmap),metrics:{width:F,height:V,left:fa,top:ra,advance:ya}})}}function Si(c,x,F){1===c?x.id=F.readVarint():2===c?x.bitmap=F.readBytes():3===
c?x.width=F.readVarint():4===c?x.height=F.readVarint():5===c?x.left=F.readSVarint():6===c?x.top=F.readSVarint():7===c&&(x.advance=F.readVarint())}function $e(c){for(var x=0,F=0,V=0;V<c.length;V+=1){var fa=c[V];x+=fa.w*fa.h;F=Math.max(F,fa.w)}c.sort(function(Ya,hb){return hb.h-Ya.h});F=[{x:0,y:0,w:Math.max(Math.ceil(Math.sqrt(x/.95)),F),h:1/0}];for(var ra=fa=V=0;ra<c.length;ra+=1)for(var ya=c[ra],Ha=F.length-1;0<=Ha;Ha--){var Pa=F[Ha];if(!(ya.w>Pa.w||ya.h>Pa.h)){(ya.x=Pa.x,ya.y=Pa.y,fa=Math.max(fa,
ya.y+ya.h),V=Math.max(V,ya.x+ya.w),ya.w===Pa.w&&ya.h===Pa.h)?(ya=F.pop(),Ha<F.length&&(F[Ha]=ya)):ya.h===Pa.h?(Pa.x+=ya.w,Pa.w-=ya.w):ya.w===Pa.w?(Pa.y+=ya.h,Pa.h-=ya.h):(F.push({x:Pa.x+ya.w,y:Pa.y,w:Pa.w-ya.w,h:ya.h}),Pa.y+=ya.h,Pa.h-=ya.h);break}}return{w:V,h:fa,fill:x/(V*fa)||0}}function Sh(c,x,F,V,fa,ra,ya,Ha,Pa,Ya,hb,Ab,Fb,Jb,Rb,rb){fa=Zb.fromFeature(c,fa);Ab===Qc.vertical&&fa.verticalizePunctuation();var zb=ag.processBidirectionalText,hc=ag.processStyledBidirectionalText;if(zb&&1===fa.sections.length){c=
[];var vc=0;for(ra=zb(fa.toString(),jh(fa,Ya,ra,x,V,Jb,Rb));vc<ra.length;vc+=1){Jb=ra[vc];Rb=new Zb;Rb.text=Jb;Rb.sections=fa.sections;for(zb=0;zb<Jb.length;zb++)Rb.sectionIndex.push(0);c.push(Rb)}}else if(hc)for(c=[],vc=0,ra=hc(fa.text,fa.sectionIndex,jh(fa,Ya,ra,x,V,Jb,Rb));vc<ra.length;vc+=1)Jb=ra[vc],Rb=new Zb,Rb.text=Jb[0],Rb.sectionIndex=Jb[1],Rb.sections=fa.sections,c.push(Rb);else c=function(pc,$c){for(var fd=[],nd=pc.text,xd=0,vd=0;vd<$c.length;vd+=1){var Vd=$c[vd];fd.push(pc.substring(xd,
Vd));xd=Vd}return xd<nd.length&&fd.push(pc.substring(xd,nd.length)),fd}(fa,jh(fa,Ya,ra,x,V,Jb,Rb));ra=[];hb={positionedLines:ra,text:fa.toString(),top:hb[1],bottom:hb[1],left:hb[0],right:hb[0],writingMode:Ab,iconsInText:!1,verticalizable:!1};return function(pc,$c,fd,nd,xd,vd,Vd,he,Wd,ce,ve,Md){var Id=0,Pd=-17,Me=0,hf=0;he="right"===he?1:"left"===he?0:.5;for(var Ig=0,Sf=0;Sf<xd.length;Sf+=1){var jf=xd[Sf];jf.trim();var Ae=jf.getMaxScale(),Df=24*(Ae-1),Zf={positionedGlyphs:[],lineOffset:0};pc.positionedLines[Ig]=
Zf;var vg=Zf.positionedGlyphs,Tk=0;if(jf.length()){for(var Mi=0;Mi<jf.length();Mi++){var sf=jf.getSection(Mi),Ug=jf.getSectionIndex(Mi),kk=jf.getCharCode(Mi),Ek,Uk=null,Jg=null,lk=24,Jf=!(Wd===Qc.horizontal||!ve&&!Ad(kk)||ve&&(wc[kk]||(Vg=kk,Gd.Arabic(Vg)||Gd["Arabic Supplement"](Vg)||Gd["Arabic Extended-A"](Vg)||Gd["Arabic Presentation Forms-A"](Vg)||Gd["Arabic Presentation Forms-B"](Vg))));if(sf.imageName){lk=nd[sf.imageName];if(!lk)continue;Jg=sf.imageName;pc.iconsInText=pc.iconsInText||!0;Uk=
lk.paddedRect;var Fh=lk.displaySize;sf.scale=24*sf.scale/Md;var cf=Df+(24-Fh[1]*sf.scale);lk=(Ek={width:Fh[0],height:Fh[1],left:1,top:-3,advance:Jf?Fh[1]:Fh[0]}).advance;Fh=Jf?Fh[0]*sf.scale-24*Ae:Fh[1]*sf.scale-24*Ae;0<Fh&&Fh>Tk&&(Tk=Fh)}else{if((cf=(cf=fd[sf.fontStack])&&cf[kk])&&cf.rect)Uk=cf.rect,Ek=cf.metrics;else{cf=(cf=$c[sf.fontStack])&&cf[kk];if(!cf)continue;Ek=cf.metrics}cf=24*(Ae-sf.scale)}Jf?(pc.verticalizable=!0,vg.push({glyph:kk,imageName:Jg,x:Id,y:Pd+cf,vertical:Jf,scale:sf.scale,fontStack:sf.fontStack,
sectionIndex:Ug,metrics:Ek,rect:Uk}),Id+=lk*sf.scale+ce):(vg.push({glyph:kk,imageName:Jg,x:Id,y:Pd+cf,vertical:Jf,scale:sf.scale,fontStack:sf.fontStack,sectionIndex:Ug,metrics:Ek,rect:Uk}),Id+=Ek.advance*sf.scale+ce)}if(0!==vg.length&&(Me=Math.max(Id-ce,Me),Id=vg,vg=vg.length-1,jf=Tk,he||jf))for(Mi=Id[vg],Mi=(Id[vg].x+Mi.metrics.advance*Mi.scale)*he,sf=0;sf<=vg;sf++)Id[sf].x-=Mi,Id[sf].y+=jf;Id=0;Ae=vd*Ae+Tk;Zf.lineOffset=Math.max(Tk,Df);Pd+=Ae;hf=Math.max(Ae,hf)}else Pd+=vd;++Ig}var Vg;$c=Pd- -17;
fd=xi(Vd);Vd=fd.horizontalAlign;fd=fd.verticalAlign;he=(he-Vd)*Me;xd=hf!==vd?-$c*fd- -17:(-fd*xd.length+.5)*vd;vd=0;for(hf=pc.positionedLines;vd<hf.length;vd+=1)for(nd=0,Wd=hf[vd].positionedGlyphs;nd<Wd.length;nd+=1)ce=Wd[nd],ce.x+=he,ce.y+=xd;pc.top+=-fd*$c;pc.bottom=pc.top+$c;pc.left+=-Vd*Me;pc.right=pc.left+Me}(hb,x,F,V,c,ya,Ha,Pa,Ab,Ya,Fb,rb),!function(pc){for(var $c=0;$c<pc.length;$c+=1)if(0!==pc[$c].positionedGlyphs.length)return!1;return!0}(ra)&&hb}function ih(c,x,F,V,fa,ra){return x.imageName?
(c=V[x.imageName])?c.displaySize[0]*x.scale*24/ra+fa:0:(c=(ra=F[x.fontStack])&&ra[c])?c.metrics.advance*x.scale+fa:0}function yh(c,x,F,V){var fa=Math.pow(c-x,2);return V?c<x?fa/2:2*fa:fa+Math.abs(F)*F}function Se(c,x,F){var V=0;return 10===c&&(V-=1E4),F&&(V+=150),40!==c&&65288!==c||(V+=50),41!==x&&65289!==x||(V+=50),V}function Ue(c,x,F,V,fa,ra){for(var ya=null,Ha=yh(x,F,fa,ra),Pa=0;Pa<V.length;Pa+=1){var Ya=V[Pa],hb=yh(x-Ya.x,F,fa,ra)+Ya.badness;hb<=Ha&&(ya=Ya,Ha=hb)}return{index:c,x:x,priorBreak:ya,
badness:Ha}}function jh(c,x,F,V,fa,ra,ya){if("point"!==ra||!c)return[];var Ha;ra=[];F=function(Rb,rb,zb,hc,vc,pc){for(var $c=0,fd=0;fd<Rb.length();fd++){var nd=Rb.getSection(fd);$c+=ih(Rb.getCharCode(fd),nd,hc,vc,rb,pc)}return $c/Math.max(1,Math.ceil($c/zb))}(c,x,F,V,fa,ya);for(var Pa=0<=c.text.indexOf(""),Ya=0,hb=0;hb<c.length();hb++){var Ab=c.getSection(hb),Fb=c.getCharCode(hb);if(wc[Fb]||(Ya+=ih(Fb,Ab,V,fa,x,ya)),hb<c.length()-1){var Jb=!(11904>(Ha=Fb)||!(Gd["Bopomofo Extended"](Ha)||Gd.Bopomofo(Ha)||
Gd["CJK Compatibility Forms"](Ha)||Gd["CJK Compatibility Ideographs"](Ha)||Gd["CJK Compatibility"](Ha)||Gd["CJK Radicals Supplement"](Ha)||Gd["CJK Strokes"](Ha)||Gd["CJK Symbols and Punctuation"](Ha)||Gd["CJK Unified Ideographs Extension A"](Ha)||Gd["CJK Unified Ideographs"](Ha)||Gd["Enclosed CJK Letters and Months"](Ha)||Gd["Halfwidth and Fullwidth Forms"](Ha)||Gd.Hiragana(Ha)||Gd["Ideographic Description Characters"](Ha)||Gd["Kangxi Radicals"](Ha)||Gd["Katakana Phonetic Extensions"](Ha)||Gd.Katakana(Ha)||
Gd["Vertical Forms"](Ha)||Gd["Yi Radicals"](Ha)||Gd["Yi Syllables"](Ha)));(Xc[Fb]||Jb||Ab.imageName)&&ra.push(Ue(hb+1,Ya,F,ra,Se(Fb,c.getCharCode(hb+1),Jb&&Pa),!1))}}return function zb(rb){return rb?zb(rb.priorBreak).concat(rb.index):[]}(Ue(c.length(),Ya,F,ra,0,!0))}function xi(c){var x=.5,F=.5;switch(c){case "right":case "top-right":case "bottom-right":x=1;break;case "left":case "top-left":case "bottom-left":x=0}switch(c){case "bottom":case "bottom-right":case "bottom-left":F=1;break;case "top":case "top-right":case "top-left":F=
0}return{horizontalAlign:x,verticalAlign:F}}function Lj(c,x,F,V,fa,ra){c=c.image;if(c.content){var ya=c.content;var Ha=c.pixelRatio||1;ya=[ya[0]/Ha,ya[1]/Ha,c.displaySize[0]-ya[2]/Ha,c.displaySize[1]-ya[3]/Ha]}var Pa,Ya,hb,Ab;Ha=x.left*ra;var Fb=x.right*ra;"width"===F||"both"===F?(Ab=fa[0]+Ha-V[3],Ya=fa[0]+Fb+V[1]):Ya=(Ab=fa[0]+(Ha+Fb-c.displaySize[0])/2)+c.displaySize[0];Ha=x.top*ra;x=x.bottom*ra;return"height"===F||"both"===F?(Pa=fa[1]+Ha-V[0],hb=fa[1]+x+V[2]):hb=(Pa=fa[1]+(Ha+x-c.displaySize[1])/
2)+c.displaySize[1],{image:c,top:Pa,right:Ya,bottom:hb,left:Ab,collisionPadding:ya}}function Mj(c,x){x=x.expression;if("constant"===x.kind)return{kind:"constant",layoutSize:x.evaluate(new Xe(c+1))};if("source"===x.kind)return{kind:"source"};for(var F=x.zoomStops,V=x.interpolationType,fa=0;fa<F.length&&F[fa]<=c;)fa++;for(var ra=fa=Math.max(0,fa-1);ra<F.length&&F[ra]<c+1;)ra++;ra=Math.min(F.length-1,ra);c=F[fa];F=F[ra];return"composite"===x.kind?{kind:"composite",minZoom:c,maxZoom:F,interpolationType:V}:
{kind:"camera",minZoom:c,maxZoom:F,minSize:x.evaluate(new Xe(c)),maxSize:x.evaluate(new Xe(F)),interpolationType:V}}function $g(c,x,F){var V=x.uSize,fa=F.lowerSize;return"source"===c.kind?fa/128:"composite"===c.kind?xa(fa/128,F.upperSize/128,x.uSizeT):V}function Ti(c,x){var F=0,V=0;if("constant"===c.kind)V=c.layoutSize;else if("source"!==c.kind){var fa=c.interpolationType;x=fa?d(Nf.interpolationFactor(fa,x,c.minZoom,c.maxZoom),0,1):0;"camera"===c.kind?V=xa(c.minSize,c.maxSize,x):F=x}return{uSizeT:F,
uSize:V}}function yi(c,x,F,V,fa){if(void 0===x.segment)return!0;var ra=x;x=x.segment+1;for(var ya=0;ya>-F/2;){if(0>--x)return!1;ya-=c[x].dist(ra);ra=c[x]}ya+=c[x].dist(c[x+1]);x++;ra=[];for(var Ha=0;ya<F/2;){var Pa=c[x],Ya=c[x+1];if(!Ya)return!1;var hb=c[x-1].angleTo(Pa)-Pa.angleTo(Ya);hb=Math.abs((hb+3*Math.PI)%(2*Math.PI)-Math.PI);ra.push({distance:ya,angleDelta:hb});for(Ha+=hb;ya-ra[0].distance>V;)Ha-=ra.shift().angleDelta;if(Ha>fa)return!1;x++;ya+=Pa.dist(Ya)}return!0}function Lf(c){for(var x=
0,F=0;F<c.length-1;F++)x+=c[F].dist(c[F+1]);return x}function Ui(c,x,F,V,fa,ra){fa=F?.6*fa*ra:0;F=Math.max(F?F.right-F.left:0,V?V.right-V.left:0)*ra;var ya=0,Ha=Lf(c)/2;for(V=0;V<c.length-1;V++){ra=c[V];var Pa=c[V+1],Ya=ra.dist(Pa);if(ya+Ya>Ha)return Ha=(Ha-ya)/Ya,ya=xa(ra.x,Pa.x,Ha),Ha=xa(ra.y,Pa.y,Ha),V=new Zc(ya,Ha,Pa.angleTo(ra),V),V._round(),!fa||yi(c,V,F,fa,x)?V:void 0;ya+=Ya}}function ek(c,x,F,V,fa,ra,ya,Ha,Pa){fa=Math.max(V?V.right-V.left:0,fa?fa.right-fa.left:0);var Ya=fa*ya,hb=0===c[0].x||
c[0].x===Pa||0===c[0].y||c[0].y===Pa;return x-Ya<x/4&&(x=Ya+x/4),function fd(Fb,Jb,Rb,rb,zb,hc,vc,pc,$c){var nd=hc/2,xd=Lf(Fb),vd=0;Jb-=Rb;for(var Vd=[],he=0;he<Fb.length-1;he++){for(var Wd=Fb[he],ce=Fb[he+1],ve=Wd.dist(ce),Md=ce.angleTo(Wd);Jb+Rb<vd+ve;){var Id=((Jb+=Rb)-vd)/ve,Pd=xa(Wd.x,ce.x,Id);Id=xa(Wd.y,ce.y,Id);0<=Pd&&Pd<$c&&0<=Id&&Id<$c&&0<=Jb-nd&&Jb+nd<=xd&&(Pd=new Zc(Pd,Id,Md,he),Pd._round(),rb&&!yi(Fb,Pd,hc,rb,zb)||Vd.push(Pd))}vd+=ve}return pc||Vd.length||vc||(Vd=fd(Fb,vd/2,Rb,rb,zb,hc,
vc,!0,$c)),Vd}(c,hb?x/2*Ha%x:(fa/2+2*ra)*ya*Ha%x,x,V?.6*ra*ya:0,F,Ya,hb,!1,Pa)}function Hf(c,x,F,V,fa){for(var ra=[],ya=0;ya<c.length;ya++)for(var Ha=c[ya],Pa=void 0,Ya=0;Ya<Ha.length-1;Ya++){var hb=Ha[Ya],Ab=Ha[Ya+1];hb.x<x&&Ab.x<x||(hb.x<x?hb=(new Ud(x,hb.y+(x-hb.x)/(Ab.x-hb.x)*(Ab.y-hb.y)))._round():Ab.x<x&&(Ab=(new Ud(x,hb.y+(x-hb.x)/(Ab.x-hb.x)*(Ab.y-hb.y)))._round()),hb.y<F&&Ab.y<F||(hb.y<F?hb=(new Ud(hb.x+(F-hb.y)/(Ab.y-hb.y)*(Ab.x-hb.x),F))._round():Ab.y<F&&(Ab=(new Ud(hb.x+(F-hb.y)/(Ab.y-
hb.y)*(Ab.x-hb.x),F))._round()),hb.x>=V&&Ab.x>=V||(hb.x>=V?hb=(new Ud(V,hb.y+(V-hb.x)/(Ab.x-hb.x)*(Ab.y-hb.y)))._round():Ab.x>=V&&(Ab=(new Ud(V,hb.y+(V-hb.x)/(Ab.x-hb.x)*(Ab.y-hb.y)))._round()),hb.y>=fa&&Ab.y>=fa||(hb.y>=fa?hb=(new Ud(hb.x+(fa-hb.y)/(Ab.y-hb.y)*(Ab.x-hb.x),fa))._round():Ab.y>=fa&&(Ab=(new Ud(hb.x+(fa-hb.y)/(Ab.y-hb.y)*(Ab.x-hb.x),fa))._round()),Pa&&hb.equals(Pa[Pa.length-1])||ra.push(Pa=[hb]),Pa.push(Ab)))))}return ra}function Lg(c,x,F,V){var fa=[],ra=c.image,ya=ra.pixelRatio,Ha=
ra.paddedRect.w-2,Pa=ra.paddedRect.h-2,Ya=c.right-c.left,hb=c.bottom-c.top,Ab=ra.stretchX||[[0,Ha]],Fb=ra.stretchY||[[0,Pa]],Jb=function(he,Wd){return he+Wd[1]-Wd[0]},Rb=Ab.reduce(Jb,0),rb=Fb.reduce(Jb,0),zb=Ha-Rb,hc=Pa-rb,vc=0,pc=Rb,$c=0,fd=rb,nd=0,xd=zb,vd=0,Vd=hc;ra.content&&V&&(Jb=ra.content,vc=dg(Ab,0,Jb[0]),$c=dg(Fb,0,Jb[1]),pc=dg(Ab,Jb[0],Jb[2]),fd=dg(Fb,Jb[1],Jb[3]),nd=Jb[0]-vc,vd=Jb[1]-$c,xd=Jb[2]-Jb[0]-pc,Vd=Jb[3]-Jb[1]-fd);Jb=function(he,Wd,ce,ve){var Md=(he.stretch-vc)/pc*Ya+c.left,Id=
he.fixed-nd-xd*he.stretch/Rb,Pd=(Wd.stretch-$c)/fd*hb+c.top,Me=Wd.fixed-vd-Vd*Wd.stretch/rb,hf=(ce.stretch-vc)/pc*Ya+c.left,Ig=ce.fixed-nd-xd*ce.stretch/Rb,Sf=(ve.stretch-$c)/fd*hb+c.top,jf=ve.fixed-vd-Vd*ve.stretch/rb,Ae=new Ud(Md,Pd);Pd=new Ud(hf,Pd);hf=new Ud(hf,Sf);Md=new Ud(Md,Sf);Id=new Ud(Id/ya,Me/ya);Ig=new Ud(Ig/ya,jf/ya);if(Me=x*Math.PI/180)jf=Math.sin(Me),Me=Math.cos(Me),jf=[Me,-jf,jf,Me],Ae._matMult(jf),Pd._matMult(jf),Md._matMult(jf),hf._matMult(jf);he=he.stretch+he.fixed;Wd=Wd.stretch+
Wd.fixed;return{tl:Ae,tr:Pd,bl:Md,br:hf,tex:{x:ra.paddedRect.x+1+he,y:ra.paddedRect.y+1+Wd,w:ce.stretch+ce.fixed-he,h:ve.stretch+ve.fixed-Wd},writingMode:void 0,glyphOffset:[0,0],sectionIndex:0,pixelOffsetTL:Id,pixelOffsetBR:Ig,minFontScaleX:xd/ya/Ya,minFontScaleY:Vd/ya/hb,isSDF:F}};if(V&&(ra.stretchX||ra.stretchY))for(V=zi(Ab,zb,Rb),Fb=zi(Fb,hc,rb),Ha=0;Ha<V.length-1;Ha++)for(Pa=V[Ha],Ab=V[Ha+1],hc=0;hc<Fb.length-1;hc++)fa.push(Jb(Pa,Fb[hc],Ab,Fb[hc+1]));else fa.push(Jb({fixed:0,stretch:-1},{fixed:0,
stretch:-1},{fixed:0,stretch:Ha+1},{fixed:0,stretch:Pa+1}));return fa}function dg(c,x,F){for(var V=0,fa=0;fa<c.length;fa+=1){var ra=c[fa];V+=Math.max(x,Math.min(F,ra[1]))-Math.max(x,Math.min(F,ra[0]))}return V}function zi(c,x,F){for(var V=[{fixed:-1,stretch:0}],fa=0;fa<c.length;fa+=1){var ra=c[fa],ya=ra[0];ra=ra[1];var Ha=V[V.length-1];V.push({fixed:ya-Ha.stretch,stretch:Ha.stretch});V.push({fixed:ya-Ha.stretch,stretch:Ha.stretch+(ra-ya)})}return V.push({fixed:x+1,stretch:F}),V}function Th(c,x){return c<
x?-1:c>x?1:0}function ah(c,x,F){void 0===x&&(x=1);void 0===F&&(F=!1);for(var V=1/0,fa=1/0,ra=-1/0,ya=-1/0,Ha=c[0],Pa=0;Pa<Ha.length;Pa++){var Ya=Ha[Pa];(!Pa||Ya.x<V)&&(V=Ya.x);(!Pa||Ya.y<fa)&&(fa=Ya.y);(!Pa||Ya.x>ra)&&(ra=Ya.x);(!Pa||Ya.y>ya)&&(ya=Ya.y)}Ya=Math.min(ra-V,ya-fa);Ha=Ya/2;Pa=new Ed([],og);if(0===Ya)return new Ud(V,fa);for(;V<ra;V+=Ya)for(var hb=fa;hb<ya;hb+=Ya)Pa.push(new Ai(V+Ha,hb+Ha,Ha,c));ya=ra=fa=0;V=c[0];Ya=0;hb=V.length;for(var Ab=hb-1;Ya<hb;Ab=Ya++){var Fb=V[Ya];Ab=V[Ab];var Jb=
Fb.x*Ab.y-Ab.x*Fb.y;ra+=(Fb.x+Ab.x)*Jb;ya+=(Fb.y+Ab.y)*Jb;fa+=3*Jb}fa=new Ai(ra/fa,ya/fa,0,c);for(ra=Pa.length;Pa.length;)ya=Pa.pop(),(ya.d>fa.d||!fa.d)&&(fa=ya,F&&console.log("found best %d after %d probes",Math.round(1E4*ya.d)/1E4,ra)),ya.max-fa.d<=x||(Pa.push(new Ai(ya.p.x-(Ha=ya.h/2),ya.p.y-Ha,Ha,c)),Pa.push(new Ai(ya.p.x+Ha,ya.p.y-Ha,Ha,c)),Pa.push(new Ai(ya.p.x-Ha,ya.p.y+Ha,Ha,c)),Pa.push(new Ai(ya.p.x+Ha,ya.p.y+Ha,Ha,c)),ra+=4);return F&&(console.log("num probes: "+ra),console.log("best distance: "+
fa.d)),fa.p}function og(c,x){return x.max-c.max}function Ai(c,x,F,V){this.p=new Ud(c,x);this.h=F;c=this.p;x=!1;F=1/0;for(var fa=0;fa<V.length;fa++)for(var ra=V[fa],ya=0,Ha=ra.length,Pa=Ha-1;ya<Ha;Pa=ya++){var Ya=ra[ya];Pa=ra[Pa];Ya.y>c.y!=Pa.y>c.y&&c.x<(Pa.x-Ya.x)*(c.y-Ya.y)/(Pa.y-Ya.y)+Ya.x&&(x=!x);F=Math.min(F,Sc(c,Ya,Pa))}this.d=(x?1:-1)*Math.sqrt(F);this.max=this.d+this.h*Math.SQRT2}function Nj(c,x){return x[1]!==Nd?function(F,V,fa){var ra=0,ya=0;switch(V=Math.abs(V),fa=Math.abs(fa),F){case "top-right":case "top-left":case "top":ya=
fa-7;break;case "bottom-right":case "bottom-left":case "bottom":ya=7-fa}switch(F){case "top-right":case "bottom-right":case "right":ra=-V;break;case "top-left":case "bottom-left":case "left":ra=V}return[ra,ya]}(c,x[0],x[1]):function(F,V){var fa=0,ra=0;0>V&&(V=0);var ya=V/Math.sqrt(2);switch(F){case "top-right":case "top-left":ra=ya-7;break;case "bottom-right":case "bottom-left":ra=7-ya;break;case "bottom":ra=7-V;break;case "top":ra=V-7}switch(F){case "top-right":case "bottom-right":fa=-ya;break;case "top-left":case "bottom-left":fa=
ya;break;case "left":fa=V;break;case "right":fa=-V}return[fa,ra]}(c,x[0])}function mj(c){switch(c){case "right":case "top-right":case "bottom-right":return"right";case "left":case "top-left":case "bottom-left":return"left"}return"center"}function eg(c,x,F,V,fa,ra,ya,Ha,Pa,Ya,hb,Ab,Fb,Jb,Rb){for(var rb=c.allowVerticalPlacement,zb=fa.layout.get("text-rotate").evaluate(ya,{})*Math.PI/180,hc=[],vc=0,pc=F.positionedLines;vc<pc.length;vc+=1)for(var $c=pc[vc],fd=0,nd=$c.positionedGlyphs;fd<nd.length;fd+=
1){var xd=nd[fd];if(xd.rect){var vd=xd.rect||{},Vd=4,he=!0,Wd=1,ce=0,ve=(ra||rb)&&xd.vertical,Md=xd.metrics.advance*xd.scale/2;if(rb&&F.verticalizable&&(ce=$c.lineOffset/2-(xd.imageName?-(24-xd.metrics.width*xd.scale)/2:24*(xd.scale-1))),xd.imageName){var Id=V[xd.imageName];he=Id.sdf;Vd=1/(Wd=Id.pixelRatio)}Id=ra?[xd.x+Md,xd.y]:[0,0];var Pd=ra?[0,0]:[xd.x+Md+Ha[0],xd.y+Ha[1]-ce],Me=[0,0];ve&&(Me=Pd,Pd=[0,0]);ce=(xd.metrics.left-Vd)*xd.scale-Md+Pd[0];Vd=(-xd.metrics.top-Vd)*xd.scale+Pd[1];Pd=ce+vd.w*
xd.scale/Wd;var hf=Vd+vd.h*xd.scale/Wd;Wd=new Ud(ce,Vd);Vd=new Ud(Pd,Vd);ce=new Ud(ce,hf);Pd=new Ud(Pd,hf);ve&&(ve=new Ud(-Md,Md- -17),hf=-Math.PI/2,Md=12-Md,Md=new Ud(22-Md,-(xd.imageName?Md:0)),Me=new (Function.prototype.bind.apply(Ud,[null].concat(Me))),Wd._rotateAround(hf,ve)._add(Md)._add(Me),Vd._rotateAround(hf,ve)._add(Md)._add(Me),ce._rotateAround(hf,ve)._add(Md)._add(Me),Pd._rotateAround(hf,ve)._add(Md)._add(Me));zb&&(Md=Math.sin(zb),Me=Math.cos(zb),Md=[Me,-Md,Md,Me],Wd._matMult(Md),Vd._matMult(Md),
ce._matMult(Md),Pd._matMult(Md));Md=new Ud(0,0);Me=new Ud(0,0);hc.push({tl:Wd,tr:Vd,bl:ce,br:Pd,tex:vd,writingMode:F.writingMode,glyphOffset:Id,sectionIndex:xd.sectionIndex,isSDF:he,pixelOffsetTL:Md,pixelOffsetBR:Me,minFontScaleX:0,minFontScaleY:0})}}F=c.textSizeData;V=null;"source"===F.kind?32640<(V=[128*fa.layout.get("text-size").evaluate(ya,{})])[0]&&z(c.layerIds[0]+': Value for "text-size" is \x3e\x3d 255. Reduce your "text-size".'):"composite"===F.kind&&(32640<(V=[128*Jb.compositeTextSizes[0].evaluate(ya,
{},Rb),128*Jb.compositeTextSizes[1].evaluate(ya,{},Rb)])[0]||32640<V[1])&&z(c.layerIds[0]+': Value for "text-size" is \x3e\x3d 255. Reduce your "text-size".');c.addSymbols(c.text,hc,V,Ha,ra,ya,Ya,x,Pa.lineStartIndex,Pa.lineLength,Fb,Rb);for(x=0;x<hb.length;x+=1)Ab[hb[x]]=c.text.placedSymbolArray.length-1;return 4*hc.length}function tf(c){for(var x in c)return c[x];return null}function Vi(c,x,F,V){c=c.compareText;if(x in c)for(var fa=c[x],ra=fa.length-1;0<=ra;ra--){if(V.dist(fa[ra])<F)return!0}else c[x]=
[];return c[x].push(V),!1}function gg(c,x,F,V,fa,ra,ya,Ha,Pa,Ya,hb,Ab,Fb){c.emplaceBack(x,F,Math.round(32*V),Math.round(32*fa),ra,ya,((Ha?Math.min(32640,Math.round(Ha[0])):0)<<1)+(Pa?1:0),Ha?Math.min(32640,Math.round(Ha[1])):0,16*Ya,16*hb,256*Ab,256*Fb)}function Oj(c,x,F){c.emplaceBack(x.x,x.y,F);c.emplaceBack(x.x,x.y,F);c.emplaceBack(x.x,x.y,F);c.emplaceBack(x.x,x.y,F)}function Uh(c){var x=0;for(c=c.sections;x<c.length;x+=1){a:{var F=0;for(var V=c[x].text;F<V.length;F+=1)if(be(V[F].charCodeAt(0))){F=
!0;break a}F=!1}if(F)return!0}return!1}function Qf(c,x,F){F=12756274*Math.PI/256/Math.pow(2,F);return[c*F-12756274*Math.PI/2,x*F-12756274*Math.PI/2]}function fg(c){return(180+c)/360}function pg(c){return(180-180/Math.PI*Math.log(Math.tan(Math.PI/4+c*Math.PI/360)))/360}function If(c){return 360/Math.PI*Math.atan(Math.exp((180-360*c)*Math.PI/180))-90}function Mg(c,x,F,V,fa){0>(c*=2)&&(c=-1*c-1);var ra=1<<F;return(ra*ra*c+ra*fa+V).toString(36)+F.toString(36)+x.toString(36)}function bh(c,x,F,V,fa){return y(c,
function(ra,ya){return(ra=x instanceof Yg?x.get(ya):null)&&ra.evaluate?ra.evaluate(F,V,fa):ra})}function qf(c){for(var x=1/0,F=1/0,V=-1/0,fa=-1/0,ra=0;ra<c.length;ra+=1){var ya=c[ra];x=Math.min(x,ya.x);F=Math.min(F,ya.y);V=Math.max(V,ya.x);fa=Math.max(fa,ya.y)}return{minX:x,minY:F,maxX:V,maxY:fa}}function nj(c,x){return x-c}var Pj=g;g.prototype.sampleCurveX=function(c){return((this.ax*c+this.bx)*c+this.cx)*c};g.prototype.sampleCurveY=function(c){return((this.ay*c+this.by)*c+this.cy)*c};g.prototype.sampleCurveDerivativeX=
function(c){return(3*this.ax*c+2*this.bx)*c+this.cx};g.prototype.solveCurveX=function(c,x){var F,V;void 0===x&&(x=1E-6);var fa=c;for(F=0;8>F;F++){if(V=this.sampleCurveX(fa)-c,Math.abs(V)<x)return fa;var ra=this.sampleCurveDerivativeX(fa);if(1E-6>Math.abs(ra))break;fa-=V/ra}if((fa=c)<(F=0))return F;if(fa>(ra=1))return ra;for(;F<ra&&!(V=this.sampleCurveX(fa),Math.abs(V-c)<x);)c>V?F=fa:ra=fa,fa=.5*(ra-F)+F;return fa};g.prototype.solve=function(c,x){return this.sampleCurveY(this.solveCurveX(c,x))};var Ud=
n;n.prototype={clone:function(){return new n(this.x,this.y)},add:function(c){return this.clone()._add(c)},sub:function(c){return this.clone()._sub(c)},multByPoint:function(c){return this.clone()._multByPoint(c)},divByPoint:function(c){return this.clone()._divByPoint(c)},mult:function(c){return this.clone()._mult(c)},div:function(c){return this.clone()._div(c)},rotate:function(c){return this.clone()._rotate(c)},rotateAround:function(c,x){return this.clone()._rotateAround(c,x)},matMult:function(c){return this.clone()._matMult(c)},
unit:function(){return this.clone()._unit()},perp:function(){return this.clone()._perp()},round:function(){return this.clone()._round()},mag:function(){return Math.sqrt(this.x*this.x+this.y*this.y)},equals:function(c){return this.x===c.x&&this.y===c.y},dist:function(c){return Math.sqrt(this.distSqr(c))},distSqr:function(c){var x=c.x-this.x;c=c.y-this.y;return x*x+c*c},angle:function(){return Math.atan2(this.y,this.x)},angleTo:function(c){return Math.atan2(this.y-c.y,this.x-c.x)},angleWith:function(c){return this.angleWithSep(c.x,
c.y)},angleWithSep:function(c,x){return Math.atan2(this.x*x-this.y*c,this.x*c+this.y*x)},_matMult:function(c){var x=c[2]*this.x+c[3]*this.y;return this.x=c[0]*this.x+c[1]*this.y,this.y=x,this},_add:function(c){return this.x+=c.x,this.y+=c.y,this},_sub:function(c){return this.x-=c.x,this.y-=c.y,this},_mult:function(c){return this.x*=c,this.y*=c,this},_div:function(c){return this.x/=c,this.y/=c,this},_multByPoint:function(c){return this.x*=c.x,this.y*=c.y,this},_divByPoint:function(c){return this.x/=
c.x,this.y/=c.y,this},_unit:function(){return this._div(this.mag()),this},_perp:function(){var c=this.y;return this.y=this.x,this.x=-c,this},_rotate:function(c){var x=Math.cos(c);c=Math.sin(c);var F=c*this.x+x*this.y;return this.x=x*this.x-c*this.y,this.y=F,this},_rotateAround:function(c,x){var F=Math.cos(c);c=Math.sin(c);var V=x.y+c*(this.x-x.x)+F*(this.y-x.y);return this.x=x.x+F*(this.x-x.x)-c*(this.y-x.y),this.y=V,this},_round:function(){return this.x=Math.round(this.x),this.y=Math.round(this.y),
this}};n.convert=function(c){return c instanceof n?c:Array.isArray(c)?new n(c[0],c[1]):c};var tk=p(.25,.1,.25,1),Ng=1,qg={},Vh=null,Bi,Ci,zh,Og,uk=self.performance&&self.performance.now?self.performance.now.bind(self.performance):Date.now.bind(Date),fk=self.requestAnimationFrame||self.mozRequestAnimationFrame||self.webkitRequestAnimationFrame||self.msRequestAnimationFrame,Wh=self.cancelAnimationFrame||self.mozCancelAnimationFrame||self.webkitCancelAnimationFrame||self.msCancelAnimationFrame,Cg={now:uk,
frame:function(c){var x=fk(c);return{cancel:function(){return Wh(x)}}},getImageData:function(c,x){void 0===x&&(x=0);var F=self.document.createElement("canvas"),V=F.getContext("2d");if(!V)throw Error("failed to create canvas 2d context");return F.width=c.width,F.height=c.height,V.drawImage(c,0,0,c.width,c.height),V.getImageData(-x,-x,c.width+2*x,c.height+2*x)},resolveURL:function(c){return Bi||(Bi=self.document.createElement("a")),Bi.href=c,Bi.href},hardwareConcurrency:self.navigator.hardwareConcurrency||
4,get devicePixelRatio(){return self.devicePixelRatio},get prefersReducedMotion(){return!!self.matchMedia&&(null==Ci&&(Ci=self.matchMedia("(prefers-reduced-motion: reduce)")),Ci.matches)}},Ve={API_URL:"https://api.mapbox.com",get EVENTS_URL(){return this.API_URL?0===this.API_URL.indexOf("https://api.mapbox.cn")?"https://events.mapbox.cn/events/v2":0===this.API_URL.indexOf("https://api.mapbox.com")?"https://events.mapbox.com/events/v2":null:null},FEEDBACK_URL:"https://apps.mapbox.com/feedback",REQUIRE_ACCESS_TOKEN:!0,
ACCESS_TOKEN:null,MAX_PARALLEL_IMAGE_REQUESTS:16},Dg={supported:!1,testSupport:function(c){!Xh&&Og&&(oj?J(c):zh=c)}},Xh=!1,oj=!1;self.document&&((Og=self.document.createElement("img")).onload=function(){zh&&J(zh);zh=null;oj=!0},Og.onerror=function(){Xh=!0;zh=null},Og.src="data:image/webp;base64,UklGRh4AAABXRUJQVlA4TBEAAAAvAQAAAAfQ//73v/+BiOh/AAA\x3d");var Mf=function(c,x){this._transformRequestFn=c;this._customAccessToken=x;this._createSkuToken()};Mf.prototype._createSkuToken=function(){var c;var x=
"";for(c=0;10>c;c++)x+="0123456789abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ"[Math.floor(62*Math.random())];x=["101",x].join("");c=Date.now()+432E5;this._skuToken=x;this._skuTokenExpiresAt=c};Mf.prototype._isSkuTokenExpired=function(){return Date.now()>this._skuTokenExpiresAt};Mf.prototype.transformRequest=function(c,x){return this._transformRequestFn&&this._transformRequestFn(c,x)||{url:c}};Mf.prototype.normalizeStyleURL=function(c,x){if(!L(c))return c;c=K(c);return c.path="/styles/v1"+
c.path,this._makeAPIURL(c,this._customAccessToken||x)};Mf.prototype.normalizeGlyphsURL=function(c,x){if(!L(c))return c;c=K(c);return c.path="/fonts/v1"+c.path,this._makeAPIURL(c,this._customAccessToken||x)};Mf.prototype.normalizeSourceURL=function(c,x){if(!L(c))return c;c=K(c);return c.path="/v4/"+c.authority+".json",c.params.push("secure"),this._makeAPIURL(c,this._customAccessToken||x)};Mf.prototype.normalizeSpriteURL=function(c,x,F,V){var fa=K(c);return L(c)?(fa.path="/styles/v1"+fa.path+"/sprite"+
x+F,this._makeAPIURL(fa,this._customAccessToken||V)):(fa.path+=""+x+F,H(fa))};Mf.prototype.normalizeTileURL=function(c,x){if(this._isSkuTokenExpired()&&this._createSkuToken(),c&&!L(c))return c;c=K(c);c.path=c.path.replace(/(\.(png|jpg)\d*)(?=$)/,(2<=Cg.devicePixelRatio||512===x?"@2x":"")+(Dg.supported?".webp":"$1"));c.path=c.path.replace(/^.+\/v4\//,"/");c.path="/v4"+c.path;if(!(x=this._customAccessToken))a:{x=0;for(var F=c.params;x<F.length;x+=1){var V=F[x].match(/^access_token=(.*)$/);if(V){x=V[1];
break a}}x=null}x=x||Ve.ACCESS_TOKEN;return Ve.REQUIRE_ACCESS_TOKEN&&x&&this._skuToken&&c.params.push("sku\x3d"+this._skuToken),this._makeAPIURL(c,x)};Mf.prototype.canonicalizeTileURL=function(c,x){var F=K(c);if(!F.path.match(/(^\/v4\/)/)||!F.path.match(/\.[\w]+$/))return c;c="mapbox://tiles/"+F.path.replace("/v4/","");F=F.params;return x&&(F=F.filter(function(V){return!V.match(/^access_token=/)})),F.length&&(c+="?"+F.join("\x26")),c};Mf.prototype.canonicalizeTileset=function(c,x){x=!!x&&L(x);var F=
[],V=0;for(c=c.tiles||[];V<c.length;V+=1){var fa=c[V];Yh.test(fa)?F.push(this.canonicalizeTileURL(fa,x)):F.push(fa)}return F};Mf.prototype._makeAPIURL=function(c,x){var F=K(Ve.API_URL);if(c.protocol=F.protocol,c.authority=F.authority,"/"!==F.path&&(c.path=""+F.path+c.path),!Ve.REQUIRE_ACCESS_TOKEN)return H(c);if(!(x=x||Ve.ACCESS_TOKEN))throw Error("An API access token is required to use Mapbox GL. See https://www.mapbox.com/api-documentation/#access-tokens-and-token-scopes");if("s"===x[0])throw Error("Use a public access token (pk.*) with Mapbox GL, not a secret access token (sk.*). See https://www.mapbox.com/api-documentation/#access-tokens-and-token-scopes");
return c.params=c.params.filter(function(V){return-1===V.indexOf("access_token")}),c.params.push("access_token\x3d"+x),H(c)};var Yh=/^((https?:)?\/\/)?([^\/]+\.)?mapbox\.c(n|om)(\/|\?|$)/i,Wi=/^(\w+):\/\/([^/?]*)(\/[^?]+)?\??(.+)?/,kh=function(c){this.type=c;this.anonId=null;this.eventData={};this.queue=[];this.pendingRequest=null};kh.prototype.getStorageKey=function(c){var x,F=Q(Ve.ACCESS_TOKEN);return x=F&&F.u?self.btoa(encodeURIComponent(F.u).replace(/%([0-9A-F]{2})/g,function(V,fa){return String.fromCharCode(Number("0x"+
fa))})):Ve.ACCESS_TOKEN||"",c?"mapbox.eventData."+c+":"+x:"mapbox.eventData:"+x};kh.prototype.fetchEventData=function(){var c=G("localStorage"),x=this.getStorageKey(),F=this.getStorageKey("uuid");if(c)try{var V=self.localStorage.getItem(x);V&&(this.eventData=JSON.parse(V));var fa=self.localStorage.getItem(F);fa&&(this.anonId=fa)}catch(ra){z("Unable to read from LocalStorage")}};kh.prototype.saveEventData=function(){var c=G("localStorage"),x=this.getStorageKey(),F=this.getStorageKey("uuid");if(c)try{self.localStorage.setItem(F,
this.anonId),1<=Object.keys(this.eventData).length&&self.localStorage.setItem(x,JSON.stringify(this.eventData))}catch(V){z("Unable to write to LocalStorage")}};kh.prototype.processRequests=function(c){};kh.prototype.postEvent=function(c,x,F,V){var fa=this;if(Ve.EVENTS_URL){var ra=K(Ve.EVENTS_URL);ra.params.push("access_token\x3d"+(V||Ve.ACCESS_TOKEN||""));c={event:this.type,created:(new Date(c)).toISOString(),sdkIdentifier:"mapbox-gl-js",sdkVersion:"1.10.1",skuId:"01",userId:this.anonId};x=x?f(c,
x):c;ra={url:H(ra),headers:{"Content-Type":"text/plain"},body:JSON.stringify([x])};this.pendingRequest=Hb(ra,function(ya){fa.pendingRequest=null;F(ya);fa.saveEventData();fa.processRequests(V)})}};kh.prototype.queueRequest=function(c,x){this.queue.push(c);this.processRequests(x)};var lh,mf,hg=function(c){function x(){c.call(this,"map.load");this.success={};this.skuToken=""}return c&&(x.__proto__=c),(x.prototype=Object.create(c&&c.prototype)).constructor=x,x.prototype.postMapLoadEvent=function(F,V,
fa,ra){this.skuToken=fa;(Ve.EVENTS_URL&&ra||Ve.ACCESS_TOKEN&&Array.isArray(F)&&F.some(function(ya){return L(ya)||Yh.test(ya)}))&&this.queueRequest({id:V,timestamp:Date.now()},ra)},x.prototype.processRequests=function(F){var V=this;if(!this.pendingRequest&&0!==this.queue.length){var fa=this.queue.shift(),ra=fa.id;fa=fa.timestamp;ra&&this.success[ra]||(this.anonId||this.fetchEventData(),t(this.anonId)||(this.anonId=k()),this.postEvent(fa,{skuToken:this.skuToken},function(ya){ya||ra&&(V.success[ra]=
!0)},F))}},x}(kh),vk=new (function(c){function x(F){c.call(this,"appUserTurnstile");this._customAccessToken=F}return c&&(x.__proto__=c),(x.prototype=Object.create(c&&c.prototype)).constructor=x,x.prototype.postTurnstileEvent=function(F,V){Ve.EVENTS_URL&&Ve.ACCESS_TOKEN&&Array.isArray(F)&&F.some(function(fa){return L(fa)||Yh.test(fa)})&&this.queueRequest(Date.now(),V)},x.prototype.processRequests=function(F){var V=this;if(!this.pendingRequest&&0!==this.queue.length){this.anonId&&this.eventData.lastSuccess&&
this.eventData.tokenU||this.fetchEventData();var fa=Q(Ve.ACCESS_TOKEN),ra=fa?fa.u:Ve.ACCESS_TOKEN;fa=ra!==this.eventData.tokenU;t(this.anonId)||(this.anonId=k(),fa=!0);var ya=this.queue.shift();if(this.eventData.lastSuccess){var Ha=new Date(this.eventData.lastSuccess),Pa=new Date(ya),Ya=(ya-this.eventData.lastSuccess)/864E5;fa=fa||1<=Ya||-1>Ya||Ha.getDate()!==Pa.getDate()}else fa=!0;if(!fa)return this.processRequests();this.postEvent(ya,{"enabled.telemetry":!1},function(hb){hb||(V.eventData.lastSuccess=
ya,V.eventData.tokenU=ra)},F)}},x}(kh)),mh=vk.postTurnstileEvent.bind(vk),Di=new hg,lb=Di.postMapLoadEvent.bind(Di),W=500,aa=50,Z,ea=1/0,wa={Unknown:"Unknown",Style:"Style",Source:"Source",Tile:"Tile",Glyphs:"Glyphs",SpriteImage:"SpriteImage",SpriteJSON:"SpriteJSON",Image:"Image"};"function"==typeof Object.freeze&&Object.freeze(wa);var Ga=function(c){function x(F,V,fa){401===V&&Yh.test(fa)&&(F+=": you may have provided an invalid Mapbox access token. See https://www.mapbox.com/api-documentation/#access-tokens-and-token-scopes");
c.call(this,F);this.status=V;this.url=fa;this.name=this.constructor.name;this.message=F}return c&&(x.__proto__=c),(x.prototype=Object.create(c&&c.prototype)).constructor=x,x.prototype.toString=function(){return this.name+": "+this.message+" ("+this.status+"): "+this.url},x}(Error),Sa=C()?function(){return self.worker&&self.worker.referrer}:function(){return("blob:"===self.location.protocol?self.parent:self).location.href},ab=function(c,x){if(!(/^file:/.test(F=c.url)||/^file:/.test(Sa())&&!/^\w+:/.test(F))){if(self.fetch&&
self.Request&&self.AbortController&&self.Request.prototype.hasOwnProperty("signal"))return function(V,fa){var ra,ya=new self.AbortController,Ha=new self.Request(V.url,{method:V.method||"GET",body:V.body,credentials:V.credentials,headers:V.headers,referrer:Sa(),signal:ya.signal}),Pa=!1,Ya=!1,hb=0<(ra=Ha.url).indexOf("sku\x3d")&&Yh.test(ra);"json"===V.type&&Ha.headers.set("Accept","application/json");ra=function(Fb,Jb,Rb){if(!Ya){if(Fb&&"SecurityError"!==Fb.message&&z(Fb),Jb&&Rb)return Ab(Jb);var rb=
Date.now();self.fetch(Ha).then(function(zb){if(zb.ok){var hc=hb?zb.clone():null;return Ab(zb,hc,rb)}return fa(new Ga(zb.statusText,zb.status,V.url))}).catch(function(zb){20!==zb.code&&fa(Error(zb.message))})}};var Ab=function(Fb,Jb,Rb){("arrayBuffer"===V.type?Fb.arrayBuffer():"json"===V.type?Fb.json():Fb.text()).then(function(rb){Ya||(Jb&&Rb&&function(zb,hc,vc){if(M(),lh){var pc={status:hc.status,statusText:hc.statusText,headers:new self.Headers};hc.headers.forEach(function(fd,nd){return pc.headers.set(nd,
fd)});var $c=u(hc.headers.get("Cache-Control")||"");$c["no-store"]||($c["max-age"]&&pc.headers.set("Expires",(new Date(vc+1E3*$c["max-age"])).toUTCString()),42E4>(new Date(pc.headers.get("Expires"))).getTime()-vc||function(fd,nd){if(void 0===mf)try{new Response(new ReadableStream),mf=!0}catch(xd){mf=!1}mf?nd(fd.body):fd.blob().then(nd)}(hc,function(fd){var nd=new self.Response(fd,pc);M();lh&&lh.then(function(xd){return xd.put(P(zb.url),nd)}).catch(function(xd){return z(xd.message)})}))}}(Ha,Jb,Rb),
Pa=!0,fa(null,rb,Fb.headers.get("Cache-Control"),Fb.headers.get("Expires")))}).catch(function(rb){Ya||fa(Error(rb.message))})};return hb?function(Fb,Jb){if(M(),!lh)return Jb(null);var Rb=P(Fb.url);lh.then(function(rb){rb.match(Rb).then(function(zb){if(zb){var hc=new Date(zb.headers.get("Expires")||0);var vc=u(zb.headers.get("Cache-Control")||"");hc=hc>Date.now()&&!vc["no-cache"]}else hc=!1;rb.delete(Rb);hc&&rb.put(Rb,zb.clone());Jb(null,zb,hc)}).catch(Jb)}).catch(Jb)}(Ha,ra):ra(null,null),{cancel:function(){Ya=
!0;Pa||ya.abort()}}}(c,x);if(C()&&self.worker&&self.worker.actor)return self.worker.actor.send("getResource",c,x,void 0,!0)}var F;return function(V,fa){var ra=new self.XMLHttpRequest,ya;for(ya in ra.open(V.method||"GET",V.url,!0),"arrayBuffer"===V.type&&(ra.responseType="arraybuffer"),V.headers)ra.setRequestHeader(ya,V.headers[ya]);return"json"===V.type&&(ra.responseType="text",ra.setRequestHeader("Accept","application/json")),ra.withCredentials="include"===V.credentials,ra.onerror=function(){fa(Error(ra.statusText))},
ra.onload=function(){if((200<=ra.status&&300>ra.status||0===ra.status)&&null!==ra.response){var Ha=ra.response;if("json"===V.type)try{Ha=JSON.parse(ra.response)}catch(Pa){return fa(Pa)}fa(null,Ha,ra.getResponseHeader("Cache-Control"),ra.getResponseHeader("Expires"))}else fa(new Ga(ra.statusText,ra.status,V.url))},ra.send(V.body),{cancel:function(){return ra.abort()}}}(c,x)},yb=function(c,x){return ab(f(c,{type:"arrayBuffer"}),x)},Hb=function(c,x){return ab(f(c,{method:"POST"}),x)};var Ib=[];var nc=
0;var mc=function(c,x){if(Dg.supported&&(c.headers||(c.headers={}),c.headers.accept="image/webp,*/*"),nc>=Ve.MAX_PARALLEL_IMAGE_REQUESTS)return c={requestParameters:c,callback:x,cancelled:!1,cancel:function(){this.cancelled=!0}},Ib.push(c),c;nc++;var F=!1,V=function(){if(!F)for(F=!0,nc--;Ib.length&&nc<Ve.MAX_PARALLEL_IMAGE_REQUESTS;){var ra=Ib.shift();ra.cancelled||(ra.cancel=mc(ra.requestParameters,ra.callback).cancel)}},fa=yb(c,function(ra,ya,Ha,Pa){V();ra?x(ra):ya&&(T()?function(Ya,hb){Ya=new self.Blob([new Uint8Array(Ya)],
{type:"image/png"});self.createImageBitmap(Ya).then(function(Ab){hb(null,Ab)}).catch(function(Ab){hb(Error("Could not load image because of "+Ab.message+". Please make sure to use a supported image type such as PNG or JPEG. Note that SVGs are not supported."))})}(ya,x):function(Ya,hb,Ab,Fb){var Jb=new self.Image,Rb=self.URL;Jb.onload=function(){hb(null,Jb);Rb.revokeObjectURL(Jb.src)};Jb.onerror=function(){return hb(Error("Could not load image. Please make sure to use a supported image type such as PNG or JPEG. Note that SVGs are not supported."))};
var rb=new self.Blob([new Uint8Array(Ya)],{type:"image/png"});Jb.cacheControl=Ab;Jb.expires=Fb;Jb.src=Ya.byteLength?Rb.createObjectURL(rb):"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAAC0lEQVQYV2NgAAIAAAUAAarVyFEAAAAASUVORK5CYII\x3d"}(ya,x,Ha,Pa))});return{cancel:function(){fa.cancel();V()}}},cc=function(c,x){void 0===x&&(x={});f(this,x);this.type=c},lc=function(c){function x(F,V){void 0===V&&(V={});c.call(this,"error",f({error:F},V))}return c&&(x.__proto__=c),(x.prototype=
Object.create(c&&c.prototype)).constructor=x,x}(cc),kc=function(){};kc.prototype.on=function(c,x){return this._listeners=this._listeners||{},O(c,x,this._listeners),this};kc.prototype.off=function(c,x){return U(c,x,this._listeners),U(c,x,this._oneTimeListeners),this};kc.prototype.once=function(c,x){return this._oneTimeListeners=this._oneTimeListeners||{},O(c,x,this._oneTimeListeners),this};kc.prototype.fire=function(c,x){"string"==typeof c&&(c=new cc(c,x||{}));x=c.type;if(this.listens(x)){c.target=
this;for(var F=0,V=this._listeners&&this._listeners[x]?this._listeners[x].slice():[];F<V.length;F+=1)V[F].call(this,c);F=0;for(V=this._oneTimeListeners&&this._oneTimeListeners[x]?this._oneTimeListeners[x].slice():[];F<V.length;F+=1){var fa=V[F];U(x,fa,this._oneTimeListeners);fa.call(this,c)}(x=this._eventedParent)&&(f(c,"function"==typeof this._eventedParentData?this._eventedParentData():this._eventedParentData),x.fire(c))}else c instanceof lc&&console.error(c.error);return this};kc.prototype.listens=
function(c){return this._listeners&&this._listeners[c]&&0<this._listeners[c].length||this._oneTimeListeners&&this._oneTimeListeners[c]&&0<this._oneTimeListeners[c].length||this._eventedParent&&this._eventedParent.listens(c)};kc.prototype.setEventedParent=function(c,x){return this._eventedParent=c,this._eventedParentData=x,this};var Gb={$version:8,$root:{version:{required:!0,type:"enum",values:[8]},name:{type:"string"},metadata:{type:"*"},center:{type:"array",value:"number"},zoom:{type:"number"},bearing:{type:"number",
default:0,period:360,units:"degrees"},pitch:{type:"number",default:0,units:"degrees"},light:{type:"light"},sources:{required:!0,type:"sources"},sprite:{type:"string"},glyphs:{type:"string"},transition:{type:"transition"},layers:{required:!0,type:"array",value:"layer"}},sources:{"*":{type:"source"}},source:"source_vector source_raster source_raster_dem source_geojson source_video source_image".split(" "),source_vector:{type:{required:!0,type:"enum",values:{vector:{}}},url:{type:"string"},tiles:{type:"array",
value:"string"},bounds:{type:"array",value:"number",length:4,default:[-180,-85.051129,180,85.051129]},scheme:{type:"enum",values:{xyz:{},tms:{}},default:"xyz"},minzoom:{type:"number",default:0},maxzoom:{type:"number",default:22},attribution:{type:"string"},promoteId:{type:"promoteId"},"*":{type:"*"}},source_raster:{type:{required:!0,type:"enum",values:{raster:{}}},url:{type:"string"},tiles:{type:"array",value:"string"},bounds:{type:"array",value:"number",length:4,default:[-180,-85.051129,180,85.051129]},
minzoom:{type:"number",default:0},maxzoom:{type:"number",default:22},tileSize:{type:"number",default:512,units:"pixels"},scheme:{type:"enum",values:{xyz:{},tms:{}},default:"xyz"},attribution:{type:"string"},"*":{type:"*"}},source_raster_dem:{type:{required:!0,type:"enum",values:{"raster-dem":{}}},url:{type:"string"},tiles:{type:"array",value:"string"},bounds:{type:"array",value:"number",length:4,default:[-180,-85.051129,180,85.051129]},minzoom:{type:"number",default:0},maxzoom:{type:"number",default:22},
tileSize:{type:"number",default:512,units:"pixels"},attribution:{type:"string"},encoding:{type:"enum",values:{terrarium:{},mapbox:{}},default:"mapbox"},"*":{type:"*"}},source_geojson:{type:{required:!0,type:"enum",values:{geojson:{}}},data:{type:"*"},maxzoom:{type:"number",default:18},attribution:{type:"string"},buffer:{type:"number",default:128,maximum:512,minimum:0},tolerance:{type:"number",default:.375},cluster:{type:"boolean",default:!1},clusterRadius:{type:"number",default:50,minimum:0},clusterMaxZoom:{type:"number"},
clusterProperties:{type:"*"},lineMetrics:{type:"boolean",default:!1},generateId:{type:"boolean",default:!1},promoteId:{type:"promoteId"}},source_video:{type:{required:!0,type:"enum",values:{video:{}}},urls:{required:!0,type:"array",value:"string"},coordinates:{required:!0,type:"array",length:4,value:{type:"array",length:2,value:"number"}}},source_image:{type:{required:!0,type:"enum",values:{image:{}}},url:{required:!0,type:"string"},coordinates:{required:!0,type:"array",length:4,value:{type:"array",
length:2,value:"number"}}},layer:{id:{type:"string",required:!0},type:{type:"enum",values:{fill:{},line:{},symbol:{},circle:{},heatmap:{},"fill-extrusion":{},raster:{},hillshade:{},background:{}},required:!0},metadata:{type:"*"},source:{type:"string"},"source-layer":{type:"string"},minzoom:{type:"number",minimum:0,maximum:24},maxzoom:{type:"number",minimum:0,maximum:24},filter:{type:"filter"},layout:{type:"layout"},paint:{type:"paint"}},layout:"layout_fill layout_line layout_circle layout_heatmap layout_fill-extrusion layout_symbol layout_raster layout_hillshade layout_background".split(" "),
layout_background:{visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_fill:{"fill-sort-key":{type:"number",expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_circle:{"circle-sort-key":{type:"number",expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},visibility:{type:"enum",
values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_heatmap:{visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},"layout_fill-extrusion":{visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_line:{"line-cap":{type:"enum",values:{butt:{},round:{},square:{}},default:"butt",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"line-join":{type:"enum",
values:{bevel:{},round:{},miter:{}},default:"miter",expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"line-miter-limit":{type:"number",default:2,requires:[{"line-join":"miter"}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"line-round-limit":{type:"number",default:1.05,requires:[{"line-join":"round"}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"line-sort-key":{type:"number",expression:{interpolated:!1,
parameters:["zoom","feature"]},"property-type":"data-driven"},visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_symbol:{"symbol-placement":{type:"enum",values:{point:{},line:{},"line-center":{}},default:"point",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"symbol-spacing":{type:"number",default:250,minimum:1,units:"pixels",requires:[{"symbol-placement":"line"}],expression:{interpolated:!0,parameters:["zoom"]},
"property-type":"data-constant"},"symbol-avoid-edges":{type:"boolean",default:!1,expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"symbol-sort-key":{type:"number",expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"symbol-z-order":{type:"enum",values:{auto:{},"viewport-y":{},source:{}},default:"auto",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-allow-overlap":{type:"boolean",default:!1,
requires:["icon-image"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-ignore-placement":{type:"boolean",default:!1,requires:["icon-image"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-optional":{type:"boolean",default:!1,requires:["icon-image","text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-rotation-alignment":{type:"enum",values:{map:{},viewport:{},auto:{}},default:"auto",
requires:["icon-image"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-size":{type:"number",default:1,minimum:0,units:"factor of the original icon size",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-text-fit":{type:"enum",values:{none:{},width:{},height:{},both:{}},default:"none",requires:["icon-image","text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},
"icon-text-fit-padding":{type:"array",value:"number",length:4,default:[0,0,0,0],units:"pixels",requires:["icon-image","text-field",{"icon-text-fit":["both","width","height"]}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"icon-image":{type:"resolvedImage",tokens:!0,expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-rotate":{type:"number",default:0,period:360,units:"degrees",requires:["icon-image"],expression:{interpolated:!0,
parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-padding":{type:"number",default:2,minimum:0,units:"pixels",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"icon-keep-upright":{type:"boolean",default:!1,requires:["icon-image",{"icon-rotation-alignment":"map"},{"symbol-placement":["line","line-center"]}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-offset":{type:"array",value:"number",
length:2,default:[0,0],requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-anchor":{type:"enum",values:{center:{},left:{},right:{},top:{},bottom:{},"top-left":{},"top-right":{},"bottom-left":{},"bottom-right":{}},default:"center",requires:["icon-image"],expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-pitch-alignment":{type:"enum",values:{map:{},viewport:{},auto:{}},default:"auto",requires:["icon-image"],
expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-pitch-alignment":{type:"enum",values:{map:{},viewport:{},auto:{}},default:"auto",requires:["text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-rotation-alignment":{type:"enum",values:{map:{},viewport:{},auto:{}},default:"auto",requires:["text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-field":{type:"formatted",
default:"",tokens:!0,expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-font":{type:"array",value:"string",default:["Open Sans Regular","Arial Unicode MS Regular"],requires:["text-field"],expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-size":{type:"number",default:16,minimum:0,units:"pixels",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-max-width":{type:"number",
default:10,minimum:0,units:"ems",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-line-height":{type:"number",default:1.2,units:"ems",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"text-letter-spacing":{type:"number",default:0,units:"ems",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-justify":{type:"enum",
values:{auto:{},left:{},center:{},right:{}},default:"center",requires:["text-field"],expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-radial-offset":{type:"number",units:"ems",default:0,requires:["text-field"],"property-type":"data-driven",expression:{interpolated:!0,parameters:["zoom","feature"]}},"text-variable-anchor":{type:"array",value:"enum",values:{center:{},left:{},right:{},top:{},bottom:{},"top-left":{},"top-right":{},"bottom-left":{},"bottom-right":{}},
requires:["text-field",{"symbol-placement":["point"]}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-anchor":{type:"enum",values:{center:{},left:{},right:{},top:{},bottom:{},"top-left":{},"top-right":{},"bottom-left":{},"bottom-right":{}},default:"center",requires:["text-field",{"!":"text-variable-anchor"}],expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-max-angle":{type:"number",default:45,units:"degrees",requires:["text-field",
{"symbol-placement":["line","line-center"]}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"text-writing-mode":{type:"array",value:"enum",values:{horizontal:{},vertical:{}},requires:["text-field",{"symbol-placement":["point"]}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-rotate":{type:"number",default:0,period:360,units:"degrees",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},
"text-padding":{type:"number",default:2,minimum:0,units:"pixels",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"text-keep-upright":{type:"boolean",default:!0,requires:["text-field",{"text-rotation-alignment":"map"},{"symbol-placement":["line","line-center"]}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-transform":{type:"enum",values:{none:{},uppercase:{},lowercase:{}},default:"none",requires:["text-field"],
expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-offset":{type:"array",value:"number",units:"ems",length:2,default:[0,0],requires:["text-field",{"!":"text-radial-offset"}],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-allow-overlap":{type:"boolean",default:!1,requires:["text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-ignore-placement":{type:"boolean",
default:!1,requires:["text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-optional":{type:"boolean",default:!1,requires:["text-field","icon-image"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_raster:{visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_hillshade:{visibility:{type:"enum",
values:{visible:{},none:{}},default:"visible","property-type":"constant"}},filter:{type:"array",value:"*"},filter_operator:{type:"enum",values:{"\x3d\x3d":{},"!\x3d":{},"\x3e":{},"\x3e\x3d":{},"\x3c":{},"\x3c\x3d":{},in:{},"!in":{},all:{},any:{},none:{},has:{},"!has":{},within:{}}},geometry_type:{type:"enum",values:{Point:{},LineString:{},Polygon:{}}},function:{expression:{type:"expression"},stops:{type:"array",value:"function_stop"},base:{type:"number",default:1,minimum:0},property:{type:"string",
default:"$zoom"},type:{type:"enum",values:{identity:{},exponential:{},interval:{},categorical:{}},default:"exponential"},colorSpace:{type:"enum",values:{rgb:{},lab:{},hcl:{}},default:"rgb"},default:{type:"*",required:!1}},function_stop:{type:"array",minimum:0,maximum:24,value:["number","color"],length:2},expression:{type:"array",value:"*",minimum:1},expression_name:{type:"enum",values:{let:{group:"Variable binding"},var:{group:"Variable binding"},literal:{group:"Types"},array:{group:"Types"},at:{group:"Lookup"},
in:{group:"Lookup"},"index-of":{group:"Lookup"},slice:{group:"Lookup"},case:{group:"Decision"},match:{group:"Decision"},coalesce:{group:"Decision"},step:{group:"Ramps, scales, curves"},interpolate:{group:"Ramps, scales, curves"},"interpolate-hcl":{group:"Ramps, scales, curves"},"interpolate-lab":{group:"Ramps, scales, curves"},ln2:{group:"Math"},pi:{group:"Math"},e:{group:"Math"},typeof:{group:"Types"},string:{group:"Types"},number:{group:"Types"},boolean:{group:"Types"},object:{group:"Types"},collator:{group:"Types"},
format:{group:"Types"},image:{group:"Types"},"number-format":{group:"Types"},"to-string":{group:"Types"},"to-number":{group:"Types"},"to-boolean":{group:"Types"},"to-rgba":{group:"Color"},"to-color":{group:"Types"},rgb:{group:"Color"},rgba:{group:"Color"},get:{group:"Lookup"},has:{group:"Lookup"},length:{group:"Lookup"},properties:{group:"Feature data"},"feature-state":{group:"Feature data"},"geometry-type":{group:"Feature data"},id:{group:"Feature data"},zoom:{group:"Zoom"},"heatmap-density":{group:"Heatmap"},
"line-progress":{group:"Feature data"},accumulated:{group:"Feature data"},"+":{group:"Math"},"*":{group:"Math"},"-":{group:"Math"},"/":{group:"Math"},"%":{group:"Math"},"^":{group:"Math"},sqrt:{group:"Math"},log10:{group:"Math"},ln:{group:"Math"},log2:{group:"Math"},sin:{group:"Math"},cos:{group:"Math"},tan:{group:"Math"},asin:{group:"Math"},acos:{group:"Math"},atan:{group:"Math"},min:{group:"Math"},max:{group:"Math"},round:{group:"Math"},abs:{group:"Math"},ceil:{group:"Math"},floor:{group:"Math"},
distance:{group:"Math"},"\x3d\x3d":{group:"Decision"},"!\x3d":{group:"Decision"},"\x3e":{group:"Decision"},"\x3c":{group:"Decision"},"\x3e\x3d":{group:"Decision"},"\x3c\x3d":{group:"Decision"},all:{group:"Decision"},any:{group:"Decision"},"!":{group:"Decision"},within:{group:"Decision"},"is-supported-script":{group:"String"},upcase:{group:"String"},downcase:{group:"String"},concat:{group:"String"},"resolved-locale":{group:"String"}}},light:{anchor:{type:"enum",default:"viewport",values:{map:{},viewport:{}},
"property-type":"data-constant",transition:!1,expression:{interpolated:!1,parameters:["zoom"]}},position:{type:"array",default:[1.15,210,30],length:3,value:"number","property-type":"data-constant",transition:!0,expression:{interpolated:!0,parameters:["zoom"]}},color:{type:"color","property-type":"data-constant",default:"#ffffff",expression:{interpolated:!0,parameters:["zoom"]},transition:!0},intensity:{type:"number","property-type":"data-constant",default:.5,minimum:0,maximum:1,expression:{interpolated:!0,
parameters:["zoom"]},transition:!0}},paint:"paint_fill paint_line paint_circle paint_heatmap paint_fill-extrusion paint_symbol paint_raster paint_hillshade paint_background".split(" "),paint_fill:{"fill-antialias":{type:"boolean",default:!0,expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"fill-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},
"fill-color":{type:"color",default:"#000000",transition:!0,requires:[{"!":"fill-pattern"}],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-outline-color":{type:"color",transition:!0,requires:[{"!":"fill-pattern"},{"fill-antialias":!0}],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",
expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"fill-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["fill-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"fill-pattern":{type:"resolvedImage",transition:!0,expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"cross-faded-data-driven"}},"paint_fill-extrusion":{"fill-extrusion-opacity":{type:"number",default:1,minimum:0,
maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"fill-extrusion-color":{type:"color",default:"#000000",transition:!0,requires:[{"!":"fill-extrusion-pattern"}],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-extrusion-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},
"fill-extrusion-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["fill-extrusion-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"fill-extrusion-pattern":{type:"resolvedImage",transition:!0,expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"cross-faded-data-driven"},"fill-extrusion-height":{type:"number",default:0,minimum:0,units:"meters",transition:!0,expression:{interpolated:!0,parameters:["zoom",
"feature","feature-state"]},"property-type":"data-driven"},"fill-extrusion-base":{type:"number",default:0,minimum:0,units:"meters",transition:!0,requires:["fill-extrusion-height"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-extrusion-vertical-gradient":{type:"boolean",default:!0,transition:!1,expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"}},paint_line:{"line-opacity":{type:"number",default:1,minimum:0,
maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-color":{type:"color",default:"#000000",transition:!0,requires:[{"!":"line-pattern"}],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},
"line-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["line-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"line-width":{type:"number",default:1,minimum:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-gap-width":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature",
"feature-state"]},"property-type":"data-driven"},"line-offset":{type:"number",default:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-blur":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-dasharray":{type:"array",value:"number",minimum:0,transition:!0,units:"line widths",requires:[{"!":"line-pattern"}],
expression:{interpolated:!1,parameters:["zoom"]},"property-type":"cross-faded"},"line-pattern":{type:"resolvedImage",transition:!0,expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"cross-faded-data-driven"},"line-gradient":{type:"color",transition:!1,requires:[{"!":"line-dasharray"},{"!":"line-pattern"},{source:"geojson",has:{lineMetrics:!0}}],expression:{interpolated:!0,parameters:["line-progress"]},"property-type":"color-ramp"}},paint_circle:{"circle-radius":{type:"number",
default:5,minimum:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-color":{type:"color",default:"#000000",transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-blur":{type:"number",default:0,transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-opacity":{type:"number",
default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"circle-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["circle-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},
"circle-pitch-scale":{type:"enum",values:{map:{},viewport:{}},default:"map",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"circle-pitch-alignment":{type:"enum",values:{map:{},viewport:{}},default:"viewport",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"circle-stroke-width":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},
"circle-stroke-color":{type:"color",default:"#000000",transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-stroke-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"}},paint_heatmap:{"heatmap-radius":{type:"number",default:30,minimum:1,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom",
"feature","feature-state"]},"property-type":"data-driven"},"heatmap-weight":{type:"number",default:1,minimum:0,transition:!1,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"heatmap-intensity":{type:"number",default:1,minimum:0,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"heatmap-color":{type:"color",default:["interpolate",["linear"],["heatmap-density"],0,"rgba(0, 0, 255, 0)",.1,"royalblue",
.3,"cyan",.5,"lime",.7,"yellow",1,"red"],transition:!1,expression:{interpolated:!0,parameters:["heatmap-density"]},"property-type":"color-ramp"},"heatmap-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"}},paint_symbol:{"icon-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},
"icon-color":{type:"color",default:"#000000",transition:!0,requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-halo-color":{type:"color",default:"rgba(0, 0, 0, 0)",transition:!0,requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-halo-width":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",requires:["icon-image"],expression:{interpolated:!0,
parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-halo-blur":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"icon-translate-anchor":{type:"enum",
values:{map:{},viewport:{}},default:"map",requires:["icon-image","icon-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-color":{type:"color",default:"#000000",transition:!0,overridable:!0,requires:["text-field"],expression:{interpolated:!0,parameters:["zoom",
"feature","feature-state"]},"property-type":"data-driven"},"text-halo-color":{type:"color",default:"rgba(0, 0, 0, 0)",transition:!0,requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-halo-width":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-halo-blur":{type:"number",
default:0,minimum:0,transition:!0,units:"pixels",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"text-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["text-field","text-translate"],
expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"}},paint_raster:{"raster-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-hue-rotate":{type:"number",default:0,period:360,transition:!0,units:"degrees",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-brightness-min":{type:"number",default:0,minimum:0,maximum:1,transition:!0,
expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-brightness-max":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-saturation":{type:"number",default:0,minimum:-1,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-contrast":{type:"number",default:0,minimum:-1,maximum:1,transition:!0,expression:{interpolated:!0,
parameters:["zoom"]},"property-type":"data-constant"},"raster-resampling":{type:"enum",values:{linear:{},nearest:{}},default:"linear",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"raster-fade-duration":{type:"number",default:300,minimum:0,transition:!1,units:"milliseconds",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"}},paint_hillshade:{"hillshade-illumination-direction":{type:"number",default:335,minimum:0,maximum:359,transition:!1,
expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-illumination-anchor":{type:"enum",values:{map:{},viewport:{}},default:"viewport",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-exaggeration":{type:"number",default:.5,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-shadow-color":{type:"color",default:"#000000",transition:!0,expression:{interpolated:!0,
parameters:["zoom"]},"property-type":"data-constant"},"hillshade-highlight-color":{type:"color",default:"#FFFFFF",transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-accent-color":{type:"color",default:"#000000",transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"}},paint_background:{"background-color":{type:"color",default:"#000000",transition:!0,requires:[{"!":"background-pattern"}],expression:{interpolated:!0,
parameters:["zoom"]},"property-type":"data-constant"},"background-pattern":{type:"resolvedImage",transition:!0,expression:{interpolated:!1,parameters:["zoom"]},"property-type":"cross-faded"},"background-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"}},transition:{duration:{type:"number",default:300,minimum:0,units:"milliseconds"},delay:{type:"number",default:0,minimum:0,units:"milliseconds"}},"property-type":{"data-driven":{type:"property-type"},
"cross-faded":{type:"property-type"},"cross-faded-data-driven":{type:"property-type"},"color-ramp":{type:"property-type"},"data-constant":{type:"property-type"},constant:{type:"property-type"}},promoteId:{"*":{type:"string"}}},dc=function(c,x,F,V){this.message=(c?c+": ":"")+F;V&&(this.identifier=V);null!=x&&x.__line__&&(this.line=x.__line__)},Dc=function(c){function x(F,V){c.call(this,V);this.message=V;this.key=F}return c&&(x.__proto__=c),(x.prototype=Object.create(c&&c.prototype)).constructor=x,
x}(Error),Uc=function(c,x){void 0===x&&(x=[]);this.parent=c;this.bindings={};for(c=0;c<x.length;c+=1){var F=x[c];this.bindings[F[0]]=F[1]}};Uc.prototype.concat=function(c){return new Uc(this,c)};Uc.prototype.get=function(c){if(this.bindings[c])return this.bindings[c];if(this.parent)return this.parent.get(c);throw Error(c+" not found in scope.");};Uc.prototype.has=function(c){return!!this.bindings[c]||!!this.parent&&this.parent.has(c)};var jd={kind:"null"},Ic={kind:"number"},ld={kind:"string"},id=
{kind:"boolean"},yd={kind:"color"},zd={kind:"object"},ud={kind:"value"},ie={kind:"collator"},ge={kind:"formatted"},Ee={kind:"resolvedImage"},Ge=[jd,Ic,ld,id,yd,ge,zd,ia(ud),Ee],Be=h(function(c,x){function F(Ha){return 0>(Ha=Math.round(Ha))?0:255<Ha?255:Ha}function V(Ha){return F("%"===Ha[Ha.length-1]?parseFloat(Ha)/100*255:parseInt(Ha))}function fa(Ha){return 0>(Pa="%"===Ha[Ha.length-1]?parseFloat(Ha)/100:parseFloat(Ha))?0:1<Pa?1:Pa;var Pa}function ra(Ha,Pa,Ya){return 0>Ya?Ya+=1:1<Ya&&--Ya,1>6*Ya?
Ha+(Pa-Ha)*Ya*6:1>2*Ya?Pa:2>3*Ya?Ha+(Pa-Ha)*(2/3-Ya)*6:Ha}var ya={transparent:[0,0,0,0],aliceblue:[240,248,255,1],antiquewhite:[250,235,215,1],aqua:[0,255,255,1],aquamarine:[127,255,212,1],azure:[240,255,255,1],beige:[245,245,220,1],bisque:[255,228,196,1],black:[0,0,0,1],blanchedalmond:[255,235,205,1],blue:[0,0,255,1],blueviolet:[138,43,226,1],brown:[165,42,42,1],burlywood:[222,184,135,1],cadetblue:[95,158,160,1],chartreuse:[127,255,0,1],chocolate:[210,105,30,1],coral:[255,127,80,1],cornflowerblue:[100,
149,237,1],cornsilk:[255,248,220,1],crimson:[220,20,60,1],cyan:[0,255,255,1],darkblue:[0,0,139,1],darkcyan:[0,139,139,1],darkgoldenrod:[184,134,11,1],darkgray:[169,169,169,1],darkgreen:[0,100,0,1],darkgrey:[169,169,169,1],darkkhaki:[189,183,107,1],darkmagenta:[139,0,139,1],darkolivegreen:[85,107,47,1],darkorange:[255,140,0,1],darkorchid:[153,50,204,1],darkred:[139,0,0,1],darksalmon:[233,150,122,1],darkseagreen:[143,188,143,1],darkslateblue:[72,61,139,1],darkslategray:[47,79,79,1],darkslategrey:[47,
79,79,1],darkturquoise:[0,206,209,1],darkviolet:[148,0,211,1],deeppink:[255,20,147,1],deepskyblue:[0,191,255,1],dimgray:[105,105,105,1],dimgrey:[105,105,105,1],dodgerblue:[30,144,255,1],firebrick:[178,34,34,1],floralwhite:[255,250,240,1],forestgreen:[34,139,34,1],fuchsia:[255,0,255,1],gainsboro:[220,220,220,1],ghostwhite:[248,248,255,1],gold:[255,215,0,1],goldenrod:[218,165,32,1],gray:[128,128,128,1],green:[0,128,0,1],greenyellow:[173,255,47,1],grey:[128,128,128,1],honeydew:[240,255,240,1],hotpink:[255,
105,180,1],indianred:[205,92,92,1],indigo:[75,0,130,1],ivory:[255,255,240,1],khaki:[240,230,140,1],lavender:[230,230,250,1],lavenderblush:[255,240,245,1],lawngreen:[124,252,0,1],lemonchiffon:[255,250,205,1],lightblue:[173,216,230,1],lightcoral:[240,128,128,1],lightcyan:[224,255,255,1],lightgoldenrodyellow:[250,250,210,1],lightgray:[211,211,211,1],lightgreen:[144,238,144,1],lightgrey:[211,211,211,1],lightpink:[255,182,193,1],lightsalmon:[255,160,122,1],lightseagreen:[32,178,170,1],lightskyblue:[135,
206,250,1],lightslategray:[119,136,153,1],lightslategrey:[119,136,153,1],lightsteelblue:[176,196,222,1],lightyellow:[255,255,224,1],lime:[0,255,0,1],limegreen:[50,205,50,1],linen:[250,240,230,1],magenta:[255,0,255,1],maroon:[128,0,0,1],mediumaquamarine:[102,205,170,1],mediumblue:[0,0,205,1],mediumorchid:[186,85,211,1],mediumpurple:[147,112,219,1],mediumseagreen:[60,179,113,1],mediumslateblue:[123,104,238,1],mediumspringgreen:[0,250,154,1],mediumturquoise:[72,209,204,1],mediumvioletred:[199,21,133,
1],midnightblue:[25,25,112,1],mintcream:[245,255,250,1],mistyrose:[255,228,225,1],moccasin:[255,228,181,1],navajowhite:[255,222,173,1],navy:[0,0,128,1],oldlace:[253,245,230,1],olive:[128,128,0,1],olivedrab:[107,142,35,1],orange:[255,165,0,1],orangered:[255,69,0,1],orchid:[218,112,214,1],palegoldenrod:[238,232,170,1],palegreen:[152,251,152,1],paleturquoise:[175,238,238,1],palevioletred:[219,112,147,1],papayawhip:[255,239,213,1],peachpuff:[255,218,185,1],peru:[205,133,63,1],pink:[255,192,203,1],plum:[221,
160,221,1],powderblue:[176,224,230,1],purple:[128,0,128,1],rebeccapurple:[102,51,153,1],red:[255,0,0,1],rosybrown:[188,143,143,1],royalblue:[65,105,225,1],saddlebrown:[139,69,19,1],salmon:[250,128,114,1],sandybrown:[244,164,96,1],seagreen:[46,139,87,1],seashell:[255,245,238,1],sienna:[160,82,45,1],silver:[192,192,192,1],skyblue:[135,206,235,1],slateblue:[106,90,205,1],slategray:[112,128,144,1],slategrey:[112,128,144,1],snow:[255,250,250,1],springgreen:[0,255,127,1],steelblue:[70,130,180,1],tan:[210,
180,140,1],teal:[0,128,128,1],thistle:[216,191,216,1],tomato:[255,99,71,1],turquoise:[64,224,208,1],violet:[238,130,238,1],wheat:[245,222,179,1],white:[255,255,255,1],whitesmoke:[245,245,245,1],yellow:[255,255,0,1],yellowgreen:[154,205,50,1]};try{x.parseCSSColor=function(Ha){var Pa;Ha=Ha.replace(/ /g,"").toLowerCase();if(Ha in ya)return ya[Ha].slice();if("#"===Ha[0])return 4===Ha.length?0<=(Pa=parseInt(Ha.substr(1),16))&&4095>=Pa?[(3840&Pa)>>4|(3840&Pa)>>8,240&Pa|(240&Pa)>>4,15&Pa|(15&Pa)<<4,1]:null:
7===Ha.length&&0<=(Pa=parseInt(Ha.substr(1),16))&&16777215>=Pa?[(16711680&Pa)>>16,(65280&Pa)>>8,255&Pa,1]:null;var Ya=Ha.indexOf("("),hb=Ha.indexOf(")");if(-1!==Ya&&hb+1===Ha.length)switch(Pa=Ha.substr(0,Ya),Ya=Ha.substr(Ya+1,hb-(Ya+1)).split(","),Ha=1,Pa){case "rgba":if(4!==Ya.length)break;Ha=fa(Ya.pop());case "rgb":return 3!==Ya.length?null:[V(Ya[0]),V(Ya[1]),V(Ya[2]),Ha];case "hsla":if(4!==Ya.length)break;Ha=fa(Ya.pop());case "hsl":if(3===Ya.length)return Pa=(parseFloat(Ya[0])%360+360)%360/360,
hb=fa(Ya[1]),Ya=fa(Ya[2]),hb=.5>=Ya?Ya*(hb+1):Ya+hb-Ya*hb,Ya=2*Ya-hb,[F(255*ra(Ya,hb,Pa+1/3)),F(255*ra(Ya,hb,Pa)),F(255*ra(Ya,hb,Pa-1/3)),Ha]}return null}}catch(Ha){}}).parseCSSColor,Qd=function(c,x,F,V){void 0===V&&(V=1);this.r=c;this.g=x;this.b=F;this.a=V};Qd.parse=function(c){if(c){if(c instanceof Qd)return c;if("string"==typeof c&&(c=Be(c)))return new Qd(c[0]/255*c[3],c[1]/255*c[3],c[2]/255*c[3],c[3])}};Qd.prototype.toString=function(){var c=this.toArray();return"rgba("+Math.round(c[0])+","+Math.round(c[1])+
","+Math.round(c[2])+","+c[3]+")"};Qd.prototype.toArray=function(){var c=this.a;return 0===c?[0,0,0,0]:[255*this.r/c,255*this.g/c,255*this.b/c,c]};Qd.black=new Qd(0,0,0,1);Qd.white=new Qd(1,1,1,1);Qd.transparent=new Qd(0,0,0,0);Qd.red=new Qd(1,0,0,1);var qe=function(c,x,F){this.sensitivity=c?x?"variant":"case":x?"accent":"base";this.locale=F;this.collator=new Intl.Collator(this.locale?this.locale:[],{sensitivity:this.sensitivity,usage:"search"})};qe.prototype.compare=function(c,x){return this.collator.compare(c,
x)};qe.prototype.resolvedLocale=function(){return(new Intl.Collator(this.locale?this.locale:[])).resolvedOptions().locale};var Ne=function(c,x,F,V,fa){this.text=c;this.image=x;this.scale=F;this.fontStack=V;this.textColor=fa},ze=function(c){this.sections=c};ze.fromString=function(c){return new ze([new Ne(c,null,null,null,null)])};ze.prototype.isEmpty=function(){return 0===this.sections.length||!this.sections.some(function(c){return 0!==c.text.length||c.image&&0!==c.image.name.length})};ze.factory=
function(c){return c instanceof ze?c:ze.fromString(c)};ze.prototype.toString=function(){return 0===this.sections.length?"":this.sections.map(function(c){return c.text}).join("")};ze.prototype.serialize=function(){for(var c=["format"],x=0,F=this.sections;x<F.length;x+=1){var V=F[x];if(V.image)c.push(["image",V.image.name]);else{c.push(V.text);var fa={};V.fontStack&&(fa["text-font"]=["literal",V.fontStack.split(",")]);V.scale&&(fa["font-scale"]=V.scale);V.textColor&&(fa["text-color"]=["rgba"].concat(V.textColor.toArray()));
c.push(fa)}}return c};var Te=function(c){this.name=c.name;this.available=c.available};Te.prototype.toString=function(){return this.name};Te.fromString=function(c){return c?new Te({name:c,available:!1}):null};Te.prototype.serialize=function(){return["image",this.name]};var nf=function(c,x){this.type=c;this.value=x};nf.parse=function(c,x){if(2!==c.length)return x.error("'literal' expression requires exactly one argument, but found "+(c.length-1)+" instead.");if(!ma(c[1]))return x.error("invalid value");
c=c[1];var F=qa(c);x=x.expectedType;return"array"!==F.kind||0!==F.N||!x||"array"!==x.kind||"number"==typeof x.N&&0!==x.N||(F=x),new nf(F,c)};nf.prototype.evaluate=function(){return this.value};nf.prototype.eachChild=function(){};nf.prototype.outputDefined=function(){return!0};nf.prototype.serialize=function(){return"array"===this.type.kind||"object"===this.type.kind?["literal",this.value]:this.value instanceof Qd?["rgba"].concat(this.value.toArray()):this.value instanceof ze?this.value.serialize():
this.value};var rf=function(c){this.name="ExpressionEvaluationError";this.message=c};rf.prototype.toJSON=function(){return this.message};var Eg={string:ld,number:Ic,boolean:id,object:zd},df=function(c,x){this.type=c;this.args=x};df.parse=function(c,x){if(2>c.length)return x.error("Expected at least one argument.");var F=1,V=c[0];if("array"===V){if(2<c.length){V=c[1];if("string"!=typeof V||!(V in Eg)||"object"===V)return x.error('The item type argument of "array" must be one of string, number, boolean',
1);V=Eg[V];F++}else V=ud;if(3<c.length){if(null!==c[2]&&("number"!=typeof c[2]||0>c[2]||c[2]!==Math.floor(c[2])))return x.error('The length argument to "array" must be a positive integer literal',2);var fa=c[2];F++}fa=ia(V,fa)}else fa=Eg[V];for(V=[];F<c.length;F++){var ra=x.parse(c[F],F,ud);if(!ra)return null;V.push(ra)}return new df(fa,V)};df.prototype.evaluate=function(c){for(var x=0;x<this.args.length;x++){var F=this.args[x].evaluate(c);if(!la(this.type,qa(F)))return F;if(x===this.args.length-
1)throw new rf("Expected value to be of type "+ja(this.type)+", but found "+ja(qa(F))+" instead.");}return null};df.prototype.eachChild=function(c){this.args.forEach(c)};df.prototype.outputDefined=function(){return this.args.every(function(c){return c.outputDefined()})};df.prototype.serialize=function(){var c=this.type,x=[c.kind];if("array"===c.kind){var F=c.itemType;if("string"===F.kind||"number"===F.kind||"boolean"===F.kind)x.push(F.kind),c=c.N,("number"==typeof c||1<this.args.length)&&x.push(c)}return x.concat(this.args.map(function(V){return V.serialize()}))};
var Rf=function(c){this.type=ge;this.sections=c};Rf.parse=function(c,x){if(2>c.length)return x.error("Expected at least one argument.");var F=c[1];if(!Array.isArray(F)&&"object"==typeof F)return x.error("First argument must be an image or text section.");F=[];for(var V=!1,fa=1;fa<=c.length-1;++fa){var ra=c[fa];if(V&&"object"==typeof ra&&!Array.isArray(ra)){V=!1;var ya=null;if(ra["font-scale"]&&!(ya=x.parse(ra["font-scale"],1,Ic)))return null;var Ha=null;if(ra["text-font"]&&!(Ha=x.parse(ra["text-font"],
1,ia(ld))))return null;var Pa=null;if(ra["text-color"]&&!(Pa=x.parse(ra["text-color"],1,yd)))return null;ra=F[F.length-1];ra.scale=ya;ra.font=Ha;ra.textColor=Pa}else{ya=x.parse(c[fa],1,ud);if(!ya)return null;V=ya.type.kind;if("string"!==V&&"value"!==V&&"null"!==V&&"resolvedImage"!==V)return x.error("Formatted text type must be 'string', 'value', 'image' or 'null'.");V=!0;F.push({content:ya,scale:null,font:null,textColor:null})}}return new Rf(F)};Rf.prototype.evaluate=function(c){return new ze(this.sections.map(function(x){var F=
x.content.evaluate(c);return qa(F)===Ee?new Ne("",F,null,null,null):new Ne(pa(F),null,x.scale?x.scale.evaluate(c):null,x.font?x.font.evaluate(c).join(","):null,x.textColor?x.textColor.evaluate(c):null)}))};Rf.prototype.eachChild=function(c){for(var x=0,F=this.sections;x<F.length;x+=1){var V=F[x];c(V.content);V.scale&&c(V.scale);V.font&&c(V.font);V.textColor&&c(V.textColor)}};Rf.prototype.outputDefined=function(){return!1};Rf.prototype.serialize=function(){for(var c=["format"],x=0,F=this.sections;x<
F.length;x+=1){var V=F[x];c.push(V.content.serialize());var fa={};V.scale&&(fa["font-scale"]=V.scale.serialize());V.font&&(fa["text-font"]=V.font.serialize());V.textColor&&(fa["text-color"]=V.textColor.serialize());c.push(fa)}return c};var Pg=function(c){this.type=Ee;this.input=c};Pg.parse=function(c,x){return 2!==c.length?x.error("Expected two arguments."):(c=x.parse(c[1],1,ld))?new Pg(c):x.error("No image name provided.")};Pg.prototype.evaluate=function(c){var x=this.input.evaluate(c),F=Te.fromString(x);
return F&&c.availableImages&&(F.available=-1<c.availableImages.indexOf(x)),F};Pg.prototype.eachChild=function(c){c(this.input)};Pg.prototype.outputDefined=function(){return!1};Pg.prototype.serialize=function(){return["image",this.input.serialize()]};var Ei={"to-boolean":id,"to-color":yd,"to-number":Ic,"to-string":ld},Vf=function(c,x){this.type=c;this.args=x};Vf.parse=function(c,x){if(2>c.length)return x.error("Expected at least one argument.");var F=c[0];if(("to-boolean"===F||"to-string"===F)&&2!==
c.length)return x.error("Expected one argument.");F=Ei[F];for(var V=[],fa=1;fa<c.length;fa++){var ra=x.parse(c[fa],fa,ud);if(!ra)return null;V.push(ra)}return new Vf(F,V)};Vf.prototype.evaluate=function(c){if("boolean"===this.type.kind)return!!this.args[0].evaluate(c);if("color"===this.type.kind){for(var x,F,V=0,fa=this.args;V<fa.length;V+=1){if(F=null,(x=fa[V].evaluate(c))instanceof Qd)return x;if("string"==typeof x){var ra=c.parseColor(x);if(ra)return ra}else if(Array.isArray(x)&&!(F=3>x.length||
4<x.length?"Invalid rbga value "+JSON.stringify(x)+": expected an array containing either three or four numeric values.":sa(x[0],x[1],x[2],x[3])))return new Qd(x[0]/255,x[1]/255,x[2]/255,x[3])}throw new rf(F||"Could not parse color from value '"+("string"==typeof x?x:String(JSON.stringify(x)))+"'");}if("number"===this.type.kind){x=null;F=0;for(V=this.args;F<V.length;F+=1){if(null===(x=V[F].evaluate(c)))return 0;fa=Number(x);if(!isNaN(fa))return fa}throw new rf("Could not convert "+JSON.stringify(x)+
" to number.");}return"formatted"===this.type.kind?ze.fromString(pa(this.args[0].evaluate(c))):"resolvedImage"===this.type.kind?Te.fromString(pa(this.args[0].evaluate(c))):pa(this.args[0].evaluate(c))};Vf.prototype.eachChild=function(c){this.args.forEach(c)};Vf.prototype.outputDefined=function(){return this.args.every(function(c){return c.outputDefined()})};Vf.prototype.serialize=function(){if("formatted"===this.type.kind)return(new Rf([{content:this.args[0],scale:null,font:null,textColor:null}])).serialize();
if("resolvedImage"===this.type.kind)return(new Pg(this.args[0])).serialize();var c=["to-"+this.type.kind];return this.eachChild(function(x){c.push(x.serialize())}),c};var Af=["Unknown","Point","LineString","Polygon"],Ce=function(){this.formattedSection=this.featureState=this.feature=this.globals=null;this._parseColorCache={};this.canonical=this.availableImages=null};Ce.prototype.id=function(){return this.feature&&"id"in this.feature?this.feature.id:null};Ce.prototype.geometryType=function(){return this.feature?
"number"==typeof this.feature.type?Af[this.feature.type]:this.feature.type:null};Ce.prototype.geometry=function(){return this.feature&&"geometry"in this.feature?this.feature.geometry:null};Ce.prototype.canonicalID=function(){return this.canonical};Ce.prototype.properties=function(){return this.feature&&this.feature.properties||{}};Ce.prototype.parseColor=function(c){var x=this._parseColorCache[c];return x||(x=this._parseColorCache[c]=Qd.parse(c)),x};var Ie=function(c,x,F,V){this.name=c;this.type=
x;this._evaluate=F;this.args=V};Ie.prototype.evaluate=function(c){return this._evaluate(c,this.args)};Ie.prototype.eachChild=function(c){this.args.forEach(c)};Ie.prototype.outputDefined=function(){return!1};Ie.prototype.serialize=function(){return[this.name].concat(this.args.map(function(c){return c.serialize()}))};Ie.parse=function(c,x){var F,V=c[0],fa=Ie.definitions[V];if(!fa)return x.error('Unknown expression "'+V+'". If you wanted a literal array, use ["literal", [...]].',0);var ra=Array.isArray(fa)?
fa[0]:fa.type;fa=Array.isArray(fa)?[[fa[1],fa[2]]]:fa.overloads;for(var ya=fa.filter(function(zb){zb=zb[0];return!Array.isArray(zb)||zb.length===c.length-1}),Ha=null,Pa=0;Pa<ya.length;Pa+=1){Ha=ya[Pa];var Ya=Ha[0],hb=Ha[1];Ha=new jg(x.registry,x.path,null,x.scope);for(var Ab=[],Fb=!1,Jb=1;Jb<c.length;Jb++){var Rb=c[Jb],rb=Array.isArray(Ya)?Ya[Jb-1]:Ya.type;Rb=Ha.parse(Rb,1+Ab.length,rb);if(!Rb){Fb=!0;break}Ab.push(Rb)}if(!Fb)if(Array.isArray(Ya)&&Ya.length!==Ab.length)Ha.error("Expected "+Ya.length+
" arguments, but found "+Ab.length+" instead.");else{for(Fb=0;Fb<Ab.length;Fb++)Jb=Array.isArray(Ya)?Ya[Fb]:Ya.type,Rb=Ab[Fb],Ha.concat(Fb+1).checkSubtype(Jb,Rb.type);if(0===Ha.errors.length)return new Ie(V,ra,hb,Ab)}}if(1===ya.length)(F=x.errors).push.apply(F,Ha.errors);else{F=(ya.length?ya:fa).map(function(zb){var hc;return hc=zb[0],Array.isArray(hc)?"("+hc.map(ja).join(", ")+")":"("+ja(hc.type)+"...)"}).join(" | ");V=[];for(ra=1;ra<c.length;ra++){fa=x.parse(c[ra],1+V.length);if(!fa)return null;
V.push(ja(fa.type))}x.error("Expected arguments of type "+F+", but found ("+V.join(", ")+") instead.")}return null};Ie.register=function(c,x){for(var F in Ie.definitions=x,x)c[F]=Ie};var Qg=function(c,x,F){this.type=ie;this.locale=F;this.caseSensitive=c;this.diacriticSensitive=x};Qg.parse=function(c,x){if(2!==c.length)return x.error("Expected one argument.");c=c[1];if("object"!=typeof c||Array.isArray(c))return x.error("Collator options argument must be an object.");var F=x.parse(void 0!==c["case-sensitive"]&&
c["case-sensitive"],1,id);if(!F)return null;var V=x.parse(void 0!==c["diacritic-sensitive"]&&c["diacritic-sensitive"],1,id);if(!V)return null;var fa=null;return c.locale&&!(fa=x.parse(c.locale,1,ld))?null:new Qg(F,V,fa)};Qg.prototype.evaluate=function(c){return new qe(this.caseSensitive.evaluate(c),this.diacriticSensitive.evaluate(c),this.locale?this.locale.evaluate(c):null)};Qg.prototype.eachChild=function(c){c(this.caseSensitive);c(this.diacriticSensitive);this.locale&&c(this.locale)};Qg.prototype.outputDefined=
function(){return!1};Qg.prototype.serialize=function(){var c={};return c["case-sensitive"]=this.caseSensitive.serialize(),c["diacritic-sensitive"]=this.diacriticSensitive.serialize(),this.locale&&(c.locale=this.locale.serialize()),["collator",c]};var bf=function(c,x){this.type=id;this.geojson=c;this.geometries=x};bf.parse=function(c,x){if(2!==c.length)return x.error("'within' expression requires exactly one argument, but found "+(c.length-1)+" instead.");if(ma(c[1]))if(c=c[1],"FeatureCollection"===
c.type)for(var F=0;F<c.features.length;++F){var V=c.features[F].geometry.type;if("Polygon"===V||"MultiPolygon"===V)return new bf(c,c.features[F].geometry)}else if("Feature"===c.type){if(F=c.geometry.type,"Polygon"===F||"MultiPolygon"===F)return new bf(c,c.geometry)}else if("Polygon"===c.type||"MultiPolygon"===c.type)return new bf(c,c);return x.error("'within' expression requires valid geojson object that contains polygon geometry type.")};bf.prototype.evaluate=function(c){if(null!=c.geometry()&&null!=
c.canonicalID()){if("Point"===c.geometryType())return function(x,F){var V=[1/0,1/0,-1/0,-1/0],fa=[1/0,1/0,-1/0,-1/0],ra=x.canonicalID();if("Polygon"===F.type){var ya=Ma(F.coordinates,fa,ra),Ha=fb(x.geometry(),V,fa,ra);if(!ka(V,fa))return!1;for(var Pa=0;Pa<Ha.length;Pa+=1)if(!ua(Ha[Pa],ya))return!1}if("MultiPolygon"===F.type){F=Ua(F.coordinates,fa,ra);x=fb(x.geometry(),V,fa,ra);if(!ka(V,fa))return!1;for(V=0;V<x.length;V+=1){a:{fa=x[V];ra=F;for(ya=0;ya<ra.length;ya++)if(ua(fa,ra[ya])){fa=!0;break a}fa=
!1}if(!fa)return!1}}return!0}(c,this.geometries);if("LineString"===c.geometryType())return function(x,F){var V=[1/0,1/0,-1/0,-1/0],fa=[1/0,1/0,-1/0,-1/0],ra=x.canonicalID();if("Polygon"===F.type){var ya=Ma(F.coordinates,fa,ra),Ha=nb(x.geometry(),V,fa,ra);if(!ka(V,fa))return!1;for(var Pa=0;Pa<Ha.length;Pa+=1)if(!Ca(Ha[Pa],ya))return!1}if("MultiPolygon"===F.type){F=Ua(F.coordinates,fa,ra);x=nb(x.geometry(),V,fa,ra);if(!ka(V,fa))return!1;for(V=0;V<x.length;V+=1){a:{fa=x[V];ra=F;for(ya=0;ya<ra.length;ya++)if(Ca(fa,
ra[ya])){fa=!0;break a}fa=!1}if(!fa)return!1}}return!0}(c,this.geometries)}return!1};bf.prototype.eachChild=function(){};bf.prototype.outputDefined=function(){return!0};bf.prototype.serialize=function(){return["within",this.geojson]};var Fg=function(c,x){this.type=x.type;this.name=c;this.boundExpression=x};Fg.parse=function(c,x){if(2!==c.length||"string"!=typeof c[1])return x.error("'var' expression requires exactly one string literal argument.");c=c[1];return x.scope.has(c)?new Fg(c,x.scope.get(c)):
x.error('Unknown variable "'+c+'". Make sure "'+c+'" has been bound in an enclosing "let" expression before using it.',1)};Fg.prototype.evaluate=function(c){return this.boundExpression.evaluate(c)};Fg.prototype.eachChild=function(){};Fg.prototype.outputDefined=function(){return!1};Fg.prototype.serialize=function(){return["var",this.name]};var jg=function(c,x,F,V,fa){void 0===x&&(x=[]);void 0===V&&(V=new Uc);void 0===fa&&(fa=[]);this.registry=c;this.path=x;this.key=x.map(function(ra){return"["+ra+
"]"}).join("");this.scope=V;this.errors=fa;this.expectedType=F};jg.prototype.parse=function(c,x,F,V,fa){return void 0===fa&&(fa={}),x?this.concat(x,F,V)._parse(c,fa):this._parse(c,fa)};jg.prototype._parse=function(c,x){function F(ra,ya,Ha){return"assert"===Ha?new df(ya,[ra]):"coerce"===Ha?new Vf(ya,[ra]):ra}if(null!==c&&"string"!=typeof c&&"boolean"!=typeof c&&"number"!=typeof c||(c=["literal",c]),Array.isArray(c)){if(0===c.length)return this.error('Expected an array with at least one element. If you wanted a literal array, use ["literal", []].');
var V=c[0];if("string"!=typeof V)return this.error("Expression name must be a string, but found "+typeof V+' instead. If you wanted a literal array, use ["literal", [...]].',0),null;var fa=this.registry[V];if(fa){c=fa.parse(c,this);if(!c)return null;if(this.expectedType)if(V=this.expectedType,fa=c.type,"string"!==V.kind&&"number"!==V.kind&&"boolean"!==V.kind&&"object"!==V.kind&&"array"!==V.kind||"value"!==fa.kind)if("color"!==V.kind&&"formatted"!==V.kind&&"resolvedImage"!==V.kind||"value"!==fa.kind&&
"string"!==fa.kind){if(this.checkSubtype(V,fa))return null}else c=F(c,V,x.typeAnnotation||"coerce");else c=F(c,V,x.typeAnnotation||"assert");if(!(c instanceof nf)&&"resolvedImage"!==c.type.kind&&function Ha(ya){if(ya instanceof Fg)return Ha(ya.boundExpression);if(ya instanceof Ie&&"error"===ya.name||ya instanceof Qg||ya instanceof bf)return!1;var Pa=ya instanceof Vf||ya instanceof df,Ya=!0;return ya.eachChild(function(hb){Ya=Pa?Ya&&Ha(hb):Ya&&hb instanceof nf}),!!Ya&&cb(ya)&&jb(ya,["zoom","heatmap-density",
"line-progress","accumulated","is-supported-script"])}(c)){x=new Ce;try{c=new nf(c.type,c.evaluate(x))}catch(ya){return this.error(ya.message),null}}return c}return this.error('Unknown expression "'+V+'". If you wanted a literal array, use ["literal", [...]].',0)}return this.error(void 0===c?"'undefined' value invalid. Use null instead.":"object"==typeof c?'Bare objects invalid. Use ["literal", {...}] instead.':"Expected an array, but found "+typeof c+" instead.")};jg.prototype.concat=function(c,
x,F){c="number"==typeof c?this.path.concat(c):this.path;F=F?this.scope.concat(F):this.scope;return new jg(this.registry,c,x||null,F,this.errors)};jg.prototype.error=function(c){for(var x=[],F=arguments.length-1;0<F--;)x[F]=arguments[F+1];x=""+this.key+x.map(function(V){return"["+V+"]"}).join("");this.errors.push(new Dc(x,c))};jg.prototype.checkSubtype=function(c,x){c=la(c,x);return c&&this.error(c),c};var of=function(c,x,F){this.type=c;this.input=x;this.labels=[];this.outputs=[];for(c=0;c<F.length;c+=
1){x=F[c];var V=x[1];this.labels.push(x[0]);this.outputs.push(V)}};of.parse=function(c,x){if(4>c.length-1)return x.error("Expected at least 4 arguments, but found only "+(c.length-1)+".");if(0!=(c.length-1)%2)return x.error("Expected an even number of arguments.");var F=x.parse(c[1],1,Ic);if(!F)return null;var V=[],fa=null;x.expectedType&&"value"!==x.expectedType.kind&&(fa=x.expectedType);for(var ra=1;ra<c.length;ra+=2){var ya=1===ra?-1/0:c[ra],Ha=c[ra+1],Pa=ra,Ya=ra+1;if("number"!=typeof ya)return x.error('Input/output pairs for "step" expressions must be defined using literal numeric values (not computed expressions) for the input values.',
Pa);if(V.length&&V[V.length-1][0]>=ya)return x.error('Input/output pairs for "step" expressions must be arranged with input values in strictly ascending order.',Pa);Ha=x.parse(Ha,Ya,fa);if(!Ha)return null;fa=fa||Ha.type;V.push([ya,Ha])}return new of(fa,F,V)};of.prototype.evaluate=function(c){var x=this.labels,F=this.outputs;if(1===x.length)return F[0].evaluate(c);var V=this.input.evaluate(c);if(V<=x[0])return F[0].evaluate(c);var fa=x.length;return V>=x[fa-1]?F[fa-1].evaluate(c):F[pb(x,V)].evaluate(c)};
of.prototype.eachChild=function(c){c(this.input);for(var x=0,F=this.outputs;x<F.length;x+=1)c(F[x])};of.prototype.outputDefined=function(){return this.outputs.every(function(c){return c.outputDefined()})};of.prototype.serialize=function(){for(var c=["step",this.input.serialize()],x=0;x<this.labels.length;x++)0<x&&c.push(this.labels[x]),c.push(this.outputs[x].serialize());return c};var pj=Object.freeze({__proto__:null,number:xa,color:function(c,x,F){return new Qd(xa(c.r,x.r,F),xa(c.g,x.g,F),xa(c.b,
x.b,F),xa(c.a,x.a,F))},array:function(c,x,F){return c.map(function(V,fa){return xa(V,x[fa],F)})}}),Zh=6/29*3*(6/29),Db=Math.PI/180,Ok=180/Math.PI,Kg={forward:Xa,reverse:tb,interpolate:function(c,x,F){return{l:xa(c.l,x.l,F),a:xa(c.a,x.a,F),b:xa(c.b,x.b,F),alpha:xa(c.alpha,x.alpha,F)}}},Bf={forward:function(c){var x=Xa(c),F=x.a,V=x.b,fa=Math.atan2(V,F)*Ok;return{h:0>fa?fa+360:fa,c:Math.sqrt(F*F+V*V),l:x.l,alpha:c.a}},reverse:function(c){var x=c.h*Db,F=c.c;return tb({l:c.l,a:Math.cos(x)*F,b:Math.sin(x)*
F,alpha:c.alpha})},interpolate:function(c,x,F){var V=c.h,fa=x.h-V;return{h:V+F*(180<fa||-180>fa?fa-360*Math.round(fa/360):fa),c:xa(c.c,x.c,F),l:xa(c.l,x.l,F),alpha:xa(c.alpha,x.alpha,F)}}},Yi=Object.freeze({__proto__:null,lab:Kg,hcl:Bf}),Nf=function(c,x,F,V,fa){this.type=c;this.operator=x;this.interpolation=F;this.input=V;this.labels=[];this.outputs=[];for(c=0;c<fa.length;c+=1)x=fa[c],F=x[1],this.labels.push(x[0]),this.outputs.push(F)};Nf.interpolationFactor=function(c,x,F,V){var fa=0;"exponential"===
c.name?fa=Ka(x,c.base,F,V):"linear"===c.name?fa=Ka(x,1,F,V):"cubic-bezier"===c.name&&(c=c.controlPoints,fa=(new Pj(c[0],c[1],c[2],c[3])).solve(Ka(x,1,F,V)));return fa};Nf.parse=function(c,x){var F=c[0],V=c[1],fa=c[2],ra=c.slice(3);if(!Array.isArray(V)||0===V.length)return x.error("Expected an interpolation type expression.",1);if("linear"===V[0])V={name:"linear"};else if("exponential"===V[0]){V=V[1];if("number"!=typeof V)return x.error("Exponential interpolation requires a numeric base.",1,1);V={name:"exponential",
base:V}}else{if("cubic-bezier"!==V[0])return x.error("Unknown interpolation type "+String(V[0]),1,0);V=V.slice(1);if(4!==V.length||V.some(function(Fb){return"number"!=typeof Fb||0>Fb||1<Fb}))return x.error("Cubic bezier interpolation requires four numeric arguments with values between 0 and 1.",1);V={name:"cubic-bezier",controlPoints:V}}if(4>c.length-1)return x.error("Expected at least 4 arguments, but found only "+(c.length-1)+".");if(0!=(c.length-1)%2)return x.error("Expected an even number of arguments.");
if(!(fa=x.parse(fa,2,Ic)))return null;c=[];var ya=null;"interpolate-hcl"===F||"interpolate-lab"===F?ya=yd:x.expectedType&&"value"!==x.expectedType.kind&&(ya=x.expectedType);for(var Ha=0;Ha<ra.length;Ha+=2){var Pa=ra[Ha],Ya=ra[Ha+1],hb=Ha+3,Ab=Ha+4;if("number"!=typeof Pa)return x.error('Input/output pairs for "interpolate" expressions must be defined using literal numeric values (not computed expressions) for the input values.',hb);if(c.length&&c[c.length-1][0]>=Pa)return x.error('Input/output pairs for "interpolate" expressions must be arranged with input values in strictly ascending order.',
hb);Ya=x.parse(Ya,Ab,ya);if(!Ya)return null;ya=ya||Ya.type;c.push([Pa,Ya])}return"number"===ya.kind||"color"===ya.kind||"array"===ya.kind&&"number"===ya.itemType.kind&&"number"==typeof ya.N?new Nf(ya,F,V,fa,c):x.error("Type "+ja(ya)+" is not interpolatable.")};Nf.prototype.evaluate=function(c){var x=this.labels,F=this.outputs;if(1===x.length)return F[0].evaluate(c);var V=this.input.evaluate(c);if(V<=x[0])return F[0].evaluate(c);var fa=x.length;if(V>=x[fa-1])return F[fa-1].evaluate(c);fa=pb(x,V);x=
Nf.interpolationFactor(this.interpolation,V,x[fa],x[fa+1]);V=F[fa].evaluate(c);c=F[fa+1].evaluate(c);return"interpolate"===this.operator?pj[this.type.kind.toLowerCase()](V,c,x):"interpolate-hcl"===this.operator?Bf.reverse(Bf.interpolate(Bf.forward(V),Bf.forward(c),x)):Kg.reverse(Kg.interpolate(Kg.forward(V),Kg.forward(c),x))};Nf.prototype.eachChild=function(c){c(this.input);for(var x=0,F=this.outputs;x<F.length;x+=1)c(F[x])};Nf.prototype.outputDefined=function(){return this.outputs.every(function(c){return c.outputDefined()})};
Nf.prototype.serialize=function(){var c="linear"===this.interpolation.name?["linear"]:"exponential"===this.interpolation.name?1===this.interpolation.base?["linear"]:["exponential",this.interpolation.base]:["cubic-bezier"].concat(this.interpolation.controlPoints);c=[this.operator,c,this.input.serialize()];for(var x=0;x<this.labels.length;x++)c.push(this.labels[x],this.outputs[x].serialize());return c};var $h=function(c,x){this.type=c;this.args=x};$h.parse=function(c,x){if(2>c.length)return x.error("Expectected at least one argument.");
var F=null,V=x.expectedType;V&&"value"!==V.kind&&(F=V);var fa=[],ra=0;for(c=c.slice(1);ra<c.length;ra+=1){var ya=x.parse(c[ra],1+fa.length,F,void 0,{typeAnnotation:"omit"});if(!ya)return null;F=F||ya.type;fa.push(ya)}x=V&&fa.some(function(Ha){return la(V,Ha.type)});return new $h(x?ud:F,fa)};$h.prototype.evaluate=function(c){for(var x,F=null,V=0,fa=0,ra=this.args;fa<ra.length&&(V++,(F=ra[fa].evaluate(c))&&F instanceof Te&&!F.available&&(x||(x=F.name),F=null,V===this.args.length&&(F=x)),null===F);fa+=
1);return F};$h.prototype.eachChild=function(c){this.args.forEach(c)};$h.prototype.outputDefined=function(){return this.args.every(function(c){return c.outputDefined()})};$h.prototype.serialize=function(){var c=["coalesce"];return this.eachChild(function(x){c.push(x.serialize())}),c};var ai=function(c,x){this.type=x.type;this.bindings=[].concat(c);this.result=x};ai.prototype.evaluate=function(c){return this.result.evaluate(c)};ai.prototype.eachChild=function(c){for(var x=0,F=this.bindings;x<F.length;x+=
1)c(F[x][1]);c(this.result)};ai.parse=function(c,x){if(4>c.length)return x.error("Expected at least 3 arguments, but found "+(c.length-1)+" instead.");for(var F=[],V=1;V<c.length-1;V+=2){var fa=c[V];if("string"!=typeof fa)return x.error("Expected string, but found "+typeof fa+" instead.",V);if(/[^a-zA-Z0-9_]/.test(fa))return x.error("Variable names must contain only alphanumeric characters or '_'.",V);var ra=x.parse(c[V+1],V+1);if(!ra)return null;F.push([fa,ra])}return(c=x.parse(c[c.length-1],c.length-
1,x.expectedType,F))?new ai(F,c):null};ai.prototype.outputDefined=function(){return this.result.outputDefined()};ai.prototype.serialize=function(){for(var c=["let"],x=0,F=this.bindings;x<F.length;x+=1){var V=F[x];c.push(V[0],V[1].serialize())}return c.push(this.result.serialize()),c};var Zi=function(c,x,F){this.type=c;this.index=x;this.input=F};Zi.parse=function(c,x){if(3!==c.length)return x.error("Expected 2 arguments, but found "+(c.length-1)+" instead.");var F=x.parse(c[1],1,Ic);c=x.parse(c[2],
2,ia(x.expectedType||ud));return F&&c?new Zi(c.type.itemType,F,c):null};Zi.prototype.evaluate=function(c){var x=this.index.evaluate(c);c=this.input.evaluate(c);if(0>x)throw new rf("Array index out of bounds: "+x+" \x3c 0.");if(x>=c.length)throw new rf("Array index out of bounds: "+x+" \x3e "+(c.length-1)+".");if(x!==Math.floor(x))throw new rf("Array index must be an integer, but found "+x+" instead.");return c[x]};Zi.prototype.eachChild=function(c){c(this.index);c(this.input)};Zi.prototype.outputDefined=
function(){return!1};Zi.prototype.serialize=function(){return["at",this.index.serialize(),this.input.serialize()]};var Fi=function(c,x){this.type=id;this.needle=c;this.haystack=x};Fi.parse=function(c,x){if(3!==c.length)return x.error("Expected 2 arguments, but found "+(c.length-1)+" instead.");var F=x.parse(c[1],1,ud);c=x.parse(c[2],2,ud);return F&&c?da(F.type,[id,ld,Ic,jd,ud])?new Fi(F,c):x.error("Expected first argument to be of type boolean, string, number or null, but found "+ja(F.type)+" instead"):
null};Fi.prototype.evaluate=function(c){var x=this.needle.evaluate(c);c=this.haystack.evaluate(c);if(!c)return!1;if(!oa(x,["boolean","string","number","null"]))throw new rf("Expected first argument to be of type boolean, string, number or null, but found "+ja(qa(x))+" instead.");if(!oa(c,["string","array"]))throw new rf("Expected second argument to be of type array or string, but found "+ja(qa(c))+" instead.");return 0<=c.indexOf(x)};Fi.prototype.eachChild=function(c){c(this.needle);c(this.haystack)};
Fi.prototype.outputDefined=function(){return!0};Fi.prototype.serialize=function(){return["in",this.needle.serialize(),this.haystack.serialize()]};var de=function(c,x,F){this.type=Ic;this.needle=c;this.haystack=x;this.fromIndex=F};de.parse=function(c,x){if(2>=c.length||5<=c.length)return x.error("Expected 3 or 4 arguments, but found "+(c.length-1)+" instead.");var F=x.parse(c[1],1,ud),V=x.parse(c[2],2,ud);return F&&V?da(F.type,[id,ld,Ic,jd,ud])?4===c.length?(c=x.parse(c[3],3,Ic))?new de(F,V,c):null:
new de(F,V):x.error("Expected first argument to be of type boolean, string, number or null, but found "+ja(F.type)+" instead"):null};de.prototype.evaluate=function(c){var x=this.needle.evaluate(c),F=this.haystack.evaluate(c);if(!oa(x,["boolean","string","number","null"]))throw new rf("Expected first argument to be of type boolean, string, number or null, but found "+ja(qa(x))+" instead.");if(!oa(F,["string","array"]))throw new rf("Expected second argument to be of type array or string, but found "+
ja(qa(F))+" instead.");return this.fromIndex?(c=this.fromIndex.evaluate(c),F.indexOf(x,c)):F.indexOf(x)};de.prototype.eachChild=function(c){c(this.needle);c(this.haystack);this.fromIndex&&c(this.fromIndex)};de.prototype.outputDefined=function(){return!1};de.prototype.serialize=function(){if(null!=this.fromIndex&&void 0!==this.fromIndex){var c=this.fromIndex.serialize();return["index-of",this.needle.serialize(),this.haystack.serialize(),c]}return["index-of",this.needle.serialize(),this.haystack.serialize()]};
var ii=function(c,x,F,V,fa,ra){this.inputType=c;this.type=x;this.input=F;this.cases=V;this.outputs=fa;this.otherwise=ra};ii.parse=function(c,x){if(5>c.length)return x.error("Expected at least 4 arguments, but found only "+(c.length-1)+".");if(1!=c.length%2)return x.error("Expected an even number of arguments.");var F;x.expectedType&&"value"!==x.expectedType.kind&&(F=x.expectedType);for(var V={},fa=[],ra=2;ra<c.length-1;ra+=2){var ya=c[ra],Ha=c[ra+1];Array.isArray(ya)||(ya=[ya]);var Pa=x.concat(ra);
if(0===ya.length)return Pa.error("Expected at least one branch label.");for(var Ya=0;Ya<ya.length;Ya+=1){var hb=ya[Ya];if("number"!=typeof hb&&"string"!=typeof hb)return Pa.error("Branch labels must be numbers or strings.");if("number"==typeof hb&&Math.abs(hb)>Number.MAX_SAFE_INTEGER)return Pa.error("Branch labels must be integers no larger than "+Number.MAX_SAFE_INTEGER+".");if("number"==typeof hb&&Math.floor(hb)!==hb)return Pa.error("Numeric branch labels must be integer values.");if(Ab){if(Pa.checkSubtype(Ab,
qa(hb)))return null}else var Ab=qa(hb);if(void 0!==V[String(hb)])return Pa.error("Branch labels must be unique.");V[String(hb)]=fa.length}Ha=x.parse(Ha,ra,F);if(!Ha)return null;F=F||Ha.type;fa.push(Ha)}ra=x.parse(c[1],1,ud);return ra?(c=x.parse(c[c.length-1],c.length-1,F))?"value"!==ra.type.kind&&x.concat(1).checkSubtype(Ab,ra.type)?null:new ii(Ab,F,ra,V,fa,c):null:null};ii.prototype.evaluate=function(c){var x=this.input.evaluate(c);return(qa(x)===this.inputType&&this.outputs[this.cases[x]]||this.otherwise).evaluate(c)};
ii.prototype.eachChild=function(c){c(this.input);this.outputs.forEach(c);c(this.otherwise)};ii.prototype.outputDefined=function(){return this.outputs.every(function(c){return c.outputDefined()})&&this.otherwise.outputDefined()};ii.prototype.serialize=function(){for(var c=this,x=["match",this.input.serialize()],F=[],V={},fa=0,ra=Object.keys(this.cases).sort();fa<ra.length;fa+=1){var ya=ra[fa];void 0===(Ha=V[this.cases[ya]])?(V[this.cases[ya]]=F.length,F.push([this.cases[ya],[ya]])):F[Ha][1].push(ya)}V=
function(Pa){return"number"===c.inputType.kind?Number(Pa):Pa};for(fa=0;fa<F.length;fa+=1){ra=F[fa];var Ha=ra[0];Ha=ra[1];x.push(1===Ha.length?V(Ha[0]):Ha.map(V));x.push(this.outputs[outputIndex$1].serialize())}return x.push(this.otherwise.serialize()),x};var ph=function(c,x,F){this.type=c;this.branches=x;this.otherwise=F};ph.parse=function(c,x){if(4>c.length)return x.error("Expected at least 3 arguments, but found only "+(c.length-1)+".");if(0!=c.length%2)return x.error("Expected an odd number of arguments.");
var F;x.expectedType&&"value"!==x.expectedType.kind&&(F=x.expectedType);for(var V=[],fa=1;fa<c.length-1;fa+=2){var ra=x.parse(c[fa],fa,id);if(!ra)return null;var ya=x.parse(c[fa+1],fa+1,F);if(!ya)return null;V.push([ra,ya]);F=F||ya.type}return(c=x.parse(c[c.length-1],c.length-1,F))?new ph(F,V,c):null};ph.prototype.evaluate=function(c){for(var x=0,F=this.branches;x<F.length;x+=1){var V=F[x],fa=V[1];if(V[0].evaluate(c))return fa.evaluate(c)}return this.otherwise.evaluate(c)};ph.prototype.eachChild=
function(c){for(var x=0,F=this.branches;x<F.length;x+=1){var V=F[x],fa=V[1];c(V[0]);c(fa)}c(this.otherwise)};ph.prototype.outputDefined=function(){return this.branches.every(function(c){return c[1].outputDefined()})&&this.otherwise.outputDefined()};ph.prototype.serialize=function(){var c=["case"];return this.eachChild(function(x){c.push(x.serialize())}),c};var Wg=function(c,x,F,V){this.type=c;this.input=x;this.beginIndex=F;this.endIndex=V};Wg.parse=function(c,x){if(2>=c.length||5<=c.length)return x.error("Expected 3 or 4 arguments, but found "+
(c.length-1)+" instead.");var F=x.parse(c[1],1,ud),V=x.parse(c[2],2,Ic);return F&&V?da(F.type,[ia(ud),ld,ud])?4===c.length?(c=x.parse(c[3],3,Ic))?new Wg(F.type,F,V,c):null:new Wg(F.type,F,V):x.error("Expected first argument to be of type array or string, but found "+ja(F.type)+" instead"):null};Wg.prototype.evaluate=function(c){var x=this.input.evaluate(c),F=this.beginIndex.evaluate(c);if(!oa(x,["string","array"]))throw new rf("Expected first argument to be of type array or string, but found "+ja(qa(x))+
" instead.");return this.endIndex?(c=this.endIndex.evaluate(c),x.slice(F,c)):x.slice(F)};Wg.prototype.eachChild=function(c){c(this.input);c(this.beginIndex);this.endIndex&&c(this.endIndex)};Wg.prototype.outputDefined=function(){return!1};Wg.prototype.serialize=function(){if(null!=this.endIndex&&void 0!==this.endIndex){var c=this.endIndex.serialize();return["slice",this.input.serialize(),this.beginIndex.serialize(),c]}return["slice",this.input.serialize(),this.beginIndex.serialize()]};var pk=ib("\x3d\x3d",
function(c,x,F){return x===F},Na),qk=ib("!\x3d",function(c,x,F){return x!==F},function(c,x,F,V){return!Na(0,x,F,V)}),Yj=ib("\x3c",function(c,x,F){return x<F},function(c,x,F,V){return 0>V.compare(x,F)}),Pe=ib("\x3e",function(c,x,F){return x>F},function(c,x,F,V){return 0<V.compare(x,F)}),xk=ib("\x3c\x3d",function(c,x,F){return x<=F},function(c,x,F,V){return 0>=V.compare(x,F)}),Xg=ib("\x3e\x3d",function(c,x,F){return x>=F},function(c,x,F,V){return 0<=V.compare(x,F)}),Hh=function(c,x,F,V,fa){this.type=
ld;this.number=c;this.locale=x;this.currency=F;this.minFractionDigits=V;this.maxFractionDigits=fa};Hh.parse=function(c,x){if(3!==c.length)return x.error("Expected two arguments.");var F=x.parse(c[1],1,Ic);if(!F)return null;c=c[2];if("object"!=typeof c||Array.isArray(c))return x.error("NumberFormat options argument must be an object.");var V=null;if(c.locale&&!(V=x.parse(c.locale,1,ld)))return null;var fa=null;if(c.currency&&!(fa=x.parse(c.currency,1,ld)))return null;var ra=null;if(c["min-fraction-digits"]&&
!(ra=x.parse(c["min-fraction-digits"],1,Ic)))return null;var ya=null;return c["max-fraction-digits"]&&!(ya=x.parse(c["max-fraction-digits"],1,Ic))?null:new Hh(F,V,fa,ra,ya)};Hh.prototype.evaluate=function(c){return(new Intl.NumberFormat(this.locale?this.locale.evaluate(c):[],{style:this.currency?"currency":"decimal",currency:this.currency?this.currency.evaluate(c):void 0,minimumFractionDigits:this.minFractionDigits?this.minFractionDigits.evaluate(c):void 0,maximumFractionDigits:this.maxFractionDigits?
this.maxFractionDigits.evaluate(c):void 0})).format(this.number.evaluate(c))};Hh.prototype.eachChild=function(c){c(this.number);this.locale&&c(this.locale);this.currency&&c(this.currency);this.minFractionDigits&&c(this.minFractionDigits);this.maxFractionDigits&&c(this.maxFractionDigits)};Hh.prototype.outputDefined=function(){return!1};Hh.prototype.serialize=function(){var c={};return this.locale&&(c.locale=this.locale.serialize()),this.currency&&(c.currency=this.currency.serialize()),this.minFractionDigits&&
(c["min-fraction-digits"]=this.minFractionDigits.serialize()),this.maxFractionDigits&&(c["max-fraction-digits"]=this.maxFractionDigits.serialize()),["number-format",this.number.serialize(),c]};var $f=function(c){this.type=Ic;this.input=c};$f.parse=function(c,x){return 2!==c.length?x.error("Expected 1 argument, but found "+(c.length-1)+" instead."):(c=x.parse(c[1],1))?"array"!==c.type.kind&&"string"!==c.type.kind&&"value"!==c.type.kind?x.error("Expected argument of type string or array, but found "+
ja(c.type)+" instead."):new $f(c):null};$f.prototype.evaluate=function(c){c=this.input.evaluate(c);if("string"==typeof c||Array.isArray(c))return c.length;throw new rf("Expected value to be of type string or array, but found "+ja(qa(c))+" instead.");};$f.prototype.eachChild=function(c){c(this.input)};$f.prototype.outputDefined=function(){return!1};$f.prototype.serialize=function(){var c=["length"];return this.eachChild(function(x){c.push(x.serialize())}),c};var ji={"\x3d\x3d":pk,"!\x3d":qk,"\x3e":Pe,
"\x3c":Yj,"\x3e\x3d":Xg,"\x3c\x3d":xk,array:df,at:Zi,boolean:df,case:ph,coalesce:$h,collator:Qg,format:Rf,image:Pg,in:Fi,"index-of":de,interpolate:Nf,"interpolate-hcl":Nf,"interpolate-lab":Nf,length:$f,let:ai,literal:nf,match:ii,number:df,"number-format":Hh,object:df,slice:Wg,step:of,string:df,"to-boolean":Vf,"to-color":Vf,"to-number":Vf,"to-string":Vf,var:Fg,within:bf};Ie.register(ji,{error:[{kind:"error"},[ld],function(c,x){throw new rf(x[0].evaluate(c));}],typeof:[ld,[ud],function(c,x){return ja(qa(x[0].evaluate(c)))}],
"to-rgba":[ia(Ic,4),[yd],function(c,x){return x[0].evaluate(c).toArray()}],rgb:[yd,[Ic,Ic,Ic],qb],rgba:[yd,[Ic,Ic,Ic,Ic],qb],has:{type:id,overloads:[[[ld],function(c,x){x=x[0].evaluate(c);c=c.properties();return x in c}],[[ld,zd],function(c,x){var F=x[1];x=x[0].evaluate(c);c=F.evaluate(c);return x in c}]]},get:{type:ud,overloads:[[[ld],function(c,x){return sb(x[0].evaluate(c),c.properties())}],[[ld,zd],function(c,x){var F=x[1];return sb(x[0].evaluate(c),F.evaluate(c))}]]},"feature-state":[ud,[ld],
function(c,x){return sb(x[0].evaluate(c),c.featureState||{})}],properties:[zd,[],function(c){return c.properties()}],"geometry-type":[ld,[],function(c){return c.geometryType()}],id:[ud,[],function(c){return c.id()}],zoom:[Ic,[],function(c){return c.globals.zoom}],"heatmap-density":[Ic,[],function(c){return c.globals.heatmapDensity||0}],"line-progress":[Ic,[],function(c){return c.globals.lineProgress||0}],accumulated:[ud,[],function(c){return void 0===c.globals.accumulated?null:c.globals.accumulated}],
"+":[Ic,{type:Ic},function(c,x){for(var F=0,V=0;V<x.length;V+=1)F+=x[V].evaluate(c);return F}],"*":[Ic,{type:Ic},function(c,x){for(var F=1,V=0;V<x.length;V+=1)F*=x[V].evaluate(c);return F}],"-":{type:Ic,overloads:[[[Ic,Ic],function(c,x){var F=x[1];return x[0].evaluate(c)-F.evaluate(c)}],[[Ic],function(c,x){return-x[0].evaluate(c)}]]},"/":[Ic,[Ic,Ic],function(c,x){var F=x[1];return x[0].evaluate(c)/F.evaluate(c)}],"%":[Ic,[Ic,Ic],function(c,x){var F=x[1];return x[0].evaluate(c)%F.evaluate(c)}],ln2:[Ic,
[],function(){return Math.LN2}],pi:[Ic,[],function(){return Math.PI}],e:[Ic,[],function(){return Math.E}],"^":[Ic,[Ic,Ic],function(c,x){var F=x[1];return Math.pow(x[0].evaluate(c),F.evaluate(c))}],sqrt:[Ic,[Ic],function(c,x){return Math.sqrt(x[0].evaluate(c))}],log10:[Ic,[Ic],function(c,x){return Math.log(x[0].evaluate(c))/Math.LN10}],ln:[Ic,[Ic],function(c,x){return Math.log(x[0].evaluate(c))}],log2:[Ic,[Ic],function(c,x){return Math.log(x[0].evaluate(c))/Math.LN2}],sin:[Ic,[Ic],function(c,x){return Math.sin(x[0].evaluate(c))}],
cos:[Ic,[Ic],function(c,x){return Math.cos(x[0].evaluate(c))}],tan:[Ic,[Ic],function(c,x){return Math.tan(x[0].evaluate(c))}],asin:[Ic,[Ic],function(c,x){return Math.asin(x[0].evaluate(c))}],acos:[Ic,[Ic],function(c,x){return Math.acos(x[0].evaluate(c))}],atan:[Ic,[Ic],function(c,x){return Math.atan(x[0].evaluate(c))}],min:[Ic,{type:Ic},function(c,x){return Math.min.apply(Math,x.map(function(F){return F.evaluate(c)}))}],max:[Ic,{type:Ic},function(c,x){return Math.max.apply(Math,x.map(function(F){return F.evaluate(c)}))}],
abs:[Ic,[Ic],function(c,x){return Math.abs(x[0].evaluate(c))}],round:[Ic,[Ic],function(c,x){c=x[0].evaluate(c);return 0>c?-Math.round(-c):Math.round(c)}],floor:[Ic,[Ic],function(c,x){return Math.floor(x[0].evaluate(c))}],ceil:[Ic,[Ic],function(c,x){return Math.ceil(x[0].evaluate(c))}],"filter-\x3d\x3d":[id,[ld,ud],function(c,x){var F=x[0];x=x[1];return c.properties()[F.value]===x.value}],"filter-id-\x3d\x3d":[id,[ud],function(c,x){x=x[0];return c.id()===x.value}],"filter-type-\x3d\x3d":[id,[ld],function(c,
x){x=x[0];return c.geometryType()===x.value}],"filter-\x3c":[id,[ld,ud],function(c,x){var F=x[0];x=x[1];c=c.properties()[F.value];F=x.value;return typeof c==typeof F&&c<F}],"filter-id-\x3c":[id,[ud],function(c,x){x=x[0];c=c.id();x=x.value;return typeof c==typeof x&&c<x}],"filter-\x3e":[id,[ld,ud],function(c,x){var F=x[0];x=x[1];c=c.properties()[F.value];F=x.value;return typeof c==typeof F&&c>F}],"filter-id-\x3e":[id,[ud],function(c,x){x=x[0];c=c.id();x=x.value;return typeof c==typeof x&&c>x}],"filter-\x3c\x3d":[id,
[ld,ud],function(c,x){var F=x[0];x=x[1];c=c.properties()[F.value];F=x.value;return typeof c==typeof F&&c<=F}],"filter-id-\x3c\x3d":[id,[ud],function(c,x){x=x[0];c=c.id();x=x.value;return typeof c==typeof x&&c<=x}],"filter-\x3e\x3d":[id,[ld,ud],function(c,x){var F=x[0];x=x[1];c=c.properties()[F.value];F=x.value;return typeof c==typeof F&&c>=F}],"filter-id-\x3e\x3d":[id,[ud],function(c,x){x=x[0];c=c.id();x=x.value;return typeof c==typeof x&&c>=x}],"filter-has":[id,[ud],function(c,x){return x[0].value in
c.properties()}],"filter-has-id":[id,[],function(c){return null!==c.id()&&void 0!==c.id()}],"filter-type-in":[id,[ia(ld)],function(c,x){return 0<=x[0].value.indexOf(c.geometryType())}],"filter-id-in":[id,[ia(ud)],function(c,x){return 0<=x[0].value.indexOf(c.id())}],"filter-in-small":[id,[ld,ia(ud)],function(c,x){var F=x[0];return 0<=x[1].value.indexOf(c.properties()[F.value])}],"filter-in-large":[id,[ld,ia(ud)],function(c,x){var F=x[0];x=x[1];a:{c=c.properties()[F.value];F=x.value;var V=0;for(x=x.value.length-
1;V<=x;){var fa=V+x>>1;if(F[fa]===c){x=!0;break a}F[fa]>c?x=fa-1:V=fa+1}x=!1}return x}],all:{type:id,overloads:[[[id,id],function(c,x){var F=x[1];return x[0].evaluate(c)&&F.evaluate(c)}],[{type:id},function(c,x){for(var F=0;F<x.length;F+=1)if(!x[F].evaluate(c))return!1;return!0}]]},any:{type:id,overloads:[[[id,id],function(c,x){var F=x[1];return x[0].evaluate(c)||F.evaluate(c)}],[{type:id},function(c,x){for(var F=0;F<x.length;F+=1)if(x[F].evaluate(c))return!0;return!1}]]},"!":[id,[id],function(c,
x){return!x[0].evaluate(c)}],"is-supported-script":[id,[ld],function(c,x){var F=c.globals&&c.globals.isSupportedScript;return!F||F(x[0].evaluate(c))}],upcase:[ld,[ld],function(c,x){return x[0].evaluate(c).toUpperCase()}],downcase:[ld,[ld],function(c,x){return x[0].evaluate(c).toLowerCase()}],concat:[ld,{type:ud},function(c,x){return x.map(function(F){return pa(F.evaluate(c))}).join("")}],"resolved-locale":[ld,[ie],function(c,x){return x[0].evaluate(c).resolvedLocale()}]});var ki=function(c,x){this.expression=
c;this._warningHistory={};this._evaluator=new Ce;this._defaultValue=x?"color"===x.type&&mb(x.default)?new Qd(0,0,0,0):"color"===x.type?Qd.parse(x.default)||null:void 0===x.default?null:x.default:null;this._enumValues=x&&"enum"===x.type?x.values:null};ki.prototype.evaluateWithoutErrorHandling=function(c,x,F,V,fa,ra){return this._evaluator.globals=c,this._evaluator.feature=x,this._evaluator.featureState=F,this._evaluator.canonical=V,this._evaluator.availableImages=fa||null,this._evaluator.formattedSection=
ra,this.expression.evaluate(this._evaluator)};ki.prototype.evaluate=function(c,x,F,V,fa,ra){this._evaluator.globals=c;this._evaluator.feature=x||null;this._evaluator.featureState=F||null;this._evaluator.canonical=V;this._evaluator.availableImages=fa||null;this._evaluator.formattedSection=ra||null;try{var ya=this.expression.evaluate(this._evaluator);if(null==ya||"number"==typeof ya&&ya!=ya)return this._defaultValue;if(this._enumValues&&!(ya in this._enumValues))throw new rf("Expected value to be one of "+
Object.keys(this._enumValues).map(function(Ha){return JSON.stringify(Ha)}).join(", ")+", but found "+JSON.stringify(ya)+" instead.");return ya}catch(Ha){return this._warningHistory[Ha.message]||(this._warningHistory[Ha.message]=!0,"undefined"!=typeof console&&console.warn(Ha.message)),this._defaultValue}};var Yd=function(c,x){this.kind=c;this._styleExpression=x;this.isStateDependent="constant"!==c&&!$a(x.expression)};Yd.prototype.evaluateWithoutErrorHandling=function(c,x,F,V,fa,ra){return this._styleExpression.evaluateWithoutErrorHandling(c,
x,F,V,fa,ra)};Yd.prototype.evaluate=function(c,x,F,V,fa,ra){return this._styleExpression.evaluate(c,x,F,V,fa,ra)};var lf=function(c,x,F,V){this.kind=c;this.zoomStops=F;this._styleExpression=x;this.isStateDependent="camera"!==c&&!$a(x.expression);this.interpolationType=V};lf.prototype.evaluateWithoutErrorHandling=function(c,x,F,V,fa,ra){return this._styleExpression.evaluateWithoutErrorHandling(c,x,F,V,fa,ra)};lf.prototype.evaluate=function(c,x,F,V,fa,ra){return this._styleExpression.evaluate(c,x,F,
V,fa,ra)};lf.prototype.interpolationFactor=function(c,x,F){return this.interpolationType?Nf.interpolationFactor(this.interpolationType,c,x,F):0};var qh=function(c,x){this._parameters=c;this._specification=x;X(this,function ra(V,fa){var ya="color"===fa.type,Ha=V.stops&&"object"==typeof V.stops[0][0],Pa=Ha||!(Ha||void 0!==V.property),Ya=V.type||(Va(fa)?"exponential":"interval");if(ya&&((V=X({},V)).stops&&(V.stops=V.stops.map(function(zb){return[zb[0],Qd.parse(zb[1])]})),V.default=Qd.parse(V.default?
V.default:fa.default)),V.colorSpace&&"rgb"!==V.colorSpace&&!Yi[V.colorSpace])throw Error("Unknown color space: "+V.colorSpace);if("exponential"===Ya)var hb=Wb;else if("interval"===Ya)hb=Ob;else if("categorical"===Ya){hb=Kb;var Ab=Object.create(null);ya=0;for(var Fb=V.stops;ya<Fb.length;ya+=1){var Jb=Fb[ya];Ab[Jb[0]]=Jb[1]}var Rb=typeof V.stops[0][0]}else{if("identity"!==Ya)throw Error('Unknown function type "'+Ya+'"');hb=Bc}if(Ha){Ha={};Pa=[];for(Ya=0;Ya<V.stops.length;Ya++)ya=V.stops[Ya],Fb=ya[0].zoom,
void 0===Ha[Fb]&&(Ha[Fb]={zoom:Fb,type:V.type,property:V.property,default:V.default,stops:[]},Pa.push(Fb)),Ha[Fb].stops.push([ya[0].value,ya[1]]);var rb=[];for(Ya=0;Ya<Pa.length;Ya+=1)ya=Pa[Ya],rb.push([Ha[ya].zoom,ra(Ha[ya],fa)]);Ha={name:"linear"};return{kind:"composite",interpolationType:Ha,interpolationFactor:Nf.interpolationFactor.bind(void 0,Ha),zoomStops:rb.map(function(zb){return zb[0]}),evaluate:function(zb,hc){zb=zb.zoom;return Wb({stops:rb,base:V.base},fa,zb).evaluate(zb,hc)}}}return Pa?
(Ha="exponential"===Ya?{name:"exponential",base:void 0!==V.base?V.base:1}:null,{kind:"camera",interpolationType:Ha,interpolationFactor:Nf.interpolationFactor.bind(void 0,Ha),zoomStops:V.stops.map(function(zb){return zb[0]}),evaluate:function(zb){return hb(V,fa,zb.zoom,Ab,Rb)}}):{kind:"source",evaluate:function(zb,hc){zb=hc&&hc.properties?hc.properties[V.property]:void 0;return void 0===zb?Pb(V.default,fa.default):hb(V,fa,zb,Ab,Rb)}}}(this._parameters,this._specification))};qh.deserialize=function(c){return new qh(c._parameters,
c._specification)};qh.serialize=function(c){return{_parameters:c._parameters,_specification:c._specification}};var Ze={type:"boolean",default:!1,transition:!1,"property-type":"data-driven",expression:{interpolated:!1,parameters:["zoom","feature"]}},je={promoteId:function(c){var x=c.key;c=c.value;if("string"===Za(c))return Tc({key:x,value:c});var F=[],V;for(V in c)F.push.apply(F,Tc({key:x+"."+V,value:c[V]}));return F}},We={"*":function(){return[]},array:$b,boolean:function(c){var x=c.value;c=c.key;
var F=Za(x);return"boolean"!==F?[new dc(c,x,"boolean expected, "+F+" found")]:[]},number:gc,color:function(c){var x=c.key;c=c.value;var F=Za(c);return"string"!==F?[new dc(x,c,"color expected, "+F+" found")]:null===Be(c)?[new dc(x,c,'color expected, "'+c+'" found')]:[]},constants:S,enum:Rc,filter:Lb,function:rc,layer:qc,object:kb,source:Yc,light:ad,string:Tc,formatted:function(c){return 0===Tc(c).length?[]:xc(c)},resolvedImage:function(c){return 0===Tc(c).length?[]:xc(c)}};dd.source=Jc(Yc);dd.light=
Jc(ad);dd.layer=Jc(qc);dd.filter=Jc(Lb);dd.paintProperty=Jc(Mb);dd.layoutProperty=Jc(Yb);var Gi=dd.light,zk=dd.paintProperty,yk=dd.layoutProperty;Vc.prototype.insert=function(c,x,F,V,fa){this._forEachCell(x,F,V,fa,this._insertCell,this.uid++);this.keys.push(c);this.bboxes.push(x);this.bboxes.push(F);this.bboxes.push(V);this.bboxes.push(fa)};Vc.prototype._insertReadonly=function(){throw"Cannot insert into a GridIndex created from an ArrayBuffer.";};Vc.prototype._insertCell=function(c,x,F,V,fa,ra){this.cells[fa].push(ra)};
Vc.prototype.query=function(c,x,F,V,fa){var ra=this.min,ya=this.max;if(c<=ra&&x<=ra&&ya<=F&&ya<=V&&!fa)return Array.prototype.slice.call(this.keys);ra=[];return this._forEachCell(c,x,F,V,this._queryCell,ra,{},fa),ra};Vc.prototype._queryCell=function(c,x,F,V,fa,ra,ya,Ha){fa=this.cells[fa];if(null!==fa)for(var Pa=this.keys,Ya=this.bboxes,hb=0;hb<fa.length;hb++){var Ab=fa[hb];if(void 0===ya[Ab]){var Fb=4*Ab;(Ha?Ha(Ya[Fb+0],Ya[Fb+1],Ya[Fb+2],Ya[Fb+3]):c<=Ya[Fb+2]&&x<=Ya[Fb+3]&&F>=Ya[Fb+0]&&V>=Ya[Fb+1])?
(ya[Ab]=!0,ra.push(Pa[Ab])):ya[Ab]=!1}}};Vc.prototype._forEachCell=function(c,x,F,V,fa,ra,ya,Ha){for(var Pa=this._convertToCellCoord(c),Ya=this._convertToCellCoord(x),hb=this._convertToCellCoord(F),Ab=this._convertToCellCoord(V);Pa<=hb;Pa++)for(var Fb=Ya;Fb<=Ab;Fb++){var Jb=this.d*Fb+Pa;if((!Ha||Ha(this._convertFromCellCoord(Pa),this._convertFromCellCoord(Fb),this._convertFromCellCoord(Pa+1),this._convertFromCellCoord(Fb+1)))&&fa.call(this,c,x,F,V,Jb,ra,ya,Ha))return}};Vc.prototype._convertFromCellCoord=
function(c){return(c-this.padding)/this.scale};Vc.prototype._convertToCellCoord=function(c){return Math.max(0,Math.min(this.d-1,Math.floor(c*this.scale)+this.padding))};Vc.prototype.toArrayBuffer=function(){if(this.arrayBuffer)return this.arrayBuffer;for(var c=this.cells,x=3+this.cells.length+1+1,F=0,V=0;V<this.cells.length;V++)F+=this.cells[V].length;F=new Int32Array(x+F+this.keys.length+this.bboxes.length);F[0]=this.extent;F[1]=this.n;F[2]=this.padding;for(V=0;V<c.length;V++){var fa=c[V];F[3+V]=
x;F.set(fa,x);x+=fa.length}return F[3+c.length]=x,F.set(this.keys,x),F[3+c.length+1]=x+=this.keys.length,F.set(this.bboxes,x),F.buffer};var gk=self.ImageData,qj=self.ImageBitmap,Ii={},rj;for(rj in Gc("Object",Object),Vc.serialize=function(c,x){c=c.toArrayBuffer();return x&&x.push(c),{buffer:c}},Vc.deserialize=function(c){return new Vc(c.buffer)},Gc("Grid",Vc),Gc("Color",Qd),Gc("Error",Error),Gc("ResolvedImage",Te),Gc("StylePropertyFunction",qh),Gc("StyleExpression",ki,{omit:["_evaluator"]}),Gc("ZoomDependentExpression",
lf),Gc("ZoomConstantExpression",Yd),Gc("CompoundExpression",Ie,{omit:["_evaluate"]}),ji)ji[rj]._classRegistryKey||Gc("Expression_"+rj,ji[rj]);var Zj=function(){this.first=!0};Zj.prototype.update=function(c,x){var F=Math.floor(c);return this.first?(this.first=!1,this.lastIntegerZoom=F,this.lastIntegerZoomTime=0,this.lastZoom=c,this.lastFloorZoom=F,!0):(this.lastFloorZoom>F?(this.lastIntegerZoom=F+1,this.lastIntegerZoomTime=x):this.lastFloorZoom<F&&(this.lastIntegerZoom=F,this.lastIntegerZoomTime=x),
c!==this.lastZoom&&(this.lastZoom=c,this.lastFloorZoom=F,!0))};var Gd={"Latin-1 Supplement":function(c){return 128<=c&&255>=c},Arabic:function(c){return 1536<=c&&1791>=c},"Arabic Supplement":function(c){return 1872<=c&&1919>=c},"Arabic Extended-A":function(c){return 2208<=c&&2303>=c},"Hangul Jamo":function(c){return 4352<=c&&4607>=c},"Unified Canadian Aboriginal Syllabics":function(c){return 5120<=c&&5759>=c},Khmer:function(c){return 6016<=c&&6143>=c},"Unified Canadian Aboriginal Syllabics Extended":function(c){return 6320<=
c&&6399>=c},"General Punctuation":function(c){return 8192<=c&&8303>=c},"Letterlike Symbols":function(c){return 8448<=c&&8527>=c},"Number Forms":function(c){return 8528<=c&&8591>=c},"Miscellaneous Technical":function(c){return 8960<=c&&9215>=c},"Control Pictures":function(c){return 9216<=c&&9279>=c},"Optical Character Recognition":function(c){return 9280<=c&&9311>=c},"Enclosed Alphanumerics":function(c){return 9312<=c&&9471>=c},"Geometric Shapes":function(c){return 9632<=c&&9727>=c},"Miscellaneous Symbols":function(c){return 9728<=
c&&9983>=c},"Miscellaneous Symbols and Arrows":function(c){return 11008<=c&&11263>=c},"CJK Radicals Supplement":function(c){return 11904<=c&&12031>=c},"Kangxi Radicals":function(c){return 12032<=c&&12255>=c},"Ideographic Description Characters":function(c){return 12272<=c&&12287>=c},"CJK Symbols and Punctuation":function(c){return 12288<=c&&12351>=c},Hiragana:function(c){return 12352<=c&&12447>=c},Katakana:function(c){return 12448<=c&&12543>=c},Bopomofo:function(c){return 12544<=c&&12591>=c},"Hangul Compatibility Jamo":function(c){return 12592<=
c&&12687>=c},Kanbun:function(c){return 12688<=c&&12703>=c},"Bopomofo Extended":function(c){return 12704<=c&&12735>=c},"CJK Strokes":function(c){return 12736<=c&&12783>=c},"Katakana Phonetic Extensions":function(c){return 12784<=c&&12799>=c},"Enclosed CJK Letters and Months":function(c){return 12800<=c&&13055>=c},"CJK Compatibility":function(c){return 13056<=c&&13311>=c},"CJK Unified Ideographs Extension A":function(c){return 13312<=c&&19903>=c},"Yijing Hexagram Symbols":function(c){return 19904<=
c&&19967>=c},"CJK Unified Ideographs":function(c){return 19968<=c&&40959>=c},"Yi Syllables":function(c){return 40960<=c&&42127>=c},"Yi Radicals":function(c){return 42128<=c&&42191>=c},"Hangul Jamo Extended-A":function(c){return 43360<=c&&43391>=c},"Hangul Syllables":function(c){return 44032<=c&&55215>=c},"Hangul Jamo Extended-B":function(c){return 55216<=c&&55295>=c},"Private Use Area":function(c){return 57344<=c&&63743>=c},"CJK Compatibility Ideographs":function(c){return 63744<=c&&64255>=c},"Arabic Presentation Forms-A":function(c){return 64336<=
c&&65023>=c},"Vertical Forms":function(c){return 65040<=c&&65055>=c},"CJK Compatibility Forms":function(c){return 65072<=c&&65103>=c},"Small Form Variants":function(c){return 65104<=c&&65135>=c},"Arabic Presentation Forms-B":function(c){return 65136<=c&&65279>=c},"Halfwidth and Fullwidth Forms":function(c){return 65280<=c&&65519>=c}},rk=null,Xf="unavailable",Rg=null,li=function(c){c&&"string"==typeof c&&-1<c.indexOf("NetworkError")&&(Xf="error");rk&&rk(c)},Dj=new kc,ak=function(){if("deferred"!==
Xf||!Rg)throw Error("rtl-text-plugin cannot be downloaded unless a pluginURL is specified");Xf="loading";le();Rg&&yb({url:Rg},function(c){c?li(c):(Xf="loaded",le())})},ag={applyArabicShaping:null,processBidirectionalText:null,processStyledBidirectionalText:null,isLoaded:function(){return"loaded"===Xf||null!=ag.applyArabicShaping},isLoading:function(){return"loading"===Xf},setState:function(c){Xf=c.pluginStatus;Rg=c.pluginURL},isParsed:function(){return null!=ag.applyArabicShaping&&null!=ag.processBidirectionalText&&
null!=ag.processStyledBidirectionalText},getPluginURL:function(){return Rg}},Xe=function(c,x){this.zoom=c;x?(this.now=x.now,this.fadeDuration=x.fadeDuration,this.zoomHistory=x.zoomHistory,this.transition=x.transition):(this.now=0,this.fadeDuration=0,this.zoomHistory=new Zj,this.transition={})};Xe.prototype.isSupportedScript=function(c){a:{for(var x=ag.isLoaded(),F=0;F<c.length;F+=1){var V=c[F].charCodeAt(0);if(!x&&be(V)||2304<=V&&3583>=V||3840<=V&&4255>=V||Gd.Khmer(V)){c=!1;break a}}c=!0}return c};
Xe.prototype.crossFadingFactor=function(){return 0===this.fadeDuration?1:Math.min((this.now-this.zoomHistory.lastIntegerZoomTime)/this.fadeDuration,1)};Xe.prototype.getCrossfadeParameters=function(){var c=this.zoom,x=c-Math.floor(c),F=this.crossFadingFactor();return c>this.zoomHistory.lastIntegerZoom?{fromScale:2,toScale:1,t:x+(1-x)*F}:{fromScale:.5,toScale:1,t:1-(1-F)*x}};var mi=function(c,x){this.property=c;this.value=x;this.expression=function(F,V){if(mb(F))return new qh(F,V);if(Kc(F)){F=bd(F,
V);if("error"===F.result)throw Error(F.value.map(function(ra){return ra.key+": "+ra.message}).join(", "));return F.value}var fa=F;return"string"==typeof F&&"color"===V.type&&(fa=Qd.parse(F)),{kind:"constant",evaluate:function(){return fa}}}(void 0===x?c.specification.default:x,c.specification)};mi.prototype.isDataDriven=function(){return"source"===this.expression.kind||"composite"===this.expression.kind};mi.prototype.possiblyEvaluate=function(c,x,F){return this.property.possiblyEvaluate(this,c,x,
F)};var sj=function(c){this.property=c;this.value=new mi(c,void 0)};sj.prototype.transitioned=function(c,x){return new bk(this.property,this.value,x,f({},c.transition,this.transition),c.now)};sj.prototype.untransitioned=function(){return new bk(this.property,this.value,null,{},0)};var fh=function(c){this._properties=c;this._values=Object.create(c.defaultTransitionablePropertyValues)};fh.prototype.getValue=function(c){return A(this._values[c].value.value)};fh.prototype.setValue=function(c,x){this._values.hasOwnProperty(c)||
(this._values[c]=new sj(this._values[c].property));this._values[c].value=new mi(this._values[c].property,null===x?void 0:A(x))};fh.prototype.getTransition=function(c){return A(this._values[c].transition)};fh.prototype.setTransition=function(c,x){this._values.hasOwnProperty(c)||(this._values[c]=new sj(this._values[c].property));this._values[c].transition=A(x)||void 0};fh.prototype.serialize=function(){for(var c={},x=0,F=Object.keys(this._values);x<F.length;x+=1){var V=F[x],fa=this.getValue(V);void 0!==
fa&&(c[V]=fa);fa=this.getTransition(V);void 0!==fa&&(c[V+"-transition"]=fa)}return c};fh.prototype.transitioned=function(c,x){for(var F=new Hd(this._properties),V=0,fa=Object.keys(this._values);V<fa.length;V+=1){var ra=fa[V];F._values[ra]=this._values[ra].transitioned(c,x._values[ra])}return F};fh.prototype.untransitioned=function(){for(var c=new Hd(this._properties),x=0,F=Object.keys(this._values);x<F.length;x+=1){var V=F[x];c._values[V]=this._values[V].untransitioned()}return c};var bk=function(c,
x,F,V,fa){this.property=c;this.value=x;this.begin=fa+V.delay||0;this.end=this.begin+V.duration||0;c.specification.transition&&(V.delay||V.duration)&&(this.prior=F)};bk.prototype.possiblyEvaluate=function(c,x,F){var V=c.now||0,fa=this.value.possiblyEvaluate(c,x,F),ra=this.prior;if(ra){if(V>this.end||this.value.isDataDriven())return this.prior=null,fa;if(V<this.begin)return ra.possiblyEvaluate(c,x,F);var ya=(V-this.begin)/(this.end-this.begin);V=this.property;var Ha=V.interpolate;c=ra.possiblyEvaluate(c,
x,F);0>=ya?ya=0:1<=ya?ya=1:(x=ya*ya,F=x*ya,ya=4*(.5>ya?F:3*(ya-x)+F-.75));return Ha.call(V,c,fa,ya)}return fa};var Hd=function(c){this._properties=c;this._values=Object.create(c.defaultTransitioningPropertyValues)};Hd.prototype.possiblyEvaluate=function(c,x,F){for(var V=new Yg(this._properties),fa=0,ra=Object.keys(this._values);fa<ra.length;fa+=1){var ya=ra[fa];V._values[ya]=this._values[ya].possiblyEvaluate(c,x,F)}return V};Hd.prototype.hasTransition=function(){for(var c=0,x=Object.keys(this._values);c<
x.length;c+=1)if(this._values[x[c]].prior)return!0;return!1};var Ef=function(c){this._properties=c;this._values=Object.create(c.defaultPropertyValues)};Ef.prototype.getValue=function(c){return A(this._values[c].value)};Ef.prototype.setValue=function(c,x){this._values[c]=new mi(this._values[c].property,null===x?void 0:A(x))};Ef.prototype.serialize=function(){for(var c={},x=0,F=Object.keys(this._values);x<F.length;x+=1){var V=F[x],fa=this.getValue(V);void 0!==fa&&(c[V]=fa)}return c};Ef.prototype.possiblyEvaluate=
function(c,x,F){for(var V=new Yg(this._properties),fa=0,ra=Object.keys(this._values);fa<ra.length;fa+=1){var ya=ra[fa];V._values[ya]=this._values[ya].possiblyEvaluate(c,x,F)}return V};var vf=function(c,x,F){this.property=c;this.value=x;this.parameters=F};vf.prototype.isConstant=function(){return"constant"===this.value.kind};vf.prototype.constantOr=function(c){return"constant"===this.value.kind?this.value.value:c};vf.prototype.evaluate=function(c,x,F,V){return this.property.evaluate(this.value,this.parameters,
c,x,F,V)};var Yg=function(c){this._properties=c;this._values=Object.create(c.defaultPossiblyEvaluatedValues)};Yg.prototype.get=function(c){return this._values[c]};var Cd=function(c){this.specification=c};Cd.prototype.possiblyEvaluate=function(c,x){return c.expression.evaluate(x)};Cd.prototype.interpolate=function(c,x,F){var V=pj[this.specification.type];return V?V(c,x,F):c};var ee=function(c,x){this.specification=c;this.overrides=x};ee.prototype.possiblyEvaluate=function(c,x,F,V){return new vf(this,
"constant"===c.expression.kind||"camera"===c.expression.kind?{kind:"constant",value:c.expression.evaluate(x,null,{},F,V)}:c.expression,x)};ee.prototype.interpolate=function(c,x,F){if("constant"!==c.value.kind||"constant"!==x.value.kind)return c;if(void 0===c.value.value||void 0===x.value.value)return new vf(this,{kind:"constant",value:void 0},c.parameters);var V=pj[this.specification.type];return V?new vf(this,{kind:"constant",value:V(c.value.value,x.value.value,F)},c.parameters):c};ee.prototype.evaluate=
function(c,x,F,V,fa,ra){return"constant"===c.kind?c.value:c.evaluate(x,F,V,fa,ra)};var rh=function(c){function x(){c.apply(this,arguments)}return c&&(x.__proto__=c),(x.prototype=Object.create(c&&c.prototype)).constructor=x,x.prototype.possiblyEvaluate=function(F,V,fa,ra){return void 0===F.value?new vf(this,{kind:"constant",value:void 0},V):"constant"===F.expression.kind?(fa=F.expression.evaluate(V,null,{},fa,ra),F="resolvedImage"===F.property.specification.type&&"string"!=typeof fa?fa.name:fa,F=this._calculate(F,
F,F,V),new vf(this,{kind:"constant",value:F},V)):"camera"===F.expression.kind?(F=this._calculate(F.expression.evaluate({zoom:V.zoom-1}),F.expression.evaluate({zoom:V.zoom}),F.expression.evaluate({zoom:V.zoom+1}),V),new vf(this,{kind:"constant",value:F},V)):new vf(this,F.expression,V)},x.prototype.evaluate=function(F,V,fa,ra,ya,Ha){return"source"===F.kind?(F=F.evaluate(V,fa,ra,ya,Ha),this._calculate(F,F,F,V)):"composite"===F.kind?this._calculate(F.evaluate({zoom:Math.floor(V.zoom)-1},fa,ra),F.evaluate({zoom:Math.floor(V.zoom)},
fa,ra),F.evaluate({zoom:Math.floor(V.zoom)+1},fa,ra),V):F.value},x.prototype._calculate=function(F,V,fa,ra){return ra.zoom>ra.zoomHistory.lastIntegerZoom?{from:F,to:V}:{from:fa,to:V}},x.prototype.interpolate=function(F){return F},x}(ee),Ch=function(c){this.specification=c};Ch.prototype.possiblyEvaluate=function(c,x,F,V){if(void 0!==c.value)return"constant"===c.expression.kind?(c=c.expression.evaluate(x,null,{},F,V),this._calculate(c,c,c,x)):this._calculate(c.expression.evaluate(new Xe(Math.floor(x.zoom-
1),x)),c.expression.evaluate(new Xe(Math.floor(x.zoom),x)),c.expression.evaluate(new Xe(Math.floor(x.zoom+1),x)),x)};Ch.prototype._calculate=function(c,x,F,V){return V.zoom>V.zoomHistory.lastIntegerZoom?{from:c,to:x}:{from:F,to:x}};Ch.prototype.interpolate=function(c){return c};var Ji=function(c){this.specification=c};Ji.prototype.possiblyEvaluate=function(c,x,F,V){return!!c.expression.evaluate(x,null,{},F,V)};Ji.prototype.interpolate=function(){return!1};var wg=function(c){for(var x in this.properties=
c,this.defaultPropertyValues={},this.defaultTransitionablePropertyValues={},this.defaultTransitioningPropertyValues={},this.defaultPossiblyEvaluatedValues={},this.overridableProperties=[],c){var F=c[x];F.specification.overridable&&this.overridableProperties.push(x);var V=this.defaultPropertyValues[x]=new mi(F,void 0);F=this.defaultTransitionablePropertyValues[x]=new sj(F);this.defaultTransitioningPropertyValues[x]=F.untransitioned();this.defaultPossiblyEvaluatedValues[x]=V.possiblyEvaluate({})}};
Gc("DataDrivenProperty",ee);Gc("DataConstantProperty",Cd);Gc("CrossFadedDataDrivenProperty",rh);Gc("CrossFadedProperty",Ch);Gc("ColorRampProperty",Ji);var ch=function(c){function x(F,V){if(c.call(this),this.id=F.id,this.type=F.type,this._featureFilter={filter:function(){return!0},needGeometry:!1},"custom"!==F.type&&(this.metadata=F.metadata,this.minzoom=F.minzoom,this.maxzoom=F.maxzoom,"background"!==F.type&&(this.source=F.source,this.sourceLayer=F["source-layer"],this.filter=F.filter),V.layout&&
(this._unevaluatedLayout=new Ef(V.layout)),V.paint)){for(var fa in this._transitionablePaint=new fh(V.paint),F.paint)this.setPaintProperty(fa,F.paint[fa],{validate:!1});for(var ra in F.layout)this.setLayoutProperty(ra,F.layout[ra],{validate:!1});this._transitioningPaint=this._transitionablePaint.untransitioned();this.paint=new Yg(V.paint)}}return c&&(x.__proto__=c),(x.prototype=Object.create(c&&c.prototype)).constructor=x,x.prototype.getCrossfadeParameters=function(){return this._crossfadeParameters},
x.prototype.getLayoutProperty=function(F){return"visibility"===F?this.visibility:this._unevaluatedLayout.getValue(F)},x.prototype.setLayoutProperty=function(F,V,fa){void 0===fa&&(fa={});null!=V&&this._validate(yk,"layers."+this.id+".layout."+F,F,V,fa)||("visibility"!==F?this._unevaluatedLayout.setValue(F,V):this.visibility=V)},x.prototype.getPaintProperty=function(F){return w(F,"-transition")?this._transitionablePaint.getTransition(F.slice(0,-11)):this._transitionablePaint.getValue(F)},x.prototype.setPaintProperty=
function(F,V,fa){if(void 0===fa&&(fa={}),null!=V&&this._validate(zk,"layers."+this.id+".paint."+F,F,V,fa))return!1;if(w(F,"-transition"))return this._transitionablePaint.setTransition(F.slice(0,-11),V||void 0),!1;var ra=this._transitionablePaint._values[F];fa="cross-faded-data-driven"===ra.property.specification["property-type"];var ya=ra.value.isDataDriven();ra=ra.value;this._transitionablePaint.setValue(F,V);this._handleSpecialPaintPropertyUpdate(F);V=this._transitionablePaint._values[F].value;
return V.isDataDriven()||ya||fa||this._handleOverridablePaintPropertyUpdate(F,ra,V)},x.prototype._handleSpecialPaintPropertyUpdate=function(F){},x.prototype._handleOverridablePaintPropertyUpdate=function(F,V,fa){return!1},x.prototype.isHidden=function(F){return!!(this.minzoom&&F<this.minzoom)||!!(this.maxzoom&&F>=this.maxzoom)||"none"===this.visibility},x.prototype.updateTransitions=function(F){this._transitioningPaint=this._transitionablePaint.transitioned(F,this._transitioningPaint)},x.prototype.hasTransition=
function(){return this._transitioningPaint.hasTransition()},x.prototype.recalculate=function(F,V){F.getCrossfadeParameters&&(this._crossfadeParameters=F.getCrossfadeParameters());this._unevaluatedLayout&&(this.layout=this._unevaluatedLayout.possiblyEvaluate(F,void 0,V));this.paint=this._transitioningPaint.possiblyEvaluate(F,void 0,V)},x.prototype.serialize=function(){var F={id:this.id,type:this.type,source:this.source,"source-layer":this.sourceLayer,metadata:this.metadata,minzoom:this.minzoom,maxzoom:this.maxzoom,
filter:this.filter,layout:this._unevaluatedLayout&&this._unevaluatedLayout.serialize(),paint:this._transitionablePaint&&this._transitionablePaint.serialize()};return this.visibility&&(F.layout=F.layout||{},F.layout.visibility=this.visibility),B(F,function(V,fa){return!(void 0===V||"layout"===fa&&!Object.keys(V).length||"paint"===fa&&!Object.keys(V).length)})},x.prototype._validate=function(F,V,fa,ra,ya){return void 0===ya&&(ya={}),(!ya||!1!==ya.validate)&&gd(this,F.call(dd,{key:V,layerType:this.type,
objectKey:fa,value:ra,styleSpec:Gb,style:{glyphs:!0,sprite:!0}}))},x.prototype.is3D=function(){return!1},x.prototype.isTileClipped=function(){return!1},x.prototype.hasOffscreenPass=function(){return!1},x.prototype.resize=function(){},x.prototype.isStateDependent=function(){for(var F in this.paint._values){var V=this.paint.get(F);if(V instanceof vf&&Fa(V.property.specification)&&("source"===V.value.kind||"composite"===V.value.kind)&&V.value.isStateDependent)return!0}return!1},x}(kc),hj={Int8:Int8Array,
Uint8:Uint8Array,Int16:Int16Array,Uint16:Uint16Array,Int32:Int32Array,Uint32:Uint32Array,Float32:Float32Array},Uf=function(c,x){this._structArray=c;this._pos1=x*this.size;this._pos2=this._pos1/2;this._pos4=this._pos1/4;this._pos8=this._pos1/8},Oe=function(){this.isTransferred=!1;this.capacity=-1;this.resize(0)};Oe.serialize=function(c,x){return c._trim(),x&&(c.isTransferred=!0,x.push(c.arrayBuffer)),{length:c.length,arrayBuffer:c.arrayBuffer}};Oe.deserialize=function(c){var x=Object.create(this.prototype);
return x.arrayBuffer=c.arrayBuffer,x.length=c.length,x.capacity=c.arrayBuffer.byteLength/x.bytesPerElement,x._refreshViews(),x};Oe.prototype._trim=function(){this.length!==this.capacity&&(this.capacity=this.length,this.arrayBuffer=this.arrayBuffer.slice(0,this.length*this.bytesPerElement),this._refreshViews())};Oe.prototype.clear=function(){this.length=0};Oe.prototype.resize=function(c){this.reserve(c);this.length=c};Oe.prototype.reserve=function(c){c>this.capacity&&(this.capacity=Math.max(c,Math.floor(5*
this.capacity),128),this.arrayBuffer=new ArrayBuffer(this.capacity*this.bytesPerElement),c=this.uint8,this._refreshViews(),c&&this.uint8.set(c))};Oe.prototype._refreshViews=function(){throw Error("_refreshViews() must be implemented by each concrete StructArray layout");};var Oi=function(c){function x(){c.apply(this,arguments)}return c&&(x.__proto__=c),(x.prototype=Object.create(c&&c.prototype)).constructor=x,x.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer);this.int16=
new Int16Array(this.arrayBuffer)},x.prototype.emplaceBack=function(F,V){var fa=this.length;return this.resize(fa+1),this.emplace(fa,F,V)},x.prototype.emplace=function(F,V,fa){var ra=2*F;return this.int16[ra+0]=V,this.int16[ra+1]=fa,F},x}(Oe);Oi.prototype.bytesPerElement=4;Gc("StructArrayLayout2i4",Oi);var Ih=function(c){function x(){c.apply(this,arguments)}return c&&(x.__proto__=c),(x.prototype=Object.create(c&&c.prototype)).constructor=x,x.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer);
this.int16=new Int16Array(this.arrayBuffer)},x.prototype.emplaceBack=function(F,V,fa,ra){var ya=this.length;return this.resize(ya+1),this.emplace(ya,F,V,fa,ra)},x.prototype.emplace=function(F,V,fa,ra,ya){var Ha=4*F;return this.int16[Ha+0]=V,this.int16[Ha+1]=fa,this.int16[Ha+2]=ra,this.int16[Ha+3]=ya,F},x}(Oe);Ih.prototype.bytesPerElement=8;Gc("StructArrayLayout4i8",Ih);var Jh=function(c){function x(){c.apply(this,arguments)}return c&&(x.__proto__=c),(x.prototype=Object.create(c&&c.prototype)).constructor=
x,x.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer);this.int16=new Int16Array(this.arrayBuffer)},x.prototype.emplaceBack=function(F,V,fa,ra,ya,Ha){var Pa=this.length;return this.resize(Pa+1),this.emplace(Pa,F,V,fa,ra,ya,Ha)},x.prototype.emplace=function(F,V,fa,ra,ya,Ha,Pa){var Ya=6*F;return this.int16[Ya+0]=V,this.int16[Ya+1]=fa,this.int16[Ya+2]=ra,this.int16[Ya+3]=ya,this.int16[Ya+4]=Ha,this.int16[Ya+5]=Pa,F},x}(Oe);Jh.prototype.bytesPerElement=12;Gc("StructArrayLayout2i4i12",
Jh);var Of=function(c){function x(){c.apply(this,arguments)}return c&&(x.__proto__=c),(x.prototype=Object.create(c&&c.prototype)).constructor=x,x.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer);this.int16=new Int16Array(this.arrayBuffer)},x.prototype.emplaceBack=function(F,V,fa,ra,ya,Ha){var Pa=this.length;return this.resize(Pa+1),this.emplace(Pa,F,V,fa,ra,ya,Ha)},x.prototype.emplace=function(F,V,fa,ra,ya,Ha,Pa){var Ya=4*F,hb=8*F;return this.int16[Ya+0]=V,this.int16[Ya+
1]=fa,this.uint8[hb+4]=ra,this.uint8[hb+5]=ya,this.uint8[hb+6]=Ha,this.uint8[hb+7]=Pa,F},x}(Oe);Of.prototype.bytesPerElement=8;Gc("StructArrayLayout2i4ub8",Of);var lg=function(c){function x(){c.apply(this,arguments)}return c&&(x.__proto__=c),(x.prototype=Object.create(c&&c.prototype)).constructor=x,x.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer);this.uint16=new Uint16Array(this.arrayBuffer)},x.prototype.emplaceBack=function(F,V,fa,ra,ya,Ha,Pa,Ya,hb,Ab){var Fb=this.length;
return this.resize(Fb+1),this.emplace(Fb,F,V,fa,ra,ya,Ha,Pa,Ya,hb,Ab)},x.prototype.emplace=function(F,V,fa,ra,ya,Ha,Pa,Ya,hb,Ab,Fb){var Jb=9*F,Rb=18*F;return this.uint16[Jb+0]=V,this.uint16[Jb+1]=fa,this.uint16[Jb+2]=ra,this.uint16[Jb+3]=ya,this.uint16[Jb+4]=Ha,this.uint16[Jb+5]=Pa,this.uint16[Jb+6]=Ya,this.uint16[Jb+7]=hb,this.uint8[Rb+16]=Ab,this.uint8[Rb+17]=Fb,F},x}(Oe);lg.prototype.bytesPerElement=18;Gc("StructArrayLayout8ui2ub18",lg);var xg=function(c){function x(){c.apply(this,arguments)}return c&&
(x.__proto__=c),(x.prototype=Object.create(c&&c.prototype)).constructor=x,x.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer);this.int16=new Int16Array(this.arrayBuffer);this.uint16=new Uint16Array(this.arrayBuffer)},x.prototype.emplaceBack=function(F,V,fa,ra,ya,Ha,Pa,Ya,hb,Ab,Fb,Jb){var Rb=this.length;return this.resize(Rb+1),this.emplace(Rb,F,V,fa,ra,ya,Ha,Pa,Ya,hb,Ab,Fb,Jb)},x.prototype.emplace=function(F,V,fa,ra,ya,Ha,Pa,Ya,hb,Ab,Fb,Jb,Rb){var rb=12*F;return this.int16[rb+
0]=V,this.int16[rb+1]=fa,this.int16[rb+2]=ra,this.int16[rb+3]=ya,this.uint16[rb+4]=Ha,this.uint16[rb+5]=Pa,this.uint16[rb+6]=Ya,this.uint16[rb+7]=hb,this.int16[rb+8]=Ab,this.int16[rb+9]=Fb,this.int16[rb+10]=Jb,this.int16[rb+11]=Rb,F},x}(Oe);xg.prototype.bytesPerElement=24;Gc("StructArrayLayout4i4ui4i24",xg);var gh=function(c){function x(){c.apply(this,arguments)}return c&&(x.__proto__=c),(x.prototype=Object.create(c&&c.prototype)).constructor=x,x.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer);
this.float32=new Float32Array(this.arrayBuffer)},x.prototype.emplaceBack=function(F,V,fa){var ra=this.length;return this.resize(ra+1),this.emplace(ra,F,V,fa)},x.prototype.emplace=function(F,V,fa,ra){var ya=3*F;return this.float32[ya+0]=V,this.float32[ya+1]=fa,this.float32[ya+2]=ra,F},x}(Oe);gh.prototype.bytesPerElement=12;Gc("StructArrayLayout3f12",gh);var Pi=function(c){function x(){c.apply(this,arguments)}return c&&(x.__proto__=c),(x.prototype=Object.create(c&&c.prototype)).constructor=x,x.prototype._refreshViews=
function(){this.uint8=new Uint8Array(this.arrayBuffer);this.uint32=new Uint32Array(this.arrayBuffer)},x.prototype.emplaceBack=function(F){var V=this.length;return this.resize(V+1),this.emplace(V,F)},x.prototype.emplace=function(F,V){return this.uint32[1*F]=V,F},x}(Oe);Pi.prototype.bytesPerElement=4;Gc("StructArrayLayout1ul4",Pi);var ni=function(c){function x(){c.apply(this,arguments)}return c&&(x.__proto__=c),(x.prototype=Object.create(c&&c.prototype)).constructor=x,x.prototype._refreshViews=function(){this.uint8=
new Uint8Array(this.arrayBuffer);this.int16=new Int16Array(this.arrayBuffer);this.uint32=new Uint32Array(this.arrayBuffer);this.uint16=new Uint16Array(this.arrayBuffer)},x.prototype.emplaceBack=function(F,V,fa,ra,ya,Ha,Pa,Ya,hb){var Ab=this.length;return this.resize(Ab+1),this.emplace(Ab,F,V,fa,ra,ya,Ha,Pa,Ya,hb)},x.prototype.emplace=function(F,V,fa,ra,ya,Ha,Pa,Ya,hb,Ab){var Fb=10*F;return this.int16[Fb+0]=V,this.int16[Fb+1]=fa,this.int16[Fb+2]=ra,this.int16[Fb+3]=ya,this.int16[Fb+4]=Ha,this.int16[Fb+
5]=Pa,this.uint32[5*F+3]=Ya,this.uint16[Fb+8]=hb,this.uint16[Fb+9]=Ab,F},x}(Oe);ni.prototype.bytesPerElement=20;Gc("StructArrayLayout6i1ul2ui20",ni);var yg=function(c){function x(){c.apply(this,arguments)}return c&&(x.__proto__=c),(x.prototype=Object.create(c&&c.prototype)).constructor=x,x.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer);this.int16=new Int16Array(this.arrayBuffer)},x.prototype.emplaceBack=function(F,V,fa,ra,ya,Ha){var Pa=this.length;return this.resize(Pa+
1),this.emplace(Pa,F,V,fa,ra,ya,Ha)},x.prototype.emplace=function(F,V,fa,ra,ya,Ha,Pa){var Ya=6*F;return this.int16[Ya+0]=V,this.int16[Ya+1]=fa,this.int16[Ya+2]=ra,this.int16[Ya+3]=ya,this.int16[Ya+4]=Ha,this.int16[Ya+5]=Pa,F},x}(Oe);yg.prototype.bytesPerElement=12;Gc("StructArrayLayout2i2i2i12",yg);var bg=function(c){function x(){c.apply(this,arguments)}return c&&(x.__proto__=c),(x.prototype=Object.create(c&&c.prototype)).constructor=x,x.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer);
this.float32=new Float32Array(this.arrayBuffer);this.int16=new Int16Array(this.arrayBuffer)},x.prototype.emplaceBack=function(F,V,fa,ra,ya){var Ha=this.length;return this.resize(Ha+1),this.emplace(Ha,F,V,fa,ra,ya)},x.prototype.emplace=function(F,V,fa,ra,ya,Ha){var Pa=4*F,Ya=8*F;return this.float32[Pa+0]=V,this.float32[Pa+1]=fa,this.float32[Pa+2]=ra,this.int16[Ya+6]=ya,this.int16[Ya+7]=Ha,F},x}(Oe);bg.prototype.bytesPerElement=16;Gc("StructArrayLayout2f1f2i16",bg);var Ej=function(c){function x(){c.apply(this,
arguments)}return c&&(x.__proto__=c),(x.prototype=Object.create(c&&c.prototype)).constructor=x,x.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer);this.float32=new Float32Array(this.arrayBuffer)},x.prototype.emplaceBack=function(F,V,fa,ra){var ya=this.length;return this.resize(ya+1),this.emplace(ya,F,V,fa,ra)},x.prototype.emplace=function(F,V,fa,ra,ya){var Ha=12*F,Pa=3*F;return this.uint8[Ha+0]=V,this.uint8[Ha+1]=fa,this.float32[Pa+1]=ra,this.float32[Pa+2]=ya,F},x}(Oe);
Ej.prototype.bytesPerElement=12;Gc("StructArrayLayout2ub2f12",Ej);var ci=function(c){function x(){c.apply(this,arguments)}return c&&(x.__proto__=c),(x.prototype=Object.create(c&&c.prototype)).constructor=x,x.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer);this.uint16=new Uint16Array(this.arrayBuffer)},x.prototype.emplaceBack=function(F,V,fa){var ra=this.length;return this.resize(ra+1),this.emplace(ra,F,V,fa)},x.prototype.emplace=function(F,V,fa,ra){var ya=3*F;return this.uint16[ya+
0]=V,this.uint16[ya+1]=fa,this.uint16[ya+2]=ra,F},x}(Oe);ci.prototype.bytesPerElement=6;Gc("StructArrayLayout3ui6",ci);var oi=function(c){function x(){c.apply(this,arguments)}return c&&(x.__proto__=c),(x.prototype=Object.create(c&&c.prototype)).constructor=x,x.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer);this.int16=new Int16Array(this.arrayBuffer);this.uint16=new Uint16Array(this.arrayBuffer);this.uint32=new Uint32Array(this.arrayBuffer);this.float32=new Float32Array(this.arrayBuffer)},
x.prototype.emplaceBack=function(F,V,fa,ra,ya,Ha,Pa,Ya,hb,Ab,Fb,Jb,Rb,rb,zb,hc,vc){var pc=this.length;return this.resize(pc+1),this.emplace(pc,F,V,fa,ra,ya,Ha,Pa,Ya,hb,Ab,Fb,Jb,Rb,rb,zb,hc,vc)},x.prototype.emplace=function(F,V,fa,ra,ya,Ha,Pa,Ya,hb,Ab,Fb,Jb,Rb,rb,zb,hc,vc,pc){var $c=24*F,fd=12*F,nd=48*F;return this.int16[$c+0]=V,this.int16[$c+1]=fa,this.uint16[$c+2]=ra,this.uint16[$c+3]=ya,this.uint32[fd+2]=Ha,this.uint32[fd+3]=Pa,this.uint32[fd+4]=Ya,this.uint16[$c+10]=hb,this.uint16[$c+11]=Ab,this.uint16[$c+
12]=Fb,this.float32[fd+7]=Jb,this.float32[fd+8]=Rb,this.uint8[nd+36]=rb,this.uint8[nd+37]=zb,this.uint8[nd+38]=hc,this.uint32[fd+10]=vc,this.int16[$c+22]=pc,F},x}(Oe);oi.prototype.bytesPerElement=48;Gc("StructArrayLayout2i2ui3ul3ui2f3ub1ul1i48",oi);var Kh=function(c){function x(){c.apply(this,arguments)}return c&&(x.__proto__=c),(x.prototype=Object.create(c&&c.prototype)).constructor=x,x.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer);this.int16=new Int16Array(this.arrayBuffer);
this.uint16=new Uint16Array(this.arrayBuffer);this.uint32=new Uint32Array(this.arrayBuffer);this.float32=new Float32Array(this.arrayBuffer)},x.prototype.emplaceBack=function(F,V,fa,ra,ya,Ha,Pa,Ya,hb,Ab,Fb,Jb,Rb,rb,zb,hc,vc,pc,$c,fd,nd,xd,vd,Vd,he,Wd,ce,ve){var Md=this.length;return this.resize(Md+1),this.emplace(Md,F,V,fa,ra,ya,Ha,Pa,Ya,hb,Ab,Fb,Jb,Rb,rb,zb,hc,vc,pc,$c,fd,nd,xd,vd,Vd,he,Wd,ce,ve)},x.prototype.emplace=function(F,V,fa,ra,ya,Ha,Pa,Ya,hb,Ab,Fb,Jb,Rb,rb,zb,hc,vc,pc,$c,fd,nd,xd,vd,Vd,he,
Wd,ce,ve,Md){var Id=34*F,Pd=17*F;return this.int16[Id+0]=V,this.int16[Id+1]=fa,this.int16[Id+2]=ra,this.int16[Id+3]=ya,this.int16[Id+4]=Ha,this.int16[Id+5]=Pa,this.int16[Id+6]=Ya,this.int16[Id+7]=hb,this.uint16[Id+8]=Ab,this.uint16[Id+9]=Fb,this.uint16[Id+10]=Jb,this.uint16[Id+11]=Rb,this.uint16[Id+12]=rb,this.uint16[Id+13]=zb,this.uint16[Id+14]=hc,this.uint16[Id+15]=vc,this.uint16[Id+16]=pc,this.uint16[Id+17]=$c,this.uint16[Id+18]=fd,this.uint16[Id+19]=nd,this.uint16[Id+20]=xd,this.uint16[Id+21]=
vd,this.uint16[Id+22]=Vd,this.uint32[Pd+12]=he,this.float32[Pd+13]=Wd,this.float32[Pd+14]=ce,this.float32[Pd+15]=ve,this.float32[Pd+16]=Md,F},x}(Oe);Kh.prototype.bytesPerElement=68;Gc("StructArrayLayout8i15ui1ul4f68",Kh);var aj=function(c){function x(){c.apply(this,arguments)}return c&&(x.__proto__=c),(x.prototype=Object.create(c&&c.prototype)).constructor=x,x.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer);this.float32=new Float32Array(this.arrayBuffer)},x.prototype.emplaceBack=
function(F){var V=this.length;return this.resize(V+1),this.emplace(V,F)},x.prototype.emplace=function(F,V){return this.float32[1*F]=V,F},x}(Oe);aj.prototype.bytesPerElement=4;Gc("StructArrayLayout1f4",aj);var tj=function(c){function x(){c.apply(this,arguments)}return c&&(x.__proto__=c),(x.prototype=Object.create(c&&c.prototype)).constructor=x,x.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer);this.int16=new Int16Array(this.arrayBuffer)},x.prototype.emplaceBack=function(F,
V,fa){var ra=this.length;return this.resize(ra+1),this.emplace(ra,F,V,fa)},x.prototype.emplace=function(F,V,fa,ra){var ya=3*F;return this.int16[ya+0]=V,this.int16[ya+1]=fa,this.int16[ya+2]=ra,F},x}(Oe);tj.prototype.bytesPerElement=6;Gc("StructArrayLayout3i6",tj);var uj=function(c){function x(){c.apply(this,arguments)}return c&&(x.__proto__=c),(x.prototype=Object.create(c&&c.prototype)).constructor=x,x.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer);this.uint32=new Uint32Array(this.arrayBuffer);
this.uint16=new Uint16Array(this.arrayBuffer)},x.prototype.emplaceBack=function(F,V,fa){var ra=this.length;return this.resize(ra+1),this.emplace(ra,F,V,fa)},x.prototype.emplace=function(F,V,fa,ra){var ya=4*F;return this.uint32[2*F]=V,this.uint16[ya+2]=fa,this.uint16[ya+3]=ra,F},x}(Oe);uj.prototype.bytesPerElement=8;Gc("StructArrayLayout1ul2ui8",uj);var Ki=function(c){function x(){c.apply(this,arguments)}return c&&(x.__proto__=c),(x.prototype=Object.create(c&&c.prototype)).constructor=x,x.prototype._refreshViews=
function(){this.uint8=new Uint8Array(this.arrayBuffer);this.uint16=new Uint16Array(this.arrayBuffer)},x.prototype.emplaceBack=function(F,V){var fa=this.length;return this.resize(fa+1),this.emplace(fa,F,V)},x.prototype.emplace=function(F,V,fa){var ra=2*F;return this.uint16[ra+0]=V,this.uint16[ra+1]=fa,F},x}(Oe);Ki.prototype.bytesPerElement=4;Gc("StructArrayLayout2ui4",Ki);var vj=function(c){function x(){c.apply(this,arguments)}return c&&(x.__proto__=c),(x.prototype=Object.create(c&&c.prototype)).constructor=
x,x.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer);this.uint16=new Uint16Array(this.arrayBuffer)},x.prototype.emplaceBack=function(F){var V=this.length;return this.resize(V+1),this.emplace(V,F)},x.prototype.emplace=function(F,V){return this.uint16[1*F]=V,F},x}(Oe);vj.prototype.bytesPerElement=2;Gc("StructArrayLayout1ui2",vj);var zg=function(c){function x(){c.apply(this,arguments)}return c&&(x.__proto__=c),(x.prototype=Object.create(c&&c.prototype)).constructor=x,x.prototype._refreshViews=
function(){this.uint8=new Uint8Array(this.arrayBuffer);this.float32=new Float32Array(this.arrayBuffer)},x.prototype.emplaceBack=function(F,V){var fa=this.length;return this.resize(fa+1),this.emplace(fa,F,V)},x.prototype.emplace=function(F,V,fa){var ra=2*F;return this.float32[ra+0]=V,this.float32[ra+1]=fa,F},x}(Oe);zg.prototype.bytesPerElement=8;Gc("StructArrayLayout2f8",zg);var Li=function(c){function x(){c.apply(this,arguments)}return c&&(x.__proto__=c),(x.prototype=Object.create(c&&c.prototype)).constructor=
x,x.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer);this.float32=new Float32Array(this.arrayBuffer)},x.prototype.emplaceBack=function(F,V,fa,ra){var ya=this.length;return this.resize(ya+1),this.emplace(ya,F,V,fa,ra)},x.prototype.emplace=function(F,V,fa,ra,ya){var Ha=4*F;return this.float32[Ha+0]=V,this.float32[Ha+1]=fa,this.float32[Ha+2]=ra,this.float32[Ha+3]=ya,F},x}(Oe);Li.prototype.bytesPerElement=16;Gc("StructArrayLayout4f16",Li);var wj=function(c){function x(){c.apply(this,
arguments)}c&&(x.__proto__=c);(x.prototype=Object.create(c&&c.prototype)).constructor=x;var F={anchorPointX:{configurable:!0},anchorPointY:{configurable:!0},x1:{configurable:!0},y1:{configurable:!0},x2:{configurable:!0},y2:{configurable:!0},featureIndex:{configurable:!0},sourceLayerIndex:{configurable:!0},bucketIndex:{configurable:!0},anchorPoint:{configurable:!0}};return F.anchorPointX.get=function(){return this._structArray.int16[this._pos2+0]},F.anchorPointY.get=function(){return this._structArray.int16[this._pos2+
1]},F.x1.get=function(){return this._structArray.int16[this._pos2+2]},F.y1.get=function(){return this._structArray.int16[this._pos2+3]},F.x2.get=function(){return this._structArray.int16[this._pos2+4]},F.y2.get=function(){return this._structArray.int16[this._pos2+5]},F.featureIndex.get=function(){return this._structArray.uint32[this._pos4+3]},F.sourceLayerIndex.get=function(){return this._structArray.uint16[this._pos2+8]},F.bucketIndex.get=function(){return this._structArray.uint16[this._pos2+9]},
F.anchorPoint.get=function(){return new Ud(this.anchorPointX,this.anchorPointY)},Object.defineProperties(x.prototype,F),x}(Uf);wj.prototype.size=20;var di=function(c){function x(){c.apply(this,arguments)}return c&&(x.__proto__=c),(x.prototype=Object.create(c&&c.prototype)).constructor=x,x.prototype.get=function(F){return new wj(this,F)},x}(ni);Gc("CollisionBoxArray",di);var Pk=function(c){function x(){c.apply(this,arguments)}c&&(x.__proto__=c);(x.prototype=Object.create(c&&c.prototype)).constructor=
x;var F={anchorX:{configurable:!0},anchorY:{configurable:!0},glyphStartIndex:{configurable:!0},numGlyphs:{configurable:!0},vertexStartIndex:{configurable:!0},lineStartIndex:{configurable:!0},lineLength:{configurable:!0},segment:{configurable:!0},lowerSize:{configurable:!0},upperSize:{configurable:!0},lineOffsetX:{configurable:!0},lineOffsetY:{configurable:!0},writingMode:{configurable:!0},placedOrientation:{configurable:!0},hidden:{configurable:!0},crossTileID:{configurable:!0},associatedIconIndex:{configurable:!0}};
return F.anchorX.get=function(){return this._structArray.int16[this._pos2+0]},F.anchorY.get=function(){return this._structArray.int16[this._pos2+1]},F.glyphStartIndex.get=function(){return this._structArray.uint16[this._pos2+2]},F.numGlyphs.get=function(){return this._structArray.uint16[this._pos2+3]},F.vertexStartIndex.get=function(){return this._structArray.uint32[this._pos4+2]},F.lineStartIndex.get=function(){return this._structArray.uint32[this._pos4+3]},F.lineLength.get=function(){return this._structArray.uint32[this._pos4+
4]},F.segment.get=function(){return this._structArray.uint16[this._pos2+10]},F.lowerSize.get=function(){return this._structArray.uint16[this._pos2+11]},F.upperSize.get=function(){return this._structArray.uint16[this._pos2+12]},F.lineOffsetX.get=function(){return this._structArray.float32[this._pos4+7]},F.lineOffsetY.get=function(){return this._structArray.float32[this._pos4+8]},F.writingMode.get=function(){return this._structArray.uint8[this._pos1+36]},F.placedOrientation.get=function(){return this._structArray.uint8[this._pos1+
37]},F.placedOrientation.set=function(V){this._structArray.uint8[this._pos1+37]=V},F.hidden.get=function(){return this._structArray.uint8[this._pos1+38]},F.hidden.set=function(V){this._structArray.uint8[this._pos1+38]=V},F.crossTileID.get=function(){return this._structArray.uint32[this._pos4+10]},F.crossTileID.set=function(V){this._structArray.uint32[this._pos4+10]=V},F.associatedIconIndex.get=function(){return this._structArray.int16[this._pos2+22]},Object.defineProperties(x.prototype,F),x}(Uf);
Pk.prototype.size=48;var Qk=function(c){function x(){c.apply(this,arguments)}return c&&(x.__proto__=c),(x.prototype=Object.create(c&&c.prototype)).constructor=x,x.prototype.get=function(F){return new Pk(this,F)},x}(oi);Gc("PlacedSymbolArray",Qk);var Ak=function(c){function x(){c.apply(this,arguments)}c&&(x.__proto__=c);(x.prototype=Object.create(c&&c.prototype)).constructor=x;var F={anchorX:{configurable:!0},anchorY:{configurable:!0},rightJustifiedTextSymbolIndex:{configurable:!0},centerJustifiedTextSymbolIndex:{configurable:!0},
leftJustifiedTextSymbolIndex:{configurable:!0},verticalPlacedTextSymbolIndex:{configurable:!0},placedIconSymbolIndex:{configurable:!0},verticalPlacedIconSymbolIndex:{configurable:!0},key:{configurable:!0},textBoxStartIndex:{configurable:!0},textBoxEndIndex:{configurable:!0},verticalTextBoxStartIndex:{configurable:!0},verticalTextBoxEndIndex:{configurable:!0},iconBoxStartIndex:{configurable:!0},iconBoxEndIndex:{configurable:!0},verticalIconBoxStartIndex:{configurable:!0},verticalIconBoxEndIndex:{configurable:!0},
featureIndex:{configurable:!0},numHorizontalGlyphVertices:{configurable:!0},numVerticalGlyphVertices:{configurable:!0},numIconVertices:{configurable:!0},numVerticalIconVertices:{configurable:!0},useRuntimeCollisionCircles:{configurable:!0},crossTileID:{configurable:!0},textBoxScale:{configurable:!0},textOffset0:{configurable:!0},textOffset1:{configurable:!0},collisionCircleDiameter:{configurable:!0}};return F.anchorX.get=function(){return this._structArray.int16[this._pos2+0]},F.anchorY.get=function(){return this._structArray.int16[this._pos2+
1]},F.rightJustifiedTextSymbolIndex.get=function(){return this._structArray.int16[this._pos2+2]},F.centerJustifiedTextSymbolIndex.get=function(){return this._structArray.int16[this._pos2+3]},F.leftJustifiedTextSymbolIndex.get=function(){return this._structArray.int16[this._pos2+4]},F.verticalPlacedTextSymbolIndex.get=function(){return this._structArray.int16[this._pos2+5]},F.placedIconSymbolIndex.get=function(){return this._structArray.int16[this._pos2+6]},F.verticalPlacedIconSymbolIndex.get=function(){return this._structArray.int16[this._pos2+
7]},F.key.get=function(){return this._structArray.uint16[this._pos2+8]},F.textBoxStartIndex.get=function(){return this._structArray.uint16[this._pos2+9]},F.textBoxEndIndex.get=function(){return this._structArray.uint16[this._pos2+10]},F.verticalTextBoxStartIndex.get=function(){return this._structArray.uint16[this._pos2+11]},F.verticalTextBoxEndIndex.get=function(){return this._structArray.uint16[this._pos2+12]},F.iconBoxStartIndex.get=function(){return this._structArray.uint16[this._pos2+13]},F.iconBoxEndIndex.get=
function(){return this._structArray.uint16[this._pos2+14]},F.verticalIconBoxStartIndex.get=function(){return this._structArray.uint16[this._pos2+15]},F.verticalIconBoxEndIndex.get=function(){return this._structArray.uint16[this._pos2+16]},F.featureIndex.get=function(){return this._structArray.uint16[this._pos2+17]},F.numHorizontalGlyphVertices.get=function(){return this._structArray.uint16[this._pos2+18]},F.numVerticalGlyphVertices.get=function(){return this._structArray.uint16[this._pos2+19]},F.numIconVertices.get=
function(){return this._structArray.uint16[this._pos2+20]},F.numVerticalIconVertices.get=function(){return this._structArray.uint16[this._pos2+21]},F.useRuntimeCollisionCircles.get=function(){return this._structArray.uint16[this._pos2+22]},F.crossTileID.get=function(){return this._structArray.uint32[this._pos4+12]},F.crossTileID.set=function(V){this._structArray.uint32[this._pos4+12]=V},F.textBoxScale.get=function(){return this._structArray.float32[this._pos4+13]},F.textOffset0.get=function(){return this._structArray.float32[this._pos4+
14]},F.textOffset1.get=function(){return this._structArray.float32[this._pos4+15]},F.collisionCircleDiameter.get=function(){return this._structArray.float32[this._pos4+16]},Object.defineProperties(x.prototype,F),x}(Uf);Ak.prototype.size=68;var bj=function(c){function x(){c.apply(this,arguments)}return c&&(x.__proto__=c),(x.prototype=Object.create(c&&c.prototype)).constructor=x,x.prototype.get=function(F){return new Ak(this,F)},x}(Kh);Gc("SymbolInstanceArray",bj);var xj=function(c){function x(){c.apply(this,
arguments)}return c&&(x.__proto__=c),(x.prototype=Object.create(c&&c.prototype)).constructor=x,x.prototype.getoffsetX=function(F){return this.float32[1*F]},x}(aj);Gc("GlyphOffsetArray",xj);var wh=function(c){function x(){c.apply(this,arguments)}return c&&(x.__proto__=c),(x.prototype=Object.create(c&&c.prototype)).constructor=x,x.prototype.getx=function(F){return this.int16[3*F]},x.prototype.gety=function(F){return this.int16[3*F+1]},x.prototype.gettileUnitDistanceFromAnchor=function(F){return this.int16[3*
F+2]},x}(tj);Gc("SymbolLineVertexArray",wh);var Oh=function(c){function x(){c.apply(this,arguments)}c&&(x.__proto__=c);(x.prototype=Object.create(c&&c.prototype)).constructor=x;var F={featureIndex:{configurable:!0},sourceLayerIndex:{configurable:!0},bucketIndex:{configurable:!0}};return F.featureIndex.get=function(){return this._structArray.uint32[this._pos4+0]},F.sourceLayerIndex.get=function(){return this._structArray.uint16[this._pos2+2]},F.bucketIndex.get=function(){return this._structArray.uint16[this._pos2+
3]},Object.defineProperties(x.prototype,F),x}(Uf);Oh.prototype.size=8;var jj=function(c){function x(){c.apply(this,arguments)}return c&&(x.__proto__=c),(x.prototype=Object.create(c&&c.prototype)).constructor=x,x.prototype.get=function(F){return new Oh(this,F)},x}(uj);Gc("FeatureIndexArray",jj);var Lk=Rd([{name:"a_pos",components:2,type:"Int16"}],4).members,zf=function(c){void 0===c&&(c=[]);this.segments=c};zf.prototype.prepareSegment=function(c,x,F,V){var fa=this.segments[this.segments.length-1];
return c>zf.MAX_VERTEX_ARRAY_LENGTH&&z("Max vertices per segment is "+zf.MAX_VERTEX_ARRAY_LENGTH+": bucket requested "+c),(!fa||fa.vertexLength+c>zf.MAX_VERTEX_ARRAY_LENGTH||fa.sortKey!==V)&&(fa={vertexOffset:x.length,primitiveOffset:F.length,vertexLength:0,primitiveLength:0},void 0!==V&&(fa.sortKey=V),this.segments.push(fa)),fa};zf.prototype.get=function(){return this.segments};zf.prototype.destroy=function(){for(var c=0,x=this.segments;c<x.length;c+=1){var F=x[c],V;for(V in F.vaos)F.vaos[V].destroy()}};
zf.simpleSegment=function(c,x,F,V){return new zf([{vertexOffset:c,primitiveOffset:x,vertexLength:F,primitiveLength:V,vaos:{},sortKey:0}])};zf.MAX_VERTEX_ARRAY_LENGTH=Math.pow(2,16)-1;Gc("SegmentVector",zf);var Ij=Rd([{name:"a_pattern_from",components:4,type:"Uint16"},{name:"a_pattern_to",components:4,type:"Uint16"},{name:"a_pixel_ratio_from",components:1,type:"Uint8"},{name:"a_pixel_ratio_to",components:1,type:"Uint8"}]),Mk=h(function(c){c.exports=function(x,F){var V,fa,ra;var ya=x.length-(V=3&x.length);
for(ra=0;ra<ya;){var Ha=255&x.charCodeAt(ra)|(255&x.charCodeAt(++ra))<<8|(255&x.charCodeAt(++ra))<<16|(255&x.charCodeAt(++ra))<<24;++ra;F=27492+(65535&(fa=5*(65535&(F=(F^=461845907*(65535&(Ha=(Ha=3432918353*(65535&Ha)+((3432918353*(Ha>>>16)&65535)<<16)&4294967295)<<15|Ha>>>17))+((461845907*(Ha>>>16)&65535)<<16)&4294967295)<<13|F>>>19))+((5*(F>>>16)&65535)<<16)&4294967295))+((58964+(fa>>>16)&65535)<<16)}switch(Ha=0,V){case 3:Ha^=(255&x.charCodeAt(ra+2))<<16;case 2:Ha^=(255&x.charCodeAt(ra+1))<<8;case 1:F^=
461845907*(65535&(Ha=(Ha=3432918353*(65535&(Ha^=255&x.charCodeAt(ra)))+((3432918353*(Ha>>>16)&65535)<<16)&4294967295)<<15|Ha>>>17))+((461845907*(Ha>>>16)&65535)<<16)&4294967295}return F^=x.length,F=2246822507*(65535&(F^=F>>>16))+((2246822507*(F>>>16)&65535)<<16)&4294967295,F=3266489909*(65535&(F^=F>>>13))+((3266489909*(F>>>16)&65535)<<16)&4294967295,(F^F>>>16)>>>0}}),Bk=h(function(c){c.exports=function(x,F){var V=x.length;F^=V;for(var fa=0;4<=V;){var ra=1540483477*(65535&(ra=255&x.charCodeAt(fa)|
(255&x.charCodeAt(++fa))<<8|(255&x.charCodeAt(++fa))<<16|(255&x.charCodeAt(++fa))<<24))+((1540483477*(ra>>>16)&65535)<<16);F=1540483477*(65535&F)+((1540483477*(F>>>16)&65535)<<16)^(ra=1540483477*(65535&(ra^=ra>>>24))+((1540483477*(ra>>>16)&65535)<<16));V-=4;++fa}switch(V){case 3:F^=(255&x.charCodeAt(fa+2))<<16;case 2:F^=(255&x.charCodeAt(fa+1))<<8;case 1:F=1540483477*(65535&(F^=255&x.charCodeAt(fa)))+((1540483477*(F>>>16)&65535)<<16)}return F=1540483477*(65535&(F^=F>>>13))+((1540483477*(F>>>16)&65535)<<
16),(F^F>>>15)>>>0}}),lj=Mk;lj.murmur3=Mk;lj.murmur2=Bk;var wi=function(){this.ids=[];this.positions=[];this.indexed=!1};wi.prototype.add=function(c,x,F,V){this.ids.push(Kd(c));this.positions.push(x,F,V)};wi.prototype.getPositions=function(c){c=Kd(c);for(var x=0,F=this.ids.length-1;x<F;){var V=x+F>>1;this.ids[V]>=c?F=V:x=V+1}for(F=[];this.ids[x]===c;)F.push({index:this.positions[3*x],start:this.positions[3*x+1],end:this.positions[3*x+2]}),x++;return F};wi.serialize=function(c,x){var F=new Float64Array(c.ids);
c=new Uint32Array(c.positions);return function Pa(fa,ra,ya,Ha){for(;ya<Ha;){for(var Ya=fa[ya+Ha>>1],hb=ya-1,Ab=Ha+1;;){do hb++;while(fa[hb]<Ya);do Ab--;while(fa[Ab]>Ya);if(hb>=Ab)break;Dd(fa,hb,Ab);Dd(ra,3*hb,3*Ab);Dd(ra,3*hb+1,3*Ab+1);Dd(ra,3*hb+2,3*Ab+2)}Ab-ya<Ha-Ab?(Pa(fa,ra,ya,Ab),ya=Ab+1):(Pa(fa,ra,Ab+1,Ha),Ha=Ab)}}(F,c,0,F.length-1),x&&x.push(F.buffer,c.buffer),{ids:F,positions:c}};wi.deserialize=function(c){var x=new wi;return x.ids=c.ids,x.positions=c.positions,x.indexed=!0,x};var al=Math.pow(2,
53)-1;Gc("FeaturePositionMap",wi);var yj=function(c,x){this.gl=c.gl;this.location=x},ll=function(c){function x(F,V){c.call(this,F,V);this.current=0}return c&&(x.__proto__=c),(x.prototype=Object.create(c&&c.prototype)).constructor=x,x.prototype.set=function(F){this.current!==F&&(this.current=F,this.gl.uniform1i(this.location,F))},x}(yj),Ck=function(c){function x(F,V){c.call(this,F,V);this.current=0}return c&&(x.__proto__=c),(x.prototype=Object.create(c&&c.prototype)).constructor=x,x.prototype.set=
function(F){this.current!==F&&(this.current=F,this.gl.uniform1f(this.location,F))},x}(yj),ml=function(c){function x(F,V){c.call(this,F,V);this.current=[0,0]}return c&&(x.__proto__=c),(x.prototype=Object.create(c&&c.prototype)).constructor=x,x.prototype.set=function(F){F[0]===this.current[0]&&F[1]===this.current[1]||(this.current=F,this.gl.uniform2f(this.location,F[0],F[1]))},x}(yj),Rk=function(c){function x(F,V){c.call(this,F,V);this.current=[0,0,0]}return c&&(x.__proto__=c),(x.prototype=Object.create(c&&
c.prototype)).constructor=x,x.prototype.set=function(F){F[0]===this.current[0]&&F[1]===this.current[1]&&F[2]===this.current[2]||(this.current=F,this.gl.uniform3f(this.location,F[0],F[1],F[2]))},x}(yj),zj=function(c){function x(F,V){c.call(this,F,V);this.current=[0,0,0,0]}return c&&(x.__proto__=c),(x.prototype=Object.create(c&&c.prototype)).constructor=x,x.prototype.set=function(F){F[0]===this.current[0]&&F[1]===this.current[1]&&F[2]===this.current[2]&&F[3]===this.current[3]||(this.current=F,this.gl.uniform4f(this.location,
F[0],F[1],F[2],F[3]))},x}(yj),ei=function(c){function x(F,V){c.call(this,F,V);this.current=Qd.transparent}return c&&(x.__proto__=c),(x.prototype=Object.create(c&&c.prototype)).constructor=x,x.prototype.set=function(F){F.r===this.current.r&&F.g===this.current.g&&F.b===this.current.b&&F.a===this.current.a||(this.current=F,this.gl.uniform4f(this.location,F.r,F.g,F.b,F.a))},x}(yj),tg=new Float32Array(16),Sg=function(c){function x(F,V){c.call(this,F,V);this.current=tg}return c&&(x.__proto__=c),(x.prototype=
Object.create(c&&c.prototype)).constructor=x,x.prototype.set=function(F){if(F[12]!==this.current[12]||F[0]!==this.current[0])return this.current=F,void this.gl.uniformMatrix4fv(this.location,!1,F);for(var V=1;16>V;V++)if(F[V]!==this.current[V]){this.current=F;this.gl.uniformMatrix4fv(this.location,!1,F);break}},x}(yj),nh=function(c,x,F){this.value=c;this.uniformNames=x.map(function(V){return"u_"+V});this.type=F};nh.prototype.setUniform=function(c,x,F){c.set(F.constantOr(this.value))};nh.prototype.getBinding=
function(c,x,F){return"color"===this.type?new ei(c,x):new Ck(c,x)};var Xi=function(c,x){this.uniformNames=x.map(function(F){return"u_"+F});this.patternTo=this.patternFrom=null;this.pixelRatioTo=this.pixelRatioFrom=1};Xi.prototype.setConstantPatternPositions=function(c,x){this.pixelRatioFrom=x.pixelRatio;this.pixelRatioTo=c.pixelRatio;this.patternFrom=x.tlbr;this.patternTo=c.tlbr};Xi.prototype.setUniform=function(c,x,F,V){(x="u_pattern_to"===V?this.patternTo:"u_pattern_from"===V?this.patternFrom:"u_pixel_ratio_to"===
V?this.pixelRatioTo:"u_pixel_ratio_from"===V?this.pixelRatioFrom:null)&&c.set(x)};Xi.prototype.getBinding=function(c,x,F){return"u_pattern"===F.substr(0,9)?new zj(c,x):new Ck(c,x)};var rg=function(c,x,F,V){this.expression=c;this.type=F;this.maxValue=0;this.paintVertexAttributes=x.map(function(fa){return{name:"a_"+fa,type:"Float32",components:"color"===F?2:1,offset:0}});this.paintVertexArray=new V};rg.prototype.populatePaintArray=function(c,x,F,V,fa){F=this.paintVertexArray.length;x=this.expression.evaluate(new Xe(0),
x,{},V,[],fa);this.paintVertexArray.resize(c);this._setPaintValue(F,c,x)};rg.prototype.updatePaintArray=function(c,x,F,V){F=this.expression.evaluate({zoom:0},F,V);this._setPaintValue(c,x,F)};rg.prototype._setPaintValue=function(c,x,F){if("color"===this.type)for(F=we(F);c<x;c++)this.paintVertexArray.emplace(c,F[0],F[1]);else{for(;c<x;c++)this.paintVertexArray.emplace(c,F);this.maxValue=Math.max(this.maxValue,Math.abs(F))}};rg.prototype.upload=function(c){this.paintVertexArray&&this.paintVertexArray.arrayBuffer&&
(this.paintVertexBuffer&&this.paintVertexBuffer.buffer?this.paintVertexBuffer.updateData(this.paintVertexArray):this.paintVertexBuffer=c.createVertexBuffer(this.paintVertexArray,this.paintVertexAttributes,this.expression.isStateDependent))};rg.prototype.destroy=function(){this.paintVertexBuffer&&this.paintVertexBuffer.destroy()};var ig=function(c,x,F,V,fa,ra){this.expression=c;this.uniformNames=x.map(function(ya){return"u_"+ya+"_t"});this.type=F;this.useIntegerZoom=V;this.zoom=fa;this.maxValue=0;
this.paintVertexAttributes=x.map(function(ya){return{name:"a_"+ya,type:"Float32",components:"color"===F?4:2,offset:0}});this.paintVertexArray=new ra};ig.prototype.populatePaintArray=function(c,x,F,V,fa){F=this.expression.evaluate(new Xe(this.zoom),x,{},V,[],fa);x=this.expression.evaluate(new Xe(this.zoom+1),x,{},V,[],fa);V=this.paintVertexArray.length;this.paintVertexArray.resize(c);this._setPaintValue(V,c,F,x)};ig.prototype.updatePaintArray=function(c,x,F,V){var fa=this.expression.evaluate({zoom:this.zoom},
F,V);F=this.expression.evaluate({zoom:this.zoom+1},F,V);this._setPaintValue(c,x,fa,F)};ig.prototype._setPaintValue=function(c,x,F,V){if("color"===this.type)for(F=we(F),V=we(V);c<x;c++)this.paintVertexArray.emplace(c,F[0],F[1],V[0],V[1]);else{for(;c<x;c++)this.paintVertexArray.emplace(c,F,V);this.maxValue=Math.max(this.maxValue,Math.abs(F),Math.abs(V))}};ig.prototype.upload=function(c){this.paintVertexArray&&this.paintVertexArray.arrayBuffer&&(this.paintVertexBuffer&&this.paintVertexBuffer.buffer?
this.paintVertexBuffer.updateData(this.paintVertexArray):this.paintVertexBuffer=c.createVertexBuffer(this.paintVertexArray,this.paintVertexAttributes,this.expression.isStateDependent))};ig.prototype.destroy=function(){this.paintVertexBuffer&&this.paintVertexBuffer.destroy()};ig.prototype.setUniform=function(c,x){x=d(this.expression.interpolationFactor(this.useIntegerZoom?Math.floor(x.zoom):x.zoom,this.zoom,this.zoom+1),0,1);c.set(x)};ig.prototype.getBinding=function(c,x,F){return new Ck(c,x)};var dh=
function(c,x,F,V,fa,ra){this.expression=c;this.type=x;this.useIntegerZoom=F;this.zoom=V;this.layerId=ra;this.zoomInPaintVertexArray=new fa;this.zoomOutPaintVertexArray=new fa};dh.prototype.populatePaintArray=function(c,x,F){var V=this.zoomInPaintVertexArray.length;this.zoomInPaintVertexArray.resize(c);this.zoomOutPaintVertexArray.resize(c);this._setPaintValues(V,c,x.patterns&&x.patterns[this.layerId],F)};dh.prototype.updatePaintArray=function(c,x,F,V,fa){this._setPaintValues(c,x,F.patterns&&F.patterns[this.layerId],
fa)};dh.prototype._setPaintValues=function(c,x,F,V){if(V&&F){var fa=V[F.min],ra=V[F.mid];F=V[F.max];if(fa&&ra&&F)for(;c<x;c++)this.zoomInPaintVertexArray.emplace(c,ra.tl[0],ra.tl[1],ra.br[0],ra.br[1],fa.tl[0],fa.tl[1],fa.br[0],fa.br[1],ra.pixelRatio,fa.pixelRatio),this.zoomOutPaintVertexArray.emplace(c,ra.tl[0],ra.tl[1],ra.br[0],ra.br[1],F.tl[0],F.tl[1],F.br[0],F.br[1],ra.pixelRatio,F.pixelRatio)}};dh.prototype.upload=function(c){this.zoomInPaintVertexArray&&this.zoomInPaintVertexArray.arrayBuffer&&
this.zoomOutPaintVertexArray&&this.zoomOutPaintVertexArray.arrayBuffer&&(this.zoomInPaintVertexBuffer=c.createVertexBuffer(this.zoomInPaintVertexArray,Ij.members,this.expression.isStateDependent),this.zoomOutPaintVertexBuffer=c.createVertexBuffer(this.zoomOutPaintVertexArray,Ij.members,this.expression.isStateDependent))};dh.prototype.destroy=function(){this.zoomOutPaintVertexBuffer&&this.zoomOutPaintVertexBuffer.destroy();this.zoomInPaintVertexBuffer&&this.zoomInPaintVertexBuffer.destroy()};var Hg=
function(c,x,F,V){this.binders={};this.layoutAttributes=V;this._buffers=[];V=[];for(var fa in c.paint._values)if(F(fa)){var ra=c.paint.get(fa);if(ra instanceof vf&&Fa(ra.property.specification)){var ya={"text-opacity":["opacity"],"icon-opacity":["opacity"],"text-color":["fill_color"],"icon-color":["fill_color"],"text-halo-color":["halo_color"],"icon-halo-color":["halo_color"],"text-halo-blur":["halo_blur"],"icon-halo-blur":["halo_blur"],"text-halo-width":["halo_width"],"icon-halo-width":["halo_width"],
"line-gap-width":["gapwidth"],"line-pattern":["pattern_to","pattern_from","pixel_ratio_to","pixel_ratio_from"],"fill-pattern":["pattern_to","pattern_from","pixel_ratio_to","pixel_ratio_from"],"fill-extrusion-pattern":["pattern_to","pattern_from","pixel_ratio_to","pixel_ratio_from"]}[fa]||[fa.replace(c.type+"-","").replace(/-/g,"_")],Ha=ra.value,Pa=ra.property.specification.type,Ya=ra.property.useIntegerZoom;ra=ra.property.specification["property-type"];ra="cross-faded"===ra||"cross-faded-data-driven"===
ra;if("constant"===Ha.kind)this.binders[fa]=ra?new Xi(Ha.value,ya):new nh(Ha.value,ya,Pa),V.push("/u_"+fa);else if("source"===Ha.kind||ra){var hb=se(fa,Pa,"source");this.binders[fa]=ra?new dh(Ha,Pa,Ya,x,hb,c.id):new rg(Ha,ya,Pa,hb);V.push("/a_"+fa)}else ra=se(fa,Pa,"composite"),this.binders[fa]=new ig(Ha,ya,Pa,Ya,x,ra),V.push("/z_"+fa)}}this.cacheKey=V.sort().join("")};Hg.prototype.getMaxValue=function(c){c=this.binders[c];return c instanceof rg||c instanceof ig?c.maxValue:0};Hg.prototype.populatePaintArrays=
function(c,x,F,V,fa){for(var ra in this.binders){var ya=this.binders[ra];(ya instanceof rg||ya instanceof ig||ya instanceof dh)&&ya.populatePaintArray(c,x,F,V,fa)}};Hg.prototype.setConstantPatternPositions=function(c,x){for(var F in this.binders){var V=this.binders[F];V instanceof Xi&&V.setConstantPatternPositions(c,x)}};Hg.prototype.updatePaintArrays=function(c,x,F,V,fa){var ra=!1,ya;for(ya in c)for(var Ha=0,Pa=x.getPositions(ya);Ha<Pa.length;Ha+=1){var Ya=Pa[Ha],hb=F.feature(Ya.index),Ab;for(Ab in this.binders){var Fb=
this.binders[Ab];(Fb instanceof rg||Fb instanceof ig||Fb instanceof dh)&&!0===Fb.expression.isStateDependent&&(ra=V.paint.get(Ab),Fb.expression=ra.value,Fb.updatePaintArray(Ya.start,Ya.end,hb,c[ya],fa),ra=!0)}}return ra};Hg.prototype.defines=function(){var c=[],x;for(x in this.binders){var F=this.binders[x];(F instanceof nh||F instanceof Xi)&&c.push.apply(c,F.uniformNames.map(function(V){return"#define HAS_UNIFORM_"+V}))}return c};Hg.prototype.getPaintVertexBuffers=function(){return this._buffers};
Hg.prototype.getUniforms=function(c,x){var F=[],V;for(V in this.binders){var fa=this.binders[V];if(fa instanceof nh||fa instanceof Xi||fa instanceof ig)for(var ra=0,ya=fa.uniformNames;ra<ya.length;ra+=1){var Ha=ya[ra];if(x[Ha]){var Pa=fa.getBinding(c,x[Ha],Ha);F.push({name:Ha,property:V,binding:Pa})}}}return F};Hg.prototype.setUniforms=function(c,x,F,V){for(c=0;c<x.length;c+=1){var fa=x[c],ra=fa.name,ya=fa.property;this.binders[ya].setUniform(fa.binding,V,F.get(ya),ra)}};Hg.prototype.updatePaintBuffers=
function(c){for(var x in this._buffers=[],this.binders){var F=this.binders[x];c&&F instanceof dh?(F=2===c.fromScale?F.zoomInPaintVertexBuffer:F.zoomOutPaintVertexBuffer)&&this._buffers.push(F):(F instanceof rg||F instanceof ig)&&F.paintVertexBuffer&&this._buffers.push(F.paintVertexBuffer)}};Hg.prototype.upload=function(c){for(var x in this.binders){var F=this.binders[x];(F instanceof rg||F instanceof ig||F instanceof dh)&&F.upload(c)}this.updatePaintBuffers()};Hg.prototype.destroy=function(){for(var c in this.binders){var x=
this.binders[c];(x instanceof rg||x instanceof ig||x instanceof dh)&&x.destroy()}};var sh=function(c,x,F,V){void 0===V&&(V=function(){return!0});this.programConfigurations={};for(var fa=0;fa<x.length;fa+=1){var ra=x[fa];this.programConfigurations[ra.id]=new Hg(ra,F,V,c)}this.needsUpload=!1;this._featureMap=new wi;this._bufferOffset=0};sh.prototype.populatePaintArrays=function(c,x,F,V,fa,ra){for(var ya in this.programConfigurations)this.programConfigurations[ya].populatePaintArrays(c,x,V,fa,ra);void 0!==
x.id&&this._featureMap.add(x.id,F,this._bufferOffset,c);this._bufferOffset=c;this.needsUpload=!0};sh.prototype.updatePaintArrays=function(c,x,F,V){for(var fa=0;fa<F.length;fa+=1){var ra=F[fa];this.needsUpload=this.programConfigurations[ra.id].updatePaintArrays(c,this._featureMap,x,ra,V)||this.needsUpload}};sh.prototype.get=function(c){return this.programConfigurations[c]};sh.prototype.upload=function(c){if(this.needsUpload){for(var x in this.programConfigurations)this.programConfigurations[x].upload(c);
this.needsUpload=!1}};sh.prototype.destroy=function(){for(var c in this.programConfigurations)this.programConfigurations[c].destroy()};Gc("ConstantBinder",nh);Gc("CrossFadedConstantBinder",Xi);Gc("SourceExpressionBinder",rg);Gc("CrossFadedCompositeBinder",dh);Gc("CompositeExpressionBinder",ig);Gc("ProgramConfiguration",Hg,{omit:["_buffers"]});Gc("ProgramConfigurationSet",sh);var Dh={min:-1*Math.pow(2,14),max:Math.pow(2,14)-1},Tg=function(c){this.zoom=c.zoom;this.overscaling=c.overscaling;this.layers=
c.layers;this.layerIds=this.layers.map(function(x){return x.id});this.index=c.index;this.hasPattern=!1;this.layoutVertexArray=new Oi;this.indexArray=new ci;this.segments=new zf;this.programConfigurations=new sh(Lk,c.layers,c.zoom);this.stateDependentLayerIds=this.layers.filter(function(x){return x.isStateDependent()}).map(function(x){return x.id})};Tg.prototype.populate=function(c,x,F){var V=this.layers[0],fa=[],ra=null;"circle"===V.type&&(ra=V.layout.get("circle-sort-key"));for(V=0;V<c.length;V+=
1){var ya=c[V],Ha=ya.feature,Pa=ya.id,Ya=ya.index;ya=ya.sourceLayerIndex;var hb=this.layers[0]._featureFilter.needGeometry,Ab={type:Ha.type,id:Pa,properties:Ha.properties,geometry:hb?Xd(Ha):[]};this.layers[0]._featureFilter.filter(new Xe(this.zoom),Ab,F)&&(hb||(Ab.geometry=Xd(Ha)),hb=ra?ra.evaluate(Ab,{},F):void 0,fa.push({id:Pa,properties:Ha.properties,type:Ha.type,sourceLayerIndex:ya,index:Ya,geometry:Ab.geometry,patterns:{},sortKey:hb}))}ra&&fa.sort(function(Fb,Jb){return Fb.sortKey-Jb.sortKey});
for(ra=0;ra<fa.length;ra+=1)V=fa[ra],Ha=V.geometry,Pa=V.index,Ya=V.sourceLayerIndex,ya=c[Pa].feature,this.addFeature(V,Ha,Pa,F),x.featureIndex.insert(ya,Ha,Pa,Ya,this.index)};Tg.prototype.update=function(c,x,F){this.stateDependentLayers.length&&this.programConfigurations.updatePaintArrays(c,x,this.stateDependentLayers,F)};Tg.prototype.isEmpty=function(){return 0===this.layoutVertexArray.length};Tg.prototype.uploadPending=function(){return!this.uploaded||this.programConfigurations.needsUpload};Tg.prototype.upload=
function(c){this.uploaded||(this.layoutVertexBuffer=c.createVertexBuffer(this.layoutVertexArray,Lk),this.indexBuffer=c.createIndexBuffer(this.indexArray));this.programConfigurations.upload(c);this.uploaded=!0};Tg.prototype.destroy=function(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.programConfigurations.destroy(),this.segments.destroy())};Tg.prototype.addFeature=function(c,x,F,V){for(var fa=0;fa<x.length;fa+=1)for(var ra=0,ya=x[fa];ra<ya.length;ra+=
1){var Ha=ya[ra],Pa=Ha.x;Ha=Ha.y;if(!(0>Pa||8192<=Pa||0>Ha||8192<=Ha)){var Ya=this.segments.prepareSegment(4,this.layoutVertexArray,this.indexArray,c.sortKey),hb=Ya.vertexLength;ye(this.layoutVertexArray,Pa,Ha,-1,-1);ye(this.layoutVertexArray,Pa,Ha,1,-1);ye(this.layoutVertexArray,Pa,Ha,1,1);ye(this.layoutVertexArray,Pa,Ha,-1,1);this.indexArray.emplaceBack(hb,hb+1,hb+2);this.indexArray.emplaceBack(hb,hb+3,hb+2);Ya.vertexLength+=4;Ya.primitiveLength+=2}}this.programConfigurations.populatePaintArrays(this.layoutVertexArray.length,
c,F,{},V)};Gc("CircleBucket",Tg,{omit:["layers"]});var wk=new wg({"circle-sort-key":new ee(Gb.layout_circle["circle-sort-key"])}),Nk={paint:new wg({"circle-radius":new ee(Gb.paint_circle["circle-radius"]),"circle-color":new ee(Gb.paint_circle["circle-color"]),"circle-blur":new ee(Gb.paint_circle["circle-blur"]),"circle-opacity":new ee(Gb.paint_circle["circle-opacity"]),"circle-translate":new Cd(Gb.paint_circle["circle-translate"]),"circle-translate-anchor":new Cd(Gb.paint_circle["circle-translate-anchor"]),
"circle-pitch-scale":new Cd(Gb.paint_circle["circle-pitch-scale"]),"circle-pitch-alignment":new Cd(Gb.paint_circle["circle-pitch-alignment"]),"circle-stroke-width":new ee(Gb.paint_circle["circle-stroke-width"]),"circle-stroke-color":new ee(Gb.paint_circle["circle-stroke-color"]),"circle-stroke-opacity":new ee(Gb.paint_circle["circle-stroke-opacity"])}),layout:wk},sg="undefined"!=typeof Float32Array?Float32Array:Array;Math.hypot||(Math.hypot=function(){for(var c=arguments,x=0,F=arguments.length;F--;)x+=
c[F]*c[F];return Math.sqrt(x)});var Ah=new sg(3);sg!=Float32Array&&(Ah[0]=0,Ah[1]=0,Ah[2]=0);(function(){var c=new sg(4);sg!=Float32Array&&(c[0]=0,c[1]=0,c[2]=0,c[3]=0)})();var bl=(function(){var c=new sg(2);sg!=Float32Array&&(c[0]=0,c[1]=0)}(),function(c){function x(F){c.call(this,F,Nk)}return c&&(x.__proto__=c),(x.prototype=Object.create(c&&c.prototype)).constructor=x,x.prototype.createBucket=function(F){return new Tg(F)},x.prototype.queryRadius=function(F){return Od("circle-radius",this,F)+Od("circle-stroke-width",
this,F)+Td(this.paint.get("circle-translate"))},x.prototype.queryIntersectsFeature=function(F,V,fa,ra,ya,Ha,Pa,Ya){F=Ld(F,this.paint.get("circle-translate"),this.paint.get("circle-translate-anchor"),Ha.angle,Pa);ya=this.paint.get("circle-radius").evaluate(V,fa)+this.paint.get("circle-stroke-width").evaluate(V,fa);fa=(V="map"===this.paint.get("circle-pitch-alignment"))?F:function(Rb,rb){return Rb.map(function(zb){return Tb(zb,rb)})}(F,Ya);Pa=V?ya*Pa:ya;for(F=0;F<ra.length;F+=1){ya=0;for(var hb=ra[F];ya<
hb.length;ya+=1){var Ab=hb[ya],Fb=V?Ab:Tb(Ab,Ya),Jb=Pa;Ab=pe([],[Ab.x,Ab.y,0,1],Ya);if("viewport"===this.paint.get("circle-pitch-scale")&&"map"===this.paint.get("circle-pitch-alignment")?Jb*=Ab[3]/Ha.cameraToCenterDistance:"map"===this.paint.get("circle-pitch-scale")&&"viewport"===this.paint.get("circle-pitch-alignment")&&(Jb*=Ha.cameraToCenterDistance/Ab[3]),Qe(fa,Fb,Jb))return!0}}return!1},x}(ch)),hk=function(c){function x(){c.apply(this,arguments)}return c&&(x.__proto__=c),(x.prototype=Object.create(c&&
c.prototype)).constructor=x,x}(Tg);Gc("HeatmapBucket",hk,{omit:["layers"]});var ug=function(c,x){jc(this,c,1,x)};ug.prototype.resize=function(c){Hc(this,c,1)};ug.prototype.clone=function(){return new ug({width:this.width,height:this.height},new Uint8Array(this.data))};ug.copy=function(c,x,F,V,fa){Wc(c,x,F,V,fa,1)};var Cf=function(c,x){jc(this,c,4,x)};Cf.prototype.resize=function(c){Hc(this,c,4)};Cf.prototype.replace=function(c,x){x?this.data.set(c):this.data=c instanceof Uint8ClampedArray?new Uint8Array(c.buffer):
c};Cf.prototype.clone=function(){return new Cf({width:this.width,height:this.height},new Uint8Array(this.data))};Cf.copy=function(c,x,F,V,fa){Wc(c,x,F,V,fa,4)};Gc("AlphaImage",ug);Gc("RGBAImage",Cf);var uf={paint:new wg({"heatmap-radius":new ee(Gb.paint_heatmap["heatmap-radius"]),"heatmap-weight":new ee(Gb.paint_heatmap["heatmap-weight"]),"heatmap-intensity":new Cd(Gb.paint_heatmap["heatmap-intensity"]),"heatmap-color":new Ji(Gb.paint_heatmap["heatmap-color"]),"heatmap-opacity":new Cd(Gb.paint_heatmap["heatmap-opacity"])})},
Sk=function(c){function x(F){c.call(this,F,uf);this._updateColorRamp()}return c&&(x.__proto__=c),(x.prototype=Object.create(c&&c.prototype)).constructor=x,x.prototype.createBucket=function(F){return new hk(F)},x.prototype._handleSpecialPaintPropertyUpdate=function(F){"heatmap-color"===F&&this._updateColorRamp()},x.prototype._updateColorRamp=function(){this.colorRamp=Lc(this._transitionablePaint._values["heatmap-color"].value.expression,"heatmapDensity");this.colorRampTexture=null},x.prototype.resize=
function(){this.heatmapFbo&&(this.heatmapFbo.destroy(),this.heatmapFbo=null)},x.prototype.queryRadius=function(){return 0},x.prototype.queryIntersectsFeature=function(){return!1},x.prototype.hasOffscreenPass=function(){return 0!==this.paint.get("heatmap-opacity")&&"none"!==this.visibility},x}(ch),Wf={paint:new wg({"hillshade-illumination-direction":new Cd(Gb.paint_hillshade["hillshade-illumination-direction"]),"hillshade-illumination-anchor":new Cd(Gb.paint_hillshade["hillshade-illumination-anchor"]),
"hillshade-exaggeration":new Cd(Gb.paint_hillshade["hillshade-exaggeration"]),"hillshade-shadow-color":new Cd(Gb.paint_hillshade["hillshade-shadow-color"]),"hillshade-highlight-color":new Cd(Gb.paint_hillshade["hillshade-highlight-color"]),"hillshade-accent-color":new Cd(Gb.paint_hillshade["hillshade-accent-color"])})},Aj=function(c){function x(F){c.call(this,F,Wf)}return c&&(x.__proto__=c),(x.prototype=Object.create(c&&c.prototype)).constructor=x,x.prototype.hasOffscreenPass=function(){return 0!==
this.paint.get("hillshade-exaggeration")&&"none"!==this.visibility},x}(ch),cj=Rd([{name:"a_pos",components:2,type:"Int16"}],4).members;Mc.deviation=function(c,x,F,V){var fa=x&&x.length,ra=Math.abs(Fj(c,0,fa?x[0]*F:c.length,F));if(fa){fa=0;for(var ya=x.length;fa<ya;fa++)ra-=Math.abs(Fj(c,x[fa]*F,fa<ya-1?x[fa+1]*F:c.length,F))}for(fa=x=0;fa<V.length;fa+=3){ya=V[fa]*F;var Ha=V[fa+1]*F,Pa=V[fa+2]*F;x+=Math.abs((c[ya]-c[Pa])*(c[Ha+1]-c[ya+1])-(c[ya]-c[Ha])*(c[Pa+1]-c[ya+1]))}return 0===ra&&0===x?0:Math.abs((x-
ra)/ra)};Mc.flatten=function(c){for(var x=c[0][0].length,F={vertices:[],holes:[],dimensions:x},V=0,fa=0;fa<c.length;fa++){for(var ra=0;ra<c[fa].length;ra++)for(var ya=0;ya<x;ya++)F.vertices.push(c[fa][ra][ya]);0<fa&&F.holes.push(V+=c[fa-1].length)}return F};Mc.default=Mc;var Yf=function(c){this.zoom=c.zoom;this.overscaling=c.overscaling;this.layers=c.layers;this.layerIds=this.layers.map(function(x){return x.id});this.index=c.index;this.hasPattern=!1;this.patternFeatures=[];this.layoutVertexArray=
new Oi;this.indexArray=new ci;this.indexArray2=new Ki;this.programConfigurations=new sh(cj,c.layers,c.zoom);this.segments=new zf;this.segments2=new zf;this.stateDependentLayerIds=this.layers.filter(function(x){return x.isStateDependent()}).map(function(x){return x.id})};Yf.prototype.populate=function(c,x,F){this.hasPattern=pi("fill",this.layers,x);for(var V=this.layers[0].layout.get("fill-sort-key"),fa=[],ra=0;ra<c.length;ra+=1){var ya=c[ra],Ha=ya.feature,Pa=ya.id,Ya=ya.index;ya=ya.sourceLayerIndex;
var hb=this.layers[0]._featureFilter.needGeometry,Ab={type:Ha.type,id:Pa,properties:Ha.properties,geometry:hb?Xd(Ha):[]};this.layers[0]._featureFilter.filter(new Xe(this.zoom),Ab,F)&&(hb||(Ab.geometry=Xd(Ha)),hb=V?V.evaluate(Ab,{},F,x.availableImages):void 0,fa.push({id:Pa,properties:Ha.properties,type:Ha.type,sourceLayerIndex:ya,index:Ya,geometry:Ab.geometry,patterns:{},sortKey:hb}))}V&&fa.sort(function(Fb,Jb){return Fb.sortKey-Jb.sortKey});for(V=0;V<fa.length;V+=1)Ya=fa[V],ra=Ya.geometry,Ha=Ya.index,
Pa=Ya.sourceLayerIndex,this.hasPattern?(Ya=uh("fill",this.layers,Ya,this.zoom,x),this.patternFeatures.push(Ya)):this.addFeature(Ya,ra,Ha,F,{}),x.featureIndex.insert(c[Ha].feature,ra,Ha,Pa,this.index)};Yf.prototype.update=function(c,x,F){this.stateDependentLayers.length&&this.programConfigurations.updatePaintArrays(c,x,this.stateDependentLayers,F)};Yf.prototype.addFeatures=function(c,x,F){c=0;for(var V=this.patternFeatures;c<V.length;c+=1){var fa=V[c];this.addFeature(fa,fa.geometry,fa.index,x,F)}};
Yf.prototype.isEmpty=function(){return 0===this.layoutVertexArray.length};Yf.prototype.uploadPending=function(){return!this.uploaded||this.programConfigurations.needsUpload};Yf.prototype.upload=function(c){this.uploaded||(this.layoutVertexBuffer=c.createVertexBuffer(this.layoutVertexArray,cj),this.indexBuffer=c.createIndexBuffer(this.indexArray),this.indexBuffer2=c.createIndexBuffer(this.indexArray2));this.programConfigurations.upload(c);this.uploaded=!0};Yf.prototype.destroy=function(){this.layoutVertexBuffer&&
(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.indexBuffer2.destroy(),this.programConfigurations.destroy(),this.segments.destroy(),this.segments2.destroy())};Yf.prototype.addFeature=function(c,x,F,V,fa){var ra=0;for(x=cg(x,500);ra<x.length;ra+=1){for(var ya=x[ra],Ha=0,Pa=0,Ya=ya;Pa<Ya.length;Pa+=1)Ha+=Ya[Pa].length;Pa=this.segments.prepareSegment(Ha,this.layoutVertexArray,this.indexArray);Ya=Pa.vertexLength;for(var hb=[],Ab=[],Fb=0,Jb=ya;Fb<Jb.length;Fb+=1){var Rb=Jb[Fb];if(0!==
Rb.length){Rb!==ya[0]&&Ab.push(hb.length/2);var rb=this.segments2.prepareSegment(Rb.length,this.layoutVertexArray,this.indexArray2),zb=rb.vertexLength;this.layoutVertexArray.emplaceBack(Rb[0].x,Rb[0].y);this.indexArray2.emplaceBack(zb+Rb.length-1,zb);hb.push(Rb[0].x);hb.push(Rb[0].y);for(var hc=1;hc<Rb.length;hc++)this.layoutVertexArray.emplaceBack(Rb[hc].x,Rb[hc].y),this.indexArray2.emplaceBack(zb+hc-1,zb+hc),hb.push(Rb[hc].x),hb.push(Rb[hc].y);rb.vertexLength+=Rb.length;rb.primitiveLength+=Rb.length}}ya=
Mc(hb,Ab);for(hb=0;hb<ya.length;hb+=3)this.indexArray.emplaceBack(Ya+ya[hb],Ya+ya[hb+1],Ya+ya[hb+2]);Pa.vertexLength+=Ha;Pa.primitiveLength+=ya.length/3}this.programConfigurations.populatePaintArrays(this.layoutVertexArray.length,c,F,fa,V)};Gc("FillBucket",Yf,{omit:["layers","patternFeatures"]});var Rj=new wg({"fill-sort-key":new ee(Gb.layout_fill["fill-sort-key"])}),fi={paint:new wg({"fill-antialias":new Cd(Gb.paint_fill["fill-antialias"]),"fill-opacity":new ee(Gb.paint_fill["fill-opacity"]),"fill-color":new ee(Gb.paint_fill["fill-color"]),
"fill-outline-color":new ee(Gb.paint_fill["fill-outline-color"]),"fill-translate":new Cd(Gb.paint_fill["fill-translate"]),"fill-translate-anchor":new Cd(Gb.paint_fill["fill-translate-anchor"]),"fill-pattern":new rh(Gb.paint_fill["fill-pattern"])}),layout:Rj},Bj=function(c){function x(F){c.call(this,F,fi)}return c&&(x.__proto__=c),(x.prototype=Object.create(c&&c.prototype)).constructor=x,x.prototype.recalculate=function(F,V){c.prototype.recalculate.call(this,F,V);F=this.paint._values["fill-outline-color"];
"constant"===F.value.kind&&void 0===F.value.value&&(this.paint._values["fill-outline-color"]=this.paint._values["fill-color"])},x.prototype.createBucket=function(F){return new Yf(F)},x.prototype.queryRadius=function(){return Td(this.paint.get("fill-translate"))},x.prototype.queryIntersectsFeature=function(F,V,fa,ra,ya,Ha,Pa){return pf(Ld(F,this.paint.get("fill-translate"),this.paint.get("fill-translate-anchor"),Ha.angle,Pa),ra)},x.prototype.isTileClipped=function(){return!0},x}(ch),Dk=Rd([{name:"a_pos",
components:2,type:"Int16"},{name:"a_normal_ed",components:4,type:"Int16"}],4).members;Ag.types=["Unknown","Point","LineString","Polygon"];Ag.prototype.loadGeometry=function(){var c=this._pbf;c.pos=this._geometry;for(var x,F=c.readVarint()+c.pos,V=1,fa=0,ra=0,ya=0,Ha=[];c.pos<F;)if(0>=fa&&(fa=c.readVarint(),V=7&fa,fa>>=3),fa--,1===V||2===V)ra+=c.readSVarint(),ya+=c.readSVarint(),1===V&&(x&&Ha.push(x),x=[]),x.push(new Ud(ra,ya));else{if(7!==V)throw Error("unknown command "+V);x&&x.push(x[0].clone())}return x&&
Ha.push(x),Ha};Ag.prototype.bbox=function(){var c=this._pbf;c.pos=this._geometry;for(var x=c.readVarint()+c.pos,F=1,V=0,fa=0,ra=0,ya=1/0,Ha=-1/0,Pa=1/0,Ya=-1/0;c.pos<x;)if(0>=V&&(V=c.readVarint(),F=7&V,V>>=3),V--,1===F||2===F)(fa+=c.readSVarint())<ya&&(ya=fa),fa>Ha&&(Ha=fa),(ra+=c.readSVarint())<Pa&&(Pa=ra),ra>Ya&&(Ya=ra);else if(7!==F)throw Error("unknown command "+F);return[ya,Pa,Ha,Ya]};Ag.prototype.toGeoJSON=function(c,x,F){function V(Pa){for(var Ya=0;Ya<Pa.length;Ya++){var hb=Pa[Ya];Pa[Ya]=[360*
(hb.x+ra)/fa-180,360/Math.PI*Math.atan(Math.exp((180-360*(hb.y+ya)/fa)*Math.PI/180))-90]}}var fa=this.extent*Math.pow(2,F),ra=this.extent*c,ya=this.extent*x;x=this.loadGeometry();F=Ag.types[this.type];switch(this.type){case 1:var Ha=[];for(c=0;c<x.length;c++)Ha[c]=x[c][0];V(x=Ha);break;case 2:for(c=0;c<x.length;c++)V(x[c]);break;case 3:for(x=function(Pa){var Ya=Pa.length;if(1>=Ya)return[Pa];for(var hb,Ab,Fb=[],Jb=0;Jb<Ya;Jb++){for(var Rb,rb=Rb=void 0,zb=Pa[Jb],hc=0,vc=0,pc=zb.length,$c=pc-1;vc<pc;$c=
vc++)hc+=((Rb=zb[$c]).x-(rb=zb[vc]).x)*(rb.y+Rb.y);Rb=hc;0!==Rb&&(void 0===Ab&&(Ab=0>Rb),Ab===0>Rb?(hb&&Fb.push(hb),hb=[Pa[Jb]]):hb.push(Pa[Jb]))}return hb&&Fb.push(hb),Fb}(x),c=0;c<x.length;c++)for(Ha=0;Ha<x[c].length;Ha++)V(x[c][Ha])}1===x.length?x=x[0]:F="Multi"+F;c={type:"Feature",geometry:{type:F,coordinates:x},properties:this.properties};return"id"in this&&(c.id=this.id),c};var Sj=kj;kj.prototype.feature=function(c){if(0>c||c>=this._features.length)throw Error("feature index out of bounds");
this._pbf.pos=this._features[c];c=this._pbf.readVarint()+this._pbf.pos;return new Ag(this._pbf,c,this.extent,this._keys,this._values)};var oh={VectorTile:function(c,x){this.layers=c.readFields(Lh,{},x)},VectorTileFeature:Ag,VectorTileLayer:Sj},dj=oh.VectorTileFeature.types,ik=Math.pow(2,13),Gg=function(c){this.zoom=c.zoom;this.overscaling=c.overscaling;this.layers=c.layers;this.layerIds=this.layers.map(function(x){return x.id});this.index=c.index;this.hasPattern=!1;this.layoutVertexArray=new Jh;this.indexArray=
new ci;this.programConfigurations=new sh(Dk,c.layers,c.zoom);this.segments=new zf;this.stateDependentLayerIds=this.layers.filter(function(x){return x.isStateDependent()}).map(function(x){return x.id})};Gg.prototype.populate=function(c,x,F){this.features=[];this.hasPattern=pi("fill-extrusion",this.layers,x);for(var V=0;V<c.length;V+=1){var fa=c[V],ra=fa.feature,ya=fa.id,Ha=fa.index;fa=fa.sourceLayerIndex;var Pa=this.layers[0]._featureFilter.needGeometry,Ya={type:ra.type,id:ya,properties:ra.properties,
geometry:Pa?Xd(ra):[]};this.layers[0]._featureFilter.filter(new Xe(this.zoom),Ya,F)&&(ya={id:ya,sourceLayerIndex:fa,index:Ha,geometry:Pa?Ya.geometry:Xd(ra),properties:ra.properties,type:ra.type,patterns:{}},void 0!==ra.id&&(ya.id=ra.id),this.hasPattern?this.features.push(uh("fill-extrusion",this.layers,ya,this.zoom,x)):this.addFeature(ya,ya.geometry,Ha,F,{}),x.featureIndex.insert(ra,ya.geometry,Ha,fa,this.index,!0))}};Gg.prototype.addFeatures=function(c,x,F){c=0;for(var V=this.features;c<V.length;c+=
1){var fa=V[c];this.addFeature(fa,fa.geometry,fa.index,x,F)}};Gg.prototype.update=function(c,x,F){this.stateDependentLayers.length&&this.programConfigurations.updatePaintArrays(c,x,this.stateDependentLayers,F)};Gg.prototype.isEmpty=function(){return 0===this.layoutVertexArray.length};Gg.prototype.uploadPending=function(){return!this.uploaded||this.programConfigurations.needsUpload};Gg.prototype.upload=function(c){this.uploaded||(this.layoutVertexBuffer=c.createVertexBuffer(this.layoutVertexArray,
Dk),this.indexBuffer=c.createIndexBuffer(this.indexArray));this.programConfigurations.upload(c);this.uploaded=!0};Gg.prototype.destroy=function(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.programConfigurations.destroy(),this.segments.destroy())};Gg.prototype.addFeature=function(c,x,F,V,fa){var ra=0;for(x=cg(x,500);ra<x.length;ra+=1){for(var ya=x[ra],Ha=0,Pa=0,Ya=ya;Pa<Ya.length;Pa+=1)Ha+=Ya[Pa].length;Pa=this.segments.prepareSegment(4,this.layoutVertexArray,
this.indexArray);Ya=0;for(var hb=ya;Ya<hb.length;Ya+=1){var Ab=hb[Ya];if(0!==Ab.length&&!((vc=Ab).every(function(pc){return 0>pc.x})||vc.every(function(pc){return 8192<pc.x})||vc.every(function(pc){return 0>pc.y})||vc.every(function(pc){return 8192<pc.y})))for(var Fb=0,Jb=0;Jb<Ab.length;Jb++){var Rb=Ab[Jb];if(1<=Jb){var rb=Ab[Jb-1];if(!(Rb.x===rb.x&&(0>Rb.x||8192<Rb.x)||Rb.y===rb.y&&(0>Rb.y||8192<Rb.y))){Pa.vertexLength+4>zf.MAX_VERTEX_ARRAY_LENGTH&&(Pa=this.segments.prepareSegment(4,this.layoutVertexArray,
this.indexArray));var zb=Rb.sub(rb)._perp()._unit(),hc=rb.dist(Rb);32768<Fb+hc&&(Fb=0);qi(this.layoutVertexArray,Rb.x,Rb.y,zb.x,zb.y,0,0,Fb);qi(this.layoutVertexArray,Rb.x,Rb.y,zb.x,zb.y,0,1,Fb);qi(this.layoutVertexArray,rb.x,rb.y,zb.x,zb.y,0,0,Fb+=hc);qi(this.layoutVertexArray,rb.x,rb.y,zb.x,zb.y,0,1,Fb);Rb=Pa.vertexLength;this.indexArray.emplaceBack(Rb,Rb+2,Rb+1);this.indexArray.emplaceBack(Rb+1,Rb+2,Rb+3);Pa.vertexLength+=4;Pa.primitiveLength+=2}}}}if(Pa.vertexLength+Ha>zf.MAX_VERTEX_ARRAY_LENGTH&&
(Pa=this.segments.prepareSegment(Ha,this.layoutVertexArray,this.indexArray)),"Polygon"===dj[c.type]){hb=[];Ab=[];Ya=Pa.vertexLength;Fb=0;for(Jb=ya;Fb<Jb.length;Fb+=1)if(Rb=Jb[Fb],0!==Rb.length)for(Rb!==ya[0]&&Ab.push(hb.length/2),rb=0;rb<Rb.length;rb++)zb=Rb[rb],qi(this.layoutVertexArray,zb.x,zb.y,0,0,1,1,0),hb.push(zb.x),hb.push(zb.y);ya=Mc(hb,Ab);for(hb=0;hb<ya.length;hb+=3)this.indexArray.emplaceBack(Ya+ya[hb],Ya+ya[hb+2],Ya+ya[hb+1]);Pa.primitiveLength+=ya.length/3;Pa.vertexLength+=Ha}}var vc;
this.programConfigurations.populatePaintArrays(this.layoutVertexArray.length,c,F,fa,V)};Gc("FillExtrusionBucket",Gg,{omit:["layers","features"]});var Eh={paint:new wg({"fill-extrusion-opacity":new Cd(Gb["paint_fill-extrusion"]["fill-extrusion-opacity"]),"fill-extrusion-color":new ee(Gb["paint_fill-extrusion"]["fill-extrusion-color"]),"fill-extrusion-translate":new Cd(Gb["paint_fill-extrusion"]["fill-extrusion-translate"]),"fill-extrusion-translate-anchor":new Cd(Gb["paint_fill-extrusion"]["fill-extrusion-translate-anchor"]),
"fill-extrusion-pattern":new rh(Gb["paint_fill-extrusion"]["fill-extrusion-pattern"]),"fill-extrusion-height":new ee(Gb["paint_fill-extrusion"]["fill-extrusion-height"]),"fill-extrusion-base":new ee(Gb["paint_fill-extrusion"]["fill-extrusion-base"]),"fill-extrusion-vertical-gradient":new Cd(Gb["paint_fill-extrusion"]["fill-extrusion-vertical-gradient"])})},jk=function(c){function x(F){c.call(this,F,Eh)}return c&&(x.__proto__=c),(x.prototype=Object.create(c&&c.prototype)).constructor=x,x.prototype.createBucket=
function(F){return new Gg(F)},x.prototype.queryRadius=function(){return Td(this.paint.get("fill-extrusion-translate"))},x.prototype.is3D=function(){return!0},x.prototype.queryIntersectsFeature=function(F,V,fa,ra,ya,Ha,Pa,Ya){ya=Ld(F,this.paint.get("fill-extrusion-translate"),this.paint.get("fill-extrusion-translate-anchor"),Ha.angle,Pa);F=this.paint.get("fill-extrusion-height").evaluate(V,fa);V=this.paint.get("fill-extrusion-base").evaluate(V,fa);fa=function(hb,Ab,Fb,Jb){Fb=[];for(Jb=0;Jb<hb.length;Jb+=
1){var Rb=hb[Jb];Rb=[Rb.x,Rb.y,0,1];pe(Rb,Rb,Ab);Fb.push(new Ud(Rb[0]/Rb[3],Rb[1]/Rb[3]))}return Fb}(ya,Ya);ra=function(hb,Ab,Fb,Jb){var Rb=[],rb=[],zb=Jb[8]*Ab,hc=Jb[9]*Ab,vc=Jb[10]*Ab;Ab*=Jb[11];var pc=Jb[8]*Fb,$c=Jb[9]*Fb,fd=Jb[10]*Fb;Fb*=Jb[11];for(var nd=0;nd<hb.length;nd+=1){for(var xd=[],vd=[],Vd=0,he=hb[nd];Vd<he.length;Vd+=1){var Wd=he[Vd],ce=Wd.x,ve=Wd.y;Wd=Jb[0]*ce+Jb[4]*ve+Jb[12];var Md=Jb[1]*ce+Jb[5]*ve+Jb[13],Id=Jb[2]*ce+Jb[6]*ve+Jb[14],Pd=Jb[3]*ce+Jb[7]*ve+Jb[15];ce=Id+vc;ve=Pd+Ab;
var Me=Wd+pc,hf=Md+$c;Id+=fd;Pd+=Fb;Wd=new Ud((Wd+zb)/ve,(Md+hc)/ve);Wd.z=ce/ve;xd.push(Wd);Wd=new Ud(Me/Pd,hf/Pd);Wd.z=Id/Pd;vd.push(Wd)}Rb.push(xd);rb.push(vd)}return[Rb,rb]}(ra,V,F,Ya);return function(hb,Ab,Fb){var Jb=1/0;pf(Fb,Ab)&&(Jb=Nh(Fb,Ab[0]));for(var Rb=0;Rb<Ab.length;Rb++)for(var rb=Ab[Rb],zb=hb[Rb],hc=0;hc<rb.length-1;hc++){var vc=rb[hc];vc=[vc,rb[hc+1],zb[hc+1],zb[hc],vc];kf(Fb,vc)&&(Jb=Math.min(Jb,Nh(Fb,vc)))}return Jb!==1/0&&Jb}(ra[0],ra[1],fa)},x}(ch),R=Rd([{name:"a_pos_normal",components:2,
type:"Int16"},{name:"a_data",components:4,type:"Uint8"}],4).members,ha=oh.VectorTileFeature.types,ta=Math.cos(Math.PI/180*37.5),za=Math.pow(2,14)/.5,Aa=function(c){this.zoom=c.zoom;this.overscaling=c.overscaling;this.layers=c.layers;this.layerIds=this.layers.map(function(x){return x.id});this.index=c.index;this.hasPattern=!1;this.patternFeatures=[];this.layoutVertexArray=new Of;this.indexArray=new ci;this.programConfigurations=new sh(R,c.layers,c.zoom);this.segments=new zf;this.stateDependentLayerIds=
this.layers.filter(function(x){return x.isStateDependent()}).map(function(x){return x.id})};Aa.prototype.populate=function(c,x,F){this.hasPattern=pi("line",this.layers,x);for(var V=this.layers[0].layout.get("line-sort-key"),fa=[],ra=0;ra<c.length;ra+=1){var ya=c[ra],Ha=ya.feature,Pa=ya.id,Ya=ya.index;ya=ya.sourceLayerIndex;var hb=this.layers[0]._featureFilter.needGeometry,Ab={type:Ha.type,id:Pa,properties:Ha.properties,geometry:hb?Xd(Ha):[]};this.layers[0]._featureFilter.filter(new Xe(this.zoom),
Ab,F)&&(hb||(Ab.geometry=Xd(Ha)),hb=V?V.evaluate(Ab,{},F):void 0,fa.push({id:Pa,properties:Ha.properties,type:Ha.type,sourceLayerIndex:ya,index:Ya,geometry:Ab.geometry,patterns:{},sortKey:hb}))}V&&fa.sort(function(Fb,Jb){return Fb.sortKey-Jb.sortKey});for(V=0;V<fa.length;V+=1)Ya=fa[V],ra=Ya.geometry,Ha=Ya.index,Pa=Ya.sourceLayerIndex,this.hasPattern?(Ya=uh("line",this.layers,Ya,this.zoom,x),this.patternFeatures.push(Ya)):this.addFeature(Ya,ra,Ha,F,{}),x.featureIndex.insert(c[Ha].feature,ra,Ha,Pa,
this.index)};Aa.prototype.update=function(c,x,F){this.stateDependentLayers.length&&this.programConfigurations.updatePaintArrays(c,x,this.stateDependentLayers,F)};Aa.prototype.addFeatures=function(c,x,F){c=0;for(var V=this.patternFeatures;c<V.length;c+=1){var fa=V[c];this.addFeature(fa,fa.geometry,fa.index,x,F)}};Aa.prototype.isEmpty=function(){return 0===this.layoutVertexArray.length};Aa.prototype.uploadPending=function(){return!this.uploaded||this.programConfigurations.needsUpload};Aa.prototype.upload=
function(c){this.uploaded||(this.layoutVertexBuffer=c.createVertexBuffer(this.layoutVertexArray,R),this.indexBuffer=c.createIndexBuffer(this.indexArray));this.programConfigurations.upload(c);this.uploaded=!0};Aa.prototype.destroy=function(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.programConfigurations.destroy(),this.segments.destroy())};Aa.prototype.addFeature=function(c,x,F,V,fa){var ra=this.layers[0].layout,ya=ra.get("line-join").evaluate(c,{}),
Ha=ra.get("line-cap"),Pa=ra.get("line-miter-limit");ra=ra.get("line-round-limit");for(var Ya=0;Ya<x.length;Ya+=1)this.addLine(x[Ya],c,ya,Ha,Pa,ra);this.programConfigurations.populatePaintArrays(this.layoutVertexArray.length,c,F,fa,V)};Aa.prototype.addLine=function(c,x,F,V,fa,ra){if(this.distance=0,this.scaledDistance=0,this.totalDistance=0,x.properties&&x.properties.hasOwnProperty("mapbox_clip_start")&&x.properties.hasOwnProperty("mapbox_clip_end")){this.clipStart=+x.properties.mapbox_clip_start;
this.clipEnd=+x.properties.mapbox_clip_end;for(var ya=0;ya<c.length-1;ya++)this.totalDistance+=c[ya].dist(c[ya+1]);this.updateScaledDistance()}x="Polygon"===ha[x.type];for(ya=c.length;2<=ya&&c[ya-1].equals(c[ya-2]);)ya--;for(var Ha=0;Ha<ya-1&&c[Ha].equals(c[Ha+1]);)Ha++;if(!(ya<(x?3:2))){"bevel"===F&&(fa=1.05);var Pa,Ya=16>=this.overscaling?122880/(512*this.overscaling):0,hb=this.segments.prepareSegment(10*ya,this.layoutVertexArray,this.indexArray),Ab=void 0,Fb=void 0,Jb=void 0,Rb=void 0;this.e1=
this.e2=-1;x&&(Rb=c[Ha].sub(Pa=c[ya-2])._unit()._perp());for(var rb=Ha;rb<ya;rb++)if(!(Fb=rb===ya-1?x?c[Ha+1]:void 0:c[rb+1])||!c[rb].equals(Fb)){Rb&&(Jb=Rb);Pa&&(Ab=Pa);Pa=c[rb];Rb=Fb?Fb.sub(Pa)._unit()._perp():Jb;var zb=(Jb=Jb||Rb).add(Rb);0===zb.x&&0===zb.y||zb._unit();var hc=Jb.x*Rb.x+Jb.y*Rb.y,vc=zb.x*Rb.x+zb.y*Rb.y,pc=0!==vc?1/vc:1/0,$c=2*Math.sqrt(2-2*vc);vc=vc<ta&&Ab&&Fb;var fd=0<Jb.x*Rb.y-Jb.y*Rb.x;if(vc&&rb>Ha){var nd=Pa.dist(Ab);nd>2*Ya&&(nd=Pa.sub(Pa.sub(Ab)._mult(Ya/nd)._round()),this.updateDistance(Ab,
nd),this.addCurrentVertex(nd,Jb,0,0,hb),Ab=nd)}var xd=Ab&&Fb;nd=xd?F:x?"butt":V;if(xd&&"round"===nd&&(pc<ra?nd="miter":2>=pc&&(nd="fakeround")),"miter"===nd&&pc>fa&&(nd="bevel"),"bevel"===nd&&(2<pc&&(nd="flipbevel"),pc<fa&&(nd="miter")),Ab&&this.updateDistance(Ab,Pa),"miter"===nd)zb._mult(pc),this.addCurrentVertex(Pa,zb,0,0,hb);else if("flipbevel"===nd)100<pc?zb=Rb.mult(-1):(hc=pc*Jb.add(Rb).mag()/Jb.sub(Rb).mag(),zb._perp()._mult(hc*(fd?-1:1))),this.addCurrentVertex(Pa,zb,0,0,hb),this.addCurrentVertex(Pa,
zb.mult(-1),0,0,hb);else if("bevel"===nd||"fakeround"===nd){pc=-Math.sqrt(pc*pc-1);zb=fd?pc:0;pc=fd?0:pc;if(Ab&&this.addCurrentVertex(Pa,Jb,zb,pc,hb),"fakeround"===nd)for($c=Math.round(180*$c/Math.PI/20),nd=1;nd<$c;nd++){xd=nd/$c;if(.5!==xd){var vd=xd-.5;xd+=xd*vd*(xd-1)*((1.0904+hc*(hc*(3.55645-1.43519*hc)-3.2452))*vd*vd+(.848013+hc*(.215638*hc-1.06021)))}xd=Rb.sub(Jb)._mult(xd)._add(Jb)._unit()._mult(fd?-1:1);this.addHalfVertex(Pa,xd.x,xd.y,!1,fd,0,hb)}Fb&&this.addCurrentVertex(Pa,Rb,-zb,-pc,hb)}else"butt"===
nd?this.addCurrentVertex(Pa,zb,0,0,hb):"square"===nd?(hc=Ab?1:-1,this.addCurrentVertex(Pa,zb,hc,hc,hb)):"round"===nd&&(Ab&&(this.addCurrentVertex(Pa,Jb,0,0,hb),this.addCurrentVertex(Pa,Jb,1,1,hb,!0)),Fb&&(this.addCurrentVertex(Pa,Rb,-1,-1,hb,!0),this.addCurrentVertex(Pa,Rb,0,0,hb)));vc&&rb<ya-1&&(vc=Pa.dist(Fb),vc>2*Ya&&(vc=Pa.add(Fb.sub(Pa)._mult(Ya/vc)._round()),this.updateDistance(Pa,vc),this.addCurrentVertex(vc,Rb,0,0,hb),Pa=vc))}}};Aa.prototype.addCurrentVertex=function(c,x,F,V,fa,ra){void 0===
ra&&(ra=!1);var ya=x.y*V-x.x,Ha=-x.y-x.x*V;this.addHalfVertex(c,x.x+x.y*F,x.y-x.x*F,ra,!1,F,fa);this.addHalfVertex(c,ya,Ha,ra,!0,-V,fa);this.distance>za/2&&0===this.totalDistance&&(this.distance=0,this.addCurrentVertex(c,x,F,V,fa,ra))};Aa.prototype.addHalfVertex=function(c,x,F,V,fa,ra,ya){var Ha=.5*this.scaledDistance;this.layoutVertexArray.emplaceBack((c.x<<1)+(V?1:0),(c.y<<1)+(fa?1:0),Math.round(63*x)+128,Math.round(63*F)+128,1+(0===ra?0:0>ra?-1:1)|(63&Ha)<<2,Ha>>6);c=ya.vertexLength++;0<=this.e1&&
0<=this.e2&&(this.indexArray.emplaceBack(this.e1,this.e2,c),ya.primitiveLength++);fa?this.e2=c:this.e1=c};Aa.prototype.updateScaledDistance=function(){this.scaledDistance=0<this.totalDistance?(this.clipStart+(this.clipEnd-this.clipStart)*this.distance/this.totalDistance)*(za-1):this.distance};Aa.prototype.updateDistance=function(c,x){this.distance+=c.dist(x);this.updateScaledDistance()};Gc("LineBucket",Aa,{omit:["layers","patternFeatures"]});var Da=new wg({"line-cap":new Cd(Gb.layout_line["line-cap"]),
"line-join":new ee(Gb.layout_line["line-join"]),"line-miter-limit":new Cd(Gb.layout_line["line-miter-limit"]),"line-round-limit":new Cd(Gb.layout_line["line-round-limit"]),"line-sort-key":new ee(Gb.layout_line["line-sort-key"])}),Qa={paint:new wg({"line-opacity":new ee(Gb.paint_line["line-opacity"]),"line-color":new ee(Gb.paint_line["line-color"]),"line-translate":new Cd(Gb.paint_line["line-translate"]),"line-translate-anchor":new Cd(Gb.paint_line["line-translate-anchor"]),"line-width":new ee(Gb.paint_line["line-width"]),
"line-gap-width":new ee(Gb.paint_line["line-gap-width"]),"line-offset":new ee(Gb.paint_line["line-offset"]),"line-blur":new ee(Gb.paint_line["line-blur"]),"line-dasharray":new Ch(Gb.paint_line["line-dasharray"]),"line-pattern":new rh(Gb.paint_line["line-pattern"]),"line-gradient":new Ji(Gb.paint_line["line-gradient"])}),layout:Da},Ja=new (function(c){function x(){c.apply(this,arguments)}return c&&(x.__proto__=c),(x.prototype=Object.create(c&&c.prototype)).constructor=x,x.prototype.possiblyEvaluate=
function(F,V){return V=new Xe(Math.floor(V.zoom),{now:V.now,fadeDuration:V.fadeDuration,zoomHistory:V.zoomHistory,transition:V.transition}),c.prototype.possiblyEvaluate.call(this,F,V)},x.prototype.evaluate=function(F,V,fa,ra){return V=f({},V,{zoom:Math.floor(V.zoom)}),c.prototype.evaluate.call(this,F,V,fa,ra)},x}(ee))(Qa.paint.properties["line-width"].specification);Ja.useIntegerZoom=!0;var Ra=function(c){function x(F){c.call(this,F,Qa)}return c&&(x.__proto__=c),(x.prototype=Object.create(c&&c.prototype)).constructor=
x,x.prototype._handleSpecialPaintPropertyUpdate=function(F){"line-gradient"===F&&this._updateGradient()},x.prototype._updateGradient=function(){this.gradient=Lc(this._transitionablePaint._values["line-gradient"].value.expression,"lineProgress");this.gradientTexture=null},x.prototype.recalculate=function(F,V){c.prototype.recalculate.call(this,F,V);this.paint._values["line-floorwidth"]=Ja.possiblyEvaluate(this._transitioningPaint._values["line-width"].value,F)},x.prototype.createBucket=function(F){return new Aa(F)},
x.prototype.queryRadius=function(F){var V=si(Od("line-width",this,F),Od("line-gap-width",this,F));F=Od("line-offset",this,F);return V/2+Math.abs(F)+Td(this.paint.get("line-translate"))},x.prototype.queryIntersectsFeature=function(F,V,fa,ra,ya,Ha,Pa){F=Ld(F,this.paint.get("line-translate"),this.paint.get("line-translate-anchor"),Ha.angle,Pa);ya=Pa/2*si(this.paint.get("line-width").evaluate(V,fa),this.paint.get("line-gap-width").evaluate(V,fa));V=this.paint.get("line-offset").evaluate(V,fa);return V&&
(ra=function(Ya,hb){for(var Ab=[],Fb=new Ud(0,0),Jb=0;Jb<Ya.length;Jb++){for(var Rb=Ya[Jb],rb=[],zb=0;zb<Rb.length;zb++){var hc=Rb[zb],vc=Rb[zb+1],pc=0===zb?Fb:hc.sub(Rb[zb-1])._unit()._perp();vc=zb===Rb.length-1?Fb:vc.sub(hc)._unit()._perp();pc=pc._add(vc)._unit();pc._mult(1/(pc.x*vc.x+pc.y*vc.y));rb.push(pc._mult(hb)._add(hc))}Ab.push(rb)}return Ab}(ra,V*Pa)),function(Ya,hb,Ab){for(var Fb=0;Fb<hb.length;Fb++){var Jb=hb[Fb];if(3<=Ya.length)for(var Rb=0;Rb<Jb.length;Rb++)if(kd(Ya,Jb[Rb]))return!0;
a:{Rb=Ya;var rb=Ab;if(1<Rb.length){if(ff(Rb,Jb)){Rb=!0;break a}for(var zb=0;zb<Jb.length;zb++)if(Vb(Jb[zb],Rb,rb)){Rb=!0;break a}}for(zb=0;zb<Rb.length;zb++)if(Vb(Rb[zb],Jb,rb)){Rb=!0;break a}Rb=!1}if(Rb)return!0}return!1}(F,ra,ya)},x.prototype.isTileClipped=function(){return!0},x}(ch),Wa=Rd([{name:"a_pos_offset",components:4,type:"Int16"},{name:"a_data",components:4,type:"Uint16"},{name:"a_pixeloffset",components:4,type:"Int16"}],4),db=Rd([{name:"a_projected_pos",components:3,type:"Float32"}],4),
ob=(Rd([{name:"a_fade_opacity",components:1,type:"Uint32"}],4),Rd([{name:"a_placed",components:2,type:"Uint8"},{name:"a_shift",components:2,type:"Float32"}])),xb=(Rd([{type:"Int16",name:"anchorPointX"},{type:"Int16",name:"anchorPointY"},{type:"Int16",name:"x1"},{type:"Int16",name:"y1"},{type:"Int16",name:"x2"},{type:"Int16",name:"y2"},{type:"Uint32",name:"featureIndex"},{type:"Uint16",name:"sourceLayerIndex"},{type:"Uint16",name:"bucketIndex"}]),Rd([{name:"a_pos",components:2,type:"Int16"},{name:"a_anchor_pos",
components:2,type:"Int16"},{name:"a_extrude",components:2,type:"Int16"}],4)),Cb=Rd([{name:"a_pos",components:2,type:"Float32"},{name:"a_radius",components:1,type:"Float32"},{name:"a_flags",components:2,type:"Int16"}],4);Rd([{name:"triangle",components:3,type:"Uint16"}]);Rd([{type:"Int16",name:"anchorX"},{type:"Int16",name:"anchorY"},{type:"Uint16",name:"glyphStartIndex"},{type:"Uint16",name:"numGlyphs"},{type:"Uint32",name:"vertexStartIndex"},{type:"Uint32",name:"lineStartIndex"},{type:"Uint32",name:"lineLength"},
{type:"Uint16",name:"segment"},{type:"Uint16",name:"lowerSize"},{type:"Uint16",name:"upperSize"},{type:"Float32",name:"lineOffsetX"},{type:"Float32",name:"lineOffsetY"},{type:"Uint8",name:"writingMode"},{type:"Uint8",name:"placedOrientation"},{type:"Uint8",name:"hidden"},{type:"Uint32",name:"crossTileID"},{type:"Int16",name:"associatedIconIndex"}]);Rd([{type:"Int16",name:"anchorX"},{type:"Int16",name:"anchorY"},{type:"Int16",name:"rightJustifiedTextSymbolIndex"},{type:"Int16",name:"centerJustifiedTextSymbolIndex"},
{type:"Int16",name:"leftJustifiedTextSymbolIndex"},{type:"Int16",name:"verticalPlacedTextSymbolIndex"},{type:"Int16",name:"placedIconSymbolIndex"},{type:"Int16",name:"verticalPlacedIconSymbolIndex"},{type:"Uint16",name:"key"},{type:"Uint16",name:"textBoxStartIndex"},{type:"Uint16",name:"textBoxEndIndex"},{type:"Uint16",name:"verticalTextBoxStartIndex"},{type:"Uint16",name:"verticalTextBoxEndIndex"},{type:"Uint16",name:"iconBoxStartIndex"},{type:"Uint16",name:"iconBoxEndIndex"},{type:"Uint16",name:"verticalIconBoxStartIndex"},
{type:"Uint16",name:"verticalIconBoxEndIndex"},{type:"Uint16",name:"featureIndex"},{type:"Uint16",name:"numHorizontalGlyphVertices"},{type:"Uint16",name:"numVerticalGlyphVertices"},{type:"Uint16",name:"numIconVertices"},{type:"Uint16",name:"numVerticalIconVertices"},{type:"Uint16",name:"useRuntimeCollisionCircles"},{type:"Uint32",name:"crossTileID"},{type:"Float32",name:"textBoxScale"},{type:"Float32",components:2,name:"textOffset"},{type:"Float32",name:"collisionCircleDiameter"}]);Rd([{type:"Float32",
name:"offsetX"}]);Rd([{type:"Int16",name:"x"},{type:"Int16",name:"y"},{type:"Int16",name:"tileUnitDistanceFromAnchor"}]);var Eb={"!":"","#":"",$:"","%":"","\x26":"","(":"",")":"","*":"","+":"",",":"","-":"",".":"","/":"",":":"",";":"","\x3c":"","\x3d":"","\x3e":"","?":"","@":"","[":"","\\":"","]":"","^":"",_:"","`":"","{":"","|":"","}":"","~":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"",
"":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":""},Qb=function(c,x,F,V,fa){var ra=8*fa-V-1;var ya=(1<<ra)-1,Ha=ya>>1,Pa=-7;fa=F?fa-1:0;var Ya=F?-1:1,hb=c[x+fa];fa+=Ya;F=hb&(1<<-Pa)-1;hb>>=-Pa;for(Pa+=ra;0<Pa;F=256*F+c[x+fa],fa+=Ya,Pa-=8);ra=F&(1<<-Pa)-1;F>>=
-Pa;for(Pa+=V;0<Pa;ra=256*ra+c[x+fa],fa+=Ya,Pa-=8);if(0===F)F=1-Ha;else{if(F===ya)return ra?NaN:1/0*(hb?-1:1);ra+=Math.pow(2,V);F-=Ha}return(hb?-1:1)*ra*Math.pow(2,F-V)},Xb=function(c,x,F,V,fa,ra){var ya,Ha,Pa,Ya=8*ra-fa-1,hb=(1<<Ya)-1,Ab=hb>>1,Fb=23===fa?Math.pow(2,-24)-Math.pow(2,-77):0;ra=V?0:ra-1;V=V?1:-1;var Jb=0>x||0===x&&0>1/x?1:0;x=Math.abs(x);for(isNaN(x)||x===1/0?(Ha=isNaN(x)?1:0,ya=hb):(ya=Math.floor(Math.log(x)/Math.LN2),1>x*(Pa=Math.pow(2,-ya))&&(ya--,Pa*=2),2<=(x+=1<=ya+Ab?Fb/Pa:Fb*
Math.pow(2,1-Ab))*Pa&&(ya++,Pa/=2),ya+Ab>=hb?(Ha=0,ya=hb):1<=ya+Ab?(Ha=(x*Pa-1)*Math.pow(2,fa),ya+=Ab):(Ha=x*Math.pow(2,Ab-1)*Math.pow(2,fa),ya=0));8<=fa;c[F+ra]=255&Ha,ra+=V,Ha/=256,fa-=8);ya=ya<<fa|Ha;for(Ya+=fa;0<Ya;c[F+ra]=255&ya,ra+=V,ya/=256,Ya-=8);c[F+ra-V]|=128*Jb};He.Varint=0;He.Fixed64=1;He.Bytes=2;He.Fixed32=5;var fc="undefined"==typeof TextDecoder?null:new TextDecoder("utf8");He.prototype={destroy:function(){this.buf=null},readFields:function(c,x,F){for(F=F||this.length;this.pos<F;){var V=
this.readVarint(),fa=V>>3,ra=this.pos;this.type=7&V;c(fa,x,this);this.pos===ra&&this.skip(V)}return x},readMessage:function(c,x){return this.readFields(c,x,this.readVarint()+this.pos)},readFixed32:function(){var c=Qh(this.buf,this.pos);return this.pos+=4,c},readSFixed32:function(){var c=Bg(this.buf,this.pos);return this.pos+=4,c},readFixed64:function(){var c=Qh(this.buf,this.pos)+4294967296*Qh(this.buf,this.pos+4);return this.pos+=8,c},readSFixed64:function(){var c=Qh(this.buf,this.pos)+4294967296*
Bg(this.buf,this.pos+4);return this.pos+=8,c},readFloat:function(){var c=Qb(this.buf,this.pos,!0,23,4);return this.pos+=4,c},readDouble:function(){var c=Qb(this.buf,this.pos,!0,52,8);return this.pos+=8,c},readVarint:function(c){var x,F=this.buf;var V=127&(x=F[this.pos++]);if(128>x)c=V;else if(V|=(127&(x=F[this.pos++]))<<7,128>x)c=V;else if(V|=(127&(x=F[this.pos++]))<<14,128>x)c=V;else if(V|=(127&(x=F[this.pos++]))<<21,128>x)c=V;else{V|=(15&F[this.pos])<<28;var fa,ra;x=this.buf;if((fa=(112&(ra=x[this.pos++]))>>
4,128>ra)||(fa|=(127&(ra=x[this.pos++]))<<3,128>ra)||(fa|=(127&(ra=x[this.pos++]))<<10,128>ra)||(fa|=(127&(ra=x[this.pos++]))<<17,128>ra)||(fa|=(127&(ra=x[this.pos++]))<<24,128>ra)||(fa|=(1&(ra=x[this.pos++]))<<31,128>ra))c=c?4294967296*fa+(V>>>0):4294967296*(fa>>>0)+(V>>>0);else throw Error("Expected varint not more than 10 bytes");}return c},readVarint64:function(){return this.readVarint(!0)},readSVarint:function(){var c=this.readVarint();return 1==c%2?(c+1)/-2:c/2},readBoolean:function(){return!!this.readVarint()},
readString:function(){var c=this.readVarint()+this.pos,x=this.pos;this.pos=c;if(12<=c-x&&fc)c=fc.decode(this.buf.subarray(x,c));else{for(var F=this.buf,V="";x<c;){var fa,ra,ya,Ha=F[x],Pa=null,Ya=239<Ha?4:223<Ha?3:191<Ha?2:1;if(x+Ya>c)break;1===Ya?128>Ha&&(Pa=Ha):2===Ya?128==(192&(fa=F[x+1]))&&127>=(Pa=(31&Ha)<<6|63&fa)&&(Pa=null):3===Ya?(ra=F[x+2],128==(192&(fa=F[x+1]))&&128==(192&ra)&&(2047>=(Pa=(15&Ha)<<12|(63&fa)<<6|63&ra)||55296<=Pa&&57343>=Pa)&&(Pa=null)):4===Ya&&(ra=F[x+2],ya=F[x+3],128==(192&
(fa=F[x+1]))&&128==(192&ra)&&128==(192&ya)&&(65535>=(Pa=(15&Ha)<<18|(63&fa)<<12|(63&ra)<<6|63&ya)||1114112<=Pa)&&(Pa=null));null===Pa?(Pa=65533,Ya=1):65535<Pa&&(Pa-=65536,V+=String.fromCharCode(Pa>>>10&1023|55296),Pa=56320|1023&Pa);V+=String.fromCharCode(Pa);x+=Ya}c=V}return c},readBytes:function(){var c=this.readVarint()+this.pos,x=this.buf.subarray(this.pos,c);return this.pos=c,x},readPackedVarint:function(c,x){if(this.type!==He.Bytes)return c.push(this.readVarint(x));var F=mg(this);for(c=c||[];this.pos<
F;)c.push(this.readVarint(x));return c},readPackedSVarint:function(c){if(this.type!==He.Bytes)return c.push(this.readSVarint());var x=mg(this);for(c=c||[];this.pos<x;)c.push(this.readSVarint());return c},readPackedBoolean:function(c){if(this.type!==He.Bytes)return c.push(this.readBoolean());var x=mg(this);for(c=c||[];this.pos<x;)c.push(this.readBoolean());return c},readPackedFloat:function(c){if(this.type!==He.Bytes)return c.push(this.readFloat());var x=mg(this);for(c=c||[];this.pos<x;)c.push(this.readFloat());
return c},readPackedDouble:function(c){if(this.type!==He.Bytes)return c.push(this.readDouble());var x=mg(this);for(c=c||[];this.pos<x;)c.push(this.readDouble());return c},readPackedFixed32:function(c){if(this.type!==He.Bytes)return c.push(this.readFixed32());var x=mg(this);for(c=c||[];this.pos<x;)c.push(this.readFixed32());return c},readPackedSFixed32:function(c){if(this.type!==He.Bytes)return c.push(this.readSFixed32());var x=mg(this);for(c=c||[];this.pos<x;)c.push(this.readSFixed32());return c},
readPackedFixed64:function(c){if(this.type!==He.Bytes)return c.push(this.readFixed64());var x=mg(this);for(c=c||[];this.pos<x;)c.push(this.readFixed64());return c},readPackedSFixed64:function(c){if(this.type!==He.Bytes)return c.push(this.readSFixed64());var x=mg(this);for(c=c||[];this.pos<x;)c.push(this.readSFixed64());return c},skip:function(c){c&=7;if(c===He.Varint)for(;127<this.buf[this.pos++];);else if(c===He.Bytes)this.pos=this.readVarint()+this.pos;else if(c===He.Fixed32)this.pos+=4;else{if(c!==
He.Fixed64)throw Error("Unimplemented type: "+c);this.pos+=8}},writeTag:function(c,x){this.writeVarint(c<<3|x)},realloc:function(c){for(var x=this.length||16;x<this.pos+c;)x*=2;x!==this.length&&(c=new Uint8Array(x),c.set(this.buf),this.buf=c,this.length=x)},finish:function(){return this.length=this.pos,this.pos=0,this.buf.subarray(0,this.length)},writeFixed32:function(c){this.realloc(4);Rh(this.buf,c,this.pos);this.pos+=4},writeSFixed32:function(c){this.realloc(4);Rh(this.buf,c,this.pos);this.pos+=
4},writeFixed64:function(c){this.realloc(8);Rh(this.buf,-1&c,this.pos);Rh(this.buf,Math.floor(1/4294967296*c),this.pos+4);this.pos+=8},writeSFixed64:function(c){this.realloc(8);Rh(this.buf,-1&c,this.pos);Rh(this.buf,Math.floor(1/4294967296*c),this.pos+4);this.pos+=8},writeVarint:function(c){268435455<(c=+c||0)||0>c?function(x,F){var V,fa;if(0<=x?(V=x%4294967296|0,fa=x/4294967296|0):(fa=~(-x/4294967296),4294967295^(V=~(-x%4294967296))?V=V+1|0:(V=0,fa=fa+1|0)),1.8446744073709552E19<=x||-1.8446744073709552E19>
x)throw Error("Given varint doesn't fit into 10 bytes");F.realloc(10);(function(ra,ya,Ha){Ha.buf[Ha.pos++]=127&ra|128;ra>>>=7;Ha.buf[Ha.pos++]=127&ra|128;ra>>>=7;Ha.buf[Ha.pos++]=127&ra|128;ra>>>=7;Ha.buf[Ha.pos++]=127&ra|128;Ha.buf[Ha.pos]=127&ra>>>7})(V,0,F);(function(ra,ya){ya.buf[ya.pos++]|=(7&ra)<<4|((ra>>>=3)?128:0);ra&&(ya.buf[ya.pos++]=127&ra|((ra>>>=7)?128:0),ra&&(ya.buf[ya.pos++]=127&ra|((ra>>>=7)?128:0),ra&&(ya.buf[ya.pos++]=127&ra|((ra>>>=7)?128:0),ra&&(ya.buf[ya.pos++]=127&ra|((ra>>>=
7)?128:0),ra&&(ya.buf[ya.pos++]=127&ra)))))})(fa,F)}(c,this):(this.realloc(4),this.buf[this.pos++]=127&c|(127<c?128:0),127>=c||(this.buf[this.pos++]=127&(c>>>=7)|(127<c?128:0),127>=c||(this.buf[this.pos++]=127&(c>>>=7)|(127<c?128:0),127>=c||(this.buf[this.pos++]=c>>>7&127))))},writeSVarint:function(c){this.writeVarint(0>c?2*-c-1:2*c)},writeBoolean:function(c){this.writeVarint(!!c)},writeString:function(c){c=String(c);this.realloc(4*c.length);this.pos++;for(var x=this.pos,F=this.buf,V=this.pos,fa,
ra,ya=0;ya<c.length;ya++){if(55295<(fa=c.charCodeAt(ya))&&57344>fa){if(!ra){56319<fa||ya+1===c.length?(F[V++]=239,F[V++]=191,F[V++]=189):ra=fa;continue}if(56320>fa){F[V++]=239;F[V++]=191;F[V++]=189;ra=fa;continue}fa=ra-55296<<10|fa-56320|65536;ra=null}else ra&&(F[V++]=239,F[V++]=191,F[V++]=189,ra=null);128>fa?F[V++]=fa:(2048>fa?F[V++]=fa>>6|192:(65536>fa?F[V++]=fa>>12|224:(F[V++]=fa>>18|240,F[V++]=fa>>12&63|128),F[V++]=fa>>6&63|128),F[V++]=63&fa|128)}this.pos=V;F=this.pos-x;128<=F&&ti(x,F,this);this.pos=
x-1;this.writeVarint(F);this.pos+=F},writeFloat:function(c){this.realloc(4);Xb(this.buf,c,this.pos,!0,23,4);this.pos+=4},writeDouble:function(c){this.realloc(8);Xb(this.buf,c,this.pos,!0,52,8);this.pos+=8},writeBytes:function(c){var x=c.length;this.writeVarint(x);this.realloc(x);for(var F=0;F<x;F++)this.buf[this.pos++]=c[F]},writeRawMessage:function(c,x){this.pos++;var F=this.pos;c(x,this);c=this.pos-F;128<=c&&ti(F,c,this);this.pos=F-1;this.writeVarint(c);this.pos+=c},writeMessage:function(c,x,F){this.writeTag(c,
He.Bytes);this.writeRawMessage(x,F)},writePackedVarint:function(c,x){x.length&&this.writeMessage(c,ui,x)},writePackedSVarint:function(c,x){x.length&&this.writeMessage(c,Jj,x)},writePackedBoolean:function(c,x){x.length&&this.writeMessage(c,ck,x)},writePackedFloat:function(c,x){x.length&&this.writeMessage(c,Qi,x)},writePackedDouble:function(c,x){x.length&&this.writeMessage(c,vi,x)},writePackedFixed32:function(c,x){x.length&&this.writeMessage(c,Kj,x)},writePackedSFixed32:function(c,x){x.length&&this.writeMessage(c,
dk,x)},writePackedFixed64:function(c,x){x.length&&this.writeMessage(c,Ri,x)},writePackedSFixed64:function(c,x){x.length&&this.writeMessage(c,sk,x)},writeBytesField:function(c,x){this.writeTag(c,He.Bytes);this.writeBytes(x)},writeFixed32Field:function(c,x){this.writeTag(c,He.Fixed32);this.writeFixed32(x)},writeSFixed32Field:function(c,x){this.writeTag(c,He.Fixed32);this.writeSFixed32(x)},writeFixed64Field:function(c,x){this.writeTag(c,He.Fixed64);this.writeFixed64(x)},writeSFixed64Field:function(c,
x){this.writeTag(c,He.Fixed64);this.writeSFixed64(x)},writeVarintField:function(c,x){this.writeTag(c,He.Varint);this.writeVarint(x)},writeSVarintField:function(c,x){this.writeTag(c,He.Varint);this.writeSVarint(x)},writeStringField:function(c,x){this.writeTag(c,He.Bytes);this.writeString(x)},writeFloatField:function(c,x){this.writeTag(c,He.Fixed32);this.writeFloat(x)},writeDoubleField:function(c,x){this.writeTag(c,He.Fixed64);this.writeDouble(x)},writeBooleanField:function(c,x){this.writeVarintField(c,
!!x)}};var uc=function(c,x){var F=x.pixelRatio,V=x.version,fa=x.stretchX,ra=x.stretchY;x=x.content;this.paddedRect=c;this.pixelRatio=F;this.stretchX=fa;this.stretchY=ra;this.content=x;this.version=V},zc={tl:{configurable:!0},br:{configurable:!0},tlbr:{configurable:!0},displaySize:{configurable:!0}};zc.tl.get=function(){return[this.paddedRect.x+1,this.paddedRect.y+1]};zc.br.get=function(){return[this.paddedRect.x+this.paddedRect.w-1,this.paddedRect.y+this.paddedRect.h-1]};zc.tlbr.get=function(){return this.tl.concat(this.br)};
zc.displaySize.get=function(){return[(this.paddedRect.w-2)/this.pixelRatio,(this.paddedRect.h-2)/this.pixelRatio]};Object.defineProperties(uc.prototype,zc);var Ec=function(c,x){var F={},V={};this.haveRenderCallbacks=[];var fa=[];this.addImages(c,F,fa);this.addImages(x,V,fa);fa=$e(fa);fa=new Cf({width:fa.w||1,height:fa.h||1});for(var ra in c){var ya=c[ra],Ha=F[ra].paddedRect;Cf.copy(ya.data,fa,{x:0,y:0},{x:Ha.x+1,y:Ha.y+1},ya.data)}for(var Pa in x){c=x[Pa];ya=V[Pa].paddedRect;ra=ya.x+1;ya=ya.y+1;Ha=
c.data.width;var Ya=c.data.height;Cf.copy(c.data,fa,{x:0,y:0},{x:ra,y:ya},c.data);Cf.copy(c.data,fa,{x:0,y:Ya-1},{x:ra,y:ya-1},{width:Ha,height:1});Cf.copy(c.data,fa,{x:0,y:0},{x:ra,y:ya+Ya},{width:Ha,height:1});Cf.copy(c.data,fa,{x:Ha-1,y:0},{x:ra-1,y:ya},{width:1,height:Ya});Cf.copy(c.data,fa,{x:0,y:0},{x:ra+Ha,y:ya},{width:1,height:Ya})}this.image=fa;this.iconPositions=F;this.patternPositions=V};Ec.prototype.addImages=function(c,x,F){for(var V in c){var fa=c[V],ra={x:0,y:0,w:fa.data.width+2,h:fa.data.height+
2};F.push(ra);x[V]=new uc(ra,fa);fa.hasRenderCallback&&this.haveRenderCallbacks.push(V)}};Ec.prototype.patchUpdatedImages=function(c,x){for(var F in c.dispatchRenderCallbacks(this.haveRenderCallbacks),c.updatedImages)this.patchUpdatedImage(this.iconPositions[F],c.getImage(F),x),this.patchUpdatedImage(this.patternPositions[F],c.getImage(F),x)};Ec.prototype.patchUpdatedImage=function(c,x,F){c&&x&&c.version!==x.version&&(c.version=x.version,c=c.tl,F.update(x.data,void 0,{x:c[0],y:c[1]}))};Gc("ImagePosition",
uc);Gc("ImageAtlas",Ec);var Qc={horizontal:1,vertical:2,horizontalOnly:3},Nb=function(){this.scale=1;this.fontStack="";this.imageName=null};Nb.forText=function(c,x){var F=new Nb;return F.scale=c||1,F.fontStack=x,F};Nb.forImage=function(c){var x=new Nb;return x.imageName=c,x};var Zb=function(){this.text="";this.sectionIndex=[];this.sections=[];this.imageSectionID=null};Zb.fromFeature=function(c,x){for(var F=new Zb,V=0;V<c.sections.length;V++){var fa=c.sections[V];fa.image?F.addImageSection(fa):F.addTextSection(fa,
x)}return F};Zb.prototype.length=function(){return this.text.length};Zb.prototype.getSection=function(c){return this.sections[this.sectionIndex[c]]};Zb.prototype.getSectionIndex=function(c){return this.sectionIndex[c]};Zb.prototype.getCharCode=function(c){return this.text.charCodeAt(c)};Zb.prototype.verticalizePunctuation=function(){for(var c=this.text,x="",F=0;F<c.length;F++){var V=c.charCodeAt(F+1)||null,fa=c.charCodeAt(F-1)||null;x+=V&&Bd(V)&&!Eb[c[F+1]]||fa&&Bd(fa)&&!Eb[c[F-1]]||!Eb[c[F]]?c[F]:
Eb[c[F]]}this.text=x};Zb.prototype.trim=function(){for(var c=0,x=0;x<this.text.length&&wc[this.text.charCodeAt(x)];x++)c++;x=this.text.length;for(var F=this.text.length-1;0<=F&&F>=c&&wc[this.text.charCodeAt(F)];F--)x--;this.text=this.text.substring(c,x);this.sectionIndex=this.sectionIndex.slice(c,x)};Zb.prototype.substring=function(c,x){var F=new Zb;return F.text=this.text.substring(c,x),F.sectionIndex=this.sectionIndex.slice(c,x),F.sections=this.sections,F};Zb.prototype.toString=function(){return this.text};
Zb.prototype.getMaxScale=function(){var c=this;return this.sectionIndex.reduce(function(x,F){return Math.max(x,c.sections[F].scale)},0)};Zb.prototype.addTextSection=function(c,x){this.text+=c.text;this.sections.push(Nb.forText(c.scale,c.fontStack||x));x=this.sections.length-1;for(var F=0;F<c.text.length;++F)this.sectionIndex.push(x)};Zb.prototype.addImageSection=function(c){c=c.image?c.image.name:"";if(0!==c.length){var x=this.getNextImageSectionCharCode();x?(this.text+=String.fromCharCode(x),this.sections.push(Nb.forImage(c)),
this.sectionIndex.push(this.sections.length-1)):z("Reached maximum number of images 6401")}else z("Can't add FormattedSection with an empty image.")};Zb.prototype.getNextImageSectionCharCode=function(){return this.imageSectionID?63743<=this.imageSectionID?null:++this.imageSectionID:(this.imageSectionID=57344,this.imageSectionID)};var wc={9:!0,10:!0,11:!0,12:!0,13:!0,32:!0},Xc={10:!0,32:!0,38:!0,40:!0,41:!0,43:!0,45:!0,47:!0,173:!0,183:!0,8203:!0,8208:!0,8211:!0,8231:!0},Zc=function(c){function x(F,
V,fa,ra){c.call(this,F,V);this.angle=fa;void 0!==ra&&(this.segment=ra)}return c&&(x.__proto__=c),(x.prototype=Object.create(c&&c.prototype)).constructor=x,x.prototype.clone=function(){return new x(this.x,this.y,this.angle,this.segment)},x}(Ud);Gc("Anchor",Zc);var cd=Object.freeze({__proto__:null,getSizeData:Mj,evaluateSizeForFeature:$g,evaluateSizeForZoom:Ti,SIZE_PACK_FACTOR:128}),Oc=function(c,x,F,V,fa,ra,ya,Ha,Pa,Ya){if(this.boxStartIndex=c.length,Pa)x=ra.top,F=ra.bottom,(V=ra.collisionPadding)&&
(x-=V[1],F+=V[3]),x=F-x,0<x&&(x=Math.max(10,x),this.circleDiameter=x);else{Pa=ra.top*ya-Ha;var hb=ra.bottom*ya+Ha,Ab=ra.left*ya-Ha;Ha=ra.right*ya+Ha;ra=ra.collisionPadding;if(ra&&(Ab-=ra[0]*ya,Pa-=ra[1]*ya,Ha+=ra[2]*ya,hb+=ra[3]*ya),Ya){ra=new Ud(Ab,Pa);ya=new Ud(Ha,Pa);var Fb=new Ud(Ab,hb);hb=new Ud(Ha,hb);Ya=Ya*Math.PI/180;ra._rotate(Ya);ya._rotate(Ya);Fb._rotate(Ya);hb._rotate(Ya);Ab=Math.min(ra.x,ya.x,Fb.x,hb.x);Ha=Math.max(ra.x,ya.x,Fb.x,hb.x);Pa=Math.min(ra.y,ya.y,Fb.y,hb.y);hb=Math.max(ra.y,
ya.y,Fb.y,hb.y)}c.emplaceBack(x.x,x.y,Ab,Pa,Ha,hb,F,V,fa)}this.boxEndIndex=c.length},Ed=function(c,x){if(void 0===c&&(c=[]),void 0===x&&(x=Th),this.data=c,this.length=this.data.length,this.compare=x,0<this.length)for(c=(this.length>>1)-1;0<=c;c--)this._down(c)};Ed.prototype.push=function(c){this.data.push(c);this.length++;this._up(this.length-1)};Ed.prototype.pop=function(){if(0!==this.length){var c=this.data[0],x=this.data.pop();return this.length--,0<this.length&&(this.data[0]=x,this._down(0)),
c}};Ed.prototype.peek=function(){return this.data[0]};Ed.prototype._up=function(c){for(var x=this.data,F=this.compare,V=x[c];0<c;){var fa=c-1>>1,ra=x[fa];if(0<=F(V,ra))break;x[c]=ra;c=fa}x[c]=V};Ed.prototype._down=function(c){for(var x=this.data,F=this.compare,V=this.length>>1,fa=x[c];c<V;){var ra=1+(c<<1),ya=x[ra],Ha=ra+1;if(Ha<this.length&&0>F(x[Ha],ya)&&(ra=Ha,ya=x[Ha]),0<=F(ya,fa))break;x[c]=ya;c=ra}x[c]=fa};var Nd=Number.POSITIVE_INFINITY,$d=oh.VectorTileFeature.types,me=[{name:"a_fade_opacity",
components:1,type:"Uint8",offset:0}],ke=function(c){this.layoutVertexArray=new xg;this.indexArray=new ci;this.programConfigurations=c;this.segments=new zf;this.dynamicLayoutVertexArray=new gh;this.opacityVertexArray=new Pi;this.placedSymbolArray=new Qk};ke.prototype.isEmpty=function(){return 0===this.layoutVertexArray.length&&0===this.indexArray.length&&0===this.dynamicLayoutVertexArray.length&&0===this.opacityVertexArray.length};ke.prototype.upload=function(c,x,F,V){this.isEmpty()||(F&&(this.layoutVertexBuffer=
c.createVertexBuffer(this.layoutVertexArray,Wa.members),this.indexBuffer=c.createIndexBuffer(this.indexArray,x),this.dynamicLayoutVertexBuffer=c.createVertexBuffer(this.dynamicLayoutVertexArray,db.members,!0),this.opacityVertexBuffer=c.createVertexBuffer(this.opacityVertexArray,me,!0),this.opacityVertexBuffer.itemSize=1),(F||V)&&this.programConfigurations.upload(c))};ke.prototype.destroy=function(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.programConfigurations.destroy(),
this.segments.destroy(),this.dynamicLayoutVertexBuffer.destroy(),this.opacityVertexBuffer.destroy())};Gc("SymbolBuffers",ke);var te=function(c,x,F){this.layoutVertexArray=new c;this.layoutAttributes=x;this.indexArray=new F;this.segments=new zf;this.collisionVertexArray=new Ej};te.prototype.upload=function(c){this.layoutVertexBuffer=c.createVertexBuffer(this.layoutVertexArray,this.layoutAttributes);this.indexBuffer=c.createIndexBuffer(this.indexArray);this.collisionVertexBuffer=c.createVertexBuffer(this.collisionVertexArray,
ob.members,!0)};te.prototype.destroy=function(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.segments.destroy(),this.collisionVertexBuffer.destroy())};Gc("CollisionBuffers",te);var Sd=function(c){this.collisionBoxArray=c.collisionBoxArray;this.zoom=c.zoom;this.overscaling=c.overscaling;this.layers=c.layers;this.layerIds=this.layers.map(function(fa){return fa.id});this.index=c.index;this.pixelRatio=c.pixelRatio;this.sourceLayerIndex=c.sourceLayerIndex;
this.hasRTLText=this.hasPattern=!1;this.sortKeyRanges=[];this.collisionCircleArray=[];this.placementInvProjMatrix=Jd([]);this.placementViewportMatrix=Jd([]);var x=this.layers[0]._unevaluatedLayout._values;this.textSizeData=Mj(this.zoom,x["text-size"]);this.iconSizeData=Mj(this.zoom,x["icon-size"]);x=this.layers[0].layout;var F=x.get("symbol-sort-key"),V=x.get("symbol-z-order");this.sortFeaturesByKey="viewport-y"!==V&&void 0!==F.constantOr(1);this.sortFeaturesByY=("viewport-y"===V||"auto"===V&&!this.sortFeaturesByKey)&&
(x.get("text-allow-overlap")||x.get("icon-allow-overlap")||x.get("text-ignore-placement")||x.get("icon-ignore-placement"));"point"===x.get("symbol-placement")&&(this.writingModes=x.get("text-writing-mode").map(function(fa){return Qc[fa]}));this.stateDependentLayerIds=this.layers.filter(function(fa){return fa.isStateDependent()}).map(function(fa){return fa.id});this.sourceID=c.sourceID};Sd.prototype.createArrays=function(){this.text=new ke(new sh(Wa.members,this.layers,this.zoom,function(c){return/^text/.test(c)}));
this.icon=new ke(new sh(Wa.members,this.layers,this.zoom,function(c){return/^icon/.test(c)}));this.glyphOffsetArray=new xj;this.lineVertexArray=new wh;this.symbolInstances=new bj};Sd.prototype.calculateGlyphDependencies=function(c,x,F,V,fa){for(var ra=0;ra<c.length;ra++)if(x[c.charCodeAt(ra)]=!0,(F||V)&&fa){var ya=Eb[c.charAt(ra)];ya&&(x[ya.charCodeAt(0)]=!0)}};Sd.prototype.populate=function(c,x,F){var V=this.layers[0],fa=V.layout,ra=fa.get("text-font"),ya=fa.get("text-field"),Ha=fa.get("icon-image");
ya=("constant"!==ya.value.kind||ya.value.value instanceof ze&&!ya.value.value.isEmpty()||0<ya.value.value.toString().length)&&("constant"!==ra.value.kind||0<ra.value.value.length);Ha="constant"!==Ha.value.kind||!!Ha.value.value||0<Object.keys(Ha.parameters).length;var Pa=fa.get("symbol-sort-key");if(this.features=[],ya||Ha){var Ya=x.iconDependencies,hb=x.glyphDependencies;x=x.availableImages;for(var Ab=new Xe(this.zoom),Fb=0;Fb<c.length;Fb+=1){var Jb=c[Fb],Rb=Jb.feature,rb=Jb.id,zb=Jb.index,hc=Jb.sourceLayerIndex;
Jb=V._featureFilter.needGeometry;var vc={type:Rb.type,id:rb,properties:Rb.properties,geometry:Jb?Xd(Rb):[]};if(V._featureFilter.filter(Ab,vc,F)){Jb||(vc.geometry=Xd(Rb));Jb=void 0;if(ya){var pc=V.getValueAndResolveTokens("text-field",vc,F,x);pc=ze.factory(pc);Uh(pc)&&(this.hasRTLText=!0);(!this.hasRTLText||"unavailable"===Xf||this.hasRTLText&&ag.isParsed())&&(Jb=Ph(pc,V,vc))}pc=void 0;Ha&&(pc=V.getValueAndResolveTokens("icon-image",vc,F,x),pc=pc instanceof Te?pc:Te.fromString(pc));if(Jb||pc){var $c=
this.sortFeaturesByKey?Pa.evaluate(vc,{},F):void 0;Rb={id:rb,text:Jb,icon:pc,index:zb,sourceLayerIndex:hc,geometry:Xd(Rb),properties:Rb.properties,type:$d[Rb.type],sortKey:$c};if(this.features.push(Rb),pc&&(Ya[pc.name]=!0),Jb)for(Rb=ra.evaluate(vc,{},F).join(","),rb="map"===fa.get("text-rotation-alignment")&&"point"!==fa.get("symbol-placement"),this.allowVerticalPlacement=this.writingModes&&0<=this.writingModes.indexOf(Qc.vertical),zb=0,vc=Jb.sections;zb<vc.length;zb+=1)hc=vc[zb],hc.image?Ya[hc.image.name]=
!0:(pc=re(Jb.toString()),$c=hc.fontStack||Rb,$c=hb[$c]=hb[$c]||{},this.calculateGlyphDependencies(hc.text,$c,rb,this.allowVerticalPlacement,pc))}}}"line"===fa.get("symbol-placement")&&(this.features=function(fd){function nd(Ig,Sf,jf){var Ae=he[Ig];return delete he[Ig],he[Sf]=Ae,Wd[Ae].geometry[0].pop(),Wd[Ae].geometry[0]=Wd[Ae].geometry[0].concat(jf[0]),Ae}function xd(Ig,Sf,jf){var Ae=Vd[Sf];return delete Vd[Sf],Vd[Ig]=Ae,Wd[Ae].geometry[0].shift(),Wd[Ae].geometry[0]=jf[0].concat(Wd[Ae].geometry[0]),
Ae}function vd(Ig,Sf,jf){Sf=jf?Sf[0][Sf[0].length-1]:Sf[0][0];return Ig+":"+Sf.x+":"+Sf.y}for(var Vd={},he={},Wd=[],ce=0,ve=0;ve<fd.length;ve++){var Md=fd[ve],Id=Md.geometry;if(Md=Md.text?Md.text.toString():null){var Pd=vd(Md,Id),Me=vd(Md,Id,!0);if(Pd in he&&Me in Vd&&he[Pd]!==Vd[Me]){Id=xd(Pd,Me,Id);var hf=nd(Pd,Me,Wd[Id].geometry);delete Vd[Pd];delete he[Me];he[vd(Md,Wd[hf].geometry,!0)]=hf;Wd[Id].geometry=null}else Pd in he?nd(Pd,Me,Id):Me in Vd?xd(Pd,Me,Id):(Wd.push(fd[ve]),ce++,Vd[Pd]=ce-1,he[Me]=
ce-1)}else Wd.push(fd[ve]),ce++}return Wd.filter(function(Ig){return Ig.geometry})}(this.features));this.sortFeaturesByKey&&this.features.sort(function(fd,nd){return fd.sortKey-nd.sortKey})}};Sd.prototype.update=function(c,x,F){this.stateDependentLayers.length&&(this.text.programConfigurations.updatePaintArrays(c,x,this.layers,F),this.icon.programConfigurations.updatePaintArrays(c,x,this.layers,F))};Sd.prototype.isEmpty=function(){return 0===this.symbolInstances.length&&!this.hasRTLText};Sd.prototype.uploadPending=
function(){return!this.uploaded||this.text.programConfigurations.needsUpload||this.icon.programConfigurations.needsUpload};Sd.prototype.upload=function(c){!this.uploaded&&this.hasDebugData()&&(this.textCollisionBox.upload(c),this.iconCollisionBox.upload(c));this.text.upload(c,this.sortFeaturesByY,!this.uploaded,this.text.programConfigurations.needsUpload);this.icon.upload(c,this.sortFeaturesByY,!this.uploaded,this.icon.programConfigurations.needsUpload);this.uploaded=!0};Sd.prototype.destroyDebugData=
function(){this.textCollisionBox.destroy();this.iconCollisionBox.destroy()};Sd.prototype.destroy=function(){this.text.destroy();this.icon.destroy();this.hasDebugData()&&this.destroyDebugData()};Sd.prototype.addToLineVertexArray=function(c,x){var F=this.lineVertexArray.length;if(void 0!==c.segment){for(var V=c.dist(x[c.segment+1]),fa=c.dist(x[c.segment]),ra={},ya=c.segment+1;ya<x.length;ya++)ra[ya]={x:x[ya].x,y:x[ya].y,tileUnitDistanceFromAnchor:V},ya<x.length-1&&(V+=x[ya+1].dist(x[ya]));for(c=c.segment||
0;0<=c;c--)ra[c]={x:x[c].x,y:x[c].y,tileUnitDistanceFromAnchor:fa},0<c&&(fa+=x[c-1].dist(x[c]));for(fa=0;fa<x.length;fa++)c=ra[fa],this.lineVertexArray.emplaceBack(c.x,c.y,c.tileUnitDistanceFromAnchor)}return{lineStartIndex:F,lineLength:this.lineVertexArray.length-F}};Sd.prototype.addSymbols=function(c,x,F,V,fa,ra,ya,Ha,Pa,Ya,hb,Ab){fa=c.indexArray;for(var Fb=c.layoutVertexArray,Jb=c.segments.prepareSegment(4*x.length,Fb,fa,ra.sortKey),Rb=this.glyphOffsetArray.length,rb=Jb.vertexLength,zb=this.allowVerticalPlacement&&
ya===Qc.vertical?Math.PI/2:0,hc=ra.text&&ra.text.sections,vc=0;vc<x.length;vc++){var pc=x[vc],$c=pc.tl,fd=pc.tr,nd=pc.bl,xd=pc.br,vd=pc.tex,Vd=pc.pixelOffsetTL,he=pc.pixelOffsetBR,Wd=pc.minFontScaleX,ce=pc.minFontScaleY,ve=pc.glyphOffset,Md=pc.isSDF;pc=pc.sectionIndex;var Id=Jb.vertexLength,Pd=ve[1];gg(Fb,Ha.x,Ha.y,$c.x,Pd+$c.y,vd.x,vd.y,F,Md,Vd.x,Vd.y,Wd,ce);gg(Fb,Ha.x,Ha.y,fd.x,Pd+fd.y,vd.x+vd.w,vd.y,F,Md,he.x,Vd.y,Wd,ce);gg(Fb,Ha.x,Ha.y,nd.x,Pd+nd.y,vd.x,vd.y+vd.h,F,Md,Vd.x,he.y,Wd,ce);gg(Fb,Ha.x,
Ha.y,xd.x,Pd+xd.y,vd.x+vd.w,vd.y+vd.h,F,Md,he.x,he.y,Wd,ce);Oj(c.dynamicLayoutVertexArray,Ha,zb);fa.emplaceBack(Id,Id+1,Id+2);fa.emplaceBack(Id+1,Id+2,Id+3);Jb.vertexLength+=4;Jb.primitiveLength+=2;this.glyphOffsetArray.emplaceBack(ve[0]);vc!==x.length-1&&pc===x[vc+1].sectionIndex||c.programConfigurations.populatePaintArrays(Fb.length,ra,ra.index,{},Ab,hc&&hc[pc])}c.placedSymbolArray.emplaceBack(Ha.x,Ha.y,Rb,this.glyphOffsetArray.length-Rb,rb,Pa,Ya,Ha.segment,F?F[0]:0,F?F[1]:0,V[0],V[1],ya,0,!1,0,
hb)};Sd.prototype._addCollisionDebugVertex=function(c,x,F,V,fa,ra){return x.emplaceBack(0,0),c.emplaceBack(F.x,F.y,V,fa,Math.round(ra.x),Math.round(ra.y))};Sd.prototype.addCollisionDebugVertices=function(c,x,F,V,fa,ra,ya){var Ha=fa.segments.prepareSegment(4,fa.layoutVertexArray,fa.indexArray),Pa=Ha.vertexLength,Ya=fa.layoutVertexArray,hb=fa.collisionVertexArray,Ab=ya.anchorX;ya=ya.anchorY;this._addCollisionDebugVertex(Ya,hb,ra,Ab,ya,new Ud(c,x));this._addCollisionDebugVertex(Ya,hb,ra,Ab,ya,new Ud(F,
x));this._addCollisionDebugVertex(Ya,hb,ra,Ab,ya,new Ud(F,V));this._addCollisionDebugVertex(Ya,hb,ra,Ab,ya,new Ud(c,V));Ha.vertexLength+=4;c=fa.indexArray;c.emplaceBack(Pa,Pa+1);c.emplaceBack(Pa+1,Pa+2);c.emplaceBack(Pa+2,Pa+3);c.emplaceBack(Pa+3,Pa);Ha.primitiveLength+=4};Sd.prototype.addDebugCollisionBoxes=function(c,x,F,V){for(;c<x;c++){var fa=this.collisionBoxArray.get(c);this.addCollisionDebugVertices(fa.x1,fa.y1,fa.x2,fa.y2,V?this.textCollisionBox:this.iconCollisionBox,fa.anchorPoint,F)}};Sd.prototype.generateCollisionDebugBuffers=
function(){this.hasDebugData()&&this.destroyDebugData();this.textCollisionBox=new te(yg,xb.members,Ki);this.iconCollisionBox=new te(yg,xb.members,Ki);for(var c=0;c<this.symbolInstances.length;c++){var x=this.symbolInstances.get(c);this.addDebugCollisionBoxes(x.textBoxStartIndex,x.textBoxEndIndex,x,!0);this.addDebugCollisionBoxes(x.verticalTextBoxStartIndex,x.verticalTextBoxEndIndex,x,!0);this.addDebugCollisionBoxes(x.iconBoxStartIndex,x.iconBoxEndIndex,x,!1);this.addDebugCollisionBoxes(x.verticalIconBoxStartIndex,
x.verticalIconBoxEndIndex,x,!1)}};Sd.prototype._deserializeCollisionBoxesForSymbol=function(c,x,F,V,fa,ra,ya,Ha,Pa){for(var Ya={};x<F;){x=c.get(x);Ya.textBox={x1:x.x1,y1:x.y1,x2:x.x2,y2:x.y2,anchorPointX:x.anchorPointX,anchorPointY:x.anchorPointY};Ya.textFeatureIndex=x.featureIndex;break}for(;V<fa;){V=c.get(V);Ya.verticalTextBox={x1:V.x1,y1:V.y1,x2:V.x2,y2:V.y2,anchorPointX:V.anchorPointX,anchorPointY:V.anchorPointY};Ya.verticalTextFeatureIndex=V.featureIndex;break}for(;ra<ya;){ra=c.get(ra);Ya.iconBox=
{x1:ra.x1,y1:ra.y1,x2:ra.x2,y2:ra.y2,anchorPointX:ra.anchorPointX,anchorPointY:ra.anchorPointY};Ya.iconFeatureIndex=ra.featureIndex;break}for(;Ha<Pa;){c=c.get(Ha);Ya.verticalIconBox={x1:c.x1,y1:c.y1,x2:c.x2,y2:c.y2,anchorPointX:c.anchorPointX,anchorPointY:c.anchorPointY};Ya.verticalIconFeatureIndex=c.featureIndex;break}return Ya};Sd.prototype.deserializeCollisionBoxes=function(c){this.collisionArrays=[];for(var x=0;x<this.symbolInstances.length;x++){var F=this.symbolInstances.get(x);this.collisionArrays.push(this._deserializeCollisionBoxesForSymbol(c,
F.textBoxStartIndex,F.textBoxEndIndex,F.verticalTextBoxStartIndex,F.verticalTextBoxEndIndex,F.iconBoxStartIndex,F.iconBoxEndIndex,F.verticalIconBoxStartIndex,F.verticalIconBoxEndIndex))}};Sd.prototype.hasTextData=function(){return 0<this.text.segments.get().length};Sd.prototype.hasIconData=function(){return 0<this.icon.segments.get().length};Sd.prototype.hasDebugData=function(){return this.textCollisionBox&&this.iconCollisionBox};Sd.prototype.hasTextCollisionBoxData=function(){return this.hasDebugData()&&
0<this.textCollisionBox.segments.get().length};Sd.prototype.hasIconCollisionBoxData=function(){return this.hasDebugData()&&0<this.iconCollisionBox.segments.get().length};Sd.prototype.addIndicesForPlacedSymbol=function(c,x){var F=c.placedSymbolArray.get(x);x=F.vertexStartIndex+4*F.numGlyphs;for(F=F.vertexStartIndex;F<x;F+=4)c.indexArray.emplaceBack(F,F+1,F+2),c.indexArray.emplaceBack(F+1,F+2,F+3)};Sd.prototype.getSortedSymbolIndexes=function(c){if(this.sortedAngle===c&&void 0!==this.symbolInstanceIndexes)return this.symbolInstanceIndexes;
var x=Math.sin(c);c=Math.cos(c);for(var F=[],V=[],fa=[],ra=0;ra<this.symbolInstances.length;++ra){fa.push(ra);var ya=this.symbolInstances.get(ra);F.push(0|Math.round(x*ya.anchorX+c*ya.anchorY));V.push(ya.featureIndex)}return fa.sort(function(Ha,Pa){return F[Ha]-F[Pa]||V[Pa]-V[Ha]}),fa};Sd.prototype.addToSortKeyRanges=function(c,x){var F=this.sortKeyRanges[this.sortKeyRanges.length-1];F&&F.sortKey===x?F.symbolInstanceEnd=c+1:this.sortKeyRanges.push({sortKey:x,symbolInstanceStart:c,symbolInstanceEnd:c+
1})};Sd.prototype.sortFeatures=function(c){var x=this;if(this.sortFeaturesByY&&this.sortedAngle!==c&&!(1<this.text.segments.get().length||1<this.icon.segments.get().length)){this.symbolInstanceIndexes=this.getSortedSymbolIndexes(c);this.sortedAngle=c;this.text.indexArray.clear();this.icon.indexArray.clear();this.featureSortOrder=[];c=0;for(var F=this.symbolInstanceIndexes;c<F.length;c+=1){var V=this.symbolInstances.get(F[c]);this.featureSortOrder.push(V.featureIndex);[V.rightJustifiedTextSymbolIndex,
V.centerJustifiedTextSymbolIndex,V.leftJustifiedTextSymbolIndex].forEach(function(fa,ra,ya){0<=fa&&ya.indexOf(fa)===ra&&x.addIndicesForPlacedSymbol(x.text,fa)});0<=V.verticalPlacedTextSymbolIndex&&this.addIndicesForPlacedSymbol(this.text,V.verticalPlacedTextSymbolIndex);0<=V.placedIconSymbolIndex&&this.addIndicesForPlacedSymbol(this.icon,V.placedIconSymbolIndex);0<=V.verticalPlacedIconSymbolIndex&&this.addIndicesForPlacedSymbol(this.icon,V.verticalPlacedIconSymbolIndex)}this.text.indexBuffer&&this.text.indexBuffer.updateData(this.text.indexArray);
this.icon.indexBuffer&&this.icon.indexBuffer.updateData(this.icon.indexArray)}};Gc("SymbolBucket",Sd,{omit:["layers","collisionBoxArray","features","compareText"]});Sd.MAX_GLYPHS=65535;Sd.addDynamicAttributes=Oj;var Ff=new wg({"symbol-placement":new Cd(Gb.layout_symbol["symbol-placement"]),"symbol-spacing":new Cd(Gb.layout_symbol["symbol-spacing"]),"symbol-avoid-edges":new Cd(Gb.layout_symbol["symbol-avoid-edges"]),"symbol-sort-key":new ee(Gb.layout_symbol["symbol-sort-key"]),"symbol-z-order":new Cd(Gb.layout_symbol["symbol-z-order"]),
"icon-allow-overlap":new Cd(Gb.layout_symbol["icon-allow-overlap"]),"icon-ignore-placement":new Cd(Gb.layout_symbol["icon-ignore-placement"]),"icon-optional":new Cd(Gb.layout_symbol["icon-optional"]),"icon-rotation-alignment":new Cd(Gb.layout_symbol["icon-rotation-alignment"]),"icon-size":new ee(Gb.layout_symbol["icon-size"]),"icon-text-fit":new Cd(Gb.layout_symbol["icon-text-fit"]),"icon-text-fit-padding":new Cd(Gb.layout_symbol["icon-text-fit-padding"]),"icon-image":new ee(Gb.layout_symbol["icon-image"]),
"icon-rotate":new ee(Gb.layout_symbol["icon-rotate"]),"icon-padding":new Cd(Gb.layout_symbol["icon-padding"]),"icon-keep-upright":new Cd(Gb.layout_symbol["icon-keep-upright"]),"icon-offset":new ee(Gb.layout_symbol["icon-offset"]),"icon-anchor":new ee(Gb.layout_symbol["icon-anchor"]),"icon-pitch-alignment":new Cd(Gb.layout_symbol["icon-pitch-alignment"]),"text-pitch-alignment":new Cd(Gb.layout_symbol["text-pitch-alignment"]),"text-rotation-alignment":new Cd(Gb.layout_symbol["text-rotation-alignment"]),
"text-field":new ee(Gb.layout_symbol["text-field"]),"text-font":new ee(Gb.layout_symbol["text-font"]),"text-size":new ee(Gb.layout_symbol["text-size"]),"text-max-width":new ee(Gb.layout_symbol["text-max-width"]),"text-line-height":new Cd(Gb.layout_symbol["text-line-height"]),"text-letter-spacing":new ee(Gb.layout_symbol["text-letter-spacing"]),"text-justify":new ee(Gb.layout_symbol["text-justify"]),"text-radial-offset":new ee(Gb.layout_symbol["text-radial-offset"]),"text-variable-anchor":new Cd(Gb.layout_symbol["text-variable-anchor"]),
"text-anchor":new ee(Gb.layout_symbol["text-anchor"]),"text-max-angle":new Cd(Gb.layout_symbol["text-max-angle"]),"text-writing-mode":new Cd(Gb.layout_symbol["text-writing-mode"]),"text-rotate":new ee(Gb.layout_symbol["text-rotate"]),"text-padding":new Cd(Gb.layout_symbol["text-padding"]),"text-keep-upright":new Cd(Gb.layout_symbol["text-keep-upright"]),"text-transform":new ee(Gb.layout_symbol["text-transform"]),"text-offset":new ee(Gb.layout_symbol["text-offset"]),"text-allow-overlap":new Cd(Gb.layout_symbol["text-allow-overlap"]),
"text-ignore-placement":new Cd(Gb.layout_symbol["text-ignore-placement"]),"text-optional":new Cd(Gb.layout_symbol["text-optional"])}),gf={paint:new wg({"icon-opacity":new ee(Gb.paint_symbol["icon-opacity"]),"icon-color":new ee(Gb.paint_symbol["icon-color"]),"icon-halo-color":new ee(Gb.paint_symbol["icon-halo-color"]),"icon-halo-width":new ee(Gb.paint_symbol["icon-halo-width"]),"icon-halo-blur":new ee(Gb.paint_symbol["icon-halo-blur"]),"icon-translate":new Cd(Gb.paint_symbol["icon-translate"]),"icon-translate-anchor":new Cd(Gb.paint_symbol["icon-translate-anchor"]),
"text-opacity":new ee(Gb.paint_symbol["text-opacity"]),"text-color":new ee(Gb.paint_symbol["text-color"],{runtimeType:yd,getOverride:function(c){return c.textColor},hasOverride:function(c){return!!c.textColor}}),"text-halo-color":new ee(Gb.paint_symbol["text-halo-color"]),"text-halo-width":new ee(Gb.paint_symbol["text-halo-width"]),"text-halo-blur":new ee(Gb.paint_symbol["text-halo-blur"]),"text-translate":new Cd(Gb.paint_symbol["text-translate"]),"text-translate-anchor":new Cd(Gb.paint_symbol["text-translate-anchor"])}),
layout:Ff},ne=function(c){this.type=c.property.overrides?c.property.overrides.runtimeType:jd;this.defaultValue=c};ne.prototype.evaluate=function(c){if(c.formattedSection){var x=this.defaultValue.property.overrides;if(x&&x.hasOverride(c.formattedSection))return x.getOverride(c.formattedSection)}return c.feature&&c.featureState?this.defaultValue.evaluate(c.feature,c.featureState):this.defaultValue.property.specification.default};ne.prototype.eachChild=function(c){this.defaultValue.isConstant()||c(this.defaultValue.value._styleExpression.expression)};
ne.prototype.outputDefined=function(){return!1};ne.prototype.serialize=function(){return null};Gc("FormatSectionOverride",ne,{omit:["defaultValue"]});var Pf=function(c){function x(F){c.call(this,F,gf)}return c&&(x.__proto__=c),(x.prototype=Object.create(c&&c.prototype)).constructor=x,x.prototype.recalculate=function(F,V){if(c.prototype.recalculate.call(this,F,V),"auto"===this.layout.get("icon-rotation-alignment")&&(this.layout._values["icon-rotation-alignment"]="point"!==this.layout.get("symbol-placement")?
"map":"viewport"),"auto"===this.layout.get("text-rotation-alignment")&&(this.layout._values["text-rotation-alignment"]="point"!==this.layout.get("symbol-placement")?"map":"viewport"),"auto"===this.layout.get("text-pitch-alignment")&&(this.layout._values["text-pitch-alignment"]=this.layout.get("text-rotation-alignment")),"auto"===this.layout.get("icon-pitch-alignment")&&(this.layout._values["icon-pitch-alignment"]=this.layout.get("icon-rotation-alignment")),"point"===this.layout.get("symbol-placement"))if(F=
this.layout.get("text-writing-mode")){V=[];for(var fa=0;fa<F.length;fa+=1){var ra=F[fa];0>V.indexOf(ra)&&V.push(ra)}this.layout._values["text-writing-mode"]=V}else this.layout._values["text-writing-mode"]=["horizontal"];this._setPaintOverrides()},x.prototype.getValueAndResolveTokens=function(F,V,fa,ra){fa=this.layout.get(F).evaluate(V,{},fa,ra);F=this._unevaluatedLayout._values[F];return F.isDataDriven()||Kc(F.value)||!fa?fa:function(ya,Ha){return Ha.replace(/{([^{}]+)}/g,function(Pa,Ya){return Ya in
ya?String(ya[Ya]):""})}(V.properties,fa)},x.prototype.createBucket=function(F){return new Sd(F)},x.prototype.queryRadius=function(){return 0},x.prototype.queryIntersectsFeature=function(){return!1},x.prototype._setPaintOverrides=function(){for(var F=0,V=gf.paint.overridableProperties;F<V.length;F+=1){var fa=V[F];if(x.hasPaintOverride(this.layout,fa)){var ra=this.paint.get(fa);var ya=new ne(ra);ya=new ki(ya,ra.property.specification);ya="constant"===ra.value.kind||"source"===ra.value.kind?new Yd("source",
ya):new lf("composite",ya,ra.value.zoomStops,ra.value._interpolationType);this.paint._values[fa]=new vf(ra.property,ya,ra.parameters)}}},x.prototype._handleOverridablePaintPropertyUpdate=function(F,V,fa){return!(!this.layout||V.isDataDriven()||fa.isDataDriven())&&x.hasPaintOverride(this.layout,F)},x.hasPaintOverride=function(F,V){F=F.get("text-field");var fa=gf.paint.properties[V],ra=!1,ya=function(Pa){for(var Ya=0;Ya<Pa.length;Ya+=1)if(fa.overrides&&fa.overrides.hasOverride(Pa[Ya]))return void(ra=
!0)};if("constant"===F.value.kind&&F.value.value instanceof ze)ya(F.value.value.sections);else if("source"===F.value.kind){var Ha=function(Pa){ra||(Pa instanceof nf&&qa(Pa.value)===ge?ya(Pa.value.sections):Pa instanceof Rf?ya(Pa.sections):Pa.eachChild(Ha))};V=F.value;V._styleExpression&&Ha(V._styleExpression.expression)}return ra},x}(ch),De={paint:new wg({"background-color":new Cd(Gb.paint_background["background-color"]),"background-pattern":new Ch(Gb.paint_background["background-pattern"]),"background-opacity":new Cd(Gb.paint_background["background-opacity"])})},
xf=function(c){function x(F){c.call(this,F,De)}return c&&(x.__proto__=c),(x.prototype=Object.create(c&&c.prototype)).constructor=x,x}(ch),yf={paint:new wg({"raster-opacity":new Cd(Gb.paint_raster["raster-opacity"]),"raster-hue-rotate":new Cd(Gb.paint_raster["raster-hue-rotate"]),"raster-brightness-min":new Cd(Gb.paint_raster["raster-brightness-min"]),"raster-brightness-max":new Cd(Gb.paint_raster["raster-brightness-max"]),"raster-saturation":new Cd(Gb.paint_raster["raster-saturation"]),"raster-contrast":new Cd(Gb.paint_raster["raster-contrast"]),
"raster-resampling":new Cd(Gb.paint_raster["raster-resampling"]),"raster-fade-duration":new Cd(Gb.paint_raster["raster-fade-duration"])})},Ye=function(c){function x(F){c.call(this,F,yf)}return c&&(x.__proto__=c),(x.prototype=Object.create(c&&c.prototype)).constructor=x,x}(ch),Ke=function(c){function x(F){c.call(this,F,{});this.implementation=F}return c&&(x.__proto__=c),(x.prototype=Object.create(c&&c.prototype)).constructor=x,x.prototype.is3D=function(){return"3d"===this.implementation.renderingMode},
x.prototype.hasOffscreenPass=function(){return void 0!==this.implementation.prerender},x.prototype.recalculate=function(){},x.prototype.updateTransitions=function(){},x.prototype.hasTransition=function(){},x.prototype.serialize=function(){},x.prototype.onAdd=function(F){this.implementation.onAdd&&this.implementation.onAdd(F,F.painter.context.gl)},x.prototype.onRemove=function(F){this.implementation.onRemove&&this.implementation.onRemove(F,F.painter.context.gl)},x}(ch),kg={circle:bl,heatmap:Sk,hillshade:Aj,
fill:Bj,"fill-extrusion":jk,line:Ra,symbol:Pf,background:xf,raster:Ye},Qj=self.HTMLImageElement,Bh=self.HTMLCanvasElement,bi=self.HTMLVideoElement,$i=self.ImageData,Hi=self.ImageBitmap,ae=function(c,x,F,V){this.context=c;this.format=F;this.texture=c.gl.createTexture();this.update(x,V)};ae.prototype.update=function(c,x,F){var V=c.width,fa=c.height,ra=!(this.size&&this.size[0]===V&&this.size[1]===fa||F),ya=this.context,Ha=ya.gl;(this.useMipmap=!(!x||!x.useMipmap),Ha.bindTexture(Ha.TEXTURE_2D,this.texture),
ya.pixelStoreUnpackFlipY.set(!1),ya.pixelStoreUnpack.set(1),ya.pixelStoreUnpackPremultiplyAlpha.set(this.format===Ha.RGBA&&(!x||!1!==x.premultiply)),ra)?(this.size=[V,fa],c instanceof Qj||c instanceof Bh||c instanceof bi||c instanceof $i||Hi&&c instanceof Hi?Ha.texImage2D(Ha.TEXTURE_2D,0,this.format,this.format,Ha.UNSIGNED_BYTE,c):Ha.texImage2D(Ha.TEXTURE_2D,0,this.format,V,fa,0,this.format,Ha.UNSIGNED_BYTE,c.data)):(F=F||{x:0,y:0},x=F.x,F=F.y,c instanceof Qj||c instanceof Bh||c instanceof bi||c instanceof
$i||Hi&&c instanceof Hi?Ha.texSubImage2D(Ha.TEXTURE_2D,0,x,F,Ha.RGBA,Ha.UNSIGNED_BYTE,c):Ha.texSubImage2D(Ha.TEXTURE_2D,0,x,F,V,fa,Ha.RGBA,Ha.UNSIGNED_BYTE,c.data));this.useMipmap&&this.isSizePowerOfTwo()&&Ha.generateMipmap(Ha.TEXTURE_2D)};ae.prototype.bind=function(c,x,F){var V=this.context.gl;V.bindTexture(V.TEXTURE_2D,this.texture);F!==V.LINEAR_MIPMAP_NEAREST||this.isSizePowerOfTwo()||(F=V.LINEAR);c!==this.filter&&(V.texParameteri(V.TEXTURE_2D,V.TEXTURE_MAG_FILTER,c),V.texParameteri(V.TEXTURE_2D,
V.TEXTURE_MIN_FILTER,F||c),this.filter=c);x!==this.wrap&&(V.texParameteri(V.TEXTURE_2D,V.TEXTURE_WRAP_S,x),V.texParameteri(V.TEXTURE_2D,V.TEXTURE_WRAP_T,x),this.wrap=x)};ae.prototype.isSizePowerOfTwo=function(){return this.size[0]===this.size[1]&&0==Math.log(this.size[0])/Math.LN2%1};ae.prototype.destroy=function(){this.context.gl.deleteTexture(this.texture);this.texture=null};var Fk=function(c){var x=this;this._callback=c;this._triggered=!1;"undefined"!=typeof MessageChannel&&(this._channel=new MessageChannel,
this._channel.port2.onmessage=function(){x._triggered=!1;x._callback()})};Fk.prototype.trigger=function(){var c=this;this._triggered||(this._triggered=!0,this._channel?this._channel.port1.postMessage(!0):setTimeout(function(){c._triggered=!1;c._callback()},0))};Fk.prototype.remove=function(){delete this._channel;this._callback=function(){}};var Tj=function(c,x,F){this.target=c;this.parent=x;this.mapId=F;this.callbacks={};this.tasks={};this.taskQueue=[];this.cancelCallbacks={};v(["receive","process"],
this);this.invoker=new Fk(this.process);this.target.addEventListener("message",this.receive,!1);this.globalScope=C()?c:self};Tj.prototype.send=function(c,x,F,V,fa){var ra=this;void 0===fa&&(fa=!1);var ya=Math.round(1E18*Math.random()).toString(36).substring(0,10);F&&(this.callbacks[ya]=F);var Ha=D(this.globalScope)?void 0:[];return this.target.postMessage({id:ya,type:c,hasCallback:!!F,targetMapId:V,mustQueue:fa,sourceMapId:this.mapId,data:md(x,Ha)},Ha),{cancel:function(){F&&delete ra.callbacks[ya];
ra.target.postMessage({id:ya,type:"\x3ccancel\x3e",targetMapId:V,sourceMapId:ra.mapId})}}};Tj.prototype.receive=function(c){var x=c.data;!(c=x.id)||x.targetMapId&&this.mapId!==x.targetMapId||("\x3ccancel\x3e"===x.type?(delete this.tasks[c],x=this.cancelCallbacks[c],delete this.cancelCallbacks[c],x&&x()):C()||x.mustQueue?(this.tasks[c]=x,this.taskQueue.push(c),this.invoker.trigger()):this.processTask(c,x))};Tj.prototype.process=function(){if(this.taskQueue.length){var c=this.taskQueue.shift(),x=this.tasks[c];
delete this.tasks[c];this.taskQueue.length&&this.invoker.trigger();x&&this.processTask(c,x)}};Tj.prototype.processTask=function(c,x){var F=this;if("\x3cresponse\x3e"===x.type){var V=this.callbacks[c];delete this.callbacks[c];V&&(x.error?V(rd(x.error)):V(null,rd(x.data)))}else{var fa=!1,ra=D(this.globalScope)?void 0:[];V=x.hasCallback?function(Pa,Ya){fa=!0;delete F.cancelCallbacks[c];F.target.postMessage({id:c,type:"\x3cresponse\x3e",sourceMapId:F.mapId,error:Pa?md(Pa):null,data:md(Ya,ra)},ra)}:function(Pa){fa=
!0};var ya=null,Ha=rd(x.data);this.parent[x.type]?ya=this.parent[x.type](x.sourceMapId,Ha,V):this.parent.getWorkerSource?(ya=x.type.split("."),ya=this.parent.getWorkerSource(x.sourceMapId,ya[0],Ha.source)[ya[1]](Ha,V)):V(Error("Could not find function "+x.type));!fa&&ya&&ya.cancel&&(this.cancelCallbacks[c]=ya.cancel)}};Tj.prototype.remove=function(){this.invoker.remove();this.target.removeEventListener("message",this.receive,!1)};var ef=function(c,x){c&&(x?this.setSouthWest(c).setNorthEast(x):4===
c.length?this.setSouthWest([c[0],c[1]]).setNorthEast([c[2],c[3]]):this.setSouthWest(c[0]).setNorthEast(c[1]))};ef.prototype.setNorthEast=function(c){return this._ne=c instanceof af?new af(c.lng,c.lat):af.convert(c),this};ef.prototype.setSouthWest=function(c){return this._sw=c instanceof af?new af(c.lng,c.lat):af.convert(c),this};ef.prototype.extend=function(c){var x,F=this._sw,V=this._ne;if(c instanceof af)var fa=x=c;else{if(!(c instanceof ef))return Array.isArray(c)?4===c.length||c.every(Array.isArray)?
this.extend(ef.convert(c)):this.extend(af.convert(c)):this;if(fa=c._ne,!(x=c._sw)||!fa)return this}return F||V?(F.lng=Math.min(x.lng,F.lng),F.lat=Math.min(x.lat,F.lat),V.lng=Math.max(fa.lng,V.lng),V.lat=Math.max(fa.lat,V.lat)):(this._sw=new af(x.lng,x.lat),this._ne=new af(fa.lng,fa.lat)),this};ef.prototype.getCenter=function(){return new af((this._sw.lng+this._ne.lng)/2,(this._sw.lat+this._ne.lat)/2)};ef.prototype.getSouthWest=function(){return this._sw};ef.prototype.getNorthEast=function(){return this._ne};
ef.prototype.getNorthWest=function(){return new af(this.getWest(),this.getNorth())};ef.prototype.getSouthEast=function(){return new af(this.getEast(),this.getSouth())};ef.prototype.getWest=function(){return this._sw.lng};ef.prototype.getSouth=function(){return this._sw.lat};ef.prototype.getEast=function(){return this._ne.lng};ef.prototype.getNorth=function(){return this._ne.lat};ef.prototype.toArray=function(){return[this._sw.toArray(),this._ne.toArray()]};ef.prototype.toString=function(){return"LngLatBounds("+
this._sw.toString()+", "+this._ne.toString()+")"};ef.prototype.isEmpty=function(){return!(this._sw&&this._ne)};ef.prototype.contains=function(c){var x=af.convert(c);c=x.lng;x=x.lat;var F=this._sw.lng<=c&&c<=this._ne.lng;return this._sw.lng>this._ne.lng&&(F=this._sw.lng>=c&&c>=this._ne.lng),this._sw.lat<=x&&x<=this._ne.lat&&F};ef.convert=function(c){return!c||c instanceof ef?c:new ef(c)};var af=function(c,x){if(isNaN(c)||isNaN(x))throw Error("Invalid LngLat object: ("+c+", "+x+")");if(this.lng=+c,
this.lat=+x,90<this.lat||-90>this.lat)throw Error("Invalid LngLat latitude value: must be between -90 and 90");};af.prototype.wrap=function(){return new af(e(this.lng,-180,180),this.lat)};af.prototype.toArray=function(){return[this.lng,this.lat]};af.prototype.toString=function(){return"LngLat("+this.lng+", "+this.lat+")"};af.prototype.distanceTo=function(c){var x=Math.PI/180,F=this.lat*x,V=c.lat*x;return 6371008.8*Math.acos(Math.min(Math.sin(F)*Math.sin(V)+Math.cos(F)*Math.cos(V)*Math.cos((c.lng-
this.lng)*x),1))};af.prototype.toBounds=function(c){void 0===c&&(c=0);c=360*c/40075017;var x=c/Math.cos(Math.PI/180*this.lat);return new ef(new af(this.lng-x,this.lat-c),new af(this.lng+x,this.lat+c))};af.convert=function(c){if(c instanceof af)return c;if(Array.isArray(c)&&(2===c.length||3===c.length))return new af(Number(c[0]),Number(c[1]));if(!Array.isArray(c)&&"object"==typeof c&&null!==c)return new af(Number("lng"in c?c.lng:c.lon),Number(c.lat));throw Error("`LngLatLike` argument must be specified as a LngLat instance, an object {lng: \x3clng\x3e, lat: \x3clat\x3e}, an object {lon: \x3clng\x3e, lat: \x3clat\x3e}, or an array of [\x3clng\x3e, \x3clat\x3e]");
};var Uj=1.27420176E7*Math.PI,Ni=function(c,x,F){void 0===F&&(F=0);this.x=+c;this.y=+x;this.z=+F};Ni.fromLngLat=function(c,x){void 0===x&&(x=0);c=af.convert(c);return new Ni(fg(c.lng),pg(c.lat),x/(Uj*Math.cos(c.lat*Math.PI/180)))};Ni.prototype.toLngLat=function(){return new af(360*this.x-180,If(this.y))};Ni.prototype.toAltitude=function(){return this.z*Uj*Math.cos(If(this.y)*Math.PI/180)};Ni.prototype.meterInMercatorCoordinateUnits=function(){return 1/Uj*(c=If(this.y),1/Math.cos(c*Math.PI/180));var c};
var Gh=function(c,x,F){this.z=c;this.x=x;this.y=F;this.key=Mg(0,c,c,x,F)};Gh.prototype.equals=function(c){return this.z===c.z&&this.x===c.x&&this.y===c.y};Gh.prototype.url=function(c,x){var F,V,fa,ra,ya,Ha=(V=this.y,fa=this.z,ra=Qf(256*(F=this.x),256*(V=Math.pow(2,fa)-V-1),fa),ya=Qf(256*(F+1),256*(V+1),fa),ra[0]+","+ra[1]+","+ya[0]+","+ya[1]),Pa;F="";for(V=this.z;0<V;V--)F+=(this.x&(Pa=1<<V-1)?1:0)+(this.y&Pa?2:0);Pa=F;return c[(this.x+this.y)%c.length].replace("{prefix}",(this.x%16).toString(16)+
(this.y%16).toString(16)).replace("{z}",String(this.z)).replace("{x}",String(this.x)).replace("{y}",String("tms"===x?Math.pow(2,this.z)-this.y-1:this.y)).replace("{quadkey}",Pa).replace("{bbox-epsg-3857}",Ha)};Gh.prototype.getTilePoint=function(c){var x=Math.pow(2,this.z);return new Ud(8192*(c.x*x-this.x),8192*(c.y*x-this.y))};Gh.prototype.toString=function(){return this.z+"/"+this.x+"/"+this.y};var Gk=function(c,x){this.wrap=c;this.canonical=x;this.key=Mg(c,x.z,x.z,x.x,x.y)},wf=function(c,x,F,V,
fa){this.overscaledZ=c;this.wrap=x;this.canonical=new Gh(F,+V,+fa);this.key=Mg(x,c,F,V,fa)};wf.prototype.equals=function(c){return this.overscaledZ===c.overscaledZ&&this.wrap===c.wrap&&this.canonical.equals(c.canonical)};wf.prototype.scaledTo=function(c){var x=this.canonical.z-c;return c>this.canonical.z?new wf(c,this.wrap,this.canonical.z,this.canonical.x,this.canonical.y):new wf(c,this.wrap,c,this.canonical.x>>x,this.canonical.y>>x)};wf.prototype.calculateScaledKey=function(c,x){var F=this.canonical.z-
c;return c>this.canonical.z?Mg(this.wrap*+x,c,this.canonical.z,this.canonical.x,this.canonical.y):Mg(this.wrap*+x,c,c,this.canonical.x>>F,this.canonical.y>>F)};wf.prototype.isChildOf=function(c){if(c.wrap!==this.wrap)return!1;var x=this.canonical.z-c.canonical.z;return 0===c.overscaledZ||c.overscaledZ<this.overscaledZ&&c.canonical.x===this.canonical.x>>x&&c.canonical.y===this.canonical.y>>x};wf.prototype.children=function(c){if(this.overscaledZ>=c)return[new wf(this.overscaledZ+1,this.wrap,this.canonical.z,
this.canonical.x,this.canonical.y)];c=this.canonical.z+1;var x=2*this.canonical.x,F=2*this.canonical.y;return[new wf(c,this.wrap,c,x,F),new wf(c,this.wrap,c,x+1,F),new wf(c,this.wrap,c,x,F+1),new wf(c,this.wrap,c,x+1,F+1)]};wf.prototype.isLessThan=function(c){return this.wrap<c.wrap||!(this.wrap>c.wrap)&&(this.overscaledZ<c.overscaledZ||!(this.overscaledZ>c.overscaledZ)&&(this.canonical.x<c.canonical.x||!(this.canonical.x>c.canonical.x)&&this.canonical.y<c.canonical.y))};wf.prototype.wrapped=function(){return new wf(this.overscaledZ,
0,this.canonical.z,this.canonical.x,this.canonical.y)};wf.prototype.unwrapTo=function(c){return new wf(this.overscaledZ,c,this.canonical.z,this.canonical.x,this.canonical.y)};wf.prototype.overscaleFactor=function(){return Math.pow(2,this.overscaledZ-this.canonical.z)};wf.prototype.toUnwrapped=function(){return new Gk(this.wrap,this.canonical)};wf.prototype.toString=function(){return this.overscaledZ+"/"+this.canonical.x+"/"+this.canonical.y};wf.prototype.getTilePoint=function(c){return this.canonical.getTilePoint(new Ni(c.x-
this.wrap,c.y))};Gc("CanonicalTileID",Gh);Gc("OverscaledTileID",wf,{omit:["posMatrix"]});var gi=function(c,x,F){if(this.uid=c,x.height!==x.width)throw new RangeError("DEM tiles must be square");if(F&&"mapbox"!==F&&"terrarium"!==F)return z('"'+F+'" is not a valid encoding type. Valid types include "mapbox" and "terrarium".');this.stride=x.height;c=this.dim=x.height-2;this.data=new Uint32Array(x.data.buffer);this.encoding=F||"mapbox";for(x=0;x<c;x++)this.data[this._idx(-1,x)]=this.data[this._idx(0,
x)],this.data[this._idx(c,x)]=this.data[this._idx(c-1,x)],this.data[this._idx(x,-1)]=this.data[this._idx(x,0)],this.data[this._idx(x,c)]=this.data[this._idx(x,c-1)];this.data[this._idx(-1,-1)]=this.data[this._idx(0,0)];this.data[this._idx(c,-1)]=this.data[this._idx(c-1,0)];this.data[this._idx(-1,c)]=this.data[this._idx(0,c-1)];this.data[this._idx(c,c)]=this.data[this._idx(c-1,c-1)]};gi.prototype.get=function(c,x){var F=new Uint8Array(this.data.buffer);c=4*this._idx(c,x);return("terrarium"===this.encoding?
this._unpackTerrarium:this._unpackMapbox)(F[c],F[c+1],F[c+2])};gi.prototype.getUnpackVector=function(){return"terrarium"===this.encoding?[256,1,1/256,32768]:[6553.6,25.6,.1,1E4]};gi.prototype._idx=function(c,x){if(-1>c||c>=this.dim+1||-1>x||x>=this.dim+1)throw new RangeError("out of range source coordinates for DEM data");return(x+1)*this.stride+(c+1)};gi.prototype._unpackMapbox=function(c,x,F){return(65536*c+256*x+F)/10-1E4};gi.prototype._unpackTerrarium=function(c,x,F){return 256*c+x+F/256-32768};
gi.prototype.getPixels=function(){return new Cf({width:this.stride,height:this.stride},new Uint8Array(this.data.buffer))};gi.prototype.backfillBorder=function(c,x,F){if(this.dim!==c.dim)throw Error("dem dimension mismatch");var V=x*this.dim,fa=x*this.dim+this.dim,ra=F*this.dim,ya=F*this.dim+this.dim;switch(x){case -1:V=fa-1;break;case 1:fa=V+1}switch(F){case -1:ra=ya-1;break;case 1:ya=ra+1}x=-x*this.dim;for(F=-F*this.dim;ra<ya;ra++)for(var Ha=V;Ha<fa;Ha++)this.data[this._idx(Ha,ra)]=c.data[this._idx(Ha+
x,ra+F)]};Gc("DEMData",gi);var cl=function(c){this._stringToNumber={};this._numberToString=[];for(var x=0;x<c.length;x++){var F=c[x];this._stringToNumber[F]=x;this._numberToString[x]=F}};cl.prototype.encode=function(c){return this._stringToNumber[c]};cl.prototype.decode=function(c){return this._numberToString[c]};var Hk=function(c,x,F,V,fa){this.type="Feature";this._vectorTileFeature=c;c._z=x;c._x=F;c._y=V;this.properties=c.properties;this.id=fa},Vk={geometry:{configurable:!0}};Vk.geometry.get=function(){return void 0===
this._geometry&&(this._geometry=this._vectorTileFeature.toGeoJSON(this._vectorTileFeature._x,this._vectorTileFeature._y,this._vectorTileFeature._z).geometry),this._geometry};Vk.geometry.set=function(c){this._geometry=c};Hk.prototype.toJSON=function(){var c={geometry:this.geometry},x;for(x in this)"_geometry"!==x&&"_vectorTileFeature"!==x&&(c[x]=this[x]);return c};Object.defineProperties(Hk.prototype,Vk);var Ik=function(){this.state={};this.stateChanges={};this.deletedStates={}};Ik.prototype.updateState=
function(c,x,F){x=String(x);if(this.stateChanges[c]=this.stateChanges[c]||{},this.stateChanges[c][x]=this.stateChanges[c][x]||{},f(this.stateChanges[c][x],F),null===this.deletedStates[c])for(var V in this.deletedStates[c]={},this.state[c])V!==x&&(this.deletedStates[c][V]=null);else if(this.deletedStates[c]&&null===this.deletedStates[c][x])for(var fa in this.deletedStates[c][x]={},this.state[c][x])F[fa]||(this.deletedStates[c][x][fa]=null);else for(var ra in F)this.deletedStates[c]&&this.deletedStates[c][x]&&
null===this.deletedStates[c][x][ra]&&delete this.deletedStates[c][x][ra]};Ik.prototype.removeFeatureState=function(c,x,F){if(null!==this.deletedStates[c]){var V=String(x);if(this.deletedStates[c]=this.deletedStates[c]||{},F&&void 0!==x)null!==this.deletedStates[c][V]&&(this.deletedStates[c][V]=this.deletedStates[c][V]||{},this.deletedStates[c][V][F]=null);else if(void 0!==x)if(this.stateChanges[c]&&this.stateChanges[c][V])for(F in this.deletedStates[c][V]={},this.stateChanges[c][V])this.deletedStates[c][V][F]=
null;else this.deletedStates[c][V]=null;else this.deletedStates[c]=null}};Ik.prototype.getState=function(c,x){var F=String(x);F=f({},(this.state[c]||{})[F],(this.stateChanges[c]||{})[F]);if(null===this.deletedStates[c])return{};if(this.deletedStates[c]){c=this.deletedStates[c][x];if(null===c)return{};for(var V in c)delete F[V]}return F};Ik.prototype.initializeTileState=function(c,x){c.setFeatureState(this.state,x)};Ik.prototype.coalesceChanges=function(c,x){var F={};for(ya in this.stateChanges){this.state[ya]=
this.state[ya]||{};var V={},fa;for(fa in this.stateChanges[ya])this.state[ya][fa]||(this.state[ya][fa]={}),f(this.state[ya][fa],this.stateChanges[ya][fa]),V[fa]=this.state[ya][fa];F[ya]=V}for(var ra in this.deletedStates){this.state[ra]=this.state[ra]||{};var ya={};if(null===this.deletedStates[ra])for(var Ha in this.state[ra])ya[Ha]={},this.state[ra][Ha]={};else for(var Pa in this.deletedStates[ra]){if(null===this.deletedStates[ra][Pa])this.state[ra][Pa]={};else for(V=0,fa=Object.keys(this.deletedStates[ra][Pa]);V<
fa.length;V+=1)delete this.state[ra][Pa][fa[V]];ya[Pa]=this.state[ra][Pa]}F[ra]=F[ra]||{};f(F[ra],ya)}if(this.stateChanges={},this.deletedStates={},0!==Object.keys(F).length)for(var Ya in c)c[Ya].setFeatureState(F,x)};var ej=function(c,x){this.tileID=c;this.x=c.canonical.x;this.y=c.canonical.y;this.z=c.canonical.z;this.grid=new Vc(8192,16,0);this.grid3D=new Vc(8192,16,0);this.featureIndexArray=new jj;this.promoteId=x};ej.prototype.insert=function(c,x,F,V,fa,ra){c=this.featureIndexArray.length;this.featureIndexArray.emplaceBack(F,
V,fa);F=ra?this.grid3D:this.grid;for(V=0;V<x.length;V++){fa=x[V];ra=[1/0,1/0,-1/0,-1/0];for(var ya=0;ya<fa.length;ya++){var Ha=fa[ya];ra[0]=Math.min(ra[0],Ha.x);ra[1]=Math.min(ra[1],Ha.y);ra[2]=Math.max(ra[2],Ha.x);ra[3]=Math.max(ra[3],Ha.y)}8192>ra[0]&&8192>ra[1]&&0<=ra[2]&&0<=ra[3]&&F.insert(c,ra[0],ra[1],ra[2],ra[3])}};ej.prototype.loadVTLayers=function(){return this.vtLayers||(this.vtLayers=(new oh.VectorTile(new He(this.rawTileData))).layers,this.sourceLayerCoder=new cl(this.vtLayers?Object.keys(this.vtLayers).sort():
["_geojsonTileLayer"])),this.vtLayers};ej.prototype.query=function(c,x,F,V){var fa=this;this.loadVTLayers();var ra=c.params||{},ya=8192/c.tileSize/c.scale,Ha=vb(ra.filter),Pa=c.queryGeometry,Ya=c.queryPadding*ya,hb=qf(Pa),Ab=this.grid.query(hb.minX-Ya,hb.minY-Ya,hb.maxX+Ya,hb.maxY+Ya),Fb=qf(c.cameraQueryGeometry);hb=0;for(Fb=this.grid3D.query(Fb.minX-Ya,Fb.minY-Ya,Fb.maxX+Ya,Fb.maxY+Ya,function(rb,zb,hc,vc){a:{var pc=c.cameraQueryGeometry;rb-=Ya;zb-=Ya;hc+=Ya;vc+=Ya;for(var $c=0;$c<pc.length;$c+=
1){var fd=pc[$c];if(rb<=fd.x&&zb<=fd.y&&hc>=fd.x&&vc>=fd.y){pc=!0;break a}}rb=[new Ud(rb,zb),new Ud(rb,vc),new Ud(hc,vc),new Ud(hc,zb)];if(2<pc.length)for(zb=0;zb<rb.length;zb+=1)if(kd(pc,rb[zb])){pc=!0;break a}for(zb=0;zb<pc.length-1;zb++){vc=pc[zb];hc=pc[zb+1];$c=rb;fd=$c[0];var nd=$c[2];vc.x<fd.x&&hc.x<fd.x||vc.x>nd.x&&hc.x>nd.x||vc.y<fd.y&&hc.y<fd.y||vc.y>nd.y&&hc.y>nd.y?vc=!1:(fd=E(vc,hc,$c[0]),vc=fd!==E(vc,hc,$c[1])||fd!==E(vc,hc,$c[2])||fd!==E(vc,hc,$c[3]));if(vc){pc=!0;break a}}pc=!1}return pc});hb<
Fb.length;hb+=1)Ab.push(Fb[hb]);Ab.sort(nj);var Jb,Rb={};hb=function(rb){rb=Ab[rb];if(rb!==Jb){Jb=rb;rb=fa.featureIndexArray.get(rb);var zb=null;fa.loadMatchingFeature(Rb,rb.bucketIndex,rb.sourceLayerIndex,rb.featureIndex,Ha,ra.layers,ra.availableImages,x,F,V,function(hc,vc,pc){return zb||(zb=Xd(hc)),vc.queryIntersectsFeature(Pa,hc,pc,zb,fa.z,c.transform,ya,c.pixelPosMatrix)})}};for(Fb=0;Fb<Ab.length;Fb++)hb(Fb);return Rb};ej.prototype.loadMatchingFeature=function(c,x,F,V,fa,ra,ya,Ha,Pa,Ya,hb){x=
this.bucketLayerIDs[x];var Ab;if(!(Ab=!ra))a:{for(Ab=0;Ab<ra.length;Ab++)if(0<=x.indexOf(ra[Ab])){Ab=!0;break a}Ab=!1}if(Ab&&(Ab=this.sourceLayerCoder.decode(F),F=this.vtLayers[Ab].feature(V),fa.filter(new Xe(this.tileID.overscaledZ),F)))for(fa=this.getId(F,Ab),Ab=0;Ab<x.length;Ab++){var Fb=x[Ab];if(!(ra&&0>ra.indexOf(Fb))){var Jb=Ha[Fb];if(Jb){var Rb={};void 0!==fa&&Ya&&(Rb=Ya.getState(Jb.sourceLayer||"_geojsonTileLayer",fa));var rb=Pa[Fb];rb.paint=bh(rb.paint,Jb.paint,F,Rb,ya);rb.layout=bh(rb.layout,
Jb.layout,F,Rb,ya);if(Jb=!hb||hb(F,Jb,Rb))Rb=new Hk(F,this.z,this.x,this.y,fa),Rb.layer=rb,rb=c[Fb],void 0===rb&&(rb=c[Fb]=[]),rb.push({featureIndex:V,feature:Rb,intersectionZ:Jb})}}}};ej.prototype.lookupSymbolFeatures=function(c,x,F,V,fa,ra,ya,Ha){var Pa={};this.loadVTLayers();fa=vb(fa);for(var Ya=0;Ya<c.length;Ya+=1)this.loadMatchingFeature(Pa,F,V,c[Ya],fa,ra,ya,Ha,x);return Pa};ej.prototype.hasLayer=function(c){for(var x=0,F=this.bucketLayerIDs;x<F.length;x+=1)for(var V=0,fa=F[x];V<fa.length;V+=
1)if(c===fa[V])return!0;return!1};ej.prototype.getId=function(c,x){var F=c.id;return this.promoteId&&"boolean"==typeof(F=c.properties["string"==typeof this.promoteId?this.promoteId:this.promoteId[x]])&&(F=Number(F)),F};Gc("FeatureIndex",ej,{omit:["rawTileData","sourceLayerCoder"]});var Tf=function(c,x){this.tileID=c;this.uid=Ng++;this.uses=0;this.tileSize=x;this.buckets={};this.expirationTime=null;this.queryPadding=0;this.hasRTLText=this.hasSymbolBuckets=!1;this.dependencies={};this.expiredRequestCount=
0;this.state="loading"};Tf.prototype.registerFadeDuration=function(c){c+=this.timeAdded;c<Cg.now()||this.fadeEndTime&&c<this.fadeEndTime||(this.fadeEndTime=c)};Tf.prototype.wasRequested=function(){return"errored"===this.state||"loaded"===this.state||"reloading"===this.state};Tf.prototype.loadVectorData=function(c,x,F){if(this.hasData()&&this.unloadVectorData(),this.state="loaded",c){for(var V in c.featureIndex&&(this.latestFeatureIndex=c.featureIndex,c.rawTileData?(this.latestRawTileData=c.rawTileData,
this.latestFeatureIndex.rawTileData=c.rawTileData):this.latestRawTileData&&(this.latestFeatureIndex.rawTileData=this.latestRawTileData)),this.collisionBoxArray=c.collisionBoxArray,this.buckets=function(Ha,Pa){var Ya={};if(!Pa)return Ya;for(var hb=function(){var Jb=Fb[Ab],Rb=Jb.layerIds.map(function(zb){return Pa.getLayer(zb)}).filter(Boolean);if(0!==Rb.length){Jb.layers=Rb;Jb.stateDependentLayerIds&&(Jb.stateDependentLayers=Jb.stateDependentLayerIds.map(function(zb){return Rb.filter(function(hc){return hc.id===
zb})[0]}));for(var rb=0;rb<Rb.length;rb+=1)Ya[Rb[rb].id]=Jb}},Ab=0,Fb=Ha;Ab<Fb.length;Ab+=1)hb();return Ya}(c.buckets,x.style),this.hasSymbolBuckets=!1,this.buckets){var fa=this.buckets[V];if(fa instanceof Sd){if(this.hasSymbolBuckets=!0,!F)break;fa.justReloaded=!0}}if(this.hasRTLText=!1,this.hasSymbolBuckets)for(var ra in this.buckets)if(F=this.buckets[ra],F instanceof Sd&&F.hasRTLText){this.hasRTLText=!0;ag.isLoading()||ag.isLoaded()||"deferred"!==Xf||ak();break}for(var ya in this.queryPadding=
0,this.buckets)ra=this.buckets[ya],this.queryPadding=Math.max(this.queryPadding,x.style.getLayer(ya).queryRadius(ra));c.imageAtlas&&(this.imageAtlas=c.imageAtlas);c.glyphAtlasImage&&(this.glyphAtlasImage=c.glyphAtlasImage)}else this.collisionBoxArray=new di};Tf.prototype.unloadVectorData=function(){for(var c in this.buckets)this.buckets[c].destroy();this.buckets={};this.imageAtlasTexture&&this.imageAtlasTexture.destroy();this.imageAtlas&&(this.imageAtlas=null);this.glyphAtlasTexture&&this.glyphAtlasTexture.destroy();
this.latestFeatureIndex=null;this.state="unloaded"};Tf.prototype.getBucket=function(c){return this.buckets[c.id]};Tf.prototype.upload=function(c){for(var x in this.buckets){var F=this.buckets[x];F.uploadPending()&&F.upload(c)}x=c.gl;this.imageAtlas&&!this.imageAtlas.uploaded&&(this.imageAtlasTexture=new ae(c,this.imageAtlas.image,x.RGBA),this.imageAtlas.uploaded=!0);this.glyphAtlasImage&&(this.glyphAtlasTexture=new ae(c,this.glyphAtlasImage,x.ALPHA),this.glyphAtlasImage=null)};Tf.prototype.prepare=
function(c){this.imageAtlas&&this.imageAtlas.patchUpdatedImages(c,this.imageAtlasTexture)};Tf.prototype.queryRenderedFeatures=function(c,x,F,V,fa,ra,ya,Ha,Pa,Ya){return this.latestFeatureIndex&&this.latestFeatureIndex.rawTileData?this.latestFeatureIndex.query({queryGeometry:V,cameraQueryGeometry:fa,scale:ra,tileSize:this.tileSize,pixelPosMatrix:Ya,transform:Ha,params:ya,queryPadding:this.queryPadding*Pa},c,x,F):{}};Tf.prototype.querySourceFeatures=function(c,x){var F=this.latestFeatureIndex;if(F&&
F.rawTileData){var V=F.loadVTLayers(),fa=x?x.sourceLayer:"";if(V=V._geojsonTileLayer||V[fa]){x=vb(x&&x.filter);var ra=this.tileID.canonical,ya=ra.z,Ha=ra.x;ra=ra.y;for(var Pa={z:ya,x:Ha,y:ra},Ya=0;Ya<V.length;Ya++){var hb=V.feature(Ya);if(x.filter(new Xe(this.tileID.overscaledZ),hb)){var Ab=F.getId(hb,fa);hb=new Hk(hb,ya,Ha,ra,Ab);hb.tile=Pa;c.push(hb)}}}}};Tf.prototype.hasData=function(){return"loaded"===this.state||"reloading"===this.state||"expired"===this.state};Tf.prototype.patternsLoaded=function(){return this.imageAtlas&&
!!Object.keys(this.imageAtlas.patternPositions).length};Tf.prototype.setExpiryData=function(c){var x=this.expirationTime;c.cacheControl?(c=u(c.cacheControl),c["max-age"]&&(this.expirationTime=Date.now()+1E3*c["max-age"])):c.expires&&(this.expirationTime=(new Date(c.expires)).getTime());if(this.expirationTime){c=Date.now();var F=!1;this.expirationTime>c?F=!1:x?this.expirationTime<x?F=!0:(x=this.expirationTime-x)?this.expirationTime=c+Math.max(x,3E4):F=!0:F=!0;F?(this.expiredRequestCount++,this.state=
"expired"):this.expiredRequestCount=0}};Tf.prototype.getExpiryTimeout=function(){if(this.expirationTime)return this.expiredRequestCount?1E3*(1<<Math.min(this.expiredRequestCount-1,31)):Math.min(this.expirationTime-(new Date).getTime(),Math.pow(2,31)-1)};Tf.prototype.setFeatureState=function(c,x){if(this.latestFeatureIndex&&this.latestFeatureIndex.rawTileData&&0!==Object.keys(c).length){var F=this.latestFeatureIndex.loadVTLayers(),V;for(V in this.buckets)if(x.style.hasLayer(V)){var fa=this.buckets[V],
ra=fa.layers[0].sourceLayer||"_geojsonTileLayer",ya=F[ra];ra=c[ra];ya&&ra&&0!==Object.keys(ra).length&&(fa.update(ra,ya,this.imageAtlas&&this.imageAtlas.patternPositions||{}),(ya=x&&x.style&&x.style.getLayer(V))&&(this.queryPadding=Math.max(this.queryPadding,ya.queryRadius(fa))))}}};Tf.prototype.holdingForFade=function(){return void 0!==this.symbolFadeHoldUntil};Tf.prototype.symbolFadeFinished=function(){return!this.symbolFadeHoldUntil||this.symbolFadeHoldUntil<Cg.now()};Tf.prototype.clearFadeHold=
function(){this.symbolFadeHoldUntil=void 0};Tf.prototype.setHoldDuration=function(c){this.symbolFadeHoldUntil=Cg.now()+c};Tf.prototype.setDependencies=function(c,x){for(var F={},V=0;V<x.length;V+=1)F[x[V]]=!0;this.dependencies[c]=F};Tf.prototype.hasDependency=function(c,x){for(var F=0;F<c.length;F+=1){var V=this.dependencies[c[F]];if(V)for(var fa=0,ra=x;fa<ra.length;fa+=1)if(V[ra[fa]])return!0}return!1};var Vj=self.performance,Y=function(c){this._marks={start:[c.url,"start"].join("#"),end:[c.url,
"end"].join("#"),measure:c.url.toString()};Vj.mark(this._marks.start)};Y.prototype.finish=function(){Vj.mark(this._marks.end);var c=Vj.getEntriesByName(this._marks.measure);return 0===c.length&&(Vj.measure(this._marks.measure,this._marks.start,this._marks.end),c=Vj.getEntriesByName(this._marks.measure),Vj.clearMarks(this._marks.start),Vj.clearMarks(this._marks.end),Vj.clearMeasures(this._marks.measure)),c};a.Actor=Tj;a.AlphaImage=ug;a.CanonicalTileID=Gh;a.CollisionBoxArray=di;a.Color=Qd;a.DEMData=
gi;a.DataConstantProperty=Cd;a.DictionaryCoder=cl;a.EXTENT=8192;a.ErrorEvent=lc;a.EvaluationParameters=Xe;a.Event=cc;a.Evented=kc;a.FeatureIndex=ej;a.FillBucket=Yf;a.FillExtrusionBucket=Gg;a.ImageAtlas=Ec;a.ImagePosition=uc;a.LineBucket=Aa;a.LngLat=af;a.LngLatBounds=ef;a.MercatorCoordinate=Ni;a.ONE_EM=24;a.OverscaledTileID=wf;a.Point=Ud;a.Point$1=Ud;a.Properties=wg;a.Protobuf=He;a.RGBAImage=Cf;a.RequestManager=Mf;a.RequestPerformance=Y;a.ResourceType=wa;a.SegmentVector=zf;a.SourceFeatureState=Ik;
a.StructArrayLayout1ui2=vj;a.StructArrayLayout2f1f2i16=bg;a.StructArrayLayout2i4=Oi;a.StructArrayLayout3ui6=ci;a.StructArrayLayout4i8=Ih;a.SymbolBucket=Sd;a.Texture=ae;a.Tile=Tf;a.Transitionable=fh;a.Uniform1f=Ck;a.Uniform1i=ll;a.Uniform2f=ml;a.Uniform3f=Rk;a.Uniform4f=zj;a.UniformColor=ei;a.UniformMatrix4f=Sg;a.UnwrappedTileID=Gk;a.ValidationError=dc;a.WritingMode=Qc;a.ZoomHistory=Zj;a.add=function(c,x,F){return c[0]=x[0]+F[0],c[1]=x[1]+F[1],c[2]=x[2]+F[2],c};a.addDynamicAttributes=Oj;a.asyncAll=
function(c,x,F){if(!c.length)return F(null,[]);var V=c.length,fa=Array(c.length),ra=null;c.forEach(function(ya,Ha){x(ya,function(Pa,Ya){Pa&&(ra=Pa);fa[Ha]=Ya;0==--V&&F(ra,fa)})})};a.bezier=p;a.bindAll=v;a.browser=Cg;a.cacheEntryPossiblyAdded=function(c){++ea>aa&&(c.getActor().send("enforceCacheSizeLimit",W),ea=0)};a.clamp=d;a.clearTileCache=function(c){var x=self.caches.delete("mapbox-tiles");c&&x.catch(c).then(function(){return c()})};a.clipLine=Hf;a.clone=function(c){var x=new sg(16);return x[0]=
c[0],x[1]=c[1],x[2]=c[2],x[3]=c[3],x[4]=c[4],x[5]=c[5],x[6]=c[6],x[7]=c[7],x[8]=c[8],x[9]=c[9],x[10]=c[10],x[11]=c[11],x[12]=c[12],x[13]=c[13],x[14]=c[14],x[15]=c[15],x};a.clone$1=A;a.clone$2=function(c){var x=new sg(3);return x[0]=c[0],x[1]=c[1],x[2]=c[2],x};a.collisionCircleLayout=Cb;a.config=Ve;a.create=function(){var c=new sg(16);return sg!=Float32Array&&(c[1]=0,c[2]=0,c[3]=0,c[4]=0,c[6]=0,c[7]=0,c[8]=0,c[9]=0,c[11]=0,c[12]=0,c[13]=0,c[14]=0),c[0]=1,c[5]=1,c[10]=1,c[15]=1,c};a.create$1=function(){var c=
new sg(9);return sg!=Float32Array&&(c[1]=0,c[2]=0,c[3]=0,c[5]=0,c[6]=0,c[7]=0),c[0]=1,c[4]=1,c[8]=1,c};a.create$2=function(){var c=new sg(4);return sg!=Float32Array&&(c[1]=0,c[2]=0),c[0]=1,c[3]=1,c};a.createCommonjsModule=h;a.createExpression=Nc;a.createLayout=Rd;a.createStyleLayer=function(c){return"custom"===c.type?new Ke(c):new kg[c.type](c)};a.cross=function(c,x,F){var V=x[0],fa=x[1];x=x[2];var ra=F[0],ya=F[1];F=F[2];return c[0]=fa*F-x*ya,c[1]=x*ra-V*F,c[2]=V*ya-fa*ra,c};a.deepEqual=function V(x,
F){if(Array.isArray(x)){if(!Array.isArray(F)||x.length!==F.length)return!1;for(var fa=0;fa<x.length;fa++)if(!V(x[fa],F[fa]))return!1;return!0}if("object"==typeof x&&null!==x&&null!==F){if("object"!=typeof F||Object.keys(x).length!==Object.keys(F).length)return!1;for(fa in x)if(!V(x[fa],F[fa]))return!1;return!0}return x===F};a.dot=function(x,F){return x[0]*F[0]+x[1]*F[1]+x[2]*F[2]};a.dot$1=function(x,F){return x[0]*F[0]+x[1]*F[1]+x[2]*F[2]+x[3]*F[3]};a.ease=tk;a.emitValidationErrors=gd;a.endsWith=
w;a.enforceCacheSizeLimit=function(x){M();lh&&lh.then(function(F){F.keys().then(function(V){for(var fa=0;fa<V.length-x;fa++)F.delete(V[fa])})})};a.evaluateSizeForFeature=$g;a.evaluateSizeForZoom=Ti;a.evaluateVariableOffset=Nj;a.evented=Dj;a.extend=f;a.featureFilter=vb;a.filterObject=B;a.fromRotation=function(x,F){var V=Math.sin(F);F=Math.cos(F);return x[0]=F,x[1]=V,x[2]=0,x[3]=-V,x[4]=F,x[5]=0,x[6]=0,x[7]=0,x[8]=1,x};a.getAnchorAlignment=xi;a.getAnchorJustification=mj;a.getArrayBuffer=yb;a.getImage=
mc;a.getJSON=function(x,F){return ab(f(x,{type:"json"}),F)};a.getRTLTextPluginStatus=function(){return Xf};a.getReferrer=Sa;a.getVideo=function(x,F){var V=self.document.createElement("video");V.muted=!0;V.onloadstart=function(){F(null,V)};for(var fa=0;fa<x.length;fa++){var ra=self.document.createElement("source");var ya=x[fa];var Ha=void 0;(Ha=self.document.createElement("a")).href=ya;Ha.protocol===self.document.location.protocol&&Ha.host===self.document.location.host||(V.crossOrigin="Anonymous");
ra.src=x[fa];V.appendChild(ra)}return{cancel:function(){}}};a.identity=Jd;a.invert=function(x,F){var V=F[0],fa=F[1],ra=F[2],ya=F[3],Ha=F[4],Pa=F[5],Ya=F[6],hb=F[7],Ab=F[8],Fb=F[9],Jb=F[10],Rb=F[11],rb=F[12],zb=F[13],hc=F[14];F=F[15];var vc=V*Pa-fa*Ha,pc=V*Ya-ra*Ha,$c=V*hb-ya*Ha,fd=fa*Ya-ra*Pa,nd=fa*hb-ya*Pa,xd=ra*hb-ya*Ya,vd=Ab*zb-Fb*rb,Vd=Ab*hc-Jb*rb,he=Ab*F-Rb*rb,Wd=Fb*hc-Jb*zb,ce=Fb*F-Rb*zb,ve=Jb*F-Rb*hc,Md=vc*ve-pc*ce+$c*Wd+fd*he-nd*Vd+xd*vd;return Md?(x[0]=(Pa*ve-Ya*ce+hb*Wd)*(Md=1/Md),x[1]=
(ra*ce-fa*ve-ya*Wd)*Md,x[2]=(zb*xd-hc*nd+F*fd)*Md,x[3]=(Jb*nd-Fb*xd-Rb*fd)*Md,x[4]=(Ya*he-Ha*ve-hb*Vd)*Md,x[5]=(V*ve-ra*he+ya*Vd)*Md,x[6]=(hc*$c-rb*xd-F*pc)*Md,x[7]=(Ab*xd-Jb*$c+Rb*pc)*Md,x[8]=(Ha*ce-Pa*he+hb*vd)*Md,x[9]=(fa*he-V*ce-ya*vd)*Md,x[10]=(rb*nd-zb*$c+F*vc)*Md,x[11]=(Fb*$c-Ab*nd-Rb*vc)*Md,x[12]=(Pa*Vd-Ha*Wd-Ya*vd)*Md,x[13]=(V*Wd-fa*Vd+ra*vd)*Md,x[14]=(zb*pc-rb*fd-hc*vc)*Md,x[15]=(Ab*fd-Fb*pc+Jb*vc)*Md,x):null};a.isChar=Gd;a.isMapboxURL=L;a.keysDifference=function(x,F){var V=[],fa;for(fa in x)fa in
F||V.push(fa);return V};a.makeRequest=ab;a.mapObject=y;a.mercatorXfromLng=fg;a.mercatorYfromLat=pg;a.mercatorZfromAltitude=function(x,F){return x/(Uj*Math.cos(F*Math.PI/180))};a.mul=fe;a.multiply=fe;a.mvt=oh;a.normalize=function(x,F){var V=F[0],fa=F[1],ra=F[2];V=V*V+fa*fa+ra*ra;return 0<V&&(V=1/Math.sqrt(V)),x[0]=F[0]*V,x[1]=F[1]*V,x[2]=F[2]*V,x};a.number=xa;a.offscreenCanvasSupported=T;a.ortho=function(x,F,V,fa,ra,ya,Ha){var Pa=1/(F-V),Ya=1/(fa-ra),hb=1/(ya-Ha);return x[0]=-2*Pa,x[1]=0,x[2]=0,x[3]=
0,x[4]=0,x[5]=-2*Ya,x[6]=0,x[7]=0,x[8]=0,x[9]=0,x[10]=2*hb,x[11]=0,x[12]=(F+V)*Pa,x[13]=(ra+fa)*Ya,x[14]=(Ha+ya)*hb,x[15]=1,x};a.parseGlyphPBF=function(x){return(new He(x)).readFields(ng,[])};a.pbf=He;a.performSymbolLayout=function(x,F,V,fa,ra,ya,Ha){x.createArrays();x.tilePixelRatio=8192/(512*x.overscaling);x.compareText={};x.iconsNeedLinear=!1;var Pa=x.layers[0].layout,Ya=x.layers[0]._unevaluatedLayout._values,hb={};if("composite"===x.textSizeData.kind){var Ab=x.textSizeData,Fb=Ab.maxZoom;hb.compositeTextSizes=
[Ya["text-size"].possiblyEvaluate(new Xe(Ab.minZoom),Ha),Ya["text-size"].possiblyEvaluate(new Xe(Fb),Ha)]}"composite"===x.iconSizeData.kind&&(Ab=x.iconSizeData,Fb=Ab.maxZoom,hb.compositeIconSizes=[Ya["icon-size"].possiblyEvaluate(new Xe(Ab.minZoom),Ha),Ya["icon-size"].possiblyEvaluate(new Xe(Fb),Ha)]);hb.layoutTextSize=Ya["text-size"].possiblyEvaluate(new Xe(x.zoom+1),Ha);hb.layoutIconSize=Ya["icon-size"].possiblyEvaluate(new Xe(x.zoom+1),Ha);hb.textMaxSize=Ya["text-size"].possiblyEvaluate(new Xe(18));
var Jb=24*Pa.get("text-line-height"),Rb="map"===Pa.get("text-rotation-alignment")&&"point"!==Pa.get("symbol-placement"),rb=Pa.get("text-keep-upright"),zb=Pa.get("text-size");Ya=function(){var pc=vc[hc],$c=Pa.get("text-font").evaluate(pc,{},Ha).join(","),fd=zb.evaluate(pc,{},Ha),nd=hb.layoutTextSize.evaluate(pc,{},Ha),xd=hb.layoutIconSize.evaluate(pc,{},Ha),vd={horizontal:{},vertical:void 0},Vd=pc.text,he=[0,0];if(Vd){var Wd=Vd.toString(),ce=24*Pa.get("text-letter-spacing").evaluate(pc,{},Ha),ve=function(Ae){for(var Df=
0;Df<Ae.length;Df+=1)if(Zf=Ae[Df].charCodeAt(0),Gd.Arabic(Zf)||Gd["Arabic Supplement"](Zf)||Gd["Arabic Extended-A"](Zf)||Gd["Arabic Presentation Forms-A"](Zf)||Gd["Arabic Presentation Forms-B"](Zf))return!1;var Zf;return!0}(Wd)?ce:0,Md=Pa.get("text-anchor").evaluate(pc,{},Ha),Id=Pa.get("text-variable-anchor");Id||(he=(ce=Pa.get("text-radial-offset").evaluate(pc,{},Ha))?Nj(Md,[24*ce,Nd]):Pa.get("text-offset").evaluate(pc,{},Ha).map(function(Ae){return 24*Ae}));var Pd=Rb?"center":Pa.get("text-justify").evaluate(pc,
{},Ha),Me=Pa.get("symbol-placement"),hf="point"===Me?24*Pa.get("text-max-width").evaluate(pc,{},Ha):0;ce=function(){x.allowVerticalPlacement&&re(Wd)&&(vd.vertical=Sh(Vd,F,V,ra,$c,hf,Jb,Md,"left",ve,he,Qc.vertical,!0,Me,nd,fd))};if(!Rb&&Id){Id="auto"===Pd?Id.map(function(Ae){return mj(Ae)}):[Pd];Pd=!1;for(var Ig=0;Ig<Id.length;Ig++){var Sf=Id[Ig];if(!vd.horizontal[Sf])if(Pd)vd.horizontal[Sf]=vd.horizontal[0];else{var jf=Sh(Vd,F,V,ra,$c,hf,Jb,"center",Sf,ve,he,Qc.horizontal,!1,Me,nd,fd);jf&&(vd.horizontal[Sf]=
jf,Pd=1===jf.positionedLines.length)}}ce()}else"auto"===Pd&&(Pd=mj(Md)),(Id=Sh(Vd,F,V,ra,$c,hf,Jb,Md,Pd,ve,he,Qc.horizontal,!1,Me,nd,fd))&&(vd.horizontal[Pd]=Id),ce(),re(Wd)&&Rb&&rb&&(vd.vertical=Sh(Vd,F,V,ra,$c,hf,Jb,Md,Pd,ve,he,Qc.vertical,!1,Me,nd,fd))}ce=void 0;Id=!1;pc.icon&&pc.icon.name&&(Pd=fa[pc.icon.name])&&(ce=function(Ae,Df,Zf){var vg=xi(Zf);Zf=Df[0]-Ae.displaySize[0]*vg.horizontalAlign;Df=Df[1]-Ae.displaySize[1]*vg.verticalAlign;return{image:Ae,top:Df,bottom:Df+Ae.displaySize[1],left:Zf,
right:Zf+Ae.displaySize[0]}}(ra[pc.icon.name],Pa.get("icon-offset").evaluate(pc,{},Ha),Pa.get("icon-anchor").evaluate(pc,{},Ha)),Id=Pd.sdf,void 0===x.sdfIcons?x.sdfIcons=Pd.sdf:x.sdfIcons!==Pd.sdf&&z("Style sheet warning: Cannot mix SDF and non-SDF icons in one buffer"),(Pd.pixelRatio!==x.pixelRatio||0!==Pa.get("icon-rotate").constantOr(1))&&(x.iconsNeedLinear=!0));Pd=tf(vd.horizontal)||vd.vertical;x.iconsInText=!!Pd&&Pd.iconsInText;(Pd||ce)&&function(Ae,Df,Zf,vg,Tk,Mi,sf,Ug,kk,Ek,Uk){var Jg=Mi.textMaxSize.evaluate(Df,
{});void 0===Jg&&(Jg=sf);var lk,Jf=Ae.layers[0].layout,Fh=Jf.get("icon-offset").evaluate(Df,{},Uk),cf=tf(Zf.horizontal),Vg=sf/24,Ml=Ae.tilePixelRatio*Vg;Jg=Ae.tilePixelRatio*Jg/24;var Nl=Ae.tilePixelRatio*Ug,fj=Ae.tilePixelRatio*Jf.get("symbol-spacing"),Ol=Jf.get("text-padding")*Ae.tilePixelRatio,Pl=Jf.get("icon-padding")*Ae.tilePixelRatio;Ug=Jf.get("text-max-angle")/180*Math.PI;var Ql="map"===Jf.get("text-rotation-alignment")&&"point"!==Jf.get("symbol-placement"),Rl="map"===Jf.get("icon-rotation-alignment")&&
"point"!==Jf.get("symbol-placement"),Wk=Jf.get("symbol-placement"),Jk=fj/2,dl=Jf.get("icon-text-fit");vg&&"none"!==dl&&(Ae.allowVerticalPlacement&&Zf.vertical&&(lk=Lj(vg,Zf.vertical,dl,Jf.get("icon-text-fit-padding"),Fh,Vg)),cf&&(vg=Lj(vg,cf,dl,Jf.get("icon-text-fit-padding"),Fh,Vg)));Jf=function(Sl,nl){0>nl.x||8192<=nl.x||0>nl.y||8192<=nl.y||function(Kf,Cj,ul,Wj,mk,vl,Kk,gj,el,ol,fl,hl,yl,wl,Xk,Yk,pl,Dl,Zk,ql,hi,xl,El,Xj,Tl){var rl,il,jl=Kf.addToLineVertexArray(Cj,ul),sl=0,Fl=ul=0,Gl=0,kl=-1,zl=
-1,nk={},Hl=lj(""),Al=0,Bl=0;if(void 0===gj._unevaluatedLayout.getValue("text-radial-offset")?(Al=(rl=gj.layout.get("text-offset").evaluate(hi,{},Xj).map(function(tl){return 24*tl}))[0],Bl=rl[1]):(Al=24*gj.layout.get("text-radial-offset").evaluate(hi,{},Xj),Bl=Nd),Kf.allowVerticalPlacement&&Wj.vertical){rl=gj.layout.get("text-rotate").evaluate(hi,{},Xj)+90;var $k=new Oc(el,Cj,ol,fl,hl,Wj.vertical,yl,wl,Xk,rl);Kk&&(il=new Oc(el,Cj,ol,fl,hl,Kk,pl,Dl,Xk,rl))}if(mk){var ok=gj.layout.get("icon-rotate").evaluate(hi,
{});sl="none"!==gj.layout.get("icon-text-fit");kl=Lg(mk,ok,El,sl);Kk=Kk?Lg(Kk,ok,El,sl):void 0;ok=new Oc(el,Cj,ol,fl,hl,mk,pl,Dl,!1,ok);sl=4*kl.length;pl=Kf.iconSizeData;mk=null;"source"===pl.kind?32640<(mk=[128*gj.layout.get("icon-size").evaluate(hi,{})])[0]&&z(Kf.layerIds[0]+': Value for "icon-size" is \x3e\x3d 255. Reduce your "icon-size".'):"composite"===pl.kind&&(32640<(mk=[128*xl.compositeIconSizes[0].evaluate(hi,{},Xj),128*xl.compositeIconSizes[1].evaluate(hi,{},Xj)])[0]||32640<mk[1])&&z(Kf.layerIds[0]+
': Value for "icon-size" is \x3e\x3d 255. Reduce your "icon-size".');Kf.addSymbols(Kf.icon,kl,mk,ql,Zk,hi,!1,Cj,jl.lineStartIndex,jl.lineLength,-1,Xj);kl=Kf.icon.placedSymbolArray.length-1;Kk&&(ul=4*Kk.length,Kf.addSymbols(Kf.icon,Kk,mk,ql,Zk,hi,Qc.vertical,Cj,jl.lineStartIndex,jl.lineLength,-1,Xj),zl=Kf.icon.placedSymbolArray.length-1)}for(var Il in Wj.horizontal){Zk=Wj.horizontal[Il];if(!eh){Hl=lj(Zk.text);var eh=gj.layout.get("text-rotate").evaluate(hi,{},Xj);eh=new Oc(el,Cj,ol,fl,hl,Zk,yl,wl,
Xk,eh)}ql=1===Zk.positionedLines.length;if(Fl+=eg(Kf,Cj,Zk,vl,gj,Xk,hi,Yk,jl,Wj.vertical?Qc.horizontal:Qc.horizontalOnly,ql?Object.keys(Wj.horizontal):[Il],nk,kl,xl,Xj),ql)break}Wj.vertical&&(Gl+=eg(Kf,Cj,Wj.vertical,vl,gj,Xk,hi,Yk,jl,Qc.vertical,["vertical"],nk,zl,xl,Xj));Wj=eh?eh.boxStartIndex:Kf.collisionBoxArray.length;vl=eh?eh.boxEndIndex:Kf.collisionBoxArray.length;gj=$k?$k.boxStartIndex:Kf.collisionBoxArray.length;el=$k?$k.boxEndIndex:Kf.collisionBoxArray.length;fl=ok?ok.boxStartIndex:Kf.collisionBoxArray.length;
hl=ok?ok.boxEndIndex:Kf.collisionBoxArray.length;wl=il?il.boxStartIndex:Kf.collisionBoxArray.length;Xk=il?il.boxEndIndex:Kf.collisionBoxArray.length;Yk=function(tl,Jl){return tl&&tl.circleDiameter?Math.max(tl.circleDiameter,Jl):Jl};eh=Yk(eh,-1);eh=Yk($k,eh);eh=Yk(ok,eh);($k=-1<(eh=Yk(il,eh))?1:0)&&(eh*=Tl/24);Kf.glyphOffsetArray.length>=Sd.MAX_GLYPHS&&z("Too many glyphs being rendered in a tile. See https://github.com/mapbox/mapbox-gl-js/issues/2907");void 0!==hi.sortKey&&Kf.addToSortKeyRanges(Kf.symbolInstances.length,
hi.sortKey);Kf.symbolInstances.emplaceBack(Cj.x,Cj.y,0<=nk.right?nk.right:-1,0<=nk.center?nk.center:-1,0<=nk.left?nk.left:-1,nk.vertical||-1,kl,zl,Hl,Wj,vl,gj,el,fl,hl,wl,Xk,ol,Fl,Gl,sl,ul,$k,0,yl,Al,Bl,eh)}(Ae,nl,Sl,Zf,vg,Tk,lk,Ae.layers[0],Ae.collisionBoxArray,Df.index,Df.sourceLayerIndex,Ae.index,Ml,Ol,Ql,kk,Nl,Pl,Rl,Fh,Df,Mi,Ek,Uk,sf)};if("line"===Wk)for(Vg=0,Wk=Hf(Df.geometry,0,0,8192,8192);Vg<Wk.length;Vg+=1){dl=Wk[Vg];for(var Cl=0,Kl=ek(dl,fj,Ug,Zf.vertical||cf,vg,24,Jg,Ae.overscaling,8192);Cl<
Kl.length;Cl+=1){var Ll=Kl[Cl];cf&&Vi(Ae,cf.text,Jk,Ll)||Jf(dl,Ll)}}else if("line-center"===Wk)for(fj=0,Jk=Df.geometry;fj<Jk.length;fj+=1)Vg=Jk[fj],1<Vg.length&&(Wk=Ui(Vg,Ug,Zf.vertical||cf,vg,24,Jg))&&Jf(Vg,Wk);else if("Polygon"===Df.type)for(cf=0,Jg=cg(Df.geometry,0);cf<Jg.length;cf+=1)Ug=Jg[cf],fj=ah(Ug,16),Jf(Ug[0],new Zc(fj.x,fj.y,0));else if("LineString"===Df.type)for(cf=0,Jg=Df.geometry;cf<Jg.length;cf+=1)Ug=Jg[cf],Jf(Ug,new Zc(Ug[0].x,Ug[0].y,0));else if("Point"===Df.type)for(cf=0,Jg=Df.geometry;cf<
Jg.length;cf+=1)for(Ug=0,fj=Jg[cf];Ug<fj.length;Ug+=1)Jk=fj[Ug],Jf([Jk],new Zc(Jk.x,Jk.y,0))}(x,pc,vd,ce,fa,hb,nd,xd,he,Id,Ha)};for(var hc=0,vc=x.features;hc<vc.length;hc+=1)Ya();ya&&x.generateCollisionDebugBuffers()};a.perspective=function(x,F,V,fa,ra){var ya;F=1/Math.tan(F/2);return x[0]=F/V,x[1]=0,x[2]=0,x[3]=0,x[4]=0,x[5]=F,x[6]=0,x[7]=0,x[8]=0,x[9]=0,x[11]=-1,x[12]=0,x[13]=0,x[15]=0,null!=ra&&ra!==1/0?(x[10]=(ra+fa)*(ya=1/(fa-ra)),x[14]=2*ra*fa*ya):(x[10]=-1,x[14]=-2*fa),x};a.pick=function(x,
F){for(var V={},fa=0;fa<F.length;fa++){var ra=F[fa];ra in x&&(V[ra]=x[ra])}return V};a.plugin=ag;a.polygonIntersectsPolygon=kf;a.postMapLoadEvent=lb;a.postTurnstileEvent=mh;a.potpack=$e;a.refProperties="type source source-layer minzoom maxzoom filter layout".split(" ");a.register=Gc;a.registerForPluginStateChange=function(x){return x({pluginStatus:Xf,pluginURL:Rg}),Dj.on("pluginStateChange",x),x};a.rotate=function(x,F,V){var fa=F[0],ra=F[1],ya=F[2];F=F[3];var Ha=Math.sin(V);V=Math.cos(V);return x[0]=
fa*V+ya*Ha,x[1]=ra*V+F*Ha,x[2]=fa*-Ha+ya*V,x[3]=ra*-Ha+F*V,x};a.rotateX=function(x,F,V){var fa=Math.sin(V);V=Math.cos(V);var ra=F[4],ya=F[5],Ha=F[6],Pa=F[7],Ya=F[8],hb=F[9],Ab=F[10],Fb=F[11];return F!==x&&(x[0]=F[0],x[1]=F[1],x[2]=F[2],x[3]=F[3],x[12]=F[12],x[13]=F[13],x[14]=F[14],x[15]=F[15]),x[4]=ra*V+Ya*fa,x[5]=ya*V+hb*fa,x[6]=Ha*V+Ab*fa,x[7]=Pa*V+Fb*fa,x[8]=Ya*V-ra*fa,x[9]=hb*V-ya*fa,x[10]=Ab*V-Ha*fa,x[11]=Fb*V-Pa*fa,x};a.rotateZ=function(x,F,V){var fa=Math.sin(V);V=Math.cos(V);var ra=F[0],ya=
F[1],Ha=F[2],Pa=F[3],Ya=F[4],hb=F[5],Ab=F[6],Fb=F[7];return F!==x&&(x[8]=F[8],x[9]=F[9],x[10]=F[10],x[11]=F[11],x[12]=F[12],x[13]=F[13],x[14]=F[14],x[15]=F[15]),x[0]=ra*V+Ya*fa,x[1]=ya*V+hb*fa,x[2]=Ha*V+Ab*fa,x[3]=Pa*V+Fb*fa,x[4]=Ya*V-ra*fa,x[5]=hb*V-ya*fa,x[6]=Ab*V-Ha*fa,x[7]=Fb*V-Pa*fa,x};a.scale=function(x,F,V){var fa=V[0],ra=V[1];V=V[2];return x[0]=F[0]*fa,x[1]=F[1]*fa,x[2]=F[2]*fa,x[3]=F[3]*fa,x[4]=F[4]*ra,x[5]=F[5]*ra,x[6]=F[6]*ra,x[7]=F[7]*ra,x[8]=F[8]*V,x[9]=F[9]*V,x[10]=F[10]*V,x[11]=F[11]*
V,x[12]=F[12],x[13]=F[13],x[14]=F[14],x[15]=F[15],x};a.scale$1=function(x,F,V){return x[0]=F[0]*V,x[1]=F[1]*V,x[2]=F[2]*V,x[3]=F[3]*V,x};a.scale$2=function(x,F,V){return x[0]=F[0]*V,x[1]=F[1]*V,x[2]=F[2]*V,x};a.setCacheLimits=function(x,F){W=x;aa=F};a.setRTLTextPlugin=function(x,F,V){if(void 0===V&&(V=!1),"deferred"===Xf||"loading"===Xf||"loaded"===Xf)throw Error("setRTLTextPlugin cannot be called multiple times.");Rg=Cg.resolveURL(x);Xf="deferred";rk=F;le();V||ak()};a.sphericalToCartesian=function(x){var F=
x[0],V=x[1];x=x[2];return V+=90,V*=Math.PI/180,x*=Math.PI/180,{x:F*Math.cos(V)*Math.sin(x),y:F*Math.sin(V)*Math.sin(x),z:F*Math.cos(x)}};a.sqrLen=function(x){var F=x[0];x=x[1];return F*F+x*x};a.styleSpec=Gb;a.sub=function(x,F,V){return x[0]=F[0]-V[0],x[1]=F[1]-V[1],x[2]=F[2]-V[2],x};a.symbolSize=cd;a.transformMat3=function(x,F,V){var fa=F[0],ra=F[1];F=F[2];return x[0]=fa*V[0]+ra*V[3]+F*V[6],x[1]=fa*V[1]+ra*V[4]+F*V[7],x[2]=fa*V[2]+ra*V[5]+F*V[8],x};a.transformMat4=pe;a.translate=function(x,F,V){var fa,
ra,ya,Ha,Pa,Ya,hb,Ab,Fb,Jb,Rb,rb,zb=V[0],hc=V[1];V=V[2];return F===x?(x[12]=F[0]*zb+F[4]*hc+F[8]*V+F[12],x[13]=F[1]*zb+F[5]*hc+F[9]*V+F[13],x[14]=F[2]*zb+F[6]*hc+F[10]*V+F[14],x[15]=F[3]*zb+F[7]*hc+F[11]*V+F[15]):(ra=F[1],ya=F[2],Ha=F[3],Pa=F[4],Ya=F[5],hb=F[6],Ab=F[7],Fb=F[8],Jb=F[9],Rb=F[10],rb=F[11],x[0]=fa=F[0],x[1]=ra,x[2]=ya,x[3]=Ha,x[4]=Pa,x[5]=Ya,x[6]=hb,x[7]=Ab,x[8]=Fb,x[9]=Jb,x[10]=Rb,x[11]=rb,x[12]=fa*zb+Pa*hc+Fb*V+F[12],x[13]=ra*zb+Ya*hc+Jb*V+F[13],x[14]=ya*zb+hb*hc+Rb*V+F[14],x[15]=Ha*
zb+Ab*hc+rb*V+F[15]),x};a.triggerPluginCompletionEvent=li;a.uniqueId=function(){return Ng++};a.validateCustomStyleLayer=function(x){var F=[],V=x.id;return void 0===V&&F.push({message:"layers."+V+': missing required property "id"'}),void 0===x.render&&F.push({message:"layers."+V+': missing required method "render"'}),x.renderingMode&&"2d"!==x.renderingMode&&"3d"!==x.renderingMode&&F.push({message:"layers."+V+': property "renderingMode" must be either "2d" or "3d"'}),F};a.validateLight=Gi;a.validateStyle=
dd;a.values=function(x){var F=[],V;for(V in x)F.push(x[V]);return F};a.vectorTile=oh;a.version="1.10.1";a.warnOnce=z;a.webpSupported=Dg;a.window=self;a.wrap=e});r(["./shared"],function(a){function h(xa){var Ea=typeof xa;if("number"===Ea||"boolean"===Ea||"string"===Ea||null==xa)return JSON.stringify(xa);if(Array.isArray(xa)){Ea="[";for(var Ia=0;Ia<xa.length;Ia+=1)Ea+=h(xa[Ia])+",";return Ea+"]"}Ea=Object.keys(xa).sort();Ia="{";for(var Oa=0;Oa<Ea.length;Oa++)Ia+=JSON.stringify(Ea[Oa])+":"+h(xa[Ea[Oa]])+
",";return Ia+"}"}function g(xa,Ea,Ia){Ea=new a.EvaluationParameters(Ea);for(var Oa=0;Oa<xa.length;Oa+=1)xa[Oa].recalculate(Ea,Ia)}function n(xa,Ea){var Ia=a.getArrayBuffer(xa.request,function(Oa,bb,Xa,tb){Oa?Ea(Oa):bb&&Ea(null,{vectorTile:new a.vectorTile.VectorTile(new a.pbf(bb)),rawData:bb,cacheControl:Xa,expires:tb})});return function(){Ia.cancel();Ea()}}function p(xa,Ea){if(0!==xa.length){d(xa[0],Ea);for(var Ia=1;Ia<xa.length;Ia++)d(xa[Ia],!Ea)}}function d(xa,Ea){for(var Ia=0,Oa=0,bb=xa.length,
Xa=bb-1;Oa<bb;Xa=Oa++)Ia+=(xa[Oa][0]-xa[Xa][0])*(xa[Xa][1]+xa[Oa][1]);0<=Ia!=!!Ea&&xa.reverse()}function e(xa,Ea){this.options=Ea||{};this.features=xa;this.length=xa.length}function f(xa,Ea){this.id="number"==typeof xa.id?xa.id:void 0;this.type=xa.type;this.rawGeometry=1===xa.type?[xa.geometry]:xa.geometry;this.properties=xa.tags;this.extent=Ea||4096}function k(xa){var Ea=new a.pbf,Ia;for(Ia in xa.layers)Ea.writeMessage(3,t,xa.layers[Ia]);return Ea.finish()}function t(xa,Ea){var Ia;Ea.writeVarintField(15,
xa.version||1);Ea.writeStringField(1,xa.name||"");Ea.writeVarintField(5,xa.extent||4096);var Oa={keys:[],values:[],keycache:{},valuecache:{}};for(Ia=0;Ia<xa.length;Ia++)Oa.feature=xa.feature(Ia),Ea.writeMessage(2,v,Oa);xa=Oa.keys;for(Ia=0;Ia<xa.length;Ia++)Ea.writeStringField(3,xa[Ia]);Oa=Oa.values;for(Ia=0;Ia<Oa.length;Ia++)Ea.writeMessage(4,B,Oa[Ia])}function v(xa,Ea){var Ia=xa.feature;void 0!==Ia.id&&Ea.writeVarintField(1,Ia.id);Ea.writeMessage(2,w,xa);Ea.writeVarintField(3,Ia.type);Ea.writeMessage(4,
y,Ia)}function w(xa,Ea){var Ia=xa.feature,Oa=xa.keys,bb=xa.values,Xa=xa.keycache;xa=xa.valuecache;for(var tb in Ia.properties){var Ka=Xa[tb];void 0===Ka&&(Oa.push(tb),Xa[tb]=Ka=Oa.length-1);Ea.writeVarint(Ka);Ka=Ia.properties[tb];var Ta=typeof Ka;"string"!==Ta&&"boolean"!==Ta&&"number"!==Ta&&(Ka=JSON.stringify(Ka));Ta=Ta+":"+Ka;var Na=xa[Ta];void 0===Na&&(bb.push(Ka),xa[Ta]=Na=bb.length-1);Ea.writeVarint(Na)}}function y(xa,Ea){var Ia=xa.loadGeometry();xa=xa.type;for(var Oa=0,bb=0,Xa=Ia.length,tb=
0;tb<Xa;tb++){var Ka=Ia[tb],Ta=1;1===xa&&(Ta=Ka.length);Ea.writeVarint((Ta<<3)+1);Ta=3===xa?Ka.length-1:Ka.length;for(var Na=0;Na<Ta;Na++){1===Na&&1!==xa&&Ea.writeVarint((Ta-1<<3)+2);var ib=Ka[Na].x-Oa,qb=Ka[Na].y-bb;Ea.writeVarint(ib<<1^ib>>31);Ea.writeVarint(qb<<1^qb>>31);Oa+=ib;bb+=qb}3===xa&&Ea.writeVarint(15)}}function B(xa,Ea){var Ia=typeof xa;"string"===Ia?Ea.writeStringField(1,xa):"boolean"===Ia?Ea.writeBooleanField(7,xa):"number"===Ia&&(0!=xa%1?Ea.writeDoubleField(3,xa):0>xa?Ea.writeSVarintField(6,
xa):Ea.writeVarintField(5,xa))}function A(xa,Ea,Ia,Oa){z(xa,Ia,Oa);z(Ea,2*Ia,2*Oa);z(Ea,2*Ia+1,2*Oa+1)}function z(xa,Ea,Ia){var Oa=xa[Ea];xa[Ea]=xa[Ia];xa[Ia]=Oa}function E(xa){return{type:"Feature",id:xa.id,properties:C(xa),geometry:{type:"Point",coordinates:[(Oa=xa.x,360*(Oa-.5)),(Ea=xa.y,Ia=(180-360*Ea)*Math.PI/180,360*Math.atan(Math.exp(Ia))/Math.PI-90)]}};var Ea,Ia,Oa}function C(xa){var Ea=xa.numPoints,Ia=1E4<=Ea?Math.round(Ea/1E3)+"k":1E3<=Ea?Math.round(Ea/100)/10+"k":Ea;return D(D({},xa.properties),
{cluster:!0,cluster_id:xa.id,point_count:Ea,point_count_abbreviated:Ia})}function u(xa){xa=Math.sin(xa*Math.PI/180);xa=.5-.25*Math.log((1+xa)/(1-xa))/Math.PI;return 0>xa?0:1<xa?1:xa}function D(xa,Ea){for(var Ia in Ea)xa[Ia]=Ea[Ia];return xa}function G(xa){return xa.x}function J(xa){return xa.y}function L(xa,Ea,Ia,Oa){xa={id:void 0===xa?null:xa,type:Ea,geometry:Ia,tags:Oa,minX:1/0,minY:1/0,maxX:-1/0,maxY:-1/0};Ea=xa.geometry;Ia=xa.type;if("Point"===Ia||"MultiPoint"===Ia||"LineString"===Ia)K(xa,Ea);
else if("Polygon"===Ia||"MultiLineString"===Ia)for(Ia=0;Ia<Ea.length;Ia++)K(xa,Ea[Ia]);else if("MultiPolygon"===Ia)for(Ia=0;Ia<Ea.length;Ia++)for(Oa=0;Oa<Ea[Ia].length;Oa++)K(xa,Ea[Ia][Oa]);return xa}function K(xa,Ea){for(var Ia=0;Ia<Ea.length;Ia+=3)xa.minX=Math.min(xa.minX,Ea[Ia]),xa.minY=Math.min(xa.minY,Ea[Ia+1]),xa.maxX=Math.max(xa.maxX,Ea[Ia]),xa.maxY=Math.max(xa.maxY,Ea[Ia+1])}function H(xa,Ea,Ia,Oa){if(Ea.geometry){var bb=Ea.geometry.coordinates,Xa=Ea.geometry.type,tb=Math.pow(Ia.tolerance/
((1<<Ia.maxZoom)*Ia.extent),2),Ka=[],Ta=Ea.id;if(Ia.promoteId?Ta=Ea.properties[Ia.promoteId]:Ia.generateId&&(Ta=Oa||0),"Point"===Xa)Q(bb,Ka);else if("MultiPoint"===Xa)for(var Na=0;Na<bb.length;Na++)Q(bb[Na],Ka);else if("LineString"===Xa)M(bb,Ka,tb,!1);else if("MultiLineString"===Xa){if(Ia.lineMetrics){for(Na=0;Na<bb.length;Na++)M(bb[Na],Ka=[],tb,!1),xa.push(L(Ta,"LineString",Ka,Ea.properties));return}P(bb,Ka,tb,!1)}else if("Polygon"===Xa)P(bb,Ka,tb,!0);else{if("MultiPolygon"!==Xa){if("GeometryCollection"===
Xa){for(Na=0;Na<Ea.geometry.geometries.length;Na++)H(xa,{id:Ta,geometry:Ea.geometry.geometries[Na],properties:Ea.properties},Ia,Oa);return}throw Error("Input data is not a valid GeoJSON object.");}for(Na=0;Na<bb.length;Na++)Ia=[],P(bb[Na],Ia,tb,!0),Ka.push(Ia)}xa.push(L(Ta,Xa,Ka,Ea.properties))}}function Q(xa,Ea){Ea.push(xa[0]/360+.5);Ea.push(T(xa[1]));Ea.push(0)}function M(xa,Ea,Ia,Oa){for(var bb,Xa,tb=0,Ka=0;Ka<xa.length;Ka++){var Ta=xa[Ka][0]/360+.5,Na=T(xa[Ka][1]);Ea.push(Ta);Ea.push(Na);Ea.push(0);
0<Ka&&(tb+=Oa?(bb*Na-Ta*Xa)/2:Math.sqrt(Math.pow(Ta-bb,2)+Math.pow(Na-Xa,2)));bb=Ta;Xa=Na}xa=Ea.length-3;Ea[2]=1;(function La(qb,sb,Ba,Fa){for(var Va,Za=Fa,mb=Ba-sb>>1,ub=Ba-sb,Pb=qb[sb],Kb=qb[sb+1],Ob=qb[Ba],Wb=qb[Ba+1],Bc=sb+3;Bc<Ba;Bc+=3){var Kc=qb[Bc];var Nc=qb[Bc+1],bd=Pb,kb=Kb,$b=Ob-bd,gc=Wb-kb;if(0!==$b||0!==gc){var rc=((Kc-bd)*$b+(Nc-kb)*gc)/($b*$b+gc*gc);1<rc?(bd=Ob,kb=Wb):0<rc&&(bd+=$b*rc,kb+=gc*rc)}Kc=($b=Kc-bd)*$b+(gc=Nc-kb)*gc;Kc>Za?(Va=Bc,Za=Kc):Kc===Za&&($b=Math.abs(Bc-mb),$b<ub&&(Va=
Bc,ub=$b))}Za>Fa&&(3<Va-sb&&La(qb,sb,Va,Fa),qb[Va+2]=Za,3<Ba-Va&&La(qb,Va,Ba,Fa))})(Ea,0,xa,Ia);Ea[xa+2]=1;Ea.size=Math.abs(tb);Ea.start=0;Ea.end=Ea.size}function P(xa,Ea,Ia,Oa){for(var bb=0;bb<xa.length;bb++){var Xa=[];M(xa[bb],Xa,Ia,Oa);Ea.push(Xa)}}function T(xa){xa=Math.sin(xa*Math.PI/180);xa=.5-.25*Math.log((1+xa)/(1-xa))/Math.PI;return 0>xa?0:1<xa?1:xa}function O(xa,Ea,Ia,Oa,bb,Xa,tb,Ka){if(Oa/=Ea,Xa>=(Ia/=Ea)&&tb<Oa)return xa;if(tb<Ia||Xa>=Oa)return null;Ea=[];for(Xa=0;Xa<xa.length;Xa++){tb=
xa[Xa];var Ta=tb.geometry,Na=tb.type,ib=0===bb?tb.minX:tb.minY,qb=0===bb?tb.maxX:tb.maxY;if(ib>=Ia&&qb<Oa)Ea.push(tb);else if(!(qb<Ia||ib>=Oa)){ib=[];if("Point"===Na||"MultiPoint"===Na){qb=ib;for(var sb=Ia,Ba=Oa,Fa=bb,La=0;La<Ta.length;La+=3){var Va=Ta[La+Fa];Va>=sb&&Va<=Ba&&(qb.push(Ta[La]),qb.push(Ta[La+1]),qb.push(Ta[La+2]))}}else if("LineString"===Na)U(Ta,ib,Ia,Oa,bb,!1,Ka.lineMetrics);else if("MultiLineString"===Na)X(Ta,ib,Ia,Oa,bb,!1);else if("Polygon"===Na)X(Ta,ib,Ia,Oa,bb,!0);else if("MultiPolygon"===
Na)for(qb=0;qb<Ta.length;qb++)sb=[],X(Ta[qb],sb,Ia,Oa,bb,!0),sb.length&&ib.push(sb);if(ib.length)if(Ka.lineMetrics&&"LineString"===Na)for(qb=0;qb<ib.length;qb++)Ea.push(L(tb.id,Na,ib[qb],tb.tags));else"LineString"!==Na&&"MultiLineString"!==Na||(1===ib.length?(Na="LineString",ib=ib[0]):Na="MultiLineString"),"Point"!==Na&&"MultiPoint"!==Na||(Na=3===ib.length?"Point":"MultiPoint"),Ea.push(L(tb.id,Na,ib,tb.tags))}}return Ea.length?Ea:null}function U(xa,Ea,Ia,Oa,bb,Xa,tb){for(var Ka,Ta,Na=S(xa),ib=0===
bb?ba:ca,qb=xa.start,sb=0;sb<xa.length-3;sb+=3){var Ba=xa[sb],Fa=xa[sb+1],La=xa[sb+2],Va=xa[sb+3],Za=xa[sb+4],mb=0===bb?Ba:Fa,ub=0===bb?Va:Za,Pb=!1;tb&&(Ka=Math.sqrt(Math.pow(Ba-Va,2)+Math.pow(Fa-Za,2)));if(mb<Ia)ub>Ia&&(Ta=ib(Na,Ba,Fa,Va,Za,Ia),tb&&(Na.start=qb+Ka*Ta));else if(mb>Oa)ub<Oa&&(Ta=ib(Na,Ba,Fa,Va,Za,Oa),tb&&(Na.start=qb+Ka*Ta));else{var Kb=Na,Ob=Fa;Kb.push(Ba);Kb.push(Ob);Kb.push(La)}ub<Ia&&mb>=Ia&&(Ta=ib(Na,Ba,Fa,Va,Za,Ia),Pb=!0);ub>Oa&&mb<=Oa&&(Ta=ib(Na,Ba,Fa,Va,Za,Oa),Pb=!0);!Xa&&
Pb&&(tb&&(Na.end=qb+Ka*Ta),Ea.push(Na),Na=S(xa));tb&&(qb+=Ka)}La=xa.length-3;Ba=xa[La];Fa=xa[La+1];La=xa[La+2];(mb=0===bb?Ba:Fa)>=Ia&&mb<=Oa&&(xa=Na,Ia=La,xa.push(Ba),xa.push(Fa),xa.push(Ia));La=Na.length-3;Xa&&3<=La&&(Na[La]!==Na[0]||Na[La+1]!==Na[1])&&(Xa=Na,Ba=Na[1],Fa=Na[2],Xa.push(Na[0]),Xa.push(Ba),Xa.push(Fa));Na.length&&Ea.push(Na)}function S(xa){var Ea=[];return Ea.size=xa.size,Ea.start=xa.start,Ea.end=xa.end,Ea}function X(xa,Ea,Ia,Oa,bb,Xa){for(var tb=0;tb<xa.length;tb++)U(xa[tb],Ea,Ia,
Oa,bb,Xa,!1)}function ba(xa,Ea,Ia,Oa,bb,Xa){Ea=(Xa-Ea)/(Oa-Ea);return xa.push(Xa),xa.push(Ia+(bb-Ia)*Ea),xa.push(1),Ea}function ca(xa,Ea,Ia,Oa,bb,Xa){Ia=(Xa-Ia)/(bb-Ia);return xa.push(Ea+(Oa-Ea)*Ia),xa.push(Xa),xa.push(1),Ia}function ia(xa,Ea){for(var Ia=[],Oa=0;Oa<xa.length;Oa++){var bb=xa[Oa],Xa=bb.type;if("Point"===Xa||"MultiPoint"===Xa||"LineString"===Xa)var tb=ja(bb.geometry,Ea);else if("MultiLineString"===Xa||"Polygon"===Xa){tb=[];for(var Ka=0;Ka<bb.geometry.length;Ka++)tb.push(ja(bb.geometry[Ka],
Ea))}else if("MultiPolygon"===Xa)for(tb=[],Ka=0;Ka<bb.geometry.length;Ka++){for(var Ta=[],Na=0;Na<bb.geometry[Ka].length;Na++)Ta.push(ja(bb.geometry[Ka][Na],Ea));tb.push(Ta)}Ia.push(L(bb.id,Xa,tb,bb.tags))}return Ia}function ja(xa,Ea){var Ia=[];Ia.size=xa.size;void 0!==xa.start&&(Ia.start=xa.start,Ia.end=xa.end);for(var Oa=0;Oa<xa.length;Oa+=3)Ia.push(xa[Oa]+Ea,xa[Oa+1],xa[Oa+2]);return Ia}function la(xa,Ea){if(xa.transformed)return xa;var Ia,Oa,bb=1<<xa.z,Xa=xa.x,tb=xa.y;for(Ia=0;Ia<xa.features.length;Ia++){var Ka=
xa.features[Ia],Ta=Ka.geometry;var Na=Ka.type;if(Ka.geometry=[],1===Na)for(Na=0;Na<Ta.length;Na+=2)Ka.geometry.push([Math.round(Ea*(Ta[Na]*bb-Xa)),Math.round(Ea*(Ta[Na+1]*bb-tb))]);else for(Na=0;Na<Ta.length;Na++){var ib=[];for(Oa=0;Oa<Ta[Na].length;Oa+=2)ib.push([Math.round(Ea*(Ta[Na][Oa]*bb-Xa)),Math.round(Ea*(Ta[Na][Oa+1]*bb-tb))]);Ka.geometry.push(ib)}}return xa.transformed=!0,xa}function da(xa,Ea,Ia,Oa,bb,Xa){var tb=Oa*Oa;if(0<Oa&&Ea.size<(bb?tb:Oa))Ia.numPoints+=Ea.length/3;else{for(var Ka=
[],Ta=0;Ta<Ea.length;Ta+=3)(0===Oa||Ea[Ta+2]>tb)&&(Ia.numSimplified++,Ka.push(Ea[Ta]),Ka.push(Ea[Ta+1])),Ia.numPoints++;if(bb){Ea=Oa=0;Ia=Ka.length;for(bb=Ia-2;Ea<Ia;bb=Ea,Ea+=2)Oa+=(Ka[Ea]-Ka[bb])*(Ka[Ea+1]+Ka[bb+1]);if(0<Oa===Xa)for(Ea=0,Ia=Ka.length;Ea<Ia/2;Ea+=2)Xa=Ka[Ea],Oa=Ka[Ea+1],Ka[Ea]=Ka[Ia-2-Ea],Ka[Ea+1]=Ka[Ia-1-Ea],Ka[Ia-2-Ea]=Xa,Ka[Ia-1-Ea]=Oa}xa.push(Ka)}}function oa(xa,Ea){var Ia=(Ea=this.options=function(Oa,bb){for(var Xa in bb)Oa[Xa]=bb[Xa];return Oa}(Object.create(this.options),
Ea)).debug;if(Ia&&console.time("preprocess data"),0>Ea.maxZoom||24<Ea.maxZoom)throw Error("maxZoom should be in the 0-24 range");if(Ea.promoteId&&Ea.generateId)throw Error("promoteId and generateId cannot be used together.");xa=function(Oa,bb){var Xa=[];if("FeatureCollection"===Oa.type)for(var tb=0;tb<Oa.features.length;tb++)H(Xa,Oa.features[tb],bb,tb);else H(Xa,"Feature"===Oa.type?Oa:{geometry:Oa},bb);return Xa}(xa,Ea);this.tiles={};this.tileCoords=[];Ia&&(console.timeEnd("preprocess data"),console.log("index: maxZoom: %d, maxPoints: %d",
Ea.indexMaxZoom,Ea.indexMaxPoints),console.time("generate tiles"),this.stats={},this.total=0);(xa=function(Oa,bb){var Xa=bb.buffer/bb.extent,tb=Oa,Ka=O(Oa,1,-1-Xa,Xa,0,-1,2,bb),Ta=O(Oa,1,1-Xa,2+Xa,0,-1,2,bb);return(Ka||Ta)&&(tb=O(Oa,1,-Xa,1+Xa,0,-1,2,bb)||[],Ka&&(tb=ia(Ka,1).concat(tb)),Ta&&(tb=tb.concat(ia(Ta,-1)))),tb}(xa,Ea)).length&&this.splitTile(xa,0,0,0);Ia&&(xa.length&&console.log("features: %d, points: %d",this.tiles[0].numFeatures,this.tiles[0].numPoints),console.timeEnd("generate tiles"),
console.log("tiles generated:",this.total,JSON.stringify(this.stats)))}function sa(xa,Ea){xa=xa.tileID.canonical;if(!this._geoJSONIndex)return Ea(null,null);xa=this._geoJSONIndex.getTile(xa.z,xa.x,xa.y);if(!xa)return Ea(null,null);xa=new Ma(xa.features);var Ia=eb(xa);0===Ia.byteOffset&&Ia.byteLength===Ia.buffer.byteLength||(Ia=new Uint8Array(Ia));Ea(null,{vectorTile:xa,rawData:Ia.buffer})}var ma=function(xa){this.keyCache={};xa&&this.replace(xa)};ma.prototype.replace=function(xa){this._layerConfigs=
{};this._layers={};this.update(xa,[])};ma.prototype.update=function(xa,Ea){for(var Ia=this,Oa=0;Oa<xa.length;Oa+=1){var bb=xa[Oa];this._layerConfigs[bb.id]=bb;var Xa=this._layers[bb.id]=a.createStyleLayer(bb);Xa._featureFilter=a.featureFilter(Xa.filter);this.keyCache[bb.id]&&delete this.keyCache[bb.id]}for(xa=0;xa<Ea.length;xa+=1)Oa=Ea[xa],delete this.keyCache[Oa],delete this._layerConfigs[Oa],delete this._layers[Oa];this.familiesBySource={};Ea=0;for(xa=function(Ka,Ta){for(var Na={},ib=0;ib<Ka.length;ib++){var qb;
if(!(qb=Ta&&Ta[Ka[ib].id])){qb=Ka[ib];for(var sb="",Ba=0,Fa=a.refProperties;Ba<Fa.length;Ba+=1)sb+="/"+h(qb[Fa[Ba]]);qb=sb}Ta&&(Ta[Ka[ib].id]=qb);(sb=Na[qb])||(sb=Na[qb]=[]);sb.push(Ka[ib])}Ka=[];for(var La in Na)Ka.push(Na[La]);return Ka}(a.values(this._layerConfigs),this.keyCache);Ea<xa.length;Ea+=1)if(Oa=xa[Ea].map(function(Ka){return Ia._layers[Ka.id]}),Xa=Oa[0],"none"!==Xa.visibility){var tb=Xa.source||"";(bb=this.familiesBySource[tb])||(bb=this.familiesBySource[tb]={});Xa=Xa.sourceLayer||"_geojsonTileLayer";
(tb=bb[Xa])||(tb=bb[Xa]=[]);tb.push(Oa)}};var qa=function(xa){var Ea={},Ia=[];for(Na in xa){var Oa=xa[Na],bb=Ea[Na]={},Xa;for(Xa in Oa){var tb=Oa[+Xa];if(tb&&0!==tb.bitmap.width&&0!==tb.bitmap.height){var Ka={x:0,y:0,w:tb.bitmap.width+2,h:tb.bitmap.height+2};Ia.push(Ka);bb[Xa]={rect:Ka,metrics:tb.metrics}}}}Ia=a.potpack(Ia);Ia=new a.AlphaImage({width:Ia.w||1,height:Ia.h||1});for(var Ta in xa){var Na=xa[Ta];for(var ib in Na)(Oa=Na[+ib])&&0!==Oa.bitmap.width&&0!==Oa.bitmap.height&&(bb=Ea[Ta][ib].rect,
a.AlphaImage.copy(Oa.bitmap,Ia,{x:0,y:0},{x:bb.x+1,y:bb.y+1},Oa.bitmap))}this.image=Ia;this.positions=Ea};a.register("GlyphAtlas",qa);var pa=function(xa){this.tileID=new a.OverscaledTileID(xa.tileID.overscaledZ,xa.tileID.wrap,xa.tileID.canonical.z,xa.tileID.canonical.x,xa.tileID.canonical.y);this.uid=xa.uid;this.zoom=xa.zoom;this.pixelRatio=xa.pixelRatio;this.tileSize=xa.tileSize;this.source=xa.source;this.overscaling=this.tileID.overscaleFactor();this.showCollisionBoxes=xa.showCollisionBoxes;this.collectResourceTiming=
!!xa.collectResourceTiming;this.returnDependencies=!!xa.returnDependencies;this.promoteId=xa.promoteId};pa.prototype.parse=function(xa,Ea,Ia,Oa,bb){function Xa(){if(Na)return bb(Na);if(ib&&qb&&sb){var Ob=new qa(ib),Wb=new a.ImageAtlas(qb,sb),Bc;for(Bc in Ba){var Kc=Ba[Bc];Kc instanceof a.SymbolBucket?(g(Kc.layers,this.zoom,Ia),a.performSymbolLayout(Kc,ib,Ob.positions,qb,Wb.iconPositions,this.showCollisionBoxes,this.tileID.canonical)):Kc.hasPattern&&(Kc instanceof a.LineBucket||Kc instanceof a.FillBucket||
Kc instanceof a.FillExtrusionBucket)&&(g(Kc.layers,this.zoom,Ia),Kc.addFeatures(Fa,this.tileID.canonical,Wb.patternPositions))}this.status="done";bb(null,{buckets:a.values(Ba).filter(function(Nc){return!Nc.isEmpty()}),featureIndex:Ta,collisionBoxArray:this.collisionBoxArray,glyphAtlasImage:Ob.image,imageAtlas:Wb,glyphMap:this.returnDependencies?ib:null,iconMap:this.returnDependencies?qb:null,glyphPositions:this.returnDependencies?Ob.positions:null})}}var tb=this;this.status="parsing";this.data=xa;
this.collisionBoxArray=new a.CollisionBoxArray;var Ka=new a.DictionaryCoder(Object.keys(xa.layers).sort()),Ta=new a.FeatureIndex(this.tileID,this.promoteId);Ta.bucketLayerIDs=[];var Na,ib,qb,sb,Ba={},Fa={featureIndex:Ta,iconDependencies:{},patternDependencies:{},glyphDependencies:{},availableImages:Ia};Ea=Ea.familiesBySource[this.source];for(var La in Ea){var Va=xa.layers[La];if(Va){1===Va.version&&a.warnOnce('Vector tile source "'+this.source+'" layer "'+La+'" does not use vector tile spec v2 and therefore may have some rendering errors.');
for(var Za=Ka.encode(La),mb=[],ub=0;ub<Va.length;ub++){var Pb=Va.feature(ub),Kb=Ta.getId(Pb,La);mb.push({feature:Pb,id:Kb,index:ub,sourceLayerIndex:Za})}Va=0;for(ub=Ea[La];Va<ub.length;Va+=1)Pb=ub[Va],Kb=Pb[0],Kb.minzoom&&this.zoom<Math.floor(Kb.minzoom)||Kb.maxzoom&&this.zoom>=Kb.maxzoom||"none"!==Kb.visibility&&(g(Pb,this.zoom,Ia),(Ba[Kb.id]=Kb.createBucket({index:Ta.bucketLayerIDs.length,layers:Pb,zoom:this.zoom,pixelRatio:this.pixelRatio,overscaling:this.overscaling,collisionBoxArray:this.collisionBoxArray,
sourceLayerIndex:Za,sourceID:this.source})).populate(mb,Fa,this.tileID.canonical),Ta.bucketLayerIDs.push(Pb.map(function(Ob){return Ob.id})))}}xa=a.mapObject(Fa.glyphDependencies,function(Ob){return Object.keys(Ob).map(Number)});Object.keys(xa).length?Oa.send("getGlyphs",{uid:this.uid,stacks:xa},function(Ob,Wb){Na||(Na=Ob,ib=Wb,Xa.call(tb))}):ib={};xa=Object.keys(Fa.iconDependencies);xa.length?Oa.send("getImages",{icons:xa,source:this.source,tileID:this.tileID,type:"icons"},function(Ob,Wb){Na||(Na=
Ob,qb=Wb,Xa.call(tb))}):qb={};xa=Object.keys(Fa.patternDependencies);xa.length?Oa.send("getImages",{icons:xa,source:this.source,tileID:this.tileID,type:"patterns"},function(Ob,Wb){Na||(Na=Ob,sb=Wb,Xa.call(tb))}):sb={};Xa.call(this)};var na=function(xa,Ea,Ia,Oa){this.actor=xa;this.layerIndex=Ea;this.availableImages=Ia;this.loadVectorData=Oa||n;this.loading={};this.loaded={}};na.prototype.loadTile=function(xa,Ea){var Ia=this,Oa=xa.uid;this.loading||(this.loading={});var bb=!!(xa&&xa.request&&xa.request.collectResourceTiming)&&
new a.RequestPerformance(xa.request),Xa=this.loading[Oa]=new pa(xa);Xa.abort=this.loadVectorData(xa,function(tb,Ka){if(delete Ia.loading[Oa],tb||!Ka)return Xa.status="done",Ia.loaded[Oa]=Xa,Ea(tb);var Ta=Ka.rawData,Na={};Ka.expires&&(Na.expires=Ka.expires);Ka.cacheControl&&(Na.cacheControl=Ka.cacheControl);var ib={};bb&&(tb=bb.finish())&&(ib.resourceTiming=JSON.parse(JSON.stringify(tb)));Xa.vectorTile=Ka.vectorTile;Xa.parse(Ka.vectorTile,Ia.layerIndex,Ia.availableImages,Ia.actor,function(qb,sb){if(qb||
!sb)return Ea(qb);Ea(null,a.extend({rawTileData:Ta.slice(0)},sb,Na,ib))});Ia.loaded=Ia.loaded||{};Ia.loaded[Oa]=Xa})};na.prototype.reloadTile=function(xa,Ea){var Ia=this,Oa=this.loaded,bb=xa.uid,Xa=this;if(Oa&&Oa[bb]){var tb=Oa[bb];tb.showCollisionBoxes=xa.showCollisionBoxes;xa=function(Ka,Ta){var Na=tb.reloadCallback;Na&&(delete tb.reloadCallback,tb.parse(tb.vectorTile,Xa.layerIndex,Ia.availableImages,Xa.actor,Na));Ea(Ka,Ta)};"parsing"===tb.status?tb.reloadCallback=xa:"done"===tb.status&&(tb.vectorTile?
tb.parse(tb.vectorTile,this.layerIndex,this.availableImages,this.actor,xa):xa())}};na.prototype.abortTile=function(xa,Ea){var Ia=this.loading;xa=xa.uid;Ia&&Ia[xa]&&Ia[xa].abort&&(Ia[xa].abort(),delete Ia[xa]);Ea()};na.prototype.removeTile=function(xa,Ea){var Ia=this.loaded;xa=xa.uid;Ia&&Ia[xa]&&delete Ia[xa];Ea()};var ka=a.window.ImageBitmap,ua=function(){this.loaded={}};ua.prototype.loadTile=function(xa,Ea){var Ia=xa.uid,Oa=xa.encoding;xa=xa.rawImageData;xa=ka&&xa instanceof ka?this.getImageData(xa):
xa;Oa=new a.DEMData(Ia,xa,Oa);this.loaded=this.loaded||{};this.loaded[Ia]=Oa;Ea(null,Oa)};ua.prototype.getImageData=function(xa){this.offscreenCanvas&&this.offscreenCanvasContext||(this.offscreenCanvas=new OffscreenCanvas(xa.width,xa.height),this.offscreenCanvasContext=this.offscreenCanvas.getContext("2d"));this.offscreenCanvas.width=xa.width;this.offscreenCanvas.height=xa.height;this.offscreenCanvasContext.drawImage(xa,0,0,xa.width,xa.height);xa=this.offscreenCanvasContext.getImageData(-1,-1,xa.width+
2,xa.height+2);return this.offscreenCanvasContext.clearRect(0,0,this.offscreenCanvas.width,this.offscreenCanvas.height),new a.RGBAImage({width:xa.width,height:xa.height},xa.data)};ua.prototype.removeTile=function(xa){var Ea=this.loaded;xa=xa.uid;Ea&&Ea[xa]&&delete Ea[xa]};var va=a.vectorTile.VectorTileFeature.prototype.toGeoJSON,Ca=function(xa){this._feature=xa;this.extent=a.EXTENT;this.type=xa.type;this.properties=xa.tags;"id"in xa&&!isNaN(xa.id)&&(this.id=parseInt(xa.id,10))};Ca.prototype.loadGeometry=
function(){if(1===this._feature.type){for(var xa=[],Ea=0,Ia=this._feature.geometry;Ea<Ia.length;Ea+=1){var Oa=Ia[Ea];xa.push([new a.Point$1(Oa[0],Oa[1])])}return xa}xa=[];Ea=0;for(Ia=this._feature.geometry;Ea<Ia.length;Ea+=1){Oa=[];for(var bb=0,Xa=Ia[Ea];bb<Xa.length;bb+=1){var tb=Xa[bb];Oa.push(new a.Point$1(tb[0],tb[1]))}xa.push(Oa)}return xa};Ca.prototype.toGeoJSON=function(xa,Ea,Ia){return va.call(this,xa,Ea,Ia)};var Ma=function(xa){this.layers={_geojsonTileLayer:this};this.name="_geojsonTileLayer";
this.extent=a.EXTENT;this.length=xa.length;this._features=xa};Ma.prototype.feature=function(xa){return new Ca(this._features[xa])};var Ua=a.vectorTile.VectorTileFeature;e.prototype.feature=function(xa){return new f(this.features[xa],this.options.extent)};f.prototype.loadGeometry=function(){var xa=this.rawGeometry;this.geometry=[];for(var Ea=0;Ea<xa.length;Ea++){for(var Ia=xa[Ea],Oa=[],bb=0;bb<Ia.length;bb++)Oa.push(new a.Point$1(Ia[bb][0],Ia[bb][1]));this.geometry.push(Oa)}return this.geometry};f.prototype.bbox=
function(){this.geometry||this.loadGeometry();for(var xa=this.geometry,Ea=1/0,Ia=-1/0,Oa=1/0,bb=-1/0,Xa=0;Xa<xa.length;Xa++)for(var tb=xa[Xa],Ka=0;Ka<tb.length;Ka++){var Ta=tb[Ka];Ea=Math.min(Ea,Ta.x);Ia=Math.max(Ia,Ta.x);Oa=Math.min(Oa,Ta.y);bb=Math.max(bb,Ta.y)}return[Ea,Oa,Ia,bb]};f.prototype.toGeoJSON=Ua.prototype.toGeoJSON;var eb=k;eb.fromVectorTileJs=k;eb.fromGeojsonVt=function(xa,Ea){Ea=Ea||{};var Ia={},Oa;for(Oa in xa)Ia[Oa]=new e(xa[Oa].features,Ea),Ia[Oa].name=Oa,Ia[Oa].version=Ea.version,
Ia[Oa].extent=Ea.extent;return k({layers:Ia})};eb.GeoJSONWrapper=e;var fb=function(xa){return xa[0]},nb=function(xa){return xa[1]},cb=function(xa,Ea,Ia,Oa,bb){void 0===Ea&&(Ea=fb);void 0===Ia&&(Ia=nb);void 0===Oa&&(Oa=64);void 0===bb&&(bb=Float64Array);this.nodeSize=Oa;this.points=xa;var Xa=this.ids=new (65536>xa.length?Uint16Array:Uint32Array)(xa.length);bb=this.coords=new bb(2*xa.length);for(var tb=0;tb<xa.length;tb++)Xa[tb]=tb,bb[2*tb]=Ea(xa[tb]),bb[2*tb+1]=Ia(xa[tb]);!function Fa(Ta,Na,ib,qb,
sb,Ba){if(!(sb-qb<=ib)){var La=qb+sb>>1;!function Wb(Za,mb,ub,Pb,Kb,Ob){for(;Kb>Pb;){if(600<Kb-Pb){var Bc=Kb-Pb+1,Kc=ub-Pb+1,Nc=Math.log(Bc),bd=.5*Math.exp(2*Nc/3);Nc=.5*Math.sqrt(Nc*bd*(Bc-bd)/Bc)*(0>Kc-Bc/2?-1:1);Wb(Za,mb,ub,Math.max(Pb,Math.floor(ub-Kc*bd/Bc+Nc)),Math.min(Kb,Math.floor(ub+(Bc-Kc)*bd/Bc+Nc)),Ob)}Bc=mb[2*ub+Ob];Kc=Pb;bd=Kb;A(Za,mb,Pb,ub);for(mb[2*Kb+Ob]>Bc&&A(Za,mb,Pb,Kb);Kc<bd;){A(Za,mb,Kc,bd);Kc++;for(bd--;mb[2*Kc+Ob]<Bc;)Kc++;for(;mb[2*bd+Ob]>Bc;)bd--}mb[2*Pb+Ob]===Bc?A(Za,mb,
Pb,bd):A(Za,mb,++bd,Kb);bd<=ub&&(Pb=bd+1);ub<=bd&&(Kb=bd-1)}}(Ta,Na,La,qb,sb,Ba%2);Fa(Ta,Na,ib,qb,La-1,Ba+1);Fa(Ta,Na,ib,La+1,sb,Ba+1)}}(Xa,bb,Oa,0,Xa.length-1,0)};cb.prototype.range=function(xa,Ea,Ia,Oa){for(var bb=this.ids,Xa=this.coords,tb=this.nodeSize,Ka,Ta,Na=[0,bb.length-1,0],ib=[];Na.length;){var qb=Na.pop(),sb=Na.pop(),Ba=Na.pop();if(sb-Ba<=tb)for(qb=Ba;qb<=sb;qb++)Ta=Xa[2*qb+1],(Ka=Xa[2*qb])>=xa&&Ka<=Ia&&Ta>=Ea&&Ta<=Oa&&ib.push(bb[qb]);else{var Fa=Math.floor((Ba+sb)/2);Ta=Xa[2*Fa+1];(Ka=
Xa[2*Fa])>=xa&&Ka<=Ia&&Ta>=Ea&&Ta<=Oa&&ib.push(bb[Fa]);var La=(qb+1)%2;(0===qb?xa<=Ka:Ea<=Ta)&&(Na.push(Ba),Na.push(Fa-1),Na.push(La));(0===qb?Ia>=Ka:Oa>=Ta)&&(Na.push(Fa+1),Na.push(sb),Na.push(La))}}return ib};cb.prototype.within=function(xa,Ea,Ia){for(var Oa=this.ids,bb=this.coords,Xa=this.nodeSize,tb=[0,Oa.length-1,0],Ka=[],Ta=Ia*Ia;tb.length;){var Na=tb.pop(),ib=tb.pop(),qb=tb.pop();if(ib-qb<=Xa)for(Na=qb;Na<=ib;Na++){qb=bb[2*Na]-xa;var sb=bb[2*Na+1]-Ea;qb*qb+sb*sb<=Ta&&Ka.push(Oa[Na])}else{sb=
Math.floor((qb+ib)/2);var Ba=bb[2*sb],Fa=bb[2*sb+1],La=Ba-xa,Va=Fa-Ea;La*La+Va*Va<=Ta&&Ka.push(Oa[sb]);La=(Na+1)%2;(0===Na?xa-Ia<=Ba:Ea-Ia<=Fa)&&(tb.push(qb),tb.push(sb-1),tb.push(La));(0===Na?xa+Ia>=Ba:Ea+Ia>=Fa)&&(tb.push(sb+1),tb.push(ib),tb.push(La))}}return Ka};var $a={minZoom:0,maxZoom:16,radius:40,extent:512,nodeSize:64,log:!1,generateId:!1,reduce:null,map:function(xa){return xa}},jb=function(xa){this.options=D(Object.create($a),xa);this.trees=Array(this.options.maxZoom+1)};jb.prototype.load=
function(xa){var Ea=this.options,Ia=Ea.log,Oa=Ea.minZoom,bb=Ea.maxZoom;Ea=Ea.nodeSize;Ia&&console.time("total time");var Xa="prepare "+xa.length+" points";Ia&&console.time(Xa);this.points=xa;for(var tb=[],Ka=0;Ka<xa.length;Ka++)if(xa[Ka].geometry){var Ta=tb,Na=Ta.push;var ib=Ka;var qb=xa[Ka].geometry.coordinates;ib={x:qb[0]/360+.5,y:u(qb[1]),zoom:1/0,index:ib,parentId:-1};Na.call(Ta,ib)}this.trees[bb+1]=new cb(tb,G,J,Ea,Float32Array);Ia&&console.timeEnd(Xa);for(xa=bb;xa>=Oa;xa--)bb=+Date.now(),tb=
this._cluster(tb,xa),this.trees[xa]=new cb(tb,G,J,Ea,Float32Array),Ia&&console.log("z%d: %d clusters in %dms",xa,tb.length,+Date.now()-bb);return Ia&&console.timeEnd("total time"),this};jb.prototype.getClusters=function(xa,Ea){var Ia=((xa[0]+180)%360+360)%360-180,Oa=Math.max(-90,Math.min(90,xa[1])),bb=180===xa[2]?180:((xa[2]+180)%360+360)%360-180,Xa=Math.max(-90,Math.min(90,xa[3]));if(360<=xa[2]-xa[0])Ia=-180,bb=180;else if(Ia>bb)return Ia=this.getClusters([Ia,Oa,180,Xa],Ea),Oa=this.getClusters([-180,
Oa,bb,Xa],Ea),Ia.concat(Oa);Ea=this.trees[this._limitZoom(Ea)];xa=[];var tb=0;for(Oa=Ea.range(Ia/360+.5,u(Xa),bb/360+.5,u(Oa));tb<Oa.length;tb+=1)bb=Ea.points[Oa[tb]],xa.push(bb.numPoints?E(bb):this.points[bb.index]);return xa};jb.prototype.getChildren=function(xa){var Ea=this._getOriginId(xa),Ia=this._getOriginZoom(xa),Oa=this.trees[Ia];if(!Oa)throw Error("No cluster with the specified id.");var bb=Oa.points[Ea];if(!bb)throw Error("No cluster with the specified id.");Ea=[];var Xa=0;for(Ia=Oa.within(bb.x,
bb.y,this.options.radius/(this.options.extent*Math.pow(2,Ia-1)));Xa<Ia.length;Xa+=1)bb=Oa.points[Ia[Xa]],bb.parentId===xa&&Ea.push(bb.numPoints?E(bb):this.points[bb.index]);if(0===Ea.length)throw Error("No cluster with the specified id.");return Ea};jb.prototype.getLeaves=function(xa,Ea,Ia){var Oa=[];return this._appendLeaves(Oa,xa,Ea||10,Ia||0,0),Oa};jb.prototype.getTile=function(xa,Ea,Ia){var Oa=this.trees[this._limitZoom(xa)];xa=Math.pow(2,xa);var bb=this.options;bb=bb.radius/bb.extent;var Xa=
(Ia-bb)/xa,tb=(Ia+1+bb)/xa,Ka={features:[]};return this._addTileFeatures(Oa.range((Ea-bb)/xa,Xa,(Ea+1+bb)/xa,tb),Oa.points,Ea,Ia,xa,Ka),0===Ea&&this._addTileFeatures(Oa.range(1-bb/xa,Xa,1,tb),Oa.points,xa,Ia,xa,Ka),Ea===xa-1&&this._addTileFeatures(Oa.range(0,Xa,bb/xa,tb),Oa.points,-1,Ia,xa,Ka),Ka.features.length?Ka:null};jb.prototype.getClusterExpansionZoom=function(xa){for(var Ea=this._getOriginZoom(xa)-1;Ea<=this.options.maxZoom;){xa=this.getChildren(xa);if(Ea++,1!==xa.length)break;xa=xa[0].properties.cluster_id}return Ea};
jb.prototype._appendLeaves=function(xa,Ea,Ia,Oa,bb){var Xa=0;for(Ea=this.getChildren(Ea);Xa<Ea.length;Xa+=1){var tb=Ea[Xa],Ka=tb.properties;if(Ka&&Ka.cluster?bb+Ka.point_count<=Oa?bb+=Ka.point_count:bb=this._appendLeaves(xa,Ka.cluster_id,Ia,Oa,bb):bb<Oa?bb++:xa.push(tb),xa.length===Ia)break}return bb};jb.prototype._addTileFeatures=function(xa,Ea,Ia,Oa,bb,Xa){for(var tb=0;tb<xa.length;tb+=1){var Ka=Ea[xa[tb]],Ta=Ka.numPoints,Na={type:1,geometry:[[Math.round(this.options.extent*(Ka.x*bb-Ia)),Math.round(this.options.extent*
(Ka.y*bb-Oa))]],tags:Ta?C(Ka):this.points[Ka.index].properties},ib=void 0;Ta?ib=Ka.id:this.options.generateId?ib=Ka.index:this.points[Ka.index].id&&(ib=this.points[Ka.index].id);void 0!==ib&&(Na.id=ib);Xa.features.push(Na)}};jb.prototype._limitZoom=function(xa){return Math.max(this.options.minZoom,Math.min(xa,this.options.maxZoom+1))};jb.prototype._cluster=function(xa,Ea){var Ia=[],Oa=this.options,bb=Oa.reduce;Oa=Oa.radius/(Oa.extent*Math.pow(2,Ea));for(var Xa=0;Xa<xa.length;Xa++){var tb=xa[Xa];if(!(tb.zoom<=
Ea)){tb.zoom=Ea;for(var Ka=this.trees[Ea+1],Ta=Ka.within(tb.x,tb.y,Oa),Na=tb.numPoints||1,ib=tb.x*Na,qb=tb.y*Na,sb=bb&&1<Na?this._map(tb,!0):null,Ba=(Xa<<5)+(Ea+1)+this.points.length,Fa=0;Fa<Ta.length;Fa+=1){var La=Ka.points[Ta[Fa]];if(!(La.zoom<=Ea)){La.zoom=Ea;var Va=La.numPoints||1;ib+=La.x*Va;qb+=La.y*Va;Na+=Va;La.parentId=Ba;bb&&(sb||(sb=this._map(tb,!0)),bb(sb,this._map(La)))}}1===Na?Ia.push(tb):(tb.parentId=Ba,Ia.push({x:ib/Na,y:qb/Na,zoom:1/0,id:Ba,parentId:-1,numPoints:Na,properties:sb}))}}return Ia};
jb.prototype._getOriginId=function(xa){return xa-this.points.length>>5};jb.prototype._getOriginZoom=function(xa){return(xa-this.points.length)%32};jb.prototype._map=function(xa,Ea){if(xa.numPoints)return Ea?D({},xa.properties):xa.properties;xa=this.points[xa.index].properties;var Ia=this.options.map(xa);return Ea&&Ia===xa?D({},Ia):Ia};oa.prototype.options={maxZoom:14,indexMaxZoom:5,indexMaxPoints:1E5,tolerance:3,extent:4096,buffer:64,lineMetrics:!1,promoteId:null,generateId:!1,debug:0};oa.prototype.splitTile=
function(xa,Ea,Ia,Oa,bb,Xa,tb){for(var Ka=[xa,Ea,Ia,Oa],Ta=this.options,Na=Ta.debug;Ka.length;){Oa=Ka.pop();Ia=Ka.pop();Ea=Ka.pop();xa=Ka.pop();var ib=1<<Ea,qb=32*((1<<Ea)*Oa+Ia)+Ea,sb=this.tiles[qb],Ba;if(Ba=!sb){1<Na&&console.time("creation");sb=this.tiles;Ba=xa;for(var Fa=Ta,La=Ea===Fa.maxZoom?0:Fa.tolerance/((1<<Ea)*Fa.extent),Va={features:[],numPoints:0,numSimplified:0,numFeatures:0,source:null,x:Ia,y:Oa,z:Ea,transformed:!1,minX:2,minY:1,maxX:-1,maxY:0},Za=0;Za<Ba.length;Za++){Va.numFeatures++;
var mb=void 0,ub=Va,Pb=Ba[Za],Kb=La,Ob=Fa,Wb=Pb.geometry,Bc=Pb.type,Kc=[];if("Point"===Bc||"MultiPoint"===Bc)for(var Nc=0;Nc<Wb.length;Nc+=3)Kc.push(Wb[Nc]),Kc.push(Wb[Nc+1]),ub.numPoints++,ub.numSimplified++;else if("LineString"===Bc)da(Kc,Wb,ub,Kb,!1,!1);else if("MultiLineString"===Bc||"Polygon"===Bc)for(Nc=0;Nc<Wb.length;Nc++)da(Kc,Wb[Nc],ub,Kb,"Polygon"===Bc,0===Nc);else if("MultiPolygon"===Bc)for(var bd=0;bd<Wb.length;bd++){var kb=Wb[bd];for(Nc=0;Nc<kb.length;Nc++)da(Kc,kb[Nc],ub,Kb,!0,0===Nc)}if(Kc.length){Kb=
Pb.tags||null;if("LineString"===Bc&&Ob.lineMetrics){for(mb in Kb={},Pb.tags)Kb[mb]=Pb.tags[mb];Kb.mapbox_clip_start=Wb.start/Wb.size;Kb.mapbox_clip_end=Wb.end/Wb.size}mb={geometry:Kc,type:"Polygon"===Bc||"MultiPolygon"===Bc?3:"LineString"===Bc||"MultiLineString"===Bc?2:1,tags:Kb};null!==Pb.id&&(mb.id=Pb.id);ub.features.push(mb)}ub=Ba[Za].minX;Pb=Ba[Za].minY;mb=Ba[Za].maxX;Ob=Ba[Za].maxY;ub<Va.minX&&(Va.minX=ub);Pb<Va.minY&&(Va.minY=Pb);mb>Va.maxX&&(Va.maxX=mb);Ob>Va.maxY&&(Va.maxY=Ob)}Ba=(sb=sb[qb]=
Va,this.tileCoords.push({z:Ea,x:Ia,y:Oa}),Na)}Ba&&(1<Na&&(console.log("tile z%d-%d-%d (features: %d, points: %d, simplified: %d)",Ea,Ia,Oa,sb.numFeatures,sb.numPoints,sb.numSimplified),console.timeEnd("creation")),qb="z"+Ea,this.stats[qb]=(this.stats[qb]||0)+1,this.total++);if(sb.source=xa,bb){if(Ea===Ta.maxZoom||Ea===bb)continue;qb=1<<bb-Ea;if(Ia!==Math.floor(Xa/qb)||Oa!==Math.floor(tb/qb))continue}else if(Ea===Ta.indexMaxZoom||sb.numPoints<=Ta.indexMaxPoints)continue;if(sb.source=null,0!==xa.length)1<
Na&&console.time("clipping"),Za=.5*Ta.buffer/Ta.extent,ub=.5-Za,Pb=.5+Za,mb=1+Za,qb=Ba=Fa=La=null,Va=O(xa,ib,Ia-Za,Ia+Pb,0,sb.minX,sb.maxX,Ta),xa=O(xa,ib,Ia+ub,Ia+mb,0,sb.minX,sb.maxX,Ta),Va&&(qb=O(Va,ib,Oa-Za,Oa+Pb,1,sb.minY,sb.maxY,Ta),Ba=O(Va,ib,Oa+ub,Oa+mb,1,sb.minY,sb.maxY,Ta)),xa&&(Fa=O(xa,ib,Oa-Za,Oa+Pb,1,sb.minY,sb.maxY,Ta),La=O(xa,ib,Oa+ub,Oa+mb,1,sb.minY,sb.maxY,Ta)),1<Na&&console.timeEnd("clipping"),Ka.push(qb||[],Ea+1,2*Ia,2*Oa),Ka.push(Ba||[],Ea+1,2*Ia,2*Oa+1),Ka.push(Fa||[],Ea+1,2*Ia+
1,2*Oa),Ka.push(La||[],Ea+1,2*Ia+1,2*Oa+1)}};oa.prototype.getTile=function(xa,Ea,Ia){var Oa=this.options,bb=Oa.extent;Oa=Oa.debug;if(0>xa||24<xa)return null;var Xa=1<<xa;Xa=Ea=(Ea%Xa+Xa)%Xa;Xa=32*((1<<xa)*Ia+Xa)+xa;if(this.tiles[Xa])return la(this.tiles[Xa],bb);1<Oa&&console.log("drilling down to z%d-%d-%d",xa,Ea,Ia);for(var tb,Ka=xa,Ta=Ea,Na=Ia;!tb&&0<Ka;)Ka--,Ta=Math.floor(Ta/2),Na=Math.floor(Na/2),tb=this.tiles[32*((1<<Ka)*Na+Ta)+Ka];return tb&&tb.source?(1<Oa&&console.log("found parent tile z%d-%d-%d",
Ka,Ta,Na),1<Oa&&console.time("drilling down"),this.splitTile(tb.source,Ka,Ta,Na,xa,Ea,Ia),1<Oa&&console.timeEnd("drilling down"),this.tiles[Xa]?la(this.tiles[Xa],bb):null):null};var pb=function(xa){function Ea(Ia,Oa,bb,Xa){xa.call(this,Ia,Oa,bb,sa);Xa&&(this.loadGeoJSON=Xa)}return xa&&(Ea.__proto__=xa),(Ea.prototype=Object.create(xa&&xa.prototype)).constructor=Ea,Ea.prototype.loadData=function(Ia,Oa){this._pendingCallback&&this._pendingCallback(null,{abandoned:!0});this._pendingCallback=Oa;this._pendingLoadDataParams=
Ia;this._state&&"Idle"!==this._state?this._state="NeedsLoadData":(this._state="Coalescing",this._loadData())},Ea.prototype._loadData=function(){var Ia=this;if(this._pendingCallback&&this._pendingLoadDataParams){var Oa=this._pendingCallback,bb=this._pendingLoadDataParams;delete this._pendingCallback;delete this._pendingLoadDataParams;var Xa=!!(bb&&bb.request&&bb.request.collectResourceTiming)&&new a.RequestPerformance(bb.request);this.loadGeoJSON(bb,function(tb,Ka){if(tb||!Ka)return Oa(tb);if("object"!=
typeof Ka)return Oa(Error("Input data given to '"+bb.source+"' is not a valid GeoJSON object."));!function qb(Na,ib){var sb=Na&&Na.type;if("FeatureCollection"===sb)for(sb=0;sb<Na.features.length;sb++)qb(Na.features[sb],ib);else if("GeometryCollection"===sb)for(sb=0;sb<Na.geometries.length;sb++)qb(Na.geometries[sb],ib);else if("Feature"===sb)qb(Na.geometry,ib);else if("Polygon"===sb)p(Na.coordinates,ib);else if("MultiPolygon"===sb)for(sb=0;sb<Na.coordinates.length;sb++)p(Na.coordinates[sb],ib);return Na}(Ka,
!0);try{Ia._geoJSONIndex=bb.cluster?(new jb(function(Na){var ib=Na.superclusterOptions;Na=Na.clusterProperties;if(!Na||!ib)return ib;for(var qb={},sb={},Ba={accumulated:null,zoom:0},Fa={properties:null},La=Object.keys(Na),Va=0;Va<La.length;Va+=1){var Za=La[Va],mb=Na[Za],ub=mb[0];mb=a.createExpression(mb[1]);ub=a.createExpression("string"==typeof ub?[ub,["accumulated"],["get",Za]]:ub);qb[Za]=mb.value;sb[Za]=ub.value}return ib.map=function(Pb){Fa.properties=Pb;Pb={};for(var Kb=0;Kb<La.length;Kb+=1){var Ob=
La[Kb];Pb[Ob]=qb[Ob].evaluate(Ba,Fa)}return Pb},ib.reduce=function(Pb,Kb){Fa.properties=Kb;for(Kb=0;Kb<La.length;Kb+=1){var Ob=La[Kb];Ba.accumulated=Pb[Ob];Pb[Ob]=sb[Ob].evaluate(Ba,Fa)}},ib}(bb))).load(Ka.features):new oa(Ka,bb.geojsonVtOptions)}catch(Na){return Oa(Na)}Ia.loaded={};tb={};Xa&&(Ka=Xa.finish())&&(tb.resourceTiming={},tb.resourceTiming[bb.source]=JSON.parse(JSON.stringify(Ka)));Oa(null,tb)})}},Ea.prototype.coalesce=function(){"Coalescing"===this._state?this._state="Idle":"NeedsLoadData"===
this._state&&(this._state="Coalescing",this._loadData())},Ea.prototype.reloadTile=function(Ia,Oa){var bb=this.loaded;return bb&&bb[Ia.uid]?xa.prototype.reloadTile.call(this,Ia,Oa):this.loadTile(Ia,Oa)},Ea.prototype.loadGeoJSON=function(Ia,Oa){if(Ia.request)a.getJSON(Ia.request,Oa);else{if("string"!=typeof Ia.data)return Oa(Error("Input data given to '"+Ia.source+"' is not a valid GeoJSON object."));try{return Oa(null,JSON.parse(Ia.data))}catch(bb){return Oa(Error("Input data given to '"+Ia.source+
"' is not a valid GeoJSON object."))}}},Ea.prototype.removeSource=function(Ia,Oa){this._pendingCallback&&this._pendingCallback(null,{abandoned:!0});Oa()},Ea.prototype.getClusterExpansionZoom=function(Ia,Oa){try{Oa(null,this._geoJSONIndex.getClusterExpansionZoom(Ia.clusterId))}catch(bb){Oa(bb)}},Ea.prototype.getClusterChildren=function(Ia,Oa){try{Oa(null,this._geoJSONIndex.getChildren(Ia.clusterId))}catch(bb){Oa(bb)}},Ea.prototype.getClusterLeaves=function(Ia,Oa){try{Oa(null,this._geoJSONIndex.getLeaves(Ia.clusterId,
Ia.limit,Ia.offset))}catch(bb){Oa(bb)}},Ea}(na);Ua=function(xa){var Ea=this;this.self=xa;this.actor=new a.Actor(xa,this);this.layerIndexes={};this.availableImages={};this.workerSourceTypes={vector:na,geojson:pb};this.workerSources={};this.demWorkerSources={};this.self.registerWorkerSource=function(Ia,Oa){if(Ea.workerSourceTypes[Ia])throw Error('Worker source with name "'+Ia+'" already registered.');Ea.workerSourceTypes[Ia]=Oa};this.self.registerRTLTextPlugin=function(Ia){if(a.plugin.isParsed())throw Error("RTL text plugin already registered.");
a.plugin.applyArabicShaping=Ia.applyArabicShaping;a.plugin.processBidirectionalText=Ia.processBidirectionalText;a.plugin.processStyledBidirectionalText=Ia.processStyledBidirectionalText}};return Ua.prototype.setReferrer=function(xa,Ea){this.referrer=Ea},Ua.prototype.setImages=function(xa,Ea,Ia){for(var Oa in this.availableImages[xa]=Ea,this.workerSources[xa]){var bb=this.workerSources[xa][Oa],Xa;for(Xa in bb)bb[Xa].availableImages=Ea}Ia()},Ua.prototype.setLayers=function(xa,Ea,Ia){this.getLayerIndex(xa).replace(Ea);
Ia()},Ua.prototype.updateLayers=function(xa,Ea,Ia){this.getLayerIndex(xa).update(Ea.layers,Ea.removedIds);Ia()},Ua.prototype.loadTile=function(xa,Ea,Ia){this.getWorkerSource(xa,Ea.type,Ea.source).loadTile(Ea,Ia)},Ua.prototype.loadDEMTile=function(xa,Ea,Ia){this.getDEMWorkerSource(xa,Ea.source).loadTile(Ea,Ia)},Ua.prototype.reloadTile=function(xa,Ea,Ia){this.getWorkerSource(xa,Ea.type,Ea.source).reloadTile(Ea,Ia)},Ua.prototype.abortTile=function(xa,Ea,Ia){this.getWorkerSource(xa,Ea.type,Ea.source).abortTile(Ea,
Ia)},Ua.prototype.removeTile=function(xa,Ea,Ia){this.getWorkerSource(xa,Ea.type,Ea.source).removeTile(Ea,Ia)},Ua.prototype.removeDEMTile=function(xa,Ea){this.getDEMWorkerSource(xa,Ea.source).removeTile(Ea)},Ua.prototype.removeSource=function(xa,Ea,Ia){if(this.workerSources[xa]&&this.workerSources[xa][Ea.type]&&this.workerSources[xa][Ea.type][Ea.source]){var Oa=this.workerSources[xa][Ea.type][Ea.source];delete this.workerSources[xa][Ea.type][Ea.source];void 0!==Oa.removeSource?Oa.removeSource(Ea,Ia):
Ia()}},Ua.prototype.loadWorkerSource=function(xa,Ea,Ia){try{this.self.importScripts(Ea.url),Ia()}catch(Oa){Ia(Oa.toString())}},Ua.prototype.syncRTLPluginState=function(xa,Ea,Ia){try{a.plugin.setState(Ea);var Oa=a.plugin.getPluginURL();if(a.plugin.isLoaded()&&!a.plugin.isParsed()&&null!=Oa){this.self.importScripts(Oa);var bb=a.plugin.isParsed();Ia(bb?void 0:Error("RTL Text Plugin failed to import scripts from "+Oa),bb)}}catch(Xa){Ia(Xa.toString())}},Ua.prototype.getAvailableImages=function(xa){xa=
this.availableImages[xa];return xa||(xa=[]),xa},Ua.prototype.getLayerIndex=function(xa){var Ea=this.layerIndexes[xa];return Ea||(Ea=this.layerIndexes[xa]=new ma),Ea},Ua.prototype.getWorkerSource=function(xa,Ea,Ia){var Oa=this;return this.workerSources[xa]||(this.workerSources[xa]={}),this.workerSources[xa][Ea]||(this.workerSources[xa][Ea]={}),this.workerSources[xa][Ea][Ia]||(this.workerSources[xa][Ea][Ia]=new this.workerSourceTypes[Ea]({send:function(bb,Xa,tb){Oa.actor.send(bb,Xa,tb,xa)}},this.getLayerIndex(xa),
this.getAvailableImages(xa))),this.workerSources[xa][Ea][Ia]},Ua.prototype.getDEMWorkerSource=function(xa,Ea){return this.demWorkerSources[xa]||(this.demWorkerSources[xa]={}),this.demWorkerSources[xa][Ea]||(this.demWorkerSources[xa][Ea]=new ua),this.demWorkerSources[xa][Ea]},Ua.prototype.enforceCacheSizeLimit=function(xa,Ea){a.enforceCacheSizeLimit(Ea)},"undefined"!=typeof WorkerGlobalScope&&void 0!==a.window&&a.window instanceof WorkerGlobalScope&&(a.window.worker=new Ua(a.window)),Ua});r(["./shared"],
function(a){function h(lb){if(!jb)return lb[0];for(var W=0;W<lb.length;W++)if(lb[W]in jb)return lb[W];return lb[0]}function g(lb,W,aa,Z,ea,wa){this.fontSize=lb||24;this.buffer=void 0===W?3:W;this.cutoff=Z||.25;this.fontFamily=ea||"sans-serif";this.fontWeight=wa||"normal";this.radius=aa||8;lb=this.size=this.fontSize+2*this.buffer;this.canvas=document.createElement("canvas");this.canvas.width=this.canvas.height=lb;this.ctx=this.canvas.getContext("2d");this.ctx.font=this.fontWeight+" "+this.fontSize+
"px "+this.fontFamily;this.ctx.textBaseline="middle";this.ctx.fillStyle="black";this.gridOuter=new Float64Array(lb*lb);this.gridInner=new Float64Array(lb*lb);this.f=new Float64Array(lb);this.d=new Float64Array(lb);this.z=new Float64Array(lb+1);this.v=new Int16Array(lb);this.middle=Math.round(lb/2*(0<=navigator.userAgent.indexOf("Gecko/")?1.2:1))}function n(lb,W,aa,Z,ea,wa,Ga){for(var Sa=0;Sa<W;Sa++){for(var ab=0;ab<aa;ab++)Z[ab]=lb[ab*W+Sa];p(Z,ea,wa,Ga,aa);for(ab=0;ab<aa;ab++)lb[ab*W+Sa]=ea[ab]}for(ab=
0;ab<aa;ab++){for(Sa=0;Sa<W;Sa++)Z[Sa]=lb[ab*W+Sa];p(Z,ea,wa,Ga,W);for(Sa=0;Sa<W;Sa++)lb[ab*W+Sa]=Math.sqrt(ea[Sa])}}function p(lb,W,aa,Z,ea){aa[0]=0;Z[0]=-1E20;Z[1]=1E20;for(var wa=1,Ga=0;wa<ea;wa++){for(var Sa=(lb[wa]+wa*wa-(lb[aa[Ga]]+aa[Ga]*aa[Ga]))/(2*wa-2*aa[Ga]);Sa<=Z[Ga];)Ga--,Sa=(lb[wa]+wa*wa-(lb[aa[Ga]]+aa[Ga]*aa[Ga]))/(2*wa-2*aa[Ga]);aa[++Ga]=wa;Z[Ga]=Sa;Z[Ga+1]=1E20}for(Ga=wa=0;wa<ea;wa++){for(;Z[Ga+1]<wa;)Ga++;W[wa]=(wa-aa[Ga])*(wa-aa[Ga])+lb[aa[Ga]]}}function d(lb,W,aa){var Z=function(ea,
wa){if(ea)return aa(ea);wa&&(ea=a.pick(a.extend(wa,lb),"tiles minzoom maxzoom attribution mapbox_logo bounds scheme tileSize encoding".split(" ")),wa.vector_layers&&(ea.vectorLayers=wa.vector_layers,ea.vectorLayerIds=ea.vectorLayers.map(function(Ga){return Ga.id})),ea.tiles=W.canonicalizeTileset(ea,lb.url),aa(null,ea))};return lb.url?a.getJSON(W.transformRequest(W.normalizeSourceURL(lb.url),a.ResourceType.Source),Z):a.browser.frame(function(){return Z(null,lb)})}function e(lb,W){var aa=a.identity([]);
return a.translate(aa,aa,[1,1,0]),a.scale(aa,aa,[.5*lb.width,.5*lb.height,1]),a.multiply(aa,aa,lb.calculatePosMatrix(W.toUnwrapped()))}function f(lb,W,aa,Z,ea,wa){var Ga=function(Ib,nc,mc){if(Ib)for(var cc=0;cc<Ib.length;cc+=1){var lc=nc[Ib[cc]];if(lc&&lc.source===mc&&"fill-extrusion"===lc.type)return!0}else for(cc in nc)if(Ib=nc[cc],Ib.source===mc&&"fill-extrusion"===Ib.type)return!0;return!1}(ea&&ea.layers,W,lb.id),Sa=wa.maxPitchScaleFactor();Z=lb.tilesIn(Z,Sa,Ga);Z.sort(k);Ga=[];for(var ab=0;ab<
Z.length;ab+=1){var yb=Z[ab];Ga.push({wrappedTileID:yb.tileID.wrapped().key,queryResults:yb.tile.queryRenderedFeatures(W,aa,lb._state,yb.queryGeometry,yb.cameraQueryGeometry,yb.scale,ea,wa,Sa,e(lb.transform,yb.tileID))})}W=function(Ib){for(var nc={},mc={},cc=0;cc<Ib.length;cc+=1){var lc=Ib[cc],kc=lc.queryResults;lc=lc.wrappedTileID;lc=mc[lc]=mc[lc]||{};for(var Gb in kc)for(var dc=kc[Gb],Dc=lc[Gb]=lc[Gb]||{},Uc=nc[Gb]=nc[Gb]||[],jd=0;jd<dc.length;jd+=1){var Ic=dc[jd];Dc[Ic.featureIndex]||(Dc[Ic.featureIndex]=
!0,Uc.push(Ic))}}return nc}(Ga);for(var Hb in W)W[Hb].forEach(function(Ib){Ib=Ib.feature;var nc=lb.getFeatureState(Ib.layer["source-layer"],Ib.id);Ib.source=Ib.layer.source;Ib.layer["source-layer"]&&(Ib.sourceLayer=Ib.layer["source-layer"]);Ib.state=nc});return W}function k(lb,W){lb=lb.tileID;W=W.tileID;return lb.overscaledZ-W.overscaledZ||lb.canonical.y-W.canonical.y||lb.wrap-W.wrap||lb.canonical.x-W.canonical.x}function t(lb,W){var aa=Math.abs(2*lb.wrap)-+(0>lb.wrap),Z=Math.abs(2*W.wrap)-+(0>W.wrap);
return lb.overscaledZ-W.overscaledZ||Z-aa||W.canonical.y-lb.canonical.y||W.canonical.x-lb.canonical.x}function v(lb){return"raster"===lb||"image"===lb||"video"===lb}function w(){return new a.window.Worker(Di.workerUrl)}function y(lb,W){var aa={},Z;for(Z in lb)"ref"!==Z&&(aa[Z]=lb[Z]);return a.refProperties.forEach(function(ea){ea in W&&(aa[ea]=W[ea])}),aa}function B(lb){lb=lb.slice();for(var W=Object.create(null),aa=0;aa<lb.length;aa++)W[lb[aa].id]=lb[aa];for(aa=0;aa<lb.length;aa++)"ref"in lb[aa]&&
(lb[aa]=y(lb[aa],W[lb[aa].ref]));return lb}function A(lb,W,aa,Z,ea,wa){for(var Ga in W=W||{},lb=lb||{})lb.hasOwnProperty(Ga)&&(a.deepEqual(lb[Ga],W[Ga])||aa.push({command:wa,args:[Z,Ga,W[Ga],ea]}));for(Ga in W)W.hasOwnProperty(Ga)&&!lb.hasOwnProperty(Ga)&&(a.deepEqual(lb[Ga],W[Ga])||aa.push({command:wa,args:[Z,Ga,W[Ga],ea]}))}function z(lb){return lb.id}function E(lb,W){return lb[W.id]=W,lb}function C(lb,W,aa,Z,ea){var wa=a.create();return W?(a.scale(wa,wa,[1/ea,1/ea,1]),aa||a.rotateZ(wa,wa,Z.angle)):
a.multiply(wa,Z.labelPlaneMatrix,lb),wa}function u(lb,W,aa,Z,ea){return W?(lb=a.clone(lb),a.scale(lb,lb,[ea,ea,1]),aa||a.rotateZ(lb,lb,-Z.angle),lb):Z.glCoordMatrix}function D(lb,W){lb=[lb.x,lb.y,0,1];P(lb,lb,W);W=lb[3];return{point:new a.Point(lb[0]/W,lb[1]/W),signedDistanceFromCamera:W}}function G(lb,W,aa,Z,ea,wa,Ga,Sa){var ab=Z?lb.textSizeData:lb.iconSizeData,yb=a.evaluateSizeForZoom(ab,aa.transform.zoom),Hb=[256/aa.width*2+1,256/aa.height*2+1],Ib=Z?lb.text.dynamicLayoutVertexArray:lb.icon.dynamicLayoutVertexArray;
Ib.clear();for(var nc=lb.lineVertexArray,mc=Z?lb.text.placedSymbolArray:lb.icon.placedSymbolArray,cc=aa.transform.width/aa.transform.height,lc=!1,kc=0;kc<mc.length;kc++){var Gb=mc.get(kc);if(Gb.hidden||Gb.writingMode===a.WritingMode.vertical&&!lc)M(Gb.numGlyphs,Ib);else{lc=!1;var dc=[Gb.anchorX,Gb.anchorY,0,1];a.transformMat4(dc,dc,W);var Dc=dc[0]/dc[3],Uc=dc[1]/dc[3];if(Dc>=-Hb[0]&&Dc<=Hb[0]&&Uc>=-Hb[1]&&Uc<=Hb[1]){lc=.5+aa.transform.cameraToCenterDistance/dc[3]*.5;dc=a.evaluateSizeForFeature(ab,
yb,Gb);dc=Ga?dc/lc:dc*lc;Dc=new a.Point(Gb.anchorX,Gb.anchorY);Uc=D(Dc,ea).point;var jd={},Ic=K(Gb,dc,!1,Sa,W,ea,wa,lb.glyphOffsetArray,nc,Ib,Uc,Dc,jd,cc);lc=Ic.useVertical;(Ic.notEnoughRoom||lc||Ic.needsFlipping&&K(Gb,dc,!0,Sa,W,ea,wa,lb.glyphOffsetArray,nc,Ib,Uc,Dc,jd,cc).notEnoughRoom)&&M(Gb.numGlyphs,Ib)}else M(Gb.numGlyphs,Ib)}}Z?lb.text.dynamicLayoutVertexBuffer.updateData(Ib):lb.icon.dynamicLayoutVertexBuffer.updateData(Ib)}function J(lb,W,aa,Z,ea,wa,Ga,Sa,ab,yb,Hb){var Ib=Sa.glyphStartIndex+
Sa.numGlyphs,nc=Sa.lineStartIndex,mc=Sa.lineStartIndex+Sa.lineLength,cc=W.getoffsetX(Sa.glyphStartIndex);W=W.getoffsetX(Ib-1);cc=Q(lb*cc,aa,Z,ea,wa,Ga,Sa.segment,nc,mc,ab,yb,Hb);return cc?(lb=Q(lb*W,aa,Z,ea,wa,Ga,Sa.segment,nc,mc,ab,yb,Hb))?{first:cc,last:lb}:null:null}function L(lb,W,aa,Z){return lb===a.WritingMode.horizontal&&Math.abs(aa.y-W.y)>Math.abs(aa.x-W.x)*Z?{useVertical:!0}:(lb===a.WritingMode.vertical?W.y<aa.y:W.x>aa.x)?{needsFlipping:!0}:null}function K(lb,W,aa,Z,ea,wa,Ga,Sa,ab,yb,Hb,
Ib,nc,mc){W/=24;var cc=lb.lineOffsetX*W,lc=lb.lineOffsetY*W;if(1<lb.numGlyphs){ea=lb.glyphStartIndex+lb.numGlyphs;var kc=lb.lineStartIndex,Gb=lb.lineStartIndex+lb.lineLength,dc=J(W,Sa,cc,lc,aa,Hb,Ib,lb,ab,wa,nc);if(!dc)return{notEnoughRoom:!0};var Dc=D(dc.first.point,Ga).point;Ga=D(dc.last.point,Ga).point;if(Z&&!aa&&(mc=L(lb.writingMode,Dc,Ga,mc)))return mc;mc=[dc.first];for(Z=lb.glyphStartIndex+1;Z<ea-1;Z++)mc.push(Q(W*Sa.getoffsetX(Z),cc,lc,aa,Hb,Ib,lb.segment,kc,Gb,ab,wa,nc));mc.push(dc.last)}else{if(Z&&
!aa&&(kc=D(Ib,ea).point,Gb=lb.lineStartIndex+lb.segment+1,Gb=new a.Point(ab.getx(Gb),ab.gety(Gb)),dc=D(Gb,ea),ea=0<dc.signedDistanceFromCamera?dc.point:H(Ib,Gb,kc,1,ea),mc=L(lb.writingMode,kc,ea,mc)))return mc;lb=Q(W*Sa.getoffsetX(lb.glyphStartIndex),cc,lc,aa,Hb,Ib,lb.segment,lb.lineStartIndex,lb.lineStartIndex+lb.lineLength,ab,wa,nc);if(!lb)return{notEnoughRoom:!0};mc=[lb]}lb=0;for(aa=mc;lb<aa.length;lb+=1)wa=aa[lb],a.addDynamicAttributes(yb,wa.point,wa.angle);return{}}function H(lb,W,aa,Z,ea){lb=
D(lb.add(lb.sub(W)._unit()),ea).point;lb=aa.sub(lb);return aa.add(lb._mult(Z/lb.mag()))}function Q(lb,W,aa,Z,ea,wa,Ga,Sa,ab,yb,Hb,Ib){var nc=Z?lb-W:lb+W;lb=0<nc?1:-1;W=0;Z&&(lb*=-1,W=Math.PI);0>lb&&(W+=Math.PI);Z=0<lb?Sa+Ga:Sa+Ga+1;Ga=ea;var mc=0,cc=0,lc=Math.abs(nc);for(nc=[];mc+cc<=lc;){if((Z+=lb)<Sa||Z>=ab)return null;if(ea=Ga,nc.push(Ga),void 0===(Ga=Ib[Z])){Ga=new a.Point(yb.getx(Z),yb.gety(Z));var kc=D(Ga,Hb);0<kc.signedDistanceFromCamera?Ga=Ib[Z]=kc.point:(kc=Z-lb,Ga=H(0===mc?wa:new a.Point(yb.getx(kc),
yb.gety(kc)),Ga,ea,lc-mc+1,Hb))}mc+=cc;cc=ea.dist(Ga)}Sa=(lc-mc)/cc;wa=Ga.sub(ea);Sa=wa.mult(Sa)._add(ea);Sa._add(wa._unit()._perp()._mult(aa*lb));aa=W+Math.atan2(Ga.y-ea.y,Ga.x-ea.x);return nc.push(Sa),{point:Sa,angle:aa,path:nc}}function M(lb,W){for(var aa=0;aa<lb;aa++){var Z=W.length;W.resize(Z+4);W.float32.set(Xd,3*Z)}}function P(lb,W,aa){var Z=W[0];W=W[1];return lb[0]=aa[0]*Z+aa[4]*W+aa[12],lb[1]=aa[1]*Z+aa[5]*W+aa[13],lb[3]=aa[3]*Z+aa[7]*W+aa[15],lb}function T(lb,W,aa){return a.EXTENT/(lb.tileSize*
Math.pow(2,aa-lb.tileID.overscaledZ))*W}function O(lb,W,aa,Z,ea){var wa=a.getAnchorAlignment(lb);W*=-(wa.horizontalAlign-.5);aa*=-(wa.verticalAlign-.5);lb=a.evaluateVariableOffset(lb,Z);return new a.Point(W+lb[0]*ea,aa+lb[1]*ea)}function U(lb,W,aa,Z,ea,wa){var Ga=lb.x1,Sa=lb.x2,ab=lb.y1,yb=lb.y2,Hb=lb.anchorPointX;lb=lb.anchorPointY;W=new a.Point(W,aa);return Z&&W._rotate(ea?wa:-wa),{x1:Ga+W.x,y1:ab+W.y,x2:Sa+W.x,y2:yb+W.y,anchorPointX:Hb,anchorPointY:lb}}function S(lb,W,aa,Z,ea){lb.emplaceBack(W?
1:0,aa?1:0,Z||0,ea||0);lb.emplaceBack(W?1:0,aa?1:0,Z||0,ea||0);lb.emplaceBack(W?1:0,aa?1:0,Z||0,ea||0);lb.emplaceBack(W?1:0,aa?1:0,Z||0,ea||0)}function X(lb){if(0===lb.opacity&&!lb.placed)return 0;if(1===lb.opacity&&lb.placed)return 4294967295;var W=lb.placed?1:0;lb=Math.floor(127*lb.opacity);return lb*kd+W*Od+lb*Td+W*Ld+lb*Jd+W*fe+lb*pe+W}function ba(lb,W){var aa=/#pragma mapbox: ([\w]+) ([\w]+) ([\w]+) ([\w]+)/g,Z={};return{fragmentSource:lb=lb.replace(aa,function(ea,wa,Ga,Sa,ab){return Z[ab]=!0,
"define"===wa?"\n#ifndef HAS_UNIFORM_u_"+ab+"\nvarying "+Ga+" "+Sa+" "+ab+";\n#else\nuniform "+Ga+" "+Sa+" u_"+ab+";\n#endif\n":"\n#ifdef HAS_UNIFORM_u_"+ab+"\n    "+Ga+" "+Sa+" "+ab+" \x3d u_"+ab+";\n#endif\n"}),vertexSource:W=W.replace(aa,function(ea,wa,Ga,Sa,ab){ea="float"===Sa?"vec2":"vec4";var yb=ab.match(/color/)?"color":ea;return Z[ab]?"define"===wa?"\n#ifndef HAS_UNIFORM_u_"+ab+"\nuniform lowp float u_"+ab+"_t;\nattribute "+Ga+" "+ea+" a_"+ab+";\nvarying "+Ga+" "+Sa+" "+ab+";\n#else\nuniform "+
Ga+" "+Sa+" u_"+ab+";\n#endif\n":"vec4"===yb?"\n#ifndef HAS_UNIFORM_u_"+ab+"\n    "+ab+" \x3d a_"+ab+";\n#else\n    "+Ga+" "+Sa+" "+ab+" \x3d u_"+ab+";\n#endif\n":"\n#ifndef HAS_UNIFORM_u_"+ab+"\n    "+ab+" \x3d unpack_mix_"+yb+"(a_"+ab+", u_"+ab+"_t);\n#else\n    "+Ga+" "+Sa+" "+ab+" \x3d u_"+ab+";\n#endif\n":"define"===wa?"\n#ifndef HAS_UNIFORM_u_"+ab+"\nuniform lowp float u_"+ab+"_t;\nattribute "+Ga+" "+ea+" a_"+ab+";\n#else\nuniform "+Ga+" "+Sa+" u_"+ab+";\n#endif\n":"vec4"===yb?"\n#ifndef HAS_UNIFORM_u_"+
ab+"\n    "+Ga+" "+Sa+" "+ab+" \x3d a_"+ab+";\n#else\n    "+Ga+" "+Sa+" "+ab+" \x3d u_"+ab+";\n#endif\n":"\n#ifndef HAS_UNIFORM_u_"+ab+"\n    "+Ga+" "+Sa+" "+ab+" \x3d unpack_mix_"+yb+"(a_"+ab+", u_"+ab+"_t);\n#else\n    "+Ga+" "+Sa+" "+ab+" \x3d u_"+ab+";\n#endif\n"})}}function ca(lb,W,aa){var Z=1/T(aa,1,W.transform.tileZoom),ea=Math.pow(2,aa.tileID.overscaledZ);W=aa.tileSize*Math.pow(2,W.transform.tileZoom)/ea;ea=W*(aa.tileID.canonical.x+aa.tileID.wrap*ea);W*=aa.tileID.canonical.y;return{u_image:0,
u_texsize:aa.imageAtlasTexture.size,u_scale:[Z,lb.fromScale,lb.toScale],u_fade:lb.t,u_pixel_coord_upper:[ea>>16,W>>16],u_pixel_coord_lower:[65535&ea,65535&W]}}function ia(lb,W,aa){return lb.translatePosMatrix(W.tileID.posMatrix,W,aa.paint.get("line-translate"),aa.paint.get("line-translate-anchor"))}function ja(lb,W,aa,Z,ea,wa,Ga){for(var Sa=lb.context,ab=Sa.gl,yb=lb.useProgram("collisionBox"),Hb=[],Ib=0,nc=0,mc=0;mc<Z.length;mc++){var cc=Z[mc],lc=W.getTile(cc),kc=lc.getBucket(aa);if(kc){var Gb=cc.posMatrix;
0===ea[0]&&0===ea[1]||(Gb=lb.translatePosMatrix(cc.posMatrix,lc,ea,wa));cc=Ga?kc.textCollisionBox:kc.iconCollisionBox;var dc=kc.collisionCircleArray;if(0<dc.length){var Dc=a.create(),Uc=Gb;a.mul(Dc,kc.placementInvProjMatrix,lb.transform.glCoordMatrix);a.mul(Dc,Dc,kc.placementViewportMatrix);Hb.push({circleArray:dc,circleOffset:nc,transform:Uc,invTransform:Dc});nc=Ib+=dc.length/4}if(cc){kc=yb;dc=kc.draw;Dc=ab.LINES;Uc=Ad.disabled;var jd=Bd.disabled,Ic=lb.colorModeForRenderPass(),ld=le.disabled,id=
lb.transform,yd=lc;lc=T(yd,1,id.zoom);var zd=Math.pow(2,id.zoom-yd.tileID.overscaledZ);yd=yd.tileID.overscaleFactor();dc.call(kc,Sa,Dc,Uc,jd,Ic,ld,{u_matrix:Gb,u_camera_to_center_distance:id.cameraToCenterDistance,u_pixels_to_tile_units:lc,u_extrude_scale:[id.pixelsToGLUnits[0]/(lc*zd),id.pixelsToGLUnits[1]/(lc*zd)],u_overscale_factor:yd},aa.id,cc.layoutVertexBuffer,cc.indexBuffer,cc.segments,null,lb.transform.zoom,null,null,cc.collisionVertexBuffer)}}}if(Ga&&Hb.length){W=lb.useProgram("collisionCircle");
Z=new a.StructArrayLayout2f1f2i16;Z.resize(4*Ib);Z._trim();for(wa=ea=0;wa<Hb.length;wa+=1)for(Ga=Hb[wa],yb=0;yb<Ga.circleArray.length/4;yb++)lc=4*yb,nc=Ga.circleArray[lc+0],mc=Ga.circleArray[lc+1],cc=Ga.circleArray[lc+2],lc=Ga.circleArray[lc+3],Z.emplace(ea++,nc,mc,cc,lc,0),Z.emplace(ea++,nc,mc,cc,lc,1),Z.emplace(ea++,nc,mc,cc,lc,2),Z.emplace(ea++,nc,mc,cc,lc,3);if(!vi||vi.length<2*Ib){Ib*=2;ea=new a.StructArrayLayout3ui6;ea.resize(Ib);ea._trim();for(wa=0;wa<Ib;wa++)Ga=6*wa,ea.uint16[Ga+0]=4*wa,ea.uint16[Ga+
1]=4*wa+1,ea.uint16[Ga+2]=4*wa+2,ea.uint16[Ga+3]=4*wa+2,ea.uint16[Ga+4]=4*wa+3,ea.uint16[Ga+5]=4*wa;vi=ea}Ib=Sa.createIndexBuffer(vi,!0);Z=Sa.createVertexBuffer(Z,a.collisionCircleLayout.members,!0);for(ea=0;ea<Hb.length;ea+=1)wa=Hb[ea],Ga=lb.transform,Ga={u_matrix:wa.transform,u_inv_matrix:wa.invTransform,u_camera_to_center_distance:Ga.cameraToCenterDistance,u_viewport_size:[Ga.width,Ga.height]},W.draw(Sa,ab.TRIANGLES,Ad.disabled,Bd.disabled,lb.colorModeForRenderPass(),le.disabled,Ga,aa.id,Z,Ib,
a.SegmentVector.simpleSegment(0,2*wa.circleOffset,wa.circleArray.length,wa.circleArray.length/2),null,lb.transform.zoom,null,null,null);Z.destroy();Ib.destroy()}}function la(lb,W,aa,Z,ea,wa,Ga,Sa,ab,yb,Hb,Ib){var nc=lb.context,mc=nc.gl,cc=lb.transform,lc="map"===Sa,kc="map"===ab,Gb=lc&&"point"!==aa.layout.get("symbol-placement"),dc=lc&&!kc&&!Gb,Dc=void 0!==aa.layout.get("symbol-sort-key").constantOr(1);ab=lb.depthModeForSublayer(0,Ad.ReadOnly);var Uc=aa.layout.get("text-variable-anchor");Sa=[];for(var jd=
0;jd<Z.length;jd+=1){var Ic=Z[jd],ld=W.getTile(Ic),id=ld.getBucket(aa);if(id){var yd=ea?id.text:id.icon;if(yd&&yd.segments.get().length){var zd=yd.programConfigurations.get(aa.id),ud=ea||id.sdfIcons,ie=ea?id.textSizeData:id.iconSizeData,ge=kc||0!==cc.pitch;zd=lb.useProgram(id.iconsInText&&ea?"symbolTextAndIcon":ud?"symbolSDF":"symbolIcon",zd);var Ee=a.evaluateSizeForZoom(ie,cc.zoom),Ge=void 0,Be=[0,0],Qd=void 0,qe=void 0,Ne=null,ze=void 0;ea?(Qd=ld.glyphAtlasTexture,qe=mc.LINEAR,Ge=ld.glyphAtlasTexture.size,
id.iconsInText&&(Be=ld.imageAtlasTexture.size,Ne=ld.imageAtlasTexture,ze=ge||lb.options.rotating||lb.options.zooming||"composite"===ie.kind||"camera"===ie.kind?mc.LINEAR:mc.NEAREST)):(Ge=1!==aa.layout.get("icon-size").constantOr(0)||id.iconsNeedLinear,Qd=ld.imageAtlasTexture,qe=ud||lb.options.rotating||lb.options.zooming||Ge||ge?mc.LINEAR:mc.NEAREST,Ge=ld.imageAtlasTexture.size);var Te=T(ld,1,lb.transform.zoom);ge=C(Ic.posMatrix,kc,lc,lb.transform,Te);Te=u(Ic.posMatrix,kc,lc,lb.transform,Te);var nf=
Uc&&id.hasTextData();nf="none"!==aa.layout.get("icon-text-fit")&&nf&&id.hasIconData();Gb&&G(id,Ic.posMatrix,lb,ea,ge,Te,kc,yb);Ic=lb.translatePosMatrix(Ic.posMatrix,ld,wa,Ga);ge=Gb||ea&&Uc||nf?sk:ge;ld=lb.translatePosMatrix(Te,ld,wa,Ga,!0);Te=ud&&0!==aa.paint.get(ea?"text-halo-width":"icon-halo-width").constantOr(1);id={program:zd,buffers:yd,uniformValues:ud?id.iconsInText?dk(ie.kind,Ee,dc,kc,lb,Ic,ge,ld,Ge,Be):Kj(ie.kind,Ee,dc,kc,lb,Ic,ge,ld,ea,Ge,!0):ck(ie.kind,Ee,dc,kc,lb,Ic,ge,ld,ea,Ge),atlasTexture:Qd,
atlasTextureIcon:Ne,atlasInterpolation:qe,atlasInterpolationIcon:ze,isSDF:ud,hasHalo:Te};if(Dc)for(ud=0,yd=yd.segments.get();ud<yd.length;ud+=1)ie=yd[ud],Sa.push({segments:new a.SegmentVector([ie]),sortKey:ie.sortKey,state:id});else Sa.push({segments:yd.segments,sortKey:0,state:id})}}}Dc&&Sa.sort(function(rf,Eg){return rf.sortKey-Eg.sortKey});for(W=0;W<Sa.length;W+=1){Z=Sa[W];ea=Z.state;if(nc.activeTexture.set(mc.TEXTURE0),ea.atlasTexture.bind(ea.atlasInterpolation,mc.CLAMP_TO_EDGE),ea.atlasTextureIcon&&
(nc.activeTexture.set(mc.TEXTURE1),ea.atlasTextureIcon&&ea.atlasTextureIcon.bind(ea.atlasInterpolationIcon,mc.CLAMP_TO_EDGE)),ea.isSDF)wa=ea.uniformValues,ea.hasHalo&&(wa.u_is_halo=1,da(ea.buffers,Z.segments,aa,lb,ea.program,ab,Hb,Ib,wa)),wa.u_is_halo=0;da(ea.buffers,Z.segments,aa,lb,ea.program,ab,Hb,Ib,ea.uniformValues)}}function da(lb,W,aa,Z,ea,wa,Ga,Sa,ab){var yb=Z.context;ea.draw(yb,yb.gl.TRIANGLES,wa,Ga,Sa,le.disabled,ab,aa.id,lb.layoutVertexBuffer,lb.indexBuffer,W,aa.paint,Z.transform.zoom,
lb.programConfigurations.get(aa.id),lb.dynamicLayoutVertexBuffer,lb.opacityVertexBuffer)}function oa(lb,W,aa,Z,ea,wa,Ga){var Sa,ab,yb,Hb=lb.context.gl,Ib=aa.paint.get("fill-pattern"),nc=Ib&&Ib.constantOr(1),mc=aa.getCrossfadeParameters();Ga?(ab=nc&&!aa.getPaintProperty("fill-outline-color")?"fillOutlinePattern":"fillOutline",Sa=Hb.LINES):(ab=nc?"fillPattern":"fill",Sa=Hb.TRIANGLES);for(var cc=0;cc<Z.length;cc+=1){var lc=Z[cc];var kc=W.getTile(lc);if(!nc||kc.patternsLoaded()){var Gb=kc.getBucket(aa);
if(Gb){var dc=Gb.programConfigurations.get(aa.id),Dc=lb.useProgram(ab,dc);nc&&(lb.context.activeTexture.set(Hb.TEXTURE0),kc.imageAtlasTexture.bind(Hb.LINEAR,Hb.CLAMP_TO_EDGE),dc.updatePaintBuffers(mc));if((yb=Ib.constantOr(null))&&kc.imageAtlas){var Uc=kc.imageAtlas;var jd=Uc.patternPositions[yb.to.toString()];yb=Uc.patternPositions[yb.from.toString()];jd&&yb&&dc.setConstantPatternPositions(jd,yb)}Uc=lb.translatePosMatrix(lc.posMatrix,kc,aa.paint.get("fill-translate"),aa.paint.get("fill-translate-anchor"));
if(Ga){jd=Gb.indexBuffer2;yb=Gb.segments2;var Ic=[Hb.drawingBufferWidth,Hb.drawingBufferHeight];if("fillOutlinePattern"===ab&&nc){var ld=a,id=ld.extend;kc=a.extend({u_matrix:Uc},ca(mc,lb,kc));kc=id.call(ld,kc,{u_world:Ic})}else kc={u_matrix:Uc,u_world:Ic}}else jd=Gb.indexBuffer,yb=Gb.segments,kc=nc?a.extend({u_matrix:Uc},ca(mc,lb,kc)):{u_matrix:Uc};Dc.draw(lb.context,Sa,ea,lb.stencilModeForClipping(lc),wa,le.disabled,kc,aa.id,Gb.layoutVertexBuffer,jd,yb,aa.paint,lb.transform.zoom,dc)}}}}function sa(lb,
W,aa,Z,ea,wa,Ga){for(var Sa=lb.context,ab=Sa.gl,yb=aa.paint.get("fill-extrusion-pattern"),Hb=yb.constantOr(1),Ib=aa.getCrossfadeParameters(),nc=aa.paint.get("fill-extrusion-opacity"),mc=0;mc<Z.length;mc+=1){var cc=Z[mc],lc=W.getTile(cc),kc=lc.getBucket(aa);if(kc){var Gb=kc.programConfigurations.get(aa.id),dc=lb.useProgram(Hb?"fillExtrusionPattern":"fillExtrusion",Gb);Hb&&(lb.context.activeTexture.set(ab.TEXTURE0),lc.imageAtlasTexture.bind(ab.LINEAR,ab.CLAMP_TO_EDGE),Gb.updatePaintBuffers(Ib));var Dc=
yb.constantOr(null);if(Dc&&lc.imageAtlas){var Uc=lc.imageAtlas,jd=Uc.patternPositions[Dc.to.toString()];Dc=Uc.patternPositions[Dc.from.toString()];jd&&Dc&&Gb.setConstantPatternPositions(jd,Dc)}jd=lb.translatePosMatrix(cc.posMatrix,lc,aa.paint.get("fill-extrusion-translate"),aa.paint.get("fill-extrusion-translate-anchor"));Dc=aa.paint.get("fill-extrusion-vertical-gradient");if(Hb){Uc=lb;var Ic=Ib;lc=a.extend(mg(jd,Uc,Dc,nc),ca(Ic,Uc,lc),{u_height_factor:-Math.pow(2,cc.overscaledZ)/lc.tileSize/8})}else lc=
mg(jd,lb,Dc,nc);dc.draw(Sa,Sa.gl.TRIANGLES,ea,wa,Ga,le.backCCW,lc,aa.id,kc.layoutVertexBuffer,kc.indexBuffer,kc.segments,aa.paint,lb.transform.zoom,Gb)}}}function ma(lb,W,aa,Z,ea,wa){lb=lb.context;var Ga=lb.gl;Ga.enable(Ga.SCISSOR_TEST);Ga.scissor(W*a.browser.devicePixelRatio,aa*a.browser.devicePixelRatio,Z*a.browser.devicePixelRatio,ea*a.browser.devicePixelRatio);lb.clear({color:wa});Ga.disable(Ga.SCISSOR_TEST)}function qa(lb,W){(!lb.duration||lb.duration<W.duration)&&(lb.duration=W.duration,lb.easing=
W.easing)}function pa(lb,W,aa){var Z=aa.maxSpeed,ea=aa.linearity,wa=aa.deceleration;lb=a.clamp(lb*ea/(W/1E3),-Z,Z);ea=Math.abs(lb)/(wa*ea);return{easing:aa.easing,duration:1E3*ea,amount:ea/2*lb}}function na(lb,W){for(var aa={},Z=0;Z<lb.length;Z++)aa[lb[Z].identifier]=W[Z];return aa}function ka(lb,W,aa){for(var Z=0;Z<lb.length;Z++)if(lb[Z].identifier===aa)return W[Z]}function ua(lb){return Math.abs(lb.y)>Math.abs(lb.x)}function va(lb){return lb*(2-lb)}function Ca(lb){return lb.panDelta&&lb.panDelta.mag()||
lb.zoomDelta||lb.bearingDelta||lb.pitchDelta}function Ma(lb){lb.parentNode&&lb.parentNode.removeChild(lb)}function Ua(lb,W,aa){if(lb=new a.LngLat(lb.lng,lb.lat),W){var Z=new a.LngLat(lb.lng-360,lb.lat),ea=new a.LngLat(lb.lng+360,lb.lat),wa=aa.locationPoint(lb).distSqr(W);aa.locationPoint(Z).distSqr(W)<wa?lb=Z:aa.locationPoint(ea).distSqr(W)<wa&&(lb=ea)}for(;180<Math.abs(lb.lng-aa.center.lng);){W=aa.locationPoint(lb);if(0<=W.x&&0<=W.y&&W.x<=aa.width&&W.y<=aa.height)break;lb.lng>aa.center.lng?lb.lng-=
360:lb.lng+=360}return lb}function eb(lb,W,aa){lb=lb.classList;for(var Z in Dg)lb.remove("mapboxgl-"+aa+"-anchor-"+Z);lb.add("mapboxgl-"+aa+"-anchor-"+W)}function fb(lb,W,aa){var Z=aa&&aa.maxWidth||100,ea=lb._container.clientHeight/2,wa=lb.unproject([0,ea]);ea=lb.unproject([Z,ea]);wa=wa.distanceTo(ea);aa&&"imperial"===aa.unit?(aa=3.2808*wa,5280<aa?nb(W,Z,aa/5280,lb._getUIString("ScaleControl.Miles")):nb(W,Z,aa,lb._getUIString("ScaleControl.Feet"))):aa&&"nautical"===aa.unit?nb(W,Z,wa/1852,lb._getUIString("ScaleControl.NauticalMiles")):
1E3<=wa?nb(W,Z,wa/1E3,lb._getUIString("ScaleControl.Kilometers")):nb(W,Z,wa,lb._getUIString("ScaleControl.Meters"))}function nb(lb,W,aa,Z){var ea,wa=ea=Math.pow(10,(""+Math.floor(aa)).length-1);if(10<=(ea=aa/ea))ea=10;else if(5<=ea)ea=5;else if(3<=ea)ea=3;else if(2<=ea)ea=2;else if(1<=ea)ea=1;else{var Ga=Math.pow(10,Math.ceil(-Math.log(ea)/Math.LN10));ea=Math.round(ea*Ga)/Ga}wa*=ea;lb.style.width=wa/aa*W+"px";lb.innerHTML=wa+"\x26nbsp;"+Z}var cb=a.createCommonjsModule(function(lb){function W(ea){return!aa(ea)}
function aa(ea){return"undefined"==typeof window||"undefined"==typeof document?"not a browser":Array.prototype&&Array.prototype.every&&Array.prototype.filter&&Array.prototype.forEach&&Array.prototype.indexOf&&Array.prototype.lastIndexOf&&Array.prototype.map&&Array.prototype.some&&Array.prototype.reduce&&Array.prototype.reduceRight&&Array.isArray?Function.prototype&&Function.prototype.bind?Object.keys&&Object.create&&Object.getPrototypeOf&&Object.getOwnPropertyNames&&Object.isSealed&&Object.isFrozen&&
Object.isExtensible&&Object.getOwnPropertyDescriptor&&Object.defineProperty&&Object.defineProperties&&Object.seal&&Object.freeze&&Object.preventExtensions?"JSON"in window&&"parse"in JSON&&"stringify"in JSON?function(){if(!("Worker"in window&&"Blob"in window&&"URL"in window))return!1;var Ga=new Blob([""],{type:"text/javascript"});Ga=URL.createObjectURL(Ga);try{var Sa=new Worker(Ga);var ab=!0}catch(yb){ab=!1}return Sa&&Sa.terminate(),URL.revokeObjectURL(Ga),ab}()?"Uint8ClampedArray"in window?ArrayBuffer.isView?
function(){var Ga=document.createElement("canvas");Ga.width=Ga.height=1;var Sa=Ga.getContext("2d");return Sa?(Sa=Sa.getImageData(0,0,1,1))&&Sa.width===Ga.width:!1}()?(void 0===Z[wa=ea&&ea.failIfMajorPerformanceCaveat]&&(Z[wa]=function(Ga){var Sa=document.createElement("canvas"),ab=Object.create(W.webGLContextAttributes);Ga=(ab.failIfMajorPerformanceCaveat=Ga,Sa.probablySupportsContext?Sa.probablySupportsContext("webgl",ab)||Sa.probablySupportsContext("experimental-webgl",ab):Sa.supportsContext?Sa.supportsContext("webgl",
ab)||Sa.supportsContext("experimental-webgl",ab):Sa.getContext("webgl",ab)||Sa.getContext("experimental-webgl",ab));if(!Ga)return!1;Sa=Ga.createShader(Ga.VERTEX_SHADER);return!(!Sa||Ga.isContextLost())&&(Ga.shaderSource(Sa,"void main() {}"),Ga.compileShader(Sa),!0===Ga.getShaderParameter(Sa,Ga.COMPILE_STATUS))}(wa)),Z[wa]?void 0:"insufficient WebGL support"):"insufficient Canvas/getImageData support":"insufficient ArrayBuffer support":"insufficient Uint8ClampedArray support":"insufficient worker support":
"insufficient JSON support":"insufficient Object support":"insufficient Function support":"insufficent Array support";var wa}lb.exports?lb.exports=W:window&&(window.mapboxgl=window.mapboxgl||{},window.mapboxgl.supported=W,window.mapboxgl.notSupportedReason=aa);var Z={};W.webGLContextAttributes={antialias:!1,alpha:!0,stencil:!0,depth:!0}}),$a={create:function(lb,W,aa){lb=a.window.document.createElement(lb);return void 0!==W&&(lb.className=W),aa&&aa.appendChild(lb),lb},createNS:function(lb,W){return a.window.document.createElementNS(lb,
W)}},jb=a.window.document.documentElement.style,pb,xa=h(["userSelect","MozUserSelect","WebkitUserSelect","msUserSelect"]);$a.disableDrag=function(){jb&&xa&&(pb=jb[xa],jb[xa]="none")};$a.enableDrag=function(){jb&&xa&&(jb[xa]=pb)};var Ea=h(["transform","WebkitTransform"]);$a.setTransform=function(lb,W){lb.style[Ea]=W};var Ia=!1;try{var Oa=Object.defineProperty({},"passive",{get:function(){Ia=!0}});a.window.addEventListener("test",Oa,Oa);a.window.removeEventListener("test",Oa,Oa)}catch(lb){Ia=!1}$a.addEventListener=
function(lb,W,aa,Z){void 0===Z&&(Z={});lb.addEventListener(W,aa,"passive"in Z&&Ia?Z:Z.capture)};$a.removeEventListener=function(lb,W,aa,Z){void 0===Z&&(Z={});lb.removeEventListener(W,aa,"passive"in Z&&Ia?Z:Z.capture)};var bb=function(lb){lb.preventDefault();lb.stopPropagation();a.window.removeEventListener("click",bb,!0)};$a.suppressClick=function(){a.window.addEventListener("click",bb,!0);a.window.setTimeout(function(){a.window.removeEventListener("click",bb,!0)},0)};$a.mousePos=function(lb,W){var aa=
lb.getBoundingClientRect();return new a.Point(W.clientX-aa.left-lb.clientLeft,W.clientY-aa.top-lb.clientTop)};$a.touchPos=function(lb,W){for(var aa=lb.getBoundingClientRect(),Z=[],ea=0;ea<W.length;ea++)Z.push(new a.Point(W[ea].clientX-aa.left-lb.clientLeft,W[ea].clientY-aa.top-lb.clientTop));return Z};$a.mouseButton=function(lb){return void 0!==a.window.InstallTrigger&&2===lb.button&&lb.ctrlKey&&0<=a.window.navigator.platform.toUpperCase().indexOf("MAC")?0:lb.button};$a.remove=function(lb){lb.parentNode&&
lb.parentNode.removeChild(lb)};var Xa=function(lb){function W(){lb.call(this);this.images={};this.updatedImages={};this.callbackDispatchedThisFrame={};this.loaded=!1;this.requestors=[];this.patterns={};this.atlasImage=new a.RGBAImage({width:1,height:1});this.dirty=!0}return lb&&(W.__proto__=lb),(W.prototype=Object.create(lb&&lb.prototype)).constructor=W,W.prototype.isLoaded=function(){return this.loaded},W.prototype.setLoaded=function(aa){if(this.loaded!==aa&&(this.loaded=aa,aa)){aa=0;for(var Z=this.requestors;aa<
Z.length;aa+=1){var ea=Z[aa];this._notify(ea.ids,ea.callback)}this.requestors=[]}},W.prototype.getImage=function(aa){return this.images[aa]},W.prototype.addImage=function(aa,Z){this._validate(aa,Z)&&(this.images[aa]=Z)},W.prototype._validate=function(aa,Z){var ea=!0;return this._validateStretch(Z.stretchX,Z.data&&Z.data.width)||(this.fire(new a.ErrorEvent(Error('Image "'+aa+'" has invalid "stretchX" value'))),ea=!1),this._validateStretch(Z.stretchY,Z.data&&Z.data.height)||(this.fire(new a.ErrorEvent(Error('Image "'+
aa+'" has invalid "stretchY" value'))),ea=!1),this._validateContent(Z.content,Z)||(this.fire(new a.ErrorEvent(Error('Image "'+aa+'" has invalid "content" value'))),ea=!1),ea},W.prototype._validateStretch=function(aa,Z){if(!aa)return!0;for(var ea=0,wa=0;wa<aa.length;wa+=1){var Ga=aa[wa];if(Ga[0]<ea||Ga[1]<Ga[0]||Z<Ga[1])return!1;ea=Ga[1]}return!0},W.prototype._validateContent=function(aa,Z){return!(aa&&(4!==aa.length||0>aa[0]||Z.data.width<aa[0]||0>aa[1]||Z.data.height<aa[1]||0>aa[2]||Z.data.width<
aa[2]||0>aa[3]||Z.data.height<aa[3]||aa[2]<aa[0]||aa[3]<aa[1]))},W.prototype.updateImage=function(aa,Z){Z.version=this.images[aa].version+1;this.images[aa]=Z;this.updatedImages[aa]=!0},W.prototype.removeImage=function(aa){var Z=this.images[aa];delete this.images[aa];delete this.patterns[aa];Z.userImage&&Z.userImage.onRemove&&Z.userImage.onRemove()},W.prototype.listImages=function(){return Object.keys(this.images)},W.prototype.getImages=function(aa,Z){var ea=!0;if(!this.isLoaded())for(var wa=0;wa<
aa.length;wa+=1)this.images[aa[wa]]||(ea=!1);this.isLoaded()||ea?this._notify(aa,Z):this.requestors.push({ids:aa,callback:Z})},W.prototype._notify=function(aa,Z){for(var ea={},wa=0;wa<aa.length;wa+=1){var Ga=aa[wa];this.images[Ga]||this.fire(new a.Event("styleimagemissing",{id:Ga}));var Sa=this.images[Ga];Sa?ea[Ga]={data:Sa.data.clone(),pixelRatio:Sa.pixelRatio,sdf:Sa.sdf,version:Sa.version,stretchX:Sa.stretchX,stretchY:Sa.stretchY,content:Sa.content,hasRenderCallback:!(!Sa.userImage||!Sa.userImage.render)}:
a.warnOnce('Image "'+Ga+'" could not be loaded. Please make sure you have added the image with map.addImage() or a "sprite" property in your style. You can provide missing images by listening for the "styleimagemissing" map event.')}Z(null,ea)},W.prototype.getPixelSize=function(){var aa=this.atlasImage;return{width:aa.width,height:aa.height}},W.prototype.getPattern=function(aa){var Z=this.patterns[aa],ea=this.getImage(aa);if(!ea)return null;if(Z&&Z.position.version===ea.version)return Z.position;
Z?Z.position.version=ea.version:(Z={w:ea.data.width+2,h:ea.data.height+2,x:0,y:0},ea=new a.ImagePosition(Z,ea),this.patterns[aa]={bin:Z,position:ea});return this._updatePatternAtlas(),this.patterns[aa].position},W.prototype.bind=function(aa){var Z=aa.gl;this.atlasTexture?this.dirty&&(this.atlasTexture.update(this.atlasImage),this.dirty=!1):this.atlasTexture=new a.Texture(aa,this.atlasImage,Z.RGBA);this.atlasTexture.bind(Z.LINEAR,Z.CLAMP_TO_EDGE)},W.prototype._updatePatternAtlas=function(){var aa=
[];for(Z in this.patterns)aa.push(this.patterns[Z].bin);aa=a.potpack(aa);var Z=aa.w;var ea=aa.h;aa=this.atlasImage;for(var wa in aa.resize({width:Z||1,height:ea||1}),this.patterns){ea=this.patterns[wa].bin;Z=ea.x+1;ea=ea.y+1;var Ga=this.images[wa].data,Sa=Ga.width,ab=Ga.height;a.RGBAImage.copy(Ga,aa,{x:0,y:0},{x:Z,y:ea},{width:Sa,height:ab});a.RGBAImage.copy(Ga,aa,{x:0,y:ab-1},{x:Z,y:ea-1},{width:Sa,height:1});a.RGBAImage.copy(Ga,aa,{x:0,y:0},{x:Z,y:ea+ab},{width:Sa,height:1});a.RGBAImage.copy(Ga,
aa,{x:Sa-1,y:0},{x:Z-1,y:ea},{width:1,height:ab});a.RGBAImage.copy(Ga,aa,{x:0,y:0},{x:Z+Sa,y:ea},{width:1,height:ab})}this.dirty=!0},W.prototype.beginFrame=function(){this.callbackDispatchedThisFrame={}},W.prototype.dispatchRenderCallbacks=function(aa){for(var Z=0;Z<aa.length;Z+=1){var ea=aa[Z];if(!this.callbackDispatchedThisFrame[ea]){this.callbackDispatchedThisFrame[ea]=!0;var wa=this.images[ea],Ga=wa,Sa=Ga.userImage;Sa&&Sa.render&&Sa.render()&&(Ga.data.replace(new Uint8Array(Sa.data.buffer)),!0)&&
this.updateImage(ea,wa)}}},W}(a.Evented);g.prototype.draw=function(lb){this.ctx.clearRect(0,0,this.size,this.size);this.ctx.fillText(lb,this.buffer,this.middle);lb=this.ctx.getImageData(0,0,this.size,this.size);for(var W=new Uint8ClampedArray(this.size*this.size),aa=0;aa<this.size*this.size;aa++){var Z=lb.data[4*aa+3]/255;this.gridOuter[aa]=1===Z?0:0===Z?1E20:Math.pow(Math.max(0,.5-Z),2);this.gridInner[aa]=1===Z?1E20:0===Z?0:Math.pow(Math.max(0,Z-.5),2)}n(this.gridOuter,this.size,this.size,this.f,
this.d,this.v,this.z);n(this.gridInner,this.size,this.size,this.f,this.d,this.v,this.z);for(aa=0;aa<this.size*this.size;aa++)W[aa]=Math.max(0,Math.min(255,Math.round(255-255*((this.gridOuter[aa]-this.gridInner[aa])/this.radius+this.cutoff))));return W};g.default=g;var tb=function(lb,W){this.requestManager=lb;this.localIdeographFontFamily=W;this.entries={}};tb.prototype.setURL=function(lb){this.url=lb};tb.prototype.getGlyphs=function(lb,W){var aa=this,Z=[],ea;for(ea in lb)for(var wa=0,Ga=lb[ea];wa<
Ga.length;wa+=1)Z.push({stack:ea,id:Ga[wa]});a.asyncAll(Z,function(Sa,ab){var yb=Sa.stack,Hb=Sa.id,Ib=aa.entries[yb];Ib||(Ib=aa.entries[yb]={glyphs:{},requests:{},ranges:{}});Sa=Ib.glyphs[Hb];if(void 0===Sa){if(Sa=aa._tinySDF(Ib,yb,Hb))return Ib.glyphs[Hb]=Sa,void ab(null,{stack:yb,id:Hb,glyph:Sa});var nc=Math.floor(Hb/256);if(65535<256*nc)ab(Error("glyphs \x3e 65535 not supported"));else if(Ib.ranges[nc])ab(null,{stack:yb,id:Hb,glyph:Sa});else{var mc=Ib.requests[nc];mc||(mc=Ib.requests[nc]=[],tb.loadGlyphRange(yb,
nc,aa.url,aa.requestManager,function(cc,lc){if(lc){for(var kc in lc)aa._doesCharSupportLocalGlyph(+kc)||(Ib.glyphs[+kc]=lc[+kc]);Ib.ranges[nc]=!0}kc=0;for(var Gb=mc;kc<Gb.length;kc+=1)(0,Gb[kc])(cc,lc);delete Ib.requests[nc]}));mc.push(function(cc,lc){cc?ab(cc):lc&&ab(null,{stack:yb,id:Hb,glyph:lc[Hb]||null})})}}else ab(null,{stack:yb,id:Hb,glyph:Sa})},function(Sa,ab){if(Sa)W(Sa);else if(ab){Sa={};for(var yb=0;yb<ab.length;yb+=1){var Hb=ab[yb],Ib=Hb.stack,nc=Hb.id;Hb=Hb.glyph;(Sa[Ib]||(Sa[Ib]={}))[nc]=
Hb&&{id:Hb.id,bitmap:Hb.bitmap.clone(),metrics:Hb.metrics}}W(null,Sa)}})};tb.prototype._doesCharSupportLocalGlyph=function(lb){return!!this.localIdeographFontFamily&&(a.isChar["CJK Unified Ideographs"](lb)||a.isChar["Hangul Syllables"](lb)||a.isChar.Hiragana(lb)||a.isChar.Katakana(lb))};tb.prototype._tinySDF=function(lb,W,aa){var Z=this.localIdeographFontFamily;if(Z&&this._doesCharSupportLocalGlyph(aa)){var ea=lb.tinySDF;ea||(ea="400",/bold/i.test(W)?ea="900":/medium/i.test(W)?ea="500":/light/i.test(W)&&
(ea="200"),ea=lb.tinySDF=new tb.TinySDF(24,3,8,.25,Z,ea));return{id:aa,bitmap:new a.AlphaImage({width:30,height:30},ea.draw(String.fromCharCode(aa))),metrics:{width:24,height:24,left:0,top:-8,advance:24}}}};tb.loadGlyphRange=function(lb,W,aa,Z,ea){W*=256;var wa=W+255;lb=Z.transformRequest(Z.normalizeGlyphsURL(aa).replace("{fontstack}",lb).replace("{range}",W+"-"+wa),a.ResourceType.Glyphs);a.getArrayBuffer(lb,function(Ga,Sa){if(Ga)ea(Ga);else if(Sa){Ga={};var ab=0;for(Sa=a.parseGlyphPBF(Sa);ab<Sa.length;ab+=
1){var yb=Sa[ab];Ga[yb.id]=yb}ea(null,Ga)}})};tb.TinySDF=g;var Ka=function(){this.specification=a.styleSpec.light.position};Ka.prototype.possiblyEvaluate=function(lb,W){return a.sphericalToCartesian(lb.expression.evaluate(W))};Ka.prototype.interpolate=function(lb,W,aa){return{x:a.number(lb.x,W.x,aa),y:a.number(lb.y,W.y,aa),z:a.number(lb.z,W.z,aa)}};var Ta=new a.Properties({anchor:new a.DataConstantProperty(a.styleSpec.light.anchor),position:new Ka,color:new a.DataConstantProperty(a.styleSpec.light.color),
intensity:new a.DataConstantProperty(a.styleSpec.light.intensity)}),Na=function(lb){function W(aa){lb.call(this);this._transitionable=new a.Transitionable(Ta);this.setLight(aa);this._transitioning=this._transitionable.untransitioned()}return lb&&(W.__proto__=lb),(W.prototype=Object.create(lb&&lb.prototype)).constructor=W,W.prototype.getLight=function(){return this._transitionable.serialize()},W.prototype.setLight=function(aa,Z){if(void 0===Z&&(Z={}),!this._validate(a.validateLight,aa,Z))for(var ea in aa)Z=
aa[ea],a.endsWith(ea,"-transition")?this._transitionable.setTransition(ea.slice(0,-11),Z):this._transitionable.setValue(ea,Z)},W.prototype.updateTransitions=function(aa){this._transitioning=this._transitionable.transitioned(aa,this._transitioning)},W.prototype.hasTransition=function(){return this._transitioning.hasTransition()},W.prototype.recalculate=function(aa){this.properties=this._transitioning.possiblyEvaluate(aa)},W.prototype._validate=function(aa,Z,ea){return(!ea||!1!==ea.validate)&&a.emitValidationErrors(this,
aa.call(a.validateStyle,a.extend({value:Z,style:{glyphs:!0,sprite:!0},styleSpec:a.styleSpec})))},W}(a.Evented),ib=function(lb,W){this.width=lb;this.height=W;this.nextRow=0;this.data=new Uint8Array(this.width*this.height);this.dashEntry={}};ib.prototype.getDash=function(lb,W){var aa=lb.join(",")+String(W);return this.dashEntry[aa]||(this.dashEntry[aa]=this.addDash(lb,W)),this.dashEntry[aa]};ib.prototype.getDashRanges=function(lb,W,aa){W=[];var Z=!0;W.push({left:1==lb.length%2?-lb[lb.length-1]*aa:0,
right:lb[0]*aa,isDash:Z,zeroLength:0===lb[0]});for(var ea=lb[0],wa=1;wa<lb.length;wa++){var Ga=lb[wa];W.push({left:ea*aa,right:(ea+=Ga)*aa,isDash:Z=!Z,zeroLength:0===Ga})}return W};ib.prototype.addRoundDash=function(lb,W,aa){W/=2;for(var Z=-aa;Z<=aa;Z++)for(var ea=this.width*(this.nextRow+aa+Z),wa=0,Ga=lb[wa],Sa=0;Sa<this.width;Sa++){1<Sa/Ga.right&&(Ga=lb[++wa]);var ab=Math.min(Math.abs(Sa-Ga.left),Math.abs(Sa-Ga.right)),yb=Z/aa*(W+1);Ga.isDash?(yb=W-Math.abs(yb),ab=Math.sqrt(ab*ab+yb*yb)):ab=W-Math.sqrt(ab*
ab+yb*yb);this.data[ea+Sa]=Math.max(0,Math.min(255,ab+128))}};ib.prototype.addRegularDash=function(lb){for(var W=lb.length-1;0<=W;--W){var aa=lb[W],Z=lb[W+1];aa.zeroLength?lb.splice(W,1):Z&&Z.isDash===aa.isDash&&(Z.left=aa.left,lb.splice(W,1))}W=lb[0];aa=lb[lb.length-1];W.isDash===aa.isDash&&(W.left=aa.left-this.width,aa.right=W.right+this.width);W=this.width*this.nextRow;aa=0;Z=lb[aa];for(var ea=0;ea<this.width;ea++){1<ea/Z.right&&(Z=lb[++aa]);var wa=Math.min(Math.abs(ea-Z.left),Math.abs(ea-Z.right));
this.data[W+ea]=Math.max(0,Math.min(255,(Z.isDash?wa:-wa)+128))}};ib.prototype.addDash=function(lb,W){var aa=W?7:0,Z=2*aa+1;if(this.nextRow+Z>this.height)return a.warnOnce("LineAtlas out of space"),null;for(var ea=0,wa=0;wa<lb.length;wa++)ea+=lb[wa];0!==ea&&(wa=this.width/ea,lb=this.getDashRanges(lb,this.width,wa),W?this.addRoundDash(lb,wa,aa):this.addRegularDash(lb));W={y:(this.nextRow+aa+.5)/this.height,height:2*aa/this.height,width:ea};return this.nextRow+=Z,this.dirty=!0,W};ib.prototype.bind=
function(lb){lb=lb.gl;this.texture?(lb.bindTexture(lb.TEXTURE_2D,this.texture),this.dirty&&(this.dirty=!1,lb.texSubImage2D(lb.TEXTURE_2D,0,0,0,this.width,this.height,lb.ALPHA,lb.UNSIGNED_BYTE,this.data))):(this.texture=lb.createTexture(),lb.bindTexture(lb.TEXTURE_2D,this.texture),lb.texParameteri(lb.TEXTURE_2D,lb.TEXTURE_WRAP_S,lb.REPEAT),lb.texParameteri(lb.TEXTURE_2D,lb.TEXTURE_WRAP_T,lb.REPEAT),lb.texParameteri(lb.TEXTURE_2D,lb.TEXTURE_MIN_FILTER,lb.LINEAR),lb.texParameteri(lb.TEXTURE_2D,lb.TEXTURE_MAG_FILTER,
lb.LINEAR),lb.texImage2D(lb.TEXTURE_2D,0,lb.ALPHA,this.width,this.height,0,lb.ALPHA,lb.UNSIGNED_BYTE,this.data))};var qb=function Z(W,aa){this.workerPool=W;this.actors=[];this.currentActor=0;this.id=a.uniqueId();W=this.workerPool.acquire(this.id);for(var ea=0;ea<W.length;ea++){var wa=new Z.Actor(W[ea],aa,this.id);wa.name="Worker "+ea;this.actors.push(wa)}};qb.prototype.broadcast=function(W,aa,Z){a.asyncAll(this.actors,function(ea,wa){ea.send(W,aa,wa)},Z=Z||function(){})};qb.prototype.getActor=function(){return this.currentActor=
(this.currentActor+1)%this.actors.length,this.actors[this.currentActor]};qb.prototype.remove=function(){this.actors.forEach(function(W){W.remove()});this.actors=[];this.workerPool.release(this.id)};qb.Actor=a.Actor;var sb=function(W,aa,Z){this.bounds=a.LngLatBounds.convert(this.validateBounds(W));this.minzoom=aa||0;this.maxzoom=Z||24};sb.prototype.validateBounds=function(W){return Array.isArray(W)&&4===W.length?[Math.max(-180,W[0]),Math.max(-90,W[1]),Math.min(180,W[2]),Math.min(90,W[3])]:[-180,-90,
180,90]};sb.prototype.contains=function(W){var aa=Math.pow(2,W.z),Z=Math.floor(a.mercatorXfromLng(this.bounds.getWest())*aa),ea=Math.floor(a.mercatorYfromLat(this.bounds.getNorth())*aa),wa=Math.ceil(a.mercatorXfromLng(this.bounds.getEast())*aa);aa=Math.ceil(a.mercatorYfromLat(this.bounds.getSouth())*aa);return W.x>=Z&&W.x<wa&&W.y>=ea&&W.y<aa};var Ba=function(W){function aa(Z,ea,wa,Ga){if(W.call(this),this.id=Z,this.dispatcher=wa,this.type="vector",this.minzoom=0,this.maxzoom=22,this.scheme="xyz",
this.tileSize=512,this.reparseOverscaled=!0,this.isTileClipped=!0,this._loaded=!1,a.extend(this,a.pick(ea,["url","scheme","tileSize","promoteId"])),this._options=a.extend({type:"vector"},ea),this._collectResourceTiming=ea.collectResourceTiming,512!==this.tileSize)throw Error("vector tile sources must have a tileSize of 512");this.setEventedParent(Ga)}return W&&(aa.__proto__=W),(aa.prototype=Object.create(W&&W.prototype)).constructor=aa,aa.prototype.load=function(){var Z=this;this._loaded=!1;this.fire(new a.Event("dataloading",
{dataType:"source"}));this._tileJSONRequest=d(this._options,this.map._requestManager,function(ea,wa){Z._tileJSONRequest=null;Z._loaded=!0;ea?Z.fire(new a.ErrorEvent(ea)):wa&&(a.extend(Z,wa),wa.bounds&&(Z.tileBounds=new sb(wa.bounds,Z.minzoom,Z.maxzoom)),a.postTurnstileEvent(wa.tiles,Z.map._requestManager._customAccessToken),a.postMapLoadEvent(wa.tiles,Z.map._getMapId(),Z.map._requestManager._skuToken,Z.map._requestManager._customAccessToken),Z.fire(new a.Event("data",{dataType:"source",sourceDataType:"metadata"})),
Z.fire(new a.Event("data",{dataType:"source",sourceDataType:"content"})))})},aa.prototype.loaded=function(){return this._loaded},aa.prototype.hasTile=function(Z){return!this.tileBounds||this.tileBounds.contains(Z.canonical)},aa.prototype.onAdd=function(Z){this.map=Z;this.load()},aa.prototype.onRemove=function(){this._tileJSONRequest&&(this._tileJSONRequest.cancel(),this._tileJSONRequest=null)},aa.prototype.serialize=function(){return a.extend({},this._options)},aa.prototype.loadTile=function(Z,ea){function wa(Sa,
ab){return delete Z.request,Z.aborted?ea(null):Sa&&404!==Sa.status?ea(Sa):(ab&&ab.resourceTiming&&(Z.resourceTiming=ab.resourceTiming),this.map._refreshExpiredTiles&&ab&&Z.setExpiryData(ab),Z.loadVectorData(ab,this.map.painter),a.cacheEntryPossiblyAdded(this.dispatcher),ea(null),void(Z.reloadCallback&&(this.loadTile(Z,Z.reloadCallback),Z.reloadCallback=null)))}var Ga=this.map._requestManager.normalizeTileURL(Z.tileID.canonical.url(this.tiles,this.scheme));Ga={request:this.map._requestManager.transformRequest(Ga,
a.ResourceType.Tile),uid:Z.uid,tileID:Z.tileID,zoom:Z.tileID.overscaledZ,tileSize:this.tileSize*Z.tileID.overscaleFactor(),type:this.type,source:this.id,pixelRatio:a.browser.devicePixelRatio,showCollisionBoxes:this.map.showCollisionBoxes,promoteId:this.promoteId};Ga.request.collectResourceTiming=this._collectResourceTiming;Z.actor&&"expired"!==Z.state?"loading"===Z.state?Z.reloadCallback=ea:Z.request=Z.actor.send("reloadTile",Ga,wa.bind(this)):(Z.actor=this.dispatcher.getActor(),Z.request=Z.actor.send("loadTile",
Ga,wa.bind(this)))},aa.prototype.abortTile=function(Z){Z.request&&(Z.request.cancel(),delete Z.request);Z.actor&&Z.actor.send("abortTile",{uid:Z.uid,type:this.type,source:this.id},void 0)},aa.prototype.unloadTile=function(Z){Z.unloadVectorData();Z.actor&&Z.actor.send("removeTile",{uid:Z.uid,type:this.type,source:this.id},void 0)},aa.prototype.hasTransition=function(){return!1},aa}(a.Evented),Fa=function(W){function aa(Z,ea,wa,Ga){W.call(this);this.id=Z;this.dispatcher=wa;this.setEventedParent(Ga);
this.type="raster";this.minzoom=0;this.maxzoom=22;this.roundZoom=!0;this.scheme="xyz";this.tileSize=512;this._loaded=!1;this._options=a.extend({type:"raster"},ea);a.extend(this,a.pick(ea,["url","scheme","tileSize"]))}return W&&(aa.__proto__=W),(aa.prototype=Object.create(W&&W.prototype)).constructor=aa,aa.prototype.load=function(){var Z=this;this._loaded=!1;this.fire(new a.Event("dataloading",{dataType:"source"}));this._tileJSONRequest=d(this._options,this.map._requestManager,function(ea,wa){Z._tileJSONRequest=
null;Z._loaded=!0;ea?Z.fire(new a.ErrorEvent(ea)):wa&&(a.extend(Z,wa),wa.bounds&&(Z.tileBounds=new sb(wa.bounds,Z.minzoom,Z.maxzoom)),a.postTurnstileEvent(wa.tiles),a.postMapLoadEvent(wa.tiles,Z.map._getMapId(),Z.map._requestManager._skuToken),Z.fire(new a.Event("data",{dataType:"source",sourceDataType:"metadata"})),Z.fire(new a.Event("data",{dataType:"source",sourceDataType:"content"})))})},aa.prototype.loaded=function(){return this._loaded},aa.prototype.onAdd=function(Z){this.map=Z;this.load()},
aa.prototype.onRemove=function(){this._tileJSONRequest&&(this._tileJSONRequest.cancel(),this._tileJSONRequest=null)},aa.prototype.serialize=function(){return a.extend({},this._options)},aa.prototype.hasTile=function(Z){return!this.tileBounds||this.tileBounds.contains(Z.canonical)},aa.prototype.loadTile=function(Z,ea){var wa=this,Ga=this.map._requestManager.normalizeTileURL(Z.tileID.canonical.url(this.tiles,this.scheme),this.tileSize);Z.request=a.getImage(this.map._requestManager.transformRequest(Ga,
a.ResourceType.Tile),function(Sa,ab){if(delete Z.request,Z.aborted)Z.state="unloaded",ea(null);else if(Sa)Z.state="errored",ea(Sa);else if(ab){wa.map._refreshExpiredTiles&&Z.setExpiryData(ab);delete ab.cacheControl;delete ab.expires;Sa=wa.map.painter.context;var yb=Sa.gl;Z.texture=wa.map.painter.getTileTexture(ab.width);Z.texture?Z.texture.update(ab,{useMipmap:!0}):(Z.texture=new a.Texture(Sa,ab,yb.RGBA,{useMipmap:!0}),Z.texture.bind(yb.LINEAR,yb.CLAMP_TO_EDGE,yb.LINEAR_MIPMAP_NEAREST),Sa.extTextureFilterAnisotropic&&
yb.texParameterf(yb.TEXTURE_2D,Sa.extTextureFilterAnisotropic.TEXTURE_MAX_ANISOTROPY_EXT,Sa.extTextureFilterAnisotropicMax));Z.state="loaded";a.cacheEntryPossiblyAdded(wa.dispatcher);ea(null)}})},aa.prototype.abortTile=function(Z,ea){Z.request&&(Z.request.cancel(),delete Z.request);ea()},aa.prototype.unloadTile=function(Z,ea){Z.texture&&this.map.painter.saveTileTexture(Z.texture);ea()},aa.prototype.hasTransition=function(){return!1},aa}(a.Evented),La=function(W){function aa(Z,ea,wa,Ga){W.call(this,
Z,ea,wa,Ga);this.type="raster-dem";this.maxzoom=22;this._options=a.extend({type:"raster-dem"},ea);this.encoding=ea.encoding||"mapbox"}return W&&(aa.__proto__=W),(aa.prototype=Object.create(W&&W.prototype)).constructor=aa,aa.prototype.serialize=function(){return{type:"raster-dem",url:this.url,tileSize:this.tileSize,tiles:this.tiles,bounds:this.bounds,encoding:this.encoding}},aa.prototype.loadTile=function(Z,ea){function wa(Sa,ab){Sa&&(Z.state="errored",ea(Sa));ab&&(Z.dem=ab,Z.needsHillshadePrepare=
!0,Z.state="loaded",ea(null))}var Ga=this.map._requestManager.normalizeTileURL(Z.tileID.canonical.url(this.tiles,this.scheme),this.tileSize);Z.request=a.getImage(this.map._requestManager.transformRequest(Ga,a.ResourceType.Tile),function(Sa,ab){(delete Z.request,Z.aborted)?(Z.state="unloaded",ea(null)):Sa?(Z.state="errored",ea(Sa)):ab&&(this.map._refreshExpiredTiles&&Z.setExpiryData(ab),delete ab.cacheControl,delete ab.expires,Sa=a.window.ImageBitmap&&ab instanceof a.window.ImageBitmap&&a.offscreenCanvasSupported()?
ab:a.browser.getImageData(ab,1),Sa={uid:Z.uid,coord:Z.tileID,source:this.id,rawImageData:Sa,encoding:this.encoding},Z.actor&&"expired"!==Z.state||(Z.actor=this.dispatcher.getActor(),Z.actor.send("loadDEMTile",Sa,wa.bind(this))))}.bind(this));Z.neighboringTiles=this._getNeighboringTiles(Z.tileID)},aa.prototype._getNeighboringTiles=function(Z){var ea=Z.canonical,wa=Math.pow(2,ea.z),Ga=(ea.x-1+wa)%wa,Sa=0===ea.x?Z.wrap-1:Z.wrap,ab=(ea.x+1+wa)%wa,yb=ea.x+1===wa?Z.wrap+1:Z.wrap,Hb={};return Hb[(new a.OverscaledTileID(Z.overscaledZ,
Sa,ea.z,Ga,ea.y)).key]={backfilled:!1},Hb[(new a.OverscaledTileID(Z.overscaledZ,yb,ea.z,ab,ea.y)).key]={backfilled:!1},0<ea.y&&(Hb[(new a.OverscaledTileID(Z.overscaledZ,Sa,ea.z,Ga,ea.y-1)).key]={backfilled:!1},Hb[(new a.OverscaledTileID(Z.overscaledZ,Z.wrap,ea.z,ea.x,ea.y-1)).key]={backfilled:!1},Hb[(new a.OverscaledTileID(Z.overscaledZ,yb,ea.z,ab,ea.y-1)).key]={backfilled:!1}),ea.y+1<wa&&(Hb[(new a.OverscaledTileID(Z.overscaledZ,Sa,ea.z,Ga,ea.y+1)).key]={backfilled:!1},Hb[(new a.OverscaledTileID(Z.overscaledZ,
Z.wrap,ea.z,ea.x,ea.y+1)).key]={backfilled:!1},Hb[(new a.OverscaledTileID(Z.overscaledZ,yb,ea.z,ab,ea.y+1)).key]={backfilled:!1}),Hb},aa.prototype.unloadTile=function(Z){Z.demTexture&&this.map.painter.saveTileTexture(Z.demTexture);Z.fbo&&(Z.fbo.destroy(),delete Z.fbo);Z.dem&&delete Z.dem;delete Z.neighboringTiles;Z.state="unloaded";Z.actor&&Z.actor.send("removeDEMTile",{uid:Z.uid,source:this.id})},aa}(Fa),Va=function(W){function aa(Z,ea,wa,Ga){W.call(this);this.id=Z;this.type="geojson";this.minzoom=
0;this.maxzoom=18;this.tileSize=512;this.reparseOverscaled=this.isTileClipped=!0;this._loaded=this._removed=!1;this.actor=wa.getActor();this.setEventedParent(Ga);this._data=ea.data;this._options=a.extend({},ea);this._collectResourceTiming=ea.collectResourceTiming;this._resourceTiming=[];void 0!==ea.maxzoom&&(this.maxzoom=ea.maxzoom);ea.type&&(this.type=ea.type);ea.attribution&&(this.attribution=ea.attribution);this.promoteId=ea.promoteId;Z=a.EXTENT/this.tileSize;this.workerOptions=a.extend({source:this.id,
cluster:ea.cluster||!1,geojsonVtOptions:{buffer:(void 0!==ea.buffer?ea.buffer:128)*Z,tolerance:(void 0!==ea.tolerance?ea.tolerance:.375)*Z,extent:a.EXTENT,maxZoom:this.maxzoom,lineMetrics:ea.lineMetrics||!1,generateId:ea.generateId||!1},superclusterOptions:{maxZoom:void 0!==ea.clusterMaxZoom?Math.min(ea.clusterMaxZoom,this.maxzoom-1):this.maxzoom-1,extent:a.EXTENT,radius:(ea.clusterRadius||50)*Z,log:!1,generateId:ea.generateId||!1},clusterProperties:ea.clusterProperties},ea.workerOptions)}return W&&
(aa.__proto__=W),(aa.prototype=Object.create(W&&W.prototype)).constructor=aa,aa.prototype.load=function(){var Z=this;this.fire(new a.Event("dataloading",{dataType:"source"}));this._updateWorkerData(function(ea){ea?Z.fire(new a.ErrorEvent(ea)):(ea={dataType:"source",sourceDataType:"metadata"},Z._collectResourceTiming&&Z._resourceTiming&&0<Z._resourceTiming.length&&(ea.resourceTiming=Z._resourceTiming,Z._resourceTiming=[]),Z.fire(new a.Event("data",ea)))})},aa.prototype.onAdd=function(Z){this.map=Z;
this.load()},aa.prototype.setData=function(Z){var ea=this;return this._data=Z,this.fire(new a.Event("dataloading",{dataType:"source"})),this._updateWorkerData(function(wa){wa?ea.fire(new a.ErrorEvent(wa)):(wa={dataType:"source",sourceDataType:"content"},ea._collectResourceTiming&&ea._resourceTiming&&0<ea._resourceTiming.length&&(wa.resourceTiming=ea._resourceTiming,ea._resourceTiming=[]),ea.fire(new a.Event("data",wa)))}),this},aa.prototype.getClusterExpansionZoom=function(Z,ea){return this.actor.send("geojson.getClusterExpansionZoom",
{clusterId:Z,source:this.id},ea),this},aa.prototype.getClusterChildren=function(Z,ea){return this.actor.send("geojson.getClusterChildren",{clusterId:Z,source:this.id},ea),this},aa.prototype.getClusterLeaves=function(Z,ea,wa,Ga){return this.actor.send("geojson.getClusterLeaves",{source:this.id,clusterId:Z,limit:ea,offset:wa},Ga),this},aa.prototype._updateWorkerData=function(Z){var ea=this;this._loaded=!1;var wa=a.extend({},this.workerOptions),Ga=this._data;"string"==typeof Ga?(wa.request=this.map._requestManager.transformRequest(a.browser.resolveURL(Ga),
a.ResourceType.Source),wa.request.collectResourceTiming=this._collectResourceTiming):wa.data=JSON.stringify(Ga);this.actor.send(this.type+".loadData",wa,function(Sa,ab){ea._removed||ab&&ab.abandoned||(ea._loaded=!0,ab&&ab.resourceTiming&&ab.resourceTiming[ea.id]&&(ea._resourceTiming=ab.resourceTiming[ea.id].slice(0)),ea.actor.send(ea.type+".coalesce",{source:wa.source},null),Z(Sa))})},aa.prototype.loaded=function(){return this._loaded},aa.prototype.loadTile=function(Z,ea){var wa=this,Ga=Z.actor?"reloadTile":
"loadTile";Z.actor=this.actor;Z.request=this.actor.send(Ga,{type:this.type,uid:Z.uid,tileID:Z.tileID,zoom:Z.tileID.overscaledZ,maxZoom:this.maxzoom,tileSize:this.tileSize,source:this.id,pixelRatio:a.browser.devicePixelRatio,showCollisionBoxes:this.map.showCollisionBoxes,promoteId:this.promoteId},function(Sa,ab){return delete Z.request,Z.unloadVectorData(),Z.aborted?ea(null):Sa?ea(Sa):(Z.loadVectorData(ab,wa.map.painter,"reloadTile"===Ga),ea(null))})},aa.prototype.abortTile=function(Z){Z.request&&
(Z.request.cancel(),delete Z.request);Z.aborted=!0},aa.prototype.unloadTile=function(Z){Z.unloadVectorData();this.actor.send("removeTile",{uid:Z.uid,type:this.type,source:this.id})},aa.prototype.onRemove=function(){this._removed=!0;this.actor.send("removeSource",{type:this.type,source:this.id})},aa.prototype.serialize=function(){return a.extend({},this._options,{type:this.type,data:this._data})},aa.prototype.hasTransition=function(){return!1},aa}(a.Evented),Za=a.createLayout([{name:"a_pos",type:"Int16",
components:2},{name:"a_texture_pos",type:"Int16",components:2}]),mb=function(W){function aa(Z,ea,wa,Ga){W.call(this);this.id=Z;this.dispatcher=wa;this.coordinates=ea.coordinates;this.type="image";this.minzoom=0;this.maxzoom=22;this.tileSize=512;this.tiles={};this._loaded=!1;this.setEventedParent(Ga);this.options=ea}return W&&(aa.__proto__=W),(aa.prototype=Object.create(W&&W.prototype)).constructor=aa,aa.prototype.load=function(Z,ea){var wa=this;this._loaded=!1;this.fire(new a.Event("dataloading",
{dataType:"source"}));this.url=this.options.url;a.getImage(this.map._requestManager.transformRequest(this.url,a.ResourceType.Image),function(Ga,Sa){wa._loaded=!0;Ga?wa.fire(new a.ErrorEvent(Ga)):Sa&&(wa.image=Sa,Z&&(wa.coordinates=Z),ea&&ea(),wa._finishLoading())})},aa.prototype.loaded=function(){return this._loaded},aa.prototype.updateImage=function(Z){var ea=this;return this.image&&Z.url?(this.options.url=Z.url,this.load(Z.coordinates,function(){ea.texture=null}),this):this},aa.prototype._finishLoading=
function(){this.map&&(this.setCoordinates(this.coordinates),this.fire(new a.Event("data",{dataType:"source",sourceDataType:"metadata"})))},aa.prototype.onAdd=function(Z){this.map=Z;this.load()},aa.prototype.setCoordinates=function(Z){var ea=this;this.coordinates=Z;Z=Z.map(a.MercatorCoordinate.fromLngLat);this.tileID=function(wa){for(var Ga=1/0,Sa=1/0,ab=-1/0,yb=-1/0,Hb=0;Hb<wa.length;Hb+=1){var Ib=wa[Hb];Ga=Math.min(Ga,Ib.x);Sa=Math.min(Sa,Ib.y);ab=Math.max(ab,Ib.x);yb=Math.max(yb,Ib.y)}wa=Math.max(0,
Math.floor(-Math.log(Math.max(ab-Ga,yb-Sa))/Math.LN2));Hb=Math.pow(2,wa);return new a.CanonicalTileID(wa,Math.floor((Ga+ab)/2*Hb),Math.floor((Sa+yb)/2*Hb))}(Z);this.minzoom=this.maxzoom=this.tileID.z;Z=Z.map(function(wa){return ea.tileID.getTilePoint(wa)._round()});return this._boundsArray=new a.StructArrayLayout4i8,this._boundsArray.emplaceBack(Z[0].x,Z[0].y,0,0),this._boundsArray.emplaceBack(Z[1].x,Z[1].y,a.EXTENT,0),this._boundsArray.emplaceBack(Z[3].x,Z[3].y,0,a.EXTENT),this._boundsArray.emplaceBack(Z[2].x,
Z[2].y,a.EXTENT,a.EXTENT),this.boundsBuffer&&(this.boundsBuffer.destroy(),delete this.boundsBuffer),this.fire(new a.Event("data",{dataType:"source",sourceDataType:"content"})),this},aa.prototype.prepare=function(){if(0!==Object.keys(this.tiles).length&&this.image){var Z=this.map.painter.context,ea=Z.gl,wa;for(wa in this.boundsBuffer||(this.boundsBuffer=Z.createVertexBuffer(this._boundsArray,Za.members)),this.boundsSegments||(this.boundsSegments=a.SegmentVector.simpleSegment(0,0,4,2)),this.texture||
(this.texture=new a.Texture(Z,this.image,ea.RGBA),this.texture.bind(ea.LINEAR,ea.CLAMP_TO_EDGE)),this.tiles)Z=this.tiles[wa],"loaded"!==Z.state&&(Z.state="loaded",Z.texture=this.texture)}},aa.prototype.loadTile=function(Z,ea){this.tileID&&this.tileID.equals(Z.tileID.canonical)?(this.tiles[String(Z.tileID.wrap)]=Z,Z.buckets={},ea(null)):(Z.state="errored",ea(null))},aa.prototype.serialize=function(){return{type:"image",url:this.options.url,coordinates:this.coordinates}},aa.prototype.hasTransition=
function(){return!1},aa}(a.Evented),ub=function(W){function aa(Z,ea,wa,Ga){W.call(this,Z,ea,wa,Ga);this.roundZoom=!0;this.type="video";this.options=ea}return W&&(aa.__proto__=W),(aa.prototype=Object.create(W&&W.prototype)).constructor=aa,aa.prototype.load=function(){var Z=this;this._loaded=!1;var ea=this.options;this.urls=[];var wa=0;for(ea=ea.urls;wa<ea.length;wa+=1)this.urls.push(this.map._requestManager.transformRequest(ea[wa],a.ResourceType.Source).url);a.getVideo(this.urls,function(Ga,Sa){Z._loaded=
!0;Ga?Z.fire(new a.ErrorEvent(Ga)):Sa&&(Z.video=Sa,Z.video.loop=!0,Z.video.addEventListener("playing",function(){Z.map.triggerRepaint()}),Z.map&&Z.video.play(),Z._finishLoading())})},aa.prototype.pause=function(){this.video&&this.video.pause()},aa.prototype.play=function(){this.video&&this.video.play()},aa.prototype.seek=function(Z){if(this.video){var ea=this.video.seekable;Z<ea.start(0)||Z>ea.end(0)?this.fire(new a.ErrorEvent(new a.ValidationError("sources."+this.id,null,"Playback for this video can be set only between the "+
ea.start(0)+" and "+ea.end(0)+"-second mark."))):this.video.currentTime=Z}},aa.prototype.getVideo=function(){return this.video},aa.prototype.onAdd=function(Z){this.map||(this.map=Z,this.load(),this.video&&(this.video.play(),this.setCoordinates(this.coordinates)))},aa.prototype.prepare=function(){if(!(0===Object.keys(this.tiles).length||2>this.video.readyState)){var Z=this.map.painter.context,ea=Z.gl,wa;for(wa in this.boundsBuffer||(this.boundsBuffer=Z.createVertexBuffer(this._boundsArray,Za.members)),
this.boundsSegments||(this.boundsSegments=a.SegmentVector.simpleSegment(0,0,4,2)),this.texture?this.video.paused||(this.texture.bind(ea.LINEAR,ea.CLAMP_TO_EDGE),ea.texSubImage2D(ea.TEXTURE_2D,0,0,0,ea.RGBA,ea.UNSIGNED_BYTE,this.video)):(this.texture=new a.Texture(Z,this.video,ea.RGBA),this.texture.bind(ea.LINEAR,ea.CLAMP_TO_EDGE)),this.tiles)Z=this.tiles[wa],"loaded"!==Z.state&&(Z.state="loaded",Z.texture=this.texture)}},aa.prototype.serialize=function(){return{type:"video",urls:this.urls,coordinates:this.coordinates}},
aa.prototype.hasTransition=function(){return this.video&&!this.video.paused},aa}(mb),Pb=function(W){function aa(Z,ea,wa,Ga){W.call(this,Z,ea,wa,Ga);ea.coordinates?Array.isArray(ea.coordinates)&&4===ea.coordinates.length&&!ea.coordinates.some(function(Sa){return!Array.isArray(Sa)||2!==Sa.length||Sa.some(function(ab){return"number"!=typeof ab})})||this.fire(new a.ErrorEvent(new a.ValidationError("sources."+Z,null,'"coordinates" property must be an array of 4 longitude/latitude array pairs'))):this.fire(new a.ErrorEvent(new a.ValidationError("sources."+
Z,null,'missing required property "coordinates"')));ea.animate&&"boolean"!=typeof ea.animate&&this.fire(new a.ErrorEvent(new a.ValidationError("sources."+Z,null,'optional "animate" property must be a boolean value')));ea.canvas?"string"==typeof ea.canvas||ea.canvas instanceof a.window.HTMLCanvasElement||this.fire(new a.ErrorEvent(new a.ValidationError("sources."+Z,null,'"canvas" must be either a string representing the ID of the canvas element from which to read, or an HTMLCanvasElement instance'))):
this.fire(new a.ErrorEvent(new a.ValidationError("sources."+Z,null,'missing required property "canvas"')));this.options=ea;this.animate=void 0===ea.animate||ea.animate}return W&&(aa.__proto__=W),(aa.prototype=Object.create(W&&W.prototype)).constructor=aa,aa.prototype.load=function(){this._loaded=!0;this.canvas||(this.canvas=this.options.canvas instanceof a.window.HTMLCanvasElement?this.options.canvas:a.window.document.getElementById(this.options.canvas));this.width=this.canvas.width;this.height=this.canvas.height;
this._hasInvalidDimensions()?this.fire(new a.ErrorEvent(Error("Canvas dimensions cannot be less than or equal to zero."))):(this.play=function(){this._playing=!0;this.map.triggerRepaint()},this.pause=function(){this._playing&&(this.prepare(),this._playing=!1)},this._finishLoading())},aa.prototype.getCanvas=function(){return this.canvas},aa.prototype.onAdd=function(Z){this.map=Z;this.load();this.canvas&&this.animate&&this.play()},aa.prototype.onRemove=function(){this.pause()},aa.prototype.prepare=
function(){var Z=!1;if(this.canvas.width!==this.width&&(this.width=this.canvas.width,Z=!0),this.canvas.height!==this.height&&(this.height=this.canvas.height,Z=!0),!this._hasInvalidDimensions()&&0!==Object.keys(this.tiles).length){var ea=this.map.painter.context,wa=ea.gl,Ga;for(Ga in this.boundsBuffer||(this.boundsBuffer=ea.createVertexBuffer(this._boundsArray,Za.members)),this.boundsSegments||(this.boundsSegments=a.SegmentVector.simpleSegment(0,0,4,2)),this.texture?(Z||this._playing)&&this.texture.update(this.canvas,
{premultiply:!0}):this.texture=new a.Texture(ea,this.canvas,wa.RGBA,{premultiply:!0}),this.tiles)Z=this.tiles[Ga],"loaded"!==Z.state&&(Z.state="loaded",Z.texture=this.texture)}},aa.prototype.serialize=function(){return{type:"canvas",coordinates:this.coordinates}},aa.prototype.hasTransition=function(){return this._playing},aa.prototype._hasInvalidDimensions=function(){for(var Z=0,ea=[this.canvas.width,this.canvas.height];Z<ea.length;Z+=1){var wa=ea[Z];if(isNaN(wa)||0>=wa)return!0}return!1},aa}(mb),
Kb={vector:Ba,raster:Fa,"raster-dem":La,geojson:Va,video:ub,image:mb,canvas:Pb},Ob=function(W,aa){this.max=W;this.onRemove=aa;this.reset()};Ob.prototype.reset=function(){for(var W in this.data)for(var aa=0,Z=this.data[W];aa<Z.length;aa+=1){var ea=Z[aa];ea.timeout&&clearTimeout(ea.timeout);this.onRemove(ea.value)}return this.data={},this.order=[],this};Ob.prototype.add=function(W,aa,Z){var ea=this,wa=W.wrapped().key;void 0===this.data[wa]&&(this.data[wa]=[]);var Ga={value:aa,timeout:void 0};(void 0!==
Z&&(Ga.timeout=setTimeout(function(){ea.remove(W,Ga)},Z)),this.data[wa].push(Ga),this.order.push(wa),this.order.length>this.max)&&(aa=this._getAndRemoveByKey(this.order[0]))&&this.onRemove(aa);return this};Ob.prototype.has=function(W){return W.wrapped().key in this.data};Ob.prototype.getAndRemove=function(W){return this.has(W)?this._getAndRemoveByKey(W.wrapped().key):null};Ob.prototype._getAndRemoveByKey=function(W){var aa=this.data[W].shift();return aa.timeout&&clearTimeout(aa.timeout),0===this.data[W].length&&
delete this.data[W],this.order.splice(this.order.indexOf(W),1),aa.value};Ob.prototype.getByKey=function(W){return(W=this.data[W])?W[0].value:null};Ob.prototype.get=function(W){return this.has(W)?this.data[W.wrapped().key][0].value:null};Ob.prototype.remove=function(W,aa){if(!this.has(W))return this;W=W.wrapped().key;aa=void 0===aa?0:this.data[W].indexOf(aa);var Z=this.data[W][aa];return this.data[W].splice(aa,1),Z.timeout&&clearTimeout(Z.timeout),0===this.data[W].length&&delete this.data[W],this.onRemove(Z.value),
this.order.splice(this.order.indexOf(W),1),this};Ob.prototype.setMaxSize=function(W){for(this.max=W;this.order.length>this.max;)(W=this._getAndRemoveByKey(this.order[0]))&&this.onRemove(W);return this};Ob.prototype.filter=function(W){var aa=[];for(Ga in this.data)for(var Z=0,ea=this.data[Ga];Z<ea.length;Z+=1){var wa=ea[Z];W(wa.value)||aa.push(wa)}for(W=0;W<aa.length;W+=1){var Ga=aa[W];this.remove(Ga.value.tileID,Ga)}};var Wb=function(W,aa,Z){this.context=W;var ea=W.gl;this.buffer=ea.createBuffer();
this.dynamicDraw=!!Z;this.context.unbindVAO();W.bindElementBuffer.set(this.buffer);ea.bufferData(ea.ELEMENT_ARRAY_BUFFER,aa.arrayBuffer,this.dynamicDraw?ea.DYNAMIC_DRAW:ea.STATIC_DRAW);this.dynamicDraw||delete aa.arrayBuffer};Wb.prototype.bind=function(){this.context.bindElementBuffer.set(this.buffer)};Wb.prototype.updateData=function(W){var aa=this.context.gl;this.context.unbindVAO();this.bind();aa.bufferSubData(aa.ELEMENT_ARRAY_BUFFER,0,W.arrayBuffer)};Wb.prototype.destroy=function(){this.buffer&&
(this.context.gl.deleteBuffer(this.buffer),delete this.buffer)};var Bc={Int8:"BYTE",Uint8:"UNSIGNED_BYTE",Int16:"SHORT",Uint16:"UNSIGNED_SHORT",Int32:"INT",Uint32:"UNSIGNED_INT",Float32:"FLOAT"},Kc=function(W,aa,Z,ea){this.length=aa.length;this.attributes=Z;this.itemSize=aa.bytesPerElement;this.dynamicDraw=ea;this.context=W;Z=W.gl;this.buffer=Z.createBuffer();W.bindVertexBuffer.set(this.buffer);Z.bufferData(Z.ARRAY_BUFFER,aa.arrayBuffer,this.dynamicDraw?Z.DYNAMIC_DRAW:Z.STATIC_DRAW);this.dynamicDraw||
delete aa.arrayBuffer};Kc.prototype.bind=function(){this.context.bindVertexBuffer.set(this.buffer)};Kc.prototype.updateData=function(W){var aa=this.context.gl;this.bind();aa.bufferSubData(aa.ARRAY_BUFFER,0,W.arrayBuffer)};Kc.prototype.enableAttributes=function(W,aa){for(var Z=0;Z<this.attributes.length;Z++){var ea=aa.attributes[this.attributes[Z].name];void 0!==ea&&W.enableVertexAttribArray(ea)}};Kc.prototype.setVertexAttribPointers=function(W,aa,Z){for(var ea=0;ea<this.attributes.length;ea++){var wa=
this.attributes[ea],Ga=aa.attributes[wa.name];void 0!==Ga&&W.vertexAttribPointer(Ga,wa.components,W[Bc[wa.type]],!1,this.itemSize,wa.offset+this.itemSize*(Z||0))}};Kc.prototype.destroy=function(){this.buffer&&(this.context.gl.deleteBuffer(this.buffer),delete this.buffer)};var Nc=function(W){this.gl=W.gl;this.current=this.default=this.getDefault();this.dirty=!1};Nc.prototype.get=function(){return this.current};Nc.prototype.set=function(W){};Nc.prototype.getDefault=function(){return this.default};Nc.prototype.setDefault=
function(){this.set(this.default)};var bd=function(W){function aa(){W.apply(this,arguments)}return W&&(aa.__proto__=W),(aa.prototype=Object.create(W&&W.prototype)).constructor=aa,aa.prototype.getDefault=function(){return a.Color.transparent},aa.prototype.set=function(Z){var ea=this.current;(Z.r!==ea.r||Z.g!==ea.g||Z.b!==ea.b||Z.a!==ea.a||this.dirty)&&(this.gl.clearColor(Z.r,Z.g,Z.b,Z.a),this.current=Z,this.dirty=!1)},aa}(Nc),kb=function(W){function aa(){W.apply(this,arguments)}return W&&(aa.__proto__=
W),(aa.prototype=Object.create(W&&W.prototype)).constructor=aa,aa.prototype.getDefault=function(){return 1},aa.prototype.set=function(Z){(Z!==this.current||this.dirty)&&(this.gl.clearDepth(Z),this.current=Z,this.dirty=!1)},aa}(Nc),$b=function(W){function aa(){W.apply(this,arguments)}return W&&(aa.__proto__=W),(aa.prototype=Object.create(W&&W.prototype)).constructor=aa,aa.prototype.getDefault=function(){return 0},aa.prototype.set=function(Z){(Z!==this.current||this.dirty)&&(this.gl.clearStencil(Z),
this.current=Z,this.dirty=!1)},aa}(Nc),gc=function(W){function aa(){W.apply(this,arguments)}return W&&(aa.__proto__=W),(aa.prototype=Object.create(W&&W.prototype)).constructor=aa,aa.prototype.getDefault=function(){return[!0,!0,!0,!0]},aa.prototype.set=function(Z){var ea=this.current;(Z[0]!==ea[0]||Z[1]!==ea[1]||Z[2]!==ea[2]||Z[3]!==ea[3]||this.dirty)&&(this.gl.colorMask(Z[0],Z[1],Z[2],Z[3]),this.current=Z,this.dirty=!1)},aa}(Nc),rc=function(W){function aa(){W.apply(this,arguments)}return W&&(aa.__proto__=
W),(aa.prototype=Object.create(W&&W.prototype)).constructor=aa,aa.prototype.getDefault=function(){return!0},aa.prototype.set=function(Z){(Z!==this.current||this.dirty)&&(this.gl.depthMask(Z),this.current=Z,this.dirty=!1)},aa}(Nc),xc=function(W){function aa(){W.apply(this,arguments)}return W&&(aa.__proto__=W),(aa.prototype=Object.create(W&&W.prototype)).constructor=aa,aa.prototype.getDefault=function(){return 255},aa.prototype.set=function(Z){(Z!==this.current||this.dirty)&&(this.gl.stencilMask(Z),
this.current=Z,this.dirty=!1)},aa}(Nc),Rc=function(W){function aa(){W.apply(this,arguments)}return W&&(aa.__proto__=W),(aa.prototype=Object.create(W&&W.prototype)).constructor=aa,aa.prototype.getDefault=function(){return{func:this.gl.ALWAYS,ref:0,mask:255}},aa.prototype.set=function(Z){var ea=this.current;(Z.func!==ea.func||Z.ref!==ea.ref||Z.mask!==ea.mask||this.dirty)&&(this.gl.stencilFunc(Z.func,Z.ref,Z.mask),this.current=Z,this.dirty=!1)},aa}(Nc),gb=function(W){function aa(){W.apply(this,arguments)}
return W&&(aa.__proto__=W),(aa.prototype=Object.create(W&&W.prototype)).constructor=aa,aa.prototype.getDefault=function(){var Z=this.gl;return[Z.KEEP,Z.KEEP,Z.KEEP]},aa.prototype.set=function(Z){var ea=this.current;(Z[0]!==ea[0]||Z[1]!==ea[1]||Z[2]!==ea[2]||this.dirty)&&(this.gl.stencilOp(Z[0],Z[1],Z[2]),this.current=Z,this.dirty=!1)},aa}(Nc),vb=function(W){function aa(){W.apply(this,arguments)}return W&&(aa.__proto__=W),(aa.prototype=Object.create(W&&W.prototype)).constructor=aa,aa.prototype.getDefault=
function(){return!1},aa.prototype.set=function(Z){if(Z!==this.current||this.dirty){var ea=this.gl;Z?ea.enable(ea.STENCIL_TEST):ea.disable(ea.STENCIL_TEST);this.current=Z;this.dirty=!1}},aa}(Nc),Sb=function(W){function aa(){W.apply(this,arguments)}return W&&(aa.__proto__=W),(aa.prototype=Object.create(W&&W.prototype)).constructor=aa,aa.prototype.getDefault=function(){return[0,1]},aa.prototype.set=function(Z){var ea=this.current;(Z[0]!==ea[0]||Z[1]!==ea[1]||this.dirty)&&(this.gl.depthRange(Z[0],Z[1]),
this.current=Z,this.dirty=!1)},aa}(Nc),ic=function(W){function aa(){W.apply(this,arguments)}return W&&(aa.__proto__=W),(aa.prototype=Object.create(W&&W.prototype)).constructor=aa,aa.prototype.getDefault=function(){return!1},aa.prototype.set=function(Z){if(Z!==this.current||this.dirty){var ea=this.gl;Z?ea.enable(ea.DEPTH_TEST):ea.disable(ea.DEPTH_TEST);this.current=Z;this.dirty=!1}},aa}(Nc),ac=function(W){function aa(){W.apply(this,arguments)}return W&&(aa.__proto__=W),(aa.prototype=Object.create(W&&
W.prototype)).constructor=aa,aa.prototype.getDefault=function(){return this.gl.LESS},aa.prototype.set=function(Z){(Z!==this.current||this.dirty)&&(this.gl.depthFunc(Z),this.current=Z,this.dirty=!1)},aa}(Nc),bc=function(W){function aa(){W.apply(this,arguments)}return W&&(aa.__proto__=W),(aa.prototype=Object.create(W&&W.prototype)).constructor=aa,aa.prototype.getDefault=function(){return!1},aa.prototype.set=function(Z){if(Z!==this.current||this.dirty){var ea=this.gl;Z?ea.enable(ea.BLEND):ea.disable(ea.BLEND);
this.current=Z;this.dirty=!1}},aa}(Nc),Ub=function(W){function aa(){W.apply(this,arguments)}return W&&(aa.__proto__=W),(aa.prototype=Object.create(W&&W.prototype)).constructor=aa,aa.prototype.getDefault=function(){var Z=this.gl;return[Z.ONE,Z.ZERO]},aa.prototype.set=function(Z){var ea=this.current;(Z[0]!==ea[0]||Z[1]!==ea[1]||this.dirty)&&(this.gl.blendFunc(Z[0],Z[1]),this.current=Z,this.dirty=!1)},aa}(Nc),wb=function(W){function aa(){W.apply(this,arguments)}return W&&(aa.__proto__=W),(aa.prototype=
Object.create(W&&W.prototype)).constructor=aa,aa.prototype.getDefault=function(){return a.Color.transparent},aa.prototype.set=function(Z){var ea=this.current;(Z.r!==ea.r||Z.g!==ea.g||Z.b!==ea.b||Z.a!==ea.a||this.dirty)&&(this.gl.blendColor(Z.r,Z.g,Z.b,Z.a),this.current=Z,this.dirty=!1)},aa}(Nc),Lb=function(W){function aa(){W.apply(this,arguments)}return W&&(aa.__proto__=W),(aa.prototype=Object.create(W&&W.prototype)).constructor=aa,aa.prototype.getDefault=function(){return this.gl.FUNC_ADD},aa.prototype.set=
function(Z){(Z!==this.current||this.dirty)&&(this.gl.blendEquation(Z),this.current=Z,this.dirty=!1)},aa}(Nc),Bb=function(W){function aa(){W.apply(this,arguments)}return W&&(aa.__proto__=W),(aa.prototype=Object.create(W&&W.prototype)).constructor=aa,aa.prototype.getDefault=function(){return!1},aa.prototype.set=function(Z){if(Z!==this.current||this.dirty){var ea=this.gl;Z?ea.enable(ea.CULL_FACE):ea.disable(ea.CULL_FACE);this.current=Z;this.dirty=!1}},aa}(Nc),Mb=function(W){function aa(){W.apply(this,
arguments)}return W&&(aa.__proto__=W),(aa.prototype=Object.create(W&&W.prototype)).constructor=aa,aa.prototype.getDefault=function(){return this.gl.BACK},aa.prototype.set=function(Z){(Z!==this.current||this.dirty)&&(this.gl.cullFace(Z),this.current=Z,this.dirty=!1)},aa}(Nc),Yb=function(W){function aa(){W.apply(this,arguments)}return W&&(aa.__proto__=W),(aa.prototype=Object.create(W&&W.prototype)).constructor=aa,aa.prototype.getDefault=function(){return this.gl.CCW},aa.prototype.set=function(Z){(Z!==
this.current||this.dirty)&&(this.gl.frontFace(Z),this.current=Z,this.dirty=!1)},aa}(Nc),qc=function(W){function aa(){W.apply(this,arguments)}return W&&(aa.__proto__=W),(aa.prototype=Object.create(W&&W.prototype)).constructor=aa,aa.prototype.getDefault=function(){return null},aa.prototype.set=function(Z){(Z!==this.current||this.dirty)&&(this.gl.useProgram(Z),this.current=Z,this.dirty=!1)},aa}(Nc),Tc=function(W){function aa(){W.apply(this,arguments)}return W&&(aa.__proto__=W),(aa.prototype=Object.create(W&&
W.prototype)).constructor=aa,aa.prototype.getDefault=function(){return this.gl.TEXTURE0},aa.prototype.set=function(Z){(Z!==this.current||this.dirty)&&(this.gl.activeTexture(Z),this.current=Z,this.dirty=!1)},aa}(Nc),Yc=function(W){function aa(){W.apply(this,arguments)}return W&&(aa.__proto__=W),(aa.prototype=Object.create(W&&W.prototype)).constructor=aa,aa.prototype.getDefault=function(){var Z=this.gl;return[0,0,Z.drawingBufferWidth,Z.drawingBufferHeight]},aa.prototype.set=function(Z){var ea=this.current;
(Z[0]!==ea[0]||Z[1]!==ea[1]||Z[2]!==ea[2]||Z[3]!==ea[3]||this.dirty)&&(this.gl.viewport(Z[0],Z[1],Z[2],Z[3]),this.current=Z,this.dirty=!1)},aa}(Nc),ad=function(W){function aa(){W.apply(this,arguments)}return W&&(aa.__proto__=W),(aa.prototype=Object.create(W&&W.prototype)).constructor=aa,aa.prototype.getDefault=function(){return null},aa.prototype.set=function(Z){if(Z!==this.current||this.dirty){var ea=this.gl;ea.bindFramebuffer(ea.FRAMEBUFFER,Z);this.current=Z;this.dirty=!1}},aa}(Nc),ec=function(W){function aa(){W.apply(this,
arguments)}return W&&(aa.__proto__=W),(aa.prototype=Object.create(W&&W.prototype)).constructor=aa,aa.prototype.getDefault=function(){return null},aa.prototype.set=function(Z){if(Z!==this.current||this.dirty){var ea=this.gl;ea.bindRenderbuffer(ea.RENDERBUFFER,Z);this.current=Z;this.dirty=!1}},aa}(Nc),Fc=function(W){function aa(){W.apply(this,arguments)}return W&&(aa.__proto__=W),(aa.prototype=Object.create(W&&W.prototype)).constructor=aa,aa.prototype.getDefault=function(){return null},aa.prototype.set=
function(Z){if(Z!==this.current||this.dirty){var ea=this.gl;ea.bindTexture(ea.TEXTURE_2D,Z);this.current=Z;this.dirty=!1}},aa}(Nc),dd=function(W){function aa(){W.apply(this,arguments)}return W&&(aa.__proto__=W),(aa.prototype=Object.create(W&&W.prototype)).constructor=aa,aa.prototype.getDefault=function(){return null},aa.prototype.set=function(Z){if(Z!==this.current||this.dirty){var ea=this.gl;ea.bindBuffer(ea.ARRAY_BUFFER,Z);this.current=Z;this.dirty=!1}},aa}(Nc),Ac=function(W){function aa(){W.apply(this,
arguments)}return W&&(aa.__proto__=W),(aa.prototype=Object.create(W&&W.prototype)).constructor=aa,aa.prototype.getDefault=function(){return null},aa.prototype.set=function(Z){var ea=this.gl;ea.bindBuffer(ea.ELEMENT_ARRAY_BUFFER,Z);this.current=Z;this.dirty=!1},aa}(Nc),Jc=function(W){function aa(Z){W.call(this,Z);this.vao=Z.extVertexArrayObject}return W&&(aa.__proto__=W),(aa.prototype=Object.create(W&&W.prototype)).constructor=aa,aa.prototype.getDefault=function(){return null},aa.prototype.set=function(Z){this.vao&&
(Z!==this.current||this.dirty)&&(this.vao.bindVertexArrayOES(Z),this.current=Z,this.dirty=!1)},aa}(Nc),gd=function(W){function aa(){W.apply(this,arguments)}return W&&(aa.__proto__=W),(aa.prototype=Object.create(W&&W.prototype)).constructor=aa,aa.prototype.getDefault=function(){return 4},aa.prototype.set=function(Z){if(Z!==this.current||this.dirty){var ea=this.gl;ea.pixelStorei(ea.UNPACK_ALIGNMENT,Z);this.current=Z;this.dirty=!1}},aa}(Nc),Vc=function(W){function aa(){W.apply(this,arguments)}return W&&
(aa.__proto__=W),(aa.prototype=Object.create(W&&W.prototype)).constructor=aa,aa.prototype.getDefault=function(){return!1},aa.prototype.set=function(Z){if(Z!==this.current||this.dirty){var ea=this.gl;ea.pixelStorei(ea.UNPACK_PREMULTIPLY_ALPHA_WEBGL,Z);this.current=Z;this.dirty=!1}},aa}(Nc),Gc=function(W){function aa(){W.apply(this,arguments)}return W&&(aa.__proto__=W),(aa.prototype=Object.create(W&&W.prototype)).constructor=aa,aa.prototype.getDefault=function(){return!1},aa.prototype.set=function(Z){if(Z!==
this.current||this.dirty){var ea=this.gl;ea.pixelStorei(ea.UNPACK_FLIP_Y_WEBGL,Z);this.current=Z;this.dirty=!1}},aa}(Nc),pd=function(W){function aa(Z,ea){W.call(this,Z);this.context=Z;this.parent=ea}return W&&(aa.__proto__=W),(aa.prototype=Object.create(W&&W.prototype)).constructor=aa,aa.prototype.getDefault=function(){return null},aa}(Nc),md=function(W){function aa(){W.apply(this,arguments)}return W&&(aa.__proto__=W),(aa.prototype=Object.create(W&&W.prototype)).constructor=aa,aa.prototype.setDirty=
function(){this.dirty=!0},aa.prototype.set=function(Z){if(Z!==this.current||this.dirty){this.context.bindFramebuffer.set(this.parent);var ea=this.gl;ea.framebufferTexture2D(ea.FRAMEBUFFER,ea.COLOR_ATTACHMENT0,ea.TEXTURE_2D,Z,0);this.current=Z;this.dirty=!1}},aa}(pd),rd=function(W){function aa(){W.apply(this,arguments)}return W&&(aa.__proto__=W),(aa.prototype=Object.create(W&&W.prototype)).constructor=aa,aa.prototype.set=function(Z){if(Z!==this.current||this.dirty){this.context.bindFramebuffer.set(this.parent);
var ea=this.gl;ea.framebufferRenderbuffer(ea.FRAMEBUFFER,ea.DEPTH_ATTACHMENT,ea.RENDERBUFFER,Z);this.current=Z;this.dirty=!1}},aa}(pd),re=function(W,aa,Z,ea){this.context=W;this.width=aa;this.height=Z;aa=this.framebuffer=W.gl.createFramebuffer();this.colorAttachment=new md(W,aa);ea&&(this.depthAttachment=new rd(W,aa))};re.prototype.destroy=function(){var W=this.context.gl,aa=this.colorAttachment.get();(aa&&W.deleteTexture(aa),this.depthAttachment)&&(aa=this.depthAttachment.get())&&W.deleteRenderbuffer(aa);
W.deleteFramebuffer(this.framebuffer)};var Ad=function(W,aa,Z){this.func=W;this.mask=aa;this.range=Z};Ad.ReadOnly=!1;Ad.ReadWrite=!0;Ad.disabled=new Ad(519,Ad.ReadOnly,[0,1]);var Bd=function(W,aa,Z,ea,wa,Ga){this.test=W;this.ref=aa;this.mask=Z;this.fail=ea;this.depthFail=wa;this.pass=Ga};Bd.disabled=new Bd({func:519,mask:0},0,0,7680,7680,7680);var be=function(W,aa,Z){this.blendFunction=W;this.blendColor=aa;this.mask=Z};be.disabled=new be(be.Replace=[1,0],a.Color.transparent,[!1,!1,!1,!1]);be.unblended=
new be(be.Replace,a.Color.transparent,[!0,!0,!0,!0]);be.alphaBlended=new be([1,771],a.Color.transparent,[!0,!0,!0,!0]);var le=function(W,aa,Z){this.enable=W;this.mode=aa;this.frontFace=Z};le.disabled=new le(!1,1029,2305);le.backCCW=new le(!0,1029,2305);var Rd=function(W){this.gl=W;this.extVertexArrayObject=this.gl.getExtension("OES_vertex_array_object");this.clearColor=new bd(this);this.clearDepth=new kb(this);this.clearStencil=new $b(this);this.colorMask=new gc(this);this.depthMask=new rc(this);
this.stencilMask=new xc(this);this.stencilFunc=new Rc(this);this.stencilOp=new gb(this);this.stencilTest=new vb(this);this.depthRange=new Sb(this);this.depthTest=new ic(this);this.depthFunc=new ac(this);this.blend=new bc(this);this.blendFunc=new Ub(this);this.blendColor=new wb(this);this.blendEquation=new Lb(this);this.cullFace=new Bb(this);this.cullFaceSide=new Mb(this);this.frontFace=new Yb(this);this.program=new qc(this);this.activeTexture=new Tc(this);this.viewport=new Yc(this);this.bindFramebuffer=
new ad(this);this.bindRenderbuffer=new ec(this);this.bindTexture=new Fc(this);this.bindVertexBuffer=new dd(this);this.bindElementBuffer=new Ac(this);this.bindVertexArrayOES=this.extVertexArrayObject&&new Jc(this);this.pixelStoreUnpack=new gd(this);this.pixelStoreUnpackPremultiplyAlpha=new Vc(this);this.pixelStoreUnpackFlipY=new Gc(this);(this.extTextureFilterAnisotropic=W.getExtension("EXT_texture_filter_anisotropic")||W.getExtension("MOZ_EXT_texture_filter_anisotropic")||W.getExtension("WEBKIT_EXT_texture_filter_anisotropic"))&&
(this.extTextureFilterAnisotropicMax=W.getParameter(this.extTextureFilterAnisotropic.MAX_TEXTURE_MAX_ANISOTROPY_EXT));(this.extTextureHalfFloat=W.getExtension("OES_texture_half_float"))&&(W.getExtension("OES_texture_half_float_linear"),this.extRenderToTextureHalfFloat=W.getExtension("EXT_color_buffer_half_float"));this.extTimerQuery=W.getExtension("EXT_disjoint_timer_query")};Rd.prototype.setDefault=function(){this.unbindVAO();this.clearColor.setDefault();this.clearDepth.setDefault();this.clearStencil.setDefault();
this.colorMask.setDefault();this.depthMask.setDefault();this.stencilMask.setDefault();this.stencilFunc.setDefault();this.stencilOp.setDefault();this.stencilTest.setDefault();this.depthRange.setDefault();this.depthTest.setDefault();this.depthFunc.setDefault();this.blend.setDefault();this.blendFunc.setDefault();this.blendColor.setDefault();this.blendEquation.setDefault();this.cullFace.setDefault();this.cullFaceSide.setDefault();this.frontFace.setDefault();this.program.setDefault();this.activeTexture.setDefault();
this.bindFramebuffer.setDefault();this.pixelStoreUnpack.setDefault();this.pixelStoreUnpackPremultiplyAlpha.setDefault();this.pixelStoreUnpackFlipY.setDefault()};Rd.prototype.setDirty=function(){this.clearColor.dirty=!0;this.clearDepth.dirty=!0;this.clearStencil.dirty=!0;this.colorMask.dirty=!0;this.depthMask.dirty=!0;this.stencilMask.dirty=!0;this.stencilFunc.dirty=!0;this.stencilOp.dirty=!0;this.stencilTest.dirty=!0;this.depthRange.dirty=!0;this.depthTest.dirty=!0;this.depthFunc.dirty=!0;this.blend.dirty=
!0;this.blendFunc.dirty=!0;this.blendColor.dirty=!0;this.blendEquation.dirty=!0;this.cullFace.dirty=!0;this.cullFaceSide.dirty=!0;this.frontFace.dirty=!0;this.program.dirty=!0;this.activeTexture.dirty=!0;this.viewport.dirty=!0;this.bindFramebuffer.dirty=!0;this.bindRenderbuffer.dirty=!0;this.bindTexture.dirty=!0;this.bindVertexBuffer.dirty=!0;this.bindElementBuffer.dirty=!0;this.extVertexArrayObject&&(this.bindVertexArrayOES.dirty=!0);this.pixelStoreUnpack.dirty=!0;this.pixelStoreUnpackPremultiplyAlpha.dirty=
!0;this.pixelStoreUnpackFlipY.dirty=!0};Rd.prototype.createIndexBuffer=function(W,aa){return new Wb(this,W,aa)};Rd.prototype.createVertexBuffer=function(W,aa,Z){return new Kc(this,W,aa,Z)};Rd.prototype.createRenderbuffer=function(W,aa,Z){var ea=this.gl,wa=ea.createRenderbuffer();return this.bindRenderbuffer.set(wa),ea.renderbufferStorage(ea.RENDERBUFFER,W,aa,Z),this.bindRenderbuffer.set(null),wa};Rd.prototype.createFramebuffer=function(W,aa,Z){return new re(this,W,aa,Z)};Rd.prototype.clear=function(W){var aa=
W.color;W=W.depth;var Z=this.gl,ea=0;aa&&(ea|=Z.COLOR_BUFFER_BIT,this.clearColor.set(aa),this.colorMask.set([!0,!0,!0,!0]));void 0!==W&&(ea|=Z.DEPTH_BUFFER_BIT,this.depthRange.set([0,1]),this.clearDepth.set(W),this.depthMask.set(!0));Z.clear(ea)};Rd.prototype.setCullFace=function(W){!1===W.enable?this.cullFace.set(!1):(this.cullFace.set(!0),this.cullFaceSide.set(W.mode),this.frontFace.set(W.frontFace))};Rd.prototype.setDepthMode=function(W){W.func!==this.gl.ALWAYS||W.mask?(this.depthTest.set(!0),
this.depthFunc.set(W.func),this.depthMask.set(W.mask),this.depthRange.set(W.range)):this.depthTest.set(!1)};Rd.prototype.setStencilMode=function(W){W.test.func!==this.gl.ALWAYS||W.mask?(this.stencilTest.set(!0),this.stencilMask.set(W.mask),this.stencilOp.set([W.fail,W.depthFail,W.pass]),this.stencilFunc.set({func:W.test.func,ref:W.ref,mask:W.test.mask})):this.stencilTest.set(!1)};Rd.prototype.setColorMode=function(W){a.deepEqual(W.blendFunction,be.Replace)?this.blend.set(!1):(this.blend.set(!0),this.blendFunc.set(W.blendFunction),
this.blendColor.set(W.blendColor));this.colorMask.set(W.mask)};Rd.prototype.unbindVAO=function(){this.extVertexArrayObject&&this.bindVertexArrayOES.set(null)};var Fe=function(W){function aa(Z,ea,wa){var Ga=this;W.call(this);this.id=Z;this.dispatcher=wa;this.on("data",function(Sa){"source"===Sa.dataType&&"metadata"===Sa.sourceDataType&&(Ga._sourceLoaded=!0);Ga._sourceLoaded&&!Ga._paused&&"source"===Sa.dataType&&"content"===Sa.sourceDataType&&(Ga.reload(),Ga.transform&&Ga.update(Ga.transform))});this.on("error",
function(){Ga._sourceErrored=!0});this._source=function(Sa,ab,yb,Hb){ab=new Kb[ab.type](Sa,ab,yb,Hb);if(ab.id!==Sa)throw Error("Expected Source id to be "+Sa+" instead of "+ab.id);return a.bindAll(["load","abort","unload","serialize","prepare"],ab),ab}(Z,ea,wa,this);this._tiles={};this._cache=new Ob(0,this._unloadTile.bind(this));this._timers={};this._cacheTimers={};this._maxTileCacheSize=null;this._loadedParentTiles={};this._coveredTiles={};this._state=new a.SourceFeatureState}return W&&(aa.__proto__=
W),(aa.prototype=Object.create(W&&W.prototype)).constructor=aa,aa.prototype.onAdd=function(Z){this._maxTileCacheSize=(this.map=Z)?Z._maxTileCacheSize:null;this._source&&this._source.onAdd&&this._source.onAdd(Z)},aa.prototype.onRemove=function(Z){this._source&&this._source.onRemove&&this._source.onRemove(Z)},aa.prototype.loaded=function(){if(this._sourceErrored)return!0;if(!this._sourceLoaded||!this._source.loaded())return!1;for(var Z in this._tiles){var ea=this._tiles[Z];if("loaded"!==ea.state&&"errored"!==
ea.state)return!1}return!0},aa.prototype.getSource=function(){return this._source},aa.prototype.pause=function(){this._paused=!0},aa.prototype.resume=function(){if(this._paused){var Z=this._shouldReloadOnResume;this._shouldReloadOnResume=this._paused=!1;Z&&this.reload();this.transform&&this.update(this.transform)}},aa.prototype._loadTile=function(Z,ea){return this._source.loadTile(Z,ea)},aa.prototype._unloadTile=function(Z){if(this._source.unloadTile)return this._source.unloadTile(Z,function(){})},
aa.prototype._abortTile=function(Z){if(this._source.abortTile)return this._source.abortTile(Z,function(){})},aa.prototype.serialize=function(){return this._source.serialize()},aa.prototype.prepare=function(Z){for(var ea in this._source.prepare&&this._source.prepare(),this._state.coalesceChanges(this._tiles,this.map?this.map.painter:null),this._tiles){var wa=this._tiles[ea];wa.upload(Z);wa.prepare(this.map.style.imageManager)}},aa.prototype.getIds=function(){return a.values(this._tiles).map(function(Z){return Z.tileID}).sort(t).map(function(Z){return Z.key})},
aa.prototype.getRenderableIds=function(Z){var ea=this,wa=[],Ga;for(Ga in this._tiles)this._isIdRenderable(Ga,Z)&&wa.push(this._tiles[Ga]);return Z?wa.sort(function(Sa,ab){Sa=Sa.tileID;ab=ab.tileID;var yb=(new a.Point(Sa.canonical.x,Sa.canonical.y))._rotate(ea.transform.angle),Hb=(new a.Point(ab.canonical.x,ab.canonical.y))._rotate(ea.transform.angle);return Sa.overscaledZ-ab.overscaledZ||Hb.y-yb.y||Hb.x-yb.x}).map(function(Sa){return Sa.tileID.key}):wa.map(function(Sa){return Sa.tileID}).sort(t).map(function(Sa){return Sa.key})},
aa.prototype.hasRenderableParent=function(Z){Z=this.findLoadedParent(Z,0);return!!Z&&this._isIdRenderable(Z.tileID.key)},aa.prototype._isIdRenderable=function(Z,ea){return this._tiles[Z]&&this._tiles[Z].hasData()&&!this._coveredTiles[Z]&&(ea||!this._tiles[Z].holdingForFade())},aa.prototype.reload=function(){if(this._paused)this._shouldReloadOnResume=!0;else for(var Z in this._cache.reset(),this._tiles)"errored"!==this._tiles[Z].state&&this._reloadTile(Z,"reloading")},aa.prototype._reloadTile=function(Z,
ea){var wa=this._tiles[Z];wa&&("loading"!==wa.state&&(wa.state=ea),this._loadTile(wa,this._tileLoaded.bind(this,wa,Z,ea)))},aa.prototype._tileLoaded=function(Z,ea,wa,Ga){if(Ga)return Z.state="errored",void(404!==Ga.status?this._source.fire(new a.ErrorEvent(Ga,{tile:Z})):this.update(this.transform));Z.timeAdded=a.browser.now();"expired"===wa&&(Z.refreshedUponExpiration=!0);this._setTileReloadTimer(ea,Z);"raster-dem"===this.getSource().type&&Z.dem&&this._backfillDEM(Z);this._state.initializeTileState(Z,
this.map?this.map.painter:null);this._source.fire(new a.Event("data",{dataType:"source",tile:Z,coord:Z.tileID}))},aa.prototype._backfillDEM=function(Z){function ea(ab,yb){ab.needsHillshadePrepare=!0;var Hb=yb.tileID.canonical.x-ab.tileID.canonical.x,Ib=yb.tileID.canonical.y-ab.tileID.canonical.y,nc=Math.pow(2,ab.tileID.canonical.z),mc=yb.tileID.key;0===Hb&&0===Ib||1<Math.abs(Ib)||(1<Math.abs(Hb)&&(1===Math.abs(Hb+nc)?Hb+=nc:1===Math.abs(Hb-nc)&&(Hb-=nc)),yb.dem&&ab.dem&&(ab.dem.backfillBorder(yb.dem,
Hb,Ib),ab.neighboringTiles&&ab.neighboringTiles[mc]&&(ab.neighboringTiles[mc].backfilled=!0)))}for(var wa=this.getRenderableIds(),Ga=0;Ga<wa.length;Ga++){var Sa=wa[Ga];Z.neighboringTiles&&Z.neighboringTiles[Sa]&&(Sa=this.getTileByID(Sa),ea(Z,Sa),ea(Sa,Z))}},aa.prototype.getTile=function(Z){return this.getTileByID(Z.key)},aa.prototype.getTileByID=function(Z){return this._tiles[Z]},aa.prototype._retainLoadedChildren=function(Z,ea,wa,Ga){for(var Sa in this._tiles){var ab=this._tiles[Sa];if(!(Ga[Sa]||
!ab.hasData()||ab.tileID.overscaledZ<=ea||ab.tileID.overscaledZ>wa)){for(var yb=ab.tileID;ab&&ab.tileID.overscaledZ>ea+1;){var Hb=ab.tileID.scaledTo(ab.tileID.overscaledZ-1);(ab=this._tiles[Hb.key])&&ab.hasData()&&(yb=Hb)}for(ab=yb;ab.overscaledZ>ea;)if(Z[(ab=ab.scaledTo(ab.overscaledZ-1)).key]){Ga[yb.key]=yb;break}}}},aa.prototype.findLoadedParent=function(Z,ea){if(Z.key in this._loadedParentTiles)return(Z=this._loadedParentTiles[Z.key])&&Z.tileID.overscaledZ>=ea?Z:null;for(var wa=Z.overscaledZ-
1;wa>=ea;wa--){var Ga=Z.scaledTo(wa);if(Ga=this._getLoadedTile(Ga))return Ga}},aa.prototype._getLoadedTile=function(Z){var ea=this._tiles[Z.key];return ea&&ea.hasData()?ea:this._cache.getByKey(Z.wrapped().key)},aa.prototype.updateCacheSize=function(Z){Z=Math.floor((Math.ceil(Z.width/this._source.tileSize)+1)*(Math.ceil(Z.height/this._source.tileSize)+1)*5);this._cache.setMaxSize("number"==typeof this._maxTileCacheSize?Math.min(this._maxTileCacheSize,Z):Z)},aa.prototype.handleWrapJump=function(Z){var ea=
Math.round((Z-(void 0===this._prevLng?Z:this._prevLng))/360);if(this._prevLng=Z,ea){Z={};for(var wa in this._tiles){var Ga=this._tiles[wa];Ga.tileID=Ga.tileID.unwrapTo(Ga.tileID.wrap+ea);Z[Ga.tileID.key]=Ga}for(var Sa in this._tiles=Z,this._timers)clearTimeout(this._timers[Sa]),delete this._timers[Sa];for(var ab in this._tiles)this._setTileReloadTimer(ab,this._tiles[ab])}},aa.prototype.update=function(Z){var ea=this;if(this.transform=Z,this._sourceLoaded&&!this._paused){var wa;this.updateCacheSize(Z);
this.handleWrapJump(this.transform.center.lng);this._coveredTiles={};this.used?this._source.tileID?wa=Z.getVisibleUnwrappedCoordinates(this._source.tileID).map(function(Gb){return new a.OverscaledTileID(Gb.canonical.z,Gb.wrap,Gb.canonical.z,Gb.canonical.x,Gb.canonical.y)}):(wa=Z.coveringTiles({tileSize:this._source.tileSize,minzoom:this._source.minzoom,maxzoom:this._source.maxzoom,roundZoom:this._source.roundZoom,reparseOverscaled:this._source.reparseOverscaled}),this._source.hasTile&&(wa=wa.filter(function(Gb){return ea._source.hasTile(Gb)}))):
wa=[];Z=Z.coveringZoomLevel(this._source);var Ga=Math.max(Z-aa.maxOverzooming,this._source.minzoom),Sa=Math.max(Z+aa.maxUnderzooming,this._source.minzoom);wa=this._updateRetainedTiles(wa,Z);if(v(this._source.type)){for(var ab={},yb={},Hb=0,Ib=Object.keys(wa);Hb<Ib.length;Hb+=1){var nc=Ib[Hb],mc=wa[nc],cc=this._tiles[nc];!cc||cc.fadeEndTime&&cc.fadeEndTime<=a.browser.now()||((cc=this.findLoadedParent(mc,Ga))&&(this._addTile(cc.tileID),ab[cc.tileID.key]=cc.tileID),yb[nc]=mc)}for(var lc in this._retainLoadedChildren(yb,
Z,Sa,wa),ab)wa[lc]||(this._coveredTiles[lc]=!0,wa[lc]=ab[lc])}for(var kc in wa)this._tiles[kc].clearFadeHold();lc=0;for(kc=a.keysDifference(this._tiles,wa);lc<kc.length;lc+=1)Z=kc[lc],Ga=this._tiles[Z],Ga.hasSymbolBuckets&&!Ga.holdingForFade()?Ga.setHoldDuration(this.map._fadeDuration):Ga.hasSymbolBuckets&&!Ga.symbolFadeFinished()||this._removeTile(Z);this._updateLoadedParentTileCache()}},aa.prototype.releaseSymbolFadeTiles=function(){for(var Z in this._tiles)this._tiles[Z].holdingForFade()&&this._removeTile(Z)},
aa.prototype._updateRetainedTiles=function(Z,ea){for(var wa={},Ga={},Sa=Math.max(ea-aa.maxOverzooming,this._source.minzoom),ab=Math.max(ea+aa.maxUnderzooming,this._source.minzoom),yb={},Hb=0;Hb<Z.length;Hb+=1){var Ib=Z[Hb],nc=this._addTile(Ib);wa[Ib.key]=Ib;nc.hasData()||ea<this._source.maxzoom&&(yb[Ib.key]=Ib)}this._retainLoadedChildren(yb,ea,ab,wa);for(ab=0;ab<Z.length;ab+=1)if(yb=Z[ab],Hb=this._tiles[yb.key],!Hb.hasData()){if(ea+1>this._source.maxzoom){if(Ib=yb.children(this._source.maxzoom)[0],
(nc=this.getTile(Ib))&&nc.hasData()){wa[Ib.key]=Ib;continue}}else if(Ib=yb.children(this._source.maxzoom),wa[Ib[0].key]&&wa[Ib[1].key]&&wa[Ib[2].key]&&wa[Ib[3].key])continue;Ib=Hb.wasRequested();for(nc=yb.overscaledZ-1;nc>=Sa;--nc){var mc=yb.scaledTo(nc);if(Ga[mc.key])break;if(Ga[mc.key]=!0,!(Hb=this.getTile(mc))&&Ib&&(Hb=this._addTile(mc)),Hb&&(wa[mc.key]=mc,Ib=Hb.wasRequested(),Hb.hasData()))break}}return wa},aa.prototype._updateLoadedParentTileCache=function(){for(var Z in this._loadedParentTiles=
{},this._tiles){for(var ea=[],wa=void 0,Ga=this._tiles[Z].tileID;0<Ga.overscaledZ;){if(Ga.key in this._loadedParentTiles){wa=this._loadedParentTiles[Ga.key];break}ea.push(Ga.key);Ga=Ga.scaledTo(Ga.overscaledZ-1);if(wa=this._getLoadedTile(Ga))break}for(Ga=0;Ga<ea.length;Ga+=1)this._loadedParentTiles[ea[Ga]]=wa}},aa.prototype._addTile=function(Z){var ea=this._tiles[Z.key];if(ea)return ea;(ea=this._cache.getAndRemove(Z))&&(this._setTileReloadTimer(Z.key,ea),ea.tileID=Z,this._state.initializeTileState(ea,
this.map?this.map.painter:null),this._cacheTimers[Z.key]&&(clearTimeout(this._cacheTimers[Z.key]),delete this._cacheTimers[Z.key],this._setTileReloadTimer(Z.key,ea)));var wa=!!ea;return wa||(ea=new a.Tile(Z,this._source.tileSize*Z.overscaleFactor()),this._loadTile(ea,this._tileLoaded.bind(this,ea,Z.key,ea.state))),ea?(ea.uses++,this._tiles[Z.key]=ea,wa||this._source.fire(new a.Event("dataloading",{tile:ea,coord:ea.tileID,dataType:"source"})),ea):null},aa.prototype._setTileReloadTimer=function(Z,ea){var wa=
this;Z in this._timers&&(clearTimeout(this._timers[Z]),delete this._timers[Z]);(ea=ea.getExpiryTimeout())&&(this._timers[Z]=setTimeout(function(){wa._reloadTile(Z,"expired");delete wa._timers[Z]},ea))},aa.prototype._removeTile=function(Z){var ea=this._tiles[Z];ea&&(ea.uses--,delete this._tiles[Z],this._timers[Z]&&(clearTimeout(this._timers[Z]),delete this._timers[Z]),0<ea.uses||(ea.hasData()&&"reloading"!==ea.state?this._cache.add(ea.tileID,ea,ea.getExpiryTimeout()):(ea.aborted=!0,this._abortTile(ea),
this._unloadTile(ea))))},aa.prototype.clearTiles=function(){for(var Z in this._shouldReloadOnResume=!1,this._paused=!1,this._tiles)this._removeTile(Z);this._cache.reset()},aa.prototype.tilesIn=function(Z,ea,wa){var Ga=this,Sa=[],ab=this.transform;if(!ab)return Sa;wa=wa?ab.getCameraQueryGeometry(Z):Z;var yb=Z.map(function(kc){return ab.pointCoordinate(kc)}),Hb=wa.map(function(kc){return ab.pointCoordinate(kc)}),Ib=this.getIds(),nc=1/0,mc=1/0,cc=-1/0,lc=-1/0;for(Z=0;Z<Hb.length;Z+=1)wa=Hb[Z],nc=Math.min(nc,
wa.x),mc=Math.min(mc,wa.y),cc=Math.max(cc,wa.x),lc=Math.max(lc,wa.y);Z=function(kc){kc=Ga._tiles[Ib[kc]];if(!kc.holdingForFade()){var Gb=kc.tileID,dc=Math.pow(2,ab.zoom-kc.tileID.overscaledZ),Dc=ea*kc.queryPadding*a.EXTENT/kc.tileSize/dc,Uc=[Gb.getTilePoint(new a.MercatorCoordinate(nc,mc)),Gb.getTilePoint(new a.MercatorCoordinate(cc,lc))];Uc[0].x-Dc<a.EXTENT&&Uc[0].y-Dc<a.EXTENT&&0<=Uc[1].x+Dc&&0<=Uc[1].y+Dc&&(Dc=yb.map(function(jd){return Gb.getTilePoint(jd)}),Uc=Hb.map(function(jd){return Gb.getTilePoint(jd)}),
Sa.push({tile:kc,tileID:Gb,queryGeometry:Dc,cameraQueryGeometry:Uc,scale:dc}))}};for(wa=0;wa<Ib.length;wa++)Z(wa);return Sa},aa.prototype.getVisibleCoordinates=function(Z){var ea=this;Z=this.getRenderableIds(Z).map(function(Sa){return ea._tiles[Sa].tileID});for(var wa=0;wa<Z.length;wa+=1){var Ga=Z[wa];Ga.posMatrix=this.transform.calculatePosMatrix(Ga.toUnwrapped())}return Z},aa.prototype.hasTransition=function(){if(this._source.hasTransition())return!0;if(v(this._source.type))for(var Z in this._tiles){var ea=
this._tiles[Z];if(void 0!==ea.fadeEndTime&&ea.fadeEndTime>=a.browser.now())return!0}return!1},aa.prototype.setFeatureState=function(Z,ea,wa){this._state.updateState(Z||"_geojsonTileLayer",ea,wa)},aa.prototype.removeFeatureState=function(Z,ea,wa){this._state.removeFeatureState(Z||"_geojsonTileLayer",ea,wa)},aa.prototype.getFeatureState=function(Z,ea){return this._state.getState(Z||"_geojsonTileLayer",ea)},aa.prototype.setDependencies=function(Z,ea,wa){(Z=this._tiles[Z])&&Z.setDependencies(ea,wa)},
aa.prototype.reloadTilesForDependencies=function(Z,ea){for(var wa in this._tiles)this._tiles[wa].hasDependency(Z,ea)&&this._reloadTile(wa,"reloading");this._cache.filter(function(Ga){return!Ga.hasDependency(Z,ea)})},aa}(a.Evented);Fe.maxOverzooming=10;Fe.maxUnderzooming=3;var Je=function(){this.active={}};Je.prototype.acquire=function(W){if(!this.workers)for(this.workers=[];this.workers.length<Je.workerCount;)this.workers.push(new w);return this.active[W]=!0,this.workers.slice()};Je.prototype.release=
function(W){delete this.active[W];0===this.numActive()&&(this.workers.forEach(function(aa){aa.terminate()}),this.workers=null)};Je.prototype.isPreloaded=function(){return!!this.active.mapboxgl_preloaded_worker_pool};Je.prototype.numActive=function(){return Object.keys(this.active).length};var Kd;Je.workerCount=Math.max(Math.min(Math.floor(a.browser.hardwareConcurrency/2),6),1);var Dd={setStyle:"setStyle",addLayer:"addLayer",removeLayer:"removeLayer",setPaintProperty:"setPaintProperty",setLayoutProperty:"setLayoutProperty",
setFilter:"setFilter",addSource:"addSource",removeSource:"removeSource",setGeoJSONSourceData:"setGeoJSONSourceData",setLayerZoomRange:"setLayerZoomRange",setLayerProperty:"setLayerProperty",setCenter:"setCenter",setZoom:"setZoom",setBearing:"setBearing",setPitch:"setPitch",setSprite:"setSprite",setGlyphs:"setGlyphs",setTransition:"setTransition",setLight:"setLight"},we=function(W,aa){this.reset(W,aa)};we.prototype.reset=function(W,aa){this.points=W||[];this._distances=[0];for(W=1;W<this.points.length;W++)this._distances[W]=
this._distances[W-1]+this.points[W].dist(this.points[W-1]);this.length=this._distances[this._distances.length-1];this.padding=Math.min(aa||0,.5*this.length);this.paddedLength=this.length-2*this.padding};we.prototype.lerp=function(W){if(1===this.points.length)return this.points[0];W=a.clamp(W,0,1);for(var aa=1,Z=this._distances[aa],ea=W*this.paddedLength+this.padding;Z<ea&&aa<this._distances.length;)Z=this._distances[++aa];W=aa-1;var wa=this._distances[W];Z-=wa;Z=0<Z?(ea-wa)/Z:0;return this.points[W].mult(1-
Z).add(this.points[aa].mult(Z))};var se=function(W,aa,Z){var ea=this.boxCells=[],wa=this.circleCells=[];this.xCellCount=Math.ceil(W/Z);this.yCellCount=Math.ceil(aa/Z);for(Z=0;Z<this.xCellCount*this.yCellCount;Z++)ea.push([]),wa.push([]);this.circleKeys=[];this.boxKeys=[];this.bboxes=[];this.circles=[];this.width=W;this.height=aa;this.xScale=this.xCellCount/W;this.yScale=this.yCellCount/aa;this.circleUid=this.boxUid=0};se.prototype.keysLength=function(){return this.boxKeys.length+this.circleKeys.length};
se.prototype.insert=function(W,aa,Z,ea,wa){this._forEachCell(aa,Z,ea,wa,this._insertBoxCell,this.boxUid++);this.boxKeys.push(W);this.bboxes.push(aa);this.bboxes.push(Z);this.bboxes.push(ea);this.bboxes.push(wa)};se.prototype.insertCircle=function(W,aa,Z,ea){this._forEachCell(aa-ea,Z-ea,aa+ea,Z+ea,this._insertCircleCell,this.circleUid++);this.circleKeys.push(W);this.circles.push(aa);this.circles.push(Z);this.circles.push(ea)};se.prototype._insertBoxCell=function(W,aa,Z,ea,wa,Ga){this.boxCells[wa].push(Ga)};
se.prototype._insertCircleCell=function(W,aa,Z,ea,wa,Ga){this.circleCells[wa].push(Ga)};se.prototype._query=function(W,aa,Z,ea,wa,Ga){if(0>Z||W>this.width||0>ea||aa>this.height)return!wa&&[];var Sa=[];if(0>=W&&0>=aa&&this.width<=Z&&this.height<=ea){if(wa)return!0;for(W=0;W<this.boxKeys.length;W++)Sa.push({key:this.boxKeys[W],x1:this.bboxes[4*W],y1:this.bboxes[4*W+1],x2:this.bboxes[4*W+2],y2:this.bboxes[4*W+3]});for(W=0;W<this.circleKeys.length;W++)aa=this.circles[3*W],Z=this.circles[3*W+1],ea=this.circles[3*
W+2],Sa.push({key:this.circleKeys[W],x1:aa-ea,y1:Z-ea,x2:aa+ea,y2:Z+ea});return Ga?Sa.filter(Ga):Sa}return this._forEachCell(W,aa,Z,ea,this._queryCell,Sa,{hitTest:wa,seenUids:{box:{},circle:{}}},Ga),wa?0<Sa.length:Sa};se.prototype._queryCircle=function(W,aa,Z,ea,wa){var Ga=W-Z,Sa=W+Z,ab=aa-Z,yb=aa+Z;if(0>Sa||Ga>this.width||0>yb||ab>this.height)return!ea&&[];var Hb=[];return this._forEachCell(Ga,ab,Sa,yb,this._queryCellCircle,Hb,{hitTest:ea,circle:{x:W,y:aa,radius:Z},seenUids:{box:{},circle:{}}},wa),
ea?0<Hb.length:Hb};se.prototype.query=function(W,aa,Z,ea,wa){return this._query(W,aa,Z,ea,!1,wa)};se.prototype.hitTest=function(W,aa,Z,ea,wa){return this._query(W,aa,Z,ea,!0,wa)};se.prototype.hitTestCircle=function(W,aa,Z,ea){return this._queryCircle(W,aa,Z,!0,ea)};se.prototype._queryCell=function(W,aa,Z,ea,wa,Ga,Sa,ab){var yb=Sa.seenUids,Hb=this.boxCells[wa];if(null!==Hb)for(var Ib=this.bboxes,nc=0;nc<Hb.length;nc+=1){var mc=Hb[nc];if(!yb.box[mc]){yb.box[mc]=!0;var cc=4*mc;if(W<=Ib[cc+2]&&aa<=Ib[cc+
3]&&Z>=Ib[cc+0]&&ea>=Ib[cc+1]&&(!ab||ab(this.boxKeys[mc]))){if(Sa.hitTest)return Ga.push(!0),!0;Ga.push({key:this.boxKeys[mc],x1:Ib[cc],y1:Ib[cc+1],x2:Ib[cc+2],y2:Ib[cc+3]})}}}wa=this.circleCells[wa];if(null!==wa)for(Hb=this.circles,Ib=0;Ib<wa.length;Ib+=1)if(nc=wa[Ib],!yb.circle[nc]){yb.circle[nc]=!0;var lc=3*nc;if(this._circleAndRectCollide(Hb[lc],Hb[lc+1],Hb[lc+2],W,aa,Z,ea)&&(!ab||ab(this.circleKeys[nc]))){if(Sa.hitTest)return Ga.push(!0),!0;mc=Hb[lc];cc=Hb[lc+1];lc=Hb[lc+2];Ga.push({key:this.circleKeys[nc],
x1:mc-lc,y1:cc-lc,x2:mc+lc,y2:cc+lc})}}};se.prototype._queryCellCircle=function(W,aa,Z,ea,wa,Ga,Sa,ab){W=Sa.circle;Sa=Sa.seenUids;aa=this.boxCells[wa];if(null!==aa)for(Z=this.bboxes,ea=0;ea<aa.length;ea+=1){var yb=aa[ea];if(!Sa.box[yb]){Sa.box[yb]=!0;var Hb=4*yb;if(this._circleAndRectCollide(W.x,W.y,W.radius,Z[Hb+0],Z[Hb+1],Z[Hb+2],Z[Hb+3])&&(!ab||ab(this.boxKeys[yb])))return Ga.push(!0),!0}}wa=this.circleCells[wa];if(null!==wa)for(aa=this.circles,Z=0;Z<wa.length;Z+=1)if(ea=wa[Z],!Sa.circle[ea]&&
(Sa.circle[ea]=!0,yb=3*ea,this._circlesCollide(aa[yb],aa[yb+1],aa[yb+2],W.x,W.y,W.radius)&&(!ab||ab(this.circleKeys[ea]))))return Ga.push(!0),!0};se.prototype._forEachCell=function(W,aa,Z,ea,wa,Ga,Sa,ab){for(var yb=this._convertToXCellCoord(W),Hb=this._convertToYCellCoord(aa),Ib=this._convertToXCellCoord(Z),nc=this._convertToYCellCoord(ea);yb<=Ib;yb++)for(var mc=Hb;mc<=nc;mc++)if(wa.call(this,W,aa,Z,ea,this.xCellCount*mc+yb,Ga,Sa,ab))return};se.prototype._convertToXCellCoord=function(W){return Math.max(0,
Math.min(this.xCellCount-1,Math.floor(W*this.xScale)))};se.prototype._convertToYCellCoord=function(W){return Math.max(0,Math.min(this.yCellCount-1,Math.floor(W*this.yScale)))};se.prototype._circlesCollide=function(W,aa,Z,ea,wa,Ga){W=ea-W;aa=wa-aa;Z+=Ga;return Z*Z>W*W+aa*aa};se.prototype._circleAndRectCollide=function(W,aa,Z,ea,wa,Ga,Sa){Ga=(Ga-ea)/2;W=Math.abs(W-(ea+Ga));if(W>Ga+Z)return!1;Sa=(Sa-wa)/2;aa=Math.abs(aa-(wa+Sa));if(aa>Sa+Z)return!1;if(W<=Ga||aa<=Sa)return!0;wa=W-Ga;aa-=Sa;return wa*
wa+aa*aa<=Z*Z};var Xd=new Float32Array([-1/0,-1/0,0,-1/0,-1/0,0,-1/0,-1/0,0,-1/0,-1/0,0]),ye=function(W,aa,Z){void 0===aa&&(aa=new se(W.width+200,W.height+200,25));void 0===Z&&(Z=new se(W.width+200,W.height+200,25));this.transform=W;this.grid=aa;this.ignoredGrid=Z;this.pitchfactor=Math.cos(W._pitch)*W.cameraToCenterDistance;this.screenRightBoundary=W.width+100;this.screenBottomBoundary=W.height+100;this.gridRightBoundary=W.width+200;this.gridBottomBoundary=W.height+200};ye.prototype.placeCollisionBox=
function(W,aa,Z,ea,wa){ea=this.projectAndGetPerspectiveRatio(ea,W.anchorPointX,W.anchorPointY);var Ga=Z*ea.perspectiveRatio;Z=W.x1*Ga+ea.point.x;var Sa=W.y1*Ga+ea.point.y,ab=W.x2*Ga+ea.point.x;W=W.y2*Ga+ea.point.y;return!this.isInsideGrid(Z,Sa,ab,W)||!aa&&this.grid.hitTest(Z,Sa,ab,W,wa)?{box:[],offscreen:!1}:{box:[Z,Sa,ab,W],offscreen:this.isOffscreen(Z,Sa,ab,W)}};ye.prototype.placeCollisionCircles=function(W,aa,Z,ea,wa,Ga,Sa,ab,yb,Hb,Ib,nc,mc){var cc=[],lc=new a.Point(aa.anchorX,aa.anchorY);Ga=D(lc,
Ga);Ga=.5+this.transform.cameraToCenterDistance/Ga.signedDistanceFromCamera*.5;wa=(Hb?wa/Ga:wa*Ga)/a.ONE_EM;Hb=D(lc,Sa).point;wa=J(wa,ea,aa.lineOffsetX*wa,aa.lineOffsetY*wa,!1,Hb,lc,aa,Z,Sa,{});Z=aa=!1;ea=!0;if(wa){nc=.5*nc*Ga+mc;Sa=new a.Point(-100,-100);lc=new a.Point(this.screenRightBoundary,this.screenBottomBoundary);mc=new we;Ga=wa.first;Hb=wa.last;wa=[];for(var kc=Ga.path.length-1;1<=kc;kc--)wa.push(Ga.path[kc]);for(Ga=1;Ga<Hb.path.length;Ga++)wa.push(Hb.path[Ga]);Ga=2.5*nc;ab&&(wa=wa.map(function(Ic){return D(Ic,
ab)}),wa=wa.some(function(Ic){return 0>=Ic.signedDistanceFromCamera})?[]:wa.map(function(Ic){return Ic.point}));Hb=[];if(0<wa.length){Hb=wa[0].clone();kc=wa[0].clone();for(var Gb=1;Gb<wa.length;Gb++)Hb.x=Math.min(Hb.x,wa[Gb].x),Hb.y=Math.min(Hb.y,wa[Gb].y),kc.x=Math.max(kc.x,wa[Gb].x),kc.y=Math.max(kc.y,wa[Gb].y);Hb=Hb.x>=Sa.x&&kc.x<=lc.x&&Hb.y>=Sa.y&&kc.y<=lc.y?[wa]:kc.x<Sa.x||Hb.x>lc.x||kc.y<Sa.y||Hb.y>lc.y?[]:a.clipLine([wa],Sa.x,Sa.y,lc.x,lc.y)}Sa=0;for(lc=Hb;Sa<lc.length;Sa+=1)for(mc.reset(lc[Sa],
.25*nc),wa=mc.length<=.5*nc?1:Math.ceil(mc.paddedLength/Ga)+1,Hb=0;Hb<wa;Hb++){Gb=mc.lerp(Hb/Math.max(wa-1,1));kc=Gb.x+100;Gb=Gb.y+100;cc.push(kc,Gb,nc,0);var dc=kc-nc,Dc=Gb-nc,Uc=kc+nc,jd=Gb+nc;if(ea=ea&&this.isOffscreen(dc,Dc,Uc,jd),Z=Z||this.isInsideGrid(dc,Dc,Uc,jd),!W&&this.grid.hitTestCircle(kc,Gb,nc,Ib)&&(aa=!0,!yb))return{circles:[],offscreen:!1,collisionDetected:aa}}}return{circles:!yb&&aa||!Z?[]:cc,offscreen:ea,collisionDetected:aa}};ye.prototype.queryRenderedSymbols=function(W){if(0===
W.length||0===this.grid.keysLength()&&0===this.ignoredGrid.keysLength())return{};for(var aa=[],Z=1/0,ea=1/0,wa=-1/0,Ga=-1/0,Sa=0;Sa<W.length;Sa+=1){var ab=W[Sa];ab=new a.Point(ab.x+100,ab.y+100);Z=Math.min(Z,ab.x);ea=Math.min(ea,ab.y);wa=Math.max(wa,ab.x);Ga=Math.max(Ga,ab.y);aa.push(ab)}W={};Sa={};ab=0;for(Z=this.grid.query(Z,ea,wa,Ga).concat(this.ignoredGrid.query(Z,ea,wa,Ga));ab<Z.length;ab+=1)wa=Z[ab],ea=wa.key,(void 0===W[ea.bucketInstanceId]&&(W[ea.bucketInstanceId]={}),W[ea.bucketInstanceId][ea.featureIndex])||
(wa=[new a.Point(wa.x1,wa.y1),new a.Point(wa.x2,wa.y1),new a.Point(wa.x2,wa.y2),new a.Point(wa.x1,wa.y2)],a.polygonIntersectsPolygon(aa,wa)&&(W[ea.bucketInstanceId][ea.featureIndex]=!0,void 0===Sa[ea.bucketInstanceId]&&(Sa[ea.bucketInstanceId]=[]),Sa[ea.bucketInstanceId].push(ea.featureIndex)));return Sa};ye.prototype.insertCollisionBox=function(W,aa,Z,ea,wa){(aa?this.ignoredGrid:this.grid).insert({bucketInstanceId:Z,featureIndex:ea,collisionGroupID:wa},W[0],W[1],W[2],W[3])};ye.prototype.insertCollisionCircles=
function(W,aa,Z,ea,wa){aa=aa?this.ignoredGrid:this.grid;Z={bucketInstanceId:Z,featureIndex:ea,collisionGroupID:wa};for(ea=0;ea<W.length;ea+=4)aa.insertCircle(Z,W[ea],W[ea+1],W[ea+2])};ye.prototype.projectAndGetPerspectiveRatio=function(W,aa,Z){aa=[aa,Z,0,1];return P(aa,aa,W),{point:new a.Point((aa[0]/aa[3]+1)/2*this.transform.width+100,(-aa[1]/aa[3]+1)/2*this.transform.height+100),perspectiveRatio:.5+this.transform.cameraToCenterDistance/aa[3]*.5}};ye.prototype.isOffscreen=function(W,aa,Z,ea){return 100>
Z||W>=this.screenRightBoundary||100>ea||aa>this.screenBottomBoundary};ye.prototype.isInsideGrid=function(W,aa,Z,ea){return 0<=Z&&W<this.gridRightBoundary&&0<=ea&&aa<this.gridBottomBoundary};ye.prototype.getViewportMatrix=function(){var W=a.identity([]);return a.translate(W,W,[-100,-100,0]),W};var kf=function(W,aa,Z,ea){this.opacity=W?Math.max(0,Math.min(1,W.opacity+(W.placed?aa:-aa))):ea&&Z?1:0;this.placed=Z};kf.prototype.isHidden=function(){return 0===this.opacity&&!this.placed};var Qe=function(W,
aa,Z,ea,wa){this.text=new kf(W?W.text:null,aa,Z,wa);this.icon=new kf(W?W.icon:null,aa,ea,wa)};Qe.prototype.isHidden=function(){return this.text.isHidden()&&this.icon.isHidden()};var pf=function(W,aa,Z){this.text=W;this.icon=aa;this.skipFade=Z},ff=function(){this.invProjMatrix=a.create();this.viewportMatrix=a.create();this.circles=[]},Vb=function(W,aa,Z,ea,wa){this.bucketInstanceId=W;this.featureIndex=aa;this.sourceLayerIndex=Z;this.bucketIndex=ea;this.tileID=wa},Sc=function(W){this.crossSourceCollisions=
W;this.maxGroupID=0;this.collisionGroups={}};Sc.prototype.get=function(W){if(this.crossSourceCollisions)return{ID:0,predicate:null};if(!this.collisionGroups[W]){var aa=++this.maxGroupID;this.collisionGroups[W]={ID:aa,predicate:function(Z){return Z.collisionGroupID===aa}}}return this.collisionGroups[W]};var yc=function(W,aa,Z,ea){this.transform=W.clone();this.collisionIndex=new ye(this.transform);this.placements={};this.opacities={};this.variableOffsets={};this.stale=!1;this.commitTime=0;this.fadeDuration=
aa;this.retainedQueryData={};this.collisionGroups=new Sc(Z);this.collisionCircleArrays={};(this.prevPlacement=ea)&&(ea.prevPlacement=void 0);this.placedOrientations={}};yc.prototype.getBucketParts=function(W,aa,Z,ea){var wa=Z.getBucket(aa),Ga=Z.latestFeatureIndex;if(wa&&Ga&&aa.id===wa.layerIds[0]){aa=Z.collisionBoxArray;var Sa=wa.layers[0].layout,ab=Math.pow(2,this.transform.zoom-Z.tileID.overscaledZ),yb=Z.tileSize/a.EXTENT,Hb=this.transform.calculatePosMatrix(Z.tileID.toUnwrapped()),Ib="map"===Sa.get("text-pitch-alignment"),
nc="map"===Sa.get("text-rotation-alignment"),mc=T(Z,1,this.transform.zoom),cc=C(Hb,Ib,nc,this.transform,mc),lc=null;Ib&&(Ib=u(Hb,Ib,nc,this.transform,mc),lc=a.multiply([],this.transform.labelPlaneMatrix,Ib));this.retainedQueryData[wa.bucketInstanceId]=new Vb(wa.bucketInstanceId,Ga,wa.sourceLayerIndex,wa.index,Z.tileID);Z={bucket:wa,layout:Sa,posMatrix:Hb,textLabelPlaneMatrix:cc,labelToScreenMatrix:lc,scale:ab,textPixelRatio:yb,holdingForFade:Z.holdingForFade(),collisionBoxArray:aa,partiallyEvaluatedTextSize:a.evaluateSizeForZoom(wa.textSizeData,
this.transform.zoom),collisionGroup:this.collisionGroups.get(wa.sourceID)};if(ea)for(ea=0,wa=wa.sortKeyRanges;ea<wa.length;ea+=1)Ga=wa[ea],W.push({sortKey:Ga.sortKey,symbolInstanceStart:Ga.symbolInstanceStart,symbolInstanceEnd:Ga.symbolInstanceEnd,parameters:Z});else W.push({symbolInstanceStart:0,symbolInstanceEnd:wa.symbolInstances.length,parameters:Z})}};yc.prototype.attemptAnchorPlacement=function(W,aa,Z,ea,wa,Ga,Sa,ab,yb,Hb,Ib,nc,mc,cc,lc){var kc,Gb=[nc.textOffset0,nc.textOffset1],dc=O(W,Z,ea,
Gb,wa);aa=this.collisionIndex.placeCollisionBox(U(aa,dc.x,dc.y,Ga,Sa,this.transform.angle),Ib,ab,yb,Hb.predicate);if(!lc||0!==this.collisionIndex.placeCollisionBox(U(lc,dc.x,dc.y,Ga,Sa,this.transform.angle),Ib,ab,yb,Hb.predicate).box.length)return 0<aa.box.length?(this.prevPlacement&&this.prevPlacement.variableOffsets[nc.crossTileID]&&this.prevPlacement.placements[nc.crossTileID]&&this.prevPlacement.placements[nc.crossTileID].text&&(kc=this.prevPlacement.variableOffsets[nc.crossTileID].anchor),this.variableOffsets[nc.crossTileID]=
{textOffset:Gb,width:Z,height:ea,anchor:W,textBoxScale:wa,prevAnchor:kc},this.markUsedJustification(mc,W,nc,cc),mc.allowVerticalPlacement&&(this.markUsedOrientation(mc,cc,nc),this.placedOrientations[nc.crossTileID]=cc),{shift:dc,placedGlyphBoxes:aa}):void 0};yc.prototype.placeLayerBucketPart=function(W,aa,Z){var ea=this,wa=W.parameters,Ga=wa.bucket,Sa=wa.layout,ab=wa.posMatrix,yb=wa.textLabelPlaneMatrix,Hb=wa.labelToScreenMatrix,Ib=wa.textPixelRatio,nc=wa.holdingForFade,mc=wa.collisionBoxArray,cc=
wa.partiallyEvaluatedTextSize,lc=wa.collisionGroup,kc=Sa.get("text-optional"),Gb=Sa.get("icon-optional"),dc=Sa.get("text-allow-overlap"),Dc=Sa.get("icon-allow-overlap"),Uc="map"===Sa.get("text-rotation-alignment"),jd="map"===Sa.get("text-pitch-alignment"),Ic="none"!==Sa.get("icon-text-fit");wa="viewport-y"===Sa.get("symbol-z-order");var ld=dc&&(Dc||!Ga.hasIconData()||Gb),id=Dc&&(dc||!Ga.hasTextData()||kc);!Ga.collisionArrays&&mc&&Ga.deserializeCollisionBoxes(mc);mc=function(zd,ud){if(!aa[zd.crossTileID])if(nc)ea.placements[zd.crossTileID]=
new pf(!1,!1,!1);else{var ie,ge=!1,Ee=!1,Ge=!0,Be=null,Qd={box:null,offscreen:null},qe={box:null,offscreen:null},Ne=null,ze=null,Te=0,nf=0,rf=0;ud.textFeatureIndex?Te=ud.textFeatureIndex:zd.useRuntimeCollisionCircles&&(Te=zd.featureIndex);ud.verticalTextFeatureIndex&&(nf=ud.verticalTextFeatureIndex);var Eg=ud.textBox;if(Eg){var df=function(Ce){var Ie=a.WritingMode.horizontal;Ga.allowVerticalPlacement&&!Ce&&ea.prevPlacement&&(Ce=ea.prevPlacement.placedOrientations[zd.crossTileID])&&(ea.placedOrientations[zd.crossTileID]=
Ce,ea.markUsedOrientation(Ga,Ie=Ce,zd));return Ie};Ge=function(Ce,Ie){if(Ga.allowVerticalPlacement&&0<zd.numVerticalGlyphVertices&&ud.verticalTextBox)for(var Qg=0,bf=Ga.writingModes;Qg<bf.length&&(bf[Qg]===a.WritingMode.vertical?(Qd=Ie(),qe=Qd):Qd=Ce(),!(Qd&&Qd.box&&Qd.box.length));Qg+=1);else Qd=Ce()};if(Sa.get("text-variable-anchor")){var Rf=Sa.get("text-variable-anchor");if(ea.prevPlacement&&ea.prevPlacement.variableOffsets[zd.crossTileID]){var Pg=ea.prevPlacement.variableOffsets[zd.crossTileID];
0<Rf.indexOf(Pg.anchor)&&(Rf=Rf.filter(function(Ce){return Ce!==Pg.anchor})).unshift(Pg.anchor)}var Ei=function(Ce,Ie,Qg){var bf=Ce.x2-Ce.x1,Fg=Ce.y2-Ce.y1,jg=zd.textBoxScale;Ie=Ic&&!Dc?Ie:null;for(var of={box:[],offscreen:!1},pj=dc?2*Rf.length:Rf.length,Zh=0;Zh<pj;++Zh){var Db=ea.attemptAnchorPlacement(Rf[Zh%Rf.length],Ce,bf,Fg,jg,Uc,jd,Ib,ab,lc,Zh>=Rf.length,zd,Ga,Qg,Ie);if(Db&&(of=Db.placedGlyphBoxes)&&of.box&&of.box.length){ge=!0;Be=Db.shift;break}}return of};Ge(function(){return Ei(Eg,ud.iconBox,
a.WritingMode.horizontal)},function(){var Ce=ud.verticalTextBox;return Ga.allowVerticalPlacement&&!(Qd&&Qd.box&&Qd.box.length)&&0<zd.numVerticalGlyphVertices&&Ce?Ei(Ce,ud.verticalIconBox,a.WritingMode.vertical):{box:null,offscreen:null}});Qd&&(ge=Qd.box,Ge=Qd.offscreen);Ge=df(Qd&&Qd.box);!ge&&ea.prevPlacement&&(df=ea.prevPlacement.variableOffsets[zd.crossTileID])&&(ea.variableOffsets[zd.crossTileID]=df,ea.markUsedJustification(Ga,df.anchor,zd,Ge))}else{var Vf=function(Ce,Ie){Ce=ea.collisionIndex.placeCollisionBox(Ce,
dc,Ib,ab,lc.predicate);return Ce&&Ce.box&&Ce.box.length&&(ea.markUsedOrientation(Ga,Ie,zd),ea.placedOrientations[zd.crossTileID]=Ie),Ce};Ge(function(){return Vf(Eg,a.WritingMode.horizontal)},function(){var Ce=ud.verticalTextBox;return Ga.allowVerticalPlacement&&0<zd.numVerticalGlyphVertices&&Ce?Vf(Ce,a.WritingMode.vertical):{box:null,offscreen:null}});df(Qd&&Qd.box&&Qd.box.length)}}if(ge=(ie=Qd)&&ie.box&&0<ie.box.length,Ge=ie&&ie.offscreen,zd.useRuntimeCollisionCircles){Ne=Ga.text.placedSymbolArray.get(zd.centerJustifiedTextSymbolIndex);
df=a.evaluateSizeForFeature(Ga.textSizeData,cc,Ne);var Af=Sa.get("text-padding");Ne=ea.collisionIndex.placeCollisionCircles(dc,Ne,Ga.lineVertexArray,Ga.glyphOffsetArray,df,ab,yb,Hb,Z,jd,lc.predicate,zd.collisionCircleDiameter,Af);ge=dc||0<Ne.circles.length&&!Ne.collisionDetected;Ge=Ge&&Ne.offscreen}if(ud.iconFeatureIndex&&(rf=ud.iconFeatureIndex),ud.iconBox)Ee=function(Ce){Ce=Ic&&Be?U(Ce,Be.x,Be.y,Uc,jd,ea.transform.angle):Ce;return ea.collisionIndex.placeCollisionBox(Ce,Dc,Ib,ab,lc.predicate)},Ee=
qe&&qe.box&&qe.box.length&&ud.verticalIconBox?0<(ze=Ee(ud.verticalIconBox)).box.length:0<(ze=Ee(ud.iconBox)).box.length,Ge=Ge&&ze.offscreen;df=kc||0===zd.numHorizontalGlyphVertices&&0===zd.numVerticalGlyphVertices;Af=Gb||0===zd.numIconVertices;if(df||Af?Af?df||(Ee=Ee&&ge):ge=Ee&&ge:Ee=ge=Ee&&ge,ge&&ie&&ie.box&&ea.collisionIndex.insertCollisionBox(ie.box,Sa.get("text-ignore-placement"),Ga.bucketInstanceId,qe&&qe.box&&nf?nf:Te,lc.ID),Ee&&ze&&ea.collisionIndex.insertCollisionBox(ze.box,Sa.get("icon-ignore-placement"),
Ga.bucketInstanceId,rf,lc.ID),Ne&&(ge&&ea.collisionIndex.insertCollisionCircles(Ne.circles,Sa.get("text-ignore-placement"),Ga.bucketInstanceId,Te,lc.ID),Z))for(ze=Ga.bucketInstanceId,ie=ea.collisionCircleArrays[ze],void 0===ie&&(ie=ea.collisionCircleArrays[ze]=new ff),ze=0;ze<Ne.circles.length;ze+=4)ie.circles.push(Ne.circles[ze+0]),ie.circles.push(Ne.circles[ze+1]),ie.circles.push(Ne.circles[ze+2]),ie.circles.push(Ne.collisionDetected?1:0);ea.placements[zd.crossTileID]=new pf(ge||ld,Ee||id,Ge||Ga.justReloaded);
aa[zd.crossTileID]=!0}};if(wa)for(W=Ga.getSortedSymbolIndexes(this.transform.angle),wa=W.length-1;0<=wa;--wa){var yd=W[wa];mc(Ga.symbolInstances.get(yd),Ga.collisionArrays[yd])}else for(wa=W.symbolInstanceStart;wa<W.symbolInstanceEnd;wa++)mc(Ga.symbolInstances.get(wa),Ga.collisionArrays[wa]);Z&&Ga.bucketInstanceId in this.collisionCircleArrays&&(mc=this.collisionCircleArrays[Ga.bucketInstanceId],a.invert(mc.invProjMatrix,ab),mc.viewportMatrix=this.collisionIndex.getViewportMatrix());Ga.justReloaded=
!1};yc.prototype.markUsedJustification=function(W,aa,Z,ea){aa=ea===a.WritingMode.vertical?Z.verticalPlacedTextSymbolIndex:{left:Z.leftJustifiedTextSymbolIndex,center:Z.centerJustifiedTextSymbolIndex,right:Z.rightJustifiedTextSymbolIndex}[a.getAnchorJustification(aa)];ea=0;for(var wa=[Z.leftJustifiedTextSymbolIndex,Z.centerJustifiedTextSymbolIndex,Z.rightJustifiedTextSymbolIndex,Z.verticalPlacedTextSymbolIndex];ea<wa.length;ea+=1){var Ga=wa[ea];0<=Ga&&(W.text.placedSymbolArray.get(Ga).crossTileID=
0<=aa&&Ga!==aa?0:Z.crossTileID)}};yc.prototype.markUsedOrientation=function(W,aa,Z){var ea=aa===a.WritingMode.horizontal||aa===a.WritingMode.horizontalOnly?aa:0;aa=aa===a.WritingMode.vertical?aa:0;for(var wa=0,Ga=[Z.leftJustifiedTextSymbolIndex,Z.centerJustifiedTextSymbolIndex,Z.rightJustifiedTextSymbolIndex];wa<Ga.length;wa+=1)W.text.placedSymbolArray.get(Ga[wa]).placedOrientation=ea;Z.verticalPlacedTextSymbolIndex&&(W.text.placedSymbolArray.get(Z.verticalPlacedTextSymbolIndex).placedOrientation=
aa)};yc.prototype.commit=function(W){this.commitTime=W;this.zoomAtLastRecencyCheck=this.transform.zoom;var aa=this.prevPlacement,Z=!1;this.prevZoomAdjustment=aa?aa.zoomAdjustment(this.transform.zoom):0;var ea=aa?aa.symbolFadeChange(W):1,wa=aa?aa.opacities:{},Ga=aa?aa.variableOffsets:{},Sa=aa?aa.placedOrientations:{};for(Ib in this.placements){var ab=this.placements[Ib],yb=wa[Ib];yb?(this.opacities[Ib]=new Qe(yb,ea,ab.text,ab.icon),Z=Z||ab.text!==yb.text.placed||ab.icon!==yb.icon.placed):(this.opacities[Ib]=
new Qe(null,ea,ab.text,ab.icon,ab.skipFade),Z=Z||ab.text||ab.icon)}for(var Hb in wa){var Ib=wa[Hb];this.opacities[Hb]||(ab=new Qe(Ib,ea,!1,!1),ab.isHidden()||(this.opacities[Hb]=ab,Z=Z||Ib.text.placed||Ib.icon.placed))}for(var nc in Ga)this.variableOffsets[nc]||!this.opacities[nc]||this.opacities[nc].isHidden()||(this.variableOffsets[nc]=Ga[nc]);for(var mc in Sa)this.placedOrientations[mc]||!this.opacities[mc]||this.opacities[mc].isHidden()||(this.placedOrientations[mc]=Sa[mc]);Z?this.lastPlacementChangeTime=
W:"number"!=typeof this.lastPlacementChangeTime&&(this.lastPlacementChangeTime=aa?aa.lastPlacementChangeTime:W)};yc.prototype.updateLayerOpacities=function(W,aa){for(var Z={},ea=0;ea<aa.length;ea+=1){var wa=aa[ea],Ga=wa.getBucket(W);Ga&&wa.latestFeatureIndex&&W.id===Ga.layerIds[0]&&this.updateBucketOpacities(Ga,Z,wa.collisionBoxArray)}};yc.prototype.updateBucketOpacities=function(W,aa,Z){var ea=this;W.hasTextData()&&W.text.opacityVertexArray.clear();W.hasIconData()&&W.icon.opacityVertexArray.clear();
W.hasIconCollisionBoxData()&&W.iconCollisionBox.collisionVertexArray.clear();W.hasTextCollisionBoxData()&&W.textCollisionBox.collisionVertexArray.clear();var wa=W.layers[0].layout,Ga=new Qe(null,0,!1,!1,!0),Sa=wa.get("text-allow-overlap"),ab=wa.get("icon-allow-overlap"),yb=wa.get("text-variable-anchor"),Hb="map"===wa.get("text-rotation-alignment"),Ib="map"===wa.get("text-pitch-alignment"),nc="none"!==wa.get("icon-text-fit"),mc=new Qe(null,0,Sa&&(ab||!W.hasIconData()||wa.get("icon-optional")),ab&&
(Sa||!W.hasTextData()||wa.get("text-optional")),!0);!W.collisionArrays&&Z&&(W.hasIconCollisionBoxData()||W.hasTextCollisionBoxData())&&W.deserializeCollisionBoxes(Z);var cc=function(lc,kc,Gb){for(var dc=0;dc<kc/4;dc++)lc.opacityVertexArray.emplaceBack(Gb)};Z=function(lc){var kc=W.symbolInstances.get(lc),Gb=kc.numHorizontalGlyphVertices,dc=kc.numVerticalGlyphVertices,Dc=kc.crossTileID,Uc=ea.opacities[Dc];aa[Dc]?Uc=Ga:Uc||(ea.opacities[Dc]=Uc=mc);aa[Dc]=!0;var jd=0<kc.numIconVertices,Ic=ea.placedOrientations[kc.crossTileID],
ld=Ic===a.WritingMode.vertical,id=Ic===a.WritingMode.horizontal||Ic===a.WritingMode.horizontalOnly;if(0<Gb||0<dc){var yd=X(Uc.text);cc(W.text,Gb,ld?Tb:yd);cc(W.text,dc,id?Tb:yd);var zd=Uc.text.isHidden();[kc.rightJustifiedTextSymbolIndex,kc.centerJustifiedTextSymbolIndex,kc.leftJustifiedTextSymbolIndex].forEach(function(ud){0<=ud&&(W.text.placedSymbolArray.get(ud).hidden=zd||ld?1:0)});0<=kc.verticalPlacedTextSymbolIndex&&(W.text.placedSymbolArray.get(kc.verticalPlacedTextSymbolIndex).hidden=zd||id?
1:0);(Gb=ea.variableOffsets[kc.crossTileID])&&ea.markUsedJustification(W,Gb.anchor,kc,Ic);(Ic=ea.placedOrientations[kc.crossTileID])&&(ea.markUsedJustification(W,"left",kc,Ic),ea.markUsedOrientation(W,Ic,kc))}jd&&(jd=X(Uc.icon),Ic=!(nc&&kc.verticalPlacedIconSymbolIndex&&ld),0<=kc.placedIconSymbolIndex&&(cc(W.icon,kc.numIconVertices,Ic?jd:Tb),W.icon.placedSymbolArray.get(kc.placedIconSymbolIndex).hidden=Uc.icon.isHidden()),0<=kc.verticalPlacedIconSymbolIndex&&(cc(W.icon,kc.numVerticalIconVertices,
Ic?Tb:jd),W.icon.placedSymbolArray.get(kc.verticalPlacedIconSymbolIndex).hidden=Uc.icon.isHidden()));if(W.hasIconCollisionBoxData()||W.hasTextCollisionBoxData())if(lc=W.collisionArrays[lc]){kc=new a.Point(0,0);if(lc.textBox||lc.verticalTextBox)jd=!0,yb&&((Dc=ea.variableOffsets[Dc])?(kc=O(Dc.anchor,Dc.width,Dc.height,Dc.textOffset,Dc.textBoxScale),Hb&&kc._rotate(Ib?ea.transform.angle:-ea.transform.angle)):jd=!1),lc.textBox&&S(W.textCollisionBox.collisionVertexArray,Uc.text.placed,!jd||ld,kc.x,kc.y),
lc.verticalTextBox&&S(W.textCollisionBox.collisionVertexArray,Uc.text.placed,!jd||id,kc.x,kc.y);id=!(id||!lc.verticalIconBox);lc.iconBox&&S(W.iconCollisionBox.collisionVertexArray,Uc.icon.placed,id,nc?kc.x:0,nc?kc.y:0);lc.verticalIconBox&&S(W.iconCollisionBox.collisionVertexArray,Uc.icon.placed,!id,nc?kc.x:0,nc?kc.y:0)}};for(wa=0;wa<W.symbolInstances.length;wa++)Z(wa);if(W.sortFeatures(this.transform.angle),this.retainedQueryData[W.bucketInstanceId]&&(this.retainedQueryData[W.bucketInstanceId].featureSortOrder=
W.featureSortOrder),W.hasTextData()&&W.text.opacityVertexBuffer&&W.text.opacityVertexBuffer.updateData(W.text.opacityVertexArray),W.hasIconData()&&W.icon.opacityVertexBuffer&&W.icon.opacityVertexBuffer.updateData(W.icon.opacityVertexArray),W.hasIconCollisionBoxData()&&W.iconCollisionBox.collisionVertexBuffer&&W.iconCollisionBox.collisionVertexBuffer.updateData(W.iconCollisionBox.collisionVertexArray),W.hasTextCollisionBoxData()&&W.textCollisionBox.collisionVertexBuffer&&W.textCollisionBox.collisionVertexBuffer.updateData(W.textCollisionBox.collisionVertexArray),
W.bucketInstanceId in this.collisionCircleArrays)Z=this.collisionCircleArrays[W.bucketInstanceId],W.placementInvProjMatrix=Z.invProjMatrix,W.placementViewportMatrix=Z.viewportMatrix,W.collisionCircleArray=Z.circles,delete this.collisionCircleArrays[W.bucketInstanceId]};yc.prototype.symbolFadeChange=function(W){return 0===this.fadeDuration?1:(W-this.commitTime)/this.fadeDuration+this.prevZoomAdjustment};yc.prototype.zoomAdjustment=function(W){return Math.max(0,(this.transform.zoom-W)/1.5)};yc.prototype.hasTransitions=
function(W){return this.stale||W-this.lastPlacementChangeTime<this.fadeDuration};yc.prototype.stillRecent=function(W,aa){var Z=this.zoomAtLastRecencyCheck===aa?1-this.zoomAdjustment(aa):1;return this.zoomAtLastRecencyCheck=aa,this.commitTime+this.fadeDuration*Z>W};yc.prototype.setStale=function(){this.stale=!0};var kd=Math.pow(2,25),Od=Math.pow(2,24),Td=Math.pow(2,17),Ld=Math.pow(2,16),Jd=Math.pow(2,9),fe=Math.pow(2,8),pe=Math.pow(2,1),Tb=0,jc=function(W){this._sortAcrossTiles="viewport-y"!==W.layout.get("symbol-z-order")&&
void 0!==W.layout.get("symbol-sort-key").constantOr(1);this._currentPartIndex=this._currentTileIndex=0;this._seenCrossTileIDs={};this._bucketParts=[]};jc.prototype.continuePlacement=function(W,aa,Z,ea,wa){for(var Ga=this._bucketParts;this._currentTileIndex<W.length;)if(aa.getBucketParts(Ga,ea,W[this._currentTileIndex],this._sortAcrossTiles),this._currentTileIndex++,wa())return!0;for(this._sortAcrossTiles&&(this._sortAcrossTiles=!1,Ga.sort(function(Sa,ab){return Sa.sortKey-ab.sortKey}));this._currentPartIndex<
Ga.length;)if(aa.placeLayerBucketPart(Ga[this._currentPartIndex],this._seenCrossTileIDs,Z),this._currentPartIndex++,wa())return!0;return!1};var Hc=function(W,aa,Z,ea,wa,Ga,Sa){this.placement=new yc(W,wa,Ga,Sa);this._currentPlacementIndex=aa.length-1;this._forceFullPlacement=Z;this._showCollisionBoxes=ea;this._done=!1};Hc.prototype.isDone=function(){return this._done};Hc.prototype.continuePlacement=function(W,aa,Z){for(var ea=this,wa=a.browser.now(),Ga=function(){var yb=a.browser.now()-wa;return!ea._forceFullPlacement&&
2<yb};0<=this._currentPlacementIndex;){var Sa=aa[W[this._currentPlacementIndex]],ab=this.placement.collisionIndex.transform.zoom;if("symbol"===Sa.type&&(!Sa.minzoom||Sa.minzoom<=ab)&&(!Sa.maxzoom||Sa.maxzoom>ab)){if(this._inProgressLayer||(this._inProgressLayer=new jc(Sa)),this._inProgressLayer.continuePlacement(Z[Sa.source],this.placement,this._showCollisionBoxes,Sa,Ga))return;delete this._inProgressLayer}this._currentPlacementIndex--}this._done=!0};Hc.prototype.commit=function(W){return this.placement.commit(W),
this.placement};var Wc=512/a.EXTENT/2,Lc=function(W,aa,Z){this.tileID=W;this.indexedSymbolInstances={};this.bucketInstanceId=Z;for(Z=0;Z<aa.length;Z++){var ea=aa.get(Z),wa=ea.key;this.indexedSymbolInstances[wa]||(this.indexedSymbolInstances[wa]=[]);this.indexedSymbolInstances[wa].push({crossTileID:ea.crossTileID,coord:this.getScaledCoordinates(ea,W)})}};Lc.prototype.getScaledCoordinates=function(W,aa){var Z=Wc/Math.pow(2,aa.canonical.z-this.tileID.canonical.z);return{x:Math.floor((aa.canonical.x*
a.EXTENT+W.anchorX)*Z),y:Math.floor((aa.canonical.y*a.EXTENT+W.anchorY)*Z)}};Lc.prototype.findMatches=function(W,aa,Z){for(var ea=this.tileID.canonical.z<aa.canonical.z?1:Math.pow(2,this.tileID.canonical.z-aa.canonical.z),wa=0;wa<W.length;wa++){var Ga=W.get(wa);if(!Ga.crossTileID){var Sa=this.indexedSymbolInstances[Ga.key];if(Sa)for(var ab=this.getScaledCoordinates(Ga,aa),yb=0;yb<Sa.length;yb+=1){var Hb=Sa[yb];if(Math.abs(Hb.coord.x-ab.x)<=ea&&Math.abs(Hb.coord.y-ab.y)<=ea&&!Z[Hb.crossTileID]){Z[Hb.crossTileID]=
!0;Ga.crossTileID=Hb.crossTileID;break}}}}};var Mc=function(){this.maxCrossTileID=0};Mc.prototype.generate=function(){return++this.maxCrossTileID};var Pc=function(){this.indexes={};this.usedCrossTileIDs={};this.lng=0};Pc.prototype.handleWrapJump=function(W){var aa=Math.round((W-this.lng)/360);if(0!==aa)for(var Z in this.indexes){var ea=this.indexes[Z],wa={},Ga;for(Ga in ea){var Sa=ea[Ga];Sa.tileID=Sa.tileID.unwrapTo(Sa.tileID.wrap+aa);wa[Sa.tileID.key]=Sa}this.indexes[Z]=wa}this.lng=W};Pc.prototype.addBucket=
function(W,aa,Z){if(this.indexes[W.overscaledZ]&&this.indexes[W.overscaledZ][W.key]){if(this.indexes[W.overscaledZ][W.key].bucketInstanceId===aa.bucketInstanceId)return!1;this.removeBucketCrossTileIDs(W.overscaledZ,this.indexes[W.overscaledZ][W.key])}for(var ea=0;ea<aa.symbolInstances.length;ea++)aa.symbolInstances.get(ea).crossTileID=0;this.usedCrossTileIDs[W.overscaledZ]||(this.usedCrossTileIDs[W.overscaledZ]={});ea=this.usedCrossTileIDs[W.overscaledZ];for(var wa in this.indexes){var Ga=this.indexes[wa];
if(Number(wa)>W.overscaledZ)for(var Sa in Ga){var ab=Ga[Sa];ab.tileID.isChildOf(W)&&ab.findMatches(aa.symbolInstances,W,ea)}else(Ga=Ga[W.scaledTo(Number(wa)).key])&&Ga.findMatches(aa.symbolInstances,W,ea)}for(wa=0;wa<aa.symbolInstances.length;wa++)Sa=aa.symbolInstances.get(wa),Sa.crossTileID||(Sa.crossTileID=Z.generate(),ea[Sa.crossTileID]=!0);return void 0===this.indexes[W.overscaledZ]&&(this.indexes[W.overscaledZ]={}),this.indexes[W.overscaledZ][W.key]=new Lc(W,aa.symbolInstances,aa.bucketInstanceId),
!0};Pc.prototype.removeBucketCrossTileIDs=function(W,aa){for(var Z in aa.indexedSymbolInstances)for(var ea=0,wa=aa.indexedSymbolInstances[Z];ea<wa.length;ea+=1)delete this.usedCrossTileIDs[W][wa[ea].crossTileID]};Pc.prototype.removeStaleBuckets=function(W){var aa=!1,Z;for(Z in this.indexes){var ea=this.indexes[Z],wa;for(wa in ea)W[ea[wa].bucketInstanceId]||(this.removeBucketCrossTileIDs(Z,ea[wa]),delete ea[wa],aa=!0)}return aa};var Cc=function(){this.layerIndexes={};this.crossTileIDs=new Mc;this.maxBucketInstanceId=
0;this.bucketsInCurrentPlacement={}};Cc.prototype.addLayer=function(W,aa,Z){var ea=this.layerIndexes[W.id];void 0===ea&&(ea=this.layerIndexes[W.id]=new Pc);var wa=!1,Ga={};ea.handleWrapJump(Z);for(Z=0;Z<aa.length;Z+=1){var Sa=aa[Z],ab=Sa.getBucket(W);ab&&W.id===ab.layerIds[0]&&(ab.bucketInstanceId||(ab.bucketInstanceId=++this.maxBucketInstanceId),ea.addBucket(Sa.tileID,ab,this.crossTileIDs)&&(wa=!0),Ga[ab.bucketInstanceId]=!0)}return ea.removeStaleBuckets(Ga)&&(wa=!0),wa};Cc.prototype.pruneUnusedLayers=
function(W){var aa={},Z;for(Z in W.forEach(function(ea){aa[ea]=!0}),this.layerIndexes)aa[Z]||delete this.layerIndexes[Z]};var oc=function(W,aa){return a.emitValidationErrors(W,aa&&aa.filter(function(Z){return"source.canvas"!==Z.identifier}))},sc=a.pick(Dd,"addLayer removeLayer setPaintProperty setLayoutProperty setFilter addSource removeSource setLayerZoomRange setLight setTransition setGeoJSONSourceData".split(" ")),tc=a.pick(Dd,["setCenter","setZoom","setBearing","setPitch"]),hd=function(){var W=
{},aa=a.styleSpec.$version,Z;for(Z in a.styleSpec.$root){var ea,wa=a.styleSpec.$root[Z];wa.required&&null!=(ea="version"===Z?aa:"array"===wa.type?[]:{})&&(W[Z]=ea)}return W}(),qd=function(W){function aa(Z,ea){var wa=this;void 0===ea&&(ea={});W.call(this);this.map=Z;this.dispatcher=new qb((Kd||(Kd=new Je),Kd),this);this.imageManager=new Xa;this.imageManager.setEventedParent(this);this.glyphManager=new tb(Z._requestManager,ea.localIdeographFontFamily);this.lineAtlas=new ib(256,512);this.crossTileSymbolIndex=
new Cc;this._layers={};this._serializedLayers={};this._order=[];this.sourceCaches={};this.zoomHistory=new a.ZoomHistory;this._loaded=!1;this._availableImages=[];this._resetUpdates();this.dispatcher.broadcast("setReferrer",a.getReferrer());var Ga=this;this._rtlTextPluginCallback=aa.registerForPluginStateChange(function(Sa){Ga.dispatcher.broadcast("syncRTLPluginState",{pluginStatus:Sa.pluginStatus,pluginURL:Sa.pluginURL},function(ab,yb){if(a.triggerPluginCompletionEvent(ab),yb&&yb.every(function(Ib){return Ib}))for(var Hb in Ga.sourceCaches)Ga.sourceCaches[Hb].reload()})});
this.on("data",function(Sa){if("source"===Sa.dataType&&"metadata"===Sa.sourceDataType&&(Sa=wa.sourceCaches[Sa.sourceId])&&(Sa=Sa.getSource())&&Sa.vectorLayerIds)for(var ab in wa._layers){var yb=wa._layers[ab];yb.source===Sa.id&&wa._validateLayer(yb)}})}return W&&(aa.__proto__=W),(aa.prototype=Object.create(W&&W.prototype)).constructor=aa,aa.prototype.loadURL=function(Z,ea){var wa=this;void 0===ea&&(ea={});this.fire(new a.Event("dataloading",{dataType:"style"}));var Ga="boolean"==typeof ea.validate?
ea.validate:!a.isMapboxURL(Z);Z=this.map._requestManager.normalizeStyleURL(Z,ea.accessToken);Z=this.map._requestManager.transformRequest(Z,a.ResourceType.Style);this._request=a.getJSON(Z,function(Sa,ab){wa._request=null;Sa?wa.fire(new a.ErrorEvent(Sa)):ab&&wa._load(ab,Ga)})},aa.prototype.loadJSON=function(Z,ea){var wa=this;void 0===ea&&(ea={});this.fire(new a.Event("dataloading",{dataType:"style"}));this._request=a.browser.frame(function(){wa._request=null;wa._load(Z,!1!==ea.validate)})},aa.prototype.loadEmpty=
function(){this.fire(new a.Event("dataloading",{dataType:"style"}));this._load(hd,!1)},aa.prototype._load=function(Z,ea){if(!ea||!oc(this,a.validateStyle(Z))){for(var wa in this._loaded=!0,this.stylesheet=Z,Z.sources)this.addSource(wa,Z.sources[wa],{validate:!1});Z.sprite?this._loadSprite(Z.sprite):this.imageManager.setLoaded(!0);this.glyphManager.setURL(Z.glyphs);Z=B(this.stylesheet.layers);this._order=Z.map(function(Ga){return Ga.id});this._layers={};this._serializedLayers={};for(ea=0;ea<Z.length;ea+=
1)wa=Z[ea],(wa=a.createStyleLayer(wa)).setEventedParent(this,{layer:{id:wa.id}}),this._layers[wa.id]=wa,this._serializedLayers[wa.id]=wa.serialize();this.dispatcher.broadcast("setLayers",this._serializeLayers(this._order));this.light=new Na(this.stylesheet.light);this.fire(new a.Event("data",{dataType:"style"}));this.fire(new a.Event("style.load"))}},aa.prototype._loadSprite=function(Z){var ea=this;this._spriteRequest=function(wa,Ga,Sa){function ab(){if(Ib)Sa(Ib);else if(yb&&Hb){var lc=a.browser.getImageData(Hb),
kc={},Gb;for(Gb in yb){var dc=yb[Gb],Dc=dc.width,Uc=dc.height,jd=dc.x,Ic=dc.y,ld=dc.sdf,id=dc.pixelRatio,yd=dc.stretchX,zd=dc.stretchY;dc=dc.content;var ud=new a.RGBAImage({width:Dc,height:Uc});a.RGBAImage.copy(lc,ud,{x:jd,y:Ic},{x:0,y:0},{width:Dc,height:Uc});kc[Gb]={data:ud,pixelRatio:id,sdf:ld,stretchX:yd,stretchY:zd,content:dc}}Sa(null,kc)}}var yb,Hb,Ib,nc=1<a.browser.devicePixelRatio?"@2x":"",mc=a.getJSON(Ga.transformRequest(Ga.normalizeSpriteURL(wa,nc,".json"),a.ResourceType.SpriteJSON),function(lc,
kc){mc=null;Ib||(Ib=lc,yb=kc,ab())}),cc=a.getImage(Ga.transformRequest(Ga.normalizeSpriteURL(wa,nc,".png"),a.ResourceType.SpriteImage),function(lc,kc){cc=null;Ib||(Ib=lc,Hb=kc,ab())});return{cancel:function(){mc&&(mc.cancel(),mc=null);cc&&(cc.cancel(),cc=null)}}}(Z,this.map._requestManager,function(wa,Ga){if(ea._spriteRequest=null,wa)ea.fire(new a.ErrorEvent(wa));else if(Ga)for(var Sa in Ga)ea.imageManager.addImage(Sa,Ga[Sa]);ea.imageManager.setLoaded(!0);ea._availableImages=ea.imageManager.listImages();
ea.dispatcher.broadcast("setImages",ea._availableImages);ea.fire(new a.Event("data",{dataType:"style"}))})},aa.prototype._validateLayer=function(Z){var ea=this.sourceCaches[Z.source];if(ea){var wa=Z.sourceLayer;wa&&(ea=ea.getSource(),("geojson"===ea.type||ea.vectorLayerIds&&-1===ea.vectorLayerIds.indexOf(wa))&&this.fire(new a.ErrorEvent(Error('Source layer "'+wa+'" does not exist on source "'+ea.id+'" as specified by style layer "'+Z.id+'"'))))}},aa.prototype.loaded=function(){if(!this._loaded||Object.keys(this._updatedSources).length)return!1;
for(var Z in this.sourceCaches)if(!this.sourceCaches[Z].loaded())return!1;return!!this.imageManager.isLoaded()},aa.prototype._serializeLayers=function(Z){for(var ea=[],wa=0;wa<Z.length;wa+=1){var Ga=this._layers[Z[wa]];"custom"!==Ga.type&&ea.push(Ga.serialize())}return ea},aa.prototype.hasTransitions=function(){if(this.light&&this.light.hasTransition())return!0;for(var Z in this.sourceCaches)if(this.sourceCaches[Z].hasTransition())return!0;for(var ea in this._layers)if(this._layers[ea].hasTransition())return!0;
return!1},aa.prototype._checkLoaded=function(){if(!this._loaded)throw Error("Style is not done loading");},aa.prototype.update=function(Z){if(this._loaded){var ea=this._changed;if(this._changed){var wa=Object.keys(this._updatedLayers),Ga=Object.keys(this._removedLayers);for(yb in(wa.length||Ga.length)&&this._updateWorkerLayers(wa,Ga),this._updatedSources)wa=this._updatedSources[yb],"reload"===wa?this._reloadSource(yb):"clear"===wa&&this._clearSource(yb);for(var Sa in this._updateTilesForChangedImages(),
this._updatedPaintProps)this._layers[Sa].updateTransitions(Z);this.light.updateTransitions(Z);this._resetUpdates()}for(var ab in this.sourceCaches)this.sourceCaches[ab].used=!1;var yb=0;for(Sa=this._order;yb<Sa.length;yb+=1)ab=this._layers[Sa[yb]],ab.recalculate(Z,this._availableImages),!ab.isHidden(Z.zoom)&&ab.source&&(this.sourceCaches[ab.source].used=!0);this.light.recalculate(Z);this.z=Z.zoom;ea&&this.fire(new a.Event("data",{dataType:"style"}))}},aa.prototype._updateTilesForChangedImages=function(){var Z=
Object.keys(this._changedImages);if(Z.length){for(var ea in this.sourceCaches)this.sourceCaches[ea].reloadTilesForDependencies(["icons","patterns"],Z);this._changedImages={}}},aa.prototype._updateWorkerLayers=function(Z,ea){this.dispatcher.broadcast("updateLayers",{layers:this._serializeLayers(Z),removedIds:ea})},aa.prototype._resetUpdates=function(){this._changed=!1;this._updatedLayers={};this._removedLayers={};this._updatedSources={};this._updatedPaintProps={};this._changedImages={}},aa.prototype.setState=
function(Z){var ea=this;if(this._checkLoaded(),oc(this,a.validateStyle(Z)))return!1;(Z=a.clone$1(Z)).layers=B(Z.layers);var wa=function(Sa,ab){if(!Sa)return[{command:Dd.setStyle,args:[ab]}];var yb=[];try{if(!a.deepEqual(Sa.version,ab.version))return[{command:Dd.setStyle,args:[ab]}];a.deepEqual(Sa.center,ab.center)||yb.push({command:Dd.setCenter,args:[ab.center]});a.deepEqual(Sa.zoom,ab.zoom)||yb.push({command:Dd.setZoom,args:[ab.zoom]});a.deepEqual(Sa.bearing,ab.bearing)||yb.push({command:Dd.setBearing,
args:[ab.bearing]});a.deepEqual(Sa.pitch,ab.pitch)||yb.push({command:Dd.setPitch,args:[ab.pitch]});a.deepEqual(Sa.sprite,ab.sprite)||yb.push({command:Dd.setSprite,args:[ab.sprite]});a.deepEqual(Sa.glyphs,ab.glyphs)||yb.push({command:Dd.setGlyphs,args:[ab.glyphs]});a.deepEqual(Sa.transition,ab.transition)||yb.push({command:Dd.setTransition,args:[ab.transition]});a.deepEqual(Sa.light,ab.light)||yb.push({command:Dd.setLight,args:[ab.light]});var Hb={},Ib=[];!function(mc,cc,lc,kc){for(var Gb in cc=cc||
{},mc=mc||{})if(mc.hasOwnProperty(Gb)&&!cc.hasOwnProperty(Gb)){var dc=Gb,Dc=kc;lc.push({command:Dd.removeSource,args:[dc]});Dc[dc]=!0}for(Gb in cc)if(cc.hasOwnProperty(Gb))if(mc.hasOwnProperty(Gb)){if(!a.deepEqual(mc[Gb],cc[Gb])){if(dc="geojson"===mc[Gb].type&&"geojson"===cc[Gb].type)a:{dc=void 0;Dc=mc;var Uc=cc,jd=Gb;for(dc in Dc[jd])if(Dc[jd].hasOwnProperty(dc)&&"data"!==dc&&!a.deepEqual(Dc[jd][dc],Uc[jd][dc])){dc=!1;break a}for(dc in Uc[jd])if(Uc[jd].hasOwnProperty(dc)&&"data"!==dc&&!a.deepEqual(Dc[jd][dc],
Uc[jd][dc])){dc=!1;break a}dc=!0}if(dc)lc.push({command:Dd.setGeoJSONSourceData,args:[Gb,cc[Gb].data]});else{dc=Gb;Dc=cc;Uc=lc;jd=dc;var Ic=kc;Uc.push({command:Dd.removeSource,args:[jd]});Ic[jd]=!0;Uc.push({command:Dd.addSource,args:[dc,Dc[dc]]})}}}else lc.push({command:Dd.addSource,args:[Gb,cc[Gb]]})}(Sa.sources,ab.sources,Ib,Hb);var nc=[];Sa.layers&&Sa.layers.forEach(function(mc){Hb[mc.source]?yb.push({command:Dd.removeLayer,args:[mc.id]}):nc.push(mc)});yb=yb.concat(Ib);(function(mc,cc,lc){cc=cc||
[];var kc,Gb,dc,Dc,Uc;var jd=(mc=mc||[]).map(z);var Ic=cc.map(z);mc=mc.reduce(E,{});var ld=cc.reduce(E,{}),id=jd.slice(),yd=Object.create(null);for(kc=cc=0;cc<jd.length;cc++)ld.hasOwnProperty(Gb=jd[cc])?kc++:(lc.push({command:Dd.removeLayer,args:[Gb]}),id.splice(id.indexOf(Gb,kc),1));for(kc=cc=0;cc<Ic.length;cc++)id[id.length-1-cc]!==(Gb=Ic[Ic.length-1-cc])&&(mc.hasOwnProperty(Gb)?(lc.push({command:Dd.removeLayer,args:[Gb]}),id.splice(id.lastIndexOf(Gb,id.length-kc),1)):kc++,lc.push({command:Dd.addLayer,
args:[ld[Gb],id[id.length-cc]]}),id.splice(id.length-cc,0,Gb),yd[Gb]=!0);for(cc=0;cc<Ic.length;cc++)if(dc=mc[Gb=Ic[cc]],Dc=ld[Gb],!yd[Gb]&&!a.deepEqual(dc,Dc))if(a.deepEqual(dc.source,Dc.source)&&a.deepEqual(dc["source-layer"],Dc["source-layer"])&&a.deepEqual(dc.type,Dc.type)){for(Uc in A(dc.layout,Dc.layout,lc,Gb,null,Dd.setLayoutProperty),A(dc.paint,Dc.paint,lc,Gb,null,Dd.setPaintProperty),a.deepEqual(dc.filter,Dc.filter)||lc.push({command:Dd.setFilter,args:[Gb,Dc.filter]}),a.deepEqual(dc.minzoom,
Dc.minzoom)&&a.deepEqual(dc.maxzoom,Dc.maxzoom)||lc.push({command:Dd.setLayerZoomRange,args:[Gb,Dc.minzoom,Dc.maxzoom]}),dc)dc.hasOwnProperty(Uc)&&"layout"!==Uc&&"paint"!==Uc&&"filter"!==Uc&&"metadata"!==Uc&&"minzoom"!==Uc&&"maxzoom"!==Uc&&(0===Uc.indexOf("paint.")?A(dc[Uc],Dc[Uc],lc,Gb,Uc.slice(6),Dd.setPaintProperty):a.deepEqual(dc[Uc],Dc[Uc])||lc.push({command:Dd.setLayerProperty,args:[Gb,Uc,Dc[Uc]]}));for(Uc in Dc)Dc.hasOwnProperty(Uc)&&!dc.hasOwnProperty(Uc)&&"layout"!==Uc&&"paint"!==Uc&&"filter"!==
Uc&&"metadata"!==Uc&&"minzoom"!==Uc&&"maxzoom"!==Uc&&(0===Uc.indexOf("paint.")?A(dc[Uc],Dc[Uc],lc,Gb,Uc.slice(6),Dd.setPaintProperty):a.deepEqual(dc[Uc],Dc[Uc])||lc.push({command:Dd.setLayerProperty,args:[Gb,Uc,Dc[Uc]]}))}else lc.push({command:Dd.removeLayer,args:[Gb]}),jd=id[id.lastIndexOf(Gb)+1],lc.push({command:Dd.addLayer,args:[Dc,jd]})})(nc,ab.layers,yb)}catch(mc){console.warn("Unable to compute style diff:",mc),yb=[{command:Dd.setStyle,args:[ab]}]}return yb}(this.serialize(),Z).filter(function(Sa){return!(Sa.command in
tc)});if(0===wa.length)return!1;var Ga=wa.filter(function(Sa){return!(Sa.command in sc)});if(0<Ga.length)throw Error("Unimplemented: "+Ga.map(function(Sa){return Sa.command}).join(", ")+".");return wa.forEach(function(Sa){"setTransition"!==Sa.command&&ea[Sa.command].apply(ea,Sa.args)}),this.stylesheet=Z,!0},aa.prototype.addImage=function(Z,ea){if(this.getImage(Z))return this.fire(new a.ErrorEvent(Error("An image with this name already exists.")));this.imageManager.addImage(Z,ea);this._availableImages=
this.imageManager.listImages();this._changed=this._changedImages[Z]=!0;this.fire(new a.Event("data",{dataType:"style"}))},aa.prototype.updateImage=function(Z,ea){this.imageManager.updateImage(Z,ea)},aa.prototype.getImage=function(Z){return this.imageManager.getImage(Z)},aa.prototype.removeImage=function(Z){if(!this.getImage(Z))return this.fire(new a.ErrorEvent(Error("No image with this name exists.")));this.imageManager.removeImage(Z);this._availableImages=this.imageManager.listImages();this._changed=
this._changedImages[Z]=!0;this.fire(new a.Event("data",{dataType:"style"}))},aa.prototype.listImages=function(){return this._checkLoaded(),this.imageManager.listImages()},aa.prototype.addSource=function(Z,ea,wa){var Ga=this;if(void 0===wa&&(wa={}),this._checkLoaded(),void 0!==this.sourceCaches[Z])throw Error("There is already a source with this ID");if(!ea.type)throw Error("The type property must be defined, but the only the following properties were given: "+Object.keys(ea).join(", ")+".");if(!(0<=
["vector","raster","geojson","video","image"].indexOf(ea.type)&&this._validate(a.validateStyle.source,"sources."+Z,ea,null,wa))){this.map&&this.map._collectResourceTiming&&(ea.collectResourceTiming=!0);var Sa=this.sourceCaches[Z]=new Fe(Z,ea,this.dispatcher);Sa.style=this;Sa.setEventedParent(this,function(){return{isSourceLoaded:Ga.loaded(),source:Sa.serialize(),sourceId:Z}});Sa.onAdd(this.map);this._changed=!0}},aa.prototype.removeSource=function(Z){if(this._checkLoaded(),void 0===this.sourceCaches[Z])throw Error("There is no source with this ID");
for(var ea in this._layers)if(this._layers[ea].source===Z)return this.fire(new a.ErrorEvent(Error('Source "'+Z+'" cannot be removed while layer "'+ea+'" is using it.')));ea=this.sourceCaches[Z];delete this.sourceCaches[Z];delete this._updatedSources[Z];ea.fire(new a.Event("data",{sourceDataType:"metadata",dataType:"source",sourceId:Z}));ea.setEventedParent(null);ea.clearTiles();ea.onRemove&&ea.onRemove(this.map);this._changed=!0},aa.prototype.setGeoJSONSourceData=function(Z,ea){this._checkLoaded();
this.sourceCaches[Z].getSource().setData(ea);this._changed=!0},aa.prototype.getSource=function(Z){return this.sourceCaches[Z]&&this.sourceCaches[Z].getSource()},aa.prototype.addLayer=function(Z,ea,wa){void 0===wa&&(wa={});this._checkLoaded();var Ga=Z.id;if(this.getLayer(Ga))this.fire(new a.ErrorEvent(Error('Layer with id "'+Ga+'" already exists on this map')));else{if("custom"===Z.type){if(oc(this,a.validateCustomStyleLayer(Z)))return;Z=a.createStyleLayer(Z)}else{if("object"==typeof Z.source&&(this.addSource(Ga,
Z.source),Z=a.clone$1(Z),Z=a.extend(Z,{source:Ga})),this._validate(a.validateStyle.layer,"layers."+Ga,Z,{arrayIndex:-1},wa))return;Z=a.createStyleLayer(Z);this._validateLayer(Z);Z.setEventedParent(this,{layer:{id:Ga}});this._serializedLayers[Z.id]=Z.serialize()}wa=ea?this._order.indexOf(ea):this._order.length;if(ea&&-1===wa)this.fire(new a.ErrorEvent(Error('Layer with id "'+ea+'" does not exist on this map.')));else{if(this._order.splice(wa,0,Ga),this._layerOrderChanged=!0,this._layers[Ga]=Z,this._removedLayers[Ga]&&
Z.source&&"custom"!==Z.type)ea=this._removedLayers[Ga],delete this._removedLayers[Ga],ea.type!==Z.type?this._updatedSources[Z.source]="clear":(this._updatedSources[Z.source]="reload",this.sourceCaches[Z.source].pause());this._updateLayer(Z);Z.onAdd&&Z.onAdd(this.map)}}},aa.prototype.moveLayer=function(Z,ea){if(this._checkLoaded(),this._changed=!0,this._layers[Z]){if(Z!==ea){var wa=this._order.indexOf(Z);this._order.splice(wa,1);wa=ea?this._order.indexOf(ea):this._order.length;ea&&-1===wa?this.fire(new a.ErrorEvent(Error('Layer with id "'+
ea+'" does not exist on this map.'))):(this._order.splice(wa,0,Z),this._layerOrderChanged=!0)}}else this.fire(new a.ErrorEvent(Error("The layer '"+Z+"' does not exist in the map's style and cannot be moved.")))},aa.prototype.removeLayer=function(Z){this._checkLoaded();var ea=this._layers[Z];if(ea){ea.setEventedParent(null);var wa=this._order.indexOf(Z);this._order.splice(wa,1);this._changed=this._layerOrderChanged=!0;this._removedLayers[Z]=ea;delete this._layers[Z];delete this._serializedLayers[Z];
delete this._updatedLayers[Z];delete this._updatedPaintProps[Z];ea.onRemove&&ea.onRemove(this.map)}else this.fire(new a.ErrorEvent(Error("The layer '"+Z+"' does not exist in the map's style and cannot be removed.")))},aa.prototype.getLayer=function(Z){return this._layers[Z]},aa.prototype.hasLayer=function(Z){return Z in this._layers},aa.prototype.setLayerZoomRange=function(Z,ea,wa){this._checkLoaded();var Ga=this.getLayer(Z);Ga?Ga.minzoom===ea&&Ga.maxzoom===wa||(null!=ea&&(Ga.minzoom=ea),null!=wa&&
(Ga.maxzoom=wa),this._updateLayer(Ga)):this.fire(new a.ErrorEvent(Error("The layer '"+Z+"' does not exist in the map's style and cannot have zoom extent.")))},aa.prototype.setFilter=function(Z,ea,wa){void 0===wa&&(wa={});this._checkLoaded();var Ga=this.getLayer(Z);if(Ga){if(!a.deepEqual(Ga.filter,ea))return null==ea?(Ga.filter=void 0,void this._updateLayer(Ga)):void(this._validate(a.validateStyle.filter,"layers."+Ga.id+".filter",ea,null,wa)||(Ga.filter=a.clone$1(ea),this._updateLayer(Ga)))}else this.fire(new a.ErrorEvent(Error("The layer '"+
Z+"' does not exist in the map's style and cannot be filtered.")))},aa.prototype.getFilter=function(Z){return a.clone$1(this.getLayer(Z).filter)},aa.prototype.setLayoutProperty=function(Z,ea,wa,Ga){void 0===Ga&&(Ga={});this._checkLoaded();var Sa=this.getLayer(Z);Sa?a.deepEqual(Sa.getLayoutProperty(ea),wa)||(Sa.setLayoutProperty(ea,wa,Ga),this._updateLayer(Sa)):this.fire(new a.ErrorEvent(Error("The layer '"+Z+"' does not exist in the map's style and cannot be styled.")))},aa.prototype.getLayoutProperty=
function(Z,ea){var wa=this.getLayer(Z);if(wa)return wa.getLayoutProperty(ea);this.fire(new a.ErrorEvent(Error("The layer '"+Z+"' does not exist in the map's style.")))},aa.prototype.setPaintProperty=function(Z,ea,wa,Ga){void 0===Ga&&(Ga={});this._checkLoaded();var Sa=this.getLayer(Z);Sa?a.deepEqual(Sa.getPaintProperty(ea),wa)||(Sa.setPaintProperty(ea,wa,Ga)&&this._updateLayer(Sa),this._changed=!0,this._updatedPaintProps[Z]=!0):this.fire(new a.ErrorEvent(Error("The layer '"+Z+"' does not exist in the map's style and cannot be styled.")))},
aa.prototype.getPaintProperty=function(Z,ea){return this.getLayer(Z).getPaintProperty(ea)},aa.prototype.setFeatureState=function(Z,ea){this._checkLoaded();var wa=Z.source,Ga=Z.sourceLayer,Sa=this.sourceCaches[wa];void 0!==Sa?(wa=Sa.getSource().type,"geojson"===wa&&Ga?this.fire(new a.ErrorEvent(Error("GeoJSON sources cannot have a sourceLayer parameter."))):"vector"!==wa||Ga?(void 0===Z.id&&this.fire(new a.ErrorEvent(Error("The feature id parameter must be provided."))),Sa.setFeatureState(Ga,Z.id,
ea)):this.fire(new a.ErrorEvent(Error("The sourceLayer parameter must be provided for vector source types.")))):this.fire(new a.ErrorEvent(Error("The source '"+wa+"' does not exist in the map's style.")))},aa.prototype.removeFeatureState=function(Z,ea){this._checkLoaded();var wa=Z.source,Ga=this.sourceCaches[wa];if(void 0!==Ga){wa=Ga.getSource().type;var Sa="vector"===wa?Z.sourceLayer:void 0;"vector"!==wa||Sa?ea&&"string"!=typeof Z.id&&"number"!=typeof Z.id?this.fire(new a.ErrorEvent(Error("A feature id is requred to remove its specific state property."))):
Ga.removeFeatureState(Sa,Z.id,ea):this.fire(new a.ErrorEvent(Error("The sourceLayer parameter must be provided for vector source types.")))}else this.fire(new a.ErrorEvent(Error("The source '"+wa+"' does not exist in the map's style.")))},aa.prototype.getFeatureState=function(Z){this._checkLoaded();var ea=Z.source,wa=Z.sourceLayer,Ga=this.sourceCaches[ea];if(void 0!==Ga){if("vector"!==Ga.getSource().type||wa)return void 0===Z.id&&this.fire(new a.ErrorEvent(Error("The feature id parameter must be provided."))),
Ga.getFeatureState(wa,Z.id);this.fire(new a.ErrorEvent(Error("The sourceLayer parameter must be provided for vector source types.")))}else this.fire(new a.ErrorEvent(Error("The source '"+ea+"' does not exist in the map's style.")))},aa.prototype.getTransition=function(){return a.extend({duration:300,delay:0},this.stylesheet&&this.stylesheet.transition)},aa.prototype.serialize=function(){return a.filterObject({version:this.stylesheet.version,name:this.stylesheet.name,metadata:this.stylesheet.metadata,
light:this.stylesheet.light,center:this.stylesheet.center,zoom:this.stylesheet.zoom,bearing:this.stylesheet.bearing,pitch:this.stylesheet.pitch,sprite:this.stylesheet.sprite,glyphs:this.stylesheet.glyphs,transition:this.stylesheet.transition,sources:a.mapObject(this.sourceCaches,function(Z){return Z.serialize()}),layers:this._serializeLayers(this._order)},function(Z){return void 0!==Z})},aa.prototype._updateLayer=function(Z){this._updatedLayers[Z.id]=!0;Z.source&&!this._updatedSources[Z.source]&&
"raster"!==this.sourceCaches[Z.source].getSource().type&&(this._updatedSources[Z.source]="reload",this.sourceCaches[Z.source].pause());this._changed=!0},aa.prototype._flattenAndSortRenderedFeatures=function(Z){for(var ea={},wa=[],Ga=this._order.length-1;0<=Ga;Ga--){var Sa=this._order[Ga];if("fill-extrusion"===this._layers[Sa].type){ea[Sa]=Ga;for(var ab=0,yb=Z;ab<yb.length;ab+=1){var Hb=yb[ab][Sa];if(Hb)for(var Ib=0;Ib<Hb.length;Ib+=1)wa.push(Hb[Ib])}}}wa.sort(function(mc,cc){return cc.intersectionZ-
mc.intersectionZ});Ga=[];for(Sa=this._order.length-1;0<=Sa;Sa--)if(ab=this._order[Sa],"fill-extrusion"===this._layers[ab].type)for(ab=wa.length-1;0<=ab;ab--){yb=wa[ab].feature;if(ea[yb.layer.id]<Sa)break;Ga.push(yb);wa.pop()}else for(yb=0,Ib=Z;yb<Ib.length;yb+=1){var nc=Ib[yb][ab];if(nc)for(Hb=0;Hb<nc.length;Hb+=1)Ga.push(nc[Hb].feature)}return Ga},aa.prototype.queryRenderedFeatures=function(Z,ea,wa){ea&&ea.filter&&this._validate(a.validateStyle.filter,"queryRenderedFeatures.filter",ea.filter,null,
ea);var Ga={};if(ea&&ea.layers){if(!Array.isArray(ea.layers))return this.fire(new a.ErrorEvent(Error("parameters.layers must be an Array."))),[];for(var Sa=0,ab=ea.layers;Sa<ab.length;Sa+=1){var yb=ab[Sa],Hb=this._layers[yb];if(!Hb)return this.fire(new a.ErrorEvent(Error("The layer '"+yb+"' does not exist in the map's style and cannot be queried for features."))),[];Ga[Hb.source]=!0}}Sa=[];for(var Ib in ea.availableImages=this._availableImages,this.sourceCaches)ea.layers&&!Ga[Ib]||Sa.push(f(this.sourceCaches[Ib],
this._layers,this._serializedLayers,Z,ea,wa));return this.placement&&Sa.push(function(nc,mc,cc,lc,kc,Gb,dc){var Dc={},Uc=Gb.queryRenderedSymbols(lc);lc=[];Gb=0;for(var jd=Object.keys(Uc).map(Number);Gb<jd.length;Gb+=1)lc.push(dc[jd[Gb]]);lc.sort(k);dc=function(){var yd=ld[Ic],zd=yd.featureIndex.lookupSymbolFeatures(Uc[yd.bucketInstanceId],mc,yd.bucketIndex,yd.sourceLayerIndex,kc.filter,kc.layers,kc.availableImages,nc),ud;for(ud in zd){var ie=Dc[ud]=Dc[ud]||[],ge=zd[ud];ge.sort(function(Ge,Be){var Qd=
yd.featureSortOrder;return Qd?(Ge=Qd.indexOf(Ge.featureIndex),Qd.indexOf(Be.featureIndex)-Ge):Be.featureIndex-Ge.featureIndex});for(var Ee=0;Ee<ge.length;Ee+=1)ie.push(ge[Ee])}};for(var Ic=0,ld=lc;Ic<ld.length;Ic+=1)dc();dc=function(yd){Dc[yd].forEach(function(zd){zd=zd.feature;var ud=cc[nc[yd].source].getFeatureState(zd.layer["source-layer"],zd.id);zd.source=zd.layer.source;zd.layer["source-layer"]&&(zd.sourceLayer=zd.layer["source-layer"]);zd.state=ud})};for(var id in Dc)dc(id);return Dc}(this._layers,
this._serializedLayers,this.sourceCaches,Z,ea,this.placement.collisionIndex,this.placement.retainedQueryData)),this._flattenAndSortRenderedFeatures(Sa)},aa.prototype.querySourceFeatures=function(Z,ea){ea&&ea.filter&&this._validate(a.validateStyle.filter,"querySourceFeatures.filter",ea.filter,null,ea);return(Z=this.sourceCaches[Z])?function(wa,Ga){for(var Sa=wa.getRenderableIds().map(function(mc){return wa.getTileByID(mc)}),ab=[],yb={},Hb=0;Hb<Sa.length;Hb++){var Ib=Sa[Hb],nc=Ib.tileID.canonical.key;
yb[nc]||(yb[nc]=!0,Ib.querySourceFeatures(ab,Ga))}return ab}(Z,ea):[]},aa.prototype.addSourceType=function(Z,ea,wa){return aa.getSourceType(Z)?wa(Error('A source type called "'+Z+'" already exists.')):(aa.setSourceType(Z,ea),ea.workerSourceURL?void this.dispatcher.broadcast("loadWorkerSource",{name:Z,url:ea.workerSourceURL},wa):wa(null,null))},aa.prototype.getLight=function(){return this.light.getLight()},aa.prototype.setLight=function(Z,ea){void 0===ea&&(ea={});this._checkLoaded();var wa=this.light.getLight(),
Ga=!1,Sa;for(Sa in Z)if(!a.deepEqual(Z[Sa],wa[Sa])){Ga=!0;break}Ga&&(wa={now:a.browser.now(),transition:a.extend({duration:300,delay:0},this.stylesheet.transition)},this.light.setLight(Z,ea),this.light.updateTransitions(wa))},aa.prototype._validate=function(Z,ea,wa,Ga,Sa){return void 0===Sa&&(Sa={}),(!Sa||!1!==Sa.validate)&&oc(this,Z.call(a.validateStyle,a.extend({key:ea,style:this.serialize(),value:wa,styleSpec:a.styleSpec},Ga)))},aa.prototype._remove=function(){for(var Z in this._request&&(this._request.cancel(),
this._request=null),this._spriteRequest&&(this._spriteRequest.cancel(),this._spriteRequest=null),a.evented.off("pluginStateChange",this._rtlTextPluginCallback),this._layers)this._layers[Z].setEventedParent(null);for(var ea in this.sourceCaches)this.sourceCaches[ea].clearTiles(),this.sourceCaches[ea].setEventedParent(null);this.imageManager.setEventedParent(null);this.setEventedParent(null);this.dispatcher.remove()},aa.prototype._clearSource=function(Z){this.sourceCaches[Z].clearTiles()},aa.prototype._reloadSource=
function(Z){this.sourceCaches[Z].resume();this.sourceCaches[Z].reload()},aa.prototype._updateSources=function(Z){for(var ea in this.sourceCaches)this.sourceCaches[ea].update(Z)},aa.prototype._generateCollisionBoxes=function(){for(var Z in this.sourceCaches)this._reloadSource(Z)},aa.prototype._updatePlacement=function(Z,ea,wa,Ga,Sa){void 0===Sa&&(Sa=!1);for(var ab=!1,yb=!1,Hb={},Ib=0,nc=this._order;Ib<nc.length;Ib+=1){var mc=this._layers[nc[Ib]];if("symbol"===mc.type){if(!Hb[mc.source]){var cc=this.sourceCaches[mc.source];
Hb[mc.source]=cc.getRenderableIds(!0).map(function(lc){return cc.getTileByID(lc)}).sort(function(lc,kc){return kc.tileID.overscaledZ-lc.tileID.overscaledZ||(lc.tileID.isLessThan(kc.tileID)?-1:1)})}mc=this.crossTileSymbolIndex.addLayer(mc,Hb[mc.source],Z.center.lng);ab=ab||mc}}if(this.crossTileSymbolIndex.pruneUnusedLayers(this._order),((Sa=Sa||this._layerOrderChanged||0===wa)||!this.pauseablePlacement||this.pauseablePlacement.isDone()&&!this.placement.stillRecent(a.browser.now(),Z.zoom))&&(this.pauseablePlacement=
new Hc(Z,this._order,Sa,ea,wa,Ga,this.placement),this._layerOrderChanged=!1),this.pauseablePlacement.isDone()?this.placement.setStale():(this.pauseablePlacement.continuePlacement(this._order,this._layers,Hb),this.pauseablePlacement.isDone()&&(this.placement=this.pauseablePlacement.commit(a.browser.now()),yb=!0),ab&&this.pauseablePlacement.placement.setStale()),yb||ab)for(Z=0,ea=this._order;Z<ea.length;Z+=1)wa=this._layers[ea[Z]],"symbol"===wa.type&&this.placement.updateLayerOpacities(wa,Hb[wa.source]);
return!this.pauseablePlacement.isDone()||this.placement.hasTransitions(a.browser.now())},aa.prototype._releaseSymbolFadeTiles=function(){for(var Z in this.sourceCaches)this.sourceCaches[Z].releaseSymbolFadeTiles()},aa.prototype.getImages=function(Z,ea,wa){this.imageManager.getImages(ea.icons,wa);this._updateTilesForChangedImages();(Z=this.sourceCaches[ea.source])&&Z.setDependencies(ea.tileID.key,ea.type,ea.icons)},aa.prototype.getGlyphs=function(Z,ea,wa){this.glyphManager.getGlyphs(ea.stacks,wa)},
aa.prototype.getResource=function(Z,ea,wa){return a.makeRequest(ea,wa)},aa}(a.Evented);qd.getSourceType=function(W){return Kb[W]};qd.setSourceType=function(W,aa){Kb[W]=aa};qd.registerForPluginStateChange=a.registerForPluginStateChange;var td=a.createLayout([{name:"a_pos",type:"Int16",components:2}]),wd=ba("#ifdef GL_ES\nprecision mediump float;\n#else\n#if !defined(lowp)\n#define lowp\n#endif\n#if !defined(mediump)\n#define mediump\n#endif\n#if !defined(highp)\n#define highp\n#endif\n#endif","#ifdef GL_ES\nprecision highp float;\n#else\n#if !defined(lowp)\n#define lowp\n#endif\n#if !defined(mediump)\n#define mediump\n#endif\n#if !defined(highp)\n#define highp\n#endif\n#endif\nvec2 unpack_float(const float packedValue) {int packedIntValue\x3dint(packedValue);int v0\x3dpackedIntValue/256;return vec2(v0,packedIntValue-v0*256);}vec2 unpack_opacity(const float packedOpacity) {int intOpacity\x3dint(packedOpacity)/2;return vec2(float(intOpacity)/127.0,mod(packedOpacity,2.0));}vec4 decode_color(const vec2 encodedColor) {return vec4(unpack_float(encodedColor[0])/255.0,unpack_float(encodedColor[1])/255.0\n);}float unpack_mix_vec2(const vec2 packedValue,const float t) {return mix(packedValue[0],packedValue[1],t);}vec4 unpack_mix_color(const vec4 packedColors,const float t) {vec4 minColor\x3ddecode_color(vec2(packedColors[0],packedColors[1]));vec4 maxColor\x3ddecode_color(vec2(packedColors[2],packedColors[3]));return mix(minColor,maxColor,t);}vec2 get_pattern_pos(const vec2 pixel_coord_upper,const vec2 pixel_coord_lower,const vec2 pattern_size,const float tile_units_to_pixels,const vec2 pos) {vec2 offset\x3dmod(mod(mod(pixel_coord_upper,pattern_size)*256.0,pattern_size)*256.0+pixel_coord_lower,pattern_size);return (tile_units_to_pixels*pos+offset)/pattern_size;}"),
sd=ba("uniform vec4 u_color;uniform float u_opacity;void main() {gl_FragColor\x3du_color*u_opacity;\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor\x3dvec4(1.0);\n#endif\n}","attribute vec2 a_pos;uniform mat4 u_matrix;void main() {gl_Position\x3du_matrix*vec4(a_pos,0,1);}"),xe=ba("uniform vec2 u_pattern_tl_a;uniform vec2 u_pattern_br_a;uniform vec2 u_pattern_tl_b;uniform vec2 u_pattern_br_b;uniform vec2 u_texsize;uniform float u_mix;uniform float u_opacity;uniform sampler2D u_image;varying vec2 v_pos_a;varying vec2 v_pos_b;void main() {vec2 imagecoord\x3dmod(v_pos_a,1.0);vec2 pos\x3dmix(u_pattern_tl_a/u_texsize,u_pattern_br_a/u_texsize,imagecoord);vec4 color1\x3dtexture2D(u_image,pos);vec2 imagecoord_b\x3dmod(v_pos_b,1.0);vec2 pos2\x3dmix(u_pattern_tl_b/u_texsize,u_pattern_br_b/u_texsize,imagecoord_b);vec4 color2\x3dtexture2D(u_image,pos2);gl_FragColor\x3dmix(color1,color2,u_mix)*u_opacity;\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor\x3dvec4(1.0);\n#endif\n}",
"uniform mat4 u_matrix;uniform vec2 u_pattern_size_a;uniform vec2 u_pattern_size_b;uniform vec2 u_pixel_coord_upper;uniform vec2 u_pixel_coord_lower;uniform float u_scale_a;uniform float u_scale_b;uniform float u_tile_units_to_pixels;attribute vec2 a_pos;varying vec2 v_pos_a;varying vec2 v_pos_b;void main() {gl_Position\x3du_matrix*vec4(a_pos,0,1);v_pos_a\x3dget_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,u_scale_a*u_pattern_size_a,u_tile_units_to_pixels,a_pos);v_pos_b\x3dget_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,u_scale_b*u_pattern_size_b,u_tile_units_to_pixels,a_pos);}"),
ue=ba("varying vec3 v_data;\n#pragma mapbox: define highp vec4 color\n#pragma mapbox: define mediump float radius\n#pragma mapbox: define lowp float blur\n#pragma mapbox: define lowp float opacity\n#pragma mapbox: define highp vec4 stroke_color\n#pragma mapbox: define mediump float stroke_width\n#pragma mapbox: define lowp float stroke_opacity\nvoid main() {\n#pragma mapbox: initialize highp vec4 color\n#pragma mapbox: initialize mediump float radius\n#pragma mapbox: initialize lowp float blur\n#pragma mapbox: initialize lowp float opacity\n#pragma mapbox: initialize highp vec4 stroke_color\n#pragma mapbox: initialize mediump float stroke_width\n#pragma mapbox: initialize lowp float stroke_opacity\nvec2 extrude\x3dv_data.xy;float extrude_length\x3dlength(extrude);lowp float antialiasblur\x3dv_data.z;float antialiased_blur\x3d-max(blur,antialiasblur);float opacity_t\x3dsmoothstep(0.0,antialiased_blur,extrude_length-1.0);float color_t\x3dstroke_width \x3c 0.01 ? 0.0 : smoothstep(antialiased_blur,0.0,extrude_length-radius/(radius+stroke_width));gl_FragColor\x3dopacity_t*mix(color*opacity,stroke_color*stroke_opacity,color_t);\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor\x3dvec4(1.0);\n#endif\n}",
"uniform mat4 u_matrix;uniform bool u_scale_with_map;uniform bool u_pitch_with_map;uniform vec2 u_extrude_scale;uniform lowp float u_device_pixel_ratio;uniform highp float u_camera_to_center_distance;attribute vec2 a_pos;varying vec3 v_data;\n#pragma mapbox: define highp vec4 color\n#pragma mapbox: define mediump float radius\n#pragma mapbox: define lowp float blur\n#pragma mapbox: define lowp float opacity\n#pragma mapbox: define highp vec4 stroke_color\n#pragma mapbox: define mediump float stroke_width\n#pragma mapbox: define lowp float stroke_opacity\nvoid main(void) {\n#pragma mapbox: initialize highp vec4 color\n#pragma mapbox: initialize mediump float radius\n#pragma mapbox: initialize lowp float blur\n#pragma mapbox: initialize lowp float opacity\n#pragma mapbox: initialize highp vec4 stroke_color\n#pragma mapbox: initialize mediump float stroke_width\n#pragma mapbox: initialize lowp float stroke_opacity\nvec2 extrude\x3dvec2(mod(a_pos,2.0)*2.0-1.0);vec2 circle_center\x3dfloor(a_pos*0.5);if (u_pitch_with_map) {vec2 corner_position\x3dcircle_center;if (u_scale_with_map) {corner_position+\x3dextrude*(radius+stroke_width)*u_extrude_scale;} else {vec4 projected_center\x3du_matrix*vec4(circle_center,0,1);corner_position+\x3dextrude*(radius+stroke_width)*u_extrude_scale*(projected_center.w/u_camera_to_center_distance);}gl_Position\x3du_matrix*vec4(corner_position,0,1);} else {gl_Position\x3du_matrix*vec4(circle_center,0,1);if (u_scale_with_map) {gl_Position.xy+\x3dextrude*(radius+stroke_width)*u_extrude_scale*u_camera_to_center_distance;} else {gl_Position.xy+\x3dextrude*(radius+stroke_width)*u_extrude_scale*gl_Position.w;}}lowp float antialiasblur\x3d1.0/u_device_pixel_ratio/(radius+stroke_width);v_data\x3dvec3(extrude.x,extrude.y,antialiasblur);}"),
Le=ba("void main() {gl_FragColor\x3dvec4(1.0);}","attribute vec2 a_pos;uniform mat4 u_matrix;void main() {gl_Position\x3du_matrix*vec4(a_pos,0,1);}"),oe=ba("uniform highp float u_intensity;varying vec2 v_extrude;\n#pragma mapbox: define highp float weight\n#define GAUSS_COEF 0.3989422804014327\nvoid main() {\n#pragma mapbox: initialize highp float weight\nfloat d\x3d-0.5*3.0*3.0*dot(v_extrude,v_extrude);float val\x3dweight*u_intensity*GAUSS_COEF*exp(d);gl_FragColor\x3dvec4(val,1.0,1.0,1.0);\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor\x3dvec4(1.0);\n#endif\n}",
"uniform mat4 u_matrix;uniform float u_extrude_scale;uniform float u_opacity;uniform float u_intensity;attribute vec2 a_pos;varying vec2 v_extrude;\n#pragma mapbox: define highp float weight\n#pragma mapbox: define mediump float radius\nconst highp float ZERO\x3d1.0/255.0/16.0;\n#define GAUSS_COEF 0.3989422804014327\nvoid main(void) {\n#pragma mapbox: initialize highp float weight\n#pragma mapbox: initialize mediump float radius\nvec2 unscaled_extrude\x3dvec2(mod(a_pos,2.0)*2.0-1.0);float S\x3dsqrt(-2.0*log(ZERO/weight/u_intensity/GAUSS_COEF))/3.0;v_extrude\x3dS*unscaled_extrude;vec2 extrude\x3dv_extrude*radius*u_extrude_scale;vec4 pos\x3dvec4(floor(a_pos*0.5)+extrude,0,1);gl_Position\x3du_matrix*pos;}"),
Re=ba("uniform sampler2D u_image;uniform sampler2D u_color_ramp;uniform float u_opacity;varying vec2 v_pos;void main() {float t\x3dtexture2D(u_image,v_pos).r;vec4 color\x3dtexture2D(u_color_ramp,vec2(t,0.5));gl_FragColor\x3dcolor*u_opacity;\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor\x3dvec4(0.0);\n#endif\n}","uniform mat4 u_matrix;uniform vec2 u_world;attribute vec2 a_pos;varying vec2 v_pos;void main() {gl_Position\x3du_matrix*vec4(a_pos*u_world,0,1);v_pos.x\x3da_pos.x;v_pos.y\x3d1.0-a_pos.y;}"),Gf=
ba("varying float v_placed;varying float v_notUsed;void main() {float alpha\x3d0.5;gl_FragColor\x3dvec4(1.0,0.0,0.0,1.0)*alpha;if (v_placed \x3e 0.5) {gl_FragColor\x3dvec4(0.0,0.0,1.0,0.5)*alpha;}if (v_notUsed \x3e 0.5) {gl_FragColor*\x3d.1;}}","attribute vec2 a_pos;attribute vec2 a_anchor_pos;attribute vec2 a_extrude;attribute vec2 a_placed;attribute vec2 a_shift;uniform mat4 u_matrix;uniform vec2 u_extrude_scale;uniform float u_camera_to_center_distance;varying float v_placed;varying float v_notUsed;void main() {vec4 projectedPoint\x3du_matrix*vec4(a_anchor_pos,0,1);highp float camera_to_anchor_distance\x3dprojectedPoint.w;highp float collision_perspective_ratio\x3dclamp(0.5+0.5*(u_camera_to_center_distance/camera_to_anchor_distance),0.0,4.0);gl_Position\x3du_matrix*vec4(a_pos,0.0,1.0);gl_Position.xy+\x3d(a_extrude+a_shift)*u_extrude_scale*gl_Position.w*collision_perspective_ratio;v_placed\x3da_placed.x;v_notUsed\x3da_placed.y;}"),
Zg=ba("varying float v_radius;varying vec2 v_extrude;varying float v_perspective_ratio;varying float v_collision;void main() {float alpha\x3d0.5*min(v_perspective_ratio,1.0);float stroke_radius\x3d0.9*max(v_perspective_ratio,1.0);float distance_to_center\x3dlength(v_extrude);float distance_to_edge\x3dabs(distance_to_center-v_radius);float opacity_t\x3dsmoothstep(-stroke_radius,0.0,-distance_to_edge);vec4 color\x3dmix(vec4(0.0,0.0,1.0,0.5),vec4(1.0,0.0,0.0,1.0),v_collision);gl_FragColor\x3dcolor*alpha*opacity_t;}",
"attribute vec2 a_pos;attribute float a_radius;attribute vec2 a_flags;uniform mat4 u_matrix;uniform mat4 u_inv_matrix;uniform vec2 u_viewport_size;uniform float u_camera_to_center_distance;varying float v_radius;varying vec2 v_extrude;varying float v_perspective_ratio;varying float v_collision;vec3 toTilePosition(vec2 screenPos) {vec4 rayStart\x3du_inv_matrix*vec4(screenPos,-1.0,1.0);vec4 rayEnd  \x3du_inv_matrix*vec4(screenPos, 1.0,1.0);rayStart.xyz/\x3drayStart.w;rayEnd.xyz  /\x3drayEnd.w;highp float t\x3d(0.0-rayStart.z)/(rayEnd.z-rayStart.z);return mix(rayStart.xyz,rayEnd.xyz,t);}void main() {vec2 quadCenterPos\x3da_pos;float radius\x3da_radius;float collision\x3da_flags.x;float vertexIdx\x3da_flags.y;vec2 quadVertexOffset\x3dvec2(mix(-1.0,1.0,float(vertexIdx \x3e\x3d2.0)),mix(-1.0,1.0,float(vertexIdx \x3e\x3d1.0 \x26\x26 vertexIdx \x3c\x3d2.0)));vec2 quadVertexExtent\x3dquadVertexOffset*radius;vec3 tilePos\x3dtoTilePosition(quadCenterPos);vec4 clipPos\x3du_matrix*vec4(tilePos,1.0);highp float camera_to_anchor_distance\x3dclipPos.w;highp float collision_perspective_ratio\x3dclamp(0.5+0.5*(u_camera_to_center_distance/camera_to_anchor_distance),0.0,4.0);float padding_factor\x3d1.2;v_radius\x3dradius;v_extrude\x3dquadVertexExtent*padding_factor;v_perspective_ratio\x3dcollision_perspective_ratio;v_collision\x3dcollision;gl_Position\x3dvec4(clipPos.xyz/clipPos.w,1.0)+vec4(quadVertexExtent*padding_factor/u_viewport_size*2.0,0.0,0.0);}"),
th=ba("uniform highp vec4 u_color;uniform sampler2D u_overlay;varying vec2 v_uv;void main() {vec4 overlay_color\x3dtexture2D(u_overlay,v_uv);gl_FragColor\x3dmix(u_color,overlay_color,overlay_color.a);}","attribute vec2 a_pos;varying vec2 v_uv;uniform mat4 u_matrix;uniform float u_overlay_scale;void main() {v_uv\x3da_pos/8192.0;gl_Position\x3du_matrix*vec4(a_pos*u_overlay_scale,0,1);}"),Fj=ba("#pragma mapbox: define highp vec4 color\n#pragma mapbox: define lowp float opacity\nvoid main() {\n#pragma mapbox: initialize highp vec4 color\n#pragma mapbox: initialize lowp float opacity\ngl_FragColor\x3dcolor*opacity;\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor\x3dvec4(1.0);\n#endif\n}",
"attribute vec2 a_pos;uniform mat4 u_matrix;\n#pragma mapbox: define highp vec4 color\n#pragma mapbox: define lowp float opacity\nvoid main() {\n#pragma mapbox: initialize highp vec4 color\n#pragma mapbox: initialize lowp float opacity\ngl_Position\x3du_matrix*vec4(a_pos,0,1);}"),ij=ba("varying vec2 v_pos;\n#pragma mapbox: define highp vec4 outline_color\n#pragma mapbox: define lowp float opacity\nvoid main() {\n#pragma mapbox: initialize highp vec4 outline_color\n#pragma mapbox: initialize lowp float opacity\nfloat dist\x3dlength(v_pos-gl_FragCoord.xy);float alpha\x3d1.0-smoothstep(0.0,1.0,dist);gl_FragColor\x3doutline_color*(alpha*opacity);\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor\x3dvec4(1.0);\n#endif\n}",
"attribute vec2 a_pos;uniform mat4 u_matrix;uniform vec2 u_world;varying vec2 v_pos;\n#pragma mapbox: define highp vec4 outline_color\n#pragma mapbox: define lowp float opacity\nvoid main() {\n#pragma mapbox: initialize highp vec4 outline_color\n#pragma mapbox: initialize lowp float opacity\ngl_Position\x3du_matrix*vec4(a_pos,0,1);v_pos\x3d(gl_Position.xy/gl_Position.w+1.0)/2.0*u_world;}"),hh=ba("uniform vec2 u_texsize;uniform sampler2D u_image;uniform float u_fade;varying vec2 v_pos_a;varying vec2 v_pos_b;varying vec2 v_pos;\n#pragma mapbox: define lowp float opacity\n#pragma mapbox: define lowp vec4 pattern_from\n#pragma mapbox: define lowp vec4 pattern_to\nvoid main() {\n#pragma mapbox: initialize lowp float opacity\n#pragma mapbox: initialize mediump vec4 pattern_from\n#pragma mapbox: initialize mediump vec4 pattern_to\nvec2 pattern_tl_a\x3dpattern_from.xy;vec2 pattern_br_a\x3dpattern_from.zw;vec2 pattern_tl_b\x3dpattern_to.xy;vec2 pattern_br_b\x3dpattern_to.zw;vec2 imagecoord\x3dmod(v_pos_a,1.0);vec2 pos\x3dmix(pattern_tl_a/u_texsize,pattern_br_a/u_texsize,imagecoord);vec4 color1\x3dtexture2D(u_image,pos);vec2 imagecoord_b\x3dmod(v_pos_b,1.0);vec2 pos2\x3dmix(pattern_tl_b/u_texsize,pattern_br_b/u_texsize,imagecoord_b);vec4 color2\x3dtexture2D(u_image,pos2);float dist\x3dlength(v_pos-gl_FragCoord.xy);float alpha\x3d1.0-smoothstep(0.0,1.0,dist);gl_FragColor\x3dmix(color1,color2,u_fade)*alpha*opacity;\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor\x3dvec4(1.0);\n#endif\n}",
"uniform mat4 u_matrix;uniform vec2 u_world;uniform vec2 u_pixel_coord_upper;uniform vec2 u_pixel_coord_lower;uniform vec3 u_scale;attribute vec2 a_pos;varying vec2 v_pos_a;varying vec2 v_pos_b;varying vec2 v_pos;\n#pragma mapbox: define lowp float opacity\n#pragma mapbox: define lowp vec4 pattern_from\n#pragma mapbox: define lowp vec4 pattern_to\n#pragma mapbox: define lowp float pixel_ratio_from\n#pragma mapbox: define lowp float pixel_ratio_to\nvoid main() {\n#pragma mapbox: initialize lowp float opacity\n#pragma mapbox: initialize mediump vec4 pattern_from\n#pragma mapbox: initialize mediump vec4 pattern_to\n#pragma mapbox: initialize lowp float pixel_ratio_from\n#pragma mapbox: initialize lowp float pixel_ratio_to\nvec2 pattern_tl_a\x3dpattern_from.xy;vec2 pattern_br_a\x3dpattern_from.zw;vec2 pattern_tl_b\x3dpattern_to.xy;vec2 pattern_br_b\x3dpattern_to.zw;float tileRatio\x3du_scale.x;float fromScale\x3du_scale.y;float toScale\x3du_scale.z;gl_Position\x3du_matrix*vec4(a_pos,0,1);vec2 display_size_a\x3d(pattern_br_a-pattern_tl_a)/pixel_ratio_from;vec2 display_size_b\x3d(pattern_br_b-pattern_tl_b)/pixel_ratio_to;v_pos_a\x3dget_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,fromScale*display_size_a,tileRatio,a_pos);v_pos_b\x3dget_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,toScale*display_size_b,tileRatio,a_pos);v_pos\x3d(gl_Position.xy/gl_Position.w+1.0)/2.0*u_world;}"),
Gj=ba("uniform vec2 u_texsize;uniform float u_fade;uniform sampler2D u_image;varying vec2 v_pos_a;varying vec2 v_pos_b;\n#pragma mapbox: define lowp float opacity\n#pragma mapbox: define lowp vec4 pattern_from\n#pragma mapbox: define lowp vec4 pattern_to\nvoid main() {\n#pragma mapbox: initialize lowp float opacity\n#pragma mapbox: initialize mediump vec4 pattern_from\n#pragma mapbox: initialize mediump vec4 pattern_to\nvec2 pattern_tl_a\x3dpattern_from.xy;vec2 pattern_br_a\x3dpattern_from.zw;vec2 pattern_tl_b\x3dpattern_to.xy;vec2 pattern_br_b\x3dpattern_to.zw;vec2 imagecoord\x3dmod(v_pos_a,1.0);vec2 pos\x3dmix(pattern_tl_a/u_texsize,pattern_br_a/u_texsize,imagecoord);vec4 color1\x3dtexture2D(u_image,pos);vec2 imagecoord_b\x3dmod(v_pos_b,1.0);vec2 pos2\x3dmix(pattern_tl_b/u_texsize,pattern_br_b/u_texsize,imagecoord_b);vec4 color2\x3dtexture2D(u_image,pos2);gl_FragColor\x3dmix(color1,color2,u_fade)*opacity;\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor\x3dvec4(1.0);\n#endif\n}",
"uniform mat4 u_matrix;uniform vec2 u_pixel_coord_upper;uniform vec2 u_pixel_coord_lower;uniform vec3 u_scale;attribute vec2 a_pos;varying vec2 v_pos_a;varying vec2 v_pos_b;\n#pragma mapbox: define lowp float opacity\n#pragma mapbox: define lowp vec4 pattern_from\n#pragma mapbox: define lowp vec4 pattern_to\n#pragma mapbox: define lowp float pixel_ratio_from\n#pragma mapbox: define lowp float pixel_ratio_to\nvoid main() {\n#pragma mapbox: initialize lowp float opacity\n#pragma mapbox: initialize mediump vec4 pattern_from\n#pragma mapbox: initialize mediump vec4 pattern_to\n#pragma mapbox: initialize lowp float pixel_ratio_from\n#pragma mapbox: initialize lowp float pixel_ratio_to\nvec2 pattern_tl_a\x3dpattern_from.xy;vec2 pattern_br_a\x3dpattern_from.zw;vec2 pattern_tl_b\x3dpattern_to.xy;vec2 pattern_br_b\x3dpattern_to.zw;float tileZoomRatio\x3du_scale.x;float fromScale\x3du_scale.y;float toScale\x3du_scale.z;vec2 display_size_a\x3d(pattern_br_a-pattern_tl_a)/pixel_ratio_from;vec2 display_size_b\x3d(pattern_br_b-pattern_tl_b)/pixel_ratio_to;gl_Position\x3du_matrix*vec4(a_pos,0,1);v_pos_a\x3dget_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,fromScale*display_size_a,tileZoomRatio,a_pos);v_pos_b\x3dget_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,toScale*display_size_b,tileZoomRatio,a_pos);}"),
cg=ba("varying vec4 v_color;void main() {gl_FragColor\x3dv_color;\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor\x3dvec4(1.0);\n#endif\n}","uniform mat4 u_matrix;uniform vec3 u_lightcolor;uniform lowp vec3 u_lightpos;uniform lowp float u_lightintensity;uniform float u_vertical_gradient;uniform lowp float u_opacity;attribute vec2 a_pos;attribute vec4 a_normal_ed;varying vec4 v_color;\n#pragma mapbox: define highp float base\n#pragma mapbox: define highp float height\n#pragma mapbox: define highp vec4 color\nvoid main() {\n#pragma mapbox: initialize highp float base\n#pragma mapbox: initialize highp float height\n#pragma mapbox: initialize highp vec4 color\nvec3 normal\x3da_normal_ed.xyz;base\x3dmax(0.0,base);height\x3dmax(0.0,height);float t\x3dmod(normal.x,2.0);gl_Position\x3du_matrix*vec4(a_pos,t \x3e 0.0 ? height : base,1);float colorvalue\x3dcolor.r*0.2126+color.g*0.7152+color.b*0.0722;v_color\x3dvec4(0.0,0.0,0.0,1.0);vec4 ambientlight\x3dvec4(0.03,0.03,0.03,1.0);color+\x3dambientlight;float directional\x3dclamp(dot(normal/16384.0,u_lightpos),0.0,1.0);directional\x3dmix((1.0-u_lightintensity),max((1.0-colorvalue+u_lightintensity),1.0),directional);if (normal.y !\x3d0.0) {directional*\x3d((1.0-u_vertical_gradient)+(u_vertical_gradient*clamp((t+base)*pow(height/150.0,0.5),mix(0.7,0.98,1.0-u_lightintensity),1.0)));}v_color.r+\x3dclamp(color.r*directional*u_lightcolor.r,mix(0.0,0.3,1.0-u_lightcolor.r),1.0);v_color.g+\x3dclamp(color.g*directional*u_lightcolor.g,mix(0.0,0.3,1.0-u_lightcolor.g),1.0);v_color.b+\x3dclamp(color.b*directional*u_lightcolor.b,mix(0.0,0.3,1.0-u_lightcolor.b),1.0);v_color*\x3du_opacity;}"),
Hj=ba("uniform vec2 u_texsize;uniform float u_fade;uniform sampler2D u_image;varying vec2 v_pos_a;varying vec2 v_pos_b;varying vec4 v_lighting;\n#pragma mapbox: define lowp float base\n#pragma mapbox: define lowp float height\n#pragma mapbox: define lowp vec4 pattern_from\n#pragma mapbox: define lowp vec4 pattern_to\n#pragma mapbox: define lowp float pixel_ratio_from\n#pragma mapbox: define lowp float pixel_ratio_to\nvoid main() {\n#pragma mapbox: initialize lowp float base\n#pragma mapbox: initialize lowp float height\n#pragma mapbox: initialize mediump vec4 pattern_from\n#pragma mapbox: initialize mediump vec4 pattern_to\n#pragma mapbox: initialize lowp float pixel_ratio_from\n#pragma mapbox: initialize lowp float pixel_ratio_to\nvec2 pattern_tl_a\x3dpattern_from.xy;vec2 pattern_br_a\x3dpattern_from.zw;vec2 pattern_tl_b\x3dpattern_to.xy;vec2 pattern_br_b\x3dpattern_to.zw;vec2 imagecoord\x3dmod(v_pos_a,1.0);vec2 pos\x3dmix(pattern_tl_a/u_texsize,pattern_br_a/u_texsize,imagecoord);vec4 color1\x3dtexture2D(u_image,pos);vec2 imagecoord_b\x3dmod(v_pos_b,1.0);vec2 pos2\x3dmix(pattern_tl_b/u_texsize,pattern_br_b/u_texsize,imagecoord_b);vec4 color2\x3dtexture2D(u_image,pos2);vec4 mixedColor\x3dmix(color1,color2,u_fade);gl_FragColor\x3dmixedColor*v_lighting;\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor\x3dvec4(1.0);\n#endif\n}",
"uniform mat4 u_matrix;uniform vec2 u_pixel_coord_upper;uniform vec2 u_pixel_coord_lower;uniform float u_height_factor;uniform vec3 u_scale;uniform float u_vertical_gradient;uniform lowp float u_opacity;uniform vec3 u_lightcolor;uniform lowp vec3 u_lightpos;uniform lowp float u_lightintensity;attribute vec2 a_pos;attribute vec4 a_normal_ed;varying vec2 v_pos_a;varying vec2 v_pos_b;varying vec4 v_lighting;\n#pragma mapbox: define lowp float base\n#pragma mapbox: define lowp float height\n#pragma mapbox: define lowp vec4 pattern_from\n#pragma mapbox: define lowp vec4 pattern_to\n#pragma mapbox: define lowp float pixel_ratio_from\n#pragma mapbox: define lowp float pixel_ratio_to\nvoid main() {\n#pragma mapbox: initialize lowp float base\n#pragma mapbox: initialize lowp float height\n#pragma mapbox: initialize mediump vec4 pattern_from\n#pragma mapbox: initialize mediump vec4 pattern_to\n#pragma mapbox: initialize lowp float pixel_ratio_from\n#pragma mapbox: initialize lowp float pixel_ratio_to\nvec2 pattern_tl_a\x3dpattern_from.xy;vec2 pattern_br_a\x3dpattern_from.zw;vec2 pattern_tl_b\x3dpattern_to.xy;vec2 pattern_br_b\x3dpattern_to.zw;float tileRatio\x3du_scale.x;float fromScale\x3du_scale.y;float toScale\x3du_scale.z;vec3 normal\x3da_normal_ed.xyz;float edgedistance\x3da_normal_ed.w;vec2 display_size_a\x3d(pattern_br_a-pattern_tl_a)/pixel_ratio_from;vec2 display_size_b\x3d(pattern_br_b-pattern_tl_b)/pixel_ratio_to;base\x3dmax(0.0,base);height\x3dmax(0.0,height);float t\x3dmod(normal.x,2.0);float z\x3dt \x3e 0.0 ? height : base;gl_Position\x3du_matrix*vec4(a_pos,z,1);vec2 pos\x3dnormal.x\x3d\x3d1.0 \x26\x26 normal.y\x3d\x3d0.0 \x26\x26 normal.z\x3d\x3d16384.0\n? a_pos\n: vec2(edgedistance,z*u_height_factor);v_pos_a\x3dget_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,fromScale*display_size_a,tileRatio,pos);v_pos_b\x3dget_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,toScale*display_size_b,tileRatio,pos);v_lighting\x3dvec4(0.0,0.0,0.0,1.0);float directional\x3dclamp(dot(normal/16383.0,u_lightpos),0.0,1.0);directional\x3dmix((1.0-u_lightintensity),max((0.5+u_lightintensity),1.0),directional);if (normal.y !\x3d0.0) {directional*\x3d((1.0-u_vertical_gradient)+(u_vertical_gradient*clamp((t+base)*pow(height/150.0,0.5),mix(0.7,0.98,1.0-u_lightintensity),1.0)));}v_lighting.rgb+\x3dclamp(directional*u_lightcolor,mix(vec3(0.0),vec3(0.3),1.0-u_lightcolor),vec3(1.0));v_lighting*\x3du_opacity;}"),
pi=ba("#ifdef GL_ES\nprecision highp float;\n#endif\nuniform sampler2D u_image;varying vec2 v_pos;uniform vec2 u_dimension;uniform float u_zoom;uniform float u_maxzoom;uniform vec4 u_unpack;float getElevation(vec2 coord,float bias) {vec4 data\x3dtexture2D(u_image,coord)*255.0;data.a\x3d-1.0;return dot(data,u_unpack)/4.0;}void main() {vec2 epsilon\x3d1.0/u_dimension;float a\x3dgetElevation(v_pos+vec2(-epsilon.x,-epsilon.y),0.0);float b\x3dgetElevation(v_pos+vec2(0,-epsilon.y),0.0);float c\x3dgetElevation(v_pos+vec2(epsilon.x,-epsilon.y),0.0);float d\x3dgetElevation(v_pos+vec2(-epsilon.x,0),0.0);float e\x3dgetElevation(v_pos,0.0);float f\x3dgetElevation(v_pos+vec2(epsilon.x,0),0.0);float g\x3dgetElevation(v_pos+vec2(-epsilon.x,epsilon.y),0.0);float h\x3dgetElevation(v_pos+vec2(0,epsilon.y),0.0);float i\x3dgetElevation(v_pos+vec2(epsilon.x,epsilon.y),0.0);float exaggeration\x3du_zoom \x3c 2.0 ? 0.4 : u_zoom \x3c 4.5 ? 0.35 : 0.3;vec2 deriv\x3dvec2((c+f+f+i)-(a+d+d+g),(g+h+h+i)-(a+b+b+c))/ pow(2.0,(u_zoom-u_maxzoom)*exaggeration+19.2562-u_zoom);gl_FragColor\x3dclamp(vec4(deriv.x/2.0+0.5,deriv.y/2.0+0.5,1.0,1.0),0.0,1.0);\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor\x3dvec4(1.0);\n#endif\n}",
"uniform mat4 u_matrix;uniform vec2 u_dimension;attribute vec2 a_pos;attribute vec2 a_texture_pos;varying vec2 v_pos;void main() {gl_Position\x3du_matrix*vec4(a_pos,0,1);highp vec2 epsilon\x3d1.0/u_dimension;float scale\x3d(u_dimension.x-2.0)/u_dimension.x;v_pos\x3d(a_texture_pos/8192.0)*scale+epsilon;}"),uh=ba("uniform sampler2D u_image;varying vec2 v_pos;uniform vec2 u_latrange;uniform vec2 u_light;uniform vec4 u_shadow;uniform vec4 u_highlight;uniform vec4 u_accent;\n#define PI 3.141592653589793\nvoid main() {vec4 pixel\x3dtexture2D(u_image,v_pos);vec2 deriv\x3d((pixel.rg*2.0)-1.0);float scaleFactor\x3dcos(radians((u_latrange[0]-u_latrange[1])*(1.0-v_pos.y)+u_latrange[1]));float slope\x3datan(1.25*length(deriv)/scaleFactor);float aspect\x3dderiv.x !\x3d0.0 ? atan(deriv.y,-deriv.x) : PI/2.0*(deriv.y \x3e 0.0 ? 1.0 :-1.0);float intensity\x3du_light.x;float azimuth\x3du_light.y+PI;float base\x3d1.875-intensity*1.75;float maxValue\x3d0.5*PI;float scaledSlope\x3dintensity !\x3d0.5 ? ((pow(base,slope)-1.0)/(pow(base,maxValue)-1.0))*maxValue : slope;float accent\x3dcos(scaledSlope);vec4 accent_color\x3d(1.0-accent)*u_accent*clamp(intensity*2.0,0.0,1.0);float shade\x3dabs(mod((aspect+azimuth)/PI+0.5,2.0)-1.0);vec4 shade_color\x3dmix(u_shadow,u_highlight,shade)*sin(scaledSlope)*clamp(intensity*2.0,0.0,1.0);gl_FragColor\x3daccent_color*(1.0-shade_color.a)+shade_color;\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor\x3dvec4(1.0);\n#endif\n}",
"uniform mat4 u_matrix;attribute vec2 a_pos;attribute vec2 a_texture_pos;varying vec2 v_pos;void main() {gl_Position\x3du_matrix*vec4(a_pos,0,1);v_pos\x3da_texture_pos/8192.0;}"),Ag=ba("uniform lowp float u_device_pixel_ratio;varying vec2 v_width2;varying vec2 v_normal;varying float v_gamma_scale;\n#pragma mapbox: define highp vec4 color\n#pragma mapbox: define lowp float blur\n#pragma mapbox: define lowp float opacity\nvoid main() {\n#pragma mapbox: initialize highp vec4 color\n#pragma mapbox: initialize lowp float blur\n#pragma mapbox: initialize lowp float opacity\nfloat dist\x3dlength(v_normal)*v_width2.s;float blur2\x3d(blur+1.0/u_device_pixel_ratio)*v_gamma_scale;float alpha\x3dclamp(min(dist-(v_width2.t-blur2),v_width2.s-dist)/blur2,0.0,1.0);gl_FragColor\x3dcolor*(alpha*opacity);\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor\x3dvec4(1.0);\n#endif\n}",
"\n#define scale 0.015873016\nattribute vec2 a_pos_normal;attribute vec4 a_data;uniform mat4 u_matrix;uniform mediump float u_ratio;uniform vec2 u_units_to_pixels;uniform lowp float u_device_pixel_ratio;varying vec2 v_normal;varying vec2 v_width2;varying float v_gamma_scale;varying highp float v_linesofar;\n#pragma mapbox: define highp vec4 color\n#pragma mapbox: define lowp float blur\n#pragma mapbox: define lowp float opacity\n#pragma mapbox: define mediump float gapwidth\n#pragma mapbox: define lowp float offset\n#pragma mapbox: define mediump float width\nvoid main() {\n#pragma mapbox: initialize highp vec4 color\n#pragma mapbox: initialize lowp float blur\n#pragma mapbox: initialize lowp float opacity\n#pragma mapbox: initialize mediump float gapwidth\n#pragma mapbox: initialize lowp float offset\n#pragma mapbox: initialize mediump float width\nfloat ANTIALIASING\x3d1.0/u_device_pixel_ratio/2.0;vec2 a_extrude\x3da_data.xy-128.0;float a_direction\x3dmod(a_data.z,4.0)-1.0;v_linesofar\x3d(floor(a_data.z/4.0)+a_data.w*64.0)*2.0;vec2 pos\x3dfloor(a_pos_normal*0.5);mediump vec2 normal\x3da_pos_normal-2.0*pos;normal.y\x3dnormal.y*2.0-1.0;v_normal\x3dnormal;gapwidth\x3dgapwidth/2.0;float halfwidth\x3dwidth/2.0;offset\x3d-1.0*offset;float inset\x3dgapwidth+(gapwidth \x3e 0.0 ? ANTIALIASING : 0.0);float outset\x3dgapwidth+halfwidth*(gapwidth \x3e 0.0 ? 2.0 : 1.0)+(halfwidth\x3d\x3d0.0 ? 0.0 : ANTIALIASING);mediump vec2 dist\x3doutset*a_extrude*scale;mediump float u\x3d0.5*a_direction;mediump float t\x3d1.0-abs(u);mediump vec2 offset2\x3doffset*a_extrude*scale*normal.y*mat2(t,-u,u,t);vec4 projected_extrude\x3du_matrix*vec4(dist/u_ratio,0.0,0.0);gl_Position\x3du_matrix*vec4(pos+offset2/u_ratio,0.0,1.0)+projected_extrude;float extrude_length_without_perspective\x3dlength(dist);float extrude_length_with_perspective\x3dlength(projected_extrude.xy/gl_Position.w*u_units_to_pixels);v_gamma_scale\x3dextrude_length_without_perspective/extrude_length_with_perspective;v_width2\x3dvec2(outset,inset);}"),
Mh=ba("uniform lowp float u_device_pixel_ratio;uniform sampler2D u_image;varying vec2 v_width2;varying vec2 v_normal;varying float v_gamma_scale;varying highp float v_lineprogress;\n#pragma mapbox: define lowp float blur\n#pragma mapbox: define lowp float opacity\nvoid main() {\n#pragma mapbox: initialize lowp float blur\n#pragma mapbox: initialize lowp float opacity\nfloat dist\x3dlength(v_normal)*v_width2.s;float blur2\x3d(blur+1.0/u_device_pixel_ratio)*v_gamma_scale;float alpha\x3dclamp(min(dist-(v_width2.t-blur2),v_width2.s-dist)/blur2,0.0,1.0);vec4 color\x3dtexture2D(u_image,vec2(v_lineprogress,0.5));gl_FragColor\x3dcolor*(alpha*opacity);\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor\x3dvec4(1.0);\n#endif\n}",
"\n#define MAX_LINE_DISTANCE 32767.0\n#define scale 0.015873016\nattribute vec2 a_pos_normal;attribute vec4 a_data;uniform mat4 u_matrix;uniform mediump float u_ratio;uniform lowp float u_device_pixel_ratio;uniform vec2 u_units_to_pixels;varying vec2 v_normal;varying vec2 v_width2;varying float v_gamma_scale;varying highp float v_lineprogress;\n#pragma mapbox: define lowp float blur\n#pragma mapbox: define lowp float opacity\n#pragma mapbox: define mediump float gapwidth\n#pragma mapbox: define lowp float offset\n#pragma mapbox: define mediump float width\nvoid main() {\n#pragma mapbox: initialize lowp float blur\n#pragma mapbox: initialize lowp float opacity\n#pragma mapbox: initialize mediump float gapwidth\n#pragma mapbox: initialize lowp float offset\n#pragma mapbox: initialize mediump float width\nfloat ANTIALIASING\x3d1.0/u_device_pixel_ratio/2.0;vec2 a_extrude\x3da_data.xy-128.0;float a_direction\x3dmod(a_data.z,4.0)-1.0;v_lineprogress\x3d(floor(a_data.z/4.0)+a_data.w*64.0)*2.0/MAX_LINE_DISTANCE;vec2 pos\x3dfloor(a_pos_normal*0.5);mediump vec2 normal\x3da_pos_normal-2.0*pos;normal.y\x3dnormal.y*2.0-1.0;v_normal\x3dnormal;gapwidth\x3dgapwidth/2.0;float halfwidth\x3dwidth/2.0;offset\x3d-1.0*offset;float inset\x3dgapwidth+(gapwidth \x3e 0.0 ? ANTIALIASING : 0.0);float outset\x3dgapwidth+halfwidth*(gapwidth \x3e 0.0 ? 2.0 : 1.0)+(halfwidth\x3d\x3d0.0 ? 0.0 : ANTIALIASING);mediump vec2 dist\x3doutset*a_extrude*scale;mediump float u\x3d0.5*a_direction;mediump float t\x3d1.0-abs(u);mediump vec2 offset2\x3doffset*a_extrude*scale*normal.y*mat2(t,-u,u,t);vec4 projected_extrude\x3du_matrix*vec4(dist/u_ratio,0.0,0.0);gl_Position\x3du_matrix*vec4(pos+offset2/u_ratio,0.0,1.0)+projected_extrude;float extrude_length_without_perspective\x3dlength(dist);float extrude_length_with_perspective\x3dlength(projected_extrude.xy/gl_Position.w*u_units_to_pixels);v_gamma_scale\x3dextrude_length_without_perspective/extrude_length_with_perspective;v_width2\x3dvec2(outset,inset);}"),
kj=ba("uniform lowp float u_device_pixel_ratio;uniform vec2 u_texsize;uniform float u_fade;uniform mediump vec3 u_scale;uniform sampler2D u_image;varying vec2 v_normal;varying vec2 v_width2;varying float v_linesofar;varying float v_gamma_scale;varying float v_width;\n#pragma mapbox: define lowp vec4 pattern_from\n#pragma mapbox: define lowp vec4 pattern_to\n#pragma mapbox: define lowp float pixel_ratio_from\n#pragma mapbox: define lowp float pixel_ratio_to\n#pragma mapbox: define lowp float blur\n#pragma mapbox: define lowp float opacity\nvoid main() {\n#pragma mapbox: initialize mediump vec4 pattern_from\n#pragma mapbox: initialize mediump vec4 pattern_to\n#pragma mapbox: initialize lowp float pixel_ratio_from\n#pragma mapbox: initialize lowp float pixel_ratio_to\n#pragma mapbox: initialize lowp float blur\n#pragma mapbox: initialize lowp float opacity\nvec2 pattern_tl_a\x3dpattern_from.xy;vec2 pattern_br_a\x3dpattern_from.zw;vec2 pattern_tl_b\x3dpattern_to.xy;vec2 pattern_br_b\x3dpattern_to.zw;float tileZoomRatio\x3du_scale.x;float fromScale\x3du_scale.y;float toScale\x3du_scale.z;vec2 display_size_a\x3d(pattern_br_a-pattern_tl_a)/pixel_ratio_from;vec2 display_size_b\x3d(pattern_br_b-pattern_tl_b)/pixel_ratio_to;vec2 pattern_size_a\x3dvec2(display_size_a.x*fromScale/tileZoomRatio,display_size_a.y);vec2 pattern_size_b\x3dvec2(display_size_b.x*toScale/tileZoomRatio,display_size_b.y);float aspect_a\x3ddisplay_size_a.y/v_width;float aspect_b\x3ddisplay_size_b.y/v_width;float dist\x3dlength(v_normal)*v_width2.s;float blur2\x3d(blur+1.0/u_device_pixel_ratio)*v_gamma_scale;float alpha\x3dclamp(min(dist-(v_width2.t-blur2),v_width2.s-dist)/blur2,0.0,1.0);float x_a\x3dmod(v_linesofar/pattern_size_a.x*aspect_a,1.0);float x_b\x3dmod(v_linesofar/pattern_size_b.x*aspect_b,1.0);float y\x3d0.5*v_normal.y+0.5;vec2 texel_size\x3d1.0/u_texsize;vec2 pos_a\x3dmix(pattern_tl_a*texel_size-texel_size,pattern_br_a*texel_size+texel_size,vec2(x_a,y));vec2 pos_b\x3dmix(pattern_tl_b*texel_size-texel_size,pattern_br_b*texel_size+texel_size,vec2(x_b,y));vec4 color\x3dmix(texture2D(u_image,pos_a),texture2D(u_image,pos_b),u_fade);gl_FragColor\x3dcolor*alpha*opacity;\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor\x3dvec4(1.0);\n#endif\n}",
"\n#define scale 0.015873016\n#define LINE_DISTANCE_SCALE 2.0\nattribute vec2 a_pos_normal;attribute vec4 a_data;uniform mat4 u_matrix;uniform vec2 u_units_to_pixels;uniform mediump float u_ratio;uniform lowp float u_device_pixel_ratio;varying vec2 v_normal;varying vec2 v_width2;varying float v_linesofar;varying float v_gamma_scale;varying float v_width;\n#pragma mapbox: define lowp float blur\n#pragma mapbox: define lowp float opacity\n#pragma mapbox: define lowp float offset\n#pragma mapbox: define mediump float gapwidth\n#pragma mapbox: define mediump float width\n#pragma mapbox: define lowp float floorwidth\n#pragma mapbox: define lowp vec4 pattern_from\n#pragma mapbox: define lowp vec4 pattern_to\n#pragma mapbox: define lowp float pixel_ratio_from\n#pragma mapbox: define lowp float pixel_ratio_to\nvoid main() {\n#pragma mapbox: initialize lowp float blur\n#pragma mapbox: initialize lowp float opacity\n#pragma mapbox: initialize lowp float offset\n#pragma mapbox: initialize mediump float gapwidth\n#pragma mapbox: initialize mediump float width\n#pragma mapbox: initialize lowp float floorwidth\n#pragma mapbox: initialize mediump vec4 pattern_from\n#pragma mapbox: initialize mediump vec4 pattern_to\n#pragma mapbox: initialize lowp float pixel_ratio_from\n#pragma mapbox: initialize lowp float pixel_ratio_to\nfloat ANTIALIASING\x3d1.0/u_device_pixel_ratio/2.0;vec2 a_extrude\x3da_data.xy-128.0;float a_direction\x3dmod(a_data.z,4.0)-1.0;float a_linesofar\x3d(floor(a_data.z/4.0)+a_data.w*64.0)*LINE_DISTANCE_SCALE;vec2 pos\x3dfloor(a_pos_normal*0.5);mediump vec2 normal\x3da_pos_normal-2.0*pos;normal.y\x3dnormal.y*2.0-1.0;v_normal\x3dnormal;gapwidth\x3dgapwidth/2.0;float halfwidth\x3dwidth/2.0;offset\x3d-1.0*offset;float inset\x3dgapwidth+(gapwidth \x3e 0.0 ? ANTIALIASING : 0.0);float outset\x3dgapwidth+halfwidth*(gapwidth \x3e 0.0 ? 2.0 : 1.0)+(halfwidth\x3d\x3d0.0 ? 0.0 : ANTIALIASING);mediump vec2 dist\x3doutset*a_extrude*scale;mediump float u\x3d0.5*a_direction;mediump float t\x3d1.0-abs(u);mediump vec2 offset2\x3doffset*a_extrude*scale*normal.y*mat2(t,-u,u,t);vec4 projected_extrude\x3du_matrix*vec4(dist/u_ratio,0.0,0.0);gl_Position\x3du_matrix*vec4(pos+offset2/u_ratio,0.0,1.0)+projected_extrude;float extrude_length_without_perspective\x3dlength(dist);float extrude_length_with_perspective\x3dlength(projected_extrude.xy/gl_Position.w*u_units_to_pixels);v_gamma_scale\x3dextrude_length_without_perspective/extrude_length_with_perspective;v_linesofar\x3da_linesofar;v_width2\x3dvec2(outset,inset);v_width\x3dfloorwidth;}"),
vh=ba("uniform lowp float u_device_pixel_ratio;uniform sampler2D u_image;uniform float u_sdfgamma;uniform float u_mix;varying vec2 v_normal;varying vec2 v_width2;varying vec2 v_tex_a;varying vec2 v_tex_b;varying float v_gamma_scale;\n#pragma mapbox: define highp vec4 color\n#pragma mapbox: define lowp float blur\n#pragma mapbox: define lowp float opacity\n#pragma mapbox: define mediump float width\n#pragma mapbox: define lowp float floorwidth\nvoid main() {\n#pragma mapbox: initialize highp vec4 color\n#pragma mapbox: initialize lowp float blur\n#pragma mapbox: initialize lowp float opacity\n#pragma mapbox: initialize mediump float width\n#pragma mapbox: initialize lowp float floorwidth\nfloat dist\x3dlength(v_normal)*v_width2.s;float blur2\x3d(blur+1.0/u_device_pixel_ratio)*v_gamma_scale;float alpha\x3dclamp(min(dist-(v_width2.t-blur2),v_width2.s-dist)/blur2,0.0,1.0);float sdfdist_a\x3dtexture2D(u_image,v_tex_a).a;float sdfdist_b\x3dtexture2D(u_image,v_tex_b).a;float sdfdist\x3dmix(sdfdist_a,sdfdist_b,u_mix);alpha*\x3dsmoothstep(0.5-u_sdfgamma/floorwidth,0.5+u_sdfgamma/floorwidth,sdfdist);gl_FragColor\x3dcolor*(alpha*opacity);\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor\x3dvec4(1.0);\n#endif\n}",
"\n#define scale 0.015873016\n#define LINE_DISTANCE_SCALE 2.0\nattribute vec2 a_pos_normal;attribute vec4 a_data;uniform mat4 u_matrix;uniform mediump float u_ratio;uniform lowp float u_device_pixel_ratio;uniform vec2 u_patternscale_a;uniform float u_tex_y_a;uniform vec2 u_patternscale_b;uniform float u_tex_y_b;uniform vec2 u_units_to_pixels;varying vec2 v_normal;varying vec2 v_width2;varying vec2 v_tex_a;varying vec2 v_tex_b;varying float v_gamma_scale;\n#pragma mapbox: define highp vec4 color\n#pragma mapbox: define lowp float blur\n#pragma mapbox: define lowp float opacity\n#pragma mapbox: define mediump float gapwidth\n#pragma mapbox: define lowp float offset\n#pragma mapbox: define mediump float width\n#pragma mapbox: define lowp float floorwidth\nvoid main() {\n#pragma mapbox: initialize highp vec4 color\n#pragma mapbox: initialize lowp float blur\n#pragma mapbox: initialize lowp float opacity\n#pragma mapbox: initialize mediump float gapwidth\n#pragma mapbox: initialize lowp float offset\n#pragma mapbox: initialize mediump float width\n#pragma mapbox: initialize lowp float floorwidth\nfloat ANTIALIASING\x3d1.0/u_device_pixel_ratio/2.0;vec2 a_extrude\x3da_data.xy-128.0;float a_direction\x3dmod(a_data.z,4.0)-1.0;float a_linesofar\x3d(floor(a_data.z/4.0)+a_data.w*64.0)*LINE_DISTANCE_SCALE;vec2 pos\x3dfloor(a_pos_normal*0.5);mediump vec2 normal\x3da_pos_normal-2.0*pos;normal.y\x3dnormal.y*2.0-1.0;v_normal\x3dnormal;gapwidth\x3dgapwidth/2.0;float halfwidth\x3dwidth/2.0;offset\x3d-1.0*offset;float inset\x3dgapwidth+(gapwidth \x3e 0.0 ? ANTIALIASING : 0.0);float outset\x3dgapwidth+halfwidth*(gapwidth \x3e 0.0 ? 2.0 : 1.0)+(halfwidth\x3d\x3d0.0 ? 0.0 : ANTIALIASING);mediump vec2 dist\x3doutset*a_extrude*scale;mediump float u\x3d0.5*a_direction;mediump float t\x3d1.0-abs(u);mediump vec2 offset2\x3doffset*a_extrude*scale*normal.y*mat2(t,-u,u,t);vec4 projected_extrude\x3du_matrix*vec4(dist/u_ratio,0.0,0.0);gl_Position\x3du_matrix*vec4(pos+offset2/u_ratio,0.0,1.0)+projected_extrude;float extrude_length_without_perspective\x3dlength(dist);float extrude_length_with_perspective\x3dlength(projected_extrude.xy/gl_Position.w*u_units_to_pixels);v_gamma_scale\x3dextrude_length_without_perspective/extrude_length_with_perspective;v_tex_a\x3dvec2(a_linesofar*u_patternscale_a.x/floorwidth,normal.y*u_patternscale_a.y+u_tex_y_a);v_tex_b\x3dvec2(a_linesofar*u_patternscale_b.x/floorwidth,normal.y*u_patternscale_b.y+u_tex_y_b);v_width2\x3dvec2(outset,inset);}"),
Lh=ba("uniform float u_fade_t;uniform float u_opacity;uniform sampler2D u_image0;uniform sampler2D u_image1;varying vec2 v_pos0;varying vec2 v_pos1;uniform float u_brightness_low;uniform float u_brightness_high;uniform float u_saturation_factor;uniform float u_contrast_factor;uniform vec3 u_spin_weights;void main() {vec4 color0\x3dtexture2D(u_image0,v_pos0);vec4 color1\x3dtexture2D(u_image1,v_pos1);if (color0.a \x3e 0.0) {color0.rgb\x3dcolor0.rgb/color0.a;}if (color1.a \x3e 0.0) {color1.rgb\x3dcolor1.rgb/color1.a;}vec4 color\x3dmix(color0,color1,u_fade_t);color.a*\x3du_opacity;vec3 rgb\x3dcolor.rgb;rgb\x3dvec3(dot(rgb,u_spin_weights.xyz),dot(rgb,u_spin_weights.zxy),dot(rgb,u_spin_weights.yzx));float average\x3d(color.r+color.g+color.b)/3.0;rgb+\x3d(average-rgb)*u_saturation_factor;rgb\x3d(rgb-0.5)*u_contrast_factor+0.5;vec3 u_high_vec\x3dvec3(u_brightness_low,u_brightness_low,u_brightness_low);vec3 u_low_vec\x3dvec3(u_brightness_high,u_brightness_high,u_brightness_high);gl_FragColor\x3dvec4(mix(u_high_vec,u_low_vec,rgb)*color.a,color.a);\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor\x3dvec4(1.0);\n#endif\n}",
"uniform mat4 u_matrix;uniform vec2 u_tl_parent;uniform float u_scale_parent;uniform float u_buffer_scale;attribute vec2 a_pos;attribute vec2 a_texture_pos;varying vec2 v_pos0;varying vec2 v_pos1;void main() {gl_Position\x3du_matrix*vec4(a_pos,0,1);v_pos0\x3d(((a_texture_pos/8192.0)-0.5)/u_buffer_scale )+0.5;v_pos1\x3d(v_pos0*u_scale_parent)+u_tl_parent;}"),qi=ba("uniform sampler2D u_texture;varying vec2 v_tex;varying float v_fade_opacity;\n#pragma mapbox: define lowp float opacity\nvoid main() {\n#pragma mapbox: initialize lowp float opacity\nlowp float alpha\x3dopacity*v_fade_opacity;gl_FragColor\x3dtexture2D(u_texture,v_tex)*alpha;\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor\x3dvec4(1.0);\n#endif\n}",
"const float PI\x3d3.141592653589793;attribute vec4 a_pos_offset;attribute vec4 a_data;attribute vec4 a_pixeloffset;attribute vec3 a_projected_pos;attribute float a_fade_opacity;uniform bool u_is_size_zoom_constant;uniform bool u_is_size_feature_constant;uniform highp float u_size_t;uniform highp float u_size;uniform highp float u_camera_to_center_distance;uniform highp float u_pitch;uniform bool u_rotate_symbol;uniform highp float u_aspect_ratio;uniform float u_fade_change;uniform mat4 u_matrix;uniform mat4 u_label_plane_matrix;uniform mat4 u_coord_matrix;uniform bool u_is_text;uniform bool u_pitch_with_map;uniform vec2 u_texsize;varying vec2 v_tex;varying float v_fade_opacity;\n#pragma mapbox: define lowp float opacity\nvoid main() {\n#pragma mapbox: initialize lowp float opacity\nvec2 a_pos\x3da_pos_offset.xy;vec2 a_offset\x3da_pos_offset.zw;vec2 a_tex\x3da_data.xy;vec2 a_size\x3da_data.zw;float a_size_min\x3dfloor(a_size[0]*0.5);vec2 a_pxoffset\x3da_pixeloffset.xy;vec2 a_minFontScale\x3da_pixeloffset.zw/256.0;highp float segment_angle\x3d-a_projected_pos[2];float size;if (!u_is_size_zoom_constant \x26\x26 !u_is_size_feature_constant) {size\x3dmix(a_size_min,a_size[1],u_size_t)/128.0;} else if (u_is_size_zoom_constant \x26\x26 !u_is_size_feature_constant) {size\x3da_size_min/128.0;} else {size\x3du_size;}vec4 projectedPoint\x3du_matrix*vec4(a_pos,0,1);highp float camera_to_anchor_distance\x3dprojectedPoint.w;highp float distance_ratio\x3du_pitch_with_map ?\ncamera_to_anchor_distance/u_camera_to_center_distance :\nu_camera_to_center_distance/camera_to_anchor_distance;highp float perspective_ratio\x3dclamp(0.5+0.5*distance_ratio,0.0,4.0);size*\x3dperspective_ratio;float fontScale\x3du_is_text ? size/24.0 : size;highp float symbol_rotation\x3d0.0;if (u_rotate_symbol) {vec4 offsetProjectedPoint\x3du_matrix*vec4(a_pos+vec2(1,0),0,1);vec2 a\x3dprojectedPoint.xy/projectedPoint.w;vec2 b\x3doffsetProjectedPoint.xy/offsetProjectedPoint.w;symbol_rotation\x3datan((b.y-a.y)/u_aspect_ratio,b.x-a.x);}highp float angle_sin\x3dsin(segment_angle+symbol_rotation);highp float angle_cos\x3dcos(segment_angle+symbol_rotation);mat2 rotation_matrix\x3dmat2(angle_cos,-1.0*angle_sin,angle_sin,angle_cos);vec4 projected_pos\x3du_label_plane_matrix*vec4(a_projected_pos.xy,0.0,1.0);gl_Position\x3du_coord_matrix*vec4(projected_pos.xy/projected_pos.w+rotation_matrix*(a_offset/32.0*max(a_minFontScale,fontScale)+a_pxoffset/16.0),0.0,1.0);v_tex\x3da_tex/u_texsize;vec2 fade_opacity\x3dunpack_opacity(a_fade_opacity);float fade_change\x3dfade_opacity[1] \x3e 0.5 ? u_fade_change :-u_fade_change;v_fade_opacity\x3dmax(0.0,min(1.0,fade_opacity[0]+fade_change));}"),
ri=ba("#define SDF_PX 8.0\nuniform bool u_is_halo;uniform sampler2D u_texture;uniform highp float u_gamma_scale;uniform lowp float u_device_pixel_ratio;uniform bool u_is_text;varying vec2 v_data0;varying vec3 v_data1;\n#pragma mapbox: define highp vec4 fill_color\n#pragma mapbox: define highp vec4 halo_color\n#pragma mapbox: define lowp float opacity\n#pragma mapbox: define lowp float halo_width\n#pragma mapbox: define lowp float halo_blur\nvoid main() {\n#pragma mapbox: initialize highp vec4 fill_color\n#pragma mapbox: initialize highp vec4 halo_color\n#pragma mapbox: initialize lowp float opacity\n#pragma mapbox: initialize lowp float halo_width\n#pragma mapbox: initialize lowp float halo_blur\nfloat EDGE_GAMMA\x3d0.105/u_device_pixel_ratio;vec2 tex\x3dv_data0.xy;float gamma_scale\x3dv_data1.x;float size\x3dv_data1.y;float fade_opacity\x3dv_data1[2];float fontScale\x3du_is_text ? size/24.0 : size;lowp vec4 color\x3dfill_color;highp float gamma\x3dEDGE_GAMMA/(fontScale*u_gamma_scale);lowp float buff\x3d(256.0-64.0)/256.0;if (u_is_halo) {color\x3dhalo_color;gamma\x3d(halo_blur*1.19/SDF_PX+EDGE_GAMMA)/(fontScale*u_gamma_scale);buff\x3d(6.0-halo_width/fontScale)/SDF_PX;}lowp float dist\x3dtexture2D(u_texture,tex).a;highp float gamma_scaled\x3dgamma*gamma_scale;highp float alpha\x3dsmoothstep(buff-gamma_scaled,buff+gamma_scaled,dist);gl_FragColor\x3dcolor*(alpha*opacity*fade_opacity);\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor\x3dvec4(1.0);\n#endif\n}",
"const float PI\x3d3.141592653589793;attribute vec4 a_pos_offset;attribute vec4 a_data;attribute vec4 a_pixeloffset;attribute vec3 a_projected_pos;attribute float a_fade_opacity;uniform bool u_is_size_zoom_constant;uniform bool u_is_size_feature_constant;uniform highp float u_size_t;uniform highp float u_size;uniform mat4 u_matrix;uniform mat4 u_label_plane_matrix;uniform mat4 u_coord_matrix;uniform bool u_is_text;uniform bool u_pitch_with_map;uniform highp float u_pitch;uniform bool u_rotate_symbol;uniform highp float u_aspect_ratio;uniform highp float u_camera_to_center_distance;uniform float u_fade_change;uniform vec2 u_texsize;varying vec2 v_data0;varying vec3 v_data1;\n#pragma mapbox: define highp vec4 fill_color\n#pragma mapbox: define highp vec4 halo_color\n#pragma mapbox: define lowp float opacity\n#pragma mapbox: define lowp float halo_width\n#pragma mapbox: define lowp float halo_blur\nvoid main() {\n#pragma mapbox: initialize highp vec4 fill_color\n#pragma mapbox: initialize highp vec4 halo_color\n#pragma mapbox: initialize lowp float opacity\n#pragma mapbox: initialize lowp float halo_width\n#pragma mapbox: initialize lowp float halo_blur\nvec2 a_pos\x3da_pos_offset.xy;vec2 a_offset\x3da_pos_offset.zw;vec2 a_tex\x3da_data.xy;vec2 a_size\x3da_data.zw;float a_size_min\x3dfloor(a_size[0]*0.5);vec2 a_pxoffset\x3da_pixeloffset.xy;highp float segment_angle\x3d-a_projected_pos[2];float size;if (!u_is_size_zoom_constant \x26\x26 !u_is_size_feature_constant) {size\x3dmix(a_size_min,a_size[1],u_size_t)/128.0;} else if (u_is_size_zoom_constant \x26\x26 !u_is_size_feature_constant) {size\x3da_size_min/128.0;} else {size\x3du_size;}vec4 projectedPoint\x3du_matrix*vec4(a_pos,0,1);highp float camera_to_anchor_distance\x3dprojectedPoint.w;highp float distance_ratio\x3du_pitch_with_map ?\ncamera_to_anchor_distance/u_camera_to_center_distance :\nu_camera_to_center_distance/camera_to_anchor_distance;highp float perspective_ratio\x3dclamp(0.5+0.5*distance_ratio,0.0,4.0);size*\x3dperspective_ratio;float fontScale\x3du_is_text ? size/24.0 : size;highp float symbol_rotation\x3d0.0;if (u_rotate_symbol) {vec4 offsetProjectedPoint\x3du_matrix*vec4(a_pos+vec2(1,0),0,1);vec2 a\x3dprojectedPoint.xy/projectedPoint.w;vec2 b\x3doffsetProjectedPoint.xy/offsetProjectedPoint.w;symbol_rotation\x3datan((b.y-a.y)/u_aspect_ratio,b.x-a.x);}highp float angle_sin\x3dsin(segment_angle+symbol_rotation);highp float angle_cos\x3dcos(segment_angle+symbol_rotation);mat2 rotation_matrix\x3dmat2(angle_cos,-1.0*angle_sin,angle_sin,angle_cos);vec4 projected_pos\x3du_label_plane_matrix*vec4(a_projected_pos.xy,0.0,1.0);gl_Position\x3du_coord_matrix*vec4(projected_pos.xy/projected_pos.w+rotation_matrix*(a_offset/32.0*fontScale+a_pxoffset),0.0,1.0);float gamma_scale\x3dgl_Position.w;vec2 fade_opacity\x3dunpack_opacity(a_fade_opacity);float fade_change\x3dfade_opacity[1] \x3e 0.5 ? u_fade_change :-u_fade_change;float interpolated_fade_opacity\x3dmax(0.0,min(1.0,fade_opacity[0]+fade_change));v_data0\x3da_tex/u_texsize;v_data1\x3dvec3(gamma_scale,size,interpolated_fade_opacity);}"),
Nh=ba("#define SDF_PX 8.0\n#define SDF 1.0\n#define ICON 0.0\nuniform bool u_is_halo;uniform sampler2D u_texture;uniform sampler2D u_texture_icon;uniform highp float u_gamma_scale;uniform lowp float u_device_pixel_ratio;varying vec4 v_data0;varying vec4 v_data1;\n#pragma mapbox: define highp vec4 fill_color\n#pragma mapbox: define highp vec4 halo_color\n#pragma mapbox: define lowp float opacity\n#pragma mapbox: define lowp float halo_width\n#pragma mapbox: define lowp float halo_blur\nvoid main() {\n#pragma mapbox: initialize highp vec4 fill_color\n#pragma mapbox: initialize highp vec4 halo_color\n#pragma mapbox: initialize lowp float opacity\n#pragma mapbox: initialize lowp float halo_width\n#pragma mapbox: initialize lowp float halo_blur\nfloat fade_opacity\x3dv_data1[2];if (v_data1.w\x3d\x3dICON) {vec2 tex_icon\x3dv_data0.zw;lowp float alpha\x3dopacity*fade_opacity;gl_FragColor\x3dtexture2D(u_texture_icon,tex_icon)*alpha;\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor\x3dvec4(1.0);\n#endif\nreturn;}vec2 tex\x3dv_data0.xy;float EDGE_GAMMA\x3d0.105/u_device_pixel_ratio;float gamma_scale\x3dv_data1.x;float size\x3dv_data1.y;float fontScale\x3dsize/24.0;lowp vec4 color\x3dfill_color;highp float gamma\x3dEDGE_GAMMA/(fontScale*u_gamma_scale);lowp float buff\x3d(256.0-64.0)/256.0;if (u_is_halo) {color\x3dhalo_color;gamma\x3d(halo_blur*1.19/SDF_PX+EDGE_GAMMA)/(fontScale*u_gamma_scale);buff\x3d(6.0-halo_width/fontScale)/SDF_PX;}lowp float dist\x3dtexture2D(u_texture,tex).a;highp float gamma_scaled\x3dgamma*gamma_scale;highp float alpha\x3dsmoothstep(buff-gamma_scaled,buff+gamma_scaled,dist);gl_FragColor\x3dcolor*(alpha*opacity*fade_opacity);\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor\x3dvec4(1.0);\n#endif\n}",
"const float PI\x3d3.141592653589793;attribute vec4 a_pos_offset;attribute vec4 a_data;attribute vec3 a_projected_pos;attribute float a_fade_opacity;uniform bool u_is_size_zoom_constant;uniform bool u_is_size_feature_constant;uniform highp float u_size_t;uniform highp float u_size;uniform mat4 u_matrix;uniform mat4 u_label_plane_matrix;uniform mat4 u_coord_matrix;uniform bool u_is_text;uniform bool u_pitch_with_map;uniform highp float u_pitch;uniform bool u_rotate_symbol;uniform highp float u_aspect_ratio;uniform highp float u_camera_to_center_distance;uniform float u_fade_change;uniform vec2 u_texsize;uniform vec2 u_texsize_icon;varying vec4 v_data0;varying vec4 v_data1;\n#pragma mapbox: define highp vec4 fill_color\n#pragma mapbox: define highp vec4 halo_color\n#pragma mapbox: define lowp float opacity\n#pragma mapbox: define lowp float halo_width\n#pragma mapbox: define lowp float halo_blur\nvoid main() {\n#pragma mapbox: initialize highp vec4 fill_color\n#pragma mapbox: initialize highp vec4 halo_color\n#pragma mapbox: initialize lowp float opacity\n#pragma mapbox: initialize lowp float halo_width\n#pragma mapbox: initialize lowp float halo_blur\nvec2 a_pos\x3da_pos_offset.xy;vec2 a_offset\x3da_pos_offset.zw;vec2 a_tex\x3da_data.xy;vec2 a_size\x3da_data.zw;float a_size_min\x3dfloor(a_size[0]*0.5);float is_sdf\x3da_size[0]-2.0*a_size_min;highp float segment_angle\x3d-a_projected_pos[2];float size;if (!u_is_size_zoom_constant \x26\x26 !u_is_size_feature_constant) {size\x3dmix(a_size_min,a_size[1],u_size_t)/128.0;} else if (u_is_size_zoom_constant \x26\x26 !u_is_size_feature_constant) {size\x3da_size_min/128.0;} else {size\x3du_size;}vec4 projectedPoint\x3du_matrix*vec4(a_pos,0,1);highp float camera_to_anchor_distance\x3dprojectedPoint.w;highp float distance_ratio\x3du_pitch_with_map ?\ncamera_to_anchor_distance/u_camera_to_center_distance :\nu_camera_to_center_distance/camera_to_anchor_distance;highp float perspective_ratio\x3dclamp(0.5+0.5*distance_ratio,0.0,4.0);size*\x3dperspective_ratio;float fontScale\x3dsize/24.0;highp float symbol_rotation\x3d0.0;if (u_rotate_symbol) {vec4 offsetProjectedPoint\x3du_matrix*vec4(a_pos+vec2(1,0),0,1);vec2 a\x3dprojectedPoint.xy/projectedPoint.w;vec2 b\x3doffsetProjectedPoint.xy/offsetProjectedPoint.w;symbol_rotation\x3datan((b.y-a.y)/u_aspect_ratio,b.x-a.x);}highp float angle_sin\x3dsin(segment_angle+symbol_rotation);highp float angle_cos\x3dcos(segment_angle+symbol_rotation);mat2 rotation_matrix\x3dmat2(angle_cos,-1.0*angle_sin,angle_sin,angle_cos);vec4 projected_pos\x3du_label_plane_matrix*vec4(a_projected_pos.xy,0.0,1.0);gl_Position\x3du_coord_matrix*vec4(projected_pos.xy/projected_pos.w+rotation_matrix*(a_offset/32.0*fontScale),0.0,1.0);float gamma_scale\x3dgl_Position.w;vec2 fade_opacity\x3dunpack_opacity(a_fade_opacity);float fade_change\x3dfade_opacity[1] \x3e 0.5 ? u_fade_change :-u_fade_change;float interpolated_fade_opacity\x3dmax(0.0,min(1.0,fade_opacity[0]+fade_change));v_data0.xy\x3da_tex/u_texsize;v_data0.zw\x3da_tex/u_texsize_icon;v_data1\x3dvec4(gamma_scale,size,interpolated_fade_opacity,is_sdf);}"),
si=Object.freeze({__proto__:null,prelude:wd,background:sd,backgroundPattern:xe,circle:ue,clippingMask:Le,heatmap:oe,heatmapTexture:Re,collisionBox:Gf,collisionCircle:Zg,debug:th,fill:Fj,fillOutline:ij,fillOutlinePattern:hh,fillPattern:Gj,fillExtrusion:cg,fillExtrusionPattern:Hj,hillshadePrepare:pi,hillshade:uh,line:Ag,lineGradient:Mh,linePattern:kj,lineSDF:vh,raster:Lh,symbolIcon:qi,symbolSDF:ri,symbolTextAndIcon:Nh}),Ph=function(){this.boundLayoutVertexBuffer=this.boundProgram=null;this.boundPaintVertexBuffers=
[];this.vao=this.boundDynamicVertexBuffer=this.boundVertexOffset=this.boundIndexBuffer=null};Ph.prototype.bind=function(W,aa,Z,ea,wa,Ga,Sa,ab){this.context=W;for(var yb=this.boundPaintVertexBuffers.length!==ea.length,Hb=0;!yb&&Hb<ea.length;Hb++)this.boundPaintVertexBuffers[Hb]!==ea[Hb]&&(yb=!0);W.extVertexArrayObject&&this.vao&&this.boundProgram===aa&&this.boundLayoutVertexBuffer===Z&&!yb&&this.boundIndexBuffer===wa&&this.boundVertexOffset===Ga&&this.boundDynamicVertexBuffer===Sa&&this.boundDynamicVertexBuffer2===
ab?(W.bindVertexArrayOES.set(this.vao),Sa&&Sa.bind(),wa&&wa.dynamicDraw&&wa.bind(),ab&&ab.bind()):this.freshBind(aa,Z,ea,wa,Ga,Sa,ab)};Ph.prototype.freshBind=function(W,aa,Z,ea,wa,Ga,Sa){var ab=W.numAttributes,yb=this.context,Hb=yb.gl;if(yb.extVertexArrayObject)this.vao&&this.destroy(),this.vao=yb.extVertexArrayObject.createVertexArrayOES(),yb.bindVertexArrayOES.set(this.vao),this.boundProgram=W,this.boundLayoutVertexBuffer=aa,this.boundPaintVertexBuffers=Z,this.boundIndexBuffer=ea,this.boundVertexOffset=
wa,this.boundDynamicVertexBuffer=Ga,this.boundDynamicVertexBuffer2=Sa;else{var Ib=yb.currentNumAttributes||0;for(var nc=ab;nc<Ib;nc++)Hb.disableVertexAttribArray(nc)}aa.enableAttributes(Hb,W);for(Ib=0;Ib<Z.length;Ib+=1)Z[Ib].enableAttributes(Hb,W);Ga&&Ga.enableAttributes(Hb,W);Sa&&Sa.enableAttributes(Hb,W);aa.bind();aa.setVertexAttribPointers(Hb,W,wa);for(aa=0;aa<Z.length;aa+=1)Ib=Z[aa],Ib.bind(),Ib.setVertexAttribPointers(Hb,W,wa);Ga&&(Ga.bind(),Ga.setVertexAttribPointers(Hb,W,wa));ea&&ea.bind();
Sa&&(Sa.bind(),Sa.setVertexAttribPointers(Hb,W,wa));yb.currentNumAttributes=ab};Ph.prototype.destroy=function(){this.vao&&(this.context.extVertexArrayObject.deleteVertexArrayOES(this.vao),this.vao=null)};var He=function(W,aa,Z,ea,wa){var Ga=W.gl;this.program=Ga.createProgram();var Sa=Z?Z.defines():[];wa&&Sa.push("#define OVERDRAW_INSPECTOR;");wa=Sa.concat(wd.fragmentSource,aa.fragmentSource).join("\n");Sa=Sa.concat(wd.vertexSource,aa.vertexSource).join("\n");aa=Ga.createShader(Ga.FRAGMENT_SHADER);
if(Ga.isContextLost())this.failedToCreate=!0;else if(Ga.shaderSource(aa,wa),Ga.compileShader(aa),Ga.attachShader(this.program,aa),wa=Ga.createShader(Ga.VERTEX_SHADER),Ga.isContextLost())this.failedToCreate=!0;else{Ga.shaderSource(wa,Sa);Ga.compileShader(wa);Ga.attachShader(this.program,wa);Sa=Z?Z.layoutAttributes:[];for(var ab=0;ab<Sa.length;ab++)Ga.bindAttribLocation(this.program,ab,Sa[ab].name);Ga.linkProgram(this.program);Ga.deleteShader(wa);Ga.deleteShader(aa);this.numAttributes=Ga.getProgramParameter(this.program,
Ga.ACTIVE_ATTRIBUTES);this.attributes={};aa={};for(wa=0;wa<this.numAttributes;wa++)(Sa=Ga.getActiveAttrib(this.program,wa))&&(this.attributes[Sa.name]=Ga.getAttribLocation(this.program,Sa.name));wa=Ga.getProgramParameter(this.program,Ga.ACTIVE_UNIFORMS);for(Sa=0;Sa<wa;Sa++)(ab=Ga.getActiveUniform(this.program,Sa))&&(aa[ab.name]=Ga.getUniformLocation(this.program,ab.name));this.fixedUniforms=ea(W,aa);this.binderUniforms=Z?Z.getUniforms(W,aa):[]}};He.prototype.draw=function(W,aa,Z,ea,wa,Ga,Sa,ab,yb,
Hb,Ib,nc,mc,cc,lc,kc){var Gb,dc=W.gl;if(!this.failedToCreate){for(var Dc in W.program.set(this.program),W.setDepthMode(Z),W.setStencilMode(ea),W.setColorMode(wa),W.setCullFace(Ga),this.fixedUniforms)this.fixedUniforms[Dc].set(Sa[Dc]);cc&&cc.setUniforms(W,this.binderUniforms,nc,{zoom:mc});Z=(Gb={},Gb[dc.LINES]=2,Gb[dc.TRIANGLES]=3,Gb[dc.LINE_STRIP]=1,Gb)[aa];Gb=0;for(Ib=Ib.get();Gb<Ib.length;Gb+=1)ea=Ib[Gb],wa=ea.vaos||(ea.vaos={}),(wa[ab]||(wa[ab]=new Ph)).bind(W,this,yb,cc?cc.getPaintVertexBuffers():
[],Hb,ea.vertexOffset,lc,kc),dc.drawElements(aa,ea.primitiveLength*Z,dc.UNSIGNED_SHORT,ea.primitiveOffset*Z*2)}};var mg=function(W,aa,Z,ea){var wa=aa.style.light,Ga=wa.properties.get("position");Ga=[Ga.x,Ga.y,Ga.z];var Sa=a.create$1();"viewport"===wa.properties.get("anchor")&&a.fromRotation(Sa,-aa.transform.angle);a.transformMat3(Ga,Ga,Sa);aa=wa.properties.get("color");return{u_matrix:W,u_lightpos:Ga,u_lightintensity:wa.properties.get("intensity"),u_lightcolor:[aa.r,aa.g,aa.b],u_vertical_gradient:+Z,
u_opacity:ea}},ti=function(W,aa,Z,ea){var wa=W.transform;if("map"===ea.paint.get("circle-pitch-alignment")){var Ga=T(Z,1,wa.zoom);var Sa=!0;Ga=[Ga,Ga]}else Sa=!1,Ga=wa.pixelsToGLUnits;return{u_camera_to_center_distance:wa.cameraToCenterDistance,u_scale_with_map:+("map"===ea.paint.get("circle-pitch-scale")),u_matrix:W.translatePosMatrix(aa.posMatrix,Z,ea.paint.get("circle-translate"),ea.paint.get("circle-translate-anchor")),u_pitch_with_map:+Sa,u_device_pixel_ratio:a.browser.devicePixelRatio,u_extrude_scale:Ga}},
ui=function(W,aa,Z){return void 0===Z&&(Z=1),{u_matrix:W,u_color:aa,u_overlay:0,u_overlay_scale:Z}},Jj=function(W,aa,Z,ea){return{u_matrix:W,u_extrude_scale:T(aa,1,Z),u_intensity:ea}},Qi=function(W,aa,Z){var ea=W.transform;return{u_matrix:ia(W,aa,Z),u_ratio:1/T(aa,1,ea.zoom),u_device_pixel_ratio:a.browser.devicePixelRatio,u_units_to_pixels:[1/ea.pixelsToGLUnits[0],1/ea.pixelsToGLUnits[1]]}},vi,ck=function(W,aa,Z,ea,wa,Ga,Sa,ab,yb,Hb){var Ib=wa.transform;return{u_is_size_zoom_constant:+("constant"===
W||"source"===W),u_is_size_feature_constant:+("constant"===W||"camera"===W),u_size_t:aa?aa.uSizeT:0,u_size:aa?aa.uSize:0,u_camera_to_center_distance:Ib.cameraToCenterDistance,u_pitch:Ib.pitch/360*2*Math.PI,u_rotate_symbol:+Z,u_aspect_ratio:Ib.width/Ib.height,u_fade_change:wa.options.fadeDuration?wa.symbolFadeChange:1,u_matrix:Ga,u_label_plane_matrix:Sa,u_coord_matrix:ab,u_is_text:+yb,u_pitch_with_map:+ea,u_texsize:Hb,u_texture:0}},Kj=function(W,aa,Z,ea,wa,Ga,Sa,ab,yb,Hb,Ib){var nc=wa.transform;return a.extend(ck(W,
aa,Z,ea,wa,Ga,Sa,ab,yb,Hb),{u_gamma_scale:ea?Math.cos(nc._pitch)*nc.cameraToCenterDistance:1,u_device_pixel_ratio:a.browser.devicePixelRatio,u_is_halo:+Ib})},dk=function(W,aa,Z,ea,wa,Ga,Sa,ab,yb,Hb){return a.extend(Kj(W,aa,Z,ea,wa,Ga,Sa,ab,!0,yb,!0),{u_texsize_icon:Hb,u_texture_icon:1})},Ri={fillExtrusion:function(W,aa){return{u_matrix:new a.UniformMatrix4f(W,aa.u_matrix),u_lightpos:new a.Uniform3f(W,aa.u_lightpos),u_lightintensity:new a.Uniform1f(W,aa.u_lightintensity),u_lightcolor:new a.Uniform3f(W,
aa.u_lightcolor),u_vertical_gradient:new a.Uniform1f(W,aa.u_vertical_gradient),u_opacity:new a.Uniform1f(W,aa.u_opacity)}},fillExtrusionPattern:function(W,aa){return{u_matrix:new a.UniformMatrix4f(W,aa.u_matrix),u_lightpos:new a.Uniform3f(W,aa.u_lightpos),u_lightintensity:new a.Uniform1f(W,aa.u_lightintensity),u_lightcolor:new a.Uniform3f(W,aa.u_lightcolor),u_vertical_gradient:new a.Uniform1f(W,aa.u_vertical_gradient),u_height_factor:new a.Uniform1f(W,aa.u_height_factor),u_image:new a.Uniform1i(W,
aa.u_image),u_texsize:new a.Uniform2f(W,aa.u_texsize),u_pixel_coord_upper:new a.Uniform2f(W,aa.u_pixel_coord_upper),u_pixel_coord_lower:new a.Uniform2f(W,aa.u_pixel_coord_lower),u_scale:new a.Uniform3f(W,aa.u_scale),u_fade:new a.Uniform1f(W,aa.u_fade),u_opacity:new a.Uniform1f(W,aa.u_opacity)}},fill:function(W,aa){return{u_matrix:new a.UniformMatrix4f(W,aa.u_matrix)}},fillPattern:function(W,aa){return{u_matrix:new a.UniformMatrix4f(W,aa.u_matrix),u_image:new a.Uniform1i(W,aa.u_image),u_texsize:new a.Uniform2f(W,
aa.u_texsize),u_pixel_coord_upper:new a.Uniform2f(W,aa.u_pixel_coord_upper),u_pixel_coord_lower:new a.Uniform2f(W,aa.u_pixel_coord_lower),u_scale:new a.Uniform3f(W,aa.u_scale),u_fade:new a.Uniform1f(W,aa.u_fade)}},fillOutline:function(W,aa){return{u_matrix:new a.UniformMatrix4f(W,aa.u_matrix),u_world:new a.Uniform2f(W,aa.u_world)}},fillOutlinePattern:function(W,aa){return{u_matrix:new a.UniformMatrix4f(W,aa.u_matrix),u_world:new a.Uniform2f(W,aa.u_world),u_image:new a.Uniform1i(W,aa.u_image),u_texsize:new a.Uniform2f(W,
aa.u_texsize),u_pixel_coord_upper:new a.Uniform2f(W,aa.u_pixel_coord_upper),u_pixel_coord_lower:new a.Uniform2f(W,aa.u_pixel_coord_lower),u_scale:new a.Uniform3f(W,aa.u_scale),u_fade:new a.Uniform1f(W,aa.u_fade)}},circle:function(W,aa){return{u_camera_to_center_distance:new a.Uniform1f(W,aa.u_camera_to_center_distance),u_scale_with_map:new a.Uniform1i(W,aa.u_scale_with_map),u_pitch_with_map:new a.Uniform1i(W,aa.u_pitch_with_map),u_extrude_scale:new a.Uniform2f(W,aa.u_extrude_scale),u_device_pixel_ratio:new a.Uniform1f(W,
aa.u_device_pixel_ratio),u_matrix:new a.UniformMatrix4f(W,aa.u_matrix)}},collisionBox:function(W,aa){return{u_matrix:new a.UniformMatrix4f(W,aa.u_matrix),u_camera_to_center_distance:new a.Uniform1f(W,aa.u_camera_to_center_distance),u_pixels_to_tile_units:new a.Uniform1f(W,aa.u_pixels_to_tile_units),u_extrude_scale:new a.Uniform2f(W,aa.u_extrude_scale),u_overscale_factor:new a.Uniform1f(W,aa.u_overscale_factor)}},collisionCircle:function(W,aa){return{u_matrix:new a.UniformMatrix4f(W,aa.u_matrix),u_inv_matrix:new a.UniformMatrix4f(W,
aa.u_inv_matrix),u_camera_to_center_distance:new a.Uniform1f(W,aa.u_camera_to_center_distance),u_viewport_size:new a.Uniform2f(W,aa.u_viewport_size)}},debug:function(W,aa){return{u_color:new a.UniformColor(W,aa.u_color),u_matrix:new a.UniformMatrix4f(W,aa.u_matrix),u_overlay:new a.Uniform1i(W,aa.u_overlay),u_overlay_scale:new a.Uniform1f(W,aa.u_overlay_scale)}},clippingMask:function(W,aa){return{u_matrix:new a.UniformMatrix4f(W,aa.u_matrix)}},heatmap:function(W,aa){return{u_extrude_scale:new a.Uniform1f(W,
aa.u_extrude_scale),u_intensity:new a.Uniform1f(W,aa.u_intensity),u_matrix:new a.UniformMatrix4f(W,aa.u_matrix)}},heatmapTexture:function(W,aa){return{u_matrix:new a.UniformMatrix4f(W,aa.u_matrix),u_world:new a.Uniform2f(W,aa.u_world),u_image:new a.Uniform1i(W,aa.u_image),u_color_ramp:new a.Uniform1i(W,aa.u_color_ramp),u_opacity:new a.Uniform1f(W,aa.u_opacity)}},hillshade:function(W,aa){return{u_matrix:new a.UniformMatrix4f(W,aa.u_matrix),u_image:new a.Uniform1i(W,aa.u_image),u_latrange:new a.Uniform2f(W,
aa.u_latrange),u_light:new a.Uniform2f(W,aa.u_light),u_shadow:new a.UniformColor(W,aa.u_shadow),u_highlight:new a.UniformColor(W,aa.u_highlight),u_accent:new a.UniformColor(W,aa.u_accent)}},hillshadePrepare:function(W,aa){return{u_matrix:new a.UniformMatrix4f(W,aa.u_matrix),u_image:new a.Uniform1i(W,aa.u_image),u_dimension:new a.Uniform2f(W,aa.u_dimension),u_zoom:new a.Uniform1f(W,aa.u_zoom),u_maxzoom:new a.Uniform1f(W,aa.u_maxzoom),u_unpack:new a.Uniform4f(W,aa.u_unpack)}},line:function(W,aa){return{u_matrix:new a.UniformMatrix4f(W,
aa.u_matrix),u_ratio:new a.Uniform1f(W,aa.u_ratio),u_device_pixel_ratio:new a.Uniform1f(W,aa.u_device_pixel_ratio),u_units_to_pixels:new a.Uniform2f(W,aa.u_units_to_pixels)}},lineGradient:function(W,aa){return{u_matrix:new a.UniformMatrix4f(W,aa.u_matrix),u_ratio:new a.Uniform1f(W,aa.u_ratio),u_device_pixel_ratio:new a.Uniform1f(W,aa.u_device_pixel_ratio),u_units_to_pixels:new a.Uniform2f(W,aa.u_units_to_pixels),u_image:new a.Uniform1i(W,aa.u_image)}},linePattern:function(W,aa){return{u_matrix:new a.UniformMatrix4f(W,
aa.u_matrix),u_texsize:new a.Uniform2f(W,aa.u_texsize),u_ratio:new a.Uniform1f(W,aa.u_ratio),u_device_pixel_ratio:new a.Uniform1f(W,aa.u_device_pixel_ratio),u_image:new a.Uniform1i(W,aa.u_image),u_units_to_pixels:new a.Uniform2f(W,aa.u_units_to_pixels),u_scale:new a.Uniform3f(W,aa.u_scale),u_fade:new a.Uniform1f(W,aa.u_fade)}},lineSDF:function(W,aa){return{u_matrix:new a.UniformMatrix4f(W,aa.u_matrix),u_ratio:new a.Uniform1f(W,aa.u_ratio),u_device_pixel_ratio:new a.Uniform1f(W,aa.u_device_pixel_ratio),
u_units_to_pixels:new a.Uniform2f(W,aa.u_units_to_pixels),u_patternscale_a:new a.Uniform2f(W,aa.u_patternscale_a),u_patternscale_b:new a.Uniform2f(W,aa.u_patternscale_b),u_sdfgamma:new a.Uniform1f(W,aa.u_sdfgamma),u_image:new a.Uniform1i(W,aa.u_image),u_tex_y_a:new a.Uniform1f(W,aa.u_tex_y_a),u_tex_y_b:new a.Uniform1f(W,aa.u_tex_y_b),u_mix:new a.Uniform1f(W,aa.u_mix)}},raster:function(W,aa){return{u_matrix:new a.UniformMatrix4f(W,aa.u_matrix),u_tl_parent:new a.Uniform2f(W,aa.u_tl_parent),u_scale_parent:new a.Uniform1f(W,
aa.u_scale_parent),u_buffer_scale:new a.Uniform1f(W,aa.u_buffer_scale),u_fade_t:new a.Uniform1f(W,aa.u_fade_t),u_opacity:new a.Uniform1f(W,aa.u_opacity),u_image0:new a.Uniform1i(W,aa.u_image0),u_image1:new a.Uniform1i(W,aa.u_image1),u_brightness_low:new a.Uniform1f(W,aa.u_brightness_low),u_brightness_high:new a.Uniform1f(W,aa.u_brightness_high),u_saturation_factor:new a.Uniform1f(W,aa.u_saturation_factor),u_contrast_factor:new a.Uniform1f(W,aa.u_contrast_factor),u_spin_weights:new a.Uniform3f(W,aa.u_spin_weights)}},
symbolIcon:function(W,aa){return{u_is_size_zoom_constant:new a.Uniform1i(W,aa.u_is_size_zoom_constant),u_is_size_feature_constant:new a.Uniform1i(W,aa.u_is_size_feature_constant),u_size_t:new a.Uniform1f(W,aa.u_size_t),u_size:new a.Uniform1f(W,aa.u_size),u_camera_to_center_distance:new a.Uniform1f(W,aa.u_camera_to_center_distance),u_pitch:new a.Uniform1f(W,aa.u_pitch),u_rotate_symbol:new a.Uniform1i(W,aa.u_rotate_symbol),u_aspect_ratio:new a.Uniform1f(W,aa.u_aspect_ratio),u_fade_change:new a.Uniform1f(W,
aa.u_fade_change),u_matrix:new a.UniformMatrix4f(W,aa.u_matrix),u_label_plane_matrix:new a.UniformMatrix4f(W,aa.u_label_plane_matrix),u_coord_matrix:new a.UniformMatrix4f(W,aa.u_coord_matrix),u_is_text:new a.Uniform1i(W,aa.u_is_text),u_pitch_with_map:new a.Uniform1i(W,aa.u_pitch_with_map),u_texsize:new a.Uniform2f(W,aa.u_texsize),u_texture:new a.Uniform1i(W,aa.u_texture)}},symbolSDF:function(W,aa){return{u_is_size_zoom_constant:new a.Uniform1i(W,aa.u_is_size_zoom_constant),u_is_size_feature_constant:new a.Uniform1i(W,
aa.u_is_size_feature_constant),u_size_t:new a.Uniform1f(W,aa.u_size_t),u_size:new a.Uniform1f(W,aa.u_size),u_camera_to_center_distance:new a.Uniform1f(W,aa.u_camera_to_center_distance),u_pitch:new a.Uniform1f(W,aa.u_pitch),u_rotate_symbol:new a.Uniform1i(W,aa.u_rotate_symbol),u_aspect_ratio:new a.Uniform1f(W,aa.u_aspect_ratio),u_fade_change:new a.Uniform1f(W,aa.u_fade_change),u_matrix:new a.UniformMatrix4f(W,aa.u_matrix),u_label_plane_matrix:new a.UniformMatrix4f(W,aa.u_label_plane_matrix),u_coord_matrix:new a.UniformMatrix4f(W,
aa.u_coord_matrix),u_is_text:new a.Uniform1i(W,aa.u_is_text),u_pitch_with_map:new a.Uniform1i(W,aa.u_pitch_with_map),u_texsize:new a.Uniform2f(W,aa.u_texsize),u_texture:new a.Uniform1i(W,aa.u_texture),u_gamma_scale:new a.Uniform1f(W,aa.u_gamma_scale),u_device_pixel_ratio:new a.Uniform1f(W,aa.u_device_pixel_ratio),u_is_halo:new a.Uniform1i(W,aa.u_is_halo)}},symbolTextAndIcon:function(W,aa){return{u_is_size_zoom_constant:new a.Uniform1i(W,aa.u_is_size_zoom_constant),u_is_size_feature_constant:new a.Uniform1i(W,
aa.u_is_size_feature_constant),u_size_t:new a.Uniform1f(W,aa.u_size_t),u_size:new a.Uniform1f(W,aa.u_size),u_camera_to_center_distance:new a.Uniform1f(W,aa.u_camera_to_center_distance),u_pitch:new a.Uniform1f(W,aa.u_pitch),u_rotate_symbol:new a.Uniform1i(W,aa.u_rotate_symbol),u_aspect_ratio:new a.Uniform1f(W,aa.u_aspect_ratio),u_fade_change:new a.Uniform1f(W,aa.u_fade_change),u_matrix:new a.UniformMatrix4f(W,aa.u_matrix),u_label_plane_matrix:new a.UniformMatrix4f(W,aa.u_label_plane_matrix),u_coord_matrix:new a.UniformMatrix4f(W,
aa.u_coord_matrix),u_is_text:new a.Uniform1i(W,aa.u_is_text),u_pitch_with_map:new a.Uniform1i(W,aa.u_pitch_with_map),u_texsize:new a.Uniform2f(W,aa.u_texsize),u_texsize_icon:new a.Uniform2f(W,aa.u_texsize_icon),u_texture:new a.Uniform1i(W,aa.u_texture),u_texture_icon:new a.Uniform1i(W,aa.u_texture_icon),u_gamma_scale:new a.Uniform1f(W,aa.u_gamma_scale),u_device_pixel_ratio:new a.Uniform1f(W,aa.u_device_pixel_ratio),u_is_halo:new a.Uniform1i(W,aa.u_is_halo)}},background:function(W,aa){return{u_matrix:new a.UniformMatrix4f(W,
aa.u_matrix),u_opacity:new a.Uniform1f(W,aa.u_opacity),u_color:new a.UniformColor(W,aa.u_color)}},backgroundPattern:function(W,aa){return{u_matrix:new a.UniformMatrix4f(W,aa.u_matrix),u_opacity:new a.Uniform1f(W,aa.u_opacity),u_image:new a.Uniform1i(W,aa.u_image),u_pattern_tl_a:new a.Uniform2f(W,aa.u_pattern_tl_a),u_pattern_br_a:new a.Uniform2f(W,aa.u_pattern_br_a),u_pattern_tl_b:new a.Uniform2f(W,aa.u_pattern_tl_b),u_pattern_br_b:new a.Uniform2f(W,aa.u_pattern_br_b),u_texsize:new a.Uniform2f(W,aa.u_texsize),
u_mix:new a.Uniform1f(W,aa.u_mix),u_pattern_size_a:new a.Uniform2f(W,aa.u_pattern_size_a),u_pattern_size_b:new a.Uniform2f(W,aa.u_pattern_size_b),u_scale_a:new a.Uniform1f(W,aa.u_scale_a),u_scale_b:new a.Uniform1f(W,aa.u_scale_b),u_pixel_coord_upper:new a.Uniform2f(W,aa.u_pixel_coord_upper),u_pixel_coord_lower:new a.Uniform2f(W,aa.u_pixel_coord_lower),u_tile_units_to_pixels:new a.Uniform1f(W,aa.u_tile_units_to_pixels)}}},sk=a.identity(new Float32Array(16)),Qh=new a.Color(1,0,0,1),Rh=new a.Color(0,
1,0,1),Bg=new a.Color(0,0,1,1),ng=new a.Color(1,0,1,1),xh=new a.Color(0,1,1,1),Si={symbol:function(W,aa,Z,ea,wa){if("translucent"===W.renderPass){var Ga=Bd.disabled,Sa=W.colorModeForRenderPass();if(Z.layout.get("text-variable-anchor")){var ab=Z.layout.get("text-rotation-alignment"),yb=Z.layout.get("text-pitch-alignment"),Hb=W.transform;ab="map"===ab;yb="map"===yb;for(var Ib=0;Ib<ea.length;Ib+=1){var nc=ea[Ib],mc=aa.getTile(nc),cc=mc.getBucket(Z);if(cc&&cc.text&&cc.text.segments.get().length){var lc=
a.evaluateSizeForZoom(cc.textSizeData,Hb.zoom),kc=T(mc,1,W.transform.zoom),Gb=C(nc.posMatrix,yb,ab,W.transform,kc),dc="none"!==Z.layout.get("icon-text-fit")&&cc.hasIconData();if(lc){kc=ab;var Dc=yb,Uc=wa,jd=a.symbolSize,Ic=Hb;nc=nc.posMatrix;var ld=Math.pow(2,Hb.zoom-mc.tileID.overscaledZ),id=lc,yd=dc,zd=cc.text.placedSymbolArray;lc=cc.text.dynamicLayoutVertexArray;dc=cc.icon.dynamicLayoutVertexArray;mc={};lc.clear();for(var ud=0;ud<zd.length;ud++){var ie=zd.get(ud),ge=ie.hidden||!ie.crossTileID||
cc.allowVerticalPlacement&&!ie.placedOrientation?null:Uc[ie.crossTileID];if(ge){var Ee=new a.Point(ie.anchorX,ie.anchorY),Ge=D(Ee,Dc?nc:Gb),Be=.5+Ic.cameraToCenterDistance/Ge.signedDistanceFromCamera*.5,Qd=jd.evaluateSizeForFeature(cc.textSizeData,id,ie)*Be/a.ONE_EM;Dc&&(Qd*=cc.tilePixelRatio/ld);Be=ge.anchor;var qe=ge.width,Ne=ge.height,ze=ge.textOffset;ge=ge.textBoxScale;var Te=a.getAnchorAlignment(Be);qe*=-(Te.horizontalAlign-.5);Ne*=-(Te.verticalAlign-.5);Be=a.evaluateVariableOffset(Be,ze);Be=
new a.Point((qe/ge+Be[0])*Qd,(Ne/ge+Be[1])*Qd);Ee=Dc?D(Ee.add(Be),Gb).point:Ge.point.add(kc?Be.rotate(-Ic.angle):Be);Ge=cc.allowVerticalPlacement&&ie.placedOrientation===a.WritingMode.vertical?Math.PI/2:0;for(Be=0;Be<ie.numGlyphs;Be++)a.addDynamicAttributes(lc,Ee,Ge);yd&&0<=ie.associatedIconIndex&&(mc[ie.associatedIconIndex]={shiftedAnchor:Ee,angle:Ge})}else M(ie.numGlyphs,lc)}if(yd){dc.clear();kc=cc.icon.placedSymbolArray;for(Dc=0;Dc<kc.length;Dc++)if(Uc=kc.get(Dc),Uc.hidden)M(Uc.numGlyphs,dc);else if(jd=
mc[Dc])for(Ic=0;Ic<Uc.numGlyphs;Ic++)a.addDynamicAttributes(dc,jd.shiftedAnchor,jd.angle);else M(Uc.numGlyphs,dc);cc.icon.dynamicLayoutVertexBuffer.updateData(dc)}cc.text.dynamicLayoutVertexBuffer.updateData(lc)}}}}0!==Z.paint.get("icon-opacity").constantOr(1)&&la(W,aa,Z,ea,!1,Z.paint.get("icon-translate"),Z.paint.get("icon-translate-anchor"),Z.layout.get("icon-rotation-alignment"),Z.layout.get("icon-pitch-alignment"),Z.layout.get("icon-keep-upright"),Ga,Sa);0!==Z.paint.get("text-opacity").constantOr(1)&&
la(W,aa,Z,ea,!0,Z.paint.get("text-translate"),Z.paint.get("text-translate-anchor"),Z.layout.get("text-rotation-alignment"),Z.layout.get("text-pitch-alignment"),Z.layout.get("text-keep-upright"),Ga,Sa);aa.map.showCollisionBoxes&&(ja(W,aa,Z,ea,Z.paint.get("text-translate"),Z.paint.get("text-translate-anchor"),!0),ja(W,aa,Z,ea,Z.paint.get("icon-translate"),Z.paint.get("icon-translate-anchor"),!1))}},circle:function(W,aa,Z,ea){if("translucent"===W.renderPass){var wa=Z.paint.get("circle-opacity"),Ga=Z.paint.get("circle-stroke-width"),
Sa=Z.paint.get("circle-stroke-opacity"),ab=void 0!==Z.layout.get("circle-sort-key").constantOr(1);if(0!==wa.constantOr(1)||0!==Ga.constantOr(1)&&0!==Sa.constantOr(1)){wa=W.context;Ga=wa.gl;Sa=W.depthModeForSublayer(0,Ad.ReadOnly);for(var yb=Bd.disabled,Hb=W.colorModeForRenderPass(),Ib=[],nc=0;nc<ea.length;nc++){var mc=ea[nc],cc=aa.getTile(mc),lc=cc.getBucket(Z);if(lc){var kc=lc.programConfigurations.get(Z.id);mc={programConfiguration:kc,program:W.useProgram("circle",kc),layoutVertexBuffer:lc.layoutVertexBuffer,
indexBuffer:lc.indexBuffer,uniformValues:ti(W,mc,cc,Z)};if(ab)for(cc=0,lc=lc.segments.get();cc<lc.length;cc+=1)kc=lc[cc],Ib.push({segments:new a.SegmentVector([kc]),sortKey:kc.sortKey,state:mc});else Ib.push({segments:lc.segments,sortKey:0,state:mc})}}ab&&Ib.sort(function(Gb,dc){return Gb.sortKey-dc.sortKey});for(aa=0;aa<Ib.length;aa+=1)ea=Ib[aa],ab=ea.state,ab.program.draw(wa,Ga.TRIANGLES,Sa,yb,Hb,le.disabled,ab.uniformValues,Z.id,ab.layoutVertexBuffer,ab.indexBuffer,ea.segments,Z.paint,W.transform.zoom,
ab.programConfiguration)}}},heatmap:function(W,aa,Z,ea){if(0!==Z.paint.get("heatmap-opacity"))if("offscreen"===W.renderPass){var wa=W.context,Ga=wa.gl,Sa=Bd.disabled,ab=new be([Ga.ONE,Ga.ONE],a.Color.transparent,[!0,!0,!0,!0]);!function(cc,lc,kc){var Gb=cc.gl;cc.activeTexture.set(Gb.TEXTURE1);cc.viewport.set([0,0,lc.width/4,lc.height/4]);var dc=kc.heatmapFbo;if(dc)Gb.bindTexture(Gb.TEXTURE_2D,dc.colorAttachment.get()),cc.bindFramebuffer.set(dc.framebuffer);else{var Dc=Gb.createTexture();Gb.bindTexture(Gb.TEXTURE_2D,
Dc);Gb.texParameteri(Gb.TEXTURE_2D,Gb.TEXTURE_WRAP_S,Gb.CLAMP_TO_EDGE);Gb.texParameteri(Gb.TEXTURE_2D,Gb.TEXTURE_WRAP_T,Gb.CLAMP_TO_EDGE);Gb.texParameteri(Gb.TEXTURE_2D,Gb.TEXTURE_MIN_FILTER,Gb.LINEAR);Gb.texParameteri(Gb.TEXTURE_2D,Gb.TEXTURE_MAG_FILTER,Gb.LINEAR);kc=dc=kc.heatmapFbo=cc.createFramebuffer(lc.width/4,lc.height/4,!1);Gb=cc.gl;Gb.texImage2D(Gb.TEXTURE_2D,0,Gb.RGBA,lc.width/4,lc.height/4,0,Gb.RGBA,cc.extRenderToTextureHalfFloat?cc.extTextureHalfFloat.HALF_FLOAT_OES:Gb.UNSIGNED_BYTE,null);
kc.colorAttachment.set(Dc)}}(wa,W,Z);wa.clear({color:a.Color.transparent});for(var yb=0;yb<ea.length;yb++){var Hb=ea[yb];if(!aa.hasRenderableParent(Hb)){var Ib=aa.getTile(Hb),nc=Ib.getBucket(Z);if(nc){var mc=nc.programConfigurations.get(Z.id);W.useProgram("heatmap",mc).draw(wa,Ga.TRIANGLES,Ad.disabled,Sa,ab,le.disabled,Jj(Hb.posMatrix,Ib,W.transform.zoom,Z.paint.get("heatmap-intensity")),Z.id,nc.layoutVertexBuffer,nc.indexBuffer,nc.segments,Z.paint,W.transform.zoom,mc)}}}wa.viewport.set([0,0,W.width,
W.height])}else"translucent"===W.renderPass&&(W.context.setColorMode(W.colorModeForRenderPass()),function(cc,lc){var kc=cc.context,Gb=kc.gl,dc=lc.heatmapFbo;if(dc){kc.activeTexture.set(Gb.TEXTURE0);Gb.bindTexture(Gb.TEXTURE_2D,dc.colorAttachment.get());kc.activeTexture.set(Gb.TEXTURE1);(dc=lc.colorRampTexture)||(dc=lc.colorRampTexture=new a.Texture(kc,lc.colorRamp,Gb.RGBA));dc.bind(Gb.LINEAR,Gb.CLAMP_TO_EDGE);dc=cc.useProgram("heatmapTexture");var Dc=dc.draw;Gb=Gb.TRIANGLES;var Uc=Ad.disabled,jd=
Bd.disabled,Ic=cc.colorModeForRenderPass(),ld=le.disabled;var id=a.create();a.ortho(id,0,cc.width,cc.height,0,0,1);var yd=cc.context.gl;id={u_matrix:id,u_world:[yd.drawingBufferWidth,yd.drawingBufferHeight],u_image:0,u_color_ramp:1,u_opacity:lc.paint.get("heatmap-opacity")};Dc.call(dc,kc,Gb,Uc,jd,Ic,ld,id,lc.id,cc.viewportBuffer,cc.quadTriangleIndexBuffer,cc.viewportSegments,lc.paint,cc.transform.zoom)}}(W,Z))},line:function(W,aa,Z,ea){if("translucent"===W.renderPass){var wa=Z.paint.get("line-opacity"),
Ga=Z.paint.get("line-width");if(0!==wa.constantOr(1)&&0!==Ga.constantOr(1)){wa=W.depthModeForSublayer(0,Ad.ReadOnly);Ga=W.colorModeForRenderPass();var Sa=Z.paint.get("line-dasharray"),ab=Z.paint.get("line-pattern"),yb=ab.constantOr(1),Hb=Z.paint.get("line-gradient"),Ib=Z.getCrossfadeParameters(),nc=yb?"linePattern":Sa?"lineSDF":Hb?"lineGradient":"line",mc=W.context,cc=mc.gl,lc=!0;if(Hb){mc.activeTexture.set(cc.TEXTURE0);var kc=Z.gradientTexture;if(!Z.gradient)return;kc||(kc=Z.gradientTexture=new a.Texture(mc,
Z.gradient,cc.RGBA));kc.bind(cc.LINEAR,cc.CLAMP_TO_EDGE)}for(kc=0;kc<ea.length;kc+=1){var Gb=ea[kc],dc=aa.getTile(Gb);if(!yb||dc.patternsLoaded()){var Dc=dc.getBucket(Z);if(Dc){var Uc=Dc.programConfigurations.get(Z.id),jd=W.context.program.get(),Ic=W.useProgram(nc,Uc);lc=lc||Ic.program!==jd;var ld=ab.constantOr(null);if(ld&&dc.imageAtlas){var id=dc.imageAtlas;jd=id.patternPositions[ld.to.toString()];ld=id.patternPositions[ld.from.toString()];jd&&ld&&Uc.setConstantPatternPositions(jd,ld)}if(yb){jd=
W;ld=dc;id=Z;var yd=Ib,zd=jd.transform,ud=1/T(ld,1,zd.tileZoom);jd={u_matrix:ia(jd,ld,id),u_texsize:ld.imageAtlasTexture.size,u_ratio:1/T(ld,1,zd.zoom),u_device_pixel_ratio:a.browser.devicePixelRatio,u_image:0,u_scale:[ud,yd.fromScale,yd.toScale],u_fade:yd.t,u_units_to_pixels:[1/zd.pixelsToGLUnits[0],1/zd.pixelsToGLUnits[1]]}}else if(Sa){jd=W;ld=dc;id=Z;var ie=Sa;yd=Ib;zd=jd.lineAtlas;ud=1/T(ld,1,jd.transform.tileZoom);var ge="round"===id.layout.get("line-cap"),Ee=zd.getDash(ie.from,ge);ie=zd.getDash(ie.to,
ge);ge=Ee.width*yd.fromScale;var Ge=ie.width*yd.toScale;jd=a.extend(Qi(jd,ld,id),{u_patternscale_a:[ud/ge,-Ee.height/2],u_patternscale_b:[ud/Ge,-ie.height/2],u_sdfgamma:zd.width/(256*Math.min(ge,Ge)*a.browser.devicePixelRatio)/2,u_image:0,u_tex_y_a:Ee.y,u_tex_y_b:ie.y,u_mix:yd.t})}else jd=Hb?a.extend(Qi(W,dc,Z),{u_image:0}):Qi(W,dc,Z);yb?(mc.activeTexture.set(cc.TEXTURE0),dc.imageAtlasTexture.bind(cc.LINEAR,cc.CLAMP_TO_EDGE),Uc.updatePaintBuffers(Ib)):Sa&&(lc||W.lineAtlas.dirty)&&(mc.activeTexture.set(cc.TEXTURE0),
W.lineAtlas.bind(mc));Ic.draw(mc,cc.TRIANGLES,wa,W.stencilModeForClipping(Gb),Ga,le.disabled,jd,Z.id,Dc.layoutVertexBuffer,Dc.indexBuffer,Dc.segments,Z.paint,W.transform.zoom,Uc);lc=!1}}}}}},fill:function(W,aa,Z,ea){var wa=Z.paint.get("fill-color"),Ga=Z.paint.get("fill-opacity");if(0!==Ga.constantOr(1)){var Sa=W.colorModeForRenderPass(),ab=Z.paint.get("fill-pattern");wa=W.opaquePassEnabledForLayer()&&!ab.constantOr(1)&&1===wa.constantOr(a.Color.transparent).a&&1===Ga.constantOr(0)?"opaque":"translucent";
W.renderPass===wa&&(wa=W.depthModeForSublayer(1,"opaque"===W.renderPass?Ad.ReadWrite:Ad.ReadOnly),oa(W,aa,Z,ea,wa,Sa,!1));"translucent"===W.renderPass&&Z.paint.get("fill-antialias")&&(wa=W.depthModeForSublayer(Z.getPaintProperty("fill-outline-color")?2:0,Ad.ReadOnly),oa(W,aa,Z,ea,wa,Sa,!0))}},"fill-extrusion":function(W,aa,Z,ea){var wa=Z.paint.get("fill-extrusion-opacity");if(0!==wa&&"translucent"===W.renderPass){var Ga=new Ad(W.context.gl.LEQUAL,Ad.ReadWrite,W.depthRangeFor3D);1!==wa||Z.paint.get("fill-extrusion-pattern").constantOr(1)?
(sa(W,aa,Z,ea,Ga,Bd.disabled,be.disabled),sa(W,aa,Z,ea,Ga,W.stencilModeFor3D(),W.colorModeForRenderPass())):(wa=W.colorModeForRenderPass(),sa(W,aa,Z,ea,Ga,Bd.disabled,wa))}},hillshade:function(W,aa,Z,ea){if("offscreen"===W.renderPass||"translucent"===W.renderPass){var wa=W.context,Ga=aa.getSource().maxzoom,Sa=W.depthModeForSublayer(0,Ad.ReadOnly),ab=W.colorModeForRenderPass(),yb="translucent"===W.renderPass?W.stencilConfigForOverlap(ea):[{},ea];ea=yb[0];var Hb=0;for(yb=yb[1];Hb<yb.length;Hb+=1){var Ib=
yb[Hb],nc=aa.getTile(Ib);if(nc.needsHillshadePrepare&&"offscreen"===W.renderPass){var mc=W,cc=nc,lc=Z;Ib=Ga;var kc=Sa;nc=Bd.disabled;var Gb=ab,dc=mc.context,Dc=dc.gl,Uc=cc.dem;if(Uc&&Uc.data){var jd=Uc.dim,Ic=Uc.stride,ld=Uc.getPixels();(dc.activeTexture.set(Dc.TEXTURE1),dc.pixelStoreUnpackPremultiplyAlpha.set(!1),cc.demTexture=cc.demTexture||mc.getTileTexture(Ic),cc.demTexture)?(Ic=cc.demTexture,Ic.update(ld,{premultiply:!1}),Ic.bind(Dc.NEAREST,Dc.CLAMP_TO_EDGE)):(cc.demTexture=new a.Texture(dc,
ld,Dc.RGBA,{premultiply:!1}),cc.demTexture.bind(Dc.NEAREST,Dc.CLAMP_TO_EDGE));dc.activeTexture.set(Dc.TEXTURE0);ld=cc.fbo;ld||(Ic=new a.Texture(dc,{width:jd,height:jd,data:null},Dc.RGBA),Ic.bind(Dc.LINEAR,Dc.CLAMP_TO_EDGE),(ld=cc.fbo=dc.createFramebuffer(jd,jd,!0)).colorAttachment.set(Ic.texture));dc.bindFramebuffer.set(ld.framebuffer);dc.viewport.set([0,0,jd,jd]);jd=mc.useProgram("hillshadePrepare");ld=jd.draw;Dc=Dc.TRIANGLES;Ic=le.disabled;var id=cc.tileID,yd=Uc.stride,zd=a.create();Ib=(a.ortho(zd,
0,a.EXTENT,-a.EXTENT,0,0,1),a.translate(zd,zd,[0,-a.EXTENT,0]),{u_matrix:zd,u_image:1,u_dimension:[yd,yd],u_zoom:id.overscaledZ,u_maxzoom:Ib,u_unpack:Uc.getUnpackVector()});ld.call(jd,dc,Dc,kc,nc,Gb,Ic,Ib,lc.id,mc.rasterBoundsBuffer,mc.quadTriangleIndexBuffer,mc.rasterBoundsSegments);cc.needsHillshadePrepare=!1}}else if("translucent"===W.renderPass&&(lc=cc=mc=void 0,kc=W,dc=nc,nc=Z,Gb=Sa,Ib=ea[Ib.overscaledZ],Uc=ab,Dc=kc.context,jd=Dc.gl,Ic=dc.fbo)){ld=kc.useProgram("hillshade");Dc.activeTexture.set(jd.TEXTURE0);
jd.bindTexture(jd.TEXTURE_2D,Ic.colorAttachment.get());Ic=nc.paint.get("hillshade-shadow-color");id=nc.paint.get("hillshade-highlight-color");yd=nc.paint.get("hillshade-accent-color");zd=nc.paint.get("hillshade-illumination-direction")*(Math.PI/180);"viewport"===nc.paint.get("hillshade-illumination-anchor")&&(zd-=kc.transform.angle);var ud=!kc.options.moving;dc={u_matrix:kc.transform.calculatePosMatrix(dc.tileID.toUnwrapped(),ud),u_image:0,u_latrange:(lc=dc.tileID,cc=Math.pow(2,lc.canonical.z),mc=
lc.canonical.y,[(new a.MercatorCoordinate(0,mc/cc)).toLngLat().lat,(new a.MercatorCoordinate(0,(mc+1)/cc)).toLngLat().lat]),u_light:[nc.paint.get("hillshade-exaggeration"),zd],u_shadow:Ic,u_highlight:id,u_accent:yd};ld.draw(Dc,jd.TRIANGLES,Gb,Ib,Uc,le.disabled,dc,nc.id,kc.rasterBoundsBuffer,kc.quadTriangleIndexBuffer,kc.rasterBoundsSegments)}}wa.viewport.set([0,0,W.width,W.height])}},raster:function(W,aa,Z,ea){if("translucent"===W.renderPass&&0!==Z.paint.get("raster-opacity")&&ea.length){var wa=W.context,
Ga=wa.gl,Sa=aa.getSource(),ab=W.useProgram("raster"),yb=W.colorModeForRenderPass(),Hb=Sa instanceof mb?[{},ea]:W.stencilConfigForOverlap(ea);ea=Hb[0];Hb=Hb[1];for(var Ib=Hb[Hb.length-1].overscaledZ,nc=!W.options.moving,mc=0;mc<Hb.length;mc+=1){var cc=Hb[mc],lc=W.depthModeForSublayer(cc.overscaledZ-Ib,1===Z.paint.get("raster-opacity")?Ad.ReadWrite:Ad.ReadOnly,Ga.LESS),kc=aa.getTile(cc),Gb=W.transform.calculatePosMatrix(cc.toUnwrapped(),nc);kc.registerFadeDuration(Z.paint.get("raster-fade-duration"));
var dc=aa.findLoadedParent(cc,0);var Dc=kc,Uc=dc,jd=aa,Ic=W.transform;var ld=Z.paint.get("raster-fade-duration");if(0<ld){var id=a.browser.now(),yd=(id-Dc.timeAdded)/ld;ld=Uc?(id-Uc.timeAdded)/ld:-1;jd=jd.getSource();Ic=Ic.coveringZoomLevel({tileSize:jd.tileSize,roundZoom:jd.roundZoom});Ic=(Ic=!Uc||Math.abs(Uc.tileID.overscaledZ-Ic)>Math.abs(Dc.tileID.overscaledZ-Ic))&&Dc.refreshedUponExpiration?1:a.clamp(Ic?yd:1-ld,0,1);ld=(Dc.refreshedUponExpiration&&1<=yd&&(Dc.refreshedUponExpiration=!1),Uc?{opacity:1,
mix:1-Ic}:{opacity:Ic,mix:0})}else ld={opacity:1,mix:0};yd=Uc=void 0;Dc="nearest"===Z.paint.get("raster-resampling")?Ga.NEAREST:Ga.LINEAR;wa.activeTexture.set(Ga.TEXTURE0);kc.texture.bind(Dc,Ga.CLAMP_TO_EDGE,Ga.LINEAR_MIPMAP_NEAREST);wa.activeTexture.set(Ga.TEXTURE1);dc?(dc.texture.bind(Dc,Ga.CLAMP_TO_EDGE,Ga.LINEAR_MIPMAP_NEAREST),Uc=Math.pow(2,dc.tileID.overscaledZ-kc.tileID.overscaledZ),yd=[kc.tileID.canonical.x*Uc%1,kc.tileID.canonical.y*Uc%1]):kc.texture.bind(Dc,Ga.CLAMP_TO_EDGE,Ga.LINEAR_MIPMAP_NEAREST);
dc=Ic=void 0;Dc=Z;kc=yd||[0,0];Uc=Uc||1;yd=ld.mix;ld=ld.opacity*Dc.paint.get("raster-opacity");jd=Dc.paint.get("raster-brightness-min");id=Dc.paint.get("raster-brightness-max");var zd=(Ic=Dc.paint.get("raster-saturation"),0<Ic?1-1/(1.001-Ic):-Ic);Ic=(dc=Dc.paint.get("raster-contrast"),0<dc?1/(1-dc):1+dc);Dc=Dc.paint.get("raster-hue-rotate");Dc*=Math.PI/180;dc=Math.sin(Dc);Dc=Math.cos(Dc);Gb={u_matrix:Gb,u_tl_parent:kc,u_scale_parent:Uc,u_buffer_scale:1,u_fade_t:yd,u_opacity:ld,u_image0:0,u_image1:1,
u_brightness_low:jd,u_brightness_high:id,u_saturation_factor:zd,u_contrast_factor:Ic,u_spin_weights:[(2*Dc+1)/3,(-Math.sqrt(3)*dc-Dc+1)/3,(Math.sqrt(3)*dc-Dc+1)/3]};Sa instanceof mb?ab.draw(wa,Ga.TRIANGLES,lc,Bd.disabled,yb,le.disabled,Gb,Z.id,Sa.boundsBuffer,W.quadTriangleIndexBuffer,Sa.boundsSegments):ab.draw(wa,Ga.TRIANGLES,lc,ea[cc.overscaledZ],yb,le.disabled,Gb,Z.id,W.rasterBoundsBuffer,W.quadTriangleIndexBuffer,W.rasterBoundsSegments)}}},background:function(W,aa,Z){aa=Z.paint.get("background-color");
var ea=Z.paint.get("background-opacity");if(0!==ea){var wa=W.context,Ga=wa.gl,Sa=W.transform,ab=Sa.tileSize,yb=Z.paint.get("background-pattern");if(!W.isPatternMissing(yb)){var Hb=!yb&&1===aa.a&&1===ea&&W.opaquePassEnabledForLayer()?"opaque":"translucent";if(W.renderPass===Hb){var Ib=Bd.disabled;Hb=W.depthModeForSublayer(0,"opaque"===Hb?Ad.ReadWrite:Ad.ReadOnly);var nc=W.colorModeForRenderPass(),mc=W.useProgram(yb?"backgroundPattern":"background");Sa=Sa.coveringTiles({tileSize:ab});yb&&(wa.activeTexture.set(Ga.TEXTURE0),
W.imageManager.bind(W.context));for(var cc=Z.getCrossfadeParameters(),lc=0;lc<Sa.length;lc+=1){var kc=Sa[lc],Gb=W.transform.calculatePosMatrix(kc.toUnwrapped());if(yb){var dc=ea;var Dc=W;var Uc=yb,jd={tileID:kc,tileSize:ab},Ic=cc;kc=a;var ld=kc.extend,id=Dc.imageManager.getPattern(Uc.from.toString());Uc=Dc.imageManager.getPattern(Uc.to.toString());var yd=Dc.imageManager.getPixelSize(),zd=Math.pow(2,jd.tileID.overscaledZ),ud=jd.tileSize*Math.pow(2,Dc.transform.tileZoom)/zd;zd=ud*(jd.tileID.canonical.x+
jd.tileID.wrap*zd);ud*=jd.tileID.canonical.y;Dc={u_image:0,u_pattern_tl_a:id.tl,u_pattern_br_a:id.br,u_pattern_tl_b:Uc.tl,u_pattern_br_b:Uc.br,u_texsize:[yd.width,yd.height],u_mix:Ic.t,u_pattern_size_a:id.displaySize,u_pattern_size_b:Uc.displaySize,u_scale_a:Ic.fromScale,u_scale_b:Ic.toScale,u_tile_units_to_pixels:1/T(jd,1,Dc.transform.tileZoom),u_pixel_coord_upper:[zd>>16,ud>>16],u_pixel_coord_lower:[65535&zd,65535&ud]};Gb=ld.call(kc,Dc,{u_matrix:Gb,u_opacity:dc})}else Gb={u_matrix:Gb,u_opacity:ea,
u_color:aa};mc.draw(wa,Ga.TRIANGLES,Hb,Ib,nc,le.disabled,Gb,Z.id,W.tileExtentBuffer,W.quadTriangleIndexBuffer,W.tileExtentSegments)}}}}},debug:function(W,aa,Z){for(var ea=0;ea<Z.length;ea++){var wa=W,Ga=aa,Sa=Z[ea],ab=wa.context,yb=ab.gl,Hb=Sa.posMatrix,Ib=wa.useProgram("debug"),nc=Ad.disabled,mc=Bd.disabled,cc=wa.colorModeForRenderPass();ab.activeTexture.set(yb.TEXTURE0);wa.emptyTexture.bind(yb.LINEAR,yb.CLAMP_TO_EDGE);Ib.draw(ab,yb.LINE_STRIP,nc,mc,cc,le.disabled,ui(Hb,a.Color.red),"$debug",wa.debugBuffer,
wa.tileBorderIndexBuffer,wa.debugSegments);cc=Ga.getTileByID(Sa.key).latestRawTileData;cc=Math.floor((cc&&cc.byteLength||0)/1024);Ga=Ga.getTile(Sa).tileSize;Ga=512/Math.min(Ga,512)*(Sa.overscaledZ/wa.transform.zoom)*.5;var lc=Sa.canonical.toString();Sa.overscaledZ!==Sa.canonical.z&&(lc+=" \x3d\x3e "+Sa.overscaledZ);Sa=lc+" "+cc+"kb";wa.initDebugOverlayCanvas();cc=wa.debugOverlayCanvas;lc=wa.context.gl;var kc=wa.debugOverlayCanvas.getContext("2d");kc.clearRect(0,0,cc.width,cc.height);kc.shadowColor=
"white";kc.shadowBlur=2;kc.lineWidth=1.5;kc.strokeStyle="white";kc.textBaseline="top";kc.font="bold 36px Open Sans, sans-serif";kc.fillText(Sa,5,5);kc.strokeText(Sa,5,5);wa.debugOverlayTexture.update(cc);wa.debugOverlayTexture.bind(lc.LINEAR,lc.CLAMP_TO_EDGE);Ib.draw(ab,yb.TRIANGLES,nc,mc,be.alphaBlended,le.disabled,ui(Hb,a.Color.transparent,Ga),"$debug",wa.debugBuffer,wa.quadTriangleIndexBuffer,wa.debugSegments)}},custom:function(W,aa,Z){aa=W.context;Z=Z.implementation;if("offscreen"===W.renderPass){var ea=
Z.prerender;ea&&(W.setCustomLayerDefaults(),aa.setColorMode(W.colorModeForRenderPass()),ea.call(Z,aa.gl,W.transform.customLayerMatrix()),aa.setDirty(),W.setBaseState())}else"translucent"===W.renderPass&&(W.setCustomLayerDefaults(),aa.setColorMode(W.colorModeForRenderPass()),aa.setStencilMode(Bd.disabled),ea="3d"===Z.renderingMode?new Ad(W.context.gl.LEQUAL,Ad.ReadWrite,W.depthRangeFor3D):W.depthModeForSublayer(0,Ad.ReadOnly),aa.setDepthMode(ea),Z.render(aa.gl,W.transform.customLayerMatrix()),aa.setDirty(),
W.setBaseState(),aa.bindFramebuffer.set(null))}},$e=function(W,aa){this.context=new Rd(W);this.transform=aa;this._tileTextures={};this.setup();this.numSublayers=Fe.maxUnderzooming+Fe.maxOverzooming+1;this.depthEpsilon=1/Math.pow(2,16);this.crossTileSymbolIndex=new Cc;this.gpuTimers={}};$e.prototype.resize=function(W,aa){if(this.width=W*a.browser.devicePixelRatio,this.height=aa*a.browser.devicePixelRatio,this.context.viewport.set([0,0,this.width,this.height]),this.style)for(W=0,aa=this.style._order;W<
aa.length;W+=1)this.style._layers[aa[W]].resize()};$e.prototype.setup=function(){var W=this.context,aa=new a.StructArrayLayout2i4;aa.emplaceBack(0,0);aa.emplaceBack(a.EXTENT,0);aa.emplaceBack(0,a.EXTENT);aa.emplaceBack(a.EXTENT,a.EXTENT);this.tileExtentBuffer=W.createVertexBuffer(aa,td.members);this.tileExtentSegments=a.SegmentVector.simpleSegment(0,0,4,2);aa=new a.StructArrayLayout2i4;aa.emplaceBack(0,0);aa.emplaceBack(a.EXTENT,0);aa.emplaceBack(0,a.EXTENT);aa.emplaceBack(a.EXTENT,a.EXTENT);this.debugBuffer=
W.createVertexBuffer(aa,td.members);this.debugSegments=a.SegmentVector.simpleSegment(0,0,4,5);aa=new a.StructArrayLayout4i8;aa.emplaceBack(0,0,0,0);aa.emplaceBack(a.EXTENT,0,a.EXTENT,0);aa.emplaceBack(0,a.EXTENT,0,a.EXTENT);aa.emplaceBack(a.EXTENT,a.EXTENT,a.EXTENT,a.EXTENT);this.rasterBoundsBuffer=W.createVertexBuffer(aa,Za.members);this.rasterBoundsSegments=a.SegmentVector.simpleSegment(0,0,4,2);aa=new a.StructArrayLayout2i4;aa.emplaceBack(0,0);aa.emplaceBack(1,0);aa.emplaceBack(0,1);aa.emplaceBack(1,
1);this.viewportBuffer=W.createVertexBuffer(aa,td.members);this.viewportSegments=a.SegmentVector.simpleSegment(0,0,4,2);aa=new a.StructArrayLayout1ui2;aa.emplaceBack(0);aa.emplaceBack(1);aa.emplaceBack(3);aa.emplaceBack(2);aa.emplaceBack(0);this.tileBorderIndexBuffer=W.createIndexBuffer(aa);aa=new a.StructArrayLayout3ui6;aa.emplaceBack(0,1,2);aa.emplaceBack(2,1,3);this.quadTriangleIndexBuffer=W.createIndexBuffer(aa);this.emptyTexture=new a.Texture(W,{width:1,height:1,data:new Uint8Array([0,0,0,0])},
W.gl.RGBA);W=this.context.gl;this.stencilClearMode=new Bd({func:W.ALWAYS,mask:0},0,255,W.ZERO,W.ZERO,W.ZERO)};$e.prototype.clearStencil=function(){var W=this.context,aa=W.gl;this.nextStencilID=1;this.currentStencilSource=void 0;var Z=a.create();a.ortho(Z,0,this.width,this.height,0,0,1);a.scale(Z,Z,[aa.drawingBufferWidth,aa.drawingBufferHeight,0]);this.useProgram("clippingMask").draw(W,aa.TRIANGLES,Ad.disabled,this.stencilClearMode,be.disabled,le.disabled,{u_matrix:Z},"$clipping",this.viewportBuffer,
this.quadTriangleIndexBuffer,this.viewportSegments)};$e.prototype._renderTileClippingMasks=function(W,aa){if(this.currentStencilSource!==W.source&&W.isTileClipped()&&aa&&aa.length){this.currentStencilSource=W.source;W=this.context;var Z=W.gl;256<this.nextStencilID+aa.length&&this.clearStencil();W.setColorMode(be.disabled);W.setDepthMode(Ad.disabled);var ea=this.useProgram("clippingMask");this._tileClippingMaskIDs={};for(var wa=0;wa<aa.length;wa+=1){var Ga=aa[wa],Sa=this._tileClippingMaskIDs[Ga.key]=
this.nextStencilID++;ea.draw(W,Z.TRIANGLES,Ad.disabled,new Bd({func:Z.ALWAYS,mask:0},Sa,255,Z.KEEP,Z.KEEP,Z.REPLACE),be.disabled,le.disabled,{u_matrix:Ga.posMatrix},"$clipping",this.tileExtentBuffer,this.quadTriangleIndexBuffer,this.tileExtentSegments)}}};$e.prototype.stencilModeFor3D=function(){this.currentStencilSource=void 0;256<this.nextStencilID+1&&this.clearStencil();var W=this.nextStencilID++,aa=this.context.gl;return new Bd({func:aa.NOTEQUAL,mask:255},W,255,aa.KEEP,aa.KEEP,aa.REPLACE)};$e.prototype.stencilModeForClipping=
function(W){var aa=this.context.gl;return new Bd({func:aa.EQUAL,mask:255},this._tileClippingMaskIDs[W.key],0,aa.KEEP,aa.KEEP,aa.REPLACE)};$e.prototype.stencilConfigForOverlap=function(W){var aa=this.context.gl;W=W.sort(function(Sa,ab){return ab.overscaledZ-Sa.overscaledZ});var Z=W[W.length-1].overscaledZ,ea=W[0].overscaledZ-Z+1;if(1<ea){this.currentStencilSource=void 0;256<this.nextStencilID+ea&&this.clearStencil();var wa={};for(var Ga=0;Ga<ea;Ga++)wa[Ga+Z]=new Bd({func:aa.GEQUAL,mask:255},Ga+this.nextStencilID,
255,aa.KEEP,aa.KEEP,aa.REPLACE);return this.nextStencilID+=ea,[wa,W]}return[(wa={},wa[Z]=Bd.disabled,wa),W]};$e.prototype.colorModeForRenderPass=function(){var W=this.context.gl;return this._showOverdrawInspector?new be([W.CONSTANT_COLOR,W.ONE],new a.Color(.125,.125,.125,0),[!0,!0,!0,!0]):"opaque"===this.renderPass?be.unblended:be.alphaBlended};$e.prototype.depthModeForSublayer=function(W,aa,Z){if(!this.opaquePassEnabledForLayer())return Ad.disabled;W=1-((1+this.currentLayer)*this.numSublayers+W)*
this.depthEpsilon;return new Ad(Z||this.context.gl.LEQUAL,aa,[W,W])};$e.prototype.opaquePassEnabledForLayer=function(){return this.currentLayer<this.opaquePassCutoff};$e.prototype.render=function(W,aa){var Z=this;this.style=W;this.options=aa;this.lineAtlas=W.lineAtlas;this.imageManager=W.imageManager;this.glyphManager=W.glyphManager;this.symbolFadeChange=W.placement.symbolFadeChange(a.browser.now());this.imageManager.beginFrame();var ea=this.style._order,wa=this.style.sourceCaches;for(yb in wa){var Ga=
wa[yb];Ga.used&&Ga.prepare(this.context)}var Sa,ab;var yb={};Ga={};var Hb={},Ib;for(Ib in wa){var nc=wa[Ib];yb[Ib]=nc.getVisibleCoordinates();Ga[Ib]=yb[Ib].slice().reverse();Hb[Ib]=nc.getVisibleCoordinates(!0).reverse()}this.opaquePassCutoff=1/0;for(Ib=0;Ib<ea.length;Ib++)if(this.style._layers[ea[Ib]].is3D()){this.opaquePassCutoff=Ib;break}this.renderPass="offscreen";for(Ib=0;Ib<ea.length;Ib+=1)if(nc=this.style._layers[ea[Ib]],nc.hasOffscreenPass()&&!nc.isHidden(this.transform.zoom)){var mc=Ga[nc.source];
("custom"===nc.type||mc.length)&&this.renderLayer(this,wa[nc.source],nc,mc)}this.context.bindFramebuffer.set(null);this.context.clear({color:aa.showOverdrawInspector?a.Color.black:a.Color.transparent,depth:1});this.clearStencil();this._showOverdrawInspector=aa.showOverdrawInspector;this.depthRangeFor3D=[0,1-(W._order.length+2)*this.numSublayers*this.depthEpsilon];this.renderPass="opaque";for(this.currentLayer=ea.length-1;0<=this.currentLayer;this.currentLayer--)W=this.style._layers[ea[this.currentLayer]],
aa=wa[W.source],Ib=yb[W.source],this._renderTileClippingMasks(W,Ib),this.renderLayer(this,aa,W,Ib);this.renderPass="translucent";for(this.currentLayer=0;this.currentLayer<ea.length;this.currentLayer++)W=this.style._layers[ea[this.currentLayer]],aa=wa[W.source],Ib=("symbol"===W.type?Hb:Ga)[W.source],this._renderTileClippingMasks(W,yb[W.source]),this.renderLayer(this,aa,W,Ib);this.options.showTileBoundaries&&(a.values(this.style._layers).forEach(function(cc){cc.source&&!cc.isHidden(Z.transform.zoom)&&
(cc.source!==(ab&&ab.id)&&(ab=Z.style.sourceCaches[cc.source]),(!Sa||Sa.getSource().maxzoom<ab.getSource().maxzoom)&&(Sa=ab))}),Sa&&Si.debug(this,Sa,Sa.getVisibleCoordinates()));this.options.showPadding&&function(cc){var lc=cc.transform.padding;ma(cc,0,cc.transform.height-(lc.top||0)+1.5,cc.transform.width,3,Qh);ma(cc,0,(lc.bottom||0)+1.5,cc.transform.width,3,Rh);ma(cc,(lc.left||0)-1.5,0,3,cc.transform.height,Bg);ma(cc,cc.transform.width-(lc.right||0)-1.5,0,3,cc.transform.height,ng);var kc=cc.transform.centerPoint;
lc=kc.x;kc=cc.transform.height-kc.y;ma(cc,lc-1,kc-10,2,20,xh);ma(cc,lc-10,kc-1,20,2,xh);!0}(this);this.context.setDefault()};$e.prototype.renderLayer=function(W,aa,Z,ea){Z.isHidden(this.transform.zoom)||("background"===Z.type||"custom"===Z.type||ea.length)&&(this.id=Z.id,this.gpuTimingStart(Z),Si[Z.type](W,aa,Z,ea,this.style.placement.variableOffsets),this.gpuTimingEnd())};$e.prototype.gpuTimingStart=function(W){if(this.options.gpuTiming){var aa=this.context.extTimerQuery,Z=this.gpuTimers[W.id];Z||
(Z=this.gpuTimers[W.id]={calls:0,cpuTime:0,query:aa.createQueryEXT()});Z.calls++;aa.beginQueryEXT(aa.TIME_ELAPSED_EXT,Z.query)}};$e.prototype.gpuTimingEnd=function(){if(this.options.gpuTiming){var W=this.context.extTimerQuery;W.endQueryEXT(W.TIME_ELAPSED_EXT)}};$e.prototype.collectGpuTimers=function(){var W=this.gpuTimers;return this.gpuTimers={},W};$e.prototype.queryGpuTimers=function(W){var aa={},Z;for(Z in W){var ea=W[Z],wa=this.context.extTimerQuery,Ga=wa.getQueryObjectEXT(ea.query,wa.QUERY_RESULT_EXT)/
1E6;wa.deleteQueryEXT(ea.query);aa[Z]=Ga}return aa};$e.prototype.translatePosMatrix=function(W,aa,Z,ea,wa){if(!Z[0]&&!Z[1])return W;var Ga=wa?"map"===ea?this.transform.angle:0:"viewport"===ea?-this.transform.angle:0;Ga&&(ea=Math.sin(Ga),Ga=Math.cos(Ga),Z=[Z[0]*Ga-Z[1]*ea,Z[0]*ea+Z[1]*Ga]);aa=[wa?Z[0]:T(aa,Z[0],this.transform.zoom),wa?Z[1]:T(aa,Z[1],this.transform.zoom),0];Z=new Float32Array(16);return a.translate(Z,W,aa),Z};$e.prototype.saveTileTexture=function(W){var aa=this._tileTextures[W.size[0]];
aa?aa.push(W):this._tileTextures[W.size[0]]=[W]};$e.prototype.getTileTexture=function(W){return(W=this._tileTextures[W])&&0<W.length?W.pop():null};$e.prototype.isPatternMissing=function(W){if(!W)return!1;if(!W.from||!W.to)return!0;var aa=this.imageManager.getPattern(W.from.toString());W=this.imageManager.getPattern(W.to.toString());return!aa||!W};$e.prototype.useProgram=function(W,aa){this.cache=this.cache||{};var Z=""+W+(aa?aa.cacheKey:"")+(this._showOverdrawInspector?"/overdraw":"");return this.cache[Z]||
(this.cache[Z]=new He(this.context,si[W],aa,Ri[W],this._showOverdrawInspector)),this.cache[Z]};$e.prototype.setCustomLayerDefaults=function(){this.context.unbindVAO();this.context.cullFace.setDefault();this.context.activeTexture.setDefault();this.context.pixelStoreUnpack.setDefault();this.context.pixelStoreUnpackPremultiplyAlpha.setDefault();this.context.pixelStoreUnpackFlipY.setDefault()};$e.prototype.setBaseState=function(){var W=this.context.gl;this.context.cullFace.set(!1);this.context.viewport.set([0,
0,this.width,this.height]);this.context.blendEquation.set(W.FUNC_ADD)};$e.prototype.initDebugOverlayCanvas=function(){null==this.debugOverlayCanvas&&(this.debugOverlayCanvas=a.window.document.createElement("canvas"),this.debugOverlayCanvas.width=512,this.debugOverlayCanvas.height=512,this.debugOverlayTexture=new a.Texture(this.context,this.debugOverlayCanvas,this.context.gl.RGBA))};$e.prototype.destroy=function(){this.emptyTexture.destroy();this.debugOverlayTexture&&this.debugOverlayTexture.destroy()};
var Sh=function(W,aa){this.points=W;this.planes=aa};Sh.fromInvProjectionMatrix=function(W,aa,Z){var ea=Math.pow(2,Z),wa=[[-1,1,-1,1],[1,1,-1,1],[1,-1,-1,1],[-1,-1,-1,1],[-1,1,1,1],[1,1,1,1],[1,-1,1,1],[-1,-1,1,1]].map(function(Ga){return a.transformMat4([],Ga,W)}).map(function(Ga){return a.scale$1([],Ga,1/Ga[3]/aa*ea)});Z=[[0,1,2],[6,5,4],[0,3,7],[2,1,5],[3,2,6],[0,4,5]].map(function(Ga){var Sa=a.sub([],wa[Ga[0]],wa[Ga[1]]),ab=a.sub([],wa[Ga[2]],wa[Ga[1]]);Sa=a.normalize([],a.cross([],Sa,ab));Ga=
-a.dot(Sa,wa[Ga[1]]);return Sa.concat(Ga)});return new Sh(wa,Z)};var ih=function(W,aa){this.min=W;this.max=aa;this.center=a.scale$2([],a.add([],this.min,this.max),.5)};ih.prototype.quadrant=function(W){W=[0==W%2,2>W];for(var aa=a.clone$2(this.min),Z=a.clone$2(this.max),ea=0;ea<W.length;ea++)aa[ea]=W[ea]?this.min[ea]:this.center[ea],Z[ea]=W[ea]?this.center[ea]:this.max[ea];return Z[2]=this.max[2],new ih(aa,Z)};ih.prototype.distanceX=function(W){return Math.max(Math.min(this.max[0],W[0]),this.min[0])-
W[0]};ih.prototype.distanceY=function(W){return Math.max(Math.min(this.max[1],W[1]),this.min[1])-W[1]};ih.prototype.intersects=function(W){for(var aa=[[this.min[0],this.min[1],0,1],[this.max[0],this.min[1],0,1],[this.max[0],this.max[1],0,1],[this.min[0],this.max[1],0,1]],Z=!0,ea=0;ea<W.planes.length;ea++){for(var wa=W.planes[ea],Ga=0,Sa=0;Sa<aa.length;Sa++)Ga+=0<=a.dot$1(wa,aa[Sa]);if(0===Ga)return 0;Ga!==aa.length&&(Z=!1)}if(Z)return 2;for(aa=0;3>aa;aa++){Z=Number.MAX_VALUE;ea=-Number.MAX_VALUE;
for(wa=0;wa<W.points.length;wa++)Ga=W.points[wa][aa]-this.min[aa],Z=Math.min(Z,Ga),ea=Math.max(ea,Ga);if(0>ea||Z>this.max[aa]-this.min[aa])return 0}return 1};var yh=function(W,aa,Z,ea){if(void 0===W&&(W=0),void 0===aa&&(aa=0),void 0===Z&&(Z=0),void 0===ea&&(ea=0),isNaN(W)||0>W||isNaN(aa)||0>aa||isNaN(Z)||0>Z||isNaN(ea)||0>ea)throw Error("Invalid value for edge-insets, top, bottom, left and right must all be numbers");this.top=W;this.bottom=aa;this.left=Z;this.right=ea};yh.prototype.interpolate=function(W,
aa,Z){return null!=aa.top&&null!=W.top&&(this.top=a.number(W.top,aa.top,Z)),null!=aa.bottom&&null!=W.bottom&&(this.bottom=a.number(W.bottom,aa.bottom,Z)),null!=aa.left&&null!=W.left&&(this.left=a.number(W.left,aa.left,Z)),null!=aa.right&&null!=W.right&&(this.right=a.number(W.right,aa.right,Z)),this};yh.prototype.getCenter=function(W,aa){W=a.clamp((this.left+W-this.right)/2,0,W);aa=a.clamp((this.top+aa-this.bottom)/2,0,aa);return new a.Point(W,aa)};yh.prototype.equals=function(W){return this.top===
W.top&&this.bottom===W.bottom&&this.left===W.left&&this.right===W.right};yh.prototype.clone=function(){return new yh(this.top,this.bottom,this.left,this.right)};yh.prototype.toJSON=function(){return{top:this.top,bottom:this.bottom,left:this.left,right:this.right}};var Se=function(W,aa,Z,ea,wa){this.tileSize=512;this.maxValidLatitude=85.051129;this._renderWorldCopies=void 0===wa||wa;this._minZoom=W||0;this._maxZoom=aa||22;this._minPitch=null==Z?0:Z;this._maxPitch=null==ea?60:ea;this.setMaxBounds();
this.height=this.width=0;this._center=new a.LngLat(0,0);this.angle=this.zoom=0;this._fov=.6435011087932844;this._pitch=0;this._unmodified=!0;this._edgeInsets=new yh;this._posMatrixCache={};this._alignedPosMatrixCache={}},Ue={minZoom:{configurable:!0},maxZoom:{configurable:!0},minPitch:{configurable:!0},maxPitch:{configurable:!0},renderWorldCopies:{configurable:!0},worldSize:{configurable:!0},centerOffset:{configurable:!0},size:{configurable:!0},bearing:{configurable:!0},pitch:{configurable:!0},fov:{configurable:!0},
zoom:{configurable:!0},center:{configurable:!0},padding:{configurable:!0},centerPoint:{configurable:!0},unmodified:{configurable:!0},point:{configurable:!0}};Se.prototype.clone=function(){var W=new Se(this._minZoom,this._maxZoom,this._minPitch,this.maxPitch,this._renderWorldCopies);return W.tileSize=this.tileSize,W.latRange=this.latRange,W.width=this.width,W.height=this.height,W._center=this._center,W.zoom=this.zoom,W.angle=this.angle,W._fov=this._fov,W._pitch=this._pitch,W._unmodified=this._unmodified,
W._edgeInsets=this._edgeInsets.clone(),W._calcMatrices(),W};Ue.minZoom.get=function(){return this._minZoom};Ue.minZoom.set=function(W){this._minZoom!==W&&(this._minZoom=W,this.zoom=Math.max(this.zoom,W))};Ue.maxZoom.get=function(){return this._maxZoom};Ue.maxZoom.set=function(W){this._maxZoom!==W&&(this._maxZoom=W,this.zoom=Math.min(this.zoom,W))};Ue.minPitch.get=function(){return this._minPitch};Ue.minPitch.set=function(W){this._minPitch!==W&&(this._minPitch=W,this.pitch=Math.max(this.pitch,W))};
Ue.maxPitch.get=function(){return this._maxPitch};Ue.maxPitch.set=function(W){this._maxPitch!==W&&(this._maxPitch=W,this.pitch=Math.min(this.pitch,W))};Ue.renderWorldCopies.get=function(){return this._renderWorldCopies};Ue.renderWorldCopies.set=function(W){void 0===W?W=!0:null===W&&(W=!1);this._renderWorldCopies=W};Ue.worldSize.get=function(){return this.tileSize*this.scale};Ue.centerOffset.get=function(){return this.centerPoint._sub(this.size._div(2))};Ue.size.get=function(){return new a.Point(this.width,
this.height)};Ue.bearing.get=function(){return-this.angle/Math.PI*180};Ue.bearing.set=function(W){W=-a.wrap(W,-180,180)*Math.PI/180;this.angle!==W&&(this._unmodified=!1,this.angle=W,this._calcMatrices(),this.rotationMatrix=a.create$2(),a.rotate(this.rotationMatrix,this.rotationMatrix,this.angle))};Ue.pitch.get=function(){return this._pitch/Math.PI*180};Ue.pitch.set=function(W){W=a.clamp(W,this.minPitch,this.maxPitch)/180*Math.PI;this._pitch!==W&&(this._unmodified=!1,this._pitch=W,this._calcMatrices())};
Ue.fov.get=function(){return this._fov/Math.PI*180};Ue.fov.set=function(W){W=Math.max(.01,Math.min(60,W));this._fov!==W&&(this._unmodified=!1,this._fov=W/180*Math.PI,this._calcMatrices())};Ue.zoom.get=function(){return this._zoom};Ue.zoom.set=function(W){W=Math.min(Math.max(W,this.minZoom),this.maxZoom);this._zoom!==W&&(this._unmodified=!1,this._zoom=W,this.scale=this.zoomScale(W),this.tileZoom=Math.floor(W),this.zoomFraction=W-this.tileZoom,this._constrain(),this._calcMatrices())};Ue.center.get=
function(){return this._center};Ue.center.set=function(W){W.lat===this._center.lat&&W.lng===this._center.lng||(this._unmodified=!1,this._center=W,this._constrain(),this._calcMatrices())};Ue.padding.get=function(){return this._edgeInsets.toJSON()};Ue.padding.set=function(W){this._edgeInsets.equals(W)||(this._unmodified=!1,this._edgeInsets.interpolate(this._edgeInsets,W,1),this._calcMatrices())};Ue.centerPoint.get=function(){return this._edgeInsets.getCenter(this.width,this.height)};Se.prototype.isPaddingEqual=
function(W){return this._edgeInsets.equals(W)};Se.prototype.interpolatePadding=function(W,aa,Z){this._unmodified=!1;this._edgeInsets.interpolate(W,aa,Z);this._constrain();this._calcMatrices()};Se.prototype.coveringZoomLevel=function(W){W=(W.roundZoom?Math.round:Math.floor)(this.zoom+this.scaleZoom(this.tileSize/W.tileSize));return Math.max(0,W)};Se.prototype.getVisibleUnwrappedCoordinates=function(W){var aa=[new a.UnwrappedTileID(0,W)];if(this._renderWorldCopies){var Z=this.pointCoordinate(new a.Point(0,
0)),ea=this.pointCoordinate(new a.Point(this.width,0)),wa=this.pointCoordinate(new a.Point(this.width,this.height)),Ga=this.pointCoordinate(new a.Point(0,this.height)),Sa=Math.floor(Math.max(Z.x,ea.x,wa.x,Ga.x));for(Z=Math.floor(Math.min(Z.x,ea.x,wa.x,Ga.x))-1;Z<=Sa+1;Z++)0!==Z&&aa.push(new a.UnwrappedTileID(Z,W))}return aa};Se.prototype.coveringTiles=function(W){var aa=this.coveringZoomLevel(W),Z=aa;if(void 0!==W.minzoom&&aa<W.minzoom)return[];void 0!==W.maxzoom&&aa>W.maxzoom&&(aa=W.maxzoom);var ea=
a.MercatorCoordinate.fromLngLat(this.center),wa=Math.pow(2,aa);ea=[wa*ea.x,wa*ea.y,0];var Ga=Sh.fromInvProjectionMatrix(this.invProjMatrix,this.worldSize,aa),Sa=W.minzoom||0;60>=this.pitch&&.1>this._edgeInsets.top&&(Sa=aa);var ab=function(kc){return{aabb:new ih([kc*wa,0,0],[(kc+1)*wa,wa,0]),zoom:0,x:0,y:0,wrap:kc,fullyVisible:!1}},yb=[],Hb=[],Ib=aa;W=W.reparseOverscaled?Z:aa;if(this._renderWorldCopies)for(aa=1;3>=aa;aa++)yb.push(ab(-aa)),yb.push(ab(aa));for(yb.push(ab(0));0<yb.length;){ab=yb.pop();
aa=ab.x;Z=ab.y;var nc=ab.fullyVisible;if(!nc){nc=ab.aabb.intersects(Ga);if(0===nc)continue;nc=2===nc}var mc=ab.aabb.distanceX(ea),cc=ab.aabb.distanceY(ea);mc=Math.max(Math.abs(mc),Math.abs(cc));if(ab.zoom===Ib||mc>3+(1<<Ib-ab.zoom)-2&&ab.zoom>=Sa)Hb.push({tileID:new a.OverscaledTileID(ab.zoom===Ib?W:ab.zoom,ab.wrap,ab.zoom,aa,Z),distanceSq:a.sqrLen([ea[0]-.5-aa,ea[1]-.5-Z])});else for(mc=0;4>mc;mc++){cc=(aa<<1)+mc%2;var lc=(Z<<1)+(mc>>1);yb.push({aabb:ab.aabb.quadrant(mc),zoom:ab.zoom+1,x:cc,y:lc,
wrap:ab.wrap,fullyVisible:nc})}}return Hb.sort(function(kc,Gb){return kc.distanceSq-Gb.distanceSq}).map(function(kc){return kc.tileID})};Se.prototype.resize=function(W,aa){this.width=W;this.height=aa;this.pixelsToGLUnits=[2/W,-2/aa];this._constrain();this._calcMatrices()};Ue.unmodified.get=function(){return this._unmodified};Se.prototype.zoomScale=function(W){return Math.pow(2,W)};Se.prototype.scaleZoom=function(W){return Math.log(W)/Math.LN2};Se.prototype.project=function(W){var aa=a.clamp(W.lat,
-this.maxValidLatitude,this.maxValidLatitude);return new a.Point(a.mercatorXfromLng(W.lng)*this.worldSize,a.mercatorYfromLat(aa)*this.worldSize)};Se.prototype.unproject=function(W){return(new a.MercatorCoordinate(W.x/this.worldSize,W.y/this.worldSize)).toLngLat()};Ue.point.get=function(){return this.project(this.center)};Se.prototype.setLocationAtPoint=function(W,aa){aa=this.pointCoordinate(aa);var Z=this.pointCoordinate(this.centerPoint);W=this.locationCoordinate(W);W=new a.MercatorCoordinate(W.x-
(aa.x-Z.x),W.y-(aa.y-Z.y));this.center=this.coordinateLocation(W);this._renderWorldCopies&&(this.center=this.center.wrap())};Se.prototype.locationPoint=function(W){return this.coordinatePoint(this.locationCoordinate(W))};Se.prototype.pointLocation=function(W){return this.coordinateLocation(this.pointCoordinate(W))};Se.prototype.locationCoordinate=function(W){return a.MercatorCoordinate.fromLngLat(W)};Se.prototype.coordinateLocation=function(W){return W.toLngLat()};Se.prototype.pointCoordinate=function(W){var aa=
[W.x,W.y,0,1];W=[W.x,W.y,1,1];a.transformMat4(aa,aa,this.pixelMatrixInverse);a.transformMat4(W,W,this.pixelMatrixInverse);var Z=aa[3],ea=W[3],wa=aa[1]/Z,Ga=W[1]/ea,Sa=aa[2]/Z,ab=W[2]/ea;Sa=Sa===ab?0:(0-Sa)/(ab-Sa);return new a.MercatorCoordinate(a.number(aa[0]/Z,W[0]/ea,Sa)/this.worldSize,a.number(wa,Ga,Sa)/this.worldSize)};Se.prototype.coordinatePoint=function(W){W=[W.x*this.worldSize,W.y*this.worldSize,0,1];return a.transformMat4(W,W,this.pixelMatrix),new a.Point(W[0]/W[3],W[1]/W[3])};Se.prototype.getBounds=
function(){return(new a.LngLatBounds).extend(this.pointLocation(new a.Point(0,0))).extend(this.pointLocation(new a.Point(this.width,0))).extend(this.pointLocation(new a.Point(this.width,this.height))).extend(this.pointLocation(new a.Point(0,this.height)))};Se.prototype.getMaxBounds=function(){return this.latRange&&2===this.latRange.length&&this.lngRange&&2===this.lngRange.length?new a.LngLatBounds([this.lngRange[0],this.latRange[0]],[this.lngRange[1],this.latRange[1]]):null};Se.prototype.setMaxBounds=
function(W){W?(this.lngRange=[W.getWest(),W.getEast()],this.latRange=[W.getSouth(),W.getNorth()],this._constrain()):(this.lngRange=null,this.latRange=[-this.maxValidLatitude,this.maxValidLatitude])};Se.prototype.calculatePosMatrix=function(W,aa){void 0===aa&&(aa=!1);var Z=W.key,ea=aa?this._alignedPosMatrixCache:this._posMatrixCache;if(ea[Z])return ea[Z];var wa=W.canonical,Ga=this.worldSize/this.zoomScale(wa.z);W=wa.x+Math.pow(2,wa.z)*W.wrap;var Sa=a.identity(new Float64Array(16));return a.translate(Sa,
Sa,[W*Ga,wa.y*Ga,0]),a.scale(Sa,Sa,[Ga/a.EXTENT,Ga/a.EXTENT,1]),a.multiply(Sa,aa?this.alignedProjMatrix:this.projMatrix,Sa),ea[Z]=new Float32Array(Sa),ea[Z]};Se.prototype.customLayerMatrix=function(){return this.mercatorMatrix.slice()};Se.prototype._constrain=function(){if(this.center&&this.width&&this.height&&!this._constraining){this._constraining=!0;var W,aa,Z=-90,ea=90,wa=-180,Ga=180,Sa=this.size,ab=this._unmodified;if(this.latRange){var yb=this.latRange;Z=a.mercatorYfromLat(yb[1])*this.worldSize;
var Hb=(ea=a.mercatorYfromLat(yb[0])*this.worldSize)-Z<Sa.y?Sa.y/(ea-Z):0}if(this.lngRange){yb=this.lngRange;wa=a.mercatorXfromLng(yb[0])*this.worldSize;var Ib=(Ga=a.mercatorXfromLng(yb[1])*this.worldSize)-wa<Sa.x?Sa.x/(Ga-wa):0}yb=this.point;var nc=Math.max(Ib||0,Hb||0);if(nc)return this.center=this.unproject(new a.Point(Ib?(Ga+wa)/2:yb.x,Hb?(ea+Z)/2:yb.y)),this.zoom+=this.scaleZoom(nc),this._unmodified=ab,void(this._constraining=!1);this.latRange&&(Hb=yb.y,Ib=Sa.y/2,Hb-Ib<Z&&(aa=Z+Ib),Hb+Ib>ea&&
(aa=ea-Ib));this.lngRange&&(Z=yb.x,Sa=Sa.x/2,Z-Sa<wa&&(W=wa+Sa),Z+Sa>Ga&&(W=Ga-Sa));void 0===W&&void 0===aa||(this.center=this.unproject(new a.Point(void 0!==W?W:yb.x,void 0!==aa?aa:yb.y)));this._unmodified=ab;this._constraining=!1}};Se.prototype._calcMatrices=function(){if(this.height){var W=this.centerOffset;this.cameraToCenterDistance=.5/Math.tan(this._fov/2)*this.height;var aa=this._fov*(.5+W.y/this.height);aa=Math.sin(aa)*this.cameraToCenterDistance/Math.sin(a.clamp(Math.PI-(Math.PI/2+this._pitch)-
aa,.01,Math.PI-.01));var Z=this.point,ea=Z.x;Z=Z.y;var wa=1.01*(Math.cos(Math.PI/2-this._pitch)*aa+this.cameraToCenterDistance),Ga=this.height/50;aa=new Float64Array(16);a.perspective(aa,this._fov,this.width/this.height,Ga,wa);aa[8]=2*-W.x/this.width;aa[9]=2*W.y/this.height;a.scale(aa,aa,[1,-1,1]);a.translate(aa,aa,[0,0,-this.cameraToCenterDistance]);a.rotateX(aa,aa,this._pitch);a.rotateZ(aa,aa,this.angle);a.translate(aa,aa,[-ea,-Z,0]);this.mercatorMatrix=a.scale([],aa,[this.worldSize,this.worldSize,
this.worldSize]);a.scale(aa,aa,[1,1,a.mercatorZfromAltitude(1,this.center.lat)*this.worldSize,1]);this.projMatrix=aa;this.invProjMatrix=a.invert([],this.projMatrix);W=this.width%2/2;wa=this.height%2/2;Ga=Math.cos(this.angle);var Sa=Math.sin(this.angle);ea=ea-Math.round(ea)+Ga*W+Sa*wa;Z=Z-Math.round(Z)+Ga*wa+Sa*W;W=new Float64Array(aa);if(a.translate(W,W,[.5<ea?ea-1:ea,.5<Z?Z-1:Z,0]),this.alignedProjMatrix=W,aa=a.create(),a.scale(aa,aa,[this.width/2,-this.height/2,1]),a.translate(aa,aa,[1,-1,0]),this.labelPlaneMatrix=
aa,aa=a.create(),a.scale(aa,aa,[1,-1,1]),a.translate(aa,aa,[-1,-1,0]),a.scale(aa,aa,[2/this.width,2/this.height,1]),this.glCoordMatrix=aa,this.pixelMatrix=a.multiply(new Float64Array(16),this.labelPlaneMatrix,this.projMatrix),!(aa=a.invert(new Float64Array(16),this.pixelMatrix)))throw Error("failed to invert matrix");this.pixelMatrixInverse=aa;this._posMatrixCache={};this._alignedPosMatrixCache={}}};Se.prototype.maxPitchScaleFactor=function(){if(!this.pixelMatrixInverse)return 1;var W=this.pointCoordinate(new a.Point(0,
0));W=[W.x*this.worldSize,W.y*this.worldSize,0,1];return a.transformMat4(W,W,this.pixelMatrix)[3]/this.cameraToCenterDistance};Se.prototype.getCameraPoint=function(){return this.centerPoint.add(new a.Point(0,Math.tan(this._pitch)*(this.cameraToCenterDistance||1)))};Se.prototype.getCameraQueryGeometry=function(W){var aa=this.getCameraPoint();if(1===W.length)return[W[0],aa];var Z=aa.x,ea=aa.y,wa=aa.x;aa=aa.y;for(var Ga=0;Ga<W.length;Ga+=1){var Sa=W[Ga];Z=Math.min(Z,Sa.x);ea=Math.min(ea,Sa.y);wa=Math.max(wa,
Sa.x);aa=Math.max(aa,Sa.y)}return[new a.Point(Z,ea),new a.Point(wa,ea),new a.Point(wa,aa),new a.Point(Z,aa),new a.Point(Z,ea)]};Object.defineProperties(Se.prototype,Ue);var jh=function(W){var aa,Z,ea,wa;this._hashName=W&&encodeURIComponent(W);a.bindAll(["_getCurrentHash","_onHashChange","_updateHash"],this);this._updateHash=(aa=this._updateHashUnthrottled.bind(this),Z=!1,ea=null,wa=function(){ea=null;Z&&(aa(),ea=setTimeout(wa,300),Z=!1)},function(){return Z=!0,ea||wa(),ea})};jh.prototype.addTo=function(W){return this._map=
W,a.window.addEventListener("hashchange",this._onHashChange,!1),this._map.on("moveend",this._updateHash),this};jh.prototype.remove=function(){return a.window.removeEventListener("hashchange",this._onHashChange,!1),this._map.off("moveend",this._updateHash),clearTimeout(this._updateHash()),delete this._map,this};jh.prototype.getHashString=function(W){var aa=this._map.getCenter(),Z=Math.round(100*this._map.getZoom())/100,ea=Math.pow(10,Math.ceil((Z*Math.LN2+Math.log(512/360/.5))/Math.LN10)),wa=Math.round(aa.lng*
ea)/ea;aa=Math.round(aa.lat*ea)/ea;ea=this._map.getBearing();var Ga=this._map.getPitch(),Sa="";if(Sa+=W?"/"+wa+"/"+aa+"/"+Z:Z+"/"+aa+"/"+wa,(ea||Ga)&&(Sa+="/"+Math.round(10*ea)/10),Ga&&(Sa+="/"+Math.round(Ga)),this._hashName){var ab=this._hashName,yb=!1;W=a.window.location.hash.slice(1).split("\x26").map(function(Hb){var Ib=Hb.split("\x3d")[0];return Ib===ab?(yb=!0,Ib+"\x3d"+Sa):Hb}).filter(function(Hb){return Hb});return yb||W.push(ab+"\x3d"+Sa),"#"+W.join("\x26")}return"#"+Sa};jh.prototype._getCurrentHash=
function(){var W,aa=this,Z=a.window.location.hash.replace("#","");return this._hashName?(Z.split("\x26").map(function(ea){return ea.split("\x3d")}).forEach(function(ea){ea[0]===aa._hashName&&(W=ea)}),(W&&W[1]||"").split("/")):Z.split("/")};jh.prototype._onHashChange=function(){var W=this._getCurrentHash();if(3<=W.length&&!W.some(function(Z){return isNaN(Z)})){var aa=this._map.dragRotate.isEnabled()&&this._map.touchZoomRotate.isEnabled()?+(W[3]||0):this._map.getBearing();return this._map.jumpTo({center:[+W[2],
+W[1]],zoom:+W[0],bearing:aa,pitch:+(W[4]||0)}),!0}return!1};jh.prototype._updateHashUnthrottled=function(){var W=this.getHashString();try{a.window.history.replaceState(a.window.history.state,"",W)}catch(aa){}};var xi={linearity:.3,easing:a.bezier(0,0,.3,1)},Lj=a.extend({deceleration:2500,maxSpeed:1400},xi),Mj=a.extend({deceleration:20,maxSpeed:1400},xi),$g=a.extend({deceleration:1E3,maxSpeed:360},xi),Ti=a.extend({deceleration:1E3,maxSpeed:90},xi),yi=function(W){this._map=W;this.clear()};yi.prototype.clear=
function(){this._inertiaBuffer=[]};yi.prototype.record=function(W){this._drainInertiaBuffer();this._inertiaBuffer.push({time:a.browser.now(),settings:W})};yi.prototype._drainInertiaBuffer=function(){for(var W=this._inertiaBuffer,aa=a.browser.now();0<W.length&&160<aa-W[0].time;)W.shift()};yi.prototype._onMoveEnd=function(W){if(this._drainInertiaBuffer(),!(2>this._inertiaBuffer.length)){for(var aa=0,Z=0,ea=0,wa=new a.Point(0,0),Ga=void 0,Sa=void 0,ab=0,yb=this._inertiaBuffer;ab<yb.length;ab+=1){var Hb=
yb[ab].settings;aa+=Hb.zoomDelta||0;Z+=Hb.bearingDelta||0;ea+=Hb.pitchDelta||0;Hb.panDelta&&wa._add(Hb.panDelta);Hb.around&&(Sa=Hb.around);Hb.pinchAround&&(Ga=Hb.pinchAround)}yb=this._inertiaBuffer[this._inertiaBuffer.length-1].time-this._inertiaBuffer[0].time;ab={};wa.mag()&&(W=pa(wa.mag(),yb,a.extend({},Lj,W||{})),ab.offset=wa.mult(W.amount/wa.mag()),ab.center=this._map.transform.center,qa(ab,W));aa&&(aa=pa(aa,yb,Mj),ab.zoom=this._map.transform.zoom+aa.amount,qa(ab,aa));Z&&(Z=pa(Z,yb,$g),ab.bearing=
this._map.transform.bearing+a.clamp(Z.amount,-179,179),qa(ab,Z));ea&&(ea=pa(ea,yb,Ti),ab.pitch=this._map.transform.pitch+ea.amount,qa(ab,ea));if(ab.zoom||ab.bearing)Ga=void 0===Ga?Sa:Ga,ab.around=Ga?this._map.unproject(Ga):this._map.getCenter();return this.clear(),a.extend(ab,{noMoveStart:!0})}};var Lf=function(W){function aa(ea,wa,Ga,Sa){void 0===Sa&&(Sa={});var ab=$a.mousePos(wa.getCanvasContainer(),Ga),yb=wa.unproject(ab);W.call(this,ea,a.extend({point:ab,lngLat:yb,originalEvent:Ga},Sa));this._defaultPrevented=
!1;this.target=wa}W&&(aa.__proto__=W);(aa.prototype=Object.create(W&&W.prototype)).constructor=aa;var Z={defaultPrevented:{configurable:!0}};return aa.prototype.preventDefault=function(){this._defaultPrevented=!0},Z.defaultPrevented.get=function(){return this._defaultPrevented},Object.defineProperties(aa.prototype,Z),aa}(a.Event),Ui=function(W){function aa(ea,wa,Ga){var Sa="touchend"===ea?Ga.changedTouches:Ga.touches;Sa=$a.touchPos(wa.getCanvasContainer(),Sa);var ab=Sa.map(function(Ib){return wa.unproject(Ib)}),
yb=Sa.reduce(function(Ib,nc,mc,cc){return Ib.add(nc.div(cc.length))},new a.Point(0,0)),Hb=wa.unproject(yb);W.call(this,ea,{points:Sa,point:yb,lngLats:ab,lngLat:Hb,originalEvent:Ga});this._defaultPrevented=!1}W&&(aa.__proto__=W);(aa.prototype=Object.create(W&&W.prototype)).constructor=aa;var Z={defaultPrevented:{configurable:!0}};return aa.prototype.preventDefault=function(){this._defaultPrevented=!0},Z.defaultPrevented.get=function(){return this._defaultPrevented},Object.defineProperties(aa.prototype,
Z),aa}(a.Event),ek=function(W){function aa(ea,wa,Ga){W.call(this,ea,{originalEvent:Ga});this._defaultPrevented=!1}W&&(aa.__proto__=W);(aa.prototype=Object.create(W&&W.prototype)).constructor=aa;var Z={defaultPrevented:{configurable:!0}};return aa.prototype.preventDefault=function(){this._defaultPrevented=!0},Z.defaultPrevented.get=function(){return this._defaultPrevented},Object.defineProperties(aa.prototype,Z),aa}(a.Event),Hf=function(W,aa){this._map=W;this._clickTolerance=aa.clickTolerance};Hf.prototype.reset=
function(){delete this._mousedownPos};Hf.prototype.wheel=function(W){return this._firePreventable(new ek(W.type,this._map,W))};Hf.prototype.mousedown=function(W,aa){return this._mousedownPos=aa,this._firePreventable(new Lf(W.type,this._map,W))};Hf.prototype.mouseup=function(W){this._map.fire(new Lf(W.type,this._map,W))};Hf.prototype.click=function(W,aa){this._mousedownPos&&this._mousedownPos.dist(aa)>=this._clickTolerance||this._map.fire(new Lf(W.type,this._map,W))};Hf.prototype.dblclick=function(W){return this._firePreventable(new Lf(W.type,
this._map,W))};Hf.prototype.mouseover=function(W){this._map.fire(new Lf(W.type,this._map,W))};Hf.prototype.mouseout=function(W){this._map.fire(new Lf(W.type,this._map,W))};Hf.prototype.touchstart=function(W){return this._firePreventable(new Ui(W.type,this._map,W))};Hf.prototype.touchmove=function(W){this._map.fire(new Ui(W.type,this._map,W))};Hf.prototype.touchend=function(W){this._map.fire(new Ui(W.type,this._map,W))};Hf.prototype.touchcancel=function(W){this._map.fire(new Ui(W.type,this._map,W))};
Hf.prototype._firePreventable=function(W){if(this._map.fire(W),W.defaultPrevented)return{}};Hf.prototype.isEnabled=function(){return!0};Hf.prototype.isActive=function(){return!1};Hf.prototype.enable=function(){};Hf.prototype.disable=function(){};var Lg=function(W){this._map=W};Lg.prototype.reset=function(){this._delayContextMenu=!1;delete this._contextMenuEvent};Lg.prototype.mousemove=function(W){this._map.fire(new Lf(W.type,this._map,W))};Lg.prototype.mousedown=function(){this._delayContextMenu=
!0};Lg.prototype.mouseup=function(){this._delayContextMenu=!1;this._contextMenuEvent&&(this._map.fire(new Lf("contextmenu",this._map,this._contextMenuEvent)),delete this._contextMenuEvent)};Lg.prototype.contextmenu=function(W){this._delayContextMenu?this._contextMenuEvent=W:this._map.fire(new Lf(W.type,this._map,W));this._map.listens("contextmenu")&&W.preventDefault()};Lg.prototype.isEnabled=function(){return!0};Lg.prototype.isActive=function(){return!1};Lg.prototype.enable=function(){};Lg.prototype.disable=
function(){};var dg=function(W,aa){this._map=W;this._el=W.getCanvasContainer();this._container=W.getContainer();this._clickTolerance=aa.clickTolerance||1};dg.prototype.isEnabled=function(){return!!this._enabled};dg.prototype.isActive=function(){return!!this._active};dg.prototype.enable=function(){this.isEnabled()||(this._enabled=!0)};dg.prototype.disable=function(){this.isEnabled()&&(this._enabled=!1)};dg.prototype.mousedown=function(W,aa){this.isEnabled()&&W.shiftKey&&0===W.button&&($a.disableDrag(),
this._startPos=this._lastPos=aa,this._active=!0)};dg.prototype.mousemoveWindow=function(W,aa){if(this._active&&!(this._lastPos.equals(aa)||!this._box&&aa.dist(this._startPos)<this._clickTolerance)){var Z=this._startPos;this._lastPos=aa;this._box||(this._box=$a.create("div","mapboxgl-boxzoom",this._container),this._container.classList.add("mapboxgl-crosshair"),this._fireEvent("boxzoomstart",W));W=Math.min(Z.x,aa.x);var ea=Math.max(Z.x,aa.x),wa=Math.min(Z.y,aa.y);aa=Math.max(Z.y,aa.y);$a.setTransform(this._box,
"translate("+W+"px,"+wa+"px)");this._box.style.width=ea-W+"px";this._box.style.height=aa-wa+"px"}};dg.prototype.mouseupWindow=function(W,aa){var Z=this;if(this._active&&0===W.button){var ea=this._startPos;if(this.reset(),$a.suppressClick(),ea.x!==aa.x||ea.y!==aa.y)return this._map.fire(new a.Event("boxzoomend",{originalEvent:W})),{cameraAnimation:function(wa){return wa.fitScreenCoordinates(ea,aa,Z._map.getBearing(),{linear:!0})}};this._fireEvent("boxzoomcancel",W)}};dg.prototype.keydown=function(W){this._active&&
27===W.keyCode&&(this.reset(),this._fireEvent("boxzoomcancel",W))};dg.prototype.reset=function(){this._active=!1;this._container.classList.remove("mapboxgl-crosshair");this._box&&($a.remove(this._box),this._box=null);$a.enableDrag();delete this._startPos;delete this._lastPos};dg.prototype._fireEvent=function(W,aa){return this._map.fire(new a.Event(W,{originalEvent:aa}))};var zi=function(W){this.reset();this.numTouches=W.numTouches};zi.prototype.reset=function(){delete this.centroid;delete this.startTime;
delete this.touches;this.aborted=!1};zi.prototype.touchstart=function(W,aa,Z){(this.centroid||Z.length>this.numTouches)&&(this.aborted=!0);if(!this.aborted&&(void 0===this.startTime&&(this.startTime=W.timeStamp),Z.length===this.numTouches)){W=new a.Point(0,0);for(var ea=0;ea<aa.length;ea+=1)W._add(aa[ea]);this.centroid=W.div(aa.length);this.touches=na(Z,aa)}};zi.prototype.touchmove=function(W,aa,Z){if(!this.aborted&&this.centroid){W=na(Z,aa);for(var ea in this.touches)aa=W[ea],(!aa||30<aa.dist(this.touches[ea]))&&
(this.aborted=!0)}};zi.prototype.touchend=function(W,aa,Z){if((!this.centroid||500<W.timeStamp-this.startTime)&&(this.aborted=!0),0===Z.length)if(W=!this.aborted&&this.centroid,this.reset(),W)return W};var Th=function(W){this.singleTap=new zi(W);this.numTaps=W.numTaps;this.reset()};Th.prototype.reset=function(){this.lastTime=1/0;delete this.lastTap;this.count=0;this.singleTap.reset()};Th.prototype.touchstart=function(W,aa,Z){this.singleTap.touchstart(W,aa,Z)};Th.prototype.touchmove=function(W,aa,
Z){this.singleTap.touchmove(W,aa,Z)};Th.prototype.touchend=function(W,aa,Z){if(aa=this.singleTap.touchend(W,aa,Z)){Z=500>W.timeStamp-this.lastTime;var ea=!this.lastTap||30>this.lastTap.dist(aa);if(Z&&ea||this.reset(),this.count++,this.lastTime=W.timeStamp,this.lastTap=aa,this.count===this.numTaps)return this.reset(),aa}};var ah=function(){this._zoomIn=new Th({numTouches:1,numTaps:2});this._zoomOut=new Th({numTouches:2,numTaps:1});this.reset()};ah.prototype.reset=function(){this._active=!1;this._zoomIn.reset();
this._zoomOut.reset()};ah.prototype.touchstart=function(W,aa,Z){this._zoomIn.touchstart(W,aa,Z);this._zoomOut.touchstart(W,aa,Z)};ah.prototype.touchmove=function(W,aa,Z){this._zoomIn.touchmove(W,aa,Z);this._zoomOut.touchmove(W,aa,Z)};ah.prototype.touchend=function(W,aa,Z){var ea=this,wa=this._zoomIn.touchend(W,aa,Z),Ga=this._zoomOut.touchend(W,aa,Z);return wa?(this._active=!0,W.preventDefault(),setTimeout(function(){return ea.reset()},0),{cameraAnimation:function(Sa){return Sa.easeTo({duration:300,
zoom:Sa.getZoom()+1,around:Sa.unproject(wa)},{originalEvent:W})}}):Ga?(this._active=!0,W.preventDefault(),setTimeout(function(){return ea.reset()},0),{cameraAnimation:function(Sa){return Sa.easeTo({duration:300,zoom:Sa.getZoom()-1,around:Sa.unproject(Ga)},{originalEvent:W})}}):void 0};ah.prototype.touchcancel=function(){this.reset()};ah.prototype.enable=function(){this._enabled=!0};ah.prototype.disable=function(){this._enabled=!1;this.reset()};ah.prototype.isEnabled=function(){return this._enabled};
ah.prototype.isActive=function(){return this._active};var og=function(W){this.reset();this._clickTolerance=W.clickTolerance||1};og.prototype.reset=function(){this._moved=this._active=!1;delete this._lastPoint;delete this._eventButton};og.prototype._correctButton=function(W,aa){return!1};og.prototype._move=function(W,aa){return{}};og.prototype.mousedown=function(W,aa){if(!this._lastPoint){var Z=$a.mouseButton(W);this._correctButton(W,Z)&&(this._lastPoint=aa,this._eventButton=Z)}};og.prototype.mousemoveWindow=
function(W,aa){var Z=this._lastPoint;if(Z&&(W.preventDefault(),this._moved||!(aa.dist(Z)<this._clickTolerance)))return this._moved=!0,this._lastPoint=aa,this._move(Z,aa)};og.prototype.mouseupWindow=function(W){$a.mouseButton(W)===this._eventButton&&(this._moved&&$a.suppressClick(),this.reset())};og.prototype.enable=function(){this._enabled=!0};og.prototype.disable=function(){this._enabled=!1;this.reset()};og.prototype.isEnabled=function(){return this._enabled};og.prototype.isActive=function(){return this._active};
var Ai=function(W){function aa(){W.apply(this,arguments)}return W&&(aa.__proto__=W),(aa.prototype=Object.create(W&&W.prototype)).constructor=aa,aa.prototype.mousedown=function(Z,ea){W.prototype.mousedown.call(this,Z,ea);this._lastPoint&&(this._active=!0)},aa.prototype._correctButton=function(Z,ea){return 0===ea&&!Z.ctrlKey},aa.prototype._move=function(Z,ea){return{around:ea,panDelta:ea.sub(Z)}},aa}(og),Nj=function(W){function aa(){W.apply(this,arguments)}return W&&(aa.__proto__=W),(aa.prototype=Object.create(W&&
W.prototype)).constructor=aa,aa.prototype._correctButton=function(Z,ea){return 0===ea&&Z.ctrlKey||2===ea},aa.prototype._move=function(Z,ea){if(Z=.8*(ea.x-Z.x))return this._active=!0,{bearingDelta:Z}},aa.prototype.contextmenu=function(Z){Z.preventDefault()},aa}(og),mj=function(W){function aa(){W.apply(this,arguments)}return W&&(aa.__proto__=W),(aa.prototype=Object.create(W&&W.prototype)).constructor=aa,aa.prototype._correctButton=function(Z,ea){return 0===ea&&Z.ctrlKey||2===ea},aa.prototype._move=
function(Z,ea){if(Z=-.5*(ea.y-Z.y))return this._active=!0,{pitchDelta:Z}},aa.prototype.contextmenu=function(Z){Z.preventDefault()},aa}(og),eg=function(W){this._minTouches=1;this._clickTolerance=W.clickTolerance||1;this.reset()};eg.prototype.reset=function(){this._active=!1;this._touches={};this._sum=new a.Point(0,0)};eg.prototype.touchstart=function(W,aa,Z){return this._calculateTransform(W,aa,Z)};eg.prototype.touchmove=function(W,aa,Z){if(this._active)return W.preventDefault(),this._calculateTransform(W,
aa,Z)};eg.prototype.touchend=function(W,aa,Z){this._calculateTransform(W,aa,Z);this._active&&Z.length<this._minTouches&&this.reset()};eg.prototype.touchcancel=function(){this.reset()};eg.prototype._calculateTransform=function(W,aa,Z){0<Z.length&&(this._active=!0);Z=na(Z,aa);W=new a.Point(0,0);var ea=new a.Point(0,0);aa=0;for(var wa in Z){var Ga=Z[wa],Sa=this._touches[wa];Sa&&(W._add(Ga),ea._add(Ga.sub(Sa)),aa++,Z[wa]=Ga)}if(this._touches=Z,!(aa<this._minTouches)&&ea.mag())if(wa=ea.div(aa),this._sum._add(wa),
!(this._sum.mag()<this._clickTolerance))return{around:W.div(aa),panDelta:wa}};eg.prototype.enable=function(){this._enabled=!0};eg.prototype.disable=function(){this._enabled=!1;this.reset()};eg.prototype.isEnabled=function(){return this._enabled};eg.prototype.isActive=function(){return this._active};var tf=function(){this.reset()};tf.prototype.reset=function(){this._active=!1;delete this._firstTwoTouches};tf.prototype._start=function(W){};tf.prototype._move=function(W,aa,Z){return{}};tf.prototype.touchstart=
function(W,aa,Z){this._firstTwoTouches||2>Z.length||(this._firstTwoTouches=[Z[0].identifier,Z[1].identifier],this._start([aa[0],aa[1]]))};tf.prototype.touchmove=function(W,aa,Z){if(this._firstTwoTouches){W.preventDefault();var ea=this._firstTwoTouches,wa=ea[1];ea=ka(Z,aa,ea[0]);aa=ka(Z,aa,wa);if(ea&&aa)return Z=this._aroundCenter?null:ea.add(aa).div(2),this._move([ea,aa],Z,W)}};tf.prototype.touchend=function(W,aa,Z){if(this._firstTwoTouches){var ea=this._firstTwoTouches;W=ea[1];ea=ka(Z,aa,ea[0]);
aa=ka(Z,aa,W);ea&&aa||(this._active&&$a.suppressClick(),this.reset())}};tf.prototype.touchcancel=function(){this.reset()};tf.prototype.enable=function(W){this._enabled=!0;this._aroundCenter=!!W&&"center"===W.around};tf.prototype.disable=function(){this._enabled=!1;this.reset()};tf.prototype.isEnabled=function(){return this._enabled};tf.prototype.isActive=function(){return this._active};var Vi=function(W){function aa(){W.apply(this,arguments)}return W&&(aa.__proto__=W),(aa.prototype=Object.create(W&&
W.prototype)).constructor=aa,aa.prototype.reset=function(){W.prototype.reset.call(this);delete this._distance;delete this._startDistance},aa.prototype._start=function(Z){this._startDistance=this._distance=Z[0].dist(Z[1])},aa.prototype._move=function(Z,ea){var wa=this._distance;if(this._distance=Z[0].dist(Z[1]),this._active||!(.1>Math.abs(Math.log(this._distance/this._startDistance)/Math.LN2)))return this._active=!0,{zoomDelta:Math.log(this._distance/wa)/Math.LN2,pinchAround:ea}},aa}(tf),gg=function(W){function aa(){W.apply(this,
arguments)}return W&&(aa.__proto__=W),(aa.prototype=Object.create(W&&W.prototype)).constructor=aa,aa.prototype.reset=function(){W.prototype.reset.call(this);delete this._minDiameter;delete this._startVector;delete this._vector},aa.prototype._start=function(Z){this._startVector=this._vector=Z[0].sub(Z[1]);this._minDiameter=Z[0].dist(Z[1])},aa.prototype._move=function(Z,ea){var wa=this._vector;if(this._vector=Z[0].sub(Z[1]),this._active||!this._isBelowThreshold(this._vector))return this._active=!0,
{bearingDelta:180*this._vector.angleWith(wa)/Math.PI,pinchAround:ea}},aa.prototype._isBelowThreshold=function(Z){this._minDiameter=Math.min(this._minDiameter,Z.mag());var ea=25/(Math.PI*this._minDiameter)*360;Z=180*Z.angleWith(this._startVector)/Math.PI;return Math.abs(Z)<ea},aa}(tf),Oj=function(W){function aa(){W.apply(this,arguments)}return W&&(aa.__proto__=W),(aa.prototype=Object.create(W&&W.prototype)).constructor=aa,aa.prototype.reset=function(){W.prototype.reset.call(this);this._valid=void 0;
delete this._firstMove;delete this._lastPoints},aa.prototype._start=function(Z){this._lastPoints=Z;ua(Z[0].sub(Z[1]))&&(this._valid=!1)},aa.prototype._move=function(Z,ea,wa){ea=Z[0].sub(this._lastPoints[0]);var Ga=Z[1].sub(this._lastPoints[1]);if(this._valid=this.gestureBeginsVertically(ea,Ga,wa.timeStamp),this._valid)return this._lastPoints=Z,this._active=!0,{pitchDelta:(ea.y+Ga.y)/2*-.5}},aa.prototype.gestureBeginsVertically=function(Z,ea,wa){if(void 0!==this._valid)return this._valid;var Ga=2<=
Z.mag(),Sa=2<=ea.mag();if(Ga||Sa){if(!Ga||!Sa)return void 0===this._firstMove&&(this._firstMove=wa),100>wa-this._firstMove&&void 0;wa=0<Z.y==0<ea.y;return ua(Z)&&ua(ea)&&wa}},aa}(tf),Uh=function(){this._panStep=100;this._bearingStep=15;this._pitchStep=10};Uh.prototype.reset=function(){this._active=!1};Uh.prototype.keydown=function(W){var aa=this;if(!(W.altKey||W.ctrlKey||W.metaKey)){var Z=0,ea=0,wa=0,Ga=0,Sa=0;switch(W.keyCode){case 61:case 107:case 171:case 187:Z=1;break;case 189:case 109:case 173:Z=
-1;break;case 37:W.shiftKey?ea=-1:(W.preventDefault(),Ga=-1);break;case 39:W.shiftKey?ea=1:(W.preventDefault(),Ga=1);break;case 38:W.shiftKey?wa=1:(W.preventDefault(),Sa=-1);break;case 40:W.shiftKey?wa=-1:(W.preventDefault(),Sa=1);break;default:return}return{cameraAnimation:function(ab){var yb=ab.getZoom();ab.easeTo({duration:300,easeId:"keyboardHandler",easing:va,zoom:Z?Math.round(yb)+Z*(W.shiftKey?2:1):yb,bearing:ab.getBearing()+ea*aa._bearingStep,pitch:ab.getPitch()+wa*aa._pitchStep,offset:[-Ga*
aa._panStep,-Sa*aa._panStep],center:ab.getCenter()},{originalEvent:W})}}}};Uh.prototype.enable=function(){this._enabled=!0};Uh.prototype.disable=function(){this._enabled=!1;this.reset()};Uh.prototype.isEnabled=function(){return this._enabled};Uh.prototype.isActive=function(){return this._active};var Qf=function(W,aa){this._map=W;this._el=W.getCanvasContainer();this._handler=aa;this._delta=0;this._defaultZoomRate=.01;this._wheelZoomRate=1/450;a.bindAll(["_onWheel","_onTimeout","_onScrollFrame","_onScrollFinished"],
this)};Qf.prototype.setZoomRate=function(W){this._defaultZoomRate=W};Qf.prototype.setWheelZoomRate=function(W){this._wheelZoomRate=W};Qf.prototype.isEnabled=function(){return!!this._enabled};Qf.prototype.isActive=function(){return!!this._active||void 0!==this._finishTimeout};Qf.prototype.isZooming=function(){return!!this._zooming};Qf.prototype.enable=function(W){this.isEnabled()||(this._enabled=!0,this._aroundCenter=W&&"center"===W.around)};Qf.prototype.disable=function(){this.isEnabled()&&(this._enabled=
!1)};Qf.prototype.wheel=function(W){if(this.isEnabled()){var aa=W.deltaMode===a.window.WheelEvent.DOM_DELTA_LINE?40*W.deltaY:W.deltaY,Z=a.browser.now(),ea=Z-(this._lastWheelEventTime||0);this._lastWheelEventTime=Z;0!==aa&&0==aa%4.000244140625?this._type="wheel":0!==aa&&4>Math.abs(aa)?this._type="trackpad":400<ea?(this._type=null,this._lastValue=aa,this._timeout=setTimeout(this._onTimeout,40,W)):this._type||(this._type=200>Math.abs(ea*aa)?"trackpad":"wheel",this._timeout&&(clearTimeout(this._timeout),
this._timeout=null,aa+=this._lastValue));W.shiftKey&&aa&&(aa/=4);this._type&&(this._lastWheelEvent=W,this._delta-=aa,this._active||this._start(W));W.preventDefault()}};Qf.prototype._onTimeout=function(W){this._type="wheel";this._delta-=this._lastValue;this._active||this._start(W)};Qf.prototype._start=function(W){this._delta&&(this._frameId&&(this._frameId=null),this._active=!0,this.isZooming()||(this._zooming=!0),this._finishTimeout&&(clearTimeout(this._finishTimeout),delete this._finishTimeout),
W=$a.mousePos(this._el,W),this._around=a.LngLat.convert(this._aroundCenter?this._map.getCenter():this._map.unproject(W)),this._aroundPoint=this._map.transform.locationPoint(this._around),this._frameId||(this._frameId=!0,this._handler._triggerRenderFrame()))};Qf.prototype.renderFrame=function(){return this._onScrollFrame()};Qf.prototype._onScrollFrame=function(){var W=this;if(this._frameId&&(this._frameId=null,this.isActive())){var aa=this._map.transform;if(0!==this._delta){var Z=2/(1+Math.exp(-Math.abs(this._delta*
("wheel"===this._type&&4.000244140625<Math.abs(this._delta)?this._wheelZoomRate:this._defaultZoomRate))));0>this._delta&&0!==Z&&(Z=1/Z);var ea="number"==typeof this._targetZoom?aa.zoomScale(this._targetZoom):aa.scale;this._targetZoom=Math.min(aa.maxZoom,Math.max(aa.minZoom,aa.scaleZoom(ea*Z)));"wheel"===this._type&&(this._startZoom=aa.zoom,this._easing=this._smoothOutEasing(200));this._delta=0}var wa="number"==typeof this._targetZoom?this._targetZoom:aa.zoom;var Ga=this._startZoom,Sa=this._easing;
Z=!1;"wheel"===this._type&&Ga&&Sa?(ea=Math.min((a.browser.now()-this._lastWheelEventTime)/200,1),Sa=Sa(ea),wa=a.number(Ga,wa,Sa),1>ea?this._frameId||(this._frameId=!0):Z=!0):Z=!0;return this._active=!0,Z&&(this._active=!1,this._finishTimeout=setTimeout(function(){W._zooming=!1;W._handler._triggerRenderFrame();delete W._targetZoom;delete W._finishTimeout},200)),{noInertia:!0,needsRenderFrame:!Z,zoomDelta:wa-aa.zoom,around:this._aroundPoint,originalEvent:this._lastWheelEvent}}};Qf.prototype._smoothOutEasing=
function(W){var aa=a.ease;if(this._prevEase){aa=this._prevEase;var Z=(a.browser.now()-aa.start)/aa.duration;aa=aa.easing(Z+.01)-aa.easing(Z);aa=.27/Math.sqrt(aa*aa+1E-4)*.01;aa=a.bezier(aa,Math.sqrt(.0729-aa*aa),.25,1)}return this._prevEase={start:a.browser.now(),duration:W,easing:aa},aa};Qf.prototype.reset=function(){this._active=!1};var fg=function(W,aa){this._clickZoom=W;this._tapZoom=aa};fg.prototype.enable=function(){this._clickZoom.enable();this._tapZoom.enable()};fg.prototype.disable=function(){this._clickZoom.disable();
this._tapZoom.disable()};fg.prototype.isEnabled=function(){return this._clickZoom.isEnabled()&&this._tapZoom.isEnabled()};fg.prototype.isActive=function(){return this._clickZoom.isActive()||this._tapZoom.isActive()};var pg=function(){this.reset()};pg.prototype.reset=function(){this._active=!1};pg.prototype.dblclick=function(W,aa){return W.preventDefault(),{cameraAnimation:function(Z){Z.easeTo({duration:300,zoom:Z.getZoom()+(W.shiftKey?-1:1),around:Z.unproject(aa)},{originalEvent:W})}}};pg.prototype.enable=
function(){this._enabled=!0};pg.prototype.disable=function(){this._enabled=!1;this.reset()};pg.prototype.isEnabled=function(){return this._enabled};pg.prototype.isActive=function(){return this._active};var If=function(){this._tap=new Th({numTouches:1,numTaps:1});this.reset()};If.prototype.reset=function(){this._active=!1;delete this._swipePoint;delete this._swipeTouch;delete this._tapTime;this._tap.reset()};If.prototype.touchstart=function(W,aa,Z){this._swipePoint||(this._tapTime&&500<W.timeStamp-
this._tapTime&&this.reset(),this._tapTime?0<Z.length&&(this._swipePoint=aa[0],this._swipeTouch=Z[0].identifier):this._tap.touchstart(W,aa,Z))};If.prototype.touchmove=function(W,aa,Z){if(this._tapTime){if(this._swipePoint&&Z[0].identifier===this._swipeTouch)return aa=aa[0],Z=aa.y-this._swipePoint.y,this._swipePoint=aa,W.preventDefault(),this._active=!0,{zoomDelta:Z/128}}else this._tap.touchmove(W,aa,Z)};If.prototype.touchend=function(W,aa,Z){this._tapTime?this._swipePoint&&0===Z.length&&this.reset():
this._tap.touchend(W,aa,Z)&&(this._tapTime=W.timeStamp)};If.prototype.touchcancel=function(){this.reset()};If.prototype.enable=function(){this._enabled=!0};If.prototype.disable=function(){this._enabled=!1;this.reset()};If.prototype.isEnabled=function(){return this._enabled};If.prototype.isActive=function(){return this._active};var Mg=function(W,aa,Z){this._el=W;this._mousePan=aa;this._touchPan=Z};Mg.prototype.enable=function(W){this._inertiaOptions=W||{};this._mousePan.enable();this._touchPan.enable();
this._el.classList.add("mapboxgl-touch-drag-pan")};Mg.prototype.disable=function(){this._mousePan.disable();this._touchPan.disable();this._el.classList.remove("mapboxgl-touch-drag-pan")};Mg.prototype.isEnabled=function(){return this._mousePan.isEnabled()&&this._touchPan.isEnabled()};Mg.prototype.isActive=function(){return this._mousePan.isActive()||this._touchPan.isActive()};var bh=function(W,aa,Z){this._pitchWithRotate=W.pitchWithRotate;this._mouseRotate=aa;this._mousePitch=Z};bh.prototype.enable=
function(){this._mouseRotate.enable();this._pitchWithRotate&&this._mousePitch.enable()};bh.prototype.disable=function(){this._mouseRotate.disable();this._mousePitch.disable()};bh.prototype.isEnabled=function(){return this._mouseRotate.isEnabled()&&(!this._pitchWithRotate||this._mousePitch.isEnabled())};bh.prototype.isActive=function(){return this._mouseRotate.isActive()||this._mousePitch.isActive()};var qf=function(W,aa,Z,ea){this._el=W;this._touchZoom=aa;this._touchRotate=Z;this._tapDragZoom=ea;
this._rotationDisabled=!1;this._enabled=!0};qf.prototype.enable=function(W){this._touchZoom.enable(W);this._rotationDisabled||this._touchRotate.enable(W);this._tapDragZoom.enable();this._el.classList.add("mapboxgl-touch-zoom-rotate")};qf.prototype.disable=function(){this._touchZoom.disable();this._touchRotate.disable();this._tapDragZoom.disable();this._el.classList.remove("mapboxgl-touch-zoom-rotate")};qf.prototype.isEnabled=function(){return this._touchZoom.isEnabled()&&(this._rotationDisabled||
this._touchRotate.isEnabled())&&this._tapDragZoom.isEnabled()};qf.prototype.isActive=function(){return this._touchZoom.isActive()||this._touchRotate.isActive()||this._tapDragZoom.isActive()};qf.prototype.disableRotation=function(){this._rotationDisabled=!0;this._touchRotate.disable()};qf.prototype.enableRotation=function(){this._rotationDisabled=!1;this._touchZoom.isEnabled()&&this._touchRotate.enable()};var nj=function(W){return W.zoom||W.drag||W.pitch||W.rotate},Pj=function(W){function aa(){W.apply(this,
arguments)}return W&&(aa.__proto__=W),(aa.prototype=Object.create(W&&W.prototype)).constructor=aa,aa}(a.Event),Ud=function(W,aa){this._map=W;this._el=this._map.getCanvasContainer();this._handlers=[];this._handlersById={};this._changes=[];this._inertia=new yi(W);this._bearingSnap=aa.bearingSnap;this._previousActiveHandlers={};this._eventsInProgress={};this._addDefaultHandlers(aa);a.bindAll(["handleEvent","handleWindowEvent"],this);W=this._el;this._listeners=[[W,"touchstart",{passive:!1}],[W,"touchmove",
{passive:!1}],[W,"touchend",void 0],[W,"touchcancel",void 0],[W,"mousedown",void 0],[W,"mousemove",void 0],[W,"mouseup",void 0],[a.window.document,"mousemove",{capture:!0}],[a.window.document,"mouseup",void 0],[W,"mouseover",void 0],[W,"mouseout",void 0],[W,"dblclick",void 0],[W,"click",void 0],[W,"keydown",{capture:!1}],[W,"keyup",void 0],[W,"wheel",{passive:!1}],[W,"contextmenu",void 0],[a.window,"blur",void 0]];W=0;for(aa=this._listeners;W<aa.length;W+=1){var Z=aa[W],ea=Z[0];$a.addEventListener(ea,
Z[1],ea===a.window.document?this.handleWindowEvent:this.handleEvent,Z[2])}};Ud.prototype.destroy=function(){for(var W=0,aa=this._listeners;W<aa.length;W+=1){var Z=aa[W],ea=Z[0];$a.removeEventListener(ea,Z[1],ea===a.window.document?this.handleWindowEvent:this.handleEvent,Z[2])}};Ud.prototype._addDefaultHandlers=function(W){var aa=this._map,Z=aa.getCanvasContainer();this._add("mapEvent",new Hf(aa,W));var ea=aa.boxZoom=new dg(aa,W);this._add("boxZoom",ea);ea=new ah;var wa=new pg;aa.doubleClickZoom=new fg(wa,
ea);this._add("tapZoom",ea);this._add("clickZoom",wa);ea=new If;this._add("tapDragZoom",ea);wa=aa.touchPitch=new Oj;this._add("touchPitch",wa);wa=new Nj(W);var Ga=new mj(W);aa.dragRotate=new bh(W,wa,Ga);this._add("mouseRotate",wa,["mousePitch"]);this._add("mousePitch",Ga,["mouseRotate"]);wa=new Ai(W);Ga=new eg(W);aa.dragPan=new Mg(Z,wa,Ga);this._add("mousePan",wa);this._add("touchPan",Ga,["touchZoom","touchRotate"]);wa=new gg;Ga=new Vi;aa.touchZoomRotate=new qf(Z,Ga,wa,ea);this._add("touchRotate",
wa,["touchPan","touchZoom"]);this._add("touchZoom",Ga,["touchPan","touchRotate"]);Z=aa.scrollZoom=new Qf(aa,this);this._add("scrollZoom",Z,["mousePan"]);Z=aa.keyboard=new Uh;this._add("keyboard",Z);this._add("blockableMapEvent",new Lg(aa));Z=0;for(ea="boxZoom doubleClickZoom tapDragZoom touchPitch dragRotate dragPan touchZoomRotate scrollZoom keyboard".split(" ");Z<ea.length;Z+=1)wa=ea[Z],W.interactive&&W[wa]&&aa[wa].enable(W[wa])};Ud.prototype._add=function(W,aa,Z){this._handlers.push({handlerName:W,
handler:aa,allowed:Z});this._handlersById[W]=aa};Ud.prototype.stop=function(){if(!this._updatingCamera){for(var W=0,aa=this._handlers;W<aa.length;W+=1)aa[W].handler.reset();this._inertia.clear();this._fireEvents({},{});this._changes=[]}};Ud.prototype.isActive=function(){for(var W=0,aa=this._handlers;W<aa.length;W+=1)if(aa[W].handler.isActive())return!0;return!1};Ud.prototype.isZooming=function(){return!!this._eventsInProgress.zoom||this._map.scrollZoom.isZooming()};Ud.prototype.isRotating=function(){return!!this._eventsInProgress.rotate};
Ud.prototype.isMoving=function(){return!!nj(this._eventsInProgress)||this.isZooming()};Ud.prototype._blockedByActive=function(W,aa,Z){for(var ea in W)if(ea!==Z&&(!aa||0>aa.indexOf(ea)))return!0;return!1};Ud.prototype.handleWindowEvent=function(W){this.handleEvent(W,W.type+"Window")};Ud.prototype._getMapTouches=function(W){for(var aa=[],Z=0;Z<W.length;Z+=1){var ea=W[Z];this._el.contains(ea.target)&&aa.push(ea)}return aa};Ud.prototype.handleEvent=function(W,aa){if("blur"!==W.type){this._updatingCamera=
!0;for(var Z="renderFrame"===W.type?void 0:W,ea={needsRenderFrame:!1},wa={},Ga={},Sa=W.touches?this._getMapTouches(W.touches):void 0,ab=Sa?$a.touchPos(this._el,Sa):$a.mousePos(this._el,W),yb=0,Hb=this._handlers;yb<Hb.length;yb+=1){var Ib=Hb[yb],nc=Ib.handlerName,mc=Ib.handler;Ib=Ib.allowed;if(mc.isEnabled()){var cc=void 0;this._blockedByActive(Ga,Ib,nc)?mc.reset():mc[aa||W.type]&&(cc=mc[aa||W.type](W,ab,Sa),this.mergeHandlerResult(ea,wa,cc,nc,Z),cc&&cc.needsRenderFrame&&this._triggerRenderFrame());
(cc||mc.isActive())&&(Ga[nc]=mc)}}W={};for(var lc in this._previousActiveHandlers)Ga[lc]||(W[lc]=Z);this._previousActiveHandlers=Ga;(Object.keys(W).length||Ca(ea))&&(this._changes.push([ea,wa,W]),this._triggerRenderFrame());(Object.keys(Ga).length||Ca(ea))&&this._map._stop(!0);this._updatingCamera=!1;(Z=ea.cameraAnimation)&&(this._inertia.clear(),this._fireEvents({},{}),this._changes=[],Z(this._map))}else this.stop()};Ud.prototype.mergeHandlerResult=function(W,aa,Z,ea,wa){Z&&(a.extend(W,Z),W={handlerName:ea,
originalEvent:Z.originalEvent||wa},void 0!==Z.zoomDelta&&(aa.zoom=W),void 0!==Z.panDelta&&(aa.drag=W),void 0!==Z.pitchDelta&&(aa.pitch=W),void 0!==Z.bearingDelta&&(aa.rotate=W))};Ud.prototype._applyChanges=function(){for(var W={},aa={},Z={},ea=0,wa=this._changes;ea<wa.length;ea+=1){var Ga=wa[ea],Sa=Ga[0],ab=Ga[1];Ga=Ga[2];Sa.panDelta&&(W.panDelta=(W.panDelta||new a.Point(0,0))._add(Sa.panDelta));Sa.zoomDelta&&(W.zoomDelta=(W.zoomDelta||0)+Sa.zoomDelta);Sa.bearingDelta&&(W.bearingDelta=(W.bearingDelta||
0)+Sa.bearingDelta);Sa.pitchDelta&&(W.pitchDelta=(W.pitchDelta||0)+Sa.pitchDelta);void 0!==Sa.around&&(W.around=Sa.around);void 0!==Sa.pinchAround&&(W.pinchAround=Sa.pinchAround);Sa.noInertia&&(W.noInertia=Sa.noInertia);a.extend(aa,ab);a.extend(Z,Ga)}this._updateMapTransform(W,aa,Z);this._changes=[]};Ud.prototype._updateMapTransform=function(W,aa,Z){var ea=this._map,wa=ea.transform;if(!Ca(W))return this._fireEvents(aa,Z);var Ga=W.panDelta,Sa=W.zoomDelta,ab=W.bearingDelta,yb=W.pitchDelta,Hb=W.around,
Ib=W.pinchAround;void 0!==Ib&&(Hb=Ib);ea._stop(!0);Hb=Hb||ea.transform.centerPoint;ea=wa.pointLocation(Ga?Hb.sub(Ga):Hb);ab&&(wa.bearing+=ab);yb&&(wa.pitch+=yb);Sa&&(wa.zoom+=Sa);wa.setLocationAtPoint(ea,Hb);this._map._update();W.noInertia||this._inertia.record(W);this._fireEvents(aa,Z)};Ud.prototype._fireEvents=function(W,aa){var Z=this,ea=nj(this._eventsInProgress),wa=nj(W),Ga={};for(Ib in W)this._eventsInProgress[Ib]||(Ga[Ib+"start"]=W[Ib].originalEvent),this._eventsInProgress[Ib]=W[Ib];for(var Sa in!ea&&
wa&&this._fireEvent("movestart",wa.originalEvent),Ga)this._fireEvent(Sa,Ga[Sa]);for(var ab in W.rotate&&(this._bearingChanged=!0),wa&&this._fireEvent("move",wa.originalEvent),W)this._fireEvent(ab,W[ab].originalEvent);var yb;W={};for(var Hb in this._eventsInProgress){var Ib=this._eventsInProgress[Hb];Ga=Ib.handlerName;Ib=Ib.originalEvent;this._handlersById[Ga].isActive()||(delete this._eventsInProgress[Hb],W[Hb+"end"]=yb=aa[Ga]||Ib)}for(var nc in W)this._fireEvent(nc,W[nc]);aa=nj(this._eventsInProgress);
!ea&&!wa||aa||(this._updatingCamera=!0,ea=this._inertia._onMoveEnd(this._map.dragPan._inertiaOptions),wa=function(mc){return 0!==mc&&-Z._bearingSnap<mc&&mc<Z._bearingSnap},ea?(wa(ea.bearing||this._map.getBearing())&&(ea.bearing=0),this._map.easeTo(ea,{originalEvent:yb})):(this._map.fire(new a.Event("moveend",{originalEvent:yb})),wa(this._map.getBearing())&&this._map.resetNorth()),this._updatingCamera=this._bearingChanged=!1)};Ud.prototype._fireEvent=function(W,aa){this._map.fire(new a.Event(W,aa?
{originalEvent:aa}:{}))};Ud.prototype._triggerRenderFrame=function(){var W=this;void 0===this._frameId&&(this._frameId=this._map._requestRenderFrame(function(aa){delete W._frameId;W.handleEvent(new Pj("renderFrame",{timeStamp:aa}));W._applyChanges()}))};var tk=function(W){function aa(Z,ea){W.call(this);this._zooming=this._moving=!1;this.transform=Z;this._bearingSnap=ea.bearingSnap;a.bindAll(["_renderFrameCallback"],this)}return W&&(aa.__proto__=W),(aa.prototype=Object.create(W&&W.prototype)).constructor=
aa,aa.prototype.getCenter=function(){return new a.LngLat(this.transform.center.lng,this.transform.center.lat)},aa.prototype.setCenter=function(Z,ea){return this.jumpTo({center:Z},ea)},aa.prototype.panBy=function(Z,ea,wa){return Z=a.Point.convert(Z).mult(-1),this.panTo(this.transform.center,a.extend({offset:Z},ea),wa)},aa.prototype.panTo=function(Z,ea,wa){return this.easeTo(a.extend({center:Z},ea),wa)},aa.prototype.getZoom=function(){return this.transform.zoom},aa.prototype.setZoom=function(Z,ea){return this.jumpTo({zoom:Z},
ea),this},aa.prototype.zoomTo=function(Z,ea,wa){return this.easeTo(a.extend({zoom:Z},ea),wa)},aa.prototype.zoomIn=function(Z,ea){return this.zoomTo(this.getZoom()+1,Z,ea),this},aa.prototype.zoomOut=function(Z,ea){return this.zoomTo(this.getZoom()-1,Z,ea),this},aa.prototype.getBearing=function(){return this.transform.bearing},aa.prototype.setBearing=function(Z,ea){return this.jumpTo({bearing:Z},ea),this},aa.prototype.getPadding=function(){return this.transform.padding},aa.prototype.setPadding=function(Z,
ea){return this.jumpTo({padding:Z},ea),this},aa.prototype.rotateTo=function(Z,ea,wa){return this.easeTo(a.extend({bearing:Z},ea),wa)},aa.prototype.resetNorth=function(Z,ea){return this.rotateTo(0,a.extend({duration:1E3},Z),ea),this},aa.prototype.resetNorthPitch=function(Z,ea){return this.easeTo(a.extend({bearing:0,pitch:0,duration:1E3},Z),ea),this},aa.prototype.snapToNorth=function(Z,ea){return Math.abs(this.getBearing())<this._bearingSnap?this.resetNorth(Z,ea):this},aa.prototype.getPitch=function(){return this.transform.pitch},
aa.prototype.setPitch=function(Z,ea){return this.jumpTo({pitch:Z},ea),this},aa.prototype.cameraForBounds=function(Z,ea){return Z=a.LngLatBounds.convert(Z),this._cameraForBoxAndBearing(Z.getNorthWest(),Z.getSouthEast(),0,ea)},aa.prototype._cameraForBoxAndBearing=function(Z,ea,wa,Ga){var Sa={top:0,bottom:0,right:0,left:0};if("number"==typeof(Ga=a.extend({padding:Sa,offset:[0,0],maxZoom:this.transform.maxZoom},Ga)).padding){var ab=Ga.padding;Ga.padding={top:ab,bottom:ab,right:ab,left:ab}}Ga.padding=
a.extend(Sa,Ga.padding);Sa=this.transform;ab=Sa.padding;Z=Sa.project(a.LngLat.convert(Z));ea=Sa.project(a.LngLat.convert(ea));var yb=Z.rotate(-wa*Math.PI/180),Hb=ea.rotate(-wa*Math.PI/180),Ib=new a.Point(Math.max(yb.x,Hb.x),Math.max(yb.y,Hb.y));yb=new a.Point(Math.min(yb.x,Hb.x),Math.min(yb.y,Hb.y));yb=Ib.sub(yb);Ib=(Sa.width-(ab.left+ab.right+Ga.padding.left+Ga.padding.right))/yb.x;ab=(Sa.height-(ab.top+ab.bottom+Ga.padding.top+Ga.padding.bottom))/yb.y;if(!(0>ab||0>Ib))return ab=Math.min(Sa.scaleZoom(Sa.scale*
Math.min(Ib,ab)),Ga.maxZoom),Ib=a.Point.convert(Ga.offset),Ga=(new a.Point(Ib.x+(Ga.padding.left-Ga.padding.right)/2,Ib.y+(Ga.padding.top-Ga.padding.bottom)/2)).mult(Sa.scale/Sa.zoomScale(ab)),{center:Sa.unproject(Z.add(ea).div(2).sub(Ga)),zoom:ab,bearing:wa};a.warnOnce("Map cannot fit within canvas with the given bounds, padding, and/or offset.")},aa.prototype.fitBounds=function(Z,ea,wa){return this._fitInternal(this.cameraForBounds(Z,ea),ea,wa)},aa.prototype.fitScreenCoordinates=function(Z,ea,wa,
Ga,Sa){return this._fitInternal(this._cameraForBoxAndBearing(this.transform.pointLocation(a.Point.convert(Z)),this.transform.pointLocation(a.Point.convert(ea)),wa,Ga),Ga,Sa)},aa.prototype._fitInternal=function(Z,ea,wa){return Z?(delete (ea=a.extend(Z,ea)).padding,ea.linear?this.easeTo(ea,wa):this.flyTo(ea,wa)):this},aa.prototype.jumpTo=function(Z,ea){this.stop();var wa=this.transform,Ga=!1,Sa=!1,ab=!1;return"zoom"in Z&&wa.zoom!==+Z.zoom&&(Ga=!0,wa.zoom=+Z.zoom),void 0!==Z.center&&(wa.center=a.LngLat.convert(Z.center)),
"bearing"in Z&&wa.bearing!==+Z.bearing&&(Sa=!0,wa.bearing=+Z.bearing),"pitch"in Z&&wa.pitch!==+Z.pitch&&(ab=!0,wa.pitch=+Z.pitch),null==Z.padding||wa.isPaddingEqual(Z.padding)||(wa.padding=Z.padding),this.fire(new a.Event("movestart",ea)).fire(new a.Event("move",ea)),Ga&&this.fire(new a.Event("zoomstart",ea)).fire(new a.Event("zoom",ea)).fire(new a.Event("zoomend",ea)),Sa&&this.fire(new a.Event("rotatestart",ea)).fire(new a.Event("rotate",ea)).fire(new a.Event("rotateend",ea)),ab&&this.fire(new a.Event("pitchstart",
ea)).fire(new a.Event("pitch",ea)).fire(new a.Event("pitchend",ea)),this.fire(new a.Event("moveend",ea))},aa.prototype.easeTo=function(Z,ea){var wa=this;this._stop(!1,Z.easeId);(!1===(Z=a.extend({offset:[0,0],duration:500,easing:a.ease},Z)).animate||!Z.essential&&a.browser.prefersReducedMotion)&&(Z.duration=0);var Ga=this.transform,Sa=this.getZoom(),ab=this.getBearing(),yb=this.getPitch(),Hb=this.getPadding(),Ib="zoom"in Z?+Z.zoom:Sa,nc="bearing"in Z?this._normalizeBearing(Z.bearing,ab):ab,mc="pitch"in
Z?+Z.pitch:yb,cc="padding"in Z?Z.padding:Ga.padding,lc=a.Point.convert(Z.offset),kc=Ga.centerPoint.add(lc),Gb=Ga.pointLocation(kc),dc=a.LngLat.convert(Z.center||Gb);this._normalizeCenter(dc);var Dc,Uc,jd=Ga.project(Gb),Ic=Ga.project(dc).sub(jd),ld=Ga.zoomScale(Ib-Sa);Z.around&&(Dc=a.LngLat.convert(Z.around),Uc=Ga.locationPoint(Dc));Gb={moving:this._moving,zooming:this._zooming,rotating:this._rotating,pitching:this._pitching};return this._zooming=this._zooming||Ib!==Sa,this._rotating=this._rotating||
ab!==nc,this._pitching=this._pitching||mc!==yb,this._padding=!Ga.isPaddingEqual(cc),this._easeId=Z.easeId,this._prepareEase(ea,Z.noMoveStart,Gb),clearTimeout(this._easeEndTimeoutID),this._ease(function(id){if(wa._zooming&&(Ga.zoom=a.number(Sa,Ib,id)),wa._rotating&&(Ga.bearing=a.number(ab,nc,id)),wa._pitching&&(Ga.pitch=a.number(yb,mc,id)),wa._padding&&(Ga.interpolatePadding(Hb,cc,id),kc=Ga.centerPoint.add(lc)),Dc)Ga.setLocationAtPoint(Dc,Uc);else{var yd=Ga.zoomScale(Ga.zoom-Sa);id=Ga.unproject(jd.add(Ic.mult(id*
Math.pow(Ib>Sa?Math.min(2,ld):Math.max(.5,ld),1-id))).mult(yd));Ga.setLocationAtPoint(Ga.renderWorldCopies?id.wrap():id,kc)}wa._fireMoveEvents(ea)},function(id){wa._afterEase(ea,id)},Z),this},aa.prototype._prepareEase=function(Z,ea,wa){void 0===wa&&(wa={});this._moving=!0;ea||wa.moving||this.fire(new a.Event("movestart",Z));this._zooming&&!wa.zooming&&this.fire(new a.Event("zoomstart",Z));this._rotating&&!wa.rotating&&this.fire(new a.Event("rotatestart",Z));this._pitching&&!wa.pitching&&this.fire(new a.Event("pitchstart",
Z))},aa.prototype._fireMoveEvents=function(Z){this.fire(new a.Event("move",Z));this._zooming&&this.fire(new a.Event("zoom",Z));this._rotating&&this.fire(new a.Event("rotate",Z));this._pitching&&this.fire(new a.Event("pitch",Z))},aa.prototype._afterEase=function(Z,ea){if(!this._easeId||!ea||this._easeId!==ea){delete this._easeId;ea=this._zooming;var wa=this._rotating,Ga=this._pitching;this._padding=this._pitching=this._rotating=this._zooming=this._moving=!1;ea&&this.fire(new a.Event("zoomend",Z));
wa&&this.fire(new a.Event("rotateend",Z));Ga&&this.fire(new a.Event("pitchend",Z));this.fire(new a.Event("moveend",Z))}},aa.prototype.flyTo=function(Z,ea){function wa(qe){qe=(zd*zd-yd*yd+(qe?-1:1)*ie*ie*ud*ud)/(2*(qe?zd:yd)*ie*ud);return Math.log(Math.sqrt(qe*qe+1)-qe)}function Ga(qe){return(Math.exp(qe)+Math.exp(-qe))/2}var Sa=this;if(!Z.essential&&a.browser.prefersReducedMotion)return Z=a.pick(Z,["center","zoom","bearing","pitch","around"]),this.jumpTo(Z,ea);this.stop();Z=a.extend({offset:[0,0],
speed:1.2,curve:1.42,easing:a.ease},Z);var ab=this.transform,yb=this.getZoom(),Hb=this.getBearing(),Ib=this.getPitch(),nc=this.getPadding(),mc="zoom"in Z?a.clamp(+Z.zoom,ab.minZoom,ab.maxZoom):yb,cc="bearing"in Z?this._normalizeBearing(Z.bearing,Hb):Hb,lc="pitch"in Z?+Z.pitch:Ib,kc="padding"in Z?Z.padding:ab.padding,Gb=ab.zoomScale(mc-yb),dc=a.Point.convert(Z.offset),Dc=ab.centerPoint.add(dc),Uc=ab.pointLocation(Dc),jd=a.LngLat.convert(Z.center||Uc);this._normalizeCenter(jd);var Ic=ab.project(Uc),
ld=ab.project(jd).sub(Ic),id=Z.curve,yd=Math.max(ab.width,ab.height),zd=yd/Gb,ud=ld.mag();"minZoom"in Z&&(Gb=a.clamp(Math.min(Z.minZoom,yb,mc),ab.minZoom,ab.maxZoom),Gb=yd/ab.zoomScale(Gb-yb),id=Math.sqrt(Gb/ud*2));var ie=id*id,ge=wa(0),Ee=function(qe){return Ga(ge)/Ga(ge+id*qe)},Ge=function(qe){var Ne=Ga(ge);qe=ze=ge+id*qe;return yd*((Ne*((Math.exp(qe)-Math.exp(-qe))/2/Ga(ze))-(Math.exp(ge)-Math.exp(-ge))/2)/ie)/ud;var ze},Be=(wa(1)-ge)/id;if(1E-6>Math.abs(ud)||!isFinite(Be)){if(1E-6>Math.abs(yd-
zd))return this.easeTo(Z,ea);var Qd=zd<yd?-1:1;Be=Math.abs(Math.log(zd/yd))/id;Ge=function(){return 0};Ee=function(qe){return Math.exp(Qd*id*qe)}}return Z.duration="duration"in Z?+Z.duration:1E3*Be/("screenSpeed"in Z?+Z.screenSpeed/id:+Z.speed),Z.maxDuration&&Z.duration>Z.maxDuration&&(Z.duration=0),this._zooming=!0,this._rotating=Hb!==cc,this._pitching=lc!==Ib,this._padding=!ab.isPaddingEqual(kc),this._prepareEase(ea,!1),this._ease(function(qe){var Ne=qe*Be,ze=1/Ee(Ne);ab.zoom=1===qe?mc:yb+ab.scaleZoom(ze);
Sa._rotating&&(ab.bearing=a.number(Hb,cc,qe));Sa._pitching&&(ab.pitch=a.number(Ib,lc,qe));Sa._padding&&(ab.interpolatePadding(nc,kc,qe),Dc=ab.centerPoint.add(dc));qe=1===qe?jd:ab.unproject(Ic.add(ld.mult(Ge(Ne))).mult(ze));ab.setLocationAtPoint(ab.renderWorldCopies?qe.wrap():qe,Dc);Sa._fireMoveEvents(ea)},function(){return Sa._afterEase(ea)},Z),this},aa.prototype.isEasing=function(){return!!this._easeFrameId},aa.prototype.stop=function(){return this._stop()},aa.prototype._stop=function(Z,ea){if(this._easeFrameId&&
(this._cancelRenderFrame(this._easeFrameId),delete this._easeFrameId,delete this._onEaseFrame),this._onEaseEnd){var wa=this._onEaseEnd;delete this._onEaseEnd;wa.call(this,ea)}Z||(Z=this.handlers)&&Z.stop();return this},aa.prototype._ease=function(Z,ea,wa){!1===wa.animate||0===wa.duration?(Z(1),ea()):(this._easeStart=a.browser.now(),this._easeOptions=wa,this._onEaseFrame=Z,this._onEaseEnd=ea,this._easeFrameId=this._requestRenderFrame(this._renderFrameCallback))},aa.prototype._renderFrameCallback=function(){var Z=
Math.min((a.browser.now()-this._easeStart)/this._easeOptions.duration,1);this._onEaseFrame(this._easeOptions.easing(Z));1>Z?this._easeFrameId=this._requestRenderFrame(this._renderFrameCallback):this.stop()},aa.prototype._normalizeBearing=function(Z,ea){Z=a.wrap(Z,-180,180);var wa=Math.abs(Z-ea);return Math.abs(Z-360-ea)<wa&&(Z-=360),Math.abs(Z+360-ea)<wa&&(Z+=360),Z},aa.prototype._normalizeCenter=function(Z){var ea=this.transform;ea.renderWorldCopies&&!ea.lngRange&&(ea=Z.lng-ea.center.lng,Z.lng+=
180<ea?-360:-180>ea?360:0)},aa}(a.Evented),Ng=function(W){void 0===W&&(W={});this.options=W;a.bindAll(["_updateEditLink","_updateData","_updateCompact"],this)};Ng.prototype.getDefaultPosition=function(){return"bottom-right"};Ng.prototype.onAdd=function(W){var aa=this.options&&this.options.compact;return this._map=W,this._container=$a.create("div","mapboxgl-ctrl mapboxgl-ctrl-attrib"),this._innerContainer=$a.create("div","mapboxgl-ctrl-attrib-inner",this._container),aa&&this._container.classList.add("mapboxgl-compact"),
this._updateAttributions(),this._updateEditLink(),this._map.on("styledata",this._updateData),this._map.on("sourcedata",this._updateData),this._map.on("moveend",this._updateEditLink),void 0===aa&&(this._map.on("resize",this._updateCompact),this._updateCompact()),this._container};Ng.prototype.onRemove=function(){$a.remove(this._container);this._map.off("styledata",this._updateData);this._map.off("sourcedata",this._updateData);this._map.off("moveend",this._updateEditLink);this._map.off("resize",this._updateCompact);
this._attribHTML=this._map=void 0};Ng.prototype._updateEditLink=function(){var W=this._editLink;W||(W=this._editLink=this._container.querySelector(".mapbox-improve-map"));var aa=[{key:"owner",value:this.styleOwner},{key:"id",value:this.styleId},{key:"access_token",value:this._map._requestManager._customAccessToken||a.config.ACCESS_TOKEN}];if(W){var Z=aa.reduce(function(ea,wa,Ga){return wa.value&&(ea+=wa.key+"\x3d"+wa.value+(Ga<aa.length-1?"\x26":"")),ea},"?");W.href=a.config.FEEDBACK_URL+"/"+Z+(this._map._hash?
this._map._hash.getHashString(!0):"");W.rel="noopener nofollow"}};Ng.prototype._updateData=function(W){!W||"metadata"!==W.sourceDataType&&"style"!==W.dataType||(this._updateAttributions(),this._updateEditLink())};Ng.prototype._updateAttributions=function(){if(this._map.style){var W=[];if(this.options.customAttribution&&(Array.isArray(this.options.customAttribution)?W=W.concat(this.options.customAttribution.map(function(wa){return"string"!=typeof wa?"":wa})):"string"==typeof this.options.customAttribution&&
W.push(this.options.customAttribution)),this._map.style.stylesheet){var aa=this._map.style.stylesheet;this.styleOwner=aa.owner;this.styleId=aa.id}aa=this._map.style.sourceCaches;for(var Z in aa){var ea=aa[Z];ea.used&&(ea=ea.getSource(),ea.attribution&&0>W.indexOf(ea.attribution)&&W.push(ea.attribution))}W.sort(function(wa,Ga){return wa.length-Ga.length});Z=(W=W.filter(function(wa,Ga){for(Ga+=1;Ga<W.length;Ga++)if(0<=W[Ga].indexOf(wa))return!1;return!0})).join(" | ");Z!==this._attribHTML&&(this._attribHTML=
Z,W.length?(this._innerContainer.innerHTML=Z,this._container.classList.remove("mapboxgl-attrib-empty")):this._container.classList.add("mapboxgl-attrib-empty"),this._editLink=null)}};Ng.prototype._updateCompact=function(){640>=this._map.getCanvasContainer().offsetWidth?this._container.classList.add("mapboxgl-compact"):this._container.classList.remove("mapboxgl-compact")};var qg=function(){a.bindAll(["_updateLogo"],this);a.bindAll(["_updateCompact"],this)};qg.prototype.onAdd=function(W){this._map=W;
this._container=$a.create("div","mapboxgl-ctrl");W=$a.create("a","mapboxgl-ctrl-logo");return W.target="_blank",W.rel="noopener nofollow",W.href="https://www.mapbox.com/",W.setAttribute("aria-label",this._map._getUIString("LogoControl.Title")),W.setAttribute("rel","noopener nofollow"),this._container.appendChild(W),this._container.style.display="none",this._map.on("sourcedata",this._updateLogo),this._updateLogo(),this._map.on("resize",this._updateCompact),this._updateCompact(),this._container};qg.prototype.onRemove=
function(){$a.remove(this._container);this._map.off("sourcedata",this._updateLogo);this._map.off("resize",this._updateCompact)};qg.prototype.getDefaultPosition=function(){return"bottom-left"};qg.prototype._updateLogo=function(W){W&&"metadata"!==W.sourceDataType||(this._container.style.display=this._logoRequired()?"block":"none")};qg.prototype._logoRequired=function(){if(this._map.style){var W=this._map.style.sourceCaches,aa;for(aa in W)if(W[aa].getSource().mapbox_logo)return!0;return!1}};qg.prototype._updateCompact=
function(){var W=this._container.children;W.length&&(W=W[0],250>this._map.getCanvasContainer().offsetWidth?W.classList.add("mapboxgl-compact"):W.classList.remove("mapboxgl-compact"))};var Vh=function(){this._queue=[];this._id=0;this._currentlyRunning=this._cleared=!1};Vh.prototype.add=function(W){var aa=++this._id;return this._queue.push({callback:W,id:aa,cancelled:!1}),aa};Vh.prototype.remove=function(W){var aa=this._currentlyRunning,Z=0;for(aa=aa?this._queue.concat(aa):this._queue;Z<aa.length;Z+=
1){var ea=aa[Z];if(ea.id===W)return void(ea.cancelled=!0)}};Vh.prototype.run=function(W){void 0===W&&(W=0);var aa=this._currentlyRunning=this._queue;this._queue=[];for(var Z=0;Z<aa.length;Z+=1){var ea=aa[Z];if(!ea.cancelled&&(ea.callback(W),this._cleared))break}this._currentlyRunning=this._cleared=!1};Vh.prototype.clear=function(){this._currentlyRunning&&(this._cleared=!0);this._queue=[]};var Bi={"FullscreenControl.Enter":"Enter fullscreen","FullscreenControl.Exit":"Exit fullscreen","GeolocateControl.FindMyLocation":"Find my location",
"GeolocateControl.LocationNotAvailable":"Location not available","LogoControl.Title":"Mapbox logo","NavigationControl.ResetBearing":"Reset bearing to north","NavigationControl.ZoomIn":"Zoom in","NavigationControl.ZoomOut":"Zoom out","ScaleControl.Feet":"ft","ScaleControl.Meters":"m","ScaleControl.Kilometers":"km","ScaleControl.Miles":"mi","ScaleControl.NauticalMiles":"nm"},Ci=a.window.HTMLImageElement,zh=a.window.HTMLElement,Og=a.window.ImageBitmap,uk={center:[0,0],zoom:0,bearing:0,pitch:0,minZoom:-2,
maxZoom:22,minPitch:0,maxPitch:60,interactive:!0,scrollZoom:!0,boxZoom:!0,dragRotate:!0,dragPan:!0,keyboard:!0,doubleClickZoom:!0,touchZoomRotate:!0,touchPitch:!0,bearingSnap:7,clickTolerance:3,pitchWithRotate:!0,hash:!1,attributionControl:!0,failIfMajorPerformanceCaveat:!1,preserveDrawingBuffer:!1,trackResize:!0,renderWorldCopies:!0,refreshExpiredTiles:!0,maxTileCacheSize:null,localIdeographFontFamily:"sans-serif",transformRequest:null,accessToken:null,fadeDuration:300,crossSourceCollisions:!0},
fk=function(W){function aa(ea){var wa=this;if(null!=(ea=a.extend({},uk,ea)).minZoom&&null!=ea.maxZoom&&ea.minZoom>ea.maxZoom)throw Error("maxZoom must be greater than or equal to minZoom");if(null!=ea.minPitch&&null!=ea.maxPitch&&ea.minPitch>ea.maxPitch)throw Error("maxPitch must be greater than or equal to minPitch");if(null!=ea.minPitch&&0>ea.minPitch)throw Error("minPitch must be greater than or equal to 0");if(null!=ea.maxPitch&&60<ea.maxPitch)throw Error("maxPitch must be less than or equal to 60");
var Ga=new Se(ea.minZoom,ea.maxZoom,ea.minPitch,ea.maxPitch,ea.renderWorldCopies);if(W.call(this,Ga,ea),this._interactive=ea.interactive,this._maxTileCacheSize=ea.maxTileCacheSize,this._failIfMajorPerformanceCaveat=ea.failIfMajorPerformanceCaveat,this._preserveDrawingBuffer=ea.preserveDrawingBuffer,this._antialias=ea.antialias,this._trackResize=ea.trackResize,this._bearingSnap=ea.bearingSnap,this._refreshExpiredTiles=ea.refreshExpiredTiles,this._fadeDuration=ea.fadeDuration,this._crossSourceCollisions=
ea.crossSourceCollisions,this._crossFadingFactor=1,this._collectResourceTiming=ea.collectResourceTiming,this._renderTaskQueue=new Vh,this._controls=[],this._mapId=a.uniqueId(),this._locale=a.extend({},Bi,ea.locale),this._requestManager=new a.RequestManager(ea.transformRequest,ea.accessToken),"string"==typeof ea.container){if(this._container=a.window.document.getElementById(ea.container),!this._container)throw Error("Container '"+ea.container+"' not found.");}else{if(!(ea.container instanceof zh))throw Error("Invalid type: 'container' must be a String or HTMLElement.");
this._container=ea.container}if(ea.maxBounds&&this.setMaxBounds(ea.maxBounds),a.bindAll(["_onWindowOnline","_onWindowResize","_contextLost","_contextRestored"],this),this._setupContainer(),this._setupPainter(),void 0===this.painter)throw Error("Failed to initialize WebGL.");this.on("move",function(){return wa._update(!1)});this.on("moveend",function(){return wa._update(!1)});this.on("zoom",function(){return wa._update(!0)});void 0!==a.window&&(a.window.addEventListener("online",this._onWindowOnline,
!1),a.window.addEventListener("resize",this._onWindowResize,!1));this.handlers=new Ud(this,ea);(this._hash=ea.hash&&(new jh("string"==typeof ea.hash&&ea.hash||void 0)).addTo(this))&&this._hash._onHashChange()||(this.jumpTo({center:ea.center,zoom:ea.zoom,bearing:ea.bearing,pitch:ea.pitch}),ea.bounds&&(this.resize(),this.fitBounds(ea.bounds,a.extend({},ea.fitBoundsOptions,{duration:0}))));this.resize();this._localIdeographFontFamily=ea.localIdeographFontFamily;ea.style&&this.setStyle(ea.style,{localIdeographFontFamily:ea.localIdeographFontFamily});
ea.attributionControl&&this.addControl(new Ng({customAttribution:ea.customAttribution}));this.addControl(new qg,ea.logoPosition);this.on("style.load",function(){wa.transform.unmodified&&wa.jumpTo(wa.style.stylesheet)});this.on("data",function(Sa){wa._update("style"===Sa.dataType);wa.fire(new a.Event(Sa.dataType+"data",Sa))});this.on("dataloading",function(Sa){wa.fire(new a.Event(Sa.dataType+"dataloading",Sa))})}W&&(aa.__proto__=W);(aa.prototype=Object.create(W&&W.prototype)).constructor=aa;var Z=
{showTileBoundaries:{configurable:!0},showPadding:{configurable:!0},showCollisionBoxes:{configurable:!0},showOverdrawInspector:{configurable:!0},repaint:{configurable:!0},vertices:{configurable:!0},version:{configurable:!0}};return aa.prototype._getMapId=function(){return this._mapId},aa.prototype.addControl=function(ea,wa){if(void 0===wa&&ea.getDefaultPosition&&(wa=ea.getDefaultPosition()),void 0===wa&&(wa="top-right"),!ea||!ea.onAdd)return this.fire(new a.ErrorEvent(Error("Invalid argument to map.addControl(). Argument must be a control with onAdd and onRemove methods.")));
var Ga=ea.onAdd(this);this._controls.push(ea);ea=this._controlPositions[wa];return-1!==wa.indexOf("bottom")?ea.insertBefore(Ga,ea.firstChild):ea.appendChild(Ga),this},aa.prototype.removeControl=function(ea){if(!ea||!ea.onRemove)return this.fire(new a.ErrorEvent(Error("Invalid argument to map.removeControl(). Argument must be a control with onAdd and onRemove methods.")));var wa=this._controls.indexOf(ea);return-1<wa&&this._controls.splice(wa,1),ea.onRemove(this),this},aa.prototype.resize=function(ea){var wa=
this._containerDimensions(),Ga=wa[0];wa=wa[1];this._resizeCanvas(Ga,wa);this.transform.resize(Ga,wa);this.painter.resize(Ga,wa);Ga=!this._moving;return Ga&&(this.stop(),this.fire(new a.Event("movestart",ea)).fire(new a.Event("move",ea))),this.fire(new a.Event("resize",ea)),Ga&&this.fire(new a.Event("moveend",ea)),this},aa.prototype.getBounds=function(){return this.transform.getBounds()},aa.prototype.getMaxBounds=function(){return this.transform.getMaxBounds()},aa.prototype.setMaxBounds=function(ea){return this.transform.setMaxBounds(a.LngLatBounds.convert(ea)),
this._update()},aa.prototype.setMinZoom=function(ea){if(-2<=(ea=null==ea?-2:ea)&&ea<=this.transform.maxZoom)return this.transform.minZoom=ea,this._update(),this.getZoom()<ea&&this.setZoom(ea),this;throw Error("minZoom must be between -2 and the current maxZoom, inclusive");},aa.prototype.getMinZoom=function(){return this.transform.minZoom},aa.prototype.setMaxZoom=function(ea){if((ea=null==ea?22:ea)>=this.transform.minZoom)return this.transform.maxZoom=ea,this._update(),this.getZoom()>ea&&this.setZoom(ea),
this;throw Error("maxZoom must be greater than the current minZoom");},aa.prototype.getMaxZoom=function(){return this.transform.maxZoom},aa.prototype.setMinPitch=function(ea){if(0>(ea=null==ea?0:ea))throw Error("minPitch must be greater than or equal to 0");if(0<=ea&&ea<=this.transform.maxPitch)return this.transform.minPitch=ea,this._update(),this.getPitch()<ea&&this.setPitch(ea),this;throw Error("minPitch must be between 0 and the current maxPitch, inclusive");},aa.prototype.getMinPitch=function(){return this.transform.minPitch},
aa.prototype.setMaxPitch=function(ea){if(60<(ea=null==ea?60:ea))throw Error("maxPitch must be less than or equal to 60");if(ea>=this.transform.minPitch)return this.transform.maxPitch=ea,this._update(),this.getPitch()>ea&&this.setPitch(ea),this;throw Error("maxPitch must be greater than the current minPitch");},aa.prototype.getMaxPitch=function(){return this.transform.maxPitch},aa.prototype.getRenderWorldCopies=function(){return this.transform.renderWorldCopies},aa.prototype.setRenderWorldCopies=function(ea){return this.transform.renderWorldCopies=
ea,this._update()},aa.prototype.project=function(ea){return this.transform.locationPoint(a.LngLat.convert(ea))},aa.prototype.unproject=function(ea){return this.transform.pointLocation(a.Point.convert(ea))},aa.prototype.isMoving=function(){return this._moving||this.handlers.isMoving()},aa.prototype.isZooming=function(){return this._zooming||this.handlers.isZooming()},aa.prototype.isRotating=function(){return this._rotating||this.handlers.isRotating()},aa.prototype._createDelegatedListener=function(ea,
wa,Ga){var Sa,ab=this;if("mouseenter"===ea||"mouseover"===ea){var yb=!1;return{layer:wa,listener:Ga,delegates:{mousemove:function(Ib){var nc=ab.getLayer(wa)?ab.queryRenderedFeatures(Ib.point,{layers:[wa]}):[];nc.length?yb||(yb=!0,Ga.call(ab,new Lf(ea,ab,Ib.originalEvent,{features:nc}))):yb=!1},mouseout:function(){yb=!1}}}}if("mouseleave"===ea||"mouseout"===ea){var Hb=!1;return{layer:wa,listener:Ga,delegates:{mousemove:function(Ib){(ab.getLayer(wa)?ab.queryRenderedFeatures(Ib.point,{layers:[wa]}):
[]).length?Hb=!0:Hb&&(Hb=!1,Ga.call(ab,new Lf(ea,ab,Ib.originalEvent)))},mouseout:function(Ib){Hb&&(Hb=!1,Ga.call(ab,new Lf(ea,ab,Ib.originalEvent)))}}}}return{layer:wa,listener:Ga,delegates:(Sa={},Sa[ea]=function(Ib){var nc=ab.getLayer(wa)?ab.queryRenderedFeatures(Ib.point,{layers:[wa]}):[];nc.length&&(Ib.features=nc,Ga.call(ab,Ib),delete Ib.features)},Sa)}},aa.prototype.on=function(ea,wa,Ga){if(void 0===Ga)return W.prototype.on.call(this,ea,wa);wa=this._createDelegatedListener(ea,wa,Ga);for(var Sa in this._delegatedListeners=
this._delegatedListeners||{},this._delegatedListeners[ea]=this._delegatedListeners[ea]||[],this._delegatedListeners[ea].push(wa),wa.delegates)this.on(Sa,wa.delegates[Sa]);return this},aa.prototype.once=function(ea,wa,Ga){if(void 0===Ga)return W.prototype.once.call(this,ea,wa);ea=this._createDelegatedListener(ea,wa,Ga);for(var Sa in ea.delegates)this.once(Sa,ea.delegates[Sa]);return this},aa.prototype.off=function(ea,wa,Ga){if(void 0===Ga)wa=W.prototype.off.call(this,ea,wa);else{if(this._delegatedListeners&&
this._delegatedListeners[ea])a:{ea=this._delegatedListeners[ea];for(var Sa=0;Sa<ea.length;Sa++){var ab=ea[Sa];if(ab.layer===wa&&ab.listener===Ga){for(var yb in ab.delegates)this.off(yb,ab.delegates[yb]);ea.splice(Sa,1);break a}}}wa=this}return wa},aa.prototype.queryRenderedFeatures=function(ea,wa){if(!this.style)return[];if(void 0!==wa||void 0===ea||ea instanceof a.Point||Array.isArray(ea)||(wa=ea,ea=void 0),wa=wa||{},(ea=ea||[[0,0],[this.transform.width,this.transform.height]])instanceof a.Point||
"number"==typeof ea[0])var Ga=[a.Point.convert(ea)];else Ga=a.Point.convert(ea[0]),ea=a.Point.convert(ea[1]),Ga=[Ga,new a.Point(ea.x,Ga.y),ea,new a.Point(Ga.x,ea.y),Ga];return this.style.queryRenderedFeatures(Ga,wa,this.transform)},aa.prototype.querySourceFeatures=function(ea,wa){return this.style.querySourceFeatures(ea,wa)},aa.prototype.setStyle=function(ea,wa){return!1!==(wa=a.extend({},{localIdeographFontFamily:this._localIdeographFontFamily},wa)).diff&&wa.localIdeographFontFamily===this._localIdeographFontFamily&&
this.style&&ea?(this._diffStyle(ea,wa),this):(this._localIdeographFontFamily=wa.localIdeographFontFamily,this._updateStyle(ea,wa))},aa.prototype._getUIString=function(ea){var wa=this._locale[ea];if(null==wa)throw Error("Missing UI string '"+ea+"'");return wa},aa.prototype._updateStyle=function(ea,wa){return this.style&&(this.style.setEventedParent(null),this.style._remove()),ea?(this.style=new qd(this,wa||{}),this.style.setEventedParent(this,{style:this.style}),"string"==typeof ea?this.style.loadURL(ea):
this.style.loadJSON(ea),this):(delete this.style,this)},aa.prototype._lazyInitEmptyStyle=function(){this.style||(this.style=new qd(this,{}),this.style.setEventedParent(this,{style:this.style}),this.style.loadEmpty())},aa.prototype._diffStyle=function(ea,wa){var Ga=this;"string"==typeof ea?(ea=this._requestManager.normalizeStyleURL(ea),ea=this._requestManager.transformRequest(ea,a.ResourceType.Style),a.getJSON(ea,function(Sa,ab){Sa?Ga.fire(new a.ErrorEvent(Sa)):ab&&Ga._updateDiff(ab,wa)})):"object"==
typeof ea&&this._updateDiff(ea,wa)},aa.prototype._updateDiff=function(ea,wa){try{this.style.setState(ea)&&this._update(!0)}catch(Ga){a.warnOnce("Unable to perform style diff: "+(Ga.message||Ga.error||Ga)+".  Rebuilding the style from scratch."),this._updateStyle(ea,wa)}},aa.prototype.getStyle=function(){if(this.style)return this.style.serialize()},aa.prototype.isStyleLoaded=function(){return this.style?this.style.loaded():a.warnOnce("There is no style added to the map.")},aa.prototype.addSource=function(ea,
wa){return this._lazyInitEmptyStyle(),this.style.addSource(ea,wa),this._update(!0)},aa.prototype.isSourceLoaded=function(ea){var wa=this.style&&this.style.sourceCaches[ea];if(void 0!==wa)return wa.loaded();this.fire(new a.ErrorEvent(Error("There is no source with ID '"+ea+"'")))},aa.prototype.areTilesLoaded=function(){var ea=this.style&&this.style.sourceCaches,wa;for(wa in ea){var Ga=ea[wa]._tiles,Sa;for(Sa in Ga){var ab=Ga[Sa];if("loaded"!==ab.state&&"errored"!==ab.state)return!1}}return!0},aa.prototype.addSourceType=
function(ea,wa,Ga){return this._lazyInitEmptyStyle(),this.style.addSourceType(ea,wa,Ga)},aa.prototype.removeSource=function(ea){return this.style.removeSource(ea),this._update(!0)},aa.prototype.getSource=function(ea){return this.style.getSource(ea)},aa.prototype.addImage=function(ea,wa,Ga){void 0===Ga&&(Ga={});var Sa=Ga.pixelRatio;void 0===Sa&&(Sa=1);var ab=Ga.sdf;void 0===ab&&(ab=!1);var yb=Ga.stretchX,Hb=Ga.stretchY;Ga=Ga.content;if(this._lazyInitEmptyStyle(),wa instanceof Ci||Og&&wa instanceof
Og)wa=a.browser.getImageData(wa),this.style.addImage(ea,{data:new a.RGBAImage({width:wa.width,height:wa.height},wa.data),pixelRatio:Sa,stretchX:yb,stretchY:Hb,content:Ga,sdf:ab,version:0});else{if(void 0===wa.width||void 0===wa.height)return this.fire(new a.ErrorEvent(Error("Invalid arguments to map.addImage(). The second argument must be an `HTMLImageElement`, `ImageData`, `ImageBitmap`, or object with `width`, `height`, and `data` properties with the same format as `ImageData`")));this.style.addImage(ea,
{data:new a.RGBAImage({width:wa.width,height:wa.height},new Uint8Array(wa.data)),pixelRatio:Sa,stretchX:yb,stretchY:Hb,content:Ga,sdf:ab,version:0,userImage:wa});wa.onAdd&&wa.onAdd(this,ea)}},aa.prototype.updateImage=function(ea,wa){var Ga=this.style.getImage(ea);if(!Ga)return this.fire(new a.ErrorEvent(Error("The map has no image with that id. If you are adding a new image use `map.addImage(...)` instead.")));var Sa=wa instanceof Ci||Og&&wa instanceof Og?a.browser.getImageData(wa):wa,ab=Sa.width,
yb=Sa.height;Sa=Sa.data;return void 0===ab||void 0===yb?this.fire(new a.ErrorEvent(Error("Invalid arguments to map.updateImage(). The second argument must be an `HTMLImageElement`, `ImageData`, `ImageBitmap`, or object with `width`, `height`, and `data` properties with the same format as `ImageData`"))):ab!==Ga.data.width||yb!==Ga.data.height?this.fire(new a.ErrorEvent(Error("The width and height of the updated image must be that same as the previous version of the image"))):(Ga.data.replace(Sa,!(wa instanceof
Ci||Og&&wa instanceof Og)),void this.style.updateImage(ea,Ga))},aa.prototype.hasImage=function(ea){return ea?!!this.style.getImage(ea):(this.fire(new a.ErrorEvent(Error("Missing required image id"))),!1)},aa.prototype.removeImage=function(ea){this.style.removeImage(ea)},aa.prototype.loadImage=function(ea,wa){a.getImage(this._requestManager.transformRequest(ea,a.ResourceType.Image),wa)},aa.prototype.listImages=function(){return this.style.listImages()},aa.prototype.addLayer=function(ea,wa){return this._lazyInitEmptyStyle(),
this.style.addLayer(ea,wa),this._update(!0)},aa.prototype.moveLayer=function(ea,wa){return this.style.moveLayer(ea,wa),this._update(!0)},aa.prototype.removeLayer=function(ea){return this.style.removeLayer(ea),this._update(!0)},aa.prototype.getLayer=function(ea){return this.style.getLayer(ea)},aa.prototype.setLayerZoomRange=function(ea,wa,Ga){return this.style.setLayerZoomRange(ea,wa,Ga),this._update(!0)},aa.prototype.setFilter=function(ea,wa,Ga){return void 0===Ga&&(Ga={}),this.style.setFilter(ea,
wa,Ga),this._update(!0)},aa.prototype.getFilter=function(ea){return this.style.getFilter(ea)},aa.prototype.setPaintProperty=function(ea,wa,Ga,Sa){return void 0===Sa&&(Sa={}),this.style.setPaintProperty(ea,wa,Ga,Sa),this._update(!0)},aa.prototype.getPaintProperty=function(ea,wa){return this.style.getPaintProperty(ea,wa)},aa.prototype.setLayoutProperty=function(ea,wa,Ga,Sa){return void 0===Sa&&(Sa={}),this.style.setLayoutProperty(ea,wa,Ga,Sa),this._update(!0)},aa.prototype.getLayoutProperty=function(ea,
wa){return this.style.getLayoutProperty(ea,wa)},aa.prototype.setLight=function(ea,wa){return void 0===wa&&(wa={}),this._lazyInitEmptyStyle(),this.style.setLight(ea,wa),this._update(!0)},aa.prototype.getLight=function(){return this.style.getLight()},aa.prototype.setFeatureState=function(ea,wa){return this.style.setFeatureState(ea,wa),this._update()},aa.prototype.removeFeatureState=function(ea,wa){return this.style.removeFeatureState(ea,wa),this._update()},aa.prototype.getFeatureState=function(ea){return this.style.getFeatureState(ea)},
aa.prototype.getContainer=function(){return this._container},aa.prototype.getCanvasContainer=function(){return this._canvasContainer},aa.prototype.getCanvas=function(){return this._canvas},aa.prototype._containerDimensions=function(){var ea=0,wa=0;return this._container&&(ea=this._container.clientWidth||400,wa=this._container.clientHeight||300),[ea,wa]},aa.prototype._detectMissingCSS=function(){"rgb(250, 128, 114)"!==a.window.getComputedStyle(this._missingCSSCanary).getPropertyValue("background-color")&&
a.warnOnce("This page appears to be missing CSS declarations for Mapbox GL JS, which may cause the map to display incorrectly. Please ensure your page includes mapbox-gl.css, as described in https://www.mapbox.com/mapbox-gl-js/api/.")},aa.prototype._setupContainer=function(){var ea=this._container;ea.classList.add("mapboxgl-map");(this._missingCSSCanary=$a.create("div","mapboxgl-canary",ea)).style.visibility="hidden";this._detectMissingCSS();var wa=this._canvasContainer=$a.create("div","mapboxgl-canvas-container",
ea);this._interactive&&wa.classList.add("mapboxgl-interactive");this._canvas=$a.create("canvas","mapboxgl-canvas",wa);this._canvas.addEventListener("webglcontextlost",this._contextLost,!1);this._canvas.addEventListener("webglcontextrestored",this._contextRestored,!1);this._canvas.setAttribute("tabindex","0");this._canvas.setAttribute("aria-label","Map");wa=this._containerDimensions();this._resizeCanvas(wa[0],wa[1]);var Ga=this._controlContainer=$a.create("div","mapboxgl-control-container",ea),Sa=
this._controlPositions={};["top-left","top-right","bottom-left","bottom-right"].forEach(function(ab){Sa[ab]=$a.create("div","mapboxgl-ctrl-"+ab,Ga)})},aa.prototype._resizeCanvas=function(ea,wa){var Ga=a.browser.devicePixelRatio||1;this._canvas.width=Ga*ea;this._canvas.height=Ga*wa;this._canvas.style.width=ea+"px";this._canvas.style.height=wa+"px"},aa.prototype._setupPainter=function(){var ea=a.extend({},cb.webGLContextAttributes,{failIfMajorPerformanceCaveat:this._failIfMajorPerformanceCaveat,preserveDrawingBuffer:this._preserveDrawingBuffer,
antialias:this._antialias||!1});(ea=this._canvas.getContext("webgl",ea)||this._canvas.getContext("experimental-webgl",ea))?(this.painter=new $e(ea,this.transform),a.webpSupported.testSupport(ea)):this.fire(new a.ErrorEvent(Error("Failed to initialize WebGL")))},aa.prototype._contextLost=function(ea){ea.preventDefault();this._frame&&(this._frame.cancel(),this._frame=null);this.fire(new a.Event("webglcontextlost",{originalEvent:ea}))},aa.prototype._contextRestored=function(ea){this._setupPainter();
this.resize();this._update();this.fire(new a.Event("webglcontextrestored",{originalEvent:ea}))},aa.prototype.loaded=function(){return!this._styleDirty&&!this._sourcesDirty&&!!this.style&&this.style.loaded()},aa.prototype._update=function(ea){return this.style?(this._styleDirty=this._styleDirty||ea,this._sourcesDirty=!0,this.triggerRepaint(),this):this},aa.prototype._requestRenderFrame=function(ea){return this._update(),this._renderTaskQueue.add(ea)},aa.prototype._cancelRenderFrame=function(ea){this._renderTaskQueue.remove(ea)},
aa.prototype._render=function(ea){var wa,Ga=this,Sa=0,ab=this.painter.context.extTimerQuery;if(this.listens("gpu-timing-frame")&&(wa=ab.createQueryEXT(),ab.beginQueryEXT(ab.TIME_ELAPSED_EXT,wa),Sa=a.browser.now()),this.painter.context.setDirty(),this.painter.setBaseState(),this._renderTaskQueue.run(ea),!this._removed){ea=!1;if(this.style&&this._styleDirty){this._styleDirty=!1;var yb=this.transform.zoom,Hb=a.browser.now();this.style.zoomHistory.update(yb,Hb);yb=new a.EvaluationParameters(yb,{now:Hb,
fadeDuration:this._fadeDuration,zoomHistory:this.style.zoomHistory,transition:this.style.getTransition()});Hb=yb.crossFadingFactor();1===Hb&&Hb===this._crossFadingFactor||(ea=!0,this._crossFadingFactor=Hb);this.style.update(yb)}if(this.style&&this._sourcesDirty&&(this._sourcesDirty=!1,this.style._updateSources(this.transform)),this._placementDirty=this.style&&this.style._updatePlacement(this.painter.transform,this.showCollisionBoxes,this._fadeDuration,this._crossSourceCollisions),this.painter.render(this.style,
{showTileBoundaries:this.showTileBoundaries,showOverdrawInspector:this._showOverdrawInspector,rotating:this.isRotating(),zooming:this.isZooming(),moving:this.isMoving(),fadeDuration:this._fadeDuration,showPadding:this.showPadding,gpuTiming:!!this.listens("gpu-timing-layer")}),this.fire(new a.Event("render")),this.loaded()&&!this._loaded&&(this._loaded=!0,this.fire(new a.Event("load"))),this.style&&(this.style.hasTransitions()||ea)&&(this._styleDirty=!0),this.style&&!this._placementDirty&&this.style._releaseSymbolFadeTiles(),
this.listens("gpu-timing-frame")){var Ib=a.browser.now()-Sa;ab.endQueryEXT(ab.TIME_ELAPSED_EXT,wa);setTimeout(function(){var mc=ab.getQueryObjectEXT(wa,ab.QUERY_RESULT_EXT)/1E6;ab.deleteQueryEXT(wa);Ga.fire(new a.Event("gpu-timing-frame",{cpuTime:Ib,gpuTime:mc}))},50)}if(this.listens("gpu-timing-layer")){var nc=this.painter.collectGpuTimers();setTimeout(function(){var mc=Ga.painter.queryGpuTimers(nc);Ga.fire(new a.Event("gpu-timing-layer",{layerTimes:mc}))},50)}return this._sourcesDirty||this._styleDirty||
this._placementDirty||this._repaint?this.triggerRepaint():!this.isMoving()&&this.loaded()&&(this._fullyLoaded||(this._fullyLoaded=!0),this.fire(new a.Event("idle"))),this}},aa.prototype.remove=function(){this._hash&&this._hash.remove();for(var ea=0,wa=this._controls;ea<wa.length;ea+=1)wa[ea].onRemove(this);this._controls=[];this._frame&&(this._frame.cancel(),this._frame=null);this._renderTaskQueue.clear();this.painter.destroy();this.handlers.destroy();delete this.handlers;this.setStyle(null);void 0!==
a.window&&(a.window.removeEventListener("resize",this._onWindowResize,!1),a.window.removeEventListener("online",this._onWindowOnline,!1));(ea=this.painter.context.gl.getExtension("WEBGL_lose_context"))&&ea.loseContext();Ma(this._canvasContainer);Ma(this._controlContainer);Ma(this._missingCSSCanary);this._container.classList.remove("mapboxgl-map");this._removed=!0;this.fire(new a.Event("remove"))},aa.prototype.triggerRepaint=function(){var ea=this;this.style&&!this._frame&&(this._frame=a.browser.frame(function(wa){ea._frame=
null;ea._render(wa)}))},aa.prototype._onWindowOnline=function(){this._update()},aa.prototype._onWindowResize=function(ea){this._trackResize&&this.resize({originalEvent:ea})._update()},Z.showTileBoundaries.get=function(){return!!this._showTileBoundaries},Z.showTileBoundaries.set=function(ea){this._showTileBoundaries!==ea&&(this._showTileBoundaries=ea,this._update())},Z.showPadding.get=function(){return!!this._showPadding},Z.showPadding.set=function(ea){this._showPadding!==ea&&(this._showPadding=ea,
this._update())},Z.showCollisionBoxes.get=function(){return!!this._showCollisionBoxes},Z.showCollisionBoxes.set=function(ea){this._showCollisionBoxes!==ea&&(this._showCollisionBoxes=ea,ea?this.style._generateCollisionBoxes():this._update())},Z.showOverdrawInspector.get=function(){return!!this._showOverdrawInspector},Z.showOverdrawInspector.set=function(ea){this._showOverdrawInspector!==ea&&(this._showOverdrawInspector=ea,this._update())},Z.repaint.get=function(){return!!this._repaint},Z.repaint.set=
function(ea){this._repaint!==ea&&(this._repaint=ea,this.triggerRepaint())},Z.vertices.get=function(){return!!this._vertices},Z.vertices.set=function(ea){this._vertices=ea;this._update()},aa.prototype._setCacheLimits=function(ea,wa){a.setCacheLimits(ea,wa)},Z.version.get=function(){return a.version},Object.defineProperties(aa.prototype,Z),aa}(tk),Wh={showCompass:!0,showZoom:!0,visualizePitch:!1},Cg=function(W){var aa=this;this.options=a.extend({},Wh,W);this._container=$a.create("div","mapboxgl-ctrl mapboxgl-ctrl-group");
this._container.addEventListener("contextmenu",function(Z){return Z.preventDefault()});this.options.showZoom&&(a.bindAll(["_setButtonTitle","_updateZoomButtons"],this),this._zoomInButton=this._createButton("mapboxgl-ctrl-zoom-in",function(Z){return aa._map.zoomIn({},{originalEvent:Z})}),$a.create("span","mapboxgl-ctrl-icon",this._zoomInButton).setAttribute("aria-hidden",!0),this._zoomOutButton=this._createButton("mapboxgl-ctrl-zoom-out",function(Z){return aa._map.zoomOut({},{originalEvent:Z})}),$a.create("span",
"mapboxgl-ctrl-icon",this._zoomOutButton).setAttribute("aria-hidden",!0));this.options.showCompass&&(a.bindAll(["_rotateCompassArrow"],this),this._compass=this._createButton("mapboxgl-ctrl-compass",function(Z){aa.options.visualizePitch?aa._map.resetNorthPitch({},{originalEvent:Z}):aa._map.resetNorth({},{originalEvent:Z})}),this._compassIcon=$a.create("span","mapboxgl-ctrl-icon",this._compass),this._compassIcon.setAttribute("aria-hidden",!0))};Cg.prototype._updateZoomButtons=function(){var W=this._map.getZoom();
this._zoomInButton.disabled=W===this._map.getMaxZoom();this._zoomOutButton.disabled=W===this._map.getMinZoom()};Cg.prototype._rotateCompassArrow=function(){this._compassIcon.style.transform=this.options.visualizePitch?"scale("+1/Math.pow(Math.cos(Math.PI/180*this._map.transform.pitch),.5)+") rotateX("+this._map.transform.pitch+"deg) rotateZ("+180/Math.PI*this._map.transform.angle+"deg)":"rotate("+180/Math.PI*this._map.transform.angle+"deg)"};Cg.prototype.onAdd=function(W){return this._map=W,this.options.showZoom&&
(this._setButtonTitle(this._zoomInButton,"ZoomIn"),this._setButtonTitle(this._zoomOutButton,"ZoomOut"),this._map.on("zoom",this._updateZoomButtons),this._updateZoomButtons()),this.options.showCompass&&(this._setButtonTitle(this._compass,"ResetBearing"),this.options.visualizePitch&&this._map.on("pitch",this._rotateCompassArrow),this._map.on("rotate",this._rotateCompassArrow),this._rotateCompassArrow(),this._handler=new Ve(this._map,this._compass,this.options.visualizePitch)),this._container};Cg.prototype.onRemove=
function(){$a.remove(this._container);this.options.showZoom&&this._map.off("zoom",this._updateZoomButtons);this.options.showCompass&&(this.options.visualizePitch&&this._map.off("pitch",this._rotateCompassArrow),this._map.off("rotate",this._rotateCompassArrow),this._handler.off(),delete this._handler);delete this._map};Cg.prototype._createButton=function(W,aa){W=$a.create("button",W,this._container);return W.type="button",W.addEventListener("click",aa),W};Cg.prototype._setButtonTitle=function(W,aa){aa=
this._map._getUIString("NavigationControl."+aa);W.title=aa;W.setAttribute("aria-label",aa)};var Ve=function(W,aa,Z){void 0===Z&&(Z=!1);this._clickTolerance=10;this.element=aa;this.mouseRotate=new Nj({clickTolerance:W.dragRotate._mouseRotate._clickTolerance});this.map=W;Z&&(this.mousePitch=new mj({clickTolerance:W.dragRotate._mousePitch._clickTolerance}));a.bindAll("mousedown mousemove mouseup touchstart touchmove touchend reset".split(" "),this);$a.addEventListener(aa,"mousedown",this.mousedown);
$a.addEventListener(aa,"touchstart",this.touchstart,{passive:!1});$a.addEventListener(aa,"touchmove",this.touchmove);$a.addEventListener(aa,"touchend",this.touchend);$a.addEventListener(aa,"touchcancel",this.reset)};Ve.prototype.down=function(W,aa){this.mouseRotate.mousedown(W,aa);this.mousePitch&&this.mousePitch.mousedown(W,aa);$a.disableDrag()};Ve.prototype.move=function(W,aa){var Z=this.map,ea=this.mouseRotate.mousemoveWindow(W,aa);(ea&&ea.bearingDelta&&Z.setBearing(Z.getBearing()+ea.bearingDelta),
this.mousePitch)&&(W=this.mousePitch.mousemoveWindow(W,aa))&&W.pitchDelta&&Z.setPitch(Z.getPitch()+W.pitchDelta)};Ve.prototype.off=function(){var W=this.element;$a.removeEventListener(W,"mousedown",this.mousedown);$a.removeEventListener(W,"touchstart",this.touchstart,{passive:!1});$a.removeEventListener(W,"touchmove",this.touchmove);$a.removeEventListener(W,"touchend",this.touchend);$a.removeEventListener(W,"touchcancel",this.reset);this.offTemp()};Ve.prototype.offTemp=function(){$a.enableDrag();
$a.removeEventListener(a.window,"mousemove",this.mousemove);$a.removeEventListener(a.window,"mouseup",this.mouseup)};Ve.prototype.mousedown=function(W){this.down(a.extend({},W,{ctrlKey:!0,preventDefault:function(){return W.preventDefault()}}),$a.mousePos(this.element,W));$a.addEventListener(a.window,"mousemove",this.mousemove);$a.addEventListener(a.window,"mouseup",this.mouseup)};Ve.prototype.mousemove=function(W){this.move(W,$a.mousePos(this.element,W))};Ve.prototype.mouseup=function(W){this.mouseRotate.mouseupWindow(W);
this.mousePitch&&this.mousePitch.mouseupWindow(W);this.offTemp()};Ve.prototype.touchstart=function(W){1!==W.targetTouches.length?this.reset():(this._startPos=this._lastPos=$a.touchPos(this.element,W.targetTouches)[0],this.down({type:"mousedown",button:0,ctrlKey:!0,preventDefault:function(){return W.preventDefault()}},this._startPos))};Ve.prototype.touchmove=function(W){1!==W.targetTouches.length?this.reset():(this._lastPos=$a.touchPos(this.element,W.targetTouches)[0],this.move({preventDefault:function(){return W.preventDefault()}},
this._lastPos))};Ve.prototype.touchend=function(W){0===W.targetTouches.length&&this._startPos&&this._lastPos&&this._startPos.dist(this._lastPos)<this._clickTolerance&&this.element.click();this.reset()};Ve.prototype.reset=function(){this.mouseRotate.reset();this.mousePitch&&this.mousePitch.reset();delete this._startPos;delete this._lastPos;this.offTemp()};var Dg={center:"translate(-50%,-50%)",top:"translate(-50%,0)","top-left":"translate(0,0)","top-right":"translate(-100%,0)",bottom:"translate(-50%,-100%)",
"bottom-left":"translate(0,-100%)","bottom-right":"translate(-100%,-100%)",left:"translate(0,-50%)",right:"translate(-100%,-50%)"},Xh,oj=function(W){function aa(Z,ea){var wa=this;if(W.call(this),(Z instanceof a.window.HTMLElement||ea)&&(Z=a.extend({element:Z},ea)),a.bindAll("_update _onMove _onUp _addDragHandler _onMapClick _onKeyPress".split(" "),this),this._anchor=Z&&Z.anchor||"center",this._color=Z&&Z.color||"#3FB1CE",this._draggable=Z&&Z.draggable||!1,this._state="inactive",this._rotation=Z&&
Z.rotation||0,this._rotationAlignment=Z&&Z.rotationAlignment||"auto",this._pitchAlignment=Z&&Z.pitchAlignment&&"auto"!==Z.pitchAlignment?Z.pitchAlignment:this._rotationAlignment,Z&&Z.element)this._element=Z.element,this._offset=a.Point.convert(Z&&Z.offset||[0,0]);else{this._defaultMarker=!0;this._element=$a.create("div");this._element.setAttribute("aria-label","Map marker");ea=$a.createNS("http://www.w3.org/2000/svg","svg");ea.setAttributeNS(null,"display","block");ea.setAttributeNS(null,"height",
"41px");ea.setAttributeNS(null,"width","27px");ea.setAttributeNS(null,"viewBox","0 0 27 41");var Ga=$a.createNS("http://www.w3.org/2000/svg","g");Ga.setAttributeNS(null,"stroke","none");Ga.setAttributeNS(null,"stroke-width","1");Ga.setAttributeNS(null,"fill","none");Ga.setAttributeNS(null,"fill-rule","evenodd");Ga=$a.createNS("http://www.w3.org/2000/svg","g");Ga.setAttributeNS(null,"fill-rule","nonzero");var Sa=$a.createNS("http://www.w3.org/2000/svg","g");Sa.setAttributeNS(null,"transform","translate(3.0, 29.0)");
Sa.setAttributeNS(null,"fill","#000000");for(var ab=0,yb=[{rx:"10.5",ry:"5.25002273"},{rx:"10.5",ry:"5.25002273"},{rx:"9.5",ry:"4.77275007"},{rx:"8.5",ry:"4.29549936"},{rx:"7.5",ry:"3.81822308"},{rx:"6.5",ry:"3.34094679"},{rx:"5.5",ry:"2.86367051"},{rx:"4.5",ry:"2.38636864"}];ab<yb.length;ab+=1){var Hb=yb[ab],Ib=$a.createNS("http://www.w3.org/2000/svg","ellipse");Ib.setAttributeNS(null,"opacity","0.04");Ib.setAttributeNS(null,"cx","10.5");Ib.setAttributeNS(null,"cy","5.80029008");Ib.setAttributeNS(null,
"rx",Hb.rx);Ib.setAttributeNS(null,"ry",Hb.ry);Sa.appendChild(Ib)}ab=$a.createNS("http://www.w3.org/2000/svg","g");ab.setAttributeNS(null,"fill",this._color);yb=$a.createNS("http://www.w3.org/2000/svg","path");yb.setAttributeNS(null,"d","M27,13.5 C27,19.074644 20.250001,27.000002 14.75,34.500002 C14.016665,35.500004 12.983335,35.500004 12.25,34.500002 C6.7499993,27.000002 0,19.222562 0,13.5 C0,6.0441559 6.0441559,0 13.5,0 C20.955844,0 27,6.0441559 27,13.5 Z");ab.appendChild(yb);yb=$a.createNS("http://www.w3.org/2000/svg",
"g");yb.setAttributeNS(null,"opacity","0.25");yb.setAttributeNS(null,"fill","#000000");Hb=$a.createNS("http://www.w3.org/2000/svg","path");Hb.setAttributeNS(null,"d","M13.5,0 C6.0441559,0 0,6.0441559 0,13.5 C0,19.222562 6.7499993,27 12.25,34.5 C13,35.522727 14.016664,35.500004 14.75,34.5 C20.250001,27 27,19.074644 27,13.5 C27,6.0441559 20.955844,0 13.5,0 Z M13.5,1 C20.415404,1 26,6.584596 26,13.5 C26,15.898657 24.495584,19.181431 22.220703,22.738281 C19.945823,26.295132 16.705119,30.142167 13.943359,33.908203 C13.743445,34.180814 13.612715,34.322738 13.5,34.441406 C13.387285,34.322738 13.256555,34.180814 13.056641,33.908203 C10.284481,30.127985 7.4148684,26.314159 5.015625,22.773438 C2.6163816,19.232715 1,15.953538 1,13.5 C1,6.584596 6.584596,1 13.5,1 Z");
yb.appendChild(Hb);Hb=$a.createNS("http://www.w3.org/2000/svg","g");Hb.setAttributeNS(null,"transform","translate(6.0, 7.0)");Hb.setAttributeNS(null,"fill","#FFFFFF");Ib=$a.createNS("http://www.w3.org/2000/svg","g");Ib.setAttributeNS(null,"transform","translate(8.0, 8.0)");var nc=$a.createNS("http://www.w3.org/2000/svg","circle");nc.setAttributeNS(null,"fill","#000000");nc.setAttributeNS(null,"opacity","0.25");nc.setAttributeNS(null,"cx","5.5");nc.setAttributeNS(null,"cy","5.5");nc.setAttributeNS(null,
"r","5.4999962");var mc=$a.createNS("http://www.w3.org/2000/svg","circle");mc.setAttributeNS(null,"fill","#FFFFFF");mc.setAttributeNS(null,"cx","5.5");mc.setAttributeNS(null,"cy","5.5");mc.setAttributeNS(null,"r","5.4999962");Ib.appendChild(nc);Ib.appendChild(mc);Ga.appendChild(Sa);Ga.appendChild(ab);Ga.appendChild(yb);Ga.appendChild(Hb);Ga.appendChild(Ib);ea.appendChild(Ga);this._element.appendChild(ea);this._offset=a.Point.convert(Z&&Z.offset||[0,-14])}this._element.classList.add("mapboxgl-marker");
this._element.addEventListener("dragstart",function(cc){cc.preventDefault()});this._element.addEventListener("mousedown",function(cc){cc.preventDefault()});this._element.addEventListener("focus",function(){var cc=wa._map.getContainer();cc.scrollTop=0;cc.scrollLeft=0});eb(this._element,this._anchor,"marker");this._popup=null}return W&&(aa.__proto__=W),(aa.prototype=Object.create(W&&W.prototype)).constructor=aa,aa.prototype.addTo=function(Z){return this.remove(),this._map=Z,Z.getCanvasContainer().appendChild(this._element),
Z.on("move",this._update),Z.on("moveend",this._update),this.setDraggable(this._draggable),this._update(),this._map.on("click",this._onMapClick),this},aa.prototype.remove=function(){return this._map&&(this._map.off("click",this._onMapClick),this._map.off("move",this._update),this._map.off("moveend",this._update),this._map.off("mousedown",this._addDragHandler),this._map.off("touchstart",this._addDragHandler),this._map.off("mouseup",this._onUp),this._map.off("touchend",this._onUp),this._map.off("mousemove",
this._onMove),this._map.off("touchmove",this._onMove),delete this._map),$a.remove(this._element),this._popup&&this._popup.remove(),this},aa.prototype.getLngLat=function(){return this._lngLat},aa.prototype.setLngLat=function(Z){return this._lngLat=a.LngLat.convert(Z),this._pos=null,this._popup&&this._popup.setLngLat(this._lngLat),this._update(),this},aa.prototype.getElement=function(){return this._element},aa.prototype.setPopup=function(Z){if(this._popup&&(this._popup.remove(),this._popup=null,this._element.removeEventListener("keypress",
this._onKeyPress),this._originalTabIndex||this._element.removeAttribute("tabindex")),Z){if(!("offset"in Z.options)){var ea=Math.sqrt(Math.pow(13.5,2)/2);Z.options.offset=this._defaultMarker?{top:[0,0],"top-left":[0,0],"top-right":[0,0],bottom:[0,-38.1],"bottom-left":[ea,-1*(24.6+ea)],"bottom-right":[-ea,-1*(24.6+ea)],left:[13.5,-24.6],right:[-13.5,-24.6]}:this._offset}this._popup=Z;this._lngLat&&this._popup.setLngLat(this._lngLat);(this._originalTabIndex=this._element.getAttribute("tabindex"))||this._element.setAttribute("tabindex",
"0");this._element.addEventListener("keypress",this._onKeyPress)}return this},aa.prototype._onKeyPress=function(Z){var ea=Z.code;Z=Z.charCode||Z.keyCode;"Space"!==ea&&"Enter"!==ea&&32!==Z&&13!==Z||this.togglePopup()},aa.prototype._onMapClick=function(Z){Z=Z.originalEvent.target;var ea=this._element;this._popup&&(Z===ea||ea.contains(Z))&&this.togglePopup()},aa.prototype.getPopup=function(){return this._popup},aa.prototype.togglePopup=function(){var Z=this._popup;return Z?(Z.isOpen()?Z.remove():Z.addTo(this._map),
this):this},aa.prototype._update=function(Z){if(this._map){this._map.transform.renderWorldCopies&&(this._lngLat=Ua(this._lngLat,this._pos,this._map.transform));this._pos=this._map.project(this._lngLat)._add(this._offset);var ea="";"viewport"===this._rotationAlignment||"auto"===this._rotationAlignment?ea="rotateZ("+this._rotation+"deg)":"map"===this._rotationAlignment&&(ea="rotateZ("+(this._rotation-this._map.getBearing())+"deg)");var wa="";"viewport"===this._pitchAlignment||"auto"===this._pitchAlignment?
wa="rotateX(0deg)":"map"===this._pitchAlignment&&(wa="rotateX("+this._map.getPitch()+"deg)");Z&&"moveend"!==Z.type||(this._pos=this._pos.round());$a.setTransform(this._element,Dg[this._anchor]+" translate("+this._pos.x+"px, "+this._pos.y+"px) "+wa+" "+ea)}},aa.prototype.getOffset=function(){return this._offset},aa.prototype.setOffset=function(Z){return this._offset=a.Point.convert(Z),this._update(),this},aa.prototype._onMove=function(Z){this._pos=Z.point.sub(this._positionDelta);this._lngLat=this._map.unproject(this._pos);
this.setLngLat(this._lngLat);this._element.style.pointerEvents="none";"pending"===this._state&&(this._state="active",this.fire(new a.Event("dragstart")));this.fire(new a.Event("drag"))},aa.prototype._onUp=function(){this._element.style.pointerEvents="auto";this._positionDelta=null;this._map.off("mousemove",this._onMove);this._map.off("touchmove",this._onMove);"active"===this._state&&this.fire(new a.Event("dragend"));this._state="inactive"},aa.prototype._addDragHandler=function(Z){this._element.contains(Z.originalEvent.target)&&
(Z.preventDefault(),this._positionDelta=Z.point.sub(this._pos).add(this._offset),this._state="pending",this._map.on("mousemove",this._onMove),this._map.on("touchmove",this._onMove),this._map.once("mouseup",this._onUp),this._map.once("touchend",this._onUp))},aa.prototype.setDraggable=function(Z){return this._draggable=!!Z,this._map&&(Z?(this._map.on("mousedown",this._addDragHandler),this._map.on("touchstart",this._addDragHandler)):(this._map.off("mousedown",this._addDragHandler),this._map.off("touchstart",
this._addDragHandler))),this},aa.prototype.isDraggable=function(){return this._draggable},aa.prototype.setRotation=function(Z){return this._rotation=Z||0,this._update(),this},aa.prototype.getRotation=function(){return this._rotation},aa.prototype.setRotationAlignment=function(Z){return this._rotationAlignment=Z||"auto",this._update(),this},aa.prototype.getRotationAlignment=function(){return this._rotationAlignment},aa.prototype.setPitchAlignment=function(Z){return this._pitchAlignment=Z&&"auto"!==
Z?Z:this._rotationAlignment,this._update(),this},aa.prototype.getPitchAlignment=function(){return this._pitchAlignment},aa}(a.Evented),Mf={positionOptions:{enableHighAccuracy:!1,maximumAge:0,timeout:6E3},fitBoundsOptions:{maxZoom:15},trackUserLocation:!1,showAccuracyCircle:!0,showUserLocation:!0},Yh=0,Wi=!1,kh=function(W){function aa(Z){W.call(this);this.options=a.extend({},Mf,Z);a.bindAll("_onSuccess _onError _onZoom _finish _setupUI _updateCamera _updateMarker".split(" "),this)}return W&&(aa.__proto__=
W),(aa.prototype=Object.create(W&&W.prototype)).constructor=aa,aa.prototype.onAdd=function(Z){var ea;return this._map=Z,this._container=$a.create("div","mapboxgl-ctrl mapboxgl-ctrl-group"),ea=this._setupUI,void 0!==Xh?ea(Xh):void 0!==a.window.navigator.permissions?a.window.navigator.permissions.query({name:"geolocation"}).then(function(wa){ea(Xh="denied"!==wa.state)}):ea(Xh=!!a.window.navigator.geolocation),this._container},aa.prototype.onRemove=function(){void 0!==this._geolocationWatchID&&(a.window.navigator.geolocation.clearWatch(this._geolocationWatchID),
this._geolocationWatchID=void 0);this.options.showUserLocation&&this._userLocationDotMarker&&this._userLocationDotMarker.remove();this.options.showAccuracyCircle&&this._accuracyCircleMarker&&this._accuracyCircleMarker.remove();$a.remove(this._container);this._map.off("zoom",this._onZoom);this._map=void 0;Yh=0;Wi=!1},aa.prototype._isOutOfMapMaxBounds=function(Z){var ea=this._map.getMaxBounds();Z=Z.coords;return ea&&(Z.longitude<ea.getWest()||Z.longitude>ea.getEast()||Z.latitude<ea.getSouth()||Z.latitude>
ea.getNorth())},aa.prototype._setErrorState=function(){switch(this._watchState){case "WAITING_ACTIVE":this._watchState="ACTIVE_ERROR";this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-active");this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-active-error");break;case "ACTIVE_LOCK":this._watchState="ACTIVE_ERROR";this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-active");this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-active-error");this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-waiting");
break;case "BACKGROUND":this._watchState="BACKGROUND_ERROR",this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-background"),this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-background-error"),this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-waiting")}},aa.prototype._onSuccess=function(Z){if(this._map){if(this._isOutOfMapMaxBounds(Z))return this._setErrorState(),this.fire(new a.Event("outofmaxbounds",Z)),this._updateMarker(),void this._finish();if(this.options.trackUserLocation)switch(this._lastKnownPosition=
Z,this._watchState){case "WAITING_ACTIVE":case "ACTIVE_LOCK":case "ACTIVE_ERROR":this._watchState="ACTIVE_LOCK";this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-waiting");this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-active-error");this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-active");break;case "BACKGROUND":case "BACKGROUND_ERROR":this._watchState="BACKGROUND",this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-waiting"),this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-background-error"),
this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-background")}this.options.showUserLocation&&"OFF"!==this._watchState&&this._updateMarker(Z);this.options.trackUserLocation&&"ACTIVE_LOCK"!==this._watchState||this._updateCamera(Z);this.options.showUserLocation&&this._dotElement.classList.remove("mapboxgl-user-location-dot-stale");this.fire(new a.Event("geolocate",Z));this._finish()}},aa.prototype._updateCamera=function(Z){var ea=new a.LngLat(Z.coords.longitude,Z.coords.latitude);Z=Z.coords.accuracy;
var wa=this._map.getBearing();wa=a.extend({bearing:wa},this.options.fitBoundsOptions);this._map.fitBounds(ea.toBounds(Z),wa,{geolocateSource:!0})},aa.prototype._updateMarker=function(Z){if(Z){var ea=new a.LngLat(Z.coords.longitude,Z.coords.latitude);this._accuracyCircleMarker.setLngLat(ea).addTo(this._map);this._userLocationDotMarker.setLngLat(ea).addTo(this._map);this._accuracy=Z.coords.accuracy;this.options.showUserLocation&&this.options.showAccuracyCircle&&this._updateCircleRadius()}else this._userLocationDotMarker.remove(),
this._accuracyCircleMarker.remove()},aa.prototype._updateCircleRadius=function(){var Z=this._map._container.clientHeight/2,ea=this._map.unproject([0,Z]);Z=this._map.unproject([1,Z]);ea=ea.distanceTo(Z);ea=Math.ceil(2*this._accuracy/ea);this._circleElement.style.width=ea+"px";this._circleElement.style.height=ea+"px"},aa.prototype._onZoom=function(){this.options.showUserLocation&&this.options.showAccuracyCircle&&this._updateCircleRadius()},aa.prototype._onError=function(Z){if(this._map){if(this.options.trackUserLocation)if(1===
Z.code){this._watchState="OFF";this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-waiting");this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-active");this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-active-error");this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-background");this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-background-error");this._geolocateButton.disabled=!0;var ea=this._map._getUIString("GeolocateControl.LocationNotAvailable");
this._geolocateButton.title=ea;this._geolocateButton.setAttribute("aria-label",ea);void 0!==this._geolocationWatchID&&this._clearWatch()}else{if(3===Z.code&&Wi)return;this._setErrorState()}"OFF"!==this._watchState&&this.options.showUserLocation&&this._dotElement.classList.add("mapboxgl-user-location-dot-stale");this.fire(new a.Event("error",Z));this._finish()}},aa.prototype._finish=function(){this._timeoutId&&clearTimeout(this._timeoutId);this._timeoutId=void 0},aa.prototype._setupUI=function(Z){var ea=
this;(this._container.addEventListener("contextmenu",function(wa){return wa.preventDefault()}),this._geolocateButton=$a.create("button","mapboxgl-ctrl-geolocate",this._container),$a.create("span","mapboxgl-ctrl-icon",this._geolocateButton).setAttribute("aria-hidden",!0),this._geolocateButton.type="button",!1===Z)?(a.warnOnce("Geolocation support is not available so the GeolocateControl will be disabled."),Z=this._map._getUIString("GeolocateControl.LocationNotAvailable"),this._geolocateButton.disabled=
!0,this._geolocateButton.title=Z,this._geolocateButton.setAttribute("aria-label",Z)):(Z=this._map._getUIString("GeolocateControl.FindMyLocation"),this._geolocateButton.title=Z,this._geolocateButton.setAttribute("aria-label",Z));this.options.trackUserLocation&&(this._geolocateButton.setAttribute("aria-pressed","false"),this._watchState="OFF");this.options.showUserLocation&&(this._dotElement=$a.create("div","mapboxgl-user-location-dot"),this._userLocationDotMarker=new oj(this._dotElement),this._circleElement=
$a.create("div","mapboxgl-user-location-accuracy-circle"),this._accuracyCircleMarker=new oj({element:this._circleElement,pitchAlignment:"map"}),this.options.trackUserLocation&&(this._watchState="OFF"),this._map.on("zoom",this._onZoom));this._geolocateButton.addEventListener("click",this.trigger.bind(this));this._setup=!0;this.options.trackUserLocation&&this._map.on("movestart",function(wa){wa.geolocateSource||"ACTIVE_LOCK"!==ea._watchState||wa.originalEvent&&"resize"===wa.originalEvent.type||(ea._watchState=
"BACKGROUND",ea._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-background"),ea._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-active"),ea.fire(new a.Event("trackuserlocationend")))})},aa.prototype.trigger=function(){if(!this._setup)return a.warnOnce("Geolocate control triggered before added to a map"),!1;if(this.options.trackUserLocation){switch(this._watchState){case "OFF":this._watchState="WAITING_ACTIVE";this.fire(new a.Event("trackuserlocationstart"));break;case "WAITING_ACTIVE":case "ACTIVE_LOCK":case "ACTIVE_ERROR":case "BACKGROUND_ERROR":Yh--;
Wi=!1;this._watchState="OFF";this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-waiting");this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-active");this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-active-error");this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-background");this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-background-error");this.fire(new a.Event("trackuserlocationend"));break;case "BACKGROUND":this._watchState=
"ACTIVE_LOCK",this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-background"),this._lastKnownPosition&&this._updateCamera(this._lastKnownPosition),this.fire(new a.Event("trackuserlocationstart"))}switch(this._watchState){case "WAITING_ACTIVE":this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-waiting");this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-active");break;case "ACTIVE_LOCK":this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-active");break;case "ACTIVE_ERROR":this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-waiting");
this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-active-error");break;case "BACKGROUND":this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-background");break;case "BACKGROUND_ERROR":this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-waiting"),this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-background-error")}if("OFF"===this._watchState&&void 0!==this._geolocationWatchID)this._clearWatch();else if(void 0===this._geolocationWatchID){var Z;this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-waiting");
this._geolocateButton.setAttribute("aria-pressed","true");1<++Yh?(Z={maximumAge:6E5,timeout:0},Wi=!0):(Z=this.options.positionOptions,Wi=!1);this._geolocationWatchID=a.window.navigator.geolocation.watchPosition(this._onSuccess,this._onError,Z)}}else a.window.navigator.geolocation.getCurrentPosition(this._onSuccess,this._onError,this.options.positionOptions),this._timeoutId=setTimeout(this._finish,1E4);return!0},aa.prototype._clearWatch=function(){a.window.navigator.geolocation.clearWatch(this._geolocationWatchID);
this._geolocationWatchID=void 0;this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-waiting");this._geolocateButton.setAttribute("aria-pressed","false");this.options.showUserLocation&&this._updateMarker(null)},aa}(a.Evented),lh={maxWidth:100,unit:"metric"},mf=function(W){this.options=a.extend({},lh,W);a.bindAll(["_onMove","setUnit"],this)};mf.prototype.getDefaultPosition=function(){return"bottom-left"};mf.prototype._onMove=function(){fb(this._map,this._container,this.options)};mf.prototype.onAdd=
function(W){return this._map=W,this._container=$a.create("div","mapboxgl-ctrl mapboxgl-ctrl-scale",W.getContainer()),this._map.on("move",this._onMove),this._onMove(),this._container};mf.prototype.onRemove=function(){$a.remove(this._container);this._map.off("move",this._onMove);this._map=void 0};mf.prototype.setUnit=function(W){this.options.unit=W;fb(this._map,this._container,this.options)};var hg=function(W){this._fullscreen=!1;W&&W.container&&(W.container instanceof a.window.HTMLElement?this._container=
W.container:a.warnOnce("Full screen control 'container' must be a DOM element."));a.bindAll(["_onClickFullscreen","_changeIcon"],this);"onfullscreenchange"in a.window.document?this._fullscreenchange="fullscreenchange":"onmozfullscreenchange"in a.window.document?this._fullscreenchange="mozfullscreenchange":"onwebkitfullscreenchange"in a.window.document?this._fullscreenchange="webkitfullscreenchange":"onmsfullscreenchange"in a.window.document&&(this._fullscreenchange="MSFullscreenChange")};hg.prototype.onAdd=
function(W){return this._map=W,this._container||(this._container=this._map.getContainer()),this._controlContainer=$a.create("div","mapboxgl-ctrl mapboxgl-ctrl-group"),this._checkFullscreenSupport()?this._setupUI():(this._controlContainer.style.display="none",a.warnOnce("This device does not support fullscreen mode.")),this._controlContainer};hg.prototype.onRemove=function(){$a.remove(this._controlContainer);this._map=null;a.window.document.removeEventListener(this._fullscreenchange,this._changeIcon)};
hg.prototype._checkFullscreenSupport=function(){return!!(a.window.document.fullscreenEnabled||a.window.document.mozFullScreenEnabled||a.window.document.msFullscreenEnabled||a.window.document.webkitFullscreenEnabled)};hg.prototype._setupUI=function(){var W=this._fullscreenButton=$a.create("button","mapboxgl-ctrl-fullscreen",this._controlContainer);$a.create("span","mapboxgl-ctrl-icon",W).setAttribute("aria-hidden",!0);W.type="button";this._updateTitle();this._fullscreenButton.addEventListener("click",
this._onClickFullscreen);a.window.document.addEventListener(this._fullscreenchange,this._changeIcon)};hg.prototype._updateTitle=function(){var W=this._getTitle();this._fullscreenButton.setAttribute("aria-label",W);this._fullscreenButton.title=W};hg.prototype._getTitle=function(){return this._map._getUIString(this._isFullscreen()?"FullscreenControl.Exit":"FullscreenControl.Enter")};hg.prototype._isFullscreen=function(){return this._fullscreen};hg.prototype._changeIcon=function(){(a.window.document.fullscreenElement||
a.window.document.mozFullScreenElement||a.window.document.webkitFullscreenElement||a.window.document.msFullscreenElement)===this._container!==this._fullscreen&&(this._fullscreen=!this._fullscreen,this._fullscreenButton.classList.toggle("mapboxgl-ctrl-shrink"),this._fullscreenButton.classList.toggle("mapboxgl-ctrl-fullscreen"),this._updateTitle())};hg.prototype._onClickFullscreen=function(){this._isFullscreen()?a.window.document.exitFullscreen?a.window.document.exitFullscreen():a.window.document.mozCancelFullScreen?
a.window.document.mozCancelFullScreen():a.window.document.msExitFullscreen?a.window.document.msExitFullscreen():a.window.document.webkitCancelFullScreen&&a.window.document.webkitCancelFullScreen():this._container.requestFullscreen?this._container.requestFullscreen():this._container.mozRequestFullScreen?this._container.mozRequestFullScreen():this._container.msRequestFullscreen?this._container.msRequestFullscreen():this._container.webkitRequestFullscreen&&this._container.webkitRequestFullscreen()};
var vk={closeButton:!0,closeOnClick:!0,className:"",maxWidth:"240px"},mh=function(W){function aa(Z){W.call(this);this.options=a.extend(Object.create(vk),Z);a.bindAll("_update _onClose remove _onMouseMove _onMouseUp _onDrag".split(" "),this)}return W&&(aa.__proto__=W),(aa.prototype=Object.create(W&&W.prototype)).constructor=aa,aa.prototype.addTo=function(Z){return this._map&&this.remove(),this._map=Z,this.options.closeOnClick&&this._map.on("click",this._onClose),this.options.closeOnMove&&this._map.on("move",
this._onClose),this._map.on("remove",this.remove),this._update(),this._trackPointer?(this._map.on("mousemove",this._onMouseMove),this._map.on("mouseup",this._onMouseUp),this._container&&this._container.classList.add("mapboxgl-popup-track-pointer"),this._map._canvasContainer.classList.add("mapboxgl-track-pointer")):this._map.on("move",this._update),this.fire(new a.Event("open")),this},aa.prototype.isOpen=function(){return!!this._map},aa.prototype.remove=function(){return this._content&&$a.remove(this._content),
this._container&&($a.remove(this._container),delete this._container),this._map&&(this._map.off("move",this._update),this._map.off("move",this._onClose),this._map.off("click",this._onClose),this._map.off("remove",this.remove),this._map.off("mousemove",this._onMouseMove),this._map.off("mouseup",this._onMouseUp),this._map.off("drag",this._onDrag),delete this._map),this.fire(new a.Event("close")),this},aa.prototype.getLngLat=function(){return this._lngLat},aa.prototype.setLngLat=function(Z){return this._lngLat=
a.LngLat.convert(Z),this._pos=null,this._trackPointer=!1,this._update(),this._map&&(this._map.on("move",this._update),this._map.off("mousemove",this._onMouseMove),this._container&&this._container.classList.remove("mapboxgl-popup-track-pointer"),this._map._canvasContainer.classList.remove("mapboxgl-track-pointer")),this},aa.prototype.trackPointer=function(){return this._trackPointer=!0,this._pos=null,this._update(),this._map&&(this._map.off("move",this._update),this._map.on("mousemove",this._onMouseMove),
this._map.on("drag",this._onDrag),this._container&&this._container.classList.add("mapboxgl-popup-track-pointer"),this._map._canvasContainer.classList.add("mapboxgl-track-pointer")),this},aa.prototype.getElement=function(){return this._container},aa.prototype.setText=function(Z){return this.setDOMContent(a.window.document.createTextNode(Z))},aa.prototype.setHTML=function(Z){var ea=a.window.document.createDocumentFragment(),wa=a.window.document.createElement("body");for(wa.innerHTML=Z;Z=wa.firstChild;)ea.appendChild(Z);
return this.setDOMContent(ea)},aa.prototype.getMaxWidth=function(){return this._container&&this._container.style.maxWidth},aa.prototype.setMaxWidth=function(Z){return this.options.maxWidth=Z,this._update(),this},aa.prototype.setDOMContent=function(Z){return this._createContent(),this._content.appendChild(Z),this._update(),this},aa.prototype.addClassName=function(Z){this._container&&this._container.classList.add(Z)},aa.prototype.removeClassName=function(Z){this._container&&this._container.classList.remove(Z)},
aa.prototype.toggleClassName=function(Z){if(this._container)return this._container.classList.toggle(Z)},aa.prototype._createContent=function(){this._content&&$a.remove(this._content);this._content=$a.create("div","mapboxgl-popup-content",this._container);this.options.closeButton&&(this._closeButton=$a.create("button","mapboxgl-popup-close-button",this._content),this._closeButton.type="button",this._closeButton.setAttribute("aria-label","Close popup"),this._closeButton.innerHTML="\x26#215;",this._closeButton.addEventListener("click",
this._onClose))},aa.prototype._onMouseUp=function(Z){this._update(Z.point)},aa.prototype._onMouseMove=function(Z){this._update(Z.point)},aa.prototype._onDrag=function(Z){this._update(Z.point)},aa.prototype._update=function(Z){var ea=this;if(this._map&&(this._lngLat||this._trackPointer)&&this._content&&(this._container||(this._container=$a.create("div","mapboxgl-popup",this._map.getContainer()),this._tip=$a.create("div","mapboxgl-popup-tip",this._container),this._container.appendChild(this._content),
this.options.className&&this.options.className.split(" ").forEach(function(ab){return ea._container.classList.add(ab)}),this._trackPointer&&this._container.classList.add("mapboxgl-popup-track-pointer")),this.options.maxWidth&&this._container.style.maxWidth!==this.options.maxWidth&&(this._container.style.maxWidth=this.options.maxWidth),this._map.transform.renderWorldCopies&&!this._trackPointer&&(this._lngLat=Ua(this._lngLat,this._pos,this._map.transform)),!this._trackPointer||Z)){Z=this._pos=this._trackPointer&&
Z?Z:this._map.project(this._lngLat);var wa=this.options.anchor,Ga=function Hb(yb){if(yb){if("number"==typeof yb){var Ib=Math.round(Math.sqrt(.5*Math.pow(yb,2)));return{center:new a.Point(0,0),top:new a.Point(0,yb),"top-left":new a.Point(Ib,Ib),"top-right":new a.Point(-Ib,Ib),bottom:new a.Point(0,-yb),"bottom-left":new a.Point(Ib,-Ib),"bottom-right":new a.Point(-Ib,-Ib),left:new a.Point(yb,0),right:new a.Point(-yb,0)}}return yb instanceof a.Point||Array.isArray(yb)?(yb=a.Point.convert(yb),{center:yb,
top:yb,"top-left":yb,"top-right":yb,bottom:yb,"bottom-left":yb,"bottom-right":yb,left:yb,right:yb}):{center:a.Point.convert(yb.center||[0,0]),top:a.Point.convert(yb.top||[0,0]),"top-left":a.Point.convert(yb["top-left"]||[0,0]),"top-right":a.Point.convert(yb["top-right"]||[0,0]),bottom:a.Point.convert(yb.bottom||[0,0]),"bottom-left":a.Point.convert(yb["bottom-left"]||[0,0]),"bottom-right":a.Point.convert(yb["bottom-right"]||[0,0]),left:a.Point.convert(yb.left||[0,0]),right:a.Point.convert(yb.right||
[0,0])}}return Hb(new a.Point(0,0))}(this.options.offset);if(!wa){wa=this._container.offsetWidth;var Sa=this._container.offsetHeight;Sa=Z.y+Ga.bottom.y<Sa?["top"]:Z.y>this._map.transform.height-Sa?["bottom"]:[];Z.x<wa/2?Sa.push("left"):Z.x>this._map.transform.width-wa/2&&Sa.push("right");wa=0===Sa.length?"bottom":Sa.join("-")}Z=Z.add(Ga[wa]).round();$a.setTransform(this._container,Dg[wa]+" translate("+Z.x+"px,"+Z.y+"px)");eb(this._container,wa,"popup")}},aa.prototype._onClose=function(){this.remove()},
aa}(a.Evented),Di={version:a.version,supported:cb,setRTLTextPlugin:a.setRTLTextPlugin,getRTLTextPluginStatus:a.getRTLTextPluginStatus,Map:fk,NavigationControl:Cg,GeolocateControl:kh,AttributionControl:Ng,ScaleControl:mf,FullscreenControl:hg,Popup:mh,Marker:oj,Style:qd,LngLat:a.LngLat,LngLatBounds:a.LngLatBounds,Point:a.Point,MercatorCoordinate:a.MercatorCoordinate,Evented:a.Evented,config:a.config,prewarm:function(){(Kd||(Kd=new Je),Kd).acquire("mapboxgl_preloaded_worker_pool")},clearPrewarmedResources:function(){var W=
Kd;W&&(W.isPreloaded()&&1===W.numActive()?(W.release("mapboxgl_preloaded_worker_pool"),Kd=null):console.warn("Could not clear WebWorkers since there are active Map instances that still reference it. The pre-warmed WebWorker pool can only be cleared when all map instances have been removed with map.remove()"))},get accessToken(){return a.config.ACCESS_TOKEN},set accessToken(W){a.config.ACCESS_TOKEN=W},get baseApiUrl(){return a.config.API_URL},set baseApiUrl(W){a.config.API_URL=W},get workerCount(){return Je.workerCount},
set workerCount(W){Je.workerCount=W},get maxParallelImageRequests(){return a.config.MAX_PARALLEL_IMAGE_REQUESTS},set maxParallelImageRequests(W){a.config.MAX_PARALLEL_IMAGE_REQUESTS=W},clearStorage:function(W){a.clearTileCache(W)},workerUrl:""};return Di});return l})},{}],474:[function(b,N,I){function r(m,l,a){for(var h=Array(m),g=0;g<m;++g)h[g]=0,g===l&&(h[g]+=.5),g===a&&(h[g]+=.5);return h}N.exports=function(m){for(var l=1<<m+1,a=Array(l),h=0;h<l;++h){var g=h;var n=m,p=h;if(0===p||p===(1<<n+1)-
1)var d=[];else{var e=[];d=[];for(var f=0;f<=n;++f)if(p&1<<f){e.push(r(n,f-1,f-1));d.push(null);for(var k=0;k<=n;++k)~p&1<<k&&(e.push(r(n,f-1,k-1)),d.push([f,k]))}n=q(e);p=[];f=0;b:for(;f<n.length;++f){e=n[f];var t=[];for(k=0;k<e.length;++k){if(!d[e[k]])continue b;t.push(d[e[k]].slice())}p.push(t)}d=p}a[g]=d}return a};var q=b("convex-hull")},{"convex-hull":135}],475:[function(b,N,I){function r(k,t,v,w,y){k[0]=t[0]*w+v[0]*y;k[1]=t[1]*w+v[1]*y;k[2]=t[2]*w+v[2]*y}var q=b("./normalize");I=b("gl-mat4/create");
var m=b("gl-mat4/clone"),l=b("gl-mat4/determinant"),a=b("gl-mat4/invert"),h=b("gl-mat4/transpose"),g={length:b("gl-vec3/length"),normalize:b("gl-vec3/normalize"),dot:b("gl-vec3/dot"),cross:b("gl-vec3/cross")},n=I(),p=I(),d=[0,0,0,0],e=[[0,0,0],[0,0,0],[0,0,0]],f=[0,0,0];N.exports=function(k,t,v,w,y,B){t||(t=[0,0,0]);v||(v=[0,0,0]);w||(w=[0,0,0]);y||(y=[0,0,0,1]);B||(B=[0,0,0,1]);if(!q(n,k))return!1;m(p,n);p[3]=0;p[7]=0;p[11]=0;p[15]=1;if(Math.abs(1E-8>l(p)))return!1;var A=n[3],z=n[7],E=n[11];k=n[12];
var C=n[13],u=n[14],D=n[15];if(0!==A||0!==z||0!==E){d[0]=A;d[1]=z;d[2]=E;d[3]=D;if(!a(p,p))return!1;h(p,p);A=d[0];z=d[1];E=d[2];D=d[3];y[0]=p[0]*A+p[4]*z+p[8]*E+p[12]*D;y[1]=p[1]*A+p[5]*z+p[9]*E+p[13]*D;y[2]=p[2]*A+p[6]*z+p[10]*E+p[14]*D;y[3]=p[3]*A+p[7]*z+p[11]*E+p[15]*D}else y[0]=y[1]=y[2]=0,y[3]=1;t[0]=k;t[1]=C;t[2]=u;e[0][0]=n[0];e[0][1]=n[1];e[0][2]=n[2];e[1][0]=n[4];e[1][1]=n[5];e[1][2]=n[6];e[2][0]=n[8];e[2][1]=n[9];e[2][2]=n[10];v[0]=g.length(e[0]);g.normalize(e[0],e[0]);w[0]=g.dot(e[0],e[1]);
r(e[1],e[1],e[0],1,-w[0]);v[1]=g.length(e[1]);g.normalize(e[1],e[1]);w[0]/=v[1];w[1]=g.dot(e[0],e[2]);r(e[2],e[2],e[0],1,-w[1]);w[2]=g.dot(e[1],e[2]);r(e[2],e[2],e[1],1,-w[2]);v[2]=g.length(e[2]);g.normalize(e[2],e[2]);w[1]/=v[2];w[2]/=v[2];g.cross(f,e[1],e[2]);if(0>g.dot(e[0],f))for(t=0;3>t;t++)v[t]*=-1,e[t][0]*=-1,e[t][1]*=-1,e[t][2]*=-1;B[0]=.5*Math.sqrt(Math.max(1+e[0][0]-e[1][1]-e[2][2],0));B[1]=.5*Math.sqrt(Math.max(1-e[0][0]+e[1][1]-e[2][2],0));B[2]=.5*Math.sqrt(Math.max(1-e[0][0]-e[1][1]+
e[2][2],0));B[3]=.5*Math.sqrt(Math.max(1+e[0][0]+e[1][1]+e[2][2],0));e[2][1]>e[1][2]&&(B[0]=-B[0]);e[0][2]>e[2][0]&&(B[1]=-B[1]);e[1][0]>e[0][1]&&(B[2]=-B[2]);return!0}},{"./normalize":476,"gl-mat4/clone":278,"gl-mat4/create":280,"gl-mat4/determinant":281,"gl-mat4/invert":293,"gl-mat4/transpose":306,"gl-vec3/cross":365,"gl-vec3/dot":370,"gl-vec3/length":380,"gl-vec3/normalize":387}],476:[function(b,N,I){N.exports=function(r,q){var m=q[15];if(0===m)return!1;m=1/m;for(var l=0;16>l;l++)r[l]=q[l]*m;return!0}},
{}],477:[function(b,N,I){function r(){return{translate:[0,0,0],scale:[1,1,1],skew:[0,0,0],perspective:[0,0,0,1],quaternion:[0,0,0,1]}}var q=b("gl-vec3/lerp"),m=b("mat4-recompose"),l=b("mat4-decompose"),a=b("gl-mat4/determinant"),h=b("quat-slerp"),g=r(),n=r(),p=r();N.exports=function(d,e,f,k){if(0===a(e)||0===a(f))return!1;e=l(e,g.translate,g.scale,g.skew,g.perspective,g.quaternion);f=l(f,n.translate,n.scale,n.skew,n.perspective,n.quaternion);if(!e||!f)return!1;q(p.translate,g.translate,n.translate,
k);q(p.skew,g.skew,n.skew,k);q(p.scale,g.scale,n.scale,k);q(p.perspective,g.perspective,n.perspective,k);h(p.quaternion,g.quaternion,n.quaternion,k);m(d,p.translate,p.scale,p.skew,p.perspective,p.quaternion);return!0}},{"gl-mat4/determinant":281,"gl-vec3/lerp":381,"mat4-decompose":475,"mat4-recompose":478,"quat-slerp":527}],478:[function(b,N,I){var r={identity:b("gl-mat4/identity"),translate:b("gl-mat4/translate"),multiply:b("gl-mat4/multiply"),create:b("gl-mat4/create"),scale:b("gl-mat4/scale"),
fromRotationTranslation:b("gl-mat4/fromRotationTranslation")};r.create();var q=r.create();N.exports=function(m,l,a,h,g,n){r.identity(m);r.fromRotationTranslation(m,n,l);m[3]=g[0];m[7]=g[1];m[11]=g[2];m[15]=g[3];r.identity(q);0!==h[2]&&(q[9]=h[2],r.multiply(m,m,q));0!==h[1]&&(q[9]=0,q[8]=h[1],r.multiply(m,m,q));0!==h[0]&&(q[8]=0,q[4]=h[0],r.multiply(m,m,q));r.scale(m,m,a);return m}},{"gl-mat4/create":280,"gl-mat4/fromRotationTranslation":284,"gl-mat4/identity":291,"gl-mat4/multiply":295,"gl-mat4/scale":303,
"gl-mat4/translate":305}],479:[function(b,N,I){N.exports=Math.log2||function(r){return Math.log(r)*Math.LOG2E}},{}],480:[function(b,N,I){function r(k){this._components=k.slice();this._time=[0];this.prevMatrix=k.slice();this.nextMatrix=k.slice();this.computedMatrix=k.slice();this.computedInverse=k.slice();this.computedEye=[0,0,0];this.computedUp=[0,0,0];this.computedCenter=[0,0,0];this.computedRadius=[0];this._limits=[-Infinity,Infinity]}var q=b("binary-search-bounds"),m=b("mat4-interpolate"),l=b("gl-mat4/invert"),
a=b("gl-mat4/rotateX"),h=b("gl-mat4/rotateY"),g=b("gl-mat4/rotateZ"),n=b("gl-mat4/lookAt"),p=b("gl-mat4/translate");b("gl-mat4/scale");var d=b("gl-vec3/normalize"),e=[0,0,0];N.exports=function(k){k=k||{};return new r(k.matrix||[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1])};b=r.prototype;b.recalcMatrix=function(k){var t=this._time,v=q.le(t,k),w=this.computedMatrix;if(!(0>v)){var y=this._components;if(v===t.length-1)for(var B=16*v,A=0;16>A;++A)w[A]=y[B++];else{var z=t[v+1]-t[v];B=16*v;var E=this.prevMatrix,C=
!0;for(A=0;16>A;++A)E[A]=y[B++];var u=this.nextMatrix;for(A=0;16>A;++A)u[A]=y[B++],C=C&&E[A]===u[A];if(1E-6>z||C)for(A=0;16>A;++A)w[A]=E[A];else m(w,E,u,(k-t[v])/z)}A=this.computedUp;A[0]=w[1];A[1]=w[5];A[2]=w[9];d(A,A);A=this.computedInverse;l(A,w);k=this.computedEye;t=A[15];k[0]=A[12]/t;k[1]=A[13]/t;k[2]=A[14]/t;t=this.computedCenter;v=Math.exp(this.computedRadius[0]);for(A=0;3>A;++A)t[A]=k[A]-w[2+4*A]*v}};b.idle=function(k){if(!(k<this.lastT())){for(var t=this._components,v=t.length-16,w=0;16>
w;++w)t.push(t[v++]);this._time.push(k)}};b.flush=function(k){k=q.gt(this._time,k)-2;0>k||(this._time.splice(0,k),this._components.splice(0,16*k))};b.lastT=function(){return this._time[this._time.length-1]};b.lookAt=function(k,t,v,w){this.recalcMatrix(k);t=t||this.computedEye;v=v||e;w=w||this.computedUp;this.setMatrix(k,n(this.computedMatrix,t,v,w));for(w=k=0;3>w;++w)k+=Math.pow(v[w]-t[w],2);k=Math.log(Math.sqrt(k));this.computedRadius[0]=k};b.rotate=function(k,t,v,w){this.recalcMatrix(k);var y=this.computedInverse;
t&&h(y,y,t);v&&a(y,y,v);w&&g(y,y,w);this.setMatrix(k,l(this.computedMatrix,y))};var f=[0,0,0];b.pan=function(k,t,v,w){f[0]=-(t||0);f[1]=-(v||0);f[2]=-(w||0);this.recalcMatrix(k);t=this.computedInverse;p(t,t,f);this.setMatrix(k,l(t,t))};b.translate=function(k,t,v,w){f[0]=t||0;f[1]=v||0;f[2]=w||0;this.recalcMatrix(k);t=this.computedMatrix;p(t,t,f);this.setMatrix(k,t)};b.setMatrix=function(k,t){if(!(k<this.lastT()))for(this._time.push(k),k=0;16>k;++k)this._components.push(t[k])};b.setDistance=function(k,
t){this.computedRadius[0]=t};b.setDistanceLimits=function(k,t){var v=this._limits;v[0]=k;v[1]=t};b.getDistanceLimits=function(k){var t=this._limits;return k?(k[0]=t[0],k[1]=t[1],k):t}},{"binary-search-bounds":481,"gl-mat4/invert":293,"gl-mat4/lookAt":294,"gl-mat4/rotateX":300,"gl-mat4/rotateY":301,"gl-mat4/rotateZ":302,"gl-mat4/scale":303,"gl-mat4/translate":305,"gl-vec3/normalize":387,"mat4-interpolate":477}],481:[function(b,N,I){arguments[4][243][0].apply(I,arguments)},{dup:243}],482:[function(b,
N,I){N.exports=function(q){var m=q.length;if(3>m){for(var l=Array(m),a=0;a<m;++a)l[a]=a;return 2===m&&q[0][0]===q[1][0]&&q[0][1]===q[1][1]?[0]:l}l=Array(m);for(a=0;a<m;++a)l[a]=a;l.sort(function(e,f){var k=q[e][0]-q[f][0];return k?k:q[e][1]-q[f][1]});var h=[l[0],l[1]],g=[l[0],l[1]];for(a=2;a<m;++a){for(var n=l[a],p=q[n],d=h.length;1<d&&0>=r(q[h[d-2]],q[h[d-1]],p);)--d,h.pop();h.push(n);for(d=g.length;1<d&&0<=r(q[g[d-2]],q[g[d-1]],p);)--d,g.pop();g.push(n)}l=Array(g.length+h.length-2);a=m=0;for(n=
h.length;a<n;++a)l[m++]=h[a];for(a=g.length-2;0<a;--a)l[m++]=g[a];return l};var r=b("robust-orientation")[3]},{"robust-orientation":548}],483:[function(b,N,I){N.exports=function(q,m){function l(A){var z=!1;"altKey"in A&&(z=z||A.altKey!==w.alt,w.alt=!!A.altKey);"shiftKey"in A&&(z=z||A.shiftKey!==w.shift,w.shift=!!A.shiftKey);"ctrlKey"in A&&(z=z||A.ctrlKey!==w.control,w.control=!!A.ctrlKey);"metaKey"in A&&(z=z||A.metaKey!==w.meta,w.meta=!!A.metaKey);return z}function a(A,z){var E=r.x(z),C=r.y(z);"buttons"in
z&&(A=z.buttons|0);if(A!==k||E!==t||C!==v||l(z))k=A|0,t=E||0,v=C||0,m&&m(k,t,v,w)}function h(A){a(0,A)}function g(){if(k||t||v||w.shift||w.alt||w.meta||w.control)k=t=v=0,w.shift=w.alt=w.control=w.meta=!1,m&&m(0,0,0,w)}function n(A){l(A)&&m&&m(k,t,v,w)}function p(A){0===r.buttons(A)?a(0,A):a(k,A)}function d(A){a(k|r.buttons(A),A)}function e(A){a(k&~r.buttons(A),A)}function f(){y||(y=!0,q.addEventListener("mousemove",p),q.addEventListener("mousedown",d),q.addEventListener("mouseup",e),q.addEventListener("mouseleave",
h),q.addEventListener("mouseenter",h),q.addEventListener("mouseout",h),q.addEventListener("mouseover",h),q.addEventListener("blur",g),q.addEventListener("keyup",n),q.addEventListener("keydown",n),q.addEventListener("keypress",n),q!==window&&(window.addEventListener("blur",g),window.addEventListener("keyup",n),window.addEventListener("keydown",n),window.addEventListener("keypress",n)))}m||(m=q,q=window);var k=0,t=0,v=0,w={shift:!1,alt:!1,control:!1,meta:!1},y=!1;f();var B={element:q};Object.defineProperties(B,
{enabled:{get:function(){return y},set:function(A){A?f():y&&(y=!1,q.removeEventListener("mousemove",p),q.removeEventListener("mousedown",d),q.removeEventListener("mouseup",e),q.removeEventListener("mouseleave",h),q.removeEventListener("mouseenter",h),q.removeEventListener("mouseout",h),q.removeEventListener("mouseover",h),q.removeEventListener("blur",g),q.removeEventListener("keyup",n),q.removeEventListener("keydown",n),q.removeEventListener("keypress",n),q!==window&&(window.removeEventListener("blur",
g),window.removeEventListener("keyup",n),window.removeEventListener("keydown",n),window.removeEventListener("keypress",n)))},enumerable:!0},buttons:{get:function(){return k},enumerable:!0},x:{get:function(){return t},enumerable:!0},y:{get:function(){return v},enumerable:!0},mods:{get:function(){return w},enumerable:!0}});return B};var r=b("mouse-event")},{"mouse-event":485}],484:[function(b,N,I){var r={left:0,top:0};N.exports=function(q,m,l){m=m||q.currentTarget||q.srcElement;Array.isArray(l)||(l=
[0,0]);var a=q.clientX||0;q=q.clientY||0;m=m===window||m===document||m===document.body?r:m.getBoundingClientRect();l[0]=a-m.left;l[1]=q-m.top;return l}},{}],485:[function(b,N,I){function r(q){return q.target||q.srcElement||window}I.buttons=function(q){if("object"===typeof q){if("buttons"in q)return q.buttons;if("which"in q){q=q.which;if(2===q)return 4;if(3===q)return 2;if(0<q)return 1<<q-1}else if("button"in q){q=q.button;if(1===q)return 4;if(2===q)return 2;if(0<=q)return 1<<q}}return 0};I.element=
r;I.x=function(q){if("object"===typeof q){if("offsetX"in q)return q.offsetX;var m=r(q).getBoundingClientRect();return q.clientX-m.left}return 0};I.y=function(q){if("object"===typeof q){if("offsetY"in q)return q.offsetY;var m=r(q).getBoundingClientRect();return q.clientY-m.top}return 0}},{}],486:[function(b,N,I){var r=b("to-px");N.exports=function(q,m,l){"function"===typeof q&&(l=!!m,m=q,q=window);var a=r("ex",q),h=function(g){l&&g.preventDefault();var n=g.deltaX||0,p=g.deltaY||0,d=g.deltaZ||0,e=1;
switch(g.deltaMode){case 1:e=a;break;case 2:e=window.innerHeight}n*=e;p*=e;d*=e;if(n||p||d)return m(n,p,d,g)};q.addEventListener("wheel",h);return h}},{"to-px":578}],487:[function(b,N,I){function r(d,e,f){for(var k=0,t=0;t<d;++t)e&1<<t&&(k|=1<<f[t]);return k}function q(d,e,f,k,t,v){function w(Q,M){u.push("for(","i"+t[Q],"\x3d",M,";","i"+t[Q],"\x3c","s"+t[Q],";","++","i"+t[Q],"){")}function y(Q){for(var M=0;M<z;++M)u.push("p"+M,"+\x3d","u"+M+"_"+t[Q],";");u.push("}")}function B(){for(var Q=1;Q<1<<
E;++Q)u.push(p,"\x3d","e"+Q,";","e"+Q,"\x3d","y"+Q,";","y"+Q,"\x3d",p,";")}function A(Q,M){if(0>Q){for(var P=0;P<z;++P)v[P]?u.push("c"+P+"_0","\x3d","d"+P,".get(","p"+P,");"):u.push("c"+P+"_0","\x3d","d"+P,"[","p"+P,"];");Q=[];for(P=0;P<z;++P)Q.push("c"+P+"_0");for(P=0;P<k;++P)Q.push("x"+P);u.push("b0","\x3d",a,"[",n,"]\x3dphase(",Q.join(),");");for(Q=1;Q<1<<E;++Q)u.push("b"+Q,"\x3d",a,"[",n,"+","e"+Q,"];");P=[];for(Q=1;Q<1<<E;++Q)P.push("(b0!\x3d\x3db"+Q+")");u.push("if(",P.join("||"),"){");var T=
[];for(P=0;P<E;++P)T.push("i"+P);for(P=0;P<z;++P)for(T.push("c"+P+"_0"),Q=1;Q<1<<E;++Q)v[P]?u.push("c"+P+"_"+Q,"\x3d","d"+P,".get(","p"+P,"+","d"+P+"_"+Q,");"):u.push("c"+P+"_"+Q,"\x3d","d"+P,"[","p"+P,"+","d"+P+"_"+Q,"];"),T.push("c"+P+"_"+Q);for(P=0;P<1<<E;++P)T.push("b"+P);for(P=0;P<k;++P)T.push("x"+P);u.push("vertex(",T.join(),");","v0","\x3d",l,"[",n,"]\x3d",h,"++;");P=(1<<E)-1;T="b"+P;for(Q=0;Q<E;++Q)if(0===(M&~(1<<Q))){for(var O=P^1<<Q,U="b"+O,S=[],X=O;0<X;X=X-1&O)S.push(l+"["+n+"+e"+X+"]");
S.push("v0");for(X=0;X<z;++X)Q&1?S.push("c"+X+"_"+P,"c"+X+"_"+O):S.push("c"+X+"_"+O,"c"+X+"_"+P);Q&1?S.push(T,U):S.push(U,T);for(X=0;X<k;++X)S.push("x"+X);u.push("if(",T,"!\x3d\x3d",U,"){","face(",S.join(),")}")}u.push("}",n,"+\x3d1;")}else{for(P=Q-1;0<=P;--P)w(P,0);T=[];for(P=0;P<z;++P)v[P]?T.push("d"+P+".get(p"+P+")"):T.push("d"+P+"[p"+P+"]");for(P=0;P<k;++P)T.push("x"+P);u.push(a,"[",n,"++]\x3dphase(",T.join(),");");for(P=0;P<Q;++P)y(P);for(P=0;P<z;++P)u.push("p"+P,"+\x3d","u"+P+"_"+t[Q],";");
u.push("if(","s"+t[Q],"\x3e0){","i"+t[Q],"\x3d1;");A(Q-1,M|1<<t[Q]);for(P=0;P<z;++P)u.push("p"+P,"+\x3d","u"+P+"_"+t[Q],";");Q===E-1&&(u.push(n,"\x3d0;"),B());w(Q,2);A(Q-1,M);Q===E-1&&(u.push("if(","i"+t[E-1],"\x261){",n,"\x3d0;}"),B());y(Q);u.push("}")}}var z=v.length,E=t.length;if(2>E)throw Error("ndarray-extract-contour: Dimension must be at least 2");for(var C="extractContour"+t.join("_"),u=[],D=[],G=[],J=0;J<z;++J)G.push("a"+J);for(J=0;J<k;++J)G.push("x"+J);for(J=0;J<E;++J)D.push("s"+J+"\x3da0.shape["+
J+"]|0");for(J=0;J<z;++J){D.push("d"+J+"\x3da"+J+".data","o"+J+"\x3da"+J+".offset|0");for(var L=0;L<E;++L)D.push("t"+J+"_"+L+"\x3da"+J+".stride["+L+"]|0")}for(J=0;J<z;++J)for(D.push("p"+J+"\x3do"+J),D.push("c"+J+"_0"),L=1;L<1<<E;++L){for(var K=[],H=0;H<E;++H)L&1<<H&&K.push("-t"+(J+"_"+H));D.push("d"+J+"_"+L+"\x3d("+K.join("")+")|0");D.push("c"+J+"_"+L+"\x3d0")}for(J=0;J<z;++J)for(L=0;L<E;++L)H=["t"+J+"_"+t[L]],0<L&&H.push("t"+J+"_"+t[L-1]+"*s"+t[L-1]),D.push("u"+J+"_"+t[L]+"\x3d("+H.join("-")+")|0");
for(J=0;J<E;++J)D.push("i"+J+"\x3d0");D.push(h+"\x3d0");L=["2"];for(J=E-2;0<=J;--J)L.push("s"+t[J]);D.push(g+"\x3d("+L.join("*")+")|0",a+"\x3dmallocUint32("+g+")",l+"\x3dmallocUint32("+g+")",n+"\x3d0");D.push("b0\x3d0");for(L=1;L<1<<E;++L){J=[];K=[];for(H=0;H<E;++H)L&1<<H&&(0===K.length?J.push("1"):J.unshift(K.join("*"))),K.push("s"+t[H]);H="";0>J[0].indexOf("s"+t[E-2])&&(H="-");K=r(E,L,t);D.push("e"+K+"\x3d(-"+J.join("-")+")|0","y"+K+"\x3d("+H+J.join("-")+")|0","b"+K+"\x3d0")}D.push("v0\x3d0",p+
"\x3d0");A(E-1,0);u.push("freeUint32(",l,");freeUint32(",a,");");C=["'use strict';function ",C,"(",G.join(),"){var ",D.join(),";",u.join(""),"}return ",C].join("");return(new Function("vertex","face","phase","mallocUint32","freeUint32",C))(d,e,f,m.mallocUint32,m.freeUint32)}var m=b("typedarray-pool");N.exports=function(d){function e(B){throw Error("ndarray-extract-contour: "+B);}"object"!==typeof d&&e("Must specify arguments");var f=d.order;Array.isArray(f)||e("Must specify order");var k=d.arrayArguments||
1;1>k&&e("Must have at least one array argument");var t=d.scalarArguments||0;0>t&&e("Scalar arg count must be \x3e 0");"function"!==typeof d.vertex&&e("Must specify vertex creation function");"function"!==typeof d.cell&&e("Must specify cell creation function");"function"!==typeof d.phase&&e("Must specify phase function");for(var v=d.getters||[],w=Array(k),y=0;y<k;++y)0<=v.indexOf(y)?w[y]=!0:w[y]=!1;return q(d.vertex,d.cell,d.phase,t,f,w)};var l="V",a="P",h="N",g="Q",n="X",p="T"},{"typedarray-pool":595}],
488:[function(b,N,I){function r(p){if(p in l)return l[p];for(var d=[],e=0;e<p;++e)d.push("out",e,"s\x3d0.5*(inp",e,"l-inp",e,"r);");var f=["array"],k=["junk"];for(e=0;e<p;++e){f.push("array");k.push("out"+e+"s");var t=q(p);t[e]=-1;f.push({array:0,offset:t.slice()});t[e]=1;f.push({array:0,offset:t.slice()});k.push("inp"+e+"l","inp"+e+"r")}return l[p]=m({args:f,pre:h,post:h,body:{body:d.join(""),args:k.map(function(v){return{name:v,lvalue:0===v.indexOf("out"),rvalue:0===v.indexOf("inp"),count:"junk"!==
v|0}}),thisVars:[],localVars:[]},funcName:"fdTemplate"+p})}N.exports=function(p,d,e){if(Array.isArray(e)){if(e.length!==d.dimension)throw Error("ndarray-gradient: invalid boundary conditions");}else e="string"===typeof e?q(d.dimension,e):q(d.dimension,"clamp");if(p.dimension!==d.dimension+1)throw Error("ndarray-gradient: output dimension must be +1 input dimension");if(p.shape[d.dimension]!==d.dimension)throw Error("ndarray-gradient: output shape must match input shape");for(var f=0;f<d.dimension;++f)if(p.shape[f]!==
d.shape[f])throw Error("ndarray-gradient: shape mismatch");if(0===d.size)return p;if(0>=d.dimension)return p.set(0),p;var k=e;e=k.join();f=a[e];if(!f){f=k.length;for(var t=["function gradient(dst,src){var s\x3dsrc.shape.slice();"],v=0;v<1<<f;++v){for(var w=[],y=0;y<f;++y)v&1<<y&&w.push(y+1);for(var B=0;B<1<<w.length;++B){var A=w.slice();for(y=0;y<w.length;++y)B&1<<y&&(A[y]=-A[y]);y=A;A=f-y.length;for(var z=[],E=[],C=[],u=0;u<f;++u)0<=y.indexOf(u+1)?C.push("0"):0<=y.indexOf(-(u+1))?C.push("s["+u+"]-1"):
(C.push("-1"),z.push("1"),E.push("s["+u+"]-2"));E=".lo("+z.join()+").hi("+E.join()+")";0===z.length&&(E="");if(0<A){t.push("if(1");for(u=0;u<f;++u)0<=y.indexOf(u+1)||0<=y.indexOf(-(u+1))||t.push("\x26\x26s[",u,"]\x3e2");t.push("){grad",A,"(src.pick(",C.join(),")",E);for(u=0;u<f;++u)0<=y.indexOf(u+1)||0<=y.indexOf(-(u+1))||t.push(",dst.pick(",C.join(),",",u,")",E);t.push(");")}for(u=0;u<y.length;++u){z=Math.abs(y[u])-1;var D="dst.pick("+C.join()+","+z+")"+E;switch(k[z]){case "clamp":var G=C.slice(),
J=C.slice();0>y[u]?G[z]="s["+z+"]-2":J[z]="1";0===A?t.push("if(s[",z,"]\x3e1){dst.set(",C.join(),",",z,",0.5*(src.get(",G.join(),")-src.get(",J.join(),")))}else{dst.set(",C.join(),",",z,",0)};"):t.push("if(s[",z,"]\x3e1){diff(",D,",src.pick(",G.join(),")",E,",src.pick(",J.join(),")",E,");}else{zero(",D,");};");break;case "mirror":0===A?t.push("dst.set(",C.join(),",",z,",0);"):t.push("zero(",D,");");break;case "wrap":G=C.slice();J=C.slice();0>y[u]?(G[z]="s["+z+"]-2",J[z]="0"):(G[z]="s["+z+"]-1",J[z]=
"1");0===A?t.push("if(s[",z,"]\x3e2){dst.set(",C.join(),",",z,",0.5*(src.get(",G.join(),")-src.get(",J.join(),")))}else{dst.set(",C.join(),",",z,",0)};"):t.push("if(s[",z,"]\x3e2){diff(",D,",src.pick(",G.join(),")",E,",src.pick(",J.join(),")",E,");}else{zero(",D,");};");break;default:throw Error("ndarray-gradient: Invalid boundary condition");}}0<A&&t.push("};")}}t.push("return dst;};return gradient");k=["diff","zero"];w=[g,n];for(v=1;v<=f;++v)k.push("grad"+v),w.push(r(v));k.push(t.join(""));f=Function.apply(void 0,
k).apply(void 0,w);l[e]=f}return f(p,d)};var q=b("dup"),m=b("cwise-compiler"),l={},a={},h={body:"",args:[],thisVars:[],localVars:[]},g=m({args:["array","array","array"],pre:h,post:h,body:{args:[{name:"out",lvalue:!0,rvalue:!1,count:1},{name:"left",lvalue:!1,rvalue:!0,count:1},{name:"right",lvalue:!1,rvalue:!0,count:1}],body:"out\x3d0.5*(left-right)",thisVars:[],localVars:[]},funcName:"cdiff"}),n=m({args:["array"],pre:h,post:h,body:{args:[{name:"out",lvalue:!0,rvalue:!1,count:1}],body:"out\x3d0",thisVars:[],
localVars:[]},funcName:"zero"})},{"cwise-compiler":151,dup:176}],489:[function(b,N,I){function r(a,h){var g=Math.floor(h);h-=g;var n=0<=g+1&&g+1<a.shape[0],p=0<=g&&g<a.shape[0]?+a.get(g):0;a=n?+a.get(g+1):0;return(1-h)*p+h*a}function q(a,h,g){var n=Math.floor(h);h-=n;var p=0<=n&&n<a.shape[0],d=0<=n+1&&n+1<a.shape[0],e=Math.floor(g);g-=e;var f=0<=e&&e<a.shape[1],k=0<=e+1&&e+1<a.shape[1],t=p&&f?a.get(n,e):0;p=p&&k?a.get(n,e+1):0;f=d&&f?a.get(n+1,e):0;a=d&&k?a.get(n+1,e+1):0;return(1-g)*((1-h)*t+h*f)+
g*((1-h)*p+h*a)}function m(a,h,g,n){var p=Math.floor(h);h-=p;var d=0<=p&&p<a.shape[0],e=0<=p+1&&p+1<a.shape[0],f=Math.floor(g);g-=f;var k=0<=f&&f<a.shape[1],t=0<=f+1&&f+1<a.shape[1],v=Math.floor(n);n-=v;var w=0<=v&&v<a.shape[2],y=0<=v+1&&v+1<a.shape[2],B=d&&k&&w?a.get(p,f,v):0,A=d&&t&&w?a.get(p,f+1,v):0,z=e&&k&&w?a.get(p+1,f,v):0;w=e&&t&&w?a.get(p+1,f+1,v):0;var E=d&&k&&y?a.get(p,f,v+1):0;d=d&&t&&y?a.get(p,f+1,v+1):0;k=e&&k&&y?a.get(p+1,f,v+1):0;a=e&&t&&y?a.get(p+1,f+1,v+1):0;return(1-n)*((1-g)*((1-
h)*B+h*z)+g*((1-h)*A+h*w))+n*((1-g)*((1-h)*E+h*k)+g*((1-h)*d+h*a))}function l(a){var h=a.shape.length|0,g=Array(h),n=Array(h),p=Array(h),d=Array(h),e;for(e=0;e<h;++e){var f=+arguments[e+1];g[e]=Math.floor(f);n[e]=f-g[e];p[e]=0<=g[e]&&g[e]<a.shape[e];d[e]=0<=g[e]+1&&g[e]+1<a.shape[e]}f=0;var k;e=0;a:for(;e<1<<h;++e){var t=1;var v=a.offset;for(k=0;k<h;++k)if(e&1<<k){if(!d[k])continue a;t*=n[k];v+=a.stride[k]*(g[k]+1)}else{if(!p[k])continue a;t*=1-n[k];v+=a.stride[k]*g[k]}f+=t*a.data[v]}return f}N.exports=
function(a,h,g,n){switch(a.shape.length){case 0:return 0;case 1:return r(a,h);case 2:return q(a,h,g);case 3:return m(a,h,g,n);default:return l.apply(void 0,arguments)}};N.exports.d1=r;N.exports.d2=q;N.exports.d3=m},{}],490:[function(b,N,I){function r(e){if(!e)return l;for(var f=0;f<e.args.length;++f){var k=e.args[f];e.args[f]=0===f?{name:k,lvalue:!0,rvalue:!!e.rvalue,count:e.count||1}:{name:k,lvalue:!1,rvalue:!0,count:1}}e.thisVars||(e.thisVars=[]);e.localVars||(e.localVars=[]);return e}function q(e){for(var f=
[],k=0;k<e.args.length;++k)f.push("a"+k);f=new Function("P",["return function ",e.funcName,"_ndarrayops(",f.join(","),") {P(",f.join(","),");return a0}"].join(""));e=m({args:e.args,pre:r(e.pre),body:r(e.body),post:r(e.proc),funcName:e.funcName});return f(e)}var m=b("cwise-compiler"),l={body:"",args:[],thisVars:[],localVars:[]},a={add:"+",sub:"-",mul:"*",div:"/",mod:"%",band:"\x26",bor:"|",bxor:"^",lshift:"\x3c\x3c",rshift:"\x3e\x3e",rrshift:"\x3e\x3e\x3e"};(function(){for(var e in a){var f=a[e];I[e]=
q({args:["array","array","array"],body:{args:["a","b","c"],body:"a\x3db"+f+"c"},funcName:e});I[e+"eq"]=q({args:["array","array"],body:{args:["a","b"],body:"a"+f+"\x3db"},rvalue:!0,funcName:e+"eq"});I[e+"s"]=q({args:["array","array","scalar"],body:{args:["a","b","s"],body:"a\x3db"+f+"s"},funcName:e+"s"});I[e+"seq"]=q({args:["array","scalar"],body:{args:["a","s"],body:"a"+f+"\x3ds"},rvalue:!0,funcName:e+"seq"})}})();var h={not:"!",bnot:"~",neg:"-",recip:"1.0/"};(function(){for(var e in h){var f=h[e];
I[e]=q({args:["array","array"],body:{args:["a","b"],body:"a\x3d"+f+"b"},funcName:e});I[e+"eq"]=q({args:["array"],body:{args:["a"],body:"a\x3d"+f+"a"},rvalue:!0,count:2,funcName:e+"eq"})}})();var g={and:"\x26\x26",or:"||",eq:"\x3d\x3d\x3d",neq:"!\x3d\x3d",lt:"\x3c",gt:"\x3e",leq:"\x3c\x3d",geq:"\x3e\x3d"};(function(){for(var e in g){var f=g[e];I[e]=q({args:["array","array","array"],body:{args:["a","b","c"],body:"a\x3db"+f+"c"},funcName:e});I[e+"s"]=q({args:["array","array","scalar"],body:{args:["a",
"b","s"],body:"a\x3db"+f+"s"},funcName:e+"s"});I[e+"eq"]=q({args:["array","array"],body:{args:["a","b"],body:"a\x3da"+f+"b"},rvalue:!0,count:2,funcName:e+"eq"});I[e+"seq"]=q({args:["array","scalar"],body:{args:["a","s"],body:"a\x3da"+f+"s"},rvalue:!0,count:2,funcName:e+"seq"})}})();var n="abs acos asin atan ceil cos exp floor log round sin sqrt tan".split(" ");(function(){for(var e=0;e<n.length;++e){var f=n[e];I[f]=q({args:["array","array"],pre:{args:[],body:"this_f\x3dMath."+f,thisVars:["this_f"]},
body:{args:["a","b"],body:"a\x3dthis_f(b)",thisVars:["this_f"]},funcName:f});I[f+"eq"]=q({args:["array"],pre:{args:[],body:"this_f\x3dMath."+f,thisVars:["this_f"]},body:{args:["a"],body:"a\x3dthis_f(a)",thisVars:["this_f"]},rvalue:!0,count:2,funcName:f+"eq"})}})();var p=["max","min","atan2","pow"];(function(){for(var e=0;e<p.length;++e){var f=p[e];I[f]=q({args:["array","array","array"],pre:{args:[],body:"this_f\x3dMath."+f,thisVars:["this_f"]},body:{args:["a","b","c"],body:"a\x3dthis_f(b,c)",thisVars:["this_f"]},
funcName:f});I[f+"s"]=q({args:["array","array","scalar"],pre:{args:[],body:"this_f\x3dMath."+f,thisVars:["this_f"]},body:{args:["a","b","c"],body:"a\x3dthis_f(b,c)",thisVars:["this_f"]},funcName:f+"s"});I[f+"eq"]=q({args:["array","array"],pre:{args:[],body:"this_f\x3dMath."+f,thisVars:["this_f"]},body:{args:["a","b"],body:"a\x3dthis_f(a,b)",thisVars:["this_f"]},rvalue:!0,count:2,funcName:f+"eq"});I[f+"seq"]=q({args:["array","scalar"],pre:{args:[],body:"this_f\x3dMath."+f,thisVars:["this_f"]},body:{args:["a",
"b"],body:"a\x3dthis_f(a,b)",thisVars:["this_f"]},rvalue:!0,count:2,funcName:f+"seq"})}})();var d=["atan2","pow"];(function(){for(var e=0;e<d.length;++e){var f=d[e];I[f+"op"]=q({args:["array","array","array"],pre:{args:[],body:"this_f\x3dMath."+f,thisVars:["this_f"]},body:{args:["a","b","c"],body:"a\x3dthis_f(c,b)",thisVars:["this_f"]},funcName:f+"op"});I[f+"ops"]=q({args:["array","array","scalar"],pre:{args:[],body:"this_f\x3dMath."+f,thisVars:["this_f"]},body:{args:["a","b","c"],body:"a\x3dthis_f(c,b)",
thisVars:["this_f"]},funcName:f+"ops"});I[f+"opeq"]=q({args:["array","array"],pre:{args:[],body:"this_f\x3dMath."+f,thisVars:["this_f"]},body:{args:["a","b"],body:"a\x3dthis_f(b,a)",thisVars:["this_f"]},rvalue:!0,count:2,funcName:f+"opeq"});I[f+"opseq"]=q({args:["array","scalar"],pre:{args:[],body:"this_f\x3dMath."+f,thisVars:["this_f"]},body:{args:["a","b"],body:"a\x3dthis_f(b,a)",thisVars:["this_f"]},rvalue:!0,count:2,funcName:f+"opseq"})}})();I.any=m({args:["array"],pre:l,body:{args:[{name:"a",
lvalue:!1,rvalue:!0,count:1}],body:"if(a){return true}",localVars:[],thisVars:[]},post:{args:[],localVars:[],thisVars:[],body:"return false"},funcName:"any"});I.all=m({args:["array"],pre:l,body:{args:[{name:"x",lvalue:!1,rvalue:!0,count:1}],body:"if(!x){return false}",localVars:[],thisVars:[]},post:{args:[],localVars:[],thisVars:[],body:"return true"},funcName:"all"});I.sum=m({args:["array"],pre:{args:[],localVars:[],thisVars:["this_s"],body:"this_s\x3d0"},body:{args:[{name:"a",lvalue:!1,rvalue:!0,
count:1}],body:"this_s+\x3da",localVars:[],thisVars:["this_s"]},post:{args:[],localVars:[],thisVars:["this_s"],body:"return this_s"},funcName:"sum"});I.prod=m({args:["array"],pre:{args:[],localVars:[],thisVars:["this_s"],body:"this_s\x3d1"},body:{args:[{name:"a",lvalue:!1,rvalue:!0,count:1}],body:"this_s*\x3da",localVars:[],thisVars:["this_s"]},post:{args:[],localVars:[],thisVars:["this_s"],body:"return this_s"},funcName:"prod"});I.norm2squared=m({args:["array"],pre:{args:[],localVars:[],thisVars:["this_s"],
body:"this_s\x3d0"},body:{args:[{name:"a",lvalue:!1,rvalue:!0,count:2}],body:"this_s+\x3da*a",localVars:[],thisVars:["this_s"]},post:{args:[],localVars:[],thisVars:["this_s"],body:"return this_s"},funcName:"norm2squared"});I.norm2=m({args:["array"],pre:{args:[],localVars:[],thisVars:["this_s"],body:"this_s\x3d0"},body:{args:[{name:"a",lvalue:!1,rvalue:!0,count:2}],body:"this_s+\x3da*a",localVars:[],thisVars:["this_s"]},post:{args:[],localVars:[],thisVars:["this_s"],body:"return Math.sqrt(this_s)"},
funcName:"norm2"});I.norminf=m({args:["array"],pre:{args:[],localVars:[],thisVars:["this_s"],body:"this_s\x3d0"},body:{args:[{name:"a",lvalue:!1,rvalue:!0,count:4}],body:"if(-a\x3ethis_s){this_s\x3d-a}else if(a\x3ethis_s){this_s\x3da}",localVars:[],thisVars:["this_s"]},post:{args:[],localVars:[],thisVars:["this_s"],body:"return this_s"},funcName:"norminf"});I.norm1=m({args:["array"],pre:{args:[],localVars:[],thisVars:["this_s"],body:"this_s\x3d0"},body:{args:[{name:"a",lvalue:!1,rvalue:!0,count:3}],
body:"this_s+\x3da\x3c0?-a:a",localVars:[],thisVars:["this_s"]},post:{args:[],localVars:[],thisVars:["this_s"],body:"return this_s"},funcName:"norm1"});I.sup=m({args:["array"],pre:{body:"this_h\x3d-Infinity",args:[],thisVars:["this_h"],localVars:[]},body:{body:"if(_inline_1_arg0_\x3ethis_h)this_h\x3d_inline_1_arg0_",args:[{name:"_inline_1_arg0_",lvalue:!1,rvalue:!0,count:2}],thisVars:["this_h"],localVars:[]},post:{body:"return this_h",args:[],thisVars:["this_h"],localVars:[]}});I.inf=m({args:["array"],
pre:{body:"this_h\x3dInfinity",args:[],thisVars:["this_h"],localVars:[]},body:{body:"if(_inline_1_arg0_\x3cthis_h)this_h\x3d_inline_1_arg0_",args:[{name:"_inline_1_arg0_",lvalue:!1,rvalue:!0,count:2}],thisVars:["this_h"],localVars:[]},post:{body:"return this_h",args:[],thisVars:["this_h"],localVars:[]}});I.argmin=m({args:["index","array","shape"],pre:{body:"{this_v\x3dInfinity;this_i\x3d_inline_0_arg2_.slice(0)}",args:[{name:"_inline_0_arg0_",lvalue:!1,rvalue:!1,count:0},{name:"_inline_0_arg1_",lvalue:!1,
rvalue:!1,count:0},{name:"_inline_0_arg2_",lvalue:!1,rvalue:!0,count:1}],thisVars:["this_i","this_v"],localVars:[]},body:{body:"{if(_inline_1_arg1_\x3cthis_v){this_v\x3d_inline_1_arg1_;for(var _inline_1_k\x3d0;_inline_1_k\x3c_inline_1_arg0_.length;++_inline_1_k){this_i[_inline_1_k]\x3d_inline_1_arg0_[_inline_1_k]}}}",args:[{name:"_inline_1_arg0_",lvalue:!1,rvalue:!0,count:2},{name:"_inline_1_arg1_",lvalue:!1,rvalue:!0,count:2}],thisVars:["this_i","this_v"],localVars:["_inline_1_k"]},post:{body:"{return this_i}",
args:[],thisVars:["this_i"],localVars:[]}});I.argmax=m({args:["index","array","shape"],pre:{body:"{this_v\x3d-Infinity;this_i\x3d_inline_0_arg2_.slice(0)}",args:[{name:"_inline_0_arg0_",lvalue:!1,rvalue:!1,count:0},{name:"_inline_0_arg1_",lvalue:!1,rvalue:!1,count:0},{name:"_inline_0_arg2_",lvalue:!1,rvalue:!0,count:1}],thisVars:["this_i","this_v"],localVars:[]},body:{body:"{if(_inline_1_arg1_\x3ethis_v){this_v\x3d_inline_1_arg1_;for(var _inline_1_k\x3d0;_inline_1_k\x3c_inline_1_arg0_.length;++_inline_1_k){this_i[_inline_1_k]\x3d_inline_1_arg0_[_inline_1_k]}}}",
args:[{name:"_inline_1_arg0_",lvalue:!1,rvalue:!0,count:2},{name:"_inline_1_arg1_",lvalue:!1,rvalue:!0,count:2}],thisVars:["this_i","this_v"],localVars:["_inline_1_k"]},post:{body:"{return this_i}",args:[],thisVars:["this_i"],localVars:[]}});I.random=q({args:["array"],pre:{args:[],body:"this_f\x3dMath.random",thisVars:["this_f"]},body:{args:["a"],body:"a\x3dthis_f()",thisVars:["this_f"]},funcName:"random"});I.assign=q({args:["array","array"],body:{args:["a","b"],body:"a\x3db"},funcName:"assign"});
I.assigns=q({args:["array","scalar"],body:{args:["a","b"],body:"a\x3db"},funcName:"assigns"});I.equals=m({args:["array","array"],pre:l,body:{args:[{name:"x",lvalue:!1,rvalue:!0,count:1},{name:"y",lvalue:!1,rvalue:!0,count:1}],body:"if(x!\x3d\x3dy){return false}",localVars:[],thisVars:[]},post:{args:[],localVars:[],thisVars:[],body:"return true"},funcName:"equals"})},{"cwise-compiler":151}],491:[function(b,N,I){var r=b("ndarray"),q=b("./doConvert.js");N.exports=function(m,l){for(var a=[],h=m,g=1;Array.isArray(h);)a.push(h.length),
g*=h.length,h=h[0];if(0===a.length)return r();l||(l=r(new Float64Array(g),a));q(l,m);return l}},{"./doConvert.js":492,ndarray:495}],492:[function(b,N,I){N.exports=b("cwise-compiler")({args:["array","scalar","index"],pre:{body:"{}",args:[],thisVars:[],localVars:[]},body:{body:"{\nvar _inline_1_v\x3d_inline_1_arg1_,_inline_1_i\nfor(_inline_1_i\x3d0;_inline_1_i\x3c_inline_1_arg2_.length-1;++_inline_1_i) {\n_inline_1_v\x3d_inline_1_v[_inline_1_arg2_[_inline_1_i]]\n}\n_inline_1_arg0_\x3d_inline_1_v[_inline_1_arg2_[_inline_1_arg2_.length-1]]\n}",
args:[{name:"_inline_1_arg0_",lvalue:!0,rvalue:!1,count:1},{name:"_inline_1_arg1_",lvalue:!1,rvalue:!0,count:1},{name:"_inline_1_arg2_",lvalue:!1,rvalue:!0,count:4}],thisVars:[],localVars:["_inline_1_i","_inline_1_v"]},post:{body:"{}",args:[],thisVars:[],localVars:[]},funcName:"convert",blockSize:64})},{"cwise-compiler":151}],493:[function(b,N,I){function r(h){switch(h){case "uint8":return[a.mallocUint8,a.freeUint8];case "uint16":return[a.mallocUint16,a.freeUint16];case "uint32":return[a.mallocUint32,
a.freeUint32];case "int8":return[a.mallocInt8,a.freeInt8];case "int16":return[a.mallocInt16,a.freeInt16];case "int32":return[a.mallocInt32,a.freeInt32];case "float32":return[a.mallocFloat,a.freeFloat];case "float64":return[a.mallocDouble,a.freeDouble];default:return null}}function q(h){for(var g=[],n=0;n<h;++n)g.push("s"+n);for(n=0;n<h;++n)g.push("n"+n);for(n=1;n<h;++n)g.push("d"+n);for(n=1;n<h;++n)g.push("e"+n);for(n=1;n<h;++n)g.push("f"+n);return g}function m(h,g){function n(y){return"generic"===
g?["data.get(",y,")"].join(""):["data[",y,"]"].join("")}function p(y,B){return"generic"===g?["data.set(",y,",",B,")"].join(""):["data[",y,"]\x3d",B].join("")}var d=["'use strict'"],e=["ndarrayInsertionSort",h.join("d"),g].join(""),f=["left","right","data","offset"].concat(q(h.length)),k=r(g),t=["i,j,cptr,ptr\x3dleft*s0+offset"];if(1<h.length){for(var v=[],w=1;w<h.length;++w)t.push("i"+w),v.push("n"+w);k?t.push("scratch\x3dmalloc("+v.join("*")+")"):t.push("scratch\x3dnew Array("+v.join("*")+")");t.push("dptr",
"sptr","a","b")}else t.push("scratch");d.push(["function ",e,"(",f.join(","),"){var ",t.join(",")].join(""),"for(i\x3dleft+1;i\x3c\x3dright;++i){","j\x3di;ptr+\x3ds0","cptr\x3dptr");if(1<h.length){d.push("dptr\x3d0;sptr\x3dptr");for(w=h.length-1;0<=w;--w)f=h[w],0!==f&&d.push(["for(i",f,"\x3d0;i",f,"\x3cn",f,";++i",f,"){"].join(""));d.push("scratch[dptr++]\x3d",n("sptr"));for(w=0;w<h.length;++w)f=h[w],0!==f&&d.push("sptr+\x3dd"+f,"}");d.push("__g:while(j--\x3eleft){","dptr\x3d0","sptr\x3dcptr-s0");
for(w=1;w<h.length;++w)1===w&&d.push("__l:"),d.push(["for(i",w,"\x3d0;i",w,"\x3cn",w,";++i",w,"){"].join(""));d.push(["a\x3d",n("sptr"),"\nb\x3dscratch[dptr]\nif(a\x3cb){break __g}\nif(a\x3eb){break __l}"].join(""));for(w=h.length-1;1<=w;--w)d.push("sptr+\x3de"+w,"dptr+\x3df"+w,"}");d.push("dptr\x3dcptr;sptr\x3dcptr-s0");for(w=h.length-1;0<=w;--w)f=h[w],0!==f&&d.push(["for(i",f,"\x3d0;i",f,"\x3cn",f,";++i",f,"){"].join(""));d.push(p("dptr",n("sptr")));for(w=0;w<h.length;++w)f=h[w],0!==f&&d.push(["dptr+\x3dd",
f,";sptr+\x3dd",f].join(""),"}");d.push("cptr-\x3ds0\n}");d.push("dptr\x3dcptr;sptr\x3d0");for(w=h.length-1;0<=w;--w)f=h[w],0!==f&&d.push(["for(i",f,"\x3d0;i",f,"\x3cn",f,";++i",f,"){"].join(""));d.push(p("dptr","scratch[sptr++]"));for(w=0;w<h.length;++w)f=h[w],0!==f&&d.push("dptr+\x3dd"+f,"}")}else d.push("scratch\x3d"+n("ptr"),"while((j--\x3eleft)\x26\x26("+n("cptr-s0")+"\x3escratch)){",p("cptr",n("cptr-s0")),"cptr-\x3ds0","}",p("cptr","scratch"));d.push("}");1<h.length&&k&&d.push("free(scratch)");
d.push("} return "+e);if(k)return h=new Function("malloc","free",d.join("\n")),h(k[0],k[1]);h=new Function(d.join("\n"));return h()}function l(h,g,n){function p(M){return["(offset+",M,"*s0)"].join("")}function d(M){return"generic"===g?["data.get(",M,")"].join(""):["data[",M,"]"].join("")}function e(M,P){return"generic"===g?["data.set(",M,",",P,")"].join(""):["data[",M,"]\x3d",P].join("")}function f(M,P,T){if(1===M.length)D.push("ptr0\x3d"+p(M[0]));else for(var O=0;O<M.length;++O)D.push(["b_ptr",O,
"\x3ds0*",M[O]].join(""));P&&D.push("pivot_ptr\x3d0");D.push("ptr_shift\x3doffset");for(O=h.length-1;0<=O;--O){var U=h[O];0!==U&&D.push(["for(i",U,"\x3d0;i",U,"\x3cn",U,";++i",U,"){"].join(""))}if(1<M.length)for(O=0;O<M.length;++O)D.push(["ptr",O,"\x3db_ptr",O,"+ptr_shift"].join(""));D.push(T);P&&D.push("++pivot_ptr");for(O=0;O<h.length;++O)U=h[O],0!==U&&(1<M.length?D.push("ptr_shift+\x3dd"+U):D.push("ptr0+\x3dd"+U),D.push("}"))}function k(M,P,T,O){if(1===P.length)D.push("ptr0\x3d"+p(P[0]));else{for(var U=
0;U<P.length;++U)D.push(["b_ptr",U,"\x3ds0*",P[U]].join(""));D.push("ptr_shift\x3doffset")}T&&D.push("pivot_ptr\x3d0");M&&D.push(M+":");for(U=1;U<h.length;++U)D.push(["for(i",U,"\x3d0;i",U,"\x3cn",U,";++i",U,"){"].join(""));if(1<P.length)for(U=0;U<P.length;++U)D.push(["ptr",U,"\x3db_ptr",U,"+ptr_shift"].join(""));D.push(O);for(U=h.length-1;1<=U;--U)T&&D.push("pivot_ptr+\x3df"+U),1<P.length?D.push("ptr_shift+\x3de"+U):D.push("ptr0+\x3de"+U),D.push("}")}function t(){1<h.length&&L&&D.push("free(pivot1)",
"free(pivot2)")}function v(M,P){M="el"+M;P="el"+P;if(1<h.length){var T="__l"+ ++K;k(T,[M,P],!1,["comp\x3d",d("ptr0"),"-",d("ptr1"),"\nif(comp\x3e0){tmp0\x3d",M,";",M,"\x3d",P,";",P,"\x3dtmp0;break ",T,"}\nif(comp\x3c0){break ",T,"}"].join(""))}else D.push(["if(",d(p(M)),"\x3e",d(p(P)),"){tmp0\x3d",M,";",M,"\x3d",P,";",P,"\x3dtmp0}"].join(""))}function w(M,P){1<h.length?f([M,P],!1,e("ptr0",d("ptr1"))):D.push(e(p(M),d(p(P))))}function y(M,P,T){if(1<h.length){var O="__l"+ ++K;k(O,[P],!0,[M,"\x3d",d("ptr0"),
"-pivot",T,"[pivot_ptr]\nif(",M,"!\x3d\x3d0){break ",O,"}"].join(""))}else D.push([M,"\x3d",d(p(P)),"-pivot",T].join(""))}function B(M,P){1<h.length?f([M,P],!1,["tmp\x3d",d("ptr0"),"\n",e("ptr0",d("ptr1")),"\n",e("ptr1","tmp")].join("")):D.push(["ptr0\x3d",p(M),"\nptr1\x3d",p(P),"\ntmp\x3d",d("ptr0"),"\n",e("ptr0",d("ptr1")),"\n",e("ptr1","tmp")].join(""))}function A(M,P,T){1<h.length?(f([M,P,T],!1,["tmp\x3d",d("ptr0"),"\n",e("ptr0",d("ptr1")),"\n",e("ptr1",d("ptr2")),"\n",e("ptr2","tmp")].join("")),
D.push("++"+P,"--"+T)):D.push(["ptr0\x3d",p(M),"\nptr1\x3d",p(P),"\nptr2\x3d",p(T),"\n++",P,"\n--",T,"\ntmp\x3d",d("ptr0"),"\n",e("ptr0",d("ptr1")),"\n",e("ptr1",d("ptr2")),"\n",e("ptr2","tmp")].join(""))}function z(M,P){B(M,P);D.push("--"+P)}function E(M,P,T){1<h.length?f([M,P],!0,[e("ptr0",d("ptr1")),"\n",e("ptr1",["pivot",T,"[pivot_ptr]"].join(""))].join("")):D.push(e(p(M),d(p(P))),e(p(P),"pivot"+T))}function C(M,P){D.push(["if((",P,"-",M,")\x3c\x3d32){\ninsertionSort(",M,",",P,",data,offset,",
q(h.length).join(","),")\n}else{\n",G,"(",M,",",P,",data,offset,",q(h.length).join(","),")\n}"].join(""))}function u(M,P,T){1<h.length?(D.push(["__l",++K,":while(true){"].join("")),f([M],!0,["if(",d("ptr0"),"!\x3d\x3dpivot",P,"[pivot_ptr]){break __l",K,"}"].join("")),D.push(T,"}")):D.push(["while(",d(p(M)),"\x3d\x3d\x3dpivot",P,"){",T,"}"].join(""))}var D=["'use strict'"],G=["ndarrayQuickSort",h.join("d"),g].join(""),J=["left","right","data","offset"].concat(q(h.length)),L=r(g),K=0;D.push(["function ",
G,"(",J.join(","),"){"].join(""));J="sixth\x3d((right-left+1)/6)|0 index1\x3dleft+sixth index5\x3dright-sixth index3\x3d(left+right)\x3e\x3e1 index2\x3dindex3-sixth index4\x3dindex3+sixth el1\x3dindex1 el2\x3dindex2 el3\x3dindex3 el4\x3dindex4 el5\x3dindex5 less\x3dleft+1 great\x3dright-1 pivots_are_equal\x3dtrue tmp tmp0 x y z k ptr0 ptr1 ptr2 comp_pivot1\x3d0 comp_pivot2\x3d0 comp\x3d0".split(" ");if(1<h.length){for(var H=[],Q=1;Q<h.length;++Q)H.push("n"+Q),J.push("i"+Q);for(Q=0;8>Q;++Q)J.push("b_ptr"+
Q);J.push("ptr3","ptr4","ptr5","ptr6","ptr7","pivot_ptr","ptr_shift","elementSize\x3d"+H.join("*"));L?J.push("pivot1\x3dmalloc(elementSize)","pivot2\x3dmalloc(elementSize)"):J.push("pivot1\x3dnew Array(elementSize),pivot2\x3dnew Array(elementSize)")}else J.push("pivot1","pivot2");D.push("var "+J.join(","));v(1,2);v(4,5);v(1,3);v(2,3);v(1,4);v(3,4);v(2,5);v(2,3);v(4,5);1<h.length?f("el1 el2 el3 el4 el5 index1 index3 index5".split(" "),!0,["pivot1[pivot_ptr]\x3d",d("ptr1"),"\npivot2[pivot_ptr]\x3d",
d("ptr3"),"\npivots_are_equal\x3dpivots_are_equal\x26\x26(pivot1[pivot_ptr]\x3d\x3d\x3dpivot2[pivot_ptr])\nx\x3d",d("ptr0"),"\ny\x3d",d("ptr2"),"\nz\x3d",d("ptr4"),"\n",e("ptr5","x"),"\n",e("ptr6","y"),"\n",e("ptr7","z")].join("")):D.push(["pivot1\x3d",d(p("el2")),"\npivot2\x3d",d(p("el4")),"\npivots_are_equal\x3dpivot1\x3d\x3d\x3dpivot2\nx\x3d",d(p("el1")),"\ny\x3d",d(p("el3")),"\nz\x3d",d(p("el5")),"\n",e(p("index1"),"x"),"\n",e(p("index3"),"y"),"\n",e(p("index5"),"z")].join(""));w("index2","left");
w("index4","right");D.push("if(pivots_are_equal){");D.push("for(k\x3dless;k\x3c\x3dgreat;++k){");y("comp","k",1);D.push("if(comp\x3d\x3d\x3d0){continue}");D.push("if(comp\x3c0){");D.push("if(k!\x3d\x3dless){");B("k","less");D.push("}");D.push("++less");D.push("}else{");D.push("while(true){");y("comp","great",1);D.push("if(comp\x3e0){");D.push("great--");D.push("}else if(comp\x3c0){");A("k","less","great");D.push("break");D.push("}else{");z("k","great");D.push("break");D.push("}");D.push("}");D.push("}");
D.push("}");D.push("}else{");D.push("for(k\x3dless;k\x3c\x3dgreat;++k){");y("comp_pivot1","k",1);D.push("if(comp_pivot1\x3c0){");D.push("if(k!\x3d\x3dless){");B("k","less");D.push("}");D.push("++less");D.push("}else{");y("comp_pivot2","k",2);D.push("if(comp_pivot2\x3e0){");D.push("while(true){");y("comp","great",2);D.push("if(comp\x3e0){");D.push("if(--great\x3ck){break}");D.push("continue");D.push("}else{");y("comp","great",1);D.push("if(comp\x3c0){");A("k","less","great");D.push("}else{");z("k",
"great");D.push("}");D.push("break");D.push("}");D.push("}");D.push("}");D.push("}");D.push("}");D.push("}");E("left","(less-1)",1);E("right","(great+1)",2);C("left","(less-2)");C("(great+2)","right");D.push("if(pivots_are_equal){");t();D.push("return");D.push("}");D.push("if(less\x3cindex1\x26\x26great\x3eindex5){");u("less",1,"++less");u("great",2,"--great");D.push("for(k\x3dless;k\x3c\x3dgreat;++k){");y("comp_pivot1","k",1);D.push("if(comp_pivot1\x3d\x3d\x3d0){");D.push("if(k!\x3d\x3dless){");
B("k","less");D.push("}");D.push("++less");D.push("}else{");y("comp_pivot2","k",2);D.push("if(comp_pivot2\x3d\x3d\x3d0){");D.push("while(true){");y("comp","great",2);D.push("if(comp\x3d\x3d\x3d0){");D.push("if(--great\x3ck){break}");D.push("continue");D.push("}else{");y("comp","great",1);D.push("if(comp\x3c0){");A("k","less","great");D.push("}else{");z("k","great");D.push("}");D.push("break");D.push("}");D.push("}");D.push("}");D.push("}");D.push("}");D.push("}");t();C("less","great");D.push("}return "+
G);if(1<h.length&&L)return J=new Function("insertionSort","malloc","free",D.join("\n")),J(n,L[0],L[1]);J=new Function("insertionSort",D.join("\n"));return J(n)}var a=b("typedarray-pool");N.exports=function(h,g){var n=["'use strict'"],p=["ndarraySortWrapper",h.join("d"),g].join("");n.push(["function ",p,"(array){"].join(""));for(var d=["data\x3darray.data,offset\x3darray.offset|0,shape\x3darray.shape,stride\x3darray.stride"],e=0;e<h.length;++e)d.push(["s",e,"\x3dstride[",e,"]|0,n",e,"\x3dshape[",e,
"]|0"].join(""));var f=Array(h.length),k=[];for(e=0;e<h.length;++e){var t=h[e];0!==t&&(f[t]=0===k.length?"1":k.join("*"),k.push("n"+t))}var v=k=-1;for(e=0;e<h.length;++e)t=h[e],0!==t&&(0<k?d.push(["d",t,"\x3ds",t,"-d",k,"*n",k].join("")):d.push(["d",t,"\x3ds",t].join("")),k=t),t=h.length-1-e,0!==t&&(0<v?d.push(["e",t,"\x3ds",t,"-e",v,"*n",v,",f",t,"\x3d",f[t],"-f",v,"*n",v].join("")):d.push(["e",t,"\x3ds",t,",f",t,"\x3d",f[t]].join("")),v=t);n.push("var "+d.join(","));d=["0","n0-1","data","offset"].concat(q(h.length));
n.push(["if(n0\x3c\x3d32){insertionSort(",d.join(","),")}else{quickSort(",d.join(","),")}"].join(""));n.push("}return "+p);n=new Function("insertionSort","quickSort",n.join("\n"));p=m(h,g);h=l(h,g,p);return n(p,h)}},{"typedarray-pool":595}],494:[function(b,N,I){var r=b("./lib/compile_sort.js"),q={};N.exports=function(m){var l=m.order,a=m.dtype,h=[l,a].join(":"),g=q[h];g||(q[h]=g=r(l,a));g(m);return m}},{"./lib/compile_sort.js":493}],495:[function(b,N,I){function r(p,d){return p[0]-d[0]}function q(){var p=
this.stride,d=Array(p.length),e;for(e=0;e<d.length;++e)d[e]=[Math.abs(p[e]),e];d.sort(r);p=Array(d.length);for(e=0;e<p.length;++e)p[e]=d[e][1];return p}function m(p,d){var e=["View",d,"d",p].join("");0>d&&(e="View_Nil"+p);var f="generic"===p;if(-1===d)return d=new Function("function "+e+"(a){this.data\x3da;};var proto\x3d"+e+".prototype;proto.dtype\x3d'"+p+"';proto.index\x3dfunction(){return -1};proto.size\x3d0;proto.dimension\x3d-1;proto.shape\x3dproto.stride\x3dproto.order\x3d[];proto.lo\x3dproto.hi\x3dproto.transpose\x3dproto.step\x3dfunction(){return new "+
e+"(this.data);};proto.get\x3dproto.set\x3dfunction(){};proto.pick\x3dfunction(){return null};return function construct_"+e+"(a){return new "+e+"(a);}"),d();if(0===d)return d=new Function("TrivialArray","function "+e+"(a,d) {this.data \x3d a;this.offset \x3d d};var proto\x3d"+e+".prototype;proto.dtype\x3d'"+p+"';proto.index\x3dfunction(){return this.offset};proto.dimension\x3d0;proto.size\x3d1;proto.shape\x3dproto.stride\x3dproto.order\x3d[];proto.lo\x3dproto.hi\x3dproto.transpose\x3dproto.step\x3dfunction "+
e+"_copy() {return new "+e+"(this.data,this.offset)};proto.pick\x3dfunction "+e+"_pick(){return TrivialArray(this.data);};proto.valueOf\x3dproto.get\x3dfunction "+e+"_get(){return "+(f?"this.data.get(this.offset)":"this.data[this.offset]")+"};proto.set\x3dfunction "+e+"_set(v){return "+(f?"this.data.set(this.offset,v)":"this.data[this.offset]\x3dv")+"};return function construct_"+e+"(a,b,c,d){return new "+e+"(a,d)}"),d(n[p][0]);var k=["'use strict'"];var t=a(d),v=t.map(function(A){return"i"+A}),w=
"this.offset+"+t.map(function(A){return"this.stride["+A+"]*i"+A}).join("+"),y=t.map(function(A){return"b"+A}).join(","),B=t.map(function(A){return"c"+A}).join(",");k.push("function "+e+"(a,"+y+","+B+",d){this.data\x3da","this.shape\x3d["+y+"]","this.stride\x3d["+B+"]","this.offset\x3dd|0}","var proto\x3d"+e+".prototype","proto.dtype\x3d'"+p+"'","proto.dimension\x3d"+d);k.push("Object.defineProperty(proto,'size',{get:function "+e+"_size(){return "+t.map(function(A){return"this.shape["+A+"]"}).join("*"),
"}})");1===d?k.push("proto.order\x3d[0]"):(k.push("Object.defineProperty(proto,'order',{get:"),4>d?(k.push("function "+e+"_order(){"),2===d?k.push("return (Math.abs(this.stride[0])\x3eMath.abs(this.stride[1]))?[1,0]:[0,1]}})"):3===d&&k.push("var s0\x3dMath.abs(this.stride[0]),s1\x3dMath.abs(this.stride[1]),s2\x3dMath.abs(this.stride[2]);if(s0\x3es1){if(s1\x3es2){return [2,1,0];}else if(s0\x3es2){return [1,2,0];}else{return [1,0,2];}}else if(s0\x3es2){return [2,0,1];}else if(s2\x3es1){return [0,1,2];}else{return [0,2,1];}}})")):
k.push("ORDER})"));k.push("proto.set\x3dfunction "+e+"_set("+v.join(",")+",v){");f?k.push("return this.data.set("+w+",v)}"):k.push("return this.data["+w+"]\x3dv}");k.push("proto.get\x3dfunction "+e+"_get("+v.join(",")+"){");f?k.push("return this.data.get("+w+")}"):k.push("return this.data["+w+"]}");k.push("proto.index\x3dfunction "+e+"_index(",v.join(),"){return "+w+"}");k.push("proto.hi\x3dfunction "+e+"_hi("+v.join(",")+"){return new "+e+"(this.data,"+t.map(function(A){return["(typeof i",A,"!\x3d\x3d'number'||i",
A,"\x3c0)?this.shape[",A,"]:i",A,"|0"].join("")}).join(",")+","+t.map(function(A){return"this.stride["+A+"]"}).join(",")+",this.offset)}");f=t.map(function(A){return"a"+A+"\x3dthis.shape["+A+"]"});w=t.map(function(A){return"c"+A+"\x3dthis.stride["+A+"]"});k.push("proto.lo\x3dfunction "+e+"_lo("+v.join(",")+"){var b\x3dthis.offset,d\x3d0,"+f.join(",")+","+w.join(","));for(f=0;f<d;++f)k.push("if(typeof i"+f+"\x3d\x3d\x3d'number'\x26\x26i"+f+"\x3e\x3d0){d\x3di"+f+"|0;b+\x3dc"+f+"*d;a"+f+"-\x3dd}");k.push("return new "+
e+"(this.data,"+t.map(function(A){return"a"+A}).join(",")+","+t.map(function(A){return"c"+A}).join(",")+",b)}");k.push("proto.step\x3dfunction "+e+"_step("+v.join(",")+"){var "+t.map(function(A){return"a"+A+"\x3dthis.shape["+A+"]"}).join(",")+","+t.map(function(A){return"b"+A+"\x3dthis.stride["+A+"]"}).join(",")+",c\x3dthis.offset,d\x3d0,ceil\x3dMath.ceil");for(f=0;f<d;++f)k.push("if(typeof i"+f+"\x3d\x3d\x3d'number'){d\x3di"+f+"|0;if(d\x3c0){c+\x3db"+f+"*(a"+f+"-1);a"+f+"\x3dceil(-a"+f+"/d)}else{a"+
f+"\x3dceil(a"+f+"/d)}b"+f+"*\x3dd}");k.push("return new "+e+"(this.data,"+t.map(function(A){return"a"+A}).join(",")+","+t.map(function(A){return"b"+A}).join(",")+",c)}");w=Array(d);y=Array(d);for(f=0;f<d;++f)w[f]="a[i"+f+"]",y[f]="b[i"+f+"]";k.push("proto.transpose\x3dfunction "+e+"_transpose("+v+"){"+v.map(function(A,z){return A+"\x3d("+A+"\x3d\x3d\x3dundefined?"+z+":"+A+"|0)"}).join(";"),"var a\x3dthis.shape,b\x3dthis.stride;return new "+e+"(this.data,"+w.join(",")+","+y.join(",")+",this.offset)}");
k.push("proto.pick\x3dfunction "+e+"_pick("+v+"){var a\x3d[],b\x3d[],c\x3dthis.offset");for(f=0;f<d;++f)k.push("if(typeof i"+f+"\x3d\x3d\x3d'number'\x26\x26i"+f+"\x3e\x3d0){c\x3d(c+this.stride["+f+"]*i"+f+")|0}else{a.push(this.shape["+f+"]);b.push(this.stride["+f+"])}");k.push("var ctor\x3dCTOR_LIST[a.length+1];return ctor(this.data,a,b,c)}");k.push("return function construct_"+e+"(data,shape,stride,offset){return new "+e+"(data,"+t.map(function(A){return"shape["+A+"]"}).join(",")+","+t.map(function(A){return"stride["+
A+"]"}).join(",")+",offset)}");d=new Function("CTOR_LIST","ORDER",k.join("\n"));return d(n[p],q)}function l(p){if(h(p))return"buffer";if(g)switch(Object.prototype.toString.call(p)){case "[object Float64Array]":return"float64";case "[object Float32Array]":return"float32";case "[object Int8Array]":return"int8";case "[object Int16Array]":return"int16";case "[object Int32Array]":return"int32";case "[object Uint8Array]":return"uint8";case "[object Uint16Array]":return"uint16";case "[object Uint32Array]":return"uint32";
case "[object Uint8ClampedArray]":return"uint8_clamped";case "[object BigInt64Array]":return"bigint64";case "[object BigUint64Array]":return"biguint64"}return Array.isArray(p)?"array":"generic"}var a=b("iota-array"),h=b("is-buffer"),g="undefined"!==typeof Float64Array,n={float32:[],float64:[],int8:[],int16:[],int32:[],uint8:[],uint16:[],uint32:[],array:[],uint8_clamped:[],bigint64:[],biguint64:[],buffer:[],generic:[]};(function(){for(var p in n)n[p].push(m(p,-1))});N.exports=function(p,d,e,f){if(void 0===
p){var k=n.array[0];return k([])}"number"===typeof p&&(p=[p]);void 0===d&&(d=[p.length]);k=d.length;if(void 0===e){e=Array(k);for(var t=k-1,v=1;0<=t;--t)e[t]=v,v*=d[t]}if(void 0===f)for(t=f=0;t<k;++t)0>e[t]&&(f-=(d[t]-1)*e[t]);t=l(p);for(v=n[t];v.length<=k+1;)v.push(m(t,v.length-1));k=v[k+1];return k(p,d,e,f)}},{"iota-array":463,"is-buffer":465}],496:[function(b,N,I){var r=b("double-bits"),q=Math.pow(2,-1074);N.exports=function(m,l){if(isNaN(m)||isNaN(l))return NaN;if(m===l)return m;if(0===m)return 0>
l?-q:q;var a=r.hi(m),h=r.lo(m);l>m===0<m?4294967295===h?(a+=1,h=0):h+=1:0===h?(h=4294967295,--a):--h;return r.pack(h,a)}},{"double-bits":173}],497:[function(b,N,I){function r(g,n,p,d){return["C",g,n,p,d,p,d]}function q(g,n,p,d,e,f){return["C",g/3+2/3*p,n/3+2/3*d,e/3+2/3*p,f/3+2/3*d,e,f]}function m(g,n,p,d,e,f,k,t,v,w){if(w)z=w[0],f=w[1],B=w[2],A=w[3];else{z=l(g,n,-e);g=z.x;n=z.y;z=l(t,v,-e);t=z.x;v=z.y;z=(g-t)/2;B=(n-v)/2;A=z*z/(p*p)+B*B/(d*d);1<A&&(A=Math.sqrt(A),p*=A,d*=A);A=p*p;var y=d*d;f=(f==
k?-1:1)*Math.sqrt(Math.abs((A*y-A*B*B-y*z*z)/(A*B*B+y*z*z)));Infinity==f&&(f=1);var B=f*p*B/d+(g+t)/2,A=f*-d*z/p+(n+v)/2,z=Math.asin(((n-A)/d).toFixed(9));f=Math.asin(((v-A)/d).toFixed(9));z=g<B?a-z:z;f=t<B?a-f:f;0>z&&(z=2*a+z);0>f&&(f=2*a+f);k&&z>f&&(z-=2*a);!k&&f>z&&(f-=2*a)}if(Math.abs(f-z)>h){var E=f;y=t;var C=v;f=z+h*(k&&f>z?1:-1);t=B+p*Math.cos(f);v=A+d*Math.sin(f);E=m(t,v,p,d,e,0,k,y,C,[f,E,B,A])}k=Math.tan((f-z)/4);p=4/3*p*k;d=4/3*d*k;g=[2*g-(g+p*Math.sin(z)),2*n-(n-d*Math.cos(z)),t+p*Math.sin(f),
v-d*Math.cos(f),t,v];if(w)return g;E&&(g=g.concat(E));for(w=0;w<g.length;)n=l(g[w],g[w+1],e),g[w++]=n.x,g[w++]=n.y;return g}function l(g,n,p){return{x:g*Math.cos(p)-n*Math.sin(p),y:g*Math.sin(p)+n*Math.cos(p)}}var a=Math.PI,h=a/180*120;N.exports=function(g){for(var n,p=[],d=0,e=0,f=0,k=0,t=null,v=null,w=0,y=0,B=0,A=g.length;B<A;B++){var z=g[B],E=z[0];switch(E){case "M":f=z[1];k=z[2];break;case "A":z=m(w,y,z[1],z[2],a/180*z[3],z[4],z[5],z[6],z[7]);z.unshift("C");7<z.length&&(p.push(z.splice(0,7)),
z.unshift("C"));break;case "S":if("C"==n||"S"==n)w+=w-d,y+=y-e;z=["C",w,y,z[1],z[2],z[3],z[4]];break;case "T":"Q"==n||"T"==n?(t=2*w-t,v=2*y-v):(t=w,v=y);z=q(w,y,t,v,z[1],z[2]);break;case "Q":t=z[1];v=z[2];z=q(w,y,z[1],z[2],z[3],z[4]);break;case "L":z=r(w,y,z[1],z[2]);break;case "H":z=r(w,y,z[1],y);break;case "V":z=r(w,y,w,z[1]);break;case "Z":z=r(w,y,f,k)}n=E;w=z[z.length-2];y=z[z.length-1];4<z.length?(d=z[z.length-4],e=z[z.length-3]):(d=w,e=y);p.push(z)}return p}},{}],498:[function(b,N,I){I.vertexNormals=
function(r,q,m){var l=q.length,a=Array(l);m=void 0===m?1E-6:m;for(var h=0;h<l;++h)a[h]=[0,0,0];for(h=0;h<r.length;++h)for(var g=r[h],n,p=g[g.length-1],d=g[0],e=0;e<g.length;++e){n=p;p=d;d=g[(e+1)%g.length];var f=q[n],k=q[p],t=q[d],v=Array(3),w=0,y=Array(3),B=0;for(n=0;3>n;++n)v[n]=f[n]-k[n],w+=v[n]*v[n],y[n]=t[n]-k[n],B+=y[n]*y[n];if(w*B>m)for(f=a[p],w=1/Math.sqrt(w*B),n=0;3>n;++n)B=(n+1)%3,k=(n+2)%3,f[n]+=w*(y[B]*v[k]-y[k]*v[B])}for(h=0;h<l;++h){f=a[h];for(n=r=0;3>n;++n)r+=f[n]*f[n];if(r>m)for(w=
1/Math.sqrt(r),n=0;3>n;++n)f[n]*=w;else for(n=0;3>n;++n)f[n]=0}return a};I.faceNormals=function(r,q,m){var l=r.length,a=Array(l);m=void 0===m?1E-6:m;for(var h=0;h<l;++h){for(var g=r[h],n=Array(3),p=0;3>p;++p)n[p]=q[g[p]];g=Array(3);var d=Array(3);for(p=0;3>p;++p)g[p]=n[1][p]-n[0][p],d[p]=n[2][p]-n[0][p];n=Array(3);var e=0;for(p=0;3>p;++p){var f=(p+1)%3,k=(p+2)%3;n[p]=g[f]*d[k]-g[k]*d[f];e+=n[p]*n[p]}e=e>m?1/Math.sqrt(e):0;for(p=0;3>p;++p)n[p]*=e;a[h]=n}return a}},{}],499:[function(b,N,I){var r=Object.getOwnPropertySymbols,
q=Object.prototype.hasOwnProperty,m=Object.prototype.propertyIsEnumerable;N.exports=function(){try{if(!Object.assign)return!1;var l=new String("abc");l[5]="de";if("5"===Object.getOwnPropertyNames(l)[0])return!1;var a={};for(l=0;10>l;l++)a["_"+String.fromCharCode(l)]=l;if("0123456789"!==Object.getOwnPropertyNames(a).map(function(g){return a[g]}).join(""))return!1;var h={};"abcdefghijklmnopqrst".split("").forEach(function(g){h[g]=g});return"abcdefghijklmnopqrst"!==Object.keys(Object.assign({},h)).join("")?
!1:!0}catch(g){return!1}}()?Object.assign:function(l,a){if(null===l||void 0===l)throw new TypeError("Object.assign cannot be called with null or undefined");var h=Object(l);for(var g,n=1;n<arguments.length;n++){var p=Object(arguments[n]);for(var d in p)q.call(p,d)&&(h[d]=p[d]);if(r){g=r(p);for(var e=0;e<g.length;e++)m.call(p,g[e])&&(h[g[e]]=p[g[e]])}}return h}},{}],500:[function(b,N,I){N.exports=function(r,q,m,l,a,h,g,n,p,d){var e=q+h+d;if(0<f){var f=Math.sqrt(e+1);r[0]=.5*(g-p)/f;r[1]=.5*(n-l)/f;
r[2]=.5*(m-h)/f;r[3]=.5*f}else d=Math.max(q,h,d),f=Math.sqrt(2*d-e+1),q>=d?(r[0]=.5*f,r[1]=.5*(a+m)/f,r[2]=.5*(n+l)/f,r[3]=.5*(g-p)/f):h>=d?(r[0]=.5*(m+a)/f,r[1]=.5*f,r[2]=.5*(p+g)/f,r[3]=.5*(n-l)/f):(r[0]=.5*(l+n)/f,r[1]=.5*(g+p)/f,r[2]=.5*f,r[3]=.5*(m-a)/f);return r}},{}],501:[function(b,N,I){function r(d,e,f){return Math.sqrt(Math.pow(d,2)+Math.pow(e,2)+Math.pow(f,2))}function q(d,e,f,k){return Math.sqrt(Math.pow(d,2)+Math.pow(e,2)+Math.pow(f,2)+Math.pow(k,2))}function m(d,e){var f=e[0],k=e[1],
t=e[2];e=e[3];var v=q(f,k,t,e);1E-6<v?(d[0]=f/v,d[1]=k/v,d[2]=t/v,d[3]=e/v):(d[0]=d[1]=d[2]=0,d[3]=1)}function l(d,e,f){this.radius=a([f]);this.center=a(e);this.rotation=a(d);this.computedRadius=this.radius.curve(0);this.computedCenter=this.center.curve(0);this.computedRotation=this.rotation.curve(0);this.computedUp=[.1,0,0];this.computedEye=[.1,0,0];this.computedMatrix=[.1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0];this.recalcMatrix(0)}N.exports=function(d){d=d||{};var e=d.center||[0,0,0],f=d.rotation||[0,0,
0,1],k=d.radius||1;e=[].slice.call(e,0,3);f=[].slice.call(f,0,4);m(f,f);e=new l(f,e,Math.log(k));e.setDistanceLimits(d.zoomMin,d.zoomMax);("eye"in d||"up"in d)&&e.lookAt(0,d.eye,d.center,d.up);return e};var a=b("filtered-vector"),h=b("gl-mat4/lookAt"),g=b("gl-mat4/fromQuat"),n=b("gl-mat4/invert"),p=b("./lib/quatFromFrame");b=l.prototype;b.lastT=function(){return Math.max(this.radius.lastT(),this.center.lastT(),this.rotation.lastT())};b.recalcMatrix=function(d){this.radius.curve(d);this.center.curve(d);
this.rotation.curve(d);var e=this.computedRotation;m(e,e);d=this.computedMatrix;g(d,e);var f=this.computedCenter;e=this.computedEye;var k=this.computedUp,t=Math.exp(this.computedRadius[0]);e[0]=f[0]+t*d[2];e[1]=f[1]+t*d[6];e[2]=f[2]+t*d[10];k[0]=d[1];k[1]=d[5];k[2]=d[9];for(f=0;3>f;++f){for(t=k=0;3>t;++t)k+=d[f+4*t]*e[t];d[12+f]=-k}};b.getMatrix=function(d,e){this.recalcMatrix(d);d=this.computedMatrix;if(e){for(var f=0;16>f;++f)e[f]=d[f];return e}return d};b.idle=function(d){this.center.idle(d);this.radius.idle(d);
this.rotation.idle(d)};b.flush=function(d){this.center.flush(d);this.radius.flush(d);this.rotation.flush(d)};b.pan=function(d,e,f,k){e=e||0;f=f||0;k=k||0;this.recalcMatrix(d);var t=this.computedMatrix,v=t[1],w=t[5],y=t[9],B=r(v,w,y);v/=B;w/=B;y/=B;B=t[0];var A=t[4],z=t[8],E=B*v+A*w+z*y;B-=v*E;A-=w*E;z-=y*E;E=r(B,A,z);B/=E;A/=E;z/=E;E=t[2];var C=t[6];t=t[10];var u=E*v+C*w+t*y,D=E*B+C*A+t*z;r(E-(u*v+D*B),C-(u*w+D*A),t-(u*y+D*z));this.center.move(d,B*e+v*f,A*e+w*f,z*e+y*f);e=Math.exp(this.computedRadius[0]);
e=Math.max(1E-4,e+k);this.radius.set(d,Math.log(e))};b.rotate=function(d,e,f,k){this.recalcMatrix(d);e=e||0;f=f||0;var t=this.computedMatrix,v=t[2],w=t[6],y=t[10],B=e*t[0]+f*t[1],A=e*t[4]+f*t[5];t=e*t[8]+f*t[9];f=-(w*t-y*A);t=-(y*B-v*t);B=-(v*A-w*B);A=Math.sqrt(Math.max(0,1-Math.pow(f,2)-Math.pow(t,2)-Math.pow(B,2)));var z=q(f,t,B,A);1E-6<z?(f/=z,t/=z,B/=z,A/=z):(f=t=B=0,A=1);z=this.computedRotation;var E=z[0],C=z[1],u=z[2],D=z[3];z=E*A+D*f+C*B-u*t;var G=C*A+D*t+u*f-E*B,J=u*A+D*B+E*t-C*f;E=D*A-E*
f-C*t-u*B;k&&(f=v,t=w,B=y,k=Math.sin(k)/r(f,t,B),f*=k,t*=k,B*=k,A=Math.cos(e),z=z*A+E*f+G*B-J*t,G=G*A+E*t+J*f-z*B,J=J*A+E*B+z*t-G*f,E=E*A-z*f-G*t-J*B);e=q(z,G,J,E);1E-6<e?(z/=e,G/=e,J/=e,E/=e):(z=G=J=0,E=1);this.rotation.set(d,z,G,J,E)};b.lookAt=function(d,e,f,k){this.recalcMatrix(d);f=f||this.computedCenter;e=e||this.computedEye;k=k||this.computedUp;var t=this.computedMatrix;h(t,e,f,k);k=this.computedRotation;p(k,t[0],t[1],t[2],t[4],t[5],t[6],t[8],t[9],t[10]);m(k,k);this.rotation.set(d,k[0],k[1],
k[2],k[3]);for(k=t=0;3>k;++k)t+=Math.pow(f[k]-e[k],2);this.radius.set(d,.5*Math.log(Math.max(t,1E-6)));this.center.set(d,f[0],f[1],f[2])};b.translate=function(d,e,f,k){this.center.move(d,e||0,f||0,k||0)};b.setMatrix=function(d,e){var f=this.computedRotation;p(f,e[0],e[1],e[2],e[4],e[5],e[6],e[8],e[9],e[10]);m(f,f);this.rotation.set(d,f[0],f[1],f[2],f[3]);f=this.computedMatrix;n(f,e);var k=f[15];if(1E-6<Math.abs(k)){e=f[12]/k;var t=f[13]/k;k=f[14]/k;this.recalcMatrix(d);var v=Math.exp(this.computedRadius[0]);
this.center.set(d,e-f[2]*v,t-f[6]*v,k-f[10]*v)}else this.center.idle(d);this.radius.idle(d)};b.setDistance=function(d,e){0<e&&this.radius.set(d,Math.log(e))};b.setDistanceLimits=function(d,e){d=0<d?Math.log(d):-Infinity;e=0<e?Math.log(e):Infinity;e=Math.max(e,d);this.radius.bounds[0][0]=d;this.radius.bounds[1][0]=e};b.getDistanceLimits=function(d){var e=this.radius.bounds;return d?(d[0]=Math.exp(e[0][0]),d[1]=Math.exp(e[1][0]),d):[Math.exp(e[0][0]),Math.exp(e[1][0])]};b.toJSON=function(){this.recalcMatrix(this.lastT());
return{center:this.computedCenter.slice(),rotation:this.computedRotation.slice(),distance:Math.log(this.computedRadius[0]),zoomMin:this.radius.bounds[0][0],zoomMax:this.radius.bounds[1][0]}};b.fromJSON=function(d){var e=this.lastT(),f=d.center;f&&this.center.set(e,f[0],f[1],f[2]);(f=d.rotation)&&this.rotation.set(e,f[0],f[1],f[2],f[3]);(f=d.distance)&&0<f&&this.radius.set(e,Math.log(f));this.setDistanceLimits(d.zoomMin,d.zoomMax)}},{"./lib/quatFromFrame":500,"filtered-vector":242,"gl-mat4/fromQuat":282,
"gl-mat4/invert":293,"gl-mat4/lookAt":294}],502:[function(b,N,I){var r=b("repeat-string");N.exports=function(q,m,l){return r("undefined"!==typeof l?l+"":" ",m)+q}},{"repeat-string":541}],503:[function(b,N,I){function r(l,a){function h(d,e,f){f=[];for(var k,t=0;k=p.exec(d);){if(1E4<t++)throw Error("Circular references in parenthesis");f.push(d.slice(0,k.index));f.push(h(e[k[1]],e));d=d.slice(k.index+k[0].length)}f.push(d);return f}if("string"!==typeof l)return[l];var g=[l];"string"===typeof a||Array.isArray(a)?
a={brackets:a}:a||(a={});l=a.brackets?Array.isArray(a.brackets)?a.brackets:[a.brackets]:["{}","[]","()"];var n=a.escape||"___";a=!!a.flat;l.forEach(function(d){function e(t,v,w){t=g.push(t.slice(d[0].length,-d[1].length))-1;k.push(t);return n+t+n}var f=new RegExp(["\\",d[0],"[^\\",d[0],"\\",d[1],"]*\\",d[1]].join("")),k=[];g.forEach(function(t,v){for(var w,y=0;t!=w;)if(w=t,t=t.replace(f,e),1E4<y++)throw Error("References have circular dependency. Please, check them.");g[v]=t});k=k.reverse();g=g.map(function(t){k.forEach(function(v){t=
t.replace(new RegExp("(\\"+n+v+"\\"+n+")","g"),d[0]+"$1"+d[1])});return t})});var p=new RegExp("\\"+n+"([0-9]+)\\"+n);return a?g:h(g[0],g)}function q(l,a){function h(d,e){if(null==l[e])throw Error("Reference "+e+"is undefined");return l[e]}if(a&&a.flat){var g=a&&a.escape||"___";a=l[0];if(!a)return"";g=new RegExp("\\"+g+"([0-9]+)\\"+g);for(var n=0;a!=p;){if(1E4<n++)throw Error("Circular references in "+l);var p=a;a=a.replace(g,h)}return a}return l.reduce(function k(e,f){Array.isArray(f)&&(f=f.reduce(k,
""));return e+f},"")}function m(l,a){return Array.isArray(l)?q(l,a):r(l,a)}m.parse=r;m.stringify=q;N.exports=m},{}],504:[function(b,N,I){var r=b("pick-by-alias");N.exports=function(q){1<arguments.length&&(q=arguments);"string"===typeof q?q=q.split(/\s/).map(parseFloat):"number"===typeof q&&(q=[q]);if(q.length&&"number"===typeof q[0])var m=1===q.length?{width:q[0],height:q[0],x:0,y:0}:2===q.length?{width:q[0],height:q[1],x:0,y:0}:{x:q[0],y:q[1],width:q[2]-q[0]||0,height:q[3]-q[1]||0};else q&&(q=r(q,
{left:"x l left Left",top:"y t top Top",width:"w width W Width",height:"h height W Width",bottom:"b bottom Bottom",right:"r right Right"}),m={x:q.left||0,y:q.top||0},m.width=null==q.width?q.right?q.right-m.x:0:q.width,m.height=null==q.height?q.bottom?q.bottom-m.y:0:q.height);return m}},{"pick-by-alias":511}],505:[function(b,N,I){N.exports=function(l){var a=[];l.replace(q,function(h,g,n){h=g.toLowerCase();n=(n=n.match(m))?n.map(Number):[];"m"==h&&2<n.length&&(a.push([g].concat(n.splice(0,2))),h="l",
g="m"==g?"l":"L");for(;;){if(n.length==r[h])return n.unshift(g),a.push(n);if(n.length<r[h])throw Error("malformed path data");a.push([g].concat(n.splice(0,r[h])))}});return a};var r={a:7,c:6,h:1,l:2,m:2,q:4,s:4,t:2,v:1,z:0},q=/([astvzqmhlc])([^astvzqmhlc]*)/ig,m=/-?[0-9]*\.?[0-9]+(?:e[-+]?\d+)?/ig},{}],506:[function(b,N,I){N.exports=function(r,q){q||(q=[0,""]);r=String(r);var m=parseFloat(r,10);q[0]=m;q[1]=r.match(/[\d.\-\+]*\s*(.*)/)[1]||"";return q}},{}],507:[function(b,N,I){(function(r){(function(){function q(a){if("string"!==
typeof a)throw new TypeError("Path must be a string. Received "+JSON.stringify(a));}function m(a,h){for(var g="",n=0,p=-1,d=0,e,f=0;f<=a.length;++f){if(f<a.length)e=a.charCodeAt(f);else if(47===e)break;else e=47;if(47===e){if(p!==f-1&&1!==d)if(p!==f-1&&2===d){if(2>g.length||2!==n||46!==g.charCodeAt(g.length-1)||46!==g.charCodeAt(g.length-2))if(2<g.length){if(p=g.lastIndexOf("/"),p!==g.length-1){-1===p?(g="",n=0):(g=g.slice(0,p),n=g.length-1-g.lastIndexOf("/"));p=f;d=0;continue}}else if(2===g.length||
1===g.length){g="";n=0;p=f;d=0;continue}h&&(g=0<g.length?g+"/..":"..",n=2)}else g=0<g.length?g+("/"+a.slice(p+1,f)):a.slice(p+1,f),n=f-p-1;p=f;d=0}else 46===e&&-1!==d?++d:d=-1}return g}var l={resolve:function(){for(var a="",h=!1,g,n=arguments.length-1;-1<=n&&!h;n--){if(0<=n)var p=arguments[n];else void 0===g&&(g=r.cwd()),p=g;q(p);0!==p.length&&(a=p+"/"+a,h=47===p.charCodeAt(0))}a=m(a,!h);return h?0<a.length?"/"+a:"/":0<a.length?a:"."},normalize:function(a){q(a);if(0===a.length)return".";var h=47===
a.charCodeAt(0),g=47===a.charCodeAt(a.length-1);a=m(a,!h);0!==a.length||h||(a=".");0<a.length&&g&&(a+="/");return h?"/"+a:a},isAbsolute:function(a){q(a);return 0<a.length&&47===a.charCodeAt(0)},join:function(){if(0===arguments.length)return".";for(var a,h=0;h<arguments.length;++h){var g=arguments[h];q(g);0<g.length&&(a=void 0===a?g:a+("/"+g))}return void 0===a?".":l.normalize(a)},relative:function(a,h){q(a);q(h);if(a===h)return"";a=l.resolve(a);h=l.resolve(h);if(a===h)return"";for(var g=1;g<a.length&&
47===a.charCodeAt(g);++g);for(var n=a.length,p=n-g,d=1;d<h.length&&47===h.charCodeAt(d);++d);for(var e=h.length-d,f=p<e?p:e,k=-1,t=0;t<=f;++t){if(t===f){if(e>f){if(47===h.charCodeAt(d+t))return h.slice(d+t+1);if(0===t)return h.slice(d+t)}else p>f&&(47===a.charCodeAt(g+t)?k=t:0===t&&(k=0));break}var v=a.charCodeAt(g+t),w=h.charCodeAt(d+t);if(v!==w)break;else 47===v&&(k=t)}p="";for(t=g+k+1;t<=n;++t)if(t===n||47===a.charCodeAt(t))p=0===p.length?p+"..":p+"/..";if(0<p.length)return p+h.slice(d+k);d+=k;
47===h.charCodeAt(d)&&++d;return h.slice(d)},_makeLong:function(a){return a},dirname:function(a){q(a);if(0===a.length)return".";for(var h=a.charCodeAt(0),g=47===h,n=-1,p=!0,d=a.length-1;1<=d;--d)if(h=a.charCodeAt(d),47===h){if(!p){n=d;break}}else p=!1;return-1===n?g?"/":".":g&&1===n?"//":a.slice(0,n)},basename:function(a,h){if(void 0!==h&&"string"!==typeof h)throw new TypeError('"ext" argument must be a string');q(a);var g=0,n=-1,p=!0,d;if(void 0!==h&&0<h.length&&h.length<=a.length){if(h.length===
a.length&&h===a)return"";var e=h.length-1,f=-1;for(d=a.length-1;0<=d;--d){var k=a.charCodeAt(d);if(47===k){if(!p){g=d+1;break}}else-1===f&&(p=!1,f=d+1),0<=e&&(k===h.charCodeAt(e)?-1===--e&&(n=d):(e=-1,n=f))}g===n?n=f:-1===n&&(n=a.length);return a.slice(g,n)}for(d=a.length-1;0<=d;--d)if(47===a.charCodeAt(d)){if(!p){g=d+1;break}}else-1===n&&(p=!1,n=d+1);return-1===n?"":a.slice(g,n)},extname:function(a){q(a);for(var h=-1,g=0,n=-1,p=!0,d=0,e=a.length-1;0<=e;--e){var f=a.charCodeAt(e);if(47===f){if(!p){g=
e+1;break}}else-1===n&&(p=!1,n=e+1),46===f?-1===h?h=e:1!==d&&(d=1):-1!==h&&(d=-1)}return-1===h||-1===n||0===d||1===d&&h===n-1&&h===g+1?"":a.slice(h,n)},format:function(a){if(null===a||"object"!==typeof a)throw new TypeError('The "pathObject" argument must be of type Object. Received type '+typeof a);var h=a.dir||a.root,g=a.base||(a.name||"")+(a.ext||"");a=h?h===a.root?h+g:h+"/"+g:g;return a},parse:function(a){q(a);var h={root:"",dir:"",base:"",ext:"",name:""};if(0===a.length)return h;var g=a.charCodeAt(0),
n=47===g;if(n){h.root="/";var p=1}else p=0;for(var d=-1,e=0,f=-1,k=!0,t=a.length-1,v=0;t>=p;--t)if(g=a.charCodeAt(t),47===g){if(!k){e=t+1;break}}else-1===f&&(k=!1,f=t+1),46===g?-1===d?d=t:1!==v&&(v=1):-1!==d&&(v=-1);-1===d||-1===f||0===v||1===v&&d===f-1&&d===e+1?-1!==f&&(h.base=0===e&&n?h.name=a.slice(1,f):h.name=a.slice(e,f)):(0===e&&n?(h.name=a.slice(1,d),h.base=a.slice(1,f)):(h.name=a.slice(e,d),h.base=a.slice(e,f)),h.ext=a.slice(d,f));0<e?h.dir=a.slice(0,e-1):n&&(h.dir="/");return h},sep:"/",
delimiter:":",win32:null,posix:null};l.posix=l;N.exports=l}).call(this)}).call(this,b("_process"))},{_process:526}],508:[function(b,N,I){(function(r){(function(){(function(){if("undefined"!==typeof performance&&null!==performance&&performance.now)N.exports=function(){return performance.now()};else if("undefined"!==typeof r&&null!==r&&r.hrtime){N.exports=function(){return(m()-h)/1E6};var q=r.hrtime;var m=function(){var n=q();return 1E9*n[0]+n[1]};var l=m();var a=1E9*r.uptime();var h=l-a}else if(Date.now){N.exports=
function(){return Date.now()-g};var g=Date.now()}else N.exports=function(){return(new Date).getTime()-g},g=(new Date).getTime()}).call(this)}).call(this)}).call(this,b("_process"))},{_process:526}],509:[function(b,N,I){N.exports=function(m){var l=m.length;if(l<r)for(var a=1,h=0;h<l;++h)for(var g=0;g<h;++g)if(m[h]<m[g])a=-a;else{if(m[h]===m[g])return 0}else{var n=q.mallocUint8(l);for(h=0;h<l;++h)n[h]=0;a=1;for(h=0;h<l;++h)if(!n[h]){var p=1;n[h]=1;for(g=m[h];g!==h;g=m[g]){if(n[g])return q.freeUint8(n),
0;p+=1;n[g]=1}p&1||(a=-a)}q.freeUint8(n)}return a};var r=32,q=b("typedarray-pool")},{"typedarray-pool":595}],510:[function(b,N,I){var r=b("typedarray-pool"),q=b("invert-permutation");I.rank=function(m){var l=m.length;switch(l){case 0:case 1:return 0;case 2:return m[1]}var a=r.mallocUint32(l),h=r.mallocUint32(l),g=0,n;q(m,h);for(n=0;n<l;++n)a[n]=m[n];for(n=l-1;0<n;--n)l=h[n],m=a[n],a[n]=a[l],a[l]=m,h[n]=h[m],h[m]=l,g=(g+m)*n;r.freeUint32(h);r.freeUint32(a);return g};I.unrank=function(m,l,a){switch(m){case 0:return a?
a:[];case 1:return a?(a[0]=0,a):[0];case 2:return a?(l?(a[0]=0,a[1]=1):(a[0]=1,a[1]=0),a):l?[0,1]:[1,0]}a=a||Array(m);var h,g=1;a[0]=0;for(h=1;h<m;++h)a[h]=h,g=g*h|0;for(h=m-1;0<h;--h){m=l/g|0;l=l-m*g|0;g=g/h|0;var n=a[h]|0;a[h]=a[m]|0;a[m]=n|0}return a}},{"invert-permutation":462,"typedarray-pool":595}],511:[function(b,N,I){function r(m){if(q[m])return q[m];"string"===typeof m&&(m=q[m]=m.split(/\s*,\s*|\s+/));return m}N.exports=function(m,l,a){var h={},g,n;"string"===typeof l&&(l=r(l));if(Array.isArray(l)){var p=
{};for(n=0;n<l.length;n++)p[l[n]]=!0;l=p}for(g in l)l[g]=r(l[g]);p={};for(g in l){var d=l[g];if(Array.isArray(d))for(n=0;n<d.length;n++){var e=d[n];a&&(p[e]=!0);if(e in m){h[g]=m[e];if(a)for(;n<d.length;n++)p[d[n]]=!0;break}}else g in m&&(l[g]&&(h[g]=m[g]),a&&(p[g]=!0))}if(a)for(g in m)p[g]||(h[g]=m[g]);return h};var q={}},{}],512:[function(b,N,I){N.exports=function(q,m){function l(k,t){t=p[t][k[t]];t.splice(t.indexOf(k),1)}function a(k,t,v){var w;for(w=0;2>w;++w)if(0<p[w][t].length){var y=p[w][t][0];
var B=w;break}w=y[B^1];for(var A=0;2>A;++A)for(var z=p[A][t],E=0;E<z.length;++E){var C=z[E],u=C[A^1];0<r(m[k],m[t],m[w],m[u])&&(y=C,w=u,B=A)}if(v)return w;y&&l(y,B);return w}function h(k,t){var v=p[t][k][0],w=[k];l(v,t);for(t=v[t^1];;){for(;t!==k;)w.push(t),t=a(w[w.length-2],t,!1);if(0===p[0][k].length+p[1][k].length)break;t=w[w.length-1];v=k;var y=w[1],B=a(t,v,!0);if(0>r(m[t],m[v],m[y],m[B]))break;w.push(k);t=a(t,v)}return w}for(var g=m.length|0,n=q.length,p=[Array(g),Array(g)],d=0;d<g;++d)p[0][d]=
[],p[1][d]=[];for(d=0;d<n;++d){var e=q[d];p[0][e[0]].push(e);p[1][e[1]].push(e)}q=[];for(d=0;d<g;++d)0===p[0][d].length+p[1][d].length&&q.push([d]);for(d=0;d<g;++d)for(n=0;2>n;++n){for(e=[];0<p[n][d].length;){var f=h(d,n);f[1]===f[f.length-1]?e.push.apply(e,f):(0<e.length&&q.push(e),e=f)}0<e.length&&q.push(e)}return q};var r=b("compare-angle")},{"compare-angle":132}],513:[function(b,N,I){N.exports=function(q,m){for(var l=r(q,m.length),a=Array(m.length),h=Array(m.length),g=[],n=0;n<m.length;++n){var p=
l[n].length;h[n]=p;a[n]=!0;1>=p&&g.push(n)}for(;0<g.length;)for(p=g.pop(),a[p]=!1,p=l[p],n=0;n<p.length;++n){var d=p[n];0===--h[d]&&g.push(d)}l=Array(m.length);h=[];for(n=0;n<m.length;++n)a[n]?(p=h.length,l[n]=p,h.push(m[n])):l[n]=-1;m=[];for(n=0;n<q.length;++n)g=q[n],a[g[0]]&&a[g[1]]&&m.push([l[g[0]],l[g[1]]]);return[m,h]};var r=b("edges-to-adjacency-list")},{"edges-to-adjacency-list":178}],514:[function(b,N,I){function r(d,e){for(var f=Array(d),k=0;k<d;++k)f[k]=e;return f}function q(d){for(var e=
Array(d),f=0;f<d;++f)e[f]=[];return e}N.exports=function(d,e){function f(K){for(var H=K.length,Q=0;Q<H;++Q)if(!J[K[Q]])return!1;return!0}var k=p(d,e);d=k[0];e=k[1];for(var t=e.length,v=m(d,e.length),w=0;w<t;++w)if(1===v[w].length%2)throw Error("planar-graph-to-polyline: graph must be manifold");d=l(d,e);d=d.filter(function(K){for(var H=K.length,Q=[0],M=0;M<H;++M){var P=e[K[M]],T=e[K[(M+1)%H]],O=h(-P[0],P[1]),U=h(-P[0],T[1]);P=h(T[0],P[1]);T=h(T[0],T[1]);Q=g(Q,g(g(O,U),g(P,T)))}return 0<Q[Q.length-
1]});k=d.length;var y=Array(k),B=Array(k);for(w=0;w<k;++w){y[w]=w;var A=Array(k);v=d[w].map(function(K){return e[K]});var z=a([v]),E=0,C=0;a:for(;C<k;++C)if(A[C]=0,w!==C){v=d[C];for(var u=v.length,D=0;D<u;++D){var G=z(e[v[D]]);if(0!==G){0>G&&(A[C]=1,E+=1);continue a}}A[C]=1;E+=1}B[w]=[E,w,A]}B.sort(function(K,H){return H[0]-K[0]});for(w=0;w<k;++w)for(A=B[w],v=A[1],u=A[2],C=0;C<k;++C)u[C]&&(y[C]=v);B=q(k);for(w=0;w<k;++w)B[w].push(y[w]),B[y[w]].push(w);A={};var J=r(t,!1);for(w=0;w<k;++w)for(v=d[w],
u=v.length,C=0;C<u;++C)t=v[C],z=v[(C+1)%u],E=Math.min(t,z)+":"+Math.max(t,z),E in A?(E=A[E],B[E].push(w),B[w].push(E),J[t]=J[z]=!0):A[E]=w;C=[];t=r(k,-1);for(w=0;w<k;++w)y[w]!==w||f(d[w])?t[w]=-1:(C.push(w),t[w]=0);for(k=[];0<C.length;){w=C.pop();y=B[w];n(y,function(K,H){return K-H});u=y.length;A=t[w];if(0===A){v=d[w];var L=[v]}for(w=0;w<u;++w)v=y[w],0<=t[v]||(t[v]=A^1,C.push(v),0===A&&(v=d[v],f(v)||(v.reverse(),L.push(v))));0===A&&k.push(L)}return k};var m=b("edges-to-adjacency-list"),l=b("planar-dual"),
a=b("point-in-big-polygon"),h=b("two-product"),g=b("robust-sum"),n=b("uniq"),p=b("./lib/trim-leaves")},{"./lib/trim-leaves":513,"edges-to-adjacency-list":178,"planar-dual":512,"point-in-big-polygon":516,"robust-sum":553,"two-product":582,uniq:597}],515:[function(b,N,I){arguments[4][243][0].apply(I,arguments)},{dup:243}],516:[function(b,N,I){function r(){return!0}function q(f){return function(k,t){return(k=f[k])?!!k.queryPoint(t,r):!1}}function m(f){for(var k={},t=0;t<f.length;++t){var v=f[t],w=v[0][0],
y=v[0][1];v=v[1][1];y=[Math.min(y,v),Math.max(y,v)];w in k?k[w].push(y):k[w]=[y]}f={};w=Object.keys(k);for(t=0;t<w.length;++t)f[w[t]]=d(k[w[t]]);return q(f)}function l(f,k){return function(t){var v=e.le(k,t[0]);if(0>v)return 1;var w=f[v];if(!w)if(0<v&&k[v]===t[0])w=f[v-1];else return 1;for(v=1;w;){var y=w.key,B=n(t,y[0],y[1]);if(y[0][0]<y[1][0])if(0>B)w=w.left;else if(0<B)v=-1,w=w.right;else return 0;else if(0<B)w=w.left;else if(0>B)v=1,w=w.right;else return 0}return v}}function a(f){return 1}function h(f){return function(k){return f(k[0],
k[1])?0:1}}function g(f,k){return function(t){return f(t[0],t[1])?0:k(t)}}N.exports=function(f){for(var k=f.length,t=[],v=[],w=0;w<k;++w)for(var y=f[w],B=y.length,A=B-1,z=0;z<B;A=z++){A=y[A];var E=y[z];A[0]===E[0]?v.push([A,E]):t.push([A,E])}if(0===t.length)return 0===v.length?a:h(m(v));f=p(t);f=l(f.slabs,f.coordinates);return 0===v.length?f:g(m(v),f)};var n=b("robust-orientation")[3],p=b("slab-decomposition"),d=b("interval-tree-1d"),e=b("binary-search-bounds")},{"binary-search-bounds":515,"interval-tree-1d":460,
"robust-orientation":548,"slab-decomposition":565}],517:[function(b,N,I){function r(d,e,f){d=p.segments(d);e=p.segments(e);e=p.combine(d,e);f=f(e);return p.polygon(f)}var q=b("./lib/build-log");I=b("./lib/epsilon");var m=b("./lib/intersecter"),l=b("./lib/segment-chainer"),a=b("./lib/segment-selector"),h=b("./lib/geojson"),g=!1,n=I();var p={buildLog:function(d){!0===d?g=q():!1===d&&(g=!1);return!1===g?!1:g.list},epsilon:function(d){return n.epsilon(d)},segments:function(d){var e=m(!0,n,g);d.regions.forEach(e.addRegion);
return{segments:e.calculate(d.inverted),inverted:d.inverted}},combine:function(d,e){return{combined:m(!1,n,g).calculate(d.segments,d.inverted,e.segments,e.inverted),inverted1:d.inverted,inverted2:e.inverted}},selectUnion:function(d){return{segments:a.union(d.combined,g),inverted:d.inverted1||d.inverted2}},selectIntersect:function(d){return{segments:a.intersect(d.combined,g),inverted:d.inverted1&&d.inverted2}},selectDifference:function(d){return{segments:a.difference(d.combined,g),inverted:d.inverted1&&
!d.inverted2}},selectDifferenceRev:function(d){return{segments:a.differenceRev(d.combined,g),inverted:!d.inverted1&&d.inverted2}},selectXor:function(d){return{segments:a.xor(d.combined,g),inverted:d.inverted1!==d.inverted2}},polygon:function(d){return{regions:l(d.segments,n,g),inverted:d.inverted}},polygonFromGeoJSON:function(d){return h.toPolygon(p,d)},polygonToGeoJSON:function(d){return h.fromPolygon(p,n,d)},union:function(d,e){return r(d,e,p.selectUnion)},intersect:function(d,e){return r(d,e,p.selectIntersect)},
difference:function(d,e){return r(d,e,p.selectDifference)},differenceRev:function(d,e){return r(d,e,p.selectDifferenceRev)},xor:function(d,e){return r(d,e,p.selectXor)}};"object"===typeof window&&(window.PolyBool=p);N.exports=p},{"./lib/build-log":518,"./lib/epsilon":519,"./lib/geojson":520,"./lib/intersecter":521,"./lib/segment-chainer":523,"./lib/segment-selector":524}],518:[function(b,N,I){N.exports=function(){function r(a,h){q.list.push({type:a,data:h?JSON.parse(JSON.stringify(h)):void 0});return q}
var q,m=0,l=!1;return q={list:[],segmentId:function(){return m++},checkIntersection:function(a,h){return r("check",{seg1:a,seg2:h})},segmentChop:function(a,h){r("div_seg",{seg:a,pt:h});return r("chop",{seg:a,pt:h})},statusRemove:function(a){return r("pop_seg",{seg:a})},segmentUpdate:function(a){return r("seg_update",{seg:a})},segmentNew:function(a,h){return r("new_seg",{seg:a,primary:h})},segmentRemove:function(a){return r("rem_seg",{seg:a})},tempStatus:function(a,h,g){return r("temp_status",{seg:a,
above:h,below:g})},rewind:function(a){return r("rewind",{seg:a})},status:function(a,h,g){return r("status",{seg:a,above:h,below:g})},vert:function(a){if(a===l)return q;l=a;return r("vert",{x:a})},log:function(a){"string"!==typeof a&&(a=JSON.stringify(a,!1,"  "));return r("log",{txt:a})},reset:function(){return r("reset")},selected:function(a){return r("selected",{segs:a})},chainStart:function(a){return r("chain_start",{seg:a})},chainRemoveHead:function(a,h){return r("chain_rem_head",{index:a,pt:h})},
chainRemoveTail:function(a,h){return r("chain_rem_tail",{index:a,pt:h})},chainNew:function(a,h){return r("chain_new",{pt1:a,pt2:h})},chainMatch:function(a){return r("chain_match",{index:a})},chainClose:function(a){return r("chain_close",{index:a})},chainAddHead:function(a,h){return r("chain_add_head",{index:a,pt:h})},chainAddTail:function(a,h){return r("chain_add_tail",{index:a,pt:h})},chainConnect:function(a,h){return r("chain_con",{index1:a,index2:h})},chainReverse:function(a){return r("chain_rev",
{index:a})},chainJoin:function(a,h){return r("chain_join",{index1:a,index2:h})},done:function(){return r("done")}}}},{}],519:[function(b,N,I){N.exports=function(r){"number"!==typeof r&&(r=1E-10);var q={epsilon:function(m){"number"===typeof m&&(r=m);return r},pointAboveOrOnLine:function(m,l,a){var h=l[0];l=l[1];return(a[0]-h)*(m[1]-l)-(a[1]-l)*(m[0]-h)>=-r},pointBetween:function(m,l,a){var h=a[0]-l[0];a=a[1]-l[1];m=(m[0]-l[0])*h+(m[1]-l[1])*a;return m<r||m-(h*h+a*a)>-r?!1:!0},pointsSameX:function(m,
l){return Math.abs(m[0]-l[0])<r},pointsSameY:function(m,l){return Math.abs(m[1]-l[1])<r},pointsSame:function(m,l){return q.pointsSameX(m,l)&&q.pointsSameY(m,l)},pointsCompare:function(m,l){return q.pointsSameX(m,l)?q.pointsSameY(m,l)?0:m[1]<l[1]?-1:1:m[0]<l[0]?-1:1},pointsCollinear:function(m,l,a){return Math.abs((m[0]-l[0])*(l[1]-a[1])-(l[0]-a[0])*(m[1]-l[1]))<r},linesIntersect:function(m,l,a,h){var g=l[0]-m[0];l=l[1]-m[1];var n=h[0]-a[0],p=h[1]-a[1];h=g*p-l*n;if(Math.abs(h)<r)return!1;var d=m[0]-
a[0];a=m[1]-a[1];n=(n*a-p*d)/h;a=(g*a-l*d)/h;m={alongA:0,alongB:0,pt:[m[0]+n*g,m[1]+n*l]};m.alongA=n<=-r?-2:n<r?-1:n-1<=-r?0:n-1<r?1:2;m.alongB=a<=-r?-2:a<r?-1:a-1<=-r?0:a-1<r?1:2;return m},pointInsideRegion:function(m,l){var a=m[0];m=m[1];for(var h=l[l.length-1][0],g=l[l.length-1][1],n=!1,p=0;p<l.length;p++){var d=l[p][0],e=l[p][1];e-m>r!=g-m>r&&(h-d)*(m-e)/(g-e)+d-a>r&&(n=!n);h=d;g=e}return n}};return q}},{}],520:[function(b,N,I){N.exports={toPolygon:function(r,q){function m(h){function g(d){d=
d.slice(0,d.length-1);return r.segments({inverted:!1,regions:[d]})}if(0>=h.length)return r.segments({inverted:!1,regions:[]});for(var n=g(h[0]),p=1;p<h.length;p++)n=r.selectDifference(r.combine(n,g(h[p])));return n}if("Polygon"===q.type)return r.polygon(m(q.coordinates));if("MultiPolygon"===q.type){for(var l=r.segments({inverted:!1,regions:[]}),a=0;a<q.coordinates.length;a++)l=r.selectUnion(r.combine(l,m(q.coordinates[a])));return r.polygon(l)}throw Error("PolyBool: Cannot convert GeoJSON object to PolyBool polygon");
},fromPolygon:function(r,q,m){function l(e,f){return q.pointInsideRegion([.5*(e[0][0]+e[1][0]),.5*(e[0][1]+e[1][1])],f)}function a(e,f){for(var k=0;k<e.children.length;k++){var t=e.children[k];if(l(f,t.region)){a(t,f);return}}var v={region:f,children:[]};for(k=0;k<e.children.length;k++)t=e.children[k],l(t.region,f)&&(v.children.push(t),e.children.splice(k,1),k--);e.children.push(v)}function h(e,f){for(var k=0,t=e[e.length-1][0],v=e[e.length-1][1],w=[],y=0;y<e.length;y++){var B=e[y][0],A=e[y][1];w.push([B,
A]);k+=A*t-B*v;t=B;v=A}0>k!==f&&w.reverse();w.push([w[0][0],w[0][1]]);return w}function g(e){var f=[h(e.region,!1)];d.push(f);for(var k=0;k<e.children.length;k++){var t=f,v=t.push;var w=e.children[k];for(var y=0;y<w.children.length;y++)g(w.children[y]);w=h(w.region,!0);v.call(t,w)}}m=r.polygon(r.segments(m));r={region:null,children:[]};for(var n=0;n<m.regions.length;n++){var p=m.regions[n];3>p.length||a(r,p)}var d=[];for(n=0;n<r.children.length;n++)g(r.children[n]);return 0>=d.length?{type:"Polygon",
coordinates:[]}:1==d.length?{type:"Polygon",coordinates:d[0]}:{type:"MultiPolygon",coordinates:d}}}},{}],521:[function(b,N,I){var r=b("./linked-list");N.exports=function(q,m,l){function a(e,f,k){return{id:l?l.segmentId():-1,start:e,end:f,myFill:{above:k.myFill.above,below:k.myFill.below},otherFill:null}}function h(e,f){d.insertBefore(e,function(k){var t=e.isStart;var v=k.isStart,w=k.pt;k=k.other.pt;var y=m.pointsCompare(e.pt,w);t=0!==y?y:m.pointsSame(f,k)?0:t!==v?t?1:-1:m.pointAboveOrOnLine(f,v?w:
k,v?k:w)?1:-1;return 0>t})}function g(e,f){var k=r.node({isStart:!0,pt:e.start,seg:e,primary:f,other:null,status:null});h(k,e.end);e=r.node({isStart:!1,pt:e.end,seg:e,primary:f,other:k,status:null});k.other=e;h(e,k.pt);return k}function n(e,f){var k=a(f,e.seg.end,e.seg);l&&l.segmentChop(e.seg,f);e.other.remove();e.seg.end=f;e.other.pt=f;h(e.other,e.pt);return g(k,e.primary)}function p(e,f){function k(u){return v.findTransition(function(D){var G=D.ev;D=u.seg.start;var J=u.seg.end,L=G.seg.start;G=G.seg.end;
D=m.pointsCollinear(D,L,G)?m.pointsCollinear(J,L,G)?1:m.pointAboveOrOnLine(J,L,G)?1:-1:m.pointAboveOrOnLine(D,L,G)?1:-1;return 0<D})}function t(u,D){var G=u.seg,J=D.seg,L=G.start,K=G.end,H=J.start,Q=J.end;l&&l.checkIntersection(G,J);G=m.linesIntersect(L,K,H,Q);if(!1===G){if(!m.pointsCollinear(L,K,H)||m.pointsSame(L,Q)||m.pointsSame(K,H))return!1;G=m.pointsSame(L,H);J=m.pointsSame(K,Q);if(G&&J)return D;var M=!G&&m.pointBetween(L,H,Q);H=!J&&m.pointBetween(K,H,Q);if(G)return H?n(D,K):n(u,Q),D;M&&(J||
(H?n(D,K):n(u,Q)),n(D,L))}else 0===G.alongA&&(-1===G.alongB?n(u,H):0===G.alongB?n(u,G.pt):1===G.alongB&&n(u,Q)),0===G.alongB&&(-1===G.alongA?n(D,L):0===G.alongA?n(D,G.pt):1===G.alongA&&n(D,K));return!1}for(var v=r.create(),w=[];!d.isEmpty();){var y=d.getHead();l&&l.vert(y.pt[0]);if(y.isStart){l&&l.segmentNew(y.seg,y.primary);var B=k(y),A=B.before?B.before.ev:null,z=B.after?B.after.ev:null;l&&l.tempStatus(y.seg,A?A.seg:!1,z?z.seg:!1);var E=function(){if(A){var u=t(y,A);if(u)return u}return z?t(y,z):
!1}();if(E){if(q){var C;if(C=null===y.seg.myFill.below?!0:y.seg.myFill.above!==y.seg.myFill.below)E.seg.myFill.above=!E.seg.myFill.above}else E.seg.otherFill=y.seg.myFill;l&&l.segmentUpdate(E.seg);y.other.remove();y.remove()}if(d.getHead()!==y){l&&l.rewind(y.seg);continue}q?(C=null===y.seg.myFill.below?!0:y.seg.myFill.above!==y.seg.myFill.below,y.seg.myFill.below=z?z.seg.myFill.above:e,y.seg.myFill.above=C?!y.seg.myFill.below:y.seg.myFill.below):null===y.seg.otherFill&&(E=z?y.primary===z.primary?
z.seg.otherFill.above:z.seg.myFill.above:y.primary?f:e,y.seg.otherFill={above:E,below:E});l&&l.status(y.seg,A?A.seg:!1,z?z.seg:!1);y.other.status=B.insert(r.node({ev:y}))}else{B=y.status;if(null===B)throw Error("PolyBool: Zero-length segment detected; your epsilon is probably too small or too large");v.exists(B.prev)&&v.exists(B.next)&&t(B.prev.ev,B.next.ev);l&&l.statusRemove(B.ev.seg);B.remove();y.primary||(B=y.seg.myFill,y.seg.myFill=y.seg.otherFill,y.seg.otherFill=B);w.push(y.seg)}d.getHead().remove()}l&&
l.done();return w}var d=r.create();return q?{addRegion:function(e){for(var f,k=e[e.length-1],t=0;t<e.length;t++){f=k;k=e[t];var v=m.pointsCompare(f,k);if(0!==v){var w=0>v?f:k;f=0>v?k:f;w={id:l?l.segmentId():-1,start:w,end:f,myFill:{above:null,below:null},otherFill:null};g(w,!0)}}},calculate:function(e){return p(e,!1)}}:{calculate:function(e,f,k,t){e.forEach(function(v){g(a(v.start,v.end,v),!0)});k.forEach(function(v){g(a(v.start,v.end,v),!1)});return p(f,t)}}}},{"./linked-list":522}],522:[function(b,
N,I){N.exports={create:function(){var r={root:{root:!0,next:null},exists:function(q){return null===q||q===r.root?!1:!0},isEmpty:function(){return null===r.root.next},getHead:function(){return r.root.next},insertBefore:function(q,m){for(var l=r.root,a=r.root.next;null!==a;){if(m(a)){q.prev=a.prev;q.next=a;a.prev.next=q;a.prev=q;return}l=a;a=a.next}l.next=q;q.prev=l;q.next=null},findTransition:function(q){for(var m=r.root,l=r.root.next;null!==l&&!q(l);)m=l,l=l.next;return{before:m===r.root?null:m,after:l,
insert:function(a){a.prev=m;a.next=l;m.next=a;null!==l&&(l.prev=a);return a}}}};return r},node:function(r){r.prev=null;r.next=null;r.remove=function(){if(r.prev.next=r.next)r.next.prev=r.prev;r.prev=null;r.next=null};return r}}},{}],523:[function(b,N,I){N.exports=function(r,q,m){var l=[],a=[];r.forEach(function(h){function g(z,E,C){t.index=z;t.matches_head=E;t.matches_pt1=C;if(t===f)return t=k,!1;t=null;return!0}function n(z){m&&m.chainReverse(z);l[z].reverse()}function p(z,E){var C=l[z],u=l[E],D=
C[C.length-1],G=C[C.length-2],J=u[0],L=u[1];q.pointsCollinear(G,D,J)&&(m&&m.chainRemoveTail(z,D),C.pop(),D=G);q.pointsCollinear(D,J,L)&&(m&&m.chainRemoveHead(E,J),u.shift());m&&m.chainJoin(z,E);l[z]=C.concat(u);l.splice(E,1)}var d=h.start,e=h.end;if(q.pointsSame(d,e))console.warn("PolyBool: Warning: Zero-length segment detected; your epsilon is probably too small or too large");else{m&&m.chainStart(h);for(var f={index:0,matches_head:!1,matches_pt1:!1},k={index:0,matches_head:!1,matches_pt1:!1},t=
f,v=0;v<l.length;v++){h=l[v];var w=h[0];h=h[h.length-1];if(q.pointsSame(w,d)){if(g(v,!0,!0))break}else if(q.pointsSame(w,e)){if(g(v,!0,!1))break}else if(q.pointsSame(h,d)){if(g(v,!1,!0))break}else if(q.pointsSame(h,e)&&g(v,!1,!1))break}if(t===f)l.push([d,e]),m&&m.chainNew(d,e);else if(t===k){m&&m.chainMatch(f.index);v=f.index;d=f.matches_pt1?e:d;e=f.matches_head;h=l[v];w=e?h[0]:h[h.length-1];var y=e?h[1]:h[h.length-2],B=e?h[h.length-1]:h[0],A=e?h[h.length-2]:h[1];q.pointsCollinear(y,w,d)&&(e?(m&&
m.chainRemoveHead(f.index,d),h.shift()):(m&&m.chainRemoveTail(f.index,d),h.pop()),w=y);q.pointsSame(B,d)?(l.splice(v,1),q.pointsCollinear(A,B,w)&&(e?(m&&m.chainRemoveTail(f.index,w),h.pop()):(m&&m.chainRemoveHead(f.index,w),h.shift())),m&&m.chainClose(f.index),a.push(h)):e?(m&&m.chainAddHead(f.index,d),h.unshift(d)):(m&&m.chainAddTail(f.index,d),h.push(d))}else h=f.index,v=k.index,m&&m.chainConnect(h,v),d=l[h].length<l[v].length,f.matches_head?k.matches_head?d?(n(h),p(h,v)):(n(v),p(v,h)):p(v,h):k.matches_head?
p(h,v):d?(n(h),p(v,h)):(n(v),p(h,v))}});return a}},{}],524:[function(b,N,I){function r(q,m,l){var a=[];q.forEach(function(h){var g=(h.myFill.above?8:0)+(h.myFill.below?4:0)+(h.otherFill&&h.otherFill.above?2:0)+(h.otherFill&&h.otherFill.below?1:0);0!==m[g]&&a.push({id:l?l.segmentId():-1,start:h.start,end:h.end,myFill:{above:1===m[g],below:2===m[g]},otherFill:null})});l&&l.selected(a);return a}N.exports={union:function(q,m){return r(q,[0,2,1,0,2,2,0,0,1,0,1,0,0,0,0,0],m)},intersect:function(q,m){return r(q,
[0,0,0,0,0,2,0,2,0,0,1,1,0,2,1,0],m)},difference:function(q,m){return r(q,[0,0,0,0,2,0,2,0,1,1,0,0,0,1,2,0],m)},differenceRev:function(q,m){return r(q,[0,2,1,0,0,0,1,1,0,2,0,2,0,0,0,0],m)},xor:function(q,m){return r(q,[0,2,1,0,2,0,0,1,1,0,0,2,0,1,2,0],m)}}},{}],525:[function(b,N,I){var r=new Float64Array(4),q=new Float64Array(4),m=new Float64Array(4);N.exports=function(l,a,h,g,n){r.length<g.length&&(r=new Float64Array(g.length),q=new Float64Array(g.length),m=new Float64Array(g.length));for(var p=
0;p<g.length;++p)r[p]=l[p]-g[p],q[p]=a[p]-l[p],m[p]=h[p]-l[p];var d=0,e=0,f=0,k=0,t=0,v=0;for(p=0;p<g.length;++p){var w=q[p],y=m[p],B=r[p];d+=w*w;e+=w*y;f+=y*y;k+=B*w;t+=B*y;v+=B*B}p=Math.abs(d*f-e*e);w=e*t-f*k;y=e*k-d*t;w+y<=p?0>w?0>y?0>k?(y=0,-k>=d?(w=1,d=d+2*k+v):(w=-k/d,d=k*w+v)):(w=0,0<=t?(y=0,d=v):-t>=f?(y=1,d=f+2*t+v):(y=-t/f,d=t*y+v)):(w=0,0<=t?(y=0,d=v):-t>=f?(y=1,d=f+2*t+v):(y=-t/f,d=t*y+v)):0>y?(y=0,0<=k?(w=0,d=v):-k>=d?(w=1,d=d+2*k+v):(w=-k/d,d=k*w+v)):(p=1/p,w*=p,y*=p,d=w*(d*w+e*y+2*
k)+y*(e*w+f*y+2*t)+v):0>w?(w=e+k,p=f+t,p>w?(p-=w,w=d-2*e+f,p>=w?(w=1,y=0,d=d+2*k+v):(w=p/w,y=1-w,d=w*(d*w+e*y+2*k)+y*(e*w+f*y+2*t)+v)):(w=0,0>=p?(y=1,d=f+2*t+v):0<=t?(y=0,d=v):(y=-t/f,d=t*y+v))):0>y?(w=e+t,p=d+k,p>w?(p-=w,w=d-2*e+f,p>=w?(y=1,w=0,d=f+2*t+v):(y=p/w,w=1-y,d=w*(d*w+e*y+2*k)+y*(e*w+f*y+2*t)+v)):(y=0,0>=p?(w=1,d=d+2*k+v):0<=k?(w=0,d=v):(w=-k/d,d=k*w+v))):(p=f+t-e-k,0>=p?(w=0,y=1,d=f+2*t+v):(w=d-2*e+f,p>=w?(w=1,y=0,d=d+2*k+v):(w=p/w,y=1-w,d=w*(d*w+e*y+2*k)+y*(e*w+f*y+2*t)+v)));e=1-w-y;for(p=
0;p<g.length;++p)n[p]=e*l[p]+w*a[p]+y*h[p];return 0>d?0:d}},{}],526:[function(b,N,I){function r(){throw Error("setTimeout has not been defined");}function q(){throw Error("clearTimeout has not been defined");}function m(v){if(p===setTimeout)return setTimeout(v,0);if((p===r||!p)&&setTimeout)return p=setTimeout,setTimeout(v,0);try{return p(v,0)}catch(w){try{return p.call(null,v,0)}catch(y){return p.call(this,v,0)}}}function l(v){if(d===clearTimeout)return clearTimeout(v);if((d===q||!d)&&clearTimeout)return d=
clearTimeout,clearTimeout(v);try{return d(v)}catch(w){try{return d.call(null,v)}catch(y){return d.call(this,v)}}}function a(){f&&k&&(f=!1,k.length?e=k.concat(e):t=-1,e.length&&h())}function h(){if(!f){var v=m(a);f=!0;for(var w=e.length;w;){k=e;for(e=[];++t<w;)k&&k[t].run();t=-1;w=e.length}k=null;f=!1;l(v)}}function g(v,w){this.fun=v;this.array=w}function n(){}b=N.exports={};try{var p="function"===typeof setTimeout?setTimeout:r}catch(v){p=r}try{var d="function"===typeof clearTimeout?clearTimeout:q}catch(v){d=
q}var e=[],f=!1,k,t=-1;b.nextTick=function(v){var w=Array(arguments.length-1);if(1<arguments.length)for(var y=1;y<arguments.length;y++)w[y-1]=arguments[y];e.push(new g(v,w));1!==e.length||f||m(h)};g.prototype.run=function(){this.fun.apply(null,this.array)};b.title="browser";b.browser=!0;b.env={};b.argv=[];b.version="";b.versions={};b.on=n;b.addListener=n;b.once=n;b.off=n;b.removeListener=n;b.removeAllListeners=n;b.emit=n;b.prependListener=n;b.prependOnceListener=n;b.listeners=function(v){return[]};
b.binding=function(v){throw Error("process.binding is not supported");};b.cwd=function(){return"/"};b.chdir=function(v){throw Error("process.chdir is not supported");};b.umask=function(){return 0}},{}],527:[function(b,N,I){N.exports=b("gl-quat/slerp")},{"gl-quat/slerp":325}],528:[function(b,N,I){(function(r){(function(){for(var q=b("performance-now"),m="undefined"===typeof window?r:window,l=["moz","webkit"],a=m.requestAnimationFrame,h=m.cancelAnimationFrame||m.cancelRequestAnimationFrame,g=0;!a&&
g<l.length;g++)a=m[l[g]+"RequestAnimationFrame"],h=m[l[g]+"CancelAnimationFrame"]||m[l[g]+"CancelRequestAnimationFrame"];if(!a||!h){var n=0,p=0,d=[],e=1E3/60;a=function(f){if(0===d.length){var k=q(),t=Math.max(0,e-(k-n));n=t+k;setTimeout(function(){for(var v=d.slice(0),w=d.length=0;w<v.length;w++)if(!v[w].cancelled)try{v[w].callback(n)}catch(y){setTimeout(function(){throw y;},0)}},Math.round(t))}d.push({handle:++p,callback:f,cancelled:!1});return p};h=function(f){for(var k=0;k<d.length;k++)d[k].handle===
f&&(d[k].cancelled=!0)}}N.exports=function(f){return a.call(m,f)};N.exports.cancel=function(){h.apply(m,arguments)};N.exports.polyfill=function(f){f||(f=m);f.requestAnimationFrame=a;f.cancelAnimationFrame=h}}).call(this)}).call(this,"undefined"!==typeof od?od:"undefined"!==typeof self?self:"undefined"!==typeof window?window:{})},{"performance-now":508}],529:[function(b,N,I){var r=b("big-rat/add");N.exports=function(q,m){for(var l=q.length,a=Array(l),h=0;h<l;++h)a[h]=r(q[h],m[h]);return a}},{"big-rat/add":80}],
530:[function(b,N,I){N.exports=function(q){for(var m=Array(q.length),l=0;l<q.length;++l)m[l]=r(q[l]);return m};var r=b("big-rat")},{"big-rat":83}],531:[function(b,N,I){var r=b("big-rat"),q=b("big-rat/mul");N.exports=function(m,l){l=r(l);for(var a=m.length,h=Array(a),g=0;g<a;++g)h[g]=q(m[g],l);return h}},{"big-rat":83,"big-rat/mul":92}],532:[function(b,N,I){var r=b("big-rat/sub");N.exports=function(q,m){for(var l=q.length,a=Array(l),h=0;h<l;++h)a[h]=r(q[h],m[h]);return a}},{"big-rat/sub":94}],533:[function(b,
N,I){var r=b("compare-cell"),q=b("compare-oriented-cell"),m=b("cell-orientation");N.exports=function(l){l.sort(q);for(var a=l.length,h=0,g=0;g<a;++g){var n=l[g],p=m(n);if(0!==p){if(0<h){var d=l[h-1];if(0===r(n,d)&&m(d)!==p){--h;continue}}l[h++]=n}}l.length=h;return l}},{"cell-orientation":117,"compare-cell":133,"compare-oriented-cell":134}],534:[function(b,N,I){var r=b("array-bounds"),q=b("color-normalize"),m=b("update-diff"),l=b("pick-by-alias"),a=b("object-assign"),h=b("flatten-vertex-data");b=
b("to-float32");var g=b.float32,n=b.fract32;N.exports=function(d,e){function f(J){J?v(J):null===J&&w();k()}function k(J){if("number"===typeof J)return t(J);J&&!Array.isArray(J)&&(J=[J]);d._refresh();A.forEach(function(L,K){L&&(J&&(L.draw=J[K]?!0:!1),L.draw?t(K):L.draw=!0)})}function t(J){"number"===typeof J&&(J=A[J]);null!=J&&J&&J.count&&J.color&&J.opacity&&J.positions&&1<J.positions.length&&(J.scaleRatio=[J.scale[0]*J.viewport.width,J.scale[1]*J.viewport.height],G(J),J.after&&J.after(J))}function v(J){if(J){null!=
J.length?"number"===typeof J[0]&&(J=[{positions:J}]):Array.isArray(J)||(J=[J]);var L=0,K=0;f.groups=A=J.map(function(P,T){var O=A[T];if(P)"function"===typeof P?P={after:P}:"number"===typeof P[0]&&(P={positions:P});else return O;P=l(P,{color:"color colors fill",capSize:"capSize cap capsize cap-size",lineWidth:"lineWidth line-width width line thickness",opacity:"opacity alpha",range:"range dataBox",viewport:"viewport viewBox",errors:"errors error",positions:"positions position data points"});O||(A[T]=
O={id:T,scale:null,translate:null,scaleFract:null,translateFract:null,draw:!0},P=a({},B,P));m(O,P,[{lineWidth:function(U){return.5*+U},capSize:function(U){return.5*+U},opacity:parseFloat,errors:function(U){U=h(U);K+=U.length;return U},positions:function(U,S){U=h(U,"float64");S.count=Math.floor(U.length/2);S.bounds=r(U,2);S.offset=L;L+=S.count;return U}},{color:function(U,S){S=S.count;U||(U="transparent");if(!Array.isArray(U)||"number"===typeof U[0]){var X=U;U=Array(S);for(var ba=0;ba<S;ba++)U[ba]=
X}if(U.length<S)throw Error("Not enough colors");X=new Uint8Array(4*S);for(ba=0;ba<S;ba++){var ca=q(U[ba],"uint8");X.set(ca,4*ba)}return X},range:function(U,S,X){X=S.bounds;U||(U=X);S.scale=[1/(U[2]-U[0]),1/(U[3]-U[1])];S.translate=[-U[0],-U[1]];S.scaleFract=n(S.scale);S.translateFract=n(S.translate);return U},viewport:function(U){if(Array.isArray(U))var S={x:U[0],y:U[1],width:U[2]-U[0],height:U[3]-U[1]};else U?(S={x:U.x||U.left||0,y:U.y||U.top||0},S.width=U.right?U.right-S.x:U.w||U.width||0,S.height=
U.bottom?U.bottom-S.y:U.h||U.height||0):S={x:0,y:0,width:y.drawingBufferWidth,height:y.drawingBufferHeight};return S}}]);return O});if(L||K){J=A.reduce(function(P,T,O){return P+(T?T.count:0)},0);var H=new Float64Array(2*J),Q=new Uint8Array(4*J),M=new Float32Array(4*J);A.forEach(function(P,T){if(P){T=P.positions;var O=P.offset,U=P.errors;P.count&&(Q.set(P.color,4*O),M.set(U,4*O),H.set(T,2*O))}});E(g(H));C(n(H));z(Q);u(M)}}}function w(){E.destroy();C.destroy();z.destroy();u.destroy();D.destroy()}"function"===
typeof d?(e||(e={}),e.regl=d):e=d;e.length&&(e.positions=e);d=e.regl;if(!d.hasExtension("ANGLE_instanced_arrays"))throw Error("regl-error2d: `ANGLE_instanced_arrays` extension should be enabled");var y=d._gl,B={color:"black",capSize:5,lineWidth:1,opacity:1,viewport:null,range:null,offset:0,count:0,bounds:null,positions:[],errors:[]},A=[];var z=d.buffer({usage:"dynamic",type:"uint8",data:new Uint8Array(0)});var E=d.buffer({usage:"dynamic",type:"float",data:new Uint8Array(0)});var C=d.buffer({usage:"dynamic",
type:"float",data:new Uint8Array(0)});var u=d.buffer({usage:"dynamic",type:"float",data:new Uint8Array(0)});var D=d.buffer({usage:"static",type:"float",data:p});v(e);var G=d({vert:"\n\t\tprecision highp float;\n\n\t\tattribute vec2 position, positionFract;\n\t\tattribute vec4 error;\n\t\tattribute vec4 color;\n\n\t\tattribute vec2 direction, lineOffset, capOffset;\n\n\t\tuniform vec4 viewport;\n\t\tuniform float lineWidth, capSize;\n\t\tuniform vec2 scale, scaleFract, translate, translateFract;\n\n\t\tvarying vec4 fragColor;\n\n\t\tvoid main() {\n\t\t\tfragColor \x3d color / 255.;\n\n\t\t\tvec2 pixelOffset \x3d lineWidth * lineOffset + (capSize + lineWidth) * capOffset;\n\n\t\t\tvec2 dxy \x3d -step(.5, direction.xy) * error.xz + step(direction.xy, vec2(-.5)) * error.yw;\n\n\t\t\tvec2 position \x3d position + dxy;\n\n\t\t\tvec2 pos \x3d (position + translate) * scale\n\t\t\t\t+ (positionFract + translateFract) * scale\n\t\t\t\t+ (position + translate) * scaleFract\n\t\t\t\t+ (positionFract + translateFract) * scaleFract;\n\n\t\t\tpos +\x3d pixelOffset / viewport.zw;\n\n\t\t\tgl_Position \x3d vec4(pos * 2. - 1., 0, 1);\n\t\t}\n\t\t",
frag:"\n\t\tprecision highp float;\n\n\t\tvarying vec4 fragColor;\n\n\t\tuniform float opacity;\n\n\t\tvoid main() {\n\t\t\tgl_FragColor \x3d fragColor;\n\t\t\tgl_FragColor.a *\x3d opacity;\n\t\t}\n\t\t",uniforms:{range:d.prop("range"),lineWidth:d.prop("lineWidth"),capSize:d.prop("capSize"),opacity:d.prop("opacity"),scale:d.prop("scale"),translate:d.prop("translate"),scaleFract:d.prop("scaleFract"),translateFract:d.prop("translateFract"),viewport:function(J,L){return[L.viewport.x,L.viewport.y,J.viewportWidth,
J.viewportHeight]}},attributes:{color:{buffer:z,offset:function(J,L){return 4*L.offset},divisor:1},position:{buffer:E,offset:function(J,L){return 8*L.offset},divisor:1},positionFract:{buffer:C,offset:function(J,L){return 8*L.offset},divisor:1},error:{buffer:u,offset:function(J,L){return 16*L.offset},divisor:1},direction:{buffer:D,stride:24,offset:0},lineOffset:{buffer:D,stride:24,offset:8},capOffset:{buffer:D,stride:24,offset:16}},primitive:"triangles",blend:{enable:!0,color:[0,0,0,0],equation:{rgb:"add",
alpha:"add"},func:{srcRGB:"src alpha",dstRGB:"one minus src alpha",srcAlpha:"one minus dst alpha",dstAlpha:"one"}},depth:{enable:!1},scissor:{enable:!0,box:d.prop("viewport")},viewport:d.prop("viewport"),stencil:!1,instances:d.prop("count"),count:p.length});a(f,{update:v,draw:k,destroy:w,regl:d,gl:y,canvas:y.canvas,groups:A});return f};var p=[[1,0,0,1,0,0],[1,0,0,-1,0,0],[-1,0,0,-1,0,0],[-1,0,0,-1,0,0],[-1,0,0,1,0,0],[1,0,0,1,0,0],[1,0,-1,0,0,1],[1,0,-1,0,0,-1],[1,0,1,0,0,-1],[1,0,1,0,0,-1],[1,0,
1,0,0,1],[1,0,-1,0,0,1],[-1,0,-1,0,0,1],[-1,0,-1,0,0,-1],[-1,0,1,0,0,-1],[-1,0,1,0,0,-1],[-1,0,1,0,0,1],[-1,0,-1,0,0,1],[0,1,1,0,0,0],[0,1,-1,0,0,0],[0,-1,-1,0,0,0],[0,-1,-1,0,0,0],[0,1,1,0,0,0],[0,-1,1,0,0,0],[0,1,0,-1,1,0],[0,1,0,-1,-1,0],[0,1,0,1,-1,0],[0,1,0,1,1,0],[0,1,0,-1,1,0],[0,1,0,1,-1,0],[0,-1,0,-1,1,0],[0,-1,0,-1,-1,0],[0,-1,0,1,-1,0],[0,-1,0,1,1,0],[0,-1,0,-1,1,0],[0,-1,0,1,-1,0]]},{"array-bounds":70,"color-normalize":125,"flatten-vertex-data":244,"object-assign":499,"pick-by-alias":511,
"to-float32":577,"update-diff":599}],535:[function(b,N,I){function r(k,t){if(!(this instanceof r))return new r(k,t);"function"===typeof k?(t||(t={}),t.regl=k):t=k;t.length&&(t.positions=t);k=t.regl;if(!k.hasExtension("ANGLE_instanced_arrays"))throw Error("regl-error2d: `ANGLE_instanced_arrays` extension should be enabled");this.gl=k._gl;this.regl=k;this.passes=[];this.shaders=r.shaders.has(k)?r.shaders.get(k):r.shaders.set(k,r.createShaders(k)).get(k);this.update(t)}var q=b("color-normalize"),m=b("array-bounds"),
l=b("object-assign"),a=b("glslify"),h=b("pick-by-alias"),g=b("flatten-vertex-data"),n=b("earcut"),p=b("array-normalize");I=b("to-float32");var d=I.float32,e=I.fract32;I=b("es6-weak-map");var f=b("parse-rect");N.exports=r;r.dashMult=2;r.maxPatternLength=256;r.precisionThreshold=3E6;r.maxPoints=1E4;r.maxLines=2048;r.shaders=new I;r.createShaders=function(k){var t=k.buffer({usage:"static",type:"float",data:[0,1,0,0,1,1,1,0]}),v={primitive:"triangle strip",instances:k.prop("count"),count:4,offset:0,uniforms:{miterMode:function(B,
A){return"round"===A.join?2:1},miterLimit:k.prop("miterLimit"),scale:k.prop("scale"),scaleFract:k.prop("scaleFract"),translateFract:k.prop("translateFract"),translate:k.prop("translate"),thickness:k.prop("thickness"),dashPattern:k.prop("dashTexture"),opacity:k.prop("opacity"),pixelRatio:k.context("pixelRatio"),id:k.prop("id"),dashSize:k.prop("dashLength"),viewport:function(B,A){return[A.viewport.x,A.viewport.y,B.viewportWidth,B.viewportHeight]},depth:k.prop("depth")},blend:{enable:!0,color:[0,0,0,
0],equation:{rgb:"add",alpha:"add"},func:{srcRGB:"src alpha",dstRGB:"one minus src alpha",srcAlpha:"one minus dst alpha",dstAlpha:"one"}},depth:{enable:function(B,A){return!A.overlay}},stencil:{enable:!1},scissor:{enable:!0,box:k.prop("viewport")},viewport:k.prop("viewport")},w=k(l({vert:a(["precision highp float;\n#define GLSLIFY 1\n\nattribute vec2 aCoord, bCoord, aCoordFract, bCoordFract;\nattribute vec4 color;\nattribute float lineEnd, lineTop;\n\nuniform vec2 scale, scaleFract, translate, translateFract;\nuniform float thickness, pixelRatio, id, depth;\nuniform vec4 viewport;\n\nvarying vec4 fragColor;\nvarying vec2 tangent;\n\nvec2 project(vec2 position, vec2 positionFract, vec2 scale, vec2 scaleFract, vec2 translate, vec2 translateFract) {\n\t// the order is important\n\treturn position * scale + translate\n       + positionFract * scale + translateFract\n       + position * scaleFract\n       + positionFract * scaleFract;\n}\n\nvoid main() {\n\tfloat lineStart \x3d 1. - lineEnd;\n\tfloat lineOffset \x3d lineTop * 2. - 1.;\n\n\tvec2 diff \x3d (bCoord + bCoordFract - aCoord - aCoordFract);\n\ttangent \x3d normalize(diff * scale * viewport.zw);\n\tvec2 normal \x3d vec2(-tangent.y, tangent.x);\n\n\tvec2 position \x3d project(aCoord, aCoordFract, scale, scaleFract, translate, translateFract) * lineStart\n\t\t+ project(bCoord, bCoordFract, scale, scaleFract, translate, translateFract) * lineEnd\n\n\t\t+ thickness * normal * .5 * lineOffset / viewport.zw;\n\n\tgl_Position \x3d vec4(position * 2.0 - 1.0, depth, 1);\n\n\tfragColor \x3d color / 255.;\n}\n"]),
frag:a(["precision highp float;\n#define GLSLIFY 1\n\nuniform sampler2D dashPattern;\n\nuniform float dashSize, pixelRatio, thickness, opacity, id;\n\nvarying vec4 fragColor;\nvarying vec2 tangent;\n\nvoid main() {\n\tfloat alpha \x3d 1.;\n\n\tfloat t \x3d fract(dot(tangent, gl_FragCoord.xy) / dashSize) * .5 + .25;\n\tfloat dash \x3d texture2D(dashPattern, vec2(t, .5)).r;\n\n\tgl_FragColor \x3d fragColor;\n\tgl_FragColor.a *\x3d alpha * opacity * dash;\n}\n"]),attributes:{lineEnd:{buffer:t,divisor:0,
stride:8,offset:0},lineTop:{buffer:t,divisor:0,stride:8,offset:4},aCoord:{buffer:k.prop("positionBuffer"),stride:8,offset:8,divisor:1},bCoord:{buffer:k.prop("positionBuffer"),stride:8,offset:16,divisor:1},aCoordFract:{buffer:k.prop("positionFractBuffer"),stride:8,offset:8,divisor:1},bCoordFract:{buffer:k.prop("positionFractBuffer"),stride:8,offset:16,divisor:1},color:{buffer:k.prop("colorBuffer"),stride:4,offset:0,divisor:1}}},v));try{var y=k(l({cull:{enable:!0,face:"back"},vert:a(["precision highp float;\n#define GLSLIFY 1\n\nattribute vec2 aCoord, bCoord, nextCoord, prevCoord;\nattribute vec4 aColor, bColor;\nattribute float lineEnd, lineTop;\n\nuniform vec2 scale, translate;\nuniform float thickness, pixelRatio, id, depth;\nuniform vec4 viewport;\nuniform float miterLimit, miterMode;\n\nvarying vec4 fragColor;\nvarying vec4 startCutoff, endCutoff;\nvarying vec2 tangent;\nvarying vec2 startCoord, endCoord;\nvarying float enableStartMiter, enableEndMiter;\n\nconst float REVERSE_THRESHOLD \x3d -.875;\nconst float MIN_DIFF \x3d 1e-6;\n\n// TODO: possible optimizations: avoid overcalculating all for vertices and calc just one instead\n// TODO: precalculate dot products, normalize things beforehead etc.\n// TODO: refactor to rectangular algorithm\n\nfloat distToLine(vec2 p, vec2 a, vec2 b) {\n\tvec2 diff \x3d b - a;\n\tvec2 perp \x3d normalize(vec2(-diff.y, diff.x));\n\treturn dot(p - a, perp);\n}\n\nbool isNaN( float val ){\n  return ( val \x3c 0.0 || 0.0 \x3c val || val \x3d\x3d 0.0 ) ? false : true;\n}\n\nvoid main() {\n\tvec2 aCoord \x3d aCoord, bCoord \x3d bCoord, prevCoord \x3d prevCoord, nextCoord \x3d nextCoord;\n\n  vec2 adjustedScale;\n  adjustedScale.x \x3d (abs(scale.x) \x3c MIN_DIFF) ? MIN_DIFF : scale.x;\n  adjustedScale.y \x3d (abs(scale.y) \x3c MIN_DIFF) ? MIN_DIFF : scale.y;\n\n  vec2 scaleRatio \x3d adjustedScale * viewport.zw;\n\tvec2 normalWidth \x3d thickness / scaleRatio;\n\n\tfloat lineStart \x3d 1. - lineEnd;\n\tfloat lineBot \x3d 1. - lineTop;\n\n\tfragColor \x3d (lineStart * aColor + lineEnd * bColor) / 255.;\n\n\tif (isNaN(aCoord.x) || isNaN(aCoord.y) || isNaN(bCoord.x) || isNaN(bCoord.y)) return;\n\n\tif (aCoord \x3d\x3d prevCoord) prevCoord \x3d aCoord + normalize(bCoord - aCoord);\n\tif (bCoord \x3d\x3d nextCoord) nextCoord \x3d bCoord - normalize(bCoord - aCoord);\n\n\tvec2 prevDiff \x3d aCoord - prevCoord;\n\tvec2 currDiff \x3d bCoord - aCoord;\n\tvec2 nextDiff \x3d nextCoord - bCoord;\n\n\tvec2 prevTangent \x3d normalize(prevDiff * scaleRatio);\n\tvec2 currTangent \x3d normalize(currDiff * scaleRatio);\n\tvec2 nextTangent \x3d normalize(nextDiff * scaleRatio);\n\n\tvec2 prevNormal \x3d vec2(-prevTangent.y, prevTangent.x);\n\tvec2 currNormal \x3d vec2(-currTangent.y, currTangent.x);\n\tvec2 nextNormal \x3d vec2(-nextTangent.y, nextTangent.x);\n\n\tvec2 startJoinDirection \x3d normalize(prevTangent - currTangent);\n\tvec2 endJoinDirection \x3d normalize(currTangent - nextTangent);\n\n\t// collapsed/unidirectional segment cases\n\t// FIXME: there should be more elegant solution\n\tvec2 prevTanDiff \x3d abs(prevTangent - currTangent);\n\tvec2 nextTanDiff \x3d abs(nextTangent - currTangent);\n\tif (max(prevTanDiff.x, prevTanDiff.y) \x3c MIN_DIFF) {\n\t\tstartJoinDirection \x3d currNormal;\n\t}\n\tif (max(nextTanDiff.x, nextTanDiff.y) \x3c MIN_DIFF) {\n\t\tendJoinDirection \x3d currNormal;\n\t}\n\tif (aCoord \x3d\x3d bCoord) {\n\t\tendJoinDirection \x3d startJoinDirection;\n\t\tcurrNormal \x3d prevNormal;\n\t\tcurrTangent \x3d prevTangent;\n\t}\n\n\ttangent \x3d currTangent;\n\n\t//calculate join shifts relative to normals\n\tfloat startJoinShift \x3d dot(currNormal, startJoinDirection);\n\tfloat endJoinShift \x3d dot(currNormal, endJoinDirection);\n\n\tfloat startMiterRatio \x3d abs(1. / startJoinShift);\n\tfloat endMiterRatio \x3d abs(1. / endJoinShift);\n\n\tvec2 startJoin \x3d startJoinDirection * startMiterRatio;\n\tvec2 endJoin \x3d endJoinDirection * endMiterRatio;\n\n\tvec2 startTopJoin, startBotJoin, endTopJoin, endBotJoin;\n\tstartTopJoin \x3d sign(startJoinShift) * startJoin * .5;\n\tstartBotJoin \x3d -startTopJoin;\n\n\tendTopJoin \x3d sign(endJoinShift) * endJoin * .5;\n\tendBotJoin \x3d -endTopJoin;\n\n\tvec2 aTopCoord \x3d aCoord + normalWidth * startTopJoin;\n\tvec2 bTopCoord \x3d bCoord + normalWidth * endTopJoin;\n\tvec2 aBotCoord \x3d aCoord + normalWidth * startBotJoin;\n\tvec2 bBotCoord \x3d bCoord + normalWidth * endBotJoin;\n\n\t//miter anti-clipping\n\tfloat baClipping \x3d distToLine(bCoord, aCoord, aBotCoord) / dot(normalize(normalWidth * endBotJoin), normalize(normalWidth.yx * vec2(-startBotJoin.y, startBotJoin.x)));\n\tfloat abClipping \x3d distToLine(aCoord, bCoord, bTopCoord) / dot(normalize(normalWidth * startBotJoin), normalize(normalWidth.yx * vec2(-endBotJoin.y, endBotJoin.x)));\n\n\t//prevent close to reverse direction switch\n\tbool prevReverse \x3d dot(currTangent, prevTangent) \x3c\x3d REVERSE_THRESHOLD \x26\x26 abs(dot(currTangent, prevNormal)) * min(length(prevDiff), length(currDiff)) \x3c  length(normalWidth * currNormal);\n\tbool nextReverse \x3d dot(currTangent, nextTangent) \x3c\x3d REVERSE_THRESHOLD \x26\x26 abs(dot(currTangent, nextNormal)) * min(length(nextDiff), length(currDiff)) \x3c  length(normalWidth * currNormal);\n\n\tif (prevReverse) {\n\t\t//make join rectangular\n\t\tvec2 miterShift \x3d normalWidth * startJoinDirection * miterLimit * .5;\n\t\tfloat normalAdjust \x3d 1. - min(miterLimit / startMiterRatio, 1.);\n\t\taBotCoord \x3d aCoord + miterShift - normalAdjust * normalWidth * currNormal * .5;\n\t\taTopCoord \x3d aCoord + miterShift + normalAdjust * normalWidth * currNormal * .5;\n\t}\n\telse if (!nextReverse \x26\x26 baClipping \x3e 0. \x26\x26 baClipping \x3c length(normalWidth * endBotJoin)) {\n\t\t//handle miter clipping\n\t\tbTopCoord -\x3d normalWidth * endTopJoin;\n\t\tbTopCoord +\x3d normalize(endTopJoin * normalWidth) * baClipping;\n\t}\n\n\tif (nextReverse) {\n\t\t//make join rectangular\n\t\tvec2 miterShift \x3d normalWidth * endJoinDirection * miterLimit * .5;\n\t\tfloat normalAdjust \x3d 1. - min(miterLimit / endMiterRatio, 1.);\n\t\tbBotCoord \x3d bCoord + miterShift - normalAdjust * normalWidth * currNormal * .5;\n\t\tbTopCoord \x3d bCoord + miterShift + normalAdjust * normalWidth * currNormal * .5;\n\t}\n\telse if (!prevReverse \x26\x26 abClipping \x3e 0. \x26\x26 abClipping \x3c length(normalWidth * startBotJoin)) {\n\t\t//handle miter clipping\n\t\taBotCoord -\x3d normalWidth * startBotJoin;\n\t\taBotCoord +\x3d normalize(startBotJoin * normalWidth) * abClipping;\n\t}\n\n\tvec2 aTopPosition \x3d (aTopCoord) * adjustedScale + translate;\n\tvec2 aBotPosition \x3d (aBotCoord) * adjustedScale + translate;\n\n\tvec2 bTopPosition \x3d (bTopCoord) * adjustedScale + translate;\n\tvec2 bBotPosition \x3d (bBotCoord) * adjustedScale + translate;\n\n\t//position is normalized 0..1 coord on the screen\n\tvec2 position \x3d (aTopPosition * lineTop + aBotPosition * lineBot) * lineStart + (bTopPosition * lineTop + bBotPosition * lineBot) * lineEnd;\n\n\tstartCoord \x3d aCoord * scaleRatio + translate * viewport.zw + viewport.xy;\n\tendCoord \x3d bCoord * scaleRatio + translate * viewport.zw + viewport.xy;\n\n\tgl_Position \x3d vec4(position  * 2.0 - 1.0, depth, 1);\n\n\tenableStartMiter \x3d step(dot(currTangent, prevTangent), .5);\n\tenableEndMiter \x3d step(dot(currTangent, nextTangent), .5);\n\n\t//bevel miter cutoffs\n\tif (miterMode \x3d\x3d 1.) {\n\t\tif (enableStartMiter \x3d\x3d 1.) {\n\t\t\tvec2 startMiterWidth \x3d vec2(startJoinDirection) * thickness * miterLimit * .5;\n\t\t\tstartCutoff \x3d vec4(aCoord, aCoord);\n\t\t\tstartCutoff.zw +\x3d vec2(-startJoinDirection.y, startJoinDirection.x) / scaleRatio;\n\t\t\tstartCutoff \x3d startCutoff * scaleRatio.xyxy + translate.xyxy * viewport.zwzw;\n\t\t\tstartCutoff +\x3d viewport.xyxy;\n\t\t\tstartCutoff +\x3d startMiterWidth.xyxy;\n\t\t}\n\n\t\tif (enableEndMiter \x3d\x3d 1.) {\n\t\t\tvec2 endMiterWidth \x3d vec2(endJoinDirection) * thickness * miterLimit * .5;\n\t\t\tendCutoff \x3d vec4(bCoord, bCoord);\n\t\t\tendCutoff.zw +\x3d vec2(-endJoinDirection.y, endJoinDirection.x)  / scaleRatio;\n\t\t\tendCutoff \x3d endCutoff * scaleRatio.xyxy + translate.xyxy * viewport.zwzw;\n\t\t\tendCutoff +\x3d viewport.xyxy;\n\t\t\tendCutoff +\x3d endMiterWidth.xyxy;\n\t\t}\n\t}\n\n\t//round miter cutoffs\n\telse if (miterMode \x3d\x3d 2.) {\n\t\tif (enableStartMiter \x3d\x3d 1.) {\n\t\t\tvec2 startMiterWidth \x3d vec2(startJoinDirection) * thickness * abs(dot(startJoinDirection, currNormal)) * .5;\n\t\t\tstartCutoff \x3d vec4(aCoord, aCoord);\n\t\t\tstartCutoff.zw +\x3d vec2(-startJoinDirection.y, startJoinDirection.x) / scaleRatio;\n\t\t\tstartCutoff \x3d startCutoff * scaleRatio.xyxy + translate.xyxy * viewport.zwzw;\n\t\t\tstartCutoff +\x3d viewport.xyxy;\n\t\t\tstartCutoff +\x3d startMiterWidth.xyxy;\n\t\t}\n\n\t\tif (enableEndMiter \x3d\x3d 1.) {\n\t\t\tvec2 endMiterWidth \x3d vec2(endJoinDirection) * thickness * abs(dot(endJoinDirection, currNormal)) * .5;\n\t\t\tendCutoff \x3d vec4(bCoord, bCoord);\n\t\t\tendCutoff.zw +\x3d vec2(-endJoinDirection.y, endJoinDirection.x)  / scaleRatio;\n\t\t\tendCutoff \x3d endCutoff * scaleRatio.xyxy + translate.xyxy * viewport.zwzw;\n\t\t\tendCutoff +\x3d viewport.xyxy;\n\t\t\tendCutoff +\x3d endMiterWidth.xyxy;\n\t\t}\n\t}\n}\n"]),
frag:a(["precision highp float;\n#define GLSLIFY 1\n\nuniform sampler2D dashPattern;\nuniform float dashSize, pixelRatio, thickness, opacity, id, miterMode;\n\nvarying vec4 fragColor;\nvarying vec2 tangent;\nvarying vec4 startCutoff, endCutoff;\nvarying vec2 startCoord, endCoord;\nvarying float enableStartMiter, enableEndMiter;\n\nfloat distToLine(vec2 p, vec2 a, vec2 b) {\n\tvec2 diff \x3d b - a;\n\tvec2 perp \x3d normalize(vec2(-diff.y, diff.x));\n\treturn dot(p - a, perp);\n}\n\nvoid main() {\n\tfloat alpha \x3d 1., distToStart, distToEnd;\n\tfloat cutoff \x3d thickness * .5;\n\n\t//bevel miter\n\tif (miterMode \x3d\x3d 1.) {\n\t\tif (enableStartMiter \x3d\x3d 1.) {\n\t\t\tdistToStart \x3d distToLine(gl_FragCoord.xy, startCutoff.xy, startCutoff.zw);\n\t\t\tif (distToStart \x3c -1.) {\n\t\t\t\tdiscard;\n\t\t\t\treturn;\n\t\t\t}\n\t\t\talpha *\x3d min(max(distToStart + 1., 0.), 1.);\n\t\t}\n\n\t\tif (enableEndMiter \x3d\x3d 1.) {\n\t\t\tdistToEnd \x3d distToLine(gl_FragCoord.xy, endCutoff.xy, endCutoff.zw);\n\t\t\tif (distToEnd \x3c -1.) {\n\t\t\t\tdiscard;\n\t\t\t\treturn;\n\t\t\t}\n\t\t\talpha *\x3d min(max(distToEnd + 1., 0.), 1.);\n\t\t}\n\t}\n\n\t// round miter\n\telse if (miterMode \x3d\x3d 2.) {\n\t\tif (enableStartMiter \x3d\x3d 1.) {\n\t\t\tdistToStart \x3d distToLine(gl_FragCoord.xy, startCutoff.xy, startCutoff.zw);\n\t\t\tif (distToStart \x3c 0.) {\n\t\t\t\tfloat radius \x3d length(gl_FragCoord.xy - startCoord);\n\n\t\t\t\tif(radius \x3e cutoff + .5) {\n\t\t\t\t\tdiscard;\n\t\t\t\t\treturn;\n\t\t\t\t}\n\n\t\t\t\talpha -\x3d smoothstep(cutoff - .5, cutoff + .5, radius);\n\t\t\t}\n\t\t}\n\n\t\tif (enableEndMiter \x3d\x3d 1.) {\n\t\t\tdistToEnd \x3d distToLine(gl_FragCoord.xy, endCutoff.xy, endCutoff.zw);\n\t\t\tif (distToEnd \x3c 0.) {\n\t\t\t\tfloat radius \x3d length(gl_FragCoord.xy - endCoord);\n\n\t\t\t\tif(radius \x3e cutoff + .5) {\n\t\t\t\t\tdiscard;\n\t\t\t\t\treturn;\n\t\t\t\t}\n\n\t\t\t\talpha -\x3d smoothstep(cutoff - .5, cutoff + .5, radius);\n\t\t\t}\n\t\t}\n\t}\n\n\tfloat t \x3d fract(dot(tangent, gl_FragCoord.xy) / dashSize) * .5 + .25;\n\tfloat dash \x3d texture2D(dashPattern, vec2(t, .5)).r;\n\n\tgl_FragColor \x3d fragColor;\n\tgl_FragColor.a *\x3d alpha * opacity * dash;\n}\n"]),
attributes:{lineEnd:{buffer:t,divisor:0,stride:8,offset:0},lineTop:{buffer:t,divisor:0,stride:8,offset:4},aColor:{buffer:k.prop("colorBuffer"),stride:4,offset:0,divisor:1},bColor:{buffer:k.prop("colorBuffer"),stride:4,offset:4,divisor:1},prevCoord:{buffer:k.prop("positionBuffer"),stride:8,offset:0,divisor:1},aCoord:{buffer:k.prop("positionBuffer"),stride:8,offset:8,divisor:1},bCoord:{buffer:k.prop("positionBuffer"),stride:8,offset:16,divisor:1},nextCoord:{buffer:k.prop("positionBuffer"),stride:8,
offset:24,divisor:1}}},v))}catch(B){y=w}return{fill:k({primitive:"triangle",elements:function(B,A){return A.triangles},offset:0,vert:a(["precision highp float;\n#define GLSLIFY 1\n\nattribute vec2 position, positionFract;\n\nuniform vec4 color;\nuniform vec2 scale, scaleFract, translate, translateFract;\nuniform float pixelRatio, id;\nuniform vec4 viewport;\nuniform float opacity;\n\nvarying vec4 fragColor;\n\nconst float MAX_LINES \x3d 256.;\n\nvoid main() {\n\tfloat depth \x3d (MAX_LINES - 4. - id) / (MAX_LINES);\n\n\tvec2 position \x3d position * scale + translate\n       + positionFract * scale + translateFract\n       + position * scaleFract\n       + positionFract * scaleFract;\n\n\tgl_Position \x3d vec4(position * 2.0 - 1.0, depth, 1);\n\n\tfragColor \x3d color / 255.;\n\tfragColor.a *\x3d opacity;\n}\n"]),
frag:a(["precision highp float;\n#define GLSLIFY 1\n\nvarying vec4 fragColor;\n\nvoid main() {\n\tgl_FragColor \x3d fragColor;\n}\n"]),uniforms:{scale:k.prop("scale"),color:k.prop("fill"),scaleFract:k.prop("scaleFract"),translateFract:k.prop("translateFract"),translate:k.prop("translate"),opacity:k.prop("opacity"),pixelRatio:k.context("pixelRatio"),id:k.prop("id"),viewport:function(B,A){return[A.viewport.x,A.viewport.y,B.viewportWidth,B.viewportHeight]}},attributes:{position:{buffer:k.prop("positionBuffer"),
stride:8,offset:8},positionFract:{buffer:k.prop("positionFractBuffer"),stride:8,offset:8}},blend:v.blend,depth:{enable:!1},scissor:v.scissor,stencil:v.stencil,viewport:v.viewport}),rect:w,miter:y}};r.defaults={dashes:null,join:"miter",miterLimit:1,thickness:10,cap:"square",color:"black",opacity:1,overlay:!1,viewport:null,range:null,close:!1,fill:null};r.prototype.render=function(){for(var k=[],t=arguments.length;t--;)k[t]=arguments[t];k.length&&this.update.apply(this,k);this.draw()};r.prototype.draw=
function(){for(var k=this,t=[],v=arguments.length;v--;)t[v]=arguments[v];(t.length?t:this.passes).forEach(function(w,y){if(w&&Array.isArray(w))return k.draw.apply(k,w);"number"===typeof w&&(w=k.passes[w]);w&&1<w.count&&w.opacity&&(k.regl._refresh(),w.fill&&w.triangles&&2<w.triangles.length&&k.shaders.fill(w),w.thickness&&(w.scale[0]*w.viewport.width>r.precisionThreshold||w.scale[1]*w.viewport.height>r.precisionThreshold?k.shaders.rect(w):"rect"===w.join||!w.join&&(2>=w.thickness||w.count>=r.maxPoints)?
k.shaders.rect(w):k.shaders.miter(w)))});return this};r.prototype.update=function(k){var t=this;if(k){null!=k.length?"number"===typeof k[0]&&(k=[{positions:k}]):Array.isArray(k)||(k=[k]);var v=this.regl,w=this.gl;k.forEach(function(A,z){var E=t.passes[z];if(void 0!==A)if(null===A)t.passes[z]=null;else{"number"===typeof A[0]&&(A={positions:A});A=h(A,{positions:"positions points data coords",thickness:"thickness lineWidth lineWidths line-width linewidth width stroke-width strokewidth strokeWidth",join:"lineJoin linejoin join type mode",
miterLimit:"miterlimit miterLimit",dashes:"dash dashes dasharray dash-array dashArray",color:"color colour stroke colors colours stroke-color strokeColor",fill:"fill fill-color fillColor",opacity:"alpha opacity",overlay:"overlay crease overlap intersect",close:"closed close closed-path closePath",range:"range dataBox",viewport:"viewport viewBox",hole:"holes hole hollow"});E||(t.passes[z]=E={id:z,scale:null,scaleFract:null,translate:null,translateFract:null,count:0,hole:[],depth:0,dashLength:1,dashTexture:v.texture({channels:1,
data:new Uint8Array([255]),width:1,height:1,mag:"linear",min:"linear"}),colorBuffer:v.buffer({usage:"dynamic",type:"uint8",data:new Uint8Array}),positionBuffer:v.buffer({usage:"dynamic",type:"float",data:new Uint8Array}),positionFractBuffer:v.buffer({usage:"dynamic",type:"float",data:new Uint8Array})},A=l({},r.defaults,A));null!=A.thickness&&(E.thickness=parseFloat(A.thickness));null!=A.opacity&&(E.opacity=parseFloat(A.opacity));null!=A.miterLimit&&(E.miterLimit=parseFloat(A.miterLimit));null!=A.overlay&&
(E.overlay=!!A.overlay,z<r.maxLines&&(E.depth=2*(r.maxLines-1-z%r.maxLines)/r.maxLines-1));null!=A.join&&(E.join=A.join);null!=A.hole&&(E.hole=A.hole);null!=A.fill&&(E.fill=A.fill?q(A.fill,"uint8"):null);null!=A.viewport&&(E.viewport=f(A.viewport));E.viewport||(E.viewport=f([w.drawingBufferWidth,w.drawingBufferHeight]));null!=A.close&&(E.close=A.close);null===A.positions&&(A.positions=[]);if(A.positions){if(A.positions.x&&A.positions.y){var C=A.positions.x,u=A.positions.y;var D=E.count=Math.max(C.length,
u.length);z=new Float64Array(2*D);for(var G=0;G<D;G++)z[2*G]=C[G],z[2*G+1]=u[G]}else z=g(A.positions,"float64"),D=E.count=Math.floor(z.length/2);C=E.bounds=m(z,2);if(E.fill){G=[];u={};for(var J=0,L=0,K=0,H=E.count;L<H;L++){var Q=z[2*L],M=z[2*L+1];isNaN(Q)||isNaN(M)||null==Q||null==M?(Q=z[2*J],M=z[2*J+1],u[L]=J):J=L;G[K++]=Q;G[K++]=M}G=n(G,E.hole||[]);J=0;for(L=G.length;J<L;J++)null!=u[G[J]]&&(G[J]=u[G[J]]);E.triangles=G}u=new Float64Array(z);p(u,2,C);C=new Float64Array(2*D+6);E.close?z[0]===z[2*D-
2]&&z[1]===z[2*D-1]?(C[0]=u[2*D-4],C[1]=u[2*D-3]):(C[0]=u[2*D-2],C[1]=u[2*D-1]):(C[0]=u[0],C[1]=u[1]);C.set(u,2);E.close?z[0]===z[2*D-2]&&z[1]===z[2*D-1]?(C[2*D+2]=u[2],C[2*D+3]=u[3],--E.count):(C[2*D+2]=u[0],C[2*D+3]=u[1],C[2*D+4]=u[2],C[2*D+5]=u[3]):(C[2*D+2]=u[2*D-2],C[2*D+3]=u[2*D-1],C[2*D+4]=u[2*D-2],C[2*D+5]=u[2*D-1]);E.positionBuffer(d(C));E.positionFractBuffer(e(C))}A.range?E.range=A.range:E.range||(E.range=E.bounds);(A.range||A.positions)&&E.count&&(z=E.bounds,D=E.range[2]-E.range[0],C=E.range[3]-
E.range[1],E.scale=[(z[2]-z[0])/D,(z[3]-z[1])/C],E.translate=[-E.range[0]/D+z[0]/D||0,-E.range[1]/C+z[1]/C||0],E.scaleFract=e(E.scale),E.translateFract=e(E.translate));if(A.dashes){if(!A.dashes||2>A.dashes.length)z=1,D=new Uint8Array([255,255,255,255,255,255,255,255]);else{for(D=z=0;D<A.dashes.length;++D)z+=A.dashes[D];D=new Uint8Array(z*r.dashMult);C=0;u=255;for(G=0;2>G;G++)for(J=0;J<A.dashes.length;++J){L=0;for(K=A.dashes[J]*r.dashMult*.5;L<K;++L)D[C++]=u;u^=255}}E.dashLength=z;E.dashTexture({channels:1,
data:D,width:D.length,height:1,mag:"linear",min:"linear"},0,0)}if(A.color){z=E.count;(D=A.color)||(D="transparent");A=new Uint8Array(4*z+4);if(Array.isArray(D)&&"number"!==typeof D[0]){for(C=0;C<z;C++)u=q(D[C],"uint8"),A.set(u,4*C);A.set(q(D[0],"uint8"),4*z)}else for(D=q(D,"uint8"),C=0;C<z+1;C++)A.set(D,4*C);E.colorBuffer({usage:"dynamic",type:"uint8",data:A})}}});if(k.length<this.passes.length){for(var y=k.length;y<this.passes.length;y++){var B=this.passes[y];B&&(B.colorBuffer.destroy(),B.positionBuffer.destroy(),
B.dashTexture.destroy())}this.passes.length=k.length}k=[];for(y=0;y<this.passes.length;y++)null!==this.passes[y]&&k.push(this.passes[y]);this.passes=k;return this}};r.prototype.destroy=function(){this.passes.forEach(function(k){k.colorBuffer.destroy();k.positionBuffer.destroy();k.dashTexture.destroy()});this.passes.length=0;return this}},{"array-bounds":70,"array-normalize":71,"color-normalize":125,earcut:177,"es6-weak-map":233,"flatten-vertex-data":244,glslify:536,"object-assign":499,"parse-rect":504,
"pick-by-alias":511,"to-float32":577}],536:[function(b,N,I){arguments[4][257][0].apply(I,arguments)},{dup:257}],537:[function(b,N,I){function r(y,B){if(y){if("string"===typeof y)return q(y,B);var A=Object.prototype.toString.call(y).slice(8,-1);"Object"===A&&y.constructor&&(A=y.constructor.name);if("Map"===A||"Set"===A)return Array.from(y);if("Arguments"===A||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(A))return q(y,B)}}function q(y,B){if(null==B||B>y.length)B=y.length;for(var A=0,z=Array(B);A<
B;A++)z[A]=y[A];return z}function m(y,B){var A=this;if(!(this instanceof m))return new m(y,B);"function"===typeof y?(B||(B={}),B.regl=y):(B=y,y=null);B&&B.length&&(B.positions=B);y=B.regl;var z=y._gl,E=[];this.tooManyColors=k;var C=y.texture({data:new Uint8Array(1020),width:255,height:1,type:"uint8",format:"rgba",wrapS:"clamp",wrapT:"clamp",mag:"nearest",min:"nearest"});n(this,{regl:y,gl:z,groups:[],markerCache:[null],markerTextures:[null],palette:E,paletteIds:{},paletteTexture:C,maxColors:255,maxSize:100,
canvas:z.canvas});this.update(B);z={uniforms:{constPointSize:!!B.constPointSize,pixelRatio:y.context("pixelRatio"),palette:C,paletteSize:function(u,D){return[A.tooManyColors?0:255,C.height]},scale:y.prop("scale"),scaleFract:y.prop("scaleFract"),translate:y.prop("translate"),translateFract:y.prop("translateFract"),opacity:y.prop("opacity"),marker:y.prop("markerTexture")},attributes:{x:function(u,D){return D.xAttr||{buffer:D.positionBuffer,stride:8,offset:0}},y:function(u,D){return D.yAttr||{buffer:D.positionBuffer,
stride:8,offset:4}},xFract:function(u,D){return D.xAttr?{constant:[0,0]}:{buffer:D.positionFractBuffer,stride:8,offset:0}},yFract:function(u,D){return D.yAttr?{constant:[0,0]}:{buffer:D.positionFractBuffer,stride:8,offset:4}},size:function(u,D){return D.size.length?{buffer:D.sizeBuffer,stride:2,offset:0}:{constant:[Math.round(255*D.size/A.maxSize)]}},borderSize:function(u,D){return D.borderSize.length?{buffer:D.sizeBuffer,stride:2,offset:1}:{constant:[Math.round(255*D.borderSize/A.maxSize)]}},colorId:function(u,
D){return D.color.length?{buffer:D.colorBuffer,stride:A.tooManyColors?8:4,offset:0}:{constant:A.tooManyColors?E.slice(4*D.color,4*D.color+4):[D.color]}},borderColorId:function(u,D){return D.borderColor.length?{buffer:D.colorBuffer,stride:A.tooManyColors?8:4,offset:A.tooManyColors?4:2}:{constant:A.tooManyColors?E.slice(4*D.borderColor,4*D.borderColor+4):[D.borderColor]}},isActive:function(u,D){return!0===D.activation?{constant:[1]}:D.activation?D.activation:{constant:[0]}}},blend:{enable:!0,color:[0,
0,0,1],func:{srcRGB:"src alpha",dstRGB:"one minus src alpha",srcAlpha:"one minus dst alpha",dstAlpha:"one"}},scissor:{enable:!0,box:y.prop("viewport")},viewport:y.prop("viewport"),stencil:{enable:!1},depth:{enable:!1},elements:y.prop("elements"),count:y.prop("count"),offset:y.prop("offset"),primitive:"points"};B=n({},z);B.frag=p(["precision highp float;\n#define GLSLIFY 1\n\nvarying vec4 fragColor, fragBorderColor;\nvarying float fragWidth, fragBorderColorLevel, fragColorLevel;\n\nuniform sampler2D marker;\nuniform float opacity;\n\nfloat smoothStep(float x, float y) {\n  return 1.0 / (1.0 + exp(50.0*(x - y)));\n}\n\nvoid main() {\n  float dist \x3d texture2D(marker, gl_PointCoord).r, delta \x3d fragWidth;\n\n  // max-distance alpha\n  if (dist \x3c 0.003) discard;\n\n  // null-border case\n  if (fragBorderColorLevel \x3d\x3d fragColorLevel || fragBorderColor.a \x3d\x3d 0.) {\n    float colorAmt \x3d smoothstep(.5 - delta, .5 + delta, dist);\n    gl_FragColor \x3d vec4(fragColor.rgb, colorAmt * fragColor.a * opacity);\n  }\n  else {\n    float borderColorAmt \x3d smoothstep(fragBorderColorLevel - delta, fragBorderColorLevel + delta, dist);\n    float colorAmt \x3d smoothstep(fragColorLevel - delta, fragColorLevel + delta, dist);\n\n    vec4 color \x3d fragBorderColor;\n    color.a *\x3d borderColorAmt;\n    color \x3d mix(color, fragColor, colorAmt);\n    color.a *\x3d opacity;\n\n    gl_FragColor \x3d color;\n  }\n\n}\n"]);
B.vert=p(["precision highp float;\n#define GLSLIFY 1\n\nattribute float x, y, xFract, yFract;\nattribute float size, borderSize;\nattribute vec4 colorId, borderColorId;\nattribute float isActive;\n\nuniform vec2 scale, scaleFract, translate, translateFract, paletteSize;\nuniform float pixelRatio;\nuniform bool constPointSize;\nuniform sampler2D palette;\n\nconst float maxSize \x3d 100.;\nconst float borderLevel \x3d .5;\n\nvarying vec4 fragColor, fragBorderColor;\nvarying float fragPointSize, fragBorderRadius, fragWidth, fragBorderColorLevel, fragColorLevel;\n\nfloat pointSizeScale \x3d (constPointSize) ? 2. : pixelRatio;\n\nbool isDirect \x3d (paletteSize.x \x3c 1.);\n\nvec4 getColor(vec4 id) {\n  return isDirect ? id / 255. : texture2D(palette,\n    vec2(\n      (id.x + .5) / paletteSize.x,\n      (id.y + .5) / paletteSize.y\n    )\n  );\n}\n\nvoid main() {\n  // ignore inactive points\n  if (isActive \x3d\x3d 0.) return;\n\n  vec2 position \x3d vec2(x, y);\n  vec2 positionFract \x3d vec2(xFract, yFract);\n\n  vec4 color \x3d getColor(colorId);\n  vec4 borderColor \x3d getColor(borderColorId);\n\n  float size \x3d size * maxSize / 255.;\n  float borderSize \x3d borderSize * maxSize / 255.;\n\n  gl_PointSize \x3d 2. * size * pointSizeScale;\n  fragPointSize \x3d size * pixelRatio;\n\n  vec2 pos \x3d (position + translate) * scale\n      + (positionFract + translateFract) * scale\n      + (position + translate) * scaleFract\n      + (positionFract + translateFract) * scaleFract;\n\n  gl_Position \x3d vec4(pos * 2. - 1., 0., 1.);\n\n  fragColor \x3d color;\n  fragBorderColor \x3d borderColor;\n  fragWidth \x3d 1. / gl_PointSize;\n\n  fragBorderColorLevel \x3d clamp(borderLevel - borderLevel * borderSize / size, 0., 1.);\n  fragColorLevel \x3d clamp(borderLevel + (1. - borderLevel) * borderSize / size, 0., 1.);\n}"]);
this.drawMarker=y(B);z=n({},z);z.frag=p(["precision highp float;\n#define GLSLIFY 1\n\nvarying vec4 fragColor, fragBorderColor;\n\nuniform float opacity;\nvarying float fragBorderRadius, fragWidth;\n\nfloat smoothStep(float edge0, float edge1, float x) {\n\tfloat t;\n\tt \x3d clamp((x - edge0) / (edge1 - edge0), 0.0, 1.0);\n\treturn t * t * (3.0 - 2.0 * t);\n}\n\nvoid main() {\n\tfloat radius, alpha \x3d 1.0, delta \x3d fragWidth;\n\n\tradius \x3d length(2.0 * gl_PointCoord.xy - 1.0);\n\n\tif (radius \x3e 1.0 + delta) {\n\t\tdiscard;\n\t}\n\n\talpha -\x3d smoothstep(1.0 - delta, 1.0 + delta, radius);\n\n\tfloat borderRadius \x3d fragBorderRadius;\n\tfloat ratio \x3d smoothstep(borderRadius - delta, borderRadius + delta, radius);\n\tvec4 color \x3d mix(fragColor, fragBorderColor, ratio);\n\tcolor.a *\x3d alpha * opacity;\n\tgl_FragColor \x3d color;\n}\n"]);
z.vert=p(["precision highp float;\n#define GLSLIFY 1\n\nattribute float x, y, xFract, yFract;\nattribute float size, borderSize;\nattribute vec4 colorId, borderColorId;\nattribute float isActive;\n\nuniform vec2 scale, scaleFract, translate, translateFract;\nuniform float pixelRatio;\nuniform bool constPointSize;\nuniform sampler2D palette;\nuniform vec2 paletteSize;\n\nconst float maxSize \x3d 100.;\n\nvarying vec4 fragColor, fragBorderColor;\nvarying float fragBorderRadius, fragWidth;\n\nfloat pointSizeScale \x3d (constPointSize) ? 2. : pixelRatio;\n\nbool isDirect \x3d (paletteSize.x \x3c 1.);\n\nvec4 getColor(vec4 id) {\n  return isDirect ? id / 255. : texture2D(palette,\n    vec2(\n      (id.x + .5) / paletteSize.x,\n      (id.y + .5) / paletteSize.y\n    )\n  );\n}\n\nvoid main() {\n  // ignore inactive points\n  if (isActive \x3d\x3d 0.) return;\n\n  vec2 position \x3d vec2(x, y);\n  vec2 positionFract \x3d vec2(xFract, yFract);\n\n  vec4 color \x3d getColor(colorId);\n  vec4 borderColor \x3d getColor(borderColorId);\n\n  float size \x3d size * maxSize / 255.;\n  float borderSize \x3d borderSize * maxSize / 255.;\n\n  gl_PointSize \x3d (size + borderSize) * pointSizeScale;\n\n  vec2 pos \x3d (position + translate) * scale\n      + (positionFract + translateFract) * scale\n      + (position + translate) * scaleFract\n      + (positionFract + translateFract) * scaleFract;\n\n  gl_Position \x3d vec4(pos * 2. - 1., 0., 1.);\n\n  fragBorderRadius \x3d 1. - 2. * borderSize / (size + borderSize);\n  fragColor \x3d color;\n  fragBorderColor \x3d borderColor.a \x3d\x3d 0. || borderSize \x3d\x3d 0. ? vec4(color.rgb, 0.) : borderColor;\n  fragWidth \x3d 1. / gl_PointSize;\n}\n"]);
k&&(z.frag=z.frag.replace("smoothstep","smoothStep"),B.frag=B.frag.replace("smoothstep","smoothStep"));this.drawCircle=y(z)}var l=b("color-normalize"),a=b("array-bounds"),h=b("color-id"),g=b("@plotly/point-cluster"),n=b("object-assign"),p=b("glslify"),d=b("pick-by-alias"),e=b("update-diff"),f=b("flatten-vertex-data"),k=b("is-iexplorer"),t=b("to-float32"),v=b("parse-rect");m.defaults={color:"black",borderColor:"transparent",borderSize:0,size:12,opacity:1,marker:void 0,viewport:null,range:null,pixelSize:null,
count:0,offset:0,bounds:null,positions:[],snap:1E4};m.prototype.render=function(){arguments.length&&this.update.apply(this,arguments);this.draw();return this};m.prototype.draw=function(){for(var y=this,B=arguments.length,A=Array(B),z=0;z<B;z++)A[z]=arguments[z];B=this.groups;1===A.length&&Array.isArray(A[0])&&(null===A[0][0]||Array.isArray(A[0][0]))&&(A=A[0]);this.regl._refresh();if(A.length)for(B=0;B<A.length;B++)this.drawItem(B,A[B]);else B.forEach(function(E,C){y.drawItem(C)});return this};m.prototype.drawItem=
function(y,B){var A=this.groups;y=A[y];"number"===typeof B&&(y=A[B],B=null);if(y&&y.count&&y.opacity){y.activation[0]&&this.drawCircle(this.getMarkerDrawOptions(0,y,B));A=[];for(var z=1;z<y.activation.length;z++)if(y.activation[z]&&(!0===y.activation[z]||y.activation[z].data.length)){var E=A.push,C=E.apply,u=this.getMarkerDrawOptions(z,y,B);var D=u;D=Array.isArray(D)?q(D):void 0;D||(D="undefined"!==typeof Symbol&&Symbol.iterator in Object(u)?Array.from(u):void 0);if(!(u=D||r(u)))throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.");
C.call(E,A,u)}A.length&&this.drawMarker(A)}};m.prototype.getMarkerDrawOptions=function(y,B,A){var z=B.range,E=B.tree,C=B.viewport,u=B.activation,D=B.selectionBuffer,G=B.count;if(!E)return A?[n({},B,{markerTexture:this.markerTextures[y],activation:u[y],count:A.length,elements:A,offset:0})]:[n({},B,{markerTexture:this.markerTextures[y],activation:u[y],offset:0})];var J=[];z=E.range(z,{lod:!0,px:[(z[2]-z[0])/C.width,(z[3]-z[1])/C.height]});if(A){E=u[y].data;G=new Uint8Array(G);for(C=0;C<A.length;C++){var L=
A[C];G[L]=E?E[L]:1}D.subdata(G)}for(G=z.length;G--;){E=z[G];C=E;C=Array.isArray(C)?C:void 0;if(!C)if(C=void 0,"undefined"!==typeof Symbol&&Symbol.iterator in Object(E)){L=[];var K=!0,H=!1,Q=void 0;try{for(var M=E[Symbol.iterator]();!(K=(C=M.next()).done)&&(L.push(C.value),2!==L.length);K=!0);}catch(P){H=!0,Q=P}finally{try{if(!K&&null!=M["return"])M["return"]()}finally{if(H)throw Q;}}C=L}else C=void 0;if(!(E=C||r(E,2)))throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.");
C=E[0];J.push(n({},B,{markerTexture:this.markerTextures[y],activation:A?D:u[y],offset:C,count:E[1]-C}))}return J};m.prototype.update=function(){for(var y=this,B=arguments.length,A=Array(B),z=0;z<B;z++)A[z]=arguments[z];if(A.length){1===A.length&&Array.isArray(A[0])&&(A=A[0]);var E=this.groups,C=this.gl,u=this.regl,D=this.maxSize,G=this.maxColors,J=this.palette;this.groups=E=A.map(function(L,K){var H=E[K];if(void 0===L)return H;null===L?L={positions:null}:"function"===typeof L?L={ondraw:L}:"number"===
typeof L[0]&&(L={positions:L});L=d(L,{positions:"positions data points",snap:"snap cluster lod tree",size:"sizes size radius",borderSize:"borderSizes borderSize border-size bordersize borderWidth borderWidths border-width borderwidth stroke-width strokeWidth strokewidth outline",color:"colors color fill fill-color fillColor",borderColor:"borderColors borderColor stroke stroke-color strokeColor",marker:"markers marker shape",range:"range dataBox databox",viewport:"viewport viewPort viewBox viewbox",
opacity:"opacity alpha transparency",bounds:"bound bounds boundaries limits",tooManyColors:"tooManyColors palette paletteMode optimizePalette enablePalette"});null===L.positions&&(L.positions=[]);null!=L.tooManyColors&&(y.tooManyColors=L.tooManyColors);H||(E[K]=H={id:K,scale:null,translate:null,scaleFract:null,translateFract:null,activation:[],selectionBuffer:u.buffer({data:new Uint8Array(0),usage:"stream",type:"uint8"}),sizeBuffer:u.buffer({data:new Uint8Array(0),usage:"dynamic",type:"uint8"}),colorBuffer:u.buffer({data:new Uint8Array(0),
usage:"dynamic",type:"uint8"}),positionBuffer:u.buffer({data:new Uint8Array(0),usage:"dynamic",type:"float"}),positionFractBuffer:u.buffer({data:new Uint8Array(0),usage:"dynamic",type:"float"})},L=n({},m.defaults,L));!L.positions||"marker"in L||(L.marker=H.marker,delete H.marker);!L.marker||"positions"in L||(L.positions=H.positions,delete H.positions);var Q=0,M=0;e(H,L,[{snap:!0,size:function(X,ba){null==X&&(X=m.defaults.size);Q+=X&&X.length?1:0;return X},borderSize:function(X,ba){null==X&&(X=m.defaults.borderSize);
Q+=X&&X.length?1:0;return X},opacity:parseFloat,color:function(X,ba){null==X&&(X=m.defaults.color);X=y.updateColor(X);M++;return X},borderColor:function(X,ba){null==X&&(X=m.defaults.borderColor);X=y.updateColor(X);M++;return X},bounds:function(X,ba,ca){"range"in ca||(ca.range=null);return X},positions:function(X,ba,ca){var ia=ba.snap,ja=ba.positionBuffer,la=ba.positionFractBuffer,da=ba.selectionBuffer;if(X.x||X.y)return ba.xAttr=X.x.length?{buffer:u.buffer(X.x),offset:0,stride:4,count:X.x.length}:
{buffer:X.x.buffer,offset:4*X.x.offset||0,stride:4*(X.x.stride||1),count:X.x.count},ba.yAttr=X.y.length?{buffer:u.buffer(X.y),offset:0,stride:4,count:X.y.length}:{buffer:X.y.buffer,offset:4*X.y.offset||0,stride:4*(X.y.stride||1),count:X.y.count},ba.count=Math.max(ba.xAttr.count,ba.yAttr.count),X;X=f(X,"float64");var oa=ba.count=Math.floor(X.length/2),sa=ba.bounds=oa?a(X,2):null;ca.range||ba.range||(delete ba.range,ca.range=sa);ca.marker||ba.marker||(delete ba.marker,ca.marker=null);ia&&(!0===ia||
oa>ia)?ba.tree=g(X,{bounds:sa}):ia&&ia.length&&(ba.tree=ia);ba.tree&&(ca={primitive:"points",usage:"static",data:ba.tree,type:"uint32"},ba.elements?ba.elements(ca):ba.elements=u.elements(ca));ja({data:t.float(X),usage:"dynamic"});la({data:t.fract(X),usage:"dynamic"});da({data:new Uint8Array(oa),type:"uint8",usage:"stream"});return X}},{marker:function(X,ba,ca){ca=ba.activation;ca.forEach(function(oa){return oa&&oa.destroy&&oa.destroy()});ca.length=0;if(X&&"number"!==typeof X[0]){for(var ia=[],ja=
0,la=Math.min(X.length,ba.count);ja<la;ja++){var da=y.addMarker(X[ja]);ia[da]||(ia[da]=new Uint8Array(ba.count));ia[da][ja]=1}for(ba=0;ba<ia.length;ba++)if(ia[ba]){ja={data:ia[ba],type:"uint8",usage:"static"};if(ca[ba])ca[ba](ja);else ca[ba]=u.buffer(ja);ca[ba].data=ia[ba]}}else ia=y.addMarker(X),ca[ia]=!0;return X},range:function(X,ba,ca){if(ca=ba.bounds)return X||(X=ca),ba.scale=[1/(X[2]-X[0]),1/(X[3]-X[1])],ba.translate=[-X[0],-X[1]],ba.scaleFract=t.fract(ba.scale),ba.translateFract=t.fract(ba.translate),
X},viewport:function(X){return v(X||[C.drawingBufferWidth,C.drawingBufferHeight])}}]);if(Q){var P=H;L=P.count;K=P.size;var T=P.borderSize;P=P.sizeBuffer;var O=new Uint8Array(2*L);if(K.length||T.length)for(var U=0;U<L;U++)O[2*U]=Math.round(255*(null==K[U]?K:K[U])/D),O[2*U+1]=Math.round(255*(null==T[U]?T:T[U])/D);P({data:O,usage:"dynamic"})}if(M){P=H;L=P.count;K=P.color;T=P.borderColor;P=P.colorBuffer;if(y.tooManyColors){if(K.length||T.length){var S=new Uint8Array(8*L);for(O=0;O<L;O++)U=K[O],S[8*O]=
J[4*U],S[8*O+1]=J[4*U+1],S[8*O+2]=J[4*U+2],S[8*O+3]=J[4*U+3],U=T[O],S[8*O+4]=J[4*U],S[8*O+5]=J[4*U+1],S[8*O+6]=J[4*U+2],S[8*O+7]=J[4*U+3]}}else if(K.length||T.length)for(S=new Uint8Array(4*L+2),O=0;O<L;O++)null!=K[O]&&(S[4*O]=K[O]%G,S[4*O+1]=Math.floor(K[O]/G)),null!=T[O]&&(S[4*O+2]=T[O]%G,S[4*O+3]=Math.floor(T[O]/G));P({data:S||new Uint8Array(0),type:"uint8",usage:"dynamic"})}return H})}};m.prototype.addMarker=function(y){var B=this.markerTextures,A=this.regl,z=this.markerCache,E=null==y?0:z.indexOf(y);
if(0<=E)return E;if(y instanceof Uint8Array||y instanceof Uint8ClampedArray)var C=y;else{C=new Uint8Array(y.length);E=0;for(var u=y.length;E<u;E++)C[E]=255*y[E]}u=Math.floor(Math.sqrt(C.length));E=B.length;z.push(y);B.push(A.texture({channels:1,data:C,radius:u,mag:"linear",min:"linear"}));return E};m.prototype.updateColor=function(y){var B=this.paletteIds,A=this.palette,z=this.maxColors;Array.isArray(y)||(y=[y]);var E=[];if("number"===typeof y[0]){var C=[];if(Array.isArray(y))for(var u=0;u<y.length;u+=
4)C.push(y.slice(u,u+4));else for(u=0;u<y.length;u+=4)C.push(y.subarray(u,u+4));y=C}for(C=0;C<y.length;C++){u=y[C];u=l(u,"uint8");var D=h(u,!1);if(null==B[D]){var G=A.length;B[D]=Math.floor(G/4);A[G]=u[0];A[G+1]=u[1];A[G+2]=u[2];A[G+3]=u[3]}E[C]=B[D]}!this.tooManyColors&&A.length>4*z&&(this.tooManyColors=!0);this.updatePalette(A);return 1===E.length?E[0]:E};m.prototype.updatePalette=function(y){if(!this.tooManyColors){var B=this.maxColors,A=this.paletteTexture,z=Math.ceil(.25*y.length/B);if(1<z){y=
y.slice();for(var E=.25*y.length%B;E<z*B;E++)y.push(0,0,0,0)}A.height<z&&A.resize(B,z);A.subimage({width:Math.min(.25*y.length,B),height:z,data:y},0,0)}};m.prototype.destroy=function(){this.groups.forEach(function(y){y.sizeBuffer.destroy();y.positionBuffer.destroy();y.positionFractBuffer.destroy();y.colorBuffer.destroy();y.activation.forEach(function(B){return B&&B.destroy&&B.destroy()});y.selectionBuffer.destroy();y.elements&&y.elements.destroy()});this.groups.length=0;this.paletteTexture.destroy();
this.markerTextures.forEach(function(y){return y&&y.destroy&&y.destroy()});return this};var w=b("object-assign");N.exports=function(y,B){y=new m(y,B);B=y.render.bind(y);w(B,{render:B,update:y.update.bind(y),draw:y.draw.bind(y),destroy:y.destroy.bind(y),regl:y.regl,gl:y.gl,canvas:y.gl.canvas,groups:y.groups,markers:y.markerCache,palette:y.palette});return B}},{"@plotly/point-cluster":57,"array-bounds":70,"color-id":123,"color-normalize":125,"flatten-vertex-data":244,glslify:538,"is-iexplorer":466,
"object-assign":499,"parse-rect":504,"pick-by-alias":511,"to-float32":577,"update-diff":599}],538:[function(b,N,I){arguments[4][257][0].apply(I,arguments)},{dup:257}],539:[function(b,N,I){function r(e,f){if(!(this instanceof r))return new r(e,f);this.traces=[];this.passes={};this.regl=e;this.scatter=l(e);this.canvas=this.scatter.canvas}function q(e,f,k){f=e[f];var t=e[k];2<f.length?(e=f[1],f=f[3]):f.length?(e=f[0],f=f[1]):(e=f.y,f=f.y+f.height);2<t.length?(k=t[0],t=t[2]):t.length?(k=t[0],t=t[1]):
(k=t.x,t=t.x+t.width);return[k,e,t,f]}function m(e){if("number"===typeof e)return[e,e,e,e];if(2===e.length)return[e[0],e[1],e[0],e[1]];e=p(e);return[e.x,e.y,e.x+e.width,e.y+e.height]}var l=b("regl-scatter2d"),a=b("pick-by-alias"),h=b("array-bounds"),g=b("raf"),n=b("array-range"),p=b("parse-rect"),d=b("flatten-vertex-data");N.exports=r;r.prototype.render=function(){for(var e=this,f=[],k=arguments.length;k--;)f[k]=arguments[k];f.length&&this.update.apply(this,f);if(this.regl.attributes.preserveDrawingBuffer)return this.draw();
this.dirty?null==this.planned&&(this.planned=g(function(){e.draw();e.dirty=!0;e.planned=null})):(this.draw(),this.dirty=!0,g(function(){e.dirty=!1}));return this};r.prototype.update=function(){for(var e,f=[],k=arguments.length;k--;)f[k]=arguments[k];if(f.length){for(k=0;k<f.length;k++)this.updateItem(k,f[k]);this.traces=this.traces.filter(Boolean);f=[];for(var t=k=0;t<this.traces.length;t++){for(var v=this.traces[t],w=this.traces[t].passes,y=0;y<w.length;y++)f.push(this.passes[w[y]]);v.passOffset=
k;k+=v.passes.length}(e=this.scatter).update.apply(e,f);return this}};r.prototype.updateItem=function(e,f){var k=this.regl;if(null===f)return this.traces[e]=null,this;if(!f)return this;f=a(f,{data:"data items columns rows values dimensions samples x",snap:"snap cluster",size:"sizes size radius",color:"colors color fill fill-color fillColor",opacity:"opacity alpha transparency opaque",borderSize:"borderSizes borderSize border-size bordersize borderWidth borderWidths border-width borderwidth stroke-width strokeWidth strokewidth outline",
borderColor:"borderColors borderColor bordercolor stroke stroke-color strokeColor",marker:"markers marker shape",range:"range ranges databox dataBox",viewport:"viewport viewBox viewbox",domain:"domain domains area areas",padding:"pad padding paddings pads margin margins",transpose:"transpose transposed",diagonal:"diagonal diag showDiagonal",upper:"upper up top upperhalf upperHalf showupperhalf showUpper showUpperHalf",lower:"lower low bottom lowerhalf lowerHalf showlowerhalf showLowerHalf showLower"});
e=this.traces[e]||(this.traces[e]={id:e,buffer:k.buffer({usage:"dynamic",type:"float",data:new Uint8Array}),color:"black",marker:null,size:12,borderColor:"transparent",borderSize:1,viewport:p([k._gl.drawingBufferWidth,k._gl.drawingBufferHeight]),padding:[0,0,0,0],opacity:1,diagonal:!0,upper:!0,lower:!0});null!=f.color&&(e.color=f.color);null!=f.size&&(e.size=f.size);null!=f.marker&&(e.marker=f.marker);null!=f.borderColor&&(e.borderColor=f.borderColor);null!=f.borderSize&&(e.borderSize=f.borderSize);
null!=f.opacity&&(e.opacity=f.opacity);f.viewport&&(e.viewport=p(f.viewport));null!=f.diagonal&&(e.diagonal=f.diagonal);null!=f.upper&&(e.upper=f.upper);null!=f.lower&&(e.lower=f.lower);if(f.data)for(e.buffer(d(f.data)),e.columns=f.data.length,e.count=f.data[0].length,e.bounds=[],k=0;k<e.columns;k++)e.bounds[k]=h(f.data[k],1);if(f.range){e.range=f.range;var t=e.range&&"number"!==typeof e.range[0]}f.domain&&(e.domain=f.domain);k=!1;null!=f.padding&&(Array.isArray(f.padding)&&f.padding.length===e.columns&&
"number"===typeof f.padding[f.padding.length-1]?(e.padding=f.padding.map(m),k=!0):e.padding=m(f.padding));var v=e.columns,w=e.count,y=e.viewport.width,B=e.viewport.height,A=e.viewport.x,z=e.viewport.y,E=y/v,C=B/v;e.passes=[];for(var u=0;u<v;u++)for(var D=0;D<v;D++)if(e.diagonal||D!==u)if(e.upper||!(u>D))if(e.lower||!(u<D)){var G=e.id;G=(null!=G.id?G.id:G)<<16|(u&255)<<8|D&255;var J=this.passes[G]||(this.passes[G]={});f.data&&(J.positions=f.transpose?{x:{buffer:e.buffer,offset:D,count:w,stride:v},
y:{buffer:e.buffer,offset:u,count:w,stride:v}}:{x:{buffer:e.buffer,offset:D*w,count:w},y:{buffer:e.buffer,offset:u*w,count:w}},J.bounds=q(e.bounds,u,D));if(f.domain||f.viewport||f.data){var L=k?q(e.padding,u,D):e.padding;if(e.domain){var K=q(e.domain,u,D);J.viewport=[A+K[0]*y+L[0],z+K[1]*B+L[1],A+K[2]*y-L[2],z+K[3]*B-L[3]]}else J.viewport=[A+D*E+E*L[0],z+u*C+C*L[1],A+(D+1)*E-E*L[2],z+(u+1)*C-C*L[3]]}f.color&&(J.color=e.color);f.size&&(J.size=e.size);f.marker&&(J.marker=e.marker);f.borderSize&&(J.borderSize=
e.borderSize);f.borderColor&&(J.borderColor=e.borderColor);f.opacity&&(J.opacity=e.opacity);f.range&&(J.range=t?q(e.range,u,D):e.range||J.bounds);e.passes.push(G)}return this};r.prototype.draw=function(){for(var e,f=[],k=arguments.length;k--;)f[k]=arguments[k];if(f.length){var t=[];for(k=0;k<f.length;k++)if("number"===typeof f[k]){var v=this.traces[f[k]],w=v.passOffset;t.push.apply(t,n(w,w+v.passes.length))}else if(f[k].length){var y=f[k];v=this.traces[k];w=v.passes;var B=v.passOffset;w=w.map(function(A,
z){t[B+z]=y})}(e=this.scatter).draw.apply(e,t)}else this.scatter.draw();return this};r.prototype.destroy=function(){this.traces.forEach(function(e){e.buffer&&e.buffer.destroy&&e.buffer.destroy()});this.passes=this.traces=null;this.scatter.destroy();return this}},{"array-bounds":70,"array-range":72,"flatten-vertex-data":244,"parse-rect":504,"pick-by-alias":511,raf:528,"regl-scatter2d":537}],540:[function(b,N,I){(function(r,q){"object"===typeof I&&"undefined"!==typeof N?N.exports=q():r.createREGL=q()})(this,
function(){function r(kb,$b){this.id=na++;this.type=kb;this.data=$b}function q(kb){if(0===kb.length)return[];var $b=kb.charAt(0),gc=kb.charAt(kb.length-1);if(1<kb.length&&$b===gc&&('"'===$b||"'"===$b))return['"'+kb.substr(1,kb.length-2).replace(/\\/g,"\\\\").replace(/"/g,'\\"')+'"'];if($b=/\[(false|true|null|\d+|'[^']*'|"[^"]*")\]/.exec(kb))return q(kb.substr(0,$b.index)).concat(q($b[1])).concat(q(kb.substr($b.index+$b[0].length)));$b=kb.split(".");if(1===$b.length)return['"'+kb.replace(/\\/g,"\\\\").replace(/"/g,
'\\"')+'"'];kb=[];for(gc=0;gc<$b.length;++gc)kb=kb.concat(q($b[gc]));return kb}function m(kb){return"["+q(kb).join("][")+"]"}function l(){var kb={"":0},$b=[""];return{id:function(gc){var rc=kb[gc];if(rc)return rc;rc=kb[gc]=$b.length;$b.push(gc);return rc},str:function(gc){return $b[gc]}}}function a(kb,$b,gc){function rc(){var gb=window.innerWidth,vb=window.innerHeight;kb!==document.body&&(vb=kb.getBoundingClientRect(),gb=vb.right-vb.left,vb=vb.bottom-vb.top);xc.width=gc*gb;xc.height=gc*vb;pa(xc.style,
{width:gb+"px",height:vb+"px"})}var xc=document.createElement("canvas");pa(xc.style,{border:0,margin:0,padding:0,top:0,left:0});kb.appendChild(xc);kb===document.body&&(xc.style.position="absolute",pa(kb.style,{margin:0,padding:0}));var Rc;kb!==document.body&&"function"===typeof ResizeObserver?(Rc=new ResizeObserver(function(){setTimeout(rc)}),Rc.observe(kb)):window.addEventListener("resize",rc,!1);rc();return{canvas:xc,onDestroy:function(){Rc?Rc.disconnect():window.removeEventListener("resize",rc);
kb.removeChild(xc)}}}function h(kb,$b){function gc(rc){try{return kb.getContext(rc,$b)}catch(xc){return null}}return gc("webgl")||gc("experimental-webgl")||gc("webgl-experimental")}function g(kb){return"string"===typeof kb?kb.split():kb}function n(kb){return"string"===typeof kb?document.querySelector(kb):kb}function p(kb){var $b=kb||{},gc,rc,xc,Rc;kb={};var gb=[],vb=[],Sb="undefined"===typeof window?1:window.devicePixelRatio,ic=!1,ac=function(Ub){},bc=function(){};"string"===typeof $b?gc=document.querySelector($b):
"object"===typeof $b&&("string"===typeof $b.nodeName&&"function"===typeof $b.appendChild&&"function"===typeof $b.getBoundingClientRect?gc=$b:"function"===typeof $b.drawArrays||"function"===typeof $b.drawElements?(Rc=$b,xc=Rc.canvas):("gl"in $b?Rc=$b.gl:"canvas"in $b?xc=n($b.canvas):"container"in $b&&(rc=n($b.container)),"attributes"in $b&&(kb=$b.attributes),"extensions"in $b&&(gb=g($b.extensions)),"optionalExtensions"in $b&&(vb=g($b.optionalExtensions)),"onDone"in $b&&(ac=$b.onDone),"profile"in $b&&
(ic=!!$b.profile),"pixelRatio"in $b&&(Sb=+$b.pixelRatio)));gc&&("canvas"===gc.nodeName.toLowerCase()?xc=gc:rc=gc);if(!Rc){if(!xc){gc=a(rc||document.body,ac,Sb);if(!gc)return null;xc=gc.canvas;bc=gc.onDestroy}void 0===kb.premultipliedAlpha&&(kb.premultipliedAlpha=!0);Rc=h(xc,kb)}return Rc?{gl:Rc,canvas:xc,container:rc,extensions:gb,optionalExtensions:vb,pixelRatio:Sb,profile:ic,onDone:ac,onDestroy:bc}:(bc(),ac("webgl not supported, try upgrading your browser or graphics drivers http://get.webgl.org"),
null)}function d(kb,$b){function gc(gb){gb=gb.toLowerCase();try{var vb=rc[gb]=kb.getExtension(gb)}catch(Sb){}return!!vb}for(var rc={},xc=0;xc<$b.extensions.length;++xc){var Rc=$b.extensions[xc];if(!gc(Rc))return $b.onDestroy(),$b.onDone('"'+Rc+'" extension is not supported by the current WebGL context, try upgrading your system or a different browser'),null}$b.optionalExtensions.forEach(gc);return{extensions:rc,restore:function(){Object.keys(rc).forEach(function(gb){if(rc[gb]&&!gc(gb))throw Error("(regl): error restoring extension "+
gb);})}}}function e(kb,$b){for(var gc=Array(kb),rc=0;rc<kb;++rc)gc[rc]=$b(rc);return gc}function f(kb){var $b=(65535<kb)<<4;kb>>>=$b;var gc=(255<kb)<<3;kb>>>=gc;$b|=gc;gc=(15<kb)<<2;kb>>>=gc;$b|=gc;gc=(3<kb)<<1;return $b|gc|kb>>>gc>>1}function k(){function kb(rc){a:{for(var xc=16;268435456>=xc;xc*=16)if(rc<=xc){rc=xc;break a}rc=0}xc=gc[f(rc)>>2];return 0<xc.length?xc.pop():new ArrayBuffer(rc)}function $b(rc){gc[f(rc.byteLength)>>2].push(rc)}var gc=e(8,function(){return[]});return{alloc:kb,free:$b,
allocType:function(rc,xc){switch(rc){case 5120:rc=new Int8Array(kb(xc),0,xc);break;case 5121:rc=new Uint8Array(kb(xc),0,xc);break;case 5122:rc=new Int16Array(kb(2*xc),0,xc);break;case 5123:rc=new Uint16Array(kb(2*xc),0,xc);break;case 5124:rc=new Int32Array(kb(4*xc),0,xc);break;case 5125:rc=new Uint32Array(kb(4*xc),0,xc);break;case 5126:rc=new Float32Array(kb(4*xc),0,xc);break;default:return null}return rc.length!==xc?rc.subarray(0,xc):rc},freeType:function(rc){$b(rc.buffer)}}}function t(kb){return!!kb&&
"object"===typeof kb&&Array.isArray(kb.shape)&&Array.isArray(kb.stride)&&"number"===typeof kb.offset&&kb.shape.length===kb.stride.length&&(Array.isArray(kb.data)||Ua(kb.data))}function v(kb,$b,gc,rc,xc,Rc){for(var gb=0;gb<$b;++gb)for(var vb=kb[gb],Sb=0;Sb<gc;++Sb)for(var ic=vb[Sb],ac=0;ac<rc;++ac)xc[Rc++]=ic[ac]}function w(kb,$b,gc,rc,xc){for(var Rc=1,gb=gc+1;gb<$b.length;++gb)Rc*=$b[gb];var vb=$b[gc];if(4===$b.length-gc){var Sb=$b[gc+1],ic=$b[gc+2];$b=$b[gc+3];for(gb=0;gb<vb;++gb)v(kb[gb],Sb,ic,
$b,rc,xc),xc+=Rc}else for(gb=0;gb<vb;++gb)w(kb[gb],$b,gc+1,rc,xc),xc+=Rc}function y(kb){return nb[Object.prototype.toString.call(kb)]|0}function B(kb,$b){for(var gc=0;gc<$b.length;++gc)kb[gc]=$b[gc]}function A(kb,$b,gc,rc,xc,Rc,gb){for(var vb=0,Sb=0;Sb<gc;++Sb)for(var ic=0;ic<rc;++ic)kb[vb++]=$b[xc*Sb+Rc*ic+gb]}function z(kb,$b,gc,rc){function xc(bc){this.id=Sb++;this.buffer=kb.createBuffer();this.type=bc;this.usage=35044;this.byteLength=0;this.dimension=1;this.dtype=5121;this.persistentData=null;
gc.profile&&(this.stats={size:0})}function Rc(bc,Ub,wb){bc.byteLength=Ub.byteLength;kb.bufferData(bc.type,Ub,wb)}function gb(bc,Ub,wb,Lb,Bb,Mb){bc.usage=wb;if(Array.isArray(Ub)){if(bc.dtype=Lb||5126,0<Ub.length)if(Array.isArray(Ub[0])){Bb=pb(Ub);for(var Yb=Lb=1;Yb<Bb.length;++Yb)Lb*=Bb[Yb];bc.dimension=Lb;Ub=jb(Ub,Bb,bc.dtype);Rc(bc,Ub,wb);Mb?bc.persistentData=Ub:Ca.freeType(Ub)}else"number"===typeof Ub[0]?(bc.dimension=Bb,Bb=Ca.allocType(bc.dtype,Ub.length),B(Bb,Ub),Rc(bc,Bb,wb),Mb?bc.persistentData=
Bb:Ca.freeType(Bb)):Ua(Ub[0])&&(bc.dimension=Ub[0].length,bc.dtype=Lb||y(Ub[0])||5126,Ub=jb(Ub,[Ub.length,Ub[0].length],bc.dtype),Rc(bc,Ub,wb),Mb?bc.persistentData=Ub:Ca.freeType(Ub))}else if(Ua(Ub))bc.dtype=Lb||y(Ub),bc.dimension=Bb,Rc(bc,Ub,wb),Mb&&(bc.persistentData=new Uint8Array(new Uint8Array(Ub.buffer)));else if(t(Ub)){Bb=Ub.shape;var qc=Ub.stride;Yb=Ub.offset;var Tc=0,Yc=0,ad=0,ec=0;1===Bb.length?(Tc=Bb[0],Yc=1,ad=qc[0],ec=0):2===Bb.length&&(Tc=Bb[0],Yc=Bb[1],ad=qc[0],ec=qc[1]);bc.dtype=Lb||
y(Ub.data)||5126;bc.dimension=Yc;Bb=Ca.allocType(bc.dtype,Tc*Yc);A(Bb,Ub.data,Tc,Yc,ad,ec,Yb);Rc(bc,Bb,wb);Mb?bc.persistentData=Bb:Ca.freeType(Bb)}else Ub instanceof ArrayBuffer&&(bc.dtype=5121,bc.dimension=Bb,Rc(bc,Ub,wb),Mb&&(bc.persistentData=new Uint8Array(new Uint8Array(Ub))))}function vb(bc){$b.bufferCount--;rc(bc);kb.deleteBuffer(bc.buffer);bc.buffer=null;delete ic[bc.id]}var Sb=0,ic={};xc.prototype.bind=function(){kb.bindBuffer(this.type,this.buffer)};xc.prototype.destroy=function(){vb(this)};
var ac=[];gc.profile&&($b.getTotalBufferSize=function(){var bc=0;Object.keys(ic).forEach(function(Ub){bc+=ic[Ub].stats.size});return bc});return{create:function(bc,Ub,wb,Lb){function Bb(Yb){var qc=35044,Tc=null,Yc=0,ad=0,ec=1;Array.isArray(Yb)||Ua(Yb)||t(Yb)||Yb instanceof ArrayBuffer?Tc=Yb:"number"===typeof Yb?Yc=Yb|0:Yb&&("data"in Yb&&(Tc=Yb.data),"usage"in Yb&&(qc=$a[Yb.usage]),"type"in Yb&&(ad=cb[Yb.type]),"dimension"in Yb&&(ec=Yb.dimension|0),"length"in Yb&&(Yc=Yb.length|0));Mb.bind();Tc?gb(Mb,
Tc,qc,ad,ec,Lb):(Yc&&kb.bufferData(Mb.type,Yc,qc),Mb.dtype=ad||5121,Mb.usage=qc,Mb.dimension=ec,Mb.byteLength=Yc);gc.profile&&(Mb.stats.size=Mb.byteLength*xa[Mb.dtype]);return Bb}$b.bufferCount++;var Mb=new xc(Ub);ic[Mb.id]=Mb;wb||Bb(bc);Bb._reglType="buffer";Bb._buffer=Mb;Bb.subdata=function(Yb,qc){qc=(qc||0)|0;Mb.bind();if(Ua(Yb)||Yb instanceof ArrayBuffer)kb.bufferSubData(Mb.type,qc,Yb);else if(Array.isArray(Yb)){if(0<Yb.length)if("number"===typeof Yb[0]){var Tc=Ca.allocType(Mb.dtype,Yb.length);
B(Tc,Yb);kb.bufferSubData(Mb.type,qc,Tc);Ca.freeType(Tc)}else if(Array.isArray(Yb[0])||Ua(Yb[0])){var Yc=pb(Yb);Tc=jb(Yb,Yc,Mb.dtype);kb.bufferSubData(Mb.type,qc,Tc);Ca.freeType(Tc)}}else if(t(Yb)){Yc=Yb.shape;var ad=Yb.stride,ec=Tc=0,Fc=0,dd=0;1===Yc.length?(Tc=Yc[0],ec=1,Fc=ad[0],dd=0):2===Yc.length&&(Tc=Yc[0],ec=Yc[1],Fc=ad[0],dd=ad[1]);Yc=Array.isArray(Yb.data)?Mb.dtype:y(Yb.data);Yc=Ca.allocType(Yc,Tc*ec);A(Yc,Yb.data,Tc,ec,Fc,dd,Yb.offset);kb.bufferSubData(Mb.type,qc,Yc);Ca.freeType(Yc)}return Bb};
gc.profile&&(Bb.stats=Mb.stats);Bb.destroy=function(){vb(Mb)};return Bb},createStream:function(bc,Ub){var wb=ac.pop();wb||(wb=new xc(bc));wb.bind();gb(wb,Ub,35040,0,1,!1);return wb},destroyStream:function(bc){ac.push(bc)},clear:function(){eb(ic).forEach(vb);ac.forEach(vb)},getBuffer:function(bc){return bc&&bc._buffer instanceof xc?bc._buffer:null},restore:function(){eb(ic).forEach(function(bc){bc.buffer=kb.createBuffer();kb.bindBuffer(bc.type,bc.buffer);kb.bufferData(bc.type,bc.persistentData||bc.byteLength,
bc.usage)})},_initBuffer:gb}}function E(kb,$b,gc,rc){function xc(bc){this.id=Sb++;vb[this.id]=this;this.buffer=bc;this.primType=4;this.type=this.vertCount=0}function Rc(bc,Ub,wb,Lb,Bb,Mb,Yb){bc.buffer.bind();var qc;Ub?((qc=Yb)||Ua(Ub)&&(!t(Ub)||Ua(Ub.data))||(qc=$b.oes_element_index_uint?5125:5123),gc._initBuffer(bc.buffer,Ub,wb,qc,3)):(kb.bufferData(34963,Mb,wb),bc.buffer.dtype=qc||5121,bc.buffer.usage=wb,bc.buffer.dimension=3,bc.buffer.byteLength=Mb);qc=Yb;if(!Yb){switch(bc.buffer.dtype){case 5121:case 5120:qc=
5121;break;case 5123:case 5122:qc=5123;break;case 5125:case 5124:qc=5125}bc.buffer.dtype=qc}bc.type=qc;Ub=Bb;0>Ub&&(Ub=bc.buffer.byteLength,5123===qc?Ub>>=1:5125===qc&&(Ub>>=2));bc.vertCount=Ub;Ub=Lb;0>Lb&&(Ub=4,Lb=bc.buffer.dimension,1===Lb&&(Ub=0),2===Lb&&(Ub=1),3===Lb&&(Ub=4));bc.primType=Ub}function gb(bc){rc.elementsCount--;delete vb[bc.id];bc.buffer.destroy();bc.buffer=null}var vb={},Sb=0,ic={uint8:5121,uint16:5123};$b.oes_element_index_uint&&(ic.uint32=5125);xc.prototype.bind=function(){this.buffer.bind()};
var ac=[];return{create:function(bc,Ub){function wb(Mb){if(Mb)if("number"===typeof Mb)Lb(Mb),Bb.primType=4,Bb.vertCount=Mb|0,Bb.type=5121;else{var Yb=null,qc=35044,Tc=-1,Yc=-1,ad=0,ec=0;if(Array.isArray(Mb)||Ua(Mb)||t(Mb))Yb=Mb;else if("data"in Mb&&(Yb=Mb.data),"usage"in Mb&&(qc=$a[Mb.usage]),"primitive"in Mb&&(Tc=Ea[Mb.primitive]),"count"in Mb&&(Yc=Mb.count|0),"type"in Mb&&(ec=ic[Mb.type]),"length"in Mb)ad=Mb.length|0;else if(ad=Yc,5123===ec||5122===ec)ad*=2;else if(5125===ec||5124===ec)ad*=4;Rc(Bb,
Yb,qc,Tc,Yc,ad,ec)}else Lb(),Bb.primType=4,Bb.vertCount=0,Bb.type=5121;return wb}var Lb=gc.create(null,34963,!0),Bb=new xc(Lb._buffer);rc.elementsCount++;wb(bc);wb._reglType="elements";wb._elements=Bb;wb.subdata=function(Mb,Yb){Lb.subdata(Mb,Yb);return wb};wb.destroy=function(){gb(Bb)};return wb},createStream:function(bc){var Ub=ac.pop();Ub||(Ub=new xc(gc.create(null,34963,!0,!1)._buffer));Rc(Ub,bc,35040,-1,-1,0,0);return Ub},destroyStream:function(bc){ac.push(bc)},getElements:function(bc){return"function"===
typeof bc&&bc._elements instanceof xc?bc._elements:null},clear:function(){eb(vb).forEach(gb)}}}function C(kb){for(var $b=Ca.allocType(5123,kb.length),gc=0;gc<kb.length;++gc)if(isNaN(kb[gc]))$b[gc]=65535;else if(Infinity===kb[gc])$b[gc]=31744;else if(-Infinity===kb[gc])$b[gc]=64512;else{Ia[0]=kb[gc];var rc=Oa[0],xc=rc>>>31<<15,Rc=(rc<<1>>>24)-127;rc=rc>>13&1023;$b[gc]=-24>Rc?xc:-14>Rc?xc+(rc+1024>>-14-Rc):15<Rc?xc+31744:xc+(Rc+15<<10)+rc}return $b}function u(kb){return Array.isArray(kb)||Ua(kb)}function D(kb){return"[object "+
kb+"]"}function G(kb){return Array.isArray(kb)&&(0===kb.length||"number"===typeof kb[0])}function J(kb){return Array.isArray(kb)&&0!==kb.length&&u(kb[0])?!0:!1}function L(kb){return Object.prototype.toString.call(kb)}function K(kb){if(!kb)return!1;var $b=L(kb);return 0<=Ba.indexOf($b)?!0:G(kb)||J(kb)||t(kb)}function H(kb,$b){36193===kb.type?(kb.data=C($b),Ca.freeType($b)):kb.data=$b}function Q(kb,$b,gc,rc,xc,Rc){kb="undefined"!==typeof La[kb]?La[kb]:tb[kb]*Fa[$b];Rc&&(kb*=6);if(xc){for(rc=0;1<=gc;)rc+=
kb*gc*gc,gc/=2;return rc}return kb*gc*rc}function M(kb,$b,gc,rc,xc,Rc,gb){function vb(){this.format=this.internalformat=6408;this.type=5121;this.flipY=this.premultiplyAlpha=this.compressed=!1;this.unpackAlignment=1;this.colorSpace=37444;this.channels=this.height=this.width=0}function Sb(Vb,Sc){Vb.internalformat=Sc.internalformat;Vb.format=Sc.format;Vb.type=Sc.type;Vb.compressed=Sc.compressed;Vb.premultiplyAlpha=Sc.premultiplyAlpha;Vb.flipY=Sc.flipY;Vb.unpackAlignment=Sc.unpackAlignment;Vb.colorSpace=
Sc.colorSpace;Vb.width=Sc.width;Vb.height=Sc.height;Vb.channels=Sc.channels}function ic(Vb,Sc){if("object"===typeof Sc&&Sc){"premultiplyAlpha"in Sc&&(Vb.premultiplyAlpha=Sc.premultiplyAlpha);"flipY"in Sc&&(Vb.flipY=Sc.flipY);"alignment"in Sc&&(Vb.unpackAlignment=Sc.alignment);"colorSpace"in Sc&&(Vb.colorSpace=re[Sc.colorSpace]);"type"in Sc&&(Vb.type=Ad[Sc.type]);var yc=Vb.width,kd=Vb.height,Od=Vb.channels,Td=!1;"shape"in Sc?(yc=Sc.shape[0],kd=Sc.shape[1],3===Sc.shape.length&&(Od=Sc.shape[2],Td=!0)):
("radius"in Sc&&(yc=kd=Sc.radius),"width"in Sc&&(yc=Sc.width),"height"in Sc&&(kd=Sc.height),"channels"in Sc&&(Od=Sc.channels,Td=!0));Vb.width=yc|0;Vb.height=kd|0;Vb.channels=Od|0;yc=!1;"format"in Sc&&(yc=Sc.format,kd=Vb.internalformat=Bd[yc],Vb.format=se[kd],yc in Ad&&!("type"in Sc)&&(Vb.type=Ad[yc]),yc in be&&(Vb.compressed=!0),yc=!0);!Td&&yc?Vb.channels=tb[Vb.format]:Td&&!yc&&Vb.channels!==Xa[Vb.format]&&(Vb.format=Vb.internalformat=Xa[Vb.channels])}}function ac(Vb){kb.pixelStorei(37440,Vb.flipY);
kb.pixelStorei(37441,Vb.premultiplyAlpha);kb.pixelStorei(37443,Vb.colorSpace);kb.pixelStorei(3317,Vb.unpackAlignment)}function bc(){vb.call(this);this.yOffset=this.xOffset=0;this.data=null;this.needsFree=!1;this.element=null;this.needsCopy=!1}function Ub(Vb,Sc){var yc=null;K(Sc)?yc=Sc:Sc&&(ic(Vb,Sc),"x"in Sc&&(Vb.xOffset=Sc.x|0),"y"in Sc&&(Vb.yOffset=Sc.y|0),K(Sc.data)&&(yc=Sc.data));if(Sc.copy){Sc=xc.viewportWidth;var kd=xc.viewportHeight;Vb.width=Vb.width||Sc-Vb.xOffset;Vb.height=Vb.height||kd-
Vb.yOffset;Vb.needsCopy=!0}else if(!yc)Vb.width=Vb.width||1,Vb.height=Vb.height||1,Vb.channels=Vb.channels||4;else if(Ua(yc))Vb.channels=Vb.channels||4,Vb.data=yc,"type"in Sc||5121!==Vb.type||(Vb.type=nb[Object.prototype.toString.call(yc)]|0);else if(G(yc)){Vb.channels=Vb.channels||4;Sc=yc;kd=Sc.length;switch(Vb.type){case 5121:case 5123:case 5125:case 5126:kd=Ca.allocType(Vb.type,kd);kd.set(Sc);Vb.data=kd;break;case 36193:Vb.data=C(Sc)}Vb.alignment=1;Vb.needsFree=!0}else if(t(yc)){Sc=yc.data;Array.isArray(Sc)||
5121!==Vb.type||(Vb.type=nb[Object.prototype.toString.call(Sc)]|0);kd=yc.shape;var Od=yc.stride,Td,Ld;3===kd.length?(Td=kd[2],Ld=Od[2]):Ld=Td=1;var Jd=kd[0];var fe=kd[1];kd=Od[0];Od=Od[1];Vb.alignment=1;Vb.width=Jd;Vb.height=fe;Vb.channels=Td;Vb.format=Vb.internalformat=Xa[Td];Vb.needsFree=!0;Jd=Ld;yc=yc.offset;Td=Vb.width;Ld=Vb.height;fe=Vb.channels;for(var pe=Ca.allocType(36193===Vb.type?5126:Vb.type,Td*Ld*fe),Tb=0,jc=0;jc<Ld;++jc)for(var Hc=0;Hc<Td;++Hc)for(var Wc=0;Wc<fe;++Wc)pe[Tb++]=Sc[kd*Hc+
Od*jc+Jd*Wc+yc];H(Vb,pe)}else if(L(yc)===Ka||L(yc)===Ta||L(yc)===Na)L(yc)===Ka||L(yc)===Ta?Vb.element=yc:Vb.element=yc.canvas,Vb.width=Vb.element.width,Vb.height=Vb.element.height,Vb.channels=4;else if(L(yc)===ib)Vb.element=yc,Vb.width=yc.width,Vb.height=yc.height,Vb.channels=4;else if(L(yc)===qb)Vb.element=yc,Vb.width=yc.naturalWidth,Vb.height=yc.naturalHeight,Vb.channels=4;else if(L(yc)===sb)Vb.element=yc,Vb.width=yc.videoWidth,Vb.height=yc.videoHeight,Vb.channels=4;else if(J(yc)){Sc=Vb.width||
yc[0].length;kd=Vb.height||yc.length;Od=Vb.channels;Od=u(yc[0][0])?Od||yc[0][0].length:Od||1;Jd=fb.shape(yc);Td=1;for(Ld=0;Ld<Jd.length;++Ld)Td*=Jd[Ld];Td=Ca.allocType(36193===Vb.type?5126:Vb.type,Td);fb.flatten(yc,Jd,"",Td);H(Vb,Td);Vb.alignment=1;Vb.width=Sc;Vb.height=kd;Vb.channels=Od;Vb.format=Vb.internalformat=Xa[Od];Vb.needsFree=!0}}function wb(Vb,Sc,yc,kd,Od){var Td=Vb.element,Ld=Vb.data,Jd=Vb.internalformat,fe=Vb.format,pe=Vb.type,Tb=Vb.width,jc=Vb.height;ac(Vb);Td?kb.texSubImage2D(Sc,Od,
yc,kd,fe,pe,Td):Vb.compressed?kb.compressedTexSubImage2D(Sc,Od,yc,kd,Jd,Tb,jc,Ld):Vb.needsCopy?(rc(),kb.copyTexSubImage2D(Sc,Od,yc,kd,Vb.xOffset,Vb.yOffset,Tb,jc)):kb.texSubImage2D(Sc,Od,yc,kd,Tb,jc,fe,pe,Ld)}function Lb(){return Xd.pop()||new bc}function Bb(Vb){Vb.needsFree&&Ca.freeType(Vb.data);bc.call(Vb);Xd.push(Vb)}function Mb(){vb.call(this);this.genMipmaps=!1;this.mipmapHint=4352;this.mipmask=0;this.images=Array(16)}function Yb(Vb,Sc,yc){var kd=Vb.images[0]=Lb();Vb.mipmask=1;kd.width=Vb.width=
Sc;kd.height=Vb.height=yc;kd.channels=Vb.channels=4}function qc(Vb,Sc){if(K(Sc)){var yc=Vb.images[0]=Lb();Sb(yc,Vb);Ub(yc,Sc);Vb.mipmask=1}else if(ic(Vb,Sc),Array.isArray(Sc.mipmap)){Sc=Sc.mipmap;for(var kd=0;kd<Sc.length;++kd)yc=Vb.images[kd]=Lb(),Sb(yc,Vb),yc.width>>=kd,yc.height>>=kd,Ub(yc,Sc[kd]),Vb.mipmask|=1<<kd}else yc=Vb.images[0]=Lb(),Sb(yc,Vb),Ub(yc,Sc),Vb.mipmask=1;Sb(Vb,Vb.images[0])}function Tc(Vb,Sc){Vb=Vb.images;for(var yc=0;yc<Vb.length&&Vb[yc];++yc){var kd=Vb[yc],Od=Sc,Td=yc,Ld=kd.element,
Jd=kd.data,fe=kd.internalformat,pe=kd.format,Tb=kd.type,jc=kd.width,Hc=kd.height;ac(kd);Ld?kb.texImage2D(Od,Td,pe,pe,Tb,Ld):kd.compressed?kb.compressedTexImage2D(Od,Td,fe,jc,Hc,0,Jd):kd.needsCopy?(rc(),kb.copyTexImage2D(Od,Td,pe,kd.xOffset,kd.yOffset,jc,Hc,0)):kb.texImage2D(Od,Td,pe,jc,Hc,0,pe,Tb,Jd||null)}}function Yc(){var Vb=ye.pop()||new Mb;vb.call(Vb);for(var Sc=Vb.mipmask=0;16>Sc;++Sc)Vb.images[Sc]=null;return Vb}function ad(Vb){for(var Sc=Vb.images,yc=0;yc<Sc.length;++yc)Sc[yc]&&Bb(Sc[yc]),
Sc[yc]=null;ye.push(Vb)}function ec(){this.magFilter=this.minFilter=9728;this.wrapT=this.wrapS=33071;this.anisotropic=1;this.genMipmaps=!1;this.mipmapHint=4352}function Fc(Vb,Sc){"min"in Sc&&(Vb.minFilter=rd[Sc.min],0<=bb.indexOf(Vb.minFilter)&&!("faces"in Sc)&&(Vb.genMipmaps=!0));"mag"in Sc&&(Vb.magFilter=md[Sc.mag]);var yc=Vb.wrapS,kd=Vb.wrapT;if("wrap"in Sc){var Od=Sc.wrap;"string"===typeof Od?yc=kd=pd[Od]:Array.isArray(Od)&&(yc=pd[Od[0]],kd=pd[Od[1]])}else"wrapS"in Sc&&(yc=pd[Sc.wrapS]),"wrapT"in
Sc&&(kd=pd[Sc.wrapT]);Vb.wrapS=yc;Vb.wrapT=kd;"anisotropic"in Sc&&(Vb.anisotropic=Sc.anisotropic);if("mipmap"in Sc){yc=!1;switch(typeof Sc.mipmap){case "string":Vb.mipmapHint=Gc[Sc.mipmap];yc=Vb.genMipmaps=!0;break;case "boolean":yc=Vb.genMipmaps=Sc.mipmap;break;case "object":Vb.genMipmaps=!1,yc=!0}!yc||"min"in Sc||(Vb.minFilter=9984)}}function dd(Vb,Sc){kb.texParameteri(Sc,10241,Vb.minFilter);kb.texParameteri(Sc,10240,Vb.magFilter);kb.texParameteri(Sc,10242,Vb.wrapS);kb.texParameteri(Sc,10243,Vb.wrapT);
$b.ext_texture_filter_anisotropic&&kb.texParameteri(Sc,34046,Vb.anisotropic);Vb.genMipmaps&&(kb.hint(33170,Vb.mipmapHint),kb.generateMipmap(Sc))}function Ac(Vb){vb.call(this);this.mipmask=0;this.internalformat=6408;this.id=kf++;this.refCount=1;this.target=Vb;this.texture=kb.createTexture();this.unit=-1;this.bindCount=0;this.texInfo=new ec;gb.profile&&(this.stats={size:0})}function Jc(Vb){kb.activeTexture(33984);kb.bindTexture(Vb.target,Vb.texture)}function gd(){var Vb=ff[0];Vb?kb.bindTexture(Vb.target,
Vb.texture):kb.bindTexture(3553,null)}function Vc(Vb){var Sc=Vb.texture,yc=Vb.unit,kd=Vb.target;0<=yc&&(kb.activeTexture(33984+yc),kb.bindTexture(kd,null),ff[yc]=null);kb.deleteTexture(Sc);Vb.texture=null;Vb.params=null;Vb.pixels=null;Vb.refCount=0;delete Qe[Vb.id];Rc.textureCount--}var Gc={"don't care":4352,"dont care":4352,nice:4354,fast:4353},pd={repeat:10497,clamp:33071,mirror:33648},md={nearest:9728,linear:9729},rd=pa({mipmap:9987,"nearest mipmap nearest":9984,"linear mipmap nearest":9985,"nearest mipmap linear":9986,
"linear mipmap linear":9987},md),re={none:0,browser:37444},Ad={uint8:5121,rgba4:32819,rgb565:33635,"rgb5 a1":32820},Bd={alpha:6406,luminance:6409,"luminance alpha":6410,rgb:6407,rgba:6408,rgba4:32854,"rgb5 a1":32855,rgb565:36194},be={};$b.ext_srgb&&(Bd.srgb=35904,Bd.srgba=35906);$b.oes_texture_float&&(Ad.float32=Ad["float"]=5126);$b.oes_texture_half_float&&(Ad.float16=Ad["half float"]=36193);$b.webgl_depth_texture&&(pa(Bd,{depth:6402,"depth stencil":34041}),pa(Ad,{uint16:5123,uint32:5125,"depth stencil":34042}));
$b.webgl_compressed_texture_s3tc&&pa(be,{"rgb s3tc dxt1":33776,"rgba s3tc dxt1":33777,"rgba s3tc dxt3":33778,"rgba s3tc dxt5":33779});$b.webgl_compressed_texture_atc&&pa(be,{"rgb atc":35986,"rgba atc explicit alpha":35987,"rgba atc interpolated alpha":34798});$b.webgl_compressed_texture_pvrtc&&pa(be,{"rgb pvrtc 4bppv1":35840,"rgb pvrtc 2bppv1":35841,"rgba pvrtc 4bppv1":35842,"rgba pvrtc 2bppv1":35843});$b.webgl_compressed_texture_etc1&&(be["rgb etc1"]=36196);var le=Array.prototype.slice.call(kb.getParameter(34467));
Object.keys(be).forEach(function(Vb){var Sc=be[Vb];0<=le.indexOf(Sc)&&(Bd[Vb]=Sc)});var Rd=Object.keys(Bd);gc.textureFormats=Rd;var Fe=[];Object.keys(Bd).forEach(function(Vb){Fe[Bd[Vb]]=Vb});var Je=[];Object.keys(Ad).forEach(function(Vb){Je[Ad[Vb]]=Vb});var Kd=[];Object.keys(md).forEach(function(Vb){Kd[md[Vb]]=Vb});var Dd=[];Object.keys(rd).forEach(function(Vb){Dd[rd[Vb]]=Vb});var we=[];Object.keys(pd).forEach(function(Vb){we[pd[Vb]]=Vb});var se=Rd.reduce(function(Vb,Sc){var yc=Bd[Sc];6409===yc||
6406===yc||6409===yc||6410===yc||6402===yc||34041===yc||$b.ext_srgb&&(35904===yc||35906===yc)?Vb[yc]=yc:32855===yc||0<=Sc.indexOf("rgba")?Vb[yc]=6408:Vb[yc]=6407;return Vb},{}),Xd=[],ye=[],kf=0,Qe={},pf=gc.maxTextureUnits,ff=Array(pf).map(function(){return null});pa(Ac.prototype,{bind:function(){this.bindCount+=1;var Vb=this.unit;if(0>Vb){for(var Sc=0;Sc<pf;++Sc){var yc=ff[Sc];if(yc){if(0<yc.bindCount)continue;yc.unit=-1}ff[Sc]=this;Vb=Sc;break}gb.profile&&Rc.maxTextureUnits<Vb+1&&(Rc.maxTextureUnits=
Vb+1);this.unit=Vb;kb.activeTexture(33984+Vb);kb.bindTexture(this.target,this.texture)}return Vb},unbind:function(){--this.bindCount},decRef:function(){0>=--this.refCount&&Vc(this)}});gb.profile&&(Rc.getTotalTextureSize=function(){var Vb=0;Object.keys(Qe).forEach(function(Sc){Vb+=Qe[Sc].stats.size});return Vb});return{create2D:function(Vb,Sc){function yc(Od,Td){var Ld=kd.texInfo;ec.call(Ld);var Jd=Yc();"number"===typeof Od?"number"===typeof Td?Yb(Jd,Od|0,Td|0):Yb(Jd,Od|0,Od|0):Od?(Fc(Ld,Od),qc(Jd,
Od)):Yb(Jd,1,1);Ld.genMipmaps&&(Jd.mipmask=(Jd.width<<1)-1);kd.mipmask=Jd.mipmask;Sb(kd,Jd);kd.internalformat=Jd.internalformat;yc.width=Jd.width;yc.height=Jd.height;Jc(kd);Tc(Jd,3553);dd(Ld,3553);gd();ad(Jd);gb.profile&&(kd.stats.size=Q(kd.internalformat,kd.type,Jd.width,Jd.height,Ld.genMipmaps,!1));yc.format=Fe[kd.internalformat];yc.type=Je[kd.type];yc.mag=Kd[Ld.magFilter];yc.min=Dd[Ld.minFilter];yc.wrapS=we[Ld.wrapS];yc.wrapT=we[Ld.wrapT];return yc}var kd=new Ac(3553);Qe[kd.id]=kd;Rc.textureCount++;
yc(Vb,Sc);yc.subimage=function(Od,Td,Ld,Jd){Td|=0;Ld|=0;Jd|=0;var fe=Lb();Sb(fe,kd);fe.width=0;fe.height=0;Ub(fe,Od);fe.width=fe.width||(kd.width>>Jd)-Td;fe.height=fe.height||(kd.height>>Jd)-Ld;Jc(kd);wb(fe,3553,Td,Ld,Jd);gd();Bb(fe);return yc};yc.resize=function(Od,Td){Od|=0;Td=Td|0||Od;if(Od===kd.width&&Td===kd.height)return yc;yc.width=kd.width=Od;yc.height=kd.height=Td;Jc(kd);for(var Ld=0;kd.mipmask>>Ld;++Ld){var Jd=Od>>Ld,fe=Td>>Ld;if(!Jd||!fe)break;kb.texImage2D(3553,Ld,kd.format,Jd,fe,0,kd.format,
kd.type,null)}gd();gb.profile&&(kd.stats.size=Q(kd.internalformat,kd.type,Od,Td,!1,!1));return yc};yc._reglType="texture2d";yc._texture=kd;gb.profile&&(yc.stats=kd.stats);yc.destroy=function(){kd.decRef()};return yc},createCube:function(Vb,Sc,yc,kd,Od,Td){function Ld(pe,Tb,jc,Hc,Wc,Lc){var Mc,Pc=Jd.texInfo;ec.call(Pc);for(Mc=0;6>Mc;++Mc)fe[Mc]=Yc();if("number"===typeof pe||!pe)for(pe=pe|0||1,Mc=0;6>Mc;++Mc)Yb(fe[Mc],pe,pe);else if("object"===typeof pe)if(Tb)qc(fe[0],pe),qc(fe[1],Tb),qc(fe[2],jc),
qc(fe[3],Hc),qc(fe[4],Wc),qc(fe[5],Lc);else if(Fc(Pc,pe),ic(Jd,pe),"faces"in pe)for(pe=pe.faces,Mc=0;6>Mc;++Mc)Sb(fe[Mc],Jd),qc(fe[Mc],pe[Mc]);else for(Mc=0;6>Mc;++Mc)qc(fe[Mc],pe);Sb(Jd,fe[0]);Jd.mipmask=Pc.genMipmaps?(fe[0].width<<1)-1:fe[0].mipmask;Jd.internalformat=fe[0].internalformat;Ld.width=fe[0].width;Ld.height=fe[0].height;Jc(Jd);for(Mc=0;6>Mc;++Mc)Tc(fe[Mc],34069+Mc);dd(Pc,34067);gd();gb.profile&&(Jd.stats.size=Q(Jd.internalformat,Jd.type,Ld.width,Ld.height,Pc.genMipmaps,!0));Ld.format=
Fe[Jd.internalformat];Ld.type=Je[Jd.type];Ld.mag=Kd[Pc.magFilter];Ld.min=Dd[Pc.minFilter];Ld.wrapS=we[Pc.wrapS];Ld.wrapT=we[Pc.wrapT];for(Mc=0;6>Mc;++Mc)ad(fe[Mc]);return Ld}var Jd=new Ac(34067);Qe[Jd.id]=Jd;Rc.cubeCount++;var fe=Array(6);Ld(Vb,Sc,yc,kd,Od,Td);Ld.subimage=function(pe,Tb,jc,Hc,Wc){jc|=0;Hc|=0;Wc|=0;var Lc=Lb();Sb(Lc,Jd);Lc.width=0;Lc.height=0;Ub(Lc,Tb);Lc.width=Lc.width||(Jd.width>>Wc)-jc;Lc.height=Lc.height||(Jd.height>>Wc)-Hc;Jc(Jd);wb(Lc,34069+pe,jc,Hc,Wc);gd();Bb(Lc);return Ld};
Ld.resize=function(pe){pe|=0;if(pe!==Jd.width){Ld.width=Jd.width=pe;Ld.height=Jd.height=pe;Jc(Jd);for(var Tb=0;6>Tb;++Tb)for(var jc=0;Jd.mipmask>>jc;++jc)kb.texImage2D(34069+Tb,jc,Jd.format,pe>>jc,pe>>jc,0,Jd.format,Jd.type,null);gd();gb.profile&&(Jd.stats.size=Q(Jd.internalformat,Jd.type,Ld.width,Ld.height,!1,!0));return Ld}};Ld._reglType="textureCube";Ld._texture=Jd;gb.profile&&(Ld.stats=Jd.stats);Ld.destroy=function(){Jd.decRef()};return Ld},clear:function(){for(var Vb=0;Vb<pf;++Vb)kb.activeTexture(33984+
Vb),kb.bindTexture(3553,null),ff[Vb]=null;eb(Qe).forEach(Vc);Rc.cubeCount=0;Rc.textureCount=0},getTexture:function(Vb){return null},restore:function(){for(var Vb=0;Vb<pf;++Vb){var Sc=ff[Vb];Sc&&(Sc.bindCount=0,Sc.unit=-1,ff[Vb]=null)}eb(Qe).forEach(function(yc){yc.texture=kb.createTexture();kb.bindTexture(yc.target,yc.texture);for(var kd=0;32>kd;++kd)if(0!==(yc.mipmask&1<<kd))if(3553===yc.target)kb.texImage2D(3553,kd,yc.internalformat,yc.width>>kd,yc.height>>kd,0,yc.internalformat,yc.type,null);else for(var Od=
0;6>Od;++Od)kb.texImage2D(34069+Od,kd,yc.internalformat,yc.width>>kd,yc.height>>kd,0,yc.internalformat,yc.type,null);dd(yc.texInfo,yc.target)})}}}function P(kb,$b,gc,rc,xc,Rc){function gb(Ac,Jc,gd){this.target=Ac;this.texture=Jc;this.renderbuffer=gd;var Vc=Ac=0;Jc?(Ac=Jc.width,Vc=Jc.height):gd&&(Ac=gd.width,Vc=gd.height);this.width=Ac;this.height=Vc}function vb(Ac){Ac&&(Ac.texture&&Ac.texture._texture.decRef(),Ac.renderbuffer&&Ac.renderbuffer._renderbuffer.decRef())}function Sb(Ac,Jc,gd){Ac&&(Ac.texture?
Ac.texture._texture.refCount+=1:Ac.renderbuffer._renderbuffer.refCount+=1)}function ic(Ac,Jc){Jc&&(Jc.texture?kb.framebufferTexture2D(36160,Ac,Jc.target,Jc.texture._texture.texture,0):kb.framebufferRenderbuffer(36160,Ac,36161,Jc.renderbuffer._renderbuffer.renderbuffer))}function ac(Ac){var Jc=3553,gd=null,Vc=null,Gc=Ac;"object"===typeof Ac&&(Gc=Ac.data,"target"in Ac&&(Jc=Ac.target|0));Ac=Gc._reglType;"texture2d"===Ac?gd=Gc:"textureCube"===Ac?gd=Gc:"renderbuffer"===Ac&&(Vc=Gc,Jc=36161);return new gb(Jc,
gd,Vc)}function bc(Ac,Jc,gd,Vc,Gc){if(gd)return Ac=rc.create2D({width:Ac,height:Jc,format:Vc,type:Gc}),Ac._texture.refCount=0,new gb(3553,Ac,null);Ac=xc.create({width:Ac,height:Jc,format:Vc});Ac._renderbuffer.refCount=0;return new gb(36161,null,Ac)}function Ub(Ac){return Ac&&(Ac.texture||Ac.renderbuffer)}function wb(Ac,Jc,gd){Ac&&(Ac.texture?Ac.texture.resize(Jc,gd):Ac.renderbuffer&&Ac.renderbuffer.resize(Jc,gd),Ac.width=Jc,Ac.height=gd)}function Lb(){this.id=Fc++;dd[this.id]=this;this.framebuffer=
kb.createFramebuffer();this.height=this.width=0;this.colorAttachments=[];this.depthStencilAttachment=this.stencilAttachment=this.depthAttachment=null}function Bb(Ac){Ac.colorAttachments.forEach(vb);vb(Ac.depthAttachment);vb(Ac.stencilAttachment);vb(Ac.depthStencilAttachment)}function Mb(Ac){kb.deleteFramebuffer(Ac.framebuffer);Ac.framebuffer=null;Rc.framebufferCount--;delete dd[Ac.id]}function Yb(Ac){var Jc;kb.bindFramebuffer(36160,Ac.framebuffer);var gd=Ac.colorAttachments;for(Jc=0;Jc<gd.length;++Jc)ic(36064+
Jc,gd[Jc]);for(Jc=gd.length;Jc<gc.maxColorAttachments;++Jc)kb.framebufferTexture2D(36160,36064+Jc,3553,null,0);kb.framebufferTexture2D(36160,33306,3553,null,0);kb.framebufferTexture2D(36160,36096,3553,null,0);kb.framebufferTexture2D(36160,36128,3553,null,0);ic(36096,Ac.depthAttachment);ic(36128,Ac.stencilAttachment);ic(33306,Ac.depthStencilAttachment);kb.checkFramebufferStatus(36160);kb.isContextLost();kb.bindFramebuffer(36160,Tc.next?Tc.next.framebuffer:null);Tc.cur=Tc.next;kb.getError()}function qc(Ac,
Jc){function gd(Gc,pd){var md=0,rd=0,re=!0,Ad=!0;var Bd=null;var be=!0,le="rgba",Rd="uint8",Fe=1,Je=null,Kd=null,Dd=null,we=!1;if("number"===typeof Gc)md=Gc|0,rd=pd|0||md;else if(Gc){"shape"in Gc?(rd=Gc.shape,md=rd[0],rd=rd[1]):("radius"in Gc&&(md=rd=Gc.radius),"width"in Gc&&(md=Gc.width),"height"in Gc&&(rd=Gc.height));if("color"in Gc||"colors"in Gc)Bd=Gc.color||Gc.colors,Array.isArray(Bd);if(!Bd){"colorCount"in Gc&&(Fe=Gc.colorCount|0);"colorTexture"in Gc&&(be=!!Gc.colorTexture,le="rgba4");if("colorType"in
Gc&&(Rd=Gc.colorType,!be))if("half float"===Rd||"float16"===Rd)le="rgba16f";else if("float"===Rd||"float32"===Rd)le="rgba32f";"colorFormat"in Gc&&(le=Gc.colorFormat,0<=Yc.indexOf(le)?be=!0:0<=ad.indexOf(le)&&(be=!1))}if("depthTexture"in Gc||"depthStencilTexture"in Gc)we=!(!Gc.depthTexture&&!Gc.depthStencilTexture);"depth"in Gc&&("boolean"===typeof Gc.depth?re=Gc.depth:(Je=Gc.depth,Ad=!1));"stencil"in Gc&&("boolean"===typeof Gc.stencil?Ad=Gc.stencil:(Kd=Gc.stencil,re=!1));"depthStencil"in Gc&&("boolean"===
typeof Gc.depthStencil?re=Ad=Gc.depthStencil:(Dd=Gc.depthStencil,Ad=re=!1))}else md=rd=1;var se=pd=null,Xd=null;if(Array.isArray(Bd))Gc=Bd.map(ac);else if(Bd)Gc=[ac(Bd)];else for(Gc=Array(Fe),Bd=0;Bd<Fe;++Bd)Gc[Bd]=bc(md,rd,be,le,Rd);md=md||Gc[0].width;rd=rd||Gc[0].height;Je?pd=ac(Je):re&&!Ad&&(pd=bc(md,rd,we,"depth","uint32"));Kd?se=ac(Kd):Ad&&!re&&(se=bc(md,rd,!1,"stencil","uint8"));Dd?Xd=ac(Dd):!Je&&!Kd&&Ad&&re&&(Xd=bc(md,rd,we,"depth stencil","depth stencil"));re=null;for(Bd=0;Bd<Gc.length;++Bd)Sb(Gc[Bd],
md,rd),Gc[Bd]&&Gc[Bd].texture&&(Ad=mb[Gc[Bd].texture._texture.format]*ub[Gc[Bd].texture._texture.type],null===re&&(re=Ad));Sb(pd,md,rd);Sb(se,md,rd);Sb(Xd,md,rd);Bb(Vc);Vc.width=md;Vc.height=rd;Vc.colorAttachments=Gc;Vc.depthAttachment=pd;Vc.stencilAttachment=se;Vc.depthStencilAttachment=Xd;gd.color=Gc.map(Ub);gd.depth=Ub(pd);gd.stencil=Ub(se);gd.depthStencil=Ub(Xd);gd.width=Vc.width;gd.height=Vc.height;Yb(Vc);return gd}var Vc=new Lb;Rc.framebufferCount++;gd(Ac,Jc);return pa(gd,{resize:function(Gc,
pd){Gc=Math.max(Gc|0,1);pd=Math.max(pd|0||Gc,1);if(Gc===Vc.width&&pd===Vc.height)return gd;for(var md=Vc.colorAttachments,rd=0;rd<md.length;++rd)wb(md[rd],Gc,pd);wb(Vc.depthAttachment,Gc,pd);wb(Vc.stencilAttachment,Gc,pd);wb(Vc.depthStencilAttachment,Gc,pd);Vc.width=gd.width=Gc;Vc.height=gd.height=pd;Yb(Vc);return gd},_reglType:"framebuffer",_framebuffer:Vc,destroy:function(){Mb(Vc);Bb(Vc)},use:function(Gc){Tc.setFBO({framebuffer:gd},Gc)}})}var Tc={cur:null,next:null,dirty:!1,setFBO:null},Yc=["rgba"],
ad=["rgba4","rgb565","rgb5 a1"];$b.ext_srgb&&ad.push("srgba");$b.ext_color_buffer_half_float&&ad.push("rgba16f","rgb16f");$b.webgl_color_buffer_float&&ad.push("rgba32f");var ec=["uint8"];$b.oes_texture_half_float&&ec.push("half float","float16");$b.oes_texture_float&&ec.push("float","float32");var Fc=0,dd={};return pa(Tc,{getFramebuffer:function(Ac){return"function"===typeof Ac&&"framebuffer"===Ac._reglType&&(Ac=Ac._framebuffer,Ac instanceof Lb)?Ac:null},create:qc,createCube:function(Ac){function Jc(Vc){var Gc=
{color:null},pd=0,md=null;var rd="rgba";var re="uint8",Ad=1;if("number"===typeof Vc)pd=Vc|0;else if(Vc){"shape"in Vc?pd=Vc.shape[0]:("radius"in Vc&&(pd=Vc.radius|0),"width"in Vc?pd=Vc.width|0:"height"in Vc&&(pd=Vc.height|0));if("color"in Vc||"colors"in Vc)md=Vc.color||Vc.colors,Array.isArray(md);md||("colorCount"in Vc&&(Ad=Vc.colorCount|0),"colorType"in Vc&&(re=Vc.colorType),"colorFormat"in Vc&&(rd=Vc.colorFormat));"depth"in Vc&&(Gc.depth=Vc.depth);"stencil"in Vc&&(Gc.stencil=Vc.stencil);"depthStencil"in
Vc&&(Gc.depthStencil=Vc.depthStencil)}else pd=1;if(md)if(Array.isArray(md))for(Vc=[],rd=0;rd<md.length;++rd)Vc[rd]=md[rd];else Vc=[md];else for(Vc=Array(Ad),md={radius:pd,format:rd,type:re},rd=0;rd<Ad;++rd)Vc[rd]=rc.createCube(md);Gc.color=Array(Vc.length);for(rd=0;rd<Vc.length;++rd)Ad=Vc[rd],pd=pd||Ad.width,Gc.color[rd]={target:34069,data:Vc[rd]};for(rd=0;6>rd;++rd){for(Ad=0;Ad<Vc.length;++Ad)Gc.color[Ad].target=34069+rd;0<rd&&(Gc.depth=gd[0].depth,Gc.stencil=gd[0].stencil,Gc.depthStencil=gd[0].depthStencil);
if(gd[rd])gd[rd](Gc);else gd[rd]=qc(Gc)}return pa(Jc,{width:pd,height:pd,color:Vc})}var gd=Array(6);Jc(Ac);return pa(Jc,{faces:gd,resize:function(Vc){var Gc=Vc|0;if(Gc===Jc.width)return Jc;var pd=Jc.color;for(Vc=0;Vc<pd.length;++Vc)pd[Vc].resize(Gc);for(Vc=0;6>Vc;++Vc)gd[Vc].resize(Gc);Jc.width=Jc.height=Gc;return Jc},_reglType:"framebufferCube",destroy:function(){gd.forEach(function(Vc){Vc.destroy()})}})},clear:function(){eb(dd).forEach(Mb)},restore:function(){Tc.cur=null;Tc.next=null;Tc.dirty=!0;
eb(dd).forEach(function(Ac){Ac.framebuffer=kb.createFramebuffer();Yb(Ac)})}})}function T(){this.w=this.z=this.y=this.x=this.state=0;this.buffer=null;this.size=0;this.normalized=!1;this.type=5126;this.divisor=this.stride=this.offset=0}function O(kb,$b,gc,rc,xc){function Rc(Bb){if(Bb!==Lb.currentVAO){var Mb=$b.oes_vertex_array_object;Bb?Mb.bindVertexArrayOES(Bb.vao):Mb.bindVertexArrayOES(null);Lb.currentVAO=Bb}}function gb(Bb){if(Bb!==Lb.currentVAO){if(Bb)Bb.bindAttrs();else for(var Mb=$b.angle_instanced_arrays,
Yb=0;Yb<bc.length;++Yb){var qc=bc[Yb];qc.buffer?(kb.enableVertexAttribArray(Yb),kb.vertexAttribPointer(Yb,qc.size,qc.type,qc.normalized,qc.stride,qc.offfset),Mb&&Mb.vertexAttribDivisorANGLE(Yb,qc.divisor)):(kb.disableVertexAttribArray(Yb),kb.vertexAttrib4f(Yb,qc.x,qc.y,qc.z,qc.w))}Lb.currentVAO=Bb}}function vb(){eb(wb).forEach(function(Bb){Bb.destroy()})}function Sb(){this.id=++Ub;this.attributes=[];var Bb=$b.oes_vertex_array_object;this.vao=Bb?Bb.createVertexArrayOES():null;wb[this.id]=this;this.buffers=
[]}function ic(){$b.oes_vertex_array_object&&eb(wb).forEach(function(Bb){Bb.refresh()})}var ac=gc.maxAttributes,bc=Array(ac);for(gc=0;gc<ac;++gc)bc[gc]=new T;var Ub=0,wb={},Lb={Record:T,scope:{},state:bc,currentVAO:null,targetVAO:null,restore:$b.oes_vertex_array_object?ic:function(){},createVAO:function(Bb){function Mb(qc){for(var Tc=0;Tc<Yb.buffers.length;++Tc)Yb.buffers[Tc].destroy();Yb.buffers.length=0;Tc=Yb.attributes;Tc.length=qc.length;for(var Yc=0;Yc<qc.length;++Yc){var ad=qc[Yc],ec=Tc[Yc]=
new T;Array.isArray(ad)||Ua(ad)||t(ad)?(ad=xc.create(ad,34962,!1,!0),ec.buffer=xc.getBuffer(ad),ec.size=ec.buffer.dimension|0,ec.normalized=!1,ec.type=ec.buffer.dtype,ec.offset=0,ec.stride=0,ec.divisor=0,ec.state=1,Yb.buffers.push(ad)):xc.getBuffer(ad)?(ec.buffer=xc.getBuffer(ad),ec.size=ec.buffer.dimension|0,ec.normalized=!1,ec.type=ec.buffer.dtype,ec.offset=0,ec.stride=0,ec.divisor=0,ec.state=1):xc.getBuffer(ad.buffer)?(ec.buffer=xc.getBuffer(ad.buffer),ec.size=(+ad.size||ec.buffer.dimension)|0,
ec.normalized=!!ad.normalized||!1,ec.type="type"in ad?cb[ad.type]:ec.buffer.dtype,ec.offset=(ad.offset||0)|0,ec.stride=(ad.stride||0)|0,ec.divisor=(ad.divisor||0)|0,ec.state=1):"x"in ad&&(ec.x=+ad.x||0,ec.y=+ad.y||0,ec.z=+ad.z||0,ec.w=+ad.w||0,ec.state=2)}Yb.refresh();return Mb}var Yb=new Sb;rc.vaoCount+=1;Mb.destroy=function(){Yb.destroy()};Mb._vao=Yb;Mb._reglType="vao";return Mb(Bb)},getVAO:function(Bb){return"function"===typeof Bb&&Bb._vao?Bb._vao:null},destroyBuffer:function(Bb){for(var Mb=0;Mb<
bc.length;++Mb){var Yb=bc[Mb];Yb.buffer===Bb&&(kb.disableVertexAttribArray(Mb),Yb.buffer=null)}},setVAO:$b.oes_vertex_array_object?Rc:gb,clear:$b.oes_vertex_array_object?vb:function(){}};Sb.prototype.bindAttrs=function(){for(var Bb=$b.angle_instanced_arrays,Mb=this.attributes,Yb=0;Yb<Mb.length;++Yb){var qc=Mb[Yb];qc.buffer?(kb.enableVertexAttribArray(Yb),kb.bindBuffer(34962,qc.buffer.buffer),kb.vertexAttribPointer(Yb,qc.size,qc.type,qc.normalized,qc.stride,qc.offset),Bb&&Bb.vertexAttribDivisorANGLE(Yb,
qc.divisor)):(kb.disableVertexAttribArray(Yb),kb.vertexAttrib4f(Yb,qc.x,qc.y,qc.z,qc.w))}for(Bb=Mb.length;Bb<ac;++Bb)kb.disableVertexAttribArray(Bb)};Sb.prototype.refresh=function(){var Bb=$b.oes_vertex_array_object;Bb&&(Bb.bindVertexArrayOES(this.vao),this.bindAttrs(),Lb.currentVAO=this)};Sb.prototype.destroy=function(){if(this.vao){var Bb=$b.oes_vertex_array_object;this===Lb.currentVAO&&(Lb.currentVAO=null,Bb.bindVertexArrayOES(null));Bb.deleteVertexArrayOES(this.vao);this.vao=null}wb[this.id]&&
(delete wb[this.id],--rc.vaoCount)};return Lb}function U(kb,$b,gc,rc){function xc(Lb,Bb,Mb,Yb){this.name=Lb;this.id=Bb;this.location=Mb;this.info=Yb}function Rc(Lb,Bb){for(var Mb=0;Mb<Lb.length;++Mb)if(Lb[Mb].id===Bb.id){Lb[Mb].location=Bb.location;return}Lb.push(Bb)}function gb(Lb,Bb,Mb){Mb=35632===Lb?ic:ac;var Yb=Mb[Bb];if(!Yb){var qc=$b.str(Bb);Yb=kb.createShader(Lb);kb.shaderSource(Yb,qc);kb.compileShader(Yb);Mb[Bb]=Yb}return Yb}function vb(Lb,Bb){this.id=wb++;this.fragId=Lb;this.vertId=Bb;this.program=
null;this.uniforms=[];this.attributes=[];rc.profile&&(this.stats={uniformsCount:0,attributesCount:0})}function Sb(Lb,Bb,Mb){var Yb=gb(35632,Lb.fragId);var qc=gb(35633,Lb.vertId);Bb=Lb.program=kb.createProgram();kb.attachShader(Bb,Yb);kb.attachShader(Bb,qc);if(Mb)for(Yb=0;Yb<Mb.length;++Yb)qc=Mb[Yb],kb.bindAttribLocation(Bb,qc[0],qc[1]);kb.linkProgram(Bb);qc=kb.getProgramParameter(Bb,35718);rc.profile&&(Lb.stats.uniformsCount=qc);var Tc=Lb.uniforms;for(Yb=0;Yb<qc;++Yb)if(Mb=kb.getActiveUniform(Bb,
Yb))if(1<Mb.size)for(var Yc=0;Yc<Mb.size;++Yc){var ad=Mb.name.replace("[0]","["+Yc+"]");Rc(Tc,new xc(ad,$b.id(ad),kb.getUniformLocation(Bb,ad),Mb))}else Rc(Tc,new xc(Mb.name,$b.id(Mb.name),kb.getUniformLocation(Bb,Mb.name),Mb));qc=kb.getProgramParameter(Bb,35721);rc.profile&&(Lb.stats.attributesCount=qc);Lb=Lb.attributes;for(Yb=0;Yb<qc;++Yb)(Mb=kb.getActiveAttrib(Bb,Yb))&&Rc(Lb,new xc(Mb.name,$b.id(Mb.name),kb.getAttribLocation(Bb,Mb.name),Mb))}var ic={},ac={},bc={},Ub=[],wb=0;rc.profile&&(gc.getMaxUniformsCount=
function(){var Lb=0;Ub.forEach(function(Bb){Bb.stats.uniformsCount>Lb&&(Lb=Bb.stats.uniformsCount)});return Lb},gc.getMaxAttributesCount=function(){var Lb=0;Ub.forEach(function(Bb){Bb.stats.attributesCount>Lb&&(Lb=Bb.stats.attributesCount)});return Lb});return{clear:function(){var Lb=kb.deleteShader.bind(kb);eb(ic).forEach(Lb);ic={};eb(ac).forEach(Lb);ac={};Ub.forEach(function(Bb){kb.deleteProgram(Bb.program)});Ub.length=0;bc={};gc.shaderCount=0},program:function(Lb,Bb,Mb,Yb){var qc=bc[Bb];qc||(qc=
bc[Bb]={});var Tc=qc[Lb];if(Tc&&!Yb)return Tc;Bb=new vb(Bb,Lb);gc.shaderCount++;Sb(Bb,Mb,Yb);Tc||(qc[Lb]=Bb);Ub.push(Bb);return Bb},restore:function(){ic={};ac={};for(var Lb=0;Lb<Ub.length;++Lb)Sb(Ub[Lb],null,Ub[Lb].attributes.map(function(Bb){return[Bb.location,Bb.name]}))},shader:gb,frag:-1,vert:-1}}function S(kb,$b,gc,rc,xc,Rc,gb){function vb(ic){var ac=null===$b.next?5121:$b.next.colorAttachments[0].texture._texture.type;var bc=0,Ub=0,wb=rc.framebufferWidth,Lb=rc.framebufferHeight,Bb=null;Ua(ic)?
Bb=ic:ic&&(bc=ic.x|0,Ub=ic.y|0,wb=(ic.width||rc.framebufferWidth-bc)|0,Lb=(ic.height||rc.framebufferHeight-Ub)|0,Bb=ic.data||null);gc();ic=wb*Lb*4;Bb||(5121===ac?Bb=new Uint8Array(ic):5126===ac&&(Bb=Bb||new Float32Array(ic)));kb.pixelStorei(3333,4);kb.readPixels(bc,Ub,wb,Lb,6408,ac,Bb);return Bb}function Sb(ic){var ac;$b.setFBO({framebuffer:ic.framebuffer},function(){ac=vb(ic)});return ac}return function(ic){return ic&&"framebuffer"in ic?Sb(ic):vb(ic)}}function X(kb){return Array.prototype.slice.call(kb)}
function ba(kb){return X(kb).join("")}function ca(){function kb(){var vb=[],Sb=[];return pa(function(){vb.push.apply(vb,X(arguments))},{def:function(){var ic="v"+gc++;Sb.push(ic);0<arguments.length&&(vb.push(ic,"\x3d"),vb.push.apply(vb,X(arguments)),vb.push(";"));return ic},toString:function(){return ba([0<Sb.length?"var "+Sb.join(",")+";":"",ba(vb)])}})}function $b(){function vb(Ub,wb){ic(Ub,wb,"\x3d",Sb.def(Ub,wb),";")}var Sb=kb(),ic=kb(),ac=Sb.toString,bc=ic.toString;return pa(function(){Sb.apply(Sb,
X(arguments))},{def:Sb.def,entry:Sb,exit:ic,save:vb,set:function(Ub,wb,Lb){vb(Ub,wb);Sb(Ub,wb,"\x3d",Lb,";")},toString:function(){return ac()+bc()}})}var gc=0,rc=[],xc=[],Rc=kb(),gb={};return{global:Rc,link:function(vb){for(var Sb=0;Sb<xc.length;++Sb)if(xc[Sb]===vb)return rc[Sb];Sb="g"+gc++;rc.push(Sb);xc.push(vb);return Sb},block:kb,proc:function(vb,Sb){function ic(){var wb="a"+ac.length;ac.push(wb);return wb}var ac=[];Sb=Sb||0;for(var bc=0;bc<Sb;++bc)ic();bc=$b();var Ub=bc.toString;return gb[vb]=
pa(bc,{arg:ic,toString:function(){return ba(["function(",ac.join(),"){",Ub(),"}"])}})},scope:$b,cond:function(){var vb=ba(arguments),Sb=$b(),ic=$b(),ac=Sb.toString,bc=ic.toString;return pa(Sb,{then:function(){Sb.apply(Sb,X(arguments));return this},"else":function(){ic.apply(ic,X(arguments));return this},toString:function(){var Ub=bc();Ub&&(Ub="else{"+Ub+"}");return ba(["if(",vb,"){",ac(),"}",Ub])}})},compile:function(){var vb=['"use strict";',Rc,"return {"];Object.keys(gb).forEach(function(ic){vb.push('"',
ic,'":',gb[ic].toString(),",")});vb.push("}");var Sb=ba(vb).replace(/;/g,";\n").replace(/}/g,"}\n").replace(/{/g,"{\n");return Function.apply(null,rc.concat(Sb)).apply(null,xc)}}}function ia(kb){return Array.isArray(kb)||Ua(kb)||t(kb)}function ja(kb){return kb.sort(function($b,gc){return"viewport"===$b?-1:"viewport"===gc?1:$b<gc?-1:1})}function la(kb,$b,gc,rc){this.thisDep=kb;this.contextDep=$b;this.propDep=gc;this.append=rc}function da(kb){return kb&&!(kb.thisDep||kb.contextDep||kb.propDep)}function oa(kb){return new la(!1,
!1,!1,kb)}function sa(kb,$b){var gc=kb.type;return 0===gc?(gc=kb.data.length,new la(!0,1<=gc,2<=gc,$b)):4===gc?(gc=kb.data,new la(gc.thisDep,gc.contextDep,gc.propDep,$b)):new la(3===gc,2===gc,1===gc,$b)}function ma(kb,$b,gc,rc,xc,Rc,gb,vb,Sb,ic,ac,bc,Ub,wb,Lb){function Bb(Tb){return Tb.replace(".","_")}function Mb(Tb,jc,Hc){var Wc=Bb(Tb);Od.push(Tb);kd[Wc]=yc[Wc]=!!Hc;Td[Wc]=jc}function Yb(Tb,jc,Hc){var Wc=Bb(Tb);Od.push(Tb);Array.isArray(Hc)?(yc[Wc]=Hc.slice(),kd[Wc]=Hc.slice()):yc[Wc]=kd[Wc]=Hc;
Ld[Wc]=jc}function qc(){var Tb=ca(),jc=Tb.link,Hc=Tb.global;Tb.id=pe++;Tb.batchId="0";var Wc=jc(Jd),Lc=Tb.shared={props:"a0"};Object.keys(Jd).forEach(function(sc){Lc[sc]=Hc.def(Wc,".",sc)});var Mc=Tb.next={},Pc=Tb.current={};Object.keys(Ld).forEach(function(sc){Array.isArray(yc[sc])&&(Mc[sc]=Hc.def(Lc.next,".",sc),Pc[sc]=Hc.def(Lc.current,".",sc))});var Cc=Tb.constants={};Object.keys(fe).forEach(function(sc){Cc[sc]=Hc.def(JSON.stringify(fe[sc]))});Tb.invoke=function(sc,tc){switch(tc.type){case 0:var hd=
["this",Lc.context,Lc.props,Tb.batchId];return sc.def(jc(tc.data),".call(",hd.slice(0,Math.max(tc.data.length+1,4)),")");case 1:return sc.def(Lc.props,tc.data);case 2:return sc.def(Lc.context,tc.data);case 3:return sc.def("this",tc.data);case 4:return tc.data.append(Tb,sc),tc.data.ref}};Tb.attribCache={};var oc={};Tb.scopeAttrib=function(sc){sc=$b.id(sc);if(sc in oc)return oc[sc];var tc=ic.scope[sc];tc||(tc=ic.scope[sc]=new pf);return oc[sc]=jc(tc)};return Tb}function Tc(Tb){var jc=Tb["static"];Tb=
Tb.dynamic;if("profile"in jc){var Hc=!!jc.profile;var Wc=oa(function(Mc,Pc){return Hc});Wc.enable=Hc}else if("profile"in Tb){var Lc=Tb.profile;Wc=sa(Lc,function(Mc,Pc){return Mc.invoke(Pc,Lc)})}return Wc}function Yc(Tb,jc){jc=Tb["static"];Tb=Tb.dynamic;if("framebuffer"in jc){var Hc=jc.framebuffer;return Hc?(Hc=vb.getFramebuffer(Hc),oa(function(Lc,Mc){var Pc=Lc.link(Hc);Lc=Lc.shared;Mc.set(Lc.framebuffer,".next",Pc);Lc=Lc.context;Mc.set(Lc,".framebufferWidth",Pc+".width");Mc.set(Lc,".framebufferHeight",
Pc+".height");return Pc})):oa(function(Lc,Mc){Lc=Lc.shared;Mc.set(Lc.framebuffer,".next","null");Lc=Lc.context;Mc.set(Lc,".framebufferWidth",Lc+".drawingBufferWidth");Mc.set(Lc,".framebufferHeight",Lc+".drawingBufferHeight");return"null"})}if("framebuffer"in Tb){var Wc=Tb.framebuffer;return sa(Wc,function(Lc,Mc){var Pc=Lc.invoke(Mc,Wc);Lc=Lc.shared;var Cc=Lc.framebuffer;Pc=Mc.def(Cc,".getFramebuffer(",Pc,")");Mc.set(Cc,".next",Pc);Lc=Lc.context;Mc.set(Lc,".framebufferWidth",Pc+"?"+Pc+".width:"+Lc+
".drawingBufferWidth");Mc.set(Lc,".framebufferHeight",Pc+"?"+Pc+".height:"+Lc+".drawingBufferHeight");return Pc})}return null}function ad(Tb,jc,Hc){function Wc(Cc){if(Cc in Lc){var oc=Lc[Cc];Cc=!0;var sc=oc.x|0,tc=oc.y|0,hd,qd;"width"in oc?hd=oc.width|0:Cc=!1;"height"in oc?qd=oc.height|0:Cc=!1;return new la(!Cc&&jc&&jc.thisDep,!Cc&&jc&&jc.contextDep,!Cc&&jc&&jc.propDep,function(wd,sd){wd=wd.shared.context;var xe=hd;"width"in oc||(xe=sd.def(wd,".","framebufferWidth","-",sc));var ue=qd;"height"in oc||
(ue=sd.def(wd,".","framebufferHeight","-",tc));return[sc,tc,xe,ue]})}if(Cc in Mc){var td=Mc[Cc];Cc=sa(td,function(wd,sd){var xe=wd.invoke(sd,td);wd=wd.shared.context;var ue=sd.def(xe,".x|0"),Le=sd.def(xe,".y|0"),oe=sd.def('"width" in ',xe,"?",xe,".width|0:","(",wd,".","framebufferWidth","-",ue,")");xe=sd.def('"height" in ',xe,"?",xe,".height|0:","(",wd,".","framebufferHeight","-",Le,")");return[ue,Le,oe,xe]});jc&&(Cc.thisDep=Cc.thisDep||jc.thisDep,Cc.contextDep=Cc.contextDep||jc.contextDep,Cc.propDep=
Cc.propDep||jc.propDep);return Cc}return jc?new la(jc.thisDep,jc.contextDep,jc.propDep,function(wd,sd){wd=wd.shared.context;return[0,0,sd.def(wd,".","framebufferWidth"),sd.def(wd,".","framebufferHeight")]}):null}var Lc=Tb["static"],Mc=Tb.dynamic;if(Tb=Wc("viewport")){var Pc=Tb;Tb=new la(Tb.thisDep,Tb.contextDep,Tb.propDep,function(Cc,oc){var sc=Pc.append(Cc,oc);Cc=Cc.shared.context;oc.set(Cc,".viewportWidth",sc[2]);oc.set(Cc,".viewportHeight",sc[3]);return sc})}return{viewport:Tb,scissor_box:Wc("scissor.box")}}
function ec(Tb,jc){Tb=Tb["static"];if("string"===typeof Tb.frag&&"string"===typeof Tb.vert){if(0<Object.keys(jc.dynamic).length)return null;Tb=jc["static"];jc=Object.keys(Tb);if(0<jc.length&&"number"===typeof Tb[jc[0]]){for(var Hc=[],Wc=0;Wc<jc.length;++Wc)Hc.push([Tb[jc[Wc]]|0,jc[Wc]]);return Hc}}return null}function Fc(Tb,jc,Hc){function Wc(sc){if(sc in Lc){var tc=$b.id(Lc[sc]);sc=oa(function(){return tc});sc.id=tc;return sc}if(sc in Mc){var hd=Mc[sc];return sa(hd,function(qd,td){var wd=qd.invoke(td,
hd);return td.def(qd.shared.strings,".id(",wd,")")})}return null}var Lc=Tb["static"],Mc=Tb.dynamic,Pc=Wc("frag"),Cc=Wc("vert"),oc=null;da(Pc)&&da(Cc)?(oc=ac.program(Cc.id,Pc.id,null,Hc),Tb=oa(function(sc,tc){return sc.link(oc)})):Tb=new la(Pc&&Pc.thisDep||Cc&&Cc.thisDep,Pc&&Pc.contextDep||Cc&&Cc.contextDep,Pc&&Pc.propDep||Cc&&Cc.propDep,function(sc,tc){var hd=sc.shared.shader;var qd=Pc?Pc.append(sc,tc):tc.def(hd,".","frag");sc=Cc?Cc.append(sc,tc):tc.def(hd,".","vert");return tc.def(hd+".program("+
sc+","+qd+")")});return{frag:Pc,vert:Cc,progVar:Tb,program:oc}}function dd(Tb,jc){function Hc(Cc,oc){if(Cc in Wc){var sc=Wc[Cc]|0;return oa(function(hd,qd){oc&&(hd.OFFSET=sc);return sc})}if(Cc in Lc){var tc=Lc[Cc];return sa(tc,function(hd,qd){qd=hd.invoke(qd,tc);oc&&(hd.OFFSET=qd);return qd})}return oc&&Mc?oa(function(hd,qd){hd.OFFSET="0";return 0}):null}var Wc=Tb["static"],Lc=Tb.dynamic,Mc=function(){if("elements"in Wc){var Cc=Wc.elements;ia(Cc)?Cc=Rc.getElements(Rc.create(Cc,!0)):Cc&&(Cc=Rc.getElements(Cc));
var oc=oa(function(tc,hd){return Cc?(hd=tc.link(Cc),tc.ELEMENTS=hd):tc.ELEMENTS=null});oc.value=Cc;return oc}if("elements"in Lc){var sc=Lc.elements;return sa(sc,function(tc,hd){var qd=tc.shared,td=qd.isBufferArgs;qd=qd.elements;var wd=tc.invoke(hd,sc),sd=hd.def("null");td=hd.def(td,"(",wd,")");wd=tc.cond(td).then(sd,"\x3d",qd,".createStream(",wd,");")["else"](sd,"\x3d",qd,".getElements(",wd,");");hd.entry(wd);hd.exit(tc.cond(td).then(qd,".destroyStream(",sd,");"));return tc.ELEMENTS=sd})}return null}(),
Pc=Hc("offset",!0);return{elements:Mc,primitive:function(){if("primitive"in Wc){var Cc=Wc.primitive;return oa(function(sc,tc){return Ea[Cc]})}if("primitive"in Lc){var oc=Lc.primitive;return sa(oc,function(sc,tc){var hd=sc.constants.primTypes;sc=sc.invoke(tc,oc);return tc.def(hd,"[",sc,"]")})}return Mc?da(Mc)?Mc.value?oa(function(sc,tc){return tc.def(sc.ELEMENTS,".primType")}):oa(function(){return 4}):new la(Mc.thisDep,Mc.contextDep,Mc.propDep,function(sc,tc){sc=sc.ELEMENTS;return tc.def(sc,"?",sc,
".primType:",4)}):null}(),count:function(){if("count"in Wc){var Cc=Wc.count|0;return oa(function(){return Cc})}if("count"in Lc){var oc=Lc.count;return sa(oc,function(sc,tc){return sc.invoke(tc,oc)})}return Mc?da(Mc)?Mc?Pc?new la(Pc.thisDep,Pc.contextDep,Pc.propDep,function(sc,tc){return tc.def(sc.ELEMENTS,".vertCount-",sc.OFFSET)}):oa(function(sc,tc){return tc.def(sc.ELEMENTS,".vertCount")}):oa(function(){return-1}):new la(Mc.thisDep||Pc.thisDep,Mc.contextDep||Pc.contextDep,Mc.propDep||Pc.propDep,
function(sc,tc){var hd=sc.ELEMENTS;return sc.OFFSET?tc.def(hd,"?",hd,".vertCount-",sc.OFFSET,":-1"):tc.def(hd,"?",hd,".vertCount:-1")}):null}(),instances:Hc("instances",!1),offset:Pc}}function Ac(Tb,jc){var Hc=Tb["static"],Wc=Tb.dynamic,Lc={};Od.forEach(function(Mc){function Pc(oc,sc){if(Mc in Hc){var tc=oc(Hc[Mc]);Lc[Cc]=oa(function(){return tc})}else if(Mc in Wc){var hd=Wc[Mc];Lc[Cc]=sa(hd,function(qd,td){return sc(qd,td,qd.invoke(td,hd))})}}var Cc=Bb(Mc);switch(Mc){case "cull.enable":case "blend.enable":case "dither":case "stencil.enable":case "depth.enable":case "scissor.enable":case "polygonOffset.enable":case "sample.alpha":case "sample.enable":case "depth.mask":return Pc(function(oc){return oc},
function(oc,sc,tc){return tc});case "depth.func":return Pc(function(oc){return Wb[oc]},function(oc,sc,tc){return sc.def(oc.constants.compareFuncs,"[",tc,"]")});case "depth.range":return Pc(function(oc){return oc},function(oc,sc,tc){oc=sc.def("+",tc,"[0]");sc=sc.def("+",tc,"[1]");return[oc,sc]});case "blend.func":return Pc(function(oc){return[Ob["srcRGB"in oc?oc.srcRGB:oc.src],Ob["dstRGB"in oc?oc.dstRGB:oc.dst],Ob["srcAlpha"in oc?oc.srcAlpha:oc.src],Ob["dstAlpha"in oc?oc.dstAlpha:oc.dst]]},function(oc,
sc,tc){function hd(sd,xe){return sc.def('"',sd,xe,'" in ',tc,"?",tc,".",sd,xe,":",tc,".",sd)}oc=oc.constants.blendFuncs;var qd=hd("src","RGB"),td=hd("dst","RGB");qd=sc.def(oc,"[",qd,"]");var wd=sc.def(oc,"[",hd("src","Alpha"),"]");td=sc.def(oc,"[",td,"]");oc=sc.def(oc,"[",hd("dst","Alpha"),"]");return[qd,td,wd,oc]});case "blend.equation":return Pc(function(oc){if("string"===typeof oc)return[ff[oc],ff[oc]];if("object"===typeof oc)return[ff[oc.rgb],ff[oc.alpha]]},function(oc,sc,tc){var hd=oc.constants.blendEquations,
qd=sc.def(),td=sc.def();oc=oc.cond("typeof ",tc,'\x3d\x3d\x3d"string"');oc.then(qd,"\x3d",td,"\x3d",hd,"[",tc,"];");oc["else"](qd,"\x3d",hd,"[",tc,".rgb];",td,"\x3d",hd,"[",tc,".alpha];");sc(oc);return[qd,td]});case "blend.color":return Pc(function(oc){return e(4,function(sc){return+oc[sc]})},function(oc,sc,tc){return e(4,function(hd){return sc.def("+",tc,"[",hd,"]")})});case "stencil.mask":return Pc(function(oc){return oc|0},function(oc,sc,tc){return sc.def(tc,"|0")});case "stencil.func":return Pc(function(oc){return[Wb[oc.cmp||
"keep"],oc.ref||0,"mask"in oc?oc.mask:-1]},function(oc,sc,tc){oc=sc.def('"cmp" in ',tc,"?",oc.constants.compareFuncs,"[",tc,".cmp]",":",7680);var hd=sc.def(tc,".ref|0");sc=sc.def('"mask" in ',tc,"?",tc,".mask|0:-1");return[oc,hd,sc]});case "stencil.opFront":case "stencil.opBack":return Pc(function(oc){return["stencil.opBack"===Mc?1029:1028,Bc[oc.fail||"keep"],Bc[oc.zfail||"keep"],Bc[oc.zpass||"keep"]]},function(oc,sc,tc){function hd(td){return sc.def('"',td,'" in ',tc,"?",qd,"[",tc,".",td,"]:",7680)}
var qd=oc.constants.stencilOps;return["stencil.opBack"===Mc?1029:1028,hd("fail"),hd("zfail"),hd("zpass")]});case "polygonOffset.offset":return Pc(function(oc){return[oc.factor|0,oc.units|0]},function(oc,sc,tc){oc=sc.def(tc,".factor|0");sc=sc.def(tc,".units|0");return[oc,sc]});case "cull.face":return Pc(function(oc){var sc=0;"front"===oc?sc=1028:"back"===oc&&(sc=1029);return sc},function(oc,sc,tc){return sc.def(tc,'\x3d\x3d\x3d"front"?',1028,":",1029)});case "lineWidth":return Pc(function(oc){return oc},
function(oc,sc,tc){return tc});case "frontFace":return Pc(function(oc){return Kc[oc]},function(oc,sc,tc){return sc.def(tc+'\x3d\x3d\x3d"cw"?2304:2305')});case "colorMask":return Pc(function(oc){return oc.map(function(sc){return!!sc})},function(oc,sc,tc){return e(4,function(hd){return"!!"+tc+"["+hd+"]"})});case "sample.coverage":return Pc(function(oc){return["value"in oc?oc.value:1,!!oc.invert]},function(oc,sc,tc){oc=sc.def('"value" in ',tc,"?+",tc,".value:1");sc=sc.def("!!",tc,".invert");return[oc,
sc]})}});return Lc}function Jc(Tb,jc){var Hc=Tb["static"],Wc=Tb.dynamic,Lc={};Object.keys(Hc).forEach(function(Mc){var Pc=Hc[Mc];if("number"===typeof Pc||"boolean"===typeof Pc)var Cc=oa(function(){return Pc});else if("function"===typeof Pc){var oc=Pc._reglType;if("texture2d"===oc||"textureCube"===oc)Cc=oa(function(sc){return sc.link(Pc)});else if("framebuffer"===oc||"framebufferCube"===oc)Cc=oa(function(sc){return sc.link(Pc.color[0])})}else u(Pc)&&(Cc=oa(function(sc){return sc.global.def("[",e(Pc.length,
function(tc){return Pc[tc]}),"]")}));Cc.value=Pc;Lc[Mc]=Cc});Object.keys(Wc).forEach(function(Mc){var Pc=Wc[Mc];Lc[Mc]=sa(Pc,function(Cc,oc){return Cc.invoke(oc,Pc)})});return Lc}function gd(Tb,jc){var Hc=Tb["static"],Wc=Tb.dynamic,Lc={};Object.keys(Hc).forEach(function(Mc){var Pc=Hc[Mc],Cc=$b.id(Mc),oc=new pf;if(ia(Pc))oc.state=1,oc.buffer=xc.getBuffer(xc.create(Pc,34962,!1,!0)),oc.type=0;else{var sc=xc.getBuffer(Pc);if(sc)oc.state=1,oc.buffer=sc,oc.type=0;else if("constant"in Pc){var tc=Pc.constant;
oc.buffer="null";oc.state=2;"number"===typeof tc?oc.x=tc:Pb.forEach(function(xe,ue){ue<tc.length&&(oc[xe]=tc[ue])})}else{sc=ia(Pc.buffer)?xc.getBuffer(xc.create(Pc.buffer,34962,!1,!0)):xc.getBuffer(Pc.buffer);var hd=Pc.offset|0,qd=Pc.stride|0,td=Pc.size|0,wd=!!Pc.normalized,sd=0;"type"in Pc&&(sd=cb[Pc.type]);Pc=Pc.divisor|0;oc.buffer=sc;oc.state=1;oc.size=td;oc.normalized=wd;oc.type=sd||sc.dtype;oc.offset=hd;oc.stride=qd;oc.divisor=Pc}}Lc[Mc]=oa(function(xe,ue){ue=xe.attribCache;if(Cc in ue)return ue[Cc];
var Le={isStream:!1};Object.keys(oc).forEach(function(oe){Le[oe]=oc[oe]});oc.buffer&&(Le.buffer=xe.link(oc.buffer),Le.type=Le.type||Le.buffer+".dtype");return ue[Cc]=Le})});Object.keys(Wc).forEach(function(Mc){var Pc=Wc[Mc];Lc[Mc]=sa(Pc,function(Cc,oc){function sc(ue){oc(td[ue],"\x3d",tc,".",ue,"|0;")}var tc=Cc.invoke(oc,Pc),hd=Cc.shared;Cc=Cc.constants;var qd=hd.isBufferArgs;hd=hd.buffer;var td={isStream:oc.def(!1)},wd=new pf;wd.state=1;Object.keys(wd).forEach(function(ue){td[ue]=oc.def(""+wd[ue])});
var sd=td.buffer,xe=td.type;oc("if(",qd,"(",tc,")){",td.isStream,"\x3dtrue;",sd,"\x3d",hd,".createStream(",34962,",",tc,");",xe,"\x3d",sd,".dtype;","}else{",sd,"\x3d",hd,".getBuffer(",tc,");","if(",sd,"){",xe,"\x3d",sd,".dtype;",'}else if("constant" in ',tc,"){",td.state,"\x3d",2,";","if(typeof "+tc+'.constant \x3d\x3d\x3d "number"){',td[Pb[0]],"\x3d",tc,".constant;",Pb.slice(1).map(function(ue){return td[ue]}).join("\x3d"),"\x3d0;","}else{",Pb.map(function(ue,Le){return td[ue]+"\x3d"+tc+".constant.length\x3e"+
Le+"?"+tc+".constant["+Le+"]:0;"}).join(""),"}}else{","if(",qd,"(",tc,".buffer)){",sd,"\x3d",hd,".createStream(",34962,",",tc,".buffer);","}else{",sd,"\x3d",hd,".getBuffer(",tc,".buffer);","}",xe,'\x3d"type" in ',tc,"?",Cc.glTypes,"[",tc,".type]:",sd,".dtype;",td.normalized,"\x3d!!",tc,".normalized;");sc("size");sc("offset");sc("stride");sc("divisor");oc("}}");oc.exit("if(",td.isStream,"){",hd,".destroyStream(",sd,");","}");return td})});return Lc}function Vc(Tb,jc){jc=Tb["static"];Tb=Tb.dynamic;
if("vao"in jc){var Hc=jc.vao;null!==Hc&&null===ic.getVAO(Hc)&&(Hc=ic.createVAO(Hc));return oa(function(Lc){return Lc.link(ic.getVAO(Hc))})}if("vao"in Tb){var Wc=Tb.vao;return sa(Wc,function(Lc,Mc){var Pc=Lc.invoke(Mc,Wc);return Mc.def(Lc.shared.vao+".getVAO("+Pc+")")})}return null}function Gc(Tb){var jc=Tb["static"],Hc=Tb.dynamic,Wc={};Object.keys(jc).forEach(function(Lc){var Mc=jc[Lc];Wc[Lc]=oa(function(Pc,Cc){return"number"===typeof Mc||"boolean"===typeof Mc?""+Mc:Pc.link(Mc)})});Object.keys(Hc).forEach(function(Lc){var Mc=
Hc[Lc];Wc[Lc]=sa(Mc,function(Pc,Cc){return Pc.invoke(Cc,Mc)})});return Wc}function pd(Tb,jc,Hc,Wc,Lc){function Mc(sd){var xe=oc[sd];xe&&(tc[sd]=xe)}var Pc=ec(Tb,jc),Cc=Yc(Tb,Lc),oc=ad(Tb,Cc,Lc),sc=dd(Tb,Lc),tc=Ac(Tb,Lc),hd=Fc(Tb,Lc,Pc);Mc("viewport");Mc(Bb("scissor.box"));var qd=0<Object.keys(tc).length;Cc={framebuffer:Cc,draw:sc,shader:hd,state:tc,dirty:qd,scopeVAO:null,drawVAO:null,useVAO:!1,attributes:{}};Cc.profile=Tc(Tb,Lc);Cc.uniforms=Jc(Hc,Lc);Cc.drawVAO=Cc.scopeVAO=Vc(Tb,Lc);if(!Cc.drawVAO&&
hd.program&&!Pc&&gc.angle_instanced_arrays){var td=!0;Tb=hd.program.attributes.map(function(sd){sd=jc["static"][sd];td=td&&!!sd;return sd});if(td&&0<Tb.length){var wd=ic.getVAO(ic.createVAO(Tb));Cc.drawVAO=new la(null,null,null,function(sd,xe){return sd.link(wd)});Cc.useVAO=!0}}Pc?Cc.useVAO=!0:Cc.attributes=gd(jc,Lc);Cc.context=Gc(Wc,Lc);return Cc}function md(Tb,jc,Hc){var Wc=Tb.shared.context,Lc=Tb.scope();Object.keys(Hc).forEach(function(Mc){jc.save(Wc,"."+Mc);Lc(Wc,".",Mc,"\x3d",Hc[Mc].append(Tb,
jc),";")});jc(Lc)}function rd(Tb,jc,Hc,Wc){var Lc=Tb.shared,Mc=Lc.gl,Pc=Lc.framebuffer,Cc;Sc&&(Cc=jc.def(Lc.extensions,".webgl_draw_buffers"));var oc=Tb.constants;Lc=oc.drawBuffer;oc=oc.backBuffer;Tb=Hc?Hc.append(Tb,jc):jc.def(Pc,".next");Wc||jc("if(",Tb,"!\x3d\x3d",Pc,".cur){");jc("if(",Tb,"){",Mc,".bindFramebuffer(",36160,",",Tb,".framebuffer);");Sc&&jc(Cc,".drawBuffersWEBGL(",Lc,"[",Tb,".colorAttachments.length]);");jc("}else{",Mc,".bindFramebuffer(",36160,",null);");Sc&&jc(Cc,".drawBuffersWEBGL(",
oc,");");jc("}",Pc,".cur\x3d",Tb,";");Wc||jc("}")}function re(Tb,jc,Hc){var Wc=Tb.shared,Lc=Wc.gl,Mc=Tb.current,Pc=Tb.next,Cc=Wc.current,oc=Wc.next,sc=Tb.cond(Cc,".dirty");Od.forEach(function(tc){tc=Bb(tc);if(!(tc in Hc.state))if(tc in Pc){var hd=Pc[tc];var qd=Mc[tc];var td=e(yc[tc].length,function(wd){return sc.def(hd,"[",wd,"]")});sc(Tb.cond(td.map(function(wd,sd){return wd+"!\x3d\x3d"+qd+"["+sd+"]"}).join("||")).then(Lc,".",Ld[tc],"(",td,");",td.map(function(wd,sd){return qd+"["+sd+"]\x3d"+wd}).join(";"),
";"))}else hd=sc.def(oc,".",tc),td=Tb.cond(hd,"!\x3d\x3d",Cc,".",tc),sc(td),tc in Td?td(Tb.cond(hd).then(Lc,".enable(",Td[tc],");")["else"](Lc,".disable(",Td[tc],");"),Cc,".",tc,"\x3d",hd,";"):td(Lc,".",Ld[tc],"(",hd,");",Cc,".",tc,"\x3d",hd,";")});0===Object.keys(Hc.state).length&&sc(Cc,".dirty\x3dfalse;");jc(sc)}function Ad(Tb,jc,Hc,Wc){var Lc=Tb.shared,Mc=Tb.current,Pc=Lc.current,Cc=Lc.gl;ja(Object.keys(Hc)).forEach(function(oc){var sc=Hc[oc];if(!Wc||Wc(sc)){var tc=sc.append(Tb,jc);if(Td[oc]){var hd=
Td[oc];da(sc)?tc?jc(Cc,".enable(",hd,");"):jc(Cc,".disable(",hd,");"):jc(Tb.cond(tc).then(Cc,".enable(",hd,");")["else"](Cc,".disable(",hd,");"));jc(Pc,".",oc,"\x3d",tc,";")}else if(u(tc)){var qd=Mc[oc];jc(Cc,".",Ld[oc],"(",tc,");",tc.map(function(td,wd){return qd+"["+wd+"]\x3d"+td}).join(";"),";")}else jc(Cc,".",Ld[oc],"(",tc,");",Pc,".",oc,"\x3d",tc,";")}})}function Bd(Tb,jc){Vb&&(Tb.instancing=jc.def(Tb.shared.extensions,".angle_instanced_arrays"))}function be(Tb,jc,Hc,Wc,Lc){function Mc(){return"undefined"===
typeof performance?"Date.now()":"performance.now()"}function Pc(sd){td=jc.def();sd(td,"\x3d",Mc(),";");"string"===typeof Lc?sd(tc,".count+\x3d",Lc,";"):sd(tc,".count++;");wb&&(Wc?(wd=jc.def(),sd(wd,"\x3d",qd,".getNumPendingQueries();")):sd(qd,".beginQuery(",tc,");"))}function Cc(sd){sd(tc,".cpuTime+\x3d",Mc(),"-",td,";");wb&&(Wc?sd(qd,".pushScopeStats(",wd,",",qd,".getNumPendingQueries(),",tc,");"):sd(qd,".endQuery();"))}function oc(sd){var xe=jc.def(hd,".profile");jc(hd,".profile\x3d",sd,";");jc.exit(hd,
".profile\x3d",xe,";")}var sc=Tb.shared,tc=Tb.stats,hd=sc.current,qd=sc.timer;Hc=Hc.profile;var td,wd;if(Hc){if(da(Hc)){Hc.enable?(Pc(jc),Cc(jc.exit),oc("true")):oc("false");return}Hc=Hc.append(Tb,jc);oc(Hc)}else Hc=jc.def(hd,".profile");sc=Tb.block();Pc(sc);jc("if(",Hc,"){",sc,"}");Tb=Tb.block();Cc(Tb);jc.exit("if(",Hc,"){",Tb,"}")}function le(Tb,jc,Hc,Wc,Lc){function Mc(oc){switch(oc){case 35664:case 35667:case 35671:return 2;case 35665:case 35668:case 35672:return 3;case 35666:case 35669:case 35673:return 4;
default:return 1}}function Pc(oc,sc,tc){function hd(){jc("if(!",sd,".buffer){",td,".enableVertexAttribArray(",wd,");}");var oe=tc.type;var Re=tc.size?jc.def(tc.size,"||",sc):sc;jc("if(",sd,".type!\x3d\x3d",oe,"||",sd,".size!\x3d\x3d",Re,"||",Le.map(function(Gf){return sd+"."+Gf+"!\x3d\x3d"+tc[Gf]}).join("||"),"){",td,".bindBuffer(",34962,",",xe,".buffer);",td,".vertexAttribPointer(",[wd,Re,oe,tc.normalized,tc.stride,tc.offset],");",sd,".type\x3d",oe,";",sd,".size\x3d",Re,";",Le.map(function(Gf){return sd+
"."+Gf+"\x3d"+tc[Gf]+";"}).join(""),"}");Vb&&(oe=tc.divisor,jc("if(",sd,".divisor!\x3d\x3d",oe,"){",Tb.instancing,".vertexAttribDivisorANGLE(",[wd,oe],");",sd,".divisor\x3d",oe,";}"))}function qd(){jc("if(",sd,".buffer){",td,".disableVertexAttribArray(",wd,");",sd,".buffer\x3dnull;","}if(",Pb.map(function(oe,Re){return sd+"."+oe+"!\x3d\x3d"+ue[Re]}).join("||"),"){",td,".vertexAttrib4f(",wd,",",ue,");",Pb.map(function(oe,Re){return sd+"."+oe+"\x3d"+ue[Re]+";"}).join(""),"}")}var td=Cc.gl,wd=jc.def(oc,
".location"),sd=jc.def(Cc.attributes,"[",wd,"]");oc=tc.state;var xe=tc.buffer,ue=[tc.x,tc.y,tc.z,tc.w],Le=["buffer","normalized","offset","stride"];1===oc?hd():2===oc?qd():(jc("if(",oc,"\x3d\x3d\x3d",1,"){"),hd(),jc("}else{"),qd(),jc("}"))}var Cc=Tb.shared;Wc.forEach(function(oc){var sc=oc.name,tc=Hc.attributes[sc];if(tc){if(!Lc(tc))return;var hd=tc.append(Tb,jc)}else{if(!Lc(Nc))return;var qd=Tb.scopeAttrib(sc);hd={};Object.keys(new pf).forEach(function(td){hd[td]=jc.def(qd,".",td)})}Pc(Tb.link(oc),
Mc(oc.info.type),hd)})}function Rd(Tb,jc,Hc,Wc,Lc){for(var Mc=Tb.shared,Pc=Mc.gl,Cc,oc=0;oc<Wc.length;++oc){var sc=Wc[oc],tc=sc.name,hd=sc.info.type,qd=Hc.uniforms[tc];sc=Tb.link(sc)+".location";if(qd){if(!Lc(qd))continue;if(da(qd)){tc=qd.value;if(35678===hd||35680===hd)hd=Tb.link(tc._texture||tc.color[0]._texture),jc(Pc,".uniform1i(",sc,",",hd+".bind());"),jc.exit(hd,".unbind();");else if(35674===hd||35675===hd||35676===hd)tc=Tb.global.def("new Float32Array(["+Array.prototype.slice.call(tc)+"])"),
qd=2,35675===hd?qd=3:35676===hd&&(qd=4),jc(Pc,".uniformMatrix",qd,"fv(",sc,",false,",tc,");");else{switch(hd){case 5126:Cc="1f";break;case 35664:Cc="2f";break;case 35665:Cc="3f";break;case 35666:Cc="4f";break;case 35670:Cc="1i";break;case 5124:Cc="1i";break;case 35671:Cc="2i";break;case 35667:Cc="2i";break;case 35672:Cc="3i";break;case 35668:Cc="3i";break;case 35673:Cc="4i";break;case 35669:Cc="4i"}jc(Pc,".uniform",Cc,"(",sc,",",u(tc)?Array.prototype.slice.call(tc):tc,");")}continue}else var td=qd.append(Tb,
jc)}else{if(!Lc(Nc))continue;td=jc.def(Mc.uniforms,"[",$b.id(tc),"]")}35678===hd?jc("if(",td,"\x26\x26",td,'._reglType\x3d\x3d\x3d"framebuffer"){',td,"\x3d",td,".color[0];","}"):35680===hd&&jc("if(",td,"\x26\x26",td,'._reglType\x3d\x3d\x3d"framebufferCube"){',td,"\x3d",td,".color[0];","}");tc=1;switch(hd){case 35678:case 35680:hd=jc.def(td,"._texture");jc(Pc,".uniform1i(",sc,",",hd,".bind());");jc.exit(hd,".unbind();");continue;case 5124:case 35670:Cc="1i";break;case 35667:case 35671:Cc="2i";tc=2;
break;case 35668:case 35672:Cc="3i";tc=3;break;case 35669:case 35673:Cc="4i";tc=4;break;case 5126:Cc="1f";break;case 35664:Cc="2f";tc=2;break;case 35665:Cc="3f";tc=3;break;case 35666:Cc="4f";tc=4;break;case 35674:Cc="Matrix2fv";break;case 35675:Cc="Matrix3fv";break;case 35676:Cc="Matrix4fv"}jc(Pc,".uniform",Cc,"(",sc,",");if("M"===Cc.charAt(0)){sc=Math.pow(hd-35674+2,2);var wd=Tb.global.def("new Float32Array(",sc,")");jc("false,(Array.isArray(",td,")||",td," instanceof Float32Array)?",td,":(",e(sc,
function(sd){return wd+"["+sd+"]\x3d"+td+"["+sd+"]"}),",",wd,")")}else 1<tc?jc(e(tc,function(sd){return td+"["+sd+"]"})):jc(td);jc(");")}}function Fe(Tb,jc,Hc,Wc){function Lc(oe){var Re=tc[oe];return Re?Re.contextDep&&Wc.contextDynamic||Re.propDep?Re.append(Tb,Hc):Re.append(Tb,jc):jc.def(sc,".",oe)}function Mc(){function oe(){Hc(xe,".drawElementsInstancedANGLE(",[qd,wd,ue,td+"\x3c\x3c(("+ue+"-5121)\x3e\x3e1)",sd],");")}function Re(){Hc(xe,".drawArraysInstancedANGLE(",[qd,td,wd,sd],");")}hd?Le?oe():
(Hc("if(",hd,"){"),oe(),Hc("}else{"),Re(),Hc("}")):Re()}function Pc(){function oe(){Hc(oc+".drawElements("+[qd,wd,ue,td+"\x3c\x3c(("+ue+"-5121)\x3e\x3e1)"]+");")}function Re(){Hc(oc+".drawArrays("+[qd,td,wd]+");")}hd?Le?oe():(Hc("if(",hd,"){"),oe(),Hc("}else{"),Re(),Hc("}")):Re()}var Cc=Tb.shared,oc=Cc.gl,sc=Cc.draw,tc=Wc.draw,hd=function(){var oe=tc.elements,Re=jc;if(oe){if(oe.contextDep&&Wc.contextDynamic||oe.propDep)Re=Hc;oe=oe.append(Tb,Re)}else oe=Re.def(sc,".","elements");oe&&Re("if("+oe+")"+
oc+".bindBuffer(34963,"+oe+".buffer.buffer);");return oe}(),qd=Lc("primitive"),td=Lc("offset"),wd=function(){var oe=tc.count,Re=jc;if(oe){if(oe.contextDep&&Wc.contextDynamic||oe.propDep)Re=Hc;oe=oe.append(Tb,Re)}else oe=Re.def(sc,".","count");return oe}();if("number"===typeof wd){if(0===wd)return}else Hc("if(",wd,"){"),Hc.exit("}");var sd,xe;Vb&&(sd=Lc("instances"),xe=Tb.instancing);var ue=hd+".type",Le=tc.elements&&da(tc.elements);Vb&&("number"!==typeof sd||0<=sd)?"string"===typeof sd?(Hc("if(",
sd,"\x3e0){"),Mc(),Hc("}else if(",sd,"\x3c0){"),Pc(),Hc("}")):Mc():Pc()}function Je(Tb,jc,Hc,Wc,Lc){jc=qc();Lc=jc.proc("body",Lc);Vb&&(jc.instancing=Lc.def(jc.shared.extensions,".angle_instanced_arrays"));Tb(jc,Lc,Hc,Wc);return jc.compile().body}function Kd(Tb,jc,Hc,Wc){Bd(Tb,jc);Hc.useVAO?Hc.drawVAO?jc(Tb.shared.vao,".setVAO(",Hc.drawVAO.append(Tb,jc),");"):jc(Tb.shared.vao,".setVAO(",Tb.shared.vao,".targetVAO);"):(jc(Tb.shared.vao,".setVAO(null);"),le(Tb,jc,Hc,Wc.attributes,function(){return!0}));
Rd(Tb,jc,Hc,Wc.uniforms,function(){return!0});Fe(Tb,jc,jc,Hc)}function Dd(Tb,jc){var Hc=Tb.proc("draw",1);Bd(Tb,Hc);md(Tb,Hc,jc.context);rd(Tb,Hc,jc.framebuffer);re(Tb,Hc,jc);Ad(Tb,Hc,jc.state);be(Tb,Hc,jc,!1,!0);var Wc=jc.shader.progVar.append(Tb,Hc);Hc(Tb.shared.gl,".useProgram(",Wc,".program);");if(jc.shader.program)Kd(Tb,Hc,jc,jc.shader.program);else{Hc(Tb.shared.vao,".setVAO(null);");var Lc=Tb.global.def("{}"),Mc=Hc.def(Wc,".id"),Pc=Hc.def(Lc,"[",Mc,"]");Hc(Tb.cond(Pc).then(Pc,".call(this,a0);")["else"](Pc,
"\x3d",Lc,"[",Mc,"]\x3d",Tb.link(function(Cc){return Je(Kd,Tb,jc,Cc,1)}),"(",Wc,");",Pc,".call(this,a0);"))}0<Object.keys(jc.state).length&&Hc(Tb.shared.current,".dirty\x3dtrue;")}function we(Tb,jc,Hc,Wc){function Lc(){return!0}Tb.batchId="a1";Bd(Tb,jc);le(Tb,jc,Hc,Wc.attributes,Lc);Rd(Tb,jc,Hc,Wc.uniforms,Lc);Fe(Tb,jc,jc,Hc)}function se(Tb,jc,Hc,Wc){function Lc(hd){return hd.contextDep&&Pc||hd.propDep}function Mc(hd){return!Lc(hd)}Bd(Tb,jc);var Pc=Hc.contextDep,Cc=jc.def(),oc=jc.def();Tb.shared.props=
oc;Tb.batchId=Cc;var sc=Tb.scope(),tc=Tb.scope();jc(sc.entry,"for(",Cc,"\x3d0;",Cc,"\x3c","a1",";++",Cc,"){",oc,"\x3d","a0","[",Cc,"];",tc,"}",sc.exit);Hc.needsContext&&md(Tb,tc,Hc.context);Hc.needsFramebuffer&&rd(Tb,tc,Hc.framebuffer);Ad(Tb,tc,Hc.state,Lc);Hc.profile&&Lc(Hc.profile)&&be(Tb,tc,Hc,!1,!0);Wc?(Hc.useVAO?Hc.drawVAO?Lc(Hc.drawVAO)?tc(Tb.shared.vao,".setVAO(",Hc.drawVAO.append(Tb,tc),");"):sc(Tb.shared.vao,".setVAO(",Hc.drawVAO.append(Tb,sc),");"):sc(Tb.shared.vao,".setVAO(",Tb.shared.vao,
".targetVAO);"):(sc(Tb.shared.vao,".setVAO(null);"),le(Tb,sc,Hc,Wc.attributes,Mc),le(Tb,tc,Hc,Wc.attributes,Lc)),Rd(Tb,sc,Hc,Wc.uniforms,Mc),Rd(Tb,tc,Hc,Wc.uniforms,Lc),Fe(Tb,sc,tc,Hc)):(jc=Tb.global.def("{}"),Wc=Hc.shader.progVar.append(Tb,tc),oc=tc.def(Wc,".id"),sc=tc.def(jc,"[",oc,"]"),tc(Tb.shared.gl,".useProgram(",Wc,".program);","if(!",sc,"){",sc,"\x3d",jc,"[",oc,"]\x3d",Tb.link(function(hd){return Je(we,Tb,Hc,hd,2)}),"(",Wc,");}",sc,".call(this,a0[",Cc,"],",Cc,");"))}function Xd(Tb,jc){function Hc(sc){return sc.contextDep&&
Lc||sc.propDep}var Wc=Tb.proc("batch",2);Tb.batchId="0";Bd(Tb,Wc);var Lc=!1,Mc=!0;Object.keys(jc.context).forEach(function(sc){Lc=Lc||jc.context[sc].propDep});Lc||(md(Tb,Wc,jc.context),Mc=!1);var Pc=jc.framebuffer,Cc=!1;Pc?(Pc.propDep?Lc=Cc=!0:Pc.contextDep&&Lc&&(Cc=!0),Cc||rd(Tb,Wc,Pc)):rd(Tb,Wc,null);jc.state.viewport&&jc.state.viewport.propDep&&(Lc=!0);re(Tb,Wc,jc);Ad(Tb,Wc,jc.state,function(sc){return!Hc(sc)});jc.profile&&Hc(jc.profile)||be(Tb,Wc,jc,!1,"a1");jc.contextDep=Lc;jc.needsContext=Mc;
jc.needsFramebuffer=Cc;Mc=jc.shader.progVar;if(Mc.contextDep&&Lc||Mc.propDep)se(Tb,Wc,jc,null);else if(Mc=Mc.append(Tb,Wc),Wc(Tb.shared.gl,".useProgram(",Mc,".program);"),jc.shader.program)se(Tb,Wc,jc,jc.shader.program);else{Wc(Tb.shared.vao,".setVAO(null);");Pc=Tb.global.def("{}");Cc=Wc.def(Mc,".id");var oc=Wc.def(Pc,"[",Cc,"]");Wc(Tb.cond(oc).then(oc,".call(this,a0,a1);")["else"](oc,"\x3d",Pc,"[",Cc,"]\x3d",Tb.link(function(sc){return Je(se,Tb,jc,sc,2)}),"(",Mc,");",oc,".call(this,a0,a1);"))}0<
Object.keys(jc.state).length&&Wc(Tb.shared.current,".dirty\x3dtrue;")}function ye(Tb,jc){function Hc(Pc){var Cc=jc.shader[Pc];Cc&&Wc.set(Lc.shader,"."+Pc,Cc.append(Tb,Wc))}var Wc=Tb.proc("scope",3);Tb.batchId="a2";var Lc=Tb.shared,Mc=Lc.current;md(Tb,Wc,jc.context);jc.framebuffer&&jc.framebuffer.append(Tb,Wc);ja(Object.keys(jc.state)).forEach(function(Pc){var Cc=jc.state[Pc].append(Tb,Wc);u(Cc)?Cc.forEach(function(oc,sc){Wc.set(Tb.next[Pc],"["+sc+"]",oc)}):Wc.set(Lc.next,"."+Pc,Cc)});be(Tb,Wc,jc,
!0,!0);["elements","offset","count","instances","primitive"].forEach(function(Pc){var Cc=jc.draw[Pc];Cc&&Wc.set(Lc.draw,"."+Pc,""+Cc.append(Tb,Wc))});Object.keys(jc.uniforms).forEach(function(Pc){Wc.set(Lc.uniforms,"["+$b.id(Pc)+"]",jc.uniforms[Pc].append(Tb,Wc))});Object.keys(jc.attributes).forEach(function(Pc){var Cc=jc.attributes[Pc].append(Tb,Wc),oc=Tb.scopeAttrib(Pc);Object.keys(new pf).forEach(function(sc){Wc.set(oc,"."+sc,Cc[sc])})});jc.scopeVAO&&Wc.set(Lc.vao,".targetVAO",jc.scopeVAO.append(Tb,
Wc));Hc("vert");Hc("frag");0<Object.keys(jc.state).length&&(Wc(Mc,".dirty\x3dtrue;"),Wc.exit(Mc,".dirty\x3dtrue;"));Wc("a1(",Tb.shared.context,",a0,",Tb.batchId,");")}function kf(Tb){if("object"===typeof Tb&&!u(Tb)){for(var jc=Object.keys(Tb),Hc=0;Hc<jc.length;++Hc)if(ka.isDynamic(Tb[jc[Hc]]))return!0;return!1}}function Qe(Tb,jc,Hc){function Wc(hd,qd){Pc.forEach(function(td){var wd=Lc[td];ka.isDynamic(wd)&&(wd=hd.invoke(qd,wd),qd(tc,".",td,"\x3d",wd,";"))})}var Lc=jc["static"][Hc];if(Lc&&kf(Lc)){var Mc=
Tb.global,Pc=Object.keys(Lc),Cc=!1,oc=!1,sc=!1,tc=Tb.global.def("{}");Pc.forEach(function(hd){var qd=Lc[hd];if(ka.isDynamic(qd))"function"===typeof qd&&(qd=Lc[hd]=ka.unbox(qd)),hd=sa(qd,null),Cc=Cc||hd.thisDep,sc=sc||hd.propDep,oc=oc||hd.contextDep;else{Mc(tc,".",hd,"\x3d");switch(typeof qd){case "number":Mc(qd);break;case "string":Mc('"',qd,'"');break;case "object":Array.isArray(qd)&&Mc("[",qd.join(),"]");break;default:Mc(Tb.link(qd))}Mc(";")}});jc.dynamic[Hc]=new ka.DynamicVariable(4,{thisDep:Cc,
contextDep:oc,propDep:sc,ref:tc,append:Wc});delete jc["static"][Hc]}}var pf=ic.Record,ff={add:32774,subtract:32778,"reverse subtract":32779};gc.ext_blend_minmax&&(ff.min=32775,ff.max=32776);var Vb=gc.angle_instanced_arrays,Sc=gc.webgl_draw_buffers,yc={dirty:!0,profile:Lb.profile},kd={},Od=[],Td={},Ld={};Mb("dither",3024);Mb("blend.enable",3042);Yb("blend.color","blendColor",[0,0,0,0]);Yb("blend.equation","blendEquationSeparate",[32774,32774]);Yb("blend.func","blendFuncSeparate",[1,0,1,0]);Mb("depth.enable",
2929,!0);Yb("depth.func","depthFunc",513);Yb("depth.range","depthRange",[0,1]);Yb("depth.mask","depthMask",!0);Yb("colorMask","colorMask",[!0,!0,!0,!0]);Mb("cull.enable",2884);Yb("cull.face","cullFace",1029);Yb("frontFace","frontFace",2305);Yb("lineWidth","lineWidth",1);Mb("polygonOffset.enable",32823);Yb("polygonOffset.offset","polygonOffset",[0,0]);Mb("sample.alpha",32926);Mb("sample.enable",32928);Yb("sample.coverage","sampleCoverage",[1,!1]);Mb("stencil.enable",2960);Yb("stencil.mask","stencilMask",
-1);Yb("stencil.func","stencilFunc",[519,0,-1]);Yb("stencil.opFront","stencilOpSeparate",[1028,7680,7680,7680]);Yb("stencil.opBack","stencilOpSeparate",[1029,7680,7680,7680]);Mb("scissor.enable",3089);Yb("scissor.box","scissor",[0,0,kb.drawingBufferWidth,kb.drawingBufferHeight]);Yb("viewport","viewport",[0,0,kb.drawingBufferWidth,kb.drawingBufferHeight]);var Jd={gl:kb,context:Ub,strings:$b,next:kd,current:yc,draw:bc,elements:Rc,buffer:xc,shader:ac,attributes:ic.state,vao:ic,uniforms:Sb,framebuffer:vb,
extensions:gc,timer:wb,isBufferArgs:ia},fe={primTypes:Ea,compareFuncs:Wb,blendFuncs:Ob,blendEquations:ff,stencilOps:Bc,glTypes:cb,orientationType:Kc};Sc&&(fe.backBuffer=[1029],fe.drawBuffer=e(rc.maxDrawbuffers,function(Tb){return 0===Tb?[0]:e(Tb,function(jc){return 36064+jc})}));var pe=0;return{next:kd,current:yc,procs:function(){var Tb=qc(),jc=Tb.proc("poll"),Hc=Tb.proc("refresh"),Wc=Tb.block();jc(Wc);Hc(Wc);var Lc=Tb.shared,Mc=Lc.gl,Pc=Lc.next,Cc=Lc.current;Wc(Cc,".dirty\x3dfalse;");rd(Tb,jc);rd(Tb,
Hc,null,!0);var oc;Vb&&(oc=Tb.link(Vb));gc.oes_vertex_array_object&&Hc(Tb.link(gc.oes_vertex_array_object),".bindVertexArrayOES(null);");for(var sc=0;sc<rc.maxAttributes;++sc){var tc=Hc.def(Lc.attributes,"[",sc,"]"),hd=Tb.cond(tc,".buffer");hd.then(Mc,".enableVertexAttribArray(",sc,");",Mc,".bindBuffer(",34962,",",tc,".buffer.buffer);",Mc,".vertexAttribPointer(",sc,",",tc,".size,",tc,".type,",tc,".normalized,",tc,".stride,",tc,".offset);")["else"](Mc,".disableVertexAttribArray(",sc,");",Mc,".vertexAttrib4f(",
sc,",",tc,".x,",tc,".y,",tc,".z,",tc,".w);",tc,".buffer\x3dnull;");Hc(hd);Vb&&Hc(oc,".vertexAttribDivisorANGLE(",sc,",",tc,".divisor);")}Hc(Tb.shared.vao,".currentVAO\x3dnull;",Tb.shared.vao,".setVAO(",Tb.shared.vao,".targetVAO);");Object.keys(Td).forEach(function(qd){var td=Td[qd],wd=Wc.def(Pc,".",qd),sd=Tb.block();sd("if(",wd,"){",Mc,".enable(",td,")}else{",Mc,".disable(",td,")}",Cc,".",qd,"\x3d",wd,";");Hc(sd);jc("if(",wd,"!\x3d\x3d",Cc,".",qd,"){",sd,"}")});Object.keys(Ld).forEach(function(qd){var td=
Ld[qd],wd=yc[qd],sd,xe,ue=Tb.block();ue(Mc,".",td,"(");u(wd)?(td=wd.length,sd=Tb.global.def(Pc,".",qd),xe=Tb.global.def(Cc,".",qd),ue(e(td,function(Le){return sd+"["+Le+"]"}),");",e(td,function(Le){return xe+"["+Le+"]\x3d"+sd+"["+Le+"];"}).join("")),jc("if(",e(td,function(Le){return sd+"["+Le+"]!\x3d\x3d"+xe+"["+Le+"]"}).join("||"),"){",ue,"}")):(sd=Wc.def(Pc,".",qd),xe=Wc.def(Cc,".",qd),ue(sd,");",Cc,".",qd,"\x3d",sd,";"),jc("if(",sd,"!\x3d\x3d",xe,"){",ue,"}"));Hc(ue)});return Tb.compile()}(),compile:function(Tb,
jc,Hc,Wc,Lc){var Mc=qc();Mc.stats=Mc.link(Lc);Object.keys(jc["static"]).forEach(function(Pc){Qe(Mc,jc,Pc)});Kb.forEach(function(Pc){Qe(Mc,Tb,Pc)});Hc=pd(Tb,jc,Hc,Wc,Mc);Dd(Mc,Hc);ye(Mc,Hc);Xd(Mc,Hc);return Mc.compile()}}}function qa(kb,$b){for(var gc=0;gc<kb.length;++gc)if(kb[gc]===$b)return gc;return-1}var pa=function(kb,$b){for(var gc=Object.keys($b),rc=0;rc<gc.length;++rc)kb[gc[rc]]=$b[gc[rc]];return kb},na=0,ka={DynamicVariable:r,define:function(kb,$b){return new r(kb,m($b+""))},isDynamic:function(kb){return"function"===
typeof kb&&!kb._reglType||kb instanceof r},unbox:function(kb,$b){return"function"===typeof kb?new r(0,kb):kb},accessor:m},ua={next:"function"===typeof requestAnimationFrame?function(kb){return requestAnimationFrame(kb)}:function(kb){return setTimeout(kb,16)},cancel:"function"===typeof cancelAnimationFrame?function(kb){return cancelAnimationFrame(kb)}:clearTimeout},va="undefined"!==typeof performance&&performance.now?function(){return performance.now()}:function(){return+new Date},Ca=k();Ca.zero=k();
var Ma=function(kb,$b){var gc=1;$b.ext_texture_filter_anisotropic&&(gc=kb.getParameter(34047));var rc=1,xc=1;$b.webgl_draw_buffers&&(rc=kb.getParameter(34852),xc=kb.getParameter(36063));var Rc=!!$b.oes_texture_float;if(Rc){Rc=kb.createTexture();kb.bindTexture(3553,Rc);kb.texImage2D(3553,0,6408,1,1,0,6408,5126,null);var gb=kb.createFramebuffer();kb.bindFramebuffer(36160,gb);kb.framebufferTexture2D(36160,36064,3553,Rc,0);kb.bindTexture(3553,null);if(36053!==kb.checkFramebufferStatus(36160))Rc=!1;else{kb.viewport(0,
0,1,1);kb.clearColor(1,0,0,1);kb.clear(16384);var vb=Ca.allocType(5126,4);kb.readPixels(0,0,1,1,6408,5126,vb);kb.getError()?Rc=!1:(kb.deleteFramebuffer(gb),kb.deleteTexture(Rc),Rc=1===vb[0]);Ca.freeType(vb)}}vb=!0;"undefined"!==typeof navigator&&(/MSIE/.test(navigator.userAgent)||/Trident\//.test(navigator.appVersion)||/Edge/.test(navigator.userAgent))||(vb=kb.createTexture(),gb=Ca.allocType(5121,36),kb.activeTexture(33984),kb.bindTexture(34067,vb),kb.texImage2D(34069,0,6408,3,3,0,6408,5121,gb),Ca.freeType(gb),
kb.bindTexture(34067,null),kb.deleteTexture(vb),vb=!kb.getError());return{colorBits:[kb.getParameter(3410),kb.getParameter(3411),kb.getParameter(3412),kb.getParameter(3413)],depthBits:kb.getParameter(3414),stencilBits:kb.getParameter(3415),subpixelBits:kb.getParameter(3408),extensions:Object.keys($b).filter(function(Sb){return!!$b[Sb]}),maxAnisotropic:gc,maxDrawbuffers:rc,maxColorAttachments:xc,pointSizeDims:kb.getParameter(33901),lineWidthDims:kb.getParameter(33902),maxViewportDims:kb.getParameter(3386),
maxCombinedTextureUnits:kb.getParameter(35661),maxCubeMapSize:kb.getParameter(34076),maxRenderbufferSize:kb.getParameter(34024),maxTextureUnits:kb.getParameter(34930),maxTextureSize:kb.getParameter(3379),maxAttributes:kb.getParameter(34921),maxVertexUniforms:kb.getParameter(36347),maxVertexTextureUnits:kb.getParameter(35660),maxVaryingVectors:kb.getParameter(36348),maxFragmentUniforms:kb.getParameter(36349),glsl:kb.getParameter(35724),renderer:kb.getParameter(7937),vendor:kb.getParameter(7936),version:kb.getParameter(7938),
readFloat:Rc,npotTextureCube:vb}},Ua=function(kb){return kb instanceof Uint8Array||kb instanceof Uint16Array||kb instanceof Uint32Array||kb instanceof Int8Array||kb instanceof Int16Array||kb instanceof Int32Array||kb instanceof Float32Array||kb instanceof Float64Array||kb instanceof Uint8ClampedArray},eb=function(kb){return Object.keys(kb).map(function($b){return kb[$b]})},fb={shape:function(kb){for(var $b=[];kb.length;kb=kb[0])$b.push(kb.length);return $b},flatten:function(kb,$b,gc,rc){var xc=1;
if($b.length)for(var Rc=0;Rc<$b.length;++Rc)xc*=$b[Rc];else xc=0;gc=rc||Ca.allocType(gc,xc);switch($b.length){case 0:break;case 1:rc=$b[0];for($b=0;$b<rc;++$b)gc[$b]=kb[$b];break;case 2:rc=$b[0];$b=$b[1];for(Rc=xc=0;Rc<rc;++Rc)for(var gb=kb[Rc],vb=0;vb<$b;++vb)gc[xc++]=gb[vb];break;case 3:v(kb,$b[0],$b[1],$b[2],gc,0);break;default:w(kb,$b,0,gc,0)}return gc}},nb={"[object Int8Array]":5120,"[object Int16Array]":5122,"[object Int32Array]":5124,"[object Uint8Array]":5121,"[object Uint8ClampedArray]":5121,
"[object Uint16Array]":5123,"[object Uint32Array]":5125,"[object Float32Array]":5126,"[object Float64Array]":5121,"[object ArrayBuffer]":5121},cb={int8:5120,int16:5122,int32:5124,uint8:5121,uint16:5123,uint32:5125,"float":5126,float32:5126},$a={dynamic:35048,stream:35040,"static":35044},jb=fb.flatten,pb=fb.shape,xa=[];xa[5120]=1;xa[5122]=2;xa[5124]=4;xa[5121]=1;xa[5123]=2;xa[5125]=4;xa[5126]=4;var Ea={points:0,point:0,lines:1,line:1,triangles:4,triangle:4,"line loop":2,"line strip":3,"triangle strip":5,
"triangle fan":6},Ia=new Float32Array(1),Oa=new Uint32Array(Ia.buffer),bb=[9984,9986,9985,9987],Xa=[0,6409,6410,6407,6408],tb={};tb[6409]=tb[6406]=tb[6402]=1;tb[34041]=tb[6410]=2;tb[6407]=tb[35904]=3;tb[6408]=tb[35906]=4;var Ka=D("HTMLCanvasElement"),Ta=D("OffscreenCanvas"),Na=D("CanvasRenderingContext2D"),ib=D("ImageBitmap"),qb=D("HTMLImageElement"),sb=D("HTMLVideoElement"),Ba=Object.keys(nb).concat([Ka,Ta,Na,ib,qb,sb]),Fa=[];Fa[5121]=1;Fa[5126]=4;Fa[36193]=2;Fa[5123]=2;Fa[5125]=4;var La=[];La[32854]=
2;La[32855]=2;La[36194]=2;La[34041]=4;La[33776]=.5;La[33777]=.5;La[33778]=1;La[33779]=1;La[35986]=.5;La[35987]=1;La[34798]=1;La[35840]=.5;La[35841]=.25;La[35842]=.5;La[35843]=.25;La[36196]=.5;var Va=[];Va[32854]=2;Va[32855]=2;Va[36194]=2;Va[33189]=2;Va[36168]=1;Va[34041]=4;Va[35907]=4;Va[34836]=16;Va[34842]=8;Va[34843]=6;var Za=function(kb,$b,gc,rc,xc){function Rc(bc){this.id=ic++;this.refCount=1;this.renderbuffer=bc;this.format=32854;this.height=this.width=0;xc.profile&&(this.stats={size:0})}function gb(bc){var Ub=
bc.renderbuffer;kb.bindRenderbuffer(36161,null);kb.deleteRenderbuffer(Ub);bc.renderbuffer=null;bc.refCount=0;delete ac[bc.id];rc.renderbufferCount--}var vb={rgba4:32854,rgb565:36194,"rgb5 a1":32855,depth:33189,stencil:36168,"depth stencil":34041};$b.ext_srgb&&(vb.srgba=35907);$b.ext_color_buffer_half_float&&(vb.rgba16f=34842,vb.rgb16f=34843);$b.webgl_color_buffer_float&&(vb.rgba32f=34836);var Sb=[];Object.keys(vb).forEach(function(bc){Sb[vb[bc]]=bc});var ic=0,ac={};Rc.prototype.decRef=function(){0>=
--this.refCount&&gb(this)};xc.profile&&(rc.getTotalRenderbufferSize=function(){var bc=0;Object.keys(ac).forEach(function(Ub){bc+=ac[Ub].stats.size});return bc});return{create:function(bc,Ub){function wb(Bb,Mb){var Yb=0,qc=0,Tc=32854;"object"===typeof Bb&&Bb?("shape"in Bb?(qc=Bb.shape,Yb=qc[0]|0,qc=qc[1]|0):("radius"in Bb&&(Yb=qc=Bb.radius|0),"width"in Bb&&(Yb=Bb.width|0),"height"in Bb&&(qc=Bb.height|0)),"format"in Bb&&(Tc=vb[Bb.format])):"number"===typeof Bb?(Yb=Bb|0,qc="number"===typeof Mb?Mb|0:
Yb):Bb||(Yb=qc=1);if(Yb!==Lb.width||qc!==Lb.height||Tc!==Lb.format)return wb.width=Lb.width=Yb,wb.height=Lb.height=qc,Lb.format=Tc,kb.bindRenderbuffer(36161,Lb.renderbuffer),kb.renderbufferStorage(36161,Tc,Yb,qc),xc.profile&&(Lb.stats.size=Va[Lb.format]*Lb.width*Lb.height),wb.format=Sb[Lb.format],wb}var Lb=new Rc(kb.createRenderbuffer());ac[Lb.id]=Lb;rc.renderbufferCount++;wb(bc,Ub);wb.resize=function(Bb,Mb){Bb|=0;Mb=Mb|0||Bb;if(Bb===Lb.width&&Mb===Lb.height)return wb;wb.width=Lb.width=Bb;wb.height=
Lb.height=Mb;kb.bindRenderbuffer(36161,Lb.renderbuffer);kb.renderbufferStorage(36161,Lb.format,Bb,Mb);xc.profile&&(Lb.stats.size=Va[Lb.format]*Lb.width*Lb.height);return wb};wb._reglType="renderbuffer";wb._renderbuffer=Lb;xc.profile&&(wb.stats=Lb.stats);wb.destroy=function(){Lb.decRef()};return wb},clear:function(){eb(ac).forEach(gb)},restore:function(){eb(ac).forEach(function(bc){bc.renderbuffer=kb.createRenderbuffer();kb.bindRenderbuffer(36161,bc.renderbuffer);kb.renderbufferStorage(36161,bc.format,
bc.width,bc.height)});kb.bindRenderbuffer(36161,null)}}},mb=[];mb[6408]=4;mb[6407]=3;var ub=[];ub[5121]=1;ub[5126]=4;ub[36193]=2;var Pb=["x","y","z","w"],Kb="blend.func blend.equation stencil.func stencil.opFront stencil.opBack sample.coverage viewport scissor.box polygonOffset.offset".split(" "),Ob={0:0,1:1,zero:0,one:1,"src color":768,"one minus src color":769,"src alpha":770,"one minus src alpha":771,"dst color":774,"one minus dst color":775,"dst alpha":772,"one minus dst alpha":773,"constant color":32769,
"one minus constant color":32770,"constant alpha":32771,"one minus constant alpha":32772,"src alpha saturate":776},Wb={never:512,less:513,"\x3c":513,equal:514,"\x3d":514,"\x3d\x3d":514,"\x3d\x3d\x3d":514,lequal:515,"\x3c\x3d":515,greater:516,"\x3e":516,notequal:517,"!\x3d":517,"!\x3d\x3d":517,gequal:518,"\x3e\x3d":518,always:519},Bc={0:0,zero:0,keep:7680,replace:7681,increment:7682,decrement:7683,"increment wrap":34055,"decrement wrap":34056,invert:5386},Kc={cw:2304,ccw:2305},Nc=new la(!1,!1,!1,function(){}),
bd=function(kb,$b){function gc(){this.endQueryIndex=this.startQueryIndex=-1;this.sum=0;this.stats=null}function rc(ac,bc,Ub){var wb=gb.pop()||new gc;wb.startQueryIndex=ac;wb.endQueryIndex=bc;wb.sum=0;wb.stats=Ub;vb.push(wb)}if(!$b.ext_disjoint_timer_query)return null;var xc=[],Rc=[],gb=[],vb=[],Sb=[],ic=[];return{beginQuery:function(ac){var bc=xc.pop()||$b.ext_disjoint_timer_query.createQueryEXT();$b.ext_disjoint_timer_query.beginQueryEXT(35007,bc);Rc.push(bc);rc(Rc.length-1,Rc.length,ac)},endQuery:function(){$b.ext_disjoint_timer_query.endQueryEXT(35007)},
pushScopeStats:rc,update:function(){var ac;var bc=Rc.length;if(0!==bc){ic.length=Math.max(ic.length,bc+1);Sb.length=Math.max(Sb.length,bc+1);Sb[0]=0;var Ub=ic[0]=0;for(ac=bc=0;ac<Rc.length;++ac){var wb=Rc[ac];$b.ext_disjoint_timer_query.getQueryObjectEXT(wb,34919)?(Ub+=$b.ext_disjoint_timer_query.getQueryObjectEXT(wb,34918),xc.push(wb)):Rc[bc++]=wb;Sb[ac+1]=Ub;ic[ac+1]=bc}Rc.length=bc;for(ac=bc=0;ac<vb.length;++ac){Ub=vb[ac];var Lb=Ub.startQueryIndex;wb=Ub.endQueryIndex;Ub.sum+=Sb[wb]-Sb[Lb];Lb=ic[Lb];
wb=ic[wb];wb===Lb?(Ub.stats.gpuTime+=Ub.sum/1E6,gb.push(Ub)):(Ub.startQueryIndex=Lb,Ub.endQueryIndex=wb,vb[bc++]=Ub)}vb.length=bc}},getNumPendingQueries:function(){return Rc.length},clear:function(){xc.push.apply(xc,Rc);for(var ac=0;ac<xc.length;ac++)$b.ext_disjoint_timer_query.deleteQueryEXT(xc[ac]);Rc.length=0;xc.length=0},restore:function(){Rc.length=0;xc.length=0}}};return function(kb){function $b(){if(0===Bd.length)Tc&&Tc.update(),Fe=null;else{Fe=ua.next($b);ac();for(var Kd=Bd.length-1;0<=Kd;--Kd){var Dd=
Bd[Kd];Dd&&Dd(Fc,null,0)}wb.flush();Tc&&Tc.update()}}function gc(){!Fe&&0<Bd.length&&(Fe=ua.next($b))}function rc(){Fe&&(ua.cancel($b),Fe=null)}function xc(Kd){Kd.preventDefault();rc();be.forEach(function(Dd){Dd()})}function Rc(Kd){wb.getError();Bb.restore();Vc.restore();Ac.restore();Gc.restore();pd.restore();md.restore();Jc.restore();Tc&&Tc.restore();rd.procs.refresh();gc();le.forEach(function(Dd){Dd()})}function gb(Kd){function Dd(Vb){var Sc={},yc={};Object.keys(Vb).forEach(function(kd){var Od=
Vb[kd];ka.isDynamic(Od)?yc[kd]=ka.unbox(Od,kd):Sc[kd]=Od});return{dynamic:yc,"static":Sc}}var we=Dd(Kd.context||{}),se=Dd(Kd.uniforms||{}),Xd=Dd(Kd.attributes||{}),ye=Dd(function(Vb){function Sc(kd){if(kd in yc){var Od=yc[kd];delete yc[kd];Object.keys(Od).forEach(function(Td){yc[kd+"."+Td]=Od[Td]})}}var yc=pa({},Vb);delete yc.uniforms;delete yc.attributes;delete yc.context;delete yc.vao;"stencil"in yc&&yc.stencil.op&&(yc.stencil.opBack=yc.stencil.opFront=yc.stencil.op,delete yc.stencil.op);Sc("blend");
Sc("depth");Sc("cull");Sc("stencil");Sc("polygonOffset");Sc("scissor");Sc("sample");"vao"in Vb&&(yc.vao=Vb.vao);return yc}(Kd));Kd={gpuTime:0,cpuTime:0,count:0};we=rd.compile(ye,Xd,se,we,Kd);var kf=we.draw,Qe=we.batch,pf=we.scope,ff=[];return pa(function(Vb,Sc){var yc;if("function"===typeof Vb)return pf.call(this,null,Vb,0);if("function"===typeof Sc)if("number"===typeof Vb)for(yc=0;yc<Vb;++yc)pf.call(this,null,Sc,yc);else if(Array.isArray(Vb))for(yc=0;yc<Vb.length;++yc)pf.call(this,Vb[yc],Sc,yc);
else return pf.call(this,Vb,Sc,0);else if("number"===typeof Vb){if(0<Vb){Sc=Qe.call;for(yc=Vb|0;ff.length<yc;)ff.push(null);return Sc.call(Qe,this,ff,Vb|0)}}else if(Array.isArray(Vb)){if(Vb.length)return Qe.call(this,Vb,Vb.length)}else return kf.call(this,Vb)},{stats:Kd})}function vb(Kd,Dd){Kd=0;rd.procs.poll();var we=Dd.color;we&&(wb.clearColor(+we[0]||0,+we[1]||0,+we[2]||0,+we[3]||0),Kd|=16384);"depth"in Dd&&(wb.clearDepth(+Dd.depth),Kd|=256);"stencil"in Dd&&(wb.clearStencil(Dd.stencil|0),Kd|=1024);
wb.clear(Kd)}function Sb(Kd){Bd.push(Kd);gc();return{cancel:function(){function Dd(){var se=qa(Bd,Dd);Bd[se]=Bd[Bd.length-1];--Bd.length;0>=Bd.length&&rc()}var we=qa(Bd,Kd);Bd[we]=Dd}}}function ic(){var Kd=re.viewport,Dd=re.scissor_box;Kd[0]=Kd[1]=Dd[0]=Dd[1]=0;Fc.viewportWidth=Fc.framebufferWidth=Fc.drawingBufferWidth=Kd[2]=Dd[2]=wb.drawingBufferWidth;Fc.viewportHeight=Fc.framebufferHeight=Fc.drawingBufferHeight=Kd[3]=Dd[3]=wb.drawingBufferHeight}function ac(){Fc.tick+=1;Fc.time=Ub();ic();rd.procs.poll()}
function bc(){ic();rd.procs.refresh();Tc&&Tc.update()}function Ub(){return(va()-Yc)/1E3}kb=p(kb);if(!kb)return null;var wb=kb.gl,Lb=wb.getContextAttributes();wb.isContextLost();var Bb=d(wb,kb);if(!Bb)return null;var Mb=l(),Yb={vaoCount:0,bufferCount:0,elementsCount:0,framebufferCount:0,shaderCount:0,textureCount:0,cubeCount:0,renderbufferCount:0,maxTextureUnits:0},qc=Bb.extensions,Tc=bd(wb,qc),Yc=va(),ad=wb.drawingBufferWidth,ec=wb.drawingBufferHeight,Fc={tick:0,time:0,viewportWidth:ad,viewportHeight:ec,
framebufferWidth:ad,framebufferHeight:ec,drawingBufferWidth:ad,drawingBufferHeight:ec,pixelRatio:kb.pixelRatio},dd=Ma(wb,qc),Ac=z(wb,Yb,kb,function(Kd){return Jc.destroyBuffer(Kd)}),Jc=O(wb,qc,dd,Yb,Ac),gd=E(wb,qc,Ac,Yb),Vc=U(wb,Mb,Yb,kb),Gc=M(wb,qc,dd,function(){rd.procs.poll()},Fc,Yb,kb),pd=Za(wb,qc,dd,Yb,kb),md=P(wb,qc,dd,Gc,pd,Yb),rd=ma(wb,Mb,qc,dd,Ac,gd,Gc,md,{},Jc,Vc,{elements:null,primitive:4,count:-1,offset:0,instances:-1},Fc,Tc,kb);Mb=S(wb,md,rd.procs.poll,Fc,Lb,qc,dd);var re=rd.next,Ad=
wb.canvas,Bd=[],be=[],le=[],Rd=[kb.onDestroy],Fe=null;Ad&&(Ad.addEventListener("webglcontextlost",xc,!1),Ad.addEventListener("webglcontextrestored",Rc,!1));var Je=md.setFBO=gb({framebuffer:ka.define.call(null,1,"framebuffer")});bc();Lb=pa(gb,{clear:function(Kd){if("framebuffer"in Kd)if(Kd.framebuffer&&"framebufferCube"===Kd.framebuffer_reglType)for(var Dd=0;6>Dd;++Dd)Je(pa({framebuffer:Kd.framebuffer.faces[Dd]},Kd),vb);else Je(Kd,vb);else vb(null,Kd)},prop:ka.define.bind(null,1),context:ka.define.bind(null,
2),"this":ka.define.bind(null,3),draw:gb({}),buffer:function(Kd){return Ac.create(Kd,34962,!1,!1)},elements:function(Kd){return gd.create(Kd,!1)},texture:Gc.create2D,cube:Gc.createCube,renderbuffer:pd.create,framebuffer:md.create,framebufferCube:md.createCube,vao:Jc.createVAO,attributes:Lb,frame:Sb,on:function(Kd,Dd){switch(Kd){case "frame":return Sb(Dd);case "lost":var we=be;break;case "restore":we=le;break;case "destroy":we=Rd}we.push(Dd);return{cancel:function(){for(var se=0;se<we.length;++se)if(we[se]===
Dd){we[se]=we[we.length-1];we.pop();break}}}},limits:dd,hasExtension:function(Kd){return 0<=dd.extensions.indexOf(Kd.toLowerCase())},read:Mb,destroy:function(){Bd.length=0;rc();Ad&&(Ad.removeEventListener("webglcontextlost",xc),Ad.removeEventListener("webglcontextrestored",Rc));Vc.clear();md.clear();pd.clear();Gc.clear();gd.clear();Ac.clear();Jc.clear();Tc&&Tc.clear();Rd.forEach(function(Kd){Kd()})},_gl:wb,_refresh:bc,poll:function(){ac();Tc&&Tc.update()},now:Ub,stats:Yb});kb.onDone(null,Lb);return Lb}})},
{}],541:[function(b,N,I){var r="",q;N.exports=function(m,l){if("string"!==typeof m)throw new TypeError("expected a string");if(1===l)return m;if(2===l)return m+m;var a=m.length*l;if(q!==m||"undefined"===typeof q)q=m,r="";else if(r.length>=a)return r.substr(0,a);for(;a>r.length&&1<l;)l&1&&(r+=m),l>>=1,m+=m;r+=m;return r=r.substr(0,a)}},{}],542:[function(b,N,I){(function(r){(function(){N.exports=r.performance&&r.performance.now?function(){return performance.now()}:Date.now||function(){return+new Date}}).call(this)}).call(this,
"undefined"!==typeof od?od:"undefined"!==typeof self?self:"undefined"!==typeof window?window:{})},{}],543:[function(b,N,I){N.exports=function(r){for(var q=r.length,m=r[r.length-1],l=q,a=q-2;0<=a;--a){var h=m,g=r[a];m=h+g;h=m-h;if(g-=h)r[--l]=m,m=g}var n=0;for(a=l;a<q;++a)h=r[a],g=m,m=h+g,h=m-h,(g-=h)&&(r[n++]=g);r[n++]=m;r.length=n;return r}},{}],544:[function(b,N,I){function r(p){if(1===p.length)return p[0];if(2===p.length)return["sum(",p[0],",",p[1],")"].join("");var d=p.length>>1;return["sum(",
r(p.slice(0,d)),",",r(p.slice(d)),")"].join("")}function q(p){if(2===p.length)return["sum(prod(",p[0][0],",",p[1][1],"),prod(-",p[0][1],",",p[1][0],"))"].join("");for(var d=[],e=0;e<p.length;++e){for(var f=d,k=f.push,t=p,v=e,w=Array(t.length-1),y=1;y<t.length;++y)for(var B=w[y-1]=Array(t.length-1),A=0,z=0;A<t.length;++A)A!==v&&(B[z++]=t[y][A]);t=q(w);v=e&1?"-":"";k.call(f,["scale(",t,",",v,p[0][e],")"].join(""))}return r(d)}function m(p){for(var d=Function,e=Array(p),f=0;f<p;++f){e[f]=Array(p);for(var k=
0;k<p;++k)e[f][k]=["m[",f,"][",k,"]"].join("")}return(new d("sum","scale","prod","compress",["function robustDeterminant",p,"(m){return compress(",q(e),")};return robustDeterminant",p].join("")))(a,h,l,g)}var l=b("two-product"),a=b("robust-sum"),h=b("robust-scale"),g=b("robust-compress"),n=[function(){return[0]},function(p){return[p[0][0]]}];(function(){for(;6>n.length;)n.push(m(n.length));for(var p=[],d=["function robustDeterminant(m){switch(m.length){"],e=0;6>e;++e)p.push("det"+e),d.push("case ",
e,":return det",e,"(m);");d.push("}var det\x3dCACHE[m.length];if(!det)det\x3dCACHE[m.length]\x3dgen(m.length);return det(m);}return robustDeterminant");p.push("CACHE","gen",d.join(""));p=Function.apply(void 0,p);N.exports=p.apply(void 0,n.concat([n,m]));for(e=0;e<n.length;++e)N.exports[e]=n[e]})()},{"robust-compress":543,"robust-scale":550,"robust-sum":553,"two-product":582}],545:[function(b,N,I){var r=b("two-product"),q=b("robust-sum");N.exports=function(m,l){for(var a=r(m[0],l[0]),h=1;h<m.length;++h)a=
q(a,r(m[h],l[h]));return a}},{"robust-sum":553,"two-product":582}],546:[function(b,N,I){function r(f,k){for(var t=Array(f.length-1),v=1;v<f.length;++v)for(var w=t[v-1]=Array(f.length-1),y=0,B=0;y<f.length;++y)y!==k&&(w[B++]=f[v][y]);return t}function q(f){if(1===f.length)return f[0];if(2===f.length)return["sum(",f[0],",",f[1],")"].join("");var k=f.length>>1;return["sum(",q(f.slice(0,k)),",",q(f.slice(k)),")"].join("")}function m(f,k){return"m"===f.charAt(0)?"w"===k.charAt(0)?(f=f.split("["),["w",
k.substr(1),"m",f[0].substr(1)].join("")):["prod(",f,",",k,")"].join(""):m(k,f)}function l(f){if(2===f.length)return[["diff(",m(f[0][0],f[1][1]),",",m(f[1][0],f[0][1]),")"].join("")];for(var k=[],t=0;t<f.length;++t){var v=k,w=v.push,y=q(l(r(f,t)));var B=t&1?"-":"";w.call(v,["scale(",y,",",B,f[0][t],")"].join(""))}return k}function a(f){for(var k=[],t=[],v=Array(f),w=0;w<f;++w){v[w]=Array(f);for(var y=0;y<f;++y)v[w][y]=["m",y,"[",f-w-2,"]"].join("")}for(w=0;w<f;++w)v[0][w]="1",v[f-1][w]="w"+w;for(w=
0;w<f;++w)0===(w&1)?k.push.apply(k,l(r(v,w))):t.push.apply(t,l(r(v,w)));k=q(k);t=q(t);v="exactInSphere"+f;y=[];for(w=0;w<f;++w)y.push("m"+w);y=["function ",v,"(",y.join(),"){"];for(w=0;w<f;++w){var B=y,A=B.push,z=w;var E=w;for(var C=f,u=[],D=0;D<C-2;++D)u.push(["prod(m",E,"[",D,"],m",E,"[",D,"])"].join(""));E=q(u);A.call(B,"var w",z,"\x3d",E,";");for(B=0;B<f;++B)B!==w&&y.push("var w",w,"m",B,"\x3dscale(w",w,",m",B,"[0]);")}y.push("var p\x3d",k,",n\x3d",t,",d\x3ddiff(p,n);return d[d.length-1];}return ",
v);return(new Function("sum","diff","prod","scale",y.join("")))(n,p,g,d)}function h(f){var k=e[f.length];k||(k=e[f.length]=a(f.length));return k.apply(void 0,f)}var g=b("two-product"),n=b("robust-sum"),p=b("robust-subtract"),d=b("robust-scale"),e=[function(){return 0},function(){return 0},function(){return 0}];(function(){for(;6>=e.length;)e.push(a(e.length));for(var f=[],k=["slow"],t=0;6>=t;++t)f.push("a"+t),k.push("o"+t);var v=["function testInSphere(",f.join(),"){switch(arguments.length){case 0:case 1:return 0;"];
for(t=2;6>=t;++t)v.push("case ",t,":return o",t,"(",f.slice(0,t).join(),");");v.push("}var s\x3dnew Array(arguments.length);for(var i\x3d0;i\x3carguments.length;++i){s[i]\x3darguments[i]};return slow(s);}return testInSphere");k.push(v.join(""));f=Function.apply(void 0,k);N.exports=f.apply(void 0,[h].concat(e));for(t=0;6>=t;++t)N.exports[t]=e[t]})()},{"robust-scale":550,"robust-subtract":552,"robust-sum":553,"two-product":582}],547:[function(b,N,I){function r(l){for(var a="robustLinearSolve"+l+"d",
h=["function ",a,"(A,b){return ["],g=0;g<l;++g){h.push("det([");for(var n=0;n<l;++n){0<n&&h.push(",");h.push("[");for(var p=0;p<l;++p)0<p&&h.push(","),p===g?h.push("+b[",n,"]"):h.push("+A[",n,"][",p,"]");h.push("]")}h.push("]),")}h.push("det(A)]}return ",a);a=new Function("det",h.join(""));return 6>l?a(q[l]):a(q)}var q=b("robust-determinant"),m=[function(){return[0]},function(l,a){return[[a[0]],[l[0][0]]]}];(function(){for(;6>m.length;)m.push(r(m.length));for(var l=[],a=["function dispatchLinearSolve(A,b){switch(A.length){"],
h=0;6>h;++h)l.push("s"+h),a.push("case ",h,":return s",h,"(A,b);");a.push("}var s\x3dCACHE[A.length];if(!s)s\x3dCACHE[A.length]\x3dg(A.length);return s(A,b)}return dispatchLinearSolve");l.push("CACHE","g",a.join(""));l=Function.apply(void 0,l);N.exports=l.apply(void 0,m.concat([m,r]));for(h=0;6>h;++h)N.exports[h]=m[h]})()},{"robust-determinant":544}],548:[function(b,N,I){function r(k,t){for(var v=Array(k.length-1),w=1;w<k.length;++w)for(var y=v[w-1]=Array(k.length-1),B=0,A=0;B<k.length;++B)B!==t&&
(y[A++]=k[w][B]);return v}function q(k){if(1===k.length)return k[0];if(2===k.length)return["sum(",k[0],",",k[1],")"].join("");var t=k.length>>1;return["sum(",q(k.slice(0,t)),",",q(k.slice(t)),")"].join("")}function m(k){if(2===k.length)return[["sum(prod(",k[0][0],",",k[1][1],"),prod(-",k[0][1],",",k[1][0],"))"].join("")];for(var t=[],v=0;v<k.length;++v){var w=t,y=w.push,B=q(m(r(k,v)));var A=v&1?"-":"";y.call(w,["scale(",B,",",A,k[0][v],")"].join(""))}return t}function l(k){for(var t=[],v=[],w=Array(k),
y=0;y<k;++y){w[y]=Array(k);for(var B=0;B<k;++B)w[y][B]=["m",B,"[",k-y-1,"]"].join("")}y=[];for(B=0;B<k;++B)0===(B&1)?t.push.apply(t,m(r(w,B))):v.push.apply(v,m(r(w,B))),y.push("m"+B);t=q(t);v=q(v);k="orientation"+k+"Exact";k=["function ",k,"(",y.join(),"){var p\x3d",t,",n\x3d",v,",d\x3dsub(p,n);return d[d.length-1];};return ",k].join("");return(new Function("sum","prod","scale","sub",k))(g,h,n,p)}function a(k){var t=f[k.length];t||(t=f[k.length]=l(k.length));return t.apply(void 0,k)}var h=b("two-product"),
g=b("robust-sum"),n=b("robust-scale"),p=b("robust-subtract"),d=l(3),e=l(4),f=[function(){return 0},function(){return 0},function(k,t){return t[0]-k[0]},function(k,t,v){var w=(k[1]-v[1])*(t[0]-v[0]),y=(k[0]-v[0])*(t[1]-v[1]),B=w-y;if(0<w){if(0>=y)return B;w+=y}else if(0>w){if(0<=y)return B;w=-(w+y)}else return B;w*=3.3306690738754716E-16;return B>=w||B<=-w?B:d(k,t,v)},function(k,t,v,w){var y=k[0]-w[0],B=t[0]-w[0],A=v[0]-w[0],z=k[1]-w[1],E=t[1]-w[1],C=v[1]-w[1],u=k[2]-w[2],D=t[2]-w[2],G=v[2]-w[2],J=
B*C,L=A*E;A*=z;C*=y;y*=E;z*=B;B=u*(J-L)+D*(A-C)+G*(y-z);u=7.771561172376103E-16*((Math.abs(J)+Math.abs(L))*Math.abs(u)+(Math.abs(A)+Math.abs(C))*Math.abs(D)+(Math.abs(y)+Math.abs(z))*Math.abs(G));return B>u||-B>u?B:e(k,t,v,w)}];(function(){for(;5>=f.length;)f.push(l(f.length));for(var k=[],t=["slow"],v=0;5>=v;++v)k.push("a"+v),t.push("o"+v);var w=["function getOrientation(",k.join(),"){switch(arguments.length){case 0:case 1:return 0;"];for(v=2;5>=v;++v)w.push("case ",v,":return o",v,"(",k.slice(0,
v).join(),");");w.push("}var s\x3dnew Array(arguments.length);for(var i\x3d0;i\x3carguments.length;++i){s[i]\x3darguments[i]};return slow(s);}return getOrientation");t.push(w.join(""));k=Function.apply(void 0,t);N.exports=k.apply(void 0,[a].concat(f));for(v=0;5>=v;++v)N.exports[v]=f[v]})()},{"robust-scale":550,"robust-subtract":552,"robust-sum":553,"two-product":582}],549:[function(b,N,I){var r=b("robust-sum"),q=b("robust-scale");N.exports=function(m,l){if(1===m.length)return q(l,m[0]);if(1===l.length)return q(m,
l[0]);if(0===m.length||0===l.length)return[0];var a=[0];if(m.length<l.length)for(var h=0;h<m.length;++h)a=r(a,q(l,m[h]));else for(h=0;h<l.length;++h)a=r(a,q(m,l[h]));return a}},{"robust-scale":550,"robust-sum":553}],550:[function(b,N,I){var r=b("two-product"),q=b("two-sum");N.exports=function(m,l){var a=m.length;if(1===a)return m=r(m[0],l),m[0]?m:[m[1]];var h=Array(2*a),g=[.1,.1],n=[.1,.1],p=0;r(m[0],l,g);g[0]&&(h[p++]=g[0]);for(var d=1;d<a;++d){r(m[d],l,n);q(g[1],n[0],g);g[0]&&(h[p++]=g[0]);var e=
n[1],f=g[1],k=e+f;e=f-(k-e);g[1]=k;e&&(h[p++]=e)}g[1]&&(h[p++]=g[1]);0===p&&(h[p++]=0);h.length=p;return h}},{"two-product":582,"two-sum":583}],551:[function(b,N,I){N.exports=function(q,m,l,a){var h=r(q,l,a),g=r(m,l,a);if(0<h&&0<g||0>h&&0>g)return!1;var n=r(l,q,m),p=r(a,q,m);if(0<n&&0<p||0>n&&0>p)return!1;if(0===h&&0===g&&0===n&&0===p){a:{for(h=0;2>h;++h){g=q[h];n=m[h];p=Math.max(g,n);var d=l[h],e=a[h],f=Math.min(d,e);if(Math.max(d,e)<Math.min(g,n)||p<f){q=!1;break a}}q=!0}return q}return!0};var r=
b("robust-orientation")[3]},{"robust-orientation":548}],552:[function(b,N,I){N.exports=function(r,q){var m=r.length|0,l=q.length|0;if(1===m&&1===l)return r=r[0],m=-q[0],q=r+m,l=q-r,q=(r=r-(q-l)+(m-l))?[r,q]:[q],q;var a=Array(m+l),h=0,g=0,n=0,p=Math.abs,d=r[g],e=p(d),f=-q[n],k=p(f);if(e<k){var t=d;g+=1;g<m&&(d=r[g],e=p(d))}else t=f,n+=1,n<l&&(f=-q[n],k=p(f));if(g<m&&e<k||n>=l){var v=d;g+=1;g<m&&(d=r[g],e=p(d))}else v=f,n+=1,n<l&&(f=-q[n],k=p(f));var w=v+t;t-=w-v;for(var y=w,B;g<m&&n<l;)e<k?(v=d,g+=
1,g<m&&(d=r[g],e=p(d))):(v=f,n+=1,n<l&&(f=-q[n],k=p(f))),w=v+t,v=w-v,(v=t-v)&&(a[h++]=v),v=y+w,B=v-y,t=v-B,w-=B,y-=t,t=y+w,y=v;for(;g<m;)v=d,w=v+t,v=w-v,(v=t-v)&&(a[h++]=v),v=y+w,B=v-y,t=v-B,w-=B,y-=t,t=y+w,y=v,g+=1,g<m&&(d=r[g]);for(;n<l;)v=f,w=v+t,v=w-v,(v=t-v)&&(a[h++]=v),v=y+w,B=v-y,t=v-B,w-=B,y-=t,t=y+w,y=v,n+=1,n<l&&(f=-q[n]);t&&(a[h++]=t);y&&(a[h++]=y);h||(a[h++]=0);a.length=h;return a}},{}],553:[function(b,N,I){N.exports=function(r,q){var m=r.length|0,l=q.length|0;if(1===m&&1===l)return r=
r[0],m=q[0],q=r+m,l=q-r,q=(r=r-(q-l)+(m-l))?[r,q]:[q],q;var a=Array(m+l),h=0,g=0,n=0,p=Math.abs,d=r[g],e=p(d),f=q[n],k=p(f);if(e<k){var t=d;g+=1;g<m&&(d=r[g],e=p(d))}else t=f,n+=1,n<l&&(f=q[n],k=p(f));if(g<m&&e<k||n>=l){var v=d;g+=1;g<m&&(d=r[g],e=p(d))}else v=f,n+=1,n<l&&(f=q[n],k=p(f));var w=v+t;t-=w-v;for(var y=w,B;g<m&&n<l;)e<k?(v=d,g+=1,g<m&&(d=r[g],e=p(d))):(v=f,n+=1,n<l&&(f=q[n],k=p(f))),w=v+t,v=w-v,(v=t-v)&&(a[h++]=v),v=y+w,B=v-y,t=v-B,w-=B,y-=t,t=y+w,y=v;for(;g<m;)v=d,w=v+t,v=w-v,(v=t-v)&&
(a[h++]=v),v=y+w,B=v-y,t=v-B,w-=B,y-=t,t=y+w,y=v,g+=1,g<m&&(d=r[g]);for(;n<l;)v=f,w=v+t,v=w-v,(v=t-v)&&(a[h++]=v),v=y+w,B=v-y,t=v-B,w-=B,y-=t,t=y+w,y=v,n+=1,n<l&&(f=q[n]);t&&(a[h++]=t);y&&(a[h++]=y);h||(a[h++]=0);a.length=h;return a}},{}],554:[function(b,N,I){N.exports=function(r){return 0>r?-1:0<r?1:0}},{}],555:[function(b,N,I){N.exports=function(m){return q(r(m))};var r=b("boundary-cells"),q=b("reduce-simplicial-complex")},{"boundary-cells":100,"reduce-simplicial-complex":533}],556:[function(b,
N,I){N.exports=function(a,h,g,n){g=g||0;if("undefined"===typeof n){for(var p=a.length,d=n=0;d<p;++d)n=Math.max(n,a[d].length)|0;--n}if(0===a.length||1>n)return{cells:[],vertexIds:[],vertexWeights:[]};d=+g;var e=h.length;p=q.mallocUint8(e);for(var f=0;f<e;++f)p[f]=h[f]<d|0;var k=n,t=a.length;d=q.mallocUint32(2*(k*(k+1)/2*t|0));for(f=e=0;f<t;++f){var v=a[f];k=v.length;for(var w=0;w<k;++w)for(var y=0;y<w;++y){var B=v[y],A=v[w];d[e++]=Math.min(B,A)|0;d[e++]=Math.max(B,A)|0}}m(r(d,[e/2|0,2]));for(f=k=
2;f<e;f+=2)if(d[f-2]!==d[f]||d[f-1]!==d[f+1])d[k++]=d[f],d[k++]=d[f+1];d=r(d,[k/2|0,2]);g=+g;e=d.data;f=d.shape[0];k=q.mallocDouble(f);for(v=t=0;v<f;++v)w=e[2*v],y=e[2*v+1],p[w]!==p[y]&&(B=h[w],A=h[y],e[2*t]=w,e[2*t+1]=y,k[t++]=(A-g)/(A-B));d.shape[0]=t;g=r(k,[t]);e=h.length|0;h=q.mallocInt32(2*e);f=d.shape[0];k=d.data;for(v=t=h[0]=0;v<f;++v)if(w=k[2*v],w!==t){for(h[2*t+1]=v;++t<w;)h[2*t]=v,h[2*t+1]=v;h[2*t]=v}for(h[2*t+1]=f;++t<e;)h[2*t]=h[2*t+1]=f;a=l(n)(a,d.data,h,p);e=d.shape[0]|0;f=d.data;n=
Array(e);for(k=0;k<e;++k)n[k]=[f[2*k],f[2*k+1]];e=[].slice.call(g.data,0,g.shape[0]);q.free(p);q.free(d.data);q.free(g.data);q.free(h);return{cells:a,vertexIds:n,vertexWeights:e}};var r=b("ndarray"),q=b("typedarray-pool"),m=b("ndarray-sort"),l=b("./lib/codegen")},{"./lib/codegen":557,ndarray:495,"ndarray-sort":494,"typedarray-pool":595}],557:[function(b,N,I){N.exports=function(l){var a=m[l];if(!a){a=m;var h=Array(l+1);h[0]=[[]];for(var g=1;g<=l;++g)for(var n=h[g]=q(g),p=0;p<n.length;++p);var d=["function B(C,E,i,j){",
"var a\x3dMath.min(i,j)|0,b\x3dMath.max(i,j)|0,l\x3dC[2*a],h\x3dC[2*a+1];","while(l\x3ch){","var m\x3d(l+h)\x3e\x3e1,v\x3dE[2*m+1];","if(v\x3d\x3d\x3db){return m}","if(b\x3cv){h\x3dm}else{l\x3dm+1}","}","return l;","};","function getContour",l,"d(F,E,C,S){","var n\x3dF.length,R\x3d[];","for(var i\x3d0;i\x3cn;++i){var c\x3dF[i],l\x3dc.length;"];for(g=l+1;1<g;--g){g<l+1&&d.push("else ");d.push("if(l\x3d\x3d\x3d",g,"){");n=[];for(p=0;p<g;++p)n.push("(S[c["+p+"]]\x3c\x3c"+p+")");d.push("var M\x3d",n.join("+"),
";if(M\x3d\x3d\x3d0||M\x3d\x3d\x3d",(1<<g)-1,"){continue}switch(M){");n=h[g-1];for(p=0;p<n.length;++p){d.push("case ",p,":");var e=n[p];if(!(0>=e.length)){d.push("R.push(");for(var f=0;f<e.length;++f){var k=e[f];0<f&&d.push(",");d.push("[");for(var t=0;t<k.length;++t){var v=k[t];0<t&&d.push(",");d.push("B(C,E,c[",v[0],"],c[",v[1],"])")}d.push("]")}d.push(");")}d.push("break;")}d.push("}}")}d.push("}return R;};return getContour",l,"d");h=(new Function("pool",d.join("")))(r);a=a[l]=h}return a};var r=
b("typedarray-pool"),q=b("marching-simplex-table"),m={}},{"marching-simplex-table":474,"typedarray-pool":595}],558:[function(b,N,I){function r(d,e){var f=d.length,k=d.length-e.length,t=Math.min;if(k)return k;switch(f){case 0:return 0;case 1:return d[0]-e[0];case 2:return(f=d[0]+d[1]-e[0]-e[1])?f:t(d[0],d[1])-t(e[0],e[1]);case 3:k=d[0]+d[1];var v=e[0]+e[1];if(f=k+d[2]-(v+e[2]))return f;var w=t(d[0],d[1]),y=t(e[0],e[1]);return(f=t(w,d[2])-t(y,e[2]))?f:t(w+d[2],k)-t(y+e[2],v);default:d=d.slice(0);d.sort();
e=e.slice(0);e.sort();for(t=0;t<f;++t)if(k=d[t]-e[t])return k;return 0}}function q(d,e){return r(d[0],e[0])}function m(d,e){if(e){for(var f=d.length,k=Array(f),t=0;t<f;++t)k[t]=[d[t],e[t]];k.sort(q);for(t=0;t<f;++t)d[t]=k[t][0],e[t]=k[t][1]}else d.sort(r);return d}function l(d){if(0===d.length)return[];for(var e=1,f=d.length,k=1;k<f;++k){var t=d[k];r(t,d[k-1])&&(k===e?e++:d[e++]=t)}d.length=e;return d}function a(d,e){for(var f=0,k=d.length-1,t=-1;f<=k;){var v=f+k>>1,w=r(d[v],e);0>=w?(0===w&&(t=v),
f=v+1):0<w&&(k=v-1)}return t}function h(d,e){for(var f=Array(d.length),k=0,t=f.length;k<t;++k)f[k]=[];t=[];k=0;for(var v=e.length;k<v;++k)for(var w=e[k],y=w.length,B=1,A=1<<y;B<A;++B){t.length=n.popCount(B);for(var z=0,E=0;E<y;++E)B&1<<E&&(t[z++]=w[E]);z=a(d,t);if(!(0>z))for(;!(f[z++].push(k),z>=d.length||0!==r(d[z],t)););}return f}function g(d,e){if(0>e)return[];for(var f=[],k=(1<<e+1)-1,t=0;t<d.length;++t)for(var v=d[t],w=k;w<1<<v.length;w=n.nextCombination(w)){for(var y=Array(e+1),B=0,A=0;A<v.length;++A)w&
1<<A&&(y[B++]=v[A]);f.push(y)}return m(f)}"use restrict";var n=b("bit-twiddle"),p=b("union-find");I.dimension=function(d){for(var e=0,f=Math.max,k=0,t=d.length;k<t;++k)e=f(e,d[k].length);return e-1};I.countVertices=function(d){for(var e=-1,f=Math.max,k=0,t=d.length;k<t;++k)for(var v=d[k],w=0,y=v.length;w<y;++w)e=f(e,v[w]);return e+1};I.cloneCells=function(d){for(var e=Array(d.length),f=0,k=d.length;f<k;++f)e[f]=d[f].slice(0);return e};I.compareCells=r;I.normalize=m;I.unique=l;I.findCell=a;I.incidence=
h;I.dual=function(d,e){if(!e)return h(l(g(d,0)),d,0);for(var f=Array(e),k=0;k<e;++k)f[k]=[];k=0;for(e=d.length;k<e;++k)for(var t=d[k],v=0,w=t.length;v<w;++v)f[t[v]].push(k);return f};I.explode=function(d){for(var e=[],f=0,k=d.length;f<k;++f)for(var t=d[f],v=t.length|0,w=1,y=1<<v;w<y;++w){for(var B=[],A=0;A<v;++A)w>>>A&1&&B.push(t[A]);e.push(B)}return m(e)};I.skeleton=g;I.boundary=function(d){for(var e=[],f=0,k=d.length;f<k;++f)for(var t=d[f],v=0,w=t.length;v<w;++v){for(var y=Array(t.length-1),B=0,
A=0;B<w;++B)B!==v&&(y[A++]=t[B]);e.push(y)}return m(e)};I.connectedComponents=function(d,e){if(e){e=new p(e);for(var f=0;f<d.length;++f)for(var k=d[f],t=0;t<k.length;++t)for(var v=t+1;v<k.length;++v)e.link(k[t],k[v]);k=[];t=e.ranks;for(f=0;f<t.length;++f)t[f]=-1;for(f=0;f<d.length;++f)v=e.find(d[f][0]),0>t[v]?(t[v]=k.length,k.push([d[f].slice(0)])):k[t[v]].push(d[f].slice(0));return k}e=l(m(g(d,0)));f=new p(e.length);for(k=0;k<d.length;++k)for(t=d[k],v=0;v<t.length;++v)for(var w=a(e,[t[v]]),y=v+1;y<
t.length;++y)f.link(w,a(e,[t[y]]));t=[];v=f.ranks;for(k=0;k<v.length;++k)v[k]=-1;for(k=0;k<d.length;++k)w=f.find(a(e,[d[k][0]])),0>v[w]?(v[w]=t.length,t.push([d[k].slice(0)])):t[v[w]].push(d[k].slice(0));return t}},{"bit-twiddle":97,"union-find":596}],559:[function(b,N,I){arguments[4][97][0].apply(I,arguments)},{dup:97}],560:[function(b,N,I){arguments[4][558][0].apply(I,arguments)},{"bit-twiddle":559,dup:558,"union-find":561}],561:[function(b,N,I){function r(q){this.roots=Array(q);this.ranks=Array(q);
for(var m=0;m<q;++m)this.roots[m]=m,this.ranks[m]=0}"use restrict";N.exports=r;r.prototype.length=function(){return this.roots.length};r.prototype.makeSet=function(){var q=this.roots.length;this.roots.push(q);this.ranks.push(0);return q};r.prototype.find=function(q){for(var m=this.roots;m[q]!==q;){var l=m[q];m[q]=m[l];q=l}return q};r.prototype.link=function(q,m){q=this.find(q);m=this.find(m);if(q!==m){var l=this.ranks,a=this.roots,h=l[q],g=l[m];h<g?a[q]=m:g<h?a[m]=q:(a[m]=q,++l[q])}}},{}],562:[function(b,
N,I){N.exports=function(m,l,a){function h(L){if(A[L])return Infinity;var K=w[L],H=y[L];if(0>K||0>H)return Infinity;K=l[K];H=l[H];return Math.abs(r(l[L],K,H))/Math.sqrt(Math.pow(K[0]-H[0],2)+Math.pow(K[1]-H[1],2))}function g(L,K){var H=u[L],Q=u[K];u[L]=Q;u[K]=H;D[H]=K;D[Q]=L}function n(L){for(var K=B[u[L]];;){var H=K,Q=2*L+1,M=2*(L+1),P=L;if(Q<G){var T=B[u[Q]];T<H&&(P=Q,H=T)}M<G&&B[u[M]]<H&&(P=M);if(P===L)return L;g(L,P);L=P}}function p(L){for(var K=B[u[L]];0<L;){var H=L&1?L-1>>1:(L>>1)-1;if(0<=H&&
K<B[u[H]])g(L,H),L=H;else return L}}function d(){if(0<G){var L=u[0];g(0,G-1);--G;n(0);return L}return-1}function e(L,K){var H=u[L];if(B[H]===K)return L;B[H]=-Infinity;p(L);d();B[H]=K;G+=1;return p(G-1)}function f(L){if(!A[L]){A[L]=!0;var K=w[L];L=y[L];0<=w[L]&&(w[L]=K);0<=y[K]&&(y[K]=L);0<=D[K]&&e(D[K],h(K));0<=D[L]&&e(D[L],h(L))}}function k(L,K){if(0>L[K])return K;var H=K,Q=K;do{var M=L[Q];if(!A[Q]||0>M||M===Q)break;Q=M;M=L[Q];if(!A[Q]||0>M||M===Q)break;Q=M;H=L[H]}while(H!==Q);for(;K!==Q;K=L[K])L[K]=
Q;return Q}for(var t=l.length,v=m.length,w=Array(t),y=Array(t),B=Array(t),A=Array(t),z=0;z<t;++z)w[z]=y[z]=-1,B[z]=Infinity,A[z]=!1;for(z=0;z<v;++z){var E=m[z];if(2!==E.length)throw Error("Input must be a graph");var C=E[1];E=E[0];y[E]=-1!==y[E]?-2:C;w[C]=-1!==w[C]?-2:E}var u=[],D=Array(t);for(z=0;z<t;++z)Infinity>(B[z]=h(z))?(D[z]=u.length,u.push(z)):D[z]=-1;var G=u.length;for(z=G>>1;0<=z;--z)n(z);for(;;){z=d();if(0>z||B[z]>a)break;f(z)}a=[];for(z=0;z<t;++z)A[z]||(D[z]=a.length,a.push(l[z].slice()));
var J=[];m.forEach(function(L){var K=k(w,L[0]);L=k(y,L[1]);0<=K&&0<=L&&K!==L&&(K=D[K],L=D[L],K!==L&&J.push([K,L]))});q.unique(q.normalize(J));return{positions:a,edges:J}};var r=b("robust-orientation"),q=b("simplicial-complex")},{"robust-orientation":548,"simplicial-complex":560}],563:[function(b,N,I){function r(m,l){if(l[0][0]<l[1][0]){var a=l[0];l=l[1]}else if(l[0][0]>l[1][0])a=l[1],l=l[0];else{a=Math.min(m[0][1],m[1][1]);m=Math.max(m[0][1],m[1][1]);var h=Math.min(l[0][1],l[1][1]);l=Math.max(l[0][1],
l[1][1]);return m<h?m-h:a>l?a-l:m-l}m[0][1]<m[1][1]?(h=m[0],m=m[1]):(h=m[1],m=m[0]);return(h=q(l,a,h))?h:(h=q(l,a,m))?h:m-l}N.exports=function(m,l){if(l[0][0]<l[1][0]){var a=l[0];var h=l[1]}else if(l[0][0]>l[1][0])a=l[1],h=l[0];else return r(l,m);if(m[0][0]<m[1][0])l=m[0],m=m[1];else if(m[0][0]>m[1][0])l=m[1],m=m[0];else return-r(m,l);var g=q(a,h,m),n=q(a,h,l);if(0>g){if(0>=n)return g}else if(0<g){if(0<=n)return g}else if(n)return n;g=q(m,l,h);n=q(m,l,a);if(0>g){if(0>=n)return g}else if(0<g){if(0<=
n)return g}else if(n)return n;return h[0]-m[0]};var q=b("robust-orientation")},{"robust-orientation":548}],564:[function(b,N,I){arguments[4][243][0].apply(I,arguments)},{dup:243}],565:[function(b,N,I){function r(d,e,f){this.slabs=d;this.coordinates=e;this.horizontal=f}function q(d,e){return d.y-e}function m(d,e){for(var f=null;d;){var k=d.key;if(k[0][0]<k[1][0]){var t=k[0];var v=k[1]}else t=k[1],v=k[0];t=n(t,v,e);if(0>t)d=d.left;else if(0<t)if(e[0]!==k[1][0])f=d,d=d.right;else{if(k=m(d.right,e))return k;
d=d.left}else{if(e[0]!==k[1][0])return d;if(k=m(d.right,e))return k;d=d.left}}return f}function l(d,e,f,k){this.y=d;this.index=e;this.start=f;this.closed=k}function a(d,e,f,k){this.x=d;this.segment=e;this.create=f;this.index=k}N.exports=function(d){for(var e=d.length,f=2*e,k=Array(f),t=0;t<e;++t){var v=d[t],w=v[0][0]<v[1][0];k[2*t]=new a(v[0][0],v,w,t);k[2*t+1]=new a(v[1][0],v,!w,t)}k.sort(function(z,E){var C=z.x-E.x;return C?C:(C=z.create-E.create)?C:Math.min(z.segment[0][1],z.segment[1][1])-Math.min(E.segment[0][1],
E.segment[1][1])});d=g(p);e=[];v=[];w=[];for(t=0;t<f;){for(var y=k[t].x,B=[];t<f;){var A=k[t];if(A.x!==y)break;t+=1;A.segment[0][0]===A.x&&A.segment[1][0]===A.x?A.create&&(A.segment[0][1]<A.segment[1][1]?(B.push(new l(A.segment[0][1],A.index,!0,!0)),B.push(new l(A.segment[1][1],A.index,!1,!1))):(B.push(new l(A.segment[1][1],A.index,!0,!1)),B.push(new l(A.segment[0][1],A.index,!1,!0)))):d=A.create?d.insert(A.segment,A.index):d.remove(A.segment)}e.push(d.root);v.push(y);w.push(B)}return new r(e,v,w)};
var h=b("binary-search-bounds"),g=b("functional-red-black-tree"),n=b("robust-orientation"),p=b("./lib/order-segments");r.prototype.castUp=function(d){var e=h.le(this.coordinates,d[0]);if(0>e)return-1;var f=m(this.slabs[e],d),k=-1;f&&(k=f.value);if(this.coordinates[e]===d[0]){var t=null;f&&(t=f.key);0<e&&(f=m(this.slabs[e-1],d))&&(t?0<p(f.key,t)&&(t=f.key,k=f.value):(k=f.value,t=f.key));f=this.horizontal[e];if(0<f.length){var v=h.ge(f,d[1],q);if(v<f.length){e=f[v];if(d[1]===e.y){if(e.closed)return e.index;
for(;v<f.length-1&&f[v+1].y===d[1];)if(v+=1,e=f[v],e.closed)return e.index;if(e.y===d[1]&&!e.start){v+=1;if(v>=f.length)return k;e=f[v]}}e.start?t?(d=n(t[0],t[1],[d[0],e.y]),t[0][0]>t[1][0]&&(d=-d),0<d&&(k=e.index)):k=e.index:e.y!==d[1]&&(k=e.index)}}}return k}},{"./lib/order-segments":563,"binary-search-bounds":564,"functional-red-black-tree":247,"robust-orientation":548}],566:[function(b,N,I){function r(a,h){a=l(m(a,h),[h[h.length-1]]);return a[a.length-1]}function q(a,h,g,n){h=-h/(n-h);0>h?h=0:
1<h&&(h=1);n=1-h;for(var p=a.length,d=Array(p),e=0;e<p;++e)d[e]=h*a[e]+n*g[e];return d}var m=b("robust-dot-product"),l=b("robust-sum");N.exports=function(a,h){for(var g=[],n=[],p=r(a[a.length-1],h),d=a[a.length-1],e,f=0;f<a.length;++f,d=e){e=a[f];var k=r(e,h);if(0>p&&0<k||0<p&&0>k)p=q(d,k,e,p),g.push(p),n.push(p.slice());0>k?n.push(e.slice()):0<k?g.push(e.slice()):(g.push(e.slice()),n.push(e.slice()));p=k}return{positive:g,negative:n}};N.exports.positive=function(a,h){for(var g=[],n=r(a[a.length-
1],h),p=a[a.length-1],d,e=0;e<a.length;++e,p=d){d=a[e];var f=r(d,h);(0>n&&0<f||0<n&&0>f)&&g.push(q(p,f,d,n));0<=f&&g.push(d.slice());n=f}return g};N.exports.negative=function(a,h){for(var g=[],n=r(a[a.length-1],h),p=a[a.length-1],d,e=0;e<a.length;++e,p=d){d=a[e];var f=r(d,h);(0>n&&0<f||0<n&&0>f)&&g.push(q(p,f,d,n));0>=f&&g.push(d.slice());n=f}return g}},{"robust-dot-product":545,"robust-sum":553}],567:[function(b,N,I){!function(){function r(a){var h=a;if(l[h])h=l[h];else{for(var g=h,n,p=[],d=0;g;){if(null!==
(n=m.text.exec(g)))p.push(n[0]);else if(null!==(n=m.modulo.exec(g)))p.push("%");else if(null!==(n=m.placeholder.exec(g))){if(n[2]){d|=1;var e=[],f=n[2],k;if(null!==(k=m.key.exec(f)))for(e.push(k[1]);""!==(f=f.substring(k[0].length));)if(null!==(k=m.key_access.exec(f)))e.push(k[1]);else if(null!==(k=m.index_access.exec(f)))e.push(k[1]);else throw new SyntaxError("[sprintf] failed to parse named argument key");else throw new SyntaxError("[sprintf] failed to parse named argument key");n[2]=e}else d|=
2;if(3===d)throw Error("[sprintf] mixing positional and named placeholders is not (yet) supported");p.push({placeholder:n[0],param_no:n[1],keys:n[2],sign:n[3],pad_char:n[4],align:n[5],width:n[6],precision:n[7],type:n[8]})}else throw new SyntaxError("[sprintf] unexpected placeholder");g=g.substring(n[0].length)}h=l[h]=p}g=arguments;n=1;p=h.length;e="";var t,v;for(f=0;f<p;f++)if("string"===typeof h[f])e+=h[f];else if("object"===typeof h[f]){k=h[f];if(k.keys)for(d=g[n],t=0;t<k.keys.length;t++){if(void 0==
d)throw Error(r('[sprintf] Cannot access property "%s" of undefined value "%s"',k.keys[t],k.keys[t-1]));d=d[k.keys[t]]}else d=k.param_no?g[k.param_no]:g[n++];m.not_type.test(k.type)&&m.not_primitive.test(k.type)&&d instanceof Function&&(d=d());if(m.numeric_arg.test(k.type)&&"number"!==typeof d&&isNaN(d))throw new TypeError(r("[sprintf] expecting number but found %T",d));m.number.test(k.type)&&(v=0<=d);switch(k.type){case "b":d=parseInt(d,10).toString(2);break;case "c":d=String.fromCharCode(parseInt(d,
10));break;case "d":case "i":d=parseInt(d,10);break;case "j":d=JSON.stringify(d,null,k.width?parseInt(k.width):0);break;case "e":d=k.precision?parseFloat(d).toExponential(k.precision):parseFloat(d).toExponential();break;case "f":d=k.precision?parseFloat(d).toFixed(k.precision):parseFloat(d);break;case "g":d=k.precision?String(Number(d.toPrecision(k.precision))):parseFloat(d);break;case "o":d=(parseInt(d,10)>>>0).toString(8);break;case "s":d=String(d);d=k.precision?d.substring(0,k.precision):d;break;
case "t":d=String(!!d);d=k.precision?d.substring(0,k.precision):d;break;case "T":d=Object.prototype.toString.call(d).slice(8,-1).toLowerCase();d=k.precision?d.substring(0,k.precision):d;break;case "u":d=parseInt(d,10)>>>0;break;case "v":d=d.valueOf();d=k.precision?d.substring(0,k.precision):d;break;case "x":d=(parseInt(d,10)>>>0).toString(16);break;case "X":d=(parseInt(d,10)>>>0).toString(16).toUpperCase()}if(m.json.test(k.type))e+=d;else{if(!m.number.test(k.type)||v&&!k.sign)var w="";else w=v?"+":
"-",d=d.toString().replace(m.sign,"");t=k.pad_char?"0"===k.pad_char?"0":k.pad_char.charAt(1):" ";var y=k.width-(w+d).length;y=k.width?0<y?t.repeat(y):"":"";e+=k.align?w+d+y:"0"===t?w+y+d:y+w+d}}return e}function q(a,h){return r.apply(null,[a].concat(h||[]))}var m={not_string:/[^s]/,not_bool:/[^t]/,not_type:/[^T]/,not_primitive:/[^v]/,number:/[diefg]/,numeric_arg:/[bcdiefguxX]/,json:/[j]/,not_json:/[^j]/,text:/^[^\x25]+/,modulo:/^\x25{2}/,placeholder:/^\x25(?:([1-9]\d*)\$|\(([^)]+)\))?(\+)?(0|'[^$])?(-)?(\d+)?(?:\.(\d+))?([b-gijostTuvxX])/,
key:/^([a-z_][a-z_\d]*)/i,key_access:/^\.([a-z_][a-z_\d]*)/i,index_access:/^\[(\d+)\]/,sign:/^[+-]/},l=Object.create(null);"undefined"!==typeof I&&(I.sprintf=r,I.vsprintf=q);"undefined"!==typeof window&&(window.sprintf=r,window.vsprintf=q)}()},{}],568:[function(b,N,I){var r=b("parenthesis");N.exports=function(q,m,l){if(null==q)throw Error("First argument should be a string");if(null==m)throw Error("Separator should be a string or a RegExp");if(!l)l={};else if("string"===typeof l||Array.isArray(l))l=
{ignore:l};null==l.escape&&(l.escape=!0);null==l.ignore?l.ignore="[] () {} \x3c\x3e \"\" '' ``  ".split(" "):("string"===typeof l.ignore&&(l.ignore=[l.ignore]),l.ignore=l.ignore.map(function(p){1===p.length&&(p+=p);return p}));q=r.parse(q,{flat:!0,brackets:l.ignore});var a=q[0].split(m);if(l.escape){l=[];for(var h=0;h<a.length;h++){var g=a[h],n=a[h+1];"\\"===g[g.length-1]&&"\\"!==g[g.length-2]?(l.push(g+m+n),h++):l.push(g)}a=l}for(h=0;h<a.length;h++)q[0]=a[h],a[h]=r.stringify(q,{flat:!0});return a}},
{parenthesis:503}],569:[function(b,N,I){N.exports=function(r){function q(w){var y=[w],B=[w];l[w]=a[w]=e;h[w]=!0;for(e+=1;0<B.length;){w=B[B.length-1];var A=r[w];if(g[w]<A.length){for(var z=g[w];z<A.length;++z){var E=A[z];if(0>l[E]){l[E]=a[E]=e;h[E]=!0;e+=1;y.push(E);B.push(E);break}else h[E]&&(a[w]=Math.min(a[w],a[E])|0);0<=n[E]&&p[w].push(n[E])}g[w]=z}else{if(a[w]===l[w]){var C=[];A=[];E=0;for(z=y.length-1;0<=z;--z){var u=y[z];h[u]=!1;C.push(u);A.push(p[u]);E+=p[u].length;n[u]=f.length;if(u===w){y.length=
z;break}}f.push(C);w=Array(E);for(z=0;z<A.length;z++)for(C=0;C<A[z].length;C++)w[--E]=A[z][C];k.push(w)}B.pop()}}}for(var m=r.length,l=Array(m),a=Array(m),h=Array(m),g=Array(m),n=Array(m),p=Array(m),d=0;d<m;++d)l[d]=-1,a[d]=0,h[d]=!1,g[d]=0,n[d]=-1,p[d]=[];var e=0,f=[],k=[];for(d=0;d<m;++d)0>l[d]&&q(d);for(d=0;d<k.length;d++){var t=k[d];if(0!==t.length){t.sort(function(w,y){return w-y});m=[t[0]];for(var v=1;v<t.length;v++)t[v]!==t[v-1]&&m.push(t[v]);k[d]=m}}return{components:f,adjacencyList:k}}},
{}],570:[function(b,N,I){function r(h,g){var n=h.length,p=["'use strict';"],d="surfaceNets"+h.join("_")+"d"+g;p.push("var contour\x3dgenContour({","order:[",h.join(),"],","scalarArguments: 3,","phase:function phaseFunc(p,a,b,c) { return (p \x3e c)|0 },");"generic"===g&&p.push("getters:[0],");var e=[];g=[];for(h=0;h<n;++h)e.push("d"+h),g.push("d"+h);for(h=0;h<1<<n;++h)e.push("v"+h),g.push("v"+h);for(h=0;h<1<<n;++h)e.push("p"+h),g.push("p"+h);e.push("a","b","c");g.push("a","c");p.push("vertex:function vertexFunc(",
e.join(),"){");e=[];for(h=0;h<1<<n;++h)e.push("(p"+h+"\x3c\x3c"+h+")");p.push("var m\x3d(",e.join("+"),")|0;if(m\x3d\x3d\x3d0||m\x3d\x3d\x3d",(1<<(1<<n))-1,"){return}");e=[];var f=[];128>=1<<(1<<n)?(p.push("switch(m){"),f=p):p.push("switch(m\x3e\x3e\x3e7){");for(h=0;h<1<<(1<<n);++h){128<1<<(1<<n)&&0===h%128&&(0<e.length&&f.push("}}"),f="vExtra"+e.length,p.push("case ",h>>>7,":",f,"(m\x260x7f,",g.join(),");break;"),f=["function ",f,"(m,",g.join(),"){switch(m){"],e.push(f));f.push("case ",h&127,":");
for(var k=Array(n),t=Array(n),v=Array(n),w=Array(n),y=0,B=0;B<n;++B)k[B]=[],t[B]=[],v[B]=0,w[B]=0;for(B=0;B<1<<n;++B)for(var A=0;A<n;++A){var z=B^1<<A;if(!(z>B)&&!(h&1<<z)!==!(h&1<<B)){var E=1;h&1<<z?t[A].push("v"+z+"-v"+B):(t[A].push("v"+B+"-v"+z),E=-E);0>E?(k[A].push("-v"+B+"-v"+z),v[A]+=2):(k[A].push("v"+B+"+v"+z),v[A]-=2);y+=1;for(E=0;E<n;++E)E!==A&&(z&1<<E?w[E]+=1:--w[E])}}B=[];for(A=0;A<n;++A)0===k[A].length?B.push("d"+A+"-0.5"):(z="",0>v[A]?z=v[A]+"*c":0<v[A]&&(z="+"+v[A]+"*c"),B.push("d"+
A+"-"+(.5+w[A]/y*.5)+"-"+k[A].length/y*.5+"*("+k[A].join("+")+z+")/("+t[A].join("+")+")"));f.push("a.push([",B.join(),"]);","break;")}p.push("}},");0<e.length&&f.push("}}");g=[];for(h=0;h<1<<n-1;++h)g.push("v"+h);g.push("c0","c1","p0","p1","a","b","c");p.push("cell:function cellFunc(",g.join(),"){");n=m(n-1);p.push("if(p0){b.push(",n.map(function(C){return"["+C.map(function(u){return"v"+u})+"]"}).join(),")}else{b.push(",n.map(function(C){C=C.slice();C.reverse();return"["+C.map(function(u){return"v"+
u})+"]"}).join(),")}}});function ",d,"(array,level){var verts\x3d[],cells\x3d[];contour(array,verts,cells,level);return {positions:verts,cells:cells};} return ",d,";");for(h=0;h<e.length;++h)p.push(e[h].join(""));return(new Function("genContour",p.join("")))(q)}N.exports=function(h,g){if(0>=h.dimension)return{positions:[],cells:[]};if(1===h.dimension){h=l(h,g);g=h.length;for(var n=Array(g),p=Array(g),d=0;d<g;++d)n[d]=[h[d]],p[d]=[d];return{positions:n,cells:p}}n=h.order.join()+"-"+h.dtype;p=a[n];
g=+g||0;p||(p=a[n]=r(h.order,h.dtype));return p(h,g)};var q=b("ndarray-extract-contour"),m=b("triangulate-hypercube"),l=b("zero-crossings"),a={}},{"ndarray-extract-contour":487,"triangulate-hypercube":580,"zero-crossings":624}],571:[function(b,N,I){Object.defineProperty(I,"__esModule",{value:!0});var r=function(){return function(g,n){if(Array.isArray(g))return g;if(Symbol.iterator in Object(g)){var p=[],d=!0,e=!1,f=void 0;try{for(var k=g[Symbol.iterator](),t;!(d=(t=k.next()).done)&&(p.push(t.value),
!n||p.length!==n);d=!0);}catch(v){e=!0,f=v}finally{try{if(!d&&k["return"])k["return"]()}finally{if(e)throw f;}}return p}throw new TypeError("Invalid attempt to destructure non-iterable instance");}}(),q=2*Math.PI,m=function(g,n,p,d,e,f,k){var t=g.x;g=g.y;t*=n;g*=p;return{x:d*t-e*g+f,y:e*t+d*g+k}},l=function(g,n){var p=1.5707963267948966===n?.551915024494:-1.5707963267948966===n?-.551915024494:4/3*Math.tan(n/4),d=Math.cos(g),e=Math.sin(g),f=Math.cos(g+n);g=Math.sin(g+n);return[{x:d-e*p,y:e+d*p},{x:f+
g*p,y:g-f*p},{x:f,y:g}]},a=function(g,n,p,d){var e=g*p+n*d;1<e&&(e=1);-1>e&&(e=-1);return(0>g*d-n*p?-1:1)*Math.acos(e)},h=function(g,n,p,d,e,f,k,t,v,w,y,B){var A=Math.pow(e,2),z=Math.pow(f,2),E=Math.pow(y,2),C=Math.pow(B,2),u=A*z-A*C-z*E;0>u&&(u=0);u=Math.sqrt(u/(A*C+z*E))*(k===t?-1:1);k=u*e/f*B;u=u*-f/e*y;g=w*k-v*u+(g+p)/2;n=v*k+w*u+(n+d)/2;d=(y-k)/e;v=(B-u)/f;e=(-y-k)/e;B=(-B-u)/f;f=a(1,0,d,v);B=a(d,v,e,B);0===t&&0<B&&(B-=q);1===t&&0>B&&(B+=q);return[g,n,f,B]};I.default=function(g){var n=g.px,p=
g.py,d=g.cx,e=g.cy,f=g.rx,k=g.ry,t=g.xAxisRotation,v=void 0===t?0:t;t=g.largeArcFlag;var w=g.sweepFlag;g=[];if(0===f||0===k)return[];var y=Math.sin(v*q/360),B=Math.cos(v*q/360);v=B*(n-d)/2+y*(p-e)/2;var A=-y*(n-d)/2+B*(p-e)/2;if(0===v&&0===A)return[];f=Math.abs(f);k=Math.abs(k);var z=Math.pow(v,2)/Math.pow(f,2)+Math.pow(A,2)/Math.pow(k,2);1<z&&(f*=Math.sqrt(z),k*=Math.sqrt(z));n=h(n,p,d,e,f,k,void 0===t?0:t,void 0===w?0:w,y,B,v,A);p=r(n,4);var E=p[0],C=p[1];n=p[2];p=p[3];d=Math.abs(p)/(q/4);1E-7>
Math.abs(1-d)&&(d=1);d=Math.max(Math.ceil(d),1);p/=d;for(e=0;e<d;e++)g.push(l(n,p)),n+=p;return g.map(function(u){var D=m(u[0],f,k,B,y,E,C),G=D.x;D=D.y;var J=m(u[1],f,k,B,y,E,C),L=J.x;J=J.y;u=m(u[2],f,k,B,y,E,C);return{x1:G,y1:D,x2:L,y2:J,x:u.x,y:u.y}})};N.exports=I.default},{}],572:[function(b,N,I){var r=b("parse-svg-path"),q=b("abs-svg-path"),m=b("normalize-svg-path"),l=b("is-svg-path"),a=b("assert");N.exports=function(h){Array.isArray(h)&&1===h.length&&"string"===typeof h[0]&&(h=h[0]);"string"===
typeof h&&(a(l(h),"String is not an SVG path."),h=r(h));a(Array.isArray(h),"Argument should be a string or an array of path segments.");h=q(h);h=m(h);if(!h.length)return[0,0,0,0];for(var g=[Infinity,Infinity,-Infinity,-Infinity],n=0,p=h.length;n<p;n++)for(var d=h[n].slice(1),e=0;e<d.length;e+=2)d[e+0]<g[0]&&(g[0]=d[e+0]),d[e+1]<g[1]&&(g[1]=d[e+1]),d[e+0]>g[2]&&(g[2]=d[e+0]),d[e+1]>g[3]&&(g[3]=d[e+1]);return g}},{"abs-svg-path":65,assert:73,"is-svg-path":471,"normalize-svg-path":573,"parse-svg-path":505}],
573:[function(b,N,I){function r(l,a,h,g){return["C",l,a,h,g,h,g]}function q(l,a,h,g,n,p){return["C",l/3+2/3*h,a/3+2/3*g,n/3+2/3*h,p/3+2/3*g,n,p]}N.exports=function(l){for(var a,h=[],g=0,n=0,p=0,d=0,e=null,f=null,k=0,t=0,v=0,w=l.length;v<w;v++){var y=l[v],B=y[0];switch(B){case "M":p=y[1];d=y[2];break;case "A":var A=m({px:k,py:t,cx:y[6],cy:y[7],rx:y[1],ry:y[2],xAxisRotation:y[3],largeArcFlag:y[4],sweepFlag:y[5]});if(!A.length)continue;for(a=0;a<A.length;a++)y=A[a],y=["C",y.x1,y.y1,y.x2,y.y2,y.x,y.y],
a<A.length-1&&h.push(y);break;case "S":A=k;if("C"==a||"S"==a)A+=A-g,t+=t-n;y=["C",A,t,y[1],y[2],y[3],y[4]];break;case "T":"Q"==a||"T"==a?(e=2*k-e,f=2*t-f):(e=k,f=t);y=q(k,t,e,f,y[1],y[2]);break;case "Q":e=y[1];f=y[2];y=q(k,t,y[1],y[2],y[3],y[4]);break;case "L":y=r(k,t,y[1],y[2]);break;case "H":y=r(k,t,y[1],t);break;case "V":y=r(k,t,k,y[1]);break;case "Z":y=r(k,t,p,d)}a=B;k=y[y.length-2];t=y[y.length-1];4<y.length?(g=y[y.length-4],n=y[y.length-3]):(g=k,n=t);h.push(y)}return h};var m=b("svg-arc-to-cubic-bezier")},
{"svg-arc-to-cubic-bezier":571}],574:[function(b,N,I){function r(){if(null!=p)return p;var d=document.createElement("canvas").getContext("2d");d.canvas.width=d.canvas.height=1;if(!window.Path2D)return p=!1;var e=new Path2D("M0,0h1v1h-1v-1Z");d.fillStyle="black";d.fill(e);return p=(d=d.getImageData(0,0,1,1))&&d.data&&255===d.data[3]}var q=b("svg-path-bounds"),m=b("parse-svg-path"),l=b("draw-svg-path"),a=b("is-svg-path"),h=b("bitmap-sdf"),g=document.createElement("canvas"),n=g.getContext("2d");N.exports=
function(d,e){if(!a(d))throw Error("Argument should be valid svg path string");e||(e={});if(e.shape){var f=e.shape[0];var k=e.shape[1]}else f=g.width=e.w||e.width||200,k=g.height=e.h||e.height||200;var t=Math.min(f,k),v=e.stroke||0,w=e.viewbox||e.viewBox||q(d);w=[f/(w[2]-w[0]),k/(w[3]-w[1])];w=Math.min(w[0]||0,w[1]||0)/2;n.fillStyle="black";n.fillRect(0,0,f,k);n.fillStyle="white";v&&("number"!=typeof v&&(v=1),n.strokeStyle=0<v?"white":"black",n.lineWidth=Math.abs(v));n.translate(.5*f,.5*k);n.scale(w,
w);r()?(d=new Path2D(d),n.fill(d),v&&n.stroke(d)):(d=m(d),l(n,d),n.fill(),v&&n.stroke());n.setTransform(1,0,0,1,0,0);return h(n,{cutoff:null!=e.cutoff?e.cutoff:.5,radius:null!=e.radius?e.radius:.5*t})};var p},{"bitmap-sdf":98,"draw-svg-path":174,"is-svg-path":471,"parse-svg-path":505,"svg-path-bounds":572}],575:[function(b,N,I){(function(r){(function(){function q(h,g,n){n=n||{};var p=a[h];p||(p=a[h]={" ":{data:new Float32Array(0),shape:.2}});var d=p[g];if(!d)if(1>=g.length||!/\d/.test(g)){d=m(g,{triangles:!0,
font:h,textAlign:n.textAlign||"left",textBaseline:"alphabetic",styletags:{breaklines:!0,bolds:!0,italics:!0,subscripts:!0,superscripts:!0}});n=d.cells;d=d.positions;for(var e=new Float32Array(6*n.length),f=h=0,k=0;k<n.length;++k)for(var t=n[k],v=0;3>v;++v){var w=d[t[v]];e[h++]=w[0];e[h++]=w[1]+1.4;f=Math.max(w[0],f)}d=p[g]={data:e,shape:f}}else{f=g.split(/(\d|\s)/);n=Array(f.length);for(e=d=k=0;e<f.length;++e)n[e]=q(h,f[e]),k+=n[e].data.length,d+=n[e].shape,0<e&&(d+=.02);h=new Float32Array(k);f=0;
k=-.5*d;for(e=0;e<n.length;++e){t=n[e].data;for(v=0;v<t.length;v+=2)h[f++]=t[v]+k,h[f++]=t[v+1];k+=n[e].shape+.02}d=p[g]={data:h,shape:d}}return d}N.exports=q;var m=b("vectorize-text"),l=window||r.global||{},a=l.__TEXT_CACHE||{};l.__TEXT_CACHE={}}).call(this)}).call(this,b("_process"))},{_process:526,"vectorize-text":600}],576:[function(b,N,I){(function(r){function q(S,X){var ba,ca;S=S?S:"";X=X||{};if(S instanceof q)return S;if(!(this instanceof q))return new q(S,X);var ia=S;var ja={r:0,g:0,b:0};
var la=1;var da=ba=!1;if("string"==typeof ia)a:{ia=ia.replace(J,"").replace(L,"").toLowerCase();var oa=!1;if(T[ia])ia=T[ia],oa=!0;else if("transparent"==ia){ia={r:0,g:0,b:0,a:0,format:"name"};break a}ia=(ca=U.rgb.exec(ia))?{r:ca[1],g:ca[2],b:ca[3]}:(ca=U.rgba.exec(ia))?{r:ca[1],g:ca[2],b:ca[3],a:ca[4]}:(ca=U.hsl.exec(ia))?{h:ca[1],s:ca[2],l:ca[3]}:(ca=U.hsla.exec(ia))?{h:ca[1],s:ca[2],l:ca[3],a:ca[4]}:(ca=U.hsv.exec(ia))?{h:ca[1],s:ca[2],v:ca[3]}:(ca=U.hsva.exec(ia))?{h:ca[1],s:ca[2],v:ca[3],a:ca[4]}:
(ca=U.hex8.exec(ia))?{r:parseInt(ca[1],16),g:parseInt(ca[2],16),b:parseInt(ca[3],16),a:parseInt(ca[4],16)/255,format:oa?"name":"hex8"}:(ca=U.hex6.exec(ia))?{r:parseInt(ca[1],16),g:parseInt(ca[2],16),b:parseInt(ca[3],16),format:oa?"name":"hex"}:(ca=U.hex4.exec(ia))?{r:parseInt(ca[1]+""+ca[1],16),g:parseInt(ca[2]+""+ca[2],16),b:parseInt(ca[3]+""+ca[3],16),a:parseInt(ca[4]+""+ca[4],16)/255,format:oa?"name":"hex8"}:(ca=U.hex3.exec(ia))?{r:parseInt(ca[1]+""+ca[1],16),g:parseInt(ca[2]+""+ca[2],16),b:parseInt(ca[3]+
""+ca[3],16),format:oa?"name":"hex"}:!1}if("object"==typeof ia){if(G(ia.r)&&G(ia.g)&&G(ia.b))ja=ia.g,ba=ia.b,ja={r:255*C(ia.r,255),g:255*C(ja,255),b:255*C(ba,255)},ba=!0,da="%"===String(ia.r).substr(-1)?"prgb":"rgb";else if(G(ia.h)&&G(ia.s)&&G(ia.v)){ja=D(ia.s);da=D(ia.v);ca=ia.h;ba=ja;ja=da;ca=6*C(ca,360);ba=C(ba,100);ja=C(ja,100);da=r.floor(ca);var sa=ca-da;ca=ja*(1-ba);oa=ja*(1-sa*ba);ba=ja*(1-(1-sa)*ba);da%=6;ja={r:255*[ja,oa,ca,ca,ba,ja][da],g:255*[ba,ja,ja,oa,ca,ca][da],b:255*[ca,ca,ba,ja,ja,
oa][da]};ba=!0;da="hsv"}else G(ia.h)&&G(ia.s)&&G(ia.l)&&(ja=D(ia.s),ba=D(ia.l),ja=l(ia.h,ja,ba),ba=!0,da="hsl");ia.hasOwnProperty("a")&&(la=ia.a)}la=E(la);ia=ia.format||da;da=Q(255,M(ja.r,0));ca=Q(255,M(ja.g,0));ja=Q(255,M(ja.b,0));this._originalInput=S;this._r=da;this._g=ca;this._b=ja;this._a=la;this._roundA=H(100*this._a)/100;this._format=X.format||ia;this._gradientType=X.gradientType;1>this._r&&(this._r=H(this._r));1>this._g&&(this._g=H(this._g));1>this._b&&(this._b=H(this._b));this._ok=ba;this._tc_id=
K++}function m(S,X,ba){S=C(S,255);X=C(X,255);ba=C(ba,255);var ca=M(S,X,ba),ia=Q(S,X,ba),ja=(ca+ia)/2;if(ca==ia)var la=ia=0;else{var da=ca-ia;ia=.5<ja?da/(2-ca-ia):da/(ca+ia);switch(ca){case S:la=(X-ba)/da+(X<ba?6:0);break;case X:la=(ba-S)/da+2;break;case ba:la=(S-X)/da+4}la/=6}return{h:la,s:ia,l:ja}}function l(S,X,ba){function ca(la,da,oa){0>oa&&(oa+=1);1<oa&&--oa;return oa<1/6?la+6*(da-la)*oa:.5>oa?da:oa<2/3?la+(da-la)*(2/3-oa)*6:la}S=C(S,360);X=C(X,100);ba=C(ba,100);if(0===X)ba=X=S=ba;else{var ia=
.5>ba?ba*(1+X):ba+X-ba*X,ja=2*ba-ia;ba=ca(ja,ia,S+1/3);X=ca(ja,ia,S);S=ca(ja,ia,S-1/3)}return{r:255*ba,g:255*X,b:255*S}}function a(S,X,ba){S=C(S,255);X=C(X,255);ba=C(ba,255);var ca=M(S,X,ba),ia=Q(S,X,ba),ja=ca-ia;if(ca==ia)var la=0;else{switch(ca){case S:la=(X-ba)/ja+(X<ba?6:0);break;case X:la=(ba-S)/ja+2;break;case ba:la=(S-X)/ja+4}la/=6}return{h:la,s:0===ca?0:ja/ca,v:ca}}function h(S,X,ba,ca){S=[u(H(S).toString(16)),u(H(X).toString(16)),u(H(ba).toString(16))];return ca&&S[0].charAt(0)==S[0].charAt(1)&&
S[1].charAt(0)==S[1].charAt(1)&&S[2].charAt(0)==S[2].charAt(1)?S[0].charAt(0)+S[1].charAt(0)+S[2].charAt(0):S.join("")}function g(S,X,ba,ca){return[u(r.round(255*parseFloat(ca)).toString(16)),u(H(S).toString(16)),u(H(X).toString(16)),u(H(ba).toString(16))].join("")}function n(S,X){X=0===X?0:X||10;S=q(S).toHsl();S.s-=X/100;S.s=Q(1,M(0,S.s));return q(S)}function p(S,X){X=0===X?0:X||10;S=q(S).toHsl();S.s+=X/100;S.s=Q(1,M(0,S.s));return q(S)}function d(S){return q(S).desaturate(100)}function e(S,X){X=
0===X?0:X||10;S=q(S).toHsl();S.l+=X/100;S.l=Q(1,M(0,S.l));return q(S)}function f(S,X){X=0===X?0:X||10;S=q(S).toRgb();S.r=M(0,Q(255,S.r-H(255*-(X/100))));S.g=M(0,Q(255,S.g-H(255*-(X/100))));S.b=M(0,Q(255,S.b-H(255*-(X/100))));return q(S)}function k(S,X){X=0===X?0:X||10;S=q(S).toHsl();S.l-=X/100;S.l=Q(1,M(0,S.l));return q(S)}function t(S,X){S=q(S).toHsl();X=(S.h+X)%360;S.h=0>X?360+X:X;return q(S)}function v(S){S=q(S).toHsl();S.h=(S.h+180)%360;return q(S)}function w(S){var X=q(S).toHsl(),ba=X.h;return[q(S),
q({h:(ba+120)%360,s:X.s,l:X.l}),q({h:(ba+240)%360,s:X.s,l:X.l})]}function y(S){var X=q(S).toHsl(),ba=X.h;return[q(S),q({h:(ba+90)%360,s:X.s,l:X.l}),q({h:(ba+180)%360,s:X.s,l:X.l}),q({h:(ba+270)%360,s:X.s,l:X.l})]}function B(S){var X=q(S).toHsl(),ba=X.h;return[q(S),q({h:(ba+72)%360,s:X.s,l:X.l}),q({h:(ba+216)%360,s:X.s,l:X.l})]}function A(S,X,ba){X=X||6;ba=ba||30;var ca=q(S).toHsl();ba=360/ba;S=[q(S)];for(ca.h=(ca.h-(ba*X>>1)+720)%360;--X;)ca.h=(ca.h+ba)%360,S.push(q(ca));return S}function z(S,X){X=
X||6;var ba=q(S).toHsv();S=ba.h;var ca=ba.s;ba=ba.v;for(var ia=[],ja=1/X;X--;)ia.push(q({h:S,s:ca,v:ba})),ba=(ba+ja)%1;return ia}function E(S){S=parseFloat(S);if(isNaN(S)||0>S||1<S)S=1;return S}function C(S,X){var ba=S;"string"==typeof ba&&-1!=ba.indexOf(".")&&1===parseFloat(ba)&&(S="100%");ba="string"===typeof S&&-1!=S.indexOf("%");S=Q(X,M(0,parseFloat(S)));ba&&(S=parseInt(S*X,10)/100);return 1E-6>r.abs(S-X)?1:S%X/parseFloat(X)}function u(S){return 1==S.length?"0"+S:""+S}function D(S){1>=S&&(S=100*
S+"%");return S}function G(S){return!!U.CSS_UNIT.exec(S)}var J=/^\s+/,L=/\s+$/,K=0,H=r.round,Q=r.min,M=r.max,P=r.random;q.prototype={isDark:function(){return 128>this.getBrightness()},isLight:function(){return!this.isDark()},isValid:function(){return this._ok},getOriginalInput:function(){return this._originalInput},getFormat:function(){return this._format},getAlpha:function(){return this._a},getBrightness:function(){var S=this.toRgb();return(299*S.r+587*S.g+114*S.b)/1E3},getLuminance:function(){var S=
this.toRgb();var X=S.r/255;var ba=S.g/255;S=S.b/255;X=.03928>=X?X/12.92:r.pow((X+.055)/1.055,2.4);ba=.03928>=ba?ba/12.92:r.pow((ba+.055)/1.055,2.4);S=.03928>=S?S/12.92:r.pow((S+.055)/1.055,2.4);return.2126*X+.7152*ba+.0722*S},setAlpha:function(S){this._a=E(S);this._roundA=H(100*this._a)/100;return this},toHsv:function(){var S=a(this._r,this._g,this._b);return{h:360*S.h,s:S.s,v:S.v,a:this._a}},toHsvString:function(){var S=a(this._r,this._g,this._b),X=H(360*S.h),ba=H(100*S.s);S=H(100*S.v);return 1==
this._a?"hsv("+X+", "+ba+"%, "+S+"%)":"hsva("+X+", "+ba+"%, "+S+"%, "+this._roundA+")"},toHsl:function(){var S=m(this._r,this._g,this._b);return{h:360*S.h,s:S.s,l:S.l,a:this._a}},toHslString:function(){var S=m(this._r,this._g,this._b),X=H(360*S.h),ba=H(100*S.s);S=H(100*S.l);return 1==this._a?"hsl("+X+", "+ba+"%, "+S+"%)":"hsla("+X+", "+ba+"%, "+S+"%, "+this._roundA+")"},toHex:function(S){return h(this._r,this._g,this._b,S)},toHexString:function(S){return"#"+this.toHex(S)},toHex8:function(S){var X=
this._g,ba=this._b,ca=this._a;X=[u(H(this._r).toString(16)),u(H(X).toString(16)),u(H(ba).toString(16)),u(r.round(255*parseFloat(ca)).toString(16))];S=S&&X[0].charAt(0)==X[0].charAt(1)&&X[1].charAt(0)==X[1].charAt(1)&&X[2].charAt(0)==X[2].charAt(1)&&X[3].charAt(0)==X[3].charAt(1)?X[0].charAt(0)+X[1].charAt(0)+X[2].charAt(0)+X[3].charAt(0):X.join("");return S},toHex8String:function(S){return"#"+this.toHex8(S)},toRgb:function(){return{r:H(this._r),g:H(this._g),b:H(this._b),a:this._a}},toRgbString:function(){return 1==
this._a?"rgb("+H(this._r)+", "+H(this._g)+", "+H(this._b)+")":"rgba("+H(this._r)+", "+H(this._g)+", "+H(this._b)+", "+this._roundA+")"},toPercentageRgb:function(){return{r:H(100*C(this._r,255))+"%",g:H(100*C(this._g,255))+"%",b:H(100*C(this._b,255))+"%",a:this._a}},toPercentageRgbString:function(){return 1==this._a?"rgb("+H(100*C(this._r,255))+"%, "+H(100*C(this._g,255))+"%, "+H(100*C(this._b,255))+"%)":"rgba("+H(100*C(this._r,255))+"%, "+H(100*C(this._g,255))+"%, "+H(100*C(this._b,255))+"%, "+this._roundA+
")"},toName:function(){return 0===this._a?"transparent":1>this._a?!1:O[h(this._r,this._g,this._b,!0)]||!1},toFilter:function(S){var X="#"+g(this._r,this._g,this._b,this._a),ba=X,ca=this._gradientType?"GradientType \x3d 1, ":"";S&&(S=q(S),ba="#"+g(S._r,S._g,S._b,S._a));return"progid:DXImageTransform.Microsoft.gradient("+ca+"startColorstr\x3d"+X+",endColorstr\x3d"+ba+")"},toString:function(S){var X=!!S;S=S||this._format;var ba=!1,ca=1>this._a&&0<=this._a;if(!X&&ca&&("hex"===S||"hex6"===S||"hex3"===
S||"hex4"===S||"hex8"===S||"name"===S))return"name"===S&&0===this._a?this.toName():this.toRgbString();"rgb"===S&&(ba=this.toRgbString());"prgb"===S&&(ba=this.toPercentageRgbString());if("hex"===S||"hex6"===S)ba=this.toHexString();"hex3"===S&&(ba=this.toHexString(!0));"hex4"===S&&(ba=this.toHex8String(!0));"hex8"===S&&(ba=this.toHex8String());"name"===S&&(ba=this.toName());"hsl"===S&&(ba=this.toHslString());"hsv"===S&&(ba=this.toHsvString());return ba||this.toHexString()},clone:function(){return q(this.toString())},
_applyModification:function(S,X){S=S.apply(null,[this].concat([].slice.call(X)));this._r=S._r;this._g=S._g;this._b=S._b;this.setAlpha(S._a);return this},lighten:function(){return this._applyModification(e,arguments)},brighten:function(){return this._applyModification(f,arguments)},darken:function(){return this._applyModification(k,arguments)},desaturate:function(){return this._applyModification(n,arguments)},saturate:function(){return this._applyModification(p,arguments)},greyscale:function(){return this._applyModification(d,
arguments)},spin:function(){return this._applyModification(t,arguments)},_applyCombination:function(S,X){return S.apply(null,[this].concat([].slice.call(X)))},analogous:function(){return this._applyCombination(A,arguments)},complement:function(){return this._applyCombination(v,arguments)},monochromatic:function(){return this._applyCombination(z,arguments)},splitcomplement:function(){return this._applyCombination(B,arguments)},triad:function(){return this._applyCombination(w,arguments)},tetrad:function(){return this._applyCombination(y,
arguments)}};q.fromRatio=function(S,X){if("object"==typeof S){var ba={},ca;for(ca in S)S.hasOwnProperty(ca)&&(ba[ca]="a"===ca?S[ca]:D(S[ca]));S=ba}return q(S,X)};q.equals=function(S,X){return S&&X?q(S).toRgbString()==q(X).toRgbString():!1};q.random=function(){return q.fromRatio({r:P(),g:P(),b:P()})};q.mix=function(S,X,ba){ba=0===ba?0:ba||50;S=q(S).toRgb();X=q(X).toRgb();ba/=100;return q({r:(X.r-S.r)*ba+S.r,g:(X.g-S.g)*ba+S.g,b:(X.b-S.b)*ba+S.b,a:(X.a-S.a)*ba+S.a})};q.readability=function(S,X){S=q(S);
X=q(X);return(r.max(S.getLuminance(),X.getLuminance())+.05)/(r.min(S.getLuminance(),X.getLuminance())+.05)};q.isReadable=function(S,X,ba){S=q.readability(S,X);X=!1;var ca=ba||{level:"AA",size:"small"};ba=(ca.level||"AA").toUpperCase();ca=(ca.size||"small").toLowerCase();"AA"!==ba&&"AAA"!==ba&&(ba="AA");"small"!==ca&&"large"!==ca&&(ca="small");switch(ba+ca){case "AAsmall":case "AAAlarge":X=4.5<=S;break;case "AAlarge":X=3<=S;break;case "AAAsmall":X=7<=S}return X};q.mostReadable=function(S,X,ba){var ca=
null,ia=0;ba=ba||{};var ja=ba.includeFallbackColors;var la=ba.level;var da=ba.size;for(var oa=0;oa<X.length;oa++){var sa=q.readability(S,X[oa]);sa>ia&&(ia=sa,ca=q(X[oa]))}if(q.isReadable(S,ca,{level:la,size:da})||!ja)return ca;ba.includeFallbackColors=!1;return q.mostReadable(S,["#fff","#000"],ba)};var T=q.names={aliceblue:"f0f8ff",antiquewhite:"faebd7",aqua:"0ff",aquamarine:"7fffd4",azure:"f0ffff",beige:"f5f5dc",bisque:"ffe4c4",black:"000",blanchedalmond:"ffebcd",blue:"00f",blueviolet:"8a2be2",brown:"a52a2a",
burlywood:"deb887",burntsienna:"ea7e5d",cadetblue:"5f9ea0",chartreuse:"7fff00",chocolate:"d2691e",coral:"ff7f50",cornflowerblue:"6495ed",cornsilk:"fff8dc",crimson:"dc143c",cyan:"0ff",darkblue:"00008b",darkcyan:"008b8b",darkgoldenrod:"b8860b",darkgray:"a9a9a9",darkgreen:"006400",darkgrey:"a9a9a9",darkkhaki:"bdb76b",darkmagenta:"8b008b",darkolivegreen:"556b2f",darkorange:"ff8c00",darkorchid:"9932cc",darkred:"8b0000",darksalmon:"e9967a",darkseagreen:"8fbc8f",darkslateblue:"483d8b",darkslategray:"2f4f4f",
darkslategrey:"2f4f4f",darkturquoise:"00ced1",darkviolet:"9400d3",deeppink:"ff1493",deepskyblue:"00bfff",dimgray:"696969",dimgrey:"696969",dodgerblue:"1e90ff",firebrick:"b22222",floralwhite:"fffaf0",forestgreen:"228b22",fuchsia:"f0f",gainsboro:"dcdcdc",ghostwhite:"f8f8ff",gold:"ffd700",goldenrod:"daa520",gray:"808080",green:"008000",greenyellow:"adff2f",grey:"808080",honeydew:"f0fff0",hotpink:"ff69b4",indianred:"cd5c5c",indigo:"4b0082",ivory:"fffff0",khaki:"f0e68c",lavender:"e6e6fa",lavenderblush:"fff0f5",
lawngreen:"7cfc00",lemonchiffon:"fffacd",lightblue:"add8e6",lightcoral:"f08080",lightcyan:"e0ffff",lightgoldenrodyellow:"fafad2",lightgray:"d3d3d3",lightgreen:"90ee90",lightgrey:"d3d3d3",lightpink:"ffb6c1",lightsalmon:"ffa07a",lightseagreen:"20b2aa",lightskyblue:"87cefa",lightslategray:"789",lightslategrey:"789",lightsteelblue:"b0c4de",lightyellow:"ffffe0",lime:"0f0",limegreen:"32cd32",linen:"faf0e6",magenta:"f0f",maroon:"800000",mediumaquamarine:"66cdaa",mediumblue:"0000cd",mediumorchid:"ba55d3",
mediumpurple:"9370db",mediumseagreen:"3cb371",mediumslateblue:"7b68ee",mediumspringgreen:"00fa9a",mediumturquoise:"48d1cc",mediumvioletred:"c71585",midnightblue:"191970",mintcream:"f5fffa",mistyrose:"ffe4e1",moccasin:"ffe4b5",navajowhite:"ffdead",navy:"000080",oldlace:"fdf5e6",olive:"808000",olivedrab:"6b8e23",orange:"ffa500",orangered:"ff4500",orchid:"da70d6",palegoldenrod:"eee8aa",palegreen:"98fb98",paleturquoise:"afeeee",palevioletred:"db7093",papayawhip:"ffefd5",peachpuff:"ffdab9",peru:"cd853f",
pink:"ffc0cb",plum:"dda0dd",powderblue:"b0e0e6",purple:"800080",rebeccapurple:"663399",red:"f00",rosybrown:"bc8f8f",royalblue:"4169e1",saddlebrown:"8b4513",salmon:"fa8072",sandybrown:"f4a460",seagreen:"2e8b57",seashell:"fff5ee",sienna:"a0522d",silver:"c0c0c0",skyblue:"87ceeb",slateblue:"6a5acd",slategray:"708090",slategrey:"708090",snow:"fffafa",springgreen:"00ff7f",steelblue:"4682b4",tan:"d2b48c",teal:"008080",thistle:"d8bfd8",tomato:"ff6347",turquoise:"40e0d0",violet:"ee82ee",wheat:"f5deb3",white:"fff",
whitesmoke:"f5f5f5",yellow:"ff0",yellowgreen:"9acd32"},O=q.hexNames=function(S){var X={},ba;for(ba in S)S.hasOwnProperty(ba)&&(X[S[ba]]=ba);return X}(T),U={CSS_UNIT:/(?:[-\+]?\d*\.\d+%?)|(?:[-\+]?\d+%?)/,rgb:/rgb[\s|\(]+((?:[-\+]?\d*\.\d+%?)|(?:[-\+]?\d+%?))[,|\s]+((?:[-\+]?\d*\.\d+%?)|(?:[-\+]?\d+%?))[,|\s]+((?:[-\+]?\d*\.\d+%?)|(?:[-\+]?\d+%?))\s*\)?/,rgba:/rgba[\s|\(]+((?:[-\+]?\d*\.\d+%?)|(?:[-\+]?\d+%?))[,|\s]+((?:[-\+]?\d*\.\d+%?)|(?:[-\+]?\d+%?))[,|\s]+((?:[-\+]?\d*\.\d+%?)|(?:[-\+]?\d+%?))[,|\s]+((?:[-\+]?\d*\.\d+%?)|(?:[-\+]?\d+%?))\s*\)?/,
hsl:/hsl[\s|\(]+((?:[-\+]?\d*\.\d+%?)|(?:[-\+]?\d+%?))[,|\s]+((?:[-\+]?\d*\.\d+%?)|(?:[-\+]?\d+%?))[,|\s]+((?:[-\+]?\d*\.\d+%?)|(?:[-\+]?\d+%?))\s*\)?/,hsla:/hsla[\s|\(]+((?:[-\+]?\d*\.\d+%?)|(?:[-\+]?\d+%?))[,|\s]+((?:[-\+]?\d*\.\d+%?)|(?:[-\+]?\d+%?))[,|\s]+((?:[-\+]?\d*\.\d+%?)|(?:[-\+]?\d+%?))[,|\s]+((?:[-\+]?\d*\.\d+%?)|(?:[-\+]?\d+%?))\s*\)?/,hsv:/hsv[\s|\(]+((?:[-\+]?\d*\.\d+%?)|(?:[-\+]?\d+%?))[,|\s]+((?:[-\+]?\d*\.\d+%?)|(?:[-\+]?\d+%?))[,|\s]+((?:[-\+]?\d*\.\d+%?)|(?:[-\+]?\d+%?))\s*\)?/,
hsva:/hsva[\s|\(]+((?:[-\+]?\d*\.\d+%?)|(?:[-\+]?\d+%?))[,|\s]+((?:[-\+]?\d*\.\d+%?)|(?:[-\+]?\d+%?))[,|\s]+((?:[-\+]?\d*\.\d+%?)|(?:[-\+]?\d+%?))[,|\s]+((?:[-\+]?\d*\.\d+%?)|(?:[-\+]?\d+%?))\s*\)?/,hex3:/^#?([0-9a-fA-F]{1})([0-9a-fA-F]{1})([0-9a-fA-F]{1})$/,hex6:/^#?([0-9a-fA-F]{2})([0-9a-fA-F]{2})([0-9a-fA-F]{2})$/,hex4:/^#?([0-9a-fA-F]{1})([0-9a-fA-F]{1})([0-9a-fA-F]{1})([0-9a-fA-F]{1})$/,hex8:/^#?([0-9a-fA-F]{2})([0-9a-fA-F]{2})([0-9a-fA-F]{2})([0-9a-fA-F]{2})$/};"undefined"!==typeof N&&N.exports?
N.exports=q:window.tinycolor=q})(Math)},{}],577:[function(b,N,I){function r(m){if(m.length){if(m instanceof Float32Array)return m;var l=new Float32Array(m);l.set(m);return l}q[0]=m;return q[0]}N.exports=r;N.exports.float32=N.exports.float=r;N.exports.fract32=N.exports.fract=function(m){if(m.length){for(var l=r(m),a=0,h=l.length;a<h;a++)l[a]=m[a]-l[a];return l}return r(m-r(m))};var q=new Float32Array(1)},{}],578:[function(b,N,I){function r(a,h){h=m(getComputedStyle(a).getPropertyValue(h));return h[0]*
q(h[1],a)}function q(a,h){h=h||document.body;a=(a||"px").trim().toLowerCase();if(h===window||h===document)h=document.body;switch(a){case "%":return h.clientHeight/100;case "ch":case "ex":var g=document.createElement("div");g.style["font-size"]="128"+a;h.appendChild(g);a=r(g,"font-size")/128;h.removeChild(g);return a;case "em":return r(h,"font-size");case "rem":return r(document.body,"font-size");case "vw":return window.innerWidth/100;case "vh":return window.innerHeight/100;case "vmin":return Math.min(window.innerWidth,
window.innerHeight)/100;case "vmax":return Math.max(window.innerWidth,window.innerHeight)/100;case "in":return l;case "cm":return l/2.54;case "mm":return l/25.4;case "pt":return l/72;case "pc":return l/6}return 1}var m=b("parse-unit");N.exports=q;var l=96},{"parse-unit":506}],579:[function(b,N,I){(function(r,q){"object"===typeof I&&"undefined"!==typeof N?q(I):(r=r||self,q(r.topojson=r.topojson||{}))})(this,function(r){function q(k){return k}function m(k){if(null==k)return q;var t,v,w=k.scale[0],y=
k.scale[1],B=k.translate[0],A=k.translate[1];return function(z,E){E||(t=v=0);E=2;var C=z.length,u=Array(C);u[0]=(t+=z[0])*w+B;for(u[1]=(v+=z[1])*y+A;E<C;)u[E]=z[E],++E;return u}}function l(k){function t(C){C=w(C);C[0]<B&&(B=C[0]);C[0]>z&&(z=C[0]);C[1]<A&&(A=C[1]);C[1]>E&&(E=C[1])}function v(C){switch(C.type){case "GeometryCollection":C.geometries.forEach(v);break;case "Point":t(C.coordinates);break;case "MultiPoint":C.coordinates.forEach(t)}}var w=m(k.transform),y,B=Infinity,A=B,z=-B,E=-B;k.arcs.forEach(function(C){for(var u=
-1,D=C.length,G;++u<D;)G=w(C[u],u),G[0]<B&&(B=G[0]),G[0]>z&&(z=G[0]),G[1]<A&&(A=G[1]),G[1]>E&&(E=G[1])});for(y in k.objects)v(k.objects[y]);return[B,A,z,E]}function a(k,t){var v=t.id,w=t.bbox,y=null==t.properties?{}:t.properties;k=h(k,t);return null==v&&null==w?{type:"Feature",properties:y,geometry:k}:null==w?{type:"Feature",id:v,properties:y,geometry:k}:{type:"Feature",id:v,bbox:w,properties:y,geometry:k}}function h(k,t){function v(C){return z(C)}function w(C){for(var u=[],D=0,G=C.length;D<G;++D){var J=
C[D],L=u;L.length&&L.pop();for(var K=E[0>J?~J:J],H=0,Q=K.length;H<Q;++H)L.push(z(K[H],H));if(0>J)for(J=L,L=J.length,K=L-Q;K<--L;)Q=J[K],J[K++]=J[L],J[L]=Q}2>u.length&&u.push(u[0]);return u}function y(C){for(C=w(C);4>C.length;)C.push(C[0]);return C}function B(C){return C.map(y)}function A(C){var u=C.type;switch(u){case "GeometryCollection":return{type:u,geometries:C.geometries.map(A)};case "Point":C=z(C.coordinates);break;case "MultiPoint":C=C.coordinates.map(v);break;case "LineString":C=w(C.arcs);
break;case "MultiLineString":C=C.arcs.map(w);break;case "Polygon":C=B(C.arcs);break;case "MultiPolygon":C=C.arcs.map(B);break;default:return null}return{type:u,coordinates:C}}var z=m(k.transform),E=k.arcs;return A(t)}function g(k,t){function v(C){var u=k.arcs[0>C?~C:C],D=u[0];if(k.transform){var G=[0,0];u.forEach(function(J){G[0]+=J[0];G[1]+=J[1]})}else G=u[u.length-1];return 0>C?[G,D]:[D,G]}function w(C,u){for(var D in C){var G=C[D];delete u[G.start];delete G.start;delete G.end;G.forEach(function(J){y[0>
J?~J:J]=1});z.push(G)}}var y={},B={},A={},z=[],E=-1;t.forEach(function(C,u){var D=k.arcs[0>C?~C:C];3>D.length&&!D[1][0]&&!D[1][1]&&(D=t[++E],t[E]=C,t[u]=D)});t.forEach(function(C){var u=v(C),D=u[0],G=u[1];(u=A[D])?(delete A[u.end],u.push(C),u.end=G,(C=B[G])?(delete B[C.start],D=C===u?u:u.concat(C),B[D.start=u.start]=A[D.end=C.end]=D):B[u.start]=A[u.end]=u):(u=B[G])?(delete B[u.start],u.unshift(C),u.start=D,(C=A[D])?(delete A[C.end],D=C===u?u:C.concat(u),B[D.start=C.start]=A[D.end=u.end]=D):B[u.start]=
A[u.end]=u):(u=[C],B[u.start=D]=A[u.end=G]=u)});w(A,B);w(B,A);t.forEach(function(C){y[0>C?~C:C]||z.push([C])});return z}function n(k,t,v){var w;if(1<arguments.length)var y=p(k,t,v);else{var B=0;for(y=Array(w=k.arcs.length);B<w;++B)y[B]=B}return{type:"MultiLineString",arcs:g(k,y)}}function p(k,t,v){function w(u){var D=0>u?~u:u;(E[D]||(E[D]=[])).push({i:u,g:C})}function y(u){u.forEach(w)}function B(u){u.forEach(y)}function A(u){switch(C=u,u.type){case "GeometryCollection":u.geometries.forEach(A);break;
case "LineString":y(u.arcs);break;case "MultiLineString":case "Polygon":B(u.arcs);break;case "MultiPolygon":u.arcs.forEach(B)}}var z=[],E=[],C;A(t);E.forEach(null==v?function(u){z.push(u[0].i)}:function(u){v(u[0].g,u[u.length-1].g)&&z.push(u[0].i)});return z}function d(k,t){function v(E){switch(E.type){case "GeometryCollection":E.geometries.forEach(v);break;case "Polygon":w(E.arcs);break;case "MultiPolygon":E.arcs.forEach(w)}}function w(E){E.forEach(function(C){C.forEach(function(u){(B[u=0>u?~u:u]||
(B[u]=[])).push(E)})});A.push(E)}function y(E){E=h(k,{type:"Polygon",arcs:[E]}).coordinates[0];for(var C=-1,u=E.length,D,G=E[u-1],J=0;++C<u;)D=G,G=E[C],J+=D[0]*G[1]-D[1]*G[0];return Math.abs(J)}var B={},A=[],z=[];t.forEach(v);A.forEach(function(E){if(!E._){var C=[],u=[E];E._=1;for(z.push(C);E=u.pop();)C.push(E),E.forEach(function(D){D.forEach(function(G){B[0>G?~G:G].forEach(function(J){J._||(J._=1,u.push(J))})})})}});A.forEach(function(E){delete E._});return{type:"MultiPolygon",arcs:z.map(function(E){var C=
[];E.forEach(function(J){J.forEach(function(L){L.forEach(function(K){2>B[0>K?~K:K].length&&C.push(K)})})});C=g(k,C);if(1<(E=C.length))for(var u=1,D=y(C[0]),G;u<E;++u)(G=y(C[u]))>D&&(D=C[0],C[0]=C[u],C[u]=D,D=G);return C}).filter(function(E){return 0<E.length})}}function e(k,t){for(var v=0,w=k.length;v<w;){var y=v+w>>>1;k[y]<t?v=y+1:w=y}return v}function f(k){if(null==k)return q;var t,v,w=k.scale[0],y=k.scale[1],B=k.translate[0],A=k.translate[1];return function(z,E){E||(t=v=0);E=2;var C=z.length,u=
Array(C),D=Math.round((z[0]-B)/w),G=Math.round((z[1]-A)/y);u[0]=D-t;t=D;u[1]=G-v;for(v=G;E<C;)u[E]=z[E],++E;return u}}r.bbox=l;r.feature=function(k,t){"string"===typeof t&&(t=k.objects[t]);return"GeometryCollection"===t.type?{type:"FeatureCollection",features:t.geometries.map(function(v){return a(k,v)})}:a(k,t)};r.merge=function(k){return h(k,d.apply(this,arguments))};r.mergeArcs=d;r.mesh=function(k){return h(k,n.apply(this,arguments))};r.meshArcs=n;r.neighbors=function(k){function t(L,K){L.forEach(function(H){0>
H&&(H=~H);var Q=y[H];Q?Q.push(K):y[H]=[K]})}function v(L,K){L.forEach(function(H){t(H,K)})}function w(L,K){if("GeometryCollection"===L.type)L.geometries.forEach(function(H){w(H,K)});else if(L.type in A)A[L.type](L.arcs,K)}var y={},B=k.map(function(){return[]}),A={LineString:t,MultiLineString:v,Polygon:v,MultiPolygon:function(L,K){L.forEach(function(H){v(H,K)})}};k.forEach(w);for(var z in y){k=y[z];for(var E=k.length,C=0;C<E;++C)for(var u=C+1;u<E;++u){var D=k[C],G=k[u],J;(J=B[D])[z=e(J,G)]!==G&&J.splice(z,
0,G);(J=B[G])[z=e(J,D)]!==D&&J.splice(z,0,D)}}return B};r.quantize=function(k,t){function v(D){return C(D)}function w(D){switch(D.type){case "GeometryCollection":var G={type:"GeometryCollection",geometries:D.geometries.map(w)};break;case "Point":G={type:"Point",coordinates:C(D.coordinates)};break;case "MultiPoint":G={type:"MultiPoint",coordinates:D.coordinates.map(v)};break;default:return D}null!=D.id&&(G.id=D.id);null!=D.bbox&&(G.bbox=D.bbox);null!=D.properties&&(G.properties=D.properties);return G}
if(k.transform)throw Error("already quantized");if(t&&t.scale)var y=k.bbox;else{if(!(2<=(E=Math.floor(t))))throw Error("n must be 2");y=k.bbox||l(k);t=y[0];var B=y[1],A=y[2],z=y[3],E;t={scale:[A-t?(A-t)/(E-1):1,z-B?(z-B)/(E-1):1],translate:[t,B]}}var C=f(t),u;B=k.objects;A={};for(u in B)A[u]=w(B[u]);return{type:"Topology",bbox:y,transform:t,objects:A,arcs:k.arcs.map(function(D){var G=0,J=1,L=D.length,K,H=Array(L);for(H[0]=C(D[0],0);++G<L;)if((K=C(D[G],G))[0]||K[1])H[J++]=K;1===J&&(H[J++]=[0,0]);
H.length=J;return H})}};r.transform=m;r.untransform=f;Object.defineProperty(r,"__esModule",{value:!0})})},{}],580:[function(b,N,I){N.exports=function(l){if(0>l)return[];if(0===l)return[[0]];for(var a=Math.round(m(l+1))|0,h=[],g=0;g<a;++g){for(var n=r.unrank(l,g),p=[0],d=0,e=0;e<n.length;++e)d+=1<<n[e],p.push(d);1>q(n)&&(p[0]=d,p[l]=0);h.push(p)}return h};var r=b("permutation-rank"),q=b("permutation-parity"),m=b("gamma")},{gamma:248,"permutation-parity":509,"permutation-rank":510}],581:[function(b,
N,I){function r(e,f,k){return Math.sqrt(Math.pow(e,2)+Math.pow(f,2)+Math.pow(k,2))}function q(e){var f=Math.abs(e[0]),k=Math.abs(e[1]),t=Math.abs(e[2]),v=[0,0,0];f>Math.max(k,t)?v[2]=1:k>Math.max(f,t)?v[0]=1:v[1]=1;for(t=k=f=0;3>t;++t)f+=e[t]*e[t],k+=v[t]*e[t];for(t=0;3>t;++t)v[t]-=k/f*e[t];n(v,v);return v}function m(e,f,k,t,v,w,y,B){this.center=l(k);this.up=l(t);this.right=l(v);this.radius=l([w]);this.angle=l([y,B]);this.angle.bounds=[[-Infinity,-Math.PI/2],[Infinity,Math.PI/2]];this.setDistanceLimits(e,
f);this.computedCenter=this.center.curve(0);this.computedUp=this.up.curve(0);this.computedRight=this.right.curve(0);this.computedRadius=this.radius.curve(0);this.computedAngle=this.angle.curve(0);this.computedToward=[0,0,0];this.computedEye=[0,0,0];this.computedMatrix=Array(16);for(e=0;16>e;++e)this.computedMatrix[e]=.5;this.recalcMatrix(0)}N.exports=function(e){e=e||{};var f=e.center||[0,0,0],k=e.up||[0,1,0],t=e.right||q(k),v=e.radius||1,w=e.theta||0,y=e.phi||0;f=[].slice.call(f,0,3);k=[].slice.call(k,
0,3);n(k,k);t=[].slice.call(t,0,3);n(t,t);"eye"in e&&(v=e.eye,w=[v[0]-f[0],v[1]-f[1],v[2]-f[2]],g(t,w,k),1E-6>r(t[0],t[1],t[2])?t=q(k):n(t,t),v=r(w[0],w[1],w[2]),y=p(k,w)/v,w=p(t,w)/v,y=Math.acos(y),w=Math.acos(w));v=Math.log(v);return new m(e.zoomMin,e.zoomMax,f,k,t,v,w,y)};var l=b("filtered-vector"),a=b("gl-mat4/invert"),h=b("gl-mat4/rotate"),g=b("gl-vec3/cross"),n=b("gl-vec3/normalize"),p=b("gl-vec3/dot");b=m.prototype;b.setDistanceLimits=function(e,f){e=0<e?Math.log(e):-Infinity;f=0<f?Math.log(f):
Infinity;f=Math.max(f,e);this.radius.bounds[0][0]=e;this.radius.bounds[1][0]=f};b.getDistanceLimits=function(e){var f=this.radius.bounds[0];return e?(e[0]=Math.exp(f[0][0]),e[1]=Math.exp(f[1][0]),e):[Math.exp(f[0][0]),Math.exp(f[1][0])]};b.recalcMatrix=function(e){this.center.curve(e);this.up.curve(e);this.right.curve(e);this.radius.curve(e);this.angle.curve(e);for(var f=this.computedUp,k=this.computedRight,t=0,v=0,w=0;3>w;++w)v+=f[w]*k[w],t+=f[w]*f[w];var y=Math.sqrt(t);for(w=e=0;3>w;++w)k[w]-=f[w]*
v/t,e+=k[w]*k[w],f[w]/=y;e=Math.sqrt(e);for(w=0;3>w;++w)k[w]/=e;var B=this.computedToward;g(B,f,k);n(B,B);e=Math.exp(this.computedRadius[0]);y=this.computedAngle[0];t=this.computedAngle[1];v=Math.cos(y);y=Math.sin(y);var A=Math.cos(t),z=Math.sin(t);t=this.computedCenter;var E=v*A,C=y*A,u=-v*z,D=-y*z;v=this.computedEye;y=this.computedMatrix;for(w=0;3>w;++w){var G=E*k[w]+C*B[w]+z*f[w];y[4*w+1]=u*k[w]+D*B[w]+A*f[w];y[4*w+2]=G;y[4*w+3]=0}k=y[1];w=y[5];z=y[9];B=y[2];A=y[6];E=y[10];f=w*E-z*A;z=z*B-k*E;
k=k*A-w*B;w=r(f,z,k);y[0]=f/w;y[4]=z/w;y[8]=k/w;for(w=0;3>w;++w)v[w]=t[w]+y[2+4*w]*e;for(w=0;3>w;++w){for(t=e=0;3>t;++t)e+=y[w+4*t]*v[t];y[12+w]=-e}y[15]=1};b.getMatrix=function(e,f){this.recalcMatrix(e);e=this.computedMatrix;if(f){for(var k=0;16>k;++k)f[k]=e[k];return f}return e};var d=[0,0,0];b.rotate=function(e,f,k,t){this.angle.move(e,f,k);if(t){this.recalcMatrix(e);f=this.computedMatrix;d[0]=f[2];d[1]=f[6];d[2]=f[10];k=this.computedUp;for(var v=this.computedRight,w=this.computedToward,y=0;3>
y;++y)f[4*y]=k[y],f[4*y+1]=v[y],f[4*y+2]=w[y];h(f,f,t,d);for(y=0;3>y;++y)k[y]=f[4*y],v[y]=f[4*y+1];this.up.set(e,k[0],k[1],k[2]);this.right.set(e,v[0],v[1],v[2])}};b.pan=function(e,f,k,t){f=f||0;k=k||0;t=t||0;this.recalcMatrix(e);var v=this.computedMatrix,w=v[1],y=v[5],B=v[9],A=r(w,y,B);w/=A;y/=A;B/=A;A=v[0];var z=v[4];v=v[8];var E=A*w+z*y+v*B;A-=w*E;z-=y*E;v-=B*E;E=r(A,z,v);this.center.move(e,A/E*f+w*k,z/E*f+y*k,v/E*f+B*k);f=Math.exp(this.computedRadius[0]);f=Math.max(1E-4,f+t);this.radius.set(e,
Math.log(f))};b.translate=function(e,f,k,t){this.center.move(e,f||0,k||0,t||0)};b.setMatrix=function(e,f,k,t){var v=1;"number"===typeof k&&(v=k|0);if(0>v||3<v)v=1;var w=(v+2)%3;f||(this.recalcMatrix(e),f=this.computedMatrix);k=f[v];var y=f[v+4],B=f[v+8];if(t){t=Math.abs(k);var A=Math.abs(B),z=Math.max(t,Math.abs(y),A);t===z?(k=0>k?-1:1,y=B=0):A===z?(B=0>B?-1:1,k=y=0):(y=0>y?-1:1,k=B=0)}else t=r(k,y,B),k/=t,y/=t,B/=t;t=f[w];A=f[w+4];w=f[w+8];z=t*k+A*y+w*B;t-=k*z;A-=y*z;w-=B*z;z=r(t,A,w);t/=z;A/=z;
w/=z;z=y*w-B*A;var E=B*t-k*w,C=k*A-y*t,u=r(z,E,C);z/=u;E/=u;C/=u;this.center.jump(e,G,J,L);this.radius.idle(e);this.up.jump(e,k,y,B);this.right.jump(e,t,A,w);if(2===v)J=f[1],L=f[5],k=f[9],G=0>D?-Math.PI/2:Math.PI/2,J=Math.atan2(J*z+L*E+k*C,J*t+L*A+k*w);else{J=f[2];L=f[6];var D=f[10];G=Math.asin(Math.min(1,Math.max(-1,J*k+L*y+D*B)));J=Math.atan2(J*z+L*E+D*C,J*t+L*A+D*w)}this.angle.jump(e,J,G);this.recalcMatrix(e);D=f[2];k=f[6];y=f[10];L=this.computedMatrix;a(L,f);f=L[15];var G=L[12]/f,J=L[13]/f,L=
L[14]/f;f=Math.exp(this.computedRadius[0]);this.center.jump(e,G-D*f,J-k*f,L-y*f)};b.lastT=function(){return Math.max(this.center.lastT(),this.up.lastT(),this.right.lastT(),this.radius.lastT(),this.angle.lastT())};b.idle=function(e){this.center.idle(e);this.up.idle(e);this.right.idle(e);this.radius.idle(e);this.angle.idle(e)};b.flush=function(e){this.center.flush(e);this.up.flush(e);this.right.flush(e);this.radius.flush(e);this.angle.flush(e)};b.setDistance=function(e,f){0<f&&this.radius.set(e,Math.log(f))};
b.lookAt=function(e,f,k,t){this.recalcMatrix(e);f=f||this.computedEye;k=k||this.computedCenter;t=t||this.computedUp;var v=t[0],w=t[1];t=t[2];var y=r(v,w,t);if(!(1E-6>y)){v/=y;w/=y;t/=y;y=f[0]-k[0];var B=f[1]-k[1];f=f[2]-k[2];var A=r(y,B,f);if(!(1E-6>A)){y/=A;B/=A;f/=A;var z=this.computedRight,E=z[0],C=z[1];z=z[2];var u=v*E+w*C+t*z;E-=u*v;C-=u*w;z-=u*t;u=r(E,C,z);if(.01>u&&(E=w*f-t*B,C=t*y-v*f,z=v*B-w*y,u=r(E,C,z),1E-6>u))return;E/=u;C/=u;z/=u;this.up.set(e,v,w,t);this.right.set(e,E,C,z);this.center.set(e,
k[0],k[1],k[2]);this.radius.set(e,Math.log(A));k=w*z-t*C;A=t*E-v*z;u=v*C-w*E;var D=r(k,A,u);v=Math.asin(Math.min(1,Math.max(-1,v*y+w*B+t*f)));w=Math.atan2(k/D*y+A/D*B+u/D*f,E*y+C*B+z*f);y=this.angle._state;t=y[y.length-1];y=y[y.length-2];t%=2*Math.PI;B=Math.abs(t-w);f=Math.abs(t-2*Math.PI-w);Math.abs(t+2*Math.PI-w)<B&&(t+=2*Math.PI);f<B&&(t-=2*Math.PI);this.angle.jump(this.angle.lastT(),t,y);this.angle.set(e,w,v)}}}},{"filtered-vector":242,"gl-mat4/invert":293,"gl-mat4/rotate":299,"gl-vec3/cross":365,
"gl-vec3/dot":370,"gl-vec3/normalize":387}],582:[function(b,N,I){N.exports=function(q,m,l){var a=q*m,h=r*q;h-=h-q;q-=h;var g=r*m;g-=g-m;m-=g;m=q*m-(a-h*g-q*g-h*m);return l?(l[0]=m,l[1]=a,l):[m,a]};var r=+(Math.pow(2,27)+1)},{}],583:[function(b,N,I){N.exports=function(r,q,m){var l=r+q,a=l-r;q-=a;r-=l-a;return m?(m[0]=r+q,m[1]=l,m):[r+q,l]}},{}],584:[function(b,N,I){var r=b("../prototype/is");N.exports=function(q){if("function"!==typeof q||!hasOwnProperty.call(q,"length"))return!1;try{if("number"!==
typeof q.length||"function"!==typeof q.call||"function"!==typeof q.apply)return!1}catch(m){return!1}return!r(q)}},{"../prototype/is":591}],585:[function(b,N,I){var r=b("../value/is"),q=b("../object/is"),m=b("../string/coerce"),l=b("./to-short-string");N.exports=function(a,h,g){if(!q(g))throw new TypeError(h.replace("%v",l(a)));if(!r(a)){if("default"in g)return g["default"];if(g.isOptional)return null}g=m(g.errorMessage);r(g)||(g=h);throw new TypeError(g.replace("%v",l(a)));}},{"../object/is":588,
"../string/coerce":592,"../value/is":594,"./to-short-string":587}],586:[function(b,N,I){N.exports=function(r){try{return r.toString()}catch(q){try{return String(r)}catch(m){return null}}}},{}],587:[function(b,N,I){var r=b("./safe-to-string"),q=/[\n\r\u2028\u2029]/g;N.exports=function(m){m=r(m);if(null===m)return"\x3cNon-coercible to string value\x3e";100<m.length&&(m=m.slice(0,99)+"");return m=m.replace(q,function(l){switch(l){case "\n":return"\\n";case "\r":return"\\r";case "\u2028":return"\\u2028";
case "\u2029":return"\\u2029";default:throw Error("Unexpected character");}})}},{"./safe-to-string":586}],588:[function(b,N,I){var r=b("../value/is"),q={object:!0,"function":!0,undefined:!0};N.exports=function(m){return r(m)?hasOwnProperty.call(q,typeof m):!1}},{"../value/is":594}],589:[function(b,N,I){var r=b("../lib/resolve-exception"),q=b("./is");N.exports=function(m,l){return q(m)?m:r(m,"%v is not a plain function",l)}},{"../lib/resolve-exception":585,"./is":590}],590:[function(b,N,I){var r=b("../function/is"),
q=/^\s*class[\s{/}]/,m=Function.prototype.toString;N.exports=function(l){return!r(l)||q.test(m.call(l))?!1:!0}},{"../function/is":584}],591:[function(b,N,I){var r=b("../object/is");N.exports=function(q){if(!r(q))return!1;try{return q.constructor?q.constructor.prototype===q:!1}catch(m){return!1}}},{"../object/is":588}],592:[function(b,N,I){var r=b("../value/is"),q=b("../object/is"),m=Object.prototype.toString;N.exports=function(l){if(!r(l))return null;if(q(l)){var a=l.toString;if("function"!==typeof a||
a===m)return null}return""+l}},{"../object/is":588,"../value/is":594}],593:[function(b,N,I){var r=b("../lib/resolve-exception"),q=b("./is");N.exports=function(m,l){return q(m)?m:r(m,"Cannot use %v",l)}},{"../lib/resolve-exception":585,"./is":594}],594:[function(b,N,I){N.exports=function(r){return void 0!==r&&null!==r}},{}],595:[function(b,N,I){(function(r){(function(){function q(J){if(J){var L=y.log2(J.length||J.byteLength);D[L].push(J)}}function m(J){J=y.nextPow2(J);var L=y.log2(J);L=D[L];return 0<
L.length?L.pop():new ArrayBuffer(J)}function l(J){return new Uint8Array(m(J),0,J)}function a(J){return new Uint16Array(m(2*J),0,J)}function h(J){return new Uint32Array(m(4*J),0,J)}function g(J){return new Int8Array(m(J),0,J)}function n(J){return new Int16Array(m(2*J),0,J)}function p(J){return new Int32Array(m(4*J),0,J)}function d(J){return new Float32Array(m(4*J),0,J)}function e(J){return new Float64Array(m(8*J),0,J)}function f(J){return z?new Uint8ClampedArray(m(J),0,J):l(J)}function k(J){return E?
new BigUint64Array(m(8*J),0,J):null}function t(J){return C?new BigInt64Array(m(8*J),0,J):null}function v(J){return new DataView(m(J),0,J)}function w(J){J=y.nextPow2(J);var L=y.log2(J);L=G[L];return 0<L.length?L.pop():new A(J)}var y=b("bit-twiddle"),B=b("dup"),A=b("buffer").Buffer;r.__TYPEDARRAY_POOL||(r.__TYPEDARRAY_POOL={UINT8:B([32,0]),UINT16:B([32,0]),UINT32:B([32,0]),BIGUINT64:B([32,0]),INT8:B([32,0]),INT16:B([32,0]),INT32:B([32,0]),BIGINT64:B([32,0]),FLOAT:B([32,0]),DOUBLE:B([32,0]),DATA:B([32,
0]),UINT8C:B([32,0]),BUFFER:B([32,0])});var z="undefined"!==typeof Uint8ClampedArray,E="undefined"!==typeof BigUint64Array,C="undefined"!==typeof BigInt64Array,u=r.__TYPEDARRAY_POOL;u.UINT8C||(u.UINT8C=B([32,0]));u.BIGUINT64||(u.BIGUINT64=B([32,0]));u.BIGINT64||(u.BIGINT64=B([32,0]));u.BUFFER||(u.BUFFER=B([32,0]));var D=u.DATA,G=u.BUFFER;I.free=function(J){if(A.isBuffer(J))G[y.log2(J.length)].push(J);else if("[object ArrayBuffer]"!==Object.prototype.toString.call(J)&&(J=J.buffer),J){var L=y.log2(J.length||
J.byteLength)|0;D[L].push(J)}};I.freeUint8=I.freeUint16=I.freeUint32=I.freeBigUint64=I.freeInt8=I.freeInt16=I.freeInt32=I.freeBigInt64=I.freeFloat32=I.freeFloat=I.freeFloat64=I.freeDouble=I.freeUint8Clamped=I.freeDataView=function(J){q(J.buffer)};I.freeArrayBuffer=q;I.freeBuffer=function(J){G[y.log2(J.length)].push(J)};I.malloc=function(J,L){if(void 0===L||"arraybuffer"===L)return m(J);switch(L){case "uint8":return l(J);case "uint16":return a(J);case "uint32":return h(J);case "int8":return g(J);case "int16":return n(J);
case "int32":return p(J);case "float":case "float32":return d(J);case "double":case "float64":return e(J);case "uint8_clamped":return f(J);case "bigint64":return t(J);case "biguint64":return k(J);case "buffer":return w(J);case "data":case "dataview":return v(J)}return null};I.mallocArrayBuffer=m;I.mallocUint8=l;I.mallocUint16=a;I.mallocUint32=h;I.mallocInt8=g;I.mallocInt16=n;I.mallocInt32=p;I.mallocFloat32=I.mallocFloat=d;I.mallocFloat64=I.mallocDouble=e;I.mallocUint8Clamped=f;I.mallocBigUint64=k;
I.mallocBigInt64=t;I.mallocDataView=v;I.mallocBuffer=w;I.clearCache=function(){for(var J=0;32>J;++J)u.UINT8[J].length=0,u.UINT16[J].length=0,u.UINT32[J].length=0,u.INT8[J].length=0,u.INT16[J].length=0,u.INT32[J].length=0,u.FLOAT[J].length=0,u.DOUBLE[J].length=0,u.BIGUINT64[J].length=0,u.BIGINT64[J].length=0,u.UINT8C[J].length=0,D[J].length=0,G[J].length=0}}).call(this)}).call(this,"undefined"!==typeof od?od:"undefined"!==typeof self?self:"undefined"!==typeof window?window:{})},{"bit-twiddle":97,buffer:111,
dup:176}],596:[function(b,N,I){function r(q){this.roots=Array(q);this.ranks=Array(q);for(var m=0;m<q;++m)this.roots[m]=m,this.ranks[m]=0}"use restrict";N.exports=r;b=r.prototype;Object.defineProperty(b,"length",{get:function(){return this.roots.length}});b.makeSet=function(){var q=this.roots.length;this.roots.push(q);this.ranks.push(0);return q};b.find=function(q){for(var m=q,l=this.roots;l[q]!==q;)q=l[q];for(;l[m]!==q;){var a=l[m];l[m]=q;m=a}return q};b.link=function(q,m){q=this.find(q);m=this.find(m);
if(q!==m){var l=this.ranks,a=this.roots,h=l[q],g=l[m];h<g?a[q]=m:g<h?a[m]=q:(a[m]=q,++l[q])}}},{}],597:[function(b,N,I){N.exports=function(r,q,m){if(0===r.length)return r;if(q){m||r.sort(q);m=1;for(var l=r.length,a=r[0],h,g=1;g<l;++g)h=a,a=r[g],q(a,h)&&(g===m?m++:r[m++]=a);r.length=m;return r}m||r.sort();q=1;m=r.length;l=r[0];for(h=1;h<m;++h)a=l,l=r[h],l!==a&&(h===q?q++:r[q++]=l);r.length=q;return r}},{}],598:[function(b,N,I){var r=/['"]/;N.exports=function(q){if(!q)return"";r.test(q.charAt(0))&&
(q=q.substr(1));r.test(q.charAt(q.length-1))&&(q=q.substr(0,q.length-1));return q}},{}],599:[function(b,N,I){N.exports=function(r,q,m){Array.isArray(m)||(m=[].slice.call(arguments,2));for(var l=0,a=m.length;l<a;l++){var h=m[l],g;for(g in h)if((void 0===q[g]||Array.isArray(q[g])||r[g]!==q[g])&&g in q){if(!0===h[g])var n=q[g];else if(!1===h[g])continue;else if("function"===typeof h[g]&&(n=h[g](q[g],r,q),void 0===n))continue;r[g]=n}}return r}},{}],600:[function(b,N,I){N.exports=function(l,a){if("object"!==
typeof a||null===a)a={};return r(l,a.canvas||q,a.context||m,a)};var r=b("./lib/vtext"),q=null,m=null;"undefined"!==typeof document&&(q=document.createElement("canvas"),q.width=8192,q.height=1024,m=q.getContext("2d"))},{"./lib/vtext":601}],601:[function(b,N,I){function r(C,u,D,G){var J="\x3c"+C+"\x3e";C="\x3c/"+C+"\x3e";for(var L=J.length,K=C.length,H=u[0]===y||u[0]===z,Q=0,M;-1<Q;){Q=D.indexOf(J,Q);if(-1===Q)break;M=D.indexOf(C,Q+L);if(-1===M)break;if(M<=Q)break;for(var P=Q;P<M+K;++P)if(P<Q+L||P>=
M)G[P]=null,D=D.substr(0,P)+" "+D.substr(P+1);else if(null!==G[P]){var T=G[P].indexOf(u[0]);-1===T?G[P]+=u:H&&(G[P]=G[P].substr(0,T+1)+(1+parseInt(G[P][T+1]))+G[P].substr(T+2))}Q+=L;Q=D.substr(Q,M-Q).indexOf(J);Q=-1!==Q?Q:M+K}return G}function q(C,u,D){for(var G=u.textAlign||"start",J=u.textBaseline||"alphabetic",L=[1073741824,1073741824],K=[0,0],H=C.length,Q=0;Q<H;++Q)for(var M=C[Q],P=0;2>P;++P)L[P]=Math.min(L[P],M[P])|0,K[P]=Math.max(K[P],M[P])|0;var T=0;switch(G){case "center":T=-.5*(L[0]+K[0]);
break;case "right":case "end":T=-K[0];break;case "left":case "start":T=-L[0];break;default:throw Error("vectorize-text: Unrecognized textAlign: '"+G+"'");}var O=0;switch(J){case "hanging":case "top":O=-L[1];break;case "middle":O=-.5*(L[1]+K[1]);break;case "alphabetic":case "ideographic":O=-3*D;break;case "bottom":O=-K[1];break;default:throw Error("vectorize-text: Unrecoginized textBaseline: '"+J+"'");}var U=1/D;"lineHeight"in u?U*=+u.lineHeight:"width"in u?U=u.width/(K[0]-L[0]):"height"in u&&(U=u.height/
(K[1]-L[1]));return C.map(function(S){return[U*(S[0]+T),U*(S[1]+O)]})}function m(C,u,D,G,J,L){function K(){if(""!==ca){var sa=u.measureText(ca).width;u.fillText(ca,S+ja,X+la);ja+=sa}}function H(){return""+Math.round(da)+"px "}function Q(sa,ma){var qa=""+u.font;if(!0===L.subscripts){var pa=sa.indexOf(z),na=ma.indexOf(z);pa=-1<pa?parseInt(sa[1+pa]):0;na=-1<na?parseInt(ma[1+na]):0;pa!==na&&(qa=qa.replace(H(),"?px "),da*=Math.pow(.75,na-pa),qa=qa.replace("?px ",H()));la+=.25*U*(na-pa)}!0===L.superscripts&&
(pa=sa.indexOf(y),na=ma.indexOf(y),pa=-1<pa?parseInt(sa[1+pa]):0,na=-1<na?parseInt(ma[1+na]):0,pa!==na&&(qa=qa.replace(H(),"?px "),da*=Math.pow(.75,na-pa),qa=qa.replace("?px ",H())),la-=.25*U*(na-pa));!0===L.bolds&&(na=-1<sa.indexOf(k),pa=-1<ma.indexOf(k),!na&&pa&&(qa=ka?qa.replace("italic ","italic bold "):"bold "+qa),na&&!pa&&(qa=qa.replace("bold ","")));if(!0===L.italics){var ka=-1<sa.indexOf(v);sa=-1<ma.indexOf(v);!ka&&sa&&(qa="italic "+qa);ka&&!sa&&(qa=qa.replace("italic ",""))}u.font=qa}D=D.replace(/\n/g,
"");D=!0===L.breaklines?D.replace(/<br>/g,"\n"):D.replace(/<br>/g," ");var M="",P=[];for(ba=0;ba<D.length;++ba)P[ba]=M;!0===L.bolds&&(P=r(f,k,D,P));!0===L.italics&&(P=r(t,v,D,P));!0===L.superscripts&&(P=r(w,B,D,P));!0===L.subscripts&&(P=r(A,E,D,P));var T=[],O="";for(ba=0;ba<D.length;++ba)null!==P[ba]&&(O+=D[ba],T.push(P[ba]));P=O.split("\n");D=P.length;var U=Math.round(J*G),S=G,X=2*G;J=0;ba=D*U+X;C.height<ba&&(C.height=ba);u.fillStyle="#000";u.fillRect(0,0,C.width,C.height);u.fillStyle="#fff";var ba;
O=0;var ca="";for(C=0;C<D;++C){var ia=P[C]+"\n";var ja=0;var la=C*U;var da=G;ca="";for(ba=0;ba<ia.length;++ba){var oa=ba+O<T.length?T[ba+O]:T[T.length-1];M===oa?ca+=ia[ba]:(K(),ca=ia[ba],void 0!==oa&&(Q(M,oa),M=oa))}K();O+=ia.length;ba=Math.round(ja+2*S)|0;J<ba&&(J=ba)}G=J;M=X+U*D;return g(u.getImageData(0,0,G,M).data,[M,G,4]).pick(-1,-1,0).transpose(1,0)}function l(C,u,D,G){C=h(C,128);G=G?n(C.cells,C.positions,.25):{edges:C.cells,positions:C.positions};D=q(G.positions,u,D);C=G.edges;G="ccw"===u.orientation;
p(D,C);if(u.polygons||u.polygon||u.polyline){u=e(C,D);C=Array(u.length);for(var J=0;J<u.length;++J){for(var L=u[J],K=Array(L.length),H=0;H<L.length;++H){for(var Q=L[H],M=Array(Q.length),P=0;P<Q.length;++P)M[P]=D[Q[P]].slice();G&&M.reverse();K[H]=M}C[J]=K}return C}return u.triangles||u.triangulate||u.triangle?{cells:d(D,C,{delaunay:!1,exterior:!1,interior:!0}),positions:D}:{edges:C,positions:D}}function a(C,u,D){try{return l(C,u,D,!0)}catch(G){}try{return l(C,u,D,!1)}catch(G){}return u.polygons||u.polyline||
u.polygon?[]:u.triangles||u.triangulate||u.triangle?{cells:[],positions:[]}:{edges:[],positions:[]}}N.exports=function(C,u,D,G){var J=64,L=1.25,K={breaklines:!1,bolds:!1,italics:!1,subscripts:!1,superscripts:!1};G&&(G.size&&0<G.size&&(J=G.size),G.lineSpacing&&0<G.lineSpacing&&(L=G.lineSpacing),G.styletags&&G.styletags.breaklines&&(K.breaklines=G.styletags.breaklines?!0:!1),G.styletags&&G.styletags.bolds&&(K.bolds=G.styletags.bolds?!0:!1),G.styletags&&G.styletags.italics&&(K.italics=G.styletags.italics?
!0:!1),G.styletags&&G.styletags.subscripts&&(K.subscripts=G.styletags.subscripts?!0:!1),G.styletags&&G.styletags.superscripts&&(K.superscripts=G.styletags.superscripts?!0:!1));D.font=[G.fontStyle,G.fontVariant,G.fontWeight,J+"px",G.font].filter(function(H){return H}).join(" ");D.textAlign="start";D.textBaseline="alphabetic";D.direction="ltr";C=m(u,D,C,J,L,K);return a(C,G,J)};N.exports.processPixels=a;var h=b("surface-nets"),g=b("ndarray"),n=b("simplify-planar-graph"),p=b("clean-pslg"),d=b("cdt2d"),
e=b("planar-graph-to-polyline"),f="b",k="b|",t="i",v="i|",w="sup",y="+",B="+1",A="sub",z="-",E="-1"},{cdt2d:112,"clean-pslg":121,ndarray:495,"planar-graph-to-polyline":514,"simplify-planar-graph":562,"surface-nets":570}],602:[function(b,N,I){(function(){function r(B){B.permitHostObjects___&&B.permitHostObjects___(r)}function q(B){return!("weakmap:"==B.substr(0,8)&&"___"===B.substr(B.length-3))}function m(B){if(B!==Object(B))throw new TypeError("Not an object: "+B);var A=B[k];if(A&&A.key===B)return A;
if(f(B)){A={key:B};try{return e(B,k,{value:A,writable:!1,enumerable:!1,configurable:!1}),A}catch(z){}}}function l(B){B.prototype=null;return Object.freeze(B)}function a(){v||"undefined"===typeof console||(v=!0,console.warn("WeakMap should be invoked as new WeakMap(), not WeakMap(). This will be an error in the future."))}if("undefined"===typeof ses||!ses.ok||ses.ok()){"undefined"!==typeof ses&&(ses.weakMapPermitHostObjects=r);var h=!1;if("function"===typeof WeakMap){var g=WeakMap;if("undefined"===
typeof navigator||!/Firefox/.test(navigator.userAgent)){var n=new g,p=Object.freeze({});n.set(p,1);if(1!==n.get(p))h=!0;else{N.exports=WeakMap;return}}}var d=Object.getOwnPropertyNames,e=Object.defineProperty,f=Object.isExtensible,k="weakmap:ident:"+Math.random()+"___";"undefined"!==typeof crypto&&"function"===typeof crypto.getRandomValues&&"function"===typeof ArrayBuffer&&"function"===typeof Uint8Array&&(n=new ArrayBuffer(25),n=new Uint8Array(n),crypto.getRandomValues(n),k="weakmap:rand:"+Array.prototype.map.call(n,
function(B){return(B%36).toString(36)}).join("")+"___");e(Object,"getOwnPropertyNames",{value:function(B){return d(B).filter(q)}});if("getPropertyNames"in Object){var t=Object.getPropertyNames;e(Object,"getPropertyNames",{value:function(B){return t(B).filter(q)}})}(function(){var B=Object.freeze;e(Object,"freeze",{value:function(E){m(E);return B(E)}});var A=Object.seal;e(Object,"seal",{value:function(E){m(E);return A(E)}});var z=Object.preventExtensions;e(Object,"preventExtensions",{value:function(E){m(E);
return z(E)}})})();var v=!1,w=0,y=function(){this instanceof y||a();var B=[],A=[],z=w++;return Object.create(y.prototype,{get___:{value:l(function(E,C){var u=m(E);if(u)return z in u?u[z]:C;E=B.indexOf(E);return 0<=E?A[E]:C})},has___:{value:l(function(E){var C=m(E);return C?z in C:0<=B.indexOf(E)})},set___:{value:l(function(E,C){var u;(u=m(E))?u[z]=C:(u=B.indexOf(E),0<=u?A[u]=C:(u=B.length,A[u]=C,B[u]=E));return this})},delete___:{value:l(function(E){var C=m(E);if(C)return z in C&&delete C[z];E=B.indexOf(E);
if(0>E)return!1;C=B.length-1;B[E]=void 0;A[E]=A[C];B[E]=B[C];B.length=C;A.length=C;return!0})}})};y.prototype=Object.create(Object.prototype,{get:{value:function(B,A){return this.get___(B,A)},writable:!0,configurable:!0},has:{value:function(B){return this.has___(B)},writable:!0,configurable:!0},set:{value:function(B,A){return this.set___(B,A)},writable:!0,configurable:!0},"delete":{value:function(B){return this.delete___(B)},writable:!0,configurable:!0}});"function"===typeof g?function(){function B(){this instanceof
y||a();var A=new g,z=void 0,E=!1;var C=h?function(u,D){A.set(u,D);A.has(u)||(z||(z=new y),z.set(u,D));return this}:function(u,D){if(E)try{A.set(u,D)}catch(G){z||(z=new y),z.set___(u,D)}else A.set(u,D);return this};return Object.create(y.prototype,{get___:{value:l(function(u,D){return z?A.has(u)?A.get(u):z.get___(u,D):A.get(u,D)})},has___:{value:l(function(u){return A.has(u)||(z?z.has___(u):!1)})},set___:{value:l(C)},delete___:{value:l(function(u){var D=!!A["delete"](u);return z?z.delete___(u)||D:
D})},permitHostObjects___:{value:l(function(u){if(u===r)E=!0;else throw Error("bogus call to permitHostObjects___");})}})}h&&"undefined"!==typeof Proxy&&(Proxy=void 0);B.prototype=y.prototype;N.exports=B;Object.defineProperty(WeakMap.prototype,"constructor",{value:WeakMap,enumerable:!1,configurable:!0,writable:!0})}():("undefined"!==typeof Proxy&&(Proxy=void 0),N.exports=y)}})()},{}],603:[function(b,N,I){var r=b("./hidden-store.js");N.exports=function(){var q={};return function(m){if(("object"!==
typeof m||null===m)&&"function"!==typeof m)throw Error("Weakmap-shim: Key must be object");var l=m.valueOf(q);return l&&l.identity===q?l:r(m,q)}}},{"./hidden-store.js":604}],604:[function(b,N,I){N.exports=function(r,q){var m={identity:q},l=r.valueOf;Object.defineProperty(r,"valueOf",{value:function(a){return a!==q?l.apply(this,arguments):m},writable:!0});return m}},{}],605:[function(b,N,I){var r=b("./create-store.js");N.exports=function(){var q=r();return{get:function(m,l){m=q(m);return m.hasOwnProperty("value")?
m.value:l},set:function(m,l){q(m).value=l;return this},has:function(m){return"value"in q(m)},"delete":function(m){return delete q(m).value}}}},{"./create-store.js":603}],606:[function(b,N,I){var r=b("get-canvas-context");N.exports=function(q){return r("webgl",q)}},{"get-canvas-context":249}],607:[function(b,N,I){function r(d){this.local=this.regionalOptions[d||""]||this.regionalOptions[""]}var q=b("../main");b=b("object-assign");var m=q.instance();r.prototype=new q.baseCalendar;b(r.prototype,{name:"Chinese",
jdEpoch:1721425.5,hasYearZero:!1,minMonth:0,firstMonth:0,minDay:1,regionalOptions:{"":{name:"Chinese",epochs:["BEC","EC"],monthNumbers:function(d,e){if("string"===typeof d)return(e=d.match(a))?e[0]:"";var f=this._validateYear(d);d=d.month();var k=""+this.toChineseMonth(f,d);e&&2>k.length&&(k="0"+k);this.isIntercalaryMonth(f,d)&&(k+="i");return k},monthNames:function(d){if("string"===typeof d){var e=d.match(h);return e?e[0]:""}e=this._validateYear(d);d=d.month();var f="           ".split(" ")[this.toChineseMonth(e,
d)-1];this.isIntercalaryMonth(e,d)&&(f=""+f);return f},monthNamesShort:function(d){if("string"===typeof d){var e=d.match(g);return e?e[0]:""}e=this._validateYear(d);d=d.month();var f="           ".split(" ")[this.toChineseMonth(e,d)-1];this.isIntercalaryMonth(e,d)&&(f=""+f);return f},parseMonth:function(d,e){d=this._validateYear(d);var f=parseInt(e);if(isNaN(f)){if(""===e[0]){var k=!0;e=e.substring(1)}""===e[e.length-1]&&(e=e.substring(0,e.length-1));f=1+"           ".split(" ").indexOf(e)}else e=
e[e.length-1],k="i"===e||"I"===e;return this.toMonthIndex(d,f,k)},dayNames:"Sunday Monday Tuesday Wednesday Thursday Friday Saturday".split(" "),dayNamesShort:"Sun Mon Tue Wed Thu Fri Sat".split(" "),dayNamesMin:"Su Mo Tu We Th Fr Sa".split(" "),digits:null,dateFormat:"yyyy/mm/dd",firstDay:1,isRTL:!1}},_validateYear:function(d,e){d.year&&(d=d.year());if("number"!==typeof d||1888>d||2111<d)throw e.replace(/\{0\}/,this.local.name);return d},toMonthIndex:function(d,e,f){d=this.intercalaryMonth(d);if(f&&
e!==d||1>e||12<e)throw q.local.invalidMonth.replace(/\{0\}/,this.local.name);return d?!f&&e<=d?e-1:e:e-1},toChineseMonth:function(d,e){d.year&&(d=d.year(),e=d.month());d=this.intercalaryMonth(d);if(0>e||e>(d?12:11))throw q.local.invalidMonth.replace(/\{0\}/,this.local.name);return d?e<d?e+1:e:e+1},intercalaryMonth:function(d){d=this._validateYear(d);return n[d-n[0]]>>13},isIntercalaryMonth:function(d,e){d.year&&(d=d.year(),e=d.month());d=this.intercalaryMonth(d);return!!d&&d===e},leapYear:function(d){return 0!==
this.intercalaryMonth(d)},weekOfYear:function(d,e,f){var k=this._validateYear(d,q.local.invalidyear);k=p[k-p[0]];k=m.newDate(k>>9&4095,k>>5&15,k&31);k.add(4-(k.dayOfWeek()||7),"d");d=this.toJD(d,e,f)-k.toJD();return 1+Math.floor(d/7)},monthsInYear:function(d){return this.leapYear(d)?13:12},daysInMonth:function(d,e){d.year&&(e=d.month(),d=d.year());d=this._validateYear(d);d=n[d-n[0]];if(e>(d>>13?12:11))throw q.local.invalidMonth.replace(/\{0\}/,this.local.name);return d&1<<12-e?30:29},weekDay:function(d,
e,f){return 6>(this.dayOfWeek(d,e,f)||7)},toJD:function(d,e,f){t=this._validate(d,t,f,q.local.invalidDate);d=this._validateYear(t.year());e=t.month();f=t.day();var k=this.isIntercalaryMonth(d,e),t=this.toChineseMonth(d,e);if("object"===typeof d)e=t||{};else{if(!("number"===typeof d&&1888<=d&&2111>=d))throw Error("Lunar year outside range 1888-2111");if(!("number"===typeof t&&1<=t&&12>=t))throw Error("Lunar month outside range 1 - 12");if(!("number"===typeof f&&1<=f&&30>=f))throw Error("Lunar day outside range 1 - 30");
if("object"===typeof k){var v=!1;e=k}else v=!!k,e={};d={year:d,month:t,day:f,isIntercalary:v}}t=d.day-1;f=n[d.year-n[0]];k=(k=f>>13)?d.month>k?d.month:d.isIntercalary?d.month:d.month-1:d.month-1;for(v=0;v<k;v++)t+=f&1<<12-v?30:29;d=p[d.year-p[0]];d=new Date(d>>9&4095,(d>>5&15)-1,(d&31)+t);e.year=d.getFullYear();e.month=1+d.getMonth();e.day=d.getDate();return m.toJD(e.year,e.month,e.day)},fromJD:function(d){var e=m.fromJD(d),f=e.year();d=e.month();e=e.day();if("object"===typeof f)d=d||{};else{if(!("number"===
typeof f&&1888<=f&&2111>=f))throw Error("Solar year outside range 1888-2111");if(!("number"===typeof d&&1<=d&&12>=d))throw Error("Solar month outside range 1 - 12");if(!("number"===typeof e&&1<=e&&31>=e))throw Error("Solar day outside range 1 - 31");f={year:f,month:d,day:e};d={}}e=p[f.year-p[0]];d.year=(f.year<<9|f.month<<5|f.day)>=e?f.year:f.year-1;e=p[d.year-p[0]];f=Math.round((new Date(f.year,f.month-1,f.day)-new Date(e>>9&4095,(e>>5&15)-1,e&31))/864E5);var k=n[d.year-n[0]];for(e=0;13>e;e++){var t=
k&1<<12-e?30:29;if(f<t)break;f-=t}k>>=13;!k||e<k?(d.isIntercalary=!1,d.month=1+e):(d.isIntercalary=e===k?!0:!1,d.month=e);d.day=1+f;f=this.toMonthIndex(d.year,d.month,d.isIntercalary);return this.newDate(d.year,f,d.day)},fromString:function(d){d=d.match(l);var e=this._validateYear(+d[1]),f=this.toMonthIndex(e,+d[2],!!d[3]);return this.newDate(e,f,+d[4])},add:function(d,e,f){var k=d.year(),t=d.month(),v=this.isIntercalaryMonth(k,t);k=this.toChineseMonth(k,t);d=Object.getPrototypeOf(r.prototype).add.call(this,
d,e,f);"y"===f&&(e=d.year(),f=d.month(),t=this.isIntercalaryMonth(e,k),v=v&&t?this.toMonthIndex(e,k,!0):this.toMonthIndex(e,k,!1),v!==f&&d.month(v));return d}});var l=/^\s*(-?\d\d\d\d|\d\d)[-/](\d?\d)([iI]?)[-/](\d?\d)/m,a=/^\d?\d[iI]?/m,h=/^??[]?/m,g=/^??[]?/m;q.calendars.chinese=r;var n=[1887,5780,5802,19157,2742,50359,1198,2646,46378,7466,3412,30122,5482,67949,2396,5294,43597,6732,6954,36181,2772,4954,18781,2396,54427,5274,6730,47781,5800,6868,21210,4790,59703,2350,5270,
46667,3402,3496,38325,1388,4782,18735,2350,52374,6804,7498,44457,2906,1388,29294,4700,63789,6442,6804,56138,5802,2772,38235,1210,4698,22827,5418,63125,3476,5802,43701,2484,5302,27223,2646,70954,7466,3412,54698,5482,2412,38062,5294,2636,32038,6954,60245,2772,4826,43357,2394,5274,39501,6730,72357,5800,5844,53978,4790,2358,38039,5270,87627,3402,3496,54708,5484,4782,43311,2350,3222,27978,7498,68965,2904,5484,45677,4700,6444,39573,6804,6986,19285,2772,62811,1210,4698,47403,5418,5780,38570,5546,76469,2420,
5302,51799,2646,5414,36501,3412,5546,18869,2412,54446,5276,6732,48422,6822,2900,28010,4826,92509,2394,5274,55883,6730,6820,47956,5812,2778,18779,2358,62615,5270,5450,46757,3492,5556,27318,4718,67887,2350,3222,52554,7498,3428,38252,5468,4700,31022,6444,64149,6804,6986,43861,2772,5338,35421,2650,70955,5418,5780,54954,5546,2740,38074,5302,2646,29991,3366,61011,3412,5546,43445,2412,5294,35406,6732,72998,6820,6996,52586,2778,2396,38045,5274,6698,23333,6820,64338,5812,2746,43355,2358,5270,39499,5450,79525,
3492,5548],p=[1887,966732,967231,967733,968265,968766,969297,969798,970298,970829,971330,971830,972362,972863,973395,973896,974397,974928,975428,975929,976461,976962,977462,977994,978494,979026,979526,980026,980558,981059,981559,982091,982593,983124,983624,984124,984656,985157,985656,986189,986690,987191,987722,988222,988753,989254,989754,990286,990788,991288,991819,992319,992851,993352,993851,994383,994885,995385,995917,996418,996918,997450,997949,998481,998982,999483,1000014,1000515,1001016,1001548,
1002047,1002578,1003080,1003580,1004111,1004613,1005113,1005645,1006146,1006645,1007177,1007678,1008209,1008710,1009211,1009743,1010243,1010743,1011275,1011775,1012306,1012807,1013308,1013840,1014341,1014841,1015373,1015874,1016404,1016905,1017405,1017937,1018438,1018939,1019471,1019972,1020471,1021002,1021503,1022035,1022535,1023036,1023568,1024069,1024568,1025100,1025601,1026102,1026633,1027133,1027666,1028167,1028666,1029198,1029699,1030199,1030730,1031231,1031763,1032264,1032764,1033296,1033797,
1034297,1034828,1035329,1035830,1036362,1036861,1037393,1037894,1038394,1038925,1039427,1039927,1040459,1040959,1041491,1041992,1042492,1043023,1043524,1044024,1044556,1045057,1045558,1046090,1046590,1047121,1047622,1048122,1048654,1049154,1049655,1050187,1050689,1051219,1051720,1052220,1052751,1053252,1053752,1054284,1054786,1055285,1055817,1056317,1056849,1057349,1057850,1058382,1058883,1059383,1059915,1060415,1060947,1061447,1061947,1062479,1062981,1063480,1064012,1064514,1065014,1065545,1066045,
1066577,1067078,1067578,1068110,1068611,1069112,1069642,1070142,1070674,1071175,1071675,1072207,1072709,1073209,1073740,1074241,1074741,1075273,1075773,1076305,1076807,1077308,1077839,1078340,1078840,1079372,1079871,1080403,1080904]},{"../main":621,"object-assign":499}],608:[function(b,N,I){function r(m){this.local=this.regionalOptions[m||""]||this.regionalOptions[""]}var q=b("../main");b=b("object-assign");r.prototype=new q.baseCalendar;b(r.prototype,{name:"Coptic",jdEpoch:1825029.5,daysPerMonth:[30,
30,30,30,30,30,30,30,30,30,30,30,5],hasYearZero:!1,minMonth:1,firstMonth:1,minDay:1,regionalOptions:{"":{name:"Coptic",epochs:["BAM","AM"],monthNames:"Thout;Paopi;Hathor;Koiak;Tobi;Meshir;Paremhat;Paremoude;Pashons;Paoni;Epip;Mesori;Pi Kogi Enavot".split(";"),monthNamesShort:"Tho Pao Hath Koi Tob Mesh Pat Pad Pash Pao Epi Meso PiK".split(" "),dayNames:"Tkyriaka Pesnau Pshoment Peftoou Ptiou Psoou Psabbaton".split(" "),dayNamesShort:"Tky Pes Psh Pef Pti Pso Psa".split(" "),dayNamesMin:"Tk Pes Psh Pef Pt Pso Psa".split(" "),
digits:null,dateFormat:"dd/mm/yyyy",firstDay:0,isRTL:!1}},leapYear:function(m){m=this._validate(m,this.minMonth,this.minDay,q.local.invalidYear);m=m.year()+(0>m.year()?1:0);return 3===m%4||-1===m%4},monthsInYear:function(m){this._validate(m,this.minMonth,this.minDay,q.local.invalidYear||q.regionalOptions[""].invalidYear);return 13},weekOfYear:function(m,l,a){m=this.newDate(m,l,a);m.add(-m.dayOfWeek(),"d");return Math.floor((m.dayOfYear()-1)/7)+1},daysInMonth:function(m,l){m=this._validate(m,l,this.minDay,
q.local.invalidMonth);return this.daysPerMonth[m.month()-1]+(13===m.month()&&this.leapYear(m.year())?1:0)},weekDay:function(m,l,a){return 6>(this.dayOfWeek(m,l,a)||7)},toJD:function(m,l,a){l=this._validate(m,l,a,q.local.invalidDate);m=l.year();0>m&&m++;return l.day()+30*(l.month()-1)+365*(m-1)+Math.floor(m/4)+this.jdEpoch-1},fromJD:function(m){var l=Math.floor(m)+.5-this.jdEpoch,a=Math.floor((l-Math.floor((l+366)/1461))/365)+1;0>=a&&a--;l=Math.floor(m)+.5-this.newDate(a,1,1).toJD();m=Math.floor(l/
30)+1;return this.newDate(a,m,l-30*(m-1)+1)}});q.calendars.coptic=r},{"../main":621,"object-assign":499}],609:[function(b,N,I){function r(l){this.local=this.regionalOptions[l||""]||this.regionalOptions[""]}var q=b("../main");b=b("object-assign");r.prototype=new q.baseCalendar;b(r.prototype,{name:"Discworld",jdEpoch:1721425.5,daysPerMonth:[16,32,32,32,32,32,32,32,32,32,32,32,32],hasYearZero:!1,minMonth:1,firstMonth:1,minDay:1,regionalOptions:{"":{name:"Discworld",epochs:["BUC","UC"],monthNames:"Ick Offle February March April May June Grune August Spune Sektober Ember December".split(" "),
monthNamesShort:"Ick Off Feb Mar Apr May Jun Gru Aug Spu Sek Emb Dec".split(" "),dayNames:"Sunday Octeday Monday Tuesday Wednesday Thursday Friday Saturday".split(" "),dayNamesShort:"Sun Oct Mon Tue Wed Thu Fri Sat".split(" "),dayNamesMin:"Su Oc Mo Tu We Th Fr Sa".split(" "),digits:null,dateFormat:"yyyy/mm/dd",firstDay:2,isRTL:!1}},leapYear:function(l){this._validate(l,this.minMonth,this.minDay,q.local.invalidYear);return!1},monthsInYear:function(l){this._validate(l,this.minMonth,this.minDay,q.local.invalidYear);
return 13},daysInYear:function(l){this._validate(l,this.minMonth,this.minDay,q.local.invalidYear);return 400},weekOfYear:function(l,a,h){l=this.newDate(l,a,h);l.add(-l.dayOfWeek(),"d");return Math.floor((l.dayOfYear()-1)/8)+1},daysInMonth:function(l,a){l=this._validate(l,a,this.minDay,q.local.invalidMonth);return this.daysPerMonth[l.month()-1]},daysInWeek:function(){return 8},dayOfWeek:function(l,a,h){return(this._validate(l,a,h,q.local.invalidDate).day()+1)%8},weekDay:function(l,a,h){l=this.dayOfWeek(l,
a,h);return 2<=l&&6>=l},extraInfo:function(l,a,h){l=this._validate(l,a,h,q.local.invalidDate);return{century:m[Math.floor((l.year()-1)/100)+1]||""}},toJD:function(l,a,h){h=this._validate(l,a,h,q.local.invalidDate);l=h.year()+(0>h.year()?1:0);a=h.month();h=h.day();return h+(1<a?16:0)+(2<a?32*(a-2):0)+400*(l-1)+this.jdEpoch-1},fromJD:function(l){l=Math.floor(l+.5)-Math.floor(this.jdEpoch)-1;var a=Math.floor(l/400)+1;l-=400*(a-1);l+=15<l?16:0;var h=Math.floor(l/32)+1;return this.newDate(0>=a?a-1:a,h,
l-32*(h-1)+1)}});var m={20:"Fruitbat",21:"Anchovy"};q.calendars.discworld=r},{"../main":621,"object-assign":499}],610:[function(b,N,I){function r(m){this.local=this.regionalOptions[m||""]||this.regionalOptions[""]}var q=b("../main");b=b("object-assign");r.prototype=new q.baseCalendar;b(r.prototype,{name:"Ethiopian",jdEpoch:1724220.5,daysPerMonth:[30,30,30,30,30,30,30,30,30,30,30,30,5],hasYearZero:!1,minMonth:1,firstMonth:1,minDay:1,regionalOptions:{"":{name:"Ethiopian",epochs:["BEE","EE"],monthNames:"Meskerem Tikemet Hidar Tahesas Tir Yekatit Megabit Miazia Genbot Sene Hamle Nehase Pagume".split(" "),
monthNamesShort:"Mes Tik Hid Tah Tir Yek Meg Mia Gen Sen Ham Neh Pag".split(" "),dayNames:"Ehud Segno Maksegno Irob Hamus Arb Kidame".split(" "),dayNamesShort:"Ehu Seg Mak Iro Ham Arb Kid".split(" "),dayNamesMin:"Eh Se Ma Ir Ha Ar Ki".split(" "),digits:null,dateFormat:"dd/mm/yyyy",firstDay:0,isRTL:!1}},leapYear:function(m){m=this._validate(m,this.minMonth,this.minDay,q.local.invalidYear);m=m.year()+(0>m.year()?1:0);return 3===m%4||-1===m%4},monthsInYear:function(m){this._validate(m,this.minMonth,
this.minDay,q.local.invalidYear||q.regionalOptions[""].invalidYear);return 13},weekOfYear:function(m,l,a){m=this.newDate(m,l,a);m.add(-m.dayOfWeek(),"d");return Math.floor((m.dayOfYear()-1)/7)+1},daysInMonth:function(m,l){m=this._validate(m,l,this.minDay,q.local.invalidMonth);return this.daysPerMonth[m.month()-1]+(13===m.month()&&this.leapYear(m.year())?1:0)},weekDay:function(m,l,a){return 6>(this.dayOfWeek(m,l,a)||7)},toJD:function(m,l,a){l=this._validate(m,l,a,q.local.invalidDate);m=l.year();0>
m&&m++;return l.day()+30*(l.month()-1)+365*(m-1)+Math.floor(m/4)+this.jdEpoch-1},fromJD:function(m){var l=Math.floor(m)+.5-this.jdEpoch,a=Math.floor((l-Math.floor((l+366)/1461))/365)+1;0>=a&&a--;l=Math.floor(m)+.5-this.newDate(a,1,1).toJD();m=Math.floor(l/30)+1;return this.newDate(a,m,l-30*(m-1)+1)}});q.calendars.ethiopian=r},{"../main":621,"object-assign":499}],611:[function(b,N,I){function r(l){this.local=this.regionalOptions[l||""]||this.regionalOptions[""]}function q(l,a){return l-a*Math.floor(l/
a)}var m=b("../main");b=b("object-assign");r.prototype=new m.baseCalendar;b(r.prototype,{name:"Hebrew",jdEpoch:347995.5,daysPerMonth:[30,29,30,29,30,29,30,29,30,29,30,29,29],hasYearZero:!1,minMonth:1,firstMonth:7,minDay:1,regionalOptions:{"":{name:"Hebrew",epochs:["BAM","AM"],monthNames:"Nisan;Iyar;Sivan;Tammuz;Av;Elul;Tishrei;Cheshvan;Kislev;Tevet;Shevat;Adar;Adar II".split(";"),monthNamesShort:"Nis Iya Siv Tam Av Elu Tis Che Kis Tev She Ada Ad2".split(" "),dayNames:"Yom Rishon;Yom Sheni;Yom Shlishi;Yom Revi'i;Yom Chamishi;Yom Shishi;Yom Shabbat".split(";"),
dayNamesShort:"Ris She Shl Rev Cha Shi Sha".split(" "),dayNamesMin:"Ri She Shl Re Ch Shi Sha".split(" "),digits:null,dateFormat:"dd/mm/yyyy",firstDay:0,isRTL:!1}},leapYear:function(l){l=this._validate(l,this.minMonth,this.minDay,m.local.invalidYear);return this._leapYear(l.year())},_leapYear:function(l){return 7>q(7*(0>l?l+1:l)+1,19)},monthsInYear:function(l){this._validate(l,this.minMonth,this.minDay,m.local.invalidYear);return this._leapYear(l.year?l.year():l)?13:12},weekOfYear:function(l,a,h){l=
this.newDate(l,a,h);l.add(-l.dayOfWeek(),"d");return Math.floor((l.dayOfYear()-1)/7)+1},daysInYear:function(l){l=this._validate(l,this.minMonth,this.minDay,m.local.invalidYear).year();return this.toJD(-1===l?1:l+1,7,1)-this.toJD(l,7,1)},daysInMonth:function(l,a){l.year&&(a=l.month(),l=l.year());this._validate(l,a,this.minDay,m.local.invalidMonth);return 12===a&&this.leapYear(l)?30:8===a&&5===q(this.daysInYear(l),10)?30:9===a&&3===q(this.daysInYear(l),10)?29:this.daysPerMonth[a-1]},weekDay:function(l,
a,h){return 6!==this.dayOfWeek(l,a,h)},extraInfo:function(l,a,h){l=this._validate(l,a,h,m.local.invalidDate);return{yearType:(this.leapYear(l)?"embolismic":"common")+" "+["deficient","regular","complete"][this.daysInYear(l)%10-3]}},toJD:function(l,a,h){h=this._validate(l,a,h,m.local.invalidDate);l=h.year();a=h.month();h=h.day();var g=0>=l?l+1:l;h=this.jdEpoch+this._delay1(g)+this._delay2(g)+h+1;if(7>a){for(g=7;g<=this.monthsInYear(l);g++)h+=this.daysInMonth(l,g);g=1}else g=7;for(;g<a;g++)h+=this.daysInMonth(l,
g);return h},_delay1:function(l){l=Math.floor((235*l-234)/19);l=29*l+Math.floor((12084+13753*l)/25920);3>q(3*(l+1),7)&&l++;return l},_delay2:function(l){var a=this._delay1(l-1),h=this._delay1(l);return 356===this._delay1(l+1)-h?2:382===h-a?1:0},fromJD:function(l){l=Math.floor(l)+.5;for(var a=Math.floor(98496*(l-this.jdEpoch)/35975351)-1;l>=this.toJD(-1===a?1:a+1,7,1);)a++;for(var h=l<this.toJD(a,1,1)?7:1;l>this.toJD(a,h,this.daysInMonth(a,h));)h++;l=l-this.toJD(a,h,1)+1;return this.newDate(a,h,l)}});
m.calendars.hebrew=r},{"../main":621,"object-assign":499}],612:[function(b,N,I){function r(m){this.local=this.regionalOptions[m||""]||this.regionalOptions[""]}var q=b("../main");b=b("object-assign");r.prototype=new q.baseCalendar;b(r.prototype,{name:"Islamic",jdEpoch:1948439.5,daysPerMonth:[30,29,30,29,30,29,30,29,30,29,30,29],hasYearZero:!1,minMonth:1,firstMonth:1,minDay:1,regionalOptions:{"":{name:"Islamic",epochs:["BH","AH"],monthNames:"Muharram;Safar;Rabi' al-awwal;Rabi' al-thani;Jumada al-awwal;Jumada al-thani;Rajab;Sha'aban;Ramadan;Shawwal;Dhu al-Qi'dah;Dhu al-Hijjah".split(";"),
monthNamesShort:"Muh Saf Rab1 Rab2 Jum1 Jum2 Raj Sha' Ram Shaw DhuQ DhuH".split(" "),dayNames:"Yawm al-ahad;Yawm al-ithnayn;Yawm ath-thulaathaa';Yawm al-arbi'aa';Yawm al-khams;Yawm al-jum'a;Yawm as-sabt".split(";"),dayNamesShort:"Aha Ith Thu Arb Kha Jum Sab".split(" "),dayNamesMin:"Ah It Th Ar Kh Ju Sa".split(" "),digits:null,dateFormat:"yyyy/mm/dd",firstDay:6,isRTL:!1}},leapYear:function(m){return 11>(11*this._validate(m,this.minMonth,this.minDay,q.local.invalidYear).year()+14)%30},weekOfYear:function(m,
l,a){m=this.newDate(m,l,a);m.add(-m.dayOfWeek(),"d");return Math.floor((m.dayOfYear()-1)/7)+1},daysInYear:function(m){return this.leapYear(m)?355:354},daysInMonth:function(m,l){m=this._validate(m,l,this.minDay,q.local.invalidMonth);return this.daysPerMonth[m.month()-1]+(12===m.month()&&this.leapYear(m.year())?1:0)},weekDay:function(m,l,a){return 5!==this.dayOfWeek(m,l,a)},toJD:function(m,l,a){a=this._validate(m,l,a,q.local.invalidDate);m=a.year();l=a.month();a=a.day();m=0>=m?m+1:m;return a+Math.ceil(29.5*
(l-1))+354*(m-1)+Math.floor((3+11*m)/30)+this.jdEpoch-1},fromJD:function(m){m=Math.floor(m)+.5;var l=Math.floor((30*(m-this.jdEpoch)+10646)/10631);l=0>=l?l-1:l;var a=Math.min(12,Math.ceil((m-29-this.toJD(l,1,1))/29.5)+1);m=m-this.toJD(l,a,1)+1;return this.newDate(l,a,m)}});q.calendars.islamic=r},{"../main":621,"object-assign":499}],613:[function(b,N,I){function r(m){this.local=this.regionalOptions[m||""]||this.regionalOptions[""]}var q=b("../main");b=b("object-assign");r.prototype=new q.baseCalendar;
b(r.prototype,{name:"Julian",jdEpoch:1721423.5,daysPerMonth:[31,28,31,30,31,30,31,31,30,31,30,31],hasYearZero:!1,minMonth:1,firstMonth:1,minDay:1,regionalOptions:{"":{name:"Julian",epochs:["BC","AD"],monthNames:"January February March April May June July August September October November December".split(" "),monthNamesShort:"Jan Feb Mar Apr May Jun Jul Aug Sep Oct Nov Dec".split(" "),dayNames:"Sunday Monday Tuesday Wednesday Thursday Friday Saturday".split(" "),dayNamesShort:"Sun Mon Tue Wed Thu Fri Sat".split(" "),
dayNamesMin:"Su Mo Tu We Th Fr Sa".split(" "),digits:null,dateFormat:"mm/dd/yyyy",firstDay:0,isRTL:!1}},leapYear:function(m){m=this._validate(m,this.minMonth,this.minDay,q.local.invalidYear);m=0>m.year()?m.year()+1:m.year();return 0===m%4},weekOfYear:function(m,l,a){m=this.newDate(m,l,a);m.add(4-(m.dayOfWeek()||7),"d");return Math.floor((m.dayOfYear()-1)/7)+1},daysInMonth:function(m,l){m=this._validate(m,l,this.minDay,q.local.invalidMonth);return this.daysPerMonth[m.month()-1]+(2===m.month()&&this.leapYear(m.year())?
1:0)},weekDay:function(m,l,a){return 6>(this.dayOfWeek(m,l,a)||7)},toJD:function(m,l,a){a=this._validate(m,l,a,q.local.invalidDate);m=a.year();l=a.month();a=a.day();0>m&&m++;2>=l&&(m--,l+=12);return Math.floor(365.25*(m+4716))+Math.floor(30.6001*(l+1))+a-1524.5},fromJD:function(m){var l=Math.floor(m+.5)+1524,a=Math.floor((l-122.1)/365.25),h=Math.floor(365.25*a),g=Math.floor((l-h)/30.6001);m=g-Math.floor(14>g?1:13);a-=Math.floor(2<m?4716:4715);l=l-h-Math.floor(30.6001*g);0>=a&&a--;return this.newDate(a,
m,l)}});q.calendars.julian=r},{"../main":621,"object-assign":499}],614:[function(b,N,I){function r(l){this.local=this.regionalOptions[l||""]||this.regionalOptions[""]}function q(l,a){return l-a*Math.floor(l/a)}var m=b("../main");b=b("object-assign");r.prototype=new m.baseCalendar;b(r.prototype,{name:"Mayan",jdEpoch:584282.5,hasYearZero:!0,minMonth:0,firstMonth:0,minDay:0,regionalOptions:{"":{name:"Mayan",epochs:["",""],monthNames:"0 1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17".split(" "),monthNamesShort:"0 1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17".split(" "),
dayNames:"0 1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19".split(" "),dayNamesShort:"0 1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19".split(" "),dayNamesMin:"0 1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19".split(" "),digits:null,dateFormat:"YYYY.m.d",firstDay:0,isRTL:!1,haabMonths:"Pop Uo Zip Zotz Tzec Xul Yaxkin Mol Chen Yax Zac Ceh Mac Kankin Muan Pax Kayab Cumku Uayeb".split(" "),tzolkinMonths:"Imix Ik Akbal Kan Chicchan Cimi Manik Lamat Muluc Oc Chuen Eb Ben Ix Men Cib Caban Etznab Cauac Ahau".split(" ")}},
leapYear:function(l){this._validate(l,this.minMonth,this.minDay,m.local.invalidYear);return!1},formatYear:function(l){l=this._validate(l,this.minMonth,this.minDay,m.local.invalidYear).year();var a=Math.floor(l/400);l%=400;l+=0>l?400:0;return a+"."+Math.floor(l/20)+"."+l%20},forYear:function(l){l=l.split(".");if(3>l.length)throw"Invalid Mayan year";for(var a=0,h=0;h<l.length;h++){var g=parseInt(l[h],10);if(19<Math.abs(g)||0<h&&0>g)throw"Invalid Mayan year";a=20*a+g}return a},monthsInYear:function(l){this._validate(l,
this.minMonth,this.minDay,m.local.invalidYear);return 18},weekOfYear:function(l,a,h){this._validate(l,a,h,m.local.invalidDate);return 0},daysInYear:function(l){this._validate(l,this.minMonth,this.minDay,m.local.invalidYear);return 360},daysInMonth:function(l,a){this._validate(l,a,this.minDay,m.local.invalidMonth);return 20},daysInWeek:function(){return 5},dayOfWeek:function(l,a,h){return this._validate(l,a,h,m.local.invalidDate).day()},weekDay:function(l,a,h){this._validate(l,a,h,m.local.invalidDate);
return!0},extraInfo:function(l,a,h){a=this._validate(l,a,h,m.local.invalidDate).toJD();l=this._toHaab(a);a=this._toTzolkin(a);return{haabMonthName:this.local.haabMonths[l[0]-1],haabMonth:l[0],haabDay:l[1],tzolkinDayName:this.local.tzolkinMonths[a[0]-1],tzolkinDay:a[0],tzolkinTrecena:a[1]}},_toHaab:function(l){l-=this.jdEpoch;l=q(l+8+340,365);return[Math.floor(l/20)+1,q(l,20)]},_toTzolkin:function(l){l-=this.jdEpoch;return[q(l+20-1,20)+1,q(l+4-1,13)+1]},toJD:function(l,a,h){l=this._validate(l,a,h,
m.local.invalidDate);return l.day()+20*l.month()+360*l.year()+this.jdEpoch},fromJD:function(l){l=Math.floor(l)+.5-this.jdEpoch;var a=Math.floor(l/360);l%=360;l+=0>l?360:0;return this.newDate(a,Math.floor(l/20),l%20)}});m.calendars.mayan=r},{"../main":621,"object-assign":499}],615:[function(b,N,I){function r(l){this.local=this.regionalOptions[l||""]||this.regionalOptions[""]}var q=b("../main");b=b("object-assign");r.prototype=new q.baseCalendar;var m=q.instance("gregorian");b(r.prototype,{name:"Nanakshahi",
jdEpoch:2257673.5,daysPerMonth:[31,31,31,31,31,30,30,30,30,30,30,30],hasYearZero:!1,minMonth:1,firstMonth:1,minDay:1,regionalOptions:{"":{name:"Nanakshahi",epochs:["BN","AN"],monthNames:"Chet Vaisakh Jeth Harh Sawan Bhadon Assu Katak Maghar Poh Magh Phagun".split(" "),monthNamesShort:"Che Vai Jet Har Saw Bha Ass Kat Mgr Poh Mgh Pha".split(" "),dayNames:"Somvaar Mangalvar Budhvaar Veervaar Shukarvaar Sanicharvaar Etvaar".split(" "),dayNamesShort:"Som Mangal Budh Veer Shukar Sanichar Et".split(" "),
dayNamesMin:"So Ma Bu Ve Sh Sa Et".split(" "),digits:null,dateFormat:"dd-mm-yyyy",firstDay:0,isRTL:!1}},leapYear:function(l){l=this._validate(l,this.minMonth,this.minDay,q.local.invalidYear||q.regionalOptions[""].invalidYear);return m.leapYear(l.year()+(1>l.year()?1:0)+1469)},weekOfYear:function(l,a,h){l=this.newDate(l,a,h);l.add(1-(l.dayOfWeek()||7),"d");return Math.floor((l.dayOfYear()-1)/7)+1},daysInMonth:function(l,a){l=this._validate(l,a,this.minDay,q.local.invalidMonth);return this.daysPerMonth[l.month()-
1]+(12===l.month()&&this.leapYear(l.year())?1:0)},weekDay:function(l,a,h){return 6>(this.dayOfWeek(l,a,h)||7)},toJD:function(l,a,h){a=this._validate(l,a,h,q.local.invalidMonth);l=a.year();0>l&&l++;h=a.day();for(var g=1;g<a.month();g++)h+=this.daysPerMonth[g-1];return h+m.toJD(l+1468,3,13)},fromJD:function(l){l=Math.floor(l+.5);for(var a=Math.floor((l-(this.jdEpoch-1))/366);l>=this.toJD(a+1,1,1);)a++;l=l-Math.floor(this.toJD(a,1,1)+.5)+1;for(var h=1;l>this.daysInMonth(a,h);)l-=this.daysInMonth(a,h),
h++;return this.newDate(a,h,l)}});q.calendars.nanakshahi=r},{"../main":621,"object-assign":499}],616:[function(b,N,I){function r(m){this.local=this.regionalOptions[m||""]||this.regionalOptions[""]}var q=b("../main");b=b("object-assign");r.prototype=new q.baseCalendar;b(r.prototype,{name:"Nepali",jdEpoch:1700709.5,daysPerMonth:[31,31,32,32,31,30,30,29,30,29,30,30],hasYearZero:!1,minMonth:1,firstMonth:1,minDay:1,daysPerYear:365,regionalOptions:{"":{name:"Nepali",epochs:["BBS","ABS"],monthNames:"Baisakh Jestha Ashadh Shrawan Bhadra Ashwin Kartik Mangsir Paush Mangh Falgun Chaitra".split(" "),
monthNamesShort:"Bai Je As Shra Bha Ash Kar Mang Pau Ma Fal Chai".split(" "),dayNames:"Aaitabaar Sombaar Manglbaar Budhabaar Bihibaar Shukrabaar Shanibaar".split(" "),dayNamesShort:"Aaita Som Mangl Budha Bihi Shukra Shani".split(" "),dayNamesMin:"Aai So Man Bu Bi Shu Sha".split(" "),digits:null,dateFormat:"dd/mm/yyyy",firstDay:1,isRTL:!1}},leapYear:function(m){return this.daysInYear(m)!==this.daysPerYear},weekOfYear:function(m,l,a){m=this.newDate(m,l,a);m.add(-m.dayOfWeek(),"d");return Math.floor((m.dayOfYear()-
1)/7)+1},daysInYear:function(m){m=this._validate(m,this.minMonth,this.minDay,q.local.invalidYear).year();if("undefined"===typeof this.NEPALI_CALENDAR_DATA[m])return this.daysPerYear;for(var l=0,a=this.minMonth;12>=a;a++)l+=this.NEPALI_CALENDAR_DATA[m][a];return l},daysInMonth:function(m,l){m.year&&(l=m.month(),m=m.year());this._validate(m,l,this.minDay,q.local.invalidMonth);return"undefined"===typeof this.NEPALI_CALENDAR_DATA[m]?this.daysPerMonth[l-1]:this.NEPALI_CALENDAR_DATA[m][l]},weekDay:function(m,
l,a){return 6!==this.dayOfWeek(m,l,a)},toJD:function(m,l,a){a=this._validate(m,l,a,q.local.invalidDate);m=a.year();l=a.month();a=a.day();var h=q.instance(),g=0,n=l,p=m;this._createMissingCalendarData(m);m-=9<n||9===n&&a>=this.NEPALI_CALENDAR_DATA[p][0]?56:57;9!==l&&(g=a,n--);for(;9!==n;)0>=n&&(n=12,p--),g+=this.NEPALI_CALENDAR_DATA[p][n],n--;9===l?(g+=a-this.NEPALI_CALENDAR_DATA[p][0],0>g&&(g+=h.daysInYear(m))):g+=this.NEPALI_CALENDAR_DATA[p][9]-this.NEPALI_CALENDAR_DATA[p][0];return h.newDate(m,
1,1).add(g,"d").toJD()},fromJD:function(m){m=q.instance().fromJD(m);var l=m.year();m=m.dayOfYear();l+=56;this._createMissingCalendarData(l);for(var a=9,h=this.NEPALI_CALENDAR_DATA[l][a]-this.NEPALI_CALENDAR_DATA[l][0]+1;m>h;)a++,12<a&&(a=1,l++),h+=this.NEPALI_CALENDAR_DATA[l][a];return this.newDate(l,a,this.NEPALI_CALENDAR_DATA[l][a]-(h-m))},_createMissingCalendarData:function(m){var l=this.daysPerMonth.slice(0);l.unshift(17);for(var a=m-1;a<m+2;a++)"undefined"===typeof this.NEPALI_CALENDAR_DATA[a]&&
(this.NEPALI_CALENDAR_DATA[a]=l)},NEPALI_CALENDAR_DATA:{1970:[18,31,31,32,31,31,31,30,29,30,29,30,30],1971:[18,31,31,32,31,32,30,30,29,30,29,30,30],1972:[17,31,32,31,32,31,30,30,30,29,29,30,30],1973:[19,30,32,31,32,31,30,30,30,29,30,29,31],1974:[19,31,31,32,30,31,31,30,29,30,29,30,30],1975:[18,31,31,32,32,30,31,30,29,30,29,30,30],1976:[17,31,32,31,32,31,30,30,30,29,29,30,31],1977:[18,31,32,31,32,31,31,29,30,29,30,29,31],1978:[18,31,31,32,31,31,31,30,29,30,29,30,30],1979:[18,31,31,32,32,31,30,30,29,
30,29,30,30],1980:[17,31,32,31,32,31,30,30,30,29,29,30,31],1981:[18,31,31,31,32,31,31,29,30,30,29,30,30],1982:[18,31,31,32,31,31,31,30,29,30,29,30,30],1983:[18,31,31,32,32,31,30,30,29,30,29,30,30],1984:[17,31,32,31,32,31,30,30,30,29,29,30,31],1985:[18,31,31,31,32,31,31,29,30,30,29,30,30],1986:[18,31,31,32,31,31,31,30,29,30,29,30,30],1987:[18,31,32,31,32,31,30,30,29,30,29,30,30],1988:[17,31,32,31,32,31,30,30,30,29,29,30,31],1989:[18,31,31,31,32,31,31,30,29,30,29,30,30],1990:[18,31,31,32,31,31,31,30,
29,30,29,30,30],1991:[18,31,32,31,32,31,30,30,29,30,29,30,30],1992:[17,31,32,31,32,31,30,30,30,29,30,29,31],1993:[18,31,31,31,32,31,31,30,29,30,29,30,30],1994:[18,31,31,32,31,31,31,30,29,30,29,30,30],1995:[17,31,32,31,32,31,30,30,30,29,29,30,30],1996:[17,31,32,31,32,31,30,30,30,29,30,29,31],1997:[18,31,31,32,31,31,31,30,29,30,29,30,30],1998:[18,31,31,32,31,31,31,30,29,30,29,30,30],1999:[17,31,32,31,32,31,30,30,30,29,29,30,31],2E3:[17,30,32,31,32,31,30,30,30,29,30,29,31],2001:[18,31,31,32,31,31,31,
30,29,30,29,30,30],2002:[18,31,31,32,32,31,30,30,29,30,29,30,30],2003:[17,31,32,31,32,31,30,30,30,29,29,30,31],2004:[17,30,32,31,32,31,30,30,30,29,30,29,31],2005:[18,31,31,32,31,31,31,30,29,30,29,30,30],2006:[18,31,31,32,32,31,30,30,29,30,29,30,30],2007:[17,31,32,31,32,31,30,30,30,29,29,30,31],2008:[17,31,31,31,32,31,31,29,30,30,29,29,31],2009:[18,31,31,32,31,31,31,30,29,30,29,30,30],2010:[18,31,31,32,32,31,30,30,29,30,29,30,30],2011:[17,31,32,31,32,31,30,30,30,29,29,30,31],2012:[17,31,31,31,32,31,
31,29,30,30,29,30,30],2013:[18,31,31,32,31,31,31,30,29,30,29,30,30],2014:[18,31,31,32,32,31,30,30,29,30,29,30,30],2015:[17,31,32,31,32,31,30,30,30,29,29,30,31],2016:[17,31,31,31,32,31,31,29,30,30,29,30,30],2017:[18,31,31,32,31,31,31,30,29,30,29,30,30],2018:[18,31,32,31,32,31,30,30,29,30,29,30,30],2019:[17,31,32,31,32,31,30,30,30,29,30,29,31],2020:[17,31,31,31,32,31,31,30,29,30,29,30,30],2021:[18,31,31,32,31,31,31,30,29,30,29,30,30],2022:[17,31,32,31,32,31,30,30,30,29,29,30,30],2023:[17,31,32,31,32,
31,30,30,30,29,30,29,31],2024:[17,31,31,31,32,31,31,30,29,30,29,30,30],2025:[18,31,31,32,31,31,31,30,29,30,29,30,30],2026:[17,31,32,31,32,31,30,30,30,29,29,30,31],2027:[17,30,32,31,32,31,30,30,30,29,30,29,31],2028:[17,31,31,32,31,31,31,30,29,30,29,30,30],2029:[18,31,31,32,31,32,30,30,29,30,29,30,30],2030:[17,31,32,31,32,31,30,30,30,30,30,30,31],2031:[17,31,32,31,32,31,31,31,31,31,31,31,31],2032:[17,32,32,32,32,32,32,32,32,32,32,32,32],2033:[18,31,31,32,32,31,30,30,29,30,29,30,30],2034:[17,31,32,31,
32,31,30,30,30,29,29,30,31],2035:[17,30,32,31,32,31,31,29,30,30,29,29,31],2036:[17,31,31,32,31,31,31,30,29,30,29,30,30],2037:[18,31,31,32,32,31,30,30,29,30,29,30,30],2038:[17,31,32,31,32,31,30,30,30,29,29,30,31],2039:[17,31,31,31,32,31,31,29,30,30,29,30,30],2040:[17,31,31,32,31,31,31,30,29,30,29,30,30],2041:[18,31,31,32,32,31,30,30,29,30,29,30,30],2042:[17,31,32,31,32,31,30,30,30,29,29,30,31],2043:[17,31,31,31,32,31,31,29,30,30,29,30,30],2044:[17,31,31,32,31,31,31,30,29,30,29,30,30],2045:[18,31,32,
31,32,31,30,30,29,30,29,30,30],2046:[17,31,32,31,32,31,30,30,30,29,29,30,31],2047:[17,31,31,31,32,31,31,30,29,30,29,30,30],2048:[17,31,31,32,31,31,31,30,29,30,29,30,30],2049:[17,31,32,31,32,31,30,30,30,29,29,30,30],2050:[17,31,32,31,32,31,30,30,30,29,30,29,31],2051:[17,31,31,31,32,31,31,30,29,30,29,30,30],2052:[17,31,31,32,31,31,31,30,29,30,29,30,30],2053:[17,31,32,31,32,31,30,30,30,29,29,30,30],2054:[17,31,32,31,32,31,30,30,30,29,30,29,31],2055:[17,31,31,32,31,31,31,30,29,30,30,29,30],2056:[17,31,
31,32,31,32,30,30,29,30,29,30,30],2057:[17,31,32,31,32,31,30,30,30,29,29,30,31],2058:[17,30,32,31,32,31,30,30,30,29,30,29,31],2059:[17,31,31,32,31,31,31,30,29,30,29,30,30],2060:[17,31,31,32,32,31,30,30,29,30,29,30,30],2061:[17,31,32,31,32,31,30,30,30,29,29,30,31],2062:[17,30,32,31,32,31,31,29,30,29,30,29,31],2063:[17,31,31,32,31,31,31,30,29,30,29,30,30],2064:[17,31,31,32,32,31,30,30,29,30,29,30,30],2065:[17,31,32,31,32,31,30,30,30,29,29,30,31],2066:[17,31,31,31,32,31,31,29,30,30,29,29,31],2067:[17,
31,31,32,31,31,31,30,29,30,29,30,30],2068:[17,31,31,32,32,31,30,30,29,30,29,30,30],2069:[17,31,32,31,32,31,30,30,30,29,29,30,31],2070:[17,31,31,31,32,31,31,29,30,30,29,30,30],2071:[17,31,31,32,31,31,31,30,29,30,29,30,30],2072:[17,31,32,31,32,31,30,30,29,30,29,30,30],2073:[17,31,32,31,32,31,30,30,30,29,29,30,31],2074:[17,31,31,31,32,31,31,30,29,30,29,30,30],2075:[17,31,31,32,31,31,31,30,29,30,29,30,30],2076:[16,31,32,31,32,31,30,30,30,29,29,30,30],2077:[17,31,32,31,32,31,30,30,30,29,30,29,31],2078:[17,
31,31,31,32,31,31,30,29,30,29,30,30],2079:[17,31,31,32,31,31,31,30,29,30,29,30,30],2080:[16,31,32,31,32,31,30,30,30,29,29,30,30],2081:[17,31,31,32,32,31,30,30,30,29,30,30,30],2082:[17,31,32,31,32,31,30,30,30,29,30,30,30],2083:[17,31,31,32,31,31,30,30,30,29,30,30,30],2084:[17,31,31,32,31,31,30,30,30,29,30,30,30],2085:[17,31,32,31,32,31,31,30,30,29,30,30,30],2086:[17,31,32,31,32,31,30,30,30,29,30,30,30],2087:[16,31,31,32,31,31,31,30,30,29,30,30,30],2088:[16,30,31,32,32,30,31,30,30,29,30,30,30],2089:[17,
31,32,31,32,31,30,30,30,29,30,30,30],2090:[17,31,32,31,32,31,30,30,30,29,30,30,30],2091:[16,31,31,32,31,31,31,30,30,29,30,30,30],2092:[16,31,31,32,32,31,30,30,30,29,30,30,30],2093:[17,31,32,31,32,31,30,30,30,29,30,30,30],2094:[17,31,31,32,31,31,30,30,30,29,30,30,30],2095:[17,31,31,32,31,31,31,30,29,30,30,30,30],2096:[17,30,31,32,32,31,30,30,29,30,29,30,30],2097:[17,31,32,31,32,31,30,30,30,29,30,30,30],2098:[17,31,31,32,31,31,31,29,30,29,30,30,31],2099:[17,31,31,32,31,31,31,30,29,29,30,30,30],2100:[17,
31,32,31,32,30,31,30,29,30,29,30,30]}});q.calendars.nepali=r},{"../main":621,"object-assign":499}],617:[function(b,N,I){function r(m){this.local=this.regionalOptions[m||""]||this.regionalOptions[""]}var q=b("../main");b=b("object-assign");r.prototype=new q.baseCalendar;b(r.prototype,{name:"Persian",jdEpoch:1948320.5,daysPerMonth:[31,31,31,31,31,31,30,30,30,30,30,29],hasYearZero:!1,minMonth:1,firstMonth:1,minDay:1,regionalOptions:{"":{name:"Persian",epochs:["BP","AP"],monthNames:"Farvardin Ordibehesht Khordad Tir Mordad Shahrivar Mehr Aban Azar Day Bahman Esfand".split(" "),
monthNamesShort:"Far Ord Kho Tir Mor Sha Meh Aba Aza Day Bah Esf".split(" "),dayNames:"Yekshambe Doshambe Seshambe Chharshambe Panjshambe Jom'e Shambe".split(" "),dayNamesShort:"Yek Do Se Ch Panj Jom Sha".split(" "),dayNamesMin:"Ye Do Se Ch Pa Jo Sh".split(" "),digits:null,dateFormat:"yyyy/mm/dd",firstDay:6,isRTL:!1}},leapYear:function(m){m=this._validate(m,this.minMonth,this.minDay,q.local.invalidYear);return 682>682*((m.year()-(0<m.year()?474:473))%2820+512)%2816},weekOfYear:function(m,l,a){m=
this.newDate(m,l,a);m.add(-((m.dayOfWeek()+1)%7),"d");return Math.floor((m.dayOfYear()-1)/7)+1},daysInMonth:function(m,l){m=this._validate(m,l,this.minDay,q.local.invalidMonth);return this.daysPerMonth[m.month()-1]+(12===m.month()&&this.leapYear(m.year())?1:0)},weekDay:function(m,l,a){return 5!==this.dayOfWeek(m,l,a)},toJD:function(m,l,a){a=this._validate(m,l,a,q.local.invalidDate);m=a.year();l=a.month();a=a.day();m-=0<=m?474:473;var h=474+(m-2820*Math.floor(m/2820));return a+(7>=l?31*(l-1):30*(l-
1)+6)+Math.floor((682*h-110)/2816)+365*(h-1)+1029983*Math.floor(m/2820)+this.jdEpoch-1},fromJD:function(m){m=Math.floor(m)+.5;var l=m-this.toJD(475,1,1),a=Math.floor(l/1029983);l-=1029983*Math.floor(l/1029983);var h=2820;1029982!==l&&(h=Math.floor(l/366),h=Math.floor((2134*h+2816*(l-366*Math.floor(l/366))+2815)/1028522)+h+1);a=h+2820*a+474;a=0>=a?a-1:a;l=m-this.toJD(a,1,1)+1;l=186>=l?Math.ceil(l/31):Math.ceil((l-6)/30);m=m-this.toJD(a,l,1)+1;return this.newDate(a,l,m)}});q.calendars.persian=r;q.calendars.jalali=
r},{"../main":621,"object-assign":499}],618:[function(b,N,I){function r(l){this.local=this.regionalOptions[l||""]||this.regionalOptions[""]}var q=b("../main");b=b("object-assign");var m=q.instance();r.prototype=new q.baseCalendar;b(r.prototype,{name:"Taiwan",jdEpoch:2419402.5,yearsOffset:1911,daysPerMonth:[31,28,31,30,31,30,31,31,30,31,30,31],hasYearZero:!1,minMonth:1,firstMonth:1,minDay:1,regionalOptions:{"":{name:"Taiwan",epochs:["BROC","ROC"],monthNames:"January February March April May June July August September October November December".split(" "),
monthNamesShort:"Jan Feb Mar Apr May Jun Jul Aug Sep Oct Nov Dec".split(" "),dayNames:"Sunday Monday Tuesday Wednesday Thursday Friday Saturday".split(" "),dayNamesShort:"Sun Mon Tue Wed Thu Fri Sat".split(" "),dayNamesMin:"Su Mo Tu We Th Fr Sa".split(" "),digits:null,dateFormat:"yyyy/mm/dd",firstDay:1,isRTL:!1}},leapYear:function(l){l=this._validate(l,this.minMonth,this.minDay,q.local.invalidYear);l=this._t2gYear(l.year());return m.leapYear(l)},weekOfYear:function(l,a,h){a=this._validate(l,this.minMonth,
this.minDay,q.local.invalidYear);l=this._t2gYear(a.year());return m.weekOfYear(l,a.month(),a.day())},daysInMonth:function(l,a){l=this._validate(l,a,this.minDay,q.local.invalidMonth);return this.daysPerMonth[l.month()-1]+(2===l.month()&&this.leapYear(l.year())?1:0)},weekDay:function(l,a,h){return 6>(this.dayOfWeek(l,a,h)||7)},toJD:function(l,a,h){a=this._validate(l,a,h,q.local.invalidDate);l=this._t2gYear(a.year());return m.toJD(l,a.month(),a.day())},fromJD:function(l){l=m.fromJD(l);var a=this._g2tYear(l.year());
return this.newDate(a,l.month(),l.day())},_t2gYear:function(l){return l+this.yearsOffset+(l>=-this.yearsOffset&&-1>=l?1:0)},_g2tYear:function(l){return l-this.yearsOffset-(1<=l&&l<=this.yearsOffset?1:0)}});q.calendars.taiwan=r},{"../main":621,"object-assign":499}],619:[function(b,N,I){function r(l){this.local=this.regionalOptions[l||""]||this.regionalOptions[""]}var q=b("../main");b=b("object-assign");var m=q.instance();r.prototype=new q.baseCalendar;b(r.prototype,{name:"Thai",jdEpoch:1523098.5,yearsOffset:543,
daysPerMonth:[31,28,31,30,31,30,31,31,30,31,30,31],hasYearZero:!1,minMonth:1,firstMonth:1,minDay:1,regionalOptions:{"":{name:"Thai",epochs:["BBE","BE"],monthNames:"January February March April May June July August September October November December".split(" "),monthNamesShort:"Jan Feb Mar Apr May Jun Jul Aug Sep Oct Nov Dec".split(" "),dayNames:"Sunday Monday Tuesday Wednesday Thursday Friday Saturday".split(" "),dayNamesShort:"Sun Mon Tue Wed Thu Fri Sat".split(" "),dayNamesMin:"Su Mo Tu We Th Fr Sa".split(" "),
digits:null,dateFormat:"dd/mm/yyyy",firstDay:0,isRTL:!1}},leapYear:function(l){l=this._validate(l,this.minMonth,this.minDay,q.local.invalidYear);l=this._t2gYear(l.year());return m.leapYear(l)},weekOfYear:function(l,a,h){a=this._validate(l,this.minMonth,this.minDay,q.local.invalidYear);l=this._t2gYear(a.year());return m.weekOfYear(l,a.month(),a.day())},daysInMonth:function(l,a){l=this._validate(l,a,this.minDay,q.local.invalidMonth);return this.daysPerMonth[l.month()-1]+(2===l.month()&&this.leapYear(l.year())?
1:0)},weekDay:function(l,a,h){return 6>(this.dayOfWeek(l,a,h)||7)},toJD:function(l,a,h){a=this._validate(l,a,h,q.local.invalidDate);l=this._t2gYear(a.year());return m.toJD(l,a.month(),a.day())},fromJD:function(l){l=m.fromJD(l);var a=this._g2tYear(l.year());return this.newDate(a,l.month(),l.day())},_t2gYear:function(l){return l-this.yearsOffset-(1<=l&&l<=this.yearsOffset?1:0)},_g2tYear:function(l){return l+this.yearsOffset+(l>=-this.yearsOffset&&-1>=l?1:0)}});q.calendars.thai=r},{"../main":621,"object-assign":499}],
620:[function(b,N,I){function r(l){this.local=this.regionalOptions[l||""]||this.regionalOptions[""]}var q=b("../main");b=b("object-assign");r.prototype=new q.baseCalendar;b(r.prototype,{name:"UmmAlQura",hasYearZero:!1,minMonth:1,firstMonth:1,minDay:1,regionalOptions:{"":{name:"Umm al-Qura",epochs:["BH","AH"],monthNames:"Al-Muharram;Safar;Rabi' al-awwal;Rabi' Al-Thani;Jumada Al-Awwal;Jumada Al-Thani;Rajab;Sha'aban;Ramadan;Shawwal;Dhu al-Qi'dah;Dhu al-Hijjah".split(";"),monthNamesShort:"Muh Saf Rab1 Rab2 Jum1 Jum2 Raj Sha' Ram Shaw DhuQ DhuH".split(" "),
dayNames:"Yawm al-Ahad;Yawm al-Ithnain;Yawm al-Thalth;Yawm al-Arba;Yawm al-Khams;Yawm al-Juma;Yawm al-Sabt".split(";"),dayNamesMin:"Ah Ith Th Ar Kh Ju Sa".split(" "),digits:null,dateFormat:"yyyy/mm/dd",firstDay:6,isRTL:!0}},leapYear:function(l){l=this._validate(l,this.minMonth,this.minDay,q.local.invalidYear);return 355===this.daysInYear(l.year())},weekOfYear:function(l,a,h){l=this.newDate(l,a,h);l.add(-l.dayOfWeek(),"d");return Math.floor((l.dayOfYear()-1)/7)+1},daysInYear:function(l){for(var a=
0,h=1;12>=h;h++)a+=this.daysInMonth(l,h);return a},daysInMonth:function(l,a){l=this._validate(l,a,this.minDay,q.local.invalidMonth).toJD()-24E5+.5;for(var h=a=0;h<m.length;h++){if(m[h]>l)return m[a]-m[a-1];a++}return 30},weekDay:function(l,a,h){return 5!==this.dayOfWeek(l,a,h)},toJD:function(l,a,h){l=this._validate(l,a,h,q.local.invalidDate);a=12*(l.year()-1)+l.month()-15292;return l.day()+m[a-1]-1+24E5-.5},fromJD:function(l){l=l-24E5+.5;for(var a=0,h=0;h<m.length&&!(m[h]>l);h++)a++;h=a+15292;var g=
Math.floor((h-1)/12);return this.newDate(g+1,h-12*g,l-m[a-1]+1)},isValid:function(l,a,h){var g=q.baseCalendar.prototype.isValid.apply(this,arguments);g&&(l=null!=l.year?l.year:l,g=1276<=l&&1500>=l);return g},_validate:function(l,a,h,g){var n=q.baseCalendar.prototype._validate.apply(this,arguments);if(1276>n.year||1500<n.year)throw g.replace(/\{0\}/,this.local.name);return n}});q.calendars.ummalqura=r;var m=[20,50,79,109,138,168,197,227,256,286,315,345,374,404,433,463,492,522,551,581,611,641,670,700,
729,759,788,818,847,877,906,936,965,995,1024,1054,1083,1113,1142,1172,1201,1231,1260,1290,1320,1350,1379,1409,1438,1468,1497,1527,1556,1586,1615,1645,1674,1704,1733,1763,1792,1822,1851,1881,1910,1940,1969,1999,2028,2058,2087,2117,2146,2176,2205,2235,2264,2294,2323,2353,2383,2413,2442,2472,2501,2531,2560,2590,2619,2649,2678,2708,2737,2767,2796,2826,2855,2885,2914,2944,2973,3003,3032,3062,3091,3121,3150,3180,3209,3239,3268,3298,3327,3357,3386,3416,3446,3476,3505,3535,3564,3594,3623,3653,3682,3712,3741,
3771,3800,3830,3859,3889,3918,3948,3977,4007,4036,4066,4095,4125,4155,4185,4214,4244,4273,4303,4332,4362,4391,4421,4450,4480,4509,4539,4568,4598,4627,4657,4686,4716,4745,4775,4804,4834,4863,4893,4922,4952,4981,5011,5040,5070,5099,5129,5158,5188,5218,5248,5277,5307,5336,5366,5395,5425,5454,5484,5513,5543,5572,5602,5631,5661,5690,5720,5749,5779,5808,5838,5867,5897,5926,5956,5985,6015,6044,6074,6103,6133,6162,6192,6221,6251,6281,6311,6340,6370,6399,6429,6458,6488,6517,6547,6576,6606,6635,6665,6694,6724,
6753,6783,6812,6842,6871,6901,6930,6960,6989,7019,7048,7078,7107,7137,7166,7196,7225,7255,7284,7314,7344,7374,7403,7433,7462,7492,7521,7551,7580,7610,7639,7669,7698,7728,7757,7787,7816,7846,7875,7905,7934,7964,7993,8023,8053,8083,8112,8142,8171,8201,8230,8260,8289,8319,8348,8378,8407,8437,8466,8496,8525,8555,8584,8614,8643,8673,8702,8732,8761,8791,8821,8850,8880,8909,8938,8968,8997,9027,9056,9086,9115,9145,9175,9205,9234,9264,9293,9322,9352,9381,9410,9440,9470,9499,9529,9559,9589,9618,9648,9677,9706,
9736,9765,9794,9824,9853,9883,9913,9943,9972,10002,10032,10061,10090,10120,10149,10178,10208,10237,10267,10297,10326,10356,10386,10415,10445,10474,10504,10533,10562,10592,10621,10651,10680,10710,10740,10770,10799,10829,10858,10888,10917,10947,10976,11005,11035,11064,11094,11124,11153,11183,11213,11242,11272,11301,11331,11360,11389,11419,11448,11478,11507,11537,11567,11596,11626,11655,11685,11715,11744,11774,11803,11832,11862,11891,11921,11950,11980,12010,12039,12069,12099,12128,12158,12187,12216,
12246,12275,12304,12334,12364,12393,12423,12453,12483,12512,12542,12571,12600,12630,12659,12688,12718,12747,12777,12807,12837,12866,12896,12926,12955,12984,13014,13043,13072,13102,13131,13161,13191,13220,13250,13280,13310,13339,13368,13398,13427,13456,13486,13515,13545,13574,13604,13634,13664,13693,13723,13752,13782,13811,13840,13870,13899,13929,13958,13988,14018,14047,14077,14107,14136,14166,14195,14224,14254,14283,14313,14342,14372,14401,14431,14461,14490,14520,14550,14579,14609,14638,14667,14697,
14726,14756,14785,14815,14844,14874,14904,14933,14963,14993,15021,15051,15081,15110,15140,15169,15199,15228,15258,15287,15317,15347,15377,15406,15436,15465,15494,15524,15553,15582,15612,15641,15671,15701,15731,15760,15790,15820,15849,15878,15908,15937,15966,15996,16025,16055,16085,16114,16144,16174,16204,16233,16262,16292,16321,16350,16380,16409,16439,16468,16498,16528,16558,16587,16617,16646,16676,16705,16734,16764,16793,16823,16852,16882,16912,16941,16971,17001,17030,17060,17089,17118,17148,17177,
17207,17236,17266,17295,17325,17355,17384,17414,17444,17473,17502,17532,17561,17591,17620,17650,17679,17709,17738,17768,17798,17827,17857,17886,17916,17945,17975,18004,18034,18063,18093,18122,18152,18181,18211,18241,18270,18300,18330,18359,18388,18418,18447,18476,18506,18535,18565,18595,18625,18654,18684,18714,18743,18772,18802,18831,18860,18890,18919,18949,18979,19008,19038,19068,19098,19127,19156,19186,19215,19244,19274,19303,19333,19362,19392,19422,19452,19481,19511,19540,19570,19599,19628,19658,
19687,19717,19746,19776,19806,19836,19865,19895,19924,19954,19983,20012,20042,20071,20101,20130,20160,20190,20219,20249,20279,20308,20338,20367,20396,20426,20455,20485,20514,20544,20573,20603,20633,20662,20692,20721,20751,20780,20810,20839,20869,20898,20928,20957,20987,21016,21046,21076,21105,21135,21164,21194,21223,21253,21282,21312,21341,21371,21400,21430,21459,21489,21519,21548,21578,21607,21637,21666,21696,21725,21754,21784,21813,21843,21873,21902,21932,21962,21991,22021,22050,22080,22109,22138,
22168,22197,22227,22256,22286,22316,22346,22375,22405,22434,22464,22493,22522,22552,22581,22611,22640,22670,22700,22730,22759,22789,22818,22848,22877,22906,22936,22965,22994,23024,23054,23083,23113,23143,23173,23202,23232,23261,23290,23320,23349,23379,23408,23438,23467,23497,23527,23556,23586,23616,23645,23674,23704,23733,23763,23792,23822,23851,23881,23910,23940,23970,23999,24029,24058,24088,24117,24147,24176,24206,24235,24265,24294,24324,24353,24383,24413,24442,24472,24501,24531,24560,24590,24619,
24648,24678,24707,24737,24767,24796,24826,24856,24885,24915,24944,24974,25003,25032,25062,25091,25121,25150,25180,25210,25240,25269,25299,25328,25358,25387,25416,25446,25475,25505,25534,25564,25594,25624,25653,25683,25712,25742,25771,25800,25830,25859,25888,25918,25948,25977,26007,26037,26067,26096,26126,26155,26184,26214,26243,26272,26302,26332,26361,26391,26421,26451,26480,26510,26539,26568,26598,26627,26656,26686,26715,26745,26775,26805,26834,26864,26893,26923,26952,26982,27011,27041,27070,27099,
27129,27159,27188,27218,27248,27277,27307,27336,27366,27395,27425,27454,27484,27513,27542,27572,27602,27631,27661,27691,27720,27750,27779,27809,27838,27868,27897,27926,27956,27985,28015,28045,28074,28104,28134,28163,28193,28222,28252,28281,28310,28340,28369,28399,28428,28458,28488,28517,28547,28577,28607,28636,28665,28695,28724,28754,28783,28813,28843,28872,28901,28931,28960,28990,29019,29049,29078,29108,29137,29167,29196,29226,29255,29285,29315,29345,29375,29404,29434,29463,29492,29522,29551,29580,
29610,29640,29669,29699,29729,29759,29788,29818,29847,29876,29906,29935,29964,29994,30023,30053,30082,30112,30141,30171,30200,30230,30259,30289,30318,30348,30378,30408,30437,30467,30496,30526,30555,30585,30614,30644,30673,30703,30732,30762,30791,30821,30850,30880,30909,30939,30968,30998,31027,31057,31086,31116,31145,31175,31204,31234,31263,31293,31322,31352,31381,31411,31441,31471,31500,31530,31559,31589,31618,31648,31676,31706,31736,31766,31795,31825,31854,31884,31913,31943,31972,32002,32031,32061,
32090,32120,32150,32180,32209,32239,32268,32298,32327,32357,32386,32416,32445,32475,32504,32534,32563,32593,32622,32652,32681,32711,32740,32770,32799,32829,32858,32888,32917,32947,32976,33006,33035,33065,33094,33124,33153,33183,33213,33243,33272,33302,33331,33361,33390,33420,33450,33479,33509,33539,33568,33598,33627,33657,33686,33716,33745,33775,33804,33834,33863,33893,33922,33952,33981,34011,34040,34069,34099,34128,34158,34187,34217,34247,34277,34306,34336,34365,34395,34424,34454,34483,34512,34542,
34571,34601,34631,34660,34690,34719,34749,34778,34808,34837,34867,34896,34926,34955,34985,35015,35044,35074,35103,35133,35162,35192,35222,35251,35280,35310,35340,35370,35399,35429,35458,35488,35517,35547,35576,35605,35635,35665,35694,35723,35753,35782,35811,35841,35871,35901,35930,35960,35989,36019,36048,36078,36107,36136,36166,36195,36225,36254,36284,36314,36343,36373,36403,36433,36462,36492,36521,36551,36580,36610,36639,36669,36698,36728,36757,36786,36816,36845,36875,36904,36934,36963,36993,37022,
37052,37081,37111,37141,37170,37200,37229,37259,37288,37318,37347,37377,37406,37436,37465,37495,37524,37554,37584,37613,37643,37672,37701,37731,37760,37790,37819,37849,37878,37908,37938,37967,37997,38027,38056,38085,38115,38144,38174,38203,38233,38262,38292,38322,38351,38381,38410,38440,38469,38499,38528,38558,38587,38617,38646,38676,38705,38735,38764,38794,38823,38853,38882,38912,38941,38971,39001,39030,39059,39089,39118,39148,39178,39208,39237,39267,39297,39326,39355,39385,39414,39444,39473,39503,
39532,39562,39592,39621,39650,39680,39709,39739,39768,39798,39827,39857,39886,39916,39946,39975,40005,40035,40064,40094,40123,40153,40182,40212,40241,40271,40300,40330,40359,40389,40418,40448,40477,40507,40536,40566,40595,40625,40655,40685,40714,40744,40773,40803,40832,40862,40892,40921,40951,40980,41009,41039,41068,41098,41127,41157,41186,41216,41245,41275,41304,41334,41364,41393,41422,41452,41481,41511,41540,41570,41599,41629,41658,41688,41718,41748,41777,41807,41836,41865,41894,41924,41953,41983,
42012,42042,42072,42102,42131,42161,42190,42220,42249,42279,42308,42337,42367,42397,42426,42456,42485,42515,42545,42574,42604,42633,42662,42692,42721,42751,42780,42810,42839,42869,42899,42929,42958,42988,43017,43046,43076,43105,43135,43164,43194,43223,43253,43283,43312,43342,43371,43401,43430,43460,43489,43519,43548,43578,43607,43637,43666,43696,43726,43755,43785,43814,43844,43873,43903,43932,43962,43991,44021,44050,44080,44109,44139,44169,44198,44228,44258,44287,44317,44346,44375,44405,44434,44464,
44493,44523,44553,44582,44612,44641,44671,44700,44730,44759,44788,44818,44847,44877,44906,44936,44966,44996,45025,45055,45084,45114,45143,45172,45202,45231,45261,45290,45320,45350,45380,45409,45439,45468,45498,45527,45556,45586,45615,45644,45674,45704,45733,45763,45793,45823,45852,45882,45911,45940,45970,45999,46028,46058,46088,46117,46147,46177,46206,46236,46265,46295,46324,46354,46383,46413,46442,46472,46501,46531,46560,46590,46620,46649,46679,46708,46738,46767,46797,46826,46856,46885,46915,46944,
46974,47003,47033,47063,47092,47122,47151,47181,47210,47240,47269,47298,47328,47357,47387,47417,47446,47476,47506,47535,47565,47594,47624,47653,47682,47712,47741,47771,47800,47830,47860,47890,47919,47949,47978,48008,48037,48066,48096,48125,48155,48184,48214,48244,48273,48303,48333,48362,48392,48421,48450,48480,48509,48538,48568,48598,48627,48657,48687,48717,48746,48776,48805,48834,48864,48893,48922,48952,48982,49011,49041,49071,49100,49130,49160,49189,49218,49248,49277,49306,49336,49365,49395,49425,
49455,49484,49514,49543,49573,49602,49632,49661,49690,49720,49749,49779,49809,49838,49868,49898,49927,49957,49986,50016,50045,50075,50104,50133,50163,50192,50222,50252,50281,50311,50340,50370,50400,50429,50459,50488,50518,50547,50576,50606,50635,50665,50694,50724,50754,50784,50813,50843,50872,50902,50931,50960,50990,51019,51049,51078,51108,51138,51167,51197,51227,51256,51286,51315,51345,51374,51403,51433,51462,51492,51522,51552,51582,51611,51641,51670,51699,51729,51758,51787,51816,51846,51876,51906,
51936,51965,51995,52025,52054,52083,52113,52142,52171,52200,52230,52260,52290,52319,52349,52379,52408,52438,52467,52497,52526,52555,52585,52614,52644,52673,52703,52733,52762,52792,52822,52851,52881,52910,52939,52969,52998,53028,53057,53087,53116,53146,53176,53205,53235,53264,53294,53324,53353,53383,53412,53441,53471,53500,53530,53559,53589,53619,53648,53678,53708,53737,53767,53796,53825,53855,53884,53913,53943,53973,54003,54032,54062,54092,54121,54151,54180,54209,54239,54268,54297,54327,54357,54387,
54416,54446,54476,54505,54535,54564,54593,54623,54652,54681,54711,54741,54770,54800,54830,54859,54889,54919,54948,54977,55007,55036,55066,55095,55125,55154,55184,55213,55243,55273,55302,55332,55361,55391,55420,55450,55479,55508,55538,55567,55597,55627,55657,55686,55716,55745,55775,55804,55834,55863,55892,55922,55951,55981,56011,56040,56070,56100,56129,56159,56188,56218,56247,56276,56306,56335,56365,56394,56424,56454,56483,56513,56543,56572,56601,56631,56660,56690,56719,56749,56778,56808,56837,56867,
56897,56926,56956,56985,57015,57044,57074,57103,57133,57162,57192,57221,57251,57280,57310,57340,57369,57399,57429,57458,57487,57517,57546,57576,57605,57634,57664,57694,57723,57753,57783,57813,57842,57871,57901,57930,57959,57989,58018,58048,58077,58107,58137,58167,58196,58226,58255,58285,58314,58343,58373,58402,58432,58461,58491,58521,58551,58580,58610,58639,58669,58698,58727,58757,58786,58816,58845,58875,58905,58934,58964,58994,59023,59053,59082,59111,59141,59170,59200,59229,59259,59288,59318,59348,
59377,59407,59436,59466,59495,59525,59554,59584,59613,59643,59672,59702,59731,59761,59791,59820,59850,59879,59909,59939,59968,59997,60027,60056,60086,60115,60145,60174,60204,60234,60264,60293,60323,60352,60381,60411,60440,60469,60499,60528,60558,60588,60618,60648,60677,60707,60736,60765,60795,60824,60853,60883,60912,60942,60972,61002,61031,61061,61090,61120,61149,61179,61208,61237,61267,61296,61326,61356,61385,61415,61445,61474,61504,61533,61563,61592,61621,61651,61680,61710,61739,61769,61799,61828,
61858,61888,61917,61947,61976,62006,62035,62064,62094,62123,62153,62182,62212,62242,62271,62301,62331,62360,62390,62419,62448,62478,62507,62537,62566,62596,62625,62655,62685,62715,62744,62774,62803,62832,62862,62891,62921,62950,62980,63009,63039,63069,63099,63128,63157,63187,63216,63246,63275,63305,63334,63363,63393,63423,63453,63482,63512,63541,63571,63600,63630,63659,63689,63718,63747,63777,63807,63836,63866,63895,63925,63955,63984,64014,64043,64073,64102,64131,64161,64190,64220,64249,64279,64309,
64339,64368,64398,64427,64457,64486,64515,64545,64574,64603,64633,64663,64692,64722,64752,64782,64811,64841,64870,64899,64929,64958,64987,65017,65047,65076,65106,65136,65166,65195,65225,65254,65283,65313,65342,65371,65401,65431,65460,65490,65520,65549,65579,65608,65638,65667,65697,65726,65755,65785,65815,65844,65874,65903,65933,65963,65992,66022,66051,66081,66110,66140,66169,66199,66228,66258,66287,66317,66346,66376,66405,66435,66465,66494,66524,66553,66583,66612,66641,66671,66700,66730,66760,66789,
66819,66849,66878,66908,66937,66967,66996,67025,67055,67084,67114,67143,67173,67203,67233,67262,67292,67321,67351,67380,67409,67439,67468,67497,67527,67557,67587,67617,67646,67676,67705,67735,67764,67793,67823,67852,67882,67911,67941,67971,68E3,68030,68060,68089,68119,68148,68177,68207,68236,68266,68295,68325,68354,68384,68414,68443,68473,68502,68532,68561,68591,68620,68650,68679,68708,68738,68768,68797,68827,68857,68886,68916,68946,68975,69004,69034,69063,69092,69122,69152,69181,69211,69240,69270,
69300,69330,69359,69388,69418,69447,69476,69506,69535,69565,69595,69624,69654,69684,69713,69743,69772,69802,69831,69861,69890,69919,69949,69978,70008,70038,70067,70097,70126,70156,70186,70215,70245,70274,70303,70333,70362,70392,70421,70451,70481,70510,70540,70570,70599,70629,70658,70687,70717,70746,70776,70805,70835,70864,70894,70924,70954,70983,71013,71042,71071,71101,71130,71159,71189,71218,71248,71278,71308,71337,71367,71397,71426,71455,71485,71514,71543,71573,71602,71632,71662,71691,71721,71751,
71781,71810,71839,71869,71898,71927,71957,71986,72016,72046,72075,72105,72135,72164,72194,72223,72253,72282,72311,72341,72370,72400,72429,72459,72489,72518,72548,72577,72607,72637,72666,72695,72725,72754,72784,72813,72843,72872,72902,72931,72961,72991,73020,73050,73080,73109,73139,73168,73197,73227,73256,73286,73315,73345,73375,73404,73434,73464,73493,73523,73552,73581,73611,73640,73669,73699,73729,73758,73788,73818,73848,73877,73907,73936,73965,73995,74024,74053,74083,74113,74142,74172,74202,74231,
74261,74291,74320,74349,74379,74408,74437,74467,74497,74526,74556,74586,74615,74645,74675,74704,74733,74763,74792,74822,74851,74881,74910,74940,74969,74999,75029,75058,75088,75117,75147,75176,75206,75235,75264,75294,75323,75353,75383,75412,75442,75472,75501,75531,75560,75590,75619,75648,75678,75707,75737,75766,75796,75826,75856,75885,75915,75944,75974,76003,76032,76062,76091,76121,76150,76180,76210,76239,76269,76299,76328,76358,76387,76416,76446,76475,76505,76534,76564,76593,76623,76653,76682,76712,
76741,76771,76801,76830,76859,76889,76918,76948,76977,77007,77036,77066,77096,77125,77155,77185,77214,77243,77273,77302,77332,77361,77390,77420,77450,77479,77509,77539,77569,77598,77627,77657,77686,77715,77745,77774,77804,77833,77863,77893,77923,77952,77982,78011,78041,78070,78099,78129,78158,78188,78217,78247,78277,78307,78336,78366,78395,78425,78454,78483,78513,78542,78572,78601,78631,78661,78690,78720,78750,78779,78808,78838,78867,78897,78926,78956,78985,79015,79044,79074,79104,79133,79163,79192,
79222,79251,79281,79310,79340,79369,79399,79428,79458,79487,79517,79546,79576,79606,79635,79665,79695,79724,79753,79783,79812,79841,79871,79900,79930,79960,79990]},{"../main":621,"object-assign":499}],621:[function(b,N,I){function r(){this.regionalOptions=[];this.regionalOptions[""]={invalidCalendar:"Calendar {0} not found",invalidDate:"Invalid {0} date",invalidMonth:"Invalid {0} month",invalidYear:"Invalid {0} year",differentCalendars:"Cannot mix {0} and {1} dates"};this.local=this.regionalOptions[""];
this.calendars={};this._localCals={}}function q(g,n,p,d){this._calendar=g;this._year=n;this._month=p;this._day=d;if(0===this._calendar._validateLevel&&!this._calendar.isValid(this._year,this._month,this._day))throw(h.local.invalidDate||h.regionalOptions[""].invalidDate).replace(/\{0\}/,this._calendar.local.name);}function m(g,n){g=""+g;return"000000".substring(0,n-g.length)+g}function l(){this.shortYearCutoff="+10"}function a(g){this.local=this.regionalOptions[g]||this.regionalOptions[""]}b=b("object-assign");
b(r.prototype,{instance:function(g,n){g=(g||"gregorian").toLowerCase();n=n||"";var p=this._localCals[g+"-"+n];!p&&this.calendars[g]&&(p=new this.calendars[g](n),this._localCals[g+"-"+n]=p);if(!p)throw(this.local.invalidCalendar||this.regionalOptions[""].invalidCalendar).replace(/\{0\}/,g);return p},newDate:function(g,n,p,d,e){d=(null!=g&&g.year?g.calendar():"string"===typeof d?this.instance(d,e):d)||this.instance();return d.newDate(g,n,p)},substituteDigits:function(g){return function(n){return(n+
"").replace(/[0-9]/g,function(p){return g[p]})}},substituteChineseDigits:function(g,n){return function(p){for(var d="",e=0;0<p;){var f=p%10;d=(0===f?"":g[f]+n[e])+d;e++;p=Math.floor(p/10)}0===d.indexOf(g[1]+n[1])&&(d=d.substr(1));return d||g[0]}}});b(q.prototype,{newDate:function(g,n,p){return this._calendar.newDate(null==g?this:g,n,p)},year:function(g){return 0===arguments.length?this._year:this.set(g,"y")},month:function(g){return 0===arguments.length?this._month:this.set(g,"m")},day:function(g){return 0===
arguments.length?this._day:this.set(g,"d")},date:function(g,n,p){if(!this._calendar.isValid(g,n,p))throw(h.local.invalidDate||h.regionalOptions[""].invalidDate).replace(/\{0\}/,this._calendar.local.name);this._year=g;this._month=n;this._day=p;return this},leapYear:function(){return this._calendar.leapYear(this)},epoch:function(){return this._calendar.epoch(this)},formatYear:function(){return this._calendar.formatYear(this)},monthOfYear:function(){return this._calendar.monthOfYear(this)},weekOfYear:function(){return this._calendar.weekOfYear(this)},
daysInYear:function(){return this._calendar.daysInYear(this)},dayOfYear:function(){return this._calendar.dayOfYear(this)},daysInMonth:function(){return this._calendar.daysInMonth(this)},dayOfWeek:function(){return this._calendar.dayOfWeek(this)},weekDay:function(){return this._calendar.weekDay(this)},extraInfo:function(){return this._calendar.extraInfo(this)},add:function(g,n){return this._calendar.add(this,g,n)},set:function(g,n){return this._calendar.set(this,g,n)},compareTo:function(g){if(this._calendar.name!==
g._calendar.name)throw(h.local.differentCalendars||h.regionalOptions[""].differentCalendars).replace(/\{0\}/,this._calendar.local.name).replace(/\{1\}/,g._calendar.local.name);g=this._year!==g._year?this._year-g._year:this._month!==g._month?this.monthOfYear()-g.monthOfYear():this._day-g._day;return 0===g?0:0>g?-1:1},calendar:function(){return this._calendar},toJD:function(){return this._calendar.toJD(this)},fromJD:function(g){return this._calendar.fromJD(g)},toJSDate:function(){return this._calendar.toJSDate(this)},
fromJSDate:function(g){return this._calendar.fromJSDate(g)},toString:function(){return(0>this.year()?"-":"")+m(Math.abs(this.year()),4)+"-"+m(this.month(),2)+"-"+m(this.day(),2)}});b(l.prototype,{_validateLevel:0,newDate:function(g,n,p){if(null==g)return this.today();g.year&&(this._validate(g,n,p,h.local.invalidDate||h.regionalOptions[""].invalidDate),p=g.day(),n=g.month(),g=g.year());return new q(this,g,n,p)},today:function(){return this.fromJSDate(new Date)},epoch:function(g){return 0>this._validate(g,
this.minMonth,this.minDay,h.local.invalidYear||h.regionalOptions[""].invalidYear).year()?this.local.epochs[0]:this.local.epochs[1]},formatYear:function(g){g=this._validate(g,this.minMonth,this.minDay,h.local.invalidYear||h.regionalOptions[""].invalidYear);return(0>g.year()?"-":"")+m(Math.abs(g.year()),4)},monthsInYear:function(g){this._validate(g,this.minMonth,this.minDay,h.local.invalidYear||h.regionalOptions[""].invalidYear);return 12},monthOfYear:function(g,n){g=this._validate(g,n,this.minDay,
h.local.invalidMonth||h.regionalOptions[""].invalidMonth);return(g.month()+this.monthsInYear(g)-this.firstMonth)%this.monthsInYear(g)+this.minMonth},fromMonthOfYear:function(g,n){n=(n+this.firstMonth-2*this.minMonth)%this.monthsInYear(g)+this.minMonth;this._validate(g,n,this.minDay,h.local.invalidMonth||h.regionalOptions[""].invalidMonth);return n},daysInYear:function(g){g=this._validate(g,this.minMonth,this.minDay,h.local.invalidYear||h.regionalOptions[""].invalidYear);return this.leapYear(g)?366:
365},dayOfYear:function(g,n,p){g=this._validate(g,n,p,h.local.invalidDate||h.regionalOptions[""].invalidDate);return g.toJD()-this.newDate(g.year(),this.fromMonthOfYear(g.year(),this.minMonth),this.minDay).toJD()+1},daysInWeek:function(){return 7},dayOfWeek:function(g,n,p){g=this._validate(g,n,p,h.local.invalidDate||h.regionalOptions[""].invalidDate);return(Math.floor(this.toJD(g))+2)%this.daysInWeek()},extraInfo:function(g,n,p){this._validate(g,n,p,h.local.invalidDate||h.regionalOptions[""].invalidDate);
return{}},add:function(g,n,p){this._validate(g,this.minMonth,this.minDay,h.local.invalidDate||h.regionalOptions[""].invalidDate);return this._correctAdd(g,this._add(g,n,p),n,p)},_add:function(g,n,p){this._validateLevel++;if("d"===p||"w"===p){n=g.toJD()+n*("w"===p?this.daysInWeek():1);var d=g.calendar().fromJD(n);this._validateLevel--;return[d.year(),d.month(),d.day()]}try{var e=g.year()+("y"===p?n:0),f=g.monthOfYear()+("m"===p?n:0);d=g.day();if("y"===p)g.month()!==this.fromMonthOfYear(e,f)&&(f=this.newDate(e,
g.month(),this.minDay).monthOfYear()),f=Math.min(f,this.monthsInYear(e)),d=Math.min(d,this.daysInMonth(e,this.fromMonthOfYear(e,f)));else if("m"===p){for(;f<this.minMonth;)e--,f+=this.monthsInYear(e);for(var k=this.monthsInYear(e);f>k-1+this.minMonth;)e++,f-=k,k=this.monthsInYear(e);d=Math.min(d,this.daysInMonth(e,this.fromMonthOfYear(e,f)))}var t=[e,this.fromMonthOfYear(e,f),d];this._validateLevel--;return t}catch(v){throw this._validateLevel--,v;}},_correctAdd:function(g,n,p,d){this.hasYearZero||
"y"!==d&&"m"!==d||0!==n[0]&&0<g.year()===0<n[0]||(n={y:[1,1,"y"],m:[1,this.monthsInYear(-1),"m"],w:[this.daysInWeek(),this.daysInYear(-1),"d"],d:[1,this.daysInYear(-1),"d"]}[d],n=this._add(g,p*n[0]+(0>p?-1:1)*n[1],n[2]));return g.date(n[0],n[1],n[2])},set:function(g,n,p){this._validate(g,this.minMonth,this.minDay,h.local.invalidDate||h.regionalOptions[""].invalidDate);var d="y"===p?n:g.year(),e="m"===p?n:g.month();n="d"===p?n:g.day();if("y"===p||"m"===p)n=Math.min(n,this.daysInMonth(d,e));return g.date(d,
e,n)},isValid:function(g,n,p){this._validateLevel++;var d=this.hasYearZero||0!==g;d&&(g=this.newDate(g,n,this.minDay),d=n>=this.minMonth&&n-this.minMonth<this.monthsInYear(g)&&p>=this.minDay&&p-this.minDay<this.daysInMonth(g));this._validateLevel--;return d},toJSDate:function(g,n,p){g=this._validate(g,n,p,h.local.invalidDate||h.regionalOptions[""].invalidDate);return h.instance().fromJD(this.toJD(g)).toJSDate()},fromJSDate:function(g){return this.fromJD(h.instance().fromJSDate(g).toJD())},_validate:function(g,
n,p,d){if(g.year){if(0===this._validateLevel&&this.name!==g.calendar().name)throw(h.local.differentCalendars||h.regionalOptions[""].differentCalendars).replace(/\{0\}/,this.local.name).replace(/\{1\}/,g.calendar().local.name);return g}try{this._validateLevel++;if(1===this._validateLevel&&!this.isValid(g,n,p))throw d.replace(/\{0\}/,this.local.name);var e=this.newDate(g,n,p);this._validateLevel--;return e}catch(f){throw this._validateLevel--,f;}}});a.prototype=new l;b(a.prototype,{name:"Gregorian",
jdEpoch:1721425.5,daysPerMonth:[31,28,31,30,31,30,31,31,30,31,30,31],hasYearZero:!1,minMonth:1,firstMonth:1,minDay:1,regionalOptions:{"":{name:"Gregorian",epochs:["BCE","CE"],monthNames:"January February March April May June July August September October November December".split(" "),monthNamesShort:"Jan Feb Mar Apr May Jun Jul Aug Sep Oct Nov Dec".split(" "),dayNames:"Sunday Monday Tuesday Wednesday Thursday Friday Saturday".split(" "),dayNamesShort:"Sun Mon Tue Wed Thu Fri Sat".split(" "),dayNamesMin:"Su Mo Tu We Th Fr Sa".split(" "),
digits:null,dateFormat:"mm/dd/yyyy",firstDay:0,isRTL:!1}},leapYear:function(g){g=this._validate(g,this.minMonth,this.minDay,h.local.invalidYear||h.regionalOptions[""].invalidYear);g=g.year()+(0>g.year()?1:0);return 0===g%4&&(0!==g%100||0===g%400)},weekOfYear:function(g,n,p){g=this.newDate(g,n,p);g.add(4-(g.dayOfWeek()||7),"d");return Math.floor((g.dayOfYear()-1)/7)+1},daysInMonth:function(g,n){g=this._validate(g,n,this.minDay,h.local.invalidMonth||h.regionalOptions[""].invalidMonth);return this.daysPerMonth[g.month()-
1]+(2===g.month()&&this.leapYear(g.year())?1:0)},weekDay:function(g,n,p){return 6>(this.dayOfWeek(g,n,p)||7)},toJD:function(g,n,p){p=this._validate(g,n,p,h.local.invalidDate||h.regionalOptions[""].invalidDate);g=p.year();n=p.month();p=p.day();0>g&&g++;3>n&&(n+=12,g--);var d=Math.floor(g/100);return Math.floor(365.25*(g+4716))+Math.floor(30.6001*(n+1))+p+(2-d+Math.floor(d/4))-1524.5},fromJD:function(g){g=Math.floor(g+.5);var n=Math.floor((g-1867216.25)/36524.25);n=g+1+n-Math.floor(n/4);var p=n+1524;
g=Math.floor((p-122.1)/365.25);var d=Math.floor(365.25*g);n=Math.floor((p-d)/30.6001);p=p-d-Math.floor(30.6001*n);n-=13.5<n?13:1;g-=2.5<n?4716:4715;0>=g&&g--;return this.newDate(g,n,p)},toJSDate:function(g,n,p){g=this._validate(g,n,p,h.local.invalidDate||h.regionalOptions[""].invalidDate);g=new Date(g.year(),g.month()-1,g.day());g.setHours(0);g.setMinutes(0);g.setSeconds(0);g.setMilliseconds(0);g.setHours(12<g.getHours()?g.getHours()+2:0);return g},fromJSDate:function(g){return this.newDate(g.getFullYear(),
g.getMonth()+1,g.getDate())}});var h=N.exports=new r;h.cdate=q;h.baseCalendar=l;h.calendars.gregorian=a},{"object-assign":499}],622:[function(b,N,I){N=b("object-assign");var r=b("./main");N(r.regionalOptions[""],{invalidArguments:"Invalid arguments",invalidFormat:"Cannot format a date from another calendar",missingNumberAt:"Missing number at position {0}",unknownNameAt:"Unknown name at position {0}",unexpectedLiteralAt:"Unexpected literal at position {0}",unexpectedText:"Additional text found at end"});
r.local=r.regionalOptions[""];N(r.cdate.prototype,{formatDate:function(q,m){"string"!==typeof q&&(m=q,q="");return this._calendar.formatDate(q||"",this,m)}});N(r.baseCalendar.prototype,{UNIX_EPOCH:r.instance().newDate(1970,1,1).toJD(),SECS_PER_DAY:86400,TICKS_EPOCH:r.instance().jdEpoch,TICKS_PER_DAY:864E9,ATOM:"yyyy-mm-dd",COOKIE:"D, dd M yyyy",FULL:"DD, MM d, yyyy",ISO_8601:"yyyy-mm-dd",JULIAN:"J",RFC_822:"D, d M yy",RFC_850:"DD, dd-M-yy",RFC_1036:"D, d M yy",RFC_1123:"D, d M yyyy",RFC_2822:"D, d M yyyy",
RSS:"D, d M yy",TICKS:"!",TIMESTAMP:"@",W3C:"yyyy-mm-dd",formatDate:function(q,m,l){"string"!==typeof q&&(l=m,m=q,q="");if(!m)return"";if(m.calendar()!==this)throw r.local.invalidFormat||r.regionalOptions[""].invalidFormat;q=q||this.local.dateFormat;l=l||{};for(var a=l.dayNamesShort||this.local.dayNamesShort,h=l.dayNames||this.local.dayNames,g=l.monthNumbers||this.local.monthNumbers,n=l.monthNamesShort||this.local.monthNamesShort,p=l.monthNames||this.local.monthNames,d=function(E,C){for(var u=1;z+
u<q.length&&q.charAt(z+u)===E;)u++;z+=u-1;return 1<Math.floor(u/(C||1))},e=function(E,C,u,D){C=""+C;if(d(E,D))for(;C.length<u;)C="0"+C;return C},f=function(E,C,u,D){return d(E)?D[C]:u[C]},k=this,t=function(E){return"function"===typeof g?g.call(k,E,d("m")):y(e("m",E.month(),2))},v=function(E,C){return C?"function"===typeof p?p.call(k,E):p[E.month()-k.minMonth]:"function"===typeof n?n.call(k,E):n[E.month()-k.minMonth]},w=this.local.digits,y=function(E){return l.localNumbers&&w?w(E):E},B="",A=!1,z=0;z<
q.length;z++)if(A)"'"!==q.charAt(z)||d("'")?B+=q.charAt(z):A=!1;else switch(q.charAt(z)){case "d":B+=y(e("d",m.day(),2));break;case "D":B+=f("D",m.dayOfWeek(),a,h);break;case "o":B+=e("o",m.dayOfYear(),3);break;case "w":B+=e("w",m.weekOfYear(),2);break;case "m":B+=t(m);break;case "M":B+=v(m,d("M"));break;case "y":B+=d("y",2)?m.year():(10>m.year()%100?"0":"")+m.year()%100;break;case "Y":d("Y",2);B+=m.formatYear();break;case "J":B+=m.toJD();break;case "@":B+=(m.toJD()-this.UNIX_EPOCH)*this.SECS_PER_DAY;
break;case "!":B+=(m.toJD()-this.TICKS_EPOCH)*this.TICKS_PER_DAY;break;case "'":d("'")?B+="'":A=!0;break;default:B+=q.charAt(z)}return B},parseDate:function(q,m,l){if(null==m)throw r.local.invalidArguments||r.regionalOptions[""].invalidArguments;m="object"===typeof m?m.toString():m+"";if(""===m)return null;q=q||this.local.dateFormat;l=l||{};var a=l.shortYearCutoff||this.shortYearCutoff;a="string"!==typeof a?a:this.today().year()%100+parseInt(a,10);for(var h=l.dayNamesShort||this.local.dayNamesShort,
g=l.dayNames||this.local.dayNames,n=l.parseMonth||this.local.parseMonth,p=l.monthNumbers||this.local.monthNumbers,d=l.monthNamesShort||this.local.monthNamesShort,e=l.monthNames||this.local.monthNames,f=l=-1,k=-1,t=-1,v=-1,w=!1,y=!1,B=function(L,K){for(var H=1;J+H<q.length&&q.charAt(J+H)===L;)H++;J+=H-1;return 1<Math.floor(H/(K||1))},A=function(L,K){K=B(L,K);L=[2,3,K?4:2,K?4:2,10,11,20]["oyYJ@!".indexOf(L)+1];L=new RegExp("^-?\\d{1,"+L+"}");L=m.substring(G).match(L);if(!L)throw(r.local.missingNumberAt||
r.regionalOptions[""].missingNumberAt).replace(/\{0\}/,G);G+=L[0].length;return parseInt(L[0],10)},z=this,E=function(){if("function"===typeof p){B("m");var L=p.call(z,m.substring(G));G+=L.length;return L}return A("m")},C=function(L,K,H,Q){L=B(L,Q)?H:K;for(K=0;K<L.length;K++)if(m.substr(G,L[K].length).toLowerCase()===L[K].toLowerCase())return G+=L[K].length,K+z.minMonth;throw(r.local.unknownNameAt||r.regionalOptions[""].unknownNameAt).replace(/\{0\}/,G);},u=function(){if("function"===typeof e){var L=
B("M")?e.call(z,m.substring(G)):d.call(z,m.substring(G));G+=L.length;return L}return C("M",d,e)},D=function(){if(m.charAt(G)!==q.charAt(J))throw(r.local.unexpectedLiteralAt||r.regionalOptions[""].unexpectedLiteralAt).replace(/\{0\}/,G);G++},G=0,J=0;J<q.length;J++)if(y)"'"!==q.charAt(J)||B("'")?D():y=!1;else switch(q.charAt(J)){case "d":t=A("d");break;case "D":C("D",h,g);break;case "o":v=A("o");break;case "w":A("w");break;case "m":k=E();break;case "M":k=u();break;case "y":f=J;w=!B("y",2);J=f;f=A("y",
2);break;case "Y":f=A("Y",2);break;case "J":l=A("J")+.5;"."===m.charAt(G)&&(G++,A("J"));break;case "@":l=A("@")/this.SECS_PER_DAY+this.UNIX_EPOCH;break;case "!":l=A("!")/this.TICKS_PER_DAY+this.TICKS_EPOCH;break;case "*":G=m.length;break;case "'":B("'")?D():y=!0;break;default:D()}if(G<m.length)throw r.local.unexpectedText||r.regionalOptions[""].unexpectedText;-1===f?f=this.today().year():100>f&&w&&(f+=-1===a?1900:this.today().year()-this.today().year()%100-(f<=a?0:100));"string"===typeof k&&(k=n.call(this,
f,k));if(-1<v)for(k=1,t=v,a=this.daysInMonth(f,k);t>a;a=this.daysInMonth(f,k))k++,t-=a;return-1<l?this.fromJD(l):this.newDate(f,k,t)},determineDate:function(q,m,l,a,h){l&&"object"!==typeof l&&(h=a,a=l,l=null);"string"!==typeof a&&(h=a,a="");m=m?m.newDate():null;if(null==q)q=m;else{if("string"===typeof q)a:{try{var g=this.parseDate(a,q,h);break a}catch(n){}q=q.toLowerCase();l=(q.match(/^c/)&&l?l.newDate():null)||this.today();a=/([+-]?[0-9]+)\s*(d|w|m|y)?/g;for(h=a.exec(q);h;)l.add(parseInt(h[1],10),
h[2]||"d"),h=a.exec(q);g=l}else g="number"===typeof q?isNaN(q)||Infinity===q||-Infinity===q?m:this.today().add(q,"d"):this.newDate(q);q=g}return q}})},{"./main":621,"object-assign":499}],623:[function(b,N,I){N.exports=b("cwise-compiler")({args:["array",{offset:[1],array:0},"scalar","scalar","index"],pre:{body:"{}",args:[],thisVars:[],localVars:[]},post:{body:"{}",args:[],thisVars:[],localVars:[]},body:{body:"{\n        var _inline_1_da \x3d _inline_1_arg0_ - _inline_1_arg3_\n        var _inline_1_db \x3d _inline_1_arg1_ - _inline_1_arg3_\n        if((_inline_1_da \x3e\x3d 0) !\x3d\x3d (_inline_1_db \x3e\x3d 0)) {\n          _inline_1_arg2_.push(_inline_1_arg4_[0] + 0.5 + 0.5 * (_inline_1_da + _inline_1_db) / (_inline_1_da - _inline_1_db))\n        }\n      }",
args:[{name:"_inline_1_arg0_",lvalue:!1,rvalue:!0,count:1},{name:"_inline_1_arg1_",lvalue:!1,rvalue:!0,count:1},{name:"_inline_1_arg2_",lvalue:!1,rvalue:!0,count:1},{name:"_inline_1_arg3_",lvalue:!1,rvalue:!0,count:2},{name:"_inline_1_arg4_",lvalue:!1,rvalue:!0,count:1}],thisVars:[],localVars:["_inline_1_da","_inline_1_db"]},funcName:"zeroCrossings"})},{"cwise-compiler":151}],624:[function(b,N,I){N.exports=function(q,m){var l=[];m=+m||0;r(q.hi(q.shape[0]-1),l,m);return l};var r=b("./lib/zc-core")},
{"./lib/zc-core":623}],625:[function(b,N,I){N.exports=[{path:"",backoff:0},{path:"M-2.4,-3V3L0.6,0Z",backoff:.6},{path:"M-3.7,-2.5V2.5L1.3,0Z",backoff:1.3},{path:"M-4.45,-3L-1.65,-0.2V0.2L-4.45,3L1.55,0Z",backoff:1.55},{path:"M-2.2,-2.2L-0.2,-0.2V0.2L-2.2,2.2L-1.4,3L1.6,0L-1.4,-3Z",backoff:1.6},{path:"M-4.4,-2.1L-0.6,-0.2V0.2L-4.4,2.1L-4,3L2,0L-4,-3Z",backoff:2},{path:"M2,0A2,2 0 1,1 0,-2A2,2 0 0,1 2,0Z",backoff:0,noRotate:!0},{path:"M2,2V-2H-2V2Z",backoff:0,noRotate:!0}]},{}],626:[function(b,N,I){I=
b("./arrow_paths");var r=b("../../plots/font_attributes"),q=b("../../plots/cartesian/constants"),m=b("../../plot_api/plot_template").templatedArray;b("../../constants/axis_placeable_objects");N.exports=m("annotation",{visible:{valType:"boolean",dflt:!0,editType:"calc+arraydraw"},text:{valType:"string",editType:"calc+arraydraw"},textangle:{valType:"angle",dflt:0,editType:"calc+arraydraw"},font:r({editType:"calc+arraydraw",colorEditType:"arraydraw"}),width:{valType:"number",min:1,dflt:null,editType:"calc+arraydraw"},
height:{valType:"number",min:1,dflt:null,editType:"calc+arraydraw"},opacity:{valType:"number",min:0,max:1,dflt:1,editType:"arraydraw"},align:{valType:"enumerated",values:["left","center","right"],dflt:"center",editType:"arraydraw"},valign:{valType:"enumerated",values:["top","middle","bottom"],dflt:"middle",editType:"arraydraw"},bgcolor:{valType:"color",dflt:"rgba(0,0,0,0)",editType:"arraydraw"},bordercolor:{valType:"color",dflt:"rgba(0,0,0,0)",editType:"arraydraw"},borderpad:{valType:"number",min:0,
dflt:1,editType:"calc+arraydraw"},borderwidth:{valType:"number",min:0,dflt:1,editType:"calc+arraydraw"},showarrow:{valType:"boolean",dflt:!0,editType:"calc+arraydraw"},arrowcolor:{valType:"color",editType:"arraydraw"},arrowhead:{valType:"integer",min:0,max:I.length,dflt:1,editType:"arraydraw"},startarrowhead:{valType:"integer",min:0,max:I.length,dflt:1,editType:"arraydraw"},arrowside:{valType:"flaglist",flags:["end","start"],extras:["none"],dflt:"end",editType:"arraydraw"},arrowsize:{valType:"number",
min:.3,dflt:1,editType:"calc+arraydraw"},startarrowsize:{valType:"number",min:.3,dflt:1,editType:"calc+arraydraw"},arrowwidth:{valType:"number",min:.1,editType:"calc+arraydraw"},standoff:{valType:"number",min:0,dflt:0,editType:"calc+arraydraw"},startstandoff:{valType:"number",min:0,dflt:0,editType:"calc+arraydraw"},ax:{valType:"any",editType:"calc+arraydraw"},ay:{valType:"any",editType:"calc+arraydraw"},axref:{valType:"enumerated",dflt:"pixel",values:["pixel",q.idRegex.x.toString()],editType:"calc"},
ayref:{valType:"enumerated",dflt:"pixel",values:["pixel",q.idRegex.y.toString()],editType:"calc"},xref:{valType:"enumerated",values:["paper",q.idRegex.x.toString()],editType:"calc"},x:{valType:"any",editType:"calc+arraydraw"},xanchor:{valType:"enumerated",values:["auto","left","center","right"],dflt:"auto",editType:"calc+arraydraw"},xshift:{valType:"number",dflt:0,editType:"calc+arraydraw"},yref:{valType:"enumerated",values:["paper",q.idRegex.y.toString()],editType:"calc"},y:{valType:"any",editType:"calc+arraydraw"},
yanchor:{valType:"enumerated",values:["auto","top","middle","bottom"],dflt:"auto",editType:"calc+arraydraw"},yshift:{valType:"number",dflt:0,editType:"calc+arraydraw"},clicktoshow:{valType:"enumerated",values:[!1,"onoff","onout"],dflt:!1,editType:"arraydraw"},xclick:{valType:"any",editType:"arraydraw"},yclick:{valType:"any",editType:"arraydraw"},hovertext:{valType:"string",editType:"arraydraw"},hoverlabel:{bgcolor:{valType:"color",editType:"arraydraw"},bordercolor:{valType:"color",editType:"arraydraw"},
font:r({editType:"arraydraw"}),editType:"arraydraw"},captureevents:{valType:"boolean",editType:"arraydraw"},editType:"calc",_deprecated:{ref:{valType:"string",editType:"calc"}}})},{"../../constants/axis_placeable_objects":746,"../../plot_api/plot_template":817,"../../plots/cartesian/constants":834,"../../plots/font_attributes":856,"./arrow_paths":625}],627:[function(b,N,I){function r(h){m.filterVisible(h._fullLayout.annotations).forEach(function(g){var n=l.getFromId(h,g.xref),p=l.getFromId(h,g.yref),
d=l.getRefType(g.xref),e=l.getRefType(g.yref);g._extremes={};"range"===d&&q(g,n);"range"===e&&q(g,p)})}function q(h,g){var n=g._id,p=n.charAt(0),d=h[p],e=h["a"+p],f=h["_"+p+"padplus"],k=h["_"+p+"padminus"],t={x:1,y:-1}[p]*h[p+"shift"],v=3*h.arrowsize*h.arrowwidth||0,w=v+t,y=v-t,B=3*h.startarrowsize*h.arrowwidth||0;v=B+t;t=B-t;h["a"+p+"ref"]===h[p+"ref"]?(p=l.findExtremes(g,[g.r2c(d)],{ppadplus:w,ppadminus:y}),g=l.findExtremes(g,[g.r2c(e)],{ppadplus:Math.max(f,v),ppadminus:Math.max(k,t)}),g={min:[p.min[0],
g.min[0]],max:[p.max[0],g.max[0]]}):(v=e?v+e:v,t=e?t-e:t,g=l.findExtremes(g,[g.r2c(d)],{ppadplus:Math.max(f,w,v),ppadminus:Math.max(k,y,t)}));h._extremes[n]=g}var m=b("../../lib"),l=b("../../plots/cartesian/axes"),a=b("./draw").draw;N.exports=function(h){if(m.filterVisible(h._fullLayout.annotations).length&&h._fullData.length)return m.syncOrAsync([a,r],h)}},{"../../lib":778,"../../plots/cartesian/axes":828,"./draw":632}],628:[function(b,N,I){function r(h,g){h=h._fullLayout.annotations;var n=[],p=
[],d=[],e=(g||[]).length,f,k,t;for(f=0;f<h.length;f++){var v=h[f];if(t=v.clicktoshow){for(k=0;k<e;k++){var w=g[k];var y=w.xaxis;var B=w.yaxis;if(y._id===v.xref&&B._id===v.yref&&y.d2r(w.x)===q(v._xclick,y)&&B.d2r(w.y)===q(v._yclick,B)){w=v.visible?"onout"===t?p:d:n;w.push(f);break}}k===e&&v.visible&&"onout"===t&&p.push(f)}}return{on:n,off:p,explicitOff:d}}function q(h,g){return"log"===g.type?g.l2r(h):g.d2r(h)}var m=b("../../lib"),l=b("../../registry"),a=b("../../plot_api/plot_template").arrayEditor;
N.exports={hasClickToShow:function(h,g){h=r(h,g);return 0<h.on.length||0<h.explicitOff.length},onClick:function(h,g){var n=r(h,g);g=n.on;n=n.off.concat(n.explicitOff);var p={},d=h._fullLayout.annotations,e;if(g.length||n.length){for(e=0;e<g.length;e++){var f=a(h.layout,"annotations",d[g[e]]);f.modifyItem("visible",!0);m.extendFlat(p,f.getUpdateObj())}for(e=0;e<n.length;e++)f=a(h.layout,"annotations",d[n[e]]),f.modifyItem("visible",!1),m.extendFlat(p,f.getUpdateObj());return l.call("update",h,{},p)}}}},
{"../../lib":778,"../../plot_api/plot_template":817,"../../registry":911}],629:[function(b,N,I){var r=b("../../lib"),q=b("../color");N.exports=function(m,l,a,h){h("opacity");m=h("bgcolor");var g=h("bordercolor");g=q.opacity(g);h("borderpad");var n=h("borderwidth"),p=h("showarrow");h("text",p?" ":a._dfltTitle.annotation);h("textangle");r.coerceFont(h,"font",a.font);h("width");h("align");h("height")&&h("valign");if(p){p=h("arrowside");if(-1!==p.indexOf("end")){var d=h("arrowhead");var e=h("arrowsize")}-1!==
p.indexOf("start")&&(h("startarrowhead",d),h("startarrowsize",e));h("arrowcolor",g?l.bordercolor:q.defaultLine);h("arrowwidth",2*(g&&n||1));h("standoff");h("startstandoff")}l=h("hovertext");a=a.hoverlabel||{};l&&(m=h("hoverlabel.bgcolor",a.bgcolor||(q.opacity(m)?q.rgb(m):q.defaultLine)),m=h("hoverlabel.bordercolor",a.bordercolor||q.contrast(m)),r.coerceFont(h,"hoverlabel.font",{family:a.font.family,size:a.font.size,color:a.font.color||m}));h("captureevents",!!l)}},{"../../lib":778,"../color":643}],
630:[function(b,N,I){var r=b("fast-isnumeric"),q=b("../../lib/to_log_range");N.exports=function(m,l,a,h){function g(f){var k=p[f];k=n?q(k,l.range):Math.pow(10,k);r(k)||(k=null);h(d+f,k)}l=l||{};var n="log"===a&&"linear"===l.type;a="linear"===a&&"log"===l.type;if(n||a){m=m._fullLayout.annotations;a=l._id.charAt(0);for(var p,d,e=0;e<m.length;e++)p=m[e],d="annotations["+e+"].",p[a+"ref"]===l._id&&g(a),p["a"+a+"ref"]===l._id&&g("a"+a)}}},{"../../lib/to_log_range":805,"fast-isnumeric":241}],631:[function(b,
N,I){function r(g,n,p){function d(z,E){return q.coerce(g,n,h,z,E)}var e=d("visible"),f=d("clicktoshow");if(e||f){a(g,n,p,d);e=n.showarrow;var k=["x","y"],t=[-10,-30];p={_fullLayout:p};for(var v=0;2>v;v++){var w=k[v],y=m.coerceRef(g,n,p,w,"","paper");"paper"!==y&&m.getFromId(p,y)._annIndices.push(n._index);m.coercePosition(n,p,d,y,w,.5);if(e){var B="a"+w,A=m.coerceRef(g,n,p,B,"pixel",["pixel","paper"]);"pixel"!==A&&A!==y&&(A=n[B]="pixel");m.coercePosition(n,p,d,A,B,"pixel"===A?t[v]:.4)}d(w+"anchor");
d(w+"shift")}q.noneOrAll(g,n,["x","y"]);e&&q.noneOrAll(g,n,["ax","ay"]);f&&(f=d("xclick"),e=d("yclick"),n._xclick=void 0===f?n.x:m.cleanPosition(f,p,n.xref),n._yclick=void 0===e?n.y:m.cleanPosition(e,p,n.yref))}}var q=b("../../lib"),m=b("../../plots/cartesian/axes"),l=b("../../plots/array_container_defaults"),a=b("./common_defaults"),h=b("./attributes");N.exports=function(g,n){l(g,n,{name:"annotations",handleItemDefaults:r})}},{"../../lib":778,"../../plots/array_container_defaults":823,"../../plots/cartesian/axes":828,
"./attributes":626,"./common_defaults":629}],632:[function(b,N,I){function r(B,A){var z=B._fullLayout.annotations[A]||{},E=p.getFromId(B,z.xref),C=p.getFromId(B,z.yref);E&&E.setScale();C&&C.setScale();m(B,z,A,!1,E,C)}function q(B,A,z,E,C){var u=C[z];C=C[z+"ref"];z=-1!==z.indexOf("y");C="domain"===p.getRefType(C);E=z?E.h:E.w;return B?C?u+(z?-A:A)/B._length:B.p2r(B.r2p(u)+A):u+(z?-A:A)/E}function m(B,A,z,E,C,u){function D(na){na={index:z,annotation:A._input,fullAnnotation:A,event:na};E&&(na.subplotId=
E);return na}function G(na){na.call(e.font,qa).attr({"text-anchor":{left:"start",right:"end"}[A.align]||"middle"});k.convertToTspans(na,B,J);return na}function J(){function na(Ba,Fa){"auto"===Fa&&(Fa=Ba<1/3?"left":Ba>2/3?"right":"center");return{center:0,middle:0,left:.5,bottom:-.5,right:-.5,top:.5}[Fa]}var ka=pa.selectAll("a");1===ka.size()&&ka.text()===pa.text()&&ja.insert("a",":first-child").attr({"xlink:xlink:href":ka.attr("xlink:href"),"xlink:xlink:show":ka.attr("xlink:show")}).style({cursor:"pointer"}).node().appendChild(oa.node());
ka=ja.select(".annotation-text-math-group");for(var ua=!ka.empty(),va=e.bBox((ua?ka:pa).node()),Ca=va.width,Ma=va.height,Ua=A.width||Ca,eb=A.height||Ma,fb=Math.round(Ua+2*da),nb=Math.round(eb+2*da),cb=!1,$a=["x","y"],jb=0;jb<$a.length;jb++){var pb=$a[jb],xa=A[pb+"ref"]||pb,Ea=A["a"+pb+"ref"],Ia={x:C,y:u}[pb],Oa=(X+("x"===pb?0:-90))*Math.PI/180,bb=fb*Math.cos(Oa),Xa=nb*Math.sin(Oa);Oa=Math.abs(bb)+Math.abs(Xa);var tb=A[pb+"anchor"],Ka=A[pb+"shift"]*("x"===pb?1:-1),Ta=S[pb];var Na=p.getRefType(xa);
if(Ia&&"domain"!==Na){Na=Ia.r2fraction(A[pb]);if(0>Na||1<Na)if(Ea===xa){if(Na=Ia.r2fraction(A["a"+pb]),0>Na||1<Na)cb=!0}else cb=!0;Na=Ia._offset+Ia.r2p(A[pb]);var ib=.5}else Na="domain"===Na,"x"===pb?(ib=A[pb],Na=Na?Ia._offset+Ia._length*ib:Na=K.l+K.w*ib):(ib=1-A[pb],Na=Na?Ia._offset+Ia._length*ib:Na=K.t+K.h*ib),ib=A.showarrow?.5:ib;A.showarrow?(Ta.head=Na,tb=A["a"+pb],bb=bb*na(.5,A.xanchor)-Xa*na(.5,A.yanchor),Ea===xa?(Xa=p.getRefType(Ea),"domain"===Xa?("y"===pb&&(tb=1-tb),Ta.tail=Ia._offset+Ia._length*
tb):"paper"===Xa?"y"===pb?(tb=1-tb,Ta.tail=K.t+K.h*tb):Ta.tail=K.l+K.w*tb:Ta.tail=Ia._offset+Ia.r2p(tb),Ia=bb):(Ta.tail=Na+tb,Ia=bb+tb),Ta.text=Ta.tail+bb,Xa=L["x"===pb?"width":"height"],"paper"===xa&&(Ta.head=g.constrain(Ta.head,1,Xa-1)),"pixel"===Ea&&(xa=-Math.max(Ta.tail-3,Ta.text),Ea=Math.min(Ta.tail+3,Ta.text)-Xa,0<xa?(Ta.tail+=xa,Ta.text+=xa):0<Ea&&(Ta.tail-=Ea,Ta.text-=Ea)),Ta.tail+=Ka,Ta.head+=Ka):(Ia=bb=Oa*na(ib,tb),Ta.text=Na+bb);Ta.text+=Ka;bb+=Ka;Ia+=Ka;A["_"+pb+"padplus"]=Oa/2+Ia;A["_"+
pb+"padminus"]=Oa/2-Ia;A["_"+pb+"size"]=Oa;A["_"+pb+"shift"]=bb}if(cb)ja.remove();else{$a=cb=0;"left"!==A.align&&(cb=(Ua-Ca)*("center"===A.align?.5:1));"top"!==A.valign&&($a=(eb-Ma)*("middle"===A.valign?.5:1));ua?ka.select("svg").attr({x:da+cb-1,y:da+$a}).call(e.setClipUrl,sa?U:null,B):pa.call(k.positionText,da+cb-va.left,da+$a-va.top).call(e.setClipUrl,sa?U:null,B);ma.select("rect").call(e.setRect,da,da,Ua,eb);oa.call(e.setRect,la/2,la/2,fb-la,nb-la);ja.call(e.setTranslate,Math.round(S.x.text-fb/
2),Math.round(S.y.text-nb/2));ca.attr({transform:"rotate("+X+","+S.x.text+","+S.y.text+")"});var qb=function(Ba,Fa){ba.selectAll(".annotation-arrow-g").remove();var La=S.x.head,Va=S.y.head,Za=S.x.tail+Ba,mb=S.y.tail+Fa,ub=S.x.text+Ba;Ba=S.y.text+Fa;Fa=g.rotationXYMatrix(X,ub,Ba);var Pb=g.apply2DTransform(Fa);Fa=g.apply2DTransform2(Fa);var Kb=+oa.attr("width"),Ob=+oa.attr("height");ub-=.5*Kb;Kb=ub+Kb;Ba-=.5*Ob;Ob=Ba+Ob;Fa=[[ub,Ba,ub,Ob],[ub,Ob,Kb,Ob],[Kb,Ob,Kb,Ba],[Kb,Ba,ub,Ba]].map(Fa);if(!Fa.reduce(function(Nc,
bd){return Nc^!!g.segmentsIntersect(La,Va,La+1E6,Va+1E6,bd[0],bd[1],bd[2],bd[3])},!1)){Fa.forEach(function(Nc){if(Nc=g.segmentsIntersect(Za,mb,La,Va,Nc[0],Nc[1],Nc[2],Nc[3]))Za=Nc.x,mb=Nc.y});Fa=A.arrowwidth;Ob=A.arrowcolor;Ba=A.arrowside;var Wb=ba.append("g").style({opacity:d.opacity(Ob)}).classed("annotation-arrow-g",!0);Ob=Wb.append("path").attr("d","M"+Za+","+mb+"L"+La+","+Va).style("stroke-width",Fa+"px").call(d.stroke,d.rgb(Ob));y(Ob,Ba,A);if(H.annotationPosition&&Ob.node().parentNode&&!E){Ba=
La;Ob=Va;A.standoff&&(ub=Math.sqrt(Math.pow(La-Za,2)+Math.pow(Va-mb,2)),Ba+=A.standoff*(Za-La)/ub,Ob+=A.standoff*(mb-Va)/ub);Fa=Wb.append("path").classed("annotation-arrow",!0).classed("anndrag",!0).classed("cursor-move",!0).attr({d:"M3,3H-3V-3H3ZM0,0L"+(Za-Ba)+","+(mb-Ob),transform:n(Ba,Ob)}).style("stroke-width",Fa+6+"px").call(d.stroke,"rgba(0,0,0,0)").call(d.fill,"rgba(0,0,0,0)");var Bc,Kc;v.init({element:Fa.node(),gd:B,prepFn:function(){var Nc=e.getTranslate(ja);Bc=Nc.x;Kc=Nc.y;C&&C.autorange&&
P(C._name+".autorange",!0);u&&u.autorange&&P(u._name+".autorange",!0)},moveFn:function(Nc,bd){var kb=Pb(Bc,Kc),$b=kb[0]+Nc;kb=kb[1]+bd;ja.call(e.setTranslate,$b,kb);T("x",q(C,Nc,"x",K,A));T("y",q(u,bd,"y",K,A));A.axref===A.xref&&T("ax",q(C,Nc,"ax",K,A));A.ayref===A.yref&&T("ay",q(u,bd,"ay",K,A));Wb.attr("transform",n(Nc,bd));ca.attr({transform:"rotate("+X+","+$b+","+kb+")"})},doneFn:function(){a.call("_guiRelayout",B,O());var Nc=document.querySelector(".js-notes-box-panel");Nc&&Nc.redraw(Nc.selectedObj)}})}}};
A.showarrow&&qb(0,0);if(ia){var sb;v.init({element:ja.node(),gd:B,prepFn:function(){sb=ca.attr("transform")},moveFn:function(Ba,Fa){var La="pointer";if(A.showarrow)A.axref===A.xref?T("ax",q(C,Ba,"ax",K,A)):T("ax",A.ax+Ba),A.ayref===A.yref?T("ay",q(u,Fa,"ay",K.w,A)):T("ay",A.ay+Fa),qb(Ba,Fa);else{if(E)return;if(C)var Va=q(C,Ba,"x",K,A);else Va=A._xsize/K.w,Va=v.align(A.x+(A._xshift-A.xshift)/K.w-Va/2+Ba/K.w,Va,0,1,A.xanchor);if(u)var Za=q(u,Fa,"y",K,A);else Za=A._ysize/K.h,Za=v.align(A.y-(A._yshift+
A.yshift)/K.h-Za/2-Fa/K.h,Za,0,1,A.yanchor);T("x",Va);T("y",Za);C&&u||(La=v.getCursor(C?.5:Va,u?.5:Za,A.xanchor,A.yanchor))}ca.attr({transform:n(Ba,Fa)+sb});t(ja,La)},clickFn:function(Ba,Fa){A.captureevents&&B.emit("plotly_clickannotation",D(Fa))},doneFn:function(){t(ja);a.call("_guiRelayout",B,O());var Ba=document.querySelector(".js-notes-box-panel");Ba&&Ba.redraw(Ba.selectedObj)}})}}}var L=B._fullLayout,K=B._fullLayout._size,H=B._context.edits;if(E){var Q="annotation-"+E;var M=E+".annotations"}else Q=
"annotation",M="annotations";M=w(B.layout,M,A);var P=M.modifyBase,T=M.modifyItem,O=M.getUpdateObj;L._infolayer.selectAll("."+Q+'[data-index\x3d"'+z+'"]').remove();var U="clip"+L._uid+"_ann"+z;if(A._input&&!1!==A.visible){var S={x:{},y:{}},X=+A.textangle||0,ba=L._infolayer.append("g").classed(Q,!0).attr("data-index",String(z)).style("opacity",A.opacity),ca=ba.append("g").classed("annotation-text-g",!0),ia=H[A.showarrow?"annotationTail":"annotationPosition"];Q=A.captureevents||H.annotationText||ia;
var ja=ca.append("g").style("pointer-events",Q?"all":null).call(t,"pointer").on("click",function(){B._dragging=!1;B.emit("plotly_clickannotation",D(l.event))});if(A.hovertext)ja.on("mouseover",function(){var na=A.hoverlabel,ka=na.font,ua=this.getBoundingClientRect(),va=B.getBoundingClientRect();f.loneHover({x0:ua.left-va.left,x1:ua.right-va.left,y:(ua.top+ua.bottom)/2-va.top,text:A.hovertext,color:na.bgcolor,borderColor:na.bordercolor,fontFamily:ka.family,fontSize:ka.size,fontColor:ka.color},{container:L._hoverlayer.node(),
outerContainer:L._paper.node(),gd:B})}).on("mouseout",function(){f.loneUnhover(L._hoverlayer.node())});var la=A.borderwidth,da=la+A.borderpad,oa=ja.append("rect").attr("class","bg").style("stroke-width",la+"px").call(d.stroke,A.bordercolor).call(d.fill,A.bgcolor),sa=A.width||A.height,ma=L._topclips.selectAll("#"+U).data(sa?[0]:[]);ma.enter().append("clipPath").classed("annclip",!0).attr("id",U).append("rect");ma.exit().remove();var qa=A.font;Q=L._meta?g.templateString(A.text,L._meta):A.text;var pa=
ja.append("text").classed("annotation-text",!0).text(Q);if(H.annotationText)pa.call(k.makeEditable,{delegate:ja,gd:B}).call(G).on("edit",function(na){A.text=na;this.call(G);T("text",na);C&&C.autorange&&P(C._name+".autorange",!0);u&&u.autorange&&P(u._name+".autorange",!0);a.call("_guiRelayout",B,O())});else pa.call(G)}else l.selectAll("#"+U).remove()}var l=b("d3"),a=b("../../registry"),h=b("../../plots/plots"),g=b("../../lib"),n=g.strTranslate,p=b("../../plots/cartesian/axes"),d=b("../color"),e=b("../drawing"),
f=b("../fx"),k=b("../../lib/svg_text_utils"),t=b("../../lib/setcursor"),v=b("../dragelement"),w=b("../../plot_api/plot_template").arrayEditor,y=b("./draw_arrow_head");N.exports={draw:function(B){var A=B._fullLayout;A._infolayer.selectAll(".annotation").remove();for(var z=0;z<A.annotations.length;z++)A.annotations[z].visible&&r(B,z);return h.previousPromises(B)},drawOne:r,drawRaw:m}},{"../../lib":778,"../../lib/setcursor":799,"../../lib/svg_text_utils":803,"../../plot_api/plot_template":817,"../../plots/cartesian/axes":828,
"../../plots/plots":891,"../../registry":911,"../color":643,"../dragelement":662,"../drawing":665,"../fx":683,"./draw_arrow_head":633,d3:169}],633:[function(b,N,I){var r=b("d3"),q=b("../color"),m=b("./arrow_paths");b=b("../../lib");var l=b.strScale,a=b.strRotate,h=b.strTranslate;N.exports=function(g,n,p){function d(){g.style("stroke-dasharray","0px,100px")}function e(L,K,H,Q){L.path&&(L.noRotate&&(H=0),r.select(f.parentNode).append("path").attr({"class":g.attr("class"),d:L.path,transform:h(K.x,K.y)+
a(180*H/Math.PI)+l(Q)}).style({fill:q.rgb(p.arrowcolor),"stroke-width":0}))}var f=g.node(),k=m[p.arrowhead||0],t=m[p.startarrowhead||0],v=(p.arrowwidth||1)*(p.arrowsize||1),w=(p.arrowwidth||1)*(p.startarrowsize||1),y=0<=n.indexOf("start");n=0<=n.indexOf("end");var B=k.backoff*v+p.standoff,A=t.backoff*w+p.startstandoff;if("line"===f.nodeName){var z={x:+g.attr("x1"),y:+g.attr("y1")};var E={x:+g.attr("x2"),y:+g.attr("y2")};var C=z.x-E.x,u=z.y-E.y;var D=Math.atan2(u,C);var G=D+Math.PI;if(B&&A&&B+A>Math.sqrt(C*
C+u*u)){d();return}if(B){if(B*B>C*C+u*u){d();return}var J=B*Math.sin(D);E.x+=B*Math.cos(D);E.y+=J;g.attr({x2:E.x,y2:E.y})}if(A){if(A*A>C*C+u*u){d();return}B=A*Math.sin(D);z.x-=A*Math.cos(D);z.y-=B;g.attr({x1:z.x,y1:z.y})}}else if("path"===f.nodeName){C=f.getTotalLength();u="";if(C<B+A){d();return}z=f.getPointAtLength(0);D=f.getPointAtLength(.1);D=Math.atan2(z.y-D.y,z.x-D.x);z=f.getPointAtLength(Math.min(A,C));u="0px,"+A+"px,";E=f.getPointAtLength(C);G=f.getPointAtLength(C-.1);G=Math.atan2(E.y-G.y,
E.x-G.x);E=f.getPointAtLength(Math.max(0,C-B));g.style("stroke-dasharray",u+(C-(u?A+B:B)+"px,"+C+"px"))}y&&e(t,z,D,w);n&&e(k,E,G,v)}},{"../../lib":778,"../color":643,"./arrow_paths":625,d3:169}],634:[function(b,N,I){I=b("./draw");var r=b("./click");N.exports={moduleType:"component",name:"annotations",layoutAttributes:b("./attributes"),supplyLayoutDefaults:b("./defaults"),includeBasePlot:b("../../plots/cartesian/include_components")("annotations"),calcAutorange:b("./calc_autorange"),draw:I.draw,drawOne:I.drawOne,
drawRaw:I.drawRaw,hasClickToShow:r.hasClickToShow,onClick:r.onClick,convertCoords:b("./convert_coords")}},{"../../plots/cartesian/include_components":840,"./attributes":626,"./calc_autorange":627,"./click":628,"./convert_coords":630,"./defaults":631,"./draw":632}],635:[function(b,N,I){I=b("../annotations/attributes");var r=b("../../plot_api/edit_types").overrideAll;b=b("../../plot_api/plot_template").templatedArray;N.exports=r(b("annotation",{visible:I.visible,x:{valType:"any"},y:{valType:"any"},
z:{valType:"any"},ax:{valType:"number"},ay:{valType:"number"},xanchor:I.xanchor,xshift:I.xshift,yanchor:I.yanchor,yshift:I.yshift,text:I.text,textangle:I.textangle,font:I.font,width:I.width,height:I.height,opacity:I.opacity,align:I.align,valign:I.valign,bgcolor:I.bgcolor,bordercolor:I.bordercolor,borderpad:I.borderpad,borderwidth:I.borderwidth,showarrow:I.showarrow,arrowcolor:I.arrowcolor,arrowhead:I.arrowhead,startarrowhead:I.startarrowhead,arrowside:I.arrowside,arrowsize:I.arrowsize,startarrowsize:I.startarrowsize,
arrowwidth:I.arrowwidth,standoff:I.standoff,startstandoff:I.startstandoff,hovertext:I.hovertext,hoverlabel:I.hoverlabel,captureevents:I.captureevents}),"calc","from-root")},{"../../plot_api/edit_types":810,"../../plot_api/plot_template":817,"../annotations/attributes":626}],636:[function(b,N,I){function r(l,a){var h=a.fullSceneLayout.domain,g=a.fullLayout._size;a={pdata:null,type:"linear",autorange:!1,range:[-Infinity,Infinity]};l._xa={};q.extendFlat(l._xa,a);m.setConvert(l._xa);l._xa._offset=g.l+
h.x[0]*g.w;l._xa.l2p=function(){return.5*(1+l._pdata[0]/l._pdata[3])*g.w*(h.x[1]-h.x[0])};l._ya={};q.extendFlat(l._ya,a);m.setConvert(l._ya);l._ya._offset=g.t+(1-h.y[1])*g.h;l._ya.l2p=function(){return.5*(1-l._pdata[1]/l._pdata[3])*g.h*(h.y[1]-h.y[0])}}var q=b("../../lib"),m=b("../../plots/cartesian/axes");N.exports=function(l){for(var a=l.fullSceneLayout.annotations,h=0;h<a.length;h++)r(a[h],l);l.fullLayout._infolayer.selectAll(".annotation-"+l.id).remove()}},{"../../lib":778,"../../plots/cartesian/axes":828}],
637:[function(b,N,I){function r(g,n,p,d){function e(k,t){return q.coerce(g,n,h,k,t)}function f(k){var t=k+"axis",v={_fullLayout:{}};v._fullLayout[t]=p[t];return m.coercePosition(n,v,e,k,k,.5)}e("visible")&&(a(g,n,d.fullLayout,e),f("x"),f("y"),f("z"),q.noneOrAll(g,n,["x","y","z"]),n.xref="x",n.yref="y",n.zref="z",e("xanchor"),e("yanchor"),e("xshift"),e("yshift"),n.showarrow&&(n.axref="pixel",n.ayref="pixel",e("ax",-10),e("ay",-30),q.noneOrAll(g,n,["ax","ay"])))}var q=b("../../lib"),m=b("../../plots/cartesian/axes"),
l=b("../../plots/array_container_defaults"),a=b("../annotations/common_defaults"),h=b("./attributes");N.exports=function(g,n,p){l(g,n,{name:"annotations",handleItemDefaults:r,fullLayout:p.fullLayout})}},{"../../lib":778,"../../plots/array_container_defaults":823,"../../plots/cartesian/axes":828,"../annotations/common_defaults":629,"./attributes":635}],638:[function(b,N,I){var r=b("../annotations/draw").drawRaw,q=b("../../plots/gl3d/project"),m=["x","y","z"];N.exports=function(l){for(var a=l.fullSceneLayout,
h=l.dataScale,g=a.annotations,n=0;n<g.length;n++){for(var p=g[n],d=!1,e=0;3>e;e++){var f=m[e];f=a[f+"axis"].r2fraction(p[f]);if(0>f||1<f){d=!0;break}}d?l.fullLayout._infolayer.select(".annotation-"+l.id+'[data-index\x3d"'+n+'"]').remove():(p._pdata=q(l.glplot.cameraParams,[a.xaxis.r2l(p.x)*h[0],a.yaxis.r2l(p.y)*h[1],a.zaxis.r2l(p.z)*h[2]]),r(l.graphDiv,p,n,l.id,p._xa,p._ya))}}},{"../../plots/gl3d/project":879,"../annotations/draw":632}],639:[function(b,N,I){var r=b("../../registry"),q=b("../../lib");
N.exports={moduleType:"component",name:"annotations3d",schema:{subplots:{scene:{annotations:b("./attributes")}}},layoutAttributes:b("./attributes"),handleDefaults:b("./defaults"),includeBasePlot:function(m,l){var a=r.subplotsRegistry.gl3d;if(a)for(var h=a.attrRegex,g=Object.keys(m),n=0;n<g.length;n++){var p=g[n];h.test(p)&&(m[p].annotations||[]).length&&(q.pushUnique(l._basePlotModules,a),q.pushUnique(l._subplots.gl3d,p))}},convert:b("./convert"),draw:b("./draw")}},{"../../lib":778,"../../registry":911,
"./attributes":635,"./convert":636,"./defaults":637,"./draw":638}],640:[function(b,N,I){N.exports=b("world-calendars/dist/main");b("world-calendars/dist/plus");b("world-calendars/dist/calendars/chinese");b("world-calendars/dist/calendars/coptic");b("world-calendars/dist/calendars/discworld");b("world-calendars/dist/calendars/ethiopian");b("world-calendars/dist/calendars/hebrew");b("world-calendars/dist/calendars/islamic");b("world-calendars/dist/calendars/julian");b("world-calendars/dist/calendars/mayan");
b("world-calendars/dist/calendars/nanakshahi");b("world-calendars/dist/calendars/nepali");b("world-calendars/dist/calendars/persian");b("world-calendars/dist/calendars/taiwan");b("world-calendars/dist/calendars/thai");b("world-calendars/dist/calendars/ummalqura")},{"world-calendars/dist/calendars/chinese":607,"world-calendars/dist/calendars/coptic":608,"world-calendars/dist/calendars/discworld":609,"world-calendars/dist/calendars/ethiopian":610,"world-calendars/dist/calendars/hebrew":611,"world-calendars/dist/calendars/islamic":612,
"world-calendars/dist/calendars/julian":613,"world-calendars/dist/calendars/mayan":614,"world-calendars/dist/calendars/nanakshahi":615,"world-calendars/dist/calendars/nepali":616,"world-calendars/dist/calendars/persian":617,"world-calendars/dist/calendars/taiwan":618,"world-calendars/dist/calendars/thai":619,"world-calendars/dist/calendars/ummalqura":620,"world-calendars/dist/main":621,"world-calendars/dist/plus":622}],641:[function(b,N,I){function r(t){var v=e[t];return v?v:v=e[t]=l.instance(t)}
function q(t){return a.extendFlat({},n,{description:t})}function m(t){return"Sets the calendar system to use with `"+t+"` date data."}var l=b("./calendars"),a=b("../../lib");b=b("../../constants/numerical");var h=b.EPOCHJD,g=b.ONEDAY,n={valType:"enumerated",values:Object.keys(l.calendars),editType:"calc",dflt:"gregorian"},p=function(t,v,w,y){var B={};B[w]=n;return a.coerce(t,v,B,w,y)},d={d:{0:"dd","-":"d"},e:{0:"d","-":"d"},a:{0:"D","-":"D"},A:{0:"DD","-":"DD"},j:{0:"oo","-":"o"},W:{0:"ww","-":"w"},
m:{0:"mm","-":"m"},b:{0:"M","-":"M"},B:{0:"MM","-":"MM"},y:{0:"yy","-":"yy"},Y:{0:"yyyy","-":"yyyy"},U:"##",w:"##",c:{0:"D M d %X yyyy","-":"D M d %X yyyy"},x:{0:"mm/dd/yyyy","-":"mm/dd/yyyy"}},e={};b={xcalendar:q(m("x"))};I=a.extendFlat({},b,{ycalendar:q(m("y"))});var f=a.extendFlat({},I,{zcalendar:q(m("z"))}),k=q("Sets the calendar system to use for `range` and `tick0` if this is a date axis. This does not set the calendar for interpreting data on this axis, that's specified in the trace or via the global `layout.calendar`");
N.exports={moduleType:"component",name:"calendars",schema:{traces:{scatter:I,bar:I,box:I,heatmap:I,contour:I,histogram:I,histogram2d:I,histogram2dcontour:I,scatter3d:f,surface:f,mesh3d:f,scattergl:I,ohlc:b,candlestick:b},layout:{calendar:q("Sets the default calendar system to use for interpreting and displaying dates throughout the plot.")},subplots:{xaxis:{calendar:k},yaxis:{calendar:k},scene:{xaxis:{calendar:k},yaxis:{calendar:k},zaxis:{calendar:k}},polar:{radialaxis:{calendar:k}}},transforms:{filter:{valuecalendar:q("Sets the calendar system to use for `value`, if it is a date."),
targetcalendar:q("Sets the calendar system to use for `target`, if it is an array of dates. If `target` is a string (eg *x*) we use the corresponding trace attribute (eg `xcalendar`) if it exists, even if `targetcalendar` is provided.")}}},layoutAttributes:n,handleDefaults:p,handleTraceDefaults:function(t,v,w,y){for(var B=0;B<w.length;B++)p(t,v,w[B]+"calendar",y.calendar)},CANONICAL_SUNDAY:{chinese:"2000-01-02",coptic:"2000-01-03",discworld:"2000-01-03",ethiopian:"2000-01-05",hebrew:"5000-01-01",
islamic:"1000-01-02",julian:"2000-01-03",mayan:"5000-01-01",nanakshahi:"1000-01-05",nepali:"2000-01-05",persian:"1000-01-01",jalali:"1000-01-01",taiwan:"1000-01-04",thai:"2000-01-04",ummalqura:"1400-01-06"},CANONICAL_TICK:{chinese:"2000-01-01",coptic:"2000-01-01",discworld:"2000-01-01",ethiopian:"2000-01-01",hebrew:"5000-01-01",islamic:"1000-01-01",julian:"2000-01-01",mayan:"5000-01-01",nanakshahi:"1000-01-01",nepali:"2000-01-01",persian:"1000-01-01",jalali:"1000-01-01",taiwan:"1000-01-01",thai:"2000-01-01",
ummalqura:"1400-01-01"},DFLTRANGE:{chinese:["2000-01-01","2001-01-01"],coptic:["1700-01-01","1701-01-01"],discworld:["1800-01-01","1801-01-01"],ethiopian:["2000-01-01","2001-01-01"],hebrew:["5700-01-01","5701-01-01"],islamic:["1400-01-01","1401-01-01"],julian:["2000-01-01","2001-01-01"],mayan:["5200-01-01","5201-01-01"],nanakshahi:["0500-01-01","0501-01-01"],nepali:["2000-01-01","2001-01-01"],persian:["1400-01-01","1401-01-01"],jalali:["1400-01-01","1401-01-01"],taiwan:["0100-01-01","0101-01-01"],
thai:["2500-01-01","2501-01-01"],ummalqura:["1400-01-01","1401-01-01"]},getCal:r,worldCalFmt:function(t,v,w){v=Math.floor((v+.05)/g)+h;w=r(w).fromJD(v);v=0;for(var y,B,A;-1!==(v=t.indexOf("%",v));)y=t.charAt(v+1),"0"===y||"-"===y||"_"===y?(A=3,B=t.charAt(v+2),"_"===y&&(y="-")):(B=y,y="0",A=2),(B=d[B])?(y="##"===B?"##":w.formatDate(B[y]),t=t.substr(0,v)+y+t.substr(v+A),v+=y.length):v+=A;return t}}},{"../../constants/numerical":753,"../../lib":778,"./calendars":640}],642:[function(b,N,I){I.defaults=
"#1f77b4 #ff7f0e #2ca02c #d62728 #9467bd #8c564b #e377c2 #7f7f7f #bcbd22 #17becf".split(" ");I.defaultLine="#444";I.lightLine="#eee";I.background="#fff";I.borderLine="#BEC8D9";I.lightFraction=1E3/11},{}],643:[function(b,N,I){function r(g){if(m(g)||"string"!==typeof g)return g;var n=g.trim();if("rgb"!==n.substr(0,3))return g;var p=n.match(/^rgba?\s*\(([^()]*)\)$/);if(!p)return g;p=p[1].trim().split(/\s*[\s,]\s*/);n="a"===n.charAt(3)&&4===p.length;if(!n&&3!==p.length)return g;for(var d=0;d<p.length;d++){if(!p[d].length)return g;
p[d]=Number(p[d]);if(!(0<=p[d]))return g;if(3===d)1<p[d]&&(p[d]=1);else if(1<=p[d])return g}g=Math.round(255*p[0])+", "+Math.round(255*p[1])+", "+Math.round(255*p[2]);return n?"rgba("+g+", "+p[3]+")":"rgb("+g+")"}var q=b("tinycolor2"),m=b("fast-isnumeric"),l=N.exports={};b=b("./attributes");l.defaults=b.defaults;var a=l.defaultLine=b.defaultLine;l.lightLine=b.lightLine;var h=l.background=b.background;l.tinyRGB=function(g){g=g.toRgb();return"rgb("+Math.round(g.r)+", "+Math.round(g.g)+", "+Math.round(g.b)+
")"};l.rgb=function(g){return l.tinyRGB(q(g))};l.opacity=function(g){return g?q(g).getAlpha():0};l.addOpacity=function(g,n){g=q(g).toRgb();return"rgba("+Math.round(g.r)+", "+Math.round(g.g)+", "+Math.round(g.b)+", "+n+")"};l.combine=function(g,n){var p=q(g).toRgb();if(1===p.a)return q(g).toRgbString();g=q(n||h).toRgb();g=1===g.a?g:{r:255*(1-g.a)+g.r*g.a,g:255*(1-g.a)+g.g*g.a,b:255*(1-g.a)+g.b*g.a};return q({r:g.r*(1-p.a)+p.r*p.a,g:g.g*(1-p.a)+p.g*p.a,b:g.b*(1-p.a)+p.b*p.a}).toRgbString()};l.contrast=
function(g,n,p){var d=q(g);1!==d.getAlpha()&&(d=q(l.combine(g,h)));return(d.isDark()?n?d.lighten(n):h:p?d.darken(p):a).toString()};l.stroke=function(g,n){n=q(n);g.style({stroke:l.tinyRGB(n),"stroke-opacity":n.getAlpha()})};l.fill=function(g,n){n=q(n);g.style({fill:l.tinyRGB(n),"fill-opacity":n.getAlpha()})};l.clean=function(g){if(g&&"object"===typeof g){var n=Object.keys(g),p;for(p=0;p<n.length;p++){var d=n[p];var e=g[d];if("color"===d.substr(d.length-5))if(Array.isArray(e))for(d=0;d<e.length;d++)e[d]=
r(e[d]);else g[d]=r(e);else if("colorscale"===d.substr(d.length-10)&&Array.isArray(e))for(d=0;d<e.length;d++)Array.isArray(e[d])&&(e[d][1]=r(e[d][1]));else if(Array.isArray(e)){if(d=e[0],!Array.isArray(d)&&d&&"object"===typeof d)for(d=0;d<e.length;d++)l.clean(e[d])}else e&&"object"===typeof e&&l.clean(e)}}}},{"./attributes":642,"fast-isnumeric":241,tinycolor2:576}],644:[function(b,N,I){I=b("../../plots/cartesian/layout_attributes");var r=b("../../plots/font_attributes"),q=b("../../lib/extend").extendFlat;
b=b("../../plot_api/edit_types").overrideAll;N.exports=b({thicknessmode:{valType:"enumerated",values:["fraction","pixels"],dflt:"pixels"},thickness:{valType:"number",min:0,dflt:30},lenmode:{valType:"enumerated",values:["fraction","pixels"],dflt:"fraction"},len:{valType:"number",min:0,dflt:1},x:{valType:"number",dflt:1.02,min:-2,max:3},xanchor:{valType:"enumerated",values:["left","center","right"],dflt:"left"},xpad:{valType:"number",min:0,dflt:10},y:{valType:"number",dflt:.5,min:-2,max:3},yanchor:{valType:"enumerated",
values:["top","middle","bottom"],dflt:"middle"},ypad:{valType:"number",min:0,dflt:10},outlinecolor:I.linecolor,outlinewidth:I.linewidth,bordercolor:I.linecolor,borderwidth:{valType:"number",min:0,dflt:0},bgcolor:{valType:"color",dflt:"rgba(0,0,0,0)"},tickmode:I.tickmode,nticks:I.nticks,tick0:I.tick0,dtick:I.dtick,tickvals:I.tickvals,ticktext:I.ticktext,ticks:q({},I.ticks,{dflt:""}),ticklabelposition:{valType:"enumerated",values:"outside;inside;outside top;inside top;outside bottom;inside bottom".split(";"),
dflt:"outside"},ticklen:I.ticklen,tickwidth:I.tickwidth,tickcolor:I.tickcolor,showticklabels:I.showticklabels,tickfont:r({}),tickangle:I.tickangle,tickformat:I.tickformat,tickformatstops:I.tickformatstops,tickprefix:I.tickprefix,showtickprefix:I.showtickprefix,ticksuffix:I.ticksuffix,showticksuffix:I.showticksuffix,separatethousands:I.separatethousands,exponentformat:I.exponentformat,minexponent:I.minexponent,showexponent:I.showexponent,title:{text:{valType:"string"},font:r({}),side:{valType:"enumerated",
values:["right","top","bottom"],dflt:"top"}},_deprecated:{title:{valType:"string"},titlefont:r({}),titleside:{valType:"enumerated",values:["right","top","bottom"],dflt:"top"}}},"colorbars","from-root")},{"../../lib/extend":768,"../../plot_api/edit_types":810,"../../plots/cartesian/layout_attributes":842,"../../plots/font_attributes":856}],645:[function(b,N,I){N.exports={cn:{colorbar:"colorbar",cbbg:"cbbg",cbfill:"cbfill",cbfills:"cbfills",cbline:"cbline",cblines:"cblines",cbaxis:"cbaxis",cbtitleunshift:"cbtitleunshift",
cbtitle:"cbtitle",cboutline:"cboutline",crisp:"crisp",jsPlaceholder:"js-placeholder"}}},{}],646:[function(b,N,I){var r=b("../../lib"),q=b("../../plot_api/plot_template"),m=b("../../plots/cartesian/tick_value_defaults"),l=b("../../plots/cartesian/tick_mark_defaults"),a=b("../../plots/cartesian/tick_label_defaults"),h=b("./attributes");N.exports=function(g,n,p){function d(k,t){return r.coerce(f,e,h,k,t)}var e=q.newContainer(n,"colorbar"),f=g.colorbar||{};g=d("thicknessmode");d("thickness","fraction"===
g?30/(p.width-p.margin.l-p.margin.r):30);g=d("lenmode");d("len","fraction"===g?1:p.height-p.margin.t-p.margin.b);d("x");d("xanchor");d("xpad");d("y");d("yanchor");d("ypad");r.noneOrAll(f,e,["x","y"]);d("outlinecolor");d("outlinewidth");d("bordercolor");d("borderwidth");d("bgcolor");g=d("ticklabelposition");m(f,e,d,"linear");n={outerTicks:!1,font:p.font};-1!==g.indexOf("inside")&&(n.bgColor="black");a(f,e,d,"linear",n);l(f,e,d,"linear",n);d("title.text",p._dfltTitle.colorbar);r.coerceFont(d,"title.font",
p.font);d("title.side")}},{"../../lib":778,"../../plot_api/plot_template":817,"../../plots/cartesian/tick_label_defaults":849,"../../plots/cartesian/tick_mark_defaults":850,"../../plots/cartesian/tick_value_defaults":851,"./attributes":644}],647:[function(b,N,I){function r(K){function H(oa){return t(oa,{_fillcolor:null,_line:{color:null,width:null,dash:null},_levels:{start:null,end:null,size:null},_filllevels:null,_fillgradient:null,_zrange:null})}function Q(){"function"===typeof X.calc?X.calc(K,
S,O):(O._fillgradient=U.reversescale?z(U.colorscale):U.colorscale,O._zrange=[U[X.min],U[X.max]])}for(var M=K._fullLayout,P=K.calcdata,T=[],O,U,S,X,ba=0;ba<P.length;ba++){S=P[ba][0].trace;var ca=S._module.colorbar;if(!0===S.visible&&ca){var ia=Array.isArray(ca);ca=ia?ca:[ca];for(var ja=0;ja<ca.length;ja++){X=ca[ja];var la=X.container;(U=la?S[la]:S)&&U.showscale&&(O=H(U.colorbar),O._id="cb"+S.uid+(ia&&la?"-"+la:""),O._traceIndex=S.index,O._propPrefix=(la?la+".":"")+"colorbar.",O._meta=S._meta,Q(),T.push(O))}}}for(var da in M._colorAxes)U=
M[da],U.showscale&&(P=M._colorAxes[da],O=H(U.colorbar),O._id="cb"+da,O._propPrefix=da+".colorbar.",O._meta=M._meta,X={min:"cmin",max:"cmax"},"heatmap"!==P[0]&&(S=P[1],X.calc=S._module.colorbar.calc),Q(),T.push(O));return T}function q(K,H,Q){function M(jb,pb){var xa={propContainer:eb,propName:H._propPrefix+"title",traceIndex:H._traceIndex,_meta:H._meta,placeholder:P._dfltTitle.colorbar,containerGroup:K.select("."+L.cbtitle)},Ea="h"===jb.charAt(0)?jb.substr(1):"h"+jb;K.selectAll("."+Ea+",."+Ea+"-math-group").remove();
B.draw(Q,jb,t(xa,pb||{}))}var P=Q._fullLayout,T=P._size,O=H._fillcolor,U=H._line,S=H.title,X=S.side,ba=H._zrange||h.extent(("function"===typeof O?O:U.color).domain()),ca="function"===typeof U.color?U.color:function(){return U.color},ia="function"===typeof O?O:function(){return O},ja=H._levels,la=l(Q,H,ba),da=la.fill,oa=la.line,sa=Math.round(H.thickness*("fraction"===H.thicknessmode?T.w:1));la=sa/T.w;var ma=Math.round(H.len*("fraction"===H.lenmode?T.h:1)),qa=ma/T.h,pa=H.xpad/T.w,na=(H.borderwidth+
H.outlinewidth)/2,ka=H.ypad/T.h,ua=Math.round(H.x*T.w+H.xpad),va=H.x-la*({middle:.5,right:1}[H.xanchor]||0),Ca=H.y+qa*(({top:-.5,bottom:.5}[H.yanchor]||0)-.5),Ma=Math.round(T.h*(1-Ca)),Ua=Ma-ma;H._lenFrac=qa;H._thickFrac=la;H._xLeftFrac=va;H._yBottomFrac=Ca;var eb=H._axis=a(Q,H,ba);eb.position=H.x+pa+la;-1!==["top","bottom"].indexOf(X)&&(eb.title.side=X,eb.titlex=H.x+pa,eb.titley=Ca+("top"===S.side?qa-ka:ka));U.color&&"auto"===H.tickmode&&(eb.tickmode="linear",eb.tick0=ja.start,S=ja.size,la=f.constrain((Ma-
Ua)/50,4,15)+1,la=(ba[1]-ba[0])/((H.nticks||la)*S),1<la&&(ma=Math.pow(10,Math.floor(Math.log(la)/Math.LN10)),S*=ma*f.roundUp(la/ma,[2,5,10]),2E-6>(Math.abs(ja.start)/ja.size+1E-6)%1&&(eb.tick0=0)),eb.dtick=S);eb.domain=[Ca+ka,Ca+qa-ka];eb.setScale();K.attr("transform",k(Math.round(T.l),Math.round(T.t)));var fb=K.select("."+L.cbtitleunshift).attr("transform",k(-Math.round(T.l),-Math.round(T.t))),nb=K.select("."+L.cbaxis),cb,$a=0;return f.syncOrAsync([n.previousPromises,function(){if(-1!==["top","bottom"].indexOf(X)){var jb=
eb.title.font.size;M(eb._id+"title",{attributes:{x:T.l+(H.x+pa)*T.w,y:"top"===X?(1-(Ca+qa-ka))*T.h+T.t+3+.75*jb:(1-(Ca+ka))*T.h+T.t-3-.25*jb,"text-anchor":"start"}})}},function(){if(-1!==["top","bottom"].indexOf(X)){var jb=K.select("."+L.cbtitle),pb=jb.select("text"),xa=[-H.outlinewidth/2,H.outlinewidth/2],Ea=jb.select(".h"+eb._id+"title-math-group").node(),Ia=15.6;pb.node()&&(Ia=parseInt(pb.node().style.fontSize,10)*D);Ea?($a=w.bBox(Ea).height,$a>Ia&&(xa[1]-=($a-Ia)/2)):pb.node()&&!pb.classed(L.jsPlaceholder)&&
($a=w.bBox(pb.node()).height);$a&&($a+=5,"top"===X?(eb.domain[1]-=$a/T.h,xa[1]*=-1):(eb.domain[0]+=$a/T.h,pb=A.lineCount(pb),xa[1]+=(1-pb)*Ia),jb.attr("transform",k(xa[0],xa[1])),eb.setScale())}K.selectAll("."+L.cbfills+",."+L.cblines).attr("transform",k(0,Math.round(T.h*(1-eb.domain[1]))));nb.attr("transform",k(0,Math.round(-T.t)));jb=K.select("."+L.cbfills).selectAll("rect."+L.cbfill).attr("style","").data(da);jb.enter().append("rect").classed(L.cbfill,!0).style("stroke","none");jb.exit().remove();
var Oa=ba.map(eb.c2p).map(Math.round).sort(function(bb,Xa){return bb-Xa});jb.each(function(bb,Xa){Xa=[0===Xa?ba[0]:(da[Xa]+da[Xa-1])/2,Xa===da.length-1?ba[1]:(da[Xa]+da[Xa+1])/2].map(eb.c2p).map(Math.round);Xa[1]=f.constrain(Xa[1]+(Xa[1]>Xa[0])?1:-1,Oa[0],Oa[1]);Xa=h.select(this).attr({x:ua,width:Math.max(sa,2),y:h.min(Xa),height:Math.max(h.max(Xa)-h.min(Xa),2)});H._fillgradient?w.gradient(Xa,Q,H._id,"vertical",H._fillgradient,"fill"):(bb=ia(bb).replace("e-",""),Xa.attr("fill",g(bb).toHexString()))});
jb=K.select("."+L.cblines).selectAll("path."+L.cbline).data(U.color&&U.width?oa:[]);jb.enter().append("path").classed(L.cbline,!0);jb.exit().remove();jb.each(function(bb){h.select(this).attr("d","M"+ua+","+(Math.round(eb.c2p(bb))+U.width/2%1)+"h"+sa).call(w.lineGroupStyle,U.width,ca(bb),U.dash)});nb.selectAll("g."+eb._id+"tick,path").remove();jb=ua+sa+(H.outlinewidth||0)/2-("outside"===H.ticks?1:0);xa=d.calcTicks(eb);Ia=d.getTickSigns(eb)[2];d.drawTicks(Q,eb,{vals:"inside"===eb.ticks?d.clipEnds(eb,
xa):xa,layer:nb,path:d.makeTickPath(eb,jb,Ia),transFn:d.makeTransTickFn(eb)});return d.drawLabels(Q,eb,{vals:xa,layer:nb,transFn:d.makeTransTickLabelFn(eb),labelFns:d.makeLabelFns(eb,jb)})},function(){if(-1===["top","bottom"].indexOf(X)){var jb=eb.title.font.size,pb=eb._offset+eb._length/2;jb=T.l+(eb.position||0)*T.w+("right"===eb.side?10+jb*(eb.showticklabels?1:.5):-10-jb*(eb.showticklabels?.5:0));M("h"+eb._id+"title",{avoid:{selection:h.select(Q).selectAll("g."+eb._id+"tick"),side:X,offsetLeft:T.l,
offsetTop:0,maxShift:P.width},attributes:{x:jb,y:pb,"text-anchor":"middle"},transform:{rotate:"-90",offset:0}})}},n.previousPromises,function(){var jb=sa+H.outlinewidth/2;-1===eb.ticklabelposition.indexOf("inside")&&(jb+=w.bBox(nb.node()).width);cb=fb.select("text");if(cb.node()&&!cb.classed(L.jsPlaceholder)){var pb=fb.select(".h"+eb._id+"title-math-group").node();pb=pb&&-1!==["top","bottom"].indexOf(X)?w.bBox(pb).width:w.bBox(fb.node()).right-ua-T.l;jb=Math.max(jb,pb)}pb=2*H.xpad+jb+H.borderwidth+
H.outlinewidth/2;var xa=Ma-Ua;K.select("."+L.cbbg).attr({x:ua-H.xpad-(H.borderwidth+H.outlinewidth)/2,y:Ua-na,width:Math.max(pb,2),height:Math.max(xa+2*na,2)}).call(y.fill,H.bgcolor).call(y.stroke,H.bordercolor).style("stroke-width",H.borderwidth);K.selectAll("."+L.cboutline).attr({x:ua,y:Ua+H.ypad+("top"===X?$a:0),width:Math.max(sa,2),height:Math.max(xa-2*H.ypad-$a,2)}).call(y.stroke,H.outlinecolor).style({fill:"none","stroke-width":H.outlinewidth});K.attr("transform",k(T.l-({center:.5,right:1}[H.xanchor]||
0)*pb,T.t));jb={};var Ea=G[H.yanchor],Ia=J[H.yanchor];"pixels"===H.lenmode?(jb.y=H.y,jb.t=xa*Ea,jb.b=xa*Ia):(jb.t=jb.b=0,jb.yt=H.y+H.len*Ea,jb.yb=H.y-H.len*Ia);xa=G[H.xanchor];Ea=J[H.xanchor];"pixels"===H.thicknessmode?(jb.x=H.x,jb.l=pb*xa,jb.r=pb*Ea):(pb-=sa,jb.l=pb*xa,jb.r=pb*Ea,jb.xl=H.x-H.thickness*xa,jb.xr=H.x+H.thickness*Ea);n.autoMargin(Q,H._id,jb)}],Q)}function m(K,H,Q){var M=Q._fullLayout._size,P,T,O;e.init({element:K.node(),gd:Q,prepFn:function(){P=K.attr("transform");v(K)},moveFn:function(U,
S){K.attr("transform",P+k(U,S));T=e.align(H._xLeftFrac+U/M.w,H._thickFrac,0,1,H.xanchor);O=e.align(H._yBottomFrac-S/M.h,H._lenFrac,0,1,H.yanchor);U=e.getCursor(T,O,H.xanchor,H.yanchor);v(K,U)},doneFn:function(){v(K);if(void 0!==T&&void 0!==O){var U={};U[H._propPrefix+"x"]=T;U[H._propPrefix+"y"]=O;void 0!==H._traceIndex?p.call("_guiRestyle",Q,U,H._traceIndex):p.call("_guiRelayout",Q,U)}}})}function l(K,H,Q){var M=H._levels;K=[];var P=[],T,O=M.end+M.size/100,U=M.size,S=1.001*Q[0]-.001*Q[1],X=1.001*
Q[1]-.001*Q[0];for(T=0;1E5>T;T++){var ba=M.start+T*U;if(0<U?ba>=O:ba<=O)break;ba>S&&ba<X&&K.push(ba)}if(H._fillgradient)P=[0];else if("function"===typeof H._fillcolor)if(H=H._filllevels)for(O=H.end+H.size/100,U=H.size,T=0;1E5>T;T++){ba=H.start+T*U;if(0<U?ba>=O:ba<=O)break;ba>Q[0]&&ba<Q[1]&&P.push(ba)}else P=K.map(function(ca){return ca-M.size/2}),P.push(P[P.length-1]+M.size);else H._fillcolor&&"string"===typeof H._fillcolor&&(P=[0]);0>M.size&&(K.reverse(),P.reverse());return{line:K,fill:P}}function a(K,
H,Q){function M(O,U){return f.coerce(P,T,u,O,U)}K=K._fullLayout;var P={type:"linear",range:Q,tickmode:H.tickmode,nticks:H.nticks,tick0:H.tick0,dtick:H.dtick,tickvals:H.tickvals,ticktext:H.ticktext,ticks:H.ticks,ticklen:H.ticklen,tickwidth:H.tickwidth,tickcolor:H.tickcolor,showticklabels:H.showticklabels,ticklabelposition:H.ticklabelposition,tickfont:H.tickfont,tickangle:H.tickangle,tickformat:H.tickformat,exponentformat:H.exponentformat,minexponent:H.minexponent,separatethousands:H.separatethousands,
showexponent:H.showexponent,showtickprefix:H.showtickprefix,tickprefix:H.tickprefix,showticksuffix:H.showticksuffix,ticksuffix:H.ticksuffix,title:H.title,showline:!0,anchor:"free",side:"right",position:1},T={type:"linear",_id:"y"+H._id};H={letter:"y",font:K.font,noHover:!0,noTickson:!0,noTicklabelmode:!0,calendar:K.calendar};E(P,T,M,H,K);C(P,T,M,H);return T}var h=b("d3"),g=b("tinycolor2"),n=b("../../plots/plots"),p=b("../../registry"),d=b("../../plots/cartesian/axes"),e=b("../dragelement"),f=b("../../lib"),
k=f.strTranslate,t=b("../../lib/extend").extendFlat,v=b("../../lib/setcursor"),w=b("../drawing"),y=b("../color"),B=b("../titles"),A=b("../../lib/svg_text_utils"),z=b("../colorscale/helpers").flipScale,E=b("../../plots/cartesian/axis_defaults"),C=b("../../plots/cartesian/position_defaults"),u=b("../../plots/cartesian/layout_attributes");I=b("../../constants/alignment");var D=I.LINE_SPACING,G=I.FROM_TL,J=I.FROM_BR,L=b("./constants").cn;N.exports={draw:function(K){var H=K._fullLayout._infolayer.selectAll("g."+
L.colorbar).data(r(K),function(Q){return Q._id});H.enter().append("g").attr("class",function(Q){return Q._id}).classed(L.colorbar,!0);H.each(function(Q){var M=h.select(this);f.ensureSingle(M,"rect",L.cbbg);f.ensureSingle(M,"g",L.cbfills);f.ensureSingle(M,"g",L.cblines);f.ensureSingle(M,"g",L.cbaxis,function(T){T.classed(L.crisp,!0)});f.ensureSingle(M,"g",L.cbtitleunshift,function(T){T.append("g").classed(L.cbtitle,!0)});f.ensureSingle(M,"rect",L.cboutline);var P=q(M,Q,K);P&&P.then&&(K._promises||
[]).push(P);K._context.edits.colorbarPosition&&m(M,Q,K)});H.exit().each(function(Q){n.autoMargin(K,Q._id)}).remove();H.order()}}},{"../../constants/alignment":745,"../../lib":778,"../../lib/extend":768,"../../lib/setcursor":799,"../../lib/svg_text_utils":803,"../../plots/cartesian/axes":828,"../../plots/cartesian/axis_defaults":830,"../../plots/cartesian/layout_attributes":842,"../../plots/cartesian/position_defaults":845,"../../plots/plots":891,"../../registry":911,"../color":643,"../colorscale/helpers":654,
"../dragelement":662,"../drawing":665,"../titles":738,"./constants":645,d3:169,tinycolor2:576}],648:[function(b,N,I){var r=b("../../lib");N.exports=function(q){return r.isPlainObject(q.colorbar)}},{"../../lib":778}],649:[function(b,N,I){N.exports={moduleType:"component",name:"colorbar",attributes:b("./attributes"),supplyDefaults:b("./defaults"),draw:b("./draw").draw,hasColorbar:b("./has_colorbar")}},{"./attributes":644,"./defaults":646,"./draw":647,"./has_colorbar":648}],650:[function(b,N,I){var r=
b("../colorbar/attributes"),q=b("../../lib/regex").counter,m=b("./scales.js").scales;Object.keys(m);N.exports=function(l,a){a=a||{};var h=a.cLetter||"c";l="noScale"in a?a.noScale:"marker.line"===(l||"");var g="showScaleDflt"in a?a.showScaleDflt:"z"===h,n="string"===typeof a.colorscaleDflt?m[a.colorscaleDflt]:null,p=a.editTypeOverride||"";var d="colorAttr"in a?a.colorAttr:{z:"z",c:"color"}[h];var e=h+"auto",f=h+"min",k=h+"max",t={};t[f]=t[k]=void 0;var v={};v[e]=!1;var w={};"color"===d&&(w.color={valType:"color",
arrayOk:!0,editType:p||"style"},a.anim&&(w.color.anim=!0));w[e]={valType:"boolean",dflt:!0,editType:"calc",impliedEdits:t};w[f]={valType:"number",dflt:null,editType:p||"plot",impliedEdits:v};w[k]={valType:"number",dflt:null,editType:p||"plot",impliedEdits:v};w[h+"mid"]={valType:"number",dflt:null,editType:"calc",impliedEdits:t};w.colorscale={valType:"colorscale",editType:"calc",dflt:n,impliedEdits:{autocolorscale:!1}};w.autocolorscale={valType:"boolean",dflt:!1===a.autoColorDflt?!1:!0,editType:"calc",
impliedEdits:{colorscale:void 0}};w.reversescale={valType:"boolean",dflt:!1,editType:"plot"};l||(w.showscale={valType:"boolean",dflt:g,editType:"calc"},w.colorbar=r);a.noColorAxis||(w.coloraxis={valType:"subplotid",regex:q("coloraxis"),dflt:null,editType:"calc"});return w}},{"../../lib/regex":795,"../colorbar/attributes":644,"./scales.js":658}],651:[function(b,N,I){var r=b("fast-isnumeric"),q=b("../../lib"),m=b("./helpers").extractOpts;N.exports=function(l,a,h){l=l._fullLayout;var g=h.vals;a=(h=h.containerStr)?
q.nestedProperty(a,h).get():a;h=m(a);var n=!1!==h.auto,p=h.min,d=h.max,e=h.mid;void 0===p?p=q.aggNums(Math.min,null,g):n&&(p=a._colorAx&&r(p)?Math.min(p,q.aggNums(Math.min,null,g)):q.aggNums(Math.min,null,g));void 0===d?d=q.aggNums(Math.max,null,g):n&&(d=a._colorAx&&r(d)?Math.max(d,q.aggNums(Math.max,null,g)):q.aggNums(Math.max,null,g));n&&void 0!==e&&(d-e>e-p?p=e-(d-e):d-e<e-p&&(d=e+(e-p)));p===d&&(p-=.5,d+=.5);h._sync("min",p);h._sync("max",d);h.autocolorscale&&h._sync("colorscale",0>p*d?l.colorscale.diverging:
0<=p?l.colorscale.sequential:l.colorscale.sequentialminus)}},{"../../lib":778,"./helpers":654,"fast-isnumeric":241}],652:[function(b,N,I){var r=b("../../lib"),q=b("./helpers").hasColorscale,m=b("./helpers").extractOpts;N.exports=function(l,a){function h(k,t){var v=k["_"+t];void 0!==v&&(k[t]=v)}function g(k,t){if(k=t.container?r.nestedProperty(k,t.container).get():k)if(k.coloraxis)k._colorAx=a[k.coloraxis];else{var v=m(k),w=v.auto;(w||void 0===v.min)&&h(k,t.min);(w||void 0===v.max)&&h(k,t.max);v.autocolorscale&&
h(k,"colorscale")}}for(var n=0;n<l.length;n++){var p=l[n],d=p._module.colorbar;if(d)if(Array.isArray(d))for(var e=0;e<d.length;e++)g(p,d[e]);else g(p,d);q(p,"marker.line")&&g(p,{container:"marker.line",min:"cmin",max:"cmax"})}for(var f in a._colorAxes)g(a[f],{min:"cmin",max:"cmax"})}},{"../../lib":778,"./helpers":654}],653:[function(b,N,I){function r(n,p){var d=p.slice(0,p.length-1);return p?m.nestedProperty(n,d).get()||{}:n}var q=b("fast-isnumeric"),m=b("../../lib"),l=b("../colorbar/has_colorbar"),
a=b("../colorbar/defaults"),h=b("./scales").isValid,g=b("../../registry").traceIs;N.exports=function t(p,d,e,f,k){var v=k.prefix,w=k.cLetter,y="_module"in d,B=r(p,v),A=r(d,v),z=r(d._template||{},v)||{},E=function(){delete p.coloraxis;delete d.coloraxis;return t(p,d,e,f,k)};if(y){var C=e._colorAxes||{},u=f(v+"coloraxis");if(u){v=g(d,"contour")&&m.nestedProperty(d,"contours.coloring").get()||"heatmap";(y=C[u])?(y[2].push(E),y[0]!==v&&(y[0]=!1,m.warn(["Ignoring coloraxis:",u,"setting as it is linked to incompatible colorscales."].join(" ")))):
C[u]=[v,d,[E]];return}}E=B[w+"min"];C=B[w+"max"];E=q(E)&&q(C)&&E<C;f(v+w+"auto",!E)?f(v+w+"mid"):(f(v+w+"min"),f(v+w+"max"));w=B.colorscale;E=z.colorscale;var D;void 0!==w&&(D=!h(w));void 0!==E&&(D=!h(E));f(v+"autocolorscale",D);f(v+"colorscale");f(v+"reversescale");if("marker.line."!==v){var G;v&&y&&(G=l(B));f(v+"showscale",G)&&(v&&z&&(A._template=z),a(B,A,e))}}},{"../../lib":778,"../../registry":911,"../colorbar/defaults":646,"../colorbar/has_colorbar":648,"./scales":658,"fast-isnumeric":241}],
654:[function(b,N,I){function r(t){var v=t._colorAx,w=v?v:t;t={};var y;for(y=0;y<f.length;y++){var B=f[y];t[B]=w[B]}if(v){var A="c";for(y=0;y<k.length;y++)B=k[y],t[B]=w["c"+B]}else{for(y=0;y<k.length;y++){B=k[y];var z="c"+B;z in w?t[B]=w[z]:(z="z"+B,z in w&&(t[B]=w[z]))}A=z.charAt(0)}t._sync=function(E,C){E=-1!==k.indexOf(E)?A+E:E;w[E]=w["_"+E]=C};return t}function q(t){var v=r(t);t=v.min;var w=v.max;v=v.reversescale?m(v.colorscale):v.colorscale;for(var y=v.length,B=Array(y),A=Array(y),z=0;z<y;z++){var E=
v[z];B[z]=t+E[0]*(w-t);A[z]=E[1]}return{domain:B,range:A}}function m(t){var v=t.length,w=Array(v);--v;for(var y=0;0<=v;v--,y++){var B=t[v];w[y]=[1-B[0],B[1]]}return w}function l(t,v){v=v||{};var w=t.domain,y=t.range;t=y.length;for(var B=Array(t),A=0;A<t;A++){var z=g(y[A]).toRgb();B[A]=[z.r,z.g,z.b,z.a]}var E=h.scale.linear().domain(w).range(B).clamp(!0);w=v.noNumericCheck;v=v.returnArray;v=w&&v?E:w?function(C){return a(E(C))}:v?function(C){return n(C)?E(C):g(C).isValid()?C:d.defaultLine}:function(C){return n(C)?
a(E(C)):g(C).isValid()?C:d.defaultLine};v.domain=E.domain;v.range=function(){return y};return v}function a(t){return g({r:t[0],g:t[1],b:t[2],a:t[3]}).toRgbString()}var h=b("d3"),g=b("tinycolor2"),n=b("fast-isnumeric"),p=b("../../lib"),d=b("../color"),e=b("./scales").isValid,f=["showscale","autocolorscale","colorscale","reversescale","colorbar"],k=["min","max","mid","auto"];N.exports={hasColorscale:function(t,v,w){t=v?p.nestedProperty(t,v).get()||{}:t;w=t[w||"color"];v=!1;if(p.isArrayOrTypedArray(w))for(var y=
0;y<w.length;y++)if(n(w[y])){v=!0;break}return p.isPlainObject(t)&&(v||!0===t.showscale||n(t.cmin)&&n(t.cmax)||e(t.colorscale)||p.isPlainObject(t.colorbar))},extractOpts:r,extractScale:q,flipScale:m,makeColorScaleFunc:l,makeColorScaleFuncFromTrace:function(t,v){return l(q(t),v)}}},{"../../lib":778,"../color":643,"./scales":658,d3:169,"fast-isnumeric":241,tinycolor2:576}],655:[function(b,N,I){I=b("./scales");var r=b("./helpers");N.exports={moduleType:"component",name:"colorscale",attributes:b("./attributes"),
layoutAttributes:b("./layout_attributes"),supplyLayoutDefaults:b("./layout_defaults"),handleDefaults:b("./defaults"),crossTraceDefaults:b("./cross_trace_defaults"),calc:b("./calc"),scales:I.scales,defaultScale:I.defaultScale,getScale:I.get,isValidScale:I.isValid,hasColorscale:r.hasColorscale,extractOpts:r.extractOpts,extractScale:r.extractScale,flipScale:r.flipScale,makeColorScaleFunc:r.makeColorScaleFunc,makeColorScaleFuncFromTrace:r.makeColorScaleFuncFromTrace}},{"./attributes":650,"./calc":651,
"./cross_trace_defaults":652,"./defaults":653,"./helpers":654,"./layout_attributes":656,"./layout_defaults":657,"./scales":658}],656:[function(b,N,I){I=b("../../lib/extend").extendFlat;var r=b("./attributes");b=b("./scales").scales;N.exports={editType:"calc",colorscale:{editType:"calc",sequential:{valType:"colorscale",dflt:b.Reds,editType:"calc"},sequentialminus:{valType:"colorscale",dflt:b.Blues,editType:"calc"},diverging:{valType:"colorscale",dflt:b.RdBu,editType:"calc"}},coloraxis:I({_isSubplotObj:!0,
editType:"calc"},r("",{colorAttr:"corresponding trace color array(s)",noColorAxis:!0,showScaleDflt:!0}))}},{"../../lib/extend":768,"./attributes":650,"./scales":658}],657:[function(b,N,I){var r=b("../../lib"),q=b("../../plot_api/plot_template"),m=b("./layout_attributes"),l=b("./defaults");N.exports=function(a,h){function g(t,v){return r.coerce(e,f,m.coloraxis,t,v)}r.coerce(a,h,m,"colorscale.sequential",void 0);r.coerce(a,h,m,"colorscale.sequentialminus",void 0);r.coerce(a,h,m,"colorscale.diverging",
void 0);var n=h._colorAxes,p;for(p in n){var d=n[p];if(d[0]){var e=a[p]||{};var f=q.newContainer(h,p,"coloraxis");f._name=p;l(e,f,h,g,{prefix:"",cLetter:"c"})}else{for(var k=0;k<d[2].length;k++)d[2][k]();delete h._colorAxes[p]}}}},{"../../lib":778,"../../plot_api/plot_template":817,"./defaults":653,"./layout_attributes":656}],658:[function(b,N,I){function r(a){var h=0;if(!Array.isArray(a)||2>a.length||!a[0]||!a[a.length-1]||0!==+a[0][0]||1!==+a[a.length-1][0])return!1;for(var g=0;g<a.length;g++){var n=
a[g];if(2!==n.length||+n[0]<h||!q(n[1]).isValid())return!1;h=+n[0]}return!0}var q=b("tinycolor2"),m={Greys:[[0,"rgb(0,0,0)"],[1,"rgb(255,255,255)"]],YlGnBu:[[0,"rgb(8,29,88)"],[.125,"rgb(37,52,148)"],[.25,"rgb(34,94,168)"],[.375,"rgb(29,145,192)"],[.5,"rgb(65,182,196)"],[.625,"rgb(127,205,187)"],[.75,"rgb(199,233,180)"],[.875,"rgb(237,248,217)"],[1,"rgb(255,255,217)"]],Greens:[[0,"rgb(0,68,27)"],[.125,"rgb(0,109,44)"],[.25,"rgb(35,139,69)"],[.375,"rgb(65,171,93)"],[.5,"rgb(116,196,118)"],[.625,"rgb(161,217,155)"],
[.75,"rgb(199,233,192)"],[.875,"rgb(229,245,224)"],[1,"rgb(247,252,245)"]],YlOrRd:[[0,"rgb(128,0,38)"],[.125,"rgb(189,0,38)"],[.25,"rgb(227,26,28)"],[.375,"rgb(252,78,42)"],[.5,"rgb(253,141,60)"],[.625,"rgb(254,178,76)"],[.75,"rgb(254,217,118)"],[.875,"rgb(255,237,160)"],[1,"rgb(255,255,204)"]],Bluered:[[0,"rgb(0,0,255)"],[1,"rgb(255,0,0)"]],RdBu:[[0,"rgb(5,10,172)"],[.35,"rgb(106,137,247)"],[.5,"rgb(190,190,190)"],[.6,"rgb(220,170,132)"],[.7,"rgb(230,145,90)"],[1,"rgb(178,10,28)"]],Reds:[[0,"rgb(220,220,220)"],
[.2,"rgb(245,195,157)"],[.4,"rgb(245,160,105)"],[1,"rgb(178,10,28)"]],Blues:[[0,"rgb(5,10,172)"],[.35,"rgb(40,60,190)"],[.5,"rgb(70,100,245)"],[.6,"rgb(90,120,245)"],[.7,"rgb(106,137,247)"],[1,"rgb(220,220,220)"]],Picnic:[[0,"rgb(0,0,255)"],[.1,"rgb(51,153,255)"],[.2,"rgb(102,204,255)"],[.3,"rgb(153,204,255)"],[.4,"rgb(204,204,255)"],[.5,"rgb(255,255,255)"],[.6,"rgb(255,204,255)"],[.7,"rgb(255,153,255)"],[.8,"rgb(255,102,204)"],[.9,"rgb(255,102,102)"],[1,"rgb(255,0,0)"]],Rainbow:[[0,"rgb(150,0,90)"],
[.125,"rgb(0,0,200)"],[.25,"rgb(0,25,255)"],[.375,"rgb(0,152,255)"],[.5,"rgb(44,255,150)"],[.625,"rgb(151,255,0)"],[.75,"rgb(255,234,0)"],[.875,"rgb(255,111,0)"],[1,"rgb(255,0,0)"]],Portland:[[0,"rgb(12,51,131)"],[.25,"rgb(10,136,186)"],[.5,"rgb(242,211,56)"],[.75,"rgb(242,143,56)"],[1,"rgb(217,30,30)"]],Jet:[[0,"rgb(0,0,131)"],[.125,"rgb(0,60,170)"],[.375,"rgb(5,255,255)"],[.625,"rgb(255,255,0)"],[.875,"rgb(250,0,0)"],[1,"rgb(128,0,0)"]],Hot:[[0,"rgb(0,0,0)"],[.3,"rgb(230,0,0)"],[.6,"rgb(255,210,0)"],
[1,"rgb(255,255,255)"]],Blackbody:[[0,"rgb(0,0,0)"],[.2,"rgb(230,0,0)"],[.4,"rgb(230,210,0)"],[.7,"rgb(255,255,255)"],[1,"rgb(160,200,255)"]],Earth:[[0,"rgb(0,0,130)"],[.1,"rgb(0,180,180)"],[.2,"rgb(40,210,40)"],[.4,"rgb(230,230,50)"],[.6,"rgb(120,70,20)"],[1,"rgb(255,255,255)"]],Electric:[[0,"rgb(0,0,0)"],[.15,"rgb(30,0,100)"],[.4,"rgb(120,0,100)"],[.6,"rgb(160,90,0)"],[.8,"rgb(230,200,0)"],[1,"rgb(255,250,220)"]],Viridis:[[0,"#440154"],[.06274509803921569,"#48186a"],[.12549019607843137,"#472d7b"],
[.18823529411764706,"#424086"],[.25098039215686274,"#3b528b"],[.3137254901960784,"#33638d"],[.3764705882352941,"#2c728e"],[.4392156862745098,"#26828e"],[.5019607843137255,"#21918c"],[.5647058823529412,"#1fa088"],[.6274509803921569,"#28ae80"],[.6901960784313725,"#3fbc73"],[.7529411764705882,"#5ec962"],[.8156862745098039,"#84d44b"],[.8784313725490196,"#addc30"],[.9411764705882353,"#d8e219"],[1,"#fde725"]],Cividis:[[0,"rgb(0,32,76)"],[.058824,"rgb(0,42,102)"],[.117647,"rgb(0,52,110)"],[.176471,"rgb(39,63,108)"],
[.235294,"rgb(60,74,107)"],[.294118,"rgb(76,85,107)"],[.352941,"rgb(91,95,109)"],[.411765,"rgb(104,106,112)"],[.470588,"rgb(117,117,117)"],[.529412,"rgb(131,129,120)"],[.588235,"rgb(146,140,120)"],[.647059,"rgb(161,152,118)"],[.705882,"rgb(176,165,114)"],[.764706,"rgb(192,177,109)"],[.823529,"rgb(209,191,102)"],[.882353,"rgb(225,204,92)"],[.941176,"rgb(243,219,79)"],[1,"rgb(255,233,69)"]]},l=m.RdBu;N.exports={scales:m,defaultScale:l,get:function(a,h){function g(){try{a=m[a]||JSON.parse(a)}catch(n){a=
h}}h||(h=l);if(!a)return h;"string"===typeof a&&(g(),"string"===typeof a&&g());return r(a)?a:h},isValid:function(a){return void 0!==m[a]?!0:r(a)}}},{tinycolor2:576}],659:[function(b,N,I){N.exports=function(r,q,m,l,a){r=(r-m)/(l-m);q=r+q/(l-m);m=(r+q)/2;return"left"===a||"bottom"===a?r:"center"===a||"middle"===a?m:"right"===a||"top"===a?q:r<2/3-m?r:q>4/3-m?q:m}},{}],660:[function(b,N,I){var r=b("../../lib"),q=[["sw-resize","s-resize","se-resize"],["w-resize","move","e-resize"],["nw-resize","n-resize",
"ne-resize"]];N.exports=function(m,l,a,h){m="left"===a?0:"center"===a?1:"right"===a?2:r.constrain(Math.floor(3*m),0,2);l="bottom"===h?0:"middle"===h?1:"top"===h?2:r.constrain(Math.floor(3*l),0,2);return q[l][m]}},{"../../lib":778}],661:[function(b,N,I){I.selectMode=function(r){return"lasso"===r||"select"===r};I.drawMode=function(r){return"drawclosedpath"===r||"drawopenpath"===r||"drawline"===r||"drawrect"===r||"drawcircle"===r};I.openMode=function(r){return"drawline"===r||"drawopenpath"===r};I.rectMode=
function(r){return"select"===r||"drawline"===r||"drawrect"===r||"drawcircle"===r};I.freeMode=function(r){return"lasso"===r||"drawclosedpath"===r||"drawopenpath"===r};I.selectingOrDrawing=function(r){return I.freeMode(r)||I.rectMode(r)}},{}],662:[function(b,N,I){function r(){var p=document.createElement("div");p.className="dragcover";var d=p.style;d.position="fixed";d.left=0;d.right=0;d.top=0;d.bottom=0;d.zIndex=999999999;d.background="none";document.body.appendChild(p);return p}function q(p){return m(p.changedTouches?
p.changedTouches[0]:p,document.body)}var m=b("mouse-event-offset"),l=b("has-hover"),a=b("has-passive-events"),h=b("../../lib").removeElement,g=b("../../plots/cartesian/constants"),n=N.exports={};n.align=b("./align");n.getCursor=b("./cursor");b=b("./unhover");n.unhover=b.wrapped;n.unhoverRaw=b.raw;n.init=function(p){function d(L,K,H){Math.abs(L)<H&&(L=0);Math.abs(K)<H&&(K=0);return[L,K]}function e(L){t._dragged=!1;t._dragging=!0;var K=q(L);B=K[0];A=K[1];D=L.target;u=L;G=2===L.buttons||L.ctrlKey;"undefined"===
typeof L.clientX&&"undefined"===typeof L.clientY&&(L.clientX=B,L.clientY=A);z=(new Date).getTime();z-t._mouseDownTime<w?v+=1:(v=1,t._mouseDownTime=z);p.prepFn&&p.prepFn(L,B,A);l&&!G?(C=r(),C.style.cursor=window.getComputedStyle(y).cursor):l||(C=document,E=window.getComputedStyle(document.documentElement).cursor,document.documentElement.style.cursor=window.getComputedStyle(y).cursor);document.addEventListener("mouseup",k);document.addEventListener("touchend",k);!1!==p.dragmode&&(L.preventDefault(),
document.addEventListener("mousemove",f),document.addEventListener("touchmove",f,{passive:!1}))}function f(L){L.preventDefault();L=q(L);var K=J(L[0]-B,L[1]-A,p.minDrag||g.MINDRAG);L=K[0];K=K[1];if(L||K)t._dragged=!0,n.unhover(t);t._dragged&&p.moveFn&&!G&&(t._dragdata={element:y,dx:L,dy:K},p.moveFn(L,K))}function k(L){delete t._dragdata;!1!==p.dragmode&&(L.preventDefault(),document.removeEventListener("mousemove",f),document.removeEventListener("touchmove",f));document.removeEventListener("mouseup",
k);document.removeEventListener("touchend",k);l?h(C):E&&(C.documentElement.style.cursor=E,E=null);if(t._dragging){t._dragging=!1;(new Date).getTime()-t._mouseDownTime>w&&(v=Math.max(v-1,1));if(t._dragged)p.doneFn&&p.doneFn();else if(p.clickFn&&p.clickFn(v,u),!G){try{var K=new MouseEvent("click",L)}catch(Q){var H=q(L);K=document.createEvent("MouseEvents");K.initMouseEvent("click",L.bubbles,L.cancelable,L.view,L.detail,L.screenX,L.screenY,H[0],H[1],L.ctrlKey,L.altKey,L.shiftKey,L.metaKey,L.button,L.relatedTarget)}D.dispatchEvent(K)}t._dragging=
!1}t._dragged=!1}var t=p.gd,v=1,w=t._context.doubleClickDelay,y=p.element,B,A,z,E,C,u,D,G;t._mouseDownTime||(t._mouseDownTime=0);y.style.pointerEvents="all";y.onmousedown=e;a?(y._ontouchstart&&y.removeEventListener("touchstart",y._ontouchstart),y._ontouchstart=e,y.addEventListener("touchstart",e,{passive:!1})):y.ontouchstart=e;var J=p.clampFn||d};n.coverSlip=r},{"../../lib":778,"../../plots/cartesian/constants":834,"./align":659,"./cursor":660,"./unhover":663,"has-hover":440,"has-passive-events":441,
"mouse-event-offset":484}],663:[function(b,N,I){var r=b("../../lib/events"),q=b("../../lib/throttle"),m=b("../../lib/dom").getGraphDiv,l=b("../fx/constants"),a=N.exports={};a.wrapped=function(h,g,n){h=m(h);h._fullLayout&&q.clear(h._fullLayout._uid+l.HOVERID);a.raw(h,g,n)};a.raw=function(h,g){var n=h._fullLayout,p=h._hoverdata;g||(g={});g.target&&!1===r.triggerHandler(h,"plotly_beforehover",g)||(n._hoverlayer.selectAll("g").remove(),n._hoverlayer.selectAll("line").remove(),n._hoverlayer.selectAll("circle").remove(),
h._hoverdata=void 0,g.target&&p&&h.emit("plotly_unhover",{event:g,points:p}))}},{"../../lib/dom":766,"../../lib/events":767,"../../lib/throttle":804,"../fx/constants":677}],664:[function(b,N,I){I.dash={valType:"string",values:"solid dot dash longdash dashdot longdashdot".split(" "),dflt:"solid",editType:"style"}},{}],665:[function(b,N,I){function r(T,O){return C.symbolFuncs[T%100](O)+(200<=T?"M0,0.5L0.5,0L0,-0.5L-0.5,0Z":"")}function q(T,O,U,S){var X=g.select(T.node().parentNode),ba=-1!==O.indexOf("top")?
"top":-1!==O.indexOf("bottom")?"bottom":"middle";O=-1!==O.indexOf("left")?"end":-1!==O.indexOf("right")?"start":"middle";var ca=S?S/.8+1:0,ia=(v.lineCount(T)-1)*y+1;S=L[O]*ca;U=.75*U+L[ba]*ca+(L[ba]-1)*ia*U/2;T.attr("text-anchor",O);X.attr("transform",t(S,U))}function m(T,O){T=T.ts||O.textfont.size;return n(T)&&0<T?T:0}function l(T,O,U,S){var X=T[0]-O[0],ba=T[1]-O[1],ca=U[0]-O[0],ia=U[1]-O[1];U=Math.pow(X*X+ba*ba,.25);T=Math.pow(ca*ca+ia*ia,.25);X=(T*T*X-U*U*ca)*S;S*=T*T*ba-U*U*ia;ba=3*T*(U+T);U=
3*U*(U+T);return[[g.round(O[0]+(ba&&X/ba),2),g.round(O[1]+(ba&&S/ba),2)],[g.round(O[0]-(U&&X/U),2),g.round(O[1]-(U&&S/U),2)]]}function a(T){var O=T.getAttribute("data-unformatted");if(null!==O)return O+T.getAttribute("data-math")+T.getAttribute("text-anchor")+T.getAttribute("style")}function h(T,O){if(!T)return null;O=O._context;return"url('"+(O._exportedPlot?"":O._baseUrl||"")+"#"+T+"')"}var g=b("d3"),n=b("fast-isnumeric"),p=b("tinycolor2"),d=b("../../registry"),e=b("../color"),f=b("../colorscale"),
k=b("../../lib"),t=k.strTranslate,v=b("../../lib/svg_text_utils"),w=b("../../constants/xmlns_namespaces"),y=b("../../constants/alignment").LINE_SPACING,B=b("../../constants/interactions").DESELECTDIM,A=b("../../traces/scatter/subtypes"),z=b("../../traces/scatter/make_bubble_size_func"),E=b("../../components/fx/helpers").appendArrayPointValue,C=N.exports={};C.font=function(T,O,U,S){k.isPlainObject(O)&&(S=O.color,U=O.size,O=O.family);O&&T.style("font-family",O);U+1&&T.style("font-size",U+"px");S&&T.call(e.fill,
S)};C.setPosition=function(T,O,U){T.attr("x",O).attr("y",U)};C.setSize=function(T,O,U){T.attr("width",O).attr("height",U)};C.setRect=function(T,O,U,S,X){T.call(C.setPosition,O,U).call(C.setSize,S,X)};C.translatePoint=function(T,O,U,S){U=U.c2p(T.x);T=S.c2p(T.y);if(n(U)&&n(T)&&O.node())"text"===O.node().nodeName?O.attr("x",U).attr("y",T):O.attr("transform",t(U,T));else return!1;return!0};C.translatePoints=function(T,O,U){T.each(function(S){var X=g.select(this);C.translatePoint(S,X,O,U)})};C.hideOutsideRangePoint=
function(T,O,U,S,X,ba){O.attr("display",U.isPtWithinRange(T,X)&&S.isPtWithinRange(T,ba)?null:"none")};C.hideOutsideRangePoints=function(T,O){if(O._hasClipOnAxisFalse){var U=O.xaxis,S=O.yaxis;T.each(function(X){X=X[0].trace;var ba=X.xcalendar,ca=X.ycalendar;X=d.traceIs(X,"bar-like")?".bartext":".point,.textpoint";T.selectAll(X).each(function(ia){C.hideOutsideRangePoint(ia,g.select(this),U,S,ba,ca)})})}};C.crispRound=function(T,O,U){return O&&n(O)?T._context.staticPlot?O:1>O?1:Math.round(O):U||0};C.singleLineStyle=
function(T,O,U,S,X){O.style("fill","none");T=(((T||[])[0]||{}).trace||{}).line||{};U=U||T.width||0;X=X||T.dash||"";e.stroke(O,S||T.color);C.dashLine(O,X,U)};C.lineGroupStyle=function(T,O,U,S){T.style("fill","none").each(function(X){X=(((X||[])[0]||{}).trace||{}).line||{};var ba=O||X.width||0,ca=S||X.dash||"";g.select(this).call(e.stroke,U||X.color).call(C.dashLine,ca,ba)})};C.dashLine=function(T,O,U){U=+U||0;O=C.dashStyle(O,U);T.style({"stroke-dasharray":O,"stroke-width":U+"px"})};C.dashStyle=function(T,
O){O=Math.max(+O||1,3);"solid"===T?T="":"dot"===T?T=O+"px,"+O+"px":"dash"===T?T=3*O+"px,"+3*O+"px":"longdash"===T?T=5*O+"px,"+5*O+"px":"dashdot"===T?T=3*O+"px,"+O+"px,"+O+"px,"+O+"px":"longdashdot"===T&&(T=5*O+"px,"+2*O+"px,"+O+"px,"+2*O+"px");return T};C.singleFillStyle=function(T){var O=(((g.select(T.node()).data()[0]||[])[0]||{}).trace||{}).fillcolor;O&&T.call(e.fill,O)};C.fillGroupStyle=function(T){T.style("stroke-width",0).each(function(O){var U=g.select(this);O[0].trace&&U.call(e.fill,O[0].trace.fillcolor)})};
var u=b("./symbol_defs");C.symbolNames=[];C.symbolFuncs=[];C.symbolNeedLines={};C.symbolNoDot={};C.symbolNoFill={};C.symbolList=[];Object.keys(u).forEach(function(T){var O=u[T],U=O.n;C.symbolList.push(U,String(U),T,U+100,String(U+100),T+"-open");C.symbolNames[U]=T;C.symbolFuncs[U]=O.f;O.needLine&&(C.symbolNeedLines[U]=!0);O.noDot?C.symbolNoDot[U]=!0:C.symbolList.push(U+200,String(U+200),T+"-dot",U+300,String(U+300),T+"-open-dot");O.noFill&&(C.symbolNoFill[U]=!0)});var D=C.symbolNames.length;C.symbolNumber=
function(T){if(n(T))T=+T;else if("string"===typeof T){var O=0;0<T.indexOf("-open")&&(O=100,T=T.replace("-open",""));0<T.indexOf("-dot")&&(O+=200,T=T.replace("-dot",""));T=C.symbolNames.indexOf(T);0<=T&&(T+=O)}return T%100>=D||400<=T?0:Math.floor(Math.max(T,0))};b={x1:1,x2:0,y1:0,y2:0};N={x1:0,x2:0,y1:1,y2:0};var G=g.format("~.1f"),J={radial:{node:"radialGradient"},radialreversed:{node:"radialGradient",reversed:!0},horizontal:{node:"linearGradient",attrs:b},horizontalreversed:{node:"linearGradient",
attrs:b,reversed:!0},vertical:{node:"linearGradient",attrs:N},verticalreversed:{node:"linearGradient",attrs:N,reversed:!0}};C.gradient=function(T,O,U,S,X,ba){for(var ca=X.length,ia=J[S],ja=Array(ca),la=0;la<ca;la++)ia.reversed?ja[ca-1-la]=[G(100*(1-X[la][0])),X[la][1]]:ja[la]=[G(100*X[la][0]),X[la][1]];X=O._fullLayout;var da="g"+X._uid+"-"+U;U=X._defs.select(".gradients").selectAll("#"+da).data([S+ja.join(";")],k.identity);U.exit().remove();U.enter().append(ia.node).each(function(){var oa=g.select(this);
ia.attrs&&oa.attr(ia.attrs);oa.attr("id",da);oa=oa.selectAll("stop").data(ja);oa.exit().remove();oa.enter().append("stop");oa.each(function(sa){var ma=p(sa[1]);g.select(this).attr({offset:sa[0]+"%","stop-color":e.tinyRGB(ma),"stop-opacity":ma.getAlpha()})})});T.style(ba,h(da,O)).style(ba+"-opacity",null);T="."+g.select(T.node().parentNode).attr("class").replace(/\s/g,".")+"\x3e."+T.attr("class").replace(/\s/g,".");X._gradientUrlQueryParts[T]=1};C.initGradients=function(T){T=T._fullLayout;k.ensureSingle(T._defs,
"g","gradients").selectAll("linearGradient,radialGradient").remove();T._gradientUrlQueryParts={}};C.pointStyle=function(T,O,U){if(T.size()){var S=C.makePointStyleFns(O);T.each(function(X){C.singlePointStyle(X,g.select(this),O,S,U)})}};C.singlePointStyle=function(T,O,U,S,X){var ba=U.marker,ca=ba.line;O.style("opacity",S.selectedOpacityFn?S.selectedOpacityFn(T):void 0===T.mo?ba.opacity:T.mo);if(S.ms2mrc){var ia="various"===T.ms||"various"===ba.size?3:S.ms2mrc(T.ms);T.mrc=ia;S.selectedSizeFn&&(ia=T.mrc=
S.selectedSizeFn(T));var ja=C.symbolNumber(T.mx||ba.symbol)||0;T.om=100<=ja%200;O.attr("d",r(ja,ia))}ia=!1;if(T.so){ja=ca.outlierwidth;var la=ca.outliercolor;ca=ba.outliercolor}else ja=(ca||{}).width,ja=(T.mlw+1||ja+1||(T.trace?(T.trace.marker.line||{}).width:0)+1)-1||0,la="mlc"in T?T.mlcc=S.lineScale(T.mlc):k.isArrayOrTypedArray(ca.color)?e.defaultLine:ca.color,k.isArrayOrTypedArray(ba.color)&&(ia=!0),ca="mc"in T?T.mcc=S.markerScale(T.mc):ba.color||"rgba(0,0,0,0)",S.selectedColorFn&&(ca=S.selectedColorFn(T));
if(T.om)O.call(e.stroke,ca).style({"stroke-width":(ja||1)+"px",fill:"none"});else{O.style("stroke-width",(T.isBlank?0:ja)+"px");var da=ba.gradient;(S=T.mgt)?ia=!0:S=da&&da.type;Array.isArray(S)&&(S=S[0],J[S]||(S=0));S&&"none"!==S?((ba=T.mgc)?ia=!0:ba=da.color,U=U.uid,ia&&(U+="-"+T.i),C.gradient(O,X,U,S,[[0,ba],[1,ca]],"fill")):e.fill(O,ca);ja&&e.stroke(O,la)}};C.makePointStyleFns=function(T){var O={},U=T.marker;O.markerScale=C.tryColorscale(U,"");O.lineScale=C.tryColorscale(U,"line");d.traceIs(T,
"symbols")&&(O.ms2mrc=A.isBubble(T)?z(T):function(){return(U.size||6)/2});T.selectedpoints&&k.extendFlat(O,C.makeSelectedPointStyleFns(T));return O};C.makeSelectedPointStyleFns=function(T){var O={},U=T.marker||{},S=(T.selected||{}).marker||{},X=(T.unselected||{}).marker||{},ba=S.opacity,ca=X.opacity,ia=void 0!==ba,ja=void 0!==ca;if(k.isArrayOrTypedArray(U.opacity)||ia||ja)O.selectedOpacityFn=function(ka){var ua=void 0===ka.mo?U.opacity:ka.mo;return ka.selected?ia?ba:ua:ja?ca:B*ua};var la=U.color,
da=S.color,oa=X.color;if(da||oa)O.selectedColorFn=function(ka){var ua=ka.mcc||la;return ka.selected?da||ua:oa||ua};var sa=U.size,ma=S.size,qa=X.size,pa=void 0!==ma,na=void 0!==qa;d.traceIs(T,"symbols")&&(pa||na)&&(O.selectedSizeFn=function(ka){var ua=ka.mrc||sa/2;return ka.selected?pa?ma/2:ua:na?qa/2:ua});return O};C.makeSelectedTextStyleFns=function(T){var O={},U=(T.textfont||{}).color,S=((T.selected||{}).textfont||{}).color,X=((T.unselected||{}).textfont||{}).color;O.selectedTextColorFn=function(ba){var ca=
ba.tc||U;return ba.selected?S||ca:X?X:S?ca:e.addOpacity(ca,B)};return O};C.selectedPointStyle=function(T,O){if(T.size()&&O.selectedpoints){var U=C.makeSelectedPointStyleFns(O),S=O.marker||{},X=[];U.selectedOpacityFn&&X.push(function(ba,ca){ba.style("opacity",U.selectedOpacityFn(ca))});U.selectedColorFn&&X.push(function(ba,ca){e.fill(ba,U.selectedColorFn(ca))});U.selectedSizeFn&&X.push(function(ba,ca){var ia=ca.mx||S.symbol||0,ja=U.selectedSizeFn(ca);ba.attr("d",r(C.symbolNumber(ia),ja));ca.mrc2=ja});
X.length&&T.each(function(ba){for(var ca=g.select(this),ia=0;ia<X.length;ia++)X[ia](ca,ba)})}};C.tryColorscale=function(T,O){if(T=O?k.nestedProperty(T,O).get():T)if(O=T.color,(T.colorscale||T._colorAx)&&k.isArrayOrTypedArray(O))return f.makeColorScaleFuncFromTrace(T);return k.identity};var L={start:1,end:-1,middle:0,bottom:1,top:-1};C.textPointStyle=function(T,O,U){if(T.size()){if(O.selectedpoints)var S=C.makeSelectedTextStyleFns(O).selectedTextColorFn;var X=O.texttemplate,ba=U._fullLayout;T.each(function(ca){var ia=
g.select(this),ja=X?k.extractOption(ca,O,"txt","texttemplate"):k.extractOption(ca,O,"tx","text");if(ja||0===ja){if(X){var la=O._module.formatLabels?O._module.formatLabels(ca,O,ba):{},da={};E(da,O,ca.i);ja=k.texttemplateString(ja,la,ba._d3locale,da,ca,O._meta||{})}la=ca.tp||O.textposition;da=m(ca,O);var oa=S?S(ca):ca.tc||O.textfont.color;ia.call(C.font,ca.tf||O.textfont.family,da,oa).text(ja).call(v.convertToTspans,U).call(q,la,da,ca.mrc)}else ia.remove()})}};C.selectedTextStyle=function(T,O){if(T.size()&&
O.selectedpoints){var U=C.makeSelectedTextStyleFns(O);T.each(function(S){var X=g.select(this),ba=U.selectedTextColorFn(S),ca=S.tp||O.textposition,ia=m(S,O);e.fill(X,ba);q(X,ca,ia,S.mrc2||S.mrc)})}};C.smoothopen=function(T,O){if(3>T.length)return"M"+T.join("L");var U="M"+T[0],S=[],X;for(X=1;X<T.length-1;X++)S.push(l(T[X-1],T[X],T[X+1],O));U+="Q"+S[0][0]+" "+T[1];for(X=2;X<T.length-1;X++)U+="C"+S[X-2][1]+" "+S[X-1][0]+" "+T[X];return U+="Q"+S[T.length-3][1]+" "+T[T.length-1]};C.smoothclosed=function(T,
O){if(3>T.length)return"M"+T.join("L")+"Z";var U="M"+T[0],S=T.length-1,X=[l(T[S],T[0],T[1],O)],ba;for(ba=1;ba<S;ba++)X.push(l(T[ba-1],T[ba],T[ba+1],O));X.push(l(T[S-1],T[S],T[0],O));for(ba=1;ba<=S;ba++)U+="C"+X[ba-1][1]+" "+X[ba][0]+" "+T[ba];return U+="C"+X[S][1]+" "+X[0][0]+" "+T[0]+"Z"};var K={hv:function(T,O){return"H"+g.round(O[0],2)+"V"+g.round(O[1],2)},vh:function(T,O){return"V"+g.round(O[1],2)+"H"+g.round(O[0],2)},hvh:function(T,O){return"H"+g.round((T[0]+O[0])/2,2)+"V"+g.round(O[1],2)+"H"+
g.round(O[0],2)},vhv:function(T,O){return"V"+g.round((T[1]+O[1])/2,2)+"H"+g.round(O[0],2)+"V"+g.round(O[1],2)}},H=function(T,O){return"L"+g.round(O[0],2)+","+g.round(O[1],2)};C.steps=function(T){var O=K[T]||H;return function(U){for(var S="M"+g.round(U[0][0],2)+","+g.round(U[0][1],2),X=1;X<U.length;X++)S+=O(U[X-1],U[X]);return S}};C.makeTester=function(){var T=k.ensureSingleById(g.select("body"),"svg","js-plotly-tester",function(U){U.attr(w.svgAttrs).style({position:"absolute",left:"-10000px",top:"-10000px",
width:"9000px",height:"9000px","z-index":"1"})}),O=k.ensureSingle(T,"path","js-reference-point",function(U){U.attr("d","M0,0H1V1H0Z").style({"stroke-width":0,fill:"black"})});C.tester=T;C.testref=O};C.savedBBoxes={};var Q=0;C.bBox=function(T,O,U){U||(U=a(T));var S;if(U){if(S=C.savedBBoxes[U])return k.extendFlat({},S)}else if(1===T.childNodes.length){var X=T.childNodes[0];if(U=a(X)){S=+X.getAttribute("x")||0;var ba=+X.getAttribute("y")||0,ca=X.getAttribute("transform");if(!ca)return U=C.bBox(X,!1,
U),S&&(U.left+=S,U.right+=S),ba&&(U.top+=ba,U.bottom+=ba),U;U+="~"+S+"~"+ba+"~"+ca;if(S=C.savedBBoxes[U])return k.extendFlat({},S)}}if(!O){var ia=C.tester.node();T=T.cloneNode(!0);ia.appendChild(T)}g.select(T).attr("transform",null).call(v.positionText,0,0);S=T.getBoundingClientRect();ba=C.testref.node().getBoundingClientRect();O||ia.removeChild(T);O={height:S.height,width:S.width,left:S.left-ba.left,top:S.top-ba.top,right:S.right-ba.left,bottom:S.bottom-ba.top};1E4<=Q&&(C.savedBBoxes={},Q=0);U&&
(C.savedBBoxes[U]=O);Q++;return k.extendFlat({},O)};C.setClipUrl=function(T,O,U){T.attr("clip-path",h(O,U))};C.getTranslate=function(T){T=(T[T.attr?"attr":"getAttribute"]("transform")||"").replace(/.*\btranslate\((-?\d*\.?\d*)[^-\d]*(-?\d*\.?\d*)[^\d].*/,function(O,U,S){return[U,S].join(" ")}).split(" ");return{x:+T[0]||0,y:+T[1]||0}};C.setTranslate=function(T,O,U){var S=T.attr?"attr":"setAttribute",X=T[T.attr?"attr":"getAttribute"]("transform")||"";O=O||0;U=U||0;X=X.replace(/(\btranslate\(.*?\);?)/,
"").trim();X+=t(O,U);X=X.trim();T[S]("transform",X);return X};C.getScale=function(T){T=(T[T.attr?"attr":"getAttribute"]("transform")||"").replace(/.*\bscale\((\d*\.?\d*)[^\d]*(\d*\.?\d*)[^\d].*/,function(O,U,S){return[U,S].join(" ")}).split(" ");return{x:+T[0]||1,y:+T[1]||1}};C.setScale=function(T,O,U){var S=T.attr?"attr":"setAttribute",X=T[T.attr?"attr":"getAttribute"]("transform")||"";O=O||1;U=U||1;X=X.replace(/(\bscale\(.*?\);?)/,"").trim();X=(X+("scale("+O+","+U+")")).trim();T[S]("transform",
X);return X};var M=/\s*sc.*/;C.setPointGroupScale=function(T,O,U){O=O||1;U=U||1;if(T){var S=1===O&&1===U?"":"scale("+O+","+U+")";T.each(function(){var X=(this.getAttribute("transform")||"").replace(M,"");X+=S;X=X.trim();this.setAttribute("transform",X)})}};var P=/translate\([^)]*\)\s*$/;C.setTextPointsScale=function(T,O,U){T&&T.each(function(){var S=g.select(this),X=S.select("text");if(X.node()){var ba=parseFloat(X.attr("x")||0);var ca=parseFloat(X.attr("y")||0);X=(S.attr("transform")||"").match(P);
ba=1===O&&1===U?[]:[t(ba,ca),"scale("+O+","+U+")",t(-ba,-ca)];X&&ba.push(X);S.attr("transform",ba.join(""))}})}},{"../../components/fx/helpers":679,"../../constants/alignment":745,"../../constants/interactions":752,"../../constants/xmlns_namespaces":754,"../../lib":778,"../../lib/svg_text_utils":803,"../../registry":911,"../../traces/scatter/make_bubble_size_func":1204,"../../traces/scatter/subtypes":1212,"../color":643,"../colorscale":655,"./symbol_defs":666,d3:169,"fast-isnumeric":241,tinycolor2:576}],
666:[function(b,N,I){var r=b("d3");N.exports={circle:{n:0,f:function(q){q=r.round(q,2);return"M"+q+",0A"+q+","+q+" 0 1,1 0,-"+q+"A"+q+","+q+" 0 0,1 "+q+",0Z"}},square:{n:1,f:function(q){q=r.round(q,2);return"M"+q+","+q+"H-"+q+"V-"+q+"H"+q+"Z"}},diamond:{n:2,f:function(q){q=r.round(1.3*q,2);return"M"+q+",0L0,"+q+"L-"+q+",0L0,-"+q+"Z"}},cross:{n:3,f:function(q){var m=r.round(.4*q,2);q=r.round(1.2*q,2);return"M"+q+","+m+"H"+m+"V"+q+"H-"+m+"V"+m+"H-"+q+"V-"+m+"H-"+m+"V-"+q+"H"+m+"V-"+m+"H"+q+"Z"}},x:{n:4,
f:function(q){q=r.round(.8*q/Math.sqrt(2),2);var m="l"+q+","+q,l="l"+q+",-"+q,a="l-"+q+",-"+q,h="l-"+q+","+q;return"M0,"+q+m+l+a+l+a+h+a+h+m+h+m+"Z"}},"triangle-up":{n:5,f:function(q){var m=r.round(2*q/Math.sqrt(3),2),l=r.round(q/2,2);q=r.round(q,2);return"M-"+m+","+l+"H"+m+"L0,-"+q+"Z"}},"triangle-down":{n:6,f:function(q){var m=r.round(2*q/Math.sqrt(3),2),l=r.round(q/2,2);q=r.round(q,2);return"M-"+m+",-"+l+"H"+m+"L0,"+q+"Z"}},"triangle-left":{n:7,f:function(q){var m=r.round(2*q/Math.sqrt(3),2),l=
r.round(q/2,2);q=r.round(q,2);return"M"+l+",-"+m+"V"+m+"L-"+q+",0Z"}},"triangle-right":{n:8,f:function(q){var m=r.round(2*q/Math.sqrt(3),2),l=r.round(q/2,2);q=r.round(q,2);return"M-"+l+",-"+m+"V"+m+"L"+q+",0Z"}},"triangle-ne":{n:9,f:function(q){var m=r.round(.6*q,2);q=r.round(1.2*q,2);return"M-"+q+",-"+m+"H"+m+"V"+q+"Z"}},"triangle-se":{n:10,f:function(q){var m=r.round(.6*q,2);q=r.round(1.2*q,2);return"M"+m+",-"+q+"V"+m+"H-"+q+"Z"}},"triangle-sw":{n:11,f:function(q){var m=r.round(.6*q,2);q=r.round(1.2*
q,2);return"M"+q+","+m+"H-"+m+"V-"+q+"Z"}},"triangle-nw":{n:12,f:function(q){var m=r.round(.6*q,2);q=r.round(1.2*q,2);return"M-"+m+","+q+"V-"+m+"H"+q+"Z"}},pentagon:{n:13,f:function(q){var m=r.round(.951*q,2),l=r.round(.588*q,2),a=r.round(-q,2),h=r.round(-.309*q,2);q=r.round(.809*q,2);return"M"+m+","+h+"L"+l+","+q+"H-"+l+"L-"+m+","+h+"L0,"+a+"Z"}},hexagon:{n:14,f:function(q){var m=r.round(q,2),l=r.round(q/2,2);q=r.round(q*Math.sqrt(3)/2,2);return"M"+q+",-"+l+"V"+l+"L0,"+m+"L-"+q+","+l+"V-"+l+"L0,-"+
m+"Z"}},hexagon2:{n:15,f:function(q){var m=r.round(q,2),l=r.round(q/2,2);q=r.round(q*Math.sqrt(3)/2,2);return"M-"+l+","+q+"H"+l+"L"+m+",0L"+l+",-"+q+"H-"+l+"L-"+m+",0Z"}},octagon:{n:16,f:function(q){var m=r.round(.924*q,2);q=r.round(.383*q,2);return"M-"+q+",-"+m+"H"+q+"L"+m+",-"+q+"V"+q+"L"+q+","+m+"H-"+q+"L-"+m+","+q+"V-"+q+"Z"}},star:{n:17,f:function(q){var m=1.4*q;q=r.round(.225*m,2);var l=r.round(.951*m,2),a=r.round(.363*m,2),h=r.round(.588*m,2),g=r.round(-m,2),n=r.round(-.309*m,2),p=r.round(.118*
m,2),d=r.round(.809*m,2);m=r.round(.382*m,2);return"M"+q+","+n+"H"+l+"L"+a+","+p+"L"+h+","+d+"L0,"+m+"L-"+h+","+d+"L-"+a+","+p+"L-"+l+","+n+"H-"+q+"L0,"+g+"Z"}},hexagram:{n:18,f:function(q){var m=r.round(.66*q,2),l=r.round(.38*q,2);q=r.round(.76*q,2);return"M-"+q+",0l-"+l+",-"+m+"h"+q+"l"+l+",-"+m+"l"+l+","+m+"h"+q+"l-"+l+","+m+"l"+l+","+m+"h-"+q+"l-"+l+","+m+"l-"+l+",-"+m+"h-"+q+"Z"}},"star-triangle-up":{n:19,f:function(q){var m=r.round(q*Math.sqrt(3)*.8,2),l=r.round(.8*q,2),a=r.round(1.6*q,2);q=
r.round(4*q,2);q="A "+q+","+q+" 0 0 1 ";return"M-"+m+","+l+q+m+","+l+q+"0,-"+a+q+"-"+m+","+l+"Z"}},"star-triangle-down":{n:20,f:function(q){var m=r.round(q*Math.sqrt(3)*.8,2),l=r.round(.8*q,2),a=r.round(1.6*q,2);q=r.round(4*q,2);q="A "+q+","+q+" 0 0 1 ";return"M"+m+",-"+l+q+"-"+m+",-"+l+q+"0,"+a+q+m+",-"+l+"Z"}},"star-square":{n:21,f:function(q){var m=r.round(1.1*q,2);q=r.round(2*q,2);q="A "+q+","+q+" 0 0 1 ";return"M-"+m+",-"+m+q+"-"+m+","+m+q+m+","+m+q+m+",-"+m+q+"-"+m+",-"+m+"Z"}},"star-diamond":{n:22,
f:function(q){var m=r.round(1.4*q,2);q=r.round(1.9*q,2);q="A "+q+","+q+" 0 0 1 ";return"M-"+m+",0"+q+"0,"+m+q+m+",0"+q+"0,-"+m+q+"-"+m+",0Z"}},"diamond-tall":{n:23,f:function(q){var m=r.round(.7*q,2);q=r.round(1.4*q,2);return"M0,"+q+"L"+m+",0L0,-"+q+"L-"+m+",0Z"}},"diamond-wide":{n:24,f:function(q){var m=r.round(1.4*q,2);q=r.round(.7*q,2);return"M0,"+q+"L"+m+",0L0,-"+q+"L-"+m+",0Z"}},hourglass:{n:25,f:function(q){q=r.round(q,2);return"M"+q+","+q+"H-"+q+"L"+q+",-"+q+"H-"+q+"Z"},noDot:!0},bowtie:{n:26,
f:function(q){q=r.round(q,2);return"M"+q+","+q+"V-"+q+"L-"+q+","+q+"V-"+q+"Z"},noDot:!0},"circle-cross":{n:27,f:function(q){q=r.round(q,2);return"M0,"+q+"V-"+q+"M"+q+",0H-"+q+"M"+q+",0A"+q+","+q+" 0 1,1 0,-"+q+"A"+q+","+q+" 0 0,1 "+q+",0Z"},needLine:!0,noDot:!0},"circle-x":{n:28,f:function(q){var m=r.round(q,2);q=r.round(q/Math.sqrt(2),2);return"M"+q+","+q+"L-"+q+",-"+q+"M"+q+",-"+q+"L-"+q+","+q+"M"+m+",0A"+m+","+m+" 0 1,1 0,-"+m+"A"+m+","+m+" 0 0,1 "+m+",0Z"},needLine:!0,noDot:!0},"square-cross":{n:29,
f:function(q){q=r.round(q,2);return"M0,"+q+"V-"+q+"M"+q+",0H-"+q+"M"+q+","+q+"H-"+q+"V-"+q+"H"+q+"Z"},needLine:!0,noDot:!0},"square-x":{n:30,f:function(q){q=r.round(q,2);return"M"+q+","+q+"L-"+q+",-"+q+"M"+q+",-"+q+"L-"+q+","+q+"M"+q+","+q+"H-"+q+"V-"+q+"H"+q+"Z"},needLine:!0,noDot:!0},"diamond-cross":{n:31,f:function(q){q=r.round(1.3*q,2);return"M"+q+",0L0,"+q+"L-"+q+",0L0,-"+q+"ZM0,-"+q+"V"+q+"M-"+q+",0H"+q},needLine:!0,noDot:!0},"diamond-x":{n:32,f:function(q){var m=r.round(1.3*q,2);q=r.round(.65*
q,2);return"M"+m+",0L0,"+m+"L-"+m+",0L0,-"+m+"ZM-"+q+",-"+q+"L"+q+","+q+"M-"+q+","+q+"L"+q+",-"+q},needLine:!0,noDot:!0},"cross-thin":{n:33,f:function(q){q=r.round(1.4*q,2);return"M0,"+q+"V-"+q+"M"+q+",0H-"+q},needLine:!0,noDot:!0,noFill:!0},"x-thin":{n:34,f:function(q){q=r.round(q,2);return"M"+q+","+q+"L-"+q+",-"+q+"M"+q+",-"+q+"L-"+q+","+q},needLine:!0,noDot:!0,noFill:!0},asterisk:{n:35,f:function(q){var m=r.round(1.2*q,2);q=r.round(.85*q,2);return"M0,"+m+"V-"+m+"M"+m+",0H-"+m+"M"+q+","+q+"L-"+
q+",-"+q+"M"+q+",-"+q+"L-"+q+","+q},needLine:!0,noDot:!0,noFill:!0},hash:{n:36,f:function(q){var m=r.round(q/2,2);q=r.round(q,2);return"M"+m+","+q+"V-"+q+"m-"+q+",0V"+q+"M"+q+","+m+"H-"+q+"m0,-"+q+"H"+q},needLine:!0,noFill:!0},"y-up":{n:37,f:function(q){var m=r.round(1.2*q,2),l=r.round(1.6*q,2);q=r.round(.8*q,2);return"M-"+m+","+q+"L0,0M"+m+","+q+"L0,0M0,-"+l+"L0,0"},needLine:!0,noDot:!0,noFill:!0},"y-down":{n:38,f:function(q){var m=r.round(1.2*q,2),l=r.round(1.6*q,2);q=r.round(.8*q,2);return"M-"+
m+",-"+q+"L0,0M"+m+",-"+q+"L0,0M0,"+l+"L0,0"},needLine:!0,noDot:!0,noFill:!0},"y-left":{n:39,f:function(q){var m=r.round(1.2*q,2),l=r.round(1.6*q,2);q=r.round(.8*q,2);return"M"+q+","+m+"L0,0M"+q+",-"+m+"L0,0M-"+l+",0L0,0"},needLine:!0,noDot:!0,noFill:!0},"y-right":{n:40,f:function(q){var m=r.round(1.2*q,2),l=r.round(1.6*q,2);q=r.round(.8*q,2);return"M-"+q+","+m+"L0,0M-"+q+",-"+m+"L0,0M"+l+",0L0,0"},needLine:!0,noDot:!0,noFill:!0},"line-ew":{n:41,f:function(q){q=r.round(1.4*q,2);return"M"+q+",0H-"+
q},needLine:!0,noDot:!0,noFill:!0},"line-ns":{n:42,f:function(q){q=r.round(1.4*q,2);return"M0,"+q+"V-"+q},needLine:!0,noDot:!0,noFill:!0},"line-ne":{n:43,f:function(q){q=r.round(q,2);return"M"+q+",-"+q+"L-"+q+","+q},needLine:!0,noDot:!0,noFill:!0},"line-nw":{n:44,f:function(q){q=r.round(q,2);return"M"+q+","+q+"L-"+q+",-"+q},needLine:!0,noDot:!0,noFill:!0},"arrow-up":{n:45,f:function(q){var m=r.round(q,2);q=r.round(2*q,2);return"M0,0L-"+m+","+q+"H"+m+"Z"},noDot:!0},"arrow-down":{n:46,f:function(q){var m=
r.round(q,2);q=r.round(2*q,2);return"M0,0L-"+m+",-"+q+"H"+m+"Z"},noDot:!0},"arrow-left":{n:47,f:function(q){var m=r.round(2*q,2);q=r.round(q,2);return"M0,0L"+m+",-"+q+"V"+q+"Z"},noDot:!0},"arrow-right":{n:48,f:function(q){var m=r.round(2*q,2);q=r.round(q,2);return"M0,0L-"+m+",-"+q+"V"+q+"Z"},noDot:!0},"arrow-bar-up":{n:49,f:function(q){var m=r.round(q,2);q=r.round(2*q,2);return"M-"+m+",0H"+m+"M0,0L-"+m+","+q+"H"+m+"Z"},needLine:!0,noDot:!0},"arrow-bar-down":{n:50,f:function(q){var m=r.round(q,2);
q=r.round(2*q,2);return"M-"+m+",0H"+m+"M0,0L-"+m+",-"+q+"H"+m+"Z"},needLine:!0,noDot:!0},"arrow-bar-left":{n:51,f:function(q){var m=r.round(2*q,2);q=r.round(q,2);return"M0,-"+q+"V"+q+"M0,0L"+m+",-"+q+"V"+q+"Z"},needLine:!0,noDot:!0},"arrow-bar-right":{n:52,f:function(q){var m=r.round(2*q,2);q=r.round(q,2);return"M0,-"+q+"V"+q+"M0,0L-"+m+",-"+q+"V"+q+"Z"},needLine:!0,noDot:!0}}},{d3:169}],667:[function(b,N,I){N.exports={visible:{valType:"boolean",editType:"calc"},type:{valType:"enumerated",values:["percent",
"constant","sqrt","data"],editType:"calc"},symmetric:{valType:"boolean",editType:"calc"},array:{valType:"data_array",editType:"calc"},arrayminus:{valType:"data_array",editType:"calc"},value:{valType:"number",min:0,dflt:10,editType:"calc"},valueminus:{valType:"number",min:0,dflt:10,editType:"calc"},traceref:{valType:"integer",min:0,dflt:0,editType:"style"},tracerefminus:{valType:"integer",min:0,dflt:0,editType:"style"},copy_ystyle:{valType:"boolean",editType:"plot"},copy_zstyle:{valType:"boolean",
editType:"style"},color:{valType:"color",editType:"style"},thickness:{valType:"number",min:0,dflt:2,editType:"style"},width:{valType:"number",min:0,editType:"plot"},editType:"calc",_deprecated:{opacity:{valType:"number",editType:"style"}}}},{}],668:[function(b,N,I){function r(g,n,p,d){var e=n["error_"+d]||{},f=[];if(e.visible&&-1!==["linear","log"].indexOf(p.type)){e=h(e);for(var k=0;k<g.length;k++){var t=g[k],v=t.i;if(void 0===v)v=k;else if(null===v)continue;var w=t[d];if(q(p.c2l(w))){var y=e(w,
v);q(y[0])&&q(y[1])&&(v=t[d+"s"]=w-y[0],t=t[d+"h"]=w+y[1],f.push(v,t))}}g=n._extremes[p._id];p=l.findExtremes(p,f,a.extendFlat({tozero:g.opts.tozero},{padded:!0}));g.min=g.min.concat(p.min);g.max=g.max.concat(p.max)}}var q=b("fast-isnumeric"),m=b("../../registry"),l=b("../../plots/cartesian/axes"),a=b("../../lib"),h=b("./compute_error");N.exports=function(g){for(var n=g.calcdata,p=0;p<n.length;p++){var d=n[p],e=d[0].trace;if(!0===e.visible&&m.traceIs(e,"errorBarsOK")){var f=l.getFromId(g,e.xaxis),
k=l.getFromId(g,e.yaxis);r(d,e,f,"x");r(d,e,k,"y")}}}},{"../../lib":778,"../../plots/cartesian/axes":828,"../../registry":911,"./compute_error":669,"fast-isnumeric":241}],669:[function(b,N,I){function r(q,m){if("percent"===q)return function(l){return Math.abs(l*m/100)};if("constant"===q)return function(){return Math.abs(m)};if("sqrt"===q)return function(l){return Math.sqrt(Math.abs(l))}}N.exports=function(q){var m=q.type,l=q.symmetric;if("data"===m){var a=q.array||[];if(l)return function(p,d){p=+a[d];
return[p,p]};var h=q.arrayminus||[];return function(p,d){p=+a[d];d=+h[d];return isNaN(p)&&isNaN(d)?[NaN,NaN]:[d||0,p||0]}}var g=r(m,q.value),n=r(m,q.valueminus);return l||void 0===q.valueminus?function(p){p=g(p);return[p,p]}:function(p){return[n(p),g(p)]}}},{}],670:[function(b,N,I){var r=b("fast-isnumeric"),q=b("../../registry"),m=b("../../lib"),l=b("../../plot_api/plot_template"),a=b("./attributes");N.exports=function(h,g,n,p){function d(t,v){return m.coerce(k,f,a,t,v)}var e="error_"+p.axis,f=l.newContainer(g,
e),k=h[e]||{};if(!1!==d("visible",void 0!==k.array||void 0!==k.value||"sqrt"===k.type)){h=d("type","array"in k?"data":"percent");e=!0;"sqrt"!==h&&(e=d("symmetric",!(("data"===h?"arrayminus":"valueminus")in k)));if("data"===h)d("array"),d("traceref"),e||(d("arrayminus"),d("tracerefminus"));else if("percent"===h||"constant"===h)d("value"),e||d("valueminus");h="copy_"+p.inherit+"style";p.inherit&&(g["error_"+p.inherit]||{}).visible&&d(h,!(k.color||r(k.thickness)||r(k.width)));p.inherit&&f[h]||(d("color",
n),d("thickness"),d("width",q.traceIs(g,"gl3d")?0:4))}}},{"../../lib":778,"../../plot_api/plot_template":817,"../../registry":911,"./attributes":667,"fast-isnumeric":241}],671:[function(b,N,I){var r=b("../../lib");I=b("../../plot_api/edit_types").overrideAll;var q=b("./attributes"),m={error_x:r.extendFlat({},q),error_y:r.extendFlat({},q)};delete m.error_x.copy_zstyle;delete m.error_y.copy_zstyle;delete m.error_y.copy_ystyle;r={error_x:r.extendFlat({},q),error_y:r.extendFlat({},q),error_z:r.extendFlat({},
q)};delete r.error_x.copy_ystyle;delete r.error_y.copy_ystyle;delete r.error_z.copy_ystyle;delete r.error_z.copy_zstyle;N.exports={moduleType:"component",name:"errorbars",schema:{traces:{scatter:m,bar:m,histogram:m,scatter3d:I(r,"calc","nested"),scattergl:I(m,"calc","nested")}},supplyDefaults:b("./defaults"),calc:b("./calc"),makeComputeError:b("./compute_error"),plot:b("./plot"),style:b("./style"),hoverInfo:function(l,a,h){(a.error_y||{}).visible&&(h.yerr=l.yh-l.y,a.error_y.symmetric||(h.yerrneg=
l.y-l.ys));(a.error_x||{}).visible&&(h.xerr=l.xh-l.x,a.error_x.symmetric||(h.xerrneg=l.x-l.xs))}}},{"../../lib":778,"../../plot_api/edit_types":810,"./attributes":667,"./calc":668,"./compute_error":669,"./defaults":670,"./plot":672,"./style":673}],672:[function(b,N,I){var r=b("d3"),q=b("fast-isnumeric"),m=b("../drawing"),l=b("../../traces/scatter/subtypes");N.exports=function(a,h,g,n){var p,d=g.xaxis,e=g.yaxis,f=n&&0<n.duration;h.each(function(k){var t=k[0].trace,v=t.error_x||{},w=t.error_y||{},y;
t.ids&&(y=function(A){return A.id});var B=l.hasMarkers(t)&&0<t.marker.maxdisplayed;w.visible||v.visible||(k=[]);t=r.select(this).selectAll("g.errorbar").data(k,y);t.exit().remove();k.length&&(v.visible||t.selectAll("path.xerror").remove(),w.visible||t.selectAll("path.yerror").remove(),t.style("opacity",1),k=t.enter().append("g").classed("errorbar",!0),f&&k.style("opacity",0).transition().duration(n.duration).style("opacity",1),m.setClipUrl(t,g.layerClipId,a),t.each(function(A){var z=r.select(this),
E=d.c2p(A.x),C=e.c2p(A.y);if(void 0!==A.yh){var u=e.c2p(A.yh);var D=e.c2p(A.ys);if(!q(D)){var G=!0;D=e.c2p(A.ys,!0)}}if(void 0!==A.xh){var J=d.c2p(A.xh);var L=d.c2p(A.xs);if(!q(L)){var K=!0;L=d.c2p(A.xs,!0)}}if(!B||A.vis){A=z.select("path.yerror");if(w.visible&&q(E)&&q(u)&&q(D)){var H=w.width;E="M"+(E-H)+","+u+"h"+2*H+"m-"+H+",0V"+D;G||(E+="m-"+H+",0h"+2*H);(p=!A.size())?A=z.append("path").style("vector-effect","non-scaling-stroke").classed("yerror",!0):f&&(A=A.transition().duration(n.duration).ease(n.easing));
A.attr("d",E)}else A.remove();G=z.select("path.xerror");v.visible&&q(C)&&q(J)&&q(L)?(u=(v.copy_ystyle?w:v).width,E="M"+J+","+(C-u)+"v"+2*u+"m0,-"+u+"H"+L,K||(E+="m0,-"+u+"v"+2*u),(p=!G.size())?G=z.append("path").style("vector-effect","non-scaling-stroke").classed("xerror",!0):f&&(G=G.transition().duration(n.duration).ease(n.easing)),G.attr("d",E)):G.remove()}}))})}},{"../../traces/scatter/subtypes":1212,"../drawing":665,d3:169,"fast-isnumeric":241}],673:[function(b,N,I){var r=b("d3"),q=b("../color");
N.exports=function(m){m.each(function(l){var a=l[0].trace;l=a.error_y||{};a=a.error_x||{};var h=r.select(this);h.selectAll("path.yerror").style("stroke-width",l.thickness+"px").call(q.stroke,l.color);a.copy_ystyle&&(a=l);h.selectAll("path.xerror").style("stroke-width",a.thickness+"px").call(q.stroke,a.color)})}},{"../color":643,d3:169}],674:[function(b,N,I){I=b("../../plots/font_attributes");var r=b("./layout_attributes").hoverlabel;b=b("../../lib/extend").extendFlat;N.exports={hoverlabel:{bgcolor:b({},
r.bgcolor,{arrayOk:!0}),bordercolor:b({},r.bordercolor,{arrayOk:!0}),font:I({arrayOk:!0,editType:"none"}),align:b({},r.align,{arrayOk:!0}),namelength:b({},r.namelength,{arrayOk:!0}),editType:"none"}}},{"../../lib/extend":768,"../../plots/font_attributes":856,"./layout_attributes":684}],675:[function(b,N,I){function r(l,a,h,g){g=g||q.identity;Array.isArray(l)&&(a[0][h]=g(l))}var q=b("../../lib"),m=b("../../registry");N.exports=function(l){function a(e){return function(f){return q.coerceHoverinfo({hoverinfo:f},
{_module:e._module},g)}}var h=l.calcdata,g=l._fullLayout;for(l=0;l<h.length;l++){var n=h[l],p=n[0].trace;if(!m.traceIs(p,"pie-like")){var d=m.traceIs(p,"2dMap")?r:q.fillArray;d(p.hoverinfo,n,"hi",a(p));p.hovertemplate&&d(p.hovertemplate,n,"ht");p.hoverlabel&&(d(p.hoverlabel.bgcolor,n,"hbg"),d(p.hoverlabel.bordercolor,n,"hbc"),d(p.hoverlabel.font.size,n,"hts"),d(p.hoverlabel.font.color,n,"htc"),d(p.hoverlabel.font.family,n,"htf"),d(p.hoverlabel.namelength,n,"hnl"),d(p.hoverlabel.align,n,"hta"))}}}},
{"../../lib":778,"../../registry":911}],676:[function(b,N,I){var r=b("../../registry"),q=b("./hover").hover;N.exports=function(m,l,a){function h(){m.emit("plotly_click",{points:m._hoverdata,event:l})}var g=r.getComponentMethod("annotations","onClick")(m,m._hoverdata);void 0!==a&&q(m,l,a,!0);m._hoverdata&&l&&l.target&&(g&&g.then?g.then(h):h(),l.stopImmediatePropagation&&l.stopImmediatePropagation())}},{"../../registry":911,"./hover":680}],677:[function(b,N,I){N.exports={YANGLE:60,HOVERARROWSIZE:6,
HOVERTEXTPAD:3,HOVERFONTSIZE:13,HOVERFONT:"Arial, sans-serif",HOVERMINTIME:50,HOVERID:"-hover"}},{}],678:[function(b,N,I){var r=b("../../lib"),q=b("./attributes"),m=b("./hoverlabel_defaults");N.exports=function(l,a,h,g){h=r.extendFlat({},g.hoverlabel);a.hovertemplate&&(h.namelength=-1);m(l,a,function(n,p){return r.coerce(l,a,q,n,p)},h)}},{"../../lib":778,"./attributes":674,"./hoverlabel_defaults":681}],679:[function(b,N,I){function r(h,g){if(Array.isArray(g)){if(Array.isArray(h)&&Array.isArray(h[g[0]]))return h[g[0]][g[1]]}else return h[g]}
var q=b("../../lib");I.getSubplot=function(h){return h.subplot||h.xaxis+h.yaxis||h.geo};I.isTraceInSubplots=function(h,g){if("splom"===h.type){var n=h.xaxes||[];h=h.yaxes||[];for(var p=0;p<n.length;p++)for(var d=0;d<h.length;d++)if(-1!==g.indexOf(n[p]+h[d]))return!0;return!1}return-1!==g.indexOf(I.getSubplot(h))};I.flat=function(h,g){for(var n=Array(h.length),p=0;p<h.length;p++)n[p]=g;return n};I.p2c=function(h,g){for(var n=Array(h.length),p=0;p<h.length;p++)n[p]=h[p].p2c(g);return n};I.getDistanceFunction=
function(h,g,n,p){return"closest"===h?p||I.quadrature(g,n):"x"===h.charAt(0)?g:n};I.getClosest=function(h,g,n){if(!1!==n.index)0<=n.index&&n.index<h.length?n.distance=0:n.index=!1;else for(var p=0;p<h.length;p++){var d=g(h[p]);d<=n.distance&&(n.index=p,n.distance=d)}return n};I.inbox=function(h,g,n){return 0>h*g||0===h?n:Infinity};I.quadrature=function(h,g){return function(n){var p=h(n);n=g(n);return Math.sqrt(p*p+n*n)}};I.makeEventData=function(h,g,n){var p="index"in h?h.index:h.pointNumber,d={data:g._input,
fullData:g,curveNumber:g.index,pointNumber:p};if(g._indexToPoints){var e=g._indexToPoints[p];1===e.length?d.pointIndex=e[0]:d.pointIndices=e}else d.pointIndex=p;g._module.eventData?d=g._module.eventData(d,h,g,n,p):("xVal"in h?d.x=h.xVal:"x"in h&&(d.x=h.x),"yVal"in h?d.y=h.yVal:"y"in h&&(d.y=h.y),h.xa&&(d.xaxis=h.xa),h.ya&&(d.yaxis=h.ya),void 0!==h.zLabelVal&&(d.z=h.zLabelVal));I.appendArrayPointValue(d,g,p);return d};I.appendArrayPointValue=function(h,g,n){var p=g._arrayAttrs;if(p)for(var d=0;d<p.length;d++){var e=
p[d],f=m[e]||e;void 0===h[f]&&(e=q.nestedProperty(g,e).get(),e=r(e,n),void 0!==e&&(h[f]=e))}};I.appendArrayMultiPointValues=function(h,g,n){var p=g._arrayAttrs;if(p)for(var d=0;d<p.length;d++){var e=p[d],f=m[e]||e;if(void 0===h[f]){e=q.nestedProperty(g,e).get();for(var k=Array(n.length),t=0;t<n.length;t++)k[t]=r(e,n[t]);h[f]=k}}};var m={ids:"id",locations:"location",labels:"label",values:"value","marker.colors":"color",parents:"parent"},l={x:!0,y:!0},a={"x unified":!0,"y unified":!0};I.isUnifiedHover=
function(h){return"string"!==typeof h?!1:!!a[h]};I.isXYhover=function(h){return"string"!==typeof h?!1:!!l[h]}},{"../../lib":778}],680:[function(b,N,I){function r(S,X,ba,ca){function ia(qb,sb){for(fb=0;fb<eb.length;fb++)if((nb=eb[fb])&&nb[0]&&nb[0].trace&&(bb=nb[0].trace,!0===bb.visible&&0!==bb._length&&-1===["carpet","contourcarpet"].indexOf(bb._module.name))){"splom"===bb.type?($a=0,cb=da[$a]):(cb=G.getSubplot(bb),$a=da.indexOf(cb));jb=va;G.isUnifiedHover(jb)&&(jb=jb.charAt(0));Ea={cd:nb,trace:bb,
xa:qa[$a],ya:pa[$a],maxHoverDistance:Ca,maxSpikeDistance:Ma,index:!1,distance:Math.min(Ka,Ca),spikeDistance:Infinity,xSpike:void 0,ySpike:void 0,color:E.defaultLine,name:bb.name,x0:void 0,x1:void 0,y0:void 0,y1:void 0,xLabelVal:void 0,yLabelVal:void 0,zLabelVal:void 0,text:void 0};oa[cb]&&(Ea.subplot=oa[cb]._subplot);oa._splomScenes&&oa._splomScenes[bb.uid]&&(Ea.scene=oa._splomScenes[bb.uid]);Ia=Ua.length;if("array"===jb){var Ba=X[fb];"pointNumber"in Ba?(Ea.index=Ba.pointNumber,jb="closest"):(jb=
"","xval"in Ba&&(pb=Ba.xval,jb="x"),"yval"in Ba&&(xa=Ba.yval,jb=jb?"closest":"y"))}else void 0!==qb&&void 0!==sb?(pb=qb,xa=sb):(pb=Xa[$a],xa=tb[$a]);if(0!==Ca)if(bb._module&&bb._module.hoverPoints){if(Ba=bb._module.hoverPoints(Ea,pb,xa,jb,oa._hoverlayer))for(var Fa,La=0;La<Ba.length;La++)Fa=Ba[La],f(Fa.x0)&&f(Fa.y0)&&Ua.push(g(Fa,va))}else t.log("Unrecognized trace type in hover:",bb);"closest"===va&&Ua.length>Ia&&(Ua.splice(0,Ia),Ka=Ua[0].distance);ma&&0!==Ma&&0===Ua.length&&(Ea.distance=Ma,Ea.index=
!1,(Ba=bb._module.hoverPoints(Ea,pb,xa,"closest",oa._hoverlayer))&&(Ba=Ba.filter(function(Va){return Va.spikeDistance<=Ma})),Ba&&Ba.length)&&(Fa=Ba.filter(function(Va){return Va.xa.showspikes&&"hovered data"!==Va.xa.spikesnap}),Fa.length&&(Fa=Fa[0],f(Fa.x0)&&f(Fa.y0)&&(Fa=la(Fa),!Oa.vLinePoint||Oa.vLinePoint.spikeDistance>Fa.spikeDistance))&&(Oa.vLinePoint=Fa),Ba=Ba.filter(function(Va){return Va.ya.showspikes&&"hovered data"!==Va.ya.spikesnap}),Ba.length&&(Ba=Ba[0],f(Ba.x0)&&f(Ba.y0)&&(Fa=la(Ba),
!Oa.hLinePoint||Oa.hLinePoint.spikeDistance>Fa.spikeDistance))&&(Oa.hLinePoint=Fa))}}function ja(qb,sb){for(var Ba=null,Fa=Infinity,La,Va=0;Va<qb.length;Va++)La=qb[Va].spikeDistance,La<=Fa&&La<=sb&&(Ba=qb[Va],Fa=La);return Ba}function la(qb){return qb?{xa:qb.xa,ya:qb.ya,x:void 0!==qb.xSpike?qb.xSpike:(qb.x0+qb.x1)/2,y:void 0!==qb.ySpike?qb.ySpike:(qb.y0+qb.y1)/2,distance:qb.distance,spikeDistance:qb.spikeDistance,curveNumber:qb.trace.index,color:qb.color,pointNumber:qb.index}:null}ba||(ba="xy");var da=
Array.isArray(ba)?ba:[ba],oa=S._fullLayout,sa=oa._plots||[];ba=sa[ba];var ma=oa._has("cartesian");ba&&(ba=ba.overlays.map(function(qb){return qb.id}),da=da.concat(ba));ba=da.length;for(var qa=Array(ba),pa=Array(ba),na=!1,ka=0;ka<ba;ka++){var ua=da[ka];if(sa[ua])na=!0,qa[ka]=sa[ua].xaxis,pa[ka]=sa[ua].yaxis;else if(oa[ua]&&oa[ua]._subplot)ua=oa[ua]._subplot,qa[ka]=ua.xaxis,pa[ka]=ua.yaxis;else{t.warn("Unrecognized subplot: "+ua);return}}var va=X.hovermode||oa.hovermode;va&&!na&&(va="closest");if(-1===
["x","y","closest","x unified","y unified"].indexOf(va)||!S.calcdata||S.querySelector(".zoombox")||S._dragging)return C.unhoverRaw(S,X);var Ca=-1===oa.hoverdistance?Infinity:oa.hoverdistance,Ma=-1===oa.spikedistance?Infinity:oa.spikedistance,Ua=[],eb=[],fb,nb,cb,$a,jb,pb,xa,Ea,Ia,Oa={hLinePoint:null,vLinePoint:null};sa=!1;if(Array.isArray(X))for(va="array",ka=0;ka<X.length;ka++){if(nb=S.calcdata[X[ka].curveNumber||0]){var bb=nb[0].trace;"skip"!==nb[0].trace.hoverinfo&&(eb.push(nb),"h"===bb.orientation&&
(sa=!0))}}else{for(fb=0;fb<S.calcdata.length;fb++)nb=S.calcdata[fb],bb=nb[0].trace,"skip"!==bb.hoverinfo&&G.isTraceInSubplots(bb,da)&&(eb.push(nb),"h"===bb.orientation&&(sa=!0));if(X.target){if(!1===y.triggerHandler(S,"plotly_beforehover",X))return;na=X.target.getBoundingClientRect();ba=X.clientX-na.left;na=X.clientY-na.top;oa._calcInverseTransform(S);na=t.apply3DTransform(oa._invTransform)(ba,na);ba=na[0];na=na[1];if(0>ba||ba>qa[0]._length||0>na||na>pa[0]._length)return C.unhoverRaw(S,X)}else ba=
"xpx"in X?X.xpx:qa[0]._length/2,na="ypx"in X?X.ypx:pa[0]._length/2;X.pointerX=ba+qa[0]._offset;X.pointerY=na+pa[0]._offset;var Xa="xval"in X?G.flat(da,X.xval):G.p2c(qa,ba);var tb="yval"in X?G.flat(da,X.yval):G.p2c(pa,na);if(!f(Xa[0])||!f(tb[0]))return t.warn("Fx.hover failed",X,S),C.unhoverRaw(S,X)}var Ka=Infinity;ia();ba={fullLayout:oa,container:oa._hoverlayer,outerContainer:oa._paperdiv,event:X};S._spikepoints={vLinePoint:Oa.vLinePoint,hLinePoint:Oa.hLinePoint};ma&&0!==Ma&&0!==Ua.length&&(na=Ua.filter(function(qb){return qb.ya.showspikes}),
na=ja(na,Ma),Oa.hLinePoint=la(na),na=Ua.filter(function(qb){return qb.xa.showspikes}),na=ja(na,Ma),Oa.vLinePoint=la(na));if(0===Ua.length)return ca=C.unhoverRaw(S,X),!ma||null===Oa.hLinePoint&&null===Oa.vLinePoint||n(S,Oa,ba),ca;ma&&n(S,Oa,ba);Ua.sort(function(qb,sb){return qb.distance-sb.distance});if(G.isXYhover(jb)&&0!==Ua[0].length&&"splom"!==Ua[0].trace.type){ba=Ua[0];na=ba.cd[ba.index];ka="group"===oa.boxmode||"group"===oa.violinmode;ua=ba.xVal;var Ta=ba.xa;"category"===Ta.type&&(ua=Ta._categoriesMap[ua]);
"date"===Ta.type&&(ua=Ta.d2c(ua));na&&na.t&&na.t.posLetter===Ta._id&&ka&&(ua+=na.t.dPos);var Na=ba.yVal;Ta=ba.ya;"category"===Ta.type&&(Na=Ta._categoriesMap[Na]);"date"===Ta.type&&(Na=Ta.d2c(Na));na&&na.t&&na.t.posLetter===Ta._id&&ka&&(Na+=na.t.dPos);ia(ua,Na);var ib={};Ua=Ua.filter(function(qb){qb=q(qb);if(!ib[qb])return ib[qb]=!0,ib[qb]})}ba=S._hoverdata;na=[];for(ka=0;ka<Ua.length;ka++)ua=Ua[ka],Ta=G.makeEventData(ua,ua.trace,ua.cd),!1!==ua.hovertemplate&&(Na=!1,ua.cd[ua.index]&&ua.cd[ua.index].ht&&
(Na=ua.cd[ua.index].ht),ua.hovertemplate=Na||ua.trace.hovertemplate||!1),ua.eventData=[Ta],na.push(Ta);S._hoverdata=na;sa="y"===va&&(1<eb.length||1<Ua.length)||"closest"===va&&sa&&1<Ua.length;ka=E.combine(oa.plot_bgcolor||E.background,oa.paper_bgcolor);ka=m(Ua,{hovermode:va,rotateLabels:sa,bgColor:ka,container:oa._hoverlayer,outerContainer:oa._paperdiv,commonLabelOpts:oa.hoverlabel,hoverdistance:oa.hoverdistance},S);G.isUnifiedHover(va)||(a(ka,sa?"xa":"ya",oa),h(ka,sa,oa._invScaleX,oa._invScaleY));
X.target&&X.target.tagName&&(sa=D.getComponentMethod("annotations","hasClickToShow")(S,na),A(e.select(X.target),sa?"pointer":""));X.target&&!ca&&p(S,X,ba)&&(ba&&S.emit("plotly_unhover",{event:X,points:ba}),S.emit("plotly_hover",{event:X,points:S._hoverdata,xaxes:qa,yaxes:pa,xvals:Xa,yvals:tb}))}function q(S){return[S.trace.index,S.index,S.x0,S.y0,S.name,S.attr,S.xa,S.ya||""].join()}function m(S,X,ba){function ca(pb){return pb.filter(function(xa){return void 0!==xa.zLabelVal||(xa[va]||"").split(" ")[0]===
Ma})}var ia=ba._fullLayout,ja=X.hovermode,la=X.rotateLabels,da=X.bgColor,oa=X.container,sa=X.outerContainer,ma=X.commonLabelOpts||{},qa=X.fontFamily||J.HOVERFONT,pa=X.fontSize||J.HOVERFONTSIZE,na=S[0],ka=na.xa,ua=na.ya,va="y"===ja.charAt(0)?"yLabel":"xLabel",Ca=na[va],Ma=(String(Ca)||"").split(" ")[0];sa=sa.node().getBoundingClientRect();var Ua=sa.top,eb=sa.width,fb=sa.height,nb=void 0!==Ca&&na.distance<=X.hoverdistance&&("x"===ja||"y"===ja);if(nb){sa=!0;var cb,$a;for(cb=0;cb<S.length;cb++)if(sa&&
void 0===S[cb].zLabel&&(sa=!1),$a=S[cb].hoverinfo||S[cb].trace.hoverinfo)if($a=Array.isArray($a)?$a:$a.split("+"),-1===$a.indexOf("all")&&-1===$a.indexOf(ja)){nb=!1;break}sa&&(nb=!1)}sa=oa.selectAll("g.axistext").data(nb?[0]:[]);sa.enter().append("g").classed("axistext",!0);sa.exit().remove();sa.each(function(){var pb=e.select(this),xa=t.ensureSingle(pb,"path","",function(qb){qb.style({"stroke-width":"1px"})}),Ea=t.ensureSingle(pb,"text","",function(qb){qb.attr("data-notex",1)}),Ia=ma.bgcolor||E.defaultLine,
Oa=ma.bordercolor||E.contrast(Ia),bb=E.contrast(Ia),Xa={family:ma.font.family||qa,size:ma.font.size||pa,color:ma.font.color||bb};xa.style({fill:Ia,stroke:Oa});Ea.text(Ca).call(z.font,Xa).call(B.positionText,0,0).call(B.convertToTspans,ba);pb.attr("transform","");var tb=Ea.node().getBoundingClientRect();if("x"===ja)bb="top"===ka.side?"-":"",Ea.attr("text-anchor","middle").call(B.positionText,0,"top"===ka.side?Ua-tb.bottom-T-O:Ua-tb.top+T+O),Ia=ka._offset+(na.x0+na.x1)/2,Oa=ua._offset+("top"===ka.side?
0:ua._length),Ea=tb.width/2+O,Ia<Ea?(Ia=Ea,xa.attr("d","M-"+(Ea-T)+",0L-"+(Ea-2*T)+","+bb+T+"H"+(O+tb.width/2)+"v"+bb+(2*O+tb.height)+"H-"+Ea+"V"+bb+T+"Z")):Ia>ia.width-Ea?(Ia=ia.width-Ea,xa.attr("d","M"+(Ea-T)+",0L"+Ea+","+bb+T+"v"+bb+(2*O+tb.height)+"H-"+Ea+"V"+bb+T+"H"+(Ea-2*T)+"Z")):xa.attr("d","M0,0L"+T+","+bb+T+"H"+(O+tb.width/2)+"v"+bb+(2*O+tb.height)+"H-"+(O+tb.width/2)+"V"+bb+T+"H-"+T+"Z");else{if("right"===ua.side){bb="start";var Ka=1;var Ta="";Ia=ka._offset+ka._length}else bb="end",Ka=
-1,Ta="-",Ia=ka._offset;Oa=ua._offset+(na.y0+na.y1)/2;Ea.attr("text-anchor",bb);xa.attr("d","M0,0L"+Ta+T+","+T+"V"+(O+tb.height/2)+"h"+Ta+(2*O+tb.width)+"V-"+(O+tb.height/2)+"H"+Ta+T+"V-"+T+"Z");var Na=tb.height/2;Ta=Ua-tb.top-Na;xa="clip"+ia._uid+"commonlabel"+ua._id;if(Ia<tb.width+2*O+T){Ka="M-"+(T+O)+"-"+Na+"h-"+(tb.width-O)+"V"+Na+"h"+(tb.width-O)+"Z";var ib=tb.width-Ia+O;B.positionText(Ea,ib,Ta);"end"===bb&&Ea.selectAll("tspan").each(function(){var qb=e.select(this),sb=z.tester.append("text").text(qb.text()).call(z.font,
Xa),Ba=sb.node().getBoundingClientRect();Math.round(Ba.width)<Math.round(tb.width)&&qb.attr("x",ib-Ba.width);sb.remove()})}else B.positionText(Ea,Ka*(O+T),Ta),Ka=null;bb=ia._topclips.selectAll("#"+xa).data(Ka?[0]:[]);bb.enter().append("clipPath").attr("id",xa).append("path");bb.exit().remove();bb.select("path").attr("d",Ka);z.setClipUrl(Ea,Ka?xa:null,ba)}pb.attr("transform",v(Ia,Oa));S=ca(S)});if(G.isUnifiedHover(ja)){oa.selectAll("g.hovertext").remove();void 0!==Ca&&na.distance<=X.hoverdistance&&
(S=ca(S));if(0===S.length)return;X={};L({showlegend:!0,legend:{title:{text:Ca,font:ia.hoverlabel.font},font:ia.hoverlabel.font,bgcolor:ia.hoverlabel.bgcolor,bordercolor:ia.hoverlabel.bordercolor,borderwidth:1,tracegroupgap:7,traceorder:ia.legend?ia.legend.traceorder:void 0,orientation:"v"}},X,ba._fullData);X=X.legend;X.entries=[];for(sa=0;sa<S.length;sa++){$a=l(S[sa],!0,ja,ia,Ca);cb=$a[0];var jb=$a[1];$a=S[sa];$a.name=jb;$a.text=""!==jb?jb+" : "+cb:cb;if(cb=$a.cd[$a.index])cb.mc&&($a.mc=cb.mc),cb.mcc&&
($a.mc=cb.mcc),cb.mlc&&($a.mlc=cb.mlc),cb.mlcc&&($a.mlc=cb.mlcc),cb.mlw&&($a.mlw=cb.mlw),cb.mrc&&($a.mrc=cb.mrc),cb.dir&&($a.dir=cb.dir);$a._distinct=!0;X.entries.push([$a])}X.entries.sort(function(pb,xa){return pb[0].trace.index-xa[0].trace.index});X.layer=oa;K(ba,X);X=t.mean(S.map(function(pb){return(pb.y0+pb.y1)/2}));sa=t.mean(S.map(function(pb){return(pb.x0+pb.x1)/2}));oa=oa.select("g.legend");cb=oa.node().getBoundingClientRect();sa+=ka._offset;X+=ua._offset-cb.height/2;$a=cb.width+2*O;sa=!(sa+
$a<=eb)&&0<=sa-$a?sa-$a:sa+2*O;cb=cb.height+2*O;$a=X+cb>=fb;cb<=fb&&(X<=Ua?X=ua._offset+2*O:$a&&(X=fb-cb));oa.attr("transform",v(sa,X));return oa}oa=oa.selectAll("g.hovertext").data(S,function(pb){return q(pb)});oa.enter().append("g").classed("hovertext",!0).each(function(){var pb=e.select(this);pb.append("rect").call(E.fill,E.addOpacity(da,.8));pb.append("text").classed("name",!0);pb.append("path").style("stroke-width","1px");pb.append("text").classed("nums",!0).call(z.font,qa,pa)});oa.exit().remove();
oa.each(function(pb){var xa=e.select(this).attr("transform",""),Ea=pb.color;Array.isArray(Ea)&&(Ea=Ea[pb.eventData[0].pointNumber]);var Ia=pb.bgcolor||Ea,Oa=E.combine(E.opacity(Ia)?Ia:E.defaultLine,da),bb=E.combine(E.opacity(Ea)?Ea:E.defaultLine,da),Xa=pb.borderColor||E.contrast(Oa);Ea=l(pb,nb,ja,ia,Ca,xa);var tb=Ea[0],Ka=Ea[1];Ea=xa.select("text.nums").call(z.font,pb.fontFamily||qa,pb.fontSize||pa,pb.fontColor||Xa).text(tb).attr("data-notex",1).call(B.positionText,0,0).call(B.convertToTspans,ba);
Ia=xa.select("text.name");var Ta=0,Na=0;Ka&&Ka!==tb?(Ia.call(z.font,pb.fontFamily||qa,pb.fontSize||pa,bb).text(Ka).attr("data-notex",1).call(B.positionText,0,0).call(B.convertToTspans,ba),Na=Ia.node().getBoundingClientRect(),Ta=Na.width+2*O,Na=Na.height+2*O):(Ia.remove(),xa.select("rect").remove());xa.select("path").style({fill:Oa,stroke:Xa});var ib=Ea.node().getBoundingClientRect();Oa=pb.xa._offset+(pb.x0+pb.x1)/2;Xa=pb.ya._offset+(pb.y0+pb.y1)/2;bb=Math.abs(pb.x1-pb.x0);tb=Math.abs(pb.y1-pb.y0);
Ka=ib.width+T+O+Ta;pb.ty0=Ua-ib.top;pb.bx=ib.width+2*O;pb.by=Math.max(ib.height+2*O,Na);pb.anchor="start";pb.txwidth=ib.width;pb.tx2width=Ta;pb.offset=0;la?(pb.pos=Oa,Na=Xa+tb/2+Ka<=fb,("top"===pb.idealAlign||!Na)&&0<=Xa-tb/2-Ka?(Xa-=tb/2,pb.anchor="end"):Na?(Xa+=tb/2,pb.anchor="start"):pb.anchor="middle"):(pb.pos=Xa,Na=Oa+bb/2+Ka<=eb,("left"===pb.idealAlign||!Na)&&0<=Oa-bb/2-Ka?(Oa-=bb/2,pb.anchor="end"):Na?(Oa+=bb/2,pb.anchor="start"):(pb.anchor="middle",bb=Ka/2,Na=Oa+bb-eb,bb=Oa-bb,0<Na&&(Oa-=
Na),0>bb&&(Oa+=-bb)));Ea.attr("text-anchor",pb.anchor);Ta&&Ia.attr("text-anchor",pb.anchor);xa.attr("transform",v(Oa,Xa)+(la?w(H):""))});return oa}function l(S,X,ba,ca,ia,ja){var la="",da="";void 0!==S.nameOverride&&(S.name=S.nameOverride);S.name&&(S.trace._meta&&(S.name=t.templateString(S.name,S.trace._meta)),la=d(S.name,S.nameLength));void 0!==S.zLabel?(void 0!==S.xLabel&&(da+="x: "+S.xLabel+"\x3cbr\x3e"),void 0!==S.yLabel&&(da+="y: "+S.yLabel+"\x3cbr\x3e"),"choropleth"!==S.trace.type&&"choroplethmapbox"!==
S.trace.type&&(da+=(da?"z: ":"")+S.zLabel)):X&&S[ba.charAt(0)+"Label"]===ia?da=S[("x"===ba.charAt(0)?"y":"x")+"Label"]||"":void 0===S.xLabel?void 0!==S.yLabel&&"scattercarpet"!==S.trace.type&&(da=S.yLabel):da=void 0===S.yLabel?S.xLabel:"("+S.xLabel+", "+S.yLabel+")";!S.text&&0!==S.text||Array.isArray(S.text)||(da+=(da?"\x3cbr\x3e":"")+S.text);void 0!==S.extraText&&(da+=(da?"\x3cbr\x3e":"")+S.extraText);ja&&""===da&&!S.hovertemplate&&(""===la&&ja.remove(),da=la);X=ca._d3locale;ba=S.hovertemplate||
!1;ca=S.hovertemplateLabels||S;ia=S.eventData[0]||{};ba&&(da=t.hovertemplateString(ba,ca,X,ia,S.trace._meta),da=da.replace(U,function(oa,sa){la=d(sa,S.nameLength);return""}));return[da,la]}function a(S,X,ba){function ca(Ma){var Ua=Ma[0],eb=Ma[Ma.length-1];ma=Ua.pmin-Ua.pos-Ua.dp+Ua.size;qa=eb.pos+eb.dp+eb.size-Ua.pmax;if(.01<ma){for(na=Ma.length-1;0<=na;na--)Ma[na].dp+=ma;sa=!1}if(!(.01>qa)){if(-.01>ma){for(na=Ma.length-1;0<=na;na--)Ma[na].dp-=qa;sa=!1}if(sa){for(pa=eb=0;pa<Ma.length;pa++)ka=Ma[pa],
ka.pos+ka.dp+ka.size>Ua.pmax&&eb++;for(pa=Ma.length-1;0<=pa&&!(0>=eb);pa--)ka=Ma[pa],ka.pos>Ua.pmax-1&&(ka.del=!0,eb--);for(pa=0;pa<Ma.length&&!(0>=eb);pa++)if(ka=Ma[pa],ka.pos<Ua.pmin+1)for(ka.del=!0,eb--,qa=2*ka.size,na=Ma.length-1;0<=na;na--)Ma[na].dp-=qa;for(pa=Ma.length-1;0<=pa&&!(0>=eb);pa--)ka=Ma[pa],ka.pos+ka.dp+ka.size>Ua.pmax&&(ka.del=!0,eb--)}}}var ia=0,ja=1,la=S.size(),da=Array(la),oa=0;S.each(function(Ma){var Ua=Ma[X],eb="x"===Ua._id.charAt(0);Ua=Ua.range;0===oa&&Ua&&Ua[0]>Ua[1]!==eb&&
(ja=-1);da[oa++]=[{datum:Ma,traceIndex:Ma.trace.index,dp:0,pos:Ma.pos,posref:Ma.posref,size:Ma.by*(eb?Q:1)/2,pmin:0,pmax:eb?ba.width:ba.height}]});da.sort(function(Ma,Ua){return Ma[0].posref-Ua[0].posref||ja*(Ua[0].traceIndex-Ma[0].traceIndex)});for(var sa,ma,qa,pa,na,ka,ua;!sa&&ia<=la;){ia++;sa=!0;for(pa=0;pa<da.length-1;){S=da[pa];ua=da[pa+1];var va=S[S.length-1],Ca=ua[0];ma=va.pos+va.dp+va.size-Ca.pos-Ca.dp+Ca.size;if(.01<ma&&va.pmin===Ca.pmin&&va.pmax===Ca.pmax){for(na=ua.length-1;0<=na;na--)ua[na].dp+=
ma;S.push.apply(S,ua);da.splice(pa+1,1);ua=0;for(na=S.length-1;0<=na;na--)ua+=S[na].dp;qa=ua/S.length;for(na=S.length-1;0<=na;na--)S[na].dp-=qa;sa=!1}else pa++}da.forEach(ca)}for(pa=da.length-1;0<=pa;pa--)for(ia=da[pa],na=ia.length-1;0<=na;na--)la=ia[na],S=la.datum,S.offset=la.dp,S.del=la.del}function h(S,X,ba,ca){S.each(function(ia){var ja=e.select(this);if(ia.del)return ja.remove();var la=ja.select("text.nums"),da=ia.anchor,oa="end"===da?-1:1,sa={start:1,end:-1,middle:0}[da],ma=sa*(T+O),qa=ma+sa*
(ia.txwidth+O),pa=0,na=ia.offset,ka="middle"===da;ka&&(ma-=ia.tx2width/2,qa+=ia.txwidth/2+O);X&&(na*=-P,pa=ia.offset*M);ja.select("path").attr("d",ka?"M-"+(ia.bx/2+ia.tx2width/2)*ba+","+(na-ia.by/2)*ca+"h"+ia.bx*ba+"v"+ia.by*ca+"h-"+ia.bx*ba+"Z":"M0,0L"+(oa*T+pa)*ba+","+(T+na)*ca+"v"+(ia.by/2-T)*ca+"h"+oa*ia.bx*ba+"v-"+ia.by*ca+"H"+(oa*T+pa)*ba+"V"+(na-T)*ca+"Z");oa=pa+ma;ma=na+ia.ty0-ia.by/2+O;var ua=ia.textAlign||"auto";"auto"!==ua&&("left"===ua&&"start"!==da?(la.attr("text-anchor","start"),oa=
ka?-ia.bx/2-ia.tx2width/2+O:-ia.bx-O):"right"===ua&&"end"!==da&&(la.attr("text-anchor","end"),oa=ka?ia.bx/2-ia.tx2width/2-O:ia.bx+O));la.call(B.positionText,oa*ba,ma*ca);ia.tx2width&&(ja.select("text.name").call(B.positionText,(qa+sa*O+pa)*ba,(na+ia.ty0-ia.by/2+O)*ca),ja.select("rect").call(z.setRect,(qa+(sa-1)*ia.tx2width/2+pa)*ba,(na-ia.by/2-1)*ca,ia.tx2width*ba,(ia.by+2)*ca))})}function g(S,X){function ba(ma){return ma||f(ma)&&0===ma}function ca(ma,qa,pa){qa=oa(qa,pa);ba(qa)&&(S[ma]=qa)}var ia=
S.index,ja=S.trace||{},la=S.cd[0],da=S.cd[ia]||{},oa=Array.isArray(ia)?function(ma,qa){ma=t.castOption(la,ia,ma);return ba(ma)?ma:t.extractOption({},ja,"",qa)}:function(ma,qa){return t.extractOption(da,ja,ma,qa)};ca("hoverinfo","hi","hoverinfo");ca("bgcolor","hbg","hoverlabel.bgcolor");ca("borderColor","hbc","hoverlabel.bordercolor");ca("fontFamily","htf","hoverlabel.font.family");ca("fontSize","hts","hoverlabel.font.size");ca("fontColor","htc","hoverlabel.font.color");ca("nameLength","hnl","hoverlabel.namelength");
ca("textAlign","hta","hoverlabel.align");S.posref="y"===X||"closest"===X&&"h"===ja.orientation?S.xa._offset+(S.x0+S.x1)/2:S.ya._offset+(S.y0+S.y1)/2;S.x0=t.constrain(S.x0,0,S.xa._length);S.x1=t.constrain(S.x1,0,S.xa._length);S.y0=t.constrain(S.y0,0,S.ya._length);S.y1=t.constrain(S.y1,0,S.ya._length);void 0!==S.xLabelVal&&(S.xLabel="xLabel"in S?S.xLabel:u.hoverLabelText(S.xa,S.xLabelVal),S.xVal=S.xa.c2d(S.xLabelVal));void 0!==S.yLabelVal&&(S.yLabel="yLabel"in S?S.yLabel:u.hoverLabelText(S.ya,S.yLabelVal),
S.yVal=S.ya.c2d(S.yLabelVal));void 0!==S.zLabelVal&&void 0===S.zLabel&&(S.zLabel=String(S.zLabelVal));if(!(isNaN(S.xerr)||"log"===S.xa.type&&0>=S.xerr)){var sa=u.tickText(S.xa,S.xa.c2l(S.xerr),"hover").text;S.xLabel=void 0!==S.xerrneg?S.xLabel+(" +"+sa+" / -"+u.tickText(S.xa,S.xa.c2l(S.xerrneg),"hover").text):S.xLabel+("  "+sa);"x"===X&&(S.distance+=1)}isNaN(S.yerr)||"log"===S.ya.type&&0>=S.yerr||(sa=u.tickText(S.ya,S.ya.c2l(S.yerr),"hover").text,S.yLabel=void 0!==S.yerrneg?S.yLabel+(" +"+sa+" / -"+
u.tickText(S.ya,S.ya.c2l(S.yerrneg),"hover").text):S.yLabel+("  "+sa),"y"===X&&(S.distance+=1));(X=S.hoverinfo||S.trace.hoverinfo)&&"all"!==X&&(X=Array.isArray(X)?X:X.split("+"),-1===X.indexOf("x")&&(S.xLabel=void 0),-1===X.indexOf("y")&&(S.yLabel=void 0),-1===X.indexOf("z")&&(S.zLabel=void 0),-1===X.indexOf("text")&&(S.text=void 0),-1===X.indexOf("name")&&(S.name=void 0));return S}function n(S,X,ba){var ca=ba.container,ia=ba.fullLayout,ja=ia._size;ba=ba.event;var la=!!X.hLinePoint,da=!!X.vLinePoint;
ca.selectAll(".spikeline").remove();if(da||la){ia=E.combine(ia.plot_bgcolor,ia.paper_bgcolor);if(la){var oa=X.hLinePoint;var sa=oa&&oa.xa;la=oa&&oa.ya;if("cursor"===la.spikesnap){var ma=ba.pointerX;sa=ba.pointerY}else ma=sa._offset+oa.x,sa=la._offset+oa.y;var qa=1.5>k.readability(oa.color,ia)?E.contrast(ia):oa.color;oa=la.spikemode;var pa=la.spikethickness;qa=la.spikecolor||qa;var na=u.getPxPosition(S,la);if(-1!==oa.indexOf("toaxis")||-1!==oa.indexOf("across")){if(-1!==oa.indexOf("toaxis")){var ka=
na;var ua=ma}-1!==oa.indexOf("across")&&(ka=la._counterDomainMin,ua=la._counterDomainMax,"free"===la.anchor&&(ka=Math.min(ka,la.position),ua=Math.max(ua,la.position)),ka=ja.l+ka*ja.w,ua=ja.l+ua*ja.w);ca.insert("line",":first-child").attr({x1:ka,x2:ua,y1:sa,y2:sa,"stroke-width":pa,stroke:qa,"stroke-dasharray":z.dashStyle(la.spikedash,pa)}).classed("spikeline",!0).classed("crisp",!0);ca.insert("line",":first-child").attr({x1:ka,x2:ua,y1:sa,y2:sa,"stroke-width":pa+2,stroke:ia}).classed("spikeline",!0).classed("crisp",
!0)}-1!==oa.indexOf("marker")&&ca.insert("circle",":first-child").attr({cx:na+("right"!==la.side?pa:-pa),cy:sa,r:pa,fill:qa}).classed("spikeline",!0)}if(da){sa=(da=X.vLinePoint)&&da.xa;la=da&&da.ya;"cursor"===sa.spikesnap?(X=ba.pointerX,la=ba.pointerY):(X=sa._offset+da.x,la=la._offset+da.y);ka=1.5>k.readability(da.color,ia)?E.contrast(ia):da.color;ba=sa.spikemode;da=sa.spikethickness;ka=sa.spikecolor||ka;S=u.getPxPosition(S,sa);if(-1!==ba.indexOf("toaxis")||-1!==ba.indexOf("across")){if(-1!==ba.indexOf("toaxis")){var va=
S;var Ca=la}-1!==ba.indexOf("across")&&(Ca=sa._counterDomainMin,va=sa._counterDomainMax,"free"===sa.anchor&&(Ca=Math.min(Ca,sa.position),va=Math.max(va,sa.position)),va=ja.t+(1-va)*ja.h,Ca=ja.t+(1-Ca)*ja.h);ca.insert("line",":first-child").attr({x1:X,x2:X,y1:va,y2:Ca,"stroke-width":da,stroke:ka,"stroke-dasharray":z.dashStyle(sa.spikedash,da)}).classed("spikeline",!0).classed("crisp",!0);ca.insert("line",":first-child").attr({x1:X,x2:X,y1:va,y2:Ca,"stroke-width":da+2,stroke:ia}).classed("spikeline",
!0).classed("crisp",!0)}-1!==ba.indexOf("marker")&&ca.insert("circle",":first-child").attr({cx:X,cy:S-("top"!==sa.side?da:-da),r:da,fill:ka}).classed("spikeline",!0)}}}function p(S,X,ba){if(!ba||ba.length!==S._hoverdata.length)return!0;for(X=ba.length-1;0<=X;X--){var ca=ba[X],ia=S._hoverdata[X];if(ca.curveNumber!==ia.curveNumber||String(ca.pointNumber)!==String(ia.pointNumber)||String(ca.pointNumbers)!==String(ia.pointNumbers))return!0}return!1}function d(S,X){return B.plainText(S||"",{len:X,allowedTags:"br sub sup b i em".split(" ")})}
var e=b("d3"),f=b("fast-isnumeric"),k=b("tinycolor2"),t=b("../../lib"),v=t.strTranslate,w=t.strRotate,y=b("../../lib/events"),B=b("../../lib/svg_text_utils"),A=b("../../lib/override_cursor"),z=b("../drawing"),E=b("../color"),C=b("../dragelement"),u=b("../../plots/cartesian/axes"),D=b("../../registry"),G=b("./helpers"),J=b("./constants"),L=b("../legend/defaults"),K=b("../legend/draw"),H=J.YANGLE;b=Math.PI*H/180;var Q=1/Math.sin(b),M=Math.cos(b),P=Math.sin(b),T=J.HOVERARROWSIZE,O=J.HOVERTEXTPAD;I.hover=
function(S,X,ba,ca){S=t.getGraphDiv(S);t.throttle(S._fullLayout._uid+J.HOVERID,J.HOVERMINTIME,function(){r(S,X,ba,ca)})};I.loneHover=function(S,X){var ba=!0;Array.isArray(S)||(ba=!1,S=[S]);S=S.map(function(da){return{color:da.color||E.defaultLine,x0:da.x0||da.x||0,x1:da.x1||da.x||0,y0:da.y0||da.y||0,y1:da.y1||da.y||0,xLabel:da.xLabel,yLabel:da.yLabel,zLabel:da.zLabel,text:da.text,name:da.name,idealAlign:da.idealAlign,borderColor:da.borderColor,fontFamily:da.fontFamily,fontSize:da.fontSize,fontColor:da.fontColor,
nameLength:da.nameLength,textAlign:da.textAlign,trace:da.trace||{index:0,hoverinfo:""},xa:{_offset:0},ya:{_offset:0},index:0,hovertemplate:da.hovertemplate||!1,eventData:da.eventData||!1,hovertemplateLabels:da.hovertemplateLabels||!1}});var ca=e.select(X.container),ia=X.outerContainer?e.select(X.outerContainer):ca;ca={hovermode:"closest",rotateLabels:!1,bgColor:X.bgColor||E.background,container:ca,outerContainer:ia};S=m(S,ca,X.gd);var ja=0,la=0;S.sort(function(da,oa){return da.y0-oa.y0}).each(function(da,
oa){var sa=da.y0-da.by/2;da.offset=sa-5<ja?ja-sa+5:0;ja=sa+da.by+da.offset;oa===X.anchorIndex&&(la=da.offset)}).each(function(da){da.offset-=la});h(S,ca.rotateLabels,X.gd._fullLayout._invScaleX,X.gd._fullLayout._invScaleY);return ba?S:S.node()};var U=/<extra>([\s\S]*)<\/extra>/},{"../../lib":778,"../../lib/events":767,"../../lib/override_cursor":789,"../../lib/svg_text_utils":803,"../../plots/cartesian/axes":828,"../../registry":911,"../color":643,"../dragelement":662,"../drawing":665,"../legend/defaults":695,
"../legend/draw":696,"./constants":677,"./helpers":679,d3:169,"fast-isnumeric":241,tinycolor2:576}],681:[function(b,N,I){var r=b("../../lib"),q=b("../color"),m=b("./helpers").isUnifiedHover;N.exports=function(l,a,h,g){function n(p){g.font[p]||(g.font[p]=a.legend?a.legend.font[p]:a.font[p])}g=g||{};a&&m(a.hovermode)&&(g.font||(g.font={}),n("size"),n("family"),n("color"),a.legend?(g.bgcolor||(g.bgcolor=q.combine(a.legend.bgcolor,a.paper_bgcolor)),g.bordercolor||(g.bordercolor=a.legend.bordercolor)):
g.bgcolor||(g.bgcolor=a.paper_bgcolor));h("hoverlabel.bgcolor",g.bgcolor);h("hoverlabel.bordercolor",g.bordercolor);h("hoverlabel.namelength",g.namelength);r.coerceFont(h,"hoverlabel.font",g.font);h("hoverlabel.align",g.align)}},{"../../lib":778,"../color":643,"./helpers":679}],682:[function(b,N,I){function r(l,a){a=a._scatterStackOpts||{};for(var h=0;h<l.length;h++){var g=l[h],n=(a[g.xaxis+g.yaxis]||{})[g.stackgroup]||{};if("h"!==g.orientation&&"h"!==n.orientation)return!1}return!0}var q=b("../../lib"),
m=b("./layout_attributes");N.exports=function(l,a,h){function g(p,d){return void 0!==a[p]?a[p]:q.coerce(l,a,m,p,d)}var n=g("clickmode");a._has("cartesian")?-1<n.indexOf("select")?h="closest":(a._isHoriz=r(h,a),h=a._isHoriz?"y":"x"):h="closest";return g("hovermode",h)}},{"../../lib":778,"./layout_attributes":684}],683:[function(b,N,I){var r=b("d3"),q=b("../../lib");I=b("../dragelement");var m=b("./helpers"),l=b("./layout_attributes"),a=b("./hover");N.exports={moduleType:"component",name:"fx",constants:b("./constants"),
schema:{layout:l},attributes:b("./attributes"),layoutAttributes:l,supplyLayoutGlobalDefaults:b("./layout_global_defaults"),supplyDefaults:b("./defaults"),supplyLayoutDefaults:b("./layout_defaults"),calc:b("./calc"),getDistanceFunction:m.getDistanceFunction,getClosest:m.getClosest,inbox:m.inbox,quadrature:m.quadrature,appendArrayPointValue:m.appendArrayPointValue,castHoverOption:function(h,g,n){return q.castOption(h,g,"hoverlabel."+n)},castHoverinfo:function(h,g,n){return q.castOption(h,n,"hoverinfo",
function(p){return q.coerceHoverinfo({hoverinfo:p},{_module:h._module},g)})},hover:a.hover,unhover:I.unhover,loneHover:a.loneHover,loneUnhover:function(h){h=q.isD3Selection(h)?h:r.select(h);h.selectAll("g.hovertext").remove();h.selectAll(".spikeline").remove()},click:b("./click")}},{"../../lib":778,"../dragelement":662,"./attributes":674,"./calc":675,"./click":676,"./constants":677,"./defaults":678,"./helpers":679,"./hover":680,"./layout_attributes":684,"./layout_defaults":685,"./layout_global_defaults":686,
d3:169}],684:[function(b,N,I){I=b("./constants");b=b("../../plots/font_attributes")({editType:"none"});b.family.dflt=I.HOVERFONT;b.size.dflt=I.HOVERFONTSIZE;N.exports={clickmode:{valType:"flaglist",flags:["event","select"],dflt:"event",editType:"plot",extras:["none"]},dragmode:{valType:"enumerated",values:["zoom","pan","select","lasso","drawclosedpath","drawopenpath","drawline","drawrect","drawcircle","orbit","turntable",!1],dflt:"zoom",editType:"modebar"},hovermode:{valType:"enumerated",values:["x",
"y","closest",!1,"x unified","y unified"],editType:"modebar"},hoverdistance:{valType:"integer",min:-1,dflt:20,editType:"none"},spikedistance:{valType:"integer",min:-1,dflt:20,editType:"none"},hoverlabel:{bgcolor:{valType:"color",editType:"none"},bordercolor:{valType:"color",editType:"none"},font:b,align:{valType:"enumerated",values:["left","right","auto"],dflt:"auto",editType:"none"},namelength:{valType:"integer",min:-1,dflt:15,editType:"none"},editType:"none"},selectdirection:{valType:"enumerated",
values:["h","v","d","any"],dflt:"any",editType:"none"}}},{"../../plots/font_attributes":856,"./constants":677}],685:[function(b,N,I){var r=b("../../lib"),q=b("./helpers").isUnifiedHover,m=b("./layout_attributes"),l=b("./hovermode_defaults"),a=b("./hoverlabel_defaults");N.exports=function(h,g,n){function p(f,k){return r.coerce(h,g,m,f,k)}if(n=l(h,g,n))p("hoverdistance"),p("spikedistance",q(n)?-1:void 0);"select"===p("dragmode")&&p("selectdirection");n=g._has("mapbox");var d=g._has("geo"),e=g._basePlotModules.length;
"zoom"===g.dragmode&&((n||d)&&1===e||n&&d&&2===e)&&(g.dragmode="pan");a(h,g,p)}},{"../../lib":778,"./helpers":679,"./hoverlabel_defaults":681,"./hovermode_defaults":682,"./layout_attributes":684}],686:[function(b,N,I){var r=b("../../lib"),q=b("./hoverlabel_defaults"),m=b("./layout_attributes");N.exports=function(l,a){q(l,a,function(h,g){return r.coerce(l,a,m,h,g)})}},{"../../lib":778,"./hoverlabel_defaults":681,"./layout_attributes":684}],687:[function(b,N,I){function r(p,d,e){d=d[e+"axes"];p=Object.keys((p._splomAxes||
{})[e]||{});if(Array.isArray(d))return d;if(p.length)return p}function q(p,d,e,f,k,t){e=d(p+"gap",e);var v=d("domain."+p);d(p+"side",f);p=Array(k);d=v[0];v=(v[1]-d)/(k-e);e=v*(1-e);for(f=0;f<k;f++){var w=d+v*f;p[t?k-1-f:f]=[w,w+e]}return p}function m(p,d,e,f,k){function t(y,B){-1!==d.indexOf(B)&&void 0===f[B]?(v[y]=B,f[B]=y):v[y]=""}var v=Array(e),w;if(Array.isArray(p))for(w=0;w<e;w++)t(w,p[w]);else for(t(0,k),w=1;w<e;w++)t(w,k+(w+1));return v}var l=b("../../lib");I=b("../../lib/regex").counter;var a=
b("../../plots/domain").attributes,h=b("../../plots/cartesian/constants").idRegex,g=b("../../plot_api/plot_template"),n={rows:{valType:"integer",min:1,editType:"plot"},roworder:{valType:"enumerated",values:["top to bottom","bottom to top"],dflt:"top to bottom",editType:"plot"},columns:{valType:"integer",min:1,editType:"plot"},subplots:{valType:"info_array",freeLength:!0,dimensions:2,items:{valType:"enumerated",values:[I("xy").toString(),""],editType:"plot"},editType:"plot"},xaxes:{valType:"info_array",
freeLength:!0,items:{valType:"enumerated",values:[h.x.toString(),""],editType:"plot"},editType:"plot"},yaxes:{valType:"info_array",freeLength:!0,items:{valType:"enumerated",values:[h.y.toString(),""],editType:"plot"},editType:"plot"},pattern:{valType:"enumerated",values:["independent","coupled"],dflt:"coupled",editType:"plot"},xgap:{valType:"number",min:0,max:1,editType:"plot"},ygap:{valType:"number",min:0,max:1,editType:"plot"},domain:a({name:"grid",editType:"plot",noGridCell:!0},{}),xside:{valType:"enumerated",
values:["bottom","bottom plot","top plot","top"],dflt:"bottom plot",editType:"plot"},yside:{valType:"enumerated",values:["left","left plot","right plot","right"],dflt:"left plot",editType:"plot"},editType:"plot"};N.exports={moduleType:"component",name:"grid",schema:{layout:{grid:n}},layoutAttributes:n,sizeDefaults:function(p,d){function e(u,D){return l.coerce(f,z,n,u,D)}var f=p.grid||{},k=r(d,f,"x"),t=r(d,f,"y");if(p.grid||k||t){p=Array.isArray(f.subplots)&&Array.isArray(f.subplots[0]);var v=Array.isArray(k),
w=Array.isArray(t),y=v&&k!==f.xaxes&&w&&t!==f.yaxes;if(p){var B=f.subplots.length;var A=f.subplots[0].length}else w&&(B=t.length),v&&(A=k.length);var z=g.newContainer(d,"grid");k=e("rows",B);A=e("columns",A);if(1<k*A){p||v||w||"independent"===e("pattern")&&(p=!0);z._hasSubplotGrid=p;v="top to bottom"===e("roworder");w=p?.3:.1;if(y&&d._splomGridDflt){var E=d._splomGridDflt.xside;var C=d._splomGridDflt.yside}z._domains={x:q("x",e,p?.2:.1,E,A),y:q("y",e,w,C,k,v)}}else delete d.grid}},contentDefaults:function(p,
d){var e=d.grid;if(e&&e._domains){var f=p.grid||{};p=d._subplots;var k=e._hasSubplotGrid,t=e.rows,v=e.columns,w="independent"===e.pattern,y,B=e._axisMap={};if(k){var A=f.subplots||[];var z=e.subplots=Array(t);var E=1;for(d=0;d<t;d++){var C=z[d]=Array(v),u=A[d]||[];for(y=0;y<v;y++)if(w?(f=1===E?"xy":"x"+E+"y"+E,E++):f=u[y],C[y]="",-1!==p.cartesian.indexOf(f)){var D=f.indexOf("y");var G=f.slice(0,D);D=f.slice(D);void 0!==B[G]&&B[G]!==y||void 0!==B[D]&&B[D]!==d||(C[y]=f,B[G]=y,B[D]=d)}}}else D=r(d,f,
"x"),d=r(d,f,"y"),e.xaxes=m(D,p.xaxis,v,B,"x"),e.yaxes=m(d,p.yaxis,t,B,"y");w=e._anchors={};y="top to bottom"===e.roworder;for(var J in B)if(d=J.charAt(0),f=e[d+"side"],8>f.length)w[J]="free";else if("x"===d)if("t"===f.charAt(0)===y?(d=0,A=1,E=t):(d=t-1,E=A=-1),k)for(G=B[J];d!==E;d+=A){if(f=z[d][G])if(D=f.indexOf("y"),f.slice(0,D)===J){w[J]=f.slice(D);break}}else for(;d!==E;d+=A){if(D=e.yaxes[d],-1!==p.cartesian.indexOf(J+D)){w[J]=D;break}}else if("l"===f.charAt(0)?(d=0,A=1,E=v):(d=v-1,E=A=-1),k)for(G=
B[J];d!==E;d+=A){if(f=z[G][d])if(D=f.indexOf("y"),f.slice(D)===J){w[J]=f.slice(0,D);break}}else for(;d!==E;d+=A)if(G=e.xaxes[d],-1!==p.cartesian.indexOf(G+J)){w[J]=G;break}}}}},{"../../lib":778,"../../lib/regex":795,"../../plot_api/plot_template":817,"../../plots/cartesian/constants":834,"../../plots/domain":855}],688:[function(b,N,I){I=b("../../plots/cartesian/constants");var r=b("../../plot_api/plot_template").templatedArray;b("../../constants/axis_placeable_objects");N.exports=r("image",{visible:{valType:"boolean",
dflt:!0,editType:"arraydraw"},source:{valType:"string",editType:"arraydraw"},layer:{valType:"enumerated",values:["below","above"],dflt:"above",editType:"arraydraw"},sizex:{valType:"number",dflt:0,editType:"arraydraw"},sizey:{valType:"number",dflt:0,editType:"arraydraw"},sizing:{valType:"enumerated",values:["fill","contain","stretch"],dflt:"contain",editType:"arraydraw"},opacity:{valType:"number",min:0,max:1,dflt:1,editType:"arraydraw"},x:{valType:"any",dflt:0,editType:"arraydraw"},y:{valType:"any",
dflt:0,editType:"arraydraw"},xanchor:{valType:"enumerated",values:["left","center","right"],dflt:"left",editType:"arraydraw"},yanchor:{valType:"enumerated",values:["top","middle","bottom"],dflt:"top",editType:"arraydraw"},xref:{valType:"enumerated",values:["paper",I.idRegex.x.toString()],dflt:"paper",editType:"arraydraw"},yref:{valType:"enumerated",values:["paper",I.idRegex.y.toString()],dflt:"paper",editType:"arraydraw"},editType:"arraydraw"})},{"../../constants/axis_placeable_objects":746,"../../plot_api/plot_template":817,
"../../plots/cartesian/constants":834}],689:[function(b,N,I){var r=b("fast-isnumeric"),q=b("../../lib/to_log_range");N.exports=function(m,l,a,h){l=l||{};var g="log"===a&&"linear"===l.type;a="linear"===a&&"log"===l.type;if(g||a){m=m._fullLayout.images;a=l._id.charAt(0);for(var n,p,d=0;d<m.length;d++)if(n=m[d],p="images["+d+"].",n[a+"ref"]===l._id){var e=n[a];n=n["size"+a];g?(e=q(e,l.range),n=n/Math.pow(10,e)/2,n=2*Math.log(n+Math.sqrt(1+n*n))/Math.LN10):(e=Math.pow(10,e),n=e*(Math.pow(10,n/2)-Math.pow(10,
-n/2)));r(e)?r(n)||(n=null):n=e=null;h(p+a,e);h(p+"size"+a,n)}}}},{"../../lib/to_log_range":805,"fast-isnumeric":241}],690:[function(b,N,I){function r(h,g,n){function p(t,v){return q.coerce(h,g,a,t,v)}var d=p("source");if(!p("visible",!!d))return g;p("layer");p("xanchor");p("yanchor");p("sizex");p("sizey");p("sizing");p("opacity");n={_fullLayout:n};d=["x","y"];for(var e=0;2>e;e++){var f=d[e],k=m.coerceRef(h,g,n,f,"paper",void 0);"paper"!==k&&m.getFromId(n,k)._imgIndices.push(g._index);m.coercePosition(g,
n,p,k,f,0)}return g}var q=b("../../lib"),m=b("../../plots/cartesian/axes"),l=b("../../plots/array_container_defaults"),a=b("./attributes");N.exports=function(h,g){l(h,g,{name:"images",handleItemDefaults:r})}},{"../../lib":778,"../../plots/array_container_defaults":823,"../../plots/cartesian/axes":828,"./attributes":688}],691:[function(b,N,I){var r=b("d3"),q=b("../drawing"),m=b("../../plots/cartesian/axes"),l=b("../../plots/cartesian/axis_ids"),a=b("../../constants/xmlns_namespaces");N.exports=function(h){function g(B){var A=
r.select(this);if(this._imgSrc!==B.source)if(A.attr("xmlns",a.svg),B.source&&"data:"===B.source.slice(0,5))A.attr("xlink:href",B.source),this._imgSrc=B.source;else{var z=new Promise(function(E){function C(){A.remove();E()}var u=new Image;this.img=u;u.setAttribute("crossOrigin","anonymous");u.onerror=C;u.onload=function(){var D=document.createElement("canvas");D.width=this.width;D.height=this.height;D.getContext("2d").drawImage(this,0,0);D=D.toDataURL("image/png");A.attr("xlink:href",D);E()};A.on("error",
C);this._imgSrc=u.src=B.source}.bind(this));h._promises.push(z)}}function n(B){var A=r.select(this),z=m.getFromId(h,B.xref),E=m.getFromId(h,B.yref),C="domain"===m.getRefType(B.xref),u="domain"===m.getRefType(B.yref),D=p._size;var G=void 0!==z?"string"===typeof B.xref&&C?z._length*B.sizex:Math.abs(z.l2p(B.sizex)-z.l2p(0)):B.sizex*D.w;var J=void 0!==E?"string"===typeof B.yref&&u?E._length*B.sizey:Math.abs(E.l2p(B.sizey)-E.l2p(0)):B.sizey*D.h;var L=G*y.x[B.xanchor].offset,K=J*y.y[B.yanchor].offset,H=
y.x[B.xanchor].sizing+y.y[B.yanchor].sizing;C=void 0!==z?"string"===typeof B.xref&&C?z._length*B.x+z._offset:z.r2p(B.x)+z._offset:B.x*D.w+D.l;C+=L;u=void 0!==E?"string"===typeof B.yref&&u?E._length*(1-B.y)+E._offset:E.r2p(B.y)+E._offset:D.h-B.y*D.h+D.t;switch(B.sizing){case "fill":H+=" slice";break;case "stretch":H="none"}A.attr({x:C,y:u+K,width:G,height:J,preserveAspectRatio:H,opacity:B.opacity});z=z&&"domain"!==m.getRefType(B.xref)?z._id:"";B=E&&"domain"!==m.getRefType(B.yref)?E._id:"";B=z+B;q.setClipUrl(A,
B?"clip"+p._uid+B:null,h)}var p=h._fullLayout,d=[],e={},f=[],k;for(k=0;k<p.images.length;k++){var t=p.images[k];if(t.visible)if("below"===t.layer&&"paper"!==t.xref&&"paper"!==t.yref){var v=l.ref2id(t.xref)+l.ref2id(t.yref);var w=p._plots[v];w?(w.mainplot&&(v=w.mainplot.id),e[v]||(e[v]=[]),e[v].push(t)):f.push(t)}else"above"===t.layer?d.push(t):f.push(t)}var y={x:{left:{sizing:"xMin",offset:0},center:{sizing:"xMid",offset:-.5},right:{sizing:"xMax",offset:-1}},y:{top:{sizing:"YMin",offset:0},middle:{sizing:"YMid",
offset:-.5},bottom:{sizing:"YMax",offset:-1}}};k=p._imageLowerLayer.selectAll("image").data(f);v=p._imageUpperLayer.selectAll("image").data(d);k.enter().append("image");v.enter().append("image");k.exit().remove();v.exit().remove();k.each(function(B){g.bind(this)(B);n.bind(this)(B)});v.each(function(B){g.bind(this)(B);n.bind(this)(B)});d=Object.keys(p._plots);for(k=0;k<d.length;k++)v=d[k],f=p._plots[v],f.imagelayer&&(v=f.imagelayer.selectAll("image").data(e[v]||[]),v.enter().append("image"),v.exit().remove(),
v.each(function(B){g.bind(this)(B);n.bind(this)(B)}))}},{"../../constants/xmlns_namespaces":754,"../../plots/cartesian/axes":828,"../../plots/cartesian/axis_ids":831,"../drawing":665,d3:169}],692:[function(b,N,I){N.exports={moduleType:"component",name:"images",layoutAttributes:b("./attributes"),supplyLayoutDefaults:b("./defaults"),includeBasePlot:b("../../plots/cartesian/include_components")("images"),draw:b("./draw"),convertCoords:b("./convert_coords")}},{"../../plots/cartesian/include_components":840,
"./attributes":688,"./convert_coords":689,"./defaults":690,"./draw":691}],693:[function(b,N,I){I=b("../../plots/font_attributes");b=b("../color/attributes");N.exports={bgcolor:{valType:"color",editType:"legend"},bordercolor:{valType:"color",dflt:b.defaultLine,editType:"legend"},borderwidth:{valType:"number",min:0,dflt:0,editType:"legend"},font:I({editType:"legend"}),orientation:{valType:"enumerated",values:["v","h"],dflt:"v",editType:"legend"},traceorder:{valType:"flaglist",flags:["reversed","grouped"],
extras:["normal"],editType:"legend"},tracegroupgap:{valType:"number",min:0,dflt:10,editType:"legend"},itemsizing:{valType:"enumerated",values:["trace","constant"],dflt:"trace",editType:"legend"},itemwidth:{valType:"number",min:30,dflt:30,editType:"legend"},itemclick:{valType:"enumerated",values:["toggle","toggleothers",!1],dflt:"toggle",editType:"legend"},itemdoubleclick:{valType:"enumerated",values:["toggle","toggleothers",!1],dflt:"toggleothers",editType:"legend"},x:{valType:"number",min:-2,max:3,
editType:"legend"},xanchor:{valType:"enumerated",values:["auto","left","center","right"],dflt:"left",editType:"legend"},y:{valType:"number",min:-2,max:3,editType:"legend"},yanchor:{valType:"enumerated",values:["auto","top","middle","bottom"],editType:"legend"},uirevision:{valType:"any",editType:"none"},valign:{valType:"enumerated",values:["top","middle","bottom"],dflt:"middle",editType:"legend"},title:{text:{valType:"string",dflt:"",editType:"legend"},font:I({editType:"legend"}),side:{valType:"enumerated",
values:["top","left","top left"],editType:"legend"},editType:"legend"},editType:"legend"}},{"../../plots/font_attributes":856,"../color/attributes":642}],694:[function(b,N,I){N.exports={scrollBarWidth:6,scrollBarMinHeight:20,scrollBarColor:"#808BA4",scrollBarMargin:4,scrollBarEnterAttrs:{rx:20,ry:3,width:0,height:0},titlePad:2,itemGap:5}},{}],695:[function(b,N,I){var r=b("../../registry"),q=b("../../lib"),m=b("../../plot_api/plot_template"),l=b("./attributes"),a=b("../../plots/layout_attributes"),
h=b("./helpers");N.exports=function(g,n,p){function d(B,A){return q.coerce(e,y,l,B,A)}for(var e=g.legend||{},f=0,k=!1,t="normal",v=0;v<p.length;v++){var w=p[v];if(w.visible){if(w.showlegend||w._dfltShowLegend&&!(w._module&&w._module.attributes&&w._module.attributes.showlegend&&!1===w._module.attributes.showlegend.dflt))f++,w.showlegend&&(k=!0,(r.traceIs(w,"pie-like")||!0===w._input.showlegend)&&f++);if(r.traceIs(w,"bar")&&"stack"===n.barmode||-1!==["tonextx","tonexty"].indexOf(w.fill))t=h.isGrouped({traceorder:t})?
"grouped+reversed":"reversed";void 0!==w.legendgroup&&""!==w.legendgroup&&(t=h.isReversed({traceorder:t})?"reversed+grouped":"grouped")}}p=q.coerce(g,n,a,"showlegend",k&&1<f);if(!1!==p||e.uirevision){var y=m.newContainer(n,"legend");d("uirevision",n.uirevision);!1!==p&&(d("bgcolor",n.paper_bgcolor),d("bordercolor"),d("borderwidth"),q.coerceFont(d,"font",n.font),p=d("orientation"),"h"===p?(f=0,r.getComponentMethod("rangeslider","isVisible")(g.xaxis)?(g=1.1,k="bottom"):(g=-.1,k="top")):(f=1.02,g=1,
k="auto"),d("traceorder",t),h.isGrouped(n.legend)&&d("tracegroupgap"),d("itemsizing"),d("itemwidth"),d("itemclick"),d("itemdoubleclick"),d("x",f),d("xanchor"),d("y",g),d("yanchor",k),d("valign"),q.noneOrAll(e,y,["x","y"]),d("title.text")&&(d("title.side","h"===p?"left":"top"),q.coerceFont(d,"title.font",n.font)))}}},{"../../lib":778,"../../plot_api/plot_template":817,"../../plots/layout_attributes":882,"../../registry":911,"./attributes":693,"./helpers":699}],696:[function(b,N,I){function r(K,H,Q,
M,P){var T=Q.data()[0][0].trace;P={event:P,node:Q.node(),curveNumber:T.index,expandedIndex:T._expandedIndex,data:K.data,layout:K.layout,frames:K._transitionData._frames,config:K._context,fullData:K._fullData,fullLayout:K._fullLayout};T._group&&(P.group=T._group);t.traceIs(T,"pie-like")&&(P.label=Q.datum()[0].label);!1!==v.triggerHandler(K,"plotly_legendclick",P)&&(1===M?H._clickTimeout=setTimeout(function(){z(Q,K,M)},K._context.doubleClickDelay):2===M&&(H._clickTimeout&&clearTimeout(H._clickTimeout),
K._legendMouseDownTime=0,!1!==v.triggerHandler(K,"plotly_legenddoubleclick",P)&&z(Q,K,M)))}function q(K,H,Q){var M=K.data()[0][0],P=M.trace,T=t.traceIs(P,"pie-like"),O=P.index,U=Q._main&&H._context.edits.legendText&&!T,S=Q._maxNameLength;Q.entries?T=M.text:(T=T?M.label:P.name,P._meta&&(T=f.templateString(T,P._meta)));P=f.ensureSingle(K,"text","legendtext");P.attr("text-anchor","start").call(y.font,Q.font).text(U?m(T,S):T);A.positionText(P,Q.itemwidth+2*E.itemGap,0);if(U)P.call(A.makeEditable,{gd:H,
text:T}).call(a,K,H,Q).on("edit",function(X){this.text(m(X,S)).call(a,K,H,Q);var ba=M.trace._fullInput||{},ca={};t.hasTransform(ba,"groupby")?(ca=t.getTransformIndices(ba,"groupby"),ba=f.keyedContainer(ba,"transforms["+ca[ca.length-1]+"].styles","target","value.name"),ba.set(M.trace._group,X),ca=ba.constructUpdate()):ca.name=X;return t.call("_guiRestyle",H,ca,O)});else a(P,K,H,Q)}function m(K,H){H=Math.max(4,H);if(K&&K.trim().length>=H/2)return K;K=K||"";for(H-=K.length;0<H;H--)K+=" ";return K}function l(K,
H){var Q=H._context.doubleClickDelay,M,P=1,T=f.ensureSingle(K,"rect","legendtoggle",function(O){H._context.staticPlot||O.style("cursor","pointer").attr("pointer-events","all");O.call(B.fill,"rgba(0,0,0,0)")});H._context.staticPlot||(T.on("mousedown",function(){M=(new Date).getTime();M-H._legendMouseDownTime<Q?P+=1:(P=1,H._legendMouseDownTime=M)}),T.on("mouseup",function(){if(!H._dragged&&!H._editing){var O=H._fullLayout.legend;(new Date).getTime()-H._legendMouseDownTime>Q&&(P=Math.max(P-1,1));r(H,
O,K,P,e.event)}}))}function a(K,H,Q,M){M._main||K.attr("data-notex",!0);A.convertToTspans(K,Q,function(){var P=M,T=H.data()[0][0];if(P._main&&T&&!T.trace.showlegend)H.remove();else{var O=H.select("g[class*\x3dmath-group]"),U=O.node();P||(P=Q._fullLayout.legend);var S=P.borderwidth,X=(T?P:P.title).font.size*C;if(U){var ba=y.bBox(U);U=ba.height;ba=ba.width;T?y.setTranslate(O,0,.25*U):y.setTranslate(O,S,.75*U+S)}else{O=H.select(T?".legendtext":".legendtitletext");var ca=A.lineCount(O);ba=O.node();U=
X*ca;ba=ba?y.bBox(ba).width:0;T?A.positionText(O,P.itemwidth+2*E.itemGap,-(X*((ca-1)/2-.3))):A.positionText(O,E.titlePad+S,X+S)}T?(T.lineHeight=X,T.height=Math.max(U,16)+3,T.width=ba):(P._titleWidth=ba,P._titleHeight=U)}})}function h(K){var H=0,Q=0,M=K.title.side;M&&(-1!==M.indexOf("left")&&(H=K._titleWidth),-1!==M.indexOf("top")&&(Q=K._titleHeight));return[H,Q]}function g(K,H,Q,M){var P=K._fullLayout;M||(M=P.legend);var T=P._size,O=L.isVertical(M),U=L.isGrouped(M),S=M.borderwidth,X=2*S,ba=E.itemGap,
ca=M.itemwidth+2*ba,ia=2*(S+ba),ja=d(M),la=0>M.y||0===M.y&&"top"===ja,da=1<M.y||1===M.y&&"bottom"===ja;M._maxHeight=Math.max(la||da?P.height/2:T.h,30);var oa=0;M._width=0;M._height=0;var sa=h(M);if(O)Q.each(function(cb){var $a=cb[0].height;y.setTranslate(this,S+sa[0],S+sa[1]+M._height+$a/2+ba);M._height+=$a;M._width=Math.max(M._width,cb[0].width)}),oa=ca+M._width,M._width+=ba+ca+X,M._height+=ia,U&&(H.each(function(cb,$a){y.setTranslate(this,0,$a*M.tracegroupgap)}),M._height+=(M._lgroupsLength-1)*
M.tracegroupgap);else{ja=p(M);var ma=1<M.x||1===M.x&&"left"===ja;la=da||la;P=P.width/2;M._maxWidth=Math.max(0>M.x||0===M.x&&"right"===ja?la&&"left"===ja?T.l+T.w:P:ma?la&&"right"===ja?T.r+T.w:P:T.w,2*ca);var qa=0,pa=0;Q.each(function(cb){cb=cb[0].width+ca;qa=Math.max(qa,cb);pa+=cb});oa=null;var na=0;if(U){var ka=0,ua=0,va=0;H.each(function(){var cb=0,$a=0;e.select(this).selectAll("g.traces").each(function(pb){var xa=pb[0].height;y.setTranslate(this,sa[0],sa[1]+S+ba+xa/2+$a);$a+=xa;cb=Math.max(cb,ca+
pb[0].width)});ka=Math.max(ka,$a);var jb=cb+ba;jb+S+ua>M._maxWidth&&(na=Math.max(na,ua),ua=0,va+=ka+M.tracegroupgap,ka=$a);y.setTranslate(this,ua,va);ua+=jb});M._width=Math.max(na,ua)+S;M._height=va+ka+ia}else{H=Q.size();var Ca=pa+X+(H-1)*ba<M._maxWidth,Ma=0,Ua=0,eb=0,fb=0;Q.each(function(cb){var $a=cb[0].height;cb=ca+cb[0].width;var jb=(Ca?cb:qa)+ba;jb+S+Ua-ba>=M._maxWidth&&(na=Math.max(na,fb),Ua=0,eb+=Ma,M._height+=Ma,Ma=0);y.setTranslate(this,sa[0]+S+Ua,sa[1]+S+eb+$a/2+ba);fb=Ua+cb+ba;Ua+=jb;Ma=
Math.max(Ma,$a)});Ca?(M._width=Ua+X,M._height=Ma+ia):(M._width=Math.max(na,fb)+X,M._height+=Ma+ia)}}M._width=Math.ceil(Math.max(M._width+sa[0],M._titleWidth+2*(S+E.titlePad)));M._height=Math.ceil(Math.max(M._height+sa[1],M._titleHeight+2*(S+E.itemGap)));M._effHeight=Math.min(M._height,M._maxHeight);K=K._context.edits;var nb=K.legendText||K.legendPosition;Q.each(function(cb){var $a=e.select(this).select(".legendtoggle"),jb=cb[0].height;cb=nb?ca:oa||ca+cb[0].width;O||(cb+=ba/2);y.setRect($a,0,-jb/2,
cb,jb)})}function n(K){var H=K._fullLayout.legend,Q=p(H),M=d(H);return k.autoMargin(K,"legend",{x:H.x,y:H.y,l:H._width*u[Q],r:H._width*D[Q],b:H._effHeight*D[M],t:H._effHeight*u[M]})}function p(K){return f.isRightAnchor(K)?"right":f.isCenterAnchor(K)?"center":"left"}function d(K){return f.isBottomAnchor(K)?"bottom":f.isMiddleAnchor(K)?"middle":"top"}var e=b("d3"),f=b("../../lib"),k=b("../../plots/plots"),t=b("../../registry"),v=b("../../lib/events"),w=b("../dragelement"),y=b("../drawing"),B=b("../color"),
A=b("../../lib/svg_text_utils"),z=b("./handle_click"),E=b("./constants");I=b("../../constants/alignment");var C=I.LINE_SPACING,u=I.FROM_TL,D=I.FROM_BR,G=b("./get_legend_data"),J=b("./style"),L=b("./helpers");N.exports=function(K,H){var Q=K._fullLayout,M="legend"+Q._uid;if(H){var P=H.layer;M+="-hover"}else H=Q.legend||{},H._main=!0,P=Q._infolayer;if(P){K._legendMouseDownTime||(K._legendMouseDownTime=0);if(H._main){if(!K.calcdata)return;var T=Q.showlegend&&G(K.calcdata,H)}else{if(!H.entries)return;
T=G(H.entries,H)}var O=Q.hiddenlabels||[];if(H._main&&(!Q.showlegend||!T.length))return P.selectAll(".legend").remove(),Q._topdefs.select("#"+M).remove(),k.autoMargin(K,"legend");var U=f.ensureSingle(P,"g","legend",function(oa){H._main&&oa.attr("pointer-events","all")}),S=f.ensureSingleById(Q._topdefs,"clipPath",M,function(oa){oa.append("rect")}),X=f.ensureSingle(U,"rect","bg",function(oa){oa.attr("shape-rendering","crispEdges")});X.call(B.stroke,H.bordercolor).call(B.fill,H.bgcolor).style("stroke-width",
H.borderwidth+"px");var ba=f.ensureSingle(U,"g","scrollbox"),ca=H.title;H._titleWidth=0;H._titleHeight=0;if(ca.text){var ia=f.ensureSingle(ba,"text","legendtitletext");ia.attr("text-anchor","start").call(y.font,ca.font).text(ca.text);a(ia,ba,K,H)}else ba.selectAll(".legendtitletext").remove();var ja=f.ensureSingle(U,"rect","scrollbar",function(oa){oa.attr(E.scrollBarEnterAttrs).call(B.fill,E.scrollBarColor)}),la=ba.selectAll("g.groups").data(T);la.enter().append("g").attr("class","groups");la.exit().remove();
var da=la.selectAll("g.traces").data(f.identity);da.enter().append("g").attr("class","traces");da.exit().remove();da.style("opacity",function(oa){var sa=oa[0].trace;return t.traceIs(sa,"pie-like")?-1!==O.indexOf(oa[0].label)?.5:1:"legendonly"===sa.visible?.5:1}).each(function(){e.select(this).call(q,K,H)}).call(J,K,H).each(function(){H._main&&e.select(this).call(l,K)});f.syncOrAsync([k.previousPromises,function(){return g(K,la,da,H)},function(){function oa(xa,Ea,Ia){H._scrollY=K._fullLayout.legend._scrollY=
xa;y.setTranslate(ba,0,-xa);y.setRect(ja,H._width,E.scrollBarMargin+xa*Ia,E.scrollBarWidth,Ea);S.select("rect").attr("y",ma+xa)}if(!H._main||!n(K)){var sa=Q._size,ma=H.borderwidth,qa=sa.l+sa.w*H.x-u[p(H)]*H._width,pa=sa.t+sa.h*(1-H.y)-u[d(H)]*H._effHeight;if(H._main&&Q.margin.autoexpand){var na=qa,ka=pa;qa=f.constrain(qa,0,Q.width-H._width);pa=f.constrain(pa,0,Q.height-H._effHeight);qa!==na&&f.log("Constrain legend.x to make legend fit inside graph");pa!==ka&&f.log("Constrain legend.y to make legend fit inside graph")}H._main&&
y.setTranslate(U,qa,pa);ja.on(".drag",null);U.on("wheel",null);if(!H._main||H._height<=H._maxHeight||K._context.staticPlot)qa=H._effHeight,H._main||(qa=H._height),X.attr({width:H._width-ma,height:qa-ma,x:ma/2,y:ma/2}),y.setTranslate(ba,0,0),S.select("rect").attr({width:H._width-2*ma,height:qa-2*ma,x:ma,y:ma}),y.setClipUrl(ba,M,K),y.setRect(ja,0,0,0,0),delete H._scrollY;else{var ua=Math.max(E.scrollBarMinHeight,H._effHeight*H._effHeight/H._height),va=H._effHeight-ua-2*E.scrollBarMargin,Ca=H._height-
H._effHeight,Ma=va/Ca,Ua=Math.min(H._scrollY||0,Ca);X.attr({width:H._width-2*ma+E.scrollBarWidth+E.scrollBarMargin,height:H._effHeight-ma,x:ma/2,y:ma/2});S.select("rect").attr({width:H._width-2*ma+E.scrollBarWidth+E.scrollBarMargin,height:H._effHeight-2*ma,x:ma,y:ma+Ua});y.setClipUrl(ba,M,K);oa(Ua,ua,Ma);U.on("wheel",function(){Ua=f.constrain(H._scrollY+e.event.deltaY/va*Ca,0,Ca);oa(Ua,ua,Ma);0!==Ua&&Ua!==Ca&&e.event.preventDefault()});var eb,fb,nb;qa=e.behavior.drag().on("dragstart",function(){var xa=
e.event.sourceEvent;eb="touchstart"===xa.type?xa.changedTouches[0].clientY:xa.clientY;nb=Ua}).on("drag",function(){var xa=e.event.sourceEvent;2===xa.buttons||xa.ctrlKey||(fb="touchmove"===xa.type?xa.changedTouches[0].clientY:xa.clientY,Ua=f.constrain((fb-eb)/Ma+nb,0,Ca),oa(Ua,ua,Ma))});ja.call(qa);qa=e.behavior.drag().on("dragstart",function(){var xa=e.event.sourceEvent;"touchstart"===xa.type&&(eb=xa.changedTouches[0].clientY,nb=Ua)}).on("drag",function(){var xa=e.event.sourceEvent;"touchmove"===
xa.type&&(fb=xa.changedTouches[0].clientY,Ua=f.constrain((eb-fb)/Ma+nb,0,Ca),oa(Ua,ua,Ma))});ba.call(qa)}if(K._context.edits.legendPosition){var cb,$a,jb,pb;U.classed("cursor-move",!0);w.init({element:U.node(),gd:K,prepFn:function(){var xa=y.getTranslate(U);jb=xa.x;pb=xa.y},moveFn:function(xa,Ea){xa=jb+xa;Ea=pb+Ea;y.setTranslate(U,xa,Ea);cb=w.align(xa,0,sa.l,sa.l+sa.w,H.xanchor);$a=w.align(Ea,0,sa.t+sa.h,sa.t,H.yanchor)},doneFn:function(){void 0!==cb&&void 0!==$a&&t.call("_guiRelayout",K,{"legend.x":cb,
"legend.y":$a})},clickFn:function(xa,Ea){var Ia=P.selectAll("g.traces").filter(function(){var Oa=this.getBoundingClientRect();return Ea.clientX>=Oa.left&&Ea.clientX<=Oa.right&&Ea.clientY>=Oa.top&&Ea.clientY<=Oa.bottom});0<Ia.size()&&r(K,U,Ia,xa,Ea)}})}}}],K)}}},{"../../constants/alignment":745,"../../lib":778,"../../lib/events":767,"../../lib/svg_text_utils":803,"../../plots/plots":891,"../../registry":911,"../color":643,"../dragelement":662,"../drawing":665,"./constants":694,"./get_legend_data":697,
"./handle_click":698,"./helpers":699,"./style":701,d3:169}],697:[function(b,N,I){var r=b("../../registry"),q=b("./helpers");N.exports=function(m,l){function a(A,z){""!==A&&q.isGrouped(l)?-1===g.indexOf(A)?(g.push(A),n=!0,h[A]=[[z]]):h[A].push([z]):(A="~~i"+d,g.push(A),h[A]=[[z]],d++)}var h={},g=[],n=!1,p={},d=0,e=0,f,k=l._main;for(f=0;f<m.length;f++){var t=m[f];var v=t[0];var w=v.trace,y=w.legendgroup;if(!k||w.visible&&w.showlegend)if(r.traceIs(w,"pie-like"))for(p[y]||(p[y]={}),v=0;v<t.length;v++){var B=
t[v].label;p[y][B]||(a(y,{label:B,color:t[v].color,i:t[v].i,trace:w,pts:t[v].pts}),p[y][B]=!0,e=Math.max(e,(B||"").length))}else a(y,v),e=Math.max(e,(w.name||"").length)}if(!g.length)return[];m=g.length;if(n&&q.isGrouped(l))for(k=Array(m),f=0;f<m;f++)p=h[g[f]],k[f]=q.isReversed(l)?p.reverse():p;else{k=[Array(m)];for(f=0;f<m;f++)p=h[g[f]][0],k[0][q.isReversed(l)?m-f-1:f]=p;m=1}l._lgroupsLength=m;l._maxNameLength=e;return k}},{"../../registry":911,"./helpers":699}],698:[function(b,N,I){var r=b("../../lib"),
q=b("../../registry"),m=!0;N.exports=function(l,a,h){function g(C,u,D){var G=v.indexOf(C),J=t[u];J||(J=t[u]=[]);-1===v.indexOf(C)&&(v.push(C),G=v.length-1);J[G]=D;return G}function n(C,u){var D=C._fullInput;if(q.hasTransform(D,"groupby")){var G=w[D.index];G||(G=q.getTransformIndices(D,"groupby"),G=r.keyedContainer(D,"transforms["+G[G.length-1]+"].styles","target","value.visible"),w[D.index]=G);var J=G.get(C._group);void 0===J&&(J=!0);!1!==J&&G.set(C._group,u);y[D.index]=g(D.index,"visible",!1===D.visible?
!1:!0)}else g(D.index,"visible",!1===D.visible?!1:u)}var p=a._fullLayout;if(!a._dragged&&!a._editing){var d=p.legend.itemclick,e=p.legend.itemdoubleclick;1===h&&"toggle"===d&&"toggleothers"===e&&m&&a.data&&a._context.showTips&&r.notifier(r._(a,"Double-click on legend to isolate one trace"),"long");m=!1;var f;1===h?f=d:2===h&&(f=e);if(f){var k=p.hiddenlabels?p.hiddenlabels.slice():[];l=l.data()[0][0];h=a._fullData;p=l.trace;d=p.legendgroup;var t={},v=[],w=[],y=[];if(q.traceIs(p,"pie-like")){var B=
l.label;l=k.indexOf(B);"toggle"===f?-1===l?k.push(B):k.splice(l,1):"toggleothers"===f&&(k=[],a.calcdata[0].forEach(function(C){B!==C.label&&k.push(C.label)}),a._fullLayout.hiddenlabels&&a._fullLayout.hiddenlabels.length===k.length&&-1===l&&(k=[]));q.call("_guiRelayout",a,"hiddenlabels",k)}else{e=d&&d.length;var A=[];if(e)for(l=0;l<h.length;l++){var z=h[l];z.visible&&z.legendgroup===d&&A.push(l)}if("toggle"===f){switch(p.visible){case !0:var E="legendonly";break;case !1:E=!1;break;case "legendonly":E=
!0}if(e)for(l=0;l<h.length;l++)!1!==h[l].visible&&h[l].legendgroup===d&&n(h[l],E);else n(p,E)}else if("toggleothers"===f){A=!0;for(l=0;l<h.length;l++)if(z=h[l]===p,f=!0!==h[l].showlegend,!(z||f||(z=e&&h[l].legendgroup===d,z||!0!==h[l].visible||q.traceIs(h[l],"notLegendIsolatable")))){A=!1;break}for(l=0;l<h.length;l++)if(!1!==h[l].visible&&!q.traceIs(h[l],"notLegendIsolatable"))switch(p.visible){case "legendonly":n(h[l],!0);break;case !0:E=A?!0:"legendonly",z=h[l]===p,f=!0!==h[l].showlegend&&!h[l].legendgroup,
z=z||e&&h[l].legendgroup===d,n(h[l],z||f?!0:E)}}for(l=0;l<w.length;l++)if(f=w[l])for(d=f.constructUpdate(),E=Object.keys(d),f=0;f<E.length;f++)h=E[f],p=t[h]=t[h]||[],p[y[l]]=d[h];p=Object.keys(t);for(l=0;l<p.length;l++)for(h=p[l],f=0;f<v.length;f++)t[h].hasOwnProperty(f)||(t[h][f]=void 0);q.call("_guiRestyle",a,t,v)}}}}},{"../../lib":778,"../../registry":911}],699:[function(b,N,I){I.isGrouped=function(r){return-1!==(r.traceorder||"").indexOf("grouped")};I.isVertical=function(r){return"h"!==r.orientation};
I.isReversed=function(r){return-1!==(r.traceorder||"").indexOf("reversed")}},{}],700:[function(b,N,I){N.exports={moduleType:"component",name:"legend",layoutAttributes:b("./attributes"),supplyLayoutDefaults:b("./defaults"),draw:b("./draw"),style:b("./style")}},{"./attributes":693,"./defaults":695,"./draw":696,"./style":701}],701:[function(b,N,I){function r(k,t){return(t?"radial":"horizontal")+(k?"":"reversed")}var q=b("d3"),m=b("../../registry"),l=b("../../lib"),a=l.strTranslate,h=b("../drawing"),
g=b("../color"),n=b("../colorscale/helpers").extractOpts,p=b("../../traces/scatter/subtypes"),d=b("../../traces/pie/style_one"),e=b("../../traces/pie/helpers").castOption,f=b("./constants");N.exports=function(k,t,v){function w(u,D,G){var J=u[0].trace,L=J.marker||{},K=L.line||{};J=G?J.visible&&J.type===G:m.traceIs(J,"bar");u=q.select(D).select("g.legendpoints").selectAll("path.legend"+G).data(J?[u]:[]);u.enter().append("path").classed("legend"+G,!0).attr("d","M6,6H-6V-6H6Z").attr("transform",E);u.exit().remove();
u.each(function(H){var Q=q.select(this);H=H[0];var M=C(H.mlw,L.line,5,2);Q.style("stroke-width",M+"px").call(g.fill,H.mc||L.color);M&&g.stroke(Q,H.mlc||K.color)})}function y(u,D,G){var J=u[0],L=J.trace,K=G?L.visible&&L.type===G:m.traceIs(L,G);u=q.select(D).select("g.legendpoints").selectAll("path.legend"+G).data(K?[u]:[]);u.enter().append("path").classed("legend"+G,!0).attr("d","M6,6H-6V-6H6Z").attr("transform",E);u.exit().remove();u.size()&&(G=(L.marker||{}).line,D=C(e(G.width,J.pts),G,5,2),L=l.minExtend(L,
{marker:{line:{width:D}}}),L.marker.line.color=G.color,J=l.minExtend(J,{trace:L}),d(u,J,L))}var B=t._fullLayout;v||(v=B.legend);var A="constant"===v.itemsizing,z=v.itemwidth,E=a((z+2*f.itemGap)/2,0),C=function(u,D,G,J){if(!(u+1))if(D&&0<D.width)u=D.width;else return 0;return A?J:Math.min(u,G)};k.each(function(u){var D=q.select(this);D=l.ensureSingle(D,"g","layers");D.style("opacity",u[0].trace.opacity);var G=v.valign,J=u[0].lineHeight,L=u[0].height;"middle"!==G&&J&&L?D.attr("transform",a(0,.5*{top:1,
bottom:-1}[G]*(J-L+3))):D.attr("transform",null);D.selectAll("g.legendfill").data([u]).enter().append("g").classed("legendfill",!0);D.selectAll("g.legendlines").data([u]).enter().append("g").classed("legendlines",!0);D=D.selectAll("g.legendsymbols").data([u]);D.enter().append("g").classed("legendsymbols",!0);D.selectAll("g.legendpoints").data([u]).enter().append("g").classed("legendpoints",!0)}).each(function(u){var D=u[0].trace;u=[];if(D.visible)switch(D.type){case "histogram2d":case "heatmap":u=
[["M-15,-2V4H15V-2Z"]];var G=!0;break;case "choropleth":case "choroplethmapbox":u=[["M-6,-6V6H6V-6Z"]];G=!0;break;case "densitymapbox":u=[["M-6,0 a6,6 0 1,0 12,0 a 6,6 0 1,0 -12,0"]];G="radial";break;case "cone":u=[["M-6,2 A2,2 0 0,0 -6,6 V6L6,4Z"],["M-6,-6 A2,2 0 0,0 -6,-2 L6,-4Z"],["M-6,-2 A2,2 0 0,0 -6,2 L6,0Z"]];G=!1;break;case "streamtube":u=[["M-6,2 A2,2 0 0,0 -6,6 H6 A2,2 0 0,1 6,2 Z"],["M-6,-6 A2,2 0 0,0 -6,-2 H6 A2,2 0 0,1 6,-6 Z"],["M-6,-2 A2,2 0 0,0 -6,2 H6 A2,2 0 0,1 6,-2 Z"]];G=!1;break;
case "surface":u=[["M-6,-6 A2,3 0 0,0 -6,0 H6 A2,3 0 0,1 6,-6 Z"],["M-6,1 A2,3 0 0,1 -6,6 H6 A2,3 0 0,0 6,0 Z"]];G=!0;break;case "mesh3d":u=[["M-6,6H0L-6,-6Z"],["M6,6H0L6,-6Z"],["M-6,-6H6L0,6Z"]];G=!1;break;case "volume":u=[["M-6,6H0L-6,-6Z"],["M6,6H0L6,-6Z"],["M-6,-6H6L0,6Z"]];G=!0;break;case "isosurface":u=[["M-6,6H0L-6,-6Z"],["M6,6H0L6,-6Z"],["M-6,-6 A12,24 0 0,0 6,-6 L0,6Z"]],G=!1}u=q.select(this).select("g.legendpoints").selectAll("path.legend3dandfriends").data(u);u.enter().append("path").classed("legend3dandfriends",
!0).attr("transform",E).style("stroke-miterlimit",1);u.exit().remove();u.each(function(J,L){var K=q.select(this),H=n(D),Q=H.colorscale,M=H.reversescale;H=function(T){T.size()&&h.gradient(T,t,"legendfill-"+D.uid,r(M,"radial"===G),Q,"fill")};if(Q)G||(P=Q.length,P=0===L?Q[M?P-1:0][1]:1===L?Q[M?0:P-1][1]:Q[Math.floor((P-1)/2)][1]);else{var P=D.vertexcolor||D.facecolor||D.color;P=l.isArrayOrTypedArray(P)?P[L]||P[0]:P}K.attr("d",J[0]);P?K.call(g.fill,P):K.call(H)})}).each(function(u){var D=u[0].trace,G=
"waterfall"===D.type;if(u[0]._distinct&&G)return G=u[0].trace[u[0].dir].marker,u[0].mc=G.color,u[0].mlw=G.line.width,u[0].mlc=G.line.color,w(u,this,"waterfall");var J=[];D.visible&&G&&(J=u[0].hasTotals?[["increasing","M-6,-6V6H0Z"],["totals","M6,6H0L-6,-6H-0Z"],["decreasing","M6,6V-6H0Z"]]:[["increasing","M-6,-6V6H6Z"],["decreasing","M6,6V-6H-6Z"]]);u=q.select(this).select("g.legendpoints").selectAll("path.legendwaterfall").data(J);u.enter().append("path").classed("legendwaterfall",!0).attr("transform",
E).style("stroke-miterlimit",1);u.exit().remove();u.each(function(L){var K=q.select(this),H=D[L[0]].marker,Q=C(void 0,H.line,5,2);K.attr("d",L[1]).style("stroke-width",Q+"px").call(g.fill,H.color);Q&&K.call(g.stroke,H.line.color)})}).each(function(u){w(u,this,"funnel")}).each(function(u){w(u,this)}).each(function(u){var D=u[0].trace,G=q.select(this).select("g.legendpoints").selectAll("path.legendbox").data(D.visible&&m.traceIs(D,"box-violin")?[u]:[]);G.enter().append("path").classed("legendbox",!0).attr("d",
"M6,6H-6V-6H6Z").attr("transform",E);G.exit().remove();G.each(function(){var J=q.select(this);if("all"!==D.boxpoints&&"all"!==D.points||0!==g.opacity(D.fillcolor)||0!==g.opacity((D.line||{}).color)){var L=C(void 0,D.line,5,2);J.style("stroke-width",L+"px").call(g.fill,D.fillcolor);L&&g.stroke(J,D.line.color)}else J=l.minExtend(D,{marker:{size:A?12:l.constrain(D.marker.size,2,16),sizeref:1,sizemin:1,sizemode:"diameter"}}),G.call(h.pointStyle,J,t)})}).each(function(u){y(u,this,"funnelarea")}).each(function(u){y(u,
this,"pie")}).each(function(u){var D=u[0],G=D.trace,J=G.visible&&G.fill&&"none"!==G.fill,L=p.hasLines(G),K=G.contours,H=!1,Q=!1,M=n(G),P=M.colorscale,T=M.reversescale,O=function(X){X.size()&&h.gradient(X,t,"legendfill-"+G.uid,r(T),P,"fill")};M=function(X){if(X.size()){var ba="legendline-"+G.uid;h.lineGroupStyle(X);h.gradient(X,t,ba,r(T),P,"stroke")}};if(K){var U=K.coloring;"lines"===U?H=!0:L="none"===U||"heatmap"===U||K.showlines;if("constraint"===K.type)J="\x3d"!==K._operation;else if("fill"===U||
"heatmap"===U)Q=!0}K=p.hasMarkers(G)||p.hasText(G)||!J&&!Q?"M5,0":L||H?"M5,-2":"M5,-3";U=q.select(this);u=U.select(".legendfill").selectAll("path").data(J||Q?[u]:[]);u.enter().append("path").classed("js-fill",!0);u.exit().remove();u.attr("d",K+"h"+z+"v6h-"+z+"z").call(J?h.fillGroupStyle:O);if(L||H){J=C(void 0,G.line,10,5);J=l.minExtend(G,{line:{width:J}});var S=[l.minExtend(D,{trace:J})]}D=U.select(".legendlines").selectAll("path").data(L||H?[S]:[]);D.enter().append("path").classed("js-line",!0);
D.exit().remove();D.attr("d",K+(H?"l"+z+",0.0001":"h"+z)).call(L?h.lineGroupStyle:M)}).each(function(u){function D(T,O,U,S){T=l.nestedProperty(L,T).get();O=l.isArrayOrTypedArray(T)&&O?O(T):T;A&&O&&void 0!==S&&(O=S);if(U){if(O<U[0])return U[0];if(O>U[1])return U[1]}return O}function G(T){return J._distinct&&J.index&&T[J.index]?T[J.index]:T[0]}var J=u[0],L=J.trace;u=p.hasMarkers(L);var K=p.hasText(L),H=p.hasLines(L);if(u||K||H){var Q={};var M={};if(u){Q.mc=D("marker.color",G);Q.mx=D("marker.symbol",
G);Q.mo=D("marker.opacity",l.mean,[.2,1]);Q.mlc=D("marker.line.color",G);Q.mlw=D("marker.line.width",l.mean,[0,5],2);M.marker={sizeref:1,sizemin:1,sizemode:"diameter"};var P=D("marker.size",l.mean,[2,16],12);Q.ms=P;M.marker.size=P}H&&(M.line={width:D("line.width",G,[0,10],5)});K&&(Q.tx="Aa",Q.tp=D("textposition",G),Q.ts=10,Q.tc=D("textfont.color",G),Q.tf=D("textfont.family",G));Q=[l.minExtend(J,Q)];M=l.minExtend(L,M);M.selectedpoints=null;M.texttemplate=null}H=q.select(this).select("g.legendpoints");
P=H.selectAll("path.scatterpts").data(u?Q:[]);P.enter().insert("path",":first-child").classed("scatterpts",!0).attr("transform",E);P.exit().remove();P.call(h.pointStyle,M,t);u&&(Q[0].mrc=3);u=H.selectAll("g.pointtext").data(K?Q:[]);u.enter().append("g").classed("pointtext",!0).append("text").attr("transform",E);u.exit().remove();u.selectAll("text").call(h.textPointStyle,M,t)}).each(function(u){var D=u[0].trace;u=q.select(this).select("g.legendpoints").selectAll("path.legendcandle").data(D.visible&&
"candlestick"===D.type?[u,u]:[]);u.enter().append("path").classed("legendcandle",!0).attr("d",function(G,J){return J?"M-15,0H-8M-8,6V-6H8Z":"M15,0H8M8,-6V6H-8Z"}).attr("transform",E).style("stroke-miterlimit",1);u.exit().remove();u.each(function(G,J){G=q.select(this);J=D[J?"increasing":"decreasing"];var L=C(void 0,J.line,5,2);G.style("stroke-width",L+"px").call(g.fill,J.fillcolor);L&&g.stroke(G,J.line.color)})}).each(function(u){var D=u[0].trace;u=q.select(this).select("g.legendpoints").selectAll("path.legendohlc").data(D.visible&&
"ohlc"===D.type?[u,u]:[]);u.enter().append("path").classed("legendohlc",!0).attr("d",function(G,J){return J?"M-15,0H0M-8,-6V0":"M15,0H0M8,6V0"}).attr("transform",E).style("stroke-miterlimit",1);u.exit().remove();u.each(function(G,J){G=q.select(this);J=D[J?"increasing":"decreasing"];var L=C(void 0,J.line,5,2);G.style("fill","none").call(h.dashLine,J.line.dash,L);L&&g.stroke(G,J.line.color)})})}},{"../../lib":778,"../../registry":911,"../../traces/pie/helpers":1166,"../../traces/pie/style_one":1172,
"../../traces/scatter/subtypes":1212,"../color":643,"../colorscale/helpers":654,"../drawing":665,"./constants":694,d3:169}],702:[function(b,N,I){function r(w,y){var B=y.currentTarget,A=B.getAttribute("data-attr");y=B.getAttribute("data-val")||!0;var z=w._fullLayout,E={},C=f.list(w,null,!0),u=z._cartesianSpikesEnabled,D;if("zoom"===A){A="in"===y?.5:2;B=(1+A)/2;var G=(1-A)/2;for(D=0;D<C.length;D++)if(A=C[D],!A.fixedrange){var J=A._name;if("auto"===y)E[J+".autorange"]=!0;else if("reset"===y){if(void 0===
A._rangeInitial)E[J+".autorange"]=!0;else{var L=A._rangeInitial.slice();E[J+".range[0]"]=L[0];E[J+".range[1]"]=L[1]}void 0!==A._showSpikeInitial&&(E[J+".showspikes"]=A._showSpikeInitial,"on"!==u||A._showSpikeInitial||(u="off"))}else L=[A.r2l(A.range[0]),A.r2l(A.range[1])],L=[B*L[0]+G*L[1],B*L[1]+G*L[0]],E[J+".range[0]"]=A.l2r(L[0]),E[J+".range[1]"]=A.l2r(L[1])}}else"hovermode"!==A||"x"!==y&&"y"!==y||(y=z._isHoriz?"y":"x",B.setAttribute("data-val",y)),E[A]=y;z._cartesianSpikesEnabled=u;d.call("_guiRelayout",
w,E)}function q(w,y){y=y.currentTarget;var B=y.getAttribute("data-attr");y=y.getAttribute("data-val")||!0;var A=w._fullLayout._subplots.gl3d||[],z={};B=B.split(".");for(var E=0;E<A.length;E++)z[A[E]+"."+B[1]]=y;z.dragmode="pan"===y?y:"zoom";d.call("_guiRelayout",w,z)}function m(w,y){var B=y.currentTarget.getAttribute("data-attr");y="resetLastSave"===B;B="resetDefault"===B;for(var A=w._fullLayout,z=A._subplots.gl3d||[],E={},C=0;C<z.length;C++){var u=z[C],D=u+".camera",G=u+".aspectratio",J=u+".aspectmode";
u=A[u]._scene;if(y){E[D+".up"]=u.viewInitial.up;E[D+".eye"]=u.viewInitial.eye;E[D+".center"]=u.viewInitial.center;var L=!0}else B&&(E[D+".up"]=null,E[D+".eye"]=null,E[D+".center"]=null,L=!0);L&&(E[G+".x"]=u.viewInitial.aspectratio.x,E[G+".y"]=u.viewInitial.aspectratio.y,E[G+".z"]=u.viewInitial.aspectratio.z,E[J]=u.viewInitial.aspectmode)}d.call("_guiRelayout",w,E)}function l(w,y){y=y.currentTarget;var B=y._previousVal;w=w._fullLayout;var A=w._subplots.gl3d||[],z=["xaxis","yaxis","zaxis"],E={},C={};
if(B)C=B,y._previousVal=null;else{for(B=0;B<A.length;B++){var u=A[B],D=w[u],G=u+".hovermode";E[G]=D.hovermode;C[G]=!1;for(G=0;3>G;G++){var J=z[G],L=u+"."+J+".showspikes";C[L]=!1;E[L]=D[J].showspikes}}y._previousVal=E}return C}function a(w,y){var B=y.currentTarget;y=B.getAttribute("data-attr");B=B.getAttribute("data-val")||!0;for(var A=w._fullLayout,z=A._subplots.geo||[],E=0;E<z.length;E++){var C=z[E],u=A[C];"zoom"===y&&(u=u.projection.scale,d.call("_guiRelayout",w,C+".projection.scale","in"===B?2*
u:.5*u))}"reset"===y&&p(w,"geo")}function h(w){w=w._fullLayout;return w.hovermode?!1:w._has("cartesian")?w._isHoriz?"y":"x":"closest"}function g(w){var y=h(w);d.call("_guiRelayout",w,"hovermode",y)}function n(w,y){y=y.currentTarget.getAttribute("data-val");for(var B=w._fullLayout,A=B._subplots.mapbox||[],z={},E=0;E<A.length;E++){var C=A[E],u=B[C].zoom;z[C+".zoom"]="in"===y?1.05*u:u/1.05}d.call("_guiRelayout",w,z)}function p(w,y){var B=w._fullLayout;y=B._subplots[y]||[];for(var A={},z=0;z<y.length;z++)for(var E=
y[z],C=B[E]._subplot.viewInitial,u=Object.keys(C),D=0;D<u.length;D++){var G=u[D];A[E+"."+G]=C[G]}d.call("_guiRelayout",w,A)}var d=b("../../registry"),e=b("../../plots/plots"),f=b("../../plots/cartesian/axis_ids");I=b("../../fonts/ploticon");var k=b("../shapes/draw").eraseActiveShape,t=b("../../lib"),v=t._;b=N.exports={};b.toImage={name:"toImage",title:function(w){return"png"===((w._context.toImageButtonOptions||{}).format||"png")?v(w,"Download plot as a png"):v(w,"Download plot")},icon:I.camera,click:function(w){var y=
w._context.toImageButtonOptions,B={format:y.format||"png"};t.notifier(v(w,"Taking snapshot - this may take a few seconds"),"long");"svg"!==B.format&&t.isIE()&&(t.notifier(v(w,"IE only supports svg.  Changing format to svg."),"long"),B.format="svg");["filename","width","height","scale"].forEach(function(A){A in y&&(B[A]=y[A])});d.call("downloadImage",w,B).then(function(A){t.notifier(v(w,"Snapshot succeeded")+" - "+A,"long")}).catch(function(){t.notifier(v(w,"Sorry, there was a problem downloading your snapshot!"),
"long")})}};b.sendDataToCloud={name:"sendDataToCloud",title:function(w){return v(w,"Edit in Chart Studio")},icon:I.disk,click:function(w){e.sendDataToCloud(w)}};b.editInChartStudio={name:"editInChartStudio",title:function(w){return v(w,"Edit in Chart Studio")},icon:I.pencil,click:function(w){e.sendDataToCloud(w)}};b.zoom2d={name:"zoom2d",title:function(w){return v(w,"Zoom")},attr:"dragmode",val:"zoom",icon:I.zoombox,click:r};b.pan2d={name:"pan2d",title:function(w){return v(w,"Pan")},attr:"dragmode",
val:"pan",icon:I.pan,click:r};b.select2d={name:"select2d",title:function(w){return v(w,"Box Select")},attr:"dragmode",val:"select",icon:I.selectbox,click:r};b.lasso2d={name:"lasso2d",title:function(w){return v(w,"Lasso Select")},attr:"dragmode",val:"lasso",icon:I.lasso,click:r};b.drawclosedpath={name:"drawclosedpath",title:function(w){return v(w,"Draw closed freeform")},attr:"dragmode",val:"drawclosedpath",icon:I.drawclosedpath,click:r};b.drawopenpath={name:"drawopenpath",title:function(w){return v(w,
"Draw open freeform")},attr:"dragmode",val:"drawopenpath",icon:I.drawopenpath,click:r};b.drawline={name:"drawline",title:function(w){return v(w,"Draw line")},attr:"dragmode",val:"drawline",icon:I.drawline,click:r};b.drawrect={name:"drawrect",title:function(w){return v(w,"Draw rectangle")},attr:"dragmode",val:"drawrect",icon:I.drawrect,click:r};b.drawcircle={name:"drawcircle",title:function(w){return v(w,"Draw circle")},attr:"dragmode",val:"drawcircle",icon:I.drawcircle,click:r};b.eraseshape={name:"eraseshape",
title:function(w){return v(w,"Erase active shape")},icon:I.eraseshape,click:k};b.zoomIn2d={name:"zoomIn2d",title:function(w){return v(w,"Zoom in")},attr:"zoom",val:"in",icon:I.zoom_plus,click:r};b.zoomOut2d={name:"zoomOut2d",title:function(w){return v(w,"Zoom out")},attr:"zoom",val:"out",icon:I.zoom_minus,click:r};b.autoScale2d={name:"autoScale2d",title:function(w){return v(w,"Autoscale")},attr:"zoom",val:"auto",icon:I.autoscale,click:r};b.resetScale2d={name:"resetScale2d",title:function(w){return v(w,
"Reset axes")},attr:"zoom",val:"reset",icon:I.home,click:r};b.hoverClosestCartesian={name:"hoverClosestCartesian",title:function(w){return v(w,"Show closest data on hover")},attr:"hovermode",val:"closest",icon:I.tooltip_basic,gravity:"ne",click:r};b.hoverCompareCartesian={name:"hoverCompareCartesian",title:function(w){return v(w,"Compare data on hover")},attr:"hovermode",val:function(w){return w._fullLayout._isHoriz?"y":"x"},icon:I.tooltip_compare,gravity:"ne",click:r};b.zoom3d={name:"zoom3d",title:function(w){return v(w,
"Zoom")},attr:"scene.dragmode",val:"zoom",icon:I.zoombox,click:q};b.pan3d={name:"pan3d",title:function(w){return v(w,"Pan")},attr:"scene.dragmode",val:"pan",icon:I.pan,click:q};b.orbitRotation={name:"orbitRotation",title:function(w){return v(w,"Orbital rotation")},attr:"scene.dragmode",val:"orbit",icon:I["3d_rotate"],click:q};b.tableRotation={name:"tableRotation",title:function(w){return v(w,"Turntable rotation")},attr:"scene.dragmode",val:"turntable",icon:I["z-axis"],click:q};b.resetCameraDefault3d=
{name:"resetCameraDefault3d",title:function(w){return v(w,"Reset camera to default")},attr:"resetDefault",icon:I.home,click:m};b.resetCameraLastSave3d={name:"resetCameraLastSave3d",title:function(w){return v(w,"Reset camera to last save")},attr:"resetLastSave",icon:I.movie,click:m};b.hoverClosest3d={name:"hoverClosest3d",title:function(w){return v(w,"Toggle show closest data on hover")},attr:"hovermode",val:null,toggle:!0,icon:I.tooltip_basic,gravity:"ne",click:function(w,y){y=l(w,y);d.call("_guiRelayout",
w,y)}};b.zoomInGeo={name:"zoomInGeo",title:function(w){return v(w,"Zoom in")},attr:"zoom",val:"in",icon:I.zoom_plus,click:a};b.zoomOutGeo={name:"zoomOutGeo",title:function(w){return v(w,"Zoom out")},attr:"zoom",val:"out",icon:I.zoom_minus,click:a};b.resetGeo={name:"resetGeo",title:function(w){return v(w,"Reset")},attr:"reset",val:null,icon:I.autoscale,click:a};b.hoverClosestGeo={name:"hoverClosestGeo",title:function(w){return v(w,"Toggle show closest data on hover")},attr:"hovermode",val:null,toggle:!0,
icon:I.tooltip_basic,gravity:"ne",click:g};b.hoverClosestGl2d={name:"hoverClosestGl2d",title:function(w){return v(w,"Toggle show closest data on hover")},attr:"hovermode",val:null,toggle:!0,icon:I.tooltip_basic,gravity:"ne",click:g};b.hoverClosestPie={name:"hoverClosestPie",title:function(w){return v(w,"Toggle show closest data on hover")},attr:"hovermode",val:"closest",icon:I.tooltip_basic,gravity:"ne",click:g};b.resetViewSankey={name:"resetSankeyGroup",title:function(w){return v(w,"Reset view")},
icon:I.home,click:function(w){for(var y={"node.groups":[],"node.x":[],"node.y":[]},B=0;B<w._fullData.length;B++){var A=w._fullData[B]._viewInitial;y["node.groups"].push(A.node.groups.slice());y["node.x"].push(A.node.x.slice());y["node.y"].push(A.node.y.slice())}d.call("restyle",w,y)}};b.toggleHover={name:"toggleHover",title:function(w){return v(w,"Toggle show closest data on hover")},attr:"hovermode",val:null,toggle:!0,icon:I.tooltip_basic,gravity:"ne",click:function(w,y){y=l(w,y);y.hovermode=h(w);
d.call("_guiRelayout",w,y)}};b.resetViews={name:"resetViews",title:function(w){return v(w,"Reset views")},icon:I.home,click:function(w,y){var B=y.currentTarget;B.setAttribute("data-attr","zoom");B.setAttribute("data-val","reset");r(w,y);B.setAttribute("data-attr","resetLastSave");m(w,y);p(w,"geo");p(w,"mapbox")}};b.toggleSpikelines={name:"toggleSpikelines",title:function(w){return v(w,"Toggle Spike Lines")},icon:I.spikeline,attr:"_cartesianSpikesEnabled",val:"on",click:function(w){var y=w._fullLayout;
y._cartesianSpikesEnabled="on"===y._cartesianSpikesEnabled?"off":"on";y=d;for(var B=y.call,A="on"===w._fullLayout._cartesianSpikesEnabled,z=f.list(w,null,!0),E={},C=0;C<z.length;C++){var u=z[C];E[u._name+".showspikes"]=A?!0:u._showSpikeInitial}B.call(y,"_guiRelayout",w,E)}};b.resetViewMapbox={name:"resetViewMapbox",title:function(w){return v(w,"Reset view")},attr:"reset",icon:I.home,click:function(w){p(w,"mapbox")}};b.zoomInMapbox={name:"zoomInMapbox",title:function(w){return v(w,"Zoom in")},attr:"zoom",
val:"in",icon:I.zoom_plus,click:n};b.zoomOutMapbox={name:"zoomOutMapbox",title:function(w){return v(w,"Zoom out")},attr:"zoom",val:"out",icon:I.zoom_minus,click:n}},{"../../fonts/ploticon":757,"../../lib":778,"../../plots/cartesian/axis_ids":831,"../../plots/plots":891,"../../registry":911,"../shapes/draw":724}],703:[function(b,N,I){I.manage=b("./manage")},{"./manage":704}],704:[function(b,N,I){function r(k){function t(U){if(U.length){for(var S=[],X=0;X<U.length;X++){var ba=U[X];-1===B.indexOf(ba)&&
S.push(e[ba])}M.push(S)}}var v=k._fullLayout,w=k._fullData,y=k._context,B=y.modeBarButtonsToRemove;k=y.modeBarButtonsToAdd;var A=v._has("cartesian"),z=v._has("gl3d"),E=v._has("geo"),C=v._has("pie"),u=v._has("funnelarea"),D=v._has("gl2d"),G=v._has("ternary"),J=v._has("mapbox"),L=v._has("polar"),K=v._has("sankey"),H=q(v),Q=p(v.hovermode),M=[],P=["toImage"];y.showEditInChartStudio?P.push("editInChartStudio"):y.showSendToCloud&&P.push("sendDataToCloud");t(P);y=[];P=[];var T=[],O=[];1<(A||D||C||u||G)+
E+z+J+L?(P=["toggleHover"],T=["resetViews"]):E?(y=["zoomInGeo","zoomOutGeo"],P=["hoverClosestGeo"],T=["resetGeo"]):z?(P=["hoverClosest3d"],T=["resetCameraDefault3d","resetCameraLastSave3d"]):J?(y=["zoomInMapbox","zoomOutMapbox"],P=["toggleHover"],T=["resetViewMapbox"]):D?P=["hoverClosestGl2d"]:C?P=["hoverClosestPie"]:K?(P=["hoverClosestCartesian","hoverCompareCartesian"],T=["resetViewSankey"]):P=["toggleHover"];A&&(P=["toggleSpikelines","hoverClosestCartesian","hoverCompareCartesian"]);if(l(w)||Q)P=
[];!A&&!D||H||(y=["zoomIn2d","zoomOut2d","autoScale2d"],"resetViews"!==T[0]&&(T=["resetScale2d"]));z?O=["zoom3d","pan3d","orbitRotation","tableRotation"]:(A||D)&&!H||G?O=["zoom2d","pan2d"]:J||E?O=["pan2d"]:L&&(O=["zoom2d"]);m(w)&&O.push("select2d","lasso2d");if(Array.isArray(k)){w=[];for(A=0;A<k.length;A++)z=k[A],"string"===typeof z?-1!==f.indexOf(z)&&(v._has("mapbox")||v._has("cartesian"))&&O.push(z):w.push(z);k=w}t(O);t(y.concat(T));t(P);return a(M,k)}function q(k){k=h.list({_fullLayout:k},null,
!0);for(var t=0;t<k.length;t++)if(!k[t].fixedrange)return!1;return!0}function m(k){for(var t=!1,v=0;v<k.length&&!t;v++){var w=k[v];if(w._module&&w._module.selectPoints)if(n.traceIs(w,"scatter-like")){if(g.hasMarkers(w)||g.hasText(w))t=!0}else if(n.traceIs(w,"box-violin")){if("all"===w.boxpoints||"all"===w.points)t=!0}else t=!0}return t}function l(k){for(var t=0;t<k.length;t++)if(!n.traceIs(k[t],"noHover"))return!1;return!0}function a(k,t){if(t.length)if(Array.isArray(t[0]))for(var v=0;v<t.length;v++)k.push(t[v]);
else k.push(t);return k}var h=b("../../plots/cartesian/axis_ids"),g=b("../../traces/scatter/subtypes"),n=b("../../registry"),p=b("../fx/helpers").isUnifiedHover,d=b("./modebar"),e=b("./buttons");N.exports=function(k){var t=k._fullLayout,v=k._context,w=t._modeBar;if(v.displayModeBar||v.watermark){if(!Array.isArray(v.modeBarButtonsToRemove))throw Error("*modeBarButtonsToRemove* configuration options must be an array.");if(!Array.isArray(v.modeBarButtonsToAdd))throw Error("*modeBarButtonsToAdd* configuration options must be an array.");
var y=v.modeBarButtons;if(Array.isArray(y)&&y.length)for(v=0;v<y.length;v++)for(var B=y[v],A=0;A<B.length;A++){var z=B[A];if("string"===typeof z)if(void 0!==e[z])y[v][A]=e[z];else throw Error("*modeBarButtons* configuration options invalid button name");}else y=!v.displayModeBar&&v.watermark?[]:r(k);w?w.update(k,y):t._modeBar=d(k,y)}else w&&(w.destroy(),delete t._modeBar)};var f="drawline drawopenpath drawclosedpath drawcircle drawrect eraseshape".split(" ")},{"../../plots/cartesian/axis_ids":831,
"../../registry":911,"../../traces/scatter/subtypes":1212,"../fx/helpers":679,"./buttons":702,"./modebar":705}],705:[function(b,N,I){function r(g){this.container=g.container;this.element=document.createElement("div");this.update(g.graphInfo,g.buttons);this.container.appendChild(this.element)}var q=b("d3"),m=b("fast-isnumeric"),l=b("../../lib"),a=b("../../fonts/ploticon"),h=new DOMParser;b=r.prototype;b.update=function(g,n){this.graphInfo=g;g=this.graphInfo._context;var p=this.graphInfo._fullLayout,
d="modebar-"+p._uid;this.element.setAttribute("id",d);this._uid=d;this.element.className="modebar";"hover"===g.displayModeBar&&(this.element.className+=" modebar--hover ease-bg");"v"===p.modebar.orientation&&(this.element.className+=" vertical",n=n.reverse());var e=p.modebar,f="hover"===g.displayModeBar?".js-plotly-plot .plotly:hover ":"";l.deleteRelatedStyleRule(d);l.addRelatedStyleRule(d,f+"#"+d+" .modebar-group","background-color: "+e.bgcolor);l.addRelatedStyleRule(d,"#"+d+" .modebar-btn .icon path",
"fill: "+e.color);l.addRelatedStyleRule(d,"#"+d+" .modebar-btn:hover .icon path","fill: "+e.activecolor);l.addRelatedStyleRule(d,"#"+d+" .modebar-btn.active .icon path","fill: "+e.activecolor);d=!this.hasButtons(n);e=this.hasLogo!==g.displaylogo;f=this.locale!==g.locale;this.locale=g.locale;if(d||e||f)if(this.removeAllButtons(),this.updateButtons(n),g.watermark||g.displaylogo)n=this.getLogo(),g.watermark&&(n.className+=" watermark"),"v"===p.modebar.orientation?this.element.insertBefore(n,this.element.childNodes[0]):
this.element.appendChild(n),this.hasLogo=!0;this.updateActiveButton()};b.updateButtons=function(g){var n=this;this.buttons=g;this.buttonElements=[];this.buttonsNames=[];this.buttons.forEach(function(p){var d=n.createGroup();p.forEach(function(e){var f=e.name;if(!f)throw Error("must provide button 'name' in button config");if(-1!==n.buttonsNames.indexOf(f))throw Error("button name '"+f+"' is taken");n.buttonsNames.push(f);e=n.createButton(e);n.buttonElements.push(e);d.appendChild(e)});n.element.appendChild(d)})};
b.createGroup=function(){var g=document.createElement("div");g.className="modebar-group";return g};b.createButton=function(g){var n=this,p=document.createElement("a");p.setAttribute("rel","tooltip");p.className="modebar-btn";var d=g.title;void 0===d?d=g.name:"function"===typeof d&&(d=d(this.graphInfo));(d||0===d)&&p.setAttribute("data-title",d);void 0!==g.attr&&p.setAttribute("data-attr",g.attr);d=g.val;void 0!==d&&("function"===typeof d&&(d=d(this.graphInfo)),p.setAttribute("data-val",d));if("function"!==
typeof g.click)throw Error("must provide button 'click' function in button config");p.addEventListener("click",function(e){g.click(n.graphInfo,e);n.updateActiveButton(e.currentTarget)});p.setAttribute("data-toggle",g.toggle||!1);g.toggle&&q.select(p).classed("active",!0);d=g.icon;"function"===typeof d?p.appendChild(d()):p.appendChild(this.createIcon(d||a.question));p.setAttribute("data-gravity",g.gravity||"n");return p};b.createIcon=function(g){var n=m(g.height)?Number(g.height):g.ascent-g.descent;
if(g.path){var p=document.createElementNS("http://www.w3.org/2000/svg","svg");p.setAttribute("viewBox",[0,0,g.width,n].join(" "));p.setAttribute("class","icon");n=document.createElementNS("http://www.w3.org/2000/svg","path");n.setAttribute("d",g.path);g.transform?n.setAttribute("transform",g.transform):void 0!==g.ascent&&n.setAttribute("transform","matrix(1 0 0 -1 0 "+g.ascent+")");p.appendChild(n)}g.svg&&(p=h.parseFromString(g.svg,"application/xml").childNodes[0]);p.setAttribute("height","1em");
p.setAttribute("width","1em");return p};b.updateActiveButton=function(g){var n=this.graphInfo._fullLayout,p=void 0!==g?g.getAttribute("data-attr"):null;this.buttonElements.forEach(function(d){var e=d.getAttribute("data-val")||!0,f=d.getAttribute("data-attr"),k="true"===d.getAttribute("data-toggle");d=q.select(d);k?f===p&&d.classed("active",!d.classed("active")):(f=null===f?f:l.nestedProperty(n,f).get(),d.classed("active",f===e))})};b.hasButtons=function(g){var n=this.buttons;if(!n||g.length!==n.length)return!1;
for(var p=0;p<g.length;++p){if(g[p].length!==n[p].length)return!1;for(var d=0;d<g[p].length;d++)if(g[p][d].name!==n[p][d].name)return!1}return!0};b.getLogo=function(){var g=this.createGroup(),n=document.createElement("a");n.href="https://plotly.com/";n.target="_blank";n.setAttribute("data-title",l._(this.graphInfo,"Produced with Plotly"));n.className="modebar-btn plotlyjsicon modebar-btn--logo";n.appendChild(this.createIcon(a.newplotlylogo));g.appendChild(n);return g};b.removeAllButtons=function(){for(;this.element.firstChild;)this.element.removeChild(this.element.firstChild);
this.hasLogo=!1};b.destroy=function(){l.removeElement(this.container.querySelector(".modebar"));l.deleteRelatedStyleRule(this._uid)};N.exports=function(g,n){var p=g._fullLayout;g=new r({graphInfo:g,container:p._modebardiv.node(),buttons:n});p._privateplot&&q.select(g.element).append("span").classed("badge-private float--left",!0).text("PRIVATE");return g}},{"../../fonts/ploticon":757,"../../lib":778,d3:169,"fast-isnumeric":241}],706:[function(b,N,I){I=b("../../plots/font_attributes");var r=b("../color/attributes");
b=b("../../plot_api/plot_template").templatedArray;b=b("button",{visible:{valType:"boolean",dflt:!0,editType:"plot"},step:{valType:"enumerated",values:"month year day hour minute second all".split(" "),dflt:"month",editType:"plot"},stepmode:{valType:"enumerated",values:["backward","todate"],dflt:"backward",editType:"plot"},count:{valType:"number",min:0,dflt:1,editType:"plot"},label:{valType:"string",editType:"plot"},editType:"plot"});N.exports={visible:{valType:"boolean",editType:"plot"},buttons:b,
x:{valType:"number",min:-2,max:3,editType:"plot"},xanchor:{valType:"enumerated",values:["auto","left","center","right"],dflt:"left",editType:"plot"},y:{valType:"number",min:-2,max:3,editType:"plot"},yanchor:{valType:"enumerated",values:["auto","top","middle","bottom"],dflt:"bottom",editType:"plot"},font:I({editType:"plot"}),bgcolor:{valType:"color",dflt:r.lightLine,editType:"plot"},activecolor:{valType:"color",editType:"plot"},bordercolor:{valType:"color",dflt:r.defaultLine,editType:"plot"},borderwidth:{valType:"number",
min:0,dflt:0,editType:"plot"},editType:"plot"}},{"../../plot_api/plot_template":817,"../../plots/font_attributes":856,"../color/attributes":642}],707:[function(b,N,I){N.exports={yPad:.02,minButtonWidth:30,rx:3,ry:3,lightAmount:25,darkAmount:10}},{}],708:[function(b,N,I){function r(p,d,e,f){function k(t,v){return m.coerce(p,d,g.buttons,t,v)}e=f.calendar;k("visible")&&(f=k("step"),"all"!==f&&(!e||"gregorian"===e||"month"!==f&&"year"!==f?k("stepmode"):d.stepmode="backward",k("count")),k("label"))}function q(p,
d,e){e=e.filter(function(v){return d[v].anchor===p._id});for(var f=0,k=0;k<e.length;k++){var t=d[e[k]].domain;t&&(f=Math.max(t[1],f))}return[p.domain[0],f+n.yPad]}var m=b("../../lib"),l=b("../color"),a=b("../../plot_api/plot_template"),h=b("../../plots/array_container_defaults"),g=b("./attributes"),n=b("./constants");N.exports=function(p,d,e,f,k){function t(y,B){return m.coerce(v,w,g,y,B)}var v=p.rangeselector||{},w=a.newContainer(d,"rangeselector");k=h(v,w,{name:"buttons",handleItemDefaults:r,calendar:k});
t("visible",0<k.length)&&(f=q(d,e,f),t("x",f[0]),t("y",f[1]),m.noneOrAll(p,d,["x","y"]),t("xanchor"),t("yanchor"),m.coerceFont(t,"font",e.font),p=t("bgcolor"),t("activecolor",l.contrast(p,n.lightAmount,n.darkAmount)),t("bordercolor"),t("borderwidth"))}},{"../../lib":778,"../../plot_api/plot_template":817,"../../plots/array_container_defaults":823,"../color":643,"./attributes":706,"./constants":707}],709:[function(b,N,I){function r(C){C=w.list(C,"x",!0);for(var u=[],D=0;D<C.length;D++){var G=C[D];
G.rangeselector&&G.rangeselector.visible&&u.push(G)}return u}function q(C){return C._id}function m(C,u,D){if("all"===u.step)return!0===C.autorange;u=Object.keys(D);return C.range[0]===D[u[0]]&&C.range[1]===D[u[1]]}function l(C,u,D){C=k.ensureSingle(C,"rect","selector-rect",function(G){G.attr("shape-rendering","crispEdges")});C.attr({rx:z.rx,ry:z.ry});C.call(e.stroke,u.bordercolor).call(e.fill,D._isActive||D._isHovered?u.activecolor:u.bgcolor).style("stroke-width",u.borderwidth+"px")}function a(C,
u,D,G){k.ensureSingle(C,"text","selector-text",function(J){J.attr("text-anchor","middle")}).call(f.font,u.font).text(h(D,G._fullLayout._meta)).call(function(J){v.convertToTspans(J,G)})}function h(C,u){return C.label?u?k.templateString(C.label,u):C.label:"all"===C.step?"all":C.count+C.step.charAt(0)}function g(C,u,D,G,J){var L=0,K=0,H=D.borderwidth;u.each(function(){var T=n.select(this).select(".selector-text");T=Math.max(D.font.size*y*v.lineCount(T),16)+3;K=Math.max(K,T)});u.each(function(){var T=
n.select(this),O=T.select(".selector-rect"),U=T.select(".selector-text"),S=U.node()&&f.bBox(U.node()).width,X=D.font.size*y,ba=v.lineCount(U);S=Math.max(S+10,z.minButtonWidth);T.attr("transform",t(H+L,H));O.attr({x:0,y:0,width:S,height:K});v.positionText(U,S/2,K/2-(ba-1)*X/2+3);L+=S+5});var Q=C._fullLayout._size;u=Q.l+Q.w*D.x;Q=Q.t+Q.h*(1-D.y);var M="left";k.isRightAnchor(D)&&(u-=L,M="right");k.isCenterAnchor(D)&&(u-=L/2,M="center");var P="top";k.isBottomAnchor(D)&&(Q-=K,P="bottom");k.isMiddleAnchor(D)&&
(Q-=K/2,P="middle");L=Math.ceil(L);K=Math.ceil(K);u=Math.round(u);Q=Math.round(Q);d.autoMargin(C,G+"-range-selector",{x:D.x,y:D.y,l:L*B[M],r:L*A[M],b:K*A[P],t:K*B[P]});J.attr("transform",t(u,Q))}var n=b("d3"),p=b("../../registry"),d=b("../../plots/plots"),e=b("../color"),f=b("../drawing"),k=b("../../lib"),t=k.strTranslate,v=b("../../lib/svg_text_utils"),w=b("../../plots/cartesian/axis_ids");I=b("../../constants/alignment");var y=I.LINE_SPACING,B=I.FROM_TL,A=I.FROM_BR,z=b("./constants"),E=b("./get_update_object");
N.exports=function(C){var u=C._fullLayout._infolayer.selectAll(".rangeselector").data(r(C),q);u.enter().append("g").classed("rangeselector",!0);u.exit().remove();u.style({cursor:"pointer","pointer-events":"all"});u.each(function(D){var G=n.select(this),J=D.rangeselector,L=G.selectAll("g.button").data(k.filterVisible(J.buttons));L.enter().append("g").classed("button",!0);L.exit().remove();L.each(function(K){var H=n.select(this),Q=E(D,K);K._isActive=m(D,K,Q);H.call(l,J,K);H.call(a,J,K,C);H.on("click",
function(){C._dragged||p.call("_guiRelayout",C,Q)});H.on("mouseover",function(){K._isHovered=!0;H.call(l,J,K)});H.on("mouseout",function(){K._isHovered=!1;H.call(l,J,K)})});g(C,L,J,D._name,G)})}},{"../../constants/alignment":745,"../../lib":778,"../../lib/svg_text_utils":803,"../../plots/cartesian/axis_ids":831,"../../plots/plots":891,"../../registry":911,"../color":643,"../drawing":665,"./constants":707,"./get_update_object":710,d3:169}],710:[function(b,N,I){var r=b("d3");N.exports=function(q,m){var l=
q._name,a={};if("all"===m.step)a[l+".autorange"]=!0;else{var h=q.range,g=new Date(q.r2l(h[1])),n=m.step,p=m.count;switch(m.stepmode){case "backward":var d=q.l2r(+r.time[n].utc.offset(g,-p));break;case "todate":m=r.time[n].utc.offset(g,-p),d=q.l2r(+r.time[n].utc.ceil(m))}q=[d,h[1]];a[l+".range[0]"]=q[0];a[l+".range[1]"]=q[1]}return a}},{d3:169}],711:[function(b,N,I){N.exports={moduleType:"component",name:"rangeselector",schema:{subplots:{xaxis:{rangeselector:b("./attributes")}}},layoutAttributes:b("./attributes"),
handleDefaults:b("./defaults"),draw:b("./draw")}},{"./attributes":706,"./defaults":708,"./draw":709}],712:[function(b,N,I){b=b("../color/attributes");N.exports={bgcolor:{valType:"color",dflt:b.background,editType:"plot"},bordercolor:{valType:"color",dflt:b.defaultLine,editType:"plot"},borderwidth:{valType:"integer",dflt:0,min:0,editType:"plot"},autorange:{valType:"boolean",dflt:!0,editType:"calc",impliedEdits:{"range[0]":void 0,"range[1]":void 0}},range:{valType:"info_array",items:[{valType:"any",
editType:"calc",impliedEdits:{"^autorange":!1}},{valType:"any",editType:"calc",impliedEdits:{"^autorange":!1}}],editType:"calc",impliedEdits:{autorange:!1}},thickness:{valType:"number",dflt:.15,min:0,max:1,editType:"plot"},visible:{valType:"boolean",dflt:!0,editType:"calc"},editType:"calc"}},{"../color/attributes":642}],713:[function(b,N,I){var r=b("../../plots/cartesian/axis_ids").list,q=b("../../plots/cartesian/autorange").getAutoRange,m=b("./constants");N.exports=function(l){for(var a=r(l,"x",
!0),h=0;h<a.length;h++){var g=a[h],n=g[m.name];n&&n.visible&&n.autorange&&(n._input.autorange=!0,n._input.range=n.range=q(l,g))}}},{"../../plots/cartesian/autorange":827,"../../plots/cartesian/axis_ids":831,"./constants":714}],714:[function(b,N,I){N.exports={name:"rangeslider",containerClassName:"rangeslider-container",bgClassName:"rangeslider-bg",rangePlotClassName:"rangeslider-rangeplot",maskMinClassName:"rangeslider-mask-min",maskMaxClassName:"rangeslider-mask-max",slideBoxClassName:"rangeslider-slidebox",
grabberMinClassName:"rangeslider-grabber-min",grabAreaMinClassName:"rangeslider-grabarea-min",handleMinClassName:"rangeslider-handle-min",grabberMaxClassName:"rangeslider-grabber-max",grabAreaMaxClassName:"rangeslider-grabarea-max",handleMaxClassName:"rangeslider-handle-max",maskMinOppAxisClassName:"rangeslider-mask-min-opp-axis",maskMaxOppAxisClassName:"rangeslider-mask-max-opp-axis",maskColor:"rgba(0,0,0,0.4)",maskOppAxisColor:"rgba(0,0,0,0.2)",slideBoxFill:"transparent",slideBoxCursor:"ew-resize",
grabAreaFill:"transparent",grabAreaCursor:"col-resize",grabAreaWidth:10,handleWidth:4,handleRadius:1,handleStrokeWidth:1,extraPad:15}},{}],715:[function(b,N,I){var r=b("../../lib"),q=b("../../plot_api/plot_template"),m=b("../../plots/cartesian/axis_ids"),l=b("./attributes"),a=b("./oppaxis_attributes");N.exports=function(h,g,n){function p(B,A){return r.coerce(f,k,l,B,A)}function d(B,A){return r.coerce(v,w,a,B,A)}h=h[n];var e=g[n];if(h.rangeslider||g._requestRangeslider[e._id]){r.isPlainObject(h.rangeslider)||
(h.rangeslider={});var f=h.rangeslider,k=q.newContainer(e,"rangeslider");if(p("visible")){p("bgcolor",g.plot_bgcolor);p("bordercolor");p("borderwidth");p("thickness");p("autorange",!e.isValidRange(f.range));p("range");if(h=g._subplots)for(h=h.cartesian.filter(function(B){return B.substr(0,B.indexOf("y"))===m.name2id(n)}).map(function(B){return B.substr(B.indexOf("y"),B.length)}),h=r.simpleMap(h,m.id2name),e=0;e<h.length;e++){var t=h[e];var v=f[t]||{};var w=q.newContainer(k,t,"yaxis");t=g[t];var y;
v.range&&t.isValidRange(v.range)&&(y="fixed");"match"!==d("rangemode",y)&&d("range",t.range.slice())}k._input=f}}}},{"../../lib":778,"../../plot_api/plot_template":817,"../../plots/cartesian/axis_ids":831,"./attributes":712,"./oppaxis_attributes":719}],716:[function(b,N,I){function r(u,D,G,J){function L(){function M(ia){var ja=+(ia.clientX||ia.touches[0].clientX)-U;switch(O){case K:var la="ew-resize";ia=X+ja;ja=ba+ja;break;case H:la="col-resize";ia=X+ja;ja=ba;break;case Q:la="col-resize";ia=X;ja=
ba+ja;break;default:la="ew-resize",ia=S,ja=S+ja}if(ja<ia){var da=ja;ja=ia;ia=da}J._pixelMin=ia;J._pixelMax=ja;E(d.select(ca),la);q(u,D,G,J)}function P(){ca.removeEventListener("mousemove",M);ca.removeEventListener("mouseup",P);this.removeEventListener("touchmove",M);this.removeEventListener("touchend",P);k.removeElement(ca)}var T=d.event,O=T.target,U=T.clientX||T.touches[0].clientX,S=U-u.node().getBoundingClientRect().left,X=J.d2p(G._rl[0]),ba=J.d2p(G._rl[1]),ca=z.coverSlip();this.addEventListener("touchmove",
M);this.addEventListener("touchend",P);ca.addEventListener("mousemove",M);ca.addEventListener("mouseup",P)}if(!D._context.staticPlot){var K=u.select("rect."+C.slideBoxClassName).node(),H=u.select("rect."+C.grabAreaMinClassName).node(),Q=u.select("rect."+C.grabAreaMaxClassName).node();u.on("mousedown",L);u.on("touchstart",L)}}function q(u,D,G,J){var L=G.l2r(k.constrain(J.p2d(J._pixelMin),J._rl[0],J._rl[1])),K=G.l2r(k.constrain(J.p2d(J._pixelMax),J._rl[0],J._rl[1]));window.requestAnimationFrame(function(){e.call("_guiRelayout",
D,G._name+".range",[L,K])})}function m(u,D,G,J,L,K){D=C.handleWidth/2;var H=k.constrain(J.d2p(G._rl[0]),0,J._width);G=k.constrain(J.d2p(G._rl[1]),0,J._width);u.select("rect."+C.slideBoxClassName).attr("x",H).attr("width",G-H);u.select("rect."+C.maskMinClassName).attr("width",H);u.select("rect."+C.maskMaxClassName).attr("x",G).attr("width",J._width-G);"match"!==K.rangemode&&(K=J._height-k.constrain(J.d2pOppAxis(L._rl[1]),0,J._height),L=J._height-k.constrain(J.d2pOppAxis(L._rl[0]),0,J._height),u.select("rect."+
C.maskMinOppAxisClassName).attr("x",H).attr("height",K).attr("width",G-H),u.select("rect."+C.maskMaxOppAxisClassName).attr("x",H).attr("y",L).attr("height",J._height-L).attr("width",G-H),u.select("rect."+C.slideBoxClassName).attr("y",K).attr("height",L-K));L=Math.round(k.constrain(H-D,-D,J._width+D))-.5;J=Math.round(k.constrain(G-D,-D,J._width+D))+.5;u.select("g."+C.grabberMinClassName).attr("transform",t(L,.5));u.select("g."+C.grabberMaxClassName).attr("transform",t(J,.5))}function l(u,D,G,J){u=
k.ensureSingle(u,"rect",C.bgClassName,function(K){K.attr({x:0,y:0,"shape-rendering":"crispEdges"})});G=0===J.borderwidth%2?J.borderwidth:J.borderwidth-1;var L=-J._offsetShift;D=v.crispRound(D,J.borderwidth);u.attr({width:J._width+G,height:J._height+G,transform:t(L,L),fill:J.bgcolor,stroke:J.bordercolor,"stroke-width":D})}function a(u,D,G,J){k.ensureSingleById(D._fullLayout._topdefs,"clipPath",J._clipId,function(L){L.append("rect").attr({x:0,y:0})}).select("rect").attr({width:J._width,height:J._height})}
function h(u,D,G,J){var L=D.calcdata;u=u.selectAll("g."+C.rangePlotClassName).data(G._subplotsWith,k.identity);u.enter().append("g").attr("class",function(H){return C.rangePlotClassName+" "+H}).call(v.setClipUrl,J._clipId,D);u.order();u.exit().remove();var K;u.each(function(H,Q){var M=d.select(this);Q=0===Q;var P=A.getFromId(D,H,"y"),T=P._name,O=J[T],U={data:[],layout:{xaxis:{type:G.type,domain:[0,1],range:J.range.slice(),calendar:G.calendar},width:J._width,height:J._height,margin:{t:0,b:0,l:0,r:0}},
_context:D._context};G.rangebreaks&&(U.layout.xaxis.rangebreaks=G.rangebreaks);U.layout[T]={type:P.type,domain:[0,1],range:"match"!==O.rangemode?O.range.slice():P.range.slice(),calendar:P.calendar};P.rangebreaks&&(U.layout[T].rangebreaks=P.rangebreaks);f.supplyDefaults(U);P=U._fullLayout.xaxis;T=U._fullLayout[T];P.clearCalc();P.setScale();T.clearCalc();T.setScale();M={id:H,plotgroup:M,xaxis:P,yaxis:T,isRangePlot:!0};Q?K=M:(M.mainplot="xy",M.mainplotinfo=K);Q=B;T=Q.rangePlot;U=[];for(P=0;P<L.length;P++){O=
L[P];var S=O[0].trace;S.xaxis+S.yaxis===H&&U.push(O)}T.call(Q,D,M,U)})}function g(u,D,G,J,L){k.ensureSingle(u,"rect",C.maskMinClassName,function(K){K.attr({x:0,y:0,"shape-rendering":"crispEdges"})}).attr("height",J._height).call(w.fill,C.maskColor);k.ensureSingle(u,"rect",C.maskMaxClassName,function(K){K.attr({y:0,"shape-rendering":"crispEdges"})}).attr("height",J._height).call(w.fill,C.maskColor);"match"!==L.rangemode&&(k.ensureSingle(u,"rect",C.maskMinOppAxisClassName,function(K){K.attr({y:0,"shape-rendering":"crispEdges"})}).attr("width",
J._width).call(w.fill,C.maskOppAxisColor),k.ensureSingle(u,"rect",C.maskMaxOppAxisClassName,function(K){K.attr({y:0,"shape-rendering":"crispEdges"})}).attr("width",J._width).style("border-top",C.maskOppBorder).call(w.fill,C.maskOppAxisColor))}function n(u,D,G,J){D._context.staticPlot||k.ensureSingle(u,"rect",C.slideBoxClassName,function(L){L.attr({y:0,cursor:C.slideBoxCursor,"shape-rendering":"crispEdges"})}).attr({height:J._height,fill:C.slideBoxFill})}function p(u,D,G,J){G=k.ensureSingle(u,"g",
C.grabberMinClassName);u=k.ensureSingle(u,"g",C.grabberMaxClassName);var L={x:0,width:C.handleWidth,rx:C.handleRadius,fill:w.background,stroke:w.defaultLine,"stroke-width":C.handleStrokeWidth,"shape-rendering":"crispEdges"},K={y:Math.round(J._height/4),height:Math.round(J._height/2)};k.ensureSingle(G,"rect",C.handleMinClassName,function(Q){Q.attr(L)}).attr(K);k.ensureSingle(u,"rect",C.handleMaxClassName,function(Q){Q.attr(L)}).attr(K);var H={width:C.grabAreaWidth,x:0,y:0,fill:C.grabAreaFill,cursor:D._context.staticPlot?
void 0:C.grabAreaCursor};k.ensureSingle(G,"rect",C.grabAreaMinClassName,function(Q){Q.attr(H)}).attr("height",J._height);k.ensureSingle(u,"rect",C.grabAreaMaxClassName,function(Q){Q.attr(H)}).attr("height",J._height)}var d=b("d3"),e=b("../../registry"),f=b("../../plots/plots"),k=b("../../lib"),t=k.strTranslate,v=b("../drawing"),w=b("../color"),y=b("../titles"),B=b("../../plots/cartesian"),A=b("../../plots/cartesian/axis_ids"),z=b("../dragelement"),E=b("../../lib/setcursor"),C=b("./constants");N.exports=
function(u){for(var D=u._fullLayout,G=D._rangeSliderData,J=0;J<G.length;J++){var L=G[J][C.name];L._clipId=L._id+"-"+D._uid}J=D._infolayer.selectAll("g."+C.containerClassName).data(G,function(K){return K._name});J.exit().each(function(K){D._topdefs.select("#"+K[C.name]._clipId).remove()}).remove();0!==G.length&&(J.enter().append("g").classed(C.containerClassName,!0).attr("pointer-events","all"),J.each(function(K){var H=d.select(this),Q=K[C.name],M=D[A.id2name(K.anchor)],P=Q[A.id2name(K.anchor)];if(Q.range){var T=
k.simpleMap(Q.range,K.r2l),O=k.simpleMap(K.range,K.r2l);Q.range=Q._input.range=k.simpleMap(O[0]<O[1]?[Math.min(T[0],O[0]),Math.max(T[1],O[1])]:[Math.max(T[0],O[0]),Math.min(T[1],O[1])],K.l2r)}K.cleanRange("rangeslider.range");O=D._size;var U=K.domain;Q._width=O.w*(U[1]-U[0]);T=Math.round(O.t+O.h*(1-K._counterDomainMin)+("bottom"===K.side?K._depth:0)+Q._offsetShift+C.extraPad);H.attr("transform",t(Math.round(O.l+O.w*U[0]),T));Q._rl=k.simpleMap(Q.range,K.r2l);var S=Q._rl[0];O=Q._rl[1];var X=O-S;Q.p2d=
function(sa){return sa/Q._width*X+S};Q.d2p=function(sa){return(sa-S)/X*Q._width};if(K.rangebreaks){var ba=K.locateBreaks(S,O);if(ba.length){var ca=0;for(U=0;U<ba.length;U++){var ia=ba[U];ca+=ia.max-ia.min}var ja=Q._width/(O-S-ca),la=[-ja*S];for(U=0;U<ba.length;U++)ia=ba[U],la.push(la[la.length-1]-ja*(ia.max-ia.min));Q.d2p=function(sa){for(var ma=la[0],qa=0;qa<ba.length;qa++){var pa=ba[qa];if(sa>=pa.max)ma=la[qa+1];else if(sa<pa.min)break}return ma+ja*sa};for(U=0;U<ba.length;U++)ia=ba[U],ia.pmin=Q.d2p(ia.min),
ia.pmax=Q.d2p(ia.max);Q.p2d=function(sa){for(var ma=la[0],qa=0;qa<ba.length;qa++){var pa=ba[qa];if(sa>=pa.pmax)ma=la[qa+1];else if(sa<pa.pmin)break}return(sa-ma)/ja}}}if("match"!==P.rangemode){var da=M.r2l(P.range[0]),oa=M.r2l(P.range[1])-da;Q.d2pOppAxis=function(sa){return(sa-da)/oa*Q._height}}H.call(l,u,K,Q).call(a,u,K,Q).call(h,u,K,Q).call(g,u,K,Q,P).call(n,u,K,Q).call(p,u,K,Q);r(H,u,K,Q);m(H,u,K,Q,M,P);"bottom"===K.side&&y.draw(u,K._id+"title",{propContainer:K,propName:K._name+".title",placeholder:D._dfltTitle.x,
attributes:{x:K._offset+K._length/2,y:T+Q._height+Q._offsetShift+10+1.5*K.title.font.size,"text-anchor":"middle"}})}))}},{"../../lib":778,"../../lib/setcursor":799,"../../plots/cartesian":841,"../../plots/cartesian/axis_ids":831,"../../plots/plots":891,"../../registry":911,"../color":643,"../dragelement":662,"../drawing":665,"../titles":738,"./constants":714,d3:169}],717:[function(b,N,I){function r(g){return(g=g&&g[h])&&g.visible}var q=b("../../plots/cartesian/axis_ids"),m=b("../../lib/svg_text_utils"),
l=b("./constants"),a=b("../../constants/alignment").LINE_SPACING,h=l.name;I.isVisible=r;I.makeData=function(g){var n=q.list({_fullLayout:g},"x",!0),p=g.margin,d=[];if(!g._has("gl2d"))for(var e=0;e<n.length;e++){var f=n[e];if(r(f)){d.push(f);var k=f[h];k._id=h+f._id;k._height=(g.height-p.b-p.t)*k.thickness;k._offsetShift=Math.floor(k.borderwidth/2)}}g._rangeSliderData=d};I.autoMarginOpts=function(g,n){g=g._fullLayout;var p=n[h],d=n._id.charAt(0),e=0,f=0;"bottom"===n.side&&(e=n._depth,n.title.text!==
g._dfltTitle[d]&&(f=1.5*n.title.font.size+10+p._offsetShift,d=(n.title.text.match(m.BR_TAG_ALL)||[]).length,f+=d*n.title.font.size*a));return{x:0,y:n._counterDomainMin,l:0,r:0,t:0,b:p._height+e+Math.max(g.margin.b,f),pad:l.extraPad+2*p._offsetShift}}},{"../../constants/alignment":745,"../../lib/svg_text_utils":803,"../../plots/cartesian/axis_ids":831,"./constants":714}],718:[function(b,N,I){I=b("../../lib");var r=b("./attributes"),q=b("./oppaxis_attributes"),m=b("./helpers");N.exports={moduleType:"component",
name:"rangeslider",schema:{subplots:{xaxis:{rangeslider:I.extendFlat({},r,{yaxis:q})}}},layoutAttributes:b("./attributes"),handleDefaults:b("./defaults"),calcAutorange:b("./calc_autorange"),draw:b("./draw"),isVisible:m.isVisible,makeData:m.makeData,autoMarginOpts:m.autoMarginOpts}},{"../../lib":778,"./attributes":712,"./calc_autorange":713,"./defaults":715,"./draw":716,"./helpers":717,"./oppaxis_attributes":719}],719:[function(b,N,I){N.exports={_isSubplotObj:!0,rangemode:{valType:"enumerated",values:["auto",
"fixed","match"],dflt:"match",editType:"calc"},range:{valType:"info_array",items:[{valType:"any",editType:"plot"},{valType:"any",editType:"plot"}],editType:"plot"},editType:"calc"}},{}],720:[function(b,N,I){I=b("../annotations/attributes");var r=b("../../traces/scatter/attributes").line,q=b("../drawing/attributes").dash,m=b("../../lib/extend").extendFlat,l=b("../../plot_api/plot_template").templatedArray;b("../../constants/axis_placeable_objects");N.exports=l("shape",{visible:{valType:"boolean",dflt:!0,
editType:"calc+arraydraw"},type:{valType:"enumerated",values:["circle","rect","path","line"],editType:"calc+arraydraw"},layer:{valType:"enumerated",values:["below","above"],dflt:"above",editType:"arraydraw"},xref:m({},I.xref,{}),xsizemode:{valType:"enumerated",values:["scaled","pixel"],dflt:"scaled",editType:"calc+arraydraw"},xanchor:{valType:"any",editType:"calc+arraydraw"},x0:{valType:"any",editType:"calc+arraydraw"},x1:{valType:"any",editType:"calc+arraydraw"},yref:m({},I.yref,{}),ysizemode:{valType:"enumerated",
values:["scaled","pixel"],dflt:"scaled",editType:"calc+arraydraw"},yanchor:{valType:"any",editType:"calc+arraydraw"},y0:{valType:"any",editType:"calc+arraydraw"},y1:{valType:"any",editType:"calc+arraydraw"},path:{valType:"string",editType:"calc+arraydraw"},opacity:{valType:"number",min:0,max:1,dflt:1,editType:"arraydraw"},line:{color:m({},r.color,{editType:"arraydraw"}),width:m({},r.width,{editType:"calc+arraydraw"}),dash:m({},q,{editType:"arraydraw"}),editType:"calc+arraydraw"},fillcolor:{valType:"color",
dflt:"rgba(0,0,0,0)",editType:"arraydraw"},fillrule:{valType:"enumerated",values:["evenodd","nonzero"],dflt:"evenodd",editType:"arraydraw"},editable:{valType:"boolean",dflt:!1,editType:"calc+arraydraw"},editType:"arraydraw"})},{"../../constants/axis_placeable_objects":746,"../../lib/extend":768,"../../plot_api/plot_template":817,"../../traces/scatter/attributes":1187,"../annotations/attributes":626,"../drawing/attributes":664}],721:[function(b,N,I){function r(g,n,p,d,e,f){g/=2;return"pixel"===n?(p=
e?h.extractPathCoords(e,f?a.paramIsY:a.paramIsX):[p,d],n=m.aggNums(Math.max,null,p),p=m.aggNums(Math.min,null,p),p=0>p?Math.abs(p)+g:g,n=0<n?n+g:g,{ppad:g,ppadplus:f?p:n,ppadminus:f?n:p}):{ppad:g}}function q(g,n,p,d,e){var f="category"===g.type||"multicategory"===g.type?g.r2c:g.d2c;if(void 0!==n)return[f(n),f(p)];if(d){n=Infinity;p=-Infinity;d=d.match(a.segmentRE);var k;"date"===g.type&&(f=h.decodeDate(f));for(g=0;g<d.length;g++){var t=d[g];t=e[t.charAt(0)].drawn;void 0!==t&&(!(k=d[g].substr(1).match(a.paramRE))||
k.length<t||(t=f(k[t]),t<n&&(n=t),t>p&&(p=t)))}if(p>=n)return[n,p]}}var m=b("../../lib"),l=b("../../plots/cartesian/axes"),a=b("./constants"),h=b("./helpers");N.exports=function(g){var n=m.filterVisible(g._fullLayout.shapes);if(n.length&&g._fullData.length)for(var p=0;p<n.length;p++){var d=n[p];d._extremes={};var e=l.getRefType(d.xref);var f=l.getRefType(d.yref);if("paper"!==d.xref&&"domain"!==e){var k="pixel"===d.xsizemode?d.xanchor:d.x0;var t="pixel"===d.xsizemode?d.xanchor:d.x1;e=l.getFromId(g,
d.xref);(k=q(e,k,t,d.path,a.paramIsX))&&(d._extremes[e._id]=l.findExtremes(e,k,r(d.line.width,d.xsizemode,d.x0,d.x1,d.path,!1)))}"paper"!==d.yref&&"domain"!==f&&(f="pixel"===d.ysizemode?d.yanchor:d.y0,k="pixel"===d.ysizemode?d.yanchor:d.y1,e=l.getFromId(g,d.yref),(k=q(e,f,k,d.path,a.paramIsY))&&(d._extremes[e._id]=l.findExtremes(e,k,r(d.line.width,d.ysizemode,d.y0,d.y1,d.path,!0))))}}},{"../../lib":778,"../../plots/cartesian/axes":828,"./constants":722,"./helpers":731}],722:[function(b,N,I){N.exports=
{segmentRE:/[MLHVQCTSZ][^MLHVQCTSZ]*/g,paramRE:/[^\s,]+/g,paramIsX:{M:{0:!0,drawn:0},L:{0:!0,drawn:0},H:{0:!0,drawn:0},V:{},Q:{0:!0,2:!0,drawn:2},C:{0:!0,2:!0,4:!0,drawn:4},T:{0:!0,drawn:0},S:{0:!0,2:!0,drawn:2},Z:{}},paramIsY:{M:{1:!0,drawn:1},L:{1:!0,drawn:1},H:{},V:{0:!0,drawn:0},Q:{1:!0,3:!0,drawn:3},C:{1:!0,3:!0,5:!0,drawn:5},T:{1:!0,drawn:1},S:{1:!0,3:!0,drawn:5},Z:{}},numParams:{M:2,L:2,H:1,V:1,Q:4,C:6,T:2,S:4,Z:0}}},{}],723:[function(b,N,I){function r(g,n,p){function d(J,L){return q.coerce(g,
n,a,J,L)}if(d("visible")){var e=d("path");e=d("type",e?"path":"rect");"path"!==n.type&&delete n.path;d("editable");d("layer");d("opacity");d("fillcolor");d("fillrule");d("line.width")&&(d("line.color"),d("line.dash"));for(var f=d("xsizemode"),k=d("ysizemode"),t=["x","y"],v=0;2>v;v++){var w=t[v],y=w+"anchor",B="x"===w?f:k,A={_fullLayout:p},z=m.coerceRef(g,n,A,w,void 0,"paper");if("range"===m.getRefType(z)){var E=m.getFromId(A,z);E._shapeIndices.push(n._index);var C=h.rangeToShapePosition(E);E=h.shapePositionToRange(E)}else E=
C=q.identity;if("path"!==e){var u=w+"0";w+="1";var D=g[u],G=g[w];g[u]=E(g[u],!0);g[w]=E(g[w],!0);"pixel"===B?(d(u,0),d(w,10)):(m.coercePosition(n,A,d,z,u,.25),m.coercePosition(n,A,d,z,w,.75));n[u]=C(n[u]);n[w]=C(n[w]);g[u]=D;g[w]=G}"pixel"===B&&(B=g[y],g[y]=E(g[y],!0),m.coercePosition(n,A,d,z,y,.25),n[y]=C(n[y]),g[y]=B)}"path"===e?d("path"):q.noneOrAll(g,n,["x0","x1","y0","y1"])}}var q=b("../../lib"),m=b("../../plots/cartesian/axes"),l=b("../../plots/array_container_defaults"),a=b("./attributes"),
h=b("./helpers");N.exports=function(g,n){l(g,n,{name:"shapes",handleItemDefaults:r})}},{"../../lib":778,"../../plots/array_container_defaults":823,"../../plots/cartesian/axes":828,"./attributes":720,"./helpers":731}],724:[function(b,N,I){function r(C){var u=C._fullLayout;u._shapeUpperLayer.selectAll("path").remove();u._shapeLowerLayer.selectAll("path").remove();for(var D in u._plots){var G=u._plots[D].shapelayer;G&&G.selectAll("path").remove()}for(D=0;D<u.shapes.length;D++)u.shapes[D].visible&&q(C,
D)}function q(C,u){function D(K){var H=a(C,J),Q={"data-index":u,"fill-rule":J.fillrule,d:H},M=J.opacity,P=J.fillcolor,T=J.line.width?J.line.color:"rgba(0,0,0,0)",O=J.line.width,U=J.line.dash;O||!0!==J.editable||(O=5,U="solid");var S="Z"!==H[H.length-1],X=!C._context.edits.shapePosition&&J.editable&&C._fullLayout._activeShapeIndex===u;X&&(P=S?"rgba(0,0,0,0)":C._fullLayout.activeshape.fillcolor,M=C._fullLayout.activeshape.opacity);var ba=K.append("path").attr(Q).style("opacity",M).call(v.stroke,T).call(v.fill,
P).call(w.dashLine,U,O);m(ba,C,J);if(X||C._context.edits.shapePosition)var ca=y(C.layout,"shapes",J);X?(ba.style({cursor:"move"}),K={element:ba.node(),plotinfo:L,gd:C,editHelpers:ca,isActiveShape:!0},H=f(H,C),k(H,ba,K)):C._context.edits.shapePosition?l(C,ba,J,u,K,ca):!0===J.editable&&ba.style("pointer-events",S||.5>=v.opacity(P)*M?"stroke":"all");ba.node().addEventListener("click",function(){a:{if(!C._context.edits.shapePosition){var ia=+ba.node().getAttribute("data-index");if(0<=ia){if(ia===C._fullLayout._activeShapeIndex){n(C);
ia=void 0;break a}C._fullLayout._activeShapeIndex=ia;C._fullLayout._deactivateShape=n;r(C)}}ia=void 0}return ia})}C._fullLayout._paperdiv.selectAll('.shapelayer [data-index\x3d"'+u+'"]').remove();var G=E.makeOptionsAndPlotinfo(C,u),J=G.options,L=G.plotinfo;J._input&&!1!==J.visible&&("below"!==J.layer?D(C._fullLayout._shapeUpperLayer):"paper"===J.xref||"paper"===J.yref?D(C._fullLayout._shapeLowerLayer):L._hadPlotinfo?D((L.mainplotinfo||L).shapelayer):D(C._fullLayout._shapeLowerLayer))}function m(C,
u,D){D=(D.xref+D.yref).replace(/paper/g,"").replace(/[xyz][1-9]* *domain/g,"");w.setClipUrl(C,D?"clip"+u._fullLayout._uid+D:null,u)}function l(C,u,D,G,J,L){function K(){var xa=Math.max(D.line.width,10),Ea=J.append("g").attr("data-index",G);Ea.append("path").attr("d",u.attr("d")).style({cursor:"move","stroke-width":xa,"stroke-opacity":"0"});var Ia={"fill-opacity":"0"};xa=Math.max(xa/2,10);Ea.append("circle").attr({"data-line-point":"start-point",cx:T?fb(D.xanchor)+D.x0:fb(D.x0),cy:O?nb(D.yanchor)-
D.y0:nb(D.y0),r:xa}).style(Ia).classed("cursor-grab",!0);Ea.append("circle").attr({"data-line-point":"end-point",cx:T?fb(D.xanchor)+D.x1:fb(D.x1),cy:O?nb(D.yanchor)-D.y1:nb(D.y1),r:xa}).style(Ia).classed("cursor-grab",!0);return Ea}function H(xa){if(C._fullLayout._drawing)pb=null;else if(U)pb="path"===xa.target.tagName?"move":"start-point"===xa.target.attributes["data-line-point"].value?"resize-over-start-point":"resize-over-end-point";else{var Ea=jb.element.getBoundingClientRect(),Ia=Ea.right-Ea.left,
Oa=Ea.bottom-Ea.top,bb=xa.clientX-Ea.left;Ea=xa.clientY-Ea.top;xa=!S&&10<Ia&&10<Oa&&!xa.shiftKey?B.getCursor(bb/Ia,1-Ea/Oa):"move";A(u,xa);pb=xa.split("-")[0]}}function Q(xa,Ea){if("path"===D.type){var Ia=function(bb){return bb},Oa=Ia;T?X("xanchor",D.xanchor=cb(la+xa)):(Oa=function(bb){return cb(fb(bb)+xa)},Ca&&"date"===Ca.type&&(Oa=E.encodeDate(Oa)));O?X("yanchor",D.yanchor=$a(da+Ea)):(Ia=function(bb){return $a(nb(bb)+Ea)},Ua&&"date"===Ua.type&&(Ia=E.encodeDate(Ia)));X("path",D.path=g(va,Oa,Ia))}else T?
X("xanchor",D.xanchor=cb(la+xa)):(X("x0",D.x0=cb(ba+xa)),X("x1",D.x1=cb(ia+xa))),O?X("yanchor",D.yanchor=$a(da+Ea)):(X("y0",D.y0=$a(ca+Ea)),X("y1",D.y1=$a(ja+Ea)));u.attr("d",a(C,D));P(J,D)}function M(xa,Ea){if(S){var Ia=function(Ta){return Ta},Oa=Ia;T?X("xanchor",D.xanchor=cb(la+xa)):(Oa=function(Ta){return cb(fb(Ta)+xa)},Ca&&"date"===Ca.type&&(Oa=E.encodeDate(Oa)));O?X("yanchor",D.yanchor=$a(da+Ea)):(Ia=function(Ta){return $a(nb(Ta)+Ea)},Ua&&"date"===Ua.type&&(Ia=E.encodeDate(Ia)));X("path",D.path=
g(va,Oa,Ia))}else if(U)"resize-over-start-point"===pb?(Oa=ba+xa,Ia=O?ca-Ea:ca+Ea,X("x0",D.x0=T?Oa:cb(Oa)),X("y0",D.y0=O?Ia:$a(Ia))):"resize-over-end-point"===pb&&(Oa=ia+xa,Ia=O?ja-Ea:ja+Ea,X("x1",D.x1=T?Oa:cb(Oa)),X("y1",D.y1=O?Ia:$a(Ia)));else{Oa=-1!==pb.indexOf("n");Ia=-1!==pb.indexOf("s");var bb=-1!==pb.indexOf("w"),Xa=-1!==pb.indexOf("e"),tb=Oa?oa+Ea:oa,Ka=Ia?sa+Ea:sa;bb=bb?ma+xa:ma;Xa=Xa?qa+xa:qa;O&&(Oa&&(tb=oa-Ea),Ia&&(Ka=sa-Ea));if(!O&&10<Ka-tb||O&&10<tb-Ka)X(pa,D[pa]=O?tb:$a(tb)),X(na,D[na]=
O?Ka:$a(Ka));10<Xa-bb&&(X(ka,D[ka]=T?bb:cb(bb)),X(ua,D[ua]=T?Xa:cb(Xa)))}u.attr("d",a(C,D));P(J,D)}function P(xa,Ea){if(T||O){var Ia="path"!==Ea.type;xa=xa.selectAll(".visual-cue").data([0]);xa.enter().append("path").attr({fill:"#fff","fill-rule":"evenodd",stroke:"#000","stroke-width":1}).classed("visual-cue",!0);var Oa=fb(T?Ea.xanchor:d.midRange(Ia?[Ea.x0,Ea.x1]:E.extractPathCoords(Ea.path,z.paramIsX)));Ea=nb(O?Ea.yanchor:d.midRange(Ia?[Ea.y0,Ea.y1]:E.extractPathCoords(Ea.path,z.paramIsY)));Oa=E.roundPositionForSharpStrokeRendering(Oa,
1);Ea=E.roundPositionForSharpStrokeRendering(Ea,1);T&&O?xa.attr("d","M"+(Oa-1-1)+","+(Ea-1-1)+"h-8v2h8 v8h2v-8 h8v-2h-8 v-8h-2 Z"):T?xa.attr("d","M"+(Oa-1-1)+","+(Ea-9-1)+"v18 h2 v-18 Z"):xa.attr("d","M"+(Oa-9-1)+","+(Ea-1-1)+"h18 v2 h-18 Z")}}var T="pixel"===D.xsizemode,O="pixel"===D.ysizemode,U="line"===D.type,S="path"===D.type,X=L.modifyItem,ba,ca,ia,ja,la,da,oa,sa,ma,qa,pa,na,ka,ua,va,Ca=e.getFromId(C,D.xref),Ma=e.getRefType(D.xref),Ua=e.getFromId(C,D.yref),eb=e.getRefType(D.yref),fb=E.getDataToPixel(C,
Ca,!1,Ma),nb=E.getDataToPixel(C,Ua,!0,eb),cb=E.getPixelToData(C,Ca,!1,Ma),$a=E.getPixelToData(C,Ua,!0,eb);Ma=U?K():u;var jb={element:Ma.node(),gd:C,prepFn:function(xa){if(!C._fullLayout._drawing){T&&(la=fb(D.xanchor));O&&(da=nb(D.yanchor));"path"===D.type?va=D.path:(ba=T?D.x0:fb(D.x0),ca=O?D.y0:nb(D.y0),ia=T?D.x1:fb(D.x1),ja=O?D.y1:nb(D.y1));ba<ia?(ma=ba,ka="x0",qa=ia,ua="x1"):(ma=ia,ka="x1",qa=ba,ua="x0");!O&&ca<ja||O&&ca>ja?(oa=ca,pa="y0",sa=ja,na="y1"):(oa=ja,pa="y1",sa=ca,na="y0");H(xa);P(J,D);
var Ea=D.xref,Ia=D.yref,Oa=e.getFromId(C,Ea),bb=e.getFromId(C,Ia),Xa="";"paper"===Ea||Oa.autorange||(Xa+=Ea);"paper"===Ia||bb.autorange||(Xa+=Ia);w.setClipUrl(u,Xa?"clip"+C._fullLayout._uid+Xa:null,C);jb.moveFn="move"===pb?Q:M;jb.altKey=xa.altKey}},doneFn:function(){C._fullLayout._drawing||(A(u),J.selectAll(".visual-cue").remove(),m(u,C,D),p.call("_guiRelayout",C,L.getUpdateObj()))},clickFn:function(){C._fullLayout._drawing||J.selectAll(".visual-cue").remove()}},pb;B.init(jb);Ma.node().onmousemove=
H}function a(C,u){var D=u.type,G=e.getRefType(u.xref),J=e.getRefType(u.yref),L=e.getFromId(C,u.xref),K=e.getFromId(C,u.yref),H=C._fullLayout._size;if(L)if("domain"===G)C=function(T){return L._offset+L._length*T};else{var Q=E.shapePositionToRange(L);C=function(T){return L._offset+L.r2p(Q(T,!0))}}else C=function(T){return H.l+H.w*T};if(K)if("domain"===J)G=function(T){return K._offset+K._length*(1-T)};else{var M=E.shapePositionToRange(K);G=function(T){return K._offset+K.r2p(M(T,!0))}}else G=function(T){return H.t+
H.h*(1-T)};if("path"===D)return L&&"date"===L.type&&(C=E.decodeDate(C)),K&&"date"===K.type&&(G=E.decodeDate(G)),h(u,C,G);if("pixel"===u.xsizemode){C=C(u.xanchor);J=C+u.x0;var P=C+u.x1}else J=C(u.x0),P=C(u.x1);"pixel"===u.ysizemode?(G=G(u.yanchor),C=G-u.y0,u=G-u.y1):(C=G(u.y0),u=G(u.y1));if("line"===D)return"M"+J+","+C+"L"+P+","+u;if("rect"===D)return"M"+J+","+C+"H"+P+"V"+u+"H"+J+"Z";D=(J+P)/2;u=(C+u)/2;J=Math.abs(D-J);C=Math.abs(u-C);G="A"+J+","+C;J=D+J+","+u;return"M"+J+G+" 0 1,1 "+(D+","+(u-C))+
G+" 0 0,1 "+J+"Z"}function h(C,u,D){var G=C.xsizemode,J=C.ysizemode,L=C.xanchor,K=C.yanchor;return C.path.replace(z.segmentRE,function(H){var Q=0,M=H.charAt(0),P=z.paramIsX[M],T=z.paramIsY[M],O=z.numParams[M],U=H.substr(1).replace(z.paramRE,function(S){P[Q]?S="pixel"===G?u(L)+Number(S):u(S):T[Q]&&(S="pixel"===J?D(K)-Number(S):D(S));Q++;Q>O&&(S="X");return S});Q>O&&(U=U.replace(/[\s,]*X.*/,""),d.log("Ignoring extra params in segment "+H));return M+U})}function g(C,u,D){return C.replace(z.segmentRE,
function(G){var J=0,L=G.charAt(0),K=z.paramIsX[L],H=z.paramIsY[L],Q=z.numParams[L];G=G.substr(1).replace(z.paramRE,function(M){if(J>=Q)return M;K[J]?M=u(M):H[J]&&(M=D(M));J++;return M});return L+G})}function n(C){!C._context.edits.shapePosition&&0<=C._fullLayout._activeShapeIndex&&(t(C),delete C._fullLayout._activeShapeIndex,r(C))}var p=b("../../registry"),d=b("../../lib"),e=b("../../plots/cartesian/axes"),f=b("./draw_newshape/helpers").readPaths,k=b("./draw_newshape/display_outlines"),t=b("../../plots/cartesian/handle_outline").clearOutlineControllers,
v=b("../color"),w=b("../drawing"),y=b("../../plot_api/plot_template").arrayEditor,B=b("../dragelement"),A=b("../../lib/setcursor"),z=b("./constants"),E=b("./helpers");N.exports={draw:r,drawOne:q,eraseActiveShape:function(C){if(!C._context.edits.shapePosition){t(C);var u=C._fullLayout._activeShapeIndex,D=(C.layout||{}).shapes||[];if(u<D.length){for(var G=[],J=0;J<D.length;J++)J!==u&&G.push(D[J]);delete C._fullLayout._activeShapeIndex;p.call("_guiRelayout",C,{shapes:G})}}}}},{"../../lib":778,"../../lib/setcursor":799,
"../../plot_api/plot_template":817,"../../plots/cartesian/axes":828,"../../plots/cartesian/handle_outline":838,"../../registry":911,"../color":643,"../dragelement":662,"../drawing":665,"./constants":722,"./draw_newshape/display_outlines":728,"./draw_newshape/helpers":729,"./helpers":731}],725:[function(b,N,I){I=b("../../drawing/attributes").dash;b=b("../../../lib/extend").extendFlat;N.exports={newshape:{line:{color:{valType:"color",editType:"none"},width:{valType:"number",min:0,dflt:4,editType:"none"},
dash:b({},I,{dflt:"solid",editType:"none"}),editType:"none"},fillcolor:{valType:"color",dflt:"rgba(0,0,0,0)",editType:"none"},fillrule:{valType:"enumerated",values:["evenodd","nonzero"],dflt:"evenodd",editType:"none"},opacity:{valType:"number",min:0,max:1,dflt:1,editType:"none"},layer:{valType:"enumerated",values:["below","above"],dflt:"above",editType:"none"},drawdirection:{valType:"enumerated",values:["ortho","horizontal","vertical","diagonal"],dflt:"diagonal",editType:"none"},editType:"none"},
activeshape:{fillcolor:{valType:"color",dflt:"rgb(255,0,255)",editType:"none"},opacity:{valType:"number",min:0,max:1,dflt:.5,editType:"none"},editType:"none"}}},{"../../../lib/extend":768,"../../drawing/attributes":664}],726:[function(b,N,I){N.exports={CIRCLE_SIDES:32,i000:0,i090:8,i180:16,i270:24,cos45:Math.cos(Math.PI/4),sin45:Math.sin(Math.PI/4),SQRT2:Math.sqrt(2)}},{}],727:[function(b,N,I){var r=b("../../color");N.exports=function(q,m,l){l("newshape.drawdirection");l("newshape.layer");l("newshape.fillcolor");
l("newshape.fillrule");l("newshape.opacity");l("newshape.line.width")&&(l("newshape.line.color",r.contrast((q||{}).plot_bgcolor||"#FFF")),l("newshape.line.dash"));l("activeshape.fillcolor");l("activeshape.opacity")}},{"../../color":643}],728:[function(b,N,I){function r(t,v){for(var w=0;w<v.length;w++){var y=v[w];t[w]=[];for(var B=0;B<y.length;B++){t[w][B]=[];for(var A=0;A<y[B].length;A++)t[w][B][A]=y[B][A]}}return t}var q=b("../../dragelement"),m=b("../../dragelement/helpers").drawMode,l=b("../../../registry");
I=b("./constants");var a=I.i000,h=I.i090,g=I.i180,n=I.i270,p=b("../../../plots/cartesian/handle_outline").clearOutlineControllers;I=b("./helpers");var d=I.pointsShapeRectangle,e=I.pointsShapeEllipse,f=I.writePaths,k=b("./newshapes");N.exports=function A(v,w,y,B){function z(){A(v,w,y,B++);e(v[0])&&E({redrawing:!0})}function E(ba){y.isActiveShape=!1;var ca=k(w,y);Object.keys(ca).length&&l.call((ba||{}).redrawing?"relayout":"_guiRelayout",Q,ca)}function C(ba){O=+ba.srcElement.getAttribute("data-i");
U=+ba.srcElement.getAttribute("data-j");T[O][U].moveFn=u}function u(ba,ca){if(v.length){var ia=S[O][U][1],ja=S[O][U][2],la=v[O],da=la.length;if(d(la)){for(var oa=0;oa<da;oa++)if(oa!==U){var sa=la[oa];sa[1]===la[U][1]&&(sa[1]=ia+ba);sa[2]===la[U][2]&&(sa[2]=ja+ca)}la[U][1]=ia+ba;la[U][2]=ja+ca;if(!d(la))for(ba=0;ba<da;ba++)for(ca=0;ca<la[ba].length;ca++)la[ba][ca]=S[O][ba][ca]}else la[U][1]=ia+ba,la[U][2]=ja+ca;z()}}function D(){E()}function G(ba,ca){if(2===ba&&(O=+ca.srcElement.getAttribute("data-i"),
U=+ca.srcElement.getAttribute("data-j"),ba=v[O],!d(ba)&&!e(ba)&&v.length&&v[O]&&v[O].length)){ba=[];for(ca=0;ca<v[O].length;ca++)ca!==U&&ba.push(v[O][ca]);1<ba.length&&(2!==ba.length||"Z"!==ba[1][0])&&(0===U&&(ba[0][0]="M"),v[O]=ba,z(),E())}}function J(ba){T=[];for(var ca=0;ca<v.length;ca++){var ia=v[ca],ja=!d(ia)&&e(ia);T[ca]=[];for(var la=0;la<ia.length;la++)if("Z"!==ia[la][0]&&(!ja||la===a||la===h||la===g||la===n)){var da=ia[la][1],oa=ia[la][2];da=ba.append("circle").classed("cursor-grab",!0).attr("data-i",
ca).attr("data-j",la).attr("cx",da).attr("cy",oa).attr("r",4).style({"mix-blend-mode":"luminosity",fill:"black",stroke:"white","stroke-width":1});T[ca][la]={element:da.node(),gd:Q,prepFn:C,doneFn:D,clickFn:G};q.init(T[ca][la])}}}function L(ba,ca){if(v.length)for(var ia=0;ia<v.length;ia++)for(var ja=0;ja<v[ia].length;ja++)for(var la=0;la+2<v[ia][ja].length;la+=2)v[ia][ja][la+1]=S[ia][ja][la+1]+ba,v[ia][ja][la+2]=S[ia][ja][la+2]+ca;z()}function K(ba){(O=+ba.srcElement.getAttribute("data-i"))||(O=0);
X[O].moveFn=L}function H(){E()}B||(B=0);var Q=y.gd,M=y.isActiveShape,P=Q._fullLayout._zoomlayer;m(y.dragmode)?Q._fullLayout._drawing=!0:0<=Q._fullLayout._activeShapeIndex&&p(Q);w.attr("d",f(v));var T,O,U;if(M&&!B){var S=r([],v);M=P.append("g").attr("class","outline-controllers");J(M);var X=[];v.length&&(X[0]={element:w[0][0],gd:Q,prepFn:K,doneFn:H},q.init(X[0]))}}},{"../../../plots/cartesian/handle_outline":838,"../../../registry":911,"../../dragelement":662,"../../dragelement/helpers":661,"./constants":726,
"./helpers":729,"./newshapes":730}],729:[function(b,N,I){function r(d,e){return 1E-6>=Math.abs(d-e)}function q(d,e){var f=e[1]-d[1];d=e[2]-d[2];return Math.sqrt(f*f+d*d)}var m=b("parse-svg-path");N=b("./constants");var l=N.CIRCLE_SIDES,a=N.SQRT2;b=b("../../../plots/cartesian/helpers");var h=b.p2r,g=b.r2p,n=[0,3,4,5,6,1,2],p=[0,3,4,1,2];I.writePaths=function(d){var e=d.length;if(!e)return"M0,0Z";for(var f="",k=0;k<e;k++)for(var t=d[k].length,v=0;v<t;v++){var w=d[k][v][0];if("Z"===w)f+="Z";else for(var y=
d[k][v].length,B=0;B<y;B++){var A=B;"Q"===w||"S"===w?A=p[B]:"C"===w&&(A=n[B]);f+=d[k][v][A];0<B&&B<y-1&&(f+=",")}}return f};I.readPaths=function(d,e,f,k){d=m(d);var t=[],v=-1,w,y=0,B=0;var A=y;var z=B;for(var E=0;E<d.length;E++){var C=[],u=w=d[E][0];switch(w){case "M":v++;t[v]=[];y=+d[E][1];B=+d[E][2];C.push([u,y,B]);A=y;z=B;break;case "Q":case "S":w=+d[E][1];var D=+d[E][2];y=+d[E][3];B=+d[E][4];C.push([u,y,B,w,D]);break;case "C":w=+d[E][1];D=+d[E][2];var G=+d[E][3];var J=+d[E][4];y=+d[E][5];B=+d[E][6];
C.push([u,y,B,w,D,G,J]);break;case "T":case "L":y=+d[E][1];B=+d[E][2];C.push([u,y,B]);break;case "H":u="L";y=+d[E][1];C.push([u,y,B]);break;case "V":u="L";B=+d[E][1];C.push([u,y,B]);break;case "A":u="L";G=+d[E][1];D=+d[E][2];+d[E][4]||(G=-G,D=-D);J=y-G;var L=B;for(w=1;w<=l/2;w++){var K=2*Math.PI*w/l;C.push([u,J+G*Math.cos(K),L+D*Math.sin(K)])}break;case "Z":if(y!==A||B!==z)y=A,B=z,C.push([u,y,B])}u=(f||{}).domain;G=e._fullLayout._size;D=f&&"pixel"===f.xsizemode;J=f&&"pixel"===f.ysizemode;L=!1===k;
for(K=0;K<C.length;K++){for(w=0;7>w+2;w+=2){var H=C[K][w+1],Q=C[K][w+2];void 0!==H&&void 0!==Q&&(y=H,B=Q,f&&(f.xaxis&&f.xaxis.p2r?(L&&(H-=f.xaxis._offset),H=D?g(f.xaxis,f.xanchor)+H:h(f.xaxis,H)):(L&&(H-=G.l),H=u?u.x[0]+H/G.w:H/G.w),f.yaxis&&f.yaxis.p2r?(L&&(Q-=f.yaxis._offset),Q=J?g(f.yaxis,f.yanchor)-Q:h(f.yaxis,Q)):(L&&(Q-=G.t),Q=u?u.y[1]-Q/G.h:1-Q/G.h)),C[K][w+1]=H,C[K][w+2]=Q)}t[v].push(C[K].slice())}}return t};I.pointsShapeRectangle=function(d){if(5!==d.length)return!1;for(var e=1;3>e;e++)if(!r(d[0][e]-
d[1][e],d[3][e]-d[2][e])||!r(d[0][e]-d[3][e],d[1][e]-d[2][e]))return!1;return r(d[0][1],d[1][1])||r(d[0][1],d[3][1])?!!(q(d[0],d[1])*q(d[0],d[3])):!1};I.pointsShapeEllipse=function(d){var e=d.length;if(e!==l+1)return!1;e=l;for(var f=0;f<e;f++){var k=(2*e-f)%e,t=(e/2+k)%e;if(!r(q(d[f],d[(e/2+f)%e]),q(d[k],d[t])))return!1}return!0};I.handleEllipse=function(d,e,f){if(!d)return[e,f];var k=I.ellipseOver({x0:e[0],y0:e[1],x1:f[0],y1:f[1]});d=(k.x1+k.x0)/2;e=(k.y1+k.y0)/2;f=(k.x1-k.x0)/2;k=(k.y1-k.y0)/2;
f||(f=k/=a);k||(k=f/=a);for(var t=[],v=0;v<l;v++){var w=2*v*Math.PI/l;t.push([d+f*Math.cos(w),e+k*Math.sin(w)])}return t};I.ellipseOver=function(d){var e=d.x0,f=d.y0,k=d.x1,t=d.y1;d=k-e;var v=t-f;e=(e-d+k)/2;f=(f-v+t)/2;d*=a;v*=a;return{x0:e-d,y0:f-v,x1:e+d,y1:f+v}}},{"../../../plots/cartesian/helpers":839,"./constants":726,"parse-svg-path":505}],730:[function(b,N,I){I=b("../../dragelement/helpers");var r=I.drawMode,q=I.openMode;I=b("./constants");var m=I.i000,l=I.i090,a=I.i180,h=I.i270,g=I.cos45,
n=I.sin45;I=b("../../../plots/cartesian/helpers");var p=I.p2r,d=I.r2p,e=b("../../../plots/cartesian/handle_outline").clearSelect;b=b("./helpers");var f=b.readPaths,k=b.writePaths,t=b.ellipseOver;N.exports=function(v,w){if(v.length&&(v=v[0][0])){var y=v.getAttribute("d");v=w.gd;var B=v._fullLayout.newshape,A=w.plotinfo,z=A.xaxis,E=A.yaxis,C=!!A.domain||!A.xaxis,u=!!A.domain||!A.yaxis,D=w.isActiveShape,G=w.dragmode,J=(v.layout||{}).shapes||[];if(!r(G)&&void 0!==D){var L=v._fullLayout._activeShapeIndex;
if(L<J.length)switch(v._fullLayout.shapes[L].type){case "rect":G="drawrect";break;case "circle":G="drawcircle";break;case "line":G="drawline";break;case "path":G=J[L].path||"",G="Z"===G[G.length-1]?"drawclosedpath":"drawopenpath"}}L=q(G);y=f(y,v,A,D);C={editable:!0,xref:C?"paper":z._id,yref:u?"paper":E._id,layer:B.layer,opacity:B.opacity,line:{color:B.line.color,width:B.line.width,dash:B.line.dash}};L||(C.fillcolor=B.fillcolor,C.fillrule=B.fillrule);var K;1===y.length&&(K=y[0]);if(K&&"drawrect"===
G)C.type="rect",C.x0=K[0][1],C.y0=K[0][2],C.x1=K[2][1],C.y1=K[2][2];else if(K&&"drawline"===G)C.type="line",C.x0=K[0][1],C.y0=K[0][2],C.x1=K[1][1],C.y1=K[1][2];else if(K&&"drawcircle"===G){C.type="circle";y=K[m][1];E=K[l][1];B=K[a][1];z=K[h][1];u=K[m][2];G=K[l][2];L=K[a][2];var H=K[h][2];K=A.xaxis&&("date"===A.xaxis.type||"log"===A.xaxis.type);var Q=A.yaxis&&("date"===A.yaxis.type||"log"===A.yaxis.type);K&&(y=d(A.xaxis,y),E=d(A.xaxis,E),B=d(A.xaxis,B),z=d(A.xaxis,z));Q&&(u=d(A.yaxis,u),G=d(A.yaxis,
G),L=d(A.yaxis,L),H=d(A.yaxis,H));var M=(E+z)/2,P=(u+L)/2;y=t({x0:M,y0:P,x1:M+(z-E+B-y)/2*g,y1:P+(H-G+L-u)/2*n});K&&(y.x0=p(A.xaxis,y.x0),y.x1=p(A.xaxis,y.x1));Q&&(y.y0=p(A.yaxis,y.y0),y.y1=p(A.yaxis,y.y1));C.x0=y.x0;C.y0=y.y0;C.x1=y.x1;C.y1=y.y1}else{C.type="path";if(z&&E&&(A="date"===z.type,K="date"===E.type,A||K))for(E=0;E<y.length;E++)for(B=0;B<y[E].length;B++)for(z=0;z+2<y[E][B].length;z+=2)A&&(y[E][B][z+1]=y[E][B][z+1].replace(" ","_")),K&&(y[E][B][z+2]=y[E][B][z+2].replace(" ","_"));C.path=
k(y)}e(v);w=w.editHelpers;A=(w||{}).modifyItem;K=[];for(y=0;y<J.length;y++)if(E=v._fullLayout.shapes[y],K[y]=E._input,void 0!==D&&y===v._fullLayout._activeShapeIndex)switch(B=C,E.type){case "line":case "rect":case "circle":A("x0",B.x0);A("x1",B.x1);A("y0",B.y0);A("y1",B.y1);break;case "path":A("path",B.path)}return void 0===D?(K.push(C),K):w?w.getUpdateObj():{}}}},{"../../../plots/cartesian/handle_outline":838,"../../../plots/cartesian/helpers":839,"../../dragelement/helpers":661,"./constants":726,
"./helpers":729}],731:[function(b,N,I){var r=b("./constants"),q=b("../../lib");I.rangeToShapePosition=function(m){return"log"===m.type?m.r2d:function(l){return l}};I.shapePositionToRange=function(m){return"log"===m.type?m.d2r:function(l){return l}};I.decodeDate=function(m){return function(l){l.replace&&(l=l.replace("_"," "));return m(l)}};I.encodeDate=function(m){return function(l){return m(l).replace(" ","_")}};I.extractPathCoords=function(m,l){var a=[];m.match(r.segmentRE).forEach(function(h){var g=
l[h.charAt(0)].drawn;void 0!==g&&(h=h.substr(1).match(r.paramRE),!h||h.length<g||a.push(q.cleanNumber(h[g])))});return a};I.getDataToPixel=function(m,l,a,h){var g=m._fullLayout._size;if(l)if("domain"===h)m=function(p){return l._length*(a?1-p:p)+l._offset};else{var n=I.shapePositionToRange(l);m=function(p){return l._offset+l.r2p(n(p,!0))};"date"===l.type&&(m=I.decodeDate(m))}else m=a?function(p){return g.t+g.h*(1-p)}:function(p){return g.l+g.w*p};return m};I.getPixelToData=function(m,l,a,h){var g=
m._fullLayout._size;if(l)if("domain"===h)m=function(p){p=(p-l._offset)/l._length;return a?1-p:p};else{var n=I.rangeToShapePosition(l);m=function(p){return n(l.p2r(p-l._offset))}}else m=a?function(p){return 1-(p-g.t)/g.h}:function(p){return(p-g.l)/g.w};return m};I.roundPositionForSharpStrokeRendering=function(m,l){m=Math.round(m);return 1===Math.round(l%2)?m+.5:m};I.makeOptionsAndPlotinfo=function(m,l){l=m._fullLayout.shapes[l]||{};var a=m._fullLayout._plots[l.xref+l.yref];a?a._hadPlotinfo=!0:(a={},
l.xref&&"paper"!==l.xref&&(a.xaxis=m._fullLayout[l.xref+"axis"]),l.yref&&"paper"!==l.yref&&(a.yaxis=m._fullLayout[l.yref+"axis"]));a.xsizemode=l.xsizemode;a.ysizemode=l.ysizemode;a.xanchor=l.xanchor;a.yanchor=l.yanchor;return{options:l,plotinfo:a}}},{"../../lib":778,"./constants":722}],732:[function(b,N,I){I=b("./draw");N.exports={moduleType:"component",name:"shapes",layoutAttributes:b("./attributes"),supplyLayoutDefaults:b("./defaults"),supplyDrawNewShapeDefaults:b("./draw_newshape/defaults"),includeBasePlot:b("../../plots/cartesian/include_components")("shapes"),
calcAutorange:b("./calc_autorange"),draw:I.draw,drawOne:I.drawOne}},{"../../plots/cartesian/include_components":840,"./attributes":720,"./calc_autorange":721,"./defaults":723,"./draw":724,"./draw_newshape/defaults":727}],733:[function(b,N,I){I=b("../../plots/font_attributes");var r=b("../../plots/pad_attributes"),q=b("../../lib/extend").extendDeepAll,m=b("../../plot_api/edit_types").overrideAll,l=b("../../plots/animation_attributes"),a=b("../../plot_api/plot_template").templatedArray;b=b("./constants");
var h=a("step",{visible:{valType:"boolean",dflt:!0},method:{valType:"enumerated",values:["restyle","relayout","animate","update","skip"],dflt:"restyle"},args:{valType:"info_array",freeLength:!0,items:[{valType:"any"},{valType:"any"},{valType:"any"}]},label:{valType:"string"},value:{valType:"string"},execute:{valType:"boolean",dflt:!0}});N.exports=m(a("slider",{visible:{valType:"boolean",dflt:!0},active:{valType:"number",min:0,dflt:0},steps:h,lenmode:{valType:"enumerated",values:["fraction","pixels"],
dflt:"fraction"},len:{valType:"number",min:0,dflt:1},x:{valType:"number",min:-2,max:3,dflt:0},pad:q(r({editType:"arraydraw"}),{},{t:{dflt:20}}),xanchor:{valType:"enumerated",values:["auto","left","center","right"],dflt:"left"},y:{valType:"number",min:-2,max:3,dflt:0},yanchor:{valType:"enumerated",values:["auto","top","middle","bottom"],dflt:"top"},transition:{duration:{valType:"number",min:0,dflt:150},easing:{valType:"enumerated",values:l.transition.easing.values,dflt:"cubic-in-out"}},currentvalue:{visible:{valType:"boolean",
dflt:!0},xanchor:{valType:"enumerated",values:["left","center","right"],dflt:"left"},offset:{valType:"number",dflt:10},prefix:{valType:"string"},suffix:{valType:"string"},font:I({})},font:I({}),activebgcolor:{valType:"color",dflt:b.gripBgActiveColor},bgcolor:{valType:"color",dflt:b.railBgColor},bordercolor:{valType:"color",dflt:b.railBorderColor},borderwidth:{valType:"number",min:0,dflt:b.railBorderWidth},ticklen:{valType:"number",min:0,dflt:b.tickLength},tickcolor:{valType:"color",dflt:b.tickColor},
tickwidth:{valType:"number",min:0,dflt:1},minorticklen:{valType:"number",min:0,dflt:b.minorTickLength}}),"arraydraw","from-root")},{"../../lib/extend":768,"../../plot_api/edit_types":810,"../../plot_api/plot_template":817,"../../plots/animation_attributes":822,"../../plots/font_attributes":856,"../../plots/pad_attributes":890,"./constants":734}],734:[function(b,N,I){N.exports={name:"sliders",containerClassName:"slider-container",groupClassName:"slider-group",inputAreaClass:"slider-input-area",railRectClass:"slider-rail-rect",
railTouchRectClass:"slider-rail-touch-rect",gripRectClass:"slider-grip-rect",tickRectClass:"slider-tick-rect",inputProxyClass:"slider-input-proxy",labelsClass:"slider-labels",labelGroupClass:"slider-label-group",labelClass:"slider-label",currentValueClass:"slider-current-value",railHeight:5,menuIndexAttrName:"slider-active-index",autoMarginIdRoot:"slider-",minWidth:30,minHeight:30,textPadX:40,arrowOffsetX:4,railRadius:2,railWidth:5,railBorder:4,railBorderWidth:1,railBorderColor:"#bec8d9",railBgColor:"#f8fafc",
railInset:8,stepInset:10,gripRadius:10,gripWidth:20,gripHeight:20,gripBorder:20,gripBorderWidth:1,gripBorderColor:"#bec8d9",gripBgColor:"#f6f8fa",gripBgActiveColor:"#dbdde0",labelPadding:8,labelOffset:0,tickWidth:1,tickColor:"#333",tickOffset:25,tickLength:7,minorTickOffset:25,minorTickColor:"#333",minorTickLength:4,currentValuePadding:8,currentValueInset:0}},{}],735:[function(b,N,I){function r(n,p,d){function e(v,w){return m.coerce(n,p,a,v,w)}for(var f=l(n,p,{name:"steps",handleItemDefaults:q}),
k=0,t=0;t<f.length;t++)f[t].visible&&k++;if(2>k?p.visible=!1:e("visible"))p._stepCount=k,k=p._visibleSteps=m.filterVisible(f),t=e("active"),(f[t]||{}).visible||(p.active=k[0]._index),e("x"),e("y"),m.noneOrAll(n,p,["x","y"]),e("xanchor"),e("yanchor"),e("len"),e("lenmode"),e("pad.t"),e("pad.r"),e("pad.b"),e("pad.l"),m.coerceFont(e,"font",d.font),e("currentvalue.visible")&&(e("currentvalue.xanchor"),e("currentvalue.prefix"),e("currentvalue.suffix"),e("currentvalue.offset"),m.coerceFont(e,"currentvalue.font",
p.font)),e("transition.duration"),e("transition.easing"),e("bgcolor"),e("activebgcolor"),e("bordercolor"),e("borderwidth"),e("ticklen"),e("tickwidth"),e("tickcolor"),e("minorticklen")}function q(n,p){function d(f,k){return m.coerce(n,p,g,f,k)}if("skip"===n.method||Array.isArray(n.args)?d("visible"):p.visible=!1){d("method");d("args");var e=d("label","step-"+p._index);d("value",e);d("execute")}}var m=b("../../lib"),l=b("../../plots/array_container_defaults"),a=b("./attributes"),h=b("./constants").name,
g=a.steps;N.exports=function(n,p){l(n,p,{name:h,handleItemDefaults:r})}},{"../../lib":778,"../../plots/array_container_defaults":823,"./attributes":733,"./constants":734}],736:[function(b,N,I){function r(M,P){M=M[L.name];for(var T=[],O=0;O<M.length;O++){var U=M[O];U.visible&&(U._gd=P,T.push(U))}return T}function q(M){return M._index}function m(M,P){var T=C.tester.selectAll("g."+L.labelGroupClass).data(P._visibleSteps);T.enter().append("g").classed(L.labelGroupClass,!0);var O=0,U=0;T.each(function(ca){var ia=
A.select(this);if(ca=g(ia,{step:ca},P).node())ca=C.bBox(ca),U=Math.max(U,ca.height),O=Math.max(O,ca.width)});T.remove();var S=P._dims={};S.inputAreaWidth=Math.max(L.railWidth,L.gripHeight);var X=M._fullLayout._size;S.lx=X.l+X.w*P.x;S.ly=X.t+X.h*(1-P.y);S.outerLength="fraction"===P.lenmode?Math.round(X.w*P.len):P.len;S.inputAreaStart=0;S.inputAreaLength=Math.round(S.outerLength-P.pad.l-P.pad.r);S.labelStride=Math.max(1,Math.ceil((O+L.labelPadding)/((S.inputAreaLength-2*L.stepInset)/(P._stepCount-1))));
S.labelHeight=U;S.currentValueMaxWidth=0;S.currentValueHeight=0;S.currentValueTotalHeight=0;S.currentValueMaxLines=1;if(P.currentvalue.visible){var ba=C.tester.append("g");T.each(function(ca){var ia=a(ba,P,ca.label);ca=ia.node()&&C.bBox(ia.node())||{width:0,height:0};ia=G.lineCount(ia);S.currentValueMaxWidth=Math.max(S.currentValueMaxWidth,Math.ceil(ca.width));S.currentValueHeight=Math.max(S.currentValueHeight,Math.ceil(ca.height));S.currentValueMaxLines=Math.max(S.currentValueMaxLines,ia)});S.currentValueTotalHeight=
S.currentValueHeight+P.currentvalue.offset;ba.remove()}S.height=S.currentValueTotalHeight+L.tickOffset+P.ticklen+L.labelOffset+S.labelHeight+P.pad.t+P.pad.b;T="left";u.isRightAnchor(P)&&(S.lx-=S.outerLength,T="right");u.isCenterAnchor(P)&&(S.lx-=S.outerLength/2,T="center");X="top";u.isBottomAnchor(P)&&(S.ly-=S.height,X="bottom");u.isMiddleAnchor(P)&&(S.ly-=S.height/2,X="middle");S.outerLength=Math.ceil(S.outerLength);S.height=Math.ceil(S.height);S.lx=Math.round(S.lx);S.ly=Math.round(S.ly);X={y:P.y,
b:S.height*Q[X],t:S.height*H[X]};"fraction"===P.lenmode?(X.l=0,X.xl=P.x-P.len*H[T],X.r=0,X.xr=P.x+P.len*Q[T]):(X.x=P.x,X.l=S.outerLength*H[T],X.r=S.outerLength*Q[T]);z.autoMargin(M,L.autoMarginIdRoot+P._index,X)}function l(M,P,T){(T.steps[T.active]||{}).visible||(T.active=T._visibleSteps[0]._index);P.call(a,T).call(B,T).call(n,T).call(f,T).call(y,M,T).call(h,M,T);M=T._dims;C.setTranslate(P,M.lx+T.pad.l,M.ly+T.pad.t);P.call(t,T,!1);P.call(a,T)}function a(M,P,T){if(P.currentvalue.visible){var O=P._dims;
switch(P.currentvalue.xanchor){case "right":var U=O.inputAreaLength-L.currentValueInset-O.currentValueMaxWidth;var S="left";break;case "center":U=.5*O.inputAreaLength;S="middle";break;default:U=L.currentValueInset,S="left"}M=u.ensureSingle(M,"text",L.labelClass,function(ca){ca.attr({"text-anchor":S,"data-notex":1})});var X=P.currentvalue.prefix?P.currentvalue.prefix:"";if("string"===typeof T)X+=T;else{T=P.steps[P.active].label;var ba=P._gd._fullLayout._meta;ba&&(T=u.templateString(T,ba));X+=T}P.currentvalue.suffix&&
(X+=P.currentvalue.suffix);M.call(C.font,P.currentvalue.font).text(X).call(G.convertToTspans,P._gd);X=G.lineCount(M);G.positionText(M,U,(O.currentValueMaxLines+1-X)*P.currentvalue.font.size*K);return M}}function h(M,P,T){u.ensureSingle(M,"rect",L.gripRectClass,function(O){O.call(e,P,M,T).style("pointer-events","all")}).attr({width:L.gripWidth,height:L.gripHeight,rx:L.gripRadius,ry:L.gripRadius}).call(E.stroke,T.bordercolor).call(E.fill,T.bgcolor).style("stroke-width",T.borderwidth+"px")}function g(M,
P,T){M=u.ensureSingle(M,"text",L.labelClass,function(U){U.attr({"text-anchor":"middle","data-notex":1})});P=P.step.label;var O=T._gd._fullLayout._meta;O&&(P=u.templateString(P,O));M.call(C.font,T.font).text(P).call(G.convertToTspans,T._gd);return M}function n(M,P){M=u.ensureSingle(M,"g",L.labelsClass);var T=P._dims;M=M.selectAll("g."+L.labelGroupClass).data(T.labelSteps);M.enter().append("g").classed(L.labelGroupClass,!0);M.exit().remove();M.each(function(O){var U=A.select(this);U.call(g,O,P);C.setTranslate(U,
v(P,O.fraction),L.tickOffset+P.ticklen+P.font.size*K+L.labelOffset+T.currentValueTotalHeight)})}function p(M,P,T,O,U){O=T._visibleSteps[Math.round(O*(T._stepCount-1))]._index;O!==T.active&&d(M,P,T,O,!0,U)}function d(M,P,T,O,U,S){var X=T.active;T.active=O;J(M.layout,L.name,T).applyUpdate("active",O);O=T.steps[T.active];P.call(t,T,S);P.call(a,T);M.emit("plotly_sliderchange",{slider:T,step:T.steps[T.active],interaction:U,previousActive:X});O&&O.method&&U&&(P._nextMethod?(P._nextMethod.step=O,P._nextMethod.doCallback=
U,P._nextMethod.doTransition=S):(P._nextMethod={step:O,doCallback:U,doTransition:S},P._nextMethodRaf=window.requestAnimationFrame(function(){var ba=P._nextMethod.step;ba.method&&(ba.execute&&z.executeAPICommand(M,ba.method,ba.args),P._nextMethod=null,P._nextMethodRaf=null)})))}function e(M,P,T){var O=T.node(),U=A.select(P);M.on("mousedown",function(){var S=T.data()[0];P.emit("plotly_sliderstart",{slider:S});var X=T.select("."+L.gripRectClass);A.event.stopPropagation();A.event.preventDefault();X.call(E.fill,
S.activebgcolor);var ba=w(S,A.mouse(O)[0]);p(P,T,S,ba,!0);S._dragging=!0;U.on("mousemove",function(){var ca=T.data()[0],ia=w(ca,A.mouse(O)[0]);p(P,T,ca,ia,!1)});U.on("mouseup",function(){var ca=T.data()[0];ca._dragging=!1;X.call(E.fill,ca.bgcolor);U.on("mouseup",null);U.on("mousemove",null);P.emit("plotly_sliderend",{slider:ca,step:ca.steps[ca.active]})})})}function f(M,P){M=M.selectAll("rect."+L.tickRectClass).data(P._visibleSteps);var T=P._dims;M.enter().append("rect").classed(L.tickRectClass,!0);
M.exit().remove();M.attr({width:P.tickwidth+"px","shape-rendering":"crispEdges"});M.each(function(O,U){O=0===U%T.labelStride;var S=A.select(this);S.attr({height:O?P.ticklen:P.minorticklen}).call(E.fill,P.tickcolor);C.setTranslate(S,v(P,U/(P._stepCount-1))-.5*P.tickwidth,(O?L.tickOffset:L.minorTickOffset)+T.currentValueTotalHeight)})}function k(M){var P=M._dims;P.labelSteps=[];for(var T=M._stepCount,O=0;O<T;O+=P.labelStride)P.labelSteps.push({fraction:O/(T-1),step:M._visibleSteps[O]})}function t(M,
P,T){M=M.select("rect."+L.gripRectClass);for(var O=0,U=0;U<P._stepCount;U++)if(P._visibleSteps[U]._index===P.active){O=U;break}O=v(P,O/(P._stepCount-1));P._invokingCommand||(T&&0<P.transition.duration&&(M=M.transition().duration(P.transition.duration).ease(P.transition.easing)),M.attr("transform",D(O-.5*L.gripWidth,P._dims.currentValueTotalHeight)))}function v(M,P){M=M._dims;return M.inputAreaStart+L.stepInset+(M.inputAreaLength-2*L.stepInset)*Math.min(1,Math.max(0,P))}function w(M,P){M=M._dims;return Math.min(1,
Math.max(0,(P-L.stepInset-M.inputAreaStart)/(M.inputAreaLength-2*L.stepInset-2*M.inputAreaStart)))}function y(M,P,T){var O=T._dims,U=u.ensureSingle(M,"rect",L.railTouchRectClass,function(S){S.call(e,P,M,T).style("pointer-events","all")});U.attr({width:O.inputAreaLength,height:Math.max(O.inputAreaWidth,L.tickOffset+T.ticklen+O.labelHeight)}).call(E.fill,T.bgcolor).attr("opacity",0);C.setTranslate(U,0,O.currentValueTotalHeight)}function B(M,P){var T=P._dims,O=T.inputAreaLength-2*L.railInset;M=u.ensureSingle(M,
"rect",L.railRectClass);M.attr({width:O,height:L.railWidth,rx:L.railRadius,ry:L.railRadius,"shape-rendering":"crispEdges"}).call(E.stroke,P.bordercolor).call(E.fill,P.bgcolor).style("stroke-width",P.borderwidth+"px");C.setTranslate(M,L.railInset,.5*(T.inputAreaWidth-L.railWidth)+T.currentValueTotalHeight)}var A=b("d3"),z=b("../../plots/plots"),E=b("../color"),C=b("../drawing"),u=b("../../lib"),D=u.strTranslate,G=b("../../lib/svg_text_utils"),J=b("../../plot_api/plot_template").arrayEditor,L=b("./constants");
b=b("../../constants/alignment");var K=b.LINE_SPACING,H=b.FROM_TL,Q=b.FROM_BR;N.exports=function(M){function P(S){S._commandObserver&&(S._commandObserver.remove(),delete S._commandObserver);z.autoMargin(M,L.autoMarginIdRoot+S._index)}var T=M._fullLayout,O=r(T,M);T=T._infolayer.selectAll("g."+L.containerClassName).data(0<O.length?[0]:[]);T.enter().append("g").classed(L.containerClassName,!0).style("cursor","ew-resize");T.exit().each(function(){A.select(this).selectAll("g."+L.groupClassName).each(P)}).remove();
if(0!==O.length){T=T.selectAll("g."+L.groupClassName).data(O,q);T.enter().append("g").classed(L.groupClassName,!0);T.exit().each(P).remove();for(var U=0;U<O.length;U++)m(M,O[U]);T.each(function(S){var X=A.select(this);k(S);z.manageCommandObserver(M,S,S._visibleSteps,function(ba){var ca=X.data()[0];ca.active!==ba.index&&(ca._dragging||d(M,X,ca,ba.index,!1,!0))});l(M,A.select(this),S)})}}},{"../../constants/alignment":745,"../../lib":778,"../../lib/svg_text_utils":803,"../../plot_api/plot_template":817,
"../../plots/plots":891,"../color":643,"../drawing":665,"./constants":734,d3:169}],737:[function(b,N,I){I=b("./constants");N.exports={moduleType:"component",name:I.name,layoutAttributes:b("./attributes"),supplyLayoutDefaults:b("./defaults"),draw:b("./draw")}},{"./attributes":733,"./constants":734,"./defaults":735,"./draw":736}],738:[function(b,N,I){var r=b("d3"),q=b("fast-isnumeric"),m=b("../../plots/plots"),l=b("../../registry"),a=b("../../lib"),h=a.strTranslate,g=b("../drawing"),n=b("../color"),
p=b("../../lib/svg_text_utils"),d=b("../../constants/interactions"),e=b("../../constants/alignment").OPPOSITE_SIDE,f=/ [XY][0-9]* /;N.exports={draw:function(k,t,v){function w(X){a.syncOrAsync([y,B],X)}function y(X){if(G){var ba="";G.rotate&&(ba+="rotate("+[G.rotate,D.x,D.y]+")");G.offset&&(ba+=h(0,G.offset))}else ba=null;X.attr("transform",ba);X.style({"font-family":P,"font-size":r.round(T,2)+"px",fill:n.rgb(O),opacity:K*n.opacity(O),"font-weight":m.fontWeight}).attr(D).call(p.convertToTspans,k);
return m.previousPromises(k)}function B(X){X=r.select(X.node().parentNode);if(u&&u.selection&&u.side&&M){X.attr("transform",null);var ba=e[u.side],ca="left"===u.side||"top"===u.side?-1:1,ia=q(u.pad)?u.pad:2,ja=g.bBox(X.node()),la={left:0,top:0,right:L.width,bottom:L.height};la=u.maxShift||ca*(la[u.side]-ja[u.side]);var da=0;if(0>la)da=la;else{var oa=u.offsetLeft||0,sa=u.offsetTop||0;ja.left-=oa;ja.right-=oa;ja.top-=sa;ja.bottom-=sa;u.selection.each(function(){var ma=g.bBox(this);a.bBoxIntersect(ja,
ma,ia)&&(da=Math.max(da,ca*(ma[u.side]-ja[ba])+ia))});da=Math.min(la,da)}if(0<da||0>la)la={left:[-da,0],right:[da,0],top:[0,-da],bottom:[0,da]}[u.side],X.attr("transform",h(la[0],la[1]))}}function A(){K=0;H=!0;S.text(E).on("mouseover.opacity",function(){r.select(this).transition().duration(d.SHOW_PLACEHOLDER).style("opacity",1)}).on("mouseout.opacity",function(){r.select(this).transition().duration(d.HIDE_PLACEHOLDER).style("opacity",0)})}var z=v.propName,E=v.placeholder,C=v.traceIndex,u=v.avoid||
{},D=v.attributes,G=v.transform,J=v.containerGroup,L=k._fullLayout,K=1,H=!1,Q=v.propContainer.title,M=(Q&&Q.text?Q.text:"").trim();Q=Q&&Q.font?Q.font:{};var P=Q.family,T=Q.size,O=Q.color,U;"title.text"===z?U="titleText":-1!==z.indexOf("axis")?U="axisTitleText":z.indexOf(!0)&&(U="colorbarTitleText");U=k._context.edits[U];""===M?K=0:M.replace(f," % ")===E.replace(f," % ")&&(K=.2,H=!0,U||(M=""));v._meta?M=a.templateString(M,v._meta):L._meta&&(M=a.templateString(M,L._meta));v=M||U;J||(J=a.ensureSingle(L._infolayer,
"g","g-"+t));var S=J.selectAll("text").data(v?[0]:[]);S.enter().append("text");S.text(M).attr("class",t);S.exit().remove();if(!v)return J;S.call(w);if(U){if(M)S.on(".opacity",null);else A();S.call(p.makeEditable,{gd:k}).on("edit",function(X){void 0!==C?l.call("_guiRestyle",k,z,X,C):l.call("_guiRelayout",k,z,X)}).on("cancel",function(){this.text(this.attr("data-unformatted")).call(w)}).on("input",function(X){this.text(X||" ").call(p.positionText,D.x,D.y)})}S.classed("js-placeholder",H);return J}}},
{"../../constants/alignment":745,"../../constants/interactions":752,"../../lib":778,"../../lib/svg_text_utils":803,"../../plots/plots":891,"../../registry":911,"../color":643,"../drawing":665,d3:169,"fast-isnumeric":241}],739:[function(b,N,I){I=b("../../plots/font_attributes");var r=b("../color/attributes"),q=b("../../lib/extend").extendFlat,m=b("../../plot_api/edit_types").overrideAll,l=b("../../plots/pad_attributes");b=b("../../plot_api/plot_template").templatedArray;var a=b("button",{visible:{valType:"boolean"},
method:{valType:"enumerated",values:["restyle","relayout","animate","update","skip"],dflt:"restyle"},args:{valType:"info_array",freeLength:!0,items:[{valType:"any"},{valType:"any"},{valType:"any"}]},args2:{valType:"info_array",freeLength:!0,items:[{valType:"any"},{valType:"any"},{valType:"any"}]},label:{valType:"string",dflt:""},execute:{valType:"boolean",dflt:!0}});N.exports=m(b("updatemenu",{_arrayAttrRegexps:[/^updatemenus\[(0|[1-9][0-9]+)\]\.buttons/],visible:{valType:"boolean"},type:{valType:"enumerated",
values:["dropdown","buttons"],dflt:"dropdown"},direction:{valType:"enumerated",values:["left","right","up","down"],dflt:"down"},active:{valType:"integer",min:-1,dflt:0},showactive:{valType:"boolean",dflt:!0},buttons:a,x:{valType:"number",min:-2,max:3,dflt:-.05},xanchor:{valType:"enumerated",values:["auto","left","center","right"],dflt:"right"},y:{valType:"number",min:-2,max:3,dflt:1},yanchor:{valType:"enumerated",values:["auto","top","middle","bottom"],dflt:"top"},pad:q(l({editType:"arraydraw"}),
{}),font:I({}),bgcolor:{valType:"color"},bordercolor:{valType:"color",dflt:r.borderLine},borderwidth:{valType:"number",min:0,dflt:1,editType:"arraydraw"}}),"arraydraw","from-root")},{"../../lib/extend":768,"../../plot_api/edit_types":810,"../../plot_api/plot_template":817,"../../plots/font_attributes":856,"../../plots/pad_attributes":890,"../color/attributes":642}],740:[function(b,N,I){N.exports={name:"updatemenus",containerClassName:"updatemenu-container",headerGroupClassName:"updatemenu-header-group",
headerClassName:"updatemenu-header",headerArrowClassName:"updatemenu-header-arrow",dropdownButtonGroupClassName:"updatemenu-dropdown-button-group",dropdownButtonClassName:"updatemenu-dropdown-button",buttonClassName:"updatemenu-button",itemRectClassName:"updatemenu-item-rect",itemTextClassName:"updatemenu-item-text",menuIndexAttrName:"updatemenu-active-index",autoMarginIdRoot:"updatemenu-",blankHeaderOpts:{label:"  "},minWidth:30,minHeight:30,textPadX:24,arrowPadX:16,rx:2,ry:2,textOffsetX:12,textOffsetY:3,
arrowOffsetX:4,gapButtonHeader:5,gapButton:2,activeColor:"#F4FAFF",hoverColor:"#F4FAFF",arrowSymbol:{left:"",right:"",up:"",down:""}}},{}],741:[function(b,N,I){function r(n,p,d){function e(k,t){return m.coerce(n,p,a,k,t)}var f=l(n,p,{name:"buttons",handleItemDefaults:q});e("visible",0<f.length)&&(e("active"),e("direction"),e("type"),e("showactive"),e("x"),e("y"),m.noneOrAll(n,p,["x","y"]),e("xanchor"),e("yanchor"),e("pad.t"),e("pad.r"),e("pad.b"),e("pad.l"),m.coerceFont(e,"font",d.font),e("bgcolor",
d.paper_bgcolor),e("bordercolor"),e("borderwidth"))}function q(n,p){function d(e,f){return m.coerce(n,p,g,e,f)}d("visible","skip"===n.method||Array.isArray(n.args))&&(d("method"),d("args"),d("args2"),d("label"),d("execute"))}var m=b("../../lib"),l=b("../../plots/array_container_defaults"),a=b("./attributes"),h=b("./constants").name,g=a.buttons;N.exports=function(n,p){l(n,p,{name:h,handleItemDefaults:r})}},{"../../lib":778,"../../plots/array_container_defaults":823,"./attributes":739,"./constants":740}],
742:[function(b,N,I){function r(L){return L._index}function q(L,K){return+L.attr(G.menuIndexAttrName)===K._index}function m(L,K,H,Q,M,P,T,O){K.active=T;u(L.layout,G.name,K).applyUpdate("active",T);"buttons"===K.type?a(L,Q,null,null,K):"dropdown"===K.type&&(M.attr(G.menuIndexAttrName,"-1"),l(L,Q,M,P,K),O||a(L,Q,M,P,K))}function l(L,K,H,Q,M){var P=E.ensureSingle(K,"g",G.headerClassName,function(S){S.style("pointer-events","all")}),T=M._dims,O={y:M.pad.t,yPad:0,x:M.pad.l,xPad:0,index:0},U={width:T.headerWidth,
height:T.headerHeight};P.call(n,M,M.buttons[M.active]||G.blankHeaderOpts,L).call(v,M,O,U);E.ensureSingle(K,"text",G.headerArrowClassName,function(S){S.attr("text-anchor","end").call(z.font,M.font).text(G.arrowSymbol[M.direction])}).attr({x:T.headerWidth-G.arrowOffsetX+M.pad.l,y:T.headerHeight/2+G.textOffsetY+M.pad.t});P.on("click",function(){H.call(w,String(q(H,M)?-1:M._index));a(L,K,H,Q,M)});P.on("mouseover",function(){P.call(f)});P.on("mouseout",function(){P.call(k,M)});z.setTranslate(K,T.lx,T.ly)}
function a(L,K,H,Q,M){H||(H=K,H.attr("pointer-events","all"));var P=-1!==+H.attr(G.menuIndexAttrName)||"buttons"===M.type?M.buttons:[],T="dropdown"===M.type?G.dropdownButtonClassName:G.buttonClassName,O=H.selectAll("g."+T).data(E.filterVisible(P));P=O.enter().append("g").classed(T,!0);T=O.exit();"dropdown"===M.type?(P.attr("opacity","0").transition().attr("opacity","1"),T.transition().attr("opacity","0").remove()):T.remove();var U=0,S=0;P=M._dims;T=-1!==["up","down"].indexOf(M.direction);"dropdown"===
M.type&&(T?S=P.headerHeight+G.gapButtonHeader:U=P.headerWidth+G.gapButtonHeader);"dropdown"===M.type&&"up"===M.direction&&(S=-G.gapButtonHeader+G.gapButton-P.openHeight);"dropdown"===M.type&&"left"===M.direction&&(U=-G.gapButtonHeader+G.gapButton-P.openWidth);var X={x:P.lx+U+M.pad.l,y:P.ly+S+M.pad.t,yPad:G.gapButton,xPad:G.gapButton,index:0};U={l:X.x+M.borderwidth,t:X.y+M.borderwidth};O.each(function(ba,ca){var ia=y.select(this);ia.call(n,M,ba,L).call(v,M,X);ia.on("click",function(){y.event.defaultPrevented||
(ba.execute&&(ba.args2&&M.active===ca?(m(L,M,ba,K,H,Q,-1),B.executeAPICommand(L,ba.method,ba.args2)):(m(L,M,ba,K,H,Q,ca),B.executeAPICommand(L,ba.method,ba.args))),L.emit("plotly_buttonclicked",{menu:M,button:ba,active:M.active}))});ia.on("mouseover",function(){ia.call(f)});ia.on("mouseout",function(){ia.call(k,M);O.call(e,M)})});O.call(e,M);T?(U.w=Math.max(P.openWidth,P.headerWidth),U.h=X.y-U.t):(U.w=X.x-U.l,U.h=Math.max(P.openHeight,P.headerHeight));U.direction=M.direction;Q&&(O.size()?h(L,K,H,
Q,M,U):g(Q))}function h(L,K,H,Q,M,P){K=M.direction;L=M._dims;M=M.active;var T,O;if("up"===K||"down"===K)for(K=O=0;K<M;K++)O+=L.heights[K]+G.gapButton;else for(K=T=0;K<M;K++)T+=L.widths[K]+G.gapButton;Q.enable(P,T,O);Q.hbar&&Q.hbar.attr("opacity","0").transition().attr("opacity","1");Q.vbar&&Q.vbar.attr("opacity","0").transition().attr("opacity","1")}function g(L){var K=!!L.hbar,H=!!L.vbar;K&&L.hbar.transition().attr("opacity","0").each("end",function(){K=!1;H||L.disable()});H&&L.vbar.transition().attr("opacity",
"0").each("end",function(){H=!1;K||L.disable()})}function n(L,K,H,Q){L.call(p,K).call(d,K,H,Q)}function p(L,K){E.ensureSingle(L,"rect",G.itemRectClassName,function(H){H.attr({rx:G.rx,ry:G.ry,"shape-rendering":"crispEdges"})}).call(A.stroke,K.bordercolor).call(A.fill,K.bgcolor).style("stroke-width",K.borderwidth+"px")}function d(L,K,H,Q){L=E.ensureSingle(L,"text",G.itemTextClassName,function(P){P.attr({"text-anchor":"start","data-notex":1})});H=H.label;var M=Q._fullLayout._meta;M&&(H=E.templateString(H,
M));L.call(z.font,K.font).text(H).call(C.convertToTspans,Q)}function e(L,K){var H=K.active;L.each(function(Q,M){Q=y.select(this);M===H&&K.showactive&&Q.select("rect."+G.itemRectClassName).call(A.fill,G.activeColor)})}function f(L){L.select("rect."+G.itemRectClassName).call(A.fill,G.hoverColor)}function k(L,K){L.select("rect."+G.itemRectClassName).call(A.fill,K.bgcolor)}function t(L,K){var H=K._dims={width1:0,height1:0,heights:[],widths:[],totalWidth:0,totalHeight:0,openWidth:0,openHeight:0,lx:0,ly:0},
Q=z.tester.selectAll("g."+G.dropdownButtonClassName).data(E.filterVisible(K.buttons));Q.enter().append("g").classed(G.dropdownButtonClassName,!0);var M=-1!==["up","down"].indexOf(K.direction);Q.each(function(U,S){var X=y.select(this);X.call(n,K,U,L);X=X.select("."+G.itemTextClassName);U=X.node()&&z.bBox(X.node()).width;U=Math.max(U+G.textPadX,G.minWidth);var ba=K.font.size*D;X=C.lineCount(X);X=Math.max(ba*X,G.minHeight)+G.textOffsetY;X=Math.ceil(X);U=Math.ceil(U);H.widths[S]=U;H.heights[S]=X;H.height1=
Math.max(H.height1,X);H.width1=Math.max(H.width1,U);M?(H.totalWidth=Math.max(H.totalWidth,U),H.openWidth=H.totalWidth,H.totalHeight+=X+G.gapButton,H.openHeight+=X+G.gapButton):(H.totalWidth+=U+G.gapButton,H.openWidth+=U+G.gapButton,H.totalHeight=Math.max(H.totalHeight,X),H.openHeight=H.totalHeight)});M?H.totalHeight-=G.gapButton:H.totalWidth-=G.gapButton;H.headerWidth=H.width1+G.arrowPadX;H.headerHeight=H.height1;"dropdown"===K.type&&(M?(H.width1+=G.arrowPadX,H.totalHeight=H.height1):H.totalWidth=
H.width1,H.totalWidth+=G.arrowPadX);Q.remove();Q=H.totalWidth+K.pad.l+K.pad.r;var P=H.totalHeight+K.pad.t+K.pad.b,T=L._fullLayout._size;H.lx=T.l+T.w*K.x;H.ly=T.t+T.h*(1-K.y);T="left";E.isRightAnchor(K)&&(H.lx-=Q,T="right");E.isCenterAnchor(K)&&(H.lx-=Q/2,T="center");var O="top";E.isBottomAnchor(K)&&(H.ly-=P,O="bottom");E.isMiddleAnchor(K)&&(H.ly-=P/2,O="middle");H.totalWidth=Math.ceil(H.totalWidth);H.totalHeight=Math.ceil(H.totalHeight);H.lx=Math.round(H.lx);H.ly=Math.round(H.ly);B.autoMargin(L,G.autoMarginIdRoot+
K._index,{x:K.x,y:K.y,l:Q*({right:1,center:.5}[T]||0),r:Q*({left:1,center:.5}[T]||0),b:P*({top:1,middle:.5}[O]||0),t:P*({bottom:1,middle:.5}[O]||0)})}function v(L,K,H,Q){Q=Q||{};var M=L.select("."+G.itemRectClassName),P=L.select("."+G.itemTextClassName),T=K.borderwidth,O=H.index,U=K._dims;z.setTranslate(L,T+H.x,T+H.y);L=-1!==["up","down"].indexOf(K.direction);T=Q.height||(L?U.heights[O]:U.height1);M.attr({x:0,y:0,width:Q.width||(L?U.width1:U.widths[O]),height:T});K=K.font.size*D;Q=C.lineCount(P);
C.positionText(P,G.textOffsetX,T/2-(Q-1)*K/2+G.textOffsetY);L?H.y+=U.heights[O]+H.yPad:H.x+=U.widths[O]+H.xPad;H.index++}function w(L,K){L.attr(G.menuIndexAttrName,K||"-1").selectAll("g."+G.dropdownButtonClassName).remove()}var y=b("d3"),B=b("../../plots/plots"),A=b("../color"),z=b("../drawing"),E=b("../../lib"),C=b("../../lib/svg_text_utils"),u=b("../../plot_api/plot_template").arrayEditor,D=b("../../constants/alignment").LINE_SPACING,G=b("./constants"),J=b("./scrollbox");N.exports=function(L){function K(U){B.autoMargin(L,
G.autoMarginIdRoot+U._index)}var H=L._fullLayout,Q=E.filterVisible(H[G.name]),M=H._menulayer.selectAll("g."+G.containerClassName).data(0<Q.length?[0]:[]);M.enter().append("g").classed(G.containerClassName,!0).style("cursor","pointer");M.exit().each(function(){y.select(this).selectAll("g."+G.headerGroupClassName).each(K)}).remove();if(0!==Q.length){var P=M.selectAll("g."+G.headerGroupClassName).data(Q,r);P.enter().append("g").classed(G.headerGroupClassName,!0);var T=E.ensureSingle(M,"g",G.dropdownButtonGroupClassName,
function(U){U.style("pointer-events","all")});for(M=0;M<Q.length;M++)t(L,Q[M]);var O=new J(L,T,"updatemenus"+H._uid);P.enter().size()&&(T.node().parentNode.appendChild(T.node()),T.call(w));P.exit().each(function(U){T.call(w);K(U)}).remove();P.each(function(U){var S=y.select(this),X="dropdown"===U.type?T:null;B.manageCommandObserver(L,U,U.buttons,function(ba){m(L,U,U.buttons[ba.index],S,X,O,ba.index,!0)});"dropdown"===U.type?(l(L,S,T,O,U),q(T,U)&&a(L,S,T,O,U)):a(L,S,null,null,U)})}}},{"../../constants/alignment":745,
"../../lib":778,"../../lib/svg_text_utils":803,"../../plot_api/plot_template":817,"../../plots/plots":891,"../color":643,"../drawing":665,"./constants":740,"./scrollbox":744,d3:169}],743:[function(b,N,I){arguments[4][737][0].apply(I,arguments)},{"./attributes":739,"./constants":740,"./defaults":741,"./draw":742,dup:737}],744:[function(b,N,I){function r(h,g,n){this.gd=h;this.container=g;this.id=n;this.vbar=this.hbar=this.translateY=this.translateX=this.position=null;this.bg=this.container.selectAll("rect.scrollbox-bg").data([0]);
this.bg.exit().on(".drag",null).on("wheel",null).remove();this.bg.enter().append("rect").classed("scrollbox-bg",!0).style("pointer-events","all").attr({opacity:0,x:0,y:0,width:0,height:0})}N.exports=r;var q=b("d3"),m=b("../color"),l=b("../drawing"),a=b("../../lib");r.barWidth=2;r.barLength=20;r.barRadius=2;r.barPad=1;r.barColor="#808BA4";r.prototype.enable=function(h,g,n){var p=this.gd._fullLayout,d=p.width,e=p.height;this.position=h;h=this.position.l;var f=this.position.w,k=this.position.t,t=this.position.h,
v=this.position.direction,w="down"===v,y="left"===v,B="up"===v,A=f,z=t;w||y||"right"===v||B||(this.position.direction="down",w=!0);if(w||B){var E=h;var C=E+A;w?(B=k,v=Math.min(B+z,e)):(v=k+z,B=Math.max(v-z,0));z=v-B}else B=k,v=B+z,y?(C=h+A,E=Math.max(C-A,0)):(E=h,C=Math.min(E+A,d)),A=C-E;this._box={l:E,t:B,w:A,h:z};w=f>A;var u=r.barLength+2*r.barPad;y=r.barWidth+2*r.barPad;var D=k+t;D+y>e&&(D=e-y);e=this.container.selectAll("rect.scrollbar-horizontal").data(w?[0]:[]);e.exit().on(".drag",null).remove();
e.enter().append("rect").classed("scrollbar-horizontal",!0).call(m.fill,r.barColor);w?(this.hbar=e.attr({rx:r.barRadius,ry:r.barRadius,x:h,y:D,width:u,height:y}),this._hbarXMin=h+u/2,this._hbarTranslateMax=A-u):(delete this.hbar,delete this._hbarXMin,delete this._hbarTranslateMax);e=t>z;A=r.barWidth+2*r.barPad;u=r.barLength+2*r.barPad;D=h+f;D+A>d&&(D=d-A);d=this.container.selectAll("rect.scrollbar-vertical").data(e?[0]:[]);d.exit().on(".drag",null).remove();d.enter().append("rect").classed("scrollbar-vertical",
!0).call(m.fill,r.barColor);e?(this.vbar=d.attr({rx:r.barRadius,ry:r.barRadius,x:D,y:k,width:A,height:u}),this._vbarYMin=k+u/2,this._vbarTranslateMax=z-u):(delete this.vbar,delete this._vbarYMin,delete this._vbarTranslateMax);d=this.id;z=E-.5;C=e?C+A+.5:C+.5;B-=.5;v=w?v+y+.5:v+.5;p=p._topdefs.selectAll("#"+d).data(w||e?[0]:[]);p.exit().remove();p.enter().append("clipPath").attr("id",d).append("rect");w||e?(this._clipRect=p.select("rect").attr({x:Math.floor(z),y:Math.floor(B),width:Math.ceil(C)-Math.floor(z),
height:Math.ceil(v)-Math.floor(B)}),this.container.call(l.setClipUrl,d,this.gd),this.bg.attr({x:h,y:k,width:f,height:t})):(this.bg.attr({width:0,height:0}),this.container.on("wheel",null).on(".drag",null).call(l.setClipUrl,null),delete this._clipRect);if(w||e)p=q.behavior.drag().on("dragstart",function(){q.event.sourceEvent.preventDefault()}).on("drag",this._onBoxDrag.bind(this)),this.container.on("wheel",null).on("wheel",this._onBoxWheel.bind(this)).on(".drag",null).call(p),p=q.behavior.drag().on("dragstart",
function(){q.event.sourceEvent.preventDefault();q.event.sourceEvent.stopPropagation()}).on("drag",this._onBarDrag.bind(this)),w&&this.hbar.on(".drag",null).call(p),e&&this.vbar.on(".drag",null).call(p);this.setTranslate(g,n)};r.prototype.disable=function(){if(this.hbar||this.vbar)this.bg.attr({width:0,height:0}),this.container.on("wheel",null).on(".drag",null).call(l.setClipUrl,null),delete this._clipRect;this.hbar&&(this.hbar.on(".drag",null),this.hbar.remove(),delete this.hbar,delete this._hbarXMin,
delete this._hbarTranslateMax);this.vbar&&(this.vbar.on(".drag",null),this.vbar.remove(),delete this.vbar,delete this._vbarYMin,delete this._vbarTranslateMax)};r.prototype._onBoxDrag=function(){var h=this.translateX,g=this.translateY;this.hbar&&(h-=q.event.dx);this.vbar&&(g-=q.event.dy);this.setTranslate(h,g)};r.prototype._onBoxWheel=function(){var h=this.translateX,g=this.translateY;this.hbar&&(h+=q.event.deltaY);this.vbar&&(g+=q.event.deltaY);this.setTranslate(h,g)};r.prototype._onBarDrag=function(){var h=
this.translateX,g=this.translateY;if(this.hbar){h+=this._hbarXMin;var n=h+this._hbarTranslateMax;h=(a.constrain(q.event.x,h,n)-h)/(n-h)*(this.position.w-this._box.w)}this.vbar&&(g+=this._vbarYMin,n=g+this._vbarTranslateMax,g=(a.constrain(q.event.y,g,n)-g)/(n-g)*(this.position.h-this._box.h));this.setTranslate(h,g)};r.prototype.setTranslate=function(h,g){var n=this.position.w-this._box.w,p=this.position.h-this._box.h;h=a.constrain(h||0,0,n);g=a.constrain(g||0,0,p);this.translateX=h;this.translateY=
g;this.container.call(l.setTranslate,this._box.l-this.position.l-h,this._box.t-this.position.t-g);this._clipRect&&this._clipRect.attr({x:Math.floor(this.position.l+h-.5),y:Math.floor(this.position.t+g-.5)});this.hbar&&this.hbar.call(l.setTranslate,h+h/n*this._hbarTranslateMax,g);this.vbar&&this.vbar.call(l.setTranslate,h,g+g/p*this._vbarTranslateMax)}},{"../../lib":778,"../color":643,"../drawing":665,d3:169}],745:[function(b,N,I){N.exports={FROM_BL:{left:0,center:.5,right:1,bottom:0,middle:.5,top:1},
FROM_TL:{left:0,center:.5,right:1,bottom:1,middle:.5,top:0},FROM_BR:{left:1,center:.5,right:0,bottom:0,middle:.5,top:1},LINE_SPACING:1.3,CAP_SHIFT:.7,MID_SHIFT:.35,OPPOSITE_SIDE:{left:"right",right:"left",top:"bottom",bottom:"top"}}},{}],746:[function(b,N,I){N.exports={axisRefDescription:function(r,q,m){return["If set to a",r,"axis id (e.g. *"+r+"* or","*"+r+"2*), the `"+r+"` position refers to a",r,"coordinate. If set to *paper*, the `"+r+"`","position refers to the distance from the",q,"of the plotting area in normalized coordinates where *0* (*1*) corresponds to the",
q,"("+m+"). If set to a",r,"axis ID followed by *domain* (separated by a space), the position behaves like for *paper*, but refers to the distance in fractions of the domain length from the",q,"of the domain of that axis: e.g.,","*"+r+"2 domain* refers to the domain of the second",r," axis and a",r,"position of 0.5 refers to the point between the",q,"and the",m,"of the domain of the second",r,"axis."].join(" ")}}},{}],747:[function(b,N,I){N.exports={INCREASING:{COLOR:"#3D9970",SYMBOL:""},DECREASING:{COLOR:"#FF4136",
SYMBOL:""}}},{}],748:[function(b,N,I){N.exports={FORMAT_LINK:"https://github.com/d3/d3-3.x-api-reference/blob/master/Formatting.md#d3_format",DATE_FORMAT_LINK:"https://github.com/d3/d3-time-format#locale_format"}},{}],749:[function(b,N,I){N.exports={COMPARISON_OPS:"\x3d !\x3d \x3c \x3e\x3d \x3e \x3c\x3d".split(" "),COMPARISON_OPS2:["\x3d","\x3c","\x3e\x3d","\x3e","\x3c\x3d"],INTERVAL_OPS:"[] () [) (] ][ )( ]( )[".split(" "),SET_OPS:["{}","}{"],CONSTRAINT_REDUCTION:{"\x3d":"\x3d","\x3c":"\x3c","\x3c\x3d":"\x3c",
"\x3e":"\x3e","\x3e\x3d":"\x3e","[]":"[]","()":"[]","[)":"[]","(]":"[]","][":"][",")(":"][","](":"][",")[":"]["}}},{}],750:[function(b,N,I){N.exports={solid:[[],0],dot:[[.5,1],200],dash:[[.5,1],50],longdash:[[.5,1],10],dashdot:[[.5,.625,.875,1],50],longdashdot:[[.5,.7,.8,1],10]}},{}],751:[function(b,N,I){N.exports={circle:"","circle-open":"",square:"","square-open":"",diamond:"","diamond-open":"",cross:"+",x:""}},{}],752:[function(b,N,I){N.exports={SHOW_PLACEHOLDER:100,HIDE_PLACEHOLDER:1E3,
DESELECTDIM:.2}},{}],753:[function(b,N,I){N.exports={BADNUM:void 0,FP_SAFE:Number.MAX_VALUE/1E4,ONEMAXYEAR:316224E5,ONEAVGYEAR:315576E5,ONEMINYEAR:31536E6,ONEMAXQUARTER:79488E5,ONEAVGQUARTER:78894E5,ONEMINQUARTER:76896E5,ONEMAXMONTH:26784E5,ONEAVGMONTH:26298E5,ONEMINMONTH:24192E5,ONEWEEK:6048E5,ONEDAY:864E5,ONEHOUR:36E5,ONEMIN:6E4,ONESEC:1E3,EPOCHJD:2440587.5,ALMOST_EQUAL:.999999,LOG_CLIP:10,MINUS_SIGN:""}},{}],754:[function(b,N,I){I.xmlns="http://www.w3.org/2000/xmlns/";I.svg="http://www.w3.org/2000/svg";
I.xlink="http://www.w3.org/1999/xlink";I.svgAttrs={xmlns:I.svg,"xmlns:xlink":I.xlink}},{}],755:[function(b,N,I){I.version=b("./version").version;b("es6-promise").polyfill();b("../build/plotcss");b("./fonts/mathjax_config")();N=b("./registry");N=I.register=N.register;for(var r=b("./plot_api"),q=Object.keys(r),m=0;m<q.length;m++){var l=q[m];"_"!==l.charAt(0)&&(I[l]=r[l]);N({moduleType:"apiMethod",name:l,fn:r[l]})}N(b("./traces/scatter"));N([b("./components/legend"),b("./components/fx"),b("./components/annotations"),
b("./components/annotations3d"),b("./components/shapes"),b("./components/images"),b("./components/updatemenus"),b("./components/sliders"),b("./components/rangeslider"),b("./components/rangeselector"),b("./components/grid"),b("./components/errorbars"),b("./components/colorscale"),b("./components/colorbar")]);N([b("./locale-en"),b("./locale-en-us")]);window.PlotlyLocales&&Array.isArray(window.PlotlyLocales)&&(N(window.PlotlyLocales),delete window.PlotlyLocales);I.Icons=b("./fonts/ploticon");I.Plots=
b("./plots/plots");I.Fx=b("./components/fx");I.Snapshot=b("./snapshot");I.PlotSchema=b("./plot_api/plot_schema");I.Queue=b("./lib/queue");I.d3=b("d3")},{"../build/plotcss":1,"./components/annotations":634,"./components/annotations3d":639,"./components/colorbar":649,"./components/colorscale":655,"./components/errorbars":671,"./components/fx":683,"./components/grid":687,"./components/images":692,"./components/legend":700,"./components/rangeselector":711,"./components/rangeslider":718,"./components/shapes":732,
"./components/sliders":737,"./components/updatemenus":743,"./fonts/mathjax_config":756,"./fonts/ploticon":757,"./lib/queue":794,"./locale-en":808,"./locale-en-us":807,"./plot_api":812,"./plot_api/plot_schema":816,"./plots/plots":891,"./registry":911,"./snapshot":916,"./traces/scatter":1199,"./version":1370,d3:169,"es6-promise":224}],756:[function(b,N,I){N.exports=function(){"undefined"!==typeof MathJax&&"local"!==(window.PlotlyConfig||{}).MathJaxConfig&&(MathJax.Hub.Config({messageStyle:"none",skipStartupTypeset:!0,
displayAlign:"left",tex2jax:{inlineMath:[["$","$"],["\\(","\\)"]]}}),MathJax.Hub.Configured())}},{}],757:[function(b,N,I){N.exports={undo:{width:857.1,height:1E3,path:"m857 350q0-87-34-166t-91-137-137-92-166-34q-96 0-183 41t-147 114q-4 6-4 13t5 11l76 77q6 5 14 5 9-1 13-7 41-53 100-82t126-29q58 0 110 23t92 61 61 91 22 111-22 111-61 91-92 61-110 23q-55 0-105-20t-90-57l77-77q17-16 8-38-10-23-33-23h-250q-15 0-25 11t-11 25v250q0 24 22 33 22 10 39-8l72-72q60 57 137 88t159 31q87 0 166-34t137-92 91-137 34-166z",
transform:"matrix(1 0 0 -1 0 850)"},home:{width:928.6,height:1E3,path:"m786 296v-267q0-15-11-26t-25-10h-214v214h-143v-214h-214q-15 0-25 10t-11 26v267q0 1 0 2t0 2l321 264 321-264q1-1 1-4z m124 39l-34-41q-5-5-12-6h-2q-7 0-12 3l-386 322-386-322q-7-4-13-4-7 2-12 7l-35 41q-4 5-3 13t6 12l401 334q18 15 42 15t43-15l136-114v109q0 8 5 13t13 5h107q8 0 13-5t5-13v-227l122-102q5-5 6-12t-4-13z",transform:"matrix(1 0 0 -1 0 850)"},"camera-retro":{width:1E3,height:1E3,path:"m518 386q0 8-5 13t-13 5q-37 0-63-27t-26-63q0-8 5-13t13-5 12 5 5 13q0 23 16 38t38 16q8 0 13 5t5 13z m125-73q0-59-42-101t-101-42-101 42-42 101 42 101 101 42 101-42 42-101z m-572-320h858v71h-858v-71z m643 320q0 89-62 152t-152 62-151-62-63-152 63-151 151-63 152 63 62 151z m-571 358h214v72h-214v-72z m-72-107h858v143h-462l-36-71h-360v-72z m929 143v-714q0-30-21-51t-50-21h-858q-29 0-50 21t-21 51v714q0 30 21 51t50 21h858q29 0 50-21t21-51z",
transform:"matrix(1 0 0 -1 0 850)"},zoombox:{width:1E3,height:1E3,path:"m1000-25l-250 251c40 63 63 138 63 218 0 224-182 406-407 406-224 0-406-182-406-406s183-406 407-406c80 0 155 22 218 62l250-250 125 125z m-812 250l0 438 437 0 0-438-437 0z m62 375l313 0 0-312-313 0 0 312z",transform:"matrix(1 0 0 -1 0 850)"},pan:{width:1E3,height:1E3,path:"m1000 350l-187 188 0-125-250 0 0 250 125 0-188 187-187-187 125 0 0-250-250 0 0 125-188-188 186-187 0 125 252 0 0-250-125 0 187-188 188 188-125 0 0 250 250 0 0-126 187 188z",
transform:"matrix(1 0 0 -1 0 850)"},zoom_plus:{width:875,height:1E3,path:"m1 787l0-875 875 0 0 875-875 0z m687-500l-187 0 0-187-125 0 0 187-188 0 0 125 188 0 0 187 125 0 0-187 187 0 0-125z",transform:"matrix(1 0 0 -1 0 850)"},zoom_minus:{width:875,height:1E3,path:"m0 788l0-876 875 0 0 876-875 0z m688-500l-500 0 0 125 500 0 0-125z",transform:"matrix(1 0 0 -1 0 850)"},autoscale:{width:1E3,height:1E3,path:"m250 850l-187 0-63 0 0-62 0-188 63 0 0 188 187 0 0 62z m688 0l-188 0 0-62 188 0 0-188 62 0 0 188 0 62-62 0z m-875-938l0 188-63 0 0-188 0-62 63 0 187 0 0 62-187 0z m875 188l0-188-188 0 0-62 188 0 62 0 0 62 0 188-62 0z m-125 188l-1 0-93-94-156 156 156 156 92-93 2 0 0 250-250 0 0-2 93-92-156-156-156 156 94 92 0 2-250 0 0-250 0 0 93 93 157-156-157-156-93 94 0 0 0-250 250 0 0 0-94 93 156 157 156-157-93-93 0 0 250 0 0 250z",
transform:"matrix(1 0 0 -1 0 850)"},tooltip_basic:{width:1500,height:1E3,path:"m375 725l0 0-375-375 375-374 0-1 1125 0 0 750-1125 0z",transform:"matrix(1 0 0 -1 0 850)"},tooltip_compare:{width:1125,height:1E3,path:"m187 786l0 2-187-188 188-187 0 0 937 0 0 373-938 0z m0-499l0 1-187-188 188-188 0 0 937 0 0 376-938-1z",transform:"matrix(1 0 0 -1 0 850)"},plotlylogo:{width:1542,height:1E3,path:"m0-10h182v-140h-182v140z m228 146h183v-286h-183v286z m225 714h182v-1000h-182v1000z m225-285h182v-715h-182v715z m225 142h183v-857h-183v857z m231-428h182v-429h-182v429z m225-291h183v-138h-183v138z",
transform:"matrix(1 0 0 -1 0 850)"},"z-axis":{width:1E3,height:1E3,path:"m833 5l-17 108v41l-130-65 130-66c0 0 0 38 0 39 0-1 36-14 39-25 4-15-6-22-16-30-15-12-39-16-56-20-90-22-187-23-279-23-261 0-341 34-353 59 3 60 228 110 228 110-140-8-351-35-351-116 0-120 293-142 474-142 155 0 477 22 477 142 0 50-74 79-163 96z m-374 94c-58-5-99-21-99-40 0-24 65-43 144-43 79 0 143 19 143 43 0 19-42 34-98 40v216h87l-132 135-133-135h88v-216z m167 515h-136v1c16 16 31 34 46 52l84 109v54h-230v-71h124v-1c-16-17-28-32-44-51l-89-114v-51h245v72z",
transform:"matrix(1 0 0 -1 0 850)"},"3d_rotate":{width:1E3,height:1E3,path:"m922 660c-5 4-9 7-14 11-359 263-580-31-580-31l-102 28 58-400c0 1 1 1 2 2 118 108 351 249 351 249s-62 27-100 42c88 83 222 183 347 122 16-8 30-17 44-27-2 1-4 2-6 4z m36-329c0 0 64 229-88 296-62 27-124 14-175-11 157-78 225-208 249-266 8-19 11-31 11-31 2 5 6 15 11 32-5-13-8-20-8-20z m-775-239c70-31 117-50 198-32-121 80-199 346-199 346l-96-15-58-12c0 0 55-226 155-287z m603 133l-317-139c0 0 4-4 19-14 7-5 24-15 24-15s-177-147-389 4c235-287 536-112 536-112l31-22 100 299-4-1z m-298-153c6-4 14-9 24-15 0 0-17 10-24 15z",
transform:"matrix(1 0 0 -1 0 850)"},camera:{width:1E3,height:1E3,path:"m500 450c-83 0-150-67-150-150 0-83 67-150 150-150 83 0 150 67 150 150 0 83-67 150-150 150z m400 150h-120c-16 0-34 13-39 29l-31 93c-6 15-23 28-40 28h-340c-16 0-34-13-39-28l-31-94c-6-15-23-28-40-28h-120c-55 0-100-45-100-100v-450c0-55 45-100 100-100h800c55 0 100 45 100 100v450c0 55-45 100-100 100z m-400-550c-138 0-250 112-250 250 0 138 112 250 250 250 138 0 250-112 250-250 0-138-112-250-250-250z m365 380c-19 0-35 16-35 35 0 19 16 35 35 35 19 0 35-16 35-35 0-19-16-35-35-35z",
transform:"matrix(1 0 0 -1 0 850)"},movie:{width:1E3,height:1E3,path:"m938 413l-188-125c0 37-17 71-44 94 64 38 107 107 107 187 0 121-98 219-219 219-121 0-219-98-219-219 0-61 25-117 66-156h-115c30 33 49 76 49 125 0 103-84 187-187 187s-188-84-188-187c0-57 26-107 65-141-38-22-65-62-65-109v-250c0-70 56-126 125-126h500c69 0 125 56 125 126l188-126c34 0 62 28 62 63v375c0 35-28 63-62 63z m-750 0c-69 0-125 56-125 125s56 125 125 125 125-56 125-125-56-125-125-125z m406-1c-87 0-157 70-157 157 0 86 70 156 157 156s156-70 156-156-70-157-156-157z",
transform:"matrix(1 0 0 -1 0 850)"},question:{width:857.1,height:1E3,path:"m500 82v107q0 8-5 13t-13 5h-107q-8 0-13-5t-5-13v-107q0-8 5-13t13-5h107q8 0 13 5t5 13z m143 375q0 49-31 91t-77 65-95 23q-136 0-207-119-9-14 4-24l74-55q4-4 10-4 9 0 14 7 30 38 48 51 19 14 48 14 27 0 48-15t21-33q0-21-11-34t-38-25q-35-16-65-48t-29-70v-20q0-8 5-13t13-5h107q8 0 13 5t5 13q0 10 12 27t30 28q18 10 28 16t25 19 25 27 16 34 7 45z m214-107q0-117-57-215t-156-156-215-58-216 58-155 156-58 215 58 215 155 156 216 58 215-58 156-156 57-215z",
transform:"matrix(1 0 0 -1 0 850)"},disk:{width:857.1,height:1E3,path:"m214-7h429v214h-429v-214z m500 0h72v500q0 8-6 21t-11 20l-157 156q-5 6-19 12t-22 5v-232q0-22-15-38t-38-16h-322q-22 0-37 16t-16 38v232h-72v-714h72v232q0 22 16 38t37 16h465q22 0 38-16t15-38v-232z m-214 518v178q0 8-5 13t-13 5h-107q-7 0-13-5t-5-13v-178q0-8 5-13t13-5h107q7 0 13 5t5 13z m357-18v-518q0-22-15-38t-38-16h-750q-23 0-38 16t-16 38v750q0 22 16 38t38 16h517q23 0 50-12t42-26l156-157q16-15 27-42t11-49z",transform:"matrix(1 0 0 -1 0 850)"},
drawopenpath:{width:70,height:70,path:"M33.21,85.65a7.31,7.31,0,0,1-2.59-.48c-8.16-3.11-9.27-19.8-9.88-41.3-.1-3.58-.19-6.68-.35-9-.15-2.1-.67-3.48-1.43-3.79-2.13-.88-7.91,2.32-12,5.86L3,32.38c1.87-1.64,11.55-9.66,18.27-6.9,2.13.87,4.75,3.14,5.17,9,.17,2.43.26,5.59.36,9.25a224.17,224.17,0,0,0,1.5,23.4c1.54,10.76,4,12.22,4.48,12.4.84.32,2.79-.46,5.76-3.59L43,80.07C41.53,81.57,37.68,85.64,33.21,85.65ZM74.81,69a11.34,11.34,0,0,0,6.09-6.72L87.26,44.5,74.72,32,56.9,38.35c-2.37.86-5.57,3.42-6.61,6L38.65,72.14l8.42,8.43ZM55,46.27a7.91,7.91,0,0,1,3.64-3.17l14.8-5.3,8,8L76.11,60.6l-.06.19a6.37,6.37,0,0,1-3,3.43L48.25,74.59,44.62,71Zm16.57,7.82A6.9,6.9,0,1,0,64.64,61,6.91,6.91,0,0,0,71.54,54.09Zm-4.05,0a2.85,2.85,0,1,1-2.85-2.85A2.86,2.86,0,0,1,67.49,54.09Zm-4.13,5.22L60.5,56.45,44.26,72.7l2.86,2.86ZM97.83,35.67,84.14,22l-8.57,8.57L89.26,44.24Zm-13.69-8,8,8-2.85,2.85-8-8Z",
transform:"matrix(1 0 0 1 -15 -15)"},drawclosedpath:{width:90,height:90,path:"M88.41,21.12a26.56,26.56,0,0,0-36.18,0l-2.07,2-2.07-2a26.57,26.57,0,0,0-36.18,0,23.74,23.74,0,0,0,0,34.8L48,90.12a3.22,3.22,0,0,0,4.42,0l36-34.21a23.73,23.73,0,0,0,0-34.79ZM84,51.24,50.16,83.35,16.35,51.25a17.28,17.28,0,0,1,0-25.47,20,20,0,0,1,27.3,0l4.29,4.07a3.23,3.23,0,0,0,4.44,0l4.29-4.07a20,20,0,0,1,27.3,0,17.27,17.27,0,0,1,0,25.46ZM66.76,47.68h-33v6.91h33ZM53.35,35H46.44V68h6.91Z",transform:"matrix(1 0 0 1 -5 -5)"},
lasso:{width:1031,height:1E3,path:"m1018 538c-36 207-290 336-568 286-277-48-473-256-436-463 10-57 36-108 76-151-13-66 11-137 68-183 34-28 75-41 114-42l-55-70 0 0c-2-1-3-2-4-3-10-14-8-34 5-45 14-11 34-8 45 4 1 1 2 3 2 5l0 0 113 140c16 11 31 24 45 40 4 3 6 7 8 11 48-3 100 0 151 9 278 48 473 255 436 462z m-624-379c-80 14-149 48-197 96 42 42 109 47 156 9 33-26 47-66 41-105z m-187-74c-19 16-33 37-39 60 50-32 109-55 174-68-42-25-95-24-135 8z m360 75c-34-7-69-9-102-8 8 62-16 128-68 170-73 59-175 54-244-5-9 20-16 40-20 61-28 159 121 317 333 354s407-60 434-217c28-159-121-318-333-355z",
transform:"matrix(1 0 0 -1 0 850)"},selectbox:{width:1E3,height:1E3,path:"m0 850l0-143 143 0 0 143-143 0z m286 0l0-143 143 0 0 143-143 0z m285 0l0-143 143 0 0 143-143 0z m286 0l0-143 143 0 0 143-143 0z m-857-286l0-143 143 0 0 143-143 0z m857 0l0-143 143 0 0 143-143 0z m-857-285l0-143 143 0 0 143-143 0z m857 0l0-143 143 0 0 143-143 0z m-857-286l0-143 143 0 0 143-143 0z m286 0l0-143 143 0 0 143-143 0z m285 0l0-143 143 0 0 143-143 0z m286 0l0-143 143 0 0 143-143 0z",transform:"matrix(1 0 0 -1 0 850)"},
drawline:{width:70,height:70,path:"M60.64,62.3a11.29,11.29,0,0,0,6.09-6.72l6.35-17.72L60.54,25.31l-17.82,6.4c-2.36.86-5.57,3.41-6.6,6L24.48,65.5l8.42,8.42ZM40.79,39.63a7.89,7.89,0,0,1,3.65-3.17l14.79-5.31,8,8L61.94,54l-.06.19a6.44,6.44,0,0,1-3,3.43L34.07,68l-3.62-3.63Zm16.57,7.81a6.9,6.9,0,1,0-6.89,6.9A6.9,6.9,0,0,0,57.36,47.44Zm-4,0a2.86,2.86,0,1,1-2.85-2.85A2.86,2.86,0,0,1,53.32,47.44Zm-4.13,5.22L46.33,49.8,30.08,66.05l2.86,2.86ZM83.65,29,70,15.34,61.4,23.9,75.09,37.59ZM70,21.06l8,8-2.84,2.85-8-8ZM87,80.49H10.67V87H87Z",
transform:"matrix(1 0 0 1 -15 -15)"},drawrect:{width:80,height:80,path:"M78,22V79H21V22H78m9-9H12V88H87V13ZM68,46.22H31V54H68ZM53,32H45.22V69H53Z",transform:"matrix(1 0 0 1 -10 -10)"},drawcircle:{width:80,height:80,path:"M50,84.72C26.84,84.72,8,69.28,8,50.3S26.84,15.87,50,15.87,92,31.31,92,50.3,73.16,84.72,50,84.72Zm0-60.59c-18.6,0-33.74,11.74-33.74,26.17S31.4,76.46,50,76.46,83.74,64.72,83.74,50.3,68.6,24.13,50,24.13Zm17.15,22h-34v7.11h34Zm-13.8-13H46.24v34h7.11Z",transform:"matrix(1 0 0 1 -10 -10)"},
eraseshape:{width:80,height:80,path:"M82.77,78H31.85L6,49.57,31.85,21.14H82.77a8.72,8.72,0,0,1,8.65,8.77V69.24A8.72,8.72,0,0,1,82.77,78ZM35.46,69.84H82.77a.57.57,0,0,0,.49-.6V29.91a.57.57,0,0,0-.49-.61H35.46L17,49.57Zm32.68-34.7-24,24,5,5,24-24Zm-19,.53-5,5,24,24,5-5Z",transform:"matrix(1 0 0 1 -10 -10)"},spikeline:{width:1E3,height:1E3,path:"M512 409c0-57-46-104-103-104-57 0-104 47-104 104 0 57 47 103 104 103 57 0 103-46 103-103z m-327-39l92 0 0 92-92 0z m-185 0l92 0 0 92-92 0z m370-186l92 0 0 93-92 0z m0-184l92 0 0 92-92 0z",
transform:"matrix(1.5 0 0 -1.5 0 850)"},pencil:{width:1792,height:1792,path:"M491 1536l91-91-235-235-91 91v107h128v128h107zm523-928q0-22-22-22-10 0-17 7l-542 542q-7 7-7 17 0 22 22 22 10 0 17-7l542-542q7-7 7-17zm-54-192l416 416-832 832h-416v-416zm683 96q0 53-37 90l-166 166-416-416 166-165q36-38 90-38 53 0 91 38l235 234q37 39 37 91z",transform:"matrix(1 0 0 1 0 1)"},newplotlylogo:{name:"newplotlylogo",svg:"\x3csvg xmlns\x3d'http://www.w3.org/2000/svg' viewBox\x3d'0 0 132 132'\x3e\x3cdefs\x3e\x3cstyle\x3e.cls-1 {fill: #3f4f75;} .cls-2 {fill: #80cfbe;} .cls-3 {fill: #fff;}\x3c/style\x3e\x3c/defs\x3e\x3ctitle\x3eplotly-logomark\x3c/title\x3e\x3cg id\x3d'symbol'\x3e\x3crect class\x3d'cls-1' width\x3d'132' height\x3d'132' rx\x3d'6' ry\x3d'6'/\x3e\x3ccircle class\x3d'cls-2' cx\x3d'78' cy\x3d'54' r\x3d'6'/\x3e\x3ccircle class\x3d'cls-2' cx\x3d'102' cy\x3d'30' r\x3d'6'/\x3e\x3ccircle class\x3d'cls-2' cx\x3d'78' cy\x3d'30' r\x3d'6'/\x3e\x3ccircle class\x3d'cls-2' cx\x3d'54' cy\x3d'30' r\x3d'6'/\x3e\x3ccircle class\x3d'cls-2' cx\x3d'30' cy\x3d'30' r\x3d'6'/\x3e\x3ccircle class\x3d'cls-2' cx\x3d'30' cy\x3d'54' r\x3d'6'/\x3e\x3cpath class\x3d'cls-3' d\x3d'M30,72a6,6,0,0,0-6,6v24a6,6,0,0,0,12,0V78A6,6,0,0,0,30,72Z'/\x3e\x3cpath class\x3d'cls-3' d\x3d'M78,72a6,6,0,0,0-6,6v24a6,6,0,0,0,12,0V78A6,6,0,0,0,78,72Z'/\x3e\x3cpath class\x3d'cls-3' d\x3d'M54,48a6,6,0,0,0-6,6v48a6,6,0,0,0,12,0V54A6,6,0,0,0,54,48Z'/\x3e\x3cpath class\x3d'cls-3' d\x3d'M102,48a6,6,0,0,0-6,6v48a6,6,0,0,0,12,0V54A6,6,0,0,0,102,48Z'/\x3e\x3c/g\x3e\x3c/svg\x3e"}}},
{}],758:[function(b,N,I){I.isLeftAnchor=function(r){return"left"===r.xanchor||"auto"===r.xanchor&&r.x<=1/3};I.isCenterAnchor=function(r){return"center"===r.xanchor||"auto"===r.xanchor&&r.x>1/3&&r.x<2/3};I.isRightAnchor=function(r){return"right"===r.xanchor||"auto"===r.xanchor&&r.x>=2/3};I.isTopAnchor=function(r){return"top"===r.yanchor||"auto"===r.yanchor&&r.y>=2/3};I.isMiddleAnchor=function(r){return"middle"===r.yanchor||"auto"===r.yanchor&&r.y>1/3&&r.y<2/3};I.isBottomAnchor=function(r){return"bottom"===
r.yanchor||"auto"===r.yanchor&&r.y<=1/3}},{}],759:[function(b,N,I){function r(p){return Math.abs(p[1]-p[0])>n-1E-14}function q(p,d){return h(d-p,n)}function m(p,d){if(r(d))return!0;if(d[0]<d[1]){var e=d[0];d=d[1]}else e=d[1],d=d[0];e=a(e,n);d=a(d,n);e>d&&(d+=n);p=a(p,n);var f=p+n;return p>=e&&p<=d||f>=e&&f<=d}function l(p,d,e,f,k,t,v){function w(C,u){return[C*Math.cos(u)+k,t-C*Math.sin(u)]}function y(C,u,D){return"A"+[C,C]+" "+[0,E,D]+" "+w(C,u)}k=k||0;t=t||0;var B=r([e,f]);if(B){var A=0;var z=g;
e=n}else e<f?(A=e,e=f):A=f;p<d?(f=p,p=d):f=d;var E=Math.abs(e-A)<=g?0:1;B?B=null===f?"M"+w(p,A)+y(p,z,0)+y(p,e,0)+"Z":"M"+w(f,A)+y(f,z,0)+y(f,e,0)+"ZM"+w(p,A)+y(p,z,1)+y(p,e,1)+"Z":null===f?(B="M"+w(p,A)+y(p,e,0),v&&(B+="L0,0Z")):B="M"+w(f,A)+"L"+w(p,A)+y(p,e,0)+"L"+w(f,e)+y(f,A,1)+"Z";return B}b=b("./mod");var a=b.mod,h=b.modHalf,g=Math.PI,n=2*g;N.exports={deg2rad:function(p){return p/180*g},rad2deg:function(p){return p/g*180},angleDelta:q,angleDist:function(p,d){return Math.abs(q(p,d))},isFullCircle:r,
isAngleInsideSector:m,isPtInsideSector:function(p,d,e,f){if(!m(d,f))return!1;e[0]<e[1]?(d=e[0],e=e[1]):(d=e[1],e=e[0]);return p>=d&&p<=e},pathArc:function(p,d,e,f,k){return l(null,p,d,e,f,k,0)},pathSector:function(p,d,e,f,k){return l(null,p,d,e,f,k,1)},pathAnnulus:function(p,d,e,f,k,t){return l(p,d,e,f,k,t,1)}}},{"./mod":785}],760:[function(b,N,I){function r(g){return a.isView(g)&&!(g instanceof h)}function q(g){return l(g)||r(g)}function m(g,n,p){if(q(g)){if(q(g[0])){for(var d=0;d<g.length;d++)p=
n(p,g[d].length);return p}return g.length}return 0}var l=Array.isArray,a="undefined"!==typeof ArrayBuffer&&ArrayBuffer.isView?ArrayBuffer:{isView:function(){return!1}},h="undefined"===typeof DataView?function(){}:DataView;I.isTypedArray=r;I.isArrayOrTypedArray=q;I.isArray1D=function(g){return!q(g[0])};I.ensureArray=function(g,n){l(g)||(g=[]);g.length=n;return g};I.concat=function(){var g=[],n=!0,p=0,d,e;for(d=0;d<arguments.length;d++){var f=arguments[d];if(e=f.length){if(k)g.push(f);else{var k=f;
var t=e}if(l(f))var v=!1;else n=!1,p?v!==f.constructor&&(v=!1):v=f.constructor;p+=e}}if(!p)return[];if(!g.length)return k;if(n)return k.concat.apply(k,g);if(v){n=new v(p);n.set(k);for(d=0;d<g.length;d++)f=g[d],n.set(f,t),t+=f.length;return n}n=Array(p);for(p=0;p<k.length;p++)n[p]=k[p];for(d=0;d<g.length;d++){f=g[d];for(p=0;p<f.length;p++)n[t+p]=f[p];t+=p}return n};I.maxRowLength=function(g){return m(g,Math.max,0)};I.minRowLength=function(g){return m(g,Math.min,Infinity)}},{}],761:[function(b,N,I){var r=
b("fast-isnumeric"),q=b("../constants/numerical").BADNUM,m=/^['"%,$#\s']+|[, ]|['"%,$#\s']+$/g;N.exports=function(l){"string"===typeof l&&(l=l.replace(m,""));return r(l)?Number(l):q}},{"../constants/numerical":753,"fast-isnumeric":241}],762:[function(b,N,I){N.exports=function(r){r=r._fullLayout;r._glcanvas&&r._glcanvas.size()&&r._glcanvas.each(function(q){q.regl&&q.regl.clear({color:!0,depth:!0})})}},{}],763:[function(b,N,I){N.exports=function(r){r._responsiveChartHandler&&(window.removeEventListener("resize",
r._responsiveChartHandler),delete r._responsiveChartHandler)}},{}],764:[function(b,N,I){function r(e,f){var k=I.valObjectMeta[f.valType];if(f.arrayOk&&d(e))return!0;if(k.validateFunction)return k.validateFunction(e,f);var t={},v=t;k.coerceFunction(e,{set:function(w){v=w}},t,f);return v!==t}var q=b("fast-isnumeric"),m=b("tinycolor2"),l=b("../plots/attributes"),a=b("../components/colorscale/scales"),h=b("../constants/interactions").DESELECTDIM,g=b("./nested_property"),n=b("./regex").counter,p=b("./mod").modHalf,
d=b("./array").isArrayOrTypedArray;I.valObjectMeta={data_array:{coerceFunction:function(e,f,k){d(e)?f.set(e):void 0!==k&&f.set(k)}},enumerated:{coerceFunction:function(e,f,k,t){t.coerceNumber&&(e=+e);-1===t.values.indexOf(e)?f.set(k):f.set(e)},validateFunction:function(e,f){f.coerceNumber&&(e=+e);f=f.values;for(var k=0;k<f.length;k++){var t=String(f[k]);if("/"===t.charAt(0)&&"/"===t.charAt(t.length-1)){if((new RegExp(t.substr(1,t.length-2))).test(e))return!0}else if(e===f[k])return!0}return!1}},"boolean":{coerceFunction:function(e,
f,k){!0===e||!1===e?f.set(e):f.set(k)}},number:{coerceFunction:function(e,f,k,t){!q(e)||void 0!==t.min&&e<t.min||void 0!==t.max&&e>t.max?f.set(k):f.set(+e)}},integer:{coerceFunction:function(e,f,k,t){e%1||!q(e)||void 0!==t.min&&e<t.min||void 0!==t.max&&e>t.max?f.set(k):f.set(+e)}},string:{coerceFunction:function(e,f,k,t){"string"!==typeof e?!0===t.strict||"number"!==typeof e?f.set(k):f.set(String(e)):t.noBlank&&!e?f.set(k):f.set(e)}},color:{coerceFunction:function(e,f,k){m(e).isValid()?f.set(e):f.set(k)}},
colorlist:{coerceFunction:function(e,f,k){function t(v){return m(v).isValid()}Array.isArray(e)&&e.length?e.every(t)?f.set(e):f.set(k):f.set(k)}},colorscale:{coerceFunction:function(e,f,k){f.set(a.get(e,k))}},angle:{coerceFunction:function(e,f,k){"auto"===e?f.set("auto"):q(e)?f.set(p(+e,360)):f.set(k)}},subplotid:{coerceFunction:function(e,f,k,t){t=t.regex||n(k);"string"===typeof e&&t.test(e)?f.set(e):f.set(k)},validateFunction:function(e,f){f=f.dflt;return e===f?!0:"string"!==typeof e?!1:n(f).test(e)?
!0:!1}},flaglist:{coerceFunction:function(e,f,k,t){if("string"!==typeof e)f.set(k);else if(-1!==(t.extras||[]).indexOf(e))f.set(e);else{e=e.split("+");for(var v=0;v<e.length;){var w=e[v];-1===t.flags.indexOf(w)||e.indexOf(w)<v?e.splice(v,1):v++}e.length?f.set(e.join("+")):f.set(k)}}},any:{coerceFunction:function(e,f,k){void 0===e?f.set(k):f.set(e)}},info_array:{coerceFunction:function(e,f,k,t){function v(G,J,L){var K;void 0===L&&(L=J.dflt);I.valObjectMeta[J.valType].coerceFunction(G,{set:function(H){K=
H}},L,J);return K}var w=2===t.dimensions||"1-2"===t.dimensions&&Array.isArray(e)&&Array.isArray(e[0]);if(Array.isArray(e)){t=t.items;var y=[],B=Array.isArray(t),A=B&&w&&Array.isArray(t[0]);A=w&&B&&!A;var z=B&&!A?t.length:e.length,E;k=Array.isArray(k)?k:[];if(w)for(w=0;w<z;w++){y[w]=[];var C=Array.isArray(e[w])?e[w]:[];var u=A?t.length:B?t[w].length:C.length;for(E=0;E<u;E++){var D=A?t[E]:B?t[w][E]:t;D=v(C[E],D,(k[w]||[])[E]);void 0!==D&&(y[w][E]=D)}}else for(w=0;w<z;w++)D=v(e[w],B?t[w]:t,k[w]),void 0!==
D&&(y[w]=D);f.set(y)}else f.set(k)},validateFunction:function(e,f){if(!Array.isArray(e))return!1;var k=f.items,t=Array.isArray(k),v=2===f.dimensions;if(!f.freeLength&&e.length!==k.length)return!1;for(var w=0;w<e.length;w++)if(v){if(!Array.isArray(e[w])||!f.freeLength&&e[w].length!==k[w].length)return!1;for(var y=0;y<e[w].length;y++)if(!r(e[w][y],t?k[w][y]:k))return!1}else if(!r(e[w],t?k[w]:k))return!1;return!0}}};I.coerce=function(e,f,k,t,v){k=g(k,t).get();var w=g(e,t);e=g(f,t);w=w.get();f=f._template;
void 0===w&&f&&(w=g(f,t).get(),f=0);void 0===v&&(v=k.dflt);if(k.arrayOk&&d(w))return e.set(w),w;var y=I.valObjectMeta[k.valType].coerceFunction;y(w,e,v,k);var B=e.get();f&&B===v&&!r(w,k)&&(w=g(f,t).get(),y(w,e,v,k),B=e.get());return B};I.coerce2=function(e,f,k,t,v){var w=g(e,t);e=I.coerce(e,f,k,t,v);w=w.get();return void 0!==w&&null!==w?e:!1};I.coerceFont=function(e,f,k){var t={};k=k||{};t.family=e(f+".family",k.family);t.size=e(f+".size",k.size);t.color=e(f+".color",k.color);return t};I.coerceHoverinfo=
function(e,f,k){var t=f._module.attributes;t=t.hoverinfo?t:l;var v=t.hoverinfo;if(1===k._dataLength){k="all"===v.dflt?v.flags.slice():v.dflt.split("+");k.splice(k.indexOf("name"),1);var w=k.join("+")}return I.coerce(e,f,t,"hoverinfo",w)};I.coerceSelectionMarkerOpacity=function(e,f){if(e.marker){var k=e.marker.opacity;if(void 0!==k){if(!d(k)&&!e.selected&&!e.unselected){var t=k;var v=h*k}f("selected.marker.opacity",t);f("unselected.marker.opacity",v)}}};I.validate=r},{"../components/colorscale/scales":658,
"../constants/interactions":752,"../plots/attributes":824,"./array":760,"./mod":785,"./nested_property":786,"./regex":795,"fast-isnumeric":241,tinycolor2:576}],765:[function(b,N,I){function r(K){return K&&v.componentsRegistry.calendars&&"string"===typeof K&&"gregorian"!==K}function q(K,H){return String(K+Math.pow(10,H)).substr(1)}function m(K,H,Q,M,P){if(H||Q||M||P)if(K+=" "+q(H,2)+":"+q(Q,2),M||P)if(K+=":"+q(M,2),P){for(H=4;0===P%10;)--H,P/=10;K+="."+q(P,H)}return K}function l(K,H,Q,M){K=K.replace(G,
function(T){T=Math.min(+T.charAt(1)||6,6);return(H/1E3%1+2).toFixed(T).substr(2).replace(/0+$/,"")||"0"});var P=new Date(Math.floor(H+.05));if(r(M))try{K=v.getComponentMethod("calendars","worldCalFmt")(K,H,M)}catch(T){return"Invalid"}return Q(K)(P)}var a=b("d3-time-format").timeFormat,h=b("fast-isnumeric"),g=b("./loggers"),n=b("./mod").mod;N=b("../constants/numerical");var p=N.BADNUM,d=N.ONEDAY,e=N.ONEHOUR,f=N.ONEMIN,k=N.ONESEC,t=N.EPOCHJD,v=b("../registry"),w=b("d3-time-format").utcFormat,y=/^\s*(-?\d\d\d\d|\d\d)(-(\d?\d)(-(\d?\d)([ Tt]([01]?\d|2[0-3])(:([0-5]\d)(:([0-5]\d(\.\d+)?))?(Z|z|[+\-]\d\d(:?\d\d)?)?)?)?)?)?\s*$/m,
B=/^\s*(-?\d\d\d\d|\d\d)(-(\d?\di?)(-(\d?\d)([ Tt]([01]?\d|2[0-3])(:([0-5]\d)(:([0-5]\d(\.\d+)?))?(Z|z|[+\-]\d\d(:?\d\d)?)?)?)?)?)?\s*$/m,A=(new Date).getFullYear()-70;I.dateTick0=function(K,H){var Q=!!H;Q=r(K)?Q?v.getComponentMethod("calendars","CANONICAL_SUNDAY")[K]:v.getComponentMethod("calendars","CANONICAL_TICK")[K]:Q?"2000-01-02":"2000-01-01";if(2>H)return Q;Q=I.dateTime2ms(Q,K);Q+=d*(H-1);return I.ms2DateTime(Q,0,K)};I.dfltRange=function(K){return r(K)?v.getComponentMethod("calendars","DFLTRANGE")[K]:
["2000-01-01","2001-01-01"]};I.isJSDate=function(K){return"object"===typeof K&&null!==K&&"function"===typeof K.getTime};I.dateTime2ms=function(K,H){if(I.isJSDate(K)){H=K.getTimezoneOffset()*f;var Q=(K.getUTCMinutes()-K.getMinutes())*f+(K.getUTCSeconds()-K.getSeconds())*k+(K.getUTCMilliseconds()-K.getMilliseconds());if(Q){var M=3*f;H=H-M/2+n(Q-H+M/2,M)}K=Number(K)-H;return K>=z&&K<=E?K:p}if("string"!==typeof K&&"number"!==typeof K)return p;K=String(K);Q=r(H);var P=K.charAt(0);!Q||"G"!==P&&"g"!==P||
(K=K.substr(1),H="");P=Q&&"chinese"===H.substr(0,7);var T=K.match(P?B:y);if(!T)return p;K=T[1];var O=T[3]||"1",U=Number(T[5]||1),S=Number(T[7]||0),X=Number(T[9]||0);T=Number(T[11]||0);if(Q){if(2===K.length)return p;K=Number(K);try{var ba=v.getComponentMethod("calendars","getCal")(H);if(P){var ca="i"===O.charAt(O.length-1);O=parseInt(O,10);M=ba.newDate(K,ba.toMonthIndex(K,O,ca),U)}else M=ba.newDate(K,Number(O),U)}catch(ia){return p}return M?(M.toJD()-t)*d+S*e+X*f+T*k:p}K=2===K.length?(Number(K)+2E3-
A)%100+A:Number(K);--O;H=new Date(Date.UTC(2E3,O,U,S,X));H.setUTCFullYear(K);return H.getUTCMonth()!==O||H.getUTCDate()!==U?p:H.getTime()+T*k};var z=I.MIN_MS=I.dateTime2ms("-9999");var E=I.MAX_MS=I.dateTime2ms("9999-12-31 23:59:59.9999");I.isDateTime=function(K,H){return I.dateTime2ms(K,H)!==p};var C=90*d,u=3*e,D=5*f;I.ms2DateTime=function(K,H,Q){if("number"!==typeof K||!(K>=z&&K<=E))return p;H||(H=0);var M=Math.floor(10*n(K+.05,1)),P=Math.round(K-M/10);if(r(Q)){var T=Math.floor(P/d)+t;K=Math.floor(n(K,
d));try{var O=v.getComponentMethod("calendars","getCal")(Q).fromJD(T).formatDate("yyyy-mm-dd")}catch(U){O=w("G%Y-%m-%d")(new Date(P))}if("-"===O.charAt(0))for(;11>O.length;)O="-0"+O.substr(1);else for(;10>O.length;)O="0"+O;Q=H<C?Math.floor(K/e):0;P=H<C?Math.floor(K%e/f):0;T=H<u?Math.floor(K%f/k):0;H=H<D?K%k*10+M:0}else K=new Date(P),O=w("%Y-%m-%d")(K),Q=H<C?K.getUTCHours():0,P=H<C?K.getUTCMinutes():0,T=H<u?K.getUTCSeconds():0,H=H<D?10*K.getUTCMilliseconds()+M:0;return m(O,Q,P,T,H)};I.ms2DateTimeLocal=
function(K){if(!(K>=z+d&&K<=E-d))return p;var H=Math.floor(10*n(K+.05,1)),Q=new Date(Math.round(K-H/10));K=a("%Y-%m-%d")(Q);var M=Q.getHours(),P=Q.getMinutes(),T=Q.getSeconds();H=10*Q.getUTCMilliseconds()+H;return m(K,M,P,T,H)};I.cleanDate=function(K,H,Q){if(K===p)return H;if(I.isJSDate(K)||"number"===typeof K&&isFinite(K)){if(r(Q))return g.error("JS Dates and milliseconds are incompatible with world calendars",K),H;K=I.ms2DateTimeLocal(+K);if(!K&&void 0!==H)return H}else if(!I.isDateTime(K,Q))return g.error("unrecognized date",
K),H;return K};var G=/%\d?f/g,J=[59,59.9,59.99,59.999,59.9999];I.formatDate=function(K,H,Q,M,P,T){P=r(P)&&P;if(!H)if("y"===Q)H=T.year;else if("m"===Q)H=T.month;else if("d"===Q)H=T.dayMonth+"\n"+T.year;else{H=Q;Q=n(K+.05,d);Q=q(Math.floor(Q/e),2)+":"+q(n(Math.floor(Q/f),60),2);if("M"!==H){h(H)||(H=0);var O=(100+Math.min(n(K/k,60),J[H])).toFixed(H).substr(1);0<H&&(O=O.replace(/0+$/,"").replace(/[\.]$/,""));Q+=":"+O}return Q+"\n"+l(T.dayMonthYear,K,M,P)}return l(H,K,M,P)};var L=3*d;I.incrementMonth=
function(K,H,Q){Q=r(Q)&&Q;var M=n(K,d);K=Math.round(K-M);if(Q)try{var P=Math.round(K/d)+t,T=v.getComponentMethod("calendars","getCal")(Q),O=T.fromJD(P);H%12?T.add(O,H,"m"):T.add(O,H/12,"y");return(O.toJD()-t)*d+M}catch(U){g.error("invalid ms "+K+" in calendar "+Q)}K=new Date(K+L);return K.setUTCMonth(K.getUTCMonth()+H)+M-L};I.findExactDates=function(K,H){for(var Q=0,M=0,P=0,T=0,O,U=r(H)&&v.getComponentMethod("calendars","getCal")(H),S=0;S<K.length;S++)if(H=K[S],!h(H))T++;else if(!(H%d))if(U)try{O=
U.fromJD(H/d+t),1===O.day()?1===O.month()?Q++:M++:P++}catch(X){}else O=new Date(H),1===O.getUTCDate()?0===O.getUTCMonth()?Q++:M++:P++;M+=Q;K=K.length-T;return{exactYears:Q/K,exactMonths:M/K,exactDays:(P+M)/K}}},{"../constants/numerical":753,"../registry":911,"./loggers":782,"./mod":785,"d3-time-format":166,"fast-isnumeric":241}],766:[function(b,N,I){function r(p){var d=p&&p.parentNode;d&&d.removeChild(p)}function q(p,d,e){p="plotly.js-style-"+p;var f=document.getElementById(p);f||(f=document.createElement("style"),
f.setAttribute("id",p),f.appendChild(document.createTextNode("")),document.head.appendChild(f));p=f.sheet;p.insertRule?p.insertRule(d+"{"+e+"}",0):p.addRule?p.addRule(d,e,0):h.warn("addStyleRule failed")}function m(p){p=window.getComputedStyle(p,null);p=p.getPropertyValue("-webkit-transform")||p.getPropertyValue("-moz-transform")||p.getPropertyValue("-ms-transform")||p.getPropertyValue("-o-transform")||p.getPropertyValue("transform");return"none"===p?null:p.replace("matrix","").replace("3d","").slice(1,
-1).split(",").map(function(d){return+d})}function l(p){for(var d=[];p&&(p instanceof Element||p instanceof HTMLElement);)d.push(p),p=p.parentNode;return d}var a=b("d3"),h=b("./loggers"),g=b("./matrix"),n=b("gl-mat4");N.exports={getGraphDiv:function(p){if("string"===typeof p){var d=document.getElementById(p);if(null===d)throw Error("No DOM element with id '"+p+"' exists on the page.");return d}if(null===p||void 0===p)throw Error("DOM element provided is null or undefined");return p},isPlotDiv:function(p){p=
a.select(p);return p.node()instanceof HTMLElement&&p.size()&&p.classed("js-plotly-plot")},removeElement:r,addStyleRule:function(p,d){q("global",p,d)},addRelatedStyleRule:q,deleteRelatedStyleRule:function(p){(p=document.getElementById("plotly.js-style-"+p))&&r(p)},getFullTransformMatrix:function(p){var d=[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1];l(p).forEach(function(e){if(e=m(e))e=g.convertCssMatrix(e),d=n.multiply(d,d,e)});return d},getElementTransformMatrix:m,getElementAndAncestors:l,equalDomRects:function(p,
d){return p&&d&&p.x===d.x&&p.y===d.y&&p.top===d.top&&p.left===d.left&&p.right===d.right&&p.bottom===d.bottom}}},{"./loggers":782,"./matrix":784,d3:169,"gl-mat4":292}],767:[function(b,N,I){var r=b("events").EventEmitter;N.exports={init:function(q){if(q._ev instanceof r)return q;var m=new r,l=new r;q._ev=m;q._internalEv=l;q.on=m.on.bind(m);q.once=m.once.bind(m);q.removeListener=m.removeListener.bind(m);q.removeAllListeners=m.removeAllListeners.bind(m);q._internalOn=l.on.bind(l);q._internalOnce=l.once.bind(l);
q._removeInternalListener=l.removeListener.bind(l);q._removeAllInternalListeners=l.removeAllListeners.bind(l);q.emit=function(a,h){"undefined"!==typeof jQuery&&jQuery(q).trigger(a,h);m.emit(a,h);l.emit(a,h)};return q},triggerHandler:function(q,m,l){function a(p){if(p.listener){if(g.removeListener(m,p.listener),!p.fired)return p.fired=!0,p.listener.apply(g,[l])}else return p.apply(g,[l])}var h;"undefined"!==typeof jQuery&&(h=jQuery(q).triggerHandler(m,l));var g=q._ev;if(!g)return h;q=g._events[m];
if(!q)return h;q=Array.isArray(q)?q:[q];var n;for(n=0;n<q.length-1;n++)a(q[n]);q=a(q[n]);return void 0!==h?h:q},purge:function(q){delete q._ev;delete q.on;delete q.once;delete q.removeListener;delete q.removeAllListeners;delete q.emit;delete q._ev;delete q._internalEv;delete q._internalOn;delete q._internalOnce;delete q._removeInternalListener;delete q._removeAllInternalListeners;return q}}},{events:110}],768:[function(b,N,I){function r(l,a,h,g){var n=l[0],p=l.length,d,e,f;if(2===p&&m(n)&&m(l[1])&&
0===n.length){a:{var k=l[1];for(e=0;e<k.length;e++){var t=k[e];if(null!==t&&"object"===typeof t){k=!1;break a}void 0!==t&&(n[e]=t)}k=!0}if(k)return n;n.splice(0,n.length)}for(t=1;t<p;t++)for(d in k=l[t],k){var v=n[d];e=k[d];if(g&&m(e))n[d]=e;else if(a&&e&&(q(e)||(f=m(e))))f?(f=!1,v=v&&m(v)?v:[]):v=v&&q(v)?v:{},n[d]=r([v,e],a,h,g);else if("undefined"!==typeof e||h)n[d]=e}return n}var q=b("./is_plain_object.js"),m=Array.isArray;I.extendFlat=function(){return r(arguments,!1,!1,!1)};I.extendDeep=function(){return r(arguments,
!0,!1,!1)};I.extendDeepAll=function(){return r(arguments,!0,!0,!1)};I.extendDeepNoArrays=function(){return r(arguments,!0,!1,!0)}},{"./is_plain_object.js":779}],769:[function(b,N,I){N.exports=function(r){for(var q={},m=[],l=0,a=0;a<r.length;a++){var h=r[a];1!==q[h]&&(q[h]=1,m[l++]=h)}return m}},{}],770:[function(b,N,I){function r(m){return!0===m.visible}function q(m){m=m[0].trace;return!0===m.visible&&0!==m._length}N.exports=function(m){for(var l=Array.isArray(m)&&Array.isArray(m[0])&&m[0][0]&&m[0][0].trace?
q:r,a=[],h=0;h<m.length;h++){var g=m[h];l(g)&&a.push(g)}return a}},{}],771:[function(b,N,I){function r(k){k=k.geojson;var t=window.PlotlyGeoAssets||{};t="string"===typeof k?t[k]:k;return n(t)?t:(g.error("Oops ... something went wrong when fetching "+k),!1)}var q=b("d3"),m=b("country-regex"),l=b("@turf/area"),a=b("@turf/centroid"),h=b("@turf/bbox");I=b("./identity");var g=b("./loggers"),n=b("./is_plain_object"),p=b("./nested_property"),d=b("./polygon"),e=Object.keys(m),f={"ISO-3":I,"USA-states":I,
"country names":function(k){for(var t=0;t<e.length;t++){var v=e[t];if((new RegExp(m[v])).test(k.trim().toLowerCase()))return v}g.log("Unrecognized country name: "+k+".");return!1}};N.exports={locationToFeature:function(k,t,v){if(!t||"string"!==typeof t)return!1;t=f[k](t);var w;if(t){if("USA-states"===k)for(k=[],w=0;w<v.length;w++){var y=v[w];y.properties&&y.properties.gu&&"USA"===y.properties.gu&&k.push(y)}else k=v;for(w=0;w<k.length;w++)if(y=k[w],y.id===t)return y;g.log(["Location with id",t,"does not have a matching topojson feature at this resolution."].join(" "))}return!1},
feature2polygons:function(k){function t(z){for(var E=0;E<z.length-1;E++)if(0<z[E][0]&&0>z[E+1][0])return E;return null}var v=k.geometry,w=v.coordinates;k=k.id;var y=[],B,A;k="RUS"===k||"FJI"===k?function(z){if(null===t(z))var E=z;else for(E=Array(z.length),A=0;A<z.length;A++)E[A]=[0>z[A][0]?z[A][0]+360:z[A][0],z[A][1]];y.push(d.tester(E))}:"ATA"===k?function(z){var E=t(z);if(null===E)return y.push(d.tester(z));var C=Array(z.length+1),u=0;for(A=0;A<z.length;A++)A>E?C[u++]=[z[A][0]+360,z[A][1]]:A===
E?(C[u++]=z[A],C[u++]=[z[A][0],-90]):C[u++]=z[A];z=d.tester(C);z.pts.pop();y.push(z)}:function(z){y.push(d.tester(z))};switch(v.type){case "MultiPolygon":for(v=0;v<w.length;v++)for(B=0;B<w[v].length;B++)k(w[v][B]);break;case "Polygon":for(v=0;v<w.length;v++)k(w[v])}return y},getTraceGeojson:r,extractTraceFeature:function(k){function t(C){var u=p(C,v.featureidkey||"id").get(),D=y[u];if(D){var G=C.geometry;if("Polygon"===G.type||"MultiPolygon"===G.type){G={type:"Feature",id:u,geometry:G,properties:{}};
var J=G.properties,L=G.geometry;if("MultiPolygon"===L.type){L=L.coordinates;for(var K=0,H=0;H<L.length;H++){var Q={type:"Polygon",coordinates:L[H]},M=l.default(Q);if(M>K){K=M;var P=Q}}}else P=L;P=a.default(P).geometry.coordinates;J.ct=P;D.fIn=C;D.fOut=G;B.push(G)}else g.log(["Location",D.loc,"does not have a valid GeoJSON geometry. Traces with locationmode *geojson-id* only support *Polygon* and *MultiPolygon* geometries."].join(" "))}delete y[u]}var v=k[0].trace,w=r(v);if(!w)return!1;var y={},B=
[],A;for(A=0;A<v._length;A++){var z=k[A];if(z.loc||0===z.loc)y[z.loc]=z}switch(w.type){case "FeatureCollection":k=w.features;for(A=0;A<k.length;A++)t(k[A]);break;case "Feature":t(w);break;default:return g.warn(["Invalid GeoJSON type",(w.type||"none")+".","Traces with locationmode *geojson-id* only support *FeatureCollection* and *Feature* types."].join(" ")),!1}for(var E in y)g.log(["Location *"+E+"*","does not have a matching feature with id-key","*"+v.featureidkey+"*."].join(" "));return B},fetchTraceGeoData:function(k){function t(z){return new Promise(function(E,
C){q.json(z,function(u,D){if(u)return delete w[z],C(Error(404===u.status?'GeoJSON at URL "'+z+'" does not exist.':"Unexpected error while fetching from "+z));w[z]=D;return E(D)})})}function v(z){return new Promise(function(E,C){var u=0,D=setInterval(function(){if(w[z]&&"pending"!==w[z])return clearInterval(D),E(w[z]);if(100<u)return clearInterval(D),C("Unexpected error while fetching from "+z);u++},50)})}for(var w=window.PlotlyGeoAssets||{},y=[],B=0;B<k.length;B++){var A=k[B][0].trace.geojson;"string"===
typeof A&&(w[A]?"pending"===w[A]&&y.push(v(A)):(w[A]="pending",y.push(t(A))))}return y},computeBbox:function(k){return h.default(k)}}},{"./identity":776,"./is_plain_object":779,"./loggers":782,"./nested_property":786,"./polygon":790,"@turf/area":59,"@turf/bbox":60,"@turf/centroid":61,"country-regex":139,d3:169}],772:[function(b,N,I){var r=b("../constants/numerical").BADNUM;I.calcTraceToLineCoords=function(q){for(var m=q[0].trace.connectgaps,l=[],a=[],h=0;h<q.length;h++){var g=q[h].lonlat;g[0]!==r?
a.push(g):!m&&0<a.length&&(l.push(a),a=[])}0<a.length&&l.push(a);return l};I.makeLine=function(q){return 1===q.length?{type:"LineString",coordinates:q[0]}:{type:"MultiLineString",coordinates:q}};I.makePolygon=function(q){if(1===q.length)return{type:"Polygon",coordinates:q};for(var m=Array(q.length),l=0;l<q.length;l++)m[l]=[q[l]];return{type:"MultiPolygon",coordinates:m}};I.makeBlank=function(){return{type:"Point",coordinates:[]}}},{"../constants/numerical":753}],773:[function(b,N,I){function r(g,
n,p,d,e,f,k,t){p-=g;var v=e-g;e=k-e;d-=n;k=f-n;t-=f;f=p*t-e*d;if(0===f)return null;t=(v*t-e*k)/f;v=(v*d-p*k)/f;return 0>v||1<v||0>t||1<t?null:{x:g+p*t,y:n+d*t}}function q(g,n,p,d,e){var f=d*g+e*n;if(0>f)return d*d+e*e;if(f>p)return p=d-g,n=e-n,p*p+n*n;n=d*n-e*g;return n*n/p}var m=b("./mod").mod;I.segmentsIntersect=r;I.segmentDistance=function(g,n,p,d,e,f,k,t){if(r(g,n,p,d,e,f,k,t))return 0;var v=p-g,w=d-n,y=k-e,B=t-f,A=v*v+w*w,z=y*y+B*B;g=Math.min(q(v,w,A,e-g,f-n),q(v,w,A,k-g,t-n),q(y,B,z,g-e,n-f),
q(y,B,z,p-e,d-f));return Math.sqrt(g)};var l,a,h;I.getTextLocation=function(g,n,p,d){if(g!==a||d!==h)l={},a=g,h=d;if(l[p])return l[p];var e=g.getPointAtLength(m(p-d/2,n));d=g.getPointAtLength(m(p+d/2,n));var f=Math.atan((d.y-e.y)/(d.x-e.x));g=g.getPointAtLength(m(p,n));e={x:(4*g.x+e.x+d.x)/6,y:(4*g.y+e.y+d.y)/6,theta:f};return l[p]=e};I.clearLocationCache=function(){a=null};I.getVisibleSegment=function(g,n,p){function d(z){var E=g.getPointAtLength(z);0===z?y=E:z===v&&(B=E);z=E.x<e?e-E.x:E.x>f?E.x-
f:0;E=E.y<k?k-E.y:E.y>t?E.y-t:0;return Math.sqrt(z*z+E*E)}var e=n.left,f=n.right,k=n.top,t=n.bottom;n=0;for(var v=g.getTotalLength(),w=v,y,B,A=d(n);A;){n+=A+p;if(n>w)return;A=d(n)}for(A=d(w);A;){w-=A+p;if(n>w)return;A=d(w)}return{min:n,max:w,len:w-n,total:v,isClosed:0===n&&w===v&&.1>Math.abs(y.x-B.x)&&.1>Math.abs(y.y-B.y)}};I.findPointOnPath=function(g,n,p,d){d=d||{};var e=d.pathLength||g.getTotalLength(),f=d.tolerance||.001;d=d.iterationLimit||30;for(var k=g.getPointAtLength(0)[p]>g.getPointAtLength(e)[p]?
-1:1,t=0,v=0,w,y,B;t<d&&!(w=(v+e)/2,y=g.getPointAtLength(w),B=y[p]-n,Math.abs(B)<f);)0<k*B?e=w:v=w,t++;return y}},{"./mod":785}],774:[function(b,N,I){function r(d,e){d[3]*=e;return d}function q(d){if(l(d))return p;d=h(d);return d.length?d:p}function m(d){return l(d)?d:1}var l=b("fast-isnumeric"),a=b("tinycolor2"),h=b("color-normalize"),g=b("../components/colorscale");I=b("../components/color/attributes").defaultLine;var n=b("./array").isArrayOrTypedArray,p=h(I);N.exports={formatColor:function(d,e,
f){var k=d.color,t=n(k),v=n(e),w=[];var y=void 0!==g.extractOpts(d).colorscale?g.makeColorScaleFuncFromTrace(d):q;d=t?function(z,E){return void 0===z[E]?p:h(y(z[E]))}:q;var B=v?function(z,E){return void 0===z[E]?1:m(z[E])}:m;if(t||v)for(var A=0;A<f;A++)t=d(k,A),v=B(e,A),w[A]=r(t,v);else w=r(h(k),e);return w},parseColorScale:function(d){d=g.extractOpts(d);var e=d.colorscale;d.reversescale&&(e=g.flipScale(d.colorscale));return e.map(function(f){var k=f[0];f=a(f[1]).toRgb();return{index:k,rgb:[f.r,f.g,
f.b,f.a]}})}}},{"../components/color/attributes":642,"../components/colorscale":655,"./array":760,"color-normalize":125,"fast-isnumeric":241,tinycolor2:576}],775:[function(b,N,I){function r(q){return[q]}b=b("./identity");N.exports={keyFun:function(q){return q.key},repeat:r,descend:b,wrap:r,unwrap:function(q){return q[0]}}},{"./identity":776}],776:[function(b,N,I){N.exports=function(r){return r}},{}],777:[function(b,N,I){N.exports=function(r,q){if(!q)return r;var m=1/Math.abs(q);m=1<m?(m*r+m*q)/m:
r+q;var l=String(m).length;16<l&&l>=String(r).length+String(q).length&&(r=parseFloat(m).toPrecision(12),-1===r.indexOf("e+")&&(m=+r));return m}},{}],778:[function(b,N,I){function r(A){var z={},E;for(E in A)for(var C=A[E],u=0;u<C.length;u++)z[C[u]]=+E;return z}function q(A,z,E){var C=this,u=arguments;z||(z={});var D={};return A.replace(n.TEMPLATE_STRING_REGEX,function(G,J,L){var K,H;for(H=3;H<u.length;H++)if(K=u[H]){if(K.hasOwnProperty(J)){var Q=K[J];break}t.test(J)||(Q=D[J]||n.nestedProperty(K,J).get())&&
(D[J]=Q);if(void 0!==Q)break}if(void 0===Q&&C)return C.count<C.max&&n.warn("Variable '"+J+"' in "+C.name+" could not be found!"),C.count===C.max&&n.warn("Too many "+C.name+" warnings - additional warnings will be suppressed"),C.count++,G;L?(":"===L[0]&&(G=E?E.numberFormat:m.format,Q=G(L.replace(y,""))(Q)),"|"===L[0]&&(G=E?E.timeFormat:l,Q=n.dateTime2ms(Q),Q=n.formatDate(Q,L.replace(y,""),!1,G))):z.hasOwnProperty(J+"Label")&&(Q=z[J+"Label"]);return Q})}var m=b("d3"),l=b("d3-time-format").utcFormat,
a=b("fast-isnumeric");I=b("../constants/numerical");var h=I.FP_SAFE,g=I.BADNUM,n=N.exports={};n.nestedProperty=b("./nested_property");n.keyedContainer=b("./keyed_container");n.relativeAttr=b("./relative_attr");n.isPlainObject=b("./is_plain_object");n.toLogRange=b("./to_log_range");n.relinkPrivateKeys=b("./relink_private");N=b("./array");n.isTypedArray=N.isTypedArray;n.isArrayOrTypedArray=N.isArrayOrTypedArray;n.isArray1D=N.isArray1D;n.ensureArray=N.ensureArray;n.concat=N.concat;n.maxRowLength=N.maxRowLength;
n.minRowLength=N.minRowLength;N=b("./mod");n.mod=N.mod;n.modHalf=N.modHalf;N=b("./coerce");n.valObjectMeta=N.valObjectMeta;n.coerce=N.coerce;n.coerce2=N.coerce2;n.coerceFont=N.coerceFont;n.coerceHoverinfo=N.coerceHoverinfo;n.coerceSelectionMarkerOpacity=N.coerceSelectionMarkerOpacity;n.validate=N.validate;N=b("./dates");n.dateTime2ms=N.dateTime2ms;n.isDateTime=N.isDateTime;n.ms2DateTime=N.ms2DateTime;n.ms2DateTimeLocal=N.ms2DateTimeLocal;n.cleanDate=N.cleanDate;n.isJSDate=N.isJSDate;n.formatDate=
N.formatDate;n.incrementMonth=N.incrementMonth;n.dateTick0=N.dateTick0;n.dfltRange=N.dfltRange;n.findExactDates=N.findExactDates;n.MIN_MS=N.MIN_MS;n.MAX_MS=N.MAX_MS;N=b("./search");n.findBin=N.findBin;n.sorterAsc=N.sorterAsc;n.sorterDes=N.sorterDes;n.distinctVals=N.distinctVals;n.roundUp=N.roundUp;n.sort=N.sort;n.findIndexOfMin=N.findIndexOfMin;N=b("./stats");n.aggNums=N.aggNums;n.len=N.len;n.mean=N.mean;n.median=N.median;n.midRange=N.midRange;n.variance=N.variance;n.stdev=N.stdev;n.interp=N.interp;
N=b("./matrix");n.init2dArray=N.init2dArray;n.transposeRagged=N.transposeRagged;n.dot=N.dot;n.translationMatrix=N.translationMatrix;n.rotationMatrix=N.rotationMatrix;n.rotationXYMatrix=N.rotationXYMatrix;n.apply3DTransform=N.apply3DTransform;n.apply2DTransform=N.apply2DTransform;n.apply2DTransform2=N.apply2DTransform2;n.convertCssMatrix=N.convertCssMatrix;n.inverseTransformMatrix=N.inverseTransformMatrix;N=b("./angles");n.deg2rad=N.deg2rad;n.rad2deg=N.rad2deg;n.angleDelta=N.angleDelta;n.angleDist=
N.angleDist;n.isFullCircle=N.isFullCircle;n.isAngleInsideSector=N.isAngleInsideSector;n.isPtInsideSector=N.isPtInsideSector;n.pathArc=N.pathArc;n.pathSector=N.pathSector;n.pathAnnulus=N.pathAnnulus;N=b("./anchor_utils");n.isLeftAnchor=N.isLeftAnchor;n.isCenterAnchor=N.isCenterAnchor;n.isRightAnchor=N.isRightAnchor;n.isTopAnchor=N.isTopAnchor;n.isMiddleAnchor=N.isMiddleAnchor;n.isBottomAnchor=N.isBottomAnchor;N=b("./geometry2d");n.segmentsIntersect=N.segmentsIntersect;n.segmentDistance=N.segmentDistance;
n.getTextLocation=N.getTextLocation;n.clearLocationCache=N.clearLocationCache;n.getVisibleSegment=N.getVisibleSegment;n.findPointOnPath=N.findPointOnPath;N=b("./extend");n.extendFlat=N.extendFlat;n.extendDeep=N.extendDeep;n.extendDeepAll=N.extendDeepAll;n.extendDeepNoArrays=N.extendDeepNoArrays;N=b("./loggers");n.log=N.log;n.warn=N.warn;n.error=N.error;N=b("./regex");n.counterRegex=N.counter;N=b("./throttle");n.throttle=N.throttle;n.throttleDone=N.done;n.clearThrottle=N.clear;N=b("./dom");n.getGraphDiv=
N.getGraphDiv;n.isPlotDiv=N.isPlotDiv;n.removeElement=N.removeElement;n.addStyleRule=N.addStyleRule;n.addRelatedStyleRule=N.addRelatedStyleRule;n.deleteRelatedStyleRule=N.deleteRelatedStyleRule;n.getFullTransformMatrix=N.getFullTransformMatrix;n.getElementTransformMatrix=N.getElementTransformMatrix;n.getElementAndAncestors=N.getElementAndAncestors;n.equalDomRects=N.equalDomRects;n.clearResponsive=b("./clear_responsive");n.preserveDrawingBuffer=b("./preserve_drawing_buffer");n.makeTraceGroups=b("./make_trace_groups");
n._=b("./localize");n.notifier=b("./notifier");n.filterUnique=b("./filter_unique");n.filterVisible=b("./filter_visible");n.pushUnique=b("./push_unique");n.increment=b("./increment");n.cleanNumber=b("./clean_number");n.ensureNumber=function(A){if(!a(A))return g;A=Number(A);return A<-h||A>h?g:a(A)?Number(A):g};n.isIndex=function(A,z){return void 0!==z&&A>=z?!1:a(A)&&0<=A&&0===A%1};n.noop=b("./noop");n.identity=b("./identity");n.repeat=function(A,z){for(var E=Array(z),C=0;C<z;C++)E[C]=A;return E};n.swapAttrs=
function(A,z,E,C){E||(E="x");C||(C="y");for(var u=0;u<z.length;u++){var D=z[u],G=n.nestedProperty(A,D.replace("?",E));D=n.nestedProperty(A,D.replace("?",C));var J=G.get();G.set(D.get());D.set(J)}};n.raiseToTop=function(A){A.parentNode.appendChild(A)};n.cancelTransition=function(A){return A.transition().duration(0)};n.constrain=function(A,z,E){return z>E?Math.max(E,Math.min(z,A)):Math.max(z,Math.min(E,A))};n.bBoxIntersect=function(A,z,E){E=E||0;return A.left<=z.right+E&&z.left<=A.right+E&&A.top<=z.bottom+
E&&z.top<=A.bottom+E};n.simpleMap=function(A,z,E,C,u){for(var D=A.length,G=Array(D),J=0;J<D;J++)G[J]=z(A[J],E,C,u);return G};n.randstr=function D(z,E,C,u){C||(C=16);void 0===E&&(E=24);if(0>=E)return"0";var G=Math.log(Math.pow(2,E))/Math.log(C),J="",L;for(L=2;Infinity===G;L*=2)G=Math.log(Math.pow(2,E/L))/Math.log(C)*L;var K=G-Math.floor(G);for(L=0;L<Math.floor(G);L++){var H=Math.floor(Math.random()*C).toString(C);J=H+J}K&&(G=Math.pow(C,K),H=Math.floor(Math.random()*G).toString(C),J=H+J);G=parseInt(J,
C);return z&&z[J]||Infinity!==G&&G>=Math.pow(2,E)?10<u?(n.warn("randstr failed uniqueness"),J):D(z,E,C,(u||0)+1):J};n.OptionControl=function(z,E){z||(z={});E||(E="opt");var C={optionList:[],_newoption:function(u){u[E]=z;C[u.name]=u;C.optionList.push(u)}};C["_"+E]=z;return C};n.smooth=function(z,E){E=Math.round(E)||0;if(2>E)return z;var C=z.length,u=2*C,D=2*E-1,G=Array(D),J=Array(C),L,K,H;for(L=0;L<D;L++)G[L]=(1-Math.cos(Math.PI*(L+1)/E))/(2*E);for(L=0;L<C;L++){for(K=H=0;K<D;K++){var Q=L+K+1-E;Q<-C?
Q-=u*Math.round(Q/u):Q>=u&&(Q-=u*Math.floor(Q/u));0>Q?Q=-1-Q:Q>=C&&(Q=u-1-Q);H+=z[Q]*G[K]}J[L]=H}return J};n.syncOrAsync=function(z,E,C){function u(){return n.syncOrAsync(z,E,C)}for(var D;z.length;)if(D=z.splice(0,1)[0],(D=D(E))&&D.then)return D.then(u).then(void 0,n.promiseError);return C&&C(E)};n.stripTrailingSlash=function(z){return"/"===z.substr(-1)?z.substr(0,z.length-1):z};n.noneOrAll=function(z,E,C){if(z){var u=!1,D=!0,G;for(G=0;G<C.length;G++){var J=z[C[G]];void 0!==J&&null!==J?u=!0:D=!1}if(u&&
!D)for(G=0;G<C.length;G++)z[C[G]]=E[C[G]]}};n.mergeArray=function(z,E,C,u){var D="function"===typeof u;if(n.isArrayOrTypedArray(z))for(var G=Math.min(z.length,E.length),J=0;J<G;J++){var L=z[J];E[J][C]=D?u(L):L}};n.mergeArrayCastPositive=function(z,E,C){return n.mergeArray(z,E,C,function(u){u=+u;return isFinite(u)?0<u?u:0:0})};n.fillArray=function(z,E,C,u){u=u||n.identity;if(n.isArrayOrTypedArray(z))for(var D=0;D<E.length;D++)E[D][C]=u(z[D])};n.castOption=function(z,E,C,u){u=u||n.identity;z=n.nestedProperty(z,
C).get();return n.isArrayOrTypedArray(z)?Array.isArray(E)&&n.isArrayOrTypedArray(z[E[0]])?u(z[E[0]][E[1]]):u(z[E]):z};n.extractOption=function(z,E,C,u){if(C in z)return z[C];z=n.nestedProperty(E,u).get();if(!Array.isArray(z))return z};n.tagSelected=function(z,E,C){var u=E.selectedpoints;E=E._indexToPoints;var D;E&&(D=r(E));for(E=0;E<u.length;E++){var G=u[E];if(n.isIndex(G)||n.isArrayOrTypedArray(G)&&n.isIndex(G[0])&&n.isIndex(G[1]))G=D?D[G]:G,G=C?C[G]:G,void 0!==G&&G<z.length&&(z[G].selected=1)}};
n.selIndices2selPoints=function(z){var E=z.selectedpoints;if(z=z._indexToPoints){z=r(z);for(var C=[],u=0;u<E.length;u++){var D=E[u];n.isIndex(D)&&(D=z[D],n.isIndex(D)&&C.push(D))}return C}return E};n.getTargetArray=function(z,E){E=E.target;return"string"===typeof E&&E?(z=n.nestedProperty(z,E).get(),Array.isArray(z)?z:!1):Array.isArray(E)?E:!1};n.minExtend=function(z,E){var C={};"object"!==typeof E&&(E={});var u=Object.keys(z),D;for(D=0;D<u.length;D++){var G=u[D];var J=z[G];"_"!==G.charAt(0)&&"function"!==
typeof J&&("module"===G?C[G]=J:Array.isArray(J)?C[G]="colorscale"===G?J.slice():J.slice(0,3):n.isTypedArray(J)?C[G]=J.subarray(0,3):C[G]=J&&"object"===typeof J?n.minExtend(z[G],E[G]):J)}u=Object.keys(E);for(D=0;D<u.length;D++)G=u[D],J=E[G],"object"===typeof J&&G in C&&"object"===typeof C[G]||(C[G]=J);return C};n.titleCase=function(z){return z.charAt(0).toUpperCase()+z.substr(1)};n.containsAny=function(z,E){for(var C=0;C<E.length;C++)if(-1!==z.indexOf(E[C]))return!0;return!1};n.isIE=function(){return"undefined"!==
typeof window.navigator.msSaveBlob};var p=/MSIE [1-9]\./;n.isIE9orBelow=function(){return n.isIE()&&p.test(window.navigator.userAgent)};var d=/Version\/[\d\.]+.*Safari/;n.isSafari=function(){return d.test(window.navigator.userAgent)};var e=/iPad|iPhone|iPod/;n.isIOS=function(){return e.test(window.navigator.userAgent)};n.isD3Selection=function(z){return z&&"function"===typeof z.classed};n.ensureSingle=function(z,E,C,u){var D=z.select(E+(C?"."+C:""));if(D.size())return D;z=z.append(E);C&&z.classed(C,
!0);u&&z.call(u);return z};n.ensureSingleById=function(z,E,C,u){var D=z.select(E+"#"+C);if(D.size())return D;z=z.append(E).attr("id",C);u&&z.call(u);return z};n.objectFromPath=function(z,E){z=z.split(".");for(var C,u=C={},D=0;D<z.length;D++){var G=z[D],J;(J=z[D].match(/(.*)\[([0-9]+)\]/))?(G=J[1],J=J[2],C=C[G]=[],C[J]=D===z.length-1?E:{},C=C[J]):(C[G]=D===z.length-1?E:{},C=C[G])}return u};var f=/^([^\[\.]+)\.(.+)?/,k=/^([^\.]+)\[([0-9]+)\](\.)?(.+)?/;n.expandObjectPaths=function(z){var E,C;if("object"===
typeof z&&!Array.isArray(z))for(C in z)if(z.hasOwnProperty(C))if(E=C.match(f)){var u=z[C];var D=E[1];delete z[C];z[D]=n.extendDeepNoArrays(z[D]||{},n.objectFromPath(C,n.expandObjectPaths(u))[D])}else if(E=C.match(k)){u=z[C];D=E[1];var G=parseInt(E[2]);delete z[C];z[D]=z[D]||[];"."===E[3]?(E=E[4],D=z[D][G]=z[D][G]||{},n.extendDeepNoArrays(D,n.objectFromPath(E,n.expandObjectPaths(u)))):z[D][G]=n.expandObjectPaths(u)}else z[C]=n.expandObjectPaths(z[C]);return z};n.numSeparate=function(z,E,C){C||(C=!1);
if("string"!==typeof E||0===E.length)throw Error("Separator string required for formatting!");"number"===typeof z&&(z=String(z));var u=/(\d+)(\d{3})/,D=E.charAt(0);E=E.charAt(1);z=z.split(".");var G=z[0];D=1<z.length?D+z[1]:"";if(E&&(1<z.length||4<G.length||C))for(;u.test(G);)G=G.replace(u,"$1"+E+"$2");return G+D};n.TEMPLATE_STRING_REGEX=/%{([^\s%{}:]*)([:|\|][^}]*)?}/g;var t=/^\w*$/;n.templateString=function(z,E){var C={};return z.replace(n.TEMPLATE_STRING_REGEX,function(u,D){t.test(D)?u=E[D]:(C[D]=
C[D]||n.nestedProperty(E,D).get,u=C[D]());return n.isValidTextValue(u)?u:""})};var v={max:10,count:0,name:"hovertemplate"};n.hovertemplateString=function(){return q.apply(v,arguments)};var w={max:10,count:0,name:"texttemplate"};n.texttemplateString=function(){return q.apply(w,arguments)};var y=/^[:|\|]/;n.subplotSort=function(z,E){for(var C=Math.min(z.length,E.length)+1,u=0,D=0,G=0;G<C;G++){var J=z.charCodeAt(G)||0,L=E.charCodeAt(G)||0,K=48<=J&&57>=J,H=48<=L&&57>=L;K&&(u=10*u+J-48);H&&(D=10*D+L-48);
if(!K||!H){if(u!==D)return u-D;if(J!==L)return J-L}}return D-u};var B=2E9;n.seedPseudoRandom=function(){B=2E9};n.pseudoRandom=function(){var z=B;B=(69069*B+1)%4294967296;return 429496729>Math.abs(B-z)?n.pseudoRandom():B/4294967296};n.fillText=function(z,E,C){var u=Array.isArray(C)?function(G){C.push(G)}:function(G){C.text=G},D=n.extractOption(z,E,"htx","hovertext");if(n.isValidTextValue(D))return u(D);z=n.extractOption(z,E,"tx","text");if(n.isValidTextValue(z))return u(z)};n.isValidTextValue=function(z){return z||
0===z};n.formatPercent=function(z,E){E=E||0;z=(Math.round(100*z*Math.pow(10,E))*Math.pow(.1,E)).toFixed(E)+"%";for(var C=0;C<E;C++)-1!==z.indexOf(".")&&(z=z.replace("0%","%"),z=z.replace(".%","%"));return z};n.isHidden=function(z){z=window.getComputedStyle(z).display;return!z||"none"===z};n.strTranslate=function(z,E){return z||E?"translate("+z+","+E+")":""};n.strRotate=function(z){return z?"rotate("+z+")":""};n.strScale=function(z){return 1!==z?"scale("+z+")":""};n.getTextTransform=function(z){var E=
z.noCenter,C=z.textX,u=z.textY,D=z.targetX,G=z.targetY,J=z.anchorX||0,L=z.anchorY||0,K=z.rotate;(z=z.scale)?1<z&&(z=1):z=0;return n.strTranslate(D-z*(C+J),G-z*(u+L))+n.strScale(z)+(K?"rotate("+K+(E?"":" "+C+" "+u)+")":"")};n.ensureUniformFontSize=function(z,E){var C=n.extendFlat({},E);C.size=Math.max(E.size,z._fullLayout.uniformtext.minsize||0);return C};n.join2=function(z,E,C){var u=z.length;return 1<u?z.slice(0,-1).join(E)+C+z[u-1]:z.join(E)}},{"../constants/numerical":753,"./anchor_utils":758,
"./angles":759,"./array":760,"./clean_number":761,"./clear_responsive":763,"./coerce":764,"./dates":765,"./dom":766,"./extend":768,"./filter_unique":769,"./filter_visible":770,"./geometry2d":773,"./identity":776,"./increment":777,"./is_plain_object":779,"./keyed_container":780,"./localize":781,"./loggers":782,"./make_trace_groups":783,"./matrix":784,"./mod":785,"./nested_property":786,"./noop":787,"./notifier":788,"./preserve_drawing_buffer":792,"./push_unique":793,"./regex":795,"./relative_attr":796,
"./relink_private":797,"./search":798,"./stats":801,"./throttle":804,"./to_log_range":805,d3:169,"d3-time-format":166,"fast-isnumeric":241}],779:[function(b,N,I){N.exports=function(r){return window&&window.process&&window.process.versions?"[object Object]"===Object.prototype.toString.call(r):"[object Object]"===Object.prototype.toString.call(r)&&Object.getPrototypeOf(r)===Object.prototype}},{}],780:[function(b,N,I){var r=b("./nested_property"),q=/^\w*$/;N.exports=function(m,l,a,h){a=a||"name";h=h||
"value";var g,n={};if(l&&l.length){var p=r(m,l);var d=p.get()}else d=m;l=l||"";var e={};if(d)for(g=0;g<d.length;g++)e[d[g][a]]=g;var f=q.test(h),k={set:function(t,v){var w=null===v?4:0;if(!d){if(!p||4===w)return;d=[];p.set(d)}var y=e[t];if(void 0===y){if(4===w)return;w|=3;y=d.length;e[t]=y}else v!==(f?d[y][h]:r(d[y],h).get())&&(w|=2);var B=d[y]=d[y]||{};B[a]=t;f?B[h]=v:r(B,h).set(v);null!==v&&(w&=-5);n[y]|=w;return k},get:function(t){if(d&&(t=e[t],void 0!==t))return f?d[t][h]:r(d[t],h).get()},rename:function(t,
v){var w=e[t];if(void 0===w)return k;n[w]|=1;e[v]=w;delete e[t];d[w][a]=v;return k},remove:function(t){var v=e[t];if(void 0===v)return k;var w=d[v];if(2<Object.keys(w).length)return n[v]|=2,k.set(t,null);if(f){for(g=v;g<d.length;g++)n[g]|=3;for(g=v;g<d.length;g++)e[d[g][a]]--;d.splice(v,1);delete e[t]}else r(w,h).set(null),n[v]|=6;return k},constructUpdate:function(){for(var t,v,w={},y=Object.keys(n),B=0;B<y.length;B++)v=y[B],t=l+"["+v+"]",d[v]?(n[v]&1&&(w[t+"."+a]=d[v][a]),n[v]&2&&(w[t+"."+h]=f?
n[v]&4?null:d[v][h]:n[v]&4?null:r(d[v],h).get())):w[t]=null;return w}};return k}},{"./nested_property":786}],781:[function(b,N,I){var r=b("../registry");N.exports=function(q,m){for(var l=q._context.locale,a=0;2>a;a++){for(var h=q._context.locales,g=0;2>g;g++){if(h=(h[l]||{}).dictionary)if(h=h[m])return h;h=r.localeRegistry}g=l.split("-")[0];if(g===l)break;l=g}return m}},{"../registry":911}],782:[function(b,N,I){function r(l,a){if(l&&l.apply)try{l.apply(console,a);return}catch(g){}for(var h=0;h<a.length;h++)try{l(a[h])}catch(g){console.log(a[h])}}
var q=b("../plot_api/plot_config").dfltConfig,m=b("./notifier");b=N.exports={};b.log=function(){var l;if(1<q.logging){var a=["LOG:"];for(l=0;l<arguments.length;l++)a.push(arguments[l]);r(console.trace||console.log,a)}if(1<q.notifyOnLogging){a=[];for(l=0;l<arguments.length;l++)a.push(arguments[l]);m(a.join("\x3cbr\x3e"),"long")}};b.warn=function(){var l;if(0<q.logging){var a=["WARN:"];for(l=0;l<arguments.length;l++)a.push(arguments[l]);r(console.trace||console.log,a)}if(0<q.notifyOnLogging){a=[];for(l=
0;l<arguments.length;l++)a.push(arguments[l]);m(a.join("\x3cbr\x3e"),"stick")}};b.error=function(){var l;if(0<q.logging){var a=["ERROR:"];for(l=0;l<arguments.length;l++)a.push(arguments[l]);r(console.error,a)}if(0<q.notifyOnLogging){a=[];for(l=0;l<arguments.length;l++)a.push(arguments[l]);m(a.join("\x3cbr\x3e"),"stick")}}},{"../plot_api/plot_config":815,"./notifier":788}],783:[function(b,N,I){var r=b("d3");N.exports=function(q,m,l){m=q.selectAll("g."+l.replace(/\s/g,".")).data(m,function(h){return h[0].trace.uid});
m.exit().remove();m.enter().append("g").attr("class",l);m.order();var a=q.classed("rangeplot")?"nodeRangePlot3":"node3";m.each(function(h){h[0][a]=r.select(this)});return m}},{d3:169}],784:[function(b,N,I){var r=b("gl-mat4");I.init2dArray=function(q,m){for(var l=Array(q),a=0;a<q;a++)l[a]=Array(m);return l};I.transposeRagged=function(q){var m=0,l=q.length,a,h;for(a=0;a<l;a++)m=Math.max(m,q[a].length);var g=Array(m);for(a=0;a<m;a++)for(g[a]=Array(l),h=0;h<l;h++)g[a][h]=q[h][a];return g};I.dot=function(q,
m){if(!q.length||!m.length||q.length!==m.length)return null;var l=q.length,a;if(q[0].length){var h=Array(l);for(a=0;a<l;a++)h[a]=I.dot(q[a],m)}else if(m[0].length)for(m=I.transposeRagged(m),h=Array(m.length),a=0;a<m.length;a++)h[a]=I.dot(q,m[a]);else for(a=h=0;a<l;a++)h+=q[a]*m[a];return h};I.translationMatrix=function(q,m){return[[1,0,q],[0,1,m],[0,0,1]]};I.rotationMatrix=function(q){q=q*Math.PI/180;return[[Math.cos(q),-Math.sin(q),0],[Math.sin(q),Math.cos(q),0],[0,0,1]]};I.rotationXYMatrix=function(q,
m,l){return I.dot(I.dot(I.translationMatrix(m,l),I.rotationMatrix(q)),I.translationMatrix(-m,-l))};I.apply3DTransform=function(q){return function(){var m=arguments;m=1===arguments.length?m[0]:[m[0],m[1],m[2]||0];return I.dot(q,[m[0],m[1],m[2],1]).slice(0,3)}};I.apply2DTransform=function(q){return function(){var m=arguments;3===m.length&&(m=m[0]);m=1===arguments.length?m[0]:[m[0],m[1]];return I.dot(q,[m[0],m[1],1]).slice(0,2)}};I.apply2DTransform2=function(q){var m=I.apply2DTransform(q);return function(l){return m(l.slice(0,
2)).concat(m(l.slice(2,4)))}};I.convertCssMatrix=function(q){if(q){var m=q.length;if(16===m)return q;if(6===m)return[q[0],q[1],0,0,q[2],q[3],0,0,0,0,1,0,q[4],q[5],0,1]}return[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1]};I.inverseTransformMatrix=function(q){var m=[];r.invert(m,q);return[[m[0],m[1],m[2],m[3]],[m[4],m[5],m[6],m[7]],[m[8],m[9],m[10],m[11]],[m[12],m[13],m[14],m[15]]]}},{"gl-mat4":292}],785:[function(b,N,I){N.exports={mod:function(r,q){r%=q;return 0>r?r+q:r},modHalf:function(r,q){return Math.abs(r)>
q/2?r-Math.round(r/q)*q:r}}},{}],786:[function(b,N,I){function r(p,d){return function(){var e=p,f,k;for(f=0;f<d.length-1;f++){var t=d[f];if(-1===t){t=!0;var v=[];for(k=0;k<e.length;k++)v[k]=r(e[k],d.slice(f+1))(),v[k]!==v[0]&&(t=!1);return t?v[0]:v}if("number"===typeof t&&!g(e))return;e=e[t];if("object"!==typeof e||null===e)return}if("object"===typeof e&&null!==e&&(v=e[d[f]],null!==v))return v}}function q(p,d){return void 0===p||null===p&&!d.match(n)}function m(p,d,e){return function(f){var k=p,t=
"",v=[[p,t]],w=q(f,e),y;for(y=0;y<d.length-1;y++){var B=d[y];if("number"===typeof B&&!g(k))throw"array index but container is not an array";if(-1===B){w=k;t=d.slice(y+1);B=f;var A=e,z=g(B),E=!0,C=B,u=A.replace("-1",0),D=z?!1:q(B,u),G=t[0];for(v=0;v<w.length;v++)u=A.replace("-1",v),z&&(C=B[v%B.length],D=q(C,u)),D&&(E=!1),l(w,v,G,D)&&m(w[v],t,A.replace("-1",v))(C);if(w=!E)break;else return}if(!l(k,B,d[y+1],w))break;k=k[B];if("object"!==typeof k||null===k)throw"container is not an object";A=B;h(B)?A=
"["+B+"]":t&&(A="."+B);t+=A;v.push([k,t])}if(w){if(y===d.length-1&&(delete k[d[y]],Array.isArray(k)&&+d[y]===k.length-1))for(;k.length&&void 0===k[k.length-1];)k.pop()}else k[d[y]]=f}}function l(p,d,e,f){if(void 0===p[d]){if(f)return!1;p[d]="number"===typeof e?[]:{}}return!0}function a(p,d,e){return{set:function(){throw"bad container";},get:function(){},astr:d,parts:e,obj:p}}var h=b("fast-isnumeric"),g=b("./array").isArrayOrTypedArray;N.exports=function(p,d){if(h(d))d=String(d);else if("string"!==
typeof d||"[-1]"===d.substr(d.length-4))throw"bad property string";for(var e=0,f=d.split("."),k,t;e<f.length;){if(k=String(f[e]).match(/^([^\[\]]*)((\[\-?[0-9]*\])+)$/)){if(k[1])f[e]=k[1];else if(0===e)f.splice(0,1);else throw"bad property string";k=k[2].substr(1,k[2].length-2).split("][");for(t=0;t<k.length;t++)e++,f.splice(e,0,Number(k[t]))}e++}return"object"!==typeof p?a(p,d,f):{set:m(p,f,d),get:r(p,f),astr:d,parts:f,obj:p}};var n=/(^|\.)args\[/},{"./array":760,"fast-isnumeric":241}],787:[function(b,
N,I){N.exports=function(){}},{}],788:[function(b,N,I){var r=b("d3"),q=b("fast-isnumeric"),m=[];N.exports=function(l,a){function h(n){n.duration(700).style("opacity",0).each("end",function(p){p=m.indexOf(p);-1!==p&&m.splice(p,1);r.select(this).remove()})}if(-1===m.indexOf(l)){m.push(l);var g=1E3;q(a)?g=a:"long"===a&&(g=3E3);l=r.select("body").selectAll(".plotly-notifier").data([0]);l.enter().append("div").classed("plotly-notifier",!0);l.selectAll(".notifier-note").data(m).enter().append("div").classed("notifier-note",
!0).style("opacity",0).each(function(n){var p=r.select(this);p.append("button").classed("notifier-close",!0).html("\x26times;").on("click",function(){p.transition().call(h)});var d=p.append("p");n=n.split(/<br\s*\/?>/g);for(var e=0;e<n.length;e++)e&&d.append("br"),d.append("span").text(n[e]);"stick"===a?p.transition().duration(350).style("opacity",1):p.transition().duration(700).style("opacity",1).transition().delay(g).call(h)})}}},{d3:169,"fast-isnumeric":241}],789:[function(b,N,I){var r=b("./setcursor");
N.exports=function(q,m){var l=q.attr("data-savedcursor");if(m){if(!l){l=(q.attr("class")||"").split(" ");for(var a=0;a<l.length;a++){var h=l[a];0===h.indexOf("cursor-")&&q.attr("data-savedcursor",h.substr(7)).classed(h,!1)}q.attr("data-savedcursor")||q.attr("data-savedcursor","!!")}r(q,m)}else l&&(q.attr("data-savedcursor",null),"!!"===l?r(q):r(q,l))}},{"./setcursor":799}],790:[function(b,N,I){var r=b("./matrix").dot,q=b("../constants/numerical").BADNUM,m=N.exports={};m.tester=function(l){function a(w,
y){var B=w[0],A=w[1];return B===q||B<n||B>p||A===q||A<d||A>e||y&&k(w)?!1:!0}function h(w,y){var B=w[0];w=w[1];if(B===q||B<n||B>p||w===q||w<d||w>e)return!1;var A=g.length,z=g[0][0],E=g[0][1],C=0,u;for(u=1;u<A;u++){var D=z;var G=E;z=g[u][0];E=g[u][1];var J=Math.min(D,z);if(!(B<J||B>Math.max(D,z)||w>Math.max(G,E)))if(w<Math.min(G,E))B!==J&&C++;else{D=z===D?w:G+(B-D)*(E-G)/(z-D);if(w===D)return 1===u&&y?!1:!0;w<=D&&B!==J&&C++}}return 1===C%2}var g=l.slice(),n=g[0][0],p=n,d=g[0][1],e=d;g.push(g[0]);for(l=
1;l<g.length;l++)n=Math.min(n,g[l][0]),p=Math.max(p,g[l][0]),d=Math.min(d,g[l][1]),e=Math.max(e,g[l][1]);var f=!1;if(5===g.length)if(g[0][0]===g[1][0]){if(g[2][0]===g[3][0]&&g[0][1]===g[3][1]&&g[1][1]===g[2][1]){f=!0;var k=function(w){return w[0]===g[0][0]}}}else g[0][1]===g[1][1]&&g[2][1]===g[3][1]&&g[0][0]===g[3][0]&&g[1][0]===g[2][0]&&(f=!0,k=function(w){return w[1]===g[0][1]});var t=!0,v=g[0];for(l=1;l<g.length;l++)if(v[0]!==g[l][0]||v[1]!==g[l][1]){t=!1;break}return{xmin:n,xmax:p,ymin:d,ymax:e,
pts:g,contains:f?a:h,isRect:f,degenerate:t}};m.isSegmentBent=function(l,a,h,g){var n=l[a],p=[l[h][0]-n[0],l[h][1]-n[1]],d=r(p,p),e=Math.sqrt(d);e=[-p[1]/e,p[0]/e];for(a+=1;a<h;a++){var f=[l[a][0]-n[0],l[a][1]-n[1]];var k=r(f,p);if(0>k||k>d||Math.abs(r(f,e))>g)return!0}return!1};m.filter=function(l,a){function h(e){l.push(e);e=g.length;var f=n;g.splice(p+1);for(var k=f+1;k<l.length;k++)if(k===l.length-1||m.isSegmentBent(l,f,k+1,a))g.push(l[k]),g.length<e-2&&(n=k,p=g.length-1),f=k}var g=[l[0]],n=0,
p=0;if(1<l.length){var d=l.pop();h(d)}return{addPt:h,raw:l,filtered:g}}},{"../constants/numerical":753,"./matrix":784}],791:[function(b,N,I){(function(r){(function(){var q=b("./show_no_webgl_msg"),m=b("regl");N.exports=function(l,a){var h=l._fullLayout,g=!0;h._glcanvas.each(function(n){if(!n.regl&&(!n.pick||h._has("parcoords"))){try{n.regl=m({canvas:this,attributes:{antialias:!n.pick,preserveDrawingBuffer:!0},pixelRatio:l._context.plotGlPixelRatio||r.devicePixelRatio,extensions:a||[]})}catch(p){g=
!1}n.regl||(g=!1);g&&this.addEventListener("webglcontextlost",function(p){l&&l.emit&&l.emit("plotly_webglcontextlost",{event:p,layer:n.key})},!1)}});g||q({container:h._glcontainer.node()});return g}}).call(this)}).call(this,"undefined"!==typeof od?od:"undefined"!==typeof self?self:"undefined"!==typeof window?window:{})},{"./show_no_webgl_msg":800,regl:540}],792:[function(b,N,I){var r=b("fast-isnumeric"),q=b("is-mobile");N.exports=function(m){if(m&&m.hasOwnProperty("userAgent"))var l=m.userAgent;else"undefined"!==
typeof navigator&&(l=navigator.userAgent),l&&l.headers&&"string"===typeof l.headers["user-agent"]&&(l=l.headers["user-agent"]);if("string"!==typeof l)return!0;m=q({ua:{headers:{"user-agent":l}},tablet:!0,featureDetect:!1});if(!m){l=l.split(" ");for(var a=1;a<l.length;a++)if(-1!==l[a].indexOf("Safari"))for(var h=a-1;-1<h;h--){var g=l[h];if("Version/"===g.substr(0,8)&&(g=g.substr(8).split(".")[0],r(g)&&(g=+g),13<=g))return!0}}return m}},{"fast-isnumeric":241,"is-mobile":467}],793:[function(b,N,I){N.exports=
function(r,q){if(q instanceof RegExp){for(var m=q.toString(),l=0;l<r.length;l++)if(r[l]instanceof RegExp&&r[l].toString()===m)return r;r.push(q)}else!q&&0!==q||-1!==r.indexOf(q)||r.push(q);return r}},{}],794:[function(b,N,I){var r=b("../lib"),q=b("../plot_api/plot_config").dfltConfig,m={add:function(l,a,h,g,n){l.undoQueue=l.undoQueue||{index:0,queue:[],sequence:!1};var p=l.undoQueue.index;if(l.autoplay)l.undoQueue.inSequence||(l.autoplay=!1);else{if(!l.undoQueue.sequence||l.undoQueue.beginSequence){var d=
{undo:{calls:[],args:[]},redo:{calls:[],args:[]}};l.undoQueue.queue.splice(p,l.undoQueue.queue.length-p,d);l.undoQueue.index+=1}else d=l.undoQueue.queue[p-1];l.undoQueue.beginSequence=!1;d&&(d.undo.calls.unshift(a),d.undo.args.unshift(h),d.redo.calls.push(g),d.redo.args.push(n));l.undoQueue.queue.length>q.queueLength&&(l.undoQueue.queue.shift(),l.undoQueue.index--)}},startSequence:function(l){l.undoQueue=l.undoQueue||{index:0,queue:[],sequence:!1};l.undoQueue.sequence=!0;l.undoQueue.beginSequence=
!0},stopSequence:function(l){l.undoQueue=l.undoQueue||{index:0,queue:[],sequence:!1};l.undoQueue.sequence=!1;l.undoQueue.beginSequence=!1},undo:function(l){var a;if(l.framework&&l.framework.isPolar)l.framework.undo();else if(!(void 0===l.undoQueue||isNaN(l.undoQueue.index)||0>=l.undoQueue.index)){l.undoQueue.index--;var h=l.undoQueue.queue[l.undoQueue.index];l.undoQueue.inSequence=!0;for(a=0;a<h.undo.calls.length;a++)m.plotDo(l,h.undo.calls[a],h.undo.args[a]);l.undoQueue.inSequence=!1;l.autoplay=
!1}},redo:function(l){var a;if(l.framework&&l.framework.isPolar)l.framework.redo();else if(!(void 0===l.undoQueue||isNaN(l.undoQueue.index)||l.undoQueue.index>=l.undoQueue.queue.length)){var h=l.undoQueue.queue[l.undoQueue.index];l.undoQueue.inSequence=!0;for(a=0;a<h.redo.calls.length;a++)m.plotDo(l,h.redo.calls[a],h.redo.args[a]);l.undoQueue.inSequence=!1;l.autoplay=!1;l.undoQueue.index++}},plotDo:function(l,a,h){l.autoplay=!0;for(var g=[],n,p=0;p<h.length;p++)n=h[p],g[p]=n===l?n:"object"===typeof n?
Array.isArray(n)?r.extendDeep([],n):r.extendDeepAll({},n):n;a.apply(null,g)}};N.exports=m},{"../lib":778,"../plot_api/plot_config":815}],795:[function(b,N,I){I.counter=function(r,q,m,l){q=(q||"")+(m?"":"$");l=!1===l?"":"^";return"xy"===r?new RegExp(l+"x([2-9]|[1-9][0-9]+)?y([2-9]|[1-9][0-9]+)?"+q):new RegExp(l+r+"([2-9]|[1-9][0-9]+)?"+q)}},{}],796:[function(b,N,I){var r=/^(.*)(\.[^\.\[\]]+|\[\d\])$/,q=/^[^\.\[\]]+$/;N.exports=function(m,l){for(;l;){var a=m.match(r);if(a)m=a[1];else if(m.match(q))m=
"";else throw Error("bad relativeAttr call:"+[m,l]);if("^"===l.charAt(0))l=l.slice(1);else break}return m&&"["!==l.charAt(0)?m+"."+l:m+l}},{}],797:[function(b,N,I){var r=b("./array").isArrayOrTypedArray,q=b("./is_plain_object");N.exports=function h(l,a){for(var g in a){var n=a[g],p=l[g];if(p!==n)if("_"===g.charAt(0)||"function"===typeof n)g in l||(l[g]=n);else if(r(n)&&r(p)&&q(n[0])){if("customdata"!==g&&"ids"!==g)for(var d=Math.min(n.length,p.length),e=0;e<d;e++)p[e]!==n[e]&&q(n[e])&&q(p[e])&&h(p[e],
n[e])}else q(n)&&q(p)&&(h(p,n),Object.keys(p).length||delete l[g])}}},{"./array":760,"./is_plain_object":779}],798:[function(b,N,I){function r(p,d){return p<d}function q(p,d){return p<=d}function m(p,d){return p>d}function l(p,d){return p>=d}var a=b("fast-isnumeric"),h=b("./loggers"),g=b("./identity"),n=b("../constants/numerical").BADNUM;I.findBin=function(p,d,e){if(a(d.start))return e?Math.ceil((p-d.start)/d.size-1E-9)-1:Math.floor((p-d.start)/d.size+1E-9);var f=0,k=d.length,t=0,v=1<k?(d[k-1]-d[0])/
(k-1):1;var w=0<=v?e?r:q:e?l:m;for(p+=1E-9*v*(e?-1:1)*(0<=v?1:-1);f<k&&100>t++;)e=Math.floor((f+k)/2),w(d[e],p)?f=e+1:k=e;90<t&&h.log("Long binary search...");return f-1};I.sorterAsc=function(p,d){return p-d};I.sorterDes=function(p,d){return d-p};I.distinctVals=function(p,d){var e=(d||{}).unitMinDiff;p=p.slice();p.sort(I.sorterAsc);for(d=p.length-1;-1<d&&p[d]===n;d--);var f=1;e||(f=p[d]-p[0]||1);e=f/(d||1)/1E4;for(var k=[],t,v=0;v<=d;v++){var w=p[v],y=w-t;void 0===t?(k.push(w),t=w):y>e&&(f=Math.min(f,
y),k.push(w),t=w)}return{vals:k,minDiff:f}};I.roundUp=function(p,d,e){for(var f=0,k=d.length-1,t=0,v=e?0:1,w=e?1:0,y=e?Math.ceil:Math.floor;f<k&&100>t++;)e=y((f+k)/2),d[e]<=p?f=e+v:k=e-w;return d[f]};I.sort=function(p,d){for(var e=0,f=0,k=1;k<p.length;k++){var t=d(p[k],p[k-1]);0>t?e=1:0<t&&(f=1);if(e&&f)return p.sort(d)}return f?p:p.reverse()};I.findIndexOfMin=function(p,d){d=d||g;for(var e=Infinity,f,k=0;k<p.length;k++){var t=d(p[k]);t<e&&(e=t,f=k)}return f}},{"../constants/numerical":753,"./identity":776,
"./loggers":782,"fast-isnumeric":241}],799:[function(b,N,I){N.exports=function(r,q){(r.attr("class")||"").split(" ").forEach(function(m){0===m.indexOf("cursor-")&&r.classed(m,!1)});q&&r.classed("cursor-"+q,!0)}},{}],800:[function(b,N,I){var r=b("../components/color"),q=function(){};N.exports=function(m){for(var l in m)"function"===typeof m[l]&&(m[l]=q);m.destroy=function(){m.container.parentNode.removeChild(m.container)};l=document.createElement("div");l.className="no-webgl";l.style.cursor="pointer";
l.style.fontSize="24px";l.style.color=r.defaults[0];l.style.position="absolute";l.style.left=l.style.top="0px";l.style.width=l.style.height="100%";l.style["background-color"]=r.lightLine;l.style["z-index"]=30;var a=document.createElement("p");a.textContent="WebGL is not supported by your browser - visit https://get.webgl.org for more info";a.style.position="relative";a.style.top="50%";a.style.left="50%";a.style.height="30%";a.style.width="50%";a.style.margin="-15% 0 0 -25%";l.appendChild(a);m.container.appendChild(l);
m.container.style.background="#FFFFFF";m.container.onclick=function(){window.open("https://get.webgl.org")};return!1}},{"../components/color":643}],801:[function(b,N,I){var r=b("fast-isnumeric"),q=b("./array").isArrayOrTypedArray;I.aggNums=function(m,l,a,h){var g;if(!h||h>a.length)h=a.length;r(l)||(l=!1);if(q(a[0])){var n=Array(h);for(g=0;g<h;g++)n[g]=I.aggNums(m,l,a[g]);a=n}for(g=0;g<h;g++)r(l)?r(a[g])&&(l=m(+l,+a[g])):l=a[g];return l};I.len=function(m){return I.aggNums(function(l){return l+1},0,
m)};I.mean=function(m,l){l||(l=I.len(m));return I.aggNums(function(a,h){return a+h},0,m)/l};I.midRange=function(m){if(void 0!==m&&0!==m.length)return(I.aggNums(Math.max,null,m)+I.aggNums(Math.min,null,m))/2};I.variance=function(m,l,a){l||(l=I.len(m));r(a)||(a=I.mean(m,l));return I.aggNums(function(h,g){return h+Math.pow(g-a,2)},0,m)/l};I.stdev=function(m,l,a){return Math.sqrt(I.variance(m,l,a))};I.median=function(m){m=m.slice().sort();return I.interp(m,.5)};I.interp=function(m,l){if(!r(l))throw"n should be a finite number";
l=l*m.length-.5;if(0>l)return m[0];if(l>m.length-1)return m[m.length-1];var a=l%1;return a*m[Math.ceil(l)]+(1-a)*m[Math.floor(l)]}},{"./array":760,"fast-isnumeric":241}],802:[function(b,N,I){var r=b("color-normalize");N.exports=function(q){return q?r(q):[0,0,0,1]}},{"color-normalize":125}],803:[function(b,N,I){function r(Q,M,P){var T,O,U,S;MathJax.Hub.Queue(function(){O=g.extendDeepAll({},MathJax.Hub.config);U=MathJax.Hub.processSectionDelay;void 0!==MathJax.Hub.processSectionDelay&&(MathJax.Hub.processSectionDelay=
0);return MathJax.Hub.Config({messageStyle:"none",tex2jax:{inlineMath:[["$","$"],["\\(","\\)"]]},displayAlign:"left"})},function(){T=MathJax.Hub.config.menuSettings.renderer;if("SVG"!==T)return MathJax.Hub.setRenderer("SVG")},function(){var X="math-output-"+g.randstr({},64);S=h.select("body").append("div").attr({id:X}).style({visibility:"hidden",position:"absolute"}).style({"font-size":M.fontSize+"px"}).text(Q.replace(f,"\\lt ").replace(k,"\\gt "));return MathJax.Hub.Typeset(S.node())},function(){var X=
h.select("body").select("#MathJax_SVG_glyphs");if(S.select(".MathJax_SVG").empty()||!S.select("svg").node())g.log("There was an error in the tex syntax.",Q),P();else{var ba=S.select("svg").node().getBoundingClientRect();P(S.select(".MathJax_SVG"),X,ba)}S.remove();if("SVG"!==T)return MathJax.Hub.setRenderer(T)},function(){void 0!==U&&(MathJax.Hub.processSectionDelay=U);return MathJax.Hub.Config(O)})}function q(Q,M){return Q?(Q=(Q=Q.match(M))&&(Q[3]||Q[4]))&&m(Q):null}function m(Q){return Q.replace(H,
function(M,P){if("#"===P.charAt(0))if(P="x"===P.charAt(1)?parseInt(P.substr(2),16):parseInt(P.substr(1),10),1114111<P)P=void 0;else{var T=String.fromCodePoint;T?P=T(P):(T=String.fromCharCode,P=65535>=P?T(P):T((P>>10)+55232,P%1024+56320))}else P=K[P];return P||M})}function l(Q,M){function P(){ba++;var qa=document.createElementNS(p.svg,"tspan");h.select(qa).attr({class:"line",dy:ba*d+"em"});Q.appendChild(qa);ca=qa;var pa=X;X=[{node:qa}];if(1<pa.length)for(qa=1;qa<pa.length;qa++)T(pa[qa])}function T(qa){var pa=
qa.type,na={};if("a"===pa){var ka="a";var ua=qa.target,va=qa.href,Ca=qa.popup;va&&(na={"xlink:xlink:show":"_blank"===ua||"_"!==ua.charAt(0)?"new":"replace",target:ua,"xlink:xlink:href":va},Ca&&(na.onclick='window.open(this.href.baseVal,this.target.baseVal,"'+Ca+'");return false;'))}else ka="tspan";qa.style&&(na.style=qa.style);ka=document.createElementNS(p.svg,ka);"sup"===pa||"sub"===pa?(O(ca,y),ca.appendChild(ka),ua=document.createElementNS(p.svg,"tspan"),O(ua,y),h.select(ua).attr("dy",w[pa]),na.dy=
v[pa],ca.appendChild(ka),ca.appendChild(ua)):ca.appendChild(ka);h.select(ka).attr(na);ca=qa.node=ka;X.push(qa)}function O(qa,pa){qa.appendChild(document.createTextNode(pa))}function U(qa){if(1===X.length)g.log("Ignoring unexpected end tag \x3c/"+qa+"\x3e.",M);else{var pa=X.pop();qa!==pa.type&&g.log("Start tag \x3c"+pa.type+"\x3e doesnt match end tag \x3c"+qa+"\x3e. Pretending it did match.",M);ca=X[X.length-1].node}}M=M.replace(A," ");var S=!1,X=[],ba=-1;if(C.test(M))P();else{var ca=Q;X=[{node:Q}]}for(var ia=
M.split(z),ja=0;ja<ia.length;ja++){var la=ia[ja],da=la.match(E),oa=da&&da[2].toLowerCase(),sa=t[oa];if("br"===oa)P();else if(void 0===sa)O(ca,m(la));else if(da[1])U(oa);else{la=da[4];da={type:oa};var ma=q(la,u);ma?(ma=ma.replace(L,"$1 fill:"),sa&&(ma+=";"+sa)):sa&&(ma=sa);ma&&(da.style=ma);"a"===oa&&(S=!0,oa=q(la,D))&&(sa=document.createElement("a"),sa.href=oa,-1!==B.indexOf(sa.protocol)&&(da.href=encodeURI(decodeURI(oa)),da.target=q(la,G)||"_blank",da.popup=q(la,J)));T(da)}}return S}function a(Q,
M,P){var T=P.horizontalAlign,O=P.verticalAlign||"top",U=Q.node().getBoundingClientRect(),S=M.node().getBoundingClientRect(),X;var ba="bottom"===O?function(){return U.bottom-X.height}:"middle"===O?function(){return U.top+(U.height-X.height)/2}:function(){return U.top};var ca="right"===T?function(){return U.right-X.width}:"center"===T?function(){return U.left+(U.width-X.width)/2}:function(){return U.left};return function(){X=this.node().getBoundingClientRect();var ia=ca()-S.left,ja=ba()-S.top,la=P.gd||
{};P.gd&&(la._fullLayout._calcInverseTransform(la),ja=g.apply3DTransform(la._fullLayout._invTransform)(ia,ja),ia=ja[0],ja=ja[1]);this.style({top:ja+"px",left:ia+"px","z-index":1E3});return this}}var h=b("d3"),g=b("../lib"),n=g.strTranslate,p=b("../constants/xmlns_namespaces"),d=b("../constants/alignment").LINE_SPACING,e=/([^$]*)([$]+[^$]*[$]+)([^$]*)/;I.convertToTspans=function(Q,M,P){function T(){S.empty()||(X=Q.attr("class")+"-math",S.select("svg."+X).remove());Q.text("").style("white-space","pre");
l(Q.node(),O)&&Q.style("pointer-events","all");I.positionText(Q);P&&P.call(Q)}var O=Q.text(),U=!Q.attr("data-notex")&&"undefined"!==typeof MathJax&&O.match(e),S=h.select(Q.node().parentNode);if(!S.empty()){var X=Q.attr("class")?Q.attr("class").split(" ")[0]:"text";X+="-math";S.selectAll("svg."+X).remove();S.selectAll("g."+X+"-group").remove();Q.style("display",null).attr({"data-unformatted":O,"data-math":"N"});U?(M&&M._promises||[]).push(new Promise(function(ba){Q.style("display","none");var ca=parseInt(Q.node().style.fontSize,
10);r(U[2],{fontSize:ca},function(ia,ja,la){S.selectAll("svg."+X).remove();S.selectAll("g."+X+"-group").remove();if((ia=ia&&ia.select("svg"))&&ia.node()){var da=S.append("g").classed(X+"-group",!0).attr({"pointer-events":"none","data-unformatted":O,"data-math":"Y"});da.node().appendChild(ia.node());ja&&ja.node()&&ia.node().insertBefore(ja.node().cloneNode(!0),ia.node().firstChild);ia.attr({"class":X,height:la.height,preserveAspectRatio:"xMinYMin meet"}).style({overflow:"visible","pointer-events":"none"});
ja=Q.node().style.fill||"black";la=ia.select("g");la.attr({fill:ja,stroke:ja});ja=la.node().getBoundingClientRect().width;la=la.node().getBoundingClientRect().height;var oa=+Q.attr("x")-ja*{start:0,middle:.5,end:1}[Q.attr("text-anchor")||"start"],sa=-(ca||Q.node().getBoundingClientRect().height)/4;"y"===X[0]?(da.attr({transform:"rotate("+[-90,+Q.attr("x"),+Q.attr("y")]+")"+n(-ja/2,sa-la/2)}),ia.attr({x:+Q.attr("x"),y:+Q.attr("y")})):"l"===X[0]?ia.attr({x:Q.attr("x"),y:sa-la/2}):"a"===X[0]&&0!==X.indexOf("atitle")?
ia.attr({x:0,y:sa}):ia.attr({x:oa,y:+Q.attr("y")+sa-la/2});P&&P.call(Q,da);ba(da)}else T(),ba()})})):T();return Q}};var f=/(<|&lt;|&#60;)/g,k=/(>|&gt;|&#62;)/g,t={sup:"font-size:70%",sub:"font-size:70%",b:"font-weight:bold",i:"font-style:italic",a:"cursor:pointer",span:"",em:"font-style:italic;font-weight:bold"},v={sub:"0.3em",sup:"-0.6em"},w={sub:"-0.21em",sup:"0.42em"},y="",B=["http:","https:","mailto:","",void 0,":"],A=I.NEWLINES=/(\r\n?|\n)/g,z=/(<[^<>]*>)/,E=/<(\/?)([^ >]*)(\s+(.*))?>/i,C=/<br(\s+.*)?>/i;
I.BR_TAG_ALL=/<br(\s+.*)?>/gi;var u=/(^|[\s"'])style\s*=\s*("([^"]*);?"|'([^']*);?')/i,D=/(^|[\s"'])href\s*=\s*("([^"]*)"|'([^']*)')/i,G=/(^|[\s"'])target\s*=\s*("([^"\s]*)"|'([^'\s]*)')/i,J=/(^|[\s"'])popup\s*=\s*("([\w=,]*)"|'([\w=,]*)')/i,L=/(^|;)\s*color:/;I.plainText=function(Q,M){M=M||{};var P=void 0!==M.len&&-1!==M.len?M.len:Infinity;M=void 0!==M.allowedTags?M.allowedTags:["br"];var T=Q.split(z);Q=[];for(var O="",U=0,S=0;S<T.length;S++){var X=T[S],ba=X.match(E);if(ba=ba&&ba[2].toLowerCase())-1!==
M.indexOf(ba)&&(Q.push(X),O=ba);else{ba=X.length;if(U+ba<P)Q.push(X),U+=ba;else if(U<P){M=P-U;O&&("br"!==O||3>=M||3>=ba)&&Q.pop();3<P?Q.push(X.substr(0,M-3)+"..."):Q.push(X.substr(0,M));break}O=""}}return Q.join("")};var K={mu:"",amp:"\x26",lt:"\x3c",gt:"\x3e",nbsp:"",times:"",plusmn:"",deg:""},H=/&(#\d+|#x[\da-fA-F]+|[a-z]+);/g;I.convertEntities=m;I.sanitizeHTML=function(Q){Q=Q.replace(A," ");var M=document.createElement("p"),P=M,T=[];Q=Q.split(z);for(var O=0;O<Q.length;O++){var U=Q[O],S=U.match(E),
X=S&&S[2].toLowerCase();if(X in t)if(S[1])T.length&&(P=T.pop());else{S=S[4];U=(U=q(S,u))?{style:U}:{};if("a"===X){var ba=q(S,D);if(ba){var ca=document.createElement("a");ca.href=ba;-1!==B.indexOf(ca.protocol)&&(U.href=encodeURI(decodeURI(ba)),S=q(S,G))&&(U.target=S)}}X=document.createElement(X);P.appendChild(X);h.select(X).attr(U);P=X;T.push(X)}else P.appendChild(document.createTextNode(m(U)))}return M.innerHTML};I.lineCount=function(Q){return Q.selectAll("tspan.line").size()||1};I.positionText=function(Q,
M,P){return Q.each(function(){function T(X,ba){void 0===ba?(ba=O.attr(X),null===ba&&(O.attr(X,0),ba=0)):O.attr(X,ba);return ba}var O=h.select(this),U=T("x",M),S=T("y",P);"text"===this.nodeName&&O.selectAll("tspan.line").attr({x:U,y:S})})};I.makeEditable=function(Q,M){function P(){O();Q.style({opacity:0});var ca=ba.attr("class");(ca=ca?"."+ca.split(" ")[0]+"-math-group":"[class*\x3d-math-group]")&&h.select(Q.node().parentNode).select(ca).style({opacity:0})}function T(ca){ca=ca.node();var ia=document.createRange();
ia.selectNodeContents(ca);var ja=window.getSelection();ja.removeAllRanges();ja.addRange(ia);ca.focus()}function O(){var ca=h.select(U).select(".svg-container"),ia=ca.append("div"),ja=Q.node().style,la=parseFloat(ja.fontSize||12),da=M.text;void 0===da&&(da=Q.attr("data-unformatted"));ia.classed("plugin-editable editable",!0).style({position:"absolute","font-family":ja.fontFamily||"Arial","font-size":la,color:M.fill||ja.fill||"black",opacity:1,"background-color":M.background||"transparent",outline:"#ffffff33 1px solid",
margin:[-la/8+1,0,0,-1].join("px ")+"px",padding:"0","box-sizing":"border-box"}).attr({contenteditable:!0}).text(da).call(a(Q,ca,M)).on("blur",function(){U._editing=!1;Q.text(this.textContent).style({opacity:1});var oa=h.select(this).attr("class");(oa=oa?"."+oa.split(" ")[0]+"-math-group":"[class*\x3d-math-group]")&&h.select(Q.node().parentNode).select(oa).style({opacity:0});oa=this.textContent;h.select(this).transition().duration(0).remove();h.select(document).on("mouseup",null);X.edit.call(Q,oa)}).on("focus",
function(){var oa=this;U._editing=!0;h.select(document).on("mouseup",function(){if(h.event.target===oa)return!1;document.activeElement===ia.node()&&ia.node().blur()})}).on("keyup",function(){27===h.event.which?(U._editing=!1,Q.style({opacity:1}),h.select(this).style({opacity:0}).on("blur",function(){return!1}).transition().remove(),X.cancel.call(Q,this.textContent)):(X.input.call(Q,this.textContent),h.select(this).call(a(Q,ca,M)))}).on("keydown",function(){13===h.event.which&&this.blur()}).call(T)}
var U=M.gd,S=M.delegate,X=h.dispatch("edit","input","cancel"),ba=S||Q;Q.style({"pointer-events":S?"none":"all"});if(1!==Q.size())throw Error("boo");if(M.immediate)P();else ba.on("click",P);return h.rebind(Q,X,"on")}},{"../constants/alignment":745,"../constants/xmlns_namespaces":754,"../lib":778,d3:169}],804:[function(b,N,I){function r(m){m&&null!==m.timer&&(clearTimeout(m.timer),m.timer=null)}var q={};I.throttle=function(m,l,a){function h(){a();g.ts=Date.now();g.onDone&&(g.onDone(),g.onDone=null)}
var g=q[m],n=Date.now();if(!g){for(var p in q)q[p].ts<n-6E4&&delete q[p];g=q[m]={ts:0,timer:null}}r(g);n>g.ts+l?h():g.timer=setTimeout(function(){h();g.timer=null},l)};I.done=function(m){var l=q[m];return l&&l.timer?new Promise(function(a){var h=l.onDone;l.onDone=function(){h&&h();a();l.onDone=null}}):Promise.resolve()};I.clear=function(m){if(m)r(q[m]),delete q[m];else for(var l in q)I.clear(l)}},{}],805:[function(b,N,I){var r=b("fast-isnumeric");N.exports=function(q,m){if(0<q)return Math.log(q)/
Math.LN10;q=Math.log(Math.min(m[0],m[1]))/Math.LN10;r(q)||(q=Math.log(Math.max(m[0],m[1]))/Math.LN10-6);return q}},{"fast-isnumeric":241}],806:[function(b,N,I){N=N.exports={};var r=b("../plots/geo/constants").locationmodeToLayer,q=b("topojson-client").feature;N.getTopojsonName=function(m){return[m.scope.replace(/ /g,"-"),"_",m.resolution.toString(),"m"].join("")};N.getTopojsonPath=function(m,l){return m+l+".json"};N.getTopojsonFeatures=function(m,l){return q(l,l.objects[r[m.locationmode]]).features}},
{"../plots/geo/constants":858,"topojson-client":579}],807:[function(b,N,I){N.exports={moduleType:"locale",name:"en-US",dictionary:{"Click to enter Colorscale title":"Click to enter Colorscale title"},format:{date:"%m/%d/%Y"}}},{}],808:[function(b,N,I){N.exports={moduleType:"locale",name:"en",dictionary:{"Click to enter Colorscale title":"Click to enter Colourscale title"},format:{days:"Sunday Monday Tuesday Wednesday Thursday Friday Saturday".split(" "),shortDays:"Sun Mon Tue Wed Thu Fri Sat".split(" "),
months:"January February March April May June July August September October November December".split(" "),shortMonths:"Jan Feb Mar Apr May Jun Jul Aug Sep Oct Nov Dec".split(" "),periods:["AM","PM"],dateTime:"%a %b %e %X %Y",date:"%d/%m/%Y",time:"%H:%M:%S",decimal:".",thousands:",",grouping:[3],currency:["$",""],year:"%Y",month:"%b %Y",dayMonth:"%b %-d",dayMonthYear:"%b %-d, %Y"}}},{}],809:[function(b,N,I){var r=b("../registry");N.exports=function(q){for(var m=r.layoutArrayContainers,l=r.layoutArrayRegexes,
a=q.split("[")[0],h,g,n=0;n<l.length;n++)if((g=q.match(l[n]))&&0===g.index){h=g[0];break}h||(h=m[m.indexOf(a)]);if(!h)return!1;q=q.substr(h.length);return q?(g=q.match(/^\[(0|[1-9][0-9]*)\](\.(.+))?$/))?{array:h,index:Number(g[1]),property:g[3]||""}:!1:{array:h,index:"",property:""}}},{"../registry":911}],810:[function(b,N,I){function r(n){for(var p={},d=0;d<n.length;d++)p[n[d]]=!1;return p}function q(n,p,d){n=l({},n);for(var e in n){var f=n[e];a(f)&&(n[e]=m(f,p,d,e))}"from-root"===d&&(n.editType=
p);return n}function m(n,p,d,e){if(n.valType){d=l({},n);d.editType=p;if(Array.isArray(n.items))for(d.items=Array(n.items.length),e=0;e<n.items.length;e++)d.items[e]=m(n.items[e],p,"from-root");return d}return q(n,p,"_"===e.charAt(0)?"nested":"from-root")}b=b("../lib");var l=b.extendFlat,a=b.isPlainObject;b={valType:"flaglist",extras:["none"],flags:"calc clearAxisTypes plot style markerSize colorbars".split(" ")};I={valType:"flaglist",extras:["none"],flags:"calc plot legend ticks axrange layoutstyle modebar camera arraydraw colorbars".split(" ")};
var h=b.flags.slice().concat(["fullReplot"]),g=I.flags.slice().concat("layoutReplot");N.exports={traces:b,layout:I,traceFlags:function(){return r(h)},layoutFlags:function(){return r(g)},update:function(n,p){if((p=p.editType)&&"none"!==p){p=p.split("+");for(var d=0;d<p.length;d++)n[p[d]]=!0}},overrideAll:q}},{"../lib":778}],811:[function(b,N,I){function r(B,A){var z=B[A],E=A.charAt(0);z&&"paper"!==z&&(B[A]=k(z,E,!0))}function q(B){function A(z,E){var C=B.title&&B.title[E];B[z]&&!C&&(B.title||(B.title=
{}),B.title[E]=B[z],delete B[z])}if(B){if("string"===typeof B.title||"number"===typeof B.title)B.title={text:B.title};A("titlefont","font");A("titleposition","position");A("titleside","side");A("titleoffset","offset")}}function m(B){if(!d.isPlainObject(B))return!1;var A=B.name;delete B.name;delete B.showlegend;return("string"===typeof A||"number"===typeof A)&&String(A)}function l(B){var A="middle",z="center";"string"===typeof B&&(-1!==B.indexOf("top")?A="top":-1!==B.indexOf("bottom")&&(A="bottom"),
-1!==B.indexOf("left")?z="left":-1!==B.indexOf("right")&&(z="right"));return A+" "+z}function a(B,A){return A in B&&"object"===typeof B[A]&&0===Object.keys(B[A]).length}function h(B){var A=B.search(w);if(0<A)return B.substr(0,A)}var g=b("fast-isnumeric"),n=b("gl-mat4/fromQuat"),p=b("../registry"),d=b("../lib"),e=b("../plots/plots");N=b("../plots/cartesian/axis_ids");var f=b("../components/color"),k=N.cleanId,t=N.getFromTrace,v=p.traceIs;I.clearPromiseQueue=function(B){Array.isArray(B._promises)&&
0<B._promises.length&&d.log("Clearing previous rejected promises from queue.");B._promises=[]};I.cleanLayout=function(B){var A;B||(B={});B.xaxis1&&(B.xaxis||(B.xaxis=B.xaxis1),delete B.xaxis1);B.yaxis1&&(B.yaxis||(B.yaxis=B.yaxis1),delete B.yaxis1);B.scene1&&(B.scene||(B.scene=B.scene1),delete B.scene1);var z=(e.subplotsRegistry.cartesian||{}).attrRegex,E=(e.subplotsRegistry.polar||{}).attrRegex,C=(e.subplotsRegistry.ternary||{}).attrRegex,u=(e.subplotsRegistry.gl3d||{}).attrRegex,D=Object.keys(B);
for(A=0;A<D.length;A++){var G=D[A];if(z&&z.test(G)){G=B[G];G.anchor&&"free"!==G.anchor&&(G.anchor=k(G.anchor));G.overlaying&&(G.overlaying=k(G.overlaying));G.type||(G.isdate?G.type="date":G.islog?G.type="log":!1===G.isdate&&!1===G.islog&&(G.type="linear"));if("withzero"===G.autorange||"tozero"===G.autorange)G.autorange=!0,G.rangemode="tozero";delete G.islog;delete G.isdate;delete G.categories;a(G,"domain")&&delete G.domain;void 0!==G.autotick&&(void 0===G.tickmode&&(G.tickmode=G.autotick?"auto":"linear"),
delete G.autotick);q(G)}else if(E&&E.test(G))q(B[G].radialaxis);else if(C&&C.test(G))G=B[G],q(G.aaxis),q(G.baxis),q(G.caxis);else if(u&&u.test(G)){G=B[G];var J=G.cameraposition;if(Array.isArray(J)&&4===J[0].length){var L=J[1],K=J[2],H=n([],J[0]),Q=[];for(J=0;3>J;++J)Q[J]=L[J]+K*H[2+4*J];G.camera={eye:{x:Q[0],y:Q[1],z:Q[2]},center:{x:L[0],y:L[1],z:L[2]},up:{x:0,y:0,z:1}};delete G.cameraposition}q(G.xaxis);q(G.yaxis);q(G.zaxis)}}z=Array.isArray(B.annotations)?B.annotations.length:0;for(A=0;A<z;A++)E=
B.annotations[A],d.isPlainObject(E)&&(E.ref&&("paper"===E.ref?(E.xref="paper",E.yref="paper"):"data"===E.ref&&(E.xref="x",E.yref="y"),delete E.ref),r(E,"xref"),r(E,"yref"));z=Array.isArray(B.shapes)?B.shapes.length:0;for(A=0;A<z;A++)E=B.shapes[A],d.isPlainObject(E)&&(r(E,"xref"),r(E,"yref"));z=Array.isArray(B.images)?B.images.length:0;for(A=0;A<z;A++)E=B.images[A],d.isPlainObject(E)&&(r(E,"xref"),r(E,"yref"));if(A=B.legend)3<A.x?(A.x=1.02,A.xanchor="left"):-2>A.x&&(A.x=-.02,A.xanchor="right"),3<A.y?
(A.y=1.02,A.yanchor="bottom"):-2>A.y&&(A.y=-.02,A.yanchor="top");q(B);"rotate"===B.dragmode&&(B.dragmode="orbit");f.clean(B);B.template&&B.template.layout&&I.cleanLayout(B.template.layout);return B};I.cleanData=function(B){for(var A=0;A<B.length;A++){var z=B[A];"histogramy"===z.type&&"xbins"in z&&!("ybins"in z)&&(z.ybins=z.xbins,delete z.xbins);if(z.error_y&&"opacity"in z.error_y){var E=f.defaults;E=z.error_y.color||(v(z,"bar")?f.defaultLine:E[A%E.length]);z.error_y.color=f.addOpacity(f.rgb(E),f.opacity(E)*
z.error_y.opacity);delete z.error_y.opacity}"bardir"in z&&("h"!==z.bardir||!v(z,"bar")&&"histogram"!==z.type.substr(0,9)||(z.orientation="h",I.swapXYData(z)),delete z.bardir);"histogramy"===z.type&&I.swapXYData(z);if("histogramx"===z.type||"histogramy"===z.type)z.type="histogram";"scl"in z&&!("colorscale"in z)&&(z.colorscale=z.scl,delete z.scl);"reversescl"in z&&!("reversescale"in z)&&(z.reversescale=z.reversescl,delete z.reversescl);z.xaxis&&(z.xaxis=k(z.xaxis,"x"));z.yaxis&&(z.yaxis=k(z.yaxis,"y"));
v(z,"gl3d")&&z.scene&&(z.scene=e.subplotsRegistry.gl3d.cleanId(z.scene));if(!v(z,"pie-like")&&!v(z,"bar-like"))if(Array.isArray(z.textposition))for(E=0;E<z.textposition.length;E++)z.textposition[E]=l(z.textposition[E]);else z.textposition&&(z.textposition=l(z.textposition));(E=p.getModule(z))&&E.colorbar&&(E=(E=E.colorbar.container)?z[E]:z)&&E.colorscale&&("YIGnBu"===E.colorscale&&(E.colorscale="YlGnBu"),"YIOrRd"===E.colorscale&&(E.colorscale="YlOrRd"));if("surface"===z.type&&d.isPlainObject(z.contours)){var C=
["x","y","z"];for(E=0;E<C.length;E++){var u=z.contours[C[E]];d.isPlainObject(u)&&(u.highlightColor&&(u.highlightcolor=u.highlightColor,delete u.highlightColor),u.highlightWidth&&(u.highlightwidth=u.highlightWidth,delete u.highlightWidth))}}if("candlestick"===z.type||"ohlc"===z.type){C=!1!==(z.increasing||{}).showlegend;u=!1!==(z.decreasing||{}).showlegend;E=m(z.increasing);var D=m(z.decreasing);if(!1!==E&&!1!==D){if(!C||u)if(u&&!C)E=D;else if(E.trim()){if(D.trim()){u=Math.min(E.length,D.length);for(C=
0;C<u&&E.charAt(C)===D.charAt(C);C++);E=E.substr(0,C).trim()}}else E=D;E&&(z.name=E)}else!E&&!D||z.name||(z.name=E||D)}if(Array.isArray(z.transforms))for(C=z.transforms,E=0;E<C.length;E++)if(u=C[E],d.isPlainObject(u))switch(u.type){case "filter":u.filtersrc&&(u.target=u.filtersrc,delete u.filtersrc);u.calendar&&(u.valuecalendar||(u.valuecalendar=u.calendar),delete u.calendar);break;case "groupby":if(u.styles=u.styles||u.style,u.styles&&!Array.isArray(u.styles)){D=u.styles;var G=Object.keys(D);u.styles=
[];for(var J=0;J<G.length;J++)u.styles.push({target:G[J],value:D[G[J]]})}}a(z,"line")&&delete z.line;"marker"in z&&(a(z.marker,"line")&&delete z.marker.line,a(z,"marker")&&delete z.marker);f.clean(z);z.autobinx&&(delete z.autobinx,delete z.xbins);z.autobiny&&(delete z.autobiny,delete z.ybins);q(z);z.colorbar&&q(z.colorbar);z.marker&&z.marker.colorbar&&q(z.marker.colorbar);z.line&&z.line.colorbar&&q(z.line.colorbar);z.aaxis&&q(z.aaxis);z.baxis&&q(z.baxis)}};I.swapXYData=function(B){d.swapAttrs(B,"? ?0 d? ?bins nbins? autobin? ?src error_?".split(" "));
Array.isArray(B.z)&&Array.isArray(B.z[0])&&(B.transpose?delete B.transpose:B.transpose=!0);if(B.error_x&&B.error_y){var A=B.error_y;A="copy_ystyle"in A?A.copy_ystyle:!(A.color||A.thickness||A.width);d.swapAttrs(B,["error_?.copy_ystyle"]);A&&d.swapAttrs(B,["error_?.color","error_?.thickness","error_?.width"])}if("string"===typeof B.hoverinfo){var z=B.hoverinfo.split("+");for(A=0;A<z.length;A++)"x"===z[A]?z[A]="y":"y"===z[A]&&(z[A]="x");B.hoverinfo=z.join("+")}};I.coerceTraceIndices=function(B,A){if(g(A))return[A];
if(!Array.isArray(A)||!A.length)return B.data.map(function(C,u){return u});if(Array.isArray(A)){for(var z=[],E=0;E<A.length;E++)d.isIndex(A[E],B.data.length)?z.push(A[E]):d.warn("trace index (",A[E],") is not a number or is out of bounds");return z}return A};I.manageArrayContainers=function(B,A,z){var E=B.obj,C=B.parts,u=C.length,D=C[u-1],G=g(D);G&&null===A?(B=C.slice(0,u-1).join("."),d.nestedProperty(E,B).get().splice(D,1)):(G&&void 0===B.get()&&void 0===B.get()&&(z[B.astr]=null),B.set(A))};var w=
/(\.[^\[\]\.]+|\[[^\[\]\.]+\])$/;I.hasParent=function(B,A){for(A=h(A);A;){if(A in B)return!0;A=h(A)}return!1};var y=["x","y","z"];I.clearAxisTypes=function(B,A,z){for(var E=0;E<A.length;E++)for(var C=B._fullData[E],u=0;3>u;u++){var D=t(B,C,y[u]);if(D&&"log"!==D.type){var G=D._name;D=D._id.substr(1);if("scene"===D.substr(0,5)){if(void 0!==z[D])continue;G=D+"."+G}D=G+".type";void 0===z[G]&&void 0===z[D]&&d.nestedProperty(B.layout,D).set(null)}}}},{"../components/color":643,"../lib":778,"../plots/cartesian/axis_ids":831,
"../plots/plots":891,"../registry":911,"fast-isnumeric":241,"gl-mat4/fromQuat":282}],812:[function(b,N,I){N=b("./plot_api");I.plot=N.plot;I.newPlot=N.newPlot;I.restyle=N.restyle;I.relayout=N.relayout;I.redraw=N.redraw;I.update=N.update;I._guiRestyle=N._guiRestyle;I._guiRelayout=N._guiRelayout;I._guiUpdate=N._guiUpdate;I._storeDirectGUIEdit=N._storeDirectGUIEdit;I.react=N.react;I.extendTraces=N.extendTraces;I.prependTraces=N.prependTraces;I.addTraces=N.addTraces;I.deleteTraces=N.deleteTraces;I.moveTraces=
N.moveTraces;I.purge=N.purge;I.addFrames=N.addFrames;I.deleteFrames=N.deleteFrames;I.animate=N.animate;I.setPlotConfig=N.setPlotConfig;I.toImage=b("./to_image");I.validate=b("./validate");I.downloadImage=b("../snapshot/download");b=b("./template_api");I.makeTemplate=b.makeTemplate;I.validateTemplate=b.validateTemplate},{"../snapshot/download":913,"./plot_api":814,"./template_api":819,"./to_image":820,"./validate":821}],813:[function(b,N,I){var r=b("../lib/is_plain_object"),q=b("../lib/noop"),m=b("../lib/loggers"),
l=b("../lib/search").sorterAsc,a=b("../registry");I.containerArrayMatch=b("./container_array_match");var h=I.isAddVal=function(n){return"add"===n||r(n)},g=I.isRemoveVal=function(n){return null===n||"remove"===n};I.applyContainerArrayChanges=function(n,p,d,e,f){var k=p.astr,t=a.getComponentMethod(k,"supplyLayoutDefaults"),v=a.getComponentMethod(k,"draw"),w=a.getComponentMethod(k,"drawOne");e=e.replot||e.recalc||t===q||v===q;var y=n.layout,B=n._fullLayout;if(d[""]){1<Object.keys(d).length&&m.warn("Full array edits are incompatible with other edits",
k);w=d[""][""];if(g(w))p.set(null);else if(Array.isArray(w))p.set(w);else return m.warn("Unrecognized full array edit value",k,w),!0;if(e)return!1;t(y,B);v(n);return!0}var A=Object.keys(d).map(Number).sort(l),z=p.get(),E=z||[],C=f(B,k).get(),u=[],D=-1,G=E.length,J;for(J=0;J<A.length;J++){var L=A[J];var K=d[L];var H=Object.keys(K);var Q=K[""];var M=h(Q);if(0>L||L>E.length-(M?0:1))m.warn("index out of range",k,L);else if(void 0!==Q)1<H.length&&m.warn("Insertion \x26 removal are incompatible with edits to the same index.",
k,L),g(Q)?u.push(L):M?("add"===Q&&(Q={}),E.splice(L,0,Q),C&&C.splice(L,0,{})):m.warn("Unrecognized full object edit value",k,L,Q),-1===D&&(D=L);else for(Q=0;Q<H.length;Q++)M=k+"["+L+"].",f(E[L],H[Q],M).set(K[H[Q]])}for(J=u.length-1;0<=J;J--)E.splice(u[J],1),C&&C.splice(u[J],1);E.length?z||p.set(E):p.set(null);if(e)return!1;t(y,B);if(w!==q){if(-1===D)p=A;else{G=Math.max(E.length,G);p=[];for(J=0;J<A.length;J++){L=A[J];if(L>=D)break;p.push(L)}for(J=D;J<G;J++)p.push(J)}for(J=0;J<p.length;J++)w(n,p[J])}else v(n);
return!0}},{"../lib/is_plain_object":779,"../lib/loggers":782,"../lib/noop":787,"../lib/search":798,"../registry":911,"./container_array_match":809}],814:[function(b,N,I){function r(Ka){var Ta=Ka._fullLayout;Ta._redrawFromAutoMarginCount?Ta._redrawFromAutoMarginCount--:Ka.emit("plotly_afterplot")}function q(Ka,Ta){try{Ka._fullLayout._paper.style("background",Ta)}catch(Na){da.error(Na)}}function m(Ka,Ta){Ta=Ca.combine(Ta,"white");q(Ka,Ta)}function l(Ka,Ta){if(!Ka._context){Ka._context=da.extendDeep({},
nb);var Na=ia.select("base");Ka._context._baseUrl=Na.size()&&Na.attr("href")?window.location.href.split("#")[0]:""}var ib=Ka._context;if(Ta){var qb=Object.keys(Ta);for(Na=0;Na<qb.length;Na++){var sb=qb[Na];"editable"!==sb&&"edits"!==sb&&sb in ib&&(ib[sb]="setBackground"===sb&&"opaque"===Ta[sb]?m:Ta[sb])}Ta.plot3dPixelRatio&&!ib.plotGlPixelRatio&&(ib.plotGlPixelRatio=ib.plot3dPixelRatio);sb=Ta.editable;if(void 0!==sb)for(ib.editable=sb,qb=Object.keys(ib.edits),Na=0;Na<qb.length;Na++)ib.edits[qb[Na]]=
sb;if(Ta.edits)for(qb=Object.keys(Ta.edits),Na=0;Na<qb.length;Na++)sb=qb[Na],sb in ib.edits&&(ib.edits[sb]=Ta.edits[sb]);ib._exportedPlot=Ta._exportedPlot}ib.staticPlot&&(ib.editable=!1,ib.edits={},ib.autosizable=!1,ib.scrollZoom=!1,ib.doubleClick=!1,ib.showTips=!1,ib.showLink=!1,ib.displayModeBar=!1);"hover"!==ib.displayModeBar||la||(ib.displayModeBar=!0);if("transparent"===ib.setBackground||"function"!==typeof ib.setBackground)ib.setBackground=q;ib._hasZeroHeight=ib._hasZeroHeight||0===Ka.clientHeight;
ib._hasZeroWidth=ib._hasZeroWidth||0===Ka.clientWidth;Na=ib.scrollZoom;Ka=ib._scrollZoom={};if(!0===Na)Ka.cartesian=1,Ka.gl3d=1,Ka.geo=1,Ka.mapbox=1;else if("string"===typeof Na)for(Ta=Na.split("+"),Na=0;Na<Ta.length;Na++)Ka[Ta[Na]]=1;else!1!==Na&&(Ka.gl3d=1,Ka.geo=1,Ka.mapbox=1)}function a(Ka,Ta,Na){var ib=ia.select(Ka).selectAll(".plot-container").data([0]);ib.enter().insert("div",":first-child").classed("plot-container plotly",!0);ib=ib.selectAll(".svg-container").data([0]);ib.enter().append("div").classed("svg-container",
!0).style("position","relative");ib.html("");Ta&&(Ka.data=Ta);Na&&(Ka.layout=Na);ka.manager.fillLayout(Ka);ib.style({width:Ka._fullLayout.width+"px",height:Ka._fullLayout.height+"px"});Ka.framework=ka.manager.framework(Ka);Ka.framework({data:Ka.data,layout:Ka.layout},ib.node());Ka.framework.setUndoPoint();ib=Ka.framework.svg();Ta=1;Na=Ka._fullLayout.title?Ka._fullLayout.title.text:"";""!==Na&&Na||(Ta=0);var qb=function(){this.call(eb.convertToTspans,Ka)};ib=ib.select(".title-group text").call(qb);
if(Ka._context.edits.titleText){var sb=da._(Ka,"Click to enter Plot title");Na&&Na!==sb||(Ta=.2,ib.attr({"data-unformatted":sb}).text(sb).style({opacity:Ta}).on("mouseover.opacity",function(){ia.select(this).transition().duration(100).style("opacity",1)}).on("mouseout.opacity",function(){ia.select(this).transition().duration(1E3).style("opacity",0)}));var Ba=function(){this.call(eb.makeEditable,{gd:Ka}).on("edit",function(Fa){Ka.framework({layout:{title:{text:Fa}}});this.text(Fa).call(qb);this.call(Ba)}).on("cancel",
function(){var Fa=this.attr("data-unformatted");this.text(Fa).call(qb)})};ib.call(Ba)}Ka._context.setBackground(Ka,Ka._fullLayout.paper_bgcolor);na.addLinks(Ka);return Promise.resolve()}function h(Ka,Ta){Ta+=1;var Na=[],ib;for(ib=0;ib<Ka.length;ib++){var qb=Ka[ib];0>qb?Na.push(Ta+qb):Na.push(qb)}return Na}function g(Ka,Ta,Na){var ib;for(ib=0;ib<Ta.length;ib++){var qb=Ta[ib];if(qb!==parseInt(qb,10))throw Error("all values in "+Na+" must be integers");if(qb>=Ka.data.length||qb<-Ka.data.length)throw Error(Na+
" must be valid indices for gd.data.");if(-1<Ta.indexOf(qb,ib+1)||0<=qb&&-1<Ta.indexOf(-Ka.data.length+qb)||0>qb&&-1<Ta.indexOf(Ka.data.length+qb))throw Error("each index in "+Na+" must be unique.");}}function n(Ka,Ta,Na){if(!Array.isArray(Ka.data))throw Error("gd.data must be an array.");if("undefined"===typeof Ta)throw Error("currentIndices is a required argument.");Array.isArray(Ta)||(Ta=[Ta]);g(Ka,Ta,"currentIndices");"undefined"===typeof Na||Array.isArray(Na)||(Na=[Na]);"undefined"!==typeof Na&&
g(Ka,Na,"newIndices");if("undefined"!==typeof Na&&Ta.length!==Na.length)throw Error("current and new indices must be of equal length.");}function p(Ka,Ta,Na){if(!Array.isArray(Ka.data))throw Error("gd.data must be an array.");if("undefined"===typeof Ta)throw Error("traces must be defined.");Array.isArray(Ta)||(Ta=[Ta]);for(Ka=0;Ka<Ta.length;Ka++){var ib=Ta[Ka];if("object"!==typeof ib||Array.isArray(ib)||null===ib)throw Error("all values in traces array must be non-array objects");}"undefined"===typeof Na||
Array.isArray(Na)||(Na=[Na]);if("undefined"!==typeof Na&&Na.length!==Ta.length)throw Error("if indices is specified, traces.length must equal indices.length");}function d(Ka,Ta,Na,ib,qb){var sb=da.isPlainObject(ib);if(!Array.isArray(Ka.data))throw Error("gd.data must be an array");if(!da.isPlainObject(Ta))throw Error("update must be a key:value object");if("undefined"===typeof Na)throw Error("indices must be an integer or array of integers");g(Ka,Na,"indices");for(var Ba in Ta){if(!Array.isArray(Ta[Ba])||
Ta[Ba].length!==Na.length)throw Error("attribute "+Ba+" must be an array of length equal to indices array length");if(sb&&!(Ba in ib&&Array.isArray(ib[Ba])&&ib[Ba].length===Ta[Ba].length))throw Error("when maxPoints is set as a key:value object it must contain a 1:1 corrispondence with the keys and number of traces in the update object");}sb=Na;Ba=da.isPlainObject(ib);Na=[];Array.isArray(sb)||(sb=[sb]);sb=h(sb,Ka.data.length-1);for(var Fa in Ta)for(var La=0;La<sb.length;La++){var Va=Ka.data[sb[La]];
var Za=oa(Va,Fa);Va=Za.get();var mb=Ta[Fa][La];if(!da.isArrayOrTypedArray(mb))throw Error("attribute: "+Fa+" index: "+La+" must be an array");if(!da.isArrayOrTypedArray(Va))throw Error("cannot extend missing or non-array attribute: "+Fa);if(Va.constructor!==mb.constructor)throw Error("cannot extend array with an array of a different type: "+Fa);var ub=Ba?ib[Fa][La]:ib;ja(ub)||(ub=-1);Na.push({prop:Za,target:Va,insert:mb,maxp:Math.floor(ub)})}Ka={};Ta={};for(ib=0;ib<Na.length;ib++)Fa=Na[ib].prop,sb=
qb(Na[ib].target,Na[ib].insert,Na[ib].maxp),Fa.set(sb[0]),Array.isArray(Ka[Fa.astr])||(Ka[Fa.astr]=[]),Ka[Fa.astr].push(sb[1]),Array.isArray(Ta[Fa.astr])||(Ta[Fa.astr]=[]),Ta[Fa.astr].push(Na[ib].target.length);return{update:Ka,maxPoints:Ta}}function e(Ka,Ta){var Na=new Ka.constructor(Ka.length+Ta.length);Na.set(Ka);Na.set(Ta,Ka.length);return Na}function f(Ka,Ta,Na,ib){Ka=da.getGraphDiv(Ka);var qb=d(Ka,Ta,Na,ib,function(Ba,Fa,La){if(da.isTypedArray(Ba))if(0>La){var Va=new Ba.constructor(0);Ba=e(Ba,
Fa);if(0>La)var Za=Ba;else Za=Va,Va=Ba}else if(Za=new Ba.constructor(La),Va=new Ba.constructor(Ba.length+Fa.length-La),La===Fa.length)Za.set(Fa),Va.set(Ba);else if(La<Fa.length)La=Fa.length-La,Za.set(Fa.subarray(La)),Va.set(Ba),Va.set(Fa.subarray(0,La),Ba.length);else{La-=Fa.length;var mb=Ba.length-La;Za.set(Ba.subarray(mb));Za.set(Fa,La);Va.set(Ba.subarray(0,mb))}else Za=Ba.concat(Fa),Va=0<=La&&La<Za.length?Za.splice(0,Za.length-La):[];return[Za,Va]}),sb=I.redraw(Ka);ma.add(Ka,I.prependTraces,[Ka,
qb.update,Na,qb.maxPoints],f,arguments);return sb}function k(Ka,Ta,Na,ib){Ka=da.getGraphDiv(Ka);var qb=d(Ka,Ta,Na,ib,function(Ba,Fa,La){if(da.isTypedArray(Ba))if(0>=La){var Va=new Ba.constructor(0);Ba=e(Fa,Ba);if(0>La)var Za=Ba;else Za=Va,Va=Ba}else Za=new Ba.constructor(La),Va=new Ba.constructor(Ba.length+Fa.length-La),La===Fa.length?(Za.set(Fa),Va.set(Ba)):La<Fa.length?(La=Fa.length-La,Za.set(Fa.subarray(0,La)),Va.set(Fa.subarray(La)),Va.set(Ba,La)):(La-=Fa.length,Za.set(Fa),Za.set(Ba.subarray(0,
La),Fa.length),Va.set(Ba.subarray(La)));else Za=Fa.concat(Ba),Va=0<=La&&La<Za.length?Za.splice(La,Za.length):[];return[Za,Va]}),sb=I.redraw(Ka);ma.add(Ka,I.extendTraces,[Ka,qb.update,Na,qb.maxPoints],k,arguments);return sb}function t(Ka,Ta,Na){Ka=da.getGraphDiv(Ka);var ib=[],qb=I.deleteTraces,sb=[Ka,ib],Ba=[Ka,Ta],Fa;p(Ka,Ta,Na);Array.isArray(Ta)||(Ta=[Ta]);Ta=Ta.map(function(La){return da.extendFlat({},La)});$a.cleanData(Ta);for(Fa=0;Fa<Ta.length;Fa++)Ka.data.push(Ta[Fa]);for(Fa=0;Fa<Ta.length;Fa++)ib.push(-Ta.length+
Fa);if("undefined"===typeof Na)return Ta=I.redraw(Ka),ma.add(Ka,qb,sb,t,Ba),Ta;Array.isArray(Na)||(Na=[Na]);try{n(Ka,ib,Na)}catch(La){throw Ka.data.splice(Ka.data.length-Ta.length,Ta.length),La;}ma.startSequence(Ka);ma.add(Ka,qb,sb,t,Ba);Ta=I.moveTraces(Ka,ib,Na);ma.stopSequence(Ka);return Ta}function v(Ka,Ta){Ka=da.getGraphDiv(Ka);var Na=[],ib=I.addTraces,qb=[Ka,Na,Ta],sb=[Ka,Ta],Ba;if("undefined"===typeof Ta)throw Error("indices must be an integer or array of integers.");Array.isArray(Ta)||(Ta=
[Ta]);g(Ka,Ta,"indices");Ta=h(Ta,Ka.data.length-1);Ta.sort(da.sorterDes);for(Ba=0;Ba<Ta.length;Ba+=1){var Fa=Ka.data.splice(Ta[Ba],1)[0];Na.push(Fa)}Ta=I.redraw(Ka);ma.add(Ka,ib,qb,v,sb);return Ta}function w(Ka,Ta,Na){Ka=da.getGraphDiv(Ka);var ib=[],qb=[],sb=[Ka,Na,Ta],Ba=[Ka,Ta,Na],Fa;n(Ka,Ta,Na);Ta=Array.isArray(Ta)?Ta:[Ta];if("undefined"===typeof Na)for(Na=[],Fa=0;Fa<Ta.length;Fa++)Na.push(-Ta.length+Fa);Na=Array.isArray(Na)?Na:[Na];Ta=h(Ta,Ka.data.length-1);Na=h(Na,Ka.data.length-1);for(Fa=0;Fa<
Ka.data.length;Fa++)-1===Ta.indexOf(Fa)&&ib.push(Ka.data[Fa]);for(Fa=0;Fa<Ta.length;Fa++)qb.push({newIndex:Na[Fa],trace:Ka.data[Ta[Fa]]});qb.sort(function(La,Va){return La.newIndex-Va.newIndex});for(Fa=0;Fa<qb.length;Fa+=1)ib.splice(qb[Fa].newIndex,0,qb[Fa].trace);Ka.data=ib;Ta=I.redraw(Ka);ma.add(Ka,w,sb,w,Ba);return Ta}function y(Ka,Ta,Na,ib){Ka=da.getGraphDiv(Ka);$a.clearPromiseQueue(Ka);var qb={};if("string"===typeof Ta)qb[Ta]=Na;else if(da.isPlainObject(Ta))qb=da.extendFlat({},Ta),void 0===ib&&
(ib=Na);else return da.warn("Restyle fail.",Ta,Na,ib),Promise.reject();Object.keys(qb).length&&(Ka.changed=!0);Ta=$a.coerceTraceIndices(Ka,ib);var sb=E(Ka,qb,Ta);qb=sb.flags;qb.calc&&(Ka.calcdata=void 0);qb.clearAxisTypes&&$a.clearAxisTypes(Ka,Ta,{});Ta=[];qb.fullReplot?Ta.push(I.plot):(Ta.push(na.previousPromises),na.supplyDefaults(Ka),qb.markerSize&&(na.doCalcdata(Ka),G(Ta)),qb.style&&Ta.push(jb.doTraceStyle),qb.colorbars&&Ta.push(jb.doColorBars),Ta.push(r));Ta.push(na.rehover,na.redrag);ma.add(Ka,
y,[Ka,sb.undoit,sb.traces],y,[Ka,sb.redoit,sb.traces]);(qb=da.syncOrAsync(Ta,Ka))&&qb.then||(qb=Promise.resolve());return qb.then(function(){Ka.emit("plotly_restyle",sb.eventData);return Ka})}function B(Ka){return void 0===Ka?null:Ka}function A(Ka,Ta){return Ta?function(Na,ib,qb){var sb=oa(Na,ib),Ba=sb.set;sb.set=function(Fa){z((qb||"")+ib,sb.get(),Fa,Ka);Ba(Fa)};return sb}:oa}function z(Ka,Ta,Na,ib){if(Array.isArray(Ta)||Array.isArray(Na)){var qb=Array.isArray(Ta)?Ta:[];Na=Array.isArray(Na)?Na:[];
Ta=Math.max(qb.length,Na.length);for(var sb=0;sb<Ta;sb++)z(Ka+"["+sb+"]",qb[sb],Na[sb],ib)}else if(da.isPlainObject(Ta)||da.isPlainObject(Na))for(qb in Ta=da.isPlainObject(Ta)?Ta:{},Na=da.isPlainObject(Na)?Na:{},sb=da.extendFlat({},Ta,Na),sb)z(Ka+"."+qb,Ta[qb],Na[qb],ib);else void 0===ib[Ka]&&(ib[Ka]=B(Ta))}function E(Ka,Ta,Na){function ib(){return Na.map(function(){})}function qb(Bb){Bb=ua.id2name(Bb);-1===Lb.indexOf(Bb)&&Lb.push(Bb)}function sb(Bb){return"LAYOUT"+Bb+".autorange"}function Ba(Bb){return"LAYOUT"+
Bb+".range"}function Fa(Bb){for(var Mb=Bb;Mb<ub.length;Mb++)if(ub[Mb]._input===Pb[Bb])return ub[Mb]}function La(Bb,Mb,Yb){if(Array.isArray(Bb))Bb.forEach(function(Yc){La(Yc,Mb,Yb)});else if(!(Bb in Ta||$a.hasParent(Ta,Bb))){if("LAYOUT"===Bb.substr(0,6))var qc=Ob(Ka.layout,Bb.replace("LAYOUT",""));else{qc=Na[Yb];var Tc=mb._tracePreGUI[Fa(qc)._fullInput.uid];qc=A(Tc,Kb)(Pb[qc],Bb)}Bb in bd||(bd[Bb]=ib());void 0===bd[Bb][Yb]&&(bd[Bb][Yb]=B(qc.get()));void 0!==Mb&&qc.set(Mb)}}function Va(Bb){return function(Mb){return ub[Mb][Bb]}}
function Za(Bb){return function(Mb,Yb){return!1===Mb?ub[Na[Yb]][Bb]:null}}var mb=Ka._fullLayout,ub=Ka._fullData,Pb=Ka.data,Kb=mb._guiEditing,Ob=A(mb._preGUI,Kb),Wb=da.extendDeepAll({},Ta),Bc;C(Ta);var Kc=pb.traceFlags(),Nc={},bd={};for(gc in Ta){if($a.hasParent(Ta,gc))throw Error("cannot set "+gc+" and a parent attribute simultaneously");var kb=Ta[gc],$b;if("autobinx"===gc||"autobiny"===gc){var gc=gc.charAt(gc.length-1)+"bins";kb=Array.isArray(kb)?kb.map(Za(gc)):!1===kb?Na.map(Va(gc)):null}Nc[gc]=
kb;if("LAYOUT"===gc.substr(0,6)){var rc=Ob(Ka.layout,gc.replace("LAYOUT",""));bd[gc]=[B(rc.get())];rc.set(Array.isArray(kb)?kb[0]:kb);Kc.calc=!0}else{bd[gc]=ib();for(Bc=0;Bc<Na.length;Bc++){var xc=Pb[Na[Bc]];var Rc=Fa(Na[Bc]);rc=A(mb._tracePreGUI[Rc._fullInput.uid],Kb)(xc,gc);var gb=rc.get();var vb=Array.isArray(kb)?kb[Bc%kb.length]:kb;if(void 0!==vb){var Sb=rc.parts[rc.parts.length-1],ic=($b=gc.substr(0,gc.length-Sb.length-1))?$b+".":"",ac=$b?oa(Rc,$b).get():Rc;if(($b=pa.getTraceValObject(Rc,rc.parts))&&
$b.impliedEdits&&null!==vb)for(var bc in $b.impliedEdits)La(da.relativeAttr(gc,bc),$b.impliedEdits[bc],Bc);else if("thicknessmode"!==Sb&&"lenmode"!==Sb||gb===vb||"fraction"!==vb&&"pixels"!==vb||!ac)"type"!==gc||"pie"===vb===("pie"===gb)&&"funnelarea"===vb===("funnelarea"===gb)||(ic="x",ac="y","bar"!==vb&&"bar"!==gb||"h"!==xc.orientation||(ic="y",ac="x"),da.swapAttrs(xc,["?","?src"],"labels",ic),da.swapAttrs(xc,["d?","?0"],"label",ic),da.swapAttrs(xc,["?","?src"],"values",ac),"pie"===gb||"funnelarea"===
gb?(oa(xc,"marker.color").set(oa(xc,"marker.colors").get()),mb._pielayer.selectAll("g.trace").remove()):qa.traceIs(xc,"cartesian")&&oa(xc,"marker.colors").set(oa(xc,"marker.color").get()));else{var Ub=mb._size,wb=ac.orient;wb="top"===wb||"bottom"===wb;"thicknessmode"===Sb?(Sb=wb?Ub.h:Ub.w,La(ic+"thickness",ac.thickness*("fraction"===vb?1/Sb:Sb),Bc)):(Sb=wb?Ub.w:Ub.h,La(ic+"len",ac.len*("fraction"===vb?1/Sb:Sb),Bc))}bd[gc][Bc]=B(gb);if(-1!==["swapxy","swapxyaxes","orientation","orientationaxes"].indexOf(gc)){if("orientation"===
gc){if(rc.set(vb),gb=xc.x&&!xc.y?"h":"v",(rc.get()||gb)===Rc.orientation)continue}else"orientationaxes"===gc&&(xc.orientation={v:"h",h:"v"}[Rc.orientation]);$a.swapXYData(xc);Kc.calc=Kc.clearAxisTypes=!0}else-1!==na.dataArrayContainers.indexOf(rc.parts[0])?($a.manageArrayContainers(rc,vb,bd),Kc.calc=!0):($b?$b.arrayOk&&!qa.traceIs(Rc,"regl")&&(da.isArrayOrTypedArray(vb)||da.isArrayOrTypedArray(gb))?Kc.calc=!0:pb.update(Kc,$b):Kc.calc=!0,rc.set(vb))}}-1!==["swapxyaxes","orientationaxes"].indexOf(gc)&&
ua.swap(Ka,Na);"orientationaxes"===gc&&(Bc=oa(Ka.layout,"hovermode"),kb=Bc.get(),"x"===kb?Bc.set("y"):"y"===kb?Bc.set("x"):"x unified"===kb?Bc.set("y unified"):"y unified"===kb&&Bc.set("x unified"));if(-1!==["orientation","type"].indexOf(gc)){var Lb=[];for(Bc=0;Bc<Na.length;Bc++)kb=Pb[Na[Bc]],qa.traceIs(kb,"cartesian")&&(qb(kb.xaxis||"x"),qb(kb.yaxis||"y"));La(Lb.map(sb),!0,0);La(Lb.map(Ba),[0,1],0)}}}if(Kc.calc||Kc.plot)Kc.fullReplot=!0;return{flags:Kc,undoit:bd,redoit:Nc,traces:Na,eventData:da.extendDeepNoArrays([],
[Wb,Na])}}function C(Ka){function Ta(La,Va){Ka[Va]=Ka[La];delete Ka[La]}var Na=da.counterRegex("axis",".title",!1,!1),ib=/colorbar\.title$/,qb=Object.keys(Ka),sb;for(sb=0;sb<qb.length;sb++){var Ba=qb[sb];var Fa=Ka[Ba];"title"!==Ba&&!Na.test(Ba)&&!ib.test(Ba)||"string"!==typeof Fa&&"number"!==typeof Fa?-1<Ba.indexOf("titlefont")?Ta(Ba,Ba.replace("titlefont","title.font")):-1<Ba.indexOf("titleposition")?Ta(Ba,Ba.replace("titleposition","title.position")):-1<Ba.indexOf("titleside")?Ta(Ba,Ba.replace("titleside",
"title.side")):-1<Ba.indexOf("titleoffset")&&Ta(Ba,Ba.replace("titleoffset","title.offset")):Ta(Ba,Ba.replace("title","title.text"))}}function u(Ka,Ta,Na){Ka=da.getGraphDiv(Ka);$a.clearPromiseQueue(Ka);if(Ka.framework&&Ka.framework.isPolar)return Promise.resolve(Ka);var ib={};if("string"===typeof Ta)ib[Ta]=Na;else if(da.isPlainObject(Ta))ib=da.extendFlat({},Ta);else return da.warn("Relayout fail.",Ta,Na),Promise.reject();Object.keys(ib).length&&(Ka.changed=!0);var qb=J(Ka,ib);Ta=qb.flags;Ta.calc&&
(Ka.calcdata=void 0);Na=[na.previousPromises];Ta.layoutReplot?Na.push(jb.layoutReplot):Object.keys(ib).length&&(D(Ka,Ta,qb)||na.supplyDefaults(Ka),Ta.legend&&Na.push(jb.doLegend),Ta.layoutstyle&&Na.push(jb.layoutStyles),Ta.axrange&&G(Na,qb.rangesAltered),Ta.ticks&&Na.push(jb.doTicksRelayout),Ta.modebar&&Na.push(jb.doModeBar),Ta.camera&&Na.push(jb.doCamera),Ta.colorbars&&Na.push(jb.doColorBars),Na.push(r));Na.push(na.rehover,na.redrag);ma.add(Ka,u,[Ka,qb.undoit],u,[Ka,qb.redoit]);(ib=da.syncOrAsync(Na,
Ka))&&ib.then||(ib=Promise.resolve(Ka));return ib.then(function(){Ka.emit("plotly_relayout",qb.eventData);return Ka})}function D(Ka,Ta,Na){var ib=Ka._fullLayout;if(!Ta.axrange)return!1;for(var qb in Ta)if("axrange"!==qb&&Ta[qb])return!1;for(var sb in Na.rangesAltered)if(Na=ua.id2name(sb),Ta=Ka.layout[Na],Na=ib[Na],Na.autorange=Ta.autorange,Ta.range&&(Na.range=Ta.range.slice()),Na.cleanRange(),Na._matchGroup)for(var Ba in Na._matchGroup)Ba!==sb&&(Ta=ib[ua.id2name(Ba)],Ta.autorange=Na.autorange,Ta.range=
Na.range.slice(),Ta._input.range=Na.range.slice());return!0}function G(Ka,Ta){Ka.push(fb,jb.doAutoRangeAndConstraints,Ta?function(Na){var ib=[],qb=!0,sb;for(sb in Ta){var Ba=ua.getFromId(Na,sb);ib.push(sb);-1!==(Ba.ticklabelposition||"").indexOf("inside")&&Ba._anchorAxis&&ib.push(Ba._anchorAxis._id);if(Ba._matchGroup)for(var Fa in Ba._matchGroup)Ta[Fa]||ib.push(Fa);Ba.automargin&&(qb=!1)}return ua.draw(Na,ib,{skipTitle:qb})}:function(Na){return ua.draw(Na,"redraw")},jb.drawData,jb.finalDraw)}function J(Ka,
Ta){function Na(Sb,ic){if(Array.isArray(Sb))Sb.forEach(function(bc){Na(bc,ic)});else if(!(Sb in Ta||$a.hasParent(Ta,Sb))){var ac=Ba(qb,Sb);Sb in Kb||(Kb[Sb]=B(ac.get()));void 0!==ic&&ac.set(ic)}}function ib(Sb){Sb=ua.name2id(Sb.split(".")[0]);Ob[Sb]=1;return Sb}var qb=Ka.layout,sb=Ka._fullLayout,Ba=A(sb._preGUI,sb._guiEditing),Fa=Object.keys(Ta),La=ua.list(Ka),Va=da.extendDeepAll({},Ta),Za={},mb,ub;C(Ta);Fa=Object.keys(Ta);for(mb=0;mb<Fa.length;mb++)if(0===Fa[mb].indexOf("allaxes")){for(ub=0;ub<La.length;ub++){var Pb=
La[ub]._id.substr(1);Pb=-1!==Pb.indexOf("scene")?Pb+".":"";Pb=Fa[mb].replace("allaxes",Pb+La[ub]._name);Ta[Pb]||(Ta[Pb]=Ta[Fa[mb]])}delete Ta[Fa[mb]]}Fa=pb.layoutFlags();La={};var Kb={},Ob={},Wb;for(Wb in Ta){if($a.hasParent(Ta,Wb))throw Error("cannot set "+Wb+" and a parent attribute simultaneously");mb=Ba(qb,Wb);ub=Ta[Wb];for(Pb=mb.parts.length-1;0<Pb&&"string"!==typeof mb.parts[Pb];)Pb--;var Bc=mb.parts[Pb],Kc=mb.parts[Pb-1]+"."+Bc,Nc=mb.parts.slice(0,Pb).join("."),bd=oa(Ka.layout,Nc).get(),kb=
oa(sb,Nc).get(),$b=mb.get();if(void 0!==ub){La[Wb]=ub;Kb[Wb]="reverse"===Bc?ub:B($b);if((Pb=pa.getLayoutValObject(sb,mb.parts))&&Pb.impliedEdits&&null!==ub)for(var gc in Pb.impliedEdits)Na(da.relativeAttr(Wb,gc),Pb.impliedEdits[gc]);-1!==["width","height"].indexOf(Wb)?ub?(Na("autosize",null),Kc="height"===Wb?"width":"height",Na(Kc,sb[Kc])):sb[Wb]=Ka._initialAutoSize[Wb]:"autosize"===Wb?(Na("width",ub?null:sb.width),Na("height",ub?null:sb.height)):Kc.match(Ia)?(ib(Kc),oa(sb,Nc+"._inputRange").set(null)):
Kc.match(Oa)?(ib(Kc),oa(sb,Nc+"._inputRange").set(null),Kc=oa(sb,Nc).get(),Kc._inputDomain&&(Kc._input.domain=Kc._inputDomain.slice())):Kc.match(bb)&&oa(sb,Nc+"._inputDomain").set(null);if("type"===Bc){var rc=bd;Kc="linear"===kb.type&&"log"===ub;var xc="log"===kb.type&&"linear"===ub;Kc||xc?(rc&&rc.range?kb.autorange?Kc&&(rc.range=rc.range[1]>rc.range[0]?[1,2]:[2,1]):(xc=rc.range[0],rc=rc.range[1],Kc?(0>=xc&&0>=rc&&Na(Nc+".autorange",!0),0>=xc?xc=rc/1E6:0>=rc&&(rc=xc/1E6),Na(Nc+".range[0]",Math.log(xc)/
Math.LN10),Na(Nc+".range[1]",Math.log(rc)/Math.LN10)):(Na(Nc+".range[0]",Math.pow(10,xc)),Na(Nc+".range[1]",Math.pow(10,rc)))):Na(Nc+".autorange",!0),Array.isArray(sb._subplots.polar)&&sb._subplots.polar.length&&sb[mb.parts[0]]&&"radialaxis"===mb.parts[1]&&delete sb[mb.parts[0]]._subplot.viewInitial["radialaxis.range"],qa.getComponentMethod("annotations","convertCoords")(Ka,kb,ub,Na),qa.getComponentMethod("images","convertCoords")(Ka,kb,ub,Na)):(Na(Nc+".autorange",!0),Na(Nc+".range",null));oa(sb,
Nc+"._inputRange").set(null)}else Bc.match(xa)&&(Kc=oa(sb,Wb).get(),(rc=(ub||{}).type)&&"-"!==rc||(rc="linear"),qa.getComponentMethod("annotations","convertCoords")(Ka,Kc,rc,Na),qa.getComponentMethod("images","convertCoords")(Ka,Kc,rc,Na));if(Kc=cb.containerArrayMatch(Wb)){var Rc=Kc.array;mb=Kc.index;Bc=Kc.property;Pb=Pb||{editType:"calc"};""!==mb&&""===Bc&&(cb.isAddVal(ub)?Kb[Wb]=null:cb.isRemoveVal(ub)?Kb[Wb]=(oa(qb,Rc).get()||[])[mb]:da.warn("unrecognized full object value",Ta));pb.update(Fa,Pb);
Za[Rc]||(Za[Rc]={});(Pb=Za[Rc][mb])||(Pb=Za[Rc][mb]={});Pb[Bc]=ub;delete Ta[Wb]}else"reverse"===Bc?(bd.range?bd.range.reverse():(Na(Nc+".autorange",!0),bd.range=[1,0]),kb.autorange?Fa.calc=!0:Fa.plot=!0):(sb._has("scatter-like")&&sb._has("regl")&&"dragmode"===Wb&&("lasso"===ub||"select"===ub)&&"lasso"!==$b&&"select"!==$b?Fa.plot=!0:sb._has("gl2d")?Fa.plot=!0:Pb?pb.update(Fa,Pb):Fa.calc=!0,mb.set(ub))}}for(Rc in Za)cb.applyContainerArrayChanges(Ka,Ba(qb,Rc),Za[Rc],Fa,Ba)||(Fa.plot=!0);for(var gb in Ob)if(sb=
(rc=ua.getFromId(Ka,gb))&&rc._constraintGroup){Fa.calc=!0;for(var vb in sb)Ob[vb]||(ua.getFromId(Ka,vb)._constraintShrinkable=!0)}if(L(Ka)||Ta.height||Ta.width)Fa.plot=!0;if(Fa.plot||Fa.calc)Fa.layoutReplot=!0;return{flags:Fa,rangesAltered:Ob,undoit:Kb,redoit:La,eventData:Va}}function L(Ka){var Ta=Ka._fullLayout,Na=Ta.width,ib=Ta.height;Ka.layout.autosize&&na.plotAutoSize(Ka,Ka.layout,Ta);return Ta.width!==Na||Ta.height!==ib}function K(Ka,Ta,Na,ib){Ka=da.getGraphDiv(Ka);$a.clearPromiseQueue(Ka);if(Ka.framework&&
Ka.framework.isPolar)return Promise.resolve(Ka);da.isPlainObject(Ta)||(Ta={});da.isPlainObject(Na)||(Na={});Object.keys(Ta).length&&(Ka.changed=!0);Object.keys(Na).length&&(Ka.changed=!0);ib=$a.coerceTraceIndices(Ka,ib);var qb=E(Ka,da.extendFlat({},Ta),ib);Ta=qb.flags;var sb=J(Ka,da.extendFlat({},Na)),Ba=sb.flags;if(Ta.calc||Ba.calc)Ka.calcdata=void 0;Ta.clearAxisTypes&&$a.clearAxisTypes(Ka,ib,Na);Na=[];Ba.layoutReplot?Na.push(jb.layoutReplot):Ta.fullReplot?Na.push(I.plot):(Na.push(na.previousPromises),
D(Ka,Ba,sb)||na.supplyDefaults(Ka),Ta.style&&Na.push(jb.doTraceStyle),(Ta.colorbars||Ba.colorbars)&&Na.push(jb.doColorBars),Ba.legend&&Na.push(jb.doLegend),Ba.layoutstyle&&Na.push(jb.layoutStyles),Ba.axrange&&G(Na,sb.rangesAltered),Ba.ticks&&Na.push(jb.doTicksRelayout),Ba.modebar&&Na.push(jb.doModeBar),Ba.camera&&Na.push(jb.doCamera),Na.push(r));Na.push(na.rehover,na.redrag);ma.add(Ka,K,[Ka,qb.undoit,sb.undoit,qb.traces],K,[Ka,qb.redoit,sb.redoit,qb.traces]);(Na=da.syncOrAsync(Na,Ka))&&Na.then||(Na=
Promise.resolve(Ka));return Na.then(function(){Ka.emit("plotly_update",{data:qb.eventData,layout:sb.eventData});return Ka})}function H(Ka){return function(Ta){Ta._fullLayout._guiEditing=!0;var Na=Ka.apply(null,arguments);Ta._fullLayout._guiEditing=!1;return Na}}function Q(Ka,Ta){for(var Na=0;Na<Ta.length;Na++){var ib=Ta[Na],qb=Ka.match(ib.pattern);if(qb)return{head:qb[1],attr:ib.attr}}}function M(Ka,Ta){var Na=oa(Ta,Ka).get();if(void 0!==Na)return Na;Ka=Ka.split(".");for(Ka.pop();1<Ka.length;)if(Ka.pop(),
Na=oa(Ta,Ka.join(".")+".uirevision").get(),void 0!==Na)return Na;return Ta.uirevision}function P(Ka,Ta){var Na=da.isPlainObject(Ka),ib=Array.isArray(Ka);return Na||ib?(Na&&da.isPlainObject(Ta)||ib&&Array.isArray(Ta))&&JSON.stringify(Ka)===JSON.stringify(Ta):Ka===Ta}function T(Ka,Ta,Na,ib){var qb=ib._preGUI,sb,Ba,Fa,La=[],Va={};for(sb in qb){if(Ba=Q(sb,Xa)){if(Ba=Ba.attr||Ba.head+".uirevision",(Ba=(Fa=oa(ib,Ba).get())&&M(Ba,Ta))&&Ba===Fa){Fa=qb[sb];null===Fa&&(Fa=void 0);Ba=oa(Ta,sb);var Za=Ba.get();
if(P(Za,Fa)){void 0===Za&&"autorange"===sb.substr(sb.length-9)&&La.push(sb.substr(0,sb.length-10));Ba.set(B(oa(ib,sb).get()));continue}}}else da.warn("unrecognized GUI edit: "+sb);delete qb[sb];"range["===sb.substr(sb.length-8,6)&&(Va[sb.substr(0,sb.length-9)]=1)}for(qb=0;qb<La.length;qb++)Fa=La[qb],Va[Fa]&&(Fa=oa(Ta,Fa).get())&&delete Fa.autorange;La=ib._tracePreGUI;for(var mb in La)for(sb in Va=La[mb],qb=null,Va){if(!qb){a:{for(qb=0;qb<Na.length;qb++)if(Na[qb]._fullInput.uid===mb)break a;qb=-1}if(0>
qb){delete La[mb];break}var ub=Na[qb]._fullInput;a:{qb=ub.index;for(Fa=0;Fa<Ka.length;Fa++)if(Ka[Fa].uid===mb){qb=Fa;break a}qb=!Ka[qb]||Ka[qb].uid?-1:qb}if(0>qb){delete La[mb];break}qb=Ka[qb]}if(Ba=Q(sb,tb)){if(Ba.attr?Ba=(Fa=oa(ib,Ba.attr).get())&&M(Ba.attr,Ta):(Fa=ub.uirevision,Ba=qb.uirevision,void 0===Ba&&(Ba=Ta.uirevision)),Ba&&Ba===Fa&&(Fa=Va[sb],null===Fa&&(Fa=void 0),Ba=oa(qb,sb),Za=Ba.get(),P(Za,Fa))){Ba.set(B(oa(ub,sb).get()));continue}}else da.warn("unrecognized GUI edit: "+sb+" in trace uid "+
mb);delete Va[sb]}}function O(Ka,Ta,Na,ib,qb,sb){var Ba=Ta.length===Na.length;if(!qb&&!Ba)return{fullReplot:!0,calc:!0};var Fa=pb.traceFlags();Fa.arrays={};Fa.nChanges=0;Fa.nChangesAnim=0;ib={getValObject:function(Va){Va=pa.getTraceValObject(La,Va);!La._module.animatable&&Va.anim&&(Va.anim=!1);return Va},flags:Fa,immutable:ib,transition:qb,newDataRevision:sb,gd:Ka};sb={};for(Ka=0;Ka<Ta.length;Ka++)if(Na[Ka]){var La=Na[Ka]._fullInput;na.hasMakesDataTransform(La)&&(La=Na[Ka]);sb[La.uid]||(sb[La.uid]=
1,S(Ta[Ka]._fullInput,La,[],ib))}if(Fa.calc||Fa.plot)Fa.fullReplot=!0;qb&&Fa.nChanges&&Fa.nChangesAnim&&(Fa.anim=Fa.nChanges===Fa.nChangesAnim&&Ba?"all":"some");return Fa}function U(Ka,Ta,Na,ib,qb){var sb=pb.layoutFlags();sb.arrays={};sb.rangesAltered={};sb.nChanges=0;sb.nChangesAnim=0;S(Ta,Na,[],{getValObject:function(Ba){return pa.getLayoutValObject(Na,Ba)},flags:sb,immutable:ib,transition:qb,gd:Ka});if(sb.plot||sb.calc)sb.layoutReplot=!0;qb&&sb.nChanges&&sb.nChangesAnim&&(sb.anim=sb.nChanges===
sb.nChangesAnim?"all":"some");return sb}function S(Ka,Ta,Na,ib){function qb(){var $b=sb.editType;if(Za&&-1!==$b.indexOf("arraydraw"))da.pushUnique(La.arrays[Za],mb);else{pb.update(La,sb);"none"!==$b&&La.nChanges++;ib.transition&&sb.anim&&La.nChangesAnim++;if(Ia.test(Ob)||Oa.test(Ob))La.rangesAltered[Na[0]]=1;bb.test(Ob)&&oa(Ta,"_inputDomain").set(null);"datarevision"===Ba&&(La.newDataRevision=1)}}var sb,Ba,Fa=ib.getValObject,La=ib.flags,Va=ib.immutable,Za=ib.inArray,mb=ib.arrayIndex;for(Ba in Ka){if(La.calc&&
!ib.transition)return;var ub=Ka[Ba],Pb=Ta[Ba],Kb=Na.concat(Ba);var Ob=Kb.join(".");if("_"!==Ba.charAt(0)&&"function"!==typeof ub&&ub!==Pb){if(("tick0"===Ba||"dtick"===Ba)&&"geo"!==Na[0]){var Wb=Ta.tickmode;if("auto"===Wb||"array"===Wb||!Wb)continue}if(!("range"===Ba&&Ta.autorange||("zmin"===Ba||"zmax"===Ba)&&"contourcarpet"===Ta.type||!(sb=Fa(Kb))||sb._compareAsJSON&&JSON.stringify(ub)===JSON.stringify(Pb))){Wb=sb.valType;var Bc="data_array"===sb.valType||sb.arrayOk,Kc=Array.isArray(ub),Nc=Array.isArray(Pb);
if(Kc&&Nc){var bd="_input_"+Ba,kb=Ka[bd];bd=Ta[bd];if(Array.isArray(kb)&&kb===bd)continue}if(void 0===Pb)Bc&&Kc?La.calc=!0:qb();else if(sb._isLinkedToArray){Bc=[];Kc=!1;Za||(La.arrays[Ba]=Bc);Nc=Math.min(ub.length,Pb.length);kb=Math.max(ub.length,Pb.length);if(Nc!==kb)if("arraydraw"===sb.editType)Kc=!0;else{qb();continue}for(Wb=0;Wb<Nc;Wb++)S(ub[Wb],Pb[Wb],Kb.concat(Wb),da.extendFlat({inArray:Ba,arrayIndex:Wb},ib));if(Kc)for(Wb=Nc;Wb<kb;Wb++)Bc.push(Wb)}else!Wb&&da.isPlainObject(ub)?S(ub,Pb,Kb,ib):
Bc?Kc&&Nc?(Va&&(La.calc=!0),(Va||ib.newDataRevision)&&qb()):Kc!==Nc?La.calc=!0:qb():Kc&&Nc?(ub.length!==Pb.length||String(ub)!==String(Pb))&&qb():qb()}}}for(Ba in Ta)if(!(Ba in Ka||"_"===Ba.charAt(0)||"function"===typeof Ta[Ba]))if(sb=Fa(Na.concat(Ba)),("data_array"===sb.valType||sb.arrayOk)&&Array.isArray(Ta[Ba])){La.calc=!0;break}else qb()}function X(Ka,Ta){for(var Na in Ka)if("_"!==Na.charAt(0)){var ib=Ka[Na],qb=Ta[Na];if(ib!==qb)if(da.isPlainObject(ib)&&da.isPlainObject(qb)){if(X(ib,qb))return!0}else if(Array.isArray(ib)&&
Array.isArray(qb)){if(ib.length!==qb.length)return!0;for(var sb=0;sb<ib.length;sb++)if(ib[sb]!==qb[sb])if(da.isPlainObject(ib[sb])&&da.isPlainObject(qb[sb])){if(X(ib[sb],qb[sb]))return!0}else return!0}else return!0}}function ba(Ka){var Ta=Ka._fullLayout,Na=Ka.getBoundingClientRect();da.equalDomRects(Na,Ta._lastBBox)||(Ka=Ta._invTransform=da.inverseTransformMatrix(da.getFullTransformMatrix(Ka)),Ta._invScaleX=Math.sqrt(Ka[0][0]*Ka[0][0]+Ka[0][1]*Ka[0][1]+Ka[0][2]*Ka[0][2]),Ta._invScaleY=Math.sqrt(Ka[1][0]*
Ka[1][0]+Ka[1][1]*Ka[1][1]+Ka[1][2]*Ka[1][2]),Ta._lastBBox=Na)}function ca(Ka){var Ta=ia.select(Ka),Na=Ka._fullLayout;Na._calcInverseTransform=ba;Na._calcInverseTransform(Ka);Na._container=Ta.selectAll(".plot-container").data([0]);Na._container.enter().insert("div",":first-child").classed("plot-container",!0).classed("plotly",!0);Na._paperdiv=Na._container.selectAll(".svg-container").data([0]);Na._paperdiv.enter().append("div").classed("user-select-none",!0).classed("svg-container",!0).style("position",
"relative");Na._glcontainer=Na._paperdiv.selectAll(".gl-container").data([{}]);Na._glcontainer.enter().append("div").classed("gl-container",!0);Na._paperdiv.selectAll(".main-svg").remove();Na._paperdiv.select(".modebar-container").remove();Na._paper=Na._paperdiv.insert("svg",":first-child").classed("main-svg",!0);Na._toppaper=Na._paperdiv.append("svg").classed("main-svg",!0);Na._modebardiv=Na._paperdiv.append("div");delete Na._modeBar;Na._hoverpaper=Na._paperdiv.append("svg").classed("main-svg",!0);
if(!Na._uid){var ib={};ia.selectAll("defs").each(function(){this.id&&(ib[this.id.split("-")[1]]=1)});Na._uid=da.randstr(ib)}Na._paperdiv.selectAll(".main-svg").attr(Ua.svgAttrs);Na._defs=Na._paper.append("defs").attr("id","defs-"+Na._uid);Na._clips=Na._defs.append("g").classed("clips",!0);Na._topdefs=Na._toppaper.append("defs").attr("id","topdefs-"+Na._uid);Na._topclips=Na._topdefs.append("g").classed("clips",!0);Na._bgLayer=Na._paper.append("g").classed("bglayer",!0);Na._draggers=Na._paper.append("g").classed("draglayer",
!0);Ta=Na._paper.append("g").classed("layer-below",!0);Na._imageLowerLayer=Ta.append("g").classed("imagelayer",!0);Na._shapeLowerLayer=Ta.append("g").classed("shapelayer",!0);Na._cartesianlayer=Na._paper.append("g").classed("cartesianlayer",!0);Na._polarlayer=Na._paper.append("g").classed("polarlayer",!0);Na._ternarylayer=Na._paper.append("g").classed("ternarylayer",!0);Na._geolayer=Na._paper.append("g").classed("geolayer",!0);Na._funnelarealayer=Na._paper.append("g").classed("funnelarealayer",!0);
Na._pielayer=Na._paper.append("g").classed("pielayer",!0);Na._treemaplayer=Na._paper.append("g").classed("treemaplayer",!0);Na._sunburstlayer=Na._paper.append("g").classed("sunburstlayer",!0);Na._indicatorlayer=Na._toppaper.append("g").classed("indicatorlayer",!0);Na._glimages=Na._paper.append("g").classed("glimages",!0);Ta=Na._toppaper.append("g").classed("layer-above",!0);Na._imageUpperLayer=Ta.append("g").classed("imagelayer",!0);Na._shapeUpperLayer=Ta.append("g").classed("shapelayer",!0);Na._infolayer=
Na._toppaper.append("g").classed("infolayer",!0);Na._menulayer=Na._toppaper.append("g").classed("menulayer",!0);Na._zoomlayer=Na._toppaper.append("g").classed("zoomlayer",!0);Na._hoverlayer=Na._hoverpaper.append("g").classed("hoverlayer",!0);Na._modebardiv.classed("modebar-container",!0).style("position","absolute").style("top","0px").style("right","0px");Ka.emit("plotly_framework")}var ia=b("d3"),ja=b("fast-isnumeric"),la=b("has-hover"),da=b("../lib"),oa=da.nestedProperty,sa=b("../lib/events"),ma=
b("../lib/queue"),qa=b("../registry"),pa=b("./plot_schema"),na=b("../plots/plots"),ka=b("../plots/polar/legacy"),ua=b("../plots/cartesian/axes"),va=b("../components/drawing"),Ca=b("../components/color"),Ma=b("../plots/cartesian/graph_interact").initInteractions,Ua=b("../constants/xmlns_namespaces"),eb=b("../lib/svg_text_utils"),fb=b("../plots/cartesian/select").clearSelect,nb=b("./plot_config").dfltConfig,cb=b("./manage_arrays"),$a=b("./helpers"),jb=b("./subroutines"),pb=b("./edit_types"),xa=b("../plots/cartesian/constants").AX_NAME_PATTERN,
Ea=0,Ia=/^[xyz]axis[0-9]*\.range(\[[0|1]\])?$/,Oa=/^[xyz]axis[0-9]*\.autorange$/,bb=/^[xyz]axis[0-9]*\.domain(\[[0|1]\])?$/,Xa=[{pattern:/^hiddenlabels/,attr:"legend.uirevision"},{pattern:/^((x|y)axis\d*)\.((auto)?range|title\.text)/},{pattern:/axis\d*\.showspikes$/,attr:"modebar.uirevision"},{pattern:/(hover|drag)mode$/,attr:"modebar.uirevision"},{pattern:/^(scene\d*)\.camera/},{pattern:/^(geo\d*)\.(projection|center|fitbounds)/},{pattern:/^(ternary\d*\.[abc]axis)\.(min|title\.text)$/},{pattern:/^(polar\d*\.radialaxis)\.((auto)?range|angle|title\.text)/},
{pattern:/^(polar\d*\.angularaxis)\.rotation/},{pattern:/^(mapbox\d*)\.(center|zoom|bearing|pitch)/},{pattern:/^legend\.(x|y)$/,attr:"editrevision"},{pattern:/^(shapes|annotations)/,attr:"editrevision"},{pattern:/^title\.text$/,attr:"editrevision"}],tb=[{pattern:/^selectedpoints$/,attr:"selectionrevision"},{pattern:/(^|value\.)visible$/,attr:"legend.uirevision"},{pattern:/^dimensions\[\d+\]\.constraintrange/},{pattern:/^node\.(x|y|groups)/},{pattern:/^level$/},{pattern:/(^|value\.)name$/},{pattern:/colorbar\.title\.text$/},
{pattern:/colorbar\.(x|y)$/,attr:"editrevision"}];I.animate=function(Ka,Ta,Na){function ib(Fa,La){var Va=0;return function(){if(Fa&&++Va===La)return Fa()}}Ka=da.getGraphDiv(Ka);if(!da.isPlotDiv(Ka))throw Error("This element is not a Plotly plot: "+Ka+". It's likely that you've failed to create a plot before animating it. For more details, see https://plotly.com/javascript/animations/");var qb=Ka._transitionData;qb._frameQueue||(qb._frameQueue=[]);Na=na.supplyAnimationDefaults(Na);var sb=Na.transition,
Ba=Na.frame;void 0===qb._frameWaitingCnt&&(qb._frameWaitingCnt=0);return new Promise(function(Fa,La){function Va(){if(0!==qb._frameQueue.length){for(;qb._frameQueue.length;){var bd=qb._frameQueue.pop();if(bd.onInterrupt)bd.onInterrupt()}Ka.emit("plotly_animationinterrupted",[])}}function Za(bd){if(0!==bd.length){for(var kb=0;kb<bd.length;kb++){var $b="byname"===bd[kb].type?na.computeFrame(Ka,bd[kb].name):bd[kb].data;var gc=kb;gc=Array.isArray(Ba)?gc>=Ba.length?Ba[0]:Ba[gc]:Ba;var rc=kb;rc=Array.isArray(sb)?
rc>=sb.length?sb[0]:sb[rc]:sb;rc.duration=Math.min(rc.duration,gc.duration);$b={frame:$b,name:bd[kb].name,frameOpts:gc,transitionOpts:rc};kb===bd.length-1&&($b.onComplete=ib(Fa,2),$b.onInterrupt=La);qb._frameQueue.push($b)}"immediate"===Na.mode&&(qb._lastFrameAt=-Infinity);qb._animationRaf||ub()}}function mb(){if(qb._currentFrame&&qb._currentFrame.onComplete)qb._currentFrame.onComplete();var bd=qb._currentFrame=qb._frameQueue.shift();if(bd){var kb=bd.name?bd.name.toString():null;Ka._fullLayout._currentFrame=
kb;qb._lastFrameAt=Date.now();qb._timeToNext=bd.frameOpts.duration;na.transition(Ka,bd.frame.data,bd.frame.layout,$a.coerceTraceIndices(Ka,bd.frame.traces),bd.frameOpts,bd.transitionOpts).then(function(){if(bd.onComplete)bd.onComplete()});Ka.emit("plotly_animatingframe",{name:kb,frame:bd.frame,animation:{frame:bd.frameOpts,transition:bd.transitionOpts}})}else Ka.emit("plotly_animated"),window.cancelAnimationFrame(qb._animationRaf),qb._animationRaf=null}function ub(){Ka.emit("plotly_animating");qb._lastFrameAt=
-Infinity;qb._timeToNext=0;qb._runningTransitions=0;qb._currentFrame=null;var bd=function(){qb._animationRaf=window.requestAnimationFrame(bd);Date.now()-qb._lastFrameAt>qb._timeToNext&&mb()};bd()}function Pb(bd){Array.isArray(sb)?bd.transitionOpts=Kb>=sb.length?sb[Kb]:sb[0]:bd.transitionOpts=sb;Kb++;return bd}var Kb=0,Ob,Wb=[],Bc=void 0===Ta||null===Ta;var Kc=Array.isArray(Ta);if(!Bc&&!Kc&&da.isPlainObject(Ta))Wb.push({type:"object",data:Pb(da.extendFlat({},Ta))});else if(Bc||-1!==["string","number"].indexOf(typeof Ta))for(Kc=
0;Kc<qb._frames.length;Kc++)(Ob=qb._frames[Kc])&&(Bc||String(Ob.group)===String(Ta))&&Wb.push({type:"byname",name:String(Ob.name),data:Pb({name:Ob.name})});else if(Kc)for(Kc=0;Kc<Ta.length;Kc++)Ob=Ta[Kc],-1!==["number","string"].indexOf(typeof Ob)?(Ob=String(Ob),Wb.push({type:"byname",name:Ob,data:Pb({name:Ob})})):da.isPlainObject(Ob)&&Wb.push({type:"object",data:Pb(da.extendFlat({},Ob))});for(Kc=0;Kc<Wb.length;Kc++)if(Ob=Wb[Kc],"byname"===Ob.type&&!qb._frameHash[Ob.data.name]){da.warn('animate failure: frame not found: "'+
Ob.data.name+'"');La();return}-1!==["next","immediate"].indexOf(Na.mode)&&Va();"reverse"===Na.direction&&Wb.reverse();var Nc=Ka._fullLayout._currentFrame;if(Nc&&Na.fromcurrent){Bc=-1;for(Kc=0;Kc<Wb.length;Kc++)if(Ob=Wb[Kc],"byname"===Ob.type&&Ob.name===Nc){Bc=Kc;break}if(0<Bc&&Bc<Wb.length-1){Nc=[];for(Kc=0;Kc<Wb.length;Kc++)Ob=Wb[Kc],("byname"!==Wb[Kc].type||Kc>Bc)&&Nc.push(Ob);Wb=Nc}}0<Wb.length?Za(Wb):(Ka.emit("plotly_animated"),Fa())})};I.addFrames=function(Ka,Ta,Na){Ka=da.getGraphDiv(Ka);if(null===
Ta||void 0===Ta)return Promise.resolve();if(!da.isPlotDiv(Ka))throw Error("This element is not a Plotly plot: "+Ka+". It's likely that you've failed to create a plot before adding frames. For more details, see https://plotly.com/javascript/animations/");var ib,qb=Ka._transitionData._frames,sb=Ka._transitionData._frameHash;if(!Array.isArray(Ta))throw Error("addFrames failure: frameList must be an Array of frame definitions"+Ta);var Ba=qb.length+2*Ta.length;var Fa=[],La={};for(ib=Ta.length-1;0<=ib;ib--)if(da.isPlainObject(Ta[ib])){var Va=
Ta[ib].name;var Za=(sb[Va]||La[Va]||{}).name,mb=Ta[ib].name,ub=sb[Za]||La[Za];Za&&mb&&"number"===typeof mb&&ub&&5>Ea&&(Ea++,da.warn('addFrames: overwriting frame "'+(sb[Za]||La[Za]).name+'" with a frame whose name of type "number" also equates to "'+Za+'". This is valid but may potentially lead to unexpected behavior since all plotly.js frame names are stored internally as strings.'),5===Ea&&da.warn("addFrames: This API call has yielded too many of these warnings. For the rest of this call, further warnings about numeric frame names will be suppressed."));
La[Va]={name:Va};Fa.push({frame:na.supplyFrameDefaults(Ta[ib]),index:Na&&void 0!==Na[ib]&&null!==Na[ib]?Na[ib]:Ba+ib})}Fa.sort(function(Pb,Kb){return Pb.index>Kb.index?-1:Pb.index<Kb.index?1:0});Ta=[];Na=[];La=qb.length;for(ib=Fa.length-1;0<=ib;ib--){Ba=Fa[ib].frame;"number"===typeof Ba.name&&da.warn("Warning: addFrames accepts frames with numeric names, but the numbers areimplicitly cast to strings");if(!Ba.name)for(;sb[Ba.name="frame "+Ka._transitionData._counter++];);if(sb[Ba.name]){for(Va=0;Va<
qb.length&&(qb[Va]||{}).name!==Ba.name;Va++);Ta.push({type:"replace",index:Va,value:Ba});Na.unshift({type:"replace",index:Va,value:qb[Va]})}else Va=Math.max(0,Math.min(Fa[ib].index,La)),Ta.push({type:"insert",index:Va,value:Ba}),Na.unshift({type:"delete",index:Va}),La++}qb=ib=na.modifyFrames;sb=[Ka,Na];Fa=[Ka,Ta];ma&&ma.add(Ka,ib,sb,qb,Fa);return na.modifyFrames(Ka,Ta)};I.deleteFrames=function(Ka,Ta){Ka=da.getGraphDiv(Ka);if(!da.isPlotDiv(Ka))throw Error("This element is not a Plotly plot: "+Ka);
var Na,ib=Ka._transitionData._frames,qb=[],sb=[];if(!Ta)for(Ta=[],Na=0;Na<ib.length;Na++)Ta.push(Na);Ta=Ta.slice();Ta.sort();for(Na=Ta.length-1;0<=Na;Na--){var Ba=Ta[Na];qb.push({type:"delete",index:Ba});sb.unshift({type:"insert",index:Ba,value:ib[Ba]})}Na=Ta=na.modifyFrames;sb=[Ka,sb];Ba=[Ka,qb];ma&&ma.add(Ka,Ta,sb,Na,Ba);return na.modifyFrames(Ka,qb)};I.addTraces=t;I.deleteTraces=v;I.extendTraces=f;I.moveTraces=w;I.prependTraces=k;I.newPlot=function(Ka,Ta,Na,ib){Ka=da.getGraphDiv(Ka);na.cleanPlot([],
{},Ka._fullData||[],Ka._fullLayout||{});na.purge(Ka);return I.plot(Ka,Ta,Na,ib)};I.plot=function(Ka,Ta,Na,ib){function qb(){for(var Wb=ub._basePlotModules,Bc=0;Bc<Wb.length;Bc++)Wb[Bc].drawFramework&&Wb[Bc].drawFramework(Ka);!ub._glcanvas&&ub._has("gl")&&(ub._glcanvas=ub._glcontainer.selectAll(".gl-canvas").data([{key:"contextLayer",context:!0,pick:!1},{key:"focusLayer",context:!1,pick:!1},{key:"pickLayer",context:!1,pick:!0}],function(Kc){return Kc.key}),ub._glcanvas.enter().append("canvas").attr("class",
function(Kc){return"gl-canvas gl-canvas-"+Kc.key.replace("Layer","")}).style({position:"absolute",top:0,left:0,overflow:"visible","pointer-events":"none"}));if(ub._glcanvas&&(ub._glcanvas.attr("width",ub.width).attr("height",ub.height),(Wb=ub._glcanvas.data()[0].regl)&&(Math.floor(ub.width)!==Wb._gl.drawingBufferWidth||Math.floor(ub.height)!==Wb._gl.drawingBufferHeight)))if(Ob)da.error("WebGL context buffer and canvas dimensions do not match due to browser/WebGL bug.");else return da.log("WebGL context buffer and canvas dimensions do not match due to browser/WebGL bug. Clearing graph and plotting again."),
na.cleanPlot([],{},Ka._fullData,ub),na.supplyDefaults(Ka),ub=Ka._fullLayout,na.doCalcdata(Ka),Ob++,qb();"h"===ub.modebar.orientation?ub._modebardiv.style("height",null).style("width","100%"):ub._modebardiv.style("width",null).style("height",ub.height+"px");return na.previousPromises(Ka)}function sb(){na.clearAutoMarginIds(Ka);jb.drawMarginPushers(Ka);ua.allowAutoMargin(Ka);if(ub._has("pie"))for(var Wb=Ka._fullData,Bc=0;Bc<Wb.length;Bc++){var Kc=Wb[Bc];"pie"===Kc.type&&Kc.automargin&&na.allowAutoMargin(Ka,
"pie."+Kc.uid+".automargin")}na.doAutoMargin(Ka);return na.previousPromises(Ka)}function Ba(){if(Pb)return da.syncOrAsync([qa.getComponentMethod("shapes","calcAutorange"),qa.getComponentMethod("annotations","calcAutorange"),Fa],Ka);Fa()}function Fa(){Ka._transitioning||(jb.doAutoRangeAndConstraints(Ka),mb&&ua.saveRangeInitial(Ka),qa.getComponentMethod("rangeslider","calcAutorange")(Ka))}function La(){return ua.draw(Ka,mb?"":"redraw")}Ka=da.getGraphDiv(Ka);sa.init(Ka);if(da.isPlainObject(Ta)){var Va=
Ta;Ta=Va.data;Na=Va.layout;ib=Va.config;var Za=Va.frames}if(!1===sa.triggerHandler(Ka,"plotly_beforeplot",[Ta,Na,ib]))return Promise.reject();Ta||Na||da.isPlotDiv(Ka)||da.warn("Calling Plotly.plot as if redrawing but this container doesn't yet have a plot.",Ka);l(Ka,ib);Na||(Na={});ia.select(Ka).classed("js-plotly-plot",!0);va.makeTester();Array.isArray(Ka._promises)||(Ka._promises=[]);var mb=0===(Ka.data||[]).length&&Array.isArray(Ta);Array.isArray(Ta)&&($a.cleanData(Ta),mb?Ka.data=Ta:Ka.data.push.apply(Ka.data,
Ta),Ka.empty=!1);if(!Ka.layout||mb)Ka.layout=$a.cleanLayout(Na);na.supplyDefaults(Ka);var ub=Ka._fullLayout;ib=ub._has("cartesian");if(!ub._has("polar")&&Ta&&Ta[0]&&Ta[0].r)return da.log("Legacy polar charts are deprecated!"),a(Ka,Ta,Na);ub._replotting=!0;if(mb||ub._shouldCreateBgLayer)ca(Ka),ub._shouldCreateBgLayer&&delete ub._shouldCreateBgLayer;Ka.framework!==ca&&(Ka.framework=ca,ca(Ka));va.initGradients(Ka);mb&&ua.saveShowSpikeInitial(Ka);var Pb=!Ka.calcdata||Ka.calcdata.length!==(Ka._fullData||
[]).length;Pb&&na.doCalcdata(Ka);for(Ta=0;Ta<Ka.calcdata.length;Ta++)Ka.calcdata[Ta][0].trace=Ka._fullData[Ta];Ka._context.responsive?Ka._responsiveChartHandler||(Ka._responsiveChartHandler=function(){da.isHidden(Ka)||na.resize(Ka)},window.addEventListener("resize",Ka._responsiveChartHandler)):da.clearResponsive(Ka);var Kb=da.extendFlat({},ub._size),Ob=0;Ta=[na.previousPromises,function(){if(Za)return I.addFrames(Ka,Za)},qb,sb,function(){if(na.didMarginChange(Kb,ub._size))return da.syncOrAsync([sb,
jb.layoutStyles],Ka)}];ib&&Ta.push(Ba);Ta.push(jb.layoutStyles);ib&&Ta.push(La,function(Wb){Wb._fullLayout._insideTickLabelsAutorange&&u(Wb,Wb._fullLayout._insideTickLabelsAutorange).then(function(){Wb._fullLayout._insideTickLabelsAutorange=void 0})});Ta.push(jb.drawData,jb.finalDraw,Ma,na.addLinks,na.rehover,na.redrag,na.doAutoMargin,function(Wb){Wb._fullLayout._insideTickLabelsAutorange&&mb&&ua.saveRangeInitial(Wb,!0)},na.previousPromises);(Ta=da.syncOrAsync(Ta,Ka))&&Ta.then||(Ta=Promise.resolve());
return Ta.then(function(){r(Ka);return Ka})};I.purge=function(Ka){Ka=da.getGraphDiv(Ka);var Ta=Ka._fullLayout||{};na.cleanPlot([],{},Ka._fullData||[],Ta);na.purge(Ka);sa.purge(Ka);Ta._container&&Ta._container.remove();delete Ka._context;return Ka};I.react=function(Ka,Ta,Na,ib){function qb(){return I.addFrames(Ka,Va)}var sb;Ka=da.getGraphDiv(Ka);$a.clearPromiseQueue(Ka);var Ba=Ka._fullData,Fa=Ka._fullLayout;if(da.isPlotDiv(Ka)&&Ba&&Fa){if(da.isPlainObject(Ta)){var La=Ta;Ta=La.data;Na=La.layout;ib=
La.config;var Va=La.frames}La=!1;ib&&(La=da.extendDeep({},Ka._context),Ka._context=void 0,l(Ka,ib),La=X(La,Ka._context));Ka.data=Ta||[];$a.cleanData(Ka.data);Ka.layout=Na||{};$a.cleanLayout(Ka.layout);T(Ka.data,Ka.layout,Ba,Fa);na.supplyDefaults(Ka,{skipUpdateCalc:!0});var Za=Ka._fullData;ib=Ka._fullLayout;var mb=void 0===ib.datarevision,ub=ib.transition,Pb=U(Ka,Fa,ib,mb,ub),Kb=O(Ka,Ba,Za,mb,ub,Pb.newDataRevision);L(Ka)&&(Pb.layoutReplot=!0);if(Kb.calc||Pb.calc)for(Ka.calcdata=void 0,Ba=Object.getOwnPropertyNames(ib),
Za=0;Za<Ba.length;Za++)mb=Ba[Za],ub=mb.substring(0,5),("xaxis"===ub||"yaxis"===ub)&&(mb=ib[mb]._emptyCategories)&&mb();else na.supplyDefaultsUpdateCalc(Ka.calcdata,Za);Ba=[];Va&&(Ka._transitionData={},na.createTransitionData(Ka),Ba.push(qb));if(ib.transition&&!La&&(Kb.anim||Pb.anim))Pb.ticks&&Ba.push(jb.doTicksRelayout),na.doCalcdata(Ka),jb.doAutoRangeAndConstraints(Ka),Ba.push(function(){return na.transitionFromReact(Ka,Kb,Pb,Fa)});else if(Kb.fullReplot||Pb.layoutReplot||La)Ka._fullLayout._skipDefaults=
!0,Ba.push(I.plot);else{for(sb in Pb.arrays)if(La=Pb.arrays[sb],La.length)if(ib=qa.getComponentMethod(sb,"drawOne"),ib!==da.noop)for(Za=0;Za<La.length;Za++)ib(Ka,La[Za]);else{La=qa.getComponentMethod(sb,"draw");if(La===da.noop)throw Error("cannot draw components: "+sb);La(Ka)}Ba.push(na.previousPromises);Kb.style&&Ba.push(jb.doTraceStyle);(Kb.colorbars||Pb.colorbars)&&Ba.push(jb.doColorBars);Pb.legend&&Ba.push(jb.doLegend);Pb.layoutstyle&&Ba.push(jb.layoutStyles);Pb.axrange&&G(Ba);Pb.ticks&&Ba.push(jb.doTicksRelayout);
Pb.modebar&&Ba.push(jb.doModeBar);Pb.camera&&Ba.push(jb.doCamera);Ba.push(r)}Ba.push(na.rehover,na.redrag);(sb=da.syncOrAsync(Ba,Ka))&&sb.then||(sb=Promise.resolve(Ka))}else sb=I.newPlot(Ka,Ta,Na,ib);return sb.then(function(){Ka.emit("plotly_react",{data:Ta,layout:Na});return Ka})};I.redraw=function(Ka){Ka=da.getGraphDiv(Ka);if(!da.isPlotDiv(Ka))throw Error("This element is not a Plotly plot: "+Ka);$a.cleanData(Ka.data);$a.cleanLayout(Ka.layout);Ka.calcdata=void 0;return I.plot(Ka).then(function(){Ka.emit("plotly_redraw");
return Ka})};I.relayout=u;I.restyle=y;I.setPlotConfig=function(Ka){return da.extendFlat(nb,Ka)};I.update=K;I._guiRelayout=H(u);I._guiRestyle=H(y);I._guiUpdate=H(K);I._storeDirectGUIEdit=function(Ka,Ta,Na){for(var ib in Na){var qb=oa(Ka,ib);z(ib,qb.get(),Na[ib],Ta)}}},{"../components/color":643,"../components/drawing":665,"../constants/xmlns_namespaces":754,"../lib":778,"../lib/events":767,"../lib/queue":794,"../lib/svg_text_utils":803,"../plots/cartesian/axes":828,"../plots/cartesian/constants":834,
"../plots/cartesian/graph_interact":837,"../plots/cartesian/select":847,"../plots/plots":891,"../plots/polar/legacy":899,"../registry":911,"./edit_types":810,"./helpers":811,"./manage_arrays":813,"./plot_config":815,"./plot_schema":816,"./subroutines":818,d3:169,"fast-isnumeric":241,"has-hover":440}],815:[function(b,N,I){function r(q,m){for(var l in q){var a=q[l];a.valType?m[l]=a.dflt:(m[l]||(m[l]={}),r(a,m[l]))}}b={staticPlot:{valType:"boolean",dflt:!1},plotlyServerURL:{valType:"string",dflt:""},
editable:{valType:"boolean",dflt:!1},edits:{annotationPosition:{valType:"boolean",dflt:!1},annotationTail:{valType:"boolean",dflt:!1},annotationText:{valType:"boolean",dflt:!1},axisTitleText:{valType:"boolean",dflt:!1},colorbarPosition:{valType:"boolean",dflt:!1},colorbarTitleText:{valType:"boolean",dflt:!1},legendPosition:{valType:"boolean",dflt:!1},legendText:{valType:"boolean",dflt:!1},shapePosition:{valType:"boolean",dflt:!1},titleText:{valType:"boolean",dflt:!1}},autosizable:{valType:"boolean",
dflt:!1},responsive:{valType:"boolean",dflt:!1},fillFrame:{valType:"boolean",dflt:!1},frameMargins:{valType:"number",dflt:0,min:0,max:.5},scrollZoom:{valType:"flaglist",flags:["cartesian","gl3d","geo","mapbox"],extras:[!0,!1],dflt:"gl3d+geo+mapbox"},doubleClick:{valType:"enumerated",values:[!1,"reset","autosize","reset+autosize"],dflt:"reset+autosize"},doubleClickDelay:{valType:"number",dflt:300,min:0},showAxisDragHandles:{valType:"boolean",dflt:!0},showAxisRangeEntryBoxes:{valType:"boolean",dflt:!0},
showTips:{valType:"boolean",dflt:!0},showLink:{valType:"boolean",dflt:!1},linkText:{valType:"string",dflt:"Edit chart",noBlank:!0},sendData:{valType:"boolean",dflt:!0},showSources:{valType:"any",dflt:!1},displayModeBar:{valType:"enumerated",values:["hover",!0,!1],dflt:"hover"},showSendToCloud:{valType:"boolean",dflt:!1},showEditInChartStudio:{valType:"boolean",dflt:!1},modeBarButtonsToRemove:{valType:"any",dflt:[]},modeBarButtonsToAdd:{valType:"any",dflt:[]},modeBarButtons:{valType:"any",dflt:!1},
toImageButtonOptions:{valType:"any",dflt:{}},displaylogo:{valType:"boolean",dflt:!0},watermark:{valType:"boolean",dflt:!1},plotGlPixelRatio:{valType:"number",dflt:2,min:1,max:4},setBackground:{valType:"any",dflt:"transparent"},topojsonURL:{valType:"string",noBlank:!0,dflt:"https://cdn.plot.ly/"},mapboxAccessToken:{valType:"string",dflt:null},logging:{valType:"integer",min:0,max:2,dflt:1},notifyOnLogging:{valType:"integer",min:0,max:2,dflt:0},queueLength:{valType:"integer",min:0,dflt:0},globalTransforms:{valType:"any",
dflt:[]},locale:{valType:"string",dflt:"en-US"},locales:{valType:"any",dflt:{}}};I={};r(b,I);N.exports={configAttributes:b,dfltConfig:I}},{}],816:[function(b,N,I){function r(H,Q){var M,P,T=H._basePlotModules;if(T){for(M=0;M<T.length;M++){var O=T[M];if(O.attrRegex&&O.attrRegex.test(Q)){if(O.layoutAttrOverrides)return O.layoutAttrOverrides;if(!U&&O.layoutAttributes)var U=O.layoutAttributes}if((O=O.baseLayoutAttrOverrides)&&Q in O)return O[Q]}if(U)return U}if(T=H._modules)for(M=0;M<T.length;M++)if((H=
T[M].layoutAttributes)&&Q in H)return H[Q];for(P in k.componentsRegistry){O=k.componentsRegistry[P];if("colorscale"===O.name&&0===Q.indexOf("coloraxis"))return O.layoutAttributes[Q];if(!O.schema&&Q===O.name)return O.layoutAttributes}return Q in v?v[Q]:"radialaxis"===Q||"angularaxis"===Q?z[Q]:z.layout[Q]||!1}function q(H,Q,M){if(!H)return!1;if(H._isLinkedToArray)if(m(Q[M]))M++;else if(M<Q.length)return!1;for(;M<Q.length;M++){var P=H[Q[M]];if(D(P))H=P;else break;if(M===Q.length-1)break;if(H._isLinkedToArray){if(M++,
!m(Q[M]))return!1}else if("info_array"===H.valType){M++;P=Q[M];if(!m(P))return!1;var T=H.items;if(Array.isArray(T)){if(P>=T.length)return!1;if(2===H.dimensions){M++;if(Q.length===M)break;H=Q[M];if(!m(H))return!1;H=T[P][H]}else H=T[P]}else H=T}}return H}function m(H){return H===Math.round(H)&&0<=H}function l(H){if("area"===H){var Q={attributes:A};var M={}}else Q=k.modules[H]._module,M=Q.basePlotModule;var P={type:null},T=u({},t),O=u({},Q.attributes);I.crawl(O,function(U,S,X,ba,ca){J(T,ca).set(void 0);
void 0===U&&J(O,ca).set(void 0)});u(P,T);k.traceIs(H,"noOpacity")&&delete P.opacity;k.traceIs(H,"showLegend")||(delete P.showlegend,delete P.legendgroup);k.traceIs(H,"noHover")&&(delete P.hoverinfo,delete P.hoverlabel);Q.selectPoints||delete P.selectedpoints;u(P,O);M.attributes&&u(P,M.attributes);P.type=H;H={meta:Q.meta||{},categories:Q.categories||{},animatable:!!Q.animatable,type:H,attributes:n(P)};Q.layoutAttributes&&(M={},u(M,Q.layoutAttributes),H.layoutAttributes=n(M));Q.animatable||I.crawl(H,
function(U){I.isValObject(U)&&"anim"in U&&delete U.anim});return H}function a(){var H={},Q;u(H,v);for(Q in k.subplotsRegistry){var M=k.subplotsRegistry[Q];if(M.layoutAttributes)if(Array.isArray(M.attr))for(var P=0;P<M.attr.length;P++)f(H,M,M.attr[P]);else f(H,M,"subplot"===M.attr?M.name:M.attr)}C(H,{radialaxis:z.radialaxis,angularaxis:z.angularaxis});C(H,z.layout);for(Q in k.componentsRegistry)if(M=k.componentsRegistry[Q],(P=M.schema)&&(P.subplots||P.layout)){if((M=P.subplots)&&M.xaxis&&!M.yaxis)for(var T in M.xaxis)delete H.yaxis[T]}else"colorscale"===
M.name?u(H,M.layoutAttributes):M.layoutAttributes&&(P=M.layoutAttributes,M=J(H,M.name),M.set(u(M.get()||{},P)));return{layoutAttributes:n(H)}}function h(H){var Q=u({},k.transformsRegistry[H].attributes);Object.keys(k.componentsRegistry).forEach(function(M){var P=k.componentsRegistry[M];P.schema&&P.schema.transforms&&P.schema.transforms[H]&&Object.keys(P.schema.transforms[H]).forEach(function(T){var O=P.schema.transforms[H][T];T=J(Q,T);T.set(u(T.get()||{},O))})});return{attributes:n(Q)}}function g(){var H=
{frames:u({},w)};n(H);return H.frames}function n(H){p(H);d(H);e(H);return H}function p(H){I.crawl(H,function(Q,M,P){I.isValObject(Q)?"data_array"===Q.valType?(Q.role="data",P[M+"src"]={valType:"string",editType:"none"}):!0===Q.arrayOk&&(P[M+"src"]={valType:"string",editType:"none"}):D(Q)&&(Q.role="object")})}function d(H){I.crawl(H,function(Q,M,P){if(Q){var T=Q._isLinkedToArray;T&&(delete Q._isLinkedToArray,P[M]={items:{}},P[M].items[T]=Q,P[M].role="object")}})}function e(H){function Q(M){for(var P in M)if(D(M[P]))Q(M[P]);
else if(Array.isArray(M[P]))for(var T=0;T<M[P].length;T++)Q(M[P][T]);else M[P]instanceof RegExp&&(M[P]=M[P].toString())}Q(H)}function f(H,Q,M){H=J(H,M);Q=u({},Q.layoutAttributes);Q._isSubplotObj=!0;H.set(Q)}var k=b("../registry");N=b("../lib");var t=b("../plots/attributes"),v=b("../plots/layout_attributes"),w=b("../plots/frame_attributes"),y=b("../plots/animation_attributes"),B=b("./plot_config").configAttributes,A=b("../plots/polar/legacy/area_attributes"),z=b("../plots/polar/legacy/axis_attributes"),
E=b("./edit_types"),C=N.extendFlat,u=N.extendDeepAll,D=N.isPlainObject,G=N.isArrayOrTypedArray,J=N.nestedProperty,L=N.valObjectMeta,K=["_isSubplotObj","_isLinkedToArray","_arrayAttrRegexps","_deprecated"];I.IS_SUBPLOT_OBJ="_isSubplotObj";I.IS_LINKED_TO_ARRAY="_isLinkedToArray";I.DEPRECATED="_deprecated";I.UNDERSCORE_ATTRS=K;I.get=function(){var H={};k.allTypes.concat("area").forEach(function(M){H[M]=l(M)});var Q={};Object.keys(k.transformsRegistry).forEach(function(M){Q[M]=h(M)});return{defs:{valObjects:L,
metaKeys:K.concat(["description","role","editType","impliedEdits"]),editType:{traces:E.traces,layout:E.layout},impliedEdits:{}},traces:H,layout:a(),transforms:Q,frames:g(),animation:n(y),config:n(B)}};I.crawl=function(H,Q,M,P){var T=M||0;P=P||"";Object.keys(H).forEach(function(O){var U=H[O];if(-1===K.indexOf(O)){var S=(P?P+".":"")+O;Q(U,O,H,T,S);I.isValObject(U)||D(U)&&"impliedEdits"!==O&&I.crawl(U,Q,T+1,S)}})};I.isValObject=function(H){return H&&void 0!==H.valType};I.findArrayAttributes=function(H){function Q(ia,
ja,la,da){T=T.slice(0,da).concat([ja]);O=O.slice(0,da).concat([ia&&ia._isLinkedToArray]);!ia||"data_array"!==ia.valType&&!0!==ia.arrayOk||"colorbar"===T[da-1]&&("ticktext"===ja||"tickvals"===ja)||M(U,0,"")}function M(ia,ja,la){ia=ia[T[ja]];la+=T[ja];if(ja===T.length-1)G(ia)&&P.push(S+la);else if(O[ja]){if(Array.isArray(ia))for(var da=0;da<ia.length;da++)D(ia[da])&&M(ia[da],ja+1,la+"["+da+"].")}else D(ia)&&M(ia,ja+1,la+".")}var P=[],T=[],O=[];var U=H;var S="";I.crawl(t,Q);H._module&&H._module.attributes&&
I.crawl(H._module.attributes,Q);if(H=H.transforms)for(var X=0;X<H.length;X++){var ba=H[X],ca=ba._module;ca&&(S="transforms["+X+"].",U=ba,I.crawl(ca.attributes,Q))}return P};I.getTraceValObject=function(H,Q){var M=Q[0],P=1;if("transforms"===M){if(1===Q.length)return t.transforms;M=H.transforms;if(!Array.isArray(M)||!M.length)return!1;P=Q[1];if(!m(P)||P>=M.length)return!1;H=(H=(k.transformsRegistry[M[P].type]||{}).attributes)&&H[Q[2]];P=3}else if("area"===H.type)H=A[M];else{var T=H._module;T||(T=(k.modules[H.type||
t.type.dflt]||{})._module);if(!T)return!1;H=(H=T.attributes)&&H[M];H||(T=T.basePlotModule)&&T.attributes&&(H=T.attributes[M]);H||(H=t[M])}return q(H,Q,P)};I.getLayoutValObject=function(H,Q){H=r(H,Q[0]);return q(H,Q,1)}},{"../lib":778,"../plots/animation_attributes":822,"../plots/attributes":824,"../plots/frame_attributes":857,"../plots/layout_attributes":882,"../plots/polar/legacy/area_attributes":897,"../plots/polar/legacy/axis_attributes":898,"../registry":911,"./edit_types":810,"./plot_config":815}],
817:[function(b,N,I){function r(a){"s"!==a.charAt(a.length-1)&&q.warn("bad argument to arrayDefaultKey: "+a);return a.substr(0,a.length-1)+"defaults"}var q=b("../lib"),m=b("../plots/attributes"),l={name:{valType:"string",editType:"none"},templateitemname:{valType:"string",editType:"calc"}};I.templatedArray=function(a,h){h._isLinkedToArray=a;h.name=l.name;h.templateitemname=l.templateitemname;return h};I.traceTemplater=function(a){var h={},g;for(g in a){var n=a[g];Array.isArray(n)&&n.length&&(h[g]=
0)}return{newTrace:function(p){g=q.coerce(p,{},m,"type");p={type:g,_template:null};if(g in h){n=a[g];var d=h[g]%n.length;h[g]++;p._template=n[d]}return p}}};I.newContainer=function(a,h,g){var n=a._template;g=n&&(n[h]||g&&n[g]);q.isPlainObject(g)||(g=null);return a[h]={_template:g}};I.arrayTemplater=function(a,h,g){var n=(a=a._template)&&a[r(h)],p=a&&a[h];Array.isArray(p)&&p.length||(p=[]);var d={};return{newItem:function(e){var f={name:e.name,_input:e},k=f.templateitemname=e.templateitemname;if(!k||
"string"!==typeof k)return f._template=n,f;for(var t=0;t<p.length;t++){var v=p[t];if(v.name===k)return d[k]=1,f._template=v,f}f[g]=e[g]||!1;f._template=!1;return f},defaultItems:function(){for(var e=[],f=0;f<p.length;f++){var k=p[f],t=k.name;if(t&&"string"===typeof t&&!d[t]){var v={_template:k,name:t,_input:{_templateitemname:t}};v.templateitemname=k.templateitemname;e.push(v);d[t]=1}}return e}}};I.arrayDefaultKey=r;I.arrayEditor=function(a,h,g){function n(){v={};k&&(v[t]={},v[t].templateitemname=
k)}function p(w,y){k?q.nestedProperty(v[t],w).set(y):v[t+"."+w]=y}function d(){var w=v;n();return w}var e=(q.nestedProperty(a,h).get()||[]).length,f=g._index,k=f>=e&&(g._input||{})._templateitemname;k&&(f=e);var t=h+"["+f+"]",v;n();return{modifyBase:function(w,y){v[w]=y},modifyItem:p,getUpdateObj:d,applyUpdate:function(w,y){w&&p(w,y);w=d();for(var B in w)q.nestedProperty(a,B).set(w[B])}}}},{"../lib":778,"../plots/attributes":824}],818:[function(b,N,I){function r(z,E,C){for(var u=0;u<C.length;u++){var D=
C[u][0],G=C[u][1];if(!(D[0]>=z[1]||D[1]<=z[0])&&G[0]<E[1]&&G[1]>E[0])return!0}return!1}function q(z){function E(ma,qa,pa){var na=ma._lw/2;return"x"===ma._id.charAt(0)?qa?"top"===pa?qa._offset-H-na:qa._offset+qa._length+H+na:K.t+K.h*(1-(ma.position||0))+na%1:qa?"right"===pa?qa._offset+qa._length+H+na:qa._offset-H-na:K.l+K.w*(ma.position||0)+na%1}function C(ma){return"M"+la+","+ma+"H"+da}function u(ma){return"M"+ia._offset+","+ma+"h"+ia._length}function D(ma){return"M"+ma+","+sa+"V"+oa}function G(ma){return"M"+
ma+","+ja._offset+"v"+ja._length}function J(ma,qa,pa){if(!ma.showline||P!==ma._mainSubplot)return"";if(!ma._anchorAxis)return pa(ma._mainLinePosition);pa=qa(ma._mainLinePosition);ma.mirror&&(pa+=qa(ma._mainMirrorPosition));return pa}var L=z._fullLayout,K=L._size,H=K.p,Q=v.list(z,"",!0),M,P;L._paperdiv.style({width:z._context.responsive&&L.autosize&&!z._context._hasZeroWidth&&!z.layout.width?"100%":L.width+"px",height:z._context.responsive&&L.autosize&&!z._context._hasZeroHeight&&!z.layout.height?
"100%":L.height+"px"}).selectAll(".main-svg").call(f.setSize,L.width,L.height);z._context.setBackground(z,L.paper_bgcolor);I.drawMainTitle(z);t.manage(z);if(!L._has("cartesian"))return n.previousPromises(z);for(M=0;M<Q.length;M++){var T=Q[M];var O=T._anchorAxis;T._linepositions={};T._lw=f.crispRound(z,T.linewidth,1);T._mainLinePosition=E(T,O,T.side);T._mainMirrorPosition=T.mirror&&O?E(T,O,w.OPPOSITE_SIDE[T.side]):null}M=[];O=[];var U=[],S=1===e.opacity(L.paper_bgcolor)&&1===e.opacity(L.plot_bgcolor)&&
L.paper_bgcolor===L.plot_bgcolor;for(P in L._plots)if(T=L._plots[P],T.mainplot)T.bg&&T.bg.remove(),T.bg=void 0;else{var X=T.xaxis.domain,ba=T.yaxis.domain,ca=T.plotgroup;r(X,ba,U)?(X=ca.node(),T=T.bg=p.ensureSingle(ca,"rect","bg"),X.insertBefore(T.node(),X.childNodes[0]),O.push(P)):(ca.select("rect.bg").remove(),U.push([X,ba]),S||(M.push(P),O.push(P)))}T=L._bgLayer.selectAll(".bg").data(M);T.enter().append("rect").classed("bg",!0);T.exit().remove();T.each(function(ma){L._plots[ma].bg=h.select(this)});
for(M=0;M<O.length;M++){T=L._plots[O[M]];var ia=T.xaxis;var ja=T.yaxis;T.bg&&void 0!==ia._offset&&void 0!==ja._offset&&T.bg.call(f.setRect,ia._offset-H,ja._offset-H,ia._length+2*H,ja._length+2*H).call(e.fill,L.plot_bgcolor).style("stroke-width",0)}if(!L._hasOnlyLargeSploms)for(P in L._plots)T=L._plots[P],ia=T.xaxis,ja=T.yaxis,O=T.clipId="clip"+L._uid+P+"plot",M=p.ensureSingleById(L._clips,"clipPath",O,function(ma){ma.classed("plotclip",!0).append("rect")}),T.clipRect=M.select("rect").attr({width:ia._length,
height:ja._length}),f.setTranslate(T.plot,ia._offset,ja._offset),T._hasClipOnAxisFalse?M=null:(M=O,O=null),f.setClipUrl(T.plot,M,z),T.layerClipId=O;for(P in L._plots){T=L._plots[P];ia=T.xaxis;ja=T.yaxis;S="M0,0";if(m(ia,P)){O=a(ia,"left",ja,Q);var la=ia._offset-(O?H+O:0);O=a(ia,"right",ja,Q);var da=ia._offset+ia._length+(O?H+O:0);M=E(ia,ja,"bottom");U=E(ia,ja,"top");O=!ia._anchorAxis||P!==ia._mainSubplot;!O||"allticks"!==ia.mirror&&"all"!==ia.mirror||(ia._linepositions[P]=[M,U]);S=J(ia,C,u);O&&ia.showline&&
("all"===ia.mirror||"allticks"===ia.mirror)&&(S+=C(M)+C(U));T.xlines.style("stroke-width",ia._lw+"px").call(e.stroke,ia.showline?ia.linecolor:"rgba(0,0,0,0)")}T.xlines.attr("d",S);S="M0,0";if(m(ja,P)){O=a(ja,"bottom",ia,Q);var oa=ja._offset+ja._length+(O?H:0);O=a(ja,"top",ia,Q);var sa=ja._offset-(O?H:0);M=E(ja,ia,"left");U=E(ja,ia,"right");O=!ja._anchorAxis||P!==ja._mainSubplot;!O||"allticks"!==ja.mirror&&"all"!==ja.mirror||(ja._linepositions[P]=[M,U]);S=J(ja,D,G);O&&ja.showline&&("all"===ja.mirror||
"allticks"===ja.mirror)&&(S+=D(M)+D(U));T.ylines.style("stroke-width",ja._lw+"px").call(e.stroke,ja.showline?ja.linecolor:"rgba(0,0,0,0)")}T.ylines.attr("d",S)}v.makeClipPaths(z);return n.previousPromises(z)}function m(z,E){return(z.ticks||z.showline)&&(E===z._mainSubplot||"all"===z.mirror||"allticks"===z.mirror)}function l(z,E,C){if(!C.showline||!C._lw)return!1;if("all"===C.mirror||"allticks"===C.mirror)return!0;var u=C._anchorAxis;if(!u)return!1;var D=w.FROM_BL[E];return C.side===E?u.domain[D]===
z.domain[D]:C.mirror&&u.domain[1-D]===z.domain[1-D]}function a(z,E,C,u){if(l(z,E,C))return C._lw;for(var D=0;D<u.length;D++){var G=u[D];if(G._mainAxis===C._mainAxis&&l(z,E,G))return G._lw}return 0}var h=b("d3"),g=b("../registry"),n=b("../plots/plots"),p=b("../lib"),d=b("../lib/clear_gl_canvases"),e=b("../components/color"),f=b("../components/drawing"),k=b("../components/titles"),t=b("../components/modebar"),v=b("../plots/cartesian/axes"),w=b("../constants/alignment");N=b("../plots/cartesian/constraints");
var y=N.enforce,B=N.clean,A=b("../plots/cartesian/autorange").doAutoRange;I.layoutStyles=function(z){return p.syncOrAsync([n.doAutoMargin,q],z)};I.drawMainTitle=function(z){var E=z._fullLayout;var C=E.title;var u="middle";p.isRightAnchor(C)?u="end":p.isLeftAnchor(C)&&(u="start");C=u;u=E.title;var D="0em";p.isTopAnchor(u)?D=w.CAP_SHIFT+"em":p.isMiddleAnchor(u)&&(D=w.MID_SHIFT+"em");u=D;D=k.draw;var G=E._dfltTitle.plot;a:{var J=E.title;var L=E._size,K=0;"start"===C?K=J.pad.l:"end"===C&&(K=-J.pad.r);
switch(J.xref){case "paper":J=L.l+L.w*J.x+K;break a;default:J=E.width*J.x+K}}a:{L=E.title;K=E._size;var H=0;"0em"!==u&&u?u===w.CAP_SHIFT+"em"&&(H=L.pad.t):H=-L.pad.b;if("auto"===L.y)L=K.t/2;else switch(L.yref){case "paper":L=K.t+K.h-K.h*L.y+H;break a;default:L=E.height-E.height*L.y+H}}D.call(k,z,"gtitle",{propContainer:E,propName:"title.text",placeholder:G,attributes:{x:J,y:L,"text-anchor":C,dy:u}})};I.doTraceStyle=function(z){var E=z.calcdata,C=[],u;for(u=0;u<E.length;u++){var D=E[u],G=D[0]||{},
J=G.trace||{},L=J._module||{},K=L.arraysToCalcdata;K&&K(D,J);(D=L.editStyle)&&C.push({fn:D,cd0:G})}if(C.length){for(u=0;u<C.length;u++)E=C[u],E.fn(z,E.cd0);d(z);I.redrawReglTraces(z)}n.style(z);g.getComponentMethod("legend","draw")(z);return n.previousPromises(z)};I.doColorBars=function(z){g.getComponentMethod("colorbar","draw")(z);return n.previousPromises(z)};I.layoutReplot=function(z){var E=z.layout;z.layout=void 0;return g.call("plot",z,"",E)};I.doLegend=function(z){g.getComponentMethod("legend",
"draw")(z);return n.previousPromises(z)};I.doTicksRelayout=function(z){v.draw(z,"redraw");z._fullLayout._hasOnlyLargeSploms&&(g.subplotsRegistry.splom.updateGrid(z),d(z),I.redrawReglTraces(z));I.drawMainTitle(z);return n.previousPromises(z)};I.doModeBar=function(z){var E=z._fullLayout;t.manage(z);for(var C=0;C<E._basePlotModules.length;C++){var u=E._basePlotModules[C].updateFx;u&&u(z)}return n.previousPromises(z)};I.doCamera=function(z){z=z._fullLayout;for(var E=z._subplots.gl3d,C=0;C<E.length;C++){var u=
z[E[C]];u._scene.setViewport(u)}};I.drawData=function(z){var E=z._fullLayout;d(z);for(var C=E._basePlotModules,u=0;u<C.length;u++)C[u].plot(z);I.redrawReglTraces(z);n.style(z);g.getComponentMethod("shapes","draw")(z);g.getComponentMethod("annotations","draw")(z);g.getComponentMethod("images","draw")(z);E._replotting=!1;return n.previousPromises(z)};I.redrawReglTraces=function(z){var E=z._fullLayout;if(E._has("regl")){var C=z._fullData;z=[];var u=[],D;E._hasOnlyLargeSploms&&E._splomGrid.draw();for(D=
0;D<C.length;D++){var G=C[D];!0===G.visible&&0!==G._length&&("splom"===G.type?E._splomScenes[G.uid].draw():"scattergl"===G.type?p.pushUnique(z,G.xaxis+G.yaxis):"scatterpolargl"===G.type&&p.pushUnique(u,G.subplot))}for(D=0;D<z.length;D++)C=E._plots[z[D]],C._scene&&C._scene.draw();for(D=0;D<u.length;D++)C=E[u[D]]._subplot,C._scene&&C._scene.draw()}};I.doAutoRangeAndConstraints=function(z){for(var E=v.list(z,"",!0),C,u={},D=0;D<E.length;D++)if(C=E[D],!u[C._id]){u[C._id]=1;B(z,C);A(z,C);var G=C._matchGroup;
if(G)for(var J in G)G=v.getFromId(z,J),A(z,G,C.range),u[J]=1}y(z)};I.finalDraw=function(z){g.getComponentMethod("rangeslider","draw")(z);g.getComponentMethod("rangeselector","draw")(z)};I.drawMarginPushers=function(z){g.getComponentMethod("legend","draw")(z);g.getComponentMethod("rangeselector","draw")(z);g.getComponentMethod("sliders","draw")(z);g.getComponentMethod("updatemenus","draw")(z);g.getComponentMethod("colorbar","draw")(z)}},{"../components/color":643,"../components/drawing":665,"../components/modebar":703,
"../components/titles":738,"../constants/alignment":745,"../lib":778,"../lib/clear_gl_canvases":762,"../plots/cartesian/autorange":827,"../plots/cartesian/axes":828,"../plots/cartesian/constraints":835,"../plots/plots":891,"../registry":911,d3:169}],819:[function(b,N,I){function r(v,w){function y(G,J,L){if(p(J)&&p(G))r(G,J);else if(Array.isArray(J)&&Array.isArray(G)){G=k.arrayTemplater({_template:v},L);for(z=0;z<J.length;z++){L=J[z];var K=G.newItem(L)._template;K&&r(K,L)}G=G.defaultItems();for(z=
0;z<G.length;z++)J.push(G[z]._template);for(z=0;z<J.length;z++)delete J[z].templateitemname}}v=n.extendDeep({},v);var B=Object.keys(v).sort(),A,z;for(A=0;A<B.length;A++){var E=B[A],C=v[E];E in w?y(C,w[E],E):w[E]=C;if(q(E)===E)for(var u in w){var D=q(u);u===D||D!==E||u in v||y(C,w[u],E)}}}function q(v){return v.replace(/[0-9]+$/,"")}function m(v,w,y,B,A){var z=A&&y(A),E;for(E in v){var C=v[E],u=h(v,E,B),D=h(v,E,A),G=y(D);if(!G){var J=q(E);J!==E&&(D=h(v,J,A),G=y(D))}if(!(z&&z===G||!G||G._noTemplating||
"data_array"===G.valType||G.arrayOk&&Array.isArray(C)))if(!G.valType&&p(C))m(C,w,y,u,D);else if(G._isLinkedToArray&&Array.isArray(C)){var L=!1;G=0;J={};for(var K=0;K<C.length;K++){var H=C[K];if(p(H)){var Q=H.name;Q?J[Q]||(m(H,w,y,h(C,G,u),h(C,G,D)),G++,J[Q]=1):L||(L=k.arrayDefaultKey(E),L=h(v,L,B),Q=h(C,G,u),m(H,w,y,Q,h(C,G,D)),H=n.nestedProperty(w,Q),n.nestedProperty(w,L).set(H.get()),H.set(null),L=!0)}}}else n.nestedProperty(w,u).set(C)}}function l(v,w){return d.getLayoutValObject(v,n.nestedProperty({},
w).parts)}function a(v,w){return d.getTraceValObject(v,n.nestedProperty({},w).parts)}function h(v,w,y){return y?Array.isArray(v)?y+"["+w+"]":y+"."+w:w}function g(v){switch(v.code){case "data":var w="The template has no key data.";break;case "layout":w="The template has no key layout.";break;case "missing":w=v.path?"There are no templates for item "+v.path+" with name "+v.templateitemname:"There are no templates for trace "+v.index+", of type "+v.traceType+".";break;case "unused":w=v.path?"The template item at "+
v.path+" was not used in constructing the plot.":v.dataCount?"Some of the templates of type "+v.traceType+" were not used. The template has "+v.templateCount+" traces, the data only has "+v.dataCount+" of this type.":"The template has "+v.templateCount+" traces of type "+v.traceType+" but there are none in the data.";break;case "reused":w="Some of the templates of type "+v.traceType+" were used more than once. The template has "+v.templateCount+" traces, the data has "+v.dataCount+" of this type."}v.msg=
w;return v}var n=b("../lib"),p=n.isPlainObject,d=b("./plot_schema"),e=b("../plots/plots"),f=b("../plots/attributes"),k=b("./plot_template"),t=b("./plot_config").dfltConfig;I.makeTemplate=function(v){v=n.isPlainObject(v)?v:n.getGraphDiv(v);v=n.extendDeep({_context:t},{data:v.data,layout:v.layout});e.supplyDefaults(v);var w=v.data||[],y=v.layout||{};y._basePlotModules=v._fullLayout._basePlotModules;y._modules=v._fullLayout._modules;var B={data:{},layout:{}};w.forEach(function(u){var D={};m(u,D,a.bind(null,
u));u=n.coerce(u,{},f,"type");var G=B.data[u];G||(G=B.data[u]=[]);G.push(D)});m(y,B.layout,l.bind(null,y));delete B.layout.template;v=y.template;if(p(v)){w=v.layout;var A;p(w)&&r(w,B.layout);var z=v.data;if(p(z)){for(A in B.data)if(w=z[A],Array.isArray(w)){var E=B.data[A];var C=E.length;y=w.length;for(v=0;v<C;v++)r(w[v%y],E[v]);for(v=C;v<y;v++)E.push(n.extendDeep({},w[v]))}for(A in z)A in B.data||(B.data[A]=n.extendDeep([],z[A]))}}return B};I.validateTemplate=function(v,w){function y(L,K){for(var H in L)if("_"!==
H.charAt(0)&&p(L[H])){var Q=q(H),M=[],P;for(P=0;P<K.length;P++)M.push(h(L,H,K[P])),Q!==H&&M.push(h(L,Q,K[P]));for(P=0;P<M.length;P++)D[M[P]]=1;y(L[H],M)}}function B(L,K){for(var H in L)if(-1===H.indexOf("defaults")&&p(L[H])){var Q=h(L,H,K);D[Q]?B(L[H],Q):u.push({code:"unused",path:Q})}}function A(L,K){for(var H in L)if("_"!==H.charAt(0)){var Q=L[H],M=h(L,H,K);if(p(Q))Array.isArray(L)&&!1===Q._template&&Q.templateitemname&&u.push({code:"missing",path:M,templateitemname:Q.templateitemname}),A(Q,M);
else{var P;if(P=Array.isArray(Q))a:{P=Q;for(var T=0;T<P.length;T++)if(p(P[T])){P=!0;break a}P=void 0}P&&A(Q,M)}}}var z=n.extendDeep({},{_context:t,data:v.data,layout:v.layout}),E=z.layout||{};p(w)||(w=E.template||{});var C=w.layout;v=w.data;var u=[];z.layout=E;z.layout.template=w;e.supplyDefaults(z);w=z._fullLayout;z=z._fullData;var D={};p(C)?(y(w,["layout"]),B(C,"layout")):u.push({code:"layout"});if(p(v)){C={};for(E=0;E<z.length;E++){var G=z[E];var J=G.type;C[J]=(C[J]||0)+1;G._fullInput._template||
u.push({code:"missing",index:G._fullInput.index,traceType:J})}for(J in v)E=v[J].length,G=C[J]||0,E>G?u.push({code:"unused",traceType:J,templateCount:E,dataCount:G}):G>E&&u.push({code:"reused",traceType:J,templateCount:E,dataCount:G})}else u.push({code:"data"});A({data:z,layout:w},"");if(u.length)return u.map(g)}},{"../lib":778,"../plots/attributes":824,"../plots/plots":891,"./plot_config":815,"./plot_schema":816,"./plot_template":817}],820:[function(b,N,I){var r=b("fast-isnumeric"),q=b("./plot_api"),
m=b("../plots/plots"),l=b("../lib"),a=b("../snapshot/helpers"),h=b("../snapshot/tosvg"),g=b("../snapshot/svgtoimg"),n=b("../version").version,p={format:{valType:"enumerated",values:["png","jpeg","webp","svg","full-json"],dflt:"png"},width:{valType:"number",min:1},height:{valType:"number",min:1},scale:{valType:"number",min:0,dflt:1},setBackground:{valType:"any",dflt:!1},imageDataOnly:{valType:"boolean",dflt:!1}};N.exports=function(d,e){function f(Q){return!(Q in e)||l.validate(e[Q],p[Q])}function k(Q,
M){return l.coerce(e,A,p,Q,M)}function t(){return new Promise(function(Q){setTimeout(Q,a.getDelay(J._fullLayout))})}function v(){return new Promise(function(Q,M){var P=h(J,z,u),T=J._fullLayout.width,O=J._fullLayout.height;if("full-json"===z)return M=m.graphJson(J,!1,"keepdata","object",!0,!0),M.version=n,M=JSON.stringify(M),q.purge(J),document.body.removeChild(J),G?Q(M):Q(a.encodeJSON(M));q.purge(J);document.body.removeChild(J);if("svg"===z)return G?Q(P):Q(a.encodeSVG(P));var U=document.createElement("canvas");
U.id=l.randstr();g({format:z,width:T,height:O,scale:u,canvas:U,svg:P,promise:!0}).then(Q).catch(M)})}e=e||{};if(l.isPlainObject(d)){var w=d.data||[];var y=d.layout||{};var B=d.config||{};d={}}else d=l.getGraphDiv(d),w=l.extendDeep([],d.data),y=l.extendDeep({},d.layout),B=d._context,d=d._fullLayout||{};if(!f("width")&&null!==e.width||!f("height")&&null!==e.height)throw Error("Height and width should be pixel values.");if(!f("format"))throw Error("Export format is not "+l.join2(p.format.values,", ",
" or ")+".");var A={},z=k("format"),E=k("width"),C=k("height"),u=k("scale"),D=k("setBackground"),G=k("imageDataOnly"),J=document.createElement("div");J.style.position="absolute";J.style.left="-5000px";document.body.appendChild(J);var L=l.extendFlat({},y);E?L.width=E:null===e.width&&r(d.width)&&(L.width=d.width);C?L.height=C:null===e.height&&r(d.height)&&(L.height=d.height);var K=l.extendFlat({},B,{_exportedPlot:!0,staticPlot:!0,setBackground:D}),H=a.getRedrawFunc(J);return new Promise(function(Q,
M){q.plot(J,w,L,K).then(H).then(t).then(v).then(function(P){P=G?P.replace(a.IMAGE_URL_PREFIX,""):P;Q(P)}).catch(function(P){M(P)})})}},{"../lib":778,"../plots/plots":891,"../snapshot/helpers":915,"../snapshot/svgtoimg":917,"../snapshot/tosvg":919,"../version":1370,"./plot_api":814,"fast-isnumeric":241}],821:[function(b,N,I){function r(t,v,w,y,B,A){A=A||[];for(var z=Object.keys(t),E=0;E<z.length;E++){var C=z[E];if("transforms"!==C){var u=A.slice();u.push(C);var D=t[C],G=v[C];var J=w;if(C in J)var L=
J[C];else L=l(C),L=J[L.keyMinusId];var K=(L||{}).valType,H="info_array"===K,Q="colorscale"===K;J=(L||{}).items;var M=w;var P=C,T=l(P),O=T.keyMinusId;T=T.id;M=O in M&&M[O]._isSubplotObj&&T?!0:P in M;if(M)if(p(D)&&p(G)&&"any"!==K)r(D,G,L,y,B,u);else if(H&&d(D))if(D.length>G.length&&y.push(m("unused",B,u.concat(G.length))),C=G.length,(K=Array.isArray(J))&&(C=Math.min(C,J.length)),2===L.dimensions)for(H=0;H<C;H++)if(d(D[H]))for(D[H].length>G[H].length&&y.push(m("unused",B,u.concat(H,G[H].length))),O=
G[H].length,L=0;L<(K?Math.min(O,J[H].length):O);L++)Q=K?J[H][L]:J,M=D[H][L],P=G[H][L],a.validate(M,Q)?P!==M&&P!==+M&&y.push(m("dynamic",B,u.concat(H,L),M,P)):y.push(m("value",B,u.concat(H,L),M));else y.push(m("array",B,u.concat(H),D[H]));else for(H=0;H<C;H++)Q=K?J[H]:J,M=D[H],P=G[H],a.validate(M,Q)?P!==M&&P!==+M&&y.push(m("dynamic",B,u.concat(H),M,P)):y.push(m("value",B,u.concat(H),M));else if(L.items&&!H&&d(D)){J=J[Object.keys(J)[0]];C=[];for(L=0;L<G.length;L++)H=G[L]._index||L,K=u.slice(),K.push(H),
p(D[H])&&p(G[L])&&(C.push(H),H=D[H],Q=G[L],p(H)&&!1!==H.visible&&!1===Q.visible?y.push(m("invisible",B,K)):r(H,Q,J,y,B,K));for(L=0;L<D.length;L++)K=u.slice(),K.push(L),p(D[L])?-1===C.indexOf(L)&&y.push(m("unused",B,K)):y.push(m("object",B,K,D[L]))}else!p(D)&&p(G)?y.push(m("object",B,u,D)):e(D)||!e(G)||H||Q?C in v?a.validate(D,L)?"enumerated"===L.valType&&(L.coerceNumber&&D!==+G||D!==G)&&y.push(m("dynamic",B,u,D,G)):y.push(m("value",B,u,D)):y.push(m("unused",B,u,D)):y.push(m("array",B,u,D));else y.push(m("schema",
B,u))}}return y}function q(t){return d(t)?"In data trace "+t[1]+", ":"In "+t+", "}function m(t,v,w,y,B){w=w||"";if(d(v)){var A=v[0];var z=v[1]}else A=v,z=null;var E=w;if(d(E)){for(var C="",u=0;u<E.length;u++){var D=E[u];C="number"===typeof D?C.substr(0,C.length-1)+"["+D+"]":C+D;u<E.length-1&&(C+=".")}E=C}else E=String(E);v=f[t](v,E,y,B);a.log(v);return{code:t,container:A,trace:z,path:w,astr:E,msg:v}}function l(t){t=t.match(k);return{keyMinusId:t&&t[1],id:t&&t[2]}}var a=b("../lib"),h=b("../plots/plots"),
g=b("./plot_schema"),n=b("./plot_config").dfltConfig,p=a.isPlainObject,d=Array.isArray,e=a.isArrayOrTypedArray;N.exports=function(t,v){void 0===t&&(t=[]);void 0===v&&(v={});var w=g.get(),y=[],B={_context:a.extendFlat({},n)};if(d(t)){B.data=a.extendDeep([],t);var A=t}else B.data=[],A=[],y.push(m("array","data"));if(p(v)){B.layout=a.extendDeep({},v);var z=v}else B.layout={},z={},1<arguments.length&&y.push(m("object","layout"));h.supplyDefaults(B);for(var E=B._fullData,C=A.length,u=0;u<C;u++){var D=
A[u],G=["data",u];if(p(D)){var J=E[u],L=J.type,K=w.traces[L].attributes;K.type={valType:"enumerated",values:[L]};!1===J.visible&&!1!==D.visible&&y.push(m("invisible",G));r(D,J,K,y,G);D=D.transforms;J=J.transforms;if(D)for(d(D)||y.push(m("array",G,["transforms"])),G.push("transforms"),L=0;L<D.length;L++){K=["transforms",L];var H=D[L].type;p(D[L])?(H=w.transforms[H]?w.transforms[H].attributes:{},H.type={valType:"enumerated",values:Object.keys(w.transforms)},r(D[L],J[L],H,y,G,K)):y.push(m("object",G,
K))}}else y.push(m("object",G))}B=B._fullLayout;A=w.layout.layoutAttributes;for(C=0;C<E.length;C++)u=E[C],G=w.traces[u.type],(D=G.layoutAttributes)&&(u.subplot?a.extendFlat(A[G.attributes.subplot.dflt],D):a.extendFlat(A,D));r(z,B,A,y,"layout");return 0===y.length?void 0:y};var f={object:function(t,v){return("layout"===t&&""===v?"The layout argument":"data"===t[0]&&""===v?"Trace "+t[1]+" in the data argument":q(t)+"key "+v)+" must be linked to an object container"},array:function(t,v){return("data"===
t?"The data argument":q(t)+"key "+v)+" must be linked to an array container"},schema:function(t,v){return q(t)+"key "+v+" is not part of the schema"},unused:function(t,v,w){w=p(w)?"container":"key";return q(t)+w+" "+v+" did not get coerced"},dynamic:function(t,v,w,y){return[q(t)+"key",v,"(set to '"+w+"')","got reset to","'"+y+"'","during defaults."].join(" ")},invisible:function(t,v){return(v?q(t)+"item "+v:"Trace "+t[1])+" got defaulted to be not visible"},value:function(t,v,w){return[q(t)+"key "+
v,"is set to an invalid value ("+w+")"].join(" ")}},k=a.counterRegex("([a-z]+)")},{"../lib":778,"../plots/plots":891,"./plot_config":815,"./plot_schema":816}],822:[function(b,N,I){N.exports={mode:{valType:"enumerated",dflt:"afterall",values:["immediate","next","afterall"]},direction:{valType:"enumerated",values:["forward","reverse"],dflt:"forward"},fromcurrent:{valType:"boolean",dflt:!1},frame:{duration:{valType:"number",min:0,dflt:500},redraw:{valType:"boolean",dflt:!0}},transition:{duration:{valType:"number",
min:0,dflt:500,editType:"none"},easing:{valType:"enumerated",dflt:"cubic-in-out",values:"linear quad cubic sin exp circle elastic back bounce linear-in quad-in cubic-in sin-in exp-in circle-in elastic-in back-in bounce-in linear-out quad-out cubic-out sin-out exp-out circle-out elastic-out back-out bounce-out linear-in-out quad-in-out cubic-in-out sin-in-out exp-in-out circle-in-out elastic-in-out back-in-out bounce-in-out".split(" "),editType:"none"},ordering:{valType:"enumerated",values:["layout first",
"traces first"],dflt:"layout first",editType:"none"}}}},{}],823:[function(b,N,I){var r=b("../lib"),q=b("../plot_api/plot_template");N.exports=function(m,l,a){var h=a.name,g=a.inclusionAttr||"visible",n=l[h],p=r.isArrayOrTypedArray(m[h])?m[h]:[];m=l[h]=[];var d=q.arrayTemplater(l,h,g);for(h=0;h<p.length;h++){var e=p[h];if(r.isPlainObject(e))var f=d.newItem(e);else f=d.newItem({}),f[g]=!1;f._index=h;!1!==f[g]&&a.handleItemDefaults(e,f,l,a);m.push(f)}g=d.defaultItems();for(h=0;h<g.length;h++)f=g[h],
f._index=m.length,a.handleItemDefaults({},f,l,a,{}),m.push(f);if(r.isArrayOrTypedArray(n))for(l=Math.min(n.length,m.length),h=0;h<l;h++)r.relinkPrivateKeys(m[h],n[h]);return m}},{"../lib":778,"../plot_api/plot_template":817}],824:[function(b,N,I){b=b("../components/fx/attributes");N.exports={type:{valType:"enumerated",values:[],dflt:"scatter",editType:"calc+clearAxisTypes",_noTemplating:!0},visible:{valType:"enumerated",values:[!0,!1,"legendonly"],dflt:!0,editType:"calc"},showlegend:{valType:"boolean",
dflt:!0,editType:"style"},legendgroup:{valType:"string",dflt:"",editType:"style"},opacity:{valType:"number",min:0,max:1,dflt:1,editType:"style"},name:{valType:"string",editType:"style"},uid:{valType:"string",editType:"plot",anim:!0},ids:{valType:"data_array",editType:"calc",anim:!0},customdata:{valType:"data_array",editType:"calc"},meta:{valType:"any",arrayOk:!0,editType:"plot"},selectedpoints:{valType:"any",editType:"calc"},hoverinfo:{valType:"flaglist",flags:["x","y","z","text","name"],extras:["all",
"none","skip"],arrayOk:!0,dflt:"all",editType:"none"},hoverlabel:b.hoverlabel,stream:{token:{valType:"string",noBlank:!0,strict:!0,editType:"calc"},maxpoints:{valType:"number",min:0,max:1E4,dflt:500,editType:"calc"},editType:"calc"},transforms:{_isLinkedToArray:"transform",editType:"calc"},uirevision:{valType:"any",editType:"none"}}},{"../components/fx/attributes":674}],825:[function(b,N,I){var r=b("fast-isnumeric");I=b("../../lib");var q=I.dateTime2ms,m=I.incrementMonth,l=b("../../constants/numerical").ONEAVGMONTH;
N.exports=function(a,h,g,n){if("date"!==h.type)return n;var p=a[g+"periodalignment"];if(!p)return n;var d=a[g+"period"];if(r(d)){if(d=+d,0>=d)return n}else if("string"===typeof d&&"M"===d.charAt(0)){var e=+d.substring(1);if(!(0<e&&Math.round(e)===e))return n}h=h.calendar;var f="start"===p;p="end"===p;a=q(a[g+"period0"],h)||0;g=[];for(var k=n.length,t=0;t<k;t++){var v=n[t];if(e){var w=Math.round((v-a)/(e*l));for(w=m(a,e*w,h);w>v;)w=m(w,-e,h);for(;w<=v;)w=m(w,e,h);v=m(w,-e,h)}else{w=Math.round((v-a)/
d);for(w=a+w*d;w>v;)w-=d;for(;w<=v;)w+=d;v=w-d}g[t]=f?v:p?w:(v+w)/2}return g}},{"../../constants/numerical":753,"../../lib":778,"fast-isnumeric":241}],826:[function(b,N,I){N.exports={xaxis:{valType:"subplotid",dflt:"x",editType:"calc+clearAxisTypes"},yaxis:{valType:"subplotid",dflt:"y",editType:"calc+clearAxisTypes"}}},{}],827:[function(b,N,I){function r(A,z){function E(ja,la){return Math.max(ja,J(la))}var C,u,D=[],G=A._fullLayout;D=m(G,z,0);var J=m(G,z,1);A=a(A,z);var L=A.min,K=A.max;if(0===L.length||
0===K.length)return k.simpleMap(z.range,z.r2l);A=L[0].val;var H=K[0].val;for(C=1;C<L.length&&A===H;C++)A=Math.min(A,L[C].val);for(C=1;C<K.length&&A===H;C++)H=Math.max(H,K[C].val);G=!1;z.range&&(G=k.simpleMap(z.range,z.r2l),G=G[1]<G[0]);"reversed"===z.autorange&&(G=!0,z.autorange=!0);var Q=z.rangemode,M="tozero"===Q,P="nonnegative"===Q;Q=z._length;var T=Q/10,O=0;for(C=0;C<L.length;C++){var U=L[C];for(u=0;u<K.length;u++){var S=K[u];var X=S.val-U.val-q(z,U.val,S.val);if(0<X){var ba=Q-D(U)-J(S);if(ba>
T){if(X/ba>O){var ca=U;var ia=S;O=X/ba}}else X/Q>O&&(ca={val:U.val,nopad:1},ia={val:S.val,nopad:1},O=X/Q)}}}A===H?(U=A-1,S=A+1,M?0===A?D=[0,1]:(U=(0<A?K:L).reduce(E,0),U=A/(1-Math.min(.5,U/Q)),D=0<A?[0,U]:[U,0]):D=P?[Math.max(0,U),Math.max(1,S)]:[U,S]):(M?(0<=ca.val&&(ca={val:0,nopad:1}),0>=ia.val&&(ia={val:0,nopad:1})):P&&(0>ca.val-O*D(ca)&&(ca={val:0,nopad:1}),0>=ia.val&&(ia={val:1,nopad:1})),O=(ia.val-ca.val-q(z,U.val,S.val))/(Q-D(ca)-J(ia)),D=[ca.val-O*D(ca),ia.val+O*J(ia)]);G&&D.reverse();return k.simpleMap(D,
z.l2r||Number)}function q(A,z,E){var C=0;if(A.rangebreaks)for(A=A.locateBreaks(z,E),z=0;z<A.length;z++)E=A[z],C+=E.max-E.min;return C}function m(A,z,E){var C=.05*z._length,u=z._anchorAxis||{};if(-1!==(z.ticklabelposition||"").indexOf("inside")||-1!==(u.ticklabelposition||"").indexOf("inside"))u="reversed"===z.autorange,u||(u=k.simpleMap(z.range,z.r2l),u=u[1]<u[0]),u&&(E=!E);var D=0;y(A,z._id)||(D=l(z,E));C=Math.max(D,C);"domain"===z.constrain&&z._inputDomain&&(C*=(z._inputDomain[1]-z._inputDomain[0])/
(z.domain[1]-z.domain[0]));return function(G){return G.nopad?0:G.pad+(G.extrapad?C:D)}}function l(A,z){var E=0,C=A._anchorAxis||{};if(-1!==(C.ticklabelposition||"").indexOf("inside")&&(!z&&("left"===C.side||"bottom"===C.side)||z&&("top"===C.side||"right"===C.side))){var u="x"===A._id.charAt(0);if(C._vals){A=k.deg2rad(C._tickAngles[C._id+"tick"]||0);var D=Math.abs(Math.cos(A)),G=Math.abs(Math.sin(A));C._vals.forEach(function(J){if(J.bb){var L=2*B+J.bb.width;J=2*B+J.bb.height;E=Math.max(E,u?Math.max(L*
D,J*G):Math.max(J*D,L*G))}})}"inside"===C.ticks&&"inside"===C.ticklabelposition&&(E+=C.ticklen||0)}return E}function a(A,z,E){function C(M,P){for(L=0;L<P.length;L++){var T=M[P[L]],O=(T._extremes||{})[u];if(!0===T.visible&&O){for(K=0;K<O.min.length;K++)Q=O.min[K],h(G,Q.val,Q.pad,{extrapad:Q.extrapad});for(K=0;K<O.max.length;K++)Q=O.max[K],g(J,Q.val,Q.pad,{extrapad:Q.extrapad})}}}var u=z._id,D=A._fullLayout,G=[],J=[],L,K;C(A._fullData,z._traceIndices);C(D.annotations||[],z._annIndices||[]);C(D.shapes||
[],z._shapeIndices||[]);if(z._matchGroup&&!E)for(var H in z._matchGroup)if(H!==z._id){D=w(A,H);E=a(A,D,!0);D=z._length/D._length;for(K=0;K<E.min.length;K++){var Q=E.min[K];h(G,Q.val,Q.pad*D,{extrapad:Q.extrapad})}for(K=0;K<E.max.length;K++)Q=E.max[K],g(J,Q.val,Q.pad*D,{extrapad:Q.extrapad})}return{min:G,max:J}}function h(A,z,E,C){n(A,z,E,C,d)}function g(A,z,E,C){n(A,z,E,C,e)}function n(A,z,E,C,u){var D=C.tozero;C=C.extrapad;for(var G=!0,J=0;J<A.length&&G;J++){var L=A[J];if(u(L.val,z)&&L.pad>=E&&(L.extrapad||
!C)){G=!1;break}else u(z,L.val)&&L.pad<=E&&(C||!L.extrapad)&&(A.splice(J,1),J--)}G&&(u=D&&0===z,A.push({val:z,pad:u?0:E,extrapad:u?!1:C}))}function p(A){return f(A)&&Math.abs(A)<t}function d(A,z){return A<=z}function e(A,z){return A>=z}var f=b("fast-isnumeric"),k=b("../../lib"),t=b("../../constants/numerical").FP_SAFE,v=b("../../registry");b=b("./axis_ids");var w=b.getFromId,y=b.isLinked;N.exports={getAutoRange:r,makePadFn:m,doAutoRange:function(A,z,E){z.setScale();if(z.autorange){z.range=E?E.slice():
r(A,z);z._r=z.range.slice();z._rl=k.simpleMap(z._r,z.r2l);E=z._input;var C={};C[z._attr+".range"]=z.range;C[z._attr+".autorange"]=z.autorange;v.call("_storeDirectGUIEdit",A.layout,A._fullLayout._preGUI,C);E.range=z.range.slice();E.autorange=z.autorange}(E=z._anchorAxis)&&E.rangeslider&&((C=E.rangeslider[z._name])&&"auto"===C.rangemode&&(C.range=r(A,z)),E._input.rangeslider[z._name]=k.extendFlat({},C))},findExtremes:function(A,z,E){function C(ma){if(Array.isArray(ma))return Q=!0,function(pa){return Math.max(Number(ma[pa]||
0),0)};var qa=Math.max(Number(ma||0),0);return function(){return qa}}function u(ma){T=z[ma];f(T)&&(S=ba(ma),X=ca(ma),M?(O=A.c2l(T)-ja(ma),U=A.c2l(T)+ia(ma)):(la=T-ja(ma),da=T+ia(ma),H&&la<da/10&&(la=da/10),O=A.c2l(la),U=A.c2l(da)),K&&(O=Math.min(0,O),U=Math.max(0,U)),p(O)&&h(D,O,X,sa),p(U)&&g(G,U,S,sa))}E||(E={});A._m||A.setScale();var D=[],G=[],J=z.length,L=E.padded||!1,K=E.tozero&&("linear"===A.type||"-"===A.type),H="log"===A.type,Q=!1,M=E.vpadLinearized||!1,P,T,O,U,S,X,ba=C((0<A._m?E.ppadplus:
E.ppadminus)||E.ppad||0),ca=C((0<A._m?E.ppadminus:E.ppadplus)||E.ppad||0),ia=C(E.vpadplus||E.vpad),ja=C(E.vpadminus||E.vpad);if(!Q){var la=Infinity;var da=-Infinity;if(H)for(P=0;P<J;P++){var oa=z[P];oa<la&&0<oa&&(la=oa);oa>da&&oa<t&&(da=oa)}else for(P=0;P<J;P++)oa=z[P],oa<la&&oa>-t&&(la=oa),oa>da&&oa<t&&(da=oa);z=[la,da];J=2}var sa={tozero:K,extrapad:L};L=Math.min(6,J);for(P=0;P<L;P++)u(P);for(P=J-1;P>=L;P--)u(P);return{min:D,max:G,opts:E}},concatExtremes:a};var B=3},{"../../constants/numerical":753,
"../../lib":778,"../../registry":911,"./axis_ids":831,"fast-isnumeric":241}],828:[function(b,N,I){function r(Ba){var Fa=1E-4*(Ba[1]-Ba[0]);return[Ba[0]-Fa,Ba[1]+Fa]}function q(Ba){return+Ba}function m(Ba){return String(Ba)}function l(Ba,Fa,La,Va,Za){function mb(Bc){return 2>(1+100*(Bc-Ba)/La.dtick)%100}for(var ub=0,Pb=0,Kb=0,Ob=0,Wb=0;Wb<Fa.length;Wb++)0===Fa[Wb]%1?Kb++:M(Fa[Wb])||Ob++,mb(Fa[Wb])&&ub++,mb(Fa[Wb]+La.dtick/2)&&Pb++;Fa=Fa.length-Ob;Kb===Fa&&"date"!==La.type?1>La.dtick?Ba=Va-.5*La.dtick:
(Ba-=.5,Ba+La.dtick<Va&&(Ba+=La.dtick)):Pb<.1*Fa&&(ub>.3*Fa||mb(Va)||mb(Za))&&(Za=La.dtick/2,Ba+=Ba+Za<Va?Za:-Za);return Ba}function a(Ba){var Fa=Ba.tickvals,La=Ba.ticktext,Va=Array(Fa.length),Za=O.simpleMap(Ba.range,Ba.r2l),mb=r(Za);Za=Math.min(mb[0],mb[1]);mb=Math.max(mb[0],mb[1]);var ub=0;Array.isArray(La)||(La=[]);var Pb="category"===Ba.type?Ba.d2l_noadd:Ba.d2l;"log"===Ba.type&&"L"!==String(Ba.dtick).charAt(0)&&(Ba.dtick="L"+Math.pow(10,Math.floor(Math.min(Ba.range[0],Ba.range[1]))-1));for(var Kb=
0;Kb<Fa.length;Kb++){var Ob=Pb(Fa[Kb]);Ob>Za&&Ob<mb&&(Va[ub]=void 0===La[Kb]?xa.tickText(Ba,Ob):n(Ba,Ob,String(La[Kb])),ub++)}ub<Fa.length&&Va.splice(ub,Fa.length-ub);Ba.rangebreaks&&(Va=Va.filter(function(Wb){return Ba.maskBreaks(Wb.x)!==nb}));return Va}function h(Ba,Fa,La){return Fa*O.roundUp(Ba/Fa,La)}function g(Ba){var Fa=Ba.dtick;Ba._tickexponent=0;M(Fa)||"string"===typeof Fa||(Fa=1);if("category"===Ba.type||"multicategory"===Ba.type)Ba._tickround=null;if("date"===Ba.type){var La=Ba.r2l(Ba.tick0),
Va=Ba.l2r(La).replace(/(^-|i)/g,""),Za=Va.length;"M"===String(Fa).charAt(0)?10<Za||"01-01"!==Va.substr(5)?Ba._tickround="d":Ba._tickround=0===+Fa.substr(1)%12?"y":"m":Fa>=va&&10>=Za||Fa>=15*va?Ba._tickround="d":Fa>=Ua&&16>=Za||Fa>=Ma?Ba._tickround="M":Fa>=eb&&19>=Za||Fa>=Ua?Ba._tickround="S":(Fa=Ba.l2r(La+Fa).replace(/^-/,"").length,Ba._tickround=Math.max(Za,Fa)-20,0>Ba._tickround&&(Ba._tickround=4))}else M(Fa)||"L"===Fa.charAt(0)?(Za=Ba.range.map(Ba.r2d||Number),M(Fa)||(Fa=Number(Fa.substr(1))),
Ba._tickround=2-Math.floor(Math.log(Fa)/Math.LN10+.01),Fa=Math.floor(Math.log(Math.max(Math.abs(Za[0]),Math.abs(Za[1])))/Math.LN10+.01),Math.abs(Fa)>(void 0===Ba.minexponent?3:Ba.minexponent)&&(!w(Ba.exponentformat)||14<Fa||-15>Fa?Ba._tickexponent=Fa:Ba._tickexponent=3*Math.round((Fa-1)/3))):Ba._tickround=null}function n(Ba,Fa,La){Ba=Ba.tickfont||{};return{x:Fa,dx:0,dy:0,text:La||"",fontSize:Ba.size,font:Ba.family,fontColor:Ba.color}}function p(Ba,Fa,La,Va){var Za=Ba._tickround,mb=La&&Ba.hoverformat||
xa.getTickFormat(Ba);Va&&(Za=M(Za)?4:{y:"m",m:"d",d:"M",M:"S",S:4}[Za]);mb=O.formatDate(Fa.x,mb,Za,Ba._dateFormat,Ba.calendar,Ba._extraFormat);var ub=mb.indexOf("\n");if(-1!==ub){var Pb=mb.substr(ub+1);mb=mb.substr(0,ub)}Va&&("00:00:00"===mb||"00:00"===mb?(mb=Pb,Pb=""):8===mb.length&&(mb=mb.replace(/:00$/,"")));if(Pb)if(La)mb="d"===Za?mb+(", "+Pb):Pb+(mb?", "+mb:"");else if(Ba._inCalcTicks&&Ba._prevDateHead===Pb){if(La=-1!==(Ba.ticklabelposition||"").indexOf("inside"),Ba=Ba._realSide||Ba.side,!La&&
"top"===Ba||La&&"bottom"===Ba)mb+="\x3cbr\x3e "}else Ba._prevDateHead=Pb,mb+="\x3cbr\x3e"+Pb;Fa.text=mb}function d(Ba,Fa,La,Va,Za){var mb=Ba.dtick;La=Fa.x;var ub=Ba.tickformat,Pb="string"===typeof mb&&mb.charAt(0);"never"===Za&&(Za="");Va&&"L"!==Pb&&(mb="L3",Pb="L");if(ub||"L"===Pb)Fa.text=y(Math.pow(10,La),Ba,Za,Va);else if(M(mb)||"D"===Pb&&.1>O.mod(La+.01,1))Va=Math.round(La),Za=Math.abs(Va),ub=Ba.exponentformat,"power"===ub||w(ub)&&(14<Va||-15>Va)?(Fa.text=0===Va?1:1===Va?"10":"10\x3csup\x3e"+
(1<Va?"":fb)+Za+"\x3c/sup\x3e",Fa.fontSize*=1.25):("e"===ub||"E"===ub)&&2<Za?Fa.text="1"+ub+(0<Va?"+":fb)+Za:(Fa.text=y(Math.pow(10,La),Ba,"","fakehover"),"D1"===mb&&"y"===Ba._id.charAt(0)&&(Fa.dy-=Fa.fontSize/6));else if("D"===Pb)Fa.text=String(Math.round(Math.pow(10,O.mod(La,1)))),Fa.fontSize*=.75;else throw"unrecognized dtick "+String(mb);"D1"===Ba.dtick&&(mb=String(Fa.text).charAt(0),"0"===mb||"1"===mb)&&("y"===Ba._id.charAt(0)?Fa.dx-=Fa.fontSize/4:(Fa.dy+=Fa.fontSize/2,Fa.dx+=(Ba.range[1]>Ba.range[0]?
1:-1)*Fa.fontSize*(0>La?.5:.25)))}function e(Ba,Fa){Ba=Ba._categories[Math.round(Fa.x)];void 0===Ba&&(Ba="");Fa.text=String(Ba)}function f(Ba,Fa,La){var Va=Ba._categories[Math.round(Fa.x)]||[];Ba=void 0===Va[1]?"":String(Va[1]);Va=void 0===Va[0]?"":String(Va[0]);La?Fa.text=Va+" - "+Ba:(Fa.text=Ba,Fa.text2=Va)}function k(Ba,Fa,La,Va,Za){"never"===Za?Za="":"all"===Ba.showexponent&&1E-6>Math.abs(Fa.x/Ba.dtick)&&(Za="hide");Fa.text=y(Fa.x,Ba,Za,Va)}function t(Ba,Fa,La,Va,Za){"radians"!==Ba.thetaunit||
La?Fa.text=y(Fa.x,Ba,Za,Va):(La=Fa.x/180,0===La?Fa.text="0":(La=v(La),100<=La[1]?Fa.text=y(O.deg2rad(Fa.x),Ba,Za,Va):(Ba=0>Fa.x,Fa.text=1===La[1]?1===La[0]?"":La[0]+"":["\x3csup\x3e",La[0],"\x3c/sup\x3e\x3csub\x3e",La[1],"\x3c/sub\x3e"].join(""),Ba&&(Fa.text=fb+Fa.text))))}function v(Ba){function Fa(Za,mb){return 1E-6>=Math.abs(mb-0)?Za:Fa(mb,Za%mb)}var La=function(Za){for(var mb=1;!(1E-6>=Math.abs(Math.round(Za*mb)/mb-Za));)mb*=10;return mb}(Ba);Ba*=La;var Va=Math.abs(Fa(Ba,La));return[Math.round(Ba/
Va),Math.round(La/Va)]}function w(Ba){return"SI"===Ba||"B"===Ba}function y(Ba,Fa,La,Va){var Za=0>Ba,mb=Fa._tickround;La=La||Fa.exponentformat||"B";var ub=Fa._tickexponent,Pb=xa.getTickFormat(Fa),Kb=Fa.separatethousands;Va&&(ub={exponentformat:La,minexponent:Fa.minexponent,dtick:"none"===Fa.showexponent?Fa.dtick:M(Ba)?Math.abs(Ba)||1:1,range:"none"===Fa.showexponent?Fa.range.map(Fa.r2d):[0,Ba||1]},g(ub),mb=(Number(ub._tickround)||0)+4,ub=ub._tickexponent,Fa.hoverformat&&(Pb=Fa.hoverformat));if(Pb)return Fa._numFormat(Pb)(Ba).replace(/-/g,
fb);Va=Math.pow(10,-mb)/2;"none"===La&&(ub=0);Ba=Math.abs(Ba);if(Ba<Va)Ba="0",Za=!1;else{Ba+=Va;ub&&(Ba*=Math.pow(10,-ub),mb+=ub);if(0===mb)Ba=String(Math.floor(Ba));else if(0>mb)for(Ba=String(Math.round(Ba)),Ba=Ba.substr(0,Ba.length+mb);0>mb;mb++)Ba+="0";else Ba=String(Ba),(Va=Ba.indexOf(".")+1)&&(Ba=Ba.substr(0,Va+mb).replace(/\.?0+$/,""));Ba=O.numSeparate(Ba,Fa._separators,Kb)}ub&&"hide"!==La&&(w(La)&&(14<ub||-15>ub)&&(La="power"),Fa=0>ub?fb+-ub:"power"!==La?"+"+ub:String(ub),"e"===La||"E"===La?
Ba+=La+Fa:"power"===La?Ba+="10\x3csup\x3e"+Fa+"\x3c/sup\x3e":"B"===La&&9===ub?Ba+="B":w(La)&&(Ba+=sb[ub/3+5]));return Za?fb+Ba:Ba}function B(Ba,Fa){var La=[],Va=function(Za,mb){mb=Za.xbnd[mb];null!==mb&&La.push(O.extendFlat({},Za,{x:mb}))};if(Fa.length){for(Ba=0;Ba<Fa.length;Ba++)Va(Fa[Ba],0);Va(Fa[Ba-1],1)}return La}function A(Ba,Fa){var La=[],Va=Fa.length&&Fa[Fa.length-1].x<Fa[0].x,Za=function(Pb,Kb){Kb=Pb.xbnd[Kb];null!==Kb&&La.push(O.extendFlat({},Pb,{x:Kb}))};if(Ba.showdividers&&Fa.length){for(Ba=
0;Ba<Fa.length;Ba++){var mb=Fa[Ba];mb.text2!==ub&&Za(mb,Va?1:0);var ub=mb.text2}Za(Fa[Ba-1],Va?0:1)}return La}function z(Ba,Fa){if(Ba._selections[Fa].size()){var La=Infinity;var Va=-Infinity;var Za=Infinity;var mb=-Infinity;Ba._selections[Fa].each(function(){var ub=J(this);ub=ca.bBox(ub.node().parentNode);La=Math.min(La,ub.top);Va=Math.max(Va,ub.bottom);Za=Math.min(Za,ub.left);mb=Math.max(mb,ub.right)})}else mb=Za=Va=La=0;return{top:La,bottom:Va,left:Za,right:mb,height:Va-La,width:mb-Za}}function E(Ba){var Fa=
Ba.ticklabelposition||"",La=-1!==Fa.indexOf("top"),Va=-1!==Fa.indexOf("left"),Za=-1!==Fa.indexOf("right"),mb=-1!==Fa.indexOf("bottom");Fa=-1!==Fa.indexOf("inside");var ub=mb||Va||La||Za;if(!ub&&!Fa)return[0,0];var Pb=Ba.side,Kb=ub?(Ba.tickwidth||0)/2:0,Ob=3,Wb=Ba.tickfont?Ba.tickfont.size:12;if(mb||La)Kb+=Wb*$a,Ob+=(Ba.linewidth||0)/2;if(Va||Za)Kb+=(Ba.linewidth||0)/2,Ob+=3;Fa&&"top"===Pb&&(Ob-=Wb*(1-$a));if(Va||La)Kb=-Kb;if("bottom"===Pb||"right"===Pb)Ob=-Ob;return[ub?Kb:0,Fa?Ob:0]}function C(Ba){return[Ba.text,
Ba.x,Ba.axInfo,Ba.font,Ba.fontSize,Ba.fontColor].join("_")}function u(Ba){var Fa=Ba.title.font.size,La=(Ba.title.text.match(S.BR_TAG_ALL)||[]).length;return Ba.title.hasOwnProperty("standoff")?La?Fa*($a+La*jb):Fa*$a:La?Fa*(La+1)*jb:Fa}function D(Ba,Fa){Fa=Ba.l2p(Fa);return 1<Fa&&Fa<Ba._length-1}function G(Ba,Fa,La,Va){function Za(Wb){function Bc(bd){return"number"===typeof bd&&Math.abs(bd-Ob)<Kc}if(!Wb.showline||!Wb.linewidth)return!1;var Kc=Math.max((Wb.linewidth+Fa.zerolinewidth)/2,1);if(Bc(Wb._mainLinePosition)||
Bc(Wb._mainMirrorPosition))return!0;Wb=Wb._linepositions||{};for(var Nc in Wb)if(Bc(Wb[Nc][0])||Bc(Wb[Nc][1]))return!0}var mb=La._mainAxis;if(mb){var ub=Ba._fullLayout,Pb=Fa._id.charAt(0),Kb=xa.counterLetter(Fa._id),Ob=Fa._offset+(Math.abs(Va[0])<Math.abs(Va[1])===("x"===Pb)?0:Fa._length);Va=ub._plots[La._mainSubplot];if(!(Va.mainplotinfo||Va).overlays.length)return Za(La,Ob);Ba=xa.list(Ba,Kb);for(La=0;La<Ba.length;La++)if(Kb=Ba[La],Kb._mainAxis===mb&&Za(Kb,Ob))return!0}}function J(Ba){Ba=Q.select(Ba);
var Fa=Ba.select(".text-math-group");return Fa.empty()?Ba.select("text"):Fa}function L(Ba){return Ba._id+".automargin"}function K(Ba,Fa){for(var La=0;La<Fa.length;La++)-1===Ba.indexOf(Fa[La])&&Ba.push(Fa[La])}function H(Ba,Fa){for(var La=Fa._rangebreaks.length,Va=0;Va<La;Va++){var Za=Fa._rangebreaks[Va];if(Ba>=Za.min&&Ba<Za.max)return Za.max}return Ba}var Q=b("d3"),M=b("fast-isnumeric"),P=b("../../plots/plots"),T=b("../../registry"),O=b("../../lib"),U=O.strTranslate,S=b("../../lib/svg_text_utils"),
X=b("../../components/titles"),ba=b("../../components/color"),ca=b("../../components/drawing"),ia=b("./layout_attributes"),ja=b("./clean_ticks");I=b("../../constants/numerical");var la=I.ONEMAXYEAR,da=I.ONEAVGYEAR,oa=I.ONEMINYEAR,sa=I.ONEMAXQUARTER,ma=I.ONEAVGQUARTER,qa=I.ONEMINQUARTER,pa=I.ONEMAXMONTH,na=I.ONEAVGMONTH,ka=I.ONEMINMONTH,ua=I.ONEWEEK,va=I.ONEDAY,Ca=va/2,Ma=I.ONEHOUR,Ua=I.ONEMIN,eb=I.ONESEC,fb=I.MINUS_SIGN,nb=I.BADNUM;I=b("../../constants/alignment");var cb=I.MID_SHIFT,$a=I.CAP_SHIFT,
jb=I.LINE_SPACING,pb=I.OPPOSITE_SIDE,xa=N.exports={};xa.setConvert=b("./set_convert");var Ea=b("./axis_autotype");N=b("./axis_ids");var Ia=N.idSort,Oa=N.isLinked;xa.id2name=N.id2name;xa.name2id=N.name2id;xa.cleanId=N.cleanId;xa.list=N.list;xa.listIds=N.listIds;xa.getFromId=N.getFromId;xa.getFromTrace=N.getFromTrace;b=b("./autorange");xa.getAutoRange=b.getAutoRange;xa.findExtremes=b.findExtremes;xa.coerceRef=function(Ba,Fa,La,Va,Za,mb){var ub=Va.charAt(Va.length-1);La=La._fullLayout._subplots[ub+"axis"];
Va+="ref";ub={};Za||(Za=La[0]||("string"===typeof mb?mb:mb[0]));mb||(mb=Za);La=La.concat(La.map(function(Pb){return Pb+" domain"}));ub[Va]={valType:"enumerated",values:La.concat(mb?"string"===typeof mb?[mb]:mb:[]),dflt:Za};return O.coerce(Ba,Fa,ub,Va)};xa.getRefType=function(Ba){return void 0===Ba?Ba:"paper"===Ba?"paper":"pixel"===Ba?"pixel":/( domain)$/.test(Ba)?"domain":"range"};xa.coercePosition=function(Ba,Fa,La,Va,Za,mb){"range"!==xa.getRefType(Va)?(Fa=O.ensureNumber,La=La(Za,mb)):(Fa=xa.getFromId(Fa,
Va),mb=Fa.fraction2r(mb),La=La(Za,mb),Fa=Fa.cleanPos);Ba[Za]=Fa(La)};xa.cleanPosition=function(Ba,Fa,La){return("paper"===La||"pixel"===La?O.ensureNumber:xa.getFromId(Fa,La).cleanPos)(Ba)};xa.redrawComponents=function(Ba,Fa){function La(Za,mb,ub,Pb){Za=T.getComponentMethod(Za,mb);mb={};for(var Kb=0;Kb<Fa.length;Kb++)for(var Ob=Va[xa.id2name(Fa[Kb])][ub],Wb=0;Wb<Ob.length;Wb++){var Bc=Ob[Wb];if(!mb[Bc]&&(Za(Ba,Bc),mb[Bc]=1,Pb))return}}Fa=Fa?Fa:xa.listIds(Ba);var Va=Ba._fullLayout;La("annotations",
"drawOne","_annIndices");La("shapes","drawOne","_shapeIndices");La("images","draw","_imgIndices",!0)};var bb=xa.getDataConversions=function(Ba,Fa,La,Va){La="x"===La||"y"===La||"z"===La?La:Va;if(Array.isArray(La)){if(Ba={type:Ea(Va,void 0,{autotypenumbers:Ba._fullLayout.autotypenumbers}),_categories:[]},xa.setConvert(Ba),"category"===Ba.type)for(Fa=0;Fa<Va.length;Fa++)Ba.d2c(Va[Fa])}else Ba=xa.getFromTrace(Ba,Fa,La);return Ba?{d2c:Ba.d2c,c2d:Ba.c2d}:"ids"===La?{d2c:m,c2d:m}:{d2c:q,c2d:q}};xa.getDataToCoordFunc=
function(Ba,Fa,La,Va){return bb(Ba,Fa,La,Va).d2c};xa.counterLetter=function(Ba){Ba=Ba.charAt(0);if("x"===Ba)return"y";if("y"===Ba)return"x"};xa.minDtick=function(Ba,Fa,La,Va){if(-1!==["log","category","multicategory"].indexOf(Ba.type)||!Va)Ba._minDtick=0;else if(void 0===Ba._minDtick)Ba._minDtick=Fa,Ba._forceTick0=La;else if(Ba._minDtick)if(2E-6>(Ba._minDtick/Fa+1E-6)%1&&2E-6>((La-Ba._forceTick0)/Fa%1+1.000001)%1)Ba._minDtick=Fa,Ba._forceTick0=La;else if(2E-6<(Fa/Ba._minDtick+1E-6)%1||2E-6<((La-Ba._forceTick0)/
Ba._minDtick%1+1.000001)%1)Ba._minDtick=0};xa.saveRangeInitial=function(Ba,Fa){Ba=xa.list(Ba,"",!0);for(var La=!1,Va=0;Va<Ba.length;Va++){var Za=Ba[Va],mb=void 0===Za._rangeInitial,ub=mb||!(Za.range[0]===Za._rangeInitial[0]&&Za.range[1]===Za._rangeInitial[1]);if(mb&&!1===Za.autorange||Fa&&ub)Za._rangeInitial=Za.range.slice(),La=!0}return La};xa.saveShowSpikeInitial=function(Ba,Fa){for(var La=xa.list(Ba,"",!0),Va=!1,Za="on",mb=0;mb<La.length;mb++){var ub=La[mb],Pb=void 0===ub._showSpikeInitial,Kb=
Pb||ub.showspikes!==ub._showspikes;if(Pb||Fa&&Kb)ub._showSpikeInitial=ub.showspikes,Va=!0;"on"!==Za||ub.showspikes||(Za="off")}Ba._fullLayout._cartesianSpikesEnabled=Za;return Va};xa.autoBin=function(Ba,Fa,La,Va,Za,mb){var ub=O.aggNums(Math.min,null,Ba),Pb=O.aggNums(Math.max,null,Ba);if("category"===Fa.type||"multicategory"===Fa.type)return{start:ub-.5,end:Pb+.5,size:Math.max(1,Math.round(mb)||1),_dataSpan:Pb-ub};Za||(Za=Fa.calendar);var Kb="log"===Fa.type?{type:"linear",range:[ub,Pb]}:{type:Fa.type,
range:O.simpleMap([ub,Pb],Fa.c2r,0,Za),calendar:Za};xa.setConvert(Kb);(mb=mb&&ja.dtick(mb,Kb.type))?(Kb.dtick=mb,Kb.tick0=ja.tick0(void 0,Kb.type,Za)):(La?Va=(Pb-ub)/La:(La=O.distinctVals(Ba),mb=Math.pow(10,Math.floor(Math.log(La.minDiff)/Math.LN10)),La=mb*O.roundUp(La.minDiff/mb,[.9,1.9,4.9,9.9],!0),Va=Math.max(La,2*O.stdev(Ba)/Math.pow(Ba.length,Va?.25:.4)),M(Va)||(Va=1)),xa.autoTicks(Kb,Va));Va=Kb.dtick;La=xa.tickIncrement(xa.tickFirst(Kb),Va,"reverse",Za);if("number"===typeof Va)La=l(La,Ba,Kb,
ub,Pb),Kb=1+Math.floor((Pb-La)/Va),Ba=La+Kb*Va;else{if("M"===Kb.dtick.charAt(0))a:{Kb=La;Ba=O.findExactDates(Ba,Za);if(.8<Ba.exactDays&&(La=Number(Va.substr(1)),Kb=.8<Ba.exactYears&&0===La%12?xa.tickIncrement(Kb,"M6","reverse")+1.5*va:.8<Ba.exactMonths?xa.tickIncrement(Kb,"M1","reverse")+15.5*va:Kb-Ca,Ba=xa.tickIncrement(Kb,Va),Ba<=ub)){La=Ba;break a}La=Kb}Ba=La;for(Kb=0;Ba<=Pb;)Ba=xa.tickIncrement(Ba,Va,!1,Za),Kb++}return{start:Fa.c2r(La,0,Za),end:Fa.c2r(Ba,0,Za),size:Va,_dataSpan:Pb-ub}};xa.prepTicks=
function(Ba,Fa){Fa=O.simpleMap(Ba.range,Ba.r2l,void 0,void 0,Fa);Ba._dtickInit=Ba.dtick;Ba._tick0Init=Ba.tick0;if("auto"===Ba.tickmode||!Ba.dtick){var La=Ba.nticks;La||("category"===Ba.type||"multicategory"===Ba.type?(La=Ba.tickfont?1.2*(Ba.tickfont.size||12):15,La=Ba._length/La):(La="y"===Ba._id.charAt(0)?40:80,La=O.constrain(Ba._length/La,4,9)+1),"radialaxis"===Ba._name&&(La*=2));"array"===Ba.tickmode&&(La*=100);Ba._roughDTick=Math.abs(Fa[1]-Fa[0])/La;xa.autoTicks(Ba,Ba._roughDTick);0<Ba._minDtick&&
Ba.dtick<2*Ba._minDtick&&(Ba.dtick=Ba._minDtick,Ba.tick0=Ba.l2r(Ba._forceTick0))}if("period"===Ba.ticklabelmode){Fa=!(M(Ba.dtick)||"M"!==Ba.dtick.charAt(0));if(La=xa.getTickFormat(Ba)){var Va=Ba._dtickInit!==Ba.dtick;if(!/%[fLQsSMX]/.test(La))if(/%[HI]/.test(La)){var Za=Ma;Va&&!Fa&&Ba.dtick<Ma&&(Ba.dtick=Ma)}else/%p/.test(La)?(Za=Ca,Va&&!Fa&&Ba.dtick<Ca&&(Ba.dtick=Ca)):/%[Aadejuwx]/.test(La)?(Za=va,Va&&!Fa&&Ba.dtick<va&&(Ba.dtick=va)):/%[UVW]/.test(La)?(Za=ua,Va&&!Fa&&Ba.dtick<ua&&(Ba.dtick=ua)):
/%[Bbm]/.test(La)?(Za=na,Va&&(Fa?1>+Ba.dtick.substring(1):Ba.dtick<ka)&&(Ba.dtick="M1")):/%[q]/.test(La)?(Za=ma,Va&&(Fa?3>+Ba.dtick.substring(1):Ba.dtick<qa)&&(Ba.dtick="M3")):/%[Yy]/.test(La)&&(Za=da,Va&&(Fa?12>+Ba.dtick.substring(1):Ba.dtick<oa)&&(Ba.dtick="M12"))}(Fa=!(M(Ba.dtick)||"M"!==Ba.dtick.charAt(0)))&&Ba.tick0===Ba._dowTick0&&(Ba.tick0=Ba._rawTick0);Ba._definedDelta=Za}Ba.tick0||(Ba.tick0="date"===Ba.type?"2000-01-01":0);"date"===Ba.type&&.1>Ba.dtick&&(Ba.dtick=.1);g(Ba)};xa.calcTicks=
function(Ba,Fa){xa.prepTicks(Ba,Fa);var La=O.simpleMap(Ba.range,Ba.r2l,void 0,void 0,Fa);if("array"===Ba.tickmode)return a(Ba);var Va=r(La),Za=Va[0],mb=Va[1],ub=La[1]<La[0];Va=Math.min(La[0],La[1]);var Pb=Math.max(La[0],La[1]),Kb="log"===Ba.type&&!(M(Ba.dtick)||"L"===Ba.dtick.charAt(0)),Ob="period"===Ba.ticklabelmode;Ba._tmin=xa.tickFirst(Ba,Fa);if(Ba._tmin<Za!==ub)return[];if("category"===Ba.type||"multicategory"===Ba.type)mb=ub?Math.max(-.5,mb):Math.min(Ba._categories.length-.5,mb);var Wb=Ba._tmin;
Ba.rangebreaks&&Ba._tick0Init!==Ba.tick0&&(Wb=H(Wb,Ba),ub||(Wb=xa.tickIncrement(Wb,Ba.dtick,!ub,Ba.calendar)));Ob&&(Wb=xa.tickIncrement(Wb,Ba.dtick,!ub,Ba.calendar));var Bc=Math.max(1E3,Ba._length||0);Fa=[];for(var Kc=null;ub?Wb>=mb:Wb<=mb;Wb=xa.tickIncrement(Wb,Ba.dtick,ub,Ba.calendar)){if(Ba.rangebreaks&&!ub){if(Wb<Za)continue;if(Ba.maskBreaks(Wb)===nb&&H(Wb,Ba)>=Pb)break}if(Fa.length>Bc||Wb===Kc)break;Kc=Wb;var Nc=!1;Kb&&Wb!==(Wb|0)&&(Nc=!0);Fa.push({minor:Nc,value:Wb})}if(Ob)for(Za=Ba._definedDelta,
mb=0;mb<Fa.length;mb++){Kb=Fa[mb].value;mb<Fa.length-1?(Ob=mb,Wb=mb+1):(Ob=0<mb?mb-1:mb,Wb=mb);Ob=Math.abs(Fa[Wb].value-Fa[Ob].value);Bc=Za||Ob;Wb=0;Bc>=oa?Wb=Ob>=oa&&Ob<=la?Ob:da:Za===ma&&Bc>=qa?Wb=Ob>=qa&&Ob<=sa?Ob:ma:Bc>=ka?Wb=Ob>=ka&&Ob<=pa?Ob:na:Za===ua&&Bc>=ua?Wb=ua:Bc>=va?Wb=va:Za===Ca&&Bc>=Ca?Wb=Ca:Za===Ma&&Bc>=Ma&&(Wb=Ma);if(Wb>=Ob){Wb=Ob;var bd=!0}Bc=Kb+Wb;if(Ba.rangebreaks&&0<Wb){for(Nc=Kc=0;84>Nc;Nc++){var kb=(Nc+.5)/84;Ba.maskBreaks(Kb*(1-kb)+kb*Bc)!==nb&&Kc++}Wb*=Kc/84;Wb||(Fa[mb].drop=
!0);bd&&Ob>ua&&(Wb=Ob)}if(0<Wb||0===mb)Fa[mb].periodX=Kb+Wb/2}if(Ba.rangebreaks)for(Za="y"===Ba._id.charAt(0),mb=1,"auto"===Ba.tickmode&&(mb=Ba.tickfont?Ba.tickfont.size:12),Kb=NaN,bd=Fa.length-1;-1<bd;bd--)Fa[bd].drop?Fa.splice(bd,1):(Fa[bd].value=H(Fa[bd].value,Ba),Ob=Ba.c2p(Fa[bd].value),(Za?Kb>Ob-mb:Kb<Ob+mb)?Fa.splice(ub?bd+1:bd,1):Kb=Ob);"angularaxis"===Ba._id&&360===Math.abs(La[1]-La[0])&&Fa.pop();Ba._tmax=(Fa[Fa.length-1]||{}).value;Ba._prevDateHead="";Ba._inCalcTicks=!0;La=[];for(bd=0;bd<
Fa.length;bd++)ub=xa.tickText(Ba,Fa[bd].value,!1,Fa[bd].minor),Za=Fa[bd].periodX,void 0!==Za&&(ub.periodX=Za,Za>Pb||Za<Va)&&(Za>Pb&&(ub.periodX=Pb),Za<Va&&(ub.periodX=Va),ub.text=" ",Ba._prevDateHead=""),La.push(ub);Ba._inCalcTicks=!1;return La};var Xa=[2,5,10],tb=[1,2,3,6,12],Ka=[1,2,5,10,15,30],Ta=[1,2,3,7,14],Na=[-.046,0,.301,.477,.602,.699,.778,.845,.903,.954,1],ib=[-.301,0,.301,.699,1],qb=[15,30,45,90,180];xa.autoTicks=function(Ba,Fa){function La(mb){return Math.pow(mb,Math.floor(Math.log(Fa)/
Math.LN10))}if("date"===Ba.type){Ba.tick0=O.dateTick0(Ba.calendar,0);var Va=2*Fa;if(Va>da)Fa/=da,Va=La(10),Ba.dtick="M"+12*h(Fa,Va,Xa);else if(Va>na)Fa/=na,Ba.dtick="M"+h(Fa,1,tb);else if(Va>va){Ba.dtick=h(Fa,va,Ba._hasDayOfWeekBreaks?[1,2,7,14]:Ta);Va=xa.getTickFormat(Ba);var Za="period"===Ba.ticklabelmode;Za&&(Ba._rawTick0=Ba.tick0);/%[uVW]/.test(Va)?Ba.tick0=O.dateTick0(Ba.calendar,2):Ba.tick0=O.dateTick0(Ba.calendar,1);Za&&(Ba._dowTick0=Ba.tick0)}else Va>Ma?Ba.dtick=h(Fa,Ma,tb):Va>Ua?Ba.dtick=
h(Fa,Ua,Ka):Va>eb?Ba.dtick=h(Fa,eb,Ka):(Va=La(10),Ba.dtick=h(Fa,Va,Xa))}else"log"===Ba.type?(Ba.tick0=0,Va=O.simpleMap(Ba.range,Ba.r2l),.7<Fa?Ba.dtick=Math.ceil(Fa):1>Math.abs(Va[1]-Va[0])?(Fa=Math.abs(Math.pow(10,Va[1])-Math.pow(10,Va[0]))/(1.5*Math.abs((Va[1]-Va[0])/Fa)),Va=La(10),Ba.dtick="L"+h(Fa,Va,Xa)):Ba.dtick=.3<Fa?"D2":"D1"):"category"===Ba.type||"multicategory"===Ba.type?(Ba.tick0=0,Ba.dtick=Math.ceil(Math.max(Fa,1))):"angularaxis"===Ba._id?(Ba.tick0=0,Ba.dtick=h(Fa,1,qb)):(Ba.tick0=0,Va=
La(10),Ba.dtick=h(Fa,Va,Xa));0===Ba.dtick&&(Ba.dtick=1);if(!M(Ba.dtick)&&"string"!==typeof Ba.dtick)throw Va=Ba.dtick,Ba.dtick=1,"ax.dtick error: "+String(Va);};xa.tickIncrement=function(Ba,Fa,La,Va){var Za=La?-1:1;if(M(Fa))return O.increment(Ba,Za*Fa);var mb=Fa.charAt(0),ub=Za*Number(Fa.substr(1));if("M"===mb)return O.incrementMonth(Ba,ub,Va);if("L"===mb)return Math.log(Math.pow(10,Ba)+ub)/Math.LN10;if("D"===mb)return Fa="D2"===Fa?ib:Na,Ba+=.01*Za,La=O.roundUp(O.mod(Ba,1),Fa,La),Math.floor(Ba)+Math.log(Q.round(Math.pow(10,
La),1))/Math.LN10;throw"unrecognized dtick "+String(Fa);};xa.tickFirst=function(Ba,Fa){var La=Ba.r2l||Number,Va=O.simpleMap(Ba.range,La,void 0,void 0,Fa),Za=(Fa=Va[1]<Va[0])?Math.floor:Math.ceil;Va=r(Va)[0];var mb=Ba.dtick,ub=La(Ba.tick0);if(M(mb)){Fa=Za((Va-ub)/mb)*mb+ub;if("category"===Ba.type||"multicategory"===Ba.type)Fa=O.constrain(Fa,0,Ba._categories.length-1);return Fa}La=mb.charAt(0);var Pb=Number(mb.substr(1));if("M"===La){Za=0;for(var Kb,Ob;10>Za;){Kb=xa.tickIncrement(ub,mb,Fa,Ba.calendar);
if(0>=(Kb-Va)*(ub-Va))return Fa?Math.min(ub,Kb):Math.max(ub,Kb);Kb=(Va-(ub+Kb)/2)/(Kb-ub);Ob=La+(Math.abs(Math.round(Kb))||1)*Pb;ub=xa.tickIncrement(ub,Ob,0>Kb?!Fa:Fa,Ba.calendar);Za++}O.error("tickFirst did not converge",Ba);return ub}if("L"===La)return Math.log(Za((Math.pow(10,Va)-ub)/Pb)*Pb+ub)/Math.LN10;if("D"===La)return Ba="D2"===mb?ib:Na,Ba=O.roundUp(O.mod(Va,1),Ba,Fa),Math.floor(Va)+Math.log(Q.round(Math.pow(10,Ba),1))/Math.LN10;throw"unrecognized dtick "+String(mb);};xa.tickText=function(Ba,
Fa,La,Va){function Za(Bc){if(void 0===Bc)return!0;if(La)return"none"===Bc;var Kc={first:Ba._tmin,last:Ba._tmax}[Bc];return"all"!==Bc&&Fa!==Kc}var mb=n(Ba,Fa),ub="array"===Ba.tickmode,Pb=La||ub,Kb=Ba.type,Ob="category"===Kb?Ba.d2l_noadd:Ba.d2l;if(ub&&Array.isArray(Ba.ticktext)){ub=O.simpleMap(Ba.range,Ba.r2l);var Wb=(Math.abs(ub[1]-ub[0])-(Ba._lBreaks||0))/1E4;for(ub=0;ub<Ba.ticktext.length&&!(Math.abs(Fa-Ob(Ba.tickvals[ub]))<Wb);ub++);if(ub<Ba.ticktext.length)return mb.text=String(Ba.ticktext[ub]),
mb}Ob=La?"never":"none"!==Ba.exponentformat&&Za(Ba.showexponent)?"hide":"";"date"===Kb?p(Ba,mb,La,Pb):"log"===Kb?d(Ba,mb,La,Pb,Ob):"category"===Kb?e(Ba,mb):"multicategory"===Kb?f(Ba,mb,La):"angularaxis"===Ba._id?t(Ba,mb,La,Pb,Ob):k(Ba,mb,La,Pb,Ob);Va||(Ba.tickprefix&&!Za(Ba.showtickprefix)&&(mb.text=Ba.tickprefix+mb.text),Ba.ticksuffix&&!Za(Ba.showticksuffix)&&(mb.text+=Ba.ticksuffix));if("boundaries"===Ba.tickson||Ba.showdividers)Va=function(Bc){var Kc=Ba.l2p(Bc);return 0<=Kc&&Kc<=Ba._length?Bc:
null},mb.xbnd=[Va(mb.x-.5),Va(mb.x+Ba.dtick-.5)];return mb};xa.hoverLabelText=function(Ba,Fa,La){if(La!==nb&&La!==Fa)return xa.hoverLabelText(Ba,Fa)+" - "+xa.hoverLabelText(Ba,La);La="log"===Ba.type&&0>=Fa;Ba=xa.tickText(Ba,Ba.c2l(La?-Fa:Fa),"hover").text;return La?0===Fa?"0":fb+Ba:Ba};var sb="f p n  m  k M G T".split(" ");xa.getTickFormat=function(Ba){function Fa(Kb){return"string"!==typeof Kb?Kb:Number(Kb.replace("M",""))*na}function La(Kb,Ob){var Wb=["L","D"];if(typeof Kb===typeof Ob){if("number"===
typeof Kb)return Kb-Ob;var Bc=Wb.indexOf(Kb.charAt(0));Wb=Wb.indexOf(Ob.charAt(0));return Bc===Wb?Number(Kb.replace(/(L|D)/g,""))-Number(Ob.replace(/(L|D)/g,"")):Bc-Wb}return"number"===typeof Kb?1:-1}function Va(Kb,Ob,Wb){Wb=Wb||function(Kc){return Kc};var Bc=Ob[0];Ob=Ob[1];return(!Bc&&"number"!==typeof Bc||Wb(Bc)<=Wb(Kb))&&(!Ob&&"number"!==typeof Ob||Wb(Ob)>=Wb(Kb))}function Za(Kb,Ob){var Wb=null===Ob[0],Bc=null===Ob[1],Kc=0<=La(Kb,Ob[0]);Kb=0>=La(Kb,Ob[1]);return(Wb||Kc)&&(Bc||Kb)}var mb;if(Ba.tickformatstops&&
0<Ba.tickformatstops.length)switch(Ba.type){case "date":case "linear":for(mb=0;mb<Ba.tickformatstops.length;mb++){var ub=Ba.tickformatstops[mb];if(ub.enabled&&Va(Ba.dtick,ub.dtickrange,Fa)){var Pb=ub;break}}break;case "log":for(mb=0;mb<Ba.tickformatstops.length;mb++)if(ub=Ba.tickformatstops[mb],ub.enabled&&Za(Ba.dtick,ub.dtickrange)){Pb=ub;break}}return Pb?Pb.value:Ba.tickformat};xa.getSubplots=function(Ba,Fa){Ba=Ba._fullLayout._subplots;Ba=Ba.cartesian.concat(Ba.gl2d||[]);Fa=Fa?xa.findSubplotsWithAxis(Ba,
Fa):Ba;Fa.sort(function(La,Va){La=La.substr(1).split("y");Va=Va.substr(1).split("y");return La[0]===Va[0]?+La[1]-+Va[1]:+La[0]-+Va[0]});return Fa};xa.findSubplotsWithAxis=function(Ba,Fa){Fa=new RegExp("x"===Fa._id.charAt(0)?"^"+Fa._id+"y":Fa._id+"$");for(var La=[],Va=0;Va<Ba.length;Va++){var Za=Ba[Va];Fa.test(Za)&&La.push(Za)}return La};xa.makeClipPaths=function(Ba){var Fa=Ba._fullLayout;if(!Fa._hasOnlyLargeSploms){var La={_offset:0,_length:Fa.width,_id:""},Va={_offset:0,_length:Fa.height,_id:""},
Za=xa.list(Ba,"x",!0);Ba=xa.list(Ba,"y",!0);var mb=[],ub,Pb;for(ub=0;ub<Za.length;ub++)for(mb.push({x:Za[ub],y:Va}),Pb=0;Pb<Ba.length;Pb++)0===ub&&mb.push({x:La,y:Ba[Pb]}),mb.push({x:Za[ub],y:Ba[Pb]});La=Fa._clips.selectAll(".axesclip").data(mb,function(Kb){return Kb.x._id+Kb.y._id});La.enter().append("clipPath").classed("axesclip",!0).attr("id",function(Kb){return"clip"+Fa._uid+Kb.x._id+Kb.y._id}).append("rect");La.exit().remove();La.each(function(Kb){Q.select(this).select("rect").attr({x:Kb.x._offset||
0,y:Kb.y._offset||0,width:Kb.x._length||1,height:Kb.y._length||1})})}};xa.draw=function(Ba,Fa,La){var Va=Ba._fullLayout;"redraw"===Fa&&Va._paper.selectAll("g.subplot").each(function(Za){if(Za=Va._plots[Za[0]]){var mb=Za.xaxis,ub=Za.yaxis;Za.xaxislayer.selectAll("."+mb._id+"tick").remove();Za.yaxislayer.selectAll("."+ub._id+"tick").remove();Za.xaxislayer.selectAll("."+mb._id+"tick2").remove();Za.yaxislayer.selectAll("."+ub._id+"tick2").remove();Za.xaxislayer.selectAll("."+mb._id+"divider").remove();
Za.yaxislayer.selectAll("."+ub._id+"divider").remove();Za.gridlayer&&Za.gridlayer.selectAll("path").remove();Za.zerolinelayer&&Za.zerolinelayer.selectAll("path").remove();Va._infolayer.select(".g-"+mb._id+"title").remove();Va._infolayer.select(".g-"+ub._id+"title").remove()}});Fa=Fa&&"redraw"!==Fa?Fa:xa.listIds(Ba);return O.syncOrAsync(Fa.map(function(Za){return function(){if(Za){var mb=xa.getFromId(Ba,Za),ub=xa.drawOne(Ba,mb,La);mb._r=mb.range.slice();mb._rl=O.simpleMap(mb._r,mb.r2l);return ub}}}))};
xa.drawOne=function(Ba,Fa,La){function Va(Mb){Mb=ub+(Mb||"tick");bd[Mb]||(bd[Mb]=z(Fa,Mb));return bd[Mb]}La=La||{};var Za;Fa.setScale();var mb=Ba._fullLayout,ub=Fa._id,Pb=ub.charAt(0),Kb=xa.counterLetter(ub),Ob=mb._plots[Fa._mainSubplot];if(Ob){var Wb=Ob[Pb+"axislayer"],Bc=Fa._mainLinePosition;Ob=Fa._mainMirrorPosition;var Kc=Fa._vals=xa.calcTicks(Fa),Nc=[Fa.mirror,Bc,Ob].join("_");for(Za=0;Za<Kc.length;Za++)Kc[Za].axInfo=Nc;Fa._selections={};Fa._tickAngles&&(Fa._prevTickAngles=Fa._tickAngles);Fa._tickAngles=
{};Fa._depth=null;var bd={};if(Fa.visible){var kb=xa.makeTransTickFn(Fa),$b=xa.makeTransTickLabelFn(Fa);Nc="inside"===Fa.ticks;var gc="outside"===Fa.ticks;if("boundaries"===Fa.tickson){var rc=B(Fa,Kc);Za=xa.clipEnds(Fa,rc);Nc=Nc?Za:rc}else Za=xa.clipEnds(Fa,Kc),Nc=Nc&&"period"!==Fa.ticklabelmode?Za:Kc;var xc=Fa._gridVals=Za,Rc=A(Fa,Kc);if(!mb._hasOnlyLargeSploms){var gb=Fa._subplotsWith,vb={};for(Za=0;Za<gb.length;Za++){var Sb=gb[Za];rc=mb._plots[Sb];Sb=rc[Kb+"axis"];var ic=Sb._mainAxis._id;vb[ic]||
(vb[ic]=1,ic="x"===Pb?"M0,"+Sb._offset+"v"+Sb._length:"M"+Sb._offset+",0h"+Sb._length,xa.drawGrid(Ba,Fa,{vals:xc,counterAxis:Sb,layer:rc.gridlayer.select("."+ub),path:ic,transFn:kb}),xa.drawZeroLine(Ba,Fa,{counterAxis:Sb,layer:rc.zerolinelayer,path:ic,transFn:kb}))}}var ac=xa.getTickSigns(Fa);xc=[];if(Fa.ticks){Za=xa.makeTickPath(Fa,Bc,ac[2]);if(Fa._anchorAxis&&Fa.mirror&&!0!==Fa.mirror){var bc=xa.makeTickPath(Fa,Ob,ac[3]);var Ub=Za+bc}else bc="",Ub=Za;if(Fa.showdividers&&gc&&"boundaries"===Fa.tickson){var wb=
{};for(Za=0;Za<Rc.length;Za++)wb[Rc[Za].x]=1;Ob=function(Mb){return wb[Mb.x]?bc:Ub}}else Ob=Ub;xa.drawTicks(Ba,Fa,{vals:Nc,layer:Wb,path:Ob,transFn:kb});"allticks"===Fa.mirror&&(xc=Object.keys(Fa._linepositions||{}))}for(Za=0;Za<xc.length;Za++)Sb=xc[Za],rc=mb._plots[Sb],Ob=Fa._linepositions[Sb]||[],Ob=xa.makeTickPath(Fa,Ob[0],ac[0])+xa.makeTickPath(Fa,Ob[1],ac[1]),xa.drawTicks(Ba,Fa,{vals:Nc,layer:rc[Pb+"axislayer"],path:Ob,transFn:kb});Ob=[];Ob.push(function(){return xa.drawLabels(Ba,Fa,{vals:Kc,
layer:Wb,transFn:$b,labelFns:xa.makeLabelFns(Fa,Bc)})});if("multicategory"===Fa.type){var Lb={x:2,y:10}[Pb];Ob.push(function(){var Mb={x:"height",y:"width"}[Pb];Mb=Va()[Mb]+Lb+(Fa._tickAngles[ub+"tick"]?Fa.tickfont.size*jb:0);for(var Yb=xa,qc=Yb.drawLabels,Tc=[],Yc={},ad=0;ad<Kc.length;ad++){var ec=Kc[ad];Yc[ec.text2]?Yc[ec.text2].push(ec.x):Yc[ec.text2]=[ec.x]}for(var Fc in Yc)Tc.push(n(Fa,O.interp(Yc[Fc],.5),Fc));return qc.call(Yb,Ba,Fa,{vals:Tc,layer:Wb,cls:ub+"tick2",repositionOnUpdate:!0,secondary:!0,
transFn:kb,labelFns:xa.makeLabelFns(Fa,Bc+Mb*ac[4])})});Ob.push(function(){Fa._depth=ac[4]*(Va("tick2")[Fa.side]-Bc);var Mb=xa.makeTickPath(Fa,Bc,ac[4],Fa._depth),Yb=Fa._id+"divider",qc=Wb.selectAll("path."+Yb).data(Rc,C);qc.exit().remove();qc.enter().insert("path",":first-child").classed(Yb,1).classed("crisp",1).call(ba.stroke,Fa.dividercolor).style("stroke-width",ca.crispRound(Ba,Fa.dividerwidth,1)+"px");qc.attr("transform",kb).attr("d",Mb)})}else Fa.title.hasOwnProperty("standoff")&&Ob.push(function(){Fa._depth=
ac[4]*(Va()[Fa.side]-Bc)});var Bb=T.getComponentMethod("rangeslider","isVisible")(Fa);Ob.push(function(){var Mb=Fa.side.charAt(0),Yb=pb[Fa.side].charAt(0),qc=xa.getPxPosition(Ba,Fa),Tc=gc?Fa.ticklen:0,Yc;if(Fa.automargin||Bb)if("multicategory"===Fa.type)var ad=Va("tick2");else ad=Va(),"x"===Pb&&"b"===Mb&&(Fa._depth=Math.max(0<ad.width?ad.bottom-qc:0,Tc));if(Fa.automargin){var ec={x:0,y:0,r:0,l:0,t:0,b:0};var Fc=[0,1];"x"===Pb?("b"===Mb?ec[Mb]=Fa._depth:(ec[Mb]=Fa._depth=Math.max(0<ad.width?qc-ad.top:
0,Tc),Fc.reverse()),0<ad.width&&(qc=ad.right-(Fa._offset+Fa._length),0<qc&&(ec.xr=1,ec.r=qc),ad=Fa._offset-ad.left,0<ad&&(ec.xl=0,ec.l=ad))):("l"===Mb?ec[Mb]=Fa._depth=Math.max(0<ad.height?qc-ad.left:0,Tc):(ec[Mb]=Fa._depth=Math.max(0<ad.height?ad.right-qc:0,Tc),Fc.reverse()),0<ad.height&&(qc=ad.bottom-(Fa._offset+Fa._length),0<qc&&(ec.yb=0,ec.b=qc),ad=Fa._offset-ad.top,0<ad&&(ec.yt=1,ec.t=ad)));ec[Kb]="free"===Fa.anchor?Fa.position:Fa._anchorAxis.domain[Fc[0]];Fa.title.text!==mb._dfltTitle[Pb]&&
(ec[Mb]+=u(Fa)+(Fa.title.standoff||0));if(Fa.mirror&&"free"!==Fa.anchor){var dd={x:0,y:0,r:0,l:0,t:0,b:0};dd[Yb]=Fa.linewidth;Fa.mirror&&!0!==Fa.mirror&&(dd[Yb]+=Tc);if(!0===Fa.mirror||"ticks"===Fa.mirror)dd[Kb]=Fa._anchorAxis.domain[Fc[1]];else if("all"===Fa.mirror||"allticks"===Fa.mirror)dd[Kb]=[Fa._counterDomainMin,Fa._counterDomainMax][Fc[1]]}}Bb&&(Yc=T.getComponentMethod("rangeslider","autoMarginOpts")(Ba,Fa));P.autoMargin(Ba,L(Fa),ec);P.autoMargin(Ba,L(Fa)+".mirror",dd);P.autoMargin(Ba,Fa._id+
".rangeslider",Yc)});La.skipTitle||Bb&&"bottom"===Fa.side||Ob.push(function(){var Mb=Ba._fullLayout,Yb=Fa._id,qc=Yb.charAt(0),Tc=Fa.title.font.size;if(Fa.title.hasOwnProperty("standoff"))var Yc=Fa._depth+Fa.title.standoff+u(Fa);else{var ad=-1!==(Fa.ticklabelposition||"").indexOf("inside");"multicategory"===Fa.type?Yc=Fa._depth:(Yc=1.5*Tc,ad&&(Yc=.5*Tc,"outside"===Fa.ticks&&(Yc+=Fa.ticklen)),Yc=10+Yc+(Fa.linewidth?Fa.linewidth-1:0));ad||(Yc="x"===qc?Yc+("top"===Fa.side?Tc*(Fa.showticklabels?1:0):Tc*
(Fa.showticklabels?1.5:.5)):Yc+("right"===Fa.side?Tc*(Fa.showticklabels?1:.5):Tc*(Fa.showticklabels?.5:0)))}var ec=xa.getPxPosition(Ba,Fa);if("x"===qc)Tc=Fa._offset+Fa._length/2,ad="top"===Fa.side?ec-Yc:ec+Yc;else{ad=Fa._offset+Fa._length/2;Tc="right"===Fa.side?ec+Yc:ec-Yc;var Fc={rotate:"-90",offset:0}}if("multicategory"!==Fa.type){Yc=Fa._selections[Fa._id+"tick"];var dd={selection:Yc,side:Fa.side};Yc&&Yc.node()&&Yc.node().parentNode&&(Yc=ca.getTranslate(Yc.node().parentNode),dd.offsetLeft=Yc.x,
dd.offsetTop=Yc.y);Fa.title.hasOwnProperty("standoff")&&(dd.pad=0)}return X.draw(Ba,Yb+"title",{propContainer:Fa,propName:Fa._name+".title.text",placeholder:Mb._dfltTitle[qc],avoid:dd,transform:Fc,attributes:{x:Tc,y:ad,"text-anchor":"middle"}})});return O.syncOrAsync(Ob)}}};xa.getTickSigns=function(Ba){var Fa=Ba._id.charAt(0),La=Ba.side==={x:"top",y:"right"}[Fa]?1:-1;La=[-1,1,La,-La];"inside"!==Ba.ticks===("x"===Fa)&&(La=La.map(function(Va){return-Va}));Ba.side&&La.push({l:-1,t:-1,r:1,b:1}[Ba.side.charAt(0)]);
return La};xa.makeTransTickFn=function(Ba){return"x"===Ba._id.charAt(0)?function(Fa){return U(Ba._offset+Ba.l2p(Fa.x),0)}:function(Fa){return U(0,Ba._offset+Ba.l2p(Fa.x))}};xa.makeTransTickLabelFn=function(Ba){var Fa=E(Ba),La=Fa[0],Va=Fa[1];return"x"===Ba._id.charAt(0)?function(Za){return U(La+Ba._offset+Ba.l2p(void 0!==Za.periodX?Za.periodX:Za.x),Va)}:function(Za){return U(Va,La+Ba._offset+Ba.l2p(void 0!==Za.periodX?Za.periodX:Za.x))}};xa.makeTickPath=function(Ba,Fa,La,Va){Va=void 0!==Va?Va:Ba.ticklen;
var Za=Ba._id.charAt(0);Ba=(Ba.linewidth||1)/2;return"x"===Za?"M0,"+(Fa+Ba*La)+"v"+Va*La:"M"+(Fa+Ba*La)+",0h"+Va*La};xa.makeLabelFns=function(Ba,Fa,La){var Va=Ba.ticklabelposition||"",Za=-1!==Va.indexOf("top"),mb=-1!==Va.indexOf("left"),ub=-1!==Va.indexOf("right"),Pb=-1!==Va.indexOf("bottom")||mb||Za||ub,Kb=-1!==Va.indexOf("inside"),Ob="inside"===Va&&"inside"===Ba.ticks||!Kb&&"outside"===Ba.ticks&&"boundaries"!==Ba.tickson;Za=Va=0;var Wb=Ob?Ba.ticklen:0;Kb?Wb*=-1:Pb&&(Wb=0);Ob&&(Va+=Wb,La&&(Za=O.deg2rad(La),
Va=Wb*Math.cos(Za)+1,Za=Wb*Math.sin(Za)));Ba.showticklabels&&(Ob||Ba.showline)&&(Va+=.2*Ba.tickfont.size);Va+=(Ba.linewidth||1)/2*(Kb?-1:1);La={labelStandoff:Va,labelShift:Za};var Bc=0;Ob=Ba.side;Wb=Ba._id.charAt(0);var Kc=Ba.tickangle,Nc;if("x"===Wb){var bd=(Nc=!Kb&&"bottom"===Ob||Kb&&"top"===Ob)?1:-1;Kb&&(bd*=-1);var kb=Za*bd;var $b=Fa+Va*bd;var gc=Nc?1:-.2;90===Math.abs(Kc)&&(gc=Kb?gc+cb:-90===Kc&&"bottom"===Ob?$a:90===Kc&&"top"===Ob?cb:.5,Bc=cb/2*(Kc/90));La.xFn=function(rc){return rc.dx+kb+Bc*
rc.fontSize};La.yFn=function(rc){return rc.dy+$b+rc.fontSize*gc};La.anchorFn=function(rc,xc){if(Pb){if(mb)return"end";if(ub)return"start"}return M(xc)&&0!==xc&&180!==xc?0>xc*bd!==Kb?"end":"start":"middle"};La.heightFn=function(rc,xc,Rc){return-60>xc||60<xc?-.5*Rc:"top"===Ba.side!==Kb?-Rc:0}}else"y"===Wb&&(bd=(Nc=!Kb&&"left"===Ob||Kb&&"right"===Ob)?1:-1,Kb&&(bd*=-1),kb=Va,$b=Za*bd,gc=0,Kb||90!==Math.abs(Kc)||(gc=-90===Kc&&"left"===Ob||90===Kc&&"right"===Ob?$a:.5),Kb&&(Va=M(Kc)?+Kc:0,0!==Va&&(Va=O.deg2rad(Va),
Bc=Math.abs(Math.sin(Va))*$a*bd,gc=0)),La.xFn=function(rc){return rc.dx+Fa-(kb+rc.fontSize*gc)*bd+Bc*rc.fontSize},La.yFn=function(rc){return rc.dy+$b+rc.fontSize*cb},La.anchorFn=function(rc,xc){return M(xc)&&90===Math.abs(xc)?"middle":Nc?"end":"start"},La.heightFn=function(rc,xc,Rc){"right"===Ba.side&&(xc*=-1);return-30>xc?-Rc:30>xc?-.5*Rc:0});return La};xa.drawTicks=function(Ba,Fa,La){La=La||{};var Va=Fa._id+"tick",Za=La.vals;"period"===Fa.ticklabelmode&&(Za=Za.slice(),Za.shift());Za=La.layer.selectAll("path."+
Va).data(Fa.ticks?Za:[],C);Za.exit().remove();Za.enter().append("path").classed(Va,1).classed("ticks",1).classed("crisp",!1!==La.crisp).call(ba.stroke,Fa.tickcolor).style("stroke-width",ca.crispRound(Ba,Fa.tickwidth,1)+"px").attr("d",La.path);Za.attr("transform",La.transFn)};xa.drawGrid=function(Ba,Fa,La){La=La||{};var Va=Fa._id+"grid",Za=La.vals,mb=La.counterAxis;if(!1===Fa.showgrid)Za=[];else if(mb&&xa.shouldShowZeroLine(Ba,Fa,mb)){mb="array"===Fa.tickmode;for(var ub=0;ub<Za.length;ub++){var Pb=
Za[ub].x;if(mb?!Pb:Math.abs(Pb)<Fa.dtick/100)if(Za=Za.slice(0,ub).concat(Za.slice(ub+1)),mb)ub--;else break}}Za=La.layer.selectAll("path."+Va).data(Za,C);Za.exit().remove();Za.enter().append("path").classed(Va,1).classed("crisp",!1!==La.crisp);Fa._gw=ca.crispRound(Ba,Fa.gridwidth,1);Za.attr("transform",La.transFn).attr("d",La.path).call(ba.stroke,Fa.gridcolor||"#ddd").style("stroke-width",Fa._gw+"px");"function"===typeof La.path&&Za.attr("d",La.path)};xa.drawZeroLine=function(Ba,Fa,La){La=La||La;
var Va=Fa._id+"zl",Za=xa.shouldShowZeroLine(Ba,Fa,La.counterAxis);Za=La.layer.selectAll("path."+Va).data(Za?[{x:0,id:Fa._id}]:[]);Za.exit().remove();Za.enter().append("path").classed(Va,1).classed("zl",1).classed("crisp",!1!==La.crisp).each(function(){La.layer.selectAll("path").sort(function(mb,ub){return Ia(mb.id,ub.id)})});Za.attr("transform",La.transFn).attr("d",La.path).call(ba.stroke,Fa.zerolinecolor||ba.defaultLine).style("stroke-width",ca.crispRound(Ba,Fa.zerolinewidth,Fa._gw||1)+"px")};xa.drawLabels=
function(Ba,Fa,La){function Va(gc,rc){var xc=-1!==(Fa.ticklabelposition||"").indexOf("inside");gc.each(function(Rc){var gb=Q.select(this),vb=gb.select(".text-math-group"),Sb=Wb.anchorFn(Rc,rc),ic=La.transFn.call(gb.node(),Rc)+(M(rc)&&0!==+rc?" rotate("+rc+","+Wb.xFn(Rc)+","+(Wb.yFn(Rc)-Rc.fontSize/2)+")":""),ac=S.lineCount(gb),bc=jb*Rc.fontSize;(Rc=Wb.heightFn(Rc,M(rc)?+rc:0,(ac-1)*bc))&&(ic+=U(0,Rc));vb.empty()?(vb=gb.select("text"),vb.attr({transform:ic,"text-anchor":Sb}),xc&&(vb.style({opacity:100}),
Fa._hideOutOfRangeInsideTickLabels&&Fa._hideOutOfRangeInsideTickLabels())):(Sb=ca.bBox(vb.node()).width*{end:-.5,start:.5}[Sb],vb.attr("transform",ic+U(Sb,0)))})}function Za(){Va(Nc,Bc);if(Ob.length&&"x"===Pb&&!M(Bc)&&("log"!==Fa.type||"D"!==String(Fa.dtick).charAt(0))){var gc=kb=0,rc=[];Nc.each(function(ic){gc=Math.max(gc,ic.fontSize);ic=Fa.l2p(ic.x);var ac=J(this);ac=ca.bBox(ac.node());rc.push({top:0,bottom:10,height:10,left:ic-ac.width/2,right:ic+ac.width/2+2,width:ac.width+2})});if("boundaries"!==
Fa.tickson&&!Fa.showdividers||La.secondary){var xc=Ob.length;xc=Math.abs((Ob[xc-1].x-Ob[0].x)*Fa._m)/(xc-1);var Rc=Fa.ticklabelposition||"",gb=-1!==Rc.indexOf("top"),vb=-1!==Rc.indexOf("left"),Sb=-1!==Rc.indexOf("right");Rc=-1!==Rc.indexOf("bottom")||vb||gb||Sb?(Fa.tickwidth||0)+6:0;gb=xc<2.5*gc||"multicategory"===Fa.type;for(xc=0;xc<rc.length-1;xc++)if(O.bBoxIntersect(rc[xc],rc[xc+1],Rc)){kb=gb?90:30;break}}else for(Rc=2,Fa.ticks&&(Rc+=Fa.tickwidth/2),xc=0;xc<rc.length;xc++)if(gb=Ob[xc].xbnd,vb=
rc[xc],null!==gb[0]&&vb.left-Fa.l2p(gb[0])<Rc||null!==gb[1]&&Fa.l2p(gb[1])-vb.right<Rc){kb=90;break}kb&&Va(Nc,kb)}}La=La||{};var mb=Ba._fullLayout,ub=Fa._id,Pb=ub.charAt(0),Kb=La.cls||ub+"tick",Ob=La.vals,Wb=La.labelFns,Bc=La.secondary?0:Fa.tickangle,Kc=(Fa._prevTickAngles||{})[Kb],Nc=La.layer.selectAll("g."+Kb).data(Fa.showticklabels?Ob:[],C),bd=[];Nc.enter().append("g").classed(Kb,1).append("text").attr("text-anchor","middle").each(function(gc){var rc=Q.select(this),xc=Ba._promises.length;rc.call(S.positionText,
Wb.xFn(gc),Wb.yFn(gc)).call(ca.font,gc.font,gc.fontSize,gc.fontColor).text(gc.text).call(S.convertToTspans,Ba);Ba._promises[xc]?bd.push(Ba._promises.pop().then(function(){Va(rc,Bc)})):Va(rc,Bc)});Nc.exit().remove();La.repositionOnUpdate&&Nc.each(function(gc){Q.select(this).select("text").call(S.positionText,Wb.xFn(gc),Wb.yFn(gc))});Fa._hideOutOfRangeInsideTickLabels=void 0;-1!==(Fa.ticklabelposition||"").indexOf("inside")&&(Fa._hideOutOfRangeInsideTickLabels=function(){var gc=O.simpleMap(Fa.range,
Fa.r2l),rc=Fa.l2p(gc[0]);gc=Fa.l2p(gc[1]);var xc=Math.min(rc,gc)+Fa._offset,Rc=Math.max(rc,gc)+Fa._offset,gb="x"===Fa._id.charAt(0);Nc.each(function(vb){var Sb=Q.select(this);if(Sb.select(".text-math-group").empty()){var ic=ca.bBox(Sb.node()),ac=!1;gb?ic.right>Rc?ac=!0:ic.left<xc&&(ac=!0):ic.bottom>Rc?ac=!0:ic.top+(Fa.tickangle?0:vb.fontSize/4)<xc&&(ac=!0);ac&&Sb.select("text").style({opacity:0})}})});Va(Nc,Kc+1?Kc:Bc);var kb=null;Fa._selections&&(Fa._selections[Kb]=Nc);ub=[function(){return bd.length&&
Promise.all(bd)}];Fa.automargin&&mb._redrawFromAutoMarginCount&&90===Kc?(kb=90,ub.push(function(){Va(Nc,Kc)})):ub.push(Za);Fa._tickAngles&&ub.push(function(){Fa._tickAngles[Kb]=null===kb?M(Bc)?Bc:0:kb});var $b=Fa._anchorAxis;$b&&$b.autorange&&-1!==(Fa.ticklabelposition||"").indexOf("inside")&&!Oa(mb,Fa._id)&&(mb._insideTickLabelsAutorange||(mb._insideTickLabelsAutorange={}),mb._insideTickLabelsAutorange[$b._name+".autorange"]=$b.autorange,ub.push(function(){Nc.each(function(gc,rc){gc=J(this);Fa._vals[rc].bb=
ca.bBox(gc.node())})}));(mb=O.syncOrAsync(ub))&&mb.then&&Ba._promises.push(mb);return mb};xa.getPxPosition=function(Ba,Fa){Ba=Ba._fullLayout._size;var La=Fa._id.charAt(0),Va=Fa.side,Za;"free"!==Fa.anchor?Za=Fa._anchorAxis:"x"===La?Za={_offset:Ba.t+(1-(Fa.position||0))*Ba.h,_length:0}:"y"===La&&(Za={_offset:Ba.l+(Fa.position||0)*Ba.w,_length:0});if("top"===Va||"left"===Va)return Za._offset;if("bottom"===Va||"right"===Va)return Za._offset+Za._length};xa.shouldShowZeroLine=function(Ba,Fa,La){var Va=
O.simpleMap(Fa.range,Fa.r2l),Za;if(Za=0>=Va[0]*Va[1]&&Fa.zeroline&&("linear"===Fa.type||"-"===Fa.type)&&!(Fa.rangebreaks&&Fa.maskBreaks(0)===nb)){if(!(La=D(Fa,0)||!G(Ba,Fa,La,Va)))a:{Ba=Ba._fullData;La=Fa._mainSubplot;Fa=Fa._id.charAt(0);for(Va=0;Va<Ba.length;Va++)if(Za=Ba[Va],!0===Za.visible&&Za.xaxis+Za.yaxis===La){if(T.traceIs(Za,"bar-like")&&Za.orientation==={x:"h",y:"v"}[Fa]){La=!0;break a}if(Za.fill&&Za.fill.charAt(Za.fill.length-1)===Fa){La=!0;break a}}La=!1}Za=La}return Za};xa.clipEnds=function(Ba,
Fa){return Fa.filter(function(La){return D(Ba,La.x)})};xa.allowAutoMargin=function(Ba){for(var Fa=xa.list(Ba,"",!0),La=0;La<Fa.length;La++){var Va=Fa[La];Va.automargin&&(P.allowAutoMargin(Ba,L(Va)),Va.mirror&&P.allowAutoMargin(Ba,L(Va)+".mirror"));T.getComponentMethod("rangeslider","isVisible")(Va)&&P.allowAutoMargin(Ba,Va._id+".rangeslider")}};xa.swap=function(Ba,Fa){var La=[],Va,Za;for(Va=0;Va<Fa.length;Va++){var mb=[],ub=Ba._fullData[Fa[Va]].xaxis,Pb=Ba._fullData[Fa[Va]].yaxis;if(ub&&Pb){for(Za=
0;Za<La.length;Za++)-1===La[Za].x.indexOf(ub)&&-1===La[Za].y.indexOf(Pb)||mb.push(Za);if(mb.length){var Kb=La[mb[0]];if(1<mb.length)for(Za=1;Za<mb.length;Za++){var Ob=La[mb[Za]];K(Kb.x,Ob.x);K(Kb.y,Ob.y)}K(Kb.x,[ub]);K(Kb.y,[Pb])}else La.push({x:[ub],y:[Pb]})}}for(Fa=0;Fa<La.length;Fa++){var Wb;Za=Ba;mb=La[Fa].x;ub=La[Fa].y;Kb=[];Ob=[];Pb=Za.layout;for(Va=0;Va<mb.length;Va++)Kb.push(xa.getFromId(Za,mb[Va]));for(Va=0;Va<ub.length;Va++)Ob.push(xa.getFromId(Za,ub[Va]));var Bc=Object.keys(ia),Kc="anchor domain overlaying position side tickangle editType".split(" "),
Nc=["linear","log"];for(Va=0;Va<Bc.length;Va++){var bd=Bc[Va],kb=Kb[0][bd],$b=Ob[0][bd],gc=!0,rc=!1,xc=!1;if("_"!==bd.charAt(0)&&"function"!==typeof kb&&-1===Kc.indexOf(bd)){for(Wb=1;Wb<Kb.length&&gc;Wb++){var Rc=Kb[Wb][bd];"type"===bd&&-1!==Nc.indexOf(kb)&&-1!==Nc.indexOf(Rc)&&kb!==Rc?rc=!0:Rc!==kb&&(gc=!1)}for(Wb=1;Wb<Ob.length&&gc;Wb++)kb=Ob[Wb][bd],"type"===bd&&-1!==Nc.indexOf($b)&&-1!==Nc.indexOf(kb)&&$b!==kb?xc=!0:Ob[Wb][bd]!==$b&&(gc=!1);if(gc){rc&&(Pb[Kb[0]._name].type="linear");xc&&(Pb[Ob[0]._name].type=
"linear");Wb=Pb;$b=Kb;gc=Ob;Rc=Za._fullLayout._dfltTitle;rc=O.nestedProperty;xc=rc(Wb[$b[0]._name],bd).get();kb=rc(Wb[gc[0]._name],bd).get();"title"===bd&&(xc&&xc.text===Rc.x&&(xc.text=Rc.y),kb&&kb.text===Rc.y&&(kb.text=Rc.x));for(Rc=0;Rc<$b.length;Rc++)rc(Wb,$b[Rc]._name+"."+bd).set(kb);for(Rc=0;Rc<gc.length;Rc++)rc(Wb,gc[Rc]._name+"."+bd).set(xc)}}}for(Va=0;Va<Za._fullLayout.annotations.length;Va++)Kb=Za._fullLayout.annotations[Va],-1!==mb.indexOf(Kb.xref)&&-1!==ub.indexOf(Kb.yref)&&O.swapAttrs(Pb.annotations[Va],
["?"])}}},{"../../components/color":643,"../../components/drawing":665,"../../components/titles":738,"../../constants/alignment":745,"../../constants/numerical":753,"../../lib":778,"../../lib/svg_text_utils":803,"../../plots/plots":891,"../../registry":911,"./autorange":827,"./axis_autotype":829,"./axis_ids":831,"./clean_ticks":833,"./layout_attributes":842,"./set_convert":848,d3:169,"fast-isnumeric":241}],829:[function(b,N,I){var r=b("fast-isnumeric");I=b("../../lib");var q=b("../../constants/numerical").BADNUM,
m=I.isArrayOrTypedArray,l=I.isDateTime,a=I.cleanNumber,h=Math.round;N.exports=function(g,n,p){var d=p.noMultiCategory;if(m(g)&&!g.length)return"-";var e;if(e=!d)e=g,e=m(e[0])&&m(e[1]);if(e)return"multicategory";if(d&&Array.isArray(g[0])){d=[];for(e=0;e<g.length;e++)if(m(g[e]))for(var f=0;f<g[e].length;f++)d.push(g[e][f]);g=d}d=g;e=d.length;f=Math.max(1,(e-1)/1E3);for(var k=0,t=0,v={},w=0;w<e;w+=f){var y=h(w);y=d[y];var B=String(y);v[B]||(v[B]=1,l(y,n)&&k++,r(y)&&t++)}if(k>2*t)return"date";n="strict"!==
p.autotypenumbers;p=g;d=p.length;e=Math.max(1,(d-1)/1E3);k=f=0;t={};for(v=0;v<d;v+=e)w=h(v),w=p[w],y=String(w),t[y]||(t[y]=1,y=typeof w,"boolean"===y?k++:(n?a(w)!==q:"number"===y)?f++:"string"===y&&k++);if(k>2*f)return"category";a:{p=g.length;for(d=0;d<p;d++)if(e=g[d],n?r(e):"number"===typeof e){g=!0;break a}g=!1}return g?"linear":"-"}},{"../../constants/numerical":753,"../../lib":778,"fast-isnumeric":241}],830:[function(b,N,I){function r(y,B,A){function z(G,J){return a.coerce(y,B,g.rangebreaks,G,
J)}if(z("enabled")){var E=z("bounds");if(E&&2<=E.length){var C="",u,D;if(2===E.length)for(u=0;2>u;u++)if(D=q(E[u])){C=t;break}C=z("pattern",C);if(C===t)for(u=0;2>u;u++)(D=q(E[u]))&&(B.bounds[u]=E[u]=D-1);if(C)for(u=0;2>u;u++)switch(D=E[u],C){case t:if(!m(D)){B.enabled=!1;return}D=+D;if(D!==Math.floor(D)||0>D||7<=D){B.enabled=!1;return}B.bounds[u]=E[u]=D;break;case v:if(!m(D)){B.enabled=!1;return}D=+D;if(0>D||24<D){B.enabled=!1;return}B.bounds[u]=E[u]=D}!1===A.autorange&&(A=A.range,A[0]<A[1]?E[0]<
A[0]&&E[1]>A[1]&&(B.enabled=!1):E[0]>A[0]&&E[1]<A[1]&&(B.enabled=!1))}else(E=z("values"))&&E.length?z("dvalue"):B.enabled=!1}}function q(y){if("string"===typeof y)return w[y.substr(0,3).toLowerCase()]}var m=b("fast-isnumeric"),l=b("../../registry"),a=b("../../lib"),h=b("../array_container_defaults"),g=b("./layout_attributes"),n=b("./tick_value_defaults"),p=b("./tick_mark_defaults"),d=b("./tick_label_defaults"),e=b("./category_order_defaults"),f=b("./line_grid_defaults"),k=b("./set_convert"),t=b("./constants").WEEKDAY_PATTERN,
v=b("./constants").HOUR_PATTERN;N.exports=function(y,B,A,z,E){var C=z.letter,u=z.font||{},D=z.splomStash||{},G=A("visible",!z.visibleDflt),J=B._template||{};J=B.type||J.type||"-";var L;"date"===J&&(l.getComponentMethod("calendars","handleDefaults")(y,B,"calendar",z.calendar),z.noTicklabelmode||(L=A("ticklabelmode")));z.noTicklabelposition&&"multicategory"!==J||a.coerce(y,B,{ticklabelposition:{valType:"enumerated",dflt:"outside",values:"period"===L?["outside","inside"]:"x"===C?"outside;inside;outside left;inside left;outside right;inside right".split(";"):
"outside;inside;outside top;inside top;outside bottom;inside bottom".split(";")}},"ticklabelposition");k(B,E);(L=!B.isValidRange(y.range))&&z.reverseDflt&&(L="reversed");!A("autorange",L)||"linear"!==J&&"-"!==J||A("rangemode");A("range");B.cleanRange();e(y,B,A,z);"category"===J||z.noHover||A("hoverformat");L=A("color");var K=L!==g.color.dflt?L:u.color;C=D.label||E._dfltTitle[C];d(y,B,A,J,z,{pass:1});if(!G)return B;A("title.text",C);a.coerceFont(A,"title.font",{family:u.family,size:Math.round(1.2*
u.size),color:K});n(y,B,A,J);d(y,B,A,J,z,{pass:2});p(y,B,A,z);f(y,B,A,{dfltColor:L,bgColor:z.bgColor,showGrid:z.showGrid,attributes:g});(B.showline||B.ticks)&&A("mirror");z.automargin&&A("automargin");u="multicategory"===J;if(!z.noTickson&&("category"===J||u)&&(B.ticks||B.showgrid)){var H;u&&(H="boundaries");"boundaries"===A("tickson",H)&&delete B.ticklabelposition}u&&A("showdividers")&&(A("dividercolor"),A("dividerwidth"));if("date"===J)if(h(y,B,{name:"rangebreaks",inclusionAttr:"enabled",handleItemDefaults:r}),
B.rangebreaks.length){for(y=0;y<B.rangebreaks.length;y++)if(B.rangebreaks[y].pattern===t){B._hasDayOfWeekBreaks=!0;break}k(B,E);if(E._has("scattergl")||E._has("splom"))for(E=0;E<z.data.length;E++)if(y=z.data[E],"scattergl"===y.type||"splom"===y.type)y.visible=!1,a.warn(y.type+" traces do not work on axes with rangebreaks. Setting trace "+y.index+" to `visible: false`.")}else delete B.rangebreaks;return B};var w={sun:1,mon:2,tue:3,wed:4,thu:5,fri:6,sat:7}},{"../../lib":778,"../../registry":911,"../array_container_defaults":823,
"./category_order_defaults":832,"./constants":834,"./layout_attributes":842,"./line_grid_defaults":844,"./set_convert":848,"./tick_label_defaults":849,"./tick_mark_defaults":850,"./tick_value_defaults":851,"fast-isnumeric":241}],831:[function(b,N,I){function r(l,a){if(a&&a.length)for(var h=0;h<a.length;h++)if(a[h][l])return!0;return!1}var q=b("../../registry"),m=b("./constants");I.id2name=function(l){if("string"===typeof l&&l.match(m.AX_ID_PATTERN)){var a=l.split(" ")[0].substr(1);"1"===a&&(a="");
return l.charAt(0)+"axis"+a}};I.name2id=function(l){if(l.match(m.AX_NAME_PATTERN)){var a=l.substr(5);"1"===a&&(a="");return l.charAt(0)+a}};I.cleanId=function(l,a,h){var g=/( domain)$/.test(l);if(!("string"!==typeof l||!l.match(m.AX_ID_PATTERN)||a&&l.charAt(0)!==a||g&&!h))return a=l.split(" ")[0].substr(1).replace(/^0+/,""),"1"===a&&(a=""),l.charAt(0)+a+(g&&h?" domain":"")};I.list=function(l,a,h){var g=l._fullLayout;if(!g)return[];var n=I.listIds(l,a);l=Array(n.length);var p;for(p=0;p<n.length;p++){var d=
n[p];l[p]=g[d.charAt(0)+"axis"+d.substr(1)]}if(!h)for(h=g._subplots.gl3d||[],p=0;p<h.length;p++)n=g[h[p]],a?l.push(n[a+"axis"]):l.push(n.xaxis,n.yaxis,n.zaxis);return l};I.listIds=function(l,a){l=l._fullLayout;if(!l)return[];l=l._subplots;return a?l[a+"axis"]:l.xaxis.concat(l.yaxis)};I.getFromId=function(l,a,h){l=l._fullLayout;a=void 0===a||"string"!==typeof a?a:a.replace(" domain","");"x"===h?a=a.replace(/y[0-9]*/,""):"y"===h&&(a=a.replace(/x[0-9]*/,""));return l[I.id2name(a)]};I.getFromTrace=function(l,
a,h){var g=l._fullLayout,n=null;q.traceIs(a,"gl3d")?(l=a.scene,"scene"===l.substr(0,5)&&(n=g[l][h+"axis"])):n=I.getFromId(l,a[h+"axis"]||h);return n};I.idSort=function(l,a){var h=l.charAt(0),g=a.charAt(0);return h!==g?h>g?1:-1:+(l.substr(1)||1)-+(a.substr(1)||1)};I.ref2id=function(l){return/^[xyz]/.test(l)?l.split(" ")[0]:!1};I.isLinked=function(l,a){return r(a,l._axisMatchGroups)||r(a,l._axisConstraintGroups)}},{"../../registry":911,"./constants":834}],832:[function(b,N,I){N.exports=function(r,q,
m,l){if("category"===q.type){r=r.categoryarray;r=Array.isArray(r)&&0<r.length;var a;r&&(a="array");a=m("categoryorder",a);var h;"array"===a&&(h=m("categoryarray"));r||"array"!==a||(a=q.categoryorder="trace");if("trace"===a)q._initialCategories=[];else if("array"===a)q._initialCategories=h.slice();else{m=l.dataAttr||q._id.charAt(0);h={};var g;if(l.axData)r=l.axData;else for(r=[],g=0;g<l.data.length;g++){var n=l.data[g];n[m+"axis"]===q._id&&r.push(n)}for(g=0;g<r.length;g++)for(n=r[g][m],l=0;l<n.length;l++){var p=
n[l];null!==p&&void 0!==p&&(h[p]=1)}h=Object.keys(h).sort();"category ascending"===a?q._initialCategories=h:"category descending"===a&&(q._initialCategories=h.reverse())}}}},{}],833:[function(b,N,I){var r=b("fast-isnumeric"),q=b("../../lib");b=b("../../constants/numerical");var m=b.ONEDAY,l=b.ONEWEEK;I.dtick=function(a,h){var g="log"===h,n="date"===h,p="category"===h;h=n?m:1;if(!a)return h;if(r(a))return a=Number(a),0>=a?h:p?Math.max(1,Math.round(a)):n?Math.max(.1,a):a;if("string"!==typeof a||!n&&
!g)return h;p=a.charAt(0);var d=a.substr(1);d=r(d)?Number(d):0;return 0>=d||!(n&&"M"===p&&d===Math.round(d)||g&&"L"===p||g&&"D"===p&&(1===d||2===d))?h:a};I.tick0=function(a,h,g,n){if("date"===h)return q.cleanDate(a,q.dateTick0(g,0===n%l?1:0));if("D1"!==n&&"D2"!==n)return r(a)?Number(a):0}},{"../../constants/numerical":753,"../../lib":778,"fast-isnumeric":241}],834:[function(b,N,I){b=b("../../lib/regex").counter;N.exports={idRegex:{x:b("x","( domain)?"),y:b("y","( domain)?")},attrRegex:b("[xy]axis"),
xAxisMatch:b("xaxis"),yAxisMatch:b("yaxis"),AX_ID_PATTERN:/^[xyz][0-9]*( domain)?$/,AX_NAME_PATTERN:/^[xyz]axis[0-9]*$/,SUBPLOT_PATTERN:/^x([0-9]*)y([0-9]*)$/,HOUR_PATTERN:"hour",WEEKDAY_PATTERN:"day of week",MINDRAG:8,MINSELECT:12,MINZOOM:20,DRAGGERSIZE:20,BENDPX:1.5,REDRAWDELAY:50,SELECTDELAY:100,SELECTID:"-select",DFLTRANGEX:[-1,6],DFLTRANGEY:[-1,4],traceLayerClasses:"imagelayer heatmaplayer contourcarpetlayer contourlayer funnellayer waterfalllayer barlayer carpetlayer violinlayer boxlayer ohlclayer scattercarpetlayer scatterlayer".split(" "),
clipOnAxisFalseQuery:[".scatterlayer",".barlayer",".funnellayer",".waterfalllayer"],layerValue2layerClass:{"above traces":"above","below traces":"below"}}},{"../../lib/regex":795}],835:[function(b,N,I){function r(v,w,y){var B=y.axIds,A=y.layoutOut,z=y.hasImage;y=A._axisConstraintGroups;var E=A._axisMatchGroups,C=w._id,u=C.charAt(0),D=((A._splomAxes||{})[u]||{})[C]||{};C=w._id;u="x"===C.charAt(0);w._matchGroup=null;w._constraintGroup=null;g.coerce(v,w,d,"constrain",z?"domain":"range");g.coerce(v,w,
{constraintoward:{valType:"enumerated",values:u?["left","center","right"]:["bottom","middle","top"],dflt:u?"center":"middle"}},"constraintoward");var G=w.type,J,L=[];for(J=0;J<B.length;J++){var K=B[J];K!==C&&A[p(K)].type===G&&L.push(K)}if(G=m(y,C)){var H=[];for(J=0;J<L.length;J++)K=L[J],G[K]||H.push(K);L=H}J=L.length;var Q,M;J&&(v.matches||D.matches)&&(Q=g.coerce(v,w,{matches:{valType:"enumerated",values:L,dflt:-1!==L.indexOf(D.matches)?D.matches:void 0}},"matches"));z=z&&!u?w.anchor:void 0;J&&!Q&&
(v.scaleanchor||z)&&(M=g.coerce(v,w,{scaleanchor:{valType:"enumerated",values:L}},"scaleanchor",z));Q?(w._matchGroup=l(E,C,Q,1),E=A[p(Q)],A=q(A,w)/q(A,E),u!==("x"===Q.charAt(0))&&(A=(u?"x":"y")+A),l(y,C,Q,A)):v.matches&&-1!==B.indexOf(v.matches)&&g.warn("ignored "+w._name+'.matches: "'+v.matches+'" to avoid an infinite loop');M?(v=g.coerce(v,w,d,"scaleratio",void 0),v||(v=w.scaleratio=1),l(y,C,M,v)):v.scaleanchor&&-1!==B.indexOf(v.scaleanchor)&&g.warn("ignored "+w._name+'.scaleanchor: "'+v.scaleanchor+
'" to avoid either an infinite loop and possibly inconsistent scaleratios, or because this axis declares a *matches* constraint.')}function q(v,w){var y=w.domain;y||(y=v[p(w.overlaying)].domain);return y[1]-y[0]}function m(v,w){for(var y=0;y<v.length;y++)if(v[y][w])return v[y];return null}function l(v,w,y,B){var A,z=m(v,w);if(null===z){z={};z[w]=1;var E=v.length;v.push(z)}else E=v.indexOf(z);w=Object.keys(z);for(A=0;A<v.length;A++){var C=v[A];if(A!==E&&C[y]){var u=C[y];for(A=0;A<w.length;A++)y=w[A],
C[y]=a(u,a(B,z[y]));v.splice(E,1);return}}if(1!==B)for(A=0;A<w.length;A++)v=w[A],z[v]=a(B,z[v]);z[y]=1}function a(v,w){var y="",B="";if("string"===typeof v){y=v.match(/^[xy]*/)[0];var A=y.length;v=+v.substr(A)}if("string"===typeof w){B=w.match(/^[xy]*/)[0];var z=B.length;w=+w.substr(z)}var E=v*w;return A||z?A&&z&&y.charAt(0)!==B.charAt(0)?A===z?E:(A>z?y.substr(z):B.substr(A))+E:y+B+v*w:E}function h(v,w){var y=v._inputDomain,B=y[0]+(y[1]-y[0])*t[v.constraintoward];v.domain=v._input.domain=[B+(y[0]-
B)/w,B+(y[1]-B)/w];v.setScale()}var g=b("../../lib"),n=b("./autorange"),p=b("./axis_ids").id2name,d=b("./layout_attributes"),e=b("./scale_zoom"),f=b("./set_convert"),k=b("../../constants/numerical").ALMOST_EQUAL,t=b("../../constants/alignment").FROM_BL;I.handleDefaults=function(v,w,y){function B(O,U){for(u=0;u<O.length;u++)for(D in K=O[u],K)w[p(D)][U]=K}function A(){P=L[M];"rangebreaks"===M&&(Q=L._hasDayOfWeekBreaks)}var z=y.axIds,E=y.axHasImage,C=w._axisConstraintGroups=[];y=w._axisMatchGroups=[];
var u,D;for(u=0;u<z.length;u++){var G=p(z[u]);var J=v[G];var L=w[G];r(J,L,{axIds:z,layoutOut:w,hasImage:E[G]})}B(y,"_matchGroup");for(u=0;u<C.length;u++){var K=C[u];for(D in K)if(L=w[p(D)],L.fixedrange){for(var H in K)G=p(H),!1===(v[G]||{}).fixedrange&&g.warn("fixedrange was specified as false for axis "+G+" but was overridden because another axis in its constraint group has fixedrange true"),w[G].fixedrange=!0;break}}for(u=0;u<C.length;){K=C[u];for(D in K){L=w[p(D)];L._matchGroup&&Object.keys(L._matchGroup).length===
Object.keys(K).length&&(C.splice(u,1),u--);break}u++}B(C,"_constraintGroup");H="constrain range autorange rangemode rangebreaks categoryorder categoryarray".split(" ");var Q=z=!1;for(u=0;u<y.length;u++)for(K=y[u],C=0;C<H.length;C++){var M=H[C];var P=null;for(D in K)if(G=p(D),J=v[G],L=w[G],M in L){if(!L.matches){var T=L;if(M in J){A();break}}null===P&&M in J&&A()}"range"===M&&P&&(z=!0);"autorange"===M&&null===P&&z&&(P=!1);null===P&&M in T&&(P=T[M]);if(null!==P)for(D in K)L=w[p(D)],L[M]="range"===M?
P.slice():P,"rangebreaks"===M&&(L._hasDayOfWeekBreaks=Q,f(L,w))}};I.enforce=function(v){var w=v._fullLayout,y=w._axisConstraintGroups||[],B;for(B=0;B<y.length;B++){var A=y[B];var z=w._size;z=z.h/z.w;for(var E={},C=Object.keys(A),u=0;u<C.length;u++){var D=C[u];var G=A[D];if("string"===typeof G){var J=G.match(/^[xy]*/)[0];var L=J.length;G=+G.substr(L);J="y"===J.charAt(0)?z:1/z;for(var K=0;K<L;K++)G*=J}E[D]=G}L=E;E=Object.keys(L);K=Infinity;var H=0;C=Infinity;u={};D={};var Q=!1;for(A=0;A<E.length;A++)J=
E[A],D[J]=z=w[p(J)],z._inputDomain?z.domain=z._inputDomain.slice():z._inputDomain=z.domain.slice(),z._inputRange||(z._inputRange=z.range.slice()),z.setScale(),u[J]=G=Math.abs(z._m)/L[J],K=Math.min(K,G),"domain"!==z.constrain&&z._constraintShrinkable||(C=Math.min(C,G)),delete z._constraintShrinkable,H=Math.max(H,G),"domain"===z.constrain&&(Q=!0);if(!(K>k*H)||Q)for(A=0;A<E.length;A++)if(J=E[A],G=u[J],z=D[J],L=z.constrain,G!==C||"domain"===L)if(G/=C,"range"===L)e(z,G);else if(L=z._inputDomain,J=(z.domain[1]-
z.domain[0])/(L[1]-L[0]),K=(z.r2l(z.range[1])-z.r2l(z.range[0]))/(z.r2l(z._inputRange[1])-z.r2l(z._inputRange[0])),G/=J,1>G*K)z.domain=z._input.domain=L.slice(),e(z,G);else{1>K&&(z.range=z._input.range=z._inputRange.slice(),G*=K);if(z.autorange){L=z.r2l(z.range[0]);J=z.r2l(z.range[1]);var M=(L+J)/2;H=K=M;Q=Math.abs(J-M);var P=M-Q*G*1.0001;M+=Q*G*1.0001;var T=n.makePadFn(w,z,0),O=n.makePadFn(w,z,1);h(z,G);var U=Math.abs(z._m),S=n.concatExtremes(v,z),X=S.min;S=S.max;var ba;for(ba=0;ba<X.length;ba++){var ca=
X[ba].val-T(X[ba])/U;ca>P&&ca<K&&(K=ca)}for(ba=0;ba<S.length;ba++)ca=S[ba].val+O(S[ba])/U,ca<M&&ca>H&&(H=ca);G/=(H-K)/(2*Q);K=z.l2r(K);H=z.l2r(H);z.range=z._input.range=L<J?[K,H]:[H,K]}h(z,G)}}};I.getAxisGroup=function(v,w){v=v._axisMatchGroups;for(var y=0;y<v.length;y++)if(v[y][w])return"g"+y;return w};I.clean=function(v,w){if(w._inputDomain){var y=!1,B=w._id;v=v._fullLayout._axisConstraintGroups;for(var A=0;A<v.length;A++)if(v[A][B]){y=!0;break}y&&"domain"===w.constrain||(w._input.domain=w.domain=
w._inputDomain,delete w._inputDomain)}}},{"../../constants/alignment":745,"../../constants/numerical":753,"../../lib":778,"./autorange":827,"./axis_ids":831,"./layout_attributes":842,"./scale_zoom":846,"./set_convert":848}],836:[function(b,N,I){function r(ma,qa,pa,na){qa=C.ensureSingle(ma.draglayer,qa,pa,function(ka){ka.classed("drag",!0).style({fill:"transparent","stroke-width":0}).attr("data-subplot",ma.id)});qa.call(H,na);return qa.node()}function q(ma,qa,pa,na,ka,ua,va){ma=r(ma,"rect",qa,pa);
B.select(ma).call(J.setRect,na,ka,ua,va);return ma}function m(ma,qa){for(var pa=0;pa<ma.length;pa++)if(!ma[pa].fixedrange)return qa;return""}function l(ma,qa){var pa=ma.range[qa];qa=Math.abs(pa-ma.range[1-qa]);if("date"===ma.type)return pa;if("log"===ma.type)return ma=Math.ceil(Math.max(0,-Math.log(qa)/Math.LN10))+3,B.format("."+ma+"g")(Math.pow(10,pa));ma=Math.floor(Math.log(Math.abs(pa))/Math.LN10)-Math.floor(Math.log(qa)/Math.LN10)+4;return B.format("."+String(ma)+"g")(pa)}function a(ma,qa,pa,
na,ka){for(var ua=0;ua<ma.length;ua++){var va=ma[ua];if(!va.fixedrange)if(va.rangebreaks){var Ca="y"===va._id.charAt(0),Ma=Ca?1-pa:pa;na[va._name+".range[0]"]=va.l2r(va.p2l((Ca?1-qa:qa)*va._length));na[va._name+".range[1]"]=va.l2r(va.p2l(Ma*va._length))}else Ca=va._rl[0],Ma=va._rl[1]-Ca,na[va._name+".range[0]"]=va.l2r(Ca+Ma*qa),na[va._name+".range[1]"]=va.l2r(Ca+Ma*pa)}ka&&ka.length&&(ma=(qa+(1-pa))/2,a(ka,ma,1-ma,na,[]))}function h(ma,qa){for(var pa=0;pa<ma.length;pa++){var na=ma[pa];if(!na.fixedrange)if(na.rangebreaks){var ka=
na._length,ua=na.p2l(0+qa)-na.p2l(0);ka=na.p2l(ka+qa)-na.p2l(ka);ua=(ua+ka)/2;na.range=[na.l2r(na._rl[0]-ua),na.l2r(na._rl[1]-ua)]}else na.range=[na.l2r(na._rl[0]-qa/na._m),na.l2r(na._rl[1]-qa/na._m)]}}function g(ma,qa,pa){return ma?"nsew"===ma?pa?"":"pan"===qa?"move":"crosshair":ma.toLowerCase()+"-resize":"pointer"}function n(ma,qa,pa,na,ka){return ma.append("path").attr("class","zoombox").style({fill:.2<qa?"rgba(0,0,0,0)":"rgba(255,255,255,0)","stroke-width":0}).attr("transform",u(pa,na)).attr("d",
ka+"Z")}function p(ma,qa,pa){return ma.append("path").attr("class","zoombox-corners").style({fill:G.background,stroke:G.defaultLine,"stroke-width":1,opacity:0}).attr("transform",u(qa,pa)).attr("d","M0,0Z")}function d(ma,qa,pa,na,ka,ua){ma.attr("d",na+"M"+pa.l+","+pa.t+"v"+pa.h+"h"+pa.w+"v-"+pa.h+"h-"+pa.w+"Z");e(ma,qa,ka,ua)}function e(ma,qa,pa,na){pa||(ma.transition().style("fill",.2<na?"rgba(0,0,0,0.4)":"rgba(255,255,255,0.3)").duration(200),qa.transition().style("opacity",1).duration(200))}function f(ma){B.select(ma).selectAll(".zoombox,.js-zoombox-backdrop,.js-zoombox-menu,.zoombox-corners").remove()}
function k(ma){sa&&ma.data&&ma._context.showTips&&(C.notifier(C._(ma,"Double-click to zoom back out"),"long"),sa=!1)}function t(ma){var qa=Math.floor(Math.min(ma.b-ma.t,ma.r-ma.l,oa)/2);return"M"+(ma.l-3.5)+","+(ma.t-.5+qa)+"h3v"+-qa+"h"+qa+"v-3h-"+(qa+3)+"ZM"+(ma.r+3.5)+","+(ma.t-.5+qa)+"h-3v"+-qa+"h"+-qa+"v-3h"+(qa+3)+"ZM"+(ma.r+3.5)+","+(ma.b+.5-qa)+"h-3v"+qa+"h"+-qa+"v3h"+(qa+3)+"ZM"+(ma.l-3.5)+","+(ma.b+.5-qa)+"h3v"+qa+"h"+qa+"v3h-"+(qa+3)+"Z"}function v(ma,qa,pa,na,ka){for(var ua=!1,va={},Ca=
{},Ma,Ua,eb,fb,nb=(ka||{}).xaHash,cb=(ka||{}).yaHash,$a=0;$a<qa.length;$a++){var jb=qa[$a];for(Ma in pa)if(jb[Ma]){for(eb in jb)ka&&(nb[eb]||cb[eb])||("x"===eb.charAt(0)?pa:na)[eb]||(va[eb]=Ma);for(Ua in na)ka&&(nb[Ua]||cb[Ua])||!jb[Ua]||(ua=!0)}for(Ua in na)if(jb[Ua])for(fb in jb)ka&&(nb[fb]||cb[fb])||("x"===fb.charAt(0)?pa:na)[fb]||(Ca[fb]=Ua)}ua&&(C.extendFlat(va,Ca),Ca={});qa={};pa=[];for(eb in va)na=X(ma,eb),pa.push(na),qa[na._id]=na;eb={};na=[];for(fb in Ca)ka=X(ma,fb),na.push(ka),eb[ka._id]=
ka;return{xaHash:qa,yaHash:eb,xaxes:pa,yaxes:na,xLinks:va,yLinks:Ca,isSubplotConstrained:ua}}function w(ma,qa){if(z){var pa=void 0!==ma.onwheel?"wheel":"mousewheel";ma._onwheel&&ma.removeEventListener(pa,ma._onwheel);ma._onwheel=qa;ma.addEventListener(pa,qa,{passive:!1})}else void 0!==ma.onwheel?ma.onwheel=qa:void 0!==ma.onmousewheel?ma.onmousewheel=qa:ma.isAddedWheelEvent||(ma.isAddedWheelEvent=!0,ma.addEventListener("wheel",qa,{passive:!1}))}function y(ma){var qa=[],pa;for(pa in ma)qa.push(ma[pa]);
return qa}var B=b("d3"),A=b("tinycolor2"),z=b("has-passive-events"),E=b("../../registry"),C=b("../../lib"),u=C.strTranslate,D=b("../../lib/svg_text_utils"),G=b("../../components/color"),J=b("../../components/drawing"),L=b("../../components/fx"),K=b("./axes"),H=b("../../lib/setcursor"),Q=b("../../components/dragelement");I=b("../../components/dragelement/helpers");var M=I.selectingOrDrawing,P=I.freeMode,T=b("../../constants/alignment").FROM_TL,O=b("../../lib/clear_gl_canvases"),U=b("../../plot_api/subroutines").redrawReglTraces,
S=b("../plots"),X=b("./axis_ids").getFromId,ba=b("./select").prepSelect,ca=b("./select").clearSelect,ia=b("./select").selectOnClick,ja=b("./scale_zoom"),la=b("./constants"),da=la.MINDRAG,oa=la.MINZOOM,sa=!0;N.exports={makeDragBox:function(ma,qa,pa,na,ka,ua,va,Ca){function Ma(){ib=qa.xaxis;qb=qa.yaxis;mb=ib._length;ub=qb._length;Va=ib._offset;Za=qb._offset;sb={};sb[ib._id]=ib;Ba={};Ba[qb._id]=qb;if(va&&Ca)for(var ec=qa.overlays,Fc=0;Fc<ec.length;Fc++){var dd=ec[Fc].xaxis;sb[dd._id]=dd;dd=ec[Fc].yaxis;
Ba[dd._id]=dd}Fa=y(sb);La=y(Ba);Ob=m(Fa,Ca);Wb=m(La,va);Bc=!Wb&&!Ob;Kb=v(ma,ma._fullLayout._axisMatchGroups,sb,Ba);Pb=v(ma,ma._fullLayout._axisConstraintGroups,sb,Ba,Kb);ec=Pb.isSubplotConstrained||Kb.isSubplotConstrained;Kc=Ca||ec;Nc=va||ec;ec=ma._fullLayout;bd=ec._has("scattergl");kb=ec._has("splom");$b=ec._has("svg")}function Ua(ec,Fc){var dd=vb.gd;if(0<=dd._fullLayout._activeShapeIndex)dd._fullLayout._deactivateShape(dd);else{var Ac=dd._fullLayout.clickmode;f(dd);2!==ec||Na||Ea();if(Ta)-1<Ac.indexOf("select")&&
ia(Fc,dd,Fa,La,qa.id,vb),-1<Ac.indexOf("event")&&L.click(dd,Fc,qa.id);else if(1===ec&&Na){var Jc=va?qb:ib;ec="s"===va||"w"===Ca?0:1;var gd=Jc._name+".range["+ec+"]";ec=l(Jc,ec);Fc="left";Ac="middle";if(!Jc.fixedrange&&(va?(Ac="n"===va?"top":"bottom","right"===Jc.side&&(Fc="right")):"e"===Ca&&(Fc="right"),dd._context.showAxisRangeEntryBoxes))B.select(gb).call(D.makeEditable,{gd:dd,immediate:!0,background:dd._fullLayout.paper_bgcolor,text:String(ec),fill:Jc.tickfont?Jc.tickfont.color:"#444",horizontalAlign:Fc,
verticalAlign:Ac}).on("edit",function(Vc){Vc=Jc.d2r(Vc);void 0!==Vc&&E.call("_guiRelayout",dd,gd,Vc)})}}}function eb(ec,Fc,dd){ec=gb.getBoundingClientRect();Sb=Fc-ec.left;ic=dd-ec.top;ma._fullLayout._calcInverseTransform(ma);Fc=C.apply3DTransform(ma._fullLayout._invTransform)(Sb,ic);Sb=Fc[0];ic=Fc[1];ac={l:Sb,r:Sb,w:0,t:ic,b:ic,h:0};bc=ma._hmpixcount?ma._hmlumcount/ma._hmpixcount:A(ma._fullLayout.plot_bgcolor).getLuminance();Ub="M0,0H"+mb+"V"+ub+"H0V0";wb=!1;Lb="xy";Yb=!1;Bb=n(Ka,bc,Va,Za,Ub);Mb=
p(Ka,Va,Za)}function fb(ec,Fc){function dd(){Lb="";ac.r=ac.l;ac.t=ac.b;Mb.attr("d","M0,0Z")}if(ma._transitioningWithDuration)return!1;ec=Math.max(0,Math.min(mb,rc*ec+Sb));Fc=Math.max(0,Math.min(ub,xc*Fc+ic));var Ac=Math.abs(ec-Sb),Jc=Math.abs(Fc-ic);ac.l=Math.min(Sb,ec);ac.r=Math.max(Sb,ec);ac.t=Math.min(ic,Fc);ac.b=Math.max(ic,Fc);Pb.isSubplotConstrained?Ac>oa||Jc>oa?(Lb="xy",Ac/mb>Jc/ub?(Jc=Ac*ub/mb,ic>Fc?ac.t=ic-Jc:ac.b=ic+Jc):(Ac=Jc*mb/ub,Sb>ec?ac.l=Sb-Ac:ac.r=Sb+Ac),Mb.attr("d",t(ac))):dd():
Kb.isSubplotConstrained?Ac>oa||Jc>oa?(Lb="xy",ec=Math.min(ac.l/mb,(ub-ac.b)/ub),Fc=Math.max(ac.r/mb,(ub-ac.t)/ub),ac.l=ec*mb,ac.r=Fc*mb,ac.b=(1-ec)*ub,ac.t=(1-Fc)*ub,Mb.attr("d",t(ac))):dd():!Wb||Jc<Math.min(Math.max(.6*Ac,da),oa)?Ac<da||!Ob?dd():(ac.t=0,ac.b=ub,Lb="x",Mb.attr("d","M"+(ac.l-.5)+","+(ic-oa-.5)+"h-3v"+(2*oa+1)+"h3ZM"+(ac.r+.5)+","+(ic-oa-.5)+"h3v"+(2*oa+1)+"h-3Z")):!Ob||Ac<Math.min(.6*Jc,oa)?(ac.l=0,ac.r=mb,Lb="y",Mb.attr("d","M"+(Sb-oa-.5)+","+(ac.t-.5)+"v-3h"+(2*oa+1)+"v3ZM"+(Sb-
oa-.5)+","+(ac.b+.5)+"v3h"+(2*oa+1)+"v-3Z")):(Lb="xy",Mb.attr("d",t(ac)));ac.w=ac.r-ac.l;ac.h=ac.b-ac.t;Lb&&(Yb=!0);ma._dragged=Yb;d(Bb,Mb,ac,Ub,wb,bc);nb();ma.emit("plotly_relayouting",gc);wb=!0}function nb(){gc={};if("xy"===Lb||"x"===Lb)a(Fa,ac.l/mb,ac.r/mb,gc,Pb.xaxes),pb("x",gc);if("xy"===Lb||"y"===Lb)a(La,(ub-ac.b)/ub,(ub-ac.t)/ub,gc,Pb.yaxes),pb("y",gc)}function cb(){nb();f(ma);Ia();k(ma)}function $a(ec){function Fc(Vc,Gc,pd){if(!Vc.fixedrange){var md=C.simpleMap(Vc.range,Vc.r2l),rd=md[0]+(md[1]-
md[0])*Gc;Vc.range=md.map(function(re){return Vc.l2r(rd+(re-rd)*pd)})}}if(ma._context._scrollZoom.cartesian||ma._fullLayout._enablescrollzoom)if(vb.plotinfo.selection=!1,ca(ma),ma._transitioningWithDuration)ec.preventDefault(),ec.stopPropagation();else{Ma();clearTimeout(Tc);var dd=-ec.deltaY;isFinite(dd)||(dd=ec.wheelDelta/10);if(isFinite(dd)){dd=Math.exp(-Math.min(Math.max(dd,-20),20)/200);var Ac=ad.draglayer.select(".nsewdrag").node().getBoundingClientRect(),Jc=(ec.clientX-Ac.left)/Ac.width;Ac=
(Ac.bottom-ec.clientY)/Ac.height;var gd;if(Kc){Ca||(Jc=.5);for(gd=0;gd<Fa.length;gd++)Fc(Fa[gd],Jc,dd);pb("x");qc[2]*=dd;qc[0]+=qc[2]*Jc*(1/dd-1)}if(Nc){va||(Ac=.5);for(gd=0;gd<La.length;gd++)Fc(La[gd],Ac,dd);pb("y");qc[3]*=dd;qc[1]+=qc[3]*(1-Ac)*(1/dd-1)}Oa(qc);xa();ma.emit("plotly_relayouting",gc);Tc=setTimeout(function(){qc=[0,0,mb,ub];Ia()},Yc);ec.preventDefault()}else C.log("Did not find wheel motion attributes: ",ec)}}function jb(ec,Fc){function dd(Gc,pd,md){for(var rd=1-pd,re,Ad,Bd=0;Bd<Gc.length;Bd++){var be=
Gc[Bd];if(!be.fixedrange){re=be;Ad=md/be._length;Ad=be._rl[rd]+(be._rl[pd]-be._rl[rd])/(1-(0<=Ad?Math.min(Ad,.9):1/(1/Math.max(Ad,-.3)+3.222)));var le=be.l2r(Ad);!1!==le&&void 0!==le&&(be.range[pd]=le)}}return re._length*(re._rl[pd]-Ad)/(re._rl[pd]-re._rl[rd])}ec*=rc;Fc*=xc;if(!ma._transitioningWithDuration){ma._fullLayout._replotting=!0;if("ew"===Ob||"ns"===Wb){var Ac=Ob?-ec:0,Jc=Wb?-Fc:0;Kb.isSubplotConstrained&&(Ob&&Wb&&(Fc=(ec/mb-Fc/ub)/2,ec=Fc*mb,Fc=-Fc*ub,Ac=-ec,Jc=-Fc),Wb?Ac=-Jc*mb/ub:Jc=-Ac*
ub/mb);Ob&&(h(Fa,ec),pb("x"));Wb&&(h(La,Fc),pb("y"));Oa([Ac,Jc,mb,ub])}else{var gd="w"===Ob===("n"===Wb)?1:-1;Ob&&Wb&&(Pb.isSubplotConstrained||Kb.isSubplotConstrained)&&(Fc=(ec/mb+gd*Fc/ub)/2,ec=Fc*mb,Fc=gd*Fc*ub);"w"===Ob?ec=dd(Fa,0,ec):"e"===Ob?ec=dd(Fa,1,-ec):Ob||(ec=0);"n"===Wb?Fc=dd(La,1,Fc):"s"===Wb?Fc=dd(La,0,-Fc):Wb||(Fc=0);Ac="w"===Ob?ec:0;Jc="n"===Wb?Fc:0;if(Pb.isSubplotConstrained&&!Kb.isSubplotConstrained||Kb.isSubplotConstrained&&Ob&&Wb&&0<gd){if(Kb.isSubplotConstrained||!Ob&&1===Wb.length){for(gd=
0;gd<Fa.length;gd++)Fa[gd].range=Fa[gd]._r.slice(),ja(Fa[gd],1-Fc/ub);ec=Fc*mb/ub;Ac=ec/2}if(Kb.isSubplotConstrained||!Wb&&1===Ob.length){for(gd=0;gd<La.length;gd++)La[gd].range=La[gd]._r.slice(),ja(La[gd],1-ec/mb);Fc=ec*ub/mb;Jc=Fc/2}}Kb.isSubplotConstrained&&Wb||pb("x");Kb.isSubplotConstrained&&Ob||pb("y");gd=mb-ec;var Vc=ub-Fc;!Kb.isSubplotConstrained||Ob&&Wb||(Ob?(Jc=Ac?0:ec*ub/mb,Vc=gd*ub/mb):(Ac=Jc?0:Fc*mb/ub,gd=Vc*mb/ub));Oa([Ac,Jc,gd,Vc])}xa();ma.emit("plotly_relayouting",gc)}}function pb(ec,
Fc){var dd=Kb.isSubplotConstrained?{x:La,y:Fa}[ec]:Kb[ec+"axes"];ec=Kb.isSubplotConstrained?{x:Fa,y:La}[ec]:[];for(var Ac=0;Ac<dd.length;Ac++){var Jc=dd[Ac],gd=Jc._id;gd=Kb.xLinks[gd]||Kb.yLinks[gd];if(gd=ec[0]||sb[gd]||Ba[gd])Fc?(Fc[Jc._name+".range[0]"]=Fc[gd._name+".range[0]"],Fc[Jc._name+".range[1]"]=Fc[gd._name+".range[1]"]):Jc.range=gd.range.slice()}}function xa(){function ec(Jc){for(dd=0;dd<Jc.length;dd++)Jc[dd].fixedrange||Fc.push(Jc[dd]._id)}var Fc=[],dd;Kc&&(ec(Fa),ec(Pb.xaxes),ec(Kb.xaxes));
Nc&&(ec(La),ec(Pb.yaxes),ec(Kb.yaxes));gc={};for(dd=0;dd<Fc.length;dd++){var Ac=X(ma,Fc[dd]);K.drawOne(ma,Ac,{skipTitle:!0});gc[Ac._name+".range[0]"]=Ac.range[0];gc[Ac._name+".range[1]"]=Ac.range[1]}K.redrawComponents(ma,Fc)}function Ea(){if(!ma._transitioningWithDuration){var ec=ma._context.doubleClick,Fc=[];Ob&&(Fc=Fc.concat(Fa));Wb&&(Fc=Fc.concat(La));Kb.xaxes&&(Fc=Fc.concat(Kb.xaxes));Kb.yaxes&&(Fc=Fc.concat(Kb.yaxes));var dd={},Ac;if("reset+autosize"===ec)for(ec="autosize",Ac=0;Ac<Fc.length;Ac++){var Jc=
Fc[Ac];if(Jc._rangeInitial&&(Jc.range[0]!==Jc._rangeInitial[0]||Jc.range[1]!==Jc._rangeInitial[1])||!Jc._rangeInitial&&!Jc.autorange){ec="reset";break}}if("autosize"===ec)for(Ac=0;Ac<Fc.length;Ac++)Jc=Fc[Ac],Jc.fixedrange||(dd[Jc._name+".autorange"]=!0);else if("reset"===ec){if(Ob||Pb.isSubplotConstrained)Fc=Fc.concat(Pb.xaxes);Wb&&!Pb.isSubplotConstrained&&(Fc=Fc.concat(Pb.yaxes));Pb.isSubplotConstrained&&(Ob?Wb||(Fc=Fc.concat(La)):Fc=Fc.concat(Fa));for(Ac=0;Ac<Fc.length;Ac++)Jc=Fc[Ac],Jc.fixedrange||
(Jc._rangeInitial?(ec=Jc._rangeInitial,dd[Jc._name+".range[0]"]=ec[0],dd[Jc._name+".range[1]"]=ec[1]):dd[Jc._name+".autorange"]=!0)}ma.emit("plotly_doubleclick",null);E.call("_guiRelayout",ma,dd)}}function Ia(){Oa([0,0,mb,ub]);C.syncOrAsync([S.previousPromises,function(){ma._fullLayout._replotting=!1;E.call("_guiRelayout",ma,gc)}],ma)}function Oa(ec){var Fc=ma._fullLayout,dd=Fc._plots;Fc=Fc._subplots.cartesian;var Ac;kb&&E.subplotsRegistry.splom.drag(ma);if(bd)for(Ac=0;Ac<Fc.length;Ac++){var Jc=dd[Fc[Ac]];
var gd=Jc.xaxis;var Vc=Jc.yaxis;if(Jc._scene){var Gc=C.simpleMap(gd.range,gd.r2l);Vc=C.simpleMap(Vc.range,Vc.r2l);Jc._scene.update({range:[Gc[0],Vc[0],Gc[1],Vc[1]]})}}if(kb||bd)O(ma),U(ma);if($b){Gc=ec[2]/ib._length;var pd=ec[3]/qb._length;for(Ac=0;Ac<Fc.length;Ac++){Jc=dd[Fc[Ac]];gd=Jc.xaxis;Vc=Jc.yaxis;var md=(Nc||Kb.isSubplotConstrained)&&!Vc.fixedrange&&Ba[Vc._id];if((Kc||Kb.isSubplotConstrained)&&!gd.fixedrange&&sb[gd._id]){var rd=Gc;var re=Ca||Kb.isSubplotConstrained?ec[0]:tb(gd,rd)}else Kb.xaHash[gd._id]?
(rd=Gc,re=ec[0]*gd._length/ib._length):Kb.yaHash[gd._id]?(rd=pd,re="ns"===Wb?-ec[1]*gd._length/qb._length:tb(gd,rd,{n:"top",s:"bottom"}[Wb])):(rd=bb(gd,Gc,pd),re=Xa(gd,rd));if(md){md=pd;var Ad=va||Kb.isSubplotConstrained?ec[1]:tb(Vc,md)}else Kb.yaHash[Vc._id]?(md=pd,Ad=ec[1]*Vc._length/qb._length):Kb.xaHash[Vc._id]?(md=Gc,Ad="ew"===Ob?-ec[0]*Vc._length/ib._length:tb(Vc,md,{e:"right",w:"left"}[Ob])):(md=bb(Vc,Gc,pd),Ad=Xa(Vc,md));if(rd||md){rd||(rd=1);md||(md=1);gd=gd._offset-re/rd;Vc=Vc._offset-Ad/
md;Jc.clipRect.call(J.setTranslate,re,Ad).call(J.setScale,rd,md);Jc.plot.call(J.setTranslate,gd,Vc).call(J.setScale,1/rd,1/md);if(rd!==Jc.xScaleFactor||md!==Jc.yScaleFactor)J.setPointGroupScale(Jc.zoomScalePts,rd,md),J.setTextPointsScale(Jc.zoomScaleTxt,rd,md);J.hideOutsideRangePoints(Jc.clipOnAxisFalseTraces,Jc);Jc.xScaleFactor=rd;Jc.yScaleFactor=md}}}}function bb(ec,Fc,dd){return ec.fixedrange?0:Kc&&Pb.xaHash[ec._id]?Fc:Nc&&(Pb.isSubplotConstrained?Pb.xaHash:Pb.yaHash)[ec._id]?dd:0}function Xa(ec,
Fc){return Fc?(ec.range=ec._r.slice(),ja(ec,Fc),tb(ec,Fc)):0}function tb(ec,Fc,dd){return ec._length*(1-Fc)*T[dd||ec.constraintoward||"middle"]}var Ka=ma._fullLayout._zoomlayer,Ta="nsew"===va+Ca,Na=1===(va+Ca).length,ib,qb,sb,Ba,Fa,La,Va,Za,mb,ub,Pb,Kb,Ob,Wb,Bc,Kc,Nc,bd,kb,$b,gc,rc,xc;Ma();var Rc=g(Wb+Ob,ma._fullLayout.dragmode,Ta),gb=q(qa,va+Ca+"drag",Rc,pa,na,ka,ua);if(Bc&&!Ta)return gb.onmousedown=null,gb.style.pointerEvents="none",gb;var vb={element:gb,gd:ma,plotinfo:qa,prepFn:function(ec,Fc,
dd){var Ac=vb.dragmode,Jc=ma._fullLayout.dragmode;Jc!==Ac&&(vb.dragmode=Jc);Ma();rc=ma._fullLayout._invScaleX;xc=ma._fullLayout._invScaleY;Bc||(Ta?ec.shiftKey?"pan"===Jc?Jc="zoom":M(Jc)||(Jc="pan"):ec.ctrlKey&&(Jc="pan"):Jc="pan");P(Jc)?vb.minDrag=1:vb.minDrag=void 0;M(Jc)?(vb.xaxes=Fa,vb.yaxes=La,ba(ec,Fc,dd,vb,Jc)):(vb.clickFn=Ua,M(Ac)&&(vb.plotinfo.selection=!1,ca(ma)),Bc||("zoom"===Jc?(vb.moveFn=fb,vb.doneFn=cb,vb.minDrag=1,eb(ec,Fc,dd)):"pan"===Jc&&(vb.moveFn=jb,vb.doneFn=Ia)));ma._fullLayout._redrag=
function(){var gd=ma._dragdata;gd&&gd.element===gb&&!M(ma._fullLayout.dragmode)&&(Ma(),Oa([0,0,mb,ub]),vb.moveFn(gd.dx,gd.dy))}}};Q.init(vb);var Sb,ic,ac,bc,Ub,wb,Lb,Bb,Mb,Yb,qc=[0,0,mb,ub],Tc=null,Yc=la.REDRAWDELAY,ad=qa.mainplot?ma._fullLayout._plots[qa.mainplot]:qa;1!==va.length*Ca.length&&w(gb,$a);return gb},makeDragger:r,makeRectDragger:q,makeZoombox:n,makeCorners:p,updateZoombox:d,xyCorners:t,transitionZoombox:e,removeZoombox:f,showDoubleClickNotifier:k,attachWheelEventHandler:w}},{"../../components/color":643,
"../../components/dragelement":662,"../../components/dragelement/helpers":661,"../../components/drawing":665,"../../components/fx":683,"../../constants/alignment":745,"../../lib":778,"../../lib/clear_gl_canvases":762,"../../lib/setcursor":799,"../../lib/svg_text_utils":803,"../../plot_api/subroutines":818,"../../registry":911,"../plots":891,"./axes":828,"./axis_ids":831,"./constants":834,"./scale_zoom":846,"./select":847,d3:169,"has-passive-events":441,tinycolor2:576}],837:[function(b,N,I){var r=
b("d3"),q=b("../../components/fx"),m=b("../../components/dragelement"),l=b("../../lib/setcursor"),a=b("./dragbox").makeDragBox,h=b("./constants").DRAGGERSIZE;I.initInteractions=function(g){var n=g._fullLayout;if(g._context.staticPlot)r.select(g).selectAll(".drag").remove();else if(n._has("cartesian")||n._has("splom")){Object.keys(n._plots||{}).sort(function(d,e){return(n._plots[d].mainplot&&!0)===(n._plots[e].mainplot&&!0)?(d=d.split("y"),e=e.split("y"),d[0]===e[0]?Number(d[1]||1)-Number(e[1]||1):
Number(d[0]||1)-Number(e[0]||1)):n._plots[d].mainplot?1:-1}).forEach(function(d){var e=n._plots[d],f=e.xaxis,k=e.yaxis;if(!e.mainplot){var t=a(g,e,f._offset,k._offset,f._length,k._length,"ns","ew");t.onmousemove=function(w){g._fullLayout._rehover=function(){g._fullLayout._hoversubplot===d&&g._fullLayout._plots[d]&&q.hover(g,w,d)};q.hover(g,w,d);g._fullLayout._lasthover=t;g._fullLayout._hoversubplot=d};t.onmouseout=function(w){g._dragging||(g._fullLayout._hoversubplot=null,m.unhover(g,w))};g._context.showAxisDragHandles&&
(a(g,e,f._offset-h,k._offset-h,h,h,"n","w"),a(g,e,f._offset+f._length,k._offset-h,h,h,"n","e"),a(g,e,f._offset-h,k._offset+k._length,h,h,"s","w"),a(g,e,f._offset+f._length,k._offset+k._length,h,h,"s","e"))}if(g._context.showAxisDragHandles){if(d===f._mainSubplot){var v=f._mainLinePosition;"top"===f.side&&(v-=h);a(g,e,f._offset+.1*f._length,v,.8*f._length,h,"","ew");a(g,e,f._offset,v,.1*f._length,h,"","w");a(g,e,f._offset+.9*f._length,v,.1*f._length,h,"","e")}d===k._mainSubplot&&(f=k._mainLinePosition,
"right"!==k.side&&(f-=h),a(g,e,f,k._offset+.1*k._length,h,.8*k._length,"ns",""),a(g,e,f,k._offset+.9*k._length,h,.1*k._length,"s",""),a(g,e,f,k._offset,h,.1*k._length,"n",""))}});var p=n._hoverlayer.node();p.onmousemove=function(d){d.target=g._fullLayout._lasthover;q.hover(g,d,n._hoversubplot)};p.onclick=function(d){d.target=g._fullLayout._lasthover;q.click(g,d)};p.onmousedown=function(d){g._fullLayout._lasthover.onmousedown(d)};I.updateFx(g)}};I.updateFx=function(g){g=g._fullLayout;l(g._draggers,
"pan"===g.dragmode?"move":"crosshair")}},{"../../components/dragelement":662,"../../components/fx":683,"../../lib/setcursor":799,"./constants":834,"./dragbox":836,d3:169}],838:[function(b,N,I){N.exports={clearOutlineControllers:function(r){(r=r._fullLayout._zoomlayer)&&r.selectAll(".outline-controllers").remove()},clearSelect:function(r){var q=r._fullLayout._zoomlayer;q&&q.selectAll(".select-outline").remove();r._fullLayout._drawing=!1}}},{}],839:[function(b,N,I){function r(m,l){switch(m.type){case "log":return m.p2d(l);
case "date":return m.p2r(l,0,m.calendar);default:return m.p2r(l)}}var q=b("../../lib").strTranslate;N.exports={p2r:r,r2p:function(m,l){switch(m.type){case "log":return m.d2p(l);case "date":return m.r2p(l,0,m.calendar);default:return m.r2p(l)}},axValue:function(m){var l="y"===m._id.charAt(0)?1:0;return function(a){return r(m,a[l])}},getTransform:function(m){return q(m.xaxis._offset,m.yaxis._offset)}}},{"../../lib":778}],840:[function(b,N,I){var r=b("../../registry"),q=b("../../lib"),m=b("./axis_ids");
N.exports=function(l){return function(a,h){a=a[l];if(Array.isArray(a)){var g=r.subplotsRegistry.cartesian,n=g.idRegex,p=h._subplots,d=p.xaxis,e=p.yaxis;p=p.cartesian;for(var f=h._has("cartesian")||h._has("gl2d"),k=0;k<a.length;k++){var t=a[k];if(q.isPlainObject(t)){var v=m.cleanId(t.xref,"x",!1);t=m.cleanId(t.yref,"y",!1);var w=n.x.test(v),y=n.y.test(t);if(w||y){f||q.pushUnique(h._basePlotModules,g);var B=!1;w&&-1===d.indexOf(v)&&(d.push(v),B=!0);y&&-1===e.indexOf(t)&&(e.push(t),B=!0);B&&w&&y&&p.push(v+
t)}}}}}}},{"../../lib":778,"../../registry":911,"./axis_ids":831}],841:[function(b,N,I){function r(y,B,A){return p.ensureSingle(y,B,A,function(z){z.datum(A)})}function q(y,B,A,z,E){for(var C=t.traceLayerClasses,u=y._fullLayout,D=u._modules,G,J,L=[],K=[],H=0;H<D.length;H++){G=D[H];J=G.name;var Q=n.modules[J].categories;if(Q.svg){var M=G.layerName||J+"layer";G=G.plot;A=f(A,G);J=A[0];A=A[1];J.length&&L.push({i:C.indexOf(M),className:M,plotMethod:G,cdModule:J});Q.zoomScale&&K.push("."+M)}}L.sort(function(P,
T){return P.i-T.i});C=B.plot.selectAll("g.mlayer").data(L,function(P){return P.className});C.enter().append("g").attr("class",function(P){return P.className}).classed("mlayer",!0).classed("rangeplot",B.isRangePlot);C.exit().remove();C.order();C.each(function(P){var T=g.select(this),O=P.className;P.plotMethod(y,B,P.cdModule,T,z,E);-1===t.clipOnAxisFalseQuery.indexOf("."+O)&&e.setClipUrl(T,B.layerClipId,y)});u._has("scattergl")&&(G=n.getModule("scattergl"),J=f(A,G)[0],G.plot(y,B,J));y._context.staticPlot||
(B._hasClipOnAxisFalse&&(B.clipOnAxisFalseTraces=B.plot.selectAll(t.clipOnAxisFalseQuery.join(",")).selectAll(".trace")),K.length&&(u=B.plot.selectAll(K.join(",")).selectAll(".trace"),B.zoomScalePts=u.selectAll("path.point"),B.zoomScaleTxt=u.selectAll(".textpoint")))}function m(y){y=y._fullLayout;var B=y._subplots.cartesian,A=B.length,z,E=[],C=[];for(z=0;z<A;z++){var u=B[z];var D=y._plots[u];var G=D.xaxis;var J=D.yaxis;G=G._mainAxis._id+J._mainAxis._id;J=y._plots[G];D.overlays=[];G!==u&&J?(D.mainplot=
G,D.mainplotinfo=J,C.push(u)):(D.mainplot=void 0,D.mainplotinfo=void 0,E.push(u))}for(z=0;z<C.length;z++)u=C[z],D=y._plots[u],D.mainplotinfo.overlays.push(D);B=E.concat(C);E=Array(A);for(z=0;z<A;z++){u=B[z];D=y._plots[u];G=D.xaxis;J=D.yaxis;G=[u,G.layer,J.layer,G.overlaying||"",J.overlaying||""];for(u=0;u<D.overlays.length;u++)G.push(D.overlays[u].id);E[z]=G}return E}function l(y,B){var A=B.plotgroup,z=B.id,E=t.layerValue2layerClass[B.xaxis.layer],C=t.layerValue2layerClass[B.yaxis.layer];y=y._fullLayout._hasOnlyLargeSploms;
if(B.mainplot){A=B.mainplotinfo;var u=A.plotgroup,D=z+"-x",G=z+"-y";B.gridlayer=A.gridlayer;B.zerolinelayer=A.zerolinelayer;w(A.overlinesBelow,"path",D);w(A.overlinesBelow,"path",G);w(A.overaxesBelow,"g",D);w(A.overaxesBelow,"g",G);B.plot=w(A.overplot,"g",z);w(A.overlinesAbove,"path",D);w(A.overlinesAbove,"path",G);w(A.overaxesAbove,"g",D);w(A.overaxesAbove,"g",G);B.xlines=u.select(".overlines-"+E).select("."+D);B.ylines=u.select(".overlines-"+C).select("."+G);B.xaxislayer=u.select(".overaxes-"+E).select("."+
D);B.yaxislayer=u.select(".overaxes-"+C).select("."+G)}else y?(B.xlines=w(A,"path","xlines-above"),B.ylines=w(A,"path","ylines-above"),B.xaxislayer=w(A,"g","xaxislayer-above"),B.yaxislayer=w(A,"g","yaxislayer-above")):(z=w(A,"g","layer-subplot"),B.shapelayer=w(z,"g","shapelayer"),B.imagelayer=w(z,"g","imagelayer"),B.gridlayer=w(A,"g","gridlayer"),B.zerolinelayer=w(A,"g","zerolinelayer"),w(A,"path","xlines-below"),w(A,"path","ylines-below"),B.overlinesBelow=w(A,"g","overlines-below"),w(A,"g","xaxislayer-below"),
w(A,"g","yaxislayer-below"),B.overaxesBelow=w(A,"g","overaxes-below"),B.plot=w(A,"g","plot"),B.overplot=w(A,"g","overplot"),B.xlines=w(A,"path","xlines-above"),B.ylines=w(A,"path","ylines-above"),B.overlinesAbove=w(A,"g","overlines-above"),w(A,"g","xaxislayer-above"),w(A,"g","yaxislayer-above"),B.overaxesAbove=w(A,"g","overaxes-above"),B.xlines=A.select(".xlines-"+E),B.ylines=A.select(".ylines-"+C),B.xaxislayer=A.select(".xaxislayer-"+E),B.yaxislayer=A.select(".yaxislayer-"+C));y||(r(B.gridlayer,
"g",B.xaxis._id),r(B.gridlayer,"g",B.yaxis._id),B.gridlayer.selectAll("g").map(function(J){return J[0]}).sort(k.idSort));B.xlines.style("fill","none").classed("crisp",!0);B.ylines.style("fill","none").classed("crisp",!0)}function a(y,B){if(y){var A={};y.each(function(u){u=u[0];g.select(this).remove();h(u,B);A[u]=!0});for(var z in B._plots){y=B._plots[z].overlays||[];for(var E=0;E<y.length;E++){var C=y[E];A[C.id]&&C.plot.selectAll(".trace").remove()}}}}function h(y,B){B._draggers.selectAll("g."+y).remove();
B._defs.select("#clip"+B._uid+y+"plot").remove()}var g=b("d3"),n=b("../../registry"),p=b("../../lib"),d=b("../plots"),e=b("../../components/drawing"),f=b("../get_data").getModuleCalcData,k=b("./axis_ids"),t=b("./constants"),v=b("../../constants/xmlns_namespaces"),w=p.ensureSingle;I.name="cartesian";I.attr=["xaxis","yaxis"];I.idRoot=["x","y"];I.idRegex=t.idRegex;I.attrRegex=t.attrRegex;I.attributes=b("./attributes");I.layoutAttributes=b("./layout_attributes");I.supplyLayoutDefaults=b("./layout_defaults");
I.transitionAxes=b("./transition_axes");I.finalizeSubplots=function(y,B){var A=B._subplots;B=A.xaxis;var z=A.yaxis,E=A.cartesian;A=E.concat(A.gl2d||[]);var C={},u={},D;for(D=0;D<A.length;D++){var G=A[D].split("y");C[G[0]]=1;u["y"+G[1]]=1}for(D=0;D<B.length;D++)if(G=B[D],!C[G]){var J=(y[k.id2name(G)]||{}).anchor;t.idRegex.y.test(J)||(J="y");E.push(G+J);A.push(G+J);u[J]||(u[J]=1,p.pushUnique(z,J))}for(D=0;D<z.length;D++)J=z[D],u[J]||(G=(y[k.id2name(J)]||{}).anchor,t.idRegex.x.test(G)||(G="x"),E.push(G+
J),A.push(G+J),C[G]||(C[G]=1,p.pushUnique(B,G)));if(!A.length){J=G="";for(var L in y)if(t.attrRegex.test(L))if("x"===L.charAt(0)){if(!G||+L.substr(5)<+G.substr(5))G=L}else if(!J||+L.substr(5)<+J.substr(5))J=L;G=G?k.name2id(G):"x";J=J?k.name2id(J):"y";B.push(G);z.push(J);E.push(G+J)}};I.plot=function(y,B,A,z){var E=y._fullLayout,C=E._subplots.cartesian,u=y.calcdata,D;if(!Array.isArray(B))for(B=[],D=0;D<u.length;D++)B.push(D);for(D=0;D<C.length;D++){for(var G=C[D],J=E._plots[G],L=[],K,H=0;H<u.length;H++){var Q=
u[H],M=Q[0].trace;if(M.xaxis+M.yaxis===G){if(-1!==B.indexOf(M.index)||M.carpet)K&&K[0].trace.xaxis+K[0].trace.yaxis===G&&-1!==["tonextx","tonexty","tonext"].indexOf(M.fill)&&-1===L.indexOf(K)&&L.push(K),L.push(Q);K=Q}}q(y,J,L,A,z)}};I.clean=function(y,B,A,z){var E=z._plots||{};y=B._plots||{};A=z._subplots||{};var C;if(z._hasOnlyLargeSploms&&!B._hasOnlyLargeSploms)for(C in E){var u=E[C];u.plotgroup&&u.plotgroup.remove()}u=z._has&&z._has("gl");var D=B._has&&B._has("gl");if(u&&!D)for(C in E)u=E[C],u._scene&&
u._scene.destroy();if(A.xaxis&&A.yaxis)for(E=k.listIds({_fullLayout:z}),C=0;C<E.length;C++)u=E[C],B[k.id2name(u)]||z._infolayer.selectAll(".g-"+u+"title").remove();C=z._has&&z._has("cartesian");B=B._has&&B._has("cartesian");if(C&&!B)a(z._cartesianlayer.selectAll(".subplot"),z),z._defs.selectAll(".axesclip").remove(),delete z._axisConstraintGroups,delete z._axisMatchGroups;else if(A.cartesian)for(C=0;C<A.cartesian.length;C++)B=A.cartesian[C],y[B]||(z._cartesianlayer.selectAll("."+B+",."+B+"-x,."+B+
"-y").remove(),h(B,z))};I.drawFramework=function(y){var B=y._fullLayout,A=m(y);A=B._cartesianlayer.selectAll(".subplot").data(A,String);A.enter().append("g").attr("class",function(z){return"subplot "+z[0]});A.order();A.exit().call(a,B);A.each(function(z){z=z[0];var E=B._plots[z];E.plotgroup=g.select(this);l(y,E);E.draglayer=w(B._draggers,"g",z)})};I.rangePlot=function(y,B,A){l(y,B);q(y,B,A);d.style(y)};I.toSVG=function(y){var B=y._fullLayout._glimages,A=g.select(y).selectAll(".svg-container");A.filter(function(z,
E){return E===A.size()-1}).selectAll(".gl-canvas-context, .gl-canvas-focus").each(function(){var z=this.toDataURL("image/png");B.append("svg:image").attr({xmlns:v.svg,"xlink:href":z,preserveAspectRatio:"none",x:0,y:0,width:this.width,height:this.height})})};I.updateFx=b("./graph_interact").updateFx},{"../../components/drawing":665,"../../constants/xmlns_namespaces":754,"../../lib":778,"../../registry":911,"../get_data":865,"../plots":891,"./attributes":826,"./axis_ids":831,"./constants":834,"./graph_interact":837,
"./layout_attributes":842,"./layout_defaults":843,"./transition_axes":852,d3:169}],842:[function(b,N,I){I=b("../font_attributes");var r=b("../../components/color/attributes"),q=b("../../components/drawing/attributes").dash,m=b("../../lib/extend").extendFlat,l=b("../../plot_api/plot_template").templatedArray;b("../../constants/docs");b("../../constants/docs");var a=b("../../constants/numerical").ONEDAY;b=b("./constants");var h=b.HOUR_PATTERN,g=b.WEEKDAY_PATTERN;N.exports={visible:{valType:"boolean",
editType:"plot"},color:{valType:"color",dflt:r.defaultLine,editType:"ticks"},title:{text:{valType:"string",editType:"ticks"},font:I({editType:"ticks"}),standoff:{valType:"number",min:0,editType:"ticks"},editType:"ticks"},type:{valType:"enumerated",values:"- linear log date category multicategory".split(" "),dflt:"-",editType:"calc",_noTemplating:!0},autotypenumbers:{valType:"enumerated",values:["convert types","strict"],dflt:"convert types",editType:"calc"},autorange:{valType:"enumerated",values:[!0,
!1,"reversed"],dflt:!0,editType:"axrange",impliedEdits:{"range[0]":void 0,"range[1]":void 0}},rangemode:{valType:"enumerated",values:["normal","tozero","nonnegative"],dflt:"normal",editType:"plot"},range:{valType:"info_array",items:[{valType:"any",editType:"axrange",impliedEdits:{"^autorange":!1},anim:!0},{valType:"any",editType:"axrange",impliedEdits:{"^autorange":!1},anim:!0}],editType:"axrange",impliedEdits:{autorange:!1},anim:!0},fixedrange:{valType:"boolean",dflt:!1,editType:"calc"},scaleanchor:{valType:"enumerated",
values:[b.idRegex.x.toString(),b.idRegex.y.toString()],editType:"plot"},scaleratio:{valType:"number",min:0,dflt:1,editType:"plot"},constrain:{valType:"enumerated",values:["range","domain"],editType:"plot"},constraintoward:{valType:"enumerated",values:"left center right top middle bottom".split(" "),editType:"plot"},matches:{valType:"enumerated",values:[b.idRegex.x.toString(),b.idRegex.y.toString()],editType:"calc"},rangebreaks:l("rangebreak",{enabled:{valType:"boolean",dflt:!0,editType:"calc"},bounds:{valType:"info_array",
items:[{valType:"any",editType:"calc"},{valType:"any",editType:"calc"}],editType:"calc"},pattern:{valType:"enumerated",values:[g,h,""],editType:"calc"},values:{valType:"info_array",freeLength:!0,editType:"calc",items:{valType:"any",editType:"calc"}},dvalue:{valType:"number",editType:"calc",min:0,dflt:a},editType:"calc"}),tickmode:{valType:"enumerated",values:["auto","linear","array"],editType:"ticks",impliedEdits:{tick0:void 0,dtick:void 0}},nticks:{valType:"integer",min:0,dflt:0,editType:"ticks"},
tick0:{valType:"any",editType:"ticks",impliedEdits:{tickmode:"linear"}},dtick:{valType:"any",editType:"ticks",impliedEdits:{tickmode:"linear"}},tickvals:{valType:"data_array",editType:"ticks"},ticktext:{valType:"data_array",editType:"ticks"},ticks:{valType:"enumerated",values:["outside","inside",""],editType:"ticks"},tickson:{valType:"enumerated",values:["labels","boundaries"],dflt:"labels",editType:"ticks"},ticklabelmode:{valType:"enumerated",values:["instant","period"],dflt:"instant",editType:"ticks"},
ticklabelposition:{valType:"enumerated",values:"outside;inside;outside top;inside top;outside left;inside left;outside right;inside right;outside bottom;inside bottom".split(";"),dflt:"outside",editType:"calc"},mirror:{valType:"enumerated",values:[!0,"ticks",!1,"all","allticks"],dflt:!1,editType:"ticks+layoutstyle"},ticklen:{valType:"number",min:0,dflt:5,editType:"ticks"},tickwidth:{valType:"number",min:0,dflt:1,editType:"ticks"},tickcolor:{valType:"color",dflt:r.defaultLine,editType:"ticks"},showticklabels:{valType:"boolean",
dflt:!0,editType:"ticks"},automargin:{valType:"boolean",dflt:!1,editType:"ticks"},showspikes:{valType:"boolean",dflt:!1,editType:"modebar"},spikecolor:{valType:"color",dflt:null,editType:"none"},spikethickness:{valType:"number",dflt:3,editType:"none"},spikedash:m({},q,{dflt:"dash",editType:"none"}),spikemode:{valType:"flaglist",flags:["toaxis","across","marker"],dflt:"toaxis",editType:"none"},spikesnap:{valType:"enumerated",values:["data","cursor","hovered data"],dflt:"data",editType:"none"},tickfont:I({editType:"ticks"}),
tickangle:{valType:"angle",dflt:"auto",editType:"ticks"},tickprefix:{valType:"string",dflt:"",editType:"ticks"},showtickprefix:{valType:"enumerated",values:["all","first","last","none"],dflt:"all",editType:"ticks"},ticksuffix:{valType:"string",dflt:"",editType:"ticks"},showticksuffix:{valType:"enumerated",values:["all","first","last","none"],dflt:"all",editType:"ticks"},showexponent:{valType:"enumerated",values:["all","first","last","none"],dflt:"all",editType:"ticks"},exponentformat:{valType:"enumerated",
values:"none e E power SI B".split(" "),dflt:"B",editType:"ticks"},minexponent:{valType:"number",dflt:3,min:0,editType:"ticks"},separatethousands:{valType:"boolean",dflt:!1,editType:"ticks"},tickformat:{valType:"string",dflt:"",editType:"ticks"},tickformatstops:l("tickformatstop",{enabled:{valType:"boolean",dflt:!0,editType:"ticks"},dtickrange:{valType:"info_array",items:[{valType:"any",editType:"ticks"},{valType:"any",editType:"ticks"}],editType:"ticks"},value:{valType:"string",dflt:"",editType:"ticks"},
editType:"ticks"}),hoverformat:{valType:"string",dflt:"",editType:"none"},showline:{valType:"boolean",dflt:!1,editType:"ticks+layoutstyle"},linecolor:{valType:"color",dflt:r.defaultLine,editType:"layoutstyle"},linewidth:{valType:"number",min:0,dflt:1,editType:"ticks+layoutstyle"},showgrid:{valType:"boolean",editType:"ticks"},gridcolor:{valType:"color",dflt:r.lightLine,editType:"ticks"},gridwidth:{valType:"number",min:0,dflt:1,editType:"ticks"},zeroline:{valType:"boolean",editType:"ticks"},zerolinecolor:{valType:"color",
dflt:r.defaultLine,editType:"ticks"},zerolinewidth:{valType:"number",dflt:1,editType:"ticks"},showdividers:{valType:"boolean",dflt:!0,editType:"ticks"},dividercolor:{valType:"color",dflt:r.defaultLine,editType:"ticks"},dividerwidth:{valType:"number",dflt:1,editType:"ticks"},anchor:{valType:"enumerated",values:["free",b.idRegex.x.toString(),b.idRegex.y.toString()],editType:"plot"},side:{valType:"enumerated",values:["top","bottom","left","right"],editType:"plot"},overlaying:{valType:"enumerated",values:["free",
b.idRegex.x.toString(),b.idRegex.y.toString()],editType:"plot"},layer:{valType:"enumerated",values:["above traces","below traces"],dflt:"above traces",editType:"plot"},domain:{valType:"info_array",items:[{valType:"number",min:0,max:1,editType:"plot"},{valType:"number",min:0,max:1,editType:"plot"}],dflt:[0,1],editType:"plot"},position:{valType:"number",min:0,max:1,dflt:0,editType:"plot"},categoryorder:{valType:"enumerated",values:"trace;category ascending;category descending;array;total ascending;total descending;min ascending;min descending;max ascending;max descending;sum ascending;sum descending;mean ascending;mean descending;median ascending;median descending".split(";"),
dflt:"trace",editType:"calc"},categoryarray:{valType:"data_array",editType:"calc"},uirevision:{valType:"any",editType:"none"},editType:"calc",_deprecated:{autotick:{valType:"boolean",editType:"ticks"},title:{valType:"string",editType:"ticks"},titlefont:I({editType:"ticks"})}}},{"../../components/color/attributes":642,"../../components/drawing/attributes":664,"../../constants/docs":748,"../../constants/numerical":753,"../../lib/extend":768,"../../plot_api/plot_template":817,"../font_attributes":856,
"./constants":834}],843:[function(b,N,I){function r(A,z,E){Array.isArray(A[z])?A[z].push(E):A[z]=[E]}var q=b("../../lib"),m=b("../../components/color"),l=b("../../components/fx/helpers").isUnifiedHover,a=b("../../components/fx/hovermode_defaults"),h=b("../../plot_api/plot_template"),g=b("../layout_attributes"),n=b("./layout_attributes"),p=b("./type_defaults"),d=b("./axis_defaults"),e=b("./constraints"),f=b("./position_defaults"),k=b("./axis_ids"),t=k.id2name,v=k.name2id,w=b("./constants").AX_ID_PATTERN;
b=b("../../registry");var y=b.traceIs,B=b.getComponentMethod;N.exports=function(A,z,E){function C(){va._traceIndices=(K[na]||[]).map(function(cb){return cb._expandedIndex});va._annIndices=[];va._shapeIndices=[];va._imgIndices=[];va._subplotsWith=[];va._counterAxes=[];va._name=va._attr=na;va._id=ka}function u(cb,$a){return q.coerce(ua,va,n,cb,$a)}function D(cb,$a){return q.coerce2(ua,va,n,cb,$a)}function G(cb,$a){cb="x"===cb?da:oa;for(var jb=[],pb=0;pb<cb.length;pb++){var xa=cb[pb];xa===$a||(A[xa]||
{}).overlaying||jb.push(v(xa))}return jb}function J(){var cb=ua.matches;w.test(cb)&&-1===sa.indexOf(cb)&&(ma[cb]=ua.type,qa=Object.keys(ma))}var L=z.autotypenumbers,K={},H={},Q={},M={},P={},T={},O={},U={},S={},X={},ba,ca;for(ba=0;ba<E.length;ba++){var ia=E[ba];if(y(ia,"cartesian")||y(ia,"gl2d")){if(ia.xaxis){var ja=t(ia.xaxis);r(K,ja,ia)}else if(ia.xaxes)for(ca=0;ca<ia.xaxes.length;ca++)r(K,t(ia.xaxes[ca]),ia);if(ia.yaxis){var la=t(ia.yaxis);r(K,la,ia)}else if(ia.yaxes)for(ca=0;ca<ia.yaxes.length;ca++)r(K,
t(ia.yaxes[ca]),ia);"funnel"===ia.type?"h"===ia.orientation?(ja&&(H[ja]=!0),la&&(O[la]=!0)):la&&(Q[la]=!0):"image"===ia.type?(la&&(U[la]=!0),ja&&(U[ja]=!0)):(la&&(P[la]=!0,T[la]=!0),(!y(ia,"carpet")||"carpet"===ia.type&&!ia._cheater)&&ja&&(M[ja]=!0));"carpet"===ia.type&&ia._cheater&&ja&&(H[ja]=!0);y(ia,"2dMap")&&(S[ja]=!0,S[la]=!0);y(ia,"oriented")&&(X["h"===ia.orientation?la:ja]=!0)}}ca=z._subplots;ba=ca.xaxis;ja=ca.yaxis;var da=q.simpleMap(ba,t),oa=q.simpleMap(ja,t);ca=da.concat(oa);ia=m.background;
ba.length&&ja.length&&(ia=q.coerce(A,z,g,"plot_bgcolor"));ia=m.combine(ia,z.paper_bgcolor);ja={x:ja,y:ba};var sa=ja.x.concat(ja.y),ma={},qa=[];la=a(A,z,E);var pa=l(la);for(ba=0;ba<ca.length;ba++){var na=ca[ba];var ka=v(na);E=na.charAt(0);q.isPlainObject(A[na])||(A[na]={});var ua=A[na];var va=h.newContainer(z,na,E+"axis");C();var Ca={letter:E,font:z.font,outerTicks:S[na],showGrid:!X[na],data:K[na]||[],bgColor:ia,calendar:z.calendar,automargin:!0,visibleDflt:"x"===E&&!M[na]&&H[na]||"y"===E&&!P[na]&&
Q[na],reverseDflt:"y"===E&&(!T[na]&&O[na]||U[na]),autotypenumbersDflt:L,splomStash:((z._splomAxes||{})[E]||{})[ka]};u("uirevision",z.uirevision);p(ua,va,u,Ca);d(ua,va,u,Ca,z);Ca=pa&&E===la.charAt(0);var Ma=D("spikecolor",pa?va.color:void 0),Ua=D("spikethickness",pa?1.5:void 0),eb=D("spikedash",pa?"dot":void 0),fb=D("spikemode",pa?"across":void 0),nb=D("spikesnap",pa?"hovered data":void 0);u("showspikes",!!Ca||!!Ma||!!Ua||!!eb||!!fb||!!nb)||(delete va.spikecolor,delete va.spikethickness,delete va.spikedash,
delete va.spikemode,delete va.spikesnap);f(ua,va,u,{letter:E,counterAxes:ja[E],overlayableAxes:G(E,na),grid:z.grid});u("title.standoff");J();va._input=ua}for(ba=0;ba<qa.length;)ka=qa[ba++],na=t(ka),E=na.charAt(0),q.isPlainObject(A[na])||(A[na]={}),ua=A[na],va=h.newContainer(z,na,E+"axis"),C(),H={letter:E,font:z.font,outerTicks:S[na],showGrid:!X[na],data:[],bgColor:ia,calendar:z.calendar,automargin:!0,visibleDflt:!1,reverseDflt:!1,autotypenumbersDflt:L,splomStash:((z._splomAxes||{})[E]||{})[ka]},u("uirevision",
z.uirevision),va.type=ma[ka]||"linear",d(ua,va,u,H,z),f(ua,va,u,{letter:E,counterAxes:ja[E],overlayableAxes:G(E,na),grid:z.grid}),u("fixedrange"),J(),va._input=ua;L=B("rangeslider","handleDefaults");S=B("rangeselector","handleDefaults");for(ba=0;ba<da.length;ba++)na=da[ba],ua=A[na],va=z[na],L(A,z,na),"date"===va.type&&S(ua,va,z,oa,va.calendar),u("fixedrange");for(ba=0;ba<oa.length;ba++)na=oa[ba],ua=A[na],va=z[na],L=z[t(va.anchor)],L=B("rangeslider","isVisible")(L),u("fixedrange",L);e.handleDefaults(A,
z,{axIds:sa.concat(qa).sort(k.idSort),axHasImage:U})}},{"../../components/color":643,"../../components/fx/helpers":679,"../../components/fx/hovermode_defaults":682,"../../lib":778,"../../plot_api/plot_template":817,"../../registry":911,"../layout_attributes":882,"./axis_defaults":830,"./axis_ids":831,"./constants":834,"./constraints":835,"./layout_attributes":842,"./position_defaults":845,"./type_defaults":853}],844:[function(b,N,I){var r=b("tinycolor2").mix,q=b("../../components/color/attributes").lightFraction,
m=b("../../lib");N.exports=function(l,a,h,g){function n(f,k){return m.coerce2(l,a,g.attributes,f,k)}g=g||{};var p=g.dfltColor,d=n("linecolor",p),e=n("linewidth");h("showline",g.showLine||!!d||!!e)||(delete a.linecolor,delete a.linewidth);d=r(p,g.bgColor,g.blend||q).toRgbString();d=n("gridcolor",d);e=n("gridwidth");h("showgrid",g.showGrid||!!d||!!e)||(delete a.gridcolor,delete a.gridwidth);g.noZeroLine||(p=n("zerolinecolor",p),d=n("zerolinewidth"),h("zeroline",g.showGrid||!!p||!!d)||(delete a.zerolinecolor,
delete a.zerolinewidth))}},{"../../components/color/attributes":642,"../../lib":778,tinycolor2:576}],845:[function(b,N,I){var r=b("fast-isnumeric"),q=b("../../lib");N.exports=function(m,l,a,h){var g=h.counterAxes||[],n=h.overlayableAxes||[],p=h.letter;h=h.grid;if(h){var d=h._domains[p][h._axisMap[l._id]];var e=h._anchors[l._id];if(d){var f=h[p+"side"].split(" ")[0];var k=h.domain[p]["right"===f||"top"===f?1:0]}}d=d||[0,1];e=e||(r(m.position)?"free":g[0]||"free");f=f||("x"===p?"bottom":"left");k=k||
0;"free"===q.coerce(m,l,{anchor:{valType:"enumerated",values:["free"].concat(g),dflt:e}},"anchor")&&a("position",k);q.coerce(m,l,{side:{valType:"enumerated",values:"x"===p?["bottom","top"]:["left","right"],dflt:f}},"side");g=!1;n.length&&(g=q.coerce(m,l,{overlaying:{valType:"enumerated",values:[!1].concat(n),dflt:!1}},"overlaying"));g||(n=a("domain",d),n[0]>n[1]-1/4096&&(l.domain=d),q.noneOrAll(m.domain,l.domain,d));a("layer");return l}},{"../../lib":778,"fast-isnumeric":241}],846:[function(b,N,I){var r=
b("../../constants/alignment").FROM_BL;N.exports=function(q,m,l){void 0===l&&(l=r[q.constraintoward||"center"]);var a=[q.r2l(q.range[0]),q.r2l(q.range[1])];l=a[0]+(a[1]-a[0])*l;q.range=q._input.range=[q.l2r(l+(a[0]-l)*m),q.l2r(l+(a[1]-l)*m)];q.setScale()}},{"../../constants/alignment":745}],847:[function(b,N,I){function r(ja,la,da,oa,sa,ma,qa){var pa=la._hoverdata,na=-1<la._fullLayout.clickmode.indexOf("event"),ka=[],ua;if(pa&&Array.isArray(pa)&&!0!==pa[0].hoverOnBox){a(ja,la,ma);da=g(la,da,oa,sa);
pa=pa[0];oa=-1;sa=[];var va;for(va=0;va<da.length;va++){var Ca=da[va];if(pa.fullData._expandedIndex===Ca.cd[0].trace._expandedIndex){if(!0===pa.hoverOnBox)break;void 0!==pa.pointNumber?oa=pa.pointNumber:void 0!==pa.binNumber&&(oa=pa.binNumber,sa=pa.pointNumbers);break}}Ca={pointNumber:oa,pointNumbers:sa,searchInfo:Ca};if(0<Ca.pointNumbers.length)a:{oa=[];for(pa=0;pa<da.length;pa++)sa=da[pa],sa.cd[0].trace.selectedpoints&&0<sa.cd[0].trace.selectedpoints.length&&oa.push(sa);if(1===oa.length&&(pa=oa[0]===
Ca.searchInfo)&&(oa=Ca.searchInfo.cd[0].trace,oa.selectedpoints.length===Ca.pointNumbers.length)){for(pa=0;pa<Ca.pointNumbers.length;pa++)if(0>oa.selectedpoints.indexOf(Ca.pointNumbers[pa])){pa=!1;break a}pa=!0;break a}pa=!1}else{a:{for(oa=pa=0;oa<da.length;oa++)if(sa=da[oa],sa=sa.cd[0].trace,sa.selectedpoints){if(1<sa.selectedpoints.length){pa=!1;break a}pa+=sa.selectedpoints.length;if(1<pa){pa=!1;break a}}pa=1===pa}pa=pa&&(ua=n(Ca))}if(pa){qa&&qa.remove();for(ua=0;ua<da.length;ua++)qa=da[ua],qa._module.selectPoints(qa,
!1);p(la,da);h(ma);na&&la.emit("plotly_deselect",null)}else{ja=ja.shiftKey&&(void 0!==ua?ua:n(Ca));ja={pointNumber:Ca.pointNumber,searchInfo:Ca.searchInfo,subtract:ja};ua=ma.selectionDefs.concat([ja]);Ca=l(ua);for(ua=0;ua<da.length;ua++)if(pa=da[ua]._module.selectPoints(da[ua],Ca),pa=e(pa,da[ua]),ka.length)for(oa=0;oa<pa.length;oa++)ka.push(pa[oa]);else ka=pa;ka={points:ka};p(la,da,ka);ja&&ma&&ma.selectionDefs.push(ja);qa&&(da=ma.mergedPolygons,ja=C(ma.dragmode),D(f(da,ja),qa,ma));na&&la.emit("plotly_selected",
ka)}}}function q(ja){return"pointNumber"in ja&&"searchInfo"in ja}function m(ja){return{xmin:0,xmax:0,ymin:0,ymax:0,pts:[],contains:function(la,da,oa,sa){return sa.cd[0].trace._expandedIndex===ja.searchInfo.cd[0].trace._expandedIndex&&oa===ja.pointNumber},isRect:!1,degenerate:!1,subtract:ja.subtract}}function l(ja){for(var la=[],da=q(ja[0])?0:ja[0][0][0],oa=da,sa=q(ja[0])?0:ja[0][0][1],ma=sa,qa=0;qa<ja.length;qa++)if(q(ja[qa]))la.push(m(ja[qa]));else{var pa=K.tester(ja[qa]);pa.subtract=ja[qa].subtract;
la.push(pa);da=Math.min(da,pa.xmin);oa=Math.max(oa,pa.xmax);sa=Math.min(sa,pa.ymin);ma=Math.max(ma,pa.ymax)}return{xmin:da,xmax:oa,ymin:sa,ymax:ma,pts:[],contains:function(na,ka,ua,va){for(var Ca=!1,Ma=0;Ma<la.length;Ma++)la[Ma].contains(na,ka,ua,va)&&(Ca=!1===la[Ma].subtract);return Ca},isRect:!1,degenerate:!1}}function a(ja,la,da){la._fullLayout._drawing=!1;var oa=la._fullLayout,sa=da.plotinfo,ma=da.dragmode,qa=oa._lastSelectedSubplot&&oa._lastSelectedSubplot===sa.id;ja=(ja.shiftKey||ja.altKey)&&
!(E(ma)&&C(ma));qa&&ja&&sa.selection&&sa.selection.selectionDefs&&!da.selectionDefs?(da.selectionDefs=sa.selection.selectionDefs,da.mergedPolygons=sa.selection.mergedPolygons):ja&&sa.selection||h(da);qa||(X(la),oa._lastSelectedSubplot=sa.id)}function h(ja){var la=ja.dragmode,da=ja.plotinfo,oa=ja.gd;0<=oa._fullLayout._activeShapeIndex&&oa._fullLayout._deactivateShape(oa);E(la)&&(la=oa._fullLayout._zoomlayer.selectAll(".select-outline-"+da.id))&&oa._fullLayout._drawing&&((la=J(la,ja))&&t.call("_guiRelayout",
oa,{shapes:la}),oa._fullLayout._drawing=!1);da.selection={};da.selection.selectionDefs=ja.selectionDefs=[];da.selection.mergedPolygons=ja.mergedPolygons=[]}function g(ja,la,da,oa){function sa(va,Ca,Ma,Ua){return{_module:va,cd:Ca,xaxis:Ma,yaxis:Ua}}var ma=[],qa=la.map(function(va){return va._id}),pa=da.map(function(va){return va._id}),na;for(na=0;na<ja.calcdata.length;na++){var ka=ja.calcdata[na];var ua=ka[0].trace;!0===ua.visible&&ua._module&&ua._module.selectPoints&&(!oa||ua.subplot!==oa&&ua.geo!==
oa?"splom"===ua.type&&ua._xaxes[qa[0]]&&ua._yaxes[pa[0]]?(ka=sa(ua._module,ka,la[0],da[0]),ka.scene=ja._fullLayout._splomScenes[ua.uid],ma.push(ka)):"sankey"===ua.type?(ua=sa(ua._module,ka,la[0],da[0]),ma.push(ua)):-1!==qa.indexOf(ua.xaxis)&&-1!==pa.indexOf(ua.yaxis)&&ma.push(sa(ua._module,ka,Q(ja,ua.xaxis),Q(ja,ua.yaxis))):ma.push(sa(ua._module,ka,la[0],da[0])))}return ma}function n(ja){var la=ja.searchInfo.cd[0].trace,da=ja.pointNumber;ja=ja.pointNumbers;da=0<ja.length?ja[0]:da;return la.selectedpoints?
-1<la.selectedpoints.indexOf(da):!1}function p(ja,la,da){var oa;for(oa=0;oa<la.length;oa++){var sa=la[oa].cd[0].trace._fullInput;var ma=ja._fullLayout._tracePreGUI[sa.uid]||{};void 0===ma.selectedpoints&&(ma.selectedpoints=sa._input.selectedpoints||null)}if(da){da=da.points||[];for(oa=0;oa<la.length;oa++){var qa=la[oa].cd[0].trace;qa._input.selectedpoints=qa._fullInput.selectedpoints=[];qa._fullInput!==qa&&(qa.selectedpoints=[])}for(oa=0;oa<da.length;oa++){sa=da[oa];ma=sa.data;var pa=sa.fullData;
sa.pointIndices?([].push.apply(ma.selectedpoints,sa.pointIndices),qa._fullInput!==qa&&[].push.apply(pa.selectedpoints,sa.pointIndices)):(ma.selectedpoints.push(sa.pointIndex),qa._fullInput!==qa&&pa.selectedpoints.push(sa.pointIndex))}}else for(oa=0;oa<la.length;oa++)qa=la[oa].cd[0].trace,delete qa.selectedpoints,delete qa._input.selectedpoints,qa._fullInput!==qa&&delete qa._fullInput.selectedpoints;sa=!1;for(oa=0;oa<la.length;oa++)if(ma=la[oa],da=ma.cd,qa=da[0].trace,t.traceIs(qa,"regl")&&(sa=!0),
qa=ma._module,qa=qa.styleOnSelect||qa.style)qa(ja,da,da[0].node3),da[0].nodeRangePlot3&&qa(ja,da,da[0].nodeRangePlot3);sa&&(M(ja),P(ja))}function d(ja,la,da){if(da)return ja=k.difference({regions:ja,inverted:!1},{regions:[la],inverted:!1}),ja.regions;ja=k.union({regions:ja,inverted:!1},{regions:[la],inverted:!1});return ja.regions}function e(ja,la){if(Array.isArray(ja)){var da=la.cd;la=la.cd[0].trace;for(var oa=0;oa<ja.length;oa++)ja[oa]=B(ja[oa],la,da)}return ja}function f(ja,la){for(var da=[],oa=
0;oa<ja.length;oa++){da[oa]=[];for(var sa=0;sa<ja[oa].length;sa++){da[oa][sa]=[];da[oa][sa][0]=sa?"L":"M";for(var ma=0;ma<ja[oa][sa].length;ma++)da[oa][sa].push(ja[oa][sa][ma])}la||da[oa].push(["Z",da[oa][0][1],da[oa][0][2]])}return da}var k=b("polybooljs"),t=b("../../registry"),v=b("../../components/drawing").dashStyle,w=b("../../components/color"),y=b("../../components/fx"),B=b("../../components/fx/helpers").makeEventData;I=b("../../components/dragelement/helpers");var A=I.freeMode,z=I.rectMode,
E=I.drawMode,C=I.openMode,u=I.selectMode,D=b("../../components/shapes/draw_newshape/display_outlines"),G=b("../../components/shapes/draw_newshape/helpers").handleEllipse,J=b("../../components/shapes/draw_newshape/newshapes"),L=b("../../lib"),K=b("../../lib/polygon"),H=b("../../lib/throttle"),Q=b("./axis_ids").getFromId,M=b("../../lib/clear_gl_canvases"),P=b("../../plot_api/subroutines").redrawReglTraces,T=b("./constants"),O=T.MINSELECT,U=K.filter,S=K.tester,X=b("./handle_outline").clearSelect;b=b("./helpers");
var ba=b.p2r,ca=b.axValue,ia=b.getTransform;N.exports={prepSelect:function(ja,la,da,oa,sa){function ma(Pb,Kb){return Pb-Kb}var qa=A(sa),pa=z(sa),na=C(sa),ka=E(sa),ua=u(sa),va="drawcircle"===sa,Ca="drawline"===sa||va,Ma=oa.gd,Ua=Ma._fullLayout,eb=Ua._zoomlayer,fb=oa.element.getBoundingClientRect(),nb=oa.plotinfo,cb=ia(nb),$a=la-fb.left,jb=da-fb.top;Ua._calcInverseTransform(Ma);la=L.apply3DTransform(Ua._invTransform)($a,jb);$a=la[0];jb=la[1];var pb=Ua._invScaleX,xa=Ua._invScaleY,Ea=$a,Ia=jb;la="M"+
$a+","+jb;var Oa=oa.xaxes[0]._length,bb=oa.yaxes[0]._length,Xa=oa.xaxes.concat(oa.yaxes),tb=ja.altKey&&!(E(sa)&&na),Ka,Ta,Na,ib,qb,sb,Ba;a(ja,Ma,oa);qa&&(Ka=U([[$a,jb]],T.BENDPX));var Fa=eb.selectAll("path.select-outline-"+nb.id).data(ka?[0]:[1,2]);ja=Ua.newshape;Fa.enter().append("path").attr("class",function(Pb){return"select-outline select-outline-"+Pb+" select-outline-"+nb.id}).style(ka?{opacity:ja.opacity/2,fill:na?void 0:ja.fillcolor,stroke:ja.line.color,"stroke-dasharray":v(ja.line.dash,ja.line.width),
"stroke-width":ja.line.width+"px"}:{}).attr("fill-rule",ja.fillrule).classed("cursor-move",ka?!0:!1).attr("transform",cb).attr("d",la+"Z");var La=eb.append("path").attr("class","zoombox-corners").style({fill:w.background,stroke:w.defaultLine,"stroke-width":1}).attr("transform",cb).attr("d","M0,0Z"),Va=Ua._uid+T.SELECTID,Za=[],mb=g(Ma,oa.xaxes,oa.yaxes,oa.subplot);var ub=nb.fillRangeItems?nb.fillRangeItems:pa?function(Pb,Kb){Pb=Pb.range={};for(qb=0;qb<Xa.length;qb++){var Ob=Xa[qb],Wb=Ob._id.charAt(0);
Pb[Ob._id]=[ba(Ob,Kb[Wb+"min"]),ba(Ob,Kb[Wb+"max"])].sort(ma)}}:function(Pb,Kb,Ob){Pb=Pb.lassoPoints={};for(qb=0;qb<Xa.length;qb++)Kb=Xa[qb],Pb[Kb._id]=Ob.filtered.map(ca(Kb))};oa.moveFn=function(Pb,Kb){Ea=Math.max(0,Math.min(Oa,pb*Pb+$a));Ia=Math.max(0,Math.min(bb,xa*Kb+jb));Pb=Math.abs(Ea-$a);Kb=Math.abs(Ia-jb);if(pa){if(ua){var Ob=Ua.selectdirection;Ob="any"===Ob?Kb<Math.min(.6*Pb,O)?"h":Pb<Math.min(.6*Kb,O)?"v":"d":Ob;switch(Ob){case "h":var Wb=va?bb/2:0;var Bc=bb;break;case "v":Wb=va?Oa/2:0,
Bc=Oa}}if(ka)switch(Ua.newshape.drawdirection){case "vertical":Ob="h";Wb=va?bb/2:0;Bc=bb;break;case "horizontal":Ob="v";Wb=va?Oa/2:0;Bc=Oa;break;case "ortho":Pb<Kb?(Ob="h",Wb=jb,Bc=Ia):(Ob="v",Wb=$a,Bc=Ea);break;default:Ob="d"}"h"===Ob?(ib=Ca?G(va,[Ea,Wb],[Ea,Bc]):[[$a,Wb],[$a,Bc],[Ea,Bc],[Ea,Wb]],ib.xmin=Ca?Ea:Math.min($a,Ea),ib.xmax=Ca?Ea:Math.max($a,Ea),ib.ymin=Math.min(Wb,Bc),ib.ymax=Math.max(Wb,Bc),La.attr("d","M"+ib.xmin+","+(jb-O)+"h-4v"+2*O+"h4ZM"+(ib.xmax-1)+","+(jb-O)+"h4v"+2*O+"h-4Z")):
"v"===Ob?(ib=Ca?G(va,[Wb,Ia],[Bc,Ia]):[[Wb,jb],[Wb,Ia],[Bc,Ia],[Bc,jb]],ib.xmin=Math.min(Wb,Bc),ib.xmax=Math.max(Wb,Bc),ib.ymin=Ca?Ia:Math.min(jb,Ia),ib.ymax=Ca?Ia:Math.max(jb,Ia),La.attr("d","M"+($a-O)+","+ib.ymin+"v-4h"+2*O+"v4ZM"+($a-O)+","+(ib.ymax-1)+"v4h"+2*O+"v-4Z")):"d"===Ob&&(ib=Ca?G(va,[$a,jb],[Ea,Ia]):[[$a,jb],[$a,Ia],[Ea,Ia],[Ea,jb]],ib.xmin=Math.min($a,Ea),ib.xmax=Math.max($a,Ea),ib.ymin=Math.min(jb,Ia),ib.ymax=Math.max(jb,Ia),La.attr("d","M0,0Z"))}else qa&&(Ka.addPt([Ea,Ia]),ib=Ka.filtered);
oa.selectionDefs&&oa.selectionDefs.length?(Na=d(oa.mergedPolygons,ib,tb),ib.subtract=tb,Ta=l(oa.selectionDefs.concat([ib]))):(Na=[ib],Ta=S(ib));D(f(Na,na),Fa,oa);ua&&H.throttle(Va,T.SELECTDELAY,function(){Za=[];var Kc=[];for(qb=0;qb<mb.length;qb++){sb=mb[qb];var Nc=sb._module.selectPoints(sb,Ta);Kc.push(Nc);Nc=e(Nc,sb);if(Za.length)for(var bd=0;bd<Nc.length;bd++)Za.push(Nc[bd]);else Za=Nc}Ba={points:Za};p(Ma,mb,Ba);ub(Ba,ib,Ka);oa.gd.emit("plotly_selecting",Ba)})};oa.clickFn=function(Pb,Kb){La.remove();
if(0<=Ma._fullLayout._activeShapeIndex)Ma._fullLayout._deactivateShape(Ma);else if(!ka){var Ob=Ua.clickmode;H.done(Va).then(function(){H.clear(Va);if(2===Pb){Fa.remove();for(qb=0;qb<mb.length;qb++)sb=mb[qb],sb._module.selectPoints(sb,!1);p(Ma,mb);h(oa);Ma.emit("plotly_deselect",null)}else-1<Ob.indexOf("select")&&r(Kb,Ma,oa.xaxes,oa.yaxes,oa.subplot,oa,Fa),"event"===Ob&&Ma.emit("plotly_selected",void 0);y.click(Ma,Kb)}).catch(L.error)}};oa.doneFn=function(){La.remove();H.done(Va).then(function(){H.clear(Va);
oa.gd.emit("plotly_selected",Ba);ib&&oa.selectionDefs&&(ib.subtract=tb,oa.selectionDefs.push(ib),oa.mergedPolygons.length=0,[].push.apply(oa.mergedPolygons,Na));oa.doneFnCompleted&&oa.doneFnCompleted(Za)}).catch(L.error);ka&&h(oa)}},clearSelect:X,clearSelectionsCache:h,selectOnClick:r}},{"../../components/color":643,"../../components/dragelement/helpers":661,"../../components/drawing":665,"../../components/fx":683,"../../components/fx/helpers":679,"../../components/shapes/draw_newshape/display_outlines":728,
"../../components/shapes/draw_newshape/helpers":729,"../../components/shapes/draw_newshape/newshapes":730,"../../lib":778,"../../lib/clear_gl_canvases":762,"../../lib/polygon":790,"../../lib/throttle":804,"../../plot_api/subroutines":818,"../../registry":911,"./axis_ids":831,"./constants":834,"./handle_outline":838,"./helpers":839,polybooljs:517}],848:[function(b,N,I){function r(u){return Math.pow(10,u)}var q=b("d3"),m=b("d3-time-format").utcFormat,l=b("fast-isnumeric"),a=b("../../lib"),h=a.cleanNumber,
g=a.ms2DateTime,n=a.dateTime2ms,p=a.ensureNumber,d=a.isArrayOrTypedArray;I=b("../../constants/numerical");var e=I.FP_SAFE,f=I.BADNUM,k=I.LOG_CLIP,t=I.ONEWEEK,v=I.ONEDAY,w=I.ONEHOUR,y=I.ONEMIN,B=I.ONESEC,A=b("./axis_ids"),z=b("./constants"),E=z.HOUR_PATTERN,C=z.WEEKDAY_PATTERN;N.exports=function(u,D){function G(ca,ia){return 0<ca?Math.log(ca)/Math.LN10:0>=ca&&ia&&u.range&&2===u.range.length?(ca=u.range[0],ia=u.range[1],.5*(ca+ia-2*k*Math.abs(ca-ia))):f}function J(ca,ia,ja,la){if((la||{}).msUTC&&l(ca))return+ca;
ia=n(ca,ja||u.calendar);if(ia===f)if(l(ca))ca=+ca,ia=Math.floor(10*a.mod(ca+.05,1)),ia=n(new Date(Math.round(ca-ia/10)))+ia/10;else return f;return ia}function L(ca,ia,ja){return g(ca,ia,ja||u.calendar)}function K(ca){return u._categories[Math.round(ca)]}function H(ca){if(null!==ca&&void 0!==ca){void 0===u._categoriesMap&&(u._categoriesMap={});if(void 0!==u._categoriesMap[ca])return u._categoriesMap[ca];u._categories.push("number"===typeof ca?String(ca):ca);var ia=u._categories.length-1;return u._categoriesMap[ca]=
ia}return f}function Q(ca){if(u._categoriesMap)return u._categoriesMap[ca]}function M(ca){var ia=Q(ca);if(void 0!==ia)return ia;if(l(ca))return+ca}function P(ca){return l(ca)?+ca:Q(ca)}D=D||{};var T=u._id||"x",O=T.charAt(0),U=function(ca){return l(ca)?q.round(u._b+u._m*ca,2):f},S=function(ca){return(ca-u._b)/u._m};if(u.rangebreaks){var X="y"===O;U=function(ca){if(!l(ca))return f;var ia=u._rangebreaks.length;if(!ia)return q.round(u._b+u._m*ca,2);var ja=X;u.range[0]>u.range[1]&&(ja=!ja);ja=ja?-1:1;
for(var la=ja*ca,da=0,oa=0;oa<ia;oa++){var sa=ja*u._rangebreaks[oa].min,ma=ja*u._rangebreaks[oa].max;if(la<sa)break;if(la>ma)da=oa+1;else{da=la<(sa+ma)/2?oa:oa+1;break}}ia=u._B[da]||0;return isFinite(ia)?q.round(ia+u._m2*ca,2):0};S=function(ca){var ia=u._rangebreaks.length;if(!ia)return(ca-u._b)/u._m;for(var ja=0,la=0;la<ia&&!(ca<u._rangebreaks[la].pmin);la++)ca>u._rangebreaks[la].pmax&&(ja=la+1);return(ca-u._B[ja])/u._m2}}u.c2l="log"===u.type?G:p;u.l2c="log"===u.type?r:p;u.l2p=U;u.p2l=S;u.c2p="log"===
u.type?function(ca,ia){return U(G(ca,ia))}:U;u.p2c="log"===u.type?function(ca){return r(S(ca))}:S;-1!==["linear","-"].indexOf(u.type)?(u.d2r=u.r2d=u.d2c=u.r2c=u.d2l=u.r2l=h,u.c2d=u.c2r=u.l2d=u.l2r=p,u.d2p=u.r2p=function(ca){return u.l2p(h(ca))},u.p2d=u.p2r=S,u.cleanPos=p):"log"===u.type?(u.d2r=u.d2l=function(ca,ia){return G(h(ca),ia)},u.r2d=u.r2c=function(ca){return r(h(ca))},u.d2c=u.r2l=h,u.c2d=u.l2r=p,u.c2r=G,u.l2d=r,u.d2p=function(ca,ia){return u.l2p(u.d2r(ca,ia))},u.p2d=function(ca){return r(S(ca))},
u.r2p=function(ca){return u.l2p(h(ca))},u.p2r=S,u.cleanPos=p):"date"===u.type?(u.d2r=u.r2d=a.identity,u.d2c=u.r2c=u.d2l=u.r2l=J,u.c2d=u.c2r=u.l2d=u.l2r=L,u.d2p=u.r2p=function(ca,ia,ja){return u.l2p(J(ca,0,ja))},u.p2d=u.p2r=function(ca,ia,ja){return L(S(ca),ia,ja)},u.cleanPos=function(ca){return a.cleanDate(ca,f,u.calendar)}):"category"===u.type?(u.d2c=u.d2l=H,u.r2d=u.c2d=u.l2d=K,u.d2r=u.d2l_noadd=M,u.r2c=function(ca){ca=P(ca);return void 0!==ca?ca:u.fraction2r(.5)},u.l2r=u.c2r=p,u.r2l=P,u.d2p=function(ca){return u.l2p(u.r2c(ca))},
u.p2d=function(ca){return K(S(ca))},u.r2p=u.d2p,u.p2r=S,u.cleanPos=function(ca){return"string"===typeof ca&&""!==ca?ca:p(ca)}):"multicategory"===u.type&&(u.r2d=u.c2d=u.l2d=K,u.d2r=u.d2l_noadd=M,u.r2c=function(ca){ca=M(ca);return void 0!==ca?ca:u.fraction2r(.5)},u.r2c_just_indices=Q,u.l2r=u.c2r=p,u.r2l=M,u.d2p=function(ca){return u.l2p(u.r2c(ca))},u.p2d=function(ca){return K(S(ca))},u.r2p=u.d2p,u.p2r=S,u.cleanPos=function(ca){return Array.isArray(ca)||"string"===typeof ca&&""!==ca?ca:p(ca)},u.setupMultiCategory=
function(ca){var ia=u._traceIndices,ja,la=u._matchGroup;if(la&&0===u._categories.length)for(ja in la)ja!==T&&(la=D[A.id2name(ja)],ia=ia.concat(la._traceIndices));var da=[[0,{}],[0,{}]];la=[];for(ja=0;ja<ia.length;ja++){var oa=ca[ia[ja]];if(O in oa){var sa=oa[O],ma=oa._length||a.minRowLength(sa);if(d(sa[0])&&d(sa[1]))for(oa=0;oa<ma;oa++){var qa=sa[0][oa],pa=sa[1][oa];null!==qa&&void 0!==qa&&null!==pa&&void 0!==pa&&(la.push([qa,pa]),qa in da[0][1]||(da[0][1][qa]=da[0][0]++),pa in da[1][1]||(da[1][1][pa]=
da[1][0]++))}}}la.sort(function(na,ka){var ua=da[0][1];if(ua=ua[na[0]]-ua[ka[0]])return ua;ua=da[1][1];return ua[na[1]]-ua[ka[1]]});for(ja=0;ja<la.length;ja++)H(la[ja])});u.fraction2r=function(ca){var ia=u.r2l(u.range[0]),ja=u.r2l(u.range[1]);return u.l2r(ia+ca*(ja-ia))};u.r2fraction=function(ca){var ia=u.r2l(u.range[0]),ja=u.r2l(u.range[1]);return(u.r2l(ca)-ia)/(ja-ia)};u.cleanRange=function(ca,ia){ia||(ia={});ca||(ca="range");var ja=a.nestedProperty(u,ca).get();var la="date"===u.type?a.dfltRange(u.calendar):
"y"===O?z.DFLTRANGEY:ia.dfltRange||z.DFLTRANGEX;la=la.slice();if("tozero"===u.rangemode||"nonnegative"===u.rangemode)la[0]=0;if(ja&&2===ja.length)for("date"!==u.type||u.autorange||(ja[0]=a.cleanDate(ja[0],f,u.calendar),ja[1]=a.cleanDate(ja[1],f,u.calendar)),ia=0;2>ia;ia++)if("date"===u.type){if(!a.isDateTime(ja[ia],u.calendar)){u[ca]=la;break}if(u.r2l(ja[0])===u.r2l(ja[1])){ca=a.constrain(u.r2l(ja[0]),a.MIN_MS+1E3,a.MAX_MS-1E3);ja[0]=u.l2r(ca-1E3);ja[1]=u.l2r(ca+1E3);break}}else{if(!l(ja[ia]))if(l(ja[1-
ia]))ja[ia]=ja[1-ia]*(ia?10:.1);else{u[ca]=la;break}ja[ia]<-e?ja[ia]=-e:ja[ia]>e&&(ja[ia]=e);if(ja[0]===ja[1]){var da=Math.max(1,Math.abs(1E-6*ja[0]));ja[0]-=da;ja[1]+=da}}else a.nestedProperty(u,ca).set(la)};u.setScale=function(ca){var ia=D._size;if(u.overlaying){var ja=A.getFromId({_fullLayout:D},u.overlaying);u.domain=ja.domain}ja=ca&&u._r?"_r":"range";var la=u.calendar;u.cleanRange(ja);ca=u.r2l(u[ja][0],la);ja=u.r2l(u[ja][1],la);(la="y"===O)?(u._offset=ia.t+(1-u.domain[1])*ia.h,u._length=ia.h*
(u.domain[1]-u.domain[0]),u._m=u._length/(ca-ja),u._b=-u._m*ja):(u._offset=ia.l+u.domain[0]*ia.w,u._length=ia.w*(u.domain[1]-u.domain[0]),u._m=u._length/(ja-ca),u._b=-u._m*ca);u._rangebreaks=[];u._lBreaks=0;u._m2=0;u._B=[];if(u.rangebreaks&&(u._rangebreaks=u.locateBreaks(Math.min(ca,ja),Math.max(ca,ja)),u._rangebreaks.length)){for(ia=0;ia<u._rangebreaks.length;ia++){var da=u._rangebreaks[ia];u._lBreaks+=Math.abs(da.max-da.min)}ia=la;ca>ja&&(ia=!ia);ia&&u._rangebreaks.reverse();var oa=ia?-1:1;u._m2=
oa*u._length/(Math.abs(ja-ca)-u._lBreaks);u._B.push(-u._m2*(la?ja:ca));for(ia=0;ia<u._rangebreaks.length;ia++)da=u._rangebreaks[ia],u._B.push(u._B[u._B.length-1]-oa*u._m2*(da.max-da.min));for(ia=0;ia<u._rangebreaks.length;ia++)da=u._rangebreaks[ia],da.pmin=U(da.min),da.pmax=U(da.max)}if(!isFinite(u._m)||!isFinite(u._b)||0>u._length)throw D._replotting=!1,Error("Something went wrong with axis scaling");};u.maskBreaks=function(ca){for(var ia=u.rangebreaks||[],ja,la,da,oa,sa=0;sa<ia.length;sa++){var ma=
ia[sa];if(ma.enabled)if(ma.bounds){var qa=ma.pattern;ja=a.simpleMap(ma.bounds,qa?h:u.d2c);la=ja[0];ja=ja[1];switch(qa){case C:oa=new Date(ca);da=oa.getUTCDay();la>ja&&(ja+=7,da<la&&(da+=7));break;case E:oa=new Date(ca);da=oa.getUTCHours();ma=oa.getUTCMinutes();qa=oa.getUTCSeconds();oa=oa.getUTCMilliseconds();da+=ma/60+qa/3600+oa/36E5;la>ja&&(ja+=24,da<la&&(da+=24));break;case "":da=ca}if(da>=la&&da<ja)return f}else for(qa=a.simpleMap(ma.values,u.d2c).sort(a.sorterAsc),oa=0;oa<qa.length;oa++)if(la=
qa[oa],ja=la+ma.dvalue,ca>=la&&ca<ja)return f}return ca};u.locateBreaks=function(ca,ia){var ja,la=[];if(!u.rangebreaks)return la;var da=u.rangebreaks.slice().sort(function(va,Ca){return va.pattern===C&&Ca.pattern===E?-1:Ca.pattern===C&&va.pattern===E?1:0}),oa=function(va,Ca){va=a.constrain(va,ca,ia);Ca=a.constrain(Ca,ca,ia);if(va!==Ca){for(var Ma=!0,Ua=0;Ua<la.length;Ua++){var eb=la[Ua];va<eb.max&&Ca>=eb.min&&(va<eb.min&&(eb.min=va),Ca>eb.max&&(eb.max=Ca),Ma=!1)}Ma&&la.push({min:va,max:Ca})}};for(ja=
0;ja<da.length;ja++){var sa=da[ja];if(sa.enabled)if(sa.bounds){var ma=ca,qa=ia;sa.pattern&&(ma=Math.floor(ma));var pa=a.simpleMap(sa.bounds,sa.pattern?h:u.r2l);var na=pa[0];var ka=pa[1];var ua=new Date(ma);switch(sa.pattern){case C:sa=t;ka=((ka<na?7:0)+(ka-na))*v;ma+=na*v-(ua.getUTCDay()*v+ua.getUTCHours()*w+ua.getUTCMinutes()*y+ua.getUTCSeconds()*B+ua.getUTCMilliseconds());break;case E:sa=v;ka=((ka<na?24:0)+(ka-na))*w;ma+=na*w-(ua.getUTCHours()*w+ua.getUTCMinutes()*y+ua.getUTCSeconds()*B+ua.getUTCMilliseconds());
break;default:ma=Math.min(pa[0],pa[1]),qa=Math.max(pa[0],pa[1]),ka=sa=qa-ma}for(na=ma;na<qa;na+=sa)oa(na,na+ka)}else for(qa=a.simpleMap(sa.values,u.d2c),ma=0;ma<qa.length;ma++)na=qa[ma],ka=na+sa.dvalue,oa(na,ka)}la.sort(function(va,Ca){return va.min-Ca.min});return la};u.makeCalcdata=function(ca,ia,ja){var la;var da=u.type;var oa="date"===da&&ca[ia+"calendar"];if(ia in ca){ia=ca[ia];ca=ca._length||a.minRowLength(ia);if(a.isTypedArray(ia)&&("linear"===da||"log"===da)){if(ca===ia.length)return ia;if(ia.subarray)return ia.subarray(0,
ca)}if("multicategory"===da){ja=Array(ca);for(oa=0;oa<ca;oa++)ja[oa]=Q([(ia[0]||[])[oa],(ia[1]||[])[oa]]);return ja}da=Array(ca);for(la=0;la<ca;la++)da[la]=u.d2c(ia[la],0,oa,ja)}else for(ja=(ia+"0"in ca)?u.d2c(ca[ia+"0"],0,oa):0,oa=ca["d"+ia]?Number(ca["d"+ia]):1,ia=ca[{x:"y",y:"x"}[ia]],ca=ca._length||ia.length,da=Array(ca),la=0;la<ca;la++)da[la]=ja+la*oa;if(u.rangebreaks)for(la=0;la<ca;la++)da[la]=u.maskBreaks(da[la]);return da};u.isValidRange=function(ca){return Array.isArray(ca)&&2===ca.length&&
l(u.r2l(ca[0]))&&l(u.r2l(ca[1]))};u.isPtWithinRange=function(ca,ia){ca=u.c2l(ca[O],null,ia);ia=u.r2l(u.range[0]);var ja=u.r2l(u.range[1]);return ia<ja?ia<=ca&&ca<=ja:ja<=ca&&ca<=ia};u._emptyCategories=function(){u._categories=[];u._categoriesMap={}};u.clearCalc=function(){var ca=u._matchGroup;if(ca){var ia=null,ja=null,la;for(la in ca)if(ca=D[A.id2name(la)],ca._categories){ia=ca._categories;ja=ca._categoriesMap;break}ia&&ja?(u._categories=ia,u._categoriesMap=ja):u._emptyCategories()}else u._emptyCategories();
if(u._initialCategories)for(ia=0;ia<u._initialCategories.length;ia++)H(u._initialCategories[ia])};u.sortByInitialCategories=function(){var ca=[];u._emptyCategories();if(u._initialCategories)for(var ia=0;ia<u._initialCategories.length;ia++)H(u._initialCategories[ia]);ca=ca.concat(u._traceIndices);ia=u._matchGroup;for(var ja in ia)T!==ja&&(ia=D[A.id2name(ja)],ia._categories=u._categories,ia._categoriesMap=u._categoriesMap,ca=ca.concat(ia._traceIndices));return ca};var ba=D._d3locale;"date"===u.type&&
(u._dateFormat=ba?ba.timeFormat:m,u._extraFormat=D._extraFormat);u._separators=D.separators;u._numFormat=ba?ba.numberFormat:q.format;delete u._minDtick;delete u._forceTick0}},{"../../constants/numerical":753,"../../lib":778,"./axis_ids":831,"./constants":834,d3:169,"d3-time-format":166,"fast-isnumeric":241}],849:[function(b,N,I){function r(g){var n=["showexponent","showtickprefix","showticksuffix"].filter(function(p){return void 0!==g[p]});if(n.every(function(p){return g[p]===g[n[0]]})||1===n.length)return g[n[0]]}
function q(g,n){m.coerce(g,n,a.tickformatstops,"enabled",void 0)&&(m.coerce(g,n,a.tickformatstops,"dtickrange",void 0),m.coerce(g,n,a.tickformatstops,"value",void 0))}var m=b("../../lib"),l=b("../../components/color").contrast,a=b("./layout_attributes"),h=b("../array_container_defaults");N.exports=function(g,n,p,d,e,f){if(!f||1===f.pass){var k=r(g);p("tickprefix")&&p("showtickprefix",k);p("ticksuffix",e.tickSuffixDflt)&&p("showticksuffix",k)}if(!f||2===f.pass)if(f=r(g),p("tickprefix")&&p("showtickprefix",
f),p("ticksuffix",e.tickSuffixDflt)&&p("showticksuffix",f),p("showticklabels")){k=e.font||{};var t=n.color;e=-1!==(n.ticklabelposition||"").indexOf("inside")?l(e.bgColor):t&&t!==a.color.dflt?t:k.color;m.coerceFont(p,"tickfont",{family:k.family,size:k.size,color:e});p("tickangle");"category"!==d&&(e=p("tickformat"),h(g,n,{name:"tickformatstops",inclusionAttr:"enabled",handleItemDefaults:q}),n.tickformatstops.length||delete n.tickformatstops,e||"date"===d||(p("showexponent",f),p("exponentformat"),p("minexponent"),
p("separatethousands")))}}},{"../../components/color":643,"../../lib":778,"../array_container_defaults":823,"./layout_attributes":842}],850:[function(b,N,I){var r=b("../../lib"),q=b("./layout_attributes");N.exports=function(m,l,a,h){var g=r.coerce2(m,l,q,"ticklen"),n=r.coerce2(m,l,q,"tickwidth");m=r.coerce2(m,l,q,"tickcolor",l.color);a("ticks",h.outerTicks||g||n||m?"outside":"")||(delete l.ticklen,delete l.tickwidth,delete l.tickcolor)}},{"../../lib":778,"./layout_attributes":842}],851:[function(b,
N,I){var r=b("./clean_ticks"),q=b("../../lib").isArrayOrTypedArray;N.exports=function(m,l,a,h){function g(e){var f=m[e];return void 0!==f?f:(l._template||{})[e]}var n=g("tick0"),p=g("dtick"),d=g("tickvals");d=q(d)?"array":p?"linear":"auto";d=a("tickmode",d);"auto"===d?a("nticks"):"linear"===d?(a=l.dtick=r.dtick(p,h),l.tick0=r.tick0(n,h,l.calendar,a)):"multicategory"!==h&&(void 0===a("tickvals")?l.tickmode="auto":a("ticktext"))}},{"../../lib":778,"./clean_ticks":833}],852:[function(b,N,I){var r=b("d3"),
q=b("../../registry"),m=b("../../lib"),l=b("../../components/drawing"),a=b("./axes");N.exports=function(h,g,n,p){function d(z){var E=z.xaxis,C=z.yaxis;t._defs.select("#"+z.clipId+"\x3e rect").call(l.setTranslate,0,0).call(l.setScale,1,1);z.plot.call(l.setTranslate,E._offset,C._offset).call(l.setScale,1,1);E=z.plot.selectAll(".scatterlayer .trace");E.selectAll(".point").call(l.setPointGroupScale,1,1);E.selectAll(".textpoint").call(l.setTextPointsScale,1,1);E.call(l.hideOutsideRangePoints,z)}function e(){for(var z=
{},E=0;E<g.length;E++){var C=g[E],u=C.plotinfo.xaxis,D=C.plotinfo.yaxis;C.xr1&&(z[u._name+".range"]=C.xr1.slice());C.yr1&&(z[D._name+".range"]=C.yr1.slice())}v&&v();return q.call("relayout",h,z).then(function(){for(var G=0;G<g.length;G++)d(g[G].plotinfo)})}function f(){for(var z={},E=0;E<g.length;E++){var C=g[E],u=C.plotinfo.xaxis,D=C.plotinfo.yaxis;C.xr0&&(z[u._name+".range"]=C.xr0.slice());C.yr0&&(z[D._name+".range"]=C.yr0.slice())}return q.call("relayout",h,z).then(function(){for(var G=0;G<g.length;G++)d(g[G].plotinfo)})}
function k(){w=Date.now();for(var z=y(Math.min(1,(w-B)/n.duration)),E=0;E<g.length;E++){var C=g[E],u=z,D=C.plotinfo,G=D.xaxis,J=D.yaxis,L=G._length,K=J._length,H=!!C.xr1,Q=!!C.yr1,M=[];if(H){var P=m.simpleMap(C.xr0,G.r2l),T=m.simpleMap(C.xr1,G.r2l),O=P[1]-P[0],U=T[1]-T[0];M[0]=(P[0]*(1-u)+u*T[0]-P[0])/(P[1]-P[0])*L;M[2]=L*(1-u+u*U/O);G.range[0]=G.l2r(P[0]*(1-u)+u*T[0]);G.range[1]=G.l2r(P[1]*(1-u)+u*T[1])}else M[0]=0,M[2]=L;Q?(P=m.simpleMap(C.yr0,J.r2l),C=m.simpleMap(C.yr1,J.r2l),T=P[1]-P[0],O=C[1]-
C[0],M[1]=(P[1]*(1-u)+u*C[1]-P[1])/(P[0]-P[1])*K,M[3]=K*(1-u+u*O/T),J.range[0]=G.l2r(P[0]*(1-u)+u*C[0]),J.range[1]=J.l2r(P[1]*(1-u)+u*C[1])):(M[1]=0,M[3]=K);a.drawOne(h,G,{skipTitle:!0});a.drawOne(h,J,{skipTitle:!0});a.redrawComponents(h,[G._id,J._id]);u=H?L/M[2]:1;C=Q?K/M[3]:1;G=G._offset-(H?M[0]/M[2]*L:0);J=J._offset-(Q?M[1]/M[3]*K:0);D.clipRect.call(l.setTranslate,H?M[0]:0,Q?M[1]:0).call(l.setScale,1/u,1/C);D.plot.call(l.setTranslate,G,J).call(l.setScale,u,C);l.setPointGroupScale(D.zoomScalePts,
1/u,1/C);l.setTextPointsScale(D.zoomScaleTxt,1/u,1/C)}w-B>n.duration?(e(),A=window.cancelAnimationFrame(k)):A=window.requestAnimationFrame(k)}var t=h._fullLayout;if(0===g.length)a.redrawComponents(h);else{var v;p&&(v=p());var w,y=r.ease(n.easing);h._transitionData._interruptCallbacks.push(function(){window.cancelAnimationFrame(A);A=null;return f()});var B=Date.now();var A=window.requestAnimationFrame(k);return Promise.resolve()}}},{"../../components/drawing":665,"../../lib":778,"../../registry":911,
"./axes":828,d3:169}],853:[function(b,N,I){function r(l,a){var h={v:"x",h:"y"}[l.orientation||"v"],g=q(l,"box-violin"),n=q(l._fullInput||{},"candlestick");return g&&!n&&a===h&&void 0===l[h]&&void 0===l[h+"0"]}var q=b("../../registry").traceIs,m=b("./axis_autotype");N.exports=function(l,a,h,g){h("autotypenumbers",g.autotypenumbersDflt);if("-"===h("type",(g.splomStash||{}).type)){h=g.data;if("-"===a.type){g=a._id;var n=g.charAt(0);-1!==g.indexOf("scene")&&(g=n);b:{for(var p=g,d=0;d<h.length;d++){var e=
h[d];if("splom"===e.type&&0<e._length&&(e["_"+n+"axes"]||{})[p]||(e[n+"axis"]||n)===p&&(r(e,n)||(e[n]||[]).length||e[n+"0"])){var f=e;break b}}f=void 0}if(f)if("histogram"===f.type&&n==={v:"y",h:"x"}[f.orientation||"v"])a.type="linear";else if(e=n+"calendar",p=f[e],d={noMultiCategory:!q(f,"cartesian")||q(f,"noMultiCategory")},"box"===f.type&&f._hasPreCompStats&&n==={h:"x",v:"y"}[f.orientation||"v"]&&(d.noMultiCategory=!0),d.autotypenumbers=a.autotypenumbers,r(f,n)){var k={v:"x",h:"y"}[f.orientation||
"v"],t=[];for(f=0;f<h.length;f++){var v=h[f];q(v,"box-violin")&&(v[n+"axis"]||n)===g&&(void 0!==v[k]?t.push(v[k][0]):void 0!==v.name?t.push(v.name):t.push("text"),v[e]!==p&&(p=void 0))}a.type=m(t,p,d)}else"splom"===f.type?(h=f.dimensions[f._axesDim[g]],h.visible&&(a.type=m(h.values,p,d))):a.type=m(f[n]||[f[n+"0"]],p,d)}"-"===a.type?a.type="linear":l.type=a.type}}},{"../../registry":911,"./axis_autotype":829}],854:[function(b,N,I){function r(g,n,p){var d=!1;if("data"===n.type)g=g._fullData[null!==
n.traces?n.traces[0]:0];else if("layout"===n.type)g=g._fullLayout;else return!1;g=h.nestedProperty(g,n.prop).get();p=p[n.type]=p[n.type]||{};p.hasOwnProperty(n.prop)&&p[n.prop]!==g&&(d=!0);p[n.prop]=g;return{changed:d,value:g}}function q(g,n){var p=[];g=n[0];var d={};if("string"===typeof g)d[g]=n[1];else if(h.isPlainObject(g))d=g;else return p;l(d,function(e,f,k){p.push({type:"layout",prop:e,value:k})},"",0);return p}function m(g,n){var p=[];var d=n[0];var e=n[1];var f=n[2];n={};if("string"===typeof d)n[d]=
e;else if(h.isPlainObject(d))n=d,void 0===f&&(f=e);else return p;void 0===f&&(f=null);l(n,function(k,t,v){if(Array.isArray(v)){v=v.slice();var w=Math.min(v.length,g.data.length);f&&(w=Math.min(w,f.length));t=[];for(var y=0;y<w;y++)t[y]=f?f[y]:y}else t=f?f.slice():null;if(null===t)Array.isArray(v)&&(v=v[0]);else if(Array.isArray(t)){if(!Array.isArray(v))for(w=v,v=[],y=0;y<t.length;y++)v[y]=w;v.length=Math.min(t.length,v.length)}p.push({type:"data",prop:k,traces:t,value:v})},"",0);return p}function l(g,
n,p,d){Object.keys(g).forEach(function(e){var f=g[e];if("_"!==e[0]){var k=p+(0<d?".":"")+e;h.isPlainObject(f)?l(f,n,k,d+1):n(k,e,f)}})}var a=b("../registry"),h=b("../lib");I.manageCommandObserver=function(g,n,p,d){var e={},f=!0;n&&n._commandObserver&&(e=n._commandObserver);e.cache||(e.cache={});e.lookupTable={};var k=I.hasSimpleAPICommandBindings(g,p,e.lookupTable);if(n&&n._commandObserver){if(k)return e;if(n._commandObserver.remove)return n._commandObserver.remove(),n._commandObserver=null,e}if(k){r(g,
k,e.cache);e.check=function(){if(f){var v=r(g,k,e.cache);v.changed&&d&&void 0!==e.lookupTable[v.value]&&(e.disable(),Promise.resolve(d({value:v.value,type:k.type,prop:k.prop,traces:k.traces,index:e.lookupTable[v.value]})).then(e.enable,e.enable));return v.changed}};var t="plotly_relayout plotly_redraw plotly_restyle plotly_update plotly_animatingframe plotly_afterplot".split(" ");for(p=0;p<t.length;p++)g._internalOn(t[p],e.check);e.remove=function(){for(var v=0;v<t.length;v++)g._removeInternalListener(t[v],
e.check)}}else h.log("Unable to automatically bind plot updates to API command"),e.lookupTable={},e.remove=function(){};e.disable=function(){f=!1};e.enable=function(){f=!0};n&&(n._commandObserver=e);return e};I.hasSimpleAPICommandBindings=function(g,n,p){var d,e=n.length;for(d=0;d<e;d++){var f=n[d];var k=f.method;f=f.args;Array.isArray(f)||(f=[]);if(!k)return!1;f=I.computeAPICommandBindings(g,k,f);if(1!==f.length)return!1;if(v){k=f[0];if(k.type!==v.type||k.prop!==v.prop)return!1;if(Array.isArray(v.traces))if(Array.isArray(k.traces)){k.traces.sort();
for(var t=0;t<v.traces.length;t++)if(v.traces[t]!==k.traces[t])return!1}else return!1;else if(k.prop!==v.prop)return!1}else{var v=f[0];Array.isArray(v.traces)&&v.traces.sort()}k=f[0];k=k.value;if(Array.isArray(k))if(1===k.length)k=k[0];else return!1;p&&(p[k]=d)}return v};I.executeAPICommand=function(g,n,p){if("skip"===n)return Promise.resolve();var d=a.apiMethodRegistry[n];g=[g];Array.isArray(p)||(p=[]);for(var e=0;e<p.length;e++)g.push(p[e]);return d.apply(null,g).catch(function(f){h.warn("API call to Plotly."+
n+" rejected.",f);return Promise.reject(f)})};I.computeAPICommandBindings=function(g,n,p){Array.isArray(p)||(p=[]);switch(n){case "restyle":g=m(g,p);break;case "relayout":g=q(g,p);break;case "update":g=m(g,[p[0],p[2]]).concat(q(g,[p[1]]));break;case "animate":g=p;g=Array.isArray(g[0])&&1===g[0].length&&-1!==["string","number"].indexOf(typeof g[0][0])?[{type:"layout",prop:"_currentFrame",value:g[0][0].toString()}]:[];break;default:g=[]}return g}},{"../lib":778,"../registry":911}],855:[function(b,N,
I){var r=b("../lib/extend").extendFlat;I.attributes=function(q,m){q=q||{};m={valType:"info_array",editType:q.editType,items:[{valType:"number",min:0,max:1,editType:q.editType},{valType:"number",min:0,max:1,editType:q.editType}],dflt:[0,1]};m={x:r({},m,{}),y:r({},m,{}),editType:q.editType};q.noGridCell||(m.row={valType:"integer",min:0,dflt:0,editType:q.editType},m.column={valType:"integer",min:0,dflt:0,editType:q.editType});return m};I.defaults=function(q,m,l,a){var h=a&&a.x||[0,1];a=a&&a.y||[0,1];
if(m=m.grid){var g=l("domain.column");void 0!==g&&(g<m.columns?h=m._domains.x[g]:delete q.domain.column);g=l("domain.row");void 0!==g&&(g<m.rows?a=m._domains.y[g]:delete q.domain.row)}m=l("domain.x",h);l=l("domain.y",a);m[0]<m[1]||(q.domain.x=h.slice());l[0]<l[1]||(q.domain.y=a.slice())}},{"../lib/extend":768}],856:[function(b,N,I){N.exports=function(r){var q=r.editType,m=r.colorEditType;void 0===m&&(m=q);q={family:{valType:"string",noBlank:!0,strict:!0,editType:q},size:{valType:"number",min:1,editType:q},
color:{valType:"color",editType:m},editType:q};r.arrayOk&&(q.family.arrayOk=!0,q.size.arrayOk=!0,q.color.arrayOk=!0);return q}},{}],857:[function(b,N,I){N.exports={_isLinkedToArray:"frames_entry",group:{valType:"string"},name:{valType:"string"},traces:{valType:"any"},baseframe:{valType:"string"},data:{valType:"any"},layout:{valType:"any"}}},{}],858:[function(b,N,I){I.projNames={equirectangular:"equirectangular",mercator:"mercator",orthographic:"orthographic","natural earth":"naturalEarth",kavrayskiy7:"kavrayskiy7",
miller:"miller",robinson:"robinson",eckert4:"eckert4","azimuthal equal area":"azimuthalEqualArea","azimuthal equidistant":"azimuthalEquidistant","conic equal area":"conicEqualArea","conic conformal":"conicConformal","conic equidistant":"conicEquidistant",gnomonic:"gnomonic",stereographic:"stereographic",mollweide:"mollweide",hammer:"hammer","transverse mercator":"transverseMercator","albers usa":"albersUsa","winkel tripel":"winkel3",aitoff:"aitoff",sinusoidal:"sinusoidal"};I.axesNames=["lonaxis",
"lataxis"];I.lonaxisSpan={orthographic:180,"azimuthal equal area":360,"azimuthal equidistant":360,"conic conformal":180,gnomonic:160,stereographic:180,"transverse mercator":180,"*":360};I.lataxisSpan={"conic conformal":150,stereographic:179.5,"*":180};I.scopeDefaults={world:{lonaxisRange:[-180,180],lataxisRange:[-90,90],projType:"equirectangular",projRotate:[0,0,0]},usa:{lonaxisRange:[-180,-50],lataxisRange:[15,80],projType:"albers usa"},europe:{lonaxisRange:[-30,60],lataxisRange:[30,85],projType:"conic conformal",
projRotate:[15,0,0],projParallels:[0,60]},asia:{lonaxisRange:[22,160],lataxisRange:[-15,55],projType:"mercator",projRotate:[0,0,0]},africa:{lonaxisRange:[-30,60],lataxisRange:[-40,40],projType:"mercator",projRotate:[0,0,0]},"north america":{lonaxisRange:[-180,-45],lataxisRange:[5,85],projType:"conic conformal",projRotate:[-100,0,0],projParallels:[29.5,45.5]},"south america":{lonaxisRange:[-100,-30],lataxisRange:[-60,15],projType:"mercator",projRotate:[0,0,0]}};I.clipPad=.001;I.precision=.1;I.landColor=
"#F0DC82";I.waterColor="#3399FF";I.locationmodeToLayer={"ISO-3":"countries","USA-states":"subunits","country names":"countries"};I.sphereSVG={type:"Sphere"};I.fillLayers={ocean:1,land:1,lakes:1};I.lineLayers={subunits:1,countries:1,coastlines:1,rivers:1,frame:1};I.layers="bg ocean land lakes subunits countries coastlines rivers lataxis lonaxis frame backplot frontplot".split(" ");I.layersForChoropleth="bg ocean land subunits countries coastlines lataxis lonaxis frame backplot rivers lakes frontplot".split(" ");
I.layerNameToAdjective={ocean:"ocean",land:"land",lakes:"lake",subunits:"subunit",countries:"country",coastlines:"coastline",rivers:"river",frame:"frame"}},{}],859:[function(b,N,I){function r(D){this.id=D.id;this.graphDiv=D.graphDiv;this.container=D.container;this.topojsonURL=D.topojsonURL;this.isStatic=D.staticPlot;this.midPt=this.bounds=this.fitScale=this.viewInitial=this.scope=this.projection=this.topojson=this.topojsonName=null;this.hasChoropleth=!1;this.traceHash={};this.layers={};this.basePaths=
{};this.dataPaths={};this.dataPoints={};this.bgRect=this.clipRect=this.clipDef=null;this.makeFramework()}function q(D){var G=D.projection.type,J=a.geo[z.projNames[G]](),L=D._isClipped?z.lonaxisSpan[G]/2:null;D=["center","rotate","parallels","clipExtent"];G=function(Q){return Q?J:[]};for(var K=0;K<D.length;K++){var H=D[K];"function"!==typeof J[H]&&(J[H]=G)}J.isLonLatOverEdges=function(Q){if(null===J(Q))return!0;if(L){var M=J.rotate();return a.geo.distance(Q,[-M[0],-M[1]])>L*Math.PI/180}return!1};J.getPath=
function(){return a.geo.path().projection(J)};J.getBounds=function(Q){return J.getPath().bounds(Q)};J.fitExtent=function(Q,M){var P=Q[1][0]-Q[0][0],T=Q[1][1]-Q[0][1],O=J.clipExtent&&J.clipExtent();J.scale(150).translate([0,0]);O&&J.clipExtent(null);var U=J.getBounds(M);M=Math.min(P/(U[1][0]-U[0][0]),T/(U[1][1]-U[0][1]));P=+Q[0][0]+(P-M*(U[1][0]+U[0][0]))/2;Q=+Q[0][1]+(T-M*(U[1][1]+U[0][1]))/2;O&&J.clipExtent(O);return J.scale(150*M).translate([P,Q])};J.precision(z.precision);L&&J.clipAngle(L-z.clipPad);
return J}function m(D,G,J){var L=G[D],K=z.scopeDefaults[G.scope];if("lonaxis"===D){var H=K.lonaxisRange;var Q=K.lataxisRange;var M=function(T,O){return[T,O]}}else"lataxis"===D&&(H=K.lataxisRange,Q=K.lonaxisRange,M=function(T,O){return[O,T]});L={type:"linear",range:[H[0],H[1]-1E-6],tick0:L.tick0,dtick:L.dtick};k.setConvert(L,J);J=k.calcTicks(L);G.isScoped||"lonaxis"!==D||J.pop();D=J.length;G=Array(D);for(L=0;L<D;L++){K=J[L].x;H=G[L]=[];for(var P=Q[0];P<Q[1]+2.5;P+=2.5)H.push(M(K,P))}return{type:"MultiLineString",
coordinates:G}}function l(D,G){var J=z.clipPad,L=D[0]+J;D=D[1]-J;var K=G[0]+J;G=G[1]-J;0<L&&0>D&&(D+=360);J=(D-L)/4;return{type:"Polygon",coordinates:[[[L,K],[L,G],[L+J,G],[L+2*J,G],[L+3*J,G],[D,G],[D,K],[D-J,K],[D-2*J,K],[D-3*J,K],[L,K]]]}}var a=b("d3"),h=b("../../registry"),g=b("../../lib"),n=g.strTranslate,p=b("../../components/color"),d=b("../../components/drawing"),e=b("../../components/fx"),f=b("../plots"),k=b("../cartesian/axes"),t=b("../cartesian/autorange").getAutoRange,v=b("../../components/dragelement"),
w=b("../cartesian/select").prepSelect,y=b("../cartesian/select").clearSelect,B=b("../cartesian/select").selectOnClick,A=b("./zoom"),z=b("./constants"),E=b("../../lib/geo_location_utils"),C=b("../../lib/topojson_utils"),u=b("topojson-client").feature;b("./projections")(a);b=r.prototype;N.exports=function(D){return new r(D)};b.plot=function(D,G,J){var L=this,K=G[this.id],H=[],Q=!1,M;for(M in z.layerNameToAdjective)if("frame"!==M&&K["show"+M]){Q=!0;break}for(M=0;M<D.length;M++)if(D[0][0].trace.locationmode){Q=
!0;break}Q&&(K=C.getTopojsonName(K),null===L.topojson||K!==L.topojsonName)&&(L.topojsonName=K,void 0===PlotlyGeoAssets.topojson[L.topojsonName]&&H.push(L.fetchTopojson()));H=H.concat(E.fetchTraceGeoData(D));J.push(new Promise(function(P,T){Promise.all(H).then(function(){L.topojson=PlotlyGeoAssets.topojson[L.topojsonName];L.update(D,G);P()}).catch(T)}))};b.fetchTopojson=function(){var D=this,G=C.getTopojsonPath(D.topojsonURL,D.topojsonName);return new Promise(function(J,L){a.json(G,function(K,H){if(K)return 404===
K.status?L(Error(["plotly.js could not find topojson file at",G,". Make sure the *topojsonURL* plot config option is set properly."].join(" "))):L(Error(["unexpected error while fetching topojson file at",G].join(" ")));PlotlyGeoAssets.topojson[D.topojsonName]=H;J()})})};b.update=function(D,G){var J=G[this.id];this.hasChoropleth=!1;for(var L=0;L<D.length;L++){var K=D[L],H=K[0].trace;"choropleth"===H.type&&(this.hasChoropleth=!0);!0===H.visible&&0<H._length&&H._module.calcGeoJSON(K,G)}this.updateProjection(D,
G)||(this.viewInitial&&this.scope===J.scope||this.saveViewInitial(J),this.scope=J.scope,this.updateBaseLayers(G,J),this.updateDims(G,J),this.updateFx(G,J),f.generalUpdatePerTraceModule(this.graphDiv,this,D,J),D=this.layers.frontplot.select(".scatterlayer"),this.dataPoints.point=D.selectAll(".point"),this.dataPoints.text=D.selectAll("text"),this.dataPaths.line=D.selectAll(".js-line"),D=this.layers.backplot.select(".choroplethlayer"),this.dataPaths.choropleth=D.selectAll("path"),this.render())};b.updateProjection=
function(D,G){D=this.graphDiv;var J=G[this.id],L=G._size,K=J.domain,H=J.projection,Q=J.lonaxis,M=J.lataxis,P=Q._ax,T=M._ax;G=this.projection=q(J);K=[[L.l+L.w*K.x[0],L.t+L.h*(1-K.y[1])],[L.l+L.w*K.x[1],L.t+L.h*(1-K.y[0])]];L=J.center||{};var O=H.rotation||{},U=Q.range||[],S=M.range||[];J.fitbounds&&(P._length=K[1][0]-K[0][0],T._length=K[1][1]-K[0][1],P.range=t(D,P),T.range=t(D,T),M=(P.range[0]+P.range[1])/2,Q=(T.range[0]+T.range[1])/2,J._isScoped?L={lon:M,lat:Q}:J._isClipped?(L={lon:M,lat:Q},O={lon:M,
lat:Q,roll:O.roll},S=H.type,U=z.lonaxisSpan[S]/2||180,S=z.lataxisSpan[S]/2||90,U=[M-U,M+U],S=[Q-S,Q+S]):(L={lon:M,lat:Q},O={lon:M,lat:O.lat,roll:O.roll}));G.center([L.lon-O.lon,L.lat-O.lat]).rotate([-O.lon,-O.lat,O.roll]).parallels(H.parallels);O=l(U,S);G.fitExtent(K,O);K=this.bounds=G.getBounds(O);M=this.fitScale=G.scale();O=G.translate();if(!(isFinite(K[0][0])&&isFinite(K[0][1])&&isFinite(K[1][0])&&isFinite(K[1][1]))||isNaN(O[0])||isNaN(O[0])){G=["fitbounds","projection.rotation","center","lonaxis.range",
"lataxis.range"];J={};for(L=0;L<G.length;L++)J[this.id+"."+G[L]]=null;this.viewInitial=null;g.warn("Invalid geo settings, relayout'ing to default view.");D._promises.push(h.call("relayout",D,J));return"Invalid geo settings, relayout'ing to default view."}J.fitbounds?(D=G.getBounds(l(P.range,T.range)),D=Math.min((K[1][0]-K[0][0])/(D[1][0]-D[0][0]),(K[1][1]-K[0][1])/(D[1][1]-D[0][1])),isFinite(D)?G.scale(D*M):g.warn("Something went wrong during"+this.id+"fitbounds computations.")):G.scale(H.scale*M);
D=this.midPt=[(K[0][0]+K[1][0])/2,(K[0][1]+K[1][1])/2];G.translate([O[0]+(D[0]-O[0]),O[1]+(D[1]-O[1])]).clipExtent(K);J._isAlbersUsa&&(D=G([L.lon,L.lat]),J=G.translate(),G.translate([J[0]-(D[0]-J[0]),J[1]-(D[1]-J[1])]))};b.updateBaseLayers=function(D,G){function J(P){return"lonaxis"===P||"lataxis"===P}var L=this,K=L.topojson,H=L.layers,Q=L.basePaths,M=(this.hasChoropleth?z.layersForChoropleth:z.layers).filter(function(P){return z.lineLayers[P]||z.fillLayers[P]?G["show"+P]:J(P)?G[P].showgrid:!0});
M=L.framework.selectAll(".layer").data(M,String);M.exit().each(function(P){delete H[P];delete Q[P];a.select(this).remove()});M.enter().append("g").attr("class",function(P){return"layer "+P}).each(function(P){var T=H[P]=a.select(this);"bg"===P?L.bgRect=T.append("rect").style("pointer-events","all"):J(P)?Q[P]=T.append("path").style("fill","none"):"backplot"===P?T.append("g").classed("choroplethlayer",!0):"frontplot"===P?T.append("g").classed("scatterlayer",!0):z.lineLayers[P]?Q[P]=T.append("path").style("fill",
"none").style("stroke-miterlimit",2):z.fillLayers[P]&&(Q[P]=T.append("path").style("stroke","none"))});M.order();M.each(function(P){var T=Q[P],O=z.layerNameToAdjective[P];"frame"===P?T.datum(z.sphereSVG):z.lineLayers[P]||z.fillLayers[P]?T.datum(u(K,K.objects[P])):J(P)&&T.datum(m(P,G,D)).call(p.stroke,G[P].gridcolor).call(d.dashLine,"",G[P].gridwidth);z.lineLayers[P]?T.call(p.stroke,G[O+"color"]).call(d.dashLine,"",G[O+"width"]):z.fillLayers[P]&&T.call(p.fill,G[O+"color"])})};b.updateDims=function(D,
G){var J=this.bounds,L=(G.framewidth||0)/2;D=J[0][0]-L;var K=J[0][1]-L,H=J[1][0]-D+L;J=J[1][1]-K+L;d.setRect(this.clipRect,D,K,H,J);this.bgRect.call(d.setRect,D,K,H,J).call(p.fill,G.bgcolor);this.xaxis._offset=D;this.xaxis._length=H;this.yaxis._offset=K;this.yaxis._length=J};b.updateFx=function(D,G){function J(){var U=K.viewInitial,S={},X;for(X in U)S[K.id+"."+X]=U[X];h.call("_guiRelayout",H,S);H.emit("plotly_doubleclick",null)}function L(U){return K.projection.invert([U[0]+K.xaxis._offset,U[1]+K.yaxis._offset])}
var K=this,H=K.graphDiv,Q=K.bgRect,M=D.dragmode,P=D.clickmode;if(!K.isStatic){var T;"select"===M?T=function(U,S){(U.range={})[K.id]=[L([S.xmin,S.ymin]),L([S.xmax,S.ymax])]}:"lasso"===M&&(T=function(U,S,X){(U.lassoPoints={})[K.id]=X.filtered.map(L)});var O={element:K.bgRect.node(),gd:H,plotinfo:{id:K.id,xaxis:K.xaxis,yaxis:K.yaxis,fillRangeItems:T},xaxes:[K.xaxis],yaxes:[K.yaxis],subplot:K.id,clickFn:function(U){2===U&&y(H)}};if("pan"===M){if(Q.node().onmousedown=null,Q.call(A(K,G)),Q.on("dblclick.zoom",
J),!H._context._scrollZoom.geo)Q.on("wheel.zoom",null)}else if("select"===M||"lasso"===M)Q.on(".zoom",null),O.prepFn=function(U,S,X){w(U,S,X,O,M)},v.init(O);Q.on("mousemove",function(){var U=K.projection.invert(a.mouse(this));if(!U||isNaN(U[0])||isNaN(U[1]))return v.unhover(H,a.event);K.xaxis.p2c=function(){return U[0]};K.yaxis.p2c=function(){return U[1]};e.hover(H,a.event,K.id)});Q.on("mouseout",function(){H._dragging||v.unhover(H,a.event)});Q.on("click",function(){"select"!==M&&"lasso"!==M&&(-1<
P.indexOf("select")&&B(a.event,H,[K.xaxis],[K.yaxis],K.id,O),-1<P.indexOf("event")&&e.click(H,a.event))})}};b.makeFramework=function(){var D=this,G=D.graphDiv,J=G._fullLayout,L="clip"+J._uid+D.id;D.clipDef=J._clips.append("clipPath").attr("id",L);D.clipRect=D.clipDef.append("rect");D.framework=a.select(D.container).append("g").attr("class","geo "+D.id).call(d.setClipUrl,L,G);D.project=function(K){return(K=D.projection(K))?[K[0]-D.xaxis._offset,K[1]-D.yaxis._offset]:[null,null]};D.xaxis={_id:"x",c2p:function(K){return D.project(K)[0]}};
D.yaxis={_id:"y",c2p:function(K){return D.project(K)[1]}};D.mockAxis={type:"linear",showexponent:"all",exponentformat:"B"};k.setConvert(D.mockAxis,J)};b.saveViewInitial=function(D){var G=D.center||{},J=D.projection,L=J.rotation||{};this.viewInitial={fitbounds:D.fitbounds,"projection.scale":J.scale};g.extendFlat(this.viewInitial,D._isScoped?{"center.lon":G.lon,"center.lat":G.lat}:D._isClipped?{"projection.rotation.lon":L.lon,"projection.rotation.lat":L.lat}:{"center.lon":G.lon,"center.lat":G.lat,"projection.rotation.lon":L.lon})};
b.render=function(){function D(H){return(H=J(H.lonlat))?n(H[0],H[1]):null}function G(H){return J.isLonLatOverEdges(H.lonlat)?"none":null}var J=this.projection,L=J.getPath(),K;for(K in this.basePaths)this.basePaths[K].attr("d",L);for(K in this.dataPaths)this.dataPaths[K].attr("d",function(H){return L(H.geojson)});for(K in this.dataPoints)this.dataPoints[K].attr("display",G).attr("transform",D)}},{"../../components/color":643,"../../components/dragelement":662,"../../components/drawing":665,"../../components/fx":683,
"../../lib":778,"../../lib/geo_location_utils":771,"../../lib/topojson_utils":806,"../../registry":911,"../cartesian/autorange":827,"../cartesian/axes":828,"../cartesian/select":847,"../plots":891,"./constants":858,"./projections":863,"./zoom":864,d3:169,"topojson-client":579}],860:[function(b,N,I){var r=b("../../plots/get_data").getSubplotCalcData;I=b("../../lib").counterRegex;var q=b("./geo");I=I("geo");N.exports={attr:"geo",name:"geo",idRoot:"geo",idRegex:I,attrRegex:I,attributes:{geo:{valType:"subplotid",
dflt:"geo",editType:"calc"}},layoutAttributes:b("./layout_attributes"),supplyLayoutDefaults:b("./layout_defaults"),plot:function(m){for(var l=m._fullLayout,a=m.calcdata,h=l._subplots.geo,g=0;g<h.length;g++){var n=h[g],p=r(a,"geo",n),d=l[n]._subplot;d||(d=q({id:n,graphDiv:m,container:l._geolayer.node(),topojsonURL:m._context.topojsonURL,staticPlot:m._context.staticPlot}),l[n]._subplot=d);d.plot(p,l,m._promises)}},updateFx:function(m){m=m._fullLayout;for(var l=m._subplots.geo,a=0;a<l.length;a++){var h=
m[l[a]];h._subplot.updateFx(m,h)}},clean:function(m,l,a,h){m=h._subplots.geo||[];for(a=0;a<m.length;a++){var g=m[a],n=h[g]._subplot;!l[g]&&n&&(n.framework.remove(),n.clipDef.remove())}}}},{"../../lib":778,"../../plots/get_data":865,"./geo":859,"./layout_attributes":861,"./layout_defaults":862}],861:[function(b,N,I){I=b("../../components/color/attributes");var r=b("../domain").attributes,q=b("./constants");b=b("../../plot_api/edit_types").overrideAll;var m={range:{valType:"info_array",items:[{valType:"number"},
{valType:"number"}]},showgrid:{valType:"boolean",dflt:!1},tick0:{valType:"number",dflt:0},dtick:{valType:"number"},gridcolor:{valType:"color",dflt:I.lightLine},gridwidth:{valType:"number",min:0,dflt:1}};(N.exports=b({domain:r({name:"geo"},{}),fitbounds:{valType:"enumerated",values:[!1,"locations","geojson"],dflt:!1,editType:"plot"},resolution:{valType:"enumerated",values:[110,50],dflt:110,coerceNumber:!0},scope:{valType:"enumerated",values:Object.keys(q.scopeDefaults),dflt:"world"},projection:{type:{valType:"enumerated",
values:Object.keys(q.projNames)},rotation:{lon:{valType:"number"},lat:{valType:"number"},roll:{valType:"number"}},parallels:{valType:"info_array",items:[{valType:"number"},{valType:"number"}]},scale:{valType:"number",min:0,dflt:1}},center:{lon:{valType:"number"},lat:{valType:"number"}},visible:{valType:"boolean",dflt:!0},showcoastlines:{valType:"boolean"},coastlinecolor:{valType:"color",dflt:I.defaultLine},coastlinewidth:{valType:"number",min:0,dflt:1},showland:{valType:"boolean",dflt:!1},landcolor:{valType:"color",
dflt:q.landColor},showocean:{valType:"boolean",dflt:!1},oceancolor:{valType:"color",dflt:q.waterColor},showlakes:{valType:"boolean",dflt:!1},lakecolor:{valType:"color",dflt:q.waterColor},showrivers:{valType:"boolean",dflt:!1},rivercolor:{valType:"color",dflt:q.waterColor},riverwidth:{valType:"number",min:0,dflt:1},showcountries:{valType:"boolean"},countrycolor:{valType:"color",dflt:I.defaultLine},countrywidth:{valType:"number",min:0,dflt:1},showsubunits:{valType:"boolean"},subunitcolor:{valType:"color",
dflt:I.defaultLine},subunitwidth:{valType:"number",min:0,dflt:1},showframe:{valType:"boolean"},framecolor:{valType:"color",dflt:I.defaultLine},framewidth:{valType:"number",min:0,dflt:1},bgcolor:{valType:"color",dflt:I.background},lonaxis:m,lataxis:m},"plot","from-root")).uirevision={valType:"any",editType:"none"}},{"../../components/color/attributes":642,"../../plot_api/edit_types":810,"../domain":855,"./constants":858}],862:[function(b,N,I){function r(n,p,d,e){var f=l(e.fullData,"geo",e.id).map(function(J){return J._expandedIndex});
e=d("resolution");var k=d("scope"),t=a.scopeDefaults[k],v=d("projection.type",t.projType),w=p._isAlbersUsa="albers usa"===v;w&&(k=p.scope="usa");var y=p._isScoped="world"!==k,B=p._isConic=-1!==v.indexOf("conic"),A=p._isClipped=!!a.lonaxisSpan[v];!1===n.visible&&(n=q.extendDeep({},p._template),n.showcoastlines=!1,n.showcountries=!1,n.showframe=!1,n.showlakes=!1,n.showland=!1,n.showocean=!1,n.showrivers=!1,n.showsubunits=!1,n.lonaxis&&(n.lonaxis.showgrid=!1),n.lataxis&&(n.lataxis.showgrid=!1),p._template=
n);n=d("visible");for(var z,E=0;E<g.length;E++){var C=g[E];z=[30,10][E];if(y)var u=t[C+"Range"];else{u=a[C+"Span"];u=(u[v]||u["*"])/2;var D=d("projection.rotation."+C.substr(0,3),t.projRotate[E]);u=[D-u,D+u]}u=d(C+".range",u);d(C+".tick0");d(C+".dtick",z);if(z=d(C+".showgrid",n?void 0:!1))d(C+".gridcolor"),d(C+".gridwidth");p[C]._ax={type:"linear",_id:C.slice(0,3),_traceIndices:f,setScale:q.identity,c2l:q.identity,r2l:q.identity,autorange:!0,range:u.slice(),_m:1,_input:{}}}E=p.lonaxis.range;f=p.lataxis.range;
v=E[0];E=E[1];0<v&&0>E&&(E+=360);v=(v+E)/2;if(!w){E=y?t.projRotate:[v,0,0];var G=d("projection.rotation.lon",E[0]);d("projection.rotation.lat",E[1]);d("projection.rotation.roll",E[2]);if(z=d("showcoastlines",!y&&n))d("coastlinecolor"),d("coastlinewidth");(z=d("showocean",n?void 0:!1))&&d("oceancolor")}w?(G=-96.6,w=38.7):(G=y?v:G,w=(f[0]+f[1])/2);d("center.lon",G);d("center.lat",w);B&&d("projection.parallels",t.projParallels||[0,60]);d("projection.scale");(z=d("showland",n?void 0:!1))&&d("landcolor");
(z=d("showlakes",n?void 0:!1))&&d("lakecolor");if(z=d("showrivers",n?void 0:!1))d("rivercolor"),d("riverwidth");if(z=d("showcountries",y&&"usa"!==k&&n))d("countrycolor"),d("countrywidth");if("usa"===k||"north america"===k&&50===e)d("showsubunits",n),d("subunitcolor"),d("subunitwidth");!y&&(z=d("showframe",n))&&(d("framecolor"),d("framewidth"));d("bgcolor");d("fitbounds")&&(delete p.projection.scale,y?(delete p.center.lon,delete p.center.lat):A?(delete p.center.lon,delete p.center.lat,delete p.projection.rotation.lon,
delete p.projection.rotation.lat,delete p.lonaxis.range,delete p.lataxis.range):(delete p.center.lon,delete p.center.lat,delete p.projection.rotation.lon))}var q=b("../../lib"),m=b("../subplot_defaults"),l=b("../get_data").getSubplotData,a=b("./constants"),h=b("./layout_attributes"),g=a.axesNames;N.exports=function(n,p,d){m(n,p,d,{type:"geo",attributes:h,handleDefaults:r,fullData:d,partition:"y"})}},{"../../lib":778,"../get_data":865,"../subplot_defaults":905,"./constants":858,"./layout_attributes":861}],
863:[function(b,N,I){N.exports=function(r){function q(O,U){return{type:"Feature",id:O.id,properties:O.properties,geometry:m(O.geometry,U)}}function m(O,U){if(!O)return null;if("GeometryCollection"===O.type)return{type:"GeometryCollection",geometries:object.geometries.map(function(X){return m(X,U)})};if(!D.hasOwnProperty(O.type))return null;var S=D[O.type];r.geo.stream(O,U(S));return S.result()}function l(){}function a(O){return 1<O?J:-1>O?-J:Math.asin(O)}function h(O){return 1<O?0:-1>O?G:Math.acos(O)}
function g(O,U){var S=(2+J)*Math.sin(U);U/=2;for(var X=0,ba=Infinity;10>X&&1E-6<Math.abs(ba);X++)ba=Math.cos(U),U-=ba=(U+Math.sin(U)*(ba+2)-S)/(2*ba*(1+ba));return[2/Math.sqrt(G*(4+G))*O*(1+Math.cos(U)),2*Math.sqrt(G/(4+G))*Math.sin(U)]}function n(O,U){function S(X,ba){X=M(X/U,ba);X[0]*=O;return X}2>arguments.length&&(U=O);if(1===U)return M;if(Infinity===U)return p;S.invert=function(X,ba){X=M.invert(X/O,ba);X[0]*=U;return X};return S}function p(O,U){return[O*Math.cos(U)/Math.cos(U/=2),2*Math.sin(U)]}
function d(O,U){return[3*O/(2*G)*Math.sqrt(G*G/3-U*U),U]}function e(O,U){return[O,1.25*Math.log(Math.tan(G/4+.4*U))]}function f(O){return function(U){var S=O*Math.sin(U),X=30,ba;do U-=ba=(U+Math.sin(U)-S)/(1+Math.cos(U));while(1E-6<Math.abs(ba)&&0<--X);return U/2}}function k(O,U){var S=U*U,X=S*S;return[O*(.8707-.131979*S+X*(-.013791+X*(.003971*S-.001529*X))),U*(1.007226+S*(.015085+X*(-.044475+.028874*S-.005916*X)))]}function t(O,U){var S=Math.min(18,36*Math.abs(U)/G),X=Math.floor(S);S-=X;var ba=(la=
T[X])[0],ca=la[1],ia=(la=T[++X])[0],ja=la[1];X=(la=T[Math.min(19,++X)])[0];la=la[1];var la;return[O*(ia+S*(X-ba)/2+S*S*(X-2*ia+ba)/2),(0<U?J:-J)*(ja+S*(la-ca)/2+S*S*(la-2*ja+ca)/2)]}function v(O,U){return[O*Math.cos(U),U]}function w(O,U){var S=Math.cos(U);var X=(X=h(S*Math.cos(O/=2)))?X/Math.sin(X):1;return[2*S*Math.sin(O)*X,Math.sin(U)*X]}function y(O,U){var S=w(O,U);return[(S[0]+O/J)/2,(S[1]+U)/2]}r.geo.project=function(O,U){U=U.stream;if(!U)throw Error("not yet supported");return(O&&B.hasOwnProperty(O.type)?
B[O.type]:m)(O,U)};var B={Feature:q,FeatureCollection:function(O,U){return{type:"FeatureCollection",features:O.features.map(function(S){return q(S,U)})}}},A=[],z=[],E={point:function(O,U){A.push([O,U])},result:function(){var O=A.length?2>A.length?{type:"Point",coordinates:A[0]}:{type:"MultiPoint",coordinates:A}:null;A=[];return O}},C={lineStart:l,point:function(O,U){A.push([O,U])},lineEnd:function(){A.length&&(z.push(A),A=[])},result:function(){var O=z.length?2>z.length?{type:"LineString",coordinates:z[0]}:
{type:"MultiLineString",coordinates:z}:null;z=[];return O}},u={polygonStart:l,lineStart:l,point:function(O,U){A.push([O,U])},lineEnd:function(){var O=A.length;if(O){do A.push(A[0].slice());while(4>++O);z.push(A);A=[]}},polygonEnd:l,result:function(){if(!z.length)return null;var O=[],U=[];z.forEach(function(S){if(4>(ba=S.length))var X=!1;else{X=0;for(var ba,ca=S[ba-1][1]*S[0][0]-S[ba-1][0]*S[0][1];++X<ba;)ca+=S[X-1][1]*S[X][0]-S[X-1][0]*S[X][1];X=0>=ca}X?O.push([S]):U.push(S)});U.forEach(function(S){var X=
S[0];O.some(function(ba){for(var ca=ba[0],ia=X[0],ja=X[1],la=!1,da=0,oa=ca.length,sa=oa-1;da<oa;sa=da++){var ma=ca[da],qa=ma[0];ma=ma[1];var pa=ca[sa];sa=pa[0];pa=pa[1];ma>ja^pa>ja&&ia<(sa-qa)*(ja-ma)/(pa-ma)+qa&&(la=!la)}if(la)return ba.push(S),!0})||O.push([S])});z=[];return O.length?1<O.length?{type:"MultiPolygon",coordinates:O}:{type:"Polygon",coordinates:O[0]}:null}},D={Point:E,MultiPoint:E,LineString:C,MultiLineString:C,Polygon:u,MultiPolygon:u,Sphere:u},G=Math.PI,J=G/2,L=G/180,K=180/G,H=r.geo.projection,
Q=r.geo.projectionMutator;r.geo.interrupt=function(O){function U(la,da){for(var oa=0>da?-1:1,sa=ba[+(0>da)],ma=0,qa=sa.length-1;ma<qa&&la>sa[ma][2][0];++ma);la=O(la-sa[ma][1][0],da);la[0]+=O(sa[ma][1][0],oa*da>oa*sa[ma][0][1]?sa[ma][0][1]:da)[0];return la}function S(){ca=ba.map(function(la){return la.map(function(da){var oa=O(da[0][0],da[0][1])[0],sa=O(da[2][0],da[2][1])[0],ma=O(da[1][0],da[0][1])[1];da=O(da[1][0],da[1][1])[1];if(ma>da){var qa=ma;ma=da;da=qa}return[[oa,ma],[sa,da]]})})}function X(la,
da){for(var oa=-1,sa=la.length,ma=la[0],qa,pa,na,ka=[];++oa<sa;){qa=la[oa];pa=(qa[0]-ma[0])/da;na=(qa[1]-ma[1])/da;for(var ua=0;ua<da;++ua)ka.push([ma[0]+ua*pa,ma[1]+ua*na]);ma=qa}ka.push(qa);return ka}var ba=[[[[-G,0],[0,J],[G,0]]],[[[-G,0],[0,-J],[G,0]]]],ca;O.invert&&(U.invert=function(la,da){for(var oa=ca[+(0>da)],sa=ba[+(0>da)],ma=0,qa=oa.length;ma<qa;++ma){var pa=oa[ma];if(pa[0][0]<=la&&la<pa[1][0]&&pa[0][1]<=da&&da<pa[1][1])return oa=O.invert(la-O(sa[ma][1][0],0)[0],da),oa[0]+=sa[ma][1][0],
sa=U(oa[0],oa[1]),la=[la,da],1E-6>Math.abs(sa[0]-la[0])&&1E-6>Math.abs(sa[1]-la[1])?oa:null}});var ia=r.geo.projection(U),ja=ia.stream;ia.stream=function(la){var da=ia.rotate(),oa=ja(la),sa=(ia.rotate([0,0]),ja(la));ia.rotate(da);oa.sphere=function(){var ma=r.geo,qa=ma.stream;var pa=[];for(var na=0,ka=ba[0].length;na<ka;++na){var ua=ba[0][na],va=180*ua[0][0]/G,Ca=180*ua[0][1]/G,Ma=180*ua[1][1]/G,Ua=180*ua[2][0]/G;ua=180*ua[2][1]/G;pa.push(X([[va+1E-6,Ca+1E-6],[va+1E-6,Ma-1E-6],[Ua-1E-6,Ma-1E-6],[Ua-
1E-6,ua+1E-6]],30))}for(na=ba[1].length-1;0<=na;--na)ua=ba[1][na],va=180*ua[0][0]/G,Ca=180*ua[0][1]/G,Ma=180*ua[1][1]/G,Ua=180*ua[2][0]/G,ua=180*ua[2][1]/G,pa.push(X([[Ua-1E-6,ua-1E-6],[Ua-1E-6,Ma+1E-6],[va+1E-6,Ma+1E-6],[va+1E-6,Ca-1E-6]],30));pa={type:"Polygon",coordinates:[r.merge(pa)]};qa.call(ma,pa,sa)};return oa};ia.lobes=function(la){if(!arguments.length)return ba.map(function(da){return da.map(function(oa){return[[180*oa[0][0]/G,180*oa[0][1]/G],[180*oa[1][0]/G,180*oa[1][1]/G],[180*oa[2][0]/
G,180*oa[2][1]/G]]})});ba=la.map(function(da){return da.map(function(oa){return[[oa[0][0]*G/180,oa[0][1]*G/180],[oa[1][0]*G/180,oa[1][1]*G/180],[oa[2][0]*G/180,oa[2][1]*G/180]]})});S();return ia};return ia};g.invert=function(O,U){U=.5*U*Math.sqrt((4+G)/G);var S=a(U),X=Math.cos(S);return[O/(2/Math.sqrt(G*(4+G))*(1+X)),a((S+U*(X+2))/(2+J))]};(r.geo.eckert4=function(){return H(g)}).raw=g;var M=r.geo.azimuthalEqualArea.raw;p.invert=function(O,U){U=2*a(U/2);return[O*Math.cos(U/2)/Math.cos(U),U]};(r.geo.hammer=
function(){var O=2,U=Q(n),S=U(O);S.coefficient=function(X){return arguments.length?U(O=+X):O};return S}).raw=n;d.invert=function(O,U){return[2/3*G*O/Math.sqrt(G*G/3-U*U),U]};(r.geo.kavrayskiy7=function(){return H(d)}).raw=d;e.invert=function(O,U){return[O,2.5*Math.atan(Math.exp(.8*U))-.625*G]};(r.geo.miller=function(){return H(e)}).raw=e;f(G);var P=function(O,U,S){function X(ca,ia){return[O*ca*Math.cos(ia=ba(ia)),U*Math.sin(ia)]}var ba=f(S);X.invert=function(ca,ia){ia=a(ia/U);return[ca/(O*Math.cos(ia)),
a((2*ia+Math.sin(2*ia))/S)]};return X}(Math.SQRT2/J,Math.SQRT2,G);(r.geo.mollweide=function(){return H(P)}).raw=P;k.invert=function(O,U){var S=U,X=25;do{var ba=S*S;var ca=ba*ba;S-=ca=(S*(1.007226+ba*(.015085+ca*(-.044475+.028874*ba-.005916*ca)))-U)/(1.007226+ba*(.045255+ca*(-.311325+.259866*ba-.005916*11*ca)))}while(1E-6<Math.abs(ca)&&0<--X);return[O/(.8707+(ba=S*S)*(-.131979+ba*(-.013791+ba*ba*ba*(.003971-.001529*ba)))),S]};(r.geo.naturalEarth=function(){return H(k)}).raw=k;var T=[[.9986,-.062],
[1,0],[.9986,.062],[.9954,.124],[.99,.186],[.9822,.248],[.973,.31],[.96,.372],[.9427,.434],[.9216,.4958],[.8962,.5571],[.8679,.6176],[.835,.6769],[.7986,.7346],[.7597,.7903],[.7186,.8435],[.6732,.8936],[.6213,.9394],[.5722,.9761],[.5322,1]];T.forEach(function(O){O[1]*=1.0144});t.invert=function(O,U){var S=U/J,X=90*S,ba=Math.min(18,Math.abs(X/5)),ca=Math.max(0,Math.floor(ba));do{var ia=T[ca][1],ja=T[ca+1][1],la=T[Math.min(19,ca+2)][1],da=la-ia,oa=2*(Math.abs(S)-ja)/da;ia=(la-2*ja+ia)/da;oa*=1-ia*oa*
(1-2*ia*oa);if(0<=oa||1===ca){X=(0<=U?5:-5)*(oa+ba);S=50;do ba=Math.min(18,Math.abs(X)/5),ca=Math.floor(ba),oa=ba-ca,ia=T[ca][1],ja=T[ca+1][1],la=T[Math.min(19,ca+2)][1],X-=(ba=(0<=U?J:-J)*(ja+oa*(la-ia)/2+oa*oa*(la-2*ja+ia)/2)-U)*K;while(1E-12<Math.abs(ba)&&0<--S);break}}while(0<=--ca);U=T[ca][0];ba=T[ca+1][0];ca=T[Math.min(19,ca+2)][0];return[O/(ba+oa*(ca-U)/2+oa*oa*(ca-2*ba+U)/2),X*L]};(r.geo.robinson=function(){return H(t)}).raw=t;v.invert=function(O,U){return[O/Math.cos(U),U]};(r.geo.sinusoidal=
function(){return H(v)}).raw=v;w.invert=function(O,U){if(!(O*O+4*U*U>G*G+1E-6)){var S=O,X=U,ba=25;do{var ca=Math.sin(S),ia=Math.sin(S/2),ja=Math.cos(S/2),la=Math.sin(X),da=Math.cos(X),oa=Math.sin(2*X),sa=la*la,ma=da*da,qa=ia*ia,pa=1-ma*ja*ja,na=pa?h(da*ja)*Math.sqrt(ka=1/pa):ka=0,ka;pa=2*na*da*ia-O;var ua=na*la-U,va=ka*(ma*qa+na*da*ja*sa),Ca=ka*(.5*ca*oa-2*na*la*ia);ca=.25*ka*(oa*ia-na*la*ma*ca);da=ka*(sa*ja+na*qa*da);ja=Ca*ca-da*va;if(!ja)break;Ca=(ua*Ca-pa*da)/ja;pa=(pa*ca-ua*va)/ja;S-=Ca;X-=pa}while((1E-6<
Math.abs(Ca)||1E-6<Math.abs(pa))&&0<--ba);return[S,X]}};(r.geo.aitoff=function(){return H(w)}).raw=w;y.invert=function(O,U){var S=O,X=U,ba=25;do{var ca=Math.cos(X),ia=Math.sin(X),ja=Math.sin(2*X),la=ia*ia,da=ca*ca,oa=Math.sin(S),sa=Math.cos(S/2),ma=Math.sin(S/2),qa=ma*ma,pa=1-da*sa*sa,na=pa?h(ca*sa)*Math.sqrt(ka=1/pa):ka=0,ka;pa=.5*(2*na*ca*ma+S/J)-O;var ua=.5*(na*ia+X)-U,va=.5*ka*(da*qa+na*ca*sa*la)+.5/J,Ca=ka*(oa*ja/4-na*ia*ma);ia=.125*ka*(ja*ma-na*ia*da*oa);la=.5*ka*(la*sa+na*qa*ca)+.5;ca=Ca*ia-
la*va;Ca=(ua*Ca-pa*la)/ca;pa=(pa*ia-ua*va)/ca;S-=Ca;X-=pa}while((1E-6<Math.abs(Ca)||1E-6<Math.abs(pa))&&0<--ba);return[S,X]};(r.geo.winkel3=function(){return H(y)}).raw=y}},{}],864:[function(b,N,I){function r(A,z){return f.behavior.zoom().translate(z.translate()).scale(z.scale())}function q(A,z,E){function C(M,P){H[u+"."+M]=k.nestedProperty(J,M).get();t.call("_storeDirectGUIEdit",G,L._preGUI,H);var T=k.nestedProperty(K,M);T.get()!==P&&(T.set(P),k.nestedProperty(J,M).set(P),Q[u+"."+M]=P)}var u=A.id,
D=A.graphDiv,G=D.layout,J=G[u],L=D._fullLayout,K=L[u],H={},Q={};E(C);C("projection.scale",z.scale()/A.fitScale);C("fitbounds",!1);D.emit("plotly_relayout",Q)}function m(A,z){function E(u){var D=z.invert(A.midPt);u("center.lon",D[0]);u("center.lat",D[1])}var C=r(A,z);C.on("zoomstart",function(){f.select(this).style(y)}).on("zoom",function(){z.scale(f.event.scale).translate(f.event.translate);A.render();var u=z.invert(A.midPt);A.graphDiv.emit("plotly_relayouting",{"geo.projection.scale":z.scale()/A.fitScale,
"geo.center.lon":u[0],"geo.center.lat":u[1]})}).on("zoomend",function(){f.select(this).style(B);q(A,z,E)});return C}function l(A,z){function E(P){var T=z.rotate(),O=z.invert(A.midPt);P("projection.rotation.lon",-T[0]);P("center.lon",O[0]);P("center.lat",O[1])}var C=r(A,z),u,D,G,J,L,K,H,Q,M;C.on("zoomstart",function(){f.select(this).style(y);u=f.mouse(this);D=z.rotate();G=z.translate();J=D;L=z.invert(u)}).on("zoom",function(){K=f.mouse(this);var P=u;var T=z.invert(P);T?(T=z(T),P=2<Math.abs(T[0]-P[0])||
2<Math.abs(T[1]-P[1])):P=!0;P?(C.scale(z.scale()),C.translate(z.translate())):(z.scale(f.event.scale),z.translate([G[0],f.event.translate[1]]),L?z.invert(K)&&(Q=z.invert(K),H=[J[0]+(Q[0]-L[0]),D[1],D[2]],z.rotate(H),J=H):(u=K,L=z.invert(u)),M=!0,A.render(),P=z.rotate(),T=z.invert(A.midPt),A.graphDiv.emit("plotly_relayouting",{"geo.projection.scale":z.scale()/A.fitScale,"geo.center.lon":T[0],"geo.center.lat":T[1],"geo.projection.rotation.lon":-P[0]}))}).on("zoomend",function(){f.select(this).style(B);
M&&q(A,z,E)});return C}function a(A,z){function E(K){G++||K({type:"zoomstart"})}function C(K){var H=z.rotate();K("projection.rotation.lon",-H[0]);K("projection.rotation.lat",-H[1])}z.rotate();z.scale();var u=r(A,z),D=e(u,"zoomstart","zoom","zoomend"),G=0,J=u.on,L;u.on("zoomstart",function(){f.select(this).style(y);var K=f.mouse(this),H=z.rotate(),Q=H,M=z.translate(),P=g(H);L=h(z,K);J.call(u,"zoom",function(){var T=f.mouse(this);z.scale(f.event.scale);if(!L)K=T,L=h(z,K);else if(h(z,T)){z.rotate(H).translate(M);
var O=h(z,T);var U=L;if(U&&O){T=[U[1]*O[2]-U[2]*O[1],U[2]*O[0]-U[0]*O[2],U[0]*O[1]-U[1]*O[0]];var S=Math.sqrt(d(T,T));O=.5*Math.acos(Math.max(-1,Math.min(1,d(U,O))));U=Math.sin(O)/S;var X=S&&[Math.cos(O),T[2]*U,-T[1]*U,T[0]*U]}else X=void 0;T=P[0];S=P[1];O=P[2];U=P[3];var ba=X[0],ca=X[1],ia=X[2];X=X[3];T=[T*ba-S*ca-O*ia-U*X,T*ca+S*ba+O*X-U*ia,T*ia-S*X+O*ba+U*ca,T*X+S*ia-O*ca+U*ba];O=[Math.atan2(2*(T[0]*T[1]+T[2]*T[3]),1-2*(T[1]*T[1]+T[2]*T[2]))*w,Math.asin(Math.max(-1,Math.min(1,2*(T[0]*T[2]-T[3]*
T[1]))))*w,Math.atan2(2*(T[0]*T[3]+T[1]*T[2]),1-2*(T[2]*T[2]+T[3]*T[3]))*w];S=L;T=Q;ba=p(S,2,O[0]);ba=p(ba,1,O[1]);ba=p(ba,0,O[2]-T[2]);U=S[0];X=S[1];S=S[2];O=ba[0];ca=ba[1];ba=ba[2];ia=Math.atan2(X,U)*w;X=Math.sqrt(U*U+X*X);Math.abs(ca)>X?(U=(0<ca?90:-90)-ia,X=0):(U=Math.asin(ca/X)*w-ia,X=Math.sqrt(X*X-ca*ca));ca=180-U-2*ia;ia=(Math.atan2(ba,O)-Math.atan2(S,X))*w;S=(Math.atan2(ba,O)-Math.atan2(S,-X))*w;O=n(T[0],T[1],U,ia);ba=n(T[0],T[1],ca,S);T=O<=ba?[U,ia,T[2]]:[ca,S,T[2]];isFinite(T[0])&&isFinite(T[1])&&
isFinite(T[2])||(T=Q);z.rotate(T);Q=T}D.of(this,arguments)({type:"zoom"})});E(D.of(this,arguments))}).on("zoomend",function(){f.select(this).style(B);J.call(u,"zoom",null);var K=D.of(this,arguments);--G||K({type:"zoomend"});q(A,z,C)}).on("zoom.redraw",function(){A.render();var K=z.rotate();A.graphDiv.emit("plotly_relayouting",{"geo.projection.scale":z.scale()/A.fitScale,"geo.projection.rotation.lon":-K[0],"geo.projection.rotation.lat":-K[1]})});return f.rebind(u,D,"on")}function h(A,z){if(A=(z=A.invert(z))&&
isFinite(z[0])&&isFinite(z[1])){A=z[0]*v;z=z[1]*v;var E=Math.cos(z);A=[E*Math.cos(A),E*Math.sin(A),Math.sin(z)]}return A}function g(A){var z=.5*A[0]*v,E=.5*A[1]*v,C=.5*A[2]*v;A=Math.sin(z);z=Math.cos(z);var u=Math.sin(E);E=Math.cos(E);var D=Math.sin(C);C=Math.cos(C);return[z*E*C+A*u*D,A*E*C-z*u*D,z*u*C+A*E*D,z*E*D-A*u*C]}function n(A,z,E,C){A=((E-A)%360+540)%360-180;z=((C-z)%360+540)%360-180;return Math.sqrt(A*A+z*z)}function p(A,z,E){var C=E*v;E=A.slice();var u=0===z?1:0;z=2===z?1:2;var D=Math.cos(C);
C=Math.sin(C);E[u]=A[u]*D-A[z]*C;E[z]=A[z]*D+A[u]*C;return E}function d(A,z){for(var E=0,C=0,u=A.length;C<u;++C)E+=A[C]*z[C];return E}function e(A){for(var z=0,E=arguments.length,C=[];++z<E;)C.push(arguments[z]);var u=f.dispatch.apply(null,C);u.of=function(D,G){return function(J){try{var L=J.sourceEvent=f.event;J.target=A;f.event=J;u[J.type].apply(D,G)}finally{f.event=L}}};return u}var f=b("d3"),k=b("../../lib"),t=b("../../registry"),v=Math.PI/180,w=180/Math.PI,y={cursor:"pointer"},B={cursor:"auto"};
N.exports=function(A,z){return(z._isScoped?m:z._isClipped?a:l)(A,A.projection)}},{"../../lib":778,"../../registry":911,d3:169}],865:[function(b,N,I){var r=b("../registry"),q=b("./cartesian/constants").SUBPLOT_PATTERN;I.getSubplotCalcData=function(m,l,a){l=r.subplotsRegistry[l];if(!l)return[];l=l.attr;for(var h=[],g=0;g<m.length;g++){var n=m[g];n[0].trace[l]===a&&h.push(n)}return h};I.getModuleCalcData=function(m,l){var a=[],h=[];l="string"===typeof l?r.getModule(l).plot:"function"===typeof l?l:l.plot;
if(!l)return[a,m];for(var g=0;g<m.length;g++){var n=m[g],p=n[0].trace;!0===p.visible&&0!==p._length&&(p._module.plot===l?a.push(n):h.push(n))}return[a,h]};I.getSubplotData=function(m,l,a){if(!r.subplotsRegistry[l])return[];var h=r.subplotsRegistry[l].attr,g=[];if("gl2d"===l){var n=a.match(q);var p="x"+n[1];var d="y"+n[2]}for(var e=0;e<m.length;e++)n=m[e],"gl2d"===l&&r.traceIs(n,"gl2d")?n[h[0]]===p&&n[h[1]]===d&&g.push(n):n[h]===a&&g.push(n);return g}},{"../registry":911,"./cartesian/constants":834}],
866:[function(b,N,I){function r(g,n){this.element=g;this.plot=n;this.wheelListener=this.mouseListener=null;this.lastInputTime=Date.now();this.lastPos=[0,0];this.boxInited=this.boxEnabled=!1;this.boxStart=[0,0];this.boxEnd=[0,0];this.dragStart=[0,0]}var q=b("mouse-change"),m=b("mouse-wheel"),l=b("mouse-event-offset"),a=b("../cartesian/constants"),h=b("has-passive-events");N.exports=function(g){function n(){for(var k=g.graphDiv._fullLayout._axisConstraintGroups,t=g.xaxis._id,v=g.yaxis._id,w=0;w<k.length;w++)if(-1!==
k[w][t]){if(-1!==k[w][v])return!0;break}return!1}function p(k,t,v){function w(u,D,G){var J=Math.min(D,G);D=Math.max(D,G);J!==D?(y[u]=J,y[u+2]=D,f.dataBox=y,g.setRanges(y)):(g.selectBox.selectBox=[0,0,1,1],g.glplot.setDirty())}var y=g.calcDataBox(),B=e.viewBox,A=f.lastPos[0],z=f.lastPos[1],E=a.MINDRAG*e.pixelRatio,C=a.MINZOOM*e.pixelRatio;t*=e.pixelRatio;v*=e.pixelRatio;v=B[3]-B[1]-v;switch(g.fullLayout.dragmode){case "zoom":k?(z=t/(B[2]-B[0])*(y[2]-y[0])+y[0],B=v/(B[3]-B[1])*(y[3]-y[1])+y[1],f.boxInited||
(f.boxStart[0]=z,f.boxStart[1]=B,f.dragStart[0]=t,f.dragStart[1]=v),f.boxEnd[0]=z,f.boxEnd[1]=B,f.boxInited=!0,f.boxEnabled||f.boxStart[0]===f.boxEnd[0]&&f.boxStart[1]===f.boxEnd[1]||(f.boxEnabled=!0),B=Math.abs(f.dragStart[0]-t)<C,C=Math.abs(f.dragStart[1]-v)<C,!n()||B&&C?(B&&(f.boxEnd[0]=f.boxStart[0]),C&&(f.boxEnd[1]=f.boxStart[1])):(C=f.boxEnd[0]-f.boxStart[0],B=f.boxEnd[1]-f.boxStart[1],z=(y[3]-y[1])/(y[2]-y[0]),Math.abs(C*z)>Math.abs(B)?(f.boxEnd[1]=f.boxStart[1]+Math.abs(C)*z*(0<=B?1:-1),f.boxEnd[1]<
y[1]?(f.boxEnd[1]=y[1],f.boxEnd[0]=f.boxStart[0]+(y[1]-f.boxStart[1])/Math.abs(z)):f.boxEnd[1]>y[3]&&(f.boxEnd[1]=y[3],f.boxEnd[0]=f.boxStart[0]+(y[3]-f.boxStart[1])/Math.abs(z))):(f.boxEnd[0]=f.boxStart[0]+Math.abs(B)/z*(0<=C?1:-1),f.boxEnd[0]<y[0]?(f.boxEnd[0]=y[0],f.boxEnd[1]=f.boxStart[1]+(y[0]-f.boxStart[0])*Math.abs(z)):f.boxEnd[0]>y[2]&&(f.boxEnd[0]=y[2],f.boxEnd[1]=f.boxStart[1]+(y[2]-f.boxStart[0])*Math.abs(z))))):f.boxEnabled?(C=f.boxStart[0]!==f.boxEnd[0],B=f.boxStart[1]!==f.boxEnd[1],
C||B?(C&&(w(0,f.boxStart[0],f.boxEnd[0]),g.xaxis.autorange=!1),B&&(w(1,f.boxStart[1],f.boxEnd[1]),g.yaxis.autorange=!1),g.relayoutCallback()):g.glplot.setDirty(),f.boxEnabled=!1,f.boxInited=!1):f.boxInited&&(f.boxInited=!1);break;case "pan":f.boxEnabled=!1,f.boxInited=!1,k?(f.panning||(f.dragStart[0]=t,f.dragStart[1]=v),Math.abs(f.dragStart[0]-t)<E&&(t=f.dragStart[0]),Math.abs(f.dragStart[1]-v)<E&&(v=f.dragStart[1]),C=(A-t)*(y[2]-y[0])/(e.viewBox[2]-e.viewBox[0]),B=(z-v)*(y[3]-y[1])/(e.viewBox[3]-
e.viewBox[1]),y[0]+=C,y[2]+=C,y[1]+=B,y[3]+=B,g.setRanges(y),f.panning=!0,f.lastInputTime=Date.now(),g.xaxis.autorange=!1,g.yaxis.autorange=!1,g.cameraChanged(),g.handleAnnotations()):f.panning&&(f.panning=!1,g.relayoutCallback())}f.lastPos[0]=t;f.lastPos[1]=v}var d=g.mouseContainer,e=g.glplot,f=new r(d,e);f.mouseListener=q(d,p);d.addEventListener("touchstart",function(k){var t=l(k.changedTouches[0],d);p(0,t[0],t[1]);p(1,t[0],t[1]);k.preventDefault()},h?{passive:!1}:!1);d.addEventListener("touchmove",
function(k){k.preventDefault();var t=l(k.changedTouches[0],d);p(1,t[0],t[1]);k.preventDefault()},h?{passive:!1}:!1);d.addEventListener("touchend",function(k){p(0,f.lastPos[0],f.lastPos[1]);k.preventDefault()},h?{passive:!1}:!1);f.wheelListener=m(d,function(k,t){if(!g.scrollZoom)return!1;k=g.calcDataBox();var v=e.viewBox;t=Math.exp(5*t/(v[3]-v[1]));var w=f.lastPos[0]/(v[2]-v[0])*(k[2]-k[0])+k[0];v=f.lastPos[1]/(v[3]-v[1])*(k[3]-k[1])+k[1];k[0]=(k[0]-w)*t+w;k[2]=(k[2]-w)*t+w;k[1]=(k[1]-v)*t+v;k[3]=
(k[3]-v)*t+v;g.setRanges(k);f.lastInputTime=Date.now();g.xaxis.autorange=!1;g.yaxis.autorange=!1;g.cameraChanged();g.handleAnnotations();g.relayoutCallback();return!0},!0);return f}},{"../cartesian/constants":834,"has-passive-events":441,"mouse-change":483,"mouse-event-offset":484,"mouse-wheel":486}],867:[function(b,N,I){function r(a){this.scene=a;this.gl=a.gl;this.pixelRatio=a.pixelRatio;this.screenBox=[0,0,1,1];this.viewBox=[0,0,1,1];this.dataBox=[-1,-1,1,1];this.borderLineEnable=[!1,!1,!1,!1];
this.borderLineWidth=[1,1,1,1];this.borderLineColor=[[0,0,0,1],[0,0,0,1],[0,0,0,1],[0,0,0,1]];this.ticks=[[],[]];this.tickEnable=[!0,!0,!1,!1];this.tickPad=[15,15,15,15];this.tickAngle=[0,0,0,0];this.tickColor=[[0,0,0,1],[0,0,0,1],[0,0,0,1],[0,0,0,1]];this.tickMarkLength=[0,0,0,0];this.tickMarkWidth=[0,0,0,0];this.tickMarkColor=[[0,0,0,1],[0,0,0,1],[0,0,0,1],[0,0,0,1]];this.labels=["x","y"];this.labelEnable=[!0,!0,!1,!1];this.labelAngle=[0,Math.PI/2,0,3*Math.PI/2];this.labelPad=[15,15,15,15];this.labelSize=
[12,12];this.labelFont=["sans-serif","sans-serif"];this.labelColor=[[0,0,0,1],[0,0,0,1],[0,0,0,1],[0,0,0,1]];this.title="";this.titleEnable=!0;this.titleCenter=[0,0,0,0];this.titleAngle=0;this.titleColor=[0,0,0,1];this.titleFont="sans-serif";this.titleSize=18;this.gridLineEnable=[!0,!0];this.gridLineColor=[[0,0,0,.5],[0,0,0,.5]];this.gridLineWidth=[1,1];this.zeroLineEnable=[!0,!0];this.zeroLineWidth=[1,1];this.zeroLineColor=[[0,0,0,1],[0,0,0,1]];this.borderColor=[0,0,0,0];this.backgroundColor=[0,
0,0,0];this.static=this.scene.staticPlot}var q=b("../cartesian/axes"),m=b("../../lib/str2rgbarray");b=r.prototype;var l=["xaxis","yaxis"];b.merge=function(a){this.titleEnable=!1;this.backgroundColor=m(a.plot_bgcolor);var h,g;for(g=0;2>g;++g){var n=l[g];var p=n.charAt(0);var d=a[this.scene[n]._name];p=d.title.text===this.scene.fullLayout._dfltTitle[p]?"":d.title.text;for(h=0;2>=h;h+=2)this.labelEnable[g+h]=!1,this.labels[g+h]=p,this.labelColor[g+h]=m(d.title.font.color),this.labelFont[g+h]=d.title.font.family,
this.labelSize[g+h]=d.title.font.size,this.labelPad[g+h]=this.getLabelPad(n,d),this.tickEnable[g+h]=!1,this.tickColor[g+h]=m((d.tickfont||{}).color),this.tickAngle[g+h]="auto"===d.tickangle?0:Math.PI*-d.tickangle/180,this.tickPad[g+h]=this.getTickPad(d),this.tickMarkLength[g+h]=0,this.tickMarkWidth[g+h]=d.tickwidth||0,this.tickMarkColor[g+h]=m(d.tickcolor),this.borderLineEnable[g+h]=!1,this.borderLineColor[g+h]=m(d.linecolor),this.borderLineWidth[g+h]=d.linewidth||0;h=this.hasSharedAxis(d);p=this.hasAxisInDfltPos(n,
d)&&!h;n=this.hasAxisInAltrPos(n,d)&&!h;var e=d.mirror||!1;var f=h?-1!==String(e).indexOf("all"):!!e;h=h?"allticks"===e:-1!==String(e).indexOf("ticks");p?this.labelEnable[g]=!0:n&&(this.labelEnable[g+2]=!0);p?this.tickEnable[g]=d.showticklabels:n&&(this.tickEnable[g+2]=d.showticklabels);if(p||f)this.borderLineEnable[g]=d.showline;if(n||f)this.borderLineEnable[g+2]=d.showline;if(p||h)this.tickMarkLength[g]=this.getTickMarkLength(d);if(n||h)this.tickMarkLength[g+2]=this.getTickMarkLength(d);this.gridLineEnable[g]=
d.showgrid;this.gridLineColor[g]=m(d.gridcolor);this.gridLineWidth[g]=d.gridwidth;this.zeroLineEnable[g]=d.zeroline;this.zeroLineColor[g]=m(d.zerolinecolor);this.zeroLineWidth[g]=d.zerolinewidth}};b.hasSharedAxis=function(a){var h=this.scene;return 0!==q.findSubplotsWithAxis(h.fullLayout._subplots.gl2d,a).indexOf(h.id)};b.hasAxisInDfltPos=function(a,h){h=h.side;if("xaxis"===a)return"bottom"===h;if("yaxis"===a)return"left"===h};b.hasAxisInAltrPos=function(a,h){h=h.side;if("xaxis"===a)return"top"===
h;if("yaxis"===a)return"right"===h};b.getLabelPad=function(a,h){var g=h.title.font.size,n=h.showticklabels;if("xaxis"===a)return"top"===h.side?-10+g*(1.5+(n?1:0)):-10+g*(1.5+(n?.5:0));if("yaxis"===a)return"right"===h.side?10+g*(1.5+(n?1:.5)):10+g*(1.5+(n?.5:0))};b.getTickPad=function(a){return"outside"===a.ticks?10+a.ticklen:15};b.getTickMarkLength=function(a){if(!a.ticks)return 0;var h=a.ticklen;return"inside"===a.ticks?-h:h};N.exports=function(a){return new r(a)}},{"../../lib/str2rgbarray":802,
"../cartesian/axes":828}],868:[function(b,N,I){N=b("../../plot_api/edit_types").overrideAll;var r=b("./scene2d"),q=b("../layout_attributes"),m=b("../../constants/xmlns_namespaces"),l=b("../cartesian/constants"),a=b("../cartesian"),h=b("../../components/fx/layout_attributes"),g=b("../get_data").getSubplotData;I.name="gl2d";I.attr=["xaxis","yaxis"];I.idRoot=["x","y"];I.idRegex=l.idRegex;I.attrRegex=l.attrRegex;I.attributes=b("../cartesian/attributes");I.supplyLayoutDefaults=function(n,p,d){p._has("cartesian")||
a.supplyLayoutDefaults(n,p,d)};I.layoutAttrOverrides=N(a.layoutAttributes,"plot","from-root");I.baseLayoutAttrOverrides=N({plot_bgcolor:q.plot_bgcolor,hoverlabel:h.hoverlabel},"plot","nested");I.plot=function(n){for(var p=n._fullLayout,d=n._fullData,e=p._subplots.gl2d,f=0;f<e.length;f++){var k=e[f],t=p._plots[k],v=g(d,"gl2d",k),w=t._scene2d;void 0===w&&(w=new r({id:k,graphDiv:n,container:n.querySelector(".gl-container"),staticPlot:n._context.staticPlot,plotGlPixelRatio:n._context.plotGlPixelRatio},
p),t._scene2d=w);w.plot(v,n.calcdata,p,n.layout)}};I.clean=function(n,p,d,e){for(var f=e._subplots.gl2d||[],k=0;k<f.length;k++){var t=f[k],v=e._plots[t];v._scene2d&&0===g(n,"gl2d",t).length&&(v._scene2d.destroy(),delete e._plots[t])}a.clean.apply(this,arguments)};I.drawFramework=function(n){n._context.staticPlot||a.drawFramework(n)};I.toSVG=function(n){n=n._fullLayout;for(var p=n._subplots.gl2d,d=0;d<p.length;d++){var e=n._plots[p[d]]._scene2d,f=e.toImage("png");n._glimages.append("svg:image").attr({xmlns:m.svg,
"xlink:href":f,x:0,y:0,width:"100%",height:"100%",preserveAspectRatio:"none"});e.destroy()}};I.updateFx=function(n){n=n._fullLayout;for(var p=n._subplots.gl2d,d=0;d<p.length;d++)n._plots[p[d]]._scene2d.updateFx(n.dragmode)}},{"../../components/fx/layout_attributes":684,"../../constants/xmlns_namespaces":754,"../../plot_api/edit_types":810,"../cartesian":841,"../cartesian/attributes":826,"../cartesian/constants":834,"../get_data":865,"../layout_attributes":882,"./scene2d":869}],869:[function(b,N,I){function r(E,
C){this.container=E.container;this.graphDiv=E.graphDiv;this.pixelRatio=E.plotGlPixelRatio||window.devicePixelRatio;this.id=E.id;this.staticPlot=!!E.staticPlot;this.scrollZoom=this.graphDiv._context._scrollZoom.cartesian;this.fullData=null;this.updateRefs(C);this.makeFramework();this.stopped||(this.glplotOptions=p(this),this.glplotOptions.merge(C),this.glplot=a(this.glplotOptions),this.camera=d(this),this.traces={},this.spikes=h(this.glplot),this.selectBox=g(this.glplot,{innerFill:!1,outerFill:!0}),
this.lastButtonState=0,this.pickResult=null,this.isMouseOver=!0,this.stopped=!1,this.redraw=this.draw.bind(this),this.redraw())}var q=b("../../registry"),m=b("../../plots/cartesian/axes"),l=b("../../components/fx"),a=b("gl-plot2d"),h=b("gl-spikes2d"),g=b("gl-select-box"),n=b("webgl-context"),p=b("./convert"),d=b("./camera"),e=b("../../lib/show_no_webgl_msg");I=b("../cartesian/constraints");var f=I.enforce,k=I.clean,t=b("../cartesian/autorange").doAutoRange;I=b("../../components/dragelement/helpers");
var v=I.drawMode,w=I.selectMode,y=["xaxis","yaxis"],B,A,z=b("../cartesian/constants").SUBPLOT_PATTERN;N.exports=r;b=r.prototype;b.makeFramework=function(){if(this.staticPlot){if(!A&&(B=document.createElement("canvas"),A=n({canvas:B,preserveDrawingBuffer:!1,premultipliedAlpha:!0,antialias:!0}),!A))throw Error("Error creating static canvas/context for image server");this.canvas=B;this.gl=A}else{var E=this.container.querySelector(".gl-canvas-focus"),C=n({canvas:E,preserveDrawingBuffer:!0,premultipliedAlpha:!0});
if(!C){e(this);this.stopped=!0;return}this.canvas=E;this.gl=C}E=this.canvas;E.style.width="100%";E.style.height="100%";E.style.position="absolute";E.style.top="0px";E.style.left="0px";E.style["pointer-events"]="none";this.updateSize(E);E=this.svgContainer=document.createElementNS("http://www.w3.org/2000/svg","svg");E.style.position="absolute";E.style.top=E.style.left="0px";E.style.width=E.style.height="100%";E.style["z-index"]=20;E.style["pointer-events"]="none";C=this.mouseContainer=document.createElement("div");
C.style.position="absolute";C.style["pointer-events"]="auto";this.pickCanvas=this.container.querySelector(".gl-canvas-pick");var u=this.container;u.appendChild(E);u.appendChild(C);var D=this;C.addEventListener("mouseout",function(){D.isMouseOver=!1;D.unhover()});C.addEventListener("mouseover",function(){D.isMouseOver=!0})};b.toImage=function(E){E||(E="png");this.stopped=!0;this.staticPlot&&this.container.appendChild(B);this.updateSize(this.canvas);var C=this.glplot.gl,u=C.drawingBufferWidth,D=C.drawingBufferHeight;
C.clearColor(1,1,1,0);C.clear(C.COLOR_BUFFER_BIT|C.DEPTH_BUFFER_BIT);this.glplot.setDirty();this.glplot.draw();C.bindFramebuffer(C.FRAMEBUFFER,null);var G=new Uint8Array(u*D*4);C.readPixels(0,0,u,D,C.RGBA,C.UNSIGNED_BYTE,G);C=0;for(var J=D-1;C<J;++C,--J)for(var L=0;L<u;++L)for(var K=0;4>K;++K){var H=G[4*(u*C+L)+K];G[4*(u*C+L)+K]=G[4*(u*J+L)+K];G[4*(u*J+L)+K]=H}C=document.createElement("canvas");C.width=u;C.height=D;J=C.getContext("2d");u=J.createImageData(u,D);u.data.set(G);J.putImageData(u,0,0);
switch(E){case "jpeg":E=C.toDataURL("image/jpeg");break;case "webp":E=C.toDataURL("image/webp");break;default:E=C.toDataURL("image/png")}this.staticPlot&&this.container.removeChild(B);return E};b.updateSize=function(E){E||(E=this.canvas);var C=this.pixelRatio,u=this.fullLayout,D=Math.ceil(C*u.width)|0;C=Math.ceil(C*u.height)|0;if(E.width!==D||E.height!==C)E.width=D,E.height=C;return E};b.computeTickMarks=function(){this.xaxis.setScale();this.yaxis.setScale();for(var E=[m.calcTicks(this.xaxis),m.calcTicks(this.yaxis)],
C=0;2>C;++C)for(var u=0;u<E[C].length;++u)E[C][u].text+="";return E};b.updateRefs=function(E){this.fullLayout=E;E=this.id.match(z);var C="yaxis"+E[2];this.xaxis=this.fullLayout["xaxis"+E[1]];this.yaxis=this.fullLayout[C]};b.relayoutCallback=function(){var E=this.graphDiv,C=this.xaxis,u=this.yaxis,D=E.layout,G={},J=G[C._name+".range"]=C.range.slice(),L=G[u._name+".range"]=u.range.slice();G[C._name+".autorange"]=C.autorange;G[u._name+".autorange"]=u.autorange;q.call("_storeDirectGUIEdit",E.layout,E._fullLayout._preGUI,
G);var K=D[C._name];K.range=J;K.autorange=C.autorange;C=D[u._name];C.range=L;C.autorange=u.autorange;G.lastInputTime=this.camera.lastInputTime;E.emit("plotly_relayout",G)};b.cameraChanged=function(){var E=this.camera;this.glplot.setDataBox(this.calcDataBox());var C=this.computeTickMarks(),u=this.glplotOptions.ticks;a:{for(var D=0;2>D;++D){var G=C[D],J=u[D];if(G.length!==J.length){u=!0;break a}for(var L=0;L<G.length;++L)if(G[L].x!==J[L].x){u=!0;break a}}u=!1}u&&(this.glplotOptions.ticks=C,this.glplotOptions.dataBox=
E.dataBox,this.glplot.update(this.glplotOptions),this.handleAnnotations())};b.handleAnnotations=function(){for(var E=this.graphDiv,C=this.fullLayout.annotations,u=0;u<C.length;u++){var D=C[u];D.xref===this.xaxis._id&&D.yref===this.yaxis._id&&q.getComponentMethod("annotations","drawOne")(E,u)}};b.destroy=function(){if(this.glplot){var E=this.traces;E&&Object.keys(E).map(function(C){E[C].dispose();delete E[C]});this.glplot.dispose();this.container.removeChild(this.svgContainer);this.container.removeChild(this.mouseContainer);
this.glplot=this.fullData=null;this.stopped=!0;this.camera.mouseListener.enabled=!1;this.mouseContainer.removeEventListener("wheel",this.camera.wheelListener);this.camera=null}};b.plot=function(E,C,u){var D=this.glplot;this.updateRefs(u);this.xaxis.clearCalc();this.yaxis.clearCalc();this.updateTraces(E,C);this.updateFx(u.dragmode);var G=u.width,J=u.height;this.updateSize(this.canvas);E=this.glplotOptions;E.merge(u);E.screenBox=[0,0,G,J];C={_fullLayout:{_axisConstraintGroups:this.graphDiv._fullLayout._axisConstraintGroups,
xaxis:this.xaxis,yaxis:this.yaxis}};k(C,this.xaxis);k(C,this.yaxis);var L=u._size,K=this.xaxis.domain,H=this.yaxis.domain;E.viewBox=[L.l+K[0]*L.w,L.b+H[0]*L.h,G-L.r-(1-K[1])*L.w,J-L.t-(1-H[1])*L.h];this.mouseContainer.style.width=L.w*(K[1]-K[0])+"px";this.mouseContainer.style.height=L.h*(H[1]-H[0])+"px";this.mouseContainer.height=L.h*(H[1]-H[0]);this.mouseContainer.style.left=L.l+K[0]*L.w+"px";this.mouseContainer.style.top=L.t+(1-H[1])*L.h+"px";for(J=0;2>J;++J)G=this[y[J]],G._length=E.viewBox[J+2]-
E.viewBox[J],t(this.graphDiv,G),G.setScale();f(C);E.ticks=this.computeTickMarks();E.dataBox=this.calcDataBox();E.merge(u);D.update(E);this.glplot.draw()};b.calcDataBox=function(){var E=this.xaxis,C=this.yaxis,u=E.range,D=C.range;E=E.r2l;C=C.r2l;return[E(u[0]),C(D[0]),E(u[1]),C(D[1])]};b.setRanges=function(E){var C=this.xaxis,u=this.yaxis,D=C.l2r,G=u.l2r;C.range=[D(E[0]),D(E[2])];u.range=[G(E[1]),G(E[3])]};b.updateTraces=function(E,C){var u=Object.keys(this.traces),D;this.fullData=E;var G=0;a:for(;G<
u.length;G++){var J=u[G],L=this.traces[J];for(D=0;D<E.length;D++){var K=E[D];if(K.uid===J&&K.type===L.type)continue a}L.dispose();delete this.traces[J]}for(G=0;G<E.length;G++)K=E[G],u=C[G],(D=this.traces[K.uid])?D.update(K,u):(D=K._module.plot(this,K,u),this.traces[K.uid]=D);this.glplot.objects.sort(function(H,Q){return H._trace.index-Q._trace.index})};b.updateFx=function(E){w(E)||v(E)?(this.pickCanvas.style["pointer-events"]="none",this.mouseContainer.style["pointer-events"]="none"):(this.pickCanvas.style["pointer-events"]=
"auto",this.mouseContainer.style["pointer-events"]="auto");this.mouseContainer.style.cursor="pan"===E?"move":"zoom"===E?"crosshair":null};b.emitPointAction=function(E,C){for(var u=E.trace.uid,D=E.pointIndex,G,J=0;J<this.fullData.length;J++)this.fullData[J].uid===u&&(G=this.fullData[J]);E={x:E.traceCoord[0],y:E.traceCoord[1],curveNumber:G.index,pointNumber:D,data:G._input,fullData:this.fullData,xaxis:this.xaxis,yaxis:this.yaxis};l.appendArrayPointValue(E,G,D);this.graphDiv.emit(C,{points:[E]})};b.draw=
function(){if(!this.stopped){requestAnimationFrame(this.redraw);var E=this.glplot,C=this.camera,u=C.mouseListener,D=1===this.lastButtonState&&0===u.buttons,G=this.fullLayout;this.lastButtonState=u.buttons;this.cameraChanged();var J=u.x*E.pixelRatio;u=this.canvas.height-E.pixelRatio*u.y;if(C.boxEnabled&&"zoom"===G.dragmode){this.selectBox.enabled=!0;G=this.selectBox.selectBox=[Math.min(C.boxStart[0],C.boxEnd[0]),Math.min(C.boxStart[1],C.boxEnd[1]),Math.max(C.boxStart[0],C.boxEnd[0]),Math.max(C.boxStart[1],
C.boxEnd[1])];for(D=0;2>D;D++)C.boxStart[D]===C.boxEnd[D]&&(G[D]=E.dataBox[D],G[D+2]=E.dataBox[D+2]);E.setDirty()}else if(!C.panning&&this.isMouseOver){this.selectBox.enabled=!1;var L=G._size;(C=(L=E.pick(J/E.pixelRatio+L.l+this.xaxis.domain[0]*L.w,u/E.pixelRatio-(L.t+(1-this.yaxis.domain[1])*L.h)))&&L.object._trace.handlePick(L))&&D&&this.emitPointAction(C,"plotly_click");L&&"skip"!==L.object._trace.hoverinfo&&G.hovermode&&C&&(!this.lastPickResult||this.lastPickResult.traceUid!==C.trace.uid||this.lastPickResult.dataCoord[0]!==
C.dataCoord[0]||this.lastPickResult.dataCoord[1]!==C.dataCoord[1])&&(this.lastPickResult={traceUid:C.trace?C.trace.uid:null,dataCoord:C.dataCoord.slice()},this.spikes.update({center:L.dataCoord}),C.screenCoord=[((E.viewBox[2]-E.viewBox[0])*(L.dataCoord[0]-E.dataBox[0])/(E.dataBox[2]-E.dataBox[0])+E.viewBox[0])/E.pixelRatio,(this.canvas.height-(E.viewBox[3]-E.viewBox[1])*(L.dataCoord[1]-E.dataBox[1])/(E.dataBox[3]-E.dataBox[1])-E.viewBox[1])/E.pixelRatio],this.emitPointAction(C,"plotly_hover"),D=this.fullData[C.trace.index]||
{},J=C.pointIndex,(G=l.castHoverinfo(D,G,J))&&"all"!==G&&(G=G.split("+"),-1===G.indexOf("x")&&(C.traceCoord[0]=void 0),-1===G.indexOf("y")&&(C.traceCoord[1]=void 0),-1===G.indexOf("z")&&(C.traceCoord[2]=void 0),-1===G.indexOf("text")&&(C.textLabel=void 0),-1===G.indexOf("name")&&(C.name=void 0)),l.loneHover({x:C.screenCoord[0],y:C.screenCoord[1],xLabel:this.hoverFormatter("xaxis",C.traceCoord[0]),yLabel:this.hoverFormatter("yaxis",C.traceCoord[1]),zLabel:C.traceCoord[2],text:C.textLabel,name:C.name,
color:l.castHoverOption(D,J,"bgcolor")||C.color,borderColor:l.castHoverOption(D,J,"bordercolor"),fontFamily:l.castHoverOption(D,J,"font.family"),fontSize:l.castHoverOption(D,J,"font.size"),fontColor:l.castHoverOption(D,J,"font.color"),nameLength:l.castHoverOption(D,J,"namelength"),textAlign:l.castHoverOption(D,J,"align")},{container:this.svgContainer,gd:this.graphDiv}))}L||this.unhover();E.draw()}};b.unhover=function(){this.lastPickResult&&(this.spikes.update({}),this.lastPickResult=null,this.graphDiv.emit("plotly_unhover"),
l.loneUnhover(this.svgContainer))};b.hoverFormatter=function(E,C){if(void 0!==C)return E=this[E],m.tickText(E,E.c2l(C),"hover").text}},{"../../components/dragelement/helpers":661,"../../components/fx":683,"../../lib/show_no_webgl_msg":800,"../../plots/cartesian/axes":828,"../../registry":911,"../cartesian/autorange":827,"../cartesian/constants":834,"../cartesian/constraints":835,"./camera":866,"./convert":867,"gl-plot2d":317,"gl-select-box":333,"gl-spikes2d":342,"webgl-context":606}],870:[function(b,
N,I){N=b("../../plot_api/edit_types").overrideAll;var r=b("../../components/fx/layout_attributes"),q=b("./scene"),m=b("../get_data").getSubplotData,l=b("../../lib"),a=b("../../constants/xmlns_namespaces");I.name="gl3d";I.attr="scene";I.idRoot="scene";I.idRegex=I.attrRegex=l.counterRegex("scene");I.attributes=b("./layout/attributes");I.layoutAttributes=b("./layout/layout_attributes");I.baseLayoutAttrOverrides=N({hoverlabel:r.hoverlabel},"plot","nested");I.supplyLayoutDefaults=b("./layout/defaults");
I.plot=function(h){for(var g=h._fullLayout,n=h._fullData,p=g._subplots.gl3d,d=0;d<p.length;d++){var e=p[d],f=m(n,"gl3d",e),k=g[e],t=k.camera,v=k._scene;v||(v=new q({id:e,graphDiv:h,container:h.querySelector(".gl-container"),staticPlot:h._context.staticPlot,plotGlPixelRatio:h._context.plotGlPixelRatio,camera:t},g),k._scene=v);v.viewInitial||(v.viewInitial={up:{x:t.up.x,y:t.up.y,z:t.up.z},eye:{x:t.eye.x,y:t.eye.y,z:t.eye.z},center:{x:t.center.x,y:t.center.y,z:t.center.z}});v.plot(f,g,h.layout)}};I.clean=
function(h,g,n,p){h=p._subplots.gl3d||[];for(n=0;n<h.length;n++){var d=h[n];!g[d]&&p[d]._scene&&(p[d]._scene.destroy(),p._infolayer&&p._infolayer.selectAll(".annotation-"+d).remove())}};I.toSVG=function(h){h=h._fullLayout;for(var g=h._subplots.gl3d,n=h._size,p=0;p<g.length;p++){var d=h[g[p]],e=d.domain;d=d._scene;var f=d.toImage("png");h._glimages.append("svg:image").attr({xmlns:a.svg,"xlink:href":f,x:n.l+n.w*e.x[0],y:n.t+n.h*(1-e.y[1]),width:n.w*(e.x[1]-e.x[0]),height:n.h*(e.y[1]-e.y[0]),preserveAspectRatio:"none"});
d.destroy()}};I.cleanId=function(h){if(h.match(/^scene[0-9]*$/))return h=h.substr(5),"1"===h&&(h=""),"scene"+h};I.updateFx=function(h){h=h._fullLayout;for(var g=h._subplots.gl3d,n=0;n<g.length;n++)h[g[n]]._scene.updateFx(h.dragmode,h.hovermode)}},{"../../components/fx/layout_attributes":684,"../../constants/xmlns_namespaces":754,"../../lib":778,"../../plot_api/edit_types":810,"../get_data":865,"./layout/attributes":871,"./layout/defaults":875,"./layout/layout_attributes":876,"./scene":880}],871:[function(b,
N,I){N.exports={scene:{valType:"subplotid",dflt:"scene",editType:"calc+clearAxisTypes"}}},{}],872:[function(b,N,I){I=b("../../../components/color");var r=b("../../cartesian/layout_attributes"),q=b("../../../lib/extend").extendFlat;b=b("../../../plot_api/edit_types").overrideAll;N.exports=b({visible:r.visible,showspikes:{valType:"boolean",dflt:!0},spikesides:{valType:"boolean",dflt:!0},spikethickness:{valType:"number",min:0,dflt:2},spikecolor:{valType:"color",dflt:I.defaultLine},showbackground:{valType:"boolean",
dflt:!1},backgroundcolor:{valType:"color",dflt:"rgba(204, 204, 204, 0.5)"},showaxeslabels:{valType:"boolean",dflt:!0},color:r.color,categoryorder:r.categoryorder,categoryarray:r.categoryarray,title:{text:r.title.text,font:r.title.font},type:q({},r.type,{values:["-","linear","log","date","category"]}),autotypenumbers:r.autotypenumbers,autorange:r.autorange,rangemode:r.rangemode,range:q({},r.range,{items:[{valType:"any",editType:"plot",impliedEdits:{"^autorange":!1}},{valType:"any",editType:"plot",
impliedEdits:{"^autorange":!1}}],anim:!1}),tickmode:r.tickmode,nticks:r.nticks,tick0:r.tick0,dtick:r.dtick,tickvals:r.tickvals,ticktext:r.ticktext,ticks:r.ticks,mirror:r.mirror,ticklen:r.ticklen,tickwidth:r.tickwidth,tickcolor:r.tickcolor,showticklabels:r.showticklabels,tickfont:r.tickfont,tickangle:r.tickangle,tickprefix:r.tickprefix,showtickprefix:r.showtickprefix,ticksuffix:r.ticksuffix,showticksuffix:r.showticksuffix,showexponent:r.showexponent,exponentformat:r.exponentformat,minexponent:r.minexponent,
separatethousands:r.separatethousands,tickformat:r.tickformat,tickformatstops:r.tickformatstops,hoverformat:r.hoverformat,showline:r.showline,linecolor:r.linecolor,linewidth:r.linewidth,showgrid:r.showgrid,gridcolor:q({},r.gridcolor,{dflt:"rgb(204, 204, 204)"}),gridwidth:r.gridwidth,zeroline:r.zeroline,zerolinecolor:r.zerolinecolor,zerolinewidth:r.zerolinewidth,_deprecated:{title:r._deprecated.title,titlefont:r._deprecated.titlefont}},"plot","from-root")},{"../../../components/color":643,"../../../lib/extend":768,
"../../../plot_api/edit_types":810,"../../cartesian/layout_attributes":842}],873:[function(b,N,I){var r=b("tinycolor2").mix,q=b("../../../lib"),m=b("../../../plot_api/plot_template"),l=b("./axis_attributes"),a=b("../../cartesian/type_defaults"),h=b("../../cartesian/axis_defaults"),g=["xaxis","yaxis","zaxis"],n=13600/187;N.exports=function(p,d,e){function f(y,B){return q.coerce(k,t,l,y,B)}for(var k,t,v=0;v<g.length;v++){var w=g[v];k=p[w]||{};t=m.newContainer(d,w);t._id=w[0]+e.scene;t._name=w;a(k,t,
f,e);h(k,t,f,{font:e.font,letter:w[0],data:e.data,showGrid:!0,noTickson:!0,noTicklabelmode:!0,noTicklabelposition:!0,bgColor:e.bgColor,calendar:e.calendar},e.fullLayout);f("gridcolor",r(t.color,e.bgColor,n).toRgbString());f("title.text",w[0]);t.setScale=q.noop;f("showspikes")&&(f("spikesides"),f("spikethickness"),f("spikecolor",t.color));f("showaxeslabels");f("showbackground")&&f("backgroundcolor")}}},{"../../../lib":778,"../../../plot_api/plot_template":817,"../../cartesian/axis_defaults":830,"../../cartesian/type_defaults":853,
"./axis_attributes":872,tinycolor2:576}],874:[function(b,N,I){function r(){this.bounds=[[-10,-10,-10],[10,10,10]];this.ticks=[[],[],[]];this.tickEnable=[!0,!0,!0];this.tickFont=["sans-serif","sans-serif","sans-serif"];this.tickSize=[12,12,12];this.tickAngle=[0,0,0];this.tickColor=[[0,0,0,1],[0,0,0,1],[0,0,0,1]];this.tickPad=[18,18,18];this.labels=["x","y","z"];this.labelEnable=[!0,!0,!0];this.labelFont=["Open Sans","Open Sans","Open Sans"];this.labelSize=[20,20,20];this.labelColor=[[0,0,0,1],[0,0,
0,1],[0,0,0,1]];this.labelPad=[30,30,30];this.lineEnable=[!0,!0,!0];this.lineMirror=[!1,!1,!1];this.lineWidth=[1,1,1];this.lineColor=[[0,0,0,1],[0,0,0,1],[0,0,0,1]];this.lineTickEnable=[!0,!0,!0];this.lineTickMirror=[!1,!1,!1];this.lineTickLength=[10,10,10];this.lineTickWidth=[1,1,1];this.lineTickColor=[[0,0,0,1],[0,0,0,1],[0,0,0,1]];this.gridEnable=[!0,!0,!0];this.gridWidth=[1,1,1];this.gridColor=[[0,0,0,1],[0,0,0,1],[0,0,0,1]];this.zeroEnable=[!0,!0,!0];this.zeroLineColor=[[0,0,0,1],[0,0,0,1],[0,
0,0,1]];this.zeroLineWidth=[2,2,2];this.backgroundEnable=[!0,!0,!0];this.backgroundColor=[[.8,.8,.8,.5],[.8,.8,.8,.5],[.8,.8,.8,.5]];this._defaultTickPad=this.tickPad.slice();this._defaultLabelPad=this.labelPad.slice();this._defaultLineTickLength=this.lineTickLength.slice()}var q=b("../../../lib/str2rgbarray"),m=b("../../../lib"),l=["xaxis","yaxis","zaxis"];r.prototype.merge=function(a,h){for(var g=0;3>g;++g){var n=h[l[g]];n.visible?(this.labels[g]=a._meta?m.templateString(n.title.text,a._meta):n.title.text,
"font"in n.title&&(n.title.font.color&&(this.labelColor[g]=q(n.title.font.color)),n.title.font.family&&(this.labelFont[g]=n.title.font.family),n.title.font.size&&(this.labelSize[g]=n.title.font.size)),"showline"in n&&(this.lineEnable[g]=n.showline),"linecolor"in n&&(this.lineColor[g]=q(n.linecolor)),"linewidth"in n&&(this.lineWidth[g]=n.linewidth),"showgrid"in n&&(this.gridEnable[g]=n.showgrid),"gridcolor"in n&&(this.gridColor[g]=q(n.gridcolor)),"gridwidth"in n&&(this.gridWidth[g]=n.gridwidth),"log"===
n.type?this.zeroEnable[g]=!1:"zeroline"in n&&(this.zeroEnable[g]=n.zeroline),"zerolinecolor"in n&&(this.zeroLineColor[g]=q(n.zerolinecolor)),"zerolinewidth"in n&&(this.zeroLineWidth[g]=n.zerolinewidth),this.lineTickEnable[g]="ticks"in n&&n.ticks?!0:!1,"ticklen"in n&&(this.lineTickLength[g]=this._defaultLineTickLength[g]=n.ticklen),"tickcolor"in n&&(this.lineTickColor[g]=q(n.tickcolor)),"tickwidth"in n&&(this.lineTickWidth[g]=n.tickwidth),"tickangle"in n&&(this.tickAngle[g]="auto"===n.tickangle?-3600:
Math.PI*-n.tickangle/180),"showticklabels"in n&&(this.tickEnable[g]=n.showticklabels),"tickfont"in n&&(n.tickfont.color&&(this.tickColor[g]=q(n.tickfont.color)),n.tickfont.family&&(this.tickFont[g]=n.tickfont.family),n.tickfont.size&&(this.tickSize[g]=n.tickfont.size)),"mirror"in n?-1!==["ticks","all","allticks"].indexOf(n.mirror)?(this.lineTickMirror[g]=!0,this.lineMirror[g]=!0):!0===n.mirror?(this.lineTickMirror[g]=!1,this.lineMirror[g]=!0):(this.lineTickMirror[g]=!1,this.lineMirror[g]=!1):this.lineMirror[g]=
!1,"showbackground"in n&&!1!==n.showbackground?(this.backgroundEnable[g]=!0,this.backgroundColor[g]=q(n.backgroundcolor)):this.backgroundEnable[g]=!1):(this.tickEnable[g]=!1,this.labelEnable[g]=!1,this.lineEnable[g]=!1,this.lineTickEnable[g]=!1,this.gridEnable[g]=!1,this.zeroEnable[g]=!1,this.backgroundEnable[g]=!1)}};N.exports=function(a,h){var g=new r;g.merge(a,h);return g}},{"../../../lib":778,"../../../lib/str2rgbarray":802}],875:[function(b,N,I){function r(p,d,e,f){var k=e("bgcolor");k=m.combine(k,
f.paper_bgcolor);for(var t=["up","center","eye"],v=0;v<t.length;v++)e("camera."+t[v]+".x"),e("camera."+t[v]+".y"),e("camera."+t[v]+".z");e("camera.projection.type");t=!!e("aspectratio.x")&&!!e("aspectratio.y")&&!!e("aspectratio.z");v=e("aspectmode",t?"manual":"auto");t||(p.aspectratio=d.aspectratio={x:1,y:1,z:1},"manual"===v&&(d.aspectmode="auto"),p.aspectmode=d.aspectmode);t=n(f.fullData,"gl3d",f.id);h(p,d,{font:f.font,scene:f.id,data:t,bgColor:k,calendar:f.calendar,autotypenumbersDflt:f.autotypenumbersDflt,
fullLayout:f.fullLayout});l.getComponentMethod("annotations3d","handleDefaults")(p,d,f);d=f.getDfltFromLayout("dragmode");!1===d||d||(d="orbit",p.camera&&p.camera.up?(k=p.camera.up.x,t=p.camera.up.y,p=p.camera.up.z,0!==p&&(k&&t&&p?.999<p/Math.sqrt(k*k+t*t+p*p)&&(d="turntable"):d="turntable")):d="turntable");e("dragmode",d);e("hovermode",f.getDfltFromLayout("hovermode"))}var q=b("../../../lib"),m=b("../../../components/color"),l=b("../../../registry"),a=b("../../subplot_defaults"),h=b("./axis_defaults"),
g=b("./layout_attributes"),n=b("../../get_data").getSubplotData;N.exports=function(p,d,e){var f=1<d._basePlotModules.length;a(p,d,e,{type:"gl3d",attributes:g,handleDefaults:r,fullLayout:d,font:d.font,fullData:e,getDfltFromLayout:function(k){if(!f&&q.validate(p[k],g[k]))return p[k]},autotypenumbersDflt:d.autotypenumbers,paper_bgcolor:d.paper_bgcolor,calendar:d.calendar})}},{"../../../components/color":643,"../../../lib":778,"../../../registry":911,"../../get_data":865,"../../subplot_defaults":905,
"./axis_defaults":873,"./layout_attributes":876}],876:[function(b,N,I){function r(l,a,h){return{x:{valType:"number",dflt:l,editType:"camera"},y:{valType:"number",dflt:a,editType:"camera"},z:{valType:"number",dflt:h,editType:"camera"},editType:"camera"}}I=b("./axis_attributes");var q=b("../../domain").attributes,m=b("../../../lib/extend").extendFlat;b=b("../../../lib").counterRegex;N.exports={_arrayAttrRegexps:[b("scene",".annotations",!0)],bgcolor:{valType:"color",dflt:"rgba(0,0,0,0)",editType:"plot"},
camera:{up:m(r(0,0,1),{}),center:m(r(0,0,0),{}),eye:m(r(1.25,1.25,1.25),{}),projection:{type:{valType:"enumerated",values:["perspective","orthographic"],dflt:"perspective",editType:"calc"},editType:"calc"},editType:"camera"},domain:q({name:"scene",editType:"plot"}),aspectmode:{valType:"enumerated",values:["auto","cube","data","manual"],dflt:"auto",editType:"plot",impliedEdits:{"aspectratio.x":void 0,"aspectratio.y":void 0,"aspectratio.z":void 0}},aspectratio:{x:{valType:"number",min:0,editType:"plot",
impliedEdits:{"^aspectmode":"manual"}},y:{valType:"number",min:0,editType:"plot",impliedEdits:{"^aspectmode":"manual"}},z:{valType:"number",min:0,editType:"plot",impliedEdits:{"^aspectmode":"manual"}},editType:"plot",impliedEdits:{aspectmode:"manual"}},xaxis:I,yaxis:I,zaxis:I,dragmode:{valType:"enumerated",values:["orbit","turntable","zoom","pan",!1],editType:"plot"},hovermode:{valType:"enumerated",values:["closest",!1],dflt:"closest",editType:"modebar"},uirevision:{valType:"any",editType:"none"},
editType:"plot",_deprecated:{cameraposition:{valType:"info_array",editType:"camera"}}}},{"../../../lib":778,"../../../lib/extend":768,"../../domain":855,"./axis_attributes":872}],877:[function(b,N,I){function r(){this.enabled=[!0,!0,!0];this.colors=[[0,0,0,1],[0,0,0,1],[0,0,0,1]];this.drawSides=[!0,!0,!0];this.lineWidth=[1,1,1]}var q=b("../../../lib/str2rgbarray"),m=["xaxis","yaxis","zaxis"];r.prototype.merge=function(l){for(var a=0;3>a;++a){var h=l[m[a]];h.visible?(this.enabled[a]=h.showspikes,this.colors[a]=
q(h.spikecolor),this.drawSides[a]=h.spikesides,this.lineWidth[a]=h.spikethickness):(this.enabled[a]=!1,this.drawSides[a]=!1)}};N.exports=function(l){var a=new r;a.merge(l);return a}},{"../../../lib/str2rgbarray":802}],878:[function(b,N,I){N.exports=function(l){for(var a=l.axesOptions,h=l.glplot.axesPixels,g=l.fullSceneLayout,n=[[],[],[]],p=0;3>p;++p){var d=g[m[p]];d._length=(h[p].hi-h[p].lo)*h[p].pixelsPerDataUnit/l.dataScale[p];if(Infinity===Math.abs(d._length)||isNaN(d._length))n[p]=[];else{d._input_range=
d.range.slice();d.range[0]=h[p].lo/l.dataScale[p];d.range[1]=h[p].hi/l.dataScale[p];d._m=1/(l.dataScale[p]*h[p].pixelsPerDataUnit);d.range[0]===d.range[1]&&(--d.range[0],d.range[1]+=1);var e=d.tickmode;if("auto"===d.tickmode){d.tickmode="linear";var f=d.nticks||q.constrain(d._length/40,4,9);r.autoTicks(d,Math.abs(d.range[1]-d.range[0])/f)}f=r.calcTicks(d,{msUTC:!0});for(var k=0;k<f.length;++k)f[k].x*=l.dataScale[p],"date"===d.type&&(f[k].text=f[k].text.replace(/<br>/g," "));n[p]=f;d.tickmode=e}}a.ticks=
n;for(p=0;3>p;++p)for(k=0;2>k;++k)a.bounds[k][p]=l.glplot.bounds[k][p];a=Array(3);for(h=0;3>h;++h){g=n[h];p=Array(g.length);for(d=0;d<g.length;++d)p[d]=g[d].x;a[h]=p}l.contourLevels=a};var r=b("../../cartesian/axes"),q=b("../../../lib"),m=["xaxis","yaxis","zaxis"]},{"../../../lib":778,"../../cartesian/axes":828}],879:[function(b,N,I){function r(q,m){var l=[0,0,0,0],a,h;for(a=0;4>a;++a)for(h=0;4>h;++h)l[h]+=q[4*a+h]*m[a];return l}N.exports=function(q,m){return r(q.projection,r(q.view,r(q.model,[m[0],
m[1],m[2],1])))}},{}],880:[function(b,N,I){function r(u,D){var G=document.createElement("div"),J=u.container;this.graphDiv=u.graphDiv;var L=document.createElementNS("http://www.w3.org/2000/svg","svg");L.style.position="absolute";L.style.top=L.style.left="0px";L.style.width=L.style.height="100%";L.style["z-index"]=20;L.style["pointer-events"]="none";G.appendChild(L);this.svgContainer=L;G.id=u.id;G.style.position="absolute";G.style.top=G.style.left="0px";G.style.width=G.style.height="100%";J.appendChild(G);
this.fullLayout=D;this.id=u.id||"scene";this.fullSceneLayout=D[this.id];this.plotArgs=[[],{},{}];this.axesOptions=w(D,D[this.id]);this.spikeOptions=y(D[this.id]);this.container=G;this.staticMode=!!u.staticPlot;this.pixelRatio=this.pixelRatio||u.plotGlPixelRatio||2;this.dataScale=[1,1,1];this.contourLevels=[[],[],[]];this.convertAnnotations=n.getComponentMethod("annotations3d","convert");this.drawAnnotations=n.getComponentMethod("annotations3d","draw");this.initializeGLPlot()}function q(u,D,G){u=u.fullSceneLayout;
for(var J=0;3>J;J++){var L=C[J],K=L.charAt(0);L=u[L];var H=D[K],Q=D[K+"calendar"];K=D["_"+K+"length"];if(p.isArrayOrTypedArray(H))for(var M,P=0;P<(K||H.length);P++)if(p.isArrayOrTypedArray(H[P]))for(var T=0;T<H[P].length;++T)M=L.d2l(H[P][T],0,Q),!isNaN(M)&&isFinite(M)&&(G[0][J]=Math.min(G[0][J],M),G[1][J]=Math.max(G[1][J],M));else M=L.d2l(H[P],0,Q),!isNaN(M)&&isFinite(M)&&(G[0][J]=Math.min(G[0][J],M),G[1][J]=Math.max(G[1][J],M));else G[0][J]=Math.min(G[0][J],0),G[1][J]=Math.max(G[1][J],K-1)}}function m(u,
D){u=u.fullSceneLayout;for(var G=u.annotations||[],J=0;3>J;J++){var L=C[J],K=L.charAt(0);L=u[L];for(var H=0;H<G.length;H++){var Q=G[H];Q.visible&&(Q=L.r2l(Q[K]),!isNaN(Q)&&isFinite(Q)&&(D[0][J]=Math.min(D[0][J],Q),D[1][J]=Math.max(D[1][J],Q)))}}}I=b("gl-plot3d");var l=I.createCamera,a=I.createScene,h=b("webgl-context"),g=b("has-passive-events"),n=b("../../registry"),p=b("../../lib"),d=p.preserveDrawingBuffer(),e=b("../../plots/cartesian/axes"),f=b("../../components/fx"),k=b("../../lib/str2rgbarray"),
t=b("../../lib/show_no_webgl_msg"),v=b("./project"),w=b("./layout/convert"),y=b("./layout/spikes"),B=b("./layout/tick_marks"),A,z;b=r.prototype;b.prepareOptions=function(){var u={canvas:this.canvas,gl:this.gl,glOptions:{preserveDrawingBuffer:d,premultipliedAlpha:!0,antialias:!0},container:this.container,axes:this.axesOptions,spikes:this.spikeOptions,pickRadius:10,snapToData:!0,autoScale:!0,autoBounds:!1,cameraObject:this.camera,pixelRatio:this.pixelRatio};if(this.staticMode){if(!z&&(A=document.createElement("canvas"),
z=h({canvas:A,preserveDrawingBuffer:!0,premultipliedAlpha:!0,antialias:!0}),!z))throw Error("error creating static canvas/context for image server");u.gl=z;u.canvas=A}return u};var E=!0;b.tryCreatePlot=function(){var u=this.prepareOptions(),D=!0;try{this.glplot=a(u)}catch(G){if(this.staticMode||!E||d)D=!1;else{p.warn("webgl setup failed possibly due to false preserveDrawingBuffer config. The mobile/tablet device may not be detected by is-mobile module. Enabling preserveDrawingBuffer in second attempt to create webgl scene...");
try{d=u.glOptions.preserveDrawingBuffer=!0,this.glplot=a(u)}catch(J){D=d=u.glOptions.preserveDrawingBuffer=!1}}}E=!1;return D};b.initializeGLCamera=function(){var u=this.fullSceneLayout.camera;this.camera=l(this.container,{center:[u.center.x,u.center.y,u.center.z],eye:[u.eye.x,u.eye.y,u.eye.z],up:[u.up.x,u.up.y,u.up.z],_ortho:"orthographic"===u.projection.type,zoomMin:.01,zoomMax:100,mode:"orbit"})};b.initializeGLPlot=function(){var u=this;u.initializeGLCamera();if(!u.tryCreatePlot())return t(u);
u.traces={};u.make4thDimension();var D=u.graphDiv,G=D.layout,J=function(){var K={};u.isCameraChanged(G)&&(K[u.id+".camera"]=u.getCamera());u.isAspectChanged(G)&&(K[u.id+".aspectratio"]=u.glplot.getAspectratio(),"manual"!==G[u.id].aspectmode&&(u.fullSceneLayout.aspectmode=G[u.id].aspectmode=K[u.id+".aspectmode"]="manual"));return K},L=function(K){if(!1!==K.fullSceneLayout.dragmode){var H=J();K.saveLayout(G);K.graphDiv.emit("plotly_relayout",H)}};u.glplot.canvas&&(u.glplot.canvas.addEventListener("mouseup",
function(){L(u)}),u.glplot.canvas.addEventListener("wheel",function(K){if(D._context._scrollZoom.gl3d){if(u.camera._ortho){K=K.deltaX>K.deltaY?1.1:1/1.1;var H=u.glplot.getAspectratio();u.glplot.setAspectratio({x:K*H.x,y:K*H.y,z:K*H.z})}L(u)}},g?{passive:!1}:!1),u.glplot.canvas.addEventListener("mousemove",function(){if(!1!==u.fullSceneLayout.dragmode&&0!==u.camera.mouseListener.buttons){var K=J();u.graphDiv.emit("plotly_relayouting",K)}}),u.staticMode||u.glplot.canvas.addEventListener("webglcontextlost",
function(K){D&&D.emit&&D.emit("plotly_webglcontextlost",{event:K,layer:u.id})},!1));u.glplot.oncontextloss=function(){u.recoverContext()};u.glplot.onrender=function(){u.render()};return!0};b.render=function(){function u(ca,ia){ca=D.fullSceneLayout[ca];return e.tickText(ca,ca.d2l(ia),"hover").text}var D=this,G=D.graphDiv,J=D.svgContainer,L=D.container.getBoundingClientRect();G._fullLayout._calcInverseTransform(G);var K=L.width*G._fullLayout._invScaleX;L=L.height*G._fullLayout._invScaleY;J.setAttributeNS(null,
"viewBox","0 0 "+K+" "+L);J.setAttributeNS(null,"width",K);J.setAttributeNS(null,"height",L);B(D);D.glplot.axes.update(D.axesOptions);for(var H=Object.keys(D.traces),Q=null,M=D.glplot.selection,P=0;P<H.length;++P){var T=D.traces[H[P]];"skip"!==T.data.hoverinfo&&T.handlePick(M)&&(Q=T);T.setContourLevels&&T.setContourLevels()}if(null!==Q){var O=v(D.glplot.cameraParams,M.dataCoordinate);T=Q.data;H=G._fullData[T.index];P=M.index;var U={xLabel:u("xaxis",M.traceCoordinate[0]),yLabel:u("yaxis",M.traceCoordinate[1]),
zLabel:u("zaxis",M.traceCoordinate[2])},S=f.castHoverinfo(H,D.fullLayout,P),X=(S||"").split("+");S=S&&"all"===S;H.hovertemplate||S||(-1===X.indexOf("x")&&(U.xLabel=void 0),-1===X.indexOf("y")&&(U.yLabel=void 0),-1===X.indexOf("z")&&(U.zLabel=void 0),-1===X.indexOf("text")&&(M.textLabel=void 0),-1===X.indexOf("name")&&(Q.name=void 0));var ba=[];"cone"===T.type||"streamtube"===T.type?(U.uLabel=u("xaxis",M.traceCoordinate[3]),(S||-1!==X.indexOf("u"))&&ba.push("u: "+U.uLabel),U.vLabel=u("yaxis",M.traceCoordinate[4]),
(S||-1!==X.indexOf("v"))&&ba.push("v: "+U.vLabel),U.wLabel=u("zaxis",M.traceCoordinate[5]),(S||-1!==X.indexOf("w"))&&ba.push("w: "+U.wLabel),U.normLabel=M.traceCoordinate[6].toPrecision(3),(S||-1!==X.indexOf("norm"))&&ba.push("norm: "+U.normLabel),"streamtube"===T.type&&(U.divergenceLabel=M.traceCoordinate[7].toPrecision(3),(S||-1!==X.indexOf("divergence"))&&ba.push("divergence: "+U.divergenceLabel)),M.textLabel&&ba.push(M.textLabel),X=ba.join("\x3cbr\x3e")):"isosurface"===T.type||"volume"===T.type?
(U.valueLabel=e.tickText(D._mockAxis,D._mockAxis.d2l(M.traceCoordinate[3]),"hover").text,ba.push("value: "+U.valueLabel),M.textLabel&&ba.push(M.textLabel),X=ba.join("\x3cbr\x3e")):X=M.textLabel;S={x:M.traceCoordinate[0],y:M.traceCoordinate[1],z:M.traceCoordinate[2],data:H._input,fullData:H,curveNumber:H.index,pointNumber:P};f.appendArrayPointValue(S,H,P);T._module.eventData&&(S=H._module.eventData(S,M,H,{},P));T={points:[S]};D.fullSceneLayout.hovermode&&f.loneHover({trace:H,x:(.5+.5*O[0]/O[3])*K,
y:(.5-.5*O[1]/O[3])*L,xLabel:U.xLabel,yLabel:U.yLabel,zLabel:U.zLabel,text:X,name:Q.name,color:f.castHoverOption(H,P,"bgcolor")||Q.color,borderColor:f.castHoverOption(H,P,"bordercolor"),fontFamily:f.castHoverOption(H,P,"font.family"),fontSize:f.castHoverOption(H,P,"font.size"),fontColor:f.castHoverOption(H,P,"font.color"),nameLength:f.castHoverOption(H,P,"namelength"),textAlign:f.castHoverOption(H,P,"align"),hovertemplate:p.castOption(H,P,"hovertemplate"),hovertemplateLabels:p.extendFlat({},S,U),
eventData:[S]},{container:J,gd:G});M.buttons&&5>M.distance?G.emit("plotly_click",T):G.emit("plotly_hover",T);O=T}else f.loneUnhover(J),G.emit("plotly_unhover",O);D.drawAnnotations(D)};b.recoverContext=function(){var u=this;u.glplot.dispose();var D=function(){u.glplot.gl.isContextLost()?requestAnimationFrame(D):u.initializeGLPlot()?u.plot.apply(u,u.plotArgs):p.error("Catastrophic and unrecoverable WebGL error. Context lost.")};requestAnimationFrame(D)};var C=["xaxis","yaxis","zaxis"];b.plot=function(u,
D,G){this.plotArgs=[u,D,G];if(!this.glplot.contextLost){var J,L,K=D[this.id];G=G[this.id];this.fullLayout=D;this.fullSceneLayout=K;this.axesOptions.merge(D,K);this.spikeOptions.merge(K);this.setViewport(K);this.updateFx(K.dragmode,K.hovermode);this.camera.enableWheel=this.graphDiv._context._scrollZoom.gl3d;this.glplot.setClearColor(k(K.bgcolor));this.setConvert(Q);u?Array.isArray(u)||(u=[u]):u=[];var H=[[Infinity,Infinity,Infinity],[-Infinity,-Infinity,-Infinity]];for(J=0;J<u.length;++J){var Q=u[J];
!0===Q.visible&&0!==Q._length&&q(this,Q,H)}m(this,H);var M=[1,1,1];for(L=0;3>L;++L)M[L]=H[1][L]===H[0][L]?1:1/(H[1][L]-H[0][L]);this.dataScale=M;this.convertAnnotations(this);for(J=0;J<u.length;++J)Q=u[J],!0===Q.visible&&0!==Q._length&&((H=this.traces[Q.uid])?H.data.type===Q.type?H.update(Q):(H.dispose(),H=Q._module.plot(this,Q),this.traces[Q.uid]=H):(H=Q._module.plot(this,Q),this.traces[Q.uid]=H),H.name=Q.name);Q=Object.keys(this.traces);J=0;a:for(;J<Q.length;++J){for(L=0;L<u.length;++L)if(u[L].uid===
Q[J]&&!0===u[L].visible&&0!==u[L]._length)continue a;H=this.traces[Q[J]];H.dispose();delete this.traces[Q[J]]}this.glplot.objects.sort(function(ba,ca){return ba._trace.data.index-ca._trace.data.index});H=[[0,0,0],[0,0,0]];u={};for(J=0;3>J;++J){Q=K[C[J]];L=Q.type;L in u?(u[L].acc*=M[J],u[L].count+=1):u[L]={acc:M[J],count:1};if(Q.autorange){H[0][J]=Infinity;H[1][J]=-Infinity;var P=this.glplot.objects,T=this.fullSceneLayout.annotations||[],O=Q._name.charAt(0);for(L=0;L<P.length;L++){var U=P[L],S=U.bounds,
X=U._trace.data._pad||0;H[0][J]="ErrorBars"===U.constructor.name&&Q._lowerLogErrorBound?Math.min(H[0][J],Q._lowerLogErrorBound):Math.min(H[0][J],S[0][J]/M[J]-X);H[1][J]=Math.max(H[1][J],S[1][J]/M[J]+X)}for(L=0;L<T.length;L++)P=T[L],P.visible&&(P=Q.r2l(P[O]),H[0][J]=Math.min(H[0][J],P),H[1][J]=Math.max(H[1][J],P));"rangemode"in Q&&"tozero"===Q.rangemode&&(H[0][J]=Math.min(H[0][J],0),H[1][J]=Math.max(H[1][J],0));H[0][J]>H[1][J]?(H[0][J]=-1,H[1][J]=1):(L=H[1][J]-H[0][J],H[0][J]-=L/32,H[1][J]+=L/32);
"reversed"===Q.autorange&&(Q=H[0][J],H[0][J]=H[1][J],H[1][J]=Q)}else L=Q.range,H[0][J]=Q.r2l(L[0]),H[1][J]=Q.r2l(L[1]);H[0][J]===H[1][J]&&(--H[0][J],H[1][J]+=1);this.glplot.setBounds(J,{min:H[0][J]*M[J],max:H[1][J]*M[J]})}H=K.aspectmode;if("cube"===H)J=[1,1,1];else if("manual"===H)J=K.aspectratio,J=[J.x,J.y,J.z];else if("auto"===H||"data"===H){T=[1,1,1];for(J=0;3>J;++J)Q=K[C[J]],L=Q.type,Q=u[L],T[J]=Math.pow(Q.acc,1/Q.count)/M[J];J="data"===H?T:4>=Math.max.apply(null,T)/Math.min.apply(null,T)?T:[1,
1,1]}else throw Error("scene.js aspectRatio was not one of the enumerated types");K.aspectratio.x=G.aspectratio.x=J[0];K.aspectratio.y=G.aspectratio.y=J[1];K.aspectratio.z=G.aspectratio.z=J[2];this.glplot.setAspectratio(K.aspectratio);this.viewInitial.aspectratio||(this.viewInitial.aspectratio={x:K.aspectratio.x,y:K.aspectratio.y,z:K.aspectratio.z});this.viewInitial.aspectmode||(this.viewInitial.aspectmode=K.aspectmode);K=K.domain||null;D=D._size||null;K&&D&&(G=this.container.style,G.position="absolute",
G.left=D.l+K.x[0]*D.w+"px",G.top=D.t+(1-K.y[1])*D.h+"px",G.width=D.w*(K.x[1]-K.x[0])+"px",G.height=D.h*(K.y[1]-K.y[0])+"px");this.glplot.redraw()}};b.destroy=function(){this.glplot&&(this.camera.mouseListener.enabled=!1,this.container.removeEventListener("wheel",this.camera.wheelListener),this.camera=null,this.glplot.dispose(),this.container.parentNode.removeChild(this.container),this.glplot=null)};b.getCamera=function(){this.camera.view.recalcMatrix(this.camera.view.lastT());var u=this.camera;return{up:{x:u.up[0],
y:u.up[1],z:u.up[2]},center:{x:u.center[0],y:u.center[1],z:u.center[2]},eye:{x:u.eye[0],y:u.eye[1],z:u.eye[2]},projection:{type:!0===u._ortho?"orthographic":"perspective"}}};b.setViewport=function(u){var D=u.camera;this.camera.lookAt.apply(this,[[D.eye.x,D.eye.y,D.eye.z],[D.center.x,D.center.y,D.center.z],[D.up.x,D.up.y,D.up.z]]);this.glplot.setAspectratio(u.aspectratio);"orthographic"===D.projection.type!==this.camera._ortho&&(this.glplot.redraw(),this.glplot.clearRGBA(),this.glplot.dispose(),this.initializeGLPlot())};
b.isCameraChanged=function(u){var D=this.getCamera();u=p.nestedProperty(u,this.id+".camera").get();var G=!1;if(void 0===u)G=!0;else{for(var J=0;3>J;J++)for(var L=0;3>L;L++){var K=["up","center","eye"],H=["x","y","z"];if(!u[K[J]]||D[K[J]][H[L]]!==u[K[J]][H[L]]){G=!0;break}}if(!u.projection||D.projection&&D.projection.type!==u.projection.type)G=!0}return G};b.isAspectChanged=function(u){var D=this.glplot.getAspectratio();u=p.nestedProperty(u,this.id+".aspectratio").get();return void 0===u||u.x!==D.x||
u.y!==D.y||u.z!==D.z};b.saveLayout=function(u){var D=this.fullLayout,G=this.isCameraChanged(u),J=this.isAspectChanged(u),L=G||J;if(L){var K={};if(G){var H=this.getCamera();var Q=p.nestedProperty(u,this.id+".camera");var M=Q.get();K[this.id+".camera"]=M}if(J){var P=this.glplot.getAspectratio();var T=p.nestedProperty(u,this.id+".aspectratio");M=T.get();K[this.id+".aspectratio"]=M}n.call("_storeDirectGUIEdit",u,D._preGUI,K);G&&(Q.set(H),p.nestedProperty(D,this.id+".camera").set(H));J&&(T.set(P),p.nestedProperty(D,
this.id+".aspectratio").set(P),this.glplot.redraw())}return L};b.updateFx=function(u,D){var G=this.camera;if(G)if("orbit"===u)G.mode="orbit",G.keyBindingMode="rotate";else if("turntable"===u){G.up=[0,0,1];G.mode="turntable";G.keyBindingMode="rotate";var J=this.graphDiv;u=J._fullLayout;G=this.fullSceneLayout.camera;var L=G.up.x,K=G.up.y,H=G.up.z;.999>H/Math.sqrt(L*L+K*K+H*H)&&(L=this.id+".camera.up",K={x:0,y:0,z:1},H={},H[L]=K,J=J.layout,n.call("_storeDirectGUIEdit",J,u._preGUI,H),G.up=K,p.nestedProperty(J,
L).set(K))}else G.keyBindingMode=u;this.fullSceneLayout.hovermode=D};b.toImage=function(u){u||(u="png");this.staticMode&&this.container.appendChild(A);this.glplot.redraw();var D=this.glplot.gl,G=D.drawingBufferWidth,J=D.drawingBufferHeight;D.bindFramebuffer(D.FRAMEBUFFER,null);var L=new Uint8Array(G*J*4);D.readPixels(0,0,G,J,D.RGBA,D.UNSIGNED_BYTE,L);D=0;for(var K=J-1;D<K;++D,--K)for(var H=0;H<G;++H)for(var Q=0;4>Q;++Q){var M=4*(G*D+H)+Q,P=4*(G*K+H)+Q,T=L[M];L[M]=L[P];L[P]=T}for(D=0;D<J;++D)for(K=
0;K<G;++K)if(H=4*(G*D+K),Q=L[H+3],0<Q)for(Q=255/Q,M=0;3>M;++M)L[H+M]=Math.min(Q*L[H+M],255);D=document.createElement("canvas");D.width=G;D.height=J;K=D.getContext("2d");G=K.createImageData(G,J);G.data.set(L);K.putImageData(G,0,0);switch(u){case "jpeg":u=D.toDataURL("image/jpeg");break;case "webp":u=D.toDataURL("image/webp");break;default:u=D.toDataURL("image/png")}this.staticMode&&this.container.removeChild(A);return u};b.setConvert=function(){for(var u=0;3>u;u++){var D=this.fullSceneLayout[C[u]];
e.setConvert(D,this.fullLayout);D.setScale=p.noop}};b.make4thDimension=function(){var u=this.graphDiv._fullLayout;this._mockAxis={type:"linear",showexponent:"all",exponentformat:"B"};e.setConvert(this._mockAxis,u)};N.exports=r},{"../../components/fx":683,"../../lib":778,"../../lib/show_no_webgl_msg":800,"../../lib/str2rgbarray":802,"../../plots/cartesian/axes":828,"../../registry":911,"./layout/convert":874,"./layout/spikes":877,"./layout/tick_marks":878,"./project":879,"gl-plot3d":321,"has-passive-events":441,
"webgl-context":606}],881:[function(b,N,I){N.exports=function(r,q,m,l){l=l||r.length;for(var a=Array(l),h=0;h<l;h++)a[h]=[r[h],q[h],m[h]];return a}},{}],882:[function(b,N,I){I=b("./font_attributes");var r=b("./animation_attributes"),q=b("../components/color/attributes"),m=b("../components/shapes/draw_newshape/attributes"),l=b("./pad_attributes");b=b("../lib/extend").extendFlat;var a=I({editType:"calc"});a.family.dflt='"Open Sans", verdana, arial, sans-serif';a.size.dflt=12;a.color.dflt=q.defaultLine;
N.exports={font:a,title:{text:{valType:"string",editType:"layoutstyle"},font:I({editType:"layoutstyle"}),xref:{valType:"enumerated",dflt:"container",values:["container","paper"],editType:"layoutstyle"},yref:{valType:"enumerated",dflt:"container",values:["container","paper"],editType:"layoutstyle"},x:{valType:"number",min:0,max:1,dflt:.5,editType:"layoutstyle"},y:{valType:"number",min:0,max:1,dflt:"auto",editType:"layoutstyle"},xanchor:{valType:"enumerated",dflt:"auto",values:["auto","left","center",
"right"],editType:"layoutstyle"},yanchor:{valType:"enumerated",dflt:"auto",values:["auto","top","middle","bottom"],editType:"layoutstyle"},pad:b(l({editType:"layoutstyle"}),{}),editType:"layoutstyle"},uniformtext:{mode:{valType:"enumerated",values:[!1,"hide","show"],dflt:!1,editType:"plot"},minsize:{valType:"number",min:0,dflt:0,editType:"plot"},editType:"plot"},autosize:{valType:"boolean",dflt:!1,editType:"none"},width:{valType:"number",min:10,dflt:700,editType:"plot"},height:{valType:"number",min:10,
dflt:450,editType:"plot"},margin:{l:{valType:"number",min:0,dflt:80,editType:"plot"},r:{valType:"number",min:0,dflt:80,editType:"plot"},t:{valType:"number",min:0,dflt:100,editType:"plot"},b:{valType:"number",min:0,dflt:80,editType:"plot"},pad:{valType:"number",min:0,dflt:0,editType:"plot"},autoexpand:{valType:"boolean",dflt:!0,editType:"plot"},editType:"plot"},computed:{valType:"any",editType:"none"},paper_bgcolor:{valType:"color",dflt:q.background,editType:"plot"},plot_bgcolor:{valType:"color",dflt:q.background,
editType:"layoutstyle"},autotypenumbers:{valType:"enumerated",values:["convert types","strict"],dflt:"convert types",editType:"calc"},separators:{valType:"string",editType:"plot"},hidesources:{valType:"boolean",dflt:!1,editType:"plot"},showlegend:{valType:"boolean",editType:"legend"},colorway:{valType:"colorlist",dflt:q.defaults,editType:"calc"},datarevision:{valType:"any",editType:"calc"},uirevision:{valType:"any",editType:"none"},editrevision:{valType:"any",editType:"none"},selectionrevision:{valType:"any",
editType:"none"},template:{valType:"any",editType:"calc"},modebar:{orientation:{valType:"enumerated",values:["v","h"],dflt:"h",editType:"modebar"},bgcolor:{valType:"color",editType:"modebar"},color:{valType:"color",editType:"modebar"},activecolor:{valType:"color",editType:"modebar"},uirevision:{valType:"any",editType:"none"},editType:"modebar"},newshape:m.newshape,activeshape:m.activeshape,meta:{valType:"any",arrayOk:!0,editType:"plot"},transition:b({},r.transition,{editType:"none"}),_deprecated:{title:{valType:"string",
editType:"layoutstyle"},titlefont:I({editType:"layoutstyle"})}}},{"../components/color/attributes":642,"../components/shapes/draw_newshape/attributes":725,"../lib/extend":768,"./animation_attributes":822,"./font_attributes":856,"./pad_attributes":890}],883:[function(b,N,I){b={"open-street-map":{id:"osm",version:8,sources:{"plotly-osm-tiles":{type:"raster",attribution:'\x3ca href\x3d"http://www.openstreetmap.org/about/" target\x3d"_blank"\x3e OpenStreetMap\x3c/a\x3e',tiles:["https://a.tile.openstreetmap.org/{z}/{x}/{y}.png",
"https://b.tile.openstreetmap.org/{z}/{x}/{y}.png"],tileSize:256}},layers:[{id:"plotly-osm-tiles",type:"raster",source:"plotly-osm-tiles",minzoom:0,maxzoom:22}]},"white-bg":{id:"white-bg",version:8,sources:{},layers:[{id:"white-bg",type:"background",paint:{"background-color":"#FFFFFF"},minzoom:0,maxzoom:22}]},"carto-positron":{id:"carto-positron",version:8,sources:{"plotly-carto-positron":{type:"raster",attribution:'\x3ca href\x3d"https://carto.com/" target\x3d"_blank"\x3e CARTO\x3c/a\x3e',tiles:["https://cartodb-basemaps-c.global.ssl.fastly.net/light_all/{z}/{x}/{y}.png"],
tileSize:256}},layers:[{id:"plotly-carto-positron",type:"raster",source:"plotly-carto-positron",minzoom:0,maxzoom:22}]},"carto-darkmatter":{id:"carto-darkmatter",version:8,sources:{"plotly-carto-darkmatter":{type:"raster",attribution:'\x3ca href\x3d"https://carto.com/" target\x3d"_blank"\x3e CARTO\x3c/a\x3e',tiles:["https://cartodb-basemaps-c.global.ssl.fastly.net/dark_all/{z}/{x}/{y}.png"],tileSize:256}},layers:[{id:"plotly-carto-darkmatter",type:"raster",source:"plotly-carto-darkmatter",minzoom:0,
maxzoom:22}]},"stamen-terrain":{id:"stamen-terrain",version:8,sources:{"plotly-stamen-terrain":{type:"raster",attribution:'Map tiles by \x3ca href\x3d"http://stamen.com"\x3eStamen Design\x3c/a\x3e, under \x3ca href\x3d"http://creativecommons.org/licenses/by/3.0"\x3eCC BY 3.0\x3c/a\x3e | Data by \x3ca href\x3d"http://openstreetmap.org"\x3eOpenStreetMap\x3c/a\x3e, under \x3ca href\x3d"http://www.openstreetmap.org/copyright"\x3eODbL\x3c/a\x3e.',tiles:["https://stamen-tiles.a.ssl.fastly.net/terrain/{z}/{x}/{y}.png"],
tileSize:256}},layers:[{id:"plotly-stamen-terrain",type:"raster",source:"plotly-stamen-terrain",minzoom:0,maxzoom:22}]},"stamen-toner":{id:"stamen-toner",version:8,sources:{"plotly-stamen-toner":{type:"raster",attribution:'Map tiles by \x3ca href\x3d"http://stamen.com"\x3eStamen Design\x3c/a\x3e, under \x3ca href\x3d"http://creativecommons.org/licenses/by/3.0"\x3eCC BY 3.0\x3c/a\x3e | Data by \x3ca href\x3d"http://openstreetmap.org"\x3eOpenStreetMap\x3c/a\x3e, under \x3ca href\x3d"http://www.openstreetmap.org/copyright"\x3eODbL\x3c/a\x3e.',
tiles:["https://stamen-tiles.a.ssl.fastly.net/toner/{z}/{x}/{y}.png"],tileSize:256}},layers:[{id:"plotly-stamen-toner",type:"raster",source:"plotly-stamen-toner",minzoom:0,maxzoom:22}]},"stamen-watercolor":{id:"stamen-watercolor",version:8,sources:{"plotly-stamen-watercolor":{type:"raster",attribution:'Map tiles by \x3ca href\x3d"http://stamen.com"\x3eStamen Design\x3c/a\x3e, under \x3ca href\x3d"http://creativecommons.org/licenses/by/3.0"\x3eCC BY 3.0\x3c/a\x3e | Data by \x3ca href\x3d"http://openstreetmap.org"\x3eOpenStreetMap\x3c/a\x3e, under \x3ca href\x3d"http://creativecommons.org/licenses/by-sa/3.0"\x3eCC BY SA\x3c/a\x3e.',
tiles:["https://stamen-tiles.a.ssl.fastly.net/watercolor/{z}/{x}/{y}.png"],tileSize:256}},layers:[{id:"plotly-stamen-watercolor",type:"raster",source:"plotly-stamen-watercolor",minzoom:0,maxzoom:22}]}};I=Object.keys(b);N.exports={requiredVersion:"1.10.1",styleUrlPrefix:"mapbox://styles/mapbox/",styleUrlSuffix:"v9",styleValuesMapbox:"basic streets outdoors light dark satellite satellite-streets".split(" "),styleValueDflt:"basic",stylesNonMapbox:b,styleValuesNonMapbox:I,traceLayerPrefix:"plotly-trace-layer-",
layoutLayerPrefix:"plotly-layout-layer-",wrongVersionErrorMsg:"Your custom plotly.js bundle is not using the correct mapbox-gl version\nPlease install mapbox-gl@1.10.1.",noAccessTokenErrorMsg:"Missing Mapbox access token.\nMapbox trace type require a Mapbox access token to be registered.\nFor example:\n  Plotly.plot(gd, data, layout, { mapboxAccessToken: 'my-access-token' });\nMore info here: https://www.mapbox.com/help/define-access-token/",missingStyleErrorMsg:["No valid mapbox style found, please set `mapbox.style` to one of:",
I.join(", "),"or register a Mapbox access token to use a Mapbox-served style."].join("\n"),multipleTokensErrorMsg:"Set multiple mapbox access token across different mapbox subplot,\nusing first token found as mapbox-gl does not allow multipleaccess tokens on the same page.",mapOnErrorMsg:"Mapbox error.",mapboxLogo:{path0:"m 10.5,1.24 c -5.11,0 -9.25,4.15 -9.25,9.25 0,5.1 4.15,9.25 9.25,9.25 5.1,0 9.25,-4.15 9.25,-9.25 0,-5.11 -4.14,-9.25 -9.25,-9.25 z m 4.39,11.53 c -1.93,1.93 -4.78,2.31 -6.7,2.31 -0.7,0 -1.41,-0.05 -2.1,-0.16 0,0 -1.02,-5.64 2.14,-8.81 0.83,-0.83 1.95,-1.28 3.13,-1.28 1.27,0 2.49,0.51 3.39,1.42 1.84,1.84 1.89,4.75 0.14,6.52 z",
path1:"M 10.5,-0.01 C 4.7,-0.01 0,4.7 0,10.49 c 0,5.79 4.7,10.5 10.5,10.5 5.8,0 10.5,-4.7 10.5,-10.5 C 20.99,4.7 16.3,-0.01 10.5,-0.01 Z m 0,19.75 c -5.11,0 -9.25,-4.15 -9.25,-9.25 0,-5.1 4.14,-9.26 9.25,-9.26 5.11,0 9.25,4.15 9.25,9.25 0,5.13 -4.14,9.26 -9.25,9.26 z",path2:"M 14.74,6.25 C 12.9,4.41 9.98,4.35 8.23,6.1 5.07,9.27 6.09,14.91 6.09,14.91 c 0,0 5.64,1.02 8.81,-2.14 C 16.64,11 16.59,8.09 14.74,6.25 Z m -2.27,4.09 -0.91,1.87 -0.9,-1.87 -1.86,-0.91 1.86,-0.9 0.9,-1.87 0.91,1.87 1.86,0.9 z",
polygon:"11.56,12.21 10.66,10.34 8.8,9.43 10.66,8.53 11.56,6.66 12.47,8.53 14.33,9.43 12.47,10.34"},styleRules:{map:"overflow:hidden;position:relative;","missing-css":"display:none;",canary:"background-color:salmon;","ctrl-bottom-left":"position: absolute; pointer-events: none; z-index: 2; bottom: 0; left: 0;","ctrl-bottom-right":"position: absolute; pointer-events: none; z-index: 2; right: 0; bottom: 0;",ctrl:"clear: both; pointer-events: auto; transform: translate(0, 0);","ctrl-attrib.mapboxgl-compact .mapboxgl-ctrl-attrib-inner":"display: none;",
"ctrl-attrib.mapboxgl-compact:hover .mapboxgl-ctrl-attrib-inner":"display: block; margin-top:2px","ctrl-attrib.mapboxgl-compact:hover":"padding: 2px 24px 2px 4px; visibility: visible; margin-top: 6px;","ctrl-attrib.mapboxgl-compact::after":'content: ""; cursor: pointer; position: absolute; background-image: url(\'data:image/svg+xml;charset\x3dutf-8,%3Csvg viewBox\x3d"0 0 20 20" xmlns\x3d"http://www.w3.org/2000/svg"%3E %3Cpath fill\x3d"%23333333" fill-rule\x3d"evenodd" d\x3d"M4,10a6,6 0 1,0 12,0a6,6 0 1,0 -12,0 M9,7a1,1 0 1,0 2,0a1,1 0 1,0 -2,0 M9,10a1,1 0 1,1 2,0l0,3a1,1 0 1,1 -2,0"/%3E %3C/svg%3E\'); background-color: rgba(255, 255, 255, 0.5); width: 24px; height: 24px; box-sizing: border-box; border-radius: 12px;',
"ctrl-attrib.mapboxgl-compact":"min-height: 20px; padding: 0; margin: 10px; position: relative; background-color: #fff; border-radius: 3px 12px 12px 3px;","ctrl-bottom-right \x3e .mapboxgl-ctrl-attrib.mapboxgl-compact::after":"bottom: 0; right: 0","ctrl-bottom-left \x3e .mapboxgl-ctrl-attrib.mapboxgl-compact::after":"bottom: 0; left: 0","ctrl-bottom-left .mapboxgl-ctrl":"margin: 0 0 10px 10px; float: left;","ctrl-bottom-right .mapboxgl-ctrl":"margin: 0 10px 10px 0; float: right;","ctrl-attrib":"color: rgba(0, 0, 0, 0.75); text-decoration: none; font-size: 12px",
"ctrl-attrib a":"color: rgba(0, 0, 0, 0.75); text-decoration: none; font-size: 12px","ctrl-attrib a:hover":"color: inherit; text-decoration: underline;","ctrl-attrib .mapbox-improve-map":"font-weight: bold; margin-left: 2px;","attrib-empty":"display: none;","ctrl-logo":'display:block; width: 21px; height: 21px; background-image: url(\'data:image/svg+xml;charset\x3dutf-8,%3C?xml version\x3d"1.0" encoding\x3d"utf-8"?%3E %3Csvg version\x3d"1.1" id\x3d"Layer_1" xmlns\x3d"http://www.w3.org/2000/svg" xmlns:xlink\x3d"http://www.w3.org/1999/xlink" x\x3d"0px" y\x3d"0px" viewBox\x3d"0 0 21 21" style\x3d"enable-background:new 0 0 21 21;" xml:space\x3d"preserve"%3E%3Cg transform\x3d"translate(0,0.01)"%3E%3Cpath d\x3d"m 10.5,1.24 c -5.11,0 -9.25,4.15 -9.25,9.25 0,5.1 4.15,9.25 9.25,9.25 5.1,0 9.25,-4.15 9.25,-9.25 0,-5.11 -4.14,-9.25 -9.25,-9.25 z m 4.39,11.53 c -1.93,1.93 -4.78,2.31 -6.7,2.31 -0.7,0 -1.41,-0.05 -2.1,-0.16 0,0 -1.02,-5.64 2.14,-8.81 0.83,-0.83 1.95,-1.28 3.13,-1.28 1.27,0 2.49,0.51 3.39,1.42 1.84,1.84 1.89,4.75 0.14,6.52 z" style\x3d"opacity:0.9;fill:%23ffffff;enable-background:new" class\x3d"st0"/%3E%3Cpath d\x3d"M 10.5,-0.01 C 4.7,-0.01 0,4.7 0,10.49 c 0,5.79 4.7,10.5 10.5,10.5 5.8,0 10.5,-4.7 10.5,-10.5 C 20.99,4.7 16.3,-0.01 10.5,-0.01 Z m 0,19.75 c -5.11,0 -9.25,-4.15 -9.25,-9.25 0,-5.1 4.14,-9.26 9.25,-9.26 5.11,0 9.25,4.15 9.25,9.25 0,5.13 -4.14,9.26 -9.25,9.26 z" style\x3d"opacity:0.35;enable-background:new" class\x3d"st1"/%3E%3Cpath d\x3d"M 14.74,6.25 C 12.9,4.41 9.98,4.35 8.23,6.1 5.07,9.27 6.09,14.91 6.09,14.91 c 0,0 5.64,1.02 8.81,-2.14 C 16.64,11 16.59,8.09 14.74,6.25 Z m -2.27,4.09 -0.91,1.87 -0.9,-1.87 -1.86,-0.91 1.86,-0.9 0.9,-1.87 0.91,1.87 1.86,0.9 z" style\x3d"opacity:0.35;enable-background:new" class\x3d"st1"/%3E%3Cpolygon points\x3d"11.56,12.21 10.66,10.34 8.8,9.43 10.66,8.53 11.56,6.66 12.47,8.53 14.33,9.43 12.47,10.34 " style\x3d"opacity:0.9;fill:%23ffffff;enable-background:new" class\x3d"st0"/%3E%3C/g%3E%3C/svg%3E\')'}}},
{}],884:[function(b,N,I){var r=b("../../lib");N.exports=function(q,m){var l=q.split(" ");q=l[0];l=l[1];var a=r.isArrayOrTypedArray(m)?r.mean(m):m;m=.5+a/100;a=1.5+a/100;var h=["",""],g=[0,0];switch(q){case "top":h[0]="top";g[1]=-a;break;case "bottom":h[0]="bottom",g[1]=a}switch(l){case "left":h[1]="right";g[0]=-m;break;case "right":h[1]="left",g[0]=m}return{anchor:h[0]&&h[1]?h.join("-"):h[0]?h[0]:h[1]?h[1]:"center",offset:g}}},{"../../lib":778}],885:[function(b,N,I){function r(k){return"string"===
typeof k&&(-1!==f.styleValuesMapbox.indexOf(k)||0===k.indexOf("mapbox://"))}var q=b("mapbox-gl"),m=b("../../lib"),l=m.strTranslate,a=m.strScale,h=b("../../plots/get_data").getSubplotCalcData,g=b("../../constants/xmlns_namespaces"),n=b("d3"),p=b("../../components/drawing"),d=b("../../lib/svg_text_utils"),e=b("./mapbox"),f=I.constants=b("./constants");I.name="mapbox";I.attr="subplot";I.idRoot="mapbox";I.idRegex=I.attrRegex=m.counterRegex("mapbox");I.attributes={subplot:{valType:"subplotid",dflt:"mapbox",
editType:"calc"}};I.layoutAttributes=b("./layout_attributes");I.supplyLayoutDefaults=b("./layout_defaults");I.plot=function(k){var t=k._fullLayout,v=k.calcdata,w=t._subplots.mapbox;if(q.version!==f.requiredVersion)throw Error(f.wrongVersionErrorMsg);var y=k._fullLayout;if(""===k._context.mapboxAccessToken)y="";else{for(var B=[],A=[],z=!1,E=!1,C=0;C<w.length;C++){var u=y[w[C]],D=u.accesstoken;r(u.style)&&(D?m.pushUnique(B,D):(r(u._input.style)&&(m.error("Uses Mapbox map style, but did not set an access token."),
z=!0),E=!0));D&&m.pushUnique(A,D)}if(E)throw k=z?f.noAccessTokenErrorMsg:f.missingStyleErrorMsg,m.error(k),Error(k);B.length?(1<B.length&&m.warn(f.multipleTokensErrorMsg),y=B[0]):(A.length&&m.log(["Listed mapbox access token(s)",A.join(","),"but did not use a Mapbox map style, ignoring token(s)."].join(" ")),y="")}q.accessToken=y;for(y=0;y<w.length;y++)B=w[y],A=h(v,"mapbox",B),z=t[B],E=z._subplot,E||(E=new e(k,B),t[B]._subplot=E),E.viewInitial||(E.viewInitial={center:m.extendFlat({},z.center),zoom:z.zoom,
bearing:z.bearing,pitch:z.pitch}),E.plot(A,t,k._promises)};I.clean=function(k,t,v,w){k=w._subplots.mapbox||[];for(v=0;v<k.length;v++){var y=k[v];!t[y]&&w[y]._subplot&&w[y]._subplot.destroy()}};I.toSVG=function(k){for(var t=k._fullLayout,v=t._subplots.mapbox,w=t._size,y=0;y<v.length;y++){var B=t[v[y]],A=B.domain,z=B._subplot.toImage("png");t._glimages.append("svg:image").attr({xmlns:g.svg,"xlink:href":z,x:w.l+w.w*A.x[0],y:w.t+w.h*(1-A.y[1]),width:w.w*(A.x[1]-A.x[0]),height:w.h*(A.y[1]-A.y[0]),preserveAspectRatio:"none"});
B=n.select(B._subplot.div);null!==B.select(".mapboxgl-ctrl-logo").node().offsetParent&&(z=t._glimages.append("g"),z.attr("transform",l(w.l+w.w*A.x[0]+10,w.t+w.h*(1-A.y[0])-31)),z.append("path").attr("d",f.mapboxLogo.path0).style({opacity:.9,fill:"#ffffff","enable-background":"new"}),z.append("path").attr("d",f.mapboxLogo.path1).style("opacity",.35).style("enable-background","new"),z.append("path").attr("d",f.mapboxLogo.path2).style("opacity",.35).style("enable-background","new"),z.append("polygon").attr("points",
f.mapboxLogo.polygon).style({opacity:.9,fill:"#ffffff","enable-background":"new"}));var E=B.select(".mapboxgl-ctrl-attrib").text().replace("Improve this map","");B=t._glimages.append("g");var C=B.append("text");C.text(E).classed("static-attribution",!0).attr({"font-size":12,"font-family":"Arial",color:"rgba(0, 0, 0, 0.75)","text-anchor":"end","data-unformatted":E});var u=p.bBox(C.node());z=w.w*(A.x[1]-A.x[0]);u.width>z/2&&(u=E.split("|").join("\x3cbr\x3e"),C.text(u).attr("data-unformatted",u).call(d.convertToTspans,
k),u=p.bBox(C.node()));C.attr("transform",l(-3,-u.height+8));B.insert("rect",".static-attribution").attr({x:-u.width-6,y:-u.height-3,width:u.width+6,height:u.height+3,fill:"rgba(255, 255, 255, 0.75)"});C=1;u.width+6>z&&(C=z/(u.width+6));A=[w.l+w.w*A.x[1],w.t+w.h*(1-A.y[0])];B.attr("transform",l(A[0],A[1])+a(C))}};I.updateFx=function(k){k=k._fullLayout;for(var t=k._subplots.mapbox,v=0;v<t.length;v++)k[t[v]]._subplot.updateFx(k)}},{"../../components/drawing":665,"../../constants/xmlns_namespaces":754,
"../../lib":778,"../../lib/svg_text_utils":803,"../../plots/get_data":865,"./constants":883,"./layout_attributes":887,"./layout_defaults":888,"./mapbox":889,d3:169,"mapbox-gl":473}],886:[function(b,N,I){function r(n,p){this.subplot=n;this.uid=n.uid+"-"+p;this.index=p;this.idSource="source-"+this.uid;this.idLayer=g.layoutLayerPrefix+this.uid;this.below=this.layerType=this.source=this.sourceType=null;this.visible=!1}function q(n){if(!n.visible)return!1;n=n.source;if(Array.isArray(n)&&0<n.length){for(var p=
0;p<n.length;p++)if("string"!==typeof n[p]||0===n[p].length)return!1;return!0}return l.isPlainObject(n)||"string"===typeof n&&0<n.length}function m(n){var p={},d={};switch(n.type){case "circle":l.extendFlat(d,{"circle-radius":n.circle.radius,"circle-color":n.color,"circle-opacity":n.opacity});break;case "line":l.extendFlat(d,{"line-width":n.line.width,"line-color":n.color,"line-opacity":n.opacity,"line-dasharray":n.line.dash});break;case "fill":l.extendFlat(d,{"fill-color":n.color,"fill-outline-color":n.fill.outlinecolor,
"fill-opacity":n.opacity});break;case "symbol":var e=n.symbol,f=h(e.textposition,e.iconsize);l.extendFlat(p,{"icon-image":e.icon+"-15","icon-size":e.iconsize/10,"text-field":e.text,"text-size":e.textfont.size,"text-anchor":f.anchor,"text-offset":f.offset,"symbol-placement":e.placement});l.extendFlat(d,{"icon-color":n.color,"text-color":e.textfont.color,"text-opacity":n.opacity});break;case "raster":l.extendFlat(d,{"raster-fade-duration":0,"raster-opacity":n.opacity})}return{layout:p,paint:d}}var l=
b("../../lib"),a=b("../../lib/svg_text_utils").sanitizeHTML,h=b("./convert_text_opts"),g=b("./constants");b=r.prototype;b.update=function(n){this.visible?this.needsNewImage(n)?this.updateImage(n):this.needsNewSource(n)?(this.removeLayer(),this.updateSource(n),this.updateLayer(n)):this.needsNewLayer(n)?this.updateLayer(n):this.updateStyle(n):(this.updateSource(n),this.updateLayer(n));this.visible=q(n)};b.needsNewImage=function(n){return this.subplot.map.getSource(this.idSource)&&"image"===this.sourceType&&
"image"===n.sourcetype&&(this.source!==n.source||JSON.stringify(this.coordinates)!==JSON.stringify(n.coordinates))};b.needsNewSource=function(n){return this.sourceType!==n.sourcetype||JSON.stringify(this.source)!==JSON.stringify(n.source)||this.layerType!==n.type};b.needsNewLayer=function(n){return this.layerType!==n.type||this.below!==this.subplot.belowLookup["layout-"+this.index]};b.lookupBelow=function(){return this.subplot.belowLookup["layout-"+this.index]};b.updateImage=function(n){this.subplot.map.getSource(this.idSource).updateImage({url:n.source,
coordinates:n.coordinates});n=this.findFollowingMapboxLayerId(this.lookupBelow());null!==n&&this.subplot.map.moveLayer(this.idLayer,n)};b.updateSource=function(n){var p=this.subplot.map;p.getSource(this.idSource)&&p.removeSource(this.idSource);this.sourceType=n.sourcetype;this.source=n.source;if(q(n)){var d=n.sourcetype,e=n.source,f={type:d};if("geojson"===d)var k="data";else"vector"===d?k="string"===typeof e?"url":"tiles":"raster"===d?(k="tiles",f.tileSize=256):"image"===d&&(k="url",f.coordinates=
n.coordinates);f[k]=e;n.sourceattribution&&(f.attribution=a(n.sourceattribution));p.addSource(this.idSource,f)}};b.findFollowingMapboxLayerId=function(n){if("traces"===n)for(var p=this.subplot.getMapLayers(),d=0;d<p.length;d++){var e=p[d].id;if("string"===typeof e&&0===e.indexOf(g.traceLayerPrefix)){n=e;break}}return n};b.updateLayer=function(n){var p=this.subplot,d=m(n),e=this.lookupBelow(),f=this.findFollowingMapboxLayerId(e);this.removeLayer();q(n)&&p.addLayer({id:this.idLayer,source:this.idSource,
"source-layer":n.sourcelayer||"",type:n.type,minzoom:n.minzoom,maxzoom:n.maxzoom,layout:d.layout,paint:d.paint},f);this.layerType=n.type;this.below=e};b.updateStyle=function(n){q(n)&&(n=m(n),this.subplot.setOptions(this.idLayer,"setLayoutProperty",n.layout),this.subplot.setOptions(this.idLayer,"setPaintProperty",n.paint))};b.removeLayer=function(){var n=this.subplot.map;n.getLayer(this.idLayer)&&n.removeLayer(this.idLayer)};b.dispose=function(){var n=this.subplot.map;n.getLayer(this.idLayer)&&n.removeLayer(this.idLayer);
n.getSource(this.idSource)&&n.removeSource(this.idSource)};N.exports=function(n,p,d){n=new r(n,p);n.update(d);return n}},{"../../lib":778,"../../lib/svg_text_utils":803,"./constants":883,"./convert_text_opts":884}],887:[function(b,N,I){I=b("../../lib");var r=b("../../components/color").defaultLine,q=b("../domain").attributes,m=b("../font_attributes"),l=b("../../traces/scatter/attributes").textposition,a=b("../../plot_api/edit_types").overrideAll,h=b("../../plot_api/plot_template").templatedArray;
b=b("./constants");m=m({});m.family.dflt="Open Sans Regular, Arial Unicode MS Regular";(N.exports=a({_arrayAttrRegexps:[I.counterRegex("mapbox",".layers",!0)],domain:q({name:"mapbox"}),accesstoken:{valType:"string",noBlank:!0,strict:!0},style:{valType:"any",values:b.styleValuesMapbox.concat(b.styleValuesNonMapbox),dflt:b.styleValueDflt},center:{lon:{valType:"number",dflt:0},lat:{valType:"number",dflt:0}},zoom:{valType:"number",dflt:1},bearing:{valType:"number",dflt:0},pitch:{valType:"number",dflt:0},
layers:h("layer",{visible:{valType:"boolean",dflt:!0},sourcetype:{valType:"enumerated",values:["geojson","vector","raster","image"],dflt:"geojson"},source:{valType:"any"},sourcelayer:{valType:"string",dflt:""},sourceattribution:{valType:"string"},type:{valType:"enumerated",values:["circle","line","fill","symbol","raster"],dflt:"circle"},coordinates:{valType:"any"},below:{valType:"string"},color:{valType:"color",dflt:r},opacity:{valType:"number",min:0,max:1,dflt:1},minzoom:{valType:"number",min:0,
max:24,dflt:0},maxzoom:{valType:"number",min:0,max:24,dflt:24},circle:{radius:{valType:"number",dflt:15}},line:{width:{valType:"number",dflt:2},dash:{valType:"data_array"}},fill:{outlinecolor:{valType:"color",dflt:r}},symbol:{icon:{valType:"string",dflt:"marker"},iconsize:{valType:"number",dflt:10},text:{valType:"string",dflt:""},placement:{valType:"enumerated",values:["point","line","line-center"],dflt:"point"},textfont:m,textposition:I.extendFlat({},l,{arrayOk:!1})}})},"plot","from-root")).uirevision=
{valType:"any",editType:"none"}},{"../../components/color":643,"../../lib":778,"../../plot_api/edit_types":810,"../../plot_api/plot_template":817,"../../traces/scatter/attributes":1187,"../domain":855,"../font_attributes":856,"./constants":883}],888:[function(b,N,I){function r(g,n,p,d){p("accesstoken",d.accessToken);p("style");p("center.lon");p("center.lat");p("zoom");p("bearing");p("pitch");a(g,n,{name:"layers",handleItemDefaults:q});n._input=g}function q(g,n){function p(k,t){return m.coerce(g,n,
h.layers,k,t)}if(p("visible")){var d=p("sourcetype"),e="raster"===d||"image"===d;p("source");p("sourceattribution");"vector"===d&&p("sourcelayer");"image"===d&&p("coordinates");var f;e&&(f="raster");d=p("type",f);e&&"raster"!==d&&(d=n.type="raster",m.log("Source types *raster* and *image* must drawn *raster* layer type."));p("below");p("color");p("opacity");p("minzoom");p("maxzoom");"circle"===d&&p("circle.radius");"line"===d&&(p("line.width"),p("line.dash"));"fill"===d&&p("fill.outlinecolor");"symbol"===
d&&(p("symbol.icon"),p("symbol.iconsize"),p("symbol.text"),m.coerceFont(p,"symbol.textfont"),p("symbol.textposition"),p("symbol.placement"))}}var m=b("../../lib"),l=b("../subplot_defaults"),a=b("../array_container_defaults"),h=b("./layout_attributes");N.exports=function(g,n,p){l(g,n,p,{type:"mapbox",attributes:h,handleDefaults:r,partition:"y",accessToken:n._mapboxAccessToken})}},{"../../lib":778,"../array_container_defaults":823,"../subplot_defaults":905,"./layout_attributes":887}],889:[function(b,
N,I){function r(E,C){this.id=C;this.gd=E;C=E._fullLayout;E=E._context;this.container=C._glcontainer.node();this.isStatic=E.staticPlot;this.uid=C._uid+"-"+this.id;this.yaxis=this.xaxis=this.div=null;this.createFramework(C);this.styleObj=this.accessToken=this.map=null;this.traceHash={};this.layerList=[];this.belowLookup={};this.wheeling=this.dragging=!1}function q(E){var C={};a.isPlainObject(E)?(C.id=E.id,C.style=E):"string"===typeof E?(C.id=E,-1!==B.styleValuesMapbox.indexOf(E)?C.style=B.styleUrlPrefix+
E+"-"+B.styleUrlSuffix:C.style=B.stylesNonMapbox[E]?B.stylesNonMapbox[E]:E):(C.id=B.styleValueDflt,C.style=B.styleUrlPrefix+B.styleValueDflt+"-"+B.styleUrlSuffix);C.transition={duration:0,delay:0};return C}function m(E){return[E.lon,E.lat]}var l=b("mapbox-gl"),a=b("../../lib"),h=b("../../lib/geo_location_utils"),g=b("../../registry"),n=b("../cartesian/axes"),p=b("../../components/dragelement"),d=b("../../components/fx");I=b("../../components/dragelement/helpers");var e=I.rectMode,f=I.drawMode,k=I.selectMode,
t=b("../cartesian/select").prepSelect,v=b("../cartesian/select").clearSelect,w=b("../cartesian/select").clearSelectionsCache,y=b("../cartesian/select").selectOnClick,B=b("./constants"),A=b("./layers");b=r.prototype;b.plot=function(E,C,u){var D=this,G=C[D.id];D.map&&G.accesstoken!==D.accessToken&&(D.map.remove(),D.map=null,D.styleObj=null,D.traceHash={},D.layerList=[]);G=D.map?new Promise(function(J,L){D.updateMap(E,C,J,L)}):new Promise(function(J,L){D.createMap(E,C,J,L)});u.push(G)};b.createMap=function(E,
C,u,D){var G=this,J=C[G.id],L=G.styleObj=q(J.style);G.accessToken=J.accesstoken;var K=G.map=(new l.Map({container:G.div,style:L.style,center:m(J.center),zoom:J.zoom,bearing:J.bearing,pitch:J.pitch,interactive:!G.isStatic,preserveDrawingBuffer:G.isStatic,doubleClickZoom:!1,boxZoom:!1,attributionControl:!1})).addControl(new l.AttributionControl({compact:!0}));K._canvas.style.left="0px";K._canvas.style.top="0px";G.rejectOnError(D);G.isStatic||G.initFx(E,C);J=[];J.push(new Promise(function(H){K.once("load",
H)}));J=J.concat(h.fetchTraceGeoData(E));Promise.all(J).then(function(){G.fillBelowLookup(E,C);G.updateData(E);G.updateLayout(C);G.resolveOnRender(u)}).catch(D)};b.updateMap=function(E,C,u,D){var G=this,J=G.map,L=C[this.id];G.rejectOnError(D);var K=[];L=q(L.style);JSON.stringify(G.styleObj)!==JSON.stringify(L)&&(G.styleObj=L,J.setStyle(L.style),G.traceHash={},K.push(new Promise(function(H){J.once("styledata",H)})));K=K.concat(h.fetchTraceGeoData(E));Promise.all(K).then(function(){G.fillBelowLookup(E,
C);G.updateData(E);G.updateLayout(C);G.resolveOnRender(u)}).catch(D)};b.fillBelowLookup=function(E,C){var u=C[this.id].layers,D,G=this.belowLookup={},J=!1;for(C=0;C<E.length;C++){var L=E[C][0].trace,K=L._module;"string"===typeof L.below?D=L.below:K.getBelow&&(D=K.getBelow(L,this));""===D&&(J=!0);G["trace-"+L.uid]=D||""}for(C=0;C<u.length;C++)D=u[C],D="string"===typeof D.below?D.below:J?"traces":"",G["layout-"+C]=D;E={};for(var H in G)D=G[H],E[D]?E[D].push(H):E[D]=[H];for(D in E)if(G=E[D],1<G.length)for(C=
0;C<G.length;C++)H=G[C],0===H.indexOf("trace-")?(H=H.split("trace-")[1],this.traceHash[H]&&(this.traceHash[H].below=null)):0===H.indexOf("layout-")&&(H=H.split("layout-")[1],this.layerList[H]&&(this.layerList[H].below=null))};var z={choroplethmapbox:0,densitymapbox:1,scattermapbox:2};b.updateData=function(E){var C=this.traceHash,u,D=E.slice().sort(function(H,Q){return z[H[0].trace.type]-z[Q[0].trace.type]});for(u=0;u<D.length;u++){var G=D[u];var J=G[0].trace;var L=C[J.uid];var K=!1;L&&(L.type===J.type?
(L.update(G),K=!0):L.dispose());!K&&J._module&&(C[J.uid]=J._module.plot(this,G))}D=Object.keys(C);u=0;a:for(;u<D.length;u++){G=D[u];for(L=0;L<E.length;L++)if(J=E[L][0].trace,G===J.uid)continue a;L=C[G];L.dispose();delete C[G]}};b.updateLayout=function(E){var C=this.map,u=E[this.id];this.dragging||this.wheeling||(C.setCenter(m(u.center)),C.setZoom(u.zoom),C.setBearing(u.bearing),C.setPitch(u.pitch));this.updateLayers(E);this.updateFramework(E);this.updateFx(E);this.map.resize();this.gd._context._scrollZoom.mapbox?
C.scrollZoom.enable():C.scrollZoom.disable()};b.resolveOnRender=function(E){var C=this.map;C.on("render",function D(){C.loaded()&&(C.off("render",D),setTimeout(E,10))})};b.rejectOnError=function(E){function C(){E(Error(B.mapOnErrorMsg))}var u=this.map;u.once("error",C);u.once("style.error",C);u.once("source.error",C);u.once("tile.error",C);u.once("layer.error",C)};b.createFramework=function(E){var C=this,u=C.div=document.createElement("div");u.id=C.uid;u.style.position="absolute";C.container.appendChild(u);
C.xaxis={_id:"x",c2p:function(D){return C.project(D).x}};C.yaxis={_id:"y",c2p:function(D){return C.project(D).y}};C.updateFramework(E);C.mockAxis={type:"linear",showexponent:"all",exponentformat:"B"};n.setConvert(C.mockAxis,E)};b.initFx=function(E,C){function u(){d.loneUnhover(C._hoverlayer)}function D(){var K=G.getView();J.emit("plotly_relayouting",G.getViewEditsWithDerived(K))}var G=this,J=G.gd,L=G.map;L.on("moveend",function(K){if(G.map){var H=J._fullLayout;if(K.originalEvent||G.wheeling){var Q=
H[G.id];g.call("_storeDirectGUIEdit",J.layout,H._preGUI,G.getViewEdits(Q));var M=G.getView();Q._input.center=Q.center=M.center;Q._input.zoom=Q.zoom=M.zoom;Q._input.bearing=Q.bearing=M.bearing;Q._input.pitch=Q.pitch=M.pitch;J.emit("plotly_relayout",G.getViewEditsWithDerived(M))}K.originalEvent&&"mouseup"===K.originalEvent.type?G.dragging=!1:G.wheeling&&(G.wheeling=!1);H._rehover&&H._rehover()}});L.on("wheel",function(){G.wheeling=!0});L.on("mousemove",function(K){var H=G.div.getBoundingClientRect(),
Q=[K.originalEvent.offsetX,K.originalEvent.offsetY];K.target.getBoundingClientRect=function(){return H};G.xaxis.p2c=function(){return L.unproject(Q).lng};G.yaxis.p2c=function(){return L.unproject(Q).lat};J._fullLayout._rehover=function(){J._fullLayout._hoversubplot===G.id&&J._fullLayout[G.id]&&d.hover(J,K,G.id)};d.hover(J,K,G.id);J._fullLayout._hoversubplot=G.id});L.on("dragstart",function(){G.dragging=!0;u()});L.on("zoomstart",u);L.on("mouseout",function(){J._fullLayout._hoversubplot=null});L.on("drag",
D);L.on("zoom",D);L.on("dblclick",function(){var K=J._fullLayout[G.id];g.call("_storeDirectGUIEdit",J.layout,J._fullLayout._preGUI,G.getViewEdits(K));var H=G.viewInitial;L.setCenter(m(H.center));L.setZoom(H.zoom);L.setBearing(H.bearing);L.setPitch(H.pitch);H=G.getView();K._input.center=K.center=H.center;K._input.zoom=K.zoom=H.zoom;K._input.bearing=K.bearing=H.bearing;K._input.pitch=K.pitch=H.pitch;J.emit("plotly_doubleclick",null);J.emit("plotly_relayout",G.getViewEditsWithDerived(H))});G.clearSelect=
function(){w(G.dragOptions);v(G.dragOptions.gd)};G.onClickInPanFn=function(K){return function(H){var Q=J._fullLayout.clickmode;-1<Q.indexOf("select")&&y(H.originalEvent,J,[G.xaxis],[G.yaxis],G.id,K);-1<Q.indexOf("event")&&d.click(J,H.originalEvent)}}};b.updateFx=function(E){function C(K){K=u.map.unproject(K);return[K.lng,K.lat]}var u=this,D=u.map,G=u.gd;if(!u.isStatic){var J=E.dragmode;var L=e(J)?function(K,H){(K.range={})[u.id]=[C([H.xmin,H.ymin]),C([H.xmax,H.ymax])]}:function(K,H,Q){(K.lassoPoints=
{})[u.id]=Q.filtered.map(C)};u.dragOptions=a.extendDeep(u.dragOptions||{},{dragmode:E.dragmode,element:u.div,gd:G,plotinfo:{id:u.id,domain:E[u.id].domain,xaxis:u.xaxis,yaxis:u.yaxis,fillRangeItems:L},xaxes:[u.xaxis],yaxes:[u.yaxis],subplot:u.id});D.off("click",u.onClickInPanHandler);k(J)||f(J)?(D.dragPan.disable(),D.on("zoomstart",u.clearSelect),u.dragOptions.prepFn=function(K,H,Q){t(K,H,Q,u.dragOptions,J)},p.init(u.dragOptions)):(D.dragPan.enable(),D.off("zoomstart",u.clearSelect),u.div.onmousedown=
null,u.onClickInPanHandler=u.onClickInPanFn(u.dragOptions),D.on("click",u.onClickInPanHandler))}};b.updateFramework=function(E){var C=E[this.id].domain;E=E._size;var u=this.div.style;u.width=E.w*(C.x[1]-C.x[0])+"px";u.height=E.h*(C.y[1]-C.y[0])+"px";u.left=E.l+C.x[0]*E.w+"px";u.top=E.t+(1-C.y[1])*E.h+"px";this.xaxis._offset=E.l+C.x[0]*E.w;this.xaxis._length=E.w*(C.x[1]-C.x[0]);this.yaxis._offset=E.t+(1-C.y[1])*E.h;this.yaxis._length=E.h*(C.y[1]-C.y[0])};b.updateLayers=function(E){E=E[this.id].layers;
var C=this.layerList,u;if(E.length!==C.length){for(u=0;u<C.length;u++)C[u].dispose();C=this.layerList=[];for(u=0;u<E.length;u++)C.push(A(this,u,E[u]))}else for(u=0;u<E.length;u++)C[u].update(E[u])};b.destroy=function(){this.map&&(this.map.remove(),this.map=null,this.container.removeChild(this.div))};b.toImage=function(){this.map.stop();return this.map.getCanvas().toDataURL()};b.setOptions=function(E,C,u){for(var D in u)this.map[C](E,D,u[D])};b.getMapLayers=function(){return this.map.getStyle().layers};
b.addLayer=function(E,C){var u=this.map;if("string"===typeof C){if(""===C){u.addLayer(E,C);return}for(var D=this.getMapLayers(),G=0;G<D.length;G++)if(C===D[G].id){u.addLayer(E,C);return}a.warn(["Trying to add layer with *below* value",C,"referencing a layer that does not exist or that does not yet exist."].join(" "))}u.addLayer(E)};b.project=function(E){return this.map.project(new l.LngLat(E[0],E[1]))};b.getView=function(){var E=this.map,C=E.getCenter();C={lon:C.lng,lat:C.lat};var u=E.getCanvas(),
D=u.width;u=u.height;return{center:C,zoom:E.getZoom(),bearing:E.getBearing(),pitch:E.getPitch(),_derived:{coordinates:[E.unproject([0,0]).toArray(),E.unproject([D,0]).toArray(),E.unproject([D,u]).toArray(),E.unproject([0,u]).toArray()]}}};b.getViewEdits=function(E){for(var C=this.id,u=["center","zoom","bearing","pitch"],D={},G=0;G<u.length;G++){var J=u[G];D[C+"."+J]=E[J]}return D};b.getViewEditsWithDerived=function(E){var C=this.id,u=this.getViewEdits(E);u[C+"._derived"]=E._derived;return u};N.exports=
r},{"../../components/dragelement":662,"../../components/dragelement/helpers":661,"../../components/fx":683,"../../lib":778,"../../lib/geo_location_utils":771,"../../registry":911,"../cartesian/axes":828,"../cartesian/select":847,"./constants":883,"./layers":886,"mapbox-gl":473}],890:[function(b,N,I){N.exports=function(r){r=r.editType;return{t:{valType:"number",dflt:0,editType:r},r:{valType:"number",dflt:0,editType:r},b:{valType:"number",dflt:0,editType:r},l:{valType:"number",dflt:0,editType:r},editType:r}}},
{}],891:[function(b,N,I){function r(O,U){U.text("");U=U.append("a").attr({"xlink:xlink:href":"#","class":"link--impt link--embedview","font-weight":"bold"}).text(O._context.linkText+" "+String.fromCharCode(187));if(O._context.sendData)U.on("click",function(){K.sendDataToCloud(O)});else{var S=window.location.pathname.split("/"),X=window.location.search;U.attr({"xlink:xlink:show":"new","xlink:xlink:href":"/"+S[2].split(".")[0]+"/"+S[1]+X})}}function q(O,U){function S(sa,ma){da[ma]=sa;oa[sa]=1}function X(sa,
ma){if(sa&&"string"===typeof sa&&!oa[sa])return S(sa,ma),!0}var ba=U.length,ca=[],ia;for(ia=0;ia<O.length;ia++){var ja=O[ia]._fullInput;ja!==la&&ca.push(ja);var la=ja}O=ca.length;var da=Array(ba),oa={};for(ia=0;ia<ba;ia++)la=U[ia].uid,"number"===typeof la&&(la=String(la)),X(la,ia)||ia<O&&X(ca[ia].uid,ia)||S(B.randstr(oa),ia);return da}function m(O,U){function S(da){for(var oa=!0,sa=0;sa<U.length;sa++){var ma=U[sa];ca[ma]||(da[ma]?ca[ma]=da[ma]:oa=!1)}oa&&(ba=!0)}var X=O._context.locale;X||(X="en-US");
for(var ba=!1,ca={},ia=0;2>ia;ia++){for(var ja=O._context.locales,la=0;2>la;la++){if(ja=(ja[X]||{}).format)if(S(ja),ba)break;ja=v.localeRegistry}la=X.split("-")[0];if(ba||la===X)break;X=la}ba||S(v.localeRegistry.en.format);return ca}function l(O){O=O.transforms;if(Array.isArray(O)&&O.length)for(var U=0;U<O.length;U++){var S=O[U];if((S=S._module||H[S.type])&&S.makesData)return!0}return!1}function a(O,U,S,X){for(var ba=O.transforms,ca=[O],ia=0;ia<ba.length;ia++){var ja=ba[ia],la=H[ja.type];la&&la.transform&&
(ca=la.transform(ca,{transform:ja,fullTrace:O,fullData:U,layout:S,fullLayout:X,transformIndex:ia}))}return ca}function h(O){return"string"===typeof O&&"px"===O.substr(O.length-2)&&parseFloat(O)}function g(O){var U=O.margin;O._size||(U=O._size={l:Math.round(U.l),r:Math.round(U.r),t:Math.round(U.t),b:Math.round(U.b),p:Math.round(U.pad)},U.w=Math.round(O.width)-U.l-U.r,U.h=Math.round(O.height)-U.t-U.b);O._pushmargin||(O._pushmargin={});O._pushmarginIds||(O._pushmarginIds={})}function n(O,U,S){function X(ja){if(ja)for(;ja.length;)ja.shift()}
function ba(ja){if(O._transitionData)return X(O._transitionData._interruptCallbacks),Promise.resolve().then(function(){if(S.redraw)return v.call("redraw",O)}).then(function(){O._transitioning=!1;O._transitioningWithDuration=!1;O.emit("plotly_transitioned",[])}).then(ja)}var ca=!1,ia=B.syncOrAsync([K.previousPromises,function(){if(O._transitionData){O._transitioning=!1;var ja=O._transitionData._interruptCallbacks,la=Promise.resolve();if(ja)for(;ja.length;)la=la.then(ja.shift());return la}},S.prepareFn,
K.rehover,function(){O.emit("plotly_transitioning",[]);return new Promise(function(ja){function la(){da++;return function(){oa++;ca||oa!==da||ba(ja)}}O._transitioning=!0;0<U.duration&&(O._transitioningWithDuration=!0);O._transitionData._interruptCallbacks.push(function(){ca=!0});S.redraw&&O._transitionData._interruptCallbacks.push(function(){return v.call("redraw",O)});O._transitionData._interruptCallbacks.push(function(){O.emit("plotly_transitioninterrupted",[])});var da=0,oa=0;S.runFn(la);setTimeout(la())})}],
O);ia&&ia.then||(ia=Promise.resolve());return ia.then(function(){return O})}function p(O,U){function S(nb,cb,$a){var jb=cb._id.charAt(0);if("histogram2dcontour"===nb){nb=cb._counterAxes[0];cb=E.getFromId(U,nb);var pb="x"===jb||"x"===nb&&"category"===cb.type,xa="y"===jb||"y"===nb&&"category"===cb.type;return function(Ea,Ia){return 0===Ea||0===Ia||pb&&Ea===$a[Ia].length-1||xa&&Ia===$a.length-1?-1:("y"===jb?Ia:Ea)-1}}return function(Ea,Ia){return"y"===jb?Ia:Ea}}var X=[],ba,ca,ia,ja,la={min:function(nb){return B.aggNums(Math.min,
null,nb)},max:function(nb){return B.aggNums(Math.max,null,nb)},sum:function(nb){return B.aggNums(function(cb,$a){return cb+$a},null,nb)},total:function(nb){return B.aggNums(function(cb,$a){return cb+$a},null,nb)},mean:function(nb){return B.mean(nb)},median:function(nb){return B.median(nb)}};for(ba=0;ba<O.length;ba++){var da=O[ba];if("category"===da.type&&(ca=da.categoryorder.match(T))){var oa=ca[1],sa=ca[2],ma=da._id.charAt(0),qa="x"===ma,pa=[];for(ca=0;ca<da._categories.length;ca++)pa.push([da._categories[ca],
[]]);for(ca=0;ca<da._traceIndices.length;ca++){var na=da._traceIndices[ca];var ka=U._fullData[na];if(!0===ka.visible){var ua=ka.type;v.traceIs(ka,"histogram")&&(delete ka._xautoBinFinished,delete ka._yautoBinFinished);var va="splom"===ua;ua="scattergl"===ua;var Ca=U.calcdata[na];for(na=0;na<Ca.length;na++){var Ma=Ca[na];if(va){var Ua=ka._axesDim[da._id];qa||(ia=ka._diag[Ua][0])&&(da=U._fullLayout[E.id2name(ia)]);var eb=Ma.trace.dimensions[Ua].values;for(ia=0;ia<eb.length;ia++){var fb=da._categoriesMap[eb[ia]];
for(ja=0;ja<Ma.trace.dimensions.length;ja++)ja!==Ua&&pa[fb][1].push(Ma.trace.dimensions[ja].values[ia])}}else if(ua){for(ia=0;ia<Ma.t.x.length;ia++)qa?(fb=Ma.t.x[ia],Ua=Ma.t.y[ia]):(fb=Ma.t.y[ia],Ua=Ma.t.x[ia]),pa[fb][1].push(Ua);Ma.t&&Ma.t._scene&&delete Ma.t._scene.dirty}else if(Ma.hasOwnProperty("z"))for(Ua=Ma.z,Ma=S(ka.type,da,Ua),ia=0;ia<Ua.length;ia++)for(ja=0;ja<Ua[ia].length;ja++)fb=Ma(ja,ia),fb+1&&pa[fb][1].push(Ua[ia][ja]);else for(fb=Ma.p,void 0===fb&&(fb=Ma[ma]),Ua=Ma.s,void 0===Ua&&(Ua=
Ma.v),void 0===Ua&&(Ua=qa?Ma.y:Ma.x),Array.isArray(Ua)||(Ua=void 0===Ua?[]:[Ua]),ia=0;ia<Ua.length;ia++)pa[fb][1].push(Ua[ia])}}}da._categoriesValue=pa;ma=[];for(ca=0;ca<pa.length;ca++)ma.push([pa[ca][0],la[oa](pa[ca][1])]);ma.sort(function(nb,cb){return nb[1]-cb[1]});da._categoriesAggregatedValue=ma;da._initialCategories=ma.map(function(nb){return nb[0]});"descending"===sa&&da._initialCategories.reverse();X=X.concat(da.sortByInitialCategories())}}return X}function d(O,U,S){function X(ja){ja.clearCalc();
"multicategory"===ja.type&&ja.setupMultiCategory(U);ba[ja._id]=1}var ba={};B.simpleMap(O,X);O=S._axisMatchGroups||[];for(var ca=0;ca<O.length;ca++)for(var ia in O[ca])ba[ia]||X(S[E.id2name(ia)])}function e(O){var U=O._fullLayout,S=U._visibleModules,X={},ba,ca;for(ba=0;ba<S.length;ba++){var ia=S[ba],ja=ia.crossTraceCalc;ja&&(ia=ia.basePlotModule.name,X[ia]?B.pushUnique(X[ia],ja):X[ia]=[ja])}for(ca in X)if(ja=X[ca],ia=U._subplots[ca],Array.isArray(ia))for(S=0;S<ia.length;S++){var la=ia[S],da="cartesian"===
ca?U._plots[la]:U[la];for(ba=0;ba<ja.length;ba++)ja[ba](O,da,la)}else for(ba=0;ba<ja.length;ba++)ja[ba](O)}var f=b("d3"),k=b("d3-time-format").timeFormatLocale,t=b("fast-isnumeric"),v=b("../registry"),w=b("../plot_api/plot_schema"),y=b("../plot_api/plot_template"),B=b("../lib"),A=b("../components/color"),z=b("../constants/numerical").BADNUM,E=b("./cartesian/axis_ids"),C=b("./cartesian/handle_outline").clearSelect,u=b("./animation_attributes"),D=b("./frame_attributes"),G=b("../plots/get_data").getModuleCalcData,
J=B.relinkPrivateKeys,L=B._,K=N.exports={};B.extendFlat(K,v);K.attributes=b("./attributes");K.attributes.type.values=K.allTypes;K.fontAttrs=b("./font_attributes");K.layoutAttributes=b("./layout_attributes");K.fontWeight="normal";var H=K.transformsRegistry;b=b("./command");K.executeAPICommand=b.executeAPICommand;K.computeAPICommandBindings=b.computeAPICommandBindings;K.manageCommandObserver=b.manageCommandObserver;K.hasSimpleAPICommandBindings=b.hasSimpleAPICommandBindings;K.redrawText=function(O){O=
B.getGraphDiv(O);var U=O._fullLayout||{};if(U._has&&U._has("polar")||!O.data||!O.data[0]||!O.data[0].r)return new Promise(function(S){setTimeout(function(){v.getComponentMethod("annotations","draw")(O);v.getComponentMethod("legend","draw")(O);v.getComponentMethod("colorbar","draw")(O);S(K.previousPromises(O))},300)})};K.resize=function(O){O=B.getGraphDiv(O);var U,S=new Promise(function(X,ba){O&&!B.isHidden(O)||ba(Error("Resize must be passed a displayed plot div element."));O._redrawTimer&&clearTimeout(O._redrawTimer);
O._resolveResize&&(U=O._resolveResize);O._resolveResize=X;O._redrawTimer=setTimeout(function(){if(!O.layout||O.layout.width&&O.layout.height||B.isHidden(O))X(O);else{delete O.layout.width;delete O.layout.height;var ca=O.changed;O.autoplay=!0;v.call("relayout",O,{autosize:!0}).then(function(){O.changed=ca;O._resolveResize===X&&(delete O._resolveResize,X(O))})}},100)});U&&U(S);return S};K.previousPromises=function(O){if((O._promises||[]).length)return Promise.all(O._promises).then(function(){O._promises=
[]})};K.addLinks=function(O){if(O._context.showLink||O._context.showSources){var U=O._fullLayout,S=B.ensureSingle(U._paper,"text","js-plot-link-container",function(ca){ca.style({"font-family":'"Open Sans", Arial, sans-serif',"font-size":"12px",fill:A.defaultLine,"pointer-events":"all"}).each(function(){var ia=f.select(this);ia.append("tspan").classed("js-link-to-tool",!0);ia.append("tspan").classed("js-link-spacer",!0);ia.append("tspan").classed("js-sourcelinks",!0)})}),X=S.node(),ba={y:U._paper.attr("height")-
9};document.body.contains(X)&&X.getComputedTextLength()>=U.width-20?(ba["text-anchor"]="start",ba.x=5):(ba["text-anchor"]="end",ba.x=U._paper.attr("width")-7);S.attr(ba);U=S.select(".js-link-to-tool");X=S.select(".js-link-spacer");S=S.select(".js-sourcelinks");O._context.showSources&&O._context.showSources(O);O._context.showLink&&r(O,U);X.text(U.text()&&S.text()?" - ":"")}};K.sendDataToCloud=function(O){var U=(window.PLOTLYENV||{}).BASE_URL||O._context.plotlyServerURL;if(U){O.emit("plotly_beforeexport");
var S=f.select(O).append("div").attr("id","hiddenform").style("display","none");U=S.append("form").attr({action:U+"/external",method:"post",target:"_blank"});U.append("input").attr({type:"text",name:"data"}).node().value=K.graphJson(O,!1,"keepdata");U.node().submit();S.remove();O.emit("plotly_afterexport");return!1}};var Q="days shortDays months shortMonths periods dateTime date time decimal thousands grouping currency".split(" "),M=["year","month","dayMonth","dayMonthYear"];K.supplyDefaults=function(O,
U){U=U&&U.skipUpdateCalc;var S=O._fullLayout||{};if(S._skipDefaults)delete S._skipDefaults;else{var X=O._fullLayout={},ba=O.layout||{},ca=O._fullData||[],ia=O._fullData=[],ja=O.data||[],la=O.calcdata||[],da=O._context||{};O._transitionData||K.createTransitionData(O);X._dfltTitle={plot:L(O,"Click to enter Plot title"),x:L(O,"Click to enter X axis title"),y:L(O,"Click to enter Y axis title"),colorbar:L(O,"Click to enter Colorscale title"),annotation:L(O,"new text")};X._traceWord=L(O,"trace");var oa=
m(O,Q);X._mapboxAccessToken=da.mapboxAccessToken;if(S._initialAutoSizeIsDone){var sa=S.width,ma=S.height;K.supplyLayoutGlobalDefaults(ba,X,oa);ba.width||(X.width=sa);ba.height||(X.height=ma);K.sanitizeMargins(X)}else K.supplyLayoutGlobalDefaults(ba,X,oa),sa=!ba.width||!ba.height,ma=X.autosize,da=da.autosizable,sa&&(ma||da)?K.plotAutoSize(O,ba,X):sa&&K.sanitizeMargins(X),!ma&&sa&&(ba.width=X.width,ba.height=X.height);sa=X.separators;oa.decimal=sa.charAt(0);oa.thousands=sa.charAt(1);oa={numberFormat:f.locale(oa).numberFormat,
timeFormat:k(oa).utcFormat};X._d3locale=oa;X._extraFormat=m(O,M);X._initialAutoSizeIsDone=!0;X._dataLength=ja.length;X._modules=[];X._visibleModules=[];X._basePlotModules=[];oa=v.collectableSubplotTypes;sa={};var qa;if(!oa)for(qa in oa=[],da=v.subplotsRegistry,da){var pa=da[qa].attr;if(pa&&(oa.push(qa),Array.isArray(pa)))for(ma=0;ma<pa.length;ma++)B.pushUnique(oa,pa[ma])}for(qa=0;qa<oa.length;qa++)sa[oa[qa]]=[];sa=X._subplots=sa;oa=X._splomAxes={x:{},y:{}};ma=X._splomSubplots={};X._splomGridDflt=
{};X._scatterStackOpts={};X._firstScatter={};X._alignmentOpts={};X._colorAxes={};X._requestRangeslider={};X._traceUids=q(ca,ja);X._globalTransforms=(O._context||{}).globalTransforms;K.supplyDataDefaults(ja,ia,ba,X);qa=Object.keys(oa.x);oa=Object.keys(oa.y);if(1<qa.length&&1<oa.length){v.getComponentMethod("grid","sizeDefaults")(ba,X);for(ja=0;ja<qa.length;ja++)B.pushUnique(sa.xaxis,qa[ja]);for(ja=0;ja<oa.length;ja++)B.pushUnique(sa.yaxis,oa[ja]);for(var na in ma)B.pushUnique(sa.cartesian,na)}X._has=
K._hasPlotType.bind(X);if(ca.length===ia.length)for(ja=0;ja<ia.length;ja++)J(ia[ja],ca[ja]);K.supplyLayoutModuleDefaults(ba,X,ia,O._transitionData);na=X._visibleModules;ba=[];for(ja=0;ja<na.length;ja++)(sa=na[ja].crossTraceDefaults)&&B.pushUnique(ba,sa);for(ja=0;ja<ba.length;ja++)ba[ja](ia,X);X._hasOnlyLargeSploms=1===X._basePlotModules.length&&"splom"===X._basePlotModules[0].name&&15<qa.length&&15<oa.length&&0===X.shapes.length&&0===X.images.length;X._hasCartesian=X._has("cartesian");X._hasGeo=X._has("geo");
X._hasGL3D=X._has("gl3d");X._hasGL2D=X._has("gl2d");X._hasTernary=X._has("ternary");X._hasPie=X._has("pie");K.linkSubplots(ia,X,ca,S);K.cleanPlot(ia,X,ca,S);ba=!(!S._has||!S._has("gl2d"));ca=!(!X._has||!X._has("gl2d"));ja=!(!S._has||!S._has("cartesian"));na=!(!X._has||!X._has("cartesian"));ba=ja||ba;ca=na||ca;ba&&!ca?S._bgLayer.remove():ca&&!ba&&(X._shouldCreateBgLayer=!0);S._zoomlayer&&!O._dragging&&C({_fullLayout:S});O=[];if(X.meta)var ka=X._meta={meta:X.meta,layout:{meta:X.meta}};for(ca=0;ca<ia.length;ca++)na=
ia[ca],na.meta?O[na.index]=na._meta={meta:na.meta}:X.meta&&(na._meta={meta:X.meta}),X.meta&&(na._meta.layout={meta:X.meta});O.length&&(ka||(ka=X._meta={}),ka.data=O);J(X,S);v.getComponentMethod("colorscale","crossTraceDefaults")(ia,X);X._preGUI||(X._preGUI={});X._tracePreGUI||(X._tracePreGUI={});ka=X._tracePreGUI;S={};for(var ua in ka)S[ua]="old";for(ja=0;ja<ia.length;ja++)ua=ia[ja]._fullInput.uid,S[ua]||(ka[ua]={}),S[ua]="new";for(ua in S)"old"===S[ua]&&delete ka[ua];g(X);v.getComponentMethod("rangeslider",
"makeData")(X);U||la.length!==ia.length||K.supplyDefaultsUpdateCalc(la,ia)}};K.supplyDefaultsUpdateCalc=function(O,U){for(var S=0;S<U.length;S++){var X=U[S],ba=(O[S]||[])[0];if(ba&&ba.trace){var ca=ba.trace;if(ca._hasCalcTransform){var ia=ca._arrayAttrs,ja;for(ja=0;ja<ia.length;ja++){var la=ia[ja];var da=B.nestedProperty(ca,la).get().slice();B.nestedProperty(X,la).set(da)}}ba.trace=X}}};K.createTransitionData=function(O){O._transitionData||(O._transitionData={});O._transitionData._frames||(O._transitionData._frames=
[]);O._transitionData._frameHash||(O._transitionData._frameHash={});O._transitionData._counter||(O._transitionData._counter=0);O._transitionData._interruptCallbacks||(O._transitionData._interruptCallbacks=[])};K._hasPlotType=function(O){var U,S=this._basePlotModules||[];for(U=0;U<S.length;U++)if(S[U].name===O)return!0;S=this._modules||[];for(U=0;U<S.length;U++){var X=S[U].name;if(X===O||(X=v.modules[X])&&X.categories[O])return!0}return!1};K.cleanPlot=function(O,U,S,X){var ba,ca=X._basePlotModules||
[];for(ba=0;ba<ca.length;ba++){var ia=ca[ba];ia.clean&&ia.clean(O,U,S,X)}ba=X._has&&X._has("gl");U=U._has&&U._has("gl");ba&&!U&&void 0!==X._glcontainer&&(X._glcontainer.selectAll(".gl-canvas").remove(),X._glcontainer.selectAll(".no-webgl").remove(),X._glcanvas=null);ca=!!X._infolayer;ba=0;a:for(;ba<S.length;ba++){ia=S[ba].uid;for(U=0;U<O.length;U++)if(ia===O[U].uid)continue a;ca&&X._infolayer.select(".cb"+ia).remove()}};K.linkSubplots=function(O,U,S,X){var ba=X._plots||{},ca=U._plots={};X=U._subplots;
S={_fullData:O,_fullLayout:U};var ia=X.cartesian.concat(X.gl2d||[]);for(X=0;X<ia.length;X++){var ja=ia[X];var la=ba[ja],da=E.getFromId(S,ja,"x"),oa=E.getFromId(S,ja,"y");la?la=ca[ja]=la:(la=ca[ja]={},la.id=ja);da._counterAxes.push(oa._id);oa._counterAxes.push(da._id);da._subplotsWith.push(ja);oa._subplotsWith.push(ja);la.xaxis=da;la.yaxis=oa;la._hasClipOnAxisFalse=!1;for(ja=0;ja<O.length;ja++)if(da=O[ja],da.xaxis===la.xaxis._id&&da.yaxis===la.yaxis._id&&!1===da.cliponaxis){la._hasClipOnAxisFalse=
!0;break}}O=E.list(S,null,!0);for(X=0;X<O.length;X++)ba=O[X],ja=null,ba.overlaying&&(ja=E.getFromId(S,ba.overlaying))&&ja.overlaying&&(ba.overlaying=!1,ja=null),ba._mainAxis=ja||ba,ja&&(ba.domain=ja.domain.slice()),ba._anchorAxis="free"===ba.anchor?null:E.getFromId(S,ba.anchor);for(X=0;X<O.length;X++){ba=O[X];ba._counterAxes.sort(E.idSort);ba._subplotsWith.sort(B.subplotSort);ca=ja=ba;var sa=U;ia={_fullLayout:sa};la="x"===ca._id.charAt(0);var ma=ca._mainAxis._anchorAxis,qa=oa=da="";ma&&(qa=ma._mainAxis._id,
da=la?ca._id+qa:qa+ca._id);if(!da||!sa._plots[da])for(da="",sa=ca._counterAxes,ma=0;ma<sa.length;ma++){var pa=sa[ma],na=la?ca._id+pa:pa+ca._id;oa||(oa=na);pa=E.getFromId(ia,pa);if(qa&&pa.overlaying===qa){da=na;break}}ja._mainSubplot=da||oa;if(ba._counterAxes.length&&(ba.spikemode&&-1!==ba.spikemode.indexOf("across")||ba.automargin&&ba.mirror&&"free"!==ba.anchor||v.getComponentMethod("rangeslider","isVisible")(ba))){ca=1;for(ja=ia=0;ja<ba._counterAxes.length;ja++)la=E.getFromId(S,ba._counterAxes[ja]),
ca=Math.min(ca,la.domain[0]),ia=Math.max(ia,la.domain[1]);ca<ia&&(ba._counterDomainMin=ca,ba._counterDomainMax=ia)}}};K.clearExpandedTraceDefaultColors=function(O){function U(ca,ia,ja,la){X[la]=ia;X.length=la+1;"color"===ca.valType&&void 0===ca.dflt&&ba.push(X.join("."))}var S;var X=[];var ba=O._module._colorAttrs;ba||(O._module._colorAttrs=ba=[],w.crawl(O._module.attributes,U));for(S=0;S<ba.length;S++)B.nestedProperty(O,"_input."+ba[S]).get()||B.nestedProperty(O,ba[S]).set(null)};K.supplyDataDefaults=
function(O,U,S,X){function ba(Ua){U.push(Ua);var eb=Ua._module;eb&&(B.pushUnique(ca,eb),!0===Ua.visible&&B.pushUnique(ia,eb),B.pushUnique(ja,Ua._module.basePlotModule),la++,!1!==Ua._input.visible&&da++)}var ca=X._modules,ia=X._visibleModules,ja=X._basePlotModules,la=0,da=0,oa;X._transformModules=[];var sa={},ma=[],qa=y.traceTemplater((S.template||{}).data||{});for(oa=0;oa<O.length;oa++){var pa=O[oa];var na=qa.newTrace(pa);na.uid=X._traceUids[oa];K.supplyTraceDefaults(pa,na,da,X,oa);na.index=oa;na._input=
pa;na._expandedIndex=la;if(na.transforms&&na.transforms.length)for(var ka=!1!==pa.visible&&!1===na.visible,ua=a(na,U,S,X),va=0;va<ua.length;va++){var Ca=ua[va],Ma={_template:na._template,type:na.type,uid:na.uid+va};ka&&!1===Ca.visible&&delete Ca.visible;K.supplyTraceDefaults(Ca,Ma,la,X,oa);J(Ma,Ca);Ma.index=oa;Ma._input=pa;Ma._fullInput=na;Ma._expandedIndex=la;Ma._expandedInput=Ca;ba(Ma)}else na._fullInput=na,na._expandedInput=na,ba(na);v.traceIs(na,"carpetAxis")&&(sa[na.carpet]=na);v.traceIs(na,
"carpetDependent")&&ma.push(oa)}for(oa=0;oa<ma.length;oa++)na=U[ma[oa]],na.visible&&(O=sa[na.carpet],(na._carpet=O)&&O.visible?(na.xaxis=O.xaxis,na.yaxis=O.yaxis):na.visible=!1)};K.supplyAnimationDefaults=function(O){O=O||{};var U,S={};B.coerce(O||{},S,u,"mode",void 0);B.coerce(O||{},S,u,"direction",void 0);B.coerce(O||{},S,u,"fromcurrent",void 0);if(Array.isArray(O.frame))for(S.frame=[],U=0;U<O.frame.length;U++)S.frame[U]=K.supplyAnimationFrameDefaults(O.frame[U]||{});else S.frame=K.supplyAnimationFrameDefaults(O.frame||
{});if(Array.isArray(O.transition))for(S.transition=[],U=0;U<O.transition.length;U++)S.transition[U]=K.supplyAnimationTransitionDefaults(O.transition[U]||{});else S.transition=K.supplyAnimationTransitionDefaults(O.transition||{});return S};K.supplyAnimationFrameDefaults=function(O){var U={};B.coerce(O||{},U,u.frame,"duration",void 0);B.coerce(O||{},U,u.frame,"redraw",void 0);return U};K.supplyAnimationTransitionDefaults=function(O){var U={};B.coerce(O||{},U,u.transition,"duration",void 0);B.coerce(O||
{},U,u.transition,"easing",void 0);return U};K.supplyFrameDefaults=function(O){function U(X,ba){return B.coerce(O,S,D,X,ba)}var S={};U("group");U("name");U("traces");U("baseframe");U("data");U("layout");return S};K.supplyTraceDefaults=function(O,U,S,X,ba){function ca(na,ka){return B.coerce(O,U,K.attributes,na,ka)}var ia=X.colorway||A.defaults;S=ia[S%ia.length];ia=ca("visible");ca("type");ca("name",X._traceWord+" "+ba);ca("uirevision",X.uirevision);var ja=K.getModule(U);if(U._module=ja){var la=ja.basePlotModule,
da=la.attr,oa=la.attributes;if(da&&oa){var sa=X._subplots,ma="";if(ia||"gl2d"!==la.name){if(Array.isArray(da))for(ba=0;ba<da.length;ba++){var qa=da[ba],pa=B.coerce(O,U,oa,qa);sa[qa]&&B.pushUnique(sa[qa],pa);ma+=pa}else ma=B.coerce(O,U,oa,da);sa[la.name]&&B.pushUnique(sa[la.name],ma)}}}ia&&(ca("customdata"),ca("ids"),ca("meta"),v.traceIs(U,"showLegend")?(B.coerce(O,U,ja.attributes.showlegend?ja.attributes:K.attributes,"showlegend"),ca("legendgroup"),U._dfltShowLegend=!0):U._dfltShowLegend=!1,ja&&ja.supplyDefaults(O,
U,S,X),v.traceIs(U,"noOpacity")||ca("opacity"),v.traceIs(U,"notLegendIsolatable")&&(U.visible=!!U.visible),v.traceIs(U,"noHover")||(U.hovertemplate||B.coerceHoverinfo(O,U,X),"parcats"!==U.type&&v.getComponentMethod("fx","supplyDefaults")(O,U,S,X)),ja&&ja.selectPoints&&ca("selectedpoints"),K.supplyTransformDefaults(O,U,X));return U};K.hasMakesDataTransform=l;K.supplyTransformDefaults=function(O,U,S){if(U._length||l(O)){var X=S._globalTransforms||[],ba=S._transformModules||[];if(Array.isArray(O.transforms)||
0!==X.length){X=X.concat(O.transforms||[]);for(var ca=U.transforms=[],ia=0;ia<X.length;ia++){var ja=X[ia],la=ja.type,da=H[la],oa=!(ja._module&&ja._module===da),sa=da&&"function"===typeof da.transform;da||B.warn("Unrecognized transform type "+la+".");da&&da.supplyDefaults&&(oa||sa)?(ja=da.supplyDefaults(ja,U,S,O),ja.type=la,ja._module=da,B.pushUnique(ba,da)):ja=B.extendFlat({},ja);ca.push(ja)}}}};K.supplyLayoutGlobalDefaults=function(O,U,S){function X(ca,ia){return B.coerce(O,U,K.layoutAttributes,
ca,ia)}var ba=O.template;B.isPlainObject(ba)&&(U.template=ba,U._template=ba.layout,U._dataTemplate=ba.data);X("autotypenumbers");ba=B.coerceFont(X,"font");X("title.text",U._dfltTitle.plot);B.coerceFont(X,"title.font",{family:ba.family,size:Math.round(1.4*ba.size),color:ba.color});X("title.xref");X("title.yref");X("title.x");X("title.y");X("title.xanchor");X("title.yanchor");X("title.pad.t");X("title.pad.r");X("title.pad.b");X("title.pad.l");X("uniformtext.mode")&&X("uniformtext.minsize");X("autosize",
!(O.width&&O.height));X("width");X("height");X("margin.l");X("margin.r");X("margin.t");X("margin.b");X("margin.pad");X("margin.autoexpand");O.width&&O.height&&K.sanitizeMargins(U);v.getComponentMethod("grid","sizeDefaults")(O,U);X("paper_bgcolor");X("separators",S.decimal+S.thousands);X("hidesources");X("colorway");X("datarevision");S=X("uirevision");X("editrevision",S);X("selectionrevision",S);X("modebar.orientation");X("modebar.bgcolor",A.addOpacity(U.paper_bgcolor,.5));ba=A.contrast(A.rgb(U.modebar.bgcolor));
X("modebar.color",A.addOpacity(ba,.3));X("modebar.activecolor",A.addOpacity(ba,.7));X("modebar.uirevision",S);v.getComponentMethod("shapes","supplyDrawNewShapeDefaults")(O,U,X);X("meta");B.isPlainObject(O.transition)&&(X("transition.duration"),X("transition.easing"),X("transition.ordering"));v.getComponentMethod("calendars","handleDefaults")(O,U,"calendar");v.getComponentMethod("fx","supplyLayoutGlobalDefaults")(O,U,X)};K.plotAutoSize=function(O,U,S){var X=O._context||{},ba=X.frameMargins,ca;(ca=
B.isPlotDiv(O))&&O.emit("plotly_autosize");X.fillFrame?(X=window.innerWidth,ca=window.innerHeight,document.body.style.overflow="hidden"):(ca=ca?window.getComputedStyle(O):{},X=h(ca.width)||h(ca.maxWidth)||S.width,ca=h(ca.height)||h(ca.maxHeight)||S.height,t(ba)&&0<ba&&(ba=1-2*ba,X=Math.round(ba*X),ca=Math.round(ba*ca)));ba=K.layoutAttributes.width.min;var ia=K.layoutAttributes.height.min;X<ba&&(X=ba);ca<ia&&(ca=ia);ba=!U.width&&1<Math.abs(S.width-X);if((U=!U.height&&1<Math.abs(S.height-ca))||ba)ba&&
(S.width=X),U&&(S.height=ca);O._initialAutoSize||(O._initialAutoSize={width:X,height:ca});K.sanitizeMargins(S)};K.supplyLayoutModuleDefaults=function(O,U,S,X){var ba=v.componentsRegistry,ca=U._basePlotModules,ia;var ja=v.subplotsRegistry.cartesian;for(ia in ba){var la=ba[ia];la.includeBasePlot&&la.includeBasePlot(O,U)}ca.length||ca.push(ja);U._has("cartesian")&&(v.getComponentMethod("grid","contentDefaults")(O,U),ja.finalizeSubplots(O,U));for(var da in U._subplots)U._subplots[da].sort(B.subplotSort);
for(ja=0;ja<ca.length;ja++)la=ca[ja],la.supplyLayoutDefaults&&la.supplyLayoutDefaults(O,U,S);ca=U._modules;for(ja=0;ja<ca.length;ja++)la=ca[ja],la.supplyLayoutDefaults&&la.supplyLayoutDefaults(O,U,S);ca=U._transformModules;for(ja=0;ja<ca.length;ja++)la=ca[ja],la.supplyLayoutDefaults&&la.supplyLayoutDefaults(O,U,S,X);for(ia in ba)la=ba[ia],la.supplyLayoutDefaults&&la.supplyLayoutDefaults(O,U,S)};K.purge=function(O){var U=O._fullLayout||{};void 0!==U._glcontainer&&(U._glcontainer.selectAll(".gl-canvas").remove(),
U._glcontainer.remove(),U._glcanvas=null);U._modeBar&&U._modeBar.destroy();O._transitionData&&(O._transitionData._interruptCallbacks&&(O._transitionData._interruptCallbacks.length=0),O._transitionData._animationRaf&&window.cancelAnimationFrame(O._transitionData._animationRaf));B.clearThrottle();B.clearResponsive(O);delete O.data;delete O.layout;delete O._fullData;delete O._fullLayout;delete O.calcdata;delete O.framework;delete O.empty;delete O.fid;delete O.undoqueue;delete O.undonum;delete O.autoplay;
delete O.changed;delete O._promises;delete O._redrawTimer;delete O._hmlumcount;delete O._hmpixcount;delete O._transitionData;delete O._transitioning;delete O._initialAutoSize;delete O._transitioningWithDuration;delete O._dragging;delete O._dragged;delete O._dragdata;delete O._hoverdata;delete O._snapshotInProgress;delete O._editing;delete O._mouseDownTime;delete O._legendMouseDownTime;O.removeAllListeners&&O.removeAllListeners()};K.style=function(O){var U=O._fullLayout._visibleModules,S=[],X;for(X=
0;X<U.length;X++){var ba=U[X];ba.style&&B.pushUnique(S,ba.style)}for(X=0;X<S.length;X++)S[X](O)};K.sanitizeMargins=function(O){if(O&&O.margin){var U=O.width,S=O.height;O=O.margin;var X=S-(O.t+O.b);0>U-(O.l+O.r)&&(U=(U-1)/(O.l+O.r),O.l=Math.floor(U*O.l),O.r=Math.floor(U*O.r));0>X&&(U=(S-1)/(O.t+O.b),O.t=Math.floor(U*O.t),O.b=Math.floor(U*O.b))}};K.clearAutoMarginIds=function(O){O._fullLayout._pushmarginIds={}};K.allowAutoMargin=function(O,U){O._fullLayout._pushmarginIds[U]=1};K.autoMargin=function(O,
U,S){var X=O._fullLayout,ba=X.width,ca=X.height,ia=X.margin,ja=B.constrain(ba-ia.l-ia.r,2,64),la=B.constrain(ca-ia.t-ia.b,2,64);ba=Math.max(0,ba-ja);var da=Math.max(0,ca-la);ca=X._pushmargin;la=X._pushmarginIds;if(!1!==ia.autoexpand&&(S?(ja=S.pad,void 0===ja&&(ja=Math.min(12,ia.l,ia.r,ia.t,ia.b)),ba&&(ia=(S.l+S.r)/ba,1<ia&&(S.l/=ia,S.r/=ia)),da&&(ia=(S.t+S.b)/da,1<ia&&(S.t/=ia,S.b/=ia)),ca[U]={l:{val:void 0!==S.xl?S.xl:S.x,size:S.l+ja},r:{val:void 0!==S.xr?S.xr:S.x,size:S.r+ja},b:{val:void 0!==S.yb?
S.yb:S.y,size:S.b+ja},t:{val:void 0!==S.yt?S.yt:S.y,size:S.t+ja}},la[U]=1):(delete ca[U],delete la[U]),!X._replotting))return K.doAutoMargin(O)};K.doAutoMargin=function(O){var U=O._fullLayout,S=U.width,X=U.height;U._size||(U._size={});g(U);var ba=U._size,ca=U.margin,ia=B.extendFlat({},ba),ja=ca.l,la=ca.r,da=ca.t,oa=ca.b,sa=U._pushmargin,ma=U._pushmarginIds;if(!1!==U.margin.autoexpand){for(var qa in sa)ma[qa]||delete sa[qa];sa.base={l:{val:0,size:ja},r:{val:1,size:la},t:{val:1,size:da},b:{val:0,size:oa}};
for(var pa in sa){var na=sa[pa].l||{},ka=sa[pa].b||{};qa=na.val;na=na.size;var ua=ka.val;ka=ka.size;for(var va in sa){if(t(na)&&sa[va].r){var Ca=sa[va].r.val,Ma=sa[va].r.size;if(Ca>qa){var Ua=(na*Ca+(Ma-S)*qa)/(Ca-qa);Ca=(Ma*(1-qa)+(na-S)*(1-Ca))/(Ca-qa);Ua+Ca>ja+la&&(ja=Ua,la=Ca)}}t(ka)&&sa[va].t&&(Ca=sa[va].t.val,Ma=sa[va].t.size,Ca>ua&&(Ua=(ka*Ca+(Ma-X)*ua)/(Ca-ua),Ca=(Ma*(1-ua)+(ka-X)*(1-Ca))/(Ca-ua),Ua+Ca>oa+da&&(oa=Ua,da=Ca)))}}}pa=B.constrain(S-ca.l-ca.r,2,64);sa=B.constrain(X-ca.t-ca.b,2,
64);pa=Math.max(0,S-pa);sa=Math.max(0,X-sa);pa&&(pa=(ja+la)/pa,1<pa&&(ja/=pa,la/=pa));sa&&(sa=(oa+da)/sa,1<sa&&(oa/=sa,da/=sa));ba.l=Math.round(ja);ba.r=Math.round(la);ba.t=Math.round(da);ba.b=Math.round(oa);ba.p=Math.round(ca.pad);ba.w=Math.round(S)-ba.l-ba.r;ba.h=Math.round(X)-ba.t-ba.b;if(!U._replotting&&K.didMarginChange(ia,ba)){"_redrawFromAutoMarginCount"in U?U._redrawFromAutoMarginCount++:U._redrawFromAutoMarginCount=1;S=3*(1+Object.keys(ma).length);if(U._redrawFromAutoMarginCount<S)return v.call("plot",
O);U._size=ia;B.warn("Too many auto-margin redraws.")}O=E.list(O,"",!0);for(U=0;U<O.length;U++)(ia=O[U]._hideOutOfRangeInsideTickLabels)&&ia()};var P="lrtbpwh".split("");K.didMarginChange=function(O,U){for(var S=0;S<P.length;S++){var X=P[S],ba=O[X];X=U[X];if(!t(ba)||1<Math.abs(X-ba))return!0}return!1};K.graphJson=function(O,U,S,X,ba,ca){function ia(oa,sa){if("function"===typeof oa)return sa?"_function_":null;if(B.isPlainObject(oa)){var ma={},qa;Object.keys(oa).sort().forEach(function(pa){if(-1===
["_","["].indexOf(pa.charAt(0)))if("function"===typeof oa[pa])sa&&(ma[pa]="_function");else{if("keepdata"===S){if("src"===pa.substr(pa.length-3))return}else if("keepstream"===S){if(qa=oa[pa+"src"],"string"===typeof qa&&0<qa.indexOf(":")&&!B.isPlainObject(oa.stream))return}else if("keepall"!==S&&(qa=oa[pa+"src"],"string"===typeof qa&&0<qa.indexOf(":")))return;ma[pa]=ia(oa[pa],sa)}});return ma}return Array.isArray(oa)?oa.map(function(pa){return ia(pa,sa)}):B.isTypedArray(oa)?B.simpleMap(oa,B.identity):
B.isJSDate(oa)?B.ms2DateTimeLocal(+oa):oa}(ba&&U&&!O._fullData||ba&&!U&&!O._fullLayout)&&K.supplyDefaults(O);var ja=ba?O._fullLayout:O.layout,la=(O._transitionData||{})._frames,da={data:((ba?O._fullData:O.data)||[]).map(function(oa){oa=ia(oa);U&&delete oa.fit;return oa})};U||(da.layout=ia(ja),ba&&(ba=ja._size,da.layout.computed={margin:{b:ba.b,l:ba.l,r:ba.r,t:ba.t}}));O.framework&&O.framework.isPolar&&(da=O.framework.getConfig());la&&(da.frames=ia(la));ca&&(da.config=ia(O._context,!0));return"object"===
X?da:JSON.stringify(da)};K.modifyFrames=function(O,U){var S=O._transitionData._frames,X=O._transitionData._frameHash;for(O=0;O<U.length;O++){var ba=U[O];switch(ba.type){case "replace":var ca=ba.value;var ia=(S[ba.index]||{}).name,ja=ca.name;S[ba.index]=X[ja]=ca;ja!==ia&&(delete X[ia],X[ja]=ca);break;case "insert":ca=ba.value;X[ca.name]=ca;S.splice(ba.index,0,ca);break;case "delete":ca=S[ba.index],delete X[ca.name],S.splice(ba.index,1)}}return Promise.resolve()};K.computeFrame=function(O,U){var S=
O._transitionData._frameHash,X;if(!U)throw Error("computeFrame must be given a string frame name");U=S[U.toString()];if(!U)return!1;O=[U];for(X=[U.name];U.baseframe&&(U=S[U.baseframe.toString()])&&-1===X.indexOf(U.name);)O.push(U),X.push(U.name);for(var ba={};U=O.pop();)if(U.layout&&(ba.layout=K.extendLayout(ba.layout,U.layout)),U.data){ba.data||(ba.data=[]);X=U.traces;if(!X)for(X=[],S=0;S<U.data.length;S++)X[S]=S;ba.traces||(ba.traces=[]);for(S=0;S<U.data.length;S++){var ca=X[S];if(void 0!==ca&&
null!==ca){var ia=ba.traces.indexOf(ca);-1===ia&&(ia=ba.data.length,ba.traces[ia]=ca);ba.data[ia]=K.extendTrace(ba.data[ia],U.data[S])}}}return ba};K.recomputeFrameHash=function(O){var U=O._transitionData._frameHash={};O=O._transitionData._frames;for(var S=0;S<O.length;S++){var X=O[S];X&&X.name&&(U[X.name]=X)}};K.extendObjectWithContainers=function(O,U,S){U=B.extendDeepNoArrays({},U||{});var X=B.expandObjectPaths(U);var ba={};if(S&&S.length)for(U=0;U<S.length;U++){var ca=B.nestedProperty(X,S[U]);
var ia=ca.get();void 0===ia?B.nestedProperty(ba,S[U]).set(null):(ca.set(null),B.nestedProperty(ba,S[U]).set(ia))}O=B.extendDeepNoArrays(O||{},X);if(S&&S.length)for(U=0;U<S.length;U++)if(ca=B.nestedProperty(ba,S[U]),X=ca.get()){ia=B.nestedProperty(O,S[U]);var ja=ia.get();Array.isArray(ja)||(ja=[],ia.set(ja));for(ca=0;ca<X.length;ca++){var la=X[ca];ja[ca]=null===la?null:K.extendObjectWithContainers(ja[ca],la)}ia.set(ja)}return O};K.dataArrayContainers=["transforms","dimensions"];K.layoutArrayContainers=
v.layoutArrayContainers;K.extendTrace=function(O,U){return K.extendObjectWithContainers(O,U,K.dataArrayContainers)};K.extendLayout=function(O,U){return K.extendObjectWithContainers(O,U,K.layoutArrayContainers)};K.transition=function(O,U,S,X,ba,ca){ba={redraw:ba.redraw};var ia={},ja=[];ba.prepareFn=function(){var la=Array.isArray(U)?U.length:0;la=X.slice(0,la);for(var da=0;da<la.length;da++){var oa=la[da],sa=O._fullData[oa]._module;sa&&(sa.animatable&&(sa=sa.basePlotModule.name,ia[sa]||(ia[sa]=[]),
ia[sa].push(oa)),O.data[la[da]]=K.extendTrace(O.data[la[da]],U[da]))}la=B.expandObjectPaths(B.extendDeepNoArrays({},S));da=/^[xy]axis[0-9]*$/;for(var ma in la)da.test(ma)&&delete la[ma].range;K.extendLayout(O.layout,la);delete O.calcdata;K.supplyDefaults(O);K.doCalcdata(O);if(ma=B.expandObjectPaths(S)){la=O._fullLayout._plots;for(var qa in la){da=la[qa];oa=da.xaxis;sa=da.yaxis;var pa=oa.range.slice(),na=sa.range.slice(),ka=null,ua=null,va=null,Ca=null;Array.isArray(ma[oa._name+".range"])?ka=ma[oa._name+
".range"].slice():Array.isArray((ma[oa._name]||{}).range)&&(ka=ma[oa._name].range.slice());Array.isArray(ma[sa._name+".range"])?ua=ma[sa._name+".range"].slice():Array.isArray((ma[sa._name]||{}).range)&&(ua=ma[sa._name].range.slice());pa&&ka&&(oa.r2l(pa[0])!==oa.r2l(ka[0])||oa.r2l(pa[1])!==oa.r2l(ka[1]))&&(va={xr0:pa,xr1:ka});na&&ua&&(sa.r2l(na[0])!==sa.r2l(ua[0])||sa.r2l(na[1])!==sa.r2l(ua[1]))&&(Ca={yr0:na,yr1:ua});(va||Ca)&&ja.push(B.extendFlat({plotinfo:da},va,Ca))}}return Promise.resolve()};ba.runFn=
function(la){var da=O._fullLayout._basePlotModules;var oa=ja.length,sa;if(S)for(sa=0;sa<da.length;sa++)da[sa].transitionAxes&&da[sa].transitionAxes(O,ja,ca,la);oa?(da=B.extendFlat({},ca),da.duration=0,delete ia.cartesian):da=ca;for(var ma in ia)oa=ia[ma],O._fullData[oa[0]]._module.basePlotModule.plot(O,oa,da,la)};return n(O,ca,ba)};K.transitionFromReact=function(O,U,S,X){var ba=O._fullLayout,ca=ba.transition,ia={},ja=[];ia.prepareFn=function(){var la=ba._plots;ia.redraw=!1;"some"===U.anim&&(ia.redraw=
!0);"some"===S.anim&&(ia.redraw=!0);for(var da in la){var oa=la[da],sa=oa.xaxis,ma=oa.yaxis,qa=X[sa._name].range.slice(),pa=X[ma._name].range.slice(),na=sa.range.slice(),ka=ma.range.slice();sa.setScale();ma.setScale();var ua=null,va=null;if(sa.r2l(qa[0])!==sa.r2l(na[0])||sa.r2l(qa[1])!==sa.r2l(na[1]))ua={xr0:qa,xr1:na};if(ma.r2l(pa[0])!==ma.r2l(ka[0])||ma.r2l(pa[1])!==ma.r2l(ka[1]))va={yr0:pa,yr1:ka};(ua||va)&&ja.push(B.extendFlat({plotinfo:oa},ua,va))}return Promise.resolve()};ia.runFn=function(la){function da(){for(var va=
0;va<ma.length;va++)ma[va].transitionAxes&&ma[va].transitionAxes(O,ja,qa,la)}function oa(){for(var va=0;va<ma.length;va++)ma[va].plot(O,na,pa,la)}for(var sa=O._fullData,ma=O._fullLayout._basePlotModules,qa,pa,na,ka=[],ua=0;ua<sa.length;ua++)ka.push(ua);ja.length&&U.anim?"traces first"===ca.ordering?(qa=B.extendFlat({},ca,{duration:0}),na=ka,pa=ca,setTimeout(da,ca.duration),oa()):(qa=ca,na=null,pa=B.extendFlat({},ca,{duration:0}),setTimeout(oa,qa.duration),da()):ja.length?(qa=ca,da()):U.anim&&(na=
ka,pa=ca,oa())};return n(O,ca,ia)};K.doCalcdata=function(O,U){function S(na){ma=ca[na];ja=ma._module;if(!0===ma.visible&&ma.transforms)for(ja&&ja.calc&&(na=ja.calc(O,ma),na[0]&&na[0].t&&na[0].t._scene&&delete na[0].t._scene.dirty),da=0;da<ma.transforms.length;da++)na=ma.transforms[da],(ja=H[na.type])&&ja.calcTransform&&(pa=ma._hasCalcTransform=!0,ja.calcTransform(O,ma,na))}function X(na,ka){ma=ca[na];ja=ma._module;if(!!ja.isContainer===ka){ka=[];if(!0===ma.visible&&0!==ma._length){delete ma._indexToPoints;
var ua=ma.transforms||[];for(da=ua.length-1;0<=da;da--)if(ua[da].enabled){ma._indexToPoints=ua[da]._indexToPoints;break}ja&&ja.calc&&(ka=ja.calc(O,ma))}Array.isArray(ka)&&ka[0]||(ka=[{x:z,y:z}]);ka[0].t||(ka[0].t={});ka[0].trace=ma;oa[na]=ka}}var ba=E.list(O),ca=O._fullData,ia=O._fullLayout,ja,la,da,oa=Array(ca.length),sa=(O.calcdata||[]).slice();O.calcdata=oa;ia._numBoxes=0;ia._numViolins=0;ia._violinScaleGroupStats={};O._hmpixcount=0;O._hmlumcount=0;ia._piecolormap={};ia._sunburstcolormap={};ia._treemapcolormap=
{};ia._funnelareacolormap={};for(la=0;la<ca.length;la++)Array.isArray(U)&&-1===U.indexOf(la)&&(oa[la]=sa[la]);for(la=0;la<ca.length;la++){var ma=ca[la];ma._arrayAttrs=w.findArrayAttributes(ma);ma._extremes={}}U=ia._subplots.polar||[];for(la=0;la<U.length;la++)ba.push(ia[U[la]].radialaxis,ia[U[la]].angularaxis);for(var qa in ia._colorAxes)la=ia[qa],!1!==la.cauto&&(delete la.cmin,delete la.cmax);var pa=!1;d(ba,ca,ia);for(la=0;la<ca.length;la++)X(la,!0);for(la=0;la<ca.length;la++)S(la);pa&&d(ba,ca,ia);
for(la=0;la<ca.length;la++)X(la,!0);for(la=0;la<ca.length;la++)X(la,!1);e(O);ba=p(ba,O);if(ba.length){ia._numBoxes=0;for(la=ia._numViolins=0;la<ba.length;la++)X(ba[la],!0);for(la=0;la<ba.length;la++)X(ba[la],!1);e(O)}v.getComponentMethod("fx","calc")(O);v.getComponentMethod("errorbars","calc")(O)};var T=/(total|sum|min|max|mean|median) (ascending|descending)/;K.rehover=function(O){O._fullLayout._rehover&&O._fullLayout._rehover()};K.redrag=function(O){O._fullLayout._redrag&&O._fullLayout._redrag()};
K.generalUpdatePerTraceModule=function(O,U,S,X){var ba=U.traceHash,ca={},ia;for(ia=0;ia<S.length;ia++){var ja=S[ia],la=ja[0].trace;la.visible&&(ca[la.type]=ca[la.type]||[],ca[la.type].push(ja))}for(var da in ba)ca[da]||(S=ba[da][0],S[0].trace.visible=!1,ca[da]=[S]);for(var oa in ca)ba=ca[oa],ba[0][0].trace._module.plot(O,U,B.filterVisible(ba),X);U.traceHash=ca};K.plotBasePlot=function(O,U,S,X,ba){O=v.getModule(O);S=G(U.calcdata,O)[0];O.plot(U,S,X,ba)};K.cleanBasePlot=function(O,U,S,X,ba){U=ba._has&&
ba._has(O);S=S._has&&S._has(O);U&&!S&&ba["_"+O+"layer"].selectAll("g.trace").remove()}},{"../components/color":643,"../constants/numerical":753,"../lib":778,"../plot_api/plot_schema":816,"../plot_api/plot_template":817,"../plots/get_data":865,"../registry":911,"./animation_attributes":822,"./attributes":824,"./cartesian/axis_ids":831,"./cartesian/handle_outline":838,"./command":854,"./font_attributes":856,"./frame_attributes":857,"./layout_attributes":882,d3:169,"d3-time-format":166,"fast-isnumeric":241}],
892:[function(b,N,I){N.exports={attr:"subplot",name:"polar",axisNames:["angularaxis","radialaxis"],axisName2dataArray:{angularaxis:"theta",radialaxis:"r"},layerNames:"draglayer plotbg backplot angular-grid radial-grid frontplot angular-line radial-line angular-axis radial-axis".split(" "),radialDragBoxSize:50,angularDragBoxSize:30,cornerLen:25,cornerHalfWidth:2,MINDRAG:8,MINZOOM:20,OFFEDGE:20}},{}],893:[function(b,N,I){function r(f,k,t,v){var w=v[0];v=v[1];var y=l(Math.sin(k)-Math.sin(f));f=l(Math.cos(k)-
Math.cos(f));t=Math.tan(t);var B=l(1/t),A=y/f;k=v-A*w;B?y&&f?(y=k/(t-A),w=t*y):f?(y=v*B,w=v):(y=w,w*=t):y&&f?(y=0,w=k):f?(y=0,w=v):y=w=NaN;return[y,w]}function q(f,k,t,v){function w(C,u,D){return r(C,u,D,[f*Math.cos(C),f*Math.sin(C)])}var y=v.length,B=[];var A=n(v,function(C){return p(C,[k,t])?e(C,k):Infinity});var z=w(v[A],v[h.mod(A-1,y)],k);B.push(z);for(z=0;z<y;A++,z++){var E=v[h.mod(A,y)];if(!p(E,[k,t]))break;B.push([f*Math.cos(E),f*Math.sin(E)])}A=n(v,function(C){return p(C,[k,t])?e(C,t):Infinity});
v=w(v[A],v[h.mod(A+1,y)],t);B.push(v);B.push([0,0]);B.push(B[0].slice());return B}function m(f,k,t,v){if(h.isFullCircle([k,t])){k=v.length;t=Array(k+1);var w;for(w=0;w<k;w++){var y=v[w];t[w]=[f*Math.cos(y),f*Math.sin(y)]}t[w]=t[0].slice();f=t}else f=q(f,k,t,v);return f}function l(f){return 1E-10<Math.abs(f)?f:0}function a(f,k,t){k=k||0;t=t||0;for(var v=f.length,w=Array(v),y=0;y<v;y++){var B=f[y];w[y]=[k+B[0],t-B[1]]}return w}var h=b("../../lib"),g=b("../../lib/polygon").tester,n=h.findIndexOfMin,
p=h.isAngleInsideSector,d=h.angleDelta,e=h.angleDist;N.exports={isPtInsidePolygon:function(f,k,t,v,w){if(!p(k,v))return!1;if(t[0]<t[1]){var y=t[0];t=t[1]}else y=t[1],t=t[0];y=g(m(y,v[0],v[1],w));v=g(m(t,v[0],v[1],w));f=[f*Math.cos(k),f*Math.sin(k)];return v.contains(f)&&!y.contains(f)},findPolygonOffset:function(f,k,t,v){var w=Infinity,y=Infinity;f=m(f,k,t,v);for(k=0;k<f.length;k++)t=f[k],w=Math.min(w,t[0]),y=Math.min(y,-t[1]);return[w,y]},findEnclosingVertexAngles:function(f,k){var t=n(k,function(w){w=
d(w,f);return 0<w?w:Infinity}),v=h.mod(t+1,k.length);return[k[t],k[v]]},findIntersectionXY:r,findXYatLength:function(f,k,t,v){var w=-k*t,y=k*k+1,B=2*(k*w-t);t=Math.sqrt(B*B-4*y*(w*w+t*t-f*f));f=(-B+t)/(2*y);y=(-B-t)/(2*y);return[[f,k*f+w+v],[y,k*y+w+v]]},clampTiny:l,pathPolygon:function(f,k,t,v,w,y){f=m(f,k,t,v);return"M"+a(f,w,y).join("L")},pathPolygonAnnulus:function(f,k,t,v,w,y,B){if(f<k){var A=f;f=k}else A=k;A=a(m(A,t,v,w),y,B);return"M"+a(m(f,t,v,w),y,B).reverse().join("L")+"M"+A.join("L")}}},
{"../../lib":778,"../../lib/polygon":790}],894:[function(b,N,I){var r=b("../get_data").getSubplotCalcData,q=b("../../lib").counterRegex,m=b("./polar"),l=b("./constants");I=l.attr;var a=l.name;q=q(a);l={};l[I]={valType:"subplotid",dflt:a,editType:"calc"};N.exports={attr:I,name:a,idRoot:a,idRegex:q,attrRegex:q,attributes:l,layoutAttributes:b("./layout_attributes"),supplyLayoutDefaults:b("./layout_defaults"),plot:function(h){for(var g=h._fullLayout,n=h.calcdata,p=g._subplots[a],d=0;d<p.length;d++){var e=
p[d],f=r(n,a,e),k=g[e]._subplot;k||(k=m(h,e),g[e]._subplot=k);k.plot(f,g,h._promises)}},clean:function(h,g,n,p){h=p._subplots[a]||[];n=p._has&&p._has("gl");var d=g._has&&g._has("gl");n=n&&!d;for(d=0;d<h.length;d++){var e=h[d],f=p[e]._subplot;if(!g[e]&&f){f.framework.remove();f.layers["radial-axis-title"].remove();for(var k in f.clipPaths)f.clipPaths[k].remove()}n&&f._scene&&(f._scene.destroy(),f._scene=null)}},toSVG:b("../cartesian").toSVG}},{"../../lib":778,"../cartesian":841,"../get_data":865,"./constants":892,
"./layout_attributes":895,"./layout_defaults":896,"./polar":903}],895:[function(b,N,I){I=b("../../components/color/attributes");var r=b("../cartesian/layout_attributes"),q=b("../domain").attributes,m=b("../../lib").extendFlat,l=b("../../plot_api/edit_types").overrideAll;b=l({color:r.color,showline:m({},r.showline,{dflt:!0}),linecolor:r.linecolor,linewidth:r.linewidth,showgrid:m({},r.showgrid,{dflt:!0}),gridcolor:r.gridcolor,gridwidth:r.gridwidth},"plot","from-root");l=l({tickmode:r.tickmode,nticks:r.nticks,
tick0:r.tick0,dtick:r.dtick,tickvals:r.tickvals,ticktext:r.ticktext,ticks:r.ticks,ticklen:r.ticklen,tickwidth:r.tickwidth,tickcolor:r.tickcolor,showticklabels:r.showticklabels,showtickprefix:r.showtickprefix,tickprefix:r.tickprefix,showticksuffix:r.showticksuffix,ticksuffix:r.ticksuffix,showexponent:r.showexponent,exponentformat:r.exponentformat,minexponent:r.minexponent,separatethousands:r.separatethousands,tickfont:r.tickfont,tickangle:r.tickangle,tickformat:r.tickformat,tickformatstops:r.tickformatstops,
layer:r.layer},"plot","from-root");var a={visible:m({},r.visible,{dflt:!0}),type:m({},r.type,{values:["-","linear","log","date","category"]}),autotypenumbers:r.autotypenumbers,autorange:m({},r.autorange,{editType:"plot"}),rangemode:{valType:"enumerated",values:["tozero","nonnegative","normal"],dflt:"tozero",editType:"calc"},range:m({},r.range,{items:[{valType:"any",editType:"plot",impliedEdits:{"^autorange":!1}},{valType:"any",editType:"plot",impliedEdits:{"^autorange":!1}}],editType:"plot"}),categoryorder:r.categoryorder,
categoryarray:r.categoryarray,angle:{valType:"angle",editType:"plot"},side:{valType:"enumerated",values:["clockwise","counterclockwise"],dflt:"clockwise",editType:"plot"},title:{text:m({},r.title.text,{editType:"plot",dflt:""}),font:m({},r.title.font,{editType:"plot"}),editType:"plot"},hoverformat:r.hoverformat,uirevision:{valType:"any",editType:"none"},editType:"calc",_deprecated:{title:r._deprecated.title,titlefont:r._deprecated.titlefont}};m(a,b,l);r={visible:m({},r.visible,{dflt:!0}),type:{valType:"enumerated",
values:["-","linear","category"],dflt:"-",editType:"calc",_noTemplating:!0},autotypenumbers:r.autotypenumbers,categoryorder:r.categoryorder,categoryarray:r.categoryarray,thetaunit:{valType:"enumerated",values:["radians","degrees"],dflt:"degrees",editType:"calc"},period:{valType:"number",editType:"calc",min:0},direction:{valType:"enumerated",values:["counterclockwise","clockwise"],dflt:"counterclockwise",editType:"calc"},rotation:{valType:"angle",editType:"calc"},hoverformat:r.hoverformat,uirevision:{valType:"any",
editType:"none"},editType:"calc"};m(r,b,l);N.exports={domain:q({name:"polar",editType:"plot"}),sector:{valType:"info_array",items:[{valType:"number",editType:"plot"},{valType:"number",editType:"plot"}],dflt:[0,360],editType:"plot"},hole:{valType:"number",min:0,max:1,dflt:0,editType:"plot"},bgcolor:{valType:"color",editType:"plot",dflt:I.background},radialaxis:a,angularaxis:r,gridshape:{valType:"enumerated",values:["circular","linear"],dflt:"circular",editType:"plot"},uirevision:{valType:"any",editType:"none"},
editType:"calc"}},{"../../components/color/attributes":642,"../../lib":778,"../../plot_api/edit_types":810,"../cartesian/layout_attributes":842,"../domain":855}],896:[function(b,N,I){function r(B,A,z,E){function C(U,S){return z(J+"."+U,S)}var u=z("bgcolor");E.bgColor=l.combine(u,E.paper_bgcolor);u=z("sector");z("hole");for(var D=g(E.fullData,w.name,E.id),G=E.layoutOut,J,L=0;L<y.length;L++){J=y[L];m.isPlainObject(B[J])||(B[J]={});var K=B[J],H=a.newContainer(A,J);H._id=H._name=J;H._attr=E.id+"."+J;
H._traceIndices=D.map(function(U){return U._expandedIndex});var Q=w.axisName2dataArray[J],M=q(K,H,C,D,Q,E);e(K,H,C,{axData:D,dataAttr:Q});Q=C("visible");v(H,A,G);C("uirevision",A.uirevision);if(Q){var P=C("color");var T=P===K.color?P:E.font.color}H._m=1;switch(J){case "radialaxis":var O=C("autorange",!H.isValidRange(K.range));K.autorange=O;!O||"linear"!==M&&"-"!==M||C("rangemode");"reversed"===O&&(H._m=-1);C("range");H.cleanRange("range",{dfltRange:[0,1]});Q&&(C("side"),C("angle",u[0]),C("title.text"),
m.coerceFont(C,"title.font",{family:E.font.family,size:Math.round(1.2*E.font.size),color:T}));break;case "angularaxis":if("date"===M){m.log("Polar plots do not support date angular axes yet.");for(M=0;M<D.length;M++)D[M].visible=!1;M=K.type=H.type="linear"}"linear"===M?C("thetaunit"):C("period");O=C("direction");C("rotation",{counterclockwise:0,clockwise:90}[O])}Q&&(n(K,H,C,H.type),d(K,H,C,H.type,{tickSuffixDflt:"degrees"===H.thetaunit?"":void 0}),p(K,H,C,{outerTicks:!0}),C("showticklabels")&&(m.coerceFont(C,
"tickfont",{family:E.font.family,size:E.font.size,color:T}),C("tickangle"),C("tickformat")),f(K,H,C,{dfltColor:P,bgColor:E.bgColor,blend:60,showLine:!0,showGrid:!0,noZeroLine:!0,attributes:t[J]}),C("layer"));"category"!==M&&C("hoverformat");H._input=K}"category"===A.angularaxis.type&&z("gridshape")}function q(B,A,z,E,C,u){u=z("autotypenumbers",u.autotypenumbersDflt);if("-"===z("type")){for(z=0;z<E.length;z++)if(E[z].visible){var D=E[z];break}D&&D[C]&&(A.type=k(D[C],"gregorian",{noMultiCategory:!0,
autotypenumbers:u}));"-"===A.type?A.type="linear":B.type=A.type}return A.type}var m=b("../../lib"),l=b("../../components/color"),a=b("../../plot_api/plot_template"),h=b("../subplot_defaults"),g=b("../get_data").getSubplotData,n=b("../cartesian/tick_value_defaults"),p=b("../cartesian/tick_mark_defaults"),d=b("../cartesian/tick_label_defaults"),e=b("../cartesian/category_order_defaults"),f=b("../cartesian/line_grid_defaults"),k=b("../cartesian/axis_autotype"),t=b("./layout_attributes"),v=b("./set_convert"),
w=b("./constants"),y=w.axisNames;N.exports=function(B,A,z){h(B,A,z,{type:w.name,attributes:t,handleDefaults:r,font:A.font,autotypenumbersDflt:A.autotypenumbers,paper_bgcolor:A.paper_bgcolor,fullData:z,layoutOut:A})}},{"../../components/color":643,"../../lib":778,"../../plot_api/plot_template":817,"../cartesian/axis_autotype":829,"../cartesian/category_order_defaults":832,"../cartesian/line_grid_defaults":844,"../cartesian/tick_label_defaults":849,"../cartesian/tick_mark_defaults":850,"../cartesian/tick_value_defaults":851,
"../get_data":865,"../subplot_defaults":905,"./constants":892,"./layout_attributes":895,"./set_convert":904}],897:[function(b,N,I){I=b("../../../traces/scatter/attributes");var r=I.marker;b=b("../../../lib/extend").extendFlat;N.exports={r:b({},I.r,{}),t:b({},I.t,{}),marker:{color:b({},r.color,{}),size:b({},r.size,{}),symbol:b({},r.symbol,{}),opacity:b({},r.opacity,{}),editType:"calc"}}},{"../../../lib/extend":768,"../../../traces/scatter/attributes":1187}],898:[function(b,N,I){function r(m,l){return q({},
l,{showline:{valType:"boolean"},showticklabels:{valType:"boolean"},tickorientation:{valType:"enumerated",values:["horizontal","vertical"]},ticklen:{valType:"number",min:0},tickcolor:{valType:"color"},ticksuffix:{valType:"string"},endpadding:{valType:"number",description:"Legacy polar charts are deprecated! Please switch to *polar* subplots."},visible:{valType:"boolean"}})}I=b("../../cartesian/layout_attributes");var q=b("../../../lib/extend").extendFlat;b=b("../../../plot_api/edit_types").overrideAll;
I=q({},I.domain,{});N.exports=b({radialaxis:r("radial",{range:{valType:"info_array",items:[{valType:"number"},{valType:"number"}]},domain:I,orientation:{valType:"number"}}),angularaxis:r("angular",{range:{valType:"info_array",items:[{valType:"number",dflt:0},{valType:"number",dflt:360}]},domain:I}),layout:{direction:{valType:"enumerated",values:["clockwise","counterclockwise"]},orientation:{valType:"angle"}}},"plot","nested")},{"../../../lib/extend":768,"../../../plot_api/edit_types":810,"../../cartesian/layout_attributes":842}],
899:[function(b,N,I){(N.exports=b("./micropolar")).manager=b("./micropolar_manager")},{"./micropolar":900,"./micropolar_manager":901}],900:[function(b,N,I){var r=b("d3"),q=b("../../../lib").extendDeepAll,m=b("../../../constants/alignment").MID_SHIFT,l=N.exports={version:"0.2.2"};l.Axis=function(){function a(v){d=v||d;v=h.data;var w=h.layout;if("string"==typeof d||d.nodeName)d=r.select(d);d.datum(v).each(function(y,B){y=y.slice();n={data:l.util.cloneJson(y),layout:l.util.cloneJson(w)};var A=0;y.forEach(function(ma,
qa){ma.color||(ma.color=w.defaultColorRange[A],A=(A+1)%w.defaultColorRange.length);ma.strokeColor||(ma.strokeColor="LinePlot"===ma.geometry?ma.color:r.rgb(ma.color).darker().toString());n.data[qa].color=ma.color;n.data[qa].strokeColor=ma.strokeColor;n.data[qa].strokeDash=ma.strokeDash;n.data[qa].strokeSize=ma.strokeSize});y=y.filter(function(ma,qa){ma=ma.visible;return"undefined"===typeof ma||!0===ma});var z=!1;B=y.map(function(ma,qa){z=z||"undefined"!==typeof ma.groupId;return ma});if(z){var E=[];
y=r.nest().key(function(ma,qa){return"undefined"!=typeof ma.groupId?ma.groupId:"unstacked"}).entries(B).map(function(ma,qa){if("unstacked"!==ma.key){var pa=ma.values[0].r.map(function(na,ka){return 0});ma.values.forEach(function(na,ka,ua){na.yStack=[pa];E.push(pa);pa=l.util.sumArrays(na.r,pa)})}return ma.values});y=r.merge(y)}y.forEach(function(ma,qa){ma.t=Array.isArray(ma.t[0])?ma.t:[ma.t];ma.r=Array.isArray(ma.r[0])?ma.r:[ma.r]});var C=Math.min(w.width-w.margin.left-w.margin.right,w.height-w.margin.top-
w.margin.bottom)/2;C=Math.max(10,C);var u=[w.margin.left+C,w.margin.top+C];B=z?[0,r.max(l.util.sumArrays(l.util.arrayLast(y).r[0],l.util.arrayLast(E)))]:r.extent(l.util.flattenArray(y.map(function(ma,qa){return ma.r})));w.radialAxis.domain!=l.DATAEXTENT&&(B[0]=0);f=r.scale.linear().domain(w.radialAxis.domain!=l.DATAEXTENT&&w.radialAxis.domain?w.radialAxis.domain:B).range([0,C]);n.layout.radialAxis.domain=f.domain();var D=l.util.flattenArray(y.map(function(ma,qa){return ma.t})),G="string"===typeof D[0];
if(G){D=l.util.deduplicate(D);var J=D.slice();D=r.range(D.length);y=y.map(function(ma,qa){ma.t=[D];z&&(ma.yStack=ma.yStack);return ma})}var L=y.filter(function(ma,qa){return"LinePlot"===ma.geometry||"DotPlot"===ma.geometry}).length===y.length;B=null===w.needsEndSpacing?G||!L:w.needsEndSpacing;var K=w.angularAxis.domain&&w.angularAxis.domain!=l.DATAEXTENT&&!G&&0<=w.angularAxis.domain[0]?w.angularAxis.domain:r.extent(D),H=Math.abs(D[1]-D[0]);L&&!G&&(H=0);K=K.slice();B&&G&&(K[1]+=H);L=w.angularAxis.ticksCount||
4;8<L&&(L=L/(L/8)+L%8);w.angularAxis.ticksStep&&(L=(K[1]-K[0])/L);L=w.angularAxis.ticksStep||(K[1]-K[0])/(L*(w.minorTicks+1));J&&(L=Math.max(Math.round(L),1));K[2]||(K[2]=L);L=r.range.apply(this,K);L=L.map(function(ma,qa){return parseFloat(ma.toPrecision(12))});k=r.scale.linear().domain(K.slice(0,2)).range("clockwise"===w.direction?[0,360]:[360,0]);n.layout.angularAxis.domain=k.domain();n.layout.angularAxis.endPadding=B?H:0;p=r.select(this).select("svg.chart-root");if("undefined"===typeof p||p.empty())B=
(new DOMParser).parseFromString("\x3csvg xmlns\x3d'http://www.w3.org/2000/svg' class\x3d'chart-root'\x3e' + '\x3cg class\x3d'outer-group'\x3e' + '\x3cg class\x3d'chart-group'\x3e' + '\x3ccircle class\x3d'background-circle'\x3e\x3c/circle\x3e' + '\x3cg class\x3d'geometry-group'\x3e\x3c/g\x3e' + '\x3cg class\x3d'radial axis-group'\x3e' + '\x3ccircle class\x3d'outside-circle'\x3e\x3c/circle\x3e' + '\x3c/g\x3e' + '\x3cg class\x3d'angular axis-group'\x3e\x3c/g\x3e' + '\x3cg class\x3d'guides-group'\x3e\x3cline\x3e\x3c/line\x3e\x3ccircle r\x3d'0'\x3e\x3c/circle\x3e\x3c/g\x3e' + '\x3c/g\x3e' + '\x3cg class\x3d'legend-group'\x3e\x3c/g\x3e' + '\x3cg class\x3d'tooltips-group'\x3e\x3c/g\x3e' + '\x3cg class\x3d'title-group'\x3e\x3ctext\x3e\x3c/text\x3e\x3c/g\x3e' + '\x3c/g\x3e' + '\x3c/svg\x3e",
"application/xml"),B=this.appendChild(this.ownerDocument.importNode(B.documentElement,!0)),p=r.select(B);p.select(".guides-group").style({"pointer-events":"none"});p.select(".angular.axis-group").style({"pointer-events":"none"});p.select(".radial.axis-group").style({"pointer-events":"none"});B=p.select(".chart-group");K={fill:"none",stroke:w.tickColor};var Q={"font-size":w.font.size,"font-family":w.font.family,fill:w.font.color,"text-shadow":["-1px 0px","1px -1px","-1px 1px","1px 1px"].map(function(ma,
qa){return" "+ma+" 0 "+w.font.outlineColor}).join(",")};if(w.showLegend){H=p.select(".legend-group").attr({transform:"translate("+[C,w.margin.top]+")"}).style({display:"block"});var M=y.map(function(ma,qa){qa=l.util.cloneJson(ma);qa.symbol="DotPlot"===ma.geometry?ma.dotType||"circle":"LinePlot"!=ma.geometry?"square":"line";qa.visibleInLegend="undefined"===typeof ma.visibleInLegend||ma.visibleInLegend;qa.color="LinePlot"===ma.geometry?ma.strokeColor:ma.color;return qa});l.Legend().config({data:y.map(function(ma,
qa){return ma.name||"Element"+qa}),legendConfig:q({},l.Legend.defaultConfig().legendConfig,{container:H,elements:M,reverseOrder:w.legend.reverseOrder})})();M=H.node().getBBox();C=Math.min(w.width-M.width-w.margin.left-w.margin.right,w.height-w.margin.top-w.margin.bottom)/2;C=Math.max(10,C);u=[w.margin.left+C,w.margin.top+C];f.range([0,C]);n.layout.radialAxis.domain=f.domain();H.attr("transform","translate("+[u[0]+C,u[1]-C]+")")}else H=p.select(".legend-group").style({display:"none"});p.attr({width:w.width,
height:w.height}).style({opacity:w.opacity});B.attr("transform","translate("+u+")").style({cursor:"crosshair"});var P=[(w.width-(w.margin.left+w.margin.right+2*C+(M?M.width:0)))/2,(w.height-(w.margin.top+w.margin.bottom+2*C))/2];P[0]=Math.max(0,P[0]);P[1]=Math.max(0,P[1]);p.select(".outer-group").attr("transform","translate("+P+")");if(w.title&&w.title.text){M=p.select("g.title-group text").style(Q).text(w.title.text);var T=M.node().getBBox();M.attr({x:u[0]-T.width/2,y:u[1]-C-20})}M=p.select(".radial.axis-group");
w.radialAxis.gridLinesVisible&&(T=M.selectAll("circle.grid-circle").data(f.ticks(5)),T.enter().append("circle").attr({"class":"grid-circle"}).style(K),T.attr("r",f),T.exit().remove());M.select("circle.outside-circle").attr({r:C}).style(K);var O=p.select("circle.background-circle").attr({r:C}).style({fill:w.backgroundColor,stroke:w.stroke});w.radialAxis.visible&&(T=r.svg.axis().scale(f).ticks(5).tickSize(5),M.call(T).attr({transform:"rotate("+w.radialAxis.orientation+")"}),M.selectAll(".domain").style(K),
M.selectAll("g\x3etext").text(function(ma,qa){return this.textContent+w.radialAxis.ticksSuffix}).style(Q).style({"text-anchor":"start"}).attr({x:0,y:0,dx:0,dy:0,transform:function(ma,qa){return"horizontal"===w.radialAxis.tickOrientation?"rotate("+-w.radialAxis.orientation+") translate("+[0,Q["font-size"]]+")":"translate("+[0,Q["font-size"]]+")"}}),M.selectAll("g\x3eline").style({stroke:"black"}));M=p.select(".angular.axis-group").selectAll("g.angular-tick").data(L);L=M.enter().append("g").classed("angular-tick",
!0);M.attr({transform:function(ma,qa){return"rotate("+(k(ma)%360+w.orientation)+")"}}).style({display:w.angularAxis.visible?"block":"none"});M.exit().remove();L.append("line").classed("grid-line",!0).classed("major",function(ma,qa){return 0==qa%(w.minorTicks+1)}).classed("minor",function(ma,qa){return 0!=qa%(w.minorTicks+1)}).style(K);L.selectAll(".minor").style({stroke:w.minorTickColor});M.select("line.grid-line").attr({x1:w.tickLength?C-w.tickLength:0,x2:C}).style({display:w.angularAxis.gridLinesVisible?
"block":"none"});L.append("text").classed("axis-text",!0).style(Q);M=M.select("text.axis-text").attr({x:C+w.labelOffset,dy:m+"em",transform:function(ma,qa){ma=k(ma)%360+w.orientation;qa=C+w.labelOffset;var pa=w.angularAxis.tickOrientation;return"horizontal"==pa?"rotate("+-ma+" "+qa+" 0)":"radial"==pa?270>ma&&90<ma?"rotate(180 "+qa+" 0)":null:"rotate("+(180>=ma&&0<ma?-90:90)+" "+qa+" 0)"}}).style({"text-anchor":"middle",display:w.angularAxis.labelsVisible?"block":"none"}).text(function(ma,qa){return 0!=
qa%(w.minorTicks+1)?"":J?J[ma]+w.angularAxis.ticksSuffix:ma+w.angularAxis.ticksSuffix}).style(Q);w.angularAxis.rewriteTicks&&M.text(function(ma,qa){return 0!=qa%(w.minorTicks+1)?"":w.angularAxis.rewriteTicks(this.textContent,qa)});M=r.max(B.selectAll(".angular-tick text")[0].map(function(ma,qa){return ma.getCTM().e+ma.getBBox().width}));H.attr({transform:"translate("+[C+M,w.margin.top]+")"});M=0<p.select("g.geometry-group").selectAll("g").size();var U=p.select("g.geometry-group").selectAll("g.geometry").data(y);
U.enter().append("g").attr({"class":function(ma,qa){return"geometry geometry"+qa}});U.exit().remove();if(y[0]||M){var S=[];y.forEach(function(ma,qa){var pa={};pa.radialScale=f;pa.angularScale=k;pa.container=U.filter(function(na,ka){return ka==qa});pa.geometry=ma.geometry;pa.orientation=w.orientation;pa.direction=w.direction;pa.index=qa;S.push({data:ma,geometryConfig:pa})});var X=[];r.nest().key(function(ma,qa){return"undefined"!=typeof ma.data.groupId||"unstacked"}).entries(S).forEach(function(ma,
qa){"unstacked"===ma.key?X=X.concat(ma.values.map(function(pa,na){return[pa]})):X.push(ma.values)});X.forEach(function(ma,qa){var pa=Array.isArray(ma)?ma[0].geometryConfig.geometry:ma.geometryConfig.geometry;ma=ma.map(function(na,ka){return q(l[pa].defaultConfig(),na)});l[pa]().config(ma)()})}var ba=p.select(".guides-group");y=p.select(".tooltips-group");var ca=l.tooltipPanel().config({container:y,fontSize:8})(),ia=l.tooltipPanel().config({container:y,fontSize:8})(),ja=l.tooltipPanel().config({container:y,
hasTick:!0})(),la,da;if(!G){var oa=ba.select("line").attr({x1:0,y1:0,y2:0}).style({stroke:"grey","pointer-events":"none"});B.on("mousemove.angular-guide",function(ma,qa){ma=l.util.getMousePos(O).angle;oa.attr({x2:-C,transform:"rotate("+ma+")"}).style({opacity:.5});la=k.invert((ma+180+360-w.orientation)%360);ma=l.util.convertToCartesian(C+12,ma+180);ca.text(l.util.round(la)).move([ma[0]+u[0],ma[1]+u[1]])}).on("mouseout.angular-guide",function(ma,qa){ba.select("line").style({opacity:0})})}var sa=ba.select("circle").style({stroke:"grey",
fill:"none"});B.on("mousemove.radial-guide",function(ma,qa){ma=l.util.getMousePos(O).radius;sa.attr({r:ma}).style({opacity:.5});da=f.invert(l.util.getMousePos(O).radius);ma=l.util.convertToCartesian(ma,w.radialAxis.orientation);ia.text(l.util.round(da)).move([ma[0]+u[0],ma[1]+u[1]])}).on("mouseout.radial-guide",function(ma,qa){sa.style({opacity:0});ja.hide();ca.hide();ia.hide()});p.selectAll(".geometry-group .mark").on("mouseover.tooltip",function(ma,qa){var pa=r.select(this);qa=this.style.fill;pa.attr({"data-opacity":this.style.opacity||
1});if(qa&&"none"!==qa){pa.attr({"data-fill":qa});qa=r.hsl(qa).darker().toString();pa.style({fill:qa,opacity:1});pa=l.util.round(ma[0]);var na=l.util.round(ma[1]);G&&(pa=J[ma[0]]);ma="t: "+pa+", r: "+na;pa=this.getBoundingClientRect();na=p.node().getBoundingClientRect();pa=[pa.left+pa.width/2-P[0]-na.left,pa.top+pa.height/2-P[1]-na.top];ja.config({color:qa}).text(ma);ja.move(pa)}else qa=this.style.stroke||"black",pa.attr({"data-stroke":qa}),qa=r.hsl(qa).darker().toString(),pa.style({stroke:qa,opacity:1})}).on("mousemove.tooltip",
function(ma,qa){if(0!=r.event.which)return!1;r.select(this).attr("data-fill")&&ja.show()}).on("mouseout.tooltip",function(ma,qa){ja.hide();ma=r.select(this);(qa=ma.attr("data-fill"))?ma.style({fill:qa,opacity:ma.attr("data-opacity")}):ma.style({stroke:ma.attr("data-stroke"),opacity:ma.attr("data-opacity")})})});return t}var h={data:[],layout:{}},g={},n={},p,d,e=r.dispatch("hover"),f,k,t={render:function(v){a(v);return this},config:function(v){if(!arguments.length)return h;var w=l.util.cloneJson(v);
w.data.forEach(function(y,B){h.data[B]||(h.data[B]={});q(h.data[B],l.Axis.defaultConfig().data[0]);q(h.data[B],y)});q(h.layout,l.Axis.defaultConfig().layout);q(h.layout,w.layout);return this},getLiveConfig:function(){return n},getinputConfig:function(){return g},radialScale:function(v){return f},angularScale:function(v){return k},svg:function(){return p}};r.rebind(t,e,"on");return t};l.Axis.defaultConfig=function(a,h){return{data:[{t:[1,2,3,4],r:[10,11,12,13],name:"Line1",geometry:"LinePlot",color:null,
strokeDash:"solid",strokeColor:null,strokeSize:"1",visibleInLegend:!0,opacity:1}],layout:{defaultColorRange:r.scale.category10().range(),title:null,height:450,width:500,margin:{top:40,right:40,bottom:40,left:40},font:{size:12,color:"gray",outlineColor:"white",family:"Tahoma, sans-serif"},direction:"clockwise",orientation:0,labelOffset:10,radialAxis:{domain:null,orientation:-45,ticksSuffix:"",visible:!0,gridLinesVisible:!0,tickOrientation:"horizontal",rewriteTicks:null},angularAxis:{domain:[0,360],
ticksSuffix:"",visible:!0,gridLinesVisible:!0,labelsVisible:!0,tickOrientation:"horizontal",rewriteTicks:null,ticksCount:null,ticksStep:null},minorTicks:0,tickLength:null,tickColor:"silver",minorTickColor:"#eee",backgroundColor:"none",needsEndSpacing:null,showLegend:!0,legend:{reverseOrder:!1},opacity:1}}};l.util={};l.DATAEXTENT="dataExtent";l.AREA="AreaChart";l.LINE="LinePlot";l.DOT="DotPlot";l.BAR="BarChart";l.util._override=function(a,h){for(var g in a)g in h&&(h[g]=a[g])};l.util._extend=function(a,
h){for(var g in a)h[g]=a[g]};l.util._rndSnd=function(){return 2*Math.random()-1+(2*Math.random()-1)+(2*Math.random()-1)};l.util.dataFromEquation2=function(a,h){h=h||6;return r.range(0,360+h,h).map(function(g,n){n=a(g*Math.PI/180);return[g,n]})};l.util.dataFromEquation=function(a,h,g){h=h||6;var n=[],p=[];r.range(0,360+h,h).forEach(function(d,e){e=a(d*Math.PI/180);n.push(d);p.push(e)});h={t:n,r:p};g&&(h.name=g);return h};l.util.ensureArray=function(a,h){if("undefined"===typeof a)return null;var g=
[].concat(a);return r.range(h).map(function(n,p){return g[p]||g[0]})};l.util.fillArrays=function(a,h,g){h.forEach(function(n,p){a[n]=l.util.ensureArray(a[n],g)});return a};l.util.cloneJson=function(a){return JSON.parse(JSON.stringify(a))};l.util.validateKeys=function(a,h){"string"===typeof h&&(h=h.split("."));var g=h.shift();return a[g]&&(!h.length||objHasKeys(a[g],h))};l.util.sumArrays=function(a,h){return r.zip(a,h).map(function(g,n){return r.sum(g)})};l.util.arrayLast=function(a){return a[a.length-
1]};l.util.arrayEqual=function(a,h){for(var g=Math.max(a.length,h.length,1);0<=g--&&a[g]===h[g];);return-2===g};l.util.flattenArray=function(a){for(var h=[];!l.util.arrayEqual(h,a);)h=a,a=[].concat.apply([],a);return a};l.util.deduplicate=function(a){return a.filter(function(h,g,n){return n.indexOf(h)==g})};l.util.convertToCartesian=function(a,h){h=h*Math.PI/180;return[a*Math.cos(h),a*Math.sin(h)]};l.util.round=function(a,h){h=Math.pow(10,h||2);return Math.round(a*h)/h};l.util.getMousePos=function(a){a=
r.mouse(a.node());var h=a[0],g=a[1],n={};n.x=h;n.y=g;n.pos=a;n.angle=180*(Math.atan2(g,h)+Math.PI)/Math.PI;n.radius=Math.sqrt(h*h+g*g);return n};l.util.duplicatesCount=function(a){for(var h={},g,n={},p=0,d=a.length;p<d;p++)g=a[p],g in h?(h[g]++,n[g]=h[g]):h[g]=1;return n};l.util.duplicates=function(a){return Object.keys(l.util.duplicatesCount(a))};l.util.translator=function(a,h,g,n){n&&(n=g.slice(),g=h,h=n);var p=h.reduce(function(d,e){if("undefined"!=typeof d)return d[e]},a);"undefined"!==typeof p&&
(h.reduce(function(d,e,f){if("undefined"!=typeof d)return f===h.length-1&&delete d[e],d[e]},a),g.reduce(function(d,e,f){"undefined"===typeof d[e]&&(d[e]={});f===g.length-1&&(d[e]=p);return d[e]},a))};l.PolyChart=function(){function a(){var p=h[0].geometryConfig,d=p.container;"string"==typeof d&&(d=r.select(d));d.datum(h).each(function(e,f){var k=!!e[0].data.yStack,t=e.map(function(u,D){return k?r.zip(u.data.t[0],u.data.r[0],u.data.yStack[0]):r.zip(u.data.t[0],u.data.r[0])}),v=p.angularScale,w=p.radialScale.domain()[0],
y={bar:function(u,D,G){G=e[G].data;D=p.radialScale(u[1])-p.radialScale(0);u=p.radialScale(u[2]||0);G=G.barWidth;r.select(this).attr({"class":"mark bar",d:"M"+[[D+u,-G/2],[D+u,G/2],[u,G/2],[u,-G/2]].join("L")+"Z",transform:function(J,L){return"rotate("+(p.orientation+v(J[0]))+")"}})},dot:function(u,D,G){var J=u[2]?[u[0],u[1]+u[2]]:u;u=r.svg.symbol().size(e[G].data.dotSize).type(e[G].data.dotType)(u,D);r.select(this).attr({"class":"mark dot",d:u,transform:function(L,K){L=p.radialScale(J[1]);K=(p.angularScale(J[0])+
p.orientation)*Math.PI/180;return"translate("+[L*Math.cos(K),L*Math.sin(K)]+")"}})}},B=r.svg.line.radial().interpolate(e[0].data.lineInterpolation).radius(function(u){return p.radialScale(u[1])}).angle(function(u){return p.angularScale(u[0])*Math.PI/180});y.line=function(u,D,G){var J=u[2]?t[G].map(function(K,H){return[K[0],K[1]+K[2]]}):t[G];r.select(this).each(y.dot).style({opacity:function(K,H){return+e[G].data.dotVisible},fill:E.stroke(u,D,G)}).attr({"class":"mark dot"});if(!(0<D)){var L=r.select(this.parentNode).selectAll("path.line").data([0]);
L.enter().insert("path");L.attr({"class":"line",d:B(J),transform:function(K,H){return"rotate("+(p.orientation+90)+")"},"pointer-events":"none"}).style({fill:function(K,H){return E.fill(u,D,G)},"fill-opacity":0,stroke:function(K,H){return E.stroke(u,D,G)},"stroke-width":function(K,H){return E["stroke-width"](u,D,G)},"stroke-dasharray":function(K,H){return E["stroke-dasharray"](u,D,G)},opacity:function(K,H){return E.opacity(u,D,G)},display:function(K,H){return E.display(u,D,G)}})}};f=p.angularScale.range();
var A=Math.abs(f[1]-f[0])/t[0].length*Math.PI/180,z=r.svg.arc().startAngle(function(u){return-A/2}).endAngle(function(u){return A/2}).innerRadius(function(u){return p.radialScale(w+(u[2]||0))}).outerRadius(function(u){return p.radialScale(w+(u[2]||0))+p.radialScale(u[1])});y.arc=function(u,D,G){r.select(this).attr({"class":"mark arc",d:z,transform:function(J,L){return"rotate("+(p.orientation+v(J[0])+90)+")"}})};var E={fill:function(u,D,G){return e[G].data.color},stroke:function(u,D,G){return e[G].data.strokeColor},
"stroke-width":function(u,D,G){return e[G].data.strokeSize+"px"},"stroke-dasharray":function(u,D,G){return n[e[G].data.strokeDash]},opacity:function(u,D,G){return e[G].data.opacity},display:function(u,D,G){return"undefined"===typeof e[G].data.visible||e[G].data.visible?"block":"none"}};f=r.select(this).selectAll("g.layer").data(t);f.enter().append("g").attr({"class":"layer"});var C=f.selectAll("path.mark").data(function(u,D){return u});C.enter().append("path").attr({"class":"mark"});C.style(E).each(y[p.geometryType]);
C.exit().remove();f.exit().remove()})}var h=[l.PolyChart.defaultConfig()],g=r.dispatch("hover"),n={solid:"none",dash:[5,2],dot:[2,5]};a.config=function(p){if(!arguments.length)return h;p.forEach(function(d,e){h[e]||(h[e]={});q(h[e],l.PolyChart.defaultConfig());q(h[e],d)});return this};a.getColorScale=function(){};r.rebind(a,g,"on");return a};l.PolyChart.defaultConfig=function(){return{data:{name:"geom1",t:[[1,2,3,4]],r:[[1,2,3,4]],dotType:"circle",dotSize:64,dotVisible:!1,barWidth:20,color:"#ffa500",
strokeSize:1,strokeColor:"silver",strokeDash:"solid",opacity:1,index:0,visible:!0,visibleInLegend:!0},geometryConfig:{geometry:"LinePlot",geometryType:"arc",direction:"clockwise",orientation:0,container:"body",radialScale:null,angularScale:null,colorScale:r.scale.category20()}}};l.BarChart=function(){return l.PolyChart()};l.BarChart.defaultConfig=function(){return{geometryConfig:{geometryType:"bar"}}};l.AreaChart=function(){return l.PolyChart()};l.AreaChart.defaultConfig=function(){return{geometryConfig:{geometryType:"arc"}}};
l.DotPlot=function(){return l.PolyChart()};l.DotPlot.defaultConfig=function(){return{geometryConfig:{geometryType:"dot",dotType:"circle"}}};l.LinePlot=function(){return l.PolyChart()};l.LinePlot.defaultConfig=function(){return{geometryConfig:{geometryType:"line"}}};l.Legend=function(){function a(){var n=h.legendConfig,p=h.data.map(function(B,A){return[].concat(B).map(function(z,E){var C=q({},n.elements[A]);C.name=z;C.color=[].concat(n.elements[A].color)[E];return C})}),d=r.merge(p);d=d.filter(function(B,
A){return n.elements[A]&&(n.elements[A].visibleInLegend||"undefined"===typeof n.elements[A].visibleInLegend)});n.reverseOrder&&(d=d.reverse());var e=n.container;if("string"==typeof e||e.nodeName)e=r.select(e);var f=d.map(function(B,A){return B.color}),k=n.fontSize,t=(p=null==n.isContinuous?"number"===typeof d[0]:n.isContinuous)?n.height:k*d.length;e=e.classed("legend-group",!0).selectAll("svg").data([0]);var v=e.enter().append("svg").attr({width:300,height:t+k,xmlns:"http://www.w3.org/2000/svg","xmlns:xlink":"http://www.w3.org/1999/xlink",
version:"1.1"});v.append("g").classed("legend-axis",!0);v.append("g").classed("legend-marks",!0);v=r.range(d.length);var w=r.scale[p?"linear":"ordinal"]().domain(v).range(f),y=r.scale[p?"linear":"ordinal"]().domain(v)[p?"range":"rangePoints"]([0,t]);p?(t=e.select(".legend-marks").append("defs").append("linearGradient").attr({id:"grad1",x1:"0%",y1:"0%",x2:"0%",y2:"100%"}).selectAll("stop").data(f),t.enter().append("stop"),t.attr({offset:function(B,A){return A/(f.length-1)*100+"%"}}).style({"stop-color":function(B,
A){return B}}),e.append("rect").classed("legend-mark",!0).attr({height:n.height,width:n.colorBandWidth,fill:"url(#grad1)"})):(t=e.select(".legend-marks").selectAll("path.legend-mark").data(d),t.enter().append("path").classed("legend-mark",!0),t.attr({transform:function(B,A){return"translate("+[k/2,y(A)+k/2]+")"},d:function(B,A){B=B.symbol;A=3*k;B="line"===B?"M"+[[-k/2,-k/12],[k/2,-k/12],[k/2,k/12],[-k/2,k/12]]+"Z":-1!=r.svg.symbolTypes.indexOf(B)?r.svg.symbol().type(B).size(A)():r.svg.symbol().type("square").size(A)();
return B},fill:function(B,A){return w(A)}}),t.exit().remove());t=r.svg.axis().scale(y).orient("right");e=e.select("g.legend-axis").attr({transform:"translate("+[p?n.colorBandWidth:k,k/2]+")"}).call(t);e.selectAll(".domain").style({fill:"none",stroke:"none"});e.selectAll("line").style({fill:"none",stroke:p?n.textColor:"none"});e.selectAll("text").style({fill:n.textColor,"font-size":n.fontSize}).text(function(B,A){return d[A].name});return a}var h=l.Legend.defaultConfig(),g=r.dispatch("hover");a.config=
function(n){if(!arguments.length)return h;q(h,n);return this};r.rebind(a,g,"on");return a};l.Legend.defaultConfig=function(a,h){return{data:["a","b","c"],legendConfig:{elements:[{symbol:"line",color:"red"},{symbol:"square",color:"yellow"},{symbol:"diamond",color:"limegreen"}],height:150,colorBandWidth:30,fontSize:12,container:"body",isContinuous:null,textColor:"grey",reverseOrder:!1}}};l.tooltipPanel=function(){var a,h,g,n={container:null,hasTick:!1,fontSize:12,color:"white",padding:5},p="tooltip-"+
l.tooltipPanel.uid++,d=function(){a=n.container.selectAll("g."+p).data([0]);var e=a.enter().append("g").classed(p,!0).style({"pointer-events":"none",display:"none"});g=e.append("path").style({fill:"white","fill-opacity":.9}).attr({d:"M0 0"});h=e.append("text").attr({dx:n.padding+10,dy:.3*+n.fontSize});return d};d.text=function(e){var f=r.hsl(n.color).l,k=.5<=f?"#aaa":"white";e=e||"";h.style({fill:.5<=f?"black":"white","font-size":n.fontSize+"px"}).text(e);f=n.padding;e=h.node().getBBox();k={fill:n.color,
stroke:k,"stroke-width":"2px"};var t=e.width+2*f+10;e=e.height+2*f;g.attr({d:"M"+[[10,-e/2],[10,-e/4],[n.hasTick?0:10,0],[10,e/4],[10,e/2],[t,e/2],[t,-e/2]].join("L")+"Z"}).style(k);a.attr({transform:"translate("+[10,-e/2+2*f]+")"});a.style({display:"block"});return d};d.move=function(e){if(a)return a.attr({transform:"translate("+[e[0],e[1]]+")"}).style({display:"block"}),d};d.hide=function(){if(a)return a.style({display:"none"}),d};d.show=function(){if(a)return a.style({display:"block"}),d};d.config=
function(e){q(n,e);return d};return d};l.tooltipPanel.uid=1;l.adapter={};l.adapter.plotly=function(){return{convert:function(a,h){var g={};if(a.data&&(g.data=a.data.map(function(f,k){f=q({},f);[[f,["marker","color"],["color"]],[f,["marker","opacity"],["opacity"]],[f,["marker","line","color"],["strokeColor"]],[f,["marker","line","dash"],["strokeDash"]],[f,["marker","line","width"],["strokeSize"]],[f,["marker","symbol"],["dotType"]],[f,["marker","size"],["dotSize"]],[f,["marker","barWidth"],["barWidth"]],
[f,["line","interpolation"],["lineInterpolation"]],[f,["showlegend"],["visibleInLegend"]]].forEach(function(t,v){l.util.translator.apply(null,t.concat(h))});h||delete f.marker;h&&delete f.groupId;h?("LinePlot"===f.geometry?(f.type="scatter",!0===f.dotVisible?(delete f.dotVisible,f.mode="lines+markers"):f.mode="lines"):"DotPlot"===f.geometry?(f.type="scatter",f.mode="markers"):"AreaChart"===f.geometry?f.type="area":"BarChart"===f.geometry&&(f.type="bar"),delete f.geometry):("scatter"===f.type?"lines"===
f.mode?f.geometry="LinePlot":"markers"===f.mode?f.geometry="DotPlot":"lines+markers"===f.mode&&(f.geometry="LinePlot",f.dotVisible=!0):"area"===f.type?f.geometry="AreaChart":"bar"===f.type&&(f.geometry="BarChart"),delete f.mode,delete f.type);return f}),!h&&a.layout&&"stack"===a.layout.barmode)){var n=l.util.duplicates(g.data.map(function(f,k){return f.geometry}));g.data.forEach(function(f,k){f=n.indexOf(f.geometry);-1!=f&&(g.data[k].groupId=f)})}if(a.layout){a=q({},a.layout);[[a,["plot_bgcolor"],
["backgroundColor"]],[a,["showlegend"],["showLegend"]],[a,["radialaxis"],["radialAxis"]],[a,["angularaxis"],["angularAxis"]],[a.angularaxis,["showline"],["gridLinesVisible"]],[a.angularaxis,["showticklabels"],["labelsVisible"]],[a.angularaxis,["nticks"],["ticksCount"]],[a.angularaxis,["tickorientation"],["tickOrientation"]],[a.angularaxis,["ticksuffix"],["ticksSuffix"]],[a.angularaxis,["range"],["domain"]],[a.angularaxis,["endpadding"],["endPadding"]],[a.radialaxis,["showline"],["gridLinesVisible"]],
[a.radialaxis,["tickorientation"],["tickOrientation"]],[a.radialaxis,["ticksuffix"],["ticksSuffix"]],[a.radialaxis,["range"],["domain"]],[a.angularAxis,["showline"],["gridLinesVisible"]],[a.angularAxis,["showticklabels"],["labelsVisible"]],[a.angularAxis,["nticks"],["ticksCount"]],[a.angularAxis,["tickorientation"],["tickOrientation"]],[a.angularAxis,["ticksuffix"],["ticksSuffix"]],[a.angularAxis,["range"],["domain"]],[a.angularAxis,["endpadding"],["endPadding"]],[a.radialAxis,["showline"],["gridLinesVisible"]],
[a.radialAxis,["tickorientation"],["tickOrientation"]],[a.radialAxis,["ticksuffix"],["ticksSuffix"]],[a.radialAxis,["range"],["domain"]],[a.font,["outlinecolor"],["outlineColor"]],[a.legend,["traceorder"],["reverseOrder"]],[a,["labeloffset"],["labelOffset"]],[a,["defaultcolorrange"],["defaultColorRange"]]].forEach(function(f,k){l.util.translator.apply(null,f.concat(h))});h?("undefined"!==typeof a.tickLength&&(a.angularaxis.ticklen=a.tickLength,delete a.tickLength),a.tickColor&&(a.angularaxis.tickcolor=
a.tickColor,delete a.tickColor)):(a.angularAxis&&"undefined"!==typeof a.angularAxis.ticklen&&(a.tickLength=a.angularAxis.ticklen),a.angularAxis&&"undefined"!==typeof a.angularAxis.tickcolor&&(a.tickColor=a.angularAxis.tickcolor));a.legend&&"boolean"!=typeof a.legend.reverseOrder&&(a.legend.reverseOrder="normal"!=a.legend.reverseOrder);a.legend&&"boolean"==typeof a.legend.traceorder&&(a.legend.traceorder=a.legend.traceorder?"reversed":"normal",delete a.legend.reverseOrder);if(a.margin&&"undefined"!=
typeof a.margin.t){var p=["t","r","b","l","pad"],d=["top","right","bottom","left","pad"],e={};r.entries(a.margin).forEach(function(f,k){e[d[p.indexOf(f.key)]]=f.value});a.margin=e}h&&(delete a.needsEndSpacing,delete a.minorTickColor,delete a.minorTicks,delete a.angularaxis.ticksCount,delete a.angularaxis.ticksCount,delete a.angularaxis.ticksStep,delete a.angularaxis.rewriteTicks,delete a.angularaxis.nticks,delete a.radialaxis.ticksCount,delete a.radialaxis.ticksCount,delete a.radialaxis.ticksStep,
delete a.radialaxis.rewriteTicks,delete a.radialaxis.nticks);g.layout=a}return g}}}},{"../../../constants/alignment":745,"../../../lib":778,d3:169}],901:[function(b,N,I){var r=b("d3");I=b("../../../lib");var q=b("../../../components/color"),m=b("./micropolar"),l=b("./undo_manager"),a=I.extendDeepAll,h=N.exports={};h.framework=function(g){function n(v,w){w&&(k=w);r.select(r.select(k).node().parentNode).selectAll(".svg-container\x3e*:not(.chart-root)").remove();p=p?a(p,v):v;e||(e=m.Axis());f=m.adapter.plotly().convert(p);
e.config(f).render(k);g.data=p.data;g.layout=p.layout;h.fillLayout(g);return p}var p,d,e,f,k,t=new l;n.isPolar=!0;n.svg=function(){return e.svg()};n.getConfig=function(){return p};n.getLiveConfig=function(){return m.adapter.plotly().convert(e.getLiveConfig(),!0)};n.getLiveScales=function(){return{t:e.angularScale(),r:e.radialScale()}};n.setUndoPoint=function(){var v=this,w=m.util.cloneJson(p);(function(y,B){t.add({undo:function(){B&&v(B)},redo:function(){v(y)}})})(w,d);d=m.util.cloneJson(w)};n.undo=
function(){t.undo()};n.redo=function(){t.redo()};return n};h.fillLayout=function(g){var n=r.select(g).selectAll(".plot-container"),p=n.selectAll(".svg-container"),d=g.framework&&g.framework.svg&&g.framework.svg();g._fullLayout=a({width:800,height:600,paper_bgcolor:q.background,_container:n,_paperdiv:p,_paper:d},g.layout)}},{"../../../components/color":643,"../../../lib":778,"./micropolar":900,"./undo_manager":902,d3:169}],902:[function(b,N,I){N.exports=function(){function r(h,g){if(!h)return this;
l=!0;h[g]();l=!1;return this}var q=[],m=-1,l=!1,a;return{add:function(h){if(l)return this;q.splice(m+1,q.length-m);q.push(h);m=q.length-1;return this},setCallback:function(h){a=h},undo:function(){var h=q[m];if(!h)return this;r(h,"undo");--m;a&&a(h.undo);return this},redo:function(){var h=q[m+1];if(!h)return this;r(h,"redo");m+=1;a&&a(h.redo);return this},clear:function(){q=[];m=-1},hasUndo:function(){return-1!==m},hasRedo:function(){return m<q.length-1},getCommands:function(){return q},getPreviousCommand:function(){return q[m-
1]},getIndex:function(){return m}}}},{}],903:[function(b,N,I){function r(U,S){this.id=S;this.gd=U;this.radialAxisAngle=this.vangles=this._hasClipOnAxisFalse=null;this.traceHash={};this.layers={};this.clipPaths={};this.clipIds={};this.viewInitial={};U=U._fullLayout;this.clipIds.forTraces="clip"+U._uid+S+"-for-traces";this.clipPaths.forTraces=U._clips.append("clipPath").attr("id",this.clipIds.forTraces);this.clipPaths.forTraces.append("path");this.framework=U._polarlayer.append("g").attr("class",S);
this.angularTickLayout=this.radialTickLayout=null}function q(U){var S=U.ticks+String(U.ticklen)+String(U.showticklabels);"side"in U&&(S+=U.side);return S}function m(U,S){var X=n.findIndexOfMin(S,function(ba){return n.angleDist(U,ba)});return S[X]}function l(U,S,X){S?(U.attr("display",null),U.attr(X)):U&&U.attr("display","none");return U}var a=b("d3"),h=b("tinycolor2"),g=b("../../registry"),n=b("../../lib"),p=n.strRotate,d=n.strTranslate,e=b("../../components/color"),f=b("../../components/drawing"),
k=b("../plots"),t=b("../../plots/cartesian/axes"),v=b("../cartesian/set_convert"),w=b("./set_convert"),y=b("../cartesian/autorange").doAutoRange,B=b("../cartesian/dragbox"),A=b("../../components/dragelement"),z=b("../../components/fx"),E=b("../../components/titles"),C=b("../cartesian/select").prepSelect,u=b("../cartesian/select").selectOnClick,D=b("../cartesian/select").clearSelect,G=b("../../lib/setcursor"),J=b("../../lib/clear_gl_canvases"),L=b("../../plot_api/subroutines").redrawReglTraces,K=b("../../constants/alignment").MID_SHIFT,
H=b("./constants"),Q=b("./helpers"),M=n._,P=n.mod,T=n.deg2rad,O=n.rad2deg;b=r.prototype;N.exports=function(U,S){return new r(U,S)};b.plot=function(U,S){var X=S[this.id];this._hasClipOnAxisFalse=!1;for(var ba=0;ba<U.length;ba++)if(!1===U[ba][0].trace.cliponaxis){this._hasClipOnAxisFalse=!0;break}this.updateLayers(S,X);this.updateLayout(S,X);k.generalUpdatePerTraceModule(this.gd,this,U,X);this.updateFx(S,X)};b.updateLayers=function(U,S){var X=this.layers;U=S.radialaxis;S=S.angularaxis;var ba=H.layerNames,
ca=ba.indexOf("frontplot");ba=ba.slice(0,ca);S="below traces"===S.layer;U="below traces"===U.layer;S&&ba.push("angular-line");U&&ba.push("radial-line");S&&ba.push("angular-axis");U&&ba.push("radial-axis");ba.push("frontplot");S||ba.push("angular-line");U||ba.push("radial-line");S||ba.push("angular-axis");U||ba.push("radial-axis");U=this.framework.selectAll(".polarsublayer").data(ba,String);U.enter().append("g").attr("class",function(ia){return"polarsublayer "+ia}).each(function(ia){var ja=X[ia]=a.select(this);
switch(ia){case "frontplot":ja.append("g").classed("barlayer",!0);ja.append("g").classed("scatterlayer",!0);break;case "backplot":ja.append("g").classed("maplayer",!0);break;case "plotbg":X.bg=ja.append("path");break;case "radial-grid":ja.style("fill","none");break;case "angular-grid":ja.style("fill","none");break;case "radial-line":ja.append("line").style("fill","none");break;case "angular-line":ja.append("path").style("fill","none")}});U.order()};b.updateLayout=function(U,S){var X=this.layers,ba=
U._size,ca=S.radialaxis,ia=S.angularaxis,ja=S.domain.x,la=S.domain.y;this.xOffset=ba.l+ba.w*ja[0];this.yOffset=ba.t+ba.h*(1-la[1]);var da=this.xLength=ba.w*(ja[1]-ja[0]),oa=this.yLength=ba.h*(la[1]-la[0]),sa=S.sector;this.sectorInRad=sa.map(T);var ma=sa[0];sa=sa[1]-ma;ma=P(ma,360);sa=ma+sa;var qa=Math.cos(T(ma)),pa=Math.sin(T(ma)),na=Math.cos(T(sa)),ka=Math.sin(T(sa));var ua=90>=ma&&90<=sa||90<ma&&450<=sa?1:0>=pa&&0>=ka?0:Math.max(pa,ka);var va=180>=ma&&180<=sa||180<ma&&540<=sa?-1:0<=qa&&0<=na?0:
Math.min(qa,na);ma=this.sectorBBox=[va,270>=ma&&270<=sa||270<ma&&630<=sa?-1:0<=pa&&0<=ka?0:Math.min(pa,ka),360<=sa?1:0>=qa&&0>=na?0:Math.max(qa,na),ua];sa=ma[2]-ma[0];pa=Math.abs((ma[3]-ma[1])/sa);oa/da>pa?(qa=da,pa*=da,da=(oa-pa)/ba.h/2,ja=[ja[0],ja[1]],la=[la[0]+da,la[1]-da]):(qa=oa/pa,pa=oa,da=(da-qa)/ba.w/2,ja=[ja[0]+da,ja[1]-da],la=[la[0],la[1]]);this.xLength2=qa;this.yLength2=pa;this.xDomain2=ja;this.yDomain2=la;da=this.xOffset2=ba.l+ba.w*ja[0];oa=this.yOffset2=ba.t+ba.h*(1-la[1]);qa=this.radius=
qa/sa;pa=this.innerRadius=S.hole*qa;sa=this.cx=da-qa*ma[0];ma=this.cy=oa+qa*ma[3];na=this.cxx=sa-da;ka=this.cyy=ma-oa;this.radialAxis=this.mockAxis(U,S,ca,{_id:"x",side:{counterclockwise:"top",clockwise:"bottom"}[ca.side],_realSide:ca.side,domain:[pa/ba.w,qa/ba.w]});this.angularAxis=this.mockAxis(U,S,ia,{side:"right",domain:[0,Math.PI],autorange:!1});this.doAutoRange(U,S);this.updateAngularAxis(U,S);this.updateRadialAxis(U,S);this.updateRadialAxisTitle(U,S);this.xaxis=this.mockCartesianAxis(U,S,{_id:"x",
domain:ja});this.yaxis=this.mockCartesianAxis(U,S,{_id:"y",domain:la});U=this.pathSubplot();this.clipPaths.forTraces.select("path").attr("d",U).attr("transform",d(na,ka));X.frontplot.attr("transform",d(da,oa)).call(f.setClipUrl,this._hasClipOnAxisFalse?null:this.clipIds.forTraces,this.gd);X.bg.attr("d",U).attr("transform",d(sa,ma)).call(e.fill,S.bgcolor)};b.mockAxis=function(U,S,X,ba){X=n.extendFlat({},X,ba);w(X,S,U);return X};b.mockCartesianAxis=function(U,S,X){var ba=this,ca=X._id,ia=n.extendFlat({type:"linear"},
X);v(ia,U);var ja={x:[0,2],y:[1,3]};ia.setRange=function(){var la=ba.sectorBBox,da=ja[ca],oa=ba.radialAxis._rl;oa=(oa[1]-oa[0])/(1-S.hole);ia.range=[la[da[0]]*oa,la[da[1]]*oa]};ia.isPtWithinRange="x"===ca?function(la){return ba.isPtInside(la)}:function(){return!0};ia.setRange();ia.setScale();return ia};b.doAutoRange=function(U,S){var X=this.gd;U=this.radialAxis;S=S.radialaxis;U.setScale();y(X,U);X=U.range;S.range=X.slice();S._input.range=X.slice();U._rl=[U.r2l(X[0],null,"gregorian"),U.r2l(X[1],null,
"gregorian")]};b.updateRadialAxis=function(U,S){var X=this,ba=X.gd;U=X.layers;var ca=X.radius,ia=X.innerRadius,ja=X.cx,la=X.cy,da=S.radialaxis,oa=P(S.sector[0],360),sa=X.radialAxis;S=ia<ca;X.fillViewInitialKey("radialaxis.angle",da.angle);X.fillViewInitialKey("radialaxis.range",sa.range.slice());sa.setGeometry();"auto"===sa.tickangle&&90<oa&&270>=oa&&(sa.tickangle=180);oa=function(ka){return d(sa.l2p(ka.x)+ia,0)};var ma=function(ka){return X.pathArc(sa.r2p(ka.x)+ia)},qa=q(da);X.radialTickLayout!==
qa&&(U["radial-axis"].selectAll(".xtick").remove(),X.radialTickLayout=qa);if(S){sa.setScale();qa=t.calcTicks(sa);var pa=t.clipEnds(sa,qa),na=t.getTickSigns(sa)[2];t.drawTicks(ba,sa,{vals:qa,layer:U["radial-axis"],path:t.makeTickPath(sa,0,na),transFn:oa,crisp:!1});t.drawGrid(ba,sa,{vals:pa,layer:U["radial-grid"],path:ma,transFn:n.noop,crisp:!1});t.drawLabels(ba,sa,{vals:qa,layer:U["radial-axis"],transFn:oa,labelFns:t.makeLabelFns(sa,0)})}ba=X.radialAxisAngle=X.vangles?O(m(T(da.angle),X.vangles)):da.angle;
ja=d(ja,la);la=ja+p(-ba);l(U["radial-axis"],S&&(da.showticklabels||da.ticks),{transform:la});l(U["radial-grid"],S&&da.showgrid,{transform:ja});l(U["radial-line"].select("line"),S&&da.showline,{x1:ia,y1:0,x2:ca,y2:0,transform:la}).attr("stroke-width",da.linewidth).call(e.stroke,da.linecolor)};b.updateRadialAxisTitle=function(U,S,X){U=this.gd;var ba=this.radius,ca=this.cx,ia=this.cy;S=S.radialaxis;var ja=this.id+"title";X=void 0!==X?X:this.radialAxisAngle;var la=T(X),da=Math.cos(la);la=Math.sin(la);
var oa=0;if(S.title){oa=f.bBox(this.layers["radial-axis"].node()).height;var sa=S.title.font.size;oa="counterclockwise"===S.side?-oa-.4*sa:oa+.8*sa}this.layers["radial-axis-title"]=E.draw(U,ja,{propContainer:S,propName:this.id+".radialaxis.title",placeholder:M(U,"Click to enter radial axis title"),attributes:{x:ca+ba/2*da+oa*la,y:ia-ba/2*la+oa*da,"text-anchor":"middle"},transform:{rotate:-X}})};b.updateAngularAxis=function(U,S){var X=this;U=X.gd;var ba=X.layers,ca=X.radius,ia=X.innerRadius,ja=X.cx,
la=X.cy,da=S.angularaxis,oa=X.angularAxis;X.fillViewInitialKey("angularaxis.rotation",da.rotation);oa.setGeometry();oa.setScale();var sa=function(Ca){return oa.t2g(Ca.x)};"linear"===oa.type&&"radians"===oa.thetaunit&&(oa.tick0=O(oa.tick0),oa.dtick=O(oa.dtick));var ma=function(Ca){return d(ja+ca*Math.cos(Ca),la-ca*Math.sin(Ca))},qa=function(Ca){return ma(sa(Ca))},pa=function(Ca){Ca=sa(Ca);return ma(Ca)+p(-O(Ca))},na=function(Ca){var Ma=sa(Ca);Ca=Math.cos(Ma);Ma=Math.sin(Ma);return"M"+[ja+ia*Ca,la-
ia*Ma]+"L"+[ja+ca*Ca,la-ca*Ma]},ka=t.makeLabelFns(oa,0).labelStandoff,ua={xFn:function(Ca){Ca=sa(Ca);return Math.cos(Ca)*ka},yFn:function(Ca){var Ma=sa(Ca);return-Math.sin(Ma)*(ka+Ca.fontSize*(0<Math.sin(Ma)?.2:1))+Math.abs(Math.cos(Ma))*Ca.fontSize*K},anchorFn:function(Ca){Ca=sa(Ca);Ca=Math.cos(Ca);return.1>Math.abs(Ca)?"middle":0<Ca?"start":"end"},heightFn:function(Ca,Ma,Ua){Ca=sa(Ca);return-.5*(1+Math.sin(Ca))*Ua}},va=q(da);X.angularTickLayout!==va&&(ba["angular-axis"].selectAll("."+oa._id+"tick").remove(),
X.angularTickLayout=va);va=t.calcTicks(oa);"linear"===S.gridshape?(S=va.map(sa),0>n.angleDelta(S[0],S[1])&&(S=S.slice().reverse())):S=null;X.vangles=S;"category"===oa.type&&(va=va.filter(function(Ca){return n.isAngleInsideSector(sa(Ca),X.sectorInRad)}));oa.visible&&(S="inside"===oa.ticks?-1:1,t.drawTicks(U,oa,{vals:va,layer:ba["angular-axis"],path:"M"+(oa.linewidth||1)/2*S+",0h"+S*oa.ticklen,transFn:pa,crisp:!1}),t.drawGrid(U,oa,{vals:va,layer:ba["angular-grid"],path:na,transFn:n.noop,crisp:!1}),
t.drawLabels(U,oa,{vals:va,layer:ba["angular-axis"],repositionOnUpdate:!0,transFn:qa,labelFns:ua}));l(ba["angular-line"].select("path"),da.showline,{d:X.pathSubplot(),transform:d(ja,la)}).attr("stroke-width",da.linewidth).call(e.stroke,da.linecolor)};b.updateFx=function(U,S){this.gd._context.staticPlot||(this.updateAngularDrag(U),this.updateRadialDrag(U,S,0),this.updateRadialDrag(U,S,1),this.updateMainDrag(U))};b.updateMainDrag=function(U){function S(Za,mb){return Math.sqrt(Za*Za+mb*mb)}function X(Za,
mb){return[Za*Math.cos(mb),Za*Math.sin(-mb)]}function ba(Za,mb){if(0===Za)return pa.pathSector(2*Ia);var ub=Oa/Za,Pb=mb-ub;mb+=ub;ub=Math.max(0,Math.min(Za,Ca));Za=ub-Ia;ub+=Ia;return"M"+X(Za,Pb)+"A"+[Za,Za]+" 0,0,0 "+X(Za,mb)+"L"+X(ub,mb)+"A"+[ub,ub]+" 0,0,1 "+X(ub,Pb)+"Z"}function ca(Za,mb,ub){if(0===Za)return pa.pathSector(2*Ia);mb=X(Za,mb);ub=X(Za,ub);Za=pb((mb[0]+ub[0])/2);ub=pb((mb[1]+ub[1])/2);if(Za&&ub){mb=ub/Za;var Pb=-1/mb;Za=xa(Ia,mb,Za,ub);mb=xa(Oa,Pb,Za[0][0],Za[0][1]);Za=xa(Oa,Pb,Za[1][0],
Za[1][1])}else{if(ub){Pb=Oa;var Kb=Ia}else Pb=Ia,Kb=Oa;mb=[[Za-Pb,ub-Kb],[Za+Pb,ub-Kb]];Za=[[Za-Pb,ub+Kb],[Za+Pb,ub+Kb]]}return"M"+mb.join("L")+"L"+Za.reverse().join("L")+"Z"}function ia(Za,mb){mb=Math.max(Math.min(mb,Ca),Ma);Za<va?Za=0:Ca-Za<va?Za=Ca:mb<va?mb=0:Ca-mb<va&&(mb=Ca);if(Math.abs(mb-Za)>ua)return Za<mb?(ib=Za,qb=mb):(ib=mb,qb=Za),!0;qb=ib=null;return!1}function ja(Za,mb){Za=Za||sb;mb=mb||"M0,0Z";La.attr("d",Za);Va.attr("d",mb);B.transitionZoombox(La,Va,Ba,Fa);Ba=!0;Za={};ma(Za);na.emit("plotly_relayouting",
Za)}function la(Za,mb){Za*=bb;mb*=Xa;Za=Ta+Za;var ub=Na+mb;mb=S(Ta-fb,Na-nb);Za=Math.min(S(Za-fb,ub-nb),Ca);ub=Math.atan2(nb-Na,Ta-fb);if(ia(mb,Za)){var Pb=sb+pa.pathSector(qb);ib&&(Pb+=pa.pathSector(ib));var Kb=ba(ib,ub)+ba(qb,ub)}ja(Pb,Kb)}function da(Za,mb,ub,Pb){Za=Q.findIntersectionXY(ub,Pb,ub,[Za-fb,nb-mb]);return S(Za[0],Za[1])}function oa(Za,mb){Za=Ta+Za;var ub=Na+mb,Pb=Math.atan2(nb-ub,Za-fb);mb=Ea(Math.atan2(nb-Na,Ta-fb),$a);var Kb=Ea(Pb,$a);Pb=da(Ta,Na,mb[0],mb[1]);Za=Math.min(da(Za,ub,
Kb[0],Kb[1]),Ca);if(ia(Pb,Za)){var Ob=sb+pa.pathSector(qb);ib&&(Ob+=pa.pathSector(ib));var Wb=[ca(ib,mb[0],mb[1]),ca(qb,mb[0],mb[1])].join(" ")}ja(Ob,Wb)}function sa(){B.removeZoombox(na);if(null!==ib&&null!==qb){var Za={};ma(Za);B.showDoubleClickNotifier(na);g.call("_guiRelayout",na,Za)}}function ma(Za){var mb=jb._rl,ub=(mb[1]-mb[0])/(1-Ma/Ca)/Ca;Za[pa.id+".radialaxis.range"]=[mb[0]+(ib-Ma)*ub,mb[0]+(qb-Ma)*ub]}function qa(Za,mb){var ub=na._fullLayout.clickmode;B.removeZoombox(na);if(2===Za){var Pb=
{},Kb;for(Kb in pa.viewInitial)Pb[pa.id+"."+Kb]=pa.viewInitial[Kb];na.emit("plotly_doubleclick",null);g.call("_guiRelayout",na,Pb)}-1<ub.indexOf("select")&&1===Za&&u(mb,na,[pa.xaxis],[pa.yaxis],pa.id,Ka);-1<ub.indexOf("event")&&z.click(na,mb,pa.id)}var pa=this,na=pa.gd,ka=U._zoomlayer,ua=H.MINZOOM,va=H.OFFEDGE,Ca=pa.radius,Ma=pa.innerRadius,Ua=pa.cx,eb=pa.cy,fb=pa.cxx,nb=pa.cyy,cb=pa.sectorInRad,$a=pa.vangles,jb=pa.radialAxis,pb=Q.clampTiny,xa=Q.findXYatLength,Ea=Q.findEnclosingVertexAngles,Ia=H.cornerHalfWidth,
Oa=H.cornerLen/2,bb,Xa,tb=B.makeDragger(pa.layers,"path","maindrag","crosshair");a.select(tb).attr("d",pa.pathSubplot()).attr("transform",d(Ua,eb));var Ka={element:tb,gd:na,subplot:pa.id,plotinfo:{id:pa.id,xaxis:pa.xaxis,yaxis:pa.yaxis},xaxes:[pa.xaxis],yaxes:[pa.yaxis]},Ta,Na,ib,qb,sb,Ba,Fa,La,Va;Ka.prepFn=function(Za,mb,ub){var Pb=na._fullLayout.dragmode,Kb=tb.getBoundingClientRect();na._fullLayout._calcInverseTransform(na);var Ob=na._fullLayout._invTransform;bb=na._fullLayout._invScaleX;Xa=na._fullLayout._invScaleY;
Kb=n.apply3DTransform(Ob)(mb-Kb.left,ub-Kb.top);Ta=Kb[0];Na=Kb[1];$a&&(Kb=Q.findPolygonOffset(Ca,cb[0],cb[1],$a),Ta+=fb+Kb[0],Na+=nb+Kb[1]);switch(Pb){case "zoom":Ka.moveFn=$a?oa:la;Ka.clickFn=qa;Ka.doneFn=sa;qb=ib=null;sb=pa.pathSubplot();Ba=!1;Fa=h(na._fullLayout[pa.id].bgcolor).getLuminance();La=B.makeZoombox(ka,Fa,Ua,eb,sb);La.attr("fill-rule","evenodd");Va=B.makeCorners(ka,Ua,eb);D(na);break;case "select":case "lasso":C(Za,mb,ub,Ka,Pb)}};tb.onmousemove=function(Za){z.hover(na,Za,pa.id);na._fullLayout._lasthover=
tb;na._fullLayout._hoversubplot=pa.id};tb.onmouseout=function(Za){na._dragging||A.unhover(na,Za)};A.init(Ka)};b.updateRadialDrag=function(U,S,X){function ba(xa,Ea){$a?$a(xa,Ea):(xa=[xa,-Ea],xa=Math.abs(n.dot(xa,[Math.cos(ua),Math.sin(ua)])/Math.sqrt(n.dot(xa,xa))),isNaN(xa)||($a=.5>xa?ia:ja));xa={};null!==jb?xa[la.id+".radialaxis.angle"]=jb:null!==pb&&(xa[la.id+".radialaxis.range["+X+"]"]=pb);da.emit("plotly_relayouting",xa)}function ca(){null!==jb?g.call("_guiRelayout",da,la.id+".radialaxis.angle",
jb):null!==pb&&g.call("_guiRelayout",da,la.id+".radialaxis.range["+X+"]",pb)}function ia(xa,Ea){0!==X&&(jb=Math.atan2(qa-(nb+Ea),fb+xa-ma),la.vangles&&(jb=m(jb,la.vangles)),jb=O(jb),xa=d(ma,qa)+p(-jb),oa["radial-axis"].attr("transform",xa),oa["radial-line"].select("line").attr("transform",xa),xa=la.gd._fullLayout,la.updateRadialAxisTitle(xa,xa[la.id],jb))}function ja(xa,Ea){xa=n.dot([xa,-Ea],[Math.cos(ua),Math.sin(ua)]);pb=Ua-eb*xa;if(0<eb!==(X?pb>Ca:pb<Ma))pb=null;else{Ea=da._fullLayout;xa=Ea[la.id];
pa.range[X]=pb;pa._rl[X]=pb;la.updateRadialAxis(Ea,xa);la.xaxis.setRange();la.xaxis.setScale();la.yaxis.setRange();la.yaxis.setScale();Ea=!1;for(var Ia in la.traceHash){var Oa=la.traceHash[Ia],bb=n.filterVisible(Oa);Oa[0][0].trace._module.plot(da,la,bb,xa);g.traceIs(Ia,"gl")&&bb.length&&(Ea=!0)}Ea&&(J(da),L(da))}}var la=this,da=la.gd,oa=la.layers;U=la.radius;var sa=la.innerRadius,ma=la.cx,qa=la.cy,pa=la.radialAxis,na=H.radialDragBoxSize,ka=na/2;if(pa.visible){var ua=T(la.radialAxisAngle),va=pa._rl,
Ca=va[0],Ma=va[1],Ua=va[X],eb=.75*(va[1]-va[0])/(1-S.hole)/U;if(X){var fb=ma+(U+ka)*Math.cos(ua);var nb=qa-(U+ka)*Math.sin(ua);S="radialdrag"}else fb=ma+(sa-ka)*Math.cos(ua),nb=qa-(sa-ka)*Math.sin(ua),S="radialdrag-inner";S=B.makeRectDragger(oa,S,"crosshair",-ka,-ka,na,na);var cb={element:S,gd:da};l(a.select(S),pa.visible&&sa<U,{transform:d(fb,nb)});var $a,jb,pb;cb.prepFn=function(){pb=jb=$a=null;cb.moveFn=ba;cb.doneFn=ca;D(da)};cb.clampFn=function(xa,Ea){Math.sqrt(xa*xa+Ea*Ea)<H.MINDRAG&&(Ea=xa=
0);return[xa,Ea]};A.init(cb)}};b.updateAngularDrag=function(U){function S($a,jb){var pb=ca.gd._fullLayout,xa=pb[ca.id],Ea=O(Math.atan2(qa+pa-(Ua+jb*U._invScaleY),Ma+$a*U._invScaleX-ma-pa)-cb);fb=eb+Ea;ja.frontplot.attr("transform",d(ca.xOffset2,ca.yOffset2)+p([-Ea,ma,qa]));ca.vangles?(nb=ca.radialAxisAngle+Ea,$a=d(oa,sa)+p(-Ea),jb=d(oa,sa)+p(-nb),ja.bg.attr("transform",$a),ja["radial-grid"].attr("transform",$a),ja["radial-axis"].attr("transform",jb),ja["radial-line"].select("line").attr("transform",
jb),ca.updateRadialAxisTitle(pb,xa,nb)):ca.clipPaths.forTraces.select("path").attr("transform",d(ma,qa)+p(Ea));va.each(function(){var Oa=a.select(this),bb=f.getTranslate(Oa);Oa.attr("transform",d(bb.x,bb.y)+p([Ea]))});Ca.each(function(){var Oa=a.select(this),bb=Oa.select("text"),Xa=f.getTranslate(Oa);Oa.attr("transform",p([Ea,bb.attr("x"),bb.attr("y")])+d(Xa.x,Xa.y))});da.rotation=n.modHalf(fb,360);ca.updateAngularAxis(pb,xa);ca._hasClipOnAxisFalse&&!n.isFullCircle(ca.sectorInRad)&&ua.call(f.hideOutsideRangePoints,
ca);pb=!1;for(var Ia in ca.traceHash)g.traceIs(Ia,"gl")&&($a=ca.traceHash[Ia],jb=n.filterVisible($a),$a[0][0].trace._module.plot(ia,ca,jb,xa),jb.length&&(pb=!0));pb&&(J(ia),L(ia));xa={};X(xa);ia.emit("plotly_relayouting",xa)}function X($a){$a[ca.id+".angularaxis.rotation"]=fb;ca.vangles&&($a[ca.id+".radialaxis.angle"]=nb)}function ba(){Ca.select("text").attr("transform",null);var $a={};X($a);g.call("_guiRelayout",ia,$a)}var ca=this,ia=ca.gd,ja=ca.layers,la=ca.radius,da=ca.angularAxis,oa=ca.cx,sa=
ca.cy,ma=ca.cxx,qa=ca.cyy,pa=H.angularDragBoxSize,na=B.makeDragger(ja,"path","angulardrag","move"),ka={element:na,gd:ia};a.select(na).attr("d",ca.pathAnnulus(la,la+pa)).attr("transform",d(oa,sa)).call(G,"move");var ua=ja.frontplot.select(".scatterlayer").selectAll(".trace"),va=ua.selectAll(".point"),Ca=ua.selectAll(".textpoint"),Ma,Ua,eb,fb,nb,cb;ka.prepFn=function($a,jb,pb){eb=U[ca.id].angularaxis.rotation;$a=na.getBoundingClientRect();Ma=jb-$a.left;Ua=pb-$a.top;ia._fullLayout._calcInverseTransform(ia);
jb=n.apply3DTransform(U._invTransform)(Ma,Ua);Ma=jb[0];Ua=jb[1];cb=Math.atan2(qa+pa-Ua,Ma-ma-pa);ka.moveFn=S;ka.doneFn=ba;D(ia)};ca.vangles&&!n.isFullCircle(ca.sectorInRad)&&(ka.prepFn=n.noop,G(a.select(na),null));A.init(ka)};b.isPtInside=function(U){var S=this.sectorInRad,X=this.vangles,ba=this.angularAxis.c2g(U.theta),ca=this.radialAxis;U=ca.c2l(U.r);return(X?Q.isPtInsidePolygon:n.isPtInsideSector)(U,ba,ca._rl,S,X)};b.pathArc=function(U){var S=this.sectorInRad,X=this.vangles;return(X?Q.pathPolygon:
n.pathArc)(U,S[0],S[1],X)};b.pathSector=function(U){var S=this.sectorInRad,X=this.vangles;return(X?Q.pathPolygon:n.pathSector)(U,S[0],S[1],X)};b.pathAnnulus=function(U,S){var X=this.sectorInRad,ba=this.vangles;return(ba?Q.pathPolygonAnnulus:n.pathAnnulus)(U,S,X[0],X[1],ba)};b.pathSubplot=function(){var U=this.innerRadius,S=this.radius;return U?this.pathAnnulus(U,S):this.pathSector(S)};b.fillViewInitialKey=function(U,S){U in this.viewInitial||(this.viewInitial[U]=S)}},{"../../components/color":643,
"../../components/dragelement":662,"../../components/drawing":665,"../../components/fx":683,"../../components/titles":738,"../../constants/alignment":745,"../../lib":778,"../../lib/clear_gl_canvases":762,"../../lib/setcursor":799,"../../plot_api/subroutines":818,"../../plots/cartesian/axes":828,"../../registry":911,"../cartesian/autorange":827,"../cartesian/dragbox":836,"../cartesian/select":847,"../cartesian/set_convert":848,"../plots":891,"./constants":892,"./helpers":893,"./set_convert":904,d3:169,
tinycolor2:576}],904:[function(b,N,I){function r(g,n){var p=n._subplot;g.setGeometry=function(){var d=g._rl[0],e=g._rl[1],f=p.innerRadius,k=(p.radius-f)/(e-d),t=f/k,v=d>e?function(w){return 0>=w}:function(w){return 0<=w};g.c2g=function(w){w=g.c2l(w)-d;return(v(w)?w:0)+t};g.g2c=function(w){return g.l2c(w+d-t)};g.g2p=function(w){return w*k};g.c2p=function(w){return g.g2p(g.c2g(w))}}}function q(g,n){var p=g.type;if("linear"===p){var d=g.d2c,e=g.c2d;g.d2c=function(f,k){f=d(f);return"degrees"===k?a(f):
f};g.c2d=function(f,k){f="degrees"===k?h(f):f;return e(f)}}g.makeCalcdata=function(f,k){var t=f[k],v=f._length,w;if(t){if(m.isTypedArray(t)&&"linear"===p){if(v===t.length)return t;if(t.subarray)return t.subarray(0,v)}k=Array(v);for(w=0;w<v;w++)k[w]=g.d2c(t[w],f.thetaunit)}else for(w=k+"0",k="d"+k,t=(w in f)?g.d2c(f[w],f.thetaunit):0,f=f[k]?g.d2c(f[k],f.thetaunit):(g.period||2*Math.PI)/v,k=Array(v),w=0;w<v;w++)k[w]=t+w*f;return k};g.setGeometry=function(){var f=n.sector,k=f.map(a),t={clockwise:-1,
counterclockwise:1}[g.direction],v=a(g.rotation),w=function(C){return(C-v)/t},y;switch(p){case "linear":var B=y=m.identity;var A=a;var z=h;g.range=m.isFullCircle(k)?[f[0],f[0]+360]:k.map(w).map(h);break;case "category":f=g._categories.length;var E=g.period?Math.max(g.period,f):f;0===E&&(E=1);B=A=function(C){return 2*C*Math.PI/E};y=z=function(C){return C*E/Math.PI/2};g.range=[0,E]}g.c2g=function(C){return t*B(C)+v};g.g2c=function(C){return y(w(C))};g.t2g=function(C){return t*A(C)+v};g.g2t=function(C){return z(w(C))}}}
var m=b("../../lib"),l=b("../cartesian/set_convert"),a=m.deg2rad,h=m.rad2deg;N.exports=function(g,n,p){l(g,p);switch(g._id){case "x":case "radialaxis":r(g,n);break;case "angularaxis":q(g,n)}}},{"../../lib":778,"../cartesian/set_convert":848}],905:[function(b,N,I){var r=b("../lib"),q=b("../plot_api/plot_template"),m=b("./domain").defaults;N.exports=function(l,a,h,g){function n(A,z){return r.coerce(t,v,p,A,z)}var p=g.attributes;h=g.handleDefaults;for(var d=g.partition||"x",e=a._subplots[g.type],f=e.length,
k=f&&e[0].replace(/\d+$/,""),t,v,w=0;w<f;w++){var y=e[w];t=l[y]?l[y]:l[y]={};v=q.newContainer(a,y,k);n("uirevision",a.uirevision);var B={};B[d]=[w/f,(w+1)/f];m(v,a,n,B);g.id=y;h(t,v,n,g)}}},{"../lib":778,"../plot_api/plot_template":817,"./domain":855}],906:[function(b,N,I){function r(q){var m=q.description?" "+q.description:"";q=q.keys||[];if(0<q.length){m=[];for(var l=0;l<q.length;l++)m[l]="`"+q[l]+"`";m=1===q.length?"variable "+m[0]:"variables "+m.slice(0,-1).join(", ")+" and "+m.slice(-1)+"."}return m}
N=b("../constants/docs").FORMAT_LINK;b=b("../constants/docs").DATE_FORMAT_LINK;['Variables are inserted using %{variable}, for example "y: %{y}". Numbers are formatted using d3-format\'s syntax %{variable:d3-format}, for example "Price: %{y:$.2f}".',N,'for details on the formatting syntax. Dates are formatted using d3-time-format\'s syntax %{variable|d3-time-format}, for example "Day: %{2019-01-01|%A}".',b,"for details on the date formatting syntax."].join(" ");I.hovertemplateAttrs=function(q,m){q=
q||{};m=m||{};r(m);m={valType:"string",dflt:"",editType:q.editType||"none"};!1!==q.arrayOk&&(m.arrayOk=!0);return m};I.texttemplateAttrs=function(q,m){q=q||{};m=m||{};r(m);m={valType:"string",dflt:"",editType:q.editType||"calc"};!1!==q.arrayOk&&(m.arrayOk=!0);return m}},{"../constants/docs":748}],907:[function(b,N,I){var r=b("./ternary"),q=b("../../plots/get_data").getSubplotCalcData;N=b("../../lib").counterRegex;I.name="ternary";var m=I.attr="subplot";I.idRoot="ternary";I.idRegex=I.attrRegex=N("ternary");
(I.attributes={})[m]={valType:"subplotid",dflt:"ternary",editType:"calc"};I.layoutAttributes=b("./layout_attributes");I.supplyLayoutDefaults=b("./layout_defaults");I.plot=function(l){for(var a=l._fullLayout,h=l.calcdata,g=a._subplots.ternary,n=0;n<g.length;n++){var p=g[n],d=q(h,"ternary",p),e=a[p]._subplot;e||(e=new r({id:p,graphDiv:l,container:a._ternarylayer.node()},a),a[p]._subplot=e);e.plot(d,a,l._promises)}};I.clean=function(l,a,h,g){l=g._subplots.ternary||[];for(h=0;h<l.length;h++){var n=l[h],
p=g[n]._subplot;!a[n]&&p&&(p.plotContainer.remove(),p.clipDef.remove(),p.clipDefRelative.remove(),p.layers["a-title"].remove(),p.layers["b-title"].remove(),p.layers["c-title"].remove())}}},{"../../lib":778,"../../plots/get_data":865,"./layout_attributes":908,"./layout_defaults":909,"./ternary":910}],908:[function(b,N,I){I=b("../../components/color/attributes");var r=b("../domain").attributes,q=b("../cartesian/layout_attributes"),m=b("../../plot_api/edit_types").overrideAll;b=b("../../lib/extend").extendFlat;
b={title:{text:q.title.text,font:q.title.font},color:q.color,tickmode:q.tickmode,nticks:b({},q.nticks,{dflt:6,min:1}),tick0:q.tick0,dtick:q.dtick,tickvals:q.tickvals,ticktext:q.ticktext,ticks:q.ticks,ticklen:q.ticklen,tickwidth:q.tickwidth,tickcolor:q.tickcolor,showticklabels:q.showticklabels,showtickprefix:q.showtickprefix,tickprefix:q.tickprefix,showticksuffix:q.showticksuffix,ticksuffix:q.ticksuffix,showexponent:q.showexponent,exponentformat:q.exponentformat,minexponent:q.minexponent,separatethousands:q.separatethousands,
tickfont:q.tickfont,tickangle:q.tickangle,tickformat:q.tickformat,tickformatstops:q.tickformatstops,hoverformat:q.hoverformat,showline:b({},q.showline,{dflt:!0}),linecolor:q.linecolor,linewidth:q.linewidth,showgrid:b({},q.showgrid,{dflt:!0}),gridcolor:q.gridcolor,gridwidth:q.gridwidth,layer:q.layer,min:{valType:"number",dflt:0,min:0},_deprecated:{title:q._deprecated.title,titlefont:q._deprecated.titlefont}};N=N.exports=m({domain:r({name:"ternary"}),bgcolor:{valType:"color",dflt:I.background},sum:{valType:"number",
dflt:1,min:0},aaxis:b,baxis:b,caxis:b},"plot","from-root");N.uirevision={valType:"any",editType:"none"};N.aaxis.uirevision=N.baxis.uirevision=N.caxis.uirevision={valType:"any",editType:"none"}},{"../../components/color/attributes":642,"../../lib/extend":768,"../../plot_api/edit_types":810,"../cartesian/layout_attributes":842,"../domain":855}],909:[function(b,N,I){function r(k,t,v,w){var y=v("bgcolor");v=v("sum");w.bgColor=m.combine(y,w.paper_bgcolor);for(var B,A,z=0;z<f.length;z++)y=f[z],B=k[y]||
{},A=l.newContainer(t,y),A._name=y,q(B,A,w,t);w=t.aaxis;y=t.baxis;t=t.caxis;w.min+y.min+t.min>=v&&(w.min=0,y.min=0,t.min=0,k.aaxis&&delete k.aaxis.min,k.baxis&&delete k.baxis.min,k.caxis&&delete k.caxis.min)}function q(k,t,v,w){function y(u,D){return a.coerce(k,t,B,u,D)}var B=e[t._name];y("uirevision",w.uirevision);t.type="linear";w=y("color");var A=w!==B.color.dflt?w:v.font.color,z=t._name.charAt(0).toUpperCase(),E="Component "+z,C=y("title.text",E);t._hovertitle=C===E?C:z;a.coerceFont(y,"title.font",
{family:v.font.family,size:Math.round(1.2*v.font.size),color:A});y("min");p(k,t,y,"linear");g(k,t,y,"linear",{});n(k,t,y,{outerTicks:!0});y("showticklabels")&&(a.coerceFont(y,"tickfont",{family:v.font.family,size:v.font.size,color:A}),y("tickangle"),y("tickformat"));d(k,t,y,{dfltColor:w,bgColor:v.bgColor,blend:60,showLine:!0,showGrid:!0,noZeroLine:!0,attributes:B});y("hoverformat");y("layer")}var m=b("../../components/color"),l=b("../../plot_api/plot_template"),a=b("../../lib"),h=b("../subplot_defaults"),
g=b("../cartesian/tick_label_defaults"),n=b("../cartesian/tick_mark_defaults"),p=b("../cartesian/tick_value_defaults"),d=b("../cartesian/line_grid_defaults"),e=b("./layout_attributes"),f=["aaxis","baxis","caxis"];N.exports=function(k,t,v){h(k,t,v,{type:"ternary",attributes:e,handleDefaults:r,font:t.font,paper_bgcolor:t.paper_bgcolor})}},{"../../components/color":643,"../../lib":778,"../../plot_api/plot_template":817,"../cartesian/line_grid_defaults":844,"../cartesian/tick_label_defaults":849,"../cartesian/tick_mark_defaults":850,
"../cartesian/tick_value_defaults":851,"../subplot_defaults":905,"./layout_attributes":908}],910:[function(b,N,I){function r(Q,M){this.id=Q.id;this.graphDiv=Q.graphDiv;this.init(M);this.makeFramework(M);this.cTickLayout=this.bTickLayout=this.aTickLayout=null}function q(Q){m.select(Q).selectAll(".zoombox,.js-zoombox-backdrop,.js-zoombox-menu,.zoombox-corners").remove()}var m=b("d3"),l=b("tinycolor2"),a=b("../../registry"),h=b("../../lib"),g=h.strTranslate,n=h._,p=b("../../components/color"),d=b("../../components/drawing"),
e=b("../cartesian/set_convert"),f=b("../../lib/extend").extendFlat,k=b("../plots"),t=b("../cartesian/axes"),v=b("../../components/dragelement"),w=b("../../components/fx");I=b("../../components/dragelement/helpers");var y=I.freeMode,B=I.rectMode,A=b("../../components/titles"),z=b("../cartesian/select").prepSelect,E=b("../cartesian/select").selectOnClick,C=b("../cartesian/select").clearSelect,u=b("../cartesian/select").clearSelectionsCache,D=b("../cartesian/constants");N.exports=r;b=r.prototype;b.init=
function(Q){this.container=Q._ternarylayer;this.defs=Q._defs;this.layoutId=Q._uid;this.traceHash={};this.layers={}};b.plot=function(Q,M){var P=M[this.id];M=M._size;this._hasClipOnAxisFalse=!1;for(var T=0;T<Q.length;T++)if(!1===Q[T][0].trace.cliponaxis){this._hasClipOnAxisFalse=!0;break}this.updateLayers(P);this.adjustLayout(P,M);k.generalUpdatePerTraceModule(this.graphDiv,this,Q,P);this.layers.plotbg.select("path").call(p.fill,P.bgcolor)};b.makeFramework=function(Q){var M=this.graphDiv,P=Q[this.id],
T=this.clipId="clip"+this.layoutId+this.id,O=this.clipIdRelative="clip-relative"+this.layoutId+this.id;this.clipDef=h.ensureSingleById(Q._clips,"clipPath",T,function(U){U.append("path").attr("d","M0,0Z")});this.clipDefRelative=h.ensureSingleById(Q._clips,"clipPath",O,function(U){U.append("path").attr("d","M0,0Z")});this.plotContainer=h.ensureSingle(this.container,"g",this.id);this.updateLayers(P);d.setClipUrl(this.layers.backplot,T,M);d.setClipUrl(this.layers.grids,T,M)};b.updateLayers=function(Q){var M=
this.layers,P=["draglayer","plotbg","backplot","grids"];"below traces"===Q.aaxis.layer&&P.push("aaxis","aline");"below traces"===Q.baxis.layer&&P.push("baxis","bline");"below traces"===Q.caxis.layer&&P.push("caxis","cline");P.push("frontplot");"above traces"===Q.aaxis.layer&&P.push("aaxis","aline");"above traces"===Q.baxis.layer&&P.push("baxis","bline");"above traces"===Q.caxis.layer&&P.push("caxis","cline");Q=this.plotContainer.selectAll("g.toplevel").data(P,String);var T=["agrid","bgrid","cgrid"];
Q.enter().append("g").attr("class",function(O){return"toplevel "+O}).each(function(O){var U=m.select(this);M[O]=U;"frontplot"===O?U.append("g").classed("scatterlayer",!0):"backplot"===O?U.append("g").classed("maplayer",!0):"plotbg"===O?U.append("path").attr("d","M0,0Z"):"aline"===O||"bline"===O||"cline"===O?U.append("path"):"grids"===O&&T.forEach(function(S){M[S]=U.append("g").classed("grid "+S,!0)})});Q.order()};var G=Math.sqrt(4/3);b.adjustLayout=function(Q,M){var P=this,T=Q.domain,O=(T.x[0]+T.x[1])/
2,U=(T.y[0]+T.y[1])/2,S=T.x[1]-T.x[0],X=T.y[1]-T.y[0],ba=S*M.w,ca=X*M.h,ia=Q.sum,ja=Q.aaxis.min,la=Q.baxis.min,da=Q.caxis.min;if(ba>G*ca){var oa=ca;T=oa*G}else T=ba,oa=T/G;ba=S*T/ba;X=X*oa/ca;S=M.l+M.w*O-T/2;M=M.t+M.h*(1-U)-oa/2;P.x0=S;P.y0=M;P.w=T;P.h=oa;P.sum=ia;P.xaxis={type:"linear",range:[ja+2*da-ia,ia-ja-2*la],domain:[O-ba/2,O+ba/2],_id:"x"};e(P.xaxis,P.graphDiv._fullLayout);P.xaxis.setScale();P.xaxis.isPtWithinRange=function(sa){return sa.a>=P.aaxis.range[0]&&sa.a<=P.aaxis.range[1]&&sa.b>=
P.baxis.range[1]&&sa.b<=P.baxis.range[0]&&sa.c>=P.caxis.range[1]&&sa.c<=P.caxis.range[0]};P.yaxis={type:"linear",range:[ja,ia-la-da],domain:[U-X/2,U+X/2],_id:"y"};e(P.yaxis,P.graphDiv._fullLayout);P.yaxis.setScale();P.yaxis.isPtWithinRange=function(){return!0};ba=P.yaxis.domain[0];O=P.aaxis=f({},Q.aaxis,{range:[ja,ia-la-da],side:"left",tickangle:(+Q.aaxis.tickangle||0)-30,domain:[ba,ba+X*G],anchor:"free",position:0,_id:"y",_length:T});e(O,P.graphDiv._fullLayout);O.setScale();U=P.baxis=f({},Q.baxis,
{range:[ia-ja-da,la],side:"bottom",domain:P.xaxis.domain,anchor:"free",position:0,_id:"x",_length:T});e(U,P.graphDiv._fullLayout);U.setScale();Q=P.caxis=f({},Q.caxis,{range:[ia-ja-la,da],side:"right",tickangle:(+Q.caxis.tickangle||0)+30,domain:[ba,ba+X*G],anchor:"free",position:0,_id:"y",_length:T});e(Q,P.graphDiv._fullLayout);Q.setScale();ia="M"+S+","+(M+oa)+"h"+T+"l-"+T/2+",-"+oa+"Z";P.clipDef.select("path").attr("d",ia);P.layers.plotbg.select("path").attr("d",ia);ia="M0,"+oa+"h"+T+"l-"+T/2+",-"+
oa+"Z";P.clipDefRelative.select("path").attr("d",ia);ia=g(S,M);P.plotContainer.selectAll(".scatterlayer,.maplayer").attr("transform",ia);P.clipDefRelative.select("path").attr("transform",null);ia=g(S-U._offset,M+oa);P.layers.baxis.attr("transform",ia);P.layers.bgrid.attr("transform",ia);ia=g(S+T/2,M)+"rotate(30)"+g(0,-O._offset);P.layers.aaxis.attr("transform",ia);P.layers.agrid.attr("transform",ia);ia=g(S+T/2,M)+"rotate(-30)"+g(0,-Q._offset);P.layers.caxis.attr("transform",ia);P.layers.cgrid.attr("transform",
ia);P.drawAxes(!0);P.layers.aline.select("path").attr("d",O.showline?"M"+S+","+(M+oa)+"l"+T/2+",-"+oa:"M0,0").call(p.stroke,O.linecolor||"#000").style("stroke-width",(O.linewidth||0)+"px");P.layers.bline.select("path").attr("d",U.showline?"M"+S+","+(M+oa)+"h"+T:"M0,0").call(p.stroke,U.linecolor||"#000").style("stroke-width",(U.linewidth||0)+"px");P.layers.cline.select("path").attr("d",Q.showline?"M"+(S+T/2)+","+M+"l"+T/2+","+oa:"M0,0").call(p.stroke,Q.linecolor||"#000").style("stroke-width",(Q.linewidth||
0)+"px");P.graphDiv._context.staticPlot||P.initInteractions();d.setClipUrl(P.layers.frontplot,P._hasClipOnAxisFalse?null:P.clipId,P.graphDiv)};b.drawAxes=function(Q){var M=this.graphDiv,P=this.id.substr(7)+"title",T=this.layers,O=this.aaxis,U=this.baxis,S=this.caxis;this.drawAx(O);this.drawAx(U);this.drawAx(S);if(Q){Q=Math.max(O.showticklabels?O.tickfont.size/2:0,(S.showticklabels?.75*S.tickfont.size:0)+("outside"===S.ticks?.87*S.ticklen:0));var X=(U.showticklabels?U.tickfont.size:0)+("outside"===
U.ticks?U.ticklen:0)+3;T["a-title"]=A.draw(M,"a"+P,{propContainer:O,propName:this.id+".aaxis.title",placeholder:n(M,"Click to enter Component A title"),attributes:{x:this.x0+this.w/2,y:this.y0-O.title.font.size/3-Q,"text-anchor":"middle"}});T["b-title"]=A.draw(M,"b"+P,{propContainer:U,propName:this.id+".baxis.title",placeholder:n(M,"Click to enter Component B title"),attributes:{x:this.x0-X,y:this.y0+this.h+.83*U.title.font.size+X,"text-anchor":"middle"}});T["c-title"]=A.draw(M,"c"+P,{propContainer:S,
propName:this.id+".caxis.title",placeholder:n(M,"Click to enter Component C title"),attributes:{x:this.x0+this.w+X,y:this.y0+this.h+.83*S.title.font.size+X,"text-anchor":"middle"}})}};b.drawAx=function(Q){var M=this.graphDiv,P=Q._name,T=P.charAt(0),O=Q._id;P=this.layers[P];var U=T+"tickLayout",S=Q.ticks+String(Q.ticklen)+String(Q.showticklabels);this[U]!==S&&(P.selectAll("."+O+"tick").remove(),this[U]=S);Q.setScale();O=t.calcTicks(Q);U=t.clipEnds(Q,O);S=t.makeTransTickFn(Q);var X=t.getTickSigns(Q)[2],
ba=h.deg2rad(30),ca=X*(Q.linewidth||1)/2;X*=Q.ticklen;var ia=this.w,ja=this.h;ia={a:"M0,0l"+ja+",-"+ia/2,b:"M0,0l-"+ia/2+",-"+ja,c:"M0,0l-"+ja+","+ia/2}[T];t.drawTicks(M,Q,{vals:"inside"===Q.ticks?U:O,layer:P,path:"b"===T?"M0,"+ca+"l"+Math.sin(ba)*X+","+Math.cos(ba)*X:"M"+ca+",0l"+Math.cos(ba)*X+","+-Math.sin(ba)*X,transFn:S,crisp:!1});t.drawGrid(M,Q,{vals:U,layer:this.layers[T+"grid"],path:ia,transFn:S,crisp:!1});t.drawLabels(M,Q,{vals:O,layer:P,transFn:S,labelFns:t.makeLabelFns(Q,0,30)})};N=D.MINZOOM/
2+.87;var J="m-0.87,.5h"+N+"v3h-"+(N+5.2)+"l"+(N/2+2.6)+",-"+(.87*N+4.5)+"l2.6,1.5l-"+N/2+","+.87*N+"Z",L="m0.87,.5h-"+N+"v3h"+(N+5.2)+"l-"+(N/2+2.6)+",-"+(.87*N+4.5)+"l-2.6,1.5l"+N/2+","+.87*N+"Z",K="m0,1l"+N/2+","+.87*N+"l2.6,-1.5l-"+(N/2+2.6)+",-"+(.87*N+4.5)+"l-"+(N/2+2.6)+","+(.87*N+4.5)+"l2.6,1.5l"+N/2+",-"+.87*N+"Z",H=!0;b.clearSelect=function(){u(this.dragOptions);C(this.dragOptions.gd)};b.initInteractions=function(){function Q(va){var Ca={};Ca[S.id+".aaxis.min"]=va.a;Ca[S.id+".baxis.min"]=
va.b;Ca[S.id+".caxis.min"]=va.c;return Ca}function M(va,Ca){var Ma=ba._fullLayout.clickmode;q(ba);2===va&&(ba.emit("plotly_doubleclick",null),a.call("_guiRelayout",ba,Q({a:0,b:0,c:0})));-1<Ma.indexOf("select")&&1===va&&E(Ca,ba,[S.xaxis],[S.yaxis],S.id,S.dragOptions);-1<Ma.indexOf("event")&&w.click(ba,Ca,S.id)}function P(va,Ca){var Ma=la+va*ia,Ua=da+Ca*ja;Ca=Math.max(0,Math.min(1,1-da/S.h,1-Ua/S.h));va=Math.max(0,Math.min(1,1-(la+(S.h-da)/Math.sqrt(3))/S.w,1-(Ma+(S.h-Ua)/Math.sqrt(3))/S.w));Ma=Math.max(0,
Math.min(1,(la-(S.h-da)/Math.sqrt(3))/S.w,(Ma-(S.h-Ua)/Math.sqrt(3))/S.w));Ua=(Ca/2+Ma)*S.w;var eb=(1-Ca/2-va)*S.w,fb=(Ua+eb)/2,nb=eb-Ua,cb=(1-Ca)*S.h,$a=cb-nb/G;nb<D.MINZOOM?(ma=oa,ka.attr("d",pa),ua.attr("d","M0,0Z")):(ma={a:oa.a+Ca*sa,b:oa.b+va*sa,c:oa.c+Ma*sa},ka.attr("d",pa+"M"+Ua+","+cb+"H"+eb+"L"+fb+","+$a+"L"+Ua+","+cb+"Z"),ua.attr("d","M"+la+","+da+"m0.5,0.5h5v-2h-5v-5h-2v5h-5v2h5v5h2ZM"+Ua+","+cb+J+"M"+eb+","+cb+L+"M"+fb+","+$a+K));na||(ka.transition().style("fill",.2<qa?"rgba(0,0,0,0.4)":
"rgba(255,255,255,0.3)").duration(200),ua.transition().style("opacity",1).duration(200),na=!0);ba.emit("plotly_relayouting",Q(ma))}function T(){q(ba);ma!==oa&&(a.call("_guiRelayout",ba,Q(ma)),H&&ba.data&&ba._context.showTips&&(h.notifier(n(ba,"Double-click to zoom back out"),"long"),H=!1))}function O(va,Ca){var Ma=va/S.xaxis._m,Ua=Ca/S.yaxis._m;ma={a:oa.a-Ua,b:oa.b+(Ma+Ua)/2,c:oa.c-(Ma-Ua)/2};Ma=[ma.a,ma.b,ma.c].sort(h.sorterAsc);Ua=Ma.indexOf(ma.a);var eb=Ma.indexOf(ma.b),fb=Ma.indexOf(ma.c);0>Ma[0]&&
(0>Ma[1]+Ma[0]/2?(Ma[2]+=Ma[0]+Ma[1],Ma[0]=Ma[1]=0):(Ma[2]+=Ma[0]/2,Ma[1]+=Ma[0]/2,Ma[0]=0),ma={a:Ma[Ua],b:Ma[eb],c:Ma[fb]},Ca=(oa.a-ma.a)*S.yaxis._m,va=(oa.c-ma.c-oa.b+ma.b)*S.xaxis._m);Ma=g(S.x0+va,S.y0+Ca);S.plotContainer.selectAll(".scatterlayer,.maplayer").attr("transform",Ma);va=g(-va,-Ca);S.clipDefRelative.select("path").attr("transform",va);S.aaxis.range=[ma.a,S.sum-ma.b-ma.c];S.baxis.range=[S.sum-ma.a-ma.c,ma.b];S.caxis.range=[S.sum-ma.a-ma.b,ma.c];S.drawAxes(!1);S._hasClipOnAxisFalse&&S.plotContainer.select(".scatterlayer").selectAll(".trace").call(d.hideOutsideRangePoints,
S);ba.emit("plotly_relayouting",Q(ma))}function U(){a.call("_guiRelayout",ba,Q(ma))}var S=this,X=S.layers.plotbg.select("path").node(),ba=S.graphDiv,ca=ba._fullLayout._zoomlayer,ia,ja;this.dragOptions={element:X,gd:ba,plotinfo:{id:S.id,domain:ba._fullLayout[S.id].domain,xaxis:S.xaxis,yaxis:S.yaxis},subplot:S.id,prepFn:function(va,Ca,Ma){S.dragOptions.xaxes=[S.xaxis];S.dragOptions.yaxes=[S.yaxis];ia=ba._fullLayout._invScaleX;ja=ba._fullLayout._invScaleY;var Ua=S.dragOptions.dragmode=ba._fullLayout.dragmode;
y(Ua)?S.dragOptions.minDrag=1:S.dragOptions.minDrag=void 0;"zoom"===Ua?(S.dragOptions.moveFn=P,S.dragOptions.clickFn=M,S.dragOptions.doneFn=T,va=X.getBoundingClientRect(),la=Ca-va.left,da=Ma-va.top,ba._fullLayout._calcInverseTransform(ba),Ca=h.apply3DTransform(ba._fullLayout._invTransform)(la,da),la=Ca[0],da=Ca[1],ma=oa={a:S.aaxis.range[0],b:S.baxis.range[1],c:S.caxis.range[1]},sa=S.aaxis.range[1]-oa.a,qa=l(S.graphDiv._fullLayout[S.id].bgcolor).getLuminance(),pa="M0,"+S.h+"L"+S.w/2+", 0L"+S.w+","+
S.h+"Z",na=!1,ka=ca.append("path").attr("class","zoombox").attr("transform",g(S.x0,S.y0)).style({fill:.2<qa?"rgba(0,0,0,0)":"rgba(255,255,255,0)","stroke-width":0}).attr("d",pa),ua=ca.append("path").attr("class","zoombox-corners").attr("transform",g(S.x0,S.y0)).style({fill:p.background,stroke:p.defaultLine,"stroke-width":1,opacity:0}).attr("d","M0,0Z"),S.clearSelect(ba)):"pan"===Ua?(S.dragOptions.moveFn=O,S.dragOptions.clickFn=M,S.dragOptions.doneFn=U,ma=oa={a:S.aaxis.range[0],b:S.baxis.range[1],
c:S.caxis.range[1]},S.clearSelect(ba)):(B(Ua)||y(Ua))&&z(va,Ca,Ma,S.dragOptions,Ua)}};var la,da,oa,sa,ma,qa,pa,na,ka,ua;X.onmousemove=function(va){w.hover(ba,va,S.id);ba._fullLayout._lasthover=X;ba._fullLayout._hoversubplot=S.id};X.onmouseout=function(va){ba._dragging||v.unhover(ba,va)};v.init(this.dragOptions)}},{"../../components/color":643,"../../components/dragelement":662,"../../components/dragelement/helpers":661,"../../components/drawing":665,"../../components/fx":683,"../../components/titles":738,
"../../lib":778,"../../lib/extend":768,"../../registry":911,"../cartesian/axes":828,"../cartesian/constants":834,"../cartesian/select":847,"../cartesian/set_convert":848,"../plots":891,d3:169,tinycolor2:576}],911:[function(b,N,I){function r(v){if(v.layoutAttributes&&(v=v.layoutAttributes._arrayAttrRegexps))for(var w=0;w<v.length;w++)n(I.layoutArrayRegexes,v[w])}function q(v,w){(v=I.componentsRegistry[v].schema)&&v.traces&&(v=v.traces[w])&&t(I.modules[w]._module.attributes,v)}function m(v,w){(v=I.componentsRegistry[v].schema)&&
v.transforms&&(v=v.transforms[w])&&t(I.transformsRegistry[w].attributes,v)}function l(v,w){if((v=I.componentsRegistry[v].schema)&&v.subplots){var y=I.subplotsRegistry[w];w=y.layoutAttributes;y="subplot"===y.attr?y.name:y.attr;Array.isArray(y)&&(y=y[0]);v=v.subplots[y];w&&v&&t(w,v)}}function a(v){"object"===typeof v&&(v=v.type);return v}var h=b("./lib/loggers"),g=b("./lib/noop"),n=b("./lib/push_unique"),p=b("./lib/is_plain_object"),d=b("./lib/dom").addStyleRule;N=b("./lib/extend");var e=b("./plots/attributes"),
f=b("./plots/layout_attributes"),k=N.extendFlat,t=N.extendDeepAll;I.modules={};I.allCategories={};I.allTypes=[];I.subplotsRegistry={};I.transformsRegistry={};I.componentsRegistry={};I.layoutArrayContainers=[];I.layoutArrayRegexes=[];I.traceLayoutAttributes={};I.localeRegistry={};I.apiMethodRegistry={};I.collectableSubplotTypes=null;I.register=function(v){I.collectableSubplotTypes=null;if(v)v&&!Array.isArray(v)&&(v=[v]);else throw Error("No argument passed to Plotly.register.");for(var w=0;w<v.length;w++){var y=
v[w];if(!y)throw Error("Invalid module was attempted to be registered!");switch(y.moduleType){case "trace":var B=void 0,A=void 0,z=y.name,E=y.categories,C=y.meta;if(I.modules[z])h.log("Type "+z+" already registered");else{if(!I.subplotsRegistry[y.basePlotModule.name]){var u=void 0,D=y.basePlotModule,G=D.name;if(I.subplotsRegistry[G])h.log("Plot type "+G+" already registered.");else for(u in r(D),I.subplotsRegistry[G]=D,I.componentsRegistry)l(u,D.name)}u={};for(D=0;D<E.length;D++)u[E[D]]=!0,I.allCategories[E[D]]=
!0;I.modules[z]={_module:y,categories:u};C&&Object.keys(C).length&&(I.modules[z].meta=C);I.allTypes.push(z);for(A in I.componentsRegistry)q(A,z);y.layoutAttributes&&k(I.traceLayoutAttributes,y.layoutAttributes);y=y.basePlotModule;A=y.name;if("mapbox"===A)for(B in y=y.constants.styleRules,y)d(".js-plotly-plot .plotly .mapboxgl-"+B,y[B]);"geo"!==A&&"mapbox"!==A||void 0!==window.PlotlyGeoAssets||(window.PlotlyGeoAssets={topojson:{}})}break;case "transform":B=void 0;A=y;if("string"!==typeof A.name)throw Error("Transform module *name* must be a string.");
y="Transform module "+A.name;z="function"===typeof A.transform;E="function"===typeof A.calcTransform;if(!z&&!E)throw Error(y+" is missing a *transform* or *calcTransform* method.");z&&E&&h.log([y+" has both a *transform* and *calcTransform* methods.","Please note that all *transform* methods are executed before all *calcTransform* methods."].join(" "));p(A.attributes)||h.log(y+" registered without an *attributes* object.");"function"!==typeof A.supplyDefaults&&h.log(y+" registered without a *supplyDefaults* method.");
I.transformsRegistry[A.name]=A;for(B in I.componentsRegistry)m(B,A.name);break;case "component":z=A=B=void 0;if("string"!==typeof y.name)throw Error("Component module *name* must be a string.");E=y.name;I.componentsRegistry[E]=y;y.layoutAttributes&&(y.layoutAttributes._isLinkedToArray&&n(I.layoutArrayContainers,E),r(y));for(z in I.modules)q(E,z);for(A in I.subplotsRegistry)l(E,A);for(B in I.transformsRegistry)m(E,B);y.schema&&y.schema.layout&&t(f,y.schema.layout);break;case "locale":z=y;y=z.name;
B=y.split("-")[0];A=z.dictionary;z=z.format;E=A&&Object.keys(A).length;C=z&&Object.keys(z).length;u=I.localeRegistry;(D=u[y])||(u[y]=D={});B!==y&&((y=u[B])||(u[B]=y={}),E&&y.dictionary===D.dictionary&&(y.dictionary=A),C&&y.format===D.format&&(y.format=z));E&&(D.dictionary=A);C&&(D.format=z);break;case "apiMethod":I.apiMethodRegistry[y.name]=y.fn;break;default:throw Error("Invalid module was attempted to be registered!");}}};I.getModule=function(v){return(v=I.modules[a(v)])?v._module:!1};I.traceIs=
function(v,w){v=a(v);if("various"===v)return!1;var y=I.modules[v];y||(v&&"area"!==v&&h.log("Unrecognized trace type "+v+"."),y=I.modules[e.type.dflt]);return!!y.categories[w]};I.getTransformIndices=function(v,w){var y=[];v=v.transforms||[];for(var B=0;B<v.length;B++)v[B].type===w&&y.push(B);return y};I.hasTransform=function(v,w){v=v.transforms||[];for(var y=0;y<v.length;y++)if(v[y].type===w)return!0;return!1};I.getComponentMethod=function(v,w){return(v=I.componentsRegistry[v])?v[w]||g:g};I.call=function(){var v=
arguments[0],w=[].slice.call(arguments,1);return I.apiMethodRegistry[v].apply(null,w)}},{"./lib/dom":766,"./lib/extend":768,"./lib/is_plain_object":779,"./lib/loggers":782,"./lib/noop":787,"./lib/push_unique":793,"./plots/attributes":824,"./plots/layout_attributes":882}],912:[function(b,N,I){function r(a){switch(a){case "themes__thumb":a={autosize:!0,width:150,height:150,title:{text:""},showlegend:!1,margin:{l:5,r:5,t:5,b:5,pad:0},annotations:[]};break;case "thumbnail":a={title:{text:""},hidesources:!0,
showlegend:!1,borderwidth:0,bordercolor:"",margin:{l:1,r:1,t:1,b:1,pad:0},annotations:[]};break;default:a={}}return a}var q=b("../registry");b=b("../lib");var m=b.extendFlat,l=b.extendDeep;N.exports=function(a,h){a.framework&&a.framework.isPolar&&(a=a.framework.getConfig());var g,n=a.layout,p=l([],a.data);n=l({},n,r(h.tileClass));a=a._context||{};h.width&&(n.width=h.width);h.height&&(n.height=h.height);if("thumbnail"===h.tileClass||"themes__thumb"===h.tileClass){n.annotations=[];var d=Object.keys(n);
for(g=0;g<d.length;g++)-1<["xaxis","yaxis","zaxis"].indexOf(d[g].slice(0,5))&&(n[d[g]].title={text:""});for(g=0;g<p.length;g++)d=p[g],d.showscale=!1,d.marker&&(d.marker.showscale=!1),q.traceIs(d,"pie-like")&&(d.textposition="none")}if(Array.isArray(h.annotations))for(g=0;g<h.annotations.length;g++)n.annotations.push(h.annotations[g]);d=Object.keys(n).filter(function(k){return k.match(/^scene\d*$/)});if(d.length){var e={};"thumbnail"===h.tileClass&&(e={title:{text:""},showaxeslabels:!1,showticklabels:!1,
linetickenable:!1});for(g=0;g<d.length;g++){var f=n[d[g]];f.xaxis||(f.xaxis={});f.yaxis||(f.yaxis={});f.zaxis||(f.zaxis={});m(f.xaxis,e);m(f.yaxis,e);m(f.zaxis,e);f._scene=null}}g=document.createElement("div");h.tileClass&&(g.className=h.tileClass);p={gd:g,td:g,layout:n,data:p,config:{staticPlot:void 0===h.staticPlot?!0:h.staticPlot,plotGlPixelRatio:void 0===h.plotGlPixelRatio?2:h.plotGlPixelRatio,displaylogo:h.displaylogo||!1,showLink:h.showLink||!1,showTips:h.showTips||!1,mapboxAccessToken:a.mapboxAccessToken}};
"transparent"!==h.setBackground&&(p.config.setBackground=h.setBackground||"opaque");p.gd.defaultLayout=r(h.tileClass);return p}},{"../lib":778,"../registry":911}],913:[function(b,N,I){var r=b("../lib"),q=b("../plot_api/to_image"),m=b("./filesaver"),l=b("./helpers");N.exports=function(a,h){var g;r.isPlainObject(a)||(g=r.getGraphDiv(a));h=h||{};h.format=h.format||"png";h.width=h.width||null;h.height=h.height||null;h.imageDataOnly=!0;return new Promise(function(n,p){g&&g._snapshotInProgress&&p(Error("Snapshotting already in progress."));
r.isIE()&&"svg"!==h.format&&p(Error(l.MSG_IE_BAD_FORMAT));g&&(g._snapshotInProgress=!0);var d=q(a,h),e=h.filename||a.fn||"newplot";e+="."+h.format.replace("-",".");d.then(function(f){g&&(g._snapshotInProgress=!1);return m(f,e,h.format)}).then(function(f){n(f)}).catch(function(f){g&&(g._snapshotInProgress=!1);p(f)})})}},{"../lib":778,"../plot_api/to_image":820,"./filesaver":914,"./helpers":915}],914:[function(b,N,I){var r=b("../lib"),q=b("./helpers");N.exports=function(m,l,a){var h=document.createElement("a"),
g="download"in h;return new Promise(function(n,p){r.isIE9orBelow()&&p(Error("IE \x3c 10 unsupported"));if(r.isSafari())return q.octetStream(("svg"===a?",":";base64,")+encodeURIComponent(m)),n(l);if(r.isIE())return p=q.createBlob(m,"svg"),window.navigator.msSaveBlob(p,l),n(l);if(g)return p=q.createBlob(m,a),p=q.createObjectURL(p),h.href=p,h.download=l,document.body.appendChild(h),h.click(),document.body.removeChild(h),q.revokeObjectURL(p),n(l);p(Error("download error"))})}},{"../lib":778,"./helpers":915}],
915:[function(b,N,I){var r=b("../registry");I.getDelay=function(m){return m._has?m._has("gl3d")||m._has("gl2d")||m._has("mapbox")?500:0:0};I.getRedrawFunc=function(m){return function(){var l=m._fullLayout||{};(l._has&&l._has("polar")||!m.data||!m.data[0]||!m.data[0].r)&&r.getComponentMethod("colorbar","draw")(m)}};I.encodeSVG=function(m){return"data:image/svg+xml,"+encodeURIComponent(m)};I.encodeJSON=function(m){return"data:application/json,"+encodeURIComponent(m)};var q=window.URL||window.webkitURL;
I.createObjectURL=function(m){return q.createObjectURL(m)};I.revokeObjectURL=function(m){return q.revokeObjectURL(m)};I.createBlob=function(m,l){if("svg"===l)return new window.Blob([m],{type:"image/svg+xml;charset\x3dutf-8"});if("full-json"===l)return new window.Blob([m],{type:"application/json;charset\x3dutf-8"});m=window.atob(m);for(var a=m.length,h=new ArrayBuffer(a),g=new Uint8Array(h),n=0;n<a;n++)g[n]=m.charCodeAt(n);return new window.Blob([h],{type:"image/"+l})};I.octetStream=function(m){document.location.href=
"data:application/octet-stream"+m};I.IMAGE_URL_PREFIX=/^data:image\/\w+;base64,/;I.MSG_IE_BAD_FORMAT="Sorry IE does not support downloading from canvas. Try {format:'svg'} instead."},{"../registry":911}],916:[function(b,N,I){I=b("./helpers");b={getDelay:I.getDelay,getRedrawFunc:I.getRedrawFunc,clone:b("./cloneplot"),toSVG:b("./tosvg"),svgToImg:b("./svgtoimg"),toImage:b("./toimage"),downloadImage:b("./download")};N.exports=b},{"./cloneplot":912,"./download":913,"./helpers":915,"./svgtoimg":917,"./toimage":918,
"./tosvg":919}],917:[function(b,N,I){var r=b("../lib"),q=b("events").EventEmitter,m=b("./helpers");N.exports=function(l){var a=l.emitter||new q,h=new Promise(function(g,n){var p=window.Image,d=l.svg,e=l.format||"png";if(r.isIE()&&"svg"!==e)return p=Error(m.MSG_IE_BAD_FORMAT),n(p),l.promise?h:a.emit("error",p);var f=l.canvas,k=l.scale||1,t=k*(l.width||300),v=k*(l.height||150),w=f.getContext("2d"),y=new p;if("svg"===e||r.isIE9orBelow()||r.isSafari())var B=m.encodeSVG(d);else{var A=m.createBlob(d,"svg");
B=m.createObjectURL(A)}f.width=t;f.height=v;y.onload=function(){A=null;m.revokeObjectURL(B);"svg"!==e&&w.drawImage(y,0,0,t,v);switch(e){case "jpeg":var z=f.toDataURL("image/jpeg");break;case "png":z=f.toDataURL("image/png");break;case "webp":z=f.toDataURL("image/webp");break;case "svg":z=B;break;default:if(n(Error("Image format is not jpeg, png, svg or webp.")),!l.promise)return a.emit("error","Image format is not jpeg, png, svg or webp.")}g(z);l.promise||a.emit("success",z)};y.onerror=function(z){A=
null;m.revokeObjectURL(B);n(z);if(!l.promise)return a.emit("error",z)};y.src=B});return l.promise?h:a}},{"../lib":778,"./helpers":915,events:110}],918:[function(b,N,I){var r=b("events").EventEmitter,q=b("../registry"),m=b("../lib"),l=b("./helpers"),a=b("./cloneplot"),h=b("./tosvg"),g=b("./svgtoimg");N.exports=function(n,p){var d=new r;n=a(n,{format:"png"});var e=n.gd;e.style.position="absolute";e.style.left="-5000px";document.body.appendChild(e);var f=l.getRedrawFunc(e);q.call("plot",e,n.data,n.layout,
n.config).then(f).then(function(){var k=l.getDelay(e._fullLayout);setTimeout(function(){var t=h(e),v=document.createElement("canvas");v.id=m.randstr();d=g({format:p.format,width:e._fullLayout.width,height:e._fullLayout.height,canvas:v,emitter:d,svg:t});d.clean=function(){e&&document.body.removeChild(e)}},k)}).catch(function(k){d.emit("error",k)});return d}},{"../lib":778,"../registry":911,"./cloneplot":912,"./helpers":915,"./svgtoimg":917,"./tosvg":919,events:110}],919:[function(b,N,I){function r(p){var d=
q.select("body").append("div").style({display:"none"}).html("");p=p.replace(/(&[^;]*;)/gi,function(e){return"\x26lt;"===e?"\x26#60;":"\x26rt;"===e?"\x26#62;":-1!==e.indexOf("\x3c")||-1!==e.indexOf("\x3e")?"":d.html(e).text()});d.remove();return p}var q=b("d3"),m=b("../lib"),l=b("../components/drawing"),a=b("../components/color"),h=b("../constants/xmlns_namespaces"),g=/"/g,n=/("TOBESTRIPPED)|(TOBESTRIPPED")/g;N.exports=function(p,d,e){var f=p._fullLayout,k=f._paper,t=f._toppaper,v=f.width,w=f.height,
y;k.insert("rect",":first-child").call(l.setRect,0,0,v,w).call(a.fill,f.paper_bgcolor);var B=f._basePlotModules||[];for(y=0;y<B.length;y++){var A=B[y];A.toSVG&&A.toSVG(p)}if(t)for(y=t.node().childNodes,p=Array.prototype.slice.call(y),y=0;y<p.length;y++)t=p[y],t.childNodes.length&&k.node().appendChild(t);f._draggers&&f._draggers.remove();k.node().style.background="";k.selectAll("text").attr({"data-unformatted":null,"data-math":null}).each(function(){var E=q.select(this);if("hidden"===this.style.visibility||
"none"===this.style.display)E.remove();else{E.style({visibility:null,display:null});var C=this.style.fontFamily;C&&-1!==C.indexOf('"')&&E.style("font-family",C.replace(g,"TOBESTRIPPED"))}});if(f._gradientUrlQueryParts){y=[];for(var z in f._gradientUrlQueryParts)y.push(z);y.length&&k.selectAll(y.join(",")).each(function(){var E=q.select(this),C=this.style.fill;C&&-1!==C.indexOf("url(")&&E.style("fill",C.replace(g,"TOBESTRIPPED"));(C=this.style.stroke)&&-1!==C.indexOf("url(")&&E.style("stroke",C.replace(g,
"TOBESTRIPPED"))})}"pdf"!==d&&"eps"!==d||k.selectAll("#MathJax_SVG_glyphs path").attr("stroke-width",0);k.node().setAttributeNS(h.xmlns,"xmlns",h.svg);k.node().setAttributeNS(h.xmlns,"xmlns:xlink",h.xlink);"svg"===d&&e&&(k.attr("width",e*v),k.attr("height",e*w),k.attr("viewBox","0 0 "+v+" "+w));d=(new window.XMLSerializer).serializeToString(k.node());d=r(d);d=d.replace(/&(?!\w+;|#[0-9]+;| #x[0-9A-F]+;)/g,"\x26amp;");d=d.replace(n,"'");m.isIE()&&(d=d.replace(/"/gi,"'"),d=d.replace(/(\('#)([^']*)('\))/gi,
'("#$2")'),d=d.replace(/(\\')/gi,'"'));return d}},{"../components/color":643,"../components/drawing":665,"../constants/xmlns_namespaces":754,"../lib":778,d3:169}],920:[function(b,N,I){var r=b("../../lib");N.exports=function(q,m){for(var l=0;l<q.length;l++)q[l].i=l;r.mergeArray(m.text,q,"tx");r.mergeArray(m.hovertext,q,"htx");if(m=m.marker)if(r.mergeArray(m.opacity,q,"mo",!0),r.mergeArray(m.color,q,"mc"),m=m.line)r.mergeArray(m.color,q,"mlc"),r.mergeArrayCastPositive(m.width,q,"mlw")}},{"../../lib":778}],
921:[function(b,N,I){I=b("../scatter/attributes");var r=b("../../plots/template_attributes").hovertemplateAttrs,q=b("../../plots/template_attributes").texttemplateAttrs,m=b("../../components/colorscale/attributes"),l=b("../../plots/font_attributes"),a=b("./constants");b=b("../../lib/extend").extendFlat;l=l({editType:"calc",arrayOk:!0,colorEditType:"style"});var h=b({},I.marker.line.width,{dflt:0});h=b({width:h,editType:"calc"},m("marker.line"));m=b({line:h,editType:"calc"},m("marker"),{opacity:{valType:"number",
arrayOk:!0,dflt:1,min:0,max:1,editType:"style"}});N.exports={x:I.x,x0:I.x0,dx:I.dx,y:I.y,y0:I.y0,dy:I.dy,xperiod:I.xperiod,yperiod:I.yperiod,xperiod0:I.xperiod0,yperiod0:I.yperiod0,xperiodalignment:I.xperiodalignment,yperiodalignment:I.yperiodalignment,text:I.text,texttemplate:q({editType:"plot"},{keys:a.eventDataKeys}),hovertext:I.hovertext,hovertemplate:r({},{keys:a.eventDataKeys}),textposition:{valType:"enumerated",values:["inside","outside","auto","none"],dflt:"none",arrayOk:!0,editType:"calc"},
insidetextanchor:{valType:"enumerated",values:["end","middle","start"],dflt:"end",editType:"plot"},textangle:{valType:"angle",dflt:"auto",editType:"plot"},textfont:b({},l,{}),insidetextfont:b({},l,{}),outsidetextfont:b({},l,{}),constraintext:{valType:"enumerated",values:["inside","outside","both","none"],dflt:"both",editType:"calc"},cliponaxis:b({},I.cliponaxis,{}),orientation:{valType:"enumerated",values:["v","h"],editType:"calc+clearAxisTypes"},base:{valType:"any",dflt:null,arrayOk:!0,editType:"calc"},
offset:{valType:"number",dflt:null,arrayOk:!0,editType:"calc"},width:{valType:"number",dflt:null,min:0,arrayOk:!0,editType:"calc"},marker:m,offsetgroup:{valType:"string",dflt:"",editType:"calc"},alignmentgroup:{valType:"string",dflt:"",editType:"calc"},selected:{marker:{opacity:I.selected.marker.opacity,color:I.selected.marker.color,editType:"style"},textfont:I.selected.textfont,editType:"style"},unselected:{marker:{opacity:I.unselected.marker.opacity,color:I.unselected.marker.color,editType:"style"},
textfont:I.unselected.textfont,editType:"style"},r:I.r,t:I.t,_deprecated:{bardir:{valType:"enumerated",editType:"calc",values:["v","h"]}}}},{"../../components/colorscale/attributes":650,"../../lib/extend":768,"../../plots/font_attributes":856,"../../plots/template_attributes":906,"../scatter/attributes":1187,"./constants":923}],922:[function(b,N,I){var r=b("../../plots/cartesian/axes"),q=b("../../plots/cartesian/align_period"),m=b("../../components/colorscale/helpers").hasColorscale,l=b("../../components/colorscale/calc"),
a=b("./arrays_to_calcdata"),h=b("../scatter/calc_selection");N.exports=function(g,n){var p=r.getFromId(g,n.xaxis||"x"),d=r.getFromId(g,n.yaxis||"y");var e={msUTC:!(!n.base&&0!==n.base)};if("h"===n.orientation){e=p.makeCalcdata(n,"x",e);var f=d.makeCalcdata(n,"y");p=q(n,d,"y",f);d=!!n.yperiodalignment}else e=d.makeCalcdata(n,"y",e),f=p.makeCalcdata(n,"x"),p=q(n,p,"x",f),d=!!n.xperiodalignment;for(var k=Math.min(p.length,e.length),t=Array(k),v=0;v<k;v++)t[v]={p:p[v],s:e[v]},d&&(t[v].orig_p=f[v]),n.ids&&
(t[v].id=String(n.ids[v]));m(n,"marker")&&l(g,n,{vals:n.marker.color,containerStr:"marker",cLetter:"c"});m(n,"marker.line")&&l(g,n,{vals:n.marker.line.color,containerStr:"marker.line",cLetter:"c"});a(t,n);h(t,n);return t}},{"../../components/colorscale/calc":651,"../../components/colorscale/helpers":654,"../../plots/cartesian/align_period":825,"../../plots/cartesian/axes":828,"../scatter/calc_selection":1189,"./arrays_to_calcdata":920}],923:[function(b,N,I){N.exports={TEXTPAD:3,eventDataKeys:["value",
"label"]}},{}],924:[function(b,N,I){function r(A,z,E,C,u){if(C.length){var D;q(E,C);switch(u.mode){case "overlay":m(z,E,C,u);break;case "group":var G=[];var J=[];for(D=0;D<C.length;D++){var L=C[D];var K=L[0].trace;void 0===K.offset?J.push(L):G.push(L)}if(J.length){J=new B(J,{sepNegVal:!1,overlapNoMerge:!u.norm});var H=A._fullLayout;A=J.minDiff;D=J.traces;L=D.length;K=J.positions.length!==J.distinctPositions.length;var Q=A*(1-u.gap),M=y(H,z._id)+D[0][0].trace.orientation;H=H._alignmentOpts[M]||{};
for(M=0;M<L;M++){var P=D[M],T=P[0].trace,O=Object.keys((H[T.alignmentgroup]||{}).offsetGroups||{}).length;var U=O?Q/O:K?Q/L:Q;var S=U*(1-(u.groupgap||0));T=O?((2*T._offsetIndex+1-O)*U-S)/2:K?((2*M+1-L)*U-S)/2:-S/2;P=P[0].t;P.barwidth=S;P.poffset=T;P.bargroupwidth=Q;P.bardelta=A}J.binWidth=D[0][0].t.barwidth/100;a(J);h(z,J);g(z,J,K);A=J.traces;for(D=0;D<A.length;D++)if(L=A[D],void 0===L[0].trace.base)for(K=new B([L],{sepNegVal:!0,overlapNoMerge:!0}),Q=0;Q<L.length;Q++)if(H=L[Q],H.p!==t&&(M=K.put(H.p,
H.b+H.s)))H.b=M;u.norm?(p(J),d(E,J,u)):n(E,J)}G.length&&m(z,E,G,u);break;case "stack":case "relative":G=[];J=[];for(D=0;D<C.length;D++)L=C[D],K=L[0].trace,void 0===K.base?J.push(L):G.push(L);if(J.length){A=new B(J,{sepNegVal:"relative"===u.mode,overlapNoMerge:!(u.norm||"stack"===u.mode||"relative"===u.mode)});l(z,A,u);D=E._id.charAt(0);L=A.traces;for(M=0;M<L.length;M++)if(K=L[M],Q=K[0].trace,"funnel"===Q.type)for(S=0;S<K.length;S++)P=K[S],P.s!==t&&A.put(P.p,-.5*P.s);for(M=0;M<L.length;M++){K=L[M];
Q=K[0].trace;H="funnel"===Q.type;T=[];for(S=0;S<K.length;S++)P=K[S],P.s!==t&&(U=H?P.s:P.s+P.b,O=A.put(P.p,U),U=O+U,P.b=O,P[D]=U,u.norm||(T.push(U),P.hasB&&T.push(O)));u.norm||(Q._extremes[E._id]=w.findExtremes(E,T,{tozero:!0,padded:!0}))}for(D=0;D<J.length;D++)for(L=J[D],K=0;K<L.length;K++)Q=L[K],Q.s!==t&&Q.b+Q.s===A.get(Q.p,Q.s)&&(Q._outmost=!0);u.norm&&d(E,A,u)}G.length&&m(z,E,G,u)}e(C,z)}}function q(A,z){var E;for(E=0;E<z.length;E++){var C=z[E];var u=C[0].trace;var D="funnel"===u.type?u._base:
u.base,G="h"===u.orientation?u.xcalendar:u.ycalendar,J="category"===A.type||"multicategory"===A.type?function(){return null}:A.d2c;if(k(D)){for(u=0;u<Math.min(D.length,C.length);u++){var L=J(D[u],0,G);f(L)?(C[u].b=+L,C[u].hasB=1):C[u].b=0}for(;u<C.length;u++)C[u].b=0}else for(L=J(D,0,G),L=(D=f(L))?L:0,u=0;u<C.length;u++)C[u].b=L,D&&(C[u].hasB=1)}}function m(A,z,E,C){for(var u=0;u<E.length;u++){var D=new B([E[u]],{unitMinDiff:C.xCat||C.yCat,sepNegVal:!1,overlapNoMerge:!C.norm});l(A,D,C);C.norm?(p(D),
d(z,D,C)):n(z,D)}}function l(A,z,E){var C=z.minDiff,u=z.traces,D=C*(1-E.gap);E=D*(1-(E.groupgap||0));for(var G=-E/2,J=0;J<u.length;J++){var L=u[J][0].t;L.barwidth=E;L.poffset=G;L.bargroupwidth=D;L.bardelta=C}z.binWidth=u[0][0].t.barwidth/100;a(z);h(A,z);g(A,z)}function a(A){A=A.traces;var z,E;for(z=0;z<A.length;z++){var C=A[z],u=C[0],D=u.trace;u=u.t;var G=D._offset||D.offset,J=u.poffset;if(k(G)){var L=Array.prototype.slice.call(G,0,C.length);for(E=0;E<L.length;E++)f(L[E])||(L[E]=J);for(E=L.length;E<
C.length;E++)L.push(J);u.poffset=L}else void 0!==G&&(u.poffset=G);E=D._width||D.width;D=u.barwidth;if(k(E)){var K=Array.prototype.slice.call(E,0,C.length);for(E=0;E<K.length;E++)f(K[E])||(K[E]=D);for(E=K.length;E<C.length;E++)K.push(D);u.barwidth=K;if(void 0===G){L=[];for(E=0;E<C.length;E++)L.push(J+(D-K[E])/2);u.poffset=L}}else void 0!==E&&(u.barwidth=E,void 0===G&&(u.poffset=J+(D-E)/2))}}function h(A,z){z=z.traces;A=A._id.charAt(0);for(var E=0;E<z.length;E++){var C=z[E],u=C[0].t,D=u.poffset,G=Array.isArray(D);
u=u.barwidth;for(var J=Array.isArray(u),L=0;L<C.length;L++){var K=C[L],H=K.w=J?u[L]:u;K[A]=K.p+(G?D[L]:D)+H/2}}}function g(A,z,E){var C=z.traces,u=z.minDiff/2;w.minDtick(A,z.minDiff,z.distinctPositions[0],E);for(z=0;z<C.length;z++){E=C[z];var D=E[0],G=D.trace,J=[],L;for(L=0;L<E.length;L++){var K=E[L];var H=K.p-u;K=K.p+u;J.push(H,K)}if(G.width||G.offset){H=D.t;D=H.poffset;var Q=H.barwidth,M=Array.isArray(D),P=Array.isArray(Q);for(L=0;L<E.length;L++){K=E[L];var T=P?Q[L]:Q;H=K.p+(M?D[L]:D);K=H+T;J.push(H,
K)}}G._extremes[A._id]=w.findExtremes(A,J,{padded:!1})}}function n(A,z){z=z.traces;for(var E=A._id.charAt(0),C=0;C<z.length;C++){for(var u=z[C],D=u[0].trace,G=[],J=!1,L=0;L<u.length;L++){var K=u[L],H=K.b,Q=H+K.s;K[E]=Q;G.push(Q);K.hasB&&G.push(H);K.hasB&&K.b||(J=!0)}D._extremes[A._id]=w.findExtremes(A,G,{tozero:J,padded:!0})}}function p(A){for(var z=A.traces,E=0;E<z.length;E++)for(var C=z[E],u=0;u<C.length;u++){var D=C[u];D.s!==t&&A.put(D.p,D.b+D.s)}}function d(A,z,E){function C(ba){return f(A.c2l(ba))&&
(ba<L-J||ba>K+J||!f(L))}var u=z.traces,D=A._id.charAt(0),G="fraction"===E.norm?1:100,J=G/1E9,L=A.l2c(A.c2l(0)),K="stack"===E.mode?G:L;for(E=0;E<u.length;E++){for(var H=u[E],Q=H[0].trace,M=[],P=!1,T=!1,O=0;O<H.length;O++){var U=H[O];if(U.s!==t){var S=Math.abs(G/z.get(U.p,U.s));U.b*=S;U.s*=S;S=U.b;var X=S+U.s;U[D]=X;M.push(X);T=T||C(X);U.hasB&&(M.push(S),T=T||C(S));U.hasB&&U.b||(P=!0)}}Q._extremes[A._id]=w.findExtremes(A,M,{tozero:P,padded:T})}}function e(A,z){z=z._id.charAt(0);var E={},C,u,D=Infinity,
G=-Infinity;for(C=0;C<A.length;C++){var J=A[C];for(u=0;u<J.length;u++){var L=J[u].p;f(L)&&(D=Math.min(D,L),G=Math.max(G,L))}}var K=1E4/(G-D);G=E.round=function(O){return String(Math.round(K*(O-D)))};for(C=0;C<A.length;C++){J=A[C];J[0].t.extents=E;L=J[0].t.poffset;var H=Array.isArray(L);for(u=0;u<J.length;u++){var Q=J[u],M=Q[z]-Q.w/2;if(f(M)){var P=Q[z]+Q.w/2,T=G(Q.p);E[T]=E[T]?[Math.min(M,E[T][0]),Math.max(P,E[T][1])]:[M,P]}Q.p0=Q.p+(H?L[u]:L);Q.p1=Q.p0+Q.w;Q.s0=Q.b;Q.s1=Q.s0+Q.s}}}var f=b("fast-isnumeric"),
k=b("../../lib").isArrayOrTypedArray,t=b("../../constants/numerical").BADNUM,v=b("../../registry"),w=b("../../plots/cartesian/axes"),y=b("../../plots/cartesian/constraints").getAxisGroup,B=b("./sieve.js");N.exports={crossTraceCalc:function(A,z){var E=z.xaxis;z=z.yaxis;for(var C=A._fullLayout,u=A._fullData,D=A.calcdata,G=[],J=[],L=0;L<u.length;L++){var K=u[L];if(!0===K.visible&&v.traceIs(K,"bar")&&K.xaxis===E._id&&K.yaxis===z._id&&("h"===K.orientation?G.push(D[L]):J.push(D[L]),K._computePh)){K=A.calcdata[L];
for(var H=0;H<K.length;H++)"function"===typeof K[H].ph0&&(K[H].ph0=K[H].ph0()),"function"===typeof K[H].ph1&&(K[H].ph1=K[H].ph1())}}C={xCat:"category"===E.type||"multicategory"===E.type,yCat:"category"===z.type||"multicategory"===z.type,mode:C.barmode,norm:C.barnorm,gap:C.bargap,groupgap:C.bargroupgap};r(A,E,z,J,C);r(A,z,E,G,C)},setGroupPositions:r}},{"../../constants/numerical":753,"../../lib":778,"../../plots/cartesian/axes":828,"../../plots/cartesian/constraints":835,"../../registry":911,"./sieve.js":934,
"fast-isnumeric":241}],925:[function(b,N,I){function r(f,k,t,v){f=k.orientation;f=p(t,k[{v:"x",h:"y"}[f]+"axis"])+f;var w=t._alignmentOpts||{};t=v("alignmentgroup");var y=w[f];y||(y=w[f]={});(f=y[t])?f.traces.push(k):f=y[t]={traces:[k],alignmentIndex:Object.keys(y).length,offsetGroups:{}};v=v("offsetgroup");f=f.offsetGroups;t=f[v];v&&(t||(t=f[v]={offsetIndex:Object.keys(f).length}),k._offsetIndex=t.offsetIndex)}function q(f,k,t,v,w,y){y=y||{};k=!1!==y.moduleHasSelected;var B=!1!==y.moduleHasUnselected,
A=!1!==y.moduleHasConstrain,z=!1!==y.moduleHasCliponaxis,E=!1!==y.moduleHasTextangle,C=!1!==y.moduleHasInsideanchor,u=!!y.hasPathbar,D=Array.isArray(w)||"auto"===w;y=D||"inside"===w;w=D||"outside"===w;if(y||w)t=e(v,"textfont",t.font),D=m.extendFlat({},t),(f=!(f.textfont&&f.textfont.color))&&delete D.color,e(v,"insidetextfont",D),u&&(u=m.extendFlat({},t),f&&delete u.color,e(v,"pathbar.textfont",u)),w&&e(v,"outsidetextfont",t),k&&v("selected.textfont.color"),B&&v("unselected.textfont.color"),A&&v("constraintext"),
z&&v("cliponaxis"),E&&v("textangle"),v("texttemplate");y&&C&&v("insidetextanchor")}var m=b("../../lib"),l=b("../../components/color"),a=b("../../registry"),h=b("../scatter/xy_defaults"),g=b("../scatter/period_defaults"),n=b("./style_defaults"),p=b("../../plots/cartesian/constraints").getAxisGroup,d=b("./attributes"),e=m.coerceFont;N.exports={supplyDefaults:function(f,k,t,v){function w(B,A){return m.coerce(f,k,d,B,A)}if(h(f,k,v,w)){g(f,k,v,w);w("orientation",k.x&&!k.y?"h":"v");w("base");w("offset");
w("width");w("text");w("hovertext");w("hovertemplate");var y=w("textposition");q(f,k,v,w,y,{moduleHasSelected:!0,moduleHasUnselected:!0,moduleHasConstrain:!0,moduleHasCliponaxis:!0,moduleHasTextangle:!0,moduleHasInsideanchor:!0});n(f,k,w,t,v);t=(k.marker.line||{}).color;v=a.getComponentMethod("errorbars","supplyDefaults");v(f,k,t||l.defaultLine,{axis:"y"});v(f,k,t||l.defaultLine,{axis:"x",inherit:"y"});m.coerceSelectionMarkerOpacity(k,w)}else k.visible=!1},crossTraceDefaults:function(f,k){function t(B){return m.coerce(w._input,
w,d,B)}if("group"===k.barmode)for(var v=0;v<f.length;v++){var w=f[v];if("bar"===w.type){var y=w._input;r(y,w,k,t)}}},handleGroupingDefaults:r,handleText:q}},{"../../components/color":643,"../../lib":778,"../../plots/cartesian/constraints":835,"../../registry":911,"../scatter/period_defaults":1207,"../scatter/xy_defaults":1214,"./attributes":921,"./style_defaults":936}],926:[function(b,N,I){N.exports=function(r,q,m){r.x="xVal"in q?q.xVal:q.x;r.y="yVal"in q?q.yVal:q.y;q.xa&&(r.xaxis=q.xa);q.ya&&(r.yaxis=
q.ya);"h"===m.orientation?(r.label=r.y,r.value=r.x):(r.label=r.x,r.value=r.y);return r}},{}],927:[function(b,N,I){var r=b("fast-isnumeric"),q=b("tinycolor2"),m=b("../../lib").isArrayOrTypedArray;I.coerceString=function(l,a,h){if("string"===typeof a){if(a||!l.noBlank)return a}else if(("number"===typeof a||!0===a)&&!l.strict)return String(a);return void 0!==h?h:l.dflt};I.coerceNumber=function(l,a,h){if(r(a)){a=+a;var g=l.min,n=l.max;if(!(void 0!==g&&a<g||void 0!==n&&a>n))return a}return void 0!==h?
h:l.dflt};I.coerceColor=function(l,a,h){return q(a).isValid()?a:void 0!==h?h:l.dflt};I.coerceEnumerated=function(l,a,h){l.coerceNumber&&(a=+a);return-1!==l.values.indexOf(a)?a:void 0!==h?h:l.dflt};I.getValue=function(l,a){var h;Array.isArray(l)?a<l.length&&(h=l[a]):h=l;return h};I.getLineWidth=function(l,a){return 0<a.mlw?a.mlw:m(l.marker.line.width)?0:l.marker.line.width}},{"../../lib":778,"fast-isnumeric":241,tinycolor2:576}],928:[function(b,N,I){function r(d,e,f,k){function t(O){return O[H]-O.w/
2}function v(O){return O[H]+O.w/2}function w(O,U){return m.inbox(O-L,U-L,D+Math.min(1,Math.abs(U-O)/T)-1)}function y(O){return w(G(O),J(O))}function B(O){var U=K,S=O.b,X=O[Q];u&&(O=Math.abs(O.rawS)||0,0<U?X+=O:0>U&&(X-=O));return m.inbox(S-U,X-U,D+(X-U)/(X-S)-1)}var A=d.cd,z=A[0].trace,E=A[0].t,C="closest"===k,u="waterfall"===z.type,D=d.maxHoverDistance,G=C?t:function(O){return Math.min(t(O),O.p-E.bardelta/2)},J=C?v:function(O){return Math.max(v(O),O.p+E.bardelta/2)};if("h"===z.orientation){var L=
f;var K=e;var H="y";var Q="x";var M=B;var P=y}else L=e,K=f,H="x",Q="y",P=B,M=y;e=d[H+"a"];f=d[Q+"a"];var T=Math.abs(e.r2c(e.range[1])-e.r2c(e.range[0]));k=m.getDistanceFunction(k,M,P,function(O){return(M(O)+P(O))/2});m.getClosest(A,k,d);if(!1!==d.index&&A[d.index].p!==p)return C||(G=function(O){return Math.min(t(O),O.p-E.bargroupwidth/2)},J=function(O){return Math.max(v(O),O.p+E.bargroupwidth/2)}),A=A[d.index],k=z.base?A.b+A.s:A.s,d[Q+"0"]=d[Q+"1"]=f.c2p(A[Q],!0),d[Q+"LabelVal"]=k,k=E.extents[E.extents.round(A.p)],
d[H+"0"]=e.c2p(C?G(A):k[0],!0),d[H+"1"]=e.c2p(C?J(A):k[1],!0),d[H+"LabelVal"]=void 0!==A.orig_p?A.orig_p:A.p,d.labelLabel=n(e,d[H+"LabelVal"]),d.valueLabel=n(f,d[Q+"LabelVal"]),d.baseLabel=n(f,A.b),d.spikeDistance=(B(A)+function(O){return w(t(O),v(O))}(A))/2-D,d[H+"Spike"]=e.c2p(A.p,!0),h(A,z,d),d.hovertemplate=z.hovertemplate,d}function q(d,e){var f=e.mcc||d.marker.color,k=e.mlcc||d.marker.line.color;d=g(d,e);if(a.opacity(f))return f;if(a.opacity(k)&&d)return k}var m=b("../../components/fx"),l=b("../../registry"),
a=b("../../components/color"),h=b("../../lib").fillText,g=b("./helpers").getLineWidth,n=b("../../plots/cartesian/axes").hoverLabelText,p=b("../../constants/numerical").BADNUM;N.exports={hoverPoints:function(d,e,f,k){if(d=r(d,e,f,k))return f=d.cd,e=f[0].trace,f=f[d.index],d.color=q(e,f),l.getComponentMethod("errorbars","hoverInfo")(f,e,d),[d]},hoverOnBars:r,getTraceColor:q}},{"../../components/color":643,"../../components/fx":683,"../../constants/numerical":753,"../../lib":778,"../../plots/cartesian/axes":828,
"../../registry":911,"./helpers":927}],929:[function(b,N,I){N.exports={attributes:b("./attributes"),layoutAttributes:b("./layout_attributes"),supplyDefaults:b("./defaults").supplyDefaults,crossTraceDefaults:b("./defaults").crossTraceDefaults,supplyLayoutDefaults:b("./layout_defaults"),calc:b("./calc"),crossTraceCalc:b("./cross_trace_calc").crossTraceCalc,colorbar:b("../scatter/marker_colorbar"),arraysToCalcdata:b("./arrays_to_calcdata"),plot:b("./plot").plot,style:b("./style").style,styleOnSelect:b("./style").styleOnSelect,
hoverPoints:b("./hover").hoverPoints,eventData:b("./event_data"),selectPoints:b("./select"),moduleType:"trace",name:"bar",basePlotModule:b("../../plots/cartesian"),categories:"bar-like cartesian svg bar oriented errorBarsOK showLegend zoomScale".split(" "),animatable:!0,meta:{}}},{"../../plots/cartesian":841,"../scatter/marker_colorbar":1205,"./arrays_to_calcdata":920,"./attributes":921,"./calc":922,"./cross_trace_calc":924,"./defaults":925,"./event_data":926,"./hover":928,"./layout_attributes":930,
"./layout_defaults":931,"./plot":932,"./select":933,"./style":935}],930:[function(b,N,I){N.exports={barmode:{valType:"enumerated",values:["stack","group","overlay","relative"],dflt:"group",editType:"calc"},barnorm:{valType:"enumerated",values:["","fraction","percent"],dflt:"",editType:"calc"},bargap:{valType:"number",min:0,max:1,editType:"calc"},bargroupgap:{valType:"number",min:0,max:1,dflt:0,editType:"calc"}}},{}],931:[function(b,N,I){var r=b("../../registry"),q=b("../../plots/cartesian/axes"),
m=b("../../lib"),l=b("./layout_attributes");N.exports=function(a,h,g){for(var n=!1,p=!1,d=!1,e={},f=m.coerce(a,h,l,"barmode",void 0),k=0;k<g.length;k++){var t=g[k];if(r.traceIs(t,"bar")&&t.visible){n=!0;if("group"===f){var v=t.xaxis+t.yaxis;e[v]&&(d=!0);e[v]=!0}t.visible&&"histogram"===t.type&&"category"!==q.getFromId({_fullLayout:h},t["v"===t.orientation?"xaxis":"yaxis"]).type&&(p=!0)}}n?("overlay"!==f&&m.coerce(a,h,l,"barnorm",void 0),m.coerce(a,h,l,"bargap",p&&!d?0:.2),m.coerce(a,h,l,"bargroupgap",
void 0)):delete h.barmode}},{"../../lib":778,"../../plots/cartesian/axes":828,"../../registry":911,"./layout_attributes":930}],932:[function(b,N,I){function r(H){return H.id}function q(H,Q,M,P){var T=[],O=[],U=P?Q:M;Q=P?M:Q;T[0]=U.c2p(H.s0,!0);O[0]=Q.c2p(H.p0,!0);T[1]=U.c2p(H.s1,!0);O[1]=Q.c2p(H.p1,!0);return P?[T,O]:[O,T]}function m(H,Q,M,P){if(!Q.uniformtext.mode&&M&&0<M.duration){var T;P&&(T=P());return H.transition().duration(M.duration).ease(M.easing).each("end",function(){T&&T()}).each("interrupt",
function(){T&&T()})}return H}function l(H,Q,M,P,T,O,U,S,X,ba,ca){function ia(Ca,Ma,Ua){return t.ensureSingle(Ca,"text").text(Ma).attr({"class":"bartext bartext-"+ma,"text-anchor":"middle","data-notex":1}).call(y.font,Ua).call(v.convertToTspans,H)}var ja=Q.xaxis,la=Q.yaxis;Q=H._fullLayout;var da=P[0].trace,oa="h"===da.orientation,sa=n(Q,P,T,ja,la);var ma=p(da,T);var qa=P[T],pa=!("stack"===ba.mode||"relative"===ba.mode)||qa._outmost;if(sa&&"none"!==ma&&(!qa.isBlank&&O!==U&&S!==X||"auto"!==ma&&"inside"!==
ma)){var na=Q.font;P=C.getBarColor(P[T],da);P=C.getInsideTextFont(da,T,na,P);T=C.getOutsideTextFont(da,T,na);na=M.datum();oa?"log"===ja.type&&0>=na.s0&&(O=ja.range[0]<ja.range[1]?0:ja._length):"log"===la.type&&0>=na.s0&&(S=la.range[0]<la.range[1]?la._length:0);ja=Math.abs(U-O)-2*K;la=Math.abs(X-S)-2*K;"outside"===ma&&(pa||qa.hasB||(ma="inside"));if("auto"===ma)if(pa){ma="inside";var ka=t.ensureUniformFontSize(H,P);var ua=ia(M,sa,ka);var va=y.bBox(ua.node());pa=va.width;na=va.height;0<pa&&0<na&&(pa<=
ja&&na<=la||pa<=la&&na<=ja||(oa?ja>=la/na*pa:la>=ja/pa*na))?ma="inside":(ma="outside",ua.remove(),ua=null)}else ma="inside";if(!ua&&(ka=t.ensureUniformFontSize(H,"outside"===ma?T:P),ua=ia(M,sa,ka),M=ua.attr("transform"),ua.attr("transform",""),va=y.bBox(ua.node()),pa=va.width,na=va.height,ua.attr("transform",M),0>=pa||0>=na)){ua.remove();return}M=da.textangle;"outside"===ma?(sa="both"===da.constraintext||"outside"===da.constraintext,O=g(O,U,S,X,va,{isHorizontal:oa,constrained:sa,angle:M})):(sa="both"===
da.constraintext||"inside"===da.constraintext,O=h(O,U,S,X,va,{isHorizontal:oa,constrained:sa,angle:M,anchor:da.insidetextanchor}));O.fontSize=ka.size;z(da.type,O,Q);qa.transform=O;m(ua,Q,ba,ca).attr("transform",t.getTextTransform(O))}else M.select("text").remove()}function a(H,Q){var M=Math.PI/180*Q;Q=Math.abs(Math.sin(M));M=Math.abs(Math.cos(M));return{x:H.width*M+H.height*Q,y:H.width*Q+H.height*M}}function h(H,Q,M,P,T,O){var U=!!O.isHorizontal,S=!!O.constrained,X=O.angle||0,ba=O.anchor||"end",ca=
"end"===ba;ba="start"===ba;var ia=((O.leftToRight||0)+1)/2,ja=1-ia,la=T.width,da=T.height,oa=Math.abs(Q-H),sa=Math.abs(P-M);O=oa>2*K&&sa>2*K?K:0;oa-=2*O;sa-=2*O;var ma="auto"===X?0:X;"auto"!==X||la<=oa&&da<=sa||!(la>oa||da>sa)||(la>sa||da>oa)&&la<da===oa<sa||(ma+=90);la=a(T,ma);X=1;S&&(X=Math.min(1,oa/la.x,sa/la.y));S=T.left*ja+T.right*ia;T=(T.top+T.bottom)/2;ia=(H+K)*ja+(Q-K)*ia;ja=(M+P)/2;sa=oa=0;if(ba||ca)ca=(U?la.x:la.y)/2,la=U?H<Q?1:-1:M<P?1:-1,U?ba?(ia=H+la*O,oa=-la*ca):(ia=Q-la*O,oa=la*ca):
ba?(ja=M+la*O,sa=-la*ca):(ja=P-la*O,sa=la*ca);return{textX:S,textY:T,targetX:ia,targetY:ja,anchorX:oa,anchorY:sa,scale:X,rotate:ma}}function g(H,Q,M,P,T,O){var U=!!O.isHorizontal,S=!!O.constrained,X=O.angle||0,ba=T.width,ca=T.height,ia=Math.abs(Q-H),ja=Math.abs(P-M);O=U?ja>2*K?K:0:ia>2*K?K:0;var la=1;S&&(la=U?Math.min(1,ja/ca):Math.min(1,ia/ba));S="auto"===X?0:X;X=a(T,S);X=(U?X.x:X.y)/2;ba=(T.left+T.right)/2;T=(T.top+T.bottom)/2;ca=(H+Q)/2;ia=(M+P)/2;var da=ja=0;H=U?Q<H?1:-1:M<P?1:-1;U?(ca=Q-H*O,
ja=H*X):(ia=P+H*O,da=-H*X);return{textX:ba,textY:T,targetX:ca,targetY:ia,anchorX:ja,anchorY:da,scale:la,rotate:S}}function n(H,Q,M,P,T){var O=Q[0].trace;H=O.texttemplate?d(H,Q,M,P,T):O.textinfo?e(Q,M,P,T):u.getValue(O.text,M);return u.coerceString(G,H)}function p(H,Q){H=u.getValue(H.textposition,Q);return u.coerceEnumerated(J,H)}function d(H,Q,M,P,T){function O(da){return A(la,+da,!0).text}var U=Q[0].trace,S=t.castOption(U,M,"texttemplate");if(!S)return"";var X="waterfall"===U.type,ba="funnel"===
U.type;if("h"===U.orientation){var ca="y";var ia=T;var ja="x";var la=P}else ca="x",ia=P,ja="y",la=T;M=Q[M];Q={};Q.label=M.p;Q.labelLabel=Q[ca+"Label"]=A(ia,M.p,!0).text;ca=t.castOption(U,M.i,"text");if(0===ca||ca)Q.text=ca;Q.value=M.s;Q.valueLabel=Q[ja+"Label"]=O(M.s);ja={};L(ja,U,M.i);X&&(Q.delta=+M.rawS||M.s,Q.deltaLabel=O(Q.delta),Q.final=M.v,Q.finalLabel=O(Q.final),Q.initial=Q.final-Q.delta,Q.initialLabel=O(Q.initial));ba&&(Q.value=M.s,Q.valueLabel=O(Q.value),Q.percentInitial=M.begR,Q.percentInitialLabel=
t.formatPercent(M.begR),Q.percentPrevious=M.difR,Q.percentPreviousLabel=t.formatPercent(M.difR),Q.percentTotal=M.sumR,Q.percenTotalLabel=t.formatPercent(M.sumR));if(X=t.castOption(U,M.i,"customdata"))Q.customdata=X;return t.texttemplateString(S,Q,H._d3locale,ja,Q,U._meta||{})}function e(H,Q,M,P){function T(la){return A(U?M:P,+la,!0).text}var O=H[0].trace,U="h"===O.orientation,S="waterfall"===O.type,X="funnel"===O.type,ba=H[Q],ca=O.textinfo.split("+"),ia=[],ja=function(la){return-1!==ca.indexOf(la)};
ja("label")&&ia.push(A(U?P:M,H[Q].p,!0).text);ja("text")&&(H=t.castOption(O,ba.i,"text"),(0===H||H)&&ia.push(H));S&&(S=+ba.rawS||ba.s,H=ba.v,Q=H-S,ja("initial")&&ia.push(T(Q)),ja("delta")&&ia.push(T(S)),ja("final")&&ia.push(T(H)));X&&(ja("value")&&ia.push(T(ba.s)),X=0,ja("percent initial")&&X++,ja("percent previous")&&X++,ja("percent total")&&X++,X=1<X,ja("percent initial")&&(H=t.formatPercent(ba.begR),X&&(H+=" of initial"),ia.push(H)),ja("percent previous")&&(H=t.formatPercent(ba.difR),X&&(H+=" of previous"),
ia.push(H)),ja("percent total")&&(H=t.formatPercent(ba.sumR),X&&(H+=" of total"),ia.push(H)));return ia.join("\x3cbr\x3e")}var f=b("d3"),k=b("fast-isnumeric"),t=b("../../lib"),v=b("../../lib/svg_text_utils"),w=b("../../components/color"),y=b("../../components/drawing"),B=b("../../registry"),A=b("../../plots/cartesian/axes").tickText;I=b("./uniform_text");var z=I.recordMinTextSize,E=I.clearMinTextSize,C=b("./style"),u=b("./helpers");I=b("./constants");var D=b("./attributes"),G=D.text,J=D.textposition,
L=b("../../components/fx/helpers").appendArrayPointValue,K=I.TEXTPAD;N.exports={plot:function(H,Q,M,P,T,O){var U=Q.xaxis,S=Q.yaxis,X=H._fullLayout;T||(T={mode:X.barmode,norm:X.barmode,gap:X.bargap,groupgap:X.bargroupgap},E("bar",X));M=t.makeTraceGroups(P,M,"trace bars").each(function(ba){var ca=f.select(this),ia=ba[0].trace,ja="funnel"===ia.type,la="bar"===ia.type||ja,da=0;"waterfall"===ia.type&&ia.connector.visible&&"between"===ia.connector.mode&&(da=ia.connector.line.width/2);var oa="h"===ia.orientation,
sa=T&&0<T.duration;ja=t.ensureSingle(ca,"g","points");var ma=ia.ids?r:void 0;ja=ja.selectAll("g.point").data(t.identity,ma);ja.enter().append("g").classed("point",!0);ja.exit().remove();ja.each(function(qa,pa){function na(cb){var $a=f.round(nb/2%1,2);return 0===T.gap&&0===T.groupgap?f.round(Math.round(cb)-$a,2):cb}function ka(cb,$a,jb){return jb&&cb===$a?cb:2<=Math.abs(cb-$a)?na(cb):cb>$a?Math.ceil(cb):Math.floor(cb)}var ua=f.select(this),va=q(qa,U,S,oa),Ca=va[0][0],Ma=va[0][1],Ua=va[1][0];va=va[1][1];
var eb=0===(oa?Ma-Ca:va-Ua);eb&&la&&u.getLineWidth(ia,qa)&&(eb=!1);eb||(eb=!k(Ca)||!k(Ma)||!k(Ua)||!k(va));(qa.isBlank=eb)&&(oa?Ma=Ca:va=Ua);da&&!eb&&(oa?(Ca-=(Ca<Ma?1:-1)*da,Ma+=(Ca<Ma?1:-1)*da):(Ua-=(Ua<va?1:-1)*da,va+=(Ua<va?1:-1)*da));if("waterfall"===ia.type){if(!eb){var fb=ia[qa.dir].marker;var nb=fb.line.width;fb=fb.color}}else nb=u.getLineWidth(ia,qa),fb=qa.mc||ia.marker.color;H._context.staticPlot||(fb=1>w.opacity(fb)||.01<nb?na:ka,Ca=fb(Ca,Ma,oa),Ma=fb(Ma,Ca,oa),Ua=fb(Ua,va,!oa),va=fb(va,
Ua,!oa));fb=m(t.ensureSingle(ua,"path"),X,T,O);fb.style("vector-effect","non-scaling-stroke").attr("d",isNaN((Ma-Ca)*(va-Ua))||eb&&H._context.staticPlot?"M0,0Z":"M"+Ca+","+Ua+"V"+va+"H"+Ma+"V"+Ua+"Z").call(y.setClipUrl,Q.layerClipId,H);!X.uniformtext.mode&&sa&&(eb=y.makePointStyleFns(ia),y.singlePointStyle(qa,fb,ia,eb,H));l(H,Q,ua,ba,pa,Ca,Ma,Ua,va,T,O);Q.layerClipId&&y.hideOutsideRangePoint(qa,ua.select("text"),U,S,ia.xcalendar,ia.ycalendar)});y.setClipUrl(ca,!1===ia.cliponaxis?null:Q.layerClipId,
H)});B.getComponentMethod("errorbars","plot")(H,M,Q,T)},toMoveInsideBar:h}},{"../../components/color":643,"../../components/drawing":665,"../../components/fx/helpers":679,"../../lib":778,"../../lib/svg_text_utils":803,"../../plots/cartesian/axes":828,"../../registry":911,"./attributes":921,"./constants":923,"./helpers":927,"./style":935,"./uniform_text":937,d3:169,"fast-isnumeric":241}],933:[function(b,N,I){N.exports=function(r,q){var m=r.cd,l=r.xaxis,a=r.yaxis,h=m[0].trace,g="funnel"===h.type;h=
"h"===h.orientation;var n=[],p;if(!1===q)for(p=0;p<m.length;p++)m[p].selected=0;else for(p=0;p<m.length;p++){var d=m[p];if("ct"in d)var e=d.ct;else{var f=d,k=l,t=a;e=h;var v=g,w=k.c2p(e?f.s0:f.p0,!0);k=k.c2p(e?f.s1:f.p1,!0);var y=t.c2p(e?f.p0:f.s0,!0);f=t.c2p(e?f.p1:f.s1,!0);e=v?[(w+k)/2,(y+f)/2]:e?[k,(y+f)/2]:[(w+k)/2,f]}q.contains(e,!1,p,r)?(n.push({pointNumber:p,x:l.c2d(d.x),y:a.c2d(d.y)}),d.selected=1):d.selected=0}return n}},{}],934:[function(b,N,I){function r(l,a){this.traces=l;this.sepNegVal=
a.sepNegVal;this.overlapNoMerge=a.overlapNoMerge;for(var h=Infinity,g=[],n=0;n<l.length;n++){for(var p=l[n],d=0;d<p.length;d++){var e=p[d];e.p!==m&&g.push(e.p)}p[0]&&p[0].width1&&(h=Math.min(p[0].width1,h))}this.positions=g;l=q(g,{unitMinDiff:a.unitMinDiff});this.distinctPositions=l.vals;this.binWidth=this.minDiff=1===l.vals.length&&Infinity!==h?h:Math.min(l.minDiff,h);this.bins={}}N.exports=r;var q=b("../../lib").distinctVals,m=b("../../constants/numerical").BADNUM;r.prototype.put=function(l,a){l=
this.getLabel(l,a);var h=this.bins[l]||0;this.bins[l]=h+a;return h};r.prototype.get=function(l,a){l=this.getLabel(l,a);return this.bins[l]||0};r.prototype.getLabel=function(l,a){return(0>a&&this.sepNegVal?"v":"^")+(this.overlapNoMerge?l:Math.round(l/this.binWidth))}},{"../../constants/numerical":753,"../../lib":778}],935:[function(b,N,I){function r(B,A,z){B.selectAll("text").each(function(E){var C=n.select(this);E=e.ensureUniformFontSize(z,m(C,E,A,z));d.font(C,E)})}function q(B,A,z){B.each(function(E){var C=
n.select(this);if(E.selected){E=e.ensureUniformFontSize(z,m(C,E,A,z));var u=A.selected.textfont&&A.selected.textfont.color;u&&(E.color=u);d.font(C,E)}else d.selectedTextStyle(C,A)})}function m(B,A,z,E){E=E._fullLayout.font;var C=z.textfont;B.classed("bartext-inside")?(B=g(A,z),C=l(z,A.i,E,B)):B.classed("bartext-outside")&&(C=a(z,A.i,E));return C}function l(B,A,z,E){z=h(t,B.textfont,A,z);if(void 0===B._input.textfont||void 0===B._input.textfont.color||Array.isArray(B.textfont.color)&&void 0===B.textfont.color[A])z=
{color:p.contrast(E),family:z.family,size:z.size};return h(v,B.insidetextfont,A,z)}function a(B,A,z){z=h(t,B.textfont,A,z);return h(w,B.outsidetextfont,A,z)}function h(B,A,z,E){A=A||{};var C=y.getValue(A.family,z),u=y.getValue(A.size,z);A=y.getValue(A.color,z);return{family:y.coerceString(B.family,C,E.family),size:y.coerceNumber(B.size,u,E.size),color:y.coerceColor(B.color,A,E.color)}}function g(B,A){return"waterfall"===A.type?A[B.dir].marker.color:B.mc||A.marker.color}var n=b("d3"),p=b("../../components/color"),
d=b("../../components/drawing"),e=b("../../lib"),f=b("../../registry"),k=b("./uniform_text").resizeText;I=b("./attributes");var t=I.textfont,v=I.insidetextfont,w=I.outsidetextfont,y=b("./helpers");N.exports={style:function(B){var A=n.select(B).selectAll("g.barlayer").selectAll("g.trace");k(B,A,"bar");var z=A.size(),E=B._fullLayout;A.style("opacity",function(C){return C[0].trace.opacity}).each(function(C){("stack"===E.barmode&&1<z||0===E.bargap&&0===E.bargroupgap&&!C[0].trace.marker.line.width)&&n.select(this).attr("shape-rendering",
"crispEdges")});A.selectAll("g.points").each(function(C){var u=n.select(this);C=C[0].trace;d.pointStyle(u.selectAll("path"),C,B);r(u,C,B)});f.getComponentMethod("errorbars","style")(A)},styleTextPoints:r,styleOnSelect:function(B,A,z){A=A[0].trace;A.selectedpoints?(d.selectedPointStyle(z.selectAll("path"),A),q(z.selectAll("text"),A,B)):(d.pointStyle(z.selectAll("path"),A,B),r(z,A,B),f.getComponentMethod("errorbars","style")(z))},getInsideTextFont:l,getOutsideTextFont:a,getBarColor:g,resizeText:k}},
{"../../components/color":643,"../../components/drawing":665,"../../lib":778,"../../registry":911,"./attributes":921,"./helpers":927,"./uniform_text":937,d3:169}],936:[function(b,N,I){var r=b("../../components/color"),q=b("../../components/colorscale/helpers").hasColorscale,m=b("../../components/colorscale/defaults");N.exports=function(l,a,h,g,n){h("marker.color",g);q(l,"marker")&&m(l,a,n,h,{prefix:"marker.",cLetter:"c"});h("marker.line.color",r.defaultLine);q(l,"marker.line")&&m(l,a,n,h,{prefix:"marker.line.",
cLetter:"c"});h("marker.line.width");h("marker.opacity");h("selected.marker.color");h("unselected.marker.color")}},{"../../components/color":643,"../../components/colorscale/defaults":653,"../../components/colorscale/helpers":654}],937:[function(b,N,I){var r=b("d3"),q=b("../../lib");N.exports={recordMinTextSize:function(m,l,a){if(a.uniformtext.mode){m="_"+m+"Text_minsize";var h=a.uniformtext.minsize,g=l.scale*l.fontSize;l.hide=g<h;a[m]=a[m]||Infinity;l.hide||(a[m]=Math.min(a[m],Math.max(g,h)))}},
clearMinTextSize:function(m,l){l["_"+m+"Text_minsize"]=void 0},resizeText:function(m,l,a){m=m._fullLayout;var h=m["_"+a+"Text_minsize"];if(h){var g="hide"===m.uniformtext.mode;switch(a){case "funnelarea":case "pie":case "sunburst":a="g.slice";break;case "treemap":a="g.slice, g.pathbar";break;default:a="g.points \x3e g.point"}l.selectAll(a).each(function(n){if(n=n.transform)n.scale=g&&n.hide?0:h/n.fontSize,r.select(this).select("text").attr("transform",q.getTextTransform(n))})}}}},{"../../lib":778,
d3:169}],938:[function(b,N,I){I=b("../../plots/template_attributes").hovertemplateAttrs;var r=b("../../lib/extend").extendFlat,q=b("../scatterpolar/attributes");b=b("../bar/attributes");N.exports={r:q.r,theta:q.theta,r0:q.r0,dr:q.dr,theta0:q.theta0,dtheta:q.dtheta,thetaunit:q.thetaunit,base:r({},b.base,{}),offset:r({},b.offset,{}),width:r({},b.width,{}),text:r({},b.text,{}),hovertext:r({},b.hovertext,{}),marker:b.marker,hoverinfo:q.hoverinfo,hovertemplate:I(),selected:b.selected,unselected:b.unselected}},
{"../../lib/extend":768,"../../plots/template_attributes":906,"../bar/attributes":921,"../scatterpolar/attributes":1261}],939:[function(b,N,I){var r=b("../../components/colorscale/helpers").hasColorscale,q=b("../../components/colorscale/calc"),m=b("../bar/arrays_to_calcdata"),l=b("../bar/cross_trace_calc").setGroupPositions,a=b("../scatter/calc_selection"),h=b("../../registry").traceIs,g=b("../../lib").extendFlat;N.exports={calc:function(n,p){function d(y){var B=p[y];void 0!==B&&(p["_"+y]=Array.isArray(B)?
k.makeCalcdata(p,y):k.d2c(B,p.thetaunit))}var e=n._fullLayout,f=p.subplot,k=e[f].angularaxis;e=e[f].radialaxis.makeCalcdata(p,"r");f=k.makeCalcdata(p,"theta");for(var t=p._length,v=Array(t),w=0;w<t;w++)v[w]={p:f[w],s:e[w]};"linear"===k.type&&(d("width"),d("offset"));r(p,"marker")&&q(n,p,{vals:p.marker.color,containerStr:"marker",cLetter:"c"});r(p,"marker.line")&&q(n,p,{vals:p.marker.line.color,containerStr:"marker.line",cLetter:"c"});m(v,p);a(v,p);return v},crossTraceCalc:function(n,p,d){for(var e=
n.calcdata,f=[],k=0;k<e.length;k++){var t=e[k],v=t[0].trace;!0===v.visible&&h(v,"bar")&&v.subplot===d&&f.push(t)}d=g({},p.radialaxis,{_id:"x"});l(n,p.angularaxis,d,f,{mode:p.barmode,norm:p.barnorm,gap:p.bargap,groupgap:p.bargroupgap})}}},{"../../components/colorscale/calc":651,"../../components/colorscale/helpers":654,"../../lib":778,"../../registry":911,"../bar/arrays_to_calcdata":920,"../bar/cross_trace_calc":924,"../scatter/calc_selection":1189}],940:[function(b,N,I){var r=b("../../lib"),q=b("../scatterpolar/defaults").handleRThetaDefaults,
m=b("../bar/style_defaults"),l=b("./attributes");N.exports=function(a,h,g,n){function p(d,e){return r.coerce(a,h,l,d,e)}q(a,h,n,p)?(p("thetaunit"),p("base"),p("offset"),p("width"),p("text"),p("hovertext"),p("hovertemplate"),m(a,h,p,g,n),r.coerceSelectionMarkerOpacity(h,p)):h.visible=!1}},{"../../lib":778,"../bar/style_defaults":936,"../scatterpolar/defaults":1263,"./attributes":938}],941:[function(b,N,I){var r=b("../../components/fx"),q=b("../../lib"),m=b("../bar/hover").getTraceColor,l=q.fillText,
a=b("../scatterpolar/hover").makeHoverPointText,h=b("../../plots/polar/helpers").isPtInsidePolygon;N.exports=function(g,n,p){var d=g.cd,e=d[0].trace,f=g.subplot,k=f.radialAxis,t=f.vangles,v=t?h:q.isPtInsideSector,w=g.maxHoverDistance,y=f.angularAxis._period||2*Math.PI,B=Math.abs(k.g2p(Math.sqrt(n*n+p*p))),A=Math.atan2(p,n);k.range[0]>k.range[1]&&(A+=Math.PI);r.getClosest(d,function(z){return v(B,A,[z.rp0,z.rp1],[z.thetag0,z.thetag1],t)?w+Math.min(1,Math.abs(z.thetag1-z.thetag0)/y)-1+(z.rp1-B)/(z.rp1-
z.rp0)-1:Infinity},g);if(!1!==g.index)return n=d[g.index],g.x0=g.x1=n.ct[0],g.y0=g.y1=n.ct[1],p=q.extendFlat({},n,{r:n.s,theta:n.p}),l(n,e,g),a(p,e,f,g),g.hovertemplate=e.hovertemplate,g.color=m(e,n),g.xLabelVal=g.yLabelVal=void 0,0>n.s&&(g.idealAlign="left"),[g]}},{"../../components/fx":683,"../../lib":778,"../../plots/polar/helpers":893,"../bar/hover":928,"../scatterpolar/hover":1265}],942:[function(b,N,I){N.exports={moduleType:"trace",name:"barpolar",basePlotModule:b("../../plots/polar"),categories:["polar",
"bar","showLegend"],attributes:b("./attributes"),layoutAttributes:b("./layout_attributes"),supplyDefaults:b("./defaults"),supplyLayoutDefaults:b("./layout_defaults"),calc:b("./calc").calc,crossTraceCalc:b("./calc").crossTraceCalc,plot:b("./plot"),colorbar:b("../scatter/marker_colorbar"),formatLabels:b("../scatterpolar/format_labels"),style:b("../bar/style").style,styleOnSelect:b("../bar/style").styleOnSelect,hoverPoints:b("./hover"),selectPoints:b("../bar/select"),meta:{}}},{"../../plots/polar":894,
"../bar/select":933,"../bar/style":935,"../scatter/marker_colorbar":1205,"../scatterpolar/format_labels":1264,"./attributes":938,"./calc":939,"./defaults":940,"./hover":941,"./layout_attributes":943,"./layout_defaults":944,"./plot":945}],943:[function(b,N,I){N.exports={barmode:{valType:"enumerated",values:["stack","overlay"],dflt:"stack",editType:"calc"},bargap:{valType:"number",dflt:.1,min:0,max:1,editType:"calc"}}},{}],944:[function(b,N,I){var r=b("../../lib"),q=b("./layout_attributes");N.exports=
function(m,l,a){for(var h={},g,n=0;n<a.length;n++)g=a[n],"barpolar"===g.type&&!0===g.visible&&(g=g.subplot,h[g]||(r.coerce(m[g]||{},l[g],q,"barmode",void 0),r.coerce(m[g]||{},l[g],q,"bargap",void 0),h[g]=1))}},{"../../lib":778,"./layout_attributes":943}],945:[function(b,N,I){function r(g){var n=g.cxx,p=g.cyy;return g.vangles?function(d,e,f,k){if(0<l.angleDelta(f,k)){var t=f;f=k}else t=k;k=h.findEnclosingVertexAngles(t,g.vangles)[0];var v=h.findEnclosingVertexAngles(f,g.vangles)[1];return h.pathPolygonAnnulus(d,
e,t,f,[k,(t+f)/2,v],n,p)}:function(d,e,f,k){return l.pathAnnulus(d,e,f,k,n,p)}}var q=b("d3"),m=b("fast-isnumeric"),l=b("../../lib"),a=b("../../components/drawing"),h=b("../../plots/polar/helpers");N.exports=function(g,n,p){var d=n.xaxis,e=n.yaxis,f=n.radialAxis,k=n.angularAxis,t=r(n),v=n.layers.frontplot.select("g.barlayer");l.makeTraceGroups(v,p,"trace bars").each(function(){var w=q.select(this),y=l.ensureSingle(w,"g","points").selectAll("g.point").data(l.identity);y.enter().append("g").style("vector-effect",
"non-scaling-stroke").style("stroke-miterlimit",2).classed("point",!0);y.exit().remove();y.each(function(B){var A=q.select(this),z=B.rp0=f.c2p(B.s0),E=B.rp1=f.c2p(B.s1),C=B.thetag0=k.c2g(B.p0),u=B.thetag1=k.c2g(B.p1);if(m(z)&&m(E)&&m(C)&&m(u)&&z!==E&&C!==u){var D=f.c2g(B.s1),G=(C+u)/2;B.ct=[d.c2p(D*Math.cos(G)),e.c2p(D*Math.sin(G))];B=t(z,E,C,u)}else B="M0,0Z";l.ensureSingle(A,"path").attr("d",B)});a.setClipUrl(w,n._hasClipOnAxisFalse?n.clipIds.forTraces:null,g)})}},{"../../components/drawing":665,
"../../lib":778,"../../plots/polar/helpers":893,d3:169,"fast-isnumeric":241}],946:[function(b,N,I){I=b("../scatter/attributes");var r=b("../bar/attributes"),q=b("../../components/color/attributes"),m=b("../../plots/template_attributes").hovertemplateAttrs;b=b("../../lib/extend").extendFlat;var l=I.marker,a=l.line;N.exports={y:{valType:"data_array",editType:"calc+clearAxisTypes"},x:{valType:"data_array",editType:"calc+clearAxisTypes"},x0:{valType:"any",editType:"calc+clearAxisTypes"},y0:{valType:"any",
editType:"calc+clearAxisTypes"},dx:{valType:"number",editType:"calc"},dy:{valType:"number",editType:"calc"},xperiod:I.xperiod,yperiod:I.yperiod,xperiod0:I.xperiod0,yperiod0:I.yperiod0,xperiodalignment:I.xperiodalignment,yperiodalignment:I.yperiodalignment,name:{valType:"string",editType:"calc+clearAxisTypes"},q1:{valType:"data_array",editType:"calc+clearAxisTypes"},median:{valType:"data_array",editType:"calc+clearAxisTypes"},q3:{valType:"data_array",editType:"calc+clearAxisTypes"},lowerfence:{valType:"data_array",
editType:"calc"},upperfence:{valType:"data_array",editType:"calc"},notched:{valType:"boolean",editType:"calc"},notchwidth:{valType:"number",min:0,max:.5,dflt:.25,editType:"calc"},notchspan:{valType:"data_array",editType:"calc"},boxpoints:{valType:"enumerated",values:["all","outliers","suspectedoutliers",!1],editType:"calc"},jitter:{valType:"number",min:0,max:1,editType:"calc"},pointpos:{valType:"number",min:-2,max:2,editType:"calc"},boxmean:{valType:"enumerated",values:[!0,"sd",!1],editType:"calc"},
mean:{valType:"data_array",editType:"calc"},sd:{valType:"data_array",editType:"calc"},orientation:{valType:"enumerated",values:["v","h"],editType:"calc+clearAxisTypes"},quartilemethod:{valType:"enumerated",values:["linear","exclusive","inclusive"],dflt:"linear",editType:"calc"},width:{valType:"number",min:0,dflt:0,editType:"calc"},marker:{outliercolor:{valType:"color",dflt:"rgba(0, 0, 0, 0)",editType:"style"},symbol:b({},l.symbol,{arrayOk:!1,editType:"plot"}),opacity:b({},l.opacity,{arrayOk:!1,dflt:1,
editType:"style"}),size:b({},l.size,{arrayOk:!1,editType:"calc"}),color:b({},l.color,{arrayOk:!1,editType:"style"}),line:{color:b({},a.color,{arrayOk:!1,dflt:q.defaultLine,editType:"style"}),width:b({},a.width,{arrayOk:!1,dflt:0,editType:"style"}),outliercolor:{valType:"color",editType:"style"},outlierwidth:{valType:"number",min:0,dflt:1,editType:"style"},editType:"style"},editType:"plot"},line:{color:{valType:"color",editType:"style"},width:{valType:"number",min:0,dflt:2,editType:"style"},editType:"plot"},
fillcolor:I.fillcolor,whiskerwidth:{valType:"number",min:0,max:1,dflt:.5,editType:"calc"},offsetgroup:r.offsetgroup,alignmentgroup:r.alignmentgroup,selected:{marker:I.selected.marker,editType:"style"},unselected:{marker:I.unselected.marker,editType:"style"},text:b({},I.text,{}),hovertext:b({},I.hovertext,{}),hovertemplate:m({}),hoveron:{valType:"flaglist",flags:["boxes","points"],dflt:"boxes+points",editType:"style"}}},{"../../components/color/attributes":642,"../../lib/extend":768,"../../plots/template_attributes":906,
"../bar/attributes":921,"../scatter/attributes":1187}],947:[function(b,N,I){function r(y,B,A,z){var E=B+"0"in y;if(B in y||E&&"d"+B in y)return z=A.makeCalcdata(y,B),[f(y,A,B,z),z];z=E?y[B+"0"]:"name"in y&&("category"===A.type||d(y.name)&&-1!==["linear","log"].indexOf(A.type)||k.isDateTime(y.name)&&"date"===A.type)?y.name:z;B="multicategory"===A.type?A.r2c_just_indices(z):A.d2c(z,0,y[B+"calendar"]);y=y._length;A=Array(y);for(z=0;z<y;z++)A[z]=B;return[A]}function q(y,B){for(var A=y.length,z=Array(A+
1),E=0;E<A;E++)z[E]=y[E]-B;z[A]=y[A-1]+B;return z}function m(y){for(var B=Array(y),A=0;A<y;A++)B[A]=[];return B}function l(y,B,A){for(var z in w)k.isArrayOrTypedArray(B[z])&&(Array.isArray(A)?k.isArrayOrTypedArray(B[z][A[0]])&&(y[w[z]]=B[z][A[0]][A[1]]):y[w[z]]=B[z][A])}function a(y,B){if(k.isArrayOrTypedArray(B.selectedpoints))for(var A=0;A<y.length;A++){for(var z=y[A].pts||[],E={},C=0;C<z.length;C++)E[z[C].i]=C;k.tagSelected(z,B,E)}}function h(y,B){return y.v-B.v}function g(y){return y.v}function n(y,
B,A){return 0===A?y.q1:Math.min(y.q1,B[Math.min(k.findBin(2.5*y.q1-1.5*y.q3,B,!0)+1,A-1)])}function p(y,B,A){return 0===A?y.q3:Math.max(y.q3,B[Math.max(k.findBin(2.5*y.q3-1.5*y.q1,B),0)])}var d=b("fast-isnumeric"),e=b("../../plots/cartesian/axes"),f=b("../../plots/cartesian/align_period"),k=b("../../lib"),t=b("../../constants/numerical").BADNUM,v=k._;N.exports=function(y,B){var A=y._fullLayout,z=e.getFromId(y,B.xaxis||"x"),E=e.getFromId(y,B.yaxis||"y"),C=[],u="violin"===B.type?"_numViolins":"_numBoxes",
D,G;if("h"===B.orientation){var J=z;var L="x";z="y";var K=!!B.yperiodalignment}else J=E,L="y",E=z,z="x",K=!!B.xperiodalignment;E=r(B,z,E,A[u]);var H=E[0],Q=E[1];E=k.distinctVals(H);var M=E.vals;E=E.minDiff/2;var P="all"===(B.boxpoints||B.points)?k.identity:function(la){return la.v<X.lf||la.v>X.uf};if(B._hasPreCompStats){var T=B[L],O=function(la){return J.d2c((B[la]||[])[D])};M=Infinity;var U=-Infinity;for(D=0;D<B._length;D++){var S=H[D];if(d(S)){var X={};X.pos=X[z]=S;K&&Q&&(X.orig_p=Q[D]);X.q1=O("q1");
X.med=O("median");X.q3=O("q3");S=[];if(T&&k.isArrayOrTypedArray(T[D]))for(G=0;G<T[D].length;G++){var ba=J.d2c(T[D][G]);ba!==t&&(ba={v:ba,i:[D,G]},l(ba,B,[D,G]),S.push(ba))}X.pts=S.sort(h);ba=X[L]=S.map(g);G=ba.length;if(X.med!==t&&X.q1!==t&&X.q3!==t&&X.med>=X.q1&&X.q3>=X.med){var ca=O("lowerfence");X.lf=ca!==t&&ca<=X.q1?ca:n(X,ba,G);ca=O("upperfence");X.uf=ca!==t&&ca>=X.q3?ca:p(X,ba,G);ca=O("mean");X.mean=ca!==t?ca:G?k.mean(ba,G):(X.q1+X.q3)/2;var ia=O("sd");X.sd=ca!==t&&0<=ia?ia:G?k.stdev(ba,G,X.mean):
X.q3-X.q1;X.lo=4*X.q1-3*X.q3;X.uo=4*X.q3-3*X.q1;ca=O("notchspan");ca=ca!==t&&0<ca?ca:0===G?0:1.57*(X.q3-X.q1)/Math.sqrt(G);X.ln=X.med-ca;X.un=X.med+ca;ca=X.lf;ia=X.uf;B.boxpoints&&ba.length&&(ca=Math.min(ca,ba[0]),ia=Math.max(ia,ba[G-1]));B.notched&&(ca=Math.min(ca,X.ln),ia=Math.max(ia,X.un));X.min=ca;X.max=ia}else k.warn(["Invalid input - make sure that q1 \x3c\x3d median \x3c\x3d q3","q1 \x3d "+X.q1,"median \x3d "+X.med,"q3 \x3d "+X.q3].join("\n")),ba=X.med!==t?X.med:X.q1!==t?X.q3!==t?(X.q1+X.q3)/
2:X.q1:X.q3!==t?X.q3:0,X.med=ba,X.q1=X.q3=ba,X.lf=X.uf=ba,X.mean=X.sd=ba,X.ln=X.un=ba,X.min=X.max=ba;M=Math.min(M,X.min);U=Math.max(U,X.max);X.pts2=S.filter(P);C.push(X)}}B._extremes[J._id]=e.findExtremes(J,[M,U],{padded:!0})}else{K=J.makeCalcdata(B,L);S=q(M,E);Q=M.length;U=m(Q);for(D=0;D<B._length;D++)ba=K[D],d(ba)&&(G=k.findBin(H[D],S),0<=G&&G<Q&&(ba={v:ba,i:D},l(ba,B,D),U[G].push(ba)));H=Infinity;ca=-Infinity;S=B.quartilemethod;ia="exclusive"===S;var ja="inclusive"===S;for(D=0;D<Q;D++)0<U[D].length&&
(X={},X.pos=X[z]=M[D],S=X.pts=U[D].sort(h),ba=X[L]=S.map(g),G=ba.length,X.min=ba[0],X.max=ba[G-1],X.mean=k.mean(ba,G),X.sd=k.stdev(ba,G,X.mean),X.med=k.interp(ba,.5),G%2&&(ia||ja)?(ia?(T=ba.slice(0,G/2),O=ba.slice(G/2+1)):ja&&(T=ba.slice(0,G/2+1),O=ba.slice(G/2)),X.q1=k.interp(T,.5),X.q3=k.interp(O,.5)):(X.q1=k.interp(ba,.25),X.q3=k.interp(ba,.75)),X.lf=n(X,ba,G),X.uf=p(X,ba,G),X.lo=4*X.q1-3*X.q3,X.uo=4*X.q3-3*X.q1,ba=0===G?0:1.57*(X.q3-X.q1)/Math.sqrt(G),X.ln=X.med-ba,X.un=X.med+ba,H=Math.min(H,
X.ln),ca=Math.max(ca,X.un),X.pts2=S.filter(P),C.push(X));B._extremes[J._id]=e.findExtremes(J,B.notched?K.concat([H,ca]):K,{padded:!0})}a(C,B);return 0<C.length?(C[0].t={num:A[u],dPos:E,posLetter:z,valLetter:L,labels:{med:v(y,"median:"),min:v(y,"min:"),q1:v(y,"q1:"),q3:v(y,"q3:"),max:v(y,"max:"),mean:"sd"===B.boxmean?v(y,"mean  :"):v(y,"mean:"),lf:v(y,"lower fence:"),uf:v(y,"upper fence:")}},A[u]++,C):[{t:{empty:!0}}]};var w={text:"tx",hovertext:"htx"}},{"../../constants/numerical":753,"../../lib":778,
"../../plots/cartesian/align_period":825,"../../plots/cartesian/axes":828,"fast-isnumeric":241}],948:[function(b,N,I){function r(h,g,n,p){var d=g.calcdata;g=g._fullLayout;var e=p._id,f=e.charAt(0),k,t,v=[],w=0;for(k=0;k<n.length;k++){var y=d[n[k]];for(t=0;t<y.length;t++)v.push(p.c2l(y[t].pos,!0)),w+=(y[t].pts2||[]).length}if(v.length){k=m.distinctVals(v,{unitMinDiff:"category"===p.type||"multicategory"===p.type});v=k.minDiff/2;q.minDtick(p,k.minDiff,k.vals[0],!0);var B=g["violin"===h?"_numViolins":
"_numBoxes"],A="group"===g[h+"mode"]&&1<B,z=1-g[h+"gap"];h=1-g[h+"groupgap"];for(k=0;k<n.length;k++){y=d[n[k]];var E=y[0].trace,C=y[0].t;t=E.width;var u=E.side,D,G;if(t){var J=D=G=t/2;var L=0}else J=v,A?(D=l(g,p._id)+E.orientation,G=(D=Object.keys(((g._alignmentOpts[D]||{})[E.alignmentgroup]||{}).offsetGroups||{}).length)||B,L=D?E._offsetIndex:C.num,D=J*z*h/G,L=2*J*(-.5+(L+.5)/G)*z,G=J*z/G):(D=J*z*h,L=0,G=J);C.dPos=J;C.bPos=L;C.bdPos=D;C.wHover=G;D=L+D;C=!!t;G=(E.boxpoints||E.points)&&0<w;if("positive"===
u)u=J*(t?1:.5),t=L;else if("negative"===u){u=L;t=J*(t?1:.5);var K=D}else u=t=J,L=K=D;if(G){J=E.pointpos;G=E.jitter;var H=E.marker.size/2,Q=0;if(0<=J+G)if(Q=D*(J+G),Q>u){C=!0;var M=H;var P=Q}else Q>L&&(M=H,P=u);Q<=u&&(P=u);u=0;if(0>=J-G)if(u=-D*(J-G),u>t){C=!0;var T=H;var O=u}else u>K&&(T=H,O=t);u<=t&&(O=t)}else P=u,O=t;J=Array(y.length);for(t=0;t<y.length;t++)J[t]=y[t].pos;E._extremes[e]=q.findExtremes(p,J,{padded:C,vpadminus:O,vpadplus:P,vpadLinearized:!0,ppadminus:{x:T,y:M}[f],ppadplus:{x:M,y:T}[f]})}}}
var q=b("../../plots/cartesian/axes"),m=b("../../lib"),l=b("../../plots/cartesian/constraints").getAxisGroup,a=["v","h"];N.exports={crossTraceCalc:function(h,g){var n=h.calcdata,p=g.xaxis;g=g.yaxis;for(var d=0;d<a.length;d++){for(var e=a[d],f="h"===e?g:p,k=[],t=0;t<n.length;t++){var v=n[t],w=v[0].t;v=v[0].trace;!0!==v.visible||"box"!==v.type&&"candlestick"!==v.type||w.empty||(v.orientation||"v")!==e||v.xaxis!==p._id||v.yaxis!==g._id||k.push(t)}r("box",h,k,f)}},setPositionOffset:r}},{"../../lib":778,
"../../plots/cartesian/axes":828,"../../plots/cartesian/constraints":835}],949:[function(b,N,I){function r(d,e,f,k){function t(L){var K=0;L&&L.length&&(K+=1,m.isArrayOrTypedArray(L[0])&&L[0].length&&(K+=1));return K}function v(L){return m.validate(d[L],p[L])}var w=f("y"),y=f("x");if("box"===e.type){var B=f("q1"),A=f("median");var z=f("q3");e._hasPreCompStats=B&&B.length&&A&&A.length&&z&&z.length;z=Math.min(m.minRowLength(B),m.minRowLength(A),m.minRowLength(z))}B=t(w);A=t(y);var E=B&&m.minRowLength(w),
C=A&&m.minRowLength(y),u=k.calendar,D={autotypenumbers:k.autotypenumbers};if(e._hasPreCompStats)switch(String(A)+String(B)){case "00":w=v("x0")||v("dx");var G=!v("y0")&&!v("dy")||w?"v":"h";var J=z;break;case "10":G="v";J=Math.min(z,C);break;case "20":G="h";J=Math.min(z,y.length);break;case "01":G="h";J=Math.min(z,E);break;case "02":G="v";J=Math.min(z,w.length);break;case "12":G="v";J=Math.min(z,C,w.length);break;case "21":G="h";J=Math.min(z,y.length,E);break;case "11":J=0;break;case "22":G=!1;for(J=
0;J<y.length;J++)if("category"===n(y[J],u,D)){G=!0;break}if(G)G="v",J=Math.min(z,C,w.length);else{for(J=0;J<w.length;J++)if("category"===n(w[J],u,D)){G=!0;break}G?(G="h",J=Math.min(z,y.length,E)):(G="v",J=Math.min(z,C,w.length))}}else 0<B?(G="v",J=0<A?Math.min(C,E):Math.min(E)):0<A?(G="h",J=Math.min(C)):J=0;J?(e._length=J,w=f("orientation",G),e._hasPreCompStats?"v"===w&&0===A?(f("x0",0),f("dx",1)):"h"===w&&0===B&&(f("y0",0),f("dy",1)):"v"===w&&0===A?f("x0"):"h"===w&&0===B&&f("y0"),l.getComponentMethod("calendars",
"handleTraceDefaults")(d,e,["x","y"],k)):e.visible=!1}function q(d,e,f,k){k=k.prefix;d=m.coerce2(d,e,p,"marker.outliercolor");var t=f("marker.line.outliercolor"),v="outliers";if(e._hasPreCompStats)v="all";else if(d||t)v="suspectedoutliers";(k=f(k+"points",v))?(f("jitter","all"===k?.3:0),f("pointpos","all"===k?-1.5:0),f("marker.symbol"),f("marker.opacity"),f("marker.size"),f("marker.color",e.line.color),f("marker.line.color"),f("marker.line.width"),"suspectedoutliers"===k&&(f("marker.line.outliercolor",
e.marker.color),f("marker.line.outlierwidth")),f("selected.marker.color"),f("unselected.marker.color"),f("selected.marker.size"),f("unselected.marker.size"),f("text"),f("hovertext")):delete e.marker;k=f("hoveron");"all"!==k&&-1===k.indexOf("points")||f("hovertemplate");m.coerceSelectionMarkerOpacity(e,f)}var m=b("../../lib"),l=b("../../registry"),a=b("../../components/color"),h=b("../scatter/period_defaults"),g=b("../bar/defaults").handleGroupingDefaults,n=b("../../plots/cartesian/axis_autotype"),
p=b("./attributes");N.exports={supplyDefaults:function(d,e,f,k){function t(y,B){return m.coerce(d,e,p,y,B)}r(d,e,t,k);if(!1!==e.visible){h(d,e,k,t);if(k=e._hasPreCompStats)t("lowerfence"),t("upperfence");t("line.color",(d.marker||{}).color||f);t("line.width");t("fillcolor",a.addOpacity(e.line.color,.5));f=!1;if(k){var v=t("mean"),w=t("sd");v&&v.length&&(f=!0,w&&w.length&&(f="sd"))}t("boxmean",f);t("whiskerwidth");t("width");t("quartilemethod");f=!1;k?(k=t("notchspan"))&&k.length&&(f=!0):m.validate(d.notchwidth,
p.notchwidth)&&(f=!0);t("notched",f)&&t("notchwidth");q(d,e,t,{prefix:"box"})}},crossTraceDefaults:function(d,e){function f(y){return m.coerce(t._input,t,p,y)}for(var k,t,v=0;v<d.length;v++){t=d[v];var w=t.type;if("box"===w||"violin"===w)k=t._input,"group"===e[w+"mode"]&&g(k,t,e,f)}},handleSampleDefaults:r,handlePointsDefaults:q}},{"../../components/color":643,"../../lib":778,"../../plots/cartesian/axis_autotype":829,"../../registry":911,"../bar/defaults":925,"../scatter/period_defaults":1207,"./attributes":946}],
950:[function(b,N,I){N.exports=function(r,q){q.hoverOnBox&&(r.hoverOnBox=q.hoverOnBox);"xVal"in q&&(r.x=q.xVal);"yVal"in q&&(r.y=q.yVal);q.xa&&(r.xaxis=q.xa);q.ya&&(r.yaxis=q.ya);return r}},{}],951:[function(b,N,I){function r(n,p,d,e){function f(P){return(K(P)+H(P))/2}var k=n.cd,t=n.xa,v=n.ya,w=k[0].trace,y=k[0].t,B="violin"===w.type,A=[];var z=y.bdPos;var E=y.wHover,C=function(P){return Q.c2l(P.pos)+y.bPos-Q.c2l(L)};if(B&&"both"!==w.side){if("positive"===w.side){var u=function(P){P=C(P);return a.inbox(P,
P+E,M)};var D=z;var G=0}"negative"===w.side&&(u=function(P){P=C(P);return a.inbox(P-E,P,M)},D=0,G=z)}else u=function(P){P=C(P);return a.inbox(P-E,P+E,M)},D=G=z;B=B?function(P){return a.inbox(P.span[0]-J,P.span[1]-J,M)}:function(P){return a.inbox(P.min-J,P.max-J,M)};if("h"===w.orientation){var J=p;var L=d;var K=B;var H=u;d="y";var Q=v;p="x"}else J=d,L=p,K=u,H=B,d="x",Q=t,p="y",t=v;z=Math.min(1,z/Math.abs(Q.r2c(Q.range[1])-Q.r2c(Q.range[0])));var M=n.maxHoverDistance-z;z=n.maxSpikeDistance-z;e=a.getDistanceFunction(e,
K,H,f);a.getClosest(k,e,n);if(!1===n.index)return[];k=k[n.index];e=w.line.color;v=(w.marker||{}).color;h.opacity(e)&&w.line.width?n.color=e:h.opacity(v)&&w.boxpoints?n.color=v:n.color=w.fillcolor;n[d+"0"]=Q.c2p(k.pos+y.bPos-G,!0);n[d+"1"]=Q.c2p(k.pos+y.bPos+D,!0);n[d+"LabelVal"]=void 0!==k.orig_p?k.orig_p:k.pos;D=d+"Spike";n.spikeDistance=f(k)*z/M;n[D]=Q.c2p(k.pos,!0);G={};e=["med","q1","q3","min","max"];(w.boxmean||(w.meanline||{}).visible)&&e.push("mean");(w.boxpoints||w.points)&&e.push("lf","uf");
for(d=0;d<e.length;d++)z=e[d],z in k&&!(k[z]in G)&&(G[k[z]]=!0,v=k[z],u=t.c2p(v,!0),B=l.extendFlat({},n),B.attr=z,B[p+"0"]=B[p+"1"]=u,B[p+"LabelVal"]=v,B[p+"Label"]=(y.labels?y.labels[z]+" ":"")+m.hoverLabelText(t,v),B.hoverOnBox=!0,"mean"===z&&"sd"in k&&"sd"===w.boxmean&&(B[p+"err"]=k.sd),n.name="",n.spikeDistance=void 0,n[D]=void 0,B.hovertemplate=!1,A.push(B));return A}function q(n,p,d){for(var e=n.cd,f=n.xa,k=n.ya,t=e[0].trace,v=f.c2p(p),w=k.c2p(d),y=a.quadrature(function(E){var C=Math.max(3,
E.mrc||0);return Math.max(Math.abs(f.c2p(E.x)-v)-C,1-3/C)},function(E){var C=Math.max(3,E.mrc||0);return Math.max(Math.abs(k.c2p(E.y)-w)-C,1-3/C)}),B=!1,A=0;A<e.length;A++){p=e[A];for(var z=0;z<(p.pts||[]).length;z++)d=p.pts[z],d=y(d),d<=n.distance&&(n.distance=d,B=[A,z])}if(!B)return!1;p=e[B[0]];d=p.pts[B[1]];e=f.c2p(d.x,!0);y=k.c2p(d.y,!0);B=d.mrc||1;n=l.extendFlat({},n,{index:d.i,color:(t.marker||{}).color,name:t.name,x0:e-B,x1:e+B,y0:y-B,y1:y+B,spikeDistance:n.distance,hovertemplate:t.hovertemplate});
e=p.orig_p;y=void 0!==e?e:p.pos;"h"===t.orientation?(e=k,n.xLabelVal=d.x,n.yLabelVal=y):(e=f,n.xLabelVal=y,n.yLabelVal=d.y);y=e._id.charAt(0);n[y+"Spike"]=e.c2p(p.pos,!0);g(d,t,n);return n}var m=b("../../plots/cartesian/axes"),l=b("../../lib"),a=b("../../components/fx"),h=b("../../components/color"),g=l.fillText;N.exports={hoverPoints:function(n,p,d,e){var f=n.cd[0].trace.hoveron,k=[],t;-1!==f.indexOf("boxes")&&(k=k.concat(r(n,p,d,e)));-1!==f.indexOf("points")&&(t=q(n,p,d));if("closest"===e)return t?
[t]:k;t&&k.push(t);return k},hoverOnBoxes:r,hoverOnPoints:q}},{"../../components/color":643,"../../components/fx":683,"../../lib":778,"../../plots/cartesian/axes":828}],952:[function(b,N,I){N.exports={attributes:b("./attributes"),layoutAttributes:b("./layout_attributes"),supplyDefaults:b("./defaults").supplyDefaults,crossTraceDefaults:b("./defaults").crossTraceDefaults,supplyLayoutDefaults:b("./layout_defaults").supplyLayoutDefaults,calc:b("./calc"),crossTraceCalc:b("./cross_trace_calc").crossTraceCalc,
plot:b("./plot").plot,style:b("./style").style,styleOnSelect:b("./style").styleOnSelect,hoverPoints:b("./hover").hoverPoints,eventData:b("./event_data"),selectPoints:b("./select"),moduleType:"trace",name:"box",basePlotModule:b("../../plots/cartesian"),categories:"cartesian svg symbols oriented box-violin showLegend boxLayout zoomScale".split(" "),meta:{}}},{"../../plots/cartesian":841,"./attributes":946,"./calc":947,"./cross_trace_calc":948,"./defaults":949,"./event_data":950,"./hover":951,"./layout_attributes":953,
"./layout_defaults":954,"./plot":955,"./select":956,"./style":957}],953:[function(b,N,I){N.exports={boxmode:{valType:"enumerated",values:["group","overlay"],dflt:"overlay",editType:"calc"},boxgap:{valType:"number",min:0,max:1,dflt:.3,editType:"calc"},boxgroupgap:{valType:"number",min:0,max:1,dflt:.3,editType:"calc"}}},{}],954:[function(b,N,I){function r(a,h,g,n,p){a=p+"Layout";h=!1;for(var d=0;d<g.length;d++)if(q.traceIs(g[d],a)){h=!0;break}h&&(n(p+"mode"),n(p+"gap"),n(p+"groupgap"))}var q=b("../../registry"),
m=b("../../lib"),l=b("./layout_attributes");N.exports={supplyLayoutDefaults:function(a,h,g){r(a,h,g,function(n,p){return m.coerce(a,h,l,n,p)},"box")},_supply:r}},{"../../lib":778,"../../registry":911,"./layout_attributes":953}],955:[function(b,N,I){function r(g,n,p,d){var e="h"===p.orientation,f=n.val,k=n.pos,t=!!k.rangebreaks,v=d.bPos,w=d.wdPos||0,y=d.bPosPxOffset||0,B=p.whiskerwidth||0,A=p.notched||!1,z=A?1-2*p.notchwidth:1;if(Array.isArray(d.bdPos)){var E=d.bdPos[0];var C=d.bdPos[1]}else C=E=d.bdPos;
g=g.selectAll("path.box").data("violin"!==p.type||p.box.visible?a.identity:[]);g.enter().append("path").style("vector-effect","non-scaling-stroke").attr("class","box");g.exit().remove();g.each(function(u){if(u.empty)return"M0,0Z";var D=k.c2l(u.pos+v,!0),G=k.l2p(D-E)+y,J=k.l2p(D+C)+y,L=t?(G+J)/2:k.l2p(D)+y,K=p.whiskerwidth,H=t?G*K+(1-K)*L:k.l2p(D-w)+y;K=t?J*K+(1-K)*L:k.l2p(D+w)+y;var Q=k.l2p(D-E*z)+y;D=k.l2p(D+C*z)+y;var M=f.c2p(u.q1,!0),P=f.c2p(u.q3,!0),T=a.constrain(f.c2p(u.med,!0),Math.min(M,P)+
1,Math.max(M,P)-1),O=void 0===u.lf||!1===p.boxpoints,U=f.c2p(O?u.min:u.lf,!0);O=f.c2p(O?u.max:u.uf,!0);var S=f.c2p(u.ln,!0);u=f.c2p(u.un,!0);e?l.select(this).attr("d","M"+T+","+Q+"V"+D+"M"+M+","+G+"V"+J+(A?"H"+S+"L"+T+","+D+"L"+u+","+J:"")+"H"+P+"V"+G+(A?"H"+u+"L"+T+","+Q+"L"+S+","+G:"")+"ZM"+M+","+L+"H"+U+"M"+P+","+L+"H"+O+(0===B?"":"M"+U+","+H+"V"+K+"M"+O+","+H+"V"+K)):l.select(this).attr("d","M"+Q+","+T+"H"+D+"M"+G+","+M+"H"+J+(A?"V"+S+"L"+D+","+T+"L"+J+","+u:"")+"V"+P+"H"+G+(A?"V"+u+"L"+Q+","+
T+"L"+G+","+S:"")+"ZM"+L+","+M+"V"+U+"M"+L+","+P+"V"+O+(0===B?"":"M"+H+","+U+"H"+K+"M"+H+","+O+"H"+K))})}function q(g,n,p,d){var e=n.x;n=n.y;var f=d.bdPos,k=d.bPos,t=p.boxpoints||p.points;a.seedPseudoRandom();var v=function(w){w.forEach(function(y){y.t=d;y.trace=p});return w};g=g.selectAll("g.points").data(t?v:[]);g.enter().append("g").attr("class","points");g.exit().remove();g=g.selectAll("path").data(function(w){var y=w.pts2;var B=Math.max((w.max-w.min)/10,w.q3-w.q1);var A=1E-9*B,z=.01*B,E=[],C=
0;if(p.jitter){if(0===B)for(C=1,E=Array(y.length),B=0;B<y.length;B++)E[B]=1;else for(B=0;B<y.length;B++){var u=Math.max(0,B-5);var D=y[u].v,G=Math.min(y.length-1,B+5),J=y[G].v;"all"!==t&&(y[B].v<w.lf?J=Math.min(J,w.lf):D=Math.max(D,w.uf));u=Math.sqrt(z*(G-u)/(J-D+A))||0;u=a.constrain(Math.abs(u),0,1);E.push(u);C=Math.max(u,C)}u=2*p.jitter/(C||1)}for(B=0;B<y.length;B++)A=y[B],z=A.v,C=p.jitter?u*E[B]*(a.pseudoRandom()-.5):0,C=w.pos+k+f*(p.pointpos+C),"h"===p.orientation?(A.y=C,A.x=z):(A.x=C,A.y=z),
"suspectedoutliers"===t&&z<w.uo&&z>w.lo&&(A.so=!0);return y});g.enter().append("path").classed("point",!0);g.exit().remove();g.call(h.translatePoints,e,n)}function m(g,n,p,d){var e=n.val,f=n.pos,k=!!f.rangebreaks,t=d.bPos,v=d.bPosPxOffset||0,w=p.boxmean||(p.meanline||{}).visible;if(Array.isArray(d.bdPos)){var y=d.bdPos[0];var B=d.bdPos[1]}else B=y=d.bdPos;g=g.selectAll("path.mean").data("box"===p.type&&p.boxmean||"violin"===p.type&&p.box.visible&&p.meanline.visible?a.identity:[]);g.enter().append("path").attr("class",
"mean").style({fill:"none","vector-effect":"non-scaling-stroke"});g.exit().remove();g.each(function(A){var z=f.c2l(A.pos+t,!0),E=f.l2p(z-y)+v,C=f.l2p(z+B)+v;z=k?(E+C)/2:f.l2p(z)+v;var u=e.c2p(A.mean,!0),D=e.c2p(A.mean-A.sd,!0);A=e.c2p(A.mean+A.sd,!0);"h"===p.orientation?l.select(this).attr("d","M"+u+","+E+"V"+C+("sd"===w?"m0,0L"+D+","+z+"L"+u+","+E+"L"+A+","+z+"Z":"")):l.select(this).attr("d","M"+E+","+u+"H"+C+("sd"===w?"m0,0L"+z+","+D+"L"+E+","+u+"L"+z+","+A+"Z":""))})}var l=b("d3"),a=b("../../lib"),
h=b("../../components/drawing");N.exports={plot:function(g,n,p,d){var e=n.xaxis,f=n.yaxis;a.makeTraceGroups(d,p,"trace boxes").each(function(k){var t=l.select(this),v=k[0];k=v.t;v=v.trace;k.wdPos=k.bdPos*v.whiskerwidth;if(!0!==v.visible||k.empty)t.remove();else{if("h"===v.orientation){var w=f;var y=e}else w=e,y=f;r(t,{pos:w,val:y},v,k);q(t,{x:e,y:f},v,k);m(t,{pos:w,val:y},v,k)}})},plotBoxAndWhiskers:r,plotPoints:q,plotBoxMean:m}},{"../../components/drawing":665,"../../lib":778,d3:169}],956:[function(b,
N,I){N.exports=function(r,q){var m=r.cd,l=r.xaxis,a=r.yaxis,h=[],g,n;if(!1===q)for(g=0;g<m.length;g++)for(n=0;n<(m[g].pts||[]).length;n++)m[g].pts[n].selected=0;else for(g=0;g<m.length;g++)for(n=0;n<(m[g].pts||[]).length;n++){var p=m[g].pts[n],d=l.c2p(p.x),e=a.c2p(p.y);q.contains([d,e],null,p.i,r)?(h.push({pointNumber:p.i,x:l.c2d(p.x),y:a.c2d(p.y)}),p.selected=1):p.selected=0}return h}},{}],957:[function(b,N,I){var r=b("d3"),q=b("../../components/color"),m=b("../../components/drawing");N.exports=
{style:function(l,a,h){a=h?h:r.select(l).selectAll("g.trace.boxes");a.style("opacity",function(g){return g[0].trace.opacity});a.each(function(g){function n(f,k,t,v){f.style("stroke-width",k+"px").call(q.stroke,t).call(q.fill,v)}var p=r.select(this),d=g[0].trace;g=d.line.width;var e=p.selectAll("path.box");"candlestick"===d.type?e.each(function(f){if(!f.empty){var k=r.select(this),t=d[f.dir];n(k,t.line.width,t.line.color,t.fillcolor);k.style("opacity",d.selectedpoints&&!f.selected?.3:1)}}):(n(e,g,
d.line.color,d.fillcolor),p.selectAll("path.mean").style({"stroke-width":g,"stroke-dasharray":2*g+"px,"+g+"px"}).call(q.stroke,d.line.color),p=p.selectAll("path.point"),m.pointStyle(p,d,l))})},styleOnSelect:function(l,a,h){a=a[0].trace;h=h.selectAll("path.point");a.selectedpoints?m.selectedPointStyle(h,a):m.pointStyle(h,a,l)}}},{"../../components/color":643,"../../components/drawing":665,d3:169}],958:[function(b,N,I){function r(l){return{line:{color:q({},m.line.color,{dflt:l}),width:m.line.width,
editType:"style"},fillcolor:m.fillcolor,editType:"style"}}var q=b("../../lib").extendFlat;I=b("../ohlc/attributes");var m=b("../box/attributes");N.exports={xperiod:I.xperiod,xperiod0:I.xperiod0,xperiodalignment:I.xperiodalignment,x:I.x,open:I.open,high:I.high,low:I.low,close:I.close,line:{width:q({},m.line.width,{}),editType:"style"},increasing:r(I.increasing.line.color.dflt),decreasing:r(I.decreasing.line.color.dflt),text:I.text,hovertext:I.hovertext,whiskerwidth:q({},m.whiskerwidth,{dflt:0}),hoverlabel:I.hoverlabel}},
{"../../lib":778,"../box/attributes":946,"../ohlc/attributes":1133}],959:[function(b,N,I){function r(h,g,n,p){return{min:n,q1:Math.min(h,p),med:p,q3:Math.max(h,p),max:g}}var q=b("../../lib"),m=b("../../plots/cartesian/axes"),l=b("../../plots/cartesian/align_period"),a=b("../ohlc/calc").calcCommon;N.exports=function(h,g){var n=h._fullLayout,p=m.getFromId(h,g.xaxis),d=m.getFromId(h,g.yaxis),e=p.makeCalcdata(g,"x");p=l(g,p,"x",e);h=a(h,g,e,p,d,r);return h.length?(q.extendFlat(h[0].t,{num:n._numBoxes,
dPos:q.distinctVals(p).minDiff/2,posLetter:"x",valLetter:"y"}),n._numBoxes++,h):[{t:{empty:!0}}]}},{"../../lib":778,"../../plots/cartesian/align_period":825,"../../plots/cartesian/axes":828,"../ohlc/calc":1134}],960:[function(b,N,I){function r(g,n,p,d){g=p(d+".line.color");p(d+".line.width",n.line.width);p(d+".fillcolor",m.addOpacity(g,.5))}var q=b("../../lib"),m=b("../../components/color"),l=b("../ohlc/ohlc_defaults"),a=b("../scatter/period_defaults"),h=b("./attributes");N.exports=function(g,n,p,
d){function e(f,k){return q.coerce(g,n,h,f,k)}l(g,n,e,d)?(a(g,n,d,e,{x:!0}),e("line.width"),r(g,n,e,"increasing"),r(g,n,e,"decreasing"),e("text"),e("hovertext"),e("whiskerwidth"),d._requestRangeslider[n.xaxis]=!0):n.visible=!1}},{"../../components/color":643,"../../lib":778,"../ohlc/ohlc_defaults":1138,"../scatter/period_defaults":1207,"./attributes":958}],961:[function(b,N,I){N.exports={moduleType:"trace",name:"candlestick",basePlotModule:b("../../plots/cartesian"),categories:["cartesian","svg",
"showLegend","candlestick","boxLayout"],meta:{},attributes:b("./attributes"),layoutAttributes:b("../box/layout_attributes"),supplyLayoutDefaults:b("../box/layout_defaults").supplyLayoutDefaults,crossTraceCalc:b("../box/cross_trace_calc").crossTraceCalc,supplyDefaults:b("./defaults"),calc:b("./calc"),plot:b("../box/plot").plot,layerName:"boxlayer",style:b("../box/style").style,hoverPoints:b("../ohlc/hover").hoverPoints,selectPoints:b("../ohlc/select")}},{"../../plots/cartesian":841,"../box/cross_trace_calc":948,
"../box/layout_attributes":953,"../box/layout_defaults":954,"../box/plot":955,"../box/style":957,"../ohlc/hover":1136,"../ohlc/select":1140,"./attributes":958,"./calc":959,"./defaults":960}],962:[function(b,N,I){function r(l,a,h,g){["aaxis","baxis"].forEach(function(n){var p=n.charAt(0),d=l[n]||{},e=m.newContainer(a,n);q(d,e,{tickfont:"x",id:p+"axis",letter:p,font:a.font,name:n,data:l[p],calendar:a.calendar,dfltColor:g,bgColor:h.paper_bgcolor,autotypenumbersDflt:h.autotypenumbers,fullLayout:h});e._categories=
e._categories||[];l[n]||"-"===d.type||(l[n]={type:d.type})})}var q=b("./axis_defaults"),m=b("../../plot_api/plot_template");N.exports=function(l,a,h,g,n){g("a")||(g("da"),g("a0"));g("b")||(g("db"),g("b0"));r(l,a,h,n)}},{"../../plot_api/plot_template":817,"./axis_defaults":967}],963:[function(b,N,I){function r(m,l){if(!q(m)||10<=l)return null;for(var a=Infinity,h=-Infinity,g=m.length,n=0;n<g;n++){var p=m[n];if(q(p)){if(p=r(p,l+1))a=Math.min(p[0],a),h=Math.max(p[1],h)}else a=Math.min(p,a),h=Math.max(p,
h)}return[a,h]}var q=b("../../lib").isArrayOrTypedArray;N.exports=function(m){return r(m,0)}},{"../../lib":778}],964:[function(b,N,I){var r=b("../../plots/font_attributes");I=b("./axis_attributes");b=b("../../components/color/attributes");r=r({editType:"calc"});r.family.dflt='"Open Sans", verdana, arial, sans-serif';r.size.dflt=12;r.color.dflt=b.defaultLine;N.exports={carpet:{valType:"string",editType:"calc"},x:{valType:"data_array",editType:"calc+clearAxisTypes"},y:{valType:"data_array",editType:"calc+clearAxisTypes"},
a:{valType:"data_array",editType:"calc"},a0:{valType:"number",dflt:0,editType:"calc"},da:{valType:"number",dflt:1,editType:"calc"},b:{valType:"data_array",editType:"calc"},b0:{valType:"number",dflt:0,editType:"calc"},db:{valType:"number",dflt:1,editType:"calc"},cheaterslope:{valType:"number",dflt:1,editType:"calc"},aaxis:I,baxis:I,font:r,color:{valType:"color",dflt:b.defaultLine,editType:"plot"},transforms:void 0}},{"../../components/color/attributes":642,"../../plots/font_attributes":856,"./axis_attributes":966}],
965:[function(b,N,I){var r=b("../../lib").isArrayOrTypedArray;N.exports=function(q,m,l,a){var h=r(l)?"a":"b",g=("a"===h?q.aaxis:q.baxis).smoothing,n="a"===h?q.a2i:q.b2j,p="a"===h?l:a;a="a"===h?a:l;l="a"===h?m.a.length:m.b.length;var d="a"===h?m.b.length:m.a.length,e=Math.floor("a"===h?q.b2j(a):q.a2i(a));m="a"===h?function(G){return q.evalxy([],G,e)}:function(G){return q.evalxy([],e,G)};if(g){var f=Math.max(0,Math.min(d-2,e));var k=e-f;var t="a"===h?function(G,J){return q.dxydi([],G,f,J,k)}:function(G,
J){return q.dxydj([],f,G,k,J)}}h=n(p[0]);n=n(p[1]);p=h<n?1:-1;var v=1E-8*(n-h);var w=0<p?Math.ceil:Math.floor;a=0<p?Math.min:Math.max;d=0<p?Math.max:Math.min;var y=(0<p?Math.floor:Math.ceil)(h+v);w=w(n-v);v=m(h);for(var B=[[v]];y*p<w*p;y+=p){var A=[];var z=d(h,y);var E=a(n,y+p);var C=E-z;var u=Math.max(0,Math.min(l-2,Math.floor(.5*(z+E))));var D=m(E);g&&(z=t(u,z-u),u=t(u,E-u),A.push([v[0]+z[0]/3*C,v[1]+z[1]/3*C]),A.push([D[0]-u[0]/3*C,D[1]-u[1]/3*C]));A.push(D);B.push(A);v=D}return B}},{"../../lib":778}],
966:[function(b,N,I){I=b("../../plots/font_attributes");var r=b("../../components/color/attributes"),q=b("../../plots/cartesian/layout_attributes"),m=b("../../plot_api/edit_types").overrideAll;b("../../constants/docs");b("../../constants/docs");N.exports={color:{valType:"color",editType:"calc"},smoothing:{valType:"number",dflt:1,min:0,max:1.3,editType:"calc"},title:{text:{valType:"string",dflt:"",editType:"calc"},font:I({editType:"calc"}),offset:{valType:"number",dflt:10,editType:"calc"},editType:"calc"},
type:{valType:"enumerated",values:["-","linear","date","category"],dflt:"-",editType:"calc"},autotypenumbers:q.autotypenumbers,autorange:{valType:"enumerated",values:[!0,!1,"reversed"],dflt:!0,editType:"calc"},rangemode:{valType:"enumerated",values:["normal","tozero","nonnegative"],dflt:"normal",editType:"calc"},range:{valType:"info_array",editType:"calc",items:[{valType:"any",editType:"calc"},{valType:"any",editType:"calc"}]},fixedrange:{valType:"boolean",dflt:!1,editType:"calc"},cheatertype:{valType:"enumerated",
values:["index","value"],dflt:"value",editType:"calc"},tickmode:{valType:"enumerated",values:["linear","array"],dflt:"array",editType:"calc"},nticks:{valType:"integer",min:0,dflt:0,editType:"calc"},tickvals:{valType:"data_array",editType:"calc"},ticktext:{valType:"data_array",editType:"calc"},showticklabels:{valType:"enumerated",values:["start","end","both","none"],dflt:"start",editType:"calc"},tickfont:I({editType:"calc"}),tickangle:{valType:"angle",dflt:"auto",editType:"calc"},tickprefix:{valType:"string",
dflt:"",editType:"calc"},showtickprefix:{valType:"enumerated",values:["all","first","last","none"],dflt:"all",editType:"calc"},ticksuffix:{valType:"string",dflt:"",editType:"calc"},showticksuffix:{valType:"enumerated",values:["all","first","last","none"],dflt:"all",editType:"calc"},showexponent:{valType:"enumerated",values:["all","first","last","none"],dflt:"all",editType:"calc"},exponentformat:{valType:"enumerated",values:"none e E power SI B".split(" "),dflt:"B",editType:"calc"},minexponent:{valType:"number",
dflt:3,min:0,editType:"calc"},separatethousands:{valType:"boolean",dflt:!1,editType:"calc"},tickformat:{valType:"string",dflt:"",editType:"calc"},tickformatstops:m(q.tickformatstops,"calc","from-root"),categoryorder:{valType:"enumerated",values:["trace","category ascending","category descending","array"],dflt:"trace",editType:"calc"},categoryarray:{valType:"data_array",editType:"calc"},labelpadding:{valType:"integer",dflt:10,editType:"calc"},labelprefix:{valType:"string",editType:"calc"},labelsuffix:{valType:"string",
dflt:"",editType:"calc"},showline:{valType:"boolean",dflt:!1,editType:"calc"},linecolor:{valType:"color",dflt:r.defaultLine,editType:"calc"},linewidth:{valType:"number",min:0,dflt:1,editType:"calc"},gridcolor:{valType:"color",editType:"calc"},gridwidth:{valType:"number",min:0,dflt:1,editType:"calc"},showgrid:{valType:"boolean",dflt:!0,editType:"calc"},minorgridcount:{valType:"integer",min:0,dflt:0,editType:"calc"},minorgridwidth:{valType:"number",min:0,dflt:1,editType:"calc"},minorgridcolor:{valType:"color",
dflt:r.lightLine,editType:"calc"},startline:{valType:"boolean",editType:"calc"},startlinecolor:{valType:"color",editType:"calc"},startlinewidth:{valType:"number",dflt:1,editType:"calc"},endline:{valType:"boolean",editType:"calc"},endlinewidth:{valType:"number",dflt:1,editType:"calc"},endlinecolor:{valType:"color",editType:"calc"},tick0:{valType:"number",min:0,dflt:0,editType:"calc"},dtick:{valType:"number",min:0,dflt:1,editType:"calc"},arraytick0:{valType:"integer",min:0,dflt:0,editType:"calc"},arraydtick:{valType:"integer",
min:1,dflt:1,editType:"calc"},_deprecated:{title:{valType:"string",editType:"calc"},titlefont:I({editType:"calc"}),titleoffset:{valType:"number",dflt:10,editType:"calc"}},editType:"calc"}},{"../../components/color/attributes":642,"../../constants/docs":748,"../../plot_api/edit_types":810,"../../plots/cartesian/layout_attributes":842,"../../plots/font_attributes":856}],967:[function(b,N,I){function r(e,f){if("-"===e.type){var k=e._id.charAt(0);e.type=d(f,e[k+"calendar"],{autotypenumbers:e.autotypenumbers})}}
var q=b("./attributes"),m=b("../../components/color").addOpacity,l=b("../../registry"),a=b("../../lib"),h=b("../../plots/cartesian/tick_value_defaults"),g=b("../../plots/cartesian/tick_label_defaults"),n=b("../../plots/cartesian/category_order_defaults"),p=b("../../plots/cartesian/set_convert"),d=b("../../plots/cartesian/axis_autotype");N.exports=function(e,f,k){function t(C,u){return a.coerce(e,f,B,C,u)}function v(C,u){return a.coerce2(e,f,B,C,u)}var w=k.letter,y=k.font||{},B=q[w+"axis"];k.name&&
(f._name=k.name,f._id=k.name);t("autotypenumbers",k.autotypenumbersDflt);var A=t("type");"-"===A&&(k.data&&r(f,k.data),"-"===f.type?f.type="linear":A=e.type=f.type);t("smoothing");t("cheatertype");t("showticklabels");t("labelprefix",w+" \x3d ");t("labelsuffix");t("showtickprefix");t("showticksuffix");t("separatethousands");t("tickformat");t("exponentformat");t("minexponent");t("showexponent");t("categoryorder");t("tickmode");t("tickvals");t("ticktext");t("tick0");t("dtick");"array"===f.tickmode&&
(t("arraytick0"),t("arraydtick"));t("labelpadding");f._hovertitle=w;"date"===A&&l.getComponentMethod("calendars","handleDefaults")(e,f,"calendar",k.calendar);p(f,k.fullLayout);f.c2p=a.identity;var z=t("color",k.dfltColor),E=z===e.color?z:y.color;t("title.text")&&(a.coerceFont(t,"title.font",{family:y.family,size:Math.round(1.2*y.size),color:E}),t("title.offset"));t("tickangle");t("autorange",!f.isValidRange(e.range))&&t("rangemode");t("range");f.cleanRange();t("fixedrange");h(e,f,t,A);g(e,f,t,A,k);
n(e,f,t,{data:k.data,dataAttr:w});k=v("gridcolor",m(z,.3));w=v("gridwidth");y=t("showgrid");y||(delete f.gridcolor,delete f.gridwidth);A=v("startlinecolor",z);E=v("startlinewidth",w);t("startline",f.showgrid||!!A||!!E)||(delete f.startlinecolor,delete f.startlinewidth);z=v("endlinecolor",z);A=v("endlinewidth",w);t("endline",f.showgrid||!!z||!!A)||(delete f.endlinecolor,delete f.endlinewidth);y?(t("minorgridcount"),t("minorgridwidth",w),t("minorgridcolor",m(k,.06)),f.minorgridcount||(delete f.minorgridwidth,
delete f.minorgridcolor)):(delete f.gridcolor,delete f.gridWidth);"none"===f.showticklabels&&(delete f.tickfont,delete f.tickangle,delete f.showexponent,delete f.exponentformat,delete f.minexponent,delete f.tickformat,delete f.showticksuffix,delete f.showtickprefix);f.showticksuffix||delete f.ticksuffix;f.showtickprefix||delete f.tickprefix;t("tickmode");return f}},{"../../components/color":643,"../../lib":778,"../../plots/cartesian/axis_autotype":829,"../../plots/cartesian/category_order_defaults":832,
"../../plots/cartesian/set_convert":848,"../../plots/cartesian/tick_label_defaults":849,"../../plots/cartesian/tick_value_defaults":851,"../../registry":911,"./attributes":964}],968:[function(b,N,I){var r=b("../../plots/cartesian/axes"),q=b("../../lib").isArray1D,m=b("./cheater_basis"),l=b("./array_minmax"),a=b("./calc_gridlines"),h=b("./calc_labels"),g=b("./calc_clippath"),n=b("../heatmap/clean_2d_array"),p=b("./smooth_fill_2d_array"),d=b("../heatmap/convert_column_xyz"),e=b("./set_convert");N.exports=
function(f,k){var t=r.getFromId(f,k.xaxis);f=r.getFromId(f,k.yaxis);var v=k.aaxis,w=k.baxis,y=k.x,B=k.y,A=[];y&&q(y)&&A.push("x");B&&q(B)&&A.push("y");A.length&&d(k,v,w,"a","b",A);A=k._a=k._a||k.a;var z=k._b=k._b||k.b;y=k._x||k.x;B=k._y||k.y;var E={};k._cheater&&(y=m("index"===v.cheatertype?A.length:A,"index"===w.cheatertype?z.length:z,k.cheaterslope));k._x=y=n(y);k._y=B=n(B);p(y,A,z);p(B,A,z);e(k);k.setScale();var C=l(y),u=l(B),D=.5*(C[1]-C[0]);C=.5*(C[1]+C[0]);var G=.5*(u[1]-u[0]);u=.5*(u[1]+u[0]);
C=[C-1.3*D,C+1.3*D];u=[u-1.3*G,u+1.3*G];k._extremes[t._id]=r.findExtremes(t,C,{padded:!0});k._extremes[f._id]=r.findExtremes(f,u,{padded:!0});a(k,"a","b");a(k,"b","a");h(k,v);h(k,w);E.clipsegments=g(k._xctrl,k._yctrl,v,w);E.x=y;E.y=B;E.a=A;E.b=z;return[E]}},{"../../lib":778,"../../plots/cartesian/axes":828,"../heatmap/clean_2d_array":1067,"../heatmap/convert_column_xyz":1069,"./array_minmax":963,"./calc_clippath":969,"./calc_gridlines":970,"./calc_labels":971,"./cheater_basis":973,"./set_convert":986,
"./smooth_fill_2d_array":987}],969:[function(b,N,I){N.exports=function(r,q,m,l){var a,h=[];m=!!m.smoothing;var g=!!l.smoothing,n=r[0].length-1,p=r.length-1;l=0;var d=[];for(a=[];l<=n;l++)d[l]=r[0][l],a[l]=q[0][l];h.push({x:d,y:a,bicubic:m});l=0;d=[];for(a=[];l<=p;l++)d[l]=r[l][n],a[l]=q[l][n];h.push({x:d,y:a,bicubic:g});l=n;d=[];for(a=[];0<=l;l--)d[n-l]=r[p][l],a[n-l]=q[p][l];h.push({x:d,y:a,bicubic:m});l=p;d=[];for(a=[];0<=l;l--)d[p-l]=r[l][0],a[p-l]=q[l][0];h.push({x:d,y:a,bicubic:g});return h}},
{}],970:[function(b,N,I){var r=b("../../plots/cartesian/axes"),q=b("../../lib/extend").extendFlat;N.exports=function(m,l,a){function h(H){var Q,M=[],P=[],T={};if("b"===l){var O=m.b2j(H);var U=Math.floor(Math.max(0,Math.min(E-2,O)));var S=O-U;T.length=E;T.crossLength=z;T.xy=function(la){return m.evalxy([],la,O)};T.dxy=function(la,da){return m.dxydi([],la,U,da,S)};for(Q=0;Q<z;Q++){var X=Math.min(z-2,Q);var ba=Q-X;var ca=m.evalxy([],Q,O);if(v.smoothing&&0<Q){var ia=m.dxydi([],Q-1,U,0,S);M.push(ja[0]+
ia[0]/3);P.push(ja[1]+ia[1]/3);var ja=m.dxydi([],Q-1,U,1,S);M.push(ca[0]-ja[0]/3);P.push(ca[1]-ja[1]/3)}M.push(ca[0]);P.push(ca[1]);ja=ca}}else for(Q=m.a2i(H),X=Math.floor(Math.max(0,Math.min(z-2,Q))),ba=Q-X,T.length=z,T.crossLength=E,T.xy=function(la){return m.evalxy([],Q,la)},T.dxy=function(la,da){return m.dxydj([],X,la,ba,da)},O=0;O<E;O++)U=Math.min(E-2,O),S=O-U,ca=m.evalxy([],Q,O),v.smoothing&&0<O&&(ia=m.dxydj([],X,O-1,ba,0),M.push(ja[0]+ia[0]/3),P.push(ja[1]+ia[1]/3),ja=m.dxydj([],X,O-1,ba,1),
M.push(ca[0]-ja[0]/3),P.push(ca[1]-ja[1]/3)),M.push(ca[0]),P.push(ca[1]),ja=ca;T.axisLetter=l;T.axis=d;T.crossAxis=v;T.value=H;T.constvar=a;T.index=n;T.x=M;T.y=P;T.smoothing=v.smoothing;return T}function g(H){var Q,M=[],P=[],T={};T.length=p.length;T.crossLength=t.length;if("b"===l){var O=Math.max(0,Math.min(E-2,H));var U=Math.min(1,Math.max(0,H-O));T.xy=function(ba){return m.evalxy([],ba,H)};T.dxy=function(ba,ca){return m.dxydi([],ba,O,ca,U)};for(Q=0;Q<B;Q++)M[Q]=w[H*C][Q],P[Q]=y[H*C][Q]}else{var S=
Math.max(0,Math.min(z-2,H));var X=Math.min(1,Math.max(0,H-S));T.xy=function(ba){return m.evalxy([],H,ba)};T.dxy=function(ba,ca){return m.dxydj([],S,ba,X,ca)};for(Q=0;Q<A;Q++)M[Q]=w[Q][H*C],P[Q]=y[Q][H*C]}T.axisLetter=l;T.axis=d;T.crossAxis=v;T.value=p[H];T.constvar=a;T.index=H;T.x=M;T.y=P;T.smoothing=v.smoothing;return T}var n,p=m["_"+l],d=m[l+"axis"];var e=d._gridlines=[];var f=d._minorgridlines=[],k=d._boundarylines=[],t=m["_"+a],v=m[a+"axis"];"array"===d.tickmode&&(d.tickvals=p.slice());var w=
m._xctrl,y=m._yctrl,B=w[0].length,A=w.length,z=m._a.length,E=m._b.length;r.prepTicks(d);"array"===d.tickmode&&delete d.tickvals;var C=d.smoothing?3:1;if("array"===d.tickmode){var u=5E-15;u=[Math.floor((p.length-1-d.arraytick0)/d.arraydtick*(1+u)),Math.ceil(-d.arraytick0/d.arraydtick/(1+u))].sort(function(H,Q){return H-Q});var D=u[0]-1;u=u[1]+1;for(n=D;n<u;n++){var G=d.arraytick0+d.arraydtick*n;0>G||G>p.length-1||e.push(q(g(G),{color:d.gridcolor,width:d.gridwidth}))}for(n=D;n<u;n++){D=d.arraytick0+
d.arraydtick*n;var J=Math.min(D+d.arraydtick,p.length-1);if(!(0>D||D>p.length-1||0>J||J>p.length-1)){var L=p[D];var K=p[J];for(e=0;e<d.minorgridcount;e++)G=J-D,0>=G||(G=L+(K-L)*(e+1)/(d.minorgridcount+1)*(d.arraydtick/G),G<p[0]||G>p[p.length-1]||f.push(q(h(G),{color:d.minorgridcolor,width:d.minorgridwidth})))}}d.startline&&k.push(q(g(0),{color:d.startlinecolor,width:d.startlinewidth}));d.endline&&k.push(q(g(p.length-1),{color:d.endlinecolor,width:d.endlinewidth}))}else{u=5E-15;u=[Math.floor((p[p.length-
1]-d.tick0)/d.dtick*(1+u)),Math.ceil((p[0]-d.tick0)/d.dtick/(1+u))].sort(function(H,Q){return H-Q});D=u[0];u=u[1];for(n=D;n<=u;n++)J=d.tick0+d.dtick*n,e.push(q(h(J),{color:d.gridcolor,width:d.gridwidth}));for(n=D-1;n<u+1;n++)for(J=d.tick0+d.dtick*n,e=0;e<d.minorgridcount;e++)G=J+d.dtick*(e+1)/(d.minorgridcount+1),G<p[0]||G>p[p.length-1]||f.push(q(h(G),{color:d.minorgridcolor,width:d.minorgridwidth}));d.startline&&k.push(q(h(p[0]),{color:d.startlinecolor,width:d.startlinewidth}));d.endline&&k.push(q(h(p[p.length-
1]),{color:d.endlinecolor,width:d.endlinewidth}))}}},{"../../lib/extend":768,"../../plots/cartesian/axes":828}],971:[function(b,N,I){var r=b("../../plots/cartesian/axes"),q=b("../../lib/extend").extendFlat;N.exports=function(m,l){var a=l._labels=[],h=l._gridlines;for(m=0;m<h.length;m++){var g=h[m];if(-1!==["start","both"].indexOf(l.showticklabels)){var n=r.tickText(l,g.value);q(n,{prefix:void 0,suffix:void 0,endAnchor:!0,xy:g.xy(0),dxy:g.dxy(0,0),axis:g.axis,length:g.crossAxis.length,font:g.axis.tickfont,
isFirst:0===m,isLast:m===h.length-1});a.push(n)}-1!==["end","both"].indexOf(l.showticklabels)&&(n=r.tickText(l,g.value),q(n,{endAnchor:!1,xy:g.xy(g.crossLength-1),dxy:g.dxy(g.crossLength-2,1),axis:g.axis,length:g.crossAxis.length,font:g.axis.tickfont,isFirst:0===m,isLast:m===h.length-1}),a.push(n))}}},{"../../lib/extend":768,"../../plots/cartesian/axes":828}],972:[function(b,N,I){N.exports=function(r,q,m,l){var a=r[0]-q[0],h=r[1]-q[1],g=m[0]-q[0],n=m[1]-q[1];m=Math.pow(a*a+h*h,.25);r=Math.pow(g*g+
n*n,.25);a=(r*r*a-m*m*g)*l;l*=r*r*h-m*m*n;h=r*(m+r)*3;m=m*(m+r)*3;return[[q[0]+(h&&a/h),q[1]+(h&&l/h)],[q[0]-(m&&a/m),q[1]-(m&&l/m)]]}},{}],973:[function(b,N,I){var r=b("../../lib").isArrayOrTypedArray;N.exports=function(q,m,l){var a,h,g=[],n=r(q)?q.length:q,p=r(m)?m.length:m,d=r(q)?q:null,e=r(m)?m:null;d&&(a=(d.length-1)/(d[d.length-1]-d[0])/(n-1));e&&(h=(e.length-1)/(e[e.length-1]-e[0])/(p-1));var f=Infinity,k=-Infinity;for(q=0;q<p;q++){g[q]=[];var t=e?(e[q]-e[0])*h:q/(p-1);for(m=0;m<n;m++){var v=
d?(d[m]-d[0])*a:m/(n-1);v-=t*l;f=Math.min(v,f);k=Math.max(v,k);g[q][m]=v}}l=1/(k-f);a=-f*l;for(q=0;q<p;q++)for(m=0;m<n;m++)g[q][m]=l*g[q][m]+a;return g}},{"../../lib":778}],974:[function(b,N,I){function r(l,a,h){return[(2*(-.5*h[0]+1.5*a[0])+l[0])/3,(2*(-.5*h[1]+1.5*a[1])+l[1])/3]}var q=b("./catmull_rom"),m=b("../../lib").ensureArray;N.exports=function(l,a,h,g,n,p){var d,e,f,k,t=h[0].length,v=h.length,w=n?3*t-2:t,y=p?3*v-2:v;l=m(l,y);a=m(a,y);for(f=0;f<y;f++)l[f]=m(l[f],w),a[f]=m(a[f],w);for(k=e=
0;e<v;e++,k+=p?3:1){var B=l[k];var A=a[k];var z=h[e];var E=g[e];for(f=d=0;d<t;d++,f+=n?3:1)B[f]=z[d],A[f]=E[d]}if(n)for(k=e=0;e<v;e++,k+=p?3:1){d=1;for(f=3;d<t-1;d++,f+=3)B=q([h[e][d-1],g[e][d-1]],[h[e][d],g[e][d]],[h[e][d+1],g[e][d+1]],n),l[k][f-1]=B[0][0],a[k][f-1]=B[0][1],l[k][f+1]=B[1][0],a[k][f+1]=B[1][1];d=r([l[k][0],a[k][0]],[l[k][2],a[k][2]],[l[k][3],a[k][3]]);l[k][1]=d[0];a[k][1]=d[1];d=r([l[k][w-1],a[k][w-1]],[l[k][w-3],a[k][w-3]],[l[k][w-4],a[k][w-4]]);l[k][w-2]=d[0];a[k][w-2]=d[1]}if(p)for(f=
0;f<w;f++){for(k=3;k<y-3;k+=3)B=q([l[k-3][f],a[k-3][f]],[l[k][f],a[k][f]],[l[k+3][f],a[k+3][f]],p),l[k-1][f]=B[0][0],a[k-1][f]=B[0][1],l[k+1][f]=B[1][0],a[k+1][f]=B[1][1];d=r([l[0][f],a[0][f]],[l[2][f],a[2][f]],[l[3][f],a[3][f]]);l[1][f]=d[0];a[1][f]=d[1];d=r([l[y-1][f],a[y-1][f]],[l[y-3][f],a[y-3][f]],[l[y-4][f],a[y-4][f]]);l[y-2][f]=d[0];a[y-2][f]=d[1]}if(n&&p)for(k=1;k<y;k+=0===(k+1)%3?2:1){for(f=3;f<w-3;f+=3)B=q([l[k][f-3],a[k][f-3]],[l[k][f],a[k][f]],[l[k][f+3],a[k][f+3]],n),l[k][f-1]=.5*(l[k][f-
1]+B[0][0]),a[k][f-1]=.5*(a[k][f-1]+B[0][1]),l[k][f+1]=.5*(l[k][f+1]+B[1][0]),a[k][f+1]=.5*(a[k][f+1]+B[1][1]);d=r([l[k][0],a[k][0]],[l[k][2],a[k][2]],[l[k][3],a[k][3]]);l[k][1]=.5*(l[k][1]+d[0]);a[k][1]=.5*(a[k][1]+d[1]);d=r([l[k][w-1],a[k][w-1]],[l[k][w-3],a[k][w-3]],[l[k][w-4],a[k][w-4]]);l[k][w-2]=.5*(l[k][w-2]+d[0]);a[k][w-2]=.5*(a[k][w-2]+d[1])}return[l,a]}},{"../../lib":778,"./catmull_rom":972}],975:[function(b,N,I){N.exports={RELATIVE_CULL_TOLERANCE:1E-6}},{}],976:[function(b,N,I){N.exports=
function(r,q,m){return q&&m?function(l,a,h,g,n){l||(l=[]);var p;a*=3;h*=3;var d=g*g;var e=1-g,f=e*e;e=e*g*2;g=-3*f;f=3*(f-e);e=3*(e-d);var k=3*d,t=n*n,v=t*n,w=1-n,y=w*w,B=y*w;for(p=0;p<r.length;p++){var A=r[p];d=g*A[h][a]+f*A[h][a+1]+e*A[h][a+2]+k*A[h][a+3];var z=g*A[h+1][a]+f*A[h+1][a+1]+e*A[h+1][a+2]+k*A[h+1][a+3];var E=g*A[h+2][a]+f*A[h+2][a+1]+e*A[h+2][a+2]+k*A[h+2][a+3];A=g*A[h+3][a]+f*A[h+3][a+1]+e*A[h+3][a+2]+k*A[h+3][a+3];l[p]=B*d+3*(y*n*z+w*t*E)+v*A}return l}:q?function(l,a,h,g,n){l||(l=
[]);var p;a*=3;var d=g*g;var e=1-g,f=e*e;e=e*g*2;g=-3*f;f=3*(f-e);e=3*(e-d);var k=3*d,t=1-n;for(p=0;p<r.length;p++){var v=r[p];d=g*v[h][a]+f*v[h][a+1]+e*v[h][a+2]+k*v[h][a+3];v=g*v[h+1][a]+f*v[h+1][a+1]+e*v[h+1][a+2]+k*v[h+1][a+3];l[p]=t*d+n*v}return l}:m?function(l,a,h,g,n){l||(l=[]);var p;h*=3;var d=n*n,e=d*n,f=1-n,k=f*f,t=k*f;for(p=0;p<r.length;p++){var v=r[p];g=v[h][a+1]-v[h][a];var w=v[h+1][a+1]-v[h+1][a];var y=v[h+2][a+1]-v[h+2][a];v=v[h+3][a+1]-v[h+3][a];l[p]=t*g+3*(k*n*w+f*d*y)+e*v}return l}:
function(l,a,h,g,n){l||(l=[]);var p,d=1-n;for(p=0;p<r.length;p++){var e=r[p];g=e[h][a+1]-e[h][a];e=e[h+1][a+1]-e[h+1][a];l[p]=d*g+n*e}return l}}},{}],977:[function(b,N,I){N.exports=function(r,q,m){return q&&m?function(l,a,h,g,n){l||(l=[]);var p;a*=3;h*=3;var d=g*g,e=d*g,f=1-g,k=f*f,t=k*f;var v=n*n;var w=1-n,y=w*w;w=w*n*2;n=-3*y;y=3*(y-w);w=3*(w-v);var B=3*v;for(p=0;p<r.length;p++){var A=r[p];v=n*A[h][a]+y*A[h+1][a]+w*A[h+2][a]+B*A[h+3][a];var z=n*A[h][a+1]+y*A[h+1][a+1]+w*A[h+2][a+1]+B*A[h+3][a+1];
var E=n*A[h][a+2]+y*A[h+1][a+2]+w*A[h+2][a+2]+B*A[h+3][a+2];A=n*A[h][a+3]+y*A[h+1][a+3]+w*A[h+2][a+3]+B*A[h+3][a+3];l[p]=t*v+3*(k*g*z+f*d*E)+e*A}return l}:q?function(l,a,h,g,n){l||(l=[]);var p;a*=3;var d=n*n,e=d*n,f=1-n,k=f*f,t=k*f;for(p=0;p<r.length;p++){var v=r[p];g=v[h+1][a]-v[h][a];var w=v[h+1][a+1]-v[h][a+1];var y=v[h+1][a+2]-v[h][a+2];v=v[h+1][a+3]-v[h][a+3];l[p]=t*g+3*(k*n*w+f*d*y)+e*v}return l}:m?function(l,a,h,g,n){l||(l=[]);var p;h*=3;var d=1-g;var e=n*n;var f=1-n,k=f*f;f=f*n*2;n=-3*k;k=
3*(k-f);f=3*(f-e);var t=3*e;for(p=0;p<r.length;p++){var v=r[p];e=n*v[h][a]+k*v[h+1][a]+f*v[h+2][a]+t*v[h+3][a];v=n*v[h][a+1]+k*v[h+1][a+1]+f*v[h+2][a+1]+t*v[h+3][a+1];l[p]=d*e+g*v}return l}:function(l,a,h,g,n){l||(l=[]);var p,d=1-g;for(p=0;p<r.length;p++){var e=r[p];n=e[h+1][a]-e[h][a];e=e[h+1][a+1]-e[h][a+1];l[p]=d*n+g*e}return l}}},{}],978:[function(b,N,I){N.exports=function(r,q,m,l,a){var h=q-2,g=m-2;return l&&a?function(n,p,d){n||(n=[]);var e,f=Math.max(0,Math.min(Math.floor(p),h)),k=Math.max(0,
Math.min(Math.floor(d),g));p=Math.max(0,Math.min(1,p-f));var t=Math.max(0,Math.min(1,d-k));f*=3;k*=3;var v=p*p,w=v*p,y=1-p,B=y*y,A=B*y,z=t*t,E=z*t,C=1-t,u=C*C,D=u*C;for(e=0;e<r.length;e++){var G=r[e];d=A*G[k][f]+3*(B*p*G[k][f+1]+y*v*G[k][f+2])+w*G[k][f+3];var J=A*G[k+1][f]+3*(B*p*G[k+1][f+1]+y*v*G[k+1][f+2])+w*G[k+1][f+3];var L=A*G[k+2][f]+3*(B*p*G[k+2][f+1]+y*v*G[k+2][f+2])+w*G[k+2][f+3];G=A*G[k+3][f]+3*(B*p*G[k+3][f+1]+y*v*G[k+3][f+2])+w*G[k+3][f+3];n[e]=D*d+3*(u*t*J+C*z*L)+E*G}return n}:l?function(n,
p,d){n||(n=[]);var e=Math.max(0,Math.min(Math.floor(p),h)),f=Math.max(0,Math.min(Math.floor(d),g));p=Math.max(0,Math.min(1,p-e));d=Math.max(0,Math.min(1,d-f));var k;e*=3;var t=p*p,v=t*p,w=1-p,y=w*w,B=y*w,A=1-d;for(k=0;k<r.length;k++){var z=r[k];var E=A*z[f][e]+d*z[f+1][e];var C=A*z[f][e+1]+d*z[f+1][e+1];var u=A*z[f][e+2]+d*z[f+1][e+1];z=A*z[f][e+3]+d*z[f+1][e+1];n[k]=B*E+3*(y*p*C+w*t*u)+v*z}return n}:a?function(n,p,d){n||(n=[]);var e=Math.max(0,Math.min(Math.floor(p),h)),f=Math.max(0,Math.min(Math.floor(d),
g));p=Math.max(0,Math.min(1,p-e));d=Math.max(0,Math.min(1,d-f));var k;f*=3;var t=d*d,v=t*d,w=1-d,y=w*w,B=y*w,A=1-p;for(k=0;k<r.length;k++){var z=r[k];var E=A*z[f][e]+p*z[f][e+1];var C=A*z[f+1][e]+p*z[f+1][e+1];var u=A*z[f+2][e]+p*z[f+2][e+1];z=A*z[f+3][e]+p*z[f+3][e+1];n[k]=B*E+3*(y*d*C+w*t*u)+v*z}return n}:function(n,p,d){n||(n=[]);var e=Math.max(0,Math.min(Math.floor(p),h)),f=Math.max(0,Math.min(Math.floor(d),g));p=Math.max(0,Math.min(1,p-e));d=Math.max(0,Math.min(1,d-f));var k,t=1-d,v=1-p;for(k=
0;k<r.length;k++){var w=r[k];var y=v*w[f][e]+p*w[f][e+1];w=v*w[f+1][e]+p*w[f+1][e+1];n[k]=t*y+d*w}return n}}},{}],979:[function(b,N,I){var r=b("../../lib"),q=b("./xy_defaults"),m=b("./ab_defaults"),l=b("./attributes"),a=b("../../components/color/attributes");N.exports=function(h,g,n,p){function d(e,f){return r.coerce(h,g,l,e,f)}g._clipPathId="clip"+g.uid+"carpet";n=d("color",a.defaultLine);r.coerceFont(d,"font");d("carpet");m(h,g,p,d,n);g.a&&g.b?(3>g.a.length&&(g.aaxis.smoothing=0),3>g.b.length&&
(g.baxis.smoothing=0),q(h,g,d)||(g.visible=!1),g._cheater&&d("cheaterslope")):g.visible=!1}},{"../../components/color/attributes":642,"../../lib":778,"./ab_defaults":962,"./attributes":964,"./xy_defaults":988}],980:[function(b,N,I){N.exports={attributes:b("./attributes"),supplyDefaults:b("./defaults"),plot:b("./plot"),calc:b("./calc"),animatable:!0,isContainer:!0,moduleType:"trace",name:"carpet",basePlotModule:b("../../plots/cartesian"),categories:"cartesian svg carpet carpetAxis notLegendIsolatable noMultiCategory noHover noSortingByValue".split(" "),
meta:{}}},{"../../plots/cartesian":841,"./attributes":964,"./calc":968,"./defaults":979,"./plot":985}],981:[function(b,N,I){N.exports=function(r,q){for(var m=r._fullData.length,l,a=0;a<m;a++){var h=r._fullData[a];if(h.index!==q.index&&"carpet"===h.type&&(l||(l=h),h.carpet===q.carpet))return h}return l}},{}],982:[function(b,N,I){N.exports=function(r,q,m){if(0===r.length)return"";var l,a=[],h=m?3:1;for(l=0;l<r.length;l+=h)a.push(r[l]+","+q[l]),m&&l<r.length-h&&(a.push("C"),a.push([r[l+1]+","+q[l+1],
r[l+2]+","+q[l+2]+" "].join(" ")));return a.join(m?"":"L")}},{}],983:[function(b,N,I){var r=b("../../lib").isArrayOrTypedArray;N.exports=function(q,m,l){var a;r(q)?q.length>m.length&&(q=q.slice(0,m.length)):q=[];for(a=0;a<m.length;a++)q[a]=l(m[a]);return q}},{"../../lib":778}],984:[function(b,N,I){N.exports=function(r,q,m,l,a,h){var g=a[0]*r.dpdx(q),n=a[1]*r.dpdy(m),p=1,d=1;h&&(d=Math.max(0,(a[0]*h[0]+a[1]*h[1])/Math.sqrt(a[0]*a[0]+a[1]*a[1])/Math.sqrt(h[0]*h[0]+h[1]*h[1])));a=180*Math.atan2(n,g)/
Math.PI;-90>a?(a+=180,p=-p):90<a&&(a-=180,p=-p);return{angle:a,flip:p,p:r.c2p(l,q,m),offsetMultplier:d}}},{}],985:[function(b,N,I){function r(v,w,y,B,A,z){B="const-"+A+"-lines";y=y.selectAll("."+B).data(z);y.enter().append("path").classed(B,!0).style("vector-effect","non-scaling-stroke");y.each(function(E){var C=E.y,u=h([],E.x,v.c2p);C=h([],C,w.c2p);u="M"+g(u,C,E.smoothing);l.select(this).attr("d",u).style("stroke-width",E.width).style("stroke",E.color).style("fill","none")});y.exit().remove()}function q(v,
w,y,B,A,z,E,C){A=z.selectAll("text."+C).data(E);A.enter().append("text").classed(C,!0);var u=0,D={};A.each(function(G,J){if("auto"===G.axis.tickangle)var L=n(B,w,y,G.xy,G.dxy);else L=(G.axis.tickangle+180)*Math.PI/180,L=n(B,w,y,G.xy,[Math.cos(L),Math.sin(L)]);J||(D={angle:L.angle,flip:L.flip});J=(G.endAnchor?-1:1)*L.flip;var K=l.select(this).attr({"text-anchor":0<J?"start":"end","data-notex":1}).call(a.font,G.font).text(G.text).call(p.convertToTspans,v),H=a.bBox(this);K.attr("transform",f(L.p[0],
L.p[1])+e(L.angle)+f(G.axis.labelpadding*J,.3*H.height));u=Math.max(u,H.width+G.axis.labelpadding)});A.exit().remove();D.maxExtent=u;return D}function m(v,w,y,B,A,z,E,C,u,D,G){B=[];E.title.text&&B.push(E.title.text);w=w.selectAll("text."+G).data(B);var J=D.maxExtent;w.enter().append("text").classed(G,!0);w.each(function(){var L=n(y,C,u,A,z);-1===["start","both"].indexOf(E.showticklabels)&&(J=0);var K=E.title.font.size;J+=K+E.title.offset;var H=(D.angle+(0>D.flip?180:0)-L.angle+450)%360;H=90<H&&270>
H;var Q=l.select(this);Q.text(E.title.text).call(p.convertToTspans,v);H&&(J=(-p.lineCount(Q)+t)*k*K-J);Q.attr("transform",f(L.p[0],L.p[1])+e(L.angle)+f(0,J)).attr("text-anchor","middle").call(a.font,E.title.font)});w.exit().remove()}var l=b("d3"),a=b("../../components/drawing"),h=b("./map_1d_array"),g=b("./makepath"),n=b("./orient_text"),p=b("../../lib/svg_text_utils"),d=b("../../lib"),e=d.strRotate,f=d.strTranslate;b=b("../../constants/alignment");N.exports=function(v,w,y,B){var A=w.xaxis,z=w.yaxis,
E=v._fullLayout._clips;d.makeTraceGroups(B,y,"trace").each(function(C){var u=l.select(this),D=C[0];C=D.trace;var G=C.aaxis,J=C.baxis,L=d.ensureSingle(u,"g","minorlayer"),K=d.ensureSingle(u,"g","majorlayer"),H=d.ensureSingle(u,"g","boundarylayer"),Q=d.ensureSingle(u,"g","labellayer");u.style("opacity",C.opacity);r(A,z,K,G,"a",G._gridlines,!0);r(A,z,K,J,"b",J._gridlines,!0);r(A,z,L,G,"a",G._minorgridlines,!0);r(A,z,L,J,"b",J._minorgridlines,!0);r(A,z,H,G,"a-boundary",G._boundarylines);r(A,z,H,J,"b-boundary",
J._boundarylines);u=q(v,A,z,C,D,Q,G._labels,"a-label");J=q(v,A,z,C,D,Q,J._labels,"b-label");G=d.aggNums(Math.min,null,C.a);H=d.aggNums(Math.max,null,C.a);L=d.aggNums(Math.min,null,C.b);K=d.aggNums(Math.max,null,C.b);H=.5*(G+H);var M=L;var P=C.ab2xy(H,M,!0);var T=C.dxyda_rough(H,M);void 0===u.angle&&d.extendFlat(u,n(C,A,z,P,C.dxydb_rough(H,M)));m(v,Q,C,D,P,T,C.aaxis,A,z,u,"a-title");H=G;M=.5*(L+K);P=C.ab2xy(H,M,!0);T=C.dxydb_rough(H,M);void 0===J.angle&&d.extendFlat(J,n(C,A,z,P,C.dxyda_rough(H,M)));
m(v,Q,C,D,P,T,C.baxis,A,z,J,"b-title");Q=E.select("#"+C._clipPathId);Q.size()||(Q=E.append("clipPath").classed("carpetclip",!0));u=d.ensureSingle(Q,"path","carpetboundary");K=D.clipsegments;H=[];for(L=0;L<K.length;L++)D=K[L],J=h([],D.x,A.c2p),G=h([],D.y,z.c2p),H.push(g(J,G,D.bicubic));D="M"+H.join("L")+"Z";Q.attr("id",C._clipPathId);u.attr("d",D)})};var k=b.LINE_SPACING,t=(1-b.MID_SHIFT)/k+1},{"../../components/drawing":665,"../../constants/alignment":745,"../../lib":778,"../../lib/svg_text_utils":803,
"./makepath":982,"./map_1d_array":983,"./orient_text":984,d3:169}],986:[function(b,N,I){var r=b("./constants"),q=b("../../lib/search").findBin,m=b("./compute_control_points"),l=b("./create_spline_evaluator"),a=b("./create_i_derivative_evaluator"),h=b("./create_j_derivative_evaluator");N.exports=function(g){var n=g._a,p=g._b,d=n.length,e=p.length,f=g.aaxis,k=g.baxis,t=n[0],v=n[d-1],w=p[0],y=p[e-1],B=n[n.length-1]-n[0],A=p[p.length-1]-p[0],z=B*r.RELATIVE_CULL_TOLERANCE,E=A*r.RELATIVE_CULL_TOLERANCE;
t-=z;v+=z;w-=E;y+=E;g.isVisible=function(C,u){return C>t&&C<v&&u>w&&u<y};g.isOccluded=function(C,u){return C<t||C>v||u<w||u>y};g.setScale=function(){var C=m(g._xctrl,g._yctrl,g._x,g._y,f.smoothing,k.smoothing);g._xctrl=C[0];g._yctrl=C[1];g.evalxy=l([g._xctrl,g._yctrl],d,e,f.smoothing,k.smoothing);g.dxydi=a([g._xctrl,g._yctrl],f.smoothing,k.smoothing);g.dxydj=h([g._xctrl,g._yctrl],f.smoothing,k.smoothing)};g.i2a=function(C){var u=Math.max(0,Math.floor(C[0]),d-2);C=C[0]-u;return(1-C)*n[u]+C*n[u+1]};
g.j2b=function(C){var u=Math.max(0,Math.floor(C[1]),d-2);C=C[1]-u;return(1-C)*p[u]+C*p[u+1]};g.ij2ab=function(C){return[g.i2a(C[0]),g.j2b(C[1])]};g.a2i=function(C){var u=Math.max(0,Math.min(q(C,n),d-2)),D=n[u];return Math.max(0,Math.min(d-1,u+(C-D)/(n[u+1]-D)))};g.b2j=function(C){var u=Math.max(0,Math.min(q(C,p),e-2)),D=p[u];return Math.max(0,Math.min(e-1,u+(C-D)/(p[u+1]-D)))};g.ab2ij=function(C){return[g.a2i(C[0]),g.b2j(C[1])]};g.i2c=function(C,u){return g.evalxy([],C,u)};g.ab2xy=function(C,u,D){if(!D&&
(C<n[0]||C>n[d-1]|u<p[0]||u>p[e-1]))return[!1,!1];var G=g.a2i(C),J=g.b2j(u),L=g.evalxy([],G,J);if(D){var K=D=0,H=[],Q;C<n[0]?(G=Q=0,D=(C-n[0])/(n[1]-n[0])):C>n[d-1]?(Q=d-2,G=1,D=(C-n[d-1])/(n[d-1]-n[d-2])):(Q=Math.max(0,Math.min(d-2,Math.floor(G))),G-=Q);u<p[0]?(J=C=0,K=(u-p[0])/(p[1]-p[0])):u>p[e-1]?(C=e-2,J=1,K=(u-p[e-1])/(p[e-1]-p[e-2])):(C=Math.max(0,Math.min(e-2,Math.floor(J))),J-=C);D&&(g.dxydi(H,Q,C,G,J),L[0]+=H[0]*D,L[1]+=H[1]*D);K&&(g.dxydj(H,Q,C,G,J),L[0]+=H[0]*K,L[1]+=H[1]*K)}return L};
g.c2p=function(C,u,D){return[u.c2p(C[0]),D.c2p(C[1])]};g.p2x=function(C,u,D){return[u.p2c(C[0]),D.p2c(C[1])]};g.dadi=function(C){C=Math.max(0,Math.min(n.length-2,C));return n[C+1]-n[C]};g.dbdj=function(C){C=Math.max(0,Math.min(p.length-2,C));return p[C+1]-p[C]};g.dxyda=function(C,u,D,G){u=g.dxydi(null,C,u,D,G);C=g.dadi(C,D);return[u[0]/C,u[1]/C]};g.dxydb=function(C,u,D,G){C=g.dxydj(null,C,u,D,G);u=g.dbdj(u,G);return[C[0]/u,C[1]/u]};g.dxyda_rough=function(C,u,D){D=B*(D||.1);var G=g.ab2xy(C+D,u,!0);
C=g.ab2xy(C-D,u,!0);return[.5*(G[0]-C[0])/D,.5*(G[1]-C[1])/D]};g.dxydb_rough=function(C,u,D){D=A*(D||.1);var G=g.ab2xy(C,u+D,!0);C=g.ab2xy(C,u-D,!0);return[.5*(G[0]-C[0])/D,.5*(G[1]-C[1])/D]};g.dpdx=function(C){return C._m};g.dpdy=function(C){return C._m}}},{"../../lib/search":798,"./compute_control_points":974,"./constants":975,"./create_i_derivative_evaluator":976,"./create_j_derivative_evaluator":977,"./create_spline_evaluator":978}],987:[function(b,N,I){var r=b("../../lib");N.exports=function(q,
m,l){var a,h,g=[],n=[],p=q[0].length,d=q.length,e=0;for(a=0;a<p;a++)for(h=0;h<d;h++){if(void 0===q[h][a]){g.push(a);n.push(h);var f=q[h];var k=a,t=void 0,v=0,w=0;0<a&&void 0!==(t=q[h][a-1])&&(w++,v+=t);a<p-1&&void 0!==(t=q[h][a+1])&&(w++,v+=t);0<h&&void 0!==(t=q[h-1][a])&&(w++,v+=t);h<d-1&&void 0!==(t=q[h+1][a])&&(w++,v+=t);f[k]=v/Math.max(1,w)}e=Math.max(e,Math.abs(q[h][a]))}if(!g.length)return q;t=0;v=g.length;do{for(f=k=0;f<v;f++){a=g[f];h=n[f];var y=w=0;if(0===a){var B=Math.min(p-1,2);var A=m[B];
var z=m[1];B=q[h][B];var E=q[h][1];y+=E+(E-B)*(m[0]-z)/(z-A);w++}else a===p-1&&(B=Math.max(0,p-3),A=m[B],z=m[p-2],B=q[h][B],E=q[h][p-2],y+=E+(E-B)*(m[p-1]-z)/(z-A),w++);(0===a||a===p-1)&&0<h&&h<d-1&&(A=l[h+1]-l[h],z=l[h]-l[h-1],y+=(z*q[h+1][a]+A*q[h-1][a])/(z+A),w++);0===h?(B=Math.min(d-1,2),A=l[B],z=l[1],B=q[B][a],E=q[1][a],y+=E+(E-B)*(l[0]-z)/(z-A),w++):h===d-1&&(B=Math.max(0,d-3),A=l[B],z=l[d-2],B=q[B][a],E=q[d-2][a],y+=E+(E-B)*(l[d-1]-z)/(z-A),w++);(0===h||h===d-1)&&0<a&&a<p-1&&(A=m[a+1]-m[a],
z=m[a]-m[a-1],y+=(z*q[h][a+1]+A*q[h][a-1])/(z+A),w++);if(w)y/=w;else{y=m[a+1]-m[a];A=m[a]-m[a-1];z=l[h+1]-l[h];B=l[h]-l[h-1];E=y*A*(y+A);var C=z*B*(z+B);y=(E*(B*q[h+1][a]+z*q[h-1][a])+C*(A*q[h][a+1]+y*q[h][a-1]))/(C*(A+y)+E*(B+z))}y-=q[h][a];A=y/e;k+=A*A;w=w?0:.85;q[h][a]+=y*(1+w)}k=Math.sqrt(k)}while(100>t++&&1E-5<k);r.log("Smoother converged to",k,"after",t,"iterations");return q}},{"../../lib":778}],988:[function(b,N,I){var r=b("../../lib").isArray1D;N.exports=function(q,m,l){var a=(q=l("x"))&&
q.length,h=(l=l("y"))&&l.length;if(!a&&!h)return!1;m._cheater=!q;a&&!r(q)||h&&!r(l)?m._length=null:(q=a?q.length:Infinity,h&&(q=Math.min(q,l.length)),m.a&&m.a.length&&(q=Math.min(q,m.a.length)),m.b&&m.b.length&&(q=Math.min(q,m.b.length)),m._length=q);return!0}},{"../../lib":778}],989:[function(b,N,I){I=b("../../plots/template_attributes").hovertemplateAttrs;var r=b("../scattergeo/attributes"),q=b("../../components/colorscale/attributes"),m=b("../../plots/attributes"),l=b("../../components/color/attributes").defaultLine;
b=b("../../lib/extend").extendFlat;var a=r.marker.line;N.exports=b({locations:{valType:"data_array",editType:"calc"},locationmode:r.locationmode,z:{valType:"data_array",editType:"calc"},geojson:b({},r.geojson,{}),featureidkey:r.featureidkey,text:b({},r.text,{}),hovertext:b({},r.hovertext,{}),marker:{line:{color:b({},a.color,{dflt:l}),width:b({},a.width,{dflt:1}),editType:"calc"},opacity:{valType:"number",arrayOk:!0,min:0,max:1,dflt:1,editType:"style"},editType:"calc"},selected:{marker:{opacity:r.selected.marker.opacity,
editType:"plot"},editType:"plot"},unselected:{marker:{opacity:r.unselected.marker.opacity,editType:"plot"},editType:"plot"},hoverinfo:b({},m.hoverinfo,{editType:"calc",flags:["location","z","text","name"]}),hovertemplate:I(),showlegend:b({},m.showlegend,{dflt:!1})},q("",{cLetter:"z",editTypeOverride:"calc"}))},{"../../components/color/attributes":642,"../../components/colorscale/attributes":650,"../../lib/extend":768,"../../plots/attributes":824,"../../plots/template_attributes":906,"../scattergeo/attributes":1229}],
990:[function(b,N,I){function r(g){return g&&"string"===typeof g}var q=b("fast-isnumeric"),m=b("../../constants/numerical").BADNUM,l=b("../../components/colorscale/calc"),a=b("../scatter/arrays_to_calcdata"),h=b("../scatter/calc_selection");N.exports=function(g,n){var p=n._length,d=Array(p);var e=n.geojson?function(w){return r(w)||q(w)}:r;for(var f=0;f<p;f++){var k=d[f]={},t=n.locations[f],v=n.z[f];e(t)&&q(v)?(k.loc=t,k.z=v):(k.loc=null,k.z=m);k.index=f}a(d,n);l(g,n,{vals:n.z,containerStr:"",cLetter:"z"});
h(d,n);return d}},{"../../components/colorscale/calc":651,"../../constants/numerical":753,"../scatter/arrays_to_calcdata":1186,"../scatter/calc_selection":1189,"fast-isnumeric":241}],991:[function(b,N,I){var r=b("../../lib"),q=b("../../components/colorscale/defaults"),m=b("./attributes");N.exports=function(l,a,h,g){function n(e,f){return r.coerce(l,a,m,e,f)}h=n("locations");var p=n("z");if(h&&h.length&&r.isArrayOrTypedArray(p)&&p.length){a._length=Math.min(h.length,p.length);h=n("geojson");if("string"===
typeof h&&""!==h||r.isPlainObject(h))var d="geojson-id";"geojson-id"===n("locationmode",d)&&n("featureidkey");n("text");n("hovertext");n("hovertemplate");n("marker.line.width")&&n("marker.line.color");n("marker.opacity");q(l,a,g,n,{prefix:"",cLetter:"z"});r.coerceSelectionMarkerOpacity(a,n)}else a.visible=!1}},{"../../components/colorscale/defaults":653,"../../lib":778,"./attributes":989}],992:[function(b,N,I){N.exports=function(r,q,m,l,a){r.location=q.location;r.z=q.z;q=l[a];q.fIn&&q.fIn.properties&&
(r.properties=q.fIn.properties);r.ct=q.ct;return r}},{}],993:[function(b,N,I){var r=b("../../plots/cartesian/axes"),q=b("./attributes"),m=b("../../lib").fillText;N.exports=function(l,a,h){var g=l.cd,n=g[0].trace,p=l.subplot,d=[a,h],e=[a+360,h];for(a=0;a<g.length;a++){var f=g[a];var k=!1;if(f._polygons){for(h=0;h<f._polygons.length;h++)f._polygons[h].contains(d)&&(k=!k),f._polygons[h].contains(e)&&(k=!k);if(k)break}}if(k&&f)return l.x0=l.x1=l.xa.c2p(f.ct),l.y0=l.y1=l.ya.c2p(f.ct),l.index=f.index,l.location=
f.loc,l.z=f.z,l.zLabel=r.tickText(p.mockAxis,p.mockAxis.c2l(f.z),"hover").text,l.hovertemplate=f.hovertemplate,g=f,n.hovertemplate||(f=g.hi||n.hoverinfo,p=String(g.loc),a="all"===f?q.hoverinfo.flags:f.split("+"),f=-1!==a.indexOf("name"),k=-1!==a.indexOf("location"),d=-1!==a.indexOf("z"),a=-1!==a.indexOf("text"),h=[],!f&&k?l.nameOverride=p:(f&&(l.nameOverride=n.name),k&&h.push(p)),d&&h.push(l.zLabel),a&&m(g,n,h),l.extraText=h.join("\x3cbr\x3e")),[l]}},{"../../lib":778,"../../plots/cartesian/axes":828,
"./attributes":989}],994:[function(b,N,I){N.exports={attributes:b("./attributes"),supplyDefaults:b("./defaults"),colorbar:b("../heatmap/colorbar"),calc:b("./calc"),calcGeoJSON:b("./plot").calcGeoJSON,plot:b("./plot").plot,style:b("./style").style,styleOnSelect:b("./style").styleOnSelect,hoverPoints:b("./hover"),eventData:b("./event_data"),selectPoints:b("./select"),moduleType:"trace",name:"choropleth",basePlotModule:b("../../plots/geo"),categories:["geo","noOpacity","showLegend"],meta:{}}},{"../../plots/geo":860,
"../heatmap/colorbar":1068,"./attributes":989,"./calc":990,"./defaults":991,"./event_data":992,"./hover":993,"./plot":995,"./select":996,"./style":997}],995:[function(b,N,I){var r=b("d3"),q=b("../../lib"),m=b("../../lib/geo_location_utils"),l=b("../../lib/topojson_utils").getTopojsonFeatures,a=b("../../plots/cartesian/autorange").findExtremes,h=b("./style").style;N.exports={calcGeoJSON:function(g,n){var p=g[0].trace;n=n[p.geo];var d=n._subplot,e=p.locationmode,f=p._length,k="geojson-id"===e?m.extractTraceFeature(g):
l(p,d.topojson);d=[];for(var t=[],v=0;v<f;v++){var w=g[v],y="geojson-id"===e?w.fOut:m.locationToFeature(e,w.loc,k);y?(w.geojson=y,w.ct=y.properties.ct,w._polygons=m.feature2polygons(y),w=m.computeBbox(y),d.push(w[0],w[2]),t.push(w[1],w[3])):w.geojson=null}"geojson"===n.fitbounds&&"geojson-id"===e&&(g=m.computeBbox(m.getTraceGeojson(p)),d=[g[0],g[2]],t=[g[1],g[3]]);g={padded:!0};p._extremes.lon=a(n.lonaxis._ax,d,g);p._extremes.lat=a(n.lataxis._ax,t,g)},plot:function(g,n,p){n=n.layers.backplot.select(".choroplethlayer");
q.makeTraceGroups(n,p,"trace choropleth").each(function(d){var e=r.select(this).selectAll("path.choroplethlocation").data(q.identity);e.enter().append("path").classed("choroplethlocation",!0);e.exit().remove();h(g,d)})}}},{"../../lib":778,"../../lib/geo_location_utils":771,"../../lib/topojson_utils":806,"../../plots/cartesian/autorange":827,"./style":997,d3:169}],996:[function(b,N,I){N.exports=function(r,q){var m=r.cd,l=r.xaxis,a=r.yaxis,h=[],g,n;if(!1===q)for(g=0;g<m.length;g++)m[g].selected=0;else for(g=
0;g<m.length;g++){var p=m[g];if(n=p.ct){var d=l.c2p(n);var e=a.c2p(n);q.contains([d,e],null,g,r)?(h.push({pointNumber:g,lon:n[0],lat:n[1]}),p.selected=1):p.selected=0}}return h}},{}],997:[function(b,N,I){function r(h,g){var n=g[0].trace;g=g[0].node3.selectAll(".choroplethlocation");var p=n.marker||{},d=p.line||{},e=a.makeColorScaleFuncFromTrace(n);g.each(function(f){q.select(this).attr("fill",e(f.z)).call(m.stroke,f.mlc||d.color).call(l.dashLine,"",f.mlw||d.width||0).style("opacity",p.opacity)});
l.selectedPointStyle(g,n,h)}var q=b("d3"),m=b("../../components/color"),l=b("../../components/drawing"),a=b("../../components/colorscale");N.exports={style:function(h,g){g&&r(h,g)},styleOnSelect:function(h,g){var n=g[0].node3,p=g[0].trace;p.selectedpoints?l.selectedPointStyle(n.selectAll(".choroplethlocation"),p,h):r(h,g)}}},{"../../components/color":643,"../../components/colorscale":655,"../../components/drawing":665,d3:169}],998:[function(b,N,I){I=b("../choropleth/attributes");var r=b("../../components/colorscale/attributes"),
q=b("../../plots/template_attributes").hovertemplateAttrs,m=b("../../plots/attributes");b=b("../../lib/extend").extendFlat;N.exports=b({locations:{valType:"data_array",editType:"calc"},z:{valType:"data_array",editType:"calc"},geojson:{valType:"any",editType:"calc"},featureidkey:b({},I.featureidkey,{}),below:{valType:"string",editType:"plot"},text:I.text,hovertext:I.hovertext,marker:{line:{color:b({},I.marker.line.color,{editType:"plot"}),width:b({},I.marker.line.width,{editType:"plot"}),editType:"calc"},
opacity:b({},I.marker.opacity,{editType:"plot"}),editType:"calc"},selected:{marker:{opacity:b({},I.selected.marker.opacity,{editType:"plot"}),editType:"plot"},editType:"plot"},unselected:{marker:{opacity:b({},I.unselected.marker.opacity,{editType:"plot"}),editType:"plot"},editType:"plot"},hoverinfo:I.hoverinfo,hovertemplate:q({},{keys:["properties"]}),showlegend:b({},m.showlegend,{dflt:!1})},r("",{cLetter:"z",editTypeOverride:"calc"}))},{"../../components/colorscale/attributes":650,"../../lib/extend":768,
"../../plots/attributes":824,"../../plots/template_attributes":906,"../choropleth/attributes":989}],999:[function(b,N,I){function r(n){var p=n[0].trace,d=p._opts;if(p.selectedpoints){p=a.makeSelectedPointStyleFns(p);for(var e=0;e<n.length;e++){var f=n[e];f.fOut&&(f.fOut.properties.mo2=p.selectedOpacityFn(f))}n={type:"identity",property:"mo2"}}else n=m.isArrayOrTypedArray(p.marker.opacity)?{type:"identity",property:"mo"}:p.marker.opacity;m.extendFlat(d.fill.paint,{"fill-opacity":n});m.extendFlat(d.line.paint,
{"line-opacity":n});return d}var q=b("fast-isnumeric"),m=b("../../lib"),l=b("../../components/colorscale"),a=b("../../components/drawing"),h=b("../../lib/geojson_utils").makeBlank,g=b("../../lib/geo_location_utils");N.exports={convert:function(n){var p=n[0].trace,d=!0===p.visible&&0!==p._length,e={layout:{visibility:"none"},paint:{}},f={layout:{visibility:"none"},paint:{}},k=p._opts={fill:e,line:f,geojson:h()};if(!d)return k;d=g.extractTraceFeature(n);if(!d)return k;var t=l.makeColorScaleFuncFromTrace(p),
v=p.marker;p=v.line||{};var w;m.isArrayOrTypedArray(v.opacity)&&(w=function(u){u=u.mo;return q(u)?+m.constrain(u,0,1):0});var y;m.isArrayOrTypedArray(p.color)&&(y=function(u){return u.mlc});var B;m.isArrayOrTypedArray(p.width)&&(B=function(u){return u.mlw});for(var A=0;A<n.length;A++){var z=n[A],E=z.fOut;if(E){var C=E.properties;C.fc=t(z.z);w&&(C.mo=w(z));y&&(C.mlc=y(z));B&&(C.mlw=B(z));z.ct=C.ct;z._polygons=g.feature2polygons(E)}}w=w?{type:"identity",property:"mo"}:v.opacity;m.extendFlat(e.paint,
{"fill-color":{type:"identity",property:"fc"},"fill-opacity":w});m.extendFlat(f.paint,{"line-color":y?{type:"identity",property:"mlc"}:p.color,"line-width":B?{type:"identity",property:"mlw"}:p.width,"line-opacity":w});e.layout.visibility="visible";f.layout.visibility="visible";k.geojson={type:"FeatureCollection",features:d};r(n);return k},convertOnSelect:r}},{"../../components/colorscale":655,"../../components/drawing":665,"../../lib":778,"../../lib/geo_location_utils":771,"../../lib/geojson_utils":772,
"fast-isnumeric":241}],1E3:[function(b,N,I){var r=b("../../lib"),q=b("../../components/colorscale/defaults"),m=b("./attributes");N.exports=function(l,a,h,g){function n(e,f){return r.coerce(l,a,m,e,f)}h=n("locations");var p=n("z"),d=n("geojson");r.isArrayOrTypedArray(h)&&h.length&&r.isArrayOrTypedArray(p)&&p.length&&("string"===typeof d&&""!==d||r.isPlainObject(d))?(n("featureidkey"),a._length=Math.min(h.length,p.length),n("below"),n("text"),n("hovertext"),n("hovertemplate"),n("marker.line.width")&&
n("marker.line.color"),n("marker.opacity"),q(l,a,g,n,{prefix:"",cLetter:"z"}),r.coerceSelectionMarkerOpacity(a,n)):a.visible=!1}},{"../../components/colorscale/defaults":653,"../../lib":778,"./attributes":998}],1001:[function(b,N,I){N.exports={attributes:b("./attributes"),supplyDefaults:b("./defaults"),colorbar:b("../heatmap/colorbar"),calc:b("../choropleth/calc"),plot:b("./plot"),hoverPoints:b("../choropleth/hover"),eventData:b("../choropleth/event_data"),selectPoints:b("../choropleth/select"),styleOnSelect:function(r,
q){q&&q[0].trace._glTrace.updateOnSelect(q)},getBelow:function(r,q){r=q.getMapLayers();for(q=r.length-2;0<=q;q--){var m=r[q].id;if("string"===typeof m&&0===m.indexOf("water"))for(var l=q+1;l<r.length;l++)if(m=r[l].id,"string"===typeof m&&-1===m.indexOf("plotly-"))return m}},moduleType:"trace",name:"choroplethmapbox",basePlotModule:b("../../plots/mapbox"),categories:["mapbox","gl","noOpacity","showLegend"],meta:{hr_name:"choropleth_mapbox"}}},{"../../plots/mapbox":885,"../choropleth/calc":990,"../choropleth/event_data":992,
"../choropleth/hover":993,"../choropleth/select":996,"../heatmap/colorbar":1068,"./attributes":998,"./defaults":1E3,"./plot":1002}],1002:[function(b,N,I){function r(a,h){this.type="choroplethmapbox";this.subplot=a;this.uid=h;this.sourceId="source-"+h;this.layerList=[["fill",l+h+"-fill"],["line",l+h+"-line"]];this.below=null}var q=b("./convert").convert,m=b("./convert").convertOnSelect,l=b("../../plots/mapbox/constants").traceLayerPrefix;b=r.prototype;b.update=function(a){this._update(q(a))};b.updateOnSelect=
function(a){this._update(m(a))};b._update=function(a){var h=this.subplot,g=this.layerList,n=h.belowLookup["trace-"+this.uid];h.map.getSource(this.sourceId).setData(a.geojson);n!==this.below&&(this._removeLayers(),this._addLayers(a,n),this.below=n);for(n=0;n<g.length;n++){var p=g[n],d=p[1];p=a[p[0]];h.setOptions(d,"setLayoutProperty",p.layout);"visible"===p.layout.visibility&&h.setOptions(d,"setPaintProperty",p.paint)}};b._addLayers=function(a,h){for(var g=this.subplot,n=this.layerList,p=this.sourceId,
d=0;d<n.length;d++){var e=n[d],f=e[0],k=a[f];g.addLayer({type:f,id:e[1],source:p,layout:k.layout,paint:k.paint},h)}};b._removeLayers=function(){for(var a=this.subplot.map,h=this.layerList,g=h.length-1;0<=g;g--)a.removeLayer(h[g][1])};b.dispose=function(){var a=this.subplot.map;this._removeLayers();a.removeSource(this.sourceId)};N.exports=function(a,h){var g=h[0].trace,n=new r(a,g.uid),p=n.sourceId,d=q(h);g=n.below=a.belowLookup["trace-"+g.uid];a.map.addSource(p,{type:"geojson",data:d.geojson});n._addLayers(d,
g);return h[0].trace._glTrace=n}},{"../../plots/mapbox/constants":883,"./convert":999}],1003:[function(b,N,I){I=b("../../components/colorscale/attributes");var r=b("../../plots/template_attributes").hovertemplateAttrs,q=b("../mesh3d/attributes"),m=b("../../plots/attributes");b=b("../../lib/extend").extendFlat;var l={x:{valType:"data_array",editType:"calc+clearAxisTypes"},y:{valType:"data_array",editType:"calc+clearAxisTypes"},z:{valType:"data_array",editType:"calc+clearAxisTypes"},u:{valType:"data_array",
editType:"calc"},v:{valType:"data_array",editType:"calc"},w:{valType:"data_array",editType:"calc"},sizemode:{valType:"enumerated",values:["scaled","absolute"],editType:"calc",dflt:"scaled"},sizeref:{valType:"number",editType:"calc",min:0},anchor:{valType:"enumerated",editType:"calc",values:["tip","tail","cm","center"],dflt:"cm"},text:{valType:"string",dflt:"",arrayOk:!0,editType:"calc"},hovertext:{valType:"string",dflt:"",arrayOk:!0,editType:"calc"},hovertemplate:r({editType:"calc"},{keys:["norm"]}),
showlegend:b({},m.showlegend,{dflt:!1})};b(l,I("",{colorAttr:"u/v/w norm",showScaleDflt:!0,editTypeOverride:"calc"}));["opacity","lightposition","lighting"].forEach(function(a){l[a]=q[a]});l.hoverinfo=b({},m.hoverinfo,{editType:"calc",flags:"x y z u v w norm text name".split(" "),dflt:"x+y+z+norm+text+name"});l.transforms=void 0;N.exports=l},{"../../components/colorscale/attributes":650,"../../lib/extend":768,"../../plots/attributes":824,"../../plots/template_attributes":906,"../mesh3d/attributes":1128}],
1004:[function(b,N,I){var r=b("../../components/colorscale/calc");N.exports=function(q,m){for(var l=m.u,a=m.v,h=m.w,g=Math.min(m.x.length,m.y.length,m.z.length,l.length,a.length,h.length),n=-Infinity,p=Infinity,d=0;d<g;d++){var e=l[d],f=a[d],k=h[d];e=Math.sqrt(e*e+f*f+k*k);n=Math.max(n,e);p=Math.min(p,e)}m._len=g;m._normMax=n;r(q,m,{vals:[p,n],containerStr:"",cLetter:"c"})}},{"../../components/colorscale/calc":651}],1005:[function(b,N,I){function r(f,k){this.scene=f;this.uid=k;this.data=this.mesh=
null}function q(f,k){function t(B,A){var z=v[A],E=w[p[A]];return a(B,function(C){return z.d2l(C)*E})}var v=f.fullSceneLayout,w=f.dataScale;f={};f.vectors=n(t(k.u,"xaxis"),t(k.v,"yaxis"),t(k.w,"zaxis"),k._len);f.positions=n(t(k.x,"xaxis"),t(k.y,"yaxis"),t(k.z,"zaxis"),k._len);var y=g(k);f.colormap=h(k);f.vertexIntensityBounds=[y.min/k._normMax,y.max/k._normMax];f.coneOffset=d[k.anchor];f.coneSize="scaled"===k.sizemode?k.sizeref||.5:k.sizeref&&k._normMax?k.sizeref/k._normMax:.5;f=m(f);y=k.lightposition;
f.lightPosition=[y.x,y.y,y.z];f.ambient=k.lighting.ambient;f.diffuse=k.lighting.diffuse;f.specular=k.lighting.specular;f.roughness=k.lighting.roughness;f.fresnel=k.lighting.fresnel;f.opacity=k.opacity;k._pad=e[k.anchor]*f.vectorScale*f.coneScale*k._normMax;return f}var m=b("gl-cone3d"),l=b("gl-cone3d").createConeMesh,a=b("../../lib").simpleMap,h=b("../../lib/gl_format_color").parseColorScale,g=b("../../components/colorscale").extractOpts,n=b("../../plots/gl3d/zip3");b=r.prototype;b.handlePick=function(f){if(f.object===
this.mesh){var k=f.index=f.data.index,t=this.data.u[k],v=this.data.v[k],w=this.data.w[k];f.traceCoordinate=[this.data.x[k],this.data.y[k],this.data.z[k],t,v,w,Math.sqrt(t*t+v*v+w*w)];t=this.data.hovertext||this.data.text;Array.isArray(t)&&void 0!==t[k]?f.textLabel=t[k]:t&&(f.textLabel=t);return!0}};var p={xaxis:0,yaxis:1,zaxis:2},d={tip:1,tail:0,cm:.25,center:.5},e={tip:1,tail:1,cm:.75,center:.5};b.update=function(f){this.data=f;f=q(this.scene,f);this.mesh.update(f)};b.dispose=function(){this.scene.glplot.remove(this.mesh);
this.mesh.dispose()};N.exports=function(f,k){var t=f.glplot.gl,v=q(f,k);t=l(t,v);v=new r(f,k.uid);v.mesh=t;v.data=k;t._trace=v;f.glplot.add(t);return v}},{"../../components/colorscale":655,"../../lib":778,"../../lib/gl_format_color":774,"../../plots/gl3d/zip3":881,"gl-cone3d":260}],1006:[function(b,N,I){var r=b("../../lib"),q=b("../../components/colorscale/defaults"),m=b("./attributes");N.exports=function(l,a,h,g){function n(t,v){return r.coerce(l,a,m,t,v)}h=n("u");var p=n("v"),d=n("w"),e=n("x"),
f=n("y"),k=n("z");h&&h.length&&p&&p.length&&d&&d.length&&e&&e.length&&f&&f.length&&k&&k.length?(n("sizeref"),n("sizemode"),n("anchor"),n("lighting.ambient"),n("lighting.diffuse"),n("lighting.specular"),n("lighting.roughness"),n("lighting.fresnel"),n("lightposition.x"),n("lightposition.y"),n("lightposition.z"),q(l,a,g,n,{prefix:"",cLetter:"c"}),n("text"),n("hovertext"),n("hovertemplate"),a._length=null):a.visible=!1}},{"../../components/colorscale/defaults":653,"../../lib":778,"./attributes":1003}],
1007:[function(b,N,I){N.exports={moduleType:"trace",name:"cone",basePlotModule:b("../../plots/gl3d"),categories:["gl3d","showLegend"],attributes:b("./attributes"),supplyDefaults:b("./defaults"),colorbar:{min:"cmin",max:"cmax"},calc:b("./calc"),plot:b("./convert"),eventData:function(r,q){r.norm=q.traceCoordinate[6];return r},meta:{}}},{"../../plots/gl3d":870,"./attributes":1003,"./calc":1004,"./convert":1005,"./defaults":1006}],1008:[function(b,N,I){I=b("../heatmap/attributes");var r=b("../scatter/attributes"),
q=b("../../components/colorscale/attributes"),m=b("../../components/drawing/attributes").dash,l=b("../../plots/font_attributes"),a=b("../../lib/extend").extendFlat,h=b("../../constants/filter_ops"),g=h.COMPARISON_OPS2;h=h.INTERVAL_OPS;b("../../constants/docs");b=r.line;N.exports=a({z:I.z,x:I.x,x0:I.x0,dx:I.dx,y:I.y,y0:I.y0,dy:I.dy,xperiod:I.xperiod,yperiod:I.yperiod,xperiod0:r.xperiod0,yperiod0:r.yperiod0,xperiodalignment:I.xperiodalignment,yperiodalignment:I.yperiodalignment,text:I.text,hovertext:I.hovertext,
transpose:I.transpose,xtype:I.xtype,ytype:I.ytype,zhoverformat:I.zhoverformat,hovertemplate:I.hovertemplate,hoverongaps:I.hoverongaps,connectgaps:a({},I.connectgaps,{}),fillcolor:{valType:"color",editType:"calc"},autocontour:{valType:"boolean",dflt:!0,editType:"calc",impliedEdits:{"contours.start":void 0,"contours.end":void 0,"contours.size":void 0}},ncontours:{valType:"integer",dflt:15,min:1,editType:"calc"},contours:{type:{valType:"enumerated",values:["levels","constraint"],dflt:"levels",editType:"calc"},
start:{valType:"number",dflt:null,editType:"plot",impliedEdits:{"^autocontour":!1}},end:{valType:"number",dflt:null,editType:"plot",impliedEdits:{"^autocontour":!1}},size:{valType:"number",dflt:null,min:0,editType:"plot",impliedEdits:{"^autocontour":!1}},coloring:{valType:"enumerated",values:["fill","heatmap","lines","none"],dflt:"fill",editType:"calc"},showlines:{valType:"boolean",dflt:!0,editType:"plot"},showlabels:{valType:"boolean",dflt:!1,editType:"plot"},labelfont:l({editType:"plot",colorEditType:"style"}),
labelformat:{valType:"string",dflt:"",editType:"plot"},operation:{valType:"enumerated",values:[].concat(g).concat(h),dflt:"\x3d",editType:"calc"},value:{valType:"any",dflt:0,editType:"calc"},editType:"calc",impliedEdits:{autocontour:!1}},line:{color:a({},b.color,{editType:"style+colorbars"}),width:{valType:"number",min:0,editType:"style+colorbars"},dash:m,smoothing:a({},b.smoothing,{}),editType:"plot"}},q("",{cLetter:"z",autoColorDflt:!1,editTypeOverride:"calc"}))},{"../../components/colorscale/attributes":650,
"../../components/drawing/attributes":664,"../../constants/docs":748,"../../constants/filter_ops":749,"../../lib/extend":768,"../../plots/font_attributes":856,"../heatmap/attributes":1065,"../scatter/attributes":1187}],1009:[function(b,N,I){var r=b("../../components/colorscale"),q=b("../heatmap/calc"),m=b("./set_contours"),l=b("./end_plus");N.exports=function(a,h){var g=q(a,h),n=g[0].z;m(h,n);var p=h.contours,d=r.extractOpts(h);"heatmap"===p.coloring&&d.auto&&!1===h.autocontour?(n=p.start,d=l(p),
p=p.size||1,d=Math.floor((d-n)/p)+1,isFinite(p)||(d=p=1),n-=p/2,p=[n,n+d*p]):p=n;r.calc(a,h,{vals:p,cLetter:"z"});return g}},{"../../components/colorscale":655,"../heatmap/calc":1066,"./end_plus":1019,"./set_contours":1027}],1010:[function(b,N,I){N.exports=function(r,q){var m=r[0],l=m.z,a;switch(q.type){case "levels":m=Math.min(l[0][0],l[0][1]);for(a=0;a<r.length;a++){var h=r[a];h.prefixBoundary=!h.edgepaths.length&&(m>h.level||h.starts.length&&m===h.level)}break;case "constraint":if(m.prefixBoundary=
!1,!m.edgepaths.length){var g=m.x.length,n=m.y.length;r=-Infinity;h=Infinity;for(a=0;a<n;a++)h=Math.min(h,l[a][0]),h=Math.min(h,l[a][g-1]),r=Math.max(r,l[a][0]),r=Math.max(r,l[a][g-1]);for(a=1;a<g-1;a++)h=Math.min(h,l[0][a]),h=Math.min(h,l[n-1][a]),r=Math.max(r,l[0][a]),r=Math.max(r,l[n-1][a]);a=q.value;switch(q._operation){case "\x3e":a>r&&(m.prefixBoundary=!0);break;case "\x3c":if(a<h||m.starts.length&&a===h)m.prefixBoundary=!0;break;case "[]":q=Math.min(a[0],a[1]);a=Math.max(a[0],a[1]);if(a<h||
q>r||m.starts.length&&a===h)m.prefixBoundary=!0;break;case "][":q=Math.min(a[0],a[1]),a=Math.max(a[0],a[1]),q<h&&a>r&&(m.prefixBoundary=!0)}}}}},{}],1011:[function(b,N,I){var r=b("../../components/colorscale"),q=b("./make_color_map"),m=b("./end_plus");N.exports={min:"zmin",max:"zmax",calc:function(l,a,h){l=a.contours;var g=a.line,n=l.size||1,p=l.coloring,d=q(a,{isColorbar:!0});"heatmap"===p?(a=r.extractOpts(a),h._fillgradient=a.reversescale?r.flipScale(a.colorscale):a.colorscale,h._zrange=[a.min,
a.max]):"fill"===p&&(h._fillcolor=d);h._line={color:"lines"===p?d:g.color,width:!1!==l.showlines?g.width:0,dash:g.dash};h._levels={start:l.start,end:m(l),size:n}}}},{"../../components/colorscale":655,"./end_plus":1019,"./make_color_map":1024}],1012:[function(b,N,I){N.exports={BOTTOMSTART:[1,9,13,104,713],TOPSTART:[4,6,7,104,713],LEFTSTART:[8,12,14,208,1114],RIGHTSTART:[2,3,11,208,1114],NEWDELTA:[null,[-1,0],[0,-1],[-1,0],[1,0],null,[0,-1],[-1,0],[0,1],[0,1],null,[0,1],[1,0],[1,0],[0,-1]],CHOOSESADDLE:{104:[4,
1],208:[2,8],713:[7,13],1114:[11,14]},SADDLEREMAINDER:{1:4,2:8,4:1,7:13,8:2,11:14,13:7,14:11},LABELDISTANCE:2,LABELINCREASE:10,LABELMIN:3,LABELMAX:10,LABELOPTIMIZER:{EDGECOST:1,ANGLECOST:1,NEIGHBORCOST:5,SAMELEVELFACTOR:10,SAMELEVELDISTANCE:5,MAXCOST:100,INITIALSEARCHPOINTS:10,ITERATIONS:5}}},{}],1013:[function(b,N,I){var r=b("fast-isnumeric"),q=b("./label_defaults");I=b("../../components/color");var m=I.addOpacity,l=I.opacity;b=b("../../constants/filter_ops");var a=b.CONSTRAINT_REDUCTION,h=b.COMPARISON_OPS2;
N.exports=function(g,n,p,d,e,f){var k=n.contours,t=p("contours.operation");k._operation=a[t];if(-1===h.indexOf(k.operation))if(p("contours.value",[0,1]),Array.isArray(k.value))if(2<k.value.length)k.value=k.value.slice(2);else if(0===k.length)k.value=[0,1];else if(2>k.length){var v=parseFloat(k.value[0]);k.value=[v,v+1]}else k.value=[parseFloat(k.value[0]),parseFloat(k.value[1])];else r(k.value)&&(v=parseFloat(k.value),k.value=[v,v+1]);else p("contours.value",0),r(k.value)||(Array.isArray(k.value)?
k.value=parseFloat(k.value[0]):k.value=0);if("\x3d"===t)k=k.showlines=!0;else{k=p("contours.showlines");var w=p("fillcolor",m((g.line||{}).color||e,.5))}if(k){g=w&&l(w)?m(n.fillcolor,1):e;var y=p("line.color",g);p("line.width",2);p("line.dash")}p("line.smoothing");q(p,d,y,f)}},{"../../components/color":643,"../../constants/filter_ops":749,"./label_defaults":1023,"fast-isnumeric":241}],1014:[function(b,N,I){function r(h,g){function n(e){return a(e)?+e:null}var p=Array.isArray(g),d;-1!==l.COMPARISON_OPS2.indexOf(h)?
d=p?n(g[0]):n(g):-1!==l.INTERVAL_OPS.indexOf(h)?d=p?[n(g[0]),n(g[1])]:[n(g),n(g)]:-1!==l.SET_OPS.indexOf(h)&&(d=p?g.map(n):[n(g)]);return d}function q(h){return function(g){g=r(h,g);var n=Math.min(g[0],g[1]);g=Math.max(g[0],g[1]);return{start:n,end:g,size:g-n}}}function m(h){return function(g){g=r(h,g);return{start:g,end:Infinity,size:Infinity}}}var l=b("../../constants/filter_ops"),a=b("fast-isnumeric");N.exports={"[]":q("[]"),"][":q("]["),"\x3e":m("\x3e"),"\x3c":m("\x3c"),"\x3d":m("\x3d")}},{"../../constants/filter_ops":749,
"fast-isnumeric":241}],1015:[function(b,N,I){N.exports=function(r,q,m,l){r=l("contours.start");l=l("contours.end");l=!1===r||!1===l;r=m("contours.size");(l?!(q.autocontour=!0):!m("autocontour",!1))&&r||m("ncontours")}},{}],1016:[function(b,N,I){function r(m){return q.extendFlat({},m,{edgepaths:q.extendDeep([],m.edgepaths),paths:q.extendDeep([],m.paths),starts:q.extendDeep([],m.starts)})}var q=b("../../lib");N.exports=function(m,l){var a=function(n){return n.reverse()},h=function(n){return n};switch(l){case "\x3d":case "\x3c":return m;
case "\x3e":1!==m.length&&q.warn("Contour data invalid for the specified inequality operation.");var g=m[0];for(l=0;l<g.edgepaths.length;l++)g.edgepaths[l]=a(g.edgepaths[l]);for(l=0;l<g.paths.length;l++)g.paths[l]=a(g.paths[l]);for(l=0;l<g.starts.length;l++)g.starts[l]=a(g.starts[l]);return m;case "][":l=a,a=h,h=l;case "[]":2!==m.length&&q.warn("Contour data invalid for the specified inequality range operation.");g=r(m[0]);m=r(m[1]);for(l=0;l<g.edgepaths.length;l++)g.edgepaths[l]=a(g.edgepaths[l]);
for(l=0;l<g.paths.length;l++)g.paths[l]=a(g.paths[l]);for(l=0;l<g.starts.length;l++)g.starts[l]=a(g.starts[l]);for(;m.edgepaths.length;)g.edgepaths.push(h(m.edgepaths.shift()));for(;m.paths.length;)g.paths.push(h(m.paths.shift()));for(;m.starts.length;)g.starts.push(h(m.starts.shift()));return[g]}}},{"../../lib":778}],1017:[function(b,N,I){var r=b("../../lib"),q=b("../heatmap/xyz_defaults"),m=b("../scatter/period_defaults"),l=b("./constraint_defaults"),a=b("./contours_defaults"),h=b("./style_defaults"),
g=b("./attributes");N.exports=function(n,p,d,e){function f(v,w){return r.coerce(n,p,g,v,w)}function k(v){return r.coerce2(n,p,g,v)}if(q(n,p,f,e)){m(n,p,e,f);f("text");f("hovertext");f("hovertemplate");f("hoverongaps");var t="constraint"===f("contours.type");f("connectgaps",r.isArray1D(p.z));t?l(n,p,f,e,d):(a(n,p,f,k),h(n,p,f,e))}else p.visible=!1}},{"../../lib":778,"../heatmap/xyz_defaults":1079,"../scatter/period_defaults":1207,"./attributes":1008,"./constraint_defaults":1013,"./contours_defaults":1015,
"./style_defaults":1029}],1018:[function(b,N,I){var r=b("../../lib"),q=b("./constraint_mapping"),m=b("./end_plus");N.exports=function(l,a,h){var g="constraint"===l.type?q[l._operation](l.value):l,n=g.size,p=[],d=m(g),e=h.trace._carpetTrace;a=e?{xaxis:e.aaxis,yaxis:e.baxis,x:h.a,y:h.b}:{xaxis:a.xaxis,yaxis:a.yaxis,x:h.x,y:h.y};for(g=g.start;g<d;g+=n)if(p.push(r.extendFlat({level:g,crossings:{},starts:[],edgepaths:[],paths:[],z:h.z,smoothing:h.trace.line.smoothing},a)),1E3<p.length){r.warn("Too many contours, clipping at 1000",
l);break}return p}},{"../../lib":778,"./constraint_mapping":1014,"./end_plus":1019}],1019:[function(b,N,I){N.exports=function(r){return r.end+r.size/1E6}},{}],1020:[function(b,N,I){function r(h,g,n,p){return Math.abs(h[0]-g[0])<n&&Math.abs(h[1]-g[1])<p}function q(h,g,n,p,d){var e=g.join(","),f=h.crossings[e],k=f,t=0,v=0;20<k&&n?208===k||1114===k?t=0===g[0]?1:-1:v=0===g[1]?1:-1:-1!==a.BOTTOMSTART.indexOf(k)?v=1:-1!==a.LEFTSTART.indexOf(k)?t=1:-1!==a.TOPSTART.indexOf(k)?v=-1:t=-1;var w=[t,v];k=[m(h,
g,[-w[0],-w[1]])];var y=h.z.length,B=h.z[0].length;t=g.slice();var A=w.slice();for(v=0;1E4>v;v++){20<f?(f=a.CHOOSESADDLE[f][0>(w[0]||w[1])?0:1],h.crossings[e]=a.SADDLEREMAINDER[f]):delete h.crossings[e];w=a.NEWDELTA[f];if(!w){l.log("Found bad marching index:",f,g,h.level);break}k.push(m(h,g,w));g[0]+=w[0];g[1]+=w[1];e=g.join(",");r(k[k.length-1],k[k.length-2],p,d)&&k.pop();f=w[0]&&(0>g[0]||g[0]>B-2)||w[1]&&(0>g[1]||g[1]>y-2);if(g[0]===t[0]&&g[1]===t[1]&&w[0]===A[0]&&w[1]===A[1]||n&&f)break;f=h.crossings[e]}1E4===
v&&l.log("Infinite loop in contour?");g=r(k[0],k[k.length-1],p,d);w=0;y=.2*h.smoothing;e=[];f=0;for(v=1;v<k.length;v++){A=k[v];var z=k[v-1];B=A[2]-z[2];A=A[3]-z[3];B=Math.sqrt(B*B+A*A);w+=B;e.push(B)}B=w/e.length*y;for(v=k.length-2;v>=f;v--)if(A=e[v],A<B){y=0;for(w=v-1;w>=f;w--)if(A+e[w]<B)A+=e[w];else break;if(g&&v===k.length-2)for(y=0;y<w;y++)if(A+e[y]<B)A+=e[y];else break;A=v-w+y+1;z=Math.floor((v+w+y+2)/2);A=g||v!==k.length-2?g||-1!==w?A%2?k[z%k.length]:[(k[z%k.length][0]+k[(z+1)%k.length][0])/
2,(k[z%k.length][1]+k[(z+1)%k.length][1])/2]:k[0]:k[k.length-1];k.splice(w+1,v-w+1,A);v=w+1;y&&(f=y);g&&(v===k.length-2?k[y]=k[k.length-1]:0===v&&(k[k.length-1]=k[0]))}k.splice(0,f);for(v=0;v<k.length;v++)k[v].length=2;if(!(2>k.length))if(g)k.pop(),h.paths.push(k);else{n||l.log("Unclosed interior contour?",h.level,t.join(","),k.join("L"));e=!1;for(n=0;n<h.edgepaths.length;n++)if(v=h.edgepaths[n],!e&&r(v[0],k[k.length-1],p,d)){k.pop();e=!0;f=!1;for(t=0;t<h.edgepaths.length;t++)if(g=h.edgepaths[t],
r(g[g.length-1],k[0],p,d)){f=!0;k.shift();h.edgepaths.splice(n,1);t===n?h.paths.push(k.concat(g)):(t>n&&t--,h.edgepaths[t]=g.concat(k,v));break}f||(h.edgepaths[n]=k.concat(v))}for(n=0;n<h.edgepaths.length&&!e;n++)v=h.edgepaths[n],r(v[v.length-1],k[0],p,d)&&(k.shift(),h.edgepaths[n]=v.concat(k),e=!0);e||h.edgepaths.push(k)}}function m(h,g,n){var p=g[0]+Math.max(n[0],0);g=g[1]+Math.max(n[1],0);var d=h.z[g][p],e=h.xaxis,f=h.yaxis;if(n[1])return n=(h.level-d)/(h.z[g][p+1]-d),[e.c2p((1-n)*h.x[p]+n*h.x[p+
1],!0),f.c2p(h.y[g],!0),p+n,g];n=(h.level-d)/(h.z[g+1][p]-d);return[e.c2p(h.x[p],!0),f.c2p((1-n)*h.y[g]+n*h.y[g+1],!0),p,g+n]}var l=b("../../lib"),a=b("./constants");N.exports=function(h,g,n){var p,d;g=g||.01;n=n||.01;for(d=0;d<h.length;d++){var e=h[d];for(p=0;p<e.starts.length;p++){var f=e.starts[p];q(e,f,"edge",g,n)}for(p=0;Object.keys(e.crossings).length&&1E4>p;)p++,f=Object.keys(e.crossings)[0].split(",").map(Number),q(e,f,void 0,g,n);1E4===p&&l.log("Infinite loop in contour?")}}},{"../../lib":778,
"./constants":1012}],1021:[function(b,N,I){var r=b("../../components/color"),q=b("../heatmap/hover");N.exports=function(m,l,a,h,g){(m=q(m,l,a,h,g,!0))&&m.forEach(function(n){var p=n.trace;"constraint"===p.contours.type&&(p.fillcolor&&r.opacity(p.fillcolor)?n.color=r.addOpacity(p.fillcolor,1):p.contours.showlines&&r.opacity(p.line.color)&&(n.color=r.addOpacity(p.line.color,1)))});return m}},{"../../components/color":643,"../heatmap/hover":1072}],1022:[function(b,N,I){N.exports={attributes:b("./attributes"),
supplyDefaults:b("./defaults"),calc:b("./calc"),plot:b("./plot").plot,style:b("./style"),colorbar:b("./colorbar"),hoverPoints:b("./hover"),moduleType:"trace",name:"contour",basePlotModule:b("../../plots/cartesian"),categories:["cartesian","svg","2dMap","contour","showLegend"],meta:{}}},{"../../plots/cartesian":841,"./attributes":1008,"./calc":1009,"./colorbar":1011,"./defaults":1017,"./hover":1021,"./plot":1026,"./style":1028}],1023:[function(b,N,I){var r=b("../../lib");N.exports=function(q,m,l,a){a||
(a={});q("contours.showlabels")&&(m=m.font,r.coerceFont(q,"contours.labelfont",{family:m.family,size:m.size,color:l}),q("contours.labelformat"));!1!==a.hasHover&&q("zhoverformat")}},{"../../lib":778}],1024:[function(b,N,I){var r=b("d3"),q=b("../../components/colorscale"),m=b("./end_plus");N.exports=function(l){var a=l.contours,h=a.start,g=m(a),n=a.size||1,p=Math.floor((g-h)/n)+1,d="lines"===a.coloring?0:1,e=q.extractOpts(l);isFinite(n)||(p=n=1);var f=e.reversescale?q.flipScale(e.colorscale):e.colorscale,
k=f.length;l=Array(k);g=Array(k);var t;if("heatmap"===a.coloring){h=e.min;d=e.max;for(t=0;t<k;t++)e=f[t],l[t]=e[0]*(d-h)+h,g[t]=e[1];n=r.extent([h,d,a.start,a.start+n*(p-1)]);a=n[h<d?0:1];n=n[h<d?1:0];a!==h&&(l.splice(0,0,a),g.splice(0,0,g[0]));n!==d&&(l.push(n),g.push(g[g.length-1]))}else for(t=0;t<k;t++)e=f[t],l[t]=(e[0]*(p+d-1)-d/2)*n+h,g[t]=e[1];return q.makeColorScaleFunc({domain:l,range:g},{noNumericCheck:!0})}},{"../../components/colorscale":655,"./end_plus":1019,d3:169}],1025:[function(b,
N,I){var r=b("./constants");N.exports=function(q){var m=q[0].z,l=m.length,a=m[0].length,h=2===l||2===a,g,n,p;for(n=0;n<l-1;n++){var d=[];0===n&&(d=d.concat(r.BOTTOMSTART));n===l-2&&(d=d.concat(r.TOPSTART));for(g=0;g<a-1;g++){var e=d.slice();0===g&&(e=e.concat(r.LEFTSTART));g===a-2&&(e=e.concat(r.RIGHTSTART));var f=g+","+n;var k=[[m[n][g],m[n][g+1]],[m[n+1][g],m[n+1][g+1]]];for(p=0;p<q.length;p++){var t=q[p];var v=t.level;var w=(k[0][0]>v?0:1)+(k[0][1]>v?0:2)+(k[1][1]>v?0:4)+(k[1][0]>v?0:8);v=5===
w||10===w?v>(k[0][0]+k[0][1]+k[1][0]+k[1][1])/4?5===w?713:1114:5===w?104:208:15===w?0:w;v&&(t.crossings[f]=v,-1!==e.indexOf(v)&&(t.starts.push([g,n]),h&&-1!==e.indexOf(v,e.indexOf(v)+1)&&t.starts.push([g,n])))}}}}},{"./constants":1012}],1026:[function(b,N,I){function r(A,z,E,C){var u="fill"===C.coloring||"constraint"===C.type&&"\x3d"!==C._operation,D="M"+E.join("L")+"Z";u&&w(z,C);A=a.ensureSingle(A,"g","contourfill").selectAll("path").data(u?z:[]);A.enter().append("path");A.exit().remove();A.each(function(G){(G=
(G.prefixBoundary?D:"")+q(G,E))?l.select(this).attr("d",G).style("stroke","none"):l.select(this).remove()})}function q(A,z){for(var E="",C=0,u=A.edgepaths.map(function(Q,M){return M}),D=!0,G,J,L,K;u.length;){J=h.smoothopen(A.edgepaths[C],A.smoothing);E+=D?J:J.replace(/^M/,"L");u.splice(u.indexOf(C),1);D=A.edgepaths[C][A.edgepaths[C].length-1];L=-1;for(J=0;4>J;J++){if(!D){a.log("Missing end?",C,A);break}.01>Math.abs(D[1]-z[0][1])&&!(.01>Math.abs(D[0]-z[2][0]))?G=z[1]:.01>Math.abs(D[0]-z[0][0])?G=z[0]:
.01>Math.abs(D[1]-z[2][1])?G=z[3]:.01>Math.abs(D[0]-z[2][0])&&(G=z[2]);for(K=0;K<A.edgepaths.length;K++){var H=A.edgepaths[K][0];.01>Math.abs(D[0]-G[0])?.01>Math.abs(D[0]-H[0])&&0<=(H[1]-D[1])*(G[1]-H[1])&&(G=H,L=K):.01>Math.abs(D[1]-G[1])?.01>Math.abs(D[1]-H[1])&&0<=(H[0]-D[0])*(G[0]-H[0])&&(G=H,L=K):a.log("endpt to newendpt is not vert. or horz.",D,G,H)}D=G;if(0<=L)break;E+="L"+G}if(L===A.edgepaths.length){a.log("unclosed perimeter path");break}C=L;if(D=-1===u.indexOf(C))C=u[0],E+="Z"}for(C=0;C<
A.paths.length;C++)E+=h.smoothclosed(A.paths[C],A.smoothing);return E}function m(A,z,E,C,u){var D=a.ensureSingle(A,"g","contourlines"),G=!1!==u.showlines,J=u.showlabels,L=G&&J,K=I.createLines(D,G||J,z);D=I.createLineClip(D,L,E,C.trace.uid);A=A.selectAll("g.contourlabels").data(J?[0]:[]);A.exit().remove();A.enter().append("g").classed("contourlabels",!0);if(J){var H=[],Q=[];a.clearLocationCache();var M=I.labelFormatter(E,C),P=h.tester.append("text").attr("data-notex",1).call(h.font,u.labelfont),T=
z[0].xaxis,O=z[0].yaxis;u=T._length;var U=O._length,S=T.range,X=O.range,ba=a.aggNums(Math.min,null,C.x),ca=a.aggNums(Math.max,null,C.x),ia=a.aggNums(Math.min,null,C.y),ja=a.aggNums(Math.max,null,C.y);C=Math.max(T.c2p(ba,!0),0);T=Math.min(T.c2p(ca,!0),u);ca=Math.max(O.c2p(ja,!0),0);O=Math.min(O.c2p(ia,!0),U);var la={};S[0]<S[1]?(la.left=C,la.right=T):(la.left=T,la.right=C);X[0]<X[1]?(la.top=ca,la.bottom=O):(la.top=O,la.bottom=ca);la.middle=(la.top+la.bottom)/2;la.center=(la.left+la.right)/2;H.push([[la.left,
la.top],[la.right,la.top],[la.right,la.bottom],[la.left,la.bottom]]);var da=y.LABELDISTANCE*Math.sqrt(u*u+U*U)/Math.max(1,z.length/y.LABELINCREASE);K.each(function(oa){var sa=I.calcTextOpts(oa.level,M,P,E);l.select(this).selectAll("path").each(function(){var ma=a.getVisibleSegment(this,la,sa.height/2);if(ma&&!(ma.len<(sa.width+sa.height)*y.LABELMIN))for(var qa=Math.min(Math.ceil(ma.len/da),y.LABELMAX),pa=0;pa<qa;pa++){var na=I.findBestTextLocation(this,ma,sa,Q,la);if(!na)break;I.addLabelData(na,sa,
Q,H)}})});P.remove();I.drawLabels(A,Q,E,D,L?H:null)}J&&!G&&K.remove()}var l=b("d3"),a=b("../../lib"),h=b("../../components/drawing"),g=b("../../components/colorscale"),n=b("../../lib/svg_text_utils"),p=b("../../plots/cartesian/axes"),d=b("../../plots/cartesian/set_convert"),e=b("../heatmap/plot"),f=b("./make_crossings"),k=b("./find_all_paths"),t=b("./empty_pathinfo"),v=b("./convert_to_constraints"),w=b("./close_boundaries"),y=b("./constants"),B=y.LABELOPTIMIZER;I.plot=function(A,z,E,C){var u=z.xaxis,
D=z.yaxis;a.makeTraceGroups(C,E,"contour").each(function(G){var J=l.select(this),L=G[0],K=L.x,H=L.y,Q=L.trace.contours,M=t(Q,z,L),P=a.ensureSingle(J,"g","heatmapcoloring"),T=[];"heatmap"===Q.coloring&&(T=[G]);e(A,z,T,P);f(M);k(M);G=u.c2p(K[0],!0);K=u.c2p(K[K.length-1],!0);P=D.c2p(H[0],!0);H=D.c2p(H[H.length-1],!0);H=[[G,H],[K,H],[K,P],[G,P]];K=M;"constraint"===Q.type&&(K=v(M,Q._operation));G=a.ensureSingle(J,"g","contourbg").selectAll("path").data("fill"===Q.coloring?[0]:[]);G.enter().append("path");
G.exit().remove();G.attr("d","M"+H.join("L")+"Z").style("stroke","none");r(J,K,H,Q);m(J,M,A,L,Q);K=L.trace;Q="clip"+K.uid;M=A._fullLayout._clips.selectAll("#"+Q).data(K.connectgaps?[]:[0]);M.enter().append("clipPath").classed("contourclip",!0).attr("id",Q);M.exit().remove();if(!1===K.connectgaps){K=z.xaxis;G=z.yaxis;P=L.x;T=L.y;var O=L.trace._emptypoints,U=[],S=L.z.length,X=L.z[0].length,ba,ca=[];for(ba=0;ba<X;ba++)ca.push(1);for(ba=0;ba<S;ba++)U.push(ca.slice());for(ba=0;ba<O.length;ba++)S=O[ba],
U[S[0]][S[1]]=0;L.zmask=U;L={level:.9,crossings:{},starts:[],edgepaths:[],paths:[],xaxis:K,yaxis:G,x:P,y:T,z:U,smoothing:0};f([L]);k([L]);w([L],{type:"levels"});a.ensureSingle(M,"path","").attr("d",(L.prefixBoundary?"M"+H.join("L")+"Z":"")+q(L,H))}else Q=null;h.setClipUrl(J,Q,A)})};I.createLines=function(A,z,E){var C=E[0].smoothing;A=A.selectAll("g.contourlevel").data(z?E:[]);A.exit().remove();A.enter().append("g").classed("contourlevel",!0);z&&(z=A.selectAll("path.openline").data(function(u){return u.pedgepaths||
u.edgepaths}),z.exit().remove(),z.enter().append("path").classed("openline",!0),z.attr("d",function(u){return h.smoothopen(u,C)}).style("stroke-miterlimit",1).style("vector-effect","non-scaling-stroke"),z=A.selectAll("path.closedline").data(function(u){return u.ppaths||u.paths}),z.exit().remove(),z.enter().append("path").classed("closedline",!0),z.attr("d",function(u){return h.smoothclosed(u,C)}).style("stroke-miterlimit",1).style("vector-effect","non-scaling-stroke"));return A};I.createLineClip=
function(A,z,E,C){C=z?"clipline"+C:null;z=E._fullLayout._clips.selectAll("#"+C).data(z?[0]:[]);z.exit().remove();z.enter().append("clipPath").classed("contourlineclip",!0).attr("id",C);h.setClipUrl(A,C,E);return z};I.labelFormatter=function(A,z){A=A._fullLayout;var E=z.trace;z=E.contours;var C={type:"linear",_id:"ycontour",showexponent:"all",exponentformat:"B"};z.labelformat?(C.tickformat=z.labelformat,d(C,A)):(E=g.extractOpts(E))&&E.colorbar&&E.colorbar._axis?C=E.colorbar._axis:("constraint"===z.type?
(z=z.value,Array.isArray(z)?C.range=[z[0],z[z.length-1]]:C.range=[z,z]):(C.range=[z.start,z.end],C.nticks=(z.end-z.start)/z.size),C.range[0]===C.range[1]&&(C.range[1]+=C.range[0]||1),C.nticks||(C.nticks=1E3),d(C,A),p.prepTicks(C),C._tmin=null,C._tmax=null);return function(u){return p.tickText(C,u).text}};I.calcTextOpts=function(A,z,E,C){z=z(A);E.text(z).call(n.convertToTspans,C);E=E.node();C=h.bBox(E,!0);return{text:z,width:C.width,height:C.height,fontSize:+E.style["font-size"].replace("px",""),level:A,
dy:(C.top+C.bottom)/2}};I.findBestTextLocation=function(A,z,E,C,u){var D=E.width;if(z.isClosed){var G=z.len/B.INITIALSEARCHPOINTS;var J=z.min+G/2;var L=z.max}else G=(z.len-D)/(B.INITIALSEARCHPOINTS+1),J=z.min+G+D/2,L=z.max-(G+D)/2;for(var K=Infinity,H=0;H<B.ITERATIONS;H++){for(;J<L;J+=G){var Q=a.getTextLocation(A,z.total,J,D);a:{var M=E;var P=C,T=M.width/2,O=M.height/2,U=Q.x,S=Q.y,X=Q.theta,ba=Math.cos(X)*T,ca=Math.sin(X)*T;T=(U>u.center?u.right-U:U-u.left)/(ba+Math.abs(Math.sin(X)*O));O=(S>u.middle?
u.bottom-S:S-u.top)/(Math.abs(ca)+Math.cos(X)*O);if(1>T||1>O)M=Infinity;else{O=B.EDGECOST*(1/(T-1)+1/(O-1));O+=B.ANGLECOST*X*X;X=U-ba;T=S-ca;U+=ba;S+=ca;for(ba=0;ba<P.length;ba++){ca=P[ba];var ia=Math.cos(ca.theta)*ca.width/2,ja=Math.sin(ca.theta)*ca.width/2;ia=2*a.segmentDistance(X,T,U,S,ca.x-ia,ca.y-ja,ca.x+ia,ca.y+ja)/(M.height+ca.height);ja=(ca=ca.level===M.level)?B.SAMELEVELDISTANCE:1;if(ia<=ja){M=Infinity;break a}O+=B.NEIGHBORCOST*(ca?B.SAMELEVELFACTOR:1)/(ia-ja)}M=O}}if(M<K){K=M;var la=Q;var da=
J}}if(K>2*B.MAXCOST)break;H&&(G/=2);J=da-G/2;L=J+1.5*G}if(K<=B.MAXCOST)return la};I.addLabelData=function(A,z,E,C){var u=z.fontSize,D=z.width+u/3;u=Math.max(0,z.height-u/3);var G=A.x,J=A.y;A=A.theta;var L=Math.sin(A),K=Math.cos(A),H=function(Q,M){return[G+Q*K-M*L,J+Q*L+M*K]};H=[H(-D/2,-u/2),H(-D/2,u/2),H(D/2,u/2),H(D/2,-u/2)];E.push({text:z.text,x:G,y:J,dy:z.dy,theta:A,level:z.level,width:D,height:u});C.push(H)};I.drawLabels=function(A,z,E,C,u){A=A.selectAll("text").data(z,function(D){return D.text+
","+D.x+","+D.y+","+D.theta});A.exit().remove();A.enter().append("text").attr({"data-notex":1,"text-anchor":"middle"}).each(function(D){var G=D.x+Math.sin(D.theta)*D.dy,J=D.y-Math.cos(D.theta)*D.dy;l.select(this).text(D.text).attr({x:G,y:J,transform:"rotate("+180*D.theta/Math.PI+" "+G+" "+J+")"}).call(n.convertToTspans,E)});if(u){A="";for(z=0;z<u.length;z++)A+="M"+u[z].join("L")+"Z";a.ensureSingle(C,"path","").attr("d",A)}}},{"../../components/colorscale":655,"../../components/drawing":665,"../../lib":778,
"../../lib/svg_text_utils":803,"../../plots/cartesian/axes":828,"../../plots/cartesian/set_convert":848,"../heatmap/plot":1076,"./close_boundaries":1010,"./constants":1012,"./convert_to_constraints":1016,"./empty_pathinfo":1018,"./find_all_paths":1020,"./make_crossings":1025,d3:169}],1027:[function(b,N,I){function r(l,a,h){var g={type:"linear",range:[l,a]};q.autoTicks(g,(a-l)/(h||15));return g}var q=b("../../plots/cartesian/axes"),m=b("../../lib");N.exports=function(l,a){var h=l.contours;if(l.autocontour){var g=
l.zmin,n=l.zmax;if(l.zauto||void 0===g)g=m.aggNums(Math.min,null,a);if(l.zauto||void 0===n)n=m.aggNums(Math.max,null,a);a=r(g,n,l.ncontours);h.size=a.dtick;h.start=q.tickFirst(a);a.range.reverse();h.end=q.tickFirst(a);h.start===g&&(h.start+=h.size);h.end===n&&(h.end-=h.size);h.start>h.end&&(h.start=h.end=(h.start+h.end)/2);l._input.contours||(l._input.contours={});m.extendFlat(l._input.contours,{start:h.start,end:h.end,size:h.size});l._input.autocontour=!0}else"constraint"!==h.type&&(n=h.start,a=
h.end,g=l._input.contours,n>a&&(h.start=g.start=a,a=h.end=g.end=n,n=h.start),0<h.size||(l=n===a?1:r(n,a,l.ncontours).dtick,g.size=h.size=l))}},{"../../lib":778,"../../plots/cartesian/axes":828}],1028:[function(b,N,I){var r=b("d3"),q=b("../../components/drawing"),m=b("../heatmap/style"),l=b("./make_color_map");N.exports=function(a){var h=r.select(a).selectAll("g.contour");h.style("opacity",function(g){return g[0].trace.opacity});h.each(function(g){var n=r.select(this);g=g[0].trace;var p=g.contours,
d=g.line,e=p.size||1,f=p.start,k="constraint"===p.type,t=!k&&"lines"===p.coloring,v=!k&&"fill"===p.coloring,w=t||v?l(g):null;n.selectAll("g.contourlevel").each(function(A){r.select(this).selectAll("path").call(q.lineGroupStyle,d.width,t?w(A.level):d.color,d.dash)});var y=p.labelfont;n.selectAll("g.contourlabels text").each(function(A){q.font(r.select(this),{family:y.family,size:y.size,color:y.color||(t?w(A.level):d.color)})});if(k)n.selectAll("g.contourfill path").style("fill",g.fillcolor);else if(v){var B;
n.selectAll("g.contourfill path").style("fill",function(A){void 0===B&&(B=A.level);return w(A.level+.5*e)});void 0===B&&(B=f);n.selectAll("g.contourbg path").style("fill",w(B-.5*e))}});m(a)}},{"../../components/drawing":665,"../heatmap/style":1077,"./make_color_map":1024,d3:169}],1029:[function(b,N,I){var r=b("../../components/colorscale/defaults"),q=b("./label_defaults");N.exports=function(m,l,a,h,g){var n=a("contours.coloring"),p,d="";"fill"===n&&(p=a("contours.showlines"));!1!==p&&("lines"!==n&&
(d=a("line.color","#000")),a("line.width",.5),a("line.dash"));"none"!==n&&(!0!==m.showlegend&&(l.showlegend=!1),l._dfltShowLegend=!1,r(m,l,h,a,{prefix:"",cLetter:"z"}));a("line.smoothing");q(a,h,d,g)}},{"../../components/colorscale/defaults":653,"./label_defaults":1023}],1030:[function(b,N,I){I=b("../heatmap/attributes");var r=b("../contour/attributes"),q=b("../../components/colorscale/attributes");b=b("../../lib/extend").extendFlat;var m=r.contours;N.exports=b({carpet:{valType:"string",editType:"calc"},
z:I.z,a:I.x,a0:I.x0,da:I.dx,b:I.y,b0:I.y0,db:I.dy,text:I.text,hovertext:I.hovertext,transpose:I.transpose,atype:I.xtype,btype:I.ytype,fillcolor:r.fillcolor,autocontour:r.autocontour,ncontours:r.ncontours,contours:{type:m.type,start:m.start,end:m.end,size:m.size,coloring:{valType:"enumerated",values:["fill","lines","none"],dflt:"fill",editType:"calc"},showlines:m.showlines,showlabels:m.showlabels,labelfont:m.labelfont,labelformat:m.labelformat,operation:m.operation,value:m.value,editType:"calc",impliedEdits:{autocontour:!1}},
line:{color:r.line.color,width:r.line.width,dash:r.line.dash,smoothing:r.line.smoothing,editType:"plot"},transforms:void 0},q("",{cLetter:"z",autoColorDflt:!1}))},{"../../components/colorscale/attributes":650,"../../lib/extend":768,"../contour/attributes":1008,"../heatmap/attributes":1065}],1031:[function(b,N,I){var r=b("../../components/colorscale/calc"),q=b("../../lib"),m=b("../heatmap/convert_column_xyz"),l=b("../heatmap/clean_2d_array"),a=b("../heatmap/interp2d"),h=b("../heatmap/find_empties"),
g=b("../heatmap/make_bound_array"),n=b("./defaults"),p=b("../carpet/lookup_carpetid"),d=b("../contour/set_contours");N.exports=function(e,f){var k=f._carpetTrace=p(e,f);if(k&&k.visible&&"legendonly"!==k.visible){if(!f.a||!f.b){k=e.data[k.index];var t=e.data[f.index];t.a||(t.a=k.a);t.b||(t.b=k.b);n(t,f,f._defaultColor,e._fullLayout)}k=f._carpetTrace;t=k.aaxis;var v=k.baxis;t._minDtick=0;v._minDtick=0;q.isArray1D(f.z)&&m(f,t,v,"a","b",["z"]);var w=f._a=f._a||f.a;var y=f._b=f._b||f.b;w=w?t.makeCalcdata(f,
"_a"):[];y=y?v.makeCalcdata(f,"_b"):[];var B=f.a0||0;var A=f.da||1;var z=f.b0||0;var E=f.db||1;k=f._z=l(f._z||f.z,f.transpose);f._emptypoints=h(k);a(k,f._emptypoints);var C=q.maxRowLength(k);t=g(f,"scaled"===f.xtype?"":w,B,A,C,t);v=g(f,"scaled"===f.ytype?"":y,z,E,k.length,v);t={a:t,b:v,z:k};"levels"===f.contours.type&&"none"!==f.contours.coloring&&r(e,f,{vals:k,containerStr:"",cLetter:"z"});e=[t];d(f,f._z);return e}}},{"../../components/colorscale/calc":651,"../../lib":778,"../carpet/lookup_carpetid":981,
"../contour/set_contours":1027,"../heatmap/clean_2d_array":1067,"../heatmap/convert_column_xyz":1069,"../heatmap/find_empties":1071,"../heatmap/interp2d":1074,"../heatmap/make_bound_array":1075,"./defaults":1032}],1032:[function(b,N,I){var r=b("../../lib"),q=b("../heatmap/xyz_defaults"),m=b("./attributes"),l=b("../contour/constraint_defaults"),a=b("../contour/contours_defaults"),h=b("../contour/style_defaults");N.exports=function(g,n,p,d){function e(k,t){return r.coerce(g,n,m,k,t)}function f(k){return r.coerce2(g,
n,m,k)}e("carpet");g.a&&g.b?q(g,n,e,d,"a","b")?(e("text"),"constraint"===e("contours.type")?l(g,n,e,d,p,{hasHover:!1}):(a(g,n,e,f),h(g,n,e,d,{hasHover:!1}))):n.visible=!1:(n._defaultColor=p,n._length=null)}},{"../../lib":778,"../contour/constraint_defaults":1013,"../contour/contours_defaults":1015,"../contour/style_defaults":1029,"../heatmap/xyz_defaults":1079,"./attributes":1030}],1033:[function(b,N,I){N.exports={attributes:b("./attributes"),supplyDefaults:b("./defaults"),colorbar:b("../contour/colorbar"),
calc:b("./calc"),plot:b("./plot"),style:b("../contour/style"),moduleType:"trace",name:"contourcarpet",basePlotModule:b("../../plots/cartesian"),categories:"cartesian svg carpet contour symbols showLegend hasLines carpetDependent noHover noSortingByValue".split(" "),meta:{}}},{"../../plots/cartesian":841,"../contour/colorbar":1011,"../contour/style":1028,"./attributes":1030,"./calc":1031,"./defaults":1032,"./plot":1034}],1034:[function(b,N,I){function r(D,G){var J,L,K;for(J=0;J<D.length;J++){var H=
D[J];var Q=H.pedgepaths=[];var M=H.ppaths=[];for(L=0;L<H.edgepaths.length;L++){var P=H.edgepaths[L];var T=[];for(K=0;K<P.length;K++)T[K]=G(P[K]);Q.push(T)}for(L=0;L<H.paths.length;L++){P=H.paths[L];Q=[];for(K=0;K<P.length;K++)Q[K]=G(P[K]);M.push(Q)}}}function q(D,G,J,L,K,H,Q){var M=t.ensureSingle(D,"g","contourlines"),P=!1!==K.showlines,T=K.showlabels,O=P&&T,U=y.createLines(M,P||T,G);M=y.createLineClip(M,O,J,L.trace.uid);D=D.selectAll("g.contourlabels").data(T?[0]:[]);D.exit().remove();D.enter().append("g").classed("contourlabels",
!0);if(T){var S=H.xaxis._length;H=H.yaxis._length;var X=[[[0,0],[S,0],[S,H],[0,H]]],ba=[];t.clearLocationCache();var ca=y.labelFormatter(J,L),ia=k.tester.append("text").attr("data-notex",1).call(k.font,K.labelfont),ja={left:0,right:S,center:S/2,top:0,bottom:H,middle:H/2},la=B.LABELDISTANCE*Math.sqrt(S*S+H*H)/Math.max(1,G.length/B.LABELINCREASE);U.each(function(da){var oa=y.calcTextOpts(da.level,ca,ia,J);d.select(this).selectAll("path").each(function(sa){var ma=t.getVisibleSegment(this,ja,oa.height/
2);if(ma&&(m(this,sa,da,ma,Q,oa.height),!(ma.len<(oa.width+oa.height)*B.LABELMIN))){sa=Math.min(Math.ceil(ma.len/la),B.LABELMAX);for(var qa=0;qa<sa;qa++){var pa=y.findBestTextLocation(this,ma,oa,ba,ja);if(!pa)break;y.addLabelData(pa,oa,ba,X)}}})});ia.remove();y.drawLabels(D,ba,J,M,O?X:null)}T&&!P&&U.remove()}function m(D,G,J,L,K,H){function Q(X,ba){var ca=0;if(.1>Math.abs(X[0]-T)||.1>Math.abs(X[0]-O)){var ia=a(K.dxydb_rough(X[0],X[1],.1));ca=Math.max(ca,H*h(ba,ia)/2)}if(.1>Math.abs(X[1]-U)||.1>Math.abs(X[1]-
S))ia=a(K.dxyda_rough(X[0],X[1],.1)),ca=Math.max(ca,H*h(ba,ia)/2);return ca}for(var M,P=0;P<J.pedgepaths.length;P++)G===J.pedgepaths[P]&&(M=J.edgepaths[P]);if(M){var T=K.a[0],O=K.a[K.a.length-1],U=K.b[0],S=K.b[K.b.length-1];G=l(D,0,1);D=l(D,L.total,L.total-1);G=Q(M[0],G);M=L.total-Q(M[M.length-1],D);L.min<G&&(L.min=G);L.max>M&&(L.max=M);L.len=L.max-L.min}}function l(D,G,J){G=D.getPointAtLength(G);J=D.getPointAtLength(J);D=J.x-G.x;G=J.y-G.y;J=Math.sqrt(D*D+G*G);return[D/J,G/J]}function a(D){var G=
Math.sqrt(D[0]*D[0]+D[1]*D[1]);return[D[0]/G,D[1]/G]}function h(D,G){D=Math.abs(D[0]*G[0]+D[1]*G[1]);return Math.sqrt(1-D*D)/D}function g(D,G,J,L,K,H){var Q,M=t.ensureSingle(D,"g","contourbg").selectAll("path").data("fill"!==H||K?[]:[0]);M.enter().append("path");M.exit().remove();var P=[];for(Q=0;Q<G.length;Q++)D=G[Q],K=e([],D.x,J.c2p),H=e([],D.y,L.c2p),P.push(f(K,H,D.bicubic));M.attr("d","M"+P.join("L")+"Z").style("stroke","none")}function n(D,G,J,L,K,H,Q,M,P,T,O){(T="fill"===T)&&E(K,D.contours);
G=t.ensureSingle(G,"g","contourfill").selectAll("path").data(T?K:[]);G.enter().append("path");G.exit().remove();G.each(function(U){(U=(U.prefixBoundary?O:"")+p(D,U,H,Q,M,P,J,L))?d.select(this).attr("d",U).style("stroke","none"):d.select(this).remove()})}function p(D,G,J,L,K,H,Q,M){function P(oa){return Math.abs(oa[0]-J[2][0])<ia}function T(oa,sa){var ma="";if(Math.abs(oa[1]-J[0][1])<ja&&!P(oa)||Math.abs(oa[1]-J[2][1])<ja&&!(Math.abs(oa[0]-J[0][0])<ia)){var qa=K.aaxis;var pa=u(K,H,[oa[0],sa[0]],.5*
(oa[1]+sa[1]))}else qa=K.baxis,pa=u(K,H,.5*(oa[0]+sa[0]),[oa[1],sa[1]]);for(oa=1;oa<pa.length;oa++)for(ma+=qa.smoothing?"C":"L",sa=0;sa<pa[oa].length;sa++){var na=pa[oa][sa];ma+=[Q.c2p(na[0]),M.c2p(na[1])]+" "}return ma}var O="",U=G.edgepaths.map(function(oa,sa){return sa}),S=!0,X,ba,ca,ia=1E-4*Math.abs(J[0][0]-J[2][0]),ja=1E-4*Math.abs(J[0][1]-J[2][1]);D=0;for(X=null;U.length;){var la=G.edgepaths[D][0];X&&(O+=T(X,la));X=k.smoothopen(G.edgepaths[D].map(L),G.smoothing);O+=S?X:X.replace(/^M/,"L");U.splice(U.indexOf(D),
1);X=G.edgepaths[D][G.edgepaths[D].length-1];la=-1;for(S=0;4>S;S++){if(!X){t.log("Missing end?",D,G);break}Math.abs(X[1]-J[0][1])<ja&&!P(X)?ba=J[1]:Math.abs(X[0]-J[0][0])<ia?ba=J[0]:Math.abs(X[1]-J[2][1])<ja?ba=J[3]:P(X)&&(ba=J[2]);for(ca=0;ca<G.edgepaths.length;ca++){var da=G.edgepaths[ca][0];Math.abs(X[0]-ba[0])<ia?Math.abs(X[0]-da[0])<ia&&0<=(da[1]-X[1])*(ba[1]-da[1])&&(ba=da,la=ca):Math.abs(X[1]-ba[1])<ja?Math.abs(X[1]-da[1])<ja&&0<=(da[0]-X[0])*(ba[0]-da[0])&&(ba=da,la=ca):t.log("endpt to newendpt is not vert. or horz.",
X,ba,da)}if(0<=la)break;O+=T(X,ba);X=ba}if(la===G.edgepaths.length){t.log("unclosed perimeter path");break}D=la;if(S=-1===U.indexOf(D))D=U[0],O+=T(X,ba)+"Z",X=null}for(D=0;D<G.paths.length;D++)O+=k.smoothclosed(G.paths[D].map(L),G.smoothing);return O}var d=b("d3"),e=b("../carpet/map_1d_array"),f=b("../carpet/makepath"),k=b("../../components/drawing"),t=b("../../lib"),v=b("../contour/make_crossings"),w=b("../contour/find_all_paths"),y=b("../contour/plot"),B=b("../contour/constants"),A=b("../contour/convert_to_constraints"),
z=b("../contour/empty_pathinfo"),E=b("../contour/close_boundaries"),C=b("../carpet/lookup_carpetid"),u=b("../carpet/axis_aligned_line");N.exports=function(D,G,J,L){var K=G.xaxis,H=G.yaxis;t.makeTraceGroups(L,J,"contour").each(function(Q){function M(qa){qa=O.ab2xy(qa[0],qa[1],!0);return[K.c2p(qa[0]),H.c2p(qa[1])]}var P=d.select(this);Q=Q[0];var T=Q.trace,O=T._carpetTrace=C(D,T),U=D.calcdata[O.index][0];if(O.visible&&"legendonly"!==O.visible){var S=Q.a,X=Q.b,ba=T.contours,ca=z(ba,G,Q),ia="constraint"===
ba.type,ja=ba._operation,la=ia?"\x3d"===ja?"lines":"fill":ba.coloring,da=[[S[0],X[X.length-1]],[S[S.length-1],X[X.length-1]],[S[S.length-1],X[0]],[S[0],X[0]]];v(ca);w(ca,1E-8*(S[S.length-1]-S[0]),1E-8*(X[X.length-1]-X[0]));S=ca;"constraint"===ba.type&&(S=A(ca,ja));r(ca,M);var oa,sa=[];for(oa=U.clipsegments.length-1;0<=oa;oa--){ja=U.clipsegments[oa];X=e([],ja.x,K.c2p);var ma=e([],ja.y,H.c2p);X.reverse();ma.reverse();sa.push(f(X,ma,ja.bicubic))}ja="M"+sa.join("L")+"Z";g(P,U.clipsegments,K,H,ia,la);
n(T,P,K,H,S,da,M,O,U,la,ja);q(P,ca,D,Q,ba,G,O);k.setClipUrl(P,O._clipPathId,D)}})}},{"../../components/drawing":665,"../../lib":778,"../carpet/axis_aligned_line":965,"../carpet/lookup_carpetid":981,"../carpet/makepath":982,"../carpet/map_1d_array":983,"../contour/close_boundaries":1010,"../contour/constants":1012,"../contour/convert_to_constraints":1016,"../contour/empty_pathinfo":1018,"../contour/find_all_paths":1020,"../contour/make_crossings":1025,"../contour/plot":1026,d3:169}],1035:[function(b,
N,I){I=b("../../components/colorscale/attributes");var r=b("../../plots/template_attributes").hovertemplateAttrs,q=b("../../plots/attributes"),m=b("../scattermapbox/attributes");b=b("../../lib/extend").extendFlat;N.exports=b({lon:m.lon,lat:m.lat,z:{valType:"data_array",editType:"calc"},radius:{valType:"number",editType:"plot",arrayOk:!0,min:1,dflt:30},below:{valType:"string",editType:"plot"},text:m.text,hovertext:m.hovertext,hoverinfo:b({},q.hoverinfo,{flags:["lon","lat","z","text","name"]}),hovertemplate:r(),
showlegend:b({},q.showlegend,{dflt:!1})},I("",{cLetter:"z",editTypeOverride:"calc"}))},{"../../components/colorscale/attributes":650,"../../lib/extend":768,"../../plots/attributes":824,"../../plots/template_attributes":906,"../scattermapbox/attributes":1252}],1036:[function(b,N,I){var r=b("fast-isnumeric"),q=b("../../lib").isArrayOrTypedArray,m=b("../../constants/numerical").BADNUM,l=b("../../components/colorscale/calc"),a=b("../../lib")._;N.exports=function(h,g){for(var n=g._length,p=Array(n),d=
g.z,e=q(d)&&d.length,f=0;f<n;f++){var k=p[f]={},t=g.lon[f],v=g.lat[f];k.lonlat=r(t)&&r(v)?[+t,+v]:[m,m];e&&(t=d[f],k.z=r(t)?t:m)}l(h,g,{vals:e?d:[0,1],containerStr:"",cLetter:"z"});n&&(p[0].t={labels:{lat:a(h,"lat:")+" ",lon:a(h,"lon:")+" "}});return p}},{"../../components/colorscale/calc":651,"../../constants/numerical":753,"../../lib":778,"fast-isnumeric":241}],1037:[function(b,N,I){var r=b("fast-isnumeric"),q=b("../../lib"),m=b("../../components/color"),l=b("../../components/colorscale"),a=b("../../constants/numerical").BADNUM,
h=b("../../lib/geojson_utils").makeBlank;N.exports=function(g){var n=g[0].trace,p=!0===n.visible&&0!==n._length,d=n._opts={heatmap:{layout:{visibility:"none"},paint:{}},geojson:h()};if(!p)return d;p=[];var e,f=n.z,k=n.radius;f=q.isArrayOrTypedArray(f)&&f.length;var t=q.isArrayOrTypedArray(k);for(e=0;e<g.length;e++){var v=g[e],w=v.lonlat;if(w[0]!==a){var y={};f&&(v=v.z,y.z=v!==a?v:0);t&&(y.r=r(k[e])&&0<k[e]?+k[e]:0);p.push({type:"Feature",geometry:{type:"Point",coordinates:w},properties:y})}}g=l.extractOpts(n);
k=g.reversescale?l.flipScale(g.colorscale):g.colorscale;e=k[0][1];w=["interpolate",["linear"],["heatmap-density"],0,1>m.opacity(e)?e:m.addOpacity(e,0)];for(e=1;e<k.length;e++)w.push(k[e][0],k[e][1]);e=["interpolate",["linear"],["get","z"],g.min,0,g.max,1];q.extendFlat(d.heatmap.paint,{"heatmap-weight":f?e:1/(g.max-g.min),"heatmap-color":w,"heatmap-radius":t?{type:"identity",property:"r"}:n.radius,"heatmap-opacity":n.opacity});d.geojson={type:"FeatureCollection",features:p};d.heatmap.layout.visibility=
"visible";return d}},{"../../components/color":643,"../../components/colorscale":655,"../../constants/numerical":753,"../../lib":778,"../../lib/geojson_utils":772,"fast-isnumeric":241}],1038:[function(b,N,I){var r=b("../../lib"),q=b("../../components/colorscale/defaults"),m=b("./attributes");N.exports=function(l,a,h,g){function n(d,e){return r.coerce(l,a,m,d,e)}h=n("lon")||[];var p=n("lat")||[];(h=Math.min(h.length,p.length))?(a._length=h,n("z"),n("radius"),n("below"),n("text"),n("hovertext"),n("hovertemplate"),
q(l,a,g,n,{prefix:"",cLetter:"z"})):a.visible=!1}},{"../../components/colorscale/defaults":653,"../../lib":778,"./attributes":1035}],1039:[function(b,N,I){N.exports=function(r,q){r.lon=q.lon;r.lat=q.lat;r.z=q.z;return r}},{}],1040:[function(b,N,I){var r=b("../../lib"),q=b("../../plots/cartesian/axes"),m=b("../scattermapbox/hover");N.exports=function(l,a,h){if(l=m(l,a,h)){l=l[0];var g=l.cd;a=g[0].trace;h=g[l.index];delete l.color;if("z"in h){var n=l.subplot.mockAxis;l.z=h.z;l.zLabel=q.tickText(n,n.c2l(h.z),
"hover").text}g=g[0].t.labels;if(a.hovertemplate)a=void 0;else{n=(h.hi||a.hoverinfo).split("+");var p=-1!==n.indexOf("all"),d=-1!==n.indexOf("lon"),e=-1!==n.indexOf("lat"),f=h.lonlat,k=[];p||d&&e?k.push("("+(f[0]+", ")+(f[1]+")")):d?k.push(g.lon+(f[0]+"")):e&&k.push(g.lat+(f[1]+""));(p||-1!==n.indexOf("text"))&&r.fillText(h,a,k);a=k.join("\x3cbr\x3e")}l.extraText=a;return[l]}}},{"../../lib":778,"../../plots/cartesian/axes":828,"../scattermapbox/hover":1257}],1041:[function(b,N,I){N.exports={attributes:b("./attributes"),
supplyDefaults:b("./defaults"),colorbar:b("../heatmap/colorbar"),formatLabels:b("../scattermapbox/format_labels"),calc:b("./calc"),plot:b("./plot"),hoverPoints:b("./hover"),eventData:b("./event_data"),getBelow:function(r,q){r=q.getMapLayers();for(q=0;q<r.length;q++){var m=r[q],l=m.id;if("symbol"===m.type&&"string"===typeof l&&-1===l.indexOf("plotly-"))return l}},moduleType:"trace",name:"densitymapbox",basePlotModule:b("../../plots/mapbox"),categories:["mapbox","gl","showLegend"],meta:{hr_name:"density_mapbox"}}},
{"../../plots/mapbox":885,"../heatmap/colorbar":1068,"../scattermapbox/format_labels":1256,"./attributes":1035,"./calc":1036,"./defaults":1038,"./event_data":1039,"./hover":1040,"./plot":1042}],1042:[function(b,N,I){function r(l,a){this.type="densitymapbox";this.subplot=l;this.uid=a;this.sourceId="source-"+a;this.layerList=[["heatmap",m+a+"-heatmap"]];this.below=null}var q=b("./convert"),m=b("../../plots/mapbox/constants").traceLayerPrefix;b=r.prototype;b.update=function(l){var a=this.subplot,h=this.layerList;
l=q(l);var g=a.belowLookup["trace-"+this.uid];a.map.getSource(this.sourceId).setData(l.geojson);g!==this.below&&(this._removeLayers(),this._addLayers(l,g),this.below=g);for(g=0;g<h.length;g++){var n=h[g],p=n[1];n=l[n[0]];a.setOptions(p,"setLayoutProperty",n.layout);"visible"===n.layout.visibility&&a.setOptions(p,"setPaintProperty",n.paint)}};b._addLayers=function(l,a){for(var h=this.subplot,g=this.layerList,n=this.sourceId,p=0;p<g.length;p++){var d=g[p],e=d[0],f=l[e];h.addLayer({type:e,id:d[1],source:n,
layout:f.layout,paint:f.paint},a)}};b._removeLayers=function(){for(var l=this.subplot.map,a=this.layerList,h=a.length-1;0<=h;h--)l.removeLayer(a[h][1])};b.dispose=function(){var l=this.subplot.map;this._removeLayers();l.removeSource(this.sourceId)};N.exports=function(l,a){var h=a[0].trace,g=new r(l,h.uid),n=g.sourceId;a=q(a);h=g.below=l.belowLookup["trace-"+h.uid];l.map.addSource(n,{type:"geojson",data:a.geojson});g._addLayers(a,h);return g}},{"../../plots/mapbox/constants":883,"./convert":1037}],
1043:[function(b,N,I){var r=b("../../lib");N.exports=function(q,m){for(var l=0;l<q.length;l++)q[l].i=l;r.mergeArray(m.text,q,"tx");r.mergeArray(m.hovertext,q,"htx");if(m=m.marker)if(r.mergeArray(m.opacity,q,"mo"),r.mergeArray(m.color,q,"mc"),m=m.line)r.mergeArray(m.color,q,"mlc"),r.mergeArrayCastPositive(m.width,q,"mlw")}},{"../../lib":778}],1044:[function(b,N,I){I=b("../bar/attributes");var r=b("../scatter/attributes").line,q=b("../../plots/attributes"),m=b("../../plots/template_attributes").hovertemplateAttrs,
l=b("../../plots/template_attributes").texttemplateAttrs,a=b("./constants"),h=b("../../lib/extend").extendFlat;b=b("../../components/color");N.exports={x:I.x,x0:I.x0,dx:I.dx,y:I.y,y0:I.y0,dy:I.dy,xperiod:I.xperiod,yperiod:I.yperiod,xperiod0:I.xperiod0,yperiod0:I.yperiod0,xperiodalignment:I.xperiodalignment,yperiodalignment:I.yperiodalignment,hovertext:I.hovertext,hovertemplate:m({},{keys:a.eventDataKeys}),hoverinfo:h({},q.hoverinfo,{flags:"name;x;y;text;percent initial;percent previous;percent total".split(";")}),
textinfo:{valType:"flaglist",flags:"label;text;percent initial;percent previous;percent total;value".split(";"),extras:["none"],editType:"plot",arrayOk:!1},texttemplate:l({editType:"plot"},{keys:a.eventDataKeys.concat(["label","value"])}),text:I.text,textposition:h({},I.textposition,{dflt:"auto"}),insidetextanchor:h({},I.insidetextanchor,{dflt:"middle"}),textangle:h({},I.textangle,{dflt:0}),textfont:I.textfont,insidetextfont:I.insidetextfont,outsidetextfont:I.outsidetextfont,constraintext:I.constraintext,
cliponaxis:I.cliponaxis,orientation:h({},I.orientation,{}),offset:h({},I.offset,{arrayOk:!1}),width:h({},I.width,{arrayOk:!1}),marker:I.marker,connector:{fillcolor:{valType:"color",editType:"style"},line:{color:h({},r.color,{dflt:b.defaultLine}),width:h({},r.width,{dflt:0,editType:"plot"}),dash:r.dash,editType:"style"},visible:{valType:"boolean",dflt:!0,editType:"plot"},editType:"plot"},offsetgroup:I.offsetgroup,alignmentgroup:I.alignmentgroup}},{"../../components/color":643,"../../lib/extend":768,
"../../plots/attributes":824,"../../plots/template_attributes":906,"../bar/attributes":921,"../scatter/attributes":1187,"./constants":1046}],1045:[function(b,N,I){function r(g){return g===h?0:g}var q=b("../../plots/cartesian/axes"),m=b("../../plots/cartesian/align_period"),l=b("./arrays_to_calcdata"),a=b("../scatter/calc_selection"),h=b("../../constants/numerical").BADNUM;N.exports=function(g,n){var p=q.getFromId(g,n.xaxis||"x"),d=q.getFromId(g,n.yaxis||"y");if("h"===n.orientation){g=p.makeCalcdata(n,
"x");var e=d.makeCalcdata(n,"y");p=m(n,d,"y",e);var f=!!n.yperiodalignment}else g=d.makeCalcdata(n,"y"),e=p.makeCalcdata(n,"x"),p=m(n,p,"x",e),f=!!n.xperiodalignment;var k=Math.min(p.length,g.length),t=Array(k);n._base=[];for(d=0;d<k;d++){0>g[d]&&(g[d]=h);var v=!1;g[d]!==h&&d+1<k&&g[d+1]!==h&&(v=!0);v=t[d]={p:p[d],s:g[d],cNext:v};n._base[d]=-.5*v.s;f&&(t[d].orig_p=e[d]);n.ids&&(v.id=String(n.ids[d]));0===d&&(t[0].vTotal=0);t[0].vTotal+=r(v.s);v.begR=r(v.s)/r(t[0].s)}for(d=0;d<k;d++)if(v=t[d],v.s!==
h){v.sumR=v.s/t[0].vTotal;v.difR=void 0!==w?v.s/w:1;var w=v.s}l(t,n);a(t,n);return t}},{"../../constants/numerical":753,"../../plots/cartesian/align_period":825,"../../plots/cartesian/axes":828,"../scatter/calc_selection":1189,"./arrays_to_calcdata":1043}],1046:[function(b,N,I){N.exports={eventDataKeys:["percentInitial","percentPrevious","percentTotal"]}},{}],1047:[function(b,N,I){var r=b("../bar/cross_trace_calc").setGroupPositions;N.exports=function(q,m){var l=q._fullLayout,a=q._fullData,h=q.calcdata,
g=m.xaxis,n=m.yaxis;m=[];var p=[],d=[],e;for(e=0;e<a.length;e++){var f=a[e];var k="h"===f.orientation;!0===f.visible&&f.xaxis===g._id&&f.yaxis===n._id&&"funnel"===f.type&&(f=h[e],k?d.push(f):p.push(f),m.push(f))}l={mode:l.funnelmode,norm:l.funnelnorm,gap:l.funnelgap,groupgap:l.funnelgroupgap};r(q,g,n,p,l);r(q,n,g,d,l);for(e=0;e<m.length;e++)for(f=m[e],q=0;q<f.length;q++)q+1<f.length&&(f[q].nextP0=f[q+1].p0,f[q].nextS0=f[q+1].s0,f[q].nextP1=f[q+1].p1,f[q].nextS1=f[q+1].s1)}},{"../bar/cross_trace_calc":924}],
1048:[function(b,N,I){function r(p){p=q.isArrayOrTypedArray(p)?"#000":p;return n.addOpacity(p,.5*n.opacity(p))}var q=b("../../lib"),m=b("../bar/defaults").handleGroupingDefaults,l=b("../bar/defaults").handleText,a=b("../scatter/xy_defaults"),h=b("../scatter/period_defaults"),g=b("./attributes"),n=b("../../components/color");N.exports={supplyDefaults:function(p,d,e,f){function k(w,y){return q.coerce(p,d,g,w,y)}if(a(p,d,f,k)){h(p,d,f,k);k("orientation",d.y&&!d.x?"v":"h");k("offset");k("width");var t=
k("text");k("hovertext");k("hovertemplate");var v=k("textposition");l(p,d,f,k,v,{moduleHasSelected:!1,moduleHasUnselected:!1,moduleHasConstrain:!0,moduleHasCliponaxis:!0,moduleHasTextangle:!0,moduleHasInsideanchor:!0});"none"===d.textposition||d.texttemplate||k("textinfo",Array.isArray(t)?"text+value":"value");e=k("marker.color",e);k("marker.line.color",n.defaultLine);k("marker.line.width");k("connector.visible")&&(k("connector.fillcolor",r(e)),k("connector.line.width")&&(k("connector.line.color"),
k("connector.line.dash")))}else d.visible=!1},crossTraceDefaults:function(p,d){function e(v){return q.coerce(k._input,k,g,v)}if("group"===d.funnelmode)for(var f=0;f<p.length;f++){var k=p[f];var t=k._input;m(t,k,d,e)}}}},{"../../components/color":643,"../../lib":778,"../bar/defaults":925,"../scatter/period_defaults":1207,"../scatter/xy_defaults":1214,"./attributes":1044}],1049:[function(b,N,I){N.exports=function(r,q){r.x="xVal"in q?q.xVal:q.x;r.y="yVal"in q?q.yVal:q.y;"percentInitial"in q&&(r.percentInitial=
q.percentInitial);"percentPrevious"in q&&(r.percentPrevious=q.percentPrevious);"percentTotal"in q&&(r.percentTotal=q.percentTotal);q.xa&&(r.xaxis=q.xa);q.ya&&(r.yaxis=q.ya);return r}},{}],1050:[function(b,N,I){var r=b("../../components/color").opacity,q=b("../bar/hover").hoverOnBars,m=b("../../lib").formatPercent;N.exports=function(l,a,h,g){if(l=q(l,a,h,g)){a=l.cd;h=a[0].trace;a=a[l.index];l[("h"===h.orientation?"x":"y")+"LabelVal"]=a.s;l.percentInitial=a.begR;l.percentInitialLabel=m(a.begR,1);l.percentPrevious=
a.difR;l.percentPreviousLabel=m(a.difR,1);l.percentTotal=a.sumR;l.percentTotalLabel=m(a.sumR,1);var n=a.hi||h.hoverinfo;g=[];if(n&&"none"!==n&&"skip"!==n){var p="all"===n;n=n.split("+");(p||-1!==n.indexOf("percent initial"))&&g.push(l.percentInitialLabel+" of initial");(p||-1!==n.indexOf("percent previous"))&&g.push(l.percentPreviousLabel+" of previous");(p||-1!==n.indexOf("percent total"))&&g.push(l.percentTotalLabel+" of total")}l.extraText=g.join("\x3cbr\x3e");p=h.marker;h=a.mc||p.color;g=a.mlc||
p.line.color;a=a.mlw||p.line.width;a=r(h)?h:r(g)&&a?g:void 0;l.color=a;return[l]}}},{"../../components/color":643,"../../lib":778,"../bar/hover":928}],1051:[function(b,N,I){N.exports={attributes:b("./attributes"),layoutAttributes:b("./layout_attributes"),supplyDefaults:b("./defaults").supplyDefaults,crossTraceDefaults:b("./defaults").crossTraceDefaults,supplyLayoutDefaults:b("./layout_defaults"),calc:b("./calc"),crossTraceCalc:b("./cross_trace_calc"),plot:b("./plot"),style:b("./style").style,hoverPoints:b("./hover"),
eventData:b("./event_data"),selectPoints:b("../bar/select"),moduleType:"trace",name:"funnel",basePlotModule:b("../../plots/cartesian"),categories:"bar-like cartesian svg oriented showLegend zoomScale".split(" "),meta:{}}},{"../../plots/cartesian":841,"../bar/select":933,"./attributes":1044,"./calc":1045,"./cross_trace_calc":1047,"./defaults":1048,"./event_data":1049,"./hover":1050,"./layout_attributes":1052,"./layout_defaults":1053,"./plot":1054,"./style":1055}],1052:[function(b,N,I){N.exports={funnelmode:{valType:"enumerated",
values:["stack","group","overlay"],dflt:"stack",editType:"calc"},funnelgap:{valType:"number",min:0,max:1,editType:"calc"},funnelgroupgap:{valType:"number",min:0,max:1,dflt:0,editType:"calc"}}},{}],1053:[function(b,N,I){var r=b("../../lib"),q=b("./layout_attributes");N.exports=function(m,l,a){for(var h=!1,g=0;g<a.length;g++){var n=a[g];if(n.visible&&"funnel"===n.type){h=!0;break}}h&&(r.coerce(m,l,q,"funnelmode",void 0),r.coerce(m,l,q,"funnelgap",.2),r.coerce(m,l,q,"funnelgroupgap",void 0))}},{"../../lib":778,
"./layout_attributes":1052}],1054:[function(b,N,I){function r(d,e,f,k){var t=e.xaxis,v=e.yaxis;a.makeTraceGroups(k,f,"trace bars").each(function(w){var y=l.select(this);w=w[0].trace;y=a.ensureSingle(y,"g","regions");if(w.connector&&w.connector.visible){var B="h"===w.orientation;y=y.selectAll("g.region").data(a.identity);y.enter().append("g").classed("region",!0);y.exit().remove();var A=y.size();y.each(function(z,E){if(E===A-1||z.cNext){E=m(z,t,v,B);z=E[0];E=E[1];var C="";z[0]!==g&&E[0]!==g&&z[1]!==
g&&E[1]!==g&&z[2]!==g&&E[2]!==g&&z[3]!==g&&E[3]!==g&&(C=B?C+("M"+z[0]+","+E[1]+"L"+z[2]+","+E[2]+"H"+z[3]+"L"+z[1]+","+E[1]+"Z"):C+("M"+z[1]+","+E[1]+"L"+z[2]+","+E[3]+"V"+E[2]+"L"+z[1]+","+E[0]+"Z"));""===C&&(C="M0,0Z");a.ensureSingle(l.select(this),"path").attr("d",C).call(h.setClipUrl,e.layerClipId,d)}})}else y.remove()})}function q(d,e,f,k){var t=e.xaxis,v=e.yaxis;a.makeTraceGroups(k,f,"trace bars").each(function(w){var y=l.select(this);w=w[0].trace;y=a.ensureSingle(y,"g","lines");if(w.connector&&
w.connector.visible&&w.connector.line.width){var B="h"===w.orientation;y=y.selectAll("g.line").data(a.identity);y.enter().append("g").classed("line",!0);y.exit().remove();var A=y.size();y.each(function(z,E){if(E===A-1||z.cNext){E=m(z,t,v,B);z=E[0];E=E[1];var C="";void 0!==z[3]&&void 0!==E[3]&&(B?(C+="M"+z[0]+","+E[1]+"L"+z[2]+","+E[2],C+="M"+z[1]+","+E[1]+"L"+z[3]+","+E[2]):(C+="M"+z[1]+","+E[1]+"L"+z[2]+","+E[3],C+="M"+z[1]+","+E[0]+"L"+z[2]+","+E[2]));""===C&&(C="M0,0Z");a.ensureSingle(l.select(this),
"path").attr("d",C).call(h.setClipUrl,e.layerClipId,d)}})}else y.remove()})}function m(d,e,f,k){var t=[],v=[],w=k?e:f;e=k?f:e;t[0]=w.c2p(d.s0,!0);v[0]=e.c2p(d.p0,!0);t[1]=w.c2p(d.s1,!0);v[1]=e.c2p(d.p1,!0);t[2]=w.c2p(d.nextS0,!0);v[2]=e.c2p(d.nextP0,!0);t[3]=w.c2p(d.nextS1,!0);v[3]=e.c2p(d.nextP1,!0);return k?[t,v]:[v,t]}var l=b("d3"),a=b("../../lib"),h=b("../../components/drawing"),g=b("../../constants/numerical").BADNUM,n=b("../bar/plot"),p=b("../bar/uniform_text").clearMinTextSize;N.exports=function(d,
e,f,k){var t=d._fullLayout;p("funnel",t);r(d,e,f,k);q(d,e,f,k);n.plot(d,e,f,k,{mode:t.funnelmode,norm:t.funnelmode,gap:t.funnelgap,groupgap:t.funnelgroupgap})}},{"../../components/drawing":665,"../../constants/numerical":753,"../../lib":778,"../bar/plot":932,"../bar/uniform_text":937,d3:169}],1055:[function(b,N,I){var r=b("d3"),q=b("../../components/drawing"),m=b("../../components/color"),l=b("../../constants/interactions").DESELECTDIM;I=b("../bar/style");var a=b("../bar/uniform_text").resizeText,
h=I.styleTextPoints;N.exports={style:function(g,n,p){n=p?p:r.select(g).selectAll("g.funnellayer").selectAll("g.trace");a(g,n,"funnel");n.style("opacity",function(d){return d[0].trace.opacity});n.each(function(d){var e=r.select(this),f=d[0].trace;e.selectAll(".point \x3e path").each(function(k){if(!k.isBlank){var t=f.marker;r.select(this).call(m.fill,k.mc||t.color).call(m.stroke,k.mlc||t.line.color).call(q.dashLine,t.line.dash,k.mlw||t.line.width).style("opacity",f.selectedpoints&&!k.selected?l:1)}});
h(e,f,g);e.selectAll(".regions").each(function(){r.select(this).selectAll("path").style("stroke-width",0).call(m.fill,f.connector.fillcolor)});e.selectAll(".lines").each(function(){var k=f.connector.line;q.lineGroupStyle(r.select(this).selectAll("path"),k.width,k.color,k.dash)})})}}},{"../../components/color":643,"../../components/drawing":665,"../../constants/interactions":752,"../bar/style":935,"../bar/uniform_text":937,d3:169}],1056:[function(b,N,I){I=b("../pie/attributes");var r=b("../../plots/attributes"),
q=b("../../plots/domain").attributes,m=b("../../plots/template_attributes").hovertemplateAttrs,l=b("../../plots/template_attributes").texttemplateAttrs;b=b("../../lib/extend").extendFlat;N.exports={labels:I.labels,label0:I.label0,dlabel:I.dlabel,values:I.values,marker:{colors:I.marker.colors,line:{color:b({},I.marker.line.color,{dflt:null}),width:b({},I.marker.line.width,{dflt:1}),editType:"calc"},editType:"calc"},text:I.text,hovertext:I.hovertext,scalegroup:b({},I.scalegroup,{}),textinfo:b({},I.textinfo,
{flags:["label","text","value","percent"]}),texttemplate:l({editType:"plot"},{keys:["label","color","value","text","percent"]}),hoverinfo:b({},r.hoverinfo,{flags:["label","text","value","percent","name"]}),hovertemplate:m({},{keys:["label","color","value","text","percent"]}),textposition:b({},I.textposition,{values:["inside","none"],dflt:"inside"}),textfont:I.textfont,insidetextfont:I.insidetextfont,title:{text:I.title.text,font:I.title.font,position:b({},I.title.position,{values:["top left","top center",
"top right"],dflt:"top center"}),editType:"plot"},domain:q({name:"funnelarea",trace:!0,editType:"calc"}),aspectratio:{valType:"number",min:0,dflt:1,editType:"plot"},baseratio:{valType:"number",min:0,max:1,dflt:.333,editType:"plot"}}},{"../../lib/extend":768,"../../plots/attributes":824,"../../plots/domain":855,"../../plots/template_attributes":906,"../pie/attributes":1161}],1057:[function(b,N,I){var r=b("../../plots/plots");I.name="funnelarea";I.plot=function(q,m,l,a){r.plotBasePlot(I.name,q,m,l,
a)};I.clean=function(q,m,l,a){r.cleanBasePlot(I.name,q,m,l,a)}},{"../../plots/plots":891}],1058:[function(b,N,I){var r=b("../pie/calc");N.exports={calc:function(q,m){return r.calc(q,m)},crossTraceCalc:function(q){r.crossTraceCalc(q,{type:"funnelarea"})}}},{"../pie/calc":1163}],1059:[function(b,N,I){var r=b("../../lib"),q=b("./attributes"),m=b("../../plots/domain").defaults,l=b("../bar/defaults").handleText,a=b("../pie/defaults").handleLabelsAndValues;N.exports=function(h,g,n,p){function d(k,t){return r.coerce(h,
g,q,k,t)}n=d("labels");var e=d("values");n=a(n,e);e=n.len;g._hasLabels=n.hasLabels;g._hasValues=n.hasValues;!g._hasLabels&&g._hasValues&&(d("label0"),d("dlabel"));if(e){g._length=e;d("marker.line.width")&&d("marker.line.color",p.paper_bgcolor);d("marker.colors");d("scalegroup");n=d("text");e=d("texttemplate");var f;e||(f=d("textinfo",Array.isArray(n)?"text+percent":"percent"));d("hovertext");d("hovertemplate");if(e||f&&"none"!==f)f=d("textposition"),l(h,g,p,d,f,{moduleHasSelected:!1,moduleHasUnselected:!1,
moduleHasConstrain:!1,moduleHasCliponaxis:!1,moduleHasTextangle:!1,moduleHasInsideanchor:!1});m(g,p,d);d("title.text")&&(d("title.position"),r.coerceFont(d,"title.font",p.font));d("aspectratio");d("baseratio")}else g.visible=!1}},{"../../lib":778,"../../plots/domain":855,"../bar/defaults":925,"../pie/defaults":1164,"./attributes":1056}],1060:[function(b,N,I){N.exports={moduleType:"trace",name:"funnelarea",basePlotModule:b("./base_plot"),categories:["pie-like","funnelarea","showLegend"],attributes:b("./attributes"),
layoutAttributes:b("./layout_attributes"),supplyDefaults:b("./defaults"),supplyLayoutDefaults:b("./layout_defaults"),calc:b("./calc").calc,crossTraceCalc:b("./calc").crossTraceCalc,plot:b("./plot"),style:b("./style"),styleOne:b("../pie/style_one"),meta:{}}},{"../pie/style_one":1172,"./attributes":1056,"./base_plot":1057,"./calc":1058,"./defaults":1059,"./layout_attributes":1061,"./layout_defaults":1062,"./plot":1063,"./style":1064}],1061:[function(b,N,I){b=b("../pie/layout_attributes").hiddenlabels;
N.exports={hiddenlabels:b,funnelareacolorway:{valType:"colorlist",editType:"calc"},extendfunnelareacolors:{valType:"boolean",dflt:!0,editType:"calc"}}},{"../pie/layout_attributes":1168}],1062:[function(b,N,I){var r=b("../../lib"),q=b("./layout_attributes");N.exports=function(m,l){r.coerce(m,l,q,"hiddenlabels",void 0);r.coerce(m,l,q,"funnelareacolorway",l.colorway);r.coerce(m,l,q,"extendfunnelareacolors",void 0)}},{"../../lib":778,"./layout_attributes":1061}],1063:[function(b,N,I){function r(z,E){return"l"+
(E[0]-z[0])+","+(E[1]-z[1])}function q(z,E){return[.5*(z[0]+E[0]),.5*(z[1]+E[1])]}function m(z){function E(){var M=Math.sqrt(J);return[M,-M]}if(z.length){var C=z[0],u=C.trace,D=u.aspectratio;u=u.baseratio;.999<u&&(u=.999);u=Math.pow(u,2);var G=C.vTotal,J=G*u/(1-u)/G;u=[];u.push(E());var L;for(L=z.length-1;-1<L;L--){var K=z[L];K.hidden||(J+=K.v/G,u.push(E()))}G=Infinity;var H=-Infinity;for(L=0;L<u.length;L++)K=u[L],G=Math.min(G,K[1]),H=Math.max(H,K[1]);for(L=0;L<u.length;L++)u[L][1]-=(H+G)/2;L=C.r;
G=(H-G)/2;K=L/u[u.length-1][0];D*=L/G;C.r=D*G;for(L=0;L<u.length;L++)u[L][0]*=K,u[L][1]*=D;K=u[0];C=[-K[0],K[1]];D=[K[0],K[1]];G=0;for(L=z.length-1;-1<L;L--)if(K=z[L],!K.hidden){G+=1;H=u[G][0];var Q=u[G][1];K.TL=[-H,Q];K.TR=[H,Q];K.BL=C;K.BR=D;K.pxmid=q(K.TR,K.BR);C=K.TL;D=K.TR}}}var l=b("d3"),a=b("../../components/drawing"),h=b("../../lib"),g=h.strScale,n=h.strTranslate,p=b("../../lib/svg_text_utils"),d=b("../bar/plot").toMoveInsideBar;I=b("../bar/uniform_text");var e=I.recordMinTextSize,f=I.clearMinTextSize,
k=b("../pie/helpers");b=b("../pie/plot");var t=b.attachFxHandlers,v=b.determineInsideTextFont,w=b.layoutAreas,y=b.prerenderTitles,B=b.positionTitleOutside,A=b.formatSliceLabel;N.exports=function(z,E){var C=z._fullLayout;f("funnelarea",C);y(E,z);w(E,C._size);h.makeTraceGroups(C._funnelarealayer,E,"trace").each(function(u){var D=l.select(this),G=u[0],J=G.trace;m(u);D.each(function(){var L=l.select(this).selectAll("g.slice").data(u);L.enter().append("g").classed("slice",!0);L.exit().remove();L.each(function(K,
H){if(K.hidden)l.select(this).selectAll("path,g").remove();else{K.pointNumber=K.i;K.curveNumber=J.index;var Q=G.cx,M=G.cy,P=l.select(this),T=P.selectAll("path.surface").data([K]);T.enter().append("path").classed("surface",!0).style({"pointer-events":"all"});P.call(t,z,u);var O="M"+(Q+K.TR[0])+","+(M+K.TR[1])+r(K.TR,K.BR)+r(K.BR,K.BL)+r(K.BL,K.TL)+"Z";T.attr("d",O);A(z,K,G);T=k.castOption(J.textposition,K.pts);P=P.selectAll("g.slicetext").data(K.text&&"none"!==T?[0]:[]);P.enter().append("g").classed("slicetext",
!0);P.exit().remove();P.each(function(){var U=h.ensureSingle(l.select(this),"text","",function(ba){ba.attr("data-notex",1)}),S=h.ensureUniformFontSize(z,v(J,K,C.font));U.text(K.text).attr({"class":"slicetext",transform:"","text-anchor":"middle"}).call(a.font,S).call(p.convertToTspans,z);var X=a.bBox(U.node());X=d(Math.max(K.TL[0],K.BL[0])+Q,Math.min(K.TR[0],K.BR[0])+Q,Math.min(K.BL[1],K.BR[1])+M,Math.max(K.TL[1],K.TR[1])+M,X,{isHorizontal:!0,constrained:!0,angle:0,anchor:"middle"});X.fontSize=S.size;
e(J.type,X,C);u[H].transform=X;U.attr("transform",h.getTextTransform(X))})}});L=l.select(this).selectAll("g.titletext").data(J.title.text?[0]:[]);L.enter().append("g").classed("titletext",!0);L.exit().remove();L.each(function(){var K=h.ensureSingle(l.select(this),"text","",function(Q){Q.attr("data-notex",1)}),H=J.title.text;J._meta&&(H=h.templateString(H,J._meta));K.text(H).attr({"class":"titletext",transform:"","text-anchor":"middle"}).call(a.font,J.title.font).call(p.convertToTspans,z);H=B(G,C._size);
K.attr("transform",n(H.x,H.y)+g(Math.min(1,H.scale))+n(H.tx,H.ty))})})})}},{"../../components/drawing":665,"../../lib":778,"../../lib/svg_text_utils":803,"../bar/plot":932,"../bar/uniform_text":937,"../pie/helpers":1166,"../pie/plot":1170,d3:169}],1064:[function(b,N,I){var r=b("d3"),q=b("../pie/style_one"),m=b("../bar/uniform_text").resizeText;N.exports=function(l){var a=l._fullLayout._funnelarealayer.selectAll(".trace");m(l,a,"funnelarea");a.each(function(h){var g=h[0].trace;h=r.select(this);h.style({opacity:g.opacity});
h.selectAll("path.surface").each(function(n){r.select(this).call(q,n,g)})})}},{"../bar/uniform_text":937,"../pie/style_one":1172,d3:169}],1065:[function(b,N,I){I=b("../scatter/attributes");var r=b("../../plots/attributes"),q=b("../../plots/template_attributes").hovertemplateAttrs,m=b("../../components/colorscale/attributes");b("../../constants/docs");b=b("../../lib/extend").extendFlat;N.exports=b({z:{valType:"data_array",editType:"calc"},x:b({},I.x,{impliedEdits:{xtype:"array"}}),x0:b({},I.x0,{impliedEdits:{xtype:"scaled"}}),
dx:b({},I.dx,{impliedEdits:{xtype:"scaled"}}),y:b({},I.y,{impliedEdits:{ytype:"array"}}),y0:b({},I.y0,{impliedEdits:{ytype:"scaled"}}),dy:b({},I.dy,{impliedEdits:{ytype:"scaled"}}),xperiod:b({},I.xperiod,{impliedEdits:{xtype:"scaled"}}),yperiod:b({},I.yperiod,{impliedEdits:{ytype:"scaled"}}),xperiod0:b({},I.xperiod0,{impliedEdits:{xtype:"scaled"}}),yperiod0:b({},I.yperiod0,{impliedEdits:{ytype:"scaled"}}),xperiodalignment:b({},I.xperiodalignment,{impliedEdits:{xtype:"scaled"}}),yperiodalignment:b({},
I.yperiodalignment,{impliedEdits:{ytype:"scaled"}}),text:{valType:"data_array",editType:"calc"},hovertext:{valType:"data_array",editType:"calc"},transpose:{valType:"boolean",dflt:!1,editType:"calc"},xtype:{valType:"enumerated",values:["array","scaled"],editType:"calc+clearAxisTypes"},ytype:{valType:"enumerated",values:["array","scaled"],editType:"calc+clearAxisTypes"},zsmooth:{valType:"enumerated",values:["fast","best",!1],dflt:!1,editType:"calc"},hoverongaps:{valType:"boolean",dflt:!0,editType:"none"},
connectgaps:{valType:"boolean",editType:"calc"},xgap:{valType:"number",dflt:0,min:0,editType:"plot"},ygap:{valType:"number",dflt:0,min:0,editType:"plot"},zhoverformat:{valType:"string",dflt:"",editType:"none"},hovertemplate:q(),showlegend:b({},r.showlegend,{dflt:!1})},{transforms:void 0},m("",{cLetter:"z",autoColorDflt:!1}))},{"../../components/colorscale/attributes":650,"../../constants/docs":748,"../../lib/extend":768,"../../plots/attributes":824,"../../plots/template_attributes":906,"../scatter/attributes":1187}],
1066:[function(b,N,I){function r(v){for(var w=[],y=v.length,B=0;B<y;B++){var A=v[B];A!==t&&w.push(A)}return w}function q(v,w,y){for(var B=[],A=-1,z=0;z<y.length;z++)if(w[z]!==t){A++;B[A]=[];for(var E=0;E<y[z].length;E++)v[E]!==t&&B[A].push(y[z][E])}return B}var m=b("../../registry"),l=b("../../lib"),a=b("../../plots/cartesian/axes"),h=b("../../plots/cartesian/align_period"),g=b("../histogram2d/calc"),n=b("../../components/colorscale/calc"),p=b("./convert_column_xyz"),d=b("./clean_2d_array"),e=b("./interp2d"),
f=b("./find_empties"),k=b("./make_bound_array"),t=b("../../constants/numerical").BADNUM;N.exports=function(v,w){function y(X){u=w._input.zsmooth=w.zsmooth=!1;l.warn('cannot use zsmooth: "fast": '+X)}var B=a.getFromId(v,w.xaxis||"x"),A=a.getFromId(v,w.yaxis||"y"),z=m.traceIs(w,"contour"),E=m.traceIs(w,"histogram"),C=m.traceIs(w,"gl2d"),u=z?"best":w.zsmooth,D;B._minDtick=0;A._minDtick=0;if(E){var G=g(v,w);var J=G.orig_x;var L=G.x;var K=G.x0;var H=G.dx;var Q=G.orig_y;var M=G.y;var P=G.y0;var T=G.dy;
var O=G.z}else O=w.z,l.isArray1D(O)?(p(w,B,A,"x","y",["z"]),L=w._x,M=w._y,O=w._z):(J=w.x?B.makeCalcdata(w,"x"):[],Q=w.y?A.makeCalcdata(w,"y"):[],L=h(w,B,"x",J),M=h(w,A,"y",Q),w._x=L,w._y=M),K=w.x0,H=w.dx,P=w.y0,T=w.dy,O=d(O,w,B,A);if(B.rangebreaks||A.rangebreaks)O=q(L,M,O),E||(L=r(L),M=r(M),w._x=L,w._y=M);E||!z&&!w.connectgaps||(w._emptypoints=f(O),e(O,w._emptypoints));if("fast"===u)if("log"===B.type||"log"===A.type)y("log axis found");else if(!E){if(L.length){var U=(L[L.length-1]-L[0])/(L.length-
1),S=Math.abs(U/100);for(D=0;D<L.length-1;D++)if(Math.abs(L[D+1]-L[D]-U)>S){y("x scale is not linear");break}}if(M.length&&"fast"===u)for(U=(M[M.length-1]-M[0])/(M.length-1),S=Math.abs(U/100),D=0;D<M.length-1;D++)if(Math.abs(M[D+1]-M[D]-U)>S){y("y scale is not linear");break}}D=l.maxRowLength(O);L="scaled"===w.xtype?"":L;U=k(w,L,K,H,D,B);M="scaled"===w.ytype?"":M;S=k(w,M,P,T,O.length,A);C||(w._extremes[B._id]=a.findExtremes(B,U),w._extremes[A._id]=a.findExtremes(A,S));C={x:U,y:S,z:O,text:w._text||
w.text,hovertext:w._hovertext||w.hovertext};w.xperiodalignment&&J&&(C.orig_x=J);w.yperiodalignment&&Q&&(C.orig_y=Q);L&&L.length===U.length-1&&(C.xCenter=L);M&&M.length===S.length-1&&(C.yCenter=M);E&&(C.xRanges=G.xRanges,C.yRanges=G.yRanges,C.pts=G.pts);z||n(v,w,{vals:O,cLetter:"z"});z&&w.contours&&"heatmap"===w.contours.coloring&&(v={type:"contour"===w.type?"heatmap":"histogram2d",xcalendar:w.xcalendar,ycalendar:w.ycalendar},C.xfill=k(v,L,K,H,D,B),C.yfill=k(v,M,P,T,O.length,A));return[C]}},{"../../components/colorscale/calc":651,
"../../constants/numerical":753,"../../lib":778,"../../plots/cartesian/align_period":825,"../../plots/cartesian/axes":828,"../../registry":911,"../histogram2d/calc":1098,"./clean_2d_array":1067,"./convert_column_xyz":1069,"./find_empties":1071,"./interp2d":1074,"./make_bound_array":1075}],1067:[function(b,N,I){var r=b("fast-isnumeric"),q=b("../../lib"),m=b("../../constants/numerical").BADNUM;N.exports=function(l,a,h,g){function n(A){if(r(A))return+A}function p(A){if(a&&"carpet"!==a.type&&"contourcarpet"!==
a.type&&A&&"category"===A.type&&a["_"+A._id.charAt(0)].length){var z=A._id.charAt(0),E={};z=a["_"+z+"CategoryMap"]||a[z];for(e=0;e<z.length;e++)E[z[e]]=e;return function(C){C=E[A._categories[C]];return C+1?C:m}}return q.identity}var d,e,f;if(a&&a.transpose){for(e=d=0;e<l.length;e++)d=Math.max(d,l[e].length);if(0===d)return!1;var k=function(A){return A.length};var t=function(A,z,E){return(A[E]||[])[z]}}else d=l.length,k=function(A,z){return A[z].length},t=function(A,z,E){return(A[z]||[])[E]};var v=
function(A,z,E){return z===m||E===m?m:t(A,z,E)},w=p(h),y=p(g);g&&"category"===g.type&&(d=g._categories.length);var B=Array(d);for(e=0;e<d;e++)for(g=h&&"category"===h.type?h._categories.length:k(l,e),B[e]=Array(g),f=0;f<g;f++)B[e][f]=n(v(l,y(e),w(f)));return B}},{"../../constants/numerical":753,"../../lib":778,"fast-isnumeric":241}],1068:[function(b,N,I){N.exports={min:"zmin",max:"zmax"}},{}],1069:[function(b,N,I){var r=b("../../lib"),q=b("../../constants/numerical").BADNUM,m=b("../../plots/cartesian/align_period");
N.exports=function(l,a,h,g,n,p){var d=l._length,e=a.makeCalcdata(l,g),f=h.makeCalcdata(l,n);e=m(l,a,g,e);f=m(l,h,n,f);var k=l.text,t=void 0!==k&&r.isArray1D(k),v=l.hovertext,w=void 0!==v&&r.isArray1D(v),y,B=r.distinctVals(e),A=B.vals,z=r.distinctVals(f),E=z.vals,C=[],u,D;var G=E.length;var J=A.length;for(y=0;y<p.length;y++)C[y]=r.init2dArray(G,J);t&&(u=r.init2dArray(G,J));w&&(D=r.init2dArray(G,J));J=r.init2dArray(G,J);for(y=0;y<d;y++)if(e[y]!==q&&f[y]!==q){var L=r.findBin(e[y]+B.minDiff/2,A),K=r.findBin(f[y]+
z.minDiff/2,E);for(G=0;G<p.length;G++)C[G][K][L]=l[p[G]][y],J[K][L]=y;t&&(u[K][L]=k[y]);w&&(D[K][L]=v[y])}l["_"+g]=A;l["_"+n]=E;for(G=0;G<p.length;G++)l["_"+p[G]]=C[G];t&&(l._text=u);w&&(l._hovertext=D);a&&"category"===a.type&&(l["_"+g+"CategoryMap"]=A.map(function(H){return a._categories[H]}));h&&"category"===h.type&&(l["_"+n+"CategoryMap"]=E.map(function(H){return h._categories[H]}));l._after2before=J}},{"../../constants/numerical":753,"../../lib":778,"../../plots/cartesian/align_period":825}],
1070:[function(b,N,I){var r=b("../../lib"),q=b("./xyz_defaults"),m=b("../scatter/period_defaults"),l=b("./style_defaults"),a=b("../../components/colorscale/defaults"),h=b("./attributes");N.exports=function(g,n,p,d){function e(f,k){return r.coerce(g,n,h,f,k)}q(g,n,e,d)?(m(g,n,d,e),e("text"),e("hovertext"),e("hovertemplate"),l(g,n,e,d),e("hoverongaps"),e("connectgaps",r.isArray1D(n.z)&&!1!==n.zsmooth),a(g,n,d,e,{prefix:"",cLetter:"z"})):n.visible=!1}},{"../../components/colorscale/defaults":653,"../../lib":778,
"../scatter/period_defaults":1207,"./attributes":1065,"./style_defaults":1078,"./xyz_defaults":1079}],1071:[function(b,N,I){var r=b("../../lib").maxRowLength;N.exports=function(q){var m=[],l={},a=[],h=q[0],g=[],n=[0,0,0],p=r(q),d,e,f;for(d=0;d<q.length;d++){var k=g;g=h;h=q[d+1]||[];for(e=0;e<p;e++)void 0===g[e]&&((f=(void 0!==g[e-1]?1:0)+(void 0!==g[e+1]?1:0)+(void 0!==k[e]?1:0)+(void 0!==h[e]?1:0))?(0===d&&f++,0===e&&f++,d===q.length-1&&f++,e===g.length-1&&f++,4>f&&(l[[d,e]]=[d,e,f]),m.push([d,e,
f])):a.push([d,e]))}for(;a.length;){h={};g=!1;for(q=a.length-1;0<=q;q--){var t=a[q];d=t[0];e=t[1];if(f=((l[[d-1,e]]||n)[2]+(l[[d+1,e]]||n)[2]+(l[[d,e-1]]||n)[2]+(l[[d,e+1]]||n)[2])/20)h[t]=[d,e,f],a.splice(q,1),g=!0}if(!g)throw"findEmpties iterated with no new neighbors";for(t in h)l[t]=h[t],m.push(h[t])}return m.sort(function(v,w){return w[2]-v[2]})}},{"../../lib":778}],1072:[function(b,N,I){var r=b("../../components/fx"),q=b("../../lib"),m=b("../../plots/cartesian/axes"),l=b("../../components/colorscale").extractOpts;
N.exports=function(a,h,g,n,p,d){var e=a.cd[0];n=e.trace;p=a.xa;var f=a.ya,k=e.x,t=e.y,v=e.z,w=e.xCenter,y=e.yCenter,B=e.zmask,A=n.zhoverformat,z=k,E=t;if(!1!==a.index){try{var C=Math.round(a.index[1]);var u=Math.round(a.index[0])}catch(J){q.error("Error hovering on heatmap, pointNumber must be [row,col], found:",a.index);return}if(0>C||C>=v[0].length||0>u||u>v.length)return}else{if(0<r.inbox(h-k[0],h-k[k.length-1],0)||0<r.inbox(g-t[0],g-t[t.length-1],0))return;if(d){z=[2*k[0]-k[1]];for(C=1;C<k.length;C++)z.push((k[C]+
k[C-1])/2);z.push([2*k[k.length-1]-k[k.length-2]]);E=[2*t[0]-t[1]];for(C=1;C<t.length;C++)E.push((t[C]+t[C-1])/2);E.push([2*t[t.length-1]-t[t.length-2]])}C=Math.max(0,Math.min(z.length-2,q.findBin(h,z)));u=Math.max(0,Math.min(E.length-2,q.findBin(g,E)))}h=p.c2p(k[C]);g=p.c2p(k[C+1]);z=f.c2p(t[u]);E=f.c2p(t[u+1]);if(d){d=e.orig_x||k;var D=e.orig_y||t;g=h;d=d[C];E=z;y=D[u]}else d=e.orig_x||w||k,D=e.orig_y||y||t,d=w?d[C]:(d[C]+d[C+1])/2,y=y?D[u]:(D[u]+D[u+1])/2,p&&"category"===p.type&&(d=k[C]),f&&"category"===
f.type&&(y=t[u]),n.zsmooth&&(h=g=p.c2p(d),z=E=f.c2p(y));f=v[u][C];B&&!B[u][C]&&(f=void 0);if(void 0!==f||n.hoverongaps){var G;Array.isArray(e.hovertext)&&Array.isArray(e.hovertext[u])?G=e.hovertext[u][C]:Array.isArray(e.text)&&Array.isArray(e.text[u])&&(G=e.text[u][C]);e=l(n);p=m.tickText({type:"linear",range:[e.min,e.max],hoverformat:A,_separators:p._separators,_numFormat:p._numFormat},f,"hover").text;return[q.extendFlat(a,{index:n._after2before?n._after2before[u][C]:[u,C],distance:a.maxHoverDistance,
spikeDistance:a.maxSpikeDistance,x0:h,x1:g,y0:z,y1:E,xLabelVal:d,yLabelVal:y,zLabelVal:f,zLabel:p,text:G})]}}},{"../../components/colorscale":655,"../../components/fx":683,"../../lib":778,"../../plots/cartesian/axes":828}],1073:[function(b,N,I){N.exports={attributes:b("./attributes"),supplyDefaults:b("./defaults"),calc:b("./calc"),plot:b("./plot"),colorbar:b("./colorbar"),style:b("./style"),hoverPoints:b("./hover"),moduleType:"trace",name:"heatmap",basePlotModule:b("../../plots/cartesian"),categories:["cartesian",
"svg","2dMap","showLegend"],meta:{}}},{"../../plots/cartesian":841,"./attributes":1065,"./calc":1066,"./colorbar":1068,"./defaults":1070,"./hover":1072,"./plot":1076,"./style":1077}],1074:[function(b,N,I){function r(l,a,h){var g=0,n,p,d,e,f,k;for(n=0;n<a.length;n++){var t=a[n];var v=t[0];t=t[1];var w=l[v][t];for(p=e=f=0;4>p;p++){var y=m[p];if(d=l[v+y[0]])if(y=d[t+y[1]],void 0!==y){if(0===f)var B=k=y;else B=Math.min(B,y),k=Math.max(k,y);e++;f+=y}}if(0===e)throw"iterateInterp2d order is wrong: no defined neighbors";
l[v][t]=f/e;void 0===w?4>e&&(g=1):(l[v][t]=(1+h)*l[v][t]-h*w,k>B&&(g=Math.max(g,Math.abs(l[v][t]-w)/(k-B))))}return g}var q=b("../../lib"),m=[[-1,0],[1,0],[0,-1],[0,1]];N.exports=function(l,a){var h=1,g;r(l,a);for(g=0;g<a.length&&!(4>a[g][2]);g++);a=a.slice(g);for(g=0;100>g&&.01<h;g++)h=r(l,a,.5-.25*Math.min(1,.5*h));.01<h&&q.log("interp2d didn't converge quickly",h);return l}},{"../../lib":778}],1075:[function(b,N,I){var r=b("../../registry"),q=b("../../lib").isArrayOrTypedArray;N.exports=function(m,
l,a,h,g,n){var p=[],d=r.traceIs(m,"contour"),e=r.traceIs(m,"histogram"),f=r.traceIs(m,"gl2d");if(q(l)&&1<l.length&&!e&&"category"!==n.type)if(h=l.length,h<=g){if(d||f)p=l.slice(0,g);else if(1===g)p=[l[0]-.5,l[0]+.5];else{p=[1.5*l[0]-.5*l[1]];for(d=1;d<h;d++)p.push(.5*(l[d-1]+l[d]));p.push(1.5*l[h-1]-.5*l[h-2])}if(h<g)for(f=p[p.length-1],l=f-p[p.length-2],d=h;d<g;d++)f+=l,p.push(f)}else return d?l.slice(0,g):l.slice(0,g+1);else for(m=m[n._id.charAt(0)+"calendar"],l=e?n.r2c(a,0,m):q(l)&&1===l.length?
l[0]:void 0===a?0:("log"===n.type?n.d2c:n.r2c)(a,0,m),h=h||1,d=d||f?0:-.5;d<g;d++)p.push(l+h*d);return p}},{"../../lib":778,"../../registry":911}],1076:[function(b,N,I){function r(d,e){var f=e.length-2,k=g.constrain(g.findBin(d,e),0,f),t=e[k];d=g.constrain(k+(d-t)/(e[k+1]-t)-.5,0,f);e=Math.round(d);k=Math.abs(d-e);return d&&d!==f&&k?{bin0:e,frac:k,bin1:Math.round(e+k/(d-e))}:{bin0:e,bin1:e,frac:0}}function q(d,e){var f=e.length-1;f=g.constrain(g.findBin(d,e),0,f);var k=e[f];d=(d-k)/(e[f+1]-k)||0;
return 0>=d?{bin0:f,bin1:f,frac:0}:.5>d?{bin0:f,bin1:f+1,frac:d}:{bin0:f+1,bin1:f,frac:1-d}}function m(d,e,f){d[e]=f[0];d[e+1]=f[1];d[e+2]=f[2];d[e+3]=Math.round(255*f[3])}var l=b("d3"),a=b("tinycolor2"),h=b("../../registry"),g=b("../../lib"),n=b("../../components/colorscale").makeColorScaleFuncFromTrace,p=b("../../constants/xmlns_namespaces");N.exports=function(d,e,f,k){var t=e.xaxis,v=e.yaxis;g.makeTraceGroups(k,f,"hm").each(function(w){function y(ka,ua){return void 0!==ka?(ka=ia(ka),ka[0]=Math.round(ka[0]),
ka[1]=Math.round(ka[1]),ka[2]=Math.round(ka[2]),la+=ua,da+=ka[0]*ua,oa+=ka[1]*ua,sa+=ka[2]*ua,ka):[0,0,0,0]}function B(ka,ua,va,Ca){var Ma=ka[va.bin0];if(void 0===Ma)return y(void 0,1);ka=ka[va.bin1];var Ua=ua[va.bin0];ua=ua[va.bin1];return y(Ma+va.frac*(ka-Ma||0)+Ca.frac*((Ua-Ma||0)+va.frac*(void 0===ka?void 0===ua?0:void 0===Ua?2*(ua-Ma):2*(2*ua-Ua-Ma)/3:void 0===ua?void 0===Ua?0:2*(2*Ma-ka-Ua)/3:void 0===Ua?2*(2*ua-ka-Ma)/3:ua+Ma-ka-Ua)))}var A=l.select(this),z=w[0],E=z.trace,C=z.z,u=z.x,D=z.y,
G=z.xCenter,J=z.yCenter,L=h.traceIs(E,"contour"),K=L?"best":E.zsmooth,H=C.length,Q=g.maxRowLength(C),M=!1,P=!1,T;for(T=0;void 0===O&&T<u.length-1;){var O=t.c2p(u[T]);T++}for(T=u.length-1;void 0===U&&0<T;){var U=t.c2p(u[T]);T--}U<O&&(T=U,U=O,O=T,M=!0);for(T=0;void 0===S&&T<D.length-1;){var S=v.c2p(D[T]);T++}for(T=D.length-1;void 0===X&&0<T;){var X=v.c2p(D[T]);T--}X<S&&(T=S,S=X,X=T,P=!0);L&&(G=u,J=D,u=z.xfill,D=z.yfill);"fast"!==K&&(T="best"===K?0:.5,O=Math.max(-T*t._length,O),U=Math.min((1+T)*t._length,
U),S=Math.max(-T*v._length,S),X=Math.min((1+T)*v._length,X));var ba=Math.round(U-O),ca=Math.round(X-S);if(0>=ba||0>=ca)A.selectAll("image").data([]).exit().remove();else{"fast"===K?(X=Q,T=H):(X=ba,T=ca);U=document.createElement("canvas");U.width=X;U.height=T;X=U.getContext("2d");var ia=n(E,{noNumericCheck:!0,returnArray:!0});"fast"===K?(z=M?function(ka){return Q-1-ka}:g.identity,L=P?function(ka){return H-1-ka}:g.identity):(z=function(ka){return g.constrain(Math.round(t.c2p(u[ka])-O),0,ba)},L=function(ka){return g.constrain(Math.round(v.c2p(D[ka])-
S),0,ca)});T=L(0);var ja=[T,T];M=M?0:1;P=P?0:1;var la=0,da=0,oa=0,sa=0;if(K){E=0;try{var ma=new Uint8Array(ba*ca*4)}catch(ka){ma=Array(ba*ca*4)}if("best"===K){K=G||u;M=J||D;P=Array(K.length);z=Array(M.length);L=Array(ba);G=G?q:r;ja=J?q:r;for(T=0;T<K.length;T++)P[T]=Math.round(t.c2p(K[T])-O);for(T=0;T<M.length;T++)z[T]=Math.round(v.c2p(M[T])-S);for(T=0;T<ba;T++)L[T]=G(T,P);for(J=0;J<ca;J++)for(K=ja(J,z),M=C[K.bin0],P=C[K.bin1],T=0;T<ba;T++,E+=4)G=B(M,P,L[T],K),m(ma,E,G)}else for(J=0;J<H;J++)for(K=
C[J],ja=L(J),T=0;T<ba;T++)G=y(K[T],1),E=4*(ja*ba+z(T)),m(ma,E,G);C=X.createImageData(ba,ca);try{C.data.set(ma)}catch(ka){for(T=C.data,G=T.length,J=0;J<G;J++)T[J]=ma[J]}X.putImageData(C,0,0)}else{ma=E.xgap;E=E.ygap;var qa=Math.floor(ma/2),pa=Math.floor(E/2);for(J=0;J<H;J++)if(K=C[J],ja.reverse(),ja[P]=L(J+1),ja[0]!==ja[1]&&void 0!==ja[0]&&void 0!==ja[1]){T=z(0);var na=[T,T];for(T=0;T<Q;T++)na.reverse(),na[M]=z(T+1),na[0]!==na[1]&&void 0!==na[0]&&void 0!==na[1]&&(G=K[T],G=y(G,(na[1]-na[0])*(ja[1]-ja[0])),
X.fillStyle="rgba("+G.join(",")+")",X.fillRect(na[0]+qa,ja[0]+pa,na[1]-na[0]-ma,ja[1]-ja[0]-E))}}da=Math.round(da/la);oa=Math.round(oa/la);sa=Math.round(sa/la);C=a("rgb("+da+","+oa+","+sa+")");d._hmpixcount=(d._hmpixcount||0)+la;d._hmlumcount=(d._hmlumcount||0)+la*C.getLuminance();w=A.selectAll("image").data(w);w.enter().append("svg:image").attr({xmlns:p.svg,preserveAspectRatio:"none"});w.attr({height:ca,width:ba,x:O,y:S,"xlink:href":U.toDataURL("image/png")})}})}},{"../../components/colorscale":655,
"../../constants/xmlns_namespaces":754,"../../lib":778,"../../registry":911,d3:169,tinycolor2:576}],1077:[function(b,N,I){var r=b("d3");N.exports=function(q){r.select(q).selectAll(".hm image").style("opacity",function(m){return m.trace.opacity})}},{d3:169}],1078:[function(b,N,I){N.exports=function(r,q,m){!1===m("zsmooth")&&(m("xgap"),m("ygap"));m("zhoverformat")}},{}],1079:[function(b,N,I){function r(a,h){var g=h(a);"scaled"===(g?h(a+"type","array"):"scaled")&&(h(a+"0"),h("d"+a));return g}var q=b("fast-isnumeric"),
m=b("../../lib"),l=b("../../registry");N.exports=function(a,h,g,n,p,d){var e=g("z");p=p||"x";d=d||"y";if(void 0===e||!e.length)return 0;if(m.isArray1D(a.z)){var f=g(p);g=g(d);f=m.minRowLength(f);g=m.minRowLength(g);if(0===f||0===g)return 0;h._length=Math.min(f,g,e.length)}else{r(p,g);r(d,g);f=!0;for(var k=!1,t=!1,v,w=0;w<e.length;w++){v=e[w];if(!m.isArrayOrTypedArray(v)){f=!1;break}0<v.length&&(k=!0);for(var y=0;y<v.length;y++)if(q(v[y])){t=!0;break}}if(!(f&&k&&t))return 0;g("transpose");h._length=
null}if("heatmapgl"===a.type||"contourgl"===a.type)return!0;l.getComponentMethod("calendars","handleTraceDefaults")(a,h,[p,d],n);return!0}},{"../../lib":778,"../../registry":911,"fast-isnumeric":241}],1080:[function(b,N,I){I=b("../heatmap/attributes");var r=b("../../components/colorscale/attributes"),q=b("../../lib/extend").extendFlat;b=b("../../plot_api/edit_types").overrideAll;for(var m="z x x0 dx y y0 dy text transpose xtype ytype".split(" "),l={},a=0;a<m.length;a++){var h=m[a];l[h]=I[h]}l.zsmooth=
{valType:"enumerated",values:["fast",!1],dflt:"fast",editType:"calc"};q(l,r("",{cLetter:"z",autoColorDflt:!1}));N.exports=b(l,"calc","nested")},{"../../components/colorscale/attributes":650,"../../lib/extend":768,"../../plot_api/edit_types":810,"../heatmap/attributes":1065}],1081:[function(b,N,I){function r(a,h){this.scene=a;this.uid=h;this.type="heatmapgl";this.name="";this.hoverinfo="all";this.xData=[];this.yData=[];this.zData=[];this.textLabels=[];this.idToIndex=[];this.bounds=[0,0,0,0];this.options=
{zsmooth:"fast",z:[],x:[],y:[],shape:[0,0],colorLevels:[0],colorValues:[0,0,0,1]};this.heatmap=q(a.glplot,this.options);this.heatmap._trace=this}var q=b("gl-heatmap2d"),m=b("../../plots/cartesian/axes"),l=b("../../lib/str2rgbarray");b=r.prototype;b.handlePick=function(a){var h=this.options,g=h.shape,n=a.pointId,p=n%g[0];g=Math.floor(n/g[0]);return{trace:this,dataCoord:a.dataCoord,traceCoord:[h.x[p],h.y[g],h.z[n]],textLabel:this.textLabels[n],name:this.name,pointIndex:[g,p],hoverinfo:this.hoverinfo}};
b.update=function(a,h){h=h[0];this.index=a.index;this.name=a.name;this.hoverinfo=a.hoverinfo;var g=h.z;this.options.z=[].concat.apply([],g);this.options.shape=[g[0].length,g.length];this.options.x=h.x;this.options.y=h.y;this.options.zsmooth=a.zsmooth;g=a.colorscale;for(var n=a.zmin,p=a.zmax,d=g.length,e=Array(d),f=Array(4*d),k=0;k<d;k++){var t=g[k],v=l(t[1]);e[k]=n+t[0]*(p-n);for(t=0;4>t;t++)f[4*k+t]=v[t]}this.options.colorLevels=e;this.options.colorValues=f;this.textLabels=[].concat.apply([],a.text);
this.heatmap.update(this.options);g=this.scene.xaxis;n=this.scene.yaxis;if(!1===a.zsmooth){var w={ppad:h.x[1]-h.x[0]};var y={ppad:h.y[1]-h.y[0]}}a._extremes[g._id]=m.findExtremes(g,h.x,w);a._extremes[n._id]=m.findExtremes(n,h.y,y)};b.dispose=function(){this.heatmap.dispose()};N.exports=function(a,h,g){a=new r(a,h.uid);a.update(h,g);return a}},{"../../lib/str2rgbarray":802,"../../plots/cartesian/axes":828,"gl-heatmap2d":271}],1082:[function(b,N,I){var r=b("../../lib"),q=b("../heatmap/xyz_defaults"),
m=b("../../components/colorscale/defaults"),l=b("./attributes");N.exports=function(a,h,g,n){function p(d,e){return r.coerce(a,h,l,d,e)}q(a,h,p,n)?(p("text"),p("zsmooth"),m(a,h,n,p,{prefix:"",cLetter:"z"})):h.visible=!1}},{"../../components/colorscale/defaults":653,"../../lib":778,"../heatmap/xyz_defaults":1079,"./attributes":1080}],1083:[function(b,N,I){N.exports={attributes:b("./attributes"),supplyDefaults:b("./defaults"),colorbar:b("../heatmap/colorbar"),calc:b("../heatmap/calc"),plot:b("./convert"),
moduleType:"trace",name:"heatmapgl",basePlotModule:b("../../plots/gl2d"),categories:["gl","gl2d","2dMap"],meta:{}}},{"../../plots/gl2d":868,"../heatmap/calc":1066,"../heatmap/colorbar":1068,"./attributes":1080,"./convert":1081,"./defaults":1082}],1084:[function(b,N,I){I=b("../bar/attributes");var r=b("../../plots/template_attributes").hovertemplateAttrs,q=b("./bin_attributes"),m=b("./constants");b=b("../../lib/extend").extendFlat;N.exports={x:{valType:"data_array",editType:"calc+clearAxisTypes"},
y:{valType:"data_array",editType:"calc+clearAxisTypes"},text:b({},I.text,{}),hovertext:b({},I.hovertext,{}),orientation:I.orientation,histfunc:{valType:"enumerated",values:["count","sum","avg","min","max"],dflt:"count",editType:"calc"},histnorm:{valType:"enumerated",values:["","percent","probability","density","probability density"],dflt:"",editType:"calc"},cumulative:{enabled:{valType:"boolean",dflt:!1,editType:"calc"},direction:{valType:"enumerated",values:["increasing","decreasing"],dflt:"increasing",
editType:"calc"},currentbin:{valType:"enumerated",values:["include","exclude","half"],dflt:"include",editType:"calc"},editType:"calc"},nbinsx:{valType:"integer",min:0,dflt:0,editType:"calc"},xbins:q("x",!0),nbinsy:{valType:"integer",min:0,dflt:0,editType:"calc"},ybins:q("y",!0),autobinx:{valType:"boolean",dflt:null,editType:"calc"},autobiny:{valType:"boolean",dflt:null,editType:"calc"},bingroup:{valType:"string",dflt:"",editType:"calc"},hovertemplate:r({},{keys:m.eventDataKeys}),marker:I.marker,offsetgroup:I.offsetgroup,
alignmentgroup:I.alignmentgroup,selected:I.selected,unselected:I.unselected,_deprecated:{bardir:I._deprecated.bardir}}},{"../../lib/extend":768,"../../plots/template_attributes":906,"../bar/attributes":921,"./bin_attributes":1086,"./constants":1090}],1085:[function(b,N,I){N.exports=function(r,q){for(var m=r.length,l=0,a=0;a<m;a++)q[a]?(r[a]/=q[a],l+=r[a]):r[a]=null;return l}},{}],1086:[function(b,N,I){N.exports=function(r,q){return{start:{valType:"any",editType:"calc"},end:{valType:"any",editType:"calc"},
size:{valType:"any",editType:"calc"},editType:"calc"}}},{}],1087:[function(b,N,I){var r=b("fast-isnumeric");N.exports={count:function(q,m,l){l[q]++;return 1},sum:function(q,m,l,a){m=a[m];return r(m)?(m=Number(m),l[q]+=m,m):0},avg:function(q,m,l,a,h){m=a[m];r(m)&&(m=Number(m),l[q]+=m,h[q]++);return 0},min:function(q,m,l,a){m=a[m];if(r(m)){m=Number(m);if(!r(l[q]))return l[q]=m;if(l[q]>m)return a=m-l[q],l[q]=m,a}return 0},max:function(q,m,l,a){m=a[m];if(r(m)){m=Number(m);if(!r(l[q]))return l[q]=m;if(l[q]<
m)return a=m-l[q],l[q]=m,a}return 0}}},{"fast-isnumeric":241}],1088:[function(b,N,I){function r(e,f,k,t){if(0>=e*f)return Infinity;for(var v="date"===k.type,w=q(Math.abs(f-e),v),y=0;10>y;y++){var B=q(80*w,v);if(w===B)break;var A=B;var z=e,E=f,C=k,u=t;v&&A>h?(z=m(z,C,u),E=m(E,C,u),A=A===l?0:1,A=z[A]!==E[A]):A=.1<Math.floor(E/A)-Math.floor(z/A);if(A)w=B;else break}return w}function q(e,f){return f&&e>p?e>h?e>1.1*l?l:e>1.1*a?a:h:e>g?g:e>n?n:p:Math.pow(10,Math.floor(Math.log(e)/Math.LN10))}function m(e,
f,k){e=f.c2d(e,l,k).split("-");""===e[0]&&(e.unshift(),e[0]="-"+e[0]);return e}I=b("../../constants/numerical");var l=I.ONEAVGYEAR,a=I.ONEAVGMONTH,h=I.ONEDAY,g=I.ONEHOUR,n=I.ONEMIN,p=I.ONESEC,d=b("../../plots/cartesian/axes").tickIncrement;N.exports=function(e,f,k,t,v){var w=-1.1*f,y=-.1*f,B=e-y;f=k[0];k=k[1];B=Math.min(r(f+y,f+B,t,v),r(k+y,k+B,t,v));w=Math.min(r(f+w,f+y,t,v),r(k+w,k+y,t,v));if(B>w&&w<Math.abs(k-f)/4E3){var A=B;var z=!1}else A=Math.min(B,w),z=!0;if("date"===t.type&&A>h){var E=A===
l?1:6,C=A===l?"M12":"M1";return function(u,D){var G=t.c2d(u,l,v),J=G.indexOf("-",E);0<J&&(G=G.substr(0,J));G=t.d2c(G,0,v);G<u&&(J=d(G,C,!1,v),(G+J)/2<u+e&&(G=J));return D&&z?d(G,C,!0,v):G}}return function(u,D){var G=A*Math.round(u/A);G+A/10<u&&G+.9*A<u+e&&(G+=A);D&&z&&(G-=A);return G}}},{"../../constants/numerical":753,"../../plots/cartesian/axes":828}],1089:[function(b,N,I){function r(k,t,v,w,y){function B(T,O,U){O[T+"Found"]?(O[T]=u(O[T]),null===O[T]&&(O[T]=U[T])):(P[T]=O[T]=U[T],a.nestedProperty(D[0],
A+"."+T).set(U[T]))}var A=w+"bins",z=k._fullLayout,E=z._histogramBinOpts[t["_"+w+"bingroup"]];z="overlay"===z.barmode;var C,u="date"===v.type?function(T){return T||0===T?a.cleanDate(T,null,M):null}:function(T){return l(T)?Number(T):null};if(t["_"+w+"autoBinFinished"])delete t["_"+w+"autoBinFinished"];else{var D=E.traces;var G=[],J=!0,L=!1,K=!1;for(C=0;C<D.length;C++){var H=D[C];if(H.visible){var Q=E.dirs[C];Q=H["_"+Q+"pos0"]=v.makeCalcdata(H,Q);G=a.concat(G,Q);delete H["_"+w+"autoBinFinished"];!0===
t.visible&&(J?J=!1:(delete H._autoBin,H["_"+w+"autoBinFinished"]=1),h.traceIs(H,"2dMap")&&(L=!0),"histogram2dcontour"===H.type&&(K=!0))}}var M=D[0][w+"calendar"];C=g.autoBin(G,v,E.nbins,L,M,E.sizeFound&&E.size);var P=(D[0]._autoBin={})[E.dirs[0]]={};K&&(E.size||(C.start=v.c2r(g.tickIncrement(v.r2c(C.start,0,M),C.size,!0,M),0,M)),void 0===E.end&&(C.end=v.c2r(g.tickIncrement(v.r2c(C.end,0,M),C.size,!1,M),0,M)));if(z&&!h.traceIs(t,"2dMap")&&0===C._dataSpan&&"category"!==v.type&&"multicategory"!==v.type){if(y)return[C,
Q,!0];C=q(k,t,v,w,A)}Q=H.cumulative||{};Q.enabled&&"include"!==Q.currentbin&&("decreasing"===Q.direction?C.start=v.c2r(g.tickIncrement(v.r2c(C.start,0,M),C.size,!0,M),0,M):C.end=v.c2r(g.tickIncrement(v.r2c(C.end,0,M),C.size,!1,M),0,M));E.size=C.size;E.sizeFound||(P.size=C.size,a.nestedProperty(D[0],A+".size").set(C.size));B("start",E,C);B("end",E,C)}Q=t["_"+w+"pos0"];delete t["_"+w+"pos0"];y=t._input[A]||{};k=a.extendFlat({},E);K=E.start;z=v.r2l(y.start);H=void 0!==z;(E.startFound||H)&&z!==v.r2l(K)&&
(z=H?z:a.aggNums(Math.min,null,Q),K={type:"category"===v.type||"multicategory"===v.type?"linear":v.type,r2l:v.r2l,dtick:E.size,tick0:K,calendar:M,range:[z,g.tickIncrement(z,E.size,!1,M)].map(v.l2r)},K=g.tickFirst(K),K>v.r2l(z)&&(K=g.tickIncrement(K,E.size,!0,M)),k.start=v.l2r(K),H||a.nestedProperty(t,A+".start").set(k.start));H=E.end;z=v.r2l(y.end);y=void 0!==z;(E.endFound||y)&&z!==v.r2l(H)&&(E=y?z:a.aggNums(Math.max,null,Q),k.end=v.l2r(E),y||a.nestedProperty(t,A+".start").set(k.end));v="autobin"+
w;!1===t._input[v]&&(t._input[A]=a.extendFlat({},t[A]||{}),delete t._input[v],delete t[v]);return[k,Q]}function q(k,t,v,w,y){for(var B=k._fullLayout,A=t.xaxis,z=t.yaxis,E=t.orientation,C=[],u=k._fullData,D=0;D<u.length;D++){var G=u[D];"histogram"===G.type&&!0===G.visible&&G.orientation===E&&G.xaxis===A&&G.yaxis===z&&C.push(G)}D=!1;A=Infinity;z=[t];for(E=0;E<C.length;E++)if(u=C[E],u===t)D=!0;else if(D){G=r(k,u,v,w,!0);var J=G[0],L=G[2];u["_"+w+"autoBinFinished"]=1;u["_"+w+"pos0"]=G[1];L?z.push(u):
A=Math.min(A,J.size)}else G=B._histogramBinOpts[u["_"+w+"bingroup"]],A=Math.min(A,G.size||u[y].size);k=Array(z.length);for(E=0;E<z.length;E++)for(C=z[E]["_"+w+"pos0"],u=0;u<C.length;u++)if(void 0!==C[u]){k[E]=C[u];break}isFinite(A)||(A=a.distinctVals(k).minDiff);for(E=0;E<z.length;E++)u=z[E],C=u[w+"calendar"],C={start:v.c2r(k[E]-A/2,0,C),end:v.c2r(k[E]+A/2,0,C),size:A},u._input[y]=u[y]=C,(G=B._histogramBinOpts[u["_"+w+"bingroup"]])&&a.extendFlat(G,C);return t[y]}function m(k,t,v){function w(z){A=
k[z];k[z]/=2}function y(z){B=k[z];k[z]=A+B/2;A+=B}var B,A;if("half"===v)if("increasing"===t)for(w(0),t=1;t<k.length;t++)y(t);else for(w(k.length-1),t=k.length-2;0<=t;t--)y(t);else if("increasing"===t){for(t=1;t<k.length;t++)k[t]+=k[t-1];"exclude"===v&&(k.unshift(0),k.pop())}else{for(t=k.length-2;0<=t;t--)k[t]+=k[t+1];"exclude"===v&&(k.push(0),k.shift())}}var l=b("fast-isnumeric"),a=b("../../lib"),h=b("../../registry"),g=b("../../plots/cartesian/axes"),n=b("../bar/arrays_to_calcdata"),p=b("./bin_functions"),
d=b("./norm_functions"),e=b("./average"),f=b("./bin_label_vals");N.exports={calc:function(k,t){var v=[],w=[],y=g.getFromId(k,"h"===t.orientation?t.yaxis:t.xaxis),B="h"===t.orientation?"y":"x",A={x:"y",y:"x"}[B],z=t[B+"calendar"],E=t.cumulative,C=r(k,t,y,B),u=C[0];C=C[1];var D="string"===typeof u.size,G=[],J=D?G:u,L=[],K=[],H=[],Q=0,M=t.histnorm,P=t.histfunc,T=-1!==M.indexOf("density"),O;E.enabled&&T&&(M=M.replace(/ ?density$/,""),T=!1);var U="max"===P||"min"===P?null:0,S=p.count;M=d[M];var X=!1;if(a.isArrayOrTypedArray(t[A])&&
"count"!==P){var ba=t[A];X="avg"===P;S=p[P]}A=y.r2c(u.start,0,z);for(O=y.r2c(u.end,0,z)+(A-g.tickIncrement(A,u.size,!1,z))/1E6;A<O&&1E6>v.length;){P=g.tickIncrement(A,u.size,!1,z);v.push((A+P)/2);w.push(U);H.push([]);G.push(A);T&&L.push(1/(P-A));X&&K.push(0);if(P<=A)break;A=P}G.push(A);D||"date"!==y.type||(J={start:y.r2c(J.start,0,z),end:y.r2c(J.end,0,z),size:J.size});k._fullLayout._roundFnOpts||(k._fullLayout._roundFnOpts={});var ca=t["_"+B+"bingroup"];U={leftGap:Infinity,rightGap:Infinity};ca&&
(k._fullLayout._roundFnOpts[ca]||(k._fullLayout._roundFnOpts[ca]=U),U=k._fullLayout._roundFnOpts[ca]);P=w.length;B=!0;O=U.leftGap;var ia=U.rightGap;D={};for(A=0;A<C.length;A++){var ja=C[A];T=a.findBin(ja,J);0<=T&&T<P&&(Q+=S(T,A,w,ba,K),B&&H[T].length&&ja!==C[H[T][0]]&&(B=!1),H[T].push(A),D[A]=T,O=Math.min(O,ja-G[T]),ia=Math.min(ia,G[T+1]-ja))}U.leftGap=O;U.rightGap=ia;var la;B||(la=function(da,oa){return function(){var sa=k._fullLayout._roundFnOpts[ca];return f(sa.leftGap,sa.rightGap,G,y,z)(da,oa)}});
X&&(Q=e(w,K));M&&M(w,Q,L);E.enabled&&m(w,E.direction,E.currentbin);L=Math.min(v.length,w.length);ba=[];K=0;J=L-1;for(A=0;A<L;A++)if(w[A]){K=A;break}for(A=L-1;A>=K;A--)if(w[A]){J=A;break}for(A=K;A<=J;A++)l(v[A])&&l(w[A])&&(L={p:v[A],s:w[A],b:0},E.enabled||(L.pts=H[A],B?L.ph0=L.ph1=H[A].length?C[H[A][0]]:v[A]:(t._computePh=!0,L.ph0=la(G[A]),L.ph1=la(G[A+1],!0))),ba.push(L));1===ba.length&&(ba[0].width1=g.tickIncrement(ba[0].p,u.size,!1,z)-ba[0].p);n(ba,t);a.isArrayOrTypedArray(t.selectedpoints)&&a.tagSelected(ba,
t,D);return ba},calcAllAutoBins:r}},{"../../lib":778,"../../plots/cartesian/axes":828,"../../registry":911,"../bar/arrays_to_calcdata":920,"./average":1085,"./bin_functions":1087,"./bin_label_vals":1088,"./norm_functions":1096,"fast-isnumeric":241}],1090:[function(b,N,I){N.exports={eventDataKeys:["binNumber"]}},{}],1091:[function(b,N,I){var r=b("../../lib"),q=b("../../plots/cartesian/axis_ids"),m=b("../../registry").traceIs,l=b("../bar/defaults").handleGroupingDefaults,a=r.nestedProperty,h=b("../../plots/cartesian/constraints").getAxisGroup,
g=[{aStr:{x:"xbins.start",y:"ybins.start"},name:"start"},{aStr:{x:"xbins.end",y:"ybins.end"},name:"end"},{aStr:{x:"xbins.size",y:"ybins.size"},name:"size"},{aStr:{x:"nbinsx",y:"nbinsy"},name:"nbins"}],n=["x","y"];N.exports=function(p,d){function e(G,J){return r.coerce(A._input,A,A._module.attributes,G,J)}function f(G){return"v"===G.orientation?"x":"y"}function k(G,J,L){var K=G.uid+"__"+L;J||(J=K);var H=q.getFromTrace({_fullLayout:d},G,L).type;var Q=G[L+"calendar"]||"",M=t[J],P=!0;M&&(H===M.axType&&
Q===M.calendar?(P=!1,M.traces.push(G),M.dirs.push(L)):(J=K,H!==M.axType&&r.warn(["Attempted to group the bins of trace",G.index,"set on a","type:"+H,"axis with bins on","type:"+M.axType,"axis."].join(" ")),Q!==M.calendar&&r.warn(["Attempted to group the bins of trace",G.index,"set with a",Q,"calendar with bins",M.calendar?"on a "+M.calendar+" calendar":"w/o a set calendar"].join(" "))));P&&(t[J]={traces:[G],dirs:[L],axType:H,calendar:G[L+"calendar"]||""});G["_"+L+"bingroup"]=J}var t=d._histogramBinOpts=
{},v=[],w={},y=[],B;for(B=0;B<p.length;B++){var A=p[B];m(A,"histogram")&&(v.push(A),delete A._xautoBinFinished,delete A._yautoBinFinished,m(A,"2dMap")||l(A._input,A,d,e))}p=d._alignmentOpts||{};for(B=0;B<v.length;B++){A=v[B];var z="";if(!m(A,"2dMap")){var E=f(A);if("group"===d.barmode&&A.alignmentgroup){var C=h(d,A[E+"axis"])+A.orientation;(p[C]||{})[A.alignmentgroup]&&(z=C)}z||"overlay"===d.barmode||(z=h(d,A.xaxis)+h(d,A.yaxis)+f(A))}z?(w[z]||(w[z]=[]),w[z].push(A)):y.push(A)}for(z in w)if(v=w[z],
1===v.length)y.push(v[0]);else for(B=!1,v.length&&(A=v[0],B=e("bingroup")),z=B||z,B=0;B<v.length;B++)A=v[B],(p=A._input.bingroup)&&p!==z&&r.warn(["Trace",A.index,"must match within bingroup",z+".","Ignoring its bingroup:",p,"setting."].join(" ")),A.bingroup=z,k(A,z,f(A));for(B=0;B<y.length;B++)if(A=y[B],w=e("bingroup"),m(A,"2dMap"))for(v=0;2>v;v++)E=n[v],p=e(E+"bingroup",w?w+"__"+E:null),k(A,p,E);else k(A,w,f(A));for(z in t)for(w=t[z],v=w.traces,y=0;y<g.length;y++)if(p=g[y],C=p.name,"nbins"!==C||
!w.sizeFound){for(B=0;B<v.length;B++){A=v[B];E=w.dirs[B];var u=p.aStr[E];if(void 0!==a(A._input,u).get()){w[C]=e(u);w[C+"Found"]=!0;break}var D=(A._autoBin||{})[E]||{};D[C]&&a(A,u).set(D[C])}if("start"===C||"end"===C)for(;B<v.length;B++)A=v[B],A["_"+E+"bingroup"]&&(D=(A._autoBin||{})[E]||{},e(u,D[C]));"nbins"!==C||w.sizeFound||w.nbinsFound||(A=v[0],w[C]=e(u))}}},{"../../lib":778,"../../plots/cartesian/axis_ids":831,"../../plots/cartesian/constraints":835,"../../registry":911,"../bar/defaults":925}],
1092:[function(b,N,I){var r=b("../../registry"),q=b("../../lib"),m=b("../../components/color"),l=b("../bar/style_defaults"),a=b("./attributes");N.exports=function(h,g,n,p){function d(v,w){return q.coerce(h,g,a,v,w)}var e=d("x"),f=d("y");d("cumulative.enabled")&&(d("cumulative.direction"),d("cumulative.currentbin"));d("text");d("hovertext");d("hovertemplate");var k=d("orientation",f&&!e?"h":"v"),t="v"===k?"x":"y";k="v"===k?"y":"x";(e=e&&f?Math.min(q.minRowLength(e)&&q.minRowLength(f)):q.minRowLength(g[t]||
[]))?(g._length=e,r.getComponentMethod("calendars","handleTraceDefaults")(h,g,["x","y"],p),g[k]&&d("histfunc"),d("histnorm"),d("autobin"+t),l(h,g,d,n,p),q.coerceSelectionMarkerOpacity(g,d),n=(g.marker.line||{}).color,p=r.getComponentMethod("errorbars","supplyDefaults"),p(h,g,n||m.defaultLine,{axis:"y"}),p(h,g,n||m.defaultLine,{axis:"x",inherit:"y"})):g.visible=!1}},{"../../components/color":643,"../../lib":778,"../../registry":911,"../bar/style_defaults":936,"./attributes":1084}],1093:[function(b,
N,I){N.exports=function(r,q,m,l,a){r.x="xVal"in q?q.xVal:q.x;r.y="yVal"in q?q.yVal:q.y;"zLabelVal"in q&&(r.z=q.zLabelVal);q.xa&&(r.xaxis=q.xa);q.ya&&(r.yaxis=q.ya);if(!(m.cumulative||{}).enabled){q=Array.isArray(a)?l[0].pts[a[0]][a[1]]:l[a].pts;r.pointNumbers=q;r.binNumber=r.pointNumber;delete r.pointNumber;delete r.pointIndex;if(m._indexToPoints)for(l=[],a=0;a<q.length;a++)l=l.concat(m._indexToPoints[q[a]]);else l=q;r.pointIndices=l}return r}},{}],1094:[function(b,N,I){var r=b("../bar/hover").hoverPoints,
q=b("../../plots/cartesian/axes").hoverLabelText;N.exports=function(m,l,a,h){if(l=r(m,l,a,h))return m=l[0],a=m.cd[m.index],h=m.cd[0].trace,h.cumulative.enabled||(h="h"===h.orientation?"y":"x",m[h+"Label"]=q(m[h+"a"],a.ph0,a.ph1)),l}},{"../../plots/cartesian/axes":828,"../bar/hover":928}],1095:[function(b,N,I){N.exports={attributes:b("./attributes"),layoutAttributes:b("../bar/layout_attributes"),supplyDefaults:b("./defaults"),crossTraceDefaults:b("./cross_trace_defaults"),supplyLayoutDefaults:b("../bar/layout_defaults"),
calc:b("./calc").calc,crossTraceCalc:b("../bar/cross_trace_calc").crossTraceCalc,plot:b("../bar/plot").plot,layerName:"barlayer",style:b("../bar/style").style,styleOnSelect:b("../bar/style").styleOnSelect,colorbar:b("../scatter/marker_colorbar"),hoverPoints:b("./hover"),selectPoints:b("../bar/select"),eventData:b("./event_data"),moduleType:"trace",name:"histogram",basePlotModule:b("../../plots/cartesian"),categories:"bar-like cartesian svg bar histogram oriented errorBarsOK showLegend".split(" "),
meta:{}}},{"../../plots/cartesian":841,"../bar/cross_trace_calc":924,"../bar/layout_attributes":930,"../bar/layout_defaults":931,"../bar/plot":932,"../bar/select":933,"../bar/style":935,"../scatter/marker_colorbar":1205,"./attributes":1084,"./calc":1089,"./cross_trace_defaults":1091,"./defaults":1092,"./event_data":1093,"./hover":1094}],1096:[function(b,N,I){N.exports={percent:function(r,q){var m=r.length;q=100/q;for(var l=0;l<m;l++)r[l]*=q},probability:function(r,q){for(var m=r.length,l=0;l<m;l++)r[l]/=
q},density:function(r,q,m,l){q=r.length;l=l||1;for(var a=0;a<q;a++)r[a]=r[a]*m[a]*l},"probability density":function(r,q,m,l){var a=r.length;l&&(q/=l);for(l=0;l<a;l++)r[l]*=m[l]/q}}},{}],1097:[function(b,N,I){I=b("../histogram/attributes");var r=b("../histogram/bin_attributes"),q=b("../heatmap/attributes"),m=b("../../plots/attributes"),l=b("../../plots/template_attributes").hovertemplateAttrs,a=b("../../components/colorscale/attributes");b=b("../../lib/extend").extendFlat;N.exports=b({x:I.x,y:I.y,
z:{valType:"data_array",editType:"calc"},marker:{color:{valType:"data_array",editType:"calc"},editType:"calc"},histnorm:I.histnorm,histfunc:I.histfunc,nbinsx:I.nbinsx,xbins:r("x"),nbinsy:I.nbinsy,ybins:r("y"),autobinx:I.autobinx,autobiny:I.autobiny,bingroup:b({},I.bingroup,{}),xbingroup:b({},I.bingroup,{}),ybingroup:b({},I.bingroup,{}),xgap:q.xgap,ygap:q.ygap,zsmooth:q.zsmooth,zhoverformat:q.zhoverformat,hovertemplate:l({},{keys:"z"}),showlegend:b({},m.showlegend,{dflt:!1})},a("",{cLetter:"z",autoColorDflt:!1}))},
{"../../components/colorscale/attributes":650,"../../lib/extend":768,"../../plots/attributes":824,"../../plots/template_attributes":906,"../heatmap/attributes":1065,"../histogram/attributes":1084,"../histogram/bin_attributes":1086}],1098:[function(b,N,I){function r(e,f,k,t){var v=Array(e);if(t)for(k=0;k<e;k++)v[k]=1/(f[k+1]-f[k]);else for(f=1/k,k=0;k<e;k++)v[k]=f;return v}function q(e,f){return{start:e(f.start),end:e(f.end),size:f.size}}function m(e,f,k,t,v,w){var y=e.length-1,B=Array(y);t=p(k,t,
e,v,w);for(k=0;k<y;k++)v=(f||[])[k],B[k]=void 0===v?[t(e[k]),t(e[k+1],!0)]:[v,v];return B}var l=b("../../lib"),a=b("../../plots/cartesian/axes"),h=b("../histogram/bin_functions"),g=b("../histogram/norm_functions"),n=b("../histogram/average"),p=b("../histogram/bin_label_vals"),d=b("../histogram/calc").calcAllAutoBins;N.exports=function(e,f){var k=a.getFromId(e,f.xaxis),t=a.getFromId(e,f.yaxis),v=f.xcalendar,w=f.ycalendar,y=function(ua){return k.r2c(ua,0,v)},B=function(ua){return t.r2c(ua,0,w)},A=d(e,
f,k,"x");var z=A[0];A=A[1];e=d(e,f,t,"y");var E=e[0];e=e[1];var C=f._length;A.length>C&&A.splice(C,A.length-C);e.length>C&&e.splice(C,e.length-C);var u=[],D=[],G=[],J="string"===typeof z.size,L="string"===typeof E.size,K=[],H=[],Q=J?K:z,M=L?H:E,P=0,T=[],O=[],U=f.histnorm,S=f.histfunc,X=-1!==U.indexOf("density"),ba="max"===S||"min"===S?null:0,ca=h.count;U=g[U];var ia=!1,ja=[],la=[];(f="z"in f?f.z:"marker"in f&&Array.isArray(f.marker.color)?f.marker.color:"")&&"count"!==S&&(ia="avg"===S,ca=h[S]);S=
z.size;var da=y(z.start),oa=y(z.end)+(da-a.tickIncrement(da,S,!1,v))/1E6;for(z=da;z<oa;z=a.tickIncrement(z,S,!1,v))D.push(ba),K.push(z),ia&&G.push(0);K.push(z);ba=D.length;S=(z-da)/ba;da=k.c2r(da+S/2,0,v);var sa=E.size;oa=B(E.start);var ma=B(E.end)+(oa-a.tickIncrement(oa,sa,!1,w))/1E6;for(z=oa;z<ma;z=a.tickIncrement(z,sa,!1,w)){u.push(D.slice());H.push(z);var qa=Array(ba);for(E=0;E<ba;E++)qa[E]=[];O.push(qa);ia&&T.push(G.slice())}H.push(z);G=u.length;E=(z-oa)/G;oa=t.c2r(oa+E/2,0,w);X&&(ja=r(D.length,
Q,S,J),la=r(u.length,M,E,L));J||"date"!==k.type||(Q=q(y,Q));L||"date"!==t.type||(M=q(B,M));J=D=!0;L=Array(ba);X=Array(G);var pa=qa=ma=sa=Infinity;for(z=0;z<C;z++){var na=A[z],ka=e[z];y=l.findBin(na,Q);B=l.findBin(ka,M);0<=y&&y<ba&&0<=B&&B<G&&(P+=ca(y,z,u[B],f,T[B]),O[B][y].push(z),D&&(void 0===L[y]?L[y]=na:L[y]!==na&&(D=!1)),J&&(void 0===X[B]?X[B]=ka:X[B]!==ka&&(J=!1)),sa=Math.min(sa,na-K[y]),ma=Math.min(ma,K[y+1]-na),qa=Math.min(qa,ka-H[B]),pa=Math.min(pa,H[B+1]-ka))}if(ia)for(B=0;B<G;B++)P+=n(u[B],
T[B]);if(U)for(B=0;B<G;B++)U(u[B],P,ja,la[B]);return{x:A,xRanges:m(K,D&&L,sa,ma,k,v),x0:da,dx:S,y:e,yRanges:m(H,J&&X,qa,pa,t,w),y0:oa,dy:E,z:u,pts:O}}},{"../../lib":778,"../../plots/cartesian/axes":828,"../histogram/average":1085,"../histogram/bin_functions":1087,"../histogram/bin_label_vals":1088,"../histogram/calc":1089,"../histogram/norm_functions":1096}],1099:[function(b,N,I){var r=b("../../lib"),q=b("./sample_defaults"),m=b("../heatmap/style_defaults"),l=b("../../components/colorscale/defaults"),
a=b("./attributes");N.exports=function(h,g,n,p){function d(e,f){return r.coerce(h,g,a,e,f)}q(h,g,d,p);!1!==g.visible&&(m(h,g,d,p),l(h,g,p,d,{prefix:"",cLetter:"z"}),d("hovertemplate"))}},{"../../components/colorscale/defaults":653,"../../lib":778,"../heatmap/style_defaults":1078,"./attributes":1097,"./sample_defaults":1102}],1100:[function(b,N,I){var r=b("../heatmap/hover"),q=b("../../plots/cartesian/axes").hoverLabelText;N.exports=function(m,l,a,h,g,n){if(l=r(m,l,a,h,g,n))return m=l[0],h=m.index,
g=m.cd[0],a=g.xRanges[h[1]],h=g.yRanges[h[0]],m.xLabel=q(m.xa,a[0],a[1]),m.yLabel=q(m.ya,h[0],h[1]),l}},{"../../plots/cartesian/axes":828,"../heatmap/hover":1072}],1101:[function(b,N,I){N.exports={attributes:b("./attributes"),supplyDefaults:b("./defaults"),crossTraceDefaults:b("../histogram/cross_trace_defaults"),calc:b("../heatmap/calc"),plot:b("../heatmap/plot"),layerName:"heatmaplayer",colorbar:b("../heatmap/colorbar"),style:b("../heatmap/style"),hoverPoints:b("./hover"),eventData:b("../histogram/event_data"),
moduleType:"trace",name:"histogram2d",basePlotModule:b("../../plots/cartesian"),categories:["cartesian","svg","2dMap","histogram","showLegend"],meta:{}}},{"../../plots/cartesian":841,"../heatmap/calc":1066,"../heatmap/colorbar":1068,"../heatmap/plot":1076,"../heatmap/style":1077,"../histogram/cross_trace_defaults":1091,"../histogram/event_data":1093,"./attributes":1097,"./defaults":1099,"./hover":1100}],1102:[function(b,N,I){var r=b("../../registry"),q=b("../../lib");N.exports=function(m,l,a,h){var g=
a("x"),n=a("y");g=q.minRowLength(g);n=q.minRowLength(n);g&&n?(l._length=Math.min(g,n),r.getComponentMethod("calendars","handleTraceDefaults")(m,l,["x","y"],h),(a("z")||a("marker.color"))&&a("histfunc"),a("histnorm"),a("autobinx"),a("autobiny")):l.visible=!1}},{"../../lib":778,"../../registry":911}],1103:[function(b,N,I){I=b("../histogram2d/attributes");var r=b("../contour/attributes"),q=b("../../components/colorscale/attributes");b=b("../../lib/extend").extendFlat;N.exports=b({x:I.x,y:I.y,z:I.z,marker:I.marker,
histnorm:I.histnorm,histfunc:I.histfunc,nbinsx:I.nbinsx,xbins:I.xbins,nbinsy:I.nbinsy,ybins:I.ybins,autobinx:I.autobinx,autobiny:I.autobiny,bingroup:I.bingroup,xbingroup:I.xbingroup,ybingroup:I.ybingroup,autocontour:r.autocontour,ncontours:r.ncontours,contours:r.contours,line:{color:r.line.color,width:b({},r.line.width,{dflt:.5}),dash:r.line.dash,smoothing:r.line.smoothing,editType:"plot"},zhoverformat:I.zhoverformat,hovertemplate:I.hovertemplate},q("",{cLetter:"z",editTypeOverride:"calc"}))},{"../../components/colorscale/attributes":650,
"../../lib/extend":768,"../contour/attributes":1008,"../histogram2d/attributes":1097}],1104:[function(b,N,I){var r=b("../../lib"),q=b("../histogram2d/sample_defaults"),m=b("../contour/contours_defaults"),l=b("../contour/style_defaults"),a=b("./attributes");N.exports=function(h,g,n,p){function d(e,f){return r.coerce(h,g,a,e,f)}q(h,g,d,p);!1!==g.visible&&(m(h,g,d,function(e){return r.coerce2(h,g,a,e)}),l(h,g,d,p),d("hovertemplate"))}},{"../../lib":778,"../contour/contours_defaults":1015,"../contour/style_defaults":1029,
"../histogram2d/sample_defaults":1102,"./attributes":1103}],1105:[function(b,N,I){N.exports={attributes:b("./attributes"),supplyDefaults:b("./defaults"),crossTraceDefaults:b("../histogram/cross_trace_defaults"),calc:b("../contour/calc"),plot:b("../contour/plot").plot,layerName:"contourlayer",style:b("../contour/style"),colorbar:b("../contour/colorbar"),hoverPoints:b("../contour/hover"),moduleType:"trace",name:"histogram2dcontour",basePlotModule:b("../../plots/cartesian"),categories:"cartesian svg 2dMap contour histogram showLegend".split(" "),
meta:{}}},{"../../plots/cartesian":841,"../contour/calc":1009,"../contour/colorbar":1011,"../contour/hover":1021,"../contour/plot":1026,"../contour/style":1028,"../histogram/cross_trace_defaults":1091,"./attributes":1103,"./defaults":1104}],1106:[function(b,N,I){I=b("../../plots/attributes");var r=b("../../plots/template_attributes").hovertemplateAttrs,q=b("../../lib/extend").extendFlat;b=b("./constants").colormodel;for(var m=["rgb","rgba","rgba256","hsl","hsla"],l=[],a=[],h=0;h<m.length;h++){var g=
b[m[h]];l.push("For the `"+m[h]+"` colormodel, it is ["+(g.zminDflt||g.min).join(", ")+"].");a.push("For the `"+m[h]+"` colormodel, it is ["+(g.zmaxDflt||g.max).join(", ")+"].")}N.exports=q({source:{valType:"string",editType:"calc"},z:{valType:"data_array",editType:"calc"},colormodel:{valType:"enumerated",values:m,editType:"calc"},zmin:{valType:"info_array",items:[{valType:"number",editType:"calc"},{valType:"number",editType:"calc"},{valType:"number",editType:"calc"},{valType:"number",editType:"calc"}],
editType:"calc"},zmax:{valType:"info_array",items:[{valType:"number",editType:"calc"},{valType:"number",editType:"calc"},{valType:"number",editType:"calc"},{valType:"number",editType:"calc"}],editType:"calc"},x0:{valType:"any",dflt:0,editType:"calc+clearAxisTypes"},y0:{valType:"any",dflt:0,editType:"calc+clearAxisTypes"},dx:{valType:"number",dflt:1,editType:"calc"},dy:{valType:"number",dflt:1,editType:"calc"},text:{valType:"data_array",editType:"plot"},hovertext:{valType:"data_array",editType:"plot"},
hoverinfo:q({},I.hoverinfo,{flags:"x y z color name text".split(" "),dflt:"x+y+z+text+name"}),hovertemplate:r({},{keys:["z","color","colormodel"]}),transforms:void 0})},{"../../lib/extend":768,"../../plots/attributes":824,"../../plots/template_attributes":906,"./constants":1108}],1107:[function(b,N,I){function r(d,e,f,k){return function(t){return l.constrain((t-d)*e,f,k)}}function q(d,e){return function(f){return l.constrain(f,d,e)}}function m(d){var e=a.colormodel[d.colormodel],f=(e.colormodel||
d.colormodel).length;d._sArray=[];for(var k=0;k<f;k++)e.min[k]!==d.zmin[k]||e.max[k]!==d.zmax[k]?d._sArray.push(r(d.zmin[k],(e.max[k]-e.min[k])/(d.zmax[k]-d.zmin[k]),e.min[k],e.max[k])):d._sArray.push(q(e.min[k],e.max[k]));return function(t){t=t.slice(0,f);for(var v=0;v<f;v++){var w=t[v];if(!h(w))return!1;t[v]=d._sArray[v](w)}return t}}var l=b("../../lib"),a=b("./constants"),h=b("fast-isnumeric"),g=b("../../plots/cartesian/axes"),n=b("../../lib").maxRowLength,p=b("./helpers").getImageSize;N.exports=
function(d,e){if(e._hasZ){var f=e.z.length;var k=n(e.z)}else e._hasSource&&(k=p(e.source),f=k.height,k=k.width);var t=g.getFromId(d,e.xaxis||"x");d=g.getFromId(d,e.yaxis||"y");var v=t.d2c(e.x0)-e.dx/2,w=d.d2c(e.y0)-e.dy/2,y,B=[v,v+k*e.dx],A=[w,w+f*e.dy];if(t&&"log"===t.type)for(y=0;y<k;y++)B.push(v+y*e.dx);if(d&&"log"===d.type)for(y=0;y<f;y++)A.push(w+y*e.dy);e._extremes[t._id]=g.findExtremes(t,B);e._extremes[d._id]=g.findExtremes(d,A);e._scaler=m(e);return[{x0:v,y0:w,z:e.z,w:k,h:f}]}},{"../../lib":778,
"../../plots/cartesian/axes":828,"./constants":1108,"./helpers":1111,"fast-isnumeric":241}],1108:[function(b,N,I){N.exports={colormodel:{rgb:{min:[0,0,0],max:[255,255,255],fmt:function(r){return r.slice(0,3)},suffix:["","",""]},rgba:{min:[0,0,0,0],max:[255,255,255,1],fmt:function(r){return r.slice(0,4)},suffix:["","","",""]},rgba256:{colormodel:"rgba",zminDflt:[0,0,0,0],zmaxDflt:[255,255,255,255],min:[0,0,0,0],max:[255,255,255,1],fmt:function(r){return r.slice(0,4)},suffix:["","","",""]},hsl:{min:[0,
0,0],max:[360,100,100],fmt:function(r){r=r.slice(0,3);r[1]+="%";r[2]+="%";return r},suffix:["","%","%"]},hsla:{min:[0,0,0,0],max:[360,100,100,1],fmt:function(r){r=r.slice(0,4);r[1]+="%";r[2]+="%";return r},suffix:["","%","%",""]}}}},{}],1109:[function(b,N,I){var r=b("../../lib"),q=b("./attributes"),m=b("./constants"),l=b("../../snapshot/helpers").IMAGE_URL_PREFIX;N.exports=function(a,h){function g(p,d){return r.coerce(a,h,q,p,d)}g("source");h.source&&!h.source.match(l)&&delete h.source;h._hasSource=
!!h.source;var n=g("z");h._hasZ=!(void 0===n||!n.length||!n[0]||!n[0].length);h._hasZ||h._hasSource?(g("x0"),g("y0"),g("dx"),g("dy"),h._hasZ?(g("colormodel","rgb"),n=m.colormodel[h.colormodel],g("zmin",n.zminDflt||n.min),g("zmax",n.zmaxDflt||n.max)):h._hasSource&&(h.colormodel="rgba256",n=m.colormodel[h.colormodel],h.zmin=n.zminDflt,h.zmax=n.zmaxDflt),g("text"),g("hovertext"),g("hovertemplate"),h._length=null):h.visible=!1}},{"../../lib":778,"../../snapshot/helpers":915,"./attributes":1106,"./constants":1108}],
1110:[function(b,N,I){N.exports=function(r,q){"xVal"in q&&(r.x=q.xVal);"yVal"in q&&(r.y=q.yVal);q.xa&&(r.xaxis=q.xa);q.ya&&(r.yaxis=q.ya);r.color=q.color;r.colormodel=q.trace.colormodel;r.z||(r.z=q.color);return r}},{}],1111:[function(b,N,I){var r=b("image-size"),q=b("../../snapshot/helpers").IMAGE_URL_PREFIX,m=b("buffer/").Buffer;I.getImageSize=function(l){l=l.replace(q,"");l=new m(l,"base64");return r(l)}},{"../../snapshot/helpers":915,"buffer/":111,"image-size":444}],1112:[function(b,N,I){var r=
b("../../components/fx"),q=b("../../lib"),m=b("./constants");N.exports=function(l,a,h){var g=l.cd[0],n=g.trace,p=l.xa,d=l.ya;if(!(0<r.inbox(a-g.x0,a-(g.x0+g.w*n.dx),0)||0<r.inbox(h-g.y0,h-(g.y0+g.h*n.dy),0))){a=Math.floor((a-g.x0)/n.dx);h=Math.floor(Math.abs(h-g.y0)/n.dy);if(n._hasZ)var e=g.z[h][a];else n._hasSource&&(e=n._canvas.el.getContext("2d").getImageData(a,h,1,1).data);if(e){var f=g.hi||n.hoverinfo,k;f&&(f=f.split("+"),-1!==f.indexOf("all")&&(f=["color"]),-1!==f.indexOf("color")&&(k=!0));
var t=m.colormodel[n.colormodel],v=t.colormodel||n.colormodel,w=v.length;f=n._scaler(e);t=t.suffix;var y=[];if(n.hovertemplate||k)y.push("["+[f[0]+t[0],f[1]+t[1],f[2]+t[2]].join(", ")),4===w&&y.push(", "+f[3]+t[3]),y.push("]"),y=y.join(""),l.extraText=v.toUpperCase()+": "+y;var B;Array.isArray(n.hovertext)&&Array.isArray(n.hovertext[h])?B=n.hovertext[h][a]:Array.isArray(n.text)&&Array.isArray(n.text[h])&&(B=n.text[h][a]);d=d.c2p(g.y0+(h+.5)*n.dy);k=g.x0+(a+.5)*n.dx;v=g.y0+(h+.5)*n.dy;e="["+e.slice(0,
n.colormodel.length).join(", ")+"]";return[q.extendFlat(l,{index:[h,a],x0:p.c2p(g.x0+a*n.dx),x1:p.c2p(g.x0+(a+1)*n.dx),y0:d,y1:d,color:f,xVal:k,xLabelVal:k,yVal:v,yLabelVal:v,zLabelVal:e,text:B,hovertemplateLabels:{zLabel:e,colorLabel:y,"color[0]Label":f[0]+t[0],"color[1]Label":f[1]+t[1],"color[2]Label":f[2]+t[2],"color[3]Label":f[3]+t[3]}})]}}}},{"../../components/fx":683,"../../lib":778,"./constants":1108}],1113:[function(b,N,I){N.exports={attributes:b("./attributes"),supplyDefaults:b("./defaults"),
calc:b("./calc"),plot:b("./plot"),style:b("./style"),hoverPoints:b("./hover"),eventData:b("./event_data"),moduleType:"trace",name:"image",basePlotModule:b("../../plots/cartesian"),categories:["cartesian","svg","2dMap","noSortingByValue"],animatable:!1,meta:{}}},{"../../plots/cartesian":841,"./attributes":1106,"./calc":1107,"./defaults":1109,"./event_data":1110,"./hover":1112,"./plot":1114,"./style":1115}],1114:[function(b,N,I){var r=b("d3"),q=b("../../lib"),m=q.strTranslate,l=b("../../constants/xmlns_namespaces"),
a=b("./constants"),h=q.isIOS()||q.isSafari()||q.isIE();N.exports=function(g,n,p,d){var e=n.xaxis,f=n.yaxis,k=!(h||g._context._exportedPlot);q.makeTraceGroups(d,p,"im").each(function(t){function v(S){var X=document.createElement("canvas");X.width=T;X.height=O;var ba=X.getContext("2d"),ca=function(na){return q.constrain(Math.round(e.c2p(E+na*G)-K),0,T)},ia=function(na){return q.constrain(Math.round(f.c2p(C+na*J)-Q),0,O)},ja=a.colormodel[B.colormodel],la=ja.colormodel||B.colormodel;ja=ja.fmt;for(L=0;L<
y.w;L++){var da=ca(L),oa=ca(L+1);if(oa!==da&&!isNaN(oa)&&!isNaN(da))for(var sa=0;sa<y.h;sa++){var ma=ia(sa),qa=ia(sa+1);if(qa!==ma&&!isNaN(qa)&&!isNaN(ma)&&S(L,sa)){var pa=B._scaler(S(L,sa));ba.fillStyle=pa?la+"("+ja(pa).join(",")+")":"rgba(0,0,0,0)";ba.fillRect(da,ma,oa-da,qa-ma)}}}return X}var w=r.select(this),y=t[0],B=y.trace,A=k&&!B._hasZ&&B._hasSource&&"linear"===e.type&&"linear"===f.type;B._fastImage=A;var z=y.z,E=y.x0,C=y.y0,u=y.w,D=y.h,G=B.dx,J=B.dy,L;for(L=0;void 0===K&&L<u;){var K=e.c2p(E+
L*G);L++}for(L=u;void 0===H&&0<L;){var H=e.c2p(E+L*G);L--}for(L=0;void 0===Q&&L<D;){var Q=f.c2p(C+L*J);L++}for(L=D;void 0===M&&0<L;){var M=f.c2p(C+L*J);L--}if(H<K){var P=H;H=K;K=P}M<Q&&(P=Q,Q=M,M=P);A||(K=Math.max(-.5*e._length,K),H=Math.min(1.5*e._length,H),Q=Math.max(-.5*f._length,Q),M=Math.min(1.5*f._length,M));var T=Math.round(H-K),O=Math.round(M-Q);if(0>=T||0>=O)w.selectAll("image").data([]).exit().remove();else{var U=w.selectAll("image").data([t]);U.enter().append("svg:image").attr({xmlns:l.svg,
preserveAspectRatio:"none"});U.exit().remove();t="image-rendering: optimizeSpeed; image-rendering: -moz-crisp-edges; image-rendering: -o-crisp-edges; image-rendering: -webkit-optimize-contrast; image-rendering: optimize-contrast; image-rendering: crisp-edges; image-rendering: pixelated;";A&&(w=q.simpleMap(e.range,e.r2l),H=q.simpleMap(f.range,f.r2l),w=w[1]<w[0],H=H[1]>H[0],w||H)&&(P=K+T/2,M=Q+O/2,t+="transform:"+m(P+"px",M+"px")+"scale("+(w?-1:1)+","+(H?-1:1)+")"+m(-P+"px",-M+"px")+";");U.attr("style",
t);t=(new Promise(function(S){if(B._hasZ)S();else if(B._hasSource)if(B._canvas&&B._canvas.el.width===u&&B._canvas.el.height===D&&B._canvas.source===B.source)S();else{var X=document.createElement("canvas");X.width=u;X.height=D;var ba=X.getContext("2d");B._image=B._image||new Image;var ca=B._image;ca.onload=function(){ba.drawImage(ca,0,0);B._canvas={el:X,source:B.source};S()};ca.setAttribute("src",B.source)}})).then(function(){if(B._hasZ){var S=v(function(ba,ca){return z[ca][ba]});S=S.toDataURL("image/png")}else if(B._hasSource)if(A)S=
B.source;else{var X=B._canvas.el.getContext("2d").getImageData(0,0,u,D).data;S=v(function(ba,ca){ba=4*(ca*u+ba);return[X[ba],X[ba+1],X[ba+2],X[ba+3]]});S=S.toDataURL("image/png")}U.attr({"xlink:href":S,height:O,width:T,x:K,y:Q})});g._promises.push(t)}})}},{"../../constants/xmlns_namespaces":754,"../../lib":778,"./constants":1108,d3:169}],1115:[function(b,N,I){var r=b("d3");N.exports=function(q){r.select(q).selectAll(".im image").style("opacity",function(m){return m[0].trace.opacity})}},{d3:169}],
1116:[function(b,N,I){I=b("../../lib/extend").extendFlat;var r=b("../../lib/extend").extendDeep,q=b("../../plot_api/edit_types").overrideAll,m=b("../../plots/font_attributes"),l=b("../../components/color/attributes"),a=b("../../plots/domain").attributes,h=b("../../plots/cartesian/layout_attributes"),g=b("../../plot_api/plot_template").templatedArray,n=b("../../constants/delta.js");b("../../constants/docs");b=m({editType:"plot",colorEditType:"plot"});var p={color:{valType:"color",editType:"plot"},
line:{color:{valType:"color",dflt:l.defaultLine,editType:"plot"},width:{valType:"number",min:0,dflt:0,editType:"plot"},editType:"calc"},thickness:{valType:"number",min:0,max:1,dflt:1,editType:"plot"},editType:"calc"},d={valType:"info_array",items:[{valType:"number",editType:"plot"},{valType:"number",editType:"plot"}],editType:"plot"};g=g("step",r({},p,{range:d}));N.exports={mode:{valType:"flaglist",editType:"calc",flags:["number","delta","gauge"],dflt:"number"},value:{valType:"number",editType:"calc",
anim:!0},align:{valType:"enumerated",values:["left","center","right"],editType:"plot"},domain:a({name:"indicator",trace:!0,editType:"calc"}),title:{text:{valType:"string",editType:"plot"},align:{valType:"enumerated",values:["left","center","right"],editType:"plot"},font:I({},b,{}),editType:"plot"},number:{valueformat:{valType:"string",dflt:"",editType:"plot"},font:I({},b,{}),prefix:{valType:"string",dflt:"",editType:"plot"},suffix:{valType:"string",dflt:"",editType:"plot"},editType:"plot"},delta:{reference:{valType:"number",
editType:"calc"},position:{valType:"enumerated",values:["top","bottom","left","right"],dflt:"bottom",editType:"plot"},relative:{valType:"boolean",editType:"plot",dflt:!1},valueformat:{valType:"string",editType:"plot"},increasing:{symbol:{valType:"string",dflt:n.INCREASING.SYMBOL,editType:"plot"},color:{valType:"color",dflt:n.INCREASING.COLOR,editType:"plot"},editType:"plot"},decreasing:{symbol:{valType:"string",dflt:n.DECREASING.SYMBOL,editType:"plot"},color:{valType:"color",dflt:n.DECREASING.COLOR,
editType:"plot"},editType:"plot"},font:I({},b,{}),editType:"calc"},gauge:{shape:{valType:"enumerated",editType:"plot",dflt:"angular",values:["angular","bullet"]},bar:r({},p,{color:{dflt:"green"}}),bgcolor:{valType:"color",editType:"plot"},bordercolor:{valType:"color",dflt:l.defaultLine,editType:"plot"},borderwidth:{valType:"number",min:0,dflt:1,editType:"plot"},axis:q({range:d,visible:I({},h.visible,{dflt:!0}),tickmode:h.tickmode,nticks:h.nticks,tick0:h.tick0,dtick:h.dtick,tickvals:h.tickvals,ticktext:h.ticktext,
ticks:I({},h.ticks,{dflt:"outside"}),ticklen:h.ticklen,tickwidth:h.tickwidth,tickcolor:h.tickcolor,showticklabels:h.showticklabels,tickfont:m({}),tickangle:h.tickangle,tickformat:h.tickformat,tickformatstops:h.tickformatstops,tickprefix:h.tickprefix,showtickprefix:h.showtickprefix,ticksuffix:h.ticksuffix,showticksuffix:h.showticksuffix,separatethousands:h.separatethousands,exponentformat:h.exponentformat,minexponent:h.minexponent,showexponent:h.showexponent,editType:"plot"},"plot"),steps:g,threshold:{line:{color:I({},
p.line.color,{}),width:I({},p.line.width,{dflt:1}),editType:"plot"},thickness:I({},p.thickness,{dflt:.85}),value:{valType:"number",editType:"calc",dflt:!1},editType:"plot"},editType:"plot"}}},{"../../components/color/attributes":642,"../../constants/delta.js":747,"../../constants/docs":748,"../../lib/extend":768,"../../plot_api/edit_types":810,"../../plot_api/plot_template":817,"../../plots/cartesian/layout_attributes":842,"../../plots/domain":855,"../../plots/font_attributes":856}],1117:[function(b,
N,I){var r=b("../../plots/plots");I.name="indicator";I.plot=function(q,m,l,a){r.plotBasePlot(I.name,q,m,l,a)};I.clean=function(q,m,l,a){r.cleanBasePlot(I.name,q,m,l,a)}},{"../../plots/plots":891}],1118:[function(b,N,I){N.exports={calc:function(r,q){r=[];var m=q.value;"number"!==typeof q._lastValue&&(q._lastValue=q.value);var l=q._lastValue,a=l;q._hasDelta&&"number"===typeof q.delta.reference&&(a=q.delta.reference);r[0]={y:m,lastY:l,delta:m-a,relativeDelta:(m-a)/a};return r}}},{}],1119:[function(b,
N,I){N.exports={defaultNumberFontSize:80,bulletNumberDomainSize:.25,bulletPadding:.025,innerRadius:.75,valueThickness:.5,titlePadding:5,horizontalPadding:10}},{}],1120:[function(b,N,I){function r(e,f){function k(t,v){return q.coerce(e,f,m.gauge.steps,t,v)}k("color");k("line.color");k("line.width");k("range");k("thickness")}var q=b("../../lib"),m=b("./attributes"),l=b("../../plots/domain").defaults,a=b("../../plot_api/plot_template"),h=b("../../plots/array_container_defaults"),g=b("./constants.js"),
n=b("../../plots/cartesian/tick_value_defaults"),p=b("../../plots/cartesian/tick_mark_defaults"),d=b("../../plots/cartesian/tick_label_defaults");N.exports={supplyDefaults:function(e,f,k,t){function v(D,G){return q.coerce(e,f,m,D,G)}function w(D,G){return q.coerce(z,E,m.gauge,D,G)}function y(D,G){return q.coerce(C,u,m.gauge.axis,D,G)}l(f,t,v);v("mode");f._hasNumber=-1!==f.mode.indexOf("number");f._hasDelta=-1!==f.mode.indexOf("delta");f._hasGauge=-1!==f.mode.indexOf("gauge");k=v("value");f._range=
[0,"number"===typeof k?1.5*k:1];k=Array(2);if(f._hasNumber){v("number.valueformat");v("number.font.color",t.font.color);v("number.font.family",t.font.family);v("number.font.size");void 0===f.number.font.size&&(f.number.font.size=g.defaultNumberFontSize,k[0]=!0);v("number.prefix");v("number.suffix");var B=f.number.font.size}if(f._hasDelta){v("delta.font.color",t.font.color);v("delta.font.family",t.font.family);v("delta.font.size");void 0===f.delta.font.size&&(f.delta.font.size=(f._hasNumber?.5:1)*
(B||g.defaultNumberFontSize),k[1]=!0);v("delta.reference",f.value);v("delta.relative");v("delta.valueformat",f.delta.relative?"2%":"");v("delta.increasing.symbol");v("delta.increasing.color");v("delta.decreasing.symbol");v("delta.decreasing.color");v("delta.position");var A=f.delta.font.size}f._scaleNumbers=(!f._hasNumber||k[0])&&(!f._hasDelta||k[1])||!1;v("title.font.color",t.font.color);v("title.font.family",t.font.family);v("title.font.size",.25*(B||A||g.defaultNumberFontSize));v("title.text");
var z;if(f._hasGauge){(z=e.gauge)||(z={});var E=a.newContainer(f,"gauge");w("shape");(f._isBullet="bullet"===f.gauge.shape)||v("title.align","center");(f._isAngular="angular"===f.gauge.shape)||v("align","center");w("bgcolor",t.paper_bgcolor);w("borderwidth");w("bordercolor");w("bar.color");w("bar.line.color");w("bar.line.width");w("bar.thickness",g.valueThickness*("bullet"===f.gauge.shape?.5:1));h(z,E,{name:"steps",handleItemDefaults:r});w("threshold.value");w("threshold.thickness");w("threshold.line.width");
w("threshold.line.color");var C={};z&&(C=z.axis||{});var u=a.newContainer(E,"axis");y("visible");f._range=y("range",f._range);t={outerTicks:!0};n(C,u,y,"linear");d(C,u,y,"linear",t);p(C,u,y,t)}else v("title.align","center"),v("align","center"),f._isAngular=f._isBullet=!1;f._length=null}}},{"../../lib":778,"../../plot_api/plot_template":817,"../../plots/array_container_defaults":823,"../../plots/cartesian/tick_label_defaults":849,"../../plots/cartesian/tick_mark_defaults":850,"../../plots/cartesian/tick_value_defaults":851,
"../../plots/domain":855,"./attributes":1116,"./constants.js":1119}],1121:[function(b,N,I){N.exports={moduleType:"trace",name:"indicator",basePlotModule:b("./base_plot"),categories:["svg","noOpacity","noHover"],animatable:!0,attributes:b("./attributes"),supplyDefaults:b("./defaults").supplyDefaults,calc:b("./calc").calc,plot:b("./plot"),meta:{}}},{"./attributes":1116,"./base_plot":1117,"./calc":1118,"./defaults":1120,"./plot":1122}],1122:[function(b,N,I){function r(L,K,H,Q){function M(oa){oa.attr("width",
function(sa){return Math.max(0,la.c2p(sa.range[1])-la.c2p(sa.range[0]))}).attr("x",function(sa){return la.c2p(sa.range[0])}).attr("y",function(sa){return.5*(1-sa.thickness)*ia}).attr("height",function(sa){return sa.thickness*ia})}var P=H[0].trace;K=Q.gauge;var T=Q.layer,O=Q.gaugeBg,U=Q.gaugeOutline,S=Q.size,X=P.domain,ba=Q.transitionOpts,ca=Q.onComplete;K.enter().append("g").classed("bullet",!0);K.attr("transform",k(S.l,S.t));T.enter().append("g").classed("bulletaxis",!0).classed("crisp",!0);T.selectAll("g.xbulletaxistick,path,text").remove();
var ia=S.h;Q=P.gauge.bar.thickness*ia;var ja=X.x[0];X=X.x[0]+(X.x[1]-X.x[0])*(P._hasNumber||P._hasDelta?1-y.bulletNumberDomainSize:1);var la=h(L,P.gauge.axis);la._id="xbulletaxis";la.domain=[ja,X];la.setScale();X=A.calcTicks(la);ja=A.makeTransTickFn(la);var da=A.getTickSigns(la)[2];S=S.t+S.h;la.visible&&(A.drawTicks(L,la,{vals:"inside"===la.ticks?A.clipEnds(la,X):X,layer:T,path:A.makeTickPath(la,S,da),transFn:ja}),A.drawLabels(L,la,{vals:X,layer:T,transFn:ja,labelFns:A.makeLabelFns(la,S)}));L=[O].concat(P.gauge.steps);
L=K.selectAll("g.bg-bullet").data(L);L.enter().append("g").classed("bg-bullet",!0).append("rect");L.select("rect").call(M).call(l);L.exit().remove();L=K.selectAll("g.value-bullet").data([P.gauge.bar]);L.enter().append("g").classed("value-bullet",!0).append("rect");L.select("rect").attr("height",Q).attr("y",(ia-Q)/2).call(l);ba&&0<ba.duration?L.select("rect").transition().duration(ba.duration).ease(ba.easing).each("end",function(){ca&&ca()}).each("interrupt",function(){ca&&ca()}).attr("width",Math.max(0,
la.c2p(Math.min(P.gauge.axis.range[1],H[0].y)))):L.select("rect").attr("width","number"===typeof H[0].y?Math.max(0,la.c2p(Math.min(P.gauge.axis.range[1],H[0].y))):0);L.exit().remove();H=H.filter(function(){return P.gauge.threshold.value});H=K.selectAll("g.threshold-bullet").data(H);H.enter().append("g").classed("threshold-bullet",!0).append("line");H.select("line").attr("x1",la.c2p(P.gauge.threshold.value)).attr("x2",la.c2p(P.gauge.threshold.value)).attr("y1",(1-P.gauge.threshold.thickness)/2*ia).attr("y2",
(1-(1-P.gauge.threshold.thickness)/2)*ia).call(u.stroke,P.gauge.threshold.line.color).style("stroke-width",P.gauge.threshold.line.width);H.exit().remove();K=K.selectAll("g.gauge-outline").data([U]);K.enter().append("g").classed("gauge-outline",!0).append("rect");K.select("rect").call(M).call(l);K.exit().remove()}function q(L,K,H,Q){function M(va){var Ca=O.gauge.axis.range[0];va=(va-Ca)/(O.gauge.axis.range[1]-Ca)*Math.PI-da;return va<-da?-da:va>da?da:va}function P(va){return d.svg.arc().innerRadius((X+
S)/2-va/2*(S-X)).outerRadius((X+S)/2+va/2*(S-X)).startAngle(-da)}function T(va){va.attr("d",function(Ca){return P(Ca.thickness).startAngle(M(Ca.range[0])).endAngle(M(Ca.range[1]))()})}var O=H[0].trace,U=Q.size,S=Q.radius,X=Q.innerRadius,ba=Q.gaugeBg;K=Q.gaugeOutline;var ca=[U.l+U.w/2,U.t+U.h/2+S/2];U=Q.gauge;var ia=Q.layer,ja=Q.transitionOpts,la=Q.onComplete,da=Math.PI/2;U.enter().append("g").classed("angular",!0);U.attr("transform",k(ca[0],ca[1]));ia.enter().append("g").classed("angularaxis",!0).classed("crisp",
!0);ia.selectAll("g.xangularaxistick,path,text").remove();var oa=h(L,O.gauge.axis);oa.type="linear";oa.range=O.gauge.axis.range;oa._id="xangularaxis";oa.setScale();var sa=function(va){return(oa.range[0]-va.x)/(oa.range[1]-oa.range[0])*Math.PI+Math.PI},ma={},qa=A.makeLabelFns(oa,0).labelStandoff;ma.xFn=function(va){va=sa(va);return Math.cos(va)*qa};ma.yFn=function(va){var Ca=sa(va);return-Math.sin(Ca)*(qa+va.fontSize*(0<Math.sin(Ca)?.2:1))+Math.abs(Math.cos(Ca))*va.fontSize*v};ma.anchorFn=function(va){va=
sa(va);va=Math.cos(va);return.1>Math.abs(va)?"middle":0<va?"start":"end"};ma.heightFn=function(va,Ca,Ma){va=sa(va);return-.5*(1+Math.sin(va))*Ma};var pa=function(va){return k(ca[0]+S*Math.cos(va),ca[1]-S*Math.sin(va))};var na=function(va){return pa(sa(va))};var ka=function(va){va=sa(va);return pa(va)+"rotate("+-t(va)+")"};Q=A.calcTicks(oa);var ua=A.getTickSigns(oa)[2];oa.visible&&(ua="inside"===oa.ticks?-1:1,A.drawTicks(L,oa,{vals:Q,layer:ia,path:"M"+(oa.linewidth||1)/2*ua+",0h"+ua*oa.ticklen,transFn:ka}),
A.drawLabels(L,oa,{vals:Q,layer:ia,transFn:na,labelFns:ma}));L=[ba].concat(O.gauge.steps);L=U.selectAll("g.bg-arc").data(L);L.enter().append("g").classed("bg-arc",!0).append("path");L.select("path").call(T).call(l);L.exit().remove();L=P(O.gauge.bar.thickness);ba=U.selectAll("g.value-arc").data([O.gauge.bar]);ba.enter().append("g").classed("value-arc",!0).append("path");ia=ba.select("path");ja&&0<ja.duration?(ia.transition().duration(ja.duration).ease(ja.easing).each("end",function(){la&&la()}).each("interrupt",
function(){la&&la()}).attrTween("d",a(L,M(H[0].lastY),M(H[0].y))),O._lastValue=H[0].y):ia.attr("d","number"===typeof H[0].y?L.endAngle(M(H[0].y)):"M0,0Z");ia.call(l);ba.exit().remove();L=[];(H=O.gauge.threshold.value)&&L.push({range:[H,H],color:O.gauge.threshold.color,line:{color:O.gauge.threshold.line.color,width:O.gauge.threshold.line.width},thickness:O.gauge.threshold.thickness});H=U.selectAll("g.threshold-arc").data(L);H.enter().append("g").classed("threshold-arc",!0).append("path");H.select("path").call(T).call(l);
H.exit().remove();K=U.selectAll("g.gauge-outline").data([K]);K.enter().append("g").classed("gauge-outline",!0).append("path");K.select("path").call(T).call(l);K.exit().remove()}function m(L,K,H,Q){function M(ua,va,Ca,Ma){if(!ua.match("s")||0<=Ca===0<=Ma||va(Ca).slice(-1).match(J)||va(Ma).slice(-1).match(J))return va;ua=ua.slice().replace("s","f").replace(/\d+/,function(eb){return parseInt(eb)-1});var Ua=h(L,{tickformat:ua});return function(eb){return 1>Math.abs(eb)?A.tickText(Ua,eb).text:va(eb)}}
function P(){function ua(){var fb="number"===typeof H[0].y?Ua+Ca(H[0].y)+Ma:"-";eb.text(fb).call(w.font,O.number.font).call(B.convertToTspans,L)}var va=h(L,{tickformat:O.number.valueformat},O._range);va.setScale();A.prepTicks(va);var Ca=function(fb){return A.tickText(va,fb).text},Ma=O.number.suffix,Ua=O.number.prefix,eb=ja.select("text.number");ca&&0<ca.duration?eb.transition().duration(ca.duration).ease(ca.easing).each("end",function(){ua();ia&&ia()}).each("interrupt",function(){ua();ia&&ia()}).attrTween("text",
function(){var fb=d.select(this),nb=d.interpolateNumber(H[0].lastY,H[0].y);O._lastValue=H[0].y;var cb=M(O.number.valueformat,Ca,H[0].lastY,H[0].y);return function($a){fb.text(Ua+cb(nb($a))+Ma)}}):ua();la=n(Ua+Ca(H[0].y)+Ma,O.number.font,ba,L);return eb}function T(){function ua(){fb.text(Ua(Ma(H[0]),Ca)).call(u.fill,eb(H[0])).call(B.convertToTspans,L)}var va=h(L,{tickformat:O.delta.valueformat},O._range);va.setScale();A.prepTicks(va);var Ca=function(nb){return A.tickText(va,nb).text},Ma=function(nb){return O.delta.relative?
nb.relativeDelta:nb.delta},Ua=function(nb,cb){return 0===nb||"number"!==typeof nb||isNaN(nb)?"-":(0<nb?O.delta.increasing.symbol:O.delta.decreasing.symbol)+cb(nb)},eb=function(nb){return 0<=nb.delta?O.delta.increasing.color:O.delta.decreasing.color};void 0===O._deltaLastValue&&(O._deltaLastValue=Ma(H[0]));var fb=ja.select("text.delta");fb.call(w.font,O.delta.font).call(u.fill,eb({delta:O._deltaLastValue}));ca&&0<ca.duration?fb.transition().duration(ca.duration).ease(ca.easing).tween("text",function(){var nb=
d.select(this),cb=Ma(H[0]),$a=O._deltaLastValue,jb=M(O.delta.valueformat,Ca,$a,cb),pb=d.interpolateNumber($a,cb);O._deltaLastValue=cb;return function(xa){nb.text(Ua(pb(xa),jb));nb.call(u.fill,eb({delta:pb(xa)}))}}).each("end",function(){ua();ia&&ia()}).each("interrupt",function(){ua();ia&&ia()}):ua();da=n(Ua(Ma(H[0]),Ca),O.delta.font,ba,L);return fb}var O=H[0].trace,U=Q.numbersX,S=Q.numbersY,X=O.align||"center",ba=D[X],ca=Q.transitionOpts,ia=Q.onComplete,ja=e.ensureSingle(K,"g","numbers"),la,da;K=
[];O._hasNumber&&K.push("number");O._hasDelta&&(K.push("delta"),"left"===O.delta.position&&K.reverse());K=ja.selectAll("text").data(K);K.enter().append("text");K.attr("text-anchor",function(){return ba}).attr("class",function(ua){return ua}).attr("x",null).attr("y",null).attr("dx",null).attr("dy",null);K.exit().remove();var oa=O.mode+O.align;if(O._hasDelta){var sa=T();oa+=O.delta.position+O.delta.font.size+O.delta.font.family+O.delta.valueformat;oa+=O.delta.increasing.symbol+O.delta.decreasing.symbol;
var ma=da}O._hasNumber&&(P(),oa+=O.number.font.size+O.number.font.family+O.number.valueformat+O.number.suffix+O.number.prefix,ma=la);if(O._hasDelta&&O._hasNumber){K=[(la.left+la.right)/2,(la.top+la.bottom)/2];var qa=[(da.left+da.right)/2,(da.top+da.bottom)/2],pa=.75*O.delta.font.size;if("left"===O.delta.position){var na=p(O,"deltaPos",0,-1*(la.width*G[O.align]+da.width*(1-G[O.align])+pa),oa,Math.min);var ka=K[1]-qa[1];ma={width:la.width+da.width+pa,height:Math.max(la.height,da.height),left:da.left+
na,right:la.right,top:Math.min(la.top,da.top+ka),bottom:Math.max(la.bottom,da.bottom+ka)}}"right"===O.delta.position&&(na=p(O,"deltaPos",0,la.width*(1-G[O.align])+da.width*G[O.align]+pa,oa,Math.max),ka=K[1]-qa[1],ma={width:la.width+da.width+pa,height:Math.max(la.height,da.height),left:la.left,right:da.right+na,top:Math.min(la.top,da.top+ka),bottom:Math.max(la.bottom,da.bottom+ka)});"bottom"===O.delta.position&&(na=null,ka=da.height,ma={width:Math.max(la.width,da.width),height:la.height+da.height,
left:Math.min(la.left,da.left),right:Math.max(la.right,da.right),top:la.bottom-la.height,bottom:la.bottom+da.height});"top"===O.delta.position&&(na=null,ka=la.top,ma={width:Math.max(la.width,da.width),height:la.height+da.height,left:Math.min(la.left,da.left),right:Math.max(la.right,da.right),top:la.bottom-la.height-da.height,bottom:la.bottom});sa.attr({dx:na,dy:ka})}(O._hasNumber||O._hasDelta)&&ja.attr("transform",function(){var ua=Q.numbersScaler(ma);oa+=ua[2];ua=p(O,"numbersScale",1,ua[0],oa,Math.min);
O._scaleNumbers||(ua=1);var va=O._isAngular?S-ua*ma.bottom:S-ua*(ma.top+ma.bottom)/2;O._numbersTop=ua*ma.top+va;var Ca=ma[X];"center"===X&&(Ca=(ma.left+ma.right)/2);Ca=U-ua*Ca;Ca=p(O,"numbersTranslate",0,Ca,oa,Math.max);return k(Ca,va)+f(ua)})}function l(L){L.each(function(K){u.stroke(d.select(this),K.line.color)}).each(function(K){u.fill(d.select(this),K.color)}).style("stroke-width",function(K){return K.line.width})}function a(L,K,H){return function(){var Q=d.interpolate(K,H);return function(M){return L.endAngle(Q(M))()}}}
function h(L,K,H){function Q(T,O){return e.coerce(M,P,C,T,O)}L=L._fullLayout;var M=e.extendFlat({type:"linear",ticks:"outside",range:H,showline:!0},K),P={type:"linear",_id:"x"+K._id};K={letter:"x",font:L.font,noHover:!0,noTickson:!0};z(M,P,Q,K,L);E(M,P,Q,K);return P}function g(L,K,H){return[Math.min(K/L.width,H/L.height),L,K+"x"+H]}function n(L,K,H,Q){var M=document.createElementNS("http://www.w3.org/2000/svg","text");M=d.select(M);M.text(L).attr("x",0).attr("y",0).attr("text-anchor",H).attr("data-unformatted",
L).call(B.convertToTspans,Q).call(w.font,K);return w.bBox(M.node())}function p(L,K,H,Q,M,P){K="_cache"+K;L[K]&&L[K].key===M||(L[K]={key:M,value:H});H=e.aggNums(P,null,[L[K].value,Q],2);return L[K].value=H}var d=b("d3"),e=b("../../lib"),f=e.strScale,k=e.strTranslate,t=e.rad2deg,v=b("../../constants/alignment").MID_SHIFT,w=b("../../components/drawing"),y=b("./constants"),B=b("../../lib/svg_text_utils"),A=b("../../plots/cartesian/axes"),z=b("../../plots/cartesian/axis_defaults"),E=b("../../plots/cartesian/position_defaults"),
C=b("../../plots/cartesian/layout_attributes"),u=b("../../components/color"),D={left:"start",center:"middle",right:"end"},G={left:0,center:.5,right:1},J=/[yzafpnmkMGTPEZY]/;N.exports=function(L,K,H,Q){var M=L._fullLayout,P;H&&0<H.duration&&Q&&(P=Q());e.makeTraceGroups(M._indicatorlayer,K,"trace").each(function(T){var O=T[0].trace,U=d.select(this),S=O._hasGauge,X=O._isAngular,ba=O._isBullet,ca=O.domain,ia={w:M._size.w*(ca.x[1]-ca.x[0]),h:M._size.h*(ca.y[1]-ca.y[0]),l:M._size.l+M._size.w*ca.x[0],r:M._size.r+
M._size.w*(1-ca.x[1]),t:M._size.t+M._size.h*(1-ca.y[1]),b:M._size.b+M._size.h*ca.y[0]},ja=ia.l+ia.w/2,la=ia.t+ia.h/2,da=Math.min(ia.w/2,ia.h),oa=y.innerRadius*da;ca=O.align||"center";var sa=la;if(S){if(X){var ma=ja;sa=la+da/2;var qa=function(Ca){var Ma=.9*oa;return[Ma/Math.sqrt(Ca.width/2*(Ca.width/2)+Ca.height*Ca.height),Ca,Ma]}}if(ba){var pa=y.bulletPadding;ma=1-y.bulletNumberDomainSize+pa;ma=ia.l+(ma+(1-ma)*G[ca])*ia.w;qa=function(Ca){return g(Ca,(y.bulletNumberDomainSize-pa)*ia.w,ia.h)}}}else ma=
ia.l+G[ca]*ia.w,qa=function(Ca){return g(Ca,ia.w,ia.h)};m(L,U,T,{numbersX:ma,numbersY:sa,numbersScaler:qa,transitionOpts:H,onComplete:P});if(S){var na={range:O.gauge.axis.range,color:O.gauge.bgcolor,line:{color:O.gauge.bordercolor,width:0},thickness:1};var ka={range:O.gauge.axis.range,color:"rgba(0, 0, 0, 0)",line:{color:O.gauge.bordercolor,width:O.gauge.borderwidth},thickness:1}}ma=U.selectAll("g.angular").data(X?T:[]);ma.exit().remove();var ua=U.selectAll("g.angularaxis").data(X?T:[]);ua.exit().remove();
X&&q(L,U,T,{radius:da,innerRadius:oa,gauge:ma,layer:ua,size:ia,gaugeBg:na,gaugeOutline:ka,transitionOpts:H,onComplete:P});ma=U.selectAll("g.bullet").data(ba?T:[]);ma.exit().remove();qa=U.selectAll("g.bulletaxis").data(ba?T:[]);qa.exit().remove();ba&&r(L,U,T,{gauge:ma,layer:qa,size:ia,gaugeBg:na,gaugeOutline:ka,transitionOpts:H,onComplete:P});var va=U.selectAll("text.title").data(T);va.exit().remove();va.enter().append("text").classed("title",!0);va.attr("text-anchor",function(){return ba?D.right:
D[O.title.align]}).text(O.title.text).call(w.font,O.title.font).call(B.convertToTspans,L);va.attr("transform",function(){var Ca=ia.l+ia.w*G[O.title.align],Ma,Ua=y.titlePadding,eb=w.bBox(va.node());S?(X&&(Ma=O.gauge.axis.visible?w.bBox(ua.node()).top-Ua-eb.bottom:ia.t+ia.h/2-da/2-eb.bottom-Ua),ba&&(Ma=sa-(eb.top+eb.bottom)/2,Ca=ia.l-y.bulletPadding*ia.w)):Ma=O._numbersTop-Ua-eb.bottom;return k(Ca,Ma)})})}},{"../../components/color":643,"../../components/drawing":665,"../../constants/alignment":745,
"../../lib":778,"../../lib/svg_text_utils":803,"../../plots/cartesian/axes":828,"../../plots/cartesian/axis_defaults":830,"../../plots/cartesian/layout_attributes":842,"../../plots/cartesian/position_defaults":845,"./constants":1119,d3:169}],1123:[function(b,N,I){function r(g){return{show:{valType:"boolean",dflt:!1},locations:{valType:"data_array",dflt:[]},fill:{valType:"number",min:0,max:1,dflt:1}}}function q(g){return{show:{valType:"boolean",dflt:!0},fill:{valType:"number",min:0,max:1,dflt:1}}}
I=b("../../components/colorscale/attributes");var m=b("../../plots/template_attributes").hovertemplateAttrs,l=b("../mesh3d/attributes"),a=b("../../plots/attributes"),h=b("../../lib/extend").extendFlat;b=b("../../plot_api/edit_types").overrideAll;N=N.exports=b(h({x:{valType:"data_array"},y:{valType:"data_array"},z:{valType:"data_array"},value:{valType:"data_array"},isomin:{valType:"number"},isomax:{valType:"number"},surface:{show:{valType:"boolean",dflt:!0},count:{valType:"integer",dflt:2,min:1},fill:{valType:"number",
min:0,max:1,dflt:1},pattern:{valType:"flaglist",flags:["A","B","C","D","E"],extras:["all","odd","even"],dflt:"all"}},spaceframe:{show:{valType:"boolean",dflt:!1},fill:{valType:"number",min:0,max:1,dflt:.15}},slices:{x:r("x"),y:r("y"),z:r("z")},caps:{x:q("x"),y:q("y"),z:q("z")},text:{valType:"string",dflt:"",arrayOk:!0},hovertext:{valType:"string",dflt:"",arrayOk:!0},hovertemplate:m(),showlegend:h({},a.showlegend,{dflt:!1})},I("",{colorAttr:"`value`",showScaleDflt:!0,editTypeOverride:"calc"}),{opacity:l.opacity,
lightposition:l.lightposition,lighting:l.lighting,flatshading:l.flatshading,contour:l.contour,hoverinfo:h({},a.hoverinfo)}),"calc","nested");N.flatshading.dflt=!0;N.lighting.facenormalsepsilon.dflt=0;N.x.editType=N.y.editType=N.z.editType=N.value.editType="calc+clearAxisTypes";N.transforms=void 0},{"../../components/colorscale/attributes":650,"../../lib/extend":768,"../../plot_api/edit_types":810,"../../plots/attributes":824,"../../plots/template_attributes":906,"../mesh3d/attributes":1128}],1124:[function(b,
N,I){var r=b("../../components/colorscale/calc"),q=b("../streamtube/calc").processGrid,m=b("../streamtube/calc").filter;N.exports=function(l,a){a._len=Math.min(a.x.length,a.y.length,a.z.length,a.value.length);a._x=m(a.x,a._len);a._y=m(a.y,a._len);a._z=m(a.z,a._len);a._value=m(a.value,a._len);var h=q(a);a._gridFill=h.fill;a._Xs=h.Xs;a._Ys=h.Ys;a._Zs=h.Zs;a._len=h.len;h=Infinity;for(var g=-Infinity,n=0;n<a._len;n++){var p=a._value[n];h=Math.min(h,p);g=Math.max(g,p)}a._minValues=h;a._maxValues=g;a._vMin=
void 0===a.isomin||null===a.isomin?h:a.isomin;a._vMax=void 0===a.isomax||null===a.isomin?g:a.isomax;r(l,a,{vals:[a._vMin,a._vMax],containerStr:"",cLetter:"c"})}},{"../../components/colorscale/calc":651,"../streamtube/calc":1295}],1125:[function(b,N,I){function r(d,e,f){this.scene=d;this.uid=f;this.mesh=e;this.name="";this.data=null;this.showContour=!1}function q(d){function e(){fb=[];nb=[];cb=[];$a=[];oa=da=0}function f(pb,xa,Ea,Ia){fb.push(pb);nb.push(xa);cb.push(Ea);$a.push(Ia);da++;return da-1}
function k(pb,xa,Ea){for(var Ia=[],Oa=0;Oa<pb.length;Oa++)Ia[Oa]=pb[Oa]*(1-Ea)+Ea*xa[Oa];return Ia}function t(pb,xa){return"all"===pb||null===pb?!0:-1<pb.indexOf(xa)}function v(pb,xa,Ea){oa=da;var Ia=[xa];var Oa=[Ea];if(1<=jb)Ia=[xa],Oa=[Ea];else if(0<jb){var bb=Ea;Ia=xa[0];Oa=xa[1];xa=xa[2];for(var Xa=[],tb=0;tb<Ia.length;tb++)Xa[tb]=(Ia[tb]+Oa[tb]+xa[tb])/3;var Ka=Math.sqrt(1-jb);tb=k(Xa,Ia,Ka);Ea=k(Xa,Oa,Ka);var Ta=k(Xa,xa,Ka);Xa=bb[0];Ka=bb[1];bb=bb[2];xa=[[Ia,Oa,Ea],[Ea,tb,Ia],[Oa,xa,Ta],[Ta,
Ea,Oa],[xa,Ia,tb],[tb,Ta,xa]];Oa=[[Xa,Ka,-1],[-1,-1,Xa],[Ka,bb,-1],[-1,-1,Ka],[bb,Xa,-1],[-1,-1,bb]];Ia=xa}for(bb=0;bb<Ia.length;bb++){xa=Ia[bb];Ea=Oa[bb];tb=[];for(Xa=0;3>Xa;Xa++){var Na=xa[Xa][0],ib=xa[Xa][1];Ta=xa[Xa][2];Ka=xa[Xa][3];if(-1<Ea[Xa])var qb=Ea[Xa];else a:{qb=$a.length;for(var sb=oa;sb<qb;sb++)if(Na===fb[sb]&&ib===nb[sb]&&Ta===cb[sb]){qb=sb;break a}qb=-1}-1<qb?tb[Xa]=qb:(qb=tb,sb=Xa,Ka=null===pb?Ka:pb,qb[sb]=f(Na,ib,Ta,Ka))}xa=tb[1];Ea=tb[2];d._meshI.push(tb[0]);d._meshJ.push(xa);d._meshK.push(Ea);
la++}}function w(pb,xa,Ea){var Ia=function(Oa,bb,Xa){v(pb,[xa[Oa],xa[bb],xa[Xa]],[Ea[Oa],Ea[bb],Ea[Xa]])};Ia(0,1,2);Ia(2,3,0)}function y(pb,xa,Ea){var Ia=function(Oa,bb,Xa){v(pb,[xa[Oa],xa[bb],xa[Xa]],[Ea[Oa],Ea[bb],Ea[Xa]])};Ia(0,1,2);Ia(3,0,1);Ia(2,3,0);Ia(1,2,3)}function B(pb,xa,Ea,Ia){var Oa=pb[3];Oa<Ea&&(Oa=Ea);Oa>Ia&&(Oa=Ia);Ea=(pb[3]-Oa)/(pb[3]-xa[3]+1E-9);Ia=[];for(Oa=0;4>Oa;Oa++)Ia[Oa]=(1-Ea)*pb[Oa]+Ea*xa[Oa];return Ia}function A(pb,xa,Ea){return pb>=xa&&pb<=Ea}function z(pb){var xa=.001*
(eb-Ua);return pb>=Ua-xa&&pb<=eb+xa}function E(pb){for(var xa=[],Ea=0;4>Ea;Ea++){var Ia=pb[Ea];xa.push([d._x[Ia],d._y[Ia],d._z[Ia],d._value[Ia]])}return xa}function C(pb,xa,Ea,Ia,Oa,bb){bb||(bb=1);Ea=[-1,-1,-1];var Xa=!1,tb=[A(xa[0][3],Ia,Oa),A(xa[1][3],Ia,Oa),A(xa[2][3],Ia,Oa)];if(!tb[0]&&!tb[1]&&!tb[2])return!1;var Ka=function(Na,ib,qb){return z(ib[0][3])&&z(ib[1][3])&&z(ib[2][3])?(v(Na,ib,qb),!0):3>bb?C(Na,ib,qb,Ua,eb,++bb):!1};if(tb[0]&&tb[1]&&tb[2])return Ka(pb,xa,Ea)||Xa;var Ta=!1;[[0,1,2],
[2,0,1],[1,2,0]].forEach(function(Na){if(tb[Na[0]]&&tb[Na[1]]&&!tb[Na[2]]){var ib=xa[Na[0]],qb=xa[Na[1]],sb=xa[Na[2]],Ba=B(sb,ib,Ia,Oa);sb=B(sb,qb,Ia,Oa);Xa=Ka(pb,[sb,Ba,ib],[-1,-1,Ea[Na[0]]])||Xa;Xa=Ka(pb,[ib,qb,sb],[Ea[Na[0]],Ea[Na[1]],-1])||Xa;Ta=!0}});if(Ta)return Xa;[[0,1,2],[1,2,0],[2,0,1]].forEach(function(Na){if(tb[Na[0]]&&!tb[Na[1]]&&!tb[Na[2]]){var ib=xa[Na[0]],qb=xa[Na[2]],sb=B(xa[Na[1]],ib,Ia,Oa);qb=B(qb,ib,Ia,Oa);Xa=Ka(pb,[qb,sb,ib],[-1,-1,Ea[Na[0]]])||Xa;Ta=!0}});return Xa}function u(pb,
xa,Ea,Ia){var Oa=!1,bb=E(xa),Xa=[A(bb[0][3],Ea,Ia),A(bb[1][3],Ea,Ia),A(bb[2][3],Ea,Ia),A(bb[3][3],Ea,Ia)];if(!(Xa[0]||Xa[1]||Xa[2]||Xa[3]))return Oa;if(Xa[0]&&Xa[1]&&Xa[2]&&Xa[3])return ja&&(Oa=y(pb,bb,xa)||Oa),Oa;var tb=!1;[[0,1,2,3],[3,0,1,2],[2,3,0,1],[1,2,3,0]].forEach(function(Ka){if(Xa[Ka[0]]&&Xa[Ka[1]]&&Xa[Ka[2]]&&!Xa[Ka[3]]){var Ta=bb[Ka[0]],Na=bb[Ka[1]],ib=bb[Ka[2]],qb=bb[Ka[3]];ja?Oa=v(pb,[Ta,Na,ib],[xa[Ka[0]],xa[Ka[1]],xa[Ka[2]]])||Oa:(Ka=B(qb,Ta,Ea,Ia),Na=B(qb,Na,Ea,Ia),ib=B(qb,ib,Ea,
Ia),Oa=v(null,[Ka,Na,ib],[-1,-1,-1])||Oa);tb=!0}});if(tb)return Oa;[[0,1,2,3],[1,2,3,0],[2,3,0,1],[3,0,1,2],[0,2,3,1],[1,3,2,0]].forEach(function(Ka){if(Xa[Ka[0]]&&Xa[Ka[1]]&&!Xa[Ka[2]]&&!Xa[Ka[3]]){var Ta=bb[Ka[0]],Na=bb[Ka[1]],ib=bb[Ka[2]],qb=bb[Ka[3]],sb=B(ib,Ta,Ea,Ia);ib=B(ib,Na,Ea,Ia);var Ba=B(qb,Na,Ea,Ia);qb=B(qb,Ta,Ea,Ia);ja?(Oa=v(pb,[Ta,qb,sb],[xa[Ka[0]],-1,-1])||Oa,Oa=v(pb,[Na,ib,Ba],[xa[Ka[1]],-1,-1])||Oa):Oa=w(null,[sb,ib,Ba,qb],[-1,-1,-1,-1])||Oa;tb=!0}});if(tb)return Oa;[[0,1,2,3],[1,
2,3,0],[2,3,0,1],[3,0,1,2]].forEach(function(Ka){if(Xa[Ka[0]]&&!Xa[Ka[1]]&&!Xa[Ka[2]]&&!Xa[Ka[3]]){var Ta=bb[Ka[0]],Na=bb[Ka[2]],ib=bb[Ka[3]],qb=B(bb[Ka[1]],Ta,Ea,Ia);Na=B(Na,Ta,Ea,Ia);ib=B(ib,Ta,Ea,Ia);ja?(Oa=v(pb,[Ta,qb,Na],[xa[Ka[0]],-1,-1])||Oa,Oa=v(pb,[Ta,Na,ib],[xa[Ka[0]],-1,-1])||Oa,Oa=v(pb,[Ta,ib,qb],[xa[Ka[0]],-1,-1])||Oa):Oa=v(null,[qb,Na,ib],[-1,-1,-1])||Oa;tb=!0}});return Oa}function D(pb,xa,Ea,Ia,Oa,bb,Xa,tb,Ka,Ta,Na){var ib=!1;ia&&(t(pb,"A")&&(ib=u(null,[xa,Ea,Ia,bb],Ta,Na)||ib),t(pb,
"B")&&(ib=u(null,[Ea,Ia,Oa,Ka],Ta,Na)||ib),t(pb,"C")&&(ib=u(null,[Ea,bb,Xa,Ka],Ta,Na)||ib),t(pb,"D")&&(ib=u(null,[Ia,bb,tb,Ka],Ta,Na)||ib),t(pb,"E")&&(ib=u(null,[Ea,Ia,bb,Ka],Ta,Na)||ib));ja&&(ib=u(pb,[Ea,Ia,bb,Ka],Ta,Na)||ib);return ib}function G(pb,xa,Ea,Ia,Oa,bb,Xa,tb){return[!0===tb[0]?!0:C(pb,E([xa,Ea,Ia]),[xa,Ea,Ia],bb,Xa),!0===tb[1]?!0:C(pb,E([Ia,Oa,xa]),[Ia,Oa,xa],bb,Xa)]}function J(pb,xa,Ea,Ia,Oa,bb,Xa,tb,Ka){return tb?G(pb,xa,Ea,Oa,Ia,bb,Xa,Ka):G(pb,Ea,Oa,Ia,xa,bb,Xa,Ka)}function L(pb,xa,
Ea,Ia,Oa,bb,Xa){var tb=!1,Ka=function(){tb=C(pb,[ib,qb,sb],[-1,-1,-1],Oa,bb)||tb;tb=C(pb,[sb,Ba,ib],[-1,-1,-1],Oa,bb)||tb},Ta=Xa[0],Na=Xa[1];Xa=Xa[2];if(Ta){var ib=k(E([va(xa,Ea-0,Ia-0)])[0],E([va(xa-1,Ea-0,Ia-0)])[0],Ta);var qb=k(E([va(xa,Ea-0,Ia-1)])[0],E([va(xa-1,Ea-0,Ia-1)])[0],Ta);var sb=k(E([va(xa,Ea-1,Ia-1)])[0],E([va(xa-1,Ea-1,Ia-1)])[0],Ta);var Ba=k(E([va(xa,Ea-1,Ia-0)])[0],E([va(xa-1,Ea-1,Ia-0)])[0],Ta);Ka()}Na&&(ib=k(E([va(xa-0,Ea,Ia-0)])[0],E([va(xa-0,Ea-1,Ia-0)])[0],Na),qb=k(E([va(xa-
0,Ea,Ia-1)])[0],E([va(xa-0,Ea-1,Ia-1)])[0],Na),sb=k(E([va(xa-1,Ea,Ia-1)])[0],E([va(xa-1,Ea-1,Ia-1)])[0],Na),Ba=k(E([va(xa-1,Ea,Ia-0)])[0],E([va(xa-1,Ea-1,Ia-0)])[0],Na),Ka());Xa&&(ib=k(E([va(xa-0,Ea-0,Ia)])[0],E([va(xa-0,Ea-0,Ia-1)])[0],Xa),qb=k(E([va(xa-0,Ea-1,Ia)])[0],E([va(xa-0,Ea-1,Ia-1)])[0],Xa),sb=k(E([va(xa-1,Ea-1,Ia)])[0],E([va(xa-1,Ea-1,Ia-1)])[0],Xa),Ba=k(E([va(xa-1,Ea-0,Ia)])[0],E([va(xa-1,Ea-0,Ia-1)])[0],Xa),Ka());return tb}function K(pb,xa,Ea,Ia,Oa){for(var bb=[],Xa=0,tb=0;tb<xa.length;tb++)for(var Ka=
xa[tb],Ta=1;Ta<ka;Ta++)for(var Na=1;Na<na;Na++)bb.push(J(pb,va(Ka,Na-1,Ta-1),va(Ka,Na-1,Ta),va(Ka,Na,Ta-1),va(Ka,Na,Ta),Ea,Ia,(Ka+Na+Ta)%2,Oa&&Oa[Xa]?Oa[Xa]:[])),Xa++;return bb}function H(pb,xa,Ea,Ia,Oa){for(var bb=[],Xa=0,tb=0;tb<xa.length;tb++)for(var Ka=xa[tb],Ta=1;Ta<pa;Ta++)for(var Na=1;Na<ka;Na++)bb.push(J(pb,va(Ta-1,Ka,Na-1),va(Ta,Ka,Na-1),va(Ta-1,Ka,Na),va(Ta,Ka,Na),Ea,Ia,(Ta+Ka+Na)%2,Oa&&Oa[Xa]?Oa[Xa]:[])),Xa++;return bb}function Q(pb,xa,Ea,Ia,Oa){for(var bb=[],Xa=0,tb=0;tb<xa.length;tb++)for(var Ka=
xa[tb],Ta=1;Ta<na;Ta++)for(var Na=1;Na<pa;Na++)bb.push(J(pb,va(Na-1,Ta-1,Ka),va(Na-1,Ta,Ka),va(Na,Ta-1,Ka),va(Na,Ta,Ka),Ea,Ia,(Na+Ta+Ka)%2,Oa&&Oa[Xa]?Oa[Xa]:[])),Xa++;return bb}function M(pb,xa,Ea){for(var Ia=1;Ia<ka;Ia++)for(var Oa=1;Oa<na;Oa++)for(var bb=1;bb<pa;bb++){var Xa=pb,tb=va(bb-1,Oa-1,Ia-1),Ka=va(bb-1,Oa-1,Ia),Ta=va(bb-1,Oa,Ia-1),Na=va(bb-1,Oa,Ia),ib=va(bb,Oa-1,Ia-1),qb=va(bb,Oa-1,Ia),sb=va(bb,Oa,Ia-1),Ba=va(bb,Oa,Ia),Fa=xa,La=Ea,Va=Xa;(bb+Oa+Ia)%2?(ia&&"even"===Xa&&(Va=null),D(Va,tb,Ka,
Ta,Na,ib,qb,sb,Ba,Fa,La)):(ia&&"odd"===Xa&&(Va=null),D(Va,Ba,sb,qb,ib,Na,Ta,Ka,tb,Fa,La))}}function P(pb,xa,Ea){ja=!0;M(pb,xa,Ea);ja=!1}function T(pb,xa,Ea){ia=!0;M(pb,xa,Ea);ia=!1}function O(pb,xa){for(var Ea=[];pb<xa;pb++)Ea.push(pb);return Ea}function U(){for(var pb=0;pb<pa;pb++)for(var xa=0;xa<na;xa++)for(var Ea=0;Ea<ka;Ea++){var Ia=va(pb,xa,Ea);f(d._x[Ia],d._y[Ia],d._z[Ia],d._value[Ia])}}d._meshI=[];d._meshJ=[];d._meshK=[];var S=d.surface.show,X=d.spaceframe.show,ba=d.surface.fill,ca=d.spaceframe.fill,
ia=!1,ja=!1,la=0,da,oa,sa=d._Xs,ma=d._Ys,qa=d._Zs,pa=sa.length,na=ma.length,ka=qa.length,ua=p.indexOf(d._gridFill.replace(/-/g,"").replace(/\+/g,"")),va=function(pb,xa,Ea){switch(ua){case 5:return Ea+ka*xa+ka*na*pb;case 4:return Ea+ka*pb+ka*pa*xa;case 3:return xa+na*Ea+na*ka*pb;case 2:return xa+na*pb+na*pa*Ea;case 1:return pb+pa*Ea+pa*ka*xa;default:return pb+pa*xa+pa*na*Ea}},Ca=d._minValues,Ma=d._maxValues,Ua=d._vMin,eb=d._vMax,fb,nb,cb,$a,jb;(function(){e();U();X&&ca&&(jb=ca,P(null,Ua,eb));if(S&&
ba){jb=ba;for(var pb=d.surface.pattern,xa=d.surface.count,Ea=0;Ea<xa;Ea++){var Ia=1===xa?.5:Ea/(xa-1);Ia=(1-Ia)*Ua+Ia*eb;Ia=Math.abs(Ia-Ca)>Math.abs(Ia-Ma)?[Ca,Ia]:[Ia,Ma];T(pb,Ia[0],Ia[1])}}var Oa=[[Math.min(Ua,Ma),Math.max(Ua,Ma)],[Math.min(Ca,eb),Math.max(Ca,eb)]];["x","y","z"].forEach(function(bb){for(var Xa=[],tb=0;tb<Oa.length;tb++){var Ka=0,Ta=Oa[tb][0],Na=Oa[tb][1],ib=d.slices[bb];if(ib.show&&ib.fill){jb=ib.fill;var qb=[],sb=[],Ba=[];if(ib.locations.length)for(var Fa=0;Fa<ib.locations.length;Fa++){var La=
n(ib.locations[Fa],"x"===bb?sa:"y"===bb?ma:qa);0===La.distRatio?qb.push(La.id):0<La.id&&(sb.push(La.id),"x"===bb?Ba.push([La.distRatio,0,0]):"y"===bb?Ba.push([0,La.distRatio,0]):Ba.push([0,0,La.distRatio]))}else qb="x"===bb?O(1,pa-1):"y"===bb?O(1,na-1):O(1,ka-1);if(0<sb.length){if("x"===bb){ib=Ka;Fa=Ta;La=Na;for(var Va=Xa[Ka],Za=[],mb=0,ub=0;ub<sb.length;ub++)for(var Pb=sb[ub],Kb=1;Kb<ka;Kb++)for(var Ob=1;Ob<na;Ob++)Za.push(L(null,Pb,Ob,Kb,Fa,La,Ba[ub],Va&&Va[mb]?Va[mb]:[])),mb++;Xa[ib]=Za}else if("y"===
bb){ib=Ka;Fa=Ta;La=Na;Va=Xa[Ka];Za=[];for(ub=mb=0;ub<sb.length;ub++)for(Pb=sb[ub],Kb=1;Kb<pa;Kb++)for(Ob=1;Ob<ka;Ob++)Za.push(L(null,Kb,Pb,Ob,Fa,La,Ba[ub],Va&&Va[mb]?Va[mb]:[])),mb++;Xa[ib]=Za}else{ib=Ka;Fa=Ta;La=Na;Va=Xa[Ka];Za=[];for(ub=mb=0;ub<sb.length;ub++)for(Pb=sb[ub],Kb=1;Kb<na;Kb++)for(Ob=1;Ob<pa;Ob++)Za.push(L(null,Ob,Kb,Pb,Fa,La,Ba[ub],Va&&Va[mb]?Va[mb]:[])),mb++;Xa[ib]=Za}Ka++}0<qb.length&&(Xa[Ka]="x"===bb?K(null,qb,Ta,Na,Xa[Ka]):"y"===bb?H(null,qb,Ta,Na,Xa[Ka]):Q(null,qb,Ta,Na,Xa[Ka]),
Ka++)}qb=d.caps[bb];qb.show&&qb.fill&&(jb=qb.fill,Xa[Ka]="x"===bb?K(null,[0,pa-1],Ta,Na,Xa[Ka]):"y"===bb?H(null,[0,na-1],Ta,Na,Xa[Ka]):Q(null,[0,ka-1],Ta,Na,Xa[Ka]))}});0===la&&e();d._meshX=fb;d._meshY=nb;d._meshZ=cb;d._meshIntensity=$a;d._Xs=sa;d._Ys=ma;d._Zs=qa})();return d}var m=b("gl-mesh3d"),l=b("../../lib/gl_format_color").parseColorScale,a=b("../../lib/str2rgbarray"),h=b("../../components/colorscale").extractOpts,g=b("../../plots/gl3d/zip3"),n=function(d,e){for(var f=e.length-1;0<f;f--){var k=
Math.min(e[f],e[f-1]),t=Math.max(e[f],e[f-1]);if(t>k&&k<d&&d<=t)return{id:f,distRatio:(t-d)/(t-k)}}return{id:0,distRatio:0}};b=r.prototype;b.handlePick=function(d){if(d.object===this.mesh){var e=d.data.index,f=this.data._meshY[e],k=this.data._meshZ[e],t=this.data._Ys.length,v=this.data._Zs.length;e=n(this.data._meshX[e],this.data._Xs).id;f=n(f,this.data._Ys).id;k=n(k,this.data._Zs).id;t=d.index=k+v*f+v*t*e;d.traceCoordinate=[this.data._meshX[t],this.data._meshY[t],this.data._meshZ[t],this.data._value[t]];
v=this.data.hovertext||this.data.text;Array.isArray(v)&&void 0!==v[t]?d.textLabel=v[t]:v&&(d.textLabel=v);return!0}};b.update=function(d){function e(t,v,w,y){return v.map(function(B){return t.d2l(B,0,y)*w})}var f=this.scene,k=f.fullSceneLayout;this.data=q(d);f=g(e(k.xaxis,d._meshX,f.dataScale[0],d.xcalendar),e(k.yaxis,d._meshY,f.dataScale[1],d.ycalendar),e(k.zaxis,d._meshZ,f.dataScale[2],d.zcalendar));k=g(d._meshI,d._meshJ,d._meshK);f={positions:f,cells:k,lightPosition:[d.lightposition.x,d.lightposition.y,
d.lightposition.z],ambient:d.lighting.ambient,diffuse:d.lighting.diffuse,specular:d.lighting.specular,roughness:d.lighting.roughness,fresnel:d.lighting.fresnel,vertexNormalsEpsilon:d.lighting.vertexnormalsepsilon,faceNormalsEpsilon:d.lighting.facenormalsepsilon,opacity:d.opacity,contourEnable:d.contour.show,contourColor:a(d.contour.color).slice(0,3),contourWidth:d.contour.width,useFacetNormals:d.flatshading};k=h(d);f.vertexIntensity=d._meshIntensity;f.vertexIntensityBounds=[k.min,k.max];f.colormap=
l(d);this.mesh.update(f)};b.dispose=function(){this.scene.glplot.remove(this.mesh);this.mesh.dispose()};var p="xyz xzy yxz yzx zxy zyx".split(" ");N.exports={findNearestOnAxis:n,generateIsoMeshes:q,createIsosurfaceTrace:function(d,e){var f=m({gl:d.glplot.gl}),k=new r(d,f,e.uid);f._trace=k;k.update(e);d.glplot.add(f);return k}}},{"../../components/colorscale":655,"../../lib/gl_format_color":774,"../../lib/str2rgbarray":802,"../../plots/gl3d/zip3":881,"gl-mesh3d":309}],1126:[function(b,N,I){function r(h,
g,n,p,d){n=d("isomin");var e=d("isomax");void 0!==e&&null!==e&&void 0!==n&&null!==n&&n>e&&(g.isomin=null,g.isomax=null);n=d("x");e=d("y");var f=d("z"),k=d("value");n&&n.length&&e&&e.length&&f&&f.length&&k&&k.length?(m.getComponentMethod("calendars","handleTraceDefaults")(h,g,["x","y","z"],p),["x","y","z"].forEach(function(t){var v="caps."+t;d(v+".show")&&d(v+".fill");t="slices."+t;d(t+".show")&&(d(t+".fill"),d(t+".locations"))}),d("spaceframe.show")&&d("spaceframe.fill"),d("surface.show")&&(d("surface.count"),
d("surface.fill"),d("surface.pattern")),d("contour.show")&&(d("contour.color"),d("contour.width")),"text hovertext hovertemplate lighting.ambient lighting.diffuse lighting.specular lighting.roughness lighting.fresnel lighting.vertexnormalsepsilon lighting.facenormalsepsilon lightposition.x lightposition.y lightposition.z flatshading opacity".split(" ").forEach(function(t){d(t)}),a(h,g,p,d,{prefix:"",cLetter:"c"}),g._length=null):g.visible=!1}var q=b("../../lib"),m=b("../../registry"),l=b("./attributes"),
a=b("../../components/colorscale/defaults");N.exports={supplyDefaults:function(h,g,n,p){r(h,g,n,p,function(d,e){return q.coerce(h,g,l,d,e)})},supplyIsoDefaults:r}},{"../../components/colorscale/defaults":653,"../../lib":778,"../../registry":911,"./attributes":1123}],1127:[function(b,N,I){N.exports={attributes:b("./attributes"),supplyDefaults:b("./defaults").supplyDefaults,calc:b("./calc"),colorbar:{min:"cmin",max:"cmax"},plot:b("./convert").createIsosurfaceTrace,moduleType:"trace",name:"isosurface",
basePlotModule:b("../../plots/gl3d"),categories:["gl3d","showLegend"],meta:{}}},{"../../plots/gl3d":870,"./attributes":1123,"./calc":1124,"./convert":1125,"./defaults":1126}],1128:[function(b,N,I){I=b("../../components/colorscale/attributes");var r=b("../../plots/template_attributes").hovertemplateAttrs,q=b("../surface/attributes"),m=b("../../plots/attributes");b=b("../../lib/extend").extendFlat;N.exports=b({x:{valType:"data_array",editType:"calc+clearAxisTypes"},y:{valType:"data_array",editType:"calc+clearAxisTypes"},
z:{valType:"data_array",editType:"calc+clearAxisTypes"},i:{valType:"data_array",editType:"calc"},j:{valType:"data_array",editType:"calc"},k:{valType:"data_array",editType:"calc"},text:{valType:"string",dflt:"",arrayOk:!0,editType:"calc"},hovertext:{valType:"string",dflt:"",arrayOk:!0,editType:"calc"},hovertemplate:r({editType:"calc"}),delaunayaxis:{valType:"enumerated",values:["x","y","z"],dflt:"z",editType:"calc"},alphahull:{valType:"number",dflt:-1,editType:"calc"},intensity:{valType:"data_array",
editType:"calc"},intensitymode:{valType:"enumerated",values:["vertex","cell"],dflt:"vertex",editType:"calc"},color:{valType:"color",editType:"calc"},vertexcolor:{valType:"data_array",editType:"calc"},facecolor:{valType:"data_array",editType:"calc"},transforms:void 0},I("",{colorAttr:"`intensity`",showScaleDflt:!0,editTypeOverride:"calc"}),{opacity:q.opacity,flatshading:{valType:"boolean",dflt:!1,editType:"calc"},contour:{show:b({},q.contours.x.show,{}),color:q.contours.x.color,width:q.contours.x.width,
editType:"calc"},lightposition:{x:b({},q.lightposition.x,{dflt:1E5}),y:b({},q.lightposition.y,{dflt:1E5}),z:b({},q.lightposition.z,{dflt:0}),editType:"calc"},lighting:b({vertexnormalsepsilon:{valType:"number",min:0,max:1,dflt:1E-12,editType:"calc"},facenormalsepsilon:{valType:"number",min:0,max:1,dflt:1E-6,editType:"calc"},editType:"calc"},q.lighting),hoverinfo:b({},m.hoverinfo,{editType:"calc"}),showlegend:b({},m.showlegend,{dflt:!1})})},{"../../components/colorscale/attributes":650,"../../lib/extend":768,
"../../plots/attributes":824,"../../plots/template_attributes":906,"../surface/attributes":1311}],1129:[function(b,N,I){var r=b("../../components/colorscale/calc");N.exports=function(q,m){m.intensity&&r(q,m,{vals:m.intensity,containerStr:"",cLetter:"c"})}},{"../../components/colorscale/calc":651}],1130:[function(b,N,I){function r(t,v,w){this.scene=t;this.uid=w;this.mesh=v;this.name="";this.color="#fff";this.data=null;this.showContour=!1}function q(t){for(var v=[],w=t.length,y=0;y<w;y++)v[y]=e(t[y]);
return v}function m(t,v,w,y){for(var B=[],A=v.length,z=0;z<A;z++)B[z]=t.d2l(v[z],0,y)*w;return B}function l(t){for(var v=[],w=t.length,y=0;y<w;y++)v[y]=Math.round(t[y]);return v}function a(t,v){for(var w=t.length,y=0;y<w;y++)if(-.5>=t[y]||t[y]>=v-.5)return!1;return!0}var h=b("gl-mesh3d"),g=b("delaunay-triangulate"),n=b("alpha-shape"),p=b("convex-hull"),d=b("../../lib/gl_format_color").parseColorScale,e=b("../../lib/str2rgbarray"),f=b("../../components/colorscale").extractOpts,k=b("../../plots/gl3d/zip3");
b=r.prototype;b.handlePick=function(t){if(t.object===this.mesh){var v=t.index=t.data.index;t.traceCoordinate=t.data._cellCenter?t.data.dataCoordinate:[this.data.x[v],this.data.y[v],this.data.z[v]];var w=this.data.hovertext||this.data.text;Array.isArray(w)&&void 0!==w[v]?t.textLabel=w[v]:w&&(t.textLabel=w);return!0}};b.update=function(t){var v=this.scene,w=v.fullSceneLayout;this.data=t;var y=t.x.length;v=k(m(w.xaxis,t.x,v.dataScale[0],t.xcalendar),m(w.yaxis,t.y,v.dataScale[1],t.ycalendar),m(w.zaxis,
t.z,v.dataScale[2],t.zcalendar));if(t.i&&t.j&&t.k){if(t.i.length!==t.j.length||t.j.length!==t.k.length||!a(t.i,y)||!a(t.j,y)||!a(t.k,y))return;y=k(l(t.i),l(t.j),l(t.k))}else if(0===t.alphahull)y=p(v);else if(0<t.alphahull)y=n(t.alphahull,v);else{y=["x","y","z"].indexOf(t.delaunayaxis);w=[];for(var B=v.length,A=0;A<B;A++)w[A]=[v[A][(y+1)%3],v[A][(y+2)%3]];y=g(w)}v={positions:v,cells:y,lightPosition:[t.lightposition.x,t.lightposition.y,t.lightposition.z],ambient:t.lighting.ambient,diffuse:t.lighting.diffuse,
specular:t.lighting.specular,roughness:t.lighting.roughness,fresnel:t.lighting.fresnel,vertexNormalsEpsilon:t.lighting.vertexnormalsepsilon,faceNormalsEpsilon:t.lighting.facenormalsepsilon,opacity:t.opacity,contourEnable:t.contour.show,contourColor:e(t.contour.color).slice(0,3),contourWidth:t.contour.width,useFacetNormals:t.flatshading};t.intensity?(y=f(t),this.color="#fff",w=t.intensitymode,v[w+"Intensity"]=t.intensity,v[w+"IntensityBounds"]=[y.min,y.max],v.colormap=d(t)):t.vertexcolor?(this.color=
t.vertexcolor[0],v.vertexColors=q(t.vertexcolor)):t.facecolor?(this.color=t.facecolor[0],v.cellColors=q(t.facecolor)):(this.color=t.color,v.meshColor=e(t.color));this.mesh.update(v)};b.dispose=function(){this.scene.glplot.remove(this.mesh);this.mesh.dispose()};N.exports=function(t,v){var w=h({gl:t.glplot.gl}),y=new r(t,w,v.uid);w._trace=y;y.update(v);t.glplot.add(w);return y}},{"../../components/colorscale":655,"../../lib/gl_format_color":774,"../../lib/str2rgbarray":802,"../../plots/gl3d/zip3":881,
"alpha-shape":69,"convex-hull":135,"delaunay-triangulate":171,"gl-mesh3d":309}],1131:[function(b,N,I){var r=b("../../registry"),q=b("../../lib"),m=b("../../components/colorscale/defaults"),l=b("./attributes");N.exports=function(a,h,g,n){function p(e,f){return q.coerce(a,h,l,e,f)}function d(e){var f=e.map(function(k){return(k=p(k))&&q.isArrayOrTypedArray(k)?k:null});return f.every(function(k){return k&&k.length===f[0].length})&&f}d(["x","y","z"])?(d(["i","j","k"]),(!h.i||h.j&&h.k)&&(!h.j||h.k&&h.i)&&
(!h.k||h.i&&h.j)?(r.getComponentMethod("calendars","handleTraceDefaults")(a,h,["x","y","z"],n),"lighting.ambient lighting.diffuse lighting.specular lighting.roughness lighting.fresnel lighting.vertexnormalsepsilon lighting.facenormalsepsilon lightposition.x lightposition.y lightposition.z flatshading alphahull delaunayaxis opacity".split(" ").forEach(function(e){p(e)}),p("contour.show")&&(p("contour.color"),p("contour.width")),"intensity"in a?(p("intensity"),p("intensitymode"),m(a,h,n,p,{prefix:"",
cLetter:"c"})):(h.showscale=!1,"facecolor"in a?p("facecolor"):"vertexcolor"in a?p("vertexcolor"):p("color",g)),p("text"),p("hovertext"),p("hovertemplate"),h._length=null):h.visible=!1):h.visible=!1}},{"../../components/colorscale/defaults":653,"../../lib":778,"../../registry":911,"./attributes":1128}],1132:[function(b,N,I){N.exports={attributes:b("./attributes"),supplyDefaults:b("./defaults"),calc:b("./calc"),colorbar:{min:"cmin",max:"cmax"},plot:b("./convert"),moduleType:"trace",name:"mesh3d",basePlotModule:b("../../plots/gl3d"),
categories:["gl3d","showLegend"],meta:{}}},{"../../plots/gl3d":870,"./attributes":1128,"./calc":1129,"./convert":1130,"./defaults":1131}],1133:[function(b,N,I){function r(g){return{line:{color:q({},h.color,{dflt:g}),width:h.width,dash:m,editType:"style"},editType:"style"}}var q=b("../../lib").extendFlat;I=b("../scatter/attributes");var m=b("../../components/drawing/attributes").dash,l=b("../../components/fx/attributes"),a=b("../../constants/delta.js");b=a.INCREASING.COLOR;a=a.DECREASING.COLOR;var h=
I.line;N.exports={xperiod:I.xperiod,xperiod0:I.xperiod0,xperiodalignment:I.xperiodalignment,x:{valType:"data_array",editType:"calc+clearAxisTypes"},open:{valType:"data_array",editType:"calc"},high:{valType:"data_array",editType:"calc"},low:{valType:"data_array",editType:"calc"},close:{valType:"data_array",editType:"calc"},line:{width:q({},h.width,{}),dash:q({},m,{}),editType:"style"},increasing:r(b),decreasing:r(a),text:{valType:"string",dflt:"",arrayOk:!0,editType:"calc"},hovertext:{valType:"string",
dflt:"",arrayOk:!0,editType:"calc"},tickwidth:{valType:"number",min:0,max:.5,dflt:.3,editType:"calc"},hoverlabel:q({},l.hoverlabel,{split:{valType:"boolean",dflt:!1,editType:"style"}})}},{"../../components/drawing/attributes":664,"../../components/fx/attributes":674,"../../constants/delta.js":747,"../../lib":778,"../scatter/attributes":1187}],1134:[function(b,N,I){function r(n,p,d,e){return{o:n,h:p,l:d,c:e}}function q(n,p,d,e,f,k){for(var t=f.makeCalcdata(p,"open"),v=f.makeCalcdata(p,"high"),w=f.makeCalcdata(p,
"low"),y=f.makeCalcdata(p,"close"),B=Array.isArray(p.text),A=Array.isArray(p.hovertext),z=!0,E=null,C=!!p.xperiodalignment,u=[],D=0;D<e.length;D++){var G=e[D],J=t[D],L=v[D],K=w[D],H=y[D];if(G!==g&&J!==g&&L!==g&&K!==g&&H!==g){H===J?null!==E&&H!==E&&(z=H>E):z=H>J;E=H;var Q=k(J,L,K,H);Q.pos=G;Q.yc=(J+H)/2;Q.i=D;Q.dir=z?"increasing":"decreasing";Q.x=Q.pos;Q.y=[K,L];C&&(Q.orig_p=d[D]);B&&(Q.tx=p.text[D]);A&&(Q.htx=p.hovertext[D]);u.push(Q)}else u.push({pos:G,empty:!0})}p._extremes[f._id]=a.findExtremes(f,
m.concat(w,v),{padded:!0});u.length&&(u[0].t={labels:{open:l(n,"open:")+" ",high:l(n,"high:")+" ",low:l(n,"low:")+" ",close:l(n,"close:")+" "}});return u}var m=b("../../lib"),l=m._,a=b("../../plots/cartesian/axes"),h=b("../../plots/cartesian/align_period"),g=b("../../constants/numerical").BADNUM;N.exports={calc:function(n,p){var d=a.getFromId(n,p.xaxis),e=a.getFromId(n,p.yaxis);var f=p._minDiff;if(!f){var k=n._fullData,t=[];f=Infinity;var v;for(v=0;v<k.length;v++){var w=k[v];if("ohlc"===w.type&&!0===
w.visible&&w.xaxis===d._id){t.push(w);var y=d.makeCalcdata(w,"x");w._origX=y;y=h(p,d,"x",y);w._xcalc=y;(w=m.distinctVals(y).minDiff)&&isFinite(w)&&(f=Math.min(f,w))}}Infinity===f&&(f=1);for(v=0;v<t.length;v++)t[v]._minDiff=f}f*=p.tickwidth;k=p._minDiff;p._minDiff=null;v=p._origX;p._origX=null;t=p._xcalc;p._xcalc=null;n=q(n,p,v,t,e,r);p._extremes[d._id]=a.findExtremes(d,t,{vpad:k/2});return n.length?(m.extendFlat(n[0].t,{wHover:k/2,tickLen:f}),n):[{t:{empty:!0}}]},calcCommon:q}},{"../../constants/numerical":753,
"../../lib":778,"../../plots/cartesian/align_period":825,"../../plots/cartesian/axes":828}],1135:[function(b,N,I){function r(h,g,n,p){n(p+".line.color");n(p+".line.width",g.line.width);n(p+".line.dash",g.line.dash)}var q=b("../../lib"),m=b("./ohlc_defaults"),l=b("../scatter/period_defaults"),a=b("./attributes");N.exports=function(h,g,n,p){function d(e,f){return q.coerce(h,g,a,e,f)}m(h,g,d,p)?(l(h,g,p,d,{x:!0}),d("line.width"),d("line.dash"),r(h,g,d,"increasing"),r(h,g,d,"decreasing"),d("text"),d("hovertext"),
d("tickwidth"),p._requestRangeslider[g.xaxis]=!0):g.visible=!1}},{"../../lib":778,"../scatter/period_defaults":1207,"./attributes":1133,"./ohlc_defaults":1138}],1136:[function(b,N,I){function r(d,e,f,k){function t(L){L=L.pos+D-e;return h.inbox(L-G,L+G,J)}function v(L){var K=L[C];L=L[u];return K===L||h.inbox(K-f,L-f,J)}function w(L){return(t(L)+v(L))/2}var y=d.cd,B=d.xa,A=y[0].trace,z=y[0].t,E=A.type,C="ohlc"===E?"l":"min",u="ohlc"===E?"h":"max",D=z.bPos||0;E=z.bdPos||z.tickLen;var G=z.wHover;z=Math.min(1,
E/Math.abs(B.r2c(B.range[1])-B.r2c(B.range[0])));var J=d.maxHoverDistance-z;z=d.maxSpikeDistance-z;k=h.getDistanceFunction(k,t,v,w);h.getClosest(y,k,d);if(!1===d.index)return null;y=y[d.index];if(y.empty)return null;A=A[y.dir];k=A.line.color;g.opacity(k)&&A.line.width?d.color=k:d.color=A.fillcolor;d.x0=B.c2p(y.pos+D-E,!0);d.x1=B.c2p(y.pos+D+E,!0);d.xLabelVal=void 0!==y.orig_p?y.orig_p:y.pos;d.spikeDistance=w(y)*z/J;d.xSpike=B.c2p(y.pos,!0);return d}function q(d,e,f,k){var t=d.cd,v=d.ya,w=t[0].trace,
y=t[0].t,B=[];d=r(d,e,f,k);if(!d)return[];t=t[d.index].hi||w.hoverinfo;e=t.split("+");if("all"!==t&&-1===e.indexOf("y"))return[];t=["high","open","close","low"];e={};for(f=0;f<t.length;f++){k=t[f];var A=w[k][d.index],z=v.c2p(A,!0);if(A in e){var E=e[A];E.yLabel+="\x3cbr\x3e"+y.labels[k]+l.hoverLabelText(v,A)}else E=a.extendFlat({},d),E.y0=E.y1=z,E.yLabelVal=A,E.yLabel=y.labels[k]+l.hoverLabelText(v,A),E.name="",B.push(E),e[A]=E}return B}function m(d,e,f,k){function t(E){return B.labels[E]+l.hoverLabelText(w,
y[E][A])}var v=d.cd,w=d.ya,y=v[0].trace,B=v[0].t;d=r(d,e,f,k);if(!d)return[];v=v[d.index];var A=d.index=v.i;e=v.dir;k=v.hi||y.hoverinfo;f=k.split("+");var z="all"===k;k=z||-1!==f.indexOf("y");f=z||-1!==f.indexOf("text");e=k?[t("open"),t("high"),t("low"),t("close")+"  "+p[e]]:[];f&&n(v,y,e);d.extraText=e.join("\x3cbr\x3e");d.y0=d.y1=w.c2p(v.yc,!0);return[d]}var l=b("../../plots/cartesian/axes"),a=b("../../lib"),h=b("../../components/fx"),g=b("../../components/color"),n=b("../../lib").fillText;b=b("../../constants/delta.js");
var p={increasing:b.INCREASING.SYMBOL,decreasing:b.DECREASING.SYMBOL};N.exports={hoverPoints:function(d,e,f,k){return d.cd[0].trace.hoverlabel.split?q(d,e,f,k):m(d,e,f,k)},hoverSplit:q,hoverOnPoints:m}},{"../../components/color":643,"../../components/fx":683,"../../constants/delta.js":747,"../../lib":778,"../../plots/cartesian/axes":828}],1137:[function(b,N,I){N.exports={moduleType:"trace",name:"ohlc",basePlotModule:b("../../plots/cartesian"),categories:["cartesian","svg","showLegend"],meta:{},attributes:b("./attributes"),
supplyDefaults:b("./defaults"),calc:b("./calc").calc,plot:b("./plot"),style:b("./style"),hoverPoints:b("./hover").hoverPoints,selectPoints:b("./select")}},{"../../plots/cartesian":841,"./attributes":1133,"./calc":1134,"./defaults":1135,"./hover":1136,"./plot":1139,"./select":1140,"./style":1141}],1138:[function(b,N,I){var r=b("../../registry"),q=b("../../lib");N.exports=function(m,l,a,h){var g=a("x"),n=a("open"),p=a("high"),d=a("low"),e=a("close");a("hoverlabel.split");r.getComponentMethod("calendars",
"handleTraceDefaults")(m,l,["x"],h);if(n&&p&&d&&e)return m=Math.min(n.length,p.length,d.length,e.length),g&&(m=Math.min(m,q.minRowLength(g))),l._length=m}},{"../../lib":778,"../../registry":911}],1139:[function(b,N,I){var r=b("d3"),q=b("../../lib");N.exports=function(m,l,a,h){var g=l.yaxis,n=l.xaxis,p=!!n.rangebreaks;q.makeTraceGroups(h,a,"trace ohlc").each(function(d){var e=r.select(this);d=d[0];var f=d.t;if(!0!==d.trace.visible||f.empty)e.remove();else{var k=f.tickLen;e=e.selectAll("path").data(q.identity);
e.enter().append("path");e.exit().remove();e.attr("d",function(t){if(t.empty)return"M0,0Z";var v=n.c2p(t.pos-k,!0),w=n.c2p(t.pos+k,!0),y=p?(v+w)/2:n.c2p(t.pos,!0),B=g.c2p(t.o,!0),A=g.c2p(t.h,!0),z=g.c2p(t.l,!0);t=g.c2p(t.c,!0);return"M"+v+","+B+"H"+y+"M"+y+","+A+"V"+z+"M"+w+","+t+"H"+y})}})}},{"../../lib":778,d3:169}],1140:[function(b,N,I){N.exports=function(r,q){var m=r.cd,l=r.xaxis,a=r.yaxis,h=[],g,n=m[0].t.bPos||0;if(!1===q)for(g=0;g<m.length;g++)m[g].selected=0;else for(g=0;g<m.length;g++){var p=
m[g];q.contains([l.c2p(p.pos+n),a.c2p(p.yc)],null,p.i,r)?(h.push({pointNumber:p.i,x:l.c2d(p.pos),y:a.c2d(p.yc)}),p.selected=1):p.selected=0}return h}},{}],1141:[function(b,N,I){var r=b("d3"),q=b("../../components/drawing"),m=b("../../components/color");N.exports=function(l,a,h){l=h?h:r.select(l).selectAll("g.ohlclayer").selectAll("g.trace");l.style("opacity",function(g){return g[0].trace.opacity});l.each(function(g){var n=g[0].trace;r.select(this).selectAll("path").each(function(p){if(!p.empty){var d=
n[p.dir].line;r.select(this).style("fill","none").call(m.stroke,d.color).call(q.dashLine,d.dash,d.width).style("opacity",n.selectedpoints&&!p.selected?.3:1)}})})}},{"../../components/color":643,"../../components/drawing":665,d3:169}],1142:[function(b,N,I){I=b("../../lib/extend").extendFlat;var r=b("../../plots/attributes"),q=b("../../plots/font_attributes"),m=b("../../components/colorscale/attributes"),l=b("../../plots/template_attributes").hovertemplateAttrs;b=b("../../plots/domain").attributes;
m=I({editType:"calc"},m("line",{editTypeOverride:"calc"}),{shape:{valType:"enumerated",values:["linear","hspline"],dflt:"linear",editType:"plot"},hovertemplate:l({editType:"plot",arrayOk:!1},{keys:["count","probability"]})});N.exports={domain:b({name:"parcats",trace:!0,editType:"calc"}),hoverinfo:I({},r.hoverinfo,{flags:["count","probability"],editType:"plot",arrayOk:!1}),hoveron:{valType:"enumerated",values:["category","color","dimension"],dflt:"category",editType:"plot"},hovertemplate:l({editType:"plot",
arrayOk:!1},{keys:"count probability category categorycount colorcount bandcolorcount".split(" ")}),arrangement:{valType:"enumerated",values:["perpendicular","freeform","fixed"],dflt:"perpendicular",editType:"plot"},bundlecolors:{valType:"boolean",dflt:!0,editType:"plot"},sortpaths:{valType:"enumerated",values:["forward","backward"],dflt:"forward",editType:"plot"},labelfont:q({editType:"calc"}),tickfont:q({editType:"calc"}),dimensions:{_isLinkedToArray:"dimension",label:{valType:"string",editType:"calc"},
categoryorder:{valType:"enumerated",values:["trace","category ascending","category descending","array"],dflt:"trace",editType:"calc"},categoryarray:{valType:"data_array",editType:"calc"},ticktext:{valType:"data_array",editType:"calc"},values:{valType:"data_array",dflt:[],editType:"calc"},displayindex:{valType:"integer",editType:"calc"},editType:"calc",visible:{valType:"boolean",dflt:!0,editType:"calc"}},line:m,counts:{valType:"number",min:0,dflt:1,arrayOk:!0,editType:"calc"},customdata:void 0,hoverlabel:void 0,
ids:void 0,legendgroup:void 0,opacity:void 0,selectedpoints:void 0,showlegend:void 0}},{"../../components/colorscale/attributes":650,"../../lib/extend":768,"../../plots/attributes":824,"../../plots/domain":855,"../../plots/font_attributes":856,"../../plots/template_attributes":906}],1143:[function(b,N,I){var r=b("../../plots/get_data").getModuleCalcData,q=b("./plot");I.name="parcats";I.plot=function(m,l,a,h){l=r(m.calcdata,"parcats");l.length&&q(m,l[0],a,h)};I.clean=function(m,l,a,h){m=h._has&&h._has("parcats");
l=l._has&&l._has("parcats");m&&!l&&h._paperdiv.selectAll(".parcats").remove()}},{"../../plots/get_data":865,"./plot":1148}],1144:[function(b,N,I){function r(t,v,w){var y=t.map(function(B){return B.categories.length}).reduce(function(B,A){return Math.max(B,A)});return{dimensions:t,paths:v,trace:void 0,maxCats:y,count:w}}function q(t,v,w){t.valueInds.push(v);t.count+=w}function m(t,v,w){t.valueInds.push(v);t.count+=w}function l(t,v){v=void 0===v||null===v?[]:v.map(function(C){return C});var w={},y=
{},B=[];v.forEach(function(C,u){w[C]=0;y[C]=u});for(var A=0;A<t.length;A++){var z=t[A];if(void 0===w[z]){w[z]=1;var E=v.push(z)-1;y[z]=E}else w[z]++,E=y[z];B.push(E)}t=v.map(function(C){return w[C]});return{uniqueValues:v,uniqueCounts:t,inds:B}}function a(t){var v=t.map(function(w){return w.displayindex});if(h(v))for(v=0;v<t.length;v++)t[v]._displayindex=t[v].displayindex;else for(v=0;v<t.length;v++)t[v]._displayindex=v}function h(t){for(var v=Array(t.length),w=0;w<t.length;w++){if(0>t[w]||t[w]>=
t.length||void 0!==v[t[w]])return!1;v[t[w]]=!0}return!0}var g=b("../../lib/gup").wrap,n=b("../../components/colorscale/helpers").hasColorscale,p=b("../../components/colorscale/calc"),d=b("../../lib/filter_unique.js"),e=b("../../components/drawing"),f=b("../../lib"),k=b("fast-isnumeric");N.exports=function(t,v){function w(Q){if(f.isArrayOrTypedArray(z.color))var M=Q=z.color[Q%z.color.length];else Q=z.color;return{color:E(Q),rawColor:M}}var y=f.filterVisible(v.dimensions);if(0===y.length)return[];var B=
y.map(function(Q){if("trace"===Q.categoryorder)var M=null;else if("array"===Q.categoryorder)M=Q.categoryarray;else{M=d(Q.values);for(var P=!0,T=0;T<M.length;T++)if(!k(M[T])){P=!1;break}M.sort(P?f.sorterAsc:void 0);"category descending"===Q.categoryorder&&(M=M.reverse())}return l(Q.values,M)});var A=f.isArrayOrTypedArray(v.counts)?v.counts:[v.counts];a(y);y.forEach(function(Q,M){M=B[M];Q._categoryarray=M.uniqueValues;Q._ticktext=null===Q.ticktext||void 0===Q.ticktext?[]:Q.ticktext.slice();for(var P=
Q._ticktext.length;P<M.uniqueValues.length;P++)Q._ticktext.push(M.uniqueValues[P])});var z=v.line;if(z){n(v,"line")&&p(t,v,{vals:v.line.color,containerStr:"line",cLetter:"c"});var E=e.tryColorscale(z)}else E=f.identity;var C=y[0].values.length,u={},D=B.map(function(Q){return Q.inds});var G=0;var J,L;for(J=0;J<C;J++){var K=[];for(L=0;L<D.length;L++)K.push(D[L][J]);t=A[J%A.length];G+=t;L=w(J);var H=K+"-"+L.rawColor;void 0===u[H]&&(u[H]={categoryInds:K,color:L.color,rawColor:L.rawColor,valueInds:[],
count:0});m(u[H],J,t)}y=y.map(function(Q,M){return{dimensionInd:M,containerInd:Q._index,displayInd:Q._displayindex,dimensionLabel:Q.label,count:G,categories:[],dragX:null}});for(J=0;J<C;J++)for(t=A[J%A.length],L=0;L<y.length;L++)D=y[L].containerInd,K=B[L].inds[J],H=y[L].categories,void 0===H[K]&&(H[K]={dimensionInd:L,categoryInd:K,categoryValue:v.dimensions[D]._categoryarray[K],displayInd:K,categoryLabel:v.dimensions[D]._ticktext[K],valueInds:[],count:0,dragY:null}),q(H[K],J,t);return g(r(y,u,G))}},
{"../../components/colorscale/calc":651,"../../components/colorscale/helpers":654,"../../components/drawing":665,"../../lib":778,"../../lib/filter_unique.js":769,"../../lib/gup":775,"fast-isnumeric":241}],1145:[function(b,N,I){function r(d,e,f,k,t){t("line.shape");t("line.hovertemplate");var v=t("line.color",k.colorway[0]);if(l(d,"line")&&m.isArrayOrTypedArray(v)){if(v.length)return t("line.colorscale"),a(d,e,k,t,{prefix:"line.",cLetter:"c"}),v.length;e.line.color=f}return Infinity}function q(d,e){function f(w,
y){return m.coerce(d,e,n.dimensions,w,y)}var k=f("values"),t=f("visible");k&&k.length||(t=e.visible=!1);if(t){f("label");f("displayindex",e._index);k=d.categoryarray;k=Array.isArray(k)&&0<k.length;var v;k&&(v="array");v=f("categoryorder",v);"array"===v?(f("categoryarray"),f("ticktext")):(delete d.categoryarray,delete d.ticktext);k||"array"!==v||(e.categoryorder="trace")}}var m=b("../../lib"),l=b("../../components/colorscale/helpers").hasColorscale,a=b("../../components/colorscale/defaults"),h=b("../../plots/domain").defaults,
g=b("../../plots/array_container_defaults"),n=b("./attributes"),p=b("../parcoords/merge_length");N.exports=function(d,e,f,k){function t(w,y){return m.coerce(d,e,n,w,y)}var v=g(d,e,{name:"dimensions",handleItemDefaults:q});f=r(d,e,f,k,t);h(e,k,t);Array.isArray(v)&&v.length||(e.visible=!1);p(e,v,"values",f);t("hoveron");t("hovertemplate");t("arrangement");t("bundlecolors");t("sortpaths");t("counts");m.coerceFont(t,"labelfont",{family:k.font.family,size:Math.round(k.font.size),color:k.font.color});m.coerceFont(t,
"tickfont",{family:k.font.family,size:Math.round(k.font.size/1.2),color:k.font.color})}},{"../../components/colorscale/defaults":653,"../../components/colorscale/helpers":654,"../../lib":778,"../../plots/array_container_defaults":823,"../../plots/domain":855,"../parcoords/merge_length":1158,"./attributes":1142}],1146:[function(b,N,I){N.exports={attributes:b("./attributes"),supplyDefaults:b("./defaults"),calc:b("./calc"),plot:b("./plot"),colorbar:{container:"line",min:"cmin",max:"cmax"},moduleType:"trace",
name:"parcats",basePlotModule:b("./base_plot"),categories:["noOpacity"],meta:{}}},{"./attributes":1142,"./base_plot":1143,"./calc":1144,"./defaults":1145,"./plot":1148}],1147:[function(b,N,I){function r(da,oa,sa,ma){da=da.map(Q.bind(0,oa,sa));ma=ma.selectAll("g.parcatslayer").data([null]);ma.enter().append("g").attr("class","parcatslayer").style("pointer-events","all");ma=ma.selectAll("g.trace.parcats").data(da,q);da=ma.enter().append("g").attr("class","trace parcats");ma.attr("transform",function(ka){return ca(ka.x,
ka.y)});da.append("g").attr("class","paths");sa=ma.select("g.paths").selectAll("path.path").data(function(ka){return ka.paths},q);sa.attr("fill",function(ka){return ka.model.color});var qa=sa.enter().append("path").attr("class","path").attr("stroke-opacity",0).attr("fill",function(ka){return ka.model.color}).attr("fill-opacity",0);d(qa);sa.attr("d",function(ka){return ka.svgD});qa.empty()||sa.sort(l);sa.exit().remove();sa.on("mouseover",a).on("mouseout",h).on("click",p);da.append("g").attr("class",
"dimensions");da=ma.select("g.dimensions").selectAll("g.dimension").data(function(ka){return ka.dimensions},q);da.enter().append("g").attr("class","dimension");da.attr("transform",function(ka){return ca(ka.x,0)});da.exit().remove();sa=da.selectAll("g.category").data(function(ka){return ka.categories},q);qa=sa.enter().append("g").attr("class","category");sa.attr("transform",function(ka){return ca(0,ka.y)});qa.append("rect").attr("class","catrect").attr("pointer-events","none");sa.select("rect.catrect").attr("fill",
"none").attr("width",function(ka){return ka.width}).attr("height",function(ka){return ka.height});f(qa);var pa=sa.selectAll("rect.bandrect").data(function(ka){return ka.bands},q);pa.each(function(){ba.raiseToTop(this)});pa.attr("fill",function(ka){return ka.color});var na=pa.enter().append("rect").attr("class","bandrect").attr("stroke-opacity",0).attr("fill",function(ka){return ka.color}).attr("fill-opacity",0);pa.attr("fill",function(ka){return ka.color}).attr("width",function(ka){return ka.width}).attr("height",
function(ka){return ka.height}).attr("y",function(ka){return ka.y}).attr("cursor",function(ka){return"fixed"===ka.parcatsViewModel.arrangement?"default":"perpendicular"===ka.parcatsViewModel.arrangement?"ns-resize":"move"});k(na);pa.exit().remove();qa.append("text").attr("class","catlabel").attr("pointer-events","none");pa=oa._fullLayout.paper_bgcolor;sa.select("text.catlabel").attr("text-anchor",function(ka){return m(ka)?"start":"end"}).attr("alignment-baseline","middle").style("text-shadow",pa+
" -1px  1px 2px, "+pa+" 1px  1px 2px, "+pa+"  1px -1px 2px, "+pa+" -1px -1px 2px").style("fill","rgb(0, 0, 0)").attr("x",function(ka){return m(ka)?ka.width+5:-5}).attr("y",function(ka){return ka.height/2}).text(function(ka){return ka.model.categoryLabel}).each(function(ka){ia.font(U.select(this),ka.parcatsViewModel.categorylabelfont);la.convertToTspans(U.select(this),oa)});qa.append("text").attr("class","dimlabel");sa.select("text.dimlabel").attr("text-anchor","middle").attr("alignment-baseline",
"baseline").attr("cursor",function(ka){return"fixed"===ka.parcatsViewModel.arrangement?"default":"ew-resize"}).attr("x",function(ka){return ka.width/2}).attr("y",-5).text(function(ka,ua){return 0===ua?ka.parcatsViewModel.model.dimensions[ka.model.dimensionInd].dimensionLabel:null}).each(function(ka){ia.font(U.select(this),ka.parcatsViewModel.labelfont)});sa.selectAll("rect.bandrect").on("mouseover",C).on("mouseout",u);sa.exit().remove();da.call(U.behavior.drag().origin(function(ka){return{x:ka.x,
y:0}}).on("dragstart",D).on("drag",G).on("dragend",J));ma.each(function(ka){ka.traceSelection=U.select(this);ka.pathSelection=U.select(this).selectAll("g.paths").selectAll("path.path");ka.dimensionSelection=U.select(this).selectAll("g.dimensions").selectAll("g.dimension")});ma.exit().remove()}function q(da){return da.key}function m(da){return da.model.dimensionInd===da.parcatsViewModel.dimensions[da.parcatsViewModel.dimensions.length-1].model.dimensionInd}function l(da,oa){return da.model.rawColor>
oa.model.rawColor?1:da.model.rawColor<oa.model.rawColor?-1:0}function a(da){if(!da.parcatsViewModel.dragDimension&&-1===da.parcatsViewModel.hoverinfoItems.indexOf("skip")){ba.raiseToTop(this);e(U.select(this));var oa=g(da),sa=n(da);da.parcatsViewModel.graphDiv.emit("plotly_hover",{points:oa,event:U.event,constraints:sa});if(-1===da.parcatsViewModel.hoverinfoItems.indexOf("none")){var ma=U.mouse(this)[0];oa=da.parcatsViewModel.graphDiv;sa=da.parcatsViewModel.trace;var qa=oa._fullLayout,pa=qa._paperdiv.node().getBoundingClientRect(),
na=da.parcatsViewModel.graphDiv.getBoundingClientRect(),ka;for(ka=0;ka<da.leftXs.length-1;ka++)if(da.leftXs[ka]+da.dimWidths[ka]-2<=ma&&ma<=da.leftXs[ka+1]+2){var ua=da.parcatsViewModel.dimensions[ka];ua=(ua.x+ua.width+da.parcatsViewModel.dimensions[ka+1].x)/2;var va=(da.topYs[ka]+da.topYs[ka+1]+da.height)/2;break}ua=da.parcatsViewModel.x+ua;va=da.parcatsViewModel.y+va;ka=ja.mostReadable(da.model.color,["black","white"]);ma=da.model.count;var Ca=ma/da.parcatsViewModel.model.count,Ma={countLabel:ma,
probabilityLabel:Ca.toFixed(3)},Ua=[];-1!==da.parcatsViewModel.hoverinfoItems.indexOf("count")&&Ua.push(["Count:",Ma.countLabel].join(" "));-1!==da.parcatsViewModel.hoverinfoItems.indexOf("probability")&&Ua.push(["P:",Ma.probabilityLabel].join(" "));Ua=Ua.join("\x3cbr\x3e");var eb=U.mouse(oa)[0];X.loneHover({trace:sa,x:ua-pa.left+na.left,y:va-pa.top+na.top,text:Ua,color:da.model.color,borderColor:"black",fontFamily:'Monaco, "Courier New", monospace',fontSize:10,fontColor:ka,idealAlign:eb<ua?"right":
"left",hovertemplate:(sa.line||{}).hovertemplate,hovertemplateLabels:Ma,eventData:[{data:sa._input,fullData:sa,count:ma,probability:Ca}]},{container:qa._hoverlayer.node(),outerContainer:qa._paper.node(),gd:oa})}}}function h(da){if(!da.parcatsViewModel.dragDimension&&(d(U.select(this)),X.loneUnhover(da.parcatsViewModel.graphDiv._fullLayout._hoverlayer.node()),da.parcatsViewModel.pathSelection.sort(l),-1===da.parcatsViewModel.hoverinfoItems.indexOf("skip"))){var oa=g(da),sa=n(da);da.parcatsViewModel.graphDiv.emit("plotly_unhover",
{points:oa,event:U.event,constraints:sa})}}function g(da){for(var oa=[],sa=L(da.parcatsViewModel),ma=0;ma<da.model.valueInds.length;ma++)oa.push({curveNumber:sa,pointNumber:da.model.valueInds[ma]});return oa}function n(da){for(var oa={},sa=da.parcatsViewModel.model.dimensions,ma=0;ma<sa.length;ma++){var qa=sa[ma];oa[qa.containerInd]=qa.categories[da.model.categoryInds[ma]].categoryValue}void 0!==da.model.rawColor&&(oa.color=da.model.rawColor);return oa}function p(da){if(-1===da.parcatsViewModel.hoverinfoItems.indexOf("skip")){var oa=
g(da),sa=n(da);da.parcatsViewModel.graphDiv.emit("plotly_click",{points:oa,event:U.event,constraints:sa})}}function d(da){da.attr("fill",function(oa){return oa.model.color}).attr("fill-opacity",.6).attr("stroke","lightgray").attr("stroke-width",.2).attr("stroke-opacity",1)}function e(da){da.attr("fill-opacity",.8).attr("stroke",function(oa){return ja.mostReadable(oa.model.color,["black","white"])}).attr("stroke-width",.3)}function f(da){da.select("rect.catrect").attr("stroke","black").attr("stroke-width",
1).attr("stroke-opacity",1)}function k(da){da.attr("stroke","black").attr("stroke-width",.2).attr("stroke-opacity",1).attr("fill-opacity",1)}function t(da){var oa=da.categoryViewModel.model.dimensionInd,sa=da.categoryViewModel.model.categoryInd;return da.parcatsViewModel.pathSelection.filter(function(ma){return ma.model.categoryInds[oa]===sa&&ma.model.color===da.color})}function v(da){U.select(da.parentNode).selectAll("rect.bandrect").each(function(oa){oa=t(oa);e(oa);oa.each(function(){ba.raiseToTop(this)})});
U.select(da.parentNode).select("rect.catrect").attr("stroke","black").attr("stroke-width",2.5)}function w(da){var oa=U.select(da).datum(),sa=t(oa);e(sa);sa.each(function(){ba.raiseToTop(this)});U.select(da.parentNode).selectAll("rect.bandrect").filter(function(ma){return ma.color===oa.color}).each(function(){ba.raiseToTop(this);U.select(this).attr("stroke","black").attr("stroke-width",1.5)})}function y(da,oa,sa){var ma=U.select(da).datum(),qa=ma.categoryViewModel.model;ma=ma.parcatsViewModel.graphDiv;
var pa=[];U.select(da.parentNode).selectAll("rect.bandrect").each(function(na){t(na).each(function(ka){Array.prototype.push.apply(pa,g(ka))})});da={};da[qa.dimensionInd]=qa.categoryValue;ma.emit(oa,{points:pa,event:sa,constraints:da})}function B(da,oa,sa){da=U.select(da).datum();var ma=da.categoryViewModel.model,qa=da.parcatsViewModel.graphDiv,pa=[];t(da).each(function(ka){Array.prototype.push.apply(pa,g(ka))});var na={};na[ma.dimensionInd]=ma.categoryValue;void 0!==da.rawColor&&(na.color=da.rawColor);
qa.emit(oa,{points:pa,event:sa,constraints:na})}function A(da,oa,sa){da._fullLayout._calcInverseTransform(da);var ma=da._fullLayout._invScaleX;da=da._fullLayout._invScaleY;sa=U.select(sa.parentNode).select("rect.catrect");var qa=sa.node().getBoundingClientRect(),pa=sa.datum(),na=pa.parcatsViewModel,ka=na.model.dimensions[pa.model.dimensionInd];sa=na.trace;var ua=qa.top+qa.height/2;1<na.dimensions.length&&ka.displayInd===na.dimensions.length-1?(qa=qa.left,na="left"):(qa=qa.left+qa.width,na="right");
ka=pa.model.count;var va=pa.model.categoryLabel,Ca=ka/pa.parcatsViewModel.model.count,Ma={countLabel:ka,categoryLabel:va,probabilityLabel:Ca.toFixed(3)},Ua=[];-1!==pa.parcatsViewModel.hoverinfoItems.indexOf("count")&&Ua.push(["Count:",Ma.countLabel].join(" "));-1!==pa.parcatsViewModel.hoverinfoItems.indexOf("probability")&&Ua.push(["P("+Ma.categoryLabel+"):",Ma.probabilityLabel].join(" "));pa=Ua.join("\x3cbr\x3e");return{trace:sa,x:ma*(qa-oa.left),y:da*(ua-oa.top),text:pa,color:"lightgray",borderColor:"black",
fontFamily:'Monaco, "Courier New", monospace',fontSize:12,fontColor:"black",idealAlign:na,hovertemplate:sa.hovertemplate,hovertemplateLabels:Ma,eventData:[{data:sa._input,fullData:sa,count:ka,category:va,probability:Ca}]}}function z(da,oa,sa){var ma=[];U.select(sa.parentNode.parentNode).selectAll("g.category").select("rect.catrect").each(function(){ma.push(A(da,oa,this))});return ma}function E(da,oa,sa){da._fullLayout._calcInverseTransform(da);var ma=da._fullLayout._invScaleX;da=da._fullLayout._invScaleY;
var qa=sa.getBoundingClientRect(),pa=U.select(sa).datum(),na=pa.categoryViewModel,ka=na.parcatsViewModel,ua=ka.model.dimensions[na.model.dimensionInd];sa=ka.trace;var va=qa.y+qa.height/2;1<ka.dimensions.length&&ua.displayInd===ka.dimensions.length-1?(qa=qa.left,ua="left"):(qa=qa.left+qa.width,ua="right");var Ca=na.model.categoryLabel,Ma=pa.parcatsViewModel.model.count,Ua=0;pa.categoryViewModel.bands.forEach(function(pb){pb.color===pa.color&&(Ua+=pb.count)});var eb=na.model.count,fb=0;ka.pathSelection.each(function(pb){pb.model.color===
pa.color&&(fb+=pb.model.count)});ka=Ua/Ma;var nb=Ua/fb,cb=Ua/eb,$a={countLabel:Ma,categoryLabel:Ca,probabilityLabel:ka.toFixed(3)},jb=[];-1!==na.parcatsViewModel.hoverinfoItems.indexOf("count")&&jb.push(["Count:",$a.countLabel].join(" "));-1!==na.parcatsViewModel.hoverinfoItems.indexOf("probability")&&(jb.push("P(color  "+Ca+"): "+$a.probabilityLabel),jb.push("P("+Ca+" | color): "+nb.toFixed(3)),jb.push("P(color | "+Ca+"): "+cb.toFixed(3)));na=jb.join("\x3cbr\x3e");nb=ja.mostReadable(pa.color,["black",
"white"]);return{trace:sa,x:ma*(qa-oa.left),y:da*(va-oa.top),text:na,color:pa.color,borderColor:"black",fontFamily:'Monaco, "Courier New", monospace',fontColor:nb,fontSize:10,idealAlign:ua,hovertemplate:sa.hovertemplate,hovertemplateLabels:$a,eventData:[{data:sa._input,fullData:sa,category:Ca,count:Ma,probability:ka,categorycount:eb,colorcount:fb,bandcolorcount:Ua}]}}function C(da){if(!(da.parcatsViewModel.dragDimension||-1!==da.parcatsViewModel.hoverinfoItems.indexOf("skip")||-1>U.mouse(this)[1])){var oa=
da.parcatsViewModel.graphDiv,sa=oa._fullLayout,ma=sa._paperdiv.node().getBoundingClientRect(),qa=da.parcatsViewModel.hoveron;"color"===qa?(w(this),B(this,"plotly_hover",U.event)):(v(this),y(this,"plotly_hover",U.event));if(-1===da.parcatsViewModel.hoverinfoItems.indexOf("none")){var pa;"category"===qa?pa=A(oa,ma,this):"color"===qa?pa=E(oa,ma,this):"dimension"===qa&&(pa=z(oa,ma,this));pa&&X.loneHover(pa,{container:sa._hoverlayer.node(),outerContainer:sa._paper.node(),gd:oa})}}}function u(da){var oa=
da.parcatsViewModel;oa.dragDimension||(d(oa.pathSelection),f(oa.dimensionSelection.selectAll("g.category")),k(oa.dimensionSelection.selectAll("g.category").selectAll("rect.bandrect")),X.loneUnhover(oa.graphDiv._fullLayout._hoverlayer.node()),oa.pathSelection.sort(l),-1===oa.hoverinfoItems.indexOf("skip")&&("color"===da.parcatsViewModel.hoveron?B(this,"plotly_unhover",U.event):y(this,"plotly_unhover",U.event)))}function D(da){"fixed"!==da.parcatsViewModel.arrangement&&(da.dragDimensionDisplayInd=da.model.displayInd,
da.initialDragDimensionDisplayInds=da.parcatsViewModel.model.dimensions.map(function(oa){return oa.displayInd}),da.dragHasMoved=!1,da.dragCategoryDisplayInd=null,U.select(this).selectAll("g.category").select("rect.catrect").each(function(oa){var sa=U.mouse(this)[0],ma=U.mouse(this)[1];-2<=sa&&sa<=oa.width+2&&-2<=ma&&ma<=oa.height+2&&(da.dragCategoryDisplayInd=oa.model.displayInd,da.initialDragCategoryDisplayInds=da.model.categories.map(function(qa){return qa.displayInd}),oa.model.dragY=oa.y,ba.raiseToTop(this.parentNode),
U.select(this.parentNode).selectAll("rect.bandrect").each(function(qa){qa.y<ma&&ma<=qa.y+qa.height&&(da.potentialClickBand=this)}))}),da.parcatsViewModel.dragDimension=da,X.loneUnhover(da.parcatsViewModel.graphDiv._fullLayout._hoverlayer.node()))}function G(da){if("fixed"!==da.parcatsViewModel.arrangement&&(da.dragHasMoved=!0,null!==da.dragDimensionDisplayInd)){var oa=da.dragDimensionDisplayInd,sa=oa-1,ma=oa+1,qa=da.parcatsViewModel.dimensions[oa];if(null!==da.dragCategoryDisplayInd){var pa=qa.categories[da.dragCategoryDisplayInd];
pa.model.dragY+=U.event.dy;var na=pa.model.dragY,ka=pa.model.displayInd,ua=qa.categories,va=ua[ka-1];ua=ua[ka+1];void 0!==va&&na<va.y+va.height/2&&(pa.model.displayInd=va.model.displayInd,va.model.displayInd=ka);void 0!==ua&&na+pa.height>ua.y+ua.height/2&&(pa.model.displayInd=ua.model.displayInd,ua.model.displayInd=ka);da.dragCategoryDisplayInd=pa.model.displayInd}if(null===da.dragCategoryDisplayInd||"freeform"===da.parcatsViewModel.arrangement)qa.model.dragX=U.event.x,sa=da.parcatsViewModel.dimensions[sa],
ma=da.parcatsViewModel.dimensions[ma],void 0!==sa&&qa.model.dragX<sa.x+sa.width&&(qa.model.displayInd=sa.model.displayInd,sa.model.displayInd=oa),void 0!==ma&&qa.model.dragX+qa.width>ma.x&&(qa.model.displayInd=ma.model.displayInd,ma.model.displayInd=da.dragDimensionDisplayInd),da.dragDimensionDisplayInd=qa.model.displayInd;T(da.parcatsViewModel);P(da.parcatsViewModel);H(da.parcatsViewModel);K(da.parcatsViewModel)}}function J(da){if("fixed"!==da.parcatsViewModel.arrangement&&null!==da.dragDimensionDisplayInd){U.select(this).selectAll("text").attr("font-weight",
"normal");var oa={},sa=L(da.parcatsViewModel),ma=da.parcatsViewModel.model.dimensions.map(function(va){return va.displayInd}),qa=da.initialDragDimensionDisplayInds.some(function(va,Ca){return va!==ma[Ca]});qa&&ma.forEach(function(va,Ca){oa["dimensions["+da.parcatsViewModel.model.dimensions[Ca].containerInd+"].displayindex"]=va});var pa=!1;if(null!==da.dragCategoryDisplayInd){var na=da.model.categories.map(function(va){return va.displayInd});if(pa=da.initialDragCategoryDisplayInds.some(function(va,
Ca){return va!==na[Ca]})){var ka=da.model.categories.slice().sort(function(va,Ca){return va.displayInd-Ca.displayInd}),ua=ka.map(function(va){return va.categoryValue});ka=ka.map(function(va){return va.categoryLabel});oa["dimensions["+da.model.containerInd+"].categoryarray"]=[ua];oa["dimensions["+da.model.containerInd+"].ticktext"]=[ka];oa["dimensions["+da.model.containerInd+"].categoryorder"]="array"}}-1===da.parcatsViewModel.hoverinfoItems.indexOf("skip")&&!da.dragHasMoved&&da.potentialClickBand&&
("color"===da.parcatsViewModel.hoveron?B(da.potentialClickBand,"plotly_click",U.event.sourceEvent):y(da.potentialClickBand,"plotly_click",U.event.sourceEvent));da.model.dragX=null;null!==da.dragCategoryDisplayInd&&(da.parcatsViewModel.dimensions[da.dragDimensionDisplayInd].categories[da.dragCategoryDisplayInd].model.dragY=null,da.dragCategoryDisplayInd=null);da.dragDimensionDisplayInd=null;da.parcatsViewModel.dragDimension=null;da.dragHasMoved=null;da.potentialClickBand=null;T(da.parcatsViewModel);
P(da.parcatsViewModel);U.transition().duration(300).ease("cubic-in-out").each(function(){H(da.parcatsViewModel,!0);K(da.parcatsViewModel,!0)}).each("end",function(){(qa||pa)&&S.restyle(da.parcatsViewModel.graphDiv,oa,[sa])})}}function L(da){for(var oa,sa=da.graphDiv._fullData,ma=0;ma<sa.length;ma++)if(da.key===sa[ma].uid){oa=ma;break}return oa}function K(da,oa){void 0===oa&&(oa=!1);da.pathSelection.data(function(sa){return sa.paths},q);(function(sa){return oa?sa.transition():sa})(da.pathSelection).attr("d",
function(sa){return sa.svgD})}function H(da,oa){function sa(qa){return oa?qa.transition():qa}void 0===oa&&(oa=!1);da.dimensionSelection.data(function(qa){return qa.dimensions},q);var ma=da.dimensionSelection.selectAll("g.category").data(function(qa){return qa.categories},q);sa(da.dimensionSelection).attr("transform",function(qa){return ca(qa.x,0)});sa(ma).attr("transform",function(qa){return ca(0,qa.y)});ma.select(".dimlabel").text(function(qa,pa){return 0===pa?qa.parcatsViewModel.model.dimensions[qa.model.dimensionInd].dimensionLabel:
null});ma.select(".catlabel").attr("text-anchor",function(qa){return m(qa)?"start":"end"}).attr("x",function(qa){return m(qa)?qa.width+5:-5}).each(function(qa){if(m(qa)){qa=qa.width+5;var pa="start"}else qa=-5,pa="end";U.select(this).selectAll("tspan").attr("x",qa).attr("text-anchor",pa)});da=ma.selectAll("rect.bandrect").data(function(qa){return qa.bands},q);ma=da.enter().append("rect").attr("class","bandrect").attr("cursor","move").attr("stroke-opacity",0).attr("fill",function(qa){return qa.color}).attr("fill-opacity",
0);da.attr("fill",function(qa){return qa.color}).attr("width",function(qa){return qa.width}).attr("height",function(qa){return qa.height}).attr("y",function(qa){return qa.y});k(ma);da.each(function(){ba.raiseToTop(this)});da.exit().remove()}function Q(da,oa,sa){sa=sa[0];var ma=oa.margin||{l:80,r:80,t:100,b:80},qa=sa.trace,pa=qa.domain,na=oa.width,ka=Math.floor(na*(pa.x[1]-pa.x[0])),ua=Math.floor(oa.height*(pa.y[1]-pa.y[0]));na=pa.x[0]*na+ma.l;oa=oa.height-pa.y[1]*oa.height+ma.t;pa=qa.line.shape;var va=
"all"===qa.hoverinfo?["count","probability"]:(qa.hoverinfo||"").split("+");da={trace:qa,key:qa.uid,model:sa,x:na,y:oa,width:ka,height:ua,hoveron:qa.hoveron,hoverinfoItems:va,arrangement:qa.arrangement,bundlecolors:qa.bundlecolors,sortpaths:qa.sortpaths,labelfont:qa.labelfont,categorylabelfont:qa.tickfont,pathShape:pa,dragDimension:null,margin:ma,paths:[],dimensions:[],graphDiv:da,traceSelection:null,pathSelection:null,dimensionSelection:null};sa.dimensions&&(T(da),P(da));return da}function M(da,oa,
sa,ma,qa){var pa=[],na=[],ka;for(ka=0;ka<sa.length-1;ka++){var ua=U.interpolateNumber(sa[ka]+da[ka],da[ka+1]);pa.push(ua(qa));na.push(ua(1-qa))}qa="M "+da[0]+","+oa[0];qa+="l"+sa[0]+",0 ";for(ka=1;ka<sa.length;ka++)qa+="C"+pa[ka-1]+","+oa[ka-1]+" "+na[ka-1]+","+oa[ka]+" "+da[ka]+","+oa[ka],qa+="l"+sa[ka]+",0 ";qa=qa+("l0,"+ma+" l -")+(sa[sa.length-1]+",0 ");for(ka=sa.length-2;0<=ka;ka--)qa+="C"+na[ka]+","+(oa[ka+1]+ma)+" "+pa[ka]+","+(oa[ka]+ma)+" "+(da[ka]+sa[ka])+","+(oa[ka]+ma),qa+="l-"+sa[ka]+
",0 ";return qa+"Z"}function P(da){function oa(xa){var Ea=xa.categoryInds.map(function(Ia,Oa){return pa[Oa][Ia]});return ka.map(function(Ia){return Ea[Ia]})}var sa=da.dimensions,ma=da.model,qa=sa.map(function(xa){return xa.categories.map(function(Ea){return Ea.y})}),pa=da.model.dimensions.map(function(xa){return xa.categories.map(function(Ea){return Ea.displayInd})}),na=da.model.dimensions.map(function(xa){return xa.displayInd}),ka=da.dimensions.map(function(xa){return xa.model.dimensionInd}),ua=
sa.map(function(xa){return xa.x}),va=sa.map(function(xa){return xa.width}),Ca=[];for(Ma in ma.paths)ma.paths.hasOwnProperty(Ma)&&Ca.push(ma.paths[Ma]);Ca.sort(function(xa,Ea){var Ia=oa(xa),Oa=oa(Ea);"backward"===da.sortpaths&&(Ia.reverse(),Oa.reverse());Ia.push(xa.valueInds[0]);Oa.push(Ea.valueInds[0]);da.bundlecolors&&(Ia.unshift(xa.rawColor),Oa.unshift(Ea.rawColor));return Ia<Oa?-1:Ia>Oa?1:0});ma=Array(Ca.length);var Ma=sa[0].model.count;sa=sa[0].categories.map(function(xa){return xa.height}).reduce(function(xa,
Ea){return xa+Ea});for(var Ua=0;Ua<Ca.length;Ua++){var eb=Ca[Ua];var fb=0<Ma?eb.count/Ma*sa:0;for(var nb=Array(qa.length),cb=0;cb<eb.categoryInds.length;cb++){var $a=pa[cb][eb.categoryInds[cb]],jb=na[cb];nb[jb]=qa[jb][$a];qa[jb][$a]+=fb;$a=da.dimensions[jb].categories[$a];jb=$a.bands.length;var pb=$a.bands[jb-1];void 0===pb||eb.rawColor!==pb.rawColor?(jb=void 0===pb?0:pb.y+pb.height,$a.bands.push({key:jb,color:eb.color,rawColor:eb.rawColor,height:fb,width:$a.width,count:eb.count,y:jb,categoryViewModel:$a,
parcatsViewModel:da})):($a=$a.bands[jb-1],$a.height+=fb,$a.count+=eb.count)}cb="hspline"===da.pathShape?M(ua,nb,va,fb,.5):M(ua,nb,va,fb,0);ma[Ua]={key:eb.valueInds[0],model:eb,height:fb,leftXs:ua,topYs:nb,dimWidths:va,svgD:cb,parcatsViewModel:da}}da.paths=ma}function T(da){var oa=da.model.dimensions.map(function(qa){return{displayInd:qa.displayInd,dimensionInd:qa.dimensionInd}});oa.sort(function(qa,pa){return qa.displayInd-pa.displayInd});var sa=[],ma;for(ma in oa)sa.push(O(da,da.model.dimensions[oa[ma].dimensionInd]));
da.dimensions=sa}function O(da,oa){var sa=da.model.dimensions.length;sa=40+(1<sa?(da.width-80-16)/(sa-1):0)*oa.displayInd;var ma=[],qa=da.model.maxCats,pa=oa.categories.length,na=oa.count,ka=da.height-8*(qa-1),ua=8*(qa-pa)/2,va=oa.categories.map(function(Ua){return{displayInd:Ua.displayInd,categoryInd:Ua.categoryInd}});va.sort(function(Ua,eb){return Ua.displayInd-eb.displayInd});for(qa=0;qa<pa;qa++){var Ca=va[qa].categoryInd;var Ma=oa.categories[Ca];Ca=0<na?Ma.count/na*ka:0;Ma={key:Ma.valueInds[0],
model:Ma,width:16,height:Ca,y:null!==Ma.dragY?Ma.dragY:ua,bands:[],parcatsViewModel:da};ua=ua+Ca+8;ma.push(Ma)}return{key:oa.dimensionInd,x:null!==oa.dragX?oa.dragX:sa,y:0,width:16,model:oa,categories:ma,parcatsViewModel:da,dragCategoryDisplayInd:null,dragDimensionDisplayInd:null,initialDragDimensionDisplayInds:null,initialDragCategoryDisplayInds:null,dragHasMoved:null,potentialClickBand:null}}var U=b("d3"),S=b("../../plot_api/plot_api"),X=b("../../components/fx"),ba=b("../../lib"),ca=ba.strTranslate,
ia=b("../../components/drawing"),ja=b("tinycolor2"),la=b("../../lib/svg_text_utils");N.exports=function(da,oa,sa,ma){r(sa,da,ma,oa)}},{"../../components/drawing":665,"../../components/fx":683,"../../lib":778,"../../lib/svg_text_utils":803,"../../plot_api/plot_api":814,d3:169,tinycolor2:576}],1148:[function(b,N,I){var r=b("./parcats");N.exports=function(q,m,l,a){var h=q._fullLayout,g=h._size;r(q,h._paper,m,{width:g.w,height:g.h,margin:{t:g.t,r:g.r,b:g.b,l:g.l}},l,a)}},{"./parcats":1147}],1149:[function(b,
N,I){I=b("../../components/colorscale/attributes");var r=b("../../plots/cartesian/layout_attributes"),q=b("../../plots/font_attributes"),m=b("../../plots/domain").attributes,l=b("../../lib/extend").extendFlat;b=b("../../plot_api/plot_template").templatedArray;N.exports={domain:m({name:"parcoords",trace:!0,editType:"plot"}),labelangle:{valType:"angle",dflt:0,editType:"plot"},labelside:{valType:"enumerated",values:["top","bottom"],dflt:"top",editType:"plot"},labelfont:q({editType:"plot"}),tickfont:q({editType:"plot"}),
rangefont:q({editType:"plot"}),dimensions:b("dimension",{label:{valType:"string",editType:"plot"},tickvals:l({},r.tickvals,{editType:"plot"}),ticktext:l({},r.ticktext,{editType:"plot"}),tickformat:l({},r.tickformat,{editType:"plot"}),visible:{valType:"boolean",dflt:!0,editType:"plot"},range:{valType:"info_array",items:[{valType:"number",editType:"plot"},{valType:"number",editType:"plot"}],editType:"plot"},constraintrange:{valType:"info_array",freeLength:!0,dimensions:"1-2",items:[{valType:"number",
editType:"plot"},{valType:"number",editType:"plot"}],editType:"plot"},multiselect:{valType:"boolean",dflt:!0,editType:"plot"},values:{valType:"data_array",editType:"calc"},editType:"calc"}),line:l({editType:"calc"},I("line",{colorscaleDflt:"Viridis",autoColorDflt:!1,editTypeOverride:"calc"}))}},{"../../components/colorscale/attributes":650,"../../lib/extend":768,"../../plot_api/plot_template":817,"../../plots/cartesian/layout_attributes":842,"../../plots/domain":855,"../../plots/font_attributes":856}],
1150:[function(b,N,I){function r(Q,M,P,T){a:{for(var O=0;O<T.length;O++)if(P>=T[O][0]&&P<=T[O][1]){T=!0;break a}T=!1}if(T)return P;Q=Q?-1:1;var U=0;T=M.length-1;0>Q&&(O=U,U=T,T=O);for(var S=O=M[U];Q*U<Q*T;U+=Q){var X=U+Q,ba=M[X];if(Q*P<Q*(O*(1-H)+ba*H))return O*(1-K)+S*K;if(Q*P<Q*ba||X===T)return ba*(1-K)+O*K;S=O;O=ba}}function q(Q){Q.attr("x",-C.bar.captureWidth/2).attr("width",C.bar.captureWidth)}function m(Q){Q.attr("visibility","visible").style("visibility","visible").attr("fill","yellow").attr("opacity",
0)}function l(Q){if(!Q.brush.filterSpecified)return"0,"+Q.height;for(var M=a(Q.brush.filter.getConsolidated(),Q.height),P=[0],T,O,U=M.length?M[0][0]:null,S=0;S<M.length;S++)T=M[S],O=T[1]-T[0],P.push(U),P.push(O),O=S+1,O<M.length&&(U=M[O][0]-T[1]);P.push(Q.height);return P}function a(Q,M){return Q.map(function(P){return P.map(function(T){return Math.max(0,T*M)}).sort(J)})}function h(){u.select(document.body).style("cursor",null)}function g(Q){Q.attr("stroke-dasharray",l)}function n(Q,M){Q=u.select(Q).selectAll(".highlight, .highlight-shadow");
M=M?Q.transition().duration(C.bar.snapDuration).each("end",M):Q;g(M)}function p(Q,M){var P=Q.brush,T={};if(P.filterSpecified){var O=Q.height;P=P.filter.getConsolidated();var U=a(P,O),S=NaN,X=NaN,ba=NaN;for(O=0;O<=U.length;O++){var ca=U[O];if(ca&&ca[0]<=M&&M<=ca[1]){S=O;break}else if(X=O?O-1:NaN,ca&&ca[0]>M){ba=O;break}}O=S;isNaN(O)&&(O=isNaN(X)||isNaN(ba)?isNaN(X)?ba:X:M-U[X][1]<U[ba][0]-M?X:ba);isNaN(O)||(U=U[O],X=C.bar.handleHeight,X=M>U[1]+X||M<U[0]-X?void 0:M>=.9*U[1]+.1*U[0]?"n":M<=.9*U[0]+.1*
U[1]?"s":"ns",X&&(T.interval=P[O],T.intervalPix=U,T.region=X))}if(Q.ordinal&&!T.region)for(P=Q.unitTickvals,Q=Q.unitToPaddedPx.invert(M),O=0;O<P.length;O++)if(M=[.25*P[Math.max(O-1,0)]+.75*P[O],.25*P[Math.min(O+1,P.length-1)]+.75*P[O]],Q>=M[0]&&Q<=M[1]){T.clickableOrdinalRange=M;break}return T}function d(Q,M){u.event.sourceEvent.stopPropagation();Q=M.height-u.mouse(Q)[1]-2*C.verticalPadding;var P=M.unitToPaddedPx.invert(Q),T=M.brush,O=p(M,Q),U=O.interval,S=T.svgBrush;S.wasDragged=!1;S.grabbingBar=
"ns"===O.region;if(S.grabbingBar){var X=U.map(M.unitToPaddedPx);S.grabPoint=Q-X[0]-C.verticalPadding;S.barLength=X[1]-X[0]}S.clickableOrdinalRange=O.clickableOrdinalRange;S.stayingIntervals=M.multiselect&&T.filterSpecified?T.filter.getConsolidated():[];U&&(S.stayingIntervals=S.stayingIntervals.filter(function(ba){return ba[0]!==U[0]&&ba[1]!==U[1]}));S.startExtent=O.region?U["s"===O.region?1:0]:P;M.parent.inBrushDrag=!0;S.brushStartCallback()}function e(Q,M){u.event.sourceEvent.stopPropagation();var P=
M.height-u.mouse(Q)[1]-2*C.verticalPadding,T=M.brush.svgBrush;T.wasDragged=!0;T._dragging=!0;T.newExtent=T.grabbingBar?[P-T.grabPoint,P+T.barLength-T.grabPoint].map(M.unitToPaddedPx.invert):[T.startExtent,M.unitToPaddedPx.invert(P)].sort(J);M.brush.filterSpecified=!0;T.extent=T.stayingIntervals.concat([T.newExtent]);T.brushCallback(M);n(Q.parentNode)}function f(Q,M){var P=M.brush,T=P.filter,O=P.svgBrush;O._dragging||(k(Q,M),e(Q,M),M.brush.svgBrush.wasDragged=!1);O._dragging=!1;u.event.sourceEvent.stopPropagation();
var U=O.grabbingBar;O.grabbingBar=!1;O.grabLocation=void 0;M.parent.inBrushDrag=!1;h();if(O.wasDragged)if(U=function(){T.set(T.getConsolidated())},M.ordinal){var S=M.unitTickvals;S[S.length-1]<S[0]&&S.reverse();O.newExtent=[r(0,S,O.newExtent[0],O.stayingIntervals),r(1,S,O.newExtent[1],O.stayingIntervals)];S=O.newExtent[1]>O.newExtent[0];O.extent=O.stayingIntervals.concat(S?[O.newExtent]:[]);O.extent.length||B(P);O.brushCallback(M);S?n(Q.parentNode,U):(U(),n(Q.parentNode))}else U();else O.wasDragged=
void 0,O.clickableOrdinalRange?P.filterSpecified&&M.multiselect?O.extent.push(O.clickableOrdinalRange):(O.extent=[O.clickableOrdinalRange],P.filterSpecified=!0):U?(O.extent=O.stayingIntervals,0===O.extent.length&&B(P)):B(P),O.brushCallback(M),n(Q.parentNode);O.brushEndCallback(P.filterSpecified?T.getConsolidated():[])}function k(Q,M){Q=M.height-u.mouse(Q)[1]-2*C.verticalPadding;M=p(M,Q);Q="crosshair";M.clickableOrdinalRange?Q="pointer":M.region&&(Q=M.region+"-resize");u.select(document.body).style("cursor",
Q)}function t(Q){Q.on("mousemove",function(M){u.event.preventDefault();M.parent.inBrushDrag||k(this,M)}).on("mouseleave",function(M){M.parent.inBrushDrag||h()}).call(u.behavior.drag().on("dragstart",function(M){d(this,M)}).on("drag",function(M){e(this,M)}).on("dragend",function(M){f(this,M)}))}function v(Q,M){return Q[0]-M[0]}function w(Q){var M=Q.selectAll(".background").data(G);M.enter().append("rect").classed("background",!0).call(q).call(m).style("pointer-events","auto").attr("transform",L(0,
C.verticalPadding));M.call(t).attr("height",function(P){return P.height-C.verticalPadding});M=Q.selectAll(".highlight-shadow").data(G);M.enter().append("line").classed("highlight-shadow",!0).attr("x",-C.bar.width/2).attr("stroke-width",C.bar.width+C.bar.strokeWidth).attr("stroke",C.bar.strokeColor).attr("opacity",C.bar.strokeOpacity).attr("stroke-linecap","butt");M.attr("y1",function(P){return P.height}).call(g);Q=Q.selectAll(".highlight").data(G);Q.enter().append("line").classed("highlight",!0).attr("x",
-C.bar.width/2).attr("stroke-width",C.bar.width-C.bar.strokeWidth).attr("stroke",C.bar.fillColor).attr("opacity",C.bar.fillOpacity).attr("stroke-linecap","butt");Q.attr("y1",function(P){return P.height}).call(g)}function y(Q){return Q.svgBrush.extent.map(function(M){return M.slice()})}function B(Q){Q.filterSpecified=!1;Q.svgBrush.extent=[[-Infinity,Infinity]]}function A(Q){return function(M){M=M.brush;var P=y(M).slice();M.filter.set(P);Q()}}function z(Q){Q=Q.slice();for(var M=[],P,T=Q.shift();T;){for(P=
T.slice();(T=Q.shift())&&T[0]<=P[1];)P[1]=Math.max(P[1],T[1]);M.push(P)}1===M.length&&M[0][0]>M[0][1]&&(M=[]);return M}function E(){var Q=[],M,P;return{set:function(T){Q=T.map(function(O){return O.slice().sort(J)}).sort(v);1===Q.length&&-Infinity===Q[0][0]&&Infinity===Q[0][1]&&(Q=[[0,-1]]);M=z(Q);P=Q.reduce(function(O,U){return[Math.min(O[0],U[0]),Math.max(O[1],U[1])]},[Infinity,-Infinity])},get:function(){return Q.slice()},getConsolidated:function(){return M},getBounds:function(){return P}}}var C=
b("./constants"),u=b("d3"),D=b("../../lib/gup").keyFun,G=b("../../lib/gup").repeat,J=b("../../lib").sorterAsc,L=b("../../lib").strTranslate,K=C.bar.snapRatio,H=C.bar.snapClose;N.exports={makeBrush:function(Q,M,P,T,O,U){Q=E();Q.set(P);return{filter:Q,filterSpecified:M,svgBrush:{extent:[],brushStartCallback:T,brushCallback:A(O),brushEndCallback:U}}},ensureAxisBrush:function(Q){Q=Q.selectAll("."+C.cn.axisBrush).data(G,D);Q.enter().append("g").classed(C.cn.axisBrush,!0);w(Q)},cleanRanges:function(Q,M){Array.isArray(Q[0])?
(Q=Q.map(function(T){return T.sort(J)}),Q=M.multiselect?z(Q.sort(v)):[Q[0]]):Q=[Q.sort(J)];if(M.tickvals){var P=M.tickvals.slice().sort(J);Q=Q.map(function(T){T=[r(0,P,T[0],[]),r(1,P,T[1],[])];if(T[1]>T[0])return T}).filter(function(T){return T});if(!Q.length)return}return 1<Q.length?Q:Q[0]}}},{"../../lib":778,"../../lib/gup":775,"./constants":1153,d3:169}],1151:[function(b,N,I){var r=b("d3"),q=b("../../plots/get_data").getModuleCalcData,m=b("./plot"),l=b("../../constants/xmlns_namespaces");I.name=
"parcoords";I.plot=function(a){var h=q(a.calcdata,"parcoords")[0];h.length&&m(a,h)};I.clean=function(a,h,g,n){a=n._has&&n._has("parcoords");h=h._has&&h._has("parcoords");a&&!h&&(n._paperdiv.selectAll(".parcoords").remove(),n._glimages.selectAll("*").remove())};I.toSVG=function(a){var h=a._fullLayout._glimages,g=r.select(a).selectAll(".svg-container");g.filter(function(n,p){return p===g.size()-1}).selectAll(".gl-canvas-context, .gl-canvas-focus").each(function(){var n=this.toDataURL("image/png");h.append("svg:image").attr({xmlns:l.svg,
"xlink:href":n,preserveAspectRatio:"none",x:0,y:0,width:this.width,height:this.height})});window.setTimeout(function(){r.selectAll("#filterBarPattern").attr("id","filterBarPattern")},60)}},{"../../constants/xmlns_namespaces":754,"../../plots/get_data":865,"./plot":1160,d3:169}],1152:[function(b,N,I){var r=b("../../lib").isArrayOrTypedArray,q=b("../../components/colorscale"),m=b("../../lib/gup").wrap;N.exports=function(l,a){if(q.hasColorscale(a,"line")&&r(a.line.color)){var h=a.line.color;var g=q.extractOpts(a.line).colorscale;
q.calc(l,a,{vals:h,containerStr:"line",cLetter:"c"})}else{l=a._length;h=Array(l);for(g=0;g<l;g++)h[g]=.5;g=[[0,a.line.color],[1,a.line.color]]}return m({lineColor:h,cscale:g})}},{"../../components/colorscale":655,"../../lib":778,"../../lib/gup":775}],1153:[function(b,N,I){N.exports={maxDimensionCount:60,overdrag:45,verticalPadding:2,tickDistance:50,canvasPixelRatio:1,blockLineCount:5E3,layers:["contextLineLayer","focusLineLayer","pickLineLayer"],axisTitleOffset:28,axisExtentOffset:10,deselectedLineColor:"#777",
bar:{width:4,captureWidth:10,fillColor:"magenta",fillOpacity:1,snapDuration:150,snapRatio:.25,snapClose:.01,strokeColor:"white",strokeOpacity:1,strokeWidth:1,handleHeight:8,handleOpacity:1,handleOverlap:0},cn:{axisExtentText:"axis-extent-text",parcoordsLineLayers:"parcoords-line-layers",parcoordsLineLayer:"parcoords-lines",parcoords:"parcoords",parcoordsControlView:"parcoords-control-view",yAxis:"y-axis",axisOverlays:"axis-overlays",axis:"axis",axisHeading:"axis-heading",axisTitle:"axis-title",axisExtent:"axis-extent",
axisExtentTop:"axis-extent-top",axisExtentTopText:"axis-extent-top-text",axisExtentBottom:"axis-extent-bottom",axisExtentBottomText:"axis-extent-bottom-text",axisBrush:"axis-brush"},id:{filterBarPattern:"filter-bar-pattern"}}},{}],1154:[function(b,N,I){function r(k,t,v,w,y){var B=y("line.color",v);if(l(k,"line")&&m.isArrayOrTypedArray(B)){if(B.length)return y("line.colorscale"),a(k,t,w,y,{prefix:"line.",cLetter:"c"}),B.length;t.line.color=v}return Infinity}function q(k,t,v,w){function y(A,z){return m.coerce(k,
t,p.dimensions,A,z)}v=y("values");var B=y("visible");v&&v.length||(B=t.visible=!1);B&&(y("label"),y("tickvals"),y("ticktext"),y("tickformat"),v=y("range"),t._ax={_id:"y",type:"linear",showexponent:"all",exponentformat:"B",range:v},n.setConvert(t._ax,w.layout),y("multiselect"),w=y("constraintrange"))&&(t.constraintrange=d.cleanRanges(w,t))}var m=b("../../lib"),l=b("../../components/colorscale/helpers").hasColorscale,a=b("../../components/colorscale/defaults"),h=b("../../plots/domain").defaults,g=b("../../plots/array_container_defaults"),
n=b("../../plots/cartesian/axes"),p=b("./attributes"),d=b("./axisbrush"),e=b("./constants").maxDimensionCount,f=b("./merge_length");N.exports=function(k,t,v,w){function y(A,z){return m.coerce(k,t,p,A,z)}var B=k.dimensions;Array.isArray(B)&&B.length>e&&(m.log("parcoords traces support up to "+e+" dimensions at the moment"),B.splice(e));B=g(k,t,{name:"dimensions",layout:w,handleItemDefaults:q});v=r(k,t,v,w,y);h(t,w,y);Array.isArray(B)&&B.length||(t.visible=!1);f(t,B,"values",v);w={family:w.font.family,
size:Math.round(w.font.size/1.2),color:w.font.color};m.coerceFont(y,"labelfont",w);m.coerceFont(y,"tickfont",w);m.coerceFont(y,"rangefont",w);y("labelangle");y("labelside")}},{"../../components/colorscale/defaults":653,"../../components/colorscale/helpers":654,"../../lib":778,"../../plots/array_container_defaults":823,"../../plots/cartesian/axes":828,"../../plots/domain":855,"./attributes":1149,"./axisbrush":1150,"./constants":1153,"./merge_length":1158}],1155:[function(b,N,I){var r=b("../../lib").isTypedArray;
I.convertTypedArray=function(q){return r(q)?Array.prototype.slice.call(q):q};I.isOrdinal=function(q){return!!q.tickvals};I.isVisible=function(q){return q.visible||!("visible"in q)}},{"../../lib":778}],1156:[function(b,N,I){N.exports={attributes:b("./attributes"),supplyDefaults:b("./defaults"),calc:b("./calc"),plot:b("./plot"),colorbar:{container:"line",min:"cmin",max:"cmax"},moduleType:"trace",name:"parcoords",basePlotModule:b("./base_plot"),categories:["gl","regl","noOpacity","noHover"],meta:{}}},
{"./attributes":1149,"./base_plot":1151,"./calc":1152,"./defaults":1154,"./plot":1160}],1157:[function(b,N,I){function r(y,B,A,z,E){var C=y._gl;C.enable(C.SCISSOR_TEST);C.scissor(B,A,z,E);y.clear({color:[0,0,0,0],depth:1})}function q(y,B,A,z,E,C){function u(G){var J=Math.min(z,E-G*z);0===G&&(window.cancelAnimationFrame(A.currentRafs[D]),delete A.currentRafs[D],r(y,C.scissorX,C.scissorY,C.scissorWidth,C.viewBoxSize[1]));A.clearOnly||(C.count=2*J,C.offset=2*G*z,B(C),G*z+J<E&&(A.currentRafs[D]=window.requestAnimationFrame(function(){u(G+
1)})),A.drawCompleted=!1)}var D=C.key;A.drawCompleted||(y.read({x:0,y:0,width:1,height:1,data:t}),A.drawCompleted=!0);u(0)}function m(y,B){for(var A=Array(256),z=0;256>z;z++)A[z]=y(z/255).concat(B);return A}function l(y,B,A){for(var z=Array(y*(f+4)),E=0,C=0;C<y;C++){for(var u=0;u<f;u++)z[E++]=u<B.length?B[u].paddedUnitValues[C]:.5;z[E++]=(C>>>16)%256/255;z[E++]=(C>>>8)%256/255;z[E++]=(C>>>0)%256/255;z[E++]=Math.max(1E-6,Math.min(.999999,A[C]))}return z}function a(y){y="0"+y;return y.substr(y.length-
2)}function h(y){return y<f?"p"+a(y+1)+"_"+a(y+4):"colors"}function g(y,B,A){for(var z=0;z<=f;z+=4){for(var E=y,C=E[h(z)],u=z/4,D=B,G=A,J=Array(8*D),L=0,K=0;K<D;K++)for(var H=0;2>H;H++)for(var Q=0;4>Q;Q++){var M=4*u+Q,P=G[64*K+M];63===M&&0===H&&(P*=-1);J[L++]=P}C.call(E,J)}}function n(y){for(var B={},A=0;A<=f;A+=4)B[h(A)]=y.buffer({usage:"dynamic",type:"float",data:new Uint8Array(0)});return B}function p(y){var B=Math.max(0,Math.floor(2047*y[0]),0);y=Math.min(2047,Math.ceil(2047*y[1]),2047);return[Math.min(B,
y),Math.max(B,y)]}I=b("glslify");var d=I(["precision highp float;\n#define GLSLIFY 1\n\nvarying vec4 fragColor;\n\nattribute vec4 p01_04, p05_08, p09_12, p13_16,\n               p17_20, p21_24, p25_28, p29_32,\n               p33_36, p37_40, p41_44, p45_48,\n               p49_52, p53_56, p57_60, colors;\n\nuniform mat4 dim0A, dim1A, dim0B, dim1B, dim0C, dim1C, dim0D, dim1D,\n             loA, hiA, loB, hiB, loC, hiC, loD, hiD;\n\nuniform vec2 resolution, viewBoxPos, viewBoxSize;\nuniform sampler2D mask, palette;\nuniform float maskHeight;\nuniform float drwLayer; // 0: context, 1: focus, 2: pick\nuniform vec4 contextColor;\n\nbool isPick    \x3d (drwLayer \x3e 1.5);\nbool isContext \x3d (drwLayer \x3c 0.5);\n\nconst vec4 ZEROS \x3d vec4(0.0, 0.0, 0.0, 0.0);\nconst vec4 UNITS \x3d vec4(1.0, 1.0, 1.0, 1.0);\n\nfloat val(mat4 p, mat4 v) {\n    return dot(matrixCompMult(p, v) * UNITS, UNITS);\n}\n\nfloat axisY(float ratio, mat4 A, mat4 B, mat4 C, mat4 D) {\n    float y1 \x3d val(A, dim0A) + val(B, dim0B) + val(C, dim0C) + val(D, dim0D);\n    float y2 \x3d val(A, dim1A) + val(B, dim1B) + val(C, dim1C) + val(D, dim1D);\n    return y1 * (1.0 - ratio) + y2 * ratio;\n}\n\nint iMod(int a, int b) {\n    return a - b * (a / b);\n}\n\nbool fOutside(float p, float lo, float hi) {\n    return (lo \x3c hi) \x26\x26 (lo \x3e p || p \x3e hi);\n}\n\nbool vOutside(vec4 p, vec4 lo, vec4 hi) {\n    return (\n        fOutside(p[0], lo[0], hi[0]) ||\n        fOutside(p[1], lo[1], hi[1]) ||\n        fOutside(p[2], lo[2], hi[2]) ||\n        fOutside(p[3], lo[3], hi[3])\n    );\n}\n\nbool mOutside(mat4 p, mat4 lo, mat4 hi) {\n    return (\n        vOutside(p[0], lo[0], hi[0]) ||\n        vOutside(p[1], lo[1], hi[1]) ||\n        vOutside(p[2], lo[2], hi[2]) ||\n        vOutside(p[3], lo[3], hi[3])\n    );\n}\n\nbool outsideBoundingBox(mat4 A, mat4 B, mat4 C, mat4 D) {\n    return mOutside(A, loA, hiA) ||\n           mOutside(B, loB, hiB) ||\n           mOutside(C, loC, hiC) ||\n           mOutside(D, loD, hiD);\n}\n\nbool outsideRasterMask(mat4 A, mat4 B, mat4 C, mat4 D) {\n    mat4 pnts[4];\n    pnts[0] \x3d A;\n    pnts[1] \x3d B;\n    pnts[2] \x3d C;\n    pnts[3] \x3d D;\n\n    for(int i \x3d 0; i \x3c 4; ++i) {\n        for(int j \x3d 0; j \x3c 4; ++j) {\n            for(int k \x3d 0; k \x3c 4; ++k) {\n                if(0 \x3d\x3d iMod(\n                    int(255.0 * texture2D(mask,\n                        vec2(\n                            (float(i * 2 + j / 2) + 0.5) / 8.0,\n                            (pnts[i][j][k] * (maskHeight - 1.0) + 1.0) / maskHeight\n                        ))[3]\n                    ) / int(pow(2.0, float(iMod(j * 4 + k, 8)))),\n                    2\n                )) return true;\n            }\n        }\n    }\n    return false;\n}\n\nvec4 position(bool isContext, float v, mat4 A, mat4 B, mat4 C, mat4 D) {\n    float x \x3d 0.5 * sign(v) + 0.5;\n    float y \x3d axisY(x, A, B, C, D);\n    float z \x3d 1.0 - abs(v);\n\n    z +\x3d isContext ? 0.0 : 2.0 * float(\n        outsideBoundingBox(A, B, C, D) ||\n        outsideRasterMask(A, B, C, D)\n    );\n\n    return vec4(\n        2.0 * (vec2(x, y) * viewBoxSize + viewBoxPos) / resolution - 1.0,\n        z,\n        1.0\n    );\n}\n\nvoid main() {\n    mat4 A \x3d mat4(p01_04, p05_08, p09_12, p13_16);\n    mat4 B \x3d mat4(p17_20, p21_24, p25_28, p29_32);\n    mat4 C \x3d mat4(p33_36, p37_40, p41_44, p45_48);\n    mat4 D \x3d mat4(p49_52, p53_56, p57_60, ZEROS);\n\n    float v \x3d colors[3];\n\n    gl_Position \x3d position(isContext, v, A, B, C, D);\n\n    fragColor \x3d\n        isContext ? vec4(contextColor) :\n        isPick ? vec4(colors.rgb, 1.0) : texture2D(palette, vec2(abs(v), 0.5));\n}\n"]),
e=I(["precision highp float;\n#define GLSLIFY 1\n\nvarying vec4 fragColor;\n\nvoid main() {\n    gl_FragColor \x3d fragColor;\n}\n"]),f=b("./constants").maxDimensionCount,k=b("../../lib"),t=new Uint8Array(4),v=new Uint8Array(4),w={shape:[256,1],format:"rgba",type:"uint8",mag:"nearest",min:"nearest"};N.exports=function(y,B){function A(T){D=T.model;G=T.viewModel;J=G.dimensions.slice();L=J[0]?J[0].values.length:0;var O=D.lines;T=E?O.color.map(function(U,S){return S/O.color.length}):O.color;T=l(L,J,T);
g(K,L,T);z||E||(Q=C.texture(k.extendFlat({data:m(D.unitToColor,255)},w)))}var z=B.context,E=B.pick,C=B.regl,u={currentRafs:{},drawCompleted:!0,clearOnly:!1},D,G,J,L,K=n(C),H,Q=C.texture(w),M=[];A(B);var P=C({profile:!1,blend:{enable:z,func:{srcRGB:"src alpha",dstRGB:"one minus src alpha",srcAlpha:1,dstAlpha:1},equation:{rgb:"add",alpha:"add"},color:[0,0,0,0]},depth:{enable:!z,mask:!0,func:"less",range:[0,1]},cull:{enable:!0,face:"back"},scissor:{enable:!0,box:{x:C.prop("scissorX"),y:C.prop("scissorY"),
width:C.prop("scissorWidth"),height:C.prop("scissorHeight")}},viewport:{x:C.prop("viewportX"),y:C.prop("viewportY"),width:C.prop("viewportWidth"),height:C.prop("viewportHeight")},dither:!1,vert:d,frag:e,primitive:"lines",lineWidth:1,attributes:K,uniforms:{resolution:C.prop("resolution"),viewBoxPos:C.prop("viewBoxPos"),viewBoxSize:C.prop("viewBoxSize"),dim0A:C.prop("dim0A"),dim1A:C.prop("dim1A"),dim0B:C.prop("dim0B"),dim1B:C.prop("dim1B"),dim0C:C.prop("dim0C"),dim1C:C.prop("dim1C"),dim0D:C.prop("dim0D"),
dim1D:C.prop("dim1D"),loA:C.prop("loA"),hiA:C.prop("hiA"),loB:C.prop("loB"),hiB:C.prop("hiB"),loC:C.prop("loC"),hiC:C.prop("hiC"),loD:C.prop("loD"),hiD:C.prop("hiD"),palette:Q,contextColor:C.prop("contextColor"),mask:C.prop("maskTexture"),drwLayer:C.prop("drwLayer"),maskHeight:C.prop("maskHeight")},offset:C.prop("offset"),count:C.prop("count")});return{render:function(T,O,U){var S=T.length,X,ba=Infinity,ca=-Infinity;for(X=0;X<S;X++){if(T[X].dim0.canvasX<ba){ba=T[X].dim0.canvasX;var ia=X}if(T[X].dim1.canvasX>
ca){ca=T[X].dim1.canvasX;var ja=X}}0===S&&r(C,0,0,D.canvasWidth,D.canvasHeight);var la=z,da;X=[[],[]];for(ca=0;64>ca;ca++)ba=!la&&ca<J.length?J[ca].brush.filter.getBounds():[-Infinity,Infinity],X[0][ca]=ba[0],X[1][ca]=ba[1];var oa=Array(16384);for(ba=0;16384>ba;ba++)oa[ba]=255;if(!la)for(ba=0;ba<J.length;ba++){ca=ba%8;la=(ba-ca)/8;var sa=Math.pow(2,ca),ma=J[ba].brush.filter.get();if(!(2>ma.length)){var qa=p(ma[0])[1];for(da=1;da<ma.length;da++){var pa=p(ma[da]);for(ca=qa+1;ca<pa[0];ca++)oa[8*ca+la]&=
~sa;qa=Math.max(qa,pa[1])}}}ba={shape:[8,2048],format:"alpha",type:"uint8",mag:"nearest",min:"nearest",data:oa};H?H(ba):H=C.texture(ba);ba={maskTexture:H,maskHeight:2048,loA:X[0].slice(0,16),loB:X[0].slice(16,32),loC:X[0].slice(32,48),loD:X[0].slice(48,64),hiA:X[1].slice(0,16),hiB:X[1].slice(16,32),hiC:X[1].slice(32,48),hiD:X[1].slice(48,64)};for(X=0;X<S;X++){var na=T[X];sa=na.dim0.crossfilterDimensionIndex;ma=na.dim1.crossfilterDimensionIndex;qa=na.canvasX;pa=na.canvasY;ca=qa+na.panelSizeX;if(O||
!M[sa]||M[sa][0]!==qa||M[sa][1]!==ca){M[sa]=[qa,ca];ca=D;oa=ia;la=ja;da=X;var ka=na.panelSizeX,ua=na.panelSizeY;na=na.dim0.crossfilterDimensionIndex;for(var va=z?0:E?2:1,Ca=ba,Ma=[[],[]],Ua=0;64>Ua;Ua++)Ma[0][Ua]=Ua===sa?1:0,Ma[1][Ua]=Ua===ma?1:0;Ua=ca.lines.canvasOverdrag;var eb=ca.domain,fb=ca.canvasWidth,nb=ca.canvasHeight,cb=ca.deselectedLines.color;ca=k.extendFlat({key:na,resolution:[fb,nb],viewBoxPos:[qa+Ua,pa],viewBoxSize:[ka,ua],i0:sa,i1:ma,dim0A:Ma[0].slice(0,16),dim0B:Ma[0].slice(16,32),
dim0C:Ma[0].slice(32,48),dim0D:Ma[0].slice(48,64),dim1A:Ma[1].slice(0,16),dim1B:Ma[1].slice(16,32),dim1C:Ma[1].slice(32,48),dim1D:Ma[1].slice(48,64),drwLayer:va,contextColor:[cb[0]/255,cb[1]/255,cb[2]/255,1>cb[3]?cb[3]:Math.max(1/255,Math.pow(1/ca.lines.color.length,1/3))],scissorX:(da===oa?0:qa+Ua)+(ca.pad.l-Ua)+ca.layoutWidth*eb.x[0],scissorWidth:(da===la?fb-qa+Ua:ka+.5)+(da===oa?qa+Ua:0),scissorY:pa+ca.pad.b+ca.layoutHeight*eb.y[0],scissorHeight:ua,viewportX:ca.pad.l-Ua+ca.layoutWidth*eb.x[0],
viewportY:ca.pad.b+ca.layoutHeight*eb.y[0],viewportWidth:fb,viewportHeight:nb},Ca);u.clearOnly=U;q(C,P,u,O?D.lines.blockLineCount:L,L,ca)}}},readPixel:function(T,O){C.read({x:T,y:O,width:1,height:1,data:v});return v},readPixels:function(T,O,U,S){var X=new Uint8Array(4*U*S);C.read({x:T,y:O,width:U,height:S,data:X});return X},destroy:function(){y.style["pointer-events"]="none";Q.destroy();H&&H.destroy();for(var T in K)K[T].destroy()},update:A}}},{"../../lib":778,"./constants":1153,glslify:439}],1158:[function(b,
N,I){N.exports=function(r,q,m,l){l||(l=Infinity);var a;for(a=0;a<q.length;a++){var h=q[a];h.visible&&(l=Math.min(l,h[m].length))}Infinity===l&&(l=0);r._length=l;for(a=0;a<q.length;a++)h=q[a],h.visible&&(h._length=l);return l}},{}],1159:[function(b,N,I){function r(U,S){return m(C.aggNums(Math.min,null,U,S),C.aggNums(Math.max,null,U,S))}function q(U){var S=U.range;return S?m(S[0],S[1]):r(U.values,U._length)}function m(U,S){if(isNaN(U)||!isFinite(U))U=0;if(isNaN(S)||!isFinite(S))S=0;U===S&&(0===U?(--U,
S+=1):(U*=.9,S*=1.1));return[U,S]}function l(U,S){return S?function(X,ba){ba=S[ba];return null===ba||void 0===ba?U(X):ba}:U}function a(U,S,X,ba,ca){var ia=q(X);return ba?A.scale.ordinal().domain(ba.map(l(A.format(X.tickformat),ca))).range(ba.map(function(ja){return U-S+(ja-ia[0])/(ia[1]-ia[0])*(2*S-U)})):A.scale.linear().domain(ia).range([U-S,S])}function h(U,S){return A.scale.linear().range([S,U-S])}function g(U,S){return A.scale.linear().domain(q(U)).range([S,1-S])}function n(U){if(U.tickvals){var S=
q(U);return A.scale.ordinal().domain(U.tickvals).range(U.tickvals.map(function(X){return(X-S[0])/(S[1]-S[0])}))}}function p(U){var S=U.map(function(ia){return ia[0]}),X=U.map(function(ia){ia=z(ia[1]);return A.rgb("rgb("+ia[0]+","+ia[1]+","+ia[2]+")")}),ba=function(ia){return function(ja){return ja[ia]}},ca=["r","g","b"].map(function(ia){return A.scale.linear().clamp(!0).domain(S).range(X.map(ba(ia)))});return function(ia){return ca.map(function(ja){return ja(ia)})}}function d(U){return U.dimensions.some(function(S){return S.brush.filterSpecified})}
function e(U,S,X){var ba=Q(S),ca=ba.trace,ia=M.convertTypedArray(ba.lineColor),ja=ca.line;S={color:z(P.deselectedLineColor)};var la=L.extractOpts(ja);ba=la.reversescale?L.flipScale(ba.cscale):ba.cscale;var da=ca.domain,oa=ca.dimensions,sa=U.width,ma=ca.labelangle,qa=ca.labelside,pa=ca.labelfont,na=ca.tickfont,ka=ca.rangefont;ca=C.extendDeepNoArrays({},ja,{color:ia.map(A.scale.linear().domain(q({values:ia,range:[la.min,la.max],_length:ca._length}))),blockLineCount:P.blockLineCount,canvasOverdrag:P.overdrag*
P.canvasPixelRatio});ia=U.margin||{l:80,r:80,t:100,b:80};ja=Math.floor(sa*(da.x[1]-da.x[0]));la=Math.floor(U.height*(da.y[1]-da.y[0]));return{key:X,colCount:oa.filter(M.isVisible).length,dimensions:oa,tickDistance:P.tickDistance,unitToColor:p(ba),lines:ca,deselectedLines:S,labelAngle:ma,labelSide:qa,labelFont:pa,tickFont:na,rangeFont:ka,layoutWidth:sa,layoutHeight:U.height,domain:da,translateX:da.x[0]*sa,translateY:U.height-da.y[1]*U.height,pad:ia,canvasWidth:ja*P.canvasPixelRatio+2*ca.canvasOverdrag,
canvasHeight:la*P.canvasPixelRatio,width:ja,height:la,canvasPixelRatio:P.canvasPixelRatio}}function f(U,S,X){var ba=X.width,ca=X.height,ia=X.dimensions,ja=X.canvasPixelRatio,la=function(qa){return ba*qa/Math.max(1,X.colCount-1)},da=P.verticalPadding/ca,oa=h(ca,P.verticalPadding),sa={key:X.key,xScale:la,model:X,inBrushDrag:!1},ma={};sa.dimensions=ia.filter(M.isVisible).map(function(qa,pa){function na($a,jb){return{val:$a,text:fb[jb]}}function ka($a,jb){return $a.val-jb.val}var ua=g(qa,da),va=ma[qa.label];
ma[qa.label]=(va||0)+1;va=qa.label+(va?"__"+va:"");var Ca=qa.constraintrange,Ma=Ca&&Ca.length;Ma&&!Array.isArray(Ca[0])&&(Ca=[Ca]);Ca=Ma?Ca.map(function($a){return $a.map(ua)}):[[-Infinity,Infinity]];var Ua=qa.values;Ua.length>qa._length&&(Ua=Ua.slice(0,qa._length));var eb=qa.tickvals;if(Array.isArray(eb)&&eb.length){var fb=qa.ticktext;Array.isArray(fb)&&fb.length?fb.length>eb.length?fb=fb.slice(0,eb.length):eb.length>fb.length&&(eb=eb.slice(0,fb.length)):fb=eb.map(A.format(qa.tickformat));for(var nb=
1;nb<eb.length;nb++)if(eb[nb]<eb[nb-1]){nb=eb.map(na).sort(ka);for(var cb=0;cb<eb.length;cb++)eb[cb]=nb[cb].val,fb[cb]=nb[cb].text;break}}else eb=void 0;Ua=M.convertTypedArray(Ua);return{key:va,label:qa.label,tickFormat:qa.tickformat,tickvals:eb,ticktext:fb,ordinal:M.isOrdinal(qa),multiselect:qa.multiselect,xIndex:pa,crossfilterDimensionIndex:pa,visibleIndex:qa._index,height:ca,values:Ua,paddedUnitValues:Ua.map(ua),unitTickvals:eb&&eb.map(ua),xScale:la,x:la(pa),canvasX:la(pa)*ja,unitToPaddedPx:oa,
domainScale:a(ca,P.verticalPadding,qa,eb,fb),ordinalScale:n(qa),parent:sa,model:X,brush:T.makeBrush(U,Ma,Ca,function(){U.linePickActive(!1)},function(){sa.focusLayer&&sa.focusLayer.render(sa.panels,!0);var $a=d(sa);!U.contextShown()&&$a?(sa.contextLayer&&sa.contextLayer.render(sa.panels,!0),U.contextShown(!0)):U.contextShown()&&!$a&&(sa.contextLayer&&sa.contextLayer.render(sa.panels,!0,!0),U.contextShown(!1))},function($a){sa.focusLayer.render(sa.panels,!0);sa.pickLayer&&sa.pickLayer.render(sa.panels,
!0);U.linePickActive(!0);if(S&&S.filterChanged){var jb=ua.invert;$a=$a.map(function(pb){return pb.map(jb).sort(C.sorterAsc)}).sort(function(pb,xa){return pb[0]-xa[0]});S.filterChanged(sa.key,qa._index,$a)}})}});return sa}function k(U){U.classed(P.cn.axisExtentText,!0).attr("text-anchor","middle").style("cursor","default")}function t(){var U=!0,S=!1;return{linePickActive:function(X){return arguments.length?U=!!X:U},contextShown:function(X){return arguments.length?S=!!X:S}}}function v(U,S){var X=U*
Math.PI/180;return{dir:"top"===S?1:-1,dx:Math.sin(X),dy:Math.cos(X),degrees:U}}function w(U,S){var X=S.panels||(S.panels=[]);U=U.data();for(var ba=0;ba<U.length-1;ba++){var ca=X[ba]||(X[ba]={}),ia=U[ba],ja=U[ba+1];ca.dim0=ia;ca.dim1=ja;ca.canvasX=ia.canvasX;ca.panelSizeX=ja.canvasX-ia.canvasX;ca.panelSizeY=S.model.canvasHeight;ca.y=0;ca.canvasY=0}}function y(U){for(var S=0;S<U.length;S++)for(var X=0;X<U[S].length;X++)for(var ba=U[S][X].trace,ca=ba.dimensions,ia=0;ia<ca.length;ia++){var ja=ca[ia].values,
la=ca[ia]._ax;la&&(la.range=la.range?m(la.range[0],la.range[1]):r(ja,ba._length),la.dtick||(la.dtick=.01*(Math.abs(la.range[1]-la.range[0])||1)),la.tickformat=ca[ia].tickformat,E.calcTicks(la),la.cleanRange())}}function B(U,S){if(U.ordinal)return"";var X=U.domainScale.domain();return E.tickText(U.model.dimensions[U.visibleIndex]._ax,X[S?X.length-1:0],!1).text}var A=b("d3"),z=b("color-rgba"),E=b("../../plots/cartesian/axes"),C=b("../../lib"),u=C.strRotate,D=C.strTranslate,G=b("../../lib/svg_text_utils"),
J=b("../../components/drawing"),L=b("../../components/colorscale");I=b("../../lib/gup");var K=I.keyFun,H=I.repeat,Q=I.unwrap,M=b("./helpers"),P=b("./constants"),T=b("./axisbrush"),O=b("./lines");N.exports=function(U,S,X,ba){var ca=U._fullLayout,ia=ca._toppaper;ca=ca._glcontainer;y(S);var ja=t(),la=S.filter(function(ma){return Q(ma).trace.visible}).map(e.bind(0,X)).map(f.bind(0,ja,ba));ca.each(function(ma,qa){return C.extendFlat(ma,la[qa])});S=ca.selectAll(".gl-canvas").each(function(ma){ma.viewModel=
la[0];ma.model=ma.viewModel?ma.viewModel.model:null});var da=null;S.filter(function(ma){return ma.pick}).style("pointer-events","auto").on("mousemove",function(ma){if(ja.linePickActive()&&ma.lineLayer&&ba&&ba.hover){var qa=A.event,pa=this.width,na=this.height,ka=A.mouse(this),ua=ka[0];ka=ka[1];0>ua||0>ka||ua>=pa||ka>=na||(na=ma.lineLayer.readPixel(ua,na-1-ka),na=(pa=0!==na[3])?na[2]+256*(na[1]+256*na[0]):null,ma={x:ua,y:ka,clientX:qa.clientX,clientY:qa.clientY,dataIndex:ma.model.key,curveNumber:na},
na!==da&&(pa?ba.hover(ma):ba.unhover&&ba.unhover(ma),da=na))}});S.style("opacity",function(ma){return ma.pick?0:1});ia.style("background","rgba(255, 255, 255, 0)");ia=ia.selectAll("."+P.cn.parcoords).data(la,K);ia.exit().remove();ia.enter().append("g").classed(P.cn.parcoords,!0).style("shape-rendering","crispEdges").style("pointer-events","none");ia.attr("transform",function(ma){return D(ma.model.translateX,ma.model.translateY)});ia=ia.selectAll("."+P.cn.parcoordsControlView).data(H,K);ia.enter().append("g").classed(P.cn.parcoordsControlView,
!0);ia.attr("transform",function(ma){return D(ma.model.pad.l,ma.model.pad.t)});var oa=ia.selectAll("."+P.cn.yAxis).data(function(ma){return ma.dimensions},K);oa.enter().append("g").classed(P.cn.yAxis,!0);ia.each(function(ma){w(oa,ma)});S.each(function(ma){if(ma.viewModel){!ma.lineLayer||ba?ma.lineLayer=O(this,ma):ma.lineLayer.update(ma);if(ma.key||0===ma.key)ma.viewModel[ma.key]=ma.lineLayer;ma.lineLayer.render(ma.viewModel.panels,!ma.context||ba)}});oa.attr("transform",function(ma){return D(ma.xScale(ma.xIndex),
0)});oa.call(A.behavior.drag().origin(function(ma){return ma}).on("drag",function(ma){var qa=ma.parent;ja.linePickActive(!1);ma.x=Math.max(-P.overdrag,Math.min(ma.model.width+P.overdrag,A.event.x));ma.canvasX=ma.x*ma.model.canvasPixelRatio;oa.sort(function(pa,na){return pa.x-na.x}).each(function(pa,na){pa.xIndex=na;pa.x=ma===pa?pa.x:pa.xScale(pa.xIndex);pa.canvasX=pa.x*pa.model.canvasPixelRatio});w(oa,qa);oa.filter(function(pa){return 0!==Math.abs(ma.xIndex-pa.xIndex)}).attr("transform",function(pa){return D(pa.xScale(pa.xIndex),
0)});A.select(this).attr("transform",D(ma.x,0));oa.each(function(pa,na,ka){ka===ma.parent.key&&(qa.dimensions[na]=pa)});qa.contextLayer&&qa.contextLayer.render(qa.panels,!1,!d(qa));qa.focusLayer.render&&qa.focusLayer.render(qa.panels)}).on("dragend",function(ma){var qa=ma.parent;ma.x=ma.xScale(ma.xIndex);ma.canvasX=ma.x*ma.model.canvasPixelRatio;w(oa,qa);A.select(this).attr("transform",function(pa){return D(pa.x,0)});qa.contextLayer&&qa.contextLayer.render(qa.panels,!1,!d(qa));qa.focusLayer&&qa.focusLayer.render(qa.panels);
qa.pickLayer&&qa.pickLayer.render(qa.panels,!0);ja.linePickActive(!0);ba&&ba.axesMoved&&ba.axesMoved(qa.key,qa.dimensions.map(function(pa){return pa.crossfilterDimensionIndex}))}));oa.exit().remove();ia=oa.selectAll("."+P.cn.axisOverlays).data(H,K);ia.enter().append("g").classed(P.cn.axisOverlays,!0);ia.selectAll("."+P.cn.axis).remove();var sa=ia.selectAll("."+P.cn.axis).data(H,K);sa.enter().append("g").classed(P.cn.axis,!0);sa.each(function(ma){var qa=ma.model.height/ma.model.tickDistance,pa=ma.domainScale,
na=pa.domain();A.select(this).call(A.svg.axis().orient("left").tickSize(4).outerTickSize(2).ticks(qa,ma.tickFormat).tickValues(ma.ordinal?na:null).tickFormat(function(ka){return M.isOrdinal(ma)?ka:E.tickText(ma.model.dimensions[ma.visibleIndex]._ax,ka,!1).text}).scale(pa));J.font(sa.selectAll("text"),ma.model.tickFont)});sa.selectAll(".domain, .tick\x3eline").attr("fill","none").attr("stroke","black").attr("stroke-opacity",.25).attr("stroke-width","1px");sa.selectAll("text").style("text-shadow","1px 1px 1px #fff, -1px -1px 1px #fff, 1px -1px 1px #fff, -1px 1px 1px #fff").style("cursor",
"default");S=ia.selectAll("."+P.cn.axisHeading).data(H,K);S.enter().append("g").classed(P.cn.axisHeading,!0);S=S.selectAll("."+P.cn.axisTitle).data(H,K);S.enter().append("text").classed(P.cn.axisTitle,!0).attr("text-anchor","middle").style("cursor","ew-resize").style("pointer-events","auto");S.text(function(ma){return ma.label}).each(function(ma){var qa=A.select(this);J.font(qa,ma.model.labelFont);G.convertToTspans(qa,U)}).attr("transform",function(ma){var qa=v(ma.model.labelAngle,ma.model.labelSide),
pa=P.axisTitleOffset;return(0<qa.dir?"":D(0,2*pa+ma.model.height))+u(qa.degrees)+D(-pa*qa.dx,-pa*qa.dy)}).attr("text-anchor",function(ma){ma=v(ma.model.labelAngle,ma.model.labelSide);return 2*Math.abs(ma.dx)>Math.abs(ma.dy)?0>ma.dir*ma.dx?"start":"end":"middle"});S=ia.selectAll("."+P.cn.axisExtent).data(H,K);S.enter().append("g").classed(P.cn.axisExtent,!0);X=S.selectAll("."+P.cn.axisExtentTop).data(H,K);X.enter().append("g").classed(P.cn.axisExtentTop,!0);X.attr("transform",D(0,-P.axisExtentOffset));
X=X.selectAll("."+P.cn.axisExtentTopText).data(H,K);X.enter().append("text").classed(P.cn.axisExtentTopText,!0).call(k);X.text(function(ma){return B(ma,!0)}).each(function(ma){J.font(A.select(this),ma.model.rangeFont)});S=S.selectAll("."+P.cn.axisExtentBottom).data(H,K);S.enter().append("g").classed(P.cn.axisExtentBottom,!0);S.attr("transform",function(ma){return D(0,ma.model.height+P.axisExtentOffset)});S=S.selectAll("."+P.cn.axisExtentBottomText).data(H,K);S.enter().append("text").classed(P.cn.axisExtentBottomText,
!0).attr("dy","0.75em").call(k);S.text(function(ma){return B(ma,!1)}).each(function(ma){J.font(A.select(this),ma.model.rangeFont)});T.ensureAxisBrush(ia)}},{"../../components/colorscale":655,"../../components/drawing":665,"../../lib":778,"../../lib/gup":775,"../../lib/svg_text_utils":803,"../../plots/cartesian/axes":828,"./axisbrush":1150,"./constants":1153,"./helpers":1155,"./lines":1157,"color-rgba":127,d3:169}],1160:[function(b,N,I){function r(h,g,n){n=g.indexOf(n);h=h.indexOf(n);-1===h&&(h+=g.length);
return h}function q(h,g){return function(n,p){return r(h,g,n)-r(h,g,p)}}var m=b("./parcoords"),l=b("../../lib/prepare_regl"),a=b("./helpers").isVisible;N.exports=function(h,g){var n=h._fullLayout;if(l(h)){var p={},d={},e={},f={},k=n._size;g.forEach(function(t,v){t=t[0].trace;e[v]=t.index;t=f[v]=t._fullInput.index;p[v]=h.data[t].dimensions;d[v]=h.data[t].dimensions.slice()});m(h,g,{width:k.w,height:k.h,margin:{t:k.t,r:k.r,b:k.b,l:k.l}},{filterChanged:function(t,v,w){var y=d[t][v];w=w.map(function(z){return z.slice()});
var B="dimensions["+v+"].constraintrange",A=n._tracePreGUI[h._fullData[e[t]]._fullInput.uid];void 0===A[B]&&(A[B]=y.constraintrange||null);v=h._fullData[e[t]].dimensions[v];w.length?(1===w.length&&(w=w[0]),y.constraintrange=w,v.constraintrange=w.slice(),w=[w]):(delete y.constraintrange,delete v.constraintrange,w=null);y={};y[B]=w;h.emit("plotly_restyle",[y,[f[t]]])},hover:function(t){h.emit("plotly_hover",t)},unhover:function(t){h.emit("plotly_unhover",t)},axesMoved:function(t,v){v=q(v,d[t].filter(a));
p[t].sort(v);d[t].filter(function(w){return!a(w)}).sort(function(w){return d[t].indexOf(w)}).forEach(function(w){p[t].splice(p[t].indexOf(w),1);p[t].splice(d[t].indexOf(w),0,w)});h.emit("plotly_restyle",[{dimensions:[p[t]]},[f[t]]])}})}}},{"../../lib/prepare_regl":791,"./helpers":1155,"./parcoords":1159}],1161:[function(b,N,I){I=b("../../plots/attributes");var r=b("../../plots/domain").attributes,q=b("../../plots/font_attributes"),m=b("../../components/color/attributes"),l=b("../../plots/template_attributes").hovertemplateAttrs,
a=b("../../plots/template_attributes").texttemplateAttrs;b=b("../../lib/extend").extendFlat;q=q({editType:"plot",arrayOk:!0,colorEditType:"plot"});N.exports={labels:{valType:"data_array",editType:"calc"},label0:{valType:"number",dflt:0,editType:"calc"},dlabel:{valType:"number",dflt:1,editType:"calc"},values:{valType:"data_array",editType:"calc"},marker:{colors:{valType:"data_array",editType:"calc"},line:{color:{valType:"color",dflt:m.defaultLine,arrayOk:!0,editType:"style"},width:{valType:"number",
min:0,dflt:0,arrayOk:!0,editType:"style"},editType:"calc"},editType:"calc"},text:{valType:"data_array",editType:"plot"},hovertext:{valType:"string",dflt:"",arrayOk:!0,editType:"style"},scalegroup:{valType:"string",dflt:"",editType:"calc"},textinfo:{valType:"flaglist",flags:["label","text","value","percent"],extras:["none"],editType:"calc"},hoverinfo:b({},I.hoverinfo,{flags:["label","text","value","percent","name"]}),hovertemplate:l({},{keys:["label","color","value","percent","text"]}),texttemplate:a({editType:"plot"},
{keys:["label","color","value","percent","text"]}),textposition:{valType:"enumerated",values:["inside","outside","auto","none"],dflt:"auto",arrayOk:!0,editType:"plot"},textfont:b({},q,{}),insidetextorientation:{valType:"enumerated",values:["horizontal","radial","tangential","auto"],dflt:"auto",editType:"plot"},insidetextfont:b({},q,{}),outsidetextfont:b({},q,{}),automargin:{valType:"boolean",dflt:!1,editType:"plot"},title:{text:{valType:"string",dflt:"",editType:"plot"},font:b({},q,{}),position:{valType:"enumerated",
values:"top left;top center;top right;middle center;bottom left;bottom center;bottom right".split(";"),editType:"plot"},editType:"plot"},domain:r({name:"pie",trace:!0,editType:"calc"}),hole:{valType:"number",min:0,max:1,dflt:0,editType:"calc"},sort:{valType:"boolean",dflt:!0,editType:"calc"},direction:{valType:"enumerated",values:["clockwise","counterclockwise"],dflt:"counterclockwise",editType:"calc"},rotation:{valType:"number",min:-360,max:360,dflt:0,editType:"calc"},pull:{valType:"number",min:0,
max:1,dflt:0,arrayOk:!0,editType:"calc"},_deprecated:{title:{valType:"string",dflt:"",editType:"calc"},titlefont:b({},q,{}),titleposition:{valType:"enumerated",values:"top left;top center;top right;middle center;bottom left;bottom center;bottom right".split(";"),editType:"calc"}}}},{"../../components/color/attributes":642,"../../lib/extend":768,"../../plots/attributes":824,"../../plots/domain":855,"../../plots/font_attributes":856,"../../plots/template_attributes":906}],1162:[function(b,N,I){var r=
b("../../plots/plots");I.name="pie";I.plot=function(q,m,l,a){r.plotBasePlot(I.name,q,m,l,a)};I.clean=function(q,m,l,a){r.cleanBasePlot(I.name,q,m,l,a)}},{"../../plots/plots":891}],1163:[function(b,N,I){function r(g){return function(n,p){if(!n)return!1;n=l(n);if(!n.isValid())return!1;n=a.addOpacity(n,n.getAlpha());g[p]||(g[p]=n);return n}}function q(g,n){var p,d=JSON.stringify(g),e=n[d];if(!e){e=g.slice();for(p=0;p<g.length;p++)e.push(l(g[p]).lighten(20).toHexString());for(p=0;p<g.length;p++)e.push(l(g[p]).darken(20).toHexString());
n[d]=e}return e}var m=b("fast-isnumeric"),l=b("tinycolor2"),a=b("../../components/color"),h={};N.exports={calc:function(g,n){var p=[],d=g._fullLayout;g=d.hiddenlabels||[];var e=n.labels,f=n.marker.colors||[],k=n.values,t=n._length,v=n._hasValues&&t,w;if(n.dlabel)for(e=Array(t),w=0;w<t;w++)e[w]=String(n.label0+w*n.dlabel);var y={};d=r(d["_"+n.type+"colormap"]);var B=0,A=!1;for(w=0;w<t;w++){if(v){var z=k[w];if(!m(z))continue;z=+z;if(0>z)continue}else z=1;var E=e[w];if(void 0===E||""===E)E=w;E=String(E);
var C=y[E];void 0===C?(y[E]=p.length,(C=-1!==g.indexOf(E))||(B+=z),p.push({v:z,label:E,color:d(f[w],E),i:w,pts:[w],hidden:C})):(A=!0,C=p[C],C.v+=z,C.pts.push(w),C.hidden||(B+=z),!1===C.color&&f[w]&&(C.color=d(f[w],E)))}("funnelarea"===n.type?A:n.sort)&&p.sort(function(u,D){return D.v-u.v});p[0]&&(p[0].vTotal=B);return p},crossTraceCalc:function(g,n){(n=(n||{}).type)||(n="pie");var p=g._fullLayout;g=g.calcdata;var d=p[n+"colorway"],e=p["_"+n+"colormap"];p["extend"+n+"colors"]&&(d=q(d,h));for(var f=
p=0;f<g.length;f++){var k=g[f];if(k[0].trace.type===n)for(var t=0;t<k.length;t++){var v=k[t];!1===v.color&&(e[v.label]?v.color=e[v.label]:(e[v.label]=v.color=d[p%d.length],p++))}}},makePullColorFn:r,generateExtendedColors:q}},{"../../components/color":643,"fast-isnumeric":241,tinycolor2:576}],1164:[function(b,N,I){function r(g,n){var p=Array.isArray(g),d=m.isArrayOrTypedArray(n);g=Math.min(p?g.length:Infinity,d?n.length:Infinity);isFinite(g)||(g=0);if(g&&d){for(var e,f=0;f<g;f++){var k=n[f];if(q(k)&&
0<k){e=!0;break}}e||(g=0)}return{hasLabels:p,hasValues:d,len:g}}var q=b("fast-isnumeric"),m=b("../../lib"),l=b("./attributes"),a=b("../../plots/domain").defaults,h=b("../bar/defaults").handleText;N.exports={handleLabelsAndValues:r,supplyDefaults:function(g,n,p,d){function e(t,v){return m.coerce(g,n,l,t,v)}p=e("labels");var f=e("values");p=r(p,f);f=p.len;n._hasLabels=p.hasLabels;n._hasValues=p.hasValues;!n._hasLabels&&n._hasValues&&(e("label0"),e("dlabel"));if(f){n._length=f;e("marker.line.width")&&
e("marker.line.color");e("marker.colors");e("scalegroup");p=e("text");f=e("texttemplate");var k;f||(k=e("textinfo",Array.isArray(p)?"text+percent":"percent"));e("hovertext");e("hovertemplate");if(f||k&&"none"!==k)k=e("textposition"),h(g,n,d,e,k,{moduleHasSelected:!1,moduleHasUnselected:!1,moduleHasConstrain:!1,moduleHasCliponaxis:!1,moduleHasTextangle:!1,moduleHasInsideanchor:!1}),(Array.isArray(k)||"auto"===k||"outside"===k)&&e("automargin"),("inside"===k||"auto"===k||Array.isArray(k))&&e("insidetextorientation");
a(n,d,e);k=e("hole");e("title.text")&&(p=e("title.position",k?"middle center":"top center"),k||"middle center"!==p||(n.title.position="top center"),m.coerceFont(e,"title.font",d.font));e("sort");e("direction");e("rotation");e("pull")}else n.visible=!1}}},{"../../lib":778,"../../plots/domain":855,"../bar/defaults":925,"./attributes":1161,"fast-isnumeric":241}],1165:[function(b,N,I){var r=b("../../components/fx/helpers").appendArrayMultiPointValues;N.exports=function(q,m){var l={curveNumber:m.index,
pointNumbers:q.pts,data:m._input,fullData:m,label:q.label,color:q.color,value:q.v,percent:q.percent,text:q.text,v:q.v};1===q.pts.length&&(l.pointNumber=l.i=q.pts[0]);r(l,m,q.pts);"funnelarea"===m.type&&(delete l.v,delete l.i);return l}},{"../../components/fx/helpers":679}],1166:[function(b,N,I){function r(m){return-1!==m.indexOf("e")?m.replace(/[.]?0+e/,"e"):-1!==m.indexOf(".")?m.replace(/[.]?0+$/,""):m}var q=b("../../lib");I.formatPiePercent=function(m,l){m=r((100*m).toPrecision(3));return q.numSeparate(m,
l)+"%"};I.formatPieValue=function(m,l){m=r(m.toPrecision(10));return q.numSeparate(m,l)};I.getFirstFilled=function(m,l){if(Array.isArray(m))for(var a=0;a<l.length;a++){var h=m[l[a]];if(h||0===h||""===h)return h}};I.castOption=function(m,l){if(Array.isArray(m))return I.getFirstFilled(m,l);if(m)return m};I.getRotationAngle=function(m){return("auto"===m?0:m)*Math.PI/180}},{"../../lib":778}],1167:[function(b,N,I){N.exports={attributes:b("./attributes"),supplyDefaults:b("./defaults").supplyDefaults,supplyLayoutDefaults:b("./layout_defaults"),
layoutAttributes:b("./layout_attributes"),calc:b("./calc").calc,crossTraceCalc:b("./calc").crossTraceCalc,plot:b("./plot").plot,style:b("./style"),styleOne:b("./style_one"),moduleType:"trace",name:"pie",basePlotModule:b("./base_plot"),categories:["pie-like","pie","showLegend"],meta:{}}},{"./attributes":1161,"./base_plot":1162,"./calc":1163,"./defaults":1164,"./layout_attributes":1168,"./layout_defaults":1169,"./plot":1170,"./style":1171,"./style_one":1172}],1168:[function(b,N,I){N.exports={hiddenlabels:{valType:"data_array",
editType:"calc"},piecolorway:{valType:"colorlist",editType:"calc"},extendpiecolors:{valType:"boolean",dflt:!0,editType:"calc"}}},{}],1169:[function(b,N,I){var r=b("../../lib"),q=b("./layout_attributes");N.exports=function(m,l){r.coerce(m,l,q,"hiddenlabels",void 0);r.coerce(m,l,q,"piecolorway",l.colorway);r.coerce(m,l,q,"extendpiecolors",void 0)}},{"../../lib":778,"./layout_attributes":1168}],1170:[function(b,N,I){function r(U,S){U.each(function(X){var ba=z.select(this);if(X.labelExtraX||X.labelExtraY){var ca=
ba.select("g.slicetext text");X.transform.targetX+=X.labelExtraX;X.transform.targetY+=X.labelExtraY;ca.attr("transform",G.getTextTransform(X.transform));ca=X.cxFinal+X.pxmid[0];var ia="M"+ca+","+(X.cyFinal+X.pxmid[1]),ja=(X.yLabelMax-X.yLabelMin)*(0>X.pxmid[0]?-1:1)/4;if(X.labelExtraX){var la=X.labelExtraX*X.pxmid[1]/X.pxmid[0],da=X.yLabelMid+X.labelExtraY-(X.cyFinal+X.pxmid[1]);ia=Math.abs(la)>Math.abs(da)?ia+("l"+da*X.pxmid[0]/X.pxmid[1]+","+da+"H"+(ca+X.labelExtraX+ja)):ia+("l"+X.labelExtraX+","+
la+"v"+(da-la)+"h"+ja)}else ia+="V"+(X.yLabelMid+X.labelExtraY)+"h"+ja;G.ensureSingle(ba,"path","textline").call(u.stroke,S.outsidetextfont.color).attr({"stroke-width":Math.min(2,S.outsidetextfont.size/8),d:ia,fill:"none"})}else ba.select("path.textline").remove()})}function q(U,S,X){var ba=X[0],ca=ba.trace,ia=ba.cx,ja=ba.cy;"_hasHoverLabel"in ca||(ca._hasHoverLabel=!1);"_hasHoverEvent"in ca||(ca._hasHoverEvent=!1);U.on("mouseover",function(la){var da=S._fullLayout,oa=S._fullData[ca.index];if(!S._dragging&&
!1!==da.hovermode){var sa=oa.hoverinfo;Array.isArray(sa)&&(sa=C.castHoverinfo({hoverinfo:[P.castOption(sa,la.pts)],_module:ca._module},da,0));"all"===sa&&(sa="label+text+value+percent+name");if(oa.hovertemplate||"none"!==sa&&"skip"!==sa&&sa){var ma=la.rInscribed||0,qa=ia+la.pxmid[0]*(1-ma),pa=ja+la.pxmid[1]*(1-ma),na=da.separators,ka=[];sa&&-1!==sa.indexOf("label")&&ka.push(la.label);la.text=P.castOption(oa.hovertext||oa.text,la.pts);if(sa&&-1!==sa.indexOf("text")){var ua=la.text;G.isValidTextValue(ua)&&
ka.push(ua)}la.value=la.v;la.valueLabel=P.formatPieValue(la.v,na);sa&&-1!==sa.indexOf("value")&&ka.push(la.valueLabel);la.percent=la.v/ba.vTotal;la.percentLabel=P.formatPiePercent(la.percent,na);sa&&-1!==sa.indexOf("percent")&&ka.push(la.percentLabel);na=oa.hoverlabel;ua=na.font;C.loneHover({trace:ca,x0:qa-ma*ba.r,x1:qa+ma*ba.r,y:pa,text:ka.join("\x3cbr\x3e"),name:oa.hovertemplate||-1!==sa.indexOf("name")?oa.name:void 0,idealAlign:0>la.pxmid[0]?"left":"right",color:P.castOption(na.bgcolor,la.pts)||
la.color,borderColor:P.castOption(na.bordercolor,la.pts),fontFamily:P.castOption(ua.family,la.pts),fontSize:P.castOption(ua.size,la.pts),fontColor:P.castOption(ua.color,la.pts),nameLength:P.castOption(na.namelength,la.pts),textAlign:P.castOption(na.align,la.pts),hovertemplate:P.castOption(oa.hovertemplate,la.pts),hovertemplateLabels:la,eventData:[T(la,oa)]},{container:da._hoverlayer.node(),outerContainer:da._paper.node(),gd:S});ca._hasHoverLabel=!0}ca._hasHoverEvent=!0;S.emit("plotly_hover",{points:[T(la,
oa)],event:z.event})}});U.on("mouseout",function(la){var da=S._fullLayout,oa=S._fullData[ca.index],sa=z.select(this).datum();ca._hasHoverEvent&&(la.originalEvent=z.event,S.emit("plotly_unhover",{points:[T(sa,oa)],event:z.event}),ca._hasHoverEvent=!1);ca._hasHoverLabel&&(C.loneUnhover(da._hoverlayer.node()),ca._hasHoverLabel=!1)});U.on("click",function(la){var da=S._fullLayout;S._dragging||!1===da.hovermode||(S._hoverdata=[T(la,S._fullData[ca.index])],C.click(S,z.event))})}function m(U,S,X){var ba=
P.castOption(U.outsidetextfont.color,S.pts)||P.castOption(U.textfont.color,S.pts)||X.color,ca=P.castOption(U.outsidetextfont.family,S.pts)||P.castOption(U.textfont.family,S.pts)||X.family;U=P.castOption(U.outsidetextfont.size,S.pts)||P.castOption(U.textfont.size,S.pts)||X.size;return{color:ba,family:ca,size:U}}function l(U,S,X){var ba=P.castOption(U.insidetextfont.color,S.pts);!ba&&U._input.textfont&&(ba=P.castOption(U._input.textfont.color,S.pts));var ca=P.castOption(U.insidetextfont.family,S.pts)||
P.castOption(U.textfont.family,S.pts)||X.family;U=P.castOption(U.insidetextfont.size,S.pts)||P.castOption(U.textfont.size,S.pts)||X.size;return{color:ba||u.contrast(S.color),family:ca,size:U}}function a(U,S){for(var X,ba,ca=0;ca<U.length;ca++)if(X=U[ca][0],ba=X.trace,ba.title.text){var ia=ba.title.text;ba._meta&&(ia=G.templateString(ia,ba._meta));ba=D.tester.append("text").attr("data-notex",1).text(ia).call(D.font,ba.title.font).call(K.convertToTspans,S);ia=D.bBox(ba.node(),!0);X.titleBox={width:ia.width,
height:ia.height};ba.remove()}}function h(U,S,X){var ba=X.r||S.rpx1,ca=S.rInscribed;if(S.startangle===S.stopangle)return{rCenter:1-ca,scale:0,rotate:0,textPosAngle:0};var ia=S.ring,ja=1===ia&&Math.abs(S.startangle-S.stopangle)===2*Math.PI,la=S.halfangle,da=S.midangle;X=X.trace.insidetextorientation;var oa="horizontal"===X,sa="tangential"===X,ma="radial"===X;X="auto"===X;var qa=[];if(!X){var pa=function(ua,va){var Ca=S.startangle,Ma=S.stopangle;if(Ca>ua&&ua>Ma||Ca<ua&&ua<Ma)Ca=Math.abs(ua-S.startangle),
Ma=Math.abs(ua-S.stopangle),Ca=Ca<Ma?Ca:Ma,ka="tan"===va?n(U,ba,ia,Ca,0):g(U,ba,ia,Ca,Math.PI/2),ka.textPosAngle=ua,qa.push(ka)},na;if(oa||sa){for(na=4;-4<=na;na-=2)pa(Math.PI*na,"tan");for(na=4;-4<=na;na-=2)pa(Math.PI*(na+1),"tan")}if(oa||ma){for(na=4;-4<=na;na-=2)pa(Math.PI*(na+1.5),"rad");for(na=4;-4<=na;na-=2)pa(Math.PI*(na+.5),"rad")}}if(ja||X||oa){var ka={scale:ca*ba*2/Math.sqrt(U.width*U.width+U.height*U.height),rCenter:1-ca,rotate:0};ka.textPosAngle=(S.startangle+S.stopangle)/2;if(1<=ka.scale)return ka;
qa.push(ka)}if(X||ma)ka=g(U,ba,ia,la,da),ka.textPosAngle=(S.startangle+S.stopangle)/2,qa.push(ka);if(X||sa)ka=n(U,ba,ia,la,da),ka.textPosAngle=(S.startangle+S.stopangle)/2,qa.push(ka);for(la=ja=ca=0;la<qa.length&&(da=qa[la].scale,ja<da&&(ja=da,ca=la),X||!(1<=ja));la++);return qa[ca]}function g(U,S,X,ba,ca){S=Math.max(0,S-2*M);var ia=U.width/U.height;X=p(ia,ba,S,X);S=X/S;return{scale:2*X/U.height,rCenter:Math.cos(S)-ia*S,rotate:(180/Math.PI*ca+720)%180-90}}function n(U,S,X,ba,ca){S=Math.max(0,S-2*
M);var ia=U.height/U.width;X=p(ia,ba,S,X);S=X/S;return{scale:2*X/U.width,rCenter:Math.cos(S)-ia*S,rotate:(180/Math.PI*(ca+Math.PI/2)+720)%180-90}}function p(U,S,X,ba){S=U+1/(2*Math.tan(S));return X*Math.min(1/(Math.sqrt(S*S+.5)+S),ba/(Math.sqrt(U*U+ba/2)+U))}function d(U,S){var X=S.pxmid[0];S=S.pxmid[1];var ba=U.width/2;U=U.height/2;0>X&&(ba*=-1);0>S&&(U*=-1);return{scale:1,rCenter:1,rotate:0,x:ba+Math.abs(U)*(0<ba?1:-1)/2,y:U/(1+X*X/(S*S)),outside:!0}}function e(U,S){var X=U.trace,ba=U.cx,ca=U.cy,
ia=0;var ja=0+X.title.font.size;var la=k(X);-1!==X.title.position.indexOf("top")?(ca-=(1+la)*U.r,ja-=U.titleBox.height):-1!==X.title.position.indexOf("bottom")&&(ca+=(1+la)*U.r);var da=U.trace.aspectratio;da=U.r/(void 0===da?1:da);var oa=S.w*(X.domain.x[1]-X.domain.x[0])/2;-1!==X.title.position.indexOf("left")?(oa+=da,ba-=(1+la)*da,ia+=U.titleBox.width/2):-1!==X.title.position.indexOf("center")?oa*=2:-1!==X.title.position.indexOf("right")&&(oa+=da,ba+=(1+la)*da,ia-=U.titleBox.width/2);la=oa/U.titleBox.width;
U=f(U,S)/U.titleBox.height;return{x:ba,y:ca,scale:Math.min(la,U),tx:ia,ty:ja}}function f(U,S){var X=U.trace;return Math.min(U.titleBox.height,S.h*(X.domain.y[1]-X.domain.y[0])/2)}function k(U){var S=U.pull;if(!S)return 0;var X;if(Array.isArray(S))for(X=S=0;X<U.pull.length;X++)U.pull[X]>S&&(S=U.pull[X]);return S}function t(U,S){function X(va,Ca){return va.pxmid[1]-Ca.pxmid[1]}function ba(va,Ca){return Ca.pxmid[1]-va.pxmid[1]}function ca(va,Ca){Ca||(Ca={});var Ma=Ca.labelExtraY+(ja?Ca.yLabelMax:Ca.yLabelMin);
Ca=ja?va.yLabelMin:va.yLabelMax;var Ua=ja?va.yLabelMax:va.yLabelMin,eb=va.cyFinal+oa(va.px0[1],va.px1[1]),fb=Ma-Ca;0<fb*sa&&(va.labelExtraY=fb);if(Array.isArray(S.pull))for(Ma=0;Ma<ka.length;Ma++){var nb=ka[Ma];nb===va||(P.castOption(S.pull,va.pts)||0)>=(P.castOption(S.pull,nb.pts)||0)||(0<(va.pxmid[1]-nb.pxmid[1])*sa?(fb=nb.cyFinal+oa(nb.px0[1],nb.px1[1]),fb=fb-Ca-va.labelExtraY,0<fb*sa&&(va.labelExtraY+=fb)):0<(Ua+va.labelExtraY-eb)*sa&&(fb=3*qa*Math.abs(Ma-ka.indexOf(va)),nb=nb.cxFinal+ma(nb.px0[0],
nb.px1[0]),fb=nb+fb-(va.cxFinal+va.pxmid[0])-va.labelExtraX,0<fb*qa&&(va.labelExtraX+=fb)))}}var ia,ja,la;for(ja=0;2>ja;ja++){var da=ja?X:ba;var oa=ja?Math.max:Math.min;var sa=ja?1:-1;for(ia=0;2>ia;ia++){var ma=ia?Math.max:Math.min;var qa=ia?1:-1;var pa=U[ja][ia];pa.sort(da);var na=U[1-ja][ia];var ka=na.concat(pa);var ua=[];for(la=0;la<pa.length;la++)void 0!==pa[la].yLabelMid&&ua.push(pa[la]);pa=!1;for(la=0;ja&&la<na.length;la++)if(void 0!==na[la].yLabelMid){pa=na[la];break}for(la=0;la<ua.length;la++)na=
la&&ua[la-1],pa&&!la&&(na=pa),ca(ua[la],na)}}}function v(U,S){for(var X=[],ba=0;ba<U.length;ba++){var ca=U[ba][0],ia=ca.trace,ja=ia.domain,la=S.w*(ja.x[1]-ja.x[0]);ja=S.h*(ja.y[1]-ja.y[0]);ia.title.text&&"middle center"!==ia.title.position&&(ja-=f(ca,S));la/=2;var da=ja/2;"funnelarea"!==ia.type||ia.scalegroup||(da/=ia.aspectratio);ca.r=Math.min(la,da)/(1+k(ia));ca.cx=S.l+S.w*(ia.domain.x[1]+ia.domain.x[0])/2;ca.cy=S.t+S.h*(1-ia.domain.y[0])-ja/2;ia.title.text&&-1!==ia.title.position.indexOf("bottom")&&
(ca.cy-=f(ca,S));ia.scalegroup&&-1===X.indexOf(ia.scalegroup)&&X.push(ia.scalegroup)}for(ia=0;ia<X.length;ia++){ja=Infinity;la=X[ia];for(ba=0;ba<U.length;ba++)if(S=U[ba][0],ca=S.trace,ca.scalegroup===la){if("pie"===ca.type)var oa=S.r*S.r;else"funnelarea"===ca.type&&(1<ca.aspectratio?(oa=S.r,da=oa/ca.aspectratio):(da=S.r,oa=da*ca.aspectratio),oa*=(1+ca.baseratio)/2,oa*=da);ja=Math.min(ja,oa/S.vTotal)}for(ba=0;ba<U.length;ba++)S=U[ba][0],ca=S.trace,ca.scalegroup===la&&(da=ja*S.vTotal,"funnelarea"===
ca.type&&(da/=(1+ca.baseratio)/2,da/=ca.aspectratio),S.r=Math.sqrt(da))}}function w(U){var S=U[0],X=S.r,ba=S.trace,ca=P.getRotationAngle(ba.rotation),ia=2*Math.PI/S.vTotal,ja="px0",la="px1",da;if("counterclockwise"===ba.direction){for(da=0;da<U.length&&U[da].hidden;da++);if(da===U.length)return;ca+=ia*U[da].v;ia*=-1;ja="px1";la="px0"}var oa=y(X,ca);for(da=0;da<U.length;da++){var sa=U[da];if(!sa.hidden){sa[ja]=oa;sa.startangle=ca;ca+=ia*sa.v/2;sa.pxmid=y(X,ca);sa.midangle=ca;ca+=ia*sa.v/2;oa=y(X,ca);
sa.stopangle=ca;sa[la]=oa;sa.largeArc=sa.v>S.vTotal/2?1:0;sa.halfangle=Math.PI*Math.min(sa.v/S.vTotal,.5);sa.ring=1-ba.hole;var ma=sa;sa=sa.v!==S.vTotal||S.trace.hole?Math.min(1/(1+1/Math.sin(sa.halfangle)),sa.ring/2):1;ma.rInscribed=sa}}}function y(U,S){return[U*Math.sin(S),-U*Math.cos(S)]}function B(U,S,X){var ba=U._fullLayout,ca=X.trace,ia=ca.texttemplate,ja=ca.textinfo;if(!ia&&ja&&"none"!==ja){var la=ja.split("+"),da=-1!==la.indexOf("label"),oa=-1!==la.indexOf("text");ja=-1!==la.indexOf("value");
la=-1!==la.indexOf("percent");var sa=ba.separators;da=da?[S.label]:[];oa&&(oa=P.getFirstFilled(ca.text,S.pts),O(oa)&&da.push(oa));ja&&da.push(P.formatPieValue(S.v,sa));la&&da.push(P.formatPiePercent(S.v/X.vTotal,sa));S.text=da.join("\x3cbr\x3e")}if(ia)if(ia=G.castOption(ca,S.i,"texttemplate")){X={label:S.label,value:S.v,valueLabel:P.formatPieValue(S.v,ba.separators),percent:S.v/X.vTotal,percentLabel:P.formatPiePercent(S.v/X.vTotal,ba.separators),color:S.color,text:S.text,customdata:G.castOption(ca,
S.i,"customdata")};ba=P.getFirstFilled(ca.text,S.pts);if(O(ba)||""===ba)X.text=ba;S.text=G.texttemplateString(ia,X,U._fullLayout._d3locale,X,ca._meta||{})}else S.text=""}function A(U,S){var X=U.rotate*Math.PI/180,ba=Math.cos(X);X=Math.sin(X);var ca=(S.left+S.right)/2;S=(S.top+S.bottom)/2;U.textX=ca*ba-S*X;U.textY=ca*X+S*ba;U.noCenter=!0}var z=b("d3"),E=b("../../plots/plots"),C=b("../../components/fx"),u=b("../../components/color"),D=b("../../components/drawing"),G=b("../../lib"),J=G.strScale,L=G.strTranslate,
K=b("../../lib/svg_text_utils");I=b("../bar/uniform_text");var H=I.recordMinTextSize,Q=I.clearMinTextSize,M=b("../bar/constants").TEXTPAD,P=b("./helpers"),T=b("./event_data"),O=b("../../lib").isValidTextValue;N.exports={plot:function(U,S){var X=U._fullLayout,ba=X._size;Q("pie",X);a(S,U);v(S,ba);var ca=G.makeTraceGroups(X._pielayer,S,"trace").each(function(ia){var ja=z.select(this),la=ia[0],da=la.trace;w(ia);ja.attr("stroke-linejoin","round");ja.each(function(){var oa=z.select(this).selectAll("g.slice").data(ia);
oa.enter().append("g").classed("slice",!0);oa.exit().remove();var sa=[[[],[]],[[],[]]],ma=!1;oa.each(function(ka,ua){function va(jb,pb,xa,Ea){return"a"+Ea*la.r+","+Ea*la.r+" 0 "+ka.largeArc+(xa?" 1 ":" 0 ")+Ea*(pb[0]-jb[0])+","+Ea*(pb[1]-jb[1])}if(ka.hidden)z.select(this).selectAll("path,g").remove();else{ka.pointNumber=ka.i;ka.curveNumber=da.index;sa[0>ka.pxmid[1]?0:1][0>ka.pxmid[0]?0:1].push(ka);var Ca=la.cx,Ma=la.cy,Ua=z.select(this),eb=Ua.selectAll("path.surface").data([ka]);eb.enter().append("path").classed("surface",
!0).style({"pointer-events":"all"});Ua.call(q,U,ia);if(da.pull){var fb=+P.castOption(da.pull,ka.pts)||0;0<fb&&(Ca+=fb*ka.pxmid[0],Ma+=fb*ka.pxmid[1])}ka.cxFinal=Ca;ka.cyFinal=Ma;fb=da.hole;if(ka.v===la.vTotal){var nb="M"+(Ca+ka.px0[0])+","+(Ma+ka.px0[1])+va(ka.px0,ka.pxmid,!0,1)+va(ka.pxmid,ka.px0,!0,1)+"Z";fb?eb.attr("d","M"+(Ca+fb*ka.px0[0])+","+(Ma+fb*ka.px0[1])+va(ka.px0,ka.pxmid,!1,fb)+va(ka.pxmid,ka.px0,!1,fb)+"Z"+nb):eb.attr("d",nb)}else if(nb=va(ka.px0,ka.px1,!0,1),fb){var cb=1-fb;eb.attr("d",
"M"+(Ca+fb*ka.px1[0])+","+(Ma+fb*ka.px1[1])+va(ka.px1,ka.px0,!1,fb)+"l"+cb*ka.px0[0]+","+cb*ka.px0[1]+nb+"Z")}else eb.attr("d","M"+Ca+","+Ma+"l"+ka.px0[0]+","+ka.px0[1]+nb+"Z");B(U,ka,la);var $a=P.castOption(da.textposition,ka.pts);Ua=Ua.selectAll("g.slicetext").data(ka.text&&"none"!==$a?[0]:[]);Ua.enter().append("g").classed("slicetext",!0);Ua.exit().remove();Ua.each(function(){var jb=G.ensureSingle(z.select(this),"text","",function(Oa){Oa.attr("data-notex",1)}),pb=G.ensureUniformFontSize(U,"outside"===
$a?m(da,ka,X.font):l(da,ka,X.font));jb.text(ka.text).attr({"class":"slicetext",transform:"","text-anchor":"middle"}).call(D.font,pb).call(K.convertToTspans,U);var xa=D.bBox(jb.node());if("outside"===$a)var Ea=d(xa,ka);else Ea=h(xa,ka,la),"auto"===$a&&1>Ea.scale&&(xa=G.ensureUniformFontSize(U,da.outsidetextfont),jb.call(D.font,xa),xa=D.bBox(jb.node()),Ea=d(xa,ka));var Ia=Ea.textPosAngle;Ia=void 0===Ia?ka.pxmid:y(la.r,Ia);Ea.targetX=Ca+Ia[0]*Ea.rCenter+(Ea.x||0);Ea.targetY=Ma+Ia[1]*Ea.rCenter+(Ea.y||
0);A(Ea,xa);Ea.outside&&(Ia=Ea.targetY,ka.yLabelMin=Ia-xa.height/2,ka.yLabelMid=Ia,ka.yLabelMax=Ia+xa.height/2,ka.labelExtraX=0,ka.labelExtraY=0,ma=!0);Ea.fontSize=pb.size;H(da.type,Ea,X);ia[ua].transform=Ea;jb.attr("transform",G.getTextTransform(Ea))})}});var qa=z.select(this).selectAll("g.titletext").data(da.title.text?[0]:[]);qa.enter().append("g").classed("titletext",!0);qa.exit().remove();qa.each(function(){var ka=G.ensureSingle(z.select(this),"text","",function(va){va.attr("data-notex",1)}),
ua=da.title.text;da._meta&&(ua=G.templateString(ua,da._meta));ka.text(ua).attr({"class":"titletext",transform:"","text-anchor":"middle"}).call(D.font,da.title.font).call(K.convertToTspans,U);ua="middle center"===da.title.position?{x:la.cx,y:la.cy,scale:la.trace.hole*la.r*2/Math.sqrt(la.titleBox.width*la.titleBox.width+la.titleBox.height*la.titleBox.height),tx:0,ty:-la.titleBox.height/2+la.trace.title.font.size}:e(la,ba);ka.attr("transform",L(ua.x,ua.y)+J(Math.min(1,ua.scale))+L(ua.tx,ua.ty))});ma&&
t(sa,da);r(oa,da);if(ma&&da.automargin){oa=D.bBox(ja.node());qa=da.domain;var pa=(.5*ba.w*(qa.x[1]-qa.x[0])-la.r)/ba.w,na=(.5*ba.h*(qa.y[1]-qa.y[0])-la.r)/ba.h;E.autoMargin(U,"pie."+da.uid+".automargin",{xl:qa.x[0]-pa,xr:qa.x[1]+pa,yb:qa.y[0]-na,yt:qa.y[1]+na,l:Math.max(la.cx-la.r-oa.left,0),r:Math.max(oa.right-(la.cx+la.r),0),b:Math.max(oa.bottom-(la.cy+la.r),0),t:Math.max(la.cy-la.r-oa.top,0),pad:5})}})});setTimeout(function(){ca.selectAll("tspan").each(function(){var ia=z.select(this);ia.attr("dy")&&
ia.attr("dy",ia.attr("dy"))})},0)},formatSliceLabel:B,transformInsideText:h,determineInsideTextFont:l,positionTitleOutside:e,prerenderTitles:a,layoutAreas:v,attachFxHandlers:q,computeTransform:A}},{"../../components/color":643,"../../components/drawing":665,"../../components/fx":683,"../../lib":778,"../../lib/svg_text_utils":803,"../../plots/plots":891,"../bar/constants":923,"../bar/uniform_text":937,"./event_data":1165,"./helpers":1166,d3:169}],1171:[function(b,N,I){var r=b("d3"),q=b("./style_one"),
m=b("../bar/uniform_text").resizeText;N.exports=function(l){var a=l._fullLayout._pielayer.selectAll(".trace");m(l,a,"pie");a.each(function(h){var g=h[0].trace;h=r.select(this);h.style({opacity:g.opacity});h.selectAll("path.surface").each(function(n){r.select(this).call(q,n,g)})})}},{"../bar/uniform_text":937,"./style_one":1172,d3:169}],1172:[function(b,N,I){var r=b("../../components/color"),q=b("./helpers").castOption;N.exports=function(m,l,a){var h=a.marker.line;a=q(h.color,l.pts)||r.defaultLine;
h=q(h.width,l.pts)||0;m.style("stroke-width",h).call(r.fill,l.color).call(r.stroke,a)}},{"../../components/color":643,"./helpers":1166}],1173:[function(b,N,I){b=b("../scatter/attributes");N.exports={x:b.x,y:b.y,xy:{valType:"data_array",editType:"calc"},indices:{valType:"data_array",editType:"calc"},xbounds:{valType:"data_array",editType:"calc"},ybounds:{valType:"data_array",editType:"calc"},text:b.text,marker:{color:{valType:"color",arrayOk:!1,editType:"calc"},opacity:{valType:"number",min:0,max:1,
dflt:1,arrayOk:!1,editType:"calc"},blend:{valType:"boolean",dflt:null,editType:"calc"},sizemin:{valType:"number",min:.1,max:2,dflt:.5,editType:"calc"},sizemax:{valType:"number",min:.1,dflt:20,editType:"calc"},border:{color:{valType:"color",arrayOk:!1,editType:"calc"},arearatio:{valType:"number",min:0,max:1,dflt:0,editType:"calc"},editType:"calc"},editType:"calc"},transforms:void 0}},{"../scatter/attributes":1187}],1174:[function(b,N,I){function r(h,g){this.scene=h;this.uid=g;this.type="pointcloud";
this.pickXData=[];this.pickYData=[];this.xData=[];this.yData=[];this.textLabels=[];this.color="rgb(0, 0, 0)";this.name="";this.hoverinfo="all";this.idToIndex=new Int32Array(0);this.bounds=[0,0,0,0];this.pointcloudOptions={positions:new Float32Array(0),idToIndex:this.idToIndex,sizemin:.5,sizemax:12,color:[0,0,0,1],areaRatio:1,borderColor:[0,0,0,1]};this.pointcloud=q(h.glplot,this.pointcloudOptions);this.pointcloud._trace=this}var q=b("gl-pointcloud2d"),m=b("../../lib/str2rgbarray"),l=b("../../plots/cartesian/autorange").findExtremes,
a=b("../scatter/get_trace_color");b=r.prototype;b.handlePick=function(h){var g=this.idToIndex[h.pointId];return{trace:this,dataCoord:h.dataCoord,traceCoord:this.pickXYData?[this.pickXYData[2*g],this.pickXYData[2*g+1]]:[this.pickXData[g],this.pickYData[g]],textLabel:Array.isArray(this.textLabels)?this.textLabels[g]:this.textLabels,color:this.color,name:this.name,pointIndex:g,hoverinfo:this.hoverinfo}};b.update=function(h){this.index=h.index;this.textLabels=h.text;this.name=h.name;this.hoverinfo=h.hoverinfo;
this.bounds=[Infinity,Infinity,-Infinity,-Infinity];this.updateFast(h);this.color=a(h,{})};b.updateFast=function(h){var g=this.xData=this.pickXData=h.x,n=this.yData=this.pickYData=h.y,p=this.pickXYData=h.xy,d=h.xbounds&&h.ybounds,e=h.indices,f=this.bounds,k;if(p){var t=p;p=p.length>>>1;if(d)f[0]=h.xbounds[0],f[2]=h.xbounds[1],f[1]=h.ybounds[0],f[3]=h.ybounds[1];else for(k=0;k<p;k++){d=t[2*k];var v=t[2*k+1];d<f[0]&&(f[0]=d);d>f[2]&&(f[2]=d);v<f[1]&&(f[1]=v);v>f[3]&&(f[3]=v)}if(!e)for(e=new Int32Array(p),
k=0;k<p;k++)e[k]=k}else for(p=g.length,t=new Float32Array(2*p),e=new Int32Array(p),k=0;k<p;k++)d=g[k],v=n[k],e[k]=k,t[2*k]=d,t[2*k+1]=v,d<f[0]&&(f[0]=d),d>f[2]&&(f[2]=d),v<f[1]&&(f[1]=v),v>f[3]&&(f[3]=v);this.idToIndex=e;this.pointcloudOptions.idToIndex=e;this.pointcloudOptions.positions=t;p=m(h.marker.color);t=m(h.marker.border.color);e=h.opacity*h.marker.opacity;p[3]*=e;this.pointcloudOptions.color=p;p=h.marker.blend;null===p&&(p=100>g.length||100>n.length);this.pointcloudOptions.blend=p;t[3]*=
e;this.pointcloudOptions.borderColor=t;t=Math.max(h.marker.sizemax,h.marker.sizemin);this.pointcloudOptions.sizeMin=h.marker.sizemin;this.pointcloudOptions.sizeMax=t;this.pointcloudOptions.areaRatio=h.marker.border.arearatio;this.pointcloud.update(this.pointcloudOptions);g=this.scene.xaxis;n=this.scene.yaxis;t=t/2||.5;h._extremes[g._id]=l(g,[f[0],f[2]],{ppad:t});h._extremes[n._id]=l(n,[f[1],f[3]],{ppad:t})};b.dispose=function(){this.pointcloud.dispose()};N.exports=function(h,g){h=new r(h,g.uid);h.update(g);
return h}},{"../../lib/str2rgbarray":802,"../../plots/cartesian/autorange":827,"../scatter/get_trace_color":1197,"gl-pointcloud2d":324}],1175:[function(b,N,I){var r=b("../../lib"),q=b("./attributes");N.exports=function(m,l,a){function h(g,n){return r.coerce(m,l,q,g,n)}h("x");h("y");h("xbounds");h("ybounds");m.xy&&m.xy instanceof Float32Array&&(l.xy=m.xy);m.indices&&m.indices instanceof Int32Array&&(l.indices=m.indices);h("text");h("marker.color",a);h("marker.opacity");h("marker.blend");h("marker.sizemin");
h("marker.sizemax");h("marker.border.color",a);h("marker.border.arearatio");l._length=null}},{"../../lib":778,"./attributes":1173}],1176:[function(b,N,I){N.exports={attributes:b("./attributes"),supplyDefaults:b("./defaults"),calc:b("../scatter3d/calc"),plot:b("./convert"),moduleType:"trace",name:"pointcloud",basePlotModule:b("../../plots/gl2d"),categories:["gl","gl2d","showLegend"],meta:{}}},{"../../plots/gl2d":868,"../scatter3d/calc":1216,"./attributes":1173,"./convert":1174,"./defaults":1175}],
1177:[function(b,N,I){I=b("../../plots/font_attributes");var r=b("../../plots/attributes"),q=b("../../components/color/attributes"),m=b("../../components/fx/attributes"),l=b("../../plots/domain").attributes,a=b("../../plots/template_attributes").hovertemplateAttrs,h=b("../../components/colorscale/attributes"),g=b("../../plot_api/plot_template").templatedArray,n=b("../../lib/extend").extendFlat,p=b("../../plot_api/edit_types").overrideAll;b("../../constants/docs");(N.exports=p({hoverinfo:n({},r.hoverinfo,
{flags:[],arrayOk:!1}),hoverlabel:m.hoverlabel,domain:l({name:"sankey",trace:!0}),orientation:{valType:"enumerated",values:["v","h"],dflt:"h"},valueformat:{valType:"string",dflt:".3s"},valuesuffix:{valType:"string",dflt:""},arrangement:{valType:"enumerated",values:["snap","perpendicular","freeform","fixed"],dflt:"snap"},textfont:I({}),customdata:void 0,node:{label:{valType:"data_array",dflt:[]},groups:{valType:"info_array",impliedEdits:{x:[],y:[]},dimensions:2,freeLength:!0,dflt:[],items:{valType:"number",
editType:"calc"}},x:{valType:"data_array",dflt:[]},y:{valType:"data_array",dflt:[]},color:{valType:"color",arrayOk:!0},customdata:{valType:"data_array",editType:"calc"},line:{color:{valType:"color",dflt:q.defaultLine,arrayOk:!0},width:{valType:"number",min:0,dflt:.5,arrayOk:!0}},pad:{valType:"number",arrayOk:!1,min:0,dflt:20},thickness:{valType:"number",arrayOk:!1,min:1,dflt:20},hoverinfo:{valType:"enumerated",values:["all","none","skip"],dflt:"all"},hoverlabel:m.hoverlabel,hovertemplate:a({},{keys:["value",
"label"]})},link:{label:{valType:"data_array",dflt:[]},color:{valType:"color",arrayOk:!0},customdata:{valType:"data_array",editType:"calc"},line:{color:{valType:"color",dflt:q.defaultLine,arrayOk:!0},width:{valType:"number",min:0,dflt:0,arrayOk:!0}},source:{valType:"data_array",dflt:[]},target:{valType:"data_array",dflt:[]},value:{valType:"data_array",dflt:[]},hoverinfo:{valType:"enumerated",values:["all","none","skip"],dflt:"all"},hoverlabel:m.hoverlabel,hovertemplate:a({},{keys:["value","label"]}),
colorscales:g("concentrationscales",{editType:"calc",label:{valType:"string",editType:"calc",dflt:""},cmax:{valType:"number",editType:"calc",dflt:1},cmin:{valType:"number",editType:"calc",dflt:0},colorscale:n(h().colorscale,{dflt:[[0,"white"],[1,"black"]]})})}},"calc","nested")).transforms=void 0},{"../../components/color/attributes":642,"../../components/colorscale/attributes":650,"../../components/fx/attributes":674,"../../constants/docs":748,"../../lib/extend":768,"../../plot_api/edit_types":810,
"../../plot_api/plot_template":817,"../../plots/attributes":824,"../../plots/domain":855,"../../plots/font_attributes":856,"../../plots/template_attributes":906}],1178:[function(b,N,I){function r(d,e){var f=d._fullData[e],k=d._fullLayout,t=k.dragmode,v=f._bgRect;if("pan"!==t&&"zoom"!==t){a(v,"pan"===k.dragmode?"move":"crosshair");k={_id:"x",c2p:n.identity,_offset:f._sankey.translateX,_length:f._sankey.width};f={_id:"y",c2p:n.identity,_offset:f._sankey.translateY,_length:f._sankey.height};var w={gd:d,
element:v.node(),plotinfo:{id:e,xaxis:k,yaxis:f,fillRangeItems:n.noop},subplot:e,xaxes:[k],yaxes:[f],doneFnCompleted:function(y){for(var B=d._fullData[e],A=B.node.groups.slice(),z=[],E=0;E<y.length;E++){a:{var C=B._sankey.graph.nodes;for(var u=0;u<C.length;u++)if(C[u].pointNumber===y[E].pointNumber){C=C[u];break a}C=void 0}if(C)if(C.group){for(u=0;u<C.childrenNodes.length;u++)z.push(C.childrenNodes[u].pointNumber);A[C.pointNumber-B.node._count]=!1}else z.push(C.pointNumber)}y=A.filter(Boolean).concat([z]);
p.call("_guiRestyle",d,{"node.groups":[y]},e)},prepFn:function(y,B,A){g(y,B,A,w,t)}};h.init(w)}}N=b("../../plot_api/edit_types").overrideAll;var q=b("../../plots/get_data").getModuleCalcData,m=b("./plot"),l=b("../../components/fx/layout_attributes"),a=b("../../lib/setcursor"),h=b("../../components/dragelement"),g=b("../../plots/cartesian/select").prepSelect,n=b("../../lib"),p=b("../../registry");I.name="sankey";I.baseLayoutAttrOverrides=N({hoverlabel:l.hoverlabel},"plot","nested");I.plot=function(d){var e=
q(d.calcdata,"sankey")[0];m(d,e);I.updateFx(d)};I.clean=function(d,e,f,k){d=k._has&&k._has("sankey");e=e._has&&e._has("sankey");d&&!e&&(k._paperdiv.selectAll(".sankey").remove(),k._paperdiv.selectAll(".bgsankey").remove())};I.updateFx=function(d){for(var e=0;e<d._fullData.length;e++)r(d,e)}},{"../../components/dragelement":662,"../../components/fx/layout_attributes":684,"../../lib":778,"../../lib/setcursor":799,"../../plot_api/edit_types":810,"../../plots/cartesian/select":847,"../../plots/get_data":865,
"../../registry":911,"./plot":1183}],1179:[function(b,N,I){function r(n,p,d){for(var e=m.init2dArray(n,0),f=0;f<Math.min(p.length,d.length);f++)if(m.isIndex(p[f],n)&&m.isIndex(d[f],n)){if(p[f]===d[f])return!0;e[p[f]].push(d[f])}return q(e).components.some(function(k){return 1<k.length})}var q=b("strongly-connected-components"),m=b("../../lib"),l=b("../../lib/gup").wrap,a=m.isArrayOrTypedArray,h=m.isIndex,g=b("../../components/colorscale");N.exports=function(n,p){var d=p.node,e=p.link;n=[];var f=a(e.color),
k=a(e.customdata),t={},v={},w=e.colorscales.length,y;for(y=0;y<w;y++){var B=e.colorscales[y],A=g.extractScale(B,{cLetter:"c"});A=g.makeColorScaleFunc(A);v[B.label]=A}for(y=w=0;y<e.value.length;y++)e.source[y]>w&&(w=e.source[y]),e.target[y]>w&&(w=e.target[y]);w+=1;p.node._count=w;p=p.node.groups;B={};for(y=0;y<p.length;y++){var z=p[y];for(A=0;A<z.length;A++){var E=z[A],C=w+y;B.hasOwnProperty(E)?m.warn("Node "+E+" is already part of a group."):B[E]=C}}A=[];z=[];for(y=0;y<e.value.length;y++){E=e.value[y];
C=e.source[y];var u=e.target[y];if(0<E&&h(C,w)&&h(u,w)&&(!B.hasOwnProperty(C)||!B.hasOwnProperty(u)||B[C]!==B[u])){B.hasOwnProperty(u)&&(u=B[u]);B.hasOwnProperty(C)&&(C=B[C]);C=+C;u=+u;t[C]=t[u]=!0;var D="";e.label&&e.label[y]&&(D=e.label[y]);var G=null;D&&v.hasOwnProperty(D)&&(G=v[D]);n.push({pointNumber:y,label:D,color:f?e.color[y]:e.color,customdata:k?e.customdata[y]:e.customdata,concentrationscale:G,source:C,target:u,value:+E});A.push(C);z.push(u)}}e=w+p.length;k=a(d.color);v=a(d.customdata);
f=[];for(y=0;y<e;y++)t[y]&&f.push({group:y>w-1,childrenNodes:[],pointNumber:y,label:d.label[y],color:k?d.color[y]:d.color,customdata:v?d.customdata[y]:d.customdata});d=!1;r(e,A,z)&&(d=!0);return l({circular:d,_nodes:f,_links:n,_groups:p,_groupLookup:B})}},{"../../components/colorscale":655,"../../lib":778,"../../lib/gup":775,"strongly-connected-components":569}],1180:[function(b,N,I){N.exports={nodeTextOffsetHorizontal:4,nodeTextOffsetVertical:3,nodePadAcross:10,sankeyIterations:50,forceIterations:5,
forceTicksPerFrame:10,duration:500,ease:"linear",cn:{sankey:"sankey",sankeyLinks:"sankey-links",sankeyLink:"sankey-link",sankeyNodeSet:"sankey-node-set",sankeyNode:"sankey-node",nodeRect:"node-rect",nodeCapture:"node-capture",nodeCentered:"node-entered",nodeLabelGuide:"node-label-guide",nodeLabel:"node-label",nodeLabelTextPath:"node-label-text-path"}}},{}],1181:[function(b,N,I){function r(d,e){function f(k,t){return q.coerce(d,e,m.link.colorscales,k,t)}f("label");f("cmin");f("cmax");f("colorscale")}
var q=b("../../lib"),m=b("./attributes"),l=b("../../components/color"),a=b("tinycolor2"),h=b("../../plots/domain").defaults,g=b("../../components/fx/hoverlabel_defaults"),n=b("../../plot_api/plot_template"),p=b("../../plots/array_container_defaults");N.exports=function(d,e,f,k){function t(u,D){return q.coerce(d,e,m,u,D)}function v(u,D){return q.coerce(y,B,m.node,u,D)}function w(u,D){return q.coerce(z,E,m.link,u,D)}f=q.extendDeep(k.hoverlabel,d.hoverlabel);var y=d.node,B=n.newContainer(e,"node");v("label");
v("groups");v("x");v("y");v("pad");v("thickness");v("line.color");v("line.width");v("hoverinfo",d.hoverinfo);g(y,B,v,f);v("hovertemplate");var A=k.colorway;v("color",B.label.map(function(u,D){return l.addOpacity(A[D%A.length],.8)}));v("customdata");var z=d.link||{},E=n.newContainer(e,"link");w("label");w("source");w("target");w("value");w("line.color");w("line.width");w("hoverinfo",d.hoverinfo);g(z,E,w,f);w("hovertemplate");f=.333>a(k.paper_bgcolor).getLuminance()?"rgba(255, 255, 255, 0.6)":"rgba(0, 0, 0, 0.2)";
w("color",q.repeat(f,E.value.length));w("customdata");p(z,E,{name:"colorscales",handleItemDefaults:r});h(e,k,t);t("orientation");t("valueformat");t("valuesuffix");var C;B.x.length&&B.y.length&&(C="freeform");t("arrangement",C);q.coerceFont(t,"textfont",q.extendFlat({},k.font));e._length=null}},{"../../components/color":643,"../../components/fx/hoverlabel_defaults":681,"../../lib":778,"../../plot_api/plot_template":817,"../../plots/array_container_defaults":823,"../../plots/domain":855,"./attributes":1177,
tinycolor2:576}],1182:[function(b,N,I){N.exports={attributes:b("./attributes"),supplyDefaults:b("./defaults"),calc:b("./calc"),plot:b("./plot"),moduleType:"trace",name:"sankey",basePlotModule:b("./base_plot"),selectPoints:b("./select.js"),categories:["noOpacity"],meta:{}}},{"./attributes":1177,"./base_plot":1178,"./calc":1179,"./defaults":1181,"./plot":1183,"./select.js":1185}],1183:[function(b,N,I){function r(A){return""!==A}function q(A,z){return A.filter(function(E){return E.key===z.traceId})}
function m(A,z){f.select(A).select("path").style("fill-opacity",z);f.select(A).select("rect").style("fill-opacity",z)}function l(A){f.select(A).select("text.name").style("fill","black")}function a(A){return function(z){return-1!==A.node.sourceLinks.indexOf(z.link)||-1!==A.node.targetLinks.indexOf(z.link)}}function h(A){return function(z){return-1!==z.node.sourceLinks.indexOf(A.link)||-1!==z.node.targetLinks.indexOf(A.link)}}function g(A,z,E){z&&E&&q(E,z).selectAll("."+y.sankeyLink).filter(a(z)).call(p.bind(0,
z,E,!1))}function n(A,z,E){z&&E&&q(E,z).selectAll("."+y.sankeyLink).filter(a(z)).call(d.bind(0,z,E,!1))}function p(A,z,E,C){var u=C.datum().link.label;C.style("fill-opacity",function(D){if(!D.link.concentrationscale)return.4});u&&q(z,A).selectAll("."+y.sankeyLink).filter(function(D){return D.link.label===u}).style("fill-opacity",function(D){if(!D.link.concentrationscale)return.4});E&&q(z,A).selectAll("."+y.sankeyNode).filter(h(A)).call(g)}function d(A,z,E,C){var u=C.datum().link.label;C.style("fill-opacity",
function(D){return D.tinyColorAlpha});u&&q(z,A).selectAll("."+y.sankeyLink).filter(function(D){return D.link.label===u}).style("fill-opacity",function(D){return D.tinyColorAlpha});E&&q(z,A).selectAll(y.sankeyNode).filter(h(A)).call(n)}function e(A,z){A=w.nestedProperty(A.hoverlabel||{},z).get();return Array.isArray(A)?!1:A}var f=b("d3"),k=b("./render"),t=b("../../components/fx"),v=b("../../components/color"),w=b("../../lib"),y=b("./constants").cn,B=w._;N.exports=function(A,z){for(var E=A._fullLayout,
C=E._paper,u=E._size,D=0;D<A._fullData.length;D++)if(A._fullData[D].visible&&A._fullData[D].type===y.sankey&&!A._fullData[D]._viewInitial){var G=A._fullData[D].node;A._fullData[D]._viewInitial={node:{groups:G.groups.slice(),x:G.x.slice(),y:G.y.slice()}}}var J=B(A,"source:")+" ",L=B(A,"target:")+" ",K=B(A,"concentration:")+" ",H=B(A,"incoming flow count:")+" ",Q=B(A,"outgoing flow count:")+" ";k(A,C,z,{width:u.w,height:u.h,margin:{t:u.t,r:u.r,b:u.b,l:u.l}},{linkEvents:{hover:function(M,P,T){!1!==A._fullLayout.hovermode&&
(f.select(M).call(p.bind(0,P,T,!0)),"skip"!==P.link.trace.link.hoverinfo&&(P.link.fullData=P.link.trace,A.emit("plotly_hover",{event:f.event,points:[P.link]})))},follow:function(M,P){function T(ia){if(ia.circular){var ja=(ia.circularPathData.leftInnerExtent+ia.circularPathData.rightInnerExtent)/2;var la=ia.circularPathData.verticalFullExtent}else ja=(ia.source.x1+ia.target.x0)/2,la=(ia.y0+ia.y1)/2;ja=[ja,la];"v"===ia.trace.orientation&&ja.reverse();ja[0]+=P.parent.translateX;ja[1]+=P.parent.translateY;
return ja}if(!1!==A._fullLayout.hovermode&&(M=P.link.trace.link,"none"!==M.hoverinfo&&"skip"!==M.hoverinfo)){for(var O=[],U=0,S=0;S<P.flow.links.length;S++){var X=P.flow.links[S];if("closest"!==A._fullLayout.hovermode||P.link.pointNumber===X.pointNumber){P.link.pointNumber===X.pointNumber&&(U=S);X.fullData=X.trace;M=P.link.trace.link;var ba=T(X),ca={valueLabel:f.format(P.valueFormat)(X.value)+P.valueSuffix};O.push({x:ba[0],y:ba[1],name:ca.valueLabel,text:[X.label||"",J+X.source.label,L+X.target.label,
X.concentrationscale?K+f.format("%0.2f")(X.flow.labelConcentration):""].filter(r).join("\x3cbr\x3e"),color:e(M,"bgcolor")||v.addOpacity(X.color,1),borderColor:e(M,"bordercolor"),fontFamily:e(M,"font.family"),fontSize:e(M,"font.size"),fontColor:e(M,"font.color"),nameLength:e(M,"namelength"),textAlign:e(M,"align"),idealAlign:f.event.x<ba[0]?"right":"left",hovertemplate:M.hovertemplate,hovertemplateLabels:ca,eventData:[X]})}}t.loneHover(O,{container:E._hoverlayer.node(),outerContainer:E._paper.node(),
gd:A,anchorIndex:U}).each(function(){P.link.concentrationscale||m(this,.65);l(this)})}},unhover:function(M,P,T){!1!==A._fullLayout.hovermode&&(f.select(M).call(d.bind(0,P,T,!0)),"skip"!==P.link.trace.link.hoverinfo&&(P.link.fullData=P.link.trace,A.emit("plotly_unhover",{event:f.event,points:[P.link]})),t.loneUnhover(E._hoverlayer.node()))},select:function(M,P){M=P.link;M.originalEvent=f.event;A._hoverdata=[M];t.click(A,{target:!0})}},nodeEvents:{hover:function(M,P,T){!1!==A._fullLayout.hovermode&&
(f.select(M).call(g,P,T),"skip"!==P.node.trace.node.hoverinfo&&(P.node.fullData=P.node.trace,A.emit("plotly_hover",{event:f.event,points:[P.node]})))},follow:function(M,P){if(!1!==A._fullLayout.hovermode){var T=P.node.trace.node;if("none"!==T.hoverinfo&&"skip"!==T.hoverinfo){M=f.select(M).select("."+y.nodeRect);var O=A._fullLayout._paperdiv.node().getBoundingClientRect(),U=M.node().getBoundingClientRect();M=U.left-2-O.left;var S=U.right+2-O.left;O=U.top+U.height/4-O.top;U={valueLabel:f.format(P.valueFormat)(P.node.value)+
P.valueSuffix};P.node.fullData=P.node.trace;A._fullLayout._calcInverseTransform(A);var X=A._fullLayout._invScaleX;P=t.loneHover({x0:X*M,x1:X*S,y:A._fullLayout._invScaleY*O,name:f.format(P.valueFormat)(P.node.value)+P.valueSuffix,text:[P.node.label,H+P.node.targetLinks.length,Q+P.node.sourceLinks.length].filter(r).join("\x3cbr\x3e"),color:e(T,"bgcolor")||P.tinyColorHue,borderColor:e(T,"bordercolor"),fontFamily:e(T,"font.family"),fontSize:e(T,"font.size"),fontColor:e(T,"font.color"),nameLength:e(T,
"namelength"),textAlign:e(T,"align"),idealAlign:"left",hovertemplate:T.hovertemplate,hovertemplateLabels:U,eventData:[P.node]},{container:E._hoverlayer.node(),outerContainer:E._paper.node(),gd:A});m(P,.85);l(P)}}},unhover:function(M,P,T){!1!==A._fullLayout.hovermode&&(f.select(M).call(n,P,T),"skip"!==P.node.trace.node.hoverinfo&&(P.node.fullData=P.node.trace,A.emit("plotly_unhover",{event:f.event,points:[P.node]})),t.loneUnhover(E._hoverlayer.node()))},select:function(M,P,T){var O=P.node;O.originalEvent=
f.event;A._hoverdata=[O];f.select(M).call(n,P,T);t.click(A,{target:!0})}}})}},{"../../components/color":643,"../../components/fx":683,"../../lib":778,"./constants":1180,"./render":1184,d3:169}],1184:[function(b,N,I){function r(ia,ja,la){function da(pb){pb.forEach(function(xa){var Ea=0;var Ia=xa.length,Oa;xa.sort(function(Xa,tb){return Xa.y0-tb.y0});for(Oa=0;Oa<Ia;++Oa){var bb=xa[Oa];bb.y0>=Ea||(Ea-=bb.y0,1E-6<Ea&&(bb.y0+=Ea,bb.y1+=Ea));Ea=bb.y1+pa}})}function oa(pb){var xa=pb.map(function(Ka,Ta){return{x0:Ka.x0,
index:Ta}}).sort(function(Ka,Ta){return Ka.x0-Ta.x0}),Ea=[],Ia=-1,Oa=-Infinity;for(fb=0;fb<xa.length;fb++){var bb=pb[xa[fb].index];if(bb.x0>Oa+na){Ia+=1;var Xa=bb.x0}Oa=bb.x0;Ea[Ia]||(Ea[Ia]=[]);Ea[Ia].push(bb);var tb=Xa-bb.x0;bb.x0+=tb;bb.x1+=tb}return Ea}var sa=X(ja);ja=sa.trace;var ma=ja.domain,qa="h"===ja.orientation,pa=ja.node.pad,na=ja.node.thickness,ka=ia.width*(ma.x[1]-ma.x[0]),ua=ia.height*(ma.y[1]-ma.y[0]),va=sa._nodes,Ca=sa._links,Ma=sa.circular;var Ua=Ma?M.sankeyCircular().circularLinkGap(0):
Q.sankey();Ua.iterations(G.sankeyIterations).size(qa?[ka,ua]:[ua,ka]).nodeWidth(na).nodePadding(pa).nodeId(function(pb){return pb.pointNumber}).nodes(va).links(Ca);var eb=Ua();Ua.nodePadding()<pa&&T.warn("node.pad was reduced to ",Ua.nodePadding()," to fit within the figure.");var fb,nb,cb;for(jb in sa._groupLookup){va=parseInt(sa._groupLookup[jb]);for(fb=0;fb<eb.nodes.length;fb++)if(eb.nodes[fb].pointNumber===va){var $a=eb.nodes[fb];break}$a&&(va={pointNumber:parseInt(jb),x0:$a.x0,x1:$a.x1,y0:$a.y0,
y1:$a.y1,partOfGroup:!0,sourceLinks:[],targetLinks:[]},eb.nodes.unshift(va),$a.childrenNodes.unshift(va))}(function(){for(fb=0;fb<eb.nodes.length;fb++){var pb=eb.nodes[fb],xa={};for(nb=0;nb<pb.targetLinks.length;nb++){var Ea=pb.targetLinks[nb];var Ia=Ea.source.pointNumber+":"+Ea.target.pointNumber;xa.hasOwnProperty(Ia)||(xa[Ia]=[]);xa[Ia].push(Ea)}var Oa=Object.keys(xa);for(nb=0;nb<Oa.length;nb++){Ia=Oa[nb];Ia=xa[Ia];var bb=0,Xa={};for(cb=0;cb<Ia.length;cb++)Ea=Ia[cb],Xa[Ea.label]||(Xa[Ea.label]=
0),Xa[Ea.label]+=Ea.value,bb+=Ea.value;for(cb=0;cb<Ia.length;cb++)Ea=Ia[cb],Ea.flow={value:bb,labelConcentration:Xa[Ea.label]/bb,concentration:Ea.value/bb,links:Ia},Ea.concentrationscale&&(Ea.color=L(Ea.concentrationscale(Ea.flow.labelConcentration)))}for(nb=xa=0;nb<pb.sourceLinks.length;nb++)xa+=pb.sourceLinks[nb].value;for(nb=0;nb<pb.sourceLinks.length;nb++)Ea=pb.sourceLinks[nb],Ea.concentrationOut=Ea.value/xa;for(nb=xa=0;nb<pb.targetLinks.length;nb++)xa+=pb.targetLinks[nb].value;for(nb=0;nb<pb.targetLinks.length;nb++)Ea=
pb.targetLinks[nb],Ea.concenrationIn=Ea.value/xa}})();if(ja.node.x.length&&ja.node.y.length){for(fb=0;fb<Math.min(ja.node.x.length,ja.node.y.length,eb.nodes.length);fb++)if(ja.node.x[fb]&&ja.node.y[fb]){var jb=[ja.node.x[fb]*ka,ja.node.y[fb]*ua];eb.nodes[fb].x0=jb[0]-na/2;eb.nodes[fb].x1=jb[0]+na/2;$a=eb.nodes[fb].y1-eb.nodes[fb].y0;eb.nodes[fb].y0=jb[1]-$a/2;eb.nodes[fb].y1=jb[1]+$a/2}"snap"===ja.arrangement&&(va=eb.nodes,jb=oa(va),da(jb));Ua.update(eb)}return{circular:Ma,key:la,trace:ja,guid:T.randstr(),
horizontal:qa,width:ka,height:ua,nodePad:ja.node.pad,nodeLineColor:ja.node.line.color,nodeLineWidth:ja.node.line.width,linkLineColor:ja.link.line.color,linkLineWidth:ja.link.line.width,valueFormat:ja.valueformat,valueSuffix:ja.valuesuffix,textFont:ja.textfont,translateX:ma.x[0]*ia.width+ia.margin.l,translateY:ia.height-ma.y[1]*ia.height+ia.margin.t,dragParallel:qa?ua:ka,dragPerpendicular:qa?ka:ua,arrangement:ja.arrangement,sankey:Ua,graph:eb,forceLayouts:{},interactionState:{dragInProgress:!1,hovered:!1}}}
function q(ia,ja,la){var da=L(ja.color),oa=ja.source.label+"|"+ja.target.label;ja.trace=ia.trace;ja.curveNumber=ia.trace.index;return{circular:ia.circular,key:oa+"__"+la,traceId:ia.key,pointNumber:ja.pointNumber,link:ja,tinyColorHue:K.tinyRGB(da),tinyColorAlpha:da.getAlpha(),linkPath:m,linkLineColor:ia.linkLineColor,linkLineWidth:ia.linkLineWidth,valueFormat:ia.valueFormat,valueSuffix:ia.valueSuffix,sankey:ia.sankey,parent:ia,interactionState:ia.interactionState,flow:ja.flow}}function m(){return function(ia){if(ia.link.circular){var ja=
ia.link,la=ja.width/2,da=ja.circularPathData;return"top"===ja.circularLinkType?"M "+da.targetX+" "+(da.targetY+la)+" L"+da.rightInnerExtent+" "+(da.targetY+la)+"A"+(da.rightLargeArcRadius+la)+" "+(da.rightSmallArcRadius+la)+" 0 0 1 "+(da.rightFullExtent-la)+" "+(da.targetY-da.rightSmallArcRadius)+"L"+(da.rightFullExtent-la)+" "+da.verticalRightInnerExtent+"A"+(da.rightLargeArcRadius+la)+" "+(da.rightLargeArcRadius+la)+" 0 0 1 "+da.rightInnerExtent+" "+(da.verticalFullExtent-la)+"L"+da.leftInnerExtent+
" "+(da.verticalFullExtent-la)+"A"+(da.leftLargeArcRadius+la)+" "+(da.leftLargeArcRadius+la)+" 0 0 1 "+(da.leftFullExtent+la)+" "+da.verticalLeftInnerExtent+"L"+(da.leftFullExtent+la)+" "+(da.sourceY-da.leftSmallArcRadius)+"A"+(da.leftLargeArcRadius+la)+" "+(da.leftSmallArcRadius+la)+" 0 0 1 "+da.leftInnerExtent+" "+(da.sourceY+la)+"L"+da.sourceX+" "+(da.sourceY+la)+"L"+da.sourceX+" "+(da.sourceY-la)+"L"+da.leftInnerExtent+" "+(da.sourceY-la)+"A"+(da.leftLargeArcRadius-la)+" "+(da.leftSmallArcRadius-
la)+" 0 0 0 "+(da.leftFullExtent-la)+" "+(da.sourceY-da.leftSmallArcRadius)+"L"+(da.leftFullExtent-la)+" "+da.verticalLeftInnerExtent+"A"+(da.leftLargeArcRadius-la)+" "+(da.leftLargeArcRadius-la)+" 0 0 0 "+da.leftInnerExtent+" "+(da.verticalFullExtent+la)+"L"+da.rightInnerExtent+" "+(da.verticalFullExtent+la)+"A"+(da.rightLargeArcRadius-la)+" "+(da.rightLargeArcRadius-la)+" 0 0 0 "+(da.rightFullExtent+la)+" "+da.verticalRightInnerExtent+"L"+(da.rightFullExtent+la)+" "+(da.targetY-da.rightSmallArcRadius)+
"A"+(da.rightLargeArcRadius-la)+" "+(da.rightSmallArcRadius-la)+" 0 0 0 "+da.rightInnerExtent+" "+(da.targetY-la)+"L"+da.targetX+" "+(da.targetY-la)+"Z":"M "+da.targetX+" "+(da.targetY-la)+" L"+da.rightInnerExtent+" "+(da.targetY-la)+"A"+(da.rightLargeArcRadius+la)+" "+(da.rightSmallArcRadius+la)+" 0 0 0 "+(da.rightFullExtent-la)+" "+(da.targetY+da.rightSmallArcRadius)+"L"+(da.rightFullExtent-la)+" "+da.verticalRightInnerExtent+"A"+(da.rightLargeArcRadius+la)+" "+(da.rightLargeArcRadius+la)+" 0 0 0 "+
da.rightInnerExtent+" "+(da.verticalFullExtent+la)+"L"+da.leftInnerExtent+" "+(da.verticalFullExtent+la)+"A"+(da.leftLargeArcRadius+la)+" "+(da.leftLargeArcRadius+la)+" 0 0 0 "+(da.leftFullExtent+la)+" "+da.verticalLeftInnerExtent+"L"+(da.leftFullExtent+la)+" "+(da.sourceY+da.leftSmallArcRadius)+"A"+(da.leftLargeArcRadius+la)+" "+(da.leftSmallArcRadius+la)+" 0 0 0 "+da.leftInnerExtent+" "+(da.sourceY-la)+"L"+da.sourceX+" "+(da.sourceY-la)+"L"+da.sourceX+" "+(da.sourceY+la)+"L"+da.leftInnerExtent+
" "+(da.sourceY+la)+"A"+(da.leftLargeArcRadius-la)+" "+(da.leftSmallArcRadius-la)+" 0 0 1 "+(da.leftFullExtent-la)+" "+(da.sourceY+da.leftSmallArcRadius)+"L"+(da.leftFullExtent-la)+" "+da.verticalLeftInnerExtent+"A"+(da.leftLargeArcRadius-la)+" "+(da.leftLargeArcRadius-la)+" 0 0 1 "+da.leftInnerExtent+" "+(da.verticalFullExtent-la)+"L"+da.rightInnerExtent+" "+(da.verticalFullExtent-la)+"A"+(da.rightLargeArcRadius-la)+" "+(da.rightLargeArcRadius-la)+" 0 0 1 "+(da.rightFullExtent+la)+" "+da.verticalRightInnerExtent+
"L"+(da.rightFullExtent+la)+" "+(da.targetY+da.rightSmallArcRadius)+"A"+(da.rightLargeArcRadius-la)+" "+(da.rightSmallArcRadius-la)+" 0 0 1 "+da.rightInnerExtent+" "+(da.targetY+la)+"L"+da.targetX+" "+(da.targetY+la)+"Z"}ja=ia.link.source.x1;la=ia.link.target.x0;var oa=ba(ja,la);da=oa(.5);oa=oa(.5);var sa=ia.link.y0-ia.link.width/2,ma=ia.link.y0+ia.link.width/2,qa=ia.link.y1-ia.link.width/2;ia=ia.link.y1+ia.link.width/2;return"M"+ja+","+sa+"C"+da+","+sa+" "+oa+","+qa+" "+la+","+qa+"L"+la+","+ia+"C"+
oa+","+ia+" "+da+","+ma+" "+ja+","+ma+"Z"}}function l(ia,ja){var la=L(ja.color),da=G.nodePadAcross,oa=ia.nodePad/2;ja.dx=ja.x1-ja.x0;ja.dy=ja.y1-ja.y0;var sa=ja.dx,ma=Math.max(.5,ja.dy),qa="node_"+ja.pointNumber;ja.group&&(qa=T.randstr());ja.trace=ia.trace;ja.curveNumber=ia.trace.index;return{index:ja.pointNumber,key:qa,partOfGroup:ja.partOfGroup||!1,group:ja.group,traceId:ia.key,trace:ia.trace,node:ja,nodePad:ia.nodePad,nodeLineColor:ia.nodeLineColor,nodeLineWidth:ia.nodeLineWidth,textFont:ia.textFont,
size:ia.horizontal?ia.height:ia.width,visibleWidth:Math.ceil(sa),visibleHeight:ma,zoneX:-da,zoneY:-oa,zoneWidth:sa+2*da,zoneHeight:ma+2*oa,labelY:ia.horizontal?ja.dy/2+1:ja.dx/2+1,left:1===ja.originalLayer,sizeAcross:ia.width,forceLayouts:ia.forceLayouts,horizontal:ia.horizontal,darkBackground:128>=la.getBrightness(),tinyColorHue:K.tinyRGB(la),tinyColorAlpha:la.getAlpha(),valueFormat:ia.valueFormat,valueSuffix:ia.valueSuffix,sankey:ia.sankey,graph:ia.graph,arrangement:ia.arrangement,uniqueNodeLabelPathId:[ia.guid,
ia.key,qa].join("_"),interactionState:ia.interactionState,figure:ia}}function a(ia){ia.attr("transform",function(ja){return O(ja.node.x0.toFixed(3),ja.node.y0.toFixed(3))})}function h(ia){ia.call(a)}function g(ia){ia.attr("width",function(ja){return ja.node.x1-ja.node.x0}).attr("height",function(ja){return ja.visibleHeight})}function n(ia){return O(ia.translateX,ia.translateY)+(ia.horizontal?"matrix(1 0 0 1 0 0)":"matrix(0 1 1 0 0 0)")}function p(ia){return O(ia.horizontal?0:ia.labelY,ia.horizontal?
ia.labelY:0)}function d(ia){return J.svg.line()([[ia.horizontal?ia.left?-ia.sizeAcross:ia.visibleWidth+G.nodeTextOffsetHorizontal:G.nodeTextOffsetHorizontal,0],[ia.horizontal?ia.left?-G.nodeTextOffsetHorizontal:ia.sizeAcross:ia.visibleHeight-G.nodeTextOffsetHorizontal,0]])}function e(ia){return ia.horizontal?"matrix(1 0 0 1 0 0)":"matrix(0 1 1 0 0 0)"}function f(ia){return ia.horizontal?"scale(1 1)":"scale(-1 1)"}function k(ia){return ia.darkBackground&&!ia.horizontal?"rgb(255,255,255)":"rgb(0,0,0)"}
function t(ia){return ia.horizontal&&ia.left?"100%":"0%"}function v(ia,ja,la){ia.on(".basic",null).on("mouseover.basic",function(da){da.interactionState.dragInProgress||da.partOfGroup||(la.hover(this,da,ja),da.interactionState.hovered=[this,da])}).on("mousemove.basic",function(da){da.interactionState.dragInProgress||da.partOfGroup||(la.follow(this,da),da.interactionState.hovered=[this,da])}).on("mouseout.basic",function(da){da.interactionState.dragInProgress||da.partOfGroup||(la.unhover(this,da,ja),
da.interactionState.hovered=!1)}).on("click.basic",function(da){da.interactionState.hovered&&(la.unhover(this,da,ja),da.interactionState.hovered=!1);da.interactionState.dragInProgress||da.partOfGroup||la.select(this,da,ja)})}function w(ia,ja,la,da){var oa=J.behavior.drag().origin(function(sa){return{x:sa.node.x0+sa.visibleWidth/2,y:sa.node.y0+sa.visibleHeight/2}}).on("dragstart",function(sa){if("fixed"!==sa.arrangement&&(T.ensureSingle(da._fullLayout._infolayer,"g","dragcover",function(qa){da._fullLayout._dragCover=
qa}),T.raiseToTop(this),sa.interactionState.dragInProgress=sa.node,C(sa.node),sa.interactionState.hovered&&(la.nodeEvents.unhover.apply(0,sa.interactionState.hovered),sa.interactionState.hovered=!1),"snap"===sa.arrangement)){var ma=sa.traceId+"|"+sa.key;sa.forceLayouts[ma]?sa.forceLayouts[ma].alpha(1):y(ia,ma,sa,da);B(ia,ja,sa,ma,da)}}).on("drag",function(sa){if("fixed"!==sa.arrangement){var ma=J.event.x,qa=J.event.y;"snap"===sa.arrangement?(sa.node.x0=ma-sa.visibleWidth/2,sa.node.x1=ma+sa.visibleWidth/
2):("freeform"===sa.arrangement&&(sa.node.x0=ma-sa.visibleWidth/2,sa.node.x1=ma+sa.visibleWidth/2),qa=Math.max(0,Math.min(sa.size-sa.visibleHeight/2,qa)));sa.node.y0=qa-sa.visibleHeight/2;sa.node.y1=qa+sa.visibleHeight/2;C(sa.node);"snap"!==sa.arrangement&&(sa.sankey.update(sa.graph),ia.filter(u(sa)).call(h),ja.attr("d",m()))}}).on("dragend",function(sa){if("fixed"!==sa.arrangement){sa.interactionState.dragInProgress=!1;for(var ma=0;ma<sa.node.childrenNodes.length;ma++)sa.node.childrenNodes[ma].x=
sa.node.x,sa.node.childrenNodes[ma].y=sa.node.y;"snap"!==sa.arrangement&&z(sa,da)}});ia.on(".drag",null).call(oa)}function y(ia,ja,la,da){D(la.graph.nodes);var oa=la.graph.nodes.filter(function(sa){return sa.originalX===la.node.originalX}).filter(function(sa){return!sa.partOfGroup});la.forceLayouts[ja]=P.forceSimulation(oa).alphaDecay(0).force("collide",P.forceCollide().radius(function(sa){return sa.dy/2+la.nodePad/2}).strength(1).iterations(G.forceIterations)).force("constrain",A(ia,ja,oa,la,da)).stop()}
function B(ia,ja,la,da,oa){window.requestAnimationFrame(function ma(){var qa;for(qa=0;qa<G.forceTicksPerFrame;qa++)la.forceLayouts[da].tick();qa=la.graph.nodes;for(var pa=0;pa<qa.length;pa++)qa[pa].y0=qa[pa].y-qa[pa].dy/2,qa[pa].y1=qa[pa].y0+qa[pa].dy,qa[pa].x0=qa[pa].x-qa[pa].dx/2,qa[pa].x1=qa[pa].x0+qa[pa].dx;la.sankey.update(la.graph);ia.filter(u(la)).call(h);ja.attr("d",m());0<la.forceLayouts[da].alpha()?window.requestAnimationFrame(ma):(qa=la.node.originalX,la.node.x0=qa-la.visibleWidth/2,la.node.x1=
qa+la.visibleWidth/2,z(la,oa))})}function A(ia,ja,la,da){return function(){for(var oa=0,sa=0;sa<la.length;sa++){var ma=la[sa];ma===da.interactionState.dragInProgress?(ma.x=ma.lastDraggedX,ma.y=ma.lastDraggedY):(ma.vx=(ma.originalX-ma.x)/G.forceTicksPerFrame,ma.y=Math.min(da.size-ma.dy/2,Math.max(ma.dy/2,ma.y)));oa=Math.max(oa,Math.abs(ma.vx),Math.abs(ma.vy))}!da.interactionState.dragInProgress&&.1>oa&&0<da.forceLayouts[ja].alpha()&&da.forceLayouts[ja].alpha(0)}}function z(ia,ja){for(var la=[],da=
[],oa=0;oa<ia.graph.nodes.length;oa++){var sa=(ia.graph.nodes[oa].y0+ia.graph.nodes[oa].y1)/2;la.push((ia.graph.nodes[oa].x0+ia.graph.nodes[oa].x1)/2/ia.figure.width);da.push(sa/ia.figure.height)}ca.call("_guiRestyle",ja,{"node.x":[la],"node.y":[da]},ia.trace.index).then(function(){ja._fullLayout._dragCover&&ja._fullLayout._dragCover.remove()})}function E(ia){var ja=[],la;for(la=0;la<ia.length;la++)ia[la].originalX=(ia[la].x0+ia[la].x1)/2,ia[la].originalY=(ia[la].y0+ia[la].y1)/2,-1===ja.indexOf(ia[la].originalX)&&
ja.push(ia[la].originalX);ja.sort(function(da,oa){return da-oa});for(la=0;la<ia.length;la++)ia[la].originalLayerIndex=ja.indexOf(ia[la].originalX),ia[la].originalLayer=ia[la].originalLayerIndex/(ja.length-1)}function C(ia){ia.lastDraggedX=ia.x0+ia.dx/2;ia.lastDraggedY=ia.y0+ia.dy/2}function u(ia){return function(ja){return ja.node.originalX===ia.node.originalX}}function D(ia){for(var ja=0;ja<ia.length;ja++)ia[ja].y=(ia[ja].y0+ia[ja].y1)/2,ia[ja].x=(ia[ja].x0+ia[ja].x1)/2}var G=b("./constants"),J=
b("d3"),L=b("tinycolor2"),K=b("../../components/color"),H=b("../../components/drawing"),Q=b("@plotly/d3-sankey"),M=b("@plotly/d3-sankey-circular"),P=b("d3-force"),T=b("../../lib"),O=T.strTranslate;I=b("../../lib/gup");var U=I.keyFun,S=I.repeat,X=I.unwrap,ba=b("d3-interpolate").interpolateNumber,ca=b("../../registry");N.exports=function(ia,ja,la,da,oa){var sa=!1;T.ensureSingle(ia._fullLayout._infolayer,"g","first-render",function(){sa=!0});var ma=ia._fullLayout._dragCover;la=la.filter(function(pa){return X(pa).trace.visible}).map(r.bind(null,
da));ja=ja.selectAll("."+G.cn.sankey).data(la,U);ja.exit().remove();ja.enter().append("g").classed(G.cn.sankey,!0).style("box-sizing","content-box").style("position","absolute").style("left",0).style("shape-rendering","geometricPrecision").style("pointer-events","auto").attr("transform",n);ja.each(function(pa,na){ia._fullData[na]._sankey=pa;var ka="bgsankey-"+pa.trace.uid+"-"+na;T.ensureSingle(ia._fullLayout._draggers,"rect",ka);ia._fullData[na]._bgRect=J.select("."+ka);ia._fullData[na]._bgRect.style("pointer-events",
"all").attr("width",pa.width).attr("height",pa.height).attr("x",pa.translateX).attr("y",pa.translateY).classed("bgsankey",!0).style({fill:"transparent","stroke-width":0})});ja.transition().ease(G.ease).duration(G.duration).attr("transform",n);la=ja.selectAll("."+G.cn.sankeyLinks).data(S,U);la.enter().append("g").classed(G.cn.sankeyLinks,!0).style("fill","none");da=la.selectAll("."+G.cn.sankeyLink).data(function(pa){return pa.graph.links.filter(function(na){return na.value}).map(q.bind(null,pa))},
U);da.enter().append("path").classed(G.cn.sankeyLink,!0).call(v,ja,oa.linkEvents);da.style("stroke",function(pa){return 1<pa.link.width||0<pa.linkLineWidth?K.tinyRGB(L(pa.linkLineColor)):pa.tinyColorHue}).style("stroke-opacity",function(pa){return 1<pa.link.width||0<pa.linkLineWidth?K.opacity(pa.linkLineColor):pa.tinyColorAlpha}).style("fill",function(pa){return pa.tinyColorHue}).style("fill-opacity",function(pa){return pa.tinyColorAlpha}).style("stroke-width",function(pa){return 1<pa.link.width||
0<pa.linkLineWidth?pa.linkLineWidth:1}).attr("d",m());da.style("opacity",function(){return ia._context.staticPlot||sa||ma?1:0}).transition().ease(G.ease).duration(G.duration).style("opacity",1);da.exit().transition().ease(G.ease).duration(G.duration).style("opacity",0).remove();la=ja.selectAll("."+G.cn.sankeyNodeSet).data(S,U);la.enter().append("g").classed(G.cn.sankeyNodeSet,!0);la.style("cursor",function(pa){switch(pa.arrangement){case "fixed":return"default";case "perpendicular":return"ns-resize";
default:return"move"}});la=la.selectAll("."+G.cn.sankeyNode).data(function(pa){var na=pa.graph.nodes;E(na);return na.map(l.bind(null,pa))},U);la.enter().append("g").classed(G.cn.sankeyNode,!0).call(a).style("opacity",function(pa){return!ia._context.staticPlot&&!sa||pa.partOfGroup?0:1});la.call(v,ja,oa.nodeEvents).call(w,da,oa,ia);la.transition().ease(G.ease).duration(G.duration).call(a).style("opacity",function(pa){return pa.partOfGroup?0:1});la.exit().transition().ease(G.ease).duration(G.duration).style("opacity",
0).remove();oa=la.selectAll("."+G.cn.nodeRect).data(S);oa.enter().append("rect").classed(G.cn.nodeRect,!0).call(g);oa.style("stroke-width",function(pa){return pa.nodeLineWidth}).style("stroke",function(pa){return K.tinyRGB(L(pa.nodeLineColor))}).style("stroke-opacity",function(pa){return K.opacity(pa.nodeLineColor)}).style("fill",function(pa){return pa.tinyColorHue}).style("fill-opacity",function(pa){return pa.tinyColorAlpha});oa.transition().ease(G.ease).duration(G.duration).call(g);oa=la.selectAll("."+
G.cn.nodeCapture).data(S);oa.enter().append("rect").classed(G.cn.nodeCapture,!0).style("fill-opacity",0);oa.attr("x",function(pa){return pa.zoneX}).attr("y",function(pa){return pa.zoneY}).attr("width",function(pa){return pa.zoneWidth}).attr("height",function(pa){return pa.zoneHeight});oa=la.selectAll("."+G.cn.nodeCentered).data(S);oa.enter().append("g").classed(G.cn.nodeCentered,!0).attr("transform",p);oa.transition().ease(G.ease).duration(G.duration).attr("transform",p);ja=oa.selectAll("."+G.cn.nodeLabelGuide).data(S);
ja.enter().append("path").classed(G.cn.nodeLabelGuide,!0).attr("id",function(pa){return pa.uniqueNodeLabelPathId}).attr("d",d).attr("transform",e);ja.transition().ease(G.ease).duration(G.duration).attr("d",d).attr("transform",e);var qa=oa.selectAll("."+G.cn.nodeLabel).data(S);qa.enter().append("text").classed(G.cn.nodeLabel,!0).attr("transform",f).style("cursor","default").style("fill","black");qa.style("text-shadow",function(pa){return pa.horizontal?"-1px 1px 1px #fff, 1px 1px 1px #fff, 1px -1px 1px #fff, -1px -1px 1px #fff":
"none"}).each(function(pa){H.font(qa,pa.textFont)});qa.transition().ease(G.ease).duration(G.duration).attr("transform",f);oa=qa.selectAll("."+G.cn.nodeLabelTextPath).data(S);oa.enter().append("textPath").classed(G.cn.nodeLabelTextPath,!0).attr("alignment-baseline","middle").attr("xlink:href",function(pa){return"#"+pa.uniqueNodeLabelPathId}).attr("startOffset",t).style("fill",k);oa.text(function(pa){return pa.horizontal||5<pa.node.dy?pa.node.label:""}).attr("text-anchor",function(pa){return pa.horizontal&&
pa.left?"end":"start"});oa.transition().ease(G.ease).duration(G.duration).attr("startOffset",t).style("fill",k)}},{"../../components/color":643,"../../components/drawing":665,"../../lib":778,"../../lib/gup":775,"../../registry":911,"./constants":1180,"@plotly/d3-sankey":56,"@plotly/d3-sankey-circular":55,d3:169,"d3-force":160,"d3-interpolate":162,tinycolor2:576}],1185:[function(b,N,I){N.exports=function(r,q){for(var m=[],l=r.cd[0].trace,a=l._sankey.graph.nodes,h=0;h<a.length;h++){var g=a[h];if(!g.partOfGroup){var n=
[(g.x0+g.x1)/2,(g.y0+g.y1)/2];"v"===l.orientation&&n.reverse();q&&q.contains(n,!1,h,r)&&m.push({pointNumber:g.pointNumber})}}return m}},{}],1186:[function(b,N,I){var r=b("../../lib");N.exports=function(q,m){for(var l=0;l<q.length;l++)q[l].i=l;r.mergeArray(m.text,q,"tx");r.mergeArray(m.texttemplate,q,"txt");r.mergeArray(m.hovertext,q,"htx");r.mergeArray(m.customdata,q,"data");r.mergeArray(m.textposition,q,"tp");m.textfont&&(r.mergeArrayCastPositive(m.textfont.size,q,"ts"),r.mergeArray(m.textfont.color,
q,"tc"),r.mergeArray(m.textfont.family,q,"tf"));if(m=m.marker){r.mergeArrayCastPositive(m.size,q,"ms");r.mergeArrayCastPositive(m.opacity,q,"mo");r.mergeArray(m.symbol,q,"mx");r.mergeArray(m.color,q,"mc");if(l=m.line)r.mergeArray(l.color,q,"mlc"),r.mergeArrayCastPositive(l.width,q,"mlw");(m=m.gradient)&&"none"!==m.type&&(r.mergeArray(m.type,q,"mgt"),r.mergeArray(m.color,q,"mgc"))}}},{"../../lib":778}],1187:[function(b,N,I){function r(p){return{valType:"any",dflt:0,editType:"calc"}}function q(p){return{valType:"enumerated",
values:["start","middle","end"],dflt:"middle",editType:"calc"}}I=b("../../plots/template_attributes").texttemplateAttrs;var m=b("../../plots/template_attributes").hovertemplateAttrs,l=b("../../components/colorscale/attributes"),a=b("../../plots/font_attributes"),h=b("../../components/drawing/attributes").dash,g=b("../../components/drawing"),n=b("./constants");b=b("../../lib/extend").extendFlat;N.exports={x:{valType:"data_array",editType:"calc+clearAxisTypes",anim:!0},x0:{valType:"any",dflt:0,editType:"calc+clearAxisTypes",
anim:!0},dx:{valType:"number",dflt:1,editType:"calc",anim:!0},y:{valType:"data_array",editType:"calc+clearAxisTypes",anim:!0},y0:{valType:"any",dflt:0,editType:"calc+clearAxisTypes",anim:!0},dy:{valType:"number",dflt:1,editType:"calc",anim:!0},xperiod:r("x"),yperiod:r("y"),xperiod0:{valType:"any",editType:"calc"},yperiod0:{valType:"any",editType:"calc"},xperiodalignment:q("x"),yperiodalignment:q("y"),stackgroup:{valType:"string",dflt:"",editType:"calc"},orientation:{valType:"enumerated",values:["v",
"h"],editType:"calc"},groupnorm:{valType:"enumerated",values:["","fraction","percent"],dflt:"",editType:"calc"},stackgaps:{valType:"enumerated",values:["infer zero","interpolate"],dflt:"infer zero",editType:"calc"},text:{valType:"string",dflt:"",arrayOk:!0,editType:"calc"},texttemplate:I({},{}),hovertext:{valType:"string",dflt:"",arrayOk:!0,editType:"style"},mode:{valType:"flaglist",flags:["lines","markers","text"],extras:["none"],editType:"calc"},hoveron:{valType:"flaglist",flags:["points","fills"],
editType:"style"},hovertemplate:m({},{keys:n.eventDataKeys}),line:{color:{valType:"color",editType:"style",anim:!0},width:{valType:"number",min:0,dflt:2,editType:"style",anim:!0},shape:{valType:"enumerated",values:"linear spline hv vh hvh vhv".split(" "),dflt:"linear",editType:"plot"},smoothing:{valType:"number",min:0,max:1.3,dflt:1,editType:"plot"},dash:b({},h,{editType:"style"}),simplify:{valType:"boolean",dflt:!0,editType:"plot"},editType:"plot"},connectgaps:{valType:"boolean",dflt:!1,editType:"calc"},
cliponaxis:{valType:"boolean",dflt:!0,editType:"plot"},fill:{valType:"enumerated",values:"none tozeroy tozerox tonexty tonextx toself tonext".split(" "),editType:"calc"},fillcolor:{valType:"color",editType:"style",anim:!0},marker:b({symbol:{valType:"enumerated",values:g.symbolList,dflt:"circle",arrayOk:!0,editType:"style"},opacity:{valType:"number",min:0,max:1,arrayOk:!0,editType:"style",anim:!0},size:{valType:"number",min:0,dflt:6,arrayOk:!0,editType:"calc",anim:!0},maxdisplayed:{valType:"number",
min:0,dflt:0,editType:"plot"},sizeref:{valType:"number",dflt:1,editType:"calc"},sizemin:{valType:"number",min:0,dflt:0,editType:"calc"},sizemode:{valType:"enumerated",values:["diameter","area"],dflt:"diameter",editType:"calc"},line:b({width:{valType:"number",min:0,arrayOk:!0,editType:"style",anim:!0},editType:"calc"},l("marker.line",{anim:!0})),gradient:{type:{valType:"enumerated",values:["radial","horizontal","vertical","none"],arrayOk:!0,dflt:"none",editType:"calc"},color:{valType:"color",arrayOk:!0,
editType:"calc"},editType:"calc"},editType:"calc"},l("marker",{anim:!0})),selected:{marker:{opacity:{valType:"number",min:0,max:1,editType:"style"},color:{valType:"color",editType:"style"},size:{valType:"number",min:0,editType:"style"},editType:"style"},textfont:{color:{valType:"color",editType:"style"},editType:"style"},editType:"style"},unselected:{marker:{opacity:{valType:"number",min:0,max:1,editType:"style"},color:{valType:"color",editType:"style"},size:{valType:"number",min:0,editType:"style"},
editType:"style"},textfont:{color:{valType:"color",editType:"style"},editType:"style"},editType:"style"},textposition:{valType:"enumerated",values:"top left;top center;top right;middle left;middle center;middle right;bottom left;bottom center;bottom right".split(";"),dflt:"middle center",arrayOk:!0,editType:"calc"},textfont:a({editType:"calc",colorEditType:"style",arrayOk:!0}),r:{valType:"data_array",editType:"calc"},t:{valType:"data_array",editType:"calc"}}},{"../../components/colorscale/attributes":650,
"../../components/drawing":665,"../../components/drawing/attributes":664,"../../lib/extend":768,"../../plots/font_attributes":856,"../../plots/template_attributes":906,"./constants":1191}],1188:[function(b,N,I){function r(v,w,y,B,A,z,E){var C=w._length,u=v._fullLayout;v=y._id;var D=B._id,G=u._firstScatter[l(w)]===w.uid;u=(a(w,u,y,B)||{}).orientation;var J=w.fill;y._minDtick=0;B._minDtick=0;var L={padded:!0},K={padded:!0};E&&(L.ppad=K.ppad=E);(E=2>C||A[0]!==A[C-1]||z[0]!==z[C-1])&&("tozerox"===J||
"tonextx"===J&&(G||"h"===u))?L.tozero=!0:(w.error_y||{}).visible||"tonexty"!==J&&"tozeroy"!==J&&(e.hasMarkers(w)||e.hasText(w))||(L.padded=!1,L.ppad=0);if(E&&("tozeroy"===J||"tonexty"===J&&(G||"v"===u)))K.tozero=!0;else if("tonextx"===J||"tozerox"===J)K.padded=!1;v&&(w._extremes[v]=n.findExtremes(y,A,L));D&&(w._extremes[D]=n.findExtremes(B,z,K))}function q(v,w){if(e.hasMarkers(v)){var y=v.marker,B=1.6*(v.marker.sizeref||1);var A="area"===v.marker.sizemode?function(E){return Math.max(Math.sqrt((E||
0)/B),3)}:function(E){return Math.max((E||0)/B,3)};if(g.isArrayOrTypedArray(y.size)){y={type:"linear"};n.setConvert(y);v=y.makeCalcdata(v.marker,"size");y=Array(w);for(var z=0;z<w;z++)y[z]=A(v[z]);return y}return A(y.size)}}function m(v,w){var y=l(w);v=v._firstScatter;v[y]||(v[y]=w.uid)}function l(v){var w=v.stackgroup;return v.xaxis+v.yaxis+v.type+(w?"-"+w:"")}function a(v,w,y,B){if(v=v.stackgroup)if(w=w._scatterStackOpts[y._id+B._id][v],y="v"===w.orientation?B:y,"linear"===y.type||"log"===y.type)return w}
var h=b("fast-isnumeric"),g=b("../../lib"),n=b("../../plots/cartesian/axes"),p=b("../../plots/cartesian/align_period"),d=b("../../constants/numerical").BADNUM,e=b("./subtypes"),f=b("./colorscale_calc"),k=b("./arrays_to_calcdata"),t=b("./calc_selection");N.exports={calc:function(v,w){var y=v._fullLayout,B=n.getFromId(v,w.xaxis||"x"),A=n.getFromId(v,w.yaxis||"y"),z=B.makeCalcdata(w,"x"),E=A.makeCalcdata(w,"y"),C=p(w,B,"x",z),u=p(w,A,"y",E),D=w._length,G=Array(D),J=w.ids,L=a(w,y,B,A),K=!1,H;m(y,w);y=
"x";var Q="y";if(L){g.pushUnique(L.traceIndices,w._expandedIndex);if(H="v"===L.orientation){Q="s";var M="x"}else y="s",M="y";var P="interpolate"===L.stackgaps}else{var T=q(w,D);r(v,w,B,A,C,u,T)}A=!!w.xperiodalignment;T=!!w.yperiodalignment;for(B=0;B<D;B++){var O=G[B]={},U=h(C[B]),S=h(u[B]);U&&S?(O[y]=C[B],O[Q]=u[B],A&&(O.orig_x=z[B]),T&&(O.orig_y=E[B])):L&&(H?U:S)?(O[M]=H?C[B]:u[B],O.gap=!0,P?(O.s=d,K=!0):O.s=0):O[y]=O[Q]=d;J&&(O.id=String(J[B]))}k(G,w);f(v,w);t(G,w);if(L){for(B=0;B<G.length;)G[B][M]===
d?G.splice(B,1):B++;g.sort(G,function(X,ba){return X[M]-ba[M]||X.i-ba.i});if(K){for(B=0;B<G.length-1&&G[B].gap;)B++;z=G[B].s;z||(z=G[B].s=0);for(v=0;v<B;v++)G[v].s=z;for(w=G.length-1;w>B&&G[w].gap;)w--;z=G[w].s;for(v=G.length-1;v>w;v--)G[v].s=z;for(;B<w;)if(B++,G[B].gap){for(v=B+1;G[v].gap;)v++;z=G[B-1][M];E=G[B-1].s;for(C=(G[v].s-E)/(G[v][M]-z);B<v;)G[B].s=E+(G[B][M]-z)*C,B++}}}return G},calcMarkerSize:q,calcAxisExpansion:r,setFirstScatter:m,getStackOpts:a}},{"../../constants/numerical":753,"../../lib":778,
"../../plots/cartesian/align_period":825,"../../plots/cartesian/axes":828,"./arrays_to_calcdata":1186,"./calc_selection":1189,"./colorscale_calc":1190,"./subtypes":1212,"fast-isnumeric":241}],1189:[function(b,N,I){var r=b("../../lib");N.exports=function(q,m){r.isArrayOrTypedArray(m.selectedpoints)&&r.tagSelected(q,m)}},{"../../lib":778}],1190:[function(b,N,I){var r=b("../../components/colorscale/helpers").hasColorscale,q=b("../../components/colorscale/calc"),m=b("./subtypes");N.exports=function(l,
a){m.hasLines(a)&&r(a,"line")&&q(l,a,{vals:a.line.color,containerStr:"line",cLetter:"c"});m.hasMarkers(a)&&(r(a,"marker")&&q(l,a,{vals:a.marker.color,containerStr:"marker",cLetter:"c"}),r(a,"marker.line")&&q(l,a,{vals:a.marker.line.color,containerStr:"marker.line",cLetter:"c"}))}},{"../../components/colorscale/calc":651,"../../components/colorscale/helpers":654,"./subtypes":1212}],1191:[function(b,N,I){N.exports={PTS_LINESONLY:20,minTolerance:.2,toleranceGrowth:10,maxScreensAway:20,eventDataKeys:[]}},
{}],1192:[function(b,N,I){function r(m,l,a,h,g,n,p){g[h]=!0;h={i:null,gap:!0,s:0};h[p]=a;m.splice(l,0,h);l&&a===m[l-1][p]?(a=m[l-1],h.s=a.s,h.i=a.i,h.gap=a.gap):n&&(n=m[l-1],a=(g=m[l+1])?n?n.s+(g.s-n.s)*(a-n[p])/(g[p]-n[p]):g.s:n.s,h.s=a);l||(m[0].t=m[1].t,m[0].trace=m[1].trace,delete m[1].t,delete m[1].trace)}var q=b("./calc");N.exports=function(m,l){var a=l.xaxis;l=l.yaxis;var h=m._fullLayout._scatterStackOpts[a._id+l._id];if(h){var g=m.calcdata,n,p,d,e,f,k;for(k in h){var t=h[k];var v=t.traceIndices;
if(v.length){var w="interpolate"===t.stackgaps;var y=t.groupnorm;if("v"===t.orientation){var B="x";var A="y"}else B="y",A="x";var z=Array(v.length);for(n=0;n<z.length;n++)z[n]=!1;var E=g[v[0]];var C=Array(E.length);for(n=0;n<E.length;n++)C[n]=E[n][B];for(n=1;n<v.length;n++){var u=g[v[n]];for(p=d=0;p<u.length;p++){for(f=u[p][B];f>C[d]&&d<C.length;d++)r(u,p,C[d],n,z,w,B),p++;if(f!==C[d]){for(e=0;e<n;e++)r(g[v[e]],d,f,e,z,w,B);C.splice(d,0,f)}d++}for(;d<C.length;d++)r(u,p,C[d],n,z,w,B),p++}d=C.length;
for(p=0;p<E.length;p++){e=E[p][A]=E[p].s;for(n=1;n<v.length;n++)u=g[v[n]],u[0].trace._rawLength=u[0].trace._length,u[0].trace._length=d,e+=u[p].s,u[p][A]=e;if(y)for(u=("fraction"===y?e:e/100)||1,n=0;n<v.length;n++)e=g[v[n]][p],e[A]/=u,e.sNorm=e.s/u}for(n=0;n<v.length;n++){u=g[v[n]];E=u[0].trace;y=q.calcMarkerSize(E,E._rawLength);A=Array.isArray(y);if(y&&z[n]||A)for(e=y,y=Array(d),p=0;p<d;p++)y[p]=u[p].gap?0:A?e[u[p].i]:e;A=Array(d);e=Array(d);for(p=0;p<d;p++)A[p]=u[p].x,e[p]=u[p].y;q.calcAxisExpansion(m,
E,a,l,A,e,y);u[0].t.orientation=t.orientation}}}}}},{"./calc":1188}],1193:[function(b,N,I){N.exports=function(r){for(var q=0;q<r.length;q++){var m=r[q];if("scatter"===m.type){var l=m.fill;if("none"!==l&&"toself"!==l&&(m.opacity=void 0,"tonexty"===l||"tonextx"===l))for(l=q-1;0<=l;l--){var a=r[l];if("scatter"===a.type&&a.xaxis===m.xaxis&&a.yaxis===m.yaxis){a.opacity=void 0;break}}}}}},{}],1194:[function(b,N,I){var r=b("../../lib"),q=b("../../registry"),m=b("./attributes"),l=b("./constants"),a=b("./subtypes"),
h=b("./xy_defaults"),g=b("./period_defaults"),n=b("./stack_defaults"),p=b("./marker_defaults"),d=b("./line_defaults"),e=b("./line_shape_defaults"),f=b("./text_defaults"),k=b("./fillcolor_defaults");N.exports=function(t,v,w,y){function B(E,C){return r.coerce(t,v,m,E,C)}var A=h(t,v,y,B);A||(v.visible=!1);if(v.visible){g(t,v,y,B);var z=n(t,v,y,B);A=!z&&A<l.PTS_LINESONLY?"lines+markers":"lines";B("text");B("hovertext");B("mode",A);a.hasLines(v)&&(d(t,v,w,y,B),e(t,v,B),B("connectgaps"),B("line.simplify"));
a.hasMarkers(v)&&p(t,v,w,y,B,{gradient:!0});a.hasText(v)&&(B("texttemplate"),f(t,v,y,B));y=[];if(a.hasMarkers(v)||a.hasText(v))B("cliponaxis"),B("marker.maxdisplayed"),y.push("points");B("fill",z?z.fillDflt:"none");"none"!==v.fill&&(k(t,v,w,B),a.hasLines(v)||e(t,v,B));z=(v.line||{}).color;A=(v.marker||{}).color;"tonext"!==v.fill&&"toself"!==v.fill||y.push("fills");B("hoveron",y.join("+")||"points");"fills"!==v.hoveron&&B("hovertemplate");y=q.getComponentMethod("errorbars","supplyDefaults");y(t,v,
z||A||w,{axis:"y"});y(t,v,z||A||w,{axis:"x",inherit:"y"});r.coerceSelectionMarkerOpacity(v,B)}}},{"../../lib":778,"../../registry":911,"./attributes":1187,"./constants":1191,"./fillcolor_defaults":1195,"./line_defaults":1200,"./line_shape_defaults":1202,"./marker_defaults":1206,"./period_defaults":1207,"./stack_defaults":1210,"./subtypes":1212,"./text_defaults":1213,"./xy_defaults":1214}],1195:[function(b,N,I){var r=b("../../components/color"),q=b("../../lib").isArrayOrTypedArray;N.exports=function(m,
l,a,h){m=!1;if(l.marker){var g=l.marker.color,n=(l.marker.line||{}).color;g&&!q(g)?m=g:n&&!q(n)&&(m=n)}h("fillcolor",r.addOpacity((l.line||{}).color||m||a,.5))}},{"../../components/color":643,"../../lib":778}],1196:[function(b,N,I){var r=b("../../plots/cartesian/axes");N.exports=function(q,m,l){var a={},h={_fullLayout:l};l=r.getFromTrace(h,m,"x");m=r.getFromTrace(h,m,"y");a.xLabel=r.tickText(l,q.x,!0).text;a.yLabel=r.tickText(m,q.y,!0).text;return a}},{"../../plots/cartesian/axes":828}],1197:[function(b,
N,I){var r=b("../../components/color"),q=b("./subtypes");N.exports=function(m,l){if("lines"===m.mode)return(l=m.line.color)&&r.opacity(l)?l:m.fillcolor;if("none"===m.mode)return m.fill?m.fillcolor:"";var a=l.mcc||(m.marker||{}).color,h=l.mlcc||((m.marker||{}).line||{}).color;return(l=a&&r.opacity(a)?a:h&&r.opacity(h)&&(l.mlw||((m.marker||{}).line||{}).width)?h:"")?.3>r.opacity(l)?r.addOpacity(l,.3):l:(l=(m.line||{}).color)&&r.opacity(l)&&q.hasLines(m)&&m.line.width?l:m.fillcolor}},{"../../components/color":643,
"./subtypes":1212}],1198:[function(b,N,I){var r=b("../../lib"),q=b("../../components/fx"),m=b("../../registry"),l=b("./get_trace_color"),a=b("../../components/color"),h=r.fillText;N.exports=function(g,n,p,d){var e=g.cd,f=e[0].trace,k=g.xa,t=g.ya,v=k.c2p(n),w=t.c2p(p),y=[v,w];p=f.hoveron||"";var B=-1!==f.mode.indexOf("markers")?3:.5;if(-1!==p.indexOf("points")&&(n=function(G){var J=Math.max(B,G.mrc||0),L=k.c2p(G.x)-v;G=t.c2p(G.y)-w;return Math.max(Math.sqrt(L*L+G*G)-J,1-B/J)},d=q.getDistanceFunction(d,
function(G){var J=Math.max(3,G.mrc||0),L=1-1/J;G=Math.abs(k.c2p(G.x)-v);return G<J?L*G/J:G-J+L},function(G){var J=Math.max(3,G.mrc||0),L=1-1/J;G=Math.abs(t.c2p(G.y)-w);return G<J?L*G/J:G-J+L},n),q.getClosest(e,d,g),!1!==g.index)){d=e[g.index];p=k.c2p(d.x,!0);y=t.c2p(d.y,!0);var A=d.mrc||1;g.index=d.i;var z=e[0].t.orientation,E=z&&(d.sNorm||d.s);e="h"===z?E:void 0!==d.orig_x?d.orig_x:d.x;z="v"===z?E:void 0!==d.orig_y?d.orig_y:d.y;r.extendFlat(g,{color:l(f,d),x0:p-A,x1:p+A,xLabelVal:e,y0:y-A,y1:y+A,
yLabelVal:z,spikeDistance:n(d),hovertemplate:f.hovertemplate});h(d,f,g);m.getComponentMethod("errorbars","hoverInfo")(d,f,g);return[g]}if(-1!==p.indexOf("fills")&&f._polygons){A=f._polygons;d=[];z=!1;n=Infinity;e=-Infinity;E=Infinity;var C=-Infinity;for(p=0;p<A.length;p++){var u=A[p];u.contains(y)&&(z=!z,d.push(u),E=Math.min(E,u.ymin),C=Math.max(C,u.ymax))}if(z){E=Math.max(E,0);C=Math.min(C,t._length);y=(E+C)/2;for(p=0;p<d.length;p++)for(z=d[p].pts,A=1;A<z.length;A++){u=z[A-1][1];var D=z[A][1];u>
y!==D>=y&&(E=z[A-1][0],C=z[A][0],D-u&&(E+=(C-E)*(y-u)/(D-u),n=Math.min(n,E),e=Math.max(e,E)))}n=Math.max(n,0);e=Math.min(e,k._length);d=a.defaultLine;a.opacity(f.fillcolor)?d=f.fillcolor:a.opacity((f.line||{}).color)&&(d=f.line.color);r.extendFlat(g,{distance:g.maxHoverDistance,x0:n,x1:e,y0:y,y1:y,color:d,hovertemplate:!1});delete g.index;f.text&&!Array.isArray(f.text)?g.text=String(f.text):g.text=f.name;return[g]}}}},{"../../components/color":643,"../../components/fx":683,"../../lib":778,"../../registry":911,
"./get_trace_color":1197}],1199:[function(b,N,I){I=b("./subtypes");N.exports={hasLines:I.hasLines,hasMarkers:I.hasMarkers,hasText:I.hasText,isBubble:I.isBubble,attributes:b("./attributes"),supplyDefaults:b("./defaults"),crossTraceDefaults:b("./cross_trace_defaults"),calc:b("./calc").calc,crossTraceCalc:b("./cross_trace_calc"),arraysToCalcdata:b("./arrays_to_calcdata"),plot:b("./plot"),colorbar:b("./marker_colorbar"),formatLabels:b("./format_labels"),style:b("./style").style,styleOnSelect:b("./style").styleOnSelect,
hoverPoints:b("./hover"),selectPoints:b("./select"),animatable:!0,moduleType:"trace",name:"scatter",basePlotModule:b("../../plots/cartesian"),categories:"cartesian svg symbols errorBarsOK showLegend scatter-like zoomScale".split(" "),meta:{}}},{"../../plots/cartesian":841,"./arrays_to_calcdata":1186,"./attributes":1187,"./calc":1188,"./cross_trace_calc":1192,"./cross_trace_defaults":1193,"./defaults":1194,"./format_labels":1196,"./hover":1198,"./marker_colorbar":1205,"./plot":1208,"./select":1209,
"./style":1211,"./subtypes":1212}],1200:[function(b,N,I){var r=b("../../lib").isArrayOrTypedArray,q=b("../../components/colorscale/helpers").hasColorscale,m=b("../../components/colorscale/defaults");N.exports=function(l,a,h,g,n,p){var d=(l.marker||{}).color;n("line.color",h);q(l,"line")?m(l,a,g,n,{prefix:"line.",cLetter:"c"}):(l=(r(d)?!1:d)||h,n("line.color",l));n("line.width");(p||{}).noDash||n("line.dash")}},{"../../components/colorscale/defaults":653,"../../components/colorscale/helpers":654,"../../lib":778}],
1201:[function(b,N,I){I=b("../../constants/numerical");var r=I.BADNUM;I=I.LOG_CLIP;var q=I+.5,m=I-.5,l=b("../../lib"),a=l.segmentsIntersect,h=l.constrain,g=b("./constants");N.exports=function(n,p){function d(Oa){Oa=n[Oa];if(!Oa)return!1;var bb=p.linearized?C.l2p(Oa.x):C.c2p(Oa.x),Xa=p.linearized?u.l2p(Oa.y):u.c2p(Oa.y);if(bb===r){D&&(bb=C.c2p(Oa.x,!0));if(bb===r)return!1;G&&Xa===r&&(bb*=Math.abs(C._m*L*(0<C._m?q:m)/(u._m*J*(0<u._m?q:m))));bb*=1E3}if(Xa===r){G&&(Xa=u.c2p(Oa.y,!0));if(Xa===r)return!1;
Xa*=1E3}return[bb,Xa]}function e(Oa,bb,Xa,tb){Xa-=Oa;tb-=bb;Oa=.5-Oa;var Ka=.5-bb;bb=Xa*Xa+tb*tb;var Ta=Xa*Oa+tb*Ka;if(0<Ta&&Ta<bb&&(Xa=Oa*tb-Ka*Xa,Xa*Xa<bb))return!0}function f(Oa,bb){var Xa=Oa[0]/J;Oa=Oa[1]/L;var tb=Math.max(0,-Xa,Xa-1,-Oa,Oa-1);tb&&void 0!==ia&&e(Xa,Oa,ia,ja)&&(tb=0);tb&&bb&&e(Xa,Oa,bb[0]/J,bb[1]/L)&&(tb=0);return(1+g.toleranceGrowth*tb)*H}function k(Oa,bb){var Xa=Oa[0]-bb[0];Oa=Oa[1]-bb[1];return Math.sqrt(Xa*Xa+Oa*Oa)}function t(Oa,bb){for(var Xa=[],tb=0,Ka=0;4>Ka;Ka++){var Ta=
qa[Ka];(Ta=a(Oa[0],Oa[1],bb[0],bb[1],Ta[0],Ta[1],Ta[2],Ta[3]))&&(!tb||1<Math.abs(Ta.x-Xa[0][0])||1<Math.abs(Ta.y-Xa[0][1]))&&(Ta=[Ta.x,Ta.y],tb&&k(Ta,Oa)<k(Xa[0],Oa)?Xa.unshift(Ta):Xa.push(Ta),tb++)}return Xa}function v(Oa){if(Oa[0]<da||Oa[0]>oa||Oa[1]<sa||Oa[1]>ma)return[h(Oa[0],da,oa),h(Oa[1],sa,ma)]}function w(Oa,bb){if(Oa[0]===bb[0]&&(Oa[0]===da||Oa[0]===oa)||Oa[1]===bb[1]&&(Oa[1]===sa||Oa[1]===ma))return!0}function y(Oa,bb){var Xa=[];Oa=v(Oa);bb=v(bb);if(Oa&&bb&&w(Oa,bb))return Xa;Oa&&Xa.push(Oa);
bb&&Xa.push(bb);return Xa}function B(Oa,bb,Xa){return function(tb,Ka){var Ta=v(tb),Na=v(Ka),ib=[];if(Ta&&Na&&w(Ta,Na))return ib;Ta&&ib.push(Ta);Na&&ib.push(Na);if(tb=2*l.constrain((tb[Oa]+Ka[Oa])/2,bb,Xa)-((Ta||tb)[Oa]+(Na||Ka)[Oa]))Ta=Ta&&Na?0<tb===Ta[Oa]>Na[Oa]?Ta:Na:Ta||Na,Ta[Oa]+=tb;return ib}}function A(Oa){var bb=Oa[0],Xa=Oa[1],tb=bb===S[X-1][0],Ka=Xa===S[X-1][1];if(!tb||!Ka)if(1<X){var Ta=bb===S[X-2][0],Na=Xa===S[X-2][1];tb&&(bb===da||bb===oa)&&Ta?Na?X--:S[X-1]=Oa:Ka&&(Xa===sa||Xa===ma)&&Na?
Ta?X--:S[X-1]=Oa:S[X++]=Oa}else S[X++]=Oa}function z(Oa){S[X-1][0]!==Oa[0]&&S[X-1][1]!==Oa[1]&&A([ka,ua]);A(Oa);Ma=null;ka=ua=0}function E(Oa){ia=Oa[0]/J;ja=Oa[1]/L;pa=Oa[0]<da?da:Oa[0]>oa?oa:0;na=Oa[1]<sa?sa:Oa[1]>ma?ma:0;if(pa||na){if(X)if(Ma){var bb=Ca(Ma,Oa);1<bb.length&&(z(bb[0]),S[X++]=bb[1])}else va=Ca(S[X-1],Oa)[0],S[X++]=va;else S[X++]=[pa||Oa[0],na||Oa[1]];bb=S[X-1];if(pa&&na&&(bb[0]!==pa||bb[1]!==na)){if(Ma)if(ka!==pa&&ua!==na)if(ka&&ua){bb=Oa[0]-Ma[0];var Xa=(Oa[1]-Ma[1])/bb;bb=0<(Ma[1]*
Oa[0]-Oa[1]*Ma[0])/bb?[0<Xa?da:oa,ma]:[0<Xa?oa:da,sa];A(bb)}else A([ka||pa,ua||na]);else ka&&ua&&A([ka,ua]);A([pa,na])}else ka-pa&&ua-na&&A([pa||ka,na||ua]);Ma=Oa;ka=pa;ua=na}else Ma&&z(Ca(Ma,Oa)[0]),S[X++]=Oa}var C=p.xaxis,u=p.yaxis,D="log"===C.type,G="log"===u.type,J=C._length,L=u._length,K=p.connectGaps,H=p.baseTolerance,Q=p.shape,M="linear"===Q,P=p.fill&&"none"!==p.fill,T=[],O=g.minTolerance,U=n.length,S=Array(U),X=0,ba,ca,ia,ja;var la=g.maxScreensAway;var da=-J*la,oa=J*(1+la),sa=-L*la,ma=L*(1+
la),qa=[[da,sa,oa,sa],[oa,sa,oa,ma],[oa,ma,da,ma],[da,ma,da,sa]],pa,na,ka,ua,va,Ca;"linear"===Q||"spline"===Q?Ca=t:"hv"===Q||"vh"===Q?Ca=y:"hvh"===Q?Ca=B(0,da,oa):"vhv"===Q&&(Ca=B(1,sa,ma));for(Q=0;Q<U;Q++)if(la=d(Q)){X=0;var Ma=null;E(la);for(Q++;Q<U;Q++){var Ua=d(Q);if(!Ua)if(K)continue;else break;if(M&&p.simplify){var eb=d(Q+1);var fb=k(Ua,la);if(P&&(0===X||X===U-1)||!(fb<f(Ua,eb)*O)){var nb=[(Ua[0]-la[0])/fb,(Ua[1]-la[1])/fb];var cb=la;var $a=fb;var jb=ba=ca=0;var pb=!1;fb=Ua;for(Q++;Q<n.length;Q++){var xa=
eb;eb=d(Q+1);if(!xa)if(K)continue;else break;var Ea=[xa[0]-la[0],xa[1]-la[1]];var Ia=Ea[0]*nb[1]-Ea[1]*nb[0];ba=Math.min(ba,Ia);ca=Math.max(ca,Ia);if(ca-ba>f(xa,eb))break;fb=xa;Ea=Ea[0]*nb[0]+Ea[1]*nb[1];Ea>$a?($a=Ea,Ua=xa,pb=!1):Ea<jb&&(jb=Ea,cb=xa,pb=!0)}pb?(E(Ua),fb!==cb&&E(cb)):(cb!==la&&E(cb),fb!==Ua&&E(Ua));E(fb);if(Q>=n.length||!xa)break;E(xa);la=xa}}else E(Ua)}Ma&&A([ka||Ma[0],ua||Ma[1]]);T.push(S.slice(0,X))}return T}},{"../../constants/numerical":753,"../../lib":778,"./constants":1191}],
1202:[function(b,N,I){N.exports=function(r,q,m){"spline"===m("line.shape")&&m("line.smoothing")}},{}],1203:[function(b,N,I){var r={tonextx:1,tonexty:1,tonext:1};N.exports=function(q,m,l){var a,h={};var g=!1;var n=-1,p=0,d=-1;for(m=0;m<l.length;m++)q=l[m][0].trace,(a=q.stackgroup||"")?a in h?a=h[a]:(a=h[a]=p,p++):q.fill in r&&0<=d?a=d:(a=d=p,p++),a<n&&(g=!0),q._groupIndex=n=a;l=l.slice();g&&l.sort(function(e,f){e=e[0].trace;f=f[0].trace;return e._groupIndex-f._groupIndex||e.index-f.index});h={};for(m=
0;m<l.length;m++)q=l[m][0].trace,a=q.stackgroup||"",!0===q.visible?(q._nexttrace=null,q.fill in r&&(g=h[a],q._prevtrace=g||null,g&&(g._nexttrace=q)),q._ownfill=q.fill&&("tozero"===q.fill.substr(0,6)||"toself"===q.fill||"to"===q.fill.substr(0,2)&&!q._prevtrace),h[a]=q):q._prevtrace=q._nexttrace=q._ownfill=null;return l}},{}],1204:[function(b,N,I){var r=b("fast-isnumeric");N.exports=function(q){q=q.marker;var m=q.sizeref||1,l=q.sizemin||0,a="area"===q.sizemode?function(h){return Math.sqrt(h/m)}:function(h){return h/
m};return function(h){h=a(h/2);return r(h)&&0<h?Math.max(h,l):0}}},{"fast-isnumeric":241}],1205:[function(b,N,I){N.exports={container:"marker",min:"cmin",max:"cmax"}},{}],1206:[function(b,N,I){var r=b("../../components/color"),q=b("../../components/colorscale/helpers").hasColorscale,m=b("../../components/colorscale/defaults"),l=b("./subtypes");N.exports=function(a,h,g,n,p,d){var e=l.isBubble(a),f=(a.line||{}).color;d=d||{};f&&(g=f);p("marker.symbol");p("marker.opacity",e?.7:1);p("marker.size");p("marker.color",
g);q(a,"marker")&&m(a,h,n,p,{prefix:"marker.",cLetter:"c"});d.noSelect||(p("selected.marker.color"),p("unselected.marker.color"),p("selected.marker.size"),p("unselected.marker.size"));d.noLine||(g=f&&!Array.isArray(f)&&h.marker.color!==f?f:e?r.background:r.defaultLine,p("marker.line.color",g),q(a,"marker.line")&&m(a,h,n,p,{prefix:"marker.line.",cLetter:"c"}),p("marker.line.width",e?1:0));e&&(p("marker.sizeref"),p("marker.sizemin"),p("marker.sizemode"));d.gradient&&"none"!==p("marker.gradient.type")&&
p("marker.gradient.color")}},{"../../components/color":643,"../../components/colorscale/defaults":653,"../../components/colorscale/helpers":654,"./subtypes":1212}],1207:[function(b,N,I){function r(l,a){return 0===l%m?q(a,1):q(a,0)}var q=b("../../lib").dateTick0,m=b("../../constants/numerical").ONEWEEK;N.exports=function(l,a,h,g,n){n||(n={x:!0,y:!0});n.x&&(l=g("xperiod"))&&(g("xperiod0",r(l,a.xcalendar)),g("xperiodalignment"));n.y&&(n=g("yperiod"))&&(g("yperiod0",r(n,a.ycalendar)),g("yperiodalignment"))}},
{"../../constants/numerical":753,"../../lib":778}],1208:[function(b,N,I){function r(t,v,w){v.each(function(y){var B=g(l.select(this),"g","fills");p.setClipUrl(B,w.layerClipId,t);var A=y[0].trace;y=[];A._ownfill&&y.push("_ownFill");A._nexttrace&&y.push("_nextFill");B=B.selectAll("g").data(y,n);B.enter().append("g");B.exit().each(function(z){A[z]=null}).remove();B.order().each(function(z){A[z]=g(l.select(this),"path","js-fill")})})}function q(t,v,w,y,B,A,z){function E(na){return K?na.transition():na}
function C(na){E(na).attr("d","M0,0Z")}function u(na){return na.filter(function(ka){return!ka.gap&&ka.vis})}function D(na){return na.filter(function(ka){return ka.vis})}function G(na){return na.filter(function(ka){return!ka.gap})}function J(na){return na.id}function L(){return!1}m(t,v,w,y,B);var K=!!z&&0<z.duration,H=w.xaxis,Q=w.yaxis,M=y[0].trace,P=M.line,T=l.select(A),O=g(T,"g","errorbars");A=g(T,"g","lines");v=g(T,"g","points");B=g(T,"g","text");a.getComponentMethod("errorbars","plot")(t,O,w,z);
if(!0===M.visible){E(T).style("opacity",M.opacity);var U=M.fill.charAt(M.fill.length-1);"x"!==U&&"y"!==U&&(U="");y[0][w.isRangePlot?"nodeRangePlot3":"node3"]=T;z="";T=[];if(O=M._prevtrace){z=O._prevRevpath||"";var S=O._nextFill;T=O._polygons}var X,ba,ca="",ia="",ja=[];var la=h.noop;O=M._ownFill;if(d.hasLines(M)||"none"!==M.fill){S&&S.datum(y);if(-1!==["hv","vh","hvh","vhv"].indexOf(P.shape)){var da=p.steps(P.shape);var oa=p.steps(P.shape.split("").reverse().join(""))}else da="spline"===P.shape?oa=
function(na){var ka=na[na.length-1];return 1<na.length&&na[0][0]===ka[0]&&na[0][1]===ka[1]?p.smoothclosed(na.slice(1),P.smoothing):p.smoothopen(na,P.smoothing)}:oa=function(na){return"M"+na.join("L")};var sa=function(na){return oa(na.reverse())};ja=e(y,{xaxis:H,yaxis:Q,connectGaps:M.connectgaps,baseTolerance:Math.max(P.width||1,3)/4,shape:P.shape,simplify:P.simplify,fill:M.fill});var ma=M._polygons=Array(ja.length);for(la=0;la<ja.length;la++)M._polygons[la]=k(ja[la]);if(ja.length){var qa=ja[0][0];
var pa=ja[ja.length-1];pa=pa[pa.length-1]}la=function(na){return function(ka){X=da(ka);ba=sa(ka);ca?U?(ca+="L"+X.substr(1),ia=ba+("L"+ia.substr(1))):(ca+="Z"+X,ia=ba+"Z"+ia):(ca=X,ia=ba);d.hasLines(M)&&1<ka.length&&(ka=l.select(this),ka.datum(y),na?E(ka.style("opacity",0).attr("d",X).call(p.lineGroupStyle)).style("opacity",1):(ka=E(ka),ka.attr("d",X),p.singleLineStyle(y,ka)))}}}A=A.selectAll(".js-line").data(ja);E(A.exit()).style("opacity",0).remove();A.each(la(!1));A.enter().append("path").classed("js-line",
!0).style("vector-effect","non-scaling-stroke").call(p.lineGroupStyle).each(la(!0));p.setClipUrl(A,w.layerClipId,t);ja.length?(O?(O.datum(y),qa&&pa&&(U?("y"===U?qa[1]=pa[1]=Q.c2p(0,!0):"x"===U&&(qa[0]=pa[0]=H.c2p(0,!0)),E(O).attr("d","M"+pa+"L"+qa+"L"+ca.substr(1)).call(p.singleFillStyle)):E(O).attr("d",ca+"Z").call(p.singleFillStyle))):S&&("tonext"===M.fill.substr(0,6)&&ca&&z?("tonext"===M.fill?E(S).attr("d",ca+"Z"+z+"Z").call(p.singleFillStyle):E(S).attr("d",ca+"L"+z.substr(1)+"Z").call(p.singleFillStyle),
M._polygons=M._polygons.concat(T)):(C(S),M._polygons=null)),M._prevRevpath=ia,M._prevPolygons=ma):(O?C(O):S&&C(S),M._polygons=M._prevRevpath=M._prevPolygons=null);v.datum(y);B.datum(y);(function(na,ka,ua){var va,Ca=ua[0].trace;ua=d.hasMarkers(Ca);var Ma=d.hasText(Ca);var Ua=Ca.ids?J:void 0;var eb=L,fb=L;if(ua||Ma){var nb=n,cb=Ca.stackgroup,$a=cb&&"infer zero"===t._fullLayout._scatterStackOpts[H._id+Q._id][cb].stackgaps;Ca.marker.maxdisplayed||Ca._needsCull?nb=$a?D:u:cb&&!$a&&(nb=G);ua&&(eb=nb);Ma&&
(fb=nb)}na=na.selectAll("path.point");na=na.data(eb,Ua);eb=na.enter().append("path").classed("point",!0);K&&eb.call(p.pointStyle,Ca,t).call(p.translatePoints,H,Q).style("opacity",0).transition().style("opacity",1);na.order();var jb;ua&&(jb=p.makePointStyleFns(Ca));na.each(function(pb){var xa=l.select(this),Ea=E(xa);(va=p.translatePoint(pb,Ea,H,Q))?(p.singlePointStyle(pb,Ea,Ca,jb,t),w.layerClipId&&p.hideOutsideRangePoint(pb,Ea,H,Q,Ca.xcalendar,Ca.ycalendar),Ca.customdata&&xa.classed("plotly-customdata",
null!==pb.data&&void 0!==pb.data)):Ea.remove()});K?na.exit().transition().style("opacity",0).remove():na.exit().remove();na=ka.selectAll("g");na=na.data(fb,Ua);na.enter().append("g").classed("textpoint",!0).append("text");na.order();na.each(function(pb){var xa=l.select(this),Ea=E(xa.select("text"));(va=p.translatePoint(pb,Ea,H,Q))?w.layerClipId&&p.hideOutsideRangePoint(pb,xa,H,Q,Ca.xcalendar,Ca.ycalendar):xa.remove()});na.selectAll("text").call(p.textPointStyle,Ca,t).each(function(pb){var xa=H.c2p(pb.x),
Ea=Q.c2p(pb.y);l.select(this).selectAll("tspan.line").each(function(){E(l.select(this)).attr({x:xa,y:Ea})})});na.exit().remove()})(v,B,y);S=!1===M.cliponaxis?null:w.layerClipId;p.setClipUrl(v,S,t);p.setClipUrl(B,S,t)}}function m(t,v,w,y,B){t=w.xaxis;w=w.yaxis;var A=l.extent(h.simpleMap(t.range,t.r2c)),z=l.extent(h.simpleMap(w.range,w.r2c));w=y[0].trace;if(d.hasMarkers(w)&&(w=w.marker.maxdisplayed,0!==w)){t=y.filter(function(D){return D.x>=A[0]&&D.x<=A[1]&&D.y>=z[0]&&D.y<=z[1]});var E=Math.ceil(t.length/
w),C=0;B.forEach(function(D,G){D=D[0].trace;d.hasMarkers(D)&&0<D.marker.maxdisplayed&&G<v&&C++});var u=Math.round(C*E/3+Math.floor(C/3)*E/7.1);y.forEach(function(D){delete D.vis});t.forEach(function(D,G){0===Math.round((G+u)%E)&&(D.vis=!0)})}}var l=b("d3"),a=b("../../registry"),h=b("../../lib"),g=h.ensureSingle,n=h.identity,p=b("../../components/drawing"),d=b("./subtypes"),e=b("./line_points"),f=b("./link_traces"),k=b("../../lib/polygon").tester;N.exports=function(t,v,w,y,B,A){var z,E=!B,C=!!B&&0<
B.duration,u=f(t,v,w);w=y.selectAll("g.trace").data(u,function(D){return D[0].trace.uid});w.enter().append("g").attr("class",function(D){return"trace scatter trace"+D[0].trace.uid}).style("stroke-miterlimit",2);w.order();r(t,w,v);C?(A&&(z=A()),l.transition().duration(B.duration).ease(B.easing).each("end",function(){z&&z()}).each("interrupt",function(){z&&z()}).each(function(){y.selectAll("g.trace").each(function(D,G){q(t,G,v,D,u,this,B)})})):w.each(function(D,G){q(t,G,v,D,u,this,B)});E&&w.exit().remove();
y.selectAll("path:not([d])").remove()}},{"../../components/drawing":665,"../../lib":778,"../../lib/polygon":790,"../../registry":911,"./line_points":1201,"./link_traces":1203,"./subtypes":1212,d3:169}],1209:[function(b,N,I){var r=b("./subtypes");N.exports=function(q,m){var l=q.cd,a=q.xaxis,h=q.yaxis,g=[],n=l[0].trace;if(!r.hasMarkers(n)&&!r.hasText(n))return[];if(!1===m)for(n=0;n<l.length;n++)l[n].selected=0;else for(n=0;n<l.length;n++){var p=l[n];var d=a.c2p(p.x);var e=h.c2p(p.y);null!==p.i&&m.contains([d,
e],!1,n,q)?(g.push({pointNumber:p.i,x:a.c2d(p.x),y:h.c2d(p.y)}),p.selected=1):p.selected=0}return g}},{"./subtypes":1212}],1210:[function(b,N,I){var r=["orientation","groupnorm","stackgaps"];N.exports=function(q,m,l,a){l=l._scatterStackOpts;var h=a("stackgroup");if(h){var g=m.xaxis+m.yaxis,n=l[g];n||(n=l[g]={});l=n[h];g=!1;l?l.traces.push(m):(l=n[h]={traceIndices:[],traces:[m]},g=!0);m={orientation:m.x&&!m.y?"h":"v"};for(h=0;h<r.length;h++){n=r[h];var p=n+"Found";if(!l[p]){var d=void 0!==q[n],e="orientation"===
n;if(d||g)if(l[n]=a(n,m[n]),e&&(l.fillDflt="h"===l[n]?"tonextx":"tonexty"),d&&(l[p]=!0,!g&&(delete l.traces[0][n],e)))for(n=0;n<l.traces.length-1;n++)p=l.traces[n],p._input.fill!==p.fill&&(p.fill=l.fillDflt)}}return l}}},{}],1211:[function(b,N,I){function r(h,g,n){l.pointStyle(h.selectAll("path.point"),g,n)}function q(h,g,n){l.textPointStyle(h.selectAll("text"),g,n)}var m=b("d3"),l=b("../../components/drawing"),a=b("../../registry");N.exports={style:function(h){var g=m.select(h).selectAll("g.trace.scatter");
g.style("opacity",function(n){return n[0].trace.opacity});g.selectAll("g.points").each(function(n){var p=m.select(this);r(p,n.trace||n[0].trace,h)});g.selectAll("g.text").each(function(n){var p=m.select(this);q(p,n.trace||n[0].trace,h)});g.selectAll("g.trace path.js-line").call(l.lineGroupStyle);g.selectAll("g.trace path.js-fill").call(l.fillGroupStyle);a.getComponentMethod("errorbars","style")(g)},stylePoints:r,styleText:q,styleOnSelect:function(h,g,n){g=g[0].trace;g.selectedpoints?(l.selectedPointStyle(n.selectAll("path.point"),
g),l.selectedTextStyle(n.selectAll("text"),g)):(r(n,g,h),q(n,g,h))}}},{"../../components/drawing":665,"../../registry":911,d3:169}],1212:[function(b,N,I){var r=b("../../lib");N.exports={hasLines:function(q){return q.visible&&q.mode&&-1!==q.mode.indexOf("lines")},hasMarkers:function(q){return q.visible&&(q.mode&&-1!==q.mode.indexOf("markers")||"splom"===q.type)},hasText:function(q){return q.visible&&q.mode&&-1!==q.mode.indexOf("text")},isBubble:function(q){return r.isPlainObject(q.marker)&&r.isArrayOrTypedArray(q.marker.size)}}},
{"../../lib":778}],1213:[function(b,N,I){var r=b("../../lib");N.exports=function(q,m,l,a,h){h=h||{};a("textposition");r.coerceFont(a,"textfont",l.font);h.noSelect||(a("selected.textfont.color"),a("unselected.textfont.color"))}},{"../../lib":778}],1214:[function(b,N,I){var r=b("../../lib"),q=b("../../registry");N.exports=function(m,l,a,h){var g=h("x"),n=h("y");q.getComponentMethod("calendars","handleTraceDefaults")(m,l,["x","y"],a);if(g)m=r.minRowLength(g),n?n=Math.min(m,r.minRowLength(n)):(n=m,h("y0"),
h("dy"));else{if(!n)return 0;n=r.minRowLength(n);h("x0");h("dx")}return l._length=n}},{"../../lib":778,"../../registry":911}],1215:[function(b,N,I){function r(e){return{show:{valType:"boolean",dflt:!1},opacity:{valType:"number",min:0,max:1,dflt:1},scale:{valType:"number",min:0,max:10,dflt:2/3}}}I=b("../scatter/attributes");var q=b("../../components/colorscale/attributes"),m=b("../../plots/template_attributes").hovertemplateAttrs,l=b("../../plots/template_attributes").texttemplateAttrs,a=b("../../plots/attributes"),
h=b("../../constants/gl3d_dashes"),g=b("../../constants/gl3d_markers"),n=b("../../lib/extend").extendFlat;b=b("../../plot_api/edit_types").overrideAll;var p=I.marker,d=p.line;h=n({width:I.line.width,dash:{valType:"enumerated",values:Object.keys(h),dflt:"solid"}},q("line"));N=N.exports=b({x:I.x,y:I.y,z:{valType:"data_array"},text:n({},I.text,{}),texttemplate:l({},{}),hovertext:n({},I.hovertext,{}),hovertemplate:m(),mode:n({},I.mode,{dflt:"lines+markers"}),surfaceaxis:{valType:"enumerated",values:[-1,
0,1,2],dflt:-1},surfacecolor:{valType:"color"},projection:{x:r("x"),y:r("y"),z:r("z")},connectgaps:I.connectgaps,line:h,marker:n({symbol:{valType:"enumerated",values:Object.keys(g),dflt:"circle",arrayOk:!0},size:n({},p.size,{dflt:8}),sizeref:p.sizeref,sizemin:p.sizemin,sizemode:p.sizemode,opacity:n({},p.opacity,{arrayOk:!1}),colorbar:p.colorbar,line:n({width:n({},d.width,{arrayOk:!1})},q("marker.line"))},q("marker")),textposition:n({},I.textposition,{dflt:"top center"}),textfont:{color:I.textfont.color,
size:I.textfont.size,family:n({},I.textfont.family,{arrayOk:!1})},hoverinfo:n({},a.hoverinfo)},"calc","nested");N.x.editType=N.y.editType=N.z.editType="calc+clearAxisTypes"},{"../../components/colorscale/attributes":650,"../../constants/gl3d_dashes":750,"../../constants/gl3d_markers":751,"../../lib/extend":768,"../../plot_api/edit_types":810,"../../plots/attributes":824,"../../plots/template_attributes":906,"../scatter/attributes":1187}],1216:[function(b,N,I){var r=b("../scatter/arrays_to_calcdata"),
q=b("../scatter/colorscale_calc");N.exports=function(m,l){var a=[{x:!1,y:!1,trace:l,t:{}}];r(a,l);q(m,l);return a}},{"../scatter/arrays_to_calcdata":1186,"../scatter/colorscale_calc":1190}],1217:[function(b,N,I){function r(m,l,a,h){if(!l||!l.visible)return null;l=q.getComponentMethod("errorbars","makeComputeError")(l);for(var g=Array(m.length),n=0;n<m.length;n++){var p=l(+m[n],n);if("log"===h.type){var d=h.c2l(m[n]),e=m[n]-p[0];p=m[n]+p[1];g[n]=[(h.c2l(e,!0)-d)*a,(h.c2l(p,!0)-d)*a];0<e&&(d=h.c2l(e),
h._lowerLogErrorBound||(h._lowerLogErrorBound=d),h._lowerErrorBound=Math.min(h._lowerLogErrorBound,d))}else g[n]=[-p[0]*a,p[1]*a]}return g}var q=b("../../registry");N.exports=function(m,l,a){m=[r(m.x,m.error_x,l[0],a.xaxis),r(m.y,m.error_y,l[1],a.yaxis),r(m.z,m.error_z,l[2],a.zaxis)];a:{for(l=0;l<m.length;l++)if(m[l]){l=m[l].length;break a}l=0}if(0===l)return null;a=Array(l);for(var h=0;h<l;h++){for(var g=[[0,0,0],[0,0,0]],n=0;3>n;n++)if(m[n])for(var p=0;2>p;p++)g[p][n]=m[n][h][p];a[h]=g}return a}},
{"../../registry":911}],1218:[function(b,N,I){function r(J,L){this.scene=J;this.uid=L;this.color=this.delaunayMesh=this.textMarkers=this.errorBars=this.scatterPlot=this.linePlot=null;this.mode="";this.dataPoints=[];this.axesBounds=[[-Infinity,-Infinity,-Infinity],[Infinity,Infinity,Infinity]];this.data=this.textLabels=null}function q(J){for(var L=[0,0,0],K=[[0,0,0],[0,0,0],[0,0,0]],H=[1,1,1],Q=0;3>Q;Q++){var M=J[Q];M&&!1!==M.copy_zstyle&&!1!==J[2].visible&&(M=J[2]);M&&M.visible&&(L[Q]=M.width/2,K[Q]=
B(M.color),H[Q]=M.thickness)}return{capSize:L,color:K,lineWidth:H}}function m(J){return null===J||void 0===J?0:-1<J.indexOf("left")?-1:-1<J.indexOf("right")?1:0}function l(J){return null===J||void 0===J?0:-1<J.indexOf("top")?-1:-1<J.indexOf("bottom")?1:0}function a(J){var L=[0,0];if(Array.isArray(J))for(var K=0;K<J.length;K++)L[K]=[0,0],J[K]&&(L[K][0]=m(J[K]),L[K][1]=l(J[K]));else L[0]=m(J),L[1]=l(J);return L}function h(J,L){return L(4*J)}function g(J){return C[J]}function n(J,L,K,H,Q){if(y.isArrayOrTypedArray(J)){var M=
[];for(var P=0;P<L;P++)M[P]=void 0===J[P]?H:K(J[P],Q)}else M=K(J,y.identity);return M}function p(J,L){function K(ka,ua){ka=Q[ka];return u.tickText(ka,ka.d2l(ua),!0).text}var H=[],Q=J.fullSceneLayout,M=J.dataScale,P=Q.xaxis,T=Q.yaxis,O=Q.zaxis,U=L.marker,S=L.line,X=L.x||[],ba=L.y||[],ca=L.z||[],ia=X.length,ja=L.xcalendar,la=L.ycalendar,da=L.zcalendar,oa;for(oa=0;oa<ia;oa++){var sa=P.d2l(X[oa],0,ja)*M[0];var ma=T.d2l(ba[oa],0,la)*M[1];var qa=O.d2l(ca[oa],0,da)*M[2];H[oa]=[sa,ma,qa]}if(Array.isArray(L.text))var pa=
L.text;else if(void 0!==L.text)for(pa=Array(ia),oa=0;oa<ia;oa++)pa[oa]=L.text;var na=L.texttemplate;if(na)for(J=J.fullLayout._d3locale,P=(oa=Array.isArray(na))?Math.min(na.length,ia):ia,T=oa?function(ka){return na[ka]}:function(){return na},pa=Array(P),oa=0;oa<P;oa++)O={x:X[oa],y:ba[oa],z:ca[oa]},ja={xLabel:K("xaxis",X[oa]),yLabel:K("yaxis",ba[oa]),zLabel:K("zaxis",ca[oa])},la={},D(la,L,oa),da=L._meta||{},pa[oa]=y.texttemplateString(T(oa),ja,J,la,O,da);H={position:H,mode:L.mode,text:pa};"line"in L&&
(H.lineColor=A(S,1,ia),H.lineWidth=S.width,H.lineDashes=S.dash);"marker"in L&&(oa=z(L),H.scatterColor=A(U,1,ia),H.scatterSize=n(U.size,ia,h,20,oa),H.scatterMarker=n(U.symbol,ia,g,""),H.scatterLineWidth=U.line.width,H.scatterLineColor=A(U.line,1,ia),H.scatterAngle=0);"textposition"in L&&(H.textOffset=a(L.textposition),H.textColor=A(L.textfont,1,ia),H.textSize=n(L.textfont.size,ia,y.identity,12),H.textFont=L.textfont.family,H.textAngle=0);U=["x","y","z"];H.project=[!1,!1,!1];H.projectScale=[1,1,1];
H.projectOpacity=[1,1,1];for(oa=0;3>oa;++oa)if(ia=L.projection[U[oa]],H.project[oa]=ia.show)H.projectOpacity[oa]=ia.opacity,H.projectScale[oa]=ia.scale;H.errorBounds=G(L,M,Q);M=q([L.error_x,L.error_y,L.error_z]);H.errorColor=M.color;H.errorLineWidth=M.lineWidth;H.errorCapSize=M.capSize;H.delaunayAxis=L.surfaceaxis;H.delaunayColor=B(L.surfacecolor);return H}function d(J){if(y.isArrayOrTypedArray(J)){var L=J[0];y.isArrayOrTypedArray(L)&&(J=L);return"rgb("+J.slice(0,3).map(function(K){return Math.round(255*
K)})+")"}return null}function e(J){return y.isArrayOrTypedArray(J)?4===J.length&&"number"===typeof J[0]?d(J):J.map(d):null}var f=b("gl-line3d"),k=b("gl-scatter3d"),t=b("gl-error3d"),v=b("gl-mesh3d"),w=b("delaunay-triangulate"),y=b("../../lib"),B=b("../../lib/str2rgbarray"),A=b("../../lib/gl_format_color").formatColor,z=b("../scatter/make_bubble_size_func"),E=b("../../constants/gl3d_dashes"),C=b("../../constants/gl3d_markers"),u=b("../../plots/cartesian/axes"),D=b("../../components/fx/helpers").appendArrayPointValue,
G=b("./calc_errors");b=r.prototype;b.handlePick=function(J){if(J.object&&(J.object===this.linePlot||J.object===this.delaunayMesh||J.object===this.textMarkers||J.object===this.scatterPlot)){var L=J.index=J.data.index;J.object.highlight&&J.object.highlight(null);this.scatterPlot&&(J.object=this.scatterPlot,this.scatterPlot.highlight(J.data));J.textLabel="";if(this.textLabels)if(Array.isArray(this.textLabels)){if(this.textLabels[L]||0===this.textLabels[L])J.textLabel=this.textLabels[L]}else J.textLabel=
this.textLabels;J.traceCoordinate=[this.data.x[L],this.data.y[L],this.data.z[L]];return!0}};b.update=function(J){var L=this.scene.glplot.gl;var K=E.solid;this.data=J;var H=p(this.scene,J);"mode"in H&&(this.mode=H.mode);"lineDashes"in H&&H.lineDashes in E&&(K=E[H.lineDashes]);this.color=e(H.scatterColor)||e(H.lineColor);this.dataPoints=H.position;K={gl:this.scene.glplot.gl,position:H.position,color:H.lineColor,lineWidth:H.lineWidth||1,dashes:K[0],dashScale:K[1],opacity:J.opacity,connectGaps:J.connectgaps};
-1!==this.mode.indexOf("lines")?this.linePlot?this.linePlot.update(K):(this.linePlot=f(K),this.linePlot._trace=this,this.scene.glplot.add(this.linePlot)):this.linePlot&&(this.scene.glplot.remove(this.linePlot),this.linePlot.dispose(),this.linePlot=null);K=J.opacity;J.marker&&J.marker.opacity&&(K*=J.marker.opacity);K={gl:this.scene.glplot.gl,position:H.position,color:H.scatterColor,size:H.scatterSize,glyph:H.scatterMarker,opacity:K,orthographic:!0,lineWidth:H.scatterLineWidth,lineColor:H.scatterLineColor,
project:H.project,projectScale:H.projectScale,projectOpacity:H.projectOpacity};-1!==this.mode.indexOf("markers")?this.scatterPlot?this.scatterPlot.update(K):(this.scatterPlot=k(K),this.scatterPlot._trace=this,this.scatterPlot.highlightScale=1,this.scene.glplot.add(this.scatterPlot)):this.scatterPlot&&(this.scene.glplot.remove(this.scatterPlot),this.scatterPlot.dispose(),this.scatterPlot=null);K={gl:this.scene.glplot.gl,position:H.position,glyph:H.text,color:H.textColor,size:H.textSize,angle:H.textAngle,
alignment:H.textOffset,font:H.textFont,orthographic:!0,lineWidth:0,project:!1,opacity:J.opacity};this.textLabels=J.hovertext||J.text;-1!==this.mode.indexOf("text")?this.textMarkers?this.textMarkers.update(K):(this.textMarkers=k(K),this.textMarkers._trace=this,this.textMarkers.highlightScale=1,this.scene.glplot.add(this.textMarkers)):this.textMarkers&&(this.scene.glplot.remove(this.textMarkers),this.textMarkers.dispose(),this.textMarkers=null);K={gl:this.scene.glplot.gl,position:H.position,color:H.errorColor,
error:H.errorBounds,lineWidth:H.errorLineWidth,capSize:H.errorCapSize,opacity:J.opacity};this.errorBars?H.errorBounds?this.errorBars.update(K):(this.scene.glplot.remove(this.errorBars),this.errorBars.dispose(),this.errorBars=null):H.errorBounds&&(this.errorBars=t(K),this.errorBars._trace=this,this.scene.glplot.add(this.errorBars));if(0<=H.delaunayAxis){K=H.position;var Q=H.delaunayColor;H=H.delaunayAxis;var M=(H+1)%3,P=(H+2)%3,T=[];H=[];var O;for(O=0;O<K.length;++O){var U=K[O];!isNaN(U[M])&&isFinite(U[M])&&
!isNaN(U[P])&&isFinite(U[P])&&(T.push([U[M],U[P]]),H.push(O))}M=w(T);for(O=0;O<M.length;++O)for(P=M[O],T=0;T<P.length;++T)P[T]=H[P[T]];K={positions:K,cells:M,meshColor:Q};K.opacity=J.opacity;this.delaunayMesh?this.delaunayMesh.update(K):(K.gl=L,this.delaunayMesh=v(K),this.delaunayMesh._trace=this,this.scene.glplot.add(this.delaunayMesh))}else this.delaunayMesh&&(this.scene.glplot.remove(this.delaunayMesh),this.delaunayMesh.dispose(),this.delaunayMesh=null)};b.dispose=function(){this.linePlot&&(this.scene.glplot.remove(this.linePlot),
this.linePlot.dispose());this.scatterPlot&&(this.scene.glplot.remove(this.scatterPlot),this.scatterPlot.dispose());this.errorBars&&(this.scene.glplot.remove(this.errorBars),this.errorBars.dispose());this.textMarkers&&(this.scene.glplot.remove(this.textMarkers),this.textMarkers.dispose());this.delaunayMesh&&(this.scene.glplot.remove(this.delaunayMesh),this.delaunayMesh.dispose())};N.exports=function(J,L){J=new r(J,L.uid);J.update(L);return J}},{"../../components/fx/helpers":679,"../../constants/gl3d_dashes":750,
"../../constants/gl3d_markers":751,"../../lib":778,"../../lib/gl_format_color":774,"../../lib/str2rgbarray":802,"../../plots/cartesian/axes":828,"../scatter/make_bubble_size_func":1204,"./calc_errors":1217,"delaunay-triangulate":171,"gl-error3d":266,"gl-line3d":275,"gl-mesh3d":309,"gl-scatter3d":330}],1219:[function(b,N,I){function r(p,d,e,f){var k=0,t=e("x"),v=e("y");e=e("z");q.getComponentMethod("calendars","handleTraceDefaults")(p,d,["x","y","z"],f);t&&v&&e&&(k=Math.min(t.length,v.length,e.length),
d._length=d._xlength=d._ylength=d._zlength=k);return k}var q=b("../../registry"),m=b("../../lib"),l=b("../scatter/subtypes"),a=b("../scatter/marker_defaults"),h=b("../scatter/line_defaults"),g=b("../scatter/text_defaults"),n=b("./attributes");N.exports=function(p,d,e,f){function k(B,A){return m.coerce(p,d,n,B,A)}if(r(p,d,k,f)){k("text");k("hovertext");k("hovertemplate");k("mode");l.hasLines(d)&&(k("connectgaps"),h(p,d,e,f,k));l.hasMarkers(d)&&a(p,d,e,f,k,{noSelect:!0});l.hasText(d)&&(k("texttemplate"),
g(p,d,f,k,{noSelect:!0}));f=(d.line||{}).color;var t=(d.marker||{}).color;0<=k("surfaceaxis")&&k("surfacecolor",f||t);for(var v=["x","y","z"],w=0;3>w;++w){var y="projection."+v[w];k(y+".show")&&(k(y+".opacity"),k(y+".scale"))}v=q.getComponentMethod("errorbars","supplyDefaults");v(p,d,f||t||e,{axis:"z"});v(p,d,f||t||e,{axis:"y",inherit:"z"});v(p,d,f||t||e,{axis:"x",inherit:"z"})}else d.visible=!1}},{"../../lib":778,"../../registry":911,"../scatter/line_defaults":1200,"../scatter/marker_defaults":1206,
"../scatter/subtypes":1212,"../scatter/text_defaults":1213,"./attributes":1215}],1220:[function(b,N,I){N.exports={plot:b("./convert"),attributes:b("./attributes"),markerSymbols:b("../../constants/gl3d_markers"),supplyDefaults:b("./defaults"),colorbar:[{container:"marker",min:"cmin",max:"cmax"},{container:"line",min:"cmin",max:"cmax"}],calc:b("./calc"),moduleType:"trace",name:"scatter3d",basePlotModule:b("../../plots/gl3d"),categories:["gl3d","symbols","showLegend","scatter-like"],meta:{}}},{"../../constants/gl3d_markers":751,
"../../plots/gl3d":870,"./attributes":1215,"./calc":1216,"./convert":1218,"./defaults":1219}],1221:[function(b,N,I){I=b("../scatter/attributes");var r=b("../../plots/attributes"),q=b("../../plots/template_attributes").hovertemplateAttrs,m=b("../../plots/template_attributes").texttemplateAttrs,l=b("../../components/colorscale/attributes");b=b("../../lib/extend").extendFlat;var a=I.marker,h=I.line,g=a.line;N.exports={carpet:{valType:"string",editType:"calc"},a:{valType:"data_array",editType:"calc"},
b:{valType:"data_array",editType:"calc"},mode:b({},I.mode,{dflt:"markers"}),text:b({},I.text,{}),texttemplate:m({editType:"plot"},{keys:["a","b","text"]}),hovertext:b({},I.hovertext,{}),line:{color:h.color,width:h.width,dash:h.dash,shape:b({},h.shape,{values:["linear","spline"]}),smoothing:h.smoothing,editType:"calc"},connectgaps:I.connectgaps,fill:b({},I.fill,{values:["none","toself","tonext"],dflt:"none"}),fillcolor:I.fillcolor,marker:b({symbol:a.symbol,opacity:a.opacity,maxdisplayed:a.maxdisplayed,
size:a.size,sizeref:a.sizeref,sizemin:a.sizemin,sizemode:a.sizemode,line:b({width:g.width,editType:"calc"},l("marker.line")),gradient:a.gradient,editType:"calc"},l("marker")),textfont:I.textfont,textposition:I.textposition,selected:I.selected,unselected:I.unselected,hoverinfo:b({},r.hoverinfo,{flags:["a","b","text","name"]}),hoveron:I.hoveron,hovertemplate:q()}},{"../../components/colorscale/attributes":650,"../../lib/extend":768,"../../plots/attributes":824,"../../plots/template_attributes":906,
"../scatter/attributes":1187}],1222:[function(b,N,I){var r=b("fast-isnumeric"),q=b("../scatter/colorscale_calc"),m=b("../scatter/arrays_to_calcdata"),l=b("../scatter/calc_selection"),a=b("../scatter/calc").calcMarkerSize,h=b("../carpet/lookup_carpetid");N.exports=function(g,n){var p=n._carpetTrace=h(g,n);if(p&&p.visible&&"legendonly"!==p.visible){var d;n.xaxis=p.xaxis;n.yaxis=p.yaxis;var e=n._length,f=Array(e),k=!1;for(d=0;d<e;d++){var t=n.a[d];var v=n.b[d];if(r(t)&&r(v)){var w=p.ab2xy(+t,+v,!0),
y=p.isVisible(+t,+v);y||(k=!0);f[d]={x:w[0],y:w[1],a:t,b:v,vis:y}}else f[d]={x:!1,y:!1}}n._needsCull=k;f[0].carpet=p;f[0].trace=n;a(n,e);q(g,n);m(f,n);l(f,n);return f}}},{"../carpet/lookup_carpetid":981,"../scatter/arrays_to_calcdata":1186,"../scatter/calc":1188,"../scatter/calc_selection":1189,"../scatter/colorscale_calc":1190,"fast-isnumeric":241}],1223:[function(b,N,I){var r=b("../../lib"),q=b("../scatter/constants"),m=b("../scatter/subtypes"),l=b("../scatter/marker_defaults"),a=b("../scatter/line_defaults"),
h=b("../scatter/line_shape_defaults"),g=b("../scatter/text_defaults"),n=b("../scatter/fillcolor_defaults"),p=b("./attributes");N.exports=function(d,e,f,k){function t(y,B){return r.coerce(d,e,p,y,B)}t("carpet");e.xaxis="x";e.yaxis="y";var v=t("a"),w=t("b");if(v=Math.min(v.length,w.length)){e._length=v;t("text");t("texttemplate");t("hovertext");t("mode",v<q.PTS_LINESONLY?"lines+markers":"lines");m.hasLines(e)&&(a(d,e,f,k,t),h(d,e,t),t("connectgaps"));m.hasMarkers(e)&&l(d,e,f,k,t,{gradient:!0});m.hasText(e)&&
g(d,e,k,t);k=[];if(m.hasMarkers(e)||m.hasText(e))t("marker.maxdisplayed"),k.push("points");t("fill");"none"!==e.fill&&(n(d,e,f,t),m.hasLines(e)||h(d,e,t));"tonext"!==e.fill&&"toself"!==e.fill||k.push("fills");"fills"!==t("hoveron",k.join("+")||"points")&&t("hovertemplate");r.coerceSelectionMarkerOpacity(e,t)}else e.visible=!1}},{"../../lib":778,"../scatter/constants":1191,"../scatter/fillcolor_defaults":1195,"../scatter/line_defaults":1200,"../scatter/line_shape_defaults":1202,"../scatter/marker_defaults":1206,
"../scatter/subtypes":1212,"../scatter/text_defaults":1213,"./attributes":1221}],1224:[function(b,N,I){N.exports=function(r,q,m,l,a){q=l[a];r.a=q.a;r.b=q.b;r.y=q.y;return r}},{}],1225:[function(b,N,I){N.exports=function(r,q){var m={};q=q._carpet;r=q.ab2ij([r.a,r.b]);var l=Math.floor(r[0]),a=Math.floor(r[1]);q=q.evalxy([],l,a,r[0]-l,r[1]-a);m.yLabel=q[1].toFixed(3);return m}},{}],1226:[function(b,N,I){var r=b("../scatter/hover"),q=b("../../lib").fillText;N.exports=function(m,l,a,h){function g(e,f){var k=
e.labelprefix&&0<e.labelprefix.length?e.labelprefix.replace(/ = $/,""):e._hovertitle;d.push(k+": "+f.toFixed(3)+e.labelsuffix)}if((l=r(m,l,a,h))&&!1!==l[0].index){a=l[0];if(void 0===a.index)return h=m.xa._length,m=h*(1-a.y0/m.ya._length)/2,h-=m,a.x0=Math.max(Math.min(a.x0,h),m),a.x1=Math.max(Math.min(a.x1,h),m),l;m=a.cd[a.index];a.a=m.a;a.b=m.b;a.xLabelVal=void 0;a.yLabelVal=void 0;h=a.trace;var n=h._carpet,p=h._module.formatLabels(m,h);a.yLabel=p.yLabel;delete a.text;var d=[];h.hovertemplate||(p=
(m.hi||h.hoverinfo).split("+"),-1!==p.indexOf("all")&&(p=["a","b","text"]),-1!==p.indexOf("a")&&g(n.aaxis,m.a),-1!==p.indexOf("b")&&g(n.baxis,m.b),d.push("y: "+a.yLabel),-1!==p.indexOf("text")&&q(m,h,d),a.extraText=d.join("\x3cbr\x3e"));return l}}},{"../../lib":778,"../scatter/hover":1198}],1227:[function(b,N,I){N.exports={attributes:b("./attributes"),supplyDefaults:b("./defaults"),colorbar:b("../scatter/marker_colorbar"),formatLabels:b("./format_labels"),calc:b("./calc"),plot:b("./plot"),style:b("../scatter/style").style,
styleOnSelect:b("../scatter/style").styleOnSelect,hoverPoints:b("./hover"),selectPoints:b("../scatter/select"),eventData:b("./event_data"),moduleType:"trace",name:"scattercarpet",basePlotModule:b("../../plots/cartesian"),categories:"svg carpet symbols showLegend carpetDependent zoomScale".split(" "),meta:{}}},{"../../plots/cartesian":841,"../scatter/marker_colorbar":1205,"../scatter/select":1209,"../scatter/style":1211,"./attributes":1221,"./calc":1222,"./defaults":1223,"./event_data":1224,"./format_labels":1225,
"./hover":1226,"./plot":1228}],1228:[function(b,N,I){var r=b("../scatter/plot"),q=b("../../plots/cartesian/axes"),m=b("../../components/drawing");N.exports=function(l,a,h,g){var n=h[0][0].carpet;a={xaxis:q.getFromId(l,n.xaxis||"x"),yaxis:q.getFromId(l,n.yaxis||"y"),plot:a.plot};r(l,a,h,g);for(a=0;a<h.length;a++)n=h[a][0].trace,n=g.selectAll("g.trace"+n.uid+" .js-line"),m.setClipUrl(n,h[a][0].carpet._clipPathId,l)}},{"../../components/drawing":665,"../../plots/cartesian/axes":828,"../scatter/plot":1208}],
1229:[function(b,N,I){I=b("../../plots/template_attributes").hovertemplateAttrs;var r=b("../../plots/template_attributes").texttemplateAttrs,q=b("../scatter/attributes"),m=b("../../plots/attributes"),l=b("../../components/colorscale/attributes"),a=b("../../components/drawing/attributes").dash,h=b("../../lib/extend").extendFlat;b=b("../../plot_api/edit_types").overrideAll;var g=q.marker,n=q.line,p=g.line;N.exports=b({lon:{valType:"data_array"},lat:{valType:"data_array"},locations:{valType:"data_array"},
locationmode:{valType:"enumerated",values:["ISO-3","USA-states","country names","geojson-id"],dflt:"ISO-3"},geojson:{valType:"any",editType:"calc"},featureidkey:{valType:"string",editType:"calc",dflt:"id"},mode:h({},q.mode,{dflt:"markers"}),text:h({},q.text,{}),texttemplate:r({editType:"plot"},{keys:["lat","lon","location","text"]}),hovertext:h({},q.hovertext,{}),textfont:q.textfont,textposition:q.textposition,line:{color:n.color,width:n.width,dash:a},connectgaps:q.connectgaps,marker:h({symbol:g.symbol,
opacity:g.opacity,size:g.size,sizeref:g.sizeref,sizemin:g.sizemin,sizemode:g.sizemode,colorbar:g.colorbar,line:h({width:p.width},l("marker.line")),gradient:g.gradient},l("marker")),fill:{valType:"enumerated",values:["none","toself"],dflt:"none"},fillcolor:q.fillcolor,selected:q.selected,unselected:q.unselected,hoverinfo:h({},m.hoverinfo,{flags:["lon","lat","location","text","name"]}),hovertemplate:I()},"calc","nested")},{"../../components/colorscale/attributes":650,"../../components/drawing/attributes":664,
"../../lib/extend":768,"../../plot_api/edit_types":810,"../../plots/attributes":824,"../../plots/template_attributes":906,"../scatter/attributes":1187}],1230:[function(b,N,I){function r(n){return n&&"string"===typeof n}var q=b("fast-isnumeric"),m=b("../../constants/numerical").BADNUM,l=b("../scatter/colorscale_calc"),a=b("../scatter/arrays_to_calcdata"),h=b("../scatter/calc_selection"),g=b("../../lib")._;N.exports=function(n,p){var d=Array.isArray(p.locations),e=d?p.locations.length:p._length,f=Array(e);
var k=p.geojson?function(B){return r(B)||q(B)}:r;for(var t=0;t<e;t++){var v=f[t]={};if(d){var w=p.locations[t];v.loc=k(w)?w:null}else{w=p.lon[t];var y=p.lat[t];q(w)&&q(y)?v.lonlat=[+w,+y]:v.lonlat=[m,m]}}a(f,p);l(n,p);h(f,p);e&&(f[0].t={labels:{lat:g(n,"lat:")+" ",lon:g(n,"lon:")+" "}});return f}},{"../../constants/numerical":753,"../../lib":778,"../scatter/arrays_to_calcdata":1186,"../scatter/calc_selection":1189,"../scatter/colorscale_calc":1190,"fast-isnumeric":241}],1231:[function(b,N,I){var r=
b("../../lib"),q=b("../scatter/subtypes"),m=b("../scatter/marker_defaults"),l=b("../scatter/line_defaults"),a=b("../scatter/text_defaults"),h=b("../scatter/fillcolor_defaults"),g=b("./attributes");N.exports=function(n,p,d,e){function f(w,y){return r.coerce(n,p,g,w,y)}var k=f("locations");if(k&&k.length){var t=f("geojson");if("string"===typeof t&&""!==t||r.isPlainObject(t))var v="geojson-id";"geojson-id"===f("locationmode",v)&&f("featureidkey");k=k.length}else k=f("lon")||[],t=f("lat")||[],k=Math.min(k.length,
t.length);k?(p._length=k,f("text"),f("hovertext"),f("hovertemplate"),f("mode"),q.hasLines(p)&&(l(n,p,d,e,f),f("connectgaps")),q.hasMarkers(p)&&m(n,p,d,e,f,{gradient:!0}),q.hasText(p)&&(f("texttemplate"),a(n,p,e,f)),f("fill"),"none"!==p.fill&&h(n,p,d,f),r.coerceSelectionMarkerOpacity(p,f)):p.visible=!1}},{"../../lib":778,"../scatter/fillcolor_defaults":1195,"../scatter/line_defaults":1200,"../scatter/marker_defaults":1206,"../scatter/subtypes":1212,"../scatter/text_defaults":1213,"./attributes":1229}],
1232:[function(b,N,I){N.exports=function(r,q,m,l,a){r.lon=q.lon;r.lat=q.lat;r.location=q.loc?q.loc:null;q=l[a];q.fIn&&q.fIn.properties&&(r.properties=q.fIn.properties);return r}},{}],1233:[function(b,N,I){var r=b("../../plots/cartesian/axes");N.exports=function(q,m,l){var a={};m=l[m.geo]._subplot.mockAxis;q=q.lonlat;a.lonLabel=r.tickText(m,m.c2l(q[0]),!0).text;a.latLabel=r.tickText(m,m.c2l(q[1]),!0).text;return a}},{"../../plots/cartesian/axes":828}],1234:[function(b,N,I){function r(g,n,p,d){if(!g.hovertemplate){var e=
n.hi||g.hoverinfo,f="all"===e?h.hoverinfo.flags:e.split("+");e=-1!==f.indexOf("location")&&Array.isArray(g.locations);var k=-1!==f.indexOf("lon"),t=-1!==f.indexOf("lat");f=-1!==f.indexOf("text");var v=[];e?v.push(n.loc):k&&t?v.push("("+(p.lonLabel+", ")+(p.latLabel+")")):k?v.push(d.lon+(p.lonLabel+"")):t&&v.push(d.lat+(p.latLabel+""));f&&a(n,g,v);return v.join("\x3cbr\x3e")}}var q=b("../../components/fx"),m=b("../../constants/numerical").BADNUM,l=b("../scatter/get_trace_color"),a=b("../../lib").fillText,
h=b("./attributes");N.exports=function(g,n,p){var d=g.cd,e=d[0].trace,f=g.xa,k=g.ya,t=g.subplot,v=t.projection.isLonLatOverEdges,w=t.project;q.getClosest(d,function(A){var z=A.lonlat;if(z[0]===m||v(z))return Infinity;var E=w(z),C=w([n,p]);z=Math.abs(E[0]-C[0]);E=Math.abs(E[1]-C[1]);A=Math.max(3,A.mrc||0);return Math.max(Math.sqrt(z*z+E*E)-A,1-3/A)},g);if(!1!==g.index){var y=d[g.index],B=y.lonlat;f=[f.c2p(B),k.c2p(B)];k=y.mrc||1;g.x0=f[0]-k;g.x1=f[0]+k;g.y0=f[1]-k;g.y1=f[1]+k;g.loc=y.loc;g.lon=B[0];
g.lat=B[1];B={};B[e.geo]={_subplot:t};t=e._module.formatLabels(y,e,B);g.lonLabel=t.lonLabel;g.latLabel=t.latLabel;g.color=l(e,y);g.extraText=r(e,y,g,d[0].t.labels);g.hovertemplate=e.hovertemplate;return[g]}}},{"../../components/fx":683,"../../constants/numerical":753,"../../lib":778,"../scatter/get_trace_color":1197,"./attributes":1229}],1235:[function(b,N,I){N.exports={attributes:b("./attributes"),supplyDefaults:b("./defaults"),colorbar:b("../scatter/marker_colorbar"),formatLabels:b("./format_labels"),
calc:b("./calc"),calcGeoJSON:b("./plot").calcGeoJSON,plot:b("./plot").plot,style:b("./style"),styleOnSelect:b("../scatter/style").styleOnSelect,hoverPoints:b("./hover"),eventData:b("./event_data"),selectPoints:b("./select"),moduleType:"trace",name:"scattergeo",basePlotModule:b("../../plots/geo"),categories:["geo","symbols","showLegend","scatter-like"],meta:{}}},{"../../plots/geo":860,"../scatter/marker_colorbar":1205,"../scatter/style":1211,"./attributes":1229,"./calc":1230,"./defaults":1231,"./event_data":1232,
"./format_labels":1233,"./hover":1234,"./plot":1236,"./select":1237,"./style":1238}],1236:[function(b,N,I){var r=b("d3"),q=b("../../lib"),m=b("../../lib/topojson_utils").getTopojsonFeatures,l=b("../../lib/geojson_utils"),a=b("../../lib/geo_location_utils"),h=b("../../plots/cartesian/autorange").findExtremes,g=b("../../constants/numerical").BADNUM,n=b("../scatter/calc").calcMarkerSize,p=b("../scatter/subtypes"),d=b("./style");N.exports={calcGeoJSON:function(e,f){var k=e[0].trace;f=f[k.geo];var t=f._subplot,
v=k._length;if(Array.isArray(k.locations)){var w=k.locationmode,y="geojson-id"===w?a.extractTraceFeature(e):m(k,t.topojson);for(t=0;t<v;t++){var B=e[t];var A="geojson-id"===w?B.fOut:a.locationToFeature(w,B.loc,y);B.lonlat=A?A.properties.ct:[g,g]}}w={padded:!0};if("geojson"===f.fitbounds&&"geojson-id"===k.locationmode)e=a.computeBbox(a.getTraceGeojson(k)),y=[e[0],e[2]],A=[e[1],e[3]];else{y=Array(v);A=Array(v);for(t=0;t<v;t++)B=e[t],y[t]=B.lonlat[0],A[t]=B.lonlat[1];w.ppad=n(k,v)}k._extremes.lon=h(f.lonaxis._ax,
y,w);k._extremes.lat=h(f.lataxis._ax,A,w)},plot:function(e,f,k){f=f.layers.frontplot.select(".scatterlayer");k=q.makeTraceGroups(f,k,"trace scattergeo");k.selectAll("*").remove();k.each(function(t){var v=r.select(this),w=t[0].trace;if(p.hasLines(w)||"none"!==w.fill){var y=l.calcTraceToLineCoords(t);y="none"!==w.fill?l.makePolygon(y):l.makeLine(y);v.selectAll("path.js-line").data([{geojson:y,trace:w}]).enter().append("path").classed("js-line",!0).style("stroke-miterlimit",2)}p.hasMarkers(w)&&v.selectAll("path.point").data(q.identity).enter().append("path").classed("point",
!0).each(function(B){B.lonlat[0]===g&&r.select(this).remove()});p.hasText(w)&&v.selectAll("g").data(q.identity).enter().append("g").append("text").each(function(B){B.lonlat[0]===g&&r.select(this).remove()});d(e,t)})}}},{"../../constants/numerical":753,"../../lib":778,"../../lib/geo_location_utils":771,"../../lib/geojson_utils":772,"../../lib/topojson_utils":806,"../../plots/cartesian/autorange":827,"../scatter/calc":1188,"../scatter/subtypes":1212,"./style":1238,d3:169}],1237:[function(b,N,I){var r=
b("../scatter/subtypes"),q=b("../../constants/numerical").BADNUM;N.exports=function(m,l){var a=m.cd,h=m.xaxis,g=m.yaxis,n=[],p=a[0].trace,d;if(!r.hasMarkers(p)&&!r.hasText(p))return[];if(!1===l)for(d=0;d<a.length;d++)a[d].selected=0;else for(d=0;d<a.length;d++){p=a[d];var e=p.lonlat;if(e[0]!==q){var f=h.c2p(e);var k=g.c2p(e);l.contains([f,k],null,d,m)?(n.push({pointNumber:d,lon:e[0],lat:e[1]}),p.selected=1):p.selected=0}}return n}},{"../../constants/numerical":753,"../scatter/subtypes":1212}],1238:[function(b,
N,I){function r(g,n){var p=n[0].trace,d=n[0].node3;d.style("opacity",n[0].trace.opacity);a(d,p,g);h(d,p,g);d.selectAll("path.js-line").style("fill","none").each(function(e){var f=q.select(this);e=e.trace;var k=e.line||{};f.call(l.stroke,k.color).call(m.dashLine,k.dash||"",k.width||0);"none"!==e.fill&&f.call(l.fill,e.fillcolor)})}var q=b("d3"),m=b("../../components/drawing"),l=b("../../components/color");b=b("../scatter/style");var a=b.stylePoints,h=b.styleText;N.exports=function(g,n){n&&r(g,n)}},
{"../../components/color":643,"../../components/drawing":665,"../scatter/style":1211,d3:169}],1239:[function(b,N,I){var r=b("../../plots/attributes");I=b("../scatter/attributes");var q=b("../../components/colorscale/attributes"),m=b("../../lib/extend").extendFlat,l=b("../../plot_api/edit_types").overrideAll;b=b("./constants").DASHES;var a=I.line,h=I.marker,g=h.line;N=N.exports=l({x:I.x,x0:I.x0,dx:I.dx,y:I.y,y0:I.y0,dy:I.dy,xperiod:I.xperiod,yperiod:I.yperiod,xperiod0:I.xperiod0,yperiod0:I.yperiod0,
xperiodalignment:I.xperiodalignment,yperiodalignment:I.yperiodalignment,text:I.text,hovertext:I.hovertext,textposition:I.textposition,textfont:I.textfont,mode:{valType:"flaglist",flags:["lines","markers","text"],extras:["none"]},line:{color:a.color,width:a.width,shape:{valType:"enumerated",values:["linear","hv","vh","hvh","vhv"],dflt:"linear",editType:"plot"},dash:{valType:"enumerated",values:Object.keys(b),dflt:"solid"}},marker:m({},q("marker"),{symbol:h.symbol,size:h.size,sizeref:h.sizeref,sizemin:h.sizemin,
sizemode:h.sizemode,opacity:h.opacity,colorbar:h.colorbar,line:m({},q("marker.line"),{width:g.width})}),connectgaps:I.connectgaps,fill:m({},I.fill,{dflt:"none"}),fillcolor:I.fillcolor,selected:{marker:I.selected.marker,textfont:I.selected.textfont},unselected:{marker:I.unselected.marker,textfont:I.unselected.textfont},opacity:r.opacity},"calc","nested");N.x.editType=N.y.editType=N.x0.editType=N.y0.editType="calc+clearAxisTypes";N.hovertemplate=I.hovertemplate;N.texttemplate=I.texttemplate},{"../../components/colorscale/attributes":650,
"../../lib/extend":768,"../../plot_api/edit_types":810,"../../plots/attributes":824,"../scatter/attributes":1187,"./constants":1241}],1240:[function(b,N,I){function r(v,w,y){v=v._extremes[w._id];w=a(w,y._bnds,{padded:!0});v.min=v.min.concat(w.min);v.max=v.max.concat(w.max)}var q=b("@plotly/point-cluster"),m=b("../../lib"),l=b("../../plots/cartesian/axis_ids"),a=b("../../plots/cartesian/autorange").findExtremes,h=b("../../plots/cartesian/align_period");I=b("../scatter/calc");var g=I.calcMarkerSize,
n=I.calcAxisExpansion,p=I.setFirstScatter,d=b("../scatter/colorscale_calc"),e=b("./convert"),f=b("./scene_update"),k=b("../../constants/numerical").BADNUM,t=b("./constants").TOO_MANY_POINTS;N.exports=function(v,w){var y=v._fullLayout,B=l.getFromId(v,w.xaxis),A=l.getFromId(v,w.yaxis),z=y._plots[w.xaxis+w.yaxis],E=w._length,C=E>=t,u=2*E,D={},G=B.makeCalcdata(w,"x");var J=A.makeCalcdata(w,"y");var L=h(w,B,"x",G),K=h(w,A,"y",J);w._x=L;w._y=K;w.xperiodalignment&&(w._origX=G);w.yperiodalignment&&(w._origY=
J);G=Array(u);for(J=0;J<E;J++){var H=L[J];var Q=K[J];G[2*J]=H===k?NaN:H;G[2*J+1]=Q===k?NaN:Q}if("log"===B.type)for(J=0;J<u;J+=2)G[J]=B.c2l(G[J]);if("log"===A.type)for(J=1;J<u;J+=2)G[J]=A.c2l(G[J]);if(C&&"log"!==B.type&&"log"!==A.type)D.tree=q(G);else for(u=D.ids=Array(E),J=0;J<E;J++)u[J]=J;d(v,w);u=e.style(v,w);u.marker&&(u.marker.positions=G);u.line&&1<G.length&&m.extendFlat(u.line,e.linePositions(v,w,G));if(u.errorX||u.errorY)J=e.errorBarPositions(v,w,G,L,K),u.errorX&&m.extendFlat(u.errorX,J.x),
u.errorY&&m.extendFlat(u.errorY,J.y);u.text&&(m.extendFlat(u.text,{positions:G},e.textPosition(v,w,u.text,u.marker)),m.extendFlat(u.textSel,{positions:G},e.textPosition(v,w,u.text,u.markerSel)),m.extendFlat(u.textUnsel,{positions:G},e.textPosition(v,w,u.text,u.markerUnsel)));z=f(v,z);p(y,w);var M;C?u.marker&&(M=2*(u.marker.sizeAvg||Math.max(u.marker.size,3))):M=g(w,E);n(v,w,B,A,L,K,M);u.errorX&&r(w,B,u.errorX);u.errorY&&r(w,A,u.errorY);u.fill&&!z.fill2d&&(z.fill2d=!0);u.marker&&!z.scatter2d&&(z.scatter2d=
!0);u.line&&!z.line2d&&(z.line2d=!0);!u.errorX&&!u.errorY||z.error2d||(z.error2d=!0);u.text&&!z.glText&&(z.glText=!0);u.marker&&(u.marker.snap=E);z.lineOptions.push(u.line);z.errorXOptions.push(u.errorX);z.errorYOptions.push(u.errorY);z.fillOptions.push(u.fill);z.markerOptions.push(u.marker);z.markerSelectedOptions.push(u.markerSel);z.markerUnselectedOptions.push(u.markerUnsel);z.textOptions.push(u.text);z.textSelectedOptions.push(u.textSel);z.textUnselectedOptions.push(u.textUnsel);z.selectBatch.push([]);
z.unselectBatch.push([]);D._scene=z;D.index=z.count;D.x=L;D.y=K;D.positions=G;z.count++;return[{x:!1,y:!1,t:D,trace:w}]}},{"../../constants/numerical":753,"../../lib":778,"../../plots/cartesian/align_period":825,"../../plots/cartesian/autorange":827,"../../plots/cartesian/axis_ids":831,"../scatter/calc":1188,"../scatter/colorscale_calc":1190,"./constants":1241,"./convert":1242,"./scene_update":1250,"@plotly/point-cluster":57}],1241:[function(b,N,I){N.exports={TOO_MANY_POINTS:1E5,SYMBOL_SDF_SIZE:200,
SYMBOL_SIZE:20,SYMBOL_STROKE:1,DOT_RE:/-dot/,OPEN_RE:/-open/,DASHES:{solid:[1],dot:[1,1],dash:[4,1],longdash:[8,1],dashdot:[4,1,1,1],longdashdot:[8,1,1,1]}}},{}],1242:[function(b,N,I){function r(L,K){var H=L._fullLayout;L=K._length;var Q=K.textfont,M=K.textposition,P=Array.isArray(M)?M:[M],T=Q.color;M=Q.size;Q=Q.family;var O={},U,S=K.texttemplate;if(S){O.text=[];var X=H._d3locale,ba=(U=Array.isArray(S))?Math.min(S.length,L):L,ca=U?function(oa){return S[oa]}:function(){return S};for(U=0;U<ba;U++){var ia=
{i:U},ja=K._module.formatLabels(ia,K,H),la={};E(la,K,U);var da=K._meta||{};O.text.push(e.texttemplateString(ca(U),ja,X,la,ia,da))}}else Array.isArray(K.text)&&K.text.length<L?O.text=K.text.slice():O.text=K.text;if(Array.isArray(O.text))for(U=O.text.length;U<L;U++)O.text[U]="";O.opacity=K.opacity;O.font={};O.align=[];O.baseline=[];for(U=0;U<P.length;U++){K=P[U].split(/\s+/);switch(K[1]){case "left":O.align.push("right");break;case "right":O.align.push("left");break;default:O.align.push(K[1])}switch(K[0]){case "top":O.baseline.push("bottom");
break;case "bottom":O.baseline.push("top");break;default:O.baseline.push(K[0])}}if(Array.isArray(T))for(O.color=Array(L),U=0;U<L;U++)O.color[U]=T[U];else O.color=T;if(e.isArrayOrTypedArray(M)||Array.isArray(Q))for(O.font=Array(L),U=0;U<L;U++)K=O.font[U]={},K.size=e.isTypedArray(M)?M[U]:Array.isArray(M)?g(M[U])?M[U]:0:M,K.family=Array.isArray(Q)?Q[U]:Q;else O.font={size:M,family:Q};return O}function q(L){var K=L._length,H=L.marker,Q={},M=e.isArrayOrTypedArray(H.symbol);var P=e.isArrayOrTypedArray(H.color);
var T=e.isArrayOrTypedArray(H.line.color),O=e.isArrayOrTypedArray(H.opacity),U=e.isArrayOrTypedArray(H.size),S=e.isArrayOrTypedArray(H.line.width),X;M||(X=y.isOpenSymbol(H.symbol));if(M||P||T||O){Q.colors=Array(K);Q.borderColors=Array(K);T=t(H,H.opacity,K);O=t(H.line,H.opacity,K);if(!Array.isArray(O[0])){var ba=O;O=Array(K);for(P=0;P<K;P++)O[P]=ba}if(!Array.isArray(T[0]))for(ba=T,T=Array(K),P=0;P<K;P++)T[P]=ba;Q.colors=T;Q.borderColors=O;for(P=0;P<K;P++)M&&(X=y.isOpenSymbol(H.symbol[P])),X&&(O[P]=
T[P].slice(),T[P]=T[P].slice(),T[P][3]=0);Q.opacity=L.opacity}else X?(Q.color=p(H.color,"uint8"),Q.color[3]=0,Q.borderColor=p(H.color,"uint8")):(Q.color=p(H.color,"uint8"),Q.borderColor=p(H.line.color,"uint8")),Q.opacity=L.opacity*H.opacity;if(M)for(Q.markers=Array(K),P=0;P<K;P++)Q.markers[P]=h(H.symbol[P]);else Q.marker=h(H.symbol);X=w(L);if(U||S){L=Q.sizes=Array(K);M=Q.borderSizes=Array(K);T=0;if(U){for(P=0;P<K;P++)L[P]=X(H.size[P]),T+=L[P];var ca=T/K}else for(U=X(H.size),P=0;P<K;P++)L[P]=U;if(S)for(P=
0;P<K;P++)M[P]=H.line.width[P]/2;else for(U=H.line.width/2,P=0;P<K;P++)M[P]=U;Q.sizeAvg=ca}else Q.size=X(H&&H.size||10),Q.borderSizes=X(H.line.width);return Q}function m(L,K){L=L.marker;var H={};if(!K)return H;K.marker&&K.marker.symbol?H=q(e.extendFlat({},L,K.marker)):K.marker&&(K.marker.size&&(H.size=K.marker.size/2),K.marker.color&&(H.colors=K.marker.color),void 0!==K.marker.opacity&&(H.opacity=K.marker.opacity));return H}function l(L,K,H){var Q={};if(!H)return Q;H.textfont&&(K={opacity:1,text:K.text,
texttemplate:K.texttemplate,textposition:K.textposition,textfont:e.extendFlat({},K.textfont)},H.textfont&&e.extendFlat(K.textfont,H.textfont),Q=r(L,K));return Q}function a(L,K){var H={capSize:2*K.width,lineWidth:K.thickness,color:K.color};K.copy_ystyle&&(H=L.error_y);return H}function h(L){if("circle"===L)return null;var K=f.symbolNumber(L);var H=f.symbolFuncs[K%100];var Q=!!f.symbolNoDot[K%100];K=!!f.symbolNoFill[K%100];var M=y.isDotSymbol(L);if(G[L])return G[L];H=M&&!Q?H(1.1*u)+J:H(u);H=n(H,{w:C,
h:C,viewBox:[-u,-u,u,u],stroke:K?D:-D});return(G[L]=H)||null}var g=b("fast-isnumeric"),n=b("svg-path-sdf"),p=b("color-normalize"),d=b("../../registry"),e=b("../../lib"),f=b("../../components/drawing"),k=b("../../plots/cartesian/axis_ids"),t=b("../../lib/gl_format_color").formatColor,v=b("../scatter/subtypes"),w=b("../scatter/make_bubble_size_func"),y=b("./helpers"),B=b("./constants"),A=b("../../constants/interactions").DESELECTDIM,z={start:1,left:1,end:-1,right:-1,middle:0,center:0,bottom:1,top:-1},
E=b("../../components/fx/helpers").appendArrayPointValue,C=B.SYMBOL_SDF_SIZE,u=B.SYMBOL_SIZE,D=B.SYMBOL_STROKE,G={},J=f.symbolFuncs[0](.05*u);N.exports={style:function(L,K){var H={marker:void 0,markerSel:void 0,markerUnsel:void 0,line:void 0,fill:void 0,errorX:void 0,errorY:void 0,text:void 0,textSel:void 0,textUnsel:void 0};if(!0!==K.visible)return H;v.hasText(K)&&(H.text=r(L,K),H.textSel=l(L,K,K.selected),H.textUnsel=l(L,K,K.unselected));if(v.hasMarkers(K)&&(H.marker=q(K),H.markerSel=m(K,K.selected),
H.markerUnsel=m(K,K.unselected),!K.unselected&&e.isArrayOrTypedArray(K.marker.opacity))){var Q=K.marker.opacity;H.markerUnsel.opacity=Array(Q.length);for(L=0;L<Q.length;L++)H.markerUnsel.opacity[L]=A*Q[L]}if(v.hasLines(K)){H.line={overlay:!0,thickness:K.line.width,color:K.line.color,opacity:K.opacity};Q=(B.DASHES[K.line.dash]||[1]).slice();for(L=0;L<Q.length;++L)Q[L]*=K.line.width;H.line.dashes=Q}K.error_x&&K.error_x.visible&&(H.errorX=a(K,K.error_x));K.error_y&&K.error_y.visible&&(H.errorY=a(K,K.error_y));
K.fill&&"none"!==K.fill&&(H.fill={closed:!0,fill:K.fillcolor,thickness:0});return H},markerStyle:q,markerSelection:m,linePositions:function(L,K,H){var Q=H.length,M=Q/2;if(v.hasLines(K)&&M)if("hv"===K.line.shape){var P=[];for(L=0;L<M-1;L++)isNaN(H[2*L])||isNaN(H[2*L+1])?P.push(NaN,NaN,NaN,NaN):(P.push(H[2*L],H[2*L+1]),isNaN(H[2*L+2])||isNaN(H[2*L+3])?P.push(NaN,NaN):P.push(H[2*L+2],H[2*L+1]));P.push(H[Q-2],H[Q-1])}else if("hvh"===K.line.shape){P=[];for(L=0;L<M-1;L++)if(isNaN(H[2*L])||isNaN(H[2*L+1])||
isNaN(H[2*L+2])||isNaN(H[2*L+3]))isNaN(H[2*L])||isNaN(H[2*L+1])?P.push(NaN,NaN):P.push(H[2*L],H[2*L+1]),P.push(NaN,NaN);else{var T=(H[2*L]+H[2*L+2])/2;P.push(H[2*L],H[2*L+1],T,H[2*L+1],T,H[2*L+3])}P.push(H[Q-2],H[Q-1])}else if("vhv"===K.line.shape){P=[];for(L=0;L<M-1;L++)isNaN(H[2*L])||isNaN(H[2*L+1])||isNaN(H[2*L+2])||isNaN(H[2*L+3])?(isNaN(H[2*L])||isNaN(H[2*L+1])?P.push(NaN,NaN):P.push(H[2*L],H[2*L+1]),P.push(NaN,NaN)):(T=(H[2*L+1]+H[2*L+3])/2,P.push(H[2*L],H[2*L+1],H[2*L],T,H[2*L+2],T));P.push(H[Q-
2],H[Q-1])}else if("vh"===K.line.shape){P=[];for(L=0;L<M-1;L++)isNaN(H[2*L])||isNaN(H[2*L+1])?P.push(NaN,NaN,NaN,NaN):(P.push(H[2*L],H[2*L+1]),isNaN(H[2*L+2])||isNaN(H[2*L+3])?P.push(NaN,NaN):P.push(H[2*L],H[2*L+3]));P.push(H[Q-2],H[Q-1])}else P=H;Q=!1;for(L=0;L<P.length;L++)if(isNaN(P[L])){Q=!0;break}H=Q||P.length>B.TOO_MANY_POINTS?"rect":v.hasMarkers(K)?"rect":"round";if(Q&&K.connectgaps)for(K=P[0],Q=P[1],L=0;L<P.length;L+=2)isNaN(P[L])||isNaN(P[L+1])?(P[L]=K,P[L+1]=Q):(K=P[L],Q=P[L+1]);return{join:H,
positions:P}},errorBarPositions:function(L,K,H,Q,M){function P(X,ba){var ca=ba._id.charAt(0),ia=K["error_"+ca];if(ia&&ia.visible&&("linear"===ba.type||"log"===ba.type)){ia=T(ia);for(var ja={x:0,y:1}[ca],la={x:[0,1,2,3],y:[2,3,0,1]}[ca],da=new Float64Array(4*U),oa=Infinity,sa=-Infinity,ma=0,qa=0;ma<U;ma++,qa+=4){var pa=X[ma];if(g(pa)){var na=H[2*ma+ja],ka=ia(pa,ma),ua=ka[0];ka=ka[1];if(g(ua)&&g(ka)){var va=pa+ka;da[qa+la[0]]=na-ba.c2l(pa-ua);da[qa+la[1]]=ba.c2l(va)-na;da[qa+la[2]]=0;da[qa+la[3]]=0;
oa=Math.min(oa,pa-ua);sa=Math.max(sa,pa+ka)}}}S[ca]={positions:H,errors:da,_bnds:[oa,sa]}}}var T=d.getComponentMethod("errorbars","makeComputeError"),O=k.getFromId(L,K.xaxis);L=k.getFromId(L,K.yaxis);var U=H.length/2,S={};P(Q,O);P(M,L);return S},textPosition:function(L,K,H,Q){L=K._length;var M={};if(v.hasMarkers(K)){K=H.font;var P=H.align,T=H.baseline;M.offset=Array(L);for(H=0;H<L;H++){var O=Q.sizes?Q.sizes[H]:Q.size,U=Array.isArray(K)?K[H].size:K.size,S=Array.isArray(P)?1<P.length?P[H]:P[0]:P,X=
Array.isArray(T)?1<T.length?T[H]:T[0]:T;X=z[X];O=O?O/.8+1:0;M.offset[H]=[z[S]*O/U,(-X*O-.5*X)/U]}}return M}}},{"../../components/drawing":665,"../../components/fx/helpers":679,"../../constants/interactions":752,"../../lib":778,"../../lib/gl_format_color":774,"../../plots/cartesian/axis_ids":831,"../../registry":911,"../scatter/make_bubble_size_func":1204,"../scatter/subtypes":1212,"./constants":1241,"./helpers":1246,"color-normalize":125,"fast-isnumeric":241,"svg-path-sdf":574}],1243:[function(b,
N,I){var r=b("../../lib"),q=b("../../registry"),m=b("./helpers"),l=b("./attributes"),a=b("../scatter/constants"),h=b("../scatter/subtypes"),g=b("../scatter/xy_defaults"),n=b("../scatter/period_defaults"),p=b("../scatter/marker_defaults"),d=b("../scatter/line_defaults"),e=b("../scatter/fillcolor_defaults"),f=b("../scatter/text_defaults");N.exports=function(k,t,v,w){function y(E,C){return r.coerce(k,t,l,E,C)}var B=k.marker?m.isOpenSymbol(k.marker.symbol):!1,A=h.isBubble(k),z=g(k,t,w,y);z?(n(k,t,w,y),
z=z<a.PTS_LINESONLY?"lines+markers":"lines",y("text"),y("hovertext"),y("hovertemplate"),y("mode",z),h.hasLines(t)&&(y("connectgaps"),d(k,t,v,w,y),y("line.shape")),h.hasMarkers(t)&&(p(k,t,v,w,y),y("marker.line.width",B||A?1:0)),h.hasText(t)&&(y("texttemplate"),f(k,t,w,y)),w=(t.line||{}).color,B=(t.marker||{}).color,y("fill"),"none"!==t.fill&&e(k,t,v,y),A=q.getComponentMethod("errorbars","supplyDefaults"),A(k,t,w||B||v,{axis:"y"}),A(k,t,w||B||v,{axis:"x",inherit:"y"}),r.coerceSelectionMarkerOpacity(t,
y)):t.visible=!1}},{"../../lib":778,"../../registry":911,"../scatter/constants":1191,"../scatter/fillcolor_defaults":1195,"../scatter/line_defaults":1200,"../scatter/marker_defaults":1206,"../scatter/period_defaults":1207,"../scatter/subtypes":1212,"../scatter/text_defaults":1213,"../scatter/xy_defaults":1214,"./attributes":1239,"./helpers":1246}],1244:[function(b,N,I){var r=b("../../lib"),q=b("../../components/color"),m=b("../../constants/interactions").DESELECTDIM;N.exports={styleTextSelection:function(l){l=
l[0];var a=l.trace,h=l.t;l=h._scene;h=h.index;var g=l.selectBatch[h],n=l.unselectBatch[h],p=l.textOptions[h],d=l.textSelectedOptions[h]||{},e=l.textUnselectedOptions[h]||{},f=r.extendFlat({},p);if(g.length||n.length){d=d.color;e=e.color;p=p.color;var k=Array.isArray(p);f.color=Array(a._length);for(a=0;a<g.length;a++){var t=g[a];f.color[t]=d||(k?p[t]:p)}for(a=0;a<n.length;a++)t=n[a],g=k?p[t]:p,f.color[t]=e?e:d?g:q.addOpacity(g,m)}l.glText[h].update(f)}}},{"../../components/color":643,"../../constants/interactions":752,
"../../lib":778}],1245:[function(b,N,I){var r=b("../scatter/format_labels");N.exports=function(q,m,l){var a=q.i;"x"in q||(q.x=m._x[a]);"y"in q||(q.y=m._y[a]);return r(q,m,l)}},{"../scatter/format_labels":1196}],1246:[function(b,N,I){var r=b("./constants");I.isOpenSymbol=function(q){return"string"===typeof q?r.OPEN_RE.test(q):100<q%200};I.isDotSymbol=function(q){return"string"===typeof q?r.DOT_RE.test(q):200<q}},{"./constants":1241}],1247:[function(b,N,I){function r(a,h,g,n){var p=a.xa,d=a.ya,e=a.distance,
f=a.dxy,k=a.index;h={pointNumber:k,x:h[k],y:g[k]};h.tx=Array.isArray(n.text)?n.text[k]:n.text;h.htx=Array.isArray(n.hovertext)?n.hovertext[k]:n.hovertext;h.data=Array.isArray(n.customdata)?n.customdata[k]:n.customdata;h.tp=Array.isArray(n.textposition)?n.textposition[k]:n.textposition;if(g=n.textfont)h.ts=m.isArrayOrTypedArray(g.size)?g.size[k]:g.size,h.tc=Array.isArray(g.color)?g.color[k]:g.color,h.tf=Array.isArray(g.family)?g.family[k]:g.family;if(g=n.marker)h.ms=m.isArrayOrTypedArray(g.size)?g.size[k]:
g.size,h.mo=m.isArrayOrTypedArray(g.opacity)?g.opacity[k]:g.opacity,h.mx=m.isArrayOrTypedArray(g.symbol)?g.symbol[k]:g.symbol,h.mc=m.isArrayOrTypedArray(g.color)?g.color[k]:g.color;var t=g&&g.line;t&&(h.mlc=Array.isArray(t.color)?t.color[k]:t.color,h.mlw=m.isArrayOrTypedArray(t.width)?t.width[k]:t.width);(g=g&&g.gradient)&&"none"!==g.type&&(h.mgt=Array.isArray(g.type)?g.type[k]:g.type,h.mgc=Array.isArray(g.color)?g.color[k]:g.color);p=p.c2p(h.x,!0);d=d.c2p(h.y,!0);g=h.mrc||1;if(t=n.hoverlabel)h.hbg=
Array.isArray(t.bgcolor)?t.bgcolor[k]:t.bgcolor,h.hbc=Array.isArray(t.bordercolor)?t.bordercolor[k]:t.bordercolor,h.hts=m.isArrayOrTypedArray(t.font.size)?t.font.size[k]:t.font.size,h.htc=Array.isArray(t.font.color)?t.font.color[k]:t.font.color,h.htf=Array.isArray(t.font.family)?t.font.family[k]:t.font.family,h.hnl=m.isArrayOrTypedArray(t.namelength)?t.namelength[k]:t.namelength;if(t=n.hoverinfo)h.hi=Array.isArray(t)?t[k]:t;if(t=n.hovertemplate)h.ht=Array.isArray(t)?t[k]:t;t={};t[a.index]=h;var v=
n._origX,w=n._origY;a=m.extendFlat({},a,{color:l(n,h),x0:p-g,x1:p+g,xLabelVal:v?v[k]:h.x,y0:d-g,y1:d+g,yLabelVal:w?w[k]:h.y,cd:t,distance:e,spikeDistance:f,hovertemplate:h.ht});h.htx?a.text=h.htx:h.tx?a.text=h.tx:n.text&&(a.text=n.text);m.fillText(h,n,a);q.getComponentMethod("errorbars","hoverInfo")(h,n,a);return a}var q=b("../../registry"),m=b("../../lib"),l=b("../scatter/get_trace_color");N.exports={hoverPoints:function(a,h,g,n){var p=a.cd,d=p[0].t;p=p[0].trace;var e=a.xa,f=a.ya,k=d.x,t=d.y;h=e.c2p(h);
g=f.c2p(g);var v=a.distance;if(d.tree){var w=e.p2c(h-v),y=e.p2c(h+v),B=f.p2c(g-v),A=f.p2c(g+v);d="x"===n?d.tree.range(Math.min(w,y),Math.min(f._rl[0],f._rl[1]),Math.max(w,y),Math.max(f._rl[0],f._rl[1])):d.tree.range(Math.min(w,y),Math.min(B,A),Math.max(w,y),Math.max(B,A))}else d=d.ids;if("x"===n)for(n=0;n<d.length;n++){if(y=k[d[n]],y=Math.abs(e.c2p(y)-h),y<v){v=y;w=f.c2p(t[d[n]])-g;var z=Math.sqrt(y*y+w*w);var E=d[n]}}else for(n=d.length-1;-1<n;n--)y=k[d[n]],w=t[d[n]],y=e.c2p(y)-h,w=f.c2p(w)-g,w=
Math.sqrt(y*y+w*w),w<v&&(v=z=w,E=d[n]);a.index=E;a.distance=v;a.dxy=z;return void 0===E?[a]:[r(a,k,t,p)]},calcHover:r}},{"../../lib":778,"../../registry":911,"../scatter/get_trace_color":1197}],1248:[function(b,N,I){I=b("./hover");N.exports={moduleType:"trace",name:"scattergl",basePlotModule:b("../../plots/cartesian"),categories:"gl regl cartesian symbols errorBarsOK showLegend scatter-like".split(" "),attributes:b("./attributes"),supplyDefaults:b("./defaults"),crossTraceDefaults:b("../scatter/cross_trace_defaults"),
colorbar:b("../scatter/marker_colorbar"),formatLabels:b("./format_labels"),calc:b("./calc"),plot:b("./plot"),hoverPoints:I.hoverPoints,selectPoints:b("./select"),meta:{}}},{"../../plots/cartesian":841,"../scatter/cross_trace_defaults":1193,"../scatter/marker_colorbar":1205,"./attributes":1239,"./calc":1240,"./defaults":1243,"./format_labels":1245,"./hover":1247,"./plot":1249,"./select":1251}],1249:[function(b,N,I){function r(f,k,t){var v=f._size;return[v.l+k.domain[0]*v.w,v.b+t.domain[0]*v.h,f.width-
v.r-(1-k.domain[1])*v.w,f.height-v.t-(1-t.domain[1])*v.h]}var q=b("regl-scatter2d"),m=b("regl-line2d"),l=b("regl-error2d"),a=b("gl-text"),h=b("../../lib"),g=b("../../components/dragelement/helpers").selectMode,n=b("../../lib/prepare_regl"),p=b("../scatter/subtypes"),d=b("../scatter/link_traces"),e=b("./edit_style").styleTextSelection;N.exports=function(f,k,t){if(t.length){var v=f._fullLayout,w=k._scene,y=k.xaxis,B=k.yaxis;if(w)if(n(f,["ANGLE_instanced_arrays","OES_element_index_uint"])){var A=w.count,
z=v._glcanvas.data()[0].regl;d(f,k,t);if(w.dirty){!0===w.error2d&&(w.error2d=l(z));!0===w.line2d&&(w.line2d=m(z));!0===w.scatter2d&&(w.scatter2d=q(z,{constPointSize:!0}));!0===w.fill2d&&(w.fill2d=m(z));if(!0===w.glText)for(w.glText=Array(A),f=0;f<A;f++)w.glText[f]=new a(z);if(w.glText){if(A>w.glText.length)for(k=A-w.glText.length,f=0;f<k;f++)w.glText.push(new a(z));else A<w.glText.length&&w.glText.splice(A,w.glText.length-A).forEach(function(Q){Q.destroy()});for(f=0;f<A;f++)w.glText[f].update(w.textOptions[f])}w.line2d&&
(w.line2d.update(w.lineOptions),w.lineOptions=w.lineOptions.map(function(Q){if(Q&&Q.positions){for(var M=Q.positions,P=0;P<M.length&&(isNaN(M[P])||isNaN(M[P+1]));)P+=2;for(var T=M.length-2;T>P&&(isNaN(M[T])||isNaN(M[T+1]));)T-=2;Q.positions=M.slice(P,T+2)}return Q}),w.line2d.update(w.lineOptions));w.error2d&&(f=(w.errorXOptions||[]).concat(w.errorYOptions||[]),w.error2d.update(f));w.scatter2d&&w.scatter2d.update(w.markerOptions);w.fillOrder=h.repeat(null,A);w.fill2d&&(w.fillOptions=w.fillOptions.map(function(Q,
M){var P=t[M];if(Q&&P&&P[0]&&P[0].trace){var T=P[0];P=T.trace;var O=T.t,U=w.lineOptions[M],S;T=[];P._ownfill&&T.push(M);P._nexttrace&&T.push(M+1);T.length&&(w.fillOrder[M]=T);T=[];O=U&&U.positions||O.positions;if("tozeroy"===P.fill){for(U=0;U<O.length&&isNaN(O[U+1]);)U+=2;for(S=O.length-2;S>U&&isNaN(O[S+1]);)S-=2;0!==O[U+1]&&(T=[O[U],0]);T=T.concat(O.slice(U,S+2));0!==O[S+1]&&(T=T.concat([O[S],0]))}else if("tozerox"===P.fill){for(U=0;U<O.length&&isNaN(O[U]);)U+=2;for(S=O.length-2;S>U&&isNaN(O[S]);)S-=
2;0!==O[U]&&(T=[0,O[U+1]]);T=T.concat(O.slice(U,S+2));0!==O[S]&&(T=T.concat([0,O[S+1]]))}else if("toself"===P.fill||"tonext"===P.fill){T=[];for(U=S=0;U<O.length;U+=2)if(isNaN(O[U])||isNaN(O[U+1]))T=T.concat(O.slice(S,U)),T.push(O[S],O[S+1]),S=U+2;T=T.concat(O.slice(S));S&&T.push(O[S],O[S+1])}else if(U=P._nexttrace)if(S=w.lineOptions[M+1])if(S=S.positions,"tonexty"===P.fill){T=O.slice();for(M=Math.floor(S.length/2);M--;){O=S[2*M];var X=S[2*M+1];isNaN(O)||isNaN(X)||T.push(O,X)}Q.fill=U.fillcolor}if(P._prevtrace&&
"tonext"===P._prevtrace.fill){M=w.lineOptions[M-1].positions;O=T.length/2;S=[O];for(U=0;U<M.length;U+=2)(isNaN(M[U])||isNaN(M[U+1]))&&S.push(U/2+O+1);T=T.concat(M);Q.hole=S}Q.fillmode=P.fill;Q.opacity=P.opacity;Q.positions=T;return Q}}),w.fill2d.update(w.fillOptions))}z=g(v.dragmode);k=-1<v.clickmode.indexOf("select");for(f=0;f<A;f++){var E=t[f][0];var C=E.trace;var u=E.t,D=u.index;E=C._length;var G=u.x,J=u.y;if(C.selectedpoints||z||k){z||(z=!0);if(C.selectedpoints){var L=w.selectBatch[D]=h.selIndices2selPoints(C),
K={};for(C=0;C<L.length;C++)K[L[C]]=1;L=[];for(C=0;C<E;C++)K[C]||L.push(C);w.unselectBatch[D]=L}D=u.xpx=Array(E);u=u.ypx=Array(E);for(C=0;C<E;C++)D[C]=y.c2p(G[C]),u[C]=B.c2p(J[C])}else u.xpx=u.ypx=null}if(z){w.select2d||(w.select2d=q(v._glcanvas.data()[1].regl));if(w.scatter2d){z=Array(A);for(f=0;f<A;f++)z[f]=w.selectBatch[f].length||w.unselectBatch[f].length?w.markerUnselectedOptions[f]:{};w.scatter2d.update(z)}w.select2d&&(w.select2d.update(w.markerOptions),w.select2d.update(w.markerSelectedOptions));
w.glText&&t.forEach(function(Q){p.hasText(((Q||[])[0]||{}).trace||{})&&e(Q)})}else w.scatter2d&&w.scatter2d.update(w.markerOptions);var H={viewport:r(v,y,B),range:[(y._rl||y.range)[0],(B._rl||B.range)[0],(y._rl||y.range)[1],(B._rl||B.range)[1]]};v=h.repeat(H,w.count);w.fill2d&&w.fill2d.update(v);w.line2d&&w.line2d.update(v);w.error2d&&w.error2d.update(v.concat(v));w.scatter2d&&w.scatter2d.update(v);w.select2d&&w.select2d.update(v);w.glText&&w.glText.forEach(function(Q){Q.update(H)})}else w.init()}}},
{"../../components/dragelement/helpers":661,"../../lib":778,"../../lib/prepare_regl":791,"../scatter/link_traces":1203,"../scatter/subtypes":1212,"./edit_style":1244,"gl-text":352,"regl-error2d":534,"regl-line2d":535,"regl-scatter2d":537}],1250:[function(b,N,I){var r=b("../../lib");N.exports=function(q,m){var l=m._scene,a={count:0,dirty:!0,lineOptions:[],fillOptions:[],markerOptions:[],markerSelectedOptions:[],markerUnselectedOptions:[],errorXOptions:[],errorYOptions:[],textOptions:[],textSelectedOptions:[],
textUnselectedOptions:[],selectBatch:[],unselectBatch:[]},h={fill2d:!1,scatter2d:!1,error2d:!1,line2d:!1,glText:!1,select2d:!1};m._scene||(l=m._scene={},l.init=function(){r.extendFlat(l,h,a)},l.init(),l.update=function(g){var n=r.repeat(g,l.count);l.fill2d&&l.fill2d.update(n);l.scatter2d&&l.scatter2d.update(n);l.line2d&&l.line2d.update(n);l.error2d&&l.error2d.update(n.concat(n));l.select2d&&l.select2d.update(n);if(l.glText)for(n=0;n<l.count;n++)l.glText[n].update(g)},l.draw=function(){for(var g=l.count,
n=l.fill2d,p=l.error2d,d=l.line2d,e=l.scatter2d,f=l.glText,k=l.select2d,t=l.selectBatch,v=l.unselectBatch,w=0;w<g;w++){n&&l.fillOrder[w]&&n.draw(l.fillOrder[w]);d&&l.lineOptions[w]&&d.draw(w);p&&(l.errorXOptions[w]&&p.draw(w),l.errorYOptions[w]&&p.draw(w+g));if(e&&l.markerOptions[w])if(v[w].length){var y=r.repeat([],l.count);y[w]=v[w];e.draw(y)}else t[w].length||e.draw(w);f[w]&&l.textOptions[w]&&f[w].render()}k&&k.draw(t);l.dirty=!1},l.destroy=function(){l.fill2d&&l.fill2d.destroy&&l.fill2d.destroy();
l.scatter2d&&l.scatter2d.destroy&&l.scatter2d.destroy();l.error2d&&l.error2d.destroy&&l.error2d.destroy();l.line2d&&l.line2d.destroy&&l.line2d.destroy();l.select2d&&l.select2d.destroy&&l.select2d.destroy();l.glText&&l.glText.forEach(function(g){g.destroy&&g.destroy()});l.lineOptions=null;l.fillOptions=null;l.markerOptions=null;l.markerSelectedOptions=null;l.markerUnselectedOptions=null;l.errorXOptions=null;l.errorYOptions=null;l.textOptions=null;l.textSelectedOptions=null;l.textUnselectedOptions=
null;l.selectBatch=null;l.unselectBatch=null;m._scene=null});l.dirty||r.extendFlat(l,a);return l}},{"../../lib":778}],1251:[function(b,N,I){var r=b("../scatter/subtypes"),q=b("./edit_style").styleTextSelection;N.exports=function(m,l){var a=m.cd,h=[],g=a[0].trace,n=a[0].t,p=g._length,d=n.x,e=n.y,f=n._scene,k=n.index;if(!f)return h;var t=r.hasText(g),v=r.hasMarkers(g);if(!0!==g.visible||!v&&!t)return h;g=[];var w=[];if(!1!==l&&!l.degenerate)for(var y=0;y<p;y++)l.contains([n.xpx[y],n.ypx[y]],!1,y,m)?
(g.push(y),h.push({pointNumber:y,x:d[y],y:e[y]})):w.push(y);v&&((m=f.scatter2d,g.length||w.length)?f.selectBatch[k].length||f.unselectBatch[k].length||(l=Array(f.count),l[k]=f.markerUnselectedOptions[k],m.update.apply(m,l)):(l=Array(f.count),l[k]=f.markerOptions[k],m.update.apply(m,l)));f.selectBatch[k]=g;f.unselectBatch[k]=w;t&&q(a);return h}},{"../scatter/subtypes":1212,"./edit_style":1244}],1252:[function(b,N,I){I=b("../../plots/template_attributes").hovertemplateAttrs;var r=b("../../plots/template_attributes").texttemplateAttrs,
q=b("../scattergeo/attributes"),m=b("../scatter/attributes"),l=b("../../plots/mapbox/layout_attributes"),a=b("../../plots/attributes"),h=b("../../components/colorscale/attributes"),g=b("../../lib/extend").extendFlat;b=b("../../plot_api/edit_types").overrideAll;var n=q.line,p=q.marker;N.exports=b({lon:q.lon,lat:q.lat,mode:g({},m.mode,{dflt:"markers"}),text:g({},m.text,{}),texttemplate:r({editType:"plot"},{keys:["lat","lon","text"]}),hovertext:g({},m.hovertext,{}),line:{color:n.color,width:n.width},
connectgaps:m.connectgaps,marker:g({symbol:{valType:"string",dflt:"circle",arrayOk:!0},angle:{valType:"number",dflt:"auto",arrayOk:!0},allowoverlap:{valType:"boolean",dflt:!1},opacity:p.opacity,size:p.size,sizeref:p.sizeref,sizemin:p.sizemin,sizemode:p.sizemode},h("marker")),fill:q.fill,fillcolor:m.fillcolor,textfont:l.layers.symbol.textfont,textposition:l.layers.symbol.textposition,below:{valType:"string"},selected:{marker:m.selected.marker},unselected:{marker:m.unselected.marker},hoverinfo:g({},
a.hoverinfo,{flags:["lon","lat","text","name"]}),hovertemplate:I()},"calc","nested")},{"../../components/colorscale/attributes":650,"../../lib/extend":768,"../../plot_api/edit_types":810,"../../plots/attributes":824,"../../plots/mapbox/layout_attributes":887,"../../plots/template_attributes":906,"../scatter/attributes":1187,"../scattergeo/attributes":1229}],1253:[function(b,N,I){function r(){return{geojson:n.makeBlank(),layout:{visibility:"none"},paint:{}}}function q(y){var B=y[0].trace,A=B.marker,
z=B.selectedpoints,E=h.isArrayOrTypedArray(A.color),C=h.isArrayOrTypedArray(A.size),u=h.isArrayOrTypedArray(A.opacity),D,G;E&&(G=p.hasColorscale(B,"marker")?p.makeColorScaleFuncFromTrace(A):h.identity);var J;C&&(J=e(B));var L;u&&(L=function(T){T=a(T)?+h.constrain(T,0,1):0;return B.opacity*T});var K=[];for(D=0;D<y.length;D++){var H=y[D],Q=H.lonlat;if(Q[0]!==g){var M={};G&&(M.mcc=H.mcc=G(H.mc));J&&(M.mrc=H.mrc=J(H.ms));L&&(M.mo=L(H.mo));z&&(M.selected=H.selected||0);K.push({type:"Feature",geometry:{type:"Point",
coordinates:Q},properties:M})}}if(z){var P=d.makeSelectedPointStyleFns(B);for(D=0;D<K.length;D++)y=K[D].properties,P.selectedOpacityFn&&(y.mo=B.opacity*P.selectedOpacityFn(y)),P.selectedColorFn&&(y.mcc=P.selectedColorFn(y)),P.selectedSizeFn&&(y.mrc=P.selectedSizeFn(y))}return{geojson:{type:"FeatureCollection",features:K},mcc:E||P&&P.selectedColorFn?{type:"identity",property:"mcc"}:A.color,mrc:C||P&&P.selectedSizeFn?{type:"identity",property:"mrc"}:A.size/2,mo:u||P&&P.selectedOpacityFn?{type:"identity",
property:"mo"}:B.opacity*A.opacity}}function m(y,B){return h.isArrayOrTypedArray(y)?B?function(A){return a(y[A])?+y[A]:0}:function(A){return y[A]}:y?function(){return y}:l}function l(){return""}var a=b("fast-isnumeric"),h=b("../../lib"),g=b("../../constants/numerical").BADNUM,n=b("../../lib/geojson_utils"),p=b("../../components/colorscale"),d=b("../../components/drawing"),e=b("../scatter/make_bubble_size_func"),f=b("../scatter/subtypes"),k=b("../../plots/mapbox/convert_text_opts"),t=b("../../components/fx/helpers").appendArrayPointValue,
v=b("../../lib/svg_text_utils").NEWLINES,w=b("../../lib/svg_text_utils").BR_TAG_ALL;N.exports=function(y,B){var A=B[0].trace,z=!0===A.visible&&0!==A._length,E="none"!==A.fill,C=f.hasLines(A),u=f.hasMarkers(A),D=f.hasText(A),G=u&&"circle"===A.marker.symbol,J=u&&"circle"!==A.marker.symbol,L=r(),K=r(),H=r();u=r();var Q={fill:L,line:K,circle:H,symbol:u};if(!z)return Q;if(E||C)var M=n.calcTraceToLineCoords(B);E&&(L.geojson=n.makePolygon(M),L.layout.visibility="visible",h.extendFlat(L.paint,{"fill-color":A.fillcolor}));
C&&(K.geojson=n.makeLine(M),K.layout.visibility="visible",h.extendFlat(K.paint,{"line-width":A.line.width,"line-color":A.line.color,"line-opacity":A.opacity}));G&&(z=q(B),H.geojson=z.geojson,H.layout.visibility="visible",h.extendFlat(H.paint,{"circle-color":z.mcc,"circle-radius":z.mrc,"circle-opacity":z.mo}));if(J||D){y=y._fullLayout;z=B[0].trace;C=z.marker||{};E=C.symbol;C=C.angle;E="circle"!==E?m(E):l;C="auto"!==C?m(C,!0):l;G=f.hasText(z)?m(z.text):l;H=[];for(M=0;M<B.length;M++)if(L=B[M],L.lonlat[0]!==
g){if(K=z.texttemplate){K=Array.isArray(K)?K[M]||"":K;var P=z._module.formatLabels(L,z,y),T={};t(T,z,L.i);K=h.texttemplateString(K,P,y._d3locale,T,L,z._meta||{})}else K=G(M);K&&(K=K.replace(v,"").replace(w,"\n"));H.push({type:"Feature",geometry:{type:"Point",coordinates:L.lonlat},properties:{symbol:E(M),angle:C(M),text:K}})}u.geojson={type:"FeatureCollection",features:H};h.extendFlat(u.layout,{visibility:"visible","icon-image":"{symbol}-15","text-field":"{text}"});J&&(h.extendFlat(u.layout,{"icon-size":A.marker.size/
10}),"angle"in A.marker&&"auto"!==A.marker.angle&&h.extendFlat(u.layout,{"icon-rotate":{type:"identity",property:"angle"},"icon-rotation-alignment":"map"}),u.layout["icon-allow-overlap"]=A.marker.allowoverlap,h.extendFlat(u.paint,{"icon-opacity":A.opacity*A.marker.opacity,"icon-color":A.marker.color}));D&&(B=k(A.textposition,(A.marker||{}).size),h.extendFlat(u.layout,{"text-size":A.textfont.size,"text-anchor":B.anchor,"text-offset":B.offset}),h.extendFlat(u.paint,{"text-color":A.textfont.color,"text-opacity":A.opacity}))}return Q}},
{"../../components/colorscale":655,"../../components/drawing":665,"../../components/fx/helpers":679,"../../constants/numerical":753,"../../lib":778,"../../lib/geojson_utils":772,"../../lib/svg_text_utils":803,"../../plots/mapbox/convert_text_opts":884,"../scatter/make_bubble_size_func":1204,"../scatter/subtypes":1212,"fast-isnumeric":241}],1254:[function(b,N,I){function r(p,d,e){p=e("lon")||[];e=e("lat")||[];e=Math.min(p.length,e.length);return d._length=e}var q=b("../../lib"),m=b("../scatter/subtypes"),
l=b("../scatter/marker_defaults"),a=b("../scatter/line_defaults"),h=b("../scatter/text_defaults"),g=b("../scatter/fillcolor_defaults"),n=b("./attributes");N.exports=function(p,d,e,f){function k(v,w){return q.coerce(p,d,n,v,w)}if(r(p,d,k)){k("text");k("texttemplate");k("hovertext");k("hovertemplate");k("mode");k("below");m.hasLines(d)&&(a(p,d,e,f,k,{noDash:!0}),k("connectgaps"));if(m.hasMarkers(d)){l(p,d,e,f,k,{noLine:!0});k("marker.allowoverlap");k("marker.angle");var t=d.marker;"circle"!==t.symbol&&
(q.isArrayOrTypedArray(t.size)&&(t.size=t.size[0]),q.isArrayOrTypedArray(t.color)&&(t.color=t.color[0]))}m.hasText(d)&&h(p,d,f,k,{noSelect:!0});k("fill");"none"!==d.fill&&g(p,d,e,k);q.coerceSelectionMarkerOpacity(d,k)}else d.visible=!1}},{"../../lib":778,"../scatter/fillcolor_defaults":1195,"../scatter/line_defaults":1200,"../scatter/marker_defaults":1206,"../scatter/subtypes":1212,"../scatter/text_defaults":1213,"./attributes":1252}],1255:[function(b,N,I){N.exports=function(r,q){r.lon=q.lon;r.lat=
q.lat;return r}},{}],1256:[function(b,N,I){var r=b("../../plots/cartesian/axes");N.exports=function(q,m,l){var a={};m=l[m.subplot]._subplot.mockAxis;q=q.lonlat;a.lonLabel=r.tickText(m,m.c2l(q[0]),!0).text;a.latLabel=r.tickText(m,m.c2l(q[1]),!0).text;return a}},{"../../plots/cartesian/axes":828}],1257:[function(b,N,I){function r(g,n,p){if(!g.hovertemplate){var d=(n.hi||g.hoverinfo).split("+"),e=-1!==d.indexOf("all"),f=-1!==d.indexOf("lon"),k=-1!==d.indexOf("lat"),t=n.lonlat,v=[];e||f&&k?v.push("("+
(t[0]+", ")+(t[1]+")")):f?v.push(p.lon+(t[0]+"")):k&&v.push(p.lat+(t[1]+""));(e||-1!==d.indexOf("text"))&&a(n,g,v);return v.join("\x3cbr\x3e")}}var q=b("../../components/fx"),m=b("../../lib"),l=b("../scatter/get_trace_color"),a=m.fillText,h=b("../../constants/numerical").BADNUM;N.exports=function(g,n,p){var d=g.cd,e=d[0].trace,f=g.xa,k=g.ya,t=g.subplot,v=360*(0<=n?Math.floor((n+180)/360):Math.ceil((n-180)/360)),w=n-v;q.getClosest(d,function(A){var z=A.lonlat;if(z[0]===h)return Infinity;var E=
m.modHalf(z[0],360);z=z[1];var C=t.project([E,z]);z=C.x-f.c2p([w,z]);E=C.y-k.c2p([E,p]);A=Math.max(3,A.mrc||0);return Math.max(Math.sqrt(z*z+E*E)-A,1-3/A)},g);if(!1!==g.index){n=d[g.index];var y=n.lonlat;y=[m.modHalf(y[0],360)+v,y[1]];v=f.c2p(y);y=k.c2p(y);var B=n.mrc||1;g.x0=v-B;g.x1=v+B;g.y0=y-B;g.y1=y+B;v={};v[e.subplot]={_subplot:t};v=e._module.formatLabels(n,e,v);g.lonLabel=v.lonLabel;g.latLabel=v.latLabel;g.color=l(e,n);g.extraText=r(e,n,d[0].t.labels);g.hovertemplate=e.hovertemplate;return[g]}}},
{"../../components/fx":683,"../../constants/numerical":753,"../../lib":778,"../scatter/get_trace_color":1197}],1258:[function(b,N,I){N.exports={attributes:b("./attributes"),supplyDefaults:b("./defaults"),colorbar:b("../scatter/marker_colorbar"),formatLabels:b("./format_labels"),calc:b("../scattergeo/calc"),plot:b("./plot"),hoverPoints:b("./hover"),eventData:b("./event_data"),selectPoints:b("./select"),styleOnSelect:function(r,q){q&&q[0].trace._glTrace.update(q)},moduleType:"trace",name:"scattermapbox",
basePlotModule:b("../../plots/mapbox"),categories:["mapbox","gl","symbols","showLegend","scatter-like"],meta:{}}},{"../../plots/mapbox":885,"../scatter/marker_colorbar":1205,"../scattergeo/calc":1230,"./attributes":1252,"./defaults":1254,"./event_data":1255,"./format_labels":1256,"./hover":1257,"./plot":1259,"./select":1260}],1259:[function(b,N,I){function r(a,h){this.type="scattermapbox";this.subplot=a;this.uid=h;this.sourceIds={fill:"source-"+h+"-fill",line:"source-"+h+"-line",circle:"source-"+
h+"-circle",symbol:"source-"+h+"-symbol"};this.layerIds={fill:m+h+"-fill",line:m+h+"-line",circle:m+h+"-circle",symbol:m+h+"-symbol"};this.below=null}var q=b("./convert"),m=b("../../plots/mapbox/constants").traceLayerPrefix,l=["fill","line","circle","symbol"];b=r.prototype;b.addSource=function(a,h){this.subplot.map.addSource(this.sourceIds[a],{type:"geojson",data:h.geojson})};b.setSourceData=function(a,h){this.subplot.map.getSource(this.sourceIds[a]).setData(h.geojson)};b.addLayer=function(a,h,g){this.subplot.addLayer({type:a,
id:this.layerIds[a],source:this.sourceIds[a],layout:h.layout,paint:h.paint},g)};b.update=function(a){var h=this.subplot,g=h.map,n=q(h.gd,a),p=h.belowLookup["trace-"+this.uid],d;if(p!==this.below){for(d=l.length-1;0<=d;d--){var e=l[d];g.removeLayer(this.layerIds[e])}for(d=0;d<l.length;d++)e=l[d],g=n[e],this.addLayer(e,g,p);this.below=p}for(d=0;d<l.length;d++)e=l[d],g=n[e],h.setOptions(this.layerIds[e],"setLayoutProperty",g.layout),"visible"===g.layout.visibility&&(this.setSourceData(e,g),h.setOptions(this.layerIds[e],
"setPaintProperty",g.paint));a[0].trace._glTrace=this};b.dispose=function(){for(var a=this.subplot.map,h=l.length-1;0<=h;h--){var g=l[h];a.removeLayer(this.layerIds[g]);a.removeSource(this.sourceIds[g])}};N.exports=function(a,h){var g=h[0].trace,n=new r(a,g.uid),p=q(a.gd,h);a=n.below=a.belowLookup["trace-"+g.uid];for(g=0;g<l.length;g++){var d=l[g],e=p[d];n.addSource(d,e);n.addLayer(d,e,a)}return h[0].trace._glTrace=n}},{"../../plots/mapbox/constants":883,"./convert":1253}],1260:[function(b,N,I){var r=
b("../../lib"),q=b("../scatter/subtypes"),m=b("../../constants/numerical").BADNUM;N.exports=function(l,a){var h=l.cd,g=l.xaxis,n=l.yaxis,p=[],d;if(!q.hasMarkers(h[0].trace))return[];if(!1===a)for(d=0;d<h.length;d++)h[d].selected=0;else for(d=0;d<h.length;d++){var e=h[d],f=e.lonlat;if(f[0]!==m){var k=[r.modHalf(f[0],360),f[1]];k=[g.c2p(k),n.c2p(k)];a.contains(k,null,d,l)?(p.push({pointNumber:d,lon:f[0],lat:f[1]}),e.selected=1):e.selected=0}}return p}},{"../../constants/numerical":753,"../../lib":778,
"../scatter/subtypes":1212}],1261:[function(b,N,I){I=b("../../plots/template_attributes").hovertemplateAttrs;var r=b("../../plots/template_attributes").texttemplateAttrs,q=b("../../lib/extend").extendFlat,m=b("../scatter/attributes");b=b("../../plots/attributes");var l=m.line;N.exports={mode:m.mode,r:{valType:"data_array",editType:"calc+clearAxisTypes"},theta:{valType:"data_array",editType:"calc+clearAxisTypes"},r0:{valType:"any",dflt:0,editType:"calc+clearAxisTypes"},dr:{valType:"number",dflt:1,
editType:"calc"},theta0:{valType:"any",dflt:0,editType:"calc+clearAxisTypes"},dtheta:{valType:"number",editType:"calc"},thetaunit:{valType:"enumerated",values:["radians","degrees","gradians"],dflt:"degrees",editType:"calc+clearAxisTypes"},text:m.text,texttemplate:r({editType:"plot"},{keys:["r","theta","text"]}),hovertext:m.hovertext,line:{color:l.color,width:l.width,dash:l.dash,shape:q({},l.shape,{values:["linear","spline"]}),smoothing:l.smoothing,editType:"calc"},connectgaps:m.connectgaps,marker:m.marker,
cliponaxis:q({},m.cliponaxis,{dflt:!1}),textposition:m.textposition,textfont:m.textfont,fill:q({},m.fill,{values:["none","toself","tonext"],dflt:"none"}),fillcolor:m.fillcolor,hoverinfo:q({},b.hoverinfo,{flags:["r","theta","text","name"]}),hoveron:m.hoveron,hovertemplate:I(),selected:m.selected,unselected:m.unselected}},{"../../lib/extend":768,"../../plots/attributes":824,"../../plots/template_attributes":906,"../scatter/attributes":1187}],1262:[function(b,N,I){var r=b("fast-isnumeric"),q=b("../../constants/numerical").BADNUM,
m=b("../../plots/cartesian/axes"),l=b("../scatter/colorscale_calc"),a=b("../scatter/arrays_to_calcdata"),h=b("../scatter/calc_selection"),g=b("../scatter/calc").calcMarkerSize;N.exports=function(n,p){var d=n._fullLayout,e=p.subplot,f=d[e].radialaxis;e=d[e].angularaxis;d=f.makeCalcdata(p,"r");var k=e.makeCalcdata(p,"theta"),t=p._length;e=Array(t);for(var v=0;v<t;v++){var w=d[v],y=k[v],B=e[v]={};r(w)&&r(y)?(B.r=w,B.theta=y):B.r=q}k=g(p,t);p._extremes.x=m.findExtremes(f,d,{ppad:k});l(n,p);a(e,p);h(e,
p);return e}},{"../../constants/numerical":753,"../../plots/cartesian/axes":828,"../scatter/arrays_to_calcdata":1186,"../scatter/calc":1188,"../scatter/calc_selection":1189,"../scatter/colorscale_calc":1190,"fast-isnumeric":241}],1263:[function(b,N,I){function r(e,f,k,t){e=t("r");k=t("theta");if(e)k?e=Math.min(e.length,k.length):(e=e.length,t("theta0"),t("dtheta"));else{if(!k)return 0;e=f.theta.length;t("r0");t("dr")}return f._length=e}var q=b("../../lib"),m=b("../scatter/subtypes"),l=b("../scatter/marker_defaults"),
a=b("../scatter/line_defaults"),h=b("../scatter/line_shape_defaults"),g=b("../scatter/text_defaults"),n=b("../scatter/fillcolor_defaults"),p=b("../scatter/constants").PTS_LINESONLY,d=b("./attributes");N.exports={handleRThetaDefaults:r,supplyDefaults:function(e,f,k,t){function v(y,B){return q.coerce(e,f,d,y,B)}var w=r(e,f,t,v);if(w){v("thetaunit");v("mode",w<p?"lines+markers":"lines");v("text");v("hovertext");"fills"!==f.hoveron&&v("hovertemplate");m.hasLines(f)&&(a(e,f,k,t,v),h(e,f,v),v("connectgaps"));
m.hasMarkers(f)&&l(e,f,k,t,v,{gradient:!0});m.hasText(f)&&(v("texttemplate"),g(e,f,t,v));t=[];if(m.hasMarkers(f)||m.hasText(f))v("cliponaxis"),v("marker.maxdisplayed"),t.push("points");v("fill");"none"!==f.fill&&(n(e,f,k,v),m.hasLines(f)||h(e,f,v));"tonext"!==f.fill&&"toself"!==f.fill||t.push("fills");v("hoveron",t.join("+")||"points");q.coerceSelectionMarkerOpacity(f,v)}else f.visible=!1}}},{"../../lib":778,"../scatter/constants":1191,"../scatter/fillcolor_defaults":1195,"../scatter/line_defaults":1200,
"../scatter/line_shape_defaults":1202,"../scatter/marker_defaults":1206,"../scatter/subtypes":1212,"../scatter/text_defaults":1213,"./attributes":1261}],1264:[function(b,N,I){var r=b("../../lib"),q=b("../../plots/cartesian/axes");N.exports=function(m,l,a){var h={},g=a[l.subplot]._subplot;g?(l=g.radialAxis,g=g.angularAxis):(g=a[l.subplot],l=g.radialaxis,g=g.angularaxis);a=l.c2l(m.r);h.rLabel=q.tickText(l,a,!0).text;m="degrees"===g.thetaunit?r.rad2deg(m.theta):m.theta;h.thetaLabel=q.tickText(g,m,!0).text;
return h}},{"../../lib":778,"../../plots/cartesian/axes":828}],1265:[function(b,N,I){function r(m,l,a,h){var g=a.radialAxis,n=a.angularAxis;g._hovertitle="r";n._hovertitle="";var p={};p[l.subplot]={_subplot:a};a=l._module.formatLabels(m,l,p);h.rLabel=a.rLabel;h.thetaLabel=a.thetaLabel;a=m.hi||l.hoverinfo;m=[];l.hovertemplate||(l=a.split("+"),-1!==l.indexOf("all")&&(l=["r","theta","text"]),-1!==l.indexOf("r")&&m.push(g._hovertitle+": "+h.rLabel),-1!==l.indexOf("theta")&&m.push(n._hovertitle+": "+
h.thetaLabel),-1!==l.indexOf("text")&&h.text&&(m.push(h.text),delete h.text),h.extraText=m.join("\x3cbr\x3e"))}var q=b("../scatter/hover");N.exports={hoverPoints:function(m,l,a,h){if((l=q(m,l,a,h))&&!1!==l[0].index){a=l[0];if(void 0===a.index)return l;m=m.subplot;h=a.cd[a.index];var g=a.trace;if(m.isPtInside(h))return a.xLabelVal=void 0,a.yLabelVal=void 0,r(h,g,m,a),a.hovertemplate=g.hovertemplate,l}},makeHoverPointText:r}},{"../scatter/hover":1198}],1266:[function(b,N,I){N.exports={moduleType:"trace",
name:"scatterpolar",basePlotModule:b("../../plots/polar"),categories:["polar","symbols","showLegend","scatter-like"],attributes:b("./attributes"),supplyDefaults:b("./defaults").supplyDefaults,colorbar:b("../scatter/marker_colorbar"),formatLabels:b("./format_labels"),calc:b("./calc"),plot:b("./plot"),style:b("../scatter/style").style,styleOnSelect:b("../scatter/style").styleOnSelect,hoverPoints:b("./hover").hoverPoints,selectPoints:b("../scatter/select"),meta:{}}},{"../../plots/polar":894,"../scatter/marker_colorbar":1205,
"../scatter/select":1209,"../scatter/style":1211,"./attributes":1261,"./calc":1262,"./defaults":1263,"./format_labels":1264,"./hover":1265,"./plot":1267}],1267:[function(b,N,I){var r=b("../scatter/plot"),q=b("../../constants/numerical").BADNUM;N.exports=function(m,l,a){var h=l.layers.frontplot.select("g.scatterlayer"),g={xaxis:l.xaxis,yaxis:l.yaxis,plot:l.framework,layerClipId:l._hasClipOnAxisFalse?l.clipIds.forTraces:null},n=l.radialAxis;l=l.angularAxis;for(var p=0;p<a.length;p++)for(var d=a[p],
e=0;e<d.length;e++){var f=d[e],k=f.r;if(k===q)f.x=f.y=q;else{k=n.c2g(k);var t=l.c2g(f.theta);f.x=k*Math.cos(t);f.y=k*Math.sin(t)}}r(m,g,a,h)}},{"../../constants/numerical":753,"../scatter/plot":1208}],1268:[function(b,N,I){I=b("../scatterpolar/attributes");var r=b("../scattergl/attributes");b=b("../../plots/template_attributes").texttemplateAttrs;N.exports={mode:I.mode,r:I.r,theta:I.theta,r0:I.r0,dr:I.dr,theta0:I.theta0,dtheta:I.dtheta,thetaunit:I.thetaunit,text:I.text,texttemplate:b({editType:"plot"},
{keys:["r","theta","text"]}),hovertext:I.hovertext,hovertemplate:I.hovertemplate,line:r.line,connectgaps:r.connectgaps,marker:r.marker,fill:r.fill,fillcolor:r.fillcolor,textposition:r.textposition,textfont:r.textfont,hoverinfo:I.hoverinfo,selected:I.selected,unselected:I.unselected}},{"../../plots/template_attributes":906,"../scattergl/attributes":1239,"../scatterpolar/attributes":1261}],1269:[function(b,N,I){var r=b("../scatter/colorscale_calc"),q=b("../scatter/calc").calcMarkerSize,m=b("../scattergl/convert"),
l=b("../../plots/cartesian/axes"),a=b("../scattergl/constants").TOO_MANY_POINTS;N.exports=function(h,g){var n=h._fullLayout,p=g.subplot,d=n[p].radialaxis;p=n[p].angularaxis;n=g._r=d.makeCalcdata(g,"r");var e=g._theta=p.makeCalcdata(g,"theta");p=g._length;var f={};p<n.length&&(n=n.slice(0,p));p<e.length&&(e=e.slice(0,p));f.r=n;f.theta=e;r(h,g);h=f.opts=m.style(h,g);var k;p<a?k=q(g,p):h.marker&&(k=2*(h.marker.sizeAvg||Math.max(h.marker.size,3)));g._extremes.x=l.findExtremes(d,n,{ppad:k});return[{x:!1,
y:!1,t:f,trace:g}]}},{"../../plots/cartesian/axes":828,"../scatter/calc":1188,"../scatter/colorscale_calc":1190,"../scattergl/constants":1241,"../scattergl/convert":1242}],1270:[function(b,N,I){var r=b("../../lib"),q=b("../scatter/subtypes"),m=b("../scatterpolar/defaults").handleRThetaDefaults,l=b("../scatter/marker_defaults"),a=b("../scatter/line_defaults"),h=b("../scatter/text_defaults"),g=b("../scatter/fillcolor_defaults"),n=b("../scatter/constants").PTS_LINESONLY,p=b("./attributes");N.exports=
function(d,e,f,k){function t(w,y){return r.coerce(d,e,p,w,y)}var v=m(d,e,k,t);v?(t("thetaunit"),t("mode",v<n?"lines+markers":"lines"),t("text"),t("hovertext"),"fills"!==e.hoveron&&t("hovertemplate"),q.hasLines(e)&&(a(d,e,f,k,t),t("connectgaps")),q.hasMarkers(e)&&l(d,e,f,k,t),q.hasText(e)&&(t("texttemplate"),h(d,e,k,t)),t("fill"),"none"!==e.fill&&g(d,e,f,t),r.coerceSelectionMarkerOpacity(e,t)):e.visible=!1}},{"../../lib":778,"../scatter/constants":1191,"../scatter/fillcolor_defaults":1195,"../scatter/line_defaults":1200,
"../scatter/marker_defaults":1206,"../scatter/subtypes":1212,"../scatter/text_defaults":1213,"../scatterpolar/defaults":1263,"./attributes":1268}],1271:[function(b,N,I){var r=b("../scatterpolar/format_labels");N.exports=function(q,m,l){var a=q.i;"r"in q||(q.r=m._r[a]);"theta"in q||(q.theta=m._theta[a]);return r(q,m,l)}},{"../scatterpolar/format_labels":1264}],1272:[function(b,N,I){var r=b("../scattergl/hover"),q=b("../scatterpolar/hover").makeHoverPointText;N.exports={hoverPoints:function(m,l,a,h){var g=
m.cd[0].t,n=g.r;g=g.theta;if((l=r.hoverPoints(m,l,a,h))&&!1!==l[0].index){a=l[0];if(void 0===a.index)return l;m=m.subplot;h=a.cd[a.index];var p=a.trace;h.r=n[a.index];h.theta=g[a.index];if(m.isPtInside(h))return a.xLabelVal=void 0,a.yLabelVal=void 0,q(h,p,m,a),l}}}},{"../scattergl/hover":1247,"../scatterpolar/hover":1265}],1273:[function(b,N,I){N.exports={moduleType:"trace",name:"scatterpolargl",basePlotModule:b("../../plots/polar"),categories:"gl regl polar symbols showLegend scatter-like".split(" "),
attributes:b("./attributes"),supplyDefaults:b("./defaults"),colorbar:b("../scatter/marker_colorbar"),formatLabels:b("./format_labels"),calc:b("./calc"),plot:b("./plot"),hoverPoints:b("./hover").hoverPoints,selectPoints:b("../scattergl/select"),meta:{}}},{"../../plots/polar":894,"../scatter/marker_colorbar":1205,"../scattergl/select":1251,"./attributes":1268,"./calc":1269,"./defaults":1270,"./format_labels":1271,"./hover":1272,"./plot":1274}],1274:[function(b,N,I){var r=b("@plotly/point-cluster"),
q=b("fast-isnumeric"),m=b("../scattergl/plot"),l=b("../scattergl/scene_update"),a=b("../scattergl/convert"),h=b("../../lib"),g=b("../scattergl/constants").TOO_MANY_POINTS;N.exports=function(n,p,d){if(d.length){var e=p.radialAxis,f=p.angularAxis,k=l(n,p);d.forEach(function(t){if(t&&t[0]&&t[0].trace){var v=t[0];t=v.trace;v=v.t;var w=t._length,y=v.r,B=v.theta,A=v.opts,z,E=y.slice(),C=B.slice();for(z=0;z<y.length;z++)p.isPtInside({r:y[z],theta:B[z]})||(E[z]=NaN,C[z]=NaN);var u=Array(2*w),D=Array(w),G=
Array(w);for(z=0;z<w;z++){var J=E[z];if(q(J)){var L=e.c2g(J);var K=f.c2g(C[z],t.thetaunit);J=L*Math.cos(K);L*=Math.sin(K)}else J=L=NaN;D[z]=u[2*z]=J;G[z]=u[2*z+1]=L}v.tree=r(u);A.marker&&w>=g&&(A.marker.cluster=v.tree);A.marker&&(A.markerSel.positions=A.markerUnsel.positions=A.marker.positions=u);A.line&&1<u.length&&h.extendFlat(A.line,a.linePositions(n,t,u));A.text&&(h.extendFlat(A.text,{positions:u},a.textPosition(n,t,A.text,A.marker)),h.extendFlat(A.textSel,{positions:u},a.textPosition(n,t,A.text,
A.markerSel)),h.extendFlat(A.textUnsel,{positions:u},a.textPosition(n,t,A.text,A.markerUnsel)));A.fill&&!k.fill2d&&(k.fill2d=!0);A.marker&&!k.scatter2d&&(k.scatter2d=!0);A.line&&!k.line2d&&(k.line2d=!0);A.text&&!k.glText&&(k.glText=!0);k.lineOptions.push(A.line);k.fillOptions.push(A.fill);k.markerOptions.push(A.marker);k.markerSelectedOptions.push(A.markerSel);k.markerUnselectedOptions.push(A.markerUnsel);k.textOptions.push(A.text);k.textSelectedOptions.push(A.textSel);k.textUnselectedOptions.push(A.textUnsel);
k.selectBatch.push([]);k.unselectBatch.push([]);v.x=D;v.y=G;v.rawx=D;v.rawy=G;v.r=y;v.theta=B;v.positions=u;v._scene=k;v.index=k.count;k.count++}});return m(n,p,d)}}},{"../../lib":778,"../scattergl/constants":1241,"../scattergl/convert":1242,"../scattergl/plot":1249,"../scattergl/scene_update":1250,"@plotly/point-cluster":57,"fast-isnumeric":241}],1275:[function(b,N,I){I=b("../../plots/template_attributes").hovertemplateAttrs;var r=b("../../plots/template_attributes").texttemplateAttrs,q=b("../scatter/attributes"),
m=b("../../plots/attributes"),l=b("../../components/colorscale/attributes"),a=b("../../components/drawing/attributes").dash;b=b("../../lib/extend").extendFlat;var h=q.marker,g=q.line,n=h.line;N.exports={a:{valType:"data_array",editType:"calc"},b:{valType:"data_array",editType:"calc"},c:{valType:"data_array",editType:"calc"},sum:{valType:"number",dflt:0,min:0,editType:"calc"},mode:b({},q.mode,{dflt:"markers"}),text:b({},q.text,{}),texttemplate:r({editType:"plot"},{keys:["a","b","c","text"]}),hovertext:b({},
q.hovertext,{}),line:{color:g.color,width:g.width,dash:a,shape:b({},g.shape,{values:["linear","spline"]}),smoothing:g.smoothing,editType:"calc"},connectgaps:q.connectgaps,cliponaxis:q.cliponaxis,fill:b({},q.fill,{values:["none","toself","tonext"],dflt:"none"}),fillcolor:q.fillcolor,marker:b({symbol:h.symbol,opacity:h.opacity,maxdisplayed:h.maxdisplayed,size:h.size,sizeref:h.sizeref,sizemin:h.sizemin,sizemode:h.sizemode,line:b({width:n.width,editType:"calc"},l("marker.line")),gradient:h.gradient,editType:"calc"},
l("marker")),textfont:q.textfont,textposition:q.textposition,selected:q.selected,unselected:q.unselected,hoverinfo:b({},m.hoverinfo,{flags:["a","b","c","text","name"]}),hoveron:q.hoveron,hovertemplate:I()}},{"../../components/colorscale/attributes":650,"../../components/drawing/attributes":664,"../../lib/extend":768,"../../plots/attributes":824,"../../plots/template_attributes":906,"../scatter/attributes":1187}],1276:[function(b,N,I){var r=b("fast-isnumeric"),q=b("../scatter/colorscale_calc"),m=b("../scatter/arrays_to_calcdata"),
l=b("../scatter/calc_selection"),a=b("../scatter/calc").calcMarkerSize,h=["a","b","c"],g={a:["b","c"],b:["a","c"],c:["a","b"]};N.exports=function(n,p){var d=n._fullLayout[p.subplot].sum,e=p.sum||d,f={a:p.a,b:p.b,c:p.c},k,t;for(k=0;k<h.length;k++){var v=h[k];if(!f[v]){var w=f[g[v][0]];var y=f[g[v][1]];var B=Array(w.length);for(t=0;t<w.length;t++)B[t]=e-w[t]-y[t];f[v]=B}}e=p._length;t=Array(e);for(k=0;k<e;k++)if(v=f.a[k],B=f.b[k],w=f.c[k],r(v)&&r(B)&&r(w)){v=+v;B=+B;w=+w;y=d/(v+B+w);1!==y&&(v*=y,B*=
y,w*=y);var A=v;y=w-B;t[k]={x:y,y:A,a:v,b:B,c:w}}else t[k]={x:!1,y:!1};a(p,e);q(n,p);m(t,p);l(t,p);return t}},{"../scatter/arrays_to_calcdata":1186,"../scatter/calc":1188,"../scatter/calc_selection":1189,"../scatter/colorscale_calc":1190,"fast-isnumeric":241}],1277:[function(b,N,I){var r=b("../../lib"),q=b("../scatter/constants"),m=b("../scatter/subtypes"),l=b("../scatter/marker_defaults"),a=b("../scatter/line_defaults"),h=b("../scatter/line_shape_defaults"),g=b("../scatter/text_defaults"),n=b("../scatter/fillcolor_defaults"),
p=b("./attributes");N.exports=function(d,e,f,k){function t(A,z){return r.coerce(d,e,p,A,z)}var v=t("a"),w=t("b"),y=t("c");if(v){var B=v.length;w?(B=Math.min(B,w.length),y&&(B=Math.min(B,y.length))):B=y?Math.min(B,y.length):0}else w&&y&&(B=Math.min(w.length,y.length));if(B){e._length=B;t("sum");t("text");t("hovertext");"fills"!==e.hoveron&&t("hovertemplate");t("mode",B<q.PTS_LINESONLY?"lines+markers":"lines");m.hasLines(e)&&(a(d,e,f,k,t),h(d,e,t),t("connectgaps"));m.hasMarkers(e)&&l(d,e,f,k,t,{gradient:!0});
m.hasText(e)&&(t("texttemplate"),g(d,e,k,t));k=[];if(m.hasMarkers(e)||m.hasText(e))t("cliponaxis"),t("marker.maxdisplayed"),k.push("points");t("fill");"none"!==e.fill&&(n(d,e,f,t),m.hasLines(e)||h(d,e,t));"tonext"!==e.fill&&"toself"!==e.fill||k.push("fills");t("hoveron",k.join("+")||"points");r.coerceSelectionMarkerOpacity(e,t)}else e.visible=!1}},{"../../lib":778,"../scatter/constants":1191,"../scatter/fillcolor_defaults":1195,"../scatter/line_defaults":1200,"../scatter/line_shape_defaults":1202,
"../scatter/marker_defaults":1206,"../scatter/subtypes":1212,"../scatter/text_defaults":1213,"./attributes":1275}],1278:[function(b,N,I){N.exports=function(r,q,m,l,a){q.xa&&(r.xaxis=q.xa);q.ya&&(r.yaxis=q.ya);l[a]?(q=l[a],r.a=q.a,r.b=q.b,r.c=q.c):(r.a=q.a,r.b=q.b,r.c=q.c);return r}},{}],1279:[function(b,N,I){var r=b("../../plots/cartesian/axes");N.exports=function(q,m,l){var a={};m=l[m.subplot]._subplot;a.aLabel=r.tickText(m.aaxis,q.a,!0).text;a.bLabel=r.tickText(m.baxis,q.b,!0).text;a.cLabel=r.tickText(m.caxis,
q.c,!0).text;return a}},{"../../plots/cartesian/axes":828}],1280:[function(b,N,I){var r=b("../scatter/hover");N.exports=function(q,m,l,a){if((m=r(q,m,l,a))&&!1!==m[0].index){l=m[0];if(void 0===l.index)return a=q.xa._length,q=a*(1-l.y0/q.ya._length)/2,a-=q,l.x0=Math.max(Math.min(l.x0,a),q),l.x1=Math.max(Math.min(l.x1,a),q),m;var h=l.cd[l.index];q=l.trace;a=l.subplot;l.a=h.a;l.b=h.b;l.c=h.c;l.xLabelVal=void 0;l.yLabelVal=void 0;var g={};g[q.subplot]={_subplot:a};g=q._module.formatLabels(h,q,g);l.aLabel=
g.aLabel;l.bLabel=g.bLabel;l.cLabel=g.cLabel;g=h.hi||q.hoverinfo;h=[];q.hovertemplate||(g=g.split("+"),-1!==g.indexOf("all")&&(g=["a","b","c"]),-1!==g.indexOf("a")&&h.push(a.aaxis._hovertitle+": "+l.aLabel),-1!==g.indexOf("b")&&h.push(a.baxis._hovertitle+": "+l.bLabel),-1!==g.indexOf("c")&&h.push(a.caxis._hovertitle+": "+l.cLabel));l.extraText=h.join("\x3cbr\x3e");l.hovertemplate=q.hovertemplate;return m}}},{"../scatter/hover":1198}],1281:[function(b,N,I){N.exports={attributes:b("./attributes"),supplyDefaults:b("./defaults"),
colorbar:b("../scatter/marker_colorbar"),formatLabels:b("./format_labels"),calc:b("./calc"),plot:b("./plot"),style:b("../scatter/style").style,styleOnSelect:b("../scatter/style").styleOnSelect,hoverPoints:b("./hover"),selectPoints:b("../scatter/select"),eventData:b("./event_data"),moduleType:"trace",name:"scatterternary",basePlotModule:b("../../plots/ternary"),categories:["ternary","symbols","showLegend","scatter-like"],meta:{}}},{"../../plots/ternary":907,"../scatter/marker_colorbar":1205,"../scatter/select":1209,
"../scatter/style":1211,"./attributes":1275,"./calc":1276,"./defaults":1277,"./event_data":1278,"./format_labels":1279,"./hover":1280,"./plot":1282}],1282:[function(b,N,I){var r=b("../scatter/plot");N.exports=function(q,m,l){var a=m.plotContainer;a.select(".scatterlayer").selectAll("*").remove();a={xaxis:m.xaxis,yaxis:m.yaxis,plot:a,layerClipId:m._hasClipOnAxisFalse?m.clipIdRelative:null};m=m.layers.frontplot.select("g.scatterlayer");r(q,a,l,m)}},{"../scatter/plot":1208}],1283:[function(b,N,I){function r(n){return{valType:"info_array",
freeLength:!0,editType:"calc",items:{valType:"subplotid",regex:a[n],editType:"plot"}}}var q=b("../scatter/attributes"),m=b("../../components/colorscale/attributes");I=b("../../plots/template_attributes").hovertemplateAttrs;var l=b("../scattergl/attributes"),a=b("../../plots/cartesian/constants").idRegex,h=b("../../plot_api/plot_template").templatedArray;b=b("../../lib/extend").extendFlat;q=q.marker;var g=q.line;g=b(m("marker.line",{editTypeOverride:"calc"}),{width:b({},g.width,{editType:"calc"}),
editType:"calc"});m=b(m("marker"),{symbol:q.symbol,size:b({},q.size,{editType:"markerSize"}),sizeref:q.sizeref,sizemin:q.sizemin,sizemode:q.sizemode,opacity:q.opacity,colorbar:q.colorbar,line:g,editType:"calc"});m.color.editType=m.cmin.editType=m.cmax.editType="style";N.exports={dimensions:h("dimension",{visible:{valType:"boolean",dflt:!0,editType:"calc"},label:{valType:"string",editType:"calc"},values:{valType:"data_array",editType:"calc+clearAxisTypes"},axis:{type:{valType:"enumerated",values:["linear",
"log","date","category"],editType:"calc+clearAxisTypes"},matches:{valType:"boolean",dflt:!1,editType:"calc"},editType:"calc+clearAxisTypes"},editType:"calc+clearAxisTypes"}),text:b({},l.text,{}),hovertext:b({},l.hovertext,{}),hovertemplate:I(),marker:m,xaxes:r("x"),yaxes:r("y"),diagonal:{visible:{valType:"boolean",dflt:!0,editType:"calc"},editType:"calc"},showupperhalf:{valType:"boolean",dflt:!0,editType:"calc"},showlowerhalf:{valType:"boolean",dflt:!0,editType:"calc"},selected:{marker:l.selected.marker,
editType:"calc"},unselected:{marker:l.unselected.marker,editType:"calc"},opacity:l.opacity}},{"../../components/colorscale/attributes":650,"../../lib/extend":768,"../../plot_api/plot_template":817,"../../plots/cartesian/constants":834,"../../plots/template_attributes":906,"../scatter/attributes":1187,"../scattergl/attributes":1239}],1284:[function(b,N,I){function r(d){var e=d._fullLayout,f=e._glcanvas.data()[0].regl,k=e._splomGrid;k||(k=e._splomGrid=m(f));k.update(q(d))}function q(d){function e(G,
J,L,K,H,Q){var M=J[G+"color"];G=J[G+"width"];J=String(M+G);J in v?v[J].data.push(NaN,NaN,L,K,H,Q):v[J]={data:[L,K,H,Q],join:"rect",thickness:G,color:M,viewport:t,range:t,overlay:!1}}var f=d._fullLayout,k=f._size,t=[0,0,f.width,f.height],v={},w;for(w in f._splomSubplots){var y=f._plots[w],B=y.xaxis;y=y.yaxis;var A=B._gridVals,z=y._gridVals,E=k.b+y.domain[0]*k.h,C=-y._m,u=-C*y.r2l(y.range[0],y.calendar);if(B.showgrid)for(w=0;w<A.length;w++){var D=B._offset+B.l2p(A[w].x);e("grid",B,D,E,D,E+y._length)}if(y.showgrid)for(w=
0;w<z.length;w++)A=E+u+C*z[w].x,e("grid",y,B._offset,A,B._offset+B._length,A);p(d,B,y)&&(D=B._offset+B.l2p(0),e("zeroline",B,D,E,D,E+y._length));p(d,y,B)&&(A=E+u+0,e("zeroline",y,B._offset,A,B._offset+B._length,A))}d=[];for(w in v)d.push(v[w]);return d}var m=b("regl-line2d"),l=b("../../registry"),a=b("../../lib/prepare_regl"),h=b("../../plots/get_data").getModuleCalcData,g=b("../../plots/cartesian"),n=b("../../plots/cartesian/axis_ids").getFromId,p=b("../../plots/cartesian/axes").shouldShowZeroLine;
N.exports={name:"splom",attr:g.attr,attrRegex:g.attrRegex,layoutAttributes:g.layoutAttributes,supplyLayoutDefaults:g.supplyLayoutDefaults,drawFramework:g.drawFramework,plot:function(d){var e=d._fullLayout,f=l.getModule("splom"),k=h(d.calcdata,f)[0];a(d,["ANGLE_instanced_arrays","OES_element_index_uint"])&&(e._hasOnlyLargeSploms&&r(d),f.plot(d,{},k))},drag:function(d){var e=d.calcdata,f=d._fullLayout;f._hasOnlyLargeSploms&&r(d);for(var k=0;k<e.length;k++){var t=e[k][0].trace,v=f._splomScenes[t.uid];
if("splom"===t.type&&v&&v.matrix){for(var w=d,y=t._visibleDims,B=v.viewOpts.ranges=Array(v.matrixOptions.data.length),A=0;A<y.length;A++){var z=y[A],E=B[A]=Array(4),C=n(w,t._diag[z][0]);C&&(E[0]=C.r2l(C.range[0]),E[2]=C.r2l(C.range[1]));if(z=n(w,t._diag[z][1]))E[1]=z.r2l(z.range[0]),E[3]=z.r2l(z.range[1])}v.selectBatch.length||v.unselectBatch.length?v.matrix.update({ranges:B},{ranges:B}):v.matrix.update({ranges:B})}}},updateGrid:r,clean:function(d,e,f,k){var t={},v;if(k._splomScenes){for(v=0;v<d.length;v++){var w=
d[v];"splom"===w.type&&(t[w.uid]=1)}for(v=0;v<f.length;v++)if(w=f[v],!t[w.uid]){var y=k._splomScenes[w.uid];y&&y.destroy&&y.destroy();k._splomScenes[w.uid]=null;delete k._splomScenes[w.uid]}}0===Object.keys(k._splomScenes||{}).length&&delete k._splomScenes;k._splomGrid&&!e._hasOnlyLargeSploms&&k._hasOnlyLargeSploms&&(k._splomGrid.destroy(),k._splomGrid=null,delete k._splomGrid);g.clean(d,e,f,k)},updateFx:g.updateFx,toSVG:g.toSVG}},{"../../lib/prepare_regl":791,"../../plots/cartesian":841,"../../plots/cartesian/axes":828,
"../../plots/cartesian/axis_ids":831,"../../plots/get_data":865,"../../registry":911,"regl-line2d":535}],1285:[function(b,N,I){var r=b("../../lib"),q=b("../../plots/cartesian/axis_ids"),m=b("../scatter/calc").calcMarkerSize,l=b("../scatter/calc").calcAxisExpansion,a=b("../scatter/colorscale_calc"),h=b("../scattergl/convert").markerSelection,g=b("../scattergl/convert").markerStyle,n=b("./scene_update"),p=b("../../constants/numerical").BADNUM,d=b("../scattergl/constants").TOO_MANY_POINTS;N.exports=
function(e,f){function k(G,J){J=G.makeCalcdata({v:J.values,vcalendar:f.calendar},"v");for(var L=0;L<J.length;L++)J[L]=J[L]===p?NaN:J[L];y.push(J);B.push("log"===G.type?r.simpleMap(J,G.c2l):J)}var t=f.dimensions,v=f._length,w={},y=w.cdata=[],B=w.data=[],A=f._visibleDims=[],z;for(z=0;z<t.length;z++){var E=t[z];if(E.visible){var C=q.getFromId(e,f._diag[z][0]);var u=q.getFromId(e,f._diag[z][1]);C&&u&&C.type!==u.type?r.log("Skipping splom dimension "+z+" with conflicting axis types"):(C?(k(C,E),u&&"category"===
u.type&&(u._categories=C._categories.slice())):k(u,E),A.push(z))}}a(e,f);r.extendFlat(w,g(f));var D=y.length*v>d?2*(w.sizeAvg||Math.max(w.size,3)):m(f,v);for(v=0;v<A.length;v++)z=A[v],E=t[z],C=q.getFromId(e,f._diag[z][0])||{},u=q.getFromId(e,f._diag[z][1])||{},l(e,f,C,u,y[v],y[v],D);e=n(e,f);e.matrix||(e.matrix=!0);e.matrixOptions=w;e.selectedOptions=h(f,f.selected);e.unselectedOptions=h(f,f.unselected);return[{x:!1,y:!1,t:{},trace:f}]}},{"../../constants/numerical":753,"../../lib":778,"../../plots/cartesian/axis_ids":831,
"../scatter/calc":1188,"../scatter/colorscale_calc":1190,"../scattergl/constants":1241,"../scattergl/convert":1242,"./scene_update":1292}],1286:[function(b,N,I){function r(d,e){function f(t,v){return m.coerce(d,e,a.dimensions,t,v)}f("label");var k=f("values");k&&k.length?f("visible"):e.visible=!1;f("axis.type");f("axis.matches")}function q(d,e,f,k){function t(Q,M,P,T){if(Q){var O=Q.charAt(0),U=f._splomAxes[O];e["_"+O+"axes"][Q]=1;T.push(Q);Q in U||(Q=U[Q]={},P&&(Q.label=P.label||"",P.visible&&P.axis&&
(P.axis.type&&(Q.type=P.axis.type),P.axis.matches&&(Q.matches=M))))}}var v=e.dimensions,w=v.length;d=e.showupperhalf;var y=e.showlowerhalf,B=e.diagonal.visible,A,z=Array(w),E=Array(w);for(A=0;A<w;A++){var C=A?A+1:"";z[A]="x"+C;E[A]="y"+C}z=k("xaxes",z);C=k("yaxes",E);var u=e._diag=Array(w);e._xaxes={};e._yaxes={};k=[];E=[];var D=!B&&!y,G=!B&&!d;e._axesDim={};for(A=0;A<w;A++){var J=v[A],L=0===A,K=A===w-1,H=L&&D||K&&G?void 0:z[A];L=L&&G||K&&D?void 0:C[A];t(H,L,J,k);t(L,H,J,E);u[A]=[H,L];e._axesDim[H]=
A;e._axesDim[L]=A}for(A=0;A<k.length;A++)for(v=0;v<E.length;v++)w=k[A]+E[v],A>v&&d?f._splomSubplots[w]=1:A<v&&y?f._splomSubplots[w]=1:A!==v||!B&&y&&d||(f._splomSubplots[w]=1);if(!y||!B&&d&&y)f._splomGridDflt.xside="bottom",f._splomGridDflt.yside="left"}var m=b("../../lib"),l=b("../../plots/array_container_defaults"),a=b("./attributes"),h=b("../scatter/subtypes"),g=b("../scatter/marker_defaults"),n=b("../parcoords/merge_length"),p=b("../scattergl/helpers").isOpenSymbol;N.exports=function(d,e,f,k){function t(A,
z){return m.coerce(d,e,a,A,z)}var v=l(d,e,{name:"dimensions",handleItemDefaults:r}),w=t("diagonal.visible"),y=t("showupperhalf"),B=t("showlowerhalf");n(e,v,"values")&&(w||y||B)?(t("text"),t("hovertext"),t("hovertemplate"),g(d,e,f,k,t),f=p(e.marker.symbol),v=h.isBubble(e),t("marker.line.width",f||v?1:0),q(d,e,k,t),m.coerceSelectionMarkerOpacity(e,t)):e.visible=!1}},{"../../lib":778,"../../plots/array_container_defaults":823,"../parcoords/merge_length":1158,"../scatter/marker_defaults":1206,"../scatter/subtypes":1212,
"../scattergl/helpers":1246,"./attributes":1283}],1287:[function(b,N,I){var r=b("../../lib"),q=b("../scatter/colorscale_calc"),m=b("../scattergl/convert").markerStyle;N.exports=function(l,a){var h=a.trace;if(a=l._fullLayout._splomScenes[h.uid])q(l,h),r.extendFlat(a.matrixOptions,m(h)),l=r.extendFlat({},a.matrixOptions,a.viewOpts),a.matrix.update(l,null)}},{"../../lib":778,"../scatter/colorscale_calc":1190,"../scattergl/convert":1242}],1288:[function(b,N,I){I.getDimIndex=function(r,q){q=q._id;for(var m=
{x:0,y:1}[q.charAt(0)],l=r._visibleDims,a=0;a<l.length;a++)if(r._diag[l[a]][m]===q)return a;return!1}},{}],1289:[function(b,N,I){var r=b("./helpers"),q=b("../scattergl/hover").calcHover;N.exports={hoverPoints:function(m,l,a){var h=m.cd[0].trace,g=m.scene.matrixOptions.cdata,n=m.xa,p=m.ya;l=n.c2p(l);a=p.c2p(a);var d=m.distance,e=r.getDimIndex(h,n),f=r.getDimIndex(h,p);if(!1===e||!1===f)return[m];e=g[e];g=g[f];var k;for(f=0;f<e.length;f++){var t=g[f],v=n.c2p(e[f])-l;t=p.c2p(t)-a;v=Math.sqrt(v*v+t*t);
if(v<d){d=k=v;var w=f}}m.index=w;m.distance=d;m.dxy=k;return void 0===w?[m]:[q(m,e,g,h)]}}},{"../scattergl/hover":1247,"./helpers":1288}],1290:[function(b,N,I){I=b("../../registry");var r=b("../../components/grid");N.exports={moduleType:"trace",name:"splom",basePlotModule:b("./base_plot"),categories:"gl regl cartesian symbols showLegend scatter-like".split(" "),attributes:b("./attributes"),supplyDefaults:b("./defaults"),colorbar:b("../scatter/marker_colorbar"),calc:b("./calc"),plot:b("./plot"),hoverPoints:b("./hover").hoverPoints,
selectPoints:b("./select"),editStyle:b("./edit_style"),meta:{}};I.register(r)},{"../../components/grid":687,"../../registry":911,"../scatter/marker_colorbar":1205,"./attributes":1283,"./base_plot":1284,"./calc":1285,"./defaults":1286,"./edit_style":1287,"./hover":1289,"./plot":1291,"./select":1293}],1291:[function(b,N,I){var r=b("regl-splom"),q=b("../../lib"),m=b("../../plots/cartesian/axis_ids"),l=b("../../components/dragelement/helpers").selectMode;N.exports=function(a,h,g){if(g.length)for(h=0;h<
g.length;h++){var n,p,d=a,e=g[h][0],f=d._fullLayout,k=f._size,t=e.trace;var v=e.t;e=f._splomScenes[t.uid];var w=e.matrixOptions,y=w.cdata,B=f._glcanvas.data()[0].regl,A=f.dragmode;if(0!==y.length){w.lower=t.showupperhalf;w.upper=t.showlowerhalf;w.diagonal=t.diagonal.visible;var z=t._visibleDims,E=y.length,C=e.viewOpts={};C.ranges=Array(E);C.domains=Array(E);for(n=0;n<z.length;n++){var u=z[n];var D=C.ranges[n]=Array(4),G=C.domains[n]=Array(4);if(p=m.getFromId(d,t._diag[u][0]))D[0]=p._rl[0],D[2]=p._rl[1],
G[0]=p.domain[0],G[2]=p.domain[1];if(u=m.getFromId(d,t._diag[u][1]))D[1]=u._rl[0],D[3]=u._rl[1],G[1]=u.domain[0],G[3]=u.domain[1]}C.viewport=[k.l,k.b,k.w+k.l,k.h+k.b];!0===e.matrix&&(e.matrix=r(B));u=-1<f.clickmode.indexOf("select");f=!0;if(l(A)||t.selectedpoints||u){A=t._length;if(t.selectedpoints){p=e.selectBatch=t.selectedpoints;n={};for(u=0;u<p.length;u++)n[p[u]]=!0;p=[];for(u=0;u<A;u++)n[u]||p.push(u);e.unselectBatch=p}k=v.xpx=Array(E);E=v.ypx=Array(E);for(n=0;n<z.length;n++){u=z[n];if(p=m.getFromId(d,
t._diag[u][0]))for(k[n]=Array(A),v=0;v<A;v++)k[n][v]=p.c2p(y[n][v]);if(u=m.getFromId(d,t._diag[u][1]))for(E[n]=Array(A),v=0;v<A;v++)E[n][v]=u.c2p(y[n][v])}if(e.selectBatch.length||e.unselectBatch.length)d=q.extendFlat({},w,e.unselectedOptions,C),t=q.extendFlat({},w,e.selectedOptions,C),e.matrix.update(d,t),f=!1}else v.xpx=v.ypx=null;f&&(w=q.extendFlat({},w,C),e.matrix.update(w,null))}}}},{"../../components/dragelement/helpers":661,"../../lib":778,"../../plots/cartesian/axis_ids":831,"regl-splom":539}],
1292:[function(b,N,I){var r=b("../../lib");N.exports=function(q,m){var l=q._fullLayout;q=m.uid;var a=l._splomScenes;a||(a=l._splomScenes={});l={dirty:!0,selectBatch:[],unselectBatch:[]};var h={matrix:!1,selectBatch:[],unselectBatch:[]},g=a[m.uid];g||(g=a[q]=r.extendFlat({},l,h),g.draw=function(){g.matrix&&g.matrix.draw&&(g.selectBatch.length||g.unselectBatch.length?g.matrix.draw(g.unselectBatch,g.selectBatch):g.matrix.draw());g.dirty=!1},g.destroy=function(){g.matrix&&g.matrix.destroy&&g.matrix.destroy();
g.matrixOptions=null;g.selectBatch=null;g=g.unselectBatch=null});g.dirty||r.extendFlat(g,l);return g}},{"../../lib":778}],1293:[function(b,N,I){var r=b("../../lib"),q=b("../scatter/subtypes"),m=b("./helpers");N.exports=function(l,a){var h=l.cd,g=h[0].trace,n=h[0].t;h=l.scene;var p=h.matrixOptions.cdata,d=l.xaxis,e=l.yaxis,f=[];if(!h)return f;var k=!q.hasMarkers(g)&&!q.hasText(g);if(!0!==g.visible||k)return f;d=m.getDimIndex(g,d);e=m.getDimIndex(g,e);if(!1===d||!1===e)return f;g=n.xpx[d];n=n.ypx[e];
d=p[d];k=p[e];p=[];e=[];if(!1!==a&&!a.degenerate)for(var t=0;t<d.length;t++)a.contains([g[t],n[t]],null,t,l)?(p.push(t),f.push({pointNumber:t,x:d[t],y:k[t]})):e.push(t);l=h.matrixOptions;p.length||e.length?h.selectBatch.length||h.unselectBatch.length||h.matrix.update(h.unselectedOptions,r.extendFlat({},l,h.selectedOptions,h.viewOpts)):h.matrix.update(l,null);h.selectBatch=p;h.unselectBatch=e;return f}},{"../../lib":778,"../scatter/subtypes":1212,"./helpers":1288}],1294:[function(b,N,I){I=b("../../components/colorscale/attributes");
var r=b("../../plots/template_attributes").hovertemplateAttrs,q=b("../mesh3d/attributes"),m=b("../../plots/attributes");b=b("../../lib/extend").extendFlat;var l={x:{valType:"data_array",editType:"calc+clearAxisTypes"},y:{valType:"data_array",editType:"calc+clearAxisTypes"},z:{valType:"data_array",editType:"calc+clearAxisTypes"},u:{valType:"data_array",editType:"calc"},v:{valType:"data_array",editType:"calc"},w:{valType:"data_array",editType:"calc"},starts:{x:{valType:"data_array",editType:"calc"},
y:{valType:"data_array",editType:"calc"},z:{valType:"data_array",editType:"calc"},editType:"calc"},maxdisplayed:{valType:"integer",min:0,dflt:1E3,editType:"calc"},sizeref:{valType:"number",editType:"calc",min:0,dflt:1},text:{valType:"string",dflt:"",editType:"calc"},hovertext:{valType:"string",dflt:"",editType:"calc"},hovertemplate:r({editType:"calc"},{keys:"tubex tubey tubez tubeu tubev tubew norm divergence".split(" ")}),showlegend:b({},m.showlegend,{dflt:!1})};b(l,I("",{colorAttr:"u/v/w norm",
showScaleDflt:!0,editTypeOverride:"calc"}));["opacity","lightposition","lighting"].forEach(function(a){l[a]=q[a]});l.hoverinfo=b({},m.hoverinfo,{editType:"calc",flags:"x y z u v w norm divergence text name".split(" "),dflt:"x+y+z+norm+text+name"});l.transforms=void 0;N.exports=l},{"../../components/colorscale/attributes":650,"../../lib/extend":768,"../../plots/attributes":824,"../../plots/template_attributes":906,"../mesh3d/attributes":1128}],1295:[function(b,N,I){function r(a){var h=a._x,g=a._y,
n=a._z,p=a._len,d,e,f=-Infinity,k=Infinity,t=-Infinity,v=Infinity,w=-Infinity,y=Infinity,B="";if(p){var A=h[0];var z=g[0];var E=n[0]}if(1<p){var C=h[p-1];var u=g[p-1];var D=n[p-1]}for(d=0;d<p;d++){f=Math.max(f,h[d]);k=Math.min(k,h[d]);t=Math.max(t,g[d]);v=Math.min(v,g[d]);w=Math.max(w,n[d]);y=Math.min(y,n[d]);if(!G&&h[d]!==A){var G=!0;B+="x"}if(!J&&g[d]!==z){var J=!0;B+="y"}if(!L&&n[d]!==E){var L=!0;B+="z"}}G||(B+="x");J||(B+="y");L||(B+="z");var K=m.distinctVals(a._x).vals,H=m.distinctVals(a._y).vals,
Q=m.distinctVals(a._z).vals;B=B.replace("x",(A>C?"-":"+")+"x");B=B.replace("y",(z>u?"-":"+")+"y");B=B.replace("z",(E>D?"-":"+")+"z");if(!p||p<K.length*H.length*Q.length)p=0,K=[],H=[],Q=[];d=function(U){return"x"===U?h:"y"===U?g:n};C=function(U){return"x"===U?K:"y"===U?H:Q};D=function(U){return U[p-1]<U[0]?-1:1};a=d(B[1]);G=d(B[3]);J=d(B[5]);L=C(B[1]).length;A=C(B[3]).length;C=C(B[5]).length;z=!1;u=D(d(B[1]));E=D(d(B[3]));var M=D(d(B[5]));for(d=0;d<C-1;d++){for(D=0;D<A-1;D++){for(e=0;e<L-1;e++){var P=
L*(A*d+D)+e,T=L*(A*d+(D+1))+e,O=L*(A*(d+1)+D)+e;a[P]*u<a[L*(A*d+D)+(e+1)]*u&&G[P]*E<G[T]*E&&J[P]*M<J[O]*M||(z=!0);if(z)break}if(z)break}if(z)break}z&&(m.warn("Encountered arbitrary coordinates! Unable to input data grid."),p=0,K=[],H=[],Q=[]);return{xMin:k,yMin:v,zMin:y,xMax:f,yMax:t,zMax:w,Xs:K,Ys:H,Zs:Q,len:p,fill:B}}function q(a,h){void 0===h&&(h=a.length);if(m.isTypedArray(a))return a.subarray(0,h);for(var g=[],n=0;n<h;n++)g[n]=+a[n];return g}var m=b("../../lib"),l=b("../../components/colorscale/calc");
N.exports={calc:function(a,h){h._len=Math.min(h.u.length,h.v.length,h.w.length,h.x.length,h.y.length,h.z.length);h._u=q(h.u,h._len);h._v=q(h.v,h._len);h._w=q(h.w,h._len);h._x=q(h.x,h._len);h._y=q(h.y,h._len);h._z=q(h.z,h._len);var g=r(h);h._gridFill=g.fill;h._Xs=g.Xs;h._Ys=g.Ys;h._Zs=g.Zs;h._len=g.len;var n=0;if(h.starts){var p=q(h.starts.x||[]);var d=q(h.starts.y||[]);var e=q(h.starts.z||[]);n=Math.min(p.length,d.length,e.length)}h._startsX=p||[];h._startsY=d||[];h._startsZ=e||[];var f=0,k=Infinity,
t;for(t=0;t<h._len;t++){var v=h._u[t],w=h._v[t],y=h._w[t];v=Math.sqrt(v*v+w*w+y*y);f=Math.max(f,v);k=Math.min(k,v)}l(a,h,{vals:[k,f],containerStr:"",cLetter:"c"});for(t=0;t<n;t++)a=p[t],g.xMax=Math.max(g.xMax,a),g.xMin=Math.min(g.xMin,a),a=d[t],g.yMax=Math.max(g.yMax,a),g.yMin=Math.min(g.yMin,a),a=e[t],g.zMax=Math.max(g.zMax,a),g.zMin=Math.min(g.zMin,a);h._slen=n;h._normMax=f;h._xbnds=[g.xMin,g.xMax];h._ybnds=[g.yMin,g.yMax];h._zbnds=[g.zMin,g.zMax]},filter:q,processGrid:r}},{"../../components/colorscale/calc":651,
"../../lib":778}],1296:[function(b,N,I){function r(f,k){this.scene=f;this.uid=k;this.data=this.mesh=null}function q(f){var k=f.length;return 2<k?f.slice(1,k-1):2===k?[(f[0]+f[1])/2]:f}function m(f){var k=f.length;return 1===k?[.5,.5]:[f[1]-f[0],f[k-1]-f[k-2]]}function l(f,k){function t(L,K){var H=v[K],Q=w[e[K]];return g.simpleMap(L,function(M){return H.d2l(M)*Q})}var v=f.fullSceneLayout,w=f.dataScale,y=k._len;f={};f.vectors=d(t(k._u,"xaxis"),t(k._v,"yaxis"),t(k._w,"zaxis"),y);if(!y)return{positions:[],
cells:[]};var B=t(k._Xs,"xaxis"),A=t(k._Ys,"yaxis");y=t(k._Zs,"zaxis");f.meshgrid=[B,A,y];f.gridFill=k._gridFill;if(k._slen)f.startingPositions=d(t(k._startsX,"xaxis"),t(k._startsY,"yaxis"),t(k._startsZ,"zaxis"));else{for(var z=A[0],E=q(B),C=q(y),u=Array(E.length*C.length),D=0,G=0;G<E.length;G++)for(var J=0;J<C.length;J++)u[D++]=[E[G],z,C[J]];f.startingPositions=u}f.colormap=n(k);f.tubeSize=k.sizeref;f.maxLength=k.maxdisplayed;z=t(k._xbnds,"xaxis");E=t(k._ybnds,"yaxis");C=t(k._zbnds,"zaxis");B=m(B);
A=m(A);y=m(y);f=a(f,[[z[0]-B[0],E[0]-A[0],C[0]-y[0]],[z[1]+B[1],E[1]+A[1],C[1]+y[1]]]);y=p(k);f.vertexIntensityBounds=[y.min/k._normMax,y.max/k._normMax];y=k.lightposition;f.lightPosition=[y.x,y.y,y.z];f.ambient=k.lighting.ambient;f.diffuse=k.lighting.diffuse;f.specular=k.lighting.specular;f.roughness=k.lighting.roughness;f.fresnel=k.lighting.fresnel;f.opacity=k.opacity;k._pad=f.tubeScale*k.sizeref*2;return f}var a=b("gl-streamtube3d"),h=a.createTubeMesh,g=b("../../lib"),n=b("../../lib/gl_format_color").parseColorScale,
p=b("../../components/colorscale").extractOpts,d=b("../../plots/gl3d/zip3"),e={xaxis:0,yaxis:1,zaxis:2};b=r.prototype;b.handlePick=function(f){function k(B,A){var z=v[e[A]];return t[A].l2c(B)/z}var t=this.scene.fullSceneLayout,v=this.scene.dataScale;if(f.object===this.mesh){var w=f.data.position,y=f.data.velocity;f.traceCoordinate=[k(w[0],"xaxis"),k(w[1],"yaxis"),k(w[2],"zaxis"),k(y[0],"xaxis"),k(y[1],"yaxis"),k(y[2],"zaxis"),f.data.intensity*this.data._normMax,f.data.divergence];f.textLabel=this.data.hovertext||
this.data.text;return!0}};b.update=function(f){this.data=f;f=l(this.scene,f);this.mesh.update(f)};b.dispose=function(){this.scene.glplot.remove(this.mesh);this.mesh.dispose()};N.exports=function(f,k){var t=f.glplot.gl,v=l(f,k);t=h(t,v);v=new r(f,k.uid);v.mesh=t;v.data=k;t._trace=v;f.glplot.add(t);return v}},{"../../components/colorscale":655,"../../lib":778,"../../lib/gl_format_color":774,"../../plots/gl3d/zip3":881,"gl-streamtube3d":348}],1297:[function(b,N,I){var r=b("../../lib"),q=b("../../components/colorscale/defaults"),
m=b("./attributes");N.exports=function(l,a,h,g){function n(t,v){return r.coerce(l,a,m,t,v)}h=n("u");var p=n("v"),d=n("w"),e=n("x"),f=n("y"),k=n("z");h&&h.length&&p&&p.length&&d&&d.length&&e&&e.length&&f&&f.length&&k&&k.length?(n("starts.x"),n("starts.y"),n("starts.z"),n("maxdisplayed"),n("sizeref"),n("lighting.ambient"),n("lighting.diffuse"),n("lighting.specular"),n("lighting.roughness"),n("lighting.fresnel"),n("lightposition.x"),n("lightposition.y"),n("lightposition.z"),q(l,a,g,n,{prefix:"",cLetter:"c"}),
n("text"),n("hovertext"),n("hovertemplate"),a._length=null):a.visible=!1}},{"../../components/colorscale/defaults":653,"../../lib":778,"./attributes":1294}],1298:[function(b,N,I){N.exports={moduleType:"trace",name:"streamtube",basePlotModule:b("../../plots/gl3d"),categories:["gl3d","showLegend"],attributes:b("./attributes"),supplyDefaults:b("./defaults"),colorbar:{min:"cmin",max:"cmax"},calc:b("./calc").calc,plot:b("./convert"),eventData:function(r,q){r.tubex=r.x;r.tubey=r.y;r.tubez=r.z;r.tubeu=q.traceCoordinate[3];
r.tubev=q.traceCoordinate[4];r.tubew=q.traceCoordinate[5];r.norm=q.traceCoordinate[6];r.divergence=q.traceCoordinate[7];delete r.x;delete r.y;delete r.z;return r},meta:{}}},{"../../plots/gl3d":870,"./attributes":1294,"./calc":1295,"./convert":1296,"./defaults":1297}],1299:[function(b,N,I){I=b("../../plots/attributes");var r=b("../../plots/template_attributes").hovertemplateAttrs,q=b("../../plots/template_attributes").texttemplateAttrs,m=b("../../components/colorscale/attributes"),l=b("../../plots/domain").attributes,
a=b("../pie/attributes"),h=b("./constants");b=b("../../lib/extend").extendFlat;N.exports={labels:{valType:"data_array",editType:"calc"},parents:{valType:"data_array",editType:"calc"},values:{valType:"data_array",editType:"calc"},branchvalues:{valType:"enumerated",values:["remainder","total"],dflt:"remainder",editType:"calc"},count:{valType:"flaglist",flags:["branches","leaves"],dflt:"leaves",editType:"calc"},level:{valType:"any",editType:"plot",anim:!0},maxdepth:{valType:"integer",editType:"plot",
dflt:-1},marker:b({colors:{valType:"data_array",editType:"calc"},line:{color:b({},a.marker.line.color,{dflt:null}),width:b({},a.marker.line.width,{dflt:1}),editType:"calc"},editType:"calc"},m("marker",{colorAttr:"colors",anim:!1})),leaf:{opacity:{valType:"number",editType:"style",min:0,max:1},editType:"plot"},text:a.text,textinfo:{valType:"flaglist",flags:"label;text;value;current path;percent root;percent entry;percent parent".split(";"),extras:["none"],editType:"plot"},texttemplate:q({editType:"plot"},
{keys:h.eventDataKeys.concat(["label","value"])}),hovertext:a.hovertext,hoverinfo:b({},I.hoverinfo,{flags:"label;text;value;name;current path;percent root;percent entry;percent parent".split(";"),dflt:"label+text+value+name"}),hovertemplate:r({},{keys:h.eventDataKeys}),textfont:a.textfont,insidetextorientation:a.insidetextorientation,insidetextfont:a.insidetextfont,outsidetextfont:b({},a.outsidetextfont,{}),rotation:{valType:"angle",dflt:0,editType:"plot"},sort:a.sort,root:{color:{valType:"color",
editType:"calc",dflt:"rgba(0,0,0,0)"},editType:"calc"},domain:l({name:"sunburst",trace:!0,editType:"calc"})}},{"../../components/colorscale/attributes":650,"../../lib/extend":768,"../../plots/attributes":824,"../../plots/domain":855,"../../plots/template_attributes":906,"../pie/attributes":1161,"./constants":1302}],1300:[function(b,N,I){var r=b("../../plots/plots");I.name="sunburst";I.plot=function(q,m,l,a){r.plotBasePlot(I.name,q,m,l,a)};I.clean=function(q,m,l,a){r.cleanBasePlot(I.name,q,m,l,a)}},
{"../../plots/plots":891}],1301:[function(b,N,I){function r(f,k,t){var v=0,w=f.children;if(w){for(var y=w.length,B=0;B<y;B++)v+=r(w[B],k,t);t.branches&&v++}else t.leaves&&v++;f.value=f.data.data.value=v;k._values||(k._values=[]);return k._values[f.data.data.i]=v}var q=b("d3-hierarchy"),m=b("fast-isnumeric"),l=b("../../lib"),a=b("../../components/colorscale").makeColorScaleFuncFromTrace,h=b("../pie/calc").makePullColorFn,g=b("../pie/calc").generateExtendedColors,n=b("../../components/colorscale").calc,
p=b("../../constants/numerical").ALMOST_EQUAL,d={},e={};I.calc=function(f,k){var t=f._fullLayout,v=k.ids,w=l.isArrayOrTypedArray(v),y=k.labels,B=k.parents,A=k.values,z=l.isArrayOrTypedArray(A),E=[],C={},u={},D=function(ca,ia){C[ca]?C[ca].push(ia):C[ca]=[ia];u[ia]=1},G=function(ca){return ca||"number"===typeof ca},J=function(ca){return!z||m(A[ca])&&0<=A[ca]};if(w){w=Math.min(v.length,B.length);var L=function(ca){return G(v[ca])&&J(ca)};var K=function(ca){return String(v[ca])}}else w=Math.min(y.length,
B.length),L=function(ca){return G(y[ca])&&J(ca)},K=function(ca){return String(y[ca])};z&&(w=Math.min(w,A.length));for(var H=0;H<w;H++)if(L(H)){var Q=K(H),M=G(B[H])?String(B[H]):"",P={i:H,id:Q,pid:M,label:G(y[H])?String(y[H]):""};z&&(P.v=+A[H]);E.push(P);D(M,Q)}if(!C[""]){B=[];for(var T in C)u[T]||B.push(T);if(1===B.length)T=B[0],E.unshift({hasImpliedRoot:!0,id:T,pid:"",label:T});else return l.warn(["Multiple implied roots, cannot build",k.type,"hierarchy of",k.name+".","These roots include:",B.join(", ")].join(" "))}else if(1<
C[""].length){T=l.randstr();for(B=0;B<E.length;B++)""===E[B].pid&&(E[B].pid=T);E.unshift({hasMultipleRoots:!0,id:T,pid:"",label:""})}try{var O=q.stratify().id(function(ca){return ca.id}).parentId(function(ca){return ca.pid})(E)}catch(ca){return l.warn(["Failed to build",k.type,"hierarchy of",k.name+".","Error:",ca.message].join(" "))}O=q.hierarchy(O);var U=!1;if(z)switch(k.branchvalues){case "remainder":O.sum(function(ca){return ca.data.v});break;case "total":O.each(function(ca){var ia=ca.data.data,
ja=ia.v;if(ca.children){var la=ca.children.reduce(function(da,oa){return da+oa.data.data.v},0);if(ia.hasImpliedRoot||ia.hasMultipleRoots)ja=la;if(ja<la*p)return U=!0,l.warn(["Total value for node",ca.data.data.id,"of",k.name,"is smaller than the sum of its children. \nparent value \x3d",ja,"\nchildren sum \x3d",la].join(" "))}ca.value=ja})}else r(O,k,{branches:-1!==k.count.indexOf("branches"),leaves:-1!==k.count.indexOf("leaves")});if(!U){k.sort&&O.sort(function(ca,ia){return ia.value-ca.value});
var S=k.marker.colors||[];T=!!S.length;if(k._hasColorscale){T||(S=z?k.values:k._values);n(f,k,{vals:S,containerStr:"marker",cLetter:"c"});var X=a(k.marker)}else var ba=h(t["_"+k.type+"colormap"]);O.each(function(ca){ca=ca.data.data;ca.color=k._hasColorscale?X(S[ca.i]):ba(S[ca.i],ca.id)});E[0].hierarchy=O;return E}};I._runCrossTraceCalc=function(f,k){function t(E){var C=E.data.data,u=C.id;!1===C.color&&(y[u]?C.color=y[u]:E.parent?E.parent.parent?C.color=E.parent.data.data.color:(y[u]=C.color=w[B%w.length],
B++):C.color=z)}var v=k._fullLayout;k=k.calcdata;var w=v[f+"colorway"],y=v["_"+f+"colormap"];v["extend"+f+"colors"]&&(w=g(w,"treemap"===f?e:d));var B=0;for(v=0;v<k.length;v++){var A=k[v][0];if(A.trace.type===f&&A.hierarchy){var z=A.trace.root.color;A.hierarchy.each(t)}}};I.crossTraceCalc=function(f){return I._runCrossTraceCalc("sunburst",f)}},{"../../components/colorscale":655,"../../constants/numerical":753,"../../lib":778,"../pie/calc":1163,"d3-hierarchy":161,"fast-isnumeric":241}],1302:[function(b,
N,I){N.exports={CLICK_TRANSITION_TIME:750,CLICK_TRANSITION_EASING:"linear",eventDataKeys:"currentPath root entry percentRoot percentEntry percentParent".split(" ")}},{}],1303:[function(b,N,I){var r=b("../../lib"),q=b("./attributes"),m=b("../../plots/domain").defaults,l=b("../bar/defaults").handleText;b=b("../../components/colorscale");var a=b.hasColorscale,h=b.handleDefaults;N.exports=function(g,n,p,d){function e(k,t){return r.coerce(g,n,q,k,t)}p=e("labels");var f=e("parents");p&&p.length&&f&&f.length?
((p=e("values"))&&p.length?e("branchvalues"):e("count"),e("level"),e("maxdepth"),e("marker.line.width")&&e("marker.line.color",d.paper_bgcolor),e("marker.colors"),(p=n._hasColorscale=a(g,"marker","colors")||(g.marker||{}).coloraxis)&&h(g,n,d,e,{prefix:"marker.",cLetter:"c"}),e("leaf.opacity",p?1:.7),p=e("text"),e("texttemplate"),n.texttemplate||e("textinfo",Array.isArray(p)?"text+label":"label"),e("hovertext"),e("hovertemplate"),l(g,n,d,e,"auto",{moduleHasSelected:!1,moduleHasUnselected:!1,moduleHasConstrain:!1,
moduleHasCliponaxis:!1,moduleHasTextangle:!1,moduleHasInsideanchor:!1}),e("insidetextorientation"),e("sort"),e("rotation"),e("root.color"),m(n,d,e),n._length=null):n.visible=!1}},{"../../components/colorscale":655,"../../lib":778,"../../plots/domain":855,"../bar/defaults":925,"./attributes":1299}],1304:[function(b,N,I){function r(d,e,f){for(var k=d.data.data,t={curveNumber:e.index,pointNumber:k.i,data:e._input,fullData:e},v=0;v<f.length;v++){var w=f[v];w in d&&(t[w]=d[w])}"parentString"in d&&!n.isHierarchyRoot(d)&&
(t.parent=d.parentString);l(t,e,k.i);return t}var q=b("d3"),m=b("../../registry"),l=b("../../components/fx/helpers").appendArrayPointValue,a=b("../../components/fx"),h=b("../../lib"),g=b("../../lib/events"),n=b("./helpers"),p=b("../pie/helpers").formatPieValue;N.exports=function(d,e,f,k,t){var v=k[0],w=v.trace,y=v.hierarchy,B="sunburst"===w.type,A="treemap"===w.type;"_hasHoverLabel"in w||(w._hasHoverLabel=!1);"_hasHoverEvent"in w||(w._hasHoverEvent=!1);d.on("mouseover",function(z){var E=f._fullLayout;
if(!f._dragging&&!1!==E.hovermode){var C=f._fullData[w.index],u=z.data.data,D=u.i,G=n.isHierarchyRoot(z),J=n.getParent(y,z),L=n.getValue(z),K=function(ia){return h.castOption(C,D,ia)},H=K("hovertemplate"),Q=a.castHoverinfo(C,E,D),M=E.separators;if(H||Q&&"none"!==Q&&"skip"!==Q){if(B){var P=v.cx+z.pxmid[0]*(1-z.rInscribed);var T=v.cy+z.pxmid[1]*(1-z.rInscribed)}A&&(P=z._hoverX,T=z._hoverY);var O={},U=[],S=[],X=function(ia){return-1!==U.indexOf(ia)};Q&&(U="all"===Q?C._module.attributes.hoverinfo.flags:
Q.split("+"));O.label=u.label;X("label")&&O.label&&S.push(O.label);u.hasOwnProperty("v")&&(O.value=u.v,O.valueLabel=p(O.value,M),X("value")&&S.push(O.valueLabel));O.currentPath=z.currentPath=n.getPath(z.data);X("current path")&&!G&&S.push(O.currentPath);var ba=[];Q=function(){-1===ba.indexOf(ca)&&(S.push(ca),ba.push(ca))};O.percentParent=z.percentParent=L/n.getValue(J);O.parent=z.parentString=n.getPtLabel(J);if(X("percent parent")){var ca=n.formatPercent(O.percentParent,M)+" of "+O.parent;Q()}O.percentEntry=
z.percentEntry=L/n.getValue(e);O.entry=z.entry=n.getPtLabel(e);!X("percent entry")||G||z.onPathbar||(ca=n.formatPercent(O.percentEntry,M)+" of "+O.entry,Q());O.percentRoot=z.percentRoot=L/n.getValue(y);O.root=z.root=n.getPtLabel(y);X("percent root")&&!G&&(ca=n.formatPercent(O.percentRoot,M)+" of "+O.root,Q());O.text=K("hovertext")||K("text");X("text")&&(ca=O.text,h.isValidTextValue(ca)&&S.push(ca));u={trace:C,y:T,text:S.join("\x3cbr\x3e"),name:H||X("name")?C.name:void 0,color:K("hoverlabel.bgcolor")||
u.color,borderColor:K("hoverlabel.bordercolor"),fontFamily:K("hoverlabel.font.family"),fontSize:K("hoverlabel.font.size"),fontColor:K("hoverlabel.font.color"),nameLength:K("hoverlabel.namelength"),textAlign:K("hoverlabel.align"),hovertemplate:H,hovertemplateLabels:O,eventData:[r(z,C,t.eventDataKeys)]};B&&(u.x0=P-z.rInscribed*z.rpx1,u.x1=P+z.rInscribed*z.rpx1,u.idealAlign=0>z.pxmid[0]?"left":"right");A&&(u.x=P,u.idealAlign=0>P?"left":"right");a.loneHover(u,{container:E._hoverlayer.node(),outerContainer:E._paper.node(),
gd:f});w._hasHoverLabel=!0}A&&(E=d.select("path.surface"),t.styleOne(E,z,C,{hovered:!0}));w._hasHoverEvent=!0;f.emit("plotly_hover",{points:[r(z,C,t.eventDataKeys)],event:q.event})}});d.on("mouseout",function(z){var E=f._fullLayout,C=f._fullData[w.index],u=q.select(this).datum();w._hasHoverEvent&&(z.originalEvent=q.event,f.emit("plotly_unhover",{points:[r(u,C,t.eventDataKeys)],event:q.event}),w._hasHoverEvent=!1);w._hasHoverLabel&&(a.loneUnhover(E._hoverlayer.node()),w._hasHoverLabel=!1);A&&(z=d.select("path.surface"),
t.styleOne(z,u,C,{hovered:!1}))});d.on("click",function(z){var E=f._fullLayout,C=f._fullData[w.index],u=B&&(n.isHierarchyRoot(z)||n.isLeaf(z)),D=n.getPtId(z);D=n.isEntry(z)?n.findEntryWithChild(y,D):n.findEntryWithLevel(y,D);D=n.getPtId(D);var G={points:[r(z,C,t.eventDataKeys)],event:q.event};u||(G.nextLevel=D);G=g.triggerHandler(f,"plotly_"+w.type+"click",G);!1!==G&&E.hovermode&&(f._hoverdata=[r(z,C,t.eventDataKeys)],a.click(f,q.event));u||!1===G||f._dragging||f._transitioning||(m.call("_storeDirectGUIEdit",
C,E._tracePreGUI[C.uid],{level:C.level}),z={data:[{level:D}],traces:[w.index]},C={frame:{redraw:!1,duration:t.transitionTime},transition:{duration:t.transitionTime,easing:t.transitionEasing},mode:"immediate",fromcurrent:!0},a.loneUnhover(E._hoverlayer.node()),m.call("animate",f,z,C))})}},{"../../components/fx":683,"../../components/fx/helpers":679,"../../lib":778,"../../lib/events":767,"../../registry":911,"../pie/helpers":1166,"./helpers":1305,d3:169}],1305:[function(b,N,I){var r=b("../../lib"),
q=b("../../components/color"),m=b("../../lib/setcursor"),l=b("../pie/helpers");I.findEntryWithLevel=function(a,h){var g;h&&a.eachAfter(function(n){if(I.getPtId(n)===h)return g=n.copy()});return g||a};I.findEntryWithChild=function(a,h){var g;a.eachAfter(function(n){for(var p=n.children||[],d=0;d<p.length;d++)if(I.getPtId(p[d])===h)return g=n.copy()});return g||a};I.isEntry=function(a){return!a.parent};I.isLeaf=function(a){return!a.children};I.getPtId=function(a){return a.data.data.id};I.getPtLabel=
function(a){return a.data.data.label};I.getValue=function(a){return a.value};I.isHierarchyRoot=function(a){return""===a.data.data.pid};I.setSliceCursor=function(a,h,g){h=g.isTransitioning;h||(h=a.datum(),h=g.hideOnRoot&&I.isHierarchyRoot(h)||g.hideOnLeaves&&I.isLeaf(h));m(a,h?null:"pointer")};I.getInsideTextFontKey=function(a,h,g,n,p){g=g.data.data.i;return r.castOption(h,g,((p||{}).onPathbar?"pathbar.textfont":"insidetextfont")+"."+a)||r.castOption(h,g,"textfont."+a)||n.size};I.getOutsideTextFontKey=
function(a,h,g,n){g=g.data.data.i;return r.castOption(h,g,"outsidetextfont."+a)||r.castOption(h,g,"textfont."+a)||n.size};I.isOutsideText=function(a,h){return!a._hasColorscale&&I.isHierarchyRoot(h)};I.determineTextFont=function(a,h,g,n){if(I.isOutsideText(a,h))a={color:I.getOutsideTextFontKey("color",a,h,g),family:I.getOutsideTextFontKey("family",a,h,g),size:I.getOutsideTextFontKey("size",a,h,g)};else{var p=h.data.data,d=p.i,e=r.castOption(a,d,((n||{}).onPathbar?"pathbar.textfont":"insidetextfont")+
".color");!e&&a._input.textfont&&(e=r.castOption(a._input,d,"textfont.color"));a={color:e||q.contrast(p.color),family:I.getInsideTextFontKey("family",a,h,g,n),size:I.getInsideTextFontKey("size",a,h,g,n)}}return a};I.hasTransition=function(a){return!!(a&&0<a.duration)};I.getMaxDepth=function(a){return 0<=a.maxdepth?a.maxdepth:Infinity};I.isHeader=function(a,h){return!(I.isLeaf(a)||a.depth===h._maxDepth-1)};I.getParent=function(a,h){return I.findEntryWithLevel(a,h.data.data.pid)};I.listPath=function(a,
h){a=a.parent;if(!a)return[];var g=h?[a.data[h]]:[a];return I.listPath(a,h).concat(g)};I.getPath=function(a){return I.listPath(a,"label").join("/")+"/"};I.formatValue=l.formatPieValue;I.formatPercent=function(a,h){var g=r.formatPercent(a,0);"0%"===g&&(g=l.formatPiePercent(a,h));return g}},{"../../components/color":643,"../../lib":778,"../../lib/setcursor":799,"../pie/helpers":1166}],1306:[function(b,N,I){N.exports={moduleType:"trace",name:"sunburst",basePlotModule:b("./base_plot"),categories:[],animatable:!0,
attributes:b("./attributes"),layoutAttributes:b("./layout_attributes"),supplyDefaults:b("./defaults"),supplyLayoutDefaults:b("./layout_defaults"),calc:b("./calc").calc,crossTraceCalc:b("./calc").crossTraceCalc,plot:b("./plot").plot,style:b("./style").style,colorbar:b("../scatter/marker_colorbar"),meta:{}}},{"../scatter/marker_colorbar":1205,"./attributes":1299,"./base_plot":1300,"./calc":1301,"./defaults":1303,"./layout_attributes":1307,"./layout_defaults":1308,"./plot":1309,"./style":1310}],1307:[function(b,
N,I){N.exports={sunburstcolorway:{valType:"colorlist",editType:"calc"},extendsunburstcolors:{valType:"boolean",dflt:!0,editType:"calc"}}},{}],1308:[function(b,N,I){var r=b("../../lib"),q=b("./layout_attributes");N.exports=function(m,l){r.coerce(m,l,q,"sunburstcolorway",l.colorway);r.coerce(m,l,q,"extendsunburstcolors",void 0)}},{"../../lib":778,"./layout_attributes":1307}],1309:[function(b,N,I){function r(z,E,C,u){function D(ua){var va=A.getPtId(ua),Ca=ia[va],Ma=ia[A.getPtId(T)];if(Ma){var Ua=(ua.x1>
Ma.x1?2*Math.PI:0)+da;ua=ua.rpx1<Ma.rpx1?{rpx0:0,rpx1:0}:{x0:Ua,x1:Ua}}else{var eb,fb=A.getPtId(ua.parent);Q.each(function(cb){if(A.getPtId(cb)===fb)return eb=cb});ua=eb.children;var nb;ua.forEach(function(cb,$a){if(A.getPtId(cb)===va)return nb=$a});ua=ua.length;Ma=a.interpolate(eb.x0,eb.x1);ua={rpx0:S,rpx1:S,x0:Ma(nb/ua),x1:Ma((nb+1)/ua)}}return a.interpolate(Ca,ua)}function G(ua){var va=ia[A.getPtId(ua)],Ca={x0:ua.x0,x1:ua.x1,rpx0:ua.rpx0,rpx1:ua.rpx1};va||(ca?ua.parent?na?(ua=(ua.x1>na?2*Math.PI:
0)+da,va={x0:ua,x1:ua}):(va={rpx0:S,rpx1:S},n.extendFlat(va,L(ua))):va={rpx0:0,rpx1:0}:va={x0:da,x1:da});return a.interpolate(va,Ca)}function J(ua){var va=ia[A.getPtId(ua)],Ca=ua.transform;va||(va={rpx1:ua.rpx1,transform:{textPosAngle:Ca.textPosAngle,scale:0,rotate:Ca.rotate,rCenter:Ca.rCenter,x:Ca.x,y:Ca.y}},ca?ua.parent?na?va.x0=va.x1=ua.x1>na?2*Math.PI:0:n.extendFlat(va,L(ua)):va.x0=va.x1=da:va.x0=va.x1=da);var Ma=a.interpolate(va.transform.textPosAngle,ua.transform.textPosAngle),Ua=a.interpolate(va.rpx1,
ua.rpx1),eb=a.interpolate(va.x0,ua.x0),fb=a.interpolate(va.x1,ua.x1),nb=a.interpolate(va.transform.scale,Ca.scale),cb=a.interpolate(va.transform.rotate,Ca.rotate),$a=0===Ca.rCenter?3:0===va.transform.rCenter?1/3:1,jb=a.interpolate(va.transform.rCenter,Ca.rCenter);return function(pb){var xa=Ua(pb),Ea=eb(pb),Ia=fb(pb),Oa=jb(Math.pow(pb,$a));Ea=sa(xa,(Ea+Ia)/2);Ia=Ma(pb);xa={pxmid:Ea,rpx1:xa,transform:{textPosAngle:Ia,rCenter:Oa,x:Ca.x,y:Ca.y}};d(P.type,Ca,K);return{transform:{targetX:qa(xa),targetY:pa(xa),
scale:nb(pb),rotate:cb(pb),rCenter:Oa}}}}function L(ua){var va=ua.parent,Ca=ia[A.getPtId(va)],Ma={};Ca?(va=va.children,ua=va.indexOf(ua),va=va.length,Ca=a.interpolate(Ca.x0,Ca.x1),Ma.x0=Ca(ua/va),Ma.x1=Ca(ua/va)):Ma.x0=Ma.x1=0;return Ma}var K=z._fullLayout,H=!K.uniformtext.mode&&A.hasTransition(u),Q=a.select(C).selectAll("g.slice"),M=E[0],P=M.trace,T=A.findEntryWithLevel(M.hierarchy,P.level);C=A.getMaxDepth(P);u=K._size;var O=P.domain,U=u.h*(O.y[1]-O.y[0]),S=.5*Math.min(u.w*(O.x[1]-O.x[0]),U),X=M.cx=
u.l+u.w*(O.x[1]+O.x[0])/2,ba=M.cy=u.t+u.h*(1-O.y[0])-U/2;if(!T)return Q.remove();var ca=null,ia={};H&&Q.each(function(ua){ia[A.getPtId(ua)]={rpx0:ua.rpx0,rpx1:ua.rpx1,x0:ua.x0,x1:ua.x1,transform:ua.transform};!ca&&A.isEntry(ua)&&(ca=ua)});u=q(T).descendants();O=T.height+1;var ja=0,la=C;M.hasMultipleRoots&&A.isHierarchyRoot(T)&&(u=u.slice(1),--O,ja=1,la+=1);u=u.filter(function(ua){return ua.y1<=la});var da=f(P.rotation);da&&u.forEach(function(ua){ua.x0+=da;ua.x1+=da});var oa=Math.min(O,C),sa=function(ua,
va){return[ua*Math.cos(va),-ua*Math.sin(va)]},ma=function(ua){return n.pathAnnulus(ua.rpx0,ua.rpx1,ua.x0,ua.x1,X,ba)},qa=function(ua){return X+l(ua.rpx1,ua.transform.textPosAngle)[0]*(ua.transform.rCenter||0)+(ua.transform.x||0)},pa=function(ua){return ba+l(ua.rpx1,ua.transform.textPosAngle)[1]*(ua.transform.rCenter||0)+(ua.transform.y||0)};Q=Q.data(u,A.getPtId);Q.enter().append("g").classed("slice",!0);H?Q.exit().transition().each(function(){var ua=a.select(this);ua.select("path.surface").transition().attrTween("d",
function(va){var Ca=D(va);return function(Ma){return ma(Ca(Ma))}});ua.select("g.slicetext").attr("opacity",0)}).remove():Q.exit().remove();Q.order();var na=null;if(H&&ca){var ka=A.getPtId(ca);Q.each(function(ua){null===na&&A.getPtId(ua)===ka&&(na=ua.x1)})}C=Q;H&&(C=C.transition().each("end",function(){var ua=a.select(this);A.setSliceCursor(ua,z,{hideOnRoot:!0,hideOnLeaves:!0,isTransitioning:!1})}));C.each(function(ua){var va=a.select(this),Ca=n.ensureSingle(va,"path","surface",function(fb){fb.style("pointer-events",
"all")});ua.rpx0=(ua.y0-ja)/oa*S;ua.rpx1=(ua.y1-ja)/oa*S;ua.xmid=(ua.x0+ua.x1)/2;ua.pxmid=sa(ua.rpx1,ua.xmid);ua.midangle=-(ua.xmid-Math.PI/2);ua.startangle=-(ua.x0-Math.PI/2);ua.stopangle=-(ua.x1-Math.PI/2);ua.halfangle=.5*Math.min(n.angleDelta(ua.x0,ua.x1)||Math.PI,Math.PI);ua.ring=1-ua.rpx0/ua.rpx1;ua.rInscribed=m(ua,P);H?Ca.transition().attrTween("d",function(fb){var nb=G(fb);return function(cb){return ma(nb(cb))}}):Ca.attr("d",ma);va.call(y,T,z,E,{eventDataKeys:B.eventDataKeys,transitionTime:B.CLICK_TRANSITION_TIME,
transitionEasing:B.CLICK_TRANSITION_EASING}).call(A.setSliceCursor,z,{hideOnRoot:!0,hideOnLeaves:!0,isTransitioning:z._transitioning});Ca.call(v,ua,P);va=n.ensureSingle(va,"g","slicetext");va=n.ensureSingle(va,"text","",function(fb){fb.attr("data-notex",1)});var Ma=n.ensureUniformFontSize(z,A.determineTextFont(P,ua,K.font));va.text(I.formatSliceLabel(ua,T,P,E,K)).classed("slicetext",!0).attr("text-anchor","middle").call(g.font,Ma).call(p.convertToTspans,z);var Ua=g.bBox(va.node());ua.transform=t(Ua,
ua,M);ua.transform.targetX=qa(ua);ua.transform.targetY=pa(ua);var eb=function(fb,nb){fb=fb.transform;k(fb,nb);fb.fontSize=Ma.size;d(P.type,fb,K);return n.getTextTransform(fb)};H?va.transition().attrTween("transform",function(fb){var nb=J(fb);return function(cb){return eb(nb(cb),Ua)}}):va.attr("transform",eb(ua,Ua))})}function q(z){return h.partition().size([2*Math.PI,z.height+1])(z)}function m(z){return 0===z.rpx0&&n.isFullCircle([z.x0,z.x1])?1:Math.max(0,Math.min(1/(1+1/Math.sin(z.halfangle)),z.ring/
2))}function l(z,E){return[z*Math.sin(E),-z*Math.cos(E)]}var a=b("d3"),h=b("d3-hierarchy"),g=b("../../components/drawing"),n=b("../../lib"),p=b("../../lib/svg_text_utils");N=b("../bar/uniform_text");var d=N.recordMinTextSize,e=N.clearMinTextSize;N=b("../pie/plot");var f=b("../pie/helpers").getRotationAngle,k=N.computeTransform,t=N.transformInsideText,v=b("./style").styleOne,w=b("../bar/style").resizeText,y=b("./fx"),B=b("./constants"),A=b("./helpers");I.plot=function(z,E,C,u){var D=z._fullLayout,
G=D._sunburstlayer,J,L=!C,K=!D.uniformtext.mode&&A.hasTransition(C);e("sunburst",D);E=G.selectAll("g.trace.sunburst").data(E,function(H){return H[0].trace.uid});E.enter().append("g").classed("trace",!0).classed("sunburst",!0).attr("stroke-linejoin","round");E.order();K?(u&&(J=u()),a.transition().duration(C.duration).ease(C.easing).each("end",function(){J&&J()}).each("interrupt",function(){J&&J()}).each(function(){G.selectAll("g.trace").each(function(H){r(z,H,this,C)})})):(E.each(function(H){r(z,H,
this,C)}),D.uniformtext.mode&&w(z,D._sunburstlayer.selectAll(".trace"),"sunburst"));L&&E.exit().remove()};I.formatSliceLabel=function(z,E,C,u,D){var G=C.texttemplate,J=C.textinfo;if(!(G||J&&"none"!==J))return"";var L=D.separators,K=z.data.data;u=u[0].hierarchy;var H=A.isHierarchyRoot(z),Q=A.getParent(u,z),M=A.getValue(z);if(!G){var P=J.split("+");D=function(X){return-1!==P.indexOf(X)};var T=[];D("label")&&K.label&&T.push(K.label);K.hasOwnProperty("v")&&D("value")&&T.push(A.formatValue(K.v,L));if(!H){D("current path")&&
T.push(A.getPath(z.data));z=0;D("percent parent")&&z++;D("percent entry")&&z++;D("percent root")&&z++;var O=1<z;if(z){z=function(X){S=A.formatPercent(U,L);O&&(S+=" of "+X);T.push(S)};if(D("percent parent")&&!H){var U=M/A.getValue(Q);z("parent")}D("percent entry")&&(U=M/A.getValue(E),z("entry"));D("percent root")&&(U=M/A.getValue(u),z("root"))}}if(D("text")){var S=n.castOption(C,K.i,"text");n.isValidTextValue(S)&&T.push(S)}return T.join("\x3cbr\x3e")}G=n.castOption(C,K.i,"texttemplate");if(!G)return"";
J={};K.label&&(J.label=K.label);K.hasOwnProperty("v")&&(J.value=K.v,J.valueLabel=A.formatValue(K.v,L));J.currentPath=A.getPath(z.data);H||(J.percentParent=M/A.getValue(Q),J.percentParentLabel=A.formatPercent(J.percentParent,L),J.parent=A.getPtLabel(Q));J.percentEntry=M/A.getValue(E);J.percentEntryLabel=A.formatPercent(J.percentEntry,L);J.entry=A.getPtLabel(E);J.percentRoot=M/A.getValue(u);J.percentRootLabel=A.formatPercent(J.percentRoot,L);J.root=A.getPtLabel(u);K.hasOwnProperty("color")&&(J.color=
K.color);E=n.castOption(C,K.i,"text");if(n.isValidTextValue(E)||""===E)J.text=E;J.customdata=n.castOption(C,K.i,"customdata");return n.texttemplateString(G,J,D._d3locale,J,C._meta||{})}},{"../../components/drawing":665,"../../lib":778,"../../lib/svg_text_utils":803,"../bar/style":935,"../bar/uniform_text":937,"../pie/helpers":1166,"../pie/plot":1170,"./constants":1302,"./fx":1304,"./helpers":1305,"./style":1310,d3:169,"d3-hierarchy":161}],1310:[function(b,N,I){function r(h,g,n){var p=g.data.data;
g=!g.children;var d=p.i,e=l.castOption(n,d,"marker.line.color")||m.defaultLine;d=l.castOption(n,d,"marker.line.width")||0;h.style("stroke-width",d).call(m.fill,p.color).call(m.stroke,e).style("opacity",g?n.leaf.opacity:null)}var q=b("d3"),m=b("../../components/color"),l=b("../../lib"),a=b("../bar/uniform_text").resizeText;N.exports={style:function(h){var g=h._fullLayout._sunburstlayer.selectAll(".trace");a(h,g,"sunburst");g.each(function(n){var p=q.select(this),d=n[0].trace;p.style("opacity",d.opacity);
p.selectAll("path.surface").each(function(e){q.select(this).call(r,e,d)})})},styleOne:r}},{"../../components/color":643,"../../lib":778,"../bar/uniform_text":937,d3:169}],1311:[function(b,N,I){function r(g){return{valType:"boolean",dflt:!1}}function q(g){return{show:{valType:"boolean",dflt:!1},start:{valType:"number",dflt:null,editType:"plot"},end:{valType:"number",dflt:null,editType:"plot"},size:{valType:"number",dflt:null,min:0,editType:"plot"},project:{x:r("x"),y:r("y"),z:r("z")},color:{valType:"color",
dflt:m.defaultLine},usecolormap:{valType:"boolean",dflt:!1},width:{valType:"number",min:1,max:16,dflt:2},highlight:{valType:"boolean",dflt:!0},highlightcolor:{valType:"color",dflt:m.defaultLine},highlightwidth:{valType:"number",min:1,max:16,dflt:2}}}var m=b("../../components/color");I=b("../../components/colorscale/attributes");var l=b("../../plots/template_attributes").hovertemplateAttrs,a=b("../../plots/attributes"),h=b("../../lib/extend").extendFlat;b=b("../../plot_api/edit_types").overrideAll;
N=N.exports=b(h({z:{valType:"data_array"},x:{valType:"data_array"},y:{valType:"data_array"},text:{valType:"string",dflt:"",arrayOk:!0},hovertext:{valType:"string",dflt:"",arrayOk:!0},hovertemplate:l(),connectgaps:{valType:"boolean",dflt:!1,editType:"calc"},surfacecolor:{valType:"data_array"}},I("",{colorAttr:"z or surfacecolor",showScaleDflt:!0,autoColorDflt:!1,editTypeOverride:"calc"}),{contours:{x:q("x"),y:q("y"),z:q("z")},hidesurface:{valType:"boolean",dflt:!1},lightposition:{x:{valType:"number",
min:-1E5,max:1E5,dflt:10},y:{valType:"number",min:-1E5,max:1E5,dflt:1E4},z:{valType:"number",min:-1E5,max:1E5,dflt:0}},lighting:{ambient:{valType:"number",min:0,max:1,dflt:.8},diffuse:{valType:"number",min:0,max:1,dflt:.8},specular:{valType:"number",min:0,max:2,dflt:.05},roughness:{valType:"number",min:0,max:1,dflt:.5},fresnel:{valType:"number",min:0,max:5,dflt:.2}},opacity:{valType:"number",min:0,max:1,dflt:1},opacityscale:{valType:"any",editType:"calc"},_deprecated:{zauto:h({},I.zauto,{}),zmin:h({},
I.zmin,{}),zmax:h({},I.zmax,{})},hoverinfo:h({},a.hoverinfo),showlegend:h({},a.showlegend,{dflt:!1})}),"calc","nested");N.x.editType=N.y.editType=N.z.editType="calc+clearAxisTypes";N.transforms=void 0},{"../../components/color":643,"../../components/colorscale/attributes":650,"../../lib/extend":768,"../../plot_api/edit_types":810,"../../plots/attributes":824,"../../plots/template_attributes":906}],1312:[function(b,N,I){var r=b("../../components/colorscale/calc");N.exports=function(q,m){m.surfacecolor?
r(q,m,{vals:m.surfacecolor,containerStr:"",cLetter:"c"}):r(q,m,{vals:m.z,containerStr:"",cLetter:"c"})}},{"../../components/colorscale/calc":651}],1313:[function(b,N,I){function r(w,y,B){this.scene=w;this.uid=B;this.surface=y;this.data=null;this.showContour=[!1,!1,!1];this.contourStart=[null,null,null];this.contourEnd=[null,null,null];this.contourSize=[0,0,0];this.minValues=[Infinity,Infinity,Infinity];this.maxValues=[-Infinity,-Infinity,-Infinity];this.dataScaleY=this.dataScaleX=1;this.refineData=
!0;this.objectOffset=[0,0,0]}function q(w){for(var y=[],B=0;B<k.length;B++){var A=k[B],z=y,E=z.push;var C=w;if(C<A)A=0;else{for(var u=0;0===Math.floor(C%A);)C/=A,u++;A=u}E.call(z,A)}return y}function m(w,y,B){var A=B[8]+B[2]*y[0]+B[5]*y[1];w[0]=(B[6]+B[0]*y[0]+B[3]*y[1])/A;w[1]=(B[7]+B[1]*y[0]+B[4]*y[1])/A;return w}var l=b("gl-surface3d"),a=b("ndarray"),h=b("ndarray-linear-interpolate").d2,g=b("../heatmap/interp2d"),n=b("../heatmap/find_empties"),p=b("../../lib").isArrayOrTypedArray,d=b("../../lib/gl_format_color").parseColorScale,
e=b("../../lib/str2rgbarray"),f=b("../../components/colorscale").extractOpts;b=r.prototype;b.getXat=function(w,y,B,A){w=p(this.data.x)?p(this.data.x[0])?this.data.x[y][w]:this.data.x[w]:w;return void 0===B?w:A.d2l(w,0,B)};b.getYat=function(w,y,B,A){w=p(this.data.y)?p(this.data.y[0])?this.data.y[y][w]:this.data.y[y]:y;return void 0===B?w:A.d2l(w,0,B)};b.getZat=function(w,y,B,A){var z=this.data.z[y][w];null===z&&this.data.connectgaps&&this.data._interpolatedZ&&(z=this.data._interpolatedZ[y][w]);return void 0===
B?z:A.d2l(z,0,B)};b.handlePick=function(w){if(w.object===this.surface){var y=Math.max(Math.min(Math.round((w.data.index[0]-1)/this.dataScaleX-1),this.data.z[0].length-1),0),B=Math.max(Math.min(Math.round((w.data.index[1]-1)/this.dataScaleY-1),this.data._ylength-1),0);w.index=[y,B];w.traceCoordinate=[this.getXat(y,B),this.getYat(y,B),this.getZat(y,B)];w.dataCoordinate=[this.getXat(y,B,this.data.xcalendar,this.scene.fullSceneLayout.xaxis),this.getYat(y,B,this.data.ycalendar,this.scene.fullSceneLayout.yaxis),
this.getZat(y,B,this.data.zcalendar,this.scene.fullSceneLayout.zaxis)];for(var A=0;3>A;A++){var z=w.dataCoordinate[A];null!==z&&void 0!==z&&(w.dataCoordinate[A]*=this.scene.dataScale[A])}A=this.data.hovertext||this.data.text;Array.isArray(A)&&A[B]&&void 0!==A[B][y]?w.textLabel=A[B][y]:w.textLabel=A?A:"";w.data.dataCoordinate=w.dataCoordinate.slice();this.surface.highlight(w.data);this.scene.glplot.spikes.position=w.dataCoordinate;return!0}};var k=[2,3,5,7,11,13,17,19,23,29,31,37,41,43,47,53,59,61,
67,71,73,79,83,89,97,101,103,107,109,113,127,131,137,139,149,151,157,163,167,173,179,181,191,193,197,199,211,223,227,229,233,239,241,251,257,263,269,271,277,281,283,293,307,311,313,317,331,337,347,349,353,359,367,373,379,383,389,397,401,409,419,421,431,433,439,443,449,457,461,463,467,479,487,491,499,503,509,521,523,541,547,557,563,569,571,577,587,593,599,601,607,613,617,619,631,641,643,647,653,659,661,673,677,683,691,701,709,719,727,733,739,743,751,757,761,769,773,787,797,809,811,821,823,827,829,
839,853,857,859,863,877,881,883,887,907,911,919,929,937,941,947,953,967,971,977,983,991,997,1009,1013,1019,1021,1031,1033,1039,1049,1051,1061,1063,1069,1087,1091,1093,1097,1103,1109,1117,1123,1129,1151,1153,1163,1171,1181,1187,1193,1201,1213,1217,1223,1229,1231,1237,1249,1259,1277,1279,1283,1289,1291,1297,1301,1303,1307,1319,1321,1327,1361,1367,1373,1381,1399,1409,1423,1427,1429,1433,1439,1447,1451,1453,1459,1471,1481,1483,1487,1489,1493,1499,1511,1523,1531,1543,1549,1553,1559,1567,1571,1579,1583,
1597,1601,1607,1609,1613,1619,1621,1627,1637,1657,1663,1667,1669,1693,1697,1699,1709,1721,1723,1733,1741,1747,1753,1759,1777,1783,1787,1789,1801,1811,1823,1831,1847,1861,1867,1871,1873,1877,1879,1889,1901,1907,1913,1931,1933,1949,1951,1973,1979,1987,1993,1997,1999,2003,2011,2017,2027,2029,2039,2053,2063,2069,2081,2083,2087,2089,2099,2111,2113,2129,2131,2137,2141,2143,2153,2161,2179,2203,2207,2213,2221,2237,2239,2243,2251,2267,2269,2273,2281,2287,2293,2297,2309,2311,2333,2339,2341,2347,2351,2357,2371,
2377,2381,2383,2389,2393,2399,2411,2417,2423,2437,2441,2447,2459,2467,2473,2477,2503,2521,2531,2539,2543,2549,2551,2557,2579,2591,2593,2609,2617,2621,2633,2647,2657,2659,2663,2671,2677,2683,2687,2689,2693,2699,2707,2711,2713,2719,2729,2731,2741,2749,2753,2767,2777,2789,2791,2797,2801,2803,2819,2833,2837,2843,2851,2857,2861,2879,2887,2897,2903,2909,2917,2927,2939,2953,2957,2963,2969,2971,2999];b.calcXnums=function(w){var y,B=[];for(y=1;y<w;y++){var A=this.getXat(y-1,0),z=this.getXat(y,0);B[y-1]=z!==
A&&void 0!==A&&null!==A&&void 0!==z&&null!==z?Math.abs(z-A):0}A=0;for(y=1;y<w;y++)A+=B[y-1];for(y=1;y<w;y++)B[y-1]=0===B[y-1]?1:Math.round(A/B[y-1]);return B};b.calcYnums=function(w){var y,B=[];for(y=1;y<w;y++){var A=this.getYat(0,y-1),z=this.getYat(0,y);B[y-1]=z!==A&&void 0!==A&&null!==A&&void 0!==z&&null!==z?Math.abs(z-A):0}A=0;for(y=1;y<w;y++)A+=B[y-1];for(y=1;y<w;y++)B[y-1]=0===B[y-1]?1:Math.round(A/B[y-1]);return B};I=[1,2,4,6,12,24,36,48,60,120,180,240,360,720,840,1260];var t=I[9],v=I[13];b.estimateScale=
function(w,y){y=0===y?this.calcXnums(w):this.calcYnums(w);if(0===y.length)y=void 0;else{for(var B=1,A=0;A<y.length;A++){var z=y[A];if(1>B||1>z)B=void 0;else{B=q(B);z=q(z);for(var E=1,C=0;C<k.length;C++)E*=Math.pow(k[C],Math.max(B[C],z[C]));B=E}}y=B}for(A=1+y;A<t;)A*=2;for(;A>v;){A--;B=y=A;A=q(B);for(z=0;z<k.length;z++)if(0<A[z]){B=k[z];break}A=y/B;A++;A<t&&(A=v)}w=Math.round(A/w);return 1<w?w:1};b.refineCoords=function(w){var y=this.dataScaleX,B=this.dataScaleY,A=Math.floor(w[0].shape[0]*y+1)|0,z=
Math.floor(w[0].shape[1]*B+1)|0,E=1+w[0].shape[0]+1,C=1+w[0].shape[1]+1;E=a(new Float32Array(E*C),[E,C]);y=[1/y,0,0,0,1/B,0,0,0,1];for(B=0;B<w.length;++B){this.surface.padField(E,w[B]);for(var u=C=a(new Float32Array(A*z),[A,z]),D=E,G=m,J=y,L=[0,0],K=u.shape[0],H=u.shape[1],Q=0;Q<K;Q++)for(var M=0;M<H;M++)G(L,[Q,M],J),u.set(Q,M,h(D,L[0],L[1]));w[B]=C}};b.setContourLevels=function(){var w=[[],[],[]],y=[!1,!1,!1],B=!1,A,z;for(A=0;3>A;++A)if(this.showContour[A]&&(B=!0,0<this.contourSize[A]&&null!==this.contourStart[A]&&
null!==this.contourEnd[A]&&this.contourEnd[A]>this.contourStart[A]))for(y[A]=!0,z=this.contourStart[A];z<this.contourEnd[A];z+=this.contourSize[A]){var E=z*this.scene.dataScale[A];for(var C=w[A],u=!1,D=0;D<C.length;D++)if(E===C[D]){u=!0;break}!1===u&&C.push(E)}if(B){B=[[],[],[]];for(A=0;3>A;++A)this.showContour[A]&&(B[A]=y[A]?w[A]:this.scene.contourLevels[A]);this.surface.update({levels:B})}};b.update=function(w){var y=this.scene,B=y.fullSceneLayout,A=this.surface,z=d(w),E=y.dataScale,C=w.z[0].length,
u=w._ylength;y=y.contourLevels;this.data=w;var D,G,J,L=[];for(D=0;3>D;D++)for(L[D]=[],G=0;G<C;G++)L[D][G]=[];for(G=0;G<C;G++)for(J=0;J<u;J++)L[0][G][J]=this.getXat(G,J,w.xcalendar,B.xaxis),L[1][G][J]=this.getYat(G,J,w.ycalendar,B.yaxis),L[2][G][J]=this.getZat(G,J,w.zcalendar,B.zaxis);if(w.connectgaps)for(w._emptypoints=n(L[2]),g(L[2],w._emptypoints),w._interpolatedZ=[],G=0;G<C;G++)for(w._interpolatedZ[G]=[],J=0;J<u;J++)w._interpolatedZ[G][J]=L[2][G][J];for(D=0;3>D;D++)for(G=0;G<C;G++)for(J=0;J<u;J++)B=
L[D][G][J],L[D][G][J]=null===B||void 0===B?NaN:L[D][G][J]*E[D];for(D=0;3>D;D++)for(G=0;G<C;G++)for(J=0;J<u;J++)B=L[D][G][J],null!==B&&void 0!==B&&(this.minValues[D]>B&&(this.minValues[D]=B),this.maxValues[D]<B&&(this.maxValues[D]=B));for(D=0;3>D;D++)this.objectOffset[D]=.5*(this.minValues[D]+this.maxValues[D]);for(D=0;3>D;D++)for(G=0;G<C;G++)for(J=0;J<u;J++)B=L[D][G][J],null!==B&&void 0!==B&&(L[D][G][J]-=this.objectOffset[D]);B=[a(new Float32Array(C*u),[C,u]),a(new Float32Array(C*u),[C,u]),a(new Float32Array(C*
u),[C,u])];for(D=0;3>D;D++)for(G=0;G<C;G++)for(J=0;J<u;J++)B[D].set(G,J,L[D][G][J]);L={colormap:z,levels:[[],[],[]],showContour:[!0,!0,!0],showSurface:!w.hidesurface,contourProject:[[!1,!1,!1],[!1,!1,!1],[!1,!1,!1]],contourWidth:[1,1,1],contourColor:[[1,1,1,1],[1,1,1,1],[1,1,1,1]],contourTint:[1,1,1],dynamicColor:[[1,1,1,1],[1,1,1,1],[1,1,1,1]],dynamicWidth:[1,1,1],dynamicTint:[1,1,1],opacityscale:w.opacityscale,opacity:w.opacity};D=f(w);L.intensityBounds=[D.min,D.max];if(w.surfacecolor){D=a(new Float32Array(C*
u),[C,u]);for(G=0;G<C;G++)for(J=0;J<u;J++)D.set(G,J,w.surfacecolor[J][G]);B.push(D)}else L.intensityBounds[0]*=E[2],L.intensityBounds[1]*=E[2];if(v<B[0].shape[0]||v<B[0].shape[1])this.refineData=!1;!0===this.refineData&&(this.dataScaleX=this.estimateScale(B[0].shape[0],0),this.dataScaleY=this.estimateScale(B[0].shape[1],1),1===this.dataScaleX&&1===this.dataScaleY||this.refineCoords(B));w.surfacecolor&&(L.intensity=B.pop());C=[!0,!0,!0];u=["x","y","z"];for(D=0;3>D;++D)E=w.contours[u[D]],C[D]=E.highlight,
L.showContour[D]=E.show||E.highlight,L.showContour[D]&&(L.contourProject[D]=[E.project.x,E.project.y,E.project.z],E.show?(this.showContour[D]=!0,L.levels[D]=y[D],A.highlightColor[D]=L.contourColor[D]=e(E.color),A.highlightTint[D]=E.usecolormap?L.contourTint[D]=0:L.contourTint[D]=1,L.contourWidth[D]=E.width,this.contourStart[D]=E.start,this.contourEnd[D]=E.end,this.contourSize[D]=E.size):(this.showContour[D]=!1,this.contourStart[D]=null,this.contourEnd[D]=null,this.contourSize[D]=0),E.highlight&&(L.dynamicColor[D]=
e(E.highlightcolor),L.dynamicWidth[D]=E.highlightwidth));y=z[0].rgb;z=z[z.length-1].rgb;y[0]===z[0]&&y[1]===z[1]&&y[2]===z[2]&&y[3]===z[3]&&(L.vertexColor=!0);L.objectOffset=this.objectOffset;L.coords=B;A.update(L);A.visible=w.visible;A.enableDynamic=C;A.enableHighlight=C;A.snapToData=!0;"lighting"in w&&(A.ambientLight=w.lighting.ambient,A.diffuseLight=w.lighting.diffuse,A.specularLight=w.lighting.specular,A.roughness=w.lighting.roughness,A.fresnel=w.lighting.fresnel);"lightposition"in w&&(A.lightPosition=
[w.lightposition.x,w.lightposition.y,w.lightposition.z])};b.dispose=function(){this.scene.glplot.remove(this.surface);this.surface.dispose()};N.exports=function(w,y){var B=l({gl:w.glplot.gl}),A=new r(w,B,y.uid);B._trace=A;A.update(y);w.glplot.add(B);return A}},{"../../components/colorscale":655,"../../lib":778,"../../lib/gl_format_color":774,"../../lib/str2rgbarray":802,"../heatmap/find_empties":1071,"../heatmap/interp2d":1074,"gl-surface3d":351,ndarray:495,"ndarray-linear-interpolate":489}],1314:[function(b,
N,I){function r(g,n,p,d){g=d("opacityscale");if("max"===g)n.opacityscale=[[0,.1],[1,1]];else if("min"===g)n.opacityscale=[[0,1],[1,.1]];else if("extremes"===g){g=[];for(p=0;32>p;p++)d=p/31,g.push([d,Math.max(0,Math.min(1,.1+.9*(1-Math.pow(Math.sin(1*d*Math.PI),2))))]);n.opacityscale=g}else{a:if(p=0,!Array.isArray(g)||2>g.length||!g[0]||!g[g.length-1]||0!==+g[0][0]||1!==+g[g.length-1][0])g=!1;else{for(d=0;d<g.length;d++){var e=g[d];if(2!==e.length||+e[0]<p){g=!1;break a}p=+e[0]}g=!0}g||(n.opacityscale=
void 0)}}function q(g,n,p){n in g&&!(p in g)&&(g[p]=g[n])}var m=b("../../registry"),l=b("../../lib"),a=b("../../components/colorscale/defaults"),h=b("./attributes");N.exports={supplyDefaults:function(g,n,p,d){function e(B,A){return l.coerce(g,n,h,B,A)}p=e("x");var f=e("y");var k=e("z");if(!k||!k.length||p&&1>p.length||f&&1>f.length)n.visible=!1;else{n._xlength=Array.isArray(p)&&l.isArrayOrTypedArray(p[0])?k.length:k[0].length;n._ylength=k.length;m.getComponentMethod("calendars","handleTraceDefaults")(g,
n,["x","y","z"],d);e("text");e("hovertext");e("hovertemplate");"lighting.ambient lighting.diffuse lighting.specular lighting.roughness lighting.fresnel lightposition.x lightposition.y lightposition.z hidesurface connectgaps opacity".split(" ").forEach(function(B){e(B)});k=e("surfacecolor");var t=["x","y","z"];for(p=0;3>p;++p){var v="contours."+t[p],w=e(v+".show"),y=e(v+".highlight");if(w||y)for(f=0;3>f;++f)e(v+".project."+t[f]);w&&(e(v+".color"),e(v+".width"),e(v+".usecolormap"));y&&(e(v+".highlightcolor"),
e(v+".highlightwidth"));e(v+".start");e(v+".end");e(v+".size")}k||(q(g,"zmin","cmin"),q(g,"zmax","cmax"),q(g,"zauto","cauto"));a(g,n,d,e,{prefix:"",cLetter:"c"});r(g,n,d,e);n._length=null}},opacityscaleDefaults:r}},{"../../components/colorscale/defaults":653,"../../lib":778,"../../registry":911,"./attributes":1311}],1315:[function(b,N,I){N.exports={attributes:b("./attributes"),supplyDefaults:b("./defaults").supplyDefaults,colorbar:{min:"cmin",max:"cmax"},calc:b("./calc"),plot:b("./convert"),moduleType:"trace",
name:"surface",basePlotModule:b("../../plots/gl3d"),categories:["gl3d","2dMap","showLegend"],meta:{}}},{"../../plots/gl3d":870,"./attributes":1311,"./calc":1312,"./convert":1313,"./defaults":1314}],1316:[function(b,N,I){I=b("../../components/annotations/attributes");var r=b("../../lib/extend").extendFlat,q=b("../../plot_api/edit_types").overrideAll,m=b("../../plots/font_attributes"),l=b("../../plots/domain").attributes;b("../../constants/docs");(N.exports=q({domain:l({name:"table",trace:!0}),columnwidth:{valType:"number",
arrayOk:!0,dflt:null},columnorder:{valType:"data_array"},header:{values:{valType:"data_array",dflt:[]},format:{valType:"data_array",dflt:[]},prefix:{valType:"string",arrayOk:!0,dflt:null},suffix:{valType:"string",arrayOk:!0,dflt:null},height:{valType:"number",dflt:28},align:r({},I.align,{arrayOk:!0}),line:{width:{valType:"number",arrayOk:!0,dflt:1},color:{valType:"color",arrayOk:!0,dflt:"grey"}},fill:{color:{valType:"color",arrayOk:!0,dflt:"white"}},font:r({},m({arrayOk:!0}))},cells:{values:{valType:"data_array",
dflt:[]},format:{valType:"data_array",dflt:[]},prefix:{valType:"string",arrayOk:!0,dflt:null},suffix:{valType:"string",arrayOk:!0,dflt:null},height:{valType:"number",dflt:20},align:r({},I.align,{arrayOk:!0}),line:{width:{valType:"number",arrayOk:!0,dflt:1},color:{valType:"color",arrayOk:!0,dflt:"grey"}},fill:{color:{valType:"color",arrayOk:!0,dflt:"white"}},font:r({},m({arrayOk:!0}))}},"calc","from-root")).transforms=void 0},{"../../components/annotations/attributes":626,"../../constants/docs":748,
"../../lib/extend":768,"../../plot_api/edit_types":810,"../../plots/domain":855,"../../plots/font_attributes":856}],1317:[function(b,N,I){var r=b("../../plots/get_data").getModuleCalcData,q=b("./plot");I.name="table";I.plot=function(m){var l=r(m.calcdata,"table")[0];l.length&&q(m,l)};I.clean=function(m,l,a,h){m=h._has&&h._has("table");l=l._has&&l._has("table");m&&!l&&h._paperdiv.selectAll(".table").remove()}},{"../../plots/get_data":865,"./plot":1324}],1318:[function(b,N,I){var r=b("../../lib/gup").wrap;
N.exports=function(){return r({})}},{"../../lib/gup":775}],1319:[function(b,N,I){N.exports={cellPad:8,columnExtentOffset:10,columnTitleOffset:28,emptyHeaderHeight:16,latexCheck:/^\$.*\$$/,goldenRatio:1.618,lineBreaker:"\x3cbr\x3e",maxDimensionCount:60,overdrag:45,releaseTransitionDuration:120,releaseTransitionEase:"cubic-out",scrollbarCaptureWidth:18,scrollbarHideDelay:1E3,scrollbarHideDuration:1E3,scrollbarOffset:5,scrollbarWidth:8,transitionDuration:100,transitionEase:"cubic-out",uplift:5,wrapSpacer:" ",
wrapSplitCharacter:" ",cn:{table:"table",tableControlView:"table-control-view",scrollBackground:"scroll-background",yColumn:"y-column",columnBlock:"column-block",scrollAreaClip:"scroll-area-clip",scrollAreaClipRect:"scroll-area-clip-rect",columnBoundary:"column-boundary",columnBoundaryClippath:"column-boundary-clippath",columnBoundaryRect:"column-boundary-rect",columnCells:"column-cells",columnCell:"column-cell",cellRect:"cell-rect",cellText:"cell-text",cellTextHolder:"cell-text-holder",scrollbarKit:"scrollbar-kit",
scrollbar:"scrollbar",scrollbarSlider:"scrollbar-slider",scrollbarGlyph:"scrollbar-glyph",scrollbarCaptureZone:"scrollbar-capture-zone"}}},{}],1320:[function(b,N,I){function r(f){if(Array.isArray(f)){for(var k=0,t=0;t<f.length;t++)k=Math.max(k,r(f[t]));return k}return f}function q(f,k){return f+k}function m(f){f=f.slice();var k=Infinity,t=0,v;for(v=0;v<f.length;v++)Array.isArray(f[v])||(f[v]=[f[v]]),k=Math.min(k,f[v].length),t=Math.max(t,f[v].length);if(k!==t)for(v=0;v<f.length;v++)(k=t-f[v].length)&&
(f[v]=f[v].concat(l(k)));return f}function l(f){for(var k=Array(f),t=0;t<f;t++)k[t]="";return k}function a(f){return f.calcdata.columns.reduce(function(k,t){return t.xIndex<f.xIndex?k+t.columnWidth:k},0)}function h(f,k){return Object.keys(f).map(function(t){return d({},f[t],{auxiliaryBlocks:k})})}function g(f,k){for(var t={},v,w=0,y=0,B=n(),A=0,z=0,E=0;E<f.length;E++)if(v=f[E],B.rows.push({rowIndex:E,rowHeight:v}),y+=v,y>=k||E===f.length-1)t[w]=B,B.key=z++,B.firstRowIndex=A,B.lastRowIndex=E,B=n(),
w+=y,A=E+1,y=0;return t}function n(){return{firstRowIndex:null,lastRowIndex:null,rows:[]}}var p=b("./constants"),d=b("../../lib/extend").extendFlat,e=b("fast-isnumeric");N.exports=function(f,k){var t=m(k.cells.values),v=function(H){return H.slice(k.header.values.length,H.length)},w=m(k.header.values);w.length&&!w[0].length&&(w[0]=[""],w=m(w));var y=w.concat(v(t).map(function(){return l((w[0]||[""]).length)})),B=k.domain,A=Math.floor(f._fullLayout._size.w*(B.x[1]-B.x[0])),z=Math.floor(f._fullLayout._size.h*
(B.y[1]-B.y[0])),E=k.header.values.length?y[0].map(function(){return k.header.height}):[p.emptyHeaderHeight],C=t.length?t[0].map(function(){return k.cells.height}):[],u=E.reduce(q,0);C=g(C,z-u+p.uplift);E=g(E,u);E=h(E,[]);C=h(C,E);var D={},G=k._fullInput.columnorder.concat(v(t.map(function(H,Q){return Q}))),J=y.map(function(H,Q){H=Array.isArray(k.columnwidth)?k.columnwidth[Math.min(Q,k.columnwidth.length-1)]:k.columnwidth;return e(H)?Number(H):1}),L=J.reduce(q,0);J=J.map(function(H){return H/L*A});
v=Math.max(r(k.header.line.width),r(k.cells.line.width));var K={key:k.uid+f._context.staticPlot,translateX:B.x[0]*f._fullLayout._size.w,translateY:f._fullLayout._size.h*(1-B.y[1]),size:f._fullLayout._size,width:A,maxLineWidth:v,height:z,columnOrder:G,groupHeight:z,rowBlocks:C,headerRowBlocks:E,scrollY:0,cells:d({},k.cells,{values:t}),headerCells:d({},k.header,{values:y}),gdColumns:y.map(function(H){return H[0]}),gdColumnsOriginalOrder:y.map(function(H){return H[0]}),prevPages:[0,0],scrollbarState:{scrollbarScrollInProgress:!1},
columns:y.map(function(H,Q){D[H]=(D[H]||0)+1;return{key:H+"__"+D[H],label:H,specIndex:Q,xIndex:G[Q],xScale:a,x:void 0,calcdata:void 0,columnWidth:J[Q]}})};K.columns.forEach(function(H){H.calcdata=K;H.x=a(H)});return K}},{"../../lib/extend":768,"./constants":1319,"fast-isnumeric":241}],1321:[function(b,N,I){function r(m){var l=(m=m.rowBlocks[m.page])?m.rows[0].rowIndex:0;return[l,m?l+m.rows.length:0]}var q=b("../../lib/extend").extendFlat;I.splitToPanels=function(m){var l=[0,0],a=q({},m,{key:"header",
type:"header",page:0,prevPages:l,currentRepaint:[null,null],dragHandle:!0,values:m.calcdata.headerCells.values[m.specIndex],rowBlocks:m.calcdata.headerRowBlocks,calcdata:q({},m.calcdata,{cells:m.calcdata.headerCells})}),h=q({},m,{key:"cells1",type:"cells",page:0,prevPages:l,currentRepaint:[null,null],dragHandle:!1,values:m.calcdata.cells.values[m.specIndex],rowBlocks:m.calcdata.rowBlocks});m=q({},m,{key:"cells2",type:"cells",page:1,prevPages:l,currentRepaint:[null,null],dragHandle:!1,values:m.calcdata.cells.values[m.specIndex],
rowBlocks:m.calcdata.rowBlocks});return[h,m,a]};I.splitToCells=function(m){var l=r(m);return(m.values||[]).slice(l[0],l[1]).map(function(a,h){var g="string"===typeof a&&a.match(/[<$&> ]/)?"_keybuster_"+Math.random():"";return{keyWithinBlock:h+g,key:l[0]+h,column:m,calcdata:m.calcdata,page:m.page,rowBlocks:m.rowBlocks,value:a}})}},{"../../lib/extend":768}],1322:[function(b,N,I){function r(a,h){var g=a.header.values.length;a=(a.columnorder||[]).slice(0,g);var n=a.slice().sort(function(d,e){return d-
e});a=a.map(function(d){return n.indexOf(d)});for(var p=a.length;p<g;p++)a.push(p);h("columnorder",a)}var q=b("../../lib"),m=b("./attributes"),l=b("../../plots/domain").defaults;N.exports=function(a,h,g,n){function p(d,e){return q.coerce(a,h,m,d,e)}l(h,n,p);p("columnwidth");p("header.values");p("header.format");p("header.align");p("header.prefix");p("header.suffix");p("header.height");p("header.line.width");p("header.line.color");p("header.fill.color");q.coerceFont(p,"header.font",q.extendFlat({},
n.font));r(h,p);p("cells.values");p("cells.format");p("cells.align");p("cells.prefix");p("cells.suffix");p("cells.height");p("cells.line.width");p("cells.line.color");p("cells.fill.color");q.coerceFont(p,"cells.font",q.extendFlat({},n.font));h._length=null}},{"../../lib":778,"../../plots/domain":855,"./attributes":1316}],1323:[function(b,N,I){N.exports={attributes:b("./attributes"),supplyDefaults:b("./defaults"),calc:b("./calc"),plot:b("./plot"),moduleType:"trace",name:"table",basePlotModule:b("./base_plot"),
categories:["noOpacity"],meta:{}}},{"./attributes":1316,"./base_plot":1317,"./calc":1318,"./defaults":1322,"./plot":1324}],1324:[function(b,N,I){function r(ja){return Math.ceil(ja.calcdata.maxLineWidth/2)}function q(ja,la){return"clip"+ja._fullLayout._uid+"_columnBoundaryClippath_"+la.calcdata.key+"_"+la.specIndex}function m(ja){return[].concat.apply([],ja.map(function(la){return la})).map(function(la){return la.__data__})}function l(ja,la,da){var oa=ja.selectAll("."+Q.cn.scrollbarKit).data(P.repeat,
P.keyFun);oa.enter().append("g").classed(Q.cn.scrollbarKit,!0).style("shape-rendering","geometricPrecision");oa.each(function(ma){var qa=ma.scrollbarState;var pa=ma.rowBlocks;pa=K(pa,pa.length-1)+(pa.length?H(pa[pa.length-1],Infinity):1);qa.totalHeight=pa;qa.scrollableAreaHeight=ma.groupHeight-A(ma);qa.currentlyVisibleHeight=Math.min(qa.totalHeight,qa.scrollableAreaHeight);qa.ratio=qa.currentlyVisibleHeight/qa.totalHeight;qa.barLength=Math.max(qa.ratio*qa.currentlyVisibleHeight,Q.goldenRatio*Q.scrollbarWidth);
qa.barWiggleRoom=qa.currentlyVisibleHeight-qa.barLength;qa.wiggleRoom=Math.max(0,qa.totalHeight-qa.scrollableAreaHeight);qa.topY=0===qa.barWiggleRoom?0:ma.scrollY/qa.wiggleRoom*qa.barWiggleRoom;qa.bottomY=qa.topY+qa.barLength;qa.dragMultiplier=qa.wiggleRoom/qa.barWiggleRoom}).attr("transform",function(ma){return S(ma.width+Q.scrollbarWidth/2+Q.scrollbarOffset,A(ma))});oa=oa.selectAll("."+Q.cn.scrollbar).data(P.repeat,P.keyFun);oa.enter().append("g").classed(Q.cn.scrollbar,!0);var sa=oa.selectAll("."+
Q.cn.scrollbarSlider).data(P.repeat,P.keyFun);sa.enter().append("g").classed(Q.cn.scrollbarSlider,!0);sa.attr("transform",function(ma){return S(0,ma.scrollbarState.topY||0)});sa=sa.selectAll("."+Q.cn.scrollbarGlyph).data(P.repeat,P.keyFun);sa.enter().append("line").classed(Q.cn.scrollbarGlyph,!0).attr("stroke","black").attr("stroke-width",Q.scrollbarWidth).attr("stroke-linecap","round").attr("y1",Q.scrollbarWidth/2);sa.attr("y2",function(ma){return ma.scrollbarState.barLength-Q.scrollbarWidth/2}).attr("stroke-opacity",
function(ma){return ma.columnDragInProgress||!ma.scrollbarState.barWiggleRoom||da?0:.4});sa.transition().delay(0).duration(0);sa.transition().delay(Q.scrollbarHideDelay).duration(Q.scrollbarHideDuration).attr("stroke-opacity",0);oa=oa.selectAll("."+Q.cn.scrollbarCaptureZone).data(P.repeat,P.keyFun);oa.enter().append("line").classed(Q.cn.scrollbarCaptureZone,!0).attr("stroke","white").attr("stroke-opacity",.01).attr("stroke-width",Q.scrollbarCaptureWidth).attr("stroke-linecap","butt").attr("y1",0).on("mousedown",
function(ma){var qa=M.event.y,pa=this.getBoundingClientRect(),na=ma.scrollbarState;qa-=pa.top;pa=M.scale.linear().domain([0,na.scrollableAreaHeight]).range([0,na.totalHeight]).clamp(!0);na.topY<=qa&&qa<=na.bottomY||C(la,ja,null,pa(qa-na.barLength/2))(ma)}).call(M.behavior.drag().origin(function(ma){M.event.stopPropagation();ma.scrollbarState.scrollbarScrollInProgress=!0;return ma}).on("drag",C(la,ja)).on("dragend",function(){}));oa.attr("y2",function(ma){return ma.scrollbarState.scrollableAreaHeight});
la._context.staticPlot&&(sa.remove(),oa.remove())}function a(ja,la,da,oa){da=da.selectAll("."+Q.cn.columnCells).data(P.repeat,P.keyFun);da.enter().append("g").classed(Q.cn.columnCells,!0);da.exit().remove();da=h(da);d(da);var sa=g(da);f(sa);sa=p(da);sa=n(sa);e(sa);k(sa,la,oa,ja);L(da)}function h(ja){ja=ja.selectAll("."+Q.cn.columnCell).data(ca.splitToCells,function(la){return la.keyWithinBlock});ja.enter().append("g").classed(Q.cn.columnCell,!0);ja.exit().remove();return ja}function g(ja){ja=ja.selectAll("."+
Q.cn.cellRect).data(P.repeat,function(la){return la.keyWithinBlock});ja.enter().append("rect").classed(Q.cn.cellRect,!0);return ja}function n(ja){ja=ja.selectAll("."+Q.cn.cellText).data(P.repeat,function(la){return la.keyWithinBlock});ja.enter().append("text").classed(Q.cn.cellText,!0).style("cursor",function(){return"auto"}).on("mousedown",function(){M.event.stopPropagation()});return ja}function p(ja){ja=ja.selectAll("."+Q.cn.cellTextHolder).data(P.repeat,function(la){return la.keyWithinBlock});
ja.enter().append("g").classed(Q.cn.cellTextHolder,!0).style("shape-rendering","geometricPrecision");return ja}function d(ja){ja.each(function(la,da){var oa=la.calcdata.cells.font,sa=la.column.specIndex;oa={size:v(oa.size,sa,da),color:v(oa.color,sa,da),family:v(oa.family,sa,da)};la.rowNumber=la.key;la.align=v(la.calcdata.cells.align,sa,da);la.cellBorderWidth=v(la.calcdata.cells.line.width,sa,da);la.font=oa})}function e(ja){ja.each(function(la){T.font(M.select(this),la.font)})}function f(ja){ja.attr("width",
function(la){return la.column.columnWidth}).attr("stroke-width",function(la){return la.cellBorderWidth}).each(function(la){var da=M.select(this);ia.stroke(da,v(la.calcdata.cells.line.color,la.column.specIndex,la.rowNumber));ia.fill(da,v(la.calcdata.cells.fill.color,la.column.specIndex,la.rowNumber))})}function k(ja,la,da,oa){ja.text(function(sa){var ma=sa.column.specIndex,qa=sa.rowNumber,pa=sa.value,na="string"===typeof pa,ka=na&&pa.match(/<br>/i),ua=!na||ka;sa.mayHaveMarkup=na&&pa.match(/[<&>]/);
pa="string"===typeof pa&&pa.match(Q.latexCheck);na=(sa.latex=pa)?"":v(sa.calcdata.cells.prefix,ma,qa)||"";var va=pa?"":v(sa.calcdata.cells.suffix,ma,qa)||"";ma=pa?null:v(sa.calcdata.cells.format,ma,qa)||null;ma=na+(ma?M.format(ma)(sa.value):sa.value)+va;var Ca;sa.wrappingNeeded=!sa.wrapped&&!ua&&!pa&&(Ca=-1!==ma.indexOf(Q.wrapSplitCharacter));sa.cellHeightMayIncrease=ka||pa||sa.mayHaveMarkup||(void 0===Ca?-1!==ma.indexOf(Q.wrapSplitCharacter):Ca);sa.needsConvertToTspans=sa.mayHaveMarkup||sa.wrappingNeeded||
sa.latex;sa.wrappingNeeded?(ka=(" "===Q.wrapSplitCharacter?ma.replace(/<a href=/ig,"\x3ca_href\x3d"):ma).split(Q.wrapSplitCharacter),ka=" "===Q.wrapSplitCharacter?ka.map(function(Ma){return Ma.replace(/<a_href=/ig,"\x3ca href\x3d")}):ka,sa.fragments=ka.map(function(Ma){return{text:Ma,width:null}}),sa.fragments.push({fragment:Q.wrapSpacer,width:null}),sa=ka.join(Q.lineBreaker)+Q.lineBreaker+Q.wrapSpacer):(delete sa.fragments,sa=ma);return sa}).attr("dy",function(sa){return sa.needsConvertToTspans?
0:"0.75em"}).each(function(sa){var ma=M.select(this),qa=sa.wrappingNeeded?D:G;sa.needsConvertToTspans?O.convertToTspans(ma,oa,qa(da,this,la,oa,sa)):M.select(this.parentNode).attr("transform",function(pa){return S(J(pa),Q.cellPad)}).attr("text-anchor",function(pa){return{left:"start",center:"middle",right:"end"}[pa.align]})})}function t(ja,la,da){var oa=la.gdColumnsOriginalOrder;la.gdColumns.sort(function(sa,ma){return da[oa.indexOf(sa)]-da[oa.indexOf(ma)]});la.columnorder=da;ja.emit("plotly_restyle")}
function v(ja,la,da){return Array.isArray(ja)?(ja=ja[Math.min(la,ja.length-1)],Array.isArray(ja)?ja[Math.min(da,ja.length-1)]:ja):ja}function w(ja,la,da){ja.transition().ease(Q.releaseTransitionEase).duration(Q.releaseTransitionDuration).attr("transform",S(la.x,da))}function y(ja){return"cells"===ja.type}function B(ja){return"header"===ja.type}function A(ja){return(ja.rowBlocks.length?ja.rowBlocks[0].auxiliaryBlocks:[]).reduce(function(la,da){return la+H(da,Infinity)},0)}function z(ja,la,da){for(var oa=
[],sa=0,ma=0;ma<ja.length;ma++){for(var qa=ja[ma],pa=qa.rows,na=0,ka=0;ka<pa.length;ka++)na+=pa[ka].rowHeight;qa.allRowsHeight=na;qa=la;pa=qa+da;qa<sa+na&&pa>sa&&oa.push(ma);sa+=na}return oa}function E(ja,la,da){var oa=m(la)[0];if(void 0!==oa){var sa=oa.rowBlocks,ma=oa.calcdata,qa=K(sa,sa.length),pa=oa.calcdata.groupHeight-A(oa),na=ma.scrollY=Math.max(0,Math.min(qa-pa,ma.scrollY)),ka=z(sa,na,pa);1===ka.length&&(ka[0]===sa.length-1?ka.unshift(ka[0]-1):ka.push(ka[0]+1));ka[0]%2&&ka.reverse();la.each(function(ua,
va){ua.page=ka[va];ua.scrollY=na});la.attr("transform",function(ua){ua=K(ua.rowBlocks,ua.page)-ua.scrollY;return S(0,ua)});ja&&(u(ja,da,la,ka,oa.prevPages,oa,0),u(ja,da,la,ka,oa.prevPages,oa,1),l(da,ja))}}function C(ja,la,da,oa){return function(sa){var ma=sa.calcdata?sa.calcdata:sa;sa=la.filter(function(na){return ma.key===na.key});var qa=da||ma.scrollbarState.dragMultiplier,pa=ma.scrollY;ma.scrollY=void 0===oa?ma.scrollY+qa*M.event.dy:oa;qa=sa.selectAll("."+Q.cn.yColumn).selectAll("."+Q.cn.columnBlock).filter(y);
E(ja,qa,sa);return ma.scrollY===pa}}function u(ja,la,da,oa,sa,ma,qa){oa[qa]!==sa[qa]&&(clearTimeout(ma.currentRepaint[qa]),ma.currentRepaint[qa]=setTimeout(function(){var pa=da.filter(function(na,ka){return ka===qa&&oa[ka]!==sa[ka]});a(ja,la,pa,da);sa[qa]=oa[qa]}))}function D(ja,la,da,oa){return function(){var sa=M.select(la.parentNode);sa.each(function(ma){var qa=ma.fragments;sa.selectAll("tspan.line").each(function(Ua,eb){qa[eb].width=this.getComputedTextLength()});var pa=qa[qa.length-1].width,
na=qa.slice(0,-1),ka=[],ua=0,va=ma.column.columnWidth-2*Q.cellPad;for(ma.value="";na.length;){var Ca=na.shift();var Ma=Ca.width+pa;ua+Ma>va&&(ma.value+=ka.join(Q.wrapSpacer)+Q.lineBreaker,ka=[],ua=0);ka.push(Ca.text);ua+=Ma}ua&&(ma.value+=ka.join(Q.wrapSpacer));ma.wrapped=!0});sa.selectAll("tspan.line").remove();k(sa.select("."+Q.cn.cellText),da,ja,oa);M.select(la.parentNode.parentNode).call(L)}}function G(ja,la,da,oa,sa){return function(){if(!sa.settledY){var ma=M.select(la.parentNode),qa=sa.rowBlocks[sa.page],
pa=sa.key-qa.firstRowIndex,na=qa.rows[pa].rowHeight,ka=sa.cellHeightMayIncrease?la.parentNode.getBoundingClientRect().height+2*Q.cellPad:na;na=Math.max(ka,na);na-qa.rows[pa].rowHeight&&(qa.rows[pa].rowHeight=na,ja.selectAll("."+Q.cn.columnCell).call(L),E(null,ja.filter(y),0),l(da,oa,!0));ma.attr("transform",function(){var ua=this.parentNode.getBoundingClientRect(),va=M.select(this.parentNode).select("."+Q.cn.cellRect).node().getBoundingClientRect(),Ca=this.transform.baseVal.consolidate();ua=va.top-
ua.top+(Ca?Ca.matrix.f:Q.cellPad);return S(J(sa,M.select(this.parentNode).select("."+Q.cn.cellTextHolder).node().getBoundingClientRect().width),ua)});sa.settledY=!0}}}function J(ja,la){switch(ja.align){case "left":return Q.cellPad;case "right":return ja.column.columnWidth-(la||0)-Q.cellPad;case "center":return(ja.column.columnWidth-(la||0))/2;default:return Q.cellPad}}function L(ja){ja.attr("transform",function(la){var da=la.rowBlocks[0].auxiliaryBlocks.reduce(function(oa,sa){return oa+H(sa,Infinity)},
0);la=H(la.rowBlocks[la.page],la.key);return S(0,la+da)}).selectAll("."+Q.cn.cellRect).attr("height",function(la){var da=la.rowBlocks[la.page];return da.rows[la.key-da.firstRowIndex].rowHeight})}function K(ja,la){var da=0;for(--la;0<=la;la--){var oa=ja[la];var sa=oa.allRowsHeight;if(void 0!==sa)oa=sa;else{for(var ma=sa=0;ma<oa.rows.length;ma++)sa+=oa.rows[ma].rowHeight;oa=oa.allRowsHeight=sa}da+=oa}return da}function H(ja,la){for(var da=0,oa=0;oa<ja.rows.length&&ja.rows[oa].rowIndex<la;oa++)da+=ja.rows[oa].rowHeight;
return da}var Q=b("./constants"),M=b("d3"),P=b("../../lib/gup"),T=b("../../components/drawing"),O=b("../../lib/svg_text_utils"),U=b("../../lib").raiseToTop,S=b("../../lib").strTranslate,X=b("../../lib").cancelTransition,ba=b("./data_preparation_helper"),ca=b("./data_split_helpers"),ia=b("../../components/color");N.exports=function(ja,la){var da=!ja._context.staticPlot;la=ja._fullLayout._paper.selectAll("."+Q.cn.table).data(la.map(function(pa){pa=P.unwrap(pa).trace;return ba(ja,pa)}),P.keyFun);la.exit().remove();
la.enter().append("g").classed(Q.cn.table,!0).attr("overflow","visible").style("box-sizing","content-box").style("position","absolute").style("left",0).style("overflow","visible").style("shape-rendering","crispEdges").style("pointer-events","all");la.attr("width",function(pa){return pa.width+pa.size.l+pa.size.r}).attr("height",function(pa){return pa.height+pa.size.t+pa.size.b}).attr("transform",function(pa){return S(pa.translateX,pa.translateY)});var oa=la.selectAll("."+Q.cn.tableControlView).data(P.repeat,
P.keyFun);la=oa.enter().append("g").classed(Q.cn.tableControlView,!0).style("box-sizing","content-box");if(da){var sa="onwheel"in document?"wheel":"mousewheel";la.on("mousemove",function(pa){oa.filter(function(na){return pa===na}).call(l,ja)}).on(sa,function(pa){pa.scrollbarState.wheeling||(pa.scrollbarState.wheeling=!0,C(ja,oa,null,pa.scrollY+M.event.deltaY)(pa)||(M.event.stopPropagation(),M.event.preventDefault()),pa.scrollbarState.wheeling=!1)}).call(l,ja,!0)}oa.attr("transform",function(pa){return S(pa.size.l,
pa.size.t)});la=oa.selectAll("."+Q.cn.scrollBackground).data(P.repeat,P.keyFun);la.enter().append("rect").classed(Q.cn.scrollBackground,!0).attr("fill","none");la.attr("width",function(pa){return pa.width}).attr("height",function(pa){return pa.height});oa.each(function(pa){T.setClipUrl(M.select(this),"clip"+ja._fullLayout._uid+"_scrollAreaBottomClip_"+pa.key,ja)});var ma=oa.selectAll("."+Q.cn.yColumn).data(function(pa){return pa.columns},P.keyFun);ma.enter().append("g").classed(Q.cn.yColumn,!0);ma.exit().remove();
ma.attr("transform",function(pa){return S(pa.x,0)});da&&ma.call(M.behavior.drag().origin(function(pa){var na=M.select(this);w(na,pa,-Q.uplift);U(this);pa.calcdata.columnDragInProgress=!0;l(oa.filter(function(ka){return pa.calcdata.key===ka.key}),ja);return pa}).on("drag",function(pa){var na=M.select(this);pa.x=Math.max(-Q.overdrag,Math.min(pa.calcdata.width+Q.overdrag-pa.columnWidth,M.event.x));m(ma).filter(function(ka){return ka.calcdata.key===pa.calcdata.key}).sort(function(ka,ua){return(pa===ka?
M.event.x:ka.x)+ka.columnWidth/2-((pa===ua?M.event.x:ua.x)+ua.columnWidth/2)}).forEach(function(ka,ua){ka.xIndex=ua;ka.x=pa===ka?ka.x:ka.xScale(ka)});ma.filter(function(ka){return pa!==ka}).transition().ease(Q.transitionEase).duration(Q.transitionDuration).attr("transform",function(ka){return S(ka.x,0)});na.call(X).attr("transform",S(pa.x,-Q.uplift))}).on("dragend",function(pa){var na=M.select(this),ka=pa.calcdata;pa.x=pa.xScale(pa);pa.calcdata.columnDragInProgress=!1;w(na,pa,0);t(ja,ka,ka.columns.map(function(ua){return ua.xIndex}))}));
ma.each(function(pa){T.setClipUrl(M.select(this),q(ja,pa),ja)});sa=ma.selectAll("."+Q.cn.columnBlock).data(ca.splitToPanels,P.keyFun);sa.enter().append("g").classed(Q.cn.columnBlock,!0).attr("id",function(pa){return pa.key});sa.style("cursor",function(pa){return pa.dragHandle?"ew-resize":pa.calcdata.scrollbarState.barWiggleRoom?"ns-resize":"default"});var qa=sa.filter(B);la=sa.filter(y);da&&la.call(M.behavior.drag().origin(function(pa){M.event.stopPropagation();return pa}).on("drag",C(ja,oa,-1)).on("dragend",
function(){}));a(ja,oa,qa,sa);a(ja,oa,la,sa);da=oa.selectAll("."+Q.cn.scrollAreaClip).data(P.repeat,P.keyFun);da.enter().append("clipPath").classed(Q.cn.scrollAreaClip,!0).attr("id",function(pa){return"clip"+ja._fullLayout._uid+"_scrollAreaBottomClip_"+pa.key});da=da.selectAll("."+Q.cn.scrollAreaClipRect).data(P.repeat,P.keyFun);da.enter().append("rect").classed(Q.cn.scrollAreaClipRect,!0).attr("x",-Q.overdrag).attr("y",-Q.uplift).attr("fill","none");da.attr("width",function(pa){return pa.width+2*
Q.overdrag}).attr("height",function(pa){return pa.height+Q.uplift});ma.selectAll("."+Q.cn.columnBoundary).data(P.repeat,P.keyFun).enter().append("g").classed(Q.cn.columnBoundary,!0);da=ma.selectAll("."+Q.cn.columnBoundaryClippath).data(P.repeat,P.keyFun);da.enter().append("clipPath").classed(Q.cn.columnBoundaryClippath,!0);da.attr("id",function(pa){return q(ja,pa)});da=da.selectAll("."+Q.cn.columnBoundaryRect).data(P.repeat,P.keyFun);da.enter().append("rect").classed(Q.cn.columnBoundaryRect,!0).attr("fill",
"none");da.attr("width",function(pa){return pa.columnWidth+2*r(pa)}).attr("height",function(pa){return pa.calcdata.height+2*r(pa)+Q.uplift}).attr("x",function(pa){return-r(pa)}).attr("y",function(pa){return-r(pa)});E(null,la,oa)}},{"../../components/color":643,"../../components/drawing":665,"../../lib":778,"../../lib/gup":775,"../../lib/svg_text_utils":803,"./constants":1319,"./data_preparation_helper":1320,"./data_split_helpers":1321,d3:169}],1325:[function(b,N,I){I=b("../../plots/template_attributes").hovertemplateAttrs;
var r=b("../../plots/template_attributes").texttemplateAttrs,q=b("../../components/colorscale/attributes"),m=b("../../plots/domain").attributes,l=b("../pie/attributes"),a=b("../sunburst/attributes"),h=b("./constants");b=b("../../lib/extend").extendFlat;N.exports={labels:a.labels,parents:a.parents,values:a.values,branchvalues:a.branchvalues,count:a.count,level:a.level,maxdepth:a.maxdepth,tiling:{packing:{valType:"enumerated",values:"squarify binary dice slice slice-dice dice-slice".split(" "),dflt:"squarify",
editType:"plot"},squarifyratio:{valType:"number",min:1,dflt:1,editType:"plot"},flip:{valType:"flaglist",flags:["x","y"],dflt:"",editType:"plot"},pad:{valType:"number",min:0,dflt:3,editType:"plot"},editType:"calc"},marker:b({pad:{t:{valType:"number",min:0,editType:"plot"},l:{valType:"number",min:0,editType:"plot"},r:{valType:"number",min:0,editType:"plot"},b:{valType:"number",min:0,editType:"plot"},editType:"calc"},colors:a.marker.colors,depthfade:{valType:"enumerated",values:[!0,!1,"reversed"],editType:"style"},
line:a.marker.line,editType:"calc"},q("marker",{colorAttr:"colors",anim:!1})),pathbar:{visible:{valType:"boolean",dflt:!0,editType:"plot"},side:{valType:"enumerated",values:["top","bottom"],dflt:"top",editType:"plot"},edgeshape:{valType:"enumerated",values:["\x3e","\x3c","|","/","\\"],dflt:"\x3e",editType:"plot"},thickness:{valType:"number",min:12,editType:"plot"},textfont:b({},l.textfont,{}),editType:"calc"},text:l.text,textinfo:a.textinfo,texttemplate:r({editType:"plot"},{keys:h.eventDataKeys.concat(["label",
"value"])}),hovertext:l.hovertext,hoverinfo:a.hoverinfo,hovertemplate:I({},{keys:h.eventDataKeys}),textfont:l.textfont,insidetextfont:l.insidetextfont,outsidetextfont:b({},l.outsidetextfont,{}),textposition:{valType:"enumerated",values:"top left;top center;top right;middle left;middle center;middle right;bottom left;bottom center;bottom right".split(";"),dflt:"top left",editType:"plot"},sort:l.sort,root:a.root,domain:m({name:"treemap",trace:!0,editType:"calc"})}},{"../../components/colorscale/attributes":650,
"../../lib/extend":768,"../../plots/domain":855,"../../plots/template_attributes":906,"../pie/attributes":1161,"../sunburst/attributes":1299,"./constants":1328}],1326:[function(b,N,I){var r=b("../../plots/plots");I.name="treemap";I.plot=function(q,m,l,a){r.plotBasePlot(I.name,q,m,l,a)};I.clean=function(q,m,l,a){r.cleanBasePlot(I.name,q,m,l,a)}},{"../../plots/plots":891}],1327:[function(b,N,I){var r=b("../sunburst/calc");I.calc=function(q,m){return r.calc(q,m)};I.crossTraceCalc=function(q){return r._runCrossTraceCalc("treemap",
q)}},{"../sunburst/calc":1301}],1328:[function(b,N,I){N.exports={CLICK_TRANSITION_TIME:750,CLICK_TRANSITION_EASING:"poly",eventDataKeys:"currentPath root entry percentRoot percentEntry percentParent".split(" "),gapWithPathbar:1}},{}],1329:[function(b,N,I){var r=b("../../lib"),q=b("./attributes"),m=b("../../components/color"),l=b("../../plots/domain").defaults,a=b("../bar/defaults").handleText,h=b("../bar/constants").TEXTPAD;b=b("../../components/colorscale");var g=b.hasColorscale,n=b.handleDefaults;
N.exports=function(p,d,e,f){function k(y,B){return r.coerce(p,d,q,y,B)}e=k("labels");var t=k("parents");if(e&&e.length&&t&&t.length){(e=k("values"))&&e.length?k("branchvalues"):k("count");k("level");k("maxdepth");"squarify"===k("tiling.packing")&&k("tiling.squarifyratio");k("tiling.flip");k("tiling.pad");e=k("text");k("texttemplate");d.texttemplate||k("textinfo",Array.isArray(e)?"text+label":"label");k("hovertext");k("hovertemplate");e=k("pathbar.visible");a(p,d,f,k,"auto",{hasPathbar:e,moduleHasSelected:!1,
moduleHasUnselected:!1,moduleHasConstrain:!1,moduleHasCliponaxis:!1,moduleHasTextangle:!1,moduleHasInsideanchor:!1});k("textposition");t=-1!==d.textposition.indexOf("bottom");k("marker.line.width")&&k("marker.line.color",f.paper_bgcolor);var v=k("marker.colors"),w=d._hasColorscale=g(p,"marker","colors")||(p.marker||{}).coloraxis;w?n(p,d,f,k,{prefix:"marker.",cLetter:"c"}):k("marker.depthfade",!(v||[]).length);v=2*d.textfont.size;k("marker.pad.t",t?v/4:v);k("marker.pad.l",v/4);k("marker.pad.r",v/4);
k("marker.pad.b",t?v:v/4);w&&n(p,d,f,k,{prefix:"marker.",cLetter:"c"});d._hovered={marker:{line:{width:2,color:m.contrast(f.paper_bgcolor)}}};e&&(k("pathbar.thickness",d.pathbar.textfont.size+2*h),k("pathbar.side"),k("pathbar.edgeshape"));k("sort");k("root.color");l(d,f,k);d._length=null}else d.visible=!1}},{"../../components/color":643,"../../components/colorscale":655,"../../lib":778,"../../plots/domain":855,"../bar/constants":923,"../bar/defaults":925,"./attributes":1325}],1330:[function(b,N,I){var r=
b("d3"),q=b("../../lib"),m=b("../../components/drawing"),l=b("../../lib/svg_text_utils"),a=b("./partition"),h=b("./style").styleOne,g=b("./constants"),n=b("../sunburst/helpers"),p=b("../sunburst/fx");N.exports=function(d,e,f,k,t){var v=t.barDifY,w=t.width,y=t.height,B=t.viewX,A=t.viewY,z=t.pathSlice,E=t.toMoveInsideSlice,C=t.strTransform,u=t.hasTransition,D=t.handleSlicesExit,G=t.makeUpdateSliceInterpolator,J=t.makeUpdateTextInterpolator,L={},K=d._fullLayout;t=e[0];var H=t.trace;t=t.hierarchy;var Q=
w/H._entryDepth,M=n.listPath(f.data,"id");t=a(t.copy(),[w,y],{packing:"dice",pad:{inner:0,top:0,left:0,right:0,bottom:0}}).descendants();t=t.filter(function(P){var T=M.indexOf(P.data.id);if(-1===T)return!1;P.x0=Q*T;P.x1=Q*(T+1);P.y0=v;P.y1=v+y;return P.onPathbar=!0});t.reverse();k=k.data(t,n.getPtId);k.enter().append("g").classed("pathbar",!0);D(k,!0,L,[w,y],z);k.order();u&&(k=k.transition().each("end",function(){var P=r.select(this);n.setSliceCursor(P,d,{hideOnRoot:!1,hideOnLeaves:!1,isTransitioning:!1})}));
k.each(function(P){P._hoverX=B(P.x1-Math.min(w,y)/2);P._hoverY=A(P.y1-y/2);var T=r.select(this),O=q.ensureSingle(T,"path","surface",function(U){U.style("pointer-events","all")});u?O.transition().attrTween("d",function(U){var S=G(U,!0,L,[w,y]);return function(X){return z(S(X))}}):O.attr("d",z);T.call(p,f,d,e,{styleOne:h,eventDataKeys:g.eventDataKeys,transitionTime:g.CLICK_TRANSITION_TIME,transitionEasing:g.CLICK_TRANSITION_EASING}).call(n.setSliceCursor,d,{hideOnRoot:!1,hideOnLeaves:!1,isTransitioning:d._transitioning});
O.call(h,P,H,{hovered:!1});P._text=(n.getPtLabel(P)||"").split("\x3cbr\x3e").join(" ")||"";T=q.ensureSingle(T,"g","slicetext");T=q.ensureSingle(T,"text","",function(U){U.attr("data-notex",1)});O=q.ensureUniformFontSize(d,n.determineTextFont(H,P,K.font,{onPathbar:!0}));T.text(P._text||" ").classed("slicetext",!0).attr("text-anchor","start").call(m.font,O).call(l.convertToTspans,d);P.textBB=m.bBox(T.node());P.transform=E(P,{fontSize:O.size,onPathbar:!0});P.transform.fontSize=O.size;u?T.transition().attrTween("transform",
function(U){var S=J(U,!0,L,[w,y]);return function(X){return C(S(X))}}):T.attr("transform",C(P))})}},{"../../components/drawing":665,"../../lib":778,"../../lib/svg_text_utils":803,"../sunburst/fx":1304,"../sunburst/helpers":1305,"./constants":1328,"./partition":1335,"./style":1337,d3:169}],1331:[function(b,N,I){var r=b("d3"),q=b("../../lib"),m=b("../../components/drawing"),l=b("../../lib/svg_text_utils"),a=b("./partition"),h=b("./style").styleOne,g=b("./constants"),n=b("../sunburst/helpers"),p=b("../sunburst/fx"),
d=b("../sunburst/plot").formatSliceLabel;N.exports=function(e,f,k,t,v){var w=v.width,y=v.height,B=v.viewX,A=v.viewY,z=v.pathSlice,E=v.toMoveInsideSlice,C=v.strTransform,u=v.hasTransition,D=v.handleSlicesExit,G=v.makeUpdateSliceInterpolator,J=v.makeUpdateTextInterpolator;v=v.prevEntry;var L=e._fullLayout,K=f[0].trace,H=-1!==K.textposition.indexOf("left"),Q=-1!==K.textposition.indexOf("right"),M=-1!==K.textposition.indexOf("bottom"),P=!M&&!K.marker.pad.t||M&&!K.marker.pad.b,T=a(k,[w,y],{packing:K.tiling.packing,
squarifyratio:K.tiling.squarifyratio,flipX:-1<K.tiling.flip.indexOf("x"),flipY:-1<K.tiling.flip.indexOf("y"),pad:{inner:K.tiling.pad,top:K.marker.pad.t,left:K.marker.pad.l,right:K.marker.pad.r,bottom:K.marker.pad.b}}).descendants(),O=Infinity,U=-Infinity;T.forEach(function(ba){var ca=ba.depth;ca>=K._maxDepth?(ba.x0=ba.x1=(ba.x0+ba.x1)/2,ba.y0=ba.y1=(ba.y0+ba.y1)/2):(O=Math.min(O,ca),U=Math.max(U,ca))});t=t.data(T,n.getPtId);K._maxVisibleLayers=isFinite(U)?U-O+1:0;t.enter().append("g").classed("slice",
!0);D(t,!1,{},[w,y],z);t.order();var S=null;if(u&&v){var X=n.getPtId(v);t.each(function(ba){null===S&&n.getPtId(ba)===X&&(S={x0:ba.x0,x1:ba.x1,y0:ba.y0,y1:ba.y1})})}u&&(t=t.transition().each("end",function(){var ba=r.select(this);n.setSliceCursor(ba,e,{hideOnRoot:!0,hideOnLeaves:!1,isTransitioning:!1})}));t.each(function(ba){var ca=n.isHeader(ba,K);ba._hoverX=B(ba.x1-K.marker.pad.r);ba._hoverY=M?A(ba.y1-K.marker.pad.b/2):A(ba.y0+K.marker.pad.t/2);var ia=r.select(this),ja=q.ensureSingle(ia,"path",
"surface",function(la){la.style("pointer-events","all")});u?ja.transition().attrTween("d",function(la){var da=G(la,!1,S||{x0:0,x1:w,y0:0,y1:y},[w,y]);return function(oa){return z(da(oa))}}):ja.attr("d",z);ia.call(p,k,e,f,{styleOne:h,eventDataKeys:g.eventDataKeys,transitionTime:g.CLICK_TRANSITION_TIME,transitionEasing:g.CLICK_TRANSITION_EASING}).call(n.setSliceCursor,e,{isTransitioning:e._transitioning});ja.call(h,ba,K,{hovered:!1});ba._text=ba.x0===ba.x1||ba.y0===ba.y1?"":ca?P?"":n.getPtLabel(ba)||
"":d(ba,k,K,f,L)||"";ia=q.ensureSingle(ia,"g","slicetext");ia=q.ensureSingle(ia,"text","",function(la){la.attr("data-notex",1)});ja=q.ensureUniformFontSize(e,n.determineTextFont(K,ba,L.font));ia.text(ba._text||" ").classed("slicetext",!0).attr("text-anchor",Q?"end":H||ca?"start":"middle").call(m.font,ja).call(l.convertToTspans,e);ba.textBB=m.bBox(ia.node());ba.transform=E(ba,{fontSize:ja.size,isHeader:ca});ba.transform.fontSize=ja.size;u?ia.transition().attrTween("transform",function(la){var da=J(la,
!1,S||{x0:0,x1:w,y0:0,y1:y},[w,y]);return function(oa){return C(da(oa))}}):ia.attr("transform",C(ba))});return S}},{"../../components/drawing":665,"../../lib":778,"../../lib/svg_text_utils":803,"../sunburst/fx":1304,"../sunburst/helpers":1305,"../sunburst/plot":1309,"./constants":1328,"./partition":1335,"./style":1337,d3:169}],1332:[function(b,N,I){N.exports={moduleType:"trace",name:"treemap",basePlotModule:b("./base_plot"),categories:[],animatable:!0,attributes:b("./attributes"),layoutAttributes:b("./layout_attributes"),
supplyDefaults:b("./defaults"),supplyLayoutDefaults:b("./layout_defaults"),calc:b("./calc").calc,crossTraceCalc:b("./calc").crossTraceCalc,plot:b("./plot"),style:b("./style").style,colorbar:b("../scatter/marker_colorbar"),meta:{}}},{"../scatter/marker_colorbar":1205,"./attributes":1325,"./base_plot":1326,"./calc":1327,"./defaults":1329,"./layout_attributes":1333,"./layout_defaults":1334,"./plot":1336,"./style":1337}],1333:[function(b,N,I){N.exports={treemapcolorway:{valType:"colorlist",editType:"calc"},
extendtreemapcolors:{valType:"boolean",dflt:!0,editType:"calc"}}},{}],1334:[function(b,N,I){var r=b("../../lib"),q=b("./layout_attributes");N.exports=function(m,l){r.coerce(m,l,q,"treemapcolorway",l.colorway);r.coerce(m,l,q,"extendtreemapcolors",void 0)}},{"../../lib":778,"./layout_attributes":1333}],1335:[function(b,N,I){function r(l,a){switch(l){case "squarify":return m.treemapSquarify.ratio(a);case "binary":return m.treemapBinary;case "dice":return m.treemapDice;case "slice":return m.treemapSlice;
default:return m.treemapSliceDice}}function q(l,a,h){if(h.swapXY){var g=l.x0;l.x0=l.y0;l.y0=g;g=l.x1;l.x1=l.y1;l.y1=g}h.flipX&&(g=l.x0,l.x0=a[0]-l.x1,l.x1=a[0]-g);h.flipY&&(g=l.y0,l.y0=a[1]-l.y1,l.y1=a[1]-g);if(l=l.children)for(g=0;g<l.length;g++)q(l[g],a,h)}var m=b("d3-hierarchy");N.exports=function(l,a,h){var g=h.flipX,n=h.flipY,p="dice-slice"===h.packing,d=h.pad[n?"bottom":"top"],e=h.pad[g?"right":"left"],f=h.pad[g?"left":"right"],k=h.pad[n?"top":"bottom"];if(p){var t=e;e=d;d=t;t=f;f=k;k=t}l=m.treemap().tile(r(h.packing,
h.squarifyratio)).paddingInner(h.pad.inner).paddingLeft(e).paddingRight(f).paddingTop(d).paddingBottom(k).size(p?[a[1],a[0]]:a)(l);(p||g||n)&&q(l,a,{swapXY:p,flipX:g,flipY:n});return l}},{"d3-hierarchy":161}],1336:[function(b,N,I){function r(t){return l.isHierarchyRoot(t)?"":l.getPtId(t)}function q(t,v,w,y){var B=t._fullLayout,A=v[0],z=A.trace,E=A.hierarchy,C=l.findEntryWithLevel(E,z.level),u=m.select(w);w=u.selectAll("g.pathbar");u=u.selectAll("g.slice");if(C){var D=l.isHierarchyRoot(C),G=!B.uniformtext.mode&&
l.hasTransition(y),J=l.getMaxDepth(z),L=B._size,K=z.domain,H=L.w*(K.x[1]-K.x[0]);y=L.h*(K.y[1]-K.y[0]);var Q=z.pathbar.thickness,M=z.marker.line.width+e.gapWithPathbar;M=z.pathbar.visible?-1<z.pathbar.side.indexOf("bottom")?y+M:-(Q+M):0;var P={x0:H,x1:H,y0:M,y1:M+Q},T=function(va,Ca,Ma){var Ua=z.tiling.pad;return{x0:va.x0-Ua-Ua<=Ca.x0?0:va.x0-Ua+Ua>=Ca.x1?Ma[0]:va.x0,x1:va.x1+Ua-Ua<=Ca.x0?0:va.x1+Ua+Ua>=Ca.x1?Ma[0]:va.x1,y0:va.y0-Ua-Ua<=Ca.y0?0:va.y0-Ua+Ua>=Ca.y1?Ma[1]:va.y0,y1:va.y1+Ua-Ua<=Ca.y0?
0:va.y1+Ua+Ua>=Ca.y1?Ma[1]:va.y1}},O=null,U={},S={},X=null,ba=function(va,Ca){return Ca?U[r(va)]:S[r(va)]};A.hasMultipleRoots&&D&&J++;z._maxDepth=J;z._backgroundColor=B.paper_bgcolor;z._entryDepth=C.data.depth;z._atRootLevel=D;var ca=-H/2+L.l+L.w*(K.x[1]+K.x[0])/2,ia=-y/2+L.t+L.h*(1-(K.y[1]+K.y[0])/2),ja=ia+0,la=ca+0;A=function(va){return la+va};D=function(va){return ja+va};var da=la+0,oa=function(va){va.x=Math.max(da,va.x)},sa=z.pathbar.edgeshape;L=function(va){var Ca=la+Math.max(Math.min(va.x0,
va.x0),0),Ma=la+Math.min(Math.max(va.x1,va.x1),H),Ua=ja+va.y0,eb=ja+va.y1;va=Q/2;var fb={},nb={};fb.x=Ca;nb.x=Ma;fb.y=nb.y=(Ua+eb)/2;var cb={x:Ca,y:Ua};Ua={x:Ma,y:Ua};Ma={x:Ma,y:eb};Ca={x:Ca,y:eb};"\x3e"===sa?(cb.x-=va,Ua.x-=va,Ma.x-=va,Ca.x-=va):"/"===sa?(Ma.x-=va,Ca.x-=va,fb.x-=va/2,nb.x-=va/2):"\\"===sa?(cb.x-=va,Ua.x-=va,fb.x-=va/2,nb.x-=va/2):"\x3c"===sa&&(fb.x-=va,nb.x-=va);oa(cb);oa(Ca);oa(fb);oa(Ua);oa(Ma);oa(nb);return"M"+(cb.x+","+cb.y)+"L"+(Ua.x+","+Ua.y)+"L"+(nb.x+","+nb.y)+"L"+(Ma.x+
","+Ma.y)+"L"+(Ca.x+","+Ca.y)+"L"+(fb.x+","+fb.y)+"Z"};var ma=function(va,Ca){var Ma=va.x0,Ua=va.x1,eb=va.y0,fb=va.y1;va=va.textBB;var nb=-1!==z.textposition.indexOf("bottom"),cb=-1!==z.textposition.indexOf("top")||Ca.isHeader&&!nb?"start":nb?"end":"middle",$a=-1!==z.textposition.indexOf("right"),jb=-1!==z.textposition.indexOf("left")||Ca.onPathbar,pb=z.marker.pad;Ca.isHeader&&(Ma+=pb.l-h,Ua-=pb.r-h,Ma>=Ua&&(Ma=Ua=(Ma+Ua)/2),nb?(nb=fb-pb.b,eb<nb&&nb<fb&&(eb=nb)):(nb=eb+pb.t,eb<nb&&nb<fb&&(fb=nb)));
va=g(Ma,Ua,eb,fb,va,{isHorizontal:!1,constrained:!0,angle:0,anchor:cb,leftToRight:jb?-1:$a?1:0});va.fontSize=Ca.fontSize;va.targetX=ca+va.targetX;va.targetY=ia+va.targetY;if(isNaN(va.targetX)||isNaN(va.targetY))return{};Ma!==Ua&&eb!==fb&&n(z.type,va,B);return{scale:va.scale,rotate:va.rotate,textX:va.textX,textY:va.textY,anchorX:va.anchorX,anchorY:va.anchorY,targetX:va.targetX,targetY:va.targetY}},qa=function(va,Ca){for(var Ma,Ua=0;!Ma&&Ua<J;)Ua++,(va=va.parent)?Ma=ba(va,Ca):Ua=J;return Ma||{}},pa=
function(va,Ca,Ma,Ua){Ma=ba(va,Ca);va=Ca?P:(Ca=ba(C,Ca))?T(va,Ca,Ua):{};return m.interpolate(Ma,va)};K=function(va,Ca,Ma,Ua){var eb=ba(va,Ca);eb?Ua=eb:Ca?Ua=P:O?va.parent?(Ma=X||Ma)&&!Ca?Ua=T(va,Ma,Ua):(Ua={},a.extendFlat(Ua,qa(va,Ca))):Ua=va:Ua={};return m.interpolate(Ua,{x0:va.x0,x1:va.x1,y0:va.y0,y1:va.y1})};var na=function(va,Ca,Ma,Ua){var eb=ba(va,Ca),fb={};Ca?Ua=U[r(E)]||P:(Ma=S[z.level]||Ma,Ua=va.data.depth-C.data.depth<J?T(va,Ma,Ua):{});a.extendFlat(fb,{transform:ma({x0:Ua.x0,x1:Ua.x1,y0:Ua.y0,
y1:Ua.y1,textBB:va.textBB,_text:va._text},{isHeader:l.isHeader(va,z)})});eb?fb=eb:va.parent&&a.extendFlat(fb,qa(va,Ca));Ca=va.transform;va.x0!==va.x1&&va.y0!==va.y1&&n(z.type,Ca,B);return m.interpolate(fb,{transform:{scale:Ca.scale,rotate:Ca.rotate,textX:Ca.textX,textY:Ca.textY,anchorX:Ca.anchorX,anchorY:Ca.anchorY,targetX:Ca.targetX,targetY:Ca.targetY}})},ka=function(va,Ca,Ma,Ua,eb){var fb=Ua[0],nb=Ua[1];G?va.exit().transition().each(function(){var cb=m.select(this);cb.select("path.surface").transition().attrTween("d",
function($a){var jb=pa($a,Ca,Ma,[fb,nb]);return function(pb){return eb(jb(pb))}});cb.select("g.slicetext").attr("opacity",0)}).remove():va.exit().remove()},ua=function(va){var Ca=va.transform;va.x0!==va.x1&&va.y0!==va.y1&&n(z.type,Ca,B);return a.getTextTransform({textX:Ca.textX,textY:Ca.textY,anchorX:Ca.anchorX,anchorY:Ca.anchorY,targetX:Ca.targetX,targetY:Ca.targetY,scale:Ca.scale,rotate:Ca.rotate})};G&&(w.each(function(va){U[r(va)]={x0:va.x0,x1:va.x1,y0:va.y0,y1:va.y1};va.transform&&(U[r(va)].transform=
{textX:va.transform.textX,textY:va.transform.textY,anchorX:va.transform.anchorX,anchorY:va.transform.anchorY,targetX:va.transform.targetX,targetY:va.transform.targetY,scale:va.transform.scale,rotate:va.transform.rotate})}),u.each(function(va){S[r(va)]={x0:va.x0,x1:va.x1,y0:va.y0,y1:va.y1};va.transform&&(S[r(va)].transform={textX:va.transform.textX,textY:va.transform.textY,anchorX:va.transform.anchorX,anchorY:va.transform.anchorY,targetX:va.transform.targetX,targetY:va.transform.targetY,scale:va.transform.scale,
rotate:va.transform.rotate});!O&&l.isEntry(va)&&(O=va)}));X=f(t,v,C,u,{width:H,height:y,viewX:function(va){return ca+va},viewY:function(va){return ia+va},pathSlice:function(va){var Ca=ca+va.x0,Ma=ca+va.x1,Ua=ia+va.y0;va=ia+va.y1;return Ma-Ca&&va-Ua?"M"+(Ca+","+(Ua+0))+"L"+(Ma-0+","+Ua)+"L"+(Ma+","+(va-0))+"L"+(Ca+0+","+va)+"Z":""},toMoveInsideSlice:ma,prevEntry:O,makeUpdateSliceInterpolator:K,makeUpdateTextInterpolator:na,handleSlicesExit:ka,hasTransition:G,strTransform:ua});z.pathbar.visible?k(t,
v,C,w,{barDifY:M,width:H,height:Q,viewX:A,viewY:D,pathSlice:L,toMoveInsideSlice:ma,makeUpdateSliceInterpolator:K,makeUpdateTextInterpolator:na,handleSlicesExit:ka,hasTransition:G,strTransform:ua}):w.remove()}else w.remove(),u.remove()}var m=b("d3"),l=b("../sunburst/helpers"),a=b("../../lib"),h=b("../bar/constants").TEXTPAD,g=b("../bar/plot").toMoveInsideBar;I=b("../bar/uniform_text");var n=I.recordMinTextSize,p=I.clearMinTextSize,d=b("../bar/style").resizeText,e=b("./constants"),f=b("./draw_descendants"),
k=b("./draw_ancestors");N.exports=function(t,v,w,y){var B=t._fullLayout,A=B._treemaplayer,z,E=!w;p("treemap",B);v=A.selectAll("g.trace.treemap").data(v,function(C){return C[0].trace.uid});v.enter().append("g").classed("trace",!0).classed("treemap",!0);v.order();!B.uniformtext.mode&&l.hasTransition(w)?(y&&(z=y()),m.transition().duration(w.duration).ease(w.easing).each("end",function(){z&&z()}).each("interrupt",function(){z&&z()}).each(function(){A.selectAll("g.trace").each(function(C){q(t,C,this,w)})})):
(v.each(function(C){q(t,C,this,w)}),B.uniformtext.mode&&d(t,B._treemaplayer.selectAll(".trace"),"treemap"));E&&v.exit().remove()}},{"../../lib":778,"../bar/constants":923,"../bar/plot":932,"../bar/style":935,"../bar/uniform_text":937,"../sunburst/helpers":1305,"./constants":1328,"./draw_ancestors":1330,"./draw_descendants":1331,d3:169}],1337:[function(b,N,I){function r(g,n,p,d){var e=(d||{}).hovered;d=n.data.data;var f=d.i;d=d.color;var k=a.isHierarchyRoot(n),t=1;if(e)e=p._hovered.marker.line.color,
f=p._hovered.marker.line.width;else if(k&&d===p.root.color)t=100,e="rgba(0,0,0,0)",f=0;else if(e=l.castOption(p,f,"marker.line.color")||m.defaultLine,f=l.castOption(p,f,"marker.line.width")||0,!p._hasColorscale&&!n.onPathbar){var v=p.marker.depthfade;if(v&&(k=m.combine(m.addOpacity(p._backgroundColor,.75),d),!0===v?(v=a.getMaxDepth(p),n=isFinite(v)?a.isLeaf(n)?0:p._maxVisibleLayers-(n.data.depth-p._entryDepth):n.data.height+1):(n=n.data.depth-p._entryDepth,p._atRootLevel||n++),0<n))for(p=0;p<n;p++)d=
m.combine(m.addOpacity(k,.5*p/n),d)}g.style("stroke-width",f).call(m.fill,d).call(m.stroke,e).style("opacity",t)}var q=b("d3"),m=b("../../components/color"),l=b("../../lib"),a=b("../sunburst/helpers"),h=b("../bar/uniform_text").resizeText;N.exports={style:function(g){var n=g._fullLayout._treemaplayer.selectAll(".trace");h(g,n,"treemap");n.each(function(p){var d=q.select(this),e=p[0].trace;d.style("opacity",e.opacity);d.selectAll("path.surface").each(function(f){q.select(this).call(r,f,e,{hovered:!1})})})},
styleOne:r}},{"../../components/color":643,"../../lib":778,"../bar/uniform_text":937,"../sunburst/helpers":1305,d3:169}],1338:[function(b,N,I){I=b("../box/attributes");b=b("../../lib/extend").extendFlat;N.exports={y:I.y,x:I.x,x0:I.x0,y0:I.y0,name:b({},I.name,{}),orientation:b({},I.orientation,{}),bandwidth:{valType:"number",min:0,editType:"calc"},scalegroup:{valType:"string",dflt:"",editType:"calc"},scalemode:{valType:"enumerated",values:["width","count"],dflt:"width",editType:"calc"},spanmode:{valType:"enumerated",
values:["soft","hard","manual"],dflt:"soft",editType:"calc"},span:{valType:"info_array",items:[{valType:"any",editType:"calc"},{valType:"any",editType:"calc"}],editType:"calc"},line:{color:{valType:"color",editType:"style"},width:{valType:"number",min:0,dflt:2,editType:"style"},editType:"plot"},fillcolor:I.fillcolor,points:b({},I.boxpoints,{}),jitter:b({},I.jitter,{}),pointpos:b({},I.pointpos,{}),width:b({},I.width,{}),marker:I.marker,text:I.text,hovertext:I.hovertext,hovertemplate:I.hovertemplate,
box:{visible:{valType:"boolean",dflt:!1,editType:"plot"},width:{valType:"number",min:0,max:1,dflt:.25,editType:"plot"},fillcolor:{valType:"color",editType:"style"},line:{color:{valType:"color",editType:"style"},width:{valType:"number",min:0,editType:"style"},editType:"style"},editType:"plot"},meanline:{visible:{valType:"boolean",dflt:!1,editType:"plot"},color:{valType:"color",editType:"style"},width:{valType:"number",min:0,editType:"style"},editType:"plot"},side:{valType:"enumerated",values:["both",
"positive","negative"],dflt:"both",editType:"calc"},offsetgroup:I.offsetgroup,alignmentgroup:I.alignmentgroup,selected:I.selected,unselected:I.unselected,hoveron:{valType:"flaglist",flags:["violins","points","kde"],dflt:"violins+points+kde",extras:["all"],editType:"style"}}},{"../../lib/extend":768,"../box/attributes":946}],1339:[function(b,N,I){function r(g,n,p,d){function e(w){var y=k[w];y="multicategory"===p.type?p.r2c(y):p.d2c(y,0,g[n.valLetter+"calendar"]);return y===h?v[w]:y}var f=g.spanmode,
k=g.span||[],t=[n.min,n.max],v=[n.min-2*d,n.max+2*d];d="soft"===f?v:"hard"===f?t:[e(0),e(1)];f={type:"linear",range:d};m.setConvert(f);f.cleanRange();return d}var q=b("../../lib"),m=b("../../plots/cartesian/axes"),l=b("../box/calc"),a=b("./helpers"),h=b("../../constants/numerical").BADNUM;N.exports=function(g,n){var p=l(g,n);if(p[0].t.empty)return p;for(var d=g._fullLayout,e=m.getFromId(g,n["h"===n.orientation?"xaxis":"yaxis"]),f=Infinity,k=-Infinity,t=0,v=0,w=0;w<p.length;w++){var y=p[w],B=y.pts.map(a.extractVal),
A=y;var z=y;var E=z.max-z.min;if(E)if(n.bandwidth)z=Math.max(n.bandwidth,E/1E4);else{var C=B.length,u=q.stdev(B,C-1,z.mean);z=Math.max(1.059*Math.min(u,(z.q3-z.q1)/1.349)*Math.pow(C,-.2),E/100)}else z=n.bandwidth?n.bandwidth:0;E=A.bandwidth=z;A=y.span=r(n,y,e,E);if(y.min===y.max&&0===E)A=y.span=[y.min,y.max],y.density=[{v:1,t:A[0]}],y.bandwidth=E,t=Math.max(t,1);else{z=A[1]-A[0];C=Math.ceil(z/(E/3));z/=C;if(!isFinite(z)||!isFinite(C))return q.error("Something went wrong with computing the violin span"),
p[0].t.empty=!0,p;E=a.makeKDE(y,n,B);y.density=Array(C);C=0;for(u=A[0];u<A[1]+z/2;C++,u+=z){var D=E(u);y.density[C]={v:D,t:u};t=Math.max(t,D)}}v=Math.max(v,B.length);f=Math.min(f,A[0]);k=Math.max(k,A[1])}f=m.findExtremes(e,[f,k],{padded:!0});n._extremes[e._id]=f;n.width?p[0].t.maxKDE=t:(d=d._violinScaleGroupStats,n=n.scalegroup,(e=d[n])?(e.maxKDE=Math.max(e.maxKDE,t),e.maxCount=Math.max(e.maxCount,v)):d[n]={maxKDE:t,maxCount:v});p[0].t.labels.kde=q._(g,"kde:");return p}},{"../../constants/numerical":753,
"../../lib":778,"../../plots/cartesian/axes":828,"../box/calc":947,"./helpers":1342}],1340:[function(b,N,I){var r=b("../box/cross_trace_calc").setPositionOffset,q=["v","h"];N.exports=function(m,l){var a=m.calcdata,h=l.xaxis;l=l.yaxis;for(var g=0;g<q.length;g++){for(var n=q[g],p="h"===n?l:h,d=[],e=0;e<a.length;e++){var f=a[e],k=f[0].t;f=f[0].trace;!0!==f.visible||"violin"!==f.type||k.empty||f.orientation!==n||f.xaxis!==h._id||f.yaxis!==l._id||d.push(e)}r("violin",m,d,p)}}},{"../box/cross_trace_calc":948}],
1341:[function(b,N,I){var r=b("../../lib"),q=b("../../components/color"),m=b("../box/defaults"),l=b("./attributes");N.exports=function(a,h,g,n){function p(v,w){return r.coerce(a,h,l,v,w)}function d(v,w){return r.coerce2(a,h,l,v,w)}m.handleSampleDefaults(a,h,p,n);if(!1!==h.visible){p("bandwidth");p("side");p("width")||(p("scalegroup",h.name),p("scalemode"));n=p("span");var e;Array.isArray(n)&&(e="manual");p("spanmode",e);e=p("line.color",(a.marker||{}).color||g);g=p("line.width");var f=p("fillcolor",
q.addOpacity(h.line.color,.5));m.handlePointsDefaults(a,h,p,{prefix:""});n=d("box.width");f=d("box.fillcolor",f);var k=d("box.line.color",e),t=d("box.line.width",g);p("box.visible",!!(n||f||k||t))||(h.box={visible:!1});e=d("meanline.color",e);g=d("meanline.width",g);p("meanline.visible",!(!e&&!g))||(h.meanline={visible:!1})}}},{"../../components/color":643,"../../lib":778,"../box/defaults":949,"./attributes":1338}],1342:[function(b,N,I){var r=b("../../lib");I.makeKDE=function(q,m,l){var a=l.length,
h=q.bandwidth,g=1/(a*h);return function(n){for(var p=0,d=0;d<a;d++){var e=(n-l[d])/h;p+=1/Math.sqrt(2*Math.PI)*Math.exp(-.5*e*e)}return g*p}};I.getPositionOnKdePath=function(q,m,l){if("h"===m.orientation){var a="y";var h="x"}else a="x",h="y";l=r.findPointOnPath(q.path,l,h,{pathLength:q.pathLength});q=q.posCenterPx;a=l[a];return[a,"both"===m.side?2*q-a:q]};I.getKdeValue=function(q,m,l){var a=q.pts.map(I.extractVal);return I.makeKDE(q,m,a)(l)/q.posDensityScale};I.extractVal=function(q){return q.v}},
{"../../lib":778}],1343:[function(b,N,I){var r=b("../../lib"),q=b("../../plots/cartesian/axes"),m=b("../box/hover"),l=b("./helpers");N.exports=function(a,h,g,n,p){var d=a.cd,e=d[0].trace,f=e.hoveron,k=-1!==f.indexOf("violins"),t=-1!==f.indexOf("kde"),v=[],w;if(k||t){var y=m.hoverOnBoxes(a,h,g,n);if(t&&0<y.length){var B=a.xa,A=a.ya;if("h"===e.orientation){var z=h;t="y";var E=A;var C="x"}else z=g,t="x",E=B,C="y",B=A;var u=d[a.index];if(z>=u.span[0]&&z<=u.span[1]){var D=r.extendFlat({},a);A=B.c2p(z,
!0);var G=l.getKdeValue(u,e,z);u=l.getPositionOnKdePath(u,e,A);var J=E._offset;E=E._length;D[t+"0"]=u[0];D[t+"1"]=u[1];D[C+"0"]=D[C+"1"]=A;D[C+"Label"]=C+": "+q.hoverLabelText(B,z)+", "+d[0].t.labels.kde+" "+G.toFixed(3);D.spikeDistance=y[0].spikeDistance;d=t+"Spike";D[d]=y[0][d];y[0].spikeDistance=void 0;y[0][d]=void 0;D.hovertemplate=!1;v.push(D);D={stroke:a.color};D[t+"1"]=r.constrain(J+u[0],J,J+E);D[t+"2"]=r.constrain(J+u[1],J,J+E);D[C+"1"]=D[C+"2"]=B._offset+A}}k&&(v=v.concat(y))}-1!==f.indexOf("points")&&
(w=m.hoverOnPoints(a,h,g));a=p.selectAll(".violinline-"+e.uid).data(D?[0]:[]);a.enter().append("line").classed("violinline-"+e.uid,!0).attr("stroke-width",1.5);a.exit().remove();a.attr(D);if("closest"===n)return w?[w]:v;w&&v.push(w);return v}},{"../../lib":778,"../../plots/cartesian/axes":828,"../box/hover":951,"./helpers":1342}],1344:[function(b,N,I){N.exports={attributes:b("./attributes"),layoutAttributes:b("./layout_attributes"),supplyDefaults:b("./defaults"),crossTraceDefaults:b("../box/defaults").crossTraceDefaults,
supplyLayoutDefaults:b("./layout_defaults"),calc:b("./calc"),crossTraceCalc:b("./cross_trace_calc"),plot:b("./plot"),style:b("./style"),styleOnSelect:b("../scatter/style").styleOnSelect,hoverPoints:b("./hover"),selectPoints:b("../box/select"),moduleType:"trace",name:"violin",basePlotModule:b("../../plots/cartesian"),categories:"cartesian svg symbols oriented box-violin showLegend violinLayout zoomScale".split(" "),meta:{}}},{"../../plots/cartesian":841,"../box/defaults":949,"../box/select":956,"../scatter/style":1211,
"./attributes":1338,"./calc":1339,"./cross_trace_calc":1340,"./defaults":1341,"./hover":1343,"./layout_attributes":1345,"./layout_defaults":1346,"./plot":1347,"./style":1348}],1345:[function(b,N,I){I=b("../box/layout_attributes");b=b("../../lib").extendFlat;N.exports={violinmode:b({},I.boxmode,{}),violingap:b({},I.boxgap,{}),violingroupgap:b({},I.boxgroupgap,{})}},{"../../lib":778,"../box/layout_attributes":953}],1346:[function(b,N,I){var r=b("../../lib"),q=b("./layout_attributes"),m=b("../box/layout_defaults");
N.exports=function(l,a,h){m._supply(l,a,h,function(g,n){return r.coerce(l,a,q,g,n)},"violin")}},{"../../lib":778,"../box/layout_defaults":954,"./layout_attributes":1345}],1347:[function(b,N,I){var r=b("d3"),q=b("../../lib"),m=b("../../components/drawing"),l=b("../box/plot"),a=b("../scatter/line_points"),h=b("./helpers");N.exports=function(g,n,p,d){function e(v){v=a(v,{xaxis:k,yaxis:t,connectGaps:!0,baseTolerance:.75,shape:"spline",simplify:!0,linearized:!0});return m.smoothopen(v[0],1)}var f=g._fullLayout,
k=n.xaxis,t=n.yaxis;q.makeTraceGroups(d,p,"trace violins").each(function(v){var w=r.select(this);v=v[0];var y=v.t,B=v.trace;if(!0!==B.visible||y.empty)w.remove();else{var A=y.bPos,z=y.bdPos,E=n[y.valLetter+"axis"],C=n[y.posLetter+"axis"],u="both"===B.side,D=u||"positive"===B.side,G=u||"negative"===B.side;v=w.selectAll("path.violin").data(q.identity);v.enter().append("path").style("vector-effect","non-scaling-stroke").attr("class","violin");v.exit().remove();v.each(function(K){var H=r.select(this),
Q=K.density,M=Q.length,P=C.c2l(K.pos+A,!0),T=C.l2p(P);if(B.width)var O=y.maxKDE/z;else O=f._violinScaleGroupStats[B.scalegroup],O="count"===B.scalemode?O.maxKDE/z*(O.maxCount/K.pts.length):O.maxKDE/z;var U;if(D){var S=Array(M);for(U=0;U<M;U++){var X=S[U]={};X[y.posLetter]=P+Q[U].v/O;X[y.valLetter]=E.c2l(Q[U].t,!0)}var ba=e(S)}if(G){S=Array(M);var ca=0;for(U=M-1;ca<M;ca++,U--)X=S[ca]={},X[y.posLetter]=P-Q[U].v/O,X[y.valLetter]=E.c2l(Q[U].t,!0);ca=e(S)}u?ba=ba+"L"+ca.substr(1)+"Z":(P=[T,E.c2p(Q[0].t)],
Q=[T,E.c2p(Q[M-1].t)],"h"===B.orientation&&(P.reverse(),Q.reverse()),ba=D?"M"+P+"L"+ba.substr(1)+"L"+Q:"M"+Q+"L"+ca.substr(1)+"L"+P);H.attr("d",ba);K.posCenterPx=T;K.posDensityScale=O*z;K.path=H.node();K.pathLength=K.path.getTotalLength()/(u?2:1)});var J=B.box;v=J.width;J=(J.line||{}).width;u?(v*=z,J=0):D?(v=[0,z*v/2],J*={x:1,y:-1}[y.posLetter]):(v=[z*v/2,0],J*={x:-1,y:1}[y.posLetter]);l.plotBoxAndWhiskers(w,{pos:C,val:E},B,{bPos:A,bdPos:v,bPosPxOffset:J});l.plotBoxMean(w,{pos:C,val:E},B,{bPos:A,
bdPos:v,bPosPxOffset:J});if(!B.box.visible&&B.meanline.visible)var L=q.identity;L=w.selectAll("path.meanline").data(L||[]);L.enter().append("path").attr("class","meanline").style("fill","none").style("vector-effect","non-scaling-stroke");L.exit().remove();L.each(function(K){var H=E.c2p(K.mean,!0);K=h.getPositionOnKdePath(K,B,H);r.select(this).attr("d","h"===B.orientation?"M"+H+","+K[0]+"V"+K[1]:"M"+K[0]+","+H+"H"+K[1])});l.plotPoints(w,{x:k,y:t},B,y)}})}},{"../../components/drawing":665,"../../lib":778,
"../box/plot":955,"../scatter/line_points":1201,"./helpers":1342,d3:169}],1348:[function(b,N,I){var r=b("d3"),q=b("../../components/color"),m=b("../scatter/style").stylePoints;N.exports=function(l){var a=r.select(l).selectAll("g.trace.violins");a.style("opacity",function(h){return h[0].trace.opacity});a.each(function(h){h=h[0].trace;var g=r.select(this),n=h.box||{},p=n.line||{},d=h.meanline||{},e=d.width;g.selectAll("path.violin").style("stroke-width",h.line.width+"px").call(q.stroke,h.line.color).call(q.fill,
h.fillcolor);g.selectAll("path.box").style("stroke-width",p.width+"px").call(q.stroke,p.color).call(q.fill,n.fillcolor);n={"stroke-width":e+"px","stroke-dasharray":2*e+"px,"+e+"px"};g.selectAll("path.mean").style(n).call(q.stroke,d.color);g.selectAll("path.meanline").style(n).call(q.stroke,d.color);m(g,h,l)})}},{"../../components/color":643,"../scatter/style":1211,d3:169}],1349:[function(b,N,I){I=b("../../components/colorscale/attributes");var r=b("../isosurface/attributes"),q=b("../surface/attributes"),
m=b("../../plots/attributes"),l=b("../../lib/extend").extendFlat;b=b("../../plot_api/edit_types").overrideAll;N=N.exports=b(l({x:r.x,y:r.y,z:r.z,value:r.value,isomin:r.isomin,isomax:r.isomax,surface:r.surface,spaceframe:{show:{valType:"boolean",dflt:!1},fill:{valType:"number",min:0,max:1,dflt:1}},slices:r.slices,caps:r.caps,text:r.text,hovertext:r.hovertext,hovertemplate:r.hovertemplate},I("",{colorAttr:"`value`",showScaleDflt:!0,editTypeOverride:"calc"}),{colorbar:r.colorbar,opacity:r.opacity,opacityscale:q.opacityscale,
lightposition:r.lightposition,lighting:r.lighting,flatshading:r.flatshading,contour:r.contour,hoverinfo:l({},m.hoverinfo),showlegend:l({},m.showlegend,{dflt:!1})}),"calc","nested");N.x.editType=N.y.editType=N.z.editType=N.value.editType="calc+clearAxisTypes";N.transforms=void 0},{"../../components/colorscale/attributes":650,"../../lib/extend":768,"../../plot_api/edit_types":810,"../../plots/attributes":824,"../isosurface/attributes":1123,"../surface/attributes":1311}],1350:[function(b,N,I){function r(p,
d,e){this.scene=p;this.uid=e;this.mesh=d;this.name="";this.data=null;this.showContour=!1}var q=b("gl-mesh3d"),m=b("../../lib/gl_format_color").parseColorScale,l=b("../../lib/str2rgbarray"),a=b("../../components/colorscale").extractOpts,h=b("../../plots/gl3d/zip3"),g=b("../isosurface/convert").findNearestOnAxis,n=b("../isosurface/convert").generateIsoMeshes;b=r.prototype;b.handlePick=function(p){if(p.object===this.mesh){var d=p.data.index,e=this.data._meshY[d],f=this.data._meshZ[d],k=this.data._Ys.length,
t=this.data._Zs.length;d=g(this.data._meshX[d],this.data._Xs).id;e=g(e,this.data._Ys).id;f=g(f,this.data._Zs).id;k=p.index=f+t*e+t*k*d;p.traceCoordinate=[this.data._meshX[k],this.data._meshY[k],this.data._meshZ[k],this.data._value[k]];t=this.data.hovertext||this.data.text;Array.isArray(t)&&void 0!==t[k]?p.textLabel=t[k]:t&&(p.textLabel=t);return!0}};b.update=function(p){function d(k,t,v,w){return t.map(function(y){return k.d2l(y,0,w)*v})}var e=this.scene,f=e.fullSceneLayout;this.data=n(p);e=h(d(f.xaxis,
p._meshX,e.dataScale[0],p.xcalendar),d(f.yaxis,p._meshY,e.dataScale[1],p.ycalendar),d(f.zaxis,p._meshZ,e.dataScale[2],p.zcalendar));f=h(p._meshI,p._meshJ,p._meshK);e={positions:e,cells:f,lightPosition:[p.lightposition.x,p.lightposition.y,p.lightposition.z],ambient:p.lighting.ambient,diffuse:p.lighting.diffuse,specular:p.lighting.specular,roughness:p.lighting.roughness,fresnel:p.lighting.fresnel,vertexNormalsEpsilon:p.lighting.vertexnormalsepsilon,faceNormalsEpsilon:p.lighting.facenormalsepsilon,opacity:p.opacity,
opacityscale:p.opacityscale,contourEnable:p.contour.show,contourColor:l(p.contour.color).slice(0,3),contourWidth:p.contour.width,useFacetNormals:p.flatshading};f=a(p);e.vertexIntensity=p._meshIntensity;e.vertexIntensityBounds=[f.min,f.max];e.colormap=m(p);this.mesh.update(e)};b.dispose=function(){this.scene.glplot.remove(this.mesh);this.mesh.dispose()};N.exports=function(p,d){var e=q({gl:p.glplot.gl}),f=new r(p,e,d.uid);e._trace=f;f.update(d);p.glplot.add(e);return f}},{"../../components/colorscale":655,
"../../lib/gl_format_color":774,"../../lib/str2rgbarray":802,"../../plots/gl3d/zip3":881,"../isosurface/convert":1125,"gl-mesh3d":309}],1351:[function(b,N,I){var r=b("../../lib"),q=b("./attributes"),m=b("../isosurface/defaults").supplyIsoDefaults,l=b("../surface/defaults").opacityscaleDefaults;N.exports=function(a,h,g,n){function p(d,e){return r.coerce(a,h,q,d,e)}m(a,h,g,n,p);l(a,h,n,p)}},{"../../lib":778,"../isosurface/defaults":1126,"../surface/defaults":1314,"./attributes":1349}],1352:[function(b,
N,I){N.exports={attributes:b("./attributes"),supplyDefaults:b("./defaults"),calc:b("../isosurface/calc"),colorbar:{min:"cmin",max:"cmax"},plot:b("./convert"),moduleType:"trace",name:"volume",basePlotModule:b("../../plots/gl3d"),categories:["gl3d","showLegend"],meta:{}}},{"../../plots/gl3d":870,"../isosurface/calc":1124,"./attributes":1349,"./convert":1350,"./defaults":1351}],1353:[function(b,N,I){function r(n){return{marker:{color:g({},q.marker.color,{arrayOk:!1,editType:"style"}),line:{color:g({},
q.marker.line.color,{arrayOk:!1,editType:"style"}),width:g({},q.marker.line.width,{arrayOk:!1,editType:"style"}),editType:"style"},editType:"style"},editType:"style"}}var q=b("../bar/attributes");I=b("../scatter/attributes").line;var m=b("../../plots/attributes"),l=b("../../plots/template_attributes").hovertemplateAttrs,a=b("../../plots/template_attributes").texttemplateAttrs,h=b("./constants"),g=b("../../lib/extend").extendFlat;b=b("../../components/color");N.exports={measure:{valType:"data_array",
dflt:[],editType:"calc"},base:{valType:"number",dflt:null,arrayOk:!1,editType:"calc"},x:q.x,x0:q.x0,dx:q.dx,y:q.y,y0:q.y0,dy:q.dy,xperiod:q.xperiod,yperiod:q.yperiod,xperiod0:q.xperiod0,yperiod0:q.yperiod0,xperiodalignment:q.xperiodalignment,yperiodalignment:q.yperiodalignment,hovertext:q.hovertext,hovertemplate:l({},{keys:h.eventDataKeys}),hoverinfo:g({},m.hoverinfo,{flags:"name x y text initial delta final".split(" ")}),textinfo:{valType:"flaglist",flags:["label","text","initial","delta","final"],
extras:["none"],editType:"plot",arrayOk:!1},texttemplate:a({editType:"plot"},{keys:h.eventDataKeys.concat(["label"])}),text:q.text,textposition:q.textposition,insidetextanchor:q.insidetextanchor,textangle:q.textangle,textfont:q.textfont,insidetextfont:q.insidetextfont,outsidetextfont:q.outsidetextfont,constraintext:q.constraintext,cliponaxis:q.cliponaxis,orientation:q.orientation,offset:q.offset,width:q.width,increasing:r("increasing"),decreasing:r("decreasing"),totals:r("intermediate sums and total"),
connector:{line:{color:g({},I.color,{dflt:b.defaultLine}),width:g({},I.width,{editType:"plot"}),dash:I.dash,editType:"plot"},mode:{valType:"enumerated",values:["spanning","between"],dflt:"between",editType:"plot"},visible:{valType:"boolean",dflt:!0,editType:"plot"},editType:"plot"},offsetgroup:q.offsetgroup,alignmentgroup:q.alignmentgroup}},{"../../components/color":643,"../../lib/extend":768,"../../plots/attributes":824,"../../plots/template_attributes":906,"../bar/attributes":921,"../scatter/attributes":1187,
"./constants":1355}],1354:[function(b,N,I){function r(n){return"a"===n||"absolute"===n}function q(n){return"t"===n||"total"===n}var m=b("../../plots/cartesian/axes"),l=b("../../plots/cartesian/align_period"),a=b("../../lib").mergeArray,h=b("../scatter/calc_selection"),g=b("../../constants/numerical").BADNUM;N.exports=function(n,p){var d=m.getFromId(n,p.xaxis||"x"),e=m.getFromId(n,p.yaxis||"y");if("h"===p.orientation){n=d.makeCalcdata(p,"x");var f=e.makeCalcdata(p,"y");d=l(p,e,"y",f);e=!!p.yperiodalignment}else n=
e.makeCalcdata(p,"y"),f=d.makeCalcdata(p,"x"),d=l(p,d,"x",f),e=!!p.xperiodalignment;for(var k=Math.min(d.length,n.length),t=Array(k),v=0,w,y=!1,B=0;B<k;B++){w=n[B]||0;var A=!1;(n[B]!==g||q(p.measure[B])||r(p.measure[B]))&&B+1<k&&(n[B+1]!==g||q(p.measure[B+1])||r(p.measure[B+1]))&&(A=!0);A=t[B]={i:B,p:d[B],s:w,rawS:w,cNext:A};r(p.measure[B])?(v=A.s,A.isSum=!0,A.dir="totals",A.s=v):q(p.measure[B])?(A.isSum=!0,A.dir="totals",A.s=v):(A.isSum=!1,A.dir=0>A.rawS?"decreasing":"increasing",w=A.s,A.s=v+w,v+=
w);"totals"===A.dir&&(y=!0);e&&(t[B].orig_p=f[B]);p.ids&&(A.id=String(p.ids[B]));A.v=(p.base||0)+v}t.length&&(t[0].hasTotals=y);a(p.text,t,"tx");a(p.hovertext,t,"htx");h(t,p);return t}},{"../../constants/numerical":753,"../../lib":778,"../../plots/cartesian/align_period":825,"../../plots/cartesian/axes":828,"../scatter/calc_selection":1189}],1355:[function(b,N,I){N.exports={eventDataKeys:["initial","delta","final"]}},{}],1356:[function(b,N,I){var r=b("../bar/cross_trace_calc").setGroupPositions;N.exports=
function(q,m){var l=q._fullLayout,a=q._fullData,h=q.calcdata,g=m.xaxis,n=m.yaxis;m=[];var p=[],d=[],e;for(e=0;e<a.length;e++){var f=a[e];if(!0===f.visible&&f.xaxis===g._id&&f.yaxis===n._id&&"waterfall"===f.type){var k=h[e];"h"===f.orientation?d.push(k):p.push(k);m.push(k)}}k={mode:l.waterfallmode,norm:l.waterfallnorm,gap:l.waterfallgap,groupgap:l.waterfallgroupgap};r(q,g,n,p,k);r(q,n,g,d,k);for(e=0;e<m.length;e++)for(k=m[e],q=0;q<k.length;q++)g=k[q],!1===g.isSum&&(g.s0+=0===q?0:k[q-1].s),q+1<k.length&&
(k[q].nextP0=k[q+1].p0,k[q].nextS0=k[q+1].s0)}},{"../bar/cross_trace_calc":924}],1357:[function(b,N,I){function r(e,f,k){e(f+".marker.color",k);e(f+".marker.line.color",n.defaultLine);e(f+".marker.line.width")}var q=b("../../lib"),m=b("../bar/defaults").handleGroupingDefaults,l=b("../bar/defaults").handleText,a=b("../scatter/xy_defaults"),h=b("../scatter/period_defaults"),g=b("./attributes"),n=b("../../components/color");b=b("../../constants/delta.js");var p=b.INCREASING.COLOR,d=b.DECREASING.COLOR;
N.exports={supplyDefaults:function(e,f,k,t){function v(w,y){return q.coerce(e,f,g,w,y)}a(e,f,t,v)?(h(e,f,t,v),v("measure"),v("orientation",f.x&&!f.y?"h":"v"),v("base"),v("offset"),v("width"),v("text"),v("hovertext"),v("hovertemplate"),k=v("textposition"),l(e,f,t,v,k,{moduleHasSelected:!1,moduleHasUnselected:!1,moduleHasConstrain:!0,moduleHasCliponaxis:!0,moduleHasTextangle:!0,moduleHasInsideanchor:!0}),"none"!==f.textposition&&(v("texttemplate"),f.texttemplate||v("textinfo")),r(v,"increasing",p),
r(v,"decreasing",d),r(v,"totals","#4499FF"),v("connector.visible")&&(v("connector.mode"),v("connector.line.width")&&(v("connector.line.color"),v("connector.line.dash")))):f.visible=!1},crossTraceDefaults:function(e,f){function k(y){return q.coerce(v._input,v,g,y)}if("group"===f.waterfallmode)for(var t=0;t<e.length;t++){var v=e[t];var w=v._input;m(w,v,f,k)}}}},{"../../components/color":643,"../../constants/delta.js":747,"../../lib":778,"../bar/defaults":925,"../scatter/period_defaults":1207,"../scatter/xy_defaults":1214,
"./attributes":1353}],1358:[function(b,N,I){N.exports=function(r,q){r.x="xVal"in q?q.xVal:q.x;r.y="yVal"in q?q.yVal:q.y;"initial"in q&&(r.initial=q.initial);"delta"in q&&(r.delta=q.delta);"final"in q&&(r.final=q.final);q.xa&&(r.xaxis=q.xa);q.ya&&(r.yaxis=q.ya);return r}},{}],1359:[function(b,N,I){function r(g,n){var p=g[n.dir].marker;g=p.color;n=p.line.color;p=p.line.width;if(m(g))return g;if(m(n)&&p)return n}var q=b("../../plots/cartesian/axes").hoverLabelText,m=b("../../components/color").opacity,
l=b("../bar/hover").hoverOnBars;b=b("../../constants/delta.js");var a=b.INCREASING.SYMBOL,h=b.DECREASING.SYMBOL;N.exports=function(g,n,p,d){if(n=l(g,n,p,d)){var e=n.cd;p=e[0].trace;var f=(d="h"===p.orientation)?g.xa:g.ya;g=e[n.index];e=g.isSum?g.b+g.s:g.rawS;if(!g.isSum){n.initial=g.b+g.s-e;n.delta=e;n.final=n.initial+n.delta;var k=q(f,Math.abs(n.delta));n.deltaLabel=0>e?"("+k+")":k;n.finalLabel=q(f,n.final);n.initialLabel=q(f,n.initial)}k=g.hi||p.hoverinfo;f=[];if(k&&"none"!==k&&"skip"!==k){var t=
"all"===k,v=k.split("+");k=function(w){return t||-1!==v.indexOf(w)};g.isSum||(!k("final")||(d?k("x"):k("y"))||f.push(n.finalLabel),k("delta")&&(0>e?f.push(n.deltaLabel+" "+h):f.push(n.deltaLabel+" "+a)),k("initial")&&f.push("Initial: "+n.initialLabel))}f.length&&(n.extraText=f.join("\x3cbr\x3e"));n.color=r(p,g);return[n]}}},{"../../components/color":643,"../../constants/delta.js":747,"../../plots/cartesian/axes":828,"../bar/hover":928}],1360:[function(b,N,I){N.exports={attributes:b("./attributes"),
layoutAttributes:b("./layout_attributes"),supplyDefaults:b("./defaults").supplyDefaults,crossTraceDefaults:b("./defaults").crossTraceDefaults,supplyLayoutDefaults:b("./layout_defaults"),calc:b("./calc"),crossTraceCalc:b("./cross_trace_calc"),plot:b("./plot"),style:b("./style").style,hoverPoints:b("./hover"),eventData:b("./event_data"),selectPoints:b("../bar/select"),moduleType:"trace",name:"waterfall",basePlotModule:b("../../plots/cartesian"),categories:"bar-like cartesian svg oriented showLegend zoomScale".split(" "),
meta:{}}},{"../../plots/cartesian":841,"../bar/select":933,"./attributes":1353,"./calc":1354,"./cross_trace_calc":1356,"./defaults":1357,"./event_data":1358,"./hover":1359,"./layout_attributes":1361,"./layout_defaults":1362,"./plot":1363,"./style":1364}],1361:[function(b,N,I){N.exports={waterfallmode:{valType:"enumerated",values:["group","overlay"],dflt:"group",editType:"calc"},waterfallgap:{valType:"number",min:0,max:1,editType:"calc"},waterfallgroupgap:{valType:"number",min:0,max:1,dflt:0,editType:"calc"}}},
{}],1362:[function(b,N,I){var r=b("../../lib"),q=b("./layout_attributes");N.exports=function(m,l,a){for(var h=!1,g=0;g<a.length;g++){var n=a[g];if(n.visible&&"waterfall"===n.type){h=!0;break}}h&&(r.coerce(m,l,q,"waterfallmode",void 0),r.coerce(m,l,q,"waterfallgap",.2),r.coerce(m,l,q,"waterfallgroupgap",void 0))}},{"../../lib":778,"./layout_attributes":1361}],1363:[function(b,N,I){function r(n,p,d,e){var f=p.xaxis,k=p.yaxis;m.makeTraceGroups(e,d,"trace bars").each(function(t){var v=q.select(this);
t=t[0].trace;v=m.ensureSingle(v,"g","lines");if(t.connector&&t.connector.visible){var w="h"===t.orientation,y=t.connector.mode;v=v.selectAll("g.line").data(m.identity);v.enter().append("g").classed("line",!0);v.exit().remove();var B=v.size();v.each(function(A,z){if(z===B-1||A.cNext){var E=[];var C=[];var u=w?f:k,D=w?k:f;E[0]=u.c2p(A.s0,!0);C[0]=D.c2p(A.p0,!0);E[1]=u.c2p(A.s1,!0);C[1]=D.c2p(A.p1,!0);E[2]=u.c2p(A.nextS0,!0);C[2]=D.c2p(A.nextP0,!0);C=w?[E,C]:[C,E];E=C[0];C=C[1];u="";E[0]!==a&&C[0]!==
a&&E[1]!==a&&C[1]!==a&&("spanning"===y&&!A.isSum&&0<z&&(u=w?u+("M"+E[0]+","+C[1]+"V"+C[0]):u+("M"+E[1]+","+C[0]+"H"+E[0])),"between"!==y&&(A.isSum||z<B-1)&&(u=w?u+("M"+E[1]+","+C[0]+"V"+C[1]):u+("M"+E[0]+","+C[1]+"H"+E[1])),E[2]!==a&&C[2]!==a&&(u=w?u+("M"+E[1]+","+C[1]+"V"+C[2]):u+("M"+E[1]+","+C[1]+"H"+E[2])));""===u&&(u="M0,0Z");m.ensureSingle(q.select(this),"path").attr("d",u).call(l.setClipUrl,p.layerClipId,n)}})}else v.remove()})}var q=b("d3"),m=b("../../lib"),l=b("../../components/drawing"),
a=b("../../constants/numerical").BADNUM,h=b("../bar/plot"),g=b("../bar/uniform_text").clearMinTextSize;N.exports=function(n,p,d,e){var f=n._fullLayout;g("waterfall",f);h.plot(n,p,d,e,{mode:f.waterfallmode,norm:f.waterfallmode,gap:f.waterfallgap,groupgap:f.waterfallgroupgap});r(n,p,d,e)}},{"../../components/drawing":665,"../../constants/numerical":753,"../../lib":778,"../bar/plot":932,"../bar/uniform_text":937,d3:169}],1364:[function(b,N,I){var r=b("d3"),q=b("../../components/drawing"),m=b("../../components/color"),
l=b("../../constants/interactions").DESELECTDIM;I=b("../bar/style");var a=b("../bar/uniform_text").resizeText,h=I.styleTextPoints;N.exports={style:function(g,n,p){n=p?p:r.select(g).selectAll("g.waterfalllayer").selectAll("g.trace");a(g,n,"waterfall");n.style("opacity",function(d){return d[0].trace.opacity});n.each(function(d){var e=r.select(this),f=d[0].trace;e.selectAll(".point \x3e path").each(function(k){if(!k.isBlank){var t=f[k.dir].marker;r.select(this).call(m.fill,t.color).call(m.stroke,t.line.color).call(q.dashLine,
t.line.dash,t.line.width).style("opacity",f.selectedpoints&&!k.selected?l:1)}});h(e,f,g);e.selectAll(".lines").each(function(){var k=f.connector.line;q.lineGroupStyle(r.select(this).selectAll("path"),k.width,k.color,k.dash)})})}}},{"../../components/color":643,"../../components/drawing":665,"../../constants/interactions":752,"../bar/style":935,"../bar/uniform_text":937,d3:169}],1365:[function(b,N,I){function r(k,t,v,w){if(w.enabled){var y=w.target,B=g.nestedProperty(t,y),A=B.get();k=h.getDataConversions(k,
t,y,A);k=q(w,k);for(var z=Array(v.length),E=0;E<v.length;E++)z[E]=k(A,v[E]);B.set(z);"count"===w.func&&g.pushUnique(t._arrayAttrs,y)}}function q(k,t){var v=t.d2c,w=t.c2d;switch(k.func){case "count":return m;case "first":return l;case "last":return a;case "sum":return function(y,B){for(var A=0,z=0;z<B.length;z++){var E=v(y[B[z]]);E!==d&&(A+=E)}return w(A)};case "avg":return function(y,B){for(var A=0,z=0,E=0;E<B.length;E++){var C=v(y[B[E]]);C!==d&&(A+=C,z++)}return z?w(A/z):d};case "min":return function(y,
B){for(var A=Infinity,z=0;z<B.length;z++){var E=v(y[B[z]]);E!==d&&(A=Math.min(A,E))}return Infinity===A?d:w(A)};case "max":return function(y,B){for(var A=-Infinity,z=0;z<B.length;z++){var E=v(y[B[z]]);E!==d&&(A=Math.max(A,E))}return-Infinity===A?d:w(A)};case "range":return function(y,B){for(var A=Infinity,z=-Infinity,E=0;E<B.length;E++){var C=v(y[B[E]]);C!==d&&(A=Math.min(A,C),z=Math.max(z,C))}return-Infinity===z||Infinity===A?d:w(z-A)};case "change":return function(y,B){var A=v(y[B[0]]);y=v(y[B[B.length-
1]]);return A===d||y===d?d:w(y-A)};case "median":return function(y,B){for(var A=[],z=0;z<B.length;z++){var E=v(y[B[z]]);E!==d&&A.push(E)}if(!A.length)return d;A.sort(g.sorterAsc);y=(A.length-1)/2;return w((A[Math.floor(y)]+A[Math.ceil(y)])/2)};case "mode":return function(y,B){for(var A={},z=0,E=d,C=0;C<B.length;C++){var u=v(y[B[C]]);if(u!==d){var D=A[u]=(A[u]||0)+1;D>z&&(z=D,E=u)}}return z?w(E):d};case "rms":return function(y,B){for(var A=0,z=0,E=0;E<B.length;E++){var C=v(y[B[E]]);C!==d&&(A+=C*C,
z++)}return z?w(Math.sqrt(A/z)):d};case "stddev":return function(y,B){var A=0,z=0,E=1,C=d,u;for(u=0;u<B.length&&C===d;u++)C=v(y[B[u]]);if(C===d)return d;for(;u<B.length;u++){var D=v(y[B[u]]);D!==d&&(D-=C,A+=D,z+=D*D,E++)}return(y="sample"===k.funcmode?E-1:E)?Math.sqrt((z-A*A/E)/y):0}}}function m(k,t){return t.length}function l(k,t){return k[t[0]]}function a(k,t){return k[t[t.length-1]]}var h=b("../plots/cartesian/axes"),g=b("../lib"),n=b("../plot_api/plot_schema"),p=b("./helpers").pointsAccessorFunction,
d=b("../constants/numerical").BADNUM;I.moduleType="transform";I.name="aggregate";var e=I.attributes={enabled:{valType:"boolean",dflt:!0,editType:"calc"},groups:{valType:"string",strict:!0,noBlank:!0,arrayOk:!0,dflt:"x",editType:"calc"},aggregations:{_isLinkedToArray:"aggregation",target:{valType:"string",editType:"calc"},func:{valType:"enumerated",values:"count sum avg median mode rms stddev min max first last change range".split(" "),dflt:"first",editType:"calc"},funcmode:{valType:"enumerated",values:["sample",
"population"],dflt:"sample",editType:"calc"},enabled:{valType:"boolean",dflt:!0,editType:"calc"},editType:"calc"},editType:"calc"},f=e.aggregations;I.supplyDefaults=function(k,t){function v(u,D){return g.coerce(z[y],E,f,u,D)}var w={},y;if(!g.coerce(k,w,e,"enabled",void 0))return w;t=n.findArrayAttributes(t);var B={};for(y=0;y<t.length;y++)B[t[y]]=1;var A=g.coerce(k,w,e,"groups",void 0);if(!Array.isArray(A)){if(!B[A])return w.enabled=!1,w;B[A]=0}var z=k.aggregations||[];k=w.aggregations=Array(z.length);
for(y=0;y<z.length;y++){var E={_index:y};A=v("target");var C=v("func");v("enabled")&&A&&(B[A]||"count"===C&&void 0===B[A])?("stddev"===C&&v("funcmode"),B[A]=0,k[y]=E):k[y]={enabled:!1,_index:y}}for(y=0;y<t.length;y++)B[t[y]]&&k.push({target:t[y],func:f.func.dflt,enabled:!0,_index:-1});return w};I.calcTransform=function(k,t,v){if(v.enabled){var w=v.groups,y=g.getTargetArray(t,{target:w});if(y){var B,A={},z={},E=[],C=p(t.transforms,v),u=y.length;t._length&&(u=Math.min(u,t._length));for(B=0;B<u;B++){var D=
y[B];var G=A[D];void 0===G?(A[D]=E.length,G=[B],E.push(G),z[A[D]]=C(B)):(E[G].push(B),z[A[D]]=(z[A[D]]||[]).concat(C(B)))}v._indexToPoints=z;v=v.aggregations;for(B=0;B<v.length;B++)r(k,t,E,v[B]);"string"===typeof w&&r(k,t,E,{target:w,func:"first",enabled:!0});t._length=E.length}}}},{"../constants/numerical":753,"../lib":778,"../plot_api/plot_schema":816,"../plots/cartesian/axes":828,"./helpers":1368}],1366:[function(b,N,I){function r(p,d,e){var f=p.operation,k=p.value,t=Array.isArray(k),v=function(B){return d(B,
0,p.valuecalendar)},w=function(B){return d(B,0,e)},y;-1!==h.indexOf(f)?y=t?v(k[0]):v(k):-1!==g.indexOf(f)?y=t?[v(k[0]),v(k[1])]:[v(k),v(k)]:-1!==n.indexOf(f)&&(y=t?k.map(v):[v(k)]);switch(f){case "\x3d":return function(B){return w(B)===y};case "!\x3d":return function(B){return w(B)!==y};case "\x3c":return function(B){return w(B)<y};case "\x3c\x3d":return function(B){return w(B)<=y};case "\x3e":return function(B){return w(B)>y};case "\x3e\x3d":return function(B){return w(B)>=y};case "[]":return function(B){B=
w(B);return B>=y[0]&&B<=y[1]};case "()":return function(B){B=w(B);return B>y[0]&&B<y[1]};case "[)":return function(B){B=w(B);return B>=y[0]&&B<y[1]};case "(]":return function(B){B=w(B);return B>y[0]&&B<=y[1]};case "][":return function(B){B=w(B);return B<=y[0]||B>=y[1]};case ")(":return function(B){B=w(B);return B<y[0]||B>y[1]};case "](":return function(B){B=w(B);return B<=y[0]||B>y[1]};case ")[":return function(B){B=w(B);return B<y[0]||B>=y[1]};case "{}":return function(B){return-1!==y.indexOf(w(B))};
case "}{":return function(B){return-1===y.indexOf(w(B))}}}var q=b("../lib"),m=b("../registry"),l=b("../plots/cartesian/axes"),a=b("./helpers").pointsAccessorFunction;b=b("../constants/filter_ops");var h=b.COMPARISON_OPS,g=b.INTERVAL_OPS,n=b.SET_OPS;I.moduleType="transform";I.name="filter";I.attributes={enabled:{valType:"boolean",dflt:!0,editType:"calc"},target:{valType:"string",strict:!0,noBlank:!0,arrayOk:!0,dflt:"x",editType:"calc"},operation:{valType:"enumerated",values:[].concat(h).concat(g).concat(n),
dflt:"\x3d",editType:"calc"},value:{valType:"any",dflt:0,editType:"calc"},preservegaps:{valType:"boolean",dflt:!1,editType:"calc"},editType:"calc"};I.supplyDefaults=function(p){function d(k,t){return q.coerce(p,e,I.attributes,k,t)}var e={};if(d("enabled")){var f=d("target");if(q.isArrayOrTypedArray(f)&&0===f.length)return e.enabled=!1,e;d("preservegaps");d("operation");d("value");f=m.getComponentMethod("calendars","handleDefaults");f(p,e,"valuecalendar",null);f(p,e,"targetcalendar",null)}return e};
I.calcTransform=function(p,d,e){function f(u,D){for(var G=0;G<y.length;G++){var J=q.nestedProperty(d,y[G]);u(J,D)}}if(e.enabled){var k=q.getTargetArray(d,e);if(k){var t=e.target,v=k.length;d._length&&(v=Math.min(v,d._length));var w=e.targetcalendar,y=d._arrayAttrs,B=e.preservegaps;if("string"===typeof t){var A=q.nestedProperty(d,t+"calendar").get();A&&(w=A)}p=l.getDataToCoordFunc(p,d,t,k);w=r(e,p,w);var z={};p={};t=0;if(B){var E=function(u){z[u.astr]=q.extendDeep([],u.get());u.set(Array(v))};A=function(u,
D){var G=z[u.astr][D];u.get()[D]=G}}else E=function(u){z[u.astr]=q.extendDeep([],u.get());u.set([])},A=function(u,D){D=z[u.astr][D];u.get().push(D)};f(E);E=a(d.transforms,e);for(var C=0;C<v;C++)w(k[C])?(f(A,C),p[t++]=E(C)):B&&t++;e._indexToPoints=p;d._length=t}}}},{"../constants/filter_ops":749,"../lib":778,"../plots/cartesian/axes":828,"../registry":911,"./helpers":1368}],1367:[function(b,N,I){var r=b("../lib"),q=b("../plot_api/plot_schema"),m=b("../plots/plots"),l=b("./helpers").pointsAccessorFunction;
I.moduleType="transform";I.name="groupby";I.attributes={enabled:{valType:"boolean",dflt:!0,editType:"calc"},groups:{valType:"data_array",dflt:[],editType:"calc"},nameformat:{valType:"string",editType:"calc"},styles:{_isLinkedToArray:"style",target:{valType:"string",editType:"calc"},value:{valType:"any",dflt:{},editType:"calc",_compareAsJSON:!0},editType:"calc"},editType:"calc"};I.supplyDefaults=function(a,h,g){h={};if(!r.coerce(a,h,I.attributes,"enabled",void 0))return h;r.coerce(a,h,I.attributes,
"groups",void 0);r.coerce(a,h,I.attributes,"nameformat",1<g._dataLength?"%{group} (%{trace})":"%{group}");g=a.styles;var n=h.styles=[];if(g)for(a=0;a<g.length;a++){var p=n[a]={};r.coerce(g[a],n[a],I.attributes.styles,"target");var d=r.coerce(g[a],n[a],I.attributes.styles,"value");r.isPlainObject(d)?p.value=r.extendDeep({},d):d&&delete p.value}return h};I.transform=function(a,h){var g,n=[];for(g=0;g<a.length;g++){var p=void 0,d;var e=a[g];var f=h.transform;var k=h.transformIndex;var t=e.transforms[k].groups,
v=l(e.transforms,f);if(r.isArrayOrTypedArray(t)&&0!==t.length){var w=r.filterUnique(t),y=Array(w.length),B=t.length,A=q.findArrayAttributes(e),z=f.styles||[],E={};for(d=0;d<z.length;d++)E[z[d].target]=z[d].value;f.styles&&(p=r.keyedContainer(f,"styles","target","value.name"));z={};var C={};for(d=0;d<w.length;d++){var u=w[d];z[u]=d;C[u]=0;var D=y[d]=r.extendDeepNoArrays({},e);D._group=u;D.transforms[k]._indexToPoints={};var G=null;p&&(G=p.get(u));D.name=G||""===G?G:r.templateString(f.nameformat,{trace:e.name,
group:u});G=D.transforms;D.transforms=[];for(u=0;u<G.length;u++)D.transforms[u]=r.extendDeepNoArrays({},G[u]);for(u=0;u<A.length;u++)r.nestedProperty(D,A[u]).set([])}for(d=0;d<A.length;d++){f=A[d];u=0;for(p=[];u<w.length;u++)p[u]=r.nestedProperty(y[u],f).get();f=r.nestedProperty(e,f).get();for(u=0;u<B;u++)p[z[t[u]]].push(f[u])}for(u=0;u<B;u++)D=y[z[t[u]]],D.transforms[k]._indexToPoints[C[t[u]]]=v(u),C[t[u]]++;for(d=0;d<w.length;d++)u=w[d],D=y[d],m.clearExpandedTraceDefaultColors(D),r.extendDeepNoArrays(D,
E[u]||{});e=y}else e=[e];for(k=0;k<e.length;k++)n.push(e[k])}return n}},{"../lib":778,"../plot_api/plot_schema":816,"../plots/plots":891,"./helpers":1368}],1368:[function(b,N,I){I.pointsAccessorFunction=function(r,q){for(var m,l,a=0;a<r.length;a++){m=r[a];if(m===q)break;m._indexToPoints&&!1!==m.enabled&&(l=m._indexToPoints)}return l?function(h){return l[h]}:function(h){return[h]}}},{}],1369:[function(b,N,I){function r(h,g){switch(h.order){case "ascending":return function(n,p){n=g(n.v);p=g(p.v);return n===
a?1:p===a?-1:n-p};case "descending":return function(n,p){n=g(n.v);p=g(p.v);return n===a?1:p===a?-1:p-n}}}var q=b("../lib"),m=b("../plots/cartesian/axes"),l=b("./helpers").pointsAccessorFunction,a=b("../constants/numerical").BADNUM;I.moduleType="transform";I.name="sort";I.attributes={enabled:{valType:"boolean",dflt:!0,editType:"calc"},target:{valType:"string",strict:!0,noBlank:!0,arrayOk:!0,dflt:"x",editType:"calc"},order:{valType:"enumerated",values:["ascending","descending"],dflt:"ascending",editType:"calc"},
editType:"calc"};I.supplyDefaults=function(h){var g={};q.coerce(h,g,I.attributes,"enabled",void 0)&&(q.coerce(h,g,I.attributes,"target",void 0),q.coerce(h,g,I.attributes,"order",void 0));return g};I.calcTransform=function(h,g,n){if(n.enabled){var p=q.getTargetArray(g,n);if(p){var d=n.target,e=p.length;g._length&&(e=Math.min(e,g._length));var f=g._arrayAttrs;d=m.getDataToCoordFunc(h,g,d,p);var k=e,t=Array(k);h=Array(k);var v;for(v=0;v<k;v++)t[v]={v:p[v],i:v};t.sort(r(n,d));for(v=0;v<k;v++)h[v]=t[v].i;
p=l(g.transforms,n);d={};for(k=0;k<f.length;k++){v=q.nestedProperty(g,f[k]);var w=v.get(),y=Array(e);for(t=0;t<e;t++)y[t]=w[h[t]];v.set(y)}for(t=0;t<e;t++)d[t]=p(h[t]);n._indexToPoints=d;g._length=e}}}},{"../constants/numerical":753,"../lib":778,"../plots/cartesian/axes":828,"./helpers":1368}],1370:[function(b,N,I){I.version="1.58.4"},{}]},{},[26])(26)})};
shadow$provide[14]=function(od,Fd,Zd,ed){function b(N){return N&&N.__esModule?N:{"default":N}}Object.defineProperty(ed,"__esModule",{value:!0});ed["default"]=void 0;od=b(Fd(12));Fd=b(Fd(13));Fd=(0,od["default"])(Fd["default"]);ed["default"]=Fd};
shadow$provide[15]=function(od,Fd,Zd,ed){function b(T,O){var U=T.length;T.push(O);a:for(;;){var S=U-1>>>1,X=T[S];if(void 0!==X&&0<r(X,O))T[S]=O,T[U]=X,U=S;else break a}}function N(T){T=T[0];return void 0===T?null:T}function I(T){var O=T[0];if(void 0!==O){var U=T.pop();if(U!==O){T[0]=U;var S=0,X=T.length;a:for(;S<X;){var ba=2*(S+1)-1,ca=T[ba],ia=ba+1,ja=T[ia];if(void 0!==ca&&0>r(ca,U))void 0!==ja&&0>r(ja,ca)?(T[S]=ja,T[ia]=U,S=ia):(T[S]=ca,T[ba]=U,S=ba);else if(void 0!==ja&&0>r(ja,U))T[S]=ja,T[ia]=
U,S=ia;else break a}}return O}return null}function r(T,O){var U=T.sortIndex-O.sortIndex;return 0!==U?U:T.id-O.id}function q(T){for(var O=N(J);null!==O;){if(null===O.callback)I(J);else if(O.startTime<=T)I(J),O.sortIndex=O.expirationTime,b(G,O);else break;O=N(J)}}function m(T){P=!1;q(T);if(!M)if(null!==N(G))M=!0,d(l);else{var O=N(J);null!==O&&e(m,O.startTime-T)}}function l(T,O){M=!1;P&&(P=!1,f());Q=!0;var U=H;try{q(O);for(K=N(G);null!==K&&(!(K.expirationTime>O)||T&&!k());){var S=K.callback;if(null!==
S){K.callback=null;H=K.priorityLevel;var X=S(K.expirationTime<=O);O=ed.unstable_now();"function"===typeof X?K.callback=X:K===N(G)&&I(G);q(O)}else I(G);K=N(G)}if(null!==K)var ba=!0;else{var ca=N(J);null!==ca&&e(m,ca.startTime-O);ba=!1}return ba}finally{K=null,H=U,Q=!1}}function a(T){switch(T){case 1:return-1;case 2:return 250;case 5:return 1073741823;case 4:return 1E4;default:return 5E3}}if("undefined"===typeof window||"function"!==typeof MessageChannel){var h=null,g=null,n=function(){if(null!==h)try{var T=
ed.unstable_now();h(!0,T);h=null}catch(O){throw setTimeout(n,0),O;}},p=Date.now();ed.unstable_now=function(){return Date.now()-p};var d=function(T){null!==h?setTimeout(d,0,T):(h=T,setTimeout(n,0))};var e=function(T,O){g=setTimeout(T,O)};var f=function(){clearTimeout(g)};var k=function(){return!1};od=ed.unstable_forceFrameRate=function(){}}else{var t=window.performance,v=window.Date,w=window.setTimeout,y=window.clearTimeout;"undefined"!==typeof console&&(od=window.cancelAnimationFrame,"function"!==
typeof window.requestAnimationFrame&&console.error("This browser doesn't support requestAnimationFrame. Make sure that you load a polyfill in older browsers. https://fb.me/react-polyfills"),"function"!==typeof od&&console.error("This browser doesn't support cancelAnimationFrame. Make sure that you load a polyfill in older browsers. https://fb.me/react-polyfills"));if("object"===typeof t&&"function"===typeof t.now)ed.unstable_now=function(){return t.now()};else{var B=v.now();ed.unstable_now=function(){return v.now()-
B}}var A=!1,z=null,E=-1,C=5,u=0;k=function(){return ed.unstable_now()>=u};od=function(){};ed.unstable_forceFrameRate=function(T){0>T||125<T?console.error("forceFrameRate takes a positive int between 0 and 125, forcing framerates higher than 125 fps is not unsupported"):C=0<T?Math.floor(1E3/T):5};Fd=new MessageChannel;var D=Fd.port2;Fd.port1.onmessage=function(){if(null!==z){var T=ed.unstable_now();u=T+C;try{z(!0,T)?D.postMessage(null):(A=!1,z=null)}catch(O){throw D.postMessage(null),O;}}else A=!1};
d=function(T){z=T;A||(A=!0,D.postMessage(null))};e=function(T,O){E=w(function(){T(ed.unstable_now())},O)};f=function(){y(E);E=-1}}var G=[],J=[],L=1,K=null,H=3,Q=!1,M=!1,P=!1;ed.unstable_IdlePriority=5;ed.unstable_ImmediatePriority=1;ed.unstable_LowPriority=4;ed.unstable_NormalPriority=3;ed.unstable_Profiling=null;ed.unstable_UserBlockingPriority=2;ed.unstable_cancelCallback=function(T){T.callback=null};ed.unstable_continueExecution=function(){M||Q||(M=!0,d(l))};ed.unstable_getCurrentPriorityLevel=
function(){return H};ed.unstable_getFirstCallbackNode=function(){return N(G)};ed.unstable_next=function(T){switch(H){case 1:case 2:case 3:var O=3;break;default:O=H}var U=H;H=O;try{return T()}finally{H=U}};ed.unstable_pauseExecution=function(){};ed.unstable_requestPaint=od;ed.unstable_runWithPriority=function(T,O){switch(T){case 1:case 2:case 3:case 4:case 5:break;default:T=3}var U=H;H=T;try{return O()}finally{H=U}};ed.unstable_scheduleCallback=function(T,O,U){var S=ed.unstable_now();if("object"===
typeof U&&null!==U){var X=U.delay;X="number"===typeof X&&0<X?S+X:S;U="number"===typeof U.timeout?U.timeout:a(T)}else U=a(T),X=S;U=X+U;T={id:L++,callback:O,priorityLevel:T,startTime:X,expirationTime:U,sortIndex:-1};X>S?(T.sortIndex=X,b(J,T),null===N(G)&&T===N(J)&&(P?f():P=!0,e(m,X-S))):(T.sortIndex=U,b(G,T),M||Q||(M=!0,d(l)));return T};ed.unstable_shouldYield=function(){var T=ed.unstable_now();q(T);var O=N(G);return O!==K&&null!==K&&null!==O&&null!==O.callback&&O.startTime<=T&&O.expirationTime<K.expirationTime||
k()};ed.unstable_wrapCallback=function(T){var O=H;return function(){var U=H;H=O;try{return T.apply(this,arguments)}finally{H=U}}}};
shadow$provide[17]=function(od,Fd,Zd,ed){Zd.exports=Fd(15)};
shadow$provide[18]=function(od,Fd,Zd,ed){function b(Y){for(var c="https://reactjs.org/docs/error-decoder.html?invariant\x3d"+Y,x=1;x<arguments.length;x++)c+="\x26args[]\x3d"+encodeURIComponent(arguments[x]);return"Minified React error #"+Y+"; visit "+c+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function N(Y,c,x,F,V,fa,ra,ya,Ha){var Pa=Array.prototype.slice.call(arguments,3);try{c.apply(x,Pa)}catch(Ya){this.onError(Ya)}}function I(Y,
c,x,F,V,fa,ra,ya,Ha){jd=!1;Ic=null;N.apply(yd,arguments)}function r(Y,c,x,F,V,fa,ra,ya,Ha){I.apply(this,arguments);if(jd){if(jd){var Pa=Ic;jd=!1;Ic=null}else throw Error(b(198));ld||(ld=!0,id=Pa)}}function q(Y,c,x){var F=Y.type||"unknown-event";Y.currentTarget=ie(x);r(F,c,void 0,Y);Y.currentTarget=null}function m(){if(ge)for(var Y in Ee){var c=Ee[Y],x=ge.indexOf(Y);if(!(-1<x))throw Error(b(96,Y));if(!Ge[x]){if(!c.extractEvents)throw Error(b(97,Y));Ge[x]=c;x=c.eventTypes;for(var F in x){var V=void 0,
fa=x[F],ra=c,ya=F;if(Be.hasOwnProperty(ya))throw Error(b(99,ya));Be[ya]=fa;var Ha=fa.phasedRegistrationNames;if(Ha){for(V in Ha)Ha.hasOwnProperty(V)&&l(Ha[V],ra,ya);V=!0}else fa.registrationName?(l(fa.registrationName,ra,ya),V=!0):V=!1;if(!V)throw Error(b(98,F,Y));}}}}function l(Y,c,x){if(Qd[Y])throw Error(b(100,Y));Qd[Y]=c;qe[Y]=c.eventTypes[x].dependencies}function a(Y){var c=!1,x;for(x in Y)if(Y.hasOwnProperty(x)){var F=Y[x];if(!Ee.hasOwnProperty(x)||Ee[x]!==F){if(Ee[x])throw Error(b(102,x));Ee[x]=
F;c=!0}}c&&m()}function h(Y){if(Y=ud(Y)){if("function"!==typeof ze)throw Error(b(280));var c=Y.stateNode;c&&(c=zd(c),ze(Y.stateNode,Y.type,c))}}function g(Y){Te?nf?nf.push(Y):nf=[Y]:Te=Y}function n(){if(Te){var Y=Te,c=nf;nf=Te=null;h(Y);if(c)for(Y=0;Y<c.length;Y++)h(c[Y])}}function p(Y,c){return Y(c)}function d(Y,c,x,F,V){return Y(c,x,F,V)}function e(){}function f(){if(null!==Te||null!==nf)e(),n()}function k(Y,c,x){if(df)return Y(c,x);df=!0;try{return rf(Y,c,x)}finally{df=!1,f()}}function t(Y){if(Pg.call(Vf,
Y))return!0;if(Pg.call(Ei,Y))return!1;if(Rf.test(Y))return Vf[Y]=!0;Ei[Y]=!0;return!1}function v(Y,c,x,F){if(null!==x&&0===x.type)return!1;switch(typeof c){case "function":case "symbol":return!0;case "boolean":if(F)return!1;if(null!==x)return!x.acceptsBooleans;Y=Y.toLowerCase().slice(0,5);return"data-"!==Y&&"aria-"!==Y;default:return!1}}function w(Y,c,x,F){if(null===c||"undefined"===typeof c||v(Y,c,x,F))return!0;if(F)return!1;if(null!==x)switch(x.type){case 3:return!c;case 4:return!1===c;case 5:return isNaN(c);
case 6:return isNaN(c)||1>c}return!1}function y(Y,c,x,F,V,fa){this.acceptsBooleans=2===c||3===c||4===c;this.attributeName=F;this.attributeNamespace=V;this.mustUseProperty=x;this.propertyName=Y;this.type=c;this.sanitizeURL=fa}function B(Y){return Y[1].toUpperCase()}function A(Y,c,x,F){var V=Af.hasOwnProperty(c)?Af[c]:null;(null!==V?0===V.type:F?0:2<c.length&&("o"===c[0]||"O"===c[0])&&("n"===c[1]||"N"===c[1]))||(w(c,x,V,F)&&(x=null),F||null===V?t(c)&&(null===x?Y.removeAttribute(c):Y.setAttribute(c,
""+x)):V.mustUseProperty?Y[V.propertyName]=null===x?3===V.type?!1:"":x:(c=V.attributeName,F=V.attributeNamespace,null===x?Y.removeAttribute(c):(V=V.type,x=3===V||4===V&&!0===x?"":""+x,F?Y.setAttributeNS(F,c,x):Y.setAttribute(c,x))))}function z(Y){if(null===Y||"object"!==typeof Y)return null;Y=Fi&&Y[Fi]||Y["@@iterator"];return"function"===typeof Y?Y:null}function E(Y){if(-1===Y._status){Y._status=0;var c=Y._ctor;c=c();Y._result=c;c.then(function(x){0===Y._status&&(x=x.default,Y._status=1,Y._result=
x)},function(x){0===Y._status&&(Y._status=2,Y._result=x)})}}function C(Y){if(null==Y)return null;if("function"===typeof Y)return Y.displayName||Y.name||null;if("string"===typeof Y)return Y;switch(Y){case of:return"Fragment";case jg:return"Portal";case Zh:return"Profiler";case pj:return"StrictMode";case Yi:return"Suspense";case Nf:return"SuspenseList"}if("object"===typeof Y)switch(Y.$$typeof){case Ok:return"Context.Consumer";case Db:return"Context.Provider";case Bf:var c=Y.render;c=c.displayName||
c.name||"";return Y.displayName||(""!==c?"ForwardRef("+c+")":"ForwardRef");case $h:return C(Y.type);case Zi:return C(Y.render);case ai:if(Y=1===Y._status?Y._result:null)return C(Y)}return null}function u(Y){var c="";do{a:switch(Y.tag){case 3:case 4:case 6:case 7:case 10:case 9:var x="";break a;default:var F=Y._debugOwner,V=Y._debugSource,fa=C(Y.type);x=null;F&&(x=C(F.type));F=fa;fa="";V?fa=" (at "+V.fileName.replace(Qg,"")+":"+V.lineNumber+")":x&&(fa=" (created by "+x+")");x="\n    in "+(F||"Unknown")+
fa}c+=x;Y=Y.return}while(Y);return c}function D(Y){switch(typeof Y){case "boolean":case "number":case "object":case "string":case "undefined":return Y;default:return""}}function G(Y){var c=Y.type;return(Y=Y.nodeName)&&"input"===Y.toLowerCase()&&("checkbox"===c||"radio"===c)}function J(Y){var c=G(Y)?"checked":"value",x=Object.getOwnPropertyDescriptor(Y.constructor.prototype,c),F=""+Y[c];if(!Y.hasOwnProperty(c)&&"undefined"!==typeof x&&"function"===typeof x.get&&"function"===typeof x.set){var V=x.get,
fa=x.set;Object.defineProperty(Y,c,{configurable:!0,get:function(){return V.call(this)},set:function(ra){F=""+ra;fa.call(this,ra)}});Object.defineProperty(Y,c,{enumerable:x.enumerable});return{getValue:function(){return F},setValue:function(ra){F=""+ra},stopTracking:function(){Y._valueTracker=null;delete Y[c]}}}}function L(Y){Y._valueTracker||(Y._valueTracker=J(Y))}function K(Y){if(!Y)return!1;var c=Y._valueTracker;if(!c)return!0;var x=c.getValue(),F="";Y&&(F=G(Y)?Y.checked?"true":"false":Y.value);
Y=F;return Y!==x?(c.setValue(Y),!0):!1}function H(Y,c){var x=c.checked;return Dc({},c,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:null!=x?x:Y._wrapperState.initialChecked})}function Q(Y,c){var x=null==c.defaultValue?"":c.defaultValue,F=null!=c.checked?c.checked:c.defaultChecked;x=D(null!=c.value?c.value:x);Y._wrapperState={initialChecked:F,initialValue:x,controlled:"checkbox"===c.type||"radio"===c.type?null!=c.checked:null!=c.value}}function M(Y,c){c=c.checked;null!=c&&A(Y,"checked",
c,!1)}function P(Y,c){M(Y,c);var x=D(c.value),F=c.type;if(null!=x)if("number"===F){if(0===x&&""===Y.value||Y.value!=x)Y.value=""+x}else Y.value!==""+x&&(Y.value=""+x);else if("submit"===F||"reset"===F){Y.removeAttribute("value");return}c.hasOwnProperty("value")?O(Y,c.type,x):c.hasOwnProperty("defaultValue")&&O(Y,c.type,D(c.defaultValue));null==c.checked&&null!=c.defaultChecked&&(Y.defaultChecked=!!c.defaultChecked)}function T(Y,c,x){if(c.hasOwnProperty("value")||c.hasOwnProperty("defaultValue")){var F=
c.type;if(!("submit"!==F&&"reset"!==F||void 0!==c.value&&null!==c.value))return;c=""+Y._wrapperState.initialValue;x||c===Y.value||(Y.value=c);Y.defaultValue=c}x=Y.name;""!==x&&(Y.name="");Y.defaultChecked=!!Y._wrapperState.initialChecked;""!==x&&(Y.name=x)}function O(Y,c,x){if("number"!==c||Y.ownerDocument.activeElement!==Y)null==x?Y.defaultValue=""+Y._wrapperState.initialValue:Y.defaultValue!==""+x&&(Y.defaultValue=""+x)}function U(Y){var c="";dc.Children.forEach(Y,function(x){null!=x&&(c+=x)});
return c}function S(Y,c){Y=Dc({children:void 0},c);if(c=U(c.children))Y.children=c;return Y}function X(Y,c,x,F){Y=Y.options;if(c){c={};for(var V=0;V<x.length;V++)c["$"+x[V]]=!0;for(x=0;x<Y.length;x++)V=c.hasOwnProperty("$"+Y[x].value),Y[x].selected!==V&&(Y[x].selected=V),V&&F&&(Y[x].defaultSelected=!0)}else{x=""+D(x);c=null;for(V=0;V<Y.length;V++){if(Y[V].value===x){Y[V].selected=!0;F&&(Y[V].defaultSelected=!0);return}null!==c||Y[V].disabled||(c=Y[V])}null!==c&&(c.selected=!0)}}function ba(Y,c){if(null!=
c.dangerouslySetInnerHTML)throw Error(b(91));return Dc({},c,{value:void 0,defaultValue:void 0,children:""+Y._wrapperState.initialValue})}function ca(Y,c){var x=c.value;if(null==x){x=c.children;c=c.defaultValue;if(null!=x){if(null!=c)throw Error(b(92));if(Array.isArray(x)){if(!(1>=x.length))throw Error(b(93));x=x[0]}c=x}null==c&&(c="");x=c}Y._wrapperState={initialValue:D(x)}}function ia(Y,c){var x=D(c.value),F=D(c.defaultValue);null!=x&&(x=""+x,x!==Y.value&&(Y.value=x),null==c.defaultValue&&Y.defaultValue!==
x&&(Y.defaultValue=x));null!=F&&(Y.defaultValue=""+F)}function ja(Y){var c=Y.textContent;c===Y._wrapperState.initialValue&&""!==c&&null!==c&&(Y.value=c)}function la(Y){switch(Y){case "svg":return"http://www.w3.org/2000/svg";case "math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function da(Y,c){return null==Y||"http://www.w3.org/1999/xhtml"===Y?la(c):"http://www.w3.org/2000/svg"===Y&&"foreignObject"===c?"http://www.w3.org/1999/xhtml":Y}function oa(Y,c){if(c){var x=
Y.firstChild;if(x&&x===Y.lastChild&&3===x.nodeType){x.nodeValue=c;return}}Y.textContent=c}function sa(Y,c){var x={};x[Y.toLowerCase()]=c.toLowerCase();x["Webkit"+Y]="webkit"+c;x["Moz"+Y]="moz"+c;return x}function ma(Y){if(Wg[Y])return Wg[Y];if(!ph[Y])return Y;var c=ph[Y],x;for(x in c)if(c.hasOwnProperty(x)&&x in pk)return Wg[Y]=c[x];return Y}function qa(Y){var c=Hh.get(Y);void 0===c&&(c=new Map,Hh.set(Y,c));return c}function pa(Y){var c=Y,x=Y;if(Y.alternate)for(;c.return;)c=c.return;else{Y=c;do c=
Y,0!==(c.effectTag&1026)&&(x=c.return),Y=c.return;while(Y)}return 3===c.tag?x:null}function na(Y){if(13===Y.tag){var c=Y.memoizedState;null===c&&(Y=Y.alternate,null!==Y&&(c=Y.memoizedState));if(null!==c)return c.dehydrated}return null}function ka(Y){if(pa(Y)!==Y)throw Error(b(188));}function ua(Y){var c=Y.alternate;if(!c){c=pa(Y);if(null===c)throw Error(b(188));return c!==Y?null:Y}for(var x=Y,F=c;;){var V=x.return;if(null===V)break;var fa=V.alternate;if(null===fa){F=V.return;if(null!==F){x=F;continue}break}if(V.child===
fa.child){for(fa=V.child;fa;){if(fa===x)return ka(V),Y;if(fa===F)return ka(V),c;fa=fa.sibling}throw Error(b(188));}if(x.return!==F.return)x=V,F=fa;else{for(var ra=!1,ya=V.child;ya;){if(ya===x){ra=!0;x=V;F=fa;break}if(ya===F){ra=!0;F=V;x=fa;break}ya=ya.sibling}if(!ra){for(ya=fa.child;ya;){if(ya===x){ra=!0;x=fa;F=V;break}if(ya===F){ra=!0;F=fa;x=V;break}ya=ya.sibling}if(!ra)throw Error(b(189));}}if(x.alternate!==F)throw Error(b(190));}if(3!==x.tag)throw Error(b(188));return x.stateNode.current===x?Y:
c}function va(Y){Y=ua(Y);if(!Y)return null;for(var c=Y;;){if(5===c.tag||6===c.tag)return c;if(c.child)c.child.return=c,c=c.child;else{if(c===Y)break;for(;!c.sibling;){if(!c.return||c.return===Y)return null;c=c.return}c.sibling.return=c.return;c=c.sibling}}return null}function Ca(Y,c){if(null==c)throw Error(b(30));if(null==Y)return c;if(Array.isArray(Y)){if(Array.isArray(c))return Y.push.apply(Y,c),Y;Y.push(c);return Y}return Array.isArray(c)?[Y].concat(c):[Y,c]}function Ma(Y,c,x){Array.isArray(Y)?
Y.forEach(c,x):Y&&c.call(x,Y)}function Ua(Y){if(Y){var c=Y._dispatchListeners,x=Y._dispatchInstances;if(Array.isArray(c))for(var F=0;F<c.length&&!Y.isPropagationStopped();F++)q(Y,c[F],x[F]);else c&&q(Y,c,x);Y._dispatchListeners=null;Y._dispatchInstances=null;Y.isPersistent()||Y.constructor.release(Y)}}function eb(Y){null!==Y&&($f=Ca($f,Y));Y=$f;$f=null;if(Y){Ma(Y,Ua);if($f)throw Error(b(95));if(ld)throw Y=id,ld=!1,id=null,Y;}}function fb(Y){Y=Y.target||Y.srcElement||window;Y.correspondingUseElement&&
(Y=Y.correspondingUseElement);return 3===Y.nodeType?Y.parentNode:Y}function nb(Y){if(!Ne)return!1;Y="on"+Y;var c=Y in document;c||(c=document.createElement("div"),c.setAttribute(Y,"return;"),c="function"===typeof c[Y]);return c}function cb(Y){Y.topLevelType=null;Y.nativeEvent=null;Y.targetInst=null;Y.ancestors.length=0;10>ji.length&&ji.push(Y)}function $a(Y,c,x,F){if(ji.length){var V=ji.pop();V.topLevelType=Y;V.eventSystemFlags=F;V.nativeEvent=c;V.targetInst=x;return V}return{topLevelType:Y,eventSystemFlags:F,
nativeEvent:c,targetInst:x,ancestors:[]}}function jb(Y){var c=Y.targetInst,x=c;do{if(!x){Y.ancestors.push(x);break}var F=x;if(3===F.tag)F=F.stateNode.containerInfo;else{for(;F.return;)F=F.return;F=3!==F.tag?null:F.stateNode.containerInfo}if(!F)break;c=x.tag;5!==c&&6!==c||Y.ancestors.push(x);x=gb(F)}while(x);for(x=0;x<Y.ancestors.length;x++){c=Y.ancestors[x];var V=fb(Y.nativeEvent);F=Y.topLevelType;var fa=Y.nativeEvent,ra=Y.eventSystemFlags;0===x&&(ra|=64);for(var ya=null,Ha=0;Ha<Ge.length;Ha++){var Pa=
Ge[Ha];Pa&&(Pa=Pa.extractEvents(F,c,fa,V,ra))&&(ya=Ca(ya,Pa))}eb(ya)}}function pb(Y,c,x){if(!x.has(Y)){switch(Y){case "scroll":Ba(c,"scroll",!0);break;case "focus":case "blur":Ba(c,"focus",!0);Ba(c,"blur",!0);x.set("blur",null);x.set("focus",null);break;case "cancel":case "close":nb(Y)&&Ba(c,Y,!0);break;case "invalid":case "submit":case "reset":break;default:-1===Xg.indexOf(Y)&&sb(Y,c)}x.set(Y,null)}}function xa(Y,c){var x=qa(c);zk.forEach(function(F){pb(F,c,x)});yk.forEach(function(F){pb(F,c,x)})}
function Ea(Y,c,x,F,V){return{blockedOn:Y,topLevelType:c,eventSystemFlags:x|32,nativeEvent:V,container:F}}function Ia(Y,c){switch(Y){case "focus":case "blur":lf=null;break;case "dragenter":case "dragleave":qh=null;break;case "mouseover":case "mouseout":Ze=null;break;case "pointerover":case "pointerout":je.delete(c.pointerId);break;case "gotpointercapture":case "lostpointercapture":We.delete(c.pointerId)}}function Oa(Y,c,x,F,V,fa){if(null===Y||Y.nativeEvent!==fa)return Y=Ea(c,x,F,V,fa),null!==c&&(c=
vb(c),null!==c&&ej(c)),Y;Y.eventSystemFlags|=F;return Y}function bb(Y,c,x,F,V){switch(c){case "focus":return lf=Oa(lf,Y,c,x,F,V),!0;case "dragenter":return qh=Oa(qh,Y,c,x,F,V),!0;case "mouseover":return Ze=Oa(Ze,Y,c,x,F,V),!0;case "pointerover":var fa=V.pointerId;je.set(fa,Oa(je.get(fa)||null,Y,c,x,F,V));return!0;case "gotpointercapture":return fa=V.pointerId,We.set(fa,Oa(We.get(fa)||null,Y,c,x,F,V)),!0}return!1}function Xa(Y){var c=gb(Y.target);if(null!==c){var x=pa(c);if(null!==x)if(c=x.tag,13===
c){if(c=na(x),null!==c){Y.blockedOn=c;Uc.unstable_runWithPriority(Y.priority,function(){Tf(x)});return}}else if(3===c&&x.stateNode.hydrate){Y.blockedOn=3===x.tag?x.stateNode.containerInfo:null;return}}Y.blockedOn=null}function tb(Y){if(null!==Y.blockedOn)return!1;var c=Za(Y.topLevelType,Y.eventSystemFlags,Y.container,Y.nativeEvent);if(null!==c){var x=vb(c);null!==x&&ej(x);Y.blockedOn=c;return!1}return!0}function Ka(Y,c,x){tb(Y)&&x.delete(c)}function Ta(){for(ki=!1;0<Yd.length;){var Y=Yd[0];if(null!==
Y.blockedOn){Y=vb(Y.blockedOn);null!==Y&&Ik(Y);break}var c=Za(Y.topLevelType,Y.eventSystemFlags,Y.container,Y.nativeEvent);null!==c?Y.blockedOn=c:Yd.shift()}null!==lf&&tb(lf)&&(lf=null);null!==qh&&tb(qh)&&(qh=null);null!==Ze&&tb(Ze)&&(Ze=null);je.forEach(Ka);We.forEach(Ka)}function Na(Y,c){Y.blockedOn===c&&(Y.blockedOn=null,ki||(ki=!0,Uc.unstable_scheduleCallback(Uc.unstable_NormalPriority,Ta)))}function ib(Y){function c(V){return Na(V,Y)}if(0<Yd.length){Na(Yd[0],Y);for(var x=1;x<Yd.length;x++){var F=
Yd[x];F.blockedOn===Y&&(F.blockedOn=null)}}null!==lf&&Na(lf,Y);null!==qh&&Na(qh,Y);null!==Ze&&Na(Ze,Y);je.forEach(c);We.forEach(c);for(x=0;x<Gi.length;x++)F=Gi[x],F.blockedOn===Y&&(F.blockedOn=null);for(;0<Gi.length&&(x=Gi[0],null===x.blockedOn);)Xa(x),null===x.blockedOn&&Gi.shift()}function qb(Y,c){for(var x=0;x<Y.length;x+=2){var F=Y[x],V=Y[x+1],fa="on"+(V[0].toUpperCase()+V.slice(1));fa={phasedRegistrationNames:{bubbled:fa,captured:fa+"Capture"},dependencies:[F],eventPriority:c};Ii.set(F,c);qj.set(F,
fa);gk[V]=fa}}function sb(Y,c){Ba(c,Y,!1)}function Ba(Y,c,x){var F=Ii.get(c);switch(void 0===F?2:F){case 0:F=Fa.bind(null,c,1,Y);break;case 1:F=La.bind(null,c,1,Y);break;default:F=Va.bind(null,c,1,Y)}x?Y.addEventListener(c,F,!0):Y.addEventListener(c,F,!1)}function Fa(Y,c,x,F){Eg||e();var V=Va,fa=Eg;Eg=!0;try{d(V,Y,c,x,F)}finally{(Eg=fa)||f()}}function La(Y,c,x,F){Xf(rk,Va.bind(null,Y,c,x,F))}function Va(Y,c,x,F){if(Rg)if(0<Yd.length&&-1<zk.indexOf(Y))Y=Ea(null,Y,c,x,F),Yd.push(Y);else{var V=Za(Y,
c,x,F);if(null===V)Ia(Y,F);else if(-1<zk.indexOf(Y))Y=Ea(V,Y,c,x,F),Yd.push(Y);else if(!bb(V,Y,c,x,F)){Ia(Y,F);Y=$a(Y,F,null,c);try{k(jb,Y)}finally{cb(Y)}}}}function Za(Y,c,x,F){x=fb(F);x=gb(x);if(null!==x){var V=pa(x);if(null===V)x=null;else{var fa=V.tag;if(13===fa){x=na(V);if(null!==x)return x;x=null}else if(3===fa){if(V.stateNode.hydrate)return 3===V.tag?V.stateNode.containerInfo:null;x=null}else V!==x&&(x=null)}}Y=$a(Y,F,x,c);try{k(jb,Y)}finally{cb(Y)}return null}function mb(Y,c,x){return null==
c||"boolean"===typeof c||""===c?"":x||"number"!==typeof c||0===c||li.hasOwnProperty(Y)&&li[Y]?(""+c).trim():c+"px"}function ub(Y,c){Y=Y.style;for(var x in c)if(c.hasOwnProperty(x)){var F=0===x.indexOf("--"),V=mb(x,c[x],F);"float"===x&&(x="cssFloat");F?Y.setProperty(x,V):Y[x]=V}}function Pb(Y,c){if(c){if(ak[Y]&&(null!=c.children||null!=c.dangerouslySetInnerHTML))throw Error(b(137,Y,""));if(null!=c.dangerouslySetInnerHTML){if(null!=c.children)throw Error(b(60));if(!("object"===typeof c.dangerouslySetInnerHTML&&
"__html"in c.dangerouslySetInnerHTML))throw Error(b(61));}if(null!=c.style&&"object"!==typeof c.style)throw Error(b(62,""));}}function Kb(Y,c){if(-1===Y.indexOf("-"))return"string"===typeof c.is;switch(Y){case "annotation-xml":case "color-profile":case "font-face":case "font-face-src":case "font-face-uri":case "font-face-format":case "font-face-name":case "missing-glyph":return!1;default:return!0}}function Ob(Y,c){Y=9===Y.nodeType||11===Y.nodeType?Y:Y.ownerDocument;var x=qa(Y);c=qe[c];for(var F=0;F<
c.length;F++)pb(c[F],Y,x)}function Wb(){}function Bc(Y){Y=Y||("undefined"!==typeof document?document:void 0);if("undefined"===typeof Y)return null;try{return Y.activeElement||Y.body}catch(c){return Y.body}}function Kc(Y){for(;Y&&Y.firstChild;)Y=Y.firstChild;return Y}function Nc(Y,c){var x=Kc(Y);Y=0;for(var F;x;){if(3===x.nodeType){F=Y+x.textContent.length;if(Y<=c&&F>=c)return{node:x,offset:c-Y};Y=F}a:{for(;x;){if(x.nextSibling){x=x.nextSibling;break a}x=x.parentNode}x=void 0}x=Kc(x)}}function bd(Y,
c){return Y&&c?Y===c?!0:Y&&3===Y.nodeType?!1:c&&3===c.nodeType?bd(Y,c.parentNode):"contains"in Y?Y.contains(c):Y.compareDocumentPosition?!!(Y.compareDocumentPosition(c)&16):!1:!1}function kb(){for(var Y=window,c=Bc();c instanceof Y.HTMLIFrameElement;){try{var x="string"===typeof c.contentWindow.location.href}catch(F){x=!1}if(x)Y=c.contentWindow;else break;c=Bc(Y.document)}return c}function $b(Y){var c=Y&&Y.nodeName&&Y.nodeName.toLowerCase();return c&&("input"===c&&("text"===Y.type||"search"===Y.type||
"tel"===Y.type||"url"===Y.type||"password"===Y.type)||"textarea"===c||"true"===Y.contentEditable)}function gc(Y,c){switch(Y){case "button":case "input":case "select":case "textarea":return!!c.autoFocus}return!1}function rc(Y,c){return"textarea"===Y||"option"===Y||"noscript"===Y||"string"===typeof c.children||"number"===typeof c.children||"object"===typeof c.dangerouslySetInnerHTML&&null!==c.dangerouslySetInnerHTML&&null!=c.dangerouslySetInnerHTML.__html}function xc(Y){for(;null!=Y;Y=Y.nextSibling){var c=
Y.nodeType;if(1===c||3===c)break}return Y}function Rc(Y){Y=Y.previousSibling;for(var c=0;Y;){if(8===Y.nodeType){var x=Y.data;if(x===ag||x===sj||x===mi){if(0===c)return Y;c--}else x===Xe&&c++}Y=Y.previousSibling}return null}function gb(Y){var c=Y[Yg];if(c)return c;for(var x=Y.parentNode;x;){if(c=x[ee]||x[Yg]){x=c.alternate;if(null!==c.child||null!==x&&null!==x.child)for(Y=Rc(Y);null!==Y;){if(x=Y[Yg])return x;Y=Rc(Y)}return c}Y=x;x=Y.parentNode}return null}function vb(Y){Y=Y[Yg]||Y[ee];return!Y||5!==
Y.tag&&6!==Y.tag&&13!==Y.tag&&3!==Y.tag?null:Y}function Sb(Y){if(5===Y.tag||6===Y.tag)return Y.stateNode;throw Error(b(33));}function ic(Y){return Y[Cd]||null}function ac(Y){do Y=Y.return;while(Y&&5!==Y.tag);return Y?Y:null}function bc(Y,c){var x=Y.stateNode;if(!x)return null;var F=zd(x);if(!F)return null;x=F[c];a:switch(c){case "onClick":case "onClickCapture":case "onDoubleClick":case "onDoubleClickCapture":case "onMouseDown":case "onMouseDownCapture":case "onMouseMove":case "onMouseMoveCapture":case "onMouseUp":case "onMouseUpCapture":case "onMouseEnter":(F=
!F.disabled)||(Y=Y.type,F=!("button"===Y||"input"===Y||"select"===Y||"textarea"===Y));Y=!F;break a;default:Y=!1}if(Y)return null;if(x&&"function"!==typeof x)throw Error(b(231,c,typeof x));return x}function Ub(Y,c,x){if(c=bc(Y,x.dispatchConfig.phasedRegistrationNames[c]))x._dispatchListeners=Ca(x._dispatchListeners,c),x._dispatchInstances=Ca(x._dispatchInstances,Y)}function wb(Y){if(Y&&Y.dispatchConfig.phasedRegistrationNames){for(var c=Y._targetInst,x=[];c;)x.push(c),c=ac(c);for(c=x.length;0<c--;)Ub(x[c],
"captured",Y);for(c=0;c<x.length;c++)Ub(x[c],"bubbled",Y)}}function Lb(Y,c,x){Y&&x&&x.dispatchConfig.registrationName&&(c=bc(Y,x.dispatchConfig.registrationName))&&(x._dispatchListeners=Ca(x._dispatchListeners,c),x._dispatchInstances=Ca(x._dispatchInstances,Y))}function Bb(Y){Y&&Y.dispatchConfig.registrationName&&Lb(Y._targetInst,null,Y)}function Mb(Y){Ma(Y,wb)}function Yb(){if(Ji)return Ji;var Y,c=Ch,x=c.length,F,V="value"in rh?rh.value:rh.textContent,fa=V.length;for(Y=0;Y<x&&c[Y]===V[Y];Y++);var ra=
x-Y;for(F=1;F<=ra&&c[x-F]===V[fa-F];F++);return Ji=V.slice(Y,1<F?1-F:void 0)}function qc(){return!0}function Tc(){return!1}function Yc(Y,c,x,F){this.dispatchConfig=Y;this._targetInst=c;this.nativeEvent=x;Y=this.constructor.Interface;for(var V in Y)Y.hasOwnProperty(V)&&((c=Y[V])?this[V]=c(x):"target"===V?this.target=F:this[V]=x[V]);this.isDefaultPrevented=(null!=x.defaultPrevented?x.defaultPrevented:!1===x.returnValue)?qc:Tc;this.isPropagationStopped=Tc;return this}function ad(Y,c,x,F){if(this.eventPool.length){var V=
this.eventPool.pop();this.call(V,Y,c,x,F);return V}return new this(Y,c,x,F)}function ec(Y){if(!(Y instanceof this))throw Error(b(279));Y.destructor();10>this.eventPool.length&&this.eventPool.push(Y)}function Fc(Y){Y.eventPool=[];Y.getPooled=ad;Y.release=ec}function dd(Y,c){switch(Y){case "keyup":return-1!==hj.indexOf(c.keyCode);case "keydown":return 229!==c.keyCode;case "keypress":case "mousedown":case "blur":return!0;default:return!1}}function Ac(Y){Y=Y.detail;return"object"===typeof Y&&"data"in
Y?Y.data:null}function Jc(Y,c){switch(Y){case "compositionend":return Ac(c);case "keypress":if(32!==c.which)return null;lg=!0;return Jh;case "textInput":return Y=c.data,Y===Jh&&lg?null:Y;default:return null}}function gd(Y,c){if(xg)return"compositionend"===Y||!Uf&&dd(Y,c)?(Y=Yb(),Ji=Ch=rh=null,xg=!1,Y):null;switch(Y){case "paste":return null;case "keypress":if(!(c.ctrlKey||c.altKey||c.metaKey)||c.ctrlKey&&c.altKey){if(c.char&&1<c.char.length)return c.char;if(c.which)return String.fromCharCode(c.which)}return null;
case "compositionend":return Ih&&"ko"!==c.locale?null:c.data;default:return null}}function Vc(Y){var c=Y&&Y.nodeName&&Y.nodeName.toLowerCase();return"input"===c?!!Pi[Y.type]:"textarea"===c?!0:!1}function Gc(Y,c,x){Y=Yc.getPooled(ni.change,Y,c,x);Y.type="change";g(x);Mb(Y);return Y}function pd(Y){eb(Y)}function md(Y){var c=Sb(Y);if(K(c))return Y}function rd(Y,c){if("change"===Y)return c}function re(){yg&&(yg.detachEvent("onpropertychange",Ad),bg=yg=null)}function Ad(Y){if("value"===Y.propertyName&&
md(bg))if(Y=Gc(bg,Y,fb(Y)),Eg)eb(Y);else{Eg=!0;try{p(pd,Y)}finally{Eg=!1,f()}}}function Bd(Y,c,x){"focus"===Y?(re(),yg=c,bg=x,yg.attachEvent("onpropertychange",Ad)):"blur"===Y&&re()}function be(Y){if("selectionchange"===Y||"keyup"===Y||"keydown"===Y)return md(bg)}function le(Y,c){if("click"===Y)return md(c)}function Rd(Y,c){if("input"===Y||"change"===Y)return md(c)}function Fe(Y){var c=this.nativeEvent;return c.getModifierState?c.getModifierState(Y):(Y=Kh[Y])?!!c[Y]:!1}function Je(){return Fe}function Kd(Y,
c){return Y===c&&(0!==Y||1/Y===1/c)||Y!==Y&&c!==c}function Dd(Y,c){if(di(Y,c))return!0;if("object"!==typeof Y||null===Y||"object"!==typeof c||null===c)return!1;var x=Object.keys(Y),F=Object.keys(c);if(x.length!==F.length)return!1;for(F=0;F<x.length;F++)if(!Pk.call(c,x[F])||!di(Y[x[F]],c[x[F]]))return!1;return!0}function we(Y,c){var x=c.window===c?c.document:9===c.nodeType?c:c.ownerDocument;if(Oh||null==bj||bj!==Bc(x))return null;x=bj;"selectionStart"in x&&$b(x)?x={start:x.selectionStart,end:x.selectionEnd}:
(x=(x.ownerDocument&&x.ownerDocument.defaultView||window).getSelection(),x={anchorNode:x.anchorNode,anchorOffset:x.anchorOffset,focusNode:x.focusNode,focusOffset:x.focusOffset});return wh&&Dd(wh,x)?null:(wh=x,Y=Yc.getPooled(Ak.select,xj,Y,c),Y.type="select",Y.target=bj,Mb(Y),Y)}function se(Y){var c=Y.keyCode;"charCode"in Y?(Y=Y.charCode,0===Y&&13===c&&(Y=13)):Y=c;10===Y&&(Y=13);return 32<=Y||13===Y?Y:0}function Xd(Y){0>zj||(Y.current=Rk[zj],Rk[zj]=null,zj--)}function ye(Y,c){zj++;Rk[zj]=Y.current;
Y.current=c}function kf(Y,c){var x=Y.type.contextTypes;if(!x)return ei;var F=Y.stateNode;if(F&&F.__reactInternalMemoizedUnmaskedChildContext===c)return F.__reactInternalMemoizedMaskedChildContext;var V={},fa;for(fa in x)V[fa]=c[fa];F&&(Y=Y.stateNode,Y.__reactInternalMemoizedUnmaskedChildContext=c,Y.__reactInternalMemoizedMaskedChildContext=V);return V}function Qe(Y){Y=Y.childContextTypes;return null!==Y&&void 0!==Y}function pf(){Xd(Sg);Xd(tg)}function ff(Y,c,x){if(tg.current!==ei)throw Error(b(168));
ye(tg,c);ye(Sg,x)}function Vb(Y,c,x){var F=Y.stateNode;Y=c.childContextTypes;if("function"!==typeof F.getChildContext)return x;F=F.getChildContext();for(var V in F)if(!(V in Y))throw Error(b(108,C(c)||"Unknown",V));return Dc({},x,{},F)}function Sc(Y){Y=(Y=Y.stateNode)&&Y.__reactInternalMemoizedMergedChildContext||ei;nh=tg.current;ye(tg,Y);ye(Sg,Sg.current);return!0}function yc(Y,c,x){var F=Y.stateNode;if(!F)throw Error(b(169));x?(Y=Vb(Y,c,nh),F.__reactInternalMemoizedMergedChildContext=Y,Xd(Sg),Xd(tg),
ye(tg,Y)):Xd(Sg);ye(Sg,x)}function kd(){switch(sh()){case Dh:return 99;case Tg:return 98;case wk:return 97;case Nk:return 96;case sg:return 95;default:throw Error(b(332));}}function Od(Y){switch(Y){case 99:return Dh;case 98:return Tg;case 97:return wk;case 96:return Nk;case 95:return sg;default:throw Error(b(332));}}function Td(Y,c){Y=Od(Y);return Xi(Y,c)}function Ld(Y,c,x){Y=Od(Y);return rg(Y,c,x)}function Jd(Y){null===ug?(ug=[Y],Cf=rg(Dh,pe)):ug.push(Y);return Ah}function fe(){if(null!==Cf){var Y=
Cf;Cf=null;ig(Y)}pe()}function pe(){if(!uf&&null!==ug){uf=!0;var Y=0;try{var c=ug;Td(99,function(){for(;Y<c.length;Y++){var x=c[Y];do x=x(!0);while(null!==x)}});ug=null}catch(x){throw null!==ug&&(ug=ug.slice(Y+1)),rg(Dh,fe),x;}finally{uf=!1}}}function Tb(Y,c,x){x/=10;return 1073741821-(((1073741821-Y+c/10)/x|0)+1)*x}function jc(Y,c){if(Y&&Y.defaultProps){c=Dc({},c);Y=Y.defaultProps;for(var x in Y)void 0===c[x]&&(c[x]=Y[x])}return c}function Hc(Y){var c=Aj.current;Xd(Aj);Y.type._context._currentValue=
c}function Wc(Y,c){for(;null!==Y;){var x=Y.alternate;if(Y.childExpirationTime<c)Y.childExpirationTime=c,null!==x&&x.childExpirationTime<c&&(x.childExpirationTime=c);else if(null!==x&&x.childExpirationTime<c)x.childExpirationTime=c;else break;Y=Y.return}}function Lc(Y,c){cj=Y;Rj=Yf=null;Y=Y.dependencies;null!==Y&&null!==Y.firstContext&&(Y.expirationTime>=c&&(fc=!0),Y.firstContext=null)}function Mc(Y,c){if(Rj!==Y&&!1!==c&&0!==c){if("number"!==typeof c||1073741823===c)Rj=Y,c=1073741823;c={context:Y,
observedBits:c,next:null};if(null===Yf){if(null===cj)throw Error(b(308));Yf=c;cj.dependencies={expirationTime:0,firstContext:c,responders:null}}else Yf=Yf.next=c}return Y._currentValue}function Pc(Y){Y.updateQueue={baseState:Y.memoizedState,baseQueue:null,shared:{pending:null},effects:null}}function Cc(Y,c){Y=Y.updateQueue;c.updateQueue===Y&&(c.updateQueue={baseState:Y.baseState,baseQueue:Y.baseQueue,shared:Y.shared,effects:Y.effects})}function oc(Y,c){Y={expirationTime:Y,suspenseConfig:c,tag:0,payload:null,
callback:null,next:null};return Y.next=Y}function sc(Y,c){Y=Y.updateQueue;if(null!==Y){Y=Y.shared;var x=Y.pending;null===x?c.next=c:(c.next=x.next,x.next=c);Y.pending=c}}function tc(Y,c){var x=Y.alternate;null!==x&&Cc(x,Y);Y=Y.updateQueue;x=Y.baseQueue;null===x?(Y.baseQueue=c.next=c,c.next=c):(c.next=x.next,x.next=c)}function hd(Y,c,x,F){var V=Y.updateQueue;fi=!1;var fa=V.baseQueue,ra=V.shared.pending;if(null!==ra){if(null!==fa){var ya=fa.next;fa.next=ra.next;ra.next=ya}fa=ra;V.shared.pending=null;
ya=Y.alternate;null!==ya&&(ya=ya.updateQueue,null!==ya&&(ya.baseQueue=ra))}if(null!==fa){ya=fa.next;var Ha=V.baseState,Pa=0,Ya=null,hb=null,Ab=null;if(null!==ya){var Fb=ya;do{ra=Fb.expirationTime;if(ra<F){var Jb={expirationTime:Fb.expirationTime,suspenseConfig:Fb.suspenseConfig,tag:Fb.tag,payload:Fb.payload,callback:Fb.callback,next:null};null===Ab?(hb=Ab=Jb,Ya=Ha):Ab=Ab.next=Jb;ra>Pa&&(Pa=ra)}else{null!==Ab&&(Ab=Ab.next={expirationTime:1073741823,suspenseConfig:Fb.suspenseConfig,tag:Fb.tag,payload:Fb.payload,
callback:Fb.callback,next:null});Ci(ra,Fb.suspenseConfig);a:{var Rb=Y,rb=Fb;ra=c;Jb=x;switch(rb.tag){case 1:Rb=rb.payload;if("function"===typeof Rb){Ha=Rb.call(Jb,Ha,ra);break a}Ha=Rb;break a;case 3:Rb.effectTag=Rb.effectTag&-4097|64;case 0:Rb=rb.payload;ra="function"===typeof Rb?Rb.call(Jb,Ha,ra):Rb;if(null===ra||void 0===ra)break a;Ha=Dc({},Ha,ra);break a;case 2:fi=!0}}null!==Fb.callback&&(Y.effectTag|=32,ra=V.effects,null===ra?V.effects=[Fb]:ra.push(Fb))}Fb=Fb.next;if(null===Fb||Fb===ya)if(ra=
V.shared.pending,null===ra)break;else Fb=fa.next=ra.next,ra.next=ya,V.baseQueue=fa=ra,V.shared.pending=null}while(1)}null===Ab?Ya=Ha:Ab.next=hb;V.baseState=Ya;V.baseQueue=Ab;zh(Pa);Y.expirationTime=Pa;Y.memoizedState=Ha}}function qd(Y,c,x){Y=c.effects;c.effects=null;if(null!==Y)for(c=0;c<Y.length;c++){var F=Y[c],V=F.callback;if(null!==V){F.callback=null;F=V;V=x;if("function"!==typeof F)throw Error(b(191,F));F.call(V)}}}function td(Y,c,x,F){c=Y.memoizedState;x=x(F,c);x=null===x||void 0===x?c:Dc({},
c,x);Y.memoizedState=x;0===Y.expirationTime&&(Y.updateQueue.baseState=x)}function wd(Y,c,x,F,V,fa,ra){Y=Y.stateNode;return"function"===typeof Y.shouldComponentUpdate?Y.shouldComponentUpdate(F,fa,ra):c.prototype&&c.prototype.isPureReactComponent?!Dd(x,F)||!Dd(V,fa):!0}function sd(Y,c,x){var F=!1,V=ei,fa=c.contextType;"object"===typeof fa&&null!==fa?fa=Mc(fa):(V=Qe(c)?nh:tg.current,F=c.contextTypes,fa=(F=null!==F&&void 0!==F)?kf(Y,V):ei);c=new c(x,fa);Y.memoizedState=null!==c.state&&void 0!==c.state?
c.state:null;c.updater=Sj;Y.stateNode=c;c._reactInternalFiber=Y;F&&(Y=Y.stateNode,Y.__reactInternalMemoizedUnmaskedChildContext=V,Y.__reactInternalMemoizedMaskedChildContext=fa);return c}function xe(Y,c,x,F){Y=c.state;"function"===typeof c.componentWillReceiveProps&&c.componentWillReceiveProps(x,F);"function"===typeof c.UNSAFE_componentWillReceiveProps&&c.UNSAFE_componentWillReceiveProps(x,F);c.state!==Y&&Sj.enqueueReplaceState(c,c.state,null)}function ue(Y,c,x,F){var V=Y.stateNode;V.props=x;V.state=
Y.memoizedState;V.refs=Dk;Pc(Y);var fa=c.contextType;"object"===typeof fa&&null!==fa?V.context=Mc(fa):(fa=Qe(c)?nh:tg.current,V.context=kf(Y,fa));hd(Y,x,V,F);V.state=Y.memoizedState;fa=c.getDerivedStateFromProps;"function"===typeof fa&&(td(Y,c,fa,x),V.state=Y.memoizedState);"function"===typeof c.getDerivedStateFromProps||"function"===typeof V.getSnapshotBeforeUpdate||"function"!==typeof V.UNSAFE_componentWillMount&&"function"!==typeof V.componentWillMount||(c=V.state,"function"===typeof V.componentWillMount&&
V.componentWillMount(),"function"===typeof V.UNSAFE_componentWillMount&&V.UNSAFE_componentWillMount(),c!==V.state&&Sj.enqueueReplaceState(V,V.state,null),hd(Y,x,V,F),V.state=Y.memoizedState);"function"===typeof V.componentDidMount&&(Y.effectTag|=4)}function Le(Y,c,x){Y=x.ref;if(null!==Y&&"function"!==typeof Y&&"object"!==typeof Y){if(x._owner){if(x=x._owner){if(1!==x.tag)throw Error(b(309));var F=x.stateNode}if(!F)throw Error(b(147,Y));var V=""+Y;if(null!==c&&null!==c.ref&&"function"===typeof c.ref&&
c.ref._stringRef===V)return c.ref;c=function(fa){var ra=F.refs;ra===Dk&&(ra=F.refs={});null===fa?delete ra[V]:ra[V]=fa};c._stringRef=V;return c}if("string"!==typeof Y)throw Error(b(284));if(!x._owner)throw Error(b(290,Y));}return Y}function oe(Y,c){if("textarea"!==Y.type)throw Error(b(31,"[object Object]"===Object.prototype.toString.call(c)?"object with keys {"+Object.keys(c).join(", ")+"}":c,""));}function Re(Y){function c(rb,zb){if(Y){var hc=rb.lastEffect;null!==hc?(hc.nextEffect=zb,rb.lastEffect=
zb):rb.firstEffect=rb.lastEffect=zb;zb.nextEffect=null;zb.effectTag=8}}function x(rb,zb){if(!Y)return null;for(;null!==zb;)c(rb,zb),zb=zb.sibling;return null}function F(rb,zb){for(rb=new Map;null!==zb;)null!==zb.key?rb.set(zb.key,zb):rb.set(zb.index,zb),zb=zb.sibling;return rb}function V(rb,zb){rb=mh(rb,zb);rb.index=0;rb.sibling=null;return rb}function fa(rb,zb,hc){rb.index=hc;if(!Y)return zb;hc=rb.alternate;if(null!==hc)return hc=hc.index,hc<zb?(rb.effectTag=2,zb):hc;rb.effectTag=2;return zb}function ra(rb){Y&&
null===rb.alternate&&(rb.effectTag=2);return rb}function ya(rb,zb,hc,vc){if(null===zb||6!==zb.tag)return zb=W(hc,rb.mode,vc),zb.return=rb,zb;zb=V(zb,hc);zb.return=rb;return zb}function Ha(rb,zb,hc,vc){if(null!==zb&&zb.elementType===hc.type)return vc=V(zb,hc.props),vc.ref=Le(rb,zb,hc),vc.return=rb,vc;vc=Di(hc.type,hc.key,hc.props,null,rb.mode,vc);vc.ref=Le(rb,zb,hc);vc.return=rb;return vc}function Pa(rb,zb,hc,vc){if(null===zb||4!==zb.tag||zb.stateNode.containerInfo!==hc.containerInfo||zb.stateNode.implementation!==
hc.implementation)return zb=aa(hc,rb.mode,vc),zb.return=rb,zb;zb=V(zb,hc.children||[]);zb.return=rb;return zb}function Ya(rb,zb,hc,vc,pc){if(null===zb||7!==zb.tag)return zb=lb(hc,rb.mode,vc,pc),zb.return=rb,zb;zb=V(zb,hc);zb.return=rb;return zb}function hb(rb,zb,hc){if("string"===typeof zb||"number"===typeof zb)return zb=W(""+zb,rb.mode,hc),zb.return=rb,zb;if("object"===typeof zb&&null!==zb){switch(zb.$$typeof){case Fg:return hc=Di(zb.type,zb.key,zb.props,null,rb.mode,hc),hc.ref=Le(rb,null,zb),hc.return=
rb,hc;case jg:return zb=aa(zb,rb.mode,hc),zb.return=rb,zb}if(oh(zb)||z(zb))return zb=lb(zb,rb.mode,hc,null),zb.return=rb,zb;oe(rb,zb)}return null}function Ab(rb,zb,hc,vc){var pc=null!==zb?zb.key:null;if("string"===typeof hc||"number"===typeof hc)return null!==pc?null:ya(rb,zb,""+hc,vc);if("object"===typeof hc&&null!==hc){switch(hc.$$typeof){case Fg:return hc.key===pc?hc.type===of?Ya(rb,zb,hc.props.children,vc,pc):Ha(rb,zb,hc,vc):null;case jg:return hc.key===pc?Pa(rb,zb,hc,vc):null}if(oh(hc)||z(hc))return null!==
pc?null:Ya(rb,zb,hc,vc,null);oe(rb,hc)}return null}function Fb(rb,zb,hc,vc,pc){if("string"===typeof vc||"number"===typeof vc)return rb=rb.get(hc)||null,ya(zb,rb,""+vc,pc);if("object"===typeof vc&&null!==vc){switch(vc.$$typeof){case Fg:return rb=rb.get(null===vc.key?hc:vc.key)||null,vc.type===of?Ya(zb,rb,vc.props.children,pc,vc.key):Ha(zb,rb,vc,pc);case jg:return rb=rb.get(null===vc.key?hc:vc.key)||null,Pa(zb,rb,vc,pc)}if(oh(vc)||z(vc))return rb=rb.get(hc)||null,Ya(zb,rb,vc,pc,null);oe(zb,vc)}return null}
function Jb(rb,zb,hc,vc){for(var pc=null,$c=null,fd=zb,nd=zb=0,xd=null;null!==fd&&nd<hc.length;nd++){fd.index>nd?(xd=fd,fd=null):xd=fd.sibling;var vd=Ab(rb,fd,hc[nd],vc);if(null===vd){null===fd&&(fd=xd);break}Y&&fd&&null===vd.alternate&&c(rb,fd);zb=fa(vd,zb,nd);null===$c?pc=vd:$c.sibling=vd;$c=vd;fd=xd}if(nd===hc.length)return x(rb,fd),pc;if(null===fd){for(;nd<hc.length;nd++)fd=hb(rb,hc[nd],vc),null!==fd&&(zb=fa(fd,zb,nd),null===$c?pc=fd:$c.sibling=fd,$c=fd);return pc}for(fd=F(rb,fd);nd<hc.length;nd++)xd=
Fb(fd,rb,nd,hc[nd],vc),null!==xd&&(Y&&null!==xd.alternate&&fd.delete(null===xd.key?nd:xd.key),zb=fa(xd,zb,nd),null===$c?pc=xd:$c.sibling=xd,$c=xd);Y&&fd.forEach(function(Vd){return c(rb,Vd)});return pc}function Rb(rb,zb,hc,vc){var pc=z(hc);if("function"!==typeof pc)throw Error(b(150));hc=pc.call(hc);if(null==hc)throw Error(b(151));for(var $c=pc=null,fd=zb,nd=zb=0,xd=null,vd=hc.next();null!==fd&&!vd.done;nd++,vd=hc.next()){fd.index>nd?(xd=fd,fd=null):xd=fd.sibling;var Vd=Ab(rb,fd,vd.value,vc);if(null===
Vd){null===fd&&(fd=xd);break}Y&&fd&&null===Vd.alternate&&c(rb,fd);zb=fa(Vd,zb,nd);null===$c?pc=Vd:$c.sibling=Vd;$c=Vd;fd=xd}if(vd.done)return x(rb,fd),pc;if(null===fd){for(;!vd.done;nd++,vd=hc.next())vd=hb(rb,vd.value,vc),null!==vd&&(zb=fa(vd,zb,nd),null===$c?pc=vd:$c.sibling=vd,$c=vd);return pc}for(fd=F(rb,fd);!vd.done;nd++,vd=hc.next())vd=Fb(fd,rb,nd,vd.value,vc),null!==vd&&(Y&&null!==vd.alternate&&fd.delete(null===vd.key?nd:vd.key),zb=fa(vd,zb,nd),null===$c?pc=vd:$c.sibling=vd,$c=vd);Y&&fd.forEach(function(he){return c(rb,
he)});return pc}return function(rb,zb,hc,vc){var pc="object"===typeof hc&&null!==hc&&hc.type===of&&null===hc.key;pc&&(hc=hc.props.children);var $c="object"===typeof hc&&null!==hc;if($c)switch(hc.$$typeof){case Fg:a:{$c=hc.key;for(pc=zb;null!==pc;){if(pc.key===$c){switch(pc.tag){case 7:if(hc.type===of){x(rb,pc.sibling);zb=V(pc,hc.props.children);zb.return=rb;rb=zb;break a}break;default:if(pc.elementType===hc.type){x(rb,pc.sibling);zb=V(pc,hc.props);zb.ref=Le(rb,pc,hc);zb.return=rb;rb=zb;break a}}x(rb,
pc);break}else c(rb,pc);pc=pc.sibling}hc.type===of?(zb=lb(hc.props.children,rb.mode,vc,hc.key),zb.return=rb,rb=zb):(vc=Di(hc.type,hc.key,hc.props,null,rb.mode,vc),vc.ref=Le(rb,zb,hc),vc.return=rb,rb=vc)}return ra(rb);case jg:a:{for(pc=hc.key;null!==zb;){if(zb.key===pc)if(4===zb.tag&&zb.stateNode.containerInfo===hc.containerInfo&&zb.stateNode.implementation===hc.implementation){x(rb,zb.sibling);zb=V(zb,hc.children||[]);zb.return=rb;rb=zb;break a}else{x(rb,zb);break}else c(rb,zb);zb=zb.sibling}zb=aa(hc,
rb.mode,vc);zb.return=rb;rb=zb}return ra(rb)}if("string"===typeof hc||"number"===typeof hc)return hc=""+hc,null!==zb&&6===zb.tag?(x(rb,zb.sibling),zb=V(zb,hc),zb.return=rb,rb=zb):(x(rb,zb),zb=W(hc,rb.mode,vc),zb.return=rb,rb=zb),ra(rb);if(oh(hc))return Jb(rb,zb,hc,vc);if(z(hc))return Rb(rb,zb,hc,vc);$c&&oe(rb,hc);if("undefined"===typeof hc&&!pc)switch(rb.tag){case 1:case 0:throw rb=rb.type,Error(b(152,rb.displayName||rb.name||"Component"));}return x(rb,zb)}}function Gf(Y){if(Y===Gg)throw Error(b(174));
return Y}function Zg(Y,c){ye(R,c);ye(jk,Y);ye(Eh,Gg);Y=c.nodeType;switch(Y){case 9:case 11:c=(c=c.documentElement)?c.namespaceURI:da(null,"");break;default:Y=8===Y?c.parentNode:c,c=Y.namespaceURI||null,Y=Y.tagName,c=da(c,Y)}Xd(Eh);ye(Eh,c)}function th(){Xd(Eh);Xd(jk);Xd(R)}function Fj(Y){Gf(R.current);var c=Gf(Eh.current),x=da(c,Y.type);c!==x&&(ye(jk,Y),ye(Eh,x))}function ij(Y){jk.current===Y&&(Xd(Eh),Xd(jk))}function hh(Y){for(var c=Y;null!==c;){if(13===c.tag){var x=c.memoizedState;if(null!==x&&
(x=x.dehydrated,null===x||x.data===mi||x.data===sj))return c}else if(19===c.tag&&void 0!==c.memoizedProps.revealOrder){if(0!==(c.effectTag&64))return c}else if(null!==c.child){c.child.return=c;c=c.child;continue}if(c===Y)break;for(;null===c.sibling;){if(null===c.return||c.return===Y)return null;c=c.return}c.sibling.return=c.return;c=c.sibling}return null}function Gj(Y,c){return{responder:Y,props:c}}function cg(){throw Error(b(321));}function Hj(Y,c){if(null===c)return!1;for(var x=0;x<c.length&&x<
Y.length;x++)if(!di(Y[x],c[x]))return!1;return!0}function pi(Y,c,x,F,V,fa){Aa=fa;Da=c;c.memoizedState=null;c.updateQueue=null;c.expirationTime=0;ta.current=null===Y||null===Y.memoizedState?db:ob;Y=x(F,V);if(c.expirationTime===Aa){fa=0;do{c.expirationTime=0;if(!(25>fa))throw Error(b(301));fa+=1;Ja=Qa=null;c.updateQueue=null;ta.current=xb;Y=x(F,V)}while(c.expirationTime===Aa)}ta.current=Wa;c=null!==Qa&&null!==Qa.next;Aa=0;Ja=Qa=Da=null;Ra=!1;if(c)throw Error(b(300));return Y}function uh(){var Y={memoizedState:null,
baseState:null,baseQueue:null,queue:null,next:null};null===Ja?Da.memoizedState=Ja=Y:Ja=Ja.next=Y;return Ja}function Ag(){if(null===Qa){var Y=Da.alternate;Y=null!==Y?Y.memoizedState:null}else Y=Qa.next;var c=null===Ja?Da.memoizedState:Ja.next;if(null!==c)Ja=c,Qa=Y;else{if(null===Y)throw Error(b(310));Qa=Y;Y={memoizedState:Qa.memoizedState,baseState:Qa.baseState,baseQueue:Qa.baseQueue,queue:Qa.queue,next:null};null===Ja?Da.memoizedState=Ja=Y:Ja=Ja.next=Y}return Ja}function Mh(Y,c){return"function"===
typeof c?c(Y):c}function kj(Y){var c=Ag(),x=c.queue;if(null===x)throw Error(b(311));x.lastRenderedReducer=Y;var F=Qa,V=F.baseQueue,fa=x.pending;if(null!==fa){if(null!==V){var ra=V.next;V.next=fa.next;fa.next=ra}F.baseQueue=V=fa;x.pending=null}if(null!==V){V=V.next;F=F.baseState;var ya=ra=fa=null,Ha=V;do{var Pa=Ha.expirationTime;if(Pa<Aa){var Ya={expirationTime:Ha.expirationTime,suspenseConfig:Ha.suspenseConfig,action:Ha.action,eagerReducer:Ha.eagerReducer,eagerState:Ha.eagerState,next:null};null===
ya?(ra=ya=Ya,fa=F):ya=ya.next=Ya;Pa>Da.expirationTime&&(Da.expirationTime=Pa,zh(Pa))}else null!==ya&&(ya=ya.next={expirationTime:1073741823,suspenseConfig:Ha.suspenseConfig,action:Ha.action,eagerReducer:Ha.eagerReducer,eagerState:Ha.eagerState,next:null}),Ci(Pa,Ha.suspenseConfig),F=Ha.eagerReducer===Y?Ha.eagerState:Y(F,Ha.action);Ha=Ha.next}while(null!==Ha&&Ha!==V);null===ya?fa=F:ya.next=ra;di(F,c.memoizedState)||(fc=!0);c.memoizedState=F;c.baseState=fa;c.baseQueue=ya;x.lastRenderedState=F}return[c.memoizedState,
x.dispatch]}function vh(Y){var c=Ag(),x=c.queue;if(null===x)throw Error(b(311));x.lastRenderedReducer=Y;var F=x.dispatch,V=x.pending,fa=c.memoizedState;if(null!==V){x.pending=null;var ra=V=V.next;do fa=Y(fa,ra.action),ra=ra.next;while(ra!==V);di(fa,c.memoizedState)||(fc=!0);c.memoizedState=fa;null===c.baseQueue&&(c.baseState=fa);x.lastRenderedState=fa}return[fa,F]}function Lh(Y){var c=uh();"function"===typeof Y&&(Y=Y());c.memoizedState=c.baseState=Y;Y=c.queue={pending:null,dispatch:null,lastRenderedReducer:Mh,
lastRenderedState:Y};Y=Y.dispatch=dk.bind(null,Da,Y);return[c.memoizedState,Y]}function qi(Y,c,x,F){Y={tag:Y,create:c,destroy:x,deps:F,next:null};c=Da.updateQueue;null===c?(c={lastEffect:null},Da.updateQueue=c,c.lastEffect=Y.next=Y):(x=c.lastEffect,null===x?c.lastEffect=Y.next=Y:(F=x.next,x.next=Y,Y.next=F,c.lastEffect=Y));return Y}function ri(){return Ag().memoizedState}function Nh(Y,c,x,F){var V=uh();Da.effectTag|=Y;V.memoizedState=qi(1|c,x,void 0,void 0===F?null:F)}function si(Y,c,x,F){var V=Ag();
F=void 0===F?null:F;var fa=void 0;if(null!==Qa){var ra=Qa.memoizedState;fa=ra.destroy;if(null!==F&&Hj(F,ra.deps)){qi(c,x,fa,F);return}}Da.effectTag|=Y;V.memoizedState=qi(1|c,x,fa,F)}function Ph(Y,c){return Nh(516,4,Y,c)}function He(Y,c){return si(516,4,Y,c)}function mg(Y,c){return si(4,2,Y,c)}function ti(Y,c){if("function"===typeof c)return Y=Y(),c(Y),function(){c(null)};if(null!==c&&void 0!==c)return Y=Y(),c.current=Y,function(){c.current=null}}function ui(Y,c,x){x=null!==x&&void 0!==x?x.concat([Y]):
null;return si(4,2,ti.bind(null,c,Y),x)}function Jj(){}function Qi(Y,c){uh().memoizedState=[Y,void 0===c?null:c];return Y}function vi(Y,c){var x=Ag();c=void 0===c?null:c;var F=x.memoizedState;if(null!==F&&null!==c&&Hj(c,F[1]))return F[0];x.memoizedState=[Y,c];return Y}function ck(Y,c){var x=Ag();c=void 0===c?null:c;var F=x.memoizedState;if(null!==F&&null!==c&&Hj(c,F[1]))return F[0];Y=Y();x.memoizedState=[Y,c];return Y}function Kj(Y,c,x){var F=kd();Td(98>F?98:F,function(){Y(!0)});Td(97<F?97:F,function(){var V=
za.suspense;za.suspense=void 0===c?null:c;try{Y(!1),x()}finally{za.suspense=V}})}function dk(Y,c,x){var F=fg(),V=Bj.suspense;F=pg(F,Y,V);V={expirationTime:F,suspenseConfig:V,action:x,eagerReducer:null,eagerState:null,next:null};var fa=c.pending;null===fa?V.next=V:(V.next=fa.next,fa.next=V);c.pending=V;fa=Y.alternate;if(Y===Da||null!==fa&&fa===Da)Ra=!0,V.expirationTime=Aa,Da.expirationTime=Aa;else{if(0===Y.expirationTime&&(null===fa||0===fa.expirationTime)&&(fa=c.lastRenderedReducer,null!==fa))try{var ra=
c.lastRenderedState,ya=fa(ra,x);V.eagerReducer=fa;V.eagerState=ya;if(di(ya,ra))return}catch(Ha){}finally{}If(Y,F)}}function Ri(Y,c){var x=mf(5,null,null,0);x.elementType="DELETED";x.type="DELETED";x.stateNode=c;x.return=Y;x.effectTag=8;null!==Y.lastEffect?(Y.lastEffect.nextEffect=x,Y.lastEffect=x):Y.firstEffect=Y.lastEffect=x}function sk(Y,c){switch(Y.tag){case 5:var x=Y.type;c=1!==c.nodeType||x.toLowerCase()!==c.nodeName.toLowerCase()?null:c;return null!==c?(Y.stateNode=c,!0):!1;case 6:return c=
""===Y.pendingProps||3!==c.nodeType?null:c,null!==c?(Y.stateNode=c,!0):!1;case 13:return!1;default:return!1}}function Qh(Y){if(Qb){var c=Eb;if(c){var x=c;if(!sk(Y,c)){c=xc(x.nextSibling);if(!c||!sk(Y,c)){Y.effectTag=Y.effectTag&-1025|2;Qb=!1;Cb=Y;return}Ri(Cb,x)}Cb=Y;Eb=xc(c.firstChild)}else Y.effectTag=Y.effectTag&-1025|2,Qb=!1,Cb=Y}}function Rh(Y){for(Y=Y.return;null!==Y&&5!==Y.tag&&3!==Y.tag&&13!==Y.tag;)Y=Y.return;Cb=Y}function Bg(Y){if(Y!==Cb)return!1;if(!Qb)return Rh(Y),Qb=!0,!1;var c=Y.type;
if(5!==Y.tag||"head"!==c&&"body"!==c&&!rc(c,Y.memoizedProps))for(c=Eb;c;)Ri(Y,c),c=xc(c.nextSibling);Rh(Y);if(13===Y.tag){Y=Y.memoizedState;Y=null!==Y?Y.dehydrated:null;if(!Y)throw Error(b(317));a:{Y=Y.nextSibling;for(c=0;Y;){if(8===Y.nodeType){var x=Y.data;if(x===Xe){if(0===c){Eb=xc(Y.nextSibling);break a}c--}else x!==ag&&x!==sj&&x!==mi||c++}Y=Y.nextSibling}Eb=null}}else Eb=Cb?xc(Y.stateNode.nextSibling):null;return!0}function ng(Y,c,x,F){c.child=null===Y?ik(c,null,x,F):dj(c,Y.child,x,F)}function xh(Y,
c,x,F,V){x=x.render;var fa=c.ref;Lc(c,V);F=pi(Y,c,x,F,fa,V);if(null!==Y&&!fc)return c.updateQueue=Y.updateQueue,c.effectTag&=-517,Y.expirationTime<=V&&(Y.expirationTime=0),$g(Y,c,V);c.effectTag|=1;ng(Y,c,F,V);return c.child}function Si(Y,c,x,F,V,fa){if(null===Y){var ra=x.type;if("function"===typeof ra&&!hg(ra)&&void 0===ra.defaultProps&&null===x.compare&&void 0===x.defaultProps)return c.tag=15,c.type=ra,$e(Y,c,ra,F,V,fa);Y=Di(x.type,null,F,null,c.mode,fa);Y.ref=c.ref;Y.return=c;return c.child=Y}ra=
Y.child;if(V<fa&&(V=ra.memoizedProps,x=x.compare,x=null!==x?x:Dd,x(V,F)&&Y.ref===c.ref))return $g(Y,c,fa);c.effectTag|=1;Y=mh(ra,F);Y.ref=c.ref;Y.return=c;return c.child=Y}function $e(Y,c,x,F,V,fa){return null!==Y&&Dd(Y.memoizedProps,F)&&Y.ref===c.ref&&(fc=!1,V<fa)?(c.expirationTime=Y.expirationTime,$g(Y,c,fa)):ih(Y,c,x,F,fa)}function Sh(Y,c){var x=c.ref;if(null===Y&&null!==x||null!==Y&&Y.ref!==x)c.effectTag|=128}function ih(Y,c,x,F,V){var fa=Qe(x)?nh:tg.current;fa=kf(c,fa);Lc(c,V);x=pi(Y,c,x,F,fa,
V);if(null!==Y&&!fc)return c.updateQueue=Y.updateQueue,c.effectTag&=-517,Y.expirationTime<=V&&(Y.expirationTime=0),$g(Y,c,V);c.effectTag|=1;ng(Y,c,x,V);return c.child}function yh(Y,c,x,F,V){if(Qe(x)){var fa=!0;Sc(c)}else fa=!1;Lc(c,V);if(null===c.stateNode)null!==Y&&(Y.alternate=null,c.alternate=null,c.effectTag|=2),sd(c,x,F),ue(c,x,F,V),F=!0;else if(null===Y){var ra=c.stateNode,ya=c.memoizedProps;ra.props=ya;var Ha=ra.context,Pa=x.contextType;"object"===typeof Pa&&null!==Pa?Pa=Mc(Pa):(Pa=Qe(x)?nh:
tg.current,Pa=kf(c,Pa));var Ya=x.getDerivedStateFromProps,hb="function"===typeof Ya||"function"===typeof ra.getSnapshotBeforeUpdate;hb||"function"!==typeof ra.UNSAFE_componentWillReceiveProps&&"function"!==typeof ra.componentWillReceiveProps||(ya!==F||Ha!==Pa)&&xe(c,ra,F,Pa);fi=!1;var Ab=c.memoizedState;ra.state=Ab;hd(c,F,ra,V);Ha=c.memoizedState;ya!==F||Ab!==Ha||Sg.current||fi?("function"===typeof Ya&&(td(c,x,Ya,F),Ha=c.memoizedState),(ya=fi||wd(c,x,ya,F,Ab,Ha,Pa))?(hb||"function"!==typeof ra.UNSAFE_componentWillMount&&
"function"!==typeof ra.componentWillMount||("function"===typeof ra.componentWillMount&&ra.componentWillMount(),"function"===typeof ra.UNSAFE_componentWillMount&&ra.UNSAFE_componentWillMount()),"function"===typeof ra.componentDidMount&&(c.effectTag|=4)):("function"===typeof ra.componentDidMount&&(c.effectTag|=4),c.memoizedProps=F,c.memoizedState=Ha),ra.props=F,ra.state=Ha,ra.context=Pa,F=ya):("function"===typeof ra.componentDidMount&&(c.effectTag|=4),F=!1)}else ra=c.stateNode,Cc(Y,c),ya=c.memoizedProps,
ra.props=c.type===c.elementType?ya:jc(c.type,ya),Ha=ra.context,Pa=x.contextType,"object"===typeof Pa&&null!==Pa?Pa=Mc(Pa):(Pa=Qe(x)?nh:tg.current,Pa=kf(c,Pa)),Ya=x.getDerivedStateFromProps,(hb="function"===typeof Ya||"function"===typeof ra.getSnapshotBeforeUpdate)||"function"!==typeof ra.UNSAFE_componentWillReceiveProps&&"function"!==typeof ra.componentWillReceiveProps||(ya!==F||Ha!==Pa)&&xe(c,ra,F,Pa),fi=!1,Ha=c.memoizedState,ra.state=Ha,hd(c,F,ra,V),Ab=c.memoizedState,ya!==F||Ha!==Ab||Sg.current||
fi?("function"===typeof Ya&&(td(c,x,Ya,F),Ab=c.memoizedState),(Ya=fi||wd(c,x,ya,F,Ha,Ab,Pa))?(hb||"function"!==typeof ra.UNSAFE_componentWillUpdate&&"function"!==typeof ra.componentWillUpdate||("function"===typeof ra.componentWillUpdate&&ra.componentWillUpdate(F,Ab,Pa),"function"===typeof ra.UNSAFE_componentWillUpdate&&ra.UNSAFE_componentWillUpdate(F,Ab,Pa)),"function"===typeof ra.componentDidUpdate&&(c.effectTag|=4),"function"===typeof ra.getSnapshotBeforeUpdate&&(c.effectTag|=256)):("function"!==
typeof ra.componentDidUpdate||ya===Y.memoizedProps&&Ha===Y.memoizedState||(c.effectTag|=4),"function"!==typeof ra.getSnapshotBeforeUpdate||ya===Y.memoizedProps&&Ha===Y.memoizedState||(c.effectTag|=256),c.memoizedProps=F,c.memoizedState=Ab),ra.props=F,ra.state=Ab,ra.context=Pa,F=Ya):("function"!==typeof ra.componentDidUpdate||ya===Y.memoizedProps&&Ha===Y.memoizedState||(c.effectTag|=4),"function"!==typeof ra.getSnapshotBeforeUpdate||ya===Y.memoizedProps&&Ha===Y.memoizedState||(c.effectTag|=256),F=
!1);return Se(Y,c,x,F,fa,V)}function Se(Y,c,x,F,V,fa){Sh(Y,c);var ra=0!==(c.effectTag&64);if(!F&&!ra)return V&&yc(c,x,!1),$g(Y,c,fa);F=c.stateNode;Xb.current=c;var ya=ra&&"function"!==typeof x.getDerivedStateFromError?null:F.render();c.effectTag|=1;null!==Y&&ra?(c.child=dj(c,Y.child,null,fa),c.child=dj(c,null,ya,fa)):ng(Y,c,ya,fa);c.memoizedState=F.state;V&&yc(c,x,!0);return c.child}function Ue(Y){var c=Y.stateNode;c.pendingContext?ff(Y,c.pendingContext,c.pendingContext!==c.context):c.context&&ff(Y,
c.context,!1);Zg(Y,c.containerInfo)}function jh(Y,c,x){var F=c.mode,V=c.pendingProps,fa=ha.current,ra=!1,ya;(ya=0!==(c.effectTag&64))||(ya=0!==(fa&2)&&(null===Y||null!==Y.memoizedState));ya?(ra=!0,c.effectTag&=-65):null!==Y&&null===Y.memoizedState||void 0===V.fallback||!0===V.unstable_avoidThisFallback||(fa|=1);ye(ha,fa&1);if(null===Y){void 0!==V.fallback&&Qh(c);if(ra){ra=V.fallback;V=lb(null,F,0,null);V.return=c;if(0===(c.mode&2))for(Y=null!==c.memoizedState?c.child.child:c.child,V.child=Y;null!==
Y;)Y.return=V,Y=Y.sibling;x=lb(ra,F,x,null);x.return=c;V.sibling=x;c.memoizedState=uc;c.child=V;return x}F=V.children;c.memoizedState=null;return c.child=ik(c,null,F,x)}if(null!==Y.memoizedState){Y=Y.child;F=Y.sibling;if(ra){V=V.fallback;x=mh(Y,Y.pendingProps);x.return=c;if(0===(c.mode&2)&&(ra=null!==c.memoizedState?c.child.child:c.child,ra!==Y.child))for(x.child=ra;null!==ra;)ra.return=x,ra=ra.sibling;F=mh(F,V);F.return=c;x.sibling=F;x.childExpirationTime=0;c.memoizedState=uc;c.child=x;return F}x=
dj(c,Y.child,V.children,x);c.memoizedState=null;return c.child=x}Y=Y.child;if(ra){ra=V.fallback;V=lb(null,F,0,null);V.return=c;V.child=Y;null!==Y&&(Y.return=V);if(0===(c.mode&2))for(Y=null!==c.memoizedState?c.child.child:c.child,V.child=Y;null!==Y;)Y.return=V,Y=Y.sibling;x=lb(ra,F,x,null);x.return=c;V.sibling=x;x.effectTag|=2;V.childExpirationTime=0;c.memoizedState=uc;c.child=V;return x}c.memoizedState=null;return c.child=dj(c,Y,V.children,x)}function xi(Y,c){Y.expirationTime<c&&(Y.expirationTime=
c);var x=Y.alternate;null!==x&&x.expirationTime<c&&(x.expirationTime=c);Wc(Y.return,c)}function Lj(Y,c,x,F,V,fa){var ra=Y.memoizedState;null===ra?Y.memoizedState={isBackwards:c,rendering:null,renderingStartTime:0,last:F,tail:x,tailExpiration:0,tailMode:V,lastEffect:fa}:(ra.isBackwards=c,ra.rendering=null,ra.renderingStartTime=0,ra.last=F,ra.tail=x,ra.tailExpiration=0,ra.tailMode=V,ra.lastEffect=fa)}function Mj(Y,c,x){var F=c.pendingProps,V=F.revealOrder,fa=F.tail;ng(Y,c,F.children,x);F=ha.current;
if(0!==(F&2))F=F&1|2,c.effectTag|=64;else{if(null!==Y&&0!==(Y.effectTag&64))a:for(Y=c.child;null!==Y;){if(13===Y.tag)null!==Y.memoizedState&&xi(Y,x);else if(19===Y.tag)xi(Y,x);else if(null!==Y.child){Y.child.return=Y;Y=Y.child;continue}if(Y===c)break a;for(;null===Y.sibling;){if(null===Y.return||Y.return===c)break a;Y=Y.return}Y.sibling.return=Y.return;Y=Y.sibling}F&=1}ye(ha,F);if(0===(c.mode&2))c.memoizedState=null;else switch(V){case "forwards":x=c.child;for(V=null;null!==x;)Y=x.alternate,null!==
Y&&null===hh(Y)&&(V=x),x=x.sibling;x=V;null===x?(V=c.child,c.child=null):(V=x.sibling,x.sibling=null);Lj(c,!1,V,x,fa,c.lastEffect);break;case "backwards":x=null;V=c.child;for(c.child=null;null!==V;){Y=V.alternate;if(null!==Y&&null===hh(Y)){c.child=V;break}Y=V.sibling;V.sibling=x;x=V;V=Y}Lj(c,!0,x,null,fa,c.lastEffect);break;case "together":Lj(c,!1,null,null,void 0,c.lastEffect);break;default:c.memoizedState=null}return c.child}function $g(Y,c,x){null!==Y&&(c.dependencies=Y.dependencies);var F=c.expirationTime;
0!==F&&zh(F);if(c.childExpirationTime<x)return null;if(null!==Y&&c.child!==Y.child)throw Error(b(153));if(null!==c.child){Y=c.child;x=mh(Y,Y.pendingProps);c.child=x;for(x.return=c;null!==Y.sibling;)Y=Y.sibling,x=x.sibling=mh(Y,Y.pendingProps),x.return=c;x.sibling=null}return c.child}function Ti(Y,c){switch(Y.tailMode){case "hidden":c=Y.tail;for(var x=null;null!==c;)null!==c.alternate&&(x=c),c=c.sibling;null===x?Y.tail=null:x.sibling=null;break;case "collapsed":x=Y.tail;for(var F=null;null!==x;)null!==
x.alternate&&(F=x),x=x.sibling;null===F?c||null===Y.tail?Y.tail=null:Y.tail.sibling=null:F.sibling=null}}function yi(Y,c,x){var F=c.pendingProps;switch(c.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return null;case 1:return Qe(c.type)&&pf(),null;case 3:return th(),Xd(Sg),Xd(tg),x=c.stateNode,x.pendingContext&&(x.context=x.pendingContext,x.pendingContext=null),null!==Y&&null!==Y.child||!Bg(c)||(c.effectTag|=4),Ec(c),null;case 5:ij(c);x=Gf(R.current);var V=c.type;
if(null!==Y&&null!=c.stateNode)Qc(Y,c,V,F,x),Y.ref!==c.ref&&(c.effectTag|=128);else{if(!F){if(null===c.stateNode)throw Error(b(166));return null}Y=Gf(Eh.current);if(Bg(c)){F=c.stateNode;V=c.type;var fa=c.memoizedProps;F[Yg]=c;F[Cd]=fa;switch(V){case "iframe":case "object":case "embed":sb("load",F);break;case "video":case "audio":for(Y=0;Y<Xg.length;Y++)sb(Xg[Y],F);break;case "source":sb("error",F);break;case "img":case "image":case "link":sb("error",F);sb("load",F);break;case "form":sb("reset",F);
sb("submit",F);break;case "details":sb("toggle",F);break;case "input":Q(F,fa);sb("invalid",F);Ob(x,"onChange");break;case "select":F._wrapperState={wasMultiple:!!fa.multiple};sb("invalid",F);Ob(x,"onChange");break;case "textarea":ca(F,fa),sb("invalid",F),Ob(x,"onChange")}Pb(V,fa);Y=null;for(var ra in fa)if(fa.hasOwnProperty(ra)){var ya=fa[ra];"children"===ra?"string"===typeof ya?F.textContent!==ya&&(Y=["children",ya]):"number"===typeof ya&&F.textContent!==""+ya&&(Y=["children",""+ya]):Qd.hasOwnProperty(ra)&&
null!=ya&&Ob(x,ra)}switch(V){case "input":L(F);T(F,fa,!0);break;case "textarea":L(F);ja(F);break;case "select":case "option":break;default:"function"===typeof fa.onClick&&(F.onclick=Wb)}x=Y;c.updateQueue=x;null!==x&&(c.effectTag|=4)}else{ra=9===x.nodeType?x:x.ownerDocument;"http://www.w3.org/1999/xhtml"===Y&&(Y=la(V));"http://www.w3.org/1999/xhtml"===Y?"script"===V?(Y=ra.createElement("div"),Y.innerHTML="\x3cscript\x3e\x3c/script\x3e",Y=Y.removeChild(Y.firstChild)):"string"===typeof F.is?Y=ra.createElement(V,
{is:F.is}):(Y=ra.createElement(V),"select"===V&&(ra=Y,F.multiple?ra.multiple=!0:F.size&&(ra.size=F.size))):Y=ra.createElementNS(Y,V);Y[Yg]=c;Y[Cd]=F;zc(Y,c,!1,!1);c.stateNode=Y;ra=Kb(V,F);switch(V){case "iframe":case "object":case "embed":sb("load",Y);ya=F;break;case "video":case "audio":for(ya=0;ya<Xg.length;ya++)sb(Xg[ya],Y);ya=F;break;case "source":sb("error",Y);ya=F;break;case "img":case "image":case "link":sb("error",Y);sb("load",Y);ya=F;break;case "form":sb("reset",Y);sb("submit",Y);ya=F;break;
case "details":sb("toggle",Y);ya=F;break;case "input":Q(Y,F);ya=H(Y,F);sb("invalid",Y);Ob(x,"onChange");break;case "option":ya=S(Y,F);break;case "select":Y._wrapperState={wasMultiple:!!F.multiple};ya=Dc({},F,{value:void 0});sb("invalid",Y);Ob(x,"onChange");break;case "textarea":ca(Y,F);ya=ba(Y,F);sb("invalid",Y);Ob(x,"onChange");break;default:ya=F}Pb(V,ya);var Ha=ya;for(fa in Ha)if(Ha.hasOwnProperty(fa)){var Pa=Ha[fa];"style"===fa?ub(Y,Pa):"dangerouslySetInnerHTML"===fa?(Pa=Pa?Pa.__html:void 0,null!=
Pa&&ii(Y,Pa)):"children"===fa?"string"===typeof Pa?("textarea"!==V||""!==Pa)&&oa(Y,Pa):"number"===typeof Pa&&oa(Y,""+Pa):"suppressContentEditableWarning"!==fa&&"suppressHydrationWarning"!==fa&&"autoFocus"!==fa&&(Qd.hasOwnProperty(fa)?null!=Pa&&Ob(x,fa):null!=Pa&&A(Y,fa,Pa,ra))}switch(V){case "input":L(Y);T(Y,F,!1);break;case "textarea":L(Y);ja(Y);break;case "option":null!=F.value&&Y.setAttribute("value",""+D(F.value));break;case "select":Y.multiple=!!F.multiple;x=F.value;null!=x?X(Y,!!F.multiple,
x,!1):null!=F.defaultValue&&X(Y,!!F.multiple,F.defaultValue,!0);break;default:"function"===typeof ya.onClick&&(Y.onclick=Wb)}gc(V,F)&&(c.effectTag|=4)}null!==c.ref&&(c.effectTag|=128)}return null;case 6:if(Y&&null!=c.stateNode)Nb(Y,c,Y.memoizedProps,F);else{if("string"!==typeof F&&null===c.stateNode)throw Error(b(166));x=Gf(R.current);Gf(Eh.current);Bg(c)?(x=c.stateNode,F=c.memoizedProps,x[Yg]=c,x.nodeValue!==F&&(c.effectTag|=4)):(x=(9===x.nodeType?x:x.ownerDocument).createTextNode(F),x[Yg]=c,c.stateNode=
x)}return null;case 13:Xd(ha);F=c.memoizedState;if(0!==(c.effectTag&64))return c.expirationTime=x,c;x=null!==F;F=!1;null===Y?void 0!==c.memoizedProps.fallback&&Bg(c):(V=Y.memoizedState,F=null!==V,x||null===V||(V=Y.child.sibling,null!==V&&(fa=c.firstEffect,null!==fa?(c.firstEffect=V,V.nextEffect=fa):(c.firstEffect=c.lastEffect=V,V.nextEffect=null),V.effectTag=8)));if(x&&!F&&0!==(c.mode&2))if(null===Y&&!0!==c.memoizedProps.unstable_avoidThisFallback||0!==(ha.current&1))yf===me&&(yf=Sd);else{if(yf===
me||yf===Sd)yf=Ff;0!==Bh&&null!==Pf&&(wa(Pf,xf),Ga(Pf,Bh))}if(x||F)c.effectTag|=4;return null;case 4:return th(),Ec(c),null;case 10:return Hc(c),null;case 17:return Qe(c.type)&&pf(),null;case 19:Xd(ha);F=c.memoizedState;if(null===F)return null;V=0!==(c.effectTag&64);fa=F.rendering;if(null===fa)if(V)Ti(F,!1);else{if(yf!==me||null!==Y&&0!==(Y.effectTag&64))for(fa=c.child;null!==fa;){Y=hh(fa);if(null!==Y){c.effectTag|=64;Ti(F,!1);V=Y.updateQueue;null!==V&&(c.updateQueue=V,c.effectTag|=4);null===F.lastEffect&&
(c.firstEffect=null);c.lastEffect=F.lastEffect;for(F=c.child;null!==F;)V=F,fa=x,V.effectTag&=2,V.nextEffect=null,V.firstEffect=null,V.lastEffect=null,Y=V.alternate,null===Y?(V.childExpirationTime=0,V.expirationTime=fa,V.child=null,V.memoizedProps=null,V.memoizedState=null,V.updateQueue=null,V.dependencies=null):(V.childExpirationTime=Y.childExpirationTime,V.expirationTime=Y.expirationTime,V.child=Y.child,V.memoizedProps=Y.memoizedProps,V.memoizedState=Y.memoizedState,V.updateQueue=Y.updateQueue,fa=
Y.dependencies,V.dependencies=null===fa?null:{expirationTime:fa.expirationTime,firstContext:fa.firstContext,responders:fa.responders}),F=F.sibling;ye(ha,ha.current&1|2);return c.child}fa=fa.sibling}}else{if(!V)if(Y=hh(fa),null!==Y){if(c.effectTag|=64,V=!0,x=Y.updateQueue,null!==x&&(c.updateQueue=x,c.effectTag|=4),Ti(F,!0),null===F.tail&&"hidden"===F.tailMode&&!fa.alternate)return c=c.lastEffect=F.lastEffect,null!==c&&(c.nextEffect=null),null}else 2*Wf()-F.renderingStartTime>F.tailExpiration&&1<x&&
(c.effectTag|=64,V=!0,Ti(F,!1),c.expirationTime=c.childExpirationTime=x-1);F.isBackwards?(fa.sibling=c.child,c.child=fa):(x=F.last,null!==x?x.sibling=fa:c.child=fa,F.last=fa)}return null!==F.tail?(0===F.tailExpiration&&(F.tailExpiration=Wf()+500),x=F.tail,F.rendering=x,F.tail=x.sibling,F.lastEffect=c.lastEffect,F.renderingStartTime=Wf(),x.sibling=null,c=ha.current,ye(ha,V?c&1|2:c&1),x):null}throw Error(b(156,c.tag));}function Lf(Y){switch(Y.tag){case 1:Qe(Y.type)&&pf();var c=Y.effectTag;return c&
4096?(Y.effectTag=c&-4097|64,Y):null;case 3:th();Xd(Sg);Xd(tg);c=Y.effectTag;if(0!==(c&64))throw Error(b(285));Y.effectTag=c&-4097|64;return Y;case 5:return ij(Y),null;case 13:return Xd(ha),c=Y.effectTag,c&4096?(Y.effectTag=c&-4097|64,Y):null;case 19:return Xd(ha),null;case 4:return th(),null;case 10:return Hc(Y),null;default:return null}}function Ui(Y,c){return{value:Y,source:c,stack:u(c)}}function ek(Y,c){var x=c.source,F=c.stack;null===F&&null!==x&&(F=u(x));null!==x&&C(x.type);c=c.value;null!==
Y&&1===Y.tag&&C(Y.type);try{console.error(c)}catch(V){setTimeout(function(){throw V;})}}function Hf(Y,c){try{c.props=Y.memoizedProps,c.state=Y.memoizedState,c.componentWillUnmount()}catch(x){Mf(Y,x)}}function Lg(Y){var c=Y.ref;if(null!==c)if("function"===typeof c)try{c(null)}catch(x){Mf(Y,x)}else c.current=null}function dg(Y,c){switch(c.tag){case 0:case 11:case 15:case 22:return;case 1:if(c.effectTag&256&&null!==Y){var x=Y.memoizedProps,F=Y.memoizedState;Y=c.stateNode;c=Y.getSnapshotBeforeUpdate(c.elementType===
c.type?x:jc(c.type,x),F);Y.__reactInternalSnapshotBeforeUpdate=c}return;case 3:case 5:case 6:case 4:case 17:return}throw Error(b(163));}function zi(Y,c){c=c.updateQueue;c=null!==c?c.lastEffect:null;if(null!==c){var x=c=c.next;do{if((x.tag&Y)===Y){var F=x.destroy;x.destroy=void 0;void 0!==F&&F()}x=x.next}while(x!==c)}}function Th(Y,c){c=c.updateQueue;c=null!==c?c.lastEffect:null;if(null!==c){var x=c=c.next;do{if((x.tag&Y)===Y){var F=x.create;x.destroy=F()}x=x.next}while(x!==c)}}function ah(Y,c,x){switch(x.tag){case 0:case 11:case 15:case 22:Th(3,
x);return;case 1:Y=x.stateNode;if(x.effectTag&4)if(null===c)Y.componentDidMount();else{var F=x.elementType===x.type?c.memoizedProps:jc(x.type,c.memoizedProps);Y.componentDidUpdate(F,c.memoizedState,Y.__reactInternalSnapshotBeforeUpdate)}c=x.updateQueue;null!==c&&qd(x,c,Y);return;case 3:c=x.updateQueue;if(null!==c){Y=null;if(null!==x.child)switch(x.child.tag){case 5:Y=x.child.stateNode;break;case 1:Y=x.child.stateNode}qd(x,c,Y)}return;case 5:Y=x.stateNode;null===c&&x.effectTag&4&&gc(x.type,x.memoizedProps)&&
Y.focus();return;case 6:return;case 4:return;case 12:return;case 13:null===x.memoizedState&&(x=x.alternate,null!==x&&(x=x.memoizedState,null!==x&&(x=x.dehydrated,null!==x&&ib(x))));return;case 19:case 17:case 20:case 21:return}throw Error(b(163));}function og(Y,c,x){"function"===typeof Vk&&Vk(c);switch(c.tag){case 0:case 11:case 14:case 15:case 22:Y=c.updateQueue;if(null!==Y&&(Y=Y.lastEffect,null!==Y)){var F=Y.next;Td(97<x?97:x,function(){var V=F;do{var fa=V.destroy;if(void 0!==fa){var ra=c;try{fa()}catch(ya){Mf(ra,
ya)}}V=V.next}while(V!==F)})}break;case 1:Lg(c);x=c.stateNode;"function"===typeof x.componentWillUnmount&&Hf(c,x);break;case 5:Lg(c);break;case 4:Vi(Y,c,x)}}function Ai(Y){var c=Y.alternate;Y.return=null;Y.child=null;Y.memoizedState=null;Y.updateQueue=null;Y.dependencies=null;Y.alternate=null;Y.firstEffect=null;Y.lastEffect=null;Y.pendingProps=null;Y.memoizedProps=null;Y.stateNode=null;null!==c&&Ai(c)}function Nj(Y){return 5===Y.tag||3===Y.tag||4===Y.tag}function mj(Y){a:{for(var c=Y.return;null!==
c;){if(Nj(c)){var x=c;break a}c=c.return}throw Error(b(160));}c=x.stateNode;switch(x.tag){case 5:var F=!1;break;case 3:c=c.containerInfo;F=!0;break;case 4:c=c.containerInfo;F=!0;break;default:throw Error(b(161));}x.effectTag&16&&(oa(c,""),x.effectTag&=-17);x=Y;a:b:for(;;){for(;null===x.sibling;){if(null===x.return||Nj(x.return)){x=null;break a}x=x.return}x.sibling.return=x.return;for(x=x.sibling;5!==x.tag&&6!==x.tag&&18!==x.tag;){if(x.effectTag&2)continue b;if(null===x.child||4===x.tag)continue b;
else x.child.return=x,x=x.child}if(!(x.effectTag&2)){x=x.stateNode;break a}}F?eg(Y,x,c):tf(Y,x,c)}function eg(Y,c,x){var F=Y.tag,V=5===F||6===F;if(V)Y=V?Y.stateNode:Y.stateNode.instance,c?8===x.nodeType?x.parentNode.insertBefore(Y,c):x.insertBefore(Y,c):(8===x.nodeType?(c=x.parentNode,c.insertBefore(Y,x)):(c=x,c.appendChild(Y)),x=x._reactRootContainer,null!==x&&void 0!==x||null!==c.onclick||(c.onclick=Wb));else if(4!==F&&(Y=Y.child,null!==Y))for(eg(Y,c,x),Y=Y.sibling;null!==Y;)eg(Y,c,x),Y=Y.sibling}
function tf(Y,c,x){var F=Y.tag,V=5===F||6===F;if(V)Y=V?Y.stateNode:Y.stateNode.instance,c?x.insertBefore(Y,c):x.appendChild(Y);else if(4!==F&&(Y=Y.child,null!==Y))for(tf(Y,c,x),Y=Y.sibling;null!==Y;)tf(Y,c,x),Y=Y.sibling}function Vi(Y,c,x){for(var F=c,V=!1,fa,ra;;){if(!V){V=F.return;a:for(;;){if(null===V)throw Error(b(160));fa=V.stateNode;switch(V.tag){case 5:ra=!1;break a;case 3:fa=fa.containerInfo;ra=!0;break a;case 4:fa=fa.containerInfo;ra=!0;break a}V=V.return}V=!0}if(5===F.tag||6===F.tag){var ya=
Y,Ha=F,Pa=x,Ya=Ha;a:for(;;)if(og(ya,Ya,Pa),null!==Ya.child&&4!==Ya.tag)Ya.child.return=Ya,Ya=Ya.child;else{if(Ya===Ha)break a;for(;null===Ya.sibling;){if(null===Ya.return||Ya.return===Ha)break a;Ya=Ya.return}Ya.sibling.return=Ya.return;Ya=Ya.sibling}ra?(ya=fa,Ha=F.stateNode,8===ya.nodeType?ya.parentNode.removeChild(Ha):ya.removeChild(Ha)):fa.removeChild(F.stateNode)}else if(4===F.tag){if(null!==F.child){fa=F.stateNode.containerInfo;ra=!0;F.child.return=F;F=F.child;continue}}else if(og(Y,F,x),null!==
F.child){F.child.return=F;F=F.child;continue}if(F===c)break;for(;null===F.sibling;){if(null===F.return||F.return===c)return;F=F.return;4===F.tag&&(V=!1)}F.sibling.return=F.return;F=F.sibling}}function gg(Y,c){switch(c.tag){case 0:case 11:case 14:case 15:case 22:zi(3,c);return;case 1:return;case 5:var x=c.stateNode;if(null!=x){var F=c.memoizedProps,V=null!==Y?Y.memoizedProps:F;Y=c.type;var fa=c.updateQueue;c.updateQueue=null;if(null!==fa){x[Cd]=F;"input"===Y&&"radio"===F.type&&null!=F.name&&M(x,F);
Kb(Y,V);c=Kb(Y,F);for(V=0;V<fa.length;V+=2){var ra=fa[V],ya=fa[V+1];"style"===ra?ub(x,ya):"dangerouslySetInnerHTML"===ra?ii(x,ya):"children"===ra?oa(x,ya):A(x,ra,ya,c)}switch(Y){case "input":P(x,F);break;case "textarea":ia(x,F);break;case "select":c=x._wrapperState.wasMultiple,x._wrapperState.wasMultiple=!!F.multiple,Y=F.value,null!=Y?X(x,!!F.multiple,Y,!1):c!==!!F.multiple&&(null!=F.defaultValue?X(x,!!F.multiple,F.defaultValue,!0):X(x,!!F.multiple,F.multiple?[]:"",!1))}}}return;case 6:if(null===
c.stateNode)throw Error(b(162));c.stateNode.nodeValue=c.memoizedProps;return;case 3:c=c.stateNode;c.hydrate&&(c.hydrate=!1,ib(c.containerInfo));return;case 12:return;case 13:x=c;null===c.memoizedState?F=!1:(F=!0,x=c.child,$i=Wf());if(null!==x)a:for(Y=x;;){if(5===Y.tag)fa=Y.stateNode,F?(fa=fa.style,"function"===typeof fa.setProperty?fa.setProperty("display","none","important"):fa.display="none"):(fa=Y.stateNode,V=Y.memoizedProps.style,V=void 0!==V&&null!==V&&V.hasOwnProperty("display")?V.display:null,
fa.style.display=mb("display",V));else if(6===Y.tag)Y.stateNode.nodeValue=F?"":Y.memoizedProps;else if(13===Y.tag&&null!==Y.memoizedState&&null===Y.memoizedState.dehydrated){fa=Y.child.sibling;fa.return=Y;Y=fa;continue}else if(null!==Y.child){Y.child.return=Y;Y=Y.child;continue}if(Y===x)break;for(;null===Y.sibling;){if(null===Y.return||Y.return===x)break a;Y=Y.return}Y.sibling.return=Y.return;Y=Y.sibling}Oj(c);return;case 19:Oj(c);return;case 17:return}throw Error(b(163));}function Oj(Y){var c=Y.updateQueue;
if(null!==c){Y.updateQueue=null;var x=Y.stateNode;null===x&&(x=Y.stateNode=new Zb);c.forEach(function(F){var V=Wi.bind(null,Y,F);x.has(F)||(x.add(F),F.then(V,V))})}}function Uh(Y,c,x){x=oc(x,null);x.tag=3;x.payload={element:null};var F=c.value;x.callback=function(){Fk||(Fk=!0,Tj=F);ek(Y,c)};return x}function Qf(Y,c,x){x=oc(x,null);x.tag=3;var F=Y.type.getDerivedStateFromError;if("function"===typeof F){var V=c.value;x.payload=function(){ek(Y,c);return F(V)}}var fa=Y.stateNode;null!==fa&&"function"===
typeof fa.componentDidCatch&&(x.callback=function(){"function"!==typeof F&&(null===ef?ef=new Set([this]):ef.add(this),ek(Y,c));var ra=c.stack;this.componentDidCatch(c.value,{componentStack:null!==ra?ra:""})});return x}function fg(){return(ne&(Nd|$d))!==Oc?1073741821-(Wf()/10|0):0!==gi?gi:gi=1073741821-(Wf()/10|0)}function pg(Y,c,x){c=c.mode;if(0===(c&2))return 1073741823;var F=kd();if(0===(c&4))return 99===F?1073741823:1073741822;if((ne&Nd)!==Oc)return xf;if(null!==x)Y=Tb(Y,x.timeoutMs|0||5E3,250);
else switch(F){case 99:Y=1073741823;break;case 98:Y=Tb(Y,150,100);break;case 97:case 96:Y=Tb(Y,5E3,250);break;case 95:Y=2;break;default:throw Error(b(326));}null!==Pf&&Y===xf&&--Y;return Y}function If(Y,c){if(50<Gk)throw Gk=0,wf=null,Error(b(185));Y=Mg(Y,c);if(null!==Y){var x=kd();1073741823===c?(ne&Ed)!==Oc&&(ne&(Nd|$d))===Oc?Pj(Y):(qf(Y),ne===Oc&&fe()):qf(Y);(ne&4)===Oc||98!==x&&99!==x||(null===Gh?Gh=new Map([[Y,c]]):(x=Gh.get(Y),(void 0===x||x>c)&&Gh.set(Y,c)))}}function Mg(Y,c){Y.expirationTime<
c&&(Y.expirationTime=c);var x=Y.alternate;null!==x&&x.expirationTime<c&&(x.expirationTime=c);var F=Y.return,V=null;if(null===F&&3===Y.tag)V=Y.stateNode;else for(;null!==F;){x=F.alternate;F.childExpirationTime<c&&(F.childExpirationTime=c);null!==x&&x.childExpirationTime<c&&(x.childExpirationTime=c);if(null===F.return&&3===F.tag){V=F.stateNode;break}F=F.return}null!==V&&(Pf===V&&(zh(c),yf===Ff&&wa(V,xf)),Ga(V,c));return V}function bh(Y){var c=Y.lastExpiredTime;if(0!==c)return c;c=Y.firstPendingTime;
if(!ea(Y,c))return c;var x=Y.lastPingedTime;Y=Y.nextKnownPendingLevel;Y=x>Y?x:Y;return 2>=Y&&c!==Y?0:Y}function qf(Y){if(0!==Y.lastExpiredTime)Y.callbackExpirationTime=1073741823,Y.callbackPriority=99,Y.callbackNode=Jd(Pj.bind(null,Y));else{var c=bh(Y),x=Y.callbackNode;if(0===c)null!==x&&(Y.callbackNode=null,Y.callbackExpirationTime=0,Y.callbackPriority=90);else{var F=fg();1073741823===c?F=99:1===c||2===c?F=95:(F=10*(1073741821-c)-10*(1073741821-F),F=0>=F?99:250>=F?98:5250>=F?97:95);if(null!==x){var V=
Y.callbackPriority;if(Y.callbackExpirationTime===c&&V>=F)return;x!==Ah&&ig(x)}Y.callbackExpirationTime=c;Y.callbackPriority=F;c=1073741823===c?Jd(Pj.bind(null,Y)):Ld(F,nj.bind(null,Y),{timeout:10*(1073741821-c)-Wf()});Y.callbackNode=c}}}function nj(Y,c){gi=0;if(c)return c=fg(),Sa(Y,c),qf(Y),null;var x=bh(Y);if(0!==x){c=Y.callbackNode;if((ne&(Nd|$d))!==Oc)throw Error(b(327));Dg();Y===Pf&&x===xf||qg(Y,x);if(null!==De){var F=ne;ne|=Nd;var V=Bi();do try{for(;null!==De&&!bl();)De=Og(De);break}catch(ya){Vh(Y,
ya)}while(1);Rj=Yf=cj=null;ne=F;Zc.current=V;if(yf===ke)throw c=Ye,qg(Y,x),wa(Y,x),qf(Y),c;if(null===De)switch(V=Y.finishedWork=Y.current.alternate,Y.finishedExpirationTime=x,F=yf,Pf=null,F){case me:case ke:throw Error(b(345));case te:Sa(Y,2<x?2:x);break;case Sd:wa(Y,x);F=Y.lastSuspendedTime;x===F&&(Y.nextKnownPendingLevel=fk(V));if(1073741823===Ke&&(V=$i+Hi-Wf(),10<V)){if(bi){var fa=Y.lastPingedTime;if(0===fa||fa>=x){Y.lastPingedTime=x;qg(Y,x);break}}fa=bh(Y);if(0!==fa&&fa!==x)break;if(0!==F&&F!==
x){Y.lastPingedTime=F;break}Y.timeoutHandle=Hd(Wh.bind(null,Y),V);break}Wh(Y);break;case Ff:wa(Y,x);F=Y.lastSuspendedTime;x===F&&(Y.nextKnownPendingLevel=fk(V));if(bi&&(V=Y.lastPingedTime,0===V||V>=x)){Y.lastPingedTime=x;qg(Y,x);break}V=bh(Y);if(0!==V&&V!==x)break;if(0!==F&&F!==x){Y.lastPingedTime=F;break}1073741823!==kg?F=10*(1073741821-kg)-Wf():1073741823===Ke?F=0:(F=10*(1073741821-Ke)-5E3,V=Wf(),x=10*(1073741821-x)-V,F=V-F,0>F&&(F=0),F=(120>F?120:480>F?480:1080>F?1080:1920>F?1920:3E3>F?3E3:4320>
F?4320:1960*Xc(F/1960))-F,x<F&&(F=x));if(10<F){Y.timeoutHandle=Hd(Wh.bind(null,Y),F);break}Wh(Y);break;case gf:if(1073741823!==Ke&&null!==Qj){fa=Ke;var ra=Qj;F=ra.busyMinDurationMs|0;0>=F?F=0:(V=ra.busyDelayMs|0,fa=Wf()-(10*(1073741821-fa)-(ra.timeoutMs|0||5E3)),F=fa<=V?0:V+F-fa);if(10<F){wa(Y,x);Y.timeoutHandle=Hd(Wh.bind(null,Y),F);break}}Wh(Y);break;default:throw Error(b(329));}qf(Y);if(Y.callbackNode===c)return nj.bind(null,Y)}}return null}function Pj(Y){var c=Y.lastExpiredTime;c=0!==c?c:1073741823;
if((ne&(Nd|$d))!==Oc)throw Error(b(327));Dg();Y===Pf&&c===xf||qg(Y,c);if(null!==De){var x=ne;ne|=Nd;var F=Bi();do try{for(;null!==De;)De=Og(De);break}catch(V){Vh(Y,V)}while(1);Rj=Yf=cj=null;ne=x;Zc.current=F;if(yf===ke)throw x=Ye,qg(Y,c),wa(Y,c),qf(Y),x;if(null!==De)throw Error(b(261));Y.finishedWork=Y.current.alternate;Y.finishedExpirationTime=c;Pf=null;Wh(Y);qf(Y)}return null}function Ud(){if(null!==Gh){var Y=Gh;Gh=null;Y.forEach(function(c,x){Sa(x,c);qf(x)});fe()}}function tk(Y,c){var x=ne;ne|=
1;try{return Y(c)}finally{ne=x,ne===Oc&&fe()}}function Ng(Y,c){var x=ne;ne&=-2;ne|=Ed;try{return Y(c)}finally{ne=x,ne===Oc&&fe()}}function qg(Y,c){Y.finishedWork=null;Y.finishedExpirationTime=0;var x=Y.timeoutHandle;-1!==x&&(Y.timeoutHandle=-1,Ef(x));if(null!==De)for(x=De.return;null!==x;){var F=x;switch(F.tag){case 1:F=F.type.childContextTypes;null!==F&&void 0!==F&&pf();break;case 3:th();Xd(Sg);Xd(tg);break;case 5:ij(F);break;case 4:th();break;case 13:Xd(ha);break;case 19:Xd(ha);break;case 10:Hc(F)}x=
x.return}Pf=Y;De=mh(Y.current,null);xf=c;yf=me;Ye=null;kg=Ke=1073741823;Qj=null;Bh=0;bi=!1}function Vh(Y,c){do{try{Rj=Yf=cj=null;ta.current=Wa;if(Ra)for(var x=Da.memoizedState;null!==x;){var F=x.queue;null!==F&&(F.pending=null);x=x.next}Aa=0;Ja=Qa=Da=null;Ra=!1;if(null===De||null===De.return)return yf=ke,Ye=c,De=null;a:{var V=Y,fa=De.return,ra=De,ya=c;c=xf;ra.effectTag|=2048;ra.firstEffect=ra.lastEffect=null;if(null!==ya&&"object"===typeof ya&&"function"===typeof ya.then){var Ha=ya;if(0===(ra.mode&
2)){var Pa=ra.alternate;Pa?(ra.updateQueue=Pa.updateQueue,ra.memoizedState=Pa.memoizedState,ra.expirationTime=Pa.expirationTime):(ra.updateQueue=null,ra.memoizedState=null)}var Ya=0!==(ha.current&1),hb=fa;do{var Ab;if(Ab=13===hb.tag){var Fb=hb.memoizedState;if(null!==Fb)Ab=null!==Fb.dehydrated?!0:!1;else{var Jb=hb.memoizedProps;Ab=void 0===Jb.fallback?!1:!0!==Jb.unstable_avoidThisFallback?!0:Ya?!1:!0}}if(Ab){var Rb=hb.updateQueue;if(null===Rb){var rb=new Set;rb.add(Ha);hb.updateQueue=rb}else Rb.add(Ha);
if(0===(hb.mode&2)){hb.effectTag|=64;ra.effectTag&=-2981;if(1===ra.tag)if(null===ra.alternate)ra.tag=17;else{var zb=oc(1073741823,null);zb.tag=2;sc(ra,zb)}ra.expirationTime=1073741823;break a}ya=void 0;ra=c;var hc=V.pingCache;null===hc?(hc=V.pingCache=new wc,ya=new Set,hc.set(Ha,ya)):(ya=hc.get(Ha),void 0===ya&&(ya=new Set,hc.set(Ha,ya)));if(!ya.has(ra)){ya.add(ra);var vc=Yh.bind(null,V,Ha,ra);Ha.then(vc,vc)}hb.effectTag|=4096;hb.expirationTime=c;break a}hb=hb.return}while(null!==hb);ya=Error((C(ra.type)||
"A React component")+" suspended while rendering, but no fallback UI was specified.\n\nAdd a \x3cSuspense fallback\x3d...\x3e component higher in the tree to provide a loading indicator or placeholder to display."+u(ra))}yf!==gf&&(yf=te);ya=Ui(ya,ra);hb=fa;do{switch(hb.tag){case 3:Ha=ya;hb.effectTag|=4096;hb.expirationTime=c;var pc=Uh(hb,Ha,c);tc(hb,pc);break a;case 1:Ha=ya;var $c=hb.type,fd=hb.stateNode;if(0===(hb.effectTag&64)&&("function"===typeof $c.getDerivedStateFromError||null!==fd&&"function"===
typeof fd.componentDidCatch&&(null===ef||!ef.has(fd)))){hb.effectTag|=4096;hb.expirationTime=c;var nd=Qf(hb,Ha,c);tc(hb,nd);break a}}hb=hb.return}while(null!==hb)}De=uk(De)}catch(xd){c=xd;continue}break}while(1)}function Bi(){var Y=Zc.current;Zc.current=Wa;return null===Y?Wa:Y}function Ci(Y,c){Y<Ke&&2<Y&&(Ke=Y);null!==c&&Y<kg&&2<Y&&(kg=Y,Qj=c)}function zh(Y){Y>Bh&&(Bh=Y)}function Og(Y){var c=cl(Y.alternate,Y,xf);Y.memoizedProps=Y.pendingProps;null===c&&(c=uk(Y));cd.current=null;return c}function uk(Y){De=
Y;do{var c=De.alternate;Y=De.return;if(0===(De.effectTag&2048)){c=yi(c,De,xf);if(1===xf||1!==De.childExpirationTime){for(var x=0,F=De.child;null!==F;){var V=F.expirationTime,fa=F.childExpirationTime;V>x&&(x=V);fa>x&&(x=fa);F=F.sibling}De.childExpirationTime=x}if(null!==c)return c;null!==Y&&0===(Y.effectTag&2048)&&(null===Y.firstEffect&&(Y.firstEffect=De.firstEffect),null!==De.lastEffect&&(null!==Y.lastEffect&&(Y.lastEffect.nextEffect=De.firstEffect),Y.lastEffect=De.lastEffect),1<De.effectTag&&(null!==
Y.lastEffect?Y.lastEffect.nextEffect=De:Y.firstEffect=De,Y.lastEffect=De))}else{c=Lf(De);if(null!==c)return c.effectTag&=2047,c;null!==Y&&(Y.firstEffect=Y.lastEffect=null,Y.effectTag|=2048)}c=De.sibling;if(null!==c)return c;De=Y}while(null!==De);yf===me&&(yf=gf);return null}function fk(Y){var c=Y.expirationTime;Y=Y.childExpirationTime;return c>Y?c:Y}function Wh(Y){var c=kd();Td(99,Cg.bind(null,Y,c));return null}function Cg(Y,c){do Dg();while(null!==Uj);if((ne&(Nd|$d))!==Oc)throw Error(b(327));var x=
Y.finishedWork,F=Y.finishedExpirationTime;if(null===x)return null;Y.finishedWork=null;Y.finishedExpirationTime=0;if(x===Y.current)throw Error(b(177));Y.callbackNode=null;Y.callbackExpirationTime=0;Y.callbackPriority=90;Y.nextKnownPendingLevel=0;var V=fk(x);Y.firstPendingTime=V;F<=Y.lastSuspendedTime?Y.firstSuspendedTime=Y.lastSuspendedTime=Y.nextKnownPendingLevel=0:F<=Y.firstSuspendedTime&&(Y.firstSuspendedTime=F-1);F<=Y.lastPingedTime&&(Y.lastPingedTime=0);F<=Y.lastExpiredTime&&(Y.lastExpiredTime=
0);Y===Pf&&(De=Pf=null,xf=0);1<x.effectTag?null!==x.lastEffect?(x.lastEffect.nextEffect=x,V=x.firstEffect):V=x:V=x.firstEffect;if(null!==V){var fa=ne;ne|=$d;cd.current=null;fh=Rg;var ra=kb();if($b(ra)){if("selectionStart"in ra)var ya={start:ra.selectionStart,end:ra.selectionEnd};else a:{ya=(ya=ra.ownerDocument)&&ya.defaultView||window;var Ha=ya.getSelection&&ya.getSelection();if(Ha&&0!==Ha.rangeCount){ya=Ha.anchorNode;var Pa=Ha.anchorOffset,Ya=Ha.focusNode;Ha=Ha.focusOffset;try{ya.nodeType,Ya.nodeType}catch(vd){ya=
null;break a}var hb=0,Ab=-1,Fb=-1,Jb=0,Rb=0,rb=ra,zb=null;b:for(;;){for(var hc;;){rb!==ya||0!==Pa&&3!==rb.nodeType||(Ab=hb+Pa);rb!==Ya||0!==Ha&&3!==rb.nodeType||(Fb=hb+Ha);3===rb.nodeType&&(hb+=rb.nodeValue.length);if(null===(hc=rb.firstChild))break;zb=rb;rb=hc}for(;;){if(rb===ra)break b;zb===ya&&++Jb===Pa&&(Ab=hb);zb===Ya&&++Rb===Ha&&(Fb=hb);if(null!==(hc=rb.nextSibling))break;rb=zb;zb=rb.parentNode}rb=hc}ya=-1===Ab||-1===Fb?null:{start:Ab,end:Fb}}else ya=null}ya=ya||{start:0,end:0}}else ya=null;
bk={activeElementDetached:null,focusedElem:ra,selectionRange:ya};Rg=!1;ae=V;do try{Ve()}catch(vd){if(null===ae)throw Error(b(330));Mf(ae,vd);ae=ae.nextEffect}while(null!==ae);ae=V;do try{for(ra=Y,ya=c;null!==ae;){var vc=ae.effectTag;vc&16&&oa(ae.stateNode,"");if(vc&128){var pc=ae.alternate;if(null!==pc){var $c=pc.ref;null!==$c&&("function"===typeof $c?$c(null):$c.current=null)}}switch(vc&1038){case 2:mj(ae);ae.effectTag&=-3;break;case 6:mj(ae);ae.effectTag&=-3;gg(ae.alternate,ae);break;case 1024:ae.effectTag&=
-1025;break;case 1028:ae.effectTag&=-1025;gg(ae.alternate,ae);break;case 4:gg(ae.alternate,ae);break;case 8:Pa=ae,Vi(ra,Pa,ya),Ai(Pa)}ae=ae.nextEffect}}catch(vd){if(null===ae)throw Error(b(330));Mf(ae,vd);ae=ae.nextEffect}while(null!==ae);$c=bk;pc=kb();vc=$c.focusedElem;ya=$c.selectionRange;if(pc!==vc&&vc&&vc.ownerDocument&&bd(vc.ownerDocument.documentElement,vc)){null!==ya&&$b(vc)&&(pc=ya.start,$c=ya.end,void 0===$c&&($c=pc),"selectionStart"in vc?(vc.selectionStart=pc,vc.selectionEnd=Math.min($c,
vc.value.length)):($c=(pc=vc.ownerDocument||document)&&pc.defaultView||window,$c.getSelection&&($c=$c.getSelection(),Pa=vc.textContent.length,ra=Math.min(ya.start,Pa),ya=void 0===ya.end?ra:Math.min(ya.end,Pa),!$c.extend&&ra>ya&&(Pa=ya,ya=ra,ra=Pa),Pa=Nc(vc,ra),Ya=Nc(vc,ya),Pa&&Ya&&(1!==$c.rangeCount||$c.anchorNode!==Pa.node||$c.anchorOffset!==Pa.offset||$c.focusNode!==Ya.node||$c.focusOffset!==Ya.offset)&&(pc=pc.createRange(),pc.setStart(Pa.node,Pa.offset),$c.removeAllRanges(),ra>ya?($c.addRange(pc),
$c.extend(Ya.node,Ya.offset)):(pc.setEnd(Ya.node,Ya.offset),$c.addRange(pc))))));pc=[];for($c=vc;$c=$c.parentNode;)1===$c.nodeType&&pc.push({element:$c,left:$c.scrollLeft,top:$c.scrollTop});"function"===typeof vc.focus&&vc.focus();for(vc=0;vc<pc.length;vc++)$c=pc[vc],$c.element.scrollLeft=$c.left,$c.element.scrollTop=$c.top}Rg=!!fh;bk=fh=null;Y.current=x;ae=V;do try{for(vc=Y;null!==ae;){var fd=ae.effectTag;fd&36&&ah(vc,ae.alternate,ae);if(fd&128){pc=void 0;var nd=ae.ref;if(null!==nd){var xd=ae.stateNode;
switch(ae.tag){case 5:pc=xd;break;default:pc=xd}"function"===typeof nd?nd(pc):nd.current=pc}}ae=ae.nextEffect}}catch(vd){if(null===ae)throw Error(b(330));Mf(ae,vd);ae=ae.nextEffect}while(null!==ae);ae=null;hk();ne=fa}else Y.current=x;if(af)af=!1,Uj=Y,Ni=c;else for(ae=V;null!==ae;)c=ae.nextEffect,ae.nextEffect=null,ae=c;c=Y.firstPendingTime;0===c&&(ef=null);1073741823===c?Y===wf?Gk++:(Gk=0,wf=Y):Gk=0;"function"===typeof Hk&&Hk(x.stateNode,F);qf(Y);if(Fk)throw Fk=!1,Y=Tj,Tj=null,Y;if((ne&Ed)!==Oc)return null;
fe();return null}function Ve(){for(;null!==ae;){var Y=ae.effectTag;0!==(Y&256)&&dg(ae.alternate,ae);0===(Y&512)||af||(af=!0,Ld(97,function(){Dg();return null}));ae=ae.nextEffect}}function Dg(){if(90!==Ni){var Y=97<Ni?97:Ni;Ni=90;return Td(Y,Xh)}}function Xh(){if(null===Uj)return!1;var Y=Uj;Uj=null;if((ne&(Nd|$d))!==Oc)throw Error(b(331));var c=ne;ne|=$d;for(Y=Y.current.firstEffect;null!==Y;){try{var x=Y;if(0!==(x.effectTag&512))switch(x.tag){case 0:case 11:case 15:case 22:zi(5,x),Th(5,x)}}catch(F){if(null===
Y)throw Error(b(330));Mf(Y,F)}x=Y.nextEffect;Y.nextEffect=null;Y=x}ne=c;fe();return!0}function oj(Y,c,x){c=Ui(x,c);c=Uh(Y,c,1073741823);sc(Y,c);Y=Mg(Y,1073741823);null!==Y&&qf(Y)}function Mf(Y,c){if(3===Y.tag)oj(Y,Y,c);else for(var x=Y.return;null!==x;){if(3===x.tag){oj(x,Y,c);break}else if(1===x.tag){var F=x.stateNode;if("function"===typeof x.type.getDerivedStateFromError||"function"===typeof F.componentDidCatch&&(null===ef||!ef.has(F))){Y=Ui(c,Y);Y=Qf(x,Y,1073741823);sc(x,Y);x=Mg(x,1073741823);
null!==x&&qf(x);break}}x=x.return}}function Yh(Y,c,x){var F=Y.pingCache;null!==F&&F.delete(c);Pf===Y&&xf===x?yf===Ff||yf===Sd&&1073741823===Ke&&Wf()-$i<Hi?qg(Y,xf):bi=!0:ea(Y,x)&&(c=Y.lastPingedTime,0!==c&&c<x||(Y.lastPingedTime=x,qf(Y)))}function Wi(Y,c){var x=Y.stateNode;null!==x&&x.delete(c);c=0;0===c&&(c=fg(),c=pg(c,Y,null));Y=Mg(Y,c);null!==Y&&qf(Y)}function kh(Y){if("undefined"===typeof __REACT_DEVTOOLS_GLOBAL_HOOK__)return!1;var c=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(c.isDisabled||!c.supportsFiber)return!0;
try{var x=c.inject(Y);Hk=function(F){try{c.onCommitFiberRoot(x,F,void 0,64===(F.current.effectTag&64))}catch(V){}};Vk=function(F){try{c.onCommitFiberUnmount(x,F)}catch(V){}}}catch(F){}return!0}function lh(Y,c,x,F){this.tag=Y;this.key=x;this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null;this.index=0;this.ref=null;this.pendingProps=c;this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null;this.mode=F;this.effectTag=0;this.lastEffect=this.firstEffect=
this.nextEffect=null;this.childExpirationTime=this.expirationTime=0;this.alternate=null}function mf(Y,c,x,F){return new lh(Y,c,x,F)}function hg(Y){Y=Y.prototype;return!(!Y||!Y.isReactComponent)}function vk(Y){if("function"===typeof Y)return hg(Y)?1:0;if(void 0!==Y&&null!==Y){Y=Y.$$typeof;if(Y===Bf)return 11;if(Y===$h)return 14}return 2}function mh(Y,c){var x=Y.alternate;null===x?(x=mf(Y.tag,c,Y.key,Y.mode),x.elementType=Y.elementType,x.type=Y.type,x.stateNode=Y.stateNode,x.alternate=Y,Y.alternate=
x):(x.pendingProps=c,x.effectTag=0,x.nextEffect=null,x.firstEffect=null,x.lastEffect=null);x.childExpirationTime=Y.childExpirationTime;x.expirationTime=Y.expirationTime;x.child=Y.child;x.memoizedProps=Y.memoizedProps;x.memoizedState=Y.memoizedState;x.updateQueue=Y.updateQueue;c=Y.dependencies;x.dependencies=null===c?null:{expirationTime:c.expirationTime,firstContext:c.firstContext,responders:c.responders};x.sibling=Y.sibling;x.index=Y.index;x.ref=Y.ref;return x}function Di(Y,c,x,F,V,fa){var ra=2;
F=Y;if("function"===typeof Y)hg(Y)&&(ra=1);else if("string"===typeof Y)ra=5;else a:switch(Y){case of:return lb(x.children,V,fa,c);case Kg:ra=8;V|=7;break;case pj:ra=8;V|=1;break;case Zh:return Y=mf(12,x,c,V|8),Y.elementType=Zh,Y.type=Zh,Y.expirationTime=fa,Y;case Yi:return Y=mf(13,x,c,V),Y.type=Yi,Y.elementType=Yi,Y.expirationTime=fa,Y;case Nf:return Y=mf(19,x,c,V),Y.elementType=Nf,Y.expirationTime=fa,Y;default:if("object"===typeof Y&&null!==Y)switch(Y.$$typeof){case Db:ra=10;break a;case Ok:ra=9;
break a;case Bf:ra=11;break a;case $h:ra=14;break a;case ai:ra=16;F=null;break a;case Zi:ra=22;break a}throw Error(b(130,null==Y?Y:typeof Y,""));}c=mf(ra,x,c,V);c.elementType=Y;c.type=F;c.expirationTime=fa;return c}function lb(Y,c,x,F){Y=mf(7,Y,F,c);Y.expirationTime=x;return Y}function W(Y,c,x){Y=mf(6,Y,null,c);Y.expirationTime=x;return Y}function aa(Y,c,x){c=mf(4,null!==Y.children?Y.children:[],Y.key,c);c.expirationTime=x;c.stateNode={containerInfo:Y.containerInfo,pendingChildren:null,implementation:Y.implementation};
return c}function Z(Y,c,x){this.tag=c;this.current=null;this.containerInfo=Y;this.pingCache=this.pendingChildren=null;this.finishedExpirationTime=0;this.finishedWork=null;this.timeoutHandle=-1;this.pendingContext=this.context=null;this.hydrate=x;this.callbackNode=null;this.callbackPriority=90;this.lastExpiredTime=this.lastPingedTime=this.nextKnownPendingLevel=this.lastSuspendedTime=this.firstSuspendedTime=this.firstPendingTime=0}function ea(Y,c){var x=Y.firstSuspendedTime;Y=Y.lastSuspendedTime;return 0!==
x&&x>=c&&Y<=c}function wa(Y,c){var x=Y.firstSuspendedTime,F=Y.lastSuspendedTime;x<c&&(Y.firstSuspendedTime=c);if(F>c||0===x)Y.lastSuspendedTime=c;c<=Y.lastPingedTime&&(Y.lastPingedTime=0);c<=Y.lastExpiredTime&&(Y.lastExpiredTime=0)}function Ga(Y,c){c>Y.firstPendingTime&&(Y.firstPendingTime=c);var x=Y.firstSuspendedTime;0!==x&&(c>=x?Y.firstSuspendedTime=Y.lastSuspendedTime=Y.nextKnownPendingLevel=0:c>=Y.lastSuspendedTime&&(Y.lastSuspendedTime=c+1),c>Y.nextKnownPendingLevel&&(Y.nextKnownPendingLevel=
c))}function Sa(Y,c){var x=Y.lastExpiredTime;if(0===x||x>c)Y.lastExpiredTime=c}function ab(Y,c,x,F){var V=c.current,fa=fg(),ra=Bj.suspense;fa=pg(fa,V,ra);a:if(x){x=x._reactInternalFiber;b:{if(pa(x)!==x||1!==x.tag)throw Error(b(170));var ya=x;do{switch(ya.tag){case 3:ya=ya.stateNode.context;break b;case 1:if(Qe(ya.type)){ya=ya.stateNode.__reactInternalMemoizedMergedChildContext;break b}}ya=ya.return}while(null!==ya);throw Error(b(171));}if(1===x.tag){var Ha=x.type;if(Qe(Ha)){x=Vb(x,Ha,ya);break a}}x=
ya}else x=ei;null===c.context?c.context=x:c.pendingContext=x;c=oc(fa,ra);c.payload={element:Y};F=void 0===F?null:F;null!==F&&(c.callback=F);sc(V,c);If(V,fa);return fa}function yb(Y){Y=Y.current;if(!Y.child)return null;switch(Y.child.tag){case 5:return Y.child.stateNode;default:return Y.child.stateNode}}function Hb(Y,c){Y=Y.memoizedState;null!==Y&&null!==Y.dehydrated&&Y.retryTime<c&&(Y.retryTime=c)}function Ib(Y,c){Hb(Y,c);(Y=Y.alternate)&&Hb(Y,c)}function nc(Y,c,x){x=null!=x&&!0===x.hydrate;var F=
new Z(Y,c,x),V=mf(3,null,null,2===c?7:1===c?3:0);F.current=V;V.stateNode=F;Pc(V);Y[ee]=F.current;x&&0!==c&&xa(Y,9===Y.nodeType?Y:Y.ownerDocument);this._internalRoot=F}function mc(Y){return!(!Y||1!==Y.nodeType&&9!==Y.nodeType&&11!==Y.nodeType&&(8!==Y.nodeType||" react-mount-point-unstable "!==Y.nodeValue))}function cc(Y,c){c||(c=Y?9===Y.nodeType?Y.documentElement:Y.firstChild:null,c=!(!c||1!==c.nodeType||!c.hasAttribute("data-reactroot")));if(!c)for(var x;x=Y.lastChild;)Y.removeChild(x);return new nc(Y,
0,c?{hydrate:!0}:void 0)}function lc(Y,c,x,F,V){var fa=x._reactRootContainer;if(fa){var ra=fa._internalRoot;if("function"===typeof V){var ya=V;V=function(){var Pa=yb(ra);ya.call(Pa)}}ab(c,ra,Y,V)}else{fa=x._reactRootContainer=cc(x,F);ra=fa._internalRoot;if("function"===typeof V){var Ha=V;V=function(){var Pa=yb(ra);Ha.call(Pa)}}Ng(function(){ab(c,ra,Y,V)})}return yb(ra)}function kc(Y,c,x){var F=3<arguments.length&&void 0!==arguments[3]?arguments[3]:null;return{$$typeof:jg,key:null==F?null:""+F,children:Y,
containerInfo:c,implementation:x}}function Gb(Y,c){var x=2<arguments.length&&void 0!==arguments[2]?arguments[2]:null;if(!mc(c))throw Error(b(200));return kc(Y,c,null,x)}var dc=Fd(5),Dc=Fd(0),Uc=Fd(17);if(!dc)throw Error(b(227));var jd=!1,Ic=null,ld=!1,id=null,yd={onError:function(Y){jd=!0;Ic=Y}},zd=null,ud=null,ie=null,ge=null,Ee={},Ge=[],Be={},Qd={},qe={},Ne=!("undefined"===typeof window||"undefined"===typeof window.document||"undefined"===typeof window.document.createElement),ze=null,Te=null,nf=
null,rf=p,Eg=!1,df=!1,Rf=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,Pg=Object.prototype.hasOwnProperty,Ei={},Vf={},Af={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(Y){Af[Y]=
new y(Y,0,!1,Y,null,!1)});[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(Y){var c=Y[0];Af[c]=new y(c,1,!1,Y[1],null,!1)});["contentEditable","draggable","spellCheck","value"].forEach(function(Y){Af[Y]=new y(Y,2,!1,Y.toLowerCase(),null,!1)});["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(Y){Af[Y]=new y(Y,2,!1,Y,null,!1)});"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(Y){Af[Y]=
new y(Y,3,!1,Y.toLowerCase(),null,!1)});["checked","multiple","muted","selected"].forEach(function(Y){Af[Y]=new y(Y,3,!0,Y,null,!1)});["capture","download"].forEach(function(Y){Af[Y]=new y(Y,4,!1,Y,null,!1)});["cols","rows","size","span"].forEach(function(Y){Af[Y]=new y(Y,6,!1,Y,null,!1)});["rowSpan","start"].forEach(function(Y){Af[Y]=new y(Y,5,!1,Y.toLowerCase(),null,!1)});var Ce=/[\-:]([a-z])/g;"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(Y){var c=
Y.replace(Ce,B);Af[c]=new y(c,1,!1,Y,null,!1)});"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(Y){var c=Y.replace(Ce,B);Af[c]=new y(c,1,!1,Y,"http://www.w3.org/1999/xlink",!1)});["xml:base","xml:lang","xml:space"].forEach(function(Y){var c=Y.replace(Ce,B);Af[c]=new y(c,1,!1,Y,"http://www.w3.org/XML/1998/namespace",!1)});["tabIndex","crossOrigin"].forEach(function(Y){Af[Y]=new y(Y,1,!1,Y.toLowerCase(),null,!1)});Af.xlinkHref=new y("xlinkHref",
1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0);["src","href","action","formAction"].forEach(function(Y){Af[Y]=new y(Y,1,!1,Y.toLowerCase(),null,!0)});var Ie=dc.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED;Ie.hasOwnProperty("ReactCurrentDispatcher")||(Ie.ReactCurrentDispatcher={current:null});Ie.hasOwnProperty("ReactCurrentBatchConfig")||(Ie.ReactCurrentBatchConfig={suspense:null});var Qg=/^(.*)[\\\/]/,bf="function"===typeof Symbol&&Symbol.for,Fg=bf?Symbol.for("react.element"):60103,jg=
bf?Symbol.for("react.portal"):60106,of=bf?Symbol.for("react.fragment"):60107,pj=bf?Symbol.for("react.strict_mode"):60108,Zh=bf?Symbol.for("react.profiler"):60114,Db=bf?Symbol.for("react.provider"):60109,Ok=bf?Symbol.for("react.context"):60110,Kg=bf?Symbol.for("react.concurrent_mode"):60111,Bf=bf?Symbol.for("react.forward_ref"):60112,Yi=bf?Symbol.for("react.suspense"):60113,Nf=bf?Symbol.for("react.suspense_list"):60120,$h=bf?Symbol.for("react.memo"):60115,ai=bf?Symbol.for("react.lazy"):60116,Zi=bf?
Symbol.for("react.block"):60121,Fi="function"===typeof Symbol&&Symbol.iterator,de,ii=function(Y){return"undefined"!==typeof MSApp&&MSApp.execUnsafeLocalFunction?function(c,x,F,V){MSApp.execUnsafeLocalFunction(function(){return Y(c,x,F,V)})}:Y}(function(Y,c){if("http://www.w3.org/2000/svg"!==Y.namespaceURI||"innerHTML"in Y)Y.innerHTML=c;else{de=de||document.createElement("div");de.innerHTML="\x3csvg\x3e"+c.valueOf().toString()+"\x3c/svg\x3e";for(c=de.firstChild;Y.firstChild;)Y.removeChild(Y.firstChild);
for(;c.firstChild;)Y.appendChild(c.firstChild)}}),ph={animationend:sa("Animation","AnimationEnd"),animationiteration:sa("Animation","AnimationIteration"),animationstart:sa("Animation","AnimationStart"),transitionend:sa("Transition","TransitionEnd")},Wg={},pk={};Ne&&(pk=document.createElement("div").style,"AnimationEvent"in window||(delete ph.animationend.animation,delete ph.animationiteration.animation,delete ph.animationstart.animation),"TransitionEvent"in window||delete ph.transitionend.transition);
var qk=ma("animationend"),Yj=ma("animationiteration"),Pe=ma("animationstart"),xk=ma("transitionend"),Xg="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),Hh=new ("function"===typeof WeakMap?WeakMap:Map),$f=null,ji=[],ki=!1,Yd=[],lf=null,qh=null,Ze=null,je=new Map,We=new Map,Gi=[],zk="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput close cancel copy cut paste click change contextmenu reset submit".split(" "),
yk="focus blur dragenter dragleave mouseover mouseout pointerover pointerout gotpointercapture lostpointercapture".split(" "),gk={},qj=new Map,Ii=new Map,rj=["abort","abort",qk,"animationEnd",Yj,"animationIteration",Pe,"animationStart","canplay","canPlay","canplaythrough","canPlayThrough","durationchange","durationChange","emptied","emptied","encrypted","encrypted","ended","ended","error","error","gotpointercapture","gotPointerCapture","load","load","loadeddata","loadedData","loadedmetadata","loadedMetadata",
"loadstart","loadStart","lostpointercapture","lostPointerCapture","playing","playing","progress","progress","seeking","seeking","stalled","stalled","suspend","suspend","timeupdate","timeUpdate",xk,"transitionEnd","waiting","waiting"];qb("blur blur cancel cancel click click close close contextmenu contextMenu copy copy cut cut auxclick auxClick dblclick doubleClick dragend dragEnd dragstart dragStart drop drop focus focus input input invalid invalid keydown keyDown keypress keyPress keyup keyUp mousedown mouseDown mouseup mouseUp paste paste pause pause play play pointercancel pointerCancel pointerdown pointerDown pointerup pointerUp ratechange rateChange reset reset seeked seeked submit submit touchcancel touchCancel touchend touchEnd touchstart touchStart volumechange volumeChange".split(" "),
0);qb("drag drag dragenter dragEnter dragexit dragExit dragleave dragLeave dragover dragOver mousemove mouseMove mouseout mouseOut mouseover mouseOver pointermove pointerMove pointerout pointerOut pointerover pointerOver scroll scroll toggle toggle touchmove touchMove wheel wheel".split(" "),1);qb(rj,2);for(var Zj="change selectionchange textInput compositionstart compositionend compositionupdate".split(" "),Gd=0;Gd<Zj.length;Gd++)Ii.set(Zj[Gd],0);var rk=Uc.unstable_UserBlockingPriority,Xf=Uc.unstable_runWithPriority,
Rg=!0,li={animationIterationCount:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,
floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},Dj=["Webkit","ms","Moz","O"];Object.keys(li).forEach(function(Y){Dj.forEach(function(c){c=c+Y.charAt(0).toUpperCase()+Y.substring(1);li[c]=li[Y]})});var ak=Dc({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0}),ag="$",Xe="/$",mi="$?",sj="$!",fh=null,bk=null,Hd="function"===typeof setTimeout?
setTimeout:void 0,Ef="function"===typeof clearTimeout?clearTimeout:void 0,vf=Math.random().toString(36).slice(2),Yg="__reactInternalInstance$"+vf,Cd="__reactEventHandlers$"+vf,ee="__reactContainere$"+vf,rh=null,Ch=null,Ji=null;Dc(Yc.prototype,{preventDefault:function(){this.defaultPrevented=!0;var Y=this.nativeEvent;Y&&(Y.preventDefault?Y.preventDefault():"unknown"!==typeof Y.returnValue&&(Y.returnValue=!1),this.isDefaultPrevented=qc)},stopPropagation:function(){var Y=this.nativeEvent;Y&&(Y.stopPropagation?
Y.stopPropagation():"unknown"!==typeof Y.cancelBubble&&(Y.cancelBubble=!0),this.isPropagationStopped=qc)},persist:function(){this.isPersistent=qc},isPersistent:Tc,destructor:function(){var Y=this.constructor.Interface,c;for(c in Y)this[c]=null;this.nativeEvent=this._targetInst=this.dispatchConfig=null;this.isPropagationStopped=this.isDefaultPrevented=Tc;this._dispatchInstances=this._dispatchListeners=null}});Yc.Interface={type:null,target:null,currentTarget:function(){return null},eventPhase:null,
bubbles:null,cancelable:null,timeStamp:function(Y){return Y.timeStamp||Date.now()},defaultPrevented:null,isTrusted:null};Yc.extend=function(Y){function c(){}function x(){return F.apply(this,arguments)}var F=this;c.prototype=F.prototype;var V=new c;Dc(V,x.prototype);x.prototype=V;x.prototype.constructor=x;x.Interface=Dc({},F.Interface,Y);x.extend=F.extend;Fc(x);return x};Fc(Yc);var wg=Yc.extend({data:null}),ch=Yc.extend({data:null}),hj=[9,13,27,32],Uf=Ne&&"CompositionEvent"in window,Oe=null;Ne&&"documentMode"in
document&&(Oe=document.documentMode);var Oi=Ne&&"TextEvent"in window&&!Oe,Ih=Ne&&(!Uf||Oe&&8<Oe&&11>=Oe),Jh=String.fromCharCode(32),Of={beforeInput:{phasedRegistrationNames:{bubbled:"onBeforeInput",captured:"onBeforeInputCapture"},dependencies:["compositionend","keypress","textInput","paste"]},compositionEnd:{phasedRegistrationNames:{bubbled:"onCompositionEnd",captured:"onCompositionEndCapture"},dependencies:"blur compositionend keydown keypress keyup mousedown".split(" ")},compositionStart:{phasedRegistrationNames:{bubbled:"onCompositionStart",
captured:"onCompositionStartCapture"},dependencies:"blur compositionstart keydown keypress keyup mousedown".split(" ")},compositionUpdate:{phasedRegistrationNames:{bubbled:"onCompositionUpdate",captured:"onCompositionUpdateCapture"},dependencies:"blur compositionupdate keydown keypress keyup mousedown".split(" ")}},lg=!1,xg=!1,gh={eventTypes:Of,extractEvents:function(Y,c,x,F){var V;if(Uf)a:{switch(Y){case "compositionstart":var fa=Of.compositionStart;break a;case "compositionend":fa=Of.compositionEnd;
break a;case "compositionupdate":fa=Of.compositionUpdate;break a}fa=void 0}else xg?dd(Y,x)&&(fa=Of.compositionEnd):"keydown"===Y&&229===x.keyCode&&(fa=Of.compositionStart);fa?(Ih&&"ko"!==x.locale&&(xg||fa!==Of.compositionStart?fa===Of.compositionEnd&&xg&&(V=Yb()):(rh=F,Ch="value"in rh?rh.value:rh.textContent,xg=!0)),fa=wg.getPooled(fa,c,x,F),V?fa.data=V:(V=Ac(x),null!==V&&(fa.data=V)),Mb(fa),V=fa):V=null;(Y=Oi?Jc(Y,x):gd(Y,x))?(c=ch.getPooled(Of.beforeInput,c,x,F),c.data=Y,Mb(c)):c=null;return null===
V?c:null===c?V:[V,c]}},Pi={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0},ni={change:{phasedRegistrationNames:{bubbled:"onChange",captured:"onChangeCapture"},dependencies:"blur change click focus input keydown keyup selectionchange".split(" ")}},yg=null,bg=null,Ej=!1;Ne&&(Ej=nb("input")&&(!document.documentMode||9<document.documentMode));var ci={eventTypes:ni,_isInputEventSupported:Ej,extractEvents:function(Y,
c,x,F){var V=c?Sb(c):window,fa=V.nodeName&&V.nodeName.toLowerCase();if("select"===fa||"input"===fa&&"file"===V.type)var ra=rd;else if(Vc(V))if(Ej)ra=Rd;else{ra=be;var ya=Bd}else(fa=V.nodeName)&&"input"===fa.toLowerCase()&&("checkbox"===V.type||"radio"===V.type)&&(ra=le);if(ra&&(ra=ra(Y,c)))return Gc(ra,x,F);ya&&ya(Y,V,c);"blur"===Y&&(Y=V._wrapperState)&&Y.controlled&&"number"===V.type&&O(V,"number",V.value)}},oi=Yc.extend({view:null,detail:null}),Kh={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",
Shift:"shiftKey"},aj=0,tj=0,uj=!1,Ki=!1,vj=oi.extend({screenX:null,screenY:null,clientX:null,clientY:null,pageX:null,pageY:null,ctrlKey:null,shiftKey:null,altKey:null,metaKey:null,getModifierState:Je,button:null,buttons:null,relatedTarget:function(Y){return Y.relatedTarget||(Y.fromElement===Y.srcElement?Y.toElement:Y.fromElement)},movementX:function(Y){if("movementX"in Y)return Y.movementX;var c=aj;aj=Y.screenX;return uj?"mousemove"===Y.type?Y.screenX-c:0:(uj=!0,0)},movementY:function(Y){if("movementY"in
Y)return Y.movementY;var c=tj;tj=Y.screenY;return Ki?"mousemove"===Y.type?Y.screenY-c:0:(Ki=!0,0)}}),zg=vj.extend({pointerId:null,width:null,height:null,pressure:null,tangentialPressure:null,tiltX:null,tiltY:null,twist:null,pointerType:null,isPrimary:null}),Li={mouseEnter:{registrationName:"onMouseEnter",dependencies:["mouseout","mouseover"]},mouseLeave:{registrationName:"onMouseLeave",dependencies:["mouseout","mouseover"]},pointerEnter:{registrationName:"onPointerEnter",dependencies:["pointerout",
"pointerover"]},pointerLeave:{registrationName:"onPointerLeave",dependencies:["pointerout","pointerover"]}},wj={eventTypes:Li,extractEvents:function(Y,c,x,F,V){var fa="mouseover"===Y||"pointerover"===Y,ra="mouseout"===Y||"pointerout"===Y;if(fa&&0===(V&32)&&(x.relatedTarget||x.fromElement)||!ra&&!fa)return null;fa=F.window===F?F:(fa=F.ownerDocument)?fa.defaultView||fa.parentWindow:window;if(ra){if(ra=c,c=(c=x.relatedTarget||x.toElement)?gb(c):null,null!==c){var ya=pa(c);if(c!==ya||5!==c.tag&&6!==c.tag)c=
null}}else ra=null;if(ra===c)return null;if("mouseout"===Y||"mouseover"===Y)var Ha=vj,Pa=Li.mouseLeave,Ya=Li.mouseEnter,hb="mouse";else if("pointerout"===Y||"pointerover"===Y)Ha=zg,Pa=Li.pointerLeave,Ya=Li.pointerEnter,hb="pointer";Y=null==ra?fa:Sb(ra);fa=null==c?fa:Sb(c);Pa=Ha.getPooled(Pa,ra,x,F);Pa.type=hb+"leave";Pa.target=Y;Pa.relatedTarget=fa;x=Ha.getPooled(Ya,c,x,F);x.type=hb+"enter";x.target=fa;x.relatedTarget=Y;F=ra;hb=c;if(F&&hb)a:{Ha=F;Ya=hb;ra=0;for(Y=Ha;Y;Y=ac(Y))ra++;Y=0;for(c=Ya;c;c=
ac(c))Y++;for(;0<ra-Y;)Ha=ac(Ha),ra--;for(;0<Y-ra;)Ya=ac(Ya),Y--;for(;ra--;){if(Ha===Ya||Ha===Ya.alternate)break a;Ha=ac(Ha);Ya=ac(Ya)}Ha=null}else Ha=null;Ya=Ha;for(Ha=[];F&&F!==Ya;){ra=F.alternate;if(null!==ra&&ra===Ya)break;Ha.push(F);F=ac(F)}for(F=[];hb&&hb!==Ya;){ra=hb.alternate;if(null!==ra&&ra===Ya)break;F.push(hb);hb=ac(hb)}for(hb=0;hb<Ha.length;hb++)Lb(Ha[hb],"bubbled",Pa);for(hb=F.length;0<hb--;)Lb(F[hb],"captured",x);return 0===(V&64)?[Pa]:[Pa,x]}},di="function"===typeof Object.is?Object.is:
Kd,Pk=Object.prototype.hasOwnProperty,Qk=Ne&&"documentMode"in document&&11>=document.documentMode,Ak={select:{phasedRegistrationNames:{bubbled:"onSelect",captured:"onSelectCapture"},dependencies:"blur contextmenu dragend focus keydown keyup mousedown mouseup selectionchange".split(" ")}},bj=null,xj=null,wh=null,Oh=!1,jj={eventTypes:Ak,extractEvents:function(Y,c,x,F,V,fa){V=fa||(F.window===F?F.document:9===F.nodeType?F:F.ownerDocument);if(!(fa=!V)){a:{V=qa(V);fa=qe.onSelect;for(var ra=0;ra<fa.length;ra++)if(!V.has(fa[ra])){V=
!1;break a}V=!0}fa=!V}if(fa)return null;V=c?Sb(c):window;switch(Y){case "focus":if(Vc(V)||"true"===V.contentEditable)bj=V,xj=c,wh=null;break;case "blur":wh=xj=bj=null;break;case "mousedown":Oh=!0;break;case "contextmenu":case "mouseup":case "dragend":return Oh=!1,we(x,F);case "selectionchange":if(Qk)break;case "keydown":case "keyup":return we(x,F)}return null}},Lk=Yc.extend({animationName:null,elapsedTime:null,pseudoElement:null}),zf=Yc.extend({clipboardData:function(Y){return"clipboardData"in Y?
Y.clipboardData:window.clipboardData}}),Ij=oi.extend({relatedTarget:null}),Mk={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},Bk={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",
45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},lj=oi.extend({key:function(Y){if(Y.key){var c=Mk[Y.key]||Y.key;if("Unidentified"!==c)return c}return"keypress"===Y.type?(Y=se(Y),13===Y?"Enter":String.fromCharCode(Y)):"keydown"===Y.type||"keyup"===Y.type?Bk[Y.keyCode]||"Unidentified":""},location:null,ctrlKey:null,shiftKey:null,altKey:null,metaKey:null,repeat:null,locale:null,
getModifierState:Je,charCode:function(Y){return"keypress"===Y.type?se(Y):0},keyCode:function(Y){return"keydown"===Y.type||"keyup"===Y.type?Y.keyCode:0},which:function(Y){return"keypress"===Y.type?se(Y):"keydown"===Y.type||"keyup"===Y.type?Y.keyCode:0}}),wi=vj.extend({dataTransfer:null}),al=oi.extend({touches:null,targetTouches:null,changedTouches:null,altKey:null,metaKey:null,ctrlKey:null,shiftKey:null,getModifierState:Je}),yj=Yc.extend({propertyName:null,elapsedTime:null,pseudoElement:null}),ll=
vj.extend({deltaX:function(Y){return"deltaX"in Y?Y.deltaX:"wheelDeltaX"in Y?-Y.wheelDeltaX:0},deltaY:function(Y){return"deltaY"in Y?Y.deltaY:"wheelDeltaY"in Y?-Y.wheelDeltaY:"wheelDelta"in Y?-Y.wheelDelta:0},deltaZ:null,deltaMode:null}),Ck={eventTypes:gk,extractEvents:function(Y,c,x,F){var V=qj.get(Y);if(!V)return null;switch(Y){case "keypress":if(0===se(x))return null;case "keydown":case "keyup":Y=lj;break;case "blur":case "focus":Y=Ij;break;case "click":if(2===x.button)return null;case "auxclick":case "dblclick":case "mousedown":case "mousemove":case "mouseup":case "mouseout":case "mouseover":case "contextmenu":Y=
vj;break;case "drag":case "dragend":case "dragenter":case "dragexit":case "dragleave":case "dragover":case "dragstart":case "drop":Y=wi;break;case "touchcancel":case "touchend":case "touchmove":case "touchstart":Y=al;break;case qk:case Yj:case Pe:Y=Lk;break;case xk:Y=yj;break;case "scroll":Y=oi;break;case "wheel":Y=ll;break;case "copy":case "cut":case "paste":Y=zf;break;case "gotpointercapture":case "lostpointercapture":case "pointercancel":case "pointerdown":case "pointermove":case "pointerout":case "pointerover":case "pointerup":Y=
zg;break;default:Y=Yc}c=Y.getPooled(V,c,x,F);Mb(c);return c}};if(ge)throw Error(b(101));ge=Array.prototype.slice.call("ResponderEventPlugin SimpleEventPlugin EnterLeaveEventPlugin ChangeEventPlugin SelectEventPlugin BeforeInputEventPlugin".split(" "));m();var ml=vb;zd=ic;ud=ml;ie=Sb;a({SimpleEventPlugin:Ck,EnterLeaveEventPlugin:wj,ChangeEventPlugin:ci,SelectEventPlugin:jj,BeforeInputEventPlugin:gh});var Rk=[],zj=-1,ei={},tg={current:ei},Sg={current:!1},nh=ei,Xi=Uc.unstable_runWithPriority,rg=Uc.unstable_scheduleCallback,
ig=Uc.unstable_cancelCallback,dh=Uc.unstable_requestPaint,Hg=Uc.unstable_now,sh=Uc.unstable_getCurrentPriorityLevel,Dh=Uc.unstable_ImmediatePriority,Tg=Uc.unstable_UserBlockingPriority,wk=Uc.unstable_NormalPriority,Nk=Uc.unstable_LowPriority,sg=Uc.unstable_IdlePriority,Ah={},bl=Uc.unstable_shouldYield,hk=void 0!==dh?dh:function(){},ug=null,Cf=null,uf=!1,Sk=Hg(),Wf=1E4>Sk?Hg:function(){return Hg()-Sk},Aj={current:null},cj=null,Yf=null,Rj=null,fi=!1,Bj=Ie.ReactCurrentBatchConfig,Dk=(new dc.Component).refs,
Sj={isMounted:function(Y){return(Y=Y._reactInternalFiber)?pa(Y)===Y:!1},enqueueSetState:function(Y,c,x){Y=Y._reactInternalFiber;var F=fg(),V=Bj.suspense;F=pg(F,Y,V);V=oc(F,V);V.payload=c;void 0!==x&&null!==x&&(V.callback=x);sc(Y,V);If(Y,F)},enqueueReplaceState:function(Y,c,x){Y=Y._reactInternalFiber;var F=fg(),V=Bj.suspense;F=pg(F,Y,V);V=oc(F,V);V.tag=1;V.payload=c;void 0!==x&&null!==x&&(V.callback=x);sc(Y,V);If(Y,F)},enqueueForceUpdate:function(Y,c){Y=Y._reactInternalFiber;var x=fg(),F=Bj.suspense;
x=pg(x,Y,F);F=oc(x,F);F.tag=2;void 0!==c&&null!==c&&(F.callback=c);sc(Y,F);If(Y,x)}},oh=Array.isArray,dj=Re(!0),ik=Re(!1),Gg={},Eh={current:Gg},jk={current:Gg},R={current:Gg},ha={current:0},ta=Ie.ReactCurrentDispatcher,za=Ie.ReactCurrentBatchConfig,Aa=0,Da=null,Qa=null,Ja=null,Ra=!1,Wa={readContext:Mc,useCallback:cg,useContext:cg,useEffect:cg,useImperativeHandle:cg,useLayoutEffect:cg,useMemo:cg,useReducer:cg,useRef:cg,useState:cg,useDebugValue:cg,useResponder:cg,useDeferredValue:cg,useTransition:cg},
db={readContext:Mc,useCallback:Qi,useContext:Mc,useEffect:Ph,useImperativeHandle:function(Y,c,x){x=null!==x&&void 0!==x?x.concat([Y]):null;return Nh(4,2,ti.bind(null,c,Y),x)},useLayoutEffect:function(Y,c){return Nh(4,2,Y,c)},useMemo:function(Y,c){var x=uh();c=void 0===c?null:c;Y=Y();x.memoizedState=[Y,c];return Y},useReducer:function(Y,c,x){var F=uh();c=void 0!==x?x(c):c;F.memoizedState=F.baseState=c;Y=F.queue={pending:null,dispatch:null,lastRenderedReducer:Y,lastRenderedState:c};Y=Y.dispatch=dk.bind(null,
Da,Y);return[F.memoizedState,Y]},useRef:function(Y){var c=uh();Y={current:Y};return c.memoizedState=Y},useState:Lh,useDebugValue:Jj,useResponder:Gj,useDeferredValue:function(Y,c){var x=Lh(Y),F=x[0],V=x[1];Ph(function(){var fa=za.suspense;za.suspense=void 0===c?null:c;try{V(Y)}finally{za.suspense=fa}},[Y,c]);return F},useTransition:function(Y){var c=Lh(!1),x=c[0];c=c[1];return[Qi(Kj.bind(null,c,Y),[c,Y]),x]}},ob={readContext:Mc,useCallback:vi,useContext:Mc,useEffect:He,useImperativeHandle:ui,useLayoutEffect:mg,
useMemo:ck,useReducer:kj,useRef:ri,useState:function(){return kj(Mh)},useDebugValue:Jj,useResponder:Gj,useDeferredValue:function(Y,c){var x=kj(Mh),F=x[0],V=x[1];He(function(){var fa=za.suspense;za.suspense=void 0===c?null:c;try{V(Y)}finally{za.suspense=fa}},[Y,c]);return F},useTransition:function(Y){var c=kj(Mh),x=c[0];c=c[1];return[vi(Kj.bind(null,c,Y),[c,Y]),x]}},xb={readContext:Mc,useCallback:vi,useContext:Mc,useEffect:He,useImperativeHandle:ui,useLayoutEffect:mg,useMemo:ck,useReducer:vh,useRef:ri,
useState:function(){return vh(Mh)},useDebugValue:Jj,useResponder:Gj,useDeferredValue:function(Y,c){var x=vh(Mh),F=x[0],V=x[1];He(function(){var fa=za.suspense;za.suspense=void 0===c?null:c;try{V(Y)}finally{za.suspense=fa}},[Y,c]);return F},useTransition:function(Y){var c=vh(Mh),x=c[0];c=c[1];return[vi(Kj.bind(null,c,Y),[c,Y]),x]}},Cb=null,Eb=null,Qb=!1,Xb=Ie.ReactCurrentOwner,fc=!1,uc={dehydrated:null,retryTime:0};var zc=function(Y,c){for(var x=c.child;null!==x;){if(5===x.tag||6===x.tag)Y.appendChild(x.stateNode);
else if(4!==x.tag&&null!==x.child){x.child.return=x;x=x.child;continue}if(x===c)break;for(;null===x.sibling;){if(null===x.return||x.return===c)return;x=x.return}x.sibling.return=x.return;x=x.sibling}};var Ec=function(){};var Qc=function(Y,c,x,F,V){var fa=Y.memoizedProps;if(fa!==F){var ra=c.stateNode;Gf(Eh.current);Y=null;switch(x){case "input":fa=H(ra,fa);F=H(ra,F);Y=[];break;case "option":fa=S(ra,fa);F=S(ra,F);Y=[];break;case "select":fa=Dc({},fa,{value:void 0});F=Dc({},F,{value:void 0});Y=[];break;
case "textarea":fa=ba(ra,fa);F=ba(ra,F);Y=[];break;default:"function"!==typeof fa.onClick&&"function"===typeof F.onClick&&(ra.onclick=Wb)}Pb(x,F);var ya,Ha;x=null;for(ya in fa)if(!F.hasOwnProperty(ya)&&fa.hasOwnProperty(ya)&&null!=fa[ya])if("style"===ya)for(Ha in ra=fa[ya],ra)ra.hasOwnProperty(Ha)&&(x||(x={}),x[Ha]="");else"dangerouslySetInnerHTML"!==ya&&"children"!==ya&&"suppressContentEditableWarning"!==ya&&"suppressHydrationWarning"!==ya&&"autoFocus"!==ya&&(Qd.hasOwnProperty(ya)?Y||(Y=[]):(Y=Y||
[]).push(ya,null));for(ya in F){var Pa=F[ya];ra=null!=fa?fa[ya]:void 0;if(F.hasOwnProperty(ya)&&Pa!==ra&&(null!=Pa||null!=ra))if("style"===ya)if(ra){for(Ha in ra)!ra.hasOwnProperty(Ha)||Pa&&Pa.hasOwnProperty(Ha)||(x||(x={}),x[Ha]="");for(Ha in Pa)Pa.hasOwnProperty(Ha)&&ra[Ha]!==Pa[Ha]&&(x||(x={}),x[Ha]=Pa[Ha])}else x||(Y||(Y=[]),Y.push(ya,x)),x=Pa;else"dangerouslySetInnerHTML"===ya?(Pa=Pa?Pa.__html:void 0,ra=ra?ra.__html:void 0,null!=Pa&&ra!==Pa&&(Y=Y||[]).push(ya,Pa)):"children"===ya?ra===Pa||"string"!==
typeof Pa&&"number"!==typeof Pa||(Y=Y||[]).push(ya,""+Pa):"suppressContentEditableWarning"!==ya&&"suppressHydrationWarning"!==ya&&(Qd.hasOwnProperty(ya)?(null!=Pa&&Ob(V,ya),Y||ra===Pa||(Y=[])):(Y=Y||[]).push(ya,Pa))}x&&(Y=Y||[]).push("style",x);if(c.updateQueue=Y)c.effectTag|=4}};var Nb=function(Y,c,x,F){x!==F&&(c.effectTag|=4)};var Zb="function"===typeof WeakSet?WeakSet:Set,wc="function"===typeof WeakMap?WeakMap:Map,Xc=Math.ceil,Zc=Ie.ReactCurrentDispatcher,cd=Ie.ReactCurrentOwner,Oc=0,Ed=8,Nd=16,
$d=32,me=0,ke=1,te=2,Sd=3,Ff=4,gf=5,ne=Oc,Pf=null,De=null,xf=0,yf=me,Ye=null,Ke=1073741823,kg=1073741823,Qj=null,Bh=0,bi=!1,$i=0,Hi=500,ae=null,Fk=!1,Tj=null,ef=null,af=!1,Uj=null,Ni=90,Gh=null,Gk=0,wf=null,gi=0;var cl=function(Y,c,x){var F=c.expirationTime;if(null!==Y){var V=c.pendingProps;if(Y.memoizedProps!==V||Sg.current)fc=!0;else{if(F<x){fc=!1;switch(c.tag){case 3:Ue(c);Eb=Cb=null;Qb=!1;break;case 5:Fj(c);if(c.mode&4&&1!==x&&V.hidden)return c.expirationTime=c.childExpirationTime=1,null;break;
case 1:Qe(c.type)&&Sc(c);break;case 4:Zg(c,c.stateNode.containerInfo);break;case 10:F=c.memoizedProps.value;V=c.type._context;ye(Aj,V._currentValue);V._currentValue=F;break;case 13:if(null!==c.memoizedState){F=c.child.childExpirationTime;if(0!==F&&F>=x)return jh(Y,c,x);ye(ha,ha.current&1);c=$g(Y,c,x);return null!==c?c.sibling:null}ye(ha,ha.current&1);break;case 19:F=c.childExpirationTime>=x;if(0!==(Y.effectTag&64)){if(F)return Mj(Y,c,x);c.effectTag|=64}V=c.memoizedState;null!==V&&(V.rendering=null,
V.tail=null);ye(ha,ha.current);if(!F)return null}return $g(Y,c,x)}fc=!1}}else fc=!1;c.expirationTime=0;switch(c.tag){case 2:F=c.type;null!==Y&&(Y.alternate=null,c.alternate=null,c.effectTag|=2);Y=c.pendingProps;V=kf(c,tg.current);Lc(c,x);V=pi(null,c,F,Y,V,x);c.effectTag|=1;if("object"===typeof V&&null!==V&&"function"===typeof V.render&&void 0===V.$$typeof){c.tag=1;c.memoizedState=null;c.updateQueue=null;if(Qe(F)){var fa=!0;Sc(c)}else fa=!1;c.memoizedState=null!==V.state&&void 0!==V.state?V.state:
null;Pc(c);var ra=F.getDerivedStateFromProps;"function"===typeof ra&&td(c,F,ra,Y);V.updater=Sj;c.stateNode=V;V._reactInternalFiber=c;ue(c,F,Y,x);c=Se(null,c,F,!0,fa,x)}else c.tag=0,ng(null,c,V,x),c=c.child;return c;case 16:a:{V=c.elementType;null!==Y&&(Y.alternate=null,c.alternate=null,c.effectTag|=2);Y=c.pendingProps;E(V);if(1!==V._status)throw V._result;V=V._result;c.type=V;fa=c.tag=vk(V);Y=jc(V,Y);switch(fa){case 0:c=ih(null,c,V,Y,x);break a;case 1:c=yh(null,c,V,Y,x);break a;case 11:c=xh(null,
c,V,Y,x);break a;case 14:c=Si(null,c,V,jc(V.type,Y),F,x);break a}throw Error(b(306,V,""));}return c;case 0:return F=c.type,V=c.pendingProps,V=c.elementType===F?V:jc(F,V),ih(Y,c,F,V,x);case 1:return F=c.type,V=c.pendingProps,V=c.elementType===F?V:jc(F,V),yh(Y,c,F,V,x);case 3:Ue(c);F=c.updateQueue;if(null===Y||null===F)throw Error(b(282));F=c.pendingProps;V=c.memoizedState;V=null!==V?V.element:null;Cc(Y,c);hd(c,F,null,x);F=c.memoizedState.element;if(F===V)Eb=Cb=null,Qb=!1,c=$g(Y,c,x);else{if(V=c.stateNode.hydrate)Eb=
xc(c.stateNode.containerInfo.firstChild),Cb=c,V=Qb=!0;if(V)for(x=ik(c,null,F,x),c.child=x;x;)x.effectTag=x.effectTag&-3|1024,x=x.sibling;else ng(Y,c,F,x),Eb=Cb=null,Qb=!1;c=c.child}return c;case 5:return Fj(c),null===Y&&Qh(c),F=c.type,V=c.pendingProps,fa=null!==Y?Y.memoizedProps:null,ra=V.children,rc(F,V)?ra=null:null!==fa&&rc(F,fa)&&(c.effectTag|=16),Sh(Y,c),c.mode&4&&1!==x&&V.hidden?(c.expirationTime=c.childExpirationTime=1,c=null):(ng(Y,c,ra,x),c=c.child),c;case 6:return null===Y&&Qh(c),null;case 13:return jh(Y,
c,x);case 4:return Zg(c,c.stateNode.containerInfo),F=c.pendingProps,null===Y?c.child=dj(c,null,F,x):ng(Y,c,F,x),c.child;case 11:return F=c.type,V=c.pendingProps,V=c.elementType===F?V:jc(F,V),xh(Y,c,F,V,x);case 7:return ng(Y,c,c.pendingProps,x),c.child;case 8:return ng(Y,c,c.pendingProps.children,x),c.child;case 12:return ng(Y,c,c.pendingProps.children,x),c.child;case 10:a:{F=c.type._context;V=c.pendingProps;ra=c.memoizedProps;fa=V.value;var ya=c.type._context;ye(Aj,ya._currentValue);ya._currentValue=
fa;if(null!==ra)if(ya=ra.value,fa=di(ya,fa)?0:("function"===typeof F._calculateChangedBits?F._calculateChangedBits(ya,fa):1073741823)|0,0===fa){if(ra.children===V.children&&!Sg.current){c=$g(Y,c,x);break a}}else for(ya=c.child,null!==ya&&(ya.return=c);null!==ya;){var Ha=ya.dependencies;if(null!==Ha){ra=ya.child;for(var Pa=Ha.firstContext;null!==Pa;){if(Pa.context===F&&0!==(Pa.observedBits&fa)){1===ya.tag&&(Pa=oc(x,null),Pa.tag=2,sc(ya,Pa));ya.expirationTime<x&&(ya.expirationTime=x);Pa=ya.alternate;
null!==Pa&&Pa.expirationTime<x&&(Pa.expirationTime=x);Wc(ya.return,x);Ha.expirationTime<x&&(Ha.expirationTime=x);break}Pa=Pa.next}}else ra=10===ya.tag?ya.type===c.type?null:ya.child:ya.child;if(null!==ra)ra.return=ya;else for(ra=ya;null!==ra;){if(ra===c){ra=null;break}ya=ra.sibling;if(null!==ya){ya.return=ra.return;ra=ya;break}ra=ra.return}ya=ra}ng(Y,c,V.children,x);c=c.child}return c;case 9:return V=c.type,fa=c.pendingProps,F=fa.children,Lc(c,x),V=Mc(V,fa.unstable_observedBits),F=F(V),c.effectTag|=
1,ng(Y,c,F,x),c.child;case 14:return V=c.type,fa=jc(V,c.pendingProps),fa=jc(V.type,fa),Si(Y,c,V,fa,F,x);case 15:return $e(Y,c,c.type,c.pendingProps,F,x);case 17:return F=c.type,V=c.pendingProps,V=c.elementType===F?V:jc(F,V),null!==Y&&(Y.alternate=null,c.alternate=null,c.effectTag|=2),c.tag=1,Qe(F)?(Y=!0,Sc(c)):Y=!1,Lc(c,x),sd(c,F,V),ue(c,F,V,x),Se(null,c,F,!0,Y,x);case 19:return Mj(Y,c,x)}throw Error(b(156,c.tag));};var Hk=null,Vk=null;nc.prototype.render=function(Y){ab(Y,this._internalRoot,null,
null)};nc.prototype.unmount=function(){var Y=this._internalRoot,c=Y.containerInfo;ab(null,Y,null,function(){c[ee]=null})};var Ik=function(Y){if(13===Y.tag){var c=Tb(fg(),150,100);If(Y,c);Ib(Y,c)}};var ej=function(Y){13===Y.tag&&(If(Y,3),Ib(Y,3))};var Tf=function(Y){if(13===Y.tag){var c=fg();c=pg(c,Y,null);If(Y,c);Ib(Y,c)}};ze=function(Y,c,x){switch(c){case "input":P(Y,x);c=x.name;if("radio"===x.type&&null!=c){for(x=Y;x.parentNode;)x=x.parentNode;x=x.querySelectorAll("input[name\x3d"+JSON.stringify(""+
c)+'][type\x3d"radio"]');for(c=0;c<x.length;c++){var F=x[c];if(F!==Y&&F.form===Y.form){var V=ic(F);if(!V)throw Error(b(90));K(F);P(F,V)}}}break;case "textarea":ia(Y,x);break;case "select":c=x.value,null!=c&&X(Y,!!x.multiple,c,!1)}};p=tk;d=function(Y,c,x,F,V){var fa=ne;ne|=4;try{return Td(98,Y.bind(null,c,x,F,V))}finally{ne=fa,ne===Oc&&fe()}};e=function(){(ne&(1|Nd|$d))===Oc&&(Ud(),Dg())};rf=function(Y,c){var x=ne;ne|=2;try{return Y(c)}finally{ne=x,ne===Oc&&fe()}};var Vj={Events:[vb,Sb,ic,a,Be,Mb,
function(Y){Ma(Y,Bb)},g,n,Va,eb,Dg,{current:!1}]};(function(Y){var c=Y.findFiberByHostInstance;return kh(Dc({},Y,{overrideHookState:null,overrideProps:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:Ie.ReactCurrentDispatcher,findHostInstanceByFiber:function(x){x=va(x);return null===x?null:x.stateNode},findFiberByHostInstance:function(x){return c?c(x):null},findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null}))})({findFiberByHostInstance:gb,
bundleType:0,version:"16.14.0",rendererPackageName:"react-dom"});ed.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=Vj;ed.createPortal=Gb;ed.findDOMNode=function(Y){if(null==Y)return null;if(1===Y.nodeType)return Y;var c=Y._reactInternalFiber;if(void 0===c){if("function"===typeof Y.render)throw Error(b(188));throw Error(b(268,Object.keys(Y)));}Y=va(c);return Y=null===Y?null:Y.stateNode};ed.flushSync=function(Y,c){if((ne&(Nd|$d))!==Oc)throw Error(b(187));var x=ne;ne|=1;try{return Td(99,Y.bind(null,
c))}finally{ne=x,fe()}};ed.hydrate=function(Y,c,x){if(!mc(c))throw Error(b(200));return lc(null,Y,c,!0,x)};ed.render=function(Y,c,x){if(!mc(c))throw Error(b(200));return lc(null,Y,c,!1,x)};ed.unmountComponentAtNode=function(Y){if(!mc(Y))throw Error(b(40));return Y._reactRootContainer?(Ng(function(){lc(null,null,Y,!1,function(){Y._reactRootContainer=null;Y[ee]=null})}),!0):!1};ed.unstable_batchedUpdates=tk;ed.unstable_createPortal=function(Y,c){return Gb(Y,c,2<arguments.length&&void 0!==arguments[2]?
arguments[2]:null)};ed.unstable_renderSubtreeIntoContainer=function(Y,c,x,F){if(!mc(x))throw Error(b(200));if(null==Y||void 0===Y._reactInternalFiber)throw Error(b(38));return lc(Y,c,x,!1,F)};ed.version="16.14.0"};
shadow$provide[23]=function(od,Fd,Zd,ed){function b(){if("undefined"!==typeof __REACT_DEVTOOLS_GLOBAL_HOOK__&&"function"===typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE)try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(b)}catch(N){console.error(N)}}b();Zd.exports=Fd(18)};
/*

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/
var g,aa=aa||{},ba=this||self;function t(a){var b=typeof a;return"object"!=b?b:a?Array.isArray(a)?"array":b:"null"}function ca(a){return Object.prototype.hasOwnProperty.call(a,da)&&a[da]||(a[da]=++ea)}var da="closure_uid_"+(1E9*Math.random()>>>0),ea=0;function fa(a,b){this.ba=a|0;this.V=b|0}g=fa.prototype;g.toNumber=function(){return 4294967296*this.V+(this.ba>>>0)};g.isSafeInteger=function(){var a=this.V>>21;return 0==a||-1==a&&!(0==this.ba&&-2097152==this.V)};
g.toString=function(a){a=a||10;if(2>a||36<a)throw Error("radix out of range: "+a);if(this.isSafeInteger()){var b=this.toNumber();return 10==a?""+b:b.toString(a)}b=14-(a>>2);var c=Math.pow(a,b),d=ha(c,c/4294967296);c=this.div(d);d=Math.abs(this.subtract(c.multiply(d)).toNumber());var e=10==a?""+d:d.toString(a);e.length<b&&(e="0000000000000".substr(e.length-b)+e);d=c.toNumber();return(10==a?d:d.toString(a))+e};g.isZero=function(){return 0==this.ba&&0==this.V};g.isOdd=function(){return 1==(this.ba&1)};
g.equals=function(a){return this.ba==a.ba&&this.V==a.V};g.compare=function(a){return this.V==a.V?this.ba==a.ba?0:this.ba>>>0>a.ba>>>0?1:-1:this.V>a.V?1:-1};g.negate=function(){var a=~this.ba+1|0;return ha(a,~this.V+!a|0)};g.add=function(a){var b=this.V>>>16,c=this.V&65535,d=this.ba>>>16,e=a.V>>>16,f=a.V&65535,h=a.ba>>>16;a=(this.ba&65535)+(a.ba&65535);h=(a>>>16)+(d+h);d=h>>>16;d+=c+f;b=(d>>>16)+(b+e)&65535;return ha((h&65535)<<16|a&65535,b<<16|d&65535)};g.subtract=function(a){return this.add(a.negate())};
g.multiply=function(a){if(this.isZero())return this;if(a.isZero())return a;var b=this.V>>>16,c=this.V&65535,d=this.ba>>>16,e=this.ba&65535,f=a.V>>>16,h=a.V&65535,k=a.ba>>>16;a=a.ba&65535;var l=e*a;var m=(l>>>16)+d*a;var n=m>>>16;m=(m&65535)+e*k;n+=m>>>16;n+=c*a;var p=n>>>16;n=(n&65535)+d*k;p+=n>>>16;n=(n&65535)+e*h;p=p+(n>>>16)+(b*a+c*k+d*h+e*f)&65535;return ha((m&65535)<<16|l&65535,p<<16|n&65535)};
g.div=function(a){if(a.isZero())throw Error("division by zero");if(0>this.V){if(this.equals(ia)){if(a.equals(ka)||a.equals(la))return ia;if(a.equals(ia))return ka;var b=1;if(0==b)b=this;else{var c=this.V;b=32>b?ha(this.ba>>>b|c<<32-b,c>>b):ha(c>>b-32,0<=c?0:-1)}b=b.div(a).shiftLeft(1);if(b.equals(ma))return 0>a.V?ka:la;c=this.subtract(a.multiply(b));return b.add(c.div(a))}return 0>a.V?this.negate().div(a.negate()):this.negate().div(a).negate()}if(this.isZero())return ma;if(0>a.V)return a.equals(ia)?
ma:this.div(a.negate()).negate();var d=ma;for(c=this;0<=c.compare(a);){b=Math.max(1,Math.floor(c.toNumber()/a.toNumber()));var e=Math.ceil(Math.log(b)/Math.LN2);e=48>=e?1:Math.pow(2,e-48);for(var f=na(b),h=f.multiply(a);0>h.V||0<h.compare(c);)b-=e,f=na(b),h=f.multiply(a);f.isZero()&&(f=ka);d=d.add(f);c=c.subtract(h)}return d};g.modulo=function(a){return this.subtract(this.div(a).multiply(a))};g.not=function(){return ha(~this.ba,~this.V)};g.and=function(a){return ha(this.ba&a.ba,this.V&a.V)};
g.or=function(a){return ha(this.ba|a.ba,this.V|a.V)};g.xor=function(a){return ha(this.ba^a.ba,this.V^a.V)};g.shiftLeft=function(a){a&=63;if(0==a)return this;var b=this.ba;return 32>a?ha(b<<a,this.V<<a|b>>>32-a):ha(0,b<<a-32)};function oa(a,b){b&=63;if(0==b)return a;var c=a.V;return 32>b?ha(a.ba>>>b|c<<32-b,c>>>b):32==b?ha(c,0):ha(c>>>b-32,0)}function na(a){return 0<a?0x7fffffffffffffff<=a?pa:new fa(a,a/4294967296):0>a?-9223372036854775808>=a?ia:(new fa(-a,-a/4294967296)).negate():ma}
function ha(a,b){return new fa(a,b)}
function qa(a,b){if("-"==a.charAt(0))return qa(a.substring(1),b).negate();var c=parseInt(a,b||10);if(9007199254740991>=c)return new fa(c%4294967296|0,c/4294967296|0);if(0==a.length)throw Error("number format error: empty string");if(0<=a.indexOf("-"))throw Error('number format error: interior "-" character: '+a);b=b||10;if(2>b||36<b)throw Error("radix out of range: "+b);c=na(Math.pow(b,8));for(var d=ma,e=0;e<a.length;e+=8){var f=Math.min(8,a.length-e),h=parseInt(a.substring(e,e+f),b);8>f?(f=na(Math.pow(b,
f)),d=d.multiply(f).add(na(h))):(d=d.multiply(c),d=d.add(na(h)))}return d}var ma=ha(0,0),ka=ha(1,0),la=ha(-1,-1),pa=ha(4294967295,2147483647),ia=ha(0,2147483648);var ra={};function sa(a,b){for(var c in a)b.call(void 0,a[c],c,a)}function ta(a){var b=[],c=0,d;for(d in a)b[c++]=d;return b}function ua(a,b,c){return null!==a&&b in a?a[b]:c}function va(a){var b={},c;for(c in a)b[c]=a[c];return b}var wa="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");
function xa(a,b){for(var c,d,e=1;e<arguments.length;e++){d=arguments[e];for(c in d)a[c]=d[c];for(var f=0;f<wa.length;f++)c=wa[f],Object.prototype.hasOwnProperty.call(d,c)&&(a[c]=d[c])}};function ya(a,b){null!=a&&this.append.apply(this,arguments)}g=ya.prototype;g.pb="";g.set=function(a){this.pb=""+a};g.append=function(a,b,c){this.pb+=String(a);if(null!=b)for(var d=1;d<arguments.length;d++)this.pb+=arguments[d];return this};g.clear=function(){this.pb=""};g.toString=function(){return this.pb};var za={},Aa={},Ca,u={},Da=null,Ea=!0,Fa=null;function Ga(){return new v(null,5,[Ha,!0,Ia,!0,Ja,!1,Ka,!1,La,null],null)}function Ma(){Ea=!1;Da=function(){var a=console.log,b=a.apply,c=console;var d=arguments;var e=d.length;if(0<e){for(var f=Array(e),h=0;h<e;h++)f[h]=d[h];d=f}else d=[];return b.call(a,c,d)}}function x(a){return null!=a&&!1!==a}function Na(a){return a instanceof Array}function Oa(a){return null==a?!0:!1===a?!0:!1}function y(a,b){return a[t(null==b?null:b)]?!0:a._?!0:!1}
function z(a,b){var c=null==b?null:b.constructor;c=x(x(c)?c.$b:c)?c.Ab:t(b);return Error(["No protocol method ",a," defined for type ",c,": ",b].join(""))}function Pa(a){var b=a.Ab;return x(b)?b:B.g(a)}var Qa="undefined"!==typeof Symbol&&"function"===t(Symbol)?Symbol.iterator:"@@iterator";function Ra(a){for(var b=a.length,c=Array(b),d=0;;)if(d<b)c[d]=a[d],d+=1;else break;return c}function Sa(a){function b(d,e){d.push(e);return d}var c=[];return Ta?Ta(b,c,a):Ua.call(null,b,c,a)}
function Va(a){return"symbol"===t(a)||"undefined"!==typeof Symbol&&a instanceof Symbol}function Wa(){}function Xa(){}function Ya(){}function Za(a){if(null!=a&&null!=a.Y)a=a.Y(a);else{var b=Za[t(null==a?null:a)];if(null!=b)a=b.g?b.g(a):b.call(null,a);else if(b=Za._,null!=b)a=b.g?b.g(a):b.call(null,a);else throw z("ICounted.-count",a);}return a}function $a(){}
function ab(a){if(null!=a&&null!=a.ha)a=a.ha(a);else{var b=ab[t(null==a?null:a)];if(null!=b)a=b.g?b.g(a):b.call(null,a);else if(b=ab._,null!=b)a=b.g?b.g(a):b.call(null,a);else throw z("IEmptyableCollection.-empty",a);}return a}function bb(){}function cb(a,b){if(null!=a&&null!=a.ia)a=a.ia(a,b);else{var c=cb[t(null==a?null:a)];if(null!=c)a=c.h?c.h(a,b):c.call(null,a,b);else if(c=cb._,null!=c)a=c.h?c.h(a,b):c.call(null,a,b);else throw z("ICollection.-conj",a);}return a}function db(){}
var eb=function(){function a(d,e,f){var h=D[t(null==d?null:d)];if(null!=h)return h.l?h.l(d,e,f):h.call(null,d,e,f);h=D._;if(null!=h)return h.l?h.l(d,e,f):h.call(null,d,e,f);throw z("IIndexed.-nth",d);}function b(d,e){var f=D[t(null==d?null:d)];if(null!=f)return f.h?f.h(d,e):f.call(null,d,e);f=D._;if(null!=f)return f.h?f.h(d,e):f.call(null,d,e);throw z("IIndexed.-nth",d);}var c=null;c=function(d,e,f){switch(arguments.length){case 2:return b.call(this,d,e);case 3:return a.call(this,d,e,f)}throw Error("Invalid arity: "+
arguments.length);};c.h=b;c.l=a;return c}(),D=function D(a){switch(arguments.length){case 2:return D.h(arguments[0],arguments[1]);case 3:return D.l(arguments[0],arguments[1],arguments[2]);default:throw Error(["Invalid arity: ",B.g(arguments.length)].join(""));}};D.h=function(a,b){return null!=a&&null!=a.N?a.N(a,b):eb(a,b)};D.l=function(a,b,c){return null!=a&&null!=a.ka?a.ka(a,b,c):eb(a,b,c)};D.S=3;function fb(){}
function F(a){if(null!=a&&null!=a.ta)a=a.ta(a);else{var b=F[t(null==a?null:a)];if(null!=b)a=b.g?b.g(a):b.call(null,a);else if(b=F._,null!=b)a=b.g?b.g(a):b.call(null,a);else throw z("ISeq.-first",a);}return a}function gb(a){if(null!=a&&null!=a.ua)a=a.ua(a);else{var b=gb[t(null==a?null:a)];if(null!=b)a=b.g?b.g(a):b.call(null,a);else if(b=gb._,null!=b)a=b.g?b.g(a):b.call(null,a);else throw z("ISeq.-rest",a);}return a}function hb(){}function ib(){}
var kb=function(){function a(d,e,f){var h=jb[t(null==d?null:d)];if(null!=h)return h.l?h.l(d,e,f):h.call(null,d,e,f);h=jb._;if(null!=h)return h.l?h.l(d,e,f):h.call(null,d,e,f);throw z("ILookup.-lookup",d);}function b(d,e){var f=jb[t(null==d?null:d)];if(null!=f)return f.h?f.h(d,e):f.call(null,d,e);f=jb._;if(null!=f)return f.h?f.h(d,e):f.call(null,d,e);throw z("ILookup.-lookup",d);}var c=null;c=function(d,e,f){switch(arguments.length){case 2:return b.call(this,d,e);case 3:return a.call(this,d,e,f)}throw Error("Invalid arity: "+
arguments.length);};c.h=b;c.l=a;return c}(),jb=function jb(a){switch(arguments.length){case 2:return jb.h(arguments[0],arguments[1]);case 3:return jb.l(arguments[0],arguments[1],arguments[2]);default:throw Error(["Invalid arity: ",B.g(arguments.length)].join(""));}};jb.h=function(a,b){return null!=a&&null!=a.na?a.na(a,b):kb(a,b)};jb.l=function(a,b,c){return null!=a&&null!=a.O?a.O(a,b,c):kb(a,b,c)};jb.S=3;
function lb(a,b,c){if(null!=a&&null!=a.Sa)a=a.Sa(a,b,c);else{var d=lb[t(null==a?null:a)];if(null!=d)a=d.l?d.l(a,b,c):d.call(null,a,b,c);else if(d=lb._,null!=d)a=d.l?d.l(a,b,c):d.call(null,a,b,c);else throw z("IAssociative.-assoc",a);}return a}function mb(a,b){if(null!=a&&null!=a.lb)a=a.lb(a,b);else{var c=mb[t(null==a?null:a)];if(null!=c)a=c.h?c.h(a,b):c.call(null,a,b);else if(c=mb._,null!=c)a=c.h?c.h(a,b):c.call(null,a,b);else throw z("IFind.-find",a);}return a}function nb(){}
function ob(a,b){if(null!=a&&null!=a.Ub)a=a.Ub(a,b);else{var c=ob[t(null==a?null:a)];if(null!=c)a=c.h?c.h(a,b):c.call(null,a,b);else if(c=ob._,null!=c)a=c.h?c.h(a,b):c.call(null,a,b);else throw z("IMap.-dissoc",a);}return a}function pb(a){if(null!=a&&null!=a.Yc)a=a.key;else{var b=pb[t(null==a?null:a)];if(null!=b)a=b.g?b.g(a):b.call(null,a);else if(b=pb._,null!=b)a=b.g?b.g(a):b.call(null,a);else throw z("IMapEntry.-key",a);}return a}
function qb(a){if(null!=a&&null!=a.Zc)a=a.val;else{var b=qb[t(null==a?null:a)];if(null!=b)a=b.g?b.g(a):b.call(null,a);else if(b=qb._,null!=b)a=b.g?b.g(a):b.call(null,a);else throw z("IMapEntry.-val",a);}return a}function rb(){}function sb(a,b){if(null!=a&&null!=a.Dc)a=a.Dc(a,b);else{var c=sb[t(null==a?null:a)];if(null!=c)a=c.h?c.h(a,b):c.call(null,a,b);else if(c=sb._,null!=c)a=c.h?c.h(a,b):c.call(null,a,b);else throw z("ISet.-disjoin",a);}return a}
function tb(a){if(null!=a&&null!=a.qb)a=a.qb(a);else{var b=tb[t(null==a?null:a)];if(null!=b)a=b.g?b.g(a):b.call(null,a);else if(b=tb._,null!=b)a=b.g?b.g(a):b.call(null,a);else throw z("IStack.-peek",a);}return a}function ub(a){if(null!=a&&null!=a.rb)a=a.rb(a);else{var b=ub[t(null==a?null:a)];if(null!=b)a=b.g?b.g(a):b.call(null,a);else if(b=ub._,null!=b)a=b.g?b.g(a):b.call(null,a);else throw z("IStack.-pop",a);}return a}function vb(){}
function wb(a,b,c){if(null!=a&&null!=a.fb)a=a.fb(a,b,c);else{var d=wb[t(null==a?null:a)];if(null!=d)a=d.l?d.l(a,b,c):d.call(null,a,b,c);else if(d=wb._,null!=d)a=d.l?d.l(a,b,c):d.call(null,a,b,c);else throw z("IVector.-assoc-n",a);}return a}function xb(){}function G(a){if(null!=a&&null!=a.Ca)a=a.Ca(a);else{var b=G[t(null==a?null:a)];if(null!=b)a=b.g?b.g(a):b.call(null,a);else if(b=G._,null!=b)a=b.g?b.g(a):b.call(null,a);else throw z("IDeref.-deref",a);}return a}function yb(){}
function zb(a){if(null!=a&&null!=a.da)a=a.da(a);else{var b=zb[t(null==a?null:a)];if(null!=b)a=b.g?b.g(a):b.call(null,a);else if(b=zb._,null!=b)a=b.g?b.g(a):b.call(null,a);else throw z("IMeta.-meta",a);}return a}function Ab(a,b){if(null!=a&&null!=a.ga)a=a.ga(a,b);else{var c=Ab[t(null==a?null:a)];if(null!=c)a=c.h?c.h(a,b):c.call(null,a,b);else if(c=Ab._,null!=c)a=c.h?c.h(a,b):c.call(null,a,b);else throw z("IWithMeta.-with-meta",a);}return a}function Bb(){}
var Db=function(){function a(d,e,f){var h=Cb[t(null==d?null:d)];if(null!=h)return h.l?h.l(d,e,f):h.call(null,d,e,f);h=Cb._;if(null!=h)return h.l?h.l(d,e,f):h.call(null,d,e,f);throw z("IReduce.-reduce",d);}function b(d,e){var f=Cb[t(null==d?null:d)];if(null!=f)return f.h?f.h(d,e):f.call(null,d,e);f=Cb._;if(null!=f)return f.h?f.h(d,e):f.call(null,d,e);throw z("IReduce.-reduce",d);}var c=null;c=function(d,e,f){switch(arguments.length){case 2:return b.call(this,d,e);case 3:return a.call(this,d,e,f)}throw Error("Invalid arity: "+
arguments.length);};c.h=b;c.l=a;return c}(),Cb=function Cb(a){switch(arguments.length){case 2:return Cb.h(arguments[0],arguments[1]);case 3:return Cb.l(arguments[0],arguments[1],arguments[2]);default:throw Error(["Invalid arity: ",B.g(arguments.length)].join(""));}};Cb.h=function(a,b){return null!=a&&null!=a.oa?a.oa(a,b):Db(a,b)};Cb.l=function(a,b,c){return null!=a&&null!=a.pa?a.pa(a,b,c):Db(a,b,c)};Cb.S=3;function Eb(){}
function Fb(a,b,c){if(null!=a&&null!=a.mb)a=a.mb(a,b,c);else{var d=Fb[t(null==a?null:a)];if(null!=d)a=d.l?d.l(a,b,c):d.call(null,a,b,c);else if(d=Fb._,null!=d)a=d.l?d.l(a,b,c):d.call(null,a,b,c);else throw z("IKVReduce.-kv-reduce",a);}return a}function Gb(a,b){if(null!=a&&null!=a.G)a=a.G(a,b);else{var c=Gb[t(null==a?null:a)];if(null!=c)a=c.h?c.h(a,b):c.call(null,a,b);else if(c=Gb._,null!=c)a=c.h?c.h(a,b):c.call(null,a,b);else throw z("IEquiv.-equiv",a);}return a}
function Hb(a){if(null!=a&&null!=a.T)a=a.T(a);else{var b=Hb[t(null==a?null:a)];if(null!=b)a=b.g?b.g(a):b.call(null,a);else if(b=Hb._,null!=b)a=b.g?b.g(a):b.call(null,a);else throw z("IHash.-hash",a);}return a}function Ib(){}function Jb(a){if(null!=a&&null!=a.Z)a=a.Z(a);else{var b=Jb[t(null==a?null:a)];if(null!=b)a=b.g?b.g(a):b.call(null,a);else if(b=Jb._,null!=b)a=b.g?b.g(a):b.call(null,a);else throw z("ISeqable.-seq",a);}return a}function Kb(){}function Lb(){}function Mb(){}
function Nb(a,b){if(null!=a&&null!=a.Ec)a=a.Ec(a,b);else{var c=Nb[t(null==a?null:a)];if(null!=c)a=c.h?c.h(a,b):c.call(null,a,b);else if(c=Nb._,null!=c)a=c.h?c.h(a,b):c.call(null,a,b);else throw z("IWriter.-write",a);}return a}function Ob(){}function Pb(a,b,c){if(null!=a&&null!=a.X)a=a.X(a,b,c);else{var d=Pb[t(null==a?null:a)];if(null!=d)a=d.l?d.l(a,b,c):d.call(null,a,b,c);else if(d=Pb._,null!=d)a=d.l?d.l(a,b,c):d.call(null,a,b,c);else throw z("IPrintWithWriter.-pr-writer",a);}return a}
function Qb(a,b){var c=Rb;if(null!=a&&null!=a.Ib)a.Ib(a,b,c);else{var d=Qb[t(null==a?null:a)];if(null!=d)d.l?d.l(a,b,c):d.call(null,a,b,c);else if(d=Qb._,null!=d)d.l?d.l(a,b,c):d.call(null,a,b,c);else throw z("IWatchable.-add-watch",a);}}function Sb(a,b){if(null!=a&&null!=a.Jb)a.Jb(a,b);else{var c=Sb[t(null==a?null:a)];if(null!=c)c.h?c.h(a,b):c.call(null,a,b);else if(c=Sb._,null!=c)c.h?c.h(a,b):c.call(null,a,b);else throw z("IWatchable.-remove-watch",a);}}
function Tb(a){if(null!=a&&null!=a.kb)a=a.kb(a);else{var b=Tb[t(null==a?null:a)];if(null!=b)a=b.g?b.g(a):b.call(null,a);else if(b=Tb._,null!=b)a=b.g?b.g(a):b.call(null,a);else throw z("IEditableCollection.-as-transient",a);}return a}function Ub(a,b){if(null!=a&&null!=a.eb)a=a.eb(a,b);else{var c=Ub[t(null==a?null:a)];if(null!=c)a=c.h?c.h(a,b):c.call(null,a,b);else if(c=Ub._,null!=c)a=c.h?c.h(a,b):c.call(null,a,b);else throw z("ITransientCollection.-conj!",a);}return a}
function Vb(a){if(null!=a&&null!=a.sb)a=a.sb(a);else{var b=Vb[t(null==a?null:a)];if(null!=b)a=b.g?b.g(a):b.call(null,a);else if(b=Vb._,null!=b)a=b.g?b.g(a):b.call(null,a);else throw z("ITransientCollection.-persistent!",a);}return a}function Wb(a,b,c){if(null!=a&&null!=a.cb)a=a.cb(a,b,c);else{var d=Wb[t(null==a?null:a)];if(null!=d)a=d.l?d.l(a,b,c):d.call(null,a,b,c);else if(d=Wb._,null!=d)a=d.l?d.l(a,b,c):d.call(null,a,b,c);else throw z("ITransientAssociative.-assoc!",a);}return a}
function Xb(a,b,c){if(null!=a&&null!=a.Hb)a=a.Hb(a,b,c);else{var d=Xb[t(null==a?null:a)];if(null!=d)a=d.l?d.l(a,b,c):d.call(null,a,b,c);else if(d=Xb._,null!=d)a=d.l?d.l(a,b,c):d.call(null,a,b,c);else throw z("ITransientVector.-assoc-n!",a);}return a}function Yb(a){if(null!=a&&null!=a.yc)a=a.yc(a);else{var b=Yb[t(null==a?null:a)];if(null!=b)a=b.g?b.g(a):b.call(null,a);else if(b=Yb._,null!=b)a=b.g?b.g(a):b.call(null,a);else throw z("IChunk.-drop-first",a);}return a}
function Zb(a){if(null!=a&&null!=a.jc)a=a.jc(a);else{var b=Zb[t(null==a?null:a)];if(null!=b)a=b.g?b.g(a):b.call(null,a);else if(b=Zb._,null!=b)a=b.g?b.g(a):b.call(null,a);else throw z("IChunkedSeq.-chunked-first",a);}return a}function $b(a){if(null!=a&&null!=a.Tb)a=a.Tb(a);else{var b=$b[t(null==a?null:a)];if(null!=b)a=b.g?b.g(a):b.call(null,a);else if(b=$b._,null!=b)a=b.g?b.g(a):b.call(null,a);else throw z("IChunkedSeq.-chunked-rest",a);}return a}
function ac(a){if(null!=a&&null!=a.Eb)a=a.Eb(a);else{var b=ac[t(null==a?null:a)];if(null!=b)a=b.g?b.g(a):b.call(null,a);else if(b=ac._,null!=b)a=b.g?b.g(a):b.call(null,a);else throw z("INamed.-name",a);}return a}function bc(a){if(null!=a&&null!=a.Fb)a=a.Fb(a);else{var b=bc[t(null==a?null:a)];if(null!=b)a=b.g?b.g(a):b.call(null,a);else if(b=bc._,null!=b)a=b.g?b.g(a):b.call(null,a);else throw z("INamed.-namespace",a);}return a}
function cc(a,b){if(null!=a&&null!=a.ya)a=a.ya(a,b);else{var c=cc[t(null==a?null:a)];if(null!=c)a=c.h?c.h(a,b):c.call(null,a,b);else if(c=cc._,null!=c)a=c.h?c.h(a,b):c.call(null,a,b);else throw z("IReset.-reset!",a);}return a}
var ec=function(){function a(f,h,k,l,m){var n=dc[t(null==f?null:f)];if(null!=n)return n.P?n.P(f,h,k,l,m):n.call(null,f,h,k,l,m);n=dc._;if(null!=n)return n.P?n.P(f,h,k,l,m):n.call(null,f,h,k,l,m);throw z("ISwap.-swap!",f);}function b(f,h,k,l){var m=dc[t(null==f?null:f)];if(null!=m)return m.K?m.K(f,h,k,l):m.call(null,f,h,k,l);m=dc._;if(null!=m)return m.K?m.K(f,h,k,l):m.call(null,f,h,k,l);throw z("ISwap.-swap!",f);}function c(f,h,k){var l=dc[t(null==f?null:f)];if(null!=l)return l.l?l.l(f,h,k):l.call(null,
f,h,k);l=dc._;if(null!=l)return l.l?l.l(f,h,k):l.call(null,f,h,k);throw z("ISwap.-swap!",f);}function d(f,h){var k=dc[t(null==f?null:f)];if(null!=k)return k.h?k.h(f,h):k.call(null,f,h);k=dc._;if(null!=k)return k.h?k.h(f,h):k.call(null,f,h);throw z("ISwap.-swap!",f);}var e=null;e=function(f,h,k,l,m){switch(arguments.length){case 2:return d.call(this,f,h);case 3:return c.call(this,f,h,k);case 4:return b.call(this,f,h,k,l);case 5:return a.call(this,f,h,k,l,m)}throw Error("Invalid arity: "+arguments.length);
};e.h=d;e.l=c;e.K=b;e.P=a;return e}(),dc=function dc(a){switch(arguments.length){case 2:return dc.h(arguments[0],arguments[1]);case 3:return dc.l(arguments[0],arguments[1],arguments[2]);case 4:return dc.K(arguments[0],arguments[1],arguments[2],arguments[3]);case 5:return dc.P(arguments[0],arguments[1],arguments[2],arguments[3],arguments[4]);default:throw Error(["Invalid arity: ",B.g(arguments.length)].join(""));}};dc.h=function(a,b){return null!=a&&null!=a.Vb?a.Vb(a,b):ec(a,b)};
dc.l=function(a,b,c){return null!=a&&null!=a.Wb?a.Wb(a,b,c):ec(a,b,c)};dc.K=function(a,b,c,d){return null!=a&&null!=a.Xb?a.Xb(a,b,c,d):ec(a,b,c,d)};dc.P=function(a,b,c,d,e){return null!=a&&null!=a.Yb?a.Yb(a,b,c,d,e):ec(a,b,c,d,e)};dc.S=5;function fc(){}function gc(a){if(null!=a&&null!=a.Aa)a=a.Aa(a);else{var b=gc[t(null==a?null:a)];if(null!=b)a=b.g?b.g(a):b.call(null,a);else if(b=gc._,null!=b)a=b.g?b.g(a):b.call(null,a);else throw z("IIterable.-iterator",a);}return a}
function hc(a){this.pd=a;this.o=1073741824;this.J=0}hc.prototype.Ec=function(a,b){return this.pd.append(b)};function ic(a){var b=new ya;a.X(null,new hc(b),Ga());return B.g(b)}var jc="undefined"!==typeof Math&&"undefined"!==typeof Math.imul&&0!==Math.imul(4294967295,5)?function(a,b){return Math.imul(a,b)}:function(a,b){var c=a&65535,d=b&65535;return c*d+((a>>>16&65535)*d+c*(b>>>16&65535)<<16>>>0)|0};function kc(a){a=jc(a|0,-862048943);return jc(a<<15|a>>>-15,461845907)}
function lc(a,b){a=(a|0)^(b|0);return jc(a<<13|a>>>-13,5)+-430675100|0}function mc(a,b){a=(a|0)^b;a=jc(a^a>>>16,-2048144789);a=jc(a^a>>>13,-1028477387);return a^a>>>16}function nc(a){a:{var b=1;for(var c=0;;)if(b<a.length){var d=b+2;c=lc(c,kc(a.charCodeAt(b-1)|a.charCodeAt(b)<<16));b=d}else{b=c;break a}}b=1===(a.length&1)?b^kc(a.charCodeAt(a.length-1)):b;return mc(b,jc(2,a.length))}var oc={},pc=0;
function qc(a){255<pc&&(oc={},pc=0);if(null==a)return 0;var b=oc[a];if("number"===typeof b)a=b;else{a:if(null!=a)if(b=a.length,0<b)for(var c=0,d=0;;)if(c<b){var e=c+1;d=jc(31,d)+a.charCodeAt(c);c=e}else{b=d;break a}else b=0;else b=0;oc[a]=b;pc+=1;a=b}return a}
function rc(a){if(null!=a&&(a.o&4194304||u===a.lc))return a.T(null)^0;if("number"===typeof a){if(x(isFinite(a)))return Math.floor(a)%2147483647;switch(a){case Infinity:return 2146435072;case -Infinity:return-1048576;default:return 2146959360}}else return!0===a?a=1231:!1===a?a=1237:"string"===typeof a?(a=qc(a),0!==a&&(a=kc(a),a=lc(0,a),a=mc(a,4))):a=a instanceof Date?a.valueOf()^0:null==a?0:Hb(a)^0,a}function sc(a,b){return a^b+2654435769+(a<<6)+(a>>2)}
function tc(a,b,c,d,e){this.Cb=a;this.name=b;this.str=c;this._hash=d;this._meta=e;this.o=2154168321;this.J=4096}g=tc.prototype;g.toString=function(){return this.str};g.equiv=function(a){return this.G(null,a)};g.G=function(a,b){return b instanceof tc?this.str===b.str:!1};g.call=function(a){switch(arguments.length-1){case 1:return this.g(arguments[1]);case 2:return this.h(arguments[1],arguments[2]);default:throw Error(["Invalid arity: ",B.g(arguments.length-1)].join(""));}};
g.apply=function(a,b){return this.call.apply(this,[this].concat(Ra(b)))};g.g=function(a){return H.h?H.h(a,this):H.call(null,a,this)};g.h=function(a,b){return H.l?H.l(a,this,b):H.call(null,a,this,b)};g.da=function(){return this._meta};g.ga=function(a,b){return new tc(this.Cb,this.name,this.str,this._hash,b)};g.T=function(){var a=this._hash;return null!=a?a:this._hash=a=sc(nc(this.name),qc(this.Cb))};g.Eb=function(){return this.name};g.Fb=function(){return this.Cb};g.X=function(a,b){return Nb(b,this.str)};
var uc=function uc(a){switch(arguments.length){case 1:return uc.g(arguments[0]);case 2:return uc.h(arguments[0],arguments[1]);default:throw Error(["Invalid arity: ",B.g(arguments.length)].join(""));}};uc.g=function(a){for(;;){if(a instanceof tc)return a;if("string"===typeof a){var b=a.indexOf("/");return 1>b?uc.h(null,a):uc.h(a.substring(0,b),a.substring(b+1,a.length))}if(a instanceof I)a=a.Ba;else throw Error("no conversion to symbol");}};
uc.h=function(a,b){var c=null!=a?[B.g(a),"/",B.g(b)].join(""):b;return new tc(a,b,c,null,null)};uc.S=2;function vc(a){return null!=a?a.J&131072||u===a.vd?!0:a.J?!1:y(fc,a):y(fc,a)}function J(a){if(null==a)return null;if(null!=a&&(a.o&8388608||u===a.bd))return a.Z(null);if(Na(a)||"string"===typeof a)return 0===a.length?null:new K(a,0,null);if(null!=a&&null!=a[Qa])return a=ua(a,Qa).call(a),wc.g?wc.g(a):wc.call(null,a);if(y(Ib,a))return Jb(a);throw Error([B.g(a)," is not ISeqable"].join(""));}
function N(a){if(null==a)return null;if(null!=a&&(a.o&64||u===a.zb))return a.ta(null);a=J(a);return null==a?null:F(a)}function xc(a){return null!=a?null!=a&&(a.o&64||u===a.zb)?a.ua(null):(a=J(a))?a.ua(null):yc:yc}function O(a){return null==a?null:null!=a&&(a.o&128||u===a.Gb)?a.sa():J(xc(a))}
var P=function P(a){switch(arguments.length){case 1:return P.g(arguments[0]);case 2:return P.h(arguments[0],arguments[1]);default:for(var c=[],d=arguments.length,e=0;;)if(e<d)c.push(arguments[e]),e+=1;else break;c=new K(c.slice(2),0,null);return P.C(arguments[0],arguments[1],c)}};P.g=function(){return!0};P.h=function(a,b){return null==a?null==b:a===b||Gb(a,b)};P.C=function(a,b,c){for(;;)if(P.h(a,b))if(O(c))a=b,b=N(c),c=O(c);else return P.h(b,N(c));else return!1};
P.U=function(a){var b=N(a),c=O(a);a=N(c);c=O(c);return this.C(b,a,c)};P.S=2;function zc(a){this.M=a}zc.prototype.next=function(){if(null!=this.M){var a=N(this.M);this.M=O(this.M);return{value:a,done:!1}}return{value:null,done:!0}};function Ac(a){return new zc(J(a))}function Bc(a,b){this.value=a;this.Bb=b;this.fc=null;this.o=8388672;this.J=0}Bc.prototype.Z=function(){return this};Bc.prototype.ta=function(){return this.value};
Bc.prototype.ua=function(){null==this.fc&&(this.fc=wc.g?wc.g(this.Bb):wc.call(null,this.Bb));return this.fc};function wc(a){var b=a.next();return x(b.done)?null:new Bc(b.value,a)}function Cc(a,b){a=kc(a);a=lc(0,a);return mc(a,b)}function Dc(a){var b=0,c=1;for(a=J(a);;)if(null!=a)b+=1,c=jc(31,c)+rc(N(a))|0,a=O(a);else return Cc(c,b)}var Ec=Cc(1,0);function Fc(a){var b=0,c=0;for(a=J(a);;)if(null!=a)b+=1,c=c+rc(N(a))|0,a=O(a);else return Cc(c,b)}var Gc=Cc(0,0);Ya["null"]=!0;Za["null"]=function(){return 0};
Date.prototype.G=function(a,b){return b instanceof Date&&this.valueOf()===b.valueOf()};Gb.number=function(a,b){return a===b};Wa["function"]=!0;yb["function"]=!0;zb["function"]=function(){return null};Hb._=function(a){return ca(a)};function Hc(a){return a+1}function Ic(){this.val=!1;this.o=32768;this.J=0}Ic.prototype.Ca=function(){return this.val};function Jc(a){return a instanceof Ic}function Kc(a){return G(a)}
function Lc(a,b){var c=a.Y(null);if(0===c)return b.I?b.I():b.call(null);for(var d=a.N(null,0),e=1;;)if(e<c){var f=a.N(null,e);d=b.h?b.h(d,f):b.call(null,d,f);if(Jc(d))return G(d);e+=1}else return d}function Mc(a,b,c){var d=a.Y(null),e=c;for(c=0;;)if(c<d){var f=a.N(null,c);e=b.h?b.h(e,f):b.call(null,e,f);if(Jc(e))return G(e);c+=1}else return e}
function Nc(a,b){var c=a.length;if(0===a.length)return b.I?b.I():b.call(null);for(var d=a[0],e=1;;)if(e<c){var f=a[e];d=b.h?b.h(d,f):b.call(null,d,f);if(Jc(d))return G(d);e+=1}else return d}function Oc(a,b,c){var d=a.length,e=c;for(c=0;;)if(c<d){var f=a[c];e=b.h?b.h(e,f):b.call(null,e,f);if(Jc(e))return G(e);c+=1}else return e}function Pc(a,b,c,d){for(var e=a.length;;)if(d<e){var f=a[d];c=b.h?b.h(c,f):b.call(null,c,f);if(Jc(c))return G(c);d+=1}else return c}
function Qc(a){return null!=a?a.o&2||u===a.Qc?!0:a.o?!1:y(Ya,a):y(Ya,a)}function Rc(a){return null!=a?a.o&16||u===a.Ac?!0:a.o?!1:y(db,a):y(db,a)}function Q(a,b,c){var d=R.g?R.g(a):R.call(null,a);if(c>=d)return-1;!(0<c)&&0>c&&(c+=d,c=0>c?0:c);for(;;)if(c<d){if(P.h(Sc?Sc(a,c):Tc.call(null,a,c),b))return c;c+=1}else return-1}
function S(a,b,c){var d=R.g?R.g(a):R.call(null,a);if(0===d)return-1;0<c?(--d,c=d<c?d:c):c=0>c?d+c:c;for(;;)if(0<=c){if(P.h(Sc?Sc(a,c):Tc.call(null,a,c),b))return c;--c}else return-1}function Uc(a,b){this.j=a;this.v=b}Uc.prototype.hasNext=function(){return this.v<this.j.length};Uc.prototype.next=function(){var a=this.j[this.v];this.v+=1;return a};function K(a,b,c){this.j=a;this.v=b;this.meta=c;this.o=166592766;this.J=139264}g=K.prototype;g.toString=function(){return ic(this)};
g.equiv=function(a){return this.G(null,a)};g.indexOf=function(){var a=null;a=function(b,c){switch(arguments.length){case 1:return Q(this,b,0);case 2:return Q(this,b,c)}throw Error("Invalid arity: "+arguments.length);};a.g=function(b){return Q(this,b,0)};a.h=function(b,c){return Q(this,b,c)};return a}();
g.lastIndexOf=function(){function a(c){return S(this,c,R.g?R.g(this):R.call(null,this))}var b=null;b=function(c,d){switch(arguments.length){case 1:return a.call(this,c);case 2:return S(this,c,d)}throw Error("Invalid arity: "+arguments.length);};b.g=a;b.h=function(c,d){return S(this,c,d)};return b}();g.N=function(a,b){a=b+this.v;if(0<=a&&a<this.j.length)return this.j[a];throw Error("Index out of bounds");};g.ka=function(a,b,c){a=b+this.v;return 0<=a&&a<this.j.length?this.j[a]:c};
g.Aa=function(){return new Uc(this.j,this.v)};g.da=function(){return this.meta};g.sa=function(){return this.v+1<this.j.length?new K(this.j,this.v+1,null):null};g.Y=function(){var a=this.j.length-this.v;return 0>a?0:a};g.T=function(){return Dc(this)};g.G=function(a,b){return Vc.h?Vc.h(this,b):Vc.call(null,this,b)};g.ha=function(){return yc};g.oa=function(a,b){return Pc(this.j,b,this.j[this.v],this.v+1)};g.pa=function(a,b,c){return Pc(this.j,b,c,this.v)};g.ta=function(){return this.j[this.v]};
g.ua=function(){return this.v+1<this.j.length?new K(this.j,this.v+1,null):yc};g.Z=function(){return this.v<this.j.length?this:null};g.ga=function(a,b){return b===this.meta?this:new K(this.j,this.v,b)};g.ia=function(a,b){return Wc.h?Wc.h(b,this):Wc.call(null,b,this)};K.prototype[Qa]=function(){return Ac(this)};function Xc(a){return 0<a.length?new K(a,0,null):null}Gb._=function(a,b){return a===b};
var Yc=function Yc(a){switch(arguments.length){case 0:return Yc.I();case 1:return Yc.g(arguments[0]);case 2:return Yc.h(arguments[0],arguments[1]);default:for(var c=[],d=arguments.length,e=0;;)if(e<d)c.push(arguments[e]),e+=1;else break;c=new K(c.slice(2),0,null);return Yc.C(arguments[0],arguments[1],c)}};Yc.I=function(){return Zc};Yc.g=function(a){return a};Yc.h=function(a,b){return null!=a?cb(a,b):new $c(null,b,null,1,null)};
Yc.C=function(a,b,c){for(;;)if(x(c))a=Yc.h(a,b),b=N(c),c=O(c);else return Yc.h(a,b)};Yc.U=function(a){var b=N(a),c=O(a);a=N(c);c=O(c);return this.C(b,a,c)};Yc.S=2;function R(a){if(null!=a)if(null!=a&&(a.o&2||u===a.Qc))a=a.Y(null);else if(Na(a))a=a.length;else if("string"===typeof a)a=a.length;else if(null!=a&&(a.o&8388608||u===a.bd))a:{a=J(a);for(var b=0;;){if(Qc(a)){a=b+Za(a);break a}a=O(a);b+=1}}else a=Za(a);else a=0;return a}
function ad(a,b,c){for(;;){if(null==a)return c;if(0===b)return J(a)?N(a):c;if(Rc(a))return D(a,b,c);if(J(a))a=O(a),--b;else return c}}function Tc(a){switch(arguments.length){case 2:return Sc(arguments[0],arguments[1]);case 3:return T(arguments[0],arguments[1],arguments[2]);default:throw Error(["Invalid arity: ",B.g(arguments.length)].join(""));}}
function Sc(a,b){if("number"!==typeof b)throw Error("Index argument to nth must be a number");if(null==a)return a;if(null!=a&&(a.o&16||u===a.Ac))return a.N(null,b);if(Na(a)){if(-1<b&&b<a.length)return a[b|0];throw Error("Index out of bounds");}if("string"===typeof a){if(-1<b&&b<a.length)return a.charAt(b|0);throw Error("Index out of bounds");}if(null!=a&&(a.o&64||u===a.zb)||null!=a&&(a.o&16777216||u===a.Cc)){if(0>b)throw Error("Index out of bounds");a:for(;;){if(null==a)throw Error("Index out of bounds");
if(0===b){if(J(a)){a=N(a);break a}throw Error("Index out of bounds");}if(Rc(a)){a=D(a,b);break a}if(J(a))a=O(a),--b;else throw Error("Index out of bounds");}return a}if(y(db,a))return D(a,b);throw Error(["nth not supported on this type ",B.g(Pa(null==a?null:a.constructor))].join(""));}
function T(a,b,c){if("number"!==typeof b)throw Error("Index argument to nth must be a number.");if(null==a)return c;if(null!=a&&(a.o&16||u===a.Ac))return a.ka(null,b,c);if(Na(a))return-1<b&&b<a.length?a[b|0]:c;if("string"===typeof a)return-1<b&&b<a.length?a.charAt(b|0):c;if(null!=a&&(a.o&64||u===a.zb)||null!=a&&(a.o&16777216||u===a.Cc))return 0>b?c:ad(a,b,c);if(y(db,a))return D(a,b,c);throw Error(["nth not supported on this type ",B.g(Pa(null==a?null:a.constructor))].join(""));}
var H=function H(a){switch(arguments.length){case 2:return H.h(arguments[0],arguments[1]);case 3:return H.l(arguments[0],arguments[1],arguments[2]);default:throw Error(["Invalid arity: ",B.g(arguments.length)].join(""));}};H.h=function(a,b){return null==a?null:null!=a&&(a.o&256||u===a.Xc)?a.na(null,b):Na(a)?null!=b&&b<a.length?a[b|0]:null:"string"===typeof a?null!=b&&-1<b&&b<a.length?a.charAt(b|0):null:y(ib,a)?jb(a,b):null};
H.l=function(a,b,c){return null!=a?null!=a&&(a.o&256||u===a.Xc)?a.O(null,b,c):Na(a)?null!=b&&-1<b&&b<a.length?a[b|0]:c:"string"===typeof a?null!=b&&-1<b&&b<a.length?a.charAt(b|0):c:y(ib,a)?jb(a,b,c):c:c};H.S=3;var U=function U(a){switch(arguments.length){case 3:return U.l(arguments[0],arguments[1],arguments[2]);default:for(var c=[],d=arguments.length,e=0;;)if(e<d)c.push(arguments[e]),e+=1;else break;c=new K(c.slice(3),0,null);return U.C(arguments[0],arguments[1],arguments[2],c)}};
U.l=function(a,b,c){if(null!=a&&(a.o&512||u===a.rd))a=a.Sa(null,b,c);else if(null!=a)a=lb(a,b,c);else{a=[b,c];b=[];for(c=0;;)if(c<a.length){var d=a[c],e=a[c+1],f=bd(b,d);-1===f?(f=b,f.push(d),f.push(e)):b[f+1]=e;c+=2}else break;a=new v(null,b.length/2,b,null)}return a};U.C=function(a,b,c,d){for(;;)if(a=U.l(a,b,c),x(d))b=N(d),c=N(O(d)),d=O(O(d));else return a};U.U=function(a){var b=N(a),c=O(a);a=N(c);var d=O(c);c=N(d);d=O(d);return this.C(b,a,c,d)};U.S=3;
var cd=function cd(a){switch(arguments.length){case 1:return cd.g(arguments[0]);case 2:return cd.h(arguments[0],arguments[1]);default:for(var c=[],d=arguments.length,e=0;;)if(e<d)c.push(arguments[e]),e+=1;else break;c=new K(c.slice(2),0,null);return cd.C(arguments[0],arguments[1],c)}};cd.g=function(a){return a};cd.h=function(a,b){return null==a?null:ob(a,b)};cd.C=function(a,b,c){for(;;){if(null==a)return null;a=cd.h(a,b);if(x(c))b=N(c),c=O(c);else return a}};
cd.U=function(a){var b=N(a),c=O(a);a=N(c);c=O(c);return this.C(b,a,c)};cd.S=2;function dd(a){var b="function"===typeof a;return b?b:null!=a?u===a.Pc?!0:a.Fc?!1:y(Wa,a):y(Wa,a)}function ed(a,b){this.B=a;this.meta=b;this.o=393217;this.J=0}g=ed.prototype;g.da=function(){return this.meta};g.ga=function(a,b){return new ed(this.B,b)};g.Pc=u;
g.call=function(a){switch(arguments.length-1){case 0:return this.I();case 1:return this.g(arguments[1]);case 2:return this.h(arguments[1],arguments[2]);case 3:return this.l(arguments[1],arguments[2],arguments[3]);case 4:return this.K(arguments[1],arguments[2],arguments[3],arguments[4]);case 5:return this.P(arguments[1],arguments[2],arguments[3],arguments[4],arguments[5]);case 6:return this.xa(arguments[1],arguments[2],arguments[3],arguments[4],arguments[5],arguments[6]);case 7:return this.Pa(arguments[1],
arguments[2],arguments[3],arguments[4],arguments[5],arguments[6],arguments[7]);case 8:return this.za(arguments[1],arguments[2],arguments[3],arguments[4],arguments[5],arguments[6],arguments[7],arguments[8]);case 9:return this.Qa(arguments[1],arguments[2],arguments[3],arguments[4],arguments[5],arguments[6],arguments[7],arguments[8],arguments[9]);case 10:return this.Ea(arguments[1],arguments[2],arguments[3],arguments[4],arguments[5],arguments[6],arguments[7],arguments[8],arguments[9],arguments[10]);
case 11:return this.Fa(arguments[1],arguments[2],arguments[3],arguments[4],arguments[5],arguments[6],arguments[7],arguments[8],arguments[9],arguments[10],arguments[11]);case 12:return this.Ga(arguments[1],arguments[2],arguments[3],arguments[4],arguments[5],arguments[6],arguments[7],arguments[8],arguments[9],arguments[10],arguments[11],arguments[12]);case 13:return this.Ha(arguments[1],arguments[2],arguments[3],arguments[4],arguments[5],arguments[6],arguments[7],arguments[8],arguments[9],arguments[10],
arguments[11],arguments[12],arguments[13]);case 14:return this.Ia(arguments[1],arguments[2],arguments[3],arguments[4],arguments[5],arguments[6],arguments[7],arguments[8],arguments[9],arguments[10],arguments[11],arguments[12],arguments[13],arguments[14]);case 15:return this.Ja(arguments[1],arguments[2],arguments[3],arguments[4],arguments[5],arguments[6],arguments[7],arguments[8],arguments[9],arguments[10],arguments[11],arguments[12],arguments[13],arguments[14],arguments[15]);case 16:return this.Ka(arguments[1],
arguments[2],arguments[3],arguments[4],arguments[5],arguments[6],arguments[7],arguments[8],arguments[9],arguments[10],arguments[11],arguments[12],arguments[13],arguments[14],arguments[15],arguments[16]);case 17:return this.La(arguments[1],arguments[2],arguments[3],arguments[4],arguments[5],arguments[6],arguments[7],arguments[8],arguments[9],arguments[10],arguments[11],arguments[12],arguments[13],arguments[14],arguments[15],arguments[16],arguments[17]);case 18:return this.Ma(arguments[1],arguments[2],
arguments[3],arguments[4],arguments[5],arguments[6],arguments[7],arguments[8],arguments[9],arguments[10],arguments[11],arguments[12],arguments[13],arguments[14],arguments[15],arguments[16],arguments[17],arguments[18]);case 19:return this.Na(arguments[1],arguments[2],arguments[3],arguments[4],arguments[5],arguments[6],arguments[7],arguments[8],arguments[9],arguments[10],arguments[11],arguments[12],arguments[13],arguments[14],arguments[15],arguments[16],arguments[17],arguments[18],arguments[19]);case 20:return this.Oa(arguments[1],
arguments[2],arguments[3],arguments[4],arguments[5],arguments[6],arguments[7],arguments[8],arguments[9],arguments[10],arguments[11],arguments[12],arguments[13],arguments[14],arguments[15],arguments[16],arguments[17],arguments[18],arguments[19],arguments[20]);case 21:return this.kc(arguments[1],arguments[2],arguments[3],arguments[4],arguments[5],arguments[6],arguments[7],arguments[8],arguments[9],arguments[10],arguments[11],arguments[12],arguments[13],arguments[14],arguments[15],arguments[16],arguments[17],
arguments[18],arguments[19],arguments[20],arguments[21]);default:throw Error(["Invalid arity: ",B.g(arguments.length-1)].join(""));}};g.apply=function(a,b){return this.call.apply(this,[this].concat(Ra(b)))};g.I=function(){return this.B.I?this.B.I():this.B.call(null)};g.g=function(a){return this.B.g?this.B.g(a):this.B.call(null,a)};g.h=function(a,b){return this.B.h?this.B.h(a,b):this.B.call(null,a,b)};g.l=function(a,b,c){return this.B.l?this.B.l(a,b,c):this.B.call(null,a,b,c)};
g.K=function(a,b,c,d){return this.B.K?this.B.K(a,b,c,d):this.B.call(null,a,b,c,d)};g.P=function(a,b,c,d,e){return this.B.P?this.B.P(a,b,c,d,e):this.B.call(null,a,b,c,d,e)};g.xa=function(a,b,c,d,e,f){return this.B.xa?this.B.xa(a,b,c,d,e,f):this.B.call(null,a,b,c,d,e,f)};g.Pa=function(a,b,c,d,e,f,h){return this.B.Pa?this.B.Pa(a,b,c,d,e,f,h):this.B.call(null,a,b,c,d,e,f,h)};g.za=function(a,b,c,d,e,f,h,k){return this.B.za?this.B.za(a,b,c,d,e,f,h,k):this.B.call(null,a,b,c,d,e,f,h,k)};
g.Qa=function(a,b,c,d,e,f,h,k,l){return this.B.Qa?this.B.Qa(a,b,c,d,e,f,h,k,l):this.B.call(null,a,b,c,d,e,f,h,k,l)};g.Ea=function(a,b,c,d,e,f,h,k,l,m){return this.B.Ea?this.B.Ea(a,b,c,d,e,f,h,k,l,m):this.B.call(null,a,b,c,d,e,f,h,k,l,m)};g.Fa=function(a,b,c,d,e,f,h,k,l,m,n){return this.B.Fa?this.B.Fa(a,b,c,d,e,f,h,k,l,m,n):this.B.call(null,a,b,c,d,e,f,h,k,l,m,n)};g.Ga=function(a,b,c,d,e,f,h,k,l,m,n,p){return this.B.Ga?this.B.Ga(a,b,c,d,e,f,h,k,l,m,n,p):this.B.call(null,a,b,c,d,e,f,h,k,l,m,n,p)};
g.Ha=function(a,b,c,d,e,f,h,k,l,m,n,p,q){return this.B.Ha?this.B.Ha(a,b,c,d,e,f,h,k,l,m,n,p,q):this.B.call(null,a,b,c,d,e,f,h,k,l,m,n,p,q)};g.Ia=function(a,b,c,d,e,f,h,k,l,m,n,p,q,r){return this.B.Ia?this.B.Ia(a,b,c,d,e,f,h,k,l,m,n,p,q,r):this.B.call(null,a,b,c,d,e,f,h,k,l,m,n,p,q,r)};g.Ja=function(a,b,c,d,e,f,h,k,l,m,n,p,q,r,w){return this.B.Ja?this.B.Ja(a,b,c,d,e,f,h,k,l,m,n,p,q,r,w):this.B.call(null,a,b,c,d,e,f,h,k,l,m,n,p,q,r,w)};
g.Ka=function(a,b,c,d,e,f,h,k,l,m,n,p,q,r,w,A){return this.B.Ka?this.B.Ka(a,b,c,d,e,f,h,k,l,m,n,p,q,r,w,A):this.B.call(null,a,b,c,d,e,f,h,k,l,m,n,p,q,r,w,A)};g.La=function(a,b,c,d,e,f,h,k,l,m,n,p,q,r,w,A,C){return this.B.La?this.B.La(a,b,c,d,e,f,h,k,l,m,n,p,q,r,w,A,C):this.B.call(null,a,b,c,d,e,f,h,k,l,m,n,p,q,r,w,A,C)};g.Ma=function(a,b,c,d,e,f,h,k,l,m,n,p,q,r,w,A,C,E){return this.B.Ma?this.B.Ma(a,b,c,d,e,f,h,k,l,m,n,p,q,r,w,A,C,E):this.B.call(null,a,b,c,d,e,f,h,k,l,m,n,p,q,r,w,A,C,E)};
g.Na=function(a,b,c,d,e,f,h,k,l,m,n,p,q,r,w,A,C,E,M){return this.B.Na?this.B.Na(a,b,c,d,e,f,h,k,l,m,n,p,q,r,w,A,C,E,M):this.B.call(null,a,b,c,d,e,f,h,k,l,m,n,p,q,r,w,A,C,E,M)};g.Oa=function(a,b,c,d,e,f,h,k,l,m,n,p,q,r,w,A,C,E,M,W){return this.B.Oa?this.B.Oa(a,b,c,d,e,f,h,k,l,m,n,p,q,r,w,A,C,E,M,W):this.B.call(null,a,b,c,d,e,f,h,k,l,m,n,p,q,r,w,A,C,E,M,W)};
g.kc=function(a,b,c,d,e,f,h,k,l,m,n,p,q,r,w,A,C,E,M,W,ja){return fd.Wc?fd.Wc(this.B,a,b,c,d,e,f,h,k,l,m,n,p,q,r,w,A,C,E,M,W,ja):fd.call(null,this.B,a,b,c,d,e,f,h,k,l,m,n,p,q,r,w,A,C,E,M,W,ja)};function gd(a,b){return"function"===typeof a?new ed(a,b):null==a?null:Ab(a,b)}function hd(a){return null!=a&&(null!=a?a.o&131072||u===a.$c||(a.o?0:y(yb,a)):y(yb,a))?zb(a):null}
var id=function id(a){switch(arguments.length){case 1:return id.g(arguments[0]);case 2:return id.h(arguments[0],arguments[1]);default:for(var c=[],d=arguments.length,e=0;;)if(e<d)c.push(arguments[e]),e+=1;else break;c=new K(c.slice(2),0,null);return id.C(arguments[0],arguments[1],c)}};id.g=function(a){return a};id.h=function(a,b){return null==a?null:sb(a,b)};id.C=function(a,b,c){for(;;){if(null==a)return null;a=id.h(a,b);if(x(c))b=N(c),c=O(c);else return a}};
id.U=function(a){var b=N(a),c=O(a);a=N(c);c=O(c);return this.C(b,a,c)};id.S=2;function jd(a){return null==a||Oa(J(a))}function kd(a){return null==a?!1:null!=a?a.o&8||u===a.td?!0:a.o?!1:y(bb,a):y(bb,a)}function ld(a){return null==a?!1:null!=a?a.o&4096||u===a.Bd?!0:a.o?!1:y(rb,a):y(rb,a)}function md(a){return null!=a?a.o&16777216||u===a.Cc?!0:a.o?!1:y(Kb,a):y(Kb,a)}function nd(a){return null==a?!1:null!=a?a.o&1024||u===a.yd?!0:a.o?!1:y(nb,a):y(nb,a)}
function od(a){return null!=a?a.o&67108864||u===a.Ad?!0:a.o?!1:y(Mb,a):y(Mb,a)}function pd(a){return null!=a?a.o&16384||u===a.Cd?!0:a.o?!1:y(vb,a):y(vb,a)}function qd(a){return null!=a?a.J&512||u===a.sd?!0:!1:!1}function rd(a,b,c,d,e){for(;0!==e;)c[d]=a[b],d+=1,--e,b+=1}var sd={};function td(a){return null==a?!1:!1===a?!1:!0}function ud(a){var b=dd(a);return b?b:null!=a?a.o&1||u===a.ud?!0:a.o?!1:y(Xa,a):y(Xa,a)}function vd(a,b){return H.l(a,b,sd)===sd?!1:!0}
function xd(a,b){var c=J(b);return c?(b=N(c),c=O(c),Ta?Ta(a,b,c):Ua.call(null,a,b,c)):a.I?a.I():a.call(null)}function yd(a,b,c){for(c=J(c);;)if(c){var d=N(c);b=a.h?a.h(b,d):a.call(null,b,d);if(Jc(b))return G(b);c=O(c)}else return b}function zd(a,b){a=gc(a);if(x(a.hasNext()))for(var c=a.next();;)if(a.hasNext()){var d=a.next();c=b.h?b.h(c,d):b.call(null,c,d);if(Jc(c))return G(c)}else return c;else return b.I?b.I():b.call(null)}
function Ad(a,b,c){for(a=gc(a);;)if(a.hasNext()){var d=a.next();c=b.h?b.h(c,d):b.call(null,c,d);if(Jc(c))return G(c)}else return c}function Ua(a){switch(arguments.length){case 2:return Bd(arguments[0],arguments[1]);case 3:return Ta(arguments[0],arguments[1],arguments[2]);default:throw Error(["Invalid arity: ",B.g(arguments.length)].join(""));}}function Bd(a,b){return null!=b&&(b.o&524288||u===b.ad)?b.oa(null,a):Na(b)?Nc(b,a):"string"===typeof b?Nc(b,a):y(Bb,b)?Cb(b,a):vc(b)?zd(b,a):xd(a,b)}
function Ta(a,b,c){return null!=c&&(c.o&524288||u===c.ad)?c.pa(null,a,b):Na(c)?Oc(c,a,b):"string"===typeof c?Oc(c,a,b):y(Bb,c)?Cb(c,a,b):vc(c)?Ad(c,a,b):yd(a,b,c)}function Cd(a,b,c){return null!=c?Fb(c,a,b):b}function Dd(a){return a}function Ed(a,b,c,d){a=a.g?a.g(b):a.call(null,b);c=Ta(a,c,d);return a.g?a.g(c):a.call(null,c)}function Fd(a){a=(a-a%2)/2;return 0<=a?Math.floor(a):Math.ceil(a)}
function Gd(a){a-=a>>1&1431655765;a=(a&858993459)+(a>>2&858993459);return 16843009*(a+(a>>4)&252645135)>>24}var B=function B(a){switch(arguments.length){case 0:return B.I();case 1:return B.g(arguments[0]);default:for(var c=[],d=arguments.length,e=0;;)if(e<d)c.push(arguments[e]),e+=1;else break;c=new K(c.slice(1),0,null);return B.C(arguments[0],c)}};B.I=function(){return""};B.g=function(a){return null==a?"":[a].join("")};
B.C=function(a,b){for(a=new ya(B.g(a));;)if(x(b))a=a.append(B.g(N(b))),b=O(b);else return a.toString()};B.U=function(a){var b=N(a);a=O(a);return this.C(b,a)};B.S=1;function Vc(a,b){if(md(b))if(Qc(a)&&Qc(b)&&R(a)!==R(b))a=!1;else a:for(a=J(a),b=J(b);;){if(null==a){a=null==b;break a}if(null!=b&&P.h(N(a),N(b)))a=O(a),b=O(b);else{a=!1;break a}}else a=null;return td(a)}function $c(a,b,c,d,e){this.meta=a;this.first=b;this.ib=c;this.count=d;this.H=e;this.o=65937646;this.J=8192}g=$c.prototype;
g.toString=function(){return ic(this)};g.equiv=function(a){return this.G(null,a)};g.indexOf=function(){var a=null;a=function(b,c){switch(arguments.length){case 1:return Q(this,b,0);case 2:return Q(this,b,c)}throw Error("Invalid arity: "+arguments.length);};a.g=function(b){return Q(this,b,0)};a.h=function(b,c){return Q(this,b,c)};return a}();
g.lastIndexOf=function(){function a(c){return S(this,c,this.count)}var b=null;b=function(c,d){switch(arguments.length){case 1:return a.call(this,c);case 2:return S(this,c,d)}throw Error("Invalid arity: "+arguments.length);};b.g=a;b.h=function(c,d){return S(this,c,d)};return b}();g.da=function(){return this.meta};g.sa=function(){return 1===this.count?null:this.ib};g.Y=function(){return this.count};g.qb=function(){return this.first};g.rb=function(){return this.ua(null)};
g.T=function(){var a=this.H;return null!=a?a:this.H=a=Dc(this)};g.G=function(a,b){return Vc(this,b)};g.ha=function(){return Ab(yc,this.meta)};g.oa=function(a,b){return xd(b,this)};g.pa=function(a,b,c){return yd(b,c,this)};g.ta=function(){return this.first};g.ua=function(){return 1===this.count?yc:this.ib};g.Z=function(){return this};g.ga=function(a,b){return b===this.meta?this:new $c(b,this.first,this.ib,this.count,this.H)};g.ia=function(a,b){return new $c(this.meta,b,this,this.count+1,null)};
$c.prototype[Qa]=function(){return Ac(this)};function Hd(a){this.meta=a;this.o=65937614;this.J=8192}g=Hd.prototype;g.toString=function(){return ic(this)};g.equiv=function(a){return this.G(null,a)};g.indexOf=function(){var a=null;a=function(b,c){switch(arguments.length){case 1:return Q(this,b,0);case 2:return Q(this,b,c)}throw Error("Invalid arity: "+arguments.length);};a.g=function(b){return Q(this,b,0)};a.h=function(b,c){return Q(this,b,c)};return a}();
g.lastIndexOf=function(){function a(c){return S(this,c,R(this))}var b=null;b=function(c,d){switch(arguments.length){case 1:return a.call(this,c);case 2:return S(this,c,d)}throw Error("Invalid arity: "+arguments.length);};b.g=a;b.h=function(c,d){return S(this,c,d)};return b}();g.da=function(){return this.meta};g.sa=function(){return null};g.Y=function(){return 0};g.qb=function(){return null};g.rb=function(){throw Error("Can't pop empty list");};g.T=function(){return Ec};
g.G=function(a,b){return(null!=b?b.o&33554432||u===b.xd||(b.o?0:y(Lb,b)):y(Lb,b))||md(b)?null==J(b):!1};g.ha=function(){return this};g.oa=function(a,b){return xd(b,this)};g.pa=function(a,b,c){return yd(b,c,this)};g.ta=function(){return null};g.ua=function(){return yc};g.Z=function(){return null};g.ga=function(a,b){return b===this.meta?this:new Hd(b)};g.ia=function(a,b){return new $c(this.meta,b,null,1,null)};var yc=new Hd(null);Hd.prototype[Qa]=function(){return Ac(this)};
function Id(a,b,c,d){this.meta=a;this.first=b;this.ib=c;this.H=d;this.o=65929452;this.J=8192}g=Id.prototype;g.toString=function(){return ic(this)};g.equiv=function(a){return this.G(null,a)};g.indexOf=function(){var a=null;a=function(b,c){switch(arguments.length){case 1:return Q(this,b,0);case 2:return Q(this,b,c)}throw Error("Invalid arity: "+arguments.length);};a.g=function(b){return Q(this,b,0)};a.h=function(b,c){return Q(this,b,c)};return a}();
g.lastIndexOf=function(){function a(c){return S(this,c,R(this))}var b=null;b=function(c,d){switch(arguments.length){case 1:return a.call(this,c);case 2:return S(this,c,d)}throw Error("Invalid arity: "+arguments.length);};b.g=a;b.h=function(c,d){return S(this,c,d)};return b}();g.da=function(){return this.meta};g.sa=function(){return null==this.ib?null:J(this.ib)};g.T=function(){var a=this.H;return null!=a?a:this.H=a=Dc(this)};g.G=function(a,b){return Vc(this,b)};g.ha=function(){return yc};
g.oa=function(a,b){return xd(b,this)};g.pa=function(a,b,c){return yd(b,c,this)};g.ta=function(){return this.first};g.ua=function(){return null==this.ib?yc:this.ib};g.Z=function(){return this};g.ga=function(a,b){return b===this.meta?this:new Id(b,this.first,this.ib,this.H)};g.ia=function(a,b){return new Id(null,b,this,null)};Id.prototype[Qa]=function(){return Ac(this)};
function Wc(a,b){return null==b?new $c(null,a,null,1,null):null!=b&&(b.o&64||u===b.zb)?new Id(null,a,b,null):new Id(null,a,J(b),null)}function I(a,b,c,d){this.Cb=a;this.name=b;this.Ba=c;this._hash=d;this.o=2153775105;this.J=4096}g=I.prototype;g.toString=function(){return[":",B.g(this.Ba)].join("")};g.equiv=function(a){return this.G(null,a)};g.G=function(a,b){return b instanceof I?this.Ba===b.Ba:!1};
g.call=function(a){switch(arguments.length-1){case 1:return this.g(arguments[1]);case 2:return this.h(arguments[1],arguments[2]);default:throw Error(["Invalid arity: ",B.g(arguments.length-1)].join(""));}};g.apply=function(a,b){return this.call.apply(this,[this].concat(Ra(b)))};g.g=function(a){return H.h(a,this)};g.h=function(a,b){return H.l(a,this,b)};g.T=function(){var a=this._hash;return null!=a?a:this._hash=a=sc(nc(this.name),qc(this.Cb))+2654435769|0};g.Eb=function(){return this.name};g.Fb=function(){return this.Cb};
g.X=function(a,b){return Nb(b,[":",B.g(this.Ba)].join(""))};function Jd(a){if(null!=a&&(a.J&4096||u===a.Bc))return a.Fb(null);throw Error(["Doesn't support namespace: ",B.g(a)].join(""));}var Kd=function Kd(a){switch(arguments.length){case 1:return Kd.g(arguments[0]);case 2:return Kd.h(arguments[0],arguments[1]);default:throw Error(["Invalid arity: ",B.g(arguments.length)].join(""));}};
Kd.g=function(a){if(a instanceof I)return a;if(a instanceof tc)return new I(Jd(a),Ld.g?Ld.g(a):Ld.call(null,a),a.str,null);if(P.h("/",a))return new I(null,a,a,null);if("string"===typeof a){var b=a.split("/");return 2===b.length?new I(b[0],b[1],a,null):new I(null,b[0],a,null)}return null};
Kd.h=function(a,b){a=a instanceof I?Ld.g?Ld.g(a):Ld.call(null,a):a instanceof tc?Ld.g?Ld.g(a):Ld.call(null,a):a;b=b instanceof I?Ld.g?Ld.g(b):Ld.call(null,b):b instanceof tc?Ld.g?Ld.g(b):Ld.call(null,b):b;return new I(a,b,[x(a)?[B.g(a),"/"].join(""):null,B.g(b)].join(""),null)};Kd.S=2;function Md(a,b,c){this.meta=a;this.Kb=b;this.M=null;this.H=c;this.o=32374988;this.J=1}g=Md.prototype;g.toString=function(){return ic(this)};g.equiv=function(a){return this.G(null,a)};
function Nd(a){null!=a.Kb&&(a.M=a.Kb.I?a.Kb.I():a.Kb.call(null),a.Kb=null);return a.M}g.indexOf=function(){var a=null;a=function(b,c){switch(arguments.length){case 1:return Q(this,b,0);case 2:return Q(this,b,c)}throw Error("Invalid arity: "+arguments.length);};a.g=function(b){return Q(this,b,0)};a.h=function(b,c){return Q(this,b,c)};return a}();
g.lastIndexOf=function(){function a(c){return S(this,c,R(this))}var b=null;b=function(c,d){switch(arguments.length){case 1:return a.call(this,c);case 2:return S(this,c,d)}throw Error("Invalid arity: "+arguments.length);};b.g=a;b.h=function(c,d){return S(this,c,d)};return b}();g.da=function(){return this.meta};g.sa=function(){this.Z(null);return null==this.M?null:O(this.M)};g.T=function(){var a=this.H;return null!=a?a:this.H=a=Dc(this)};g.G=function(a,b){return Vc(this,b)};
g.ha=function(){return Ab(yc,this.meta)};g.oa=function(a,b){return xd(b,this)};g.pa=function(a,b,c){return yd(b,c,this)};g.ta=function(){this.Z(null);return null==this.M?null:N(this.M)};g.ua=function(){this.Z(null);return null!=this.M?xc(this.M):yc};g.Z=function(){Nd(this);if(null==this.M)return null;for(var a=this.M;;)if(a instanceof Md)a=Nd(a);else return this.M=a,J(this.M)};g.ga=function(a,b){var c=this;return b===this.meta?c:new Md(b,function(){return c.Z(null)},this.H)};
g.ia=function(a,b){return Wc(b,this)};Md.prototype[Qa]=function(){return Ac(this)};function Od(a){this.buf=a;this.end=0;this.o=2;this.J=0}Od.prototype.add=function(a){this.buf[this.end]=a;return this.end+=1};Od.prototype.Ra=function(){var a=new Pd(this.buf,0,this.end);this.buf=null;return a};Od.prototype.Y=function(){return this.end};function Pd(a,b,c){this.j=a;this.off=b;this.end=c;this.o=524306;this.J=0}g=Pd.prototype;g.Y=function(){return this.end-this.off};
g.N=function(a,b){return this.j[this.off+b]};g.ka=function(a,b,c){return 0<=b&&b<this.end-this.off?this.j[this.off+b]:c};g.yc=function(){if(this.off===this.end)throw Error("-drop-first of empty chunk");return new Pd(this.j,this.off+1,this.end)};g.oa=function(a,b){return Pc(this.j,b,this.j[this.off],this.off+1)};g.pa=function(a,b,c){return Pc(this.j,b,c,this.off)};function Qd(a,b,c,d){this.Ra=a;this.$a=b;this.meta=c;this.H=d;this.o=31850732;this.J=1536}g=Qd.prototype;g.toString=function(){return ic(this)};
g.equiv=function(a){return this.G(null,a)};g.indexOf=function(){var a=null;a=function(b,c){switch(arguments.length){case 1:return Q(this,b,0);case 2:return Q(this,b,c)}throw Error("Invalid arity: "+arguments.length);};a.g=function(b){return Q(this,b,0)};a.h=function(b,c){return Q(this,b,c)};return a}();
g.lastIndexOf=function(){function a(c){return S(this,c,R(this))}var b=null;b=function(c,d){switch(arguments.length){case 1:return a.call(this,c);case 2:return S(this,c,d)}throw Error("Invalid arity: "+arguments.length);};b.g=a;b.h=function(c,d){return S(this,c,d)};return b}();g.da=function(){return this.meta};g.sa=function(){return 1<Za(this.Ra)?new Qd(Yb(this.Ra),this.$a,null,null):null==this.$a?null:Jb(this.$a)};g.T=function(){var a=this.H;return null!=a?a:this.H=a=Dc(this)};
g.G=function(a,b){return Vc(this,b)};g.ha=function(){return yc};g.ta=function(){return D(this.Ra,0)};g.ua=function(){return 1<Za(this.Ra)?new Qd(Yb(this.Ra),this.$a,null,null):null==this.$a?yc:this.$a};g.Z=function(){return this};g.jc=function(){return this.Ra};g.Tb=function(){return null==this.$a?yc:this.$a};g.ga=function(a,b){return b===this.meta?this:new Qd(this.Ra,this.$a,b,this.H)};g.ia=function(a,b){return Wc(b,this)};g.zc=function(){return null==this.$a?null:this.$a};Qd.prototype[Qa]=function(){return Ac(this)};
function Rd(a,b){return 0===Za(a)?b:new Qd(a,b,null,null)}function Sd(a,b){a.add(b)}function Td(a,b){if(Qc(b))return R(b);var c=0;for(b=J(b);;)if(null!=b&&c<a)c+=1,b=O(b);else return c}
var Ud=function Ud(a){if(null==a)return null;var c=O(a);return null==c?J(N(a)):Wc(N(a),Ud.g?Ud.g(c):Ud.call(null,c))},Vd=function Vd(a){switch(arguments.length){case 0:return Vd.I();case 1:return Vd.g(arguments[0]);case 2:return Vd.h(arguments[0],arguments[1]);default:for(var c=[],d=arguments.length,e=0;;)if(e<d)c.push(arguments[e]),e+=1;else break;c=new K(c.slice(2),0,null);return Vd.C(arguments[0],arguments[1],c)}};Vd.I=function(){return Tb(Zc)};Vd.g=function(a){return a};
Vd.h=function(a,b){return Ub(a,b)};Vd.C=function(a,b,c){for(;;)if(a=Ub(a,b),x(c))b=N(c),c=O(c);else return a};Vd.U=function(a){var b=N(a),c=O(a);a=N(c);c=O(c);return this.C(b,a,c)};Vd.S=2;
function Wd(a,b,c){var d=J(c);if(0===b)return a.I?a.I():a.call(null);c=F(d);var e=gb(d);if(1===b)return a.g?a.g(c):a.call(null,c);d=F(e);var f=gb(e);if(2===b)return a.h?a.h(c,d):a.call(null,c,d);e=F(f);var h=gb(f);if(3===b)return a.l?a.l(c,d,e):a.call(null,c,d,e);f=F(h);var k=gb(h);if(4===b)return a.K?a.K(c,d,e,f):a.call(null,c,d,e,f);h=F(k);var l=gb(k);if(5===b)return a.P?a.P(c,d,e,f,h):a.call(null,c,d,e,f,h);k=F(l);var m=gb(l);if(6===b)return a.xa?a.xa(c,d,e,f,h,k):a.call(null,c,d,e,f,h,k);l=F(m);
var n=gb(m);if(7===b)return a.Pa?a.Pa(c,d,e,f,h,k,l):a.call(null,c,d,e,f,h,k,l);m=F(n);var p=gb(n);if(8===b)return a.za?a.za(c,d,e,f,h,k,l,m):a.call(null,c,d,e,f,h,k,l,m);n=F(p);var q=gb(p);if(9===b)return a.Qa?a.Qa(c,d,e,f,h,k,l,m,n):a.call(null,c,d,e,f,h,k,l,m,n);p=F(q);var r=gb(q);if(10===b)return a.Ea?a.Ea(c,d,e,f,h,k,l,m,n,p):a.call(null,c,d,e,f,h,k,l,m,n,p);q=F(r);var w=gb(r);if(11===b)return a.Fa?a.Fa(c,d,e,f,h,k,l,m,n,p,q):a.call(null,c,d,e,f,h,k,l,m,n,p,q);r=F(w);var A=gb(w);if(12===b)return a.Ga?
a.Ga(c,d,e,f,h,k,l,m,n,p,q,r):a.call(null,c,d,e,f,h,k,l,m,n,p,q,r);w=F(A);var C=gb(A);if(13===b)return a.Ha?a.Ha(c,d,e,f,h,k,l,m,n,p,q,r,w):a.call(null,c,d,e,f,h,k,l,m,n,p,q,r,w);A=F(C);var E=gb(C);if(14===b)return a.Ia?a.Ia(c,d,e,f,h,k,l,m,n,p,q,r,w,A):a.call(null,c,d,e,f,h,k,l,m,n,p,q,r,w,A);C=F(E);var M=gb(E);if(15===b)return a.Ja?a.Ja(c,d,e,f,h,k,l,m,n,p,q,r,w,A,C):a.call(null,c,d,e,f,h,k,l,m,n,p,q,r,w,A,C);E=F(M);var W=gb(M);if(16===b)return a.Ka?a.Ka(c,d,e,f,h,k,l,m,n,p,q,r,w,A,C,E):a.call(null,
c,d,e,f,h,k,l,m,n,p,q,r,w,A,C,E);M=F(W);var ja=gb(W);if(17===b)return a.La?a.La(c,d,e,f,h,k,l,m,n,p,q,r,w,A,C,E,M):a.call(null,c,d,e,f,h,k,l,m,n,p,q,r,w,A,C,E,M);W=F(ja);var Ba=gb(ja);if(18===b)return a.Ma?a.Ma(c,d,e,f,h,k,l,m,n,p,q,r,w,A,C,E,M,W):a.call(null,c,d,e,f,h,k,l,m,n,p,q,r,w,A,C,E,M,W);ja=F(Ba);Ba=gb(Ba);if(19===b)return a.Na?a.Na(c,d,e,f,h,k,l,m,n,p,q,r,w,A,C,E,M,W,ja):a.call(null,c,d,e,f,h,k,l,m,n,p,q,r,w,A,C,E,M,W,ja);var wd=F(Ba);gb(Ba);if(20===b)return a.Oa?a.Oa(c,d,e,f,h,k,l,m,n,p,
q,r,w,A,C,E,M,W,ja,wd):a.call(null,c,d,e,f,h,k,l,m,n,p,q,r,w,A,C,E,M,W,ja,wd);throw Error("Only up to 20 arguments supported on functions");}function Xd(a){return null!=a&&(a.o&128||u===a.Gb)?a.sa():J(xc(a))}function Yd(a,b,c){return null==c?a.g?a.g(b):a.call(a,b):Zd(a,b,F(c),Xd(c))}function Zd(a,b,c,d){return null==d?a.h?a.h(b,c):a.call(a,b,c):$d(a,b,c,F(d),Xd(d))}function $d(a,b,c,d,e){return null==e?a.l?a.l(b,c,d):a.call(a,b,c,d):ae(a,b,c,d,F(e),Xd(e))}
function ae(a,b,c,d,e,f){if(null==f)return a.K?a.K(b,c,d,e):a.call(a,b,c,d,e);var h=F(f),k=O(f);if(null==k)return a.P?a.P(b,c,d,e,h):a.call(a,b,c,d,e,h);f=F(k);var l=O(k);if(null==l)return a.xa?a.xa(b,c,d,e,h,f):a.call(a,b,c,d,e,h,f);k=F(l);var m=O(l);if(null==m)return a.Pa?a.Pa(b,c,d,e,h,f,k):a.call(a,b,c,d,e,h,f,k);l=F(m);var n=O(m);if(null==n)return a.za?a.za(b,c,d,e,h,f,k,l):a.call(a,b,c,d,e,h,f,k,l);m=F(n);var p=O(n);if(null==p)return a.Qa?a.Qa(b,c,d,e,h,f,k,l,m):a.call(a,b,c,d,e,h,f,k,l,m);
n=F(p);var q=O(p);if(null==q)return a.Ea?a.Ea(b,c,d,e,h,f,k,l,m,n):a.call(a,b,c,d,e,h,f,k,l,m,n);p=F(q);var r=O(q);if(null==r)return a.Fa?a.Fa(b,c,d,e,h,f,k,l,m,n,p):a.call(a,b,c,d,e,h,f,k,l,m,n,p);q=F(r);var w=O(r);if(null==w)return a.Ga?a.Ga(b,c,d,e,h,f,k,l,m,n,p,q):a.call(a,b,c,d,e,h,f,k,l,m,n,p,q);r=F(w);var A=O(w);if(null==A)return a.Ha?a.Ha(b,c,d,e,h,f,k,l,m,n,p,q,r):a.call(a,b,c,d,e,h,f,k,l,m,n,p,q,r);w=F(A);var C=O(A);if(null==C)return a.Ia?a.Ia(b,c,d,e,h,f,k,l,m,n,p,q,r,w):a.call(a,b,c,d,
e,h,f,k,l,m,n,p,q,r,w);A=F(C);var E=O(C);if(null==E)return a.Ja?a.Ja(b,c,d,e,h,f,k,l,m,n,p,q,r,w,A):a.call(a,b,c,d,e,h,f,k,l,m,n,p,q,r,w,A);C=F(E);var M=O(E);if(null==M)return a.Ka?a.Ka(b,c,d,e,h,f,k,l,m,n,p,q,r,w,A,C):a.call(a,b,c,d,e,h,f,k,l,m,n,p,q,r,w,A,C);E=F(M);var W=O(M);if(null==W)return a.La?a.La(b,c,d,e,h,f,k,l,m,n,p,q,r,w,A,C,E):a.call(a,b,c,d,e,h,f,k,l,m,n,p,q,r,w,A,C,E);M=F(W);var ja=O(W);if(null==ja)return a.Ma?a.Ma(b,c,d,e,h,f,k,l,m,n,p,q,r,w,A,C,E,M):a.call(a,b,c,d,e,h,f,k,l,m,n,p,
q,r,w,A,C,E,M);W=F(ja);var Ba=O(ja);if(null==Ba)return a.Na?a.Na(b,c,d,e,h,f,k,l,m,n,p,q,r,w,A,C,E,M,W):a.call(a,b,c,d,e,h,f,k,l,m,n,p,q,r,w,A,C,E,M,W);ja=F(Ba);Ba=O(Ba);if(null==Ba)return a.Oa?a.Oa(b,c,d,e,h,f,k,l,m,n,p,q,r,w,A,C,E,M,W,ja):a.call(a,b,c,d,e,h,f,k,l,m,n,p,q,r,w,A,C,E,M,W,ja);b=[b,c,d,e,h,f,k,l,m,n,p,q,r,w,A,C,E,M,W,ja];for(c=Ba;;)if(c)b.push(F(c)),c=O(c);else break;return a.apply(a,b)}
function fd(a){switch(arguments.length){case 2:return be(arguments[0],arguments[1]);case 3:return ce(arguments[0],arguments[1],arguments[2]);case 4:var b=arguments[0];var c=arguments[1],d=arguments[2],e=arguments[3];b.U?(c=Wc(c,Wc(d,e)),d=b.S,e=2+Td(d-1,e),b=e<=d?Wd(b,e,c):b.U(c)):b=Zd(b,c,d,J(e));return b;case 5:return de(arguments[0],arguments[1],arguments[2],arguments[3],arguments[4]);default:b=[];e=arguments.length;for(c=0;;)if(c<e)b.push(arguments[c]),c+=1;else break;b=new K(b.slice(5),0,null);
return ee(arguments[0],arguments[1],arguments[2],arguments[3],arguments[4],b)}}function be(a,b){if(a.U){var c=a.S,d=Td(c+1,b);return d<=c?Wd(a,d,b):a.U(b)}b=J(b);return null==b?a.I?a.I():a.call(a):Yd(a,F(b),Xd(b))}function ce(a,b,c){if(a.U){b=Wc(b,c);var d=a.S;c=Td(d,c)+1;return c<=d?Wd(a,c,b):a.U(b)}return Yd(a,b,J(c))}function de(a,b,c,d,e){return a.U?(b=Wc(b,Wc(c,Wc(d,e))),c=a.S,e=3+Td(c-2,e),e<=c?Wd(a,e,b):a.U(b)):$d(a,b,c,d,J(e))}
function ee(a,b,c,d,e,f){return a.U?(f=Ud(f),b=Wc(b,Wc(c,Wc(d,Wc(e,f)))),c=a.S,f=4+Td(c-3,f),f<=c?Wd(a,f,b):a.U(b)):ae(a,b,c,d,e,Ud(f))}function fe(a){return null!=a&&(a.o&64||u===a.zb)?be(ge,a):a}
function he(){if("undefined"===typeof za||"undefined"===typeof Aa||"undefined"===typeof Ca)Ca=function(a){this.jd=a;this.o=393216;this.J=0},Ca.prototype.ga=function(a,b){return new Ca(b)},Ca.prototype.da=function(){return this.jd},Ca.prototype.hasNext=function(){return!1},Ca.prototype.next=function(){return Error("No such element")},Ca.prototype.remove=function(){return Error("Unsupported operation")},Ca.$b=!0,Ca.Ab="cljs.core/t_cljs$core18821",Ca.mc=function(a){return Nb(a,"cljs.core/t_cljs$core18821")};
return new Ca(ie)}var je={},ke={};function le(a){this.Db=je;this._next=a}le.prototype.hasNext=function(){this.Db===je?(this.Db=ke,this._next=J(this._next)):this.Db===this._next&&(this._next=O(this.Db));return null!=this._next};le.prototype.next=function(){if(this.hasNext())return this.Db=this._next,N(this._next);throw Error("No such element");};le.prototype.remove=function(){return Error("Unsupported operation")};
function me(a,b){for(;;){if(null==J(b))return!0;var c=N(b);c=a.g?a.g(c):a.call(null,c);if(x(c))b=O(b);else return!1}}function ne(a){for(var b=Dd;;)if(a=J(a)){var c=N(a);c=b.g?b.g(c):b.call(null,c);if(x(c))return c;a=O(a)}else return null}
function oe(a,b){return new Md(null,function(){var c=J(b);if(c){if(qd(c)){for(var d=Zb(c),e=R(d),f=new Od(Array(e)),h=0;;)if(h<e){var k=function(){var l=D(d,h);return a.g?a.g(l):a.call(null,l)}();null!=k&&f.add(k);h+=1}else break;return Rd(f.Ra(),oe(a,$b(c)))}e=function(){var l=N(c);return a.g?a.g(l):a.call(null,l)}();return null==e?oe(a,xc(c)):Wc(e,oe(a,xc(c)))}return null},null)}function pe(a){this.state=a;this.ra=this.vc=this.meta=null;this.J=16386;this.o=6455296}g=pe.prototype;
g.equiv=function(a){return this.G(null,a)};g.G=function(a,b){return this===b};g.Ca=function(){return this.state};g.da=function(){return this.meta};g.Zb=function(a,b){for(var c=J(this.ra),d=null,e=0,f=0;;)if(f<e){var h=d.N(null,f),k=T(h,0,null);h=T(h,1,null);h.K?h.K(k,this,a,b):h.call(null,k,this,a,b);f+=1}else if(c=J(c))qd(c)?(d=Zb(c),c=$b(c),k=d,e=R(d),d=k):(d=N(c),k=T(d,0,null),h=T(d,1,null),h.K?h.K(k,this,a,b):h.call(null,k,this,a,b),c=O(c),d=null,e=0),f=0;else break};
g.Ib=function(a,b,c){this.ra=U.l(this.ra,b,c);return this};g.Jb=function(a,b){return this.ra=cd.h(this.ra,b)};g.T=function(){return ca(this)};function qe(a){return new pe(a)}function re(a,b){if(a instanceof pe){var c=a.vc;if(null!=c&&!x(c.g?c.g(b):c.call(null,b)))throw Error("Validator rejected reference state");c=a.state;a.state=b;null!=a.ra&&a.Zb(c,b);return b}return cc(a,b)}
var se=function se(a){switch(arguments.length){case 2:return se.h(arguments[0],arguments[1]);case 3:return se.l(arguments[0],arguments[1],arguments[2]);case 4:return se.K(arguments[0],arguments[1],arguments[2],arguments[3]);default:for(var c=[],d=arguments.length,e=0;;)if(e<d)c.push(arguments[e]),e+=1;else break;c=new K(c.slice(4),0,null);return se.C(arguments[0],arguments[1],arguments[2],arguments[3],c)}};
se.h=function(a,b){if(a instanceof pe){var c=a.state;b=b.g?b.g(c):b.call(null,c);a=re(a,b)}else a=dc(a,b);return a};se.l=function(a,b,c){if(a instanceof pe){var d=a.state;b=b.h?b.h(d,c):b.call(null,d,c);a=re(a,b)}else a=dc(a,b,c);return a};se.K=function(a,b,c,d){if(a instanceof pe){var e=a.state;b=b.l?b.l(e,c,d):b.call(null,e,c,d);a=re(a,b)}else a=dc(a,b,c,d);return a};se.C=function(a,b,c,d,e){return a instanceof pe?re(a,de(b,a.state,c,d,e)):dc(a,b,c,d,e)};
se.U=function(a){var b=N(a),c=O(a);a=N(c);var d=O(c);c=N(d);var e=O(d);d=N(e);e=O(e);return this.C(b,a,c,d,e)};se.S=4;function te(a){this.state=a;this.o=32768;this.J=0}te.prototype.Ca=function(){return this.state};
var ue=function ue(a){switch(arguments.length){case 1:return ue.g(arguments[0]);case 2:return ue.h(arguments[0],arguments[1]);case 3:return ue.l(arguments[0],arguments[1],arguments[2]);case 4:return ue.K(arguments[0],arguments[1],arguments[2],arguments[3]);default:for(var c=[],d=arguments.length,e=0;;)if(e<d)c.push(arguments[e]),e+=1;else break;c=new K(c.slice(4),0,null);return ue.C(arguments[0],arguments[1],arguments[2],arguments[3],c)}};
ue.g=function(a){return function(b){return function(){function c(k,l){l=a.g?a.g(l):a.call(null,l);return b.h?b.h(k,l):b.call(null,k,l)}function d(k){return b.g?b.g(k):b.call(null,k)}function e(){return b.I?b.I():b.call(null)}var f=null,h=function(){function k(m,n,p){var q=null;if(2<arguments.length){q=0;for(var r=Array(arguments.length-2);q<r.length;)r[q]=arguments[q+2],++q;q=new K(r,0,null)}return l.call(this,m,n,q)}function l(m,n,p){n=ce(a,n,p);return b.h?b.h(m,n):b.call(null,m,n)}k.S=2;k.U=function(m){var n=
N(m);m=O(m);var p=N(m);m=xc(m);return l(n,p,m)};k.C=l;return k}();f=function(k,l,m){switch(arguments.length){case 0:return e.call(this);case 1:return d.call(this,k);case 2:return c.call(this,k,l);default:var n=null;if(2<arguments.length){n=0;for(var p=Array(arguments.length-2);n<p.length;)p[n]=arguments[n+2],++n;n=new K(p,0,null)}return h.C(k,l,n)}throw Error("Invalid arity: "+arguments.length);};f.S=2;f.U=h.U;f.I=e;f.g=d;f.h=c;f.C=h.C;return f}()}};
ue.h=function(a,b){return new Md(null,function(){var c=J(b);if(c){if(qd(c)){for(var d=Zb(c),e=R(d),f=new Od(Array(e)),h=0;;)if(h<e)Sd(f,function(){var k=D(d,h);return a.g?a.g(k):a.call(null,k)}()),h+=1;else break;return Rd(f.Ra(),ue.h(a,$b(c)))}return Wc(function(){var k=N(c);return a.g?a.g(k):a.call(null,k)}(),ue.h(a,xc(c)))}return null},null)};
ue.l=function(a,b,c){return new Md(null,function(){var d=J(b),e=J(c);if(d&&e){var f=N(d);var h=N(e);f=a.h?a.h(f,h):a.call(null,f,h);d=Wc(f,ue.l(a,xc(d),xc(e)))}else d=null;return d},null)};ue.K=function(a,b,c,d){return new Md(null,function(){var e=J(b),f=J(c),h=J(d);if(e&&f&&h){var k=N(e);var l=N(f),m=N(h);k=a.l?a.l(k,l,m):a.call(null,k,l,m);e=Wc(k,ue.K(a,xc(e),xc(f),xc(h)))}else e=null;return e},null)};
ue.C=function(a,b,c,d,e){return ue.h(function(f){return be(a,f)},function k(h){return new Md(null,function(){var l=ue.h(J,h);return me(Dd,l)?Wc(ue.h(N,l),k(ue.h(xc,l))):null},null)}(Yc.C(e,d,Xc([c,b]))))};ue.U=function(a){var b=N(a),c=O(a);a=N(c);var d=O(c);c=N(d);var e=O(d);d=N(e);e=O(e);return this.C(b,a,c,d,e)};ue.S=4;function ve(a,b){return new Md(null,function(){a:for(var c=a,d=b;;)if(d=J(d),0<c&&d)--c,d=xc(d);else break a;return d},null)}
function we(a){return ue.l(function(b){return b},a,ve(2,a))}var xe=function xe(a){switch(arguments.length){case 0:return xe.I();case 1:return xe.g(arguments[0]);case 2:return xe.h(arguments[0],arguments[1]);case 3:return xe.l(arguments[0],arguments[1],arguments[2]);default:throw Error(["Invalid arity: ",B.g(arguments.length)].join(""));}};xe.I=function(){return Zc};xe.g=function(a){return a};
xe.h=function(a,b){return null!=a?null!=a&&(a.J&4||u===a.Sc)?Ab(Vb(Ta(Ub,Tb(a),b)),hd(a)):Ta(cb,a,b):Ta(Yc,a,b)};xe.l=function(a,b,c){return null!=a&&(a.J&4||u===a.Sc)?Ab(Vb(Ed(b,Vd,Tb(a),c)),hd(a)):Ed(b,Yc,a,c)};xe.S=3;
var ye=function ye(a,b,c){var e=J(b);b=N(e);var f=O(e);if(f){e=U.l;var h=H.h(a,b);c=ye.l?ye.l(h,f,c):ye.call(null,h,f,c);a=e.call(U,a,b,c)}else a=U.l(a,b,c);return a},ze=function ze(a){switch(arguments.length){case 3:return ze.l(arguments[0],arguments[1],arguments[2]);case 4:return ze.K(arguments[0],arguments[1],arguments[2],arguments[3]);case 5:return ze.P(arguments[0],arguments[1],arguments[2],arguments[3],arguments[4]);case 6:return ze.xa(arguments[0],arguments[1],arguments[2],arguments[3],arguments[4],
arguments[5]);default:for(var c=[],d=arguments.length,e=0;;)if(e<d)c.push(arguments[e]),e+=1;else break;c=new K(c.slice(6),0,null);return ze.C(arguments[0],arguments[1],arguments[2],arguments[3],arguments[4],arguments[5],c)}};ze.l=function(a,b,c){var d=J(b);b=N(d);if(d=O(d))a=U.l(a,b,ze.l(H.h(a,b),d,c));else{d=U.l;var e=H.h(a,b);c=c.g?c.g(e):c.call(null,e);a=d.call(U,a,b,c)}return a};
ze.K=function(a,b,c,d){var e=J(b);b=N(e);if(e=O(e))a=U.l(a,b,ze.K(H.h(a,b),e,c,d));else{e=U.l;var f=H.h(a,b);c=c.h?c.h(f,d):c.call(null,f,d);a=e.call(U,a,b,c)}return a};ze.P=function(a,b,c,d,e){var f=J(b);b=N(f);if(f=O(f))a=U.l(a,b,ze.P(H.h(a,b),f,c,d,e));else{f=U.l;var h=H.h(a,b);c=c.l?c.l(h,d,e):c.call(null,h,d,e);a=f.call(U,a,b,c)}return a};
ze.xa=function(a,b,c,d,e,f){var h=J(b);b=N(h);if(h=O(h))a=U.l(a,b,ze.xa(H.h(a,b),h,c,d,e,f));else{h=U.l;var k=H.h(a,b);c=c.K?c.K(k,d,e,f):c.call(null,k,d,e,f);a=h.call(U,a,b,c)}return a};ze.C=function(a,b,c,d,e,f,h){var k=J(b);b=N(k);return(k=O(k))?U.l(a,b,ee(ze,H.h(a,b),k,c,d,Xc([e,f,h]))):U.l(a,b,ee(c,H.h(a,b),d,e,f,Xc([h])))};ze.U=function(a){var b=N(a),c=O(a);a=N(c);var d=O(c);c=N(d);var e=O(d);d=N(e);var f=O(e);e=N(f);var h=O(f);f=N(h);h=O(h);return this.C(b,a,c,d,e,f,h)};ze.S=6;
function Ae(a,b){this.aa=a;this.j=b}function Be(a){return new Ae(a,[null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null])}function Ce(a){return new Ae(a.aa,Ra(a.j))}function De(a){a=a.s;return 32>a?0:a-1>>>5<<5}function Ee(a,b,c){for(;;){if(0===b)return c;var d=Be(a);d.j[0]=c;c=d;b-=5}}
var Fe=function Fe(a,b,c,d){var f=Ce(c),h=a.s-1>>>b&31;5===b?f.j[h]=d:(c=c.j[h],null!=c?(b-=5,a=Fe.K?Fe.K(a,b,c,d):Fe.call(null,a,b,c,d)):a=Ee(null,b-5,d),f.j[h]=a);return f};function Ge(a,b){throw Error(["No item ",B.g(a)," in vector of length ",B.g(b)].join(""));}function He(a,b){if(b>=De(a))return a.tail;var c=a.root;for(a=a.shift;;)if(0<a){var d=a-5;c=c.j[b>>>a&31];a=d}else return c.j}function Ie(a,b){return 0<=b&&b<a.s?He(a,b):Ge(b,a.s)}
var Je=function Je(a,b,c,d,e){var h=Ce(c);if(0===b)h.j[d&31]=e;else{var k=d>>>b&31;b-=5;c=c.j[k];a=Je.P?Je.P(a,b,c,d,e):Je.call(null,a,b,c,d,e);h.j[k]=a}return h},Ke=function Ke(a,b,c){var e=a.s-2>>>b&31;if(5<b){b-=5;var f=c.j[e];a=Ke.l?Ke.l(a,b,f):Ke.call(null,a,b,f);if(null==a&&0===e)return null;c=Ce(c);c.j[e]=a;return c}if(0===e)return null;c=Ce(c);c.j[e]=null;return c};function Le(a,b,c,d,e,f){this.v=a;this.base=b;this.j=c;this.ma=d;this.start=e;this.end=f}
Le.prototype.hasNext=function(){return this.v<this.end};Le.prototype.next=function(){32===this.v-this.base&&(this.j=He(this.ma,this.v),this.base+=32);var a=this.j[this.v&31];this.v+=1;return a};function Me(a,b,c){return new Le(b,b-b%32,b<R(a)?He(a,b):null,a,b,c)}function Ne(a,b,c,d){return c<d?Oe(a,b,Sc(a,c),c+1,d):b.I?b.I():b.call(null)}
function Oe(a,b,c,d,e){var f=c;c=d;for(d=He(a,d);;)if(c<e){var h=c&31;d=0===h?He(a,c):d;h=d[h];f=b.h?b.h(f,h):b.call(null,f,h);if(Jc(f))return G(f);c+=1}else return f}function V(a,b,c,d,e,f){this.meta=a;this.s=b;this.shift=c;this.root=d;this.tail=e;this.H=f;this.o=167666463;this.J=139268}g=V.prototype;g.lb=function(a,b){return 0<=b&&b<this.s?new Pe(b,He(this,b)[b&31]):null};g.toString=function(){return ic(this)};g.equiv=function(a){return this.G(null,a)};
g.indexOf=function(){var a=null;a=function(b,c){switch(arguments.length){case 1:return Q(this,b,0);case 2:return Q(this,b,c)}throw Error("Invalid arity: "+arguments.length);};a.g=function(b){return Q(this,b,0)};a.h=function(b,c){return Q(this,b,c)};return a}();
g.lastIndexOf=function(){function a(c){return S(this,c,R(this))}var b=null;b=function(c,d){switch(arguments.length){case 1:return a.call(this,c);case 2:return S(this,c,d)}throw Error("Invalid arity: "+arguments.length);};b.g=a;b.h=function(c,d){return S(this,c,d)};return b}();g.na=function(a,b){return this.O(null,b,null)};g.O=function(a,b,c){return"number"===typeof b?this.ka(null,b,c):c};
g.mb=function(a,b,c){a=0;for(var d=c;;)if(a<this.s){var e=He(this,a);c=e.length;a:for(var f=0;;)if(f<c){var h=f+a,k=e[f];d=b.l?b.l(d,h,k):b.call(null,d,h,k);if(Jc(d)){e=d;break a}f+=1}else{e=d;break a}if(Jc(e))return G(e);a+=c;d=e}else return d};g.ic=u;g.N=function(a,b){return Ie(this,b)[b&31]};g.ka=function(a,b,c){return 0<=b&&b<this.s?He(this,b)[b&31]:c};
g.fb=function(a,b,c){if(0<=b&&b<this.s)return De(this)<=b?(a=Ra(this.tail),a[b&31]=c,new V(this.meta,this.s,this.shift,this.root,a,null)):new V(this.meta,this.s,this.shift,Je(this,this.shift,this.root,b,c),this.tail,null);if(b===this.s)return this.ia(null,c);throw Error(["Index ",B.g(b)," out of bounds  [0,",B.g(this.s),"]"].join(""));};g.Aa=function(){return Me(this,0,this.s)};g.da=function(){return this.meta};g.Y=function(){return this.s};g.qb=function(){return 0<this.s?this.N(null,this.s-1):null};
g.rb=function(){if(0===this.s)throw Error("Can't pop empty vector");if(1===this.s)return Ab(Zc,this.meta);if(1<this.s-De(this))return new V(this.meta,this.s-1,this.shift,this.root,this.tail.slice(0,-1),null);var a=He(this,this.s-2),b=Ke(this,this.shift,this.root);b=null==b?X:b;var c=this.s-1;return 5<this.shift&&null==b.j[1]?new V(this.meta,c,this.shift-5,b.j[0],a,null):new V(this.meta,c,this.shift,b,a,null)};g.T=function(){var a=this.H;return null!=a?a:this.H=a=Dc(this)};
g.G=function(a,b){if(b instanceof V)if(this.s===R(b))for(a=this.Aa(null),b=b.Aa(null);;)if(a.hasNext()){var c=a.next(),d=b.next();if(!P.h(c,d))return!1}else return!0;else return!1;else return Vc(this,b)};g.kb=function(){return new Qe(this.s,this.shift,Re.g?Re.g(this.root):Re.call(null,this.root),Se.g?Se.g(this.tail):Se.call(null,this.tail))};g.ha=function(){return Ab(Zc,this.meta)};g.oa=function(a,b){return Ne(this,b,0,this.s)};
g.pa=function(a,b,c){a=0;for(var d=c;;)if(a<this.s){var e=He(this,a);c=e.length;a:for(var f=0;;)if(f<c){var h=e[f];d=b.h?b.h(d,h):b.call(null,d,h);if(Jc(d)){e=d;break a}f+=1}else{e=d;break a}if(Jc(e))return G(e);a+=c;d=e}else return d};g.Sa=function(a,b,c){if("number"===typeof b)return this.fb(null,b,c);throw Error("Vector's key for assoc must be a number.");};
g.Z=function(){if(0===this.s)return null;if(32>=this.s)return new K(this.tail,0,null);a:{var a=this.root;for(var b=this.shift;;)if(0<b)b-=5,a=a.j[0];else{a=a.j;break a}}return Te?Te(this,a,0,0):Ue.call(null,this,a,0,0)};g.ga=function(a,b){return b===this.meta?this:new V(b,this.s,this.shift,this.root,this.tail,this.H)};
g.ia=function(a,b){if(32>this.s-De(this)){a=this.tail.length;for(var c=Array(a+1),d=0;;)if(d<a)c[d]=this.tail[d],d+=1;else break;c[a]=b;return new V(this.meta,this.s+1,this.shift,this.root,c,null)}a=(c=this.s>>>5>1<<this.shift)?this.shift+5:this.shift;c?(c=Be(null),c.j[0]=this.root,d=Ee(null,this.shift,new Ae(null,this.tail)),c.j[1]=d):c=Fe(this,this.shift,this.root,new Ae(null,this.tail));return new V(this.meta,this.s+1,a,c,[b],null)};
g.call=function(a){switch(arguments.length-1){case 1:return this.g(arguments[1]);case 2:return this.h(arguments[1],arguments[2]);default:throw Error(["Invalid arity: ",B.g(arguments.length-1)].join(""));}};g.apply=function(a,b){return this.call.apply(this,[this].concat(Ra(b)))};g.g=function(a){return this.N(null,a)};g.h=function(a,b){return this.ka(null,a,b)};
var X=new Ae(null,[null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null]),Zc=new V(null,0,5,X,[],Ec);function Ve(a,b){var c=a.length;a=b?a:Ra(a);if(32>c)return new V(null,c,5,X,a,null);var d=a.slice(0,32);b=32;for(var e=(new V(null,32,5,X,d,null)).kb(null);;)if(b<c)d=b+1,e=Vd.h(e,a[b]),b=d;else return Vb(e)}V.prototype[Qa]=function(){return Ac(this)};
function We(a){return x(Xe.g?Xe.g(a):Xe.call(null,a))?new V(null,2,5,X,[Ye.g?Ye.g(a):Ye.call(null,a),Ze.g?Ze.g(a):Ze.call(null,a)],null):pd(a)?gd(a,null):Na(a)?Ve(a,!0):Vb(Ta(Ub,Tb(Zc),a))}var $e=function $e(a){for(var c=[],d=arguments.length,e=0;;)if(e<d)c.push(arguments[e]),e+=1;else break;c=0<c.length?new K(c.slice(0),0,null):null;return $e.C(c)};$e.C=function(a){return a instanceof K&&0===a.v?Ve(a.j,!Na(a.j)):We(a)};$e.S=0;$e.U=function(a){return this.C(J(a))};
function af(a,b,c,d,e){this.Da=a;this.node=b;this.v=c;this.off=d;this.meta=e;this.H=null;this.o=32375020;this.J=1536}g=af.prototype;g.toString=function(){return ic(this)};g.equiv=function(a){return this.G(null,a)};g.indexOf=function(){var a=null;a=function(b,c){switch(arguments.length){case 1:return Q(this,b,0);case 2:return Q(this,b,c)}throw Error("Invalid arity: "+arguments.length);};a.g=function(b){return Q(this,b,0)};a.h=function(b,c){return Q(this,b,c)};return a}();
g.lastIndexOf=function(){function a(c){return S(this,c,R(this))}var b=null;b=function(c,d){switch(arguments.length){case 1:return a.call(this,c);case 2:return S(this,c,d)}throw Error("Invalid arity: "+arguments.length);};b.g=a;b.h=function(c,d){return S(this,c,d)};return b}();g.da=function(){return this.meta};g.sa=function(){if(this.off+1<this.node.length){var a=this.Da;var b=this.node,c=this.v,d=this.off+1;a=Te?Te(a,b,c,d):Ue.call(null,a,b,c,d);return null==a?null:a}return this.zc()};
g.T=function(){var a=this.H;return null!=a?a:this.H=a=Dc(this)};g.G=function(a,b){return Vc(this,b)};g.ha=function(){return yc};g.oa=function(a,b){return Ne(this.Da,b,this.v+this.off,R(this.Da))};g.pa=function(a,b,c){return Oe(this.Da,b,c,this.v+this.off,R(this.Da))};g.ta=function(){return this.node[this.off]};g.ua=function(){if(this.off+1<this.node.length){var a=this.Da;var b=this.node,c=this.v,d=this.off+1;a=Te?Te(a,b,c,d):Ue.call(null,a,b,c,d);return null==a?yc:a}return this.Tb(null)};g.Z=function(){return this};
g.jc=function(){var a=this.node;return new Pd(a,this.off,a.length)};g.Tb=function(){var a=this.v+this.node.length;if(a<Za(this.Da)){var b=this.Da,c=He(this.Da,a);return Te?Te(b,c,a,0):Ue.call(null,b,c,a,0)}return yc};g.ga=function(a,b){return b===this.meta?this:bf?bf(this.Da,this.node,this.v,this.off,b):Ue.call(null,this.Da,this.node,this.v,this.off,b)};g.ia=function(a,b){return Wc(b,this)};
g.zc=function(){var a=this.v+this.node.length;if(a<Za(this.Da)){var b=this.Da,c=He(this.Da,a);return Te?Te(b,c,a,0):Ue.call(null,b,c,a,0)}return null};af.prototype[Qa]=function(){return Ac(this)};
function Ue(a){switch(arguments.length){case 3:var b=arguments[0],c=arguments[1],d=arguments[2];return new af(b,Ie(b,c),c,d,null);case 4:return Te(arguments[0],arguments[1],arguments[2],arguments[3]);case 5:return bf(arguments[0],arguments[1],arguments[2],arguments[3],arguments[4]);default:throw Error(["Invalid arity: ",B.g(arguments.length)].join(""));}}function Te(a,b,c,d){return new af(a,b,c,d,null)}function bf(a,b,c,d,e){return new af(a,b,c,d,e)}
function cf(a,b,c,d,e){this.meta=a;this.ma=b;this.start=c;this.end=d;this.H=e;this.o=167666463;this.J=139264}g=cf.prototype;g.lb=function(a,b){if(0>b)return null;a=this.start+b;return a<this.end?new Pe(b,jb(this.ma,a)):null};g.toString=function(){return ic(this)};g.equiv=function(a){return this.G(null,a)};
g.indexOf=function(){var a=null;a=function(b,c){switch(arguments.length){case 1:return Q(this,b,0);case 2:return Q(this,b,c)}throw Error("Invalid arity: "+arguments.length);};a.g=function(b){return Q(this,b,0)};a.h=function(b,c){return Q(this,b,c)};return a}();
g.lastIndexOf=function(){function a(c){return S(this,c,R(this))}var b=null;b=function(c,d){switch(arguments.length){case 1:return a.call(this,c);case 2:return S(this,c,d)}throw Error("Invalid arity: "+arguments.length);};b.g=a;b.h=function(c,d){return S(this,c,d)};return b}();g.na=function(a,b){return this.O(null,b,null)};g.O=function(a,b,c){return"number"===typeof b?this.ka(null,b,c):c};
g.mb=function(a,b,c){a=this.start;for(var d=0;;)if(a<this.end){var e=d,f=D(this.ma,a);c=b.l?b.l(c,e,f):b.call(null,c,e,f);if(Jc(c))return G(c);d+=1;a+=1}else return c};g.N=function(a,b){return 0>b||this.end<=this.start+b?Ge(b,this.end-this.start):D(this.ma,this.start+b)};g.ka=function(a,b,c){return 0>b||this.end<=this.start+b?c:D(this.ma,this.start+b,c)};
g.fb=function(a,b,c){a=this.start+b;if(0>b||this.end+1<=a)throw Error(["Index ",B.g(b)," out of bounds [0,",B.g(this.Y(null)),"]"].join(""));b=this.meta;c=U.l(this.ma,a,c);var d=this.start,e=this.end;a+=1;a=e>a?e:a;return df.P?df.P(b,c,d,a,null):df.call(null,b,c,d,a,null)};g.Aa=function(){return null!=this.ma&&u===this.ma.ic?Me(this.ma,this.start,this.end):new le(this)};g.da=function(){return this.meta};g.Y=function(){return this.end-this.start};
g.qb=function(){return this.start===this.end?null:D(this.ma,this.end-1)};g.rb=function(){if(this.start===this.end)throw Error("Can't pop empty vector");var a=this.meta,b=this.ma,c=this.start,d=this.end-1;return df.P?df.P(a,b,c,d,null):df.call(null,a,b,c,d,null)};g.T=function(){var a=this.H;return null!=a?a:this.H=a=Dc(this)};g.G=function(a,b){return Vc(this,b)};g.ha=function(){return Ab(Zc,this.meta)};
g.oa=function(a,b){return null!=this.ma&&u===this.ma.ic?Ne(this.ma,b,this.start,this.end):Lc(this,b)};g.pa=function(a,b,c){return null!=this.ma&&u===this.ma.ic?Oe(this.ma,b,c,this.start,this.end):Mc(this,b,c)};g.Sa=function(a,b,c){if("number"===typeof b)return this.fb(null,b,c);throw Error("Subvec's key for assoc must be a number.");};g.Z=function(){var a=this;return function d(c){return c===a.end?null:Wc(D(a.ma,c),new Md(null,function(){return d(c+1)},null))}(a.start)};
g.ga=function(a,b){return b===this.meta?this:df.P?df.P(b,this.ma,this.start,this.end,this.H):df.call(null,b,this.ma,this.start,this.end,this.H)};g.ia=function(a,b){a=this.meta;b=wb(this.ma,this.end,b);var c=this.start,d=this.end+1;return df.P?df.P(a,b,c,d,null):df.call(null,a,b,c,d,null)};g.call=function(a){switch(arguments.length-1){case 1:return this.g(arguments[1]);case 2:return this.h(arguments[1],arguments[2]);default:throw Error(["Invalid arity: ",B.g(arguments.length-1)].join(""));}};
g.apply=function(a,b){return this.call.apply(this,[this].concat(Ra(b)))};g.g=function(a){return this.N(null,a)};g.h=function(a,b){return this.ka(null,a,b)};cf.prototype[Qa]=function(){return Ac(this)};function df(a,b,c,d,e){for(;;)if(b instanceof cf)c=b.start+c,d=b.start+d,b=b.ma;else{if(!pd(b))throw Error("v must satisfy IVector");if(0>c||d<c||d>R(b))throw Error("Index out of bounds");return new cf(a,b,c,d,e)}}function ef(a,b){return a===b.aa?b:new Ae(a,Ra(b.j))}
function Re(a){return new Ae({},Ra(a.j))}function Se(a){var b=[null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null];rd(a,0,b,0,a.length);return b}var ff=function ff(a,b,c,d){c=ef(a.root.aa,c);var f=a.s-1>>>b&31;if(5===b)a=d;else{var h=c.j[f];null!=h?(b-=5,a=ff.K?ff.K(a,b,h,d):ff.call(null,a,b,h,d)):a=Ee(a.root.aa,b-5,d)}c.j[f]=a;return c};
function Qe(a,b,c,d){this.s=a;this.shift=b;this.root=c;this.tail=d;this.J=88;this.o=275}g=Qe.prototype;
g.eb=function(a,b){if(this.root.aa){if(32>this.s-De(this))this.tail[this.s&31]=b;else{a=new Ae(this.root.aa,this.tail);var c=[null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null];c[0]=b;this.tail=c;this.s>>>5>1<<this.shift?(b=[null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null],c=this.shift+
5,b[0]=this.root,b[1]=Ee(this.root.aa,this.shift,a),this.root=new Ae(this.root.aa,b),this.shift=c):this.root=ff(this,this.shift,this.root,a)}this.s+=1;return this}throw Error("conj! after persistent!");};g.sb=function(){if(this.root.aa){this.root.aa=null;var a=this.s-De(this),b=Array(a);rd(this.tail,0,b,0,a);return new V(null,this.s,this.shift,this.root,b,null)}throw Error("persistent! called twice");};
g.cb=function(a,b,c){if("number"===typeof b)return this.Hb(null,b,c);throw Error("TransientVector's key for assoc! must be a number.");};
g.Hb=function(a,b,c){var d=this;if(d.root.aa){if(0<=b&&b<d.s)return De(this)<=b?d.tail[b&31]=c:(a=function k(f,h){h=ef(d.root.aa,h);if(0===f)h.j[b&31]=c;else{var l=b>>>f&31;f=k(f-5,h.j[l]);h.j[l]=f}return h}(d.shift,d.root),d.root=a),this;if(b===d.s)return this.eb(null,c);throw Error(["Index ",B.g(b)," out of bounds for TransientVector of length",B.g(d.s)].join(""));}throw Error("assoc! after persistent!");};g.Y=function(){if(this.root.aa)return this.s;throw Error("count after persistent!");};
g.N=function(a,b){if(this.root.aa)return Ie(this,b)[b&31];throw Error("nth after persistent!");};g.ka=function(a,b,c){return 0<=b&&b<this.s?this.N(null,b):c};g.na=function(a,b){return this.O(null,b,null)};g.O=function(a,b,c){if(this.root.aa)return"number"===typeof b?this.ka(null,b,c):c;throw Error("lookup after persistent!");};
g.call=function(a){switch(arguments.length-1){case 1:return this.g(arguments[1]);case 2:return this.h(arguments[1],arguments[2]);default:throw Error(["Invalid arity: ",B.g(arguments.length-1)].join(""));}};g.apply=function(a,b){return this.call.apply(this,[this].concat(Ra(b)))};g.g=function(a){return this.na(null,a)};g.h=function(a,b){return this.O(null,a,b)};function gf(){this.o=2097152;this.J=0}gf.prototype.equiv=function(a){return this.G(null,a)};gf.prototype.G=function(){return!1};var hf=new gf;
function jf(a,b){return td(nd(b)&&!od(b)?R(a)===R(b)?(null!=a?a.o&1048576||u===a.wd||(a.o?0:y(Eb,a)):y(Eb,a))?Cd(function(c,d,e){return P.h(H.l(b,d,hf),e)?!0:new Ic},!0,a):me(function(c){return P.h(H.l(b,N(c),hf),N(O(c)))},a):null:null)}function kf(a){this.M=a}kf.prototype.next=function(){if(null!=this.M){var a=N(this.M),b=T(a,0,null);a=T(a,1,null);this.M=O(this.M);return{value:[b,a],done:!1}}return{value:null,done:!0}};function lf(a){this.M=a}
lf.prototype.next=function(){if(null!=this.M){var a=N(this.M);this.M=O(this.M);return{value:[a,a],done:!1}}return{value:null,done:!0}};
function bd(a,b){if(b instanceof I)a:{var c=a.length;b=b.Ba;for(var d=0;;){if(c<=d){a=-1;break a}if(a[d]instanceof I&&b===a[d].Ba){a=d;break a}d+=2}}else if("string"===typeof b||"number"===typeof b)a:for(c=a.length,d=0;;){if(c<=d){a=-1;break a}if(b===a[d]){a=d;break a}d+=2}else if(b instanceof tc)a:for(c=a.length,b=b.str,d=0;;){if(c<=d){a=-1;break a}if(a[d]instanceof tc&&b===a[d].str){a=d;break a}d+=2}else if(null==b)a:for(b=a.length,c=0;;){if(b<=c){a=-1;break a}if(null==a[c]){a=c;break a}c+=2}else a:for(c=
a.length,d=0;;){if(c<=d){a=-1;break a}if(P.h(b,a[d])){a=d;break a}d+=2}return a}function Pe(a,b){this.key=a;this.val=b;this.H=null;this.o=166619935;this.J=0}g=Pe.prototype;g.lb=function(a,b){switch(b){case 0:return new Pe(0,this.key);case 1:return new Pe(1,this.val);default:return null}};
g.indexOf=function(){var a=null;a=function(b,c){switch(arguments.length){case 1:return Q(this,b,0);case 2:return Q(this,b,c)}throw Error("Invalid arity: "+arguments.length);};a.g=function(b){return Q(this,b,0)};a.h=function(b,c){return Q(this,b,c)};return a}();
g.lastIndexOf=function(){function a(c){return S(this,c,R(this))}var b=null;b=function(c,d){switch(arguments.length){case 1:return a.call(this,c);case 2:return S(this,c,d)}throw Error("Invalid arity: "+arguments.length);};b.g=a;b.h=function(c,d){return S(this,c,d)};return b}();g.na=function(a,b){return this.ka(null,b,null)};g.O=function(a,b,c){return this.ka(null,b,c)};g.N=function(a,b){if(0===b)return this.key;if(1===b)return this.val;throw Error("Index out of bounds");};
g.ka=function(a,b,c){return 0===b?this.key:1===b?this.val:c};g.fb=function(a,b,c){return(new V(null,2,5,X,[this.key,this.val],null)).fb(null,b,c)};g.da=function(){return null};g.Y=function(){return 2};g.Yc=function(){return this.key};g.Zc=function(){return this.val};g.qb=function(){return this.val};g.rb=function(){return new V(null,1,5,X,[this.key],null)};g.T=function(){var a=this.H;return null!=a?a:this.H=a=Dc(this)};g.G=function(a,b){return Vc(this,b)};g.ha=function(){return null};
g.oa=function(a,b){return Lc(this,b)};g.pa=function(a,b,c){return Mc(this,b,c)};g.Sa=function(a,b,c){return U.l(new V(null,2,5,X,[this.key,this.val],null),b,c)};g.Z=function(){return new K([this.key,this.val],0,null)};g.ga=function(a,b){return gd(new V(null,2,5,X,[this.key,this.val],null),b)};g.ia=function(a,b){return new V(null,3,5,X,[this.key,this.val,b],null)};
g.call=function(a){switch(arguments.length-1){case 1:return this.g(arguments[1]);case 2:return this.h(arguments[1],arguments[2]);default:throw Error(["Invalid arity: ",B.g(arguments.length-1)].join(""));}};g.apply=function(a,b){return this.call.apply(this,[this].concat(Ra(b)))};g.g=function(a){return this.N(null,a)};g.h=function(a,b){return this.ka(null,a,b)};function Xe(a){return null!=a?a.o&2048||u===a.zd?!0:!1:!1}function mf(a,b,c){this.j=a;this.v=b;this._meta=c;this.o=32374990;this.J=0}g=mf.prototype;
g.toString=function(){return ic(this)};g.equiv=function(a){return this.G(null,a)};g.indexOf=function(){var a=null;a=function(b,c){switch(arguments.length){case 1:return Q(this,b,0);case 2:return Q(this,b,c)}throw Error("Invalid arity: "+arguments.length);};a.g=function(b){return Q(this,b,0)};a.h=function(b,c){return Q(this,b,c)};return a}();
g.lastIndexOf=function(){function a(c){return S(this,c,R(this))}var b=null;b=function(c,d){switch(arguments.length){case 1:return a.call(this,c);case 2:return S(this,c,d)}throw Error("Invalid arity: "+arguments.length);};b.g=a;b.h=function(c,d){return S(this,c,d)};return b}();g.da=function(){return this._meta};g.sa=function(){return this.v<this.j.length-2?new mf(this.j,this.v+2,null):null};g.Y=function(){return(this.j.length-this.v)/2};g.T=function(){return Dc(this)};
g.G=function(a,b){return Vc(this,b)};g.ha=function(){return yc};g.oa=function(a,b){return xd(b,this)};g.pa=function(a,b,c){return yd(b,c,this)};g.ta=function(){return new Pe(this.j[this.v],this.j[this.v+1])};g.ua=function(){return this.v<this.j.length-2?new mf(this.j,this.v+2,null):yc};g.Z=function(){return this};g.ga=function(a,b){return b===this._meta?this:new mf(this.j,this.v,b)};g.ia=function(a,b){return Wc(b,this)};mf.prototype[Qa]=function(){return Ac(this)};
function nf(a,b){this.j=a;this.v=0;this.s=b}nf.prototype.hasNext=function(){return this.v<this.s};nf.prototype.next=function(){var a=new Pe(this.j[this.v],this.j[this.v+1]);this.v+=2;return a};function v(a,b,c,d){this.meta=a;this.s=b;this.j=c;this.H=d;this.o=16647951;this.J=139268}g=v.prototype;g.lb=function(a,b){a=bd(this.j,b);return-1===a?null:new Pe(this.j[a],this.j[a+1])};g.toString=function(){return ic(this)};g.equiv=function(a){return this.G(null,a)};
g.keys=function(){return Ac(of.g?of.g(this):of.call(null,this))};g.entries=function(){return new kf(J(J(this)))};g.values=function(){return Ac(pf.g?pf.g(this):pf.call(null,this))};g.has=function(a){return vd(this,a)};g.get=function(a,b){return this.O(null,a,b)};
g.forEach=function(a){for(var b=J(this),c=null,d=0,e=0;;)if(e<d){var f=c.N(null,e),h=T(f,0,null);f=T(f,1,null);a.h?a.h(f,h):a.call(null,f,h);e+=1}else if(b=J(b))qd(b)?(c=Zb(b),b=$b(b),h=c,d=R(c),c=h):(c=N(b),h=T(c,0,null),f=T(c,1,null),a.h?a.h(f,h):a.call(null,f,h),b=O(b),c=null,d=0),e=0;else return null};g.na=function(a,b){return this.O(null,b,null)};g.O=function(a,b,c){a=bd(this.j,b);return-1===a?c:this.j[a+1]};
g.mb=function(a,b,c){a=this.j.length;for(var d=0;;)if(d<a){var e=this.j[d],f=this.j[d+1];c=b.l?b.l(c,e,f):b.call(null,c,e,f);if(Jc(c))return G(c);d+=2}else return c};g.Aa=function(){return new nf(this.j,2*this.s)};g.da=function(){return this.meta};g.Y=function(){return this.s};g.T=function(){var a=this.H;return null!=a?a:this.H=a=Fc(this)};
g.G=function(a,b){if(nd(b)&&!od(b))if(a=this.j.length,this.s===b.Y(null))for(var c=0;;)if(c<a){var d=b.O(null,this.j[c],sd);if(d!==sd)if(P.h(this.j[c+1],d))c+=2;else return!1;else return!1}else return!0;else return!1;else return!1};g.kb=function(){return new qf(this.j.length,Ra(this.j))};g.ha=function(){return Ab(ie,this.meta)};g.oa=function(a,b){return zd(this,b)};g.pa=function(a,b,c){return Ad(this,b,c)};
g.Ub=function(a,b){if(0<=bd(this.j,b)){a=this.j.length;var c=a-2;if(0===c)return this.ha(null);c=Array(c);for(var d=0,e=0;;){if(d>=a)return new v(this.meta,this.s-1,c,null);P.h(b,this.j[d])?d+=2:(c[e]=this.j[d],c[e+1]=this.j[d+1],e+=2,d+=2)}}else return this};
g.Sa=function(a,b,c){a=bd(this.j,b);if(-1===a){if(this.s<rf){a=this.j;for(var d=a.length,e=Array(d+2),f=0;;)if(f<d)e[f]=a[f],f+=1;else break;e[d]=b;e[d+1]=c;return new v(this.meta,this.s+1,e,null)}return Ab(lb(xe.h(sf,this),b,c),this.meta)}if(c===this.j[a+1])return this;b=Ra(this.j);b[a+1]=c;return new v(this.meta,this.s,b,null)};g.Z=function(){var a=this.j;return 0<=a.length-2?new mf(a,0,null):null};g.ga=function(a,b){return b===this.meta?this:new v(b,this.s,this.j,this.H)};
g.ia=function(a,b){if(pd(b))return this.Sa(null,D(b,0),D(b,1));a=this;for(b=J(b);;){if(null==b)return a;var c=N(b);if(pd(c))a=lb(a,D(c,0),D(c,1)),b=O(b);else throw Error("conj on a map takes map entries or seqables of map entries");}};g.call=function(a){switch(arguments.length-1){case 1:return this.g(arguments[1]);case 2:return this.h(arguments[1],arguments[2]);default:throw Error(["Invalid arity: ",B.g(arguments.length-1)].join(""));}};g.apply=function(a,b){return this.call.apply(this,[this].concat(Ra(b)))};
g.g=function(a){return this.na(null,a)};g.h=function(a,b){return this.O(null,a,b)};var ie=new v(null,0,[],Gc),rf=8;function tf(a,b,c){a=b?a:Ra(a);if(!c){c=[];for(b=0;;)if(b<a.length){var d=a[b],e=a[b+1];-1===bd(c,d)&&(c.push(d),c.push(e));b+=2}else break;a=c}return new v(null,a.length/2,a,null)}v.prototype[Qa]=function(){return Ac(this)};function qf(a,b){this.qa={};this.len=a;this.j=b;this.o=259;this.J=56}g=qf.prototype;
g.Y=function(){if(this.qa)return Fd(this.len);throw Error("count after persistent!");};g.na=function(a,b){return this.O(null,b,null)};g.O=function(a,b,c){if(this.qa)return a=bd(this.j,b),-1===a?c:this.j[a+1];throw Error("lookup after persistent!");};
g.eb=function(a,b){if(this.qa){if(Xe(b))return this.cb(null,Ye.g?Ye.g(b):Ye.call(null,b),Ze.g?Ze.g(b):Ze.call(null,b));if(pd(b))return this.cb(null,b.g?b.g(0):b.call(null,0),b.g?b.g(1):b.call(null,1));a=J(b);for(b=this;;){var c=N(a);if(x(c))a=O(a),b=Wb(b,Ye.g?Ye.g(c):Ye.call(null,c),Ze.g?Ze.g(c):Ze.call(null,c));else return b}}else throw Error("conj! after persistent!");};g.sb=function(){if(this.qa)return this.qa=!1,new v(null,Fd(this.len),this.j,null);throw Error("persistent! called twice");};
g.cb=function(a,b,c){if(this.qa){a=bd(this.j,b);if(-1===a){if(this.len+2<=2*rf)return this.len+=2,this.j.push(b),this.j.push(c),this;a=uf.h?uf.h(this.len,this.j):uf.call(null,this.len,this.j);return Wb(a,b,c)}c!==this.j[a+1]&&(this.j[a+1]=c);return this}throw Error("assoc! after persistent!");};g.call=function(a){switch(arguments.length-1){case 1:return this.g(arguments[1]);case 2:return this.h(arguments[1],arguments[2]);default:throw Error(["Invalid arity: ",B.g(arguments.length-1)].join(""));}};
g.apply=function(a,b){return this.call.apply(this,[this].concat(Ra(b)))};g.g=function(a){return this.O(null,a,null)};g.h=function(a,b){return this.O(null,a,b)};function uf(a,b){for(var c=Tb(sf),d=0;;)if(d<a)c=Wb(c,b[d],b[d+1]),d+=2;else return c}function vf(){this.val=!1}function wf(a,b){return a===b?!0:a===b||a instanceof I&&b instanceof I&&a.Ba===b.Ba?!0:P.h(a,b)}function xf(a,b,c){a=Ra(a);a[b]=c;return a}
function yf(a,b){var c=Array(a.length-2);rd(a,0,c,0,2*b);rd(a,2*(b+1),c,2*b,c.length-2*b);return c}function zf(a,b,c,d){a=a.tb(b);a.j[c]=d;return a}function Af(a,b,c){for(var d=a.length,e=0,f=c;;)if(e<d){c=a[e];if(null!=c){var h=a[e+1];c=b.l?b.l(f,c,h):b.call(null,f,c,h)}else c=a[e+1],c=null!=c?c.Ob(b,f):f;if(Jc(c))return c;e+=2;f=c}else return f}function Bf(a){this.j=a;this.v=0;this.ab=this.Pb=null}
Bf.prototype.advance=function(){for(var a=this.j.length;;)if(this.v<a){var b=this.j[this.v],c=this.j[this.v+1];null!=b?b=this.Pb=new Pe(b,c):null!=c?(b=gc(c),b=b.hasNext()?this.ab=b:!1):b=!1;this.v+=2;if(b)return!0}else return!1};Bf.prototype.hasNext=function(){var a=null!=this.Pb;return a?a:(a=null!=this.ab)?a:this.advance()};
Bf.prototype.next=function(){if(null!=this.Pb){var a=this.Pb;this.Pb=null;return a}if(null!=this.ab)return a=this.ab.next(),this.ab.hasNext()||(this.ab=null),a;if(this.advance())return this.next();throw Error("No such element");};Bf.prototype.remove=function(){return Error("Unsupported operation")};function Cf(a,b,c){this.aa=a;this.bitmap=b;this.j=c;this.J=131072;this.o=0}g=Cf.prototype;
g.tb=function(a){if(a===this.aa)return this;var b=Gd(this.bitmap),c=Array(0>b?4:2*(b+1));rd(this.j,0,c,0,2*b);return new Cf(a,this.bitmap,c)};g.Mb=function(){return Df?Df(this.j):Ef.call(null,this.j)};g.Ob=function(a,b){return Af(this.j,a,b)};g.ub=function(a,b,c,d){var e=1<<(b>>>a&31);if(0===(this.bitmap&e))return d;var f=Gd(this.bitmap&e-1);e=this.j[2*f];f=this.j[2*f+1];return null==e?f.ub(a+5,b,c,d):wf(c,e)?f:d};
g.Za=function(a,b,c,d,e,f){var h=1<<(c>>>b&31),k=Gd(this.bitmap&h-1);if(0===(this.bitmap&h)){var l=Gd(this.bitmap);if(2*l<this.j.length){a=this.tb(a);b=a.j;f.val=!0;c=2*(l-k);f=2*k+(c-1);for(l=2*(k+1)+(c-1);0!==c;)b[l]=b[f],--l,--c,--f;b[2*k]=d;b[2*k+1]=e;a.bitmap|=h;return a}if(16<=l){k=[null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null];k[c>>>b&31]=Ff.Za(a,b+5,c,d,e,f);for(e=d=0;;)if(32>
d)0===(this.bitmap>>>d&1)?d+=1:(k[d]=null!=this.j[e]?Ff.Za(a,b+5,rc(this.j[e]),this.j[e],this.j[e+1],f):this.j[e+1],e+=2,d+=1);else break;return new Gf(a,l+1,k)}b=Array(2*(l+4));rd(this.j,0,b,0,2*k);b[2*k]=d;b[2*k+1]=e;rd(this.j,2*k,b,2*(k+1),2*(l-k));f.val=!0;a=this.tb(a);a.j=b;a.bitmap|=h;return a}l=this.j[2*k];h=this.j[2*k+1];if(null==l)return l=h.Za(a,b+5,c,d,e,f),l===h?this:zf(this,a,2*k+1,l);if(wf(d,l))return e===h?this:zf(this,a,2*k+1,e);f.val=!0;f=b+5;d=Hf?Hf(a,f,l,h,c,d,e):If.call(null,a,
f,l,h,c,d,e);e=2*k;k=2*k+1;a=this.tb(a);a.j[e]=null;a.j[k]=d;return a};
g.Ya=function(a,b,c,d,e){var f=1<<(b>>>a&31),h=Gd(this.bitmap&f-1);if(0===(this.bitmap&f)){var k=Gd(this.bitmap);if(16<=k){h=[null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null];h[b>>>a&31]=Ff.Ya(a+5,b,c,d,e);for(d=c=0;;)if(32>c)0===(this.bitmap>>>c&1)?c+=1:(h[c]=null!=this.j[d]?Ff.Ya(a+5,rc(this.j[d]),this.j[d],this.j[d+1],e):this.j[d+1],d+=2,c+=1);else break;return new Gf(null,k+1,h)}a=Array(2*
(k+1));rd(this.j,0,a,0,2*h);a[2*h]=c;a[2*h+1]=d;rd(this.j,2*h,a,2*(h+1),2*(k-h));e.val=!0;return new Cf(null,this.bitmap|f,a)}var l=this.j[2*h];f=this.j[2*h+1];if(null==l)return k=f.Ya(a+5,b,c,d,e),k===f?this:new Cf(null,this.bitmap,xf(this.j,2*h+1,k));if(wf(c,l))return d===f?this:new Cf(null,this.bitmap,xf(this.j,2*h+1,d));e.val=!0;e=this.bitmap;k=this.j;a+=5;a=Jf?Jf(a,l,f,b,c,d):If.call(null,a,l,f,b,c,d);c=2*h;h=2*h+1;d=Ra(k);d[c]=null;d[h]=a;return new Cf(null,e,d)};
g.Lb=function(a,b,c,d){var e=1<<(b>>>a&31);if(0===(this.bitmap&e))return d;var f=Gd(this.bitmap&e-1);e=this.j[2*f];f=this.j[2*f+1];return null==e?f.Lb(a+5,b,c,d):wf(c,e)?new Pe(e,f):d};
g.Nb=function(a,b,c){var d=1<<(b>>>a&31);if(0===(this.bitmap&d))return this;var e=Gd(this.bitmap&d-1),f=this.j[2*e],h=this.j[2*e+1];return null==f?(a=h.Nb(a+5,b,c),a===h?this:null!=a?new Cf(null,this.bitmap,xf(this.j,2*e+1,a)):this.bitmap===d?null:new Cf(null,this.bitmap^d,yf(this.j,e))):wf(c,f)?new Cf(null,this.bitmap^d,yf(this.j,e)):this};g.Aa=function(){return new Bf(this.j)};var Ff=new Cf(null,0,[]);function Kf(a){this.j=a;this.v=0;this.ab=null}
Kf.prototype.hasNext=function(){for(var a=this.j.length;;){if(null!=this.ab&&this.ab.hasNext())return!0;if(this.v<a){var b=this.j[this.v];this.v+=1;null!=b&&(this.ab=gc(b))}else return!1}};Kf.prototype.next=function(){if(this.hasNext())return this.ab.next();throw Error("No such element");};Kf.prototype.remove=function(){return Error("Unsupported operation")};function Gf(a,b,c){this.aa=a;this.s=b;this.j=c;this.J=131072;this.o=0}g=Gf.prototype;
g.tb=function(a){return a===this.aa?this:new Gf(a,this.s,Ra(this.j))};g.Mb=function(){return Lf?Lf(this.j):Mf.call(null,this.j)};g.Ob=function(a,b){for(var c=this.j.length,d=0;;)if(d<c){var e=this.j[d];if(null!=e){b=e.Ob(a,b);if(Jc(b))return b;d+=1}else d+=1}else return b};g.ub=function(a,b,c,d){var e=this.j[b>>>a&31];return null!=e?e.ub(a+5,b,c,d):d};
g.Za=function(a,b,c,d,e,f){var h=c>>>b&31,k=this.j[h];if(null==k)return a=zf(this,a,h,Ff.Za(a,b+5,c,d,e,f)),a.s+=1,a;b=k.Za(a,b+5,c,d,e,f);return b===k?this:zf(this,a,h,b)};g.Ya=function(a,b,c,d,e){var f=b>>>a&31,h=this.j[f];if(null==h)return new Gf(null,this.s+1,xf(this.j,f,Ff.Ya(a+5,b,c,d,e)));a=h.Ya(a+5,b,c,d,e);return a===h?this:new Gf(null,this.s,xf(this.j,f,a))};g.Lb=function(a,b,c,d){var e=this.j[b>>>a&31];return null!=e?e.Lb(a+5,b,c,d):d};
g.Nb=function(a,b,c){var d=b>>>a&31,e=this.j[d];if(null!=e){a=e.Nb(a+5,b,c);if(a===e)d=this;else if(null==a)if(8>=this.s)a:{e=this.j;a=e.length;b=Array(2*(this.s-1));c=0;for(var f=1,h=0;;)if(c<a)c!==d&&null!=e[c]?(b[f]=e[c],f+=2,h|=1<<c,c+=1):c+=1;else{d=new Cf(null,h,b);break a}}else d=new Gf(null,this.s-1,xf(this.j,d,a));else d=new Gf(null,this.s,xf(this.j,d,a));return d}return this};g.Aa=function(){return new Kf(this.j)};
function Nf(a,b,c){b*=2;for(var d=0;;)if(d<b){if(wf(c,a[d]))return d;d+=2}else return-1}function Of(a,b,c,d){this.aa=a;this.gb=b;this.s=c;this.j=d;this.J=131072;this.o=0}g=Of.prototype;g.tb=function(a){if(a===this.aa)return this;var b=Array(2*(this.s+1));rd(this.j,0,b,0,2*this.s);return new Of(a,this.gb,this.s,b)};g.Mb=function(){return Df?Df(this.j):Ef.call(null,this.j)};g.Ob=function(a,b){return Af(this.j,a,b)};
g.ub=function(a,b,c,d){a=Nf(this.j,this.s,c);return 0>a?d:wf(c,this.j[a])?this.j[a+1]:d};
g.Za=function(a,b,c,d,e,f){if(c===this.gb){b=Nf(this.j,this.s,d);if(-1===b){if(this.j.length>2*this.s)return b=2*this.s,c=2*this.s+1,a=this.tb(a),a.j[b]=d,a.j[c]=e,f.val=!0,a.s+=1,a;c=this.j.length;b=Array(c+2);rd(this.j,0,b,0,c);b[c]=d;b[c+1]=e;f.val=!0;d=this.s+1;a===this.aa?(this.j=b,this.s=d,a=this):a=new Of(this.aa,this.gb,d,b);return a}return this.j[b+1]===e?this:zf(this,a,b+1,e)}return(new Cf(a,1<<(this.gb>>>b&31),[null,this,null,null])).Za(a,b,c,d,e,f)};
g.Ya=function(a,b,c,d,e){return b===this.gb?(a=Nf(this.j,this.s,c),-1===a?(a=2*this.s,b=Array(a+2),rd(this.j,0,b,0,a),b[a]=c,b[a+1]=d,e.val=!0,new Of(null,this.gb,this.s+1,b)):P.h(this.j[a+1],d)?this:new Of(null,this.gb,this.s,xf(this.j,a+1,d))):(new Cf(null,1<<(this.gb>>>a&31),[null,this])).Ya(a,b,c,d,e)};g.Lb=function(a,b,c,d){a=Nf(this.j,this.s,c);return 0>a?d:wf(c,this.j[a])?new Pe(this.j[a],this.j[a+1]):d};
g.Nb=function(a,b,c){a=Nf(this.j,this.s,c);return-1===a?this:1===this.s?null:new Of(null,this.gb,this.s-1,yf(this.j,Fd(a)))};g.Aa=function(){return new Bf(this.j)};function If(a){switch(arguments.length){case 6:return Jf(arguments[0],arguments[1],arguments[2],arguments[3],arguments[4],arguments[5]);case 7:return Hf(arguments[0],arguments[1],arguments[2],arguments[3],arguments[4],arguments[5],arguments[6]);default:throw Error(["Invalid arity: ",B.g(arguments.length)].join(""));}}
function Jf(a,b,c,d,e,f){var h=rc(b);if(h===d)return new Of(null,h,2,[b,c,e,f]);var k=new vf;return Ff.Ya(a,h,b,c,k).Ya(a,d,e,f,k)}function Hf(a,b,c,d,e,f,h){var k=rc(c);if(k===e)return new Of(null,k,2,[c,d,f,h]);var l=new vf;return Ff.Za(a,b,k,c,d,l).Za(a,b,e,f,h,l)}function Pf(a,b,c,d,e){this.meta=a;this.nodes=b;this.v=c;this.M=d;this.H=e;this.o=32374988;this.J=0}g=Pf.prototype;g.toString=function(){return ic(this)};g.equiv=function(a){return this.G(null,a)};
g.indexOf=function(){var a=null;a=function(b,c){switch(arguments.length){case 1:return Q(this,b,0);case 2:return Q(this,b,c)}throw Error("Invalid arity: "+arguments.length);};a.g=function(b){return Q(this,b,0)};a.h=function(b,c){return Q(this,b,c)};return a}();
g.lastIndexOf=function(){function a(c){return S(this,c,R(this))}var b=null;b=function(c,d){switch(arguments.length){case 1:return a.call(this,c);case 2:return S(this,c,d)}throw Error("Invalid arity: "+arguments.length);};b.g=a;b.h=function(c,d){return S(this,c,d)};return b}();g.da=function(){return this.meta};g.sa=function(){if(null==this.M){var a=this.nodes,b=this.v+2;return Qf?Qf(a,b,null):Ef.call(null,a,b,null)}a=this.nodes;b=this.v;var c=O(this.M);return Qf?Qf(a,b,c):Ef.call(null,a,b,c)};
g.T=function(){var a=this.H;return null!=a?a:this.H=a=Dc(this)};g.G=function(a,b){return Vc(this,b)};g.ha=function(){return yc};g.oa=function(a,b){return xd(b,this)};g.pa=function(a,b,c){return yd(b,c,this)};g.ta=function(){return null==this.M?new Pe(this.nodes[this.v],this.nodes[this.v+1]):N(this.M)};
g.ua=function(){var a=this,b=null==a.M?function(){var c=a.nodes,d=a.v+2;return Qf?Qf(c,d,null):Ef.call(null,c,d,null)}():function(){var c=a.nodes,d=a.v,e=O(a.M);return Qf?Qf(c,d,e):Ef.call(null,c,d,e)}();return null!=b?b:yc};g.Z=function(){return this};g.ga=function(a,b){return b===this.meta?this:new Pf(b,this.nodes,this.v,this.M,this.H)};g.ia=function(a,b){return Wc(b,this)};Pf.prototype[Qa]=function(){return Ac(this)};
function Ef(a){switch(arguments.length){case 1:return Df(arguments[0]);case 3:return Qf(arguments[0],arguments[1],arguments[2]);default:throw Error(["Invalid arity: ",B.g(arguments.length)].join(""));}}function Df(a){return Qf(a,0,null)}function Qf(a,b,c){if(null==c)for(c=a.length;;)if(b<c){if(null!=a[b])return new Pf(null,a,b,null,null);var d=a[b+1];if(x(d)&&(d=d.Mb(),x(d)))return new Pf(null,a,b+2,d,null);b+=2}else return null;else return new Pf(null,a,b,c,null)}
function Rf(a,b,c,d,e){this.meta=a;this.nodes=b;this.v=c;this.M=d;this.H=e;this.o=32374988;this.J=0}g=Rf.prototype;g.toString=function(){return ic(this)};g.equiv=function(a){return this.G(null,a)};g.indexOf=function(){var a=null;a=function(b,c){switch(arguments.length){case 1:return Q(this,b,0);case 2:return Q(this,b,c)}throw Error("Invalid arity: "+arguments.length);};a.g=function(b){return Q(this,b,0)};a.h=function(b,c){return Q(this,b,c)};return a}();
g.lastIndexOf=function(){function a(c){return S(this,c,R(this))}var b=null;b=function(c,d){switch(arguments.length){case 1:return a.call(this,c);case 2:return S(this,c,d)}throw Error("Invalid arity: "+arguments.length);};b.g=a;b.h=function(c,d){return S(this,c,d)};return b}();g.da=function(){return this.meta};g.sa=function(){var a=this.nodes,b=this.v,c=O(this.M);return Sf?Sf(a,b,c):Mf.call(null,a,b,c)};g.T=function(){var a=this.H;return null!=a?a:this.H=a=Dc(this)};
g.G=function(a,b){return Vc(this,b)};g.ha=function(){return yc};g.oa=function(a,b){return xd(b,this)};g.pa=function(a,b,c){return yd(b,c,this)};g.ta=function(){return N(this.M)};g.ua=function(){var a=this.nodes;var b=this.v,c=O(this.M);a=Sf?Sf(a,b,c):Mf.call(null,a,b,c);return null!=a?a:yc};g.Z=function(){return this};g.ga=function(a,b){return b===this.meta?this:new Rf(b,this.nodes,this.v,this.M,this.H)};g.ia=function(a,b){return Wc(b,this)};Rf.prototype[Qa]=function(){return Ac(this)};
function Mf(a){switch(arguments.length){case 1:return Lf(arguments[0]);case 3:return Sf(arguments[0],arguments[1],arguments[2]);default:throw Error(["Invalid arity: ",B.g(arguments.length)].join(""));}}function Lf(a){return Sf(a,0,null)}function Sf(a,b,c){if(null==c)for(c=a.length;;)if(b<c){var d=a[b];if(x(d)&&(d=d.Mb(),x(d)))return new Rf(null,a,b+1,d,null);b+=1}else return null;else return new Rf(null,a,b,c,null)}function Tf(a,b){this.va=a;this.Oc=b;this.seen=!1}
Tf.prototype.hasNext=function(){return!this.seen||this.Oc.hasNext()};Tf.prototype.next=function(){if(this.seen)return this.Oc.next();this.seen=!0;return new Pe(null,this.va)};Tf.prototype.remove=function(){return Error("Unsupported operation")};function Uf(a,b,c,d,e,f){this.meta=a;this.s=b;this.root=c;this.wa=d;this.va=e;this.H=f;this.o=16123663;this.J=139268}g=Uf.prototype;g.lb=function(a,b){return null==b?this.wa?new Pe(null,this.va):null:null==this.root?null:this.root.Lb(0,rc(b),b,null)};
g.toString=function(){return ic(this)};g.equiv=function(a){return this.G(null,a)};g.keys=function(){return Ac(of.g?of.g(this):of.call(null,this))};g.entries=function(){return new kf(J(J(this)))};g.values=function(){return Ac(pf.g?pf.g(this):pf.call(null,this))};g.has=function(a){return vd(this,a)};g.get=function(a,b){return this.O(null,a,b)};
g.forEach=function(a){for(var b=J(this),c=null,d=0,e=0;;)if(e<d){var f=c.N(null,e),h=T(f,0,null);f=T(f,1,null);a.h?a.h(f,h):a.call(null,f,h);e+=1}else if(b=J(b))qd(b)?(c=Zb(b),b=$b(b),h=c,d=R(c),c=h):(c=N(b),h=T(c,0,null),f=T(c,1,null),a.h?a.h(f,h):a.call(null,f,h),b=O(b),c=null,d=0),e=0;else return null};g.na=function(a,b){return this.O(null,b,null)};g.O=function(a,b,c){return null==b?this.wa?this.va:c:null==this.root?c:this.root.ub(0,rc(b),b,c)};
g.mb=function(a,b,c){a=this.wa?b.l?b.l(c,null,this.va):b.call(null,c,null,this.va):c;Jc(a)?b=G(a):null!=this.root?(b=this.root.Ob(b,a),b=Jc(b)?Kc.g?Kc.g(b):Kc.call(null,b):b):b=a;return b};g.Aa=function(){var a=this.root?gc(this.root):he();return this.wa?new Tf(this.va,a):a};g.da=function(){return this.meta};g.Y=function(){return this.s};g.T=function(){var a=this.H;return null!=a?a:this.H=a=Fc(this)};g.G=function(a,b){return jf(this,b)};g.kb=function(){return new Vf(this.root,this.s,this.wa,this.va)};
g.ha=function(){return Ab(sf,this.meta)};g.Ub=function(a,b){if(null==b)return this.wa?new Uf(this.meta,this.s-1,this.root,!1,null,null):this;if(null==this.root)return this;a=this.root.Nb(0,rc(b),b);return a===this.root?this:new Uf(this.meta,this.s-1,a,this.wa,this.va,null)};
g.Sa=function(a,b,c){if(null==b)return this.wa&&c===this.va?this:new Uf(this.meta,this.wa?this.s:this.s+1,this.root,!0,c,null);a=new vf;b=(null==this.root?Ff:this.root).Ya(0,rc(b),b,c,a);return b===this.root?this:new Uf(this.meta,a.val?this.s+1:this.s,b,this.wa,this.va,null)};g.Z=function(){if(0<this.s){var a=null!=this.root?this.root.Mb():null;return this.wa?Wc(new Pe(null,this.va),a):a}return null};g.ga=function(a,b){return b===this.meta?this:new Uf(b,this.s,this.root,this.wa,this.va,this.H)};
g.ia=function(a,b){if(pd(b))return this.Sa(null,D(b,0),D(b,1));a=this;for(b=J(b);;){if(null==b)return a;var c=N(b);if(pd(c))a=lb(a,D(c,0),D(c,1)),b=O(b);else throw Error("conj on a map takes map entries or seqables of map entries");}};g.call=function(a){switch(arguments.length-1){case 1:return this.g(arguments[1]);case 2:return this.h(arguments[1],arguments[2]);default:throw Error(["Invalid arity: ",B.g(arguments.length-1)].join(""));}};g.apply=function(a,b){return this.call.apply(this,[this].concat(Ra(b)))};
g.g=function(a){return this.na(null,a)};g.h=function(a,b){return this.O(null,a,b)};var sf=new Uf(null,0,null,!1,null,Gc);Uf.prototype[Qa]=function(){return Ac(this)};function Vf(a,b,c,d){this.aa={};this.root=a;this.count=b;this.wa=c;this.va=d;this.o=259;this.J=56}
function Wf(a,b,c){if(a.aa){if(null==b)a.va!==c&&(a.va=c),a.wa||(a.count+=1,a.wa=!0);else{var d=new vf;b=(null==a.root?Ff:a.root).Za(a.aa,0,rc(b),b,c,d);b!==a.root&&(a.root=b);d.val&&(a.count+=1)}return a}throw Error("assoc! after persistent!");}g=Vf.prototype;g.Y=function(){if(this.aa)return this.count;throw Error("count after persistent!");};g.na=function(a,b){return null==b?this.wa?this.va:null:null==this.root?null:this.root.ub(0,rc(b),b)};
g.O=function(a,b,c){return null==b?this.wa?this.va:c:null==this.root?c:this.root.ub(0,rc(b),b,c)};g.eb=function(a,b){a:if(this.aa)if(Xe(b))a=Wf(this,Ye.g?Ye.g(b):Ye.call(null,b),Ze.g?Ze.g(b):Ze.call(null,b));else if(pd(b))a=Wf(this,b.g?b.g(0):b.call(null,0),b.g?b.g(1):b.call(null,1));else for(a=J(b),b=this;;){var c=N(a);if(x(c))a=O(a),b=Wf(b,Ye.g?Ye.g(c):Ye.call(null,c),Ze.g?Ze.g(c):Ze.call(null,c));else{a=b;break a}}else throw Error("conj! after persistent");return a};
g.sb=function(){if(this.aa){this.aa=null;var a=new Uf(null,this.count,this.root,this.wa,this.va,null)}else throw Error("persistent! called twice");return a};g.cb=function(a,b,c){return Wf(this,b,c)};g.call=function(a){switch(arguments.length-1){case 1:return this.g(arguments[1]);case 2:return this.h(arguments[1],arguments[2]);default:throw Error(["Invalid arity: ",B.g(arguments.length-1)].join(""));}};g.apply=function(a,b){return this.call.apply(this,[this].concat(Ra(b)))};
g.g=function(a){return this.na(null,a)};g.h=function(a,b){return this.O(null,a,b)};var ge=function ge(a){for(var c=[],d=arguments.length,e=0;;)if(e<d)c.push(arguments[e]),e+=1;else break;c=0<c.length?new K(c.slice(0),0,null):null;return ge.C(c)};ge.C=function(a){for(var b=J(a),c=Tb(sf);;)if(b){a=O(O(b));var d=N(b);b=N(O(b));c=Wb(c,d,b);b=a}else return Vb(c)};ge.S=0;ge.U=function(a){return this.C(J(a))};function Xf(a,b){this.R=a;this._meta=b;this.o=32374988;this.J=0}g=Xf.prototype;g.toString=function(){return ic(this)};
g.equiv=function(a){return this.G(null,a)};g.indexOf=function(){var a=null;a=function(b,c){switch(arguments.length){case 1:return Q(this,b,0);case 2:return Q(this,b,c)}throw Error("Invalid arity: "+arguments.length);};a.g=function(b){return Q(this,b,0)};a.h=function(b,c){return Q(this,b,c)};return a}();
g.lastIndexOf=function(){function a(c){return S(this,c,R(this))}var b=null;b=function(c,d){switch(arguments.length){case 1:return a.call(this,c);case 2:return S(this,c,d)}throw Error("Invalid arity: "+arguments.length);};b.g=a;b.h=function(c,d){return S(this,c,d)};return b}();g.da=function(){return this._meta};g.sa=function(){var a=(null!=this.R?this.R.o&128||u===this.R.Gb||(this.R.o?0:y(hb,this.R)):y(hb,this.R))?this.R.sa():O(this.R);return null==a?null:new Xf(a,null)};g.T=function(){return Dc(this)};
g.G=function(a,b){return Vc(this,b)};g.ha=function(){return yc};g.oa=function(a,b){return xd(b,this)};g.pa=function(a,b,c){return yd(b,c,this)};g.ta=function(){return this.R.ta(null).key};g.ua=function(){var a=(null!=this.R?this.R.o&128||u===this.R.Gb||(this.R.o?0:y(hb,this.R)):y(hb,this.R))?this.R.sa():O(this.R);return null!=a?new Xf(a,null):yc};g.Z=function(){return this};g.ga=function(a,b){return b===this._meta?this:new Xf(this.R,b)};g.ia=function(a,b){return Wc(b,this)};Xf.prototype[Qa]=function(){return Ac(this)};
function of(a){return(a=J(a))?new Xf(a,null):null}function Ye(a){return pb(a)}function Yf(a,b){this.R=a;this._meta=b;this.o=32374988;this.J=0}g=Yf.prototype;g.toString=function(){return ic(this)};g.equiv=function(a){return this.G(null,a)};g.indexOf=function(){var a=null;a=function(b,c){switch(arguments.length){case 1:return Q(this,b,0);case 2:return Q(this,b,c)}throw Error("Invalid arity: "+arguments.length);};a.g=function(b){return Q(this,b,0)};a.h=function(b,c){return Q(this,b,c)};return a}();
g.lastIndexOf=function(){function a(c){return S(this,c,R(this))}var b=null;b=function(c,d){switch(arguments.length){case 1:return a.call(this,c);case 2:return S(this,c,d)}throw Error("Invalid arity: "+arguments.length);};b.g=a;b.h=function(c,d){return S(this,c,d)};return b}();g.da=function(){return this._meta};g.sa=function(){var a=(null!=this.R?this.R.o&128||u===this.R.Gb||(this.R.o?0:y(hb,this.R)):y(hb,this.R))?this.R.sa():O(this.R);return null==a?null:new Yf(a,null)};g.T=function(){return Dc(this)};
g.G=function(a,b){return Vc(this,b)};g.ha=function(){return yc};g.oa=function(a,b){return xd(b,this)};g.pa=function(a,b,c){return yd(b,c,this)};g.ta=function(){return this.R.ta(null).val};g.ua=function(){var a=(null!=this.R?this.R.o&128||u===this.R.Gb||(this.R.o?0:y(hb,this.R)):y(hb,this.R))?this.R.sa():O(this.R);return null!=a?new Yf(a,null):yc};g.Z=function(){return this};g.ga=function(a,b){return b===this._meta?this:new Yf(this.R,b)};g.ia=function(a,b){return Wc(b,this)};Yf.prototype[Qa]=function(){return Ac(this)};
function pf(a){return(a=J(a))?new Yf(a,null):null}function Ze(a){return qb(a)}var Zf=function Zf(a){for(var c=[],d=arguments.length,e=0;;)if(e<d)c.push(arguments[e]),e+=1;else break;c=0<c.length?new K(c.slice(0),0,null):null;return Zf.C(c)};Zf.C=function(a){return x(ne(a))?Bd(function(b,c){return Yc.h(x(b)?b:ie,c)},a):null};Zf.S=0;Zf.U=function(a){return this.C(J(a))};function $f(a){for(var b=ie,c=J(ag);;)if(c){var d=N(c),e=H.l(a,d,bg);b=P.h(e,bg)?b:U.l(b,d,e);c=O(c)}else return Ab(b,hd(a))}
function cg(a){this.Bb=a}cg.prototype.hasNext=function(){return this.Bb.hasNext()};cg.prototype.next=function(){if(this.Bb.hasNext())return this.Bb.next().key;throw Error("No such element");};cg.prototype.remove=function(){return Error("Unsupported operation")};function dg(a,b,c){this.meta=a;this.hb=b;this.H=c;this.o=15077647;this.J=139268}g=dg.prototype;g.toString=function(){return ic(this)};g.equiv=function(a){return this.G(null,a)};g.keys=function(){return Ac(J(this))};g.entries=function(){return new lf(J(J(this)))};
g.values=function(){return Ac(J(this))};g.has=function(a){return vd(this,a)};g.forEach=function(a){for(var b=J(this),c=null,d=0,e=0;;)if(e<d){var f=c.N(null,e),h=T(f,0,null);f=T(f,1,null);a.h?a.h(f,h):a.call(null,f,h);e+=1}else if(b=J(b))qd(b)?(c=Zb(b),b=$b(b),h=c,d=R(c),c=h):(c=N(b),h=T(c,0,null),f=T(c,1,null),a.h?a.h(f,h):a.call(null,f,h),b=O(b),c=null,d=0),e=0;else return null};g.na=function(a,b){return this.O(null,b,null)};g.O=function(a,b,c){a=mb(this.hb,b);return x(a)?pb(a):c};g.Aa=function(){return new cg(gc(this.hb))};
g.da=function(){return this.meta};g.Y=function(){return Za(this.hb)};g.T=function(){var a=this.H;return null!=a?a:this.H=a=Fc(this)};g.G=function(a,b){if(ld(b))if(R(this)===R(b))try{return Cd(function(c,d){return(c=vd(b,d))?c:new Ic},!0,this.hb)}catch(c){if(c instanceof Error)return!1;throw c;}else return!1;else return!1};g.kb=function(){return new eg(Tb(this.hb))};g.ha=function(){return Ab(fg,this.meta)};g.Dc=function(a,b){return new dg(this.meta,ob(this.hb,b),null)};g.Z=function(){return of(this.hb)};
g.ga=function(a,b){return b===this.meta?this:new dg(b,this.hb,this.H)};g.ia=function(a,b){return new dg(this.meta,U.l(this.hb,b,null),null)};g.call=function(a){switch(arguments.length-1){case 1:return this.g(arguments[1]);case 2:return this.h(arguments[1],arguments[2]);default:throw Error(["Invalid arity: ",B.g(arguments.length-1)].join(""));}};g.apply=function(a,b){return this.call.apply(this,[this].concat(Ra(b)))};g.g=function(a){return this.na(null,a)};g.h=function(a,b){return this.O(null,a,b)};
var fg=new dg(null,ie,Gc);dg.prototype[Qa]=function(){return Ac(this)};function eg(a){this.wb=a;this.J=136;this.o=259}g=eg.prototype;g.eb=function(a,b){this.wb=Wb(this.wb,b,null);return this};g.sb=function(){return new dg(null,Vb(this.wb),null)};g.Y=function(){return R(this.wb)};g.na=function(a,b){return this.O(null,b,null)};g.O=function(a,b,c){return jb(this.wb,b,sd)===sd?c:b};
g.call=function(a){switch(arguments.length-1){case 1:return this.g(arguments[1]);case 2:return this.h(arguments[1],arguments[2]);default:throw Error(["Invalid arity: ",B.g(arguments.length-1)].join(""));}};g.apply=function(a,b){return this.call.apply(this,[this].concat(Ra(b)))};g.g=function(a){return jb(this.wb,a,sd)===sd?null:a};g.h=function(a,b){return jb(this.wb,a,sd)===sd?b:a};
function gg(a){if(ld(a))return gd(a,null);a=J(a);if(null==a)return fg;if(a instanceof K&&0===a.v){a=a.j;for(var b=a.length,c=Tb(fg),d=0;;)if(d<b)Ub(c,a[d]),d+=1;else break;return Vb(c)}for(c=Tb(fg);;)if(null!=a)b=O(a),c=Ub(c,F(a)),a=b;else return Vb(c)}function Ld(a){if(null!=a&&(a.J&4096||u===a.Bc))return a.Eb(null);if("string"===typeof a)return a;throw Error(["Doesn't support name: ",B.g(a)].join(""));}
function hg(a,b){if("string"===typeof b)return a=a.exec(b),null!=a&&P.h(a[0],b)?1===a.length?a[0]:We(a):null;throw new TypeError("re-matches must match against a string.");}
function ig(a,b,c,d,e,f,h){var k=Fa;Fa=null==Fa?null:Fa-1;try{if(null!=Fa&&0>Fa)return Nb(a,"#");Nb(a,c);if(0===La.g(f))J(h)&&Nb(a,function(){var r=jg.g(f);return x(r)?r:"..."}());else{if(J(h)){var l=N(h);b.l?b.l(l,a,f):b.call(null,l,a,f)}for(var m=O(h),n=La.g(f)-1;;)if(!m||null!=n&&0===n){J(m)&&0===n&&(Nb(a,d),Nb(a,function(){var r=jg.g(f);return x(r)?r:"..."}()));break}else{Nb(a,d);var p=N(m);c=a;h=f;b.l?b.l(p,c,h):b.call(null,p,c,h);var q=O(m);c=n-1;m=q;n=c}}return Nb(a,e)}finally{Fa=k}}
function kg(a,b){b=J(b);for(var c=null,d=0,e=0;;)if(e<d){var f=c.N(null,e);Nb(a,f);e+=1}else if(b=J(b))c=b,qd(c)?(b=Zb(c),d=$b(c),c=b,f=R(b),b=d,d=f):(f=N(c),Nb(a,f),b=O(c),c=null,d=0),e=0;else return null}function lg(a){if(null==Da)throw Error("No *print-fn* fn set for evaluation environment");Da.call(null,a)}var mg={'"':'\\"',"\\":"\\\\","\b":"\\b","\f":"\\f","\n":"\\n","\r":"\\r","\t":"\\t"};function ng(a){return['"',B.g(a.replace(/[\\"\b\f\n\r\t]/g,function(b){return mg[b]})),'"'].join("")}
function og(a,b){return td(H.h(a,Ja))?null!=b&&(b.o&131072||u===b.$c)?null!=hd(b):!1:!1}
function pg(a,b,c){if(null==a)return Nb(b,"nil");if(og(c,a)){Nb(b,"^");var d=hd(a);qg.l?qg.l(d,b,c):qg.call(null,d,b,c);Nb(b," ")}if(a.$b)return a.mc(b);if(null!=a?a.o&2147483648||u===a.la||(a.o?0:y(Ob,a)):y(Ob,a))return Pb(a,b,c);if(!0===a||!1===a)return Nb(b,B.g(a));if("number"===typeof a)return Nb(b,isNaN(a)?"##NaN":a===Number.POSITIVE_INFINITY?"##Inf":a===Number.NEGATIVE_INFINITY?"##-Inf":B.g(a));if(null!=a&&a.constructor===Object)return Nb(b,"#js "),d=ue.h(function(f){return new Pe(null!=hg(/[A-Za-z_\*\+\?!\-'][\w\*\+\?!\-']*/,
f)?Kd.g(f):f,a[f])},ta(a)),rg.K?rg.K(d,qg,b,c):rg.call(null,d,qg,b,c);if(Na(a))return ig(b,qg,"#js ["," ","]",c,a);if("string"===typeof a)return x(Ia.g(c))?Nb(b,ng(a)):Nb(b,a);if("function"===typeof a){var e=a.name;c=x(function(){var f=null==e;return f?f:/^[\s\xa0]*$/.test(e)}())?"Function":e;return kg(b,Xc(["#object[",c,x(!1)?[' "',B.g(a),'"'].join(""):"","]"]))}if(a instanceof Date)return c=function(f,h){for(f=B.g(f);;)if(f.length<h)f=["0",f].join("");else return f},kg(b,Xc(['#inst "',c(a.getUTCFullYear(),
4),"-",c(a.getUTCMonth()+1,2),"-",c(a.getUTCDate(),2),"T",c(a.getUTCHours(),2),":",c(a.getUTCMinutes(),2),":",c(a.getUTCSeconds(),2),".",c(a.getUTCMilliseconds(),3),"-",'00:00"']));if(a instanceof RegExp)return kg(b,Xc(['#"',a.source,'"']));if(Va(a))return kg(b,Xc(["#object[",a.toString(),"]"]));if(x(function(){var f=null==a?null:a.constructor;return null==f?null:f.Ab}()))return kg(b,Xc(["#object[",a.constructor.Ab.replace(/\//g,"."),"]"]));e=function(){var f=null==a?null:a.constructor;return null==
f?null:f.name}();c=x(function(){var f=null==e;return f?f:/^[\s\xa0]*$/.test(e)}())?"Object":e;return null==a.constructor?kg(b,Xc(["#object[",c,"]"])):kg(b,Xc(["#object[",c," ",B.g(a),"]"]))}function qg(a,b,c){var d=sg.g(c);return x(d)?(c=U.l(c,tg,pg),d.l?d.l(a,b,c):d.call(null,a,b,c)):pg(a,b,c)}
function ug(a,b){if(jd(a))b="";else{var c=B,d=c.g,e=new ya,f=new hc(e);qg(N(a),f,b);a=J(O(a));for(var h=null,k=0,l=0;;)if(l<k){var m=h.N(null,l);Nb(f," ");qg(m,f,b);l+=1}else if(a=J(a))h=a,qd(h)?(a=Zb(h),k=$b(h),h=a,m=R(a),a=k,k=m):(m=N(h),Nb(f," "),qg(m,f,b),a=O(h),h=null,k=0),l=0;else break;b=d.call(c,e)}return b}function vg(a){var b=U.l(Ga(),Ia,!1);lg(ug(a,b));x(Ea)?(a=Ga(),lg("\n"),a=(H.h(a,Ha),null)):a=null;return a}function wg(a){return a instanceof tc?uc.h(null,Ld(a)):Kd.h(null,Ld(a))}
function xg(a){if(x(!1)){var b=J(a),c=J(b),d=N(c);O(c);T(d,0,null);T(d,1,null);c=null==a?null:null!=a&&(a.o&4||u===a.Tc)?a.ha(null):(null!=a?a.o&4||u===a.Tc||(a.o?0:y($a,a)):y($a,a))?ab(a):null;for(a=null;;){d=a;b=J(b);a=N(b);var e=O(b),f=a;a=T(f,0,null);b=T(f,1,null);if(x(f))if(a instanceof I||a instanceof tc)if(x(d))if(P.h(d,Jd(a)))c=U.l(c,wg(a),b),a=d,b=e;else return null;else if(d=Jd(a),x(d))c=U.l(c,wg(a),b),a=d,b=e;else return null;else return null;else return new V(null,2,5,X,[d,c],null)}}else return null}
function yg(a,b,c,d,e){return ig(d,function(f,h,k){var l=pb(f);c.l?c.l(l,h,k):c.call(null,l,h,k);Nb(h," ");f=qb(f);return c.l?c.l(f,h,k):c.call(null,f,h,k)},[B.g(a),"{"].join(""),", ","}",e,J(b))}function rg(a,b,c,d){var e=nd(a)?xg(a):null,f=T(e,0,null);e=T(e,1,null);return x(f)?yg(["#:",B.g(f)].join(""),e,b,c,d):yg(null,a,b,c,d)}te.prototype.la=u;te.prototype.X=function(a,b,c){Nb(b,"#object[cljs.core.Volatile ");qg(new v(null,1,[zg,this.state],null),b,c);return Nb(b,"]")};K.prototype.la=u;
K.prototype.X=function(a,b,c){return ig(b,qg,"("," ",")",c,this)};Md.prototype.la=u;Md.prototype.X=function(a,b,c){return ig(b,qg,"("," ",")",c,this)};Pe.prototype.la=u;Pe.prototype.X=function(a,b,c){return ig(b,qg,"["," ","]",c,this)};Pf.prototype.la=u;Pf.prototype.X=function(a,b,c){return ig(b,qg,"("," ",")",c,this)};mf.prototype.la=u;mf.prototype.X=function(a,b,c){return ig(b,qg,"("," ",")",c,this)};Bc.prototype.la=u;Bc.prototype.X=function(a,b,c){return ig(b,qg,"("," ",")",c,this)};
af.prototype.la=u;af.prototype.X=function(a,b,c){return ig(b,qg,"("," ",")",c,this)};Id.prototype.la=u;Id.prototype.X=function(a,b,c){return ig(b,qg,"("," ",")",c,this)};Uf.prototype.la=u;Uf.prototype.X=function(a,b,c){return rg(this,qg,b,c)};Rf.prototype.la=u;Rf.prototype.X=function(a,b,c){return ig(b,qg,"("," ",")",c,this)};cf.prototype.la=u;cf.prototype.X=function(a,b,c){return ig(b,qg,"["," ","]",c,this)};dg.prototype.la=u;dg.prototype.X=function(a,b,c){return ig(b,qg,"#{"," ","}",c,this)};
Qd.prototype.la=u;Qd.prototype.X=function(a,b,c){return ig(b,qg,"("," ",")",c,this)};pe.prototype.la=u;pe.prototype.X=function(a,b,c){Nb(b,"#object[cljs.core.Atom ");qg(new v(null,1,[zg,this.state],null),b,c);return Nb(b,"]")};Yf.prototype.la=u;Yf.prototype.X=function(a,b,c){return ig(b,qg,"("," ",")",c,this)};V.prototype.la=u;V.prototype.X=function(a,b,c){return ig(b,qg,"["," ","]",c,this)};Hd.prototype.la=u;Hd.prototype.X=function(a,b){return Nb(b,"()")};v.prototype.la=u;
v.prototype.X=function(a,b,c){return rg(this,qg,b,c)};Xf.prototype.la=u;Xf.prototype.X=function(a,b,c){return ig(b,qg,"("," ",")",c,this)};$c.prototype.la=u;$c.prototype.X=function(a,b,c){return ig(b,qg,"("," ",")",c,this)};var Ag=null;function Bg(a){null==Ag&&(Ag=qe(0));return uc.g([B.g(a),B.g(se.h(Ag,Hc))].join(""))}function Cg(){}
function Dg(a){if(null!=a&&null!=a.Vc)a=a.Vc(a);else{var b=Dg[t(null==a?null:a)];if(null!=b)a=b.g?b.g(a):b.call(null,a);else if(b=Dg._,null!=b)a=b.g?b.g(a):b.call(null,a);else throw z("IEncodeJS.-clj-\x3ejs",a);}return a}function Eg(a,b){return(null!=a?u===a.Uc||(a.Fc?0:y(Cg,a)):y(Cg,a))?Dg(a):"string"===typeof a||"number"===typeof a||a instanceof I||a instanceof tc?b.g?b.g(a):b.call(null,a):ug(Xc([a]),Ga())}
var Fg=function Fg(a){for(var c=[],d=arguments.length,e=0;;)if(e<d)c.push(arguments[e]),e+=1;else break;c=1<c.length?new K(c.slice(1),0,null):null;return Fg.C(arguments[0],c)};
Fg.C=function(a,b){b=fe(b);var c=H.l(b,Gg,Ld),d=function h(f){if(null==f)return null;if(null!=f?u===f.Uc||(f.Fc?0:y(Cg,f)):y(Cg,f))return Dg(f);if(f instanceof I)return c.g?c.g(f):c.call(null,f);if(f instanceof tc)return B.g(f);if(nd(f)){var k={};f=J(f);for(var l=null,m=0,n=0;;)if(n<m){var p=l.N(null,n),q=T(p,0,null);p=T(p,1,null);q=Eg(q,d);p=h(p);k[q]=p;n+=1}else if(f=J(f))qd(f)?(m=Zb(f),f=$b(f),l=m,m=R(m)):(m=N(f),l=T(m,0,null),m=T(m,1,null),l=Eg(l,d),m=h(m),k[l]=m,f=O(f),l=null,m=0),n=0;else break;
return k}if(kd(f)){k=[];f=J(ue.h(h,f));l=null;for(n=m=0;;)if(n<m)q=l.N(null,n),k.push(q),n+=1;else if(f=J(f))l=f,qd(l)?(f=Zb(l),n=$b(l),l=f,m=R(f),f=n):(f=N(l),k.push(f),f=O(l),l=null,m=0),n=0;else break;return k}return f};return d(a)};Fg.S=1;Fg.U=function(a){var b=N(a);a=O(a);return this.C(b,a)};var Hg=null;function Ig(){null==Hg&&(Hg=qe(new v(null,3,[Jg,ie,Kg,ie,Lg,ie],null)));return Hg}
function Mg(a,b,c){var d=P.h(b,c);if(d)return d;d=Lg.g(a);d=d.g?d.g(b):d.call(null,b);if(d=vd(d,c))return d;if(pd(c))if(pd(b))if(R(c)===R(b)){d=!0;for(var e=0;;)if(d&&e!==R(c))d=Mg(a,b.g?b.g(e):b.call(null,e),c.g?c.g(e):c.call(null,e)),e+=1;else return d}else return!1;else return!1;else return!1}function Ng(a){var b=G(Ig());a=H.h(Jg.g(b),a);return J(a)?a:null}function Og(a,b,c,d){se.h(a,function(){return G(b)});se.h(c,function(){return G(d)})}
var Pg=function Pg(a,b,c){var e=function(){var f=G(c);return f.g?f.g(a):f.call(null,a)}();e=x(x(e)?e.g?e.g(b):e.call(null,b):e)?!0:null;if(x(e))return e;e=function(){for(var f=Ng(b);;)if(0<R(f)){var h=N(f);Pg.l?Pg.l(a,h,c):Pg.call(null,a,h,c);f=xc(f)}else return null}();if(x(e))return e;e=function(){for(var f=Ng(a);;)if(0<R(f)){var h=N(f);Pg.l?Pg.l(h,b,c):Pg.call(null,h,b,c);f=xc(f)}else return null}();return x(e)?e:!1};function Qg(a,b,c,d){c=Pg(a,b,c);return x(c)?c:Mg(d,a,b)}
var Rg=function Rg(a,b,c,d,e,f,h,k){var m=Ta(function(p,q){var r=T(q,0,null);T(q,1,null);if(Mg(G(c),b,r)){p=null==p||Qg(r,N(p),e,G(c))?q:p;if(!Qg(N(p),r,e,G(c)))throw Error(["Multiple methods in multimethod '",B.g(a),"' match dispatch value: ",B.g(b)," -\x3e ",B.g(r)," and ",B.g(N(p)),", and neither is preferred"].join(""));return p}return p},null,G(d)),n=function(){if(null==m){var p=G(d);p=p.g?p.g(k):p.call(null,k)}else p=!1;return x(p)?new V(null,2,5,X,[k,p],null):m}();if(x(n)){if(P.h(G(h),G(c)))return se.K(f,
U,b,N(O(n))),N(O(n));Og(f,d,h,c);return Rg.za?Rg.za(a,b,c,d,e,f,h,k):Rg.call(null,a,b,c,d,e,f,h,k)}return null};function Sg(a,b){throw Error(["No method in multimethod '",B.g(a),"' for dispatch value: ",B.g(b)].join(""));}function Tg(){var a=uc.h("plotly-pyclj.server","set-default-args"),b=Ug,c=Vg,d=Wg,e=Xg,f=Yg,h=Zg,k=$g;this.name=a;this.D=h;this.hd=k;this.hierarchy=b;this.dc=c;this.md=d;this.cc=e;this.Sb=f;this.o=4194305;this.J=4352}g=Tg.prototype;
g.call=function(a){switch(arguments.length-1){case 0:return this.I();case 1:return this.g(arguments[1]);case 2:return this.h(arguments[1],arguments[2]);case 3:return this.l(arguments[1],arguments[2],arguments[3]);case 4:return this.K(arguments[1],arguments[2],arguments[3],arguments[4]);case 5:return this.P(arguments[1],arguments[2],arguments[3],arguments[4],arguments[5]);case 6:return this.xa(arguments[1],arguments[2],arguments[3],arguments[4],arguments[5],arguments[6]);case 7:return this.Pa(arguments[1],
arguments[2],arguments[3],arguments[4],arguments[5],arguments[6],arguments[7]);case 8:return this.za(arguments[1],arguments[2],arguments[3],arguments[4],arguments[5],arguments[6],arguments[7],arguments[8]);case 9:return this.Qa(arguments[1],arguments[2],arguments[3],arguments[4],arguments[5],arguments[6],arguments[7],arguments[8],arguments[9]);case 10:return this.Ea(arguments[1],arguments[2],arguments[3],arguments[4],arguments[5],arguments[6],arguments[7],arguments[8],arguments[9],arguments[10]);
case 11:return this.Fa(arguments[1],arguments[2],arguments[3],arguments[4],arguments[5],arguments[6],arguments[7],arguments[8],arguments[9],arguments[10],arguments[11]);case 12:return this.Ga(arguments[1],arguments[2],arguments[3],arguments[4],arguments[5],arguments[6],arguments[7],arguments[8],arguments[9],arguments[10],arguments[11],arguments[12]);case 13:return this.Ha(arguments[1],arguments[2],arguments[3],arguments[4],arguments[5],arguments[6],arguments[7],arguments[8],arguments[9],arguments[10],
arguments[11],arguments[12],arguments[13]);case 14:return this.Ia(arguments[1],arguments[2],arguments[3],arguments[4],arguments[5],arguments[6],arguments[7],arguments[8],arguments[9],arguments[10],arguments[11],arguments[12],arguments[13],arguments[14]);case 15:return this.Ja(arguments[1],arguments[2],arguments[3],arguments[4],arguments[5],arguments[6],arguments[7],arguments[8],arguments[9],arguments[10],arguments[11],arguments[12],arguments[13],arguments[14],arguments[15]);case 16:return this.Ka(arguments[1],
arguments[2],arguments[3],arguments[4],arguments[5],arguments[6],arguments[7],arguments[8],arguments[9],arguments[10],arguments[11],arguments[12],arguments[13],arguments[14],arguments[15],arguments[16]);case 17:return this.La(arguments[1],arguments[2],arguments[3],arguments[4],arguments[5],arguments[6],arguments[7],arguments[8],arguments[9],arguments[10],arguments[11],arguments[12],arguments[13],arguments[14],arguments[15],arguments[16],arguments[17]);case 18:return this.Ma(arguments[1],arguments[2],
arguments[3],arguments[4],arguments[5],arguments[6],arguments[7],arguments[8],arguments[9],arguments[10],arguments[11],arguments[12],arguments[13],arguments[14],arguments[15],arguments[16],arguments[17],arguments[18]);case 19:return this.Na(arguments[1],arguments[2],arguments[3],arguments[4],arguments[5],arguments[6],arguments[7],arguments[8],arguments[9],arguments[10],arguments[11],arguments[12],arguments[13],arguments[14],arguments[15],arguments[16],arguments[17],arguments[18],arguments[19]);case 20:return this.Oa(arguments[1],
arguments[2],arguments[3],arguments[4],arguments[5],arguments[6],arguments[7],arguments[8],arguments[9],arguments[10],arguments[11],arguments[12],arguments[13],arguments[14],arguments[15],arguments[16],arguments[17],arguments[18],arguments[19],arguments[20]);case 21:return this.kc(arguments[1],arguments[2],arguments[3],arguments[4],arguments[5],arguments[6],arguments[7],arguments[8],arguments[9],arguments[10],arguments[11],arguments[12],arguments[13],arguments[14],arguments[15],arguments[16],arguments[17],
arguments[18],arguments[19],arguments[20],arguments[21]);default:throw Error(["Invalid arity: ",B.g(arguments.length-1)].join(""));}};g.apply=function(a,b){return this.call.apply(this,[this].concat(Ra(b)))};g.I=function(){var a=this.D.I?this.D.I():this.D.call(null),b=ah(this,a);x(b)||Sg(this.name,a);return b.I?b.I():b.call(null)};g.g=function(a){var b=this.D.g?this.D.g(a):this.D.call(null,a),c=ah(this,b);x(c)||Sg(this.name,b);return c.g?c.g(a):c.call(null,a)};
g.h=function(a,b){var c=this.D.h?this.D.h(a,b):this.D.call(null,a,b),d=ah(this,c);x(d)||Sg(this.name,c);return d.h?d.h(a,b):d.call(null,a,b)};g.l=function(a,b,c){var d=this.D.l?this.D.l(a,b,c):this.D.call(null,a,b,c),e=ah(this,d);x(e)||Sg(this.name,d);return e.l?e.l(a,b,c):e.call(null,a,b,c)};g.K=function(a,b,c,d){var e=this.D.K?this.D.K(a,b,c,d):this.D.call(null,a,b,c,d),f=ah(this,e);x(f)||Sg(this.name,e);return f.K?f.K(a,b,c,d):f.call(null,a,b,c,d)};
g.P=function(a,b,c,d,e){var f=this.D.P?this.D.P(a,b,c,d,e):this.D.call(null,a,b,c,d,e),h=ah(this,f);x(h)||Sg(this.name,f);return h.P?h.P(a,b,c,d,e):h.call(null,a,b,c,d,e)};g.xa=function(a,b,c,d,e,f){var h=this.D.xa?this.D.xa(a,b,c,d,e,f):this.D.call(null,a,b,c,d,e,f),k=ah(this,h);x(k)||Sg(this.name,h);return k.xa?k.xa(a,b,c,d,e,f):k.call(null,a,b,c,d,e,f)};
g.Pa=function(a,b,c,d,e,f,h){var k=this.D.Pa?this.D.Pa(a,b,c,d,e,f,h):this.D.call(null,a,b,c,d,e,f,h),l=ah(this,k);x(l)||Sg(this.name,k);return l.Pa?l.Pa(a,b,c,d,e,f,h):l.call(null,a,b,c,d,e,f,h)};g.za=function(a,b,c,d,e,f,h,k){var l=this.D.za?this.D.za(a,b,c,d,e,f,h,k):this.D.call(null,a,b,c,d,e,f,h,k),m=ah(this,l);x(m)||Sg(this.name,l);return m.za?m.za(a,b,c,d,e,f,h,k):m.call(null,a,b,c,d,e,f,h,k)};
g.Qa=function(a,b,c,d,e,f,h,k,l){var m=this.D.Qa?this.D.Qa(a,b,c,d,e,f,h,k,l):this.D.call(null,a,b,c,d,e,f,h,k,l),n=ah(this,m);x(n)||Sg(this.name,m);return n.Qa?n.Qa(a,b,c,d,e,f,h,k,l):n.call(null,a,b,c,d,e,f,h,k,l)};g.Ea=function(a,b,c,d,e,f,h,k,l,m){var n=this.D.Ea?this.D.Ea(a,b,c,d,e,f,h,k,l,m):this.D.call(null,a,b,c,d,e,f,h,k,l,m),p=ah(this,n);x(p)||Sg(this.name,n);return p.Ea?p.Ea(a,b,c,d,e,f,h,k,l,m):p.call(null,a,b,c,d,e,f,h,k,l,m)};
g.Fa=function(a,b,c,d,e,f,h,k,l,m,n){var p=this.D.Fa?this.D.Fa(a,b,c,d,e,f,h,k,l,m,n):this.D.call(null,a,b,c,d,e,f,h,k,l,m,n),q=ah(this,p);x(q)||Sg(this.name,p);return q.Fa?q.Fa(a,b,c,d,e,f,h,k,l,m,n):q.call(null,a,b,c,d,e,f,h,k,l,m,n)};g.Ga=function(a,b,c,d,e,f,h,k,l,m,n,p){var q=this.D.Ga?this.D.Ga(a,b,c,d,e,f,h,k,l,m,n,p):this.D.call(null,a,b,c,d,e,f,h,k,l,m,n,p),r=ah(this,q);x(r)||Sg(this.name,q);return r.Ga?r.Ga(a,b,c,d,e,f,h,k,l,m,n,p):r.call(null,a,b,c,d,e,f,h,k,l,m,n,p)};
g.Ha=function(a,b,c,d,e,f,h,k,l,m,n,p,q){var r=this.D.Ha?this.D.Ha(a,b,c,d,e,f,h,k,l,m,n,p,q):this.D.call(null,a,b,c,d,e,f,h,k,l,m,n,p,q),w=ah(this,r);x(w)||Sg(this.name,r);return w.Ha?w.Ha(a,b,c,d,e,f,h,k,l,m,n,p,q):w.call(null,a,b,c,d,e,f,h,k,l,m,n,p,q)};
g.Ia=function(a,b,c,d,e,f,h,k,l,m,n,p,q,r){var w=this.D.Ia?this.D.Ia(a,b,c,d,e,f,h,k,l,m,n,p,q,r):this.D.call(null,a,b,c,d,e,f,h,k,l,m,n,p,q,r),A=ah(this,w);x(A)||Sg(this.name,w);return A.Ia?A.Ia(a,b,c,d,e,f,h,k,l,m,n,p,q,r):A.call(null,a,b,c,d,e,f,h,k,l,m,n,p,q,r)};
g.Ja=function(a,b,c,d,e,f,h,k,l,m,n,p,q,r,w){var A=this.D.Ja?this.D.Ja(a,b,c,d,e,f,h,k,l,m,n,p,q,r,w):this.D.call(null,a,b,c,d,e,f,h,k,l,m,n,p,q,r,w),C=ah(this,A);x(C)||Sg(this.name,A);return C.Ja?C.Ja(a,b,c,d,e,f,h,k,l,m,n,p,q,r,w):C.call(null,a,b,c,d,e,f,h,k,l,m,n,p,q,r,w)};
g.Ka=function(a,b,c,d,e,f,h,k,l,m,n,p,q,r,w,A){var C=this.D.Ka?this.D.Ka(a,b,c,d,e,f,h,k,l,m,n,p,q,r,w,A):this.D.call(null,a,b,c,d,e,f,h,k,l,m,n,p,q,r,w,A),E=ah(this,C);x(E)||Sg(this.name,C);return E.Ka?E.Ka(a,b,c,d,e,f,h,k,l,m,n,p,q,r,w,A):E.call(null,a,b,c,d,e,f,h,k,l,m,n,p,q,r,w,A)};
g.La=function(a,b,c,d,e,f,h,k,l,m,n,p,q,r,w,A,C){var E=this.D.La?this.D.La(a,b,c,d,e,f,h,k,l,m,n,p,q,r,w,A,C):this.D.call(null,a,b,c,d,e,f,h,k,l,m,n,p,q,r,w,A,C),M=ah(this,E);x(M)||Sg(this.name,E);return M.La?M.La(a,b,c,d,e,f,h,k,l,m,n,p,q,r,w,A,C):M.call(null,a,b,c,d,e,f,h,k,l,m,n,p,q,r,w,A,C)};
g.Ma=function(a,b,c,d,e,f,h,k,l,m,n,p,q,r,w,A,C,E){var M=this.D.Ma?this.D.Ma(a,b,c,d,e,f,h,k,l,m,n,p,q,r,w,A,C,E):this.D.call(null,a,b,c,d,e,f,h,k,l,m,n,p,q,r,w,A,C,E),W=ah(this,M);x(W)||Sg(this.name,M);return W.Ma?W.Ma(a,b,c,d,e,f,h,k,l,m,n,p,q,r,w,A,C,E):W.call(null,a,b,c,d,e,f,h,k,l,m,n,p,q,r,w,A,C,E)};
g.Na=function(a,b,c,d,e,f,h,k,l,m,n,p,q,r,w,A,C,E,M){var W=this.D.Na?this.D.Na(a,b,c,d,e,f,h,k,l,m,n,p,q,r,w,A,C,E,M):this.D.call(null,a,b,c,d,e,f,h,k,l,m,n,p,q,r,w,A,C,E,M),ja=ah(this,W);x(ja)||Sg(this.name,W);return ja.Na?ja.Na(a,b,c,d,e,f,h,k,l,m,n,p,q,r,w,A,C,E,M):ja.call(null,a,b,c,d,e,f,h,k,l,m,n,p,q,r,w,A,C,E,M)};
g.Oa=function(a,b,c,d,e,f,h,k,l,m,n,p,q,r,w,A,C,E,M,W){var ja=this.D.Oa?this.D.Oa(a,b,c,d,e,f,h,k,l,m,n,p,q,r,w,A,C,E,M,W):this.D.call(null,a,b,c,d,e,f,h,k,l,m,n,p,q,r,w,A,C,E,M,W),Ba=ah(this,ja);x(Ba)||Sg(this.name,ja);return Ba.Oa?Ba.Oa(a,b,c,d,e,f,h,k,l,m,n,p,q,r,w,A,C,E,M,W):Ba.call(null,a,b,c,d,e,f,h,k,l,m,n,p,q,r,w,A,C,E,M,W)};
g.kc=function(a,b,c,d,e,f,h,k,l,m,n,p,q,r,w,A,C,E,M,W,ja){var Ba=ee(this.D,a,b,c,d,Xc([e,f,h,k,l,m,n,p,q,r,w,A,C,E,M,W,ja])),wd=ah(this,Ba);x(wd)||Sg(this.name,Ba);return ee(wd,a,b,c,d,Xc([e,f,h,k,l,m,n,p,q,r,w,A,C,E,M,W,ja]))};function bh(a,b){var c=ch;se.K(c.dc,U,a,b);Og(c.cc,c.dc,c.Sb,c.hierarchy)}function ah(a,b){P.h(G(a.Sb),G(a.hierarchy))||Og(a.cc,a.dc,a.Sb,a.hierarchy);var c=G(a.cc);c=c.g?c.g(b):c.call(null,b);return x(c)?c:Rg(a.name,b,a.hierarchy,a.dc,a.md,a.cc,a.Sb,a.hd)}g.Eb=function(){return ac(this.name)};
g.Fb=function(){return bc(this.name)};g.T=function(){return ca(this)};"undefined"!==typeof console&&Ma();Ma();var zg=new I(null,"val","val",128701612),dh=new I(null,"on-change","on-change",-732046149),eh=new I(null,"render","render",-1408033454),Vl=new I(null,"flex","flex",-1425124628),fh=new I(null,"layout","layout",-2120940921),gh=new I(null,"msg-format","msg-format",2026575331),Wl=new I(null,"button","button",1456579943),hh=new I(null,"auto-run","auto-run",1958400437),Ja=new I(null,"meta","meta",1499536964),ih=new I(null,"displayName","displayName",-809144601),jh=new I(null,"on-dispose","on-dispose",2105306360),
kh=new I(null,"data","data",-232669377),lh=new I(null,"getDerivedStateFromError","getDerivedStateFromError",166658477),Xl=new I(null,"align-items","align-items",-267946462),mh=new I(null,"green","green",-945526839),Yl=new I(null,"space-between","space-between",1908176695),Zl=new I(null,"margin-left","margin-left",2015598377),nh=new I(null,"constructor","constructor",-1953928811),oh=new I(null,"handlers","handlers",79528781),ph=new I(null,"childContextTypes","childContextTypes",578717991),qh=new I(null,
"input","input",556931961),rh=new I(null,"\x3e","\x3e",-555517146),Kg=new I(null,"descendants","descendants",1824886031),sh=new I(null,"on-key-press","on-key-press",-399563677),th=new I(null,"class","class",-2030961996),uh=new I(null,"numeric","numeric",-1495594714),vh=new I(null,"label","label",1718410804),wh=new I(null,"title","title",636505583),$l=new I(null,"on-click","on-click",1632826543),xh=new I(null,"cljsLegacyRender","cljsLegacyRender",-1527295613),yh=new I(null,"color","color",1011675173),
zh=new I(null,"port","port",1534937262),Ah=new I(null,"reagentRender","reagentRender",-358306383),Bh=new I(null,"name","name",1843675177),am=new I(null,"padding","padding",1660304693),Ch=new I(null,"getInitialState","getInitialState",1541760916),sg=new I(null,"alt-impl","alt-impl",670969595),bm=new I(null,"center","center",-748944368),Dh=new I(null,"on-set","on-set",-140953470),Eh=new I(null,"display","display",242065432),Fh=new I(null,"path","path",-188191168),bg=new I("cljs.core","not-found","cljs.core/not-found",
-1572889185),$g=new I(null,"default","default",-1987822328),Gh=new I(null,"no-cache","no-cache",1588056370),Hh=new I(null,"transit","transit",359458387),Ih=new I(null,"\x3c\x3e","\x3c\x3e",1280186386),Ka=new I(null,"dup","dup",556298533),Jh=new I(null,"margin","margin",-995903681),Kh=new I(null,"displaylogo","displaylogo",1531477828),La=new I(null,"print-length","print-length",1931866356),Lh=new I(null,"useResizeHandler","useResizeHandler",-1748859262),Mh=new I(null,"json","json",1279968570),Ha=new I(null,
"flush-on-newline","flush-on-newline",-151457939),Nh=new I(null,"component-did-update","component-did-update",-1468549173),Oh=new I(null,"reagent-render","reagent-render",-985383853),Ph=new I(null,"displayModeBar","displayModeBar",-1187531817),Qh=new I(null,"function-components","function-components",1492814963),Rh=new I(null,"hierarchy","hierarchy",-1053470341),Sh=new I(null,"on-write","on-write",31519475),Th=new I(null,"key","key",-1516042587),Uh=new I(null,"toImageButtonOptions","toImageButtonOptions",
-347346271),Vh=new I(null,"componentWillUnmount","componentWillUnmount",1573788814),Wh=new I(null,"scale","scale",-230427353),Xh=new I(null,"contextType","contextType",1033066077),Yh=new I(null,"form","form",-1624062471),Jg=new I(null,"parents","parents",-2027538891),Zh=new I(null,"getDerivedStateFromProps","getDerivedStateFromProps",-991834739),$h=new I(null,"validator","validator",-1966190681),ai=new I(null,"red","red",-969428204),bi=new I(null,"div","div",1057191632),ci=new I(null,"value","value",
305978217),tg=new I(null,"fallback-impl","fallback-impl",-1501286995),di=new I(null,"display-name","display-name",694513143),ei=new I(null,"height","height",1025178622),Ia=new I(null,"readably","readably",1129599760),fi=new I(null,"contextTypes","contextTypes",-2023853910),Gg=new I(null,"keyword-fn","keyword-fn",-64566675),gi=new I(null,"on-blur","on-blur",814300747),hi=new I(null,"shouldComponentUpdate","shouldComponentUpdate",1795750960),ii=new I(null,"for","for",-1323786319),ji=new I(null,"config",
"config",994861415),ki=new I(null,"id","id",-1388402092),li=new I(null,"width","width",-384071477),mi=new I(null,"component-will-unmount","component-will-unmount",-2058314698),ni=new I(null,"inline","inline",1399884222),oi=new I(null,"className","className",-1983287057),pi=new I(null,"autosize","autosize",-724145344),cm=new I(null,"justify-content","justify-content",-1990475787),Zg=new I(null,"format","format",-1306924766),qi=new I(null,"editable","editable",1930280326),dm=new I(null,"margin-right",
"margin-right",809689658),ri=new I(null,"type","type",1174270348),si=new I(null,"style","style",-496642736),ti=new I(null,"callback","callback",-705136228),Lg=new I(null,"ancestors","ancestors",-776045424),jg=new I(null,"more-marker","more-marker",-14717935);var ui={},vi={},wi=[];function xi(a,b){var c=vi[a];if(void 0!==c)return c;try{wi.push(a);var d=ui[a],e=shadow$provide[a];if(void 0===d){if(void 0===e)throw"Module not provided: "+a;d={exports:{}};ui[a]=d}if(e){delete shadow$provide[a];try{e.call(d,ba,xi,d,d.exports)}catch(h){throw console.warn("shadow-cljs - failed to load",a),h;}if(b){var f=b.globals;if(f)for(a=0;a<f.length;a++)window[f[a]]=d.exports}}}finally{wi.pop()}return d.exports}xi.cache={};xi.resolve=function(a){return a};var yi=xi(5,{});var zi=xi(14,{});function Ai(a,b,c){var d=R(a);if(c>=d)return-1;!(0<c)&&0>c&&(c+=d,c=0>c?0:c);for(;;)if(c<d){if(P.h(Sc(a,c),b))return c;c+=1}else return-1}function Bi(a,b,c){var d=R(a);if(0===d)return-1;0<c?(--d,c=d<c?d:c):c=0>c?d+c:c;for(;;)if(0<=c){if(P.h(Sc(a,c),b))return c;--c}else return-1}function Ci(a,b){if(md(b))if(Qc(a)&&Qc(b)&&R(a)!==R(b))a=!1;else a:for(a=J(a),b=J(b);;){if(null==a){a=null==b;break a}if(null!=b&&P.h(N(a),N(b)))a=O(a),b=O(b);else{a=!1;break a}}else a=null;return td(a)}
function Di(a,b){var c=a.Y(null);if(0===c)return b.I?b.I():b.call(null);for(var d=a.N(null,0),e=1;;)if(e<c){var f=a.N(null,e);d=b.h?b.h(d,f):b.call(null,d,f);if(Jc(d))return G(d);e+=1}else return d}function Ei(a,b,c){var d=a.Y(null),e=c;for(c=0;;)if(c<d){var f=a.N(null,c);e=b.h?b.h(e,f):b.call(null,e,f);if(Jc(e))return G(e);c+=1}else return e};var Fi={};function Gi(a){return"number"===typeof a||"string"===typeof a||!0===a||!1===a||null==a}function Hi(a,b,c,d){var e=null!=d?d.g?d.g(a):d.call(null,a):null;return null==e?Gi(a)?a:null!=a&&a.constructor===Object?new Ii(null,a,b,c,d,!0,null,null,null):Na(a)?new Ji(null,b,c,d,a,null):a:e}function Ki(a){return Gi(a)?a:a instanceof Ii?a.obj:a instanceof Ji?a.j:a}var Li=ie;
function Mi(a,b,c,d,e){var f=new te(Tb(Li));sa(a,function(h,k){var l=f.Ca(null);k=b.g?b.g(k):b.call(null,k);h=x(e)?Hi(h,b,c,d):h;l=Wb(l,k,h);return f.state=l});return Vb(G(f))}function Ni(a,b,c,d,e,f,h){h=f[h];f=b.g?b.g(h):b.call(null,h);a=a[h];b=e?Hi(a,b,c,d):a;return new Pe(f,b)}function Oi(a,b){return a instanceof I&&b===Kd||"string"===typeof a&&b===Dd}function Pi(a,b){return Gi(a)||!(nd(a)&&!(a instanceof Ii)||pd(a)&&!(a instanceof Ji))&&Oa(x(b)?(null!=a?a.constructor===Object:!1)||Na(a):b)}
function Qi(a,b,c,d,e,f){this.qa=!0;this.obj=a;this.F=b;this.A=c;this.transform=d;this.W=e;this.Wa=f;this.o=259;this.J=56}g=Qi.prototype;g.na=function(a,b){if(this.qa)return a=this.obj[this.A.g?this.A.g(b):this.A.call(null,b)],this.W?Hi(a,this.F,this.A,this.transform):a;throw Error("lookup after persistent!");};g.O=function(a,b,c){if(this.qa)return a=ua(this.obj,this.A.g?this.A.g(b):this.A.call(null,b),c),this.W&&a!==c?Hi(a,this.F,this.A,this.transform):a;throw Error("lookup after persistent!");};
g.Y=function(){return null==this.Wa?this.Wa=R(ta(this.obj)):this.Wa};g.eb=function(a,b){a:if(x(this.qa))if(Xe(b))a=this.cb(null,pb(b),qb(b));else if(pd(b))a=this.cb(null,b.g?b.g(0):b.call(null,0),b.g?b.g(1):b.call(null,1));else for(a=J(b),b=this;;){var c=N(a);if(x(c))a=O(a),b=Wb(b,pb(c),qb(c));else{a=b;break a}}else throw Error("conj! after persistent!");return a};
g.sb=function(){if(this.qa)return this.qa=!1,new Ii(null,this.obj,this.F,this.A,this.transform,this.W,null,this.Wa,null);throw Error("persistent! called twice");};g.cb=function(a,b,c){if(this.qa){if(!Oi(b,this.F)||!Pi(c,this.W))return Wb(Tb(Mi(this.obj,this.F,this.A,this.transform,this.W)),b,c);this.obj[this.A.g?this.A.g(b):this.A.call(null,b)]=this.W?Ki(c):c;this.Wa=null;return this}throw Error("assoc! after persistent!");};
g.call=function(a){switch(arguments.length-1){case 1:return this.g(arguments[1]);case 2:return this.h(arguments[1],arguments[2]);default:throw Error(["Invalid arity: ",B.g(arguments.length-1)].join(""));}};g.apply=function(a,b){return this.call.apply(this,[this].concat(Ra(b)))};g.g=function(a){if(this.qa)return a=this.obj[this.A.g?this.A.g(a):this.A.call(null,a)],this.W?Hi(a,this.F,this.A,this.transform):a;throw Error("lookup after persistent!");};
g.h=function(a,b){if(this.qa)return a=ua(this.obj,this.A.g?this.A.g(a):this.A.call(null,a),b),this.W&&a!==b?Hi(a,this.F,this.A,this.transform):a;throw Error("lookup after persistent!");};function Ri(a,b,c,d,e,f,h){this.obj=a;this.F=b;this.A=c;this.transform=d;this.W=e;this.j=f;this.v=0;this.s=h}Ri.prototype.hasNext=function(){return this.v<this.s};Ri.prototype.next=function(){var a=Ni(this.obj,this.F,this.A,this.transform,this.W,this.j,this.v);this.v+=1;return a};
function Si(a,b,c,d,e,f,h,k){this.obj=a;this.F=b;this.A=c;this.transform=d;this.W=e;this.j=f;this.v=h;this.meta=k;this.o=2179858686;this.J=8192}g=Si.prototype;g.toString=function(){return ic(this)};g.equiv=function(a){return this.G(null,a)};g.indexOf=function(){var a=null;a=function(b,c){switch(arguments.length){case 1:return Ai(this,b,0);case 2:return Ai(this,b,c)}throw Error("Invalid arity: "+arguments.length);};a.g=function(b){return Ai(this,b,0)};a.h=function(b,c){return Ai(this,b,c)};return a}();
g.lastIndexOf=function(){function a(c){return Bi(this,c,R(this))}var b=null;b=function(c,d){switch(arguments.length){case 1:return a.call(this,c);case 2:return Bi(this,c,d)}throw Error("Invalid arity: "+arguments.length);};b.g=a;b.h=function(c,d){return Bi(this,c,d)};return b}();g.N=function(a,b){a=b+this.v;if(0<=a&&a<this.j.length)return Ni(this.obj,this.F,this.A,this.transform,this.W,this.j,a);throw Error("Index out of bounds");};
g.ka=function(a,b,c){a=b+this.v;return 0<=a&&a<this.j.length?Ni(this.obj,this.F,this.A,this.transform,this.W,this.j,a):c};g.X=function(a,b,c){return ig(b,qg,"("," ",")",c,this)};g.da=function(){return this.meta};g.sa=function(){return this.v+1<this.j.length?new Si(this.obj,this.F,this.A,this.transform,this.W,this.j,this.v+1,null):null};g.Y=function(){var a=this.j.length-this.v;return 0>a?0:a};g.T=function(){return Dc(this)};g.G=function(a,b){return Ci(this,b)};g.ha=function(){return yc};
g.oa=function(a,b){return Di(this,b)};g.pa=function(a,b,c){return Ei(this,b,c)};g.ta=function(){return Ni(this.obj,this.F,this.A,this.transform,this.W,this.j,this.v)};g.ua=function(){return this.v+1<this.j.length?new Si(this.obj,this.F,this.A,this.transform,this.W,this.j,this.v+1,null):yc};g.Z=function(){return this};g.ga=function(a,b){return b===this.meta?this:new Si(this.obj,this.F,this.A,this.transform,this.W,this.j,this.v,b)};g.ia=function(a,b){return Wc(b,this)};
function Ii(a,b,c,d,e,f,h,k,l){this.meta=a;this.obj=b;this.F=c;this.A=d;this.transform=e;this.W=f;this.Va=h;this.Wa=k;this.H=l;this.o=2164131599;this.J=139268}g=Ii.prototype;g.lb=function(a,b){a=ua(this.obj,this.A.g?this.A.g(b):this.A.call(null,b),Fi);return a===Fi?null:new Pe(b,this.W?Hi(a,this.F,this.A,this.transform):a)};g.toString=function(){return ic(this)};g.equiv=function(a){return this.G(null,a)};g.keys=function(){return Ac(of(this))};g.entries=function(){return new kf(J(J(this)))};
g.values=function(){return Ac(pf(this))};g.has=function(a){return vd(this,a)};g.get=function(a,b){return this.O(null,a,b)};g.forEach=function(a){for(var b=J(this),c=null,d=0,e=0;;)if(e<d){var f=c.N(null,e),h=T(f,0,null);f=T(f,1,null);a.h?a.h(f,h):a.call(null,f,h);e+=1}else if(b=J(b))qd(b)?(c=Zb(b),b=$b(b),h=c,d=R(c),c=h):(c=N(b),h=T(c,0,null),f=T(c,1,null),a.h?a.h(f,h):a.call(null,f,h),b=O(b),c=null,d=0),e=0;else return null};
g.na=function(a,b){a=this.obj[this.A.g?this.A.g(b):this.A.call(null,b)];return this.W?Hi(a,this.F,this.A,this.transform):a};g.O=function(a,b,c){a=ua(this.obj,this.A.g?this.A.g(b):this.A.call(null,b),c);return this.W&&a!==c?Hi(a,this.F,this.A,this.transform):a};
g.mb=function(a,b,c){var d=this;try{var e=new te(c);sa(d.obj,function(f,h){var k=e.Ca(null);h=d.F.g?d.F.g(h):d.F.call(null,h);f=d.W?Hi(f,d.F,d.A,d.transform):f;k=b.l?b.l(k,h,f):b.call(null,k,h,f);k=e.state=k;if(Jc(k))throw k;return null});return G(e)}catch(f){a=f;if(Jc(a))return G(a);throw a;}};g.X=function(a,b,c){return rg(this,qg,b,c)};g.Aa=function(){null==this.Va&&(this.Va=ta(this.obj));return new Ri(this.obj,this.F,this.A,this.transform,this.W,this.Va,this.Y(null))};g.da=function(){return this.meta};
g.Y=function(){return null==this.Wa?(null==this.Va&&(this.Va=ta(this.obj)),this.Wa=this.Va.length):this.Wa};g.T=function(){var a=this.H;return null!=a?a:this.H=a=Fc(this)};g.G=function(a,b){return jf(this,b)};g.kb=function(){return new Qi(va(this.obj),this.F,this.A,this.transform,this.W,this.Wa)};g.ha=function(){return new Ii(this.meta,{},this.F,this.A,this.transform,this.W,[],0,null)};g.oa=function(a,b){return Cb(this.Z(null),b)};
g.pa=function(a,b,c){return this.mb(null,function(d,e,f){e=new Pe(e,f);return b.h?b.h(d,e):b.call(null,d,e)},c)};g.Ub=function(a,b){a=this.meta;var c=va(this.obj);delete c[this.A.g?this.A.g(b):this.A.call(null,b)];return new Ii(a,c,this.F,this.A,this.transform,this.W,null,null,null)};
g.Sa=function(a,b,c){if(Oi(b,this.F)&&Pi(c,this.W)){a=this.meta;var d=va(this.obj);d[this.A.g?this.A.g(b):this.A.call(null,b)]=this.W?Ki(c):c;b=new Ii(a,d,this.F,this.A,this.transform,this.W,null,null,null)}else b=lb(gd(Mi(this.obj,this.F,this.A,this.transform,this.W),this.meta),b,c);return b};g.Z=function(){null==this.Va&&(this.Va=ta(this.obj));return 0<this.Va.length?new Si(this.obj,this.F,this.A,this.transform,this.W,this.Va,0,null):null};
g.ga=function(a,b){return b===this.meta?this:new Ii(b,this.obj,this.F,this.A,this.transform,this.W,this.Va,this.Wa,this.H)};g.ia=function(a,b){a:if(pd(b))a=this.Sa(null,D(b,0),D(b,1));else for(a=this,b=J(b);;){if(null==b)break a;var c=N(b);if(pd(c))a=lb(a,D(c,0),D(c,1)),b=O(b);else throw Error("conj on a map takes map entries or seqables of map entries");}return a};
g.call=function(a){switch(arguments.length-1){case 1:return this.g(arguments[1]);case 2:return this.h(arguments[1],arguments[2]);default:throw Error(["Invalid arity: ",B.g(arguments.length-1)].join(""));}};g.apply=function(a,b){return this.call.apply(this,[this].concat(Ra(b)))};g.g=function(a){a=this.obj[this.A.g?this.A.g(a):this.A.call(null,a)];return this.W?Hi(a,this.F,this.A,this.transform):a};
g.h=function(a,b){a=ua(this.obj,this.A.g?this.A.g(a):this.A.call(null,a),b);return this.W&&a!==b?Hi(a,this.F,this.A,this.transform):a};function Ti(a,b,c,d){this.qa=!0;this.j=a;this.F=b;this.A=c;this.transform=d;this.J=88;this.o=275}g=Ti.prototype;g.eb=function(a,b){if(this.qa)return Pi(b,!0)?(this.j.push(Ki(b)),this):Ub(Tb(We(this.j)),b);throw Error("conj! after persistent!");};
g.sb=function(){if(this.qa)return this.qa=!1,new Ji(null,this.F,this.A,this.transform,this.j,null);throw Error("persistent! called twice");};g.cb=function(a,b,c){if("number"===typeof b)a=this.Hb(null,b,c);else throw Error([B.g("TransientArrayVector"),"'s key for assoc! must be a number."].join(""));return a};
g.Hb=function(a,b,c){if(this.qa){if(Pi(c,!0)){if(0<=b&&b<this.j.length)return this.j[b]=Ki(c),this;if(b===this.j.length)return this.eb(null,c);throw Error(["Index ",B.g(b)," out of bounds for TransientArrayVector of length",B.g(this.j.length)].join(""));}return Xb(Tb(We(this.j)),b,c)}throw Error("assoc! after persistent!");};g.Y=function(){if(this.qa)return this.j.length;throw Error("count after persistent!");};
g.N=function(a,b){if(this.qa)return Hi(this.j[b],this.F,this.A,this.transform);throw Error("nth after persistent!");};g.ka=function(a,b,c){return 0<=b&&b<this.j.length?this.N(null,b):c};g.na=function(a,b){return this.O(null,b,null)};g.O=function(a,b,c){return"number"===typeof b?this.ka(null,b,c):c};
g.call=function(a){switch(arguments.length-1){case 1:return this.g(arguments[1]);case 2:return this.h(arguments[1],arguments[2]);default:throw Error(["Invalid arity: ",B.g(arguments.length-1)].join(""));}};g.apply=function(a,b){return this.call.apply(this,[this].concat(Ra(b)))};g.g=function(a){return this.na(null,a)};g.h=function(a,b){return this.O(null,a,b)};function Ui(a,b,c,d,e){this.F=a;this.A=b;this.transform=c;this.j=d;this.v=0;this.s=e}Ui.prototype.hasNext=function(){return this.v<this.s};
Ui.prototype.next=function(){var a=Hi(this.j[this.v],this.F,this.A,this.transform);this.v+=1;return a};function Vi(a,b,c,d,e,f){this.F=a;this.A=b;this.transform=c;this.j=d;this.v=e;this.meta=f;this.o=2179858686;this.J=8192}g=Vi.prototype;g.toString=function(){return ic(this)};g.equiv=function(a){return this.G(null,a)};
g.indexOf=function(){var a=null;a=function(b,c){switch(arguments.length){case 1:return Ai(this,b,0);case 2:return Ai(this,b,c)}throw Error("Invalid arity: "+arguments.length);};a.g=function(b){return Ai(this,b,0)};a.h=function(b,c){return Ai(this,b,c)};return a}();
g.lastIndexOf=function(){function a(c){return Bi(this,c,R(this))}var b=null;b=function(c,d){switch(arguments.length){case 1:return a.call(this,c);case 2:return Bi(this,c,d)}throw Error("Invalid arity: "+arguments.length);};b.g=a;b.h=function(c,d){return Bi(this,c,d)};return b}();g.N=function(a,b){a=b+this.v;if(0<=a&&a<this.j.length)return Hi(this.j[a],this.F,this.A,this.transform);throw Error("Index out of bounds");};
g.ka=function(a,b,c){a=b+this.v;return 0<=a&&a<this.j.length?Hi(this.j[a],this.F,this.A,this.transform):c};g.X=function(a,b,c){return ig(b,qg,"("," ",")",c,this)};g.da=function(){return this.meta};g.sa=function(){return this.v+1<this.j.length?new Vi(this.F,this.A,this.transform,this.j,this.v+1,null):null};g.Y=function(){var a=this.j.length-this.v;return 0>a?0:a};g.T=function(){return Dc(this)};g.G=function(a,b){return Ci(this,b)};g.ha=function(){return yc};g.oa=function(a,b){return Di(this,b)};
g.pa=function(a,b,c){return Ei(this,b,c)};g.ta=function(){return Hi(this.j[this.v],this.F,this.A,this.transform)};g.ua=function(){return this.v+1<this.j.length?new Vi(this.F,this.A,this.transform,this.j,this.v+1,null):yc};g.Z=function(){return this};g.ga=function(a,b){return b===this.meta?this:new Vi(this.F,this.A,this.transform,this.j,this.v,b)};g.ia=function(a,b){return Wc(b,this)};
function Ji(a,b,c,d,e,f){this.meta=a;this.F=b;this.A=c;this.transform=d;this.j=e;this.H=f;this.o=2315150111;this.J=141316}g=Ji.prototype;g.lb=function(a,b){return 0<=b&&b<this.j.length?new Pe(b,Hi(this.j[b],this.F,this.A,this.transform)):null};g.toString=function(){return ic(this)};g.equiv=function(a){return this.G(null,a)};
g.indexOf=function(){var a=null;a=function(b,c){switch(arguments.length){case 1:return Ai(this,b,0);case 2:return Ai(this,b,c)}throw Error("Invalid arity: "+arguments.length);};a.g=function(b){return Ai(this,b,0)};a.h=function(b,c){return Ai(this,b,c)};return a}();
g.lastIndexOf=function(){var a=null;a=function(b,c){switch(arguments.length){case 1:return Bi(this,b,R(this));case 2:return Bi(this,b,c)}throw Error("Invalid arity: "+arguments.length);};a.g=function(b){return Bi(this,b,R(this))};a.h=function(b,c){return Bi(this,b,c)};return a}();g.na=function(a,b){return this.O(null,b,null)};g.O=function(a,b,c){return"number"===typeof b?this.ka(null,b,c):c};
g.mb=function(a,b,c){a=0;for(var d=c;;)if(a<this.j.length){c=this.j.length;var e;a:for(e=0;;)if(e<c){var f=e+a,h=Hi(this.j[e],this.F,this.A,this.transform);d=b.l?b.l(d,f,h):b.call(null,d,f,h);if(Jc(d)){e=d;break a}e+=1}else{e=d;break a}if(Jc(e))return G(e);a+=c;d=e}else return d};g.N=function(a,b){if(0<=b&&b<this.j.length)return Hi(this.j[b],this.F,this.A,this.transform);throw Error(["No item ",B.g(b)," in vector of length ",B.g(this.j.length)].join(""));};
g.ka=function(a,b,c){return 0<=b&&b<this.j.length?Hi(this.j[b],this.F,this.A,this.transform):c};g.X=function(a,b,c){return ig(b,qg,"["," ","]",c,this)};g.fb=function(a,b,c){if(0<=b&&b<this.j.length)return Pi(c,!0)?(a=Ra(this.j),a[b]=Ki(c),new Ji(this.meta,this.F,this.A,this.transform,a,null)):wb(We(this.j),b,c);if(b===this.j.length)return this.ia(null,c);throw Error(["Index ",B.g(b)," out of bounds  [0,",B.g(this.j.length),"]"].join(""));};
g.Aa=function(){return new Ui(this.F,this.A,this.transform,this.j,this.j.length)};g.da=function(){return this.meta};g.Y=function(){return this.j.length};g.qb=function(){return 0<this.j.length?this.N(null,this.j.length-1):null};g.rb=function(){if(0===this.j.length)throw Error("Can't pop empty vector");if(1===this.j.length)return this.ha(null);var a=Ra(this.j);return new Ji(this.meta,this.F,this.A,this.transform,a.slice(0,a.length-1),null)};g.T=function(){var a=this.H;return null!=a?a:this.H=a=Dc(this)};
g.G=function(a,b){a:if(b instanceof Ji)if(this.j.length===R(b))for(a=this.Aa(null),b=gc(b);;)if(a.hasNext()){var c=a.next(),d=b.next();if(!P.h(c,d)){a=!1;break a}}else{a=!0;break a}else a=!1;else a=Ci(this,b);return a};g.kb=function(){return new Ti(Ra(this.j),this.F,this.A,this.transform)};g.ha=function(){return new Ji(this.meta,this.F,this.A,this.transform,[],null)};g.oa=function(a,b){return Di(this,b)};g.pa=function(a,b,c){return Ei(this,b,c)};
g.Sa=function(a,b,c){if("number"===typeof b)a=this.fb(null,b,c);else throw Error("Vector's key for assoc must be a number.");return a};g.Z=function(){return 0<this.j.length?new Vi(this.F,this.A,this.transform,this.j,0,null):null};g.ga=function(a,b){return b===this.meta?this:new Ji(b,this.F,this.A,this.transform,this.j,this.H)};g.ia=function(a,b){return Pi(b,!0)?(a=Ra(this.j),a[a.length]=Ki(b),new Ji(this.meta,this.F,this.A,this.transform,a,null)):cb(We(this.j),b)};
g.call=function(a){switch(arguments.length-1){case 1:return this.g(arguments[1]);case 2:return this.h(arguments[1],arguments[2]);default:throw Error(["Invalid arity: ",B.g(arguments.length-1)].join(""));}};g.apply=function(a,b){return this.call.apply(this,[this].concat(Ra(b)))};g.g=function(a){return this.N(null,a)};g.h=function(a,b){return this.ka(null,a,b)};function Wi(a){return a instanceof I?a.Ba:null}function Xi(a){return a instanceof Ii?a.obj:a instanceof Ji?a.j:Fg.C(a,Xc([Gg,Wi]))};var Yi="undefined"!=typeof Object.keys?function(a){return Object.keys(a)}:function(a){return ta(a)},Zi="undefined"!=typeof Array.isArray?function(a){return Array.isArray(a)}:function(a){return"array"===t(a)};function $i(){Math.round(15*Math.random()).toString(16)};function aj(){this.idx=0;this.cache=[]}aj.prototype.write=function(a){1936==this.idx&&(this.idx=0);this.cache[this.idx]=a;this.idx++;return a};aj.prototype.read=function(a){return this.cache[2===a.length?a.charCodeAt(1)-48:44*(a.charCodeAt(1)-48)+(a.charCodeAt(2)-48)]};aj.prototype.clear=function(){this.idx=0};var bj=1;function cj(a,b){if(null==a)return null==b;if(a===b)return!0;if("object"===typeof a){if(Zi(a)){if(Zi(b)&&a.length===b.length){for(var c=0;c<a.length;c++)if(!cj(a[c],b[c]))return!1;return!0}return!1}if(a.Ta)return a.Ta(b);if(null!=b&&"object"===typeof b){if(b.Ta)return b.Ta(a);c=0;var d=Yi(b).length,e;for(e in a)if(a.hasOwnProperty(e)&&(c++,!b.hasOwnProperty(e)||!cj(a[e],b[e])))return!1;return c===d}}return!1}function dj(a,b){return a^b+2654435769+(a<<6)+(a>>2)}var ej={},fj=0;
function gj(a){var b=0;if(null!=a.forEach)a.forEach(function(h,k){b=(b+(hj(k)^hj(h)))%4503599627370496});else for(var c=Yi(a),d=0;d<c.length;d++){var e=c[d],f=a[e];b=(b+(hj(e)^hj(f)))%4503599627370496}return b}function ij(a){var b=0;if(Zi(a))for(var c=0;c<a.length;c++)b=dj(b,hj(a[c]));else a.forEach&&a.forEach(function(d){b=dj(b,hj(d))});return b}
function hj(a){if(null==a)return 0;switch(typeof a){case "number":return a;case "boolean":return!0===a?1:0;case "string":var b=ej[a];if(null!=b)a=b;else{for(var c=b=0;c<a.length;++c)b=31*b+a.charCodeAt(c),b%=4294967296;fj++;256<=fj&&(ej={},fj=1);a=ej[a]=b}return a;case "function":return b=a.transit$hashCode$,b||(b=bj,"undefined"!=typeof Object.defineProperty?Object.defineProperty(a,"transit$hashCode$",{value:b,enumerable:!1}):a.transit$hashCode$=b,bj++),b;default:return a instanceof Date?a.valueOf():
Zi(a)?ij(a):a.Xa?a.Xa():gj(a)}};var jj="undefined"!=typeof Symbol?Symbol.iterator:"@@iterator";function kj(a,b){this.tag=a;this.rep=b;this.ea=-1}kj.prototype.toString=function(){return"[TaggedValue: "+this.tag+", "+this.rep+"]"};kj.prototype.equiv=function(a){return cj(this,a)};kj.prototype.equiv=kj.prototype.equiv;kj.prototype.Ta=function(a){return a instanceof kj?this.tag===a.tag&&cj(this.rep,a.rep):!1};kj.prototype.Xa=function(){-1===this.ea&&(this.ea=dj(hj(this.tag),hj(this.rep)));return this.ea};
function lj(a,b){return new kj(a,b)}var mj=qa("9007199254740991"),nj=qa("-9007199254740991");fa.prototype.equiv=function(a){return cj(this,a)};fa.prototype.equiv=fa.prototype.equiv;fa.prototype.Ta=function(a){return a instanceof fa&&this.equals(a)};fa.prototype.Xa=function(){return this.ba};function oj(a){this._name=a;this.ea=-1}oj.prototype.toString=function(){return":"+this._name};oj.prototype.namespace=function(){var a=this._name.indexOf("/");return-1!=a?this._name.substring(0,a):null};
oj.prototype.name=function(){var a=this._name.indexOf("/");return-1!=a?this._name.substring(a+1,this._name.length):this._name};oj.prototype.equiv=function(a){return cj(this,a)};oj.prototype.equiv=oj.prototype.equiv;oj.prototype.Ta=function(a){return a instanceof oj&&this._name==a._name};oj.prototype.Xa=function(){-1===this.ea&&(this.ea=hj(this._name));return this.ea};function pj(a){this._name=a;this.ea=-1}
pj.prototype.namespace=function(){var a=this._name.indexOf("/");return-1!=a?this._name.substring(0,a):null};pj.prototype.name=function(){var a=this._name.indexOf("/");return-1!=a?this._name.substring(a+1,this._name.length):this._name};pj.prototype.toString=function(){return this._name};pj.prototype.equiv=function(a){return cj(this,a)};pj.prototype.equiv=pj.prototype.equiv;pj.prototype.Ta=function(a){return a instanceof pj&&this._name==a._name};
pj.prototype.Xa=function(){-1===this.ea&&(this.ea=hj(this._name));return this.ea};function qj(a,b,c){var d="";c=c||b+1;for(var e=8*(7-b),f=(new fa(255,0)).shiftLeft(e);b<c;b++,e-=8,f=oa(f,8)){var h=oa(a.and(f),e).toString(16);1==h.length&&(h="0"+h);d+=h}return d}function rj(a,b){this.high=a;this.low=b;this.ea=-1}rj.prototype.toString=function(){var a=this.high,b=this.low;var c=qj(a,0,4)+"-";c+=qj(a,4,6)+"-";c+=qj(a,6,8)+"-";c+=qj(b,0,2)+"-";return c+=qj(b,2,8)};
rj.prototype.equiv=function(a){return cj(this,a)};rj.prototype.equiv=rj.prototype.equiv;rj.prototype.Ta=function(a){return a instanceof rj&&this.high.equals(a.high)&&this.low.equals(a.low)};rj.prototype.Xa=function(){-1===this.ea&&(this.ea=hj(this.toString()));return this.ea};Date.prototype.Ta=function(a){return a instanceof Date?this.valueOf()===a.valueOf():!1};Date.prototype.Xa=function(){return this.valueOf()};function sj(a,b){this.entries=a;this.type=b||0;this.idx=0}
sj.prototype.next=function(){if(this.idx<this.entries.length){var a={value:0===this.type?this.entries[this.idx]:1===this.type?this.entries[this.idx+1]:[this.entries[this.idx],this.entries[this.idx+1]],done:!1};this.idx+=2;return a}return{value:null,done:!0}};sj.prototype.next=sj.prototype.next;sj.prototype[jj]=function(){return this};function tj(a,b){this.map=a;this.type=b||0;this.keys=uj(this.map);this.idx=0;this.bucket=null;this.jb=0}
tj.prototype.next=function(){if(this.idx<this.map.size){null!=this.bucket&&this.jb<this.bucket.length||(this.bucket=this.map.map[this.keys[this.idx]],this.jb=0);var a={value:0===this.type?this.bucket[this.jb]:1===this.type?this.bucket[this.jb+1]:[this.bucket[this.jb],this.bucket[this.jb+1]],done:!1};this.idx++;this.jb+=2;return a}return{value:null,done:!0}};tj.prototype.next=tj.prototype.next;tj.prototype[jj]=function(){return this};
function vj(a,b){if(a instanceof Y&&(b instanceof Z||b instanceof Y)){if(a.size!==b.size)return!1;for(var c in a.map)for(var d=a.map[c],e=0;e<d.length;e+=2)if(!cj(d[e+1],b.get(d[e])))return!1;return!0}if(a instanceof Z&&(b instanceof Z||b instanceof Y)){if(a.size!==b.size)return!1;a=a.fa;for(e=0;e<a.length;e+=2)if(!cj(a[e+1],b.get(a[e])))return!1;return!0}if(null!=b&&"object"===typeof b&&(e=Yi(b),c=e.length,a.size===c)){for(d=0;d<c;d++){var f=e[d];if(!a.has(f)||!cj(b[f],a.get(f)))return!1}return!0}return!1}
function wj(a){return null==a?"null":aa.isArray(a)?"["+a.toString()+"]":aa.isString(a)?'"'+a+'"':a.toString()}function xj(a){var b=0,c="TransitMap {";a.forEach(function(d,e){c+=wj(e)+" \x3d\x3e "+wj(d);b<a.size-1&&(c+=", ");b++});return c+"}"}function yj(a){var b=0,c="TransitSet {";a.forEach(function(d){c+=wj(d);b<a.size-1&&(c+=", ");b++});return c+"}"}function Z(a){this.fa=a;this.ca=null;this.ea=-1;this.size=a.length/2;this.xc=0}Z.prototype.toString=function(){return xj(this)};
Z.prototype.inspect=function(){return this.toString()};Z.prototype.convert=function(){if(this.ca)throw Error("Invalid operation, already converted");if(8>this.size)return!1;this.xc++;return 32<this.xc?(this.ca=zj(this.fa,!1,!0),this.fa=[],!0):!1};Z.prototype.clear=function(){this.ea=-1;this.ca?this.ca.clear():this.fa=[];this.size=0};Z.prototype.clear=Z.prototype.clear;Z.prototype.keys=function(){return this.ca?this.ca.keys():new sj(this.fa,0)};Z.prototype.keys=Z.prototype.keys;
Z.prototype.vb=function(){if(this.ca)return this.ca.vb();for(var a=[],b=0,c=0;c<this.fa.length;b++,c+=2)a[b]=this.fa[c];return a};Z.prototype.keySet=Z.prototype.vb;Z.prototype.entries=function(){return this.ca?this.ca.entries():new sj(this.fa,2)};Z.prototype.entries=Z.prototype.entries;Z.prototype.values=function(){return this.ca?this.ca.values():new sj(this.fa,1)};Z.prototype.values=Z.prototype.values;
Z.prototype.forEach=function(a){if(this.ca)this.ca.forEach(a);else for(var b=0;b<this.fa.length;b+=2)a(this.fa[b+1],this.fa[b])};Z.prototype.forEach=Z.prototype.forEach;Z.prototype.get=function(a,b){if(this.ca)return this.ca.get(a);if(this.convert())return this.get(a);for(var c=0;c<this.fa.length;c+=2)if(cj(this.fa[c],a))return this.fa[c+1];return b};Z.prototype.get=Z.prototype.get;
Z.prototype.has=function(a){if(this.ca)return this.ca.has(a);if(this.convert())return this.has(a);for(var b=0;b<this.fa.length;b+=2)if(cj(this.fa[b],a))return!0;return!1};Z.prototype.has=Z.prototype.has;Z.prototype.set=function(a,b){this.ea=-1;if(this.ca)this.ca.set(a,b),this.size=this.ca.size;else{for(var c=0;c<this.fa.length;c+=2)if(cj(this.fa[c],a)){this.fa[c+1]=b;return}this.fa.push(a);this.fa.push(b);this.size++;32<this.size&&(this.ca=zj(this.fa,!1,!0),this.fa=null)}};Z.prototype.set=Z.prototype.set;
Z.prototype["delete"]=function(a){this.ea=-1;if(this.ca)return a=this.ca.delete(a),this.size=this.ca.size,a;for(var b=0;b<this.fa.length;b+=2)if(cj(this.fa[b],a))return a=this.fa[b+1],this.fa.splice(b,2),this.size--,a};Z.prototype.clone=function(){var a=zj();this.forEach(function(b,c){a.set(c,b)});return a};Z.prototype.clone=Z.prototype.clone;Z.prototype[jj]=function(){return this.entries()};Z.prototype.Xa=function(){if(this.ca)return this.ca.Xa();-1===this.ea&&(this.ea=gj(this));return this.ea};
Z.prototype.Ta=function(a){return this.ca?vj(this.ca,a):vj(this,a)};function Y(a,b,c){this.map=b||{};this._keys=a||[];this.size=c||0;this.ea=-1}Y.prototype.toString=function(){return xj(this)};Y.prototype.inspect=function(){return this.toString()};Y.prototype.clear=function(){this.ea=-1;this.map={};this._keys=[];this.size=0};Y.prototype.clear=Y.prototype.clear;function uj(a){return null!=a._keys?a._keys:Yi(a.map)}
Y.prototype["delete"]=function(a){this.ea=-1;this._keys=null;for(var b=hj(a),c=this.map[b],d=0;d<c.length;d+=2)if(cj(a,c[d]))return a=c[d+1],c.splice(d,2),0===c.length&&delete this.map[b],this.size--,a};Y.prototype.entries=function(){return new tj(this,2)};Y.prototype.entries=Y.prototype.entries;Y.prototype.forEach=function(a){for(var b=uj(this),c=0;c<b.length;c++)for(var d=this.map[b[c]],e=0;e<d.length;e+=2)a(d[e+1],d[e],this)};Y.prototype.forEach=Y.prototype.forEach;
Y.prototype.get=function(a,b){var c=hj(a);c=this.map[c];if(null!=c)for(b=0;b<c.length;b+=2){if(cj(a,c[b]))return c[b+1]}else return b};Y.prototype.get=Y.prototype.get;Y.prototype.has=function(a){var b=hj(a);b=this.map[b];if(null!=b)for(var c=0;c<b.length;c+=2)if(cj(a,b[c]))return!0;return!1};Y.prototype.has=Y.prototype.has;Y.prototype.keys=function(){return new tj(this,0)};Y.prototype.keys=Y.prototype.keys;
Y.prototype.vb=function(){for(var a=uj(this),b=[],c=0;c<a.length;c++)for(var d=this.map[a[c]],e=0;e<d.length;e+=2)b.push(d[e]);return b};Y.prototype.keySet=Y.prototype.vb;Y.prototype.set=function(a,b){this.ea=-1;var c=hj(a),d=this.map[c];if(null==d)this._keys&&this._keys.push(c),this.map[c]=[a,b],this.size++;else{c=!0;for(var e=0;e<d.length;e+=2)if(cj(b,d[e])){c=!1;d[e]=b;break}c&&(d.push(a),d.push(b),this.size++)}};Y.prototype.set=Y.prototype.set;
Y.prototype.values=function(){return new tj(this,1)};Y.prototype.values=Y.prototype.values;Y.prototype.clone=function(){var a=zj();this.forEach(function(b,c){a.set(c,b)});return a};Y.prototype.clone=Y.prototype.clone;Y.prototype[jj]=function(){return this.entries()};Y.prototype.Xa=function(){-1===this.ea&&(this.ea=gj(this));return this.ea};Y.prototype.Ta=function(a){return vj(this,a)};
function zj(a,b,c){a=a||[];b=!1===b?b:!0;if((!0!==c||!c)&&64>=a.length){if(b){var d=a;a=[];for(b=0;b<d.length;b+=2){var e=!1;for(c=0;c<a.length;c+=2)if(cj(a[c],d[b])){a[c+1]=d[b+1];e=!0;break}e||(a.push(d[b]),a.push(d[b+1]))}}return new Z(a)}d={};e=[];var f=0;for(b=0;b<a.length;b+=2){c=hj(a[b]);var h=d[c];if(null==h)e.push(c),d[c]=[a[b],a[b+1]],f++;else{var k=!0;for(c=0;c<h.length;c+=2)if(cj(h[c],a[b])){h[c+1]=a[b+1];k=!1;break}k&&(h.push(a[b]),h.push(a[b+1]),f++)}}return new Y(e,d,f)}
function Aj(a){this.map=a;this.size=a.size}Aj.prototype.toString=function(){return yj(this)};Aj.prototype.inspect=function(){return this.toString()};Aj.prototype.add=function(a){this.map.set(a,a);this.size=this.map.size};Aj.prototype.add=Aj.prototype.add;Aj.prototype.clear=function(){this.map=new Y;this.size=0};Aj.prototype.clear=Aj.prototype.clear;Aj.prototype["delete"]=function(a){a=this.map.delete(a);this.size=this.map.size;return a};Aj.prototype.entries=function(){return this.map.entries()};
Aj.prototype.entries=Aj.prototype.entries;Aj.prototype.forEach=function(a){var b=this;this.map.forEach(function(c,d){a(d,b)})};Aj.prototype.forEach=Aj.prototype.forEach;Aj.prototype.has=function(a){return this.map.has(a)};Aj.prototype.has=Aj.prototype.has;Aj.prototype.keys=function(){return this.map.keys()};Aj.prototype.keys=Aj.prototype.keys;Aj.prototype.vb=function(){return this.map.vb()};Aj.prototype.keySet=Aj.prototype.vb;Aj.prototype.values=function(){return this.map.values()};
Aj.prototype.values=Aj.prototype.values;Aj.prototype.clone=function(){var a=Bj();this.forEach(function(b){a.add(b)});return a};Aj.prototype.clone=Aj.prototype.clone;Aj.prototype[jj]=function(){return this.values()};Aj.prototype.Ta=function(a){if(a instanceof Aj){if(this.size===a.size)return cj(this.map,a.map)}else return!1};Aj.prototype.Xa=function(){return hj(this.map)};
function Bj(a){a=a||[];for(var b={},c=[],d=0,e=0;e<a.length;e++){var f=hj(a[e]),h=b[f];if(null==h)c.push(f),b[f]=[a[e],a[e]],d++;else{f=!0;for(var k=0;k<h.length;k+=2)if(cj(h[k],a[e])){f=!1;break}f&&(h.push(a[e]),h.push(a[e]),d++)}}return new Aj(new Y(c,b,d))};function Cj(a){this.str=a}
function Dj(a){this.options=a||{};this.handlers={};for(var b in this.defaults.handlers)this.handlers[b]=this.defaults.handlers[b];for(b in this.options.handlers){a:{switch(b){case "_":case "s":case "?":case "i":case "d":case "b":case "'":case "array":case "map":a=!0;break a}a=!1}if(a)throw Error('Cannot override handler for ground type "'+b+'"');this.handlers[b]=this.options.handlers[b]}this.Kc=null!=this.options.preferStrings?this.options.preferStrings:this.defaults.Kc;this.rc=null!=this.options.preferBuffers?
this.options.preferBuffers:this.defaults.rc;this.pc=this.options.defaultHandler||this.defaults.pc;this.Ua=this.options.mapBuilder;this.yb=this.options.arrayBuilder}
Dj.prototype.defaults={handlers:{_:function(){return null},"?":function(a){return"t"===a},b:function(a,b){if(b&&!1===b.rc||"undefined"==typeof ba.Buffer)if("undefined"!=typeof Uint8Array){if("undefined"!=typeof atob)var c=atob(a);else{a=String(a).replace(/=+$/,"");if(1==a.length%4)throw Error("'atob' failed: The string to be decoded is not correctly encoded.");b=0;for(var d,e=0,f="";d=a.charAt(e++);~d&&(c=b%4?64*c+d:d,b++%4)?f+=String.fromCharCode(255&c>>(-2*b&6)):0)d="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/\x3d".indexOf(d);
c=f}a=c.length;b=new Uint8Array(a);for(d=0;d<a;d++)b[d]=c.charCodeAt(d);c=b}else c=lj("b",a);else c=new ba.Buffer(a,"base64");return c},i:function(a){"number"===typeof a||a instanceof fa||(a=qa(a,10),a=0<a.compare(mj)||0>a.compare(nj)?a:a.toNumber());return a},n:function(a){return lj("n",a)},d:function(a){return parseFloat(a)},f:function(a){return lj("f",a)},c:function(a){return a},":":function(a){return new oj(a)},$:function(a){return new pj(a)},r:function(a){return lj("r",a)},z:function(a){a:switch(a){case "-INF":a=
-Infinity;break a;case "INF":a=Infinity;break a;case "NaN":a=NaN;break a;default:throw Error("Invalid special double value "+a);}return a},"'":function(a){return a},m:function(a){a="number"===typeof a?a:parseInt(a,10);return new Date(a)},t:function(a){return new Date(a)},u:function(a){a=a.replace(/-/g,"");var b,c;var d=b=0;for(c=24;8>d;d+=2,c-=8)b|=parseInt(a.substring(d,d+2),16)<<c;var e=0;d=8;for(c=24;16>d;d+=2,c-=8)e|=parseInt(a.substring(d,d+2),16)<<c;var f=ha(e,b);b=0;d=16;for(c=24;24>d;d+=2,
c-=8)b|=parseInt(a.substring(d,d+2),16)<<c;e=0;for(c=d=24;32>d;d+=2,c-=8)e|=parseInt(a.substring(d,d+2),16)<<c;return new rj(f,ha(e,b))},set:function(a){return Bj(a)},list:function(a){return lj("list",a)},link:function(a){return lj("link",a)},cmap:function(a){return zj(a,!1)}},pc:function(a,b){return lj(a,b)},Kc:!0,rc:!0};
Dj.prototype.decode=function(a,b,c,d){if(null==a)return null;switch(typeof a){case "string":return 3<a.length?c?d=!0:(d=a.charAt(1),d="~"===a.charAt(0)?":"===d||"$"===d||"#"===d:!1):d=!1,d?(a=Ej(this,a),b&&b.write(a,c),b=a):b="^"===a.charAt(0)&&" "!==a.charAt(1)?b.read(a,c):Ej(this,a),b;case "object":if(Zi(a))if("^ "===a[0])if(this.Ua)if(17>a.length&&this.Ua.fromArray){d=[];for(c=1;c<a.length;c+=2)d.push(this.decode(a[c],b,!0,!1)),d.push(this.decode(a[c+1],b,!1,!1));b=this.Ua.fromArray(d,a)}else{d=
this.Ua.init(a);for(c=1;c<a.length;c+=2)d=this.Ua.add(d,this.decode(a[c],b,!0,!1),this.decode(a[c+1],b,!1,!1),a);b=this.Ua.finalize(d,a)}else{d=[];for(c=1;c<a.length;c+=2)d.push(this.decode(a[c],b,!0,!1)),d.push(this.decode(a[c+1],b,!1,!1));b=zj(d,!1)}else b=Fj(this,a,b,c,d);else{c=Yi(a);var e=c[0];if((d=1==c.length?this.decode(e,b,!1,!1):null)&&d instanceof Cj)a=a[e],c=this.handlers[d.str],b=null!=c?c(this.decode(a,b,!1,!0),this):lj(d.str,this.decode(a,b,!1,!1));else if(this.Ua)if(16>c.length&&this.Ua.fromArray){var f=
[];for(d=0;d<c.length;d++)e=c[d],f.push(this.decode(e,b,!0,!1)),f.push(this.decode(a[e],b,!1,!1));b=this.Ua.fromArray(f,a)}else{f=this.Ua.init(a);for(d=0;d<c.length;d++)e=c[d],f=this.Ua.add(f,this.decode(e,b,!0,!1),this.decode(a[e],b,!1,!1),a);b=this.Ua.finalize(f,a)}else{f=[];for(d=0;d<c.length;d++)e=c[d],f.push(this.decode(e,b,!0,!1)),f.push(this.decode(a[e],b,!1,!1));b=zj(f,!1)}}return b}return a};Dj.prototype.decode=Dj.prototype.decode;
function Fj(a,b,c,d,e){if(e){var f=[];for(e=0;e<b.length;e++)f.push(a.decode(b[e],c,d,!1));return f}f=c&&c.idx;if(2===b.length&&"string"===typeof b[0]&&(e=a.decode(b[0],c,!1,!1))&&e instanceof Cj)return b=b[1],f=a.handlers[e.str],null!=f?f=f(a.decode(b,c,d,!0),a):lj(e.str,a.decode(b,c,d,!1));c&&f!=c.idx&&(c.idx=f);if(a.yb){if(32>=b.length&&a.yb.fromArray){f=[];for(e=0;e<b.length;e++)f.push(a.decode(b[e],c,d,!1));return a.yb.fromArray(f,b)}f=a.yb.init(b);for(e=0;e<b.length;e++)f=a.yb.add(f,a.decode(b[e],
c,d,!1),b);return a.yb.finalize(f,b)}f=[];for(e=0;e<b.length;e++)f.push(a.decode(b[e],c,d,!1));return f}function Ej(a,b){if("~"===b.charAt(0)){var c=b.charAt(1);if("~"===c||"^"===c||"`"===c)return b.substring(1);if("#"===c)return new Cj(b.substring(2));var d=a.handlers[c];return null==d?a.pc(c,b.substring(2)):d(b.substring(2),a)}return b};function Gj(a){this.fd=new Dj(a)}function Hj(a,b){this.qd=a;this.options=b||{};this.cache=this.options.cache?this.options.cache:new aj}Hj.prototype.read=function(a){var b=this.cache;a=this.qd.fd.decode(JSON.parse(a),b);this.cache.clear();return a};Hj.prototype.read=Hj.prototype.read;(8|3&Math.round(14*Math.random())).toString(16);$i();$i();$i();$i();$i();$i();$i();$i();$i();$i();$i();$i();$i();$i();$i();$i();$i();$i();$i();$i();$i();$i();$i();$i();$i();$i();$i();$i();$i();$i();function Ij(a,b){if("json"===a||"json-verbose"===a||null==a)return a=new Gj(b),new Hj(a,b);throw Error("Cannot create reader of type "+a);};fa.prototype.G=function(a,b){return this.equiv(b)};rj.prototype.G=function(a,b){return this.equiv(b)};kj.prototype.G=function(a,b){return this.equiv(b)};fa.prototype.lc=u;fa.prototype.T=function(){return hj(this)};rj.prototype.lc=u;rj.prototype.T=function(){return rc(this.toString())};kj.prototype.lc=u;kj.prototype.T=function(){return hj(this)};rj.prototype.la=u;rj.prototype.X=function(a,b){return Nb(b,['#uuid "',B.g(this.toString()),'"'].join(""))};
function Jj(a){for(var b=Fg(cd.h(null,oh)),c=J(ta(b)),d=null,e=0,f=0;;)if(f<e){var h=d.N(null,f);a[h]=b[h];f+=1}else if(c=J(c))d=c,qd(d)?(c=Zb(d),f=$b(d),d=c,e=R(c),c=f):(c=N(d),a[c]=b[c],c=O(d),d=null,e=0),f=0;else break;return a}function Kj(){}Kj.prototype.init=function(){return Tb(ie)};Kj.prototype.add=function(a,b,c){return Wb(a,b,c)};Kj.prototype.finalize=function(a){return Vb(a)};Kj.prototype.fromArray=function(a){return tf.l?tf.l(a,!0,!0):tf.call(null,a,!0,!0)};function Lj(){}
Lj.prototype.init=function(){return Tb(Zc)};Lj.prototype.add=function(a,b){return Vd.h(a,b)};Lj.prototype.finalize=function(a){return Vb(a)};Lj.prototype.fromArray=function(a){return Ve.h?Ve.h(a,!0):Ve.call(null,a,!0)};
function Mj(){return Ij(Ld(Mh),Jj({handlers:Fg(Zf.C(Xc([new v(null,6,["$",function(a){return uc.g(a)},":",function(a){return Kd.g(a)},"set",function(a){return xe.h(fg,a)},"list",function(a){return xe.h(yc,a.reverse())},"cmap",function(a){for(var b=0,c=Tb(ie);;)if(b<a.length){var d=b+2;c=Wb(c,a[b],a[b+1]);b=d}else return Vb(c)},"with-meta",function(a){return gd(a[0],a[1])}],null),cd.h(oh.g(null),$g)]))),defaultHandler:$g.g(oh.g(null)),mapBuilder:new Kj,arrayBuilder:new Lj,prefersStrings:!1}))};function Nj(a,b,c){var d=RegExp,e=b.source,f=x(b.ignoreCase)?"gi":"g";f=x(b.multiline)?[f,"m"].join(""):f;b=x(b.Fd)?[f,"u"].join(""):f;return a.replace(new d(e,b),c)}
function Oj(a){return function(){function b(d){var e=null;if(0<arguments.length){e=0;for(var f=Array(arguments.length-0);e<f.length;)f[e]=arguments[e+0],++e;e=new K(f,0,null)}return c.call(this,e)}function c(d){d=we(d);if(P.h(R(d),1))return d=N(d),a.g?a.g(d):a.call(null,d);d=We(d);return a.g?a.g(d):a.call(null,d)}b.S=0;b.U=function(d){d=J(d);return c(d)};b.C=c;return b}()}
function Pj(a,b,c){if("string"===typeof b)return a.replace(new RegExp(String(b).replace(/([-()\[\]{}+?*.$\^|,:#<!\\])/g,"\\$1").replace(/\x08/g,"\\x08"),"g"),c);if(b instanceof RegExp)return"string"===typeof c?Nj(a,b,c):Nj(a,b,Oj(c));throw["Invalid match arg: ",B.g(b)].join("");}function Qj(a){var b=new ya;for(a=J(a);;)if(null!=a)b.append(B.g(N(a))),a=O(a),null!=a&&b.append(" ");else return b.toString()}
function Rj(a){var b=/-/;a="/(?:)/"===B.g(b)?Yc.h(We(Wc("",ue.h(B,J(a)))),""):We(B.g(a).split(b));if(1<R(a))a:for(;;)if(""===(null==a?null:tb(a)))a=null==a?null:ub(a);else break a;return a};var Sj={};var Tj={},Uj="undefined"!==typeof window&&null!=window.document,Vj=new dg(null,new v(null,2,["aria",null,"data",null],null),null);function Wj(a){return 2>R(a)?a.toUpperCase():[a.substring(0,1).toUpperCase(),a.substring(1)].join("")}function Xj(a){if("string"===typeof a)return a;a=Ld(a);var b=Rj(a),c=J(b);b=N(c);c=O(c);return x(Vj.g?Vj.g(b):Vj.call(null,b))?a:ce(B,b,ue.h(Wj,c))}
function Yj(a){var b=function(){if(dd(a)){var c=a.displayName;x(c)||(c=a.name,c="string"===typeof c&&J(c)?c:null)}else c=!1;if(x(c))return c;c=null!=a&&(a.J&4096||u===a.Bc)?Ld(a):!1;if(x(c))return c;c=hd(a);return nd(c)?Bh.g(c):null}();return x(b)?Pj(B.g(b),"$","."):null}function Zj(a){return a instanceof I||a instanceof tc}
var ak=function ak(a){switch(arguments.length){case 0:return ak.I();case 1:return ak.g(arguments[0]);case 2:return ak.h(arguments[0],arguments[1]);default:for(var c=[],d=arguments.length,e=0;;)if(e<d)c.push(arguments[e]),e+=1;else break;c=new K(c.slice(2),0,null);return ak.C(arguments[0],arguments[1],c)}};ak.I=function(){return null};ak.g=function(a){return kd(a)?(a=oe(function(b){return x(b)?Zj(b)?Ld(b):b:null},a),J(a)?Qj(a):null):Zj(a)?Ld(a):a};
ak.h=function(a,b){return x(a)?x(b)?[B.g(ak.g(a))," ",B.g(ak.g(b))].join(""):ak.g(a):ak.g(b)};ak.C=function(a,b,c){return Ta(ak,ak.h(a,b),c)};ak.U=function(a){var b=N(a),c=O(a);a=N(c);c=O(c);return this.C(b,a,c)};ak.S=2;var bk=!1;function ck(a){if(nd(a))try{var b=H.h(a,Th)}catch(c){b=null}else b=null;return b}
function dk(a){var b=Th.g(hd(a));if(x(b))return b;b=ck(T(a,1,null));if(x(b))return b;b=T(a,0,null);switch(b instanceof I?b.Ba:null){case "\x3e":case "f\x3e":return ck(T(a,2,null));case "r\x3e":return a=T(a,2,null),null==a?null:a.key;default:return null}};var ek=0;function fk(a){return setTimeout(a,16)}var gk=Uj?function(){var a=window;return function(){var b=a.requestAnimationFrame;if(x(b))return b;b=a.webkitRequestAnimationFrame;if(x(b))return b;b=a.mozRequestAnimationFrame;if(x(b))return b;b=a.msRequestAnimationFrame;return x(b)?b:fk}().bind(a)}():fk;function hk(a,b){return a.oc-b.oc}function ik(){return null}function jk(a){for(var b=a.length,c=0;;)if(c<b){var d=a[c];d.I?d.I():d.call(null);c+=1}else return null}
function kk(a,b,c){b.push(c);return a.schedule()}function lk(){this.ec=!1}g=lk.prototype;g.flush_after_render=function(){var a=this.Qb;if(null==a)return null;this.Qb=null;return jk(a)};g.queue_render=function(a){null==this.bc&&(this.bc=[]);return kk(this,this.bc,a)};g.schedule=function(){function a(){return b.run_queues()}var b=this;if(this.ec)return null;this.ec=!0;return gk.g?gk.g(a):gk.call(null,a)};g.flush_before_flush=function(){var a=this.Rb;if(null==a)return null;this.Rb=null;return jk(a)};
g.flush_queues=function(){this.flush_before_flush();ik();this.flush_render();return this.flush_after_render()};g.run_queues=function(){this.ec=!1;return this.flush_queues()};g.add_before_flush=function(a){null==this.Rb&&(this.Rb=[]);return kk(this,this.Rb,a)};g.add_after_render=function(a){null==this.Qb&&(this.Qb=[]);return kk(this,this.Qb,a)};
g.flush_render=function(){var a=this.bc;if(null==a)return null;this.bc=null;a:{a.sort(hk);for(var b=a.length,c=0;;)if(c<b){var d=a[c];!0===d.cljsIsDirty&&d.forceUpdate();c+=1}else break a}return null};var mk=new lk;function nk(a){if(x(a.cljsIsDirty))return null;a.cljsIsDirty=!0;return mk.queue_render(a)};function ok(a){if(null!=a&&null!=a.nd)a=a.id;else{var b=ok[t(null==a?null:a)];if(null!=b)a=b.g?b.g(a):b.call(null,a);else if(b=ok._,null!=b)a=b.g?b.g(a):b.call(null,a);else throw z("Compiler.get-id",a);}return a}function pk(a,b){if(null!=a&&null!=a.Lc)a=a.Lc(a,b);else{var c=pk[t(null==a?null:a)];if(null!=c)a=c.h?c.h(a,b):c.call(null,a,b);else if(c=pk._,null!=c)a=c.h?c.h(a,b):c.call(null,a,b);else throw z("Compiler.as-element",a);}return a}
function qk(a,b,c,d,e){if(null!=a&&null!=a.Mc)a=a.Mc(a,b,c,d,e);else{var f=qk[t(null==a?null:a)];if(null!=f)a=f.P?f.P(a,b,c,d,e):f.call(null,a,b,c,d,e);else if(f=qk._,null!=f)a=f.P?f.P(a,b,c,d,e):f.call(null,a,b,c,d,e);else throw z("Compiler.make-element",a);}return a};var rk=function rk(a){switch(arguments.length){case 1:return rk.g(arguments[0]);case 2:return rk.h(arguments[0],arguments[1]);default:for(var c=[],d=arguments.length,e=0;;)if(e<d)c.push(arguments[e]),e+=1;else break;c=new K(c.slice(2),0,null);return rk.C(arguments[0],arguments[1],c)}};rk.g=function(a){return a};rk.h=function(a,b){return R(a)<R(b)?Ta(function(c,d){return vd(b,d)?id.h(c,d):c},a,a):Ta(id,a,b)};rk.C=function(a,b,c){return Ta(rk,a,Yc.h(c,b))};
rk.U=function(a){var b=N(a),c=O(a);a=N(c);c=O(c);return this.C(b,a,c)};rk.S=2;var sk;function tk(a,b){b.captured=null;a:{var c=sk;sk=b;try{var d=a.I?a.I():a.call(null);break a}finally{sk=c}d=void 0}a=b.captured;b.nb=!1;a:{c=b.xb;var e=null==a?0:a.length;if(e===(null==c?0:c.length))for(var f=0;;){var h=f===e;if(h){c=h;break a}if(a[f]===c[f])f+=1;else{c=!1;break a}}else c=!1}c||b._update_watching(a);return d}function uk(a){var b=sk;if(null!=b){var c=b.captured;null==c?b.captured=[a]:c.push(a)}}function vk(a,b,c){a.ra=U.l(a.ra,b,c);return a.wc=null}
function wk(a,b){a.ra=cd.h(a.ra,b);return a.wc=null}function xk(a,b,c){var d=a.wc;d=null==d?a.wc=Cd(function(l,m,n){l.push(m);l.push(n);return l},[],a.ra):d;for(var e=d.length,f=0;;)if(f<e){var h=d[f],k=d[f+1];k.K?k.K(h,a,b,c):k.call(null,h,a,b,c);f=2+f}else return null}function yk(a,b,c,d){Nb(a,["#object[reagent.ratom.",B.g(c)," "].join(""));a:{c=sk;sk=null;try{var e=d;break a}finally{sk=c}e=void 0}qg(e,a,b);return Nb(a,"]")}var zk=null;
function Ak(a,b,c,d){this.state=a;this.meta=b;this.vc=c;this.ra=d;this.o=2154201088;this.J=114690}g=Ak.prototype;g.X=function(a,b,c){return yk(b,c,"RAtom",new v(null,1,[zg,this.Ca(null)],null))};g.da=function(){return this.meta};g.T=function(){return ca(this)};g.G=function(a,b){return this===b};g.ya=function(a,b){a=this.state;this.state=b;null!=this.ra&&xk(this,a,b);return b};g.Vb=function(a,b){return this.ya(null,b.g?b.g(this.state):b.call(null,this.state))};
g.Wb=function(a,b,c){return this.ya(null,b.h?b.h(this.state,c):b.call(null,this.state,c))};g.Xb=function(a,b,c,d){return this.ya(null,b.l?b.l(this.state,c,d):b.call(null,this.state,c,d))};g.Yb=function(a,b,c,d,e){return this.ya(null,de(b,this.state,c,d,e))};g.Zb=function(a,b){xk(this,a,b)};g.Ib=function(a,b,c){return vk(this,b,c)};g.Jb=function(a,b){return wk(this,b)};g.ga=function(a,b){return new Ak(this.state,b,this.vc,this.ra)};g.Ca=function(){uk(this);return this.state};
var Bk=function Bk(a){switch(arguments.length){case 1:return Bk.g(arguments[0]);default:for(var c=[],d=arguments.length,e=0;;)if(e<d)c.push(arguments[e]),e+=1;else break;c=new K(c.slice(1),0,null);return Bk.C(arguments[0],c)}};Bk.g=function(a){return new Ak(a,null,null,null)};Bk.C=function(a,b){var c=fe(b);b=H.h(c,Ja);c=H.h(c,$h);return new Ak(a,b,c,null)};Bk.U=function(a){var b=N(a);a=O(a);return this.C(b,a)};Bk.S=1;
function Ck(a,b,c,d){var e=b.tc;e=null==e?ie:e;var f=e.h?e.h(c,null):e.call(null,c,null);if(null!=f)return G(f);if(null==sk)return a.I?a.I():a.call(null);f=function(){function k(){var l=cd.h(b.tc,c);b.tc=l;null!=d&&(d.sc=null);return null}return Dk.l?Dk.l(a,jh,k):Dk.call(null,a,jh,k)}();var h=G(f);b.tc=U.l(e,c,f);null!=d&&(d.sc=f);return h}function Ek(a){this.ja=Fk;this.path=a;this.ra=this.state=this.sc=null;this.o=2153807872;this.J=114690}g=Ek.prototype;
g._peek=function(){var a=sk;sk=null;try{return this.Ca(null)}finally{sk=a}};g._set_state=function(a,b){if(a===b)return null;this.state=b;return null!=this.ra?xk(this,a,b):null};g.X=function(a,b,c){return yk(b,c,"RCursor",new v(null,2,[zg,this.Ca(null),Fh,this.path],null))};g.T=function(){return rc(new V(null,2,5,X,[this.ja,this.path],null))};g.G=function(a,b){return b instanceof Ek&&P.h(this.path,b.path)&&P.h(this.ja,b.ja)};
g.ya=function(a,b){this._set_state(this.state,b);(null!=this.ja?this.ja.o&32768||u===this.ja.Rc||(this.ja.o?0:y(xb,this.ja)):y(xb,this.ja))?P.h(this.path,Zc)?re(this.ja,b):se.K(this.ja,ye,this.path,b):this.ja.h?this.ja.h(this.path,b):this.ja.call(null,this.path,b);return b};g.Vb=function(a,b){a=this.ya;var c=this._peek();b=b.g?b.g(c):b.call(null,c);return a.call(this,null,b)};g.Wb=function(a,b,c){a=this.ya;var d=this._peek();b=b.h?b.h(d,c):b.call(null,d,c);return a.call(this,null,b)};
g.Xb=function(a,b,c,d){a=this.ya;var e=this._peek();b=b.l?b.l(e,c,d):b.call(null,e,c,d);return a.call(this,null,b)};g.Yb=function(a,b,c,d,e){return this.ya(null,de(b,this._peek(),c,d,e))};g.Zb=function(a,b){xk(this,a,b)};g.Ib=function(a,b,c){return vk(this,b,c)};g.Jb=function(a,b){return wk(this,b)};
g.Ca=function(){var a=this,b=this,c=a.state,d=function(){var e=a.sc;return null==e?(e=(null!=a.ja?a.ja.o&32768||u===a.ja.Rc||(a.ja.o?0:y(xb,a.ja)):y(xb,a.ja))?function(){var f=G(a.ja);return Ta(H,f,a.path)}:function(){return a.ja.g?a.ja.g(a.path):a.ja.call(null,a.path)},Ck(e,a.ja,a.path,b)):G(e)}();b._set_state(c,d);return d};
function Gk(a){if(null!=a&&null!=a.uc)a=a.uc(a);else{var b=Gk[t(null==a?null:a)];if(null!=b)a=b.g?b.g(a):b.call(null,a);else if(b=Gk._,null!=b)a=b.g?b.g(a):b.call(null,a);else throw z("IDisposable.dispose!",a);}return a}function Rb(a,b,c,d){return a._handle_change(b,c,d)}function Hk(a){this.f=a;this.state=null;this.nb=!0;this.Ic=!1;this.hc=this.bb=this.ra=this.xb=null;this.o=2153807872;this.J=114690}g=Hk.prototype;g._peek_at=function(){var a=sk;sk=null;try{return this.Ca(null)}finally{sk=a}};
g._handle_change=function(a,b,c){return b===c||this.nb?null:null==this.bb?(this.nb=!0,null==zk&&(zk=[],!1===mk.ec&&mk.schedule()),zk.push(this)):!0===this.bb?this._run(!1):this.bb.g?this.bb.g(this):this.bb.call(null,this)};
g._update_watching=function(a){var b=gg(a),c=gg(this.xb);this.xb=a;a=J(rk.h(b,c));for(var d=null,e=0,f=0;;)if(f<e){var h=d.N(null,f);Qb(h,this);f+=1}else if(a=J(a))d=a,qd(d)?(a=Zb(d),f=$b(d),d=a,e=R(a),a=f):(a=N(d),Qb(a,this),a=O(d),d=null,e=0),f=0;else break;b=J(rk.h(c,b));c=null;for(e=d=0;;)if(e<d)a=c.N(null,e),Sb(a,this),e+=1;else if(b=J(b))c=b,qd(c)?(b=Zb(c),d=$b(c),c=b,a=R(b),b=d,d=a):(a=N(c),Sb(a,this),b=O(c),c=null,d=0),e=0;else return null};
g._queued_run=function(){return this.nb&&null!=this.xb?this._run(!0):null};g._try_capture=function(a){try{return this.hc=null,tk(a,this)}catch(b){return this.hc=this.state=a=b,this.nb=!1}};g._run=function(a){var b=this.state;a=x(a)?this._try_capture(this.f):tk(this.f,this);this.Ic||(this.state=a,null==this.ra||P.h(b,a)||xk(this,b,a));return a};
g._set_opts=function(a){var b=fe(a);a=H.h(b,hh);var c=H.h(b,Dh),d=H.h(b,jh);b=H.h(b,Gh);null!=a&&(this.bb=a);null!=c&&(this.ld=c);null!=d&&(this.Jc=d);return null!=b?this.Ic=b:null};g.X=function(a,b,c){return yk(b,c,"Reaction",new v(null,1,[zg,this.Ca(null)],null))};g.T=function(){return ca(this)};g.G=function(a,b){return this===b};
g.uc=function(){var a=this.state,b=this.xb;this.bb=this.state=this.xb=null;this.nb=!0;b=J(gg(b));for(var c=null,d=0,e=0;;)if(e<d){var f=c.N(null,e);Sb(f,this);e+=1}else if(b=J(b))c=b,qd(c)?(b=Zb(c),e=$b(c),c=b,d=R(b),b=e):(b=N(c),Sb(b,this),b=O(c),c=null,d=0),e=0;else break;null!=this.Jc&&this.Jc(a);a=this.Dd;if(null==a)return null;b=a.length;for(c=0;;)if(c<b)d=a[c],d.g?d.g(this):d.call(null,this),c+=1;else return null};g.ya=function(a,b){a=this.state;this.state=b;this.ld(a,b);xk(this,a,b);return b};
g.Vb=function(a,b){a=this.ya;var c=this._peek_at();b=b.g?b.g(c):b.call(null,c);return a.call(this,null,b)};g.Wb=function(a,b,c){a=this.ya;var d=this._peek_at();b=b.h?b.h(d,c):b.call(null,d,c);return a.call(this,null,b)};g.Xb=function(a,b,c,d){a=this.ya;var e=this._peek_at();b=b.l?b.l(e,c,d):b.call(null,e,c,d);return a.call(this,null,b)};g.Yb=function(a,b,c,d,e){return this.ya(null,de(b,this._peek_at(),c,d,e))};g.Zb=function(a,b){xk(this,a,b)};g.Ib=function(a,b,c){return vk(this,b,c)};
g.Jb=function(a,b){a=jd(this.ra);wk(this,b);return!a&&jd(this.ra)&&null==this.bb?this.uc(null):null};g.Ca=function(){var a=this.hc;if(null!=a)throw a;(a=null==sk)&&(Ik.I?Ik.I():Ik.call(null));a&&null==this.bb?this.nb&&(a=this.state,this.state=this.f.I?this.f.I():this.f.call(null),null==this.ra||P.h(a,this.state)||xk(this,a,this.state)):(uk(this),this.nb&&this._run(!1));return this.state};
function Ik(){for(;;){var a=zk;if(null==a)return null;zk=null;for(var b=a.length,c=0;;)if(c<b)a[c]._queued_run(),c+=1;else break}}ik=Ik;function Dk(a){for(var b=[],c=arguments.length,d=0;;)if(d<c)b.push(arguments[d]),d+=1;else break;c=1<b.length?new K(b.slice(1),0,null):null;b=arguments[0];var e=fe(c);c=H.h(e,hh);d=H.h(e,Dh);e=H.h(e,jh);b=new Hk(b);b._set_opts(new v(null,3,[hh,c,Dh,d,jh,e],null));return b}var Jk=Dk(null);
function Kk(a,b){var c=Lk,d=Jk,e=tk(a,d);null!=d.xb&&(Jk=Dk(null),d._set_opts(c),d.f=a,d.bb=function(){return nk.g?nk.g(b):nk.call(null,b)},b.cljsRatom=d);return e};var Mk;function Nk(a,b){var c=b.argv;if(null==c){c=X;a=a.constructor;a:for(var d=ta(b),e=d.length,f=ie,h=0;;)if(h<e){var k=d[h];f=U.l(f,Kd.g(k),ua(b,k));h+=1}else break a;b=new V(null,2,5,c,[a,f],null)}else b=c;return b}function Ok(a){var b;if(b=dd(a))a=null==a?null:a.prototype,b=null!=(null==a?null:a.ob);return b}
function Pk(a,b){for(;;){var c=a.ob,d=!0===a.cd?c.call(a,a):function(){var e=Nk(a,a.props);switch(R(e)){case 1:return c.call(a);case 2:return c.call(a,Sc(e,1));case 3:return c.call(a,Sc(e,1),Sc(e,2));case 4:return c.call(a,Sc(e,1),Sc(e,2),Sc(e,3));case 5:return c.call(a,Sc(e,1),Sc(e,2),Sc(e,3),Sc(e,4));default:return c.apply(a,Sa(e).slice(1))}}();if(pd(d))return pk(b,d);if(ud(d))d=Ok(d)?function(e,f,h,k,l){return function(){function m(p){var q=null;if(0<arguments.length){q=0;for(var r=Array(arguments.length-
0);q<r.length;)r[q]=arguments[q+0],++q;q=new K(r,0,null)}return n.call(this,q)}function n(p){return pk(f,ce($e,l,p))}m.S=0;m.U=function(p){p=J(p);return n(p)};m.C=n;return m}()}(a,b,c,null,d):d,a.ob=d;else return d}}var Lk=new v(null,1,[Gh,!0],null);
function Qk(a,b){switch(a instanceof I?a.Ba:null){case "getDefaultProps":throw Error("getDefaultProps not supported");case "getDerivedStateFromProps":return function(c,d){var e=b.call,f=c.argv;null!=f&&(c=T(f,1,null),c=nd(c)?c:null);return e.call(b,null,c,d)};case "getInitialState":return function(c){var d=c.ed;d=null!=d?d:c.ed=Bk.g(null);return re(d,b.call(c,c))};case "getSnapshotBeforeUpdate":return function(c,d){return b.call(this,this,Nk(this,c),d)};case "componentWillReceiveProps":return function(c){return b.call(this,
this,Nk(this,c))};case "UNSAFE_componentWillReceiveProps":return function(c){return b.call(this,this,Nk(this,c))};case "shouldComponentUpdate":return function(c){var d=bk;if(x(d))return d;d=this.props.argv;var e=c.argv,f=null==d||null==e;if(null==b){if(f)return f;try{return!P.h(d,e)}catch(h){return!1}}else return f?b.call(this,this,Nk(this,this.props),Nk(this,c)):b.call(this,this,d,e)};case "componentWillUpdate":return function(c,d){return b.call(this,this,Nk(this,c),d)};case "UNSAFE_componentWillUpdate":return function(c,
d){return b.call(this,this,Nk(this,c),d)};case "componentDidUpdate":return function(c,d,e){return b.call(this,this,Nk(this,c),d,e)};case "componentWillMount":return function(){return b.call(this,this)};case "UNSAFE_componentWillMount":return function(){return b.call(this,this)};case "componentDidMount":return function(){return b.call(this,this)};case "componentWillUnmount":return function(){var c=ua(this,"cljsRatom");null!=c&&Gk(c);this.cljsIsDirty=!1;return null==b?null:b.call(this,this)};case "componentDidCatch":return function(c,
d){return b.call(this,this,c,d)};default:return null}}var Rk=new v(null,2,[hi,null,Vh,null],null),Sk=function(a){var b=qe(ie);return function(c){var d=H.h(G(b),c);if(null!=d)return d;d=a.g?a.g(c):a.call(null,c);se.K(b,U,c,d);return d}}(function(a){if("string"===typeof a)return a;a=Ld(a);a=Pj(a,/(unsafe|UNSAFE)[-_]/,"UNSAFE_");a=Rj(a);var b=J(a);a=N(b);b=O(b);return ce(B,a,ue.h(Wj,b))});function Tk(a){return Cd(function(b,c,d){return U.l(b,Kd.g(Sk(c)),d)},ie,a)}
function Uk(a,b){var c=function(){var h=Ah.g(a);return x(h)?h:eh.g(a)}(),d=null==Ah.g(a),e=function(){var h=ih.g(a);if(x(h))return h;h=Yj(c);return x(h)?h:B.g(Bg("reagent"))}(),f=Cd(function(h,k,l){var m=U.l,n=Qk(k,l);return m.call(U,h,k,x(n)?n:l)},ie,a);return U.C(f,ih,e,Xc([xh,d,Ah,c,eh,function(){var h=this,k=ua(h,"cljsRatom");h.cljsIsDirty=!1;return null==k?Kk(function(){a:{var l=Mk;Mk=h;try{var m=Pk(h,b);break a}finally{Mk=l}m=void 0}return m},h):k._run(!1)}]))}
function Vk(a){return Cd(function(b,c,d){c=Ld(c);b[c]=d;return b},{},a)}function Wk(a,b){return Uk(Zf.C(Xc([Rk,Tk(a)])),b)}var ag=new V(null,5,5,X,[ph,fi,Xh,Zh,lh],null);
function Xk(a,b){function c(k,l,m){yi.Component.call(this,k,l,m);x(h)&&(h.h?h.h(this,k):h.call(null,this,k));x(f)&&(this.state=f.g?f.g(this):f.call(null,this));this.oc=ek+=1;return this}a=Wk(a,b);b=Vk(ee(cd,a,ih,Ch,nh,Xc([eh,Ah,ag])));var d=Vk($f(a)),e=ih.g(a),f=Ch.g(a),h=nh.g(a);xa(c.prototype,yi.Component.prototype,b);x(eh.g(a))&&(c.prototype.render=eh.g(a));x(Ah.g(a))&&(c.prototype.ob=Ah.g(a));x(xh.g(a))&&(c.prototype.cd=xh.g(a));xa(c,yi.Component,d);x(e)&&(c.displayName=e,c.Ab=e,c.mc=function(k){return Nb(k,
e)});c.$b=!0;return c.prototype.constructor=c}function Yk(a,b,c){a=ok(a);return b[a]=c}
function Zk(a,b){for(;;){var c=b.ob,d=b.argv,e=be(c,d);if(pd(e))return pk(a,e);if(ud(e))c=Ok(e)?function(f,h,k,l,m,n){return function(){function p(r){var w=null;if(0<arguments.length){w=0;for(var A=Array(arguments.length-0);w<A.length;)A[w]=arguments[w+0],++w;w=new K(A,0,null)}return q.call(this,w)}function q(r){return pk(f,ce($e,n,r))}p.S=0;p.U=function(r){r=J(r);return q(r)};p.C=q;return p}()}(a,b,c,null,d,e):e,b.ob=c;else return e}}
function $k(a,b){var c=b.argv,d=b.ob;b=yi.useState(0);T(b,0,null);var e=T(b,1,null),f=yi.useRef();x(f.current)||function(){var k={forceUpdate:function(){return e.g?e.g(Hc):e.call(null,Hc)}};k.oc=ek+=1;k.constructor=d;k.ob=d;return f.current=k}();var h=f.current;b=ua(h,"cljsRatom");yi.useEffect(function(){return function(){var k=ua(h,"cljsRatom");return null==k?null:Gk(k)}},[]);h.argv=c;h.cljsIsDirty=!1;return null==b?Kk(function(){a:{var k=Mk;Mk=h;try{var l=Zk(a,h);break a}finally{Mk=k}l=void 0}return l},
h):b._run(!1)}function al(a,b){a=a.argv;b=b.argv;if(!1===bk)try{return P.h(a,b)}catch(c){return!1}else return!1}function bl(a,b){function c(e){return $k(a,e)}var d=ua(b,ok(a));if(x(d))return d;c.displayName=Yj(b);d=yi.memo(c,al);Yk(a,b,d);return d};var cl=new dg(null,new v(null,6,["url",null,"tel",null,"text",null,"textarea",null,"password",null,"search",null],null),null);
function dl(a,b,c,d){var e=fe(ie);e=H.h(e,Sh);if(a===document.activeElement&&vd(cl,a.type)&&"string"===typeof b&&"string"===typeof c){var f=a.value;if(!P.h(f,c))return mk.add_after_render(function(){return el.g?el.g(d):el.call(null,d)});c=R(f)-a.selectionStart;c=R(b)-c;d.ac=b;a.value=b;dd(e)&&(e.g?e.g(b):e.call(null,b));a.selectionStart=c;return a.selectionEnd=c}d.ac=b;a.value=b;return dd(e)?e.g?e.g(b):e.call(null,b):null}
function el(a){if(x(a.nc)){a.Gc=!1;var b=a.dd,c=a.ac,d=a.qc;return P.h(b,c)?null:dl(d,b,c,a)}return null}function fl(a,b,c){a.ac=c.target.value;x(a.Gc)||(a.Gc=!0,mk.add_after_render(function(){return el(a)}));return b.g?b.g(c):b.call(null,c)}
function gl(a){var b=Mk;if(x(null!=a?function(){var f=a.hasOwnProperty("onChange");return x(f)?a.hasOwnProperty("value"):f}():!1)){var c=a.value;c=null==c?"":c;var d=a.onChange,e=a.ref;x(b.nc)||(b.nc=!0,b.ac=c);x(b.Nc)||(b.Nc=dd(e)?function(f){b.qc=f;return e.g?e.g(f):e.call(null,f)}:x(x(e)?e.hasOwnProperty("current"):e)?function(f){b.qc=f;return e.current=f}:function(f){return b.qc=f});b.dd=c;delete a.value;a.defaultValue=c;a.onChange=function(f){return fl(b,d,f)};a.ref=b.Nc}}
var hl=new v(null,4,[di,"ReagentInput",Nh,el,mi,function(a){return a.nc=null},Oh,function(a,b,c,d,e){gl(c);return qk(e,a,b,c,d)}],null);var il={},jl,kl=/([^\s\.#]+)(?:#([^\s\.#]+))?(?:\.([^\s#]+))?/,ll={"class":"className","for":"htmlFor",charset:"charSet"};function ml(a,b){return a.hasOwnProperty(b)?ua(a,b):null}function nl(a,b,c){if(Zj(b)){var d=ml(ll,Ld(b));null==d?(d=Xj(b),b=Ld(b),b=ll[b]=d):b=d}c=ol.g?ol.g(c):ol.call(null,c);a[b]=c;return a}
function ol(a){return"object"!==t(a)?a:Zj(a)?Ld(a):nd(a)?Cd(nl,{},a):kd(a)?Fg(a):ud(a)?function(){function b(d){var e=null;if(0<arguments.length){e=0;for(var f=Array(arguments.length-0);e<f.length;)f[e]=arguments[e+0],++e;e=new K(f,0,null)}return c.call(this,e)}function c(d){return be(a,d)}b.S=0;b.U=function(d){d=J(d);return c(d)};b.C=c;return b}():Fg(a)}var pl={};function ql(a,b,c){if(Zj(b)){var d=ml(pl,Ld(b));null==d?(d=Xj(b),b=Ld(b),b=pl[b]=d):b=d}c=ol(c);a[b]=c;return a}
function rl(a){return"object"!==t(a)?a:Zj(a)?Ld(a):nd(a)?Cd(ql,{},a):kd(a)?Fg(a):ud(a)?function(){function b(d){var e=null;if(0<arguments.length){e=0;for(var f=Array(arguments.length-0);e<f.length;)f[e]=arguments[e+0],++e;e=new K(f,0,null)}return c.call(this,e)}function c(d){return be(a,d)}b.S=0;b.U=function(d){d=J(d);return c(d)};b.C=c;return b}():Fg(a)}
function sl(a,b,c,d,e){switch(R(b)-e){case 0:return yi.createElement(c,d);case 1:return yi.createElement(c,d,pk(a,T(b,e,null)));default:return yi.createElement.apply(null,Cd(function(f,h,k){h>=e&&f.push(pk(a,k));return f},[c,d],b))}}function tl(a,b,c,d){this.tag=a;this.id=b;this.className=c;this.custom=d}function ul(a,b,c){var d=ua(a,ok(c));null==d?Ok(a)?a=Yk(c,a,a):(d=hd(a),d=U.l(d,Oh,a),d=Xk(d,c),a=Yk(c,a,d)):a=d;c={};c.argv=b;b=dk(b);null!=b&&(c.key=b);return yi.createElement(a,c)}
function vl(a,b,c,d){var e={};e.ob=a;var f=R(b);c=df(null,b,c|0,f|0,null);e.argv=c;b=dk(b);null!=b&&(e.key=b);return yi.createElement(bl(d,a),e)}function wl(a,b,c){var d;if(d=dd(a))d=null==a?null:a.prototype,d=null!=(null==d?null:d.render);return d?ul(a,b,c):vl(a,b,1,c)}var xl={};
function yl(a,b,c,d){var e=a.tag,f=T(b,c,null),h=null==f||nd(f),k=function(){var m=h?f:null;var n=th.g(m);n=x(n)?U.l(m,th,ak.g(n)):m;var p=a.id;m=a.className;p=null!=p&&null==ki.g(n)?U.l(n,ki,p):n;if(x(m)){var q=U.l,r=ak.h,w=th.g(n);n=x(w)?w:oi.g(n);m=q.call(U,p,th,r.call(ak,m,n))}else m=p;m=x(a.custom)?rl(m):ol(m);return x(m)?m:{}}();c+=h?1:0;a:switch(e){case "input":case "textarea":var l=!0;break a;default:l=!1}if(l)return l=function(){var m=d.od;if(x(m))return m;m=Xk(hl,d);return d.od=m}(),pk(d,
gd(new V(null,6,5,X,[l,b,e,k,c,d],null),hd(b)));l=ck(hd(b));null!=l&&(k.key=l);return qk(d,b,e,k,c)}function zl(a,b){return Sa(ue.h(function(c){return pk(b,c)},a))}
function Al(a,b,c){null==b&&console.error("vec-to-elem",ug(Xc([a]),Ga()));var d=T(a,0,null);switch(d instanceof I?d.Ba:null){case "\x3e":return c=T(a,1,null),yl(new tl(c,null,null,null),a,2,b);case "r\x3e":c=T(a,1,null);d=T(a,2,null);d=x(d)?d:{};var e=ck(hd(a));null!=e&&(d.key=e);return qk(b,a,c,d,3);case "f\x3e":return vl(T(a,1,null),a,2,b);case "\x3c\x3e":return d=T(a,1,null),c=null==d||nd(d),d=ol(c?d:null),d=x(d)?d:{},c=1+(c?1:0),e=dk(a),null!=e&&(d.key=e),qk(b,a,yi.Fragment,d,c);default:if(Zj(d)||
"string"===typeof d)a:for(;;)switch(c=T(a,0,null),c=Ld(c),d=c.indexOf("\x3e"),d){case -1:d=ml(xl,c);if(null==d){var f=O(hg(kl,Ld(c)));d=T(f,0,null);e=T(f,1,null);f=T(f,2,null);f=null==f?null:Pj(f,/\./," ");var h=d.indexOf("-");h=!P.h(-1,h);d=new tl(d,e,f,h);c=xl[c]=d}else c=d;a=yl(c,a,1,b);break a;case 0:a=null;break a;default:a=gd(new V(null,2,5,X,[c.substring(0,d),U.l(gd(a,null),0,c.substring(d+1))],null),hd(a))}else a=c.l?c.l(d,a,b):c.call(null,d,a,b);return a}}
var Bl=function(a){var b=Bg("G__"),c=x(Qh.g(a))?wl:ul;if("undefined"===typeof Sj||"undefined"===typeof Tj||"undefined"===typeof il||"undefined"===typeof jl)jl=function(d,e,f,h){this.opts=d;this.id=e;this.Hc=f;this.kd=h;this.o=393216;this.J=0},jl.prototype.ga=function(d,e){return new jl(this.opts,this.id,this.Hc,e)},jl.prototype.da=function(){return this.kd},jl.prototype.nd=function(){return this.id},jl.prototype.Lc=function(d,e){d=this.Hc;return"object"!==t(e)?e:pd(e)?Al(e,this,d):(null==e?0:null!=
e?e.o&64||u===e.zb||(e.o?0:y(fb,e)):y(fb,e))?zl(e,this):Zj(e)?Ld(e):(null!=e?e.o&2147483648||u===e.la||(e.o?0:y(Ob,e)):y(Ob,e))?ug(Xc([e]),Ga()):e},jl.prototype.Mc=function(d,e,f,h,k){return sl(this,e,f,h,k)},jl.$b=!0,jl.Ab="reagent.impl.template/t_reagent$impl$template20732",jl.mc=function(d){return Nb(d,"reagent.impl.template/t_reagent$impl$template20732")};return new jl(a,b,c,ie)}(ie);var Cl=qe(null),Dl=Bk.g(null);function El(a){return function(b){b=b.data;return a.g?a.g(b):a.call(null,b)}}function Fl(a,b){vg(Xc(["attempting to connect websocket"]));var c=new WebSocket(a);c.onerror=function(d){console.error(d);P.h(c.readyState,WebSocket.CLOSED)?(re(Dl,!1),d=re(Cl,null)):d=null;return d};if(x(c))return c.onmessage=El(b),re(Cl,c),re(Dl,!0),vg(Xc(["Websocket connection established with: ",a]));throw Error("Websocket connection failed!");};var Gl=xi(23,{});var Hl=qe(ie);function Il(a,b,c){var d=bk;bk=!0;try{Gl.render(a.I?a.I():a.call(null),b,function(){var e=bk;bk=!1;try{return se.K(Hl,U,b,a),mk.flush_after_render(),null!=c?c.I?c.I():c.call(null):null}finally{bk=e}})}finally{bk=d}}
function Jl(){var a=new V(null,4,5,X,[bi,new v(null,1,[si,new v(null,1,[am,20],null)],null),new V(null,5,5,X,[bi,new v(null,1,[si,new v(null,4,[Eh,Vl,li,"100%",cm,Yl,Xl,bm],null)],null),new V(null,1,5,X,[Kl],null),new V(null,1,5,X,[Ll],null),new V(null,3,5,X,[bi,new v(null,1,[si,new v(null,2,[Eh,Vl,dm,20],null)],null),new V(null,1,5,X,[em],null)],null)],null),new V(null,1,5,X,[Ml],null)],null),b=document.getElementById("app");Ik();var c=dd(Bl)?new V(null,2,5,X,[Bl,Bl],null):new V(null,2,5,X,[Bl,ti.g(Bl)],
null),d=T(c,0,null);c=T(c,1,null);Il(function(){return pk(d,dd(a)?a.I?a.I():a.call(null):a)},b,c)};var Nl=function Nl(a,b){return nd(a)?xe.h(a,function(){return function f(e){return new Md(null,function(){for(;;){var h=J(e);if(h){if(qd(h)){var k=Zb(h),l=R(k),m=new Od(Array(l));return function(){for(var r=0;;)if(r<l){var w=D(k,r),A=T(w,0,null),C=T(w,1,null);w=m;var E=X,M=A;A=a.g?a.g(A):a.call(null,A);A=Nl.h?Nl.h(A,C):Nl.call(null,A,C);w.add(new V(null,2,5,E,[M,A],null));r+=1}else return!0}()?Rd(m.Ra(),f($b(h))):Rd(m.Ra(),null)}var n=N(h),p=T(n,0,null),q=T(n,1,null);return Wc(new V(null,2,5,X,[p,
function(){var r=a.g?a.g(p):a.call(null,p),w=q;return Nl.h?Nl.h(r,w):Nl.call(null,r,w)}()],null),f(xc(h)))}return null}},null)}(b)}()):b},Ol=Bk.g(Zc),fm=Bk.g(1);
function Pl(a,b){x(G(Cl))&&P.h(G(Cl).readyState,WebSocket.OPEN)&&(vg(Xc(["Stopping chan"])),x(G(Cl))&&G(Cl).close(1E3,"Disconnected"),re(Dl,null));return Fl(["ws://localhost:",B.g(a),"/ws"].join(""),function(c){var d=x(b)?b:Hh,e=function(){switch(d instanceof I?d.Ba:null){case "json":return function(f){return JSON.parse(f)};default:return function(f){return Mj().read(f)}}}();console.log("Message:",e.g?e.g(c):e.call(null,c));return se.l(Ol,Yc,e.g?e.g(c):e.call(null,c))})}
var Fk=Bk.g(new v(null,1,[gh,Hh],null)),Ql=new Ek(new V(null,1,5,X,[gh],null));function Rl(a){return new V(null,3,5,X,[vh,new v(null,2,[ii,"port",si,new v(null,1,[yh,x(a)?mh:ai],null)],null),"Backend port: "],null)}
function Sl(){var a=Bk.g(!1),b=Bk.g(G(new Ek(new V(null,1,5,X,[zh],null)))),c=Bk.g(G(Ql));return function(){return new V(null,2,5,X,[qh,new v(null,7,[ki,zh,ci,G(b),Bh,zh,ri,uh,dh,function(d){re(b,d.target.value);return re(a,!1)},gi,function(d){d=d.target.value;return J(d)&&Oa(G(a))?(re(a,!0),Pl(d,G(c))):null},sh,function(d){var e=d.target.value;se.K(Fk,U,zh,e);return P.h(d.key,"Enter")?(d.preventDefault(),Pl(e,G(c)),re(a,!0)):null}],null)],null)}}
function Kl(){return new V(null,4,5,X,[Yh,new v(null,1,[si,new v(null,2,[Jh,10,Eh,ni],null)],null),new V(null,2,5,X,[Rl,G(Dl)],null),new V(null,1,5,X,[Sl],null)],null)}
function em(){return new V(null,4,5,X,[Ih,new V(null,3,5,X,[Wl,new v(null,2,[si,new v(null,1,[dm,10],null),$l,function(){return se.h(fm,function(a){var b=R(G(Ol));a+=1;return b<a?b:a})}],null),""],null),new V(null,3,5,X,[Wl,new v(null,1,[$l,function(){return se.h(fm,function(a){--a;return 1>a?1:a})}],null),""],null),new V(null,3,5,X,[Wl,new v(null,2,[si,new v(null,1,[Zl,10],null),$l,function(){return re(Ol,Zc)}],null),"\ud83d\uddd1"],null)],null)}
function Ll(){return new V(null,3,5,X,[bi,new v(null,1,[si,new v(null,1,[Eh,ni],null)],null),G(new Ek(new V(null,1,5,X,[gh],null)))],null)}var Tl=new v(null,4,[Uh,new v(null,4,[Zg,"png",ei,560,li,960,Wh,2],null),Ph,"hover",qi,!0,Kh,!1],null),ch,Vg=qe(ie),Wg=qe(ie),Xg=qe(ie),Yg=qe(ie),Ug=H.l(ie,Rh,Ig.I?Ig.I():Ig.call(null));ch=new Tg;bh($g,function(a){return ch.g(U.l(a,Zg,Hh))});
bh(Hh,function(a){a=fe(a);a=H.h(a,kh);return U.l(ye(ze.l(ye(a,new V(null,1,5,X,[si],null),new v(null,2,[li,"100%",ei,"100%"],null)),new V(null,1,5,X,[ji],null),function(b){return Nl(Tl,b)}),new V(null,2,5,X,[fh,pi],null),!0),Lh,!0)});bh(Mh,function(a){a=fe(a);a=H.h(a,kh);ra.Ed(a,"style",{width:"100%",height:"100%"});var b=Xi(Nl(Tl,Hi(a.config,Kd,Wi,null)));a.config=b;a.layout.autosize=!0;a.useResizeHandler=!0;return a});
function Ul(a,b){var c=function(){var e=new v(null,1,[fh,new v(null,1,[wh,"Loading Test"],null)],null);return P.h(b,Mh)?Xi(e):e}(),d=ch.g(new v(null,2,[kh,x(a)?a:c,gh,b],null));return new V(null,2,5,X,[Ih,new V(null,3,5,X,[bi,new v(null,1,[si,new v(null,2,[ei,"90vh",li,"100%"],null)],null),function(){switch(b instanceof I?b.Ba:null){case "json":return yi.createElement(zi.default,d);case "transit":return new V(null,3,5,X,[rh,zi.default,d],null);default:return new V(null,2,5,X,[bi,"Invalid message format"],
null)}}()],null)],null)}function Ml(){var a=X;a:{var b=G(fm),c=G(Ol),d=J(c);for(b=J(ve(b,c));;)if(b)d=O(d),b=O(b);else break a}return new V(null,3,5,a,[Ul,N(d),G(Ql)],null)};try{Pl(8987,Hh),Jl()}catch(a){throw console.error("An error occurred when calling (plotly-pyclj.server/main)"),a;};
}).call(this);
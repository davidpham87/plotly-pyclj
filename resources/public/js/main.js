var shadow$provide = {};
(function(){
shadow$provide[0]=function(xe,Df,jg,Nd){var b=Object.getOwnPropertySymbols,N=Object.prototype.hasOwnProperty,G=Object.prototype.propertyIsEnumerable;jg.exports=function(){try{if(!Object.assign)return!1;var p=new String("abc");p[5]="de";if("5"===Object.getOwnPropertyNames(p)[0])return!1;var n={};for(p=0;10>p;p++)n["_"+String.fromCharCode(p)]=p;if("0123456789"!==Object.getOwnPropertyNames(n).map(function(m){return n[m]}).join(""))return!1;var k={};"abcdefghijklmnopqrst".split("").forEach(function(m){k[m]=
m});return"abcdefghijklmnopqrst"!==Object.keys(Object.assign({},k)).join("")?!1:!0}catch(m){return!1}}()?Object.assign:function(p,n){if(null===p||void 0===p)throw new TypeError("Object.assign cannot be called with null or undefined");var k=Object(p);for(var m,a=1;a<arguments.length;a++){var g=Object(arguments[a]);for(var h in g)N.call(g,h)&&(k[h]=g[h]);if(b){m=b(g);for(var r=0;r<m.length;r++)G.call(g,m[r])&&(k[m[r]]=g[m[r]])}}return k}};
shadow$provide[1]=function(xe,Df,jg,Nd){function b(M){if(null===M||"object"!==typeof M)return null;M=A&&M[A]||M["@@iterator"];return"function"===typeof M?M:null}function N(M){for(var H="https://reactjs.org/docs/error-decoder.html?invariant\x3d"+M,O=1;O<arguments.length;O++)H+="\x26args[]\x3d"+encodeURIComponent(arguments[O]);return"Minified React error #"+M+"; visit "+H+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function G(M,H,
O){this.props=M;this.context=H;this.refs=C;this.updater=O||D}function p(){}function n(M,H,O){this.props=M;this.context=H;this.refs=C;this.updater=O||D}function k(M,H,O){var I,L={},Q=null,Z=null;if(null!=H)for(I in void 0!==H.ref&&(Z=H.ref),void 0!==H.key&&(Q=""+H.key),H)y.call(H,I)&&!F.hasOwnProperty(I)&&(L[I]=H[I]);var ba=arguments.length-2;if(1===ba)L.children=O;else if(1<ba){for(var V=Array(ba),S=0;S<ba;S++)V[S]=arguments[S+2];L.children=V}if(M&&M.defaultProps)for(I in ba=M.defaultProps,ba)void 0===
L[I]&&(L[I]=ba[I]);return{$$typeof:f,type:M,key:Q,ref:Z,props:L,_owner:v.current}}function m(M,H){return{$$typeof:f,type:M.type,key:H,ref:M.ref,props:M.props,_owner:M._owner}}function a(M){return"object"===typeof M&&null!==M&&M.$$typeof===f}function g(M){var H={"\x3d":"\x3d0",":":"\x3d2"};return"$"+M.replace(/[=:]/g,function(O){return H[O]})}function h(M,H){return"object"===typeof M&&null!==M&&null!=M.key?g(""+M.key):H.toString(36)}function r(M,H,O,I,L){var Q=typeof M;if("undefined"===Q||"boolean"===
Q)M=null;var Z=!1;if(null===M)Z=!0;else switch(Q){case "string":case "number":Z=!0;break;case "object":switch(M.$$typeof){case f:case q:Z=!0}}if(Z)return Z=M,L=L(Z),M=""===I?"."+h(Z,0):I,Array.isArray(L)?(O="",null!=M&&(O=M.replace(J,"$\x26/")+"/"),r(L,H,O,"",function(S){return S})):null!=L&&(a(L)&&(L=m(L,O+(!L.key||Z&&Z.key===L.key?"":(""+L.key).replace(J,"$\x26/")+"/")+M)),H.push(L)),1;Z=0;I=""===I?".":I+":";if(Array.isArray(M))for(var ba=0;ba<M.length;ba++){Q=M[ba];var V=I+h(Q,ba);Z+=r(Q,H,O,V,
L)}else if(V=b(M),"function"===typeof V)for(M=V.call(M),ba=0;!(Q=M.next()).done;)Q=Q.value,V=I+h(Q,ba++),Z+=r(Q,H,O,V,L);else if("object"===Q)throw H=""+M,Error(N(31,"[object Object]"===H?"object with keys {"+Object.keys(M).join(", ")+"}":H));return Z}function l(M,H,O){if(null==M)return M;var I=[],L=0;r(M,I,"","",function(Q){return H.call(O,Q,L++)});return I}function c(M){if(-1===M._status){var H=M._result;H=H();M._status=0;M._result=H;H.then(function(O){0===M._status&&(O=O.default,M._status=1,M._result=
O)},function(O){0===M._status&&(M._status=2,M._result=O)})}if(1===M._status)return M._result;throw M._result;}function d(){var M=K.current;if(null===M)throw Error(N(321));return M}var e=Df(0),f=60103,q=60106;Nd.Fragment=60107;Nd.StrictMode=60108;Nd.Profiler=60114;var t=60109,w=60110,x=60112;Nd.Suspense=60113;var z=60115,B=60116;"function"===typeof Symbol&&Symbol.for&&(xe=Symbol.for,f=xe("react.element"),q=xe("react.portal"),Nd.Fragment=xe("react.fragment"),Nd.StrictMode=xe("react.strict_mode"),Nd.Profiler=
xe("react.profiler"),t=xe("react.provider"),w=xe("react.context"),x=xe("react.forward_ref"),Nd.Suspense=xe("react.suspense"),z=xe("react.memo"),B=xe("react.lazy"));var A="function"===typeof Symbol&&Symbol.iterator,D={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},C={};G.prototype.isReactComponent={};G.prototype.setState=function(M,H){if("object"!==typeof M&&"function"!==typeof M&&null!=M)throw Error(N(85));this.updater.enqueueSetState(this,
M,H,"setState")};G.prototype.forceUpdate=function(M){this.updater.enqueueForceUpdate(this,M,"forceUpdate")};p.prototype=G.prototype;xe=n.prototype=new p;xe.constructor=n;e(xe,G.prototype);xe.isPureReactComponent=!0;var v={current:null},y=Object.prototype.hasOwnProperty,F={key:!0,ref:!0,__self:!0,__source:!0},J=/\/+/g,K={current:null};xe={ReactCurrentDispatcher:K,ReactCurrentBatchConfig:{transition:0},ReactCurrentOwner:v,IsSomeRendererActing:{current:!1},assign:e};Nd.Children={map:l,forEach:function(M,
H,O){l(M,function(){H.apply(this,arguments)},O)},count:function(M){var H=0;l(M,function(){H++});return H},toArray:function(M){return l(M,function(H){return H})||[]},only:function(M){if(!a(M))throw Error(N(143));return M}};Nd.Component=G;Nd.PureComponent=n;Nd.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=xe;Nd.cloneElement=function(M,H,O){if(null===M||void 0===M)throw Error(N(267,M));var I=e({},M.props),L=M.key,Q=M.ref,Z=M._owner;if(null!=H){void 0!==H.ref&&(Q=H.ref,Z=v.current);void 0!==H.key&&
(L=""+H.key);if(M.type&&M.type.defaultProps)var ba=M.type.defaultProps;for(V in H)y.call(H,V)&&!F.hasOwnProperty(V)&&(I[V]=void 0===H[V]&&void 0!==ba?ba[V]:H[V])}var V=arguments.length-2;if(1===V)I.children=O;else if(1<V){ba=Array(V);for(var S=0;S<V;S++)ba[S]=arguments[S+2];I.children=ba}return{$$typeof:f,type:M.type,key:L,ref:Q,props:I,_owner:Z}};Nd.createContext=function(M,H){void 0===H&&(H=null);M={$$typeof:w,_calculateChangedBits:H,_currentValue:M,_currentValue2:M,_threadCount:0,Provider:null,
Consumer:null};M.Provider={$$typeof:t,_context:M};return M.Consumer=M};Nd.createElement=k;Nd.createFactory=function(M){var H=k.bind(null,M);H.type=M;return H};Nd.createRef=function(){return{current:null}};Nd.forwardRef=function(M){return{$$typeof:x,render:M}};Nd.isValidElement=a;Nd.lazy=function(M){return{$$typeof:B,_payload:{_status:-1,_result:M},_init:c}};Nd.memo=function(M,H){return{$$typeof:z,type:M,compare:void 0===H?null:H}};Nd.useCallback=function(M,H){return d().useCallback(M,H)};Nd.useContext=
function(M,H){return d().useContext(M,H)};Nd.useDebugValue=function(){};Nd.useEffect=function(M,H){return d().useEffect(M,H)};Nd.useImperativeHandle=function(M,H,O){return d().useImperativeHandle(M,H,O)};Nd.useLayoutEffect=function(M,H){return d().useLayoutEffect(M,H)};Nd.useMemo=function(M,H){return d().useMemo(M,H)};Nd.useReducer=function(M,H,O){return d().useReducer(M,H,O)};Nd.useRef=function(M){return d().useRef(M)};Nd.useState=function(M){return d().useState(M)};Nd.version="17.0.2"};
shadow$provide[3]=function(xe,Df,jg,Nd){jg.exports=Df(1)};
shadow$provide[7]=function(xe,Df,jg,Nd){jg.exports="SECRET_DO_NOT_PASS_THIS_OR_YOU_WILL_BE_FIRED"};
shadow$provide[10]=function(xe,Df,jg,Nd){function b(){}function N(){}var G=Df(7);N.resetWarningCache=b;jg.exports=function(){function p(m,a,g,h,r,l){if(l!==G)throw m=Error("Calling PropTypes validators directly is not supported by the `prop-types` package. Use PropTypes.checkPropTypes() to call them. Read more at http://fb.me/use-check-prop-types"),m.name="Invariant Violation",m;}function n(){return p}p.isRequired=p;var k={array:p,bool:p,func:p,number:p,object:p,string:p,symbol:p,any:p,arrayOf:n,
element:p,elementType:p,instanceOf:n,node:p,objectOf:n,oneOf:n,oneOfType:n,shape:n,exact:n,checkPropTypes:N,resetWarningCache:b};return k.PropTypes=k}};
shadow$provide[11]=function(xe,Df,jg,Nd){jg.exports=Df(10)()};
shadow$provide[12]=function(xe,Df,jg,Nd){function b(f){"@babel/helpers - typeof";b="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function(q){return typeof q}:function(q){return q&&"function"===typeof Symbol&&q.constructor===Symbol&&q!==Symbol.prototype?"symbol":typeof q};return b(f)}function N(){if("function"!==typeof WeakMap)return null;var f=new WeakMap;N=function(){return f};return f}function G(f,q){for(var t=0;t<q.length;t++){var w=q[t];w.enumerable=w.enumerable||!1;w.configurable=
!0;"value"in w&&(w.writable=!0);Object.defineProperty(f,w.key,w)}}function p(f,q,t){q&&G(f.prototype,q);t&&G(f,t);return f}function n(f,q){if("function"!==typeof q&&null!==q)throw new TypeError("Super expression must either be null or a function");f.prototype=Object.create(q&&q.prototype,{constructor:{value:f,writable:!0,configurable:!0}});q&&k(f,q)}function k(f,q){k=Object.setPrototypeOf||function(t,w){t.__proto__=w;return t};return k(f,q)}function m(f){var q=g();return function(){var t=h(f);if(q){var w=
h(this).constructor;t=Reflect.construct(t,arguments,w)}else t=t.apply(this,arguments);t=!t||"object"!==b(t)&&"function"!==typeof t?a(this):t;return t}}function a(f){if(void 0===f)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return f}function g(){if("undefined"===typeof Reflect||!Reflect.construct||Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),!0}catch(f){return!1}}
function h(f){h=Object.setPrototypeOf?Object.getPrototypeOf:function(q){return q.__proto__||Object.getPrototypeOf(q)};return h(f)}Object.defineProperty(Nd,"__esModule",{value:!0});Nd["default"]=function(f){var q=function(t){function w(z){if(!(this instanceof w))throw new TypeError("Cannot call a class as a function");z=x.call(this,z);z.p=Promise.resolve();z.resizeHandler=null;z.handlers={};z.syncWindowResize=z.syncWindowResize.bind(a(z));z.syncEventHandlers=z.syncEventHandlers.bind(a(z));z.attachUpdateEvents=
z.attachUpdateEvents.bind(a(z));z.getRef=z.getRef.bind(a(z));z.handleUpdate=z.handleUpdate.bind(a(z));z.figureCallback=z.figureCallback.bind(a(z));z.updatePlotly=z.updatePlotly.bind(a(z));return z}n(w,t);var x=m(w);p(w,[{key:"updatePlotly",value:function(z,B,A){var D=this;this.p=this.p.then(function(){if(!D.unmounting){if(!D.el)throw Error("Missing element reference");return f.react(D.el,{data:D.props.data,layout:D.props.layout,config:D.props.config,frames:D.props.frames})}}).then(function(){D.unmounting||
(D.syncWindowResize(z),D.syncEventHandlers(),D.figureCallback(B),A&&D.attachUpdateEvents())})["catch"](function(C){if(D.props.onError)D.props.onError(C)})}},{key:"componentDidMount",value:function(){this.unmounting=!1;this.updatePlotly(!0,this.props.onInitialized,!0)}},{key:"componentDidUpdate",value:function(z){this.unmounting=!1;var B=z.frames&&z.frames.length?z.frames.length:0,A=this.props.frames&&this.props.frames.length?this.props.frames.length:0,D=void 0!==z.revision,C=z.revision!==this.props.revision;
(z.layout!==this.props.layout||z.data!==this.props.data||z.config!==this.props.config||A!==B||D&&(!D||C))&&this.updatePlotly(!1,this.props.onUpdate,!1)}},{key:"componentWillUnmount",value:function(){this.unmounting=!0;this.figureCallback(this.props.onPurge);this.resizeHandler&&e&&(window.removeEventListener("resize",this.resizeHandler),this.resizeHandler=null);this.removeUpdateEvents();f.purge(this.el)}},{key:"attachUpdateEvents",value:function(){var z=this;this.el&&this.el.removeListener&&d.forEach(function(B){z.el.on(B,
z.handleUpdate)})}},{key:"removeUpdateEvents",value:function(){var z=this;this.el&&this.el.removeListener&&d.forEach(function(B){z.el.removeListener(B,z.handleUpdate)})}},{key:"handleUpdate",value:function(){this.figureCallback(this.props.onUpdate)}},{key:"figureCallback",value:function(z){if("function"===typeof z){var B=this.el;z({data:B.data,layout:B.layout,frames:this.el._transitionData?this.el._transitionData._frames:null},this.el)}}},{key:"syncWindowResize",value:function(z){var B=this;e&&(this.props.useResizeHandler&&
!this.resizeHandler?(this.resizeHandler=function(){return f.Plots.resize(B.el)},window.addEventListener("resize",this.resizeHandler),z&&this.resizeHandler()):!this.props.useResizeHandler&&this.resizeHandler&&(window.removeEventListener("resize",this.resizeHandler),this.resizeHandler=null))}},{key:"getRef",value:function(z){this.el=z;this.props.debug&&e&&(window.gd=this.el)}},{key:"syncEventHandlers",value:function(){var z=this;c.forEach(function(B){var A=z.props["on"+B],D=z.handlers[B],C=!!D;A&&!C?
z.addEventHandler(B,A):!A&&C?z.removeEventHandler(B):A&&C&&A!==D&&(z.removeEventHandler(B),z.addEventHandler(B,A))})}},{key:"addEventHandler",value:function(z,B){this.handlers[z]=B;this.el.on(this.getPlotlyEventName(z),this.handlers[z])}},{key:"removeEventHandler",value:function(z){this.el.removeListener(this.getPlotlyEventName(z),this.handlers[z]);delete this.handlers[z]}},{key:"getPlotlyEventName",value:function(z){return"plotly_"+z.toLowerCase()}},{key:"render",value:function(){return r["default"].createElement("div",
{id:this.props.divId,style:this.props.style,ref:this.getRef,className:this.props.className})}}]);return w}(r.Component);q.propTypes={data:l["default"].arrayOf(l["default"].object),config:l["default"].object,layout:l["default"].object,frames:l["default"].arrayOf(l["default"].object),revision:l["default"].number,onInitialized:l["default"].func,onPurge:l["default"].func,onError:l["default"].func,onUpdate:l["default"].func,debug:l["default"].bool,style:l["default"].object,className:l["default"].string,
useResizeHandler:l["default"].bool,divId:l["default"].string};c.forEach(function(t){q.propTypes["on"+t]=l["default"].func});q.defaultProps={debug:!1,useResizeHandler:!1,data:[],style:{position:"relative",display:"inline-block"}};return q};var r=function(f){if(f&&f.__esModule)return f;if(null===f||"object"!==b(f)&&"function"!==typeof f)return{"default":f};var q=N();if(q&&q.has(f))return q.get(f);var t={},w=Object.defineProperty&&Object.getOwnPropertyDescriptor,x;for(x in f)if(Object.prototype.hasOwnProperty.call(f,
x)){var z=w?Object.getOwnPropertyDescriptor(f,x):null;z&&(z.get||z.set)?Object.defineProperty(t,x,z):t[x]=f[x]}t["default"]=f;q&&q.set(f,t);return t}(Df(3)),l=function(f){return f&&f.__esModule?f:{"default":f}}(Df(11)),c="AfterExport AfterPlot Animated AnimatingFrame AnimationInterrupted AutoSize BeforeExport BeforeHover ButtonClicked Click ClickAnnotation Deselect DoubleClick Framework Hover LegendClick LegendDoubleClick Relayout Relayouting Restyle Redraw Selected Selecting SliderChange SliderEnd SliderStart SunburstClick Transitioning TransitionInterrupted Unhover".split(" "),
d="plotly_restyle plotly_redraw plotly_relayout plotly_relayouting plotly_doubleclick plotly_animated plotly_sunburstclick".split(" "),e="undefined"!==typeof window};
shadow$provide[13]=function(xe,Df,jg,Nd){(function(b){"object"===typeof Nd&&"undefined"!==typeof jg?jg.exports=b():"function"===typeof define&&define.amd?define([],b):("undefined"!==typeof window?window:"undefined"!==typeof xe?xe:"undefined"!==typeof self?self:this).Plotly=b()})(function(){return function(){function b(N,G,p){function n(a,g){if(!G[a]){if(!N[a]){var h="function"==typeof Df&&Df;if(!g&&h)return h(a,!0);if(k)return k(a,!0);g=Error("Cannot find module '"+a+"'");throw g.code="MODULE_NOT_FOUND",
g;}g=G[a]={exports:{}};N[a][0].call(g.exports,function(r){return n(N[a][1][r]||r)},g,g.exports,b,N,G,p)}return G[a].exports}for(var k="function"==typeof Df&&Df,m=0;m<p.length;m++)n(p[m]);return n}return b}()({1:[function(b,N,G){b=b("../src/lib");N={"X,X div":'direction:ltr;font-family:"Open Sans",verdana,arial,sans-serif;margin:0;padding:0;',"X input,X button":'font-family:"Open Sans",verdana,arial,sans-serif;',"X input:focus,X button:focus":"outline:none;","X a":"text-decoration:none;","X a:hover":"text-decoration:none;",
"X .crisp":"shape-rendering:crispEdges;","X .user-select-none":"-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;-o-user-select:none;user-select:none;","X svg":"overflow:hidden;","X svg a":"fill:#447adb;","X svg a:hover":"fill:#3c6dc5;","X .main-svg":"position:absolute;top:0;left:0;pointer-events:none;","X .main-svg .draglayer":"pointer-events:all;","X .cursor-default":"cursor:default;","X .cursor-pointer":"cursor:pointer;","X .cursor-crosshair":"cursor:crosshair;","X .cursor-move":"cursor:move;",
"X .cursor-col-resize":"cursor:col-resize;","X .cursor-row-resize":"cursor:row-resize;","X .cursor-ns-resize":"cursor:ns-resize;","X .cursor-ew-resize":"cursor:ew-resize;","X .cursor-sw-resize":"cursor:sw-resize;","X .cursor-s-resize":"cursor:s-resize;","X .cursor-se-resize":"cursor:se-resize;","X .cursor-w-resize":"cursor:w-resize;","X .cursor-e-resize":"cursor:e-resize;","X .cursor-nw-resize":"cursor:nw-resize;","X .cursor-n-resize":"cursor:n-resize;","X .cursor-ne-resize":"cursor:ne-resize;","X .cursor-grab":"cursor:-webkit-grab;cursor:grab;",
"X .modebar":"position:absolute;top:2px;right:2px;","X .ease-bg":"-webkit-transition:background-color .3s ease 0s;-moz-transition:background-color .3s ease 0s;-ms-transition:background-color .3s ease 0s;-o-transition:background-color .3s ease 0s;transition:background-color .3s ease 0s;","X .modebar--hover\x3e:not(.watermark)":"opacity:0;-webkit-transition:opacity .3s ease 0s;-moz-transition:opacity .3s ease 0s;-ms-transition:opacity .3s ease 0s;-o-transition:opacity .3s ease 0s;transition:opacity .3s ease 0s;",
"X:hover .modebar--hover .modebar-group":"opacity:1;","X .modebar-group":"float:left;display:inline-block;box-sizing:border-box;padding-left:8px;position:relative;vertical-align:middle;white-space:nowrap;","X .modebar-btn":"position:relative;font-size:16px;padding:3px 4px;height:22px;cursor:pointer;line-height:normal;box-sizing:border-box;","X .modebar-btn svg":"position:relative;top:2px;","X .modebar.vertical":"display:flex;flex-direction:column;flex-wrap:wrap;align-content:flex-end;max-height:100%;",
"X .modebar.vertical svg":"top:-1px;","X .modebar.vertical .modebar-group":"display:block;float:none;padding-left:0px;padding-bottom:8px;","X .modebar.vertical .modebar-group .modebar-btn":"display:block;text-align:center;","X [data-title]:before,X [data-title]:after":"position:absolute;-webkit-transform:translate3d(0, 0, 0);-moz-transform:translate3d(0, 0, 0);-ms-transform:translate3d(0, 0, 0);-o-transform:translate3d(0, 0, 0);transform:translate3d(0, 0, 0);display:none;opacity:0;z-index:1001;pointer-events:none;top:110%;right:50%;",
"X [data-title]:hover:before,X [data-title]:hover:after":"display:block;opacity:1;","X [data-title]:before":'content:"";position:absolute;background:transparent;border:6px solid transparent;z-index:1002;margin-top:-12px;border-bottom-color:#69738a;margin-right:-6px;',"X [data-title]:after":"content:attr(data-title);background:#69738a;color:#fff;padding:8px 10px;font-size:12px;line-height:12px;white-space:nowrap;margin-right:-18px;border-radius:2px;","X .vertical [data-title]:before,X .vertical [data-title]:after":"top:0%;right:200%;",
"X .vertical [data-title]:before":"border:6px solid transparent;border-left-color:#69738a;margin-top:8px;margin-right:-30px;","X .select-outline":"fill:none;stroke-width:1;shape-rendering:crispEdges;","X .select-outline-1":"stroke:#fff;","X .select-outline-2":"stroke:#000;stroke-dasharray:2px 2px;",Y:'font-family:"Open Sans",verdana,arial,sans-serif;position:fixed;top:50px;right:20px;z-index:10000;font-size:10pt;max-width:180px;',"Y p":"margin:0;","Y .notifier-note":"min-width:180px;max-width:250px;border:1px solid #fff;z-index:3000;margin:0;background-color:#8c97af;background-color:rgba(140,151,175,.9);color:#fff;padding:10px;overflow-wrap:break-word;word-wrap:break-word;-ms-hyphens:auto;-webkit-hyphens:auto;hyphens:auto;",
"Y .notifier-close":"color:#fff;opacity:.8;float:right;padding:0 5px;background:none;border:none;font-size:20px;font-weight:bold;line-height:20px;","Y .notifier-close:hover":"color:#444;text-decoration:none;cursor:pointer;"};for(var p in N)G=p.replace(/^,/," ,").replace(/X/g,".js-plotly-plot .plotly").replace(/Y/g,".plotly-notifier"),b.addStyleRule(G,N[p])},{"../src/lib":803}],2:[function(b,N,G){N.exports=b("../src/transforms/aggregate")},{"../src/transforms/aggregate":1399}],3:[function(b,N,G){N.exports=
b("../src/traces/bar")},{"../src/traces/bar":949}],4:[function(b,N,G){N.exports=b("../src/traces/barpolar")},{"../src/traces/barpolar":962}],5:[function(b,N,G){N.exports=b("../src/traces/box")},{"../src/traces/box":972}],6:[function(b,N,G){N.exports=b("../src/components/calendars")},{"../src/components/calendars":664}],7:[function(b,N,G){N.exports=b("../src/traces/candlestick")},{"../src/traces/candlestick":981}],8:[function(b,N,G){N.exports=b("../src/traces/carpet")},{"../src/traces/carpet":1E3}],
9:[function(b,N,G){N.exports=b("../src/traces/choropleth")},{"../src/traces/choropleth":1014}],10:[function(b,N,G){N.exports=b("../src/traces/choroplethmapbox")},{"../src/traces/choroplethmapbox":1021}],11:[function(b,N,G){N.exports=b("../src/traces/cone")},{"../src/traces/cone":1027}],12:[function(b,N,G){N.exports=b("../src/traces/contour")},{"../src/traces/contour":1042}],13:[function(b,N,G){N.exports=b("../src/traces/contourcarpet")},{"../src/traces/contourcarpet":1053}],14:[function(b,N,G){N.exports=
b("../src/core")},{"../src/core":781}],15:[function(b,N,G){N.exports=b("../src/traces/densitymapbox")},{"../src/traces/densitymapbox":1061}],16:[function(b,N,G){N.exports=b("../src/transforms/filter")},{"../src/transforms/filter":1400}],17:[function(b,N,G){N.exports=b("../src/traces/funnel")},{"../src/traces/funnel":1071}],18:[function(b,N,G){N.exports=b("../src/traces/funnelarea")},{"../src/traces/funnelarea":1080}],19:[function(b,N,G){N.exports=b("../src/transforms/groupby")},{"../src/transforms/groupby":1401}],
20:[function(b,N,G){N.exports=b("../src/traces/heatmap")},{"../src/traces/heatmap":1093}],21:[function(b,N,G){N.exports=b("../src/traces/heatmapgl")},{"../src/traces/heatmapgl":1103}],22:[function(b,N,G){N.exports=b("../src/traces/histogram")},{"../src/traces/histogram":1115}],23:[function(b,N,G){N.exports=b("../src/traces/histogram2d")},{"../src/traces/histogram2d":1121}],24:[function(b,N,G){N.exports=b("../src/traces/histogram2dcontour")},{"../src/traces/histogram2dcontour":1125}],25:[function(b,
N,G){N.exports=b("../src/traces/icicle")},{"../src/traces/icicle":1131}],26:[function(b,N,G){N.exports=b("../src/traces/image")},{"../src/traces/image":1144}],27:[function(b,N,G){G=b("./core");G.register([b("./bar"),b("./box"),b("./heatmap"),b("./histogram"),b("./histogram2d"),b("./histogram2dcontour"),b("./contour"),b("./scatterternary"),b("./violin"),b("./funnel"),b("./waterfall"),b("./image"),b("./pie"),b("./sunburst"),b("./treemap"),b("./icicle"),b("./funnelarea"),b("./scatter3d"),b("./surface"),
b("./isosurface"),b("./volume"),b("./mesh3d"),b("./cone"),b("./streamtube"),b("./scattergeo"),b("./choropleth"),b("./scattergl"),b("./splom"),b("./pointcloud"),b("./heatmapgl"),b("./parcoords"),b("./parcats"),b("./scattermapbox"),b("./choroplethmapbox"),b("./densitymapbox"),b("./sankey"),b("./indicator"),b("./table"),b("./carpet"),b("./scattercarpet"),b("./contourcarpet"),b("./ohlc"),b("./candlestick"),b("./scatterpolar"),b("./scatterpolargl"),b("./barpolar"),b("./aggregate"),b("./filter"),b("./groupby"),
b("./sort"),b("./calendars")]);N.exports=G},{"./aggregate":2,"./bar":3,"./barpolar":4,"./box":5,"./calendars":6,"./candlestick":7,"./carpet":8,"./choropleth":9,"./choroplethmapbox":10,"./cone":11,"./contour":12,"./contourcarpet":13,"./core":14,"./densitymapbox":15,"./filter":16,"./funnel":17,"./funnelarea":18,"./groupby":19,"./heatmap":20,"./heatmapgl":21,"./histogram":22,"./histogram2d":23,"./histogram2dcontour":24,"./icicle":25,"./image":26,"./indicator":28,"./isosurface":29,"./mesh3d":30,"./ohlc":31,
"./parcats":32,"./parcoords":33,"./pie":34,"./pointcloud":35,"./sankey":36,"./scatter3d":37,"./scattercarpet":38,"./scattergeo":39,"./scattergl":40,"./scattermapbox":41,"./scatterpolar":42,"./scatterpolargl":43,"./scatterternary":44,"./sort":45,"./splom":46,"./streamtube":47,"./sunburst":48,"./surface":49,"./table":50,"./treemap":51,"./violin":52,"./volume":53,"./waterfall":54}],28:[function(b,N,G){N.exports=b("../src/traces/indicator")},{"../src/traces/indicator":1152}],29:[function(b,N,G){N.exports=
b("../src/traces/isosurface")},{"../src/traces/isosurface":1158}],30:[function(b,N,G){N.exports=b("../src/traces/mesh3d")},{"../src/traces/mesh3d":1163}],31:[function(b,N,G){N.exports=b("../src/traces/ohlc")},{"../src/traces/ohlc":1168}],32:[function(b,N,G){N.exports=b("../src/traces/parcats")},{"../src/traces/parcats":1177}],33:[function(b,N,G){N.exports=b("../src/traces/parcoords")},{"../src/traces/parcoords":1187}],34:[function(b,N,G){N.exports=b("../src/traces/pie")},{"../src/traces/pie":1198}],
35:[function(b,N,G){N.exports=b("../src/traces/pointcloud")},{"../src/traces/pointcloud":1207}],36:[function(b,N,G){N.exports=b("../src/traces/sankey")},{"../src/traces/sankey":1213}],37:[function(b,N,G){N.exports=b("../src/traces/scatter3d")},{"../src/traces/scatter3d":1251}],38:[function(b,N,G){N.exports=b("../src/traces/scattercarpet")},{"../src/traces/scattercarpet":1258}],39:[function(b,N,G){N.exports=b("../src/traces/scattergeo")},{"../src/traces/scattergeo":1266}],40:[function(b,N,G){N.exports=
b("../src/traces/scattergl")},{"../src/traces/scattergl":1279}],41:[function(b,N,G){N.exports=b("../src/traces/scattermapbox")},{"../src/traces/scattermapbox":1289}],42:[function(b,N,G){N.exports=b("../src/traces/scatterpolar")},{"../src/traces/scatterpolar":1297}],43:[function(b,N,G){N.exports=b("../src/traces/scatterpolargl")},{"../src/traces/scatterpolargl":1304}],44:[function(b,N,G){N.exports=b("../src/traces/scatterternary")},{"../src/traces/scatterternary":1312}],45:[function(b,N,G){N.exports=
b("../src/transforms/sort")},{"../src/transforms/sort":1403}],46:[function(b,N,G){N.exports=b("../src/traces/splom")},{"../src/traces/splom":1321}],47:[function(b,N,G){N.exports=b("../src/traces/streamtube")},{"../src/traces/streamtube":1329}],48:[function(b,N,G){N.exports=b("../src/traces/sunburst")},{"../src/traces/sunburst":1337}],49:[function(b,N,G){N.exports=b("../src/traces/surface")},{"../src/traces/surface":1346}],50:[function(b,N,G){N.exports=b("../src/traces/table")},{"../src/traces/table":1354}],
51:[function(b,N,G){N.exports=b("../src/traces/treemap")},{"../src/traces/treemap":1365}],52:[function(b,N,G){N.exports=b("../src/traces/violin")},{"../src/traces/violin":1378}],53:[function(b,N,G){N.exports=b("../src/traces/volume")},{"../src/traces/volume":1386}],54:[function(b,N,G){N.exports=b("../src/traces/waterfall")},{"../src/traces/waterfall":1394}],55:[function(b,N,G){function p(g,h){this._controllerNames=Object.keys(g);this._controllerList=this._controllerNames.map(function(r){return g[r]});
this._mode=h;this._active=g[h];this._active||(this._mode="turntable",this._active=g.turntable);this.modes=this._controllerNames;this.computedMatrix=this._active.computedMatrix;this.computedEye=this._active.computedEye;this.computedUp=this._active.computedUp;this.computedCenter=this._active.computedCenter;this.computedRadius=this._active.computedRadius}N.exports=function(g){g=g||{};var h=g.eye||[0,0,1],r=g.center||[0,0,0],l=g.up||[0,1,0],c=g.distanceLimits||[0,Infinity];g=g.mode||"turntable";var d=
n(),e=k(),f=m();d.setDistanceLimits(c[0],c[1]);d.lookAt(0,h,r,l);e.setDistanceLimits(c[0],c[1]);e.lookAt(0,h,r,l);f.setDistanceLimits(c[0],c[1]);f.lookAt(0,h,r,l);return new p({turntable:d,orbit:e,matrix:f},g)};var n=b("turntable-camera-controller"),k=b("orbit-camera-controller"),m=b("matrix-camera-controller"),a=p.prototype;[["flush",1],["idle",1],["lookAt",4],["rotate",4],["pan",4],["translate",4],["setMatrix",2],["setDistanceLimits",2],["setDistance",2]].forEach(function(g){for(var h=g[0],r=[],
l=0;l<g[1];++l)r.push("a"+l);g="var cc\x3dthis._controllerList;for(var i\x3d0;i\x3ccc.length;++i){cc[i]."+g[0]+"("+r.join()+")}";a[h]=Function.apply(null,r.concat(g))});a.recalcMatrix=function(g){this._active.recalcMatrix(g)};a.getDistance=function(g){return this._active.getDistance(g)};a.getDistanceLimits=function(g){return this._active.getDistanceLimits(g)};a.lastT=function(){return this._active.lastT()};a.setMode=function(g){if(g!==this._mode){var h=this._controllerNames.indexOf(g);if(!(0>h)){var r=
this._active;h=this._controllerList[h];var l=Math.max(r.lastT(),h.lastT());r.recalcMatrix(l);h.setMatrix(l,r.computedMatrix);this._active=h;this._mode=g;this.computedMatrix=this._active.computedMatrix;this.computedEye=this._active.computedEye;this.computedUp=this._active.computedUp;this.computedCenter=this._active.computedCenter;this.computedRadius=this._active.computedRadius}}};a.getMode=function(){return this._mode}},{"matrix-camera-controller":468,"orbit-camera-controller":489,"turntable-camera-controller":603}],
56:[function(b,N,G){(function(p,n){"object"===typeof G&&"undefined"!==typeof N?n(G,b("d3-array"),b("d3-collection"),b("d3-shape"),b("elementary-circuits-directed-graph")):n(p.d3=p.d3||{},p.d3,p.d3,p.d3,null)})(this,function(p,n,k,m,a){function g(ma){return ma.target.depth}function h(ma,ia){return ma.sourceLinks.length?ma.depth:ia-1}function r(ma){return function(){return ma}}function l(ma,ia){return d(ma.source,ia.source)||ma.index-ia.index}function c(ma,ia){return d(ma.target,ia.target)||ma.index-
ia.index}function d(ma,ia){return ma.partOfCycle===ia.partOfCycle?ma.y0-ia.y0:"top"===ma.circularLinkType||"bottom"===ia.circularLinkType?-1:1}function e(ma){return ma.value}function f(ma){return(ma.y0+ma.y1)/2}function q(ma){return f(ma.source)}function t(ma){return f(ma.target)}function w(ma){return ma.index}function x(ma){return ma.nodes}function z(ma){return ma.links}function B(ma,ia){ma=ma.get(ia);if(!ma)throw Error("missing: "+ia);return ma}function A(ma,ia,ra){var wa=0;if(null===ra){var pa=
[];for(ia=0;ia<ma.links.length;ia++){var la=ma.links[ia],ka=la.source.index;la=la.target.index;pa[ka]||(pa[ka]=[]);pa[la]||(pa[la]=[]);-1===pa[ka].indexOf(la)&&pa[ka].push(la)}pa=a(pa);pa.sort(function(oa,sa){return oa.length-sa.length});var na={};for(ia=0;ia<pa.length;ia++)ka=pa[ia].slice(-2),na[ka[0]]||(na[ka[0]]={}),na[ka[0]][ka[1]]=!0;ma.links.forEach(function(oa){var sa=oa.target.index,za=oa.source.index;sa===za||na[za]&&na[za][sa]?(oa.circular=!0,oa.circularLinkID=wa,wa+=1):oa.circular=!1})}else ma.links.forEach(function(oa){oa.source[ra]<
oa.target[ra]?oa.circular=!1:(oa.circular=!0,oa.circularLinkID=wa,wa+=1)})}function D(ma,ia){var ra=0,wa=0;ma.links.forEach(function(pa){pa.circular&&(pa.circularLinkType=pa.source.circularLinkType||pa.target.circularLinkType?pa.source.circularLinkType?pa.source.circularLinkType:pa.target.circularLinkType:ra<wa?"top":"bottom","top"==pa.circularLinkType?ra+=1:wa+=1,ma.nodes.forEach(function(la){if(ia(la)==ia(pa.source)||ia(la)==ia(pa.target))la.circularLinkType=pa.circularLinkType}))});ma.links.forEach(function(pa){pa.circular&&
(pa.source.circularLinkType==pa.target.circularLinkType&&(pa.circularLinkType=pa.source.circularLinkType),W(pa,ia)&&(pa.circularLinkType=pa.source.circularLinkType))})}function C(ma){return Math.atan(Math.abs(ma.target.x0-ma.source.x1)/Math.abs(ma.y1-ma.y0))}function v(ma,ia){var ra=0;ma.sourceLinks.forEach(function(pa){ra=pa.circular&&!W(pa,ia)?ra+1:ra});var wa=0;ma.targetLinks.forEach(function(pa){wa=pa.circular&&!W(pa,ia)?wa+1:wa});return ra+wa}function y(ma){var ia=0;ma.source.sourceLinks.forEach(function(wa){ia=
wa.circular?ia+1:ia});var ra=0;ma.target.targetLinks.forEach(function(wa){ra=wa.circular?ra+1:ra});return 1<ia||1<ra?!1:!0}function F(ma,ia,ra){ma.sort(K);ma.forEach(function(wa,pa){var la=0;if(!W(wa,ra)||!y(wa)){var ka=0;for(ka;ka<pa;ka++){var na=ma[pa];var oa=ma[ka];na=na.source.column<oa.target.column?!1:na.target.column>oa.source.column?!1:!0;na&&(na=ma[ka].circularPathData.verticalBuffer+ma[ka].width/2+ia,la=na>la?na:la)}}wa.circularPathData.verticalBuffer=la+wa.width/2});return ma}function J(ma,
ia,ra,wa){var pa=n.min(ma.links,function(ka){return ka.source.y0});ma.links.forEach(function(ka){ka.circular&&(ka.circularPathData={})});var la=ma.links.filter(function(ka){return"top"==ka.circularLinkType});F(la,ia,wa);la=ma.links.filter(function(ka){return"bottom"==ka.circularLinkType});F(la,ia,wa);ma.links.forEach(function(ka){if(ka.circular){ka.circularPathData.arcRadius=ka.width+10;ka.circularPathData.leftNodeBuffer=5;ka.circularPathData.rightNodeBuffer=5;ka.circularPathData.sourceWidth=ka.source.x1-
ka.source.x0;ka.circularPathData.sourceX=ka.source.x0+ka.circularPathData.sourceWidth;ka.circularPathData.targetX=ka.target.x0;ka.circularPathData.sourceY=ka.y0;ka.circularPathData.targetY=ka.y1;if(W(ka,wa)&&y(ka))ka.circularPathData.leftSmallArcRadius=10+ka.width/2,ka.circularPathData.leftLargeArcRadius=10+ka.width/2,ka.circularPathData.rightSmallArcRadius=10+ka.width/2,ka.circularPathData.rightLargeArcRadius=10+ka.width/2,"bottom"==ka.circularLinkType?(ka.circularPathData.verticalFullExtent=ka.source.y1+
25+ka.circularPathData.verticalBuffer,ka.circularPathData.verticalLeftInnerExtent=ka.circularPathData.verticalFullExtent-ka.circularPathData.leftLargeArcRadius,ka.circularPathData.verticalRightInnerExtent=ka.circularPathData.verticalFullExtent-ka.circularPathData.rightLargeArcRadius):(ka.circularPathData.verticalFullExtent=ka.source.y0-25-ka.circularPathData.verticalBuffer,ka.circularPathData.verticalLeftInnerExtent=ka.circularPathData.verticalFullExtent+ka.circularPathData.leftLargeArcRadius,ka.circularPathData.verticalRightInnerExtent=
ka.circularPathData.verticalFullExtent+ka.circularPathData.rightLargeArcRadius);else{var na=ka.source.column,oa=ka.circularLinkType,sa=ma.links.filter(function(Ha){return Ha.source.column==na&&Ha.circularLinkType==oa});"bottom"==ka.circularLinkType?sa.sort(H):sa.sort(M);var za=0;sa.forEach(function(Ha,Wa){Ha.circularLinkID==ka.circularLinkID&&(ka.circularPathData.leftSmallArcRadius=10+ka.width/2+za,ka.circularPathData.leftLargeArcRadius=10+ka.width/2+Wa*ia+za);za+=Ha.width});na=ka.target.column;sa=
ma.links.filter(function(Ha){return Ha.target.column==na&&Ha.circularLinkType==oa});"bottom"==ka.circularLinkType?sa.sort(I):sa.sort(O);za=0;sa.forEach(function(Ha,Wa){Ha.circularLinkID==ka.circularLinkID&&(ka.circularPathData.rightSmallArcRadius=10+ka.width/2+za,ka.circularPathData.rightLargeArcRadius=10+ka.width/2+Wa*ia+za);za+=Ha.width});"bottom"==ka.circularLinkType?(ka.circularPathData.verticalFullExtent=Math.max(ra,ka.source.y1,ka.target.y1)+25+ka.circularPathData.verticalBuffer,ka.circularPathData.verticalLeftInnerExtent=
ka.circularPathData.verticalFullExtent-ka.circularPathData.leftLargeArcRadius,ka.circularPathData.verticalRightInnerExtent=ka.circularPathData.verticalFullExtent-ka.circularPathData.rightLargeArcRadius):(ka.circularPathData.verticalFullExtent=pa-25-ka.circularPathData.verticalBuffer,ka.circularPathData.verticalLeftInnerExtent=ka.circularPathData.verticalFullExtent+ka.circularPathData.leftLargeArcRadius,ka.circularPathData.verticalRightInnerExtent=ka.circularPathData.verticalFullExtent+ka.circularPathData.rightLargeArcRadius)}ka.circularPathData.leftInnerExtent=
ka.circularPathData.sourceX+ka.circularPathData.leftNodeBuffer;ka.circularPathData.rightInnerExtent=ka.circularPathData.targetX-ka.circularPathData.rightNodeBuffer;ka.circularPathData.leftFullExtent=ka.circularPathData.sourceX+ka.circularPathData.leftLargeArcRadius+ka.circularPathData.leftNodeBuffer;ka.circularPathData.rightFullExtent=ka.circularPathData.targetX-ka.circularPathData.rightLargeArcRadius-ka.circularPathData.rightNodeBuffer}ka.circular?ka.path="top"==ka.circularLinkType?"M"+ka.circularPathData.sourceX+
" "+ka.circularPathData.sourceY+" L"+ka.circularPathData.leftInnerExtent+" "+ka.circularPathData.sourceY+" A"+ka.circularPathData.leftLargeArcRadius+" "+ka.circularPathData.leftSmallArcRadius+" 0 0 0 "+ka.circularPathData.leftFullExtent+" "+(ka.circularPathData.sourceY-ka.circularPathData.leftSmallArcRadius)+" L"+ka.circularPathData.leftFullExtent+" "+ka.circularPathData.verticalLeftInnerExtent+" A"+ka.circularPathData.leftLargeArcRadius+" "+ka.circularPathData.leftLargeArcRadius+" 0 0 0 "+ka.circularPathData.leftInnerExtent+
" "+ka.circularPathData.verticalFullExtent+" L"+ka.circularPathData.rightInnerExtent+" "+ka.circularPathData.verticalFullExtent+" A"+ka.circularPathData.rightLargeArcRadius+" "+ka.circularPathData.rightLargeArcRadius+" 0 0 0 "+ka.circularPathData.rightFullExtent+" "+ka.circularPathData.verticalRightInnerExtent+" L"+ka.circularPathData.rightFullExtent+" "+(ka.circularPathData.targetY-ka.circularPathData.rightSmallArcRadius)+" A"+ka.circularPathData.rightLargeArcRadius+" "+ka.circularPathData.rightSmallArcRadius+
" 0 0 0 "+ka.circularPathData.rightInnerExtent+" "+ka.circularPathData.targetY+" L"+ka.circularPathData.targetX+" "+ka.circularPathData.targetY:"M"+ka.circularPathData.sourceX+" "+ka.circularPathData.sourceY+" L"+ka.circularPathData.leftInnerExtent+" "+ka.circularPathData.sourceY+" A"+ka.circularPathData.leftLargeArcRadius+" "+ka.circularPathData.leftSmallArcRadius+" 0 0 1 "+ka.circularPathData.leftFullExtent+" "+(ka.circularPathData.sourceY+ka.circularPathData.leftSmallArcRadius)+" L"+ka.circularPathData.leftFullExtent+
" "+ka.circularPathData.verticalLeftInnerExtent+" A"+ka.circularPathData.leftLargeArcRadius+" "+ka.circularPathData.leftLargeArcRadius+" 0 0 1 "+ka.circularPathData.leftInnerExtent+" "+ka.circularPathData.verticalFullExtent+" L"+ka.circularPathData.rightInnerExtent+" "+ka.circularPathData.verticalFullExtent+" A"+ka.circularPathData.rightLargeArcRadius+" "+ka.circularPathData.rightLargeArcRadius+" 0 0 1 "+ka.circularPathData.rightFullExtent+" "+ka.circularPathData.verticalRightInnerExtent+" L"+ka.circularPathData.rightFullExtent+
" "+(ka.circularPathData.targetY+ka.circularPathData.rightSmallArcRadius)+" A"+ka.circularPathData.rightLargeArcRadius+" "+ka.circularPathData.rightSmallArcRadius+" 0 0 1 "+ka.circularPathData.rightInnerExtent+" "+ka.circularPathData.targetY+" L"+ka.circularPathData.targetX+" "+ka.circularPathData.targetY:(sa=m.linkHorizontal().source(function(Ha){return[Ha.source.x0+(Ha.source.x1-Ha.source.x0),Ha.y0]}).target(function(Ha){return[Ha.target.x0,Ha.y1]}),ka.path=sa(ka))})}function K(ma,ia){return L(ma)==
L(ia)?"bottom"==ma.circularLinkType?H(ma,ia):M(ma,ia):L(ia)-L(ma)}function M(ma,ia){return ma.y0-ia.y0}function H(ma,ia){return ia.y0-ma.y0}function O(ma,ia){return ma.y1-ia.y1}function I(ma,ia){return ia.y1-ma.y1}function L(ma){return ma.target.column-ma.source.column}function Q(ma,ia){var ra=C(ma);ia=(ia.target.x0-ia.source.x1)/Math.tan(ra);return"up"==fa(ma)?ma.y1+ia:ma.y1-ia}function Z(ma,ia){var ra=C(ma);ia=(ia.target.x0-ia.source.x1)/Math.tan(ra);return"up"==fa(ma)?ma.y1-ia:ma.y1+ia}function ba(ma,
ia,ra,wa){ma.links.forEach(function(pa){if(!pa.circular&&1<pa.target.column-pa.source.column){var la=pa.source.column+1,ka=pa.target.column-1,na=1,oa=ka-la+1;for(na=1;la<=ka;la++,na++)ma.nodes.forEach(function(sa){if(sa.column==la){var za=na/(oa+1),Ha=Math.pow(1-za,3)*pa.y0+3*za*Math.pow(1-za,2)*pa.y0+3*Math.pow(za,2)*(1-za)*pa.y1+Math.pow(za,3)*pa.y1;za=Ha-pa.width/2;Ha+=pa.width/2;if(za>sa.y0&&za<sa.y1){var Wa=sa.y1-za+10;Wa="bottom"==sa.circularLinkType?Wa:-Wa;sa=V(sa,Wa,ia,ra);ma.nodes.forEach(function(Za){wa(Za)!=
wa(sa)&&Za.column==sa.column&&(sa.y0>Za.y0&&sa.y0<Za.y1||sa.y1>Za.y0&&sa.y1<Za.y1||sa.y0<Za.y0&&sa.y1>Za.y1)&&V(Za,Wa,ia,ra)})}else Ha>sa.y0&&Ha<sa.y1?(Wa=Ha-sa.y0+10,sa=V(sa,Wa,ia,ra),ma.nodes.forEach(function(Za){wa(Za)!=wa(sa)&&Za.column==sa.column&&Za.y0<sa.y1&&Za.y1>sa.y1&&V(Za,Wa,ia,ra)})):za<sa.y0&&Ha>sa.y1&&(Wa=Ha-sa.y0+10,sa=V(sa,Wa,ia,ra),ma.nodes.forEach(function(Za){wa(Za)!=wa(sa)&&Za.column==sa.column&&Za.y0<sa.y1&&Za.y1>sa.y1&&V(Za,Wa,ia,ra)}))}})}})}function V(ma,ia,ra,wa){ma.y0+ia>=
ra&&ma.y1+ia<=wa&&(ma.y0+=ia,ma.y1+=ia,ma.targetLinks.forEach(function(pa){pa.y1+=ia}),ma.sourceLinks.forEach(function(pa){pa.y0+=ia}));return ma}function S(ma,ia,ra,wa){ma.nodes.forEach(function(pa){wa&&pa.y+(pa.y1-pa.y0)>ia&&(pa.y-=pa.y+(pa.y1-pa.y0)-ia);var la=ma.links.filter(function(oa){return ra(oa.source)==ra(pa)}),ka=la.length;1<ka&&la.sort(function(oa,sa){if(!oa.circular&&!sa.circular)if(oa.target.column!=sa.target.column&&fa(oa)==fa(sa)){if(oa.target.column>sa.target.column)return sa=Z(sa,
oa),oa.y1-sa;if(sa.target.column>oa.target.column)return Z(oa,sa)-sa.y1}else return oa.y1-sa.y1;if(oa.circular&&!sa.circular)return"top"==oa.circularLinkType?-1:1;if(sa.circular&&!oa.circular)return"top"==sa.circularLinkType?1:-1;if(oa.circular&&sa.circular)return oa.circularLinkType===sa.circularLinkType&&"top"==oa.circularLinkType?oa.target.column===sa.target.column?oa.target.y1-sa.target.y1:sa.target.column-oa.target.column:oa.circularLinkType===sa.circularLinkType&&"bottom"==oa.circularLinkType?
oa.target.column===sa.target.column?sa.target.y1-oa.target.y1:oa.target.column-sa.target.column:"top"==oa.circularLinkType?-1:1});var na=pa.y0;la.forEach(function(oa){oa.y0=na+oa.width/2;na+=oa.width});la.forEach(function(oa,sa){if("bottom"==oa.circularLinkType){sa+=1;var za=0;for(sa;sa<ka;sa++)za+=la[sa].width;oa.y0=pa.y1-za-oa.width/2}})})}function T(ma,ia,ra){ma.nodes.forEach(function(wa){var pa=ma.links.filter(function(na){return ra(na.target)==ra(wa)}),la=pa.length;1<la&&pa.sort(function(na,
oa){if(!na.circular&&!oa.circular)if(na.source.column!=oa.source.column&&fa(na)==fa(oa)){if(oa.source.column<na.source.column)return oa=Q(oa,na),na.y0-oa;if(na.source.column<oa.source.column)return Q(na,oa)-oa.y0}else return na.y0-oa.y0;if(na.circular&&!oa.circular)return"top"==na.circularLinkType?-1:1;if(oa.circular&&!na.circular)return"top"==oa.circularLinkType?1:-1;if(na.circular&&oa.circular)return na.circularLinkType===oa.circularLinkType&&"top"==na.circularLinkType?na.source.column===oa.source.column?
na.source.y1-oa.source.y1:na.source.column-oa.source.column:na.circularLinkType===oa.circularLinkType&&"bottom"==na.circularLinkType?na.source.column===oa.source.column?na.source.y1-oa.source.y1:oa.source.column-na.source.column:"top"==na.circularLinkType?-1:1});var ka=wa.y0;pa.forEach(function(na){na.y1=ka+na.width/2;ka+=na.width});pa.forEach(function(na,oa){if("bottom"==na.circularLinkType){oa+=1;var sa=0;for(oa;oa<la;oa++)sa+=pa[oa].width;na.y1=wa.y1-sa-na.width/2}})})}function fa(ma){return 0<
ma.y0-ma.y1?"up":"down"}function W(ma,ia){return ia(ma.source)==ia(ma.target)}function aa(ma,ia,ra){var wa=ma.nodes;ma=ma.links;var pa=!1,la=!1;ma.forEach(function(sa){"top"==sa.circularLinkType?pa=!0:"bottom"==sa.circularLinkType&&(la=!0)});if(0==pa||0==la){var ka=n.min(wa,function(sa){return sa.y0}),na=n.max(wa,function(sa){return sa.y1}),oa=(ra-ia)/(na-ka);wa.forEach(function(sa){var za=(sa.y1-sa.y0)*oa;sa.y0=(sa.y0-ka)*oa;sa.y1=sa.y0+za});ma.forEach(function(sa){sa.y0=(sa.y0-ka)*oa;sa.y1=(sa.y1-
ka)*oa;sa.width*=oa})}}a=a&&a.hasOwnProperty("default")?a["default"]:a;var ja="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function(ma){return typeof ma}:function(ma){return ma&&"function"===typeof Symbol&&ma.constructor===Symbol&&ma!==Symbol.prototype?"symbol":typeof ma};p.sankeyCircular=function(){function ma(){var qb={nodes:hb.apply(null,arguments),links:ub.apply(null,arguments)};ia(qb);A(qb,bb,vb);ra(qb);la(qb);D(qb,bb);ka(qb,pb,bb);na(qb);for(var zb=0;4>zb;zb++)S(qb,Ha,bb),T(qb,
Ha,bb),ba(qb,sa,Ha,bb),S(qb,Ha,bb),T(qb,Ha,bb);aa(qb,sa,Ha);J(qb,Ab,Ha,bb);return qb}function ia(qb){qb.nodes.forEach(function(La,Ka){La.index=Ka;La.sourceLinks=[];La.targetLinks=[]});var zb=k.map(qb.nodes,bb);qb.links.forEach(function(La,Ka){La.index=Ka;Ka=La.source;var ya=La.target;"object"!==("undefined"===typeof Ka?"undefined":ja(Ka))&&(Ka=La.source=B(zb,Ka));"object"!==("undefined"===typeof ya?"undefined":ja(ya))&&(ya=La.target=B(zb,ya));Ka.sourceLinks.push(La);ya.targetLinks.push(La)});return qb}
function ra(qb){qb.nodes.forEach(function(zb){zb.partOfCycle=!1;zb.value=Math.max(n.sum(zb.sourceLinks,e),n.sum(zb.targetLinks,e));zb.sourceLinks.forEach(function(La){La.circular&&(zb.partOfCycle=!0,zb.circularLinkType=La.circularLinkType)});zb.targetLinks.forEach(function(La){La.circular&&(zb.partOfCycle=!0,zb.circularLinkType=La.circularLinkType)})})}function wa(qb){var zb=0,La=0,Ka=0,ya=0,Aa=n.max(qb.nodes,function(Ja){return Ja.column});qb.links.forEach(function(Ja){Ja.circular&&("top"==Ja.circularLinkType?
zb+=Ja.width:La+=Ja.width,0==Ja.target.column&&(ya+=Ja.width),Ja.source.column==Aa&&(Ka+=Ja.width))});zb=0<zb?zb+25+10:zb;La=0<La?La+25+10:La;Ka=0<Ka?Ka+25+10:Ka;ya=0<ya?ya+25+10:ya;return{top:zb,bottom:La,left:ya,right:Ka}}function pa(qb,zb){var La=n.max(qb.nodes,function(Aa){return Aa.column}),Ka=za-oa,ya=Ha-sa;Ka/=Ka+zb.right+zb.left;ya/=ya+zb.top+zb.bottom;oa=oa*Ka+zb.left;za=0==zb.right?za:za*Ka;sa=sa*ya+zb.top;Ha*=ya;qb.nodes.forEach(function(Aa){Aa.x0=oa+(za-oa-Wa)/La*Aa.column;Aa.x1=Aa.x0+
Wa});return ya}function la(qb){var zb;var La=qb.nodes;var Ka=[];for(zb=0;La.length;++zb,La=Ka,Ka=[])La.forEach(function(ya){ya.depth=zb;ya.sourceLinks.forEach(function(Aa){0>Ka.indexOf(Aa.target)&&!Aa.circular&&Ka.push(Aa.target)})});La=qb.nodes;Ka=[];for(zb=0;La.length;++zb,La=Ka,Ka=[])La.forEach(function(ya){ya.height=zb;ya.targetLinks.forEach(function(Aa){0>Ka.indexOf(Aa.source)&&!Aa.circular&&Ka.push(Aa.source)})});qb.nodes.forEach(function(ya){ya.column=Math.floor(sb.call(null,ya,zb))})}function ka(qb,
zb,La){function Ka(Ta,$a){var ab=Aa.length;Aa.forEach(function(Db){var Nb=Db.length,ec=Db[0].depth;Db.forEach(function(ob){if((ob.sourceLinks.length||ob.targetLinks.length)&&!(ob.partOfCycle&&0<v(ob,$a)))if(0==ec&&1==Nb){var Cb=ob.y1-ob.y0;ob.y0=Ha/2-Cb/2;ob.y1=Ha/2+Cb/2}else if(ec==ab-1&&1==Nb)Cb=ob.y1-ob.y0,ob.y0=Ha/2-Cb/2,ob.y1=Ha/2+Cb/2;else{Cb=n.mean(ob.sourceLinks,t);var Qb=n.mean(ob.targetLinks,q);Cb=((Cb&&Qb?(Cb+Qb)/2:Cb||Qb)-f(ob))*Ta;ob.y0+=Cb;ob.y1+=Cb}})})}function ya(){Aa.forEach(function(Ta){var $a=
sa,ab=Ta.length,Db;Ta.sort(d);for(Db=0;Db<ab;++Db){var Nb=Ta[Db];var ec=$a-Nb.y0;0<ec&&(Nb.y0+=ec,Nb.y1+=ec);$a=Nb.y1+Za}ec=$a-Za-Ha;if(0<ec)for($a=Nb.y0-=ec,Nb.y1-=ec,Db=ab-2;0<=Db;--Db)Nb=Ta[Db],ec=Nb.y1+Za-$a,0<ec&&(Nb.y0-=ec,Nb.y1-=ec),$a=Nb.y0})}var Aa=k.nest().key(function(Ta){return Ta.column}).sortKeys(n.ascending).entries(qb.nodes).map(function(Ta){return Ta.values});(function(Ta){if(tb){var $a=Infinity;Aa.forEach(function(ec){ec=Ha*tb/(ec.length+1);$a=ec<$a?ec:$a});Za=$a}var ab=n.min(Aa,
function(ec){return(Ha-sa-(ec.length-1)*Za)/n.sum(ec,e)});ab*=.3;qb.links.forEach(function(ec){ec.width=ec.value*ab});var Db=wa(qb),Nb=pa(qb,Db);ab*=Nb;qb.links.forEach(function(ec){ec.width=ec.value*ab});Aa.forEach(function(ec){var ob=ec.length;ec.forEach(function(Cb,Qb){Cb.depth==Aa.length-1&&1==ob?Cb.y0=Ha/2-Cb.value*ab:0==Cb.depth&&1==ob?Cb.y0=Ha/2-Cb.value*ab:Cb.partOfCycle?0==v(Cb,Ta)?Cb.y0=Ha/2+Qb:Cb.y0="top"==Cb.circularLinkType?sa+Qb:Ha-Cb.value*ab-Qb:Cb.y0=0==Db.top||0==Db.bottom?(Ha-sa)/
ob*Qb:(Ha-sa)/2-ob/2+Qb;Cb.y1=Cb.y0+Cb.value*ab})})})(La);ya();for(var Ja=1;0<zb;--zb)Ka(Ja*=.99,La),ya()}function na(qb){qb.nodes.forEach(function(zb){zb.sourceLinks.sort(c);zb.targetLinks.sort(l)});qb.nodes.forEach(function(zb){var La=zb.y0,Ka=La,ya=zb.y1,Aa=ya;zb.sourceLinks.forEach(function(Ja){Ja.circular?(Ja.y0=ya-Ja.width/2,ya-=Ja.width):(Ja.y0=La+Ja.width/2,La+=Ja.width)});zb.targetLinks.forEach(function(Ja){Ja.circular?(Ja.y1=Aa-Ja.width/2,Aa-=Ja.width):(Ja.y1=Ka+Ja.width/2,Ka+=Ja.width)})})}
var oa=0,sa=0,za=1,Ha=1,Wa=24,Za,bb=w,sb=h,hb=x,ub=z,pb=32,Ab=2,tb,vb=null;ma.nodeId=function(qb){return arguments.length?(bb="function"===typeof qb?qb:r(qb),ma):bb};ma.nodeAlign=function(qb){return arguments.length?(sb="function"===typeof qb?qb:r(qb),ma):sb};ma.nodeWidth=function(qb){return arguments.length?(Wa=+qb,ma):Wa};ma.nodePadding=function(qb){return arguments.length?(Za=+qb,ma):Za};ma.nodes=function(qb){return arguments.length?(hb="function"===typeof qb?qb:r(qb),ma):hb};ma.links=function(qb){return arguments.length?
(ub="function"===typeof qb?qb:r(qb),ma):ub};ma.size=function(qb){return arguments.length?(oa=sa=0,za=+qb[0],Ha=+qb[1],ma):[za-oa,Ha-sa]};ma.extent=function(qb){return arguments.length?(oa=+qb[0][0],za=+qb[1][0],sa=+qb[0][1],Ha=+qb[1][1],ma):[[oa,sa],[za,Ha]]};ma.iterations=function(qb){return arguments.length?(pb=+qb,ma):pb};ma.circularLinkGap=function(qb){return arguments.length?(Ab=+qb,ma):Ab};ma.nodePaddingRatio=function(qb){return arguments.length?(tb=+qb,ma):tb};ma.sortNodes=function(qb){return arguments.length?
(vb=qb,ma):vb};ma.update=function(qb){D(qb,bb);na(qb);qb.links.forEach(function(zb){zb.circular&&(zb.circularLinkType=zb.y0+zb.y1<Ha?"top":"bottom",zb.source.circularLinkType=zb.circularLinkType,zb.target.circularLinkType=zb.circularLinkType)});S(qb,Ha,bb,!1);T(qb,Ha,bb);J(qb,Ab,Ha,bb);return qb};return ma};p.sankeyCenter=function(ma){return ma.targetLinks.length?ma.depth:ma.sourceLinks.length?n.min(ma.sourceLinks,g)-1:0};p.sankeyLeft=function(ma){return ma.depth};p.sankeyRight=function(ma,ia){return ia-
1-ma.height};p.sankeyJustify=h;Object.defineProperty(p,"__esModule",{value:!0})})},{"d3-array":162,"d3-collection":163,"d3-shape":174,"elementary-circuits-directed-graph":188}],57:[function(b,N,G){(function(p,n){"object"===typeof G&&"undefined"!==typeof N?n(G,b("d3-array"),b("d3-collection"),b("d3-shape")):n(p.d3=p.d3||{},p.d3,p.d3,p.d3)})(this,function(p,n,k,m){function a(D){return D.target.depth}function g(D,C){return D.sourceLinks.length?D.depth:C-1}function h(D){return function(){return D}}function r(D,
C){return c(D.source,C.source)||D.index-C.index}function l(D,C){return c(D.target,C.target)||D.index-C.index}function c(D,C){return D.y0-C.y0}function d(D){return D.value}function e(D){return(D.y0+D.y1)/2}function f(D){return e(D.source)*D.value}function q(D){return e(D.target)*D.value}function t(D){return D.index}function w(D){return D.nodes}function x(D){return D.links}function z(D,C){D=D.get(C);if(!D)throw Error("missing: "+C);return D}function B(D){return[D.source.x1,D.y0]}function A(D){return[D.target.x0,
D.y1]}p.sankey=function(){function D(){var fa={nodes:ba.apply(null,arguments),links:V.apply(null,arguments)};C(fa);v(fa);y(fa);F(fa,S);J(fa);return fa}function C(fa){fa.nodes.forEach(function(aa,ja){aa.index=ja;aa.sourceLinks=[];aa.targetLinks=[]});var W=k.map(fa.nodes,Q);fa.links.forEach(function(aa,ja){aa.index=ja;ja=aa.source;var ma=aa.target;"object"!==typeof ja&&(ja=aa.source=z(W,ja));"object"!==typeof ma&&(ma=aa.target=z(W,ma));ja.sourceLinks.push(aa);ma.targetLinks.push(aa)})}function v(fa){fa.nodes.forEach(function(W){W.value=
Math.max(n.sum(W.sourceLinks,d),n.sum(W.targetLinks,d))})}function y(fa){var W;var aa=fa.nodes;var ja=[];for(W=0;aa.length;++W,aa=ja,ja=[])aa.forEach(function(ia){ia.depth=W;ia.sourceLinks.forEach(function(ra){0>ja.indexOf(ra.target)&&ja.push(ra.target)})});aa=fa.nodes;ja=[];for(W=0;aa.length;++W,aa=ja,ja=[])aa.forEach(function(ia){ia.height=W;ia.targetLinks.forEach(function(ra){0>ja.indexOf(ra.source)&&ja.push(ra.source)})});var ma=(H-K-I)/(W-1);fa.nodes.forEach(function(ia){ia.x1=(ia.x0=K+Math.max(0,
Math.min(W-1,Math.floor(Z.call(null,ia,W))))*ma)+I})}function F(fa){function W(wa){ma.forEach(function(pa){pa.forEach(function(la){if(la.targetLinks.length){var ka=(n.sum(la.targetLinks,f)/n.sum(la.targetLinks,d)-e(la))*wa;la.y0+=ka;la.y1+=ka}})})}function aa(wa){ma.slice().reverse().forEach(function(pa){pa.forEach(function(la){if(la.sourceLinks.length){var ka=(n.sum(la.sourceLinks,q)/n.sum(la.sourceLinks,d)-e(la))*wa;la.y0+=ka;la.y1+=ka}})})}function ja(){ma.forEach(function(wa){var pa=M,la=wa.length,
ka;wa.sort(c);for(ka=0;ka<la;++ka){var na=wa[ka];var oa=pa-na.y0;0<oa&&(na.y0+=oa,na.y1+=oa);pa=na.y1+L}oa=pa-L-O;if(0<oa)for(pa=na.y0-=oa,na.y1-=oa,ka=la-2;0<=ka;--ka)na=wa[ka],oa=na.y1+L-pa,0<oa&&(na.y0-=oa,na.y1-=oa),pa=na.y0})}var ma=k.nest().key(function(wa){return wa.x0}).sortKeys(n.ascending).entries(fa.nodes).map(function(wa){return wa.values});(function(){var wa=n.max(ma,function(la){return la.length});wa=T*(O-M)/(wa-1);L>wa&&(L=wa);var pa=n.min(ma,function(la){return(O-M-(la.length-1)*L)/
n.sum(la,d)});ma.forEach(function(la){la.forEach(function(ka,na){ka.y1=(ka.y0=na)+ka.value*pa})});fa.links.forEach(function(la){la.width=la.value*pa})})();ja();for(var ia=1,ra=S;0<ra;--ra)aa(ia*=.99),ja(),W(ia),ja()}function J(fa){fa.nodes.forEach(function(W){W.sourceLinks.sort(l);W.targetLinks.sort(r)});fa.nodes.forEach(function(W){var aa=W.y0,ja=aa;W.sourceLinks.forEach(function(ma){ma.y0=aa+ma.width/2;aa+=ma.width});W.targetLinks.forEach(function(ma){ma.y1=ja+ma.width/2;ja+=ma.width})})}var K=
0,M=0,H=1,O=1,I=24,L=8,Q=t,Z=g,ba=w,V=x,S=32,T=2/3;D.update=function(fa){J(fa);return fa};D.nodeId=function(fa){return arguments.length?(Q="function"===typeof fa?fa:h(fa),D):Q};D.nodeAlign=function(fa){return arguments.length?(Z="function"===typeof fa?fa:h(fa),D):Z};D.nodeWidth=function(fa){return arguments.length?(I=+fa,D):I};D.nodePadding=function(fa){return arguments.length?(L=+fa,D):L};D.nodes=function(fa){return arguments.length?(ba="function"===typeof fa?fa:h(fa),D):ba};D.links=function(fa){return arguments.length?
(V="function"===typeof fa?fa:h(fa),D):V};D.size=function(fa){return arguments.length?(K=M=0,H=+fa[0],O=+fa[1],D):[H-K,O-M]};D.extent=function(fa){return arguments.length?(K=+fa[0][0],H=+fa[1][0],M=+fa[0][1],O=+fa[1][1],D):[[K,M],[H,O]]};D.iterations=function(fa){return arguments.length?(S=+fa,D):S};return D};p.sankeyCenter=function(D){return D.targetLinks.length?D.depth:D.sourceLinks.length?n.min(D.sourceLinks,a)-1:0};p.sankeyLeft=function(D){return D.depth};p.sankeyRight=function(D,C){return C-1-
D.height};p.sankeyJustify=g;p.sankeyLinkHorizontal=function(){return m.linkHorizontal().source(B).target(A)};Object.defineProperty(p,"__esModule",{value:!0})})},{"d3-array":162,"d3-collection":163,"d3-shape":174}],58:[function(b,N,G){!function(){function p(ca){return ca&&(ca.ownerDocument&&ca.ownerDocument.defaultView||ca.document&&ca||ca.defaultView)}function n(ca,ua){return ca<ua?-1:ca>ua?1:ca>=ua?0:NaN}function k(ca){return null===ca?NaN:+ca}function m(ca){return!isNaN(ca)}function a(ca){return{left:function(ua,
Ba,Da,Ma){3>arguments.length&&(Da=0);4>arguments.length&&(Ma=ua.length);for(;Da<Ma;){var Ua=Da+Ma>>>1;0>ca(ua[Ua],Ba)?Da=Ua+1:Ma=Ua}return Da},right:function(ua,Ba,Da,Ma){3>arguments.length&&(Da=0);4>arguments.length&&(Ma=ua.length);for(;Da<Ma;){var Ua=Da+Ma>>>1;0<ca(ua[Ua],Ba)?Ma=Ua:Da=Ua+1}return Da}}}function g(ca){return ca.length}function h(ca,ua){for(var Ba in ua)Object.defineProperty(ca.prototype,Ba,{value:ua[Ba],enumerable:!1})}function r(){this._=Object.create(null)}function l(ca){return"__proto__"===
(ca+="")||"\x00"===ca[0]?"\x00"+ca:ca}function c(ca){return"\x00"===(ca+="")[0]?ca.slice(1):ca}function d(ca){return l(ca)in this._}function e(ca){return(ca=l(ca))in this._&&delete this._[ca]}function f(){var ca=[],ua;for(ua in this._)ca.push(c(ua));return ca}function q(){var ca=0,ua;for(ua in this._)++ca;return ca}function t(){for(var ca in this._)return!1;return!0}function w(){this._=Object.create(null)}function x(ca){return ca}function z(ca,ua,Ba){return function(){var Da=Ba.apply(ua,arguments);
return Da===ua?ca:Da}}function B(ca,ua){if(ua in ca)return ua;ua=ua.charAt(0).toUpperCase()+ua.slice(1);for(var Ba=0,Da=Ld.length;Ba<Da;++Ba){var Ma=Ld[Ba]+ua;if(Ma in ca)return Ma}}function A(){}function D(){}function C(ca){function ua(){for(var Ma=Ba,Ua=-1,nb=Ma.length,eb;++Ua<nb;)(eb=Ma[Ua].on)&&eb.apply(this,arguments);return ca}var Ba=[],Da=new r;ua.on=function(Ma,Ua){var nb=Da.get(Ma),eb;if(2>arguments.length)return nb&&nb.on;nb&&(nb.on=null,Ba=Ba.slice(0,eb=Ba.indexOf(nb)).concat(Ba.slice(eb+
1)),Da.remove(Ma));Ua&&Ba.push(Da.set(Ma,{on:Ua}));return ca};return ua}function v(){Pa.event.preventDefault()}function y(){for(var ca=Pa.event,ua;ua=ca.sourceEvent;)ca=ua;return ca}function F(ca){for(var ua=new D,Ba=0,Da=arguments.length;++Ba<Da;)ua[arguments[Ba]]=C(ua);ua.of=function(Ma,Ua){return function(nb){try{var eb=nb.sourceEvent=Pa.event;nb.target=ca;Pa.event=nb;ua[nb.type].apply(Ma,Ua)}finally{Pa.event=eb}}};return ua}function J(ca){Vd(ca,he);return ca}function K(ca){return"function"===
typeof ca?ca:function(){return Yd(ca,this)}}function M(ca){return"function"===typeof ca?ca:function(){return df(ca,this)}}function H(ca,ua){function Ba(){this.removeAttribute(ca)}function Da(){this.removeAttributeNS(ca.space,ca.local)}function Ma(){this.setAttribute(ca,ua)}function Ua(){this.setAttributeNS(ca.space,ca.local,ua)}function nb(){var db=ua.apply(this,arguments);null==db?this.removeAttribute(ca):this.setAttribute(ca,db)}function eb(){var db=ua.apply(this,arguments);null==db?this.removeAttributeNS(ca.space,
ca.local):this.setAttributeNS(ca.space,ca.local,db)}ca=Pa.ns.qualify(ca);return null==ua?ca.local?Da:Ba:"function"===typeof ua?ca.local?eb:nb:ca.local?Ua:Ma}function O(ca){return new RegExp("(?:^|\\s+)"+Pa.requote(ca)+"(?:\\s+|$)","g")}function I(ca,ua){function Ba(){for(var Ua=-1;++Ua<Ma;)ca[Ua](this,ua)}function Da(){for(var Ua=-1,nb=ua.apply(this,arguments);++Ua<Ma;)ca[Ua](this,nb)}ca=(ca+"").trim().split(/^|\s+/).map(L);var Ma=ca.length;return"function"===typeof ua?Da:Ba}function L(ca){var ua=
O(ca);return function(Ba,Da){if(Ma=Ba.classList)return Da?Ma.add(ca):Ma.remove(ca);var Ma=Ba.getAttribute("class")||"";Da?(ua.lastIndex=0,ua.test(Ma)||Ba.setAttribute("class",(Ma+" "+ca).trim().replace(/\s+/g," "))):Ba.setAttribute("class",Ma.replace(ua," ").trim().replace(/\s+/g," "))}}function Q(ca,ua,Ba){function Da(){this.style.removeProperty(ca)}function Ma(){this.style.setProperty(ca,ua,Ba)}function Ua(){var nb=ua.apply(this,arguments);null==nb?this.style.removeProperty(ca):this.style.setProperty(ca,
nb,Ba)}return null==ua?Da:"function"===typeof ua?Ua:Ma}function Z(ca,ua){function Ba(){delete this[ca]}function Da(){this[ca]=ua}function Ma(){var Ua=ua.apply(this,arguments);null==Ua?delete this[ca]:this[ca]=Ua}return null==ua?Ba:"function"===typeof ua?Ma:Da}function ba(ca){function ua(){var Da=this.ownerDocument,Ma=this.namespaceURI;return"http://www.w3.org/1999/xhtml"===Ma&&"http://www.w3.org/1999/xhtml"===Da.documentElement.namespaceURI?Da.createElement(ca):Da.createElementNS(Ma,ca)}function Ba(){return this.ownerDocument.createElementNS(ca.space,
ca.local)}return"function"===typeof ca?ca:(ca=Pa.ns.qualify(ca)).local?Ba:ua}function V(){var ca=this.parentNode;ca&&ca.removeChild(this)}function S(ca){return function(){return Se(this,ca)}}function T(ca){arguments.length||(ca=n);return function(ua,Ba){return ua&&Ba?ca(ua.__data__,Ba.__data__):!ua-!Ba}}function fa(ca,ua){for(var Ba=0,Da=ca.length;Ba<Da;Ba++)for(var Ma=ca[Ba],Ua=0,nb=Ma.length,eb;Ua<nb;Ua++)(eb=Ma[Ua])&&ua(eb,Ua,Ba);return ca}function W(ca){Vd(ca,de);return ca}function aa(ca){var ua,
Ba;return function(Da,Ma,Ua){Da=ca[Ua].update;var nb=Da.length;Ua!=Ba&&(Ba=Ua,ua=0);for(Ma>=ua&&(ua=Ma+1);!(Ma=Da[ua])&&++ua<nb;);return Ma}}function ja(ca,ua,Ba){function Da(){var Eb=this[nb];Eb&&(this.removeEventListener(ca,Eb,Eb.$),delete this[nb])}function Ma(){var Eb=db(ua,bc(arguments));Da.call(this);this.addEventListener(ca,this[nb]=Eb,Eb.$=Ba);Eb._=ua}function Ua(){var Eb=new RegExp("^__on([^.]+)"+Pa.requote(ca)+"$"),Tb,mc;for(mc in this)if(Tb=mc.match(Eb)){var ic=this[mc];this.removeEventListener(Tb[1],
ic,ic.$);delete this[mc]}}var nb="__on"+ca,eb=ca.indexOf("."),db=ma;0<eb&&(ca=ca.slice(0,eb));var wb=De.get(ca);wb&&(ca=wb,db=ia);return eb?ua?Ma:Da:ua?A:Ua}function ma(ca,ua){return function(Ba){var Da=Pa.event;Pa.event=Ba;ua[0]=this.__data__;try{ca.apply(this,ua)}finally{Pa.event=Da}}}function ia(ca,ua){var Ba=ma(ca,ua);return function(Da){var Ma=Da.relatedTarget;Ma&&(Ma===this||Ma.compareDocumentPosition(this)&8)||Ba.call(this,Da)}}function ra(ca){var ua=".dragsuppress-"+ ++Zf,Ba="click"+ua,Da=
Pa.select(p(ca)).on("touchmove"+ua,v).on("dragstart"+ua,v).on("selectstart"+ua,v);null==yf&&(yf="onselectstart"in ca?!1:B(ca.style,"userSelect"));if(yf){var Ma=(ca&&(ca.ownerDocument||ca.document||ca).documentElement).style,Ua=Ma[yf];Ma[yf]="none"}return function(nb){Da.on(ua,null);yf&&(Ma[yf]=Ua);if(nb){var eb=function(){Da.on(Ba,null)};Da.on(Ba,function(){v();eb()},!0);setTimeout(eb,0)}}}function wa(ca,ua){ua.changedTouches&&(ua=ua.changedTouches[0]);var Ba=ca.ownerSVGElement||ca;if(Ba.createSVGPoint){var Da=
Ba.createSVGPoint();if(0>Tf&&(Ba=p(ca),Ba.scrollX||Ba.scrollY)){Ba=Pa.select("body").append("svg").style({position:"absolute",top:0,left:0,margin:0,padding:0,border:"none"},"important");var Ma=Ba[0][0].getScreenCTM();Tf=!(Ma.f||Ma.e);Ba.remove()}Tf?(Da.x=ua.pageX,Da.y=ua.pageY):(Da.x=ua.clientX,Da.y=ua.clientY);Da=Da.matrixTransform(ca.getScreenCTM().inverse());return[Da.x,Da.y]}Da=ca.getBoundingClientRect();return[ua.clientX-Da.left-ca.clientLeft,ua.clientY-Da.top-ca.clientTop]}function pa(){return Pa.event.changedTouches[0].identifier}
function la(ca,ua,Ba){return(ua[0]-ca[0])*(Ba[1]-ca[1])-(ua[1]-ca[1])*(Ba[0]-ca[0])}function ka(ca){return 1<ca?kg:-1>ca?-kg:Math.asin(ca)}function na(ca){return((ca=Math.exp(ca))+1/ca)/2}function oa(){}function sa(ca,ua,Ba){return this instanceof sa?void(this.h=+ca,this.s=+ua,this.l=+Ba):2>arguments.length?ca instanceof sa?new sa(ca.h,ca.s,ca.l):qb(""+ca,zb,sa):new sa(ca,ua,Ba)}function za(ca,ua,Ba){function Da(nb){360<nb?nb-=360:0>nb&&(nb+=360);return 60>nb?Ua+(Ma-Ua)*nb/60:180>nb?Ma:240>nb?Ua+
(Ma-Ua)*(240-nb)/60:Ua}ca=isNaN(ca)?0:0>(ca%=360)?ca+360:ca;ua=isNaN(ua)?0:0>ua?0:1<ua?1:ua;Ba=0>Ba?0:1<Ba?1:Ba;var Ma=.5>=Ba?Ba*(1+ua):Ba+ua-Ba*ua;var Ua=2*Ba-Ma;return new Ab(Math.round(255*Da(ca+120)),Math.round(255*Da(ca)),Math.round(255*Da(ca-120)))}function Ha(ca,ua,Ba){return this instanceof Ha?void(this.h=+ca,this.c=+ua,this.l=+Ba):2>arguments.length?ca instanceof Ha?new Ha(ca.h,ca.c,ca.l):ca instanceof Za?sb(ca.l,ca.a,ca.b):sb((ca=La((ca=Pa.rgb(ca)).r,ca.g,ca.b)).l,ca.a,ca.b):new Ha(ca,ua,
Ba)}function Wa(ca,ua,Ba){isNaN(ca)&&(ca=0);isNaN(ua)&&(ua=0);return new Za(Ba,Math.cos(ca*=Kg)*ua,Math.sin(ca)*ua)}function Za(ca,ua,Ba){return this instanceof Za?void(this.l=+ca,this.a=+ua,this.b=+Ba):2>arguments.length?ca instanceof Za?new Za(ca.l,ca.a,ca.b):ca instanceof Ha?Wa(ca.h,ca.c,ca.l):La((ca=Ab(ca)).r,ca.g,ca.b):new Za(ca,ua,Ba)}function bb(ca,ua,Ba){ca=(ca+16)/116;Ba=ca-Ba/200;ua=hb(ca+ua/500)*Ih;ca=hb(ca)*Si;Ba=hb(Ba)*ij;return new Ab(pb(3.2404542*ua-1.5371385*ca-.4985314*Ba),pb(-.969266*
ua+1.8760108*ca+.041556*Ba),pb(.0556434*ua-.2040259*ca+1.0572252*Ba))}function sb(ca,ua,Ba){return 0<ca?new Ha(Math.atan2(Ba,ua)*$f,Math.sqrt(ua*ua+Ba*Ba),ca):new Ha(NaN,NaN,ca)}function hb(ca){return.206893034<ca?ca*ca*ca:(ca-4/29)/7.787037}function ub(ca){return.008856<ca?Math.pow(ca,1/3):7.787037*ca+4/29}function pb(ca){return Math.round(255*(.00304>=ca?12.92*ca:1.055*Math.pow(ca,1/2.4)-.055))}function Ab(ca,ua,Ba){return this instanceof Ab?void(this.r=~~ca,this.g=~~ua,this.b=~~Ba):2>arguments.length?
ca instanceof Ab?new Ab(ca.r,ca.g,ca.b):qb(""+ca,Ab,za):new Ab(ca,ua,Ba)}function tb(ca){return new Ab(ca>>16,ca>>8&255,ca&255)+""}function vb(ca){return 16>ca?"0"+Math.max(0,ca).toString(16):Math.min(255,ca).toString(16)}function qb(ca,ua,Ba){var Da=0,Ma=0,Ua=0,nb;if(nb=/([a-z]+)\((.*)\)/.exec(ca=ca.toLowerCase())){var eb=nb[2].split(",");switch(nb[1]){case "hsl":return Ba(parseFloat(eb[0]),parseFloat(eb[1])/100,parseFloat(eb[2])/100);case "rgb":return ua(ya(eb[0]),ya(eb[1]),ya(eb[2]))}}if(Ba=Xg.get(ca))return ua(Ba.r,
Ba.g,Ba.b);null==ca||"#"!==ca.charAt(0)||isNaN(Ba=parseInt(ca.slice(1),16))||(4===ca.length?(Da=(Ba&3840)>>4,Da|=Da>>4,Ma=Ba&240,Ma|=Ma>>4,Ua=Ba&15,Ua|=Ua<<4):7===ca.length&&(Da=(Ba&16711680)>>16,Ma=(Ba&65280)>>8,Ua=Ba&255));return ua(Da,Ma,Ua)}function zb(ca,ua,Ba){var Da=Math.min(ca/=255,ua/=255,Ba/=255),Ma=Math.max(ca,ua,Ba),Ua=Ma-Da,nb=(Ma+Da)/2;Ua?(Da=.5>nb?Ua/(Ma+Da):Ua/(2-Ma-Da),ca=60*(ca==Ma?(ua-Ba)/Ua+(ua<Ba?6:0):ua==Ma?(Ba-ca)/Ua+2:(ca-ua)/Ua+4)):(ca=NaN,Da=0<nb&&1>nb?0:ca);return new sa(ca,
Da,nb)}function La(ca,ua,Ba){ca=Ka(ca);ua=Ka(ua);Ba=Ka(Ba);var Da=ub((.4124564*ca+.3575761*ua+.1804375*Ba)/Ih),Ma=ub((.2126729*ca+.7151522*ua+.072175*Ba)/Si);ca=ub((.0193339*ca+.119192*ua+.9503041*Ba)/ij);return Za(116*Ma-16,500*(Da-Ma),200*(Ma-ca))}function Ka(ca){return.04045>=(ca/=255)?ca/12.92:Math.pow((ca+.055)/1.055,2.4)}function ya(ca){var ua=parseFloat(ca);return"%"===ca.charAt(ca.length-1)?Math.round(2.55*ua):ua}function Aa(ca){return"function"===typeof ca?ca:function(){return ca}}function Ja(ca){return function(ua,
Ba,Da){2===arguments.length&&"function"===typeof Ba&&(Da=Ba,Ba=null);return Ta(ua,Ba,ca,Da)}}function Ta(ca,ua,Ba,Da){function Ma(){var Eb=db.status,Tb;if(Tb=!Eb)Tb=(Tb=db.responseType)&&"text"!==Tb?db.response:db.responseText;if(Tb||200<=Eb&&300>Eb||304===Eb){try{var mc=Ba.call(Ua,db)}catch(ic){nb.error.call(Ua,ic);return}nb.load.call(Ua,mc)}else nb.error.call(Ua,db)}var Ua={},nb=Pa.dispatch("beforesend","progress","load","error"),eb={},db=new XMLHttpRequest,wb=null;!self.XDomainRequest||"withCredentials"in
db||!/^(http(s)?:)?\/\//.test(ca)||(db=new XDomainRequest);"onload"in db?db.onload=db.onerror=Ma:db.onreadystatechange=function(){3<db.readyState&&Ma()};db.onprogress=function(Eb){var Tb=Pa.event;Pa.event=Eb;try{nb.progress.call(Ua,db)}finally{Pa.event=Tb}};Ua.header=function(Eb,Tb){Eb=(Eb+"").toLowerCase();if(2>arguments.length)return eb[Eb];null==Tb?delete eb[Eb]:eb[Eb]=Tb+"";return Ua};Ua.mimeType=function(Eb){if(!arguments.length)return ua;ua=null==Eb?null:Eb+"";return Ua};Ua.responseType=function(Eb){if(!arguments.length)return wb;
wb=Eb;return Ua};Ua.response=function(Eb){Ba=Eb;return Ua};["get","post"].forEach(function(Eb){Ua[Eb]=function(){return Ua.send.apply(Ua,[Eb].concat(bc(arguments)))}});Ua.send=function(Eb,Tb,mc){2===arguments.length&&"function"===typeof Tb&&(mc=Tb,Tb=null);db.open(Eb,ca,!0);null==ua||"accept"in eb||(eb.accept=ua+",*/*");if(db.setRequestHeader)for(var ic in eb)db.setRequestHeader(ic,eb[ic]);null!=ua&&db.overrideMimeType&&db.overrideMimeType(ua);null!=wb&&(db.responseType=wb);if(null!=mc)Ua.on("error",
mc).on("load",function(Ac){mc(null,Ac)});nb.beforesend.call(Ua,db);db.send(null==Tb?null:Tb);return Ua};Ua.abort=function(){db.abort();return Ua};Pa.rebind(Ua,nb,"on");return null==Da?Ua:Ua.get($a(Da))}function $a(ca){return 1===ca.length?function(ua,Ba){ca(null==ua?Ba:null)}:ca}function ab(ca,ua,Ba){var Da=arguments.length;2>Da&&(ua=0);3>Da&&(Ba=Date.now());Da={c:ca,t:Ba+ua,n:null};Lg?Lg.n=Da:oi=Da;Lg=Da;Rh||(ai=clearTimeout(ai),Rh=1,ph(Db));return Da}function Db(){var ca=Nb();ca=ec()-ca;24<ca?(isFinite(ca)&&
(clearTimeout(ai),ai=setTimeout(Db,ca)),Rh=0):(Rh=1,ph(Db))}function Nb(){for(var ca=Date.now(),ua=oi;ua;)ca>=ua.t&&ua.c(ca-ua.t)&&(ua.c=null),ua=ua.n;return ca}function ec(){for(var ca,ua=oi,Ba=Infinity;ua;)ua.c?(ua.t<Ba&&(Ba=ua.t),ua=(ca=ua).n):ua=ca?ca.n=ua.n:oi=ua.n;Lg=ca;return Ba}function ob(ca){return ca[0]}function Cb(ca){return ca[1]}function Qb(ca){for(var ua=ca.length,Ba=[0,1],Da=2,Ma=2;Ma<ua;Ma++){for(;1<Da&&0>=la(ca[Ba[Da-2]],ca[Ba[Da-1]],ca[Ma]);)--Da;Ba[Da++]=Ma}return Ba.slice(0,Da)}
function yc(ca,ua){return ca[0]-ua[0]||ca[1]-ua[1]}function Jc(ca,ua,Ba){return(Ba[0]-ua[0])*(ca[1]-ua[1])<(Ba[1]-ua[1])*(ca[0]-ua[0])}function Ia(ca,ua,Ba,Da){var Ma=ca[0],Ua=Ba[0],nb=ua[0]-Ma,eb=Da[0]-Ua;ca=ca[1];Ba=Ba[1];ua=ua[1]-ca;Da=Da[1]-Ba;Ua=(eb*(ca-Ba)-Da*(Ma-Ua))/(Da*nb-eb*ua);return[Ma+Ua*nb,ca+Ua*ua]}function Na(ca){var ua=ca[0];ca=ca[ca.length-1];return!(ua[0]-ca[0]||ua[1]-ca[1])}function ib(){vc(this);this.edge=this.site=this.circle=null}function Gb(ca){var ua=qh.pop()||new ib;ua.site=
ca;return ua}function Hb(ca){fc(ca);af.remove(ca);qh.push(ca);vc(ca)}function $b(ca,ua){var Ba=ca.site,Da=Ba.x,Ma=Ba.y,Ua=Ma-ua;if(!Ua)return Da;ca=ca.P;if(!ca)return-Infinity;Ba=ca.site;ca=Ba.x;Ba=Ba.y;ua=Ba-ua;if(!ua)return ca;var nb=ca-Da,eb=1/Ua-1/ua,db=nb/ua;return eb?(-db+Math.sqrt(db*db-2*eb*(nb*nb/(-2*ua)-Ba+ua/2+Ma-Ua/2)))/eb+Da:(Da+ca)/2}function uc(ca){this.site=ca;this.edges=[]}function fd(ca,ua){return ua.angle-ca.angle}function fb(){vc(this);this.x=this.y=this.arc=this.site=this.cy=
null}function Pb(ca){var ua=ca.P,Ba=ca.N;if(ua&&Ba){var Da=ua.site;ua=ca.site;var Ma=Ba.site;if(Da!==Ma){Ba=ua.x;var Ua=ua.y,nb=Da.x-Ba,eb=Da.y-Ua;Da=Ma.x-Ba;Ma=Ma.y-Ua;var db=2*(nb*Ma-eb*Da);if(!(-1E-12<=db)){var wb=nb*nb+eb*eb,Eb=Da*Da+Ma*Ma;eb=(Ma*wb-eb*Eb)/db;nb=(nb*Eb-Da*wb)/db;Ma=nb+Ua;Ua=gi.pop()||new fb;Ua.arc=ca;Ua.site=ua;Ua.x=eb+Ba;Ua.y=Ma+Math.sqrt(eb*eb+nb*nb);Ua.cy=Ma;ca.circle=Ua;ca=null;for(ua=xi._;ua;)if(Ua.y<ua.y||Ua.y===ua.y&&Ua.x<=ua.x)if(ua.L)ua=ua.L;else{ca=ua.P;break}else if(ua.R)ua=
ua.R;else{ca=ua;break}xi.insert(ca,Ua);ca||(Ti=Ua)}}}}function fc(ca){var ua=ca.circle;ua&&(ua.P||(Ti=ua.N),xi.remove(ua),gi.push(ua),vc(ua),ca.circle=null)}function Fc(ca,ua,Ba,Da){return function(Ma){var Ua=Ma.a,nb=Ma.b,eb=Ua.x;Ua=Ua.y;var db=0,wb=1,Eb=nb.x-eb;nb=nb.y-Ua;var Tb=ca-eb;if(Eb||!(0<Tb)){Tb/=Eb;if(0>Eb){if(Tb<db)return;Tb<wb&&(wb=Tb)}else if(0<Eb){if(Tb>wb)return;Tb>db&&(db=Tb)}Tb=Ba-eb;if(Eb||!(0>Tb)){Tb/=Eb;if(0>Eb){if(Tb>wb)return;Tb>db&&(db=Tb)}else if(0<Eb){if(Tb<db)return;Tb<wb&&
(wb=Tb)}Tb=ua-Ua;if(nb||!(0<Tb)){Tb/=nb;if(0>nb){if(Tb<db)return;Tb<wb&&(wb=Tb)}else if(0<nb){if(Tb>wb)return;Tb>db&&(db=Tb)}Tb=Da-Ua;if(nb||!(0>Tb)){Tb/=nb;if(0>nb){if(Tb>wb)return;Tb>db&&(db=Tb)}else if(0<nb){if(Tb<db)return;Tb<wb&&(wb=Tb)}0<db&&(Ma.a={x:eb+db*Eb,y:Ua+db*nb});1>wb&&(Ma.b={x:eb+wb*Eb,y:Ua+wb*nb});return Ma}}}}}}function Pc(ca,ua){var Ba=ca.b;if(Ba)return!0;var Da=ca.a;Ba=ua[0][0];var Ma=ua[1][0],Ua=ua[0][1];ua=ua[1][1];var nb=ca.l,eb=ca.r,db=nb.x;nb=nb.y;var wb=eb.x;eb=eb.y;var Eb=
(db+wb)/2;if(eb===nb){if(Eb<Ba||Eb>=Ma)return;if(db>wb){if(!Da)Da={x:Eb,y:Ua};else if(Da.y>=ua)return;Ba={x:Eb,y:ua}}else{if(!Da)Da={x:Eb,y:ua};else if(Da.y<Ua)return;Ba={x:Eb,y:Ua}}}else{var Tb=(db-wb)/(eb-nb);Eb=(nb+eb)/2-Tb*Eb;if(-1>Tb||1<Tb)if(db>wb){if(!Da)Da={x:(Ua-Eb)/Tb,y:Ua};else if(Da.y>=ua)return;Ba={x:(ua-Eb)/Tb,y:ua}}else{if(!Da)Da={x:(ua-Eb)/Tb,y:ua};else if(Da.y<Ua)return;Ba={x:(Ua-Eb)/Tb,y:Ua}}else if(nb<eb){if(!Da)Da={x:Ba,y:Tb*Ba+Eb};else if(Da.x>=Ma)return;Ba={x:Ma,y:Tb*Ma+Eb}}else{if(!Da)Da=
{x:Ma,y:Tb*Ma+Eb};else if(Da.x<Ba)return;Ba={x:Ba,y:Tb*Ba+Eb}}}ca.a=Da;ca.b=Ba;return!0}function Uc(ca,ua){this.l=ca;this.r=ua;this.a=this.b=null}function rb(ca,ua,Ba,Da){var Ma=new Uc(ca,ua);Jh.push(Ma);Ba&&Jb(Ma,ca,ua,Ba);Da&&Jb(Ma,ua,ca,Da);Sh[ca.i].edges.push(new sc(Ma,ca,ua));Sh[ua.i].edges.push(new sc(Ma,ua,ca));return Ma}function Jb(ca,ua,Ba,Da){ca.a||ca.b?ca.l===Ba?ca.b=Da:ca.a=Da:(ca.a=Da,ca.l=ua,ca.r=Ba)}function sc(ca,ua,Ba){var Da=ca.a,Ma=ca.b;this.edge=ca;this.site=ua;this.angle=Ba?Math.atan2(Ba.y-
ua.y,Ba.x-ua.x):ca.l===ua?Math.atan2(Ma.x-Da.x,Da.y-Ma.y):Math.atan2(Da.x-Ma.x,Ma.y-Da.y)}function nc(){this._=null}function vc(ca){ca.U=ca.C=ca.L=ca.R=ca.P=ca.N=null}function Vb(ca,ua){var Ba=ua.R,Da=ua.U;Da?Da.L===ua?Da.L=Ba:Da.R=Ba:ca._=Ba;Ba.U=Da;ua.U=Ba;ua.R=Ba.L;ua.R&&(ua.R.U=ua);Ba.L=ua}function Wb(ca,ua){var Ba=ua.L,Da=ua.U;Da?Da.L===ua?Da.L=Ba:Da.R=Ba:ca._=Ba;Ba.U=Da;ua.U=Ba;ua.L=Ba.R;ua.L&&(ua.L.U=ua);Ba.R=ua}function yb(ca){for(;ca.L;)ca=ca.L;return ca}function ac(ca,ua){var Ba=ca.sort(Ub).pop(),
Da;Jh=[];Sh=Array(ca.length);af=new nc;for(xi=new nc;;){var Ma=Ti;if(Ba&&(!Ma||Ba.y<Ma.y||Ba.y===Ma.y&&Ba.x<Ma.x)){if(Ba.x!==Da||Ba.y!==Ua){Sh[Ba.i]=new uc(Ba);var Ua=Da=void 0;Ma=Ba;for(var nb=Ma.x,eb=Ma.y,db=af._;db;){var wb=$b(db,eb)-nb;if(1E-6<wb)db=db.L;else{var Eb=db;var Tb=eb;var mc=Eb.N;mc?Tb=$b(mc,Tb):(Eb=Eb.site,Tb=Eb.y===Tb?Eb.x:Infinity);Tb=nb-Tb;if(1E-6<Tb){if(!db.R){Ua=db;break}db=db.R}else{-1E-6<wb?(Ua=db.P,Da=db):-1E-6<Tb?(Ua=db,Da=db.N):Ua=Da=db;break}}}wb=Gb(Ma);af.insert(Ua,wb);
if(Ua||Da)if(Ua===Da)fc(Ua),Da=Gb(Ua.site),af.insert(wb,Da),wb.edge=Da.edge=rb(Ua.site,wb.site),Pb(Ua),Pb(Da);else if(Da){fc(Ua);fc(Da);nb=Ua.site;db=nb.x;Tb=nb.y;Eb=Ma.x-db;mc=Ma.y-Tb;eb=Da.site;var ic=eb.x-db,Ac=eb.y-Tb,Kc=2*(Eb*Ac-mc*ic),Lc=Eb*Eb+mc*mc,Qc=ic*ic+Ac*Ac;db={x:(Ac*Lc-mc*Qc)/Kc+db,y:(Eb*Qc-ic*Lc)/Kc+Tb};Jb(Da.edge,nb,eb,db);wb.edge=rb(nb,Ma,null,db);Da.edge=rb(Ma,eb,null,db);Pb(Ua);Pb(Da)}else wb.edge=rb(Ua.site,wb.site);Da=Ba.x;Ua=Ba.y}Ba=ca.pop()}else if(Ma){eb=Ma.arc;Ma=eb.circle;
nb=Ma.x;db=Ma.cy;Ma={x:nb,y:db};Eb=eb.P;Tb=eb.N;wb=[eb];Hb(eb);for(eb=Eb;eb.circle&&1E-6>xd(nb-eb.circle.x)&&1E-6>xd(db-eb.circle.cy);)Eb=eb.P,wb.unshift(eb),Hb(eb),eb=Eb;wb.unshift(eb);fc(eb);for(Eb=Tb;Eb.circle&&1E-6>xd(nb-Eb.circle.x)&&1E-6>xd(db-Eb.circle.cy);)Tb=Eb.N,wb.push(Eb),Hb(Eb),Eb=Tb;wb.push(Eb);fc(Eb);db=wb.length;for(nb=1;nb<db;++nb)Eb=wb[nb],eb=wb[nb-1],Jb(Eb.edge,eb.site,Eb.site,Ma);eb=wb[0];Eb=wb[db-1];Eb.edge=rb(eb.site,Eb.site,null,Ma);Pb(eb);Pb(Eb)}else break}if(ua){ca=Jh;Ba=
Fc(ua[0][0],ua[0][1],ua[1][0],ua[1][1]);for(Da=ca.length;Da--;)if(Ua=ca[Da],!Pc(Ua,ua)||!Ba(Ua)||1E-6>xd(Ua.a.x-Ua.b.x)&&1E-6>xd(Ua.a.y-Ua.b.y))Ua.a=Ua.b=null,ca.splice(Da,1);ca=ua[0][0];Ba=ua[1][0];Da=ua[0][1];ua=ua[1][1];Ua=Sh;for(Ma=Ua.length;Ma--;)if((wb=Ua[Ma])&&wb.prepare())for(eb=wb.edges,db=eb.length,nb=0;nb<db;)if(Lc=eb[nb].end(),Ac=Lc.x,Kc=Lc.y,Tb=eb[++nb%db].start(),ic=Tb.x,Qc=Tb.y,1E-6<xd(Ac-ic)||1E-6<xd(Kc-Qc))Tb=eb,Eb=Tb.splice,mc=nb,ic=1E-6>xd(Ac-ca)&&1E-6<ua-Kc?{x:ca,y:1E-6>xd(ic-
ca)?Qc:ua}:1E-6>xd(Kc-ua)&&1E-6<Ba-Ac?{x:1E-6>xd(Qc-ua)?ic:Ba,y:ua}:1E-6>xd(Ac-Ba)&&1E-6<Kc-Da?{x:Ba,y:1E-6>xd(ic-Ba)?Qc:Da}:1E-6>xd(Kc-Da)&&1E-6<Ac-ca?{x:1E-6>xd(Qc-Da)?ic:ca,y:Da}:null,Ac=new Uc(wb.site,null),Ac.a=Lc,Ac.b=ic,Jh.push(Ac),Eb.call(Tb,mc,0,new sc(Ac,wb.site,null)),++db}ua={cells:Sh,edges:Jh};af=xi=Jh=Sh=null;return ua}function Ub(ca,ua){return ua.y-ca.y||ua.x-ca.x}function lc(ca){return ca.x}function tc(ca){return ca.y}function Rc(){return{leaf:!0,nodes:[],point:null,x:null,y:null}}
function kd(ca,ua,Ba,Da,Ma,Ua){if(!ca(ua,Ba,Da,Ma,Ua)){var nb=.5*(Ba+Ma),eb=.5*(Da+Ua);ua=ua.nodes;ua[0]&&kd(ca,ua[0],Ba,Da,nb,eb);ua[1]&&kd(ca,ua[1],nb,Da,Ma,eb);ua[2]&&kd(ca,ua[2],Ba,eb,nb,Ua);ua[3]&&kd(ca,ua[3],nb,eb,Ma,Ua)}}function Cd(ca,ua,Ba,Da,Ma,Ua,nb){var eb=Infinity,db;(function Kc(Eb,Tb,mc,ic,Ac){if(!(Tb>Ua||mc>nb||ic<Da||Ac<Ma)){if(Lc=Eb.point){var Lc,Qc=ua-Eb.x,od=Ba-Eb.y;Qc=Qc*Qc+od*od;Qc<eb&&(Qc=Math.sqrt(eb=Qc),Da=ua-Qc,Ma=Ba-Qc,Ua=ua+Qc,nb=Ba+Qc,db=Lc)}Lc=Eb.nodes;Qc=.5*(Tb+ic);
od=.5*(mc+Ac);for(var sd=(Ba>=od)<<1|ua>=Qc,qd=sd+4;sd<qd;++sd)if(Eb=Lc[sd&3])switch(sd&3){case 0:Kc(Eb,Tb,mc,Qc,od);break;case 1:Kc(Eb,Qc,mc,ic,od);break;case 2:Kc(Eb,Tb,od,Qc,Ac);break;case 3:Kc(Eb,Qc,od,ic,Ac)}}})(ca,Da,Ma,Ua,nb);return db}function Gd(ca,ua){ca=Pa.rgb(ca);ua=Pa.rgb(ua);var Ba=ca.r,Da=ca.g,Ma=ca.b,Ua=ua.r-Ba,nb=ua.g-Da,eb=ua.b-Ma;return function(db){return"#"+vb(Math.round(Ba+Ua*db))+vb(Math.round(Da+nb*db))+vb(Math.round(Ma+eb*db))}}function Ad(ca,ua){var Ba={},Da={},Ma;for(Ma in ca)Ma in
ua?Ba[Ma]=Cc(ca[Ma],ua[Ma]):Da[Ma]=ca[Ma];for(Ma in ua)Ma in ca||(Da[Ma]=ua[Ma]);return function(Ua){for(Ma in Ba)Da[Ma]=Ba[Ma](Ua);return Da}}function Nc(ca,ua){ca=+ca;ua=+ua;return function(Ba){return ca*(1-Ba)+ua*Ba}}function cd(ca,ua){var Ba=R.lastIndex=X.lastIndex=0,Da,Ma,Ua,nb=-1,eb=[],db=[];ca+="";for(ua+="";(Da=R.exec(ca))&&(Ma=X.exec(ua));)(Ua=Ma.index)>Ba&&(Ua=ua.slice(Ba,Ua),eb[nb]?eb[nb]+=Ua:eb[++nb]=Ua),(Da=Da[0])===(Ma=Ma[0])?eb[nb]?eb[nb]+=Ma:eb[++nb]=Ma:(eb[++nb]=null,db.push({i:nb,
x:Nc(Da,Ma)})),Ba=X.lastIndex;Ba<ua.length&&(Ua=ua.slice(Ba),eb[nb]?eb[nb]+=Ua:eb[++nb]=Ua);return 2>eb.length?db[0]?(ua=db[0].x,function(wb){return ua(wb)+""}):function(){return ua}:(ua=db.length,function(wb){for(var Eb=0,Tb;Eb<ua;++Eb)eb[(Tb=db[Eb]).i]=Tb.x(wb);return eb.join("")})}function Cc(ca,ua){for(var Ba=Pa.interpolators.length,Da;0<=--Ba&&!(Da=Pa.interpolators[Ba](ca,ua)););return Da}function dd(ca,ua){var Ba=[],Da=[],Ma=ca.length,Ua=ua.length,nb=Math.min(ca.length,ua.length),eb;for(eb=
0;eb<nb;++eb)Ba.push(Cc(ca[eb],ua[eb]));for(;eb<Ma;++eb)Da[eb]=ca[eb];for(;eb<Ua;++eb)Da[eb]=ua[eb];return function(db){for(eb=0;eb<nb;++eb)Da[eb]=Ba[eb](db);return Da}}function Vc(ca){return function(ua){return 0>=ua?0:1<=ua?1:ca(ua)}}function Sc(ca){return function(ua){return 1-ca(1-ua)}}function id(ca){return function(ua){return.5*(.5>ua?ca(2*ua):2-ca(2-2*ua))}}function Md(ca){return ca*ca}function Sd(ca){return ca*ca*ca}function Td(ca){if(0>=ca)return 0;if(1<=ca)return 1;var ua=ca*ca,Ba=ua*ca;
return 4*(.5>ca?Ba:3*(ca-ua)+Ba-.75)}function Ue(ca){return 1-Math.cos(ca*kg)}function Ke(ca){return Math.pow(2,10*(ca-1))}function ve(ca){return 1-Math.sqrt(1-ca*ca)}function zf(ca){return ca<1/2.75?7.5625*ca*ca:ca<2/2.75?7.5625*(ca-=1.5/2.75)*ca+.75:ca<2.5/2.75?7.5625*(ca-=2.25/2.75)*ca+.9375:7.5625*(ca-=2.625/2.75)*ca+.984375}function Ef(ca,ua){ua-=ca;return function(Ba){return Math.round(ca+ua*Ba)}}function qf(ca){var ua=[ca.a,ca.b],Ba=[ca.c,ca.d],Da=Ff(ua),Ma=ua[0]*Ba[0]+ua[1]*Ba[1],Ua=-Ma;Ba[0]+=
Ua*ua[0];Ba[1]+=Ua*ua[1];Ua=Ff(Ba)||0;ua[0]*Ba[1]<Ba[0]*ua[1]&&(ua[0]*=-1,ua[1]*=-1,Da*=-1,Ma*=-1);this.rotate=(Da?Math.atan2(ua[1],ua[0]):Math.atan2(-Ba[0],Ba[1]))*$f;this.translate=[ca.e,ca.f];this.scale=[Da,Ua];this.skew=Ua?Math.atan2(Ma,Ua)*$f:0}function Ff(ca){var ua=Math.sqrt(ca[0]*ca[0]+ca[1]*ca[1]);ua&&(ca[0]/=ua,ca[1]/=ua);return ua}function Rf(ca){return ca.length?ca.pop()+",":""}function Ud(ca,ua,Ba,Da){ca[0]!==ua[0]||ca[1]!==ua[1]?(Ba=Ba.push("translate(",null,",",null,")"),Da.push({i:Ba-
4,x:Nc(ca[0],ua[0])},{i:Ba-2,x:Nc(ca[1],ua[1])})):(ua[0]||ua[1])&&Ba.push("translate("+ua+")")}function Ae(ca,ua,Ba,Da){ca!==ua?(180<ca-ua?ua+=360:180<ua-ca&&(ca+=360),Da.push({i:Ba.push(Rf(Ba)+"rotate(",null,")")-2,x:Nc(ca,ua)})):ua&&Ba.push(Rf(Ba)+"rotate("+ua+")")}function rf(ca,ua,Ba,Da){ca!==ua?Da.push({i:Ba.push(Rf(Ba)+"skewX(",null,")")-2,x:Nc(ca,ua)}):ua&&Ba.push(Rf(Ba)+"skewX("+ua+")")}function hf(ca,ua,Ba,Da){ca[0]!==ua[0]||ca[1]!==ua[1]?(Ba=Ba.push(Rf(Ba)+"scale(",null,",",null,")"),Da.push({i:Ba-
4,x:Nc(ca[0],ua[0])},{i:Ba-2,x:Nc(ca[1],ua[1])})):1===ua[0]&&1===ua[1]||Ba.push(Rf(Ba)+"scale("+ua+")")}function Te(ca,ua){var Ba=[],Da=[];ca=Pa.transform(ca);ua=Pa.transform(ua);Ud(ca.translate,ua.translate,Ba,Da);Ae(ca.rotate,ua.rotate,Ba,Da);rf(ca.skew,ua.skew,Ba,Da);hf(ca.scale,ua.scale,Ba,Da);ca=ua=null;return function(Ma){for(var Ua=-1,nb=Da.length,eb;++Ua<nb;)Ba[(eb=Da[Ua]).i]=eb.x(Ma);return Ba.join("")}}function Be(ca,ua){ua=(ua-=ca=+ca)||1/ua;return function(Ba){return(Ba-ca)/ua}}function Ie(ca,
ua){ua=(ua-=ca=+ca)||1/ua;return function(Ba){return Math.max(0,Math.min(1,(Ba-ca)/ua))}}function nf(ca){for(var ua=[],Ba=ca.parent;null!=Ba;)ua.push(ca),ca=Ba,Ba=Ba.parent;ua.push(ca);return ua}function Zc(ca){ca.fixed|=2}function Bd(ca){ca.fixed&=-7}function Ob(ca){ca.fixed|=4;ca.px=ca.x;ca.py=ca.y}function Zb(ca){ca.fixed&=-5}function Mc(ca,ua,Ba){var Da=0,Ma=0;ca.charge=0;if(!ca.leaf)for(var Ua=ca.nodes,nb=Ua.length,eb=-1,db;++eb<nb;)db=Ua[eb],null!=db&&(Mc(db,ua,Ba),ca.charge+=db.charge,Da+=
db.charge*db.cx,Ma+=db.charge*db.cy);ca.point&&(ca.leaf||(ca.point.x+=Math.random()-.5,ca.point.y+=Math.random()-.5),ua*=Ba[ca.point.index],ca.charge+=ca.pointCharge=ua,Da+=ua*ca.point.x,Ma+=ua*ca.point.y);ca.cx=Da/ca.charge;ca.cy=Ma/ca.charge}function Fd(ca,ua){Pa.rebind(ca,ua,"sort","children","value");ca.nodes=ca;ca.links=oe;return ca}function rd(ca,ua){for(var Ba=[ca];null!=(ca=Ba.pop());)if(ua(ca),(Ma=ca.children)&&(Da=Ma.length))for(var Da,Ma;0<=--Da;)Ba.push(Ma[Da])}function pe(ca,ua){for(var Ba=
[ca],Da=[];null!=(ca=Ba.pop());)if(Da.push(ca),(Ua=ca.children)&&(Ma=Ua.length)){ca=-1;for(var Ma,Ua;++ca<Ma;)Ba.push(Ua[ca])}for(;null!=(ca=Da.pop());)ua(ca)}function Hd(ca){return ca.children}function qe(ca){return ca.value}function Ge(ca,ua){return ua.value-ca.value}function oe(ca){return Pa.merge(ca.map(function(ua){return(ua.children||[]).map(function(Ba){return{source:ua,target:Ba}})}))}function xb(ca){return ca.x}function oc(ca){return ca.y}function Yb(ca,ua,Ba){ca.y0=ua;ca.y=Ba}function Bc(ca){return Pa.range(ca.length)}
function Yc(ca){var ua=-1;ca=ca[0].length;for(var Ba=[];++ua<ca;)Ba[ua]=0;return Ba}function bd(ca){for(var ua=1,Ba=0,Da=ca[0][1],Ma,Ua=ca.length;ua<Ua;++ua)(Ma=ca[ua][1])>Da&&(Ba=ua,Da=Ma);return Ba}function Tc(ca){return ca.reduce(Oc,0)}function Oc(ca,ua){return ca+ua[1]}function wc(ca,ua){return rc(ca,Math.ceil(Math.log(ua.length)/Math.LN2+1))}function rc(ca,ua){var Ba=-1,Da=+ca[0];ca=(ca[1]-Da)/ua;for(var Ma=[];++Ba<=ua;)Ma[Ba]=ca*Ba+Da;return Ma}function pc(ca){return[Pa.min(ca),Pa.max(ca)]}
function ud(ca,ua){return ca.value-ua.value}function ae(ca,ua){var Ba=ca._pack_next;ca._pack_next=ua;ua._pack_prev=ca;ua._pack_next=Ba;Ba._pack_prev=ua}function Wd(ca,ua){ca._pack_next=ua;ua._pack_prev=ca}function Ce(ca,ua){var Ba=ua.x-ca.x,Da=ua.y-ca.y;ca=ca.r+ua.r;return.999*ca*ca>Ba*Ba+Da*Da}function Xd(ca){function ua(Qc){Da=Math.min(Qc.x-Qc.r,Da);Ma=Math.max(Qc.x+Qc.r,Ma);Ua=Math.min(Qc.y-Qc.r,Ua);nb=Math.max(Qc.y+Qc.r,nb)}if((Ba=ca.children)&&(Eb=Ba.length)){var Ba,Da=Infinity,Ma=-Infinity,
Ua=Infinity,nb=-Infinity,eb,db,wb,Eb;Ba.forEach(bf);var Tb=Ba[0];Tb.x=-Tb.r;Tb.y=0;ua(Tb);if(1<Eb){var mc=Ba[1];mc.x=mc.r;mc.y=0;ua(mc);if(2<Eb){var ic=Ba[2];Oe(Tb,mc,ic);ua(ic);ae(Tb,ic);Tb._pack_prev=ic;ae(ic,mc);mc=Tb._pack_next;for(eb=3;eb<Eb;eb++){Oe(Tb,mc,ic=Ba[eb]);var Ac=0,Kc=1,Lc=1;for(db=mc._pack_next;db!==mc;db=db._pack_next,Kc++)if(Ce(db,ic)){Ac=1;break}if(1==Ac)for(wb=Tb._pack_prev;wb!==db._pack_prev&&!Ce(wb,ic);wb=wb._pack_prev,Lc++);Ac?(Kc<Lc||Kc==Lc&&mc.r<Tb.r?Wd(Tb,mc=db):Wd(Tb=wb,
mc),eb--):(ae(Tb,ic),mc=ic,ua(ic))}}}Tb=(Da+Ma)/2;mc=(Ua+nb)/2;for(eb=db=0;eb<Eb;eb++)ic=Ba[eb],ic.x-=Tb,ic.y-=mc,db=Math.max(db,ic.r+Math.sqrt(ic.x*ic.x+ic.y*ic.y));ca.r=db;Ba.forEach(Ve)}}function bf(ca){ca._pack_next=ca._pack_prev=ca}function Ve(ca){delete ca._pack_next;delete ca._pack_prev}function vf(ca,ua,Ba,Da){var Ma=ca.children;ca.x=ua+=Da*ca.x;ca.y=Ba+=Da*ca.y;ca.r*=Da;if(Ma){ca=-1;for(var Ua=Ma.length;++ca<Ua;)vf(Ma[ca],ua,Ba,Da)}}function Oe(ca,ua,Ba){var Da=ca.r+Ba.r,Ma=ua.x-ca.x,Ua=
ua.y-ca.y;if(Da&&(Ma||Ua)){var nb=ua.r+Ba.r,eb=Ma*Ma+Ua*Ua;nb*=nb;Da*=Da;ua=.5+(Da-nb)/(2*eb);nb=Math.sqrt(Math.max(0,2*nb*(Da+eb)-(Da-=eb)*Da-nb*nb))/(2*eb);Ba.x=ca.x+ua*Ma+nb*Ua;Ba.y=ca.y+ua*Ua-nb*Ma}else Ba.x=ca.x+Da,Ba.y=ca.y}function Mf(ca,ua){return ca.parent==ua.parent?1:2}function ng(ca){var ua=ca.children;return ua.length?ua[0]:ca.t}function Sg(ca){var ua=ca.children,Ba;return(Ba=ua.length)?ua[Ba-1]:ca.t}function Og(ca){return 1+Pa.max(ca,function(ua){return ua.y})}function Ah(ca){return ca.reduce(function(ua,
Ba){return ua+Ba.x},0)/ca.length}function Kh(ca){var ua=ca.children;return ua&&ua.length?Kh(ua[0]):ca}function rh(ca){var ua=ca.children,Ba;return ua&&(Ba=ua.length)?rh(ua[Ba-1]):ca}function Yg(ca){return{x:ca.x,y:ca.y,dx:ca.dx,dy:ca.dy}}function sh(ca,ua){var Ba=ca.x+ua[3],Da=ca.y+ua[0],Ma=ca.dx-ua[1]-ua[3];ca=ca.dy-ua[0]-ua[2];0>Ma&&(Ba+=Ma/2,Ma=0);0>ca&&(Da+=ca/2,ca=0);return{x:Ba,y:Da,dx:Ma,dy:ca}}function ah(ca){var ua=ca[0];ca=ca[ca.length-1];return ua<ca?[ua,ca]:[ca,ua]}function bh(ca){return ca.rangeExtent?
ca.rangeExtent():ah(ca.range())}function Th(ca,ua,Ba,Da){var Ma=Ba(ca[0],ca[1]),Ua=Da(ua[0],ua[1]);return function(nb){return Ua(Ma(nb))}}function ch(ca,ua){var Ba=0,Da=ca.length-1,Ma=ca[Ba],Ua=ca[Da];if(Ua<Ma){var nb=Ba;Ba=Da;Da=nb;nb=Ma;Ma=Ua;Ua=nb}ca[Ba]=ua.floor(Ma);ca[Da]=ua.ceil(Ua);return ca}function bg(ca){return ca?{floor:function(ua){return Math.floor(ua/ca)*ca},ceil:function(ua){return Math.ceil(ua/ca)*ca}}:Gc}function og(ca,ua,Ba,Da){var Ma=[],Ua=[],nb=0,eb=Math.min(ca.length,ua.length)-
1;ca[eb]<ca[0]&&(ca=ca.slice().reverse(),ua=ua.slice().reverse());for(;++nb<=eb;)Ma.push(Ba(ca[nb-1],ca[nb])),Ua.push(Da(ua[nb-1],ua[nb]));return function(db){var wb=Pa.bisect(ca,db,1,eb)-1;return Ua[wb](Ma[wb](db))}}function qg(ca,ua,Ba,Da){function Ma(){var db=2<Math.min(ca.length,ua.length)?og:Th,wb=Da?Ie:Be;nb=db(ca,ua,wb,Ba);eb=db(ua,ca,wb,Cc);return Ua}function Ua(db){return nb(db)}var nb,eb;Ua.invert=function(db){return eb(db)};Ua.domain=function(db){if(!arguments.length)return ca;ca=db.map(Number);
return Ma()};Ua.range=function(db){if(!arguments.length)return ua;ua=db;return Ma()};Ua.rangeRound=function(db){return Ua.range(db).interpolate(Ef)};Ua.clamp=function(db){if(!arguments.length)return Da;Da=db;return Ma()};Ua.interpolate=function(db){if(!arguments.length)return Ba;Ba=db;return Ma()};Ua.ticks=function(db){return Pa.range.apply(Pa,Ig(ca,db))};Ua.tickFormat=function(db,wb){return d3_scale_linearTickFormat(ca,db,wb)};Ua.nice=function(db){Tg(ca,db);return Ma()};Ua.copy=function(){return qg(ca,
ua,Ba,Da)};return Ma()}function ug(ca,ua){return Pa.rebind(ca,ua,"range","rangeRound","interpolate","clamp")}function Tg(ca,ua){ch(ca,bg(Ig(ca,ua)[2]));ch(ca,bg(Ig(ca,ua)[2]));return ca}function Ig(ca,ua){null==ua&&(ua=10);ca=ah(ca);var Ba=ca[1]-ca[0],Da=Math.pow(10,Math.floor(Math.log(Ba/ua)/Math.LN10));ua=ua/Ba*Da;.15>=ua?Da*=10:.35>=ua?Da*=5:.75>=ua&&(Da*=2);ca[0]=Math.ceil(ca[0]/Da)*Da;ca[1]=Math.floor(ca[1]/Da)*Da+.5*Da;ca[2]=Da;return ca}function jh(ca,ua,Ba,Da){function Ma(eb){return(Ba?Math.log(0>
eb?0:eb):-Math.log(0<eb?0:-eb))/Math.log(ua)}function Ua(eb){return Ba?Math.pow(ua,eb):-Math.pow(ua,-eb)}function nb(eb){return ca(Ma(eb))}nb.invert=function(eb){return Ua(ca.invert(eb))};nb.domain=function(eb){if(!arguments.length)return Da;Ba=0<=eb[0];ca.domain((Da=eb.map(Number)).map(Ma));return nb};nb.base=function(eb){if(!arguments.length)return ua;ua=+eb;ca.domain(Da.map(Ma));return nb};nb.nice=function(){var eb=ch(Da.map(Ma),Ba?Math:Xc);ca.domain(eb);Da=eb.map(Ua);return nb};nb.ticks=function(){var eb=
ah(Da),db=[],wb=eb[0];eb=eb[1];var Eb=Math.floor(Ma(wb)),Tb=Math.ceil(Ma(eb)),mc=ua%1?2:ua;if(isFinite(Tb-Eb)){if(Ba){for(;Eb<Tb;Eb++)for(var ic=1;ic<mc;ic++)db.push(Ua(Eb)*ic);db.push(Ua(Eb))}else for(db.push(Ua(Eb));Eb++<Tb;)for(ic=mc-1;0<ic;ic--)db.push(Ua(Eb)*ic);for(Eb=0;db[Eb]<wb;Eb++);for(Tb=db.length;db[Tb-1]>eb;Tb--);db=db.slice(Eb,Tb)}return db};nb.copy=function(){return jh(ca.copy(),ua,Ba,Da)};return ug(nb,ca)}function Ug(ca,ua,Ba){function Da(nb){return ca(Ma(nb))}var Ma=Wf(ua),Ua=Wf(1/
ua);Da.invert=function(nb){return Ua(ca.invert(nb))};Da.domain=function(nb){if(!arguments.length)return Ba;ca.domain((Ba=nb.map(Number)).map(Ma));return Da};Da.ticks=function(nb){return Pa.range.apply(Pa,Ig(Ba,nb))};Da.tickFormat=function(nb,eb){return d3_scale_linearTickFormat(Ba,nb,eb)};Da.nice=function(nb){return Da.domain(Tg(Ba,nb))};Da.exponent=function(nb){if(!arguments.length)return ua;Ma=Wf(ua=nb);Ua=Wf(1/ua);ca.domain(Ba.map(Ma));return Da};Da.copy=function(){return Ug(ca.copy(),ua,Ba)};
return ug(Da,ca)}function Wf(ca){return function(ua){return 0>ua?-Math.pow(-ua,ca):Math.pow(ua,ca)}}function kh(ca,ua){function Ba(eb){return Ua[((Ma.get(eb)||("range"===ua.t?Ma.set(eb,ca.push(eb)):NaN))-1)%Ua.length]}function Da(eb,db){return Pa.range(ca.length).map(function(wb){return eb+db*wb})}var Ma,Ua,nb;Ba.domain=function(eb){if(!arguments.length)return ca;ca=[];Ma=new r;for(var db=-1,wb=eb.length,Eb;++db<wb;)Ma.has(Eb=eb[db])||Ma.set(Eb,ca.push(Eb));return Ba[ua.t].apply(Ba,ua.a)};Ba.range=
function(eb){if(!arguments.length)return Ua;Ua=eb;nb=0;ua={t:"range",a:arguments};return Ba};Ba.rangePoints=function(eb,db){2>arguments.length&&(db=0);var wb=eb[0],Eb=eb[1];Eb=2>ca.length?(wb=(wb+Eb)/2,0):(Eb-wb)/(ca.length-1+db);Ua=Da(wb+Eb*db/2,Eb);nb=0;ua={t:"rangePoints",a:arguments};return Ba};Ba.rangeRoundPoints=function(eb,db){2>arguments.length&&(db=0);var wb=eb[0],Eb=eb[1],Tb=2>ca.length?(wb=Eb=Math.round((wb+Eb)/2),0):(Eb-wb)/(ca.length-1+db)|0;Ua=Da(wb+Math.round(Tb*db/2+(Eb-wb-(ca.length-
1+db)*Tb)/2),Tb);nb=0;ua={t:"rangeRoundPoints",a:arguments};return Ba};Ba.rangeBands=function(eb,db,wb){2>arguments.length&&(db=0);3>arguments.length&&(wb=db);var Eb=eb[1]<eb[0],Tb=eb[Eb-0],mc=(eb[1-Eb]-Tb)/(ca.length-db+2*wb);Ua=Da(Tb+mc*wb,mc);Eb&&Ua.reverse();nb=mc*(1-db);ua={t:"rangeBands",a:arguments};return Ba};Ba.rangeRoundBands=function(eb,db,wb){2>arguments.length&&(db=0);3>arguments.length&&(wb=db);var Eb=eb[1]<eb[0],Tb=eb[Eb-0],mc=eb[1-Eb],ic=Math.floor((mc-Tb)/(ca.length-db+2*wb));Ua=
Da(Tb+Math.round((mc-Tb-(ca.length-db)*ic)/2),ic);Eb&&Ua.reverse();nb=Math.round(ic*(1-db));ua={t:"rangeRoundBands",a:arguments};return Ba};Ba.rangeBand=function(){return nb};Ba.rangeExtent=function(){return ah(ua.a[0])};Ba.copy=function(){return kh(ca,ua)};return Ba.domain(ca)}function pg(ca,ua){function Ba(){var Ua=0,nb=ua.length;for(Ma=[];++Ua<nb;)Ma[Ua-1]=Pa.quantile(ca,Ua/nb);return Da}function Da(Ua){if(!isNaN(Ua=+Ua))return ua[Pa.bisect(Ma,Ua)]}var Ma;Da.domain=function(Ua){if(!arguments.length)return ca;
ca=Ua.map(k).filter(m).sort(n);return Ba()};Da.range=function(Ua){if(!arguments.length)return ua;ua=Ua;return Ba()};Da.quantiles=function(){return Ma};Da.invertExtent=function(Ua){Ua=ua.indexOf(Ua);return 0>Ua?[NaN,NaN]:[0<Ua?Ma[Ua-1]:ca[0],Ua<Ma.length?Ma[Ua]:ca[ca.length-1]]};Da.copy=function(){return pg(ca,ua)};return Ba()}function Bg(ca,ua,Ba){function Da(eb){return Ba[Math.max(0,Math.min(nb,Math.floor(Ua*(eb-ca))))]}function Ma(){Ua=Ba.length/(ua-ca);nb=Ba.length-1;return Da}var Ua,nb;Da.domain=
function(eb){if(!arguments.length)return[ca,ua];ca=+eb[0];ua=+eb[eb.length-1];return Ma()};Da.range=function(eb){if(!arguments.length)return Ba;Ba=eb;return Ma()};Da.invertExtent=function(eb){eb=Ba.indexOf(eb);eb=0>eb?NaN:eb/Ua+ca;return[eb,eb+1/Ua]};Da.copy=function(){return Bg(ca,ua,Ba)};return Ma()}function th(ca,ua){function Ba(Da){if(Da<=Da)return ua[Pa.bisect(ca,Da)]}Ba.domain=function(Da){if(!arguments.length)return ca;ca=Da;return Ba};Ba.range=function(Da){if(!arguments.length)return ua;ua=
Da;return Ba};Ba.invertExtent=function(Da){Da=ua.indexOf(Da);return[ca[Da-1],ca[Da]]};Ba.copy=function(){return th(ca,ua)};return Ba}function uh(ca){function ua(Ba){return+Ba}ua.invert=ua;ua.domain=ua.range=function(Ba){if(!arguments.length)return ca;ca=Ba.map(ua);return ua};ua.ticks=function(Ba){return Pa.range.apply(Pa,Ig(ca,Ba))};ua.tickFormat=function(Ba,Da){return d3_scale_linearTickFormat(ca,Ba,Da)};ua.copy=function(){return uh(ca)};return ua}function Bh(){return 0}function Gg(ca){return ca.innerRadius}
function lh(ca){return ca.outerRadius}function Lh(ca){return ca.startAngle}function vh(ca){return ca.endAngle}function Ga(ca){return ca&&ca.padAngle}function Fa(ca,ua,Ba,Da){return 0<(ca-Ba)*ua-(ua-Da)*ca?0:1}function Oa(ca,ua,Ba,Da,Ma){var Ua=ca[0]-ua[0],nb=ca[1]-ua[1];Ma=(Ma?Da:-Da)/Math.sqrt(Ua*Ua+nb*nb);nb*=Ma;Ua*=-Ma;var eb=ca[0]+nb,db=ca[1]+Ua,wb=ua[0]+nb,Eb=ua[1]+Ua;ca=(eb+wb)/2;ua=(db+Eb)/2;Ma=wb-eb;var Tb=Eb-db,mc=Ma*Ma+Tb*Tb;Da=Ba-Da;Eb=eb*Eb-wb*db;var ic=(0>Tb?-1:1)*Math.sqrt(Math.max(0,
Da*Da*mc-Eb*Eb));eb=(Eb*Tb-Ma*ic)/mc;db=(-Eb*Ma-Tb*ic)/mc;wb=(Eb*Tb+Ma*ic)/mc;Ma=(-Eb*Ma+Tb*ic)/mc;Tb=eb-ca;mc=db-ua;ca=wb-ca;ua=Ma-ua;Tb*Tb+mc*mc>ca*ca+ua*ua&&(eb=wb,db=Ma);return[[eb-nb,db-Ua],[eb*Ba/Da,db*Ba/Da]]}function Sa(){return!0}function cb(ca){function ua(db){function wb(){Eb.push("M",Ua(ca(Tb),eb))}for(var Eb=[],Tb=[],mc=-1,ic=db.length,Ac,Kc=Aa(Ba),Lc=Aa(Da);++mc<ic;)Ma.call(this,Ac=db[mc],mc)?Tb.push([+Kc.call(this,Ac,mc),+Lc.call(this,Ac,mc)]):Tb.length&&(wb(),Tb=[]);Tb.length&&wb();
return Eb.length?Eb.join(""):null}var Ba=ob,Da=Cb,Ma=Sa,Ua=jb,nb=Ua.key,eb=.7;ua.x=function(db){if(!arguments.length)return Ba;Ba=db;return ua};ua.y=function(db){if(!arguments.length)return Da;Da=db;return ua};ua.defined=function(db){if(!arguments.length)return Ma;Ma=db;return ua};ua.interpolate=function(db){if(!arguments.length)return nb;nb="function"===typeof db?Ua=db:(Ua=ge.get(db)||jb).key;return ua};ua.tension=function(db){if(!arguments.length)return eb;eb=db;return ua};return ua}function jb(ca){return 1<
ca.length?ca.join("L"):ca+"Z"}function Bb(ca){return ca.join("L")+"Z"}function Xb(ca){for(var ua=0,Ba=ca.length,Da=ca[0],Ma=[Da[0],",",Da[1]];++ua<Ba;)Ma.push("V",(Da=ca[ua])[1],"H",Da[0]);return Ma.join("")}function Ib(ca){for(var ua=0,Ba=ca.length,Da=ca[0],Ma=[Da[0],",",Da[1]];++ua<Ba;)Ma.push("H",(Da=ca[ua])[0],"V",Da[1]);return Ma.join("")}function gc(ca,ua){if(1>ua.length||ca.length!=ua.length&&ca.length!=ua.length+2)return jb(ca);var Ba=ca.length!=ua.length,Da="",Ma=ca[0],Ua=ca[1],nb=ua[0],
eb=nb,db=1;Ba&&(Da+="Q"+(Ua[0]-2*nb[0]/3)+","+(Ua[1]-2*nb[1]/3)+","+Ua[0]+","+Ua[1],Ma=ca[1],db=2);if(1<ua.length)for(eb=ua[1],Ua=ca[db],db++,Da+="C"+(Ma[0]+nb[0])+","+(Ma[1]+nb[1])+","+(Ua[0]-eb[0])+","+(Ua[1]-eb[1])+","+Ua[0]+","+Ua[1],Ma=2;Ma<ua.length;Ma++,db++)Ua=ca[db],eb=ua[Ma],Da+="S"+(Ua[0]-eb[0])+","+(Ua[1]-eb[1])+","+Ua[0]+","+Ua[1];Ba&&(ca=ca[db],Da+="Q"+(Ua[0]+2*eb[0]/3)+","+(Ua[1]+2*eb[1]/3)+","+ca[0]+","+ca[1]);return Da}function hc(ca,ua){var Ba=[];ua=(1-ua)/2;for(var Da,Ma=ca[0],
Ua=ca[1],nb=1,eb=ca.length;++nb<eb;)Da=Ma,Ma=Ua,Ua=ca[nb],Ba.push([ua*(Ua[0]-Da[0]),ua*(Ua[1]-Da[1])]);return Ba}function qc(ca){if(3>ca.length)return jb(ca);var ua=1,Ba=ca.length,Da=ca[0],Ma=Da[0],Ua=Da[1],nb=[Ma,Ma,Ma,(Da=ca[1])[0]],eb=[Ua,Ua,Ua,Da[1]];Ma=[Ma,",",Ua,"L",Ec(re,nb),",",Ec(re,eb)];for(ca.push(ca[Ba-1]);++ua<=Ba;)Da=ca[ua],nb.shift(),nb.push(Da[0]),eb.shift(),eb.push(Da[1]),ld(Ma,nb,eb);ca.pop();Ma.push("L",Da);return Ma.join("")}function Ec(ca,ua){return ca[0]*ua[0]+ca[1]*ua[1]+ca[2]*
ua[2]+ca[3]*ua[3]}function ld(ca,ua,Ba){ca.push("C",Ec(be,ua),",",Ec(be,Ba),",",Ec(ke,ua),",",Ec(ke,Ba),",",Ec(re,ua),",",Ec(re,Ba))}function Dd(ca,ua){return(ua[1]-ca[1])/(ua[0]-ca[0])}function ye(ca){for(var ua,Ba=-1,Da=ca.length,Ma,Ua;++Ba<Da;)ua=ca[Ba],Ma=ua[0],Ua=ua[1]-kg,ua[0]=Ma*Math.cos(Ua),ua[1]=Ma*Math.sin(Ua);return ca}function ze(ca){function ua(mc){function ic(){Ac.push("M",eb(ca(Lc),Tb),Eb,wb(ca(Kc.reverse()),Tb),"Z")}for(var Ac=[],Kc=[],Lc=[],Qc=-1,od=mc.length,sd,qd=Aa(Ba),Id=Aa(Ma),
zd=Ba===Da?function(){return le}:Aa(Da),ee=Ma===Ua?function(){return je}:Aa(Ua),le,je;++Qc<od;)nb.call(this,sd=mc[Qc],Qc)?(Kc.push([le=+qd.call(this,sd,Qc),je=+Id.call(this,sd,Qc)]),Lc.push([+zd.call(this,sd,Qc),+ee.call(this,sd,Qc)])):Kc.length&&(ic(),Kc=[],Lc=[]);Kc.length&&ic();return Ac.length?Ac.join(""):null}var Ba=ob,Da=ob,Ma=0,Ua=Cb,nb=Sa,eb=jb,db=eb.key,wb=eb,Eb="L",Tb=.7;ua.x=function(mc){if(!arguments.length)return Da;Ba=Da=mc;return ua};ua.x0=function(mc){if(!arguments.length)return Ba;
Ba=mc;return ua};ua.x1=function(mc){if(!arguments.length)return Da;Da=mc;return ua};ua.y=function(mc){if(!arguments.length)return Ua;Ma=Ua=mc;return ua};ua.y0=function(mc){if(!arguments.length)return Ma;Ma=mc;return ua};ua.y1=function(mc){if(!arguments.length)return Ua;Ua=mc;return ua};ua.defined=function(mc){if(!arguments.length)return nb;nb=mc;return ua};ua.interpolate=function(mc){if(!arguments.length)return db;db="function"===typeof mc?eb=mc:(eb=ge.get(mc)||jb).key;wb=eb.reverse||eb;Eb=eb.closed?
"M":"L";return ua};ua.tension=function(mc){if(!arguments.length)return Tb;Tb=mc;return ua};return ua}function We(ca){return ca.source}function fg(ca){return ca.target}function He(ca){return ca.radius}function cg(ca){return[ca.x,ca.y]}function Xf(ca){return function(){var ua=ca.apply(this,arguments),Ba=ua[0];ua=ua[1]-kg;return[Ba*Math.cos(ua),Ba*Math.sin(ua)]}}function Af(){return 64}function Pg(){return"circle"}function Mg(ca){ca=Math.sqrt(ca/gf);return"M0,"+ca+"A"+ca+","+ca+" 0 1,1 0,"+-ca+"A"+ca+
","+ca+" 0 1,1 0,"+ca+"Z"}function vg(ca){return function(){var ua,Ba,Da;(ua=this[ca])&&(Da=ua[Ba=ua.active])&&(Da.timer.c=null,Da.timer.t=NaN,--ua.count?delete ua[Ba]:delete this[ca],ua.active+=.5,Da.event&&Da.event.interrupt.call(this,this.__data__,Da.index))}}function Jf(ca,ua,Ba){Vd(ca,Ne);ca.namespace=ua;ca.id=Ba;return ca}function Yf(ca,ua,Ba,Da){var Ma=ca.id,Ua=ca.namespace;return fa(ca,"function"===typeof Ba?function(nb,eb,db){nb[Ua][Ma].tween.set(ua,Da(Ba.call(nb,nb.__data__,eb,db)))}:(Ba=
Da(Ba),function(nb){nb[Ua][Ma].tween.set(ua,Ba)}))}function wh(ca){null==ca&&(ca="");return function(){this.textContent=ca}}function Uh(ca){return null==ca?"__transition__":"__transition_"+ca+"__"}function hi(ca,ua,Ba,Da,Ma){function Ua(Kc){var Lc=wb.delay;Ac.t=Lc+ic;if(Lc<=Kc)return nb(Kc-Lc);Ac.c=nb}function nb(Kc){var Lc=db.active,Qc=db[Lc];Qc&&(Qc.timer.c=null,Qc.timer.t=NaN,--db.count,delete db[Lc],Qc.event&&Qc.event.interrupt.call(ca,ca.__data__,Qc.index));for(var od in db)+od<Da&&(Lc=db[od],
Lc.timer.c=null,Lc.timer.t=NaN,--db.count,delete db[od]);Ac.c=eb;ab(function(){Ac.c&&eb(Kc||1)&&(Ac.c=null,Ac.t=NaN);return 1},0,ic);db.active=Da;wb.event&&wb.event.start.call(ca,ca.__data__,ua);mc=[];wb.tween.forEach(function(sd,qd){(qd=qd.call(ca,ca.__data__,ua))&&mc.push(qd)});Tb=wb.ease;Eb=wb.duration}function eb(Kc){Kc/=Eb;for(var Lc=Tb(Kc),Qc=mc.length;0<Qc;)mc[--Qc].call(ca,Lc);if(1<=Kc)return wb.event&&wb.event.end.call(ca,ca.__data__,ua),--db.count?delete db[Da]:delete ca[Ba],1}var db=ca[Ba]||
(ca[Ba]={active:0,count:0}),wb=db[Da],Eb,Tb,mc;if(!wb){var ic=Ma.time;var Ac=ab(Ua,0,ic);wb=db[Da]={tween:new r,time:ic,timer:Ac,delay:Ma.delay,duration:Ma.duration,ease:Ma.ease,index:ua};Ma=null;++db.count}}function yi(ca,ua,Ba){ca.attr("transform",function(Da){var Ma=ua(Da);return"translate("+(isFinite(Ma)?Ma:Ba(Da))+",0)"})}function zi(ca,ua,Ba){ca.attr("transform",function(Da){var Ma=ua(Da);return"translate(0,"+(isFinite(Ma)?Ma:Ba(Da))+")"})}function Vh(ca){return JSON.parse(ca.responseText)}
function Xa(ca){var ua=kc.createRange();ua.selectNode(kc.body);return ua.createContextualFragment(ca.responseText)}var Pa={version:"3.8.0"},Mb=[].slice,bc=function(ca){return Mb.call(ca)},kc=self.document;if(kc)try{bc(kc.documentElement.childNodes)[0].nodeType}catch(ca){bc=function(ua){for(var Ba=ua.length,Da=Array(Ba);Ba--;)Da[Ba]=ua[Ba];return Da}}Date.now||(Date.now=function(){return+new Date});if(kc)try{kc.createElement("DIV").style.setProperty("opacity",0,"")}catch(ca){var ed=this.Element.prototype,
nd=ed.setAttribute,hd=ed.setAttributeNS,md=this.CSSStyleDeclaration.prototype,pd=md.setProperty;ed.setAttribute=function(ua,Ba){nd.call(this,ua,Ba+"")};ed.setAttributeNS=function(ua,Ba,Da){hd.call(this,ua,Ba,Da+"")};md.setProperty=function(ua,Ba,Da){pd.call(this,ua,Ba+"",Da)}}Pa.ascending=n;Pa.descending=function(ca,ua){return ua<ca?-1:ua>ca?1:ua>=ca?0:NaN};Pa.min=function(ca,ua){var Ba=-1,Da=ca.length,Ma;if(1===arguments.length){for(;++Ba<Da;)if(null!=(Ma=ca[Ba])&&Ma>=Ma){var Ua=Ma;break}for(;++Ba<
Da;)null!=(Ma=ca[Ba])&&Ua>Ma&&(Ua=Ma)}else{for(;++Ba<Da;)if(null!=(Ma=ua.call(ca,ca[Ba],Ba))&&Ma>=Ma){Ua=Ma;break}for(;++Ba<Da;)null!=(Ma=ua.call(ca,ca[Ba],Ba))&&Ua>Ma&&(Ua=Ma)}return Ua};Pa.max=function(ca,ua){var Ba=-1,Da=ca.length,Ma;if(1===arguments.length){for(;++Ba<Da;)if(null!=(Ma=ca[Ba])&&Ma>=Ma){var Ua=Ma;break}for(;++Ba<Da;)null!=(Ma=ca[Ba])&&Ma>Ua&&(Ua=Ma)}else{for(;++Ba<Da;)if(null!=(Ma=ua.call(ca,ca[Ba],Ba))&&Ma>=Ma){Ua=Ma;break}for(;++Ba<Da;)null!=(Ma=ua.call(ca,ca[Ba],Ba))&&Ma>Ua&&
(Ua=Ma)}return Ua};Pa.extent=function(ca,ua){var Ba=-1,Da=ca.length,Ma,Ua;if(1===arguments.length){for(;++Ba<Da;)if(null!=(Ma=ca[Ba])&&Ma>=Ma){var nb=Ua=Ma;break}for(;++Ba<Da;)null!=(Ma=ca[Ba])&&(nb>Ma&&(nb=Ma),Ua<Ma&&(Ua=Ma))}else{for(;++Ba<Da;)if(null!=(Ma=ua.call(ca,ca[Ba],Ba))&&Ma>=Ma){nb=Ua=Ma;break}for(;++Ba<Da;)null!=(Ma=ua.call(ca,ca[Ba],Ba))&&(nb>Ma&&(nb=Ma),Ua<Ma&&(Ua=Ma))}return[nb,Ua]};Pa.sum=function(ca,ua){var Ba=0,Da=ca.length,Ma,Ua=-1;if(1===arguments.length)for(;++Ua<Da;)isNaN(Ma=
+ca[Ua])||(Ba+=Ma);else for(;++Ua<Da;)isNaN(Ma=+ua.call(ca,ca[Ua],Ua))||(Ba+=Ma);return Ba};Pa.mean=function(ca,ua){var Ba=0,Da=ca.length,Ma,Ua=-1,nb=Da;if(1===arguments.length)for(;++Ua<Da;)isNaN(Ma=k(ca[Ua]))?--nb:Ba+=Ma;else for(;++Ua<Da;)isNaN(Ma=k(ua.call(ca,ca[Ua],Ua)))?--nb:Ba+=Ma;if(nb)return Ba/nb};Pa.quantile=function(ca,ua){var Ba=(ca.length-1)*ua+1;ua=Math.floor(Ba);var Da=+ca[ua-1];return(Ba-=ua)?Da+Ba*(ca[ua]-Da):Da};Pa.median=function(ca,ua){var Ba=[],Da=ca.length,Ma,Ua=-1;if(1===arguments.length)for(;++Ua<
Da;)isNaN(Ma=k(ca[Ua]))||Ba.push(Ma);else for(;++Ua<Da;)isNaN(Ma=k(ua.call(ca,ca[Ua],Ua)))||Ba.push(Ma);if(Ba.length)return Pa.quantile(Ba.sort(n),.5)};Pa.variance=function(ca,ua){var Ba=ca.length,Da=0,Ma,Ua=0,nb=-1,eb=0;if(1===arguments.length)for(;++nb<Ba;){if(!isNaN(Ma=k(ca[nb]))){var db=Ma-Da;Da+=db/++eb;Ua+=db*(Ma-Da)}}else for(;++nb<Ba;)isNaN(Ma=k(ua.call(ca,ca[nb],nb)))||(db=Ma-Da,Da+=db/++eb,Ua+=db*(Ma-Da));if(1<eb)return Ua/(eb-1)};Pa.deviation=function(){var ca=Pa.variance.apply(this,arguments);
return ca?Math.sqrt(ca):ca};var Pd=a(n);Pa.bisectLeft=Pd.left;Pa.bisect=Pa.bisectRight=Pd.right;Pa.bisector=function(ca){return a(1===ca.length?function(ua,Ba){return n(ca(ua),Ba)}:ca)};Pa.shuffle=function(ca,ua,Ba){3>(Da=arguments.length)&&(Ba=ca.length,2>Da&&(ua=0));for(var Da=Ba-ua,Ma,Ua;Da;)Ua=Math.random()*Da--|0,Ma=ca[Da+ua],ca[Da+ua]=ca[Ua+ua],ca[Ua+ua]=Ma;return ca};Pa.permute=function(ca,ua){for(var Ba=ua.length,Da=Array(Ba);Ba--;)Da[Ba]=ca[ua[Ba]];return Da};Pa.pairs=function(ca){for(var ua=
0,Ba=ca.length-1,Da=ca[0],Ma=Array(0>Ba?0:Ba);ua<Ba;)Ma[ua]=[Da,Da=ca[++ua]];return Ma};Pa.transpose=function(ca){if(!(Ua=ca.length))return[];for(var ua=-1,Ba=Pa.min(ca,g),Da=Array(Ba);++ua<Ba;)for(var Ma=-1,Ua,nb=Da[ua]=Array(Ua);++Ma<Ua;)nb[Ma]=ca[Ma][ua];return Da};Pa.zip=function(){return Pa.transpose(arguments)};Pa.keys=function(ca){var ua=[],Ba;for(Ba in ca)ua.push(Ba);return ua};Pa.values=function(ca){var ua=[],Ba;for(Ba in ca)ua.push(ca[Ba]);return ua};Pa.entries=function(ca){var ua=[],Ba;
for(Ba in ca)ua.push({key:Ba,value:ca[Ba]});return ua};Pa.merge=function(ca){var ua=ca.length;var Ba=-1;for(var Da=0,Ma,Ua;++Ba<ua;)Da+=ca[Ba].length;for(Ma=Array(Da);0<=--ua;)for(Ua=ca[ua],Ba=Ua.length;0<=--Ba;)Ma[--Da]=Ua[Ba];return Ma};var xd=Math.abs;Pa.range=function(ca,ua,Ba){3>arguments.length&&(Ba=1,2>arguments.length&&(ua=ca,ca=0));if(Infinity===(ua-ca)/Ba)throw Error("infinite range");var Da=[];var Ma=xd(Ba);for(var Ua=1;Ma*Ua%1;)Ua*=10;Ma=Ua;Ua=-1;var nb;ca*=Ma;ua*=Ma;Ba*=Ma;if(0>Ba)for(;(nb=
ca+Ba*++Ua)>ua;)Da.push(nb/Ma);else for(;(nb=ca+Ba*++Ua)<ua;)Da.push(nb/Ma);return Da};Pa.map=function(ca,ua){var Ba=new r;if(ca instanceof r)ca.forEach(function(nb,eb){Ba.set(nb,eb)});else if(Array.isArray(ca)){var Da=-1,Ma=ca.length,Ua;if(1===arguments.length)for(;++Da<Ma;)Ba.set(Da,ca[Da]);else for(;++Da<Ma;)Ba.set(ua.call(ca,Ua=ca[Da],Da),Ua)}else for(Da in ca)Ba.set(Da,ca[Da]);return Ba};h(r,{has:d,get:function(ca){return this._[l(ca)]},set:function(ca,ua){return this._[l(ca)]=ua},remove:e,keys:f,
values:function(){var ca=[],ua;for(ua in this._)ca.push(this._[ua]);return ca},entries:function(){var ca=[],ua;for(ua in this._)ca.push({key:c(ua),value:this._[ua]});return ca},size:q,empty:t,forEach:function(ca){for(var ua in this._)ca.call(this,c(ua),this._[ua])}});Pa.nest=function(){function ca(eb,db,wb){if(wb>=Da.length)return nb?nb.call(Ba,db):Ua?db.sort(Ua):db;for(var Eb=-1,Tb=db.length,mc=Da[wb++],ic,Ac,Kc=new r,Lc;++Eb<Tb;)(Lc=Kc.get(ic=mc(Ac=db[Eb])))?Lc.push(Ac):Kc.set(ic,[Ac]);eb?(Ac=eb(),
db=function(Qc,od){Ac.set(Qc,ca(eb,od,wb))}):(Ac={},db=function(Qc,od){Ac[Qc]=ca(eb,od,wb)});Kc.forEach(db);return Ac}function ua(eb,db){if(db>=Da.length)return eb;var wb=[],Eb=Ma[db++];eb.forEach(function(Tb,mc){wb.push({key:Tb,values:ua(mc,db)})});return Eb?wb.sort(function(Tb,mc){return Eb(Tb.key,mc.key)}):wb}var Ba={},Da=[],Ma=[],Ua,nb;Ba.map=function(eb,db){return ca(db,eb,0)};Ba.entries=function(eb){return ua(ca(Pa.map,eb,0),0)};Ba.key=function(eb){Da.push(eb);return Ba};Ba.sortKeys=function(eb){Ma[Da.length-
1]=eb;return Ba};Ba.sortValues=function(eb){Ua=eb;return Ba};Ba.rollup=function(eb){nb=eb;return Ba};return Ba};Pa.set=function(ca){var ua=new w;if(ca)for(var Ba=0,Da=ca.length;Ba<Da;++Ba)ua.add(ca[Ba]);return ua};h(w,{has:d,add:function(ca){this._[l(ca+="")]=!0;return ca},remove:e,values:f,size:q,empty:t,forEach:function(ca){for(var ua in this._)ca.call(this,c(ua))}});Pa.behavior={};Pa.rebind=function(ca,ua){for(var Ba=1,Da=arguments.length,Ma;++Ba<Da;)ca[Ma=arguments[Ba]]=z(ca,ua,ua[Ma]);return ca};
var Ld="webkit ms moz Moz o O".split(" ");Pa.dispatch=function(){for(var ca=new D,ua=-1,Ba=arguments.length;++ua<Ba;)ca[arguments[ua]]=C(ca);return ca};D.prototype.on=function(ca,ua){var Ba=ca.indexOf("."),Da="";0<=Ba&&(Da=ca.slice(Ba+1),ca=ca.slice(0,Ba));if(ca)return 2>arguments.length?this[ca].on(Da):this[ca].on(Da,ua);if(2===arguments.length){if(null==ua)for(ca in this)if(this.hasOwnProperty(ca))this[ca].on(Da,null);return this}};Pa.event=null;Pa.requote=function(ca){return ca.replace($d,"\\$\x26")};
var $d=/[\\\^\$\*\+\?\|\[\]\(\)\.\{\}]/g,Vd={}.__proto__?function(ca,ua){ca.__proto__=ua}:function(ca,ua){for(var Ba in ua)ca[Ba]=ua[Ba]},Yd=function(ca,ua){return ua.querySelector(ca)},df=function(ca,ua){return ua.querySelectorAll(ca)},Se=function(ca,ua){var Ba=ca.matches||ca[B(ca,"matchesSelector")];Se=function(Da,Ma){return Ba.call(Da,Ma)};return Se(ca,ua)};"function"===typeof Sizzle&&(Yd=function(ca,ua){return Sizzle(ca,ua)[0]||null},df=Sizzle,Se=Sizzle.matchesSelector);Pa.selection=function(){return Pa.select(kc.documentElement)};
var he=Pa.selection.prototype=[];he.select=function(ca){var ua=[],Ba,Da,Ma,Ua;ca=K(ca);for(var nb=-1,eb=this.length;++nb<eb;){ua.push(Ba=[]);Ba.parentNode=(Ma=this[nb]).parentNode;for(var db=-1,wb=Ma.length;++db<wb;)(Ua=Ma[db])?(Ba.push(Da=ca.call(Ua,Ua.__data__,db,nb)),Da&&"__data__"in Ua&&(Da.__data__=Ua.__data__)):Ba.push(null)}return J(ua)};he.selectAll=function(ca){var ua=[],Ba,Da;ca=M(ca);for(var Ma=-1,Ua=this.length;++Ma<Ua;)for(var nb=this[Ma],eb=-1,db=nb.length;++eb<db;)if(Da=nb[eb])ua.push(Ba=
bc(ca.call(Da,Da.__data__,eb,Ma))),Ba.parentNode=Da;return J(ua)};var se={svg:"http://www.w3.org/2000/svg",xhtml:"http://www.w3.org/1999/xhtml",xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/"};Pa.ns={prefix:se,qualify:function(ca){var ua=ca.indexOf(":"),Ba=ca;0<=ua&&"xmlns"!==(Ba=ca.slice(0,ua))&&(ca=ca.slice(ua+1));return se.hasOwnProperty(Ba)?{space:se[Ba],local:ca}:ca}};he.attr=function(ca,ua){if(2>arguments.length){if("string"===
typeof ca){var Ba=this.node();ca=Pa.ns.qualify(ca);return ca.local?Ba.getAttributeNS(ca.space,ca.local):Ba.getAttribute(ca)}for(ua in ca)this.each(H(ua,ca[ua]));return this}return this.each(H(ca,ua))};he.classed=function(ca,ua){if(2>arguments.length){if("string"===typeof ca){var Ba=this.node(),Da=(ca=(ca+"").trim().split(/^|\s+/)).length,Ma=-1;if(ua=Ba.classList)for(;++Ma<Da;){if(!ua.contains(ca[Ma]))return!1}else for(ua=Ba.getAttribute("class");++Ma<Da;)if(!O(ca[Ma]).test(ua))return!1;return!0}for(ua in ca)this.each(I(ua,
ca[ua]));return this}return this.each(I(ca,ua))};he.style=function(ca,ua,Ba){var Da=arguments.length;if(3>Da){if("string"!==typeof ca){2>Da&&(ua="");for(Ba in ca)this.each(Q(Ba,ca[Ba],ua));return this}if(2>Da)return Da=this.node(),p(Da).getComputedStyle(Da,null).getPropertyValue(ca);Ba=""}return this.each(Q(ca,ua,Ba))};he.property=function(ca,ua){if(2>arguments.length){if("string"===typeof ca)return this.node()[ca];for(ua in ca)this.each(Z(ua,ca[ua]));return this}return this.each(Z(ca,ua))};he.text=
function(ca){return arguments.length?this.each("function"===typeof ca?function(){var ua=ca.apply(this,arguments);this.textContent=null==ua?"":ua}:null==ca?function(){this.textContent=""}:function(){this.textContent=ca}):this.node().textContent};he.html=function(ca){return arguments.length?this.each("function"===typeof ca?function(){var ua=ca.apply(this,arguments);this.innerHTML=null==ua?"":ua}:null==ca?function(){this.innerHTML=""}:function(){this.innerHTML=ca}):this.node().innerHTML};he.append=function(ca){ca=
ba(ca);return this.select(function(){return this.appendChild(ca.apply(this,arguments))})};he.insert=function(ca,ua){ca=ba(ca);ua=K(ua);return this.select(function(){return this.insertBefore(ca.apply(this,arguments),ua.apply(this,arguments)||null)})};he.remove=function(){return this.each(V)};he.data=function(ca,ua){function Ba(Eb,Tb){var mc,ic=Eb.length,Ac=Tb.length,Kc=Math.min(ic,Ac),Lc=Array(Ac),Qc=Array(Ac),od=Array(ic),sd,qd;if(ua){Kc=new r;var Id=Array(ic),zd;for(mc=-1;++mc<ic;)if(sd=Eb[mc])Kc.has(zd=
ua.call(sd,sd.__data__,mc))?od[mc]=sd:Kc.set(zd,sd),Id[mc]=zd;for(mc=-1;++mc<Ac;)(sd=Kc.get(zd=ua.call(Tb,qd=Tb[mc],mc)))?!0!==sd&&(Lc[mc]=sd,sd.__data__=qd):Qc[mc]={__data__:qd},Kc.set(zd,!0);for(mc=-1;++mc<ic;)mc in Id&&!0!==Kc.get(Id[mc])&&(od[mc]=Eb[mc])}else{for(mc=-1;++mc<Kc;)sd=Eb[mc],qd=Tb[mc],sd?(sd.__data__=qd,Lc[mc]=sd):Qc[mc]={__data__:qd};for(;mc<Ac;++mc)Qc[mc]={__data__:Tb[mc]};for(;mc<ic;++mc)od[mc]=Eb[mc]}Qc.update=Lc;Qc.parentNode=Lc.parentNode=od.parentNode=Eb.parentNode;eb.push(Qc);
db.push(Lc);wb.push(od)}var Da=-1,Ma=this.length,Ua,nb;if(!arguments.length){for(ca=Array(Ma=(Ua=this[0]).length);++Da<Ma;)if(nb=Ua[Da])ca[Da]=nb.__data__;return ca}var eb=W([]),db=J([]),wb=J([]);if("function"===typeof ca)for(;++Da<Ma;)Ba(Ua=this[Da],ca.call(Ua,Ua.parentNode.__data__,Da));else for(;++Da<Ma;)Ba(Ua=this[Da],ca);db.enter=function(){return eb};db.exit=function(){return wb};return db};he.datum=function(ca){return arguments.length?this.property("__data__",ca):this.property("__data__")};
he.filter=function(ca){var ua=[],Ba,Da,Ma;"function"!==typeof ca&&(ca=S(ca));for(var Ua=0,nb=this.length;Ua<nb;Ua++){ua.push(Ba=[]);Ba.parentNode=(Da=this[Ua]).parentNode;for(var eb=0,db=Da.length;eb<db;eb++)(Ma=Da[eb])&&ca.call(Ma,Ma.__data__,eb,Ua)&&Ba.push(Ma)}return J(ua)};he.order=function(){for(var ca=-1,ua=this.length;++ca<ua;)for(var Ba=this[ca],Da=Ba.length-1,Ma=Ba[Da],Ua;0<=--Da;)if(Ua=Ba[Da])Ma&&Ma!==Ua.nextSibling&&Ma.parentNode.insertBefore(Ua,Ma),Ma=Ua;return this};he.sort=function(ca){ca=
T.apply(this,arguments);for(var ua=-1,Ba=this.length;++ua<Ba;)this[ua].sort(ca);return this.order()};he.each=function(ca){return fa(this,function(ua,Ba,Da){ca.call(ua,ua.__data__,Ba,Da)})};he.call=function(ca){var ua=bc(arguments);ca.apply(ua[0]=this,ua);return this};he.empty=function(){return!this.node()};he.node=function(){for(var ca=0,ua=this.length;ca<ua;ca++)for(var Ba=this[ca],Da=0,Ma=Ba.length;Da<Ma;Da++){var Ua=Ba[Da];if(Ua)return Ua}return null};he.size=function(){var ca=0;fa(this,function(){++ca});
return ca};var de=[];Pa.selection.enter=W;Pa.selection.enter.prototype=de;de.append=he.append;de.empty=he.empty;de.node=he.node;de.call=he.call;de.size=he.size;de.select=function(ca){for(var ua=[],Ba,Da,Ma,Ua,nb,eb=-1,db=this.length;++eb<db;){Ma=(Ua=this[eb]).update;ua.push(Ba=[]);Ba.parentNode=Ua.parentNode;for(var wb=-1,Eb=Ua.length;++wb<Eb;)(nb=Ua[wb])?(Ba.push(Ma[wb]=Da=ca.call(Ua.parentNode,nb.__data__,wb,eb)),Da.__data__=nb.__data__):Ba.push(null)}return J(ua)};de.insert=function(ca,ua){2>arguments.length&&
(ua=aa(this));return he.insert.call(this,ca,ua)};Pa.select=function(ca){if("string"===typeof ca){var ua=[Yd(ca,kc)];ua.parentNode=kc.documentElement}else ua=[ca],ua.parentNode=ca&&(ca.ownerDocument||ca.document||ca).documentElement;return J([ua])};Pa.selectAll=function(ca){"string"===typeof ca?(ca=bc(df(ca,kc)),ca.parentNode=kc.documentElement):(ca=bc(ca),ca.parentNode=null);return J([ca])};he.on=function(ca,ua,Ba){var Da=arguments.length;if(3>Da){if("string"!==typeof ca){2>Da&&(ua=!1);for(Ba in ca)this.each(ja(Ba,
ca[Ba],ua));return this}if(2>Da)return(Da=this.node()["__on"+ca])&&Da._;Ba=!1}return this.each(ja(ca,ua,Ba))};var De=Pa.map({mouseenter:"mouseover",mouseleave:"mouseout"});kc&&De.forEach(function(ca){"on"+ca in kc&&De.remove(ca)});var yf,Zf=0;Pa.mouse=function(ca){return wa(ca,y())};var Tf=this.navigator&&/WebKit/.test(this.navigator.userAgent)?-1:0;Pa.touch=function(ca,ua,Ba){3>arguments.length&&(Ba=ua,ua=y().changedTouches);if(ua)for(var Da=0,Ma=ua.length,Ua;Da<Ma;++Da)if((Ua=ua[Da]).identifier===
Ba)return wa(ca,Ua)};Pa.behavior.drag=function(){function ca(){this.on("mousedown.drag",Ma).on("touchstart.drag",Ua)}function ua(nb,eb,db,wb,Eb){return function(){var Tb=Pa.event.target.correspondingElement||Pa.event.target,mc=this.parentNode,ic=Ba.of(this,arguments),Ac=0,Kc=nb(),Lc=".drag"+(null==Kc?"":"-"+Kc),Qc=Pa.select(db(Tb)).on(wb+Lc,function(){var Id=eb(mc,Kc);if(Id){var zd=Id[0]-sd[0];var ee=Id[1]-sd[1];Ac|=zd|ee;sd=Id;ic({type:"drag",x:Id[0]+qd[0],y:Id[1]+qd[1],dx:zd,dy:ee})}}).on(Eb+Lc,
function(){eb(mc,Kc)&&(Qc.on(wb+Lc,null).on(Eb+Lc,null),od(Ac),ic({type:"dragend"}))}),od=ra(Tb),sd=eb(mc,Kc);if(Da){var qd=Da.apply(this,arguments);qd=[qd.x-sd[0],qd.y-sd[1]]}else qd=[0,0];ic({type:"dragstart"})}}var Ba=F(ca,"drag","dragstart","dragend"),Da=null,Ma=ua(A,Pa.mouse,p,"mousemove","mouseup"),Ua=ua(pa,Pa.touch,x,"touchmove","touchend");ca.origin=function(nb){if(!arguments.length)return Da;Da=nb;return ca};return Pa.rebind(ca,Ba,"on")};Pa.touches=function(ca,ua){2>arguments.length&&(ua=
y().touches);return ua?bc(ua).map(function(Ba){var Da=wa(ca,Ba);Da.identifier=Ba.identifier;return Da}):[]};var gf=Math.PI,uf=2*gf,dg=uf-1E-6,kg=gf/2,Kg=gf/180,$f=180/gf,Ee=Math.SQRT2;Pa.interpolateZoom=function(ca,ua){var Ba=ca[0],Da=ca[1],Ma=ca[2];ca=ua[2];var Ua=ua[0]-Ba,nb=ua[1]-Da,eb=Ua*Ua+nb*nb;if(1E-12>eb){var db=Math.log(ca/Ma)/Ee;ca=function(Tb){return[Ba+Tb*Ua,Da+Tb*nb,Ma*Math.exp(Ee*Tb*db)]}}else{var wb=Math.sqrt(eb);ua=(ca*ca-Ma*Ma+4*eb)/(4*Ma*wb);ca=(ca*ca-Ma*Ma-4*eb)/(4*ca*wb);var Eb=
Math.log(Math.sqrt(ua*ua+1)-ua);db=(Math.log(Math.sqrt(ca*ca+1)-ca)-Eb)/Ee;ca=function(Tb){Tb*=db;var mc=na(Eb),ic=Ee*Tb+Eb;var Ac=((ic=Math.exp(2*ic))-1)/(ic+1);var Kc=Eb;ic=((Kc=Math.exp(Kc))-1/Kc)/2;Ac=Ma/(2*wb)*(mc*Ac-ic);return[Ba+Ac*Ua,Da+Ac*nb,Ma*mc/na(Ee*Tb+Eb)]}}ca.duration=1E3*db;return ca};Pa.behavior.zoom=function(){function ca(Od){Od.on("mousedown.zoom",wb).on(mh+".zoom",Tb).on("dblclick.zoom",mc).on("touchstart.zoom",Eb)}function ua(Od){return[(Od[0]-ic.x)/ic.k,(Od[1]-ic.y)/ic.k]}function Ba(Od){ic.k=
Math.max(od[0],Math.min(od[1],Od))}function Da(Od,sf){sf=[sf[0]*ic.k+ic.x,sf[1]*ic.k+ic.y];ic.x+=Od[0]-sf[0];ic.y+=Od[1]-sf[1]}function Ma(Od,sf,Vf,Bf){Od.__chart__={x:ic.x,y:ic.y,k:ic.k};Ba(Math.pow(2,Bf));Da(Kc=sf,Vf);Od=Pa.select(Od);0<sd&&(Od=Od.transition().duration(sd));Od.call(ca.event)}function Ua(){je&&je.domain(le.range().map(function(Od){return(Od-ic.x)/ic.k}).map(le.invert));me&&me.domain(Gf.range().map(function(Od){return(Od-ic.y)/ic.k}).map(Gf.invert))}function nb(Od){qd++||Od({type:"zoomstart"})}
function eb(Od){Ua();Od({type:"zoom",scale:ic.k,translate:[ic.x,ic.y]})}function db(Od){--qd||(Od({type:"zoomend"}),Kc=null)}function wb(){var Od=this,sf=ee.of(Od,arguments),Vf=0,Bf=Pa.select(p(Od)).on("mousemove.zoom",function(){Vf=1;Da(Pa.mouse(Od),Of);eb(sf)}).on("mouseup.zoom",function(){Bf.on("mousemove.zoom",null).on("mouseup.zoom",null);Nf(Vf);db(sf)}),Of=ua(Pa.mouse(Od)),Nf=ra(Od);kf.call(Od);nb(sf)}function Eb(){function Od(){var rg=Pa.touches(Of);wg=ic.k;rg.forEach(function(xg){xg.identifier in
Uf&&(Uf[xg.identifier]=ua(xg))});return rg}function sf(){var rg=Pa.event.target;Pa.select(rg).on(Wh,Vf).on(pi,Bf);Ui.push(rg);rg=Pa.event.changedTouches;for(var xg=0,Mh=rg.length;xg<Mh;++xg)Uf[rg[xg].identifier]=null;xg=Od();Mh=Date.now();1===xg.length?(500>Mh-zd&&(rg=xg[0],Ma(Of,rg,Uf[rg.identifier],Math.floor(Math.log(ic.k)/Math.LN2)+1),v()),zd=Mh):1<xg.length&&(rg=xg[0],Mh=xg[1],xg=rg[0]-Mh[0],rg=rg[1]-Mh[1],gg=xg*xg+rg*rg)}function Vf(){var rg=Pa.touches(Of),xg;kf.call(Of);for(var Mh=0,yg=rg.length;Mh<
yg;++Mh,xg=null){var dh=rg[Mh];if(xg=Uf[dh.identifier]){if(Vi)break;var ii=dh;var Vi=xg}}if(xg){var Jg=(Jg=dh[0]-ii[0])*Jg+(Jg=dh[1]-ii[1])*Jg;rg=gg&&Math.sqrt(Jg/gg);ii=[(ii[0]+dh[0])/2,(ii[1]+dh[1])/2];Vi=[(Vi[0]+xg[0])/2,(Vi[1]+xg[1])/2];Ba(rg*wg)}zd=null;Da(ii,Vi);eb(Nf)}function Bf(){if(Pa.event.touches.length){for(var rg=Pa.event.changedTouches,xg=0,Mh=rg.length;xg<Mh;++xg)delete Uf[rg[xg].identifier];for(var yg in Uf)return void Od()}Pa.selectAll(Ui).on(Fg,null);xj.on("mousedown.zoom",wb).on("touchstart.zoom",
Eb);Fi();db(Nf)}var Of=this,Nf=ee.of(Of,arguments),Uf={},gg=0,wg,Fg=".zoom-"+Pa.event.changedTouches[0].identifier,Wh="touchmove"+Fg,pi="touchend"+Fg,Ui=[],xj=Pa.select(Of),Fi=ra(Of);sf();nb(Nf);xj.on("mousedown.zoom",null).on("touchstart.zoom",sf)}function Tb(){var Od=ee.of(this,arguments);Id?clearTimeout(Id):(kf.call(this),Ac=ua(Kc=Lc||Pa.mouse(this)),nb(Od));Id=setTimeout(function(){Id=null;db(Od)},50);v();Ba(Math.pow(2,.002*Cg())*ic.k);Da(Kc,Ac);eb(Od)}function mc(){var Od=Pa.mouse(this),sf=Math.log(ic.k)/
Math.LN2;Ma(this,Od,ua(Od),Pa.event.shiftKey?Math.ceil(sf)-1:Math.floor(sf)+1)}var ic={x:0,y:0,k:1},Ac,Kc,Lc,Qc=[960,500],od=eg,sd=250,qd=0,Id,zd,ee=F(ca,"zoomstart","zoom","zoomend"),le,je,Gf,me;mh||(mh="onwheel"in kc?(Cg=function(){return-Pa.event.deltaY*(Pa.event.deltaMode?120:1)},"wheel"):"onmousewheel"in kc?(Cg=function(){return Pa.event.wheelDelta},"mousewheel"):(Cg=function(){return-Pa.event.detail},"MozMousePixelScroll"));ca.event=function(Od){Od.each(function(){var sf=ee.of(this,arguments),
Vf=ic;wf?Pa.select(this).transition().each("start.zoom",function(){ic=this.__chart__||{x:0,y:0,k:1};nb(sf)}).tween("zoom:zoom",function(){var Bf=Qc[0],Of=Qc[1],Nf=Kc?Kc[0]:Bf/2,Uf=Kc?Kc[1]:Of/2,gg=Pa.interpolateZoom([(Nf-ic.x)/ic.k,(Uf-ic.y)/ic.k,Bf/ic.k],[(Nf-Vf.x)/Vf.k,(Uf-Vf.y)/Vf.k,Bf/Vf.k]);return function(wg){wg=gg(wg);var Fg=Bf/wg[2];this.__chart__=ic={x:Nf-wg[0]*Fg,y:Uf-wg[1]*Fg,k:Fg};eb(sf)}}).each("interrupt.zoom",function(){db(sf)}).each("end.zoom",function(){db(sf)}):(this.__chart__=ic,
nb(sf),eb(sf),db(sf))})};ca.translate=function(Od){if(!arguments.length)return[ic.x,ic.y];ic={x:+Od[0],y:+Od[1],k:ic.k};Ua();return ca};ca.scale=function(Od){if(!arguments.length)return ic.k;ic={x:ic.x,y:ic.y,k:null};Ba(+Od);Ua();return ca};ca.scaleExtent=function(Od){if(!arguments.length)return od;od=null==Od?eg:[+Od[0],+Od[1]];return ca};ca.center=function(Od){if(!arguments.length)return Lc;Lc=Od&&[+Od[0],+Od[1]];return ca};ca.size=function(Od){if(!arguments.length)return Qc;Qc=Od&&[+Od[0],+Od[1]];
return ca};ca.duration=function(Od){if(!arguments.length)return sd;sd=+Od;return ca};ca.x=function(Od){if(!arguments.length)return je;je=Od;le=Od.copy();ic={x:0,y:0,k:1};return ca};ca.y=function(Od){if(!arguments.length)return me;me=Od;Gf=Od.copy();ic={x:0,y:0,k:1};return ca};return Pa.rebind(ca,ee,"on")};var eg=[0,Infinity],Cg,mh;Pa.color=oa;oa.prototype.toString=function(){return this.rgb()+""};Pa.hsl=sa;var Wi=sa.prototype=new oa;Wi.brighter=function(ca){ca=Math.pow(.7,arguments.length?ca:1);return new sa(this.h,
this.s,this.l/ca)};Wi.darker=function(ca){ca=Math.pow(.7,arguments.length?ca:1);return new sa(this.h,this.s,ca*this.l)};Wi.rgb=function(){return za(this.h,this.s,this.l)};Pa.hcl=Ha;var Ch=Ha.prototype=new oa;Ch.brighter=function(ca){return new Ha(this.h,this.c,Math.min(100,this.l+Xi*(arguments.length?ca:1)))};Ch.darker=function(ca){return new Ha(this.h,this.c,Math.max(0,this.l-Xi*(arguments.length?ca:1)))};Ch.rgb=function(){return Wa(this.h,this.c,this.l).rgb()};Pa.lab=Za;var Xi=18,Ih=.95047,Si=1,
ij=1.08883,Xh=Za.prototype=new oa;Xh.brighter=function(ca){return new Za(Math.min(100,this.l+Xi*(arguments.length?ca:1)),this.a,this.b)};Xh.darker=function(ca){return new Za(Math.max(0,this.l-Xi*(arguments.length?ca:1)),this.a,this.b)};Xh.rgb=function(){return bb(this.l,this.a,this.b)};Pa.rgb=Ab;var Nh=Ab.prototype=new oa;Nh.brighter=function(ca){ca=Math.pow(.7,arguments.length?ca:1);var ua=this.r,Ba=this.g,Da=this.b;if(!ua&&!Ba&&!Da)return new Ab(30,30,30);ua&&30>ua&&(ua=30);Ba&&30>Ba&&(Ba=30);Da&&
30>Da&&(Da=30);return new Ab(Math.min(255,ua/ca),Math.min(255,Ba/ca),Math.min(255,Da/ca))};Nh.darker=function(ca){ca=Math.pow(.7,arguments.length?ca:1);return new Ab(ca*this.r,ca*this.g,ca*this.b)};Nh.hsl=function(){return zb(this.r,this.g,this.b)};Nh.toString=function(){return"#"+vb(this.r)+vb(this.g)+vb(this.b)};var Xg=Pa.map({aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,
brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,
darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,
lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,
mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,
rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074});Xg.forEach(function(ca,
ua){Xg.set(ca,new Ab(ua>>16,ua>>8&255,ua&255))});Pa.functor=Aa;Pa.xhr=Ja(x);Pa.dsv=function(ca,ua){function Ba(wb,Eb,Tb){3>arguments.length&&(Tb=Eb,Eb=null);var mc=Ta(wb,ua,null==Eb?Da:Ma(Eb),Tb);mc.row=function(ic){return arguments.length?mc.response(null==(Eb=ic)?Da:Ma(ic)):Eb};return mc}function Da(wb){return Ba.parse(wb.responseText)}function Ma(wb){return function(Eb){return Ba.parse(Eb.responseText,wb)}}function Ua(wb){return wb.map(nb).join(ca)}function nb(wb){return eb.test(wb)?'"'+wb.replace(/"/g,
'""')+'"':wb}var eb=new RegExp('["'+ca+"\n]"),db=ca.charCodeAt(0);Ba.parse=function(wb,Eb){var Tb;return Ba.parseRows(wb,function(mc,ic){if(Tb)return Tb(mc,ic-1);var Ac=function(Kc){for(var Lc={},Qc=mc.length,od=0;od<Qc;++od)Lc[mc[od]]=Kc[od];return Lc};Tb=Eb?function(Kc,Lc){return Eb(Ac(Kc),Lc)}:Ac})};Ba.parseRows=function(wb,Eb){function Tb(){if(Lc>=Kc)return ic;if(sd)return sd=!1,mc;var Id=Lc;if(34===wb.charCodeAt(Id)){for(var zd=Id;zd++<Kc;)if(34===wb.charCodeAt(zd)){if(34!==wb.charCodeAt(zd+
1))break;++zd}Lc=zd+2;var ee=wb.charCodeAt(zd+1);13===ee?(sd=!0,10===wb.charCodeAt(zd+2)&&++Lc):10===ee&&(sd=!0);return wb.slice(Id+1,zd).replace(/""/g,'"')}for(;Lc<Kc;){ee=wb.charCodeAt(Lc++);zd=1;if(10===ee)sd=!0;else if(13===ee)sd=!0,10===wb.charCodeAt(Lc)&&(++Lc,++zd);else if(ee!==db)continue;return wb.slice(Id,Lc-zd)}return wb.slice(Id)}for(var mc={},ic={},Ac=[],Kc=wb.length,Lc=0,Qc=0,od,sd;(od=Tb())!==ic;){for(var qd=[];od!==mc&&od!==ic;)qd.push(od),od=Tb();Eb&&null==(qd=Eb(qd,Qc++))||Ac.push(qd)}return Ac};
Ba.format=function(wb){if(Array.isArray(wb[0]))return Ba.formatRows(wb);var Eb=new w,Tb=[];wb.forEach(function(mc){for(var ic in mc)Eb.has(ic)||Tb.push(Eb.add(ic))});return[Tb.map(nb).join(ca)].concat(wb.map(function(mc){return Tb.map(function(ic){return nb(mc[ic])}).join(ca)})).join("\n")};Ba.formatRows=function(wb){return wb.map(Ua).join("\n")};return Ba};Pa.csv=Pa.dsv(",","text/csv");Pa.tsv=Pa.dsv("\t","text/tab-separated-values");var oi,Lg,Rh,ai,ph=this[B(this,"requestAnimationFrame")]||function(ca){setTimeout(ca,
17)};Pa.timer=function(){ab.apply(this,arguments)};Pa.timer.flush=function(){Nb();ec()};Pa.round=function(ca,ua){return ua?Math.round(ca*(ua=Math.pow(10,ua)))/ua:Math.round(ca)};Pa.geom={};Pa.geom.hull=function(ca){function ua(Ma){if(3>Ma.length)return[];var Ua=Aa(Ba),nb=Aa(Da),eb,db=Ma.length,wb=[],Eb=[];for(eb=0;eb<db;eb++)wb.push([+Ua.call(this,Ma[eb],eb),+nb.call(this,Ma[eb],eb),eb]);wb.sort(yc);for(eb=0;eb<db;eb++)Eb.push([wb[eb][0],-wb[eb][1]]);Ua=Qb(wb);Eb=Qb(Eb);nb=Eb[0]===Ua[0];db=Eb[Eb.length-
1]===Ua[Ua.length-1];var Tb=[];for(eb=Ua.length-1;0<=eb;--eb)Tb.push(Ma[wb[Ua[eb]][2]]);for(eb=+nb;eb<Eb.length-db;++eb)Tb.push(Ma[wb[Eb[eb]][2]]);return Tb}var Ba=ob,Da=Cb;if(arguments.length)return ua(ca);ua.x=function(Ma){return arguments.length?(Ba=Ma,ua):Ba};ua.y=function(Ma){return arguments.length?(Da=Ma,ua):Da};return ua};Pa.geom.polygon=function(ca){Vd(ca,Dh);return ca};var Dh=Pa.geom.polygon.prototype=[];Dh.area=function(){for(var ca=-1,ua=this.length,Ba,Da=this[ua-1],Ma=0;++ca<ua;)Ba=Da,
Da=this[ca],Ma+=Ba[1]*Da[0]-Ba[0]*Da[1];return.5*Ma};Dh.centroid=function(ca){var ua=-1,Ba=this.length,Da=0,Ma=0,Ua=this[Ba-1];for(arguments.length||(ca=-1/(6*this.area()));++ua<Ba;){var nb=Ua;Ua=this[ua];var eb=nb[0]*Ua[1]-Ua[0]*nb[1];Da+=(nb[0]+Ua[0])*eb;Ma+=(nb[1]+Ua[1])*eb}return[Da*ca,Ma*ca]};Dh.clip=function(ca){for(var ua,Ba=Na(ca),Da=-1,Ma=this.length-Na(this),Ua,nb,eb=this[Ma-1],db,wb,Eb;++Da<Ma;){ua=ca.slice();ca.length=0;db=this[Da];wb=ua[(nb=ua.length-Ba)-1];for(Ua=-1;++Ua<nb;)Eb=ua[Ua],
Jc(Eb,eb,db)?(Jc(wb,eb,db)||ca.push(Ia(wb,Eb,eb,db)),ca.push(Eb)):Jc(wb,eb,db)&&ca.push(Ia(wb,Eb,eb,db)),wb=Eb;Ba&&ca.push(ca[0]);eb=db}return ca};var Jh,Sh,af,qh=[],Ti,xi,gi=[];uc.prototype.prepare=function(){for(var ca=this.edges,ua=ca.length,Ba;ua--;)Ba=ca[ua].edge,Ba.b&&Ba.a||ca.splice(ua,1);ca.sort(fd);return ca.length};sc.prototype={start:function(){return this.edge.l===this.site?this.edge.a:this.edge.b},end:function(){return this.edge.l===this.site?this.edge.b:this.edge.a}};nc.prototype={insert:function(ca,
ua){var Ba;if(ca){ua.P=ca;if(ua.N=ca.N)ca.N.P=ua;ca.N=ua;if(ca.R){for(ca=ca.R;ca.L;)ca=ca.L;ca.L=ua}else ca.R=ua;var Da=ca}else this._?(ca=yb(this._),ua.P=null,ua.N=ca,ca.P=ca.L=ua,Da=ca):(ua.P=ua.N=null,this._=ua,Da=null);ua.L=ua.R=null;ua.U=Da;ua.C=!0;for(ca=ua;Da&&Da.C;)ua=Da.U,Da===ua.L?(Ba=ua.R)&&Ba.C?(Da.C=Ba.C=!1,ua.C=!0,ca=ua):(ca===Da.R&&(Vb(this,Da),ca=Da,Da=ca.U),Da.C=!1,ua.C=!0,Wb(this,ua)):(Ba=ua.L)&&Ba.C?(Da.C=Ba.C=!1,ua.C=!0,ca=ua):(ca===Da.L&&(Wb(this,Da),ca=Da,Da=ca.U),Da.C=!1,ua.C=
!0,Vb(this,ua)),Da=ca.U;this._.C=!1},remove:function(ca){ca.N&&(ca.N.P=ca.P);ca.P&&(ca.P.N=ca.N);ca.N=ca.P=null;var ua=ca.U,Ba=ca.L,Da=ca.R;var Ma=Ba?Da?yb(Da):Ba:Da;ua?ua.L===ca?ua.L=Ma:ua.R=Ma:this._=Ma;if(Ba&&Da){var Ua=Ma.C;Ma.C=ca.C;Ma.L=Ba;Ba.U=Ma;Ma!==Da?(ua=Ma.U,Ma.U=ca.U,ca=Ma.R,ua.L=ca,Ma.R=Da,Da.U=Ma):(Ma.U=ua,ua=Ma,ca=Ma.R)}else Ua=ca.C,ca=Ma;ca&&(ca.U=ua);if(!Ua)if(ca&&ca.C)ca.C=!1;else{do{if(ca===this._)break;if(ca===ua.L){if(ca=ua.R,ca.C&&(ca.C=!1,ua.C=!0,Vb(this,ua),ca=ua.R),ca.L&&
ca.L.C||ca.R&&ca.R.C){ca.R&&ca.R.C||(ca.L.C=!1,ca.C=!0,Wb(this,ca),ca=ua.R);ca.C=ua.C;ua.C=ca.R.C=!1;Vb(this,ua);ca=this._;break}}else if(ca=ua.L,ca.C&&(ca.C=!1,ua.C=!0,Wb(this,ua),ca=ua.L),ca.L&&ca.L.C||ca.R&&ca.R.C){ca.L&&ca.L.C||(ca.R.C=!1,ca.C=!0,Vb(this,ca),ca=ua.L);ca.C=ua.C;ua.C=ca.L.C=!1;Wb(this,ua);ca=this._;break}ca.C=!0;ca=ua;ua=ua.U}while(!ca.C);ca&&(ca.C=!1)}}};Pa.geom.voronoi=function(ca){function ua(db){var wb=Array(db.length),Eb=eb[0][0],Tb=eb[0][1],mc=eb[1][0],ic=eb[1][1];ac(Ba(db),
eb).cells.forEach(function(Ac,Kc){var Lc=Ac.edges;Ac=Ac.site;(wb[Kc]=Lc.length?Lc.map(function(Qc){Qc=Qc.start();return[Qc.x,Qc.y]}):Ac.x>=Eb&&Ac.x<=mc&&Ac.y>=Tb&&Ac.y<=ic?[[Eb,ic],[mc,ic],[mc,Tb],[Eb,Tb]]:[]).point=db[Kc]});return wb}function Ba(db){return db.map(function(wb,Eb){return{x:1E-6*Math.round(Ua(wb,Eb)/1E-6),y:1E-6*Math.round(nb(wb,Eb)/1E-6),i:Eb}})}var Da=ob,Ma=Cb,Ua=Da,nb=Ma,eb=kb;if(ca)return ua(ca);ua.links=function(db){return ac(Ba(db)).edges.filter(function(wb){return wb.l&&wb.r}).map(function(wb){return{source:db[wb.l.i],
target:db[wb.r.i]}})};ua.triangles=function(db){var wb=[];ac(Ba(db)).cells.forEach(function(Eb,Tb){var mc=Eb.site;Eb=Eb.edges.sort(fd);var ic=-1,Ac=Eb.length,Kc=Eb[Ac-1].edge;for(Kc=Kc.l===mc?Kc.r:Kc.l;++ic<Ac;){var Lc=Kc;Kc=Eb[ic].edge;Kc=Kc.l===mc?Kc.r:Kc.l;Tb<Lc.i&&Tb<Kc.i&&0>(mc.x-Kc.x)*(Lc.y-mc.y)-(mc.x-Lc.x)*(Kc.y-mc.y)&&wb.push([db[Tb],db[Lc.i],db[Kc.i]])}});return wb};ua.x=function(db){return arguments.length?(Ua=Aa(Da=db),ua):Da};ua.y=function(db){return arguments.length?(nb=Aa(Ma=db),ua):
Ma};ua.clipExtent=function(db){if(!arguments.length)return eb===kb?null:eb;eb=null==db?kb:db;return ua};ua.size=function(db){return arguments.length?ua.clipExtent(db&&[[0,0],db]):eb===kb?null:eb&&eb[1]};return ua};var kb=[[-1E6,-1E6],[1E6,1E6]];Pa.geom.delaunay=function(ca){return Pa.geom.voronoi().triangles(ca)};Pa.geom.quadtree=function(ca,ua,Ba,Da,Ma){function Ua(wb){function Eb(je,Gf,me,Od,sf,Vf,Bf,Of){if(!isNaN(me)&&!isNaN(Od))if(je.leaf){var Nf=je.x,Uf=je.y;if(null!=Nf){if(!(.01>xd(Nf-me)+xd(Uf-
Od))){var gg=je.point;je.x=je.y=je.point=null;Tb(je,gg,Nf,Uf,sf,Vf,Bf,Of)}Tb(je,Gf,me,Od,sf,Vf,Bf,Of)}else je.x=me,je.y=Od,je.point=Gf}else Tb(je,Gf,me,Od,sf,Vf,Bf,Of)}function Tb(je,Gf,me,Od,sf,Vf,Bf,Of){var Nf=.5*(sf+Bf),Uf=.5*(Vf+Of),gg=me>=Nf,wg=Od>=Uf,Fg=wg<<1|gg;je.leaf=!1;je=je.nodes[Fg]||(je.nodes[Fg]=Rc());gg?sf=Nf:Bf=Nf;wg?Vf=Uf:Of=Uf;Eb(je,Gf,me,Od,sf,Vf,Bf,Of)}var mc=Aa(nb),ic=Aa(eb),Ac;if(null!=ua){var Kc=ua;var Lc=Ba;var Qc=Da;var od=Ma}else{Qc=od=-(Kc=Lc=Infinity);var sd=[];var qd=
[];var Id=wb.length;if(db)for(Ac=0;Ac<Id;++Ac){var zd=wb[Ac];zd.x<Kc&&(Kc=zd.x);zd.y<Lc&&(Lc=zd.y);zd.x>Qc&&(Qc=zd.x);zd.y>od&&(od=zd.y);sd.push(zd.x);qd.push(zd.y)}else for(Ac=0;Ac<Id;++Ac){var ee=+mc(zd=wb[Ac],Ac);zd=+ic(zd,Ac);ee<Kc&&(Kc=ee);zd<Lc&&(Lc=zd);ee>Qc&&(Qc=ee);zd>od&&(od=zd);sd.push(ee);qd.push(zd)}}ee=Qc-Kc;zd=od-Lc;ee>zd?od=Lc+ee:Qc=Kc+zd;var le=Rc();le.add=function(je){Eb(le,je,+mc(je,++Ac),+ic(je,Ac),Kc,Lc,Qc,od)};le.visit=function(je){kd(je,le,Kc,Lc,Qc,od)};le.find=function(je){return Cd(le,
je[0],je[1],Kc,Lc,Qc,od)};Ac=-1;if(null==ua){for(;++Ac<Id;)Eb(le,wb[Ac],sd[Ac],qd[Ac],Kc,Lc,Qc,od);--Ac}else wb.forEach(le.add);sd=qd=wb=zd=null;return le}var nb=ob,eb=Cb,db;if(db=arguments.length)return nb=lc,eb=tc,3===db&&(Ma=Ba,Da=ua,Ba=ua=0),Ua(ca);Ua.x=function(wb){return arguments.length?(nb=wb,Ua):nb};Ua.y=function(wb){return arguments.length?(eb=wb,Ua):eb};Ua.extent=function(wb){if(!arguments.length)return null==ua?null:[[ua,Ba],[Da,Ma]];null==wb?ua=Ba=Da=Ma=null:(ua=+wb[0][0],Ba=+wb[0][1],
Da=+wb[1][0],Ma=+wb[1][1]);return Ua};Ua.size=function(wb){if(!arguments.length)return null==ua?null:[Da-ua,Ma-Ba];null==wb?ua=Ba=Da=Ma=null:(ua=Ba=0,Da=+wb[0],Ma=+wb[1]);return Ua};return Ua};Pa.interpolateRgb=Gd;Pa.interpolateObject=Ad;Pa.interpolateNumber=Nc;Pa.interpolateString=cd;var R=/[-+]?(?:\d+\.?\d*|\.?\d+)(?:[eE][-+]?\d+)?/g,X=new RegExp(R.source,"g");Pa.interpolate=Cc;Pa.interpolators=[function(ca,ua){var Ba=typeof ua;return("string"===Ba?Xg.has(ua.toLowerCase())||/^(#|rgb\(|hsl\()/i.test(ua)?
Gd:cd:ua instanceof oa?Gd:Array.isArray(ua)?dd:"object"===Ba&&isNaN(ua)?Ad:Nc)(ca,ua)}];Pa.interpolateArray=dd;var U=function(){return x},da=Pa.map({linear:U,poly:function(ca){return function(ua){return Math.pow(ua,ca)}},quad:function(){return Md},cubic:function(){return Sd},sin:function(){return Ue},exp:function(){return Ke},circle:function(){return ve},elastic:function(ca,ua){2>arguments.length&&(ua=.45);if(arguments.length)var Ba=ua/uf*Math.asin(1/ca);else ca=1,Ba=ua/4;return function(Da){return 1+
ca*Math.pow(2,-10*Da)*Math.sin((Da-Ba)*uf/ua)}},back:function(ca){ca||(ca=1.70158);return function(ua){return ua*ua*((ca+1)*ua-ca)}},bounce:function(){return zf}}),va=Pa.map({"in":x,out:Sc,"in-out":id,"out-in":function(ca){return id(Sc(ca))}});Pa.ease=function(ca){var ua=ca.indexOf("-"),Ba=0<=ua?ca.slice(0,ua):ca;ua=0<=ua?ca.slice(ua+1):"in";Ba=da.get(Ba)||U;ua=va.get(ua)||x;return Vc(ua(Ba.apply(null,Mb.call(arguments,1))))};Pa.interpolateHcl=function(ca,ua){ca=Pa.hcl(ca);ua=Pa.hcl(ua);var Ba=ca.h,
Da=ca.c,Ma=ca.l,Ua=ua.h-Ba,nb=ua.c-Da,eb=ua.l-Ma;isNaN(nb)&&(nb=0,Da=isNaN(Da)?ua.c:Da);isNaN(Ua)?(Ua=0,Ba=isNaN(Ba)?ua.h:Ba):180<Ua?Ua-=360:-180>Ua&&(Ua+=360);return function(db){return Wa(Ba+Ua*db,Da+nb*db,Ma+eb*db)+""}};Pa.interpolateHsl=function(ca,ua){ca=Pa.hsl(ca);ua=Pa.hsl(ua);var Ba=ca.h,Da=ca.s,Ma=ca.l,Ua=ua.h-Ba,nb=ua.s-Da,eb=ua.l-Ma;isNaN(nb)&&(nb=0,Da=isNaN(Da)?ua.s:Da);isNaN(Ua)?(Ua=0,Ba=isNaN(Ba)?ua.h:Ba):180<Ua?Ua-=360:-180>Ua&&(Ua+=360);return function(db){return za(Ba+Ua*db,Da+nb*
db,Ma+eb*db)+""}};Pa.interpolateLab=function(ca,ua){ca=Pa.lab(ca);ua=Pa.lab(ua);var Ba=ca.l,Da=ca.a,Ma=ca.b,Ua=ua.l-Ba,nb=ua.a-Da,eb=ua.b-Ma;return function(db){return bb(Ba+Ua*db,Da+nb*db,Ma+eb*db)+""}};Pa.interpolateRound=Ef;Pa.transform=function(ca){var ua=kc.createElementNS(Pa.ns.prefix.svg,"g");return(Pa.transform=function(Ba){if(null!=Ba){ua.setAttribute("transform",Ba);var Da=ua.transform.baseVal.consolidate()}return new qf(Da?Da.matrix:Ca)})(ca)};qf.prototype.toString=function(){return"translate("+
this.translate+")rotate("+this.rotate+")skewX("+this.skew+")scale("+this.scale+")"};var Ca={a:1,b:0,c:0,d:1,e:0,f:0};Pa.interpolateTransform=Te;Pa.layout={};Pa.layout.bundle=function(){return function(ca){for(var ua=[],Ba=-1,Da=ca.length;++Ba<Da;){var Ma=ua,Ua=Ma.push,nb=ca[Ba],eb=nb.source;nb=nb.target;var db=nb;if(eb===db)var wb=eb;else{wb=nf(eb);db=nf(db);for(var Eb=wb.pop(),Tb=db.pop(),mc=null;Eb===Tb;)mc=Eb,Eb=wb.pop(),Tb=db.pop();wb=mc}for(db=[eb];eb!==wb;)eb=eb.parent,db.push(eb);for(eb=db.length;nb!==
wb;)db.splice(eb,0,nb),nb=nb.parent;Ua.call(Ma,db)}return ua}};Pa.layout.chord=function(){function ca(){var Tb={},mc=[],ic=Pa.range(nb),Ac=[],Kc,Lc;Da=[];Ma=[];var Qc=0;for(Kc=-1;++Kc<nb;){var od=0;for(Lc=-1;++Lc<nb;)od+=Ua[Kc][Lc];mc.push(od);Ac.push(Pa.range(nb));Qc+=od}db&&ic.sort(function(je,Gf){return db(mc[je],mc[Gf])});wb&&Ac.forEach(function(je,Gf){je.sort(function(me,Od){return wb(Ua[Gf][me],Ua[Gf][Od])})});Qc=(uf-eb*nb)/Qc;od=0;for(Kc=-1;++Kc<nb;){var sd=od;for(Lc=-1;++Lc<nb;){var qd=ic[Kc],
Id=Ac[qd][Lc],zd=Ua[qd][Id],ee=od,le=od+=zd*Qc;Tb[qd+"-"+Id]={index:qd,subindex:Id,startAngle:ee,endAngle:le,value:zd}}Ma[qd]={index:qd,startAngle:sd,endAngle:od,value:mc[qd]};od+=eb}for(Kc=-1;++Kc<nb;)for(Lc=Kc-1;++Lc<nb;)ic=Tb[Kc+"-"+Lc],Ac=Tb[Lc+"-"+Kc],(ic.value||Ac.value)&&Da.push(ic.value<Ac.value?{source:Ac,target:ic}:{source:ic,target:Ac});Eb&&ua()}function ua(){Da.sort(function(Tb,mc){return Eb((Tb.source.value+Tb.target.value)/2,(mc.source.value+mc.target.value)/2)})}var Ba={},Da,Ma,Ua,
nb,eb=0,db,wb,Eb;Ba.matrix=function(Tb){if(!arguments.length)return Ua;nb=(Ua=Tb)&&Ua.length;Da=Ma=null;return Ba};Ba.padding=function(Tb){if(!arguments.length)return eb;eb=Tb;Da=Ma=null;return Ba};Ba.sortGroups=function(Tb){if(!arguments.length)return db;db=Tb;Da=Ma=null;return Ba};Ba.sortSubgroups=function(Tb){if(!arguments.length)return wb;wb=Tb;Da=null;return Ba};Ba.sortChords=function(Tb){if(!arguments.length)return Eb;Eb=Tb;Da&&ua();return Ba};Ba.chords=function(){Da||ca();return Da};Ba.groups=
function(){Ma||ca();return Ma};return Ba};Pa.layout.force=function(){function ca(qd){return function(Id,zd,ee,le){if(Id.point!==qd){ee=Id.cx-qd.x;var je=Id.cy-qd.y;zd=le-zd;le=ee*ee+je*je;if(zd*zd/Ac<le)return le<mc&&(zd=Id.charge/le,qd.px-=ee*zd,qd.py-=je*zd),!0;Id.point&&le&&le<mc&&(zd=Id.pointCharge/le,qd.px-=ee*zd,qd.py-=je*zd)}return!Id.charge}}function ua(qd){qd.px=Pa.event.x;qd.py=Pa.event.y;Ba.resume()}var Ba={},Da=Pa.dispatch("start","tick","end"),Ma,Ua=[1,1],nb,eb,db=.9,wb=Qa,Eb=lb,Tb=-30,
mc=Lb,ic=.1,Ac=.64,Kc=[],Lc=[],Qc,od,sd;Ba.tick=function(){if(.005>(eb*=.99))return Ma=null,Da.end({type:"end",alpha:eb=0}),!0;var qd=Kc.length,Id=Lc.length,zd,ee;for(zd=0;zd<Id;++zd){var le=Lc[zd];var je=le.source;var Gf=le.target;var me=Gf.x-je.x;var Od=Gf.y-je.y;if(ee=me*me+Od*Od)ee=eb*od[zd]*((ee=Math.sqrt(ee))-Qc[zd])/ee,me*=ee,Od*=ee,Gf.x-=me*(ee=je.weight+Gf.weight?je.weight/(je.weight+Gf.weight):.5),Gf.y-=Od*ee,je.x+=me*(ee=1-ee),je.y+=Od*ee}if(ee=eb*ic)if(me=Ua[0]/2,Od=Ua[1]/2,zd=-1,ee)for(;++zd<
qd;)le=Kc[zd],le.x+=(me-le.x)*ee,le.y+=(Od-le.y)*ee;if(Tb)for(Mc(Id=Pa.geom.quadtree(Kc),eb,sd),zd=-1;++zd<qd;)(le=Kc[zd]).fixed||Id.visit(ca(le));for(zd=-1;++zd<qd;)le=Kc[zd],le.fixed?(le.x=le.px,le.y=le.py):(le.x-=(le.px-(le.px=le.x))*db,le.y-=(le.py-(le.py=le.y))*db);Da.tick({type:"tick",alpha:eb})};Ba.nodes=function(qd){if(!arguments.length)return Kc;Kc=qd;return Ba};Ba.links=function(qd){if(!arguments.length)return Lc;Lc=qd;return Ba};Ba.size=function(qd){if(!arguments.length)return Ua;Ua=qd;
return Ba};Ba.linkDistance=function(qd){if(!arguments.length)return wb;wb="function"===typeof qd?qd:+qd;return Ba};Ba.distance=Ba.linkDistance;Ba.linkStrength=function(qd){if(!arguments.length)return Eb;Eb="function"===typeof qd?qd:+qd;return Ba};Ba.friction=function(qd){if(!arguments.length)return db;db=+qd;return Ba};Ba.charge=function(qd){if(!arguments.length)return Tb;Tb="function"===typeof qd?qd:+qd;return Ba};Ba.chargeDistance=function(qd){if(!arguments.length)return Math.sqrt(mc);mc=qd*qd;
return Ba};Ba.gravity=function(qd){if(!arguments.length)return ic;ic=+qd;return Ba};Ba.theta=function(qd){if(!arguments.length)return Math.sqrt(Ac);Ac=qd*qd;return Ba};Ba.alpha=function(qd){if(!arguments.length)return eb;qd=+qd;eb?0<qd?eb=qd:(Ma.c=null,Ma.t=NaN,Ma=null,Da.end({type:"end",alpha:eb=0})):0<qd&&(Da.start({type:"start",alpha:eb=qd}),Ma=ab(Ba.tick));return Ba};Ba.start=function(){function qd(Od,sf){if(!Gf){Gf=Array(zd);for(Bf=0;Bf<zd;++Bf)Gf[Bf]=[];for(Bf=0;Bf<ee;++Bf){var Vf=Lc[Bf];Gf[Vf.source.index].push(Vf.target);
Gf[Vf.target.index].push(Vf.source)}}Vf=Gf[Id];for(var Bf=-1,Of=Vf.length,Nf;++Bf<Of;)if(!isNaN(Nf=Vf[Bf][Od]))return Nf;return Math.random()*sf}var Id,zd=Kc.length,ee=Lc.length,le=Ua[0],je=Ua[1],Gf,me;for(Id=0;Id<zd;++Id)(me=Kc[Id]).index=Id,me.weight=0;for(Id=0;Id<ee;++Id)me=Lc[Id],"number"==typeof me.source&&(me.source=Kc[me.source]),"number"==typeof me.target&&(me.target=Kc[me.target]),++me.source.weight,++me.target.weight;for(Id=0;Id<zd;++Id)me=Kc[Id],isNaN(me.x)&&(me.x=qd("x",le)),isNaN(me.y)&&
(me.y=qd("y",je)),isNaN(me.px)&&(me.px=me.x),isNaN(me.py)&&(me.py=me.y);Qc=[];if("function"===typeof wb)for(Id=0;Id<ee;++Id)Qc[Id]=+wb.call(this,Lc[Id],Id);else for(Id=0;Id<ee;++Id)Qc[Id]=wb;od=[];if("function"===typeof Eb)for(Id=0;Id<ee;++Id)od[Id]=+Eb.call(this,Lc[Id],Id);else for(Id=0;Id<ee;++Id)od[Id]=Eb;sd=[];if("function"===typeof Tb)for(Id=0;Id<zd;++Id)sd[Id]=+Tb.call(this,Kc[Id],Id);else for(Id=0;Id<zd;++Id)sd[Id]=Tb;return Ba.resume()};Ba.resume=function(){return Ba.alpha(.1)};Ba.stop=function(){return Ba.alpha(0)};
Ba.drag=function(){nb||(nb=Pa.behavior.drag().origin(x).on("dragstart.force",Zc).on("drag.force",ua).on("dragend.force",Bd));if(!arguments.length)return nb;this.on("mouseover.force",Ob).on("mouseout.force",Zb).call(nb)};return Pa.rebind(Ba,Da,"on")};var Qa=20,lb=1,Lb=Infinity;Pa.layout.hierarchy=function(){function ca(Ma){var Ua=[Ma],nb=[],eb;for(Ma.depth=0;null!=(eb=Ua.pop());)if(nb.push(eb),(wb=Ba.call(ca,eb,eb.depth))&&(db=wb.length)){for(var db,wb,Eb;0<=--db;)Ua.push(Eb=wb[db]),Eb.parent=eb,Eb.depth=
eb.depth+1;Da&&(eb.value=0);eb.children=wb}else Da&&(eb.value=+Da.call(ca,eb,eb.depth)||0),delete eb.children;pe(Ma,function(Tb){var mc,ic;ua&&(mc=Tb.children)&&mc.sort(ua);Da&&(ic=Tb.parent)&&(ic.value+=Tb.value)});return nb}var ua=Ge,Ba=Hd,Da=qe;ca.sort=function(Ma){if(!arguments.length)return ua;ua=Ma;return ca};ca.children=function(Ma){if(!arguments.length)return Ba;Ba=Ma;return ca};ca.value=function(Ma){if(!arguments.length)return Da;Da=Ma;return ca};ca.revalue=function(Ma){Da&&(rd(Ma,function(Ua){Ua.children&&
(Ua.value=0)}),pe(Ma,function(Ua){var nb;Ua.children||(Ua.value=+Da.call(ca,Ua,Ua.depth)||0);if(nb=Ua.parent)nb.value+=Ua.value}));return Ma};return ca};Pa.layout.partition=function(){function ca(Ua,nb,eb,db){var wb=Ua.children;Ua.x=nb;Ua.y=Ua.depth*db;Ua.dx=eb;Ua.dy=db;if(wb&&(Tb=wb.length)){var Eb=-1,Tb,mc;for(eb=Ua.value?eb/Ua.value:0;++Eb<Tb;)ca(mc=wb[Eb],nb,Ua=mc.value*eb,db),nb+=Ua}}function ua(Ua){Ua=Ua.children;var nb=0;if(Ua&&(db=Ua.length))for(var eb=-1,db;++eb<db;)nb=Math.max(nb,ua(Ua[eb]));
return 1+nb}function Ba(Ua,nb){Ua=Da.call(this,Ua,nb);ca(Ua[0],0,Ma[0],Ma[1]/ua(Ua[0]));return Ua}var Da=Pa.layout.hierarchy(),Ma=[1,1];Ba.size=function(Ua){if(!arguments.length)return Ma;Ma=Ua;return Ba};return Fd(Ba,Da)};Pa.layout.pie=function(){function ca(nb){var eb=nb.length,db=nb.map(function(Qc,od){return+ua.call(ca,Qc,od)}),wb=+("function"===typeof Da?Da.apply(this,arguments):Da),Eb=("function"===typeof Ma?Ma.apply(this,arguments):Ma)-wb,Tb=Math.min(Math.abs(Eb)/eb,+("function"===typeof Ua?
Ua.apply(this,arguments):Ua)),mc=Tb*(0>Eb?-1:1),ic=Pa.sum(db),Ac=ic?(Eb-eb*mc)/ic:0;eb=Pa.range(eb);var Kc=[],Lc;null!=Ba&&eb.sort(Ba===Rb?function(Qc,od){return db[od]-db[Qc]}:function(Qc,od){return Ba(nb[Qc],nb[od])});eb.forEach(function(Qc){Kc[Qc]={data:nb[Qc],value:Lc=db[Qc],startAngle:wb,endAngle:wb+=Lc*Ac+mc,padAngle:Tb}});return Kc}var ua=Number,Ba=Rb,Da=0,Ma=uf,Ua=0;ca.value=function(nb){if(!arguments.length)return ua;ua=nb;return ca};ca.sort=function(nb){if(!arguments.length)return Ba;Ba=
nb;return ca};ca.startAngle=function(nb){if(!arguments.length)return Da;Da=nb;return ca};ca.endAngle=function(nb){if(!arguments.length)return Ma;Ma=nb;return ca};ca.padAngle=function(nb){if(!arguments.length)return Ua;Ua=nb;return ca};return ca};var Rb={};Pa.layout.stack=function(){function ca(eb,db){if(!(mc=eb.length))return eb;var wb=eb.map(function(Lc,Qc){return ua.call(ca,Lc,Qc)}),Eb=wb.map(function(Lc){return Lc.map(function(Qc,od){return[Ua.call(ca,Qc,od),nb.call(ca,Qc,od)]})}),Tb=Ba.call(ca,
Eb,db);wb=Pa.permute(wb,Tb);Eb=Pa.permute(Eb,Tb);db=Da.call(ca,Eb,db);Tb=wb[0].length;var mc,ic,Ac,Kc;for(Ac=0;Ac<Tb;++Ac)for(Ma.call(ca,wb[0][Ac],Kc=db[Ac],Eb[0][Ac][1]),ic=1;ic<mc;++ic)Ma.call(ca,wb[ic][Ac],Kc+=Eb[ic-1][Ac][1],Eb[ic][Ac][1]);return eb}var ua=x,Ba=Bc,Da=Yc,Ma=Yb,Ua=xb,nb=oc;ca.values=function(eb){if(!arguments.length)return ua;ua=eb;return ca};ca.order=function(eb){if(!arguments.length)return Ba;Ba="function"===typeof eb?eb:dc.get(eb)||Bc;return ca};ca.offset=function(eb){if(!arguments.length)return Da;
Da="function"===typeof eb?eb:Ic.get(eb)||Yc;return ca};ca.x=function(eb){if(!arguments.length)return Ua;Ua=eb;return ca};ca.y=function(eb){if(!arguments.length)return nb;nb=eb;return ca};ca.out=function(eb){if(!arguments.length)return Ma;Ma=eb;return ca};return ca};var dc=Pa.map({"inside-out":function(ca){var ua=ca.length,Ba=ca.map(bd),Da=ca.map(Tc),Ma=Pa.range(ua).sort(function(Eb,Tb){return Ba[Eb]-Ba[Tb]}),Ua=0,nb=0,eb=[],db=[];for(ca=0;ca<ua;++ca){var wb=Ma[ca];Ua<nb?(Ua+=Da[wb],eb.push(wb)):(nb+=
Da[wb],db.push(wb))}return db.reverse().concat(eb)},reverse:function(ca){return Pa.range(ca.length).reverse()},"default":Bc}),Ic=Pa.map({silhouette:function(ca){var ua=ca.length,Ba=ca[0].length,Da=[],Ma=0,Ua,nb,eb,db=[];for(nb=0;nb<Ba;++nb){for(eb=Ua=0;Ua<ua;Ua++)eb+=ca[Ua][nb][1];eb>Ma&&(Ma=eb);Da.push(eb)}for(nb=0;nb<Ba;++nb)db[nb]=(Ma-Da[nb])/2;return db},wiggle:function(ca){var ua=ca.length,Ba=ca[0],Da=Ba.length,Ma,Ua,nb,eb,db,wb,Eb,Tb=[];Tb[0]=wb=Eb=0;for(Ua=1;Ua<Da;++Ua){for(nb=Ma=0;Ma<ua;++Ma)nb+=
ca[Ma][Ua][1];var mc=Ma=0;for(db=Ba[Ua][0]-Ba[Ua-1][0];Ma<ua;++Ma){var ic=0;for(eb=(ca[Ma][Ua][1]-ca[Ma][Ua-1][1])/(2*db);ic<Ma;++ic)eb+=(ca[ic][Ua][1]-ca[ic][Ua-1][1])/db;mc+=eb*ca[Ma][Ua][1]}Tb[Ua]=wb-=nb?mc/nb*db:0;wb<Eb&&(Eb=wb)}for(Ua=0;Ua<Da;++Ua)Tb[Ua]-=Eb;return Tb},expand:function(ca){var ua=ca.length,Ba=ca[0].length,Da=1/ua,Ma,Ua,nb,eb=[];for(Ua=0;Ua<Ba;++Ua){for(nb=Ma=0;Ma<ua;Ma++)nb+=ca[Ma][Ua][1];if(nb)for(Ma=0;Ma<ua;Ma++)ca[Ma][Ua][1]/=nb;else for(Ma=0;Ma<ua;Ma++)ca[Ma][Ua][1]=Da}for(Ua=
0;Ua<Ba;++Ua)eb[Ua]=0;return eb},zero:Yc});Pa.layout.histogram=function(){function ca(Ua,nb){var eb=[],db=Ua.map(Ba,this),wb=Da.call(this,db,nb),Eb=Ma.call(this,wb,db,nb);nb=-1;for(var Tb=db.length,mc=Eb.length-1,ic=ua?1:1/Tb;++nb<mc;){var Ac=eb[nb]=[];Ac.dx=Eb[nb+1]-(Ac.x=Eb[nb]);Ac.y=0}if(0<mc)for(nb=-1;++nb<Tb;)Ac=db[nb],Ac>=wb[0]&&Ac<=wb[1]&&(Ac=eb[Pa.bisect(Eb,Ac,1,mc)-1],Ac.y+=ic,Ac.push(Ua[nb]));return eb}var ua=!0,Ba=Number,Da=pc,Ma=wc;ca.value=function(Ua){if(!arguments.length)return Ba;
Ba=Ua;return ca};ca.range=function(Ua){if(!arguments.length)return Da;Da=Aa(Ua);return ca};ca.bins=function(Ua){if(!arguments.length)return Ma;Ma="number"===typeof Ua?function(nb){return rc(nb,Ua)}:Aa(Ua);return ca};ca.frequency=function(Ua){if(!arguments.length)return ua;ua=!!Ua;return ca};return ca};Pa.layout.pack=function(){function ca(Ua,nb){Ua=ua.call(this,Ua,nb);nb=Ua[0];var eb=Da[0],db=Da[1],wb=null==Ma?Math.sqrt:"function"===typeof Ma?Ma:function(){return Ma};nb.x=nb.y=0;pe(nb,function(Tb){Tb.r=
+wb(Tb.value)});pe(nb,Xd);if(Ba){var Eb=Ba*(Ma?1:Math.max(2*nb.r/eb,2*nb.r/db))/2;pe(nb,function(Tb){Tb.r+=Eb});pe(nb,Xd);pe(nb,function(Tb){Tb.r-=Eb})}vf(nb,eb/2,db/2,Ma?1:1/Math.max(2*nb.r/eb,2*nb.r/db));return Ua}var ua=Pa.layout.hierarchy().sort(ud),Ba=0,Da=[1,1],Ma;ca.size=function(Ua){if(!arguments.length)return Da;Da=Ua;return ca};ca.radius=function(Ua){if(!arguments.length)return Ma;Ma=null==Ua||"function"===typeof Ua?Ua:+Ua;return ca};ca.padding=function(Ua){if(!arguments.length)return Ba;
Ba=+Ua;return ca};return Fd(ca,ua)};Pa.layout.tree=function(){function ca(wb,Eb){wb=Ua.call(this,wb,Eb);Eb=wb[0];var Tb=ua(Eb);pe(Tb,Ba);Tb.parent.m=-Tb.z;rd(Tb,Da);if(db)rd(Eb,Ma);else{var mc=Eb,ic=Eb,Ac=Eb;rd(Eb,function(od){od.x<mc.x&&(mc=od);od.x>ic.x&&(ic=od);od.depth>Ac.depth&&(Ac=od)});var Kc=nb(mc,ic)/2-mc.x,Lc=eb[0]/(ic.x+nb(ic,mc)/2+Kc),Qc=eb[1]/(Ac.depth||1);rd(Eb,function(od){od.x=(od.x+Kc)*Lc;od.y=od.depth*Qc})}return wb}function ua(wb){wb={A:null,children:[wb]};for(var Eb=[wb],Tb;null!=
(Tb=Eb.pop());)for(var mc=Tb.children,ic,Ac=0,Kc=mc.length;Ac<Kc;++Ac)Eb.push((mc[Ac]=ic={_:mc[Ac],parent:Tb,children:(ic=mc[Ac].children)&&ic.slice()||[],A:null,a:null,z:0,m:0,c:0,s:0,t:null,i:Ac}).a=ic);return wb.children[0]}function Ba(wb){var Eb=wb.children,Tb=wb.parent.children,mc=wb.i?Tb[wb.i-1]:null;if(Eb.length){for(var ic=0,Ac=0,Kc=wb.children,Lc=Kc.length,Qc;0<=--Lc;)Qc=Kc[Lc],Qc.z+=ic,Qc.m+=ic,ic+=Qc.s+(Ac+=Qc.c);Eb=(Eb[0].z+Eb[Eb.length-1].z)/2;mc?(wb.z=mc.z+nb(wb._,mc._),wb.m=wb.z-Eb):
wb.z=Eb}else mc&&(wb.z=mc.z+nb(wb._,mc._));Eb=wb.parent;Tb=wb.parent.A||Tb[0];if(mc){Ac=ic=wb;Kc=ic.parent.children[0];Lc=ic.m;Qc=Ac.m;for(var od=mc.m,sd=Kc.m,qd;mc=Sg(mc),ic=ng(ic),mc&&ic;){Kc=ng(Kc);Ac=Sg(Ac);Ac.a=wb;qd=mc.z+od-ic.z-Lc+nb(mc._,ic._);if(0<qd){var Id=mc.a.parent===wb.parent?mc.a:Tb,zd=wb,ee=qd,le=ee/(zd.i-Id.i);zd.c-=le;zd.s+=ee;Id.c+=le;zd.z+=ee;zd.m+=ee;Lc+=qd;Qc+=qd}od+=mc.m;Lc+=ic.m;sd+=Kc.m;Qc+=Ac.m}mc&&!Sg(Ac)&&(Ac.t=mc,Ac.m+=od-Qc);ic&&!ng(Kc)&&(Kc.t=ic,Kc.m+=Lc-sd,Tb=wb)}Eb.A=
Tb}function Da(wb){wb._.x=wb.z+wb.parent.m;wb.m+=wb.parent.m}function Ma(wb){wb.x*=eb[0];wb.y=wb.depth*eb[1]}var Ua=Pa.layout.hierarchy().sort(null).value(null),nb=Mf,eb=[1,1],db=null;ca.separation=function(wb){if(!arguments.length)return nb;nb=wb;return ca};ca.size=function(wb){if(!arguments.length)return db?null:eb;db=null==(eb=wb)?Ma:null;return ca};ca.nodeSize=function(wb){if(!arguments.length)return db?eb:null;db=null==(eb=wb)?null:Ma;return ca};return Fd(ca,Ua)};Pa.layout.cluster=function(){function ca(Ua,
nb){Ua=ua.call(this,Ua,nb);var eb=Ua[0],db,wb=0;pe(eb,function(ic){var Ac=ic.children;Ac&&Ac.length?(ic.x=Ah(Ac),ic.y=Og(Ac)):(ic.x=db?wb+=Ba(ic,db):0,ic.y=0,db=ic)});nb=Kh(eb);var Eb=rh(eb),Tb=nb.x-Ba(nb,Eb)/2,mc=Eb.x+Ba(Eb,nb)/2;pe(eb,Ma?function(ic){ic.x=(ic.x-eb.x)*Da[0];ic.y=(eb.y-ic.y)*Da[1]}:function(ic){ic.x=(ic.x-Tb)/(mc-Tb)*Da[0];ic.y=(1-(eb.y?ic.y/eb.y:1))*Da[1]});return Ua}var ua=Pa.layout.hierarchy().sort(null).value(null),Ba=Mf,Da=[1,1],Ma=!1;ca.separation=function(Ua){if(!arguments.length)return Ba;
Ba=Ua;return ca};ca.size=function(Ua){if(!arguments.length)return Ma?null:Da;Ma=null==(Da=Ua);return ca};ca.nodeSize=function(Ua){if(!arguments.length)return Ma?Da:null;Ma=null!=(Da=Ua);return ca};return Fd(ca,ua)};Pa.layout.treemap=function(){function ca(Ac,Kc){for(var Lc=-1,Qc=Ac.length,od,sd;++Lc<Qc;)sd=(od=Ac[Lc]).value*(0>Kc?0:Kc),od.area=isNaN(sd)||0>=sd?0:sd}function ua(Ac){var Kc=Ac.children;if(Kc&&Kc.length){var Lc=wb(Ac),Qc=[],od=Kc.slice(),sd=Infinity,qd,Id="slice"===mc?Lc.dx:"dice"===
mc?Lc.dy:"slice-dice"===mc?Ac.depth&1?Lc.dy:Lc.dx:Math.min(Lc.dx,Lc.dy);ca(od,Lc.dx*Lc.dy/Ac.value);for(Qc.area=0;0<(Ac=od.length);){Qc.push(Ac=od[Ac-1]);Qc.area+=Ac.area;if(!(Ac="squarify"!==mc)){Ac=Id;for(var zd=Qc.area,ee=0,le=Infinity,je=-1,Gf=Qc.length;++je<Gf;)if(qd=Qc[je].area)qd<le&&(le=qd),qd>ee&&(ee=qd);zd*=zd;Ac*=Ac;Ac=(qd=zd?Math.max(Ac*ee*ic/zd,zd/(Ac*le*ic)):Infinity)<=sd}Ac?(od.pop(),sd=qd):(Qc.area-=Qc.pop().area,Da(Qc,Id,Lc,!1),Id=Math.min(Lc.dx,Lc.dy),Qc.length=Qc.area=0,sd=Infinity)}Qc.length&&
(Da(Qc,Id,Lc,!0),Qc.length=Qc.area=0);Kc.forEach(ua)}}function Ba(Ac){var Kc=Ac.children;if(Kc&&Kc.length){var Lc=wb(Ac),Qc=Kc.slice(),od=[];ca(Qc,Lc.dx*Lc.dy/Ac.value);for(od.area=0;Ac=Qc.pop();)od.push(Ac),od.area+=Ac.area,null!=Ac.z&&(Da(od,Ac.z?Lc.dx:Lc.dy,Lc,!Qc.length),od.length=od.area=0);Kc.forEach(Ba)}}function Da(Ac,Kc,Lc,Qc){var od=-1,sd=Ac.length,qd=Lc.x,Id=Lc.y,zd=Kc?nb(Ac.area/Kc):0;if(Kc==Lc.dx){if(Qc||zd>Lc.dy)zd=Lc.dy;for(;++od<sd;){var ee=Ac[od];ee.x=qd;ee.y=Id;ee.dy=zd;qd+=ee.dx=
Math.min(Lc.x+Lc.dx-qd,zd?nb(ee.area/zd):0)}ee.z=!0;ee.dx+=Lc.x+Lc.dx-qd;Lc.y+=zd;Lc.dy-=zd}else{if(Qc||zd>Lc.dx)zd=Lc.dx;for(;++od<sd;)ee=Ac[od],ee.x=qd,ee.y=Id,ee.dx=zd,Id+=ee.dy=Math.min(Lc.y+Lc.dy-Id,zd?nb(ee.area/zd):0);ee.z=!1;ee.dy+=Lc.y+Lc.dy-Id;Lc.x+=zd;Lc.dx-=zd}}function Ma(Ac){Ac=Tb||Ua(Ac);var Kc=Ac[0];Kc.x=Kc.y=0;Kc.value?(Kc.dx=eb[0],Kc.dy=eb[1]):Kc.dx=Kc.dy=0;Tb&&Ua.revalue(Kc);ca([Kc],Kc.dx*Kc.dy/Kc.value);(Tb?Ba:ua)(Kc);Eb&&(Tb=Ac);return Ac}var Ua=Pa.layout.hierarchy(),nb=Math.round,
eb=[1,1],db=null,wb=Yg,Eb=!1,Tb,mc="squarify",ic=.5*(1+Math.sqrt(5));Ma.size=function(Ac){if(!arguments.length)return eb;eb=Ac;return Ma};Ma.padding=function(Ac){function Kc(od){var sd=Ac.call(Ma,od,od.depth);return null==sd?Yg(od):sh(od,"number"===typeof sd?[sd,sd,sd,sd]:sd)}function Lc(od){return sh(od,Ac)}if(!arguments.length)return db;var Qc;wb=null==(db=Ac)?Yg:"function"===(Qc=typeof Ac)?Kc:"number"===Qc?(Ac=[Ac,Ac,Ac,Ac],Lc):Lc;return Ma};Ma.round=function(Ac){if(!arguments.length)return nb!=
Number;nb=Ac?Math.round:Number;return Ma};Ma.sticky=function(Ac){if(!arguments.length)return Eb;Eb=Ac;Tb=null;return Ma};Ma.ratio=function(Ac){if(!arguments.length)return ic;ic=Ac;return Ma};Ma.mode=function(Ac){if(!arguments.length)return mc;mc=Ac+"";return Ma};return Fd(Ma,Ua)};Pa.random={normal:function(ca,ua){var Ba=arguments.length;2>Ba&&(ua=1);1>Ba&&(ca=0);return function(){do{var Da=2*Math.random()-1;var Ma=2*Math.random()-1;Ma=Da*Da+Ma*Ma}while(!Ma||1<Ma);return ca+ua*Da*Math.sqrt(-2*Math.log(Ma)/
Ma)}},logNormal:function(){var ca=Pa.random.normal.apply(Pa,arguments);return function(){return Math.exp(ca())}},bates:function(ca){var ua=Pa.random.irwinHall(ca);return function(){return ua()/ca}},irwinHall:function(ca){return function(){for(var ua=0,Ba=0;Ba<ca;Ba++)ua+=Math.random();return ua}}};Pa.scale={};var Gc={floor:x,ceil:x};Pa.scale.linear=function(){return qg([0,1],[0,1],Cc,!1)};Pa.scale.log=function(){return jh(Pa.scale.linear().domain([0,1]),10,!0,[1,10])};var Xc={floor:function(ca){return-Math.ceil(-ca)},
ceil:function(ca){return-Math.floor(-ca)}};Pa.scale.pow=function(){return Ug(Pa.scale.linear(),1,[0,1])};Pa.scale.sqrt=function(){return Pa.scale.pow().exponent(.5)};Pa.scale.ordinal=function(){return kh([],{t:"range",a:[[]]})};Pa.scale.category10=function(){return Pa.scale.ordinal().range($c)};Pa.scale.category20=function(){return Pa.scale.ordinal().range(Wc)};Pa.scale.category20b=function(){return Pa.scale.ordinal().range(wd)};Pa.scale.category20c=function(){return Pa.scale.ordinal().range(Qd)};
var $c=[2062260,16744206,2924588,14034728,9725885,9197131,14907330,8355711,12369186,1556175].map(tb),Wc=[2062260,11454440,16744206,16759672,2924588,10018698,14034728,16750742,9725885,12955861,9197131,12885140,14907330,16234194,8355711,13092807,12369186,14408589,1556175,10410725].map(tb),wd=[3750777,5395619,7040719,10264286,6519097,9216594,11915115,13556636,9202993,12426809,15186514,15190932,8666169,11356490,14049643,15177372,8077683,10834324,13528509,14589654].map(tb),Qd=[3244733,7057110,10406625,
13032431,15095053,16616764,16625259,16634018,3253076,7652470,10607003,13101504,7695281,10394312,12369372,14342891,6513507,9868950,12434877,14277081].map(tb);Pa.scale.quantile=function(){return pg([],[])};Pa.scale.quantize=function(){return Bg(0,1,[0,1])};Pa.scale.threshold=function(){return th([.5],[0,1])};Pa.scale.identity=function(){return uh([0,1])};Pa.svg={};Pa.svg.arc=function(){function ca(){var wb=Math.max(0,+Ba.apply(this,arguments)),Eb=Math.max(0,+Da.apply(this,arguments)),Tb=nb.apply(this,
arguments)-kg,mc=eb.apply(this,arguments)-kg,ic=Math.abs(mc-Tb),Ac=Tb>mc?0:1;if(Eb<wb){var Kc=Eb;Eb=wb;wb=Kc}if(ic>=dg)return ua(Eb,Ac)+(wb?ua(wb,1-Ac):"")+"Z";var Lc,Qc=0,od=0,sd=[];if(Lc=(+db.apply(this,arguments)||0)/2){var qd=Ua===yd?Math.sqrt(wb*wb+Eb*Eb):+Ua.apply(this,arguments);Ac||(od*=-1);Eb&&(od=ka(qd/Eb*Math.sin(Lc)));wb&&(Qc=ka(qd/wb*Math.sin(Lc)))}if(Eb){qd=Eb*Math.cos(Tb+od);Lc=Eb*Math.sin(Tb+od);var Id=Eb*Math.cos(mc-od);var zd=Eb*Math.sin(mc-od);var ee=Math.abs(mc-Tb-2*od)<=gf?0:
1;od&&Fa(qd,Lc,Id,zd)===Ac^ee&&(Id=(Tb+mc)/2,qd=Eb*Math.cos(Id),Lc=Eb*Math.sin(Id),Id=zd=null)}else qd=Lc=0;if(wb){od=wb*Math.cos(mc-Qc);var le=wb*Math.sin(mc-Qc);var je=wb*Math.cos(Tb+Qc);var Gf=wb*Math.sin(Tb+Qc);var me=Math.abs(Tb-mc+2*Qc)<=gf?0:1;Qc&&Fa(od,le,je,Gf)===1-Ac^me&&(je=(Tb+mc)/2,od=wb*Math.cos(je),le=wb*Math.sin(je),je=Gf=null)}else od=le=0;1E-6<ic&&.001<(Kc=Math.min(Math.abs(Eb-wb)/2,+Ma.apply(this,arguments)))?(ee=wb<Eb^Ac?0:1,me=Tb=Kc,ic<gf&&(ic=null==je?[od,le]:null==Id?[qd,Lc]:
Ia([qd,Lc],[je,Gf],[Id,zd],[od,le]),me=qd-ic[0],Tb=Lc-ic[1],mc=Id-ic[0],Qc=zd-ic[1],Tb=1/Math.sin(Math.acos((me*mc+Tb*Qc)/(Math.sqrt(me*me+Tb*Tb)*Math.sqrt(mc*mc+Qc*Qc)))/2),ic=Math.sqrt(ic[0]*ic[0]+ic[1]*ic[1]),me=Math.min(Kc,(wb-ic)/(Tb-1)),Tb=Math.min(Kc,(Eb-ic)/(Tb+1))),null!=Id?(ic=Oa(null==je?[od,le]:[je,Gf],[qd,Lc],Eb,Tb,Ac),mc=Oa([Id,zd],[od,le],Eb,Tb,Ac),Kc===Tb?sd.push("M",ic[0],"A",Tb,",",Tb," 0 0,",ee," ",ic[1],"A",Eb,",",Eb," 0 ",1-Ac^Fa(ic[1][0],ic[1][1],mc[1][0],mc[1][1]),",",Ac," ",
mc[1],"A",Tb,",",Tb," 0 0,",ee," ",mc[0]):sd.push("M",ic[0],"A",Tb,",",Tb," 0 1,",ee," ",mc[0])):sd.push("M",qd,",",Lc),null!=je?(Eb=Oa([qd,Lc],[je,Gf],wb,-me,Ac),Id=Oa([od,le],null==Id?[qd,Lc]:[Id,zd],wb,-me,Ac),Kc===me?sd.push("L",Id[0],"A",me,",",me," 0 0,",ee," ",Id[1],"A",wb,",",wb," 0 ",Ac^Fa(Id[1][0],Id[1][1],Eb[1][0],Eb[1][1]),",",1-Ac," ",Eb[1],"A",me,",",me," 0 0,",ee," ",Eb[0]):sd.push("L",Id[0],"A",me,",",me," 0 0,",ee," ",Eb[0])):sd.push("L",od,",",le)):(sd.push("M",qd,",",Lc),null!=
Id&&sd.push("A",Eb,",",Eb," 0 ",ee,",",Ac," ",Id,",",zd),sd.push("L",od,",",le),null!=je&&sd.push("A",wb,",",wb," 0 ",me,",",1-Ac," ",je,",",Gf));sd.push("Z");return sd.join("")}function ua(wb,Eb){return"M0,"+wb+"A"+wb+","+wb+" 0 1,"+Eb+" 0,"+-wb+"A"+wb+","+wb+" 0 1,"+Eb+" 0,"+wb}var Ba=Gg,Da=lh,Ma=Bh,Ua=yd,nb=Lh,eb=vh,db=Ga;ca.innerRadius=function(wb){if(!arguments.length)return Ba;Ba=Aa(wb);return ca};ca.outerRadius=function(wb){if(!arguments.length)return Da;Da=Aa(wb);return ca};ca.cornerRadius=
function(wb){if(!arguments.length)return Ma;Ma=Aa(wb);return ca};ca.padRadius=function(wb){if(!arguments.length)return Ua;Ua=wb==yd?yd:Aa(wb);return ca};ca.startAngle=function(wb){if(!arguments.length)return nb;nb=Aa(wb);return ca};ca.endAngle=function(wb){if(!arguments.length)return eb;eb=Aa(wb);return ca};ca.padAngle=function(wb){if(!arguments.length)return db;db=Aa(wb);return ca};ca.centroid=function(){var wb=(+Ba.apply(this,arguments)+ +Da.apply(this,arguments))/2,Eb=(+nb.apply(this,arguments)+
+eb.apply(this,arguments))/2-kg;return[Math.cos(Eb)*wb,Math.sin(Eb)*wb]};return ca};var yd="auto";Pa.svg.line=function(){return cb(x)};var ge=Pa.map({linear:jb,"linear-closed":Bb,step:function(ca){for(var ua=0,Ba=ca.length,Da=ca[0],Ma=[Da[0],",",Da[1]];++ua<Ba;)Ma.push("H",(Da[0]+(Da=ca[ua])[0])/2,"V",Da[1]);1<Ba&&Ma.push("H",Da[0]);return Ma.join("")},"step-before":Xb,"step-after":Ib,basis:qc,"basis-open":function(ca){if(4>ca.length)return jb(ca);for(var ua=[],Ba=-1,Da=ca.length,Ma,Ua=[0],nb=[0];3>
++Ba;)Ma=ca[Ba],Ua.push(Ma[0]),nb.push(Ma[1]);ua.push(Ec(re,Ua)+","+Ec(re,nb));for(--Ba;++Ba<Da;)Ma=ca[Ba],Ua.shift(),Ua.push(Ma[0]),nb.shift(),nb.push(Ma[1]),ld(ua,Ua,nb);return ua.join("")},"basis-closed":function(ca){for(var ua,Ba=-1,Da=ca.length,Ma=Da+4,Ua,nb=[],eb=[];4>++Ba;)Ua=ca[Ba%Da],nb.push(Ua[0]),eb.push(Ua[1]);ua=[Ec(re,nb),",",Ec(re,eb)];for(--Ba;++Ba<Ma;)Ua=ca[Ba%Da],nb.shift(),nb.push(Ua[0]),eb.shift(),eb.push(Ua[1]),ld(ua,nb,eb);return ua.join("")},bundle:function(ca,ua){var Ba=ca.length-
1;if(Ba)for(var Da=ca[0][0],Ma=ca[0][1],Ua=ca[Ba][0]-Da,nb=ca[Ba][1]-Ma,eb=-1,db,wb;++eb<=Ba;)db=ca[eb],wb=eb/Ba,db[0]=ua*db[0]+(1-ua)*(Da+wb*Ua),db[1]=ua*db[1]+(1-ua)*(Ma+wb*nb);return qc(ca)},cardinal:function(ca,ua){return 3>ca.length?jb(ca):ca[0]+gc(ca,hc(ca,ua))},"cardinal-open":function(ca,ua){return 4>ca.length?jb(ca):ca[1]+gc(ca.slice(1,-1),hc(ca,ua))},"cardinal-closed":function(ca,ua){return 3>ca.length?Bb(ca):ca[0]+gc((ca.push(ca[0]),ca),hc([ca[ca.length-2]].concat(ca,[ca[1]]),ua))},monotone:function(ca){if(3>
ca.length)ca=jb(ca);else{var ua=ca[0],Ba=[],Da;var Ma=0;var Ua=ca.length-1;var nb=[];var eb=ca[1];for(Da=nb[0]=Dd(ca[0],eb);++Ma<Ua;)nb[Ma]=(Da+(Da=Dd(eb,eb=ca[Ma+1])))/2;nb[Ma]=Da;for(var db=-1,wb=ca.length-1;++db<wb;)Ma=Dd(ca[db],ca[db+1]),1E-6>xd(Ma)?nb[db]=nb[db+1]=0:(Ua=nb[db]/Ma,eb=nb[db+1]/Ma,Da=Ua*Ua+eb*eb,9<Da&&(Da=3*Ma/Math.sqrt(Da),nb[db]=Da*Ua,nb[db+1]=Da*eb));for(db=-1;++db<=wb;)Da=(ca[Math.min(wb,db+1)][0]-ca[Math.max(0,db-1)][0])/(6*(1+nb[db]*nb[db])),Ba.push([Da||0,nb[db]*Da||0]);
ca=ua+gc(ca,Ba)}return ca}});ge.forEach(function(ca,ua){ua.key=ca;ua.closed=/-closed$/.test(ca)});var be=[0,2/3,1/3,0],ke=[0,1/3,2/3,0],re=[0,1/6,2/3,1/6];Pa.svg.line.radial=function(){var ca=cb(ye);ca.radius=ca.x;delete ca.x;ca.angle=ca.y;delete ca.y;return ca};Xb.reverse=Ib;Ib.reverse=Xb;Pa.svg.area=function(){return ze(x)};Pa.svg.area.radial=function(){var ca=ze(ye);ca.radius=ca.x;delete ca.x;ca.innerRadius=ca.x0;delete ca.x0;ca.outerRadius=ca.x1;delete ca.x1;ca.angle=ca.y;delete ca.y;ca.startAngle=
ca.y0;delete ca.y0;ca.endAngle=ca.y1;delete ca.y1;return ca};Pa.svg.chord=function(){function ca(db,wb){var Eb=ua(this,Da,db,wb);db=ua(this,Ma,db,wb);return"M"+Eb.p0+Ba(Eb.r,Eb.p1,Eb.a1-Eb.a0)+(Eb.a0==db.a0&&Eb.a1==db.a1?"Q 0,0 "+Eb.p0:"Q 0,0 "+db.p0+Ba(db.r,db.p1,db.a1-db.a0)+("Q 0,0 "+Eb.p0))+"Z"}function ua(db,wb,Eb,Tb){var mc=wb.call(db,Eb,Tb);wb=Ua.call(db,mc,Tb);Eb=nb.call(db,mc,Tb)-kg;db=eb.call(db,mc,Tb)-kg;return{r:wb,a0:Eb,a1:db,p0:[wb*Math.cos(Eb),wb*Math.sin(Eb)],p1:[wb*Math.cos(db),wb*
Math.sin(db)]}}function Ba(db,wb,Eb){return"A"+db+","+db+" 0 "+ +(Eb>gf)+",1 "+wb}var Da=We,Ma=fg,Ua=He,nb=Lh,eb=vh;ca.radius=function(db){if(!arguments.length)return Ua;Ua=Aa(db);return ca};ca.source=function(db){if(!arguments.length)return Da;Da=Aa(db);return ca};ca.target=function(db){if(!arguments.length)return Ma;Ma=Aa(db);return ca};ca.startAngle=function(db){if(!arguments.length)return nb;nb=Aa(db);return ca};ca.endAngle=function(db){if(!arguments.length)return eb;eb=Aa(db);return ca};return ca};
Pa.svg.diagonal=function(){function ca(Ma,Ua){var nb=ua.call(this,Ma,Ua);Ma=Ba.call(this,Ma,Ua);Ua=(nb.y+Ma.y)/2;nb=[nb,{x:nb.x,y:Ua},{x:Ma.x,y:Ua},Ma];nb=nb.map(Da);return"M"+nb[0]+"C"+nb[1]+" "+nb[2]+" "+nb[3]}var ua=We,Ba=fg,Da=cg;ca.source=function(Ma){if(!arguments.length)return ua;ua=Aa(Ma);return ca};ca.target=function(Ma){if(!arguments.length)return Ba;Ba=Aa(Ma);return ca};ca.projection=function(Ma){if(!arguments.length)return Da;Da=Ma;return ca};return ca};Pa.svg.diagonal.radial=function(){var ca=
Pa.svg.diagonal(),ua=cg,Ba=ca.projection;ca.projection=function(Da){return arguments.length?Ba(Xf(ua=Da)):ua};return ca};Pa.svg.symbol=function(){function ca(Da,Ma){return(ne.get(ua.call(this,Da,Ma))||Mg)(Ba.call(this,Da,Ma))}var ua=Pg,Ba=Af;ca.type=function(Da){if(!arguments.length)return ua;ua=Aa(Da);return ca};ca.size=function(Da){if(!arguments.length)return Ba;Ba=Aa(Da);return ca};return ca};var ne=Pa.map({circle:Mg,cross:function(ca){ca=Math.sqrt(ca/5)/2;return"M"+-3*ca+","+-ca+"H"+-ca+"V"+-3*
ca+"H"+ca+"V"+-ca+"H"+3*ca+"V"+ca+"H"+ca+"V"+3*ca+"H"+-ca+"V"+ca+"H"+-3*ca+"Z"},diamond:function(ca){ca=Math.sqrt(ca/(2*we));var ua=ca*we;return"M0,"+-ca+"L"+ua+",0 0,"+ca+" "+-ua+",0Z"},square:function(ca){ca=Math.sqrt(ca)/2;return"M"+-ca+","+-ca+"L"+ca+","+-ca+" "+ca+","+ca+" "+-ca+","+ca+"Z"},"triangle-down":function(ca){ca=Math.sqrt(ca/Le);var ua=ca*Le/2;return"M0,"+ua+"L"+ca+","+-ua+" "+-ca+","+-ua+"Z"},"triangle-up":function(ca){ca=Math.sqrt(ca/Le);var ua=ca*Le/2;return"M0,"+-ua+"L"+ca+","+
ua+" "+-ca+","+ua+"Z"}});Pa.svg.symbolTypes=ne.keys();var Le=Math.sqrt(3),we=Math.tan(30*Kg);he.transition=function(ca){var ua=wf||++xf;ca=Uh(ca);for(var Ba=[],Da,Ma,Ua=lg||{time:Date.now(),ease:Td,delay:0,duration:250},nb=-1,eb=this.length;++nb<eb;){Ba.push(Da=[]);for(var db=this[nb],wb=-1,Eb=db.length;++wb<Eb;)(Ma=db[wb])&&hi(Ma,wb,ca,ua,Ua),Da.push(Ma)}return Jf(Ba,ca,ua)};he.interrupt=function(ca){return this.each(null==ca?kf:vg(Uh(ca)))};var kf=vg(Uh()),Ne=[],xf=0,wf,lg;Ne.call=he.call;Ne.empty=
he.empty;Ne.node=he.node;Ne.size=he.size;Pa.transition=function(ca,ua){return ca&&ca.transition?wf?ca.transition(ua):ca:Pa.selection().transition(ca)};Pa.transition.prototype=Ne;Ne.select=function(ca){var ua=this.id,Ba=this.namespace,Da=[],Ma,Ua,nb;ca=K(ca);for(var eb=-1,db=this.length;++eb<db;){Da.push(Ma=[]);for(var wb=this[eb],Eb=-1,Tb=wb.length;++Eb<Tb;)(nb=wb[Eb])&&(Ua=ca.call(nb,nb.__data__,Eb,eb))?("__data__"in nb&&(Ua.__data__=nb.__data__),hi(Ua,Eb,Ba,ua,nb[Ba][ua]),Ma.push(Ua)):Ma.push(null)}return Jf(Da,
Ba,ua)};Ne.selectAll=function(ca){var ua=this.id,Ba=this.namespace,Da=[],Ma,Ua;ca=M(ca);for(var nb=-1,eb=this.length;++nb<eb;)for(var db=this[nb],wb=-1,Eb=db.length;++wb<Eb;)if(Ma=db[wb]){var Tb=Ma[Ba][ua];var mc=ca.call(Ma,Ma.__data__,wb,nb);Da.push(Ma=[]);for(var ic=-1,Ac=mc.length;++ic<Ac;)(Ua=mc[ic])&&hi(Ua,ic,Ba,ua,Tb),Ma.push(Ua)}return Jf(Da,Ba,ua)};Ne.filter=function(ca){var ua=[],Ba,Da;"function"!==typeof ca&&(ca=S(ca));for(var Ma=0,Ua=this.length;Ma<Ua;Ma++){ua.push(Ba=[]);var nb=this[Ma];
for(var eb=0,db=nb.length;eb<db;eb++)(Da=nb[eb])&&ca.call(Da,Da.__data__,eb,Ma)&&Ba.push(Da)}return Jf(ua,this.namespace,this.id)};Ne.tween=function(ca,ua){var Ba=this.id,Da=this.namespace;return 2>arguments.length?this.node()[Da][Ba].tween.get(ca):fa(this,null==ua?function(Ma){Ma[Da][Ba].tween.remove(ca)}:function(Ma){Ma[Da][Ba].tween.set(ca,ua)})};Ne.attr=function(ca,ua){function Ba(){this.removeAttribute(eb)}function Da(){this.removeAttributeNS(eb.space,eb.local)}function Ma(db){return null==db?
Ba:(db+="",function(){var wb=this.getAttribute(eb),Eb;return wb!==db&&(Eb=nb(wb,db),function(Tb){this.setAttribute(eb,Eb(Tb))})})}function Ua(db){return null==db?Da:(db+="",function(){var wb=this.getAttributeNS(eb.space,eb.local),Eb;return wb!==db&&(Eb=nb(wb,db),function(Tb){this.setAttributeNS(eb.space,eb.local,Eb(Tb))})})}if(2>arguments.length){for(ua in ca)this.attr(ua,ca[ua]);return this}var nb="transform"==ca?Te:Cc,eb=Pa.ns.qualify(ca);return Yf(this,"attr."+ca,ua,eb.local?Ua:Ma)};Ne.attrTween=
function(ca,ua){function Ba(Ua,nb){var eb=ua.call(this,Ua,nb,this.getAttribute(Ma));return eb&&function(db){this.setAttribute(Ma,eb(db))}}function Da(Ua,nb){var eb=ua.call(this,Ua,nb,this.getAttributeNS(Ma.space,Ma.local));return eb&&function(db){this.setAttributeNS(Ma.space,Ma.local,eb(db))}}var Ma=Pa.ns.qualify(ca);return this.tween("attr."+ca,Ma.local?Da:Ba)};Ne.style=function(ca,ua,Ba){function Da(){this.style.removeProperty(ca)}var Ma=arguments.length;if(3>Ma){if("string"!==typeof ca){2>Ma&&
(ua="");for(Ba in ca)this.style(Ba,ca[Ba],ua);return this}Ba=""}return Yf(this,"style."+ca,ua,function(Ua){return null==Ua?Da:(Ua+="",function(){var nb=p(this).getComputedStyle(this,null).getPropertyValue(ca),eb;return nb!==Ua&&(eb=Cc(nb,Ua),function(db){this.style.setProperty(ca,eb(db),Ba)})})})};Ne.styleTween=function(ca,ua,Ba){3>arguments.length&&(Ba="");return this.tween("style."+ca,function(Da,Ma){var Ua=ua.call(this,Da,Ma,p(this).getComputedStyle(this,null).getPropertyValue(ca));return Ua&&
function(nb){this.style.setProperty(ca,Ua(nb),Ba)}})};Ne.text=function(ca){return Yf(this,"text",ca,wh)};Ne.remove=function(){var ca=this.namespace;return this.each("end.transition",function(){var ua;2>this[ca].count&&(ua=this.parentNode)&&ua.removeChild(this)})};Ne.ease=function(ca){var ua=this.id,Ba=this.namespace;if(1>arguments.length)return this.node()[Ba][ua].ease;"function"!==typeof ca&&(ca=Pa.ease.apply(Pa,arguments));return fa(this,function(Da){Da[Ba][ua].ease=ca})};Ne.delay=function(ca){var ua=
this.id,Ba=this.namespace;return 1>arguments.length?this.node()[Ba][ua].delay:fa(this,"function"===typeof ca?function(Da,Ma,Ua){Da[Ba][ua].delay=+ca.call(Da,Da.__data__,Ma,Ua)}:(ca=+ca,function(Da){Da[Ba][ua].delay=ca}))};Ne.duration=function(ca){var ua=this.id,Ba=this.namespace;return 1>arguments.length?this.node()[Ba][ua].duration:fa(this,"function"===typeof ca?function(Da,Ma,Ua){Da[Ba][ua].duration=Math.max(1,ca.call(Da,Da.__data__,Ma,Ua))}:(ca=Math.max(1,ca),function(Da){Da[Ba][ua].duration=ca}))};
Ne.each=function(ca,ua){var Ba=this.id,Da=this.namespace;if(2>arguments.length){var Ma=lg,Ua=wf;try{wf=Ba,fa(this,function(nb,eb,db){lg=nb[Da][Ba];ca.call(nb,nb.__data__,eb,db)})}finally{lg=Ma,wf=Ua}}else fa(this,function(nb){nb=nb[Da][Ba];(nb.event||(nb.event=Pa.dispatch("start","end","interrupt"))).on(ca,ua)});return this};Ne.transition=function(){for(var ca=this.id,ua=++xf,Ba=this.namespace,Da=[],Ma,Ua,nb,eb,db=0,wb=this.length;db<wb;db++){Da.push(Ma=[]);Ua=this[db];for(var Eb=0,Tb=Ua.length;Eb<
Tb;Eb++){if(nb=Ua[Eb])eb=nb[Ba][ca],hi(nb,Eb,Ba,ua,{time:eb.time,ease:eb.ease,delay:eb.delay+eb.duration,duration:eb.duration});Ma.push(nb)}}return Jf(Da,Ba,ua)};Pa.svg.axis=function(){function ca(wb){wb.each(function(){var Eb=Pa.select(this),Tb=this.__chart__||ua,mc=this.__chart__=ua.copy(),ic=null==eb?mc.ticks?mc.ticks.apply(mc,nb):mc.domain():eb,Ac=null==db?mc.tickFormat?mc.tickFormat.apply(mc,nb):x:db,Kc=Eb.selectAll(".tick").data(ic,mc);ic=Kc.enter().insert("g",".domain").attr("class","tick").style("opacity",
1E-6);var Lc=Pa.transition(Kc.exit()).style("opacity",1E-6).remove(),Qc=Pa.transition(Kc.order()).style("opacity",1),od=Math.max(Da,0)+Ua,sd=bh(mc);Eb=Eb.selectAll(".domain").data([0]);Eb=(Eb.enter().append("path").attr("class","domain"),Pa.transition(Eb));ic.append("line");ic.append("text");var qd=ic.select("line"),Id=Qc.select("line");Kc=Kc.select("text").text(Ac);var zd=ic.select("text"),ee=Qc.select("text"),le="top"===Ba||"left"===Ba?-1:1;if("bottom"===Ba||"top"===Ba){Ac=yi;var je="x";var Gf=
"y";var me="x2";var Od="y2";Kc.attr("dy",0>le?"0em":".71em").style("text-anchor","middle");Eb.attr("d","M"+sd[0]+","+le*Ma+"V0H"+sd[1]+"V"+le*Ma)}else Ac=zi,je="y",Gf="x",me="y2",Od="x2",Kc.attr("dy",".32em").style("text-anchor",0>le?"end":"start"),Eb.attr("d","M"+le*Ma+","+sd[0]+"H0V"+sd[1]+"H"+le*Ma);qd.attr(Od,le*Da);zd.attr(Gf,le*od);Id.attr(me,0).attr(Od,le*Da);ee.attr(je,0).attr(Gf,le*od);if(mc.rangeBand){var sf=mc,Vf=sf.rangeBand()/2;Tb=mc=function(Bf){return sf(Bf)+Vf}}else Tb.rangeBand?Tb=
mc:Lc.call(Ac,mc,Tb);ic.call(Ac,Tb,mc);Qc.call(Ac,mc,mc)})}var ua=Pa.scale.linear(),Ba=Cf,Da=6,Ma=6,Ua=3,nb=[10],eb=null,db;ca.scale=function(wb){if(!arguments.length)return ua;ua=wb;return ca};ca.orient=function(wb){if(!arguments.length)return Ba;Ba=wb in Dg?wb+"":Cf;return ca};ca.ticks=function(){if(!arguments.length)return nb;nb=bc(arguments);return ca};ca.tickValues=function(wb){if(!arguments.length)return eb;eb=wb;return ca};ca.tickFormat=function(wb){if(!arguments.length)return db;db=wb;return ca};
ca.tickSize=function(wb){var Eb=arguments.length;if(!Eb)return Da;Da=+wb;Ma=+arguments[Eb-1];return ca};ca.innerTickSize=function(wb){if(!arguments.length)return Da;Da=+wb;return ca};ca.outerTickSize=function(wb){if(!arguments.length)return Ma;Ma=+wb;return ca};ca.tickPadding=function(wb){if(!arguments.length)return Ua;Ua=+wb;return ca};ca.tickSubdivide=function(){return arguments.length&&ca};return ca};var Cf="bottom",Dg={top:1,right:1,bottom:1,left:1};Pa.svg.brush=function(){function ca(Kc){Kc.each(function(){var Lc=
Pa.select(this).style("pointer-events","all").style("-webkit-tap-highlight-color","rgba(0,0,0,0)").on("mousedown.brush",Ma).on("touchstart.brush",Ma),Qc=Lc.selectAll(".background").data([0]);Qc.enter().append("rect").attr("class","background").style("visibility","hidden").style("cursor","crosshair");Lc.selectAll(".extent").data([0]).enter().append("rect").attr("class","extent").style("cursor","move");var od=Lc.selectAll(".resize").data(Ac,x);od.exit().remove();od.enter().append("g").attr("class",
function(sd){return"resize "+sd}).style("cursor",function(sd){return ef[sd]}).append("rect").attr("x",function(sd){return/[ew]$/.test(sd)?-3:null}).attr("y",function(sd){return/^[ns]/.test(sd)?-3:null}).attr("width",6).attr("height",6).style("visibility","hidden");od.style("display",ca.empty()?"none":null);Lc=Pa.transition(Lc);Qc=Pa.transition(Qc);nb&&(od=bh(nb),Qc.attr("x",od[0]).attr("width",od[1]-od[0]),Ba(Lc));eb&&(od=bh(eb),Qc.attr("y",od[0]).attr("height",od[1]-od[0]),Da(Lc));ua(Lc)})}function ua(Kc){Kc.selectAll(".resize").attr("transform",
function(Lc){return"translate("+db[+/e$/.test(Lc)]+","+wb[+/^s/.test(Lc)]+")"})}function Ba(Kc){Kc.select(".extent").attr("x",db[0]);Kc.selectAll(".extent,.n\x3erect,.s\x3erect").attr("width",db[1]-db[0])}function Da(Kc){Kc.select(".extent").attr("y",wb[0]);Kc.selectAll(".extent,.e\x3erect,.w\x3erect").attr("height",wb[1]-wb[0])}function Ma(){function Kc(){var Of=Pa.mouse(od),Nf=!1;Bf&&(Of[0]+=Bf[0],Of[1]+=Bf[1]);je||(Pa.event.altKey?(me||(me=[(db[0]+db[1])/2,(wb[0]+wb[1])/2]),Od[0]=db[+(Of[0]<me[0])],
Od[1]=wb[+(Of[1]<me[1])]):me=null);ee&&Lc(Of,nb,0)&&(Ba(Id),Nf=!0);le&&Lc(Of,eb,1)&&(Da(Id),Nf=!0);Nf&&(ua(Id),qd({type:"brush",mode:je?"move":"resize"}))}function Lc(Of,Nf,Uf){var gg=bh(Nf);Nf=gg[0];var wg=gg[1];gg=Od[Uf];var Fg=Uf?wb:db,Wh=Fg[1]-Fg[0];je&&(Nf-=gg,wg-=Wh+gg);Of=(Uf?ic:mc)?Math.max(Nf,Math.min(wg,Of[Uf])):Of[Uf];je?Nf=(Of+=gg)+Wh:(me&&(gg=Math.max(Nf,Math.min(wg,2*me[Uf]-Of))),gg<Of?(Nf=Of,Of=gg):Nf=gg);if(Fg[0]!=Of||Fg[1]!=Nf)return Uf?Tb=null:Eb=null,Fg[0]=Of,Fg[1]=Nf,!0}function Qc(){Kc();
Id.style("pointer-events","all").selectAll(".resize").style("display",ca.empty()?"none":null);Pa.select("body").style("cursor",null);sf.on("mousemove.brush",null).on("mouseup.brush",null).on("touchmove.brush",null).on("touchend.brush",null).on("keydown.brush",null).on("keyup.brush",null);Gf();qd({type:"brushend"})}var od=this,sd=Pa.select(Pa.event.target),qd=Ua.of(od,arguments),Id=Pa.select(od),zd=sd.datum(),ee=!/^(n|s)$/.test(zd)&&nb,le=!/^(e|w)$/.test(zd)&&eb,je=sd.classed("extent"),Gf=ra(od),me,
Od=Pa.mouse(od),sf=Pa.select(p(od)).on("keydown.brush",function(){32==Pa.event.keyCode&&(je||(me=null,Od[0]-=db[1],Od[1]-=wb[1],je=2),v())}).on("keyup.brush",function(){32==Pa.event.keyCode&&2==je&&(Od[0]+=db[1],Od[1]+=wb[1],je=0,v())});if(Pa.event.changedTouches)sf.on("touchmove.brush",Kc).on("touchend.brush",Qc);else sf.on("mousemove.brush",Kc).on("mouseup.brush",Qc);Id.interrupt().selectAll("*").interrupt();if(je)Od[0]=db[0]-Od[0],Od[1]=wb[0]-Od[1];else if(zd){var Vf=+/w$/.test(zd);zd=+/^n/.test(zd);
var Bf=[db[1-Vf]-Od[0],wb[1-zd]-Od[1]];Od[0]=db[Vf];Od[1]=wb[zd]}else Pa.event.altKey&&(me=Od.slice());Id.style("pointer-events","none").selectAll(".resize").style("display",null);Pa.select("body").style("cursor",sd.style("cursor"));qd({type:"brushstart"});Kc()}var Ua=F(ca,"brushstart","brush","brushend"),nb=null,eb=null,db=[0,0],wb=[0,0],Eb,Tb,mc=!0,ic=!0,Ac=hg[0];ca.event=function(Kc){Kc.each(function(){var Lc=Ua.of(this,arguments),Qc={x:db,y:wb,i:Eb,j:Tb},od=this.__chart__||Qc;this.__chart__=Qc;
wf?Pa.select(this).transition().each("start.brush",function(){Eb=od.i;Tb=od.j;db=od.x;wb=od.y;Lc({type:"brushstart"})}).tween("brush:brush",function(){var sd=dd(db,Qc.x),qd=dd(wb,Qc.y);Eb=Tb=null;return function(Id){db=Qc.x=sd(Id);wb=Qc.y=qd(Id);Lc({type:"brush",mode:"resize"})}}).each("end.brush",function(){Eb=Qc.i;Tb=Qc.j;Lc({type:"brush",mode:"resize"});Lc({type:"brushend"})}):(Lc({type:"brushstart"}),Lc({type:"brush",mode:"resize"}),Lc({type:"brushend"}))})};ca.x=function(Kc){if(!arguments.length)return nb;
nb=Kc;Ac=hg[!nb<<1|!eb];return ca};ca.y=function(Kc){if(!arguments.length)return eb;eb=Kc;Ac=hg[!nb<<1|!eb];return ca};ca.clamp=function(Kc){if(!arguments.length)return nb&&eb?[mc,ic]:nb?mc:eb?ic:null;nb&&eb?(mc=!!Kc[0],ic=!!Kc[1]):nb?mc=!!Kc:eb&&(ic=!!Kc);return ca};ca.extent=function(Kc){if(!arguments.length){if(nb)if(Eb){var Lc=Eb[0];var Qc=Eb[1]}else if(Lc=db[0],Qc=db[1],nb.invert&&(Lc=nb.invert(Lc),Qc=nb.invert(Qc)),Qc<Lc){var od=Lc;Lc=Qc;Qc=od}if(eb)if(Tb){var sd=Tb[0];var qd=Tb[1]}else sd=
wb[0],qd=wb[1],eb.invert&&(sd=eb.invert(sd),qd=eb.invert(qd)),qd<sd&&(od=sd,sd=qd,qd=od);return nb&&eb?[[Lc,sd],[Qc,qd]]:nb?[Lc,Qc]:eb&&[sd,qd]}nb&&(Lc=Kc[0],Qc=Kc[1],eb&&(Lc=Lc[0],Qc=Qc[0]),Eb=[Lc,Qc],nb.invert&&(Lc=nb(Lc),Qc=nb(Qc)),Qc<Lc&&(od=Lc,Lc=Qc,Qc=od),Lc!=db[0]||Qc!=db[1])&&(db=[Lc,Qc]);eb&&(sd=Kc[0],qd=Kc[1],nb&&(sd=sd[1],qd=qd[1]),Tb=[sd,qd],eb.invert&&(sd=eb(sd),qd=eb(qd)),qd<sd&&(od=sd,sd=qd,qd=od),sd!=wb[0]||qd!=wb[1])&&(wb=[sd,qd]);return ca};ca.clear=function(){ca.empty()||(db=[0,
0],wb=[0,0],Eb=Tb=null);return ca};ca.empty=function(){return!!nb&&db[0]==db[1]||!!eb&&wb[0]==wb[1]};return Pa.rebind(ca,Ua,"on")};var ef={n:"ns-resize",e:"ew-resize",s:"ns-resize",w:"ew-resize",nw:"nwse-resize",ne:"nesw-resize",se:"nwse-resize",sw:"nesw-resize"},hg=["n e s w nw ne se sw".split(" "),["e","w"],["n","s"],[]];Pa.text=Ja(function(ca){return ca.responseText});Pa.json=function(ca,ua){return Ta(ca,"application/json",Vh,ua)};Pa.html=function(ca,ua){return Ta(ca,"text/html",Xa,ua)};Pa.xml=
Ja(function(ca){return ca.responseXML});"object"===typeof N&&N.exports?N.exports=Pa:this.d3=Pa}.apply(self)},{}],59:[function(b,N,G){N.exports=b("./quad")},{"./quad":60}],60:[function(b,N,G){function p(e,f){var q=f[0],t=f[1],w=1/(f[2]-q);f=1/(f[3]-t);for(var x=Array(e.length),z=0,B=e.length/2;z<B;z++)x[2*z]=k((e[2*z]-q)*w,0,1),x[2*z+1]=k((e[2*z+1]-t)*f,0,1);return x}var n=b("binary-search-bounds"),k=b("clamp"),m=b("parse-rect"),a=b("array-bounds"),g=b("pick-by-alias"),h=b("defined"),r=b("flatten-vertex-data"),
l=b("is-obj"),c=b("dtype"),d=b("math-log2");N.exports=function(e,f){function q(H,O,I,L,Q,Z){if(!L.length)return null;var ba=C[Q]||(C[Q]=[]),V=y[Q]||(y[Q]=[]),S=v[Q]||(v[Q]=[]),T=ba.length;Q++;if(Q>x||1073741824<Z){for(H=0;H<L.length;H++)ba.push(L[H]),V.push(Z),S.push(null,null,null,null);return T}ba.push(L[0]);V.push(Z);if(1>=L.length)return S.push(null,null,null,null),T;ba=.5*I;V=H+ba;I=O+ba;for(var fa=[],W=[],aa=[],ja=[],ma=1,ia=L.length;ma<ia;ma++){var ra=L[ma],wa=B[2*ra+1];B[2*ra]<V?wa<I?fa.push(ra):
W.push(ra):wa<I?aa.push(ra):ja.push(ra)}Z<<=2;S.push(q(H,O,ba,fa,Q,Z),q(H,I,ba,W,Q,Z+1),q(V,O,ba,aa,Q,Z+2),q(V,I,ba,ja,Q,Z+3));return T}function t(H,O,I,L,Q){for(var Z=[],ba=0;ba<Q;ba++){var V=y[ba],S=F[ba][0],T=w(H,O,ba),fa=w(I,L,ba);T=n.ge(V,T);V=n.gt(V,fa,T,V.length-1);Z[ba]=[T+S,V+S]}return Z}function w(H,O,I){for(var L=1,Q=.5,Z=.5,ba=.5,V=0;V<I;V++)L<<=2,L+=H<Q?O<Z?0:1:O<Z?2:3,ba*=.5,Q+=H<Q?-ba:ba,Z+=O<Z?-ba:ba;return L}f||(f={});e=r(e,"float64");f=g(f,{bounds:"range bounds dataBox databox",
maxDepth:"depth maxDepth maxdepth level maxLevel maxlevel levels",dtype:"type dtype format out dst output destination"});var x=h(f.maxDepth,255),z=h(f.bounds,a(e,2));z[0]===z[2]&&z[2]++;z[1]===z[3]&&z[3]++;var B=p(e,z),A=e.length>>>1;f.dtype||(f.dtype="array");if("string"===typeof f.dtype)var D=new (c(f.dtype))(A);else f.dtype&&(D=f.dtype,Array.isArray(D)&&(D.length=A));for(f=0;f<A;++f)D[f]=f;var C=[],v=[],y=[],F=[];q(0,0,1,D,0,1);for(f=A=0;f<C.length;f++){var J=C[f];if(D.set)D.set(J,A);else for(var K=
0,M=J.length;K<M;K++)D[K+A]=J[K];J=A+C[f].length;F[f]=[A,J];A=J}D.range=function(){function H(ia,ra,wa,pa,la,ka){if(null!==la&&null!==ka&&!(S>ia+wa||T>ra+wa||fa<ia||W<ra||pa>=aa||la===ka)){var na=C[pa];void 0===ka&&(ka=na.length);for(var oa=la;oa<ka;oa++){var sa=na[oa],za=e[2*sa],Ha=e[2*sa+1];za>=Q&&za<=ba&&Ha>=Z&&Ha<=V&&ma.push(sa)}za=v[pa];ka=za[4*la];na=za[4*la+1];oa=za[4*la+2];sa=za[4*la+3];a:{Ha=null;for(var Wa=0;null===Ha;)if(Ha=za[4*(la+1)+Wa],Wa++,Wa>za.length){la=null;break a}la=Ha}wa*=.5;
pa+=1;H(ia,ra,wa,pa,ka,na||oa||sa||la);H(ia,ra+wa,wa,pa,na,oa||sa||la);H(ia+wa,ra,wa,pa,oa,sa||la);H(ia+wa,ra+wa,wa,pa,sa,la)}}for(var O=[],I=arguments.length;I--;)O[I]=arguments[I];if(l(O[O.length-1])){var L=O.pop();O.length||null==L.x&&null==L.l&&null==L.left||(O=[L],I={});I=g(L,{level:"level maxLevel",d:"d diam diameter r radius px pxSize pixel pixelSize maxD size minSize",lod:"lod details ranges offsets"})}else I={};O.length||(O=z);O=m.apply(void 0,O);O=[Math.min(O.x,O.x+O.width),Math.min(O.y,
O.y+O.height),Math.max(O.x,O.x+O.width),Math.max(O.y,O.y+O.height)];var Q=O[0],Z=O[1],ba=O[2],V=O[3];O=p([Q,Z,ba,V],z);var S=O[0],T=O[1],fa=O[2],W=O[3],aa=h(I.level,C.length);if(null!=I.d){if("number"===typeof I.d)var ja=[I.d,I.d];else I.d.length&&(ja=I.d);aa=Math.min(Math.max(Math.ceil(-d(Math.abs(ja[0])/(z[2]-z[0]))),Math.ceil(-d(Math.abs(ja[1])/(z[3]-z[1])))),aa)}aa=Math.min(aa,C.length);if(I.lod)return t(S,T,fa,W,aa);var ma=[];H(0,0,1,0,0,1);return ma};return D}},{"array-bounds":76,"binary-search-bounds":103,
clamp:126,defined:179,dtype:184,"flatten-vertex-data":252,"is-obj":456,"math-log2":467,"parse-rect":492,"pick-by-alias":498}],61:[function(b,N,G){function p(m){var a=0;if(m&&0<m.length){a+=Math.abs(n(m[0]));for(var g=1;g<m.length;g++)a-=Math.abs(n(m[g]))}return a}function n(m){var a,g=0,h=m.length;if(2<h){for(a=0;a<h;a++){if(a===h-2){var r=h-2;var l=h-1;var c=0}else a===h-1?(r=h-1,l=0,c=1):(r=a,l=a+1,c=a+2);r=m[r];l=m[l];c=m[c];g+=(c[0]*Math.PI/180-r[0]*Math.PI/180)*Math.sin(l[1]*Math.PI/180)}g=40680631590769*
g/2}return g}Object.defineProperty(G,"__esModule",{value:!0});var k=b("@turf/meta");G.default=function(m){return k.geomReduce(m,function(a,g){a:{var h=0,r;switch(g.type){case "Polygon":g=p(g.coordinates);break a;case "MultiPolygon":for(r=0;r<g.coordinates.length;r++)h+=p(g.coordinates[r]);g=h;break a}g=0}return a+g},0)}},{"@turf/meta":63}],62:[function(b,N,G){function p(f,q,t){void 0===t&&(t={});var w={type:"Feature"};if(0===t.id||t.id)w.id=t.id;t.bbox&&(w.bbox=t.bbox);w.properties=q||{};w.geometry=
f;return w}function n(f,q,t){void 0===t&&(t={});if(!f)throw Error("coordinates is required");if(!Array.isArray(f))throw Error("coordinates must be an Array");if(2>f.length)throw Error("coordinates must be at least 2 numbers long");if(!e(f[0])||!e(f[1]))throw Error("coordinates must contain numbers");return p({type:"Point",coordinates:f},q,t)}function k(f,q,t){void 0===t&&(t={});for(var w=0;w<f.length;w++){var x=f[w];if(4>x.length)throw Error("Each LinearRing of a Polygon must have 4 or more Positions.");
for(var z=0;z<x[x.length-1].length;z++)if(x[x.length-1][z]!==x[0][z])throw Error("First and last Position are not equivalent.");}return p({type:"Polygon",coordinates:f},q,t)}function m(f,q,t){void 0===t&&(t={});if(2>f.length)throw Error("coordinates must be an array of two or more positions");return p({type:"LineString",coordinates:f},q,t)}function a(f,q){void 0===q&&(q={});var t={type:"FeatureCollection"};q.id&&(t.id=q.id);q.bbox&&(t.bbox=q.bbox);t.features=f;return t}function g(f,q,t){void 0===
t&&(t={});return p({type:"MultiLineString",coordinates:f},q,t)}function h(f,q,t){void 0===t&&(t={});return p({type:"MultiPoint",coordinates:f},q,t)}function r(f,q,t){void 0===t&&(t={});return p({type:"MultiPolygon",coordinates:f},q,t)}function l(f,q){void 0===q&&(q="kilometers");var t=G.factors[q];if(!t)throw Error(q+" units is invalid");return f*t}function c(f,q){void 0===q&&(q="kilometers");var t=G.factors[q];if(!t)throw Error(q+" units is invalid");return f/t}function d(f){return f%(2*Math.PI)*
180/Math.PI}function e(f){return!isNaN(f)&&null!==f&&!Array.isArray(f)}Object.defineProperty(G,"__esModule",{value:!0});G.earthRadius=6371008.8;G.factors={centimeters:100*G.earthRadius,centimetres:100*G.earthRadius,degrees:G.earthRadius/111325,feet:3.28084*G.earthRadius,inches:39.37*G.earthRadius,kilometers:G.earthRadius/1E3,kilometres:G.earthRadius/1E3,meters:G.earthRadius,metres:G.earthRadius,miles:G.earthRadius/1609.344,millimeters:1E3*G.earthRadius,millimetres:1E3*G.earthRadius,nauticalmiles:G.earthRadius/
1852,radians:1,yards:1.0936*G.earthRadius};G.unitsFactors={centimeters:100,centimetres:100,degrees:1/111325,feet:3.28084,inches:39.37,kilometers:.001,kilometres:.001,meters:1,metres:1,miles:1/1609.344,millimeters:1E3,millimetres:1E3,nauticalmiles:1/1852,radians:1/G.earthRadius,yards:1.0936133};G.areaFactors={acres:2.47105E-4,centimeters:1E4,centimetres:1E4,feet:10.763910417,hectares:1E-4,inches:1550.003100006,kilometers:1E-6,kilometres:1E-6,meters:1,metres:1,miles:3.86E-7,millimeters:1E6,millimetres:1E6,
yards:1.195990046};G.feature=p;G.geometry=function(f,q,t){switch(f){case "Point":return n(q).geometry;case "LineString":return m(q).geometry;case "Polygon":return k(q).geometry;case "MultiPoint":return h(q).geometry;case "MultiLineString":return g(q).geometry;case "MultiPolygon":return r(q).geometry;default:throw Error(f+" is invalid");}};G.point=n;G.points=function(f,q,t){void 0===t&&(t={});return a(f.map(function(w){return n(w,q)}),t)};G.polygon=k;G.polygons=function(f,q,t){void 0===t&&(t={});return a(f.map(function(w){return k(w,
q)}),t)};G.lineString=m;G.lineStrings=function(f,q,t){void 0===t&&(t={});return a(f.map(function(w){return m(w,q)}),t)};G.featureCollection=a;G.multiLineString=g;G.multiPoint=h;G.multiPolygon=r;G.geometryCollection=function(f,q,t){void 0===t&&(t={});return p({type:"GeometryCollection",geometries:f},q,t)};G.round=function(f,q){void 0===q&&(q=0);if(q&&!(0<=q))throw Error("precision must be a positive number");q=Math.pow(10,q||0);return Math.round(f*q)/q};G.radiansToLength=l;G.lengthToRadians=c;G.lengthToDegrees=
function(f,q){return d(c(f,q))};G.bearingToAzimuth=function(f){f%=360;0>f&&(f+=360);return f};G.radiansToDegrees=d;G.degreesToRadians=function(f){return f%360*Math.PI/180};G.convertLength=function(f,q,t){void 0===q&&(q="kilometers");void 0===t&&(t="kilometers");if(!(0<=f))throw Error("length must be a positive number");return l(c(f,q),t)};G.convertArea=function(f,q,t){void 0===q&&(q="meters");void 0===t&&(t="kilometers");if(!(0<=f))throw Error("area must be a positive number");q=G.areaFactors[q];
if(!q)throw Error("invalid original units");t=G.areaFactors[t];if(!t)throw Error("invalid final units");return f/q*t};G.isNumber=e;G.isObject=function(f){return!!f&&f.constructor===Object};G.validateBBox=function(f){if(!f)throw Error("bbox is required");if(!Array.isArray(f))throw Error("bbox must be an Array");if(4!==f.length&&6!==f.length)throw Error("bbox must be an Array of 4 or 6 numbers");f.forEach(function(q){if(!e(q))throw Error("bbox must only contain numbers");})};G.validateId=function(f){if(!f)throw Error("id is required");
if(-1===["string","number"].indexOf(typeof f))throw Error("id must be a number or a string");}},{}],63:[function(b,N,G){function p(l,c,d){if(null!==l){var e,f=0,q;var t=l.type;for(var w="FeatureCollection"===t,x="Feature"===t,z=w?l.features.length:1,B=0;B<z;B++){var A=(q=(e=w?l.features[B].geometry:x?l.geometry:l)?"GeometryCollection"===e.type:!1)?e.geometries.length:1;for(var D=0;D<A;D++){var C=0,v=0;var y=q?e.geometries[D]:e;if(null!==y){var F=y.coordinates;var J=y.type;var K=!d||"Polygon"!==J&&
"MultiPolygon"!==J?0:1;switch(J){case null:break;case "Point":if(!1===c(F,f,B,C,v))return!1;f++;break;case "LineString":case "MultiPoint":for(t=0;t<F.length;t++){if(!1===c(F[t],f,B,C,v))return!1;f++;"MultiPoint"===J&&C++}break;case "Polygon":case "MultiLineString":for(t=0;t<F.length;t++){for(y=0;y<F[t].length-K;y++){if(!1===c(F[t][y],f,B,C,v))return!1;f++}"MultiLineString"===J&&C++;"Polygon"===J&&v++}break;case "MultiPolygon":for(t=0;t<F.length;t++){for(y=v=0;y<F[t].length;y++){for(J=0;J<F[t][y].length-
K;J++){if(!1===c(F[t][y][J],f,B,C,v))return!1;f++}v++}C++}break;case "GeometryCollection":for(t=0;t<y.geometries.length;t++)if(!1===p(y.geometries[t],c,d))return!1;break;default:throw Error("Unknown Geometry Type");}}}}}}function n(l,c){var d;switch(l.type){case "FeatureCollection":for(d=0;d<l.features.length&&!1!==c(l.features[d].properties,d);d++);break;case "Feature":c(l.properties,0)}}function k(l,c){if("Feature"===l.type)c(l,0);else if("FeatureCollection"===l.type)for(var d=0;d<l.features.length&&
!1!==c(l.features[d],d);d++);}function m(l,c){var d,e,f,q,t=0,w="FeatureCollection"===l.type,x="Feature"===l.type,z=w?l.features.length:1;for(d=0;d<z;d++){var B=w?l.features[d].geometry:x?l.geometry:l;var A=w?l.features[d].properties:x?l.properties:{};var D=w?l.features[d].bbox:x?l.bbox:void 0;var C=w?l.features[d].id:x?l.id:void 0;var v=(q=B?"GeometryCollection"===B.type:!1)?B.geometries.length:1;for(f=0;f<v;f++){var y=q?B.geometries[f]:B;if(null===y){if(!1===c(null,t,A,D,C))return!1}else switch(y.type){case "Point":case "LineString":case "MultiPoint":case "Polygon":case "MultiLineString":case "MultiPolygon":if(!1===
c(y,t,A,D,C))return!1;break;case "GeometryCollection":for(e=0;e<y.geometries.length;e++)if(!1===c(y.geometries[e],t,A,D,C))return!1;break;default:throw Error("Unknown Geometry Type");}}t++}}function a(l,c){m(l,function(d,e,f,q,t){var w=null===d?null:d.type;switch(w){case null:case "Point":case "LineString":case "Polygon":if(!1===c(r.feature(d,f,{bbox:q,id:t}),e,0))return!1;return}switch(w){case "MultiPoint":var x="Point";break;case "MultiLineString":x="LineString";break;case "MultiPolygon":x="Polygon"}for(q=
0;q<d.coordinates.length;q++)if(!1===c(r.feature({type:x,coordinates:d.coordinates[q]},f),e,q))return!1})}function g(l,c){a(l,function(d,e,f){var q=0;if(d.geometry){var t=d.geometry.type;if("Point"!==t&&"MultiPoint"!==t){var w,x=0,z=0,B=0;if(!1===p(d,function(A,D,C,v,y){if(void 0===w||e>x||v>z||y>B)w=A,x=e,z=v,B=y,q=0;else{D=r.lineString([w,A],d.properties);if(!1===c(D,e,f,y,q))return!1;q++;w=A}}))return!1}}})}function h(l,c){if(!l)throw Error("geojson is required");a(l,function(d,e,f){if(null!==
d.geometry){var q=d.geometry.coordinates;switch(d.geometry.type){case "LineString":if(!1===c(d,e,f,0,0))return!1;break;case "Polygon":for(var t=0;t<q.length;t++)if(!1===c(r.lineString(q[t],d.properties),e,f,t))return!1}}})}Object.defineProperty(G,"__esModule",{value:!0});var r=b("@turf/helpers");G.coordEach=p;G.coordReduce=function(l,c,d,e){var f=d;p(l,function(q,t,w,x,z){f=0===t&&void 0===d?q:c(f,q,t,w,x,z)},e);return f};G.propEach=n;G.propReduce=function(l,c,d){var e=d;n(l,function(f,q){e=0===q&&
void 0===d?f:c(e,f,q)});return e};G.featureEach=k;G.featureReduce=function(l,c,d){var e=d;k(l,function(f,q){e=0===q&&void 0===d?f:c(e,f,q)});return e};G.coordAll=function(l){var c=[];p(l,function(d){c.push(d)});return c};G.geomEach=m;G.geomReduce=function(l,c,d){var e=d;m(l,function(f,q,t,w,x){e=0===q&&void 0===d?f:c(e,f,q,t,w,x)});return e};G.flattenEach=a;G.flattenReduce=function(l,c,d){var e=d;a(l,function(f,q,t){e=0===q&&0===t&&void 0===d?f:c(e,f,q,t)});return e};G.segmentEach=g;G.segmentReduce=
function(l,c,d){var e=d,f=!1;g(l,function(q,t,w,x,z){e=!1===f&&void 0===d?q:c(e,q,t,w,x,z);f=!0});return e};G.lineEach=h;G.lineReduce=function(l,c,d){var e=d;h(l,function(f,q,t,w){e=0===q&&void 0===d?f:c(e,f,q,t,w)});return e};G.findSegment=function(l,c){c=c||{};if(!r.isObject(c))throw Error("options is invalid");var d=c.featureIndex||0,e=c.multiFeatureIndex||0,f=c.geometryIndex||0,q=c.segmentIndex||0,t=c.properties;switch(l.type){case "FeatureCollection":0>d&&(d=l.features.length+d);t=t||l.features[d].properties;
l=l.features[d].geometry;break;case "Feature":t=t||l.properties;l=l.geometry;break;case "Point":case "MultiPoint":return null;case "LineString":case "Polygon":case "MultiLineString":case "MultiPolygon":break;default:throw Error("geojson is invalid");}if(null===l)return null;d=l.coordinates;switch(l.type){case "Point":case "MultiPoint":return null;case "LineString":return 0>q&&(q=d.length+q-1),r.lineString([d[q],d[q+1]],t,c);case "Polygon":return 0>f&&(f=d.length+f),0>q&&(q=d[f].length+q-1),r.lineString([d[f][q],
d[f][q+1]],t,c);case "MultiLineString":return 0>e&&(e=d.length+e),0>q&&(q=d[e].length+q-1),r.lineString([d[e][q],d[e][q+1]],t,c);case "MultiPolygon":return 0>e&&(e=d.length+e),0>f&&(f=d[e].length+f),0>q&&(q=d[e][f].length-q-1),r.lineString([d[e][f][q],d[e][f][q+1]],t,c)}throw Error("geojson is invalid");};G.findPoint=function(l,c){c=c||{};if(!r.isObject(c))throw Error("options is invalid");var d=c.featureIndex||0,e=c.multiFeatureIndex||0,f=c.geometryIndex||0,q=c.coordIndex||0,t=c.properties;switch(l.type){case "FeatureCollection":0>
d&&(d=l.features.length+d);t=t||l.features[d].properties;l=l.features[d].geometry;break;case "Feature":t=t||l.properties;l=l.geometry;break;case "Point":case "MultiPoint":return null;case "LineString":case "Polygon":case "MultiLineString":case "MultiPolygon":break;default:throw Error("geojson is invalid");}if(null===l)return null;d=l.coordinates;switch(l.type){case "Point":return r.point(d,t,c);case "MultiPoint":return 0>e&&(e=d.length+e),r.point(d[e],t,c);case "LineString":return 0>q&&(q=d.length+
q),r.point(d[q],t,c);case "Polygon":return 0>f&&(f=d.length+f),0>q&&(q=d[f].length+q),r.point(d[f][q],t,c);case "MultiLineString":return 0>e&&(e=d.length+e),0>q&&(q=d[e].length+q),r.point(d[e][q],t,c);case "MultiPolygon":return 0>e&&(e=d.length+e),0>f&&(f=d[e].length+f),0>q&&(q=d[e][f].length-q),r.point(d[e][f][q],t,c)}throw Error("geojson is invalid");}},{"@turf/helpers":62}],64:[function(b,N,G){function p(k){var m=[Infinity,Infinity,-Infinity,-Infinity];n.coordEach(k,function(a){m[0]>a[0]&&(m[0]=
a[0]);m[1]>a[1]&&(m[1]=a[1]);m[2]<a[0]&&(m[2]=a[0]);m[3]<a[1]&&(m[3]=a[1])});return m}Object.defineProperty(G,"__esModule",{value:!0});var n=b("@turf/meta");p["default"]=p;G.default=p},{"@turf/meta":66}],65:[function(b,N,G){arguments[4][62][0].apply(G,arguments)},{dup:62}],66:[function(b,N,G){arguments[4][63][0].apply(G,arguments)},{"@turf/helpers":65,dup:63}],67:[function(b,N,G){Object.defineProperty(G,"__esModule",{value:!0});var p=b("@turf/meta"),n=b("@turf/helpers");G.default=function(k,m){void 0===
m&&(m={});var a=0,g=0,h=0;p.coordEach(k,function(r){a+=r[0];g+=r[1];h++});return n.point([a/h,g/h],m.properties)}},{"@turf/helpers":68,"@turf/meta":69}],68:[function(b,N,G){function p(f,q,t){void 0===t&&(t={});var w={type:"Feature"};if(0===t.id||t.id)w.id=t.id;t.bbox&&(w.bbox=t.bbox);w.properties=q||{};w.geometry=f;return w}function n(f,q,t){void 0===t&&(t={});return p({type:"Point",coordinates:f},q,t)}function k(f,q,t){void 0===t&&(t={});for(var w=0;w<f.length;w++){var x=f[w];if(4>x.length)throw Error("Each LinearRing of a Polygon must have 4 or more Positions.");
for(var z=0;z<x[x.length-1].length;z++)if(x[x.length-1][z]!==x[0][z])throw Error("First and last Position are not equivalent.");}return p({type:"Polygon",coordinates:f},q,t)}function m(f,q,t){void 0===t&&(t={});if(2>f.length)throw Error("coordinates must be an array of two or more positions");return p({type:"LineString",coordinates:f},q,t)}function a(f,q){void 0===q&&(q={});var t={type:"FeatureCollection"};q.id&&(t.id=q.id);q.bbox&&(t.bbox=q.bbox);t.features=f;return t}function g(f,q,t){void 0===
t&&(t={});return p({type:"MultiLineString",coordinates:f},q,t)}function h(f,q,t){void 0===t&&(t={});return p({type:"MultiPoint",coordinates:f},q,t)}function r(f,q,t){void 0===t&&(t={});return p({type:"MultiPolygon",coordinates:f},q,t)}function l(f,q){void 0===q&&(q="kilometers");var t=G.factors[q];if(!t)throw Error(q+" units is invalid");return f*t}function c(f,q){void 0===q&&(q="kilometers");var t=G.factors[q];if(!t)throw Error(q+" units is invalid");return f/t}function d(f){return f%(2*Math.PI)*
180/Math.PI}function e(f){return!isNaN(f)&&null!==f&&!Array.isArray(f)&&!/^\s*$/.test(f)}Object.defineProperty(G,"__esModule",{value:!0});G.earthRadius=6371008.8;G.factors={centimeters:100*G.earthRadius,centimetres:100*G.earthRadius,degrees:G.earthRadius/111325,feet:3.28084*G.earthRadius,inches:39.37*G.earthRadius,kilometers:G.earthRadius/1E3,kilometres:G.earthRadius/1E3,meters:G.earthRadius,metres:G.earthRadius,miles:G.earthRadius/1609.344,millimeters:1E3*G.earthRadius,millimetres:1E3*G.earthRadius,
nauticalmiles:G.earthRadius/1852,radians:1,yards:G.earthRadius/1.0936};G.unitsFactors={centimeters:100,centimetres:100,degrees:1/111325,feet:3.28084,inches:39.37,kilometers:.001,kilometres:.001,meters:1,metres:1,miles:1/1609.344,millimeters:1E3,millimetres:1E3,nauticalmiles:1/1852,radians:1/G.earthRadius,yards:1/1.0936};G.areaFactors={acres:2.47105E-4,centimeters:1E4,centimetres:1E4,feet:10.763910417,inches:1550.003100006,kilometers:1E-6,kilometres:1E-6,meters:1,metres:1,miles:3.86E-7,millimeters:1E6,
millimetres:1E6,yards:1.195990046};G.feature=p;G.geometry=function(f,q,t){switch(f){case "Point":return n(q).geometry;case "LineString":return m(q).geometry;case "Polygon":return k(q).geometry;case "MultiPoint":return h(q).geometry;case "MultiLineString":return g(q).geometry;case "MultiPolygon":return r(q).geometry;default:throw Error(f+" is invalid");}};G.point=n;G.points=function(f,q,t){void 0===t&&(t={});return a(f.map(function(w){return n(w,q)}),t)};G.polygon=k;G.polygons=function(f,q,t){void 0===
t&&(t={});return a(f.map(function(w){return k(w,q)}),t)};G.lineString=m;G.lineStrings=function(f,q,t){void 0===t&&(t={});return a(f.map(function(w){return m(w,q)}),t)};G.featureCollection=a;G.multiLineString=g;G.multiPoint=h;G.multiPolygon=r;G.geometryCollection=function(f,q,t){void 0===t&&(t={});return p({type:"GeometryCollection",geometries:f},q,t)};G.round=function(f,q){void 0===q&&(q=0);if(q&&!(0<=q))throw Error("precision must be a positive number");q=Math.pow(10,q||0);return Math.round(f*q)/
q};G.radiansToLength=l;G.lengthToRadians=c;G.lengthToDegrees=function(f,q){return d(c(f,q))};G.bearingToAzimuth=function(f){f%=360;0>f&&(f+=360);return f};G.radiansToDegrees=d;G.degreesToRadians=function(f){return f%360*Math.PI/180};G.convertLength=function(f,q,t){void 0===q&&(q="kilometers");void 0===t&&(t="kilometers");if(!(0<=f))throw Error("length must be a positive number");return l(c(f,q),t)};G.convertArea=function(f,q,t){void 0===q&&(q="meters");void 0===t&&(t="kilometers");if(!(0<=f))throw Error("area must be a positive number");
q=G.areaFactors[q];if(!q)throw Error("invalid original units");t=G.areaFactors[t];if(!t)throw Error("invalid final units");return f/q*t};G.isNumber=e;G.isObject=function(f){return!!f&&f.constructor===Object};G.validateBBox=function(f){if(!f)throw Error("bbox is required");if(!Array.isArray(f))throw Error("bbox must be an Array");if(4!==f.length&&6!==f.length)throw Error("bbox must be an Array of 4 or 6 numbers");f.forEach(function(q){if(!e(q))throw Error("bbox must only contain numbers");})};G.validateId=
function(f){if(!f)throw Error("id is required");if(-1===["string","number"].indexOf(typeof f))throw Error("id must be a number or a string");};G.radians2degrees=function(){throw Error("method has been renamed to `radiansToDegrees`");};G.degrees2radians=function(){throw Error("method has been renamed to `degreesToRadians`");};G.distanceToDegrees=function(){throw Error("method has been renamed to `lengthToDegrees`");};G.distanceToRadians=function(){throw Error("method has been renamed to `lengthToRadians`");
};G.radiansToDistance=function(){throw Error("method has been renamed to `radiansToLength`");};G.bearingToAngle=function(){throw Error("method has been renamed to `bearingToAzimuth`");};G.convertDistance=function(){throw Error("method has been renamed to `convertLength`");}},{}],69:[function(b,N,G){function p(l,c,d){if(null!==l){var e,f=0,q;var t=l.type;for(var w="FeatureCollection"===t,x="Feature"===t,z=w?l.features.length:1,B=0;B<z;B++){var A=(q=(e=w?l.features[B].geometry:x?l.geometry:l)?"GeometryCollection"===
e.type:!1)?e.geometries.length:1;for(var D=0;D<A;D++){var C=0,v=0;var y=q?e.geometries[D]:e;if(null!==y){var F=y.coordinates;var J=y.type;var K=!d||"Polygon"!==J&&"MultiPolygon"!==J?0:1;switch(J){case null:break;case "Point":if(!1===c(F,f,B,C,v))return!1;f++;break;case "LineString":case "MultiPoint":for(t=0;t<F.length;t++){if(!1===c(F[t],f,B,C,v))return!1;f++;"MultiPoint"===J&&C++}break;case "Polygon":case "MultiLineString":for(t=0;t<F.length;t++){for(y=0;y<F[t].length-K;y++){if(!1===c(F[t][y],f,
B,C,v))return!1;f++}"MultiLineString"===J&&C++;"Polygon"===J&&v++}break;case "MultiPolygon":for(t=0;t<F.length;t++){for(y=v=0;y<F[t].length;y++){for(J=0;J<F[t][y].length-K;J++){if(!1===c(F[t][y][J],f,B,C,v))return!1;f++}v++}C++}break;case "GeometryCollection":for(t=0;t<y.geometries.length;t++)if(!1===p(y.geometries[t],c,d))return!1;break;default:throw Error("Unknown Geometry Type");}}}}}}function n(l,c){var d;switch(l.type){case "FeatureCollection":for(d=0;d<l.features.length&&!1!==c(l.features[d].properties,
d);d++);break;case "Feature":c(l.properties,0)}}function k(l,c){if("Feature"===l.type)c(l,0);else if("FeatureCollection"===l.type)for(var d=0;d<l.features.length&&!1!==c(l.features[d],d);d++);}function m(l,c){var d,e,f,q,t=0,w="FeatureCollection"===l.type,x="Feature"===l.type,z=w?l.features.length:1;for(d=0;d<z;d++){var B=w?l.features[d].geometry:x?l.geometry:l;var A=w?l.features[d].properties:x?l.properties:{};var D=w?l.features[d].bbox:x?l.bbox:void 0;var C=w?l.features[d].id:x?l.id:void 0;var v=
(q=B?"GeometryCollection"===B.type:!1)?B.geometries.length:1;for(f=0;f<v;f++){var y=q?B.geometries[f]:B;if(null===y){if(!1===c(null,t,A,D,C))return!1}else switch(y.type){case "Point":case "LineString":case "MultiPoint":case "Polygon":case "MultiLineString":case "MultiPolygon":if(!1===c(y,t,A,D,C))return!1;break;case "GeometryCollection":for(e=0;e<y.geometries.length;e++)if(!1===c(y.geometries[e],t,A,D,C))return!1;break;default:throw Error("Unknown Geometry Type");}}t++}}function a(l,c){m(l,function(d,
e,f,q,t){var w=null===d?null:d.type;switch(w){case null:case "Point":case "LineString":case "Polygon":if(!1===c(r.feature(d,f,{bbox:q,id:t}),e,0))return!1;return}switch(w){case "MultiPoint":var x="Point";break;case "MultiLineString":x="LineString";break;case "MultiPolygon":x="Polygon"}for(q=0;q<d.coordinates.length;q++)if(!1===c(r.feature({type:x,coordinates:d.coordinates[q]},f),e,q))return!1})}function g(l,c){a(l,function(d,e,f){var q=0;if(d.geometry){var t=d.geometry.type;if("Point"!==t&&"MultiPoint"!==
t){var w,x=0,z=0,B=0;if(!1===p(d,function(A,D,C,v,y){if(void 0===w||e>x||v>z||y>B)w=A,x=e,z=v,B=y,q=0;else{D=r.lineString([w,A],d.properties);if(!1===c(D,e,f,y,q))return!1;q++;w=A}}))return!1}}})}function h(l,c){if(!l)throw Error("geojson is required");a(l,function(d,e,f){if(null!==d.geometry){var q=d.geometry.coordinates;switch(d.geometry.type){case "LineString":if(!1===c(d,e,f,0,0))return!1;break;case "Polygon":for(var t=0;t<q.length;t++)if(!1===c(r.lineString(q[t],d.properties),e,f,t))return!1}}})}
Object.defineProperty(G,"__esModule",{value:!0});var r=b("@turf/helpers");G.coordEach=p;G.coordReduce=function(l,c,d,e){var f=d;p(l,function(q,t,w,x,z){f=0===t&&void 0===d?q:c(f,q,t,w,x,z)},e);return f};G.propEach=n;G.propReduce=function(l,c,d){var e=d;n(l,function(f,q){e=0===q&&void 0===d?f:c(e,f,q)});return e};G.featureEach=k;G.featureReduce=function(l,c,d){var e=d;k(l,function(f,q){e=0===q&&void 0===d?f:c(e,f,q)});return e};G.coordAll=function(l){var c=[];p(l,function(d){c.push(d)});return c};
G.geomEach=m;G.geomReduce=function(l,c,d){var e=d;m(l,function(f,q,t,w,x){e=0===q&&void 0===d?f:c(e,f,q,t,w,x)});return e};G.flattenEach=a;G.flattenReduce=function(l,c,d){var e=d;a(l,function(f,q,t){e=0===q&&0===t&&void 0===d?f:c(e,f,q,t)});return e};G.segmentEach=g;G.segmentReduce=function(l,c,d){var e=d,f=!1;g(l,function(q,t,w,x,z){e=!1===f&&void 0===d?q:c(e,q,t,w,x,z);f=!0});return e};G.lineEach=h;G.lineReduce=function(l,c,d){var e=d;h(l,function(f,q,t,w){e=0===q&&void 0===d?f:c(e,f,q,t,w)});return e};
G.findSegment=function(l,c){c=c||{};if(!r.isObject(c))throw Error("options is invalid");var d=c.featureIndex||0,e=c.multiFeatureIndex||0,f=c.geometryIndex||0,q=c.segmentIndex||0,t=c.properties;switch(l.type){case "FeatureCollection":0>d&&(d=l.features.length+d);t=t||l.features[d].properties;l=l.features[d].geometry;break;case "Feature":t=t||l.properties;l=l.geometry;break;case "Point":case "MultiPoint":return null;case "LineString":case "Polygon":case "MultiLineString":case "MultiPolygon":break;default:throw Error("geojson is invalid");
}if(null===l)return null;d=l.coordinates;switch(l.type){case "Point":case "MultiPoint":return null;case "LineString":return 0>q&&(q=d.length+q-1),r.lineString([d[q],d[q+1]],t,c);case "Polygon":return 0>f&&(f=d.length+f),0>q&&(q=d[f].length+q-1),r.lineString([d[f][q],d[f][q+1]],t,c);case "MultiLineString":return 0>e&&(e=d.length+e),0>q&&(q=d[e].length+q-1),r.lineString([d[e][q],d[e][q+1]],t,c);case "MultiPolygon":return 0>e&&(e=d.length+e),0>f&&(f=d[e].length+f),0>q&&(q=d[e][f].length-q-1),r.lineString([d[e][f][q],
d[e][f][q+1]],t,c)}throw Error("geojson is invalid");};G.findPoint=function(l,c){c=c||{};if(!r.isObject(c))throw Error("options is invalid");var d=c.featureIndex||0,e=c.multiFeatureIndex||0,f=c.geometryIndex||0,q=c.coordIndex||0,t=c.properties;switch(l.type){case "FeatureCollection":0>d&&(d=l.features.length+d);t=t||l.features[d].properties;l=l.features[d].geometry;break;case "Feature":t=t||l.properties;l=l.geometry;break;case "Point":case "MultiPoint":return null;case "LineString":case "Polygon":case "MultiLineString":case "MultiPolygon":break;
default:throw Error("geojson is invalid");}if(null===l)return null;d=l.coordinates;switch(l.type){case "Point":return r.point(d,t,c);case "MultiPoint":return 0>e&&(e=d.length+e),r.point(d[e],t,c);case "LineString":return 0>q&&(q=d.length+q),r.point(d[q],t,c);case "Polygon":return 0>f&&(f=d.length+f),0>q&&(q=d[f].length+q),r.point(d[f][q],t,c);case "MultiLineString":return 0>e&&(e=d.length+e),0>q&&(q=d[e].length+q),r.point(d[e][q],t,c);case "MultiPolygon":return 0>e&&(e=d.length+e),0>f&&(f=d[e].length+
f),0>q&&(q=d[e][f].length-q),r.point(d[e][f][q],t,c)}throw Error("geojson is invalid");}},{"@turf/helpers":68}],70:[function(b,N,G){G="undefined"===typeof WeakMap?b("weak-map"):WeakMap;var p=b("gl-buffer"),n=b("gl-vao"),k=new G;N.exports=function(m){var a=k.get(m),g=a&&(a._triangleBuffer.handle||a._triangleBuffer.buffer);g&&m.isBuffer(g)||(g=p(m,new Float32Array([-1,-1,-1,4,4,-1])),a=n(m,[{buffer:g,type:m.FLOAT,size:2}]),a._triangleBuffer=g,k.set(m,a));a.bind();m.drawArrays(m.TRIANGLES,0,3);a.unbind()}},
{"gl-buffer":267,"gl-vao":361,"weak-map":625}],71:[function(b,N,G){N.exports=function(p){var n=0,k=0,m=0,a=0;return p.map(function(g){g=g.slice();var h=g[0],r=h.toUpperCase();if(h!=r)switch(g[0]=r,h){case "a":g[6]+=m;g[7]+=a;break;case "v":g[1]+=a;break;case "h":g[1]+=m;break;default:for(h=1;h<g.length;)g[h++]+=m,g[h++]+=a}switch(r){case "Z":m=n;a=k;break;case "H":m=g[1];break;case "V":a=g[1];break;case "M":m=n=g[1];a=k=g[2];break;default:m=g[g.length-2],a=g[g.length-1]}return g})}},{}],72:[function(b,
N,G){var p=b("pad-left");N.exports=function(n,k,m){k="number"===typeof k?k:1;m=m||": ";n=n.split(/\r?\n/);var a=String(n.length+k-1).length;return n.map(function(g,h){h+=k;return p(h,a-String(h).length)+m+g}).join("\n")}},{"pad-left":490}],73:[function(b,N,G){N.exports=function(n){var k=n.length;if(0===k)return[];if(1===k)return[0];for(var m=n[0].length,a=[n[0]],g=[0],h=1;h<k;++h){a.push(n[h]);a:{var r=a;for(var l=m,c=Array(l+1),d=0;d<r.length;++d)c[d]=r[d];for(d=0;d<=r.length;++d){for(var e=r.length;e<=
l;++e){for(var f=Array(l),q=0;q<l;++q)f[q]=Math.pow(e+1-d,q);c[e]=f}if(p.apply(void 0,c)){r=!0;break a}}r=!1}if(r){if(g.push(h),g.length===m+1)break}else a.pop()}return g};var p=b("robust-orientation")},{"robust-orientation":548}],74:[function(b,N,G){N.exports=function(k,m){return p(m).filter(function(a){for(var g=Array(a.length),h=0;h<a.length;++h)g[h]=m[a[h]];return 1>n(g)*k})};var p=b("delaunay-triangulate"),n=b("circumradius")},{circumradius:125,"delaunay-triangulate":180}],75:[function(b,N,G){N.exports=
function(k,m){return n(p(k,m))};var p=b("alpha-complex"),n=b("simplicial-complex-boundary")},{"alpha-complex":74,"simplicial-complex-boundary":556}],76:[function(b,N,G){N.exports=function(p,n){if(!p||null==p.length)throw Error("Argument should be an array");n=null==n?1:Math.floor(n);for(var k=Array(2*n),m=0;m<n;m++){for(var a=-Infinity,g=Infinity,h=m,r=p.length;h<r;h+=n)p[h]>a&&(a=p[h]),p[h]<g&&(g=p[h]);k[m]=g;k[n+m]=a}return k}},{}],77:[function(b,N,G){N.exports=function(p,n,k){if("function"===typeof Array.prototype.findIndex)return p.findIndex(n,
k);if("function"!==typeof n)throw new TypeError("predicate must be a function");p=Object(p);var m=p.length;if(0===m)return-1;for(var a=0;a<m;a++)if(n.call(k,p[a],a,p))return a;return-1}},{}],78:[function(b,N,G){var p=b("array-bounds");N.exports=function(n,k,m){if(!n||null==n.length)throw Error("Argument should be an array");null==k&&(k=1);null==m&&(m=p(n,k));for(var a=0;a<k;a++){var g=m[k+a],h=m[a],r,l=n.length;if(Infinity===g&&-Infinity===h)for(r=a;r<l;r+=k)n[r]=n[r]===g?1:n[r]===h?0:.5;else if(Infinity===
g)for(r=a;r<l;r+=k)n[r]=n[r]===g?1:0;else if(-Infinity===h)for(r=a;r<l;r+=k)n[r]=n[r]===h?0:1;else for(g-=h,r=a;r<l;r+=k)isNaN(n[r])||(n[r]=0===g?.5:(n[r]-h)/g)}return n}},{"array-bounds":76}],79:[function(b,N,G){N.exports=function(p,n){var k="number"===typeof p,m="number"===typeof n;k&&!m?(n=p,p=0):k||m||(n=p=0);p|=0;n=(n|0)-p;if(0>n)throw Error("array length must be positive");k=Array(n);for(m=0;m<n;m++,p++)k[m]=p;return k}},{}],80:[function(b,N,G){(function(p){(function(){function n(F,J){if(F===
J)return 0;for(var K=F.length,M=J.length,H=0,O=Math.min(K,M);H<O;++H)if(F[H]!==J[H]){K=F[H];M=J[H];break}return K<M?-1:M<K?1:0}function k(F){return p.Buffer&&"function"===typeof p.Buffer.isBuffer?p.Buffer.isBuffer(F):!(null==F||!F._isBuffer)}function m(F){return k(F)||"function"!==typeof p.ArrayBuffer?!1:"function"===typeof ArrayBuffer.isView?ArrayBuffer.isView(F):F?F instanceof DataView||F.buffer&&F.buffer instanceof ArrayBuffer?!0:!1:!1}function a(F){if(z.isFunction(F))return D?F.name:(F=F.toString().match(v))&&
F[1]}function g(F,J){return"string"===typeof F?F.length<J?F:F.slice(0,J):F}function h(F){if(D||!z.isFunction(F))return z.inspect(F);F=a(F);return"[Function"+(F?": "+F:"")+"]"}function r(F,J,K,M,H){throw new C.AssertionError({message:K,actual:F,expected:J,operator:M,stackStartFunction:H});}function l(F,J){F||r(F,!0,J,"\x3d\x3d",C.ok)}function c(F,J,K,M){if(F===J)return!0;if(k(F)&&k(J))return 0===n(F,J);if(z.isDate(F)&&z.isDate(J))return F.getTime()===J.getTime();if(z.isRegExp(F)&&z.isRegExp(J))return F.source===
J.source&&F.global===J.global&&F.multiline===J.multiline&&F.lastIndex===J.lastIndex&&F.ignoreCase===J.ignoreCase;if(null!==F&&"object"===typeof F||null!==J&&"object"===typeof J){if(!m(F)||!m(J)||Object.prototype.toString.call(F)!==Object.prototype.toString.call(J)||F instanceof Float32Array||F instanceof Float64Array){if(k(F)!==k(J))return!1;M=M||{actual:[],expected:[]};var H=M.actual.indexOf(F);if(-1!==H&&H===M.expected.indexOf(J))return!0;M.actual.push(F);M.expected.push(J);return e(F,J,K,M)}return 0===
n(new Uint8Array(F.buffer),new Uint8Array(J.buffer))}return K?F===J:F==J}function d(F){return"[object Arguments]"==Object.prototype.toString.call(F)}function e(F,J,K,M){if(null===F||void 0===F||null===J||void 0===J)return!1;if(z.isPrimitive(F)||z.isPrimitive(J))return F===J;if(K&&Object.getPrototypeOf(F)!==Object.getPrototypeOf(J))return!1;var H=d(F),O=d(J);if(H&&!O||!H&&O)return!1;if(H)return F=A.call(F),J=A.call(J),c(F,J,K);H=y(F);var I=y(J);if(H.length!==I.length)return!1;H.sort();I.sort();for(O=
H.length-1;0<=O;O--)if(H[O]!==I[O])return!1;for(O=H.length-1;0<=O;O--)if(I=H[O],!c(F[I],J[I],K,M))return!1;return!0}function f(F,J,K){c(F,J,!0)&&r(F,J,K,"notDeepStrictEqual",f)}function q(F,J){if(!F||!J)return!1;if("[object RegExp]"==Object.prototype.toString.call(J))return J.test(F);try{if(F instanceof J)return!0}catch(K){}return Error.isPrototypeOf(J)?!1:!0===J.call({},F)}function t(F,J,K,M){if("function"!==typeof J)throw new TypeError('"block" argument must be a function');"string"===typeof K&&
(M=K,K=null);try{J()}catch(L){var H=L}J=H;M=(K&&K.name?" ("+K.name+").":".")+(M?" "+M:".");F&&!J&&r(J,K,"Missing expected exception"+M);H="string"===typeof M;var O=!F&&z.isError(J),I=!F&&J&&!K;(O&&H&&q(J,K)||I)&&r(J,K,"Got unwanted exception"+M);if(F&&J&&K&&!q(J,K)||!F&&J)throw J;}function w(F,J){F||r(F,!0,J,"\x3d\x3d",w)}var x=b("object-assign"),z=b("util/"),B=Object.prototype.hasOwnProperty,A=Array.prototype.slice,D=function(){return"foo"===function(){}.name}(),C=N.exports=l,v=/\s*function\s+([^\(\s]*)\s*/;
C.AssertionError=function(F){this.name="AssertionError";this.actual=F.actual;this.expected=F.expected;this.operator=F.operator;F.message?(this.message=F.message,this.generatedMessage=!1):(this.message=g(h(this.actual),128)+" "+this.operator+" "+g(h(this.expected),128),this.generatedMessage=!0);var J=F.stackStartFunction||r;Error.captureStackTrace?Error.captureStackTrace(this,J):(F=Error(),F.stack&&(F=F.stack,J=a(J),J=F.indexOf("\n"+J),0<=J&&(J=F.indexOf("\n",J+1),F=F.substring(J+1)),this.stack=F))};
z.inherits(C.AssertionError,Error);C.fail=r;C.ok=l;C.equal=function(F,J,K){F!=J&&r(F,J,K,"\x3d\x3d",C.equal)};C.notEqual=function(F,J,K){F==J&&r(F,J,K,"!\x3d",C.notEqual)};C.deepEqual=function(F,J,K){c(F,J,!1)||r(F,J,K,"deepEqual",C.deepEqual)};C.deepStrictEqual=function(F,J,K){c(F,J,!0)||r(F,J,K,"deepStrictEqual",C.deepStrictEqual)};C.notDeepEqual=function(F,J,K){c(F,J,!1)&&r(F,J,K,"notDeepEqual",C.notDeepEqual)};C.notDeepStrictEqual=f;C.strictEqual=function(F,J,K){F!==J&&r(F,J,K,"\x3d\x3d\x3d",
C.strictEqual)};C.notStrictEqual=function(F,J,K){F===J&&r(F,J,K,"!\x3d\x3d",C.notStrictEqual)};C.throws=function(F,J,K){t(!0,F,J,K)};C.doesNotThrow=function(F,J,K){t(!1,F,J,K)};C.ifError=function(F){if(F)throw F;};C.strict=x(w,C,{equal:C.strictEqual,deepEqual:C.deepStrictEqual,notEqual:C.notStrictEqual,notDeepEqual:C.notDeepStrictEqual});C.strict.strict=C.strict;var y=Object.keys||function(F){var J=[],K;for(K in F)B.call(F,K)&&J.push(K);return J}}).call(this)}).call(this,"undefined"!==typeof xe?xe:
"undefined"!==typeof self?self:"undefined"!==typeof window?window:{})},{"object-assign":487,"util/":83}],81:[function(b,N,G){N.exports="function"===typeof Object.create?function(p,n){p.super_=n;p.prototype=Object.create(n.prototype,{constructor:{value:p,enumerable:!1,writable:!0,configurable:!0}})}:function(p,n){p.super_=n;var k=function(){};k.prototype=n.prototype;p.prototype=new k;p.prototype.constructor=p}},{}],82:[function(b,N,G){N.exports=function(p){return p&&"object"===typeof p&&"function"===
typeof p.copy&&"function"===typeof p.fill&&"function"===typeof p.readUInt8}},{}],83:[function(b,N,G){(function(p,n){(function(){function k(M,H){var O={seen:[],stylize:a};3<=arguments.length&&(O.depth=arguments[2]);4<=arguments.length&&(O.colors=arguments[3]);q(H)?O.showHidden=H:H&&G._extend(O,H);x(O.showHidden)&&(O.showHidden=!1);x(O.depth)&&(O.depth=2);x(O.colors)&&(O.colors=!1);x(O.customInspect)&&(O.customInspect=!0);O.colors&&(O.stylize=m);return h(O,M,O.depth)}function m(M,H){return(H=k.styles[H])?
"["+k.colors[H][0]+"m"+M+"["+k.colors[H][1]+"m":M}function a(M,H){return M}function g(M){var H={};M.forEach(function(O,I){H[O]=!0});return H}function h(M,H,O){if(M.customInspect&&H&&C(H.inspect)&&H.inspect!==G.inspect&&(!H.constructor||H.constructor.prototype!==H)){var I=H.inspect(O,M);w(I)||(I=h(M,I,O));return I}if(I=r(M,H))return I;var L=Object.keys(H),Q=g(L);M.showHidden&&(L=Object.getOwnPropertyNames(H));if(D(H)&&(0<=L.indexOf("message")||0<=L.indexOf("description")))return l(H);if(0===L.length){if(C(H))return M.stylize("[Function"+
(H.name?": "+H.name:"")+"]","special");if(z(H))return M.stylize(RegExp.prototype.toString.call(H),"regexp");if(A(H))return M.stylize(Date.prototype.toString.call(H),"date");if(D(H))return l(H)}I="";var Z=!1,ba=["{","}"];f(H)&&(Z=!0,ba=["[","]"]);C(H)&&(I=" [Function"+(H.name?": "+H.name:"")+"]");z(H)&&(I=" "+RegExp.prototype.toString.call(H));A(H)&&(I=" "+Date.prototype.toUTCString.call(H));D(H)&&(I=" "+l(H));if(0===L.length&&(!Z||0==H.length))return ba[0]+I+ba[1];if(0>O)return z(H)?M.stylize(RegExp.prototype.toString.call(H),
"regexp"):M.stylize("[Object]","special");M.seen.push(H);L=Z?c(M,H,O,Q,L):L.map(function(V){return d(M,H,O,Q,V,Z)});M.seen.pop();return e(L,I,ba)}function r(M,H){if(x(H))return M.stylize("undefined","undefined");if(w(H))return H="'"+JSON.stringify(H).replace(/^"|"$/g,"").replace(/'/g,"\\'").replace(/\\"/g,'"')+"'",M.stylize(H,"string");if(t(H))return M.stylize(""+H,"number");if(q(H))return M.stylize(""+H,"boolean");if(null===H)return M.stylize("null","null")}function l(M){return"["+Error.prototype.toString.call(M)+
"]"}function c(M,H,O,I,L){for(var Q=[],Z=0,ba=H.length;Z<ba;++Z)Object.prototype.hasOwnProperty.call(H,String(Z))?Q.push(d(M,H,O,I,String(Z),!0)):Q.push("");L.forEach(function(V){V.match(/^\d+$/)||Q.push(d(M,H,O,I,V,!0))});return Q}function d(M,H,O,I,L,Q){var Z,ba;H=Object.getOwnPropertyDescriptor(H,L)||{value:H[L]};H.get?ba=H.set?M.stylize("[Getter/Setter]","special"):M.stylize("[Getter]","special"):H.set&&(ba=M.stylize("[Setter]","special"));Object.prototype.hasOwnProperty.call(I,L)||(Z="["+L+"]");
ba||(0>M.seen.indexOf(H.value)?(ba=null===O?h(M,H.value,null):h(M,H.value,O-1),-1<ba.indexOf("\n")&&(ba=Q?ba.split("\n").map(function(V){return"  "+V}).join("\n").substr(2):"\n"+ba.split("\n").map(function(V){return"   "+V}).join("\n"))):ba=M.stylize("[Circular]","special"));if(x(Z)){if(Q&&L.match(/^\d+$/))return ba;Z=JSON.stringify(""+L);Z.match(/^"([a-zA-Z_][a-zA-Z_0-9]*)"$/)?(Z=Z.substr(1,Z.length-2),Z=M.stylize(Z,"name")):(Z=Z.replace(/'/g,"\\'").replace(/\\"/g,'"').replace(/(^"|"$)/g,"'"),Z=
M.stylize(Z,"string"))}return Z+": "+ba}function e(M,H,O){var I=0;return 60<M.reduce(function(L,Q){I++;0<=Q.indexOf("\n")&&I++;return L+Q.replace(/\u001b\[\d\d?m/g,"").length+1},0)?O[0]+(""===H?"":H+"\n ")+" "+M.join(",\n  ")+" "+O[1]:O[0]+H+" "+M.join(", ")+" "+O[1]}function f(M){return Array.isArray(M)}function q(M){return"boolean"===typeof M}function t(M){return"number"===typeof M}function w(M){return"string"===typeof M}function x(M){return void 0===M}function z(M){return B(M)&&"[object RegExp]"===
Object.prototype.toString.call(M)}function B(M){return"object"===typeof M&&null!==M}function A(M){return B(M)&&"[object Date]"===Object.prototype.toString.call(M)}function D(M){return B(M)&&("[object Error]"===Object.prototype.toString.call(M)||M instanceof Error)}function C(M){return"function"===typeof M}function v(M){return 10>M?"0"+M.toString(10):M.toString(10)}var y=/%[sdj%]/g;G.format=function(M){if(!w(M)){for(var H=[],O=0;O<arguments.length;O++)H.push(k(arguments[O]));return H.join(" ")}O=1;
var I=arguments,L=I.length;H=String(M).replace(y,function(Z){if("%%"===Z)return"%";if(O>=L)return Z;switch(Z){case "%s":return String(I[O++]);case "%d":return Number(I[O++]);case "%j":try{return JSON.stringify(I[O++])}catch(ba){return"[Circular]"}default:return Z}});for(var Q=I[O];O<L;Q=I[++O])H=null!==Q&&B(Q)?H+(" "+k(Q)):H+(" "+Q);return H};G.deprecate=function(M,H){if(x(n.process))return function(){return G.deprecate(M,H).apply(this,arguments)};if(!0===p.noDeprecation)return M;var O=!1;return function(){if(!O){if(p.throwDeprecation)throw Error(H);
p.traceDeprecation?console.trace(H):console.error(H);O=!0}return M.apply(this,arguments)}};var F={},J;G.debuglog=function(M){x(J)&&(J=p.env.NODE_DEBUG||"");M=M.toUpperCase();if(!F[M])if((new RegExp("\\b"+M+"\\b","i")).test(J)){var H=p.pid;F[M]=function(){var O=G.format.apply(G,arguments);console.error("%s %d: %s",M,H,O)}}else F[M]=function(){};return F[M]};G.inspect=k;k.colors={bold:[1,22],italic:[3,23],underline:[4,24],inverse:[7,27],white:[37,39],grey:[90,39],black:[30,39],blue:[34,39],cyan:[36,
39],green:[32,39],magenta:[35,39],red:[31,39],yellow:[33,39]};k.styles={special:"cyan",number:"yellow","boolean":"yellow",undefined:"grey","null":"bold",string:"green",date:"magenta",regexp:"red"};G.isArray=f;G.isBoolean=q;G.isNull=function(M){return null===M};G.isNullOrUndefined=function(M){return null==M};G.isNumber=t;G.isString=w;G.isSymbol=function(M){return"symbol"===typeof M};G.isUndefined=x;G.isRegExp=z;G.isObject=B;G.isDate=A;G.isError=D;G.isFunction=C;G.isPrimitive=function(M){return null===
M||"boolean"===typeof M||"number"===typeof M||"string"===typeof M||"symbol"===typeof M||"undefined"===typeof M};G.isBuffer=b("./support/isBuffer");var K="Jan Feb Mar Apr May Jun Jul Aug Sep Oct Nov Dec".split(" ");G.log=function(){var M=console,H=M.log;var O=new Date;var I=[v(O.getHours()),v(O.getMinutes()),v(O.getSeconds())].join(":");O=[O.getDate(),K[O.getMonth()],I].join(" ");H.call(M,"%s - %s",O,G.format.apply(G,arguments))};G.inherits=b("inherits");G._extend=function(M,H){if(!H||!B(H))return M;
for(var O=Object.keys(H),I=O.length;I--;)M[O[I]]=H[O[I]];return M}}).call(this)}).call(this,b("_process"),"undefined"!==typeof xe?xe:"undefined"!==typeof self?self:"undefined"!==typeof window?window:{})},{"./support/isBuffer":82,_process:528,inherits:81}],84:[function(b,N,G){N.exports=function(p){return atob(p)}},{}],85:[function(b,N,G){function p(k){for(var m=0,a=0;a<k.length;++a)m+=k[a];return m}N.exports=function(k,m){for(var a=m.length,g=Array(a+1),h=0;h<a;++h){for(var r=Array(a+1),l=0;l<=a;++l)r[l]=
k[l][h];g[h]=r}g[a]=Array(a+1);for(h=0;h<=a;++h)g[a][h]=1;k=Array(a+1);for(h=0;h<a;++h)k[h]=m[h];k[a]=1;m=n(g,k);g=p(m[a+1]);0===g&&(g=1);k=Array(a+1);for(h=0;h<=a;++h)k[h]=p(m[h])/g;return k};var n=b("robust-linear-solve")},{"robust-linear-solve":547}],86:[function(b,N,G){function p(a){var g=a.length;if(0<g%4)throw Error("Invalid string. Length must be a multiple of 4");a=a.indexOf("\x3d");-1===a&&(a=g);return[a,a===g?0:4-a%4]}G.byteLength=function(a){a=p(a);var g=a[1];return 3*(a[0]+g)/4-g};G.toByteArray=
function(a){var g=p(a);var h=g[0];g=g[1];var r=new m(3*(h+g)/4-g),l=0,c=0<g?h-4:h,d;for(d=0;d<c;d+=4)h=k[a.charCodeAt(d)]<<18|k[a.charCodeAt(d+1)]<<12|k[a.charCodeAt(d+2)]<<6|k[a.charCodeAt(d+3)],r[l++]=h>>16&255,r[l++]=h>>8&255,r[l++]=h&255;2===g&&(h=k[a.charCodeAt(d)]<<2|k[a.charCodeAt(d+1)]>>4,r[l++]=h&255);1===g&&(h=k[a.charCodeAt(d)]<<10|k[a.charCodeAt(d+1)]<<4|k[a.charCodeAt(d+2)]>>2,r[l++]=h>>8&255,r[l++]=h&255);return r};G.fromByteArray=function(a){for(var g=a.length,h=g%3,r=[],l=0,c=g-h;l<
c;l+=16383){for(var d=r,e=d.push,f,q=a,t=l+16383>c?c:l+16383,w=[],x=l;x<t;x+=3)f=(q[x]<<16&16711680)+(q[x+1]<<8&65280)+(q[x+2]&255),w.push(n[f>>18&63]+n[f>>12&63]+n[f>>6&63]+n[f&63]);f=w.join("");e.call(d,f)}1===h?(a=a[g-1],r.push(n[a>>2]+n[a<<4&63]+"\x3d\x3d")):2===h&&(a=(a[g-2]<<8)+a[g-1],r.push(n[a>>10]+n[a>>4&63]+n[a<<2&63]+"\x3d"));return r.join("")};var n=[],k=[],m="undefined"!==typeof Uint8Array?Uint8Array:Array;for(b=0;64>b;++b)n[b]="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/"[b],
k["ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/".charCodeAt(b)]=b;k[45]=62;k[95]=63},{}],87:[function(b,N,G){var p=b("./lib/rationalize");N.exports=function(n,k){return p(n[0].mul(k[1]).add(k[0].mul(n[1])),n[1].mul(k[1]))}},{"./lib/rationalize":97}],88:[function(b,N,G){N.exports=function(p,n){return p[0].mul(n[1]).cmp(n[0].mul(p[1]))}},{}],89:[function(b,N,G){var p=b("./lib/rationalize");N.exports=function(n,k){return p(n[0].mul(k[1]),n[1].mul(k[0]))}},{"./lib/rationalize":97}],
90:[function(b,N,G){function p(r,l){if(n(r))return l?h(r,p(l)):[r[0].clone(),r[1].clone()];var c=0;if(k(r))r=r.clone();else if("string"===typeof r)r=a(r);else{if(0===r)return[m(0),m(1)];if(r!==Math.floor(r))for(;r!==Math.floor(r);)r*=Math.pow(2,256),c-=256;r=m(r)}if(n(l))r.mul(l[1]),l=l[0].clone();else if(k(l))l=l.clone();else if("string"===typeof l)l=a(l);else if(l){if(l!==Math.floor(l))for(;l!==Math.floor(l);)l*=Math.pow(2,256),c+=256;l=m(l)}else l=m(1);0<c?r=r.ushln(c):0>c&&(l=l.ushln(-c));return g(r,
l)}var n=b("./is-rat"),k=b("./lib/is-bn"),m=b("./lib/num-to-bn"),a=b("./lib/str-to-bn"),g=b("./lib/rationalize"),h=b("./div");N.exports=p},{"./div":89,"./is-rat":91,"./lib/is-bn":95,"./lib/num-to-bn":96,"./lib/rationalize":97,"./lib/str-to-bn":98}],91:[function(b,N,G){var p=b("./lib/is-bn");N.exports=function(n){return Array.isArray(n)&&2===n.length&&p(n[0])&&p(n[1])}},{"./lib/is-bn":95}],92:[function(b,N,G){var p=b("bn.js");N.exports=function(n){return n.cmp(new p(0))}},{"bn.js":106}],93:[function(b,
N,G){var p=b("./bn-sign");N.exports=function(n){var k=n.length,m=n.words,a=0;if(1===k)a=m[0];else if(2===k)a=m[0]+67108864*m[1];else for(var g=0;g<k;g++)a+=m[g]*Math.pow(67108864,g);return p(n)*a}},{"./bn-sign":92}],94:[function(b,N,G){var p=b("double-bits"),n=b("bit-twiddle").countTrailingZeros;N.exports=function(k){var m=n(p.lo(k));if(32>m)return m;k=n(p.hi(k));return 20<k?52:k+32}},{"bit-twiddle":104,"double-bits":182}],95:[function(b,N,G){b("bn.js");N.exports=function(p){return p&&"object"===
typeof p&&!!p.words}},{"bn.js":106}],96:[function(b,N,G){var p=b("bn.js"),n=b("double-bits");N.exports=function(k){var m=n.exponent(k);return 52>m?new p(k):(new p(k*Math.pow(2,52-m))).ushln(m-52)}},{"bn.js":106,"double-bits":182}],97:[function(b,N,G){var p=b("./num-to-bn"),n=b("./bn-sign");N.exports=function(k,m){var a=n(k),g=n(m);if(0===a)return[p(0),p(1)];if(0===g)return[p(0),p(0)];0>g&&(k=k.neg(),m=m.neg());a=k.gcd(m);return a.cmpn(1)?[k.div(a),m.div(a)]:[k,m]}},{"./bn-sign":92,"./num-to-bn":96}],
98:[function(b,N,G){var p=b("bn.js");N.exports=function(n){return new p(n)}},{"bn.js":106}],99:[function(b,N,G){var p=b("./lib/rationalize");N.exports=function(n,k){return p(n[0].mul(k[0]),n[1].mul(k[1]))}},{"./lib/rationalize":97}],100:[function(b,N,G){var p=b("./lib/bn-sign");N.exports=function(n){return p(n[0])*p(n[1])}},{"./lib/bn-sign":92}],101:[function(b,N,G){var p=b("./lib/rationalize");N.exports=function(n,k){return p(n[0].mul(k[1]).sub(n[1].mul(k[0])),n[1].mul(k[1]))}},{"./lib/rationalize":97}],
102:[function(b,N,G){var p=b("./lib/bn-to-num"),n=b("./lib/ctz");N.exports=function(k){var m=k[0];k=k[1];if(0===m.cmpn(0))return 0;var a=m.abs().divmod(k.abs()),g=p(a.div);a=a.mod;m=m.negative!==k.negative?-1:1;if(0===a.cmpn(0))return m*g;if(g){var h=n(g)+4;k=p(a.ushln(h).divRound(k));return m*(g+k*Math.pow(2,-h))}g=k.bitLength()-a.bitLength()+53;k=p(a.ushln(g).divRound(k));if(1023>g)return m*k*Math.pow(2,-g);k*=Math.pow(2,-1023);return m*k*Math.pow(2,1023-g)}},{"./lib/bn-to-num":93,"./lib/ctz":94}],
103:[function(b,N,G){function p(h,r,l,c,d){for(var e=d+1;c<=d;){var f=c+d>>>1,q=h[f];0<=(void 0!==l?l(q,r):q-r)?(e=f,d=f-1):c=f+1}return e}function n(h,r,l,c,d){for(var e=d+1;c<=d;){var f=c+d>>>1,q=h[f];0<(void 0!==l?l(q,r):q-r)?(e=f,d=f-1):c=f+1}return e}function k(h,r,l,c,d){for(var e=c-1;c<=d;){var f=c+d>>>1,q=h[f];0>(void 0!==l?l(q,r):q-r)?(e=f,c=f+1):d=f-1}return e}function m(h,r,l,c,d){for(var e=c-1;c<=d;){var f=c+d>>>1,q=h[f];0>=(void 0!==l?l(q,r):q-r)?(e=f,c=f+1):d=f-1}return e}function a(h,
r,l,c,d){for(;c<=d;){var e=c+d>>>1,f=h[e];f=void 0!==l?l(f,r):f-r;if(0===f)return e;0>=f?c=e+1:d=e-1}return-1}function g(h,r,l,c,d,e){return"function"===typeof l?e(h,r,l,void 0===c?0:c|0,void 0===d?h.length-1:d|0):e(h,r,void 0,void 0===l?0:l|0,void 0===c?h.length-1:c|0)}N.exports={ge:function(h,r,l,c,d){return g(h,r,l,c,d,p)},gt:function(h,r,l,c,d){return g(h,r,l,c,d,n)},lt:function(h,r,l,c,d){return g(h,r,l,c,d,k)},le:function(h,r,l,c,d){return g(h,r,l,c,d,m)},eq:function(h,r,l,c,d){return g(h,r,
l,c,d,a)}}},{}],104:[function(b,N,G){function p(k){var m=32;(k&=-k)&&m--;k&65535&&(m-=16);k&16711935&&(m-=8);k&252645135&&(m-=4);k&858993459&&(m-=2);k&1431655765&&--m;return m}"use restrict";G.INT_BITS=32;G.INT_MAX=2147483647;G.INT_MIN=-2147483648;G.sign=function(k){return(0<k)-(0>k)};G.abs=function(k){var m=k>>31;return(k^m)-m};G.min=function(k,m){return m^(k^m)&-(k<m)};G.max=function(k,m){return k^(k^m)&-(k<m)};G.isPow2=function(k){return!(k&k-1)&&!!k};G.log2=function(k){var m=(65535<k)<<4;k>>>=
m;var a=(255<k)<<3;k>>>=a;m|=a;a=(15<k)<<2;k>>>=a;m|=a;a=(3<k)<<1;return m|a|k>>>a>>1};G.log10=function(k){return 1E9<=k?9:1E8<=k?8:1E7<=k?7:1E6<=k?6:1E5<=k?5:1E4<=k?4:1E3<=k?3:100<=k?2:10<=k?1:0};G.popCount=function(k){k-=k>>>1&1431655765;k=(k&858993459)+(k>>>2&858993459);return 16843009*(k+(k>>>4)&252645135)>>>24};G.countTrailingZeros=p;G.nextPow2=function(k){k+=0===k;--k;k|=k>>>1;k|=k>>>2;k|=k>>>4;k|=k>>>8;return(k|k>>>16)+1};G.prevPow2=function(k){k|=k>>>1;k|=k>>>2;k|=k>>>4;k|=k>>>8;k|=k>>>16;
return k-(k>>>1)};G.parity=function(k){k^=k>>>16;k^=k>>>8;return 27030>>>((k^k>>>4)&15)&1};var n=Array(256);(function(k){for(var m=0;256>m;++m){var a=m,g=m,h=7;for(a>>>=1;a;a>>>=1)g<<=1,g|=a&1,--h;k[m]=g<<h&255}})(n);G.reverse=function(k){return n[k&255]<<24|n[k>>>8&255]<<16|n[k>>>16&255]<<8|n[k>>>24&255]};G.interleave2=function(k,m){k&=65535;k=(k|k<<8)&16711935;k=(k|k<<4)&252645135;k=(k|k<<2)&858993459;m&=65535;m=(m|m<<8)&16711935;m=(m|m<<4)&252645135;m=(m|m<<2)&858993459;return(k|k<<1)&1431655765|
((m|m<<1)&1431655765)<<1};G.deinterleave2=function(k,m){k=k>>>m&1431655765;k=(k|k>>>1)&858993459;k=(k|k>>>2)&252645135;k=(k|k>>>4)&16711935;return((k|k>>>16)&65535)<<16>>16};G.interleave3=function(k,m,a){k&=1023;k=(k|k<<16)&4278190335;k=(k|k<<8)&251719695;k=(k|k<<4)&3272356035;m&=1023;m=(m|m<<16)&4278190335;m=(m|m<<8)&251719695;m=(m|m<<4)&3272356035;a&=1023;a=(a|a<<16)&4278190335;a=(a|a<<8)&251719695;a=(a|a<<4)&3272356035;return(k|k<<2)&1227133513|((m|m<<2)&1227133513)<<1|((a|a<<2)&1227133513)<<2};
G.deinterleave3=function(k,m){k=k>>>m&1227133513;k=(k|k>>>2)&3272356035;k=(k|k>>>4)&251719695;k=(k|k>>>8)&4278190335;return((k|k>>>16)&1023)<<22>>22};G.nextCombination=function(k){var m=k|k-1;return m+1|(~m&-~m)-1>>>p(k)+1}},{}],105:[function(b,N,G){function p(a,g,h,r,l,c,d){for(var e=0;e<g;e++){for(var f=0;f<h;f++)r[f]=a[f*g+e];n(r,l,c,d,h);for(f=0;f<h;f++)a[f*g+e]=l[f]}for(f=0;f<h;f++){for(e=0;e<g;e++)r[e]=a[f*g+e];n(r,l,c,d,g);for(e=0;e<g;e++)a[f*g+e]=Math.sqrt(l[e])}}function n(a,g,h,r,l){h[0]=
0;r[0]=-m;r[1]=+m;for(var c=1,d=0;c<l;c++){for(var e=(a[c]+c*c-(a[h[d]]+h[d]*h[d]))/(2*c-2*h[d]);e<=r[d];)d--,e=(a[c]+c*c-(a[h[d]]+h[d]*h[d]))/(2*c-2*h[d]);d++;h[d]=c;r[d]=e;r[d+1]=+m}for(d=c=0;c<l;c++){for(;r[d+1]<c;)d++;g[c]=(c-h[d])*(c-h[d])+a[h[d]]}}var k=b("clamp");N.exports=function(a,g){g||(g={});var h=null==g.cutoff?.25:g.cutoff,r=null==g.radius?8:g.radius,l=g.channel||0;if(ArrayBuffer.isView(a)||Array.isArray(a)){if(!g.width||!g.height)throw Error("For raw data width and height should be provided by options");
var c=g.width;var d=g.height;var e=a;var f=g.stride?g.stride:Math.floor(a.length/c/d)}else window.HTMLCanvasElement&&a instanceof window.HTMLCanvasElement?(d=a,e=d.getContext("2d"),c=d.width,d=d.height,e=e.getImageData(0,0,c,d),e=e.data,f=4):window.CanvasRenderingContext2D&&a instanceof window.CanvasRenderingContext2D?(d=a.canvas,c=d.width,d=d.height,e=a.getImageData(0,0,c,d),e=e.data,f=4):window.ImageData&&a instanceof window.ImageData&&(c=a.width,d=a.height,e=a.data,f=4);var q=Math.max(c,d);if(window.Uint8ClampedArray&&
e instanceof window.Uint8ClampedArray||window.Uint8Array&&e instanceof window.Uint8Array){var t=e;e=Array(c*d);a=0;for(g=t.length;a<g;a++)e[a]=t[a*f+l]/255}else if(1!==f)throw Error("Raw data can have only 1 value per pixel");l=Array(c*d);f=Array(c*d);t=Array(q);var w=Array(q),x=Array(q+1);q=Array(q);a=0;for(g=c*d;a<g;a++){var z=e[a];l[a]=1===z?0:0===z?m:Math.pow(Math.max(0,.5-z),2);f[a]=1===z?m:0===z?0:Math.pow(Math.max(0,z-.5),2)}p(l,c,d,t,w,q,x);p(f,c,d,t,w,q,x);e=window.Float32Array?new Float32Array(c*
d):Array(c*d);a=0;for(g=c*d;a<g;a++)e[a]=k(1-((l[a]-f[a])/r+h),0,1);return e};var m=1E20},{clamp:126}],106:[function(b,N,G){(function(p,n){function k(v,y){if(!v)throw Error(y||"Assertion failed");}function m(v,y){v.super_=y;var F=function(){};F.prototype=y.prototype;v.prototype=new F;v.prototype.constructor=v}function a(v,y,F){if(a.isBN(v))return v;this.negative=0;this.words=null;this.length=0;this.red=null;if(null!==v){if("le"===y||"be"===y)F=y,y=10;this._init(v||0,y||10,F||"be")}}function g(v,y,
F){var J=0;for(F=Math.min(v.length,F);y<F;y++){var K=v.charCodeAt(y)-48;J<<=4;J=49<=K&&54>=K?J|K-49+10:17<=K&&22>=K?J|K-17+10:J|K&15}return J}function h(v,y,F,J){var K=0;for(F=Math.min(v.length,F);y<F;y++){var M=v.charCodeAt(y)-48;K*=J;K=49<=M?K+(M-49+10):17<=M?K+(M-17+10):K+M}return K}function r(v,y,F){F.negative=y.negative^v.negative;var J=v.length+y.length|0;F.length=J;J=J-1|0;var K=v.words[0]|0,M=y.words[0]|0;K*=M;var H=K/67108864|0;F.words[0]=K&67108863;for(var O=1;O<J;O++){var I=H>>>26,L=H&
67108863;H=Math.min(O,y.length-1);for(var Q=Math.max(0,O-v.length+1);Q<=H;Q++)K=v.words[O-Q|0]|0,M=y.words[Q]|0,K=K*M+L,I+=K/67108864|0,L=K&67108863;F.words[O]=L|0;H=I|0}0!==H?F.words[O]=H|0:F.length--;return F.strip()}function l(v,y){this.x=v;this.y=y}function c(v,y){this.name=v;this.p=new a(y,16);this.n=this.p.bitLength();this.k=(new a(1)).iushln(this.n).isub(this.p);this.tmp=this._tmp()}function d(){c.call(this,"k256","ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff fffffffe fffffc2f")}function e(){c.call(this,
"p224","ffffffff ffffffff ffffffff ffffffff 00000000 00000000 00000001")}function f(){c.call(this,"p192","ffffffff ffffffff ffffffff fffffffe ffffffff ffffffff")}function q(){c.call(this,"25519","7fffffffffffffff ffffffffffffffff ffffffffffffffff ffffffffffffffed")}function t(v){"string"===typeof v?(v=a._prime(v),this.m=v.p,this.prime=v):(k(v.gtn(1),"modulus must be greater than 1"),this.m=v,this.prime=null)}function w(v){t.call(this,v);this.shift=this.m.bitLength();0!==this.shift%26&&(this.shift+=
26-this.shift%26);this.r=(new a(1)).iushln(this.shift);this.r2=this.imod(this.r.sqr());this.rinv=this.r._invmp(this.m);this.minv=this.rinv.mul(this.r).isubn(1).div(this.m);this.minv=this.minv.umod(this.r);this.minv=this.r.sub(this.minv)}"object"===typeof p?p.exports=a:n.BN=a;a.BN=a;a.wordSize=26;try{var x=b("buffer").Buffer}catch(v){}a.isBN=function(v){return v instanceof a?!0:null!==v&&"object"===typeof v&&v.constructor.wordSize===a.wordSize&&Array.isArray(v.words)};a.max=function(v,y){return 0<
v.cmp(y)?v:y};a.min=function(v,y){return 0>v.cmp(y)?v:y};a.prototype._init=function(v,y,F){if("number"===typeof v)return this._initNumber(v,y,F);if("object"===typeof v)return this._initArray(v,y,F);"hex"===y&&(y=16);k(y===(y|0)&&2<=y&&36>=y);v=v.toString().replace(/\s+/g,"");var J=0;"-"===v[0]&&J++;16===y?this._parseHex(v,J):this._parseBase(v,y,J);"-"===v[0]&&(this.negative=1);this.strip();"le"===F&&this._initArray(this.toArray(),y,F)};a.prototype._initNumber=function(v,y,F){0>v&&(this.negative=1,
v=-v);67108864>v?(this.words=[v&67108863],this.length=1):4503599627370496>v?(this.words=[v&67108863,v/67108864&67108863],this.length=2):(k(9007199254740992>v),this.words=[v&67108863,v/67108864&67108863,1],this.length=3);"le"===F&&this._initArray(this.toArray(),y,F)};a.prototype._initArray=function(v,y,F){k("number"===typeof v.length);if(0>=v.length)return this.words=[0],this.length=1,this;this.length=Math.ceil(v.length/3);this.words=Array(this.length);for(y=0;y<this.length;y++)this.words[y]=0;var J=
0;if("be"===F)for(y=v.length-1,F=0;0<=y;y-=3){var K=v[y]|v[y-1]<<8|v[y-2]<<16;this.words[F]|=K<<J&67108863;this.words[F+1]=K>>>26-J&67108863;J+=24;26<=J&&(J-=26,F++)}else if("le"===F)for(F=y=0;y<v.length;y+=3)K=v[y]|v[y+1]<<8|v[y+2]<<16,this.words[F]|=K<<J&67108863,this.words[F+1]=K>>>26-J&67108863,J+=24,26<=J&&(J-=26,F++);return this.strip()};a.prototype._parseHex=function(v,y){this.length=Math.ceil((v.length-y)/6);this.words=Array(this.length);for(var F=0;F<this.length;F++)this.words[F]=0;var J,
K=0;F=v.length-6;for(J=0;F>=y;F-=6){var M=g(v,F,F+6);this.words[J]|=M<<K&67108863;this.words[J+1]|=M>>>26-K&4194303;K+=24;26<=K&&(K-=26,J++)}F+6!==y&&(M=g(v,y,F+6),this.words[J]|=M<<K&67108863,this.words[J+1]|=M>>>26-K&4194303);this.strip()};a.prototype._parseBase=function(v,y,F){this.words=[0];this.length=1;for(var J=0,K=1;67108863>=K;K*=y)J++;J--;K=K/y|0;var M=v.length-F,H=M%J;M=Math.min(M,M-H)+F;for(var O=F;O<M;O+=J)F=h(v,O,O+J,y),this.imuln(K),67108864>this.words[0]+F?this.words[0]+=F:this._iaddn(F);
if(0!==H){J=1;F=h(v,O,v.length,y);for(O=0;O<H;O++)J*=y;this.imuln(J);67108864>this.words[0]+F?this.words[0]+=F:this._iaddn(F)}};a.prototype.copy=function(v){v.words=Array(this.length);for(var y=0;y<this.length;y++)v.words[y]=this.words[y];v.length=this.length;v.negative=this.negative;v.red=this.red};a.prototype.clone=function(){var v=new a(null);this.copy(v);return v};a.prototype._expand=function(v){for(;this.length<v;)this.words[this.length++]=0;return this};a.prototype.strip=function(){for(;1<this.length&&
0===this.words[this.length-1];)this.length--;return this._normSign()};a.prototype._normSign=function(){1===this.length&&0===this.words[0]&&(this.negative=0);return this};a.prototype.inspect=function(){return(this.red?"\x3cBN-R: ":"\x3cBN: ")+this.toString(16)+"\x3e"};var z=" 0 00 000 0000 00000 000000 0000000 00000000 000000000 0000000000 00000000000 000000000000 0000000000000 00000000000000 000000000000000 0000000000000000 00000000000000000 000000000000000000 0000000000000000000 00000000000000000000 000000000000000000000 0000000000000000000000 00000000000000000000000 000000000000000000000000 0000000000000000000000000".split(" "),
B=[0,0,25,16,12,11,10,9,8,8,7,7,7,7,6,6,6,6,6,6,6,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5],A=[0,0,33554432,43046721,16777216,48828125,60466176,40353607,16777216,43046721,1E7,19487171,35831808,62748517,7529536,11390625,16777216,24137569,34012224,47045881,64E6,4084101,5153632,6436343,7962624,9765625,11881376,14348907,17210368,20511149,243E5,28629151,33554432,39135393,45435424,52521875,60466176];a.prototype.toString=function(v,y){v=v||10;y=y|0||1;if(16===v||"hex"===v){var F="";for(var J=v=0,K=0;K<this.length;K++){var M=
this.words[K],H=((M<<v|J)&16777215).toString(16);J=M>>>24-v&16777215;F=0!==J||K!==this.length-1?z[6-H.length]+H+F:H+F;v+=2;26<=v&&(v-=26,K--)}for(0!==J&&(F=J.toString(16)+F);0!==F.length%y;)F="0"+F;0!==this.negative&&(F="-"+F);return F}if(v===(v|0)&&2<=v&&36>=v){J=B[v];K=A[v];F="";M=this.clone();for(M.negative=0;!M.isZero();)H=M.modn(K).toString(v),M=M.idivn(K),F=M.isZero()?H+F:z[J-H.length]+H+F;for(this.isZero()&&(F="0"+F);0!==F.length%y;)F="0"+F;0!==this.negative&&(F="-"+F);return F}k(!1,"Base should be between 2 and 36")};
a.prototype.toNumber=function(){var v=this.words[0];2===this.length?v+=67108864*this.words[1]:3===this.length&&1===this.words[2]?v+=4503599627370496+67108864*this.words[1]:2<this.length&&k(!1,"Number can only safely store up to 53 bits");return 0!==this.negative?-v:v};a.prototype.toJSON=function(){return this.toString(16)};a.prototype.toBuffer=function(v,y){k("undefined"!==typeof x);return this.toArrayLike(x,v,y)};a.prototype.toArray=function(v,y){return this.toArrayLike(Array,v,y)};a.prototype.toArrayLike=
function(v,y,F){var J=this.byteLength();F=F||Math.max(1,J);k(J<=F,"byte array longer than desired length");k(0<F,"Requested array length \x3c\x3d 0");this.strip();var K="le"===y;v=new v(F);y=this.clone();if(K){for(K=0;!y.isZero();K++)J=y.andln(255),y.iushrn(8),v[K]=J;for(;K<F;K++)v[K]=0}else{for(K=0;K<F-J;K++)v[K]=0;for(K=0;!y.isZero();K++)J=y.andln(255),y.iushrn(8),v[F-K-1]=J}return v};a.prototype._countBits=Math.clz32?function(v){return 32-Math.clz32(v)}:function(v){var y=0;4096<=v&&(y+=13,v>>>=
13);64<=v&&(y+=7,v>>>=7);8<=v&&(y+=4,v>>>=4);2<=v&&(y+=2,v>>>=2);return y+v};a.prototype._zeroBits=function(v){if(0===v)return 26;var y=0;0===(v&8191)&&(y+=13,v>>>=13);0===(v&127)&&(y+=7,v>>>=7);0===(v&15)&&(y+=4,v>>>=4);0===(v&3)&&(y+=2,v>>>=2);0===(v&1)&&y++;return y};a.prototype.bitLength=function(){var v=this._countBits(this.words[this.length-1]);return 26*(this.length-1)+v};a.prototype.zeroBits=function(){if(this.isZero())return 0;for(var v=0,y=0;y<this.length;y++){var F=this._zeroBits(this.words[y]);
v+=F;if(26!==F)break}return v};a.prototype.byteLength=function(){return Math.ceil(this.bitLength()/8)};a.prototype.toTwos=function(v){return 0!==this.negative?this.abs().inotn(v).iaddn(1):this.clone()};a.prototype.fromTwos=function(v){return this.testn(v-1)?this.notn(v).iaddn(1).ineg():this.clone()};a.prototype.isNeg=function(){return 0!==this.negative};a.prototype.neg=function(){return this.clone().ineg()};a.prototype.ineg=function(){this.isZero()||(this.negative^=1);return this};a.prototype.iuor=
function(v){for(;this.length<v.length;)this.words[this.length++]=0;for(var y=0;y<v.length;y++)this.words[y]|=v.words[y];return this.strip()};a.prototype.ior=function(v){k(0===(this.negative|v.negative));return this.iuor(v)};a.prototype.or=function(v){return this.length>v.length?this.clone().ior(v):v.clone().ior(this)};a.prototype.uor=function(v){return this.length>v.length?this.clone().iuor(v):v.clone().iuor(this)};a.prototype.iuand=function(v){var y=this.length>v.length?v:this;for(var F=0;F<y.length;F++)this.words[F]&=
v.words[F];this.length=y.length;return this.strip()};a.prototype.iand=function(v){k(0===(this.negative|v.negative));return this.iuand(v)};a.prototype.and=function(v){return this.length>v.length?this.clone().iand(v):v.clone().iand(this)};a.prototype.uand=function(v){return this.length>v.length?this.clone().iuand(v):v.clone().iuand(this)};a.prototype.iuxor=function(v){if(this.length>v.length)var y=this;else y=v,v=this;for(var F=0;F<v.length;F++)this.words[F]=y.words[F]^v.words[F];if(this!==y)for(;F<
y.length;F++)this.words[F]=y.words[F];this.length=y.length;return this.strip()};a.prototype.ixor=function(v){k(0===(this.negative|v.negative));return this.iuxor(v)};a.prototype.xor=function(v){return this.length>v.length?this.clone().ixor(v):v.clone().ixor(this)};a.prototype.uxor=function(v){return this.length>v.length?this.clone().iuxor(v):v.clone().iuxor(this)};a.prototype.inotn=function(v){k("number"===typeof v&&0<=v);var y=Math.ceil(v/26)|0;v%=26;this._expand(y);0<v&&y--;for(var F=0;F<y;F++)this.words[F]=
~this.words[F]&67108863;0<v&&(this.words[F]=~this.words[F]&67108863>>26-v);return this.strip()};a.prototype.notn=function(v){return this.clone().inotn(v)};a.prototype.setn=function(v,y){k("number"===typeof v&&0<=v);var F=v/26|0;v%=26;this._expand(F+1);this.words[F]=y?this.words[F]|1<<v:this.words[F]&~(1<<v);return this.strip()};a.prototype.iadd=function(v){if(0!==this.negative&&0===v.negative)return this.negative=0,this.isub(v),this.negative^=1,this._normSign();if(0===this.negative&&0!==v.negative){v.negative=
0;var y=this.isub(v);v.negative=1;return y._normSign()}if(this.length>v.length)var F=this;else F=v,v=this;for(var J=y=0;J<v.length;J++)y=(F.words[J]|0)+(v.words[J]|0)+y,this.words[J]=y&67108863,y>>>=26;for(;0!==y&&J<F.length;J++)y=(F.words[J]|0)+y,this.words[J]=y&67108863,y>>>=26;this.length=F.length;if(0!==y)this.words[this.length]=y,this.length++;else if(F!==this)for(;J<F.length;J++)this.words[J]=F.words[J];return this};a.prototype.add=function(v){if(0!==v.negative&&0===this.negative){v.negative=
0;var y=this.sub(v);v.negative^=1;return y}return 0===v.negative&&0!==this.negative?(this.negative=0,y=v.sub(this),this.negative=1,y):this.length>v.length?this.clone().iadd(v):v.clone().iadd(this)};a.prototype.isub=function(v){if(0!==v.negative){v.negative=0;var y=this.iadd(v);v.negative=1;return y._normSign()}if(0!==this.negative)return this.negative=0,this.iadd(v),this.negative=1,this._normSign();y=this.cmp(v);if(0===y)return this.negative=0,this.length=1,this.words[0]=0,this;if(0<y)var F=this;
else F=v,v=this;for(var J=0,K=0;K<v.length;K++)y=(F.words[K]|0)-(v.words[K]|0)+J,J=y>>26,this.words[K]=y&67108863;for(;0!==J&&K<F.length;K++)y=(F.words[K]|0)+J,J=y>>26,this.words[K]=y&67108863;if(0===J&&K<F.length&&F!==this)for(;K<F.length;K++)this.words[K]=F.words[K];this.length=Math.max(this.length,K);F!==this&&(this.negative=1);return this.strip()};a.prototype.sub=function(v){return this.clone().isub(v)};var D=function(v,y,F){var J=v.words,K=y.words,M=F.words,H=0,O=J[0]|0,I=O&8191,L=O>>>13,Q=J[1]|
0;O=Q&8191;var Z=Q>>>13,ba=J[2]|0;Q=ba&8191;var V=ba>>>13,S=J[3]|0;ba=S&8191;var T=S>>>13,fa=J[4]|0;S=fa&8191;var W=fa>>>13,aa=J[5]|0;fa=aa&8191;var ja=aa>>>13,ma=J[6]|0;aa=ma&8191;var ia=ma>>>13,ra=J[7]|0;ma=ra&8191;var wa=ra>>>13,pa=J[8]|0;ra=pa&8191;pa>>>=13;var la=J[9]|0;J=la&8191;la>>>=13;var ka=K[0]|0,na=ka&8191,oa=ka>>>13,sa=K[1]|0;ka=sa&8191;var za=sa>>>13,Ha=K[2]|0;sa=Ha&8191;var Wa=Ha>>>13,Za=K[3]|0;Ha=Za&8191;var bb=Za>>>13,sb=K[4]|0;Za=sb&8191;var hb=sb>>>13,ub=K[5]|0;sb=ub&8191;var pb=
ub>>>13,Ab=K[6]|0;ub=Ab&8191;var tb=Ab>>>13,vb=K[7]|0;Ab=vb&8191;var qb=vb>>>13,zb=K[8]|0;vb=zb&8191;zb>>>=13;var La=K[9]|0;K=La&8191;La>>>=13;F.negative=v.negative^y.negative;F.length=19;var Ka=Math.imul(I,na);v=Math.imul(I,oa);v=v+Math.imul(L,na)|0;y=Math.imul(L,oa);var ya=(H+Ka|0)+((v&8191)<<13)|0;H=(y+(v>>>13)|0)+(ya>>>26)|0;ya&=67108863;Ka=Math.imul(O,na);v=Math.imul(O,oa);v=v+Math.imul(Z,na)|0;y=Math.imul(Z,oa);Ka=Ka+Math.imul(I,ka)|0;v=v+Math.imul(I,za)|0;v=v+Math.imul(L,ka)|0;y=y+Math.imul(L,
za)|0;var Aa=(H+Ka|0)+((v&8191)<<13)|0;H=(y+(v>>>13)|0)+(Aa>>>26)|0;Aa&=67108863;Ka=Math.imul(Q,na);v=Math.imul(Q,oa);v=v+Math.imul(V,na)|0;y=Math.imul(V,oa);Ka=Ka+Math.imul(O,ka)|0;v=v+Math.imul(O,za)|0;v=v+Math.imul(Z,ka)|0;y=y+Math.imul(Z,za)|0;Ka=Ka+Math.imul(I,sa)|0;v=v+Math.imul(I,Wa)|0;v=v+Math.imul(L,sa)|0;y=y+Math.imul(L,Wa)|0;var Ja=(H+Ka|0)+((v&8191)<<13)|0;H=(y+(v>>>13)|0)+(Ja>>>26)|0;Ja&=67108863;Ka=Math.imul(ba,na);v=Math.imul(ba,oa);v=v+Math.imul(T,na)|0;y=Math.imul(T,oa);Ka=Ka+Math.imul(Q,
ka)|0;v=v+Math.imul(Q,za)|0;v=v+Math.imul(V,ka)|0;y=y+Math.imul(V,za)|0;Ka=Ka+Math.imul(O,sa)|0;v=v+Math.imul(O,Wa)|0;v=v+Math.imul(Z,sa)|0;y=y+Math.imul(Z,Wa)|0;Ka=Ka+Math.imul(I,Ha)|0;v=v+Math.imul(I,bb)|0;v=v+Math.imul(L,Ha)|0;y=y+Math.imul(L,bb)|0;var Ta=(H+Ka|0)+((v&8191)<<13)|0;H=(y+(v>>>13)|0)+(Ta>>>26)|0;Ta&=67108863;Ka=Math.imul(S,na);v=Math.imul(S,oa);v=v+Math.imul(W,na)|0;y=Math.imul(W,oa);Ka=Ka+Math.imul(ba,ka)|0;v=v+Math.imul(ba,za)|0;v=v+Math.imul(T,ka)|0;y=y+Math.imul(T,za)|0;Ka=Ka+
Math.imul(Q,sa)|0;v=v+Math.imul(Q,Wa)|0;v=v+Math.imul(V,sa)|0;y=y+Math.imul(V,Wa)|0;Ka=Ka+Math.imul(O,Ha)|0;v=v+Math.imul(O,bb)|0;v=v+Math.imul(Z,Ha)|0;y=y+Math.imul(Z,bb)|0;Ka=Ka+Math.imul(I,Za)|0;v=v+Math.imul(I,hb)|0;v=v+Math.imul(L,Za)|0;y=y+Math.imul(L,hb)|0;var $a=(H+Ka|0)+((v&8191)<<13)|0;H=(y+(v>>>13)|0)+($a>>>26)|0;$a&=67108863;Ka=Math.imul(fa,na);v=Math.imul(fa,oa);v=v+Math.imul(ja,na)|0;y=Math.imul(ja,oa);Ka=Ka+Math.imul(S,ka)|0;v=v+Math.imul(S,za)|0;v=v+Math.imul(W,ka)|0;y=y+Math.imul(W,
za)|0;Ka=Ka+Math.imul(ba,sa)|0;v=v+Math.imul(ba,Wa)|0;v=v+Math.imul(T,sa)|0;y=y+Math.imul(T,Wa)|0;Ka=Ka+Math.imul(Q,Ha)|0;v=v+Math.imul(Q,bb)|0;v=v+Math.imul(V,Ha)|0;y=y+Math.imul(V,bb)|0;Ka=Ka+Math.imul(O,Za)|0;v=v+Math.imul(O,hb)|0;v=v+Math.imul(Z,Za)|0;y=y+Math.imul(Z,hb)|0;Ka=Ka+Math.imul(I,sb)|0;v=v+Math.imul(I,pb)|0;v=v+Math.imul(L,sb)|0;y=y+Math.imul(L,pb)|0;var ab=(H+Ka|0)+((v&8191)<<13)|0;H=(y+(v>>>13)|0)+(ab>>>26)|0;ab&=67108863;Ka=Math.imul(aa,na);v=Math.imul(aa,oa);v=v+Math.imul(ia,na)|
0;y=Math.imul(ia,oa);Ka=Ka+Math.imul(fa,ka)|0;v=v+Math.imul(fa,za)|0;v=v+Math.imul(ja,ka)|0;y=y+Math.imul(ja,za)|0;Ka=Ka+Math.imul(S,sa)|0;v=v+Math.imul(S,Wa)|0;v=v+Math.imul(W,sa)|0;y=y+Math.imul(W,Wa)|0;Ka=Ka+Math.imul(ba,Ha)|0;v=v+Math.imul(ba,bb)|0;v=v+Math.imul(T,Ha)|0;y=y+Math.imul(T,bb)|0;Ka=Ka+Math.imul(Q,Za)|0;v=v+Math.imul(Q,hb)|0;v=v+Math.imul(V,Za)|0;y=y+Math.imul(V,hb)|0;Ka=Ka+Math.imul(O,sb)|0;v=v+Math.imul(O,pb)|0;v=v+Math.imul(Z,sb)|0;y=y+Math.imul(Z,pb)|0;Ka=Ka+Math.imul(I,ub)|0;
v=v+Math.imul(I,tb)|0;v=v+Math.imul(L,ub)|0;y=y+Math.imul(L,tb)|0;var Db=(H+Ka|0)+((v&8191)<<13)|0;H=(y+(v>>>13)|0)+(Db>>>26)|0;Db&=67108863;Ka=Math.imul(ma,na);v=Math.imul(ma,oa);v=v+Math.imul(wa,na)|0;y=Math.imul(wa,oa);Ka=Ka+Math.imul(aa,ka)|0;v=v+Math.imul(aa,za)|0;v=v+Math.imul(ia,ka)|0;y=y+Math.imul(ia,za)|0;Ka=Ka+Math.imul(fa,sa)|0;v=v+Math.imul(fa,Wa)|0;v=v+Math.imul(ja,sa)|0;y=y+Math.imul(ja,Wa)|0;Ka=Ka+Math.imul(S,Ha)|0;v=v+Math.imul(S,bb)|0;v=v+Math.imul(W,Ha)|0;y=y+Math.imul(W,bb)|0;Ka=
Ka+Math.imul(ba,Za)|0;v=v+Math.imul(ba,hb)|0;v=v+Math.imul(T,Za)|0;y=y+Math.imul(T,hb)|0;Ka=Ka+Math.imul(Q,sb)|0;v=v+Math.imul(Q,pb)|0;v=v+Math.imul(V,sb)|0;y=y+Math.imul(V,pb)|0;Ka=Ka+Math.imul(O,ub)|0;v=v+Math.imul(O,tb)|0;v=v+Math.imul(Z,ub)|0;y=y+Math.imul(Z,tb)|0;Ka=Ka+Math.imul(I,Ab)|0;v=v+Math.imul(I,qb)|0;v=v+Math.imul(L,Ab)|0;y=y+Math.imul(L,qb)|0;var Nb=(H+Ka|0)+((v&8191)<<13)|0;H=(y+(v>>>13)|0)+(Nb>>>26)|0;Nb&=67108863;Ka=Math.imul(ra,na);v=Math.imul(ra,oa);v=v+Math.imul(pa,na)|0;y=Math.imul(pa,
oa);Ka=Ka+Math.imul(ma,ka)|0;v=v+Math.imul(ma,za)|0;v=v+Math.imul(wa,ka)|0;y=y+Math.imul(wa,za)|0;Ka=Ka+Math.imul(aa,sa)|0;v=v+Math.imul(aa,Wa)|0;v=v+Math.imul(ia,sa)|0;y=y+Math.imul(ia,Wa)|0;Ka=Ka+Math.imul(fa,Ha)|0;v=v+Math.imul(fa,bb)|0;v=v+Math.imul(ja,Ha)|0;y=y+Math.imul(ja,bb)|0;Ka=Ka+Math.imul(S,Za)|0;v=v+Math.imul(S,hb)|0;v=v+Math.imul(W,Za)|0;y=y+Math.imul(W,hb)|0;Ka=Ka+Math.imul(ba,sb)|0;v=v+Math.imul(ba,pb)|0;v=v+Math.imul(T,sb)|0;y=y+Math.imul(T,pb)|0;Ka=Ka+Math.imul(Q,ub)|0;v=v+Math.imul(Q,
tb)|0;v=v+Math.imul(V,ub)|0;y=y+Math.imul(V,tb)|0;Ka=Ka+Math.imul(O,Ab)|0;v=v+Math.imul(O,qb)|0;v=v+Math.imul(Z,Ab)|0;y=y+Math.imul(Z,qb)|0;Ka=Ka+Math.imul(I,vb)|0;v=v+Math.imul(I,zb)|0;v=v+Math.imul(L,vb)|0;y=y+Math.imul(L,zb)|0;var ec=(H+Ka|0)+((v&8191)<<13)|0;H=(y+(v>>>13)|0)+(ec>>>26)|0;ec&=67108863;Ka=Math.imul(J,na);v=Math.imul(J,oa);v=v+Math.imul(la,na)|0;y=Math.imul(la,oa);Ka=Ka+Math.imul(ra,ka)|0;v=v+Math.imul(ra,za)|0;v=v+Math.imul(pa,ka)|0;y=y+Math.imul(pa,za)|0;Ka=Ka+Math.imul(ma,sa)|
0;v=v+Math.imul(ma,Wa)|0;v=v+Math.imul(wa,sa)|0;y=y+Math.imul(wa,Wa)|0;Ka=Ka+Math.imul(aa,Ha)|0;v=v+Math.imul(aa,bb)|0;v=v+Math.imul(ia,Ha)|0;y=y+Math.imul(ia,bb)|0;Ka=Ka+Math.imul(fa,Za)|0;v=v+Math.imul(fa,hb)|0;v=v+Math.imul(ja,Za)|0;y=y+Math.imul(ja,hb)|0;Ka=Ka+Math.imul(S,sb)|0;v=v+Math.imul(S,pb)|0;v=v+Math.imul(W,sb)|0;y=y+Math.imul(W,pb)|0;Ka=Ka+Math.imul(ba,ub)|0;v=v+Math.imul(ba,tb)|0;v=v+Math.imul(T,ub)|0;y=y+Math.imul(T,tb)|0;Ka=Ka+Math.imul(Q,Ab)|0;v=v+Math.imul(Q,qb)|0;v=v+Math.imul(V,
Ab)|0;y=y+Math.imul(V,qb)|0;Ka=Ka+Math.imul(O,vb)|0;v=v+Math.imul(O,zb)|0;v=v+Math.imul(Z,vb)|0;y=y+Math.imul(Z,zb)|0;Ka=Ka+Math.imul(I,K)|0;v=v+Math.imul(I,La)|0;v=v+Math.imul(L,K)|0;y=y+Math.imul(L,La)|0;I=(H+Ka|0)+((v&8191)<<13)|0;H=(y+(v>>>13)|0)+(I>>>26)|0;I&=67108863;Ka=Math.imul(J,ka);v=Math.imul(J,za);v=v+Math.imul(la,ka)|0;y=Math.imul(la,za);Ka=Ka+Math.imul(ra,sa)|0;v=v+Math.imul(ra,Wa)|0;v=v+Math.imul(pa,sa)|0;y=y+Math.imul(pa,Wa)|0;Ka=Ka+Math.imul(ma,Ha)|0;v=v+Math.imul(ma,bb)|0;v=v+Math.imul(wa,
Ha)|0;y=y+Math.imul(wa,bb)|0;Ka=Ka+Math.imul(aa,Za)|0;v=v+Math.imul(aa,hb)|0;v=v+Math.imul(ia,Za)|0;y=y+Math.imul(ia,hb)|0;Ka=Ka+Math.imul(fa,sb)|0;v=v+Math.imul(fa,pb)|0;v=v+Math.imul(ja,sb)|0;y=y+Math.imul(ja,pb)|0;Ka=Ka+Math.imul(S,ub)|0;v=v+Math.imul(S,tb)|0;v=v+Math.imul(W,ub)|0;y=y+Math.imul(W,tb)|0;Ka=Ka+Math.imul(ba,Ab)|0;v=v+Math.imul(ba,qb)|0;v=v+Math.imul(T,Ab)|0;y=y+Math.imul(T,qb)|0;Ka=Ka+Math.imul(Q,vb)|0;v=v+Math.imul(Q,zb)|0;v=v+Math.imul(V,vb)|0;y=y+Math.imul(V,zb)|0;Ka=Ka+Math.imul(O,
K)|0;v=v+Math.imul(O,La)|0;v=v+Math.imul(Z,K)|0;y=y+Math.imul(Z,La)|0;O=(H+Ka|0)+((v&8191)<<13)|0;H=(y+(v>>>13)|0)+(O>>>26)|0;O&=67108863;Ka=Math.imul(J,sa);v=Math.imul(J,Wa);v=v+Math.imul(la,sa)|0;y=Math.imul(la,Wa);Ka=Ka+Math.imul(ra,Ha)|0;v=v+Math.imul(ra,bb)|0;v=v+Math.imul(pa,Ha)|0;y=y+Math.imul(pa,bb)|0;Ka=Ka+Math.imul(ma,Za)|0;v=v+Math.imul(ma,hb)|0;v=v+Math.imul(wa,Za)|0;y=y+Math.imul(wa,hb)|0;Ka=Ka+Math.imul(aa,sb)|0;v=v+Math.imul(aa,pb)|0;v=v+Math.imul(ia,sb)|0;y=y+Math.imul(ia,pb)|0;Ka=
Ka+Math.imul(fa,ub)|0;v=v+Math.imul(fa,tb)|0;v=v+Math.imul(ja,ub)|0;y=y+Math.imul(ja,tb)|0;Ka=Ka+Math.imul(S,Ab)|0;v=v+Math.imul(S,qb)|0;v=v+Math.imul(W,Ab)|0;y=y+Math.imul(W,qb)|0;Ka=Ka+Math.imul(ba,vb)|0;v=v+Math.imul(ba,zb)|0;v=v+Math.imul(T,vb)|0;y=y+Math.imul(T,zb)|0;Ka=Ka+Math.imul(Q,K)|0;v=v+Math.imul(Q,La)|0;v=v+Math.imul(V,K)|0;y=y+Math.imul(V,La)|0;Q=(H+Ka|0)+((v&8191)<<13)|0;H=(y+(v>>>13)|0)+(Q>>>26)|0;Q&=67108863;Ka=Math.imul(J,Ha);v=Math.imul(J,bb);v=v+Math.imul(la,Ha)|0;y=Math.imul(la,
bb);Ka=Ka+Math.imul(ra,Za)|0;v=v+Math.imul(ra,hb)|0;v=v+Math.imul(pa,Za)|0;y=y+Math.imul(pa,hb)|0;Ka=Ka+Math.imul(ma,sb)|0;v=v+Math.imul(ma,pb)|0;v=v+Math.imul(wa,sb)|0;y=y+Math.imul(wa,pb)|0;Ka=Ka+Math.imul(aa,ub)|0;v=v+Math.imul(aa,tb)|0;v=v+Math.imul(ia,ub)|0;y=y+Math.imul(ia,tb)|0;Ka=Ka+Math.imul(fa,Ab)|0;v=v+Math.imul(fa,qb)|0;v=v+Math.imul(ja,Ab)|0;y=y+Math.imul(ja,qb)|0;Ka=Ka+Math.imul(S,vb)|0;v=v+Math.imul(S,zb)|0;v=v+Math.imul(W,vb)|0;y=y+Math.imul(W,zb)|0;Ka=Ka+Math.imul(ba,K)|0;v=v+Math.imul(ba,
La)|0;v=v+Math.imul(T,K)|0;y=y+Math.imul(T,La)|0;ba=(H+Ka|0)+((v&8191)<<13)|0;H=(y+(v>>>13)|0)+(ba>>>26)|0;ba&=67108863;Ka=Math.imul(J,Za);v=Math.imul(J,hb);v=v+Math.imul(la,Za)|0;y=Math.imul(la,hb);Ka=Ka+Math.imul(ra,sb)|0;v=v+Math.imul(ra,pb)|0;v=v+Math.imul(pa,sb)|0;y=y+Math.imul(pa,pb)|0;Ka=Ka+Math.imul(ma,ub)|0;v=v+Math.imul(ma,tb)|0;v=v+Math.imul(wa,ub)|0;y=y+Math.imul(wa,tb)|0;Ka=Ka+Math.imul(aa,Ab)|0;v=v+Math.imul(aa,qb)|0;v=v+Math.imul(ia,Ab)|0;y=y+Math.imul(ia,qb)|0;Ka=Ka+Math.imul(fa,vb)|
0;v=v+Math.imul(fa,zb)|0;v=v+Math.imul(ja,vb)|0;y=y+Math.imul(ja,zb)|0;Ka=Ka+Math.imul(S,K)|0;v=v+Math.imul(S,La)|0;v=v+Math.imul(W,K)|0;y=y+Math.imul(W,La)|0;S=(H+Ka|0)+((v&8191)<<13)|0;H=(y+(v>>>13)|0)+(S>>>26)|0;S&=67108863;Ka=Math.imul(J,sb);v=Math.imul(J,pb);v=v+Math.imul(la,sb)|0;y=Math.imul(la,pb);Ka=Ka+Math.imul(ra,ub)|0;v=v+Math.imul(ra,tb)|0;v=v+Math.imul(pa,ub)|0;y=y+Math.imul(pa,tb)|0;Ka=Ka+Math.imul(ma,Ab)|0;v=v+Math.imul(ma,qb)|0;v=v+Math.imul(wa,Ab)|0;y=y+Math.imul(wa,qb)|0;Ka=Ka+Math.imul(aa,
vb)|0;v=v+Math.imul(aa,zb)|0;v=v+Math.imul(ia,vb)|0;y=y+Math.imul(ia,zb)|0;Ka=Ka+Math.imul(fa,K)|0;v=v+Math.imul(fa,La)|0;v=v+Math.imul(ja,K)|0;y=y+Math.imul(ja,La)|0;fa=(H+Ka|0)+((v&8191)<<13)|0;H=(y+(v>>>13)|0)+(fa>>>26)|0;fa&=67108863;Ka=Math.imul(J,ub);v=Math.imul(J,tb);v=v+Math.imul(la,ub)|0;y=Math.imul(la,tb);Ka=Ka+Math.imul(ra,Ab)|0;v=v+Math.imul(ra,qb)|0;v=v+Math.imul(pa,Ab)|0;y=y+Math.imul(pa,qb)|0;Ka=Ka+Math.imul(ma,vb)|0;v=v+Math.imul(ma,zb)|0;v=v+Math.imul(wa,vb)|0;y=y+Math.imul(wa,zb)|
0;Ka=Ka+Math.imul(aa,K)|0;v=v+Math.imul(aa,La)|0;v=v+Math.imul(ia,K)|0;y=y+Math.imul(ia,La)|0;aa=(H+Ka|0)+((v&8191)<<13)|0;H=(y+(v>>>13)|0)+(aa>>>26)|0;aa&=67108863;Ka=Math.imul(J,Ab);v=Math.imul(J,qb);v=v+Math.imul(la,Ab)|0;y=Math.imul(la,qb);Ka=Ka+Math.imul(ra,vb)|0;v=v+Math.imul(ra,zb)|0;v=v+Math.imul(pa,vb)|0;y=y+Math.imul(pa,zb)|0;Ka=Ka+Math.imul(ma,K)|0;v=v+Math.imul(ma,La)|0;v=v+Math.imul(wa,K)|0;y=y+Math.imul(wa,La)|0;ma=(H+Ka|0)+((v&8191)<<13)|0;H=(y+(v>>>13)|0)+(ma>>>26)|0;ma&=67108863;
Ka=Math.imul(J,vb);v=Math.imul(J,zb);v=v+Math.imul(la,vb)|0;y=Math.imul(la,zb);Ka=Ka+Math.imul(ra,K)|0;v=v+Math.imul(ra,La)|0;v=v+Math.imul(pa,K)|0;y=y+Math.imul(pa,La)|0;ra=(H+Ka|0)+((v&8191)<<13)|0;H=(y+(v>>>13)|0)+(ra>>>26)|0;ra&=67108863;Ka=Math.imul(J,K);v=Math.imul(J,La);v=v+Math.imul(la,K)|0;y=Math.imul(la,La);L=(H+Ka|0)+((v&8191)<<13)|0;H=(y+(v>>>13)|0)+(L>>>26)|0;M[0]=ya;M[1]=Aa;M[2]=Ja;M[3]=Ta;M[4]=$a;M[5]=ab;M[6]=Db;M[7]=Nb;M[8]=ec;M[9]=I;M[10]=O;M[11]=Q;M[12]=ba;M[13]=S;M[14]=fa;M[15]=
aa;M[16]=ma;M[17]=ra;M[18]=L&67108863;0!==H&&(M[19]=H,F.length++);return F};Math.imul||(D=r);a.prototype.mulTo=function(v,y){var F=this.length+v.length;if(10===this.length&&10===v.length)v=D(this,v,y);else if(63>F)v=r(this,v,y);else if(1024>F){y.negative=v.negative^this.negative;y.length=this.length+v.length;for(var J=0,K=F=0;K<y.length-1;K++){var M=F;F=0;J&=67108863;for(var H=Math.min(K,v.length-1),O=Math.max(0,K-this.length+1);O<=H;O++){var I=(this.words[K-O]|0)*(v.words[O]|0),L=I&67108863;M=M+
(I/67108864|0)|0;L=L+J|0;J=L&67108863;M=M+(L>>>26)|0;F+=M>>>26;M&=67108863}y.words[K]=J;J=M}0!==J?y.words[K]=J:y.length--;v=y.strip()}else v=(new l).mulp(this,v,y);return v};l.prototype.makeRBT=function(v){for(var y=Array(v),F=a.prototype._countBits(v)-1,J=0;J<v;J++)y[J]=this.revBin(J,F,v);return y};l.prototype.revBin=function(v,y,F){if(0===v||v===F-1)return v;for(var J=F=0;J<y;J++)F|=(v&1)<<y-J-1,v>>=1;return F};l.prototype.permute=function(v,y,F,J,K,M){for(var H=0;H<M;H++)J[H]=y[v[H]],K[H]=F[v[H]]};
l.prototype.transform=function(v,y,F,J,K,M){this.permute(M,v,y,F,J,K);for(v=1;v<K;v<<=1){y=v<<1;M=Math.cos(2*Math.PI/y);for(var H=Math.sin(2*Math.PI/y),O=0;O<K;O+=y)for(var I=M,L=H,Q=0;Q<v;Q++){var Z=F[O+Q],ba=J[O+Q],V=F[O+Q+v],S=J[O+Q+v],T=I*V-L*S;S=I*S+L*V;V=T;F[O+Q]=Z+V;J[O+Q]=ba+S;F[O+Q+v]=Z-V;J[O+Q+v]=ba-S;Q!==y&&(T=M*I-H*L,L=M*L+H*I,I=T)}}};l.prototype.guessLen13b=function(v,y){v=Math.max(y,v)|1;y=v&1;var F=0;for(v=v/2|0;v;v>>>=1)F++;return 1<<F+1+y};l.prototype.conjugate=function(v,y,F){if(!(1>=
F))for(var J=0;J<F/2;J++){var K=v[J];v[J]=v[F-J-1];v[F-J-1]=K;K=y[J];y[J]=-y[F-J-1];y[F-J-1]=-K}};l.prototype.normalize13b=function(v,y){for(var F=0,J=0;J<y/2;J++)F=8192*Math.round(v[2*J+1]/y)+Math.round(v[2*J]/y)+F,v[J]=F&67108863,F=67108864>F?0:F/67108864|0;return v};l.prototype.convert13b=function(v,y,F,J){for(var K=0,M=0;M<y;M++)K+=v[M]|0,F[2*M]=K&8191,K>>>=13,F[2*M+1]=K&8191,K>>>=13;for(M=2*y;M<J;++M)F[M]=0;k(0===K);k(0===(K&-8192))};l.prototype.stub=function(v){for(var y=Array(v),F=0;F<v;F++)y[F]=
0;return y};l.prototype.mulp=function(v,y,F){var J=2*this.guessLen13b(v.length,y.length),K=this.makeRBT(J),M=this.stub(J),H=Array(J),O=Array(J),I=Array(J),L=Array(J),Q=Array(J),Z=Array(J),ba=F.words;ba.length=J;this.convert13b(v.words,v.length,H,J);this.convert13b(y.words,y.length,L,J);this.transform(H,M,O,I,J,K);this.transform(L,M,Q,Z,J,K);for(H=0;H<J;H++)L=O[H]*Q[H]-I[H]*Z[H],I[H]=O[H]*Z[H]+I[H]*Q[H],O[H]=L;this.conjugate(O,I,J);this.transform(O,I,ba,M,J,K);this.conjugate(ba,M,J);this.normalize13b(ba,
J);F.negative=v.negative^y.negative;F.length=v.length+y.length;return F.strip()};a.prototype.mul=function(v){var y=new a(null);y.words=Array(this.length+v.length);return this.mulTo(v,y)};a.prototype.mulf=function(v){var y=new a(null);y.words=Array(this.length+v.length);return(new l).mulp(this,v,y)};a.prototype.imul=function(v){return this.clone().mulTo(v,this)};a.prototype.imuln=function(v){k("number"===typeof v);k(67108864>v);for(var y=0,F=0;F<this.length;F++){var J=(this.words[F]|0)*v,K=(J&67108863)+
(y&67108863);y>>=26;y+=J/67108864|0;y+=K>>>26;this.words[F]=K&67108863}0!==y&&(this.words[F]=y,this.length++);return this};a.prototype.muln=function(v){return this.clone().imuln(v)};a.prototype.sqr=function(){return this.mul(this)};a.prototype.isqr=function(){return this.imul(this.clone())};a.prototype.pow=function(v){for(var y=Array(v.bitLength()),F=0;F<y.length;F++){var J=F%26;y[F]=(v.words[F/26|0]&1<<J)>>>J}if(0===y.length)return new a(1);v=this;for(F=0;F<y.length&&0===y[F];F++,v=v.sqr());if(++F<
y.length)for(J=v.sqr();F<y.length;F++,J=J.sqr())0!==y[F]&&(v=v.mul(J));return v};a.prototype.iushln=function(v){k("number"===typeof v&&0<=v);var y=v%26;v=(v-y)/26;var F=67108863>>>26-y<<26-y,J;if(0!==y){var K=0;for(J=0;J<this.length;J++){var M=this.words[J]&F;this.words[J]=(this.words[J]|0)-M<<y|K;K=M>>>26-y}K&&(this.words[J]=K,this.length++)}if(0!==v){for(J=this.length-1;0<=J;J--)this.words[J+v]=this.words[J];for(J=0;J<v;J++)this.words[J]=0;this.length+=v}return this.strip()};a.prototype.ishln=function(v){k(0===
this.negative);return this.iushln(v)};a.prototype.iushrn=function(v,y,F){k("number"===typeof v&&0<=v);var J=v%26,K=Math.min((v-J)/26,this.length);v=67108863^67108863>>>J<<J;y=Math.max(0,(y?(y-y%26)/26:0)-K);if(F){for(var M=0;M<K;M++)F.words[M]=this.words[M];F.length=K}if(0!==K)if(this.length>K)for(this.length-=K,M=0;M<this.length;M++)this.words[M]=this.words[M+K];else this.words[0]=0,this.length=1;K=0;for(M=this.length-1;0<=M&&(0!==K||M>=y);M--){var H=this.words[M]|0;this.words[M]=K<<26-J|H>>>J;K=
H&v}F&&0!==K&&(F.words[F.length++]=K);0===this.length&&(this.words[0]=0,this.length=1);return this.strip()};a.prototype.ishrn=function(v,y,F){k(0===this.negative);return this.iushrn(v,y,F)};a.prototype.shln=function(v){return this.clone().ishln(v)};a.prototype.ushln=function(v){return this.clone().iushln(v)};a.prototype.shrn=function(v){return this.clone().ishrn(v)};a.prototype.ushrn=function(v){return this.clone().iushrn(v)};a.prototype.testn=function(v){k("number"===typeof v&&0<=v);var y=v%26;v=
(v-y)/26;return this.length<=v?!1:!!(this.words[v]&1<<y)};a.prototype.imaskn=function(v){k("number"===typeof v&&0<=v);var y=v%26;v=(v-y)/26;k(0===this.negative,"imaskn works only with positive numbers");if(this.length<=v)return this;0!==y&&v++;this.length=Math.min(v,this.length);0!==y&&(this.words[this.length-1]&=67108863^67108863>>>y<<y);return this.strip()};a.prototype.maskn=function(v){return this.clone().imaskn(v)};a.prototype.iaddn=function(v){k("number"===typeof v);k(67108864>v);if(0>v)return this.isubn(-v);
if(0!==this.negative){if(1===this.length&&(this.words[0]|0)<v)return this.words[0]=v-(this.words[0]|0),this.negative=0,this;this.negative=0;this.isubn(v);this.negative=1;return this}return this._iaddn(v)};a.prototype._iaddn=function(v){this.words[0]+=v;for(v=0;v<this.length&&67108864<=this.words[v];v++)this.words[v]-=67108864,v===this.length-1?this.words[v+1]=1:this.words[v+1]++;this.length=Math.max(this.length,v+1);return this};a.prototype.isubn=function(v){k("number"===typeof v);k(67108864>v);if(0>
v)return this.iaddn(-v);if(0!==this.negative)return this.negative=0,this.iaddn(v),this.negative=1,this;this.words[0]-=v;if(1===this.length&&0>this.words[0])this.words[0]=-this.words[0],this.negative=1;else for(v=0;v<this.length&&0>this.words[v];v++)this.words[v]+=67108864,--this.words[v+1];return this.strip()};a.prototype.addn=function(v){return this.clone().iaddn(v)};a.prototype.subn=function(v){return this.clone().isubn(v)};a.prototype.iabs=function(){this.negative=0;return this};a.prototype.abs=
function(){return this.clone().iabs()};a.prototype._ishlnsubmul=function(v,y,F){var J;this._expand(v.length+F);var K=0;for(J=0;J<v.length;J++){var M=(this.words[J+F]|0)+K;K=(v.words[J]|0)*y;M-=K&67108863;K=(M>>26)-(K/67108864|0);this.words[J+F]=M&67108863}for(;J<this.length-F;J++)M=(this.words[J+F]|0)+K,K=M>>26,this.words[J+F]=M&67108863;if(0===K)return this.strip();k(-1===K);for(J=K=0;J<this.length;J++)M=-(this.words[J]|0)+K,K=M>>26,this.words[J]=M&67108863;this.negative=1;return this.strip()};a.prototype._wordDiv=
function(v,y){var F=this.clone(),J=v,K=J.words[J.length-1]|0;v=26-this._countBits(K);0!==v&&(J=J.ushln(v),F.iushln(v),K=J.words[J.length-1]|0);var M=F.length-J.length;if("mod"!==y){var H=new a(null);H.length=M+1;H.words=Array(H.length);for(var O=0;O<H.length;O++)H.words[O]=0}O=F.clone()._ishlnsubmul(J,1,M);0===O.negative&&(F=O,H&&(H.words[M]=1));for(--M;0<=M;M--){O=67108864*(F.words[J.length+M]|0)+(F.words[J.length+M-1]|0);O=Math.min(O/K|0,67108863);for(F._ishlnsubmul(J,O,M);0!==F.negative;)O--,F.negative=
0,F._ishlnsubmul(J,1,M),F.isZero()||(F.negative^=1);H&&(H.words[M]=O)}H&&H.strip();F.strip();"div"!==y&&0!==v&&F.iushrn(v);return{div:H||null,mod:F}};a.prototype.divmod=function(v,y,F){k(!v.isZero());if(this.isZero())return{div:new a(0),mod:new a(0)};var J;if(0!==this.negative&&0===v.negative){var K=this.neg().divmod(v,y);"mod"!==y&&(J=K.div.neg());if("div"!==y){var M=K.mod.neg();F&&0!==M.negative&&M.iadd(v)}return{div:J,mod:M}}return 0===this.negative&&0!==v.negative?(K=this.divmod(v.neg(),y),"mod"!==
y&&(J=K.div.neg()),{div:J,mod:K.mod}):0!==(this.negative&v.negative)?(K=this.neg().divmod(v.neg(),y),"div"!==y&&(M=K.mod.neg(),F&&0!==M.negative&&M.isub(v)),{div:K.div,mod:M}):v.length>this.length||0>this.cmp(v)?{div:new a(0),mod:this}:1===v.length?"div"===y?{div:this.divn(v.words[0]),mod:null}:"mod"===y?{div:null,mod:new a(this.modn(v.words[0]))}:{div:this.divn(v.words[0]),mod:new a(this.modn(v.words[0]))}:this._wordDiv(v,y)};a.prototype.div=function(v){return this.divmod(v,"div",!1).div};a.prototype.mod=
function(v){return this.divmod(v,"mod",!1).mod};a.prototype.umod=function(v){return this.divmod(v,"mod",!0).mod};a.prototype.divRound=function(v){var y=this.divmod(v);if(y.mod.isZero())return y.div;var F=0!==y.div.negative?y.mod.isub(v):y.mod,J=v.ushrn(1);v=v.andln(1);F=F.cmp(J);return 0>F||1===v&&0===F?y.div:0!==y.div.negative?y.div.isubn(1):y.div.iaddn(1)};a.prototype.modn=function(v){k(67108863>=v);for(var y=67108864%v,F=0,J=this.length-1;0<=J;J--)F=(y*F+(this.words[J]|0))%v;return F};a.prototype.idivn=
function(v){k(67108863>=v);for(var y=0,F=this.length-1;0<=F;F--)y=(this.words[F]|0)+67108864*y,this.words[F]=y/v|0,y%=v;return this.strip()};a.prototype.divn=function(v){return this.clone().idivn(v)};a.prototype.egcd=function(v){k(0===v.negative);k(!v.isZero());var y=this,F=v.clone();y=0!==y.negative?y.umod(v):y.clone();v=new a(1);for(var J=new a(0),K=new a(0),M=new a(1),H=0;y.isEven()&&F.isEven();)y.iushrn(1),F.iushrn(1),++H;for(var O=F.clone(),I=y.clone();!y.isZero();){for(var L=0,Q=1;0===(y.words[0]&
Q)&&26>L;++L,Q<<=1);if(0<L)for(y.iushrn(L);0<L--;){if(v.isOdd()||J.isOdd())v.iadd(O),J.isub(I);v.iushrn(1);J.iushrn(1)}L=0;for(Q=1;0===(F.words[0]&Q)&&26>L;++L,Q<<=1);if(0<L)for(F.iushrn(L);0<L--;){if(K.isOdd()||M.isOdd())K.iadd(O),M.isub(I);K.iushrn(1);M.iushrn(1)}0<=y.cmp(F)?(y.isub(F),v.isub(K),J.isub(M)):(F.isub(y),K.isub(v),M.isub(J))}return{a:K,b:M,gcd:F.iushln(H)}};a.prototype._invmp=function(v){k(0===v.negative);k(!v.isZero());var y=this,F=v.clone();y=0!==y.negative?y.umod(v):y.clone();for(var J=
new a(1),K=new a(0),M=F.clone();0<y.cmpn(1)&&0<F.cmpn(1);){for(var H=0,O=1;0===(y.words[0]&O)&&26>H;++H,O<<=1);if(0<H)for(y.iushrn(H);0<H--;)J.isOdd()&&J.iadd(M),J.iushrn(1);H=0;for(O=1;0===(F.words[0]&O)&&26>H;++H,O<<=1);if(0<H)for(F.iushrn(H);0<H--;)K.isOdd()&&K.iadd(M),K.iushrn(1);0<=y.cmp(F)?(y.isub(F),J.isub(K)):(F.isub(y),K.isub(J))}y=0===y.cmpn(1)?J:K;0>y.cmpn(0)&&y.iadd(v);return y};a.prototype.gcd=function(v){if(this.isZero())return v.abs();if(v.isZero())return this.abs();var y=this.clone();
v=v.clone();y.negative=0;for(var F=v.negative=0;y.isEven()&&v.isEven();F++)y.iushrn(1),v.iushrn(1);do{for(;y.isEven();)y.iushrn(1);for(;v.isEven();)v.iushrn(1);var J=y.cmp(v);if(0>J)J=y,y=v,v=J;else if(0===J||0===v.cmpn(1))break;y.isub(v)}while(1);return v.iushln(F)};a.prototype.invm=function(v){return this.egcd(v).a.umod(v)};a.prototype.isEven=function(){return 0===(this.words[0]&1)};a.prototype.isOdd=function(){return 1===(this.words[0]&1)};a.prototype.andln=function(v){return this.words[0]&v};
a.prototype.bincn=function(v){k("number"===typeof v);var y=v%26;v=(v-y)/26;y=1<<y;if(this.length<=v)return this._expand(v+1),this.words[v]|=y,this;for(;0!==y&&v<this.length;v++){var F=this.words[v]|0;F+=y;y=F>>>26;F&=67108863;this.words[v]=F}0!==y&&(this.words[v]=y,this.length++);return this};a.prototype.isZero=function(){return 1===this.length&&0===this.words[0]};a.prototype.cmpn=function(v){var y=0>v;if(0!==this.negative&&!y)return-1;if(0===this.negative&&y)return 1;this.strip();1<this.length?v=
1:(y&&(v=-v),k(67108863>=v,"Number is too big"),y=this.words[0]|0,v=y===v?0:y<v?-1:1);return 0!==this.negative?-v|0:v};a.prototype.cmp=function(v){if(0!==this.negative&&0===v.negative)return-1;if(0===this.negative&&0!==v.negative)return 1;v=this.ucmp(v);return 0!==this.negative?-v|0:v};a.prototype.ucmp=function(v){if(this.length>v.length)return 1;if(this.length<v.length)return-1;for(var y=0,F=this.length-1;0<=F;F--){var J=this.words[F]|0,K=v.words[F]|0;if(J!==K){J<K?y=-1:J>K&&(y=1);break}}return y};
a.prototype.gtn=function(v){return 1===this.cmpn(v)};a.prototype.gt=function(v){return 1===this.cmp(v)};a.prototype.gten=function(v){return 0<=this.cmpn(v)};a.prototype.gte=function(v){return 0<=this.cmp(v)};a.prototype.ltn=function(v){return-1===this.cmpn(v)};a.prototype.lt=function(v){return-1===this.cmp(v)};a.prototype.lten=function(v){return 0>=this.cmpn(v)};a.prototype.lte=function(v){return 0>=this.cmp(v)};a.prototype.eqn=function(v){return 0===this.cmpn(v)};a.prototype.eq=function(v){return 0===
this.cmp(v)};a.red=function(v){return new t(v)};a.prototype.toRed=function(v){k(!this.red,"Already a number in reduction context");k(0===this.negative,"red works only with positives");return v.convertTo(this)._forceRed(v)};a.prototype.fromRed=function(){k(this.red,"fromRed works only with numbers in reduction context");return this.red.convertFrom(this)};a.prototype._forceRed=function(v){this.red=v;return this};a.prototype.forceRed=function(v){k(!this.red,"Already a number in reduction context");return this._forceRed(v)};
a.prototype.redAdd=function(v){k(this.red,"redAdd works only with red numbers");return this.red.add(this,v)};a.prototype.redIAdd=function(v){k(this.red,"redIAdd works only with red numbers");return this.red.iadd(this,v)};a.prototype.redSub=function(v){k(this.red,"redSub works only with red numbers");return this.red.sub(this,v)};a.prototype.redISub=function(v){k(this.red,"redISub works only with red numbers");return this.red.isub(this,v)};a.prototype.redShl=function(v){k(this.red,"redShl works only with red numbers");
return this.red.shl(this,v)};a.prototype.redMul=function(v){k(this.red,"redMul works only with red numbers");this.red._verify2(this,v);return this.red.mul(this,v)};a.prototype.redIMul=function(v){k(this.red,"redMul works only with red numbers");this.red._verify2(this,v);return this.red.imul(this,v)};a.prototype.redSqr=function(){k(this.red,"redSqr works only with red numbers");this.red._verify1(this);return this.red.sqr(this)};a.prototype.redISqr=function(){k(this.red,"redISqr works only with red numbers");
this.red._verify1(this);return this.red.isqr(this)};a.prototype.redSqrt=function(){k(this.red,"redSqrt works only with red numbers");this.red._verify1(this);return this.red.sqrt(this)};a.prototype.redInvm=function(){k(this.red,"redInvm works only with red numbers");this.red._verify1(this);return this.red.invm(this)};a.prototype.redNeg=function(){k(this.red,"redNeg works only with red numbers");this.red._verify1(this);return this.red.neg(this)};a.prototype.redPow=function(v){k(this.red&&!v.red,"redPow(normalNum)");
this.red._verify1(this);return this.red.pow(this,v)};var C={k256:null,p224:null,p192:null,p25519:null};c.prototype._tmp=function(){var v=new a(null);v.words=Array(Math.ceil(this.n/13));return v};c.prototype.ireduce=function(v){do{this.split(v,this.tmp);v=this.imulK(v);v=v.iadd(this.tmp);var y=v.bitLength()}while(y>this.n);y=y<this.n?-1:v.ucmp(this.p);0===y?(v.words[0]=0,v.length=1):0<y?v.isub(this.p):v.strip();return v};c.prototype.split=function(v,y){v.iushrn(this.n,0,y)};c.prototype.imulK=function(v){return v.imul(this.k)};
m(d,c);d.prototype.split=function(v,y){for(var F=Math.min(v.length,9),J=0;J<F;J++)y.words[J]=v.words[J];y.length=F;if(9>=v.length)v.words[0]=0,v.length=1;else{F=v.words[9];y.words[y.length++]=F&4194303;for(J=10;J<v.length;J++)y=v.words[J]|0,v.words[J-10]=(y&4194303)<<4|F>>>22,F=y;F>>>=22;v.words[J-10]=F;v.length=0===F&&10<v.length?v.length-10:v.length-9}};d.prototype.imulK=function(v){v.words[v.length]=0;v.words[v.length+1]=0;v.length+=2;for(var y=0,F=0;F<v.length;F++){var J=v.words[F]|0;y+=977*J;
v.words[F]=y&67108863;y=64*J+(y/67108864|0)}0===v.words[v.length-1]&&(v.length--,0===v.words[v.length-1]&&v.length--);return v};m(e,c);m(f,c);m(q,c);q.prototype.imulK=function(v){for(var y=0,F=0;F<v.length;F++){y=19*(v.words[F]|0)+y;var J=y&67108863;y>>>=26;v.words[F]=J}0!==y&&(v.words[v.length++]=y);return v};a._prime=function(v){if(C[v])return C[v];if("k256"===v)var y=new d;else if("p224"===v)y=new e;else if("p192"===v)y=new f;else if("p25519"===v)y=new q;else throw Error("Unknown prime "+v);return C[v]=
y};t.prototype._verify1=function(v){k(0===v.negative,"red works only with positives");k(v.red,"red works only with red numbers")};t.prototype._verify2=function(v,y){k(0===(v.negative|y.negative),"red works only with positives");k(v.red&&v.red===y.red,"red works only with red numbers")};t.prototype.imod=function(v){return this.prime?this.prime.ireduce(v)._forceRed(this):v.umod(this.m)._forceRed(this)};t.prototype.neg=function(v){return v.isZero()?v.clone():this.m.sub(v)._forceRed(this)};t.prototype.add=
function(v,y){this._verify2(v,y);v=v.add(y);0<=v.cmp(this.m)&&v.isub(this.m);return v._forceRed(this)};t.prototype.iadd=function(v,y){this._verify2(v,y);v=v.iadd(y);0<=v.cmp(this.m)&&v.isub(this.m);return v};t.prototype.sub=function(v,y){this._verify2(v,y);v=v.sub(y);0>v.cmpn(0)&&v.iadd(this.m);return v._forceRed(this)};t.prototype.isub=function(v,y){this._verify2(v,y);v=v.isub(y);0>v.cmpn(0)&&v.iadd(this.m);return v};t.prototype.shl=function(v,y){this._verify1(v);return this.imod(v.ushln(y))};t.prototype.imul=
function(v,y){this._verify2(v,y);return this.imod(v.imul(y))};t.prototype.mul=function(v,y){this._verify2(v,y);return this.imod(v.mul(y))};t.prototype.isqr=function(v){return this.imul(v,v.clone())};t.prototype.sqr=function(v){return this.mul(v,v)};t.prototype.sqrt=function(v){if(v.isZero())return v.clone();var y=this.m.andln(3);k(1===y%2);if(3===y)return y=this.m.add(new a(1)).iushrn(2),this.pow(v,y);for(var F=this.m.subn(1),J=0;!F.isZero()&&0===F.andln(1);)J++,F.iushrn(1);k(!F.isZero());y=(new a(1)).toRed(this);
var K=y.redNeg(),M=this.m.subn(1).iushrn(1),H=this.m.bitLength();for(H=(new a(2*H*H)).toRed(this);0!==this.pow(H,M).cmp(K);)H.redIAdd(K);M=this.pow(H,F);K=this.pow(v,F.addn(1).iushrn(1));v=this.pow(v,F);for(F=J;0!==v.cmp(y);){H=v;for(J=0;0!==H.cmp(y);J++)H=H.redSqr();k(J<F);M=this.pow(M,(new a(1)).iushln(F-J-1));K=K.redMul(M);M=M.redSqr();v=v.redMul(M);F=J}return K};t.prototype.invm=function(v){v=v._invmp(this.m);return 0!==v.negative?(v.negative=0,this.imod(v).redNeg()):this.imod(v)};t.prototype.pow=
function(v,y){if(y.isZero())return(new a(1)).toRed(this);if(0===y.cmpn(1))return v.clone();var F=Array(16);F[0]=(new a(1)).toRed(this);F[1]=v;for(var J=2;J<F.length;J++)F[J]=this.mul(F[J-1],v);v=F[0];var K=0,M=0,H=y.bitLength()%26;0===H&&(H=26);for(J=y.length-1;0<=J;J--){var O=y.words[J];for(--H;0<=H;H--){var I=O>>H&1;v!==F[0]&&(v=this.sqr(v));if(0===I&&0===K)M=0;else if(K<<=1,K|=I,M++,4===M||0===J&&0===H)v=this.mul(v,F[K]),K=M=0}H=26}return v};t.prototype.convertTo=function(v){var y=v.umod(this.m);
return y===v?y.clone():y};t.prototype.convertFrom=function(v){v=v.clone();v.red=null;return v};a.mont=function(v){return new w(v)};m(w,t);w.prototype.convertTo=function(v){return this.imod(v.ushln(this.shift))};w.prototype.convertFrom=function(v){v=this.imod(v.mul(this.rinv));v.red=null;return v};w.prototype.imul=function(v,y){if(v.isZero()||y.isZero())return v.words[0]=0,v.length=1,v;v=v.imul(y);y=v.maskn(this.shift).mul(this.minv).imaskn(this.shift).mul(this.m);y=v=v.isub(y).iushrn(this.shift);
0<=v.cmp(this.m)?y=v.isub(this.m):0>v.cmpn(0)&&(y=v.iadd(this.m));return y._forceRed(this)};w.prototype.mul=function(v,y){if(v.isZero()||y.isZero())return(new a(0))._forceRed(this);v=v.mul(y);y=v.maskn(this.shift).mul(this.minv).imaskn(this.shift).mul(this.m);y=v=v.isub(y).iushrn(this.shift);0<=v.cmp(this.m)?y=v.isub(this.m):0>v.cmpn(0)&&(y=v.iadd(this.m));return y._forceRed(this)};w.prototype.invm=function(v){return this.imod(v._invmp(this.m).mul(this.r2))._forceRed(this)}})("undefined"===typeof N||
N,this)},{buffer:115}],107:[function(b,N,G){N.exports=function(p){var n,k,m,a=p.length;for(n=k=0;n<a;++n)k+=p[n].length;var g=Array(k),h=0;for(n=0;n<a;++n){var r=p[n],l=r.length;for(k=0;k<l;++k){var c=g[h++]=Array(l-1),d=0;for(m=0;m<l;++m)m!==k&&(c[d++]=r[m]);k&1&&(m=c[1],c[1]=c[0],c[0]=m)}}return g}},{}],108:[function(b,N,G){function p(r,l,c,d){for(var e=0,f=0,q=0,t=r.length;q<t;++q){var w=r[q],x;a:{for(x=0;x<l;++x)if(!(w[x]<=w[x+l])){x=!0;break a}x=!1}if(!x){for(x=0;x<2*l;++x)c[e++]=w[x];d[f++]=
q}}return f}function n(r,l,c,d){var e=r.length,f=l.length;if(!(0>=e||0>=f)){var q=r[0].length>>>1;if(!(0>=q)){var t=m.mallocDouble(2*q*e),w=m.mallocInt32(e);e=p(r,q,t,w);if(0<e){if(1===q&&d){a.init(e);var x=a.sweepComplete(q,c,0,e,t,w,0,e,t,w)}else{r=m.mallocDouble(2*q*f);var z=m.mallocInt32(f);f=p(l,q,r,z);0<f&&(a.init(e+f),x=1===q?a.sweepBipartite(q,c,0,e,t,w,0,f,r,z):g(q,c,d,e,t,w,f,r,z),m.free(r),m.free(z))}m.free(t);m.free(w)}return x}}}function k(r,l){h.push([r,l])}N.exports=function(r,l,c){switch(arguments.length){case 1:return h=
[],n(r,r,k,!0),h;case 2:if("function"===typeof l)return n(r,r,l,!0);h=[];n(r,l,k,!1);return h;case 3:return n(r,l,c,!1);default:throw Error("box-intersect: Invalid arguments");}};var m=b("typedarray-pool"),a=b("./lib/sweep"),g=b("./lib/intersect"),h},{"./lib/intersect":110,"./lib/sweep":114,"typedarray-pool":617}],109:[function(b,N,G){function p(k){function m(l,c){var d="bruteForce"+(l?"Red":"Blue")+(c?"Flip":"")+(k?"Full":""),e=["function ",d,"(",n.join(),"){","var ","es","\x3d2*","d",";"],f="for(var j\x3dbs,bp\x3des*bs;j\x3cbe;++j,bp+\x3des){var y0\x3dbb[ax+bp],"+
(k?"y1\x3dbb[ax+bp+d],":"")+"yi\x3dbi[j];";l?e.push("for(var i\x3drs,rp\x3des*rs;i\x3cre;++i,rp+\x3des){var x0\x3drb[ax+rp],x1\x3drb[ax+rp+d],xi\x3dri[i];","Q",":",f):e.push(f,"Q",":","for(var i\x3drs,rp\x3des*rs;i\x3cre;++i,rp+\x3des){var x0\x3drb[ax+rp],x1\x3drb[ax+rp+d],xi\x3dri[i];");k?e.push("if(y1\x3cx0||x1\x3cy0)continue;"):c?e.push("if(y0\x3c\x3dx0||x1\x3cy0)continue;"):e.push("if(y0\x3cx0||x1\x3cy0)continue;");e.push("for(var k\x3dax+1;k\x3cd;++k){var r0\x3drb[k+rp],r1\x3drb[k+d+rp],b0\x3dbb[k+bp],b1\x3dbb[k+d+bp];if(r1\x3cb0||b1\x3cr0)continue Q;}var rv\x3dvv(");
c?e.push("yi,xi"):e.push("xi,yi");e.push(");if(rv!\x3d\x3dvoid 0)return rv;}}}");l=e.join("");g.push(l);r.push("return "+d+"("+n.join()+");")}var a="bruteForce"+(k?"Full":"Partial"),g=[],h=n.slice();k||h.splice(3,0,"fp");var r=["function "+a+"("+h.join()+"){"];r.push("if(re-rs\x3ebe-bs){");k?(m(!0,!1),r.push("}else{"),m(!1,!1)):(r.push("if(fp){"),m(!0,!0),r.push("}else{"),m(!0,!1),r.push("}}else{if(fp){"),m(!1,!0),r.push("}else{"),m(!1,!1),r.push("}"));r.push("}}return "+a);a=g.join("")+r.join("");
return(new Function(a))()}var n="d ax vv rs re rb ri bs be bb bi".split(" ");G.partial=p(!1);G.full=p(!0)},{}],110:[function(b,N,G){function p(D,C,v,y,F,J,K,M,H){var O=x*D;B[O]=C;B[O+1]=v;B[O+2]=y;B[O+3]=F;B[O+4]=J;B[O+5]=K;D*=z;A[D]=M;A[D+1]=H}N.exports=function(D,C,v,y,F,J,K,M,H){var O=8*k.log2(y+K+1)*(D+1)|0,I=k.nextPow2(x*O);B.length<I&&(n.free(B),B=n.mallocInt32(I));O=k.nextPow2(z*O);A.length<O&&(n.free(A),A=n.mallocDouble(O));O=0;I=2*D;p(O++,0,0,y,0,K,v?16:0,-Infinity,Infinity);for(v||p(O++,
0,0,K,0,y,1,-Infinity,Infinity);0<O;){--O;v=O*x;var L=B[v];K=B[v+1];var Q=B[v+2],Z=B[v+3],ba=B[v+4];v=B[v+5];y=O*z;var V=A[y],S=A[y+1],T=v&1,fa=!!(v&16),W=F,aa=J,ja=M;y=H;T&&(W=M,aa=H,ja=F,y=J);if(v&2&&(Q=f(D,L,K,Q,W,aa,S),K>=Q))continue;if(v&4&&(K=q(D,L,K,Q,W,aa,V),K>=Q))continue;v=Q-K;var ma=ba-Z;if(fa){if(D*v*(v+ma)<c){var ia=g.scanComplete(D,L,C,K,Q,W,aa,Z,ba,ja,y);if(void 0!==ia)return ia;continue}}else if(D*Math.min(v,ma)<r){ia=m(D,L,C,T,K,Q,W,aa,Z,ba,ja,y);if(void 0!==ia)return ia;continue}else if(D*
v*ma<l){ia=g.scanBipartite(D,L,C,T,K,Q,W,aa,Z,ba,ja,y);if(void 0!==ia)return ia;continue}v=d(D,L,K,Q,W,aa,V,S);if(K<v)if(D*(v-K)<r){if(ia=a(D,L+1,C,K,v,W,aa,Z,ba,ja,y),void 0!==ia)return ia}else if(L===D-2){if(ia=T?g.sweepBipartite(D,C,Z,ba,ja,y,K,v,W,aa):g.sweepBipartite(D,C,K,v,W,aa,Z,ba,ja,y),void 0!==ia)return ia}else p(O++,L+1,K,v,Z,ba,T,-Infinity,Infinity),p(O++,L+1,Z,ba,K,v,T^1,-Infinity,Infinity);if(v<Q)if(K=h(D,L,Z,ba,ja,y),ia=ja[I*K+L],ma=e(D,L,K,ba,ja,y,ia),ma<ba&&p(O++,L,v,Q,ma,ba,(T|
4)+(fa?16:0),ia,S),Z<K&&p(O++,L,v,Q,Z,K,(T|2)+(fa?16:0),V,ia),K+1===ma){if(fa)a:{Z=D;ba=C;y=y[K];T=2*Z;K*=T;V=ja[K+L];S=v;v*=T;b:for(;S<Q;++S,v+=T)if(fa=aa[S],fa!==y&&(ma=W[v+L],ia=W[v+L+Z],!(V<ma||ia<V))){for(var ra=L+1;ra<Z;++ra){ma=W[v+ra];ia=W[v+ra+Z];var wa=ja[K+ra+Z];if(ia<ja[K+ra]||wa<ma)continue b}fa=ba(fa,y);if(void 0!==fa){ia=fa;break a}}ia=void 0}else a:{Z=D;ba=C;y=y[K];V=2*Z;K*=V;S=ja[K+L];fa=v;v*=V;b:for(;fa<Q;++fa,v+=V)if(ma=W[v+L],ia=W[v+L+Z],!(S<ma||ia<S||T&&S===ma)){ra=aa[fa];for(wa=
L+1;wa<Z;++wa){ma=W[v+wa];ia=W[v+wa+Z];var pa=ja[K+wa+Z];if(ia<ja[K+wa]||pa<ma)continue b}ma=T?ba(y,ra):ba(ra,y);if(void 0!==ma){ia=ma;break a}}ia=void 0}if(void 0!==ia)return ia}else if(K<ma)if(fa){if(Q=t(D,L,v,Q,W,aa,ia),v<Q)if(Z=e(D,L,v,Q,W,aa,ia),L===D-2){if(v<Z&&(ia=g.sweepComplete(D,C,v,Z,W,aa,K,ma,ja,y),void 0!==ia)||Z<Q&&(ia=g.sweepBipartite(D,C,Z,Q,W,aa,K,ma,ja,y),void 0!==ia))return ia}else v<Z&&p(O++,L+1,v,Z,K,ma,16,-Infinity,Infinity),Z<Q&&(p(O++,L+1,Z,Q,K,ma,0,-Infinity,Infinity),p(O++,
L+1,K,ma,Z,Q,1,-Infinity,Infinity))}else Q=T?w(D,L,v,Q,W,aa,ia):t(D,L,v,Q,W,aa,ia),v<Q&&(L===D-2?T?g.sweepBipartite(D,C,K,ma,ja,y,v,Q,W,aa):g.sweepBipartite(D,C,v,Q,W,aa,K,ma,ja,y):(p(O++,L+1,v,Q,K,ma,T,-Infinity,Infinity),p(O++,L+1,K,ma,v,Q,T^1,-Infinity,Infinity)))}};var n=b("typedarray-pool"),k=b("bit-twiddle");N=b("./brute");var m=N.partial,a=N.full,g=b("./sweep"),h=b("./median");b=b("./partition");var r=128,l=4194304,c=4194304,d=b("!(lo\x3e\x3dp0)\x26\x26!(p1\x3e\x3dhi)",["p0","p1"]),e=b("lo\x3d\x3d\x3dp0",
["p0"]),f=b("lo\x3cp0",["p0"]),q=b("hi\x3c\x3dp0",["p0"]),t=b("lo\x3c\x3dp0\x26\x26p0\x3c\x3dhi",["p0"]),w=b("lo\x3cp0\x26\x26p0\x3c\x3dhi",["p0"]),x=6,z=2,B=n.mallocInt32(1024),A=n.mallocDouble(1024)},{"./brute":109,"./median":111,"./partition":112,"./sweep":114,"bit-twiddle":104,"typedarray-pool":617}],111:[function(b,N,G){N.exports=function(k,m,a,g,h,r){if(g<=a+1)return a;var l=a,c=g;g=g+a>>>1;for(var d=2*k,e,f;l<c;){if(c-l<n){e=m;f=h;for(var q=r,t=2*k,w=t*(l+1)+e,x=l+1;x<c;++x,w+=t)for(var z=
f[w],B=x,A=t*(x-1);B>l&&f[A+e]>z;--B,A-=t){for(var D=A,C=A+t,v=0;v<t;++v,++D,++C){var y=f[D];f[D]=f[C];f[C]=y}D=q[B];q[B]=q[B-1];q[B-1]=D}break}w=c-l;e=Math.random()*w+l|0;f=h[d*e+m];t=Math.random()*w+l|0;q=h[d*t+m];x=Math.random()*w+l|0;w=h[d*x+m];f<=q?w>=q?(e=t,f=q):f>=w||(e=x,f=w):q>=w?(e=t,f=q):w>=f||(e=x,f=w);q=d*(c-1);t=d*e;for(w=0;w<d;++w,++q,++t)x=h[q],h[q]=h[t],h[t]=x;q=r[c-1];r[c-1]=r[e];r[e]=q;e=p(k,m,l,c-1,h,r,f);q=d*(c-1);t=d*e;for(w=0;w<d;++w,++q,++t)x=h[q],h[q]=h[t],h[t]=x;q=r[c-1];
r[c-1]=r[e];r[e]=q;if(g<e){for(c=e-1;l<c&&h[d*(c-1)+m]===f;)--c;c+=1}else if(e<g)for(l=e+1;l<c&&h[d*l+m]===f;)l+=1;else break}return p(k,m,a,g,h,r,h[d*g+m])};var p=b("./partition")("lo\x3cp0",["p0"]),n=8},{"./partition":112}],112:[function(b,N,G){N.exports=function(n,k){k="abcdef".split("").concat(k);var m=[];0<=n.indexOf("lo")&&m.push("lo\x3de[k+n]");0<=n.indexOf("hi")&&m.push("hi\x3de[k+o]");k.push(p.replace("_",m.join()).replace("$",n));return Function.apply(void 0,k)};var p="for(var j\x3d2*a,k\x3dj*c,l\x3dk,m\x3dc,n\x3db,o\x3da+b,p\x3dc;d\x3ep;++p,k+\x3dj){var _;if($)if(m\x3d\x3d\x3dp)m+\x3d1,l+\x3dj;else{for(var s\x3d0;j\x3es;++s){var t\x3de[k+s];e[k+s]\x3de[l],e[l++]\x3dt}var u\x3df[p];f[p]\x3df[m],f[m++]\x3du}}return m"},
{}],113:[function(b,N,G){function p(l,c,d){for(var e=2*(l+1),f=l+1;f<=c;++f){for(var q=d[e++],t=d[e++],w=f,x=e-2;w-- >l;){var z=d[x-2],B=d[x-1];if(z<q)break;else if(z===q&&B<t)break;d[x]=z;d[x+1]=B;x-=2}d[x]=q;d[x+1]=t}}function n(l,c,d){l*=2;c*=2;var e=d[l],f=d[l+1];d[l]=d[c];d[l+1]=d[c+1];d[c]=e;d[c+1]=f}function k(l,c,d){l*=2;c*=2;d[l]=d[c];d[l+1]=d[c+1]}function m(l,c,d,e,f){l*=2;c*=2;f[l]=f[c];f[c]=d;f[l+1]=f[c+1];f[c+1]=e}function a(l,c,d){l*=2;c*=2;var e=d[l],f=d[c];return e<f?!1:e===f?d[l+
1]>d[c+1]:!0}function g(l,c,d,e){l*=2;var f=e[l];return f<c?!0:f===c?e[l+1]<d:!1}function h(l,c,d){var e=(c-l+1)/6|0,f=l+e,q=c-e,t=l+c>>1,w=t-e,x=t+e,z=f,B=w,A=t,D=x,C=q;e=l+1;var v=c-1;if(a(z,B,d)){var y=z;z=B;B=y}a(D,C,d)&&(y=D,D=C,C=y);a(z,A,d)&&(y=z,z=A,A=y);a(B,A,d)&&(y=B,B=A,A=y);a(z,D,d)&&(y=z,z=D,D=y);a(A,D,d)&&(y=A,A=D,D=y);a(B,C,d)&&(y=B,B=C,C=y);a(B,A,d)&&(y=B,B=A,A=y);a(D,C,d)&&(y=D,D=C,C=y);y=d[2*B];B=d[2*B+1];var F=d[2*D];D=d[2*D+1];z*=2;A*=2;C*=2;f*=2;t*=2;q*=2;for(var J=0;2>J;++J){var K=
d[A+J],M=d[C+J];d[f+J]=d[z+J];d[t+J]=K;d[q+J]=M}k(w,l,d);k(x,c,d);for(w=e;w<=v;++w)if(g(w,y,B,d))w!==e&&n(w,e,d),++e;else if(!g(w,F,D,d))for(;;)if(g(v,F,D,d)){g(v,y,B,d)?(x=w,q=e,t=v,z=d,x*=2,q*=2,t*=2,f=z[x],A=z[x+1],z[x]=z[q],z[x+1]=z[q+1],z[q]=z[t],z[q+1]=z[t+1],z[t]=f,z[t+1]=A,++e):n(w,v,d);--v;break}else if(--v<w)break;m(l,e-1,y,B,d);m(c,v+1,F,D,d);e-2-l<=r?p(l,e-2,d):h(l,e-2,d);c-(v+2)<=r?p(v+2,c,d):h(v+2,c,d);v-e<=r?p(e,v,d):h(e,v,d)}N.exports=function(l,c){c<=4*r?p(0,c-1,l):h(0,c-1,l)};var r=
32},{}],114:[function(b,N,G){function p(f,q,t,w){w=q[w];t=f[t-1];f[w]=t;q[t]=w}N.exports={init:function(f){f=k.nextPow2(f);g.length<f&&(n.free(g),g=n.mallocInt32(f));h.length<f&&(n.free(h),h=n.mallocInt32(f));r.length<f&&(n.free(r),r=n.mallocInt32(f));l.length<f&&(n.free(l),l=n.mallocInt32(f));c.length<f&&(n.free(c),c=n.mallocInt32(f));d.length<f&&(n.free(d),d=n.mallocInt32(f));f*=8;e.length<f&&(n.free(e),e=n.mallocDouble(f))},sweepBipartite:function(f,q,t,w,x,z,B,A,D,C){var v=0,y=2*f;--f;for(var F=
y-1;t<w;++t){var J=z[t],K=y*t;e[v++]=x[K+f];e[v++]=-(J+1);e[v++]=x[K+F];e[v++]=J}for(t=B;t<A;++t)J=C[t]+a,w=y*t,e[v++]=D[w+f],e[v++]=-J,e[v++]=D[w+F],e[v++]=J;A=v>>>1;m(e,A);for(t=C=D=0;t<A;++t)if(v=e[2*t+1]|0,v>=a)v=v-a|0,p(r,l,C--,v);else if(0<=v)p(g,h,D--,v);else if(v<=-a){v=-v-a|0;for(y=0;y<D;++y)if(w=q(g[y],v),void 0!==w)return w;y=l;w=C++;r[w]=v;y[v]=w}else{v=-v-1|0;for(y=0;y<C;++y)if(w=q(v,r[y]),void 0!==w)return w;y=h;w=D++;g[w]=v;y[v]=w}},sweepComplete:function(f,q,t,w,x,z,B,A,D,C){var v=
0,y=2*f;--f;for(var F=y-1;t<w;++t){var J=z[t]+1<<1,K=y*t;e[v++]=x[K+f];e[v++]=-J;e[v++]=x[K+F];e[v++]=J}for(t=B;t<A;++t)J=C[t]+1<<1,w=y*t,e[v++]=D[w+f],e[v++]=-J|1,e[v++]=D[w+F],e[v++]=J|1;A=v>>>1;m(e,A);for(t=v=C=D=0;t<A;++t)if(y=e[2*t+1]|0,w=y&1,t<A-1&&y>>1===e[2*t+3]>>1&&(w=2,t+=1),0>y){y=-(y>>1)-1;for(x=0;x<v;++x)if(z=q(c[x],y),void 0!==z)return z;if(0!==w)for(x=0;x<D;++x)if(z=q(g[x],y),void 0!==z)return z;if(1!==w)for(x=0;x<C;++x)if(z=q(r[x],y),void 0!==z)return z;0===w?(w=h,x=D++,g[x]=y,w[y]=
x):1===w?(w=l,x=C++,r[x]=y,w[y]=x):2===w&&(w=d,x=v++,c[x]=y,w[y]=x)}else y=(y>>1)-1,0===w?p(g,h,D--,y):1===w?p(r,l,C--,y):2===w&&p(c,d,v--,y)},scanBipartite:function(f,q,t,w,x,z,B,A,D,C,v,y){var F=0,J=2*f,K=q+f,M=1,H=1;for(w?H=a:M=a;x<z;++x){var O=x+M,I=J*x;e[F++]=B[I+q];e[F++]=-O;e[F++]=B[I+K];e[F++]=O}for(x=D;x<C;++x)O=x+H,z=J*x,e[F++]=v[z+q],e[F++]=-O;C=F>>>1;m(e,C);for(x=F=0;x<C;++x)if(O=e[2*x+1]|0,0>O)if(O=-O,O>=a?(H=!w,O-=a):(H=!!w,--O),H)H=h,z=F++,g[z]=O,H[O]=z;else a:for(H=y[O],O*=J,z=v[O+
q+1],D=v[O+q+1+f],K=0;K<F;++K){I=g[K];var L=J*I;if(!(D<B[L+q+1]||B[L+q+1+f]<z)){for(var Q=q+2;Q<f;++Q)if(v[O+Q+f]<B[L+Q]||B[L+Q+f]<v[O+Q])continue a;I=A[I];I=w?t(H,I):t(I,H);if(void 0!==I)return I}}else p(g,h,F--,O-M)},scanComplete:function(f,q,t,w,x,z,B,A,D,C,v){for(var y=0,F=2*f,J=q+f;w<x;++w){var K=w+a,M=F*w;e[y++]=z[M+q];e[y++]=-K;e[y++]=z[M+J];e[y++]=K}for(w=A;w<D;++w)K=w+1,x=F*w,e[y++]=C[x+q],e[y++]=-K;D=y>>>1;m(e,D);for(w=y=0;w<D;++w)if(x=e[2*w+1]|0,0>x)if(K=-x,K>=a)g[y++]=K-a;else a:for(--K,
x=v[K],K*=F,J=C[K+q+1],M=C[K+q+1+f],A=0;A<y;++A){var H=g[A],O=B[H];if(O===x)break;H*=F;if(!(M<z[H+q+1]||z[H+q+1+f]<J)){for(var I=q+2;I<f;++I)if(C[K+I+f]<z[H+I]||z[H+I+f]<C[K+I])continue a;O=t(O,x);if(void 0!==O)return O}}else{K=x-a;for(A=y-1;0<=A;--A)if(g[A]===K){for(I=A+1;I<y;++I)g[I-1]=g[I];break}--y}}};var n=b("typedarray-pool"),k=b("bit-twiddle"),m=b("./sort"),a=268435456,g=n.mallocInt32(1024),h=n.mallocInt32(1024),r=n.mallocInt32(1024),l=n.mallocInt32(1024),c=n.mallocInt32(1024),d=n.mallocInt32(1024),
e=n.mallocDouble(8192)},{"./sort":113,"bit-twiddle":104,"typedarray-pool":617}],115:[function(b,N,G){},{}],116:[function(b,N,G){function p(){p.init.call(this)}function n(f){if("function"!==typeof f)throw new TypeError('The "listener" argument must be of type Function. Received type '+typeof f);}function k(f,q,t,w){n(t);var x=f._events;if(void 0===x)x=f._events=Object.create(null),f._eventsCount=0;else{void 0!==x.newListener&&(f.emit("newListener",q,t.listener?t.listener:t),x=f._events);var z=x[q]}void 0===
z?(x[q]=t,++f._eventsCount):("function"===typeof z?z=x[q]=w?[t,z]:[z,t]:w?z.unshift(t):z.push(t),t=void 0===f._maxListeners?p.defaultMaxListeners:f._maxListeners,0<t&&z.length>t&&!z.warned&&(z.warned=!0,t=Error("Possible EventEmitter memory leak detected. "+z.length+" "+String(q)+" listeners added. Use emitter.setMaxListeners() to increase limit"),t.name="MaxListenersExceededWarning",t.emitter=f,t.type=q,t.count=z.length,console&&console.warn&&console.warn(t)));return f}function m(){if(!this.fired)return this.target.removeListener(this.type,
this.wrapFn),this.fired=!0,0===arguments.length?this.listener.call(this.target):this.listener.apply(this.target,arguments)}function a(f,q,t){f={fired:!1,wrapFn:void 0,target:f,type:q,listener:t};q=m.bind(f);q.listener=t;return f.wrapFn=q}function g(f,q,t){f=f._events;if(void 0===f)return[];q=f[q];if(void 0===q)return[];if("function"===typeof q)return t?[q.listener||q]:[q];if(t)for(t=Array(q.length),f=0;f<t.length;++f)t[f]=q[f].listener||q[f];else t=r(q,q.length);return t}function h(f){var q=this._events;
if(void 0!==q){f=q[f];if("function"===typeof f)return 1;if(void 0!==f)return f.length}return 0}function r(f,q){for(var t=Array(q),w=0;w<q;++w)t[w]=f[w];return t}var l=(b="object"===typeof Reflect?Reflect:null)&&"function"===typeof b.apply?b.apply:function(f,q,t){return Function.prototype.apply.call(f,q,t)};var c=b&&"function"===typeof b.ownKeys?b.ownKeys:Object.getOwnPropertySymbols?function(f){return Object.getOwnPropertyNames(f).concat(Object.getOwnPropertySymbols(f))}:function(f){return Object.getOwnPropertyNames(f)};
var d=Number.isNaN||function(f){return f!==f};N.exports=p;N.exports.once=function(f,q){return new Promise(function(t,w){function x(){void 0!==z&&f.removeListener("error",z);t([].slice.call(arguments))}if("error"!==q){var z=function(B){f.removeListener(q,x);w(B)};f.once("error",z)}f.once(q,x)})};p.EventEmitter=p;p.prototype._events=void 0;p.prototype._eventsCount=0;p.prototype._maxListeners=void 0;var e=10;Object.defineProperty(p,"defaultMaxListeners",{enumerable:!0,get:function(){return e},set:function(f){if("number"!==
typeof f||0>f||d(f))throw new RangeError('The value of "defaultMaxListeners" is out of range. It must be a non-negative number. Received '+f+".");e=f}});p.init=function(){if(void 0===this._events||this._events===Object.getPrototypeOf(this)._events)this._events=Object.create(null),this._eventsCount=0;this._maxListeners=this._maxListeners||void 0};p.prototype.setMaxListeners=function(f){if("number"!==typeof f||0>f||d(f))throw new RangeError('The value of "n" is out of range. It must be a non-negative number. Received '+
f+".");this._maxListeners=f;return this};p.prototype.getMaxListeners=function(){return void 0===this._maxListeners?p.defaultMaxListeners:this._maxListeners};p.prototype.emit=function(f){for(var q=[],t=1;t<arguments.length;t++)q.push(arguments[t]);t="error"===f;var w=this._events;if(void 0!==w)t=t&&void 0===w.error;else if(!t)return!1;if(t){var x;0<q.length&&(x=q[0]);if(x instanceof Error)throw x;q=Error("Unhandled error."+(x?" ("+x.message+")":""));q.context=x;throw q;}t=w[f];if(void 0===t)return!1;
if("function"===typeof t)l(t,this,q);else for(x=t.length,w=r(t,x),t=0;t<x;++t)l(w[t],this,q);return!0};p.prototype.addListener=function(f,q){return k(this,f,q,!1)};p.prototype.on=p.prototype.addListener;p.prototype.prependListener=function(f,q){return k(this,f,q,!0)};p.prototype.once=function(f,q){n(q);this.on(f,a(this,f,q));return this};p.prototype.prependOnceListener=function(f,q){n(q);this.prependListener(f,a(this,f,q));return this};p.prototype.removeListener=function(f,q){var t;n(q);var w=this._events;
if(void 0===w)return this;var x=w[f];if(void 0===x)return this;if(x===q||x.listener===q)0===--this._eventsCount?this._events=Object.create(null):(delete w[f],w.removeListener&&this.emit("removeListener",f,x.listener||q));else if("function"!==typeof x){var z=-1;for(t=x.length-1;0<=t;t--)if(x[t]===q||x[t].listener===q){var B=x[t].listener;z=t;break}if(0>z)return this;if(0===z)x.shift();else{for(;z+1<x.length;z++)x[z]=x[z+1];x.pop()}1===x.length&&(w[f]=x[0]);void 0!==w.removeListener&&this.emit("removeListener",
f,B||q)}return this};p.prototype.off=p.prototype.removeListener;p.prototype.removeAllListeners=function(f){var q=this._events;if(void 0===q)return this;if(void 0===q.removeListener)return 0===arguments.length?(this._events=Object.create(null),this._eventsCount=0):void 0!==q[f]&&(0===--this._eventsCount?this._events=Object.create(null):delete q[f]),this;if(0===arguments.length){var t=Object.keys(q);for(q=0;q<t.length;++q){var w=t[q];"removeListener"!==w&&this.removeAllListeners(w)}this.removeAllListeners("removeListener");
this._events=Object.create(null);this._eventsCount=0;return this}t=q[f];if("function"===typeof t)this.removeListener(f,t);else if(void 0!==t)for(q=t.length-1;0<=q;q--)this.removeListener(f,t[q]);return this};p.prototype.listeners=function(f){return g(this,f,!0)};p.prototype.rawListeners=function(f){return g(this,f,!1)};p.listenerCount=function(f,q){return"function"===typeof f.listenerCount?f.listenerCount(q):h.call(f,q)};p.prototype.listenerCount=h;p.prototype.eventNames=function(){return 0<this._eventsCount?
c(this._events):[]}},{}],117:[function(b,N,G){(function(p){(function(){function n(I){if(I>M)throw new RangeError('The value "'+I+'" is invalid for option "size"');I=new Uint8Array(I);I.__proto__=k.prototype;return I}function k(I,L,Q){if("number"===typeof I){if("string"===typeof L)throw new TypeError('The "string" argument must be of type string. Received type number');return g(I)}return m(I,L,Q)}function m(I,L,Q){if("string"===typeof I){var Z=L;if("string"!==typeof Z||""===Z)Z="utf8";if(!k.isEncoding(Z))throw new TypeError("Unknown encoding: "+
Z);L=c(I,Z)|0;Q=n(L);I=Q.write(I,Z);I!==L&&(Q=Q.slice(0,I));return Q}if(ArrayBuffer.isView(I))return h(I);if(null==I)throw TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+typeof I);if(F(I,ArrayBuffer)||I&&F(I.buffer,ArrayBuffer)){if(0>L||I.byteLength<L)throw new RangeError('"offset" is outside of buffer bounds');if(I.byteLength<L+(Q||0))throw new RangeError('"length" is outside of buffer bounds');I=void 0===L&&void 0===Q?
new Uint8Array(I):void 0===Q?new Uint8Array(I,L):new Uint8Array(I,L,Q);I.__proto__=k.prototype;return I}if("number"===typeof I)throw new TypeError('The "value" argument must not be of type number. Received type number');Z=I.valueOf&&I.valueOf();if(null!=Z&&Z!==I)return k.from(Z,L,Q);if(Z=r(I))return Z;if("undefined"!==typeof Symbol&&null!=Symbol.toPrimitive&&"function"===typeof I[Symbol.toPrimitive])return k.from(I[Symbol.toPrimitive]("string"),L,Q);throw new TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+
typeof I);}function a(I){if("number"!==typeof I)throw new TypeError('"size" argument must be of type number');if(0>I)throw new RangeError('The value "'+I+'" is invalid for option "size"');}function g(I){a(I);return n(0>I?0:l(I)|0)}function h(I){for(var L=0>I.length?0:l(I.length)|0,Q=n(L),Z=0;Z<L;Z+=1)Q[Z]=I[Z]&255;return Q}function r(I){if(k.isBuffer(I)){var L=l(I.length)|0,Q=n(L);if(0===Q.length)return Q;I.copy(Q,0,0,L);return Q}if(void 0!==I.length)return(L="number"!==typeof I.length)||(L=I.length,
L=L!==L),L?n(0):h(I);if("Buffer"===I.type&&Array.isArray(I.data))return h(I.data)}function l(I){if(I>=M)throw new RangeError("Attempt to allocate Buffer larger than maximum size: 0x"+M.toString(16)+" bytes");return I|0}function c(I,L){if(k.isBuffer(I))return I.length;if(ArrayBuffer.isView(I)||F(I,ArrayBuffer))return I.byteLength;if("string"!==typeof I)throw new TypeError('The "string" argument must be one of type string, Buffer, or ArrayBuffer. Received type '+typeof I);var Q=I.length,Z=2<arguments.length&&
!0===arguments[2];if(!Z&&0===Q)return 0;for(var ba=!1;;)switch(L){case "ascii":case "latin1":case "binary":return Q;case "utf8":case "utf-8":return D(I).length;case "ucs2":case "ucs-2":case "utf16le":case "utf-16le":return 2*Q;case "hex":return Q>>>1;case "base64":return v(I).length;default:if(ba)return Z?-1:D(I).length;L=(""+L).toLowerCase();ba=!0}}function d(I,L,Q){var Z=!1;if(void 0===L||0>L)L=0;if(L>this.length)return"";if(void 0===Q||Q>this.length)Q=this.length;if(0>=Q)return"";Q>>>=0;L>>>=0;
if(Q<=L)return"";for(I||(I="utf8");;)switch(I){case "hex":I=L;L=Q;Q=this.length;if(!I||0>I)I=0;if(!L||0>L||L>Q)L=Q;Z="";for(Q=I;Q<L;++Q)I=Z,Z=this[Q],Z=16>Z?"0"+Z.toString(16):Z.toString(16),Z=I+Z;return Z;case "utf8":case "utf-8":return t(this,L,Q);case "ascii":I="";for(Q=Math.min(this.length,Q);L<Q;++L)I+=String.fromCharCode(this[L]&127);return I;case "latin1":case "binary":I="";for(Q=Math.min(this.length,Q);L<Q;++L)I+=String.fromCharCode(this[L]);return I;case "base64":return L=0===L&&Q===this.length?
J.fromByteArray(this):J.fromByteArray(this.slice(L,Q)),L;case "ucs2":case "ucs-2":case "utf16le":case "utf-16le":L=this.slice(L,Q);Q="";for(I=0;I<L.length;I+=2)Q+=String.fromCharCode(L[I]+256*L[I+1]);return Q;default:if(Z)throw new TypeError("Unknown encoding: "+I);I=(I+"").toLowerCase();Z=!0}}function e(I,L,Q){var Z=I[L];I[L]=I[Q];I[Q]=Z}function f(I,L,Q,Z,ba){if(0===I.length)return-1;"string"===typeof Q?(Z=Q,Q=0):2147483647<Q?Q=2147483647:-2147483648>Q&&(Q=-2147483648);Q=+Q;Q!==Q&&(Q=ba?0:I.length-
1);0>Q&&(Q=I.length+Q);if(Q>=I.length){if(ba)return-1;Q=I.length-1}else if(0>Q)if(ba)Q=0;else return-1;"string"===typeof L&&(L=k.from(L,Z));if(k.isBuffer(L))return 0===L.length?-1:q(I,L,Q,Z,ba);if("number"===typeof L)return L&=255,"function"===typeof Uint8Array.prototype.indexOf?ba?Uint8Array.prototype.indexOf.call(I,L,Q):Uint8Array.prototype.lastIndexOf.call(I,L,Q):q(I,[L],Q,Z,ba);throw new TypeError("val must be string, number or Buffer");}function q(I,L,Q,Z,ba){function V(W,aa){return 1===S?W[aa]:
W.readUInt16BE(aa*S)}var S=1,T=I.length,fa=L.length;if(void 0!==Z&&(Z=String(Z).toLowerCase(),"ucs2"===Z||"ucs-2"===Z||"utf16le"===Z||"utf-16le"===Z)){if(2>I.length||2>L.length)return-1;S=2;T/=2;fa/=2;Q/=2}if(ba)for(Z=-1;Q<T;Q++)if(V(I,Q)===V(L,-1===Z?0:Q-Z)){if(-1===Z&&(Z=Q),Q-Z+1===fa)return Z*S}else-1!==Z&&(Q-=Q-Z),Z=-1;else for(Q+fa>T&&(Q=T-fa);0<=Q;Q--){T=!0;for(Z=0;Z<fa;Z++)if(V(I,Q+Z)!==V(L,Z)){T=!1;break}if(T)return Q}return-1}function t(I,L,Q){Q=Math.min(I.length,Q);for(var Z=[];L<Q;){var ba=
I[L],V=null,S=239<ba?4:223<ba?3:191<ba?2:1;if(L+S<=Q)switch(S){case 1:128>ba&&(V=ba);break;case 2:var T=I[L+1];128===(T&192)&&(ba=(ba&31)<<6|T&63,127<ba&&(V=ba));break;case 3:T=I[L+1];var fa=I[L+2];128===(T&192)&&128===(fa&192)&&(ba=(ba&15)<<12|(T&63)<<6|fa&63,2047<ba&&(55296>ba||57343<ba)&&(V=ba));break;case 4:T=I[L+1];fa=I[L+2];var W=I[L+3];128===(T&192)&&128===(fa&192)&&128===(W&192)&&(ba=(ba&15)<<18|(T&63)<<12|(fa&63)<<6|W&63,65535<ba&&1114112>ba&&(V=ba))}null===V?(V=65533,S=1):65535<V&&(V-=65536,
Z.push(V>>>10&1023|55296),V=56320|V&1023);Z.push(V);L+=S}I=Z.length;if(I<=H)Z=String.fromCharCode.apply(String,Z);else{Q="";for(L=0;L<I;)Q+=String.fromCharCode.apply(String,Z.slice(L,L+=H));Z=Q}return Z}function w(I,L,Q){if(0!==I%1||0>I)throw new RangeError("offset is not uint");if(I+L>Q)throw new RangeError("Trying to access beyond buffer length");}function x(I,L,Q,Z,ba,V){if(!k.isBuffer(I))throw new TypeError('"buffer" argument must be a Buffer instance');if(L>ba||L<V)throw new RangeError('"value" argument is out of bounds');
if(Q+Z>I.length)throw new RangeError("Index out of range");}function z(I,L,Q,Z,ba,V){if(Q+Z>I.length)throw new RangeError("Index out of range");if(0>Q)throw new RangeError("Index out of range");}function B(I,L,Q,Z,ba){L=+L;Q>>>=0;ba||z(I,L,Q,4,3.4028234663852886E38,-3.4028234663852886E38);K.write(I,L,Q,Z,23,4);return Q+4}function A(I,L,Q,Z,ba){L=+L;Q>>>=0;ba||z(I,L,Q,8,1.7976931348623157E308,-1.7976931348623157E308);K.write(I,L,Q,Z,52,8);return Q+8}function D(I,L){L=L||Infinity;for(var Q,Z=I.length,
ba=null,V=[],S=0;S<Z;++S){Q=I.charCodeAt(S);if(55295<Q&&57344>Q){if(!ba){if(56319<Q){-1<(L-=3)&&V.push(239,191,189);continue}else if(S+1===Z){-1<(L-=3)&&V.push(239,191,189);continue}ba=Q;continue}if(56320>Q){-1<(L-=3)&&V.push(239,191,189);ba=Q;continue}Q=(ba-55296<<10|Q-56320)+65536}else ba&&-1<(L-=3)&&V.push(239,191,189);ba=null;if(128>Q){if(0>--L)break;V.push(Q)}else if(2048>Q){if(0>(L-=2))break;V.push(Q>>6|192,Q&63|128)}else if(65536>Q){if(0>(L-=3))break;V.push(Q>>12|224,Q>>6&63|128,Q&63|128)}else if(1114112>
Q){if(0>(L-=4))break;V.push(Q>>18|240,Q>>12&63|128,Q>>6&63|128,Q&63|128)}else throw Error("Invalid code point");}return V}function C(I){for(var L=[],Q=0;Q<I.length;++Q)L.push(I.charCodeAt(Q)&255);return L}function v(I){var L=J,Q=L.toByteArray;I=I.split("\x3d")[0];I=I.trim().replace(O,"");if(2>I.length)I="";else for(;0!==I.length%4;)I+="\x3d";return Q.call(L,I)}function y(I,L,Q,Z){for(var ba=0;ba<Z&&!(ba+Q>=L.length||ba>=I.length);++ba)L[ba+Q]=I[ba];return ba}function F(I,L){return I instanceof L||
null!=I&&null!=I.constructor&&null!=I.constructor.name&&I.constructor.name===L.name}var J=b("base64-js"),K=b("ieee754");G.Buffer=k;G.SlowBuffer=function(I){+I!=I&&(I=0);return k.alloc(+I)};G.INSPECT_MAX_BYTES=50;var M=2147483647;G.kMaxLength=M;k.TYPED_ARRAY_SUPPORT=function(){try{var I=new Uint8Array(1);I.__proto__={__proto__:Uint8Array.prototype,foo:function(){return 42}};return 42===I.foo()}catch(L){return!1}}();k.TYPED_ARRAY_SUPPORT||"undefined"===typeof console||"function"!==typeof console.error||
console.error("This browser lacks typed array (Uint8Array) support which is required by `buffer` v5.x. Use `buffer` v4.x if you require old browser support.");Object.defineProperty(k.prototype,"parent",{enumerable:!0,get:function(){if(k.isBuffer(this))return this.buffer}});Object.defineProperty(k.prototype,"offset",{enumerable:!0,get:function(){if(k.isBuffer(this))return this.byteOffset}});"undefined"!==typeof Symbol&&null!=Symbol.species&&k[Symbol.species]===k&&Object.defineProperty(k,Symbol.species,
{value:null,configurable:!0,enumerable:!1,writable:!1});k.poolSize=8192;k.from=function(I,L,Q){return m(I,L,Q)};k.prototype.__proto__=Uint8Array.prototype;k.__proto__=Uint8Array;k.alloc=function(I,L,Q){a(I);I=0>=I?n(I):void 0!==L?"string"===typeof Q?n(I).fill(L,Q):n(I).fill(L):n(I);return I};k.allocUnsafe=function(I){return g(I)};k.allocUnsafeSlow=function(I){return g(I)};k.isBuffer=function(I){return null!=I&&!0===I._isBuffer&&I!==k.prototype};k.compare=function(I,L){F(I,Uint8Array)&&(I=k.from(I,
I.offset,I.byteLength));F(L,Uint8Array)&&(L=k.from(L,L.offset,L.byteLength));if(!k.isBuffer(I)||!k.isBuffer(L))throw new TypeError('The "buf1", "buf2" arguments must be one of type Buffer or Uint8Array');if(I===L)return 0;for(var Q=I.length,Z=L.length,ba=0,V=Math.min(Q,Z);ba<V;++ba)if(I[ba]!==L[ba]){Q=I[ba];Z=L[ba];break}return Q<Z?-1:Z<Q?1:0};k.isEncoding=function(I){switch(String(I).toLowerCase()){case "hex":case "utf8":case "utf-8":case "ascii":case "latin1":case "binary":case "base64":case "ucs2":case "ucs-2":case "utf16le":case "utf-16le":return!0;
default:return!1}};k.concat=function(I,L){if(!Array.isArray(I))throw new TypeError('"list" argument must be an Array of Buffers');if(0===I.length)return k.alloc(0);var Q;if(void 0===L)for(Q=L=0;Q<I.length;++Q)L+=I[Q].length;L=k.allocUnsafe(L);var Z=0;for(Q=0;Q<I.length;++Q){var ba=I[Q];F(ba,Uint8Array)&&(ba=k.from(ba));if(!k.isBuffer(ba))throw new TypeError('"list" argument must be an Array of Buffers');ba.copy(L,Z);Z+=ba.length}return L};k.byteLength=c;k.prototype._isBuffer=!0;k.prototype.swap16=
function(){var I=this.length;if(0!==I%2)throw new RangeError("Buffer size must be a multiple of 16-bits");for(var L=0;L<I;L+=2)e(this,L,L+1);return this};k.prototype.swap32=function(){var I=this.length;if(0!==I%4)throw new RangeError("Buffer size must be a multiple of 32-bits");for(var L=0;L<I;L+=4)e(this,L,L+3),e(this,L+1,L+2);return this};k.prototype.swap64=function(){var I=this.length;if(0!==I%8)throw new RangeError("Buffer size must be a multiple of 64-bits");for(var L=0;L<I;L+=8)e(this,L,L+7),
e(this,L+1,L+6),e(this,L+2,L+5),e(this,L+3,L+4);return this};k.prototype.toString=function(){var I=this.length;return 0===I?"":0===arguments.length?t(this,0,I):d.apply(this,arguments)};k.prototype.toLocaleString=k.prototype.toString;k.prototype.equals=function(I){if(!k.isBuffer(I))throw new TypeError("Argument must be a Buffer");return this===I?!0:0===k.compare(this,I)};k.prototype.inspect=function(){var I=G.INSPECT_MAX_BYTES;var L=this.toString("hex",0,I).replace(/(.{2})/g,"$1 ").trim();this.length>
I&&(L+=" ... ");return"\x3cBuffer "+L+"\x3e"};k.prototype.compare=function(I,L,Q,Z,ba){F(I,Uint8Array)&&(I=k.from(I,I.offset,I.byteLength));if(!k.isBuffer(I))throw new TypeError('The "target" argument must be one of type Buffer or Uint8Array. Received type '+typeof I);void 0===L&&(L=0);void 0===Q&&(Q=I?I.length:0);void 0===Z&&(Z=0);void 0===ba&&(ba=this.length);if(0>L||Q>I.length||0>Z||ba>this.length)throw new RangeError("out of range index");if(Z>=ba&&L>=Q)return 0;if(Z>=ba)return-1;if(L>=Q)return 1;
L>>>=0;Q>>>=0;Z>>>=0;ba>>>=0;if(this===I)return 0;var V=ba-Z,S=Q-L,T=Math.min(V,S);Z=this.slice(Z,ba);I=I.slice(L,Q);for(L=0;L<T;++L)if(Z[L]!==I[L]){V=Z[L];S=I[L];break}return V<S?-1:S<V?1:0};k.prototype.includes=function(I,L,Q){return-1!==this.indexOf(I,L,Q)};k.prototype.indexOf=function(I,L,Q){return f(this,I,L,Q,!0)};k.prototype.lastIndexOf=function(I,L,Q){return f(this,I,L,Q,!1)};k.prototype.write=function(I,L,Q,Z){if(void 0===L)Z="utf8",Q=this.length,L=0;else if(void 0===Q&&"string"===typeof L)Z=
L,Q=this.length,L=0;else if(isFinite(L))L>>>=0,isFinite(Q)?(Q>>>=0,void 0===Z&&(Z="utf8")):(Z=Q,Q=void 0);else throw Error("Buffer.write(string, encoding, offset[, length]) is no longer supported");var ba=this.length-L;if(void 0===Q||Q>ba)Q=ba;if(0<I.length&&(0>Q||0>L)||L>this.length)throw new RangeError("Attempt to write outside buffer bounds");Z||(Z="utf8");for(ba=!1;;)switch(Z){case "hex":a:{L=Number(L)||0;Z=this.length-L;Q?(Q=Number(Q),Q>Z&&(Q=Z)):Q=Z;Z=I.length;Q>Z/2&&(Q=Z/2);for(Z=0;Z<Q;++Z){ba=
parseInt(I.substr(2*Z,2),16);if(ba!==ba){I=Z;break a}this[L+Z]=ba}I=Z}return I;case "utf8":case "utf-8":return y(D(I,this.length-L),this,L,Q);case "ascii":return y(C(I),this,L,Q);case "latin1":case "binary":return y(C(I),this,L,Q);case "base64":return y(v(I),this,L,Q);case "ucs2":case "ucs-2":case "utf16le":case "utf-16le":Z=I;ba=this.length-L;for(var V=[],S=0;S<Z.length&&!(0>(ba-=2));++S){var T=Z.charCodeAt(S);I=T>>8;T%=256;V.push(T);V.push(I)}return y(V,this,L,Q);default:if(ba)throw new TypeError("Unknown encoding: "+
Z);Z=(""+Z).toLowerCase();ba=!0}};k.prototype.toJSON=function(){return{type:"Buffer",data:Array.prototype.slice.call(this._arr||this,0)}};var H=4096;k.prototype.slice=function(I,L){var Q=this.length;I=~~I;L=void 0===L?Q:~~L;0>I?(I+=Q,0>I&&(I=0)):I>Q&&(I=Q);0>L?(L+=Q,0>L&&(L=0)):L>Q&&(L=Q);L<I&&(L=I);I=this.subarray(I,L);I.__proto__=k.prototype;return I};k.prototype.readUIntLE=function(I,L,Q){I>>>=0;L>>>=0;Q||w(I,L,this.length);Q=this[I];for(var Z=1,ba=0;++ba<L&&(Z*=256);)Q+=this[I+ba]*Z;return Q};
k.prototype.readUIntBE=function(I,L,Q){I>>>=0;L>>>=0;Q||w(I,L,this.length);Q=this[I+--L];for(var Z=1;0<L&&(Z*=256);)Q+=this[I+--L]*Z;return Q};k.prototype.readUInt8=function(I,L){I>>>=0;L||w(I,1,this.length);return this[I]};k.prototype.readUInt16LE=function(I,L){I>>>=0;L||w(I,2,this.length);return this[I]|this[I+1]<<8};k.prototype.readUInt16BE=function(I,L){I>>>=0;L||w(I,2,this.length);return this[I]<<8|this[I+1]};k.prototype.readUInt32LE=function(I,L){I>>>=0;L||w(I,4,this.length);return(this[I]|
this[I+1]<<8|this[I+2]<<16)+16777216*this[I+3]};k.prototype.readUInt32BE=function(I,L){I>>>=0;L||w(I,4,this.length);return 16777216*this[I]+(this[I+1]<<16|this[I+2]<<8|this[I+3])};k.prototype.readIntLE=function(I,L,Q){I>>>=0;L>>>=0;Q||w(I,L,this.length);Q=this[I];for(var Z=1,ba=0;++ba<L&&(Z*=256);)Q+=this[I+ba]*Z;Q>=128*Z&&(Q-=Math.pow(2,8*L));return Q};k.prototype.readIntBE=function(I,L,Q){I>>>=0;L>>>=0;Q||w(I,L,this.length);Q=L;for(var Z=1,ba=this[I+--Q];0<Q&&(Z*=256);)ba+=this[I+--Q]*Z;ba>=128*
Z&&(ba-=Math.pow(2,8*L));return ba};k.prototype.readInt8=function(I,L){I>>>=0;L||w(I,1,this.length);return this[I]&128?-1*(255-this[I]+1):this[I]};k.prototype.readInt16LE=function(I,L){I>>>=0;L||w(I,2,this.length);I=this[I]|this[I+1]<<8;return I&32768?I|4294901760:I};k.prototype.readInt16BE=function(I,L){I>>>=0;L||w(I,2,this.length);I=this[I+1]|this[I]<<8;return I&32768?I|4294901760:I};k.prototype.readInt32LE=function(I,L){I>>>=0;L||w(I,4,this.length);return this[I]|this[I+1]<<8|this[I+2]<<16|this[I+
3]<<24};k.prototype.readInt32BE=function(I,L){I>>>=0;L||w(I,4,this.length);return this[I]<<24|this[I+1]<<16|this[I+2]<<8|this[I+3]};k.prototype.readFloatLE=function(I,L){I>>>=0;L||w(I,4,this.length);return K.read(this,I,!0,23,4)};k.prototype.readFloatBE=function(I,L){I>>>=0;L||w(I,4,this.length);return K.read(this,I,!1,23,4)};k.prototype.readDoubleLE=function(I,L){I>>>=0;L||w(I,8,this.length);return K.read(this,I,!0,52,8)};k.prototype.readDoubleBE=function(I,L){I>>>=0;L||w(I,8,this.length);return K.read(this,
I,!1,52,8)};k.prototype.writeUIntLE=function(I,L,Q,Z){I=+I;L>>>=0;Q>>>=0;Z||x(this,I,L,Q,Math.pow(2,8*Q)-1,0);Z=1;var ba=0;for(this[L]=I&255;++ba<Q&&(Z*=256);)this[L+ba]=I/Z&255;return L+Q};k.prototype.writeUIntBE=function(I,L,Q,Z){I=+I;L>>>=0;Q>>>=0;Z||x(this,I,L,Q,Math.pow(2,8*Q)-1,0);Z=Q-1;var ba=1;for(this[L+Z]=I&255;0<=--Z&&(ba*=256);)this[L+Z]=I/ba&255;return L+Q};k.prototype.writeUInt8=function(I,L,Q){I=+I;L>>>=0;Q||x(this,I,L,1,255,0);this[L]=I&255;return L+1};k.prototype.writeUInt16LE=function(I,
L,Q){I=+I;L>>>=0;Q||x(this,I,L,2,65535,0);this[L]=I&255;this[L+1]=I>>>8;return L+2};k.prototype.writeUInt16BE=function(I,L,Q){I=+I;L>>>=0;Q||x(this,I,L,2,65535,0);this[L]=I>>>8;this[L+1]=I&255;return L+2};k.prototype.writeUInt32LE=function(I,L,Q){I=+I;L>>>=0;Q||x(this,I,L,4,4294967295,0);this[L+3]=I>>>24;this[L+2]=I>>>16;this[L+1]=I>>>8;this[L]=I&255;return L+4};k.prototype.writeUInt32BE=function(I,L,Q){I=+I;L>>>=0;Q||x(this,I,L,4,4294967295,0);this[L]=I>>>24;this[L+1]=I>>>16;this[L+2]=I>>>8;this[L+
3]=I&255;return L+4};k.prototype.writeIntLE=function(I,L,Q,Z){I=+I;L>>>=0;Z||(Z=Math.pow(2,8*Q-1),x(this,I,L,Q,Z-1,-Z));Z=0;var ba=1,V=0;for(this[L]=I&255;++Z<Q&&(ba*=256);)0>I&&0===V&&0!==this[L+Z-1]&&(V=1),this[L+Z]=(I/ba>>0)-V&255;return L+Q};k.prototype.writeIntBE=function(I,L,Q,Z){I=+I;L>>>=0;Z||(Z=Math.pow(2,8*Q-1),x(this,I,L,Q,Z-1,-Z));Z=Q-1;var ba=1,V=0;for(this[L+Z]=I&255;0<=--Z&&(ba*=256);)0>I&&0===V&&0!==this[L+Z+1]&&(V=1),this[L+Z]=(I/ba>>0)-V&255;return L+Q};k.prototype.writeInt8=function(I,
L,Q){I=+I;L>>>=0;Q||x(this,I,L,1,127,-128);0>I&&(I=255+I+1);this[L]=I&255;return L+1};k.prototype.writeInt16LE=function(I,L,Q){I=+I;L>>>=0;Q||x(this,I,L,2,32767,-32768);this[L]=I&255;this[L+1]=I>>>8;return L+2};k.prototype.writeInt16BE=function(I,L,Q){I=+I;L>>>=0;Q||x(this,I,L,2,32767,-32768);this[L]=I>>>8;this[L+1]=I&255;return L+2};k.prototype.writeInt32LE=function(I,L,Q){I=+I;L>>>=0;Q||x(this,I,L,4,2147483647,-2147483648);this[L]=I&255;this[L+1]=I>>>8;this[L+2]=I>>>16;this[L+3]=I>>>24;return L+
4};k.prototype.writeInt32BE=function(I,L,Q){I=+I;L>>>=0;Q||x(this,I,L,4,2147483647,-2147483648);0>I&&(I=4294967295+I+1);this[L]=I>>>24;this[L+1]=I>>>16;this[L+2]=I>>>8;this[L+3]=I&255;return L+4};k.prototype.writeFloatLE=function(I,L,Q){return B(this,I,L,!0,Q)};k.prototype.writeFloatBE=function(I,L,Q){return B(this,I,L,!1,Q)};k.prototype.writeDoubleLE=function(I,L,Q){return A(this,I,L,!0,Q)};k.prototype.writeDoubleBE=function(I,L,Q){return A(this,I,L,!1,Q)};k.prototype.copy=function(I,L,Q,Z){if(!k.isBuffer(I))throw new TypeError("argument should be a Buffer");
Q||(Q=0);Z||0===Z||(Z=this.length);L>=I.length&&(L=I.length);L||(L=0);0<Z&&Z<Q&&(Z=Q);if(Z===Q||0===I.length||0===this.length)return 0;if(0>L)throw new RangeError("targetStart out of bounds");if(0>Q||Q>=this.length)throw new RangeError("Index out of range");if(0>Z)throw new RangeError("sourceEnd out of bounds");Z>this.length&&(Z=this.length);I.length-L<Z-Q&&(Z=I.length-L+Q);var ba=Z-Q;if(this===I&&"function"===typeof Uint8Array.prototype.copyWithin)this.copyWithin(L,Q,Z);else if(this===I&&Q<L&&L<
Z)for(Z=ba-1;0<=Z;--Z)I[Z+L]=this[Z+Q];else Uint8Array.prototype.set.call(I,this.subarray(Q,Z),L);return ba};k.prototype.fill=function(I,L,Q,Z){if("string"===typeof I){"string"===typeof L?(Z=L,L=0,Q=this.length):"string"===typeof Q&&(Z=Q,Q=this.length);if(void 0!==Z&&"string"!==typeof Z)throw new TypeError("encoding must be a string");if("string"===typeof Z&&!k.isEncoding(Z))throw new TypeError("Unknown encoding: "+Z);if(1===I.length){var ba=I.charCodeAt(0);if("utf8"===Z&&128>ba||"latin1"===Z)I=ba}}else"number"===
typeof I&&(I&=255);if(0>L||this.length<L||this.length<Q)throw new RangeError("Out of range index");if(Q<=L)return this;L>>>=0;Q=void 0===Q?this.length:Q>>>0;I||(I=0);if("number"===typeof I)for(Z=L;Z<Q;++Z)this[Z]=I;else{ba=k.isBuffer(I)?I:k.from(I,Z);var V=ba.length;if(0===V)throw new TypeError('The value "'+I+'" is invalid for argument "value"');for(Z=0;Z<Q-L;++Z)this[Z+L]=ba[Z%V]}return this};var O=/[^+/0-9A-Za-z-_]/g}).call(this)}).call(this,b("buffer").Buffer)},{"base64-js":86,buffer:117,ieee754:445}],
118:[function(b,N,G){function p(r){return[Math.min(r[0],r[1]),Math.max(r[0],r[1])]}function n(r,l){return r[0]-l[0]||r[1]-l[1]}function k(r,l,c){return l in r?r[l]:c}var m=b("./lib/monotone"),a=b("./lib/triangulation"),g=b("./lib/delaunay"),h=b("./lib/filter");N.exports=function(r,l,c){Array.isArray(l)?(c=c||{},l=l||[]):(c=l||{},l=[]);var d=!!k(c,"delaunay",!0),e=!!k(c,"interior",!0),f=!!k(c,"exterior",!0);c=!!k(c,"infinity",!1);if(!e&&!f||0===r.length)return[];var q=m(r,l);if(d||e!==f||c){l=a(r.length,
l.map(p).sort(n));for(var t=0;t<q.length;++t){var w=q[t];l.addTriangle(w[0],w[1],w[2])}d&&g(r,l);return f?e?c?h(l,0,c):l.cells():h(l,1,c):h(l,-1)}return q}},{"./lib/delaunay":119,"./lib/filter":120,"./lib/monotone":121,"./lib/triangulation":122}],119:[function(b,N,G){function p(k,m,a,g,h,r){var l=m.opposite(g,h);if(!(0>l)){if(h<g){var c=g;g=h;h=c;c=r;r=l;l=c}m.isConstraint(g,h)||0>n(k[g],k[h],k[r],k[l])&&a.push(g,h)}}var n=b("robust-in-sphere")[4];b("binary-search-bounds");N.exports=function(k,m){for(var a=
[],g=k.length,h=m.stars,r=0;r<g;++r)for(var l=h[r],c=1;c<l.length;c+=2){var d=l[c];if(!(d<r||m.isConstraint(r,d))){for(var e=l[c-1],f=-1,q=1;q<l.length;q+=2)if(l[q-1]===d){f=l[q];break}0>f||0>n(k[r],k[d],k[e],k[f])&&a.push(r,d)}}for(;0<a.length;){d=a.pop();r=a.pop();f=e=-1;l=h[r];for(g=1;g<l.length;g+=2)c=l[g-1],q=l[g],c===d?f=q:q===d&&(e=c);0>e||0>f||0<=n(k[r],k[d],k[e],k[f])||(m.flip(r,d),p(k,m,a,e,r,f),p(k,m,a,r,f,e),p(k,m,a,f,d,e),p(k,m,a,d,e,f))}}},{"binary-search-bounds":103,"robust-in-sphere":546}],
120:[function(b,N,G){function p(m,a,g,h,r,l,c){this.cells=m;this.neighbor=a;this.flags=h;this.constraint=g;this.active=r;this.next=l;this.boundary=c}function n(m,a){return m[0]-a[0]||m[1]-a[1]||m[2]-a[2]}var k=b("binary-search-bounds");N.exports=function(m,a,g){for(var h=m.cells(),r=h.length,l=0;l<r;++l){var c=h[l],d=c[0],e=c[1],f=c[2];e<f?e<d&&(c[0]=e,c[1]=f,c[2]=d):f<d&&(c[0]=f,c[1]=d,c[2]=e)}h.sort(n);var q=Array(r);for(l=0;l<q.length;++l)q[l]=0;var t=[],w=[],x=Array(3*r),z=Array(3*r),B=null;g&&
(B=[]);f=new p(h,x,z,q,t,w,B);for(l=0;l<r;++l){c=h[l];for(var A=0;3>A;++A){d=c[A];e=c[(A+1)%3];var D=x[3*l+A]=f.locate(e,d,m.opposite(e,d)),C=z[3*l+A]=m.isConstraint(d,e);0>D&&(C?w.push(l):(t.push(l),q[l]=1),g&&B.push([e,d,-1]))}}if(0===a)return g?f.cells.concat(f.boundary):f.cells;r=1;l=f.active;c=f.next;m=f.flags;h=f.cells;d=f.constraint;for(e=f.neighbor;0<l.length||0<c.length;){for(;0<l.length;)if(q=l.pop(),m[q]!==-r)for(m[q]=r,t=0;3>t;++t)w=e[3*q+t],0<=w&&0===m[w]&&(d[3*q+t]?c.push(w):(l.push(w),
m[w]=r));q=c;c=l;l=q;c.length=0;r=-r}for(l=r=0;l<h.length;++l)m[l]===a&&(h[r++]=h[l]);h.length=r;return g?h.concat(f.boundary):h};p.prototype.locate=function(){var m=[0,0,0];return function(a,g,h){var r=a,l=g,c=h;g<h?g<a&&(r=g,l=h,c=a):h<a&&(r=h,l=a,c=g);if(0>r)return-1;m[0]=r;m[1]=l;m[2]=c;return k.eq(this.cells,m,n)}}()},{"binary-search-bounds":103}],121:[function(b,N,G){function p(r,l,c,d,e){this.a=r;this.b=l;this.idx=c;this.lowerIds=d;this.upperIds=e}function n(r,l,c,d){this.a=r;this.b=l;this.type=
c;this.idx=d}function k(r,l){var c=r.a[0]-l.a[0]||r.a[1]-l.a[1]||r.type-l.type;return c||0!==r.type&&(c=h(r.a,r.b,l.b))?c:r.idx-l.idx}function m(r,l){return h(r.a,r.b,l)}function a(r,l){var c;return(c=r.a[0]<l.a[0]?h(r.a,r.b,l.a):h(l.b,l.a,r.a))?c:(c=l.b[0]<r.b[0]?h(r.a,r.b,l.b):h(l.b,l.a,r.b))||r.idx-l.idx}var g=b("binary-search-bounds"),h=b("robust-orientation")[3];N.exports=function(r,l){for(var c=r.length,d=l.length,e=[],f=0;f<c;++f)e.push(new n(r[f],null,0,f));for(f=0;f<d;++f){var q=l[f];c=r[q[0]];
q=r[q[1]];c[0]<q[0]?e.push(new n(c,q,2,f),new n(q,c,1,f)):c[0]>q[0]&&e.push(new n(q,c,2,f),new n(c,q,1,f))}e.sort(k);f=e[0].a[0]-(1+Math.abs(e[0].a[0]))*Math.pow(2,-52);l=[new p([f,1],[f,0],-1,[],[],[],[])];d=[];f=0;for(c=e.length;f<c;++f){var t=e[f];q=t.type;if(0===q){q=d;var w=l,x=r,z=t.a;t=t.idx;for(var B=g.lt(w,z,m),A=g.gt(w,z,m);B<A;++B){for(var D=w[B],C=D.lowerIds,v=C.length;1<v&&0<h(x[C[v-2]],x[C[v-1]],z);)q.push([C[v-1],C[v-2],t]),--v;C.length=v;C.push(t);D=D.upperIds;for(v=D.length;1<v&&
0>h(x[D[v-2]],x[D[v-1]],z);)q.push([D[v-2],D[v-1],t]),--v;D.length=v;D.push(t)}}else 2===q?(q=l,w=t,x=g.le(q,w,a),z=q[x],t=z.upperIds,A=t[t.length-1],z.upperIds=[A],q.splice(x+1,0,new p(w.a,w.b,w.idx,[A],t))):(q=l,w=t,x=w.a,w.a=w.b,w.b=x,w=g.eq(q,w,a),q[w-1].upperIds=q[w].upperIds,q.splice(w,1))}return d}},{"binary-search-bounds":103,"robust-orientation":548}],122:[function(b,N,G){function p(m,a){this.stars=m;this.edges=a}function n(m,a,g){for(var h=1,r=m.length;h<r;h+=2)if(m[h-1]===a&&m[h]===g){m[h-
1]=m[r-2];m[h]=m[r-1];m.length=r-2;break}}var k=b("binary-search-bounds");N.exports=function(m,a){for(var g=Array(m),h=0;h<m;++h)g[h]=[];return new p(g,a)};b=p.prototype;b.isConstraint=function(){function m(g,h){return g[0]-h[0]||g[1]-h[1]}var a=[0,0];return function(g,h){a[0]=Math.min(g,h);a[1]=Math.max(g,h);return 0<=k.eq(this.edges,a,m)}}();b.removeTriangle=function(m,a,g){var h=this.stars;n(h[m],a,g);n(h[a],g,m);n(h[g],m,a)};b.addTriangle=function(m,a,g){var h=this.stars;h[m].push(a,g);h[a].push(g,
m);h[g].push(m,a)};b.opposite=function(m,a){a=this.stars[a];for(var g=1,h=a.length;g<h;g+=2)if(a[g]===m)return a[g-1];return-1};b.flip=function(m,a){var g=this.opposite(m,a),h=this.opposite(a,m);this.removeTriangle(m,a,g);this.removeTriangle(a,m,h);this.addTriangle(m,h,g);this.addTriangle(a,g,h)};b.edges=function(){for(var m=this.stars,a=[],g=0,h=m.length;g<h;++g)for(var r=m[g],l=0,c=r.length;l<c;l+=2)a.push([r[l],r[l+1]]);return a};b.cells=function(){for(var m=this.stars,a=[],g=0,h=m.length;g<h;++g)for(var r=
m[g],l=0,c=r.length;l<c;l+=2){var d=r[l],e=r[l+1];g<Math.min(d,e)&&a.push([g,d,e])}return a}},{"binary-search-bounds":103}],123:[function(b,N,G){N.exports=function(p){for(var n=1,k=1;k<p.length;++k)for(var m=0;m<k;++m)if(p[k]<p[m])n=-n;else if(p[m]===p[k])return 0;return n}},{}],124:[function(b,N,G){function p(g,h){for(var r=0,l=g.length,c=0;c<l;++c)r+=g[c]*h[c];return r}function n(g){var h=g.length;if(0===h)return[];for(var r=m([g.length+1,g.length+1],1),l=m([g.length+1],1),c=r[h][h]=0;c<h;++c){for(var d=
0;d<=c;++d)r[d][c]=r[c][d]=2*p(g[c],g[d]);l[c]=p(g[c],g[c])}g=a(r,l);r=0;l=g[h+1];for(c=0;c<l.length;++c)r+=l[c];var e=Array(h);for(c=0;c<h;++c){l=g[c];var f=0;for(d=0;d<l.length;++d)f+=l[d];e[c]=f/r}return e}function k(g){if(0===g.length)return[];for(var h=g[0].length,r=m([h]),l=n(g),c=0;c<g.length;++c)for(var d=0;d<h;++d)r[d]+=g[c][d]*l[c];return r}var m=b("dup"),a=b("robust-linear-solve");k.barycenetric=n;N.exports=k},{dup:185,"robust-linear-solve":547}],125:[function(b,N,G){N.exports=function(n){for(var k=
p(n),m=0,a=0;a<n.length;++a)for(var g=n[a],h=0;h<k.length;++h)m+=Math.pow(g[h]-k[h],2);return Math.sqrt(m/n.length)};var p=b("circumcenter")},{circumcenter:124}],126:[function(b,N,G){N.exports=function(p,n,k){return n<k?p<n?n:p>k?k:p:p<k?k:p>n?n:p}},{}],127:[function(b,N,G){function p(A){A=w(A);return[z(A,-Infinity),z(A,Infinity)]}function n(A){for(var D=Array(A.length),C=0;C<A.length;++C){var v=A[C];D[C]=[z(v[0],-Infinity),z(v[1],-Infinity),z(v[0],Infinity),z(v[1],Infinity)]}return D}function k(A,
D,C){var v=[];e(C,function(y,F){var J=D[y],K=D[F];J[0]!==K[0]&&J[0]!==K[1]&&J[1]!==K[0]&&J[1]!==K[1]&&f(A[J[0]],A[J[1]],A[K[0]],A[K[1]])&&v.push([y,F])});return v}function m(A,D,C,v){var y=[];e(C,v,function(F,J){var K=D[F];if(K[0]!==J&&K[1]!==J){var M=A[J];f(A[K[0]],A[K[1]],M,M)&&y.push([F,J])}});return y}function a(A,D,C,v,y){var F,J=A.map(function(Z){return[q(Z[0]),q(Z[1])]});for(F=0;F<C.length;++F){var K=C[F];var M=K[0];K=K[1];var H=D[M],O=D[K];if(H=B(x(A[H[0]]),x(A[H[1]]),x(A[O[0]]),x(A[O[1]])))O=
A.length,A.push([w(H[0]),w(H[1])]),J.push(H),v.push([M,O],[K,O])}v.sort(function(Z,ba){if(Z[0]!==ba[0])return Z[0]-ba[0];Z=J[Z[1]];ba=J[ba[1]];return t(Z[0],ba[0])||t(Z[1],ba[1])});for(F=v.length-1;0<=F;--F){K=v[F];M=K[0];H=D[M];O=H[0];C=H[1];var I=A[O],L=A[C];0>(I[0]-L[0]||I[1]-L[1])&&(I=O,O=C,C=I);H[0]=O;O=H[1]=K[1];var Q;for(y&&(Q=H[2]);0<F&&v[F-1][0]===M;)K=v[--F],K=K[1],y?D.push([O,K,Q]):D.push([O,K]),O=K;y?D.push([O,C,Q]):D.push([O,C])}return J}function g(A,D,C){C=D.length;for(var v=new d(C),
y=[],F=0;F<D.length;++F){var J=D[F],K=p(J[0]);J=p(J[1]);y.push([z(K[0],-Infinity),z(J[0],-Infinity),z(K[1],Infinity),z(J[1],Infinity)])}e(y,function(M,H){v.link(M,H)});K=!0;D=Array(C);for(F=0;F<C;++F)y=v.find(F),y!==F&&(K=!1,A[y]=[Math.min(A[F][0],A[y][0]),Math.min(A[F][1],A[y][1])]);if(K)return null;for(F=K=0;F<C;++F)y=v.find(F),y===F?(D[F]=K,A[K++]=A[F]):D[F]=-1;A.length=K;for(F=0;F<C;++F)0>D[F]&&(D[F]=D[v.find(F)]);return D}function h(A,D){return A[0]-D[0]||A[1]-D[1]}function r(A,D){var C=A[0]-
D[0]||A[1]-D[1];return C?C:A[2]<D[2]?-1:A[2]>D[2]?1:0}function l(A,D,C){if(0!==A.length){if(D)for(var v=0;v<A.length;++v){var y=A[v],F=D[y[0]],J=D[y[1]];y[0]=Math.min(F,J);y[1]=Math.max(F,J)}else for(v=0;v<A.length;++v)y=A[v],F=y[0],J=y[1],y[0]=Math.min(F,J),y[1]=Math.max(F,J);C?A.sort(r):A.sort(h);for(v=D=1;v<A.length;++v)if(y=A[v-1],F=A[v],F[0]!==y[0]||F[1]!==y[1]||C&&F[2]!==y[2])A[D++]=F;A.length=D}}function c(A,D,C){for(var v=Array(D.length),y=0;y<D.length;++y){var F=D[y],J=A[F[0]];F=A[F[1]];
v[y]=[z(Math.min(J[0],F[0]),-Infinity),z(Math.min(J[1],F[1]),-Infinity),z(Math.max(J[0],F[0]),Infinity),z(Math.max(J[1],F[1]),Infinity)]}y=k(A,D,v);J=n(A);v=m(A,D,v,J);F=a(A,D,y,v,C);A=g(A,F,J);l(D,A,C);return A?!0:0<y.length||0<v.length}N.exports=function(A,D,C){if(C){var v=D;for(var y=Array(D.length),F=0;F<D.length;++F){var J=D[F];y[F]=[J[0],J[1],C[F]]}D=y}F=D;J=!!C;y=g(A,[],n(A));l(F,y,J);for(y=!!y;c(A,D,!!C);)y=!0;if(C&&y)for(v.length=0,F=C.length=0;F<D.length;++F)J=D[F],v.push([J[0],J[1]]),C.push(J[2]);
return y};var d=b("union-find"),e=b("box-intersect"),f=b("robust-segment-intersect"),q=b("big-rat"),t=b("big-rat/cmp"),w=b("big-rat/to-float"),x=b("rat-vec"),z=b("nextafter"),B=b("./lib/rat-seg-intersect")},{"./lib/rat-seg-intersect":128,"big-rat":90,"big-rat/cmp":88,"big-rat/to-float":102,"box-intersect":108,nextafter:484,"rat-vec":532,"robust-segment-intersect":551,"union-find":618}],128:[function(b,N,G){function p(l,c){return m(n(l[0],c[1]),n(l[1],c[0]))}N.exports=function(l,c,d,e){c=g(c,l);var f=
g(e,d);e=p(c,f);if(0===a(e))return null;d=g(l,d);d=p(f,d);d=k(d,e);c=r(c,d);return h(l,c)};var n=b("big-rat/mul"),k=b("big-rat/div"),m=b("big-rat/sub"),a=b("big-rat/sign"),g=b("rat-vec/sub"),h=b("rat-vec/add"),r=b("rat-vec/muls")},{"big-rat/div":89,"big-rat/mul":99,"big-rat/sign":100,"big-rat/sub":101,"rat-vec/add":531,"rat-vec/muls":533,"rat-vec/sub":534}],129:[function(b,N,G){function p(k,m){null==m&&(m=!0);var a=k[0],g=k[1],h=k[2];k=k[3];null==k&&(k=m?1:255);m&&(a*=255,g*=255,h*=255,k*=255);a=
n(a,0,255)&255;g=n(g,0,255)&255;h=n(h,0,255)&255;k=n(k,0,255)&255;return 16777216*a+(g<<16)+(h<<8)+k}var n=b("clamp");N.exports=p;N.exports.to=p;N.exports.from=function(k,m){k=+k;var a=k>>>24,g=(k&16711680)>>>16,h=(k&65280)>>>8;k&=255;return!1===m?[a,g,h,k]:[a/255,g/255,h/255,k/255]}},{clamp:126}],130:[function(b,N,G){N.exports={aliceblue:[240,248,255],antiquewhite:[250,235,215],aqua:[0,255,255],aquamarine:[127,255,212],azure:[240,255,255],beige:[245,245,220],bisque:[255,228,196],black:[0,0,0],blanchedalmond:[255,
235,205],blue:[0,0,255],blueviolet:[138,43,226],brown:[165,42,42],burlywood:[222,184,135],cadetblue:[95,158,160],chartreuse:[127,255,0],chocolate:[210,105,30],coral:[255,127,80],cornflowerblue:[100,149,237],cornsilk:[255,248,220],crimson:[220,20,60],cyan:[0,255,255],darkblue:[0,0,139],darkcyan:[0,139,139],darkgoldenrod:[184,134,11],darkgray:[169,169,169],darkgreen:[0,100,0],darkgrey:[169,169,169],darkkhaki:[189,183,107],darkmagenta:[139,0,139],darkolivegreen:[85,107,47],darkorange:[255,140,0],darkorchid:[153,
50,204],darkred:[139,0,0],darksalmon:[233,150,122],darkseagreen:[143,188,143],darkslateblue:[72,61,139],darkslategray:[47,79,79],darkslategrey:[47,79,79],darkturquoise:[0,206,209],darkviolet:[148,0,211],deeppink:[255,20,147],deepskyblue:[0,191,255],dimgray:[105,105,105],dimgrey:[105,105,105],dodgerblue:[30,144,255],firebrick:[178,34,34],floralwhite:[255,250,240],forestgreen:[34,139,34],fuchsia:[255,0,255],gainsboro:[220,220,220],ghostwhite:[248,248,255],gold:[255,215,0],goldenrod:[218,165,32],gray:[128,
128,128],green:[0,128,0],greenyellow:[173,255,47],grey:[128,128,128],honeydew:[240,255,240],hotpink:[255,105,180],indianred:[205,92,92],indigo:[75,0,130],ivory:[255,255,240],khaki:[240,230,140],lavender:[230,230,250],lavenderblush:[255,240,245],lawngreen:[124,252,0],lemonchiffon:[255,250,205],lightblue:[173,216,230],lightcoral:[240,128,128],lightcyan:[224,255,255],lightgoldenrodyellow:[250,250,210],lightgray:[211,211,211],lightgreen:[144,238,144],lightgrey:[211,211,211],lightpink:[255,182,193],lightsalmon:[255,
160,122],lightseagreen:[32,178,170],lightskyblue:[135,206,250],lightslategray:[119,136,153],lightslategrey:[119,136,153],lightsteelblue:[176,196,222],lightyellow:[255,255,224],lime:[0,255,0],limegreen:[50,205,50],linen:[250,240,230],magenta:[255,0,255],maroon:[128,0,0],mediumaquamarine:[102,205,170],mediumblue:[0,0,205],mediumorchid:[186,85,211],mediumpurple:[147,112,219],mediumseagreen:[60,179,113],mediumslateblue:[123,104,238],mediumspringgreen:[0,250,154],mediumturquoise:[72,209,204],mediumvioletred:[199,
21,133],midnightblue:[25,25,112],mintcream:[245,255,250],mistyrose:[255,228,225],moccasin:[255,228,181],navajowhite:[255,222,173],navy:[0,0,128],oldlace:[253,245,230],olive:[128,128,0],olivedrab:[107,142,35],orange:[255,165,0],orangered:[255,69,0],orchid:[218,112,214],palegoldenrod:[238,232,170],palegreen:[152,251,152],paleturquoise:[175,238,238],palevioletred:[219,112,147],papayawhip:[255,239,213],peachpuff:[255,218,185],peru:[205,133,63],pink:[255,192,203],plum:[221,160,221],powderblue:[176,224,
230],purple:[128,0,128],rebeccapurple:[102,51,153],red:[255,0,0],rosybrown:[188,143,143],royalblue:[65,105,225],saddlebrown:[139,69,19],salmon:[250,128,114],sandybrown:[244,164,96],seagreen:[46,139,87],seashell:[255,245,238],sienna:[160,82,45],silver:[192,192,192],skyblue:[135,206,235],slateblue:[106,90,205],slategray:[112,128,144],slategrey:[112,128,144],snow:[255,250,250],springgreen:[0,255,127],steelblue:[70,130,180],tan:[210,180,140],teal:[0,128,128],thistle:[216,191,216],tomato:[255,99,71],turquoise:[64,
224,208],violet:[238,130,238],wheat:[245,222,179],white:[255,255,255],whitesmoke:[245,245,245],yellow:[255,255,0],yellowgreen:[154,205,50]}},{}],131:[function(b,N,G){var p=b("color-rgba"),n=b("clamp"),k=b("dtype");N.exports=function(m,a){"float"!==a&&a||(a="array");"uint"===a&&(a="uint8");"uint_clamped"===a&&(a="uint8_clamped");var g=new (k(a))(4);a="uint8"!==a&&"uint8_clamped"!==a;m.length&&"string"!==typeof m||(m=p(m),m[0]/=255,m[1]/=255,m[2]/=255);var h=m;h=h instanceof Uint8Array||h instanceof
Uint8ClampedArray?!0:Array.isArray(h)&&(1<h[0]||0===h[0])&&(1<h[1]||0===h[1])&&(1<h[2]||0===h[2])&&(!h[3]||1<h[3])?!0:!1;if(h)return g[0]=m[0],g[1]=m[1],g[2]=m[2],g[3]=null!=m[3]?m[3]:255,a&&(g[0]/=255,g[1]/=255,g[2]/=255,g[3]/=255),g;a?(g[0]=m[0],g[1]=m[1],g[2]=m[2],g[3]=null!=m[3]?m[3]:1):(g[0]=n(Math.floor(255*m[0]),0,255),g[1]=n(Math.floor(255*m[1]),0,255),g[2]=n(Math.floor(255*m[2]),0,255),g[3]=null==m[3]?255:n(Math.floor(255*m[3]),0,255));return g}},{clamp:126,"color-rgba":133,dtype:184}],132:[function(b,
N,G){(function(p){(function(){var n=b("color-name"),k=b("is-plain-obj"),m=b("defined");N.exports=function(g){var h,r=[],l=1;if("string"===typeof g)if(n[g]){r=n[g].slice();var c="rgb"}else if("transparent"===g)l=0,c="rgb",r=[0,0,0];else if(/^#[A-Fa-f0-9]+$/.test(g)){var d=g.slice(1),e=d.length;l=1;4>=e?(r=[parseInt(d[0]+d[0],16),parseInt(d[1]+d[1],16),parseInt(d[2]+d[2],16)],4===e&&(l=parseInt(d[3]+d[3],16)/255)):(r=[parseInt(d[0]+d[1],16),parseInt(d[2]+d[3],16),parseInt(d[4]+d[5],16)],8===e&&(l=parseInt(d[6]+
d[7],16)/255));r[0]||(r[0]=0);r[1]||(r[1]=0);r[2]||(r[2]=0);c="rgb"}else(h=/^((?:rgb|hs[lvb]|hwb|cmyk?|xy[zy]|gray|lab|lchu?v?|[ly]uv|lms)a?)\s*\(([^\)]*)\)/.exec(g))?(g=h[1],l="rgb"===g,c=d=g.replace(/a$/,""),e="cmyk"===d?4:"gray"===d?1:3,r=h[2].trim().split(/\s*,\s*/).map(function(f,q){if(/%$/.test(f)){if(q===e)return parseFloat(f)/100;if("rgb"===d)return 255*parseFloat(f)/100}else if("h"===d[q]&&!/deg$/.test(f)&&void 0!==a[f])return a[f];return parseFloat(f)}),g===d&&r.push(1),l=l?1:void 0===r[e]?
1:r[e],r=r.slice(0,e)):10<g.length&&/[0-9](?:\s|\/)/.test(g)&&(r=g.match(/([0-9]+)/g).map(function(f){return parseFloat(f)}),c=g.match(/([a-z])/ig).join("").toLowerCase());else if(!isNaN(g))c="rgb",r=[g>>>16,(g&65280)>>>8,g&255];else if(k(g))h=m(g.r,g.red,g.R,null),null!==h?(c="rgb",r=[h,m(g.g,g.green,g.G),m(g.b,g.blue,g.B)]):(c="hsl",r=[m(g.h,g.hue,g.H),m(g.s,g.saturation,g.S),m(g.l,g.lightness,g.L,g.b,g.brightness)]),l=m(g.a,g.alpha,g.opacity,1),null!=g.opacity&&(l/=100);else if(Array.isArray(g)||
p.ArrayBuffer&&ArrayBuffer.isView&&ArrayBuffer.isView(g))r=[g[0],g[1],g[2]],c="rgb",l=4===g.length?g[3]:1;return{space:c,values:r,alpha:l}};var a={red:0,orange:60,yellow:120,green:180,blue:240,purple:300}}).call(this)}).call(this,"undefined"!==typeof xe?xe:"undefined"!==typeof self?self:"undefined"!==typeof window?window:{})},{"color-name":130,defined:179,"is-plain-obj":457}],133:[function(b,N,G){var p=b("color-parse"),n=b("color-space/hsl"),k=b("clamp");N.exports=function(m){var a=p(m);if(!a.space)return[];
m=Array(3);m[0]=k(a.values[0],0,255);m[1]=k(a.values[1],0,255);m[2]=k(a.values[2],0,255);"h"===a.space[0]&&(m=n.rgb(m));m.push(k(a.alpha,0,1));return m}},{clamp:126,"color-parse":132,"color-space/hsl":134}],134:[function(b,N,G){b=b("./rgb");N.exports={name:"hsl",min:[0,0,0],max:[360,100,100],channel:["hue","saturation","lightness"],alias:["HSL"],rgb:function(p){var n=p[0]/360,k=p[1]/100;p=p[2]/100;if(0===k){var m=255*p;return[m,m,m]}k=.5>p?p*(1+k):p+k-p*k;p=2*p-k;var a=[0,0,0];for(var g=0;3>g;g++)m=
n+1/3*-(g-1),0>m?m++:1<m&&m--,m=1>6*m?p+6*(k-p)*m:1>2*m?k:2>3*m?p+(k-p)*(2/3-m)*6:p,a[g]=255*m;return a}};b.hsl=function(p){var n=p[0]/255,k=p[1]/255,m=p[2]/255;p=Math.min(n,k,m);var a=Math.max(n,k,m),g=a-p,h;a===p?h=0:n===a?h=(k-m)/g:k===a?h=2+(m-n)/g:m===a&&(h=4+(n-k)/g);h=Math.min(60*h,360);0>h&&(h+=360);n=(p+a)/2;return[h,100*(a===p?0:.5>=n?g/(a+p):g/(2-a-p)),100*n]}},{"./rgb":135}],135:[function(b,N,G){N.exports={name:"rgb",min:[0,0,0],max:[255,255,255],channel:["red","green","blue"],alias:["RGB"]}},
{}],136:[function(b,N,G){N.exports={jet:[{index:0,rgb:[0,0,131]},{index:.125,rgb:[0,60,170]},{index:.375,rgb:[5,255,255]},{index:.625,rgb:[255,255,0]},{index:.875,rgb:[250,0,0]},{index:1,rgb:[128,0,0]}],hsv:[{index:0,rgb:[255,0,0]},{index:.169,rgb:[253,255,2]},{index:.173,rgb:[247,255,2]},{index:.337,rgb:[0,252,4]},{index:.341,rgb:[0,252,10]},{index:.506,rgb:[1,249,255]},{index:.671,rgb:[2,0,253]},{index:.675,rgb:[8,0,253]},{index:.839,rgb:[255,0,251]},{index:.843,rgb:[255,0,245]},{index:1,rgb:[255,
0,6]}],hot:[{index:0,rgb:[0,0,0]},{index:.3,rgb:[230,0,0]},{index:.6,rgb:[255,210,0]},{index:1,rgb:[255,255,255]}],spring:[{index:0,rgb:[255,0,255]},{index:1,rgb:[255,255,0]}],summer:[{index:0,rgb:[0,128,102]},{index:1,rgb:[255,255,102]}],autumn:[{index:0,rgb:[255,0,0]},{index:1,rgb:[255,255,0]}],winter:[{index:0,rgb:[0,0,255]},{index:1,rgb:[0,255,128]}],bone:[{index:0,rgb:[0,0,0]},{index:.376,rgb:[84,84,116]},{index:.753,rgb:[169,200,200]},{index:1,rgb:[255,255,255]}],copper:[{index:0,rgb:[0,0,0]},
{index:.804,rgb:[255,160,102]},{index:1,rgb:[255,199,127]}],greys:[{index:0,rgb:[0,0,0]},{index:1,rgb:[255,255,255]}],yignbu:[{index:0,rgb:[8,29,88]},{index:.125,rgb:[37,52,148]},{index:.25,rgb:[34,94,168]},{index:.375,rgb:[29,145,192]},{index:.5,rgb:[65,182,196]},{index:.625,rgb:[127,205,187]},{index:.75,rgb:[199,233,180]},{index:.875,rgb:[237,248,217]},{index:1,rgb:[255,255,217]}],greens:[{index:0,rgb:[0,68,27]},{index:.125,rgb:[0,109,44]},{index:.25,rgb:[35,139,69]},{index:.375,rgb:[65,171,93]},
{index:.5,rgb:[116,196,118]},{index:.625,rgb:[161,217,155]},{index:.75,rgb:[199,233,192]},{index:.875,rgb:[229,245,224]},{index:1,rgb:[247,252,245]}],yiorrd:[{index:0,rgb:[128,0,38]},{index:.125,rgb:[189,0,38]},{index:.25,rgb:[227,26,28]},{index:.375,rgb:[252,78,42]},{index:.5,rgb:[253,141,60]},{index:.625,rgb:[254,178,76]},{index:.75,rgb:[254,217,118]},{index:.875,rgb:[255,237,160]},{index:1,rgb:[255,255,204]}],bluered:[{index:0,rgb:[0,0,255]},{index:1,rgb:[255,0,0]}],rdbu:[{index:0,rgb:[5,10,172]},
{index:.35,rgb:[106,137,247]},{index:.5,rgb:[190,190,190]},{index:.6,rgb:[220,170,132]},{index:.7,rgb:[230,145,90]},{index:1,rgb:[178,10,28]}],picnic:[{index:0,rgb:[0,0,255]},{index:.1,rgb:[51,153,255]},{index:.2,rgb:[102,204,255]},{index:.3,rgb:[153,204,255]},{index:.4,rgb:[204,204,255]},{index:.5,rgb:[255,255,255]},{index:.6,rgb:[255,204,255]},{index:.7,rgb:[255,153,255]},{index:.8,rgb:[255,102,204]},{index:.9,rgb:[255,102,102]},{index:1,rgb:[255,0,0]}],rainbow:[{index:0,rgb:[150,0,90]},{index:.125,
rgb:[0,0,200]},{index:.25,rgb:[0,25,255]},{index:.375,rgb:[0,152,255]},{index:.5,rgb:[44,255,150]},{index:.625,rgb:[151,255,0]},{index:.75,rgb:[255,234,0]},{index:.875,rgb:[255,111,0]},{index:1,rgb:[255,0,0]}],portland:[{index:0,rgb:[12,51,131]},{index:.25,rgb:[10,136,186]},{index:.5,rgb:[242,211,56]},{index:.75,rgb:[242,143,56]},{index:1,rgb:[217,30,30]}],blackbody:[{index:0,rgb:[0,0,0]},{index:.2,rgb:[230,0,0]},{index:.4,rgb:[230,210,0]},{index:.7,rgb:[255,255,255]},{index:1,rgb:[160,200,255]}],
earth:[{index:0,rgb:[0,0,130]},{index:.1,rgb:[0,180,180]},{index:.2,rgb:[40,210,40]},{index:.4,rgb:[230,230,50]},{index:.6,rgb:[120,70,20]},{index:1,rgb:[255,255,255]}],electric:[{index:0,rgb:[0,0,0]},{index:.15,rgb:[30,0,100]},{index:.4,rgb:[120,0,100]},{index:.6,rgb:[160,90,0]},{index:.8,rgb:[230,200,0]},{index:1,rgb:[255,250,220]}],alpha:[{index:0,rgb:[255,255,255,0]},{index:1,rgb:[255,255,255,1]}],viridis:[{index:0,rgb:[68,1,84]},{index:.13,rgb:[71,44,122]},{index:.25,rgb:[59,81,139]},{index:.38,
rgb:[44,113,142]},{index:.5,rgb:[33,144,141]},{index:.63,rgb:[39,173,129]},{index:.75,rgb:[92,200,99]},{index:.88,rgb:[170,220,50]},{index:1,rgb:[253,231,37]}],inferno:[{index:0,rgb:[0,0,4]},{index:.13,rgb:[31,12,72]},{index:.25,rgb:[85,15,109]},{index:.38,rgb:[136,34,106]},{index:.5,rgb:[186,54,85]},{index:.63,rgb:[227,89,51]},{index:.75,rgb:[249,140,10]},{index:.88,rgb:[249,201,50]},{index:1,rgb:[252,255,164]}],magma:[{index:0,rgb:[0,0,4]},{index:.13,rgb:[28,16,68]},{index:.25,rgb:[79,18,123]},
{index:.38,rgb:[129,37,129]},{index:.5,rgb:[181,54,122]},{index:.63,rgb:[229,80,100]},{index:.75,rgb:[251,135,97]},{index:.88,rgb:[254,194,135]},{index:1,rgb:[252,253,191]}],plasma:[{index:0,rgb:[13,8,135]},{index:.13,rgb:[75,3,161]},{index:.25,rgb:[125,3,168]},{index:.38,rgb:[168,34,150]},{index:.5,rgb:[203,70,121]},{index:.63,rgb:[229,107,93]},{index:.75,rgb:[248,148,65]},{index:.88,rgb:[253,195,40]},{index:1,rgb:[240,249,33]}],warm:[{index:0,rgb:[125,0,179]},{index:.13,rgb:[172,0,187]},{index:.25,
rgb:[219,0,170]},{index:.38,rgb:[255,0,130]},{index:.5,rgb:[255,63,74]},{index:.63,rgb:[255,123,0]},{index:.75,rgb:[234,176,0]},{index:.88,rgb:[190,228,0]},{index:1,rgb:[147,255,0]}],cool:[{index:0,rgb:[125,0,179]},{index:.13,rgb:[116,0,218]},{index:.25,rgb:[98,74,237]},{index:.38,rgb:[68,146,231]},{index:.5,rgb:[0,204,197]},{index:.63,rgb:[0,247,146]},{index:.75,rgb:[0,255,88]},{index:.88,rgb:[40,255,8]},{index:1,rgb:[147,255,0]}],"rainbow-soft":[{index:0,rgb:[125,0,179]},{index:.1,rgb:[199,0,180]},
{index:.2,rgb:[255,0,121]},{index:.3,rgb:[255,108,0]},{index:.4,rgb:[222,194,0]},{index:.5,rgb:[150,255,0]},{index:.6,rgb:[0,255,55]},{index:.7,rgb:[0,246,150]},{index:.8,rgb:[50,167,222]},{index:.9,rgb:[103,51,235]},{index:1,rgb:[124,0,186]}],bathymetry:[{index:0,rgb:[40,26,44]},{index:.13,rgb:[59,49,90]},{index:.25,rgb:[64,76,139]},{index:.38,rgb:[63,110,151]},{index:.5,rgb:[72,142,158]},{index:.63,rgb:[85,174,163]},{index:.75,rgb:[120,206,163]},{index:.88,rgb:[187,230,172]},{index:1,rgb:[253,254,
204]}],cdom:[{index:0,rgb:[47,15,62]},{index:.13,rgb:[87,23,86]},{index:.25,rgb:[130,28,99]},{index:.38,rgb:[171,41,96]},{index:.5,rgb:[206,67,86]},{index:.63,rgb:[230,106,84]},{index:.75,rgb:[242,149,103]},{index:.88,rgb:[249,193,135]},{index:1,rgb:[254,237,176]}],chlorophyll:[{index:0,rgb:[18,36,20]},{index:.13,rgb:[25,63,41]},{index:.25,rgb:[24,91,59]},{index:.38,rgb:[13,119,72]},{index:.5,rgb:[18,148,80]},{index:.63,rgb:[80,173,89]},{index:.75,rgb:[132,196,122]},{index:.88,rgb:[175,221,162]},
{index:1,rgb:[215,249,208]}],density:[{index:0,rgb:[54,14,36]},{index:.13,rgb:[89,23,80]},{index:.25,rgb:[110,45,132]},{index:.38,rgb:[120,77,178]},{index:.5,rgb:[120,113,213]},{index:.63,rgb:[115,151,228]},{index:.75,rgb:[134,185,227]},{index:.88,rgb:[177,214,227]},{index:1,rgb:[230,241,241]}],"freesurface-blue":[{index:0,rgb:[30,4,110]},{index:.13,rgb:[47,14,176]},{index:.25,rgb:[41,45,236]},{index:.38,rgb:[25,99,212]},{index:.5,rgb:[68,131,200]},{index:.63,rgb:[114,156,197]},{index:.75,rgb:[157,
181,203]},{index:.88,rgb:[200,208,216]},{index:1,rgb:[241,237,236]}],"freesurface-red":[{index:0,rgb:[60,9,18]},{index:.13,rgb:[100,17,27]},{index:.25,rgb:[142,20,29]},{index:.38,rgb:[177,43,27]},{index:.5,rgb:[192,87,63]},{index:.63,rgb:[205,125,105]},{index:.75,rgb:[216,162,148]},{index:.88,rgb:[227,199,193]},{index:1,rgb:[241,237,236]}],oxygen:[{index:0,rgb:[64,5,5]},{index:.13,rgb:[106,6,15]},{index:.25,rgb:[144,26,7]},{index:.38,rgb:[168,64,3]},{index:.5,rgb:[188,100,4]},{index:.63,rgb:[206,
136,11]},{index:.75,rgb:[220,174,25]},{index:.88,rgb:[231,215,44]},{index:1,rgb:[248,254,105]}],par:[{index:0,rgb:[51,20,24]},{index:.13,rgb:[90,32,35]},{index:.25,rgb:[129,44,34]},{index:.38,rgb:[159,68,25]},{index:.5,rgb:[182,99,19]},{index:.63,rgb:[199,134,22]},{index:.75,rgb:[212,171,35]},{index:.88,rgb:[221,210,54]},{index:1,rgb:[225,253,75]}],phase:[{index:0,rgb:[145,105,18]},{index:.13,rgb:[184,71,38]},{index:.25,rgb:[186,58,115]},{index:.38,rgb:[160,71,185]},{index:.5,rgb:[110,97,218]},{index:.63,
rgb:[50,123,164]},{index:.75,rgb:[31,131,110]},{index:.88,rgb:[77,129,34]},{index:1,rgb:[145,105,18]}],salinity:[{index:0,rgb:[42,24,108]},{index:.13,rgb:[33,50,162]},{index:.25,rgb:[15,90,145]},{index:.38,rgb:[40,118,137]},{index:.5,rgb:[59,146,135]},{index:.63,rgb:[79,175,126]},{index:.75,rgb:[120,203,104]},{index:.88,rgb:[193,221,100]},{index:1,rgb:[253,239,154]}],temperature:[{index:0,rgb:[4,35,51]},{index:.13,rgb:[23,51,122]},{index:.25,rgb:[85,59,157]},{index:.38,rgb:[129,79,143]},{index:.5,
rgb:[175,95,130]},{index:.63,rgb:[222,112,101]},{index:.75,rgb:[249,146,66]},{index:.88,rgb:[249,196,65]},{index:1,rgb:[232,250,91]}],turbidity:[{index:0,rgb:[34,31,27]},{index:.13,rgb:[65,50,41]},{index:.25,rgb:[98,69,52]},{index:.38,rgb:[131,89,57]},{index:.5,rgb:[161,112,59]},{index:.63,rgb:[185,140,66]},{index:.75,rgb:[202,174,88]},{index:.88,rgb:[216,209,126]},{index:1,rgb:[233,246,171]}],"velocity-blue":[{index:0,rgb:[17,32,64]},{index:.13,rgb:[35,52,116]},{index:.25,rgb:[29,81,156]},{index:.38,
rgb:[31,113,162]},{index:.5,rgb:[50,144,169]},{index:.63,rgb:[87,173,176]},{index:.75,rgb:[149,196,189]},{index:.88,rgb:[203,221,211]},{index:1,rgb:[254,251,230]}],"velocity-green":[{index:0,rgb:[23,35,19]},{index:.13,rgb:[24,64,38]},{index:.25,rgb:[11,95,45]},{index:.38,rgb:[39,123,35]},{index:.5,rgb:[95,146,12]},{index:.63,rgb:[152,165,18]},{index:.75,rgb:[201,186,69]},{index:.88,rgb:[233,216,137]},{index:1,rgb:[255,253,205]}],cubehelix:[{index:0,rgb:[0,0,0]},{index:.07,rgb:[22,5,59]},{index:.13,
rgb:[60,4,105]},{index:.2,rgb:[109,1,135]},{index:.27,rgb:[161,0,147]},{index:.33,rgb:[210,2,142]},{index:.4,rgb:[251,11,123]},{index:.47,rgb:[255,29,97]},{index:.53,rgb:[255,54,69]},{index:.6,rgb:[255,85,46]},{index:.67,rgb:[255,120,34]},{index:.73,rgb:[255,157,37]},{index:.8,rgb:[241,191,57]},{index:.87,rgb:[224,220,93]},{index:.93,rgb:[218,241,142]},{index:1,rgb:[227,253,198]}]}},{}],137:[function(b,N,G){function p(g){return[g[0]/255,g[1]/255,g[2]/255,g[3]]}function n(g){for(var h,r="#",l=0;3>
l;++l)h=g[l],h=h.toString(16),r+=("00"+h).substr(h.length);return r}function k(g){return"rgba("+g.join(",")+")"}var m=b("./colorScale"),a=b("lerp");N.exports=function(g){var h,r;g||(g={});var l=(g.nshades||72)-1;var c=g.format||"hex";(h=g.colormap)||(h="jet");if("string"===typeof h){h=h.toLowerCase();if(!m[h])throw Error(h+" not a supported colorscale");var d=m[h]}else if(Array.isArray(h))d=h.slice();else throw Error("unsupported colormap option",h);if(d.length>l+1)throw Error(h+" map requires nshades to be at least size "+
d.length);var e=Array.isArray(g.alpha)?2!==g.alpha.length?[1,1]:g.alpha.slice():"number"===typeof g.alpha?[g.alpha,g.alpha]:[1,1];g=d.map(function(B){return Math.round(B.index*l)});e[0]=Math.min(Math.max(e[0],0),1);e[1]=Math.min(Math.max(e[1],0),1);var f=d.map(function(B,A){B=d[A].index;A=d[A].rgb.slice();if(4===A.length&&0<=A[3]&&1>=A[3])return A;A[3]=e[0]+(e[1]-e[0])*B;return A});var q=[];for(r=0;r<g.length-1;++r){var t=g[r+1]-g[r];h=f[r];var w=f[r+1];for(var x=0;x<t;x++){var z=x/t;q.push([Math.round(a(h[0],
w[0],z)),Math.round(a(h[1],w[1],z)),Math.round(a(h[2],w[2],z)),a(h[3],w[3],z)])}}q.push(d[d.length-1].rgb.concat(e[1]));"hex"===c?q=q.map(n):"rgbaString"===c?q=q.map(k):"float"===c&&(q=q.map(p));return q}},{"./colorScale":136,lerp:460}],138:[function(b,N,G){function p(h,r,l){var c=m(h[0],-r[0]);h=m(h[1],-r[1]);var d=m(l[0],-r[0]);r=m(l[1],-r[1]);c=g(a(c,d),a(h,r));return 0<=c[c.length-1]}N.exports=function(h,r,l,c){var d=n(r,l,c);if(0===d){d=k(n(h,r,l));var e=k(n(h,r,c));return d===e?0===d&&(l=p(h,
r,l),h=p(h,r,c),l!==h)?l?1:-1:0:0===e?0<d?-1:p(h,r,c)?-1:1:0===d?0<e?1:p(h,r,l)?1:-1:k(e-d)}e=n(h,r,l);return 0<e?0<d&&0<n(h,r,c)?1:-1:0>e?0<d||0<n(h,r,c)?1:-1:0<n(h,r,c)?1:p(h,r,l)?1:-1};var n=b("robust-orientation"),k=b("signum"),m=b("two-sum"),a=b("robust-product"),g=b("robust-sum")},{"robust-orientation":548,"robust-product":549,"robust-sum":553,signum:555,"two-sum":605}],139:[function(b,N,G){function p(k,m){return k-m}N.exports=function(k,m){var a=k.length,g=k.length-m.length;if(g)return g;switch(a){case 0:return 0;
case 1:return k[0]-m[0];case 2:return k[0]+k[1]-m[0]-m[1]||n(k[0],k[1])-n(m[0],m[1]);case 3:a=k[0]+k[1];var h=m[0]+m[1];if(g=a+k[2]-(h+m[2]))return g;g=n(k[0],k[1]);var r=n(m[0],m[1]);return n(g,k[2])-n(r,m[2])||n(g+k[2],a)-n(r+m[2],h);case 4:g=k[0];a=k[1];h=k[2];k=k[3];r=m[0];var l=m[1],c=m[2];m=m[3];return g+a+h+k-(r+l+c+m)||n(g,a,h,k)-n(r,l,c,m,r)||n(g+a,g+h,g+k,a+h,a+k,h+k)-n(r+l,r+c,r+m,l+c,l+m,c+m)||n(g+a+h,g+a+k,g+h+k,a+h+k)-n(r+l+c,r+l+m,r+c+m,l+c+m);default:k=k.slice().sort(p);m=m.slice().sort(p);
for(h=0;h<a;++h)if(g=k[h]-m[h])return g;return 0}};var n=Math.min},{}],140:[function(b,N,G){var p=b("compare-cell"),n=b("cell-orientation");N.exports=function(k,m){return p(k,m)||n(k)-n(m)}},{"cell-orientation":123,"compare-cell":139}],141:[function(b,N,G){var p=b("./lib/ch1d"),n=b("./lib/ch2d"),k=b("./lib/chnd");N.exports=function(m){var a=m.length;if(0===a)return[];if(1===a)return[[0]];a=m[0].length;return 0===a?[]:1===a?p(m):2===a?n(m):k(m,a)}},{"./lib/ch1d":142,"./lib/ch2d":143,"./lib/chnd":144}],
142:[function(b,N,G){N.exports=function(p){for(var n=0,k=0,m=1;m<p.length;++m)p[m][0]<p[n][0]&&(n=m),p[m][0]>p[k][0]&&(k=m);return n<k?[[n],[k]]:n>k?[[k],[n]]:[[n]]}},{}],143:[function(b,N,G){N.exports=function(n){n=p(n);var k=n.length;if(2>=k)return[];for(var m=Array(k),a=n[k-1],g=0;g<k;++g){var h=n[g];m[g]=[a,h];a=h}return m};var p=b("monotone-convex-hull-2d")},{"monotone-convex-hull-2d":469}],144:[function(b,N,G){N.exports=function(k,m){try{return p(k,!0)}catch(e){var a=n(k);if(a.length<=m)return[];
m=k.length;for(var g=Array(m),h=0;h<a.length;++h)g[h]=k[a[h]];var r=a.length;for(h=0;h<m;++h)0>a.indexOf(h)&&(g[r++]=k[h]);k=p(g,!0);m=k.length;g=a.length;for(h=0;h<m;++h){r=k[h];for(var l=0;l<r.length;++l){var c=r[l];if(c<g)r[l]=a[c];else{c-=g;for(var d=0;d<g;++d)c>=a[d]&&(c+=1);r[l]=c}}}return k}};var p=b("incremental-convex-hull"),n=b("affine-hull")},{"affine-hull":73,"incremental-convex-hull":446}],145:[function(b,N,G){N.exports={AFG:"afghan",ALA:"\\b\\wland",ALB:"albania",DZA:"algeria",ASM:"^(?\x3d.*americ).*samoa",
AND:"andorra",AGO:"angola",AIA:"anguill?a",ATA:"antarctica",ATG:"antigua",ARG:"argentin",ARM:"armenia",ABW:"^(?!.*bonaire).*\\baruba",AUS:"australia",AUT:"^(?!.*hungary).*austria|\\baustri.*\\bemp",AZE:"azerbaijan",BHS:"bahamas",BHR:"bahrain",BGD:"bangladesh|^(?\x3d.*east).*paki?stan",BRB:"barbados",BLR:"belarus|byelo",BEL:"^(?!.*luxem).*belgium",BLZ:"belize|^(?\x3d.*british).*honduras",BEN:"benin|dahome",BMU:"bermuda",BTN:"bhutan",BOL:"bolivia",BES:"^(?\x3d.*bonaire).*eustatius|^(?\x3d.*carib).*netherlands|\\bbes.?islands",
BIH:"herzegovina|bosnia",BWA:"botswana|bechuana",BVT:"bouvet",BRA:"brazil",IOT:"british.?indian.?ocean",BRN:"brunei",BGR:"bulgaria",BFA:"burkina|\\bfaso|upper.?volta",BDI:"burundi",CPV:"verde",KHM:"cambodia|kampuchea|khmer",CMR:"cameroon",CAN:"canada",CYM:"cayman",CAF:"\\bcentral.african.republic",TCD:"\\bchad",CHL:"\\bchile",CHN:"^(?!.*\\bmac)(?!.*\\bhong)(?!.*\\btai)(?!.*\\brep).*china|^(?\x3d.*peo)(?\x3d.*rep).*china",CXR:"christmas",CCK:"\\bcocos|keeling",COL:"colombia",COM:"comoro",COG:"^(?!.*\\bdem)(?!.*\\bd[\\.]?r)(?!.*kinshasa)(?!.*zaire)(?!.*belg)(?!.*l.opoldville)(?!.*free).*\\bcongo",
COK:"\\bcook",CRI:"costa.?rica",CIV:"ivoire|ivory",HRV:"croatia",CUB:"\\bcuba",CUW:"^(?!.*bonaire).*\\bcura(c|)ao",CYP:"cyprus",CSK:"czechoslovakia",CZE:"^(?\x3d.*rep).*czech|czechia|bohemia",COD:"\\bdem.*congo|congo.*\\bdem|congo.*\\bd[\\.]?r|\\bd[\\.]?r.*congo|belgian.?congo|congo.?free.?state|kinshasa|zaire|l.opoldville|drc|droc|rdc",DNK:"denmark",DJI:"djibouti",DMA:"dominica(?!n)",DOM:"dominican.rep",ECU:"ecuador",EGY:"egypt",SLV:"el.?salvador",GNQ:"guine.*eq|eq.*guine|^(?\x3d.*span).*guinea",
ERI:"eritrea",EST:"estonia",ETH:"ethiopia|abyssinia",FLK:"falkland|malvinas",FRO:"faroe|faeroe",FJI:"fiji",FIN:"finland",FRA:"^(?!.*\\bdep)(?!.*martinique).*france|french.?republic|\\bgaul",GUF:"^(?\x3d.*french).*guiana",PYF:"french.?polynesia|tahiti",ATF:"french.?southern",GAB:"gabon",GMB:"gambia",GEO:"^(?!.*south).*georgia",DDR:"german.?democratic.?republic|democratic.?republic.*germany|east.germany",DEU:"^(?!.*east).*germany|^(?\x3d.*\\bfed.*\\brep).*german",GHA:"ghana|gold.?coast",GIB:"gibraltar",
GRC:"greece|hellenic|hellas",GRL:"greenland",GRD:"grenada",GLP:"guadeloupe",GUM:"\\bguam",GTM:"guatemala",GGY:"guernsey",GIN:"^(?!.*eq)(?!.*span)(?!.*bissau)(?!.*portu)(?!.*new).*guinea",GNB:"bissau|^(?\x3d.*portu).*guinea",GUY:"guyana|british.?guiana",HTI:"haiti",HMD:"heard.*mcdonald",VAT:"holy.?see|vatican|papal.?st",HND:"^(?!.*brit).*honduras",HKG:"hong.?kong",HUN:"^(?!.*austr).*hungary",ISL:"iceland",IND:"india(?!.*ocea)",IDN:"indonesia",IRN:"\\biran|persia",IRQ:"\\biraq|mesopotamia",IRL:"(^ireland)|(^republic.*ireland)",
IMN:"^(?\x3d.*isle).*\\bman",ISR:"israel",ITA:"italy",JAM:"jamaica",JPN:"japan",JEY:"jersey",JOR:"jordan",KAZ:"kazak",KEN:"kenya|british.?east.?africa|east.?africa.?prot",KIR:"kiribati",PRK:"^(?\x3d.*democrat|people|north|d.*p.*.r).*\\bkorea|dprk|korea.*(d.*p.*r)",KWT:"kuwait",KGZ:"kyrgyz|kirghiz",LAO:"\\blaos?\\b",LVA:"latvia",LBN:"lebanon",LSO:"lesotho|basuto",LBR:"liberia",LBY:"libya",LIE:"liechtenstein",LTU:"lithuania",LUX:"^(?!.*belg).*luxem",MAC:"maca(o|u)",MDG:"madagascar|malagasy",MWI:"malawi|nyasa",
MYS:"malaysia",MDV:"maldive",MLI:"\\bmali\\b",MLT:"\\bmalta",MHL:"marshall",MTQ:"martinique",MRT:"mauritania",MUS:"mauritius",MYT:"\\bmayotte",MEX:"\\bmexic",FSM:"fed.*micronesia|micronesia.*fed",MCO:"monaco",MNG:"mongolia",MNE:"^(?!.*serbia).*montenegro",MSR:"montserrat",MAR:"morocco|\\bmaroc",MOZ:"mozambique",MMR:"myanmar|burma",NAM:"namibia",NRU:"nauru",NPL:"nepal",NLD:"^(?!.*\\bant)(?!.*\\bcarib).*netherlands",ANT:"^(?\x3d.*\\bant).*(nether|dutch)",NCL:"new.?caledonia",NZL:"new.?zealand",NIC:"nicaragua",
NER:"\\bniger(?!ia)",NGA:"nigeria",NIU:"niue",NFK:"norfolk",MNP:"mariana",NOR:"norway",OMN:"\\boman|trucial",PAK:"^(?!.*east).*paki?stan",PLW:"palau",PSE:"palestin|\\bgaza|west.?bank",PAN:"panama",PNG:"papua|new.?guinea",PRY:"paraguay",PER:"peru",PHL:"philippines",PCN:"pitcairn",POL:"poland",PRT:"portugal",PRI:"puerto.?rico",QAT:"qatar",KOR:"^(?!.*d.*p.*r)(?!.*democrat)(?!.*people)(?!.*north).*\\bkorea(?!.*d.*p.*r)",MDA:"moldov|b(a|e)ssarabia",REU:"r(e|)union",ROU:"r(o|u|ou)mania",RUS:"\\brussia|soviet.?union|u\\.?s\\.?s\\.?r|socialist.?republics",
RWA:"rwanda",BLM:"barth(e|)lemy",SHN:"helena",KNA:"kitts|\\bnevis",LCA:"\\blucia",MAF:"^(?\x3d.*collectivity).*martin|^(?\x3d.*france).*martin(?!ique)|^(?\x3d.*french).*martin(?!ique)",SPM:"miquelon",VCT:"vincent",WSM:"^(?!.*amer).*samoa",SMR:"san.?marino",STP:"\\bs(a|)o.?tom(e|)",SAU:"\\bsa\\w*.?arabia",SEN:"senegal",SRB:"^(?!.*monte).*serbia",SYC:"seychell",SLE:"sierra",SGP:"singapore",SXM:"^(?!.*martin)(?!.*saba).*maarten",SVK:"^(?!.*cze).*slovak",SVN:"slovenia",SLB:"solomon",SOM:"somali",ZAF:"south.africa|s\\\\..?africa",
SGS:"south.?georgia|sandwich",SSD:"\\bs\\w*.?sudan",ESP:"spain",LKA:"sri.?lanka|ceylon",SDN:"^(?!.*\\bs(?!u)).*sudan",SUR:"surinam|dutch.?guiana",SJM:"svalbard",SWZ:"swaziland",SWE:"sweden",CHE:"switz|swiss",SYR:"syria",TWN:"taiwan|taipei|formosa|^(?!.*peo)(?\x3d.*rep).*china",TJK:"tajik",THA:"thailand|\\bsiam",MKD:"macedonia|fyrom",TLS:"^(?\x3d.*leste).*timor|^(?\x3d.*east).*timor",TGO:"togo",TKL:"tokelau",TON:"tonga",TTO:"trinidad|tobago",TUN:"tunisia",TUR:"turkey",TKM:"turkmen",TCA:"turks",TUV:"tuvalu",
UGA:"uganda",UKR:"ukrain",ARE:"emirates|^u\\.?a\\.?e\\.?$|united.?arab.?em",GBR:"united.?kingdom|britain|^u\\.?k\\.?$",TZA:"tanzania",USA:"united.?states\\b(?!.*islands)|\\bu\\.?s\\.?a\\.?\\b|^\\s*u\\.?s\\.?\\b(?!.*islands)",UMI:"minor.?outlying.?is",URY:"uruguay",UZB:"uzbek",VUT:"vanuatu|new.?hebrides",VEN:"venezuela",VNM:"^(?!.*republic).*viet.?nam|^(?\x3d.*socialist).*viet.?nam",VGB:"^(?\x3d.*\\bu\\.?\\s?k).*virgin|^(?\x3d.*brit).*virgin|^(?\x3d.*kingdom).*virgin",VIR:"^(?\x3d.*\\bu\\.?\\s?s).*virgin|^(?\x3d.*states).*virgin",
WLF:"futuna|wallis",ESH:"western.sahara",YEM:"^(?!.*arab)(?!.*north)(?!.*sana)(?!.*peo)(?!.*dem)(?!.*south)(?!.*aden)(?!.*\\bp\\.?d\\.?r).*yemen",YMD:"^(?\x3d.*peo).*yemen|^(?!.*rep)(?\x3d.*dem).*yemen|^(?\x3d.*south).*yemen|^(?\x3d.*aden).*yemen|^(?\x3d.*\\bp\\.?d\\.?r).*yemen",YUG:"yugoslavia",ZMB:"zambia|northern.?rhodesia",EAZ:"zanzibar",ZWE:"zimbabwe|^(?!.*northern).*rhodesia"}},{}],146:[function(b,N,G){N.exports="xx-small x-small small medium large x-large xx-large larger smaller".split(" ")},
{}],147:[function(b,N,G){N.exports="normal condensed semi-condensed extra-condensed ultra-condensed expanded semi-expanded extra-expanded ultra-expanded".split(" ")},{}],148:[function(b,N,G){N.exports=["normal","italic","oblique"]},{}],149:[function(b,N,G){N.exports="normal bold bolder lighter 100 200 300 400 500 600 700 800 900".split(" ")},{}],150:[function(b,N,G){N.exports={parse:b("./parse"),stringify:b("./stringify")}},{"./parse":152,"./stringify":153}],151:[function(b,N,G){var p=b("css-font-size-keywords");
N.exports={isSize:function(n){return/^[\d\.]/.test(n)||-1!==n.indexOf("/")||-1!==p.indexOf(n)}}},{"css-font-size-keywords":146}],152:[function(b,N,G){function p(e){if("string"!==typeof e)throw Error("Font argument must be a string.");if(d[e])return d[e];if(""===e)throw Error("Cannot parse an empty string.");if(-1!==a.indexOf(e))return d[e]={system:e};for(var f={style:"normal",variant:"normal",weight:"normal",stretch:"normal",lineHeight:"normal",size:"1rem",family:["serif"]},q=l(e,/\s+/),t;t=q.shift();){if(-1!==
m.indexOf(t))return["style","variant","weight","stretch"].forEach(function(x){f[x]=t}),d[e]=f;if(-1!==h.indexOf(t))f.style=t;else if("normal"===t||"small-caps"===t)f.variant=t;else if(-1!==r.indexOf(t))f.stretch=t;else if(-1!==g.indexOf(t))f.weight=t;else{if(c(t)){var w=l(t,"/");f.size=w[0];null!=w[1]?f.lineHeight=n(w[1]):"/"===q[0]&&(q.shift(),f.lineHeight=n(q.shift()));if(!q.length)throw Error("Missing required font-family.");f.family=l(q.join(" "),/\s*,\s*/).map(k);return d[e]=f}throw Error("Unknown or unsupported font token: "+
t);}}throw Error("Missing required font-size.");}function n(e){var f=parseFloat(e);return f.toString()===e?f:e}var k=b("unquote"),m=b("css-global-keywords"),a=b("css-system-font-keywords"),g=b("css-font-weight-keywords"),h=b("css-font-style-keywords"),r=b("css-font-stretch-keywords"),l=b("string-split-by"),c=b("./lib/util").isSize;N.exports=p;var d=p.cache={}},{"./lib/util":151,"css-font-stretch-keywords":147,"css-font-style-keywords":148,"css-font-weight-keywords":149,"css-global-keywords":154,"css-system-font-keywords":155,
"string-split-by":589,unquote:620}],153:[function(b,N,G){function p(e,f){if(e&&!f[e]&&!a[e])throw Error("Unknown keyword `"+e+"`");return e}function n(e){for(var f={},q=0;q<e.length;q++)f[e[q]]=1;return f}var k=b("pick-by-alias"),m=b("./lib/util").isSize,a=n(b("css-global-keywords")),g=n(b("css-system-font-keywords")),h=n(b("css-font-weight-keywords")),r=n(b("css-font-style-keywords")),l=n(b("css-font-stretch-keywords")),c={normal:1,"small-caps":1},d={serif:1,"sans-serif":1,monospace:1,cursive:1,
fantasy:1,"system-ui":1};N.exports=function(e){e=k(e,{style:"style fontstyle fontStyle font-style slope distinction",variant:"variant font-variant fontVariant fontvariant var capitalization",weight:"weight w font-weight fontWeight fontweight",stretch:"stretch font-stretch fontStretch fontstretch width",size:"size s font-size fontSize fontsize height em emSize",lineHeight:"lh line-height lineHeight lineheight leading",family:"font family fontFamily font-family fontfamily type typeface face",system:"system reserved default global"});
if(e.system)return e.system&&p(e.system,g),e.system;p(e.style,r);p(e.variant,c);p(e.weight,h);p(e.stretch,l);null==e.size&&(e.size="1rem");"number"===typeof e.size&&(e.size+="px");if(!m)throw Error("Bad size value `"+e.size+"`");e.family||(e.family="serif");Array.isArray(e.family)&&(e.family.length||(e.family=["serif"]),e.family=e.family.map(function(q){return d[q]?q:'"'+q+'"'}).join(", "));var f=[];f.push(e.style);e.variant!==e.style&&f.push(e.variant);e.weight!==e.variant&&e.weight!==e.style&&f.push(e.weight);
e.stretch!==e.weight&&e.stretch!==e.variant&&e.stretch!==e.style&&f.push(e.stretch);f.push(e.size+(null==e.lineHeight||"normal"===e.lineHeight||"1"===e.lineHeight+""?"":"/"+e.lineHeight));f.push(e.family);return f.filter(Boolean).join(" ")}},{"./lib/util":151,"css-font-stretch-keywords":147,"css-font-style-keywords":148,"css-font-weight-keywords":149,"css-global-keywords":154,"css-system-font-keywords":155,"pick-by-alias":498}],154:[function(b,N,G){N.exports=["inherit","initial","unset"]},{}],155:[function(b,
N,G){N.exports="caption icon menu message-box small-caption status-bar".split(" ")},{}],156:[function(b,N,G){N.exports=function(p,n,k,m,a,g){var h=a-1,r=a*a,l=h*h,c=(1+2*a)*l;l*=a;a=r*(3-2*a);h*=r;if(p.length){g||(g=Array(p.length));for(r=p.length-1;0<=r;--r)g[r]=c*p[r]+l*n[r]+a*k[r]+h*m[r];return g}return c*p+l*n+a*k+h*m};N.exports.derivative=function(p,n,k,m,a,g){var h=6*a*a-6*a,r=3*a*a-4*a+1,l=-6*a*a+6*a;a=3*a*a-2*a;if(p.length){g||(g=Array(p.length));for(var c=p.length-1;0<=c;--c)g[c]=h*p[c]+
r*n[c]+l*k[c]+a*m[c];return g}return h*p+r*n+l*k[c]+a*m}},{}],157:[function(b,N,G){function p(){this.argTypes=[];this.shimArgs=[];this.arrayArgs=[];this.arrayBlockIndices=[];this.scalarArgs=[];this.offsetArgs=[];this.offsetArgIndex=[];this.indexArgs=[];this.shapeArgs=[];this.funcName="";this.post=this.body=this.pre=null;this.debug=!1}var n=b("./lib/thunk.js");N.exports=function(k){var m=new p;m.pre=k.pre;m.body=k.body;m.post=k.post;var a=k.args.slice(0);m.argTypes=a;for(var g=0;g<a.length;++g){var h=
a[g];if("array"===h||"object"===typeof h&&h.blockIndices){m.argTypes[g]="array";m.arrayArgs.push(g);m.arrayBlockIndices.push(h.blockIndices?h.blockIndices:0);m.shimArgs.push("array"+g);if(g<m.pre.args.length&&0<m.pre.args[g].count)throw Error("cwise: pre() block may not reference array args");if(g<m.post.args.length&&0<m.post.args[g].count)throw Error("cwise: post() block may not reference array args");}else if("scalar"===h)m.scalarArgs.push(g),m.shimArgs.push("scalar"+g);else if("index"===h){m.indexArgs.push(g);
if(g<m.pre.args.length&&0<m.pre.args[g].count)throw Error("cwise: pre() block may not reference array index");if(g<m.body.args.length&&m.body.args[g].lvalue)throw Error("cwise: body() block may not write to array index");if(g<m.post.args.length&&0<m.post.args[g].count)throw Error("cwise: post() block may not reference array index");}else if("shape"===h){m.shapeArgs.push(g);if(g<m.pre.args.length&&m.pre.args[g].lvalue)throw Error("cwise: pre() block may not write to array shape");if(g<m.body.args.length&&
m.body.args[g].lvalue)throw Error("cwise: body() block may not write to array shape");if(g<m.post.args.length&&m.post.args[g].lvalue)throw Error("cwise: post() block may not write to array shape");}else if("object"===typeof h&&h.offset)m.argTypes[g]="offset",m.offsetArgs.push({array:h.array,offset:h.offset}),m.offsetArgIndex.push(g);else throw Error("cwise: Unknown argument type "+a[g]);}if(0>=m.arrayArgs.length)throw Error("cwise: No array arguments specified");if(m.pre.args.length>a.length)throw Error("cwise: Too many arguments in pre() block");
if(m.body.args.length>a.length)throw Error("cwise: Too many arguments in body() block");if(m.post.args.length>a.length)throw Error("cwise: Too many arguments in post() block");m.debug=!!k.printCode||!!k.debug;m.funcName=k.funcName||"cwise";m.blockSize=k.blockSize||64;return n(m)}},{"./lib/thunk.js":159}],158:[function(b,N,G){function p(m,a,g){var h=m.length,r=a.arrayArgs.length;a=0<a.indexArgs.length;var l=[],c=[],d=0,e,f;for(e=0;e<h;++e)c.push(["i",e,"\x3d0"].join(""));for(f=0;f<r;++f)for(e=0;e<
h;++e){var q=d;d=m[e];0===e?c.push(["d",f,"s",e,"\x3dt",f,"p",d].join("")):c.push(["d",f,"s",e,"\x3d(t",f,"p",d,"-s",q,"*t",f,"p",q,")"].join(""))}0<c.length&&l.push("var "+c.join(","));for(e=h-1;0<=e;--e)d=m[e],l.push(["for(i",e,"\x3d0;i",e,"\x3cs",d,";++i",e,"){"].join(""));l.push(g);for(e=0;e<h;++e){q=d;d=m[e];for(f=0;f<r;++f)l.push(["p",f,"+\x3dd",f,"s",e].join(""));a&&(0<e&&l.push(["index[",q,"]-\x3ds",q].join("")),l.push(["++index[",d,"]"].join("")));l.push("}")}return l.join("\n")}function n(m,
a,g){for(var h=m.body,r=[],l=[],c=0;c<m.args.length;++c){var d=m.args[c];if(!(0>=d.count)){var e=new RegExp(d.name,"g"),f="",q=a.arrayArgs.indexOf(c);switch(a.argTypes[c]){case "offset":var t=a.offsetArgIndex.indexOf(c);q=a.offsetArgs[t].array;f="+q"+t;case "array":f="p"+q+f;var w="l"+c;t="a"+q;if(0===a.arrayBlockIndices[q])1===d.count?"generic"===g[q]?d.lvalue?(r.push(["var ",w,"\x3d",t,".get(",f,")"].join("")),h=h.replace(e,w),l.push([t,".set(",f,",",w,")"].join(""))):h=h.replace(e,[t,".get(",f,
")"].join("")):h=h.replace(e,[t,"[",f,"]"].join("")):"generic"===g[q]?(r.push(["var ",w,"\x3d",t,".get(",f,")"].join("")),h=h.replace(e,w),d.lvalue&&l.push([t,".set(",f,",",w,")"].join(""))):(r.push(["var ",w,"\x3d",t,"[",f,"]"].join("")),h=h.replace(e,w),d.lvalue&&l.push([t,"[",f,"]\x3d",w].join("")));else{e=[d.name];d=[f];for(f=0;f<Math.abs(a.arrayBlockIndices[q]);f++)e.push("\\s*\\[([^\\]]+)\\]"),d.push("$"+(f+1)+"*t"+q+"b"+f);e=new RegExp(e.join(""),"g");f=d.join("+");if("generic"===g[q])throw Error("cwise: Generic arrays not supported in combination with blocks!");
h=h.replace(e,[t,"[",f,"]"].join(""))}break;case "scalar":h=h.replace(e,"Y"+a.scalarArgs.indexOf(c));break;case "index":h=h.replace(e,"index");break;case "shape":h=h.replace(e,"shape")}}}return[r.join("\n"),h,l.join("\n")].join("\n").trim()}var k=b("uniq");N.exports=function(m,a){for(var g=a[1].length-Math.abs(m.arrayBlockIndices[0])|0,h=Array(m.arrayArgs.length),r=Array(m.arrayArgs.length),l=0;l<m.arrayArgs.length;++l)r[l]=a[2*l],h[l]=a[2*l+1];var c=[],d=[],e=[],f=[],q=[];for(l=0;l<m.arrayArgs.length;++l){0>
m.arrayBlockIndices[l]?(e.push(0),f.push(g),c.push(g),d.push(g+m.arrayBlockIndices[l])):(e.push(m.arrayBlockIndices[l]),f.push(m.arrayBlockIndices[l]+g),c.push(0),d.push(m.arrayBlockIndices[l]));for(var t=[],w=0;w<h[l].length;w++)e[l]<=h[l][w]&&h[l][w]<f[l]&&t.push(h[l][w]-e[l]);q.push(t)}d=["SS"];f=["'use strict'"];t=[];for(w=0;w<g;++w)t.push(["s",w,"\x3dSS[",w,"]"].join(""));for(l=0;l<m.arrayArgs.length;++l){d.push("a"+l);d.push("t"+l);d.push("p"+l);for(w=0;w<g;++w)t.push(["t",l,"p",w,"\x3dt",l,
"[",e[l]+w,"]"].join(""));for(w=0;w<Math.abs(m.arrayBlockIndices[l]);++w)t.push(["t",l,"b",w,"\x3dt",l,"[",c[l]+w,"]"].join(""))}for(l=0;l<m.scalarArgs.length;++l)d.push("Y"+l);0<m.shapeArgs.length&&t.push("shape\x3dSS.slice(0)");if(0<m.indexArgs.length){w=Array(g);for(l=0;l<g;++l)w[l]="0";t.push(["index\x3d[",w.join(","),"]"].join(""))}for(l=0;l<m.offsetArgs.length;++l){c=m.offsetArgs[l];e=[];for(w=0;w<c.offset.length;++w)0!==c.offset[w]&&(1===c.offset[w]?e.push(["t",c.array,"p",w].join("")):e.push([c.offset[w],
"*t",c.array,"p",w].join("")));0===e.length?t.push("q"+l+"\x3d0"):t.push(["q",l,"\x3d",e.join("+")].join(""))}l=k([].concat(m.pre.thisVars).concat(m.body.thisVars).concat(m.post.thisVars));t=t.concat(l);0<t.length&&f.push("var "+t.join(","));for(l=0;l<m.arrayArgs.length;++l)f.push("p"+l+"|\x3d0");3<m.pre.body.length&&f.push(n(m.pre,m,r));w=n(m.body,m,r);a:for(l=0,t=q[0].length;l<t;){for(c=1;c<q.length;++c)if(q[c][l]!==q[0][l])break a;++l}if(l<g){g=f.push;t=l;q=q[0];c=q.length;e=m.arrayArgs.length;
for(var x=m.blockSize,z=0<m.indexArgs.length,B=[],A=0;A<e;++A)B.push(["var offset",A,"\x3dp",A].join(""));for(A=t;A<c;++A)B.push(["for(var j"+A+"\x3dSS[",q[A],"]|0;j",A,"\x3e0;){"].join("")),B.push(["if(j",A,"\x3c",x,"){"].join("")),B.push(["s",q[A],"\x3dj",A].join("")),B.push(["j",A,"\x3d0"].join("")),B.push(["}else{s",q[A],"\x3d",x].join("")),B.push(["j",A,"-\x3d",x,"}"].join("")),z&&B.push(["index[",q[A],"]\x3dj",A].join(""));for(A=0;A<e;++A){x=["offset"+A];for(z=t;z<c;++z)x.push(["j",z,"*t",A,
"p",q[z]].join(""));B.push(["p",A,"\x3d(",x.join("+"),")"].join(""))}B.push(p(q,m,w));for(A=t;A<c;++A)B.push("}");q=B.join("\n");g.call(f,q)}else f.push(p(q[0],m,w));3<m.post.body.length&&f.push(n(m.post,m,r));m.debug&&console.log("-----Generated cwise routine for ",a,":\n"+f.join("\n")+"\n----------");m=m.funcName||"unnamed";h=h[0].join("s");a=Array(r.length);q=!0;for(g=0;g<r.length;++g)w=r[g],t=(t=w.match(/\d+/))?t[0]:"",0===w.charAt(0)?a[g]="u"+w.charAt(1)+t:a[g]=w.charAt(0)+t,0<g&&(q=q&&a[g]===
a[g-1]);r=q?a[0]:a.join("");r=[m,"_cwise_loop_",h,"m",l,r].join("");return(new Function(["function ",r,"(",d.join(","),"){",f.join("\n"),"} return ",r].join("")))()}},{uniq:619}],159:[function(b,N,G){var p=b("./compile.js");N.exports=function(n){var k=["'use strict'","var CACHED\x3d{}"],m=[];k.push(["return function ",n.funcName+"_cwise_thunk","(",n.shimArgs.join(","),"){"].join(""));for(var a=[],g=[],h=[["array",n.arrayArgs[0],".shape.slice(",Math.max(0,n.arrayBlockIndices[0]),0>n.arrayBlockIndices[0]?
","+n.arrayBlockIndices[0]+")":")"].join("")],r=[],l=[],c=0;c<n.arrayArgs.length;++c){var d=n.arrayArgs[c];m.push(["t",d,"\x3darray",d,".dtype,r",d,"\x3darray",d,".order"].join(""));a.push("t"+d);a.push("r"+d);g.push("t"+d);g.push("r"+d+".join()");h.push("array"+d+".data");h.push("array"+d+".stride");h.push("array"+d+".offset|0");0<c&&(r.push("array"+n.arrayArgs[0]+".shape.length\x3d\x3d\x3darray"+d+".shape.length+"+(Math.abs(n.arrayBlockIndices[0])-Math.abs(n.arrayBlockIndices[c]))),l.push("array"+
n.arrayArgs[0]+".shape[shapeIndex+"+Math.max(0,n.arrayBlockIndices[0])+"]\x3d\x3d\x3darray"+d+".shape[shapeIndex+"+Math.max(0,n.arrayBlockIndices[c])+"]"))}1<n.arrayArgs.length&&(k.push("if (!("+r.join(" \x26\x26 ")+")) throw new Error('cwise: Arrays do not all have the same dimensionality!')"),k.push("for(var shapeIndex\x3darray"+n.arrayArgs[0]+".shape.length-"+Math.abs(n.arrayBlockIndices[0])+"; shapeIndex--\x3e0;) {"),k.push("if (!("+l.join(" \x26\x26 ")+")) throw new Error('cwise: Arrays do not all have the same shape!')"),
k.push("}"));for(c=0;c<n.scalarArgs.length;++c)h.push("scalar"+n.scalarArgs[c]);m.push(["type\x3d[",g.join(","),"].join()"].join(""));m.push("proc\x3dCACHED[type]");k.push("var "+m.join(","));k.push(["if(!proc){CACHED[type]\x3dproc\x3dcompile([",a.join(","),"])}return proc(",h.join(","),")}"].join(""));n.debug&&console.log("-----Generated thunk:\n"+k.join("\n")+"\n----------");return(new Function("compile",k.join("\n")))(p.bind(void 0,n))}},{"./compile.js":158}],160:[function(b,N,G){var p=b("type/value/is"),
n=b("type/value/ensure"),k=b("type/plain-function/ensure"),m=b("es5-ext/object/copy"),a=b("es5-ext/object/normalize-options"),g=b("es5-ext/object/map"),h=Function.prototype.bind,r=Object.defineProperty,l=Object.prototype.hasOwnProperty;var c=function(d,e,f){var q=n(e)&&k(e.value);var t=m(e);delete t.writable;delete t.value;t.get=function(){if(!f.overwriteDefinition&&l.call(this,d))return q;e.value=h.call(q,f.resolveContext?f.resolveContext(this):this);r(this,d,e);return this[d]};return t};N.exports=
function(d,e){var f=a(e);p(f.resolveContext)&&k(f.resolveContext);return g(d,function(q,t){return c(t,q,f)})}},{"es5-ext/object/copy":205,"es5-ext/object/map":213,"es5-ext/object/normalize-options":214,"type/plain-function/ensure":611,"type/value/ensure":615,"type/value/is":616}],161:[function(b,N,G){var p=b("type/value/is"),n=b("type/plain-function/is"),k=b("es5-ext/object/assign"),m=b("es5-ext/object/normalize-options"),a=b("es5-ext/string/#/contains");(N.exports=function(g,h){if(2>arguments.length||
"string"!==typeof g){var r=h;h=g;g=null}else r=arguments[2];if(p(g)){var l=a.call(g,"c");var c=a.call(g,"e");var d=a.call(g,"w")}else l=d=!0,c=!1;l={value:h,configurable:l,enumerable:c,writable:d};return r?k(m(r),l):l}).gs=function(g,h,r,l){"string"!==typeof g&&(l=r,r=h,h=g,g=null);p(h)?n(h)?p(r)?n(r)||(l=r,r=void 0):r=void 0:(l=h,h=r=void 0):h=void 0;if(p(g)){var c=a.call(g,"c");g=a.call(g,"e")}else c=!0,g=!1;h={get:h,set:r,configurable:c,enumerable:g};return l?k(m(l),h):h}},{"es5-ext/object/assign":202,
"es5-ext/object/normalize-options":214,"es5-ext/string/#/contains":221,"type/plain-function/is":612,"type/value/is":616}],162:[function(b,N,G){(function(p,n){"object"===typeof G&&"undefined"!==typeof N?n(G):n(p.d3=p.d3||{})})(this,function(p){function n(M,H){return M<H?-1:M>H?1:M>=H?0:NaN}function k(M){1===M.length&&(M=m(M));return{left:function(H,O,I,L){null==I&&(I=0);null==L&&(L=H.length);for(;I<L;){var Q=I+L>>>1;0>M(H[Q],O)?I=Q+1:L=Q}return I},right:function(H,O,I,L){null==I&&(I=0);null==L&&(L=
H.length);for(;I<L;){var Q=I+L>>>1;0<M(H[Q],O)?L=Q:I=Q+1}return I}}}function m(M){return function(H,O){return n(M(H),O)}}function a(M,H){return[M,H]}function g(M){return null===M?NaN:+M}function h(M,H){var O=M.length,I=0,L=-1,Q=0,Z,ba=0;if(null==H)for(;++L<O;){if(!isNaN(Z=g(M[L]))){var V=Z-Q;Q+=V/++I;ba+=V*(Z-Q)}}else for(;++L<O;)isNaN(Z=g(H(M[L],L,M)))||(V=Z-Q,Q+=V/++I,ba+=V*(Z-Q));if(1<I)return ba/(I-1)}function r(M,H){return(M=h(M,H))?Math.sqrt(M):M}function l(M,H){var O=M.length,I=-1,L,Q,Z;if(null==
H)for(;++I<O;){if(null!=(L=M[I])&&L>=L)for(Q=Z=L;++I<O;)null!=(L=M[I])&&(Q>L&&(Q=L),Z<L&&(Z=L))}else for(;++I<O;)if(null!=(L=H(M[I],I,M))&&L>=L)for(Q=Z=L;++I<O;)null!=(L=H(M[I],I,M))&&(Q>L&&(Q=L),Z<L&&(Z=L));return[Q,Z]}function c(M){return function(){return M}}function d(M){return M}function e(M,H,O){M=+M;H=+H;O=2>(L=arguments.length)?(H=M,M=0,1):3>L?1:+O;for(var I=-1,L=Math.max(0,Math.ceil((H-M)/O))|0,Q=Array(L);++I<L;)Q[I]=M+I*O;return Q}function f(M,H,O){H=(H-M)/Math.max(0,O);M=Math.floor(Math.log(H)/
Math.LN10);H/=Math.pow(10,M);return 0<=M?(H>=F?10:H>=J?5:H>=K?2:1)*Math.pow(10,M):-Math.pow(10,-M)/(H>=F?10:H>=J?5:H>=K?2:1)}function q(M,H,O){var I=Math.abs(H-M)/Math.max(0,O);O=Math.pow(10,Math.floor(Math.log(I)/Math.LN10));I/=O;I>=F?O*=10:I>=J?O*=5:I>=K&&(O*=2);return H<M?-O:O}function t(M){return Math.ceil(Math.log(M.length)/Math.LN2)+1}function w(M,H,O){null==O&&(O=g);if(I=M.length){if(0>=(H=+H)||2>I)return+O(M[0],0,M);if(1<=H)return+O(M[I-1],I-1,M);var I;H*=I-1;I=Math.floor(H);var L=+O(M[I],
I,M);M=+O(M[I+1],I+1,M);return L+(M-L)*(H-I)}}function x(M,H){var O=M.length,I=-1,L,Q;if(null==H)for(;++I<O;){if(null!=(L=M[I])&&L>=L)for(Q=L;++I<O;)null!=(L=M[I])&&Q>L&&(Q=L)}else for(;++I<O;)if(null!=(L=H(M[I],I,M))&&L>=L)for(Q=L;++I<O;)null!=(L=H(M[I],I,M))&&Q>L&&(Q=L);return Q}function z(M){if(!(Q=M.length))return[];for(var H=-1,O=x(M,B),I=Array(O);++H<O;)for(var L=-1,Q,Z=I[H]=Array(Q);++L<Q;)Z[L]=M[L][H];return I}function B(M){return M.length}var A=k(n),D=A.right;A=A.left;var C=Array.prototype,
v=C.slice,y=C.map,F=Math.sqrt(50),J=Math.sqrt(10),K=Math.sqrt(2);p.bisect=D;p.bisectRight=D;p.bisectLeft=A;p.ascending=n;p.bisector=k;p.cross=function(M,H,O){var I=M.length,L=H.length,Q=Array(I*L),Z,ba,V;null==O&&(O=a);for(Z=V=0;Z<I;++Z){var S=M[Z];for(ba=0;ba<L;++ba,++V)Q[V]=O(S,H[ba])}return Q};p.descending=function(M,H){return H<M?-1:H>M?1:H>=M?0:NaN};p.deviation=r;p.extent=l;p.histogram=function(){function M(L){var Q,Z=L.length,ba=Array(Z);for(Q=0;Q<Z;++Q)ba[Q]=H(L[Q],Q,L);Q=O(ba);var V=Q[0],
S=Q[1],T=I(ba,V,S);Array.isArray(T)||(T=q(V,S,T),T=e(Math.ceil(V/T)*T,S,T));for(var fa=T.length;T[0]<=V;)T.shift(),--fa;for(;T[fa-1]>S;)T.pop(),--fa;var W=Array(fa+1);for(Q=0;Q<=fa;++Q){var aa=W[Q]=[];aa.x0=0<Q?T[Q-1]:V;aa.x1=Q<fa?T[Q]:S}for(Q=0;Q<Z;++Q)aa=ba[Q],V<=aa&&aa<=S&&W[D(T,aa,0,fa)].push(L[Q]);return W}var H=d,O=l,I=t;M.value=function(L){return arguments.length?(H="function"===typeof L?L:c(L),M):H};M.domain=function(L){return arguments.length?(O="function"===typeof L?L:c([L[0],L[1]]),M):
O};M.thresholds=function(L){return arguments.length?(I="function"===typeof L?L:Array.isArray(L)?c(v.call(L)):c(L),M):I};return M};p.thresholdFreedmanDiaconis=function(M,H,O){M=y.call(M,g).sort(n);return Math.ceil((O-H)/(2*(w(M,.75)-w(M,.25))*Math.pow(M.length,-1/3)))};p.thresholdScott=function(M,H,O){return Math.ceil((O-H)/(3.5*r(M)*Math.pow(M.length,-1/3)))};p.thresholdSturges=t;p.max=function(M,H){var O=M.length,I=-1,L,Q;if(null==H)for(;++I<O;){if(null!=(L=M[I])&&L>=L)for(Q=L;++I<O;)null!=(L=M[I])&&
L>Q&&(Q=L)}else for(;++I<O;)if(null!=(L=H(M[I],I,M))&&L>=L)for(Q=L;++I<O;)null!=(L=H(M[I],I,M))&&L>Q&&(Q=L);return Q};p.mean=function(M,H){var O=M.length,I=O,L=-1,Q,Z=0;if(null==H)for(;++L<O;)isNaN(Q=g(M[L]))?--I:Z+=Q;else for(;++L<O;)isNaN(Q=g(H(M[L],L,M)))?--I:Z+=Q;if(I)return Z/I};p.median=function(M,H){var O=M.length,I=-1,L,Q=[];if(null==H)for(;++I<O;)isNaN(L=g(M[I]))||Q.push(L);else for(;++I<O;)isNaN(L=g(H(M[I],I,M)))||Q.push(L);return w(Q.sort(n),.5)};p.merge=function(M){var H=M.length;var O=
-1;for(var I=0,L,Q;++O<H;)I+=M[O].length;for(L=Array(I);0<=--H;)for(Q=M[H],O=Q.length;0<=--O;)L[--I]=Q[O];return L};p.min=x;p.pairs=function(M,H){null==H&&(H=a);for(var O=0,I=M.length-1,L=M[0],Q=Array(0>I?0:I);O<I;)Q[O]=H(L,L=M[++O]);return Q};p.permute=function(M,H){for(var O=H.length,I=Array(O);O--;)I[O]=M[H[O]];return I};p.quantile=w;p.range=e;p.scan=function(M,H){if(O=M.length){var O,I=0,L=0,Q,Z=M[L];for(null==H&&(H=n);++I<O;)if(0>H(Q=M[I],Z)||0!==H(Z,Z))Z=Q,L=I;if(0===H(Z,Z))return L}};p.shuffle=
function(M,H,O){O=(null==O?M.length:O)-(H=null==H?0:+H);for(var I,L;O;)L=Math.random()*O--|0,I=M[O+H],M[O+H]=M[L+H],M[L+H]=I;return M};p.sum=function(M,H){var O=M.length,I=-1,L,Q=0;if(null==H)for(;++I<O;){if(L=+M[I])Q+=L}else for(;++I<O;)if(L=+H(M[I],I,M))Q+=L;return Q};p.ticks=function(M,H,O){var I,L=-1,Q;H=+H;M=+M;O=+O;if(M===H&&0<O)return[M];if(I=H<M){var Z=M;M=H;H=Z}if(0===(Q=f(M,H,O))||!isFinite(Q))return[];if(0<Q)for(M=Math.ceil(M/Q),H=Math.floor(H/Q),H=Array(Z=Math.ceil(H-M+1));++L<Z;)H[L]=
(M+L)*Q;else for(M=Math.floor(M*Q),H=Math.ceil(H*Q),H=Array(Z=Math.ceil(M-H+1));++L<Z;)H[L]=(M-L)/Q;I&&H.reverse();return H};p.tickIncrement=f;p.tickStep=q;p.transpose=z;p.variance=h;p.zip=function(){return z(arguments)};Object.defineProperty(p,"__esModule",{value:!0})})},{}],163:[function(b,N,G){(function(p,n){"object"===typeof G&&"undefined"!==typeof N?n(G):n(p.d3=p.d3||{})})(this,function(p){function n(){}function k(d,e){var f=new n;if(d instanceof n)d.each(function(x,z){f.set(z,x)});else if(Array.isArray(d)){var q=
-1,t=d.length,w;if(null==e)for(;++q<t;)f.set(q,d[q]);else for(;++q<t;)f.set(e(w=d[q],q,d),w)}else if(d)for(q in d)f.set(q,d[q]);return f}function m(){return{}}function a(d,e,f){d[e]=f}function g(){return k()}function h(d,e,f){d.set(e,f)}function r(){}function l(d,e){var f=new r;if(d instanceof r)d.each(function(w){f.add(w)});else if(d){var q=-1,t=d.length;if(null==e)for(;++q<t;)f.add(d[q]);else for(;++q<t;)f.add(e(d[q],q,d))}return f}n.prototype=k.prototype={constructor:n,has:function(d){return"$"+
d in this},get:function(d){return this["$"+d]},set:function(d,e){this["$"+d]=e;return this},remove:function(d){d="$"+d;return d in this&&delete this[d]},clear:function(){for(var d in this)"$"===d[0]&&delete this[d]},keys:function(){var d=[],e;for(e in this)"$"===e[0]&&d.push(e.slice(1));return d},values:function(){var d=[],e;for(e in this)"$"===e[0]&&d.push(this[e]);return d},entries:function(){var d=[],e;for(e in this)"$"===e[0]&&d.push({key:e.slice(1),value:this[e]});return d},size:function(){var d=
0,e;for(e in this)"$"===e[0]&&++d;return d},empty:function(){for(var d in this)if("$"===d[0])return!1;return!0},each:function(d){for(var e in this)"$"===e[0]&&d(this[e],e.slice(1),this)}};var c=k.prototype;r.prototype=l.prototype={constructor:r,has:c.has,add:function(d){d+="";this["$"+d]=d;return this},remove:c.remove,clear:c.clear,values:c.keys,size:c.size,empty:c.empty,each:c.each};p.nest=function(){function d(z,B,A,D){if(B>=f.length)return null!=t&&z.sort(t),null!=w?w(z):z;for(var C=-1,v=z.length,
y=f[B++],F,J,K=k(),M,H=A();++C<v;)(M=K.get(F=y(J=z[C])+""))?M.push(J):K.set(F,[J]);K.each(function(O,I){D(H,I,d(O,B,A,D))});return H}function e(z,B){if(++B>f.length)return z;var A=q[B-1];if(null!=w&&B>=f.length)var D=z.entries();else D=[],z.each(function(C,v){D.push({key:v,values:e(C,B)})});return null!=A?D.sort(function(C,v){return A(C.key,v.key)}):D}var f=[],q=[],t,w,x;return x={object:function(z){return d(z,0,m,a)},map:function(z){return d(z,0,g,h)},entries:function(z){return e(d(z,0,g,h),0)},
key:function(z){f.push(z);return x},sortKeys:function(z){q[f.length-1]=z;return x},sortValues:function(z){t=z;return x},rollup:function(z){w=z;return x}}};p.set=l;p.map=k;p.keys=function(d){var e=[],f;for(f in d)e.push(f);return e};p.values=function(d){var e=[],f;for(f in d)e.push(d[f]);return e};p.entries=function(d){var e=[],f;for(f in d)e.push({key:f,value:d[f]});return e};Object.defineProperty(p,"__esModule",{value:!0})})},{}],164:[function(b,N,G){(function(p,n){"object"===typeof G&&"undefined"!==
typeof N?n(G):(p=p||self,n(p.d3=p.d3||{}))})(this,function(p){function n(na,oa,sa){na.prototype=oa.prototype=sa;sa.constructor=na}function k(na,oa){na=Object.create(na.prototype);for(var sa in oa)na[sa]=oa[sa];return na}function m(){}function a(){return this.rgb().formatHex()}function g(){return this.rgb().formatRgb()}function h(na){var oa,sa;na=(na+"").trim().toLowerCase();return(oa=ba.exec(na))?(sa=oa[1].length,oa=parseInt(oa[1],16),6===sa?r(oa):3===sa?new e(oa>>8&15|oa>>4&240,oa>>4&15|oa&240,(oa&
15)<<4|oa&15,1):8===sa?l(oa>>24&255,oa>>16&255,oa>>8&255,(oa&255)/255):4===sa?l(oa>>12&15|oa>>8&240,oa>>8&15|oa>>4&240,oa>>4&15|oa&240,((oa&15)<<4|oa&15)/255):null):(oa=V.exec(na))?new e(oa[1],oa[2],oa[3],1):(oa=S.exec(na))?new e(255*oa[1]/100,255*oa[2]/100,255*oa[3]/100,1):(oa=T.exec(na))?l(oa[1],oa[2],oa[3],oa[4]):(oa=fa.exec(na))?l(255*oa[1]/100,255*oa[2]/100,255*oa[3]/100,oa[4]):(oa=W.exec(na))?w(oa[1],oa[2]/100,oa[3]/100,1):(oa=aa.exec(na))?w(oa[1],oa[2]/100,oa[3]/100,oa[4]):ja.hasOwnProperty(na)?
r(ja[na]):"transparent"===na?new e(NaN,NaN,NaN,0):null}function r(na){return new e(na>>16&255,na>>8&255,na&255,1)}function l(na,oa,sa,za){0>=za&&(na=oa=sa=NaN);return new e(na,oa,sa,za)}function c(na){na instanceof m||(na=h(na));if(!na)return new e;na=na.rgb();return new e(na.r,na.g,na.b,na.opacity)}function d(na,oa,sa,za){return 1===arguments.length?c(na):new e(na,oa,sa,null==za?1:za)}function e(na,oa,sa,za){this.r=+na;this.g=+oa;this.b=+sa;this.opacity=+za}function f(){return"#"+t(this.r)+t(this.g)+
t(this.b)}function q(){var na=this.opacity;na=isNaN(na)?1:Math.max(0,Math.min(1,na));return(1===na?"rgb(":"rgba(")+Math.max(0,Math.min(255,Math.round(this.r)||0))+", "+Math.max(0,Math.min(255,Math.round(this.g)||0))+", "+Math.max(0,Math.min(255,Math.round(this.b)||0))+(1===na?")":", "+na+")")}function t(na){na=Math.max(0,Math.min(255,Math.round(na)||0));return(16>na?"0":"")+na.toString(16)}function w(na,oa,sa,za){0>=za?na=oa=sa=NaN:0>=sa||1<=sa?na=oa=NaN:0>=oa&&(na=NaN);return new B(na,oa,sa,za)}
function x(na){if(na instanceof B)return new B(na.h,na.s,na.l,na.opacity);na instanceof m||(na=h(na));if(!na)return new B;if(na instanceof B)return na;na=na.rgb();var oa=na.r/255,sa=na.g/255,za=na.b/255,Ha=Math.min(oa,sa,za),Wa=Math.max(oa,sa,za),Za=NaN,bb=Wa-Ha,sb=(Wa+Ha)/2;bb?(Za=oa===Wa?(sa-za)/bb+6*(sa<za):sa===Wa?(za-oa)/bb+2:(oa-sa)/bb+4,bb/=.5>sb?Wa+Ha:2-Wa-Ha,Za*=60):bb=0<sb&&1>sb?0:Za;return new B(Za,bb,sb,na.opacity)}function z(na,oa,sa,za){return 1===arguments.length?x(na):new B(na,oa,
sa,null==za?1:za)}function B(na,oa,sa,za){this.h=+na;this.s=+oa;this.l=+sa;this.opacity=+za}function A(na,oa,sa){return 255*(60>na?oa+(sa-oa)*na/60:180>na?sa:240>na?oa+(sa-oa)*(240-na)/60:oa)}function D(na){if(na instanceof v)return new v(na.l,na.a,na.b,na.opacity);if(na instanceof O)return I(na);na instanceof e||(na=c(na));var oa=K(na.r),sa=K(na.g),za=K(na.b),Ha=y(.2225045*oa+.7168786*sa+.0606169*za);if(oa===sa&&sa===za)var Wa=oa=Ha;else Wa=y((.4360747*oa+.3850649*sa+.1430804*za)/.96422),oa=y((.0139322*
oa+.0971045*sa+.7141733*za)/.82521);return new v(116*Ha-16,500*(Wa-Ha),200*(Ha-oa),na.opacity)}function C(na,oa,sa,za){return 1===arguments.length?D(na):new v(na,oa,sa,null==za?1:za)}function v(na,oa,sa,za){this.l=+na;this.a=+oa;this.b=+sa;this.opacity=+za}function y(na){return na>la?Math.pow(na,1/3):na/pa+ra}function F(na){return na>wa?na*na*na:pa*(na-ra)}function J(na){return 255*(.0031308>=na?12.92*na:1.055*Math.pow(na,1/2.4)-.055)}function K(na){return.04045>=(na/=255)?na/12.92:Math.pow((na+.055)/
1.055,2.4)}function M(na){if(na instanceof O)return new O(na.h,na.c,na.l,na.opacity);na instanceof v||(na=D(na));if(0===na.a&&0===na.b)return new O(NaN,0<na.l&&100>na.l?0:NaN,na.l,na.opacity);var oa=Math.atan2(na.b,na.a)*ia;return new O(0>oa?oa+360:oa,Math.sqrt(na.a*na.a+na.b*na.b),na.l,na.opacity)}function H(na,oa,sa,za){return 1===arguments.length?M(na):new O(na,oa,sa,null==za?1:za)}function O(na,oa,sa,za){this.h=+na;this.c=+oa;this.l=+sa;this.opacity=+za}function I(na){if(isNaN(na.h))return new v(na.l,
0,0,na.opacity);var oa=na.h*ma;return new v(na.l,Math.cos(oa)*na.c,Math.sin(oa)*na.c,na.opacity)}function L(na,oa,sa,za){if(1===arguments.length){var Ha=na;if(Ha instanceof Q)Ha=new Q(Ha.h,Ha.s,Ha.l,Ha.opacity);else{Ha instanceof e||(Ha=c(Ha));var Wa=Ha.g/255,Za=Ha.b/255,bb=(ka*Za+Ha.r/255*-1.7884503806-3.5172982438*Wa)/(ka+-1.7884503806-3.5172982438);Za-=bb;var sb=(1.97294*(Wa-bb)- -.29227*Za)/-.90649;Za=(Wa=Math.sqrt(sb*sb+Za*Za)/(1.97294*bb*(1-bb)))?Math.atan2(sb,Za)*ia-120:NaN;Ha=new Q(0>Za?Za+
360:Za,Wa,bb,Ha.opacity)}}else Ha=new Q(na,oa,sa,null==za?1:za);return Ha}function Q(na,oa,sa,za){this.h=+na;this.s=+oa;this.l=+sa;this.opacity=+za}var Z=1/.7,ba=/^#([0-9a-f]{3,8})$/,V=/^rgb\(\s*([+-]?\d+)\s*,\s*([+-]?\d+)\s*,\s*([+-]?\d+)\s*\)$/,S=/^rgb\(\s*([+-]?\d*\.?\d+(?:[eE][+-]?\d+)?)%\s*,\s*([+-]?\d*\.?\d+(?:[eE][+-]?\d+)?)%\s*,\s*([+-]?\d*\.?\d+(?:[eE][+-]?\d+)?)%\s*\)$/,T=/^rgba\(\s*([+-]?\d+)\s*,\s*([+-]?\d+)\s*,\s*([+-]?\d+)\s*,\s*([+-]?\d*\.?\d+(?:[eE][+-]?\d+)?)\s*\)$/,fa=/^rgba\(\s*([+-]?\d*\.?\d+(?:[eE][+-]?\d+)?)%\s*,\s*([+-]?\d*\.?\d+(?:[eE][+-]?\d+)?)%\s*,\s*([+-]?\d*\.?\d+(?:[eE][+-]?\d+)?)%\s*,\s*([+-]?\d*\.?\d+(?:[eE][+-]?\d+)?)\s*\)$/,
W=/^hsl\(\s*([+-]?\d*\.?\d+(?:[eE][+-]?\d+)?)\s*,\s*([+-]?\d*\.?\d+(?:[eE][+-]?\d+)?)%\s*,\s*([+-]?\d*\.?\d+(?:[eE][+-]?\d+)?)%\s*\)$/,aa=/^hsla\(\s*([+-]?\d*\.?\d+(?:[eE][+-]?\d+)?)\s*,\s*([+-]?\d*\.?\d+(?:[eE][+-]?\d+)?)%\s*,\s*([+-]?\d*\.?\d+(?:[eE][+-]?\d+)?)%\s*,\s*([+-]?\d*\.?\d+(?:[eE][+-]?\d+)?)\s*\)$/,ja={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,
burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,
darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,
lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,
mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,
red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074};n(m,h,{copy:function(na){return Object.assign(new this.constructor,
this,na)},displayable:function(){return this.rgb().displayable()},hex:a,formatHex:a,formatHsl:function(){return x(this).formatHsl()},formatRgb:g,toString:g});n(e,d,k(m,{brighter:function(na){na=null==na?Z:Math.pow(Z,na);return new e(this.r*na,this.g*na,this.b*na,this.opacity)},darker:function(na){na=null==na?.7:Math.pow(.7,na);return new e(this.r*na,this.g*na,this.b*na,this.opacity)},rgb:function(){return this},displayable:function(){return-.5<=this.r&&255.5>this.r&&-.5<=this.g&&255.5>this.g&&-.5<=
this.b&&255.5>this.b&&0<=this.opacity&&1>=this.opacity},hex:f,formatHex:f,formatRgb:q,toString:q}));n(B,z,k(m,{brighter:function(na){na=null==na?Z:Math.pow(Z,na);return new B(this.h,this.s,this.l*na,this.opacity)},darker:function(na){na=null==na?.7:Math.pow(.7,na);return new B(this.h,this.s,this.l*na,this.opacity)},rgb:function(){var na=this.h%360+360*(0>this.h),oa=isNaN(na)||isNaN(this.s)?0:this.s,sa=this.l;oa=sa+(.5>sa?sa:1-sa)*oa;sa=2*sa-oa;return new e(A(240<=na?na-240:na+120,sa,oa),A(na,sa,oa),
A(120>na?na+240:na-120,sa,oa),this.opacity)},displayable:function(){return(0<=this.s&&1>=this.s||isNaN(this.s))&&0<=this.l&&1>=this.l&&0<=this.opacity&&1>=this.opacity},formatHsl:function(){var na=this.opacity;na=isNaN(na)?1:Math.max(0,Math.min(1,na));return(1===na?"hsl(":"hsla(")+(this.h||0)+", "+100*(this.s||0)+"%, "+100*(this.l||0)+"%"+(1===na?")":", "+na+")")}}));var ma=Math.PI/180,ia=180/Math.PI,ra=4/29,wa=6/29,pa=3*wa*wa,la=wa*wa*wa;n(v,C,k(m,{brighter:function(na){return new v(this.l+18*(null==
na?1:na),this.a,this.b,this.opacity)},darker:function(na){return new v(this.l-18*(null==na?1:na),this.a,this.b,this.opacity)},rgb:function(){var na=(this.l+16)/116,oa=isNaN(this.a)?na:na+this.a/500,sa=isNaN(this.b)?na:na-this.b/200;oa=.96422*F(oa);na=1*F(na);sa=.82521*F(sa);return new e(J(3.1338561*oa-1.6168667*na-.4906146*sa),J(-.9787684*oa+1.9161415*na+.033454*sa),J(.0719453*oa-.2289914*na+1.4052427*sa),this.opacity)}}));n(O,H,k(m,{brighter:function(na){return new O(this.h,this.c,this.l+18*(null==
na?1:na),this.opacity)},darker:function(na){return new O(this.h,this.c,this.l-18*(null==na?1:na),this.opacity)},rgb:function(){return I(this).rgb()}}));var ka=1.78277*-.29227-.1347134789;n(Q,L,k(m,{brighter:function(na){na=null==na?Z:Math.pow(Z,na);return new Q(this.h,this.s,this.l*na,this.opacity)},darker:function(na){na=null==na?.7:Math.pow(.7,na);return new Q(this.h,this.s,this.l*na,this.opacity)},rgb:function(){var na=isNaN(this.h)?0:(this.h+120)*ma,oa=+this.l,sa=isNaN(this.s)?0:this.s*oa*(1-
oa),za=Math.cos(na);na=Math.sin(na);return new e(255*(oa+sa*(-.14861*za+1.78277*na)),255*(oa+sa*(-.29227*za+-.90649*na)),255*(oa+1.97294*sa*za),this.opacity)}}));p.color=h;p.cubehelix=L;p.gray=function(na,oa){return new v(na,0,0,null==oa?1:oa)};p.hcl=H;p.hsl=z;p.lab=C;p.lch=function(na,oa,sa,za){return 1===arguments.length?M(na):new O(sa,oa,na,null==za?1:za)};p.rgb=d;Object.defineProperty(p,"__esModule",{value:!0})})},{}],165:[function(b,N,G){(function(p,n){"object"===typeof G&&"undefined"!==typeof N?
n(G):(p=p||self,n(p.d3=p.d3||{}))})(this,function(p){function n(){for(var h=0,r=arguments.length,l={},c;h<r;++h){if(!(c=arguments[h]+"")||c in l||/[\s.]/.test(c))throw Error("illegal type: "+c);l[c]=[]}return new k(l)}function k(h){this._=h}function m(h,r){return h.trim().split(/^|\s+/).map(function(l){var c="",d=l.indexOf(".");0<=d&&(c=l.slice(d+1),l=l.slice(0,d));if(l&&!r.hasOwnProperty(l))throw Error("unknown type: "+l);return{type:l,name:c}})}function a(h,r,l){for(var c=0,d=h.length;c<d;++c)if(h[c].name===
r){h[c]=g;h=h.slice(0,c).concat(h.slice(c+1));break}null!=l&&h.push({name:r,value:l});return h}var g={value:function(){}};k.prototype=n.prototype={constructor:k,on:function(h,r){var l=this._,c=m(h+"",l),d,e=-1,f=c.length;if(2>arguments.length)for(;++e<f;){var q;if(q=d=(h=c[e]).type){a:{q=l[d];for(var t=0,w=q.length;t<w;++t)if((d=q[t]).name===h.name){d=d.value;break a}d=void 0}q=d}if(q)return d}else{if(null!=r&&"function"!==typeof r)throw Error("invalid callback: "+r);for(;++e<f;)if(d=(h=c[e]).type)l[d]=
a(l[d],h.name,r);else if(null==r)for(d in l)l[d]=a(l[d],h.name,null);return this}},copy:function(){var h={},r=this._,l;for(l in r)h[l]=r[l].slice();return new k(h)},call:function(h,r){if(0<(d=arguments.length-2))for(var l=Array(d),c=0,d,e;c<d;++c)l[c]=arguments[c+2];if(!this._.hasOwnProperty(h))throw Error("unknown type: "+h);e=this._[h];c=0;for(d=e.length;c<d;++c)e[c].value.apply(r,l)},apply:function(h,r,l){if(!this._.hasOwnProperty(h))throw Error("unknown type: "+h);h=this._[h];for(var c=0,d=h.length;c<
d;++c)h[c].value.apply(r,l)}};p.dispatch=n;Object.defineProperty(p,"__esModule",{value:!0})})},{}],166:[function(b,N,G){(function(p,n){"object"===typeof G&&"undefined"!==typeof N?n(G,b("d3-quadtree"),b("d3-collection"),b("d3-dispatch"),b("d3-timer")):n(p.d3=p.d3||{},p.d3,p.d3,p.d3,p.d3)})(this,function(p,n,k,m,a){function g(t){return function(){return t}}function h(){return 1E-6*(Math.random()-.5)}function r(t){return t.x+t.vx}function l(t){return t.y+t.vy}function c(t){return t.index}function d(t,
w){t=t.get(w);if(!t)throw Error("missing: "+w);return t}function e(t){return t.x}function f(t){return t.y}var q=Math.PI*(3-Math.sqrt(5));p.forceCenter=function(t,w){function x(){var B,A=z.length,D=0,C=0;for(B=0;B<A;++B){var v=z[B];D+=v.x;C+=v.y}D=D/A-t;C=C/A-w;for(B=0;B<A;++B)v=z[B],v.x-=D,v.y-=C}var z;null==t&&(t=0);null==w&&(w=0);x.initialize=function(B){z=B};x.x=function(B){return arguments.length?(t=+B,x):t};x.y=function(B){return arguments.length?(w=+B,x):w};return x};p.forceCollide=function(t){function w(){function v(Q,
Z,ba,V,S){var T=Q.data;Q=Q.r;var fa=O+Q;if(T)T.index>K.index&&(Z=M-T.x-T.vx,ba=H-T.y-T.vy,V=Z*Z+ba*ba,V<fa*fa&&(0===Z&&(Z=h(),V+=Z*Z),0===ba&&(ba=h(),V+=ba*ba),V=(fa-(V=Math.sqrt(V)))/V*D,K.vx+=(Z*=V)*(fa=(Q*=Q)/(I+Q)),K.vy+=(ba*=V)*fa,T.vx-=Z*(fa=1-fa),T.vy-=ba*fa));else return Z>M+fa||V<M-fa||ba>H+fa||S<H-fa}for(var y,F=B.length,J,K,M,H,O,I,L=0;L<C;++L)for(J=n.quadtree(B,r,l).visitAfter(x),y=0;y<F;++y)K=B[y],O=A[K.index],I=O*O,M=K.x+K.vx,H=K.y+K.vy,J.visit(v)}function x(v){if(v.data)return v.r=
A[v.data.index];for(var y=v.r=0;4>y;++y)v[y]&&v[y].r>v.r&&(v.r=v[y].r)}function z(){if(B){var v,y=B.length;A=Array(y);for(v=0;v<y;++v){var F=B[v];A[F.index]=+t(F,v,B)}}}var B,A,D=1,C=1;"function"!==typeof t&&(t=g(null==t?1:+t));w.initialize=function(v){B=v;z()};w.iterations=function(v){return arguments.length?(C=+v,w):C};w.strength=function(v){return arguments.length?(D=+v,w):D};w.radius=function(v){return arguments.length?(t="function"===typeof v?v:g(+v),z(),w):t};return w};p.forceLink=function(t){function w(H){for(var O=
0,I=t.length;O<M;++O)for(var L=0,Q,Z,ba,V,S;L<I;++L)Q=t[L],Z=Q.source,Q=Q.target,ba=Q.x+Q.vx-Z.x-Z.vx||h(),V=Q.y+Q.vy-Z.y-Z.vy||h(),S=Math.sqrt(ba*ba+V*V),S=(S-y[L])/S*H*C[L],ba*=S,V*=S,Q.vx-=ba*(S=K[L]),Q.vy-=V*S,Z.vx+=ba*(S=1-S),Z.vy+=V*S}function x(){if(F){var H=F.length,O=t.length,I=k.map(F,A);var L=0;for(J=Array(H);L<O;++L)H=t[L],H.index=L,"object"!==typeof H.source&&(H.source=d(I,H.source)),"object"!==typeof H.target&&(H.target=d(I,H.target)),J[H.source.index]=(J[H.source.index]||0)+1,J[H.target.index]=
(J[H.target.index]||0)+1;L=0;for(K=Array(O);L<O;++L)H=t[L],K[L]=J[H.source.index]/(J[H.source.index]+J[H.target.index]);C=Array(O);z();y=Array(O);B()}}function z(){if(F)for(var H=0,O=t.length;H<O;++H)C[H]=+D(t[H],H,t)}function B(){if(F)for(var H=0,O=t.length;H<O;++H)y[H]=+v(t[H],H,t)}var A=c,D=function(H){return 1/Math.min(J[H.source.index],J[H.target.index])},C,v=g(30),y,F,J,K,M=1;null==t&&(t=[]);w.initialize=function(H){F=H;x()};w.links=function(H){return arguments.length?(t=H,x(),w):t};w.id=function(H){return arguments.length?
(A=H,w):A};w.iterations=function(H){return arguments.length?(M=+H,w):M};w.strength=function(H){return arguments.length?(D="function"===typeof H?H:g(+H),z(),w):D};w.distance=function(H){return arguments.length?(v="function"===typeof H?H:g(+H),B(),w):v};return w};p.forceManyBody=function(){function t(K){var M=B.length,H=n.quadtree(B,e,f).visitAfter(x);D=K;for(K=0;K<M;++K)A=B[K],H.visit(z)}function w(){if(B){var K,M=B.length;v=Array(M);for(K=0;K<M;++K){var H=B[K];v[H.index]=+C(H,K,B)}}}function x(K){var M=
0,H,O,I=0,L,Q,Z;if(K.length){for(L=Q=Z=0;4>Z;++Z)(H=K[Z])&&(O=Math.abs(H.value))&&(M+=H.value,I+=O,L+=O*H.x,Q+=O*H.y);K.x=L/I;K.y=Q/I}else{H=K;H.x=H.data.x;H.y=H.data.y;do M+=v[H.data.index];while(H=H.next)}K.value=M}function z(K,M,H,O){if(!K.value)return!0;H=K.x-A.x;var I=K.y-A.y;M=O-M;O=H*H+I*I;if(M*M/J<O)return O<F&&(0===H&&(H=h(),O+=H*H),0===I&&(I=h(),O+=I*I),O<y&&(O=Math.sqrt(y*O)),A.vx+=H*K.value*D/O,A.vy+=I*K.value*D/O),!0;if(!(K.length||O>=F)){if(K.data!==A||K.next)0===H&&(H=h(),O+=H*H),0===
I&&(I=h(),O+=I*I),O<y&&(O=Math.sqrt(y*O));do K.data!==A&&(M=v[K.data.index]*D/O,A.vx+=H*M,A.vy+=I*M);while(K=K.next)}}var B,A,D,C=g(-30),v,y=1,F=Infinity,J=.81;t.initialize=function(K){B=K;w()};t.strength=function(K){return arguments.length?(C="function"===typeof K?K:g(+K),w(),t):C};t.distanceMin=function(K){return arguments.length?(y=K*K,t):Math.sqrt(y)};t.distanceMax=function(K){return arguments.length?(F=K*K,t):Math.sqrt(F)};t.theta=function(K){return arguments.length?(J=K*K,t):Math.sqrt(J)};return t};
p.forceRadial=function(t,w,x){function z(y){for(var F=0,J=A.length;F<J;++F){var K=A[F],M=K.x-w||1E-6,H=K.y-x||1E-6,O=Math.sqrt(M*M+H*H);O=(v[F]-O)*C[F]*y/O;K.vx+=M*O;K.vy+=H*O}}function B(){if(A){var y,F=A.length;C=Array(F);v=Array(F);for(y=0;y<F;++y)v[y]=+t(A[y],y,A),C[y]=isNaN(v[y])?0:+D(A[y],y,A)}}var A,D=g(.1),C,v;"function"!==typeof t&&(t=g(+t));null==w&&(w=0);null==x&&(x=0);z.initialize=function(y){A=y;B()};z.strength=function(y){return arguments.length?(D="function"===typeof y?y:g(+y),B(),
z):D};z.radius=function(y){return arguments.length?(t="function"===typeof y?y:g(+y),B(),z):t};z.x=function(y){return arguments.length?(w=+y,z):w};z.y=function(y){return arguments.length?(x=+y,z):x};return z};p.forceSimulation=function(t){function w(){x();M.call("tick",A);D<C&&(K.stop(),M.call("end",A))}function x(H){var O,I=t.length;void 0===H&&(H=1);for(var L=0;L<H;++L)for(D+=(y-D)*v,J.each(function(Z){Z(D)}),O=0;O<I;++O){var Q=t[O];null==Q.fx?Q.x+=Q.vx*=F:(Q.x=Q.fx,Q.vx=0);null==Q.fy?Q.y+=Q.vy*=
F:(Q.y=Q.fy,Q.vy=0)}return A}function z(){for(var H=0,O=t.length,I;H<O;++H){I=t[H];I.index=H;null!=I.fx&&(I.x=I.fx);null!=I.fy&&(I.y=I.fy);if(isNaN(I.x)||isNaN(I.y)){var L=10*Math.sqrt(H),Q=H*q;I.x=L*Math.cos(Q);I.y=L*Math.sin(Q)}if(isNaN(I.vx)||isNaN(I.vy))I.vx=I.vy=0}}function B(H){H.initialize&&H.initialize(t);return H}var A,D=1,C=.001,v=1-Math.pow(C,1/300),y=0,F=.6,J=k.map(),K=a.timer(w),M=m.dispatch("tick","end");null==t&&(t=[]);z();return A={tick:x,restart:function(){return K.restart(w),A},
stop:function(){return K.stop(),A},nodes:function(H){return arguments.length?(t=H,z(),J.each(B),A):t},alpha:function(H){return arguments.length?(D=+H,A):D},alphaMin:function(H){return arguments.length?(C=+H,A):C},alphaDecay:function(H){return arguments.length?(v=+H,A):+v},alphaTarget:function(H){return arguments.length?(y=+H,A):y},velocityDecay:function(H){return arguments.length?(F=1-H,A):1-F},force:function(H,O){return 1<arguments.length?(null==O?J.remove(H):J.set(H,B(O)),A):J.get(H)},find:function(H,
O,I){var L,Q=t.length;I=null==I?Infinity:I*I;for(L=0;L<Q;++L){var Z=t[L];var ba=H-Z.x;var V=O-Z.y;ba=ba*ba+V*V;if(ba<I){var S=Z;I=ba}}return S},on:function(H,O){return 1<arguments.length?(M.on(H,O),A):M.on(H)}}};p.forceX=function(t){function w(C){for(var v=0,y=B.length,F;v<y;++v)F=B[v],F.vx+=(D[v]-F.x)*A[v]*C}function x(){if(B){var C,v=B.length;A=Array(v);D=Array(v);for(C=0;C<v;++C)A[C]=isNaN(D[C]=+t(B[C],C,B))?0:+z(B[C],C,B)}}var z=g(.1),B,A,D;"function"!==typeof t&&(t=g(null==t?0:+t));w.initialize=
function(C){B=C;x()};w.strength=function(C){return arguments.length?(z="function"===typeof C?C:g(+C),x(),w):z};w.x=function(C){return arguments.length?(t="function"===typeof C?C:g(+C),x(),w):t};return w};p.forceY=function(t){function w(C){for(var v=0,y=B.length,F;v<y;++v)F=B[v],F.vy+=(D[v]-F.y)*A[v]*C}function x(){if(B){var C,v=B.length;A=Array(v);D=Array(v);for(C=0;C<v;++C)A[C]=isNaN(D[C]=+t(B[C],C,B))?0:+z(B[C],C,B)}}var z=g(.1),B,A,D;"function"!==typeof t&&(t=g(null==t?0:+t));w.initialize=function(C){B=
C;x()};w.strength=function(C){return arguments.length?(z="function"===typeof C?C:g(+C),x(),w):z};w.y=function(C){return arguments.length?(t="function"===typeof C?C:g(+C),x(),w):t};return w};Object.defineProperty(p,"__esModule",{value:!0})})},{"d3-collection":163,"d3-dispatch":165,"d3-quadtree":173,"d3-timer":178}],167:[function(b,N,G){(function(p,n){"object"===typeof G&&"undefined"!==typeof N?n(G):(p="undefined"!==typeof globalThis?globalThis:p||self,n(p.d3=p.d3||{}))})(this,function(p){function n(z,
B){if(0>(B=(z=B?z.toExponential(B-1):z.toExponential()).indexOf("e")))return null;var A=z.slice(0,B);return[1<A.length?A[0]+A.slice(2):A,+z.slice(B+1)]}function k(z){return z=n(Math.abs(z)),z?z[1]:NaN}function m(z,B){return function(A,D){for(var C=A.length,v=[],y=0,F=z[0],J=0;0<C&&0<F;){J+F+1>D&&(F=Math.max(1,D-J));v.push(A.substring(C-=F,C+F));if((J+=F+1)>D)break;F=z[y=(y+1)%z.length]}return v.reverse().join(B)}}function a(z){return function(B){return B.replace(/[0-9]/g,function(A){return z[+A]})}}
function g(z){if(!(B=e.exec(z)))throw Error("invalid format: "+z);var B;return new h({fill:B[1],align:B[2],sign:B[3],symbol:B[4],zero:B[5],width:B[6],comma:B[7],precision:B[8]&&B[8].slice(1),trim:B[9],type:B[10]})}function h(z){this.fill=void 0===z.fill?" ":z.fill+"";this.align=void 0===z.align?"\x3e":z.align+"";this.sign=void 0===z.sign?"-":z.sign+"";this.symbol=void 0===z.symbol?"":z.symbol+"";this.zero=!!z.zero;this.width=void 0===z.width?void 0:+z.width;this.comma=!!z.comma;this.precision=void 0===
z.precision?void 0:+z.precision;this.trim=!!z.trim;this.type=void 0===z.type?"":z.type+""}function r(z,B){B=n(z,B);if(!B)return z+"";z=B[0];B=B[1];return 0>B?"0."+Array(-B).join("0")+z:z.length>B+1?z.slice(0,B+1)+"."+z.slice(B+1):z+Array(B-z.length+2).join("0")}function l(z){return z}function c(z){function B(M){function H(ia){var ra=W,wa=aa,pa,la;if("c"===fa)wa=ja(ia)+wa,ia="";else{ia=+ia;var ka=0>ia||0>1/ia;ia=isNaN(ia)?K:ja(Math.abs(ia),S);if(T){var na=ia.length,oa=1,sa=-1;a:for(;oa<na;++oa)switch(ia[oa]){case ".":sa=
pa=oa;break;case "0":0===sa&&(sa=oa);pa=oa;break;default:if(!+ia[oa])break a;0<sa&&(sa=0)}ia=0<sa?ia.slice(0,sa)+ia.slice(pa+1):ia}ka&&0===+ia&&"+"!==L&&(ka=!1);ra=(ka?"("===L?L:J:"-"===L||"("===L?"":L)+ra;wa=("s"===fa?w[8+f/3]:"")+wa+(ka&&"("===L?")":"");if(ma)for(ka=-1,pa=ia.length;++ka<pa;)if(la=ia.charCodeAt(ka),48>la||57<la){wa=(46===la?v+ia.slice(ka+1):ia.slice(ka))+wa;ia=ia.slice(0,ka);break}}V&&!Z&&(ia=A(ia,Infinity));la=ra.length+ia.length+wa.length;ka=la<ba?Array(ba-la+1).join(O):"";V&&
Z&&(ia=A(ka+ia,ka.length?ba-wa.length:Infinity),ka="");switch(I){case "\x3c":ia=ra+ia+wa+ka;break;case "\x3d":ia=ra+ka+ia+wa;break;case "^":ia=ka.slice(0,la=ka.length>>1)+ra+ia+wa+ka.slice(la);break;default:ia=ka+ra+ia+wa}return y(ia)}M=g(M);var O=M.fill,I=M.align,L=M.sign,Q=M.symbol,Z=M.zero,ba=M.width,V=M.comma,S=M.precision,T=M.trim,fa=M.type;"n"===fa?(V=!0,fa="g"):q[fa]||(void 0===S&&(S=12),T=!0,fa="g");if(Z||"0"===O&&"\x3d"===I)Z=!0,O="0",I="\x3d";var W="$"===Q?D:"#"===Q&&/[boxX]/.test(fa)?"0"+
fa.toLowerCase():"",aa="$"===Q?C:/[%p]/.test(fa)?F:"",ja=q[fa],ma=/[defgprs%]/.test(fa);S=void 0===S?6:/[gprs]/.test(fa)?Math.max(1,Math.min(21,S)):Math.max(0,Math.min(20,S));H.toString=function(){return M+""};return H}var A=void 0===z.grouping||void 0===z.thousands?l:m(t.call(z.grouping,Number),z.thousands+""),D=void 0===z.currency?"":z.currency[0]+"",C=void 0===z.currency?"":z.currency[1]+"",v=void 0===z.decimal?".":z.decimal+"",y=void 0===z.numerals?l:a(t.call(z.numerals,String)),F=void 0===z.percent?
"%":z.percent+"",J=void 0===z.minus?"-":z.minus+"",K=void 0===z.nan?"NaN":z.nan+"";return{format:B,formatPrefix:function(M,H){var O=B((M=g(M),M.type="f",M));M=3*Math.max(-8,Math.min(8,Math.floor(k(H)/3)));var I=Math.pow(10,-M),L=w[8+M/3];return function(Q){return O(I*Q)+L}}}}function d(z){x=c(z);p.format=x.format;p.formatPrefix=x.formatPrefix;return x}var e=/^(?:(.)?([<>=^]))?([+\-( ])?([$#])?(0)?(\d+)?(,)?(\.\d+)?(~)?([a-z%])?$/i;g.prototype=h.prototype;h.prototype.toString=function(){return this.fill+
this.align+this.sign+this.symbol+(this.zero?"0":"")+(void 0===this.width?"":Math.max(1,this.width|0))+(this.comma?",":"")+(void 0===this.precision?"":"."+Math.max(0,this.precision|0))+(this.trim?"~":"")+this.type};var f,q={"%":function(z,B){return(100*z).toFixed(B)},b:function(z){return Math.round(z).toString(2)},c:function(z){return z+""},d:function(z){return 1E21<=Math.abs(z=Math.round(z))?z.toLocaleString("en").replace(/,/g,""):z.toString(10)},e:function(z,B){return z.toExponential(B)},f:function(z,
B){return z.toFixed(B)},g:function(z,B){return z.toPrecision(B)},o:function(z){return Math.round(z).toString(8)},p:function(z,B){return r(100*z,B)},r,s:function(z,B){var A=n(z,B);if(!A)return z+"";var D=A[0];A=A[1];A=A-(f=3*Math.max(-8,Math.min(8,Math.floor(A/3))))+1;var C=D.length;return A===C?D:A>C?D+Array(A-C+1).join("0"):0<A?D.slice(0,A)+"."+D.slice(A):"0."+Array(1-A).join("0")+n(z,Math.max(0,B+A-1))[0]},X:function(z){return Math.round(z).toString(16).toUpperCase()},x:function(z){return Math.round(z).toString(16)}},
t=Array.prototype.map,w="y z a f p n  m  k M G T P E Z Y".split(" "),x;d({decimal:".",thousands:",",grouping:[3],currency:["$",""],minus:"-"});p.FormatSpecifier=h;p.formatDefaultLocale=d;p.formatLocale=c;p.formatSpecifier=g;p.precisionFixed=function(z){return Math.max(0,-k(Math.abs(z)))};p.precisionPrefix=function(z,B){return Math.max(0,3*Math.max(-8,Math.min(8,Math.floor(k(B)/3)))-k(Math.abs(z)))};p.precisionRound=function(z,B){z=Math.abs(z);B=Math.abs(B)-z;return Math.max(0,k(B)-k(z))+1};Object.defineProperty(p,
"__esModule",{value:!0})})},{}],168:[function(b,N,G){(function(p,n){"object"===typeof G&&"undefined"!==typeof N?n(G,b("d3-geo"),b("d3-array")):n(p.d3=p.d3||{},p.d3,p.d3)})(this,function(p,n,k){function m(Ga){return 1<Ga?Bc:-1>Ga?-Bc:Math.asin(Ga)}function a(Ga){return 1<Ga?0:-1>Ga?Yb:Math.acos(Ga)}function g(Ga){return 0<Ga?Math.sqrt(Ga):0}function h(Ga){return(Mc(Ga)-Mc(-Ga))/2}function r(Ga){return(Mc(Ga)+Mc(-Ga))/2}function l(Ga){function Fa(cb,jb){var Bb=Zb(cb),Xb=Zb(jb);jb=xb(jb);Bb*=Xb;Bb=-((1-
Bb?rd((1+Bb)/2)/(1-Bb):-.5)+Sa/(1+Bb));return[Bb*Xb*xb(cb),Bb*jb]}var Oa=oc(Ga/2),Sa=2*rd(Zb(Ga/2))/(Oa*Oa);Fa.invert=function(cb,jb){var Bb=g(cb*cb+jb*jb),Xb=-Ga/2,Ib=50;if(!Bb)return[0,0];do{var gc=Xb/2;var hc=Zb(gc);gc=xb(gc);var qc=gc/hc,Ec=-rd(Zc(hc));Xb-=hc=(2/qc*Ec-Sa*qc-Bb)/(-Ec/(gc*gc)+1-Sa/(2*hc*hc))*(0>hc?.7:1)}while(1E-6<Zc(hc)&&0<--Ib);Ib=xb(Xb);return[Ob(cb*Ib,Bb*Zb(Xb)),m(jb*Ib/Bb)]};return Fa}function c(Ga,Fa){var Oa=Zb(Fa);var Sa=(Sa=a(Oa*Zb(Ga/=2)))?Sa/Math.sin(Sa):1;return[2*Oa*
xb(Ga)*Sa,xb(Fa)*Sa]}function d(Ga){function Fa(Xb,Ib){var gc=Zb(Ib),hc=Zb(Xb/=2);return[(1+gc)*xb(Xb),(cb*Ib>-Ob(hc,jb)-.001?0:10*-cb)+Bb+xb(Ib)*Sa-(1+gc)*Oa*hc]}var Oa=xb(Ga),Sa=Zb(Ga),cb=0<=Ga?1:-1,jb=oc(cb*Ga),Bb=(1+Oa-Sa)/2;Fa.invert=function(Xb,Ib){var gc=0,hc=0,qc=50;do{var Ec=Zb(gc),ld=xb(gc),Dd=Zb(hc),ye=xb(hc),ze=1+Dd,We=ze*ld-Xb,fg=Bb+ye*Sa-ze*Oa*Ec-Ib,He=ze*Ec/2,cg=-ld*ye;ld=Oa*ze*ld/2;Dd=Sa*Dd+Oa*Ec*ye;Ec=cg*ld-Dd*He;cg=(fg*cg-We*Dd)/Ec/2;We=(We*ld-fg*He)/Ec;2<Zc(We)&&(We/=2);gc-=cg;
hc-=We}while((1E-6<Zc(cg)||1E-6<Zc(We))&&0<--qc);return cb*hc>-Ob(Zb(gc),jb)-.001?[2*gc,hc]:null};return Fa}function e(Ga,Fa){Fa=oc(Fa/2);var Oa=g(1-Fa*Fa),Sa=1+Oa*Zb(Ga/=2);Ga=xb(Ga)*Oa/Sa;Fa/=Sa;Sa=Ga*Ga;Oa=Fa*Fa;return[4/3*Ga*(3+Sa-3*Oa),4/3*Fa*(3+3*Sa-Oa)]}function f(Ga,Fa){var Oa=Zc(Fa);return Oa<Yc?[Ga,rd(oc(Yc+Fa/2))]:[Ga*Zb(Oa)*(2*Tc-1/xb(Oa)),oe(Fa)*(2*Tc*(Oa-Yc)-rd(oc(Oa/2)))]}function q(Ga){function Fa(Sa,cb){cb=n.geoAzimuthalEquidistantRaw(Sa,cb);if(Zc(Sa)>Bc){Sa=Ob(cb[1],cb[0]);var jb=
g(cb[0]*cb[0]+cb[1]*cb[1]),Bb=Oa*Ge((Sa-Bc)/Oa)+Bc,Xb=Ob(xb(Sa-=Bb),2-Zb(Sa));Sa=Bb+m(Yb/jb*xb(Xb))-Xb;cb[0]=jb*Zb(Sa);cb[1]=jb*xb(Sa)}return cb}var Oa=2*Yb/Ga;Fa.invert=function(Sa,cb){var jb=g(Sa*Sa+cb*cb);if(jb>Bc){var Bb=Ob(cb,Sa);Sa=Oa*Ge((Bb-Bc)/Oa)+Bc;cb=Bb>Sa?-1:1;Bb=jb*Zb(Sa-Bb);Bb=1/oc(cb*a((Bb-Yb)/g(Yb*(Yb-2*Bb)+jb*jb)));Bb=Sa+2*Bd((Bb+cb*g(Bb*Bb-3))/3);Sa=jb*Zb(Bb);cb=jb*xb(Bb)}return n.geoAzimuthalEquidistantRaw.invert(Sa,cb)};return Fa}function t(Ga,Fa){function Oa(Sa,cb){Sa=n.geoAzimuthalEqualAreaRaw(Sa/
Fa,cb);Sa[0]*=Ga;return Sa}2>arguments.length&&(Fa=Ga);if(1===Fa)return n.geoAzimuthalEqualAreaRaw;if(Infinity===Fa)return w;Oa.invert=function(Sa,cb){Sa=n.geoAzimuthalEqualAreaRaw.invert(Sa/Ga,cb);Sa[0]*=Fa;return Sa};return Oa}function w(Ga,Fa){return[Ga*Zb(Fa)/Zb(Fa/=2),2*xb(Fa)]}function x(Ga,Fa,Oa){var Sa=100;Oa=void 0===Oa?0:+Oa;Fa=+Fa;do{var cb=Ga(Oa);var jb=Ga(Oa+1E-6);cb===jb&&(jb=cb+1E-6);Oa-=cb=-1E-6*(cb-Fa)/(cb-jb)}while(0<Sa--&&1E-6<Zc(cb));return 0>Sa?NaN:Oa}function z(Ga,Fa,Oa){void 0===
Fa&&(Fa=40);void 0===Oa&&(Oa=1E-12);return function(Sa,cb,jb,Bb){jb=void 0===jb?0:+jb;Bb=void 0===Bb?0:+Bb;for(var Xb=0;Xb<Fa;Xb++){var Ib=Ga(jb,Bb),gc=Ib[0]-Sa,hc=Ib[1]-cb;if(Zc(gc)<Oa&&Zc(hc)<Oa)break;var qc=gc*gc+hc*hc;if(qc>Ec)jb-=Dd/=2,Bb-=ze/=2;else{var Ec=qc;qc=(0<jb?-1:1)*Oa;var ld=(0<Bb?-1:1)*Oa;var Dd=Ga(jb+qc,Bb);var ye=Ga(jb,Bb+ld);var ze=(Dd[0]-Ib[0])/qc;qc=(Dd[1]-Ib[1])/qc;Dd=(ye[0]-Ib[0])/ld;Ib=(ye[1]-Ib[1])/ld;ld=Ib*ze-qc*Dd;ld=(.5>Zc(ld)?.5:1)/ld;Dd=(hc*Dd-gc*Ib)*ld;ze=(gc*qc-hc*
ze)*ld;jb+=Dd;Bb+=ze;if(Zc(Dd)<Oa&&Zc(ze)<Oa)break}}return[jb,Bb]}}function B(){function Ga(Oa,Sa){if(-1.4>Oa+Sa){var cb=(Oa-Sa+1.6)*(Oa+Sa+1.4)/8;Oa+=cb;Sa-=.8*cb*xb(Sa+Yb/2)}cb=Fa(Oa,Sa);Oa=(1-Zb(Oa*Sa))/12;0>cb[1]&&(cb[0]*=1+Oa);0<cb[1]&&(cb[1]*=1+Oa/1.5*cb[0]*cb[0]);return cb}var Fa=t(1.68,2);Ga.invert=z(Ga);return Ga}function A(Ga,Fa){Ga*=xb(Fa);var Oa=30,Sa;do Fa-=Sa=(Fa+xb(Fa)-Ga)/(1+Zb(Fa));while(1E-6<Zc(Sa)&&0<--Oa);return Fa/2}function D(Ga,Fa,Oa){function Sa(cb,jb){return[Ga*cb*Zb(jb=A(Oa,
jb)),Fa*xb(jb)]}Sa.invert=function(cb,jb){return jb=m(jb/Fa),[cb/(Ga*Zb(jb)),m((2*jb+xb(2*jb))/Oa)]};return Sa}function C(Ga,Fa){var Oa=A(Yb,Fa);return[2.00276*Ga/(1/Zb(Fa)+1.11072/Zb(Oa)),(Fa+Tc*xb(Oa))/2.00276]}function v(Ga){var Fa=0,Oa=n.geoProjectionMutator(Ga);Ga=Oa(Fa);Ga.parallel=function(Sa){return arguments.length?Oa(Fa=Sa*pc):Fa*rc};return Ga}function y(Ga,Fa){return[Ga*Zb(Fa),Fa]}function F(Ga){function Fa(Sa,cb){var jb=Oa+Ga-cb;Sa=jb?Sa*Zb(cb)/jb:jb;return[jb*xb(Sa),Oa-jb*Zb(Sa)]}if(!Ga)return y;
var Oa=1/oc(Ga);Fa.invert=function(Sa,cb){var jb=g(Sa*Sa+(cb=Oa-cb)*cb),Bb=Oa+Ga-jb;return[jb/Zb(Bb)*Ob(Sa,cb),Bb]};return Fa}function J(Ga){function Fa(Oa,Sa){Oa=(Sa=Bc-Sa)?Oa*Ga*xb(Sa)/Sa:Sa;return[Sa*xb(Oa)/Ga,Bc-Sa*Zb(Oa)]}Fa.invert=function(Oa,Sa){Oa*=Ga;var cb=Bc-Sa;Sa=g(Oa*Oa+cb*cb);Oa=Ob(Oa,cb);return[(Sa?Sa/xb(Sa):1)*Oa/Ga,Bc-Sa]};return Fa}function K(Ga,Fa,Oa,Sa,cb,jb){var Bb=Zb(jb);if(1<Zc(Ga)||1<Zc(jb))Ga=a(Oa*cb+Fa*Sa*Bb);else{Ga=xb(Ga/2);var Xb=xb(jb/2);Ga=2*m(g(Ga*Ga+Fa*Sa*Xb*Xb))}return 1E-6<
Zc(Ga)?[Ga,Ob(Sa*xb(jb),Fa*cb-Oa*Sa*Bb)]:[0,0]}function M(Ga,Fa,Oa){return a((Ga*Ga+Fa*Fa-Oa*Oa)/(2*Ga*Fa))}function H(Ga,Fa,Oa){var Sa=[[Ga[0],Ga[1],xb(Ga[1]),Zb(Ga[1])],[Fa[0],Fa[1],xb(Fa[1]),Zb(Fa[1])],[Oa[0],Oa[1],xb(Oa[1]),Zb(Oa[1])]];Ga=Sa[2];for(Oa=0;3>Oa;++Oa,Ga=Fa)Fa=Sa[Oa],Ga.v=K(Fa[1]-Ga[1],Ga[3],Ga[2],Fa[3],Fa[2],Fa[0]-Ga[0]),Ga.point=[0,0];Ga=M(Sa[0].v[0],Sa[2].v[0],Sa[1].v[0]);var cb=M(Sa[0].v[0],Sa[1].v[0],Sa[2].v[0]),jb=Yb-Ga;Sa[2].point[1]=0;Sa[0].point[0]=-(Sa[1].point[0]=Sa[0].v[0]/
2);var Bb=[Sa[2].point[0]=Sa[0].point[0]+Sa[2].v[0]*Zb(Ga),2*(Sa[0].point[1]=Sa[1].point[1]=Sa[2].v[0]*xb(Ga))];return function(Xb,Ib){var gc=xb(Ib),hc=Zb(Ib),qc=Array(3),Ec;for(Ec=0;3>Ec;++Ec){var ld=Sa[Ec];qc[Ec]=K(Ib-ld[1],ld[3],ld[2],hc,gc,Xb-ld[0]);if(!qc[Ec][0])return ld.point;var Dd=qc[Ec];ld=qc[Ec][1]-ld.v[1];ld-=2*Yb*Fd((ld+Yb)/(2*Yb));Dd[1]=ld}Xb=Bb.slice();for(Ec=0;3>Ec;++Ec)Ib=M(Sa[Ec].v[0],qc[Ec][0],qc[2==Ec?0:Ec+1][0]),0>qc[Ec][1]&&(Ib=-Ib),Ec?1==Ec?(Ib=cb-Ib,Xb[0]-=qc[Ec][0]*Zb(Ib),
Xb[1]-=qc[Ec][0]*xb(Ib)):(Ib=jb-Ib,Xb[0]+=qc[Ec][0]*Zb(Ib),Xb[1]+=qc[Ec][0]*xb(Ib)):(Xb[0]+=qc[Ec][0]*Zb(Ib),Xb[1]-=qc[Ec][0]*xb(Ib));Xb[0]/=3;Xb[1]/=3;return Xb}}function O(Ga){return Ga[0]*=pc,Ga[1]*=pc,Ga}function I(Ga,Fa,Oa){var Sa=n.geoCentroid({type:"MultiPoint",coordinates:[Ga,Fa,Oa]});Sa=[-Sa[0],-Sa[1]];var cb=n.geoRotation(Sa);Ga=H(O(cb(Ga)),O(cb(Fa)),O(cb(Oa)));Ga.invert=z(Ga);Ga=n.geoProjection(Ga).rotate(Sa);var jb=Ga.center;delete Ga.rotate;Ga.center=function(Bb){return arguments.length?
jb(cb(Bb)):cb.invert(jb())};return Ga.clipAngle(90)}function L(Ga,Fa){Fa=g(1-xb(Fa));return[2/Oc*Ga*Fa,Oc*(1-Fa)]}function Q(Ga){function Fa(Sa,cb){return[Sa,(Sa?Sa/xb(Sa):1)*(xb(cb)*Zb(Sa)-Oa*Zb(cb))]}var Oa=oc(Ga);Fa.invert=Oa?function(Sa,cb){Sa&&(cb*=xb(Sa)/Sa);var jb=Zb(Sa);return[Sa,2*Ob(g(jb*jb+Oa*Oa-cb*cb)-jb,Oa-cb)]}:function(Sa,cb){return[Sa,m(Sa?cb*oc(Sa)/Sa:cb)]};return Fa}function Z(Ga,Fa){return[Xd*Ga*(2*Zb(2*Fa/3)-1)/Oc,Xd*Oc*xb(Fa/3)]}function ba(Ga){function Fa(Sa,cb){return[Sa*Oa,
xb(cb)/Oa]}var Oa=Zb(Ga);Fa.invert=function(Sa,cb){return[Sa/Oa,m(cb*Oa)]};return Fa}function V(Ga){function Fa(Sa,cb){return[Sa*Oa,(1+Oa)*oc(cb/2)]}var Oa=Zb(Ga);Fa.invert=function(Sa,cb){return[Sa/Oa,2*Bd(cb/(1+Oa))]};return Fa}function S(Ga,Fa){var Oa=g(8/(3*Yb));return[Oa*Ga*(1-Zc(Fa)/Yb),Oa*Fa]}function T(Ga,Fa){var Oa=g(4-3*xb(Zc(Fa)));return[2/g(6*Yb)*Ga*Oa,oe(Fa)*g(2*Yb/3)*(2-Oa)]}function fa(Ga,Fa){var Oa=g(Yb*(4+Yb));return[2/Oa*Ga*(1+g(1-4*Fa*Fa/(Yb*Yb))),4/Oa*Fa]}function W(Ga,Fa){var Oa=
(2+Bc)*xb(Fa);Fa/=2;for(var Sa=0,cb=Infinity;10>Sa&&1E-6<Zc(cb);Sa++)cb=Zb(Fa),Fa-=cb=(Fa+xb(Fa)*(cb+2)-Oa)/(2*cb*(1+cb));return[2/g(Yb*(4+Yb))*Ga*(1+Zb(Fa)),2*g(Yb/(4+Yb))*xb(Fa)]}function aa(Ga,Fa){return[Ga*(1+Zb(Fa))/g(2+Yb),2*Fa/g(2+Yb)]}function ja(Ga,Fa){for(var Oa=(1+Bc)*xb(Fa),Sa=0,cb=Infinity;10>Sa&&1E-6<Zc(cb);Sa++)Fa-=cb=(Fa+xb(Fa)-Oa)/(1+Zb(Fa));Oa=g(2+Yb);return[Ga*(1+Zb(Fa))/Oa,2*Fa/Oa]}function ma(Ga,Fa){var Oa=xb(Ga/=2);Ga=Zb(Ga);var Sa=g(Zb(Fa)),cb=Zb(Fa/=2);Fa=xb(Fa)/(cb+Tc*Ga*
Sa);var jb=g(2/(1+Fa*Fa));Oa=g((Tc*cb+(Ga+Oa)*Sa)/(Tc*cb+(Ga-Oa)*Sa));return[bf*(jb*(Oa-1/Oa)-2*rd(Oa)),bf*(jb*Fa*(Oa+1/Oa)-2*Bd(Fa))]}function ia(Ga,Fa){Fa=oc(Fa/2);return[Ga*Ve*g(1-Fa*Fa),(1+Ve)*Fa]}function ra(Ga,Fa){var Oa=Fa/2,Sa=Zb(Oa);return[2*Ga/Oc*Zb(Fa)*Sa*Sa,Oc*oc(Oa)]}function wa(Ga){function Fa(Ib,gc){var hc=Zb(gc),qc=xb(gc);return[hc/(cb+Ga*hc)*Ib,cb*gc+Ga*qc]}function Oa(Ib,gc){Ib=Fa(Ib,gc);return[Ib[0]*Xb,Ib[1]/Xb]}function Sa(Ib){return Oa(0,Ib)[1]}var cb=1-Ga,jb=Fa(Yb,0)[0]-Fa(-Yb,
0)[0],Bb=Fa(0,Bc)[1]-Fa(0,-Bc)[1],Xb=g(2*Bb/jb);Oa.invert=function(Ib,gc){gc=x(Sa,gc);return[Ib/Xb*(Ga+cb/Zb(gc)),gc]};return Oa}function pa(Ga){return[2*Ga[0],2*Bd(xb(Ga[1]*pc))*rc]}function la(Ga,Fa){function Oa(jb,Bb){jb=n.geoAzimuthalEquidistantRaw(jb,Bb);Bb=jb[0];var Xb=jb[1],Ib=Bb*Bb+Xb*Xb;if(Ib>cb){var gc=g(Ib);Bb=Ob(Xb,Bb);Ib=Sa*Ge(Bb/Sa);Xb=Bb-Ib;var hc=Ga*Zb(Xb),qc=(Ga*xb(Xb)-Xb*xb(hc))/(Bc-hc),Ec=ka(Xb,qc),ld=(Yb-Ga)/na(Ec,hc,Yb);Bb=gc;var Dd=50,ye;do Bb-=ye=(Ga+na(Ec,hc,Bb)*ld-gc)/(Ec(Bb)*
ld);while(1E-6<Zc(ye)&&0<--Dd);Xb*=xb(Bb);Bb<Bc&&(Xb-=qc*(Bb-Bc));gc=xb(Ib);Ib=Zb(Ib);jb[0]=Bb*Ib-Xb*gc;jb[1]=Bb*gc+Xb*Ib}return jb}var Sa=2*Yb/Fa,cb=Ga*Ga;Oa.invert=function(jb,Bb){var Xb=jb*jb+Bb*Bb;if(Xb>cb){var Ib=g(Xb);Bb=Ob(Bb,jb);Xb=Sa*Ge(Bb/Sa);Bb-=Xb;jb=Ib*Zb(Bb);Bb=Ib*xb(Bb);Ib=jb-Bc;for(var gc=xb(jb),hc=Bb/gc,qc=jb<Bc?Infinity:0,Ec=10;;){var ld=Ga*xb(hc),Dd=Ga*Zb(hc),ye=xb(Dd),ze=Bc-Dd,We=(ld-hc*ye)/ze,fg=ka(hc,We);if(1E-12>Zc(qc)||!--Ec)break;hc-=qc=(hc*gc-We*Ib-Bb)/(gc-2*Ib*(ze*(Dd+hc*
ld*Zb(Dd)-ye)-ld*(ld-hc*ye))/(ze*ze))}Ib=Ga+na(fg,Dd,jb)*(Yb-Ga)/na(fg,Dd,Yb);Bb=Xb+hc;jb=Ib*Zb(Bb);Bb=Ib*xb(Bb)}return n.geoAzimuthalEquidistantRaw.invert(jb,Bb)};return Oa}function ka(Ga,Fa){return function(Oa){var Sa=Ga*Zb(Oa);Oa<Bc&&(Sa-=Fa);return g(1+Sa*Sa)}}function na(Ga,Fa,Oa){var Sa=(Oa-Fa)/50;Oa=Ga(Fa)+Ga(Oa);for(var cb=1;50>cb;++cb)Oa+=2*Ga(Fa+=Sa);return.5*Oa*Sa}function oa(Ga,Fa,Oa,Sa,cb,jb,Bb,Xb){function Ib(gc,hc){if(!hc)return[Ga*gc/Yb,0];var qc=hc*hc,Ec=Ga+qc*(Fa+qc*(Oa+qc*Sa)),
ld=hc*(cb-1+qc*(jb-Xb+qc*Bb));ld=(Ec*Ec+ld*ld)/(2*ld);gc=gc*m(Ec/ld)/Yb;return[ld*xb(gc),hc*(1+qc*Xb)+ld*(1-Zb(gc))]}8>arguments.length&&(Xb=0);Ib.invert=function(gc,hc){var qc=Yb*gc/Ga,Ec=hc,ld=50;do{var Dd=Ec*Ec,ye=Ga+Dd*(Fa+Dd*(Oa+Dd*Sa)),ze=Ec*(cb-1+Dd*(jb-Xb+Dd*Bb)),We=ye*ye+ze*ze,fg=2*ze;var He=We/fg;var cg=He*He;var Xf=m(ye/He)/Yb;var Af=qc*Xf,Pg=ye*ye,Mg=(2*Fa+Dd*(4*Oa+6*Dd*Sa))*Ec,vg=cb+Dd*(3*jb+5*Dd*Bb);ze=(2*(ye*Mg+ze*(vg-1))*fg-2*We*(vg-1))/(fg*fg);We=Zb(Af);vg=xb(Af);fg=He*We;Af=He*vg;
cg=qc/Yb*(1/g(1-Pg/cg))*(Mg*He-ye*ze)/cg;ye=Af-gc;Dd=Ec*(1+Dd*Xb)+He-fg-hc;He=ze*vg+fg*cg;Pg=fg*Xf;ze=1+ze-(ze*We-Af*cg);Xf*=Af;We=He*Xf-ze*Pg;if(!We)break;qc-=He=(Dd*He-ye*ze)/We;Ec-=Xf=(ye*Xf-Dd*Pg)/We}while((1E-6<Zc(He)||1E-6<Zc(Xf))&&0<--ld);return[qc,Ec]};return Ib}function sa(Ga,Fa){var Oa=Ga*Ga,Sa=Fa*Fa;return[Ga*(1-.162388*Sa)*(.87-9.52426E-4*Oa*Oa),Fa*(1+Sa/12)]}function za(Ga){function Fa(Sa,cb){var jb=0<Sa?-.5:.5;Sa=Ga(Sa+jb*Yb,cb);Sa[0]-=jb*Oa;return Sa}var Oa=Ga(Bc,0)[0]-Ga(-Bc,0)[0];
Ga.invert&&(Fa.invert=function(Sa,cb){var jb=0<Sa?-.5:.5;Sa=Ga.invert(Sa+jb*Oa,cb);jb=Sa[0]-jb*Yb;jb<-Yb?jb+=2*Yb:jb>Yb&&(jb-=2*Yb);Sa[0]=jb;return Sa});return Fa}function Ha(Ga,Fa){var Oa=oe(Ga),Sa=oe(Fa),cb=Zb(Fa),jb=Zb(Ga)*cb;Ga=xb(Ga)*cb;Fa=xb(Sa*Fa);Ga=Zc(Ob(Ga,Fa));Fa=m(jb);1E-6<Zc(Ga-Bc)&&(Ga%=Bc);jb=Wa(Ga>Yb/4?Bc-Ga:Ga,Fa);Ga>Yb/4&&(Fa=jb[0],jb[0]=-jb[1],jb[1]=-Fa);return jb[0]*=Oa,jb[1]*=-Sa,jb}function Wa(Ga,Fa){if(Fa===Bc)return[0,0];var Oa=xb(Fa),Sa=Oa*Oa,cb=Sa*Sa,jb=1+cb,Bb=1+3*cb,Xb=
1-cb,Ib=m(1/g(jb)),gc=Xb+Sa*jb*Ib,hc=(1-Oa)/gc,qc=g(hc),Ec=hc*jb,ld=g(Ec),Dd=qc*Xb;if(0===Ga)return[0,-(Dd+Sa*ld)];var ye=Zb(Fa),ze=1/ye,We=2*Oa*ye;Ib=(-gc*ye-(1-Oa)*(-3*Sa+Ib*Bb)*We)/(gc*gc);Oa=-ze*We;jb=-ze*(Sa*jb*Ib+hc*Bb*We);Xb=-2*ze*(.5*Ib/qc*Xb-2*Sa*qc*We);qc=4*Ga/Yb;if(Ga>.222*Yb||Fa<Yb/4&&Ga>.175*Yb){Fa=(Dd+Sa*g(Ec*(1+cb)-Dd*Dd))/(1+cb);if(Ga>Yb/4)return[Fa,Fa];cb=Fa;ze=.5*Fa;Fa=.5*(ze+cb);Ga=50;do{We=g(Ec-Fa*Fa);We=Fa*(Xb+Oa*We)+jb*m(Fa/ld)-qc;if(!We)break;0>We?ze=Fa:cb=Fa;Fa=.5*(ze+cb)}while(1E-6<
Zc(cb-ze)&&0<--Ga)}else{Fa=1E-6;Ga=25;do We=Fa*Fa,cb=g(Ec-We),Bb=Xb+Oa*cb,ze=Fa*Bb+jb*m(Fa/ld)-qc,We=Bb+(jb-Oa*We)/cb,Fa-=cb=cb?ze/We:0;while(1E-6<Zc(cb)&&0<--Ga)}return[Fa,-Dd-Sa*g(Ec-Fa*Fa)]}function Za(Ga,Fa){if(1E-6>Fa){var Oa=xb(Ga);var Sa=Zb(Ga);var cb=Fa*(Ga-Oa*Sa)/4;return[Oa-cb*Sa,Sa+cb*Oa,1-Fa*Oa*Oa/2,Ga-cb]}if(.999999<=Fa){cb=(1-Fa)/4;Sa=r(Ga);Oa=Mc(2*Ga);Oa=(Oa-1)/(Oa+1);Fa=1/Sa;var jb=Sa*h(Ga);return[Oa+cb*(jb-Ga)/(Sa*Sa),Fa-cb*Oa*Fa*(jb-Ga),Fa+cb*Oa*Fa*(jb+Ga),2*Bd(Mc(Ga))-Bc+cb*(jb-
Ga)/Sa]}var Bb=[1,0,0,0,0,0,0,0,0],Xb=[g(Fa),0,0,0,0,0,0,0,0],Ib=0;Sa=g(1-Fa);for(jb=1;1E-6<Zc(Xb[Ib]/Bb[Ib])&&8>Ib;)cb=Bb[Ib++],Xb[Ib]=(cb-Sa)/2,Bb[Ib]=(cb+Sa)/2,Sa=g(cb*Sa),jb*=2;Fa=jb*Bb[Ib]*Ga;do Oa=Xb[Ib]*xb(Sa=Fa)/Bb[Ib],Fa=(m(Oa)+Fa)/2;while(--Ib);return[xb(Fa),Oa=Zb(Fa),Oa/Zb(Fa-Sa),Fa]}function bb(Ga,Fa){if(!Fa)return Ga;if(1===Fa)return rd(oc(Ga/2+Yc));var Oa=1,Sa=g(1-Fa),cb=g(Fa);for(Fa=0;1E-6<Zc(cb);Fa++)Ga%Yb?(cb=Bd(Sa*oc(Ga)/Oa),0>cb&&(cb+=Yb),Ga+=cb+~~(Ga/Yb)*Yb):Ga+=Ga,cb=(Oa+Sa)/
2,Sa=g(Oa*Sa),cb=((Oa=cb)-Sa)/2;return Ga/(qe(2,Fa)*Oa)}function sb(Ga,Fa){var Oa=(Tc-1)/(Tc+1),Sa=g(1-Oa*Oa),cb=bb(Bc,Sa*Sa),jb=rd(oc(Yb/4+Zc(Fa)/2));jb=Mc(-1*jb)/g(Oa);Oa=jb*Zb(-1*Ga);var Bb=jb*xb(-1*Ga);Ga=Oa*Oa;jb=Bb+1;Bb=1-Ga-Bb*Bb;Ga=[.5*((0<=Oa?Bc:-Bc)-Ob(Bb,2*Oa)),-.25*rd(Bb*Bb+4*Ga)+.5*rd(jb*jb+Ga)];Oa=Ga[0];Ga=Ga[1];Sa*=Sa;jb=Zc(Oa);Bb=Zc(Ga);Bb=h(Bb);if(jb){var Xb=1/xb(jb);jb=1/(oc(jb)*oc(jb));Bb=-(jb+Sa*Bb*Bb*Xb*Xb-1+Sa);Bb=(-Bb+g(Bb*Bb-4*(Sa-1)*jb))/2;Sa=[bb(Bd(1/g(Bb)),Sa)*oe(Oa),bb(Bd(g((Bb/
jb-1)/Sa)),1-Sa)*oe(Ga)]}else Sa=[0,bb(Bd(Bb),1-Sa)*oe(Ga)];return[-Sa[1],(0<=Fa?1:-1)*(.5*cb-Sa[0])]}function hb(Ga){function Fa(jb,Bb){var Xb=cb(jb,Bb);jb=Xb[0];Bb=Xb[1];Xb=xb(Bb);Bb=Zb(Bb);var Ib=Zb(jb),gc=a(Oa*Xb+Sa*Bb*Ib),hc=xb(gc);gc=1E-6<Zc(hc)?gc/hc:1;return[gc*Sa*xb(jb),(Zc(jb)>Bc?gc:-gc)*(Oa*Bb-Sa*Xb*Ib)]}var Oa=xb(Ga),Sa=Zb(Ga),cb=ub(Ga);cb.invert=ub(-Ga);Fa.invert=function(jb,Bb){var Xb=g(jb*jb+Bb*Bb),Ib=-xb(Xb),gc=Zb(Xb),hc=Xb*gc,qc=-Bb*Ib,Ec=Xb*Oa,ld=g(hc*hc+qc*qc-Ec*Ec);hc=Ob(hc*Ec+
qc*ld,qc*Ec-hc*ld);jb=(Xb>Bc?-1:1)*Ob(jb*Ib,Xb*Zb(hc)*gc+Bb*xb(hc)*Ib);return cb.invert(jb,hc)};return Fa}function ub(Ga){var Fa=xb(Ga),Oa=Zb(Ga);return function(Sa,cb){var jb=Zb(cb),Bb=Zb(Sa)*jb;Sa=xb(Sa)*jb;cb=xb(cb);return[Ob(Sa,Bb*Oa-cb*Fa),m(cb*Oa+Bb*Fa)]}}function pb(Ga){function Fa(hc,qc){var Ec=Zc(qc);if(Ec>Oa){var ld=Hd(Ga-1,pe(0,Fd((hc+Yb)/Xb)));hc+=Yb*(Ga-1)/Ga-ld*Xb;hc=L(hc,Ec);hc[0]=hc[0]*wc/Sa-wc*(Ga-1)/(2*Ga)+ld*wc/Ga;hc[1]=cb+4*(hc[1]-jb)*Bb/wc;0>qc&&(hc[1]=-hc[1])}else hc=Og(hc,qc);
hc[0]*=Ib;hc[1]/=gc;return hc}var Oa=Sg*pc,Sa=L(Yb,Oa)[0]-L(-Yb,Oa)[0],cb=Og(0,Oa)[1],jb=L(0,Oa)[1],Bb=Oc-jb,Xb=wc/Ga,Ib=4/wc,gc=cb+Bb*Bb*4/wc;Fa.invert=function(hc,qc){hc/=Ib;qc*=gc;var Ec=Zc(qc);if(Ec>cb){var ld=Hd(Ga-1,pe(0,Fd((hc+Yb)/Xb)));hc=(hc+Yb*(Ga-1)/Ga-ld*Xb)*Sa/wc;hc=L.invert(hc,.25*(Ec-cb)*wc/Bb+jb);hc[0]-=Yb*(Ga-1)/Ga-ld*Xb;0>qc&&(hc[1]=-hc[1]);return hc}return Og.invert(hc,qc)};return Fa}function Ab(Ga,Fa){return[Ga,Fa&1?89.999999:Sg]}function tb(Ga,Fa){return[Ga,Fa&1?-89.999999:-Sg]}
function vb(Ga){return[.999999*Ga[0],Ga[1]]}function qb(Ga){function Fa(hc,qc){var Ec=1-xb(qc);if(Ec&&2>Ec){var ld=Bc-qc,Dd=25;do{var ye=xb(ld);var ze=Zb(ld);qc=cb+Ob(ye,Oa-ze);ze=1+gc-2*Oa*ze;ld-=ye=(ld-Ib*cb-Oa*ye+ze*qc-.5*Ec*Bb)/(2*Oa*ye*qc)}while(1E-12<Zc(ye)&&0<--Dd);Ec=jb*g(ze);hc=hc*qc/Yb}else Ec=jb*(Ga+Ec),hc=hc*cb/Yb;return[Ec*xb(hc),Xb-Ec*Zb(hc)]}var Oa=1+Ga,Sa=xb(1/Oa),cb=m(Sa),jb=2*g(Yb/(Bb=Yb+4*cb*Oa)),Bb,Xb=.5*jb*(Oa+g(Ga*(2+Ga))),Ib=Ga*Ga,gc=Oa*Oa;Fa.invert=function(hc,qc){var Ec=hc*
hc+(qc-=Xb)*qc;qc=(1+gc-Ec/(jb*jb))/(2*Oa);var ld=a(qc),Dd=xb(ld),ye=cb+Ob(Dd,Oa-qc);return[m(hc/g(Ec))*Yb/ye,m(1-2*(ld-Ib*cb-Oa*Dd+(1+gc-2*Oa*qc)*ye)/Bb)]};return Fa}function zb(Ga,Fa){return-.7109889596207567<Fa?(Ga=Wd(Ga,Fa),Ga[1]+=.0528035274542,Ga):y(Ga,Fa)}function La(Ga,Fa){return.7109889596207567<Zc(Fa)?(Ga=Wd(Ga,Fa),Ga[1]-=0<Fa?.0528035274542:-.0528035274542,Ga):y(Ga,Fa)}function Ka(Ga,Fa,Oa,Sa){function cb(qc){return g(1+Ga*Zb(2*qc)+Fa*Zb(4*qc))}function jb(qc){qc*=Oa;return(2*qc+(1+Ga-
Fa/2)*xb(2*qc)+(Ga+Fa)/2*xb(4*qc)+Fa/2*xb(6*qc))/Oa}function Bb(qc){return cb(qc)*xb(qc)}var Xb=g(4*Yb/(2*Oa+(1+Ga-Fa/2)*xb(2*Oa)+(Ga+Fa)/2*xb(4*Oa)+Fa/2*xb(6*Oa))),Ib=g(Sa*xb(Oa)*g((1+Ga*Zb(2*Oa)+Fa*Zb(4*Oa))/(1+Ga+Fa))),gc=Oa*jb(1),hc=function(qc,Ec){var ld=Oa*x(jb,gc*xb(Ec)/Oa,Ec/Yb);isNaN(ld)&&(ld=Oa*oe(Ec));Ec=Xb*cb(ld);return[Ec*Ib*qc/Yb*Zb(ld),Ec/Ib*xb(ld)]};hc.invert=function(qc,Ec){Ec=x(Bb,Ec*Ib/Xb);return[qc*Yb/(Zb(Ec)*Xb*Ib*cb(Ec)),m(Oa*jb(Ec/Oa)/gc)]};0===Oa&&(Xb=g(Sa/Yb),hc=function(qc,
Ec){return[qc*Xb,xb(Ec)/Xb]},hc.invert=function(qc,Ec){return[qc/Xb,m(Ec*Xb)]});return hc}function ya(Ga,Fa,Oa,Sa,cb,jb,Bb,Xb,Ib,gc,hc){if(hc.nanEncountered)return NaN;var qc=Oa-Fa;var Ec=Ga(Fa+.25*qc);var ld=Ga(Oa-.25*qc);if(isNaN(Ec))hc.nanEncountered=!0;else if(isNaN(ld))hc.nanEncountered=!0;else{var Dd=qc*(Sa+4*Ec+cb)/12;var ye=qc*(cb+4*ld+jb)/12;var ze=Dd+ye;Bb=(ze-Bb)/15;if(gc>Ib)return hc.maxDepthCount++,ze+Bb;if(Math.abs(Bb)<Xb)return ze+Bb;qc=Fa+.5*qc;Fa=ya(Ga,Fa,qc,Sa,Ec,cb,Dd,.5*Xb,Ib,
gc+1,hc);if(isNaN(Fa))return hc.nanEncountered=!0,NaN;Ga=ya(Ga,qc,Oa,cb,ld,jb,ye,.5*Xb,Ib,gc+1,hc);return isNaN(Ga)?(hc.nanEncountered=!0,NaN):Fa+Ga}}function Aa(Ga,Fa,Oa,Sa,cb){void 0===Sa&&(Sa=1E-8);void 0===cb&&(cb=20);var jb=Ga(Fa),Bb=Ga(.5*(Fa+Oa)),Xb=Ga(Oa);return ya(Ga,Fa,Oa,jb,Bb,Xb,(jb+4*Bb+Xb)*(Oa-Fa)/6,Sa,cb,1,{maxDepthCount:0,nanEncountered:!1})}function Ja(Ga,Fa,Oa){function Sa(hc){return Ga+(1-Ga)*qe(1-qe(hc,Fa),1/Fa)}function cb(hc){var qc=0,Ec=1E3,ld=500;do Xb[ld]>hc?Ec=ld:qc=ld,ld=
qc+Ec>>1;while(ld>qc);(qc=Xb[ld+1]-Xb[ld])&&(qc=(hc-Xb[ld+1])/qc);return(ld+1+qc)/1E3}for(var jb=1/Aa(Sa,0,1,1E-4),Bb=1.00000001*jb,Xb=[],Ib=0;1E3>=Ib;Ib++)Xb.push(Aa(Sa,0,Ib/1E3,1E-4)*Bb);var gc=2*cb(1)/Yb*jb/Oa;Oa=function(hc,qc){var Ec=cb(Zc(xb(qc)));hc*=Sa(Ec);Ec/=gc;return[hc,0<=qc?Ec:-Ec]};Oa.invert=function(hc,qc){var Ec;qc*=gc;1>Zc(qc)&&(Ec=oe(qc)*m(Aa(Sa,0,Zc(qc),1E-4)*jb));return[hc/Sa(Zc(qc)),Ec]};return Oa}function Ta(Ga,Fa){for(var Oa=-1,Sa=Ga.length,cb=Ga[0],jb,Bb,Xb,Ib=[];++Oa<Sa;){jb=
Ga[Oa];Bb=(jb[0]-cb[0])/Fa;Xb=(jb[1]-cb[1])/Fa;for(var gc=0;gc<Fa;++gc)Ib.push([cb[0]+gc*Bb,cb[1]+gc*Xb]);cb=jb}Ib.push(jb);return Ib}function $a(Ga){var Fa=[],Oa,Sa=Ga[0].length;for(Oa=0;Oa<Sa;++Oa){var cb=Ga[0][Oa];var jb=cb[0][0];var Bb=cb[0][1];var Xb=cb[1][1];var Ib=cb[2][0];cb=cb[2][1];Fa.push(Ta([[jb+1E-6,Bb+1E-6],[jb+1E-6,Xb-1E-6],[Ib-1E-6,Xb-1E-6],[Ib-1E-6,cb+1E-6]],30))}for(Oa=Ga[1].length-1;0<=Oa;--Oa)cb=Ga[1][Oa],jb=cb[0][0],Bb=cb[0][1],Xb=cb[1][1],Ib=cb[2][0],cb=cb[2][1],Fa.push(Ta([[Ib-
1E-6,cb-1E-6],[Ib-1E-6,Xb+1E-6],[jb+1E-6,Xb+1E-6],[jb+1E-6,Bb-1E-6]],30));return{type:"Polygon",coordinates:[k.merge(Fa)]}}function ab(Ga,Fa,Oa){function Sa(Ib,gc){for(var hc=0>gc?-1:1,qc=Fa[+(0>gc)],Ec=0,ld=qc.length-1;Ec<ld&&Ib>qc[Ec][2][0];++Ec);Ib=Ga(Ib-qc[Ec][1][0],gc);Ib[0]+=Ga(qc[Ec][1][0],hc*gc>hc*qc[Ec][0][1]?qc[Ec][0][1]:gc)[0];return Ib}var cb,jb;Oa?Sa.invert=Oa(Sa):Ga.invert&&(Sa.invert=function(Ib,gc){for(var hc=jb[+(0>gc)],qc=Fa[+(0>gc)],Ec=0,ld=hc.length;Ec<ld;++Ec){var Dd=hc[Ec];if(Dd[0][0]<=
Ib&&Ib<Dd[1][0]&&Dd[0][1]<=gc&&gc<Dd[1][1])return hc=Ga.invert(Ib-Ga(qc[Ec][1][0],0)[0],gc),hc[0]+=qc[Ec][1][0],qc=Sa(hc[0],hc[1]),Ib=[Ib,gc],1E-6>Zc(qc[0]-Ib[0])&&1E-6>Zc(qc[1]-Ib[1])?hc:null}});var Bb=n.geoProjection(Sa),Xb=Bb.stream;Bb.stream=function(Ib){var gc=Bb.rotate(),hc=Xb(Ib),qc=(Bb.rotate([0,0]),Xb(Ib));Bb.rotate(gc);hc.sphere=function(){n.geoStream(cb,qc)};return hc};Bb.lobes=function(Ib){if(!arguments.length)return Fa.map(function(gc){return gc.map(function(hc){return[[hc[0][0]*rc,hc[0][1]*
rc],[hc[1][0]*rc,hc[1][1]*rc],[hc[2][0]*rc,hc[2][1]*rc]]})});cb=$a(Ib);Fa=Ib.map(function(gc){return gc.map(function(hc){return[[hc[0][0]*pc,hc[0][1]*pc],[hc[1][0]*pc,hc[1][1]*pc],[hc[2][0]*pc,hc[2][1]*pc]]})});jb=Fa.map(function(gc){return gc.map(function(hc){var qc=Ga(hc[0][0],hc[0][1])[0],Ec=Ga(hc[2][0],hc[2][1])[0],ld=Ga(hc[1][0],hc[0][1])[1];hc=Ga(hc[1][0],hc[1][1])[1];if(ld>hc){var Dd=ld;ld=hc;hc=Dd}return[[qc,ld],[Ec,hc]]})});return Bb};null!=Fa&&Bb.lobes(Fa);return Bb}function Db(Ga,Fa){return[3/
wc*Ga*g(Yb*Yb/3-Fa*Fa),Fa]}function Nb(Ga){function Fa(Oa,Sa){if(1E-6>Zc(Zc(Sa)-Bc))return[0,0>Sa?-2:2];Sa=xb(Sa);Sa=qe((1+Sa)/(1-Sa),Ga/2);var cb=.5*(Sa+1/Sa)+Zb(Oa*=Ga);return[2*xb(Oa)/cb,(Sa-1/Sa)/cb]}Fa.invert=function(Oa,Sa){var cb=Zc(Sa);if(1E-6>Zc(cb-2))return Oa?null:[0,oe(Sa)*Bc];if(2<cb)return null;Oa/=2;Sa/=2;cb=Oa*Oa;var jb=Sa*Sa;Sa=2*Sa/(1+cb+jb);Sa=qe((1+Sa)/(1-Sa),1/Ga);return[Ob(2*Oa,1-cb-jb)/Ga,m((Sa-1)/(Sa+1))]};return Fa}function ec(Ga,Fa){return[Ga*(1+g(Zb(Fa)))/2,Fa/(Zb(Fa/2)*
Zb(Ga/6))]}function ob(Ga,Fa){var Oa=Ga*Ga,Sa=Fa*Fa;return[Ga*(.975534+Sa*(-.119161+-.0143059*Oa+-.0547009*Sa)),Fa*(1.00384+Oa*(.0802894+-.02855*Sa+1.99025E-4*Oa)+Sa*(.0998909+-.0491032*Sa))]}function Cb(Ga,Fa){return[xb(Ga)/Zb(Fa),oc(Fa)*Zb(Ga)]}function Qb(Ga){function Fa(cb,jb){var Bb=jb-Ga,Xb=1E-6>Zc(Bb)?cb*Oa:1E-6>Zc(Xb=Yc+jb/2)||1E-6>Zc(Zc(Xb)-Bc)?0:cb*Bb/rd(oc(Xb)/Sa);return[Xb,Bb]}var Oa=Zb(Ga),Sa=oc(Yc+Ga/2);Fa.invert=function(cb,jb){var Bb,Xb=jb+Ga;return[1E-6>Zc(jb)?cb/Oa:1E-6>Zc(Bb=Yc+
Xb/2)||1E-6>Zc(Zc(Bb)-Bc)?0:cb*rd(oc(Bb)/Sa)/jb,Xb]};return Fa}function yc(Ga,Fa){return[Ga,1.25*rd(oc(Yc+.4*Fa))]}function Jc(Ga){function Fa(Sa,cb){var jb=Zb(cb),Bb=2/(1+jb*Zb(Sa));Sa=Bb*jb*xb(Sa);cb=Bb*xb(cb);Bb=Oa;jb=Ga[Bb];for(var Xb=jb[0],Ib=jb[1],gc;0<=--Bb;)jb=Ga[Bb],Xb=jb[0]+Sa*(gc=Xb)-cb*Ib,Ib=jb[1]+Sa*Ib+cb*gc;Xb=Sa*(gc=Xb)-cb*Ib;return[Xb,Sa*Ib+cb*gc]}var Oa=Ga.length-1;Fa.invert=function(Sa,cb){var jb=20,Bb=Sa,Xb=cb;do{for(var Ib=Oa,gc=Ga[Ib],hc=gc[0],qc=gc[1],Ec=0,ld=0,Dd;0<=--Ib;)gc=
Ga[Ib],Ec=hc+Bb*(Dd=Ec)-Xb*ld,ld=qc+Bb*ld+Xb*Dd,hc=gc[0]+Bb*(Dd=hc)-Xb*qc,qc=gc[1]+Bb*qc+Xb*Dd;Ec=hc+Bb*(Dd=Ec)-Xb*ld;ld=qc+Bb*ld+Xb*Dd;hc=Bb*(Dd=hc)-Xb*qc-Sa;qc=Bb*qc+Xb*Dd-cb;gc=Ec*Ec+ld*ld;Bb-=Ib=(hc*Ec+qc*ld)/gc;Xb-=hc=(qc*Ec-hc*ld)/gc}while(1E-12<Zc(Ib)+Zc(hc)&&0<--jb);if(jb)return Sa=g(Bb*Bb+Xb*Xb),cb=2*Bd(.5*Sa),jb=xb(cb),[Ob(Bb*jb,Sa*Zb(cb)),Sa?m(Xb*jb/Sa):0]};return Fa}function Ia(Ga,Fa){Ga=n.geoProjection(Jc(Ga)).rotate(Fa).clipAngle(90);var Oa=n.geoRotation(Fa),Sa=Ga.center;delete Ga.rotate;
Ga.center=function(cb){return arguments.length?Sa(Oa(cb)):Oa.invert(Sa())};return Ga}function Na(Ga,Fa){Fa=m(7*xb(Fa)/(3*ug));return[ug*Ga*(2*Zb(2*Fa/3)-1)/Tg,9*xb(Fa/3)/Tg]}function ib(Ga,Fa){for(var Oa=(1+bd)*xb(Fa),Sa=0,cb;25>Sa&&!(Fa-=cb=(xb(Fa/2)+xb(Fa)-Oa)/(.5*Zb(Fa/2)+Zb(Fa)),1E-6>Zc(cb));Sa++);return[Ga*(1+2*Zb(Fa)/Zb(Fa/2))/(3*Tc),2*g(3)*xb(Fa/2)/g(2+Tc)]}function Gb(Ga,Fa){var Oa=g(6/(4+Yb)),Sa=(1+Yb/4)*xb(Fa);Fa/=2;for(var cb=0,jb;25>cb&&!(Fa-=jb=(Fa/2+xb(Fa)-Sa)/(.5+Zb(Fa)),1E-6>Zc(jb));cb++);
return[Oa*(.5+Zb(Fa))*Ga/1.5,Oa*Fa]}function Hb(Ga,Fa){var Oa=Fa*Fa,Sa=Oa*Oa,cb=Oa*Sa;return[Ga*(.84719-.13063*Oa+cb*cb*(-.04515+.05494*Oa-.02326*Sa+.00331*cb)),Fa*(1.01183+Sa*Sa*(-.02625+.01926*Oa-.00396*Sa))]}function $b(Ga,Fa){return[Ga*(1+Zb(Fa))/2,2*(Fa-oc(Fa/2))]}function uc(Ga,Fa){var Oa=xb(Fa),Sa=Zb(Fa),cb=oe(Ga);if(0===Ga||Zc(Fa)===Bc)return[0,Fa];if(0===Fa)return[Ga,0];if(Zc(Ga)===Bc)return[Ga*Sa,Bc*Oa];Ga=Yb/(2*Ga)-2*Ga/Yb;var jb=2*Fa/Yb,Bb=(1-jb*jb)/(Oa-jb),Xb=Ga*Ga,Ib=Bb*Bb;jb=1+Xb/Ib;
var gc=1+Ib/Xb,hc=(Ga*Oa/Bb-Ga/2)/jb,qc=(Ib*Oa/Xb+Bb/2)/gc;Oa=qc*qc-(Ib*Oa*Oa/Xb+Bb*Oa-1)/gc;return[Bc*(hc+g(hc*hc+Sa*Sa/jb)*cb),Bc*(qc+g(0>Oa?0:Oa)*oe(-Fa*Ga)*cb)]}function fd(Ga,Fa){var Oa=Fa*Fa;return[Ga,Fa*(1.0148+Oa*Oa*(.23185+Oa*(-.14499+.02406*Oa)))]}function fb(Ga,Fa){if(1E-6>Zc(Fa))return[Ga,0];var Oa=oc(Fa);Ga*=xb(Fa);return[xb(Ga)/Oa,Fa+(1-Zb(Ga))/Oa]}function Pb(Ga,Fa){var Oa=Fc(Ga[1],Ga[0]),Sa=Fc(Fa[1],Fa[0]),cb=Ob(Oa[0]*Sa[1]-Oa[1]*Sa[0],Oa[0]*Sa[0]+Oa[1]*Sa[1]);Oa=g(Oa[0]*Oa[0]+Oa[1]*
Oa[1])/g(Sa[0]*Sa[0]+Sa[1]*Sa[1]);return fc([1,0,Ga[0][0],0,1,Ga[0][1]],fc([Oa,0,0,0,Oa,0],fc([Zb(cb),xb(cb),0,-xb(cb),Zb(cb),0],[1,0,-Fa[0][0],0,1,-Fa[0][1]])))}function fc(Ga,Fa){return[Ga[0]*Fa[0]+Ga[1]*Fa[3],Ga[0]*Fa[1]+Ga[1]*Fa[4],Ga[0]*Fa[2]+Ga[1]*Fa[5]+Ga[2],Ga[3]*Fa[0]+Ga[4]*Fa[3],Ga[3]*Fa[1]+Ga[4]*Fa[4],Ga[3]*Fa[2]+Ga[4]*Fa[5]+Ga[5]]}function Fc(Ga,Fa){return[Ga[0]-Fa[0],Ga[1]-Fa[1]]}function Pc(Ga,Fa,Oa){function Sa(Ib,gc){Ib.edges=sc(Ib.face);if(gc.face){var hc=Ib.shared=Jb(Ib.face,gc.face),
qc=Pb(hc.map(gc.project),hc.map(Ib.project));Ib.transform=gc.transform?fc(gc.transform,qc):qc;qc=gc.edges;for(var Ec=0,ld=qc.length;Ec<ld;++Ec)rb(hc[0],qc[Ec][1])&&rb(hc[1],qc[Ec][0])&&(qc[Ec]=Ib),rb(hc[0],qc[Ec][0])&&rb(hc[1],qc[Ec][1])&&(qc[Ec]=Ib);qc=Ib.edges;Ec=0;for(ld=qc.length;Ec<ld;++Ec)rb(hc[0],qc[Ec][0])&&rb(hc[1],qc[Ec][1])&&(qc[Ec]=gc),rb(hc[0],qc[Ec][1])&&rb(hc[1],qc[Ec][0])&&(qc[Ec]=gc)}else Ib.transform=gc.transform;Ib.children&&Ib.children.forEach(function(Dd){Sa(Dd,Ib)});return Ib}
function cb(Ib,gc){var hc=Fa(Ib,gc);Ib=hc.project([Ib*rc,gc*rc]);if(hc=hc.transform)return[hc[0]*Ib[0]+hc[1]*Ib[1]+hc[2],-(hc[3]*Ib[0]+hc[4]*Ib[1]+hc[5])];Ib[1]=-Ib[1];return Ib}function jb(Ib,gc){var hc=Ib.project.invert,qc=Ib.transform,Ec=gc;if(qc){var ld=1/(qc[0]*qc[4]-qc[1]*qc[3]);qc=[ld*qc[4],-ld*qc[1],ld*(qc[1]*qc[5]-qc[2]*qc[4]),-ld*qc[3],ld*qc[0],ld*(qc[2]*qc[3]-qc[0]*qc[5])];Ec=[qc[0]*Ec[0]+qc[1]*Ec[1]+qc[2],qc[3]*Ec[0]+qc[4]*Ec[1]+qc[5]]}if(qc=hc)hc=Dd=hc(Ec),hc=Fa(hc[0]*pc,hc[1]*pc),qc=
Ib===hc;if(qc)return Dd;var Dd;Ib=Ib.children;hc=0;for(Ec=Ib&&Ib.length;hc<Ec;++hc)if(Dd=jb(Ib[hc],gc))return Dd}Sa(Ga,{transform:null});nc(Ga)&&(cb.invert=function(Ib,gc){return(Ib=jb(Ga,[Ib,-gc]))&&(Ib[0]*=pc,Ib[1]*=pc,Ib)});var Bb=n.geoProjection(cb),Xb=Bb.stream;Bb.stream=function(Ib){var gc=Bb.rotate(),hc=Xb(Ib),qc=(Bb.rotate([0,0]),Xb(Ib));Bb.rotate(gc);hc.sphere=function(){qc.polygonStart();qc.lineStart();Uc(qc,Ga);qc.lineEnd();qc.polygonEnd()};return hc};return Bb.angle(null==Oa?-30:Oa*rc)}
function Uc(Ga,Fa,Oa){var Sa,cb=Fa.edges,jb=cb.length;var Bb={type:"MultiPoint",coordinates:Fa.face};var Xb=Fa.face.filter(function(qc){return 90!==Zc(qc[1])}),Ib=n.geoBounds({type:"MultiPoint",coordinates:Xb});Xb=!1;var gc=-1,hc=Ib[1][0]-Ib[0][0];Ib=180===hc||360===hc?[(Ib[0][0]+Ib[1][0])/2,(Ib[0][1]+Ib[1][1])/2]:n.geoCentroid(Bb);if(Oa)for(;++gc<jb&&cb[gc]!==Oa;);++gc;for(hc=0;hc<jb;++hc)Bb=cb[(hc+gc)%jb],Array.isArray(Bb)?(Xb||(Ga.point((Sa=n.geoInterpolate(Bb[0],Ib)(1E-6))[0],Sa[1]),Xb=!0),Ga.point((Sa=
n.geoInterpolate(Bb[1],Ib)(1E-6))[0],Sa[1])):(Xb=!1,Bb!==Oa&&Uc(Ga,Bb,Fa))}function rb(Ga,Fa){return Ga&&Fa&&Ga[0]===Fa[0]&&Ga[1]===Fa[1]}function Jb(Ga,Fa){for(var Oa,Sa,cb=Ga.length,jb=null,Bb=0;Bb<cb;++Bb){Oa=Ga[Bb];for(var Xb=Fa.length;0<=--Xb;)if(Sa=Fa[Xb],Oa[0]===Sa[0]&&Oa[1]===Sa[1]){if(jb)return[jb,Oa];jb=Oa}}}function sc(Ga){for(var Fa=Ga.length,Oa=[],Sa=Ga[Fa-1],cb=0;cb<Fa;++cb)Oa.push([Sa,Sa=Ga[cb]]);return Oa}function nc(Ga){return Ga.project.invert||Ga.children&&Ga.children.some(nc)}
function vc(Ga,Fa){Ga=L(Ga,Fa);return[Ga[0]*kh,Ga[1]]}function Vb(Ga,Fa){for(var Oa=0,Sa=Ga.length,cb=0;Oa<Sa;++Oa)cb+=Ga[Oa]*Fa[Oa];return cb}function Wb(Ga){return[Ob(Ga[1],Ga[0])*rc,m(pe(-1,Hd(1,Ga[2])))*rc]}function yb(Ga){var Fa=Ga[0]*pc;Ga=Ga[1]*pc;var Oa=Zb(Ga);return[Oa*Zb(Fa),Oa*xb(Fa),xb(Ga)]}function ac(){}function Ub(Ga,Fa){return{type:"FeatureCollection",features:Ga.features.map(function(Oa){return lc(Oa,Fa)})}}function lc(Ga,Fa){return{type:"Feature",id:Ga.id,properties:Ga.properties,
geometry:Rc(Ga.geometry,Fa)}}function tc(Ga,Fa){return{type:"GeometryCollection",geometries:Ga.geometries.map(function(Oa){return Rc(Oa,Fa)})}}function Rc(Ga,Fa){if(!Ga)return null;if("GeometryCollection"===Ga.type)return tc(Ga,Fa);switch(Ga.type){case "Point":var Oa=th;break;case "MultiPoint":Oa=th;break;case "LineString":Oa=uh;break;case "MultiLineString":Oa=uh;break;case "Polygon":Oa=Bh;break;case "MultiPolygon":Oa=Bh;break;case "Sphere":Oa=Bh;break;default:return null}n.geoStream(Ga,Fa(Oa));return Oa.result()}
function kd(Ga){function Fa(Sa,cb){var jb=Zc(Sa)<Bc;cb=Ga(jb?Sa:0<Sa?Sa-Yb:Sa+Yb,cb);Sa=(cb[0]-cb[1])*bd;cb=(cb[0]+cb[1])*bd;if(jb)return[Sa,cb];jb=Oa*bd;var Bb=0<Sa^0<cb?-1:1;return[Bb*Sa-oe(cb)*jb,Bb*cb-oe(Sa)*jb]}var Oa=Ga(Bc,0)[0]-Ga(-Bc,0)[0];Ga.invert&&(Fa.invert=function(Sa,cb){var jb=(Sa+cb)*bd,Bb=(cb-Sa)*bd,Xb=Zc(jb)<.5*Oa&&Zc(Bb)<.5*Oa;if(!Xb){var Ib=Oa*bd,gc=0<jb^0<Bb?-1:1;Sa=-gc*Sa+(0<Bb?1:-1)*Ib;cb=-gc*cb+(0<jb?1:-1)*Ib;jb=(-Sa-cb)*bd;Bb=(Sa-cb)*bd}cb=Ga.invert(jb,Bb);Xb||(cb[0]+=0<jb?
Yb:-Yb);return cb});return n.geoProjection(Fa).rotate([-90,-90,45]).clipAngle(179.999)}function Cd(){return kd(sb).scale(111.48)}function Gd(Ga){function Fa(Sa,cb){Sa=Oa?oc(Sa*Oa/2)/Oa:Sa/2;if(!cb)return[2*Sa,-Ga];Sa=2*Bd(Sa*xb(cb));var jb=1/oc(cb);return[xb(Sa)*jb,cb+(1-Zb(Sa))*jb-Ga]}var Oa=xb(Ga);Fa.invert=function(Sa,cb){if(1E-6>Zc(cb+=Ga))return[Oa?2*Bd(Oa*Sa/2)/Oa:Sa,0];var jb=Sa*Sa+cb*cb,Bb=0,Xb=10;do{var Ib=oc(Bb);var gc=1/Zb(Bb),hc=jb-2*cb*Bb+Bb*Bb;Bb-=Ib=(Ib*hc+2*(Bb-cb))/(2+hc*gc*gc+2*
(Bb-cb)*Ib)}while(1E-6<Zc(Ib)&&0<--Xb);Sa*=Ib=oc(Bb);cb=oc(Zc(cb)<Zc(Bb+1/Ib)?.5*m(Sa):.5*a(Sa)+Yb/4)/xb(Bb);return[Oa?2*Bd(Oa*cb)/Oa:2*cb,Bb]};return Fa}function Ad(Ga,Fa){var Oa=Hd(18,36*Zc(Fa)/Yb),Sa=Fd(Oa);Oa-=Sa;var cb=(Ib=Gg[Sa])[0],jb=Ib[1],Bb=(Ib=Gg[++Sa])[0],Xb=Ib[1];Sa=(Ib=Gg[Hd(19,++Sa)])[0];Ib=Ib[1];var Ib;return[Ga*(Bb+Oa*(Sa-cb)/2+Oa*Oa*(Sa-2*Bb+cb)/2),(0<Fa?Bc:-Bc)*(Xb+Oa*(Ib-jb)/2+Oa*Oa*(Ib-2*Xb+jb)/2)]}function Nc(Ga){function Fa(Oa,Sa){var cb=Zb(Sa),jb=(Ga-1)/(Ga-cb*Zb(Oa));return[jb*
cb*xb(Oa),jb*xb(Sa)]}Fa.invert=function(Oa,Sa){var cb=Oa*Oa+Sa*Sa,jb=g(cb);cb=(Ga-g(1-cb*(Ga+1)/(Ga-1)))/((Ga-1)/jb+jb/(Ga-1));return[Ob(Oa*cb,jb*g(1-cb*cb)),jb?m(Sa*cb/jb):0]};return Fa}function cd(Ga,Fa){function Oa(Bb,Xb){Bb=Sa(Bb,Xb);Xb=Bb[1];var Ib=Xb*jb/(Ga-1)+cb;return[Bb[0]*cb/Ib,Xb/Ib]}var Sa=Nc(Ga);if(!Fa)return Sa;var cb=Zb(Fa),jb=xb(Fa);Oa.invert=function(Bb,Xb){var Ib=(Ga-1)/(Ga-1-Xb*jb);return Sa.invert(Ib*Bb,Ib*Xb*cb)};return Oa}function Cc(Ga){return 0<Ga.length}function dd(Ga){return-90===
Ga||90===Ga?[0,Ga]:[-180,Math.floor(1E4*Ga)/1E4]}function Vc(Ga){var Fa=Ga[0],Oa=Ga[1],Sa=!1;-179.9999>=Fa?(Fa=-180,Sa=!0):179.9999<=Fa&&(Fa=180,Sa=!0);-89.9999>=Oa?(Oa=-90,Sa=!0):89.9999<=Oa&&(Oa=90,Sa=!0);return Sa?[Fa,Oa]:Ga}function Sc(Ga){return Ga.map(Vc)}function id(Ga,Fa,Oa){for(var Sa=0,cb=Ga.length;Sa<cb;++Sa){var jb=Ga[Sa].slice();Oa.push({index:-1,polygon:Fa,ring:jb});for(var Bb=0,Xb=jb.length;Bb<Xb;++Bb){var Ib=jb[Bb],gc=Ib[0],hc=Ib[1];if(-179.9999>=gc||179.9999<=gc||-89.9999>=hc||89.9999<=
hc){jb[Bb]=Vc(Ib);for(Ib=Bb+1;Ib<Xb;++Ib){var qc=jb[Ib];gc=qc[0];qc=qc[1];if(-179.9999<gc&&179.9999>gc&&-89.9999<qc&&89.9999>qc)break}if(Ib!==Bb+1){Bb?(Bb={index:-1,polygon:Fa,ring:jb.slice(0,Bb+1)},Bb.ring[Bb.ring.length-1]=dd(hc),Oa[Oa.length-1]=Bb):Oa.pop();if(Ib>=Xb)break;Oa.push({index:-1,polygon:Fa,ring:jb=jb.slice(Ib-1)});jb[0]=dd(jb[0][1]);Bb=-1;Xb=jb.length}}}}}function Md(Ga){var Fa,Oa=Ga.length,Sa={},cb={};for(Fa=0;Fa<Oa;++Fa){var jb=Ga[Fa];var Bb=jb.ring[0];var Xb=jb.ring[jb.ring.length-
1];Bb[0]===Xb[0]&&Bb[1]===Xb[1]?(jb.polygon.push(jb.ring),Ga[Fa]=null):(jb.index=Fa,Sa[Bb]=cb[Xb]=jb)}for(Fa=0;Fa<Oa;++Fa)if(jb=Ga[Fa]){Bb=jb.ring[0];Xb=jb.ring[jb.ring.length-1];var Ib=cb[Bb];var gc=Sa[Xb];delete Sa[Bb];delete cb[Xb];Bb[0]===Xb[0]&&Bb[1]===Xb[1]?jb.polygon.push(jb.ring):Ib?(delete cb[Bb],delete Sa[Ib.ring[0]],Ib.ring.pop(),Ga[Ib.index]=null,jb={index:-1,polygon:Ib.polygon,ring:Ib.ring.concat(jb.ring)},Ib===gc?jb.polygon.push(jb.ring):(jb.index=Oa++,Ga.push(Sa[jb.ring[0]]=cb[jb.ring[jb.ring.length-
1]]=jb))):gc?(delete Sa[Xb],delete cb[gc.ring[gc.ring.length-1]],jb.ring.pop(),jb={index:Oa++,polygon:gc.polygon,ring:jb.ring.concat(gc.ring)},Ga[gc.index]=null,Ga.push(Sa[jb.ring[0]]=cb[jb.ring[jb.ring.length-1]]=jb)):(jb.ring.push(jb.ring[0]),jb.polygon.push(jb.ring))}}function Sd(Ga){var Fa={type:"Feature",geometry:Td(Ga.geometry)};null!=Ga.id&&(Fa.id=Ga.id);null!=Ga.bbox&&(Fa.bbox=Ga.bbox);null!=Ga.properties&&(Fa.properties=Ga.properties);return Fa}function Td(Ga){if(null==Ga)return Ga;switch(Ga.type){case "GeometryCollection":var Fa=
{type:"GeometryCollection",geometries:Ga.geometries.map(Td)};break;case "Point":Fa={type:"Point",coordinates:Vc(Ga.coordinates)};break;case "MultiPoint":case "LineString":Fa={type:Ga.type,coordinates:Sc(Ga.coordinates)};break;case "MultiLineString":Fa={type:"MultiLineString",coordinates:Ga.coordinates.map(Sc)};break;case "Polygon":var Oa=[];id(Ga.coordinates,Oa,Fa=[]);Md(Fa);Fa={type:"Polygon",coordinates:Oa};break;case "MultiPolygon":Fa=[];Oa=-1;var Sa=Ga.coordinates.length;for(var cb=Array(Sa);++Oa<
Sa;)id(Ga.coordinates[Oa],cb[Oa]=[],Fa);Md(Fa);Fa={type:"MultiPolygon",coordinates:cb.filter(Cc)};break;default:return Ga}null!=Ga.bbox&&(Fa.bbox=Ga.bbox);return Fa}function Ue(Ga,Fa){Fa=oc(Fa/2);var Oa=xb(Yc*Fa);return[Ga*(.74482-.34588*Oa*Oa),1.70711*Fa]}function Ke(Ga,Fa,Oa){var Sa=n.geoInterpolate(Fa,Oa);Oa=Sa(.5);Fa=n.geoRotation([-Oa[0],-Oa[1]])(Fa);Sa=Sa.distance/2;var cb=-m(xb(Fa[1]*pc)/xb(Sa));Oa=[-Oa[0],-Oa[1],-(0<Fa[0]?Yb-cb:cb)*rc];Ga=n.geoProjection(Ga(Sa)).rotate(Oa);var jb=n.geoRotation(Oa),
Bb=Ga.center;delete Ga.rotate;Ga.center=function(Xb){return arguments.length?Bb(jb(Xb)):jb.invert(Bb())};return Ga.clipAngle(90)}function ve(Ga){function Fa(Sa,cb){Sa=n.geoGnomonicRaw(Sa,cb);Sa[0]*=Oa;return Sa}var Oa=Zb(Ga);Fa.invert=function(Sa,cb){return n.geoGnomonicRaw.invert(Sa/Oa,cb)};return Fa}function zf(Ga,Fa){return Ke(ve,Ga,Fa)}function Ef(Ga){function Fa(Xb,Ib){var gc=a(Zb(Ib)*Zb(Xb-Oa));Xb=a(Zb(Ib)*Zb(Xb-Sa));gc*=gc;Xb*=Xb;return[(gc-Xb)/(2*Ga),(0>Ib?-1:1)*g(4*cb*Xb-(cb-gc+Xb)*(cb-gc+
Xb))/(2*Ga)]}if(!(Ga*=2))return n.geoAzimuthalEquidistantRaw;var Oa=-Ga/2,Sa=-Oa,cb=Ga*Ga,jb=oc(Sa),Bb=.5/xb(Sa);Fa.invert=function(Xb,Ib){var gc=Ib*Ib,hc=Zb(g(gc+(qc=Xb+Oa)*qc));Xb=Zb(g(gc+(qc=Xb+Sa)*qc));var qc,Ec;return[Ob(Ec=hc-Xb,qc=(hc+Xb)*jb),(0>Ib?-1:1)*a(g(qc*qc+Ec*Ec)*Bb)]};return Fa}function qf(Ga,Fa){return Ke(Ef,Ga,Fa)}function Ff(Ga,Fa){if(1E-6>Zc(Fa))return[Ga,0];var Oa=Zc(Fa/Bc),Sa=m(Oa);if(1E-6>Zc(Ga)||1E-6>Zc(Zc(Fa)-Bc))return[0,oe(Fa)*Yb*oc(Sa/2)];var cb=Zb(Sa);Sa=Zc(Yb/Ga-Ga/Yb)/
2;var jb=Sa*Sa;cb/=Oa+cb-1;Oa=cb*(2/Oa-1);var Bb=Oa*Oa,Xb=Bb+jb,Ib=cb-Bb,gc=jb+cb;return[oe(Ga)*Yb*(Sa*Ib+g(jb*Ib*Ib-Xb*(cb*cb-Bb)))/Xb,oe(Fa)*Yb*(Oa*gc-Sa*g((jb+1)*Xb-gc*gc))/Xb]}function Rf(Ga,Fa){if(1E-6>Zc(Fa))return[Ga,0];var Oa=Zc(Fa/Bc),Sa=m(Oa);if(1E-6>Zc(Ga)||1E-6>Zc(Zc(Fa)-Bc))return[0,oe(Fa)*Yb*oc(Sa/2)];var cb=Zb(Sa);Sa=Zc(Yb/Ga-Ga/Yb)/2;var jb=Sa*Sa;Oa=cb*(g(1+jb)-Sa*cb)/(1+jb*Oa*Oa);return[oe(Ga)*Yb*Oa,oe(Fa)*Yb*g(1-Oa*(2*Sa+Oa))]}function Ud(Ga,Fa){if(1E-6>Zc(Fa))return[Ga,0];var Oa=
Fa/Bc,Sa=m(Oa);if(1E-6>Zc(Ga)||1E-6>Zc(Zc(Fa)-Bc))return[0,Yb*oc(Sa/2)];Fa=(Yb/Ga-Ga/Yb)/2;Oa/=1+Zb(Sa);return[Yb*(oe(Ga)*g(Fa*Fa+1-Oa*Oa)-Fa),Yb*Oa]}function Ae(Ga,Fa){if(!Fa)return[Ga,0];var Oa=Zc(Fa);if(!Ga||Oa===Bc)return[0,Fa];var Sa=Oa/Bc;Oa=Sa*Sa;var cb=(8*Sa-Oa*(Oa+2)-5)/(2*Oa*(Sa-1)),jb=cb*cb,Bb=Sa*cb,Xb=Oa+jb+2*Bb;Sa+=3*cb;cb=Ga/Bc;cb+=1/cb;cb=oe(Zc(Ga)-Bc)*g(cb*cb-4);var Ib=cb*cb;Oa=(cb*(Xb+jb-1)+2*g(Xb*(Oa+jb*Ib-1)+(1-Oa)*(Oa*(Sa*Sa+4*jb)+12*Bb*jb+4*jb*jb)))/(4*Xb+Ib);return[oe(Ga)*Bc*
Oa,oe(Fa)*Bc*g(1+cb*Zc(Oa)-Oa*Oa)]}function rf(Ga,Fa,Oa,Sa,cb){function jb(Bb,Xb){Xb=Oa*xb(Sa*Xb);var Ib=g(1-Xb*Xb),gc=g(2/(1+Ib*Zb(Bb*=cb)));return[Ga*Ib*gc*xb(Bb),Fa*Xb*gc]}jb.invert=function(Bb,Xb){var Ib=Bb/Ga,gc=Xb/Fa;Ib=g(Ib*Ib+gc*gc);gc=2*m(Ib/2);return[Ob(Bb*oc(gc),Ga*Ib)/cb,Ib&&m(Xb*xb(gc)/(Fa*Oa*Ib))/Sa]};return jb}function hf(Ga,Fa,Oa,Sa){var cb=Yb/3;Ga=pe(Ga,1E-6);Fa=pe(Fa,1E-6);Ga=Hd(Ga,Bc);Fa=Hd(Fa,Yb-1E-6);Oa=pe(Oa,0);Oa=Hd(Oa,99.999999);Sa=pe(Sa,1E-6);var jb=Sa/100;Oa=a((Oa/100+1)*
Zb(cb))/cb;cb=xb(Ga)/xb(Oa*Bc);Sa=Fa/Yb;Fa=g(jb*xb(Ga/2)/xb(Fa/2));Ga=Fa/g(Sa*cb*Oa);Fa=1/(Fa*g(Sa*cb*Oa));return rf(Ga,Fa,cb,Oa,Sa)}function Te(){var Ga=65*pc,Fa=60*pc,Oa=20,Sa=200,cb=n.geoProjectionMutator(hf),jb=cb(Ga,Fa,Oa,Sa);jb.poleline=function(Bb){return arguments.length?cb(Ga=+Bb*pc,Fa,Oa,Sa):Ga*rc};jb.parallels=function(Bb){return arguments.length?cb(Ga,Fa=+Bb*pc,Oa,Sa):Fa*rc};jb.inflation=function(Bb){return arguments.length?cb(Ga,Fa,Oa=+Bb,Sa):Oa};jb.ratio=function(Bb){return arguments.length?
cb(Ga,Fa,Oa,Sa=+Bb):Sa};return jb.scale(163.775)}function Be(Ga,Fa){return[Ga*g(1-3*Fa*Fa/(Yb*Yb)),Fa]}function Ie(Ga,Fa){var Oa=Zb(Fa),Sa=Zb(Ga)*Oa,cb=1-Sa;Fa=Zb(Ga=Ob(xb(Ga)*Oa,-xb(Fa)));Ga=xb(Ga);Oa=g(1-Sa*Sa);return[Ga*Oa-Fa*cb,-Fa*Oa-Ga*cb]}function nf(Ga,Fa){var Oa=c(Ga,Fa);return[(Oa[0]+Ga/Bc)/2,(Oa[1]+Fa)/2]}var Zc=Math.abs,Bd=Math.atan,Ob=Math.atan2,Zb=Math.cos,Mc=Math.exp,Fd=Math.floor,rd=Math.log,pe=Math.max,Hd=Math.min,qe=Math.pow,Ge=Math.round,oe=Math.sign||function(Ga){return 0<Ga?1:
0>Ga?-1:0},xb=Math.sin,oc=Math.tan,Yb=Math.PI,Bc=Yb/2,Yc=Yb/4,bd=Math.SQRT1_2,Tc=g(2),Oc=g(Yb),wc=2*Yb,rc=180/Yb,pc=Yb/180;c.invert=function(Ga,Fa){if(!(Ga*Ga+4*Fa*Fa>Yb*Yb+1E-6)){var Oa=Ga,Sa=Fa,cb=25;do{var jb=xb(Oa),Bb=xb(Oa/2),Xb=Zb(Oa/2),Ib=xb(Sa),gc=Zb(Sa),hc=xb(2*Sa),qc=Ib*Ib,Ec=gc*gc,ld=Bb*Bb,Dd=1-Ec*Xb*Xb,ye=Dd?a(gc*Xb)*g(ze=1/Dd):ze=0,ze;Dd=2*ye*gc*Bb-Ga;var We=ye*Ib-Fa,fg=ze*(Ec*ld+ye*gc*Xb*qc),He=ze*(.5*jb*hc-2*ye*Ib*Bb);jb=.25*ze*(hc*Bb-ye*Ib*Ec*jb);gc=ze*(qc*Xb+ye*ld*gc);Xb=He*jb-gc*
fg;if(!Xb)break;He=(We*He-Dd*gc)/Xb;Dd=(Dd*jb-We*fg)/Xb;Oa-=He;Sa-=Dd}while((1E-6<Zc(He)||1E-6<Zc(Dd))&&0<--cb);return[Oa,Sa]}};e.invert=function(Ga,Fa){Ga*=.375;Fa*=.375;if(!Ga&&1<Zc(Fa))return null;var Oa=1+Ga*Ga+Fa*Fa,Sa=g((Oa-g(Oa*Oa-4*Fa*Fa))/2);Oa=m(Sa)/3;Sa?(Sa=Zc(Fa/Sa),Sa=rd(Sa+g(Sa*Sa-1))/3):(Sa=Zc(Ga),Sa=rd(Sa+g(Sa*Sa+1))/3);var cb=Zb(Oa),jb=r(Sa),Bb=jb*jb-cb*cb;return[2*oe(Ga)*Ob(h(Sa)*cb,.25-Bb),2*oe(Fa)*Ob(jb*xb(Oa),.25+Bb)]};var ud=g(8),ae=rd(1+Tc);f.invert=function(Ga,Fa){if((cb=Zc(Fa))<
ae)return[Ga,2*Bd(Mc(Fa))-Bc];var Oa=Yc,Sa=25,cb;do{var jb=Zb(Oa/2);var Bb=oc(Oa/2);Oa-=jb=(ud*(Oa-Yc)-rd(Bb)-cb)/(ud-jb*jb/(2*Bb))}while(1E-12<Zc(jb)&&0<--Sa);return[Ga/(Zb(Oa)*(ud-1/xb(Oa))),oe(Fa)*Oa]};w.invert=function(Ga,Fa){Fa=2*m(Fa/2);return[Ga*Zb(Fa/2)/Zb(Fa),Fa]};var Wd=D(Tc/Bc,Tc,Yb);C.invert=function(Ga,Fa){var Oa=2.00276*Fa;Fa=0>Fa?-Yc:Yc;var Sa=25;do{var cb=Oa-Tc*xb(Fa);Fa-=cb=(xb(2*Fa)+2*Fa-Yb*xb(cb))/(2*Zb(2*Fa)+2+Yb*Zb(cb)*Tc*Zb(Fa))}while(1E-6<Zc(cb)&&0<--Sa);cb=Oa-Tc*xb(Fa);return[Ga*
(1/Zb(cb)+1.11072/Zb(Fa))/2.00276,cb]};y.invert=function(Ga,Fa){return[Ga/Zb(Fa),Fa]};var Ce=D(1,4/Yb,Yb);L.invert=function(Ga,Fa){var Oa=(Oa=Fa/Oc-1)*Oa;return[0<Oa?Ga*g(Yb/Oa)/2:0,m(1-Oa)]};var Xd=g(3);Z.invert=function(Ga,Fa){Fa=3*m(Fa/(Xd*Oc));return[Oc*Ga/(Xd*(2*Zb(2*Fa/3)-1)),Fa]};S.invert=function(Ga,Fa){var Oa=g(8/(3*Yb));Fa/=Oa;return[Ga/(Oa*(1-Zc(Fa)/Yb)),Fa]};T.invert=function(Ga,Fa){var Oa=2-Zc(Fa)/g(2*Yb/3);return[Ga*g(6*Yb)/(2*Oa),oe(Fa)*m((4-Oa*Oa)/3)]};fa.invert=function(Ga,Fa){var Oa=
g(Yb*(4+Yb))/2;return[Ga*Oa/(1+g(1-Fa*Fa*(4+Yb)/(4*Yb))),Fa*Oa/2]};W.invert=function(Ga,Fa){Fa=Fa*g((4+Yb)/Yb)/2;var Oa=m(Fa),Sa=Zb(Oa);return[Ga/(2/g(Yb*(4+Yb))*(1+Sa)),m((Oa+Fa*(Sa+2))/(2+Bc))]};aa.invert=function(Ga,Fa){var Oa=g(2+Yb);Fa=Fa*Oa/2;return[Oa*Ga/(1+Zb(Fa)),Fa]};ja.invert=function(Ga,Fa){var Oa=1+Bc,Sa=g(Oa/2);return[2*Ga*Sa/(1+Zb(Fa*=Sa)),m((Fa+xb(Fa))/Oa)]};var bf=3+2*Tc;ma.invert=function(Ga,Fa){if(!(cb=e.invert(Ga/1.2,1.065*Fa)))return null;var Oa=cb[0];cb=cb[1];var Sa=20,cb;Ga/=
bf;Fa/=bf;do{var jb=Oa/2,Bb=cb/2,Xb=xb(jb),Ib=Zb(jb),gc=xb(Bb),hc=Zb(Bb),qc=Zb(cb),Ec=g(qc),ld=gc/(hc+Tc*Ib*Ec),Dd=ld*ld,ye=g(2/(1+Dd)),ze=(Tc*hc+(Ib+Xb)*Ec)/(Tc*hc+(Ib-Xb)*Ec),We=g(ze),fg=We-1/We,He=We+1/We;Bb=ye*fg-2*rd(We)-Ga;jb=ye*ld*He-2*Bd(ld)-Fa;var cg=gc&&bd*Ec*Xb*Dd/gc,Xf=(Tc*Ib*hc+Ec)/(2*(hc+Tc*Ib*Ec)*(hc+Tc*Ib*Ec)*Ec),Af=-.5*ld*ye*ye*ye,Pg=Af*cg;Af*=Xf;var Mg=(Mg=2*hc+Tc*Ec*(Ib-Xb))*Mg*We;Ib=(Tc*Ib*hc*Ec+qc)/Mg;gc=-(Tc*Xb*gc)/(Ec*Mg);Xb=fg*Pg-2*Ib/We+ye*(Ib+Ib/ze);We=fg*Af-2*gc/We+ye*(gc+
gc/ze);cg=ld*He*Pg-2*cg/(1+Dd)+ye*He*cg+ye*ld*(Ib-Ib/ze);Dd=ld*He*Af-2*Xf/(1+Dd)+ye*He*Xf+ye*ld*(gc-gc/ze);ld=We*cg-Dd*Xb;if(!ld)break;Dd=(jb*We-Bb*Dd)/ld;Bb=(Bb*cg-jb*Xb)/ld;Oa-=Dd;cb=pe(-Bc,Hd(Bc,cb-Bb))}while((1E-6<Zc(Dd)||1E-6<Zc(Bb))&&0<--Sa);return 1E-6>Zc(Zc(cb)-Bc)?[0,cb]:Sa&&[Oa,cb]};var Ve=Zb(35*pc);ia.invert=function(Ga,Fa){Fa/=1+Ve;return[Ga&&Ga/(Ve*g(1-Fa*Fa)),2*Bd(Fa)]};ra.invert=function(Ga,Fa){var Oa=Bd(Fa/Oc);Fa=Zb(Oa);Oa*=2;return[Ga*Oc/2/(Zb(Oa)*Fa*Fa),Oa]};var vf=oa(2.8284,-1.6988,
.75432,-.18071,1.76003,-.38914,.042555),Oe=oa(2.583819,-.835827,.170354,-.038094,1.543313,-.411435,.082742),Mf=oa(5/6*Yb,-.62636,-.0344,0,1.3493,-.05524,0,.045);sa.invert=function(Ga,Fa){var Oa=Ga,Sa=Fa,cb=50,jb;do{var Bb=Sa*Sa;Sa-=jb=(Sa*(1+Bb/12)-Fa)/(1+Bb/4)}while(1E-6<Zc(jb)&&0<--cb);cb=50;Ga/=1-.162388*Bb;do{var Xb=(Xb=Oa*Oa)*Xb;Oa-=jb=(Oa*(.87-9.52426E-4*Xb)-Ga)/(.87-.00476213*Xb)}while(1E-6<Zc(jb)&&0<--cb);return[Oa,Sa]};var ng=oa(2.6516,-.76534,.19123,-.047094,1.36289,-.13965,.031762);Ha.invert=
function(Ga,Fa){1<Zc(Ga)&&(Ga=2*oe(Ga)-Ga);1<Zc(Fa)&&(Fa=2*oe(Fa)-Fa);var Oa=oe(Ga),Sa=oe(Fa),cb=-Oa*Ga,jb=-Sa*Fa;Fa=1>jb/cb;Ga=Fa?jb:cb;var Bb=Fa?cb:jb,Xb=0,Ib=1;cb=.5;for(var gc=50;;){jb=cb*cb;var hc=g(cb),qc=m(1/g(1+jb)),Ec=1-jb+cb*(1+jb)*qc,ld=(1-hc)/Ec,Dd=g(ld),ye=ld*(1+jb),ze=Dd*(1-jb),We=g(ye-Ga*Ga);ze=Bb+ze+cb*We;if(1E-12>Zc(Ib-Xb)||0===--gc||0===ze)break;0<ze?Xb=cb:Ib=cb;cb=.5*(Xb+Ib)}gc?(Bb=m(hc),gc=Zb(Bb),Xb=1/gc,Ib=2*hc*gc,hc=(-Ec*gc-(1-hc)*(-3*cb+qc*(1+3*jb))*Ib)/(Ec*Ec),cb=[Yb/4*(Ga*
(-2*Xb*(.5*hc/Dd*(1-jb)-2*cb*Dd*Ib)+-Xb*Ib*We)+-Xb*(cb*(1+jb)*hc+ld*(1+3*jb)*Ib)*m(Ga/g(ye))),Bb]):cb=null;Ga=cb[0];cb=cb[1];jb=Zb(cb);Fa&&(Ga=-Bc-Ga);return[Oa*(Ob(xb(Ga)*jb,-xb(cb))+Yb),Sa*m(Zb(Ga)*jb)]};sb.invert=function(Ga,Fa){var Oa=(Tc-1)/(Tc+1),Sa=g(1-Oa*Oa);Fa=.5*bb(Bc,Sa*Sa)-Fa;Ga=-Ga;Sa*=Sa;if(Fa)if(Fa=Za(Fa,Sa),Ga){Ga=Za(Ga,1-Sa);var cb=Ga[1]*Ga[1]+Sa*Fa[0]*Fa[0]*Ga[0]*Ga[0];Fa=[[Fa[0]*Ga[2]/cb,Fa[1]*Fa[2]*Ga[0]*Ga[1]/cb],[Fa[1]*Ga[1]/cb,-Fa[0]*Fa[2]*Ga[0]*Ga[2]/cb],[Fa[2]*Ga[1]*Ga[2]/
cb,-Sa*Fa[0]*Fa[1]*Ga[0]/cb]]}else Fa=[[Fa[0],0],[Fa[1],0],[Fa[2],0]];else Ga=Za(Ga,1-Sa),Fa=[[0,Ga[0]/Ga[1]],[1/Ga[1],0],[Ga[2]/Ga[1],0]];Sa=Fa[0];Fa=Fa[1];Ga=Fa[0]*Fa[0]+Fa[1]*Fa[1];Sa=[(Sa[0]*Fa[0]+Sa[1]*Fa[1])/Ga,(Sa[1]*Fa[0]-Sa[0]*Fa[1])/Ga];return[Ob(Sa[1],Sa[0])/-1,2*Bd(Mc(-.5*rd(Oa*Sa[0]*Sa[0]+Oa*Sa[1]*Sa[1])))-Bc]};var Sg=m(1-1/3)*rc,Og=ba(0);zb.invert=function(Ga,Fa){return-.7109889596207567<Fa?Wd.invert(Ga,Fa-.0528035274542):y.invert(Ga,Fa)};La.invert=function(Ga,Fa){return.7109889596207567<
Zc(Fa)?Wd.invert(Ga,Fa+(0<Fa?.0528035274542:-.0528035274542)):y.invert(Ga,Fa)};var Ah=[[[[-180,0],[-100,90],[-40,0]],[[-40,0],[30,90],[180,0]]],[[[-180,0],[-160,-90],[-100,0]],[[-100,0],[-60,-90],[-20,0]],[[-20,0],[20,-90],[80,0]],[[80,0],[140,-90],[180,0]]]],Kh=[[[[-180,0],[-100,90],[-40,0]],[[-40,0],[30,90],[180,0]]],[[[-180,0],[-160,-90],[-100,0]],[[-100,0],[-60,-90],[-20,0]],[[-20,0],[20,-90],[80,0]],[[80,0],[140,-90],[180,0]]]],rh=[[[[-180,0],[-100,90],[-40,0]],[[-40,0],[30,90],[180,0]]],[[[-180,
0],[-160,-90],[-100,0]],[[-100,0],[-60,-90],[-20,0]],[[-20,0],[20,-90],[80,0]],[[80,0],[140,-90],[180,0]]]],Yg=[[[[-180,0],[-90,90],[0,0]],[[0,0],[90,90],[180,0]]],[[[-180,0],[-90,-90],[0,0]],[[0,0],[90,-90],[180,0]]]],sh=[[[[-180,35],[-30,90],[0,35]],[[0,35],[30,90],[180,35]]],[[[-180,-10],[-102,-90],[-65,-10]],[[-65,-10],[5,-90],[77,-10]],[[77,-10],[103,-90],[180,-10]]]],ah=[[[[-180,0],[-110,90],[-40,0]],[[-40,0],[0,90],[40,0]],[[40,0],[110,90],[180,0]]],[[[-180,0],[-110,-90],[-40,0]],[[-40,0],
[0,-90],[40,0]],[[40,0],[110,-90],[180,0]]]];Db.invert=function(Ga,Fa){return[wc/3*Ga/g(Yb*Yb/3-Fa*Fa),Fa]};var bh=Yb/Tc;ec.invert=function(Ga,Fa){var Oa=Zc(Ga),Sa=Zc(Fa),cb=1E-6,jb=Bc;Sa<bh?jb*=Sa/bh:cb+=6*a(bh/Sa);for(var Bb=0;25>Bb;Bb++){var Xb=xb(jb),Ib=g(Zb(jb)),gc=xb(jb/2),hc=Zb(jb/2),qc=xb(cb/6),Ec=Zb(cb/6),ld=.5*cb*(1+Ib)-Oa,Dd=jb/(hc*Ec)-Sa;Xb=Ib?-.25*cb*Xb/Ib:0;Ib=.5*(1+Ib);gc=(1+.5*jb*gc/hc)/(hc*Ec);qc=jb/hc*(qc/6)/(Ec*Ec);hc=Xb*qc-gc*Ib;qc=(ld*qc-Dd*Ib)/hc;ld=(Dd*Xb-ld*gc)/hc;jb-=qc;cb-=
ld;if(1E-6>Zc(qc)&&1E-6>Zc(ld))break}return[0>Ga?-cb:cb,0>Fa?-jb:jb]};ob.invert=function(Ga,Fa){var Oa=oe(Ga)*Yb,Sa=Fa/2,cb=50;do{var jb=Oa*Oa,Bb=Sa*Sa,Xb=Oa*Sa,Ib=Oa*(.975534+Bb*(-.119161+-.0143059*jb+-.0547009*Bb))-Ga,gc=Sa*(1.00384+jb*(.0802894+-.02855*Bb+1.99025E-4*jb)+Bb*(.0998909+-.0491032*Bb))-Fa,hc=.975534-Bb*(.119161+.0429177*jb+.0547009*Bb),qc=-Xb*(.238322+.2188036*Bb+.0286118*jb);Xb*=.1605788+7.961E-4*jb+-.0571*Bb;Bb=1.00384+jb*(.0802894+1.99025E-4*jb)+Bb*(3*(.0998909-.02855*jb)-.245516*
Bb);jb=qc*Xb-Bb*hc;qc=(gc*qc-Ib*Bb)/jb;Ib=(Ib*Xb-gc*hc)/jb;Oa-=qc;Sa-=Ib}while((1E-6<Zc(qc)||1E-6<Zc(Ib))&&0<--cb);return cb&&[Oa,Sa]};Cb.invert=function(Ga,Fa){var Oa=Ga*Ga,Sa=Fa*Fa+1,cb=Oa+Sa;Oa=Ga?bd*g((cb-g(cb*cb-4*Oa))/Oa):1/g(Sa);return[m(Ga*Oa),oe(Fa)*a(Oa)]};yc.invert=function(Ga,Fa){return[Ga,2.5*Bd(Mc(.8*Fa))-.625*Yb]};var Th=[[.9972523,0],[.0052513,-.0041175],[.0074606,.0048125],[-.0153783,-.1968253],[.0636871,-.1408027],[.3660976,-.2937382]],ch=[[.98879,0],[0,0],[-.050909,0],[0,0],[.075528,
0]],bg=[[.984299,0],[.0211642,.0037608],[-.1036018,-.0575102],[-.0329095,-.0320119],[.0499471,.1223335],[.026046,.0899805],[7.388E-4,-.1435792],[.0075848,-.1334108],[-.0216473,.0776645],[-.0225161,.0853673]],og=[[.9245,0],[0,0],[.01943,0]],qg=[[.721316,0],[0,0],[-.00881625,-.00617325]],ug=g(6),Tg=g(7);Na.invert=function(Ga,Fa){Fa=3*m(Fa*Tg/9);return[Ga*Tg/(ug*(2*Zb(2*Fa/3)-1)),m(3*xb(Fa)*ug/7)]};ib.invert=function(Ga,Fa){Fa=Fa*g(2+Tc)/(2*g(3));var Oa=2*m(Fa);return[3*Tc*Ga/(1+2*Zb(Oa)/Zb(Oa/2)),m((Fa+
xb(Oa))/(1+bd))]};Gb.invert=function(Ga,Fa){var Oa=g(6/(4+Yb));Fa/=Oa;1E-6>Zc(Zc(Fa)-Bc)&&(Fa=0>Fa?-Bc:Bc);return[1.5*Ga/(Oa*(.5+Zb(Fa))),m((Fa/2+xb(Fa))/(1+Yb/4))]};Hb.invert=function(Ga,Fa){var Oa=Fa,Sa=25;do{var cb=Oa*Oa;var jb=cb*cb;Oa-=cb=(Oa*(1.01183+jb*jb*(-.02625+.01926*cb-.00396*jb))-Fa)/(1.01183+jb*jb*(-.23625+.21186*cb+-.05148*jb))}while(1E-12<Zc(cb)&&0<--Sa);cb=Oa*Oa;jb=cb*cb;Fa=cb*jb;return[Ga/(.84719-.13063*cb+Fa*Fa*(-.04515+.05494*cb-.02326*jb+.00331*Fa)),Oa]};$b.invert=function(Ga,
Fa){for(var Oa=Fa/2,Sa=0,cb=Infinity;10>Sa&&1E-6<Zc(cb);++Sa)cb=Zb(Fa/2),Fa-=cb=(Fa-oc(Fa/2)-Oa)/(1-.5/(cb*cb));return[2*Ga/(1+Zb(Fa)),Fa]};var Ig=[[[[-180,0],[-90,90],[0,0]],[[0,0],[90,90],[180,0]]],[[[-180,0],[-90,-90],[0,0]],[[0,0],[90,-90],[180,0]]]];uc.invert=function(Ga,Fa){Ga/=Bc;Fa/=Bc;var Oa=Ga*Ga,Sa=Oa+Fa*Fa,cb=Yb*Yb;return[Ga?(Sa-1+g((1-Sa)*(1-Sa)+4*Oa))/(2*Ga)*Bc:0,x(function(jb){return Sa*(Yb*xb(jb)-2*jb)*Yb+4*jb*jb*(Fa-xb(jb))+2*Yb*jb-cb*Fa},0)]};var jh=5*.23185;fd.invert=function(Ga,
Fa){1.790857183<Fa?Fa=1.790857183:-1.790857183>Fa&&(Fa=-1.790857183);var Oa=Fa;do{var Sa=Oa*Oa;Oa-=Sa=(Oa*(1.0148+Sa*Sa*(.23185+Sa*(-.14499+.02406*Sa)))-Fa)/(1.0148+Sa*Sa*(jh+Sa*(-1.01493+.21654*Sa)))}while(1E-6<Zc(Sa));return[Ga,Oa]};fb.invert=function(Ga,Fa){if(1E-6>Zc(Fa))return[Ga,0];var Oa=Ga*Ga+Fa*Fa,Sa=.5*Fa,cb=10;do{var jb=oc(Sa);var Bb=1/Zb(Sa),Xb=Oa-2*Fa*Sa+Sa*Sa;Sa-=jb=(jb*Xb+2*(Sa-Fa))/(2+Xb*Bb*Bb+2*(Sa-Fa)*jb)}while(1E-6<Zc(jb)&&0<--cb);jb=oc(Sa);return[(Zc(Fa)<Zc(Sa+1/jb)?m(Ga*jb):oe(Fa)*
oe(Ga)*(a(Zc(Ga*jb))+Bc))/xb(Sa),Sa]};var Ug=[[0,90],[-90,0],[0,0],[90,0],[180,0],[0,-90]],Wf=[[0,2,1],[0,3,2],[5,1,2],[5,2,3],[0,1,4],[0,4,3],[5,4,1],[5,3,4]].map(function(Ga){return Ga.map(function(Fa){return Ug[Fa]})}),kh=2/g(3);vc.invert=function(Ga,Fa){return L.invert(Ga/kh,Fa)};var pg=[],Bg=[],th={point:function(Ga,Fa){pg.push([Ga,Fa])},result:function(){var Ga=pg.length?2>pg.length?{type:"Point",coordinates:pg[0]}:{type:"MultiPoint",coordinates:pg}:null;pg=[];return Ga}},uh={lineStart:ac,point:function(Ga,
Fa){pg.push([Ga,Fa])},lineEnd:function(){pg.length&&(Bg.push(pg),pg=[])},result:function(){var Ga=Bg.length?2>Bg.length?{type:"LineString",coordinates:Bg[0]}:{type:"MultiLineString",coordinates:Bg}:null;Bg=[];return Ga}},Bh={polygonStart:ac,lineStart:ac,point:function(Ga,Fa){pg.push([Ga,Fa])},lineEnd:function(){var Ga=pg.length;if(Ga){do pg.push(pg[0].slice());while(4>++Ga);Bg.push(pg);pg=[]}},polygonEnd:ac,result:function(){if(!Bg.length)return null;var Ga=[],Fa=[];Bg.forEach(function(Oa){if(4>(cb=
Oa.length))var Sa=!1;else{Sa=0;for(var cb,jb=Oa[cb-1][1]*Oa[0][0]-Oa[cb-1][0]*Oa[0][1];++Sa<cb;)jb+=Oa[Sa-1][1]*Oa[Sa][0]-Oa[Sa-1][0]*Oa[Sa][1];Sa=0>=jb}Sa?Ga.push([Oa]):Fa.push(Oa)});Fa.forEach(function(Oa){var Sa=Oa[0];Ga.some(function(cb){for(var jb=cb[0],Bb=Sa[0],Xb=Sa[1],Ib=!1,gc=0,hc=jb.length,qc=hc-1;gc<hc;qc=gc++){var Ec=jb[gc],ld=Ec[0];Ec=Ec[1];var Dd=jb[qc];qc=Dd[0];Dd=Dd[1];Ec>Xb^Dd>Xb&&Bb<(qc-ld)*(Xb-Ec)/(Dd-Ec)+ld&&(Ib=!Ib)}if(Ib)return cb.push(Oa),!0})||Ga.push([Oa])});Bg=[];return Ga.length?
1<Ga.length?{type:"MultiPolygon",coordinates:Ga}:{type:"Polygon",coordinates:Ga[0]}:null}},Gg=[[.9986,-.062],[1,0],[.9986,.062],[.9954,.124],[.99,.186],[.9822,.248],[.973,.31],[.96,.372],[.9427,.434],[.9216,.4958],[.8962,.5571],[.8679,.6176],[.835,.6769],[.7986,.7346],[.7597,.7903],[.7186,.8435],[.6732,.8936],[.6213,.9394],[.5722,.9761],[.5322,1]];Gg.forEach(function(Ga){Ga[1]*=1.0144});Ad.invert=function(Ga,Fa){var Oa=Fa/Bc,Sa=90*Oa,cb=Hd(18,Zc(Sa/5)),jb=pe(0,Fd(cb));do{var Bb=Gg[jb][1],Xb=Gg[jb+
1][1],Ib=Gg[Hd(19,jb+2)][1],gc=Ib-Bb;Bb=Ib-2*Xb+Bb;Xb=2*(Zc(Oa)-Xb)/gc;gc=Bb/gc;gc=Xb*(1-gc*Xb*(1-2*gc*Xb));if(0<=gc||1===jb){Sa=(0<=Fa?5:-5)*(gc+cb);Oa=50;do cb=Hd(18,Zc(Sa)/5),jb=Fd(cb),gc=cb-jb,Bb=Gg[jb][1],Xb=Gg[jb+1][1],Ib=Gg[Hd(19,jb+2)][1],Sa-=(cb=(0<=Fa?Bc:-Bc)*(Xb+gc*(Ib-Bb)/2+gc*gc*(Ib-2*Xb+Bb)/2)-Fa)*rc;while(1E-12<Zc(cb)&&0<--Oa);break}}while(0<=--jb);Fa=Gg[jb][0];cb=Gg[jb+1][0];jb=Gg[Hd(19,jb+2)][0];return[Ga/(cb+gc*(jb-Fa)/2+gc*gc*(jb-2*cb+Fa)/2),Sa*pc]};Ue.invert=function(Ga,Fa){Fa/=
1.70711;var Oa=xb(Yc*Fa);return[Ga/(.74482-.34588*Oa*Oa),2*Bd(Fa)]};Ff.invert=function(Ga,Fa){if(1E-6>Zc(Fa))return[Ga,0];if(1E-6>Zc(Ga))return[0,Bc*xb(2*Bd(Fa/Yb))];var Oa=(Ga/=Yb)*Ga,Sa=(Fa/=Yb)*Fa,cb=Oa+Sa,jb=cb*cb,Bb=-Zc(Fa)*(1+cb),Xb=Bb-2*Sa+Oa,Ib=-2*Bb+1+2*Sa+jb,gc=Sa/Ib+(2*Xb*Xb*Xb/(Ib*Ib*Ib)-9*Bb*Xb/(Ib*Ib))/27,hc=(Bb-Xb*Xb/(3*Ib))/Ib;Bb=2*g(-hc/3);gc=a(3*gc/(hc*Bb))/3;return[Yb*(cb-1+g(1+2*(Oa-Sa)+jb))/(2*Ga),oe(Fa)*Yb*(-Bb*Zb(gc+Yb/3)-Xb/(3*Ib))]};Rf.invert=function(Ga,Fa){if(!Ga)return[0,
Bc*xb(2*Bd(Fa/Yb))];var Oa=Zc(Ga/Yb),Sa=(1-Oa*Oa-(Fa/=Yb)*Fa)/(2*Oa),cb=g(Sa*Sa+1);return[oe(Ga)*Yb*(cb-Sa),oe(Fa)*Bc*xb(2*Ob(g((1-2*Sa*Oa)*(Sa+cb)-Oa),g(cb+Sa+Oa)))]};Ud.invert=function(Ga,Fa){if(!Fa)return[Ga,0];Fa/=Yb;var Oa=(Yb*Yb*(1-Fa*Fa)-Ga*Ga)/(2*Yb*Ga);return[Ga?Yb*(oe(Ga)*g(Oa*Oa+1)-Oa):0,Bc*xb(2*Bd(Fa))]};Ae.invert=function(Ga,Fa){if(!Ga||!Fa)return[Ga,Fa];Fa/=Yb;var Oa=oe(Ga)*Ga/Bc,Sa=(Oa*Oa-1+4*Fa*Fa)/Zc(Oa),cb=Sa*Sa;Fa*=2;var jb=50;do{var Bb=Fa*Fa;var Xb=(8*Fa-Bb*(Bb+2)-5)/(2*Bb*(Fa-
1));var Ib=(3*Fa-Bb*Fa-10)/(2*Bb*Fa),gc=Xb*Xb,hc=Fa*Xb,qc=Fa+Xb,Ec=qc*qc,ld=Fa+3*Xb,Dd=-2*qc*(4*hc*gc+(1-4*Bb+3*Bb*Bb)*(1+Ib)+gc*(-6+14*Bb-cb+(-8+8*Bb-2*cb)*Ib)+hc*(-8+12*Bb+(-10+10*Bb-cb)*Ib));Bb=g(Ec*(Bb+gc*cb-1)+(1-Bb)*(Bb*(ld*ld+4*gc)+gc*(12*hc+4*gc)));Fa-=Xb=(Sa*(Ec+gc-1)+2*Bb-Oa*(4*Ec+cb))/(Sa*(2*Xb*Ib+2*qc*(1+Ib))+Dd/Bb-8*qc*(Sa*(-1+gc+Ec)+2*Bb)*(1+Ib)/(cb+4*Ec))}while(1E-6<Xb&&0<--jb);return[oe(Ga)*(g(Sa*Sa+4)+Sa)*Yb/4,Bc*Fa]};var lh=4*Yb+3*g(3),Lh=2*g(2*Yb*g(3)/lh),vh=D(Lh*g(3)/Yb,Lh,lh/
6);Be.invert=function(Ga,Fa){return[Ga/g(1-3*Fa*Fa/(Yb*Yb)),Fa]};Ie.invert=function(Ga,Fa){var Oa=(Ga*Ga+Fa*Fa)/-2,Sa=g(-Oa*(2+Oa)),cb=Fa*Oa+Ga*Sa;Ga=Ga*Oa-Fa*Sa;Fa=g(Ga*Ga+cb*cb);return[Ob(Sa*cb,Fa*(1+Oa)),Fa?-m(Sa*Ga/Fa):0]};nf.invert=function(Ga,Fa){var Oa=Ga,Sa=Fa,cb=25;do{var jb=Zb(Sa),Bb=xb(Sa),Xb=xb(2*Sa),Ib=Bb*Bb,gc=jb*jb,hc=xb(Oa),qc=Zb(Oa/2),Ec=xb(Oa/2),ld=Ec*Ec,Dd=1-gc*qc*qc,ye=Dd?a(jb*qc)*g(ze=1/Dd):ze=0,ze;Dd=.5*(2*ye*jb*Ec+Oa/Bc)-Ga;var We=.5*(ye*Bb+Sa)-Fa,fg=.5*ze*(gc*ld+ye*jb*qc*Ib)+
.5/Bc,He=ze*(hc*Xb/4-ye*Bb*Ec);Bb=.125*ze*(Xb*Ec-ye*Bb*gc*hc);Ib=.5*ze*(Ib*qc+ye*ld*jb)+.5;jb=He*Bb-Ib*fg;He=(We*He-Dd*Ib)/jb;Dd=(Dd*Bb-We*fg)/jb;Oa-=He;Sa-=Dd}while((1E-6<Zc(He)||1E-6<Zc(Dd))&&0<--cb);return[Oa,Sa]};p.geoNaturalEarth=n.geoNaturalEarth1;p.geoNaturalEarthRaw=n.geoNaturalEarth1Raw;p.geoAiry=function(){var Ga=Bc,Fa=n.geoProjectionMutator(l),Oa=Fa(Ga);Oa.radius=function(Sa){return arguments.length?Fa(Ga=Sa*pc):Ga*rc};return Oa.scale(179.976).clipAngle(147)};p.geoAiryRaw=l;p.geoAitoff=
function(){return n.geoProjection(c).scale(152.63)};p.geoAitoffRaw=c;p.geoArmadillo=function(){var Ga=20*pc,Fa=0<=Ga?1:-1,Oa=oc(Fa*Ga),Sa=n.geoProjectionMutator(d),cb=Sa(Ga),jb=cb.stream;cb.parallel=function(Bb){if(!arguments.length)return Ga*rc;Oa=oc((Fa=0<=(Ga=Bb*pc)?1:-1)*Ga);return Sa(Ga)};cb.stream=function(Bb){var Xb=cb.rotate(),Ib=jb(Bb),gc=(cb.rotate([0,0]),jb(Bb)),hc=cb.precision();cb.rotate(Xb);Ib.sphere=function(){gc.polygonStart();gc.lineStart();for(var qc=-180*Fa;180>Fa*qc;qc+=90*Fa)gc.point(qc,
90*Fa);if(Ga)for(;-180<=Fa*(qc-=3*Fa*hc);)gc.point(qc,Fa*-Ob(Zb(qc*pc/2),Oa)*rc);gc.lineEnd();gc.polygonEnd()};return Ib};return cb.scale(218.695).center([0,28.0974])};p.geoArmadilloRaw=d;p.geoAugust=function(){return n.geoProjection(e).scale(66.1603)};p.geoAugustRaw=e;p.geoBaker=function(){return n.geoProjection(f).scale(112.314)};p.geoBakerRaw=f;p.geoBerghaus=function(){var Ga=5,Fa=n.geoProjectionMutator(q),Oa=Fa(Ga),Sa=Oa.stream,cb=-Zb(.01*pc),jb=xb(.01*pc);Oa.lobes=function(Bb){return arguments.length?
Fa(Ga=+Bb):Ga};Oa.stream=function(Bb){var Xb=Oa.rotate(),Ib=Sa(Bb),gc=(Oa.rotate([0,0]),Sa(Bb));Oa.rotate(Xb);Ib.sphere=function(){gc.polygonStart();gc.lineStart();for(var hc=0,qc=360/Ga,Ec=2*Yb/Ga,ld=90-180/Ga,Dd=Bc;hc<Ga;++hc,ld-=qc,Dd-=Ec)gc.point(Ob(jb*Zb(Dd),cb)*rc,m(jb*xb(Dd))*rc),-90>ld?(gc.point(-90,-180-ld-.01),gc.point(-90,-180-ld+.01)):(gc.point(90,ld+.01),gc.point(90,ld-.01));gc.lineEnd();gc.polygonEnd()};return Ib};return Oa.scale(87.8076).center([0,17.1875]).clipAngle(179.999)};p.geoBerghausRaw=
q;p.geoBertin1953=function(){return n.geoProjection(B()).rotate([-16.5,-42]).scale(176.57).center([7.93,.09])};p.geoBertin1953Raw=B;p.geoBoggs=function(){return n.geoProjection(C).scale(160.857)};p.geoBoggsRaw=C;p.geoBonne=function(){return v(F).scale(123.082).center([0,26.1441]).parallel(45)};p.geoBonneRaw=F;p.geoBottomley=function(){var Ga=.5,Fa=n.geoProjectionMutator(J),Oa=Fa(Ga);Oa.fraction=function(Sa){return arguments.length?Fa(Ga=+Sa):Ga};return Oa.scale(158.837)};p.geoBottomleyRaw=J;p.geoBromley=
function(){return n.geoProjection(Ce).scale(152.63)};p.geoBromleyRaw=Ce;p.geoChamberlin=I;p.geoChamberlinRaw=H;p.geoChamberlinAfrica=function(){return I([0,22],[45,22],[22.5,-22]).scale(380).center([22.5,2])};p.geoCollignon=function(){return n.geoProjection(L).scale(95.6464).center([0,30])};p.geoCollignonRaw=L;p.geoCraig=function(){return v(Q).scale(249.828).clipAngle(90)};p.geoCraigRaw=Q;p.geoCraster=function(){return n.geoProjection(Z).scale(156.19)};p.geoCrasterRaw=Z;p.geoCylindricalEqualArea=
function(){return v(ba).parallel(38.58).scale(195.044)};p.geoCylindricalEqualAreaRaw=ba;p.geoCylindricalStereographic=function(){return v(V).scale(124.75)};p.geoCylindricalStereographicRaw=V;p.geoEckert1=function(){return n.geoProjection(S).scale(165.664)};p.geoEckert1Raw=S;p.geoEckert2=function(){return n.geoProjection(T).scale(165.664)};p.geoEckert2Raw=T;p.geoEckert3=function(){return n.geoProjection(fa).scale(180.739)};p.geoEckert3Raw=fa;p.geoEckert4=function(){return n.geoProjection(W).scale(180.739)};
p.geoEckert4Raw=W;p.geoEckert5=function(){return n.geoProjection(aa).scale(173.044)};p.geoEckert5Raw=aa;p.geoEckert6=function(){return n.geoProjection(ja).scale(173.044)};p.geoEckert6Raw=ja;p.geoEisenlohr=function(){return n.geoProjection(ma).scale(62.5271)};p.geoEisenlohrRaw=ma;p.geoFahey=function(){return n.geoProjection(ia).scale(137.152)};p.geoFaheyRaw=ia;p.geoFoucaut=function(){return n.geoProjection(ra).scale(135.264)};p.geoFoucautRaw=ra;p.geoFoucautSinusoidal=function(){var Ga=.5,Fa=n.geoProjectionMutator(wa),
Oa=Fa(Ga);Oa.alpha=function(Sa){return arguments.length?Fa(Ga=+Sa):Ga};return Oa.scale(168.725)};p.geoFoucautSinusoidalRaw=wa;p.geoGilbert=function(Ga){function Fa(jb){return Sa([jb[0]/2,m(oc(jb[1]/2*pc))*rc])}function Oa(jb){Fa[jb]=function(){return arguments.length?(Sa[jb].apply(Sa,arguments),Fa):Sa[jb]()}}null==Ga&&(Ga=n.geoOrthographic);var Sa=Ga(),cb=n.geoEquirectangular().scale(rc).precision(0).clipAngle(null).translate([0,0]);Sa.invert&&(Fa.invert=function(jb){return pa(Sa.invert(jb))});Fa.stream=
function(jb){var Bb=Sa.stream(jb);jb=cb.stream({point:function(Xb,Ib){Bb.point(Xb/2,m(oc(-Ib/2*pc))*rc)},lineStart:function(){Bb.lineStart()},lineEnd:function(){Bb.lineEnd()},polygonStart:function(){Bb.polygonStart()},polygonEnd:function(){Bb.polygonEnd()}});jb.sphere=Bb.sphere;return jb};Fa.rotate=function(jb){return arguments.length?(cb.rotate(jb),Fa):cb.rotate()};Fa.center=function(jb){return arguments.length?(Sa.center([jb[0]/2,m(oc(jb[1]/2*pc))*rc]),Fa):pa(Sa.center())};Oa("angle");Oa("clipAngle");
Oa("clipExtent");Oa("fitExtent");Oa("fitHeight");Oa("fitSize");Oa("fitWidth");Oa("scale");Oa("translate");Oa("precision");return Fa.scale(249.5)};p.geoGingery=function(){var Ga=6,Fa=30*pc,Oa=Zb(Fa),Sa=xb(Fa),cb=n.geoProjectionMutator(la),jb=cb(Fa,Ga),Bb=jb.stream,Xb=-Zb(.01*pc),Ib=xb(.01*pc);jb.radius=function(gc){if(!arguments.length)return Fa*rc;Oa=Zb(Fa=gc*pc);Sa=xb(Fa);return cb(Fa,Ga)};jb.lobes=function(gc){return arguments.length?cb(Fa,Ga=+gc):Ga};jb.stream=function(gc){var hc=jb.rotate(),qc=
Bb(gc),Ec=(jb.rotate([0,0]),Bb(gc));jb.rotate(hc);qc.sphere=function(){Ec.polygonStart();Ec.lineStart();for(var ld=0,Dd=2*Yb/Ga,ye=0;ld<Ga;++ld,ye-=Dd)Ec.point(Ob(Ib*Zb(ye),Xb)*rc,m(Ib*xb(ye))*rc),Ec.point(Ob(Sa*Zb(ye-Dd/2),Oa)*rc,m(Sa*xb(ye-Dd/2))*rc);Ec.lineEnd();Ec.polygonEnd()};return qc};return jb.rotate([90,-40]).scale(91.7095).clipAngle(179.999)};p.geoGingeryRaw=la;p.geoGinzburg4=function(){return n.geoProjection(vf).scale(149.995)};p.geoGinzburg4Raw=vf;p.geoGinzburg5=function(){return n.geoProjection(Oe).scale(153.93)};
p.geoGinzburg5Raw=Oe;p.geoGinzburg6=function(){return n.geoProjection(Mf).scale(130.945)};p.geoGinzburg6Raw=Mf;p.geoGinzburg8=function(){return n.geoProjection(sa).scale(131.747)};p.geoGinzburg8Raw=sa;p.geoGinzburg9=function(){return n.geoProjection(ng).scale(131.087)};p.geoGinzburg9Raw=ng;p.geoGringorten=function(){return n.geoProjection(za(Ha)).scale(239.75)};p.geoGringortenRaw=Ha;p.geoGuyou=function(){return n.geoProjection(za(sb)).scale(151.496)};p.geoGuyouRaw=sb;p.geoHammer=function(){var Ga=
2,Fa=n.geoProjectionMutator(t),Oa=Fa(Ga);Oa.coefficient=function(Sa){return arguments.length?Fa(Ga=+Sa):Ga};return Oa.scale(169.529)};p.geoHammerRaw=t;p.geoHammerRetroazimuthal=function(){var Ga=0,Fa=n.geoProjectionMutator(hb),Oa=Fa(Ga),Sa=Oa.rotate,cb=Oa.stream,jb=n.geoCircle();Oa.parallel=function(Bb){if(!arguments.length)return Ga*rc;var Xb=Oa.rotate();return Fa(Ga=Bb*pc).rotate(Xb)};Oa.rotate=function(Bb){if(!arguments.length)return Bb=Sa.call(Oa),Bb[1]+=Ga*rc,Bb;Sa.call(Oa,[Bb[0],Bb[1]-Ga*rc]);
jb.center([-Bb[0],-Bb[1]]);return Oa};Oa.stream=function(Bb){Bb=cb(Bb);Bb.sphere=function(){Bb.polygonStart();var Xb=jb.radius(89.99)().coordinates[0],Ib=Xb.length-1,gc=-1,hc;for(Bb.lineStart();++gc<Ib;)Bb.point((hc=Xb[gc])[0],hc[1]);Bb.lineEnd();Xb=jb.radius(90.01)().coordinates[0];for(Bb.lineStart();0<=--gc;)Bb.point((hc=Xb[gc])[0],hc[1]);Bb.lineEnd();Bb.polygonEnd()};return Bb};return Oa.scale(79.4187).parallel(45).clipAngle(179.999)};p.geoHammerRetroazimuthalRaw=hb;p.geoHealpix=function(){var Ga=
4,Fa=n.geoProjectionMutator(pb),Oa=Fa(Ga),Sa=Oa.stream;Oa.lobes=function(cb){return arguments.length?Fa(Ga=+cb):Ga};Oa.stream=function(cb){var jb=Oa.rotate(),Bb=Sa(cb),Xb=(Oa.rotate([0,0]),Sa(cb));Oa.rotate(jb);Bb.sphere=function(){var Ib=n.geoStream;var gc=180/Ga;var hc=[].concat(k.range(-180,180+gc/2,gc).map(Ab),k.range(180,-180-gc/2,-gc).map(tb));gc={type:"Polygon",coordinates:[180===gc?hc.map(vb):hc]};Ib.call(n,gc,Xb)};return Bb};return Oa.scale(239.75)};p.geoHealpixRaw=pb;p.geoHill=function(){var Ga=
1,Fa=n.geoProjectionMutator(qb),Oa=Fa(Ga);Oa.ratio=function(Sa){return arguments.length?Fa(Ga=+Sa):Ga};return Oa.scale(167.774).center([0,18.67])};p.geoHillRaw=qb;p.geoHomolosine=function(){return n.geoProjection(La).scale(152.63)};p.geoHomolosineRaw=La;p.geoHufnagel=function(){var Ga=1,Fa=0,Oa=45*pc,Sa=2,cb=n.geoProjectionMutator(Ka),jb=cb(Ga,Fa,Oa,Sa);jb.a=function(Bb){return arguments.length?cb(Ga=+Bb,Fa,Oa,Sa):Ga};jb.b=function(Bb){return arguments.length?cb(Ga,Fa=+Bb,Oa,Sa):Fa};jb.psiMax=function(Bb){return arguments.length?
cb(Ga,Fa,Oa=+Bb*pc,Sa):Oa*rc};jb.ratio=function(Bb){return arguments.length?cb(Ga,Fa,Oa,Sa=+Bb):Sa};return jb.scale(180.739)};p.geoHufnagelRaw=Ka;p.geoHyperelliptical=function(){var Ga=0,Fa=2.5,Oa=1.183136,Sa=n.geoProjectionMutator(Ja),cb=Sa(Ga,Fa,Oa);cb.alpha=function(jb){return arguments.length?Sa(Ga=+jb,Fa,Oa):Ga};cb.k=function(jb){return arguments.length?Sa(Ga,Fa=+jb,Oa):Fa};cb.gamma=function(jb){return arguments.length?Sa(Ga,Fa,Oa=+jb):Oa};return cb.scale(152.63)};p.geoHyperellipticalRaw=Ja;
p.geoInterrupt=ab;p.geoInterruptedBoggs=function(){return ab(C,Ah).scale(160.857)};p.geoInterruptedHomolosine=function(){return ab(La,Kh).scale(152.63)};p.geoInterruptedMollweide=function(){return ab(Wd,rh).scale(169.529)};p.geoInterruptedMollweideHemispheres=function(){return ab(Wd,Yg).scale(169.529).rotate([20,0])};p.geoInterruptedSinuMollweide=function(){return ab(zb,sh,z).rotate([-20,-55]).scale(164.263).center([0,-5.4036])};p.geoInterruptedSinusoidal=function(){return ab(y,ah).scale(152.63).rotate([-20,
0])};p.geoKavrayskiy7=function(){return n.geoProjection(Db).scale(158.837)};p.geoKavrayskiy7Raw=Db;p.geoLagrange=function(){var Ga=.5,Fa=n.geoProjectionMutator(Nb),Oa=Fa(Ga);Oa.spacing=function(Sa){return arguments.length?Fa(Ga=+Sa):Ga};return Oa.scale(124.75)};p.geoLagrangeRaw=Nb;p.geoLarrivee=function(){return n.geoProjection(ec).scale(97.2672)};p.geoLarriveeRaw=ec;p.geoLaskowski=function(){return n.geoProjection(ob).scale(139.98)};p.geoLaskowskiRaw=ob;p.geoLittrow=function(){return n.geoProjection(Cb).scale(144.049).clipAngle(89.999)};
p.geoLittrowRaw=Cb;p.geoLoximuthal=function(){return v(Qb).parallel(40).scale(158.837)};p.geoLoximuthalRaw=Qb;p.geoMiller=function(){return n.geoProjection(yc).scale(108.318)};p.geoMillerRaw=yc;p.geoModifiedStereographic=Ia;p.geoModifiedStereographicRaw=Jc;p.geoModifiedStereographicAlaska=function(){return Ia(Th,[152,-64]).scale(1400).center([-160.908,62.4864]).clipAngle(30).angle(7.8)};p.geoModifiedStereographicGs48=function(){return Ia(ch,[95,-38]).scale(1E3).clipAngle(55).center([-96.5563,38.8675])};
p.geoModifiedStereographicGs50=function(){return Ia(bg,[120,-45]).scale(359.513).clipAngle(55).center([-117.474,53.0628])};p.geoModifiedStereographicMiller=function(){return Ia(og,[-20,-18]).scale(209.091).center([20,16.7214]).clipAngle(82)};p.geoModifiedStereographicLee=function(){return Ia(qg,[165,10]).scale(250).clipAngle(130).center([-165,-10])};p.geoMollweide=function(){return n.geoProjection(Wd).scale(169.529)};p.geoMollweideRaw=Wd;p.geoMtFlatPolarParabolic=function(){return n.geoProjection(Na).scale(164.859)};
p.geoMtFlatPolarParabolicRaw=Na;p.geoMtFlatPolarQuartic=function(){return n.geoProjection(ib).scale(188.209)};p.geoMtFlatPolarQuarticRaw=ib;p.geoMtFlatPolarSinusoidal=function(){return n.geoProjection(Gb).scale(166.518)};p.geoMtFlatPolarSinusoidalRaw=Gb;p.geoNaturalEarth2=function(){return n.geoProjection(Hb).scale(175.295)};p.geoNaturalEarth2Raw=Hb;p.geoNellHammer=function(){return n.geoProjection($b).scale(152.63)};p.geoNellHammerRaw=$b;p.geoInterruptedQuarticAuthalic=function(){return ab(t(Infinity),
Ig).rotate([20,0]).scale(152.63)};p.geoNicolosi=function(){return n.geoProjection(uc).scale(127.267)};p.geoNicolosiRaw=uc;p.geoPatterson=function(){return n.geoProjection(fd).scale(139.319)};p.geoPattersonRaw=fd;p.geoPolyconic=function(){return n.geoProjection(fb).scale(103.74)};p.geoPolyconicRaw=fb;p.geoPolyhedral=Pc;p.geoPolyhedralButterfly=function(Ga){Ga=Ga||function(Oa){Oa=n.geoCentroid({type:"MultiPoint",coordinates:Oa});return n.geoGnomonic().scale(1).translate([0,0]).rotate([-Oa[0],-Oa[1]])};
var Fa=Wf.map(function(Oa){return{face:Oa,project:Ga(Oa)}});[-1,0,0,1,0,1,4,5].forEach(function(Oa,Sa){(Oa=Fa[Oa])&&(Oa.children||(Oa.children=[])).push(Fa[Sa])});return Pc(Fa[0],function(Oa,Sa){return Fa[Oa<-Yb/2?0>Sa?6:4:0>Oa?0>Sa?2:0:Oa<Yb/2?0>Sa?3:1:0>Sa?7:5]}).angle(-30).scale(101.858).center([0,45])};p.geoPolyhedralCollignon=function(Ga){Ga=Ga||function(Oa){Oa=n.geoCentroid({type:"MultiPoint",coordinates:Oa});return n.geoProjection(vc).translate([0,0]).scale(1).rotate(0<Oa[1]?[-Oa[0],0]:[180-
Oa[0],180])};var Fa=Wf.map(function(Oa){return{face:Oa,project:Ga(Oa)}});[-1,0,0,1,0,1,4,5].forEach(function(Oa,Sa){(Oa=Fa[Oa])&&(Oa.children||(Oa.children=[])).push(Fa[Sa])});return Pc(Fa[0],function(Oa,Sa){return Fa[Oa<-Yb/2?0>Sa?6:4:0>Oa?0>Sa?2:0:Oa<Yb/2?0>Sa?3:1:0>Sa?7:5]}).angle(-30).scale(121.906).center([0,48.5904])};p.geoPolyhedralWaterman=function(Ga){Ga=Ga||function(jb){jb=6===jb.length?n.geoCentroid({type:"MultiPoint",coordinates:jb}):jb[0];return n.geoGnomonic().scale(1).translate([0,
0]).rotate([-jb[0],-jb[1]])};var Fa=Wf.map(function(jb){jb=jb.map(yb);for(var Bb=jb.length,Xb=jb[Bb-1],Ib,gc=[],hc=0;hc<Bb;++hc)Ib=jb[hc],gc.push(Wb([.9486832980505138*Xb[0]+.31622776601683794*Ib[0],.9486832980505138*Xb[1]+.31622776601683794*Ib[1],.9486832980505138*Xb[2]+.31622776601683794*Ib[2]]),Wb([.9486832980505138*Ib[0]+.31622776601683794*Xb[0],.9486832980505138*Ib[1]+.31622776601683794*Xb[1],.9486832980505138*Ib[2]+.31622776601683794*Xb[2]])),Xb=Ib;return gc}),Oa=[],Sa=[-1,0,0,1,0,1,4,5];Fa.forEach(function(jb,
Bb){for(var Xb=Wf[Bb],Ib=Xb.length,gc=Oa[Bb]=[],hc=0;hc<Ib;++hc){Fa.push([Xb[hc],jb[(2*hc+2)%(2*Ib)],jb[(2*hc+1)%(2*Ib)]]);Sa.push(Bb);var qc=gc,Ec=qc.push,ld=yb(jb[(2*hc+2)%(2*Ib)]),Dd=yb(jb[(2*hc+1)%(2*Ib)]);Ec.call(qc,[ld[1]*Dd[2]-ld[2]*Dd[1],ld[2]*Dd[0]-ld[0]*Dd[2],ld[0]*Dd[1]-ld[1]*Dd[0]])}});var cb=Fa.map(function(jb){return{project:Ga(jb),face:jb}});Sa.forEach(function(jb,Bb){(jb=cb[jb])&&(jb.children||(jb.children=[])).push(cb[Bb])});return Pc(cb[0],function(jb,Bb){var Xb=Zb(Bb);Xb=[Xb*Zb(jb),
Xb*xb(jb),xb(Bb)];jb=jb<-Yb/2?0>Bb?6:4:0>jb?0>Bb?2:0:jb<Yb/2?0>Bb?3:1:0>Bb?7:5;Bb=Oa[jb];return cb[0>Vb(Bb[0],Xb)?8+3*jb:0>Vb(Bb[1],Xb)?3*jb+9:0>Vb(Bb[2],Xb)?3*jb+10:jb]}).angle(-30).scale(110.625).center([0,45])};p.geoProject=function(Ga,Fa){Fa=Fa.stream;if(!Fa)throw Error("invalid projection");switch(Ga&&Ga.type){case "Feature":var Oa=lc;break;case "FeatureCollection":Oa=Ub;break;default:Oa=Rc}return Oa(Ga,Fa)};p.geoGringortenQuincuncial=function(){return kd(Ha).scale(176.423)};p.geoPeirceQuincuncial=
Cd;p.geoPierceQuincuncial=Cd;p.geoQuantize=function(Ga,Fa){function Oa(Ib){var gc=Ib.length,hc=2,qc=Array(gc);qc[0]=+Ib[0].toFixed(Fa);for(qc[1]=+Ib[1].toFixed(Fa);hc<gc;)qc[hc]=Ib[hc],++hc;return qc}function Sa(Ib){for(var gc=Oa(Ib[0]),hc=[gc],qc=1;qc<Ib.length;qc++){var Ec=Oa(Ib[qc]);if(2<Ec.length||Ec[0]!=gc[0]||Ec[1]!=gc[1])hc.push(Ec),gc=Ec}1===hc.length&&1<Ib.length&&hc.push(Oa(Ib[Ib.length-1]));return hc}function cb(Ib){return Ib.map(Sa)}function jb(Ib){if(null==Ib)return Ib;switch(Ib.type){case "GeometryCollection":var gc=
{type:"GeometryCollection",geometries:Ib.geometries.map(jb)};break;case "Point":gc={type:"Point",coordinates:Oa(Ib.coordinates)};break;case "MultiPoint":gc={type:Ib.type,coordinates:Ib.coordinates.map(Oa)};break;case "LineString":gc={type:Ib.type,coordinates:Sa(Ib.coordinates)};break;case "MultiLineString":case "Polygon":gc={type:Ib.type,coordinates:cb(Ib.coordinates)};break;case "MultiPolygon":gc={type:"MultiPolygon",coordinates:Ib.coordinates.map(cb)};break;default:return Ib}null!=Ib.bbox&&(gc.bbox=
Ib.bbox);return gc}function Bb(Ib){var gc={type:"Feature",properties:Ib.properties,geometry:jb(Ib.geometry)};null!=Ib.id&&(gc.id=Ib.id);null!=Ib.bbox&&(gc.bbox=Ib.bbox);return gc}if(!(0<=(Fa=+Fa)&&20>=Fa))throw Error("invalid digits");if(null!=Ga)switch(Ga.type){case "Feature":return Bb(Ga);case "FeatureCollection":var Xb={type:"FeatureCollection",features:Ga.features.map(Bb)};null!=Ga.bbox&&(Xb.bbox=Ga.bbox);return Xb;default:return jb(Ga)}return Ga};p.geoQuincuncial=kd;p.geoRectangularPolyconic=
function(){return v(Gd).scale(131.215)};p.geoRectangularPolyconicRaw=Gd;p.geoRobinson=function(){return n.geoProjection(Ad).scale(152.63)};p.geoRobinsonRaw=Ad;p.geoSatellite=function(){var Ga=2,Fa=0,Oa=n.geoProjectionMutator(cd),Sa=Oa(Ga,Fa);Sa.distance=function(cb){return arguments.length?Oa(Ga=+cb,Fa):Ga};Sa.tilt=function(cb){return arguments.length?Oa(Ga,Fa=cb*pc):Fa*rc};return Sa.scale(432.147).clipAngle(a(1/Ga)*rc-1E-6)};p.geoSatelliteRaw=cd;p.geoSinuMollweide=function(){return n.geoProjection(zb).rotate([-20,
-55]).scale(164.263).center([0,-5.4036])};p.geoSinuMollweideRaw=zb;p.geoSinusoidal=function(){return n.geoProjection(y).scale(152.63)};p.geoSinusoidalRaw=y;p.geoStitch=function(Ga){if(null==Ga)return Ga;switch(Ga.type){case "Feature":return Sd(Ga);case "FeatureCollection":var Fa={type:"FeatureCollection",features:Ga.features.map(Sd)};null!=Ga.bbox&&(Fa.bbox=Ga.bbox);return Fa;default:return Td(Ga)}};p.geoTimes=function(){return n.geoProjection(Ue).scale(146.153)};p.geoTimesRaw=Ue;p.geoTwoPointAzimuthal=
zf;p.geoTwoPointAzimuthalRaw=ve;p.geoTwoPointAzimuthalUsa=function(){return zf([-158,21.5],[-77,39]).clipAngle(60).scale(400)};p.geoTwoPointEquidistant=qf;p.geoTwoPointEquidistantRaw=Ef;p.geoTwoPointEquidistantUsa=function(){return qf([-158,21.5],[-77,39]).clipAngle(130).scale(122.571)};p.geoVanDerGrinten=function(){return n.geoProjection(Ff).scale(79.4183)};p.geoVanDerGrintenRaw=Ff;p.geoVanDerGrinten2=function(){return n.geoProjection(Rf).scale(79.4183)};p.geoVanDerGrinten2Raw=Rf;p.geoVanDerGrinten3=
function(){return n.geoProjection(Ud).scale(79.4183)};p.geoVanDerGrinten3Raw=Ud;p.geoVanDerGrinten4=function(){return n.geoProjection(Ae).scale(127.16)};p.geoVanDerGrinten4Raw=Ae;p.geoWagner=Te;p.geoWagner7=function(){return Te().poleline(65).parallels(60).inflation(0).ratio(200).scale(172.633)};p.geoWagnerRaw=hf;p.geoWagner4=function(){return n.geoProjection(vh).scale(176.84)};p.geoWagner4Raw=vh;p.geoWagner6=function(){return n.geoProjection(Be).scale(152.63)};p.geoWagner6Raw=Be;p.geoWiechel=function(){return n.geoProjection(Ie).rotate([0,
-90,45]).scale(124.75).clipAngle(179.999)};p.geoWiechelRaw=Ie;p.geoWinkel3=function(){return n.geoProjection(nf).scale(158.837)};p.geoWinkel3Raw=nf;Object.defineProperty(p,"__esModule",{value:!0})})},{"d3-array":162,"d3-geo":169}],169:[function(b,N,G){(function(p,n){"object"===typeof G&&"undefined"!==typeof N?n(G,b("d3-array")):(p=p||self,n(p.d3=p.d3||{},p.d3))})(this,function(p,n){function k(){this.reset()}function m(Xa,Pa,Mb){var bc=Xa.s=Pa+Mb,kc=bc-Pa;Xa.t=Pa-(bc-kc)+(Mb-kc)}function a(Xa){return 1<
Xa?0:-1>Xa?Ud:Math.acos(Xa)}function g(Xa){return 1<Xa?Ae:-1>Xa?-Ae:Math.asin(Xa)}function h(Xa){return(Xa=rd(Xa/2))*Xa}function r(){}function l(Xa,Pa){if(Xa&&oe.hasOwnProperty(Xa.type))oe[Xa.type](Xa,Pa)}function c(Xa,Pa,Mb){var bc=-1;Mb=Xa.length-Mb;for(Pa.lineStart();++bc<Mb;){var kc=Xa[bc];Pa.point(kc[0],kc[1],kc[2])}Pa.lineEnd()}function d(Xa,Pa){var Mb=-1,bc=Xa.length;for(Pa.polygonStart();++Mb<bc;)c(Xa[Mb],Pa,1);Pa.polygonEnd()}function e(Xa,Pa){if(Xa&&Ge.hasOwnProperty(Xa.type))Ge[Xa.type](Xa,
Pa);else l(Xa,Pa)}function f(){Oc.point=t}function q(){w(Yb,Bc)}function t(Xa,Pa){Oc.point=w;Yb=Xa;Bc=Pa;Xa*=Be;Pa*=Be;Yc=Xa;bd=Bd(Pa=Pa/2+rf);Tc=rd(Pa)}function w(Xa,Pa){Xa*=Be;Pa*=Be;Pa=Pa/2+rf;var Mb=Xa-Yc,bc=0<=Mb?1:-1,kc=bc*Mb;Mb=Bd(Pa);Pa=rd(Pa);var ed=Tc*Pa,nd=bd*Mb+ed*Bd(kc);bc=ed*bc*rd(kc);xb.add(Zc(bc,nd));Yc=Xa;bd=Mb;Tc=Pa}function x(Xa){return[Zc(Xa[1],Xa[0]),g(Xa[2])]}function z(Xa){var Pa=Xa[0];Xa=Xa[1];var Mb=Bd(Xa);return[Mb*Bd(Pa),Mb*rd(Pa),rd(Xa)]}function B(Xa,Pa){return Xa[0]*
Pa[0]+Xa[1]*Pa[1]+Xa[2]*Pa[2]}function A(Xa,Pa){return[Xa[1]*Pa[2]-Xa[2]*Pa[1],Xa[2]*Pa[0]-Xa[0]*Pa[2],Xa[0]*Pa[1]-Xa[1]*Pa[0]]}function D(Xa,Pa){Xa[0]+=Pa[0];Xa[1]+=Pa[1];Xa[2]+=Pa[2]}function C(Xa,Pa){return[Xa[0]*Pa,Xa[1]*Pa,Xa[2]*Pa]}function v(Xa){var Pa=Hd(Xa[0]*Xa[0]+Xa[1]*Xa[1]+Xa[2]*Xa[2]);Xa[0]/=Pa;Xa[1]/=Pa;Xa[2]/=Pa}function y(Xa,Pa){Ve.push(vf=[wc=Xa,pc=Xa]);Pa<rc&&(rc=Pa);Pa>ud&&(ud=Pa)}function F(Xa,Pa){var Mb=z([Xa*Be,Pa*Be]);if(Xd){var bc=A(Xd,Mb);bc=A([bc[1],-bc[0],0],bc);v(bc);
bc=x(bc);var kc=Xa-ae,ed=0<kc?1:-1,nd=bc[0]*Te*ed;kc=180<Ie(kc);kc^(ed*ae<nd&&nd<ed*Xa)?(bc=bc[1]*Te,bc>ud&&(ud=bc)):(nd=(nd+360)%360-180,kc^(ed*ae<nd&&nd<ed*Xa))?(bc=-bc[1]*Te,bc<rc&&(rc=bc)):(Pa<rc&&(rc=Pa),Pa>ud&&(ud=Pa));kc?Xa<ae?I(wc,Xa)>I(wc,pc)&&(pc=Xa):I(Xa,pc)>I(wc,pc)&&(wc=Xa):pc>=wc?(Xa<wc&&(wc=Xa),Xa>pc&&(pc=Xa)):Xa>ae?I(wc,Xa)>I(wc,pc)&&(pc=Xa):I(Xa,pc)>I(wc,pc)&&(wc=Xa)}else Ve.push(vf=[wc=Xa,pc=Xa]);Pa<rc&&(rc=Pa);Pa>ud&&(ud=Pa);Xd=Mb;ae=Xa}function J(){Oe.point=F}function K(){vf[0]=
wc;vf[1]=pc;Oe.point=y;Xd=null}function M(Xa,Pa){if(Xd){var Mb=Xa-ae;bf.add(180<Ie(Mb)?Mb+(0<Mb?360:-360):Mb)}else Wd=Xa,Ce=Pa;Oc.point(Xa,Pa);F(Xa,Pa)}function H(){Oc.lineStart()}function O(){M(Wd,Ce);Oc.lineEnd();1E-6<Ie(bf)&&(wc=-(pc=180));vf[0]=wc;vf[1]=pc;Xd=null}function I(Xa,Pa){return 0>(Pa-=Xa)?Pa+360:Pa}function L(Xa,Pa){return Xa[0]-Pa[0]}function Q(Xa,Pa){return Xa[0]<=Xa[1]?Xa[0]<=Pa&&Pa<=Xa[1]:Pa<Xa[0]||Xa[1]<Pa}function Z(Xa,Pa){Xa*=Be;Pa*=Be;var Mb=Bd(Pa);ba(Mb*Bd(Xa),Mb*rd(Xa),rd(Pa))}
function ba(Xa,Pa,Mb){++Mf;Sg+=(Xa-Sg)/Mf;Og+=(Pa-Og)/Mf;Ah+=(Mb-Ah)/Mf}function V(){ug.point=S}function S(Xa,Pa){Xa*=Be;Pa*=Be;var Mb=Bd(Pa);bg=Mb*Bd(Xa);og=Mb*rd(Xa);qg=rd(Pa);ug.point=T;ba(bg,og,qg)}function T(Xa,Pa){Xa*=Be;Pa*=Be;var Mb=Bd(Pa),bc=Mb*Bd(Xa);Xa=Mb*rd(Xa);Pa=rd(Pa);var kc=Zc(Hd((kc=og*Pa-qg*Xa)*kc+(kc=qg*bc-bg*Pa)*kc+(kc=bg*Xa-og*bc)*kc),bg*bc+og*Xa+qg*Pa);ng+=kc;Kh+=kc*(bg+(bg=bc));rh+=kc*(og+(og=Xa));Yg+=kc*(qg+(qg=Pa));ba(bg,og,qg)}function fa(){ug.point=Z}function W(){ug.point=
ja}function aa(){ma(Th,ch);ug.point=Z}function ja(Xa,Pa){Th=Xa;ch=Pa;Xa*=Be;Pa*=Be;ug.point=ma;var Mb=Bd(Pa);bg=Mb*Bd(Xa);og=Mb*rd(Xa);qg=rd(Pa);ba(bg,og,qg)}function ma(Xa,Pa){Xa*=Be;Pa*=Be;var Mb=Bd(Pa),bc=Mb*Bd(Xa);Xa=Mb*rd(Xa);Pa=rd(Pa);Mb=og*Pa-qg*Xa;var kc=qg*bc-bg*Pa,ed=bg*Xa-og*bc,nd=Hd(Mb*Mb+kc*kc+ed*ed),hd=g(nd);nd=nd&&-hd/nd;sh+=nd*Mb;ah+=nd*kc;bh+=nd*ed;ng+=hd;Kh+=hd*(bg+(bg=bc));rh+=hd*(og+(og=Xa));Yg+=hd*(qg+(qg=Pa));ba(bg,og,qg)}function ia(Xa){return function(){return Xa}}function ra(Xa,
Pa){function Mb(bc,kc){return bc=Xa(bc,kc),Pa(bc[0],bc[1])}Xa.invert&&Pa.invert&&(Mb.invert=function(bc,kc){return bc=Pa.invert(bc,kc),bc&&Xa.invert(bc[0],bc[1])});return Mb}function wa(Xa,Pa){return[Ie(Xa)>Ud?Xa+Math.round(-Xa/hf)*hf:Xa,Pa]}function pa(Xa,Pa,Mb){return(Xa%=hf)?Pa||Mb?ra(ka(Xa),na(Pa,Mb)):ka(Xa):Pa||Mb?na(Pa,Mb):wa}function la(Xa){return function(Pa,Mb){return Pa+=Xa,[Pa>Ud?Pa-hf:Pa<-Ud?Pa+hf:Pa,Mb]}}function ka(Xa){var Pa=la(Xa);Pa.invert=la(-Xa);return Pa}function na(Xa,Pa){function Mb(hd,
md){var pd=Bd(md),Pd=Bd(hd)*pd;hd=rd(hd)*pd;md=rd(md);pd=md*bc+Pd*kc;return[Zc(hd*ed-pd*nd,Pd*bc-md*kc),g(pd*ed+hd*nd)]}var bc=Bd(Xa),kc=rd(Xa),ed=Bd(Pa),nd=rd(Pa);Mb.invert=function(hd,md){var pd=Bd(md),Pd=Bd(hd)*pd;hd=rd(hd)*pd;md=rd(md);pd=md*ed-hd*nd;return[Zc(hd*ed+md*nd,Pd*bc+pd*kc),g(pd*bc-Pd*kc)]};return Mb}function oa(Xa){function Pa(Mb){Mb=Xa(Mb[0]*Be,Mb[1]*Be);return Mb[0]*=Te,Mb[1]*=Te,Mb}Xa=pa(Xa[0]*Be,Xa[1]*Be,2<Xa.length?Xa[2]*Be:0);Pa.invert=function(Mb){Mb=Xa.invert(Mb[0]*Be,Mb[1]*
Be);return Mb[0]*=Te,Mb[1]*=Te,Mb};return Pa}function sa(Xa,Pa,Mb,bc,kc,ed){if(Mb){var nd=Bd(Pa),hd=rd(Pa);Mb*=bc;if(null==kc)kc=Pa+bc*hf,ed=Pa-Mb/2;else if(kc=za(nd,kc),ed=za(nd,ed),0<bc?kc<ed:kc>ed)kc+=bc*hf;for(;0<bc?kc>ed:kc<ed;kc-=Mb)Pa=x([nd,-hd*Bd(kc),-hd*rd(kc)]),Xa.point(Pa[0],Pa[1])}}function za(Xa,Pa){Pa=z(Pa);Pa[0]-=Xa;v(Pa);Xa=a(-Pa[1]);return((0>-Pa[2]?-Xa:Xa)+hf-1E-6)%hf}function Ha(){var Xa=[],Pa;return{point:function(Mb,bc,kc){Pa.push([Mb,bc,kc])},lineStart:function(){Xa.push(Pa=
[])},lineEnd:r,rejoin:function(){1<Xa.length&&Xa.push(Xa.pop().concat(Xa.shift()))},result:function(){var Mb=Xa;Xa=[];Pa=null;return Mb}}}function Wa(Xa,Pa){return 1E-6>Ie(Xa[0]-Pa[0])&&1E-6>Ie(Xa[1]-Pa[1])}function Za(Xa,Pa,Mb,bc){this.x=Xa;this.z=Pa;this.o=Mb;this.e=bc;this.v=!1;this.n=this.p=null}function bb(Xa,Pa,Mb,bc,kc){var ed=[],nd=[];Xa.forEach(function(xd){if(!(0>=(Ld=xd.length-1))){var Ld,$d=xd[0],Vd=xd[Ld];if(Wa($d,Vd)){if(!$d[2]&&!Vd[2]){kc.lineStart();for(hd=0;hd<Ld;++hd)kc.point(($d=
xd[hd])[0],$d[1]);kc.lineEnd();return}Vd[0]+=2E-6}ed.push(Ld=new Za($d,xd,null,!0));nd.push(Ld.o=new Za($d,null,Ld,!1));ed.push(Ld=new Za(Vd,xd,null,!1));nd.push(Ld.o=new Za(Vd,null,Ld,!0))}});if(ed.length){nd.sort(Pa);sb(ed);sb(nd);var hd=0;for(Xa=nd.length;hd<Xa;++hd)nd[hd].e=Mb=!Mb;Mb=ed[0];for(var md;;){for(var pd=Mb,Pd=!0;pd.v;)if((pd=pd.n)===Mb)return;Pa=pd.z;kc.lineStart();do{pd.v=pd.o.v=!0;if(pd.e){if(Pd)for(hd=0,Xa=Pa.length;hd<Xa;++hd)kc.point((md=Pa[hd])[0],md[1]);else bc(pd.x,pd.n.x,1,
kc);pd=pd.n}else{if(Pd)for(Pa=pd.p.z,hd=Pa.length-1;0<=hd;--hd)kc.point((md=Pa[hd])[0],md[1]);else bc(pd.x,pd.p.x,-1,kc);pd=pd.p}pd=pd.o;Pa=pd.z;Pd=!Pd}while(!pd.v);kc.lineEnd()}}}function sb(Xa){if(Pa=Xa.length){for(var Pa,Mb=0,bc=Xa[0],kc;++Mb<Pa;)bc.n=kc=Xa[Mb],kc.p=bc,bc=kc;bc.n=kc=Xa[0];kc.p=bc}}function hb(Xa){return Ie(Xa[0])<=Ud?Xa[0]:pe(Xa[0])*((Ie(Xa[0])+Ud)%hf-Ud)}function ub(Xa,Pa){var Mb=hb(Pa);Pa=Pa[1];var bc=rd(Pa),kc=[rd(Mb),-Bd(Mb),0],ed=0,nd=0;Tg.reset();1===bc?Pa=Ae+1E-6:-1===bc&&
(Pa=-Ae-1E-6);bc=0;for(var hd=Xa.length;bc<hd;++bc)if(pd=(md=Xa[bc]).length){var md,pd,Pd=md[pd-1],xd=hb(Pd),Ld=Pd[1]/2+rf,$d=rd(Ld),Vd=Bd(Ld);for(Ld=0;Ld<pd;++Ld,xd=df,$d=Se,Vd=he,Pd=Yd){var Yd=md[Ld],df=hb(Yd);he=Yd[1]/2+rf;var Se=rd(he),he=Bd(he),se=df-xd,de=0<=se?1:-1,De=de*se,yf=De>Ud;$d*=Se;Tg.add(Zc($d*de*rd(De),Vd*he+$d*Bd(De)));ed+=yf?se+de*hf:se;yf^xd>=Mb^df>=Mb&&(Pd=A(z(Pd),z(Yd)),v(Pd),xd=A(kc,Pd),v(xd),xd=(yf^0<=se?-1:1)*g(xd[2]),Pa>xd||Pa===xd&&(Pd[0]||Pd[1]))&&(nd+=yf^0<=se?1:-1)}}return(-1E-6>
ed||1E-6>ed&&-1E-6>Tg)^nd&1}function pb(Xa,Pa,Mb,bc){return function(kc){function ed(de,De){Xa(de,De)&&kc.point(de,De)}function nd(de,De){Ld.point(de,De)}function hd(){se.point=nd;Ld.lineStart()}function md(){se.point=ed;Ld.lineEnd()}function pd(de,De){he.push([de,De]);Vd.point(de,De)}function Pd(){Vd.lineStart();he=[]}function xd(){pd(he[0][0],he[0][1]);Vd.lineEnd();var de=Vd.clean(),De=$d.result(),yf=De.length,Zf;he.pop();df.push(he);he=null;if(yf)if(de&1){if(yf=De[0],0<(De=yf.length-1)){Yd||(kc.polygonStart(),
Yd=!0);kc.lineStart();for(de=0;de<De;++de)kc.point((Zf=yf[de])[0],Zf[1]);kc.lineEnd()}}else 1<yf&&de&2&&De.push(De.pop().concat(De.shift())),Se.push(De.filter(Ab))}var Ld=Pa(kc),$d=Ha(),Vd=Pa($d),Yd=!1,df,Se,he,se={point:ed,lineStart:hd,lineEnd:md,polygonStart:function(){se.point=pd;se.lineStart=Pd;se.lineEnd=xd;Se=[];df=[]},polygonEnd:function(){se.point=ed;se.lineStart=hd;se.lineEnd=md;Se=n.merge(Se);var de=ub(df,bc);Se.length?(Yd||(kc.polygonStart(),Yd=!0),bb(Se,tb,de,Mb,kc)):de&&(Yd||(kc.polygonStart(),
Yd=!0),kc.lineStart(),Mb(null,null,1,kc),kc.lineEnd());Yd&&(kc.polygonEnd(),Yd=!1);Se=df=null},sphere:function(){kc.polygonStart();kc.lineStart();Mb(null,null,1,kc);kc.lineEnd();kc.polygonEnd()}};return se}}function Ab(Xa){return 1<Xa.length}function tb(Xa,Pa){return(0>(Xa=Xa.x)[0]?Xa[1]-Ae-1E-6:Ae-Xa[1])-(0>(Pa=Pa.x)[0]?Pa[1]-Ae-1E-6:Ae-Pa[1])}function vb(Xa){function Pa(md,pd){return Bd(md)*Bd(pd)>kc}function Mb(md,pd,Pd){var xd=z(md),Ld=z(pd),$d=[1,0,0];Ld=A(xd,Ld);var Vd=B(Ld,Ld);xd=Ld[0];var Yd=
Vd-xd*xd;if(!Yd)return!Pd&&md;Vd=kc*Vd/Yd;Yd=-kc*xd/Yd;xd=A($d,Ld);$d=C($d,Vd);Ld=C(Ld,Yd);D($d,Ld);Ld=B($d,xd);Vd=B(xd,xd);Yd=Ld*Ld-Vd*(B($d,$d)-1);if(!(0>Yd)){var df=Hd(Yd);Yd=C(xd,(-Ld-df)/Vd);D(Yd,$d);Yd=x(Yd);if(!Pd)return Yd;Pd=md[0];var Se=pd[0];md=md[1];pd=pd[1];if(Se<Pd){var he=Pd;Pd=Se;Se=he}var se=Se-Pd,de=1E-6>Ie(se-Ud);!de&&pd<md&&(he=md,md=pd,pd=he);if(de||1E-6>se?de?0<md+pd^Yd[1]<(1E-6>Ie(Yd[0]-Pd)?md:pd):md<=Yd[1]&&Yd[1]<=pd:se>Ud^(Pd<=Yd[0]&&Yd[0]<=Se))return pd=C(xd,(-Ld+df)/Vd),
D(pd,$d),[Yd,x(pd)]}}function bc(md,pd){var Pd=nd?Xa:Ud-Xa,xd=0;md<-Pd?xd|=1:md>Pd&&(xd|=2);pd<-Pd?xd|=4:pd>Pd&&(xd|=8);return xd}var kc=Bd(Xa),ed=6*Be,nd=0<kc,hd=1E-6<Ie(kc);return pb(Pa,function(md){var pd,Pd,xd,Ld,$d;return{lineStart:function(){Ld=xd=!1;$d=1},point:function(Vd,Yd){var df=[Vd,Yd],Se=Pa(Vd,Yd);Yd=nd?Se?0:bc(Vd,Yd):Se?bc(Vd+(0>Vd?Ud:-Ud),Yd):0;!pd&&(Ld=xd=Se)&&md.lineStart();Se!==xd&&(Vd=Mb(pd,df),!Vd||Wa(pd,Vd)||Wa(df,Vd))&&(df[2]=1);if(Se!==xd)$d=0,Se?(md.lineStart(),Vd=Mb(df,pd),
md.point(Vd[0],Vd[1])):(Vd=Mb(pd,df),md.point(Vd[0],Vd[1],2),md.lineEnd()),pd=Vd;else if(hd&&pd&&nd^Se){var he;Yd&Pd||!(he=Mb(df,pd,!0))||($d=0,nd?(md.lineStart(),md.point(he[0][0],he[0][1]),md.point(he[1][0],he[1][1]),md.lineEnd()):(md.point(he[1][0],he[1][1]),md.lineEnd(),md.lineStart(),md.point(he[0][0],he[0][1],3)))}!Se||pd&&Wa(pd,df)||md.point(df[0],df[1]);pd=df;xd=Se;Pd=Yd},lineEnd:function(){xd&&md.lineEnd();pd=null},clean:function(){return $d|(Ld&&xd)<<1}}},function(md,pd,Pd,xd){sa(xd,Xa,
ed,Pd,md,pd)},nd?[0,-Xa]:[-Ud,Xa-Ud])}function qb(Xa,Pa,Mb,bc,kc,ed){var nd=Xa[0],hd=Xa[1],md=0,pd=1,Pd=Pa[0]-nd,xd=Pa[1]-hd;Mb-=nd;if(Pd||!(0<Mb)){Mb/=Pd;if(0>Pd){if(Mb<md)return;Mb<pd&&(pd=Mb)}else if(0<Pd){if(Mb>pd)return;Mb>md&&(md=Mb)}Mb=kc-nd;if(Pd||!(0>Mb)){Mb/=Pd;if(0>Pd){if(Mb>pd)return;Mb>md&&(md=Mb)}else if(0<Pd){if(Mb<md)return;Mb<pd&&(pd=Mb)}Mb=bc-hd;if(xd||!(0<Mb)){Mb/=xd;if(0>xd){if(Mb<md)return;Mb<pd&&(pd=Mb)}else if(0<xd){if(Mb>pd)return;Mb>md&&(md=Mb)}Mb=ed-hd;if(xd||!(0>Mb)){Mb/=
xd;if(0>xd){if(Mb>pd)return;Mb>md&&(md=Mb)}else if(0<xd){if(Mb<md)return;Mb<pd&&(pd=Mb)}0<md&&(Xa[0]=nd+md*Pd,Xa[1]=hd+md*xd);1>pd&&(Pa[0]=nd+pd*Pd,Pa[1]=hd+pd*xd);return!0}}}}}function zb(Xa,Pa,Mb,bc){function kc(md,pd,Pd,xd){var Ld=0,$d=0;if(null==md||(Ld=ed(md,Pd))!==($d=ed(pd,Pd))||0>hd(md,pd)^0<Pd){do xd.point(0===Ld||3===Ld?Xa:Mb,1<Ld?bc:Pa);while((Ld=(Ld+Pd+4)%4)!==$d)}else xd.point(pd[0],pd[1])}function ed(md,pd){return 1E-6>Ie(md[0]-Xa)?0<pd?0:3:1E-6>Ie(md[0]-Mb)?0<pd?2:1:1E-6>Ie(md[1]-Pa)?
0<pd?1:0:0<pd?3:2}function nd(md,pd){return hd(md.x,pd.x)}function hd(md,pd){var Pd=ed(md,1),xd=ed(pd,1);return Pd!==xd?Pd-xd:0===Pd?pd[1]-md[1]:1===Pd?md[0]-pd[0]:2===Pd?md[1]-pd[1]:pd[0]-md[0]}return function(md){function pd(gf,uf){Xa<=gf&&gf<=Mb&&Pa<=uf&&uf<=bc&&xd.point(gf,uf)}function Pd(gf,uf){var dg=Xa<=gf&&gf<=Mb&&Pa<=uf&&uf<=bc;Vd&&Yd.push([gf,uf]);if(yf)df=gf,Se=uf,he=dg,yf=!1,dg&&(xd.lineStart(),xd.point(gf,uf));else if(dg&&De)xd.point(gf,uf);else{var kg=[se=Math.max(-1E9,Math.min(1E9,
se)),de=Math.max(-1E9,Math.min(1E9,de))],Kg=[gf=Math.max(-1E9,Math.min(1E9,gf)),uf=Math.max(-1E9,Math.min(1E9,uf))];qb(kg,Kg,Xa,Pa,Mb,bc)?(De||(xd.lineStart(),xd.point(kg[0],kg[1])),xd.point(Kg[0],Kg[1]),dg||xd.lineEnd(),Zf=!1):dg&&(xd.lineStart(),xd.point(gf,uf),Zf=!1)}se=gf;de=uf;De=dg}var xd=md,Ld=Ha(),$d,Vd,Yd,df,Se,he,se,de,De,yf,Zf,Tf={point:pd,lineStart:function(){Tf.point=Pd;Vd&&Vd.push(Yd=[]);yf=!0;De=!1;se=de=NaN},lineEnd:function(){$d&&(Pd(df,Se),he&&De&&Ld.rejoin(),$d.push(Ld.result()));
Tf.point=pd;De&&xd.lineEnd()},polygonStart:function(){xd=Ld;$d=[];Vd=[];Zf=!0},polygonEnd:function(){for(var gf,uf=gf=0,dg=Vd.length;uf<dg;++uf){var kg=Vd[uf],Kg=1,$f=kg.length,Ee=kg[0],eg=Ee[0];for(Ee=Ee[1];Kg<$f;++Kg){var Cg=eg;var mh=Ee;Ee=kg[Kg];eg=Ee[0];Ee=Ee[1];mh<=bc?Ee>bc&&(eg-Cg)*(bc-mh)>(Ee-mh)*(Xa-Cg)&&++gf:Ee<=bc&&(eg-Cg)*(bc-mh)<(Ee-mh)*(Xa-Cg)&&--gf}}uf=Zf&&gf;dg=($d=n.merge($d)).length;if(uf||dg)md.polygonStart(),uf&&(md.lineStart(),kc(null,null,1,md),md.lineEnd()),dg&&bb($d,nd,gf,
kc,md),md.polygonEnd();xd=md;$d=Vd=Yd=null}};return Tf}}function La(){pg.point=pg.lineEnd=r}function Ka(Xa,Pa){Xa*=Be;Pa*=Be;Ug=Xa;Wf=rd(Pa);kh=Bd(Pa);pg.point=ya}function ya(Xa,Pa){Xa*=Be;Pa*=Be;var Mb=rd(Pa);Pa=Bd(Pa);var bc=Ie(Xa-Ug),kc=Bd(bc);bc=rd(bc);bc*=Pa;var ed=kh*Mb-Wf*Pa*kc;kc=Wf*Mb+kh*Pa*kc;jh.add(Zc(Hd(bc*bc+ed*ed),kc));Ug=Xa;Wf=Mb;kh=Pa}function Aa(Xa){jh.reset();e(Xa,pg);return+jh}function Ja(Xa,Pa){Bg[0]=Xa;Bg[1]=Pa;return Aa(th)}function Ta(Xa,Pa){return Xa&&Bh.hasOwnProperty(Xa.type)?
Bh[Xa.type](Xa,Pa):!1}function $a(Xa,Pa){for(var Mb,bc,kc,ed=0,nd=Xa.length;ed<nd;ed++){bc=Ja(Xa[ed],Pa);if(0===bc||0<ed&&(kc=Ja(Xa[ed],Xa[ed-1]),0<kc&&Mb<=kc&&bc<=kc&&(Mb+bc-kc)*(1-Math.pow((Mb-bc)/kc,2))<1E-12*kc))return!0;Mb=bc}return!1}function ab(Xa,Pa){return!!ub(Xa.map(Db),Nb(Pa))}function Db(Xa){return Xa=Xa.map(Nb),Xa.pop(),Xa}function Nb(Xa){return[Xa[0]*Be,Xa[1]*Be]}function ec(Xa,Pa,Mb){var bc=n.range(Xa,Pa-1E-6,Mb).concat(Pa);return function(kc){return bc.map(function(ed){return[kc,ed]})}}
function ob(Xa,Pa,Mb){var bc=n.range(Xa,Pa-1E-6,Mb).concat(Pa);return function(kc){return bc.map(function(ed){return[ed,kc]})}}function Cb(){function Xa(){return{type:"MultiLineString",coordinates:Pa()}}function Pa(){return n.range(Ob(ed/Ld)*Ld,kc,Ld).map(df).concat(n.range(Ob(pd/$d)*$d,md,$d).map(Se)).concat(n.range(Ob(bc/Pd)*Pd,Mb,Pd).filter(function(se){return 1E-6<Ie(se%Ld)}).map(Vd)).concat(n.range(Ob(hd/xd)*xd,nd,xd).filter(function(se){return 1E-6<Ie(se%$d)}).map(Yd))}var Mb,bc,kc,ed,nd,hd,
md,pd,Pd=10,xd=Pd,Ld=90,$d=360,Vd,Yd,df,Se,he=2.5;Xa.lines=function(){return Pa().map(function(se){return{type:"LineString",coordinates:se}})};Xa.outline=function(){return{type:"Polygon",coordinates:[df(ed).concat(Se(md).slice(1),df(kc).reverse().slice(1),Se(pd).reverse().slice(1))]}};Xa.extent=function(se){return arguments.length?Xa.extentMajor(se).extentMinor(se):Xa.extentMinor()};Xa.extentMajor=function(se){if(!arguments.length)return[[ed,pd],[kc,md]];ed=+se[0][0];kc=+se[1][0];pd=+se[0][1];md=
+se[1][1];ed>kc&&(se=ed,ed=kc,kc=se);pd>md&&(se=pd,pd=md,md=se);return Xa.precision(he)};Xa.extentMinor=function(se){if(!arguments.length)return[[bc,hd],[Mb,nd]];bc=+se[0][0];Mb=+se[1][0];hd=+se[0][1];nd=+se[1][1];bc>Mb&&(se=bc,bc=Mb,Mb=se);hd>nd&&(se=hd,hd=nd,nd=se);return Xa.precision(he)};Xa.step=function(se){return arguments.length?Xa.stepMajor(se).stepMinor(se):Xa.stepMinor()};Xa.stepMajor=function(se){if(!arguments.length)return[Ld,$d];Ld=+se[0];$d=+se[1];return Xa};Xa.stepMinor=function(se){if(!arguments.length)return[Pd,
xd];Pd=+se[0];xd=+se[1];return Xa};Xa.precision=function(se){if(!arguments.length)return he;he=+se;Vd=ec(hd,nd,90);Yd=ob(bc,Mb,he);df=ec(pd,md,90);Se=ob(ed,kc,he);return Xa};return Xa.extentMajor([[-180,-89.999999],[180,89.999999]]).extentMinor([[-180,-80.000001],[180,80.000001]])}function Qb(Xa){return Xa}function yc(){Oa.point=Jc}function Jc(Xa,Pa){Oa.point=Ia;Lh=Ga=Xa;vh=Fa=Pa}function Ia(Xa,Pa){lh.add(Fa*Xa-Ga*Pa);Ga=Xa;Fa=Pa}function Na(){Ia(Lh,vh)}function ib(Xa,Pa){Ib+=Xa;gc+=Pa;++hc}function Gb(){Xf.point=
Hb}function Hb(Xa,Pa){Xf.point=$b;ib(He=Xa,cg=Pa)}function $b(Xa,Pa){var Mb=Xa-He,bc=Pa-cg;Mb=Hd(Mb*Mb+bc*bc);qc+=Mb*(He+Xa)/2;Ec+=Mb*(cg+Pa)/2;ld+=Mb;ib(He=Xa,cg=Pa)}function uc(){Xf.point=ib}function fd(){Xf.point=Pb}function fb(){fc(We,fg)}function Pb(Xa,Pa){Xf.point=fc;ib(We=He=Xa,fg=cg=Pa)}function fc(Xa,Pa){var Mb=Xa-He,bc=Pa-cg;Mb=Hd(Mb*Mb+bc*bc);qc+=Mb*(He+Xa)/2;Ec+=Mb*(cg+Pa)/2;ld+=Mb;Mb=cg*Xa-He*Pa;Dd+=Mb*(He+Xa);ye+=Mb*(cg+Pa);ze+=3*Mb;ib(He=Xa,cg=Pa)}function Fc(Xa){this._context=Xa}function Pc(Xa,
Pa){wh.point=Uc;Mg=Jf=Xa;vg=Yf=Pa}function Uc(Xa,Pa){Jf-=Xa;Yf-=Pa;Af.add(Hd(Jf*Jf+Yf*Yf));Jf=Xa;Yf=Pa}function rb(){this._string=[]}function Jb(Xa){return"m0,"+Xa+"a"+Xa+","+Xa+" 0 1,1 0,"+-2*Xa+"a"+Xa+","+Xa+" 0 1,1 0,"+2*Xa+"z"}function sc(Xa){return function(Pa){var Mb=new nc,bc;for(bc in Xa)Mb[bc]=Xa[bc];Mb.stream=Pa;return Mb}}function nc(){}function vc(Xa,Pa,Mb){var bc=Xa.clipExtent&&Xa.clipExtent();Xa.scale(150).translate([0,0]);null!=bc&&Xa.clipExtent(null);e(Mb,Xa.stream(Xb));Pa(Xb.result());
null!=bc&&Xa.clipExtent(bc);return Xa}function Vb(Xa,Pa,Mb){return vc(Xa,function(bc){var kc=Pa[1][0]-Pa[0][0],ed=Pa[1][1]-Pa[0][1],nd=Math.min(kc/(bc[1][0]-bc[0][0]),ed/(bc[1][1]-bc[0][1]));kc=+Pa[0][0]+(kc-nd*(bc[1][0]+bc[0][0]))/2;bc=+Pa[0][1]+(ed-nd*(bc[1][1]+bc[0][1]))/2;Xa.scale(150*nd).translate([kc,bc])},Mb)}function Wb(Xa,Pa,Mb){return vc(Xa,function(bc){var kc=+Pa,ed=kc/(bc[1][0]-bc[0][0]);kc=(kc-ed*(bc[1][0]+bc[0][0]))/2;bc=-ed*bc[0][1];Xa.scale(150*ed).translate([kc,bc])},Mb)}function yb(Xa,
Pa,Mb){return vc(Xa,function(bc){var kc=+Pa,ed=kc/(bc[1][1]-bc[0][1]),nd=-ed*bc[0][0];bc=(kc-ed*(bc[1][1]+bc[0][1]))/2;Xa.scale(150*ed).translate([nd,bc])},Mb)}function ac(Xa){return sc({point:function(Pa,Mb){Pa=Xa(Pa,Mb);this.stream.point(Pa[0],Pa[1])}})}function Ub(Xa,Pa){function Mb(bc,kc,ed,nd,hd,md,pd,Pd,xd,Ld,$d,Vd,Yd,df){var Se=pd-bc,he=Pd-kc,se=Se*Se+he*he;if(se>4*Pa&&Yd--){var de=nd+Ld,De=hd+$d,yf=md+Vd,Zf=Hd(de*de+De*De+yf*yf),Tf=g(yf/=Zf),gf=1E-6>Ie(Ie(yf)-1)||1E-6>Ie(ed-xd)?(ed+xd)/2:
Zc(De,de),uf=Xa(gf,Tf);Tf=uf[0];uf=uf[1];var dg=Tf-bc,kg=uf-kc,Kg=he*dg-Se*kg;if(Kg*Kg/se>Pa||.3<Ie((Se*dg+he*kg)/se-.5)||nd*Ld+hd*$d+md*Vd<Uh)Mb(bc,kc,ed,nd,hd,md,Tf,uf,gf,de/=Zf,De/=Zf,yf,Yd,df),df.point(Tf,uf),Mb(Tf,uf,gf,de,De,yf,pd,Pd,xd,Ld,$d,Vd,Yd,df)}}return function(bc){function kc(Tf,gf){Tf=Xa(Tf,gf);bc.point(Tf[0],Tf[1])}function ed(){he=NaN;Zf.point=nd;bc.lineStart()}function nd(Tf,gf){var uf=z([Tf,gf]);gf=Xa(Tf,gf);Mb(he,se,Se,de,De,yf,he=gf[0],se=gf[1],Se=Tf,de=uf[0],De=uf[1],yf=uf[2],
16,bc);bc.point(he,se)}function hd(){Zf.point=kc;bc.lineEnd()}function md(){ed();Zf.point=pd;Zf.lineEnd=Pd}function pd(Tf,gf){nd(xd=Tf,gf);Ld=he;$d=se;Vd=de;Yd=De;df=yf;Zf.point=nd}function Pd(){Mb(he,se,Se,de,De,yf,Ld,$d,xd,Vd,Yd,df,16,bc);Zf.lineEnd=hd;hd()}var xd,Ld,$d,Vd,Yd,df,Se,he,se,de,De,yf,Zf={point:kc,lineStart:ed,lineEnd:hd,polygonStart:function(){bc.polygonStart();Zf.lineStart=md},polygonEnd:function(){bc.polygonEnd();Zf.lineStart=ed}};return Zf}}function lc(Xa){return sc({point:function(Pa,
Mb){Pa=Xa(Pa,Mb);return this.stream.point(Pa[0],Pa[1])}})}function tc(Xa,Pa,Mb,bc,kc){function ed(nd,hd){nd*=bc;hd*=kc;return[Pa+Xa*nd,Mb-Xa*hd]}ed.invert=function(nd,hd){return[(nd-Pa)/Xa*bc,(Mb-hd)/Xa*kc]};return ed}function Rc(Xa,Pa,Mb,bc,kc,ed){function nd(Vd,Yd){Vd*=bc;Yd*=kc;return[md*Vd-pd*Yd+Pa,Mb-pd*Vd-md*Yd]}var hd=Bd(ed);ed=rd(ed);var md=hd*Xa,pd=ed*Xa,Pd=hd/Xa,xd=ed/Xa,Ld=(ed*Mb-hd*Pa)/Xa,$d=(ed*Pa+hd*Mb)/Xa;nd.invert=function(Vd,Yd){return[bc*(Pd*Vd-xd*Yd+Ld),kc*($d-xd*Vd-Pd*Yd)]};return nd}
function kd(Xa){return Cd(function(){return Xa})()}function Cd(Xa){function Pa(Ee){return kg(Ee[0]*Be,Ee[1]*Be)}function Mb(Ee){return(Ee=kg.invert(Ee[0],Ee[1]))&&[Ee[0]*Te,Ee[1]*Te]}function bc(){var Ee=Rc(nd,0,0,df,Se,Yd).apply(null,ed(pd,Pd));Ee=(Yd?Rc:tc)(nd,hd-Ee[0],md-Ee[1],df,Se,Yd);Vd=pa(xd,Ld,$d);dg=ra(ed,Ee);kg=ra(Vd,dg);Ee=dg;uf=+gf?Ub(Ee,gf):ac(Ee);return kc()}function kc(){Kg=$f=null;return Pa}var ed,nd=150,hd=480,md=250,pd=0,Pd=0,xd=0,Ld=0,$d=0,Vd,Yd=0,df=1,Se=1,he=null,se=Ig,de=null,
De,yf,Zf,Tf=Qb,gf=.5,uf,dg,kg,Kg,$f;Pa.stream=function(Ee){return Kg&&$f===Ee?Kg:Kg=hi(lc(Vd)(se(uf(Tf($f=Ee)))))};Pa.preclip=function(Ee){return arguments.length?(se=Ee,he=void 0,kc()):se};Pa.postclip=function(Ee){return arguments.length?(Tf=Ee,de=De=yf=Zf=null,kc()):Tf};Pa.clipAngle=function(Ee){return arguments.length?(se=+Ee?vb(he=Ee*Be):(he=null,Ig),kc()):he*Te};Pa.clipExtent=function(Ee){return arguments.length?(Tf=null==Ee?(de=De=yf=Zf=null,Qb):zb(de=+Ee[0][0],De=+Ee[0][1],yf=+Ee[1][0],Zf=
+Ee[1][1]),kc()):null==de?null:[[de,De],[yf,Zf]]};Pa.scale=function(Ee){return arguments.length?(nd=+Ee,bc()):nd};Pa.translate=function(Ee){return arguments.length?(hd=+Ee[0],md=+Ee[1],bc()):[hd,md]};Pa.center=function(Ee){return arguments.length?(pd=Ee[0]%360*Be,Pd=Ee[1]%360*Be,bc()):[pd*Te,Pd*Te]};Pa.rotate=function(Ee){return arguments.length?(xd=Ee[0]%360*Be,Ld=Ee[1]%360*Be,$d=2<Ee.length?Ee[2]%360*Be:0,bc()):[xd*Te,Ld*Te,$d*Te]};Pa.angle=function(Ee){return arguments.length?(Yd=Ee%360*Be,bc()):
Yd*Te};Pa.reflectX=function(Ee){return arguments.length?(df=Ee?-1:1,bc()):0>df};Pa.reflectY=function(Ee){return arguments.length?(Se=Ee?-1:1,bc()):0>Se};Pa.precision=function(Ee){if(arguments.length){var eg=dg;var Cg=gf=Ee*Ee;eg=(uf=+Cg?Ub(eg,Cg):ac(eg),kc())}else eg=Hd(gf);return eg};Pa.fitExtent=function(Ee,eg){return Vb(Pa,Ee,eg)};Pa.fitSize=function(Ee,eg){return Vb(Pa,[[0,0],Ee],eg)};Pa.fitWidth=function(Ee,eg){return Wb(Pa,Ee,eg)};Pa.fitHeight=function(Ee,eg){return yb(Pa,Ee,eg)};return function(){ed=
Xa.apply(this,arguments);Pa.invert=ed.invert&&Mb;return bc()}}function Gd(Xa){var Pa=0,Mb=Ud/3,bc=Cd(Xa);Xa=bc(Pa,Mb);Xa.parallels=function(kc){return arguments.length?bc(Pa=kc[0]*Be,Mb=kc[1]*Be):[Pa*Te,Mb*Te]};return Xa}function Ad(Xa){function Pa(bc,kc){return[bc*Mb,rd(kc)/Mb]}var Mb=Bd(Xa);Pa.invert=function(bc,kc){return[bc/Mb,g(kc*Mb)]};return Pa}function Nc(Xa,Pa){function Mb(hd,md){md=Hd(ed-2*kc*rd(md))/kc;return[md*rd(hd*=kc),nd-md*Bd(hd)]}var bc=rd(Xa),kc=(bc+rd(Pa))/2;if(1E-6>Ie(kc))return Ad(Xa);
var ed=1+bc*(2*kc-bc),nd=Hd(ed)/kc;Mb.invert=function(hd,md){md=nd-md;var pd=Zc(hd,Ie(md))*pe(md);0>md*kc&&(pd-=Ud*pe(hd)*pe(md));return[pd/kc,g((ed-(hd*hd+md*md)*kc*kc)/(2*kc))]};return Mb}function cd(){return Gd(Nc).scale(155.424).center([0,33.6442])}function Cc(){return cd().parallels([29.5,45.5]).scale(1070).translate([480,250]).rotate([96,0]).center([-.6,38.7])}function dd(Xa){var Pa=Xa.length;return{point:function(Mb,bc){for(var kc=-1;++kc<Pa;)Xa[kc].point(Mb,bc)},sphere:function(){for(var Mb=
-1;++Mb<Pa;)Xa[Mb].sphere()},lineStart:function(){for(var Mb=-1;++Mb<Pa;)Xa[Mb].lineStart()},lineEnd:function(){for(var Mb=-1;++Mb<Pa;)Xa[Mb].lineEnd()},polygonStart:function(){for(var Mb=-1;++Mb<Pa;)Xa[Mb].polygonStart()},polygonEnd:function(){for(var Mb=-1;++Mb<Pa;)Xa[Mb].polygonEnd()}}}function Vc(Xa){return function(Pa,Mb){var bc=Bd(Pa),kc=Bd(Mb);bc=Xa(bc*kc);return[bc*kc*rd(Pa),bc*rd(Mb)]}}function Sc(Xa){return function(Pa,Mb){var bc=Hd(Pa*Pa+Mb*Mb),kc=Xa(bc),ed=rd(kc);kc=Bd(kc);return[Zc(Pa*
ed,bc*kc),g(bc&&Mb*ed/bc)]}}function id(Xa,Pa){return[Xa,Mc(qe((Ae+Pa)/2))]}function Md(Xa){function Pa(){var xd=Ud*kc(),Ld=Mb(oa(Mb.rotate()).invert([0,0]));return nd(null==hd?[[Ld[0]-xd,Ld[1]-xd],[Ld[0]+xd,Ld[1]+xd]]:Xa===id?[[Math.max(Ld[0]-xd,hd),md],[Math.min(Ld[0]+xd,pd),Pd]]:[[hd,Math.max(Ld[1]-xd,md)],[pd,Math.min(Ld[1]+xd,Pd)]])}var Mb=kd(Xa),bc=Mb.center,kc=Mb.scale,ed=Mb.translate,nd=Mb.clipExtent,hd=null,md,pd,Pd;Mb.scale=function(xd){return arguments.length?(kc(xd),Pa()):kc()};Mb.translate=
function(xd){return arguments.length?(ed(xd),Pa()):ed()};Mb.center=function(xd){return arguments.length?(bc(xd),Pa()):bc()};Mb.clipExtent=function(xd){return arguments.length?(null==xd?hd=md=pd=Pd=null:(hd=+xd[0][0],md=+xd[0][1],pd=+xd[1][0],Pd=+xd[1][1]),Pa()):null==hd?null:[[hd,md],[pd,Pd]]};return Pa()}function Sd(Xa,Pa){function Mb(nd,hd){0<ed?hd<-Ae+1E-6&&(hd=-Ae+1E-6):hd>Ae-1E-6&&(hd=Ae-1E-6);hd=ed/Fd(qe((Ae+hd)/2),kc);return[hd*rd(kc*nd),ed-hd*Bd(kc*nd)]}var bc=Bd(Xa),kc=Xa===Pa?rd(Xa):Mc(bc/
Bd(Pa))/Mc(qe((Ae+Pa)/2)/qe((Ae+Xa)/2)),ed=bc*Fd(qe((Ae+Xa)/2),kc)/kc;if(!kc)return id;Mb.invert=function(nd,hd){hd=ed-hd;var md=pe(kc)*Hd(nd*nd+hd*hd),pd=Zc(nd,Ie(hd))*pe(hd);0>hd*kc&&(pd-=Ud*pe(nd)*pe(hd));return[pd/kc,2*nf(Fd(ed/md,1/kc))-Ae]};return Mb}function Td(Xa,Pa){return[Xa,Pa]}function Ue(Xa,Pa){function Mb(nd,hd){hd=ed-hd;nd*=kc;return[hd*rd(nd),ed-hd*Bd(nd)]}var bc=Bd(Xa),kc=Xa===Pa?rd(Xa):(bc-Bd(Pa))/(Pa-Xa),ed=bc/kc+Xa;if(1E-6>Ie(kc))return Td;Mb.invert=function(nd,hd){hd=ed-hd;var md=
Zc(nd,Ie(hd))*pe(hd);0>hd*kc&&(md-=Ud*pe(nd)*pe(hd));return[md/kc,ed-pe(kc)*Hd(nd*nd+hd*hd)]};return Mb}function Ke(Xa,Pa){Pa=g(Vh*rd(Pa));var Mb=Pa*Pa,bc=Mb*Mb*Mb;return[Xa*Bd(Pa)/(Vh*(1.340264+3*-.081106*Mb+bc*(7*8.93E-4+.034164*Mb))),Pa*(1.340264+-.081106*Mb+bc*(8.93E-4+.003796*Mb))]}function ve(Xa,Pa){var Mb=Bd(Pa),bc=Bd(Xa)*Mb;return[Mb*rd(Xa)/bc,rd(Pa)/bc]}function zf(Xa,Pa){var Mb=Pa*Pa,bc=Mb*Mb;return[Xa*(.8707-.131979*Mb+bc*(-.013791+bc*(.003971*Mb-.001529*bc))),Pa*(1.007226+Mb*(.015085+
bc*(-.044475+.028874*Mb-.005916*bc)))]}function Ef(Xa,Pa){return[Bd(Pa)*rd(Xa),rd(Pa)]}function qf(Xa,Pa){var Mb=Bd(Pa),bc=1+Bd(Xa)*Mb;return[Mb*rd(Xa)/bc,rd(Pa)/bc]}function Ff(Xa,Pa){return[Mc(qe((Ae+Pa)/2)),-Xa]}k.prototype={constructor:k,reset:function(){this.s=this.t=0},add:function(Xa){m(Rf,Xa,this.t);m(this,Rf.s,this.s);this.s?this.t+=Rf.t:this.s=Rf.t},valueOf:function(){return this.s}};var Rf=new k,Ud=Math.PI,Ae=Ud/2,rf=Ud/4,hf=2*Ud,Te=180/Ud,Be=Ud/180,Ie=Math.abs,nf=Math.atan,Zc=Math.atan2,
Bd=Math.cos,Ob=Math.ceil,Zb=Math.exp,Mc=Math.log,Fd=Math.pow,rd=Math.sin,pe=Math.sign||function(Xa){return 0<Xa?1:0>Xa?-1:0},Hd=Math.sqrt,qe=Math.tan,Ge={Feature:function(Xa,Pa){l(Xa.geometry,Pa)},FeatureCollection:function(Xa,Pa){Xa=Xa.features;for(var Mb=-1,bc=Xa.length;++Mb<bc;)l(Xa[Mb].geometry,Pa)}},oe={Sphere:function(Xa,Pa){Pa.sphere()},Point:function(Xa,Pa){Xa=Xa.coordinates;Pa.point(Xa[0],Xa[1],Xa[2])},MultiPoint:function(Xa,Pa){for(var Mb=Xa.coordinates,bc=-1,kc=Mb.length;++bc<kc;)Xa=Mb[bc],
Pa.point(Xa[0],Xa[1],Xa[2])},LineString:function(Xa,Pa){c(Xa.coordinates,Pa,0)},MultiLineString:function(Xa,Pa){Xa=Xa.coordinates;for(var Mb=-1,bc=Xa.length;++Mb<bc;)c(Xa[Mb],Pa,0)},Polygon:function(Xa,Pa){d(Xa.coordinates,Pa)},MultiPolygon:function(Xa,Pa){Xa=Xa.coordinates;for(var Mb=-1,bc=Xa.length;++Mb<bc;)d(Xa[Mb],Pa)},GeometryCollection:function(Xa,Pa){Xa=Xa.geometries;for(var Mb=-1,bc=Xa.length;++Mb<bc;)l(Xa[Mb],Pa)}},xb=new k,oc=new k,Yb,Bc,Yc,bd,Tc,Oc={point:r,lineStart:r,lineEnd:r,polygonStart:function(){xb.reset();
Oc.lineStart=f;Oc.lineEnd=q},polygonEnd:function(){var Xa=+xb;oc.add(0>Xa?hf+Xa:Xa);this.lineStart=this.lineEnd=this.point=r},sphere:function(){oc.add(hf)}},wc,rc,pc,ud,ae,Wd,Ce,Xd,bf=new k,Ve,vf,Oe={point:y,lineStart:J,lineEnd:K,polygonStart:function(){Oe.point=M;Oe.lineStart=H;Oe.lineEnd=O;bf.reset();Oc.polygonStart()},polygonEnd:function(){Oc.polygonEnd();Oe.point=y;Oe.lineStart=J;Oe.lineEnd=K;0>xb?(wc=-(pc=180),rc=-(ud=90)):1E-6<bf?ud=90:-1E-6>bf&&(rc=-90);vf[0]=wc;vf[1]=pc},sphere:function(){wc=
-(pc=180);rc=-(ud=90)}},Mf,ng,Sg,Og,Ah,Kh,rh,Yg,sh,ah,bh,Th,ch,bg,og,qg,ug={sphere:r,point:Z,lineStart:V,lineEnd:fa,polygonStart:function(){ug.lineStart=W;ug.lineEnd=aa},polygonEnd:function(){ug.lineStart=V;ug.lineEnd=fa}};wa.invert=wa;var Tg=new k,Ig=pb(function(){return!0},function(Xa){var Pa=NaN,Mb=NaN,bc=NaN,kc;return{lineStart:function(){Xa.lineStart();kc=1},point:function(ed,nd){var hd=0<ed?Ud:-Ud,md=Ie(ed-Pa);if(1E-6>Ie(md-Ud))Xa.point(Pa,Mb=0<(Mb+nd)/2?Ae:-Ae),Xa.point(bc,Mb),Xa.lineEnd(),
Xa.lineStart(),Xa.point(hd,Mb),Xa.point(ed,Mb),kc=0;else if(bc!==hd&&md>=Ud){1E-6>Ie(Pa-bc)&&(Pa-=1E-6*bc);1E-6>Ie(ed-hd)&&(ed-=1E-6*hd);md=Pa;var pd=Mb,Pd=ed,xd,Ld,$d=rd(md-Pd);Mb=1E-6<Ie($d)?nf((rd(pd)*(Ld=Bd(nd))*rd(Pd)-rd(nd)*(xd=Bd(pd))*rd(md))/(xd*Ld*$d)):(pd+nd)/2;Xa.point(bc,Mb);Xa.lineEnd();Xa.lineStart();Xa.point(hd,Mb);kc=0}Xa.point(Pa=ed,Mb=nd);bc=hd},lineEnd:function(){Xa.lineEnd();Pa=Mb=NaN},clean:function(){return 2-kc}}},function(Xa,Pa,Mb,bc){null==Xa?(Mb*=Ae,bc.point(-Ud,Mb),bc.point(0,
Mb),bc.point(Ud,Mb),bc.point(Ud,0),bc.point(Ud,-Mb),bc.point(0,-Mb),bc.point(-Ud,-Mb),bc.point(-Ud,0),bc.point(-Ud,Mb)):1E-6<Ie(Xa[0]-Pa[0])?(Xa=Xa[0]<Pa[0]?Ud:-Ud,Mb=Mb*Xa/2,bc.point(-Xa,Mb),bc.point(0,Mb),bc.point(Xa,Mb)):bc.point(Pa[0],Pa[1])},[-Ud,-Ae]),jh=new k,Ug,Wf,kh,pg={sphere:r,point:r,lineStart:function(){pg.point=Ka;pg.lineEnd=La},lineEnd:r,polygonStart:r,polygonEnd:r},Bg=[null,null],th={type:"LineString",coordinates:Bg},uh={Feature:function(Xa,Pa){return Ta(Xa.geometry,Pa)},FeatureCollection:function(Xa,
Pa){Xa=Xa.features;for(var Mb=-1,bc=Xa.length;++Mb<bc;)if(Ta(Xa[Mb].geometry,Pa))return!0;return!1}},Bh={Sphere:function(){return!0},Point:function(Xa,Pa){return 0===Ja(Xa.coordinates,Pa)},MultiPoint:function(Xa,Pa){Xa=Xa.coordinates;for(var Mb=-1,bc=Xa.length;++Mb<bc;)if(0===Ja(Xa[Mb],Pa))return!0;return!1},LineString:function(Xa,Pa){return $a(Xa.coordinates,Pa)},MultiLineString:function(Xa,Pa){Xa=Xa.coordinates;for(var Mb=-1,bc=Xa.length;++Mb<bc;)if($a(Xa[Mb],Pa))return!0;return!1},Polygon:function(Xa,
Pa){return ab(Xa.coordinates,Pa)},MultiPolygon:function(Xa,Pa){Xa=Xa.coordinates;for(var Mb=-1,bc=Xa.length;++Mb<bc;)if(ab(Xa[Mb],Pa))return!0;return!1},GeometryCollection:function(Xa,Pa){Xa=Xa.geometries;for(var Mb=-1,bc=Xa.length;++Mb<bc;)if(Ta(Xa[Mb],Pa))return!0;return!1}},Gg=new k,lh=new k,Lh,vh,Ga,Fa,Oa={point:r,lineStart:r,lineEnd:r,polygonStart:function(){Oa.lineStart=yc;Oa.lineEnd=Na},polygonEnd:function(){Oa.lineStart=Oa.lineEnd=Oa.point=r;Gg.add(Ie(lh));lh.reset()},result:function(){var Xa=
Gg/2;Gg.reset();return Xa}},Sa=Infinity,cb=Sa,jb=-Sa,Bb=jb,Xb={point:function(Xa,Pa){Xa<Sa&&(Sa=Xa);Xa>jb&&(jb=Xa);Pa<cb&&(cb=Pa);Pa>Bb&&(Bb=Pa)},lineStart:r,lineEnd:r,polygonStart:r,polygonEnd:r,result:function(){var Xa=[[Sa,cb],[jb,Bb]];jb=Bb=-(cb=Sa=Infinity);return Xa}},Ib=0,gc=0,hc=0,qc=0,Ec=0,ld=0,Dd=0,ye=0,ze=0,We,fg,He,cg,Xf={point:ib,lineStart:Gb,lineEnd:uc,polygonStart:function(){Xf.lineStart=fd;Xf.lineEnd=fb},polygonEnd:function(){Xf.point=ib;Xf.lineStart=Gb;Xf.lineEnd=uc},result:function(){var Xa=
ze?[Dd/ze,ye/ze]:ld?[qc/ld,Ec/ld]:hc?[Ib/hc,gc/hc]:[NaN,NaN];Ib=gc=hc=qc=Ec=ld=Dd=ye=ze=0;return Xa}};Fc.prototype={_radius:4.5,pointRadius:function(Xa){return this._radius=Xa,this},polygonStart:function(){this._line=0},polygonEnd:function(){this._line=NaN},lineStart:function(){this._point=0},lineEnd:function(){0===this._line&&this._context.closePath();this._point=NaN},point:function(Xa,Pa){switch(this._point){case 0:this._context.moveTo(Xa,Pa);this._point=1;break;case 1:this._context.lineTo(Xa,Pa);
break;default:this._context.moveTo(Xa+this._radius,Pa),this._context.arc(Xa,Pa,this._radius,0,hf)}},result:r};var Af=new k,Pg,Mg,vg,Jf,Yf,wh={point:r,lineStart:function(){wh.point=Pc},lineEnd:function(){Pg&&Uc(Mg,vg);wh.point=r},polygonStart:function(){Pg=!0},polygonEnd:function(){Pg=null},result:function(){var Xa=+Af;Af.reset();return Xa}};rb.prototype={_radius:4.5,_circle:Jb(4.5),pointRadius:function(Xa){(Xa=+Xa)!==this._radius&&(this._radius=Xa,this._circle=null);return this},polygonStart:function(){this._line=
0},polygonEnd:function(){this._line=NaN},lineStart:function(){this._point=0},lineEnd:function(){0===this._line&&this._string.push("Z");this._point=NaN},point:function(Xa,Pa){switch(this._point){case 0:this._string.push("M",Xa,",",Pa);this._point=1;break;case 1:this._string.push("L",Xa,",",Pa);break;default:null==this._circle&&(this._circle=Jb(this._radius)),this._string.push("M",Xa,",",Pa,this._circle)}},result:function(){if(this._string.length){var Xa=this._string.join("");this._string=[];return Xa}return null}};
nc.prototype={constructor:nc,point:function(Xa,Pa){this.stream.point(Xa,Pa)},sphere:function(){this.stream.sphere()},lineStart:function(){this.stream.lineStart()},lineEnd:function(){this.stream.lineEnd()},polygonStart:function(){this.stream.polygonStart()},polygonEnd:function(){this.stream.polygonEnd()}};var Uh=Bd(30*Be),hi=sc({point:function(Xa,Pa){this.stream.point(Xa*Be,Pa*Be)}}),yi=Vc(function(Xa){return Hd(2/(1+Xa))});yi.invert=Sc(function(Xa){return 2*g(Xa/2)});var zi=Vc(function(Xa){return(Xa=
a(Xa))&&Xa/rd(Xa)});zi.invert=Sc(function(Xa){return Xa});id.invert=function(Xa,Pa){return[Xa,2*nf(Zb(Pa))-Ae]};Td.invert=Td;var Vh=Hd(3)/2;Ke.invert=function(Xa,Pa){for(var Mb=Pa,bc=Mb*Mb,kc=bc*bc*bc,ed=0,nd;12>ed&&!(nd=Mb*(1.340264+-.081106*bc+kc*(8.93E-4+.003796*bc))-Pa,bc=1.340264+3*-.081106*bc+kc*(7*8.93E-4+.034164*bc),Mb-=nd/=bc,bc=Mb*Mb,kc=bc*bc*bc,1E-12>Ie(nd));++ed);return[Vh*Xa*(1.340264+3*-.081106*bc+kc*(7*8.93E-4+.034164*bc))/Bd(Mb),g(rd(Mb)/Vh)]};ve.invert=Sc(nf);zf.invert=function(Xa,
Pa){var Mb=Pa,bc=25;do{var kc=Mb*Mb;var ed=kc*kc;Mb-=ed=(Mb*(1.007226+kc*(.015085+ed*(-.044475+.028874*kc-.005916*ed)))-Pa)/(1.007226+kc*(.045255+ed*(-.311325+.259866*kc-.005916*11*ed)))}while(1E-6<Ie(ed)&&0<--bc);return[Xa/(.8707+(kc=Mb*Mb)*(-.131979+kc*(-.013791+kc*kc*kc*(.003971-.001529*kc)))),Mb]};Ef.invert=Sc(g);qf.invert=Sc(function(Xa){return 2*nf(Xa)});Ff.invert=function(Xa,Pa){return[-Pa,2*nf(Zb(Xa))-Ae]};p.geoAlbers=Cc;p.geoAlbersUsa=function(){function Xa(Ld){var $d=Ld[0];Ld=Ld[1];return Pd=
null,(ed.point($d,Ld),Pd)||(hd.point($d,Ld),Pd)||(pd.point($d,Ld),Pd)}function Pa(){Mb=bc=null;return Xa}var Mb,bc,kc=Cc(),ed,nd=cd().rotate([154,0]).center([-2,58.5]).parallels([55,65]),hd,md=cd().rotate([157,0]).center([-3,19.9]).parallels([8,18]),pd,Pd,xd={point:function(Ld,$d){Pd=[Ld,$d]}};Xa.invert=function(Ld){var $d=kc.scale(),Vd=kc.translate(),Yd=(Ld[0]-Vd[0])/$d;$d=(Ld[1]-Vd[1])/$d;return(.12<=$d&&.234>$d&&-.425<=Yd&&-.214>Yd?nd:.166<=$d&&.234>$d&&-.214<=Yd&&-.115>Yd?md:kc).invert(Ld)};Xa.stream=
function(Ld){return Mb&&bc===Ld?Mb:Mb=dd([kc.stream(bc=Ld),nd.stream(Ld),md.stream(Ld)])};Xa.precision=function(Ld){if(!arguments.length)return kc.precision();kc.precision(Ld);nd.precision(Ld);md.precision(Ld);return Pa()};Xa.scale=function(Ld){if(!arguments.length)return kc.scale();kc.scale(Ld);nd.scale(.35*Ld);md.scale(Ld);return Xa.translate(kc.translate())};Xa.translate=function(Ld){if(!arguments.length)return kc.translate();var $d=kc.scale(),Vd=+Ld[0],Yd=+Ld[1];ed=kc.translate(Ld).clipExtent([[Vd-
.455*$d,Yd-.238*$d],[Vd+.455*$d,Yd+.238*$d]]).stream(xd);hd=nd.translate([Vd-.307*$d,Yd+.201*$d]).clipExtent([[Vd-.425*$d+1E-6,Yd+.12*$d+1E-6],[Vd-.214*$d-1E-6,Yd+.234*$d-1E-6]]).stream(xd);pd=md.translate([Vd-.205*$d,Yd+.212*$d]).clipExtent([[Vd-.214*$d+1E-6,Yd+.166*$d+1E-6],[Vd-.115*$d-1E-6,Yd+.234*$d-1E-6]]).stream(xd);return Pa()};Xa.fitExtent=function(Ld,$d){return Vb(Xa,Ld,$d)};Xa.fitSize=function(Ld,$d){return Vb(Xa,[[0,0],Ld],$d)};Xa.fitWidth=function(Ld,$d){return Wb(Xa,Ld,$d)};Xa.fitHeight=
function(Ld,$d){return yb(Xa,Ld,$d)};return Xa.scale(1070)};p.geoArea=function(Xa){oc.reset();e(Xa,Oc);return 2*oc};p.geoAzimuthalEqualArea=function(){return kd(yi).scale(124.75).clipAngle(179.999)};p.geoAzimuthalEqualAreaRaw=yi;p.geoAzimuthalEquidistant=function(){return kd(zi).scale(79.4188).clipAngle(179.999)};p.geoAzimuthalEquidistantRaw=zi;p.geoBounds=function(Xa){var Pa,Mb,bc;ud=pc=-(wc=rc=Infinity);Ve=[];e(Xa,Oe);if(Pa=Ve.length){Ve.sort(L);Xa=1;var kc=Ve[0];for(Mb=[kc];Xa<Pa;++Xa){var ed=
Ve[Xa];Q(kc,ed[0])||Q(kc,ed[1])?(I(kc[0],ed[1])>I(kc[0],kc[1])&&(kc[1]=ed[1]),I(ed[0],kc[1])>I(kc[0],kc[1])&&(kc[0]=ed[0])):Mb.push(kc=ed)}var nd=-Infinity;Pa=Mb.length-1;Xa=0;for(kc=Mb[Pa];Xa<=Pa;kc=ed,++Xa)ed=Mb[Xa],(bc=I(kc[1],ed[0]))>nd&&(nd=bc,wc=ed[0],pc=kc[1])}Ve=vf=null;return Infinity===wc||Infinity===rc?[[NaN,NaN],[NaN,NaN]]:[[wc,rc],[pc,ud]]};p.geoCentroid=function(Xa){Mf=ng=Sg=Og=Ah=Kh=rh=Yg=sh=ah=bh=0;e(Xa,ug);Xa=sh;var Pa=ah,Mb=bh,bc=Xa*Xa+Pa*Pa+Mb*Mb;return 1E-12>bc&&(Xa=Kh,Pa=rh,Mb=
Yg,1E-6>ng&&(Xa=Sg,Pa=Og,Mb=Ah),bc=Xa*Xa+Pa*Pa+Mb*Mb,1E-12>bc)?[NaN,NaN]:[Zc(Pa,Xa)*Te,g(Mb/Hd(bc))*Te]};p.geoCircle=function(){function Xa(){var hd=Pa.apply(this,arguments),md=Mb.apply(this,arguments)*Be,pd=bc.apply(this,arguments)*Be;kc=[];ed=pa(-hd[0]*Be,-hd[1]*Be,0).invert;sa(nd,md,pd,1);hd={type:"Polygon",coordinates:[kc]};kc=ed=null;return hd}var Pa=ia([0,0]),Mb=ia(90),bc=ia(6),kc,ed,nd={point:function(hd,md){kc.push(hd=ed(hd,md));hd[0]*=Te;hd[1]*=Te}};Xa.center=function(hd){return arguments.length?
(Pa="function"===typeof hd?hd:ia([+hd[0],+hd[1]]),Xa):Pa};Xa.radius=function(hd){return arguments.length?(Mb="function"===typeof hd?hd:ia(+hd),Xa):Mb};Xa.precision=function(hd){return arguments.length?(bc="function"===typeof hd?hd:ia(+hd),Xa):bc};return Xa};p.geoClipAntimeridian=Ig;p.geoClipCircle=vb;p.geoClipExtent=function(){var Xa=0,Pa=0,Mb=960,bc=500,kc,ed,nd;return nd={stream:function(hd){return kc&&ed===hd?kc:kc=zb(Xa,Pa,Mb,bc)(ed=hd)},extent:function(hd){return arguments.length?(Xa=+hd[0][0],
Pa=+hd[0][1],Mb=+hd[1][0],bc=+hd[1][1],kc=ed=null,nd):[[Xa,Pa],[Mb,bc]]}}};p.geoClipRectangle=zb;p.geoConicConformal=function(){return Gd(Sd).scale(109.5).parallels([30,30])};p.geoConicConformalRaw=Sd;p.geoConicEqualArea=cd;p.geoConicEqualAreaRaw=Nc;p.geoConicEquidistant=function(){return Gd(Ue).scale(131.154).center([0,13.9389])};p.geoConicEquidistantRaw=Ue;p.geoContains=function(Xa,Pa){return(Xa&&uh.hasOwnProperty(Xa.type)?uh[Xa.type]:Ta)(Xa,Pa)};p.geoDistance=Ja;p.geoEqualEarth=function(){return kd(Ke).scale(177.158)};
p.geoEqualEarthRaw=Ke;p.geoEquirectangular=function(){return kd(Td).scale(152.63)};p.geoEquirectangularRaw=Td;p.geoGnomonic=function(){return kd(ve).scale(144.049).clipAngle(60)};p.geoGnomonicRaw=ve;p.geoGraticule=Cb;p.geoGraticule10=function(){return Cb()()};p.geoIdentity=function(){function Xa(){Vd=Mb*ed;Yd=Mb*nd;he=se=null;return Pa}function Pa(de){var De=de[0]*Vd;de=de[1]*Yd;if(hd){var yf=de*md-De*pd;De=De*md+de*pd;de=yf}return[De+bc,de+kc]}var Mb=1,bc=0,kc=0,ed=1,nd=1,hd=0,md,pd,Pd=null,xd,Ld,
$d,Vd=1,Yd=1,df=sc({point:function(de,De){de=Pa([de,De]);this.stream.point(de[0],de[1])}}),Se=Qb,he,se;Pa.invert=function(de){var De=de[0]-bc;de=de[1]-kc;if(hd){var yf=de*md+De*pd;De=De*md-de*pd;de=yf}return[De/Vd,de/Yd]};Pa.stream=function(de){return he&&se===de?he:he=df(Se(se=de))};Pa.postclip=function(de){return arguments.length?(Se=de,Pd=xd=Ld=$d=null,Xa()):Se};Pa.clipExtent=function(de){return arguments.length?(Se=null==de?(Pd=xd=Ld=$d=null,Qb):zb(Pd=+de[0][0],xd=+de[0][1],Ld=+de[1][0],$d=+de[1][1]),
Xa()):null==Pd?null:[[Pd,xd],[Ld,$d]]};Pa.scale=function(de){return arguments.length?(Mb=+de,Xa()):Mb};Pa.translate=function(de){return arguments.length?(bc=+de[0],kc=+de[1],Xa()):[bc,kc]};Pa.angle=function(de){return arguments.length?(hd=de%360*Be,pd=rd(hd),md=Bd(hd),Xa()):hd*Te};Pa.reflectX=function(de){return arguments.length?(ed=de?-1:1,Xa()):0>ed};Pa.reflectY=function(de){return arguments.length?(nd=de?-1:1,Xa()):0>nd};Pa.fitExtent=function(de,De){return Vb(Pa,de,De)};Pa.fitSize=function(de,
De){return Vb(Pa,[[0,0],de],De)};Pa.fitWidth=function(de,De){return Wb(Pa,de,De)};Pa.fitHeight=function(de,De){return yb(Pa,de,De)};return Pa};p.geoInterpolate=function(Xa,Pa){var Mb=Xa[0]*Be,bc=Xa[1]*Be;Xa=Pa[0]*Be;Pa=Pa[1]*Be;var kc=Bd(bc),ed=rd(bc),nd=Bd(Pa),hd=rd(Pa),md=kc*Bd(Mb),pd=kc*rd(Mb),Pd=nd*Bd(Xa),xd=nd*rd(Xa),Ld=2*g(Hd(h(Pa-bc)+kc*nd*h(Xa-Mb))),$d=rd(Ld);Xa=Ld?function(Vd){var Yd=rd(Vd*=Ld)/$d,df=rd(Ld-Vd)/$d;Vd=df*md+Yd*Pd;var Se=df*pd+Yd*xd;Yd=df*ed+Yd*hd;return[Zc(Se,Vd)*Te,Zc(Yd,
Hd(Vd*Vd+Se*Se))*Te]}:function(){return[Mb*Te,bc*Te]};Xa.distance=Ld;return Xa};p.geoLength=Aa;p.geoMercator=function(){return Md(id).scale(961/hf)};p.geoMercatorRaw=id;p.geoNaturalEarth1=function(){return kd(zf).scale(175.295)};p.geoNaturalEarth1Raw=zf;p.geoOrthographic=function(){return kd(Ef).scale(249.5).clipAngle(90.000001)};p.geoOrthographicRaw=Ef;p.geoPath=function(Xa,Pa){function Mb(nd){nd&&("function"===typeof bc&&ed.pointRadius(+bc.apply(this,arguments)),e(nd,kc(ed)));return ed.result()}
var bc=4.5,kc,ed;Mb.area=function(nd){e(nd,kc(Oa));return Oa.result()};Mb.measure=function(nd){e(nd,kc(wh));return wh.result()};Mb.bounds=function(nd){e(nd,kc(Xb));return Xb.result()};Mb.centroid=function(nd){e(nd,kc(Xf));return Xf.result()};Mb.projection=function(nd){return arguments.length?(kc=null==nd?(Xa=null,Qb):(Xa=nd).stream,Mb):Xa};Mb.context=function(nd){if(!arguments.length)return Pa;ed=null==nd?(Pa=null,new rb):new Fc(Pa=nd);"function"!==typeof bc&&ed.pointRadius(bc);return Mb};Mb.pointRadius=
function(nd){if(!arguments.length)return bc;bc="function"===typeof nd?nd:(ed.pointRadius(+nd),+nd);return Mb};return Mb.projection(Xa).context(Pa)};p.geoProjection=kd;p.geoProjectionMutator=Cd;p.geoRotation=oa;p.geoStereographic=function(){return kd(qf).scale(250).clipAngle(142)};p.geoStereographicRaw=qf;p.geoStream=e;p.geoTransform=function(Xa){return{stream:sc(Xa)}};p.geoTransverseMercator=function(){var Xa=Md(Ff),Pa=Xa.center,Mb=Xa.rotate;Xa.center=function(bc){return arguments.length?Pa([-bc[1],
bc[0]]):(bc=Pa(),[bc[1],-bc[0]])};Xa.rotate=function(bc){return arguments.length?Mb([bc[0],bc[1],2<bc.length?bc[2]+90:90]):(bc=Mb(),[bc[0],bc[1],bc[2]-90])};return Mb([0,0,90]).scale(159.155)};p.geoTransverseMercatorRaw=Ff;Object.defineProperty(p,"__esModule",{value:!0})})},{"d3-array":162}],170:[function(b,N,G){(function(p,n){"object"===typeof G&&"undefined"!==typeof N?n(G):(p=p||self,n(p.d3=p.d3||{}))})(this,function(p){function n(pa,la){return pa.parent===la.parent?1:2}function k(pa,la){return pa+
la.x}function m(pa,la){return Math.max(pa,la.y)}function a(pa){for(var la;la=pa.children;)pa=la[0];return pa}function g(pa){for(var la;la=pa.children;)pa=la[la.length-1];return pa}function h(pa){var la=0,ka=pa.children,na=ka&&ka.length;if(na)for(;0<=--na;)la+=ka[na].value;else la=1;pa.value=la}function r(pa,la){var ka=new e(pa);pa=+pa.value&&(ka.value=pa.value);var na,oa=[ka],sa,za,Ha,Wa;for(null==la&&(la=l);na=oa.pop();)if(pa&&(na.value=+na.data.value),(za=la(na.data))&&(Wa=za.length))for(na.children=
Array(Wa),Ha=Wa-1;0<=Ha;--Ha)oa.push(sa=na.children[Ha]=new e(za[Ha])),sa.parent=na,sa.depth=na.depth+1;return ka.eachBefore(d)}function l(pa){return pa.children}function c(pa){pa.data=pa.data.data}function d(pa){var la=0;do pa.height=la;while((pa=pa.parent)&&pa.height<++la)}function e(pa){this.data=pa;this.depth=this.height=0;this.parent=null}function f(pa){var la=0;pa=ja.call(pa);for(var ka=pa.length,na,oa;ka;)oa=Math.random()*ka--|0,na=pa[ka],pa[ka]=pa[oa],pa[oa]=na;ka=pa.length;na=[];for(var sa;la<
ka;)if(oa=pa[la],sa&&t(sa,oa))++la;else{a:if(la=na,w(oa,la))la=[oa];else{for(na=0;na<la.length;++na)if(q(oa,la[na])&&w(x(la[na],oa),la)){la=[la[na],oa];break a}for(na=0;na<la.length-1;++na)for(sa=na+1;sa<la.length;++sa)if(q(x(la[na],la[sa]),oa)&&q(x(la[na],oa),la[sa])&&q(x(la[sa],oa),la[na])&&w(z(la[na],la[sa],oa),la)){la=[la[na],la[sa],oa];break a}throw Error();}a:{la=na=la;switch(la.length){case 1:la=la[0];la={x:la.x,y:la.y,r:la.r};break a;case 2:la=x(la[0],la[1]);break a;case 3:la=z(la[0],la[1],
la[2]);break a}la=void 0}sa=la;la=0}return sa}function q(pa,la){var ka=pa.r-la.r,na=la.x-pa.x;pa=la.y-pa.y;return 0>ka||ka*ka<na*na+pa*pa}function t(pa,la){var ka=pa.r-la.r+1E-6,na=la.x-pa.x;pa=la.y-pa.y;return 0<ka&&ka*ka>na*na+pa*pa}function w(pa,la){for(var ka=0;ka<la.length;++ka)if(!t(pa,la[ka]))return!1;return!0}function x(pa,la){var ka=pa.x,na=pa.y;pa=pa.r;var oa=la.x,sa=la.y;la=la.r;var za=oa-ka,Ha=sa-na,Wa=la-pa,Za=Math.sqrt(za*za+Ha*Ha);return{x:(ka+oa+za/Za*Wa)/2,y:(na+sa+Ha/Za*Wa)/2,r:(Za+
pa+la)/2}}function z(pa,la,ka){var na=pa.x,oa=pa.y;pa=pa.r;var sa=la.x,za=la.y,Ha=la.r,Wa=ka.x,Za=ka.y,bb=ka.r;ka=na-sa;la=na-Wa;var sb=oa-za,hb=oa-Za,ub=Ha-pa,pb=bb-pa,Ab=na*na+oa*oa-pa*pa;za=Ab-sa*sa-za*za+Ha*Ha;Za=Ab-Wa*Wa-Za*Za+bb*bb;Wa=la*sb-ka*hb;sa=(sb*Za-hb*za)/(2*Wa)-na;sb=(hb*ub-sb*pb)/Wa;hb=(la*za-ka*Za)/(2*Wa)-oa;ka=(ka*pb-la*ub)/Wa;la=sb*sb+ka*ka-1;ub=2*(pa+sa*sb+hb*ka);pa=sa*sa+hb*hb-pa*pa;pa=-(la?(ub+Math.sqrt(ub*ub-4*la*pa))/(2*la):pa/ub);return{x:na+sa+sb*pa,y:oa+hb+ka*pa,r:pa}}function B(pa,
la,ka){var na=pa.x-la.x,oa=pa.y-la.y,sa=na*na+oa*oa;if(sa){var za=la.r+ka.r;za*=za;var Ha=pa.r+ka.r;Ha*=Ha;if(za>Ha){var Wa=(sa+Ha-za)/(2*sa);za=Math.sqrt(Math.max(0,Ha/sa-Wa*Wa));ka.x=pa.x-Wa*na-za*oa;ka.y=pa.y-Wa*oa+za*na}else Wa=(sa+za-Ha)/(2*sa),za=Math.sqrt(Math.max(0,za/sa-Wa*Wa)),ka.x=la.x+Wa*na-za*oa,ka.y=la.y+Wa*oa+za*na}else ka.x=la.x+ka.r,ka.y=la.y}function A(pa,la){var ka=pa.r+la.r-1E-6,na=la.x-pa.x;pa=la.y-pa.y;return 0<ka&&ka*ka>na*na+pa*pa}function D(pa){var la=pa._,ka=pa.next._,na=
la.r+ka.r;pa=(la.x*ka.r+ka.x*la.r)/na;la=(la.y*ka.r+ka.y*la.r)/na;return pa*pa+la*la}function C(pa){this._=pa;this.previous=this.next=null}function v(pa){if(!(ka=pa.length))return 0;var la,ka;var na=pa[0];na.x=0;na.y=0;if(!(1<ka))return na.r;var oa=pa[1];na.x=-oa.r;oa.x=na.r;oa.y=0;if(!(2<ka))return na.r+oa.r;B(oa,na,la=pa[2]);na=new C(na);oa=new C(oa);la=new C(la);na.next=la.previous=oa;oa.next=na.previous=la;la.next=oa.previous=na;var sa=3;a:for(;sa<ka;++sa){B(na._,oa._,la=pa[sa]);la=new C(la);
var za=oa.next;var Ha=na.previous;var Wa=oa._.r;var Za=na._.r;do if(Wa<=Za){if(A(za._,la._)){oa=za;na.next=oa;oa.previous=na;--sa;continue a}Wa+=za._.r;za=za.next}else{if(A(Ha._,la._)){na=Ha;na.next=oa;oa.previous=na;--sa;continue a}Za+=Ha._.r;Ha=Ha.previous}while(za!==Ha.next);la.previous=na;la.next=oa;na.next=oa.previous=oa=la;for(za=D(na);(la=la.next)!==oa;)(Ha=D(la))<za&&(na=la,za=Ha);oa=na.next}na=[oa._];for(la=oa;(la=la.next)!==oa;)na.push(la._);la=f(na);for(sa=0;sa<ka;++sa)na=pa[sa],na.x-=
la.x,na.y-=la.y;return la.r}function y(pa){if("function"!==typeof pa)throw Error();return pa}function F(){return 0}function J(pa){return function(){return pa}}function K(pa){return Math.sqrt(pa.value)}function M(pa){return function(la){la.children||(la.r=Math.max(0,+pa(la)||0))}}function H(pa,la){return function(ka){if(na=ka.children){var na,oa,sa=na.length,za=pa(ka)*la||0;if(za)for(oa=0;oa<sa;++oa)na[oa].r+=za;var Ha=v(na);if(za)for(oa=0;oa<sa;++oa)na[oa].r-=za;ka.r=Ha+za}}}function O(pa){return function(la){var ka=
la.parent;la.r*=pa;ka&&(la.x=ka.x+pa*la.x,la.y=ka.y+pa*la.y)}}function I(pa){pa.x0=Math.round(pa.x0);pa.y0=Math.round(pa.y0);pa.x1=Math.round(pa.x1);pa.y1=Math.round(pa.y1)}function L(pa,la,ka,na,oa){var sa=pa.children,za=-1,Ha=sa.length;for(na=pa.value&&(na-la)/pa.value;++za<Ha;)pa=sa[za],pa.y0=ka,pa.y1=oa,pa.x0=la,pa.x1=la+=pa.value*na}function Q(pa){return pa.id}function Z(pa){return pa.parentId}function ba(pa,la){return pa.parent===la.parent?1:2}function V(pa){var la=pa.children;return la?la[0]:
pa.t}function S(pa){var la=pa.children;return la?la[la.length-1]:pa.t}function T(pa,la){this._=pa;this.A=this.children=this.parent=null;this.a=this;this.s=this.c=this.m=this.z=0;this.t=null;this.i=la}function fa(pa){pa=new T(pa,0);for(var la,ka=[pa],na,oa,sa;la=ka.pop();)if(oa=la._.children)for(la.children=Array(na=oa.length),sa=na-1;0<=sa;--sa)ka.push(na=la.children[sa]=new T(oa[sa],sa)),na.parent=la;(pa.parent=new T(null,0)).children=[pa];return pa}function W(pa,la,ka,na,oa){var sa=pa.children,
za=-1,Ha=sa.length;for(oa=pa.value&&(oa-ka)/pa.value;++za<Ha;)pa=sa[za],pa.x0=la,pa.x1=na,pa.y0=ka,pa.y1=ka+=pa.value*oa}function aa(pa,la,ka,na,oa,sa){for(var za=[],Ha=la.children,Wa,Za,bb=Wa=0,sb=Ha.length,hb,ub=la.value,pb,Ab,tb,vb,qb,zb;Wa<sb;){la=oa-ka;hb=sa-na;do pb=Ha[bb++].value;while(!pb&&bb<sb);Ab=tb=pb;zb=Math.max(hb/la,la/hb)/(ub*pa);vb=pb*pb*zb;for(qb=Math.max(tb/vb,vb/Ab);bb<sb;++bb){pb+=Za=Ha[bb].value;Za<Ab&&(Ab=Za);Za>tb&&(tb=Za);vb=pb*pb*zb;vb=Math.max(tb/vb,vb/Ab);if(vb>qb){pb-=
Za;break}qb=vb}za.push(Wa={value:pb,dice:la<hb,children:Ha.slice(Wa,bb)});Wa.dice?L(Wa,ka,na,oa,ub?na+=hb*pb/ub:sa):W(Wa,ka,na,ub?ka+=la*pb/ub:oa,sa);ub-=pb;Wa=bb}return za}e.prototype=r.prototype={constructor:e,count:function(){return this.eachAfter(h)},each:function(pa){var la,ka=[this],na;do{var oa=ka.reverse();for(ka=[];la=oa.pop();)if(pa(la),la=la.children){var sa=0;for(na=la.length;sa<na;++sa)ka.push(la[sa])}}while(ka.length);return this},eachAfter:function(pa){for(var la,ka=[this],na=[],oa,
sa;la=ka.pop();)if(na.push(la),la=la.children)for(oa=0,sa=la.length;oa<sa;++oa)ka.push(la[oa]);for(;la=na.pop();)pa(la);return this},eachBefore:function(pa){for(var la,ka=[this],na;la=ka.pop();)if(pa(la),la=la.children)for(na=la.length-1;0<=na;--na)ka.push(la[na]);return this},sum:function(pa){return this.eachAfter(function(la){for(var ka=+pa(la.data)||0,na=la.children,oa=na&&na.length;0<=--oa;)ka+=na[oa].value;la.value=ka})},sort:function(pa){return this.eachBefore(function(la){la.children&&la.children.sort(pa)})},
path:function(pa){var la=this;var ka=la;var na=pa;if(ka!==na){var oa=ka.ancestors(),sa=na.ancestors(),za=null;ka=oa.pop();for(na=sa.pop();ka===na;)za=ka,ka=oa.pop(),na=sa.pop();ka=za}for(na=[la];la!==ka;)la=la.parent,na.push(la);for(la=na.length;pa!==ka;)na.splice(la,0,pa),pa=pa.parent;return na},ancestors:function(){for(var pa=this,la=[pa];pa=pa.parent;)la.push(pa);return la},descendants:function(){var pa=[];this.each(function(la){pa.push(la)});return pa},leaves:function(){var pa=[];this.eachBefore(function(la){la.children||
pa.push(la)});return pa},links:function(){var pa=this,la=[];pa.each(function(ka){ka!==pa&&la.push({source:ka.parent,target:ka})});return la},copy:function(){return r(this).eachBefore(c)}};var ja=Array.prototype.slice,ma={depth:-1},ia={};T.prototype=Object.create(e.prototype);var ra=(1+Math.sqrt(5))/2,wa=function ka(la){function na(oa,sa,za,Ha,Wa){aa(la,oa,sa,za,Ha,Wa)}na.ratio=function(oa){return ka(1<(oa=+oa)?oa:1)};return na}(ra);ra=function na(ka){function oa(sa,za,Ha,Wa,Za){if((bb=sa._squarify)&&
bb.ratio===ka)for(var bb,sb,hb,ub=-1,pb,Ab=bb.length,tb=sa.value;++ub<Ab;){sa=bb[ub];sb=sa.children;hb=sa.value=0;for(pb=sb.length;hb<pb;++hb)sa.value+=sb[hb].value;sa.dice?L(sa,za,Ha,Wa,Ha+=(Za-Ha)*sa.value/tb):W(sa,za,Ha,za+=(Wa-za)*sa.value/tb,Za);tb-=sa.value}else sa._squarify=bb=aa(ka,sa,za,Ha,Wa,Za),bb.ratio=ka}oa.ratio=function(sa){return na(1<(sa=+sa)?sa:1)};return oa}(ra);p.cluster=function(){function ka(Ha){var Wa,Za=0;Ha.eachAfter(function(pb){var Ab=pb.children;if(Ab){var tb=Ab.reduce(k,
0)/Ab.length;pb.x=tb;pb.y=1+Ab.reduce(m,0)}else pb.x=Wa?Za+=na(pb,Wa):0,pb.y=0,Wa=pb});var bb=a(Ha),sb=g(Ha),hb=bb.x-na(bb,sb)/2,ub=sb.x+na(sb,bb)/2;return Ha.eachAfter(za?function(pb){pb.x=(pb.x-Ha.x)*oa;pb.y=(Ha.y-pb.y)*sa}:function(pb){pb.x=(pb.x-hb)/(ub-hb)*oa;pb.y=(1-(Ha.y?pb.y/Ha.y:1))*sa})}var na=n,oa=1,sa=1,za=!1;ka.separation=function(Ha){return arguments.length?(na=Ha,ka):na};ka.size=function(Ha){return arguments.length?(za=!1,oa=+Ha[0],sa=+Ha[1],ka):za?null:[oa,sa]};ka.nodeSize=function(Ha){return arguments.length?
(za=!0,oa=+Ha[0],sa=+Ha[1],ka):za?[oa,sa]:null};return ka};p.hierarchy=r;p.pack=function(){function ka(Ha){Ha.x=oa/2;Ha.y=sa/2;na?Ha.eachBefore(M(na)).eachAfter(H(za,.5)).eachBefore(O(1)):Ha.eachBefore(M(K)).eachAfter(H(F,1)).eachAfter(H(za,Ha.r/Math.min(oa,sa))).eachBefore(O(Math.min(oa,sa)/(2*Ha.r)));return Ha}var na=null,oa=1,sa=1,za=F;ka.radius=function(Ha){return arguments.length?(na=null==Ha?null:y(Ha),ka):na};ka.size=function(Ha){return arguments.length?(oa=+Ha[0],sa=+Ha[1],ka):[oa,sa]};ka.padding=
function(Ha){return arguments.length?(za="function"===typeof Ha?Ha:J(+Ha),ka):za};return ka};p.packEnclose=f;p.packSiblings=function(ka){v(ka);return ka};p.partition=function(){function ka(Wa){var Za=Wa.height+1;Wa.x0=Wa.y0=za;Wa.x1=oa;Wa.y1=sa/Za;Wa.eachBefore(na(sa,Za));Ha&&Wa.eachBefore(I);return Wa}function na(Wa,Za){return function(bb){bb.children&&L(bb,bb.x0,Wa*(bb.depth+1)/Za,bb.x1,Wa*(bb.depth+2)/Za);var sb=bb.x0,hb=bb.y0,ub=bb.x1-za,pb=bb.y1-za;ub<sb&&(sb=ub=(sb+ub)/2);pb<hb&&(hb=pb=(hb+
pb)/2);bb.x0=sb;bb.y0=hb;bb.x1=ub;bb.y1=pb}}var oa=1,sa=1,za=0,Ha=!1;ka.round=function(Wa){return arguments.length?(Ha=!!Wa,ka):Ha};ka.size=function(Wa){return arguments.length?(oa=+Wa[0],sa=+Wa[1],ka):[oa,sa]};ka.padding=function(Wa){return arguments.length?(za=+Wa,ka):za};return ka};p.stratify=function(){function ka(sa){var za,Ha=sa.length,Wa=Array(Ha),Za,bb={};for(za=0;za<Ha;++za){var sb=sa[za];var hb=Wa[za]=new e(sb);null!=(Za=na(sb,za,sa))&&(Za+="")&&(sb="$"+(hb.id=Za),bb[sb]=sb in bb?ia:hb)}for(za=
0;za<Ha;++za)if(hb=Wa[za],Za=oa(sa[za],za,sa),null!=Za&&(Za+="")){sb=bb["$"+Za];if(!sb)throw Error("missing: "+Za);if(sb===ia)throw Error("ambiguous: "+Za);sb.children?sb.children.push(hb):sb.children=[hb];hb.parent=sb}else{if(ub)throw Error("multiple roots");var ub=hb}if(!ub)throw Error("no root");ub.parent=ma;ub.eachBefore(function(pb){pb.depth=pb.parent.depth+1;--Ha}).eachBefore(d);ub.parent=null;if(0<Ha)throw Error("cycle");return ub}var na=Q,oa=Z;ka.id=function(sa){return arguments.length?(na=
y(sa),ka):na};ka.parentId=function(sa){return arguments.length?(oa=y(sa),ka):oa};return ka};p.tree=function(){function ka(bb){var sb=fa(bb);sb.eachAfter(na);sb.parent.m=-sb.z;sb.eachBefore(oa);if(Za)bb.eachBefore(sa);else{var hb=bb,ub=bb,pb=bb;bb.eachBefore(function(qb){qb.x<hb.x&&(hb=qb);qb.x>ub.x&&(ub=qb);qb.depth>pb.depth&&(pb=qb)});sb=hb===ub?1:za(hb,ub)/2;var Ab=sb-hb.x,tb=Ha/(ub.x+sb+Ab),vb=Wa/(pb.depth||1);bb.eachBefore(function(qb){qb.x=(qb.x+Ab)*tb;qb.y=qb.depth*vb})}return bb}function na(bb){var sb=
bb.children,hb=bb.parent.children,ub=bb.i?hb[bb.i-1]:null;if(sb){for(var pb=0,Ab=0,tb=bb.children,vb=tb.length,qb;0<=--vb;)qb=tb[vb],qb.z+=pb,qb.m+=pb,pb+=qb.s+(Ab+=qb.c);sb=(sb[0].z+sb[sb.length-1].z)/2;ub?(bb.z=ub.z+za(bb._,ub._),bb.m=bb.z-sb):bb.z=sb}else ub&&(bb.z=ub.z+za(bb._,ub._));sb=bb.parent;hb=bb.parent.A||hb[0];if(ub){Ab=pb=bb;tb=pb.parent.children[0];vb=pb.m;qb=Ab.m;for(var zb=ub.m,La=tb.m,Ka;ub=S(ub),pb=V(pb),ub&&pb;){tb=V(tb);Ab=S(Ab);Ab.a=bb;Ka=ub.z+zb-pb.z-vb+za(ub._,pb._);if(0<Ka){var ya=
ub.a.parent===bb.parent?ub.a:hb,Aa=bb,Ja=Ka,Ta=Ja/(Aa.i-ya.i);Aa.c-=Ta;Aa.s+=Ja;ya.c+=Ta;Aa.z+=Ja;Aa.m+=Ja;vb+=Ka;qb+=Ka}zb+=ub.m;vb+=pb.m;La+=tb.m;qb+=Ab.m}ub&&!S(Ab)&&(Ab.t=ub,Ab.m+=zb-qb);pb&&!V(tb)&&(tb.t=pb,tb.m+=vb-La,hb=bb)}sb.A=hb}function oa(bb){bb._.x=bb.z+bb.parent.m;bb.m+=bb.parent.m}function sa(bb){bb.x*=Ha;bb.y=bb.depth*Wa}var za=ba,Ha=1,Wa=1,Za=null;ka.separation=function(bb){return arguments.length?(za=bb,ka):za};ka.size=function(bb){return arguments.length?(Za=!1,Ha=+bb[0],Wa=+bb[1],
ka):Za?null:[Ha,Wa]};ka.nodeSize=function(bb){return arguments.length?(Za=!0,Ha=+bb[0],Wa=+bb[1],ka):Za?[Ha,Wa]:null};return ka};p.treemap=function(){function ka(pb){pb.x0=pb.y0=0;pb.x1=za;pb.y1=Ha;pb.eachBefore(na);Wa=[0];sa&&pb.eachBefore(I);return pb}function na(pb){var Ab=Wa[pb.depth],tb=pb.x0+Ab,vb=pb.y0+Ab,qb=pb.x1-Ab,zb=pb.y1-Ab;qb<tb&&(tb=qb=(tb+qb)/2);zb<vb&&(vb=zb=(vb+zb)/2);pb.x0=tb;pb.y0=vb;pb.x1=qb;pb.y1=zb;pb.children&&(Ab=Wa[pb.depth+1]=Za(pb)/2,tb+=ub(pb)-Ab,vb+=bb(pb)-Ab,qb-=sb(pb)-
Ab,zb-=hb(pb)-Ab,qb<tb&&(tb=qb=(tb+qb)/2),zb<vb&&(vb=zb=(vb+zb)/2),oa(pb,tb,vb,qb,zb))}var oa=wa,sa=!1,za=1,Ha=1,Wa=[0],Za=F,bb=F,sb=F,hb=F,ub=F;ka.round=function(pb){return arguments.length?(sa=!!pb,ka):sa};ka.size=function(pb){return arguments.length?(za=+pb[0],Ha=+pb[1],ka):[za,Ha]};ka.tile=function(pb){return arguments.length?(oa=y(pb),ka):oa};ka.padding=function(pb){return arguments.length?ka.paddingInner(pb).paddingOuter(pb):ka.paddingInner()};ka.paddingInner=function(pb){return arguments.length?
(Za="function"===typeof pb?pb:J(+pb),ka):Za};ka.paddingOuter=function(pb){return arguments.length?ka.paddingTop(pb).paddingRight(pb).paddingBottom(pb).paddingLeft(pb):ka.paddingTop()};ka.paddingTop=function(pb){return arguments.length?(bb="function"===typeof pb?pb:J(+pb),ka):bb};ka.paddingRight=function(pb){return arguments.length?(sb="function"===typeof pb?pb:J(+pb),ka):sb};ka.paddingBottom=function(pb){return arguments.length?(hb="function"===typeof pb?pb:J(+pb),ka):hb};ka.paddingLeft=function(pb){return arguments.length?
(ub="function"===typeof pb?pb:J(+pb),ka):ub};return ka};p.treemapBinary=function(ka,na,oa,sa,za){function Ha(ub,pb,Ab,tb,vb,qb,zb){if(ub>=pb-1)ub=Wa[ub],ub.x0=tb,ub.y0=vb,ub.x1=qb,ub.y1=zb;else{for(var La=hb[ub],Ka=Ab/2+La,ya=ub+1,Aa=pb-1;ya<Aa;){var Ja=ya+Aa>>>1;hb[Ja]<Ka?ya=Ja+1:Aa=Ja}Ka-hb[ya-1]<hb[ya]-Ka&&ub+1<ya&&--ya;La=hb[ya]-La;Ka=Ab-La;qb-tb>zb-vb?(Ab=(tb*Ka+qb*La)/Ab,Ha(ub,ya,La,tb,vb,Ab,zb),Ha(ya,pb,Ka,Ab,vb,qb,zb)):(Ab=(vb*Ka+zb*La)/Ab,Ha(ub,ya,La,tb,vb,qb,Ab),Ha(ya,pb,Ka,tb,Ab,qb,zb))}}
var Wa=ka.children,Za,bb=Wa.length,sb,hb=Array(bb+1);for(hb[0]=sb=Za=0;Za<bb;++Za)hb[Za+1]=sb+=Wa[Za].value;Ha(0,bb,ka.value,na,oa,sa,za)};p.treemapDice=L;p.treemapResquarify=ra;p.treemapSlice=W;p.treemapSliceDice=function(ka,na,oa,sa,za){(ka.depth&1?W:L)(ka,na,oa,sa,za)};p.treemapSquarify=wa;Object.defineProperty(p,"__esModule",{value:!0})})},{}],171:[function(b,N,G){(function(p,n){"object"===typeof G&&"undefined"!==typeof N?n(G,b("d3-color")):(p=p||self,n(p.d3=p.d3||{},p.d3))})(this,function(p,
n){function k(ka,na,oa,sa,za){var Ha=ka*ka,Wa=Ha*ka;return((1-3*ka+3*Ha-Wa)*na+(4-6*Ha+3*Wa)*oa+(1+3*ka+3*Ha-3*Wa)*sa+Wa*za)/6}function m(ka){var na=ka.length-1;return function(oa){var sa=0>=oa?oa=0:1<=oa?(oa=1,na-1):Math.floor(oa*na),za=ka[sa],Ha=ka[sa+1];return k((oa-sa/na)*na,0<sa?ka[sa-1]:2*za-Ha,za,Ha,sa<na-1?ka[sa+2]:2*Ha-za)}}function a(ka){var na=ka.length;return function(oa){var sa=Math.floor((0>(oa%=1)?++oa:oa)*na);return k((oa-sa/na)*na,ka[(sa+na-1)%na],ka[sa%na],ka[(sa+1)%na],ka[(sa+2)%
na])}}function g(ka){return function(){return ka}}function h(ka,na){return function(oa){return ka+oa*na}}function r(ka,na,oa){return ka=Math.pow(ka,oa),na=Math.pow(na,oa)-ka,oa=1/oa,function(sa){return Math.pow(ka+sa*na,oa)}}function l(ka,na){var oa=na-ka;return oa?h(ka,180<oa||-180>oa?oa-360*Math.round(oa/360):oa):g(isNaN(ka)?na:ka)}function c(ka){return 1===(ka=+ka)?d:function(na,oa){return oa-na?r(na,oa,ka):g(isNaN(na)?oa:na)}}function d(ka,na){var oa=na-ka;return oa?h(ka,oa):g(isNaN(ka)?na:ka)}
function e(ka){return function(na){var oa=na.length,sa=Array(oa),za=Array(oa),Ha=Array(oa),Wa;for(Wa=0;Wa<oa;++Wa){var Za=n.rgb(na[Wa]);sa[Wa]=Za.r||0;za[Wa]=Za.g||0;Ha[Wa]=Za.b||0}sa=ka(sa);za=ka(za);Ha=ka(Ha);Za.opacity=1;return function(bb){Za.r=sa(bb);Za.g=za(bb);Za.b=Ha(bb);return Za+""}}}function f(ka,na){na||(na=[]);var oa=ka?Math.min(na.length,ka.length):0,sa=na.slice(),za;return function(Ha){for(za=0;za<oa;++za)sa[za]=ka[za]*(1-Ha)+na[za]*Ha;return sa}}function q(ka){return ArrayBuffer.isView(ka)&&
!(ka instanceof DataView)}function t(ka,na){var oa=na?na.length:0,sa=ka?Math.min(oa,ka.length):0,za=Array(sa),Ha=Array(oa),Wa;for(Wa=0;Wa<sa;++Wa)za[Wa]=C(ka[Wa],na[Wa]);for(;Wa<oa;++Wa)Ha[Wa]=na[Wa];return function(Za){for(Wa=0;Wa<sa;++Wa)Ha[Wa]=za[Wa](Za);return Ha}}function w(ka,na){var oa=new Date;return ka=+ka,na=+na,function(sa){return oa.setTime(ka*(1-sa)+na*sa),oa}}function x(ka,na){return ka=+ka,na=+na,function(oa){return ka*(1-oa)+na*oa}}function z(ka,na){var oa={},sa={},za;if(null===ka||
"object"!==typeof ka)ka={};if(null===na||"object"!==typeof na)na={};for(za in na)za in ka?oa[za]=C(ka[za],na[za]):sa[za]=na[za];return function(Ha){for(za in oa)sa[za]=oa[za](Ha);return sa}}function B(ka){return function(){return ka}}function A(ka){return function(na){return ka(na)+""}}function D(ka,na){var oa=L.lastIndex=Q.lastIndex=0,sa,za,Ha,Wa=-1,Za=[],bb=[];ka+="";for(na+="";(sa=L.exec(ka))&&(za=Q.exec(na));)(Ha=za.index)>oa&&(Ha=na.slice(oa,Ha),Za[Wa]?Za[Wa]+=Ha:Za[++Wa]=Ha),(sa=sa[0])===(za=
za[0])?Za[Wa]?Za[Wa]+=za:Za[++Wa]=za:(Za[++Wa]=null,bb.push({i:Wa,x:x(sa,za)})),oa=Q.lastIndex;oa<na.length&&(Ha=na.slice(oa),Za[Wa]?Za[Wa]+=Ha:Za[++Wa]=Ha);return 2>Za.length?bb[0]?A(bb[0].x):B(na):(na=bb.length,function(sb){for(var hb=0,ub;hb<na;++hb)Za[(ub=bb[hb]).i]=ub.x(sb);return Za.join("")})}function C(ka,na){var oa=typeof na,sa;return null==na||"boolean"===oa?g(na):("number"===oa?x:"string"===oa?(sa=n.color(na))?(na=sa,H):D:na instanceof n.color?H:na instanceof Date?w:q(na)?f:Array.isArray(na)?
t:"function"!==typeof na.valueOf&&"function"!==typeof na.toString||isNaN(na)?z:x)(ka,na)}function v(ka,na,oa,sa,za,Ha){var Wa,Za,bb;if(Wa=Math.sqrt(ka*ka+na*na))ka/=Wa,na/=Wa;if(bb=ka*oa+na*sa)oa-=ka*bb,sa-=na*bb;if(Za=Math.sqrt(oa*oa+sa*sa))oa/=Za,sa/=Za,bb/=Za;ka*sa<na*oa&&(ka=-ka,na=-na,bb=-bb,Wa=-Wa);return{translateX:za,translateY:Ha,rotate:Math.atan2(na,ka)*Z,skewX:Math.atan(bb)*Z,scaleX:Wa,scaleY:Za}}function y(ka,na,oa,sa){function za(sb){return sb.length?sb.pop()+" ":""}function Ha(sb,hb,
ub,pb,Ab,tb){sb!==ub||hb!==pb?(Ab=Ab.push("translate(",null,na,null,oa),tb.push({i:Ab-4,x:x(sb,ub)},{i:Ab-2,x:x(hb,pb)})):(ub||pb)&&Ab.push("translate("+ub+na+pb+oa)}function Wa(sb,hb,ub,pb){sb!==hb?(180<sb-hb?hb+=360:180<hb-sb&&(sb+=360),pb.push({i:ub.push(za(ub)+"rotate(",null,sa)-2,x:x(sb,hb)})):hb&&ub.push(za(ub)+"rotate("+hb+sa)}function Za(sb,hb,ub,pb){sb!==hb?pb.push({i:ub.push(za(ub)+"skewX(",null,sa)-2,x:x(sb,hb)}):hb&&ub.push(za(ub)+"skewX("+hb+sa)}function bb(sb,hb,ub,pb,Ab,tb){sb!==ub||
hb!==pb?(Ab=Ab.push(za(Ab)+"scale(",null,",",null,")"),tb.push({i:Ab-4,x:x(sb,ub)},{i:Ab-2,x:x(hb,pb)})):1===ub&&1===pb||Ab.push(za(Ab)+"scale("+ub+","+pb+")")}return function(sb,hb){var ub=[],pb=[];sb=ka(sb);hb=ka(hb);Ha(sb.translateX,sb.translateY,hb.translateX,hb.translateY,ub,pb);Wa(sb.rotate,hb.rotate,ub,pb);Za(sb.skewX,hb.skewX,ub,pb);bb(sb.scaleX,sb.scaleY,hb.scaleX,hb.scaleY,ub,pb);sb=hb=null;return function(Ab){for(var tb=-1,vb=pb.length,qb;++tb<vb;)ub[(qb=pb[tb]).i]=qb.x(Ab);return ub.join("")}}}
function F(ka){return((ka=Math.exp(ka))+1/ka)/2}function J(ka){return function(na,oa){var sa=ka((na=n.hsl(na)).h,(oa=n.hsl(oa)).h),za=d(na.s,oa.s),Ha=d(na.l,oa.l),Wa=d(na.opacity,oa.opacity);return function(Za){na.h=sa(Za);na.s=za(Za);na.l=Ha(Za);na.opacity=Wa(Za);return na+""}}}function K(ka){return function(na,oa){var sa=ka((na=n.hcl(na)).h,(oa=n.hcl(oa)).h),za=d(na.c,oa.c),Ha=d(na.l,oa.l),Wa=d(na.opacity,oa.opacity);return function(Za){na.h=sa(Za);na.c=za(Za);na.l=Ha(Za);na.opacity=Wa(Za);return na+
""}}}function M(ka){return function sa(oa){function za(Ha,Wa){var Za=ka((Ha=n.cubehelix(Ha)).h,(Wa=n.cubehelix(Wa)).h),bb=d(Ha.s,Wa.s),sb=d(Ha.l,Wa.l),hb=d(Ha.opacity,Wa.opacity);return function(ub){Ha.h=Za(ub);Ha.s=bb(ub);Ha.l=sb(Math.pow(ub,oa));Ha.opacity=hb(ub);return Ha+""}}oa=+oa;za.gamma=sa;return za}(1)}var H=function oa(na){function sa(Ha,Wa){var Za=za((Ha=n.rgb(Ha)).r,(Wa=n.rgb(Wa)).r),bb=za(Ha.g,Wa.g),sb=za(Ha.b,Wa.b),hb=d(Ha.opacity,Wa.opacity);return function(ub){Ha.r=Za(ub);Ha.g=bb(ub);
Ha.b=sb(ub);Ha.opacity=hb(ub);return Ha+""}}var za=c(na);sa.gamma=oa;return sa}(1),O=e(m),I=e(a),L=/[-+]?(?:\d+\.?\d*|\.?\d+)(?:[eE][-+]?\d+)?/g,Q=new RegExp(L.source,"g"),Z=180/Math.PI,ba={translateX:0,translateY:0,rotate:0,skewX:0,scaleX:1,scaleY:1},V,S,T,fa,W=y(function(na){if("none"===na)return ba;V||(V=document.createElement("DIV"),S=document.documentElement,T=document.defaultView);V.style.transform=na;na=T.getComputedStyle(S.appendChild(V),null).getPropertyValue("transform");S.removeChild(V);
na=na.slice(7,-1).split(",");return v(+na[0],+na[1],+na[2],+na[3],+na[4],+na[5])},"px, ","px)","deg)"),aa=y(function(na){if(null==na)return ba;fa||(fa=document.createElementNS("http://www.w3.org/2000/svg","g"));fa.setAttribute("transform",na);if(!(na=fa.transform.baseVal.consolidate()))return ba;na=na.matrix;return v(na.a,na.b,na.c,na.d,na.e,na.f)},", ",")",")"),ja=Math.SQRT2,ma=J(l),ia=J(d),ra=K(l),wa=K(d),pa=M(l),la=M(d);p.interpolate=C;p.interpolateArray=function(na,oa){return(q(oa)?f:t)(na,oa)};
p.interpolateBasis=m;p.interpolateBasisClosed=a;p.interpolateCubehelix=pa;p.interpolateCubehelixLong=la;p.interpolateDate=w;p.interpolateDiscrete=function(na){var oa=na.length;return function(sa){return na[Math.max(0,Math.min(oa-1,Math.floor(sa*oa)))]}};p.interpolateHcl=ra;p.interpolateHclLong=wa;p.interpolateHsl=ma;p.interpolateHslLong=ia;p.interpolateHue=function(na,oa){var sa=l(+na,+oa);return function(za){za=sa(za);return za-360*Math.floor(za/360)}};p.interpolateLab=function(na,oa){var sa=d((na=
n.lab(na)).l,(oa=n.lab(oa)).l),za=d(na.a,oa.a),Ha=d(na.b,oa.b),Wa=d(na.opacity,oa.opacity);return function(Za){na.l=sa(Za);na.a=za(Za);na.b=Ha(Za);na.opacity=Wa(Za);return na+""}};p.interpolateNumber=x;p.interpolateNumberArray=f;p.interpolateObject=z;p.interpolateRgb=H;p.interpolateRgbBasis=O;p.interpolateRgbBasisClosed=I;p.interpolateRound=function(na,oa){return na=+na,oa=+oa,function(sa){return Math.round(na*(1-sa)+oa*sa)}};p.interpolateString=D;p.interpolateTransformCss=W;p.interpolateTransformSvg=
aa;p.interpolateZoom=function(na,oa){var sa=na[0],za=na[1],Ha=na[2];na=oa[2];var Wa=oa[0]-sa,Za=oa[1]-za,bb=Wa*Wa+Za*Za;if(1E-12>bb){var sb=Math.log(na/Ha)/ja;na=function(pb){return[sa+pb*Wa,za+pb*Za,Ha*Math.exp(ja*pb*sb)]}}else{var hb=Math.sqrt(bb);oa=(na*na-Ha*Ha+4*bb)/(4*Ha*hb);na=(na*na-Ha*Ha-4*bb)/(4*na*hb);var ub=Math.log(Math.sqrt(oa*oa+1)-oa);sb=(Math.log(Math.sqrt(na*na+1)-na)-ub)/ja;na=function(pb){pb*=sb;var Ab=F(ub),tb=ja*pb+ub;var vb=((tb=Math.exp(2*tb))-1)/(tb+1);var qb=ub;tb=((qb=Math.exp(qb))-
1/qb)/2;vb=Ha/(2*hb)*(Ab*vb-tb);return[sa+vb*Wa,za+vb*Za,Ha*Ab/F(ja*pb+ub)]}}na.duration=1E3*sb;return na};p.piecewise=function(na,oa){for(var sa=0,za=oa.length-1,Ha=oa[0],Wa=Array(0>za?0:za);sa<za;)Wa[sa]=na(Ha,Ha=oa[++sa]);return function(Za){var bb=Math.max(0,Math.min(za-1,Math.floor(Za*=za)));return Wa[bb](Za-bb)}};p.quantize=function(na,oa){for(var sa=Array(oa),za=0;za<oa;++za)sa[za]=na(za/(oa-1));return sa};Object.defineProperty(p,"__esModule",{value:!0})})},{"d3-color":164}],172:[function(b,
N,G){(function(p,n){"object"===typeof G&&"undefined"!==typeof N?n(G):(p=p||self,n(p.d3=p.d3||{}))})(this,function(p){function n(){this._x0=this._y0=this._x1=this._y1=null;this._=""}function k(){return new n}var m=Math.PI,a=2*m,g=a-1E-6;n.prototype=k.prototype={constructor:n,moveTo:function(h,r){this._+="M"+(this._x0=this._x1=+h)+","+(this._y0=this._y1=+r)},closePath:function(){null!==this._x1&&(this._x1=this._x0,this._y1=this._y0,this._+="Z")},lineTo:function(h,r){this._+="L"+(this._x1=+h)+","+(this._y1=
+r)},quadraticCurveTo:function(h,r,l,c){this._+="Q"+ +h+","+ +r+","+(this._x1=+l)+","+(this._y1=+c)},bezierCurveTo:function(h,r,l,c,d,e){this._+="C"+ +h+","+ +r+","+ +l+","+ +c+","+(this._x1=+d)+","+(this._y1=+e)},arcTo:function(h,r,l,c,d){h=+h;r=+r;l=+l;c=+c;d=+d;var e=this._x1,f=this._y1,q=l-h,t=c-r,w=e-h,x=f-r,z=w*w+x*x;if(0>d)throw Error("negative radius: "+d);if(null===this._x1)this._+="M"+(this._x1=h)+","+(this._y1=r);else if(1E-6<z)if(1E-6<Math.abs(x*q-t*w)&&d){l-=e;c-=f;var B=q*q+t*t;f=Math.sqrt(B);
e=Math.sqrt(z);z=d*Math.tan((m-Math.acos((B+z-(l*l+c*c))/(2*f*e)))/2);e=z/e;z/=f;1E-6<Math.abs(e-1)&&(this._+="L"+(h+e*w)+","+(r+e*x));this._+="A"+d+","+d+",0,0,"+ +(x*l>w*c)+","+(this._x1=h+z*q)+","+(this._y1=r+z*t)}else this._+="L"+(this._x1=h)+","+(this._y1=r)},arc:function(h,r,l,c,d,e){h=+h;r=+r;l=+l;e=!!e;var f=l*Math.cos(c),q=l*Math.sin(c),t=h+f,w=r+q,x=1^e;c=e?c-d:d-c;if(0>l)throw Error("negative radius: "+l);if(null===this._x1)this._+="M"+t+","+w;else if(1E-6<Math.abs(this._x1-t)||1E-6<Math.abs(this._y1-
w))this._+="L"+t+","+w;l&&(0>c&&(c=c%a+a),c>g?this._+="A"+l+","+l+",0,1,"+x+","+(h-f)+","+(r-q)+"A"+l+","+l+",0,1,"+x+","+(this._x1=t)+","+(this._y1=w):1E-6<c&&(this._+="A"+l+","+l+",0,"+ +(c>=m)+","+x+","+(this._x1=h+l*Math.cos(d))+","+(this._y1=r+l*Math.sin(d))))},rect:function(h,r,l,c){this._+="M"+(this._x0=this._x1=+h)+","+(this._y0=this._y1=+r)+"h"+ +l+"v"+ +c+"h"+-l+"Z"},toString:function(){return this._}};p.path=k;Object.defineProperty(p,"__esModule",{value:!0})})},{}],173:[function(b,N,G){(function(p,
n){"object"===typeof G&&"undefined"!==typeof N?n(G):(p=p||self,n(p.d3=p.d3||{}))})(this,function(p){function n(c,d,e,f){if(isNaN(d)||isNaN(e))return c;var q,t=c._root;f={data:f};var w=c._x0,x=c._y0,z=c._x1,B=c._y1,A,D,C,v;if(!t)return c._root=f,c;for(;t.length;)if((C=d>=(A=(w+z)/2))?w=A:z=A,(v=e>=(D=(x+B)/2))?x=D:B=D,q=t,!(t=t[C|=v<<1]))return q[C]=f,c;var y=+c._x.call(null,t.data);var F=+c._y.call(null,t.data);if(d===y&&e===F)return f.next=t,q?q[C]=f:c._root=f,c;do q=q?q[C]=Array(4):c._root=Array(4),
(C=d>=(A=(w+z)/2))?w=A:z=A,(v=e>=(D=(x+B)/2))?x=D:B=D;while((C|=v<<1)===(v=(F>=D)<<1|y>=A));return q[v]=t,q[C]=f,c}function k(c,d,e,f,q){this.node=c;this.x0=d;this.y0=e;this.x1=f;this.y1=q}function m(c){return c[0]}function a(c){return c[1]}function g(c,d,e){d=new h(null==d?m:d,null==e?a:e,NaN,NaN,NaN,NaN);return null==c?d:d.addAll(c)}function h(c,d,e,f,q,t){this._x=c;this._y=d;this._x0=e;this._y0=f;this._x1=q;this._y1=t;this._root=void 0}function r(c){for(var d={data:c.data},e=d;c=c.next;)e=e.next=
{data:c.data};return d}var l=g.prototype=h.prototype;l.copy=function(){var c=new h(this._x,this._y,this._x0,this._y0,this._x1,this._y1),d=this._root,e,f;if(!d)return c;if(!d.length)return c._root=r(d),c;for(e=[{source:d,target:c._root=Array(4)}];d=e.pop();)for(var q=0;4>q;++q)if(f=d.source[q])f.length?e.push({source:f,target:d.target[q]=Array(4)}):d.target[q]=r(f);return c};l.add=function(c){var d=+this._x.call(null,c),e=+this._y.call(null,c);return n(this.cover(d,e),d,e,c)};l.addAll=function(c){var d,
e,f=c.length,q,t,w=Array(f),x=Array(f),z=Infinity,B=Infinity,A=-Infinity,D=-Infinity;for(e=0;e<f;++e)isNaN(q=+this._x.call(null,d=c[e]))||isNaN(t=+this._y.call(null,d))||(w[e]=q,x[e]=t,q<z&&(z=q),q>A&&(A=q),t<B&&(B=t),t>D&&(D=t));if(z>A||B>D)return this;this.cover(z,B).cover(A,D);for(e=0;e<f;++e)n(this,w[e],x[e],c[e]);return this};l.cover=function(c,d){if(isNaN(c=+c)||isNaN(d=+d))return this;var e=this._x0,f=this._y0,q=this._x1,t=this._y1;if(isNaN(e))q=(e=Math.floor(c))+1,t=(f=Math.floor(d))+1;else{for(var w=
q-e,x=this._root,z,B;e>c||c>=q||f>d||d>=t;)switch(B=(d<f)<<1|c<e,z=Array(4),z[B]=x,x=z,w*=2,B){case 0:q=e+w;t=f+w;break;case 1:e=q-w;t=f+w;break;case 2:q=e+w;f=t-w;break;case 3:e=q-w,f=t-w}this._root&&this._root.length&&(this._root=x)}this._x0=e;this._y0=f;this._x1=q;this._y1=t;return this};l.data=function(){var c=[];this.visit(function(d){if(!d.length){do c.push(d.data);while(d=d.next)}});return c};l.extent=function(c){return arguments.length?this.cover(+c[0][0],+c[0][1]).cover(+c[1][0],+c[1][1]):
isNaN(this._x0)?void 0:[[this._x0,this._y0],[this._x1,this._y1]]};l.find=function(c,d,e){var f=this._x0,q=this._y0,t,w,x,z,B=this._x1,A=this._y1,D=[],C=this._root,v;C&&D.push(new k(C,f,q,B,A));null==e?e=Infinity:(f=c-e,q=d-e,B=c+e,A=d+e,e*=e);for(;v=D.pop();)if(!(!(C=v.node)||(t=v.x0)>B||(w=v.y0)>A||(x=v.x1)<f||(z=v.y1)<q))if(C.length){v=(t+x)/2;var y=(w+z)/2;D.push(new k(C[3],v,y,x,z),new k(C[2],t,y,v,z),new k(C[1],v,w,x,y),new k(C[0],t,w,v,y));if(C=(d>=y)<<1|c>=v)v=D[D.length-1],D[D.length-1]=D[D.length-
1-C],D[D.length-1-C]=v}else if(v=c-+this._x.call(null,C.data),y=d-+this._y.call(null,C.data),v=v*v+y*y,v<e){var F=Math.sqrt(e=v);f=c-F;q=d-F;B=c+F;A=d+F;F=C.data}return F};l.remove=function(c){if(isNaN(z=+this._x.call(null,c))||isNaN(B=+this._y.call(null,c)))return this;var d,e=this._root,f,q=this._x0,t=this._y0,w=this._x1,x=this._y1,z,B,A,D,C,v;if(!e)return this;if(e.length)for(;;){(C=z>=(A=(q+w)/2))?q=A:w=A;(v=B>=(D=(t+x)/2))?t=D:x=D;if(!(d=e,e=e[C|=v<<1]))return this;if(!e.length)break;if(d[C+
1&3]||d[C+2&3]||d[C+3&3]){var y=d;var F=C}}for(;e.data!==c;)if(!(f=e,e=e.next))return this;(c=e.next)&&delete e.next;if(f)return c?f.next=c:delete f.next,this;if(!d)return this._root=c,this;c?d[C]=c:delete d[C];(e=d[0]||d[1]||d[2]||d[3])&&e===(d[3]||d[2]||d[1]||d[0])&&!e.length&&(y?y[F]=e:this._root=e);return this};l.removeAll=function(c){for(var d=0,e=c.length;d<e;++d)this.remove(c[d]);return this};l.root=function(){return this._root};l.size=function(){var c=0;this.visit(function(d){if(!d.length){do++c;
while(d=d.next)}});return c};l.visit=function(c){var d=[],e,f=this._root,q,t,w,x;for(f&&d.push(new k(f,this._x0,this._y0,this._x1,this._y1));e=d.pop();)if(!c(f=e.node,t=e.x0,w=e.y0,x=e.x1,e=e.y1)&&f.length){var z=(t+x)/2,B=(w+e)/2;(q=f[3])&&d.push(new k(q,z,B,x,e));(q=f[2])&&d.push(new k(q,t,B,z,e));(q=f[1])&&d.push(new k(q,z,w,x,B));(q=f[0])&&d.push(new k(q,t,w,z,B))}return this};l.visitAfter=function(c){var d=[],e=[],f;for(this._root&&d.push(new k(this._root,this._x0,this._y0,this._x1,this._y1));f=
d.pop();){var q=f.node;if(q.length){var t,w=f.x0,x=f.y0,z=f.x1,B=f.y1,A=(w+z)/2,D=(x+B)/2;(t=q[0])&&d.push(new k(t,w,x,A,D));(t=q[1])&&d.push(new k(t,A,x,z,D));(t=q[2])&&d.push(new k(t,w,D,A,B));(t=q[3])&&d.push(new k(t,A,D,z,B))}e.push(f)}for(;f=e.pop();)c(f.node,f.x0,f.y0,f.x1,f.y1);return this};l.x=function(c){return arguments.length?(this._x=c,this):this._x};l.y=function(c){return arguments.length?(this._y=c,this):this._y};p.quadtree=g;Object.defineProperty(p,"__esModule",{value:!0})})},{}],174:[function(b,
N,G){(function(p,n){"object"===typeof G&&"undefined"!==typeof N?n(G,b("d3-path")):(p=p||self,n(p.d3=p.d3||{},p.d3))})(this,function(p,n){function k(rb){return function(){return rb}}function m(rb){return 1<=rb?Aa:-1>=rb?-Aa:Math.asin(rb)}function a(rb){return rb.innerRadius}function g(rb){return rb.outerRadius}function h(rb){return rb.startAngle}function r(rb){return rb.endAngle}function l(rb){return rb&&rb.padAngle}function c(rb,Jb,sc,nc,vc,Vb,Wb){var yb=rb-sc,ac=Jb-nc;Wb=(Wb?Vb:-Vb)/Ka(yb*yb+ac*
ac);ac*=Wb;yb*=-Wb;var Ub=rb+ac,lc=Jb+yb,tc=sc+ac,Rc=nc+yb;sc=(Ub+tc)/2;nc=(lc+Rc)/2;Jb=tc-Ub;rb=Rc-lc;Wb=Jb*Jb+rb*rb;Vb=vc-Vb;Rc=Ub*Rc-tc*lc;var kd=(0>rb?-1:1)*Ka(qb(0,Vb*Vb*Wb-Rc*Rc));Ub=(Rc*rb-Jb*kd)/Wb;lc=(-Rc*Jb-rb*kd)/Wb;tc=(Rc*rb+Jb*kd)/Wb;Jb=(-Rc*Jb+rb*kd)/Wb;rb=Ub-sc;Wb=lc-nc;sc=tc-sc;nc=Jb-nc;rb*rb+Wb*Wb>sc*sc+nc*nc&&(Ub=tc,lc=Jb);return{cx:Ub,cy:lc,x01:-ac,y01:-yb,x11:Ub*(vc/Vb-1),y11:lc*(vc/Vb-1)}}function d(rb){this._context=rb}function e(rb){return new d(rb)}function f(rb){return rb[0]}
function q(rb){return rb[1]}function t(){function rb(yb){var ac,Ub=yb.length,lc,tc=!1,Rc;null==vc&&(Wb=Vb(Rc=n.path()));for(ac=0;ac<=Ub;++ac)!(ac<Ub&&nc(lc=yb[ac],ac,yb))===tc&&((tc=!tc)?Wb.lineStart():Wb.lineEnd()),tc&&Wb.point(+Jb(lc,ac,yb),+sc(lc,ac,yb));if(Rc)return Wb=null,Rc+""||null}var Jb=f,sc=q,nc=k(!0),vc=null,Vb=e,Wb=null;rb.x=function(yb){return arguments.length?(Jb="function"===typeof yb?yb:k(+yb),rb):Jb};rb.y=function(yb){return arguments.length?(sc="function"===typeof yb?yb:k(+yb),
rb):sc};rb.defined=function(yb){return arguments.length?(nc="function"===typeof yb?yb:k(!!yb),rb):nc};rb.curve=function(yb){return arguments.length?(Vb=yb,null!=vc&&(Wb=Vb(vc)),rb):Vb};rb.context=function(yb){return arguments.length?(null==yb?vc=Wb=null:Wb=Vb(vc=yb),rb):vc};return rb}function w(){function rb(lc){var tc,Rc,kd=lc.length,Cd,Gd=!1,Ad,Nc=Array(kd),cd=Array(kd);null==yb&&(Ub=ac(Ad=n.path()));for(tc=0;tc<=kd;++tc){if(!(tc<kd&&Wb(Cd=lc[tc],tc,lc))===Gd)if(Gd=!Gd){var Cc=tc;Ub.areaStart();
Ub.lineStart()}else{Ub.lineEnd();Ub.lineStart();for(Rc=tc-1;Rc>=Cc;--Rc)Ub.point(Nc[Rc],cd[Rc]);Ub.lineEnd();Ub.areaEnd()}Gd&&(Nc[tc]=+sc(Cd,tc,lc),cd[tc]=+vc(Cd,tc,lc),Ub.point(nc?+nc(Cd,tc,lc):Nc[tc],Vb?+Vb(Cd,tc,lc):cd[tc]))}if(Ad)return Ub=null,Ad+""||null}function Jb(){return t().defined(Wb).curve(ac).context(yb)}var sc=f,nc=null,vc=k(0),Vb=q,Wb=k(!0),yb=null,ac=e,Ub=null;rb.x=function(lc){return arguments.length?(sc="function"===typeof lc?lc:k(+lc),nc=null,rb):sc};rb.x0=function(lc){return arguments.length?
(sc="function"===typeof lc?lc:k(+lc),rb):sc};rb.x1=function(lc){return arguments.length?(nc=null==lc?null:"function"===typeof lc?lc:k(+lc),rb):nc};rb.y=function(lc){return arguments.length?(vc="function"===typeof lc?lc:k(+lc),Vb=null,rb):vc};rb.y0=function(lc){return arguments.length?(vc="function"===typeof lc?lc:k(+lc),rb):vc};rb.y1=function(lc){return arguments.length?(Vb=null==lc?null:"function"===typeof lc?lc:k(+lc),rb):Vb};rb.lineX0=rb.lineY0=function(){return Jb().x(sc).y(vc)};rb.lineY1=function(){return Jb().x(sc).y(Vb)};
rb.lineX1=function(){return Jb().x(nc).y(vc)};rb.defined=function(lc){return arguments.length?(Wb="function"===typeof lc?lc:k(!!lc),rb):Wb};rb.curve=function(lc){return arguments.length?(ac=lc,null!=yb&&(Ub=ac(yb)),rb):ac};rb.context=function(lc){return arguments.length?(null==lc?yb=Ub=null:Ub=ac(yb=lc),rb):yb};return rb}function x(rb,Jb){return Jb<rb?-1:Jb>rb?1:Jb>=rb?0:NaN}function z(rb){return rb}function B(rb){this._curve=rb}function A(rb){function Jb(sc){return new B(rb(sc))}Jb._curve=rb;return Jb}
function D(rb){var Jb=rb.curve;rb.angle=rb.x;delete rb.x;rb.radius=rb.y;delete rb.y;rb.curve=function(sc){return arguments.length?Jb(A(sc)):Jb()._curve};return rb}function C(){return D(t().curve(Ta))}function v(){var rb=w().curve(Ta),Jb=rb.curve,sc=rb.lineX0,nc=rb.lineX1,vc=rb.lineY0,Vb=rb.lineY1;rb.angle=rb.x;delete rb.x;rb.startAngle=rb.x0;delete rb.x0;rb.endAngle=rb.x1;delete rb.x1;rb.radius=rb.y;delete rb.y;rb.innerRadius=rb.y0;delete rb.y0;rb.outerRadius=rb.y1;delete rb.y1;rb.lineStartAngle=
function(){return D(sc())};delete rb.lineX0;rb.lineEndAngle=function(){return D(nc())};delete rb.lineX1;rb.lineInnerRadius=function(){return D(vc())};delete rb.lineY0;rb.lineOuterRadius=function(){return D(Vb())};delete rb.lineY1;rb.curve=function(Wb){return arguments.length?Jb(A(Wb)):Jb()._curve};return rb}function y(rb,Jb){return[(Jb=+Jb)*Math.cos(rb-=Math.PI/2),Jb*Math.sin(rb)]}function F(rb){return rb.source}function J(rb){return rb.target}function K(rb){function Jb(){var yb,ac=$a.call(arguments),
Ub=sc.apply(this,ac),lc=nc.apply(this,ac);Wb||(Wb=yb=n.path());rb(Wb,+vc.apply(this,(ac[0]=Ub,ac)),+Vb.apply(this,ac),+vc.apply(this,(ac[0]=lc,ac)),+Vb.apply(this,ac));if(yb)return Wb=null,yb+""||null}var sc=F,nc=J,vc=f,Vb=q,Wb=null;Jb.source=function(yb){return arguments.length?(sc=yb,Jb):sc};Jb.target=function(yb){return arguments.length?(nc=yb,Jb):nc};Jb.x=function(yb){return arguments.length?(vc="function"===typeof yb?yb:k(+yb),Jb):vc};Jb.y=function(yb){return arguments.length?(Vb="function"===
typeof yb?yb:k(+yb),Jb):Vb};Jb.context=function(yb){return arguments.length?(Wb=null==yb?null:yb,Jb):Wb};return Jb}function M(rb,Jb,sc,nc,vc){rb.moveTo(Jb,sc);rb.bezierCurveTo(Jb=(Jb+nc)/2,sc,Jb,vc,nc,vc)}function H(rb,Jb,sc,nc,vc){rb.moveTo(Jb,sc);rb.bezierCurveTo(Jb,sc=(sc+vc)/2,nc,sc,nc,vc)}function O(rb,Jb,sc,nc,vc){var Vb=y(Jb,sc);Jb=y(Jb,sc=(sc+vc)/2);sc=y(nc,sc);nc=y(nc,vc);rb.moveTo(Vb[0],Vb[1]);rb.bezierCurveTo(Jb[0],Jb[1],sc[0],sc[1],nc[0],nc[1])}function I(){}function L(rb,Jb,sc){rb._context.bezierCurveTo((2*
rb._x0+rb._x1)/3,(2*rb._y0+rb._y1)/3,(rb._x0+2*rb._x1)/3,(rb._y0+2*rb._y1)/3,(rb._x0+4*rb._x1+Jb)/6,(rb._y0+4*rb._y1+sc)/6)}function Q(rb){this._context=rb}function Z(rb){this._context=rb}function ba(rb){this._context=rb}function V(rb,Jb){this._basis=new Q(rb);this._beta=Jb}function S(rb,Jb,sc){rb._context.bezierCurveTo(rb._x1+rb._k*(rb._x2-rb._x0),rb._y1+rb._k*(rb._y2-rb._y0),rb._x2+rb._k*(rb._x1-Jb),rb._y2+rb._k*(rb._y1-sc),rb._x2,rb._y2)}function T(rb,Jb){this._context=rb;this._k=(1-Jb)/6}function fa(rb,
Jb){this._context=rb;this._k=(1-Jb)/6}function W(rb,Jb){this._context=rb;this._k=(1-Jb)/6}function aa(rb,Jb,sc){var nc=rb._x1,vc=rb._y1,Vb=rb._x2,Wb=rb._y2;if(1E-12<rb._l01_a){var yb=2*rb._l01_2a+3*rb._l01_a*rb._l12_a+rb._l12_2a,ac=3*rb._l01_a*(rb._l01_a+rb._l12_a);nc=(nc*yb-rb._x0*rb._l12_2a+rb._x2*rb._l01_2a)/ac;vc=(vc*yb-rb._y0*rb._l12_2a+rb._y2*rb._l01_2a)/ac}1E-12<rb._l23_a&&(yb=2*rb._l23_2a+3*rb._l23_a*rb._l12_a+rb._l12_2a,ac=3*rb._l23_a*(rb._l23_a+rb._l12_a),Vb=(Vb*yb+rb._x1*rb._l23_2a-Jb*
rb._l12_2a)/ac,Wb=(Wb*yb+rb._y1*rb._l23_2a-sc*rb._l12_2a)/ac);rb._context.bezierCurveTo(nc,vc,Vb,Wb,rb._x2,rb._y2)}function ja(rb,Jb){this._context=rb;this._alpha=Jb}function ma(rb,Jb){this._context=rb;this._alpha=Jb}function ia(rb,Jb){this._context=rb;this._alpha=Jb}function ra(rb){this._context=rb}function wa(rb,Jb,sc){var nc=rb._x1-rb._x0;Jb-=rb._x1;var vc=(rb._y1-rb._y0)/(nc||0>Jb&&-0);rb=(sc-rb._y1)/(Jb||0>nc&&-0);return((0>vc?-1:1)+(0>rb?-1:1))*Math.min(Math.abs(vc),Math.abs(rb),.5*Math.abs((vc*
Jb+rb*nc)/(nc+Jb)))||0}function pa(rb,Jb){var sc=rb._x1-rb._x0;return sc?(3*(rb._y1-rb._y0)/sc-Jb)/2:Jb}function la(rb,Jb,sc){var nc=rb._x0,vc=rb._x1,Vb=rb._y1,Wb=(vc-nc)/3;rb._context.bezierCurveTo(nc+Wb,rb._y0+Wb*Jb,vc-Wb,Vb-Wb*sc,vc,Vb)}function ka(rb){this._context=rb}function na(rb){this._context=new oa(rb)}function oa(rb){this._context=rb}function sa(rb){this._context=rb}function za(rb){var Jb,sc=rb.length-1,nc=Array(sc),vc=Array(sc),Vb=Array(sc);nc[0]=0;vc[0]=2;Vb[0]=rb[0]+2*rb[1];for(Jb=1;Jb<
sc-1;++Jb)nc[Jb]=1,vc[Jb]=4,Vb[Jb]=4*rb[Jb]+2*rb[Jb+1];nc[sc-1]=2;vc[sc-1]=7;Vb[sc-1]=8*rb[sc-1]+rb[sc];for(Jb=1;Jb<sc;++Jb){var Wb=nc[Jb]/vc[Jb-1];vc[Jb]-=Wb;Vb[Jb]-=Wb*Vb[Jb-1]}nc[sc-1]=Vb[sc-1]/vc[sc-1];for(Jb=sc-2;0<=Jb;--Jb)nc[Jb]=(Vb[Jb]-nc[Jb+1])/vc[Jb];vc[sc-1]=(rb[sc]+nc[sc-1])/2;for(Jb=0;Jb<sc-1;++Jb)vc[Jb]=2*rb[Jb+1]-nc[Jb+1];return[nc,vc]}function Ha(rb,Jb){this._context=rb;this._t=Jb}function Wa(rb,Jb){if(1<(Wb=rb.length))for(var sc=1,nc,vc,Vb=rb[Jb[0]],Wb,yb=Vb.length;sc<Wb;++sc)for(vc=
Vb,Vb=rb[Jb[sc]],nc=0;nc<yb;++nc)Vb[nc][1]+=Vb[nc][0]=isNaN(vc[nc][1])?vc[nc][0]:vc[nc][1]}function Za(rb){rb=rb.length;for(var Jb=Array(rb);0<=--rb;)Jb[rb]=rb;return Jb}function bb(rb,Jb){return rb[Jb]}function sb(rb){var Jb=rb.map(hb);return Za(rb).sort(function(sc,nc){return Jb[sc]-Jb[nc]})}function hb(rb){for(var Jb=-1,sc=0,nc=rb.length,vc,Vb=-Infinity;++Jb<nc;)(vc=+rb[Jb][1])>Vb&&(Vb=vc,sc=Jb);return sc}function ub(rb){var Jb=rb.map(pb);return Za(rb).sort(function(sc,nc){return Jb[sc]-Jb[nc]})}
function pb(rb){for(var Jb=0,sc=-1,nc=rb.length,vc;++sc<nc;)if(vc=+rb[sc][1])Jb+=vc;return Jb}var Ab=Math.abs,tb=Math.atan2,vb=Math.cos,qb=Math.max,zb=Math.min,La=Math.sin,Ka=Math.sqrt,ya=Math.PI,Aa=ya/2,Ja=2*ya;d.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._point=0},lineEnd:function(){(this._line||0!==this._line&&1===this._point)&&this._context.closePath();this._line=1-this._line},point:function(rb,Jb){rb=+rb;Jb=+Jb;switch(this._point){case 0:this._point=
1;this._line?this._context.lineTo(rb,Jb):this._context.moveTo(rb,Jb);break;case 1:this._point=2;default:this._context.lineTo(rb,Jb)}}};var Ta=A(e);B.prototype={areaStart:function(){this._curve.areaStart()},areaEnd:function(){this._curve.areaEnd()},lineStart:function(){this._curve.lineStart()},lineEnd:function(){this._curve.lineEnd()},point:function(rb,Jb){this._curve.point(Jb*Math.sin(rb),Jb*-Math.cos(rb))}};var $a=Array.prototype.slice,ab={draw:function(rb,Jb){Jb=Math.sqrt(Jb/ya);rb.moveTo(Jb,0);
rb.arc(0,0,Jb,0,Ja)}},Db={draw:function(rb,Jb){Jb=Math.sqrt(Jb/5)/2;rb.moveTo(-3*Jb,-Jb);rb.lineTo(-Jb,-Jb);rb.lineTo(-Jb,-3*Jb);rb.lineTo(Jb,-3*Jb);rb.lineTo(Jb,-Jb);rb.lineTo(3*Jb,-Jb);rb.lineTo(3*Jb,Jb);rb.lineTo(Jb,Jb);rb.lineTo(Jb,3*Jb);rb.lineTo(-Jb,3*Jb);rb.lineTo(-Jb,Jb);rb.lineTo(-3*Jb,Jb);rb.closePath()}},Nb=Math.sqrt(1/3),ec=2*Nb,ob={draw:function(rb,Jb){Jb=Math.sqrt(Jb/ec);var sc=Jb*Nb;rb.moveTo(0,-Jb);rb.lineTo(sc,0);rb.lineTo(0,Jb);rb.lineTo(-sc,0);rb.closePath()}},Cb=Math.sin(ya/10)/
Math.sin(7*ya/10),Qb=Math.sin(Ja/10)*Cb,yc=-Math.cos(Ja/10)*Cb;Cb={draw:function(rb,Jb){Jb=Math.sqrt(.8908130915292852*Jb);var sc=Qb*Jb,nc=yc*Jb;rb.moveTo(0,-Jb);rb.lineTo(sc,nc);for(var vc=1;5>vc;++vc){var Vb=Ja*vc/5,Wb=Math.cos(Vb);Vb=Math.sin(Vb);rb.lineTo(Vb*Jb,-Wb*Jb);rb.lineTo(Wb*sc-Vb*nc,Vb*sc+Wb*nc)}rb.closePath()}};var Jc={draw:function(rb,Jb){Jb=Math.sqrt(Jb);var sc=-Jb/2;rb.rect(sc,sc,Jb,Jb)}},Ia=Math.sqrt(3),Na={draw:function(rb,Jb){Jb=-Math.sqrt(Jb/(3*Ia));rb.moveTo(0,2*Jb);rb.lineTo(-Ia*
Jb,-Jb);rb.lineTo(Ia*Jb,-Jb);rb.closePath()}},ib=Math.sqrt(3)/2,Gb=1/Math.sqrt(12),Hb=3*(Gb/2+1),$b={draw:function(rb,Jb){var sc=Math.sqrt(Jb/Hb);Jb=sc/2;var nc=sc*Gb;sc=sc*Gb+sc;var vc=-Jb;rb.moveTo(Jb,nc);rb.lineTo(Jb,sc);rb.lineTo(vc,sc);rb.lineTo(-.5*Jb-ib*nc,ib*Jb+-.5*nc);rb.lineTo(-.5*Jb-ib*sc,ib*Jb+-.5*sc);rb.lineTo(-.5*vc-ib*sc,ib*vc+-.5*sc);rb.lineTo(-.5*Jb+ib*nc,-.5*nc-ib*Jb);rb.lineTo(-.5*Jb+ib*sc,-.5*sc-ib*Jb);rb.lineTo(-.5*vc+ib*sc,-.5*sc-ib*vc);rb.closePath()}},uc=[ab,Db,ob,Jc,Cb,Na,
$b];Q.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._y0=this._y1=NaN;this._point=0},lineEnd:function(){switch(this._point){case 3:L(this,this._x1,this._y1);case 2:this._context.lineTo(this._x1,this._y1)}(this._line||0!==this._line&&1===this._point)&&this._context.closePath();this._line=1-this._line},point:function(rb,Jb){rb=+rb;Jb=+Jb;switch(this._point){case 0:this._point=1;this._line?this._context.lineTo(rb,Jb):this._context.moveTo(rb,
Jb);break;case 1:this._point=2;break;case 2:this._point=3,this._context.lineTo((5*this._x0+this._x1)/6,(5*this._y0+this._y1)/6);default:L(this,rb,Jb)}this._x0=this._x1;this._x1=rb;this._y0=this._y1;this._y1=Jb}};Z.prototype={areaStart:I,areaEnd:I,lineStart:function(){this._x0=this._x1=this._x2=this._x3=this._x4=this._y0=this._y1=this._y2=this._y3=this._y4=NaN;this._point=0},lineEnd:function(){switch(this._point){case 1:this._context.moveTo(this._x2,this._y2);this._context.closePath();break;case 2:this._context.moveTo((this._x2+
2*this._x3)/3,(this._y2+2*this._y3)/3);this._context.lineTo((this._x3+2*this._x2)/3,(this._y3+2*this._y2)/3);this._context.closePath();break;case 3:this.point(this._x2,this._y2),this.point(this._x3,this._y3),this.point(this._x4,this._y4)}},point:function(rb,Jb){rb=+rb;Jb=+Jb;switch(this._point){case 0:this._point=1;this._x2=rb;this._y2=Jb;break;case 1:this._point=2;this._x3=rb;this._y3=Jb;break;case 2:this._point=3;this._x4=rb;this._y4=Jb;this._context.moveTo((this._x0+4*this._x1+rb)/6,(this._y0+
4*this._y1+Jb)/6);break;default:L(this,rb,Jb)}this._x0=this._x1;this._x1=rb;this._y0=this._y1;this._y1=Jb}};ba.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._y0=this._y1=NaN;this._point=0},lineEnd:function(){(this._line||0!==this._line&&3===this._point)&&this._context.closePath();this._line=1-this._line},point:function(rb,Jb){rb=+rb;Jb=+Jb;switch(this._point){case 0:this._point=1;break;case 1:this._point=2;break;case 2:this._point=
3;var sc=(this._x0+4*this._x1+rb)/6,nc=(this._y0+4*this._y1+Jb)/6;this._line?this._context.lineTo(sc,nc):this._context.moveTo(sc,nc);break;case 3:this._point=4;default:L(this,rb,Jb)}this._x0=this._x1;this._x1=rb;this._y0=this._y1;this._y1=Jb}};V.prototype={lineStart:function(){this._x=[];this._y=[];this._basis.lineStart()},lineEnd:function(){var rb=this._x,Jb=this._y,sc=rb.length-1;if(0<sc)for(var nc=rb[0],vc=Jb[0],Vb=rb[sc]-nc,Wb=Jb[sc]-vc,yb=-1,ac;++yb<=sc;)ac=yb/sc,this._basis.point(this._beta*
rb[yb]+(1-this._beta)*(nc+ac*Vb),this._beta*Jb[yb]+(1-this._beta)*(vc+ac*Wb));this._x=this._y=null;this._basis.lineEnd()},point:function(rb,Jb){this._x.push(+rb);this._y.push(+Jb)}};var fd=function sc(Jb){function nc(vc){return 1===Jb?new Q(vc):new V(vc,Jb)}nc.beta=function(vc){return sc(+vc)};return nc}(.85);T.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._x2=this._y0=this._y1=this._y2=NaN;this._point=0},lineEnd:function(){switch(this._point){case 2:this._context.lineTo(this._x2,
this._y2);break;case 3:S(this,this._x1,this._y1)}(this._line||0!==this._line&&1===this._point)&&this._context.closePath();this._line=1-this._line},point:function(Jb,sc){Jb=+Jb;sc=+sc;switch(this._point){case 0:this._point=1;this._line?this._context.lineTo(Jb,sc):this._context.moveTo(Jb,sc);break;case 1:this._point=2;this._x1=Jb;this._y1=sc;break;case 2:this._point=3;default:S(this,Jb,sc)}this._x0=this._x1;this._x1=this._x2;this._x2=Jb;this._y0=this._y1;this._y1=this._y2;this._y2=sc}};var fb=function nc(sc){function vc(Vb){return new T(Vb,
sc)}vc.tension=function(Vb){return nc(+Vb)};return vc}(0);fa.prototype={areaStart:I,areaEnd:I,lineStart:function(){this._x0=this._x1=this._x2=this._x3=this._x4=this._x5=this._y0=this._y1=this._y2=this._y3=this._y4=this._y5=NaN;this._point=0},lineEnd:function(){switch(this._point){case 1:this._context.moveTo(this._x3,this._y3);this._context.closePath();break;case 2:this._context.lineTo(this._x3,this._y3);this._context.closePath();break;case 3:this.point(this._x3,this._y3),this.point(this._x4,this._y4),
this.point(this._x5,this._y5)}},point:function(sc,nc){sc=+sc;nc=+nc;switch(this._point){case 0:this._point=1;this._x3=sc;this._y3=nc;break;case 1:this._point=2;this._context.moveTo(this._x4=sc,this._y4=nc);break;case 2:this._point=3;this._x5=sc;this._y5=nc;break;default:S(this,sc,nc)}this._x0=this._x1;this._x1=this._x2;this._x2=sc;this._y0=this._y1;this._y1=this._y2;this._y2=nc}};var Pb=function vc(nc){function Vb(Wb){return new fa(Wb,nc)}Vb.tension=function(Wb){return vc(+Wb)};return Vb}(0);W.prototype=
{areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._x2=this._y0=this._y1=this._y2=NaN;this._point=0},lineEnd:function(){(this._line||0!==this._line&&3===this._point)&&this._context.closePath();this._line=1-this._line},point:function(nc,vc){nc=+nc;vc=+vc;switch(this._point){case 0:this._point=1;break;case 1:this._point=2;break;case 2:this._point=3;this._line?this._context.lineTo(this._x2,this._y2):this._context.moveTo(this._x2,this._y2);
break;case 3:this._point=4;default:S(this,nc,vc)}this._x0=this._x1;this._x1=this._x2;this._x2=nc;this._y0=this._y1;this._y1=this._y2;this._y2=vc}};var fc=function Vb(vc){function Wb(yb){return new W(yb,vc)}Wb.tension=function(yb){return Vb(+yb)};return Wb}(0);ja.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._x2=this._y0=this._y1=this._y2=NaN;this._l01_a=this._l12_a=this._l23_a=this._l01_2a=this._l12_2a=this._l23_2a=this._point=
0},lineEnd:function(){switch(this._point){case 2:this._context.lineTo(this._x2,this._y2);break;case 3:this.point(this._x2,this._y2)}(this._line||0!==this._line&&1===this._point)&&this._context.closePath();this._line=1-this._line},point:function(vc,Vb){vc=+vc;Vb=+Vb;if(this._point){var Wb=this._x2-vc,yb=this._y2-Vb;this._l23_a=Math.sqrt(this._l23_2a=Math.pow(Wb*Wb+yb*yb,this._alpha))}switch(this._point){case 0:this._point=1;this._line?this._context.lineTo(vc,Vb):this._context.moveTo(vc,Vb);break;case 1:this._point=
2;break;case 2:this._point=3;default:aa(this,vc,Vb)}this._l01_a=this._l12_a;this._l12_a=this._l23_a;this._l01_2a=this._l12_2a;this._l12_2a=this._l23_2a;this._x0=this._x1;this._x1=this._x2;this._x2=vc;this._y0=this._y1;this._y1=this._y2;this._y2=Vb}};var Fc=function Wb(Vb){function yb(ac){return Vb?new ja(ac,Vb):new T(ac,0)}yb.alpha=function(ac){return Wb(+ac)};return yb}(.5);ma.prototype={areaStart:I,areaEnd:I,lineStart:function(){this._x0=this._x1=this._x2=this._x3=this._x4=this._x5=this._y0=this._y1=
this._y2=this._y3=this._y4=this._y5=NaN;this._l01_a=this._l12_a=this._l23_a=this._l01_2a=this._l12_2a=this._l23_2a=this._point=0},lineEnd:function(){switch(this._point){case 1:this._context.moveTo(this._x3,this._y3);this._context.closePath();break;case 2:this._context.lineTo(this._x3,this._y3);this._context.closePath();break;case 3:this.point(this._x3,this._y3),this.point(this._x4,this._y4),this.point(this._x5,this._y5)}},point:function(Vb,Wb){Vb=+Vb;Wb=+Wb;if(this._point){var yb=this._x2-Vb,ac=this._y2-
Wb;this._l23_a=Math.sqrt(this._l23_2a=Math.pow(yb*yb+ac*ac,this._alpha))}switch(this._point){case 0:this._point=1;this._x3=Vb;this._y3=Wb;break;case 1:this._point=2;this._context.moveTo(this._x4=Vb,this._y4=Wb);break;case 2:this._point=3;this._x5=Vb;this._y5=Wb;break;default:aa(this,Vb,Wb)}this._l01_a=this._l12_a;this._l12_a=this._l23_a;this._l01_2a=this._l12_2a;this._l12_2a=this._l23_2a;this._x0=this._x1;this._x1=this._x2;this._x2=Vb;this._y0=this._y1;this._y1=this._y2;this._y2=Wb}};var Pc=function yb(Wb){function ac(Ub){return Wb?
new ma(Ub,Wb):new fa(Ub,0)}ac.alpha=function(Ub){return yb(+Ub)};return ac}(.5);ia.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._x2=this._y0=this._y1=this._y2=NaN;this._l01_a=this._l12_a=this._l23_a=this._l01_2a=this._l12_2a=this._l23_2a=this._point=0},lineEnd:function(){(this._line||0!==this._line&&3===this._point)&&this._context.closePath();this._line=1-this._line},point:function(Wb,yb){Wb=+Wb;yb=+yb;if(this._point){var ac=
this._x2-Wb,Ub=this._y2-yb;this._l23_a=Math.sqrt(this._l23_2a=Math.pow(ac*ac+Ub*Ub,this._alpha))}switch(this._point){case 0:this._point=1;break;case 1:this._point=2;break;case 2:this._point=3;this._line?this._context.lineTo(this._x2,this._y2):this._context.moveTo(this._x2,this._y2);break;case 3:this._point=4;default:aa(this,Wb,yb)}this._l01_a=this._l12_a;this._l12_a=this._l23_a;this._l01_2a=this._l12_2a;this._l12_2a=this._l23_2a;this._x0=this._x1;this._x1=this._x2;this._x2=Wb;this._y0=this._y1;this._y1=
this._y2;this._y2=yb}};var Uc=function ac(yb){function Ub(lc){return yb?new ia(lc,yb):new W(lc,0)}Ub.alpha=function(lc){return ac(+lc)};return Ub}(.5);ra.prototype={areaStart:I,areaEnd:I,lineStart:function(){this._point=0},lineEnd:function(){this._point&&this._context.closePath()},point:function(yb,ac){yb=+yb;ac=+ac;this._point?this._context.lineTo(yb,ac):(this._point=1,this._context.moveTo(yb,ac))}};ka.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=
this._x1=this._y0=this._y1=this._t0=NaN;this._point=0},lineEnd:function(){switch(this._point){case 2:this._context.lineTo(this._x1,this._y1);break;case 3:la(this,this._t0,pa(this,this._t0))}(this._line||0!==this._line&&1===this._point)&&this._context.closePath();this._line=1-this._line},point:function(yb,ac){var Ub=NaN;yb=+yb;ac=+ac;if(yb!==this._x1||ac!==this._y1){switch(this._point){case 0:this._point=1;this._line?this._context.lineTo(yb,ac):this._context.moveTo(yb,ac);break;case 1:this._point=
2;break;case 2:this._point=3;la(this,pa(this,Ub=wa(this,yb,ac)),Ub);break;default:la(this,this._t0,Ub=wa(this,yb,ac))}this._x0=this._x1;this._x1=yb;this._y0=this._y1;this._y1=ac;this._t0=Ub}}};(na.prototype=Object.create(ka.prototype)).point=function(yb,ac){ka.prototype.point.call(this,ac,yb)};oa.prototype={moveTo:function(yb,ac){this._context.moveTo(ac,yb)},closePath:function(){this._context.closePath()},lineTo:function(yb,ac){this._context.lineTo(ac,yb)},bezierCurveTo:function(yb,ac,Ub,lc,tc,Rc){this._context.bezierCurveTo(ac,
yb,lc,Ub,Rc,tc)}};sa.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x=[];this._y=[]},lineEnd:function(){var yb=this._x,ac=this._y,Ub=yb.length;if(Ub)if(this._line?this._context.lineTo(yb[0],ac[0]):this._context.moveTo(yb[0],ac[0]),2===Ub)this._context.lineTo(yb[1],ac[1]);else for(var lc=za(yb),tc=za(ac),Rc=0,kd=1;kd<Ub;++Rc,++kd)this._context.bezierCurveTo(lc[0][Rc],tc[0][Rc],lc[1][Rc],tc[1][Rc],yb[kd],ac[kd]);(this._line||0!==this._line&&
1===Ub)&&this._context.closePath();this._line=1-this._line;this._x=this._y=null},point:function(yb,ac){this._x.push(+yb);this._y.push(+ac)}};Ha.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x=this._y=NaN;this._point=0},lineEnd:function(){0<this._t&&1>this._t&&2===this._point&&this._context.lineTo(this._x,this._y);(this._line||0!==this._line&&1===this._point)&&this._context.closePath();0<=this._line&&(this._t=1-this._t,this._line=1-this._line)},
point:function(yb,ac){yb=+yb;ac=+ac;switch(this._point){case 0:this._point=1;this._line?this._context.lineTo(yb,ac):this._context.moveTo(yb,ac);break;case 1:this._point=2;default:if(0>=this._t)this._context.lineTo(this._x,ac),this._context.lineTo(yb,ac);else{var Ub=this._x*(1-this._t)+yb*this._t;this._context.lineTo(Ub,this._y);this._context.lineTo(Ub,ac)}}this._x=yb;this._y=ac}};p.arc=function(){function yb(){var Ad,Nc=+ac.apply(this,arguments),cd=+Ub.apply(this,arguments),Cc=Rc.apply(this,arguments)-
Aa,dd=kd.apply(this,arguments)-Aa,Vc=Ab(dd-Cc),Sc=dd>Cc;Gd||(Gd=Ad=n.path());if(cd<Nc){var id=cd;cd=Nc;Nc=id}if(1E-12<cd)if(Vc>Ja-1E-12)Gd.moveTo(cd*vb(Cc),cd*La(Cc)),Gd.arc(0,0,cd,Cc,dd,!Sc),1E-12<Nc&&(Gd.moveTo(Nc*vb(dd),Nc*La(dd)),Gd.arc(0,0,Nc,dd,Cc,Sc));else{var Md=Cc,Sd=dd;id=Cc;var Td=dd,Ue=Vc,Ke=Vc,ve=Cd.apply(this,arguments)/2,zf=1E-12<ve&&(tc?+tc.apply(this,arguments):Ka(Nc*Nc+cd*cd)),Ef=zb(Ab(cd-Nc)/2,+lc.apply(this,arguments)),qf=Ef,Ff=Ef;if(1E-12<zf){var Rf=m(zf/Nc*La(ve));ve=m(zf/cd*
La(ve));1E-12<(Ue-=2*Rf)?(Rf*=Sc?1:-1,id+=Rf,Td-=Rf):(Ue=0,id=Td=(Cc+dd)/2);1E-12<(Ke-=2*ve)?(ve*=Sc?1:-1,Md+=ve,Sd-=ve):(Ke=0,Md=Sd=(Cc+dd)/2)}Cc=cd*vb(Md);dd=cd*La(Md);Rf=Nc*vb(Td);ve=Nc*La(Td);if(1E-12<Ef){var Ud=cd*vb(Sd),Ae=cd*La(Sd),rf=Nc*vb(id),hf=Nc*La(id);if(Vc=Vc<ya){var Te=rf-Cc;Vc=hf-dd;zf=Rf-Ud;var Be=ve-Ae,Ie=Be*Te-zf*Vc;1E-12>Ie*Ie?Te=void 0:(Ie=(zf*(dd-Ae)-Be*(Cc-Ud))/Ie,Te=[Cc+Ie*Te,dd+Ie*Vc]);Vc=Te}Vc&&(qf=Cc-Te[0],Ff=dd-Te[1],Vc=Ud-Te[0],zf=Ae-Te[1],qf=(qf*Vc+Ff*zf)/(Ka(qf*qf+Ff*
Ff)*Ka(Vc*Vc+zf*zf)),Ff=1/La((1<qf?0:-1>qf?ya:Math.acos(qf))/2),Te=Ka(Te[0]*Te[0]+Te[1]*Te[1]),qf=zb(Ef,(Nc-Te)/(Ff-1)),Ff=zb(Ef,(cd-Te)/(Ff+1)))}1E-12<Ke?1E-12<Ff?(Md=c(rf,hf,Cc,dd,cd,Ff,Sc),Sd=c(Ud,Ae,Rf,ve,cd,Ff,Sc),Gd.moveTo(Md.cx+Md.x01,Md.cy+Md.y01),Ff<Ef?Gd.arc(Md.cx,Md.cy,Ff,tb(Md.y01,Md.x01),tb(Sd.y01,Sd.x01),!Sc):(Gd.arc(Md.cx,Md.cy,Ff,tb(Md.y01,Md.x01),tb(Md.y11,Md.x11),!Sc),Gd.arc(0,0,cd,tb(Md.cy+Md.y11,Md.cx+Md.x11),tb(Sd.cy+Sd.y11,Sd.cx+Sd.x11),!Sc),Gd.arc(Sd.cx,Sd.cy,Ff,tb(Sd.y11,Sd.x11),
tb(Sd.y01,Sd.x01),!Sc))):(Gd.moveTo(Cc,dd),Gd.arc(0,0,cd,Md,Sd,!Sc)):Gd.moveTo(Cc,dd);1E-12<Nc&&1E-12<Ue?1E-12<qf?(Md=c(Rf,ve,Ud,Ae,Nc,-qf,Sc),Sd=c(Cc,dd,rf,hf,Nc,-qf,Sc),Gd.lineTo(Md.cx+Md.x01,Md.cy+Md.y01),qf<Ef?Gd.arc(Md.cx,Md.cy,qf,tb(Md.y01,Md.x01),tb(Sd.y01,Sd.x01),!Sc):(Gd.arc(Md.cx,Md.cy,qf,tb(Md.y01,Md.x01),tb(Md.y11,Md.x11),!Sc),Gd.arc(0,0,Nc,tb(Md.cy+Md.y11,Md.cx+Md.x11),tb(Sd.cy+Sd.y11,Sd.cx+Sd.x11),Sc),Gd.arc(Sd.cx,Sd.cy,qf,tb(Sd.y11,Sd.x11),tb(Sd.y01,Sd.x01),!Sc))):Gd.arc(0,0,Nc,Td,
id,Sc):Gd.lineTo(Rf,ve)}else Gd.moveTo(0,0);Gd.closePath();if(Ad)return Gd=null,Ad+""||null}var ac=a,Ub=g,lc=k(0),tc=null,Rc=h,kd=r,Cd=l,Gd=null;yb.centroid=function(){var Ad=(+ac.apply(this,arguments)+ +Ub.apply(this,arguments))/2,Nc=(+Rc.apply(this,arguments)+ +kd.apply(this,arguments))/2-ya/2;return[vb(Nc)*Ad,La(Nc)*Ad]};yb.innerRadius=function(Ad){return arguments.length?(ac="function"===typeof Ad?Ad:k(+Ad),yb):ac};yb.outerRadius=function(Ad){return arguments.length?(Ub="function"===typeof Ad?
Ad:k(+Ad),yb):Ub};yb.cornerRadius=function(Ad){return arguments.length?(lc="function"===typeof Ad?Ad:k(+Ad),yb):lc};yb.padRadius=function(Ad){return arguments.length?(tc=null==Ad?null:"function"===typeof Ad?Ad:k(+Ad),yb):tc};yb.startAngle=function(Ad){return arguments.length?(Rc="function"===typeof Ad?Ad:k(+Ad),yb):Rc};yb.endAngle=function(Ad){return arguments.length?(kd="function"===typeof Ad?Ad:k(+Ad),yb):kd};yb.padAngle=function(Ad){return arguments.length?(Cd="function"===typeof Ad?Ad:k(+Ad),
yb):Cd};yb.context=function(Ad){return arguments.length?(Gd=null==Ad?null:Ad,yb):Gd};return yb};p.area=w;p.areaRadial=v;p.curveBasis=function(yb){return new Q(yb)};p.curveBasisClosed=function(yb){return new Z(yb)};p.curveBasisOpen=function(yb){return new ba(yb)};p.curveBundle=fd;p.curveCardinal=fb;p.curveCardinalClosed=Pb;p.curveCardinalOpen=fc;p.curveCatmullRom=Fc;p.curveCatmullRomClosed=Pc;p.curveCatmullRomOpen=Uc;p.curveLinear=e;p.curveLinearClosed=function(yb){return new ra(yb)};p.curveMonotoneX=
function(yb){return new ka(yb)};p.curveMonotoneY=function(yb){return new na(yb)};p.curveNatural=function(yb){return new sa(yb)};p.curveStep=function(yb){return new Ha(yb,.5)};p.curveStepAfter=function(yb){return new Ha(yb,1)};p.curveStepBefore=function(yb){return new Ha(yb,0)};p.line=t;p.lineRadial=C;p.linkHorizontal=function(){return K(M)};p.linkRadial=function(){var yb=K(O);yb.angle=yb.x;delete yb.x;yb.radius=yb.y;delete yb.y;return yb};p.linkVertical=function(){return K(H)};p.pie=function(){function yb(Cd){var Gd,
Ad=Cd.length;var Nc=0;var cd=Array(Ad),Cc=Array(Ad),dd=+tc.apply(this,arguments);var Vc=Math.min(Ja,Math.max(-Ja,Rc.apply(this,arguments)-dd));var Sc=Math.min(Math.abs(Vc)/Ad,kd.apply(this,arguments)),id=Sc*(0>Vc?-1:1),Md;for(Gd=0;Gd<Ad;++Gd)0<(Md=Cc[cd[Gd]=Gd]=+ac(Cd[Gd],Gd,Cd))&&(Nc+=Md);null!=Ub?cd.sort(function(Td,Ue){return Ub(Cc[Td],Cc[Ue])}):null!=lc&&cd.sort(function(Td,Ue){return lc(Cd[Td],Cd[Ue])});Gd=0;for(Vc=Nc?(Vc-Ad*id)/Nc:0;Gd<Ad;++Gd,dd=Sd){Nc=cd[Gd];Md=Cc[Nc];var Sd=dd+(0<Md?Md*Vc:
0)+id;Cc[Nc]={data:Cd[Nc],index:Gd,value:Md,startAngle:dd,endAngle:Sd,padAngle:Sc}}return Cc}var ac=z,Ub=x,lc=null,tc=k(0),Rc=k(Ja),kd=k(0);yb.value=function(Cd){return arguments.length?(ac="function"===typeof Cd?Cd:k(+Cd),yb):ac};yb.sortValues=function(Cd){return arguments.length?(Ub=Cd,lc=null,yb):Ub};yb.sort=function(Cd){return arguments.length?(lc=Cd,Ub=null,yb):lc};yb.startAngle=function(Cd){return arguments.length?(tc="function"===typeof Cd?Cd:k(+Cd),yb):tc};yb.endAngle=function(Cd){return arguments.length?
(Rc="function"===typeof Cd?Cd:k(+Cd),yb):Rc};yb.padAngle=function(Cd){return arguments.length?(kd="function"===typeof Cd?Cd:k(+Cd),yb):kd};return yb};p.pointRadial=y;p.radialArea=v;p.radialLine=C;p.stack=function(){function yb(Rc){var kd=ac.apply(this,arguments),Cd,Gd=Rc.length,Ad=kd.length,Nc=Array(Ad);for(Cd=0;Cd<Ad;++Cd){for(var cd=kd[Cd],Cc=Nc[Cd]=Array(Gd),dd=0,Vc;dd<Gd;++dd)Cc[dd]=Vc=[0,+tc(Rc[dd],cd,dd,Rc)],Vc.data=Rc[dd];Cc.key=cd}Cd=0;for(kd=Ub(Nc);Cd<Ad;++Cd)Nc[kd[Cd]].index=Cd;lc(Nc,kd);
return Nc}var ac=k([]),Ub=Za,lc=Wa,tc=bb;yb.keys=function(Rc){return arguments.length?(ac="function"===typeof Rc?Rc:k($a.call(Rc)),yb):ac};yb.value=function(Rc){return arguments.length?(tc="function"===typeof Rc?Rc:k(+Rc),yb):tc};yb.order=function(Rc){return arguments.length?(Ub=null==Rc?Za:"function"===typeof Rc?Rc:k($a.call(Rc)),yb):Ub};yb.offset=function(Rc){return arguments.length?(lc=null==Rc?Wa:Rc,yb):lc};return yb};p.stackOffsetDiverging=function(yb,ac){if(0<(Gd=yb.length))for(var Ub,lc=0,
tc,Rc,kd,Cd,Gd,Ad=yb[ac[0]].length;lc<Ad;++lc)for(Ub=kd=Cd=0;Ub<Gd;++Ub)0<(Rc=(tc=yb[ac[Ub]][lc])[1]-tc[0])?(tc[0]=kd,tc[1]=kd+=Rc):0>Rc?(tc[1]=Cd,tc[0]=Cd+=Rc):(tc[0]=0,tc[1]=Rc)};p.stackOffsetExpand=function(yb,ac){if(0<(lc=yb.length)){for(var Ub,lc,tc=0,Rc=yb[0].length,kd;tc<Rc;++tc){for(kd=Ub=0;Ub<lc;++Ub)kd+=yb[Ub][tc][1]||0;if(kd)for(Ub=0;Ub<lc;++Ub)yb[Ub][tc][1]/=kd}Wa(yb,ac)}};p.stackOffsetNone=Wa;p.stackOffsetSilhouette=function(yb,ac){if(0<(tc=yb.length)){for(var Ub=0,lc=yb[ac[0]],tc,Rc=
lc.length;Ub<Rc;++Ub){for(var kd=0,Cd=0;kd<tc;++kd)Cd+=yb[kd][Ub][1]||0;lc[Ub][1]+=lc[Ub][0]=-Cd/2}Wa(yb,ac)}};p.stackOffsetWiggle=function(yb,ac){if(0<(kd=yb.length)&&0<(Rc=(tc=yb[ac[0]]).length)){for(var Ub=0,lc=1,tc,Rc,kd;lc<Rc;++lc){for(var Cd=0,Gd=0,Ad=0;Cd<kd;++Cd){var Nc=yb[ac[Cd]],cd=Nc[lc][1]||0;Nc=(cd-(Nc[lc-1][1]||0))/2;for(var Cc=0;Cc<Cd;++Cc){var dd=yb[ac[Cc]];Nc+=(dd[lc][1]||0)-(dd[lc-1][1]||0)}Gd+=cd;Ad+=Nc*cd}tc[lc-1][1]+=tc[lc-1][0]=Ub;Gd&&(Ub-=Ad/Gd)}tc[lc-1][1]+=tc[lc-1][0]=Ub;
Wa(yb,ac)}};p.stackOrderAppearance=sb;p.stackOrderAscending=ub;p.stackOrderDescending=function(yb){return ub(yb).reverse()};p.stackOrderInsideOut=function(yb){var ac=yb.length,Ub=yb.map(pb),lc=sb(yb),tc=0,Rc=0,kd=[],Cd=[];for(yb=0;yb<ac;++yb){var Gd=lc[yb];tc<Rc?(tc+=Ub[Gd],kd.push(Gd)):(Rc+=Ub[Gd],Cd.push(Gd))}return Cd.reverse().concat(kd)};p.stackOrderNone=Za;p.stackOrderReverse=function(yb){return Za(yb).reverse()};p.symbol=function(){function yb(){var tc;lc||(lc=tc=n.path());ac.apply(this,arguments).draw(lc,
+Ub.apply(this,arguments));if(tc)return lc=null,tc+""||null}var ac=k(ab),Ub=k(64),lc=null;yb.type=function(tc){return arguments.length?(ac="function"===typeof tc?tc:k(tc),yb):ac};yb.size=function(tc){return arguments.length?(Ub="function"===typeof tc?tc:k(+tc),yb):Ub};yb.context=function(tc){return arguments.length?(lc=null==tc?null:tc,yb):lc};return yb};p.symbolCircle=ab;p.symbolCross=Db;p.symbolDiamond=ob;p.symbolSquare=Jc;p.symbolStar=Cb;p.symbolTriangle=Na;p.symbolWye=$b;p.symbols=uc;Object.defineProperty(p,
"__esModule",{value:!0})})},{"d3-path":172}],175:[function(b,N,G){(function(p,n){"object"===typeof G&&"undefined"!==typeof N?n(G,b("d3-time")):(p=p||self,n(p.d3=p.d3||{},p.d3))})(this,function(p,n){function k(ob){if(0<=ob.y&&100>ob.y){var Cb=new Date(-1,ob.m,ob.d,ob.H,ob.M,ob.S,ob.L);Cb.setFullYear(ob.y);return Cb}return new Date(ob.y,ob.m,ob.d,ob.H,ob.M,ob.S,ob.L)}function m(ob){if(0<=ob.y&&100>ob.y){var Cb=new Date(Date.UTC(-1,ob.m,ob.d,ob.H,ob.M,ob.S,ob.L));Cb.setUTCFullYear(ob.y);return Cb}return new Date(Date.UTC(ob.y,
ob.m,ob.d,ob.H,ob.M,ob.S,ob.L))}function a(ob,Cb,Qb){return{y:ob,m:Cb,d:Qb,H:0,M:0,S:0,L:0}}function g(ob){function Cb(Wb,yb){return function(ac){var Ub=[],lc=-1,tc=0,Rc=Wb.length,kd,Cd;for(ac instanceof Date||(ac=new Date(+ac));++lc<Rc;)if(37===Wb.charCodeAt(lc)){Ub.push(Wb.slice(tc,lc));null!=(tc=Ja[kd=Wb.charAt(++lc)])?kd=Wb.charAt(++lc):tc="e"===kd?" ":"0";if(Cd=yb[kd])kd=Cd(ac,tc);Ub.push(kd);tc=lc+1}Ub.push(Wb.slice(tc,lc));return Ub.join("")}}function Qb(Wb,yb){return function(ac){var Ub=a(1900,
void 0,1);if(yc(Ub,Wb,ac+="",0)!=ac.length)return null;if("Q"in Ub)return new Date(Ub.Q);if("s"in Ub)return new Date(1E3*Ub.s+("L"in Ub?Ub.L:0));!yb||"Z"in Ub||(Ub.Z=0);"p"in Ub&&(Ub.H=Ub.H%12+12*Ub.p);void 0===Ub.m&&(Ub.m="q"in Ub?Ub.q:0);if("V"in Ub){if(1>Ub.V||53<Ub.V)return null;"w"in Ub||(Ub.w=1);if("Z"in Ub){ac=m(a(Ub.y,0,1));var lc=ac.getUTCDay();ac=4<lc||0===lc?n.utcMonday.ceil(ac):n.utcMonday(ac);ac=n.utcDay.offset(ac,7*(Ub.V-1));Ub.y=ac.getUTCFullYear();Ub.m=ac.getUTCMonth();Ub.d=ac.getUTCDate()+
(Ub.w+6)%7}else ac=k(a(Ub.y,0,1)),lc=ac.getDay(),ac=4<lc||0===lc?n.timeMonday.ceil(ac):n.timeMonday(ac),ac=n.timeDay.offset(ac,7*(Ub.V-1)),Ub.y=ac.getFullYear(),Ub.m=ac.getMonth(),Ub.d=ac.getDate()+(Ub.w+6)%7}else if("W"in Ub||"U"in Ub)"w"in Ub||(Ub.w="u"in Ub?Ub.u%7:"W"in Ub?1:0),lc="Z"in Ub?m(a(Ub.y,0,1)).getUTCDay():k(a(Ub.y,0,1)).getDay(),Ub.m=0,Ub.d="W"in Ub?(Ub.w+6)%7+7*Ub.W-(lc+5)%7:Ub.w+7*Ub.U-(lc+6)%7;return"Z"in Ub?(Ub.H+=Ub.Z/100|0,Ub.M+=Ub.Z%100,m(Ub)):k(Ub)}}function yc(Wb,yb,ac,Ub){for(var lc=
0,tc=yb.length,Rc=ac.length,kd;lc<tc;){if(Ub>=Rc)return-1;kd=yb.charCodeAt(lc++);if(37===kd){if(kd=yb.charAt(lc++),kd=Vb[kd in Ja?yb.charAt(lc++):kd],!kd||0>(Ub=kd(Wb,ac,Ub)))return-1}else if(kd!=ac.charCodeAt(Ub++))return-1}return Ub}var Jc=ob.dateTime,Ia=ob.date,Na=ob.time,ib=ob.periods,Gb=ob.days,Hb=ob.shortDays,$b=ob.months,uc=ob.shortMonths,fd=l(ib),fb=c(ib),Pb=l(Gb),fc=c(Gb),Fc=l(Hb),Pc=c(Hb),Uc=l($b),rb=c($b),Jb=l(uc),sc=c(uc),nc={a:function(Wb){return Hb[Wb.getDay()]},A:function(Wb){return Gb[Wb.getDay()]},
b:function(Wb){return uc[Wb.getMonth()]},B:function(Wb){return $b[Wb.getMonth()]},c:null,d:I,e:I,f:V,H:L,I:Q,j:Z,L:ba,m:S,M:T,p:function(Wb){return ib[+(12<=Wb.getHours())]},q:function(Wb){return 1+~~(Wb.getMonth()/3)},Q:zb,s:La,S:fa,u:W,U:aa,V:ja,w:ma,W:ia,x:null,X:null,y:ra,Y:wa,Z:pa,"%":qb},vc={a:function(Wb){return Hb[Wb.getUTCDay()]},A:function(Wb){return Gb[Wb.getUTCDay()]},b:function(Wb){return uc[Wb.getUTCMonth()]},B:function(Wb){return $b[Wb.getUTCMonth()]},c:null,d:la,e:la,f:za,H:ka,I:na,
j:oa,L:sa,m:Ha,M:Wa,p:function(Wb){return ib[+(12<=Wb.getUTCHours())]},q:function(Wb){return 1+~~(Wb.getUTCMonth()/3)},Q:zb,s:La,S:Za,u:bb,U:sb,V:hb,w:ub,W:pb,x:null,X:null,y:Ab,Y:tb,Z:vb,"%":qb},Vb={a:function(Wb,yb,ac){return(yb=Fc.exec(yb.slice(ac)))?(Wb.w=Pc[yb[0].toLowerCase()],ac+yb[0].length):-1},A:function(Wb,yb,ac){return(yb=Pb.exec(yb.slice(ac)))?(Wb.w=fc[yb[0].toLowerCase()],ac+yb[0].length):-1},b:function(Wb,yb,ac){return(yb=Jb.exec(yb.slice(ac)))?(Wb.m=sc[yb[0].toLowerCase()],ac+yb[0].length):
-1},B:function(Wb,yb,ac){return(yb=Uc.exec(yb.slice(ac)))?(Wb.m=rb[yb[0].toLowerCase()],ac+yb[0].length):-1},c:function(Wb,yb,ac){return yc(Wb,Jc,yb,ac)},d:D,e:D,f:K,H:v,I:v,j:C,L:J,m:A,M:y,p:function(Wb,yb,ac){return(yb=fd.exec(yb.slice(ac)))?(Wb.p=fb[yb[0].toLowerCase()],ac+yb[0].length):-1},q:B,Q:H,s:O,S:F,u:e,U:f,V:q,w:d,W:t,x:function(Wb,yb,ac){return yc(Wb,Ia,yb,ac)},X:function(Wb,yb,ac){return yc(Wb,Na,yb,ac)},y:x,Y:w,Z:z,"%":M};nc.x=Cb(Ia,nc);nc.X=Cb(Na,nc);nc.c=Cb(Jc,nc);vc.x=Cb(Ia,vc);vc.X=
Cb(Na,vc);vc.c=Cb(Jc,vc);return{format:function(Wb){var yb=Cb(Wb+="",nc);yb.toString=function(){return Wb};return yb},parse:function(Wb){var yb=Qb(Wb+="",!1);yb.toString=function(){return Wb};return yb},utcFormat:function(Wb){var yb=Cb(Wb+="",vc);yb.toString=function(){return Wb};return yb},utcParse:function(Wb){var yb=Qb(Wb+="",!0);yb.toString=function(){return Wb};return yb}}}function h(ob,Cb,Qb){var yc=0>ob?"-":"";ob=(yc?-ob:ob)+"";var Jc=ob.length;return yc+(Jc<Qb?Array(Qb-Jc+1).join(Cb)+ob:ob)}
function r(ob){return ob.replace(ab,"\\$\x26")}function l(ob){return new RegExp("^(?:"+ob.map(r).join("|")+")","i")}function c(ob){for(var Cb={},Qb=-1,yc=ob.length;++Qb<yc;)Cb[ob[Qb].toLowerCase()]=Qb;return Cb}function d(ob,Cb,Qb){return(Cb=Ta.exec(Cb.slice(Qb,Qb+1)))?(ob.w=+Cb[0],Qb+Cb[0].length):-1}function e(ob,Cb,Qb){return(Cb=Ta.exec(Cb.slice(Qb,Qb+1)))?(ob.u=+Cb[0],Qb+Cb[0].length):-1}function f(ob,Cb,Qb){return(Cb=Ta.exec(Cb.slice(Qb,Qb+2)))?(ob.U=+Cb[0],Qb+Cb[0].length):-1}function q(ob,
Cb,Qb){return(Cb=Ta.exec(Cb.slice(Qb,Qb+2)))?(ob.V=+Cb[0],Qb+Cb[0].length):-1}function t(ob,Cb,Qb){return(Cb=Ta.exec(Cb.slice(Qb,Qb+2)))?(ob.W=+Cb[0],Qb+Cb[0].length):-1}function w(ob,Cb,Qb){return(Cb=Ta.exec(Cb.slice(Qb,Qb+4)))?(ob.y=+Cb[0],Qb+Cb[0].length):-1}function x(ob,Cb,Qb){return(Cb=Ta.exec(Cb.slice(Qb,Qb+2)))?(ob.y=+Cb[0]+(68<+Cb[0]?1900:2E3),Qb+Cb[0].length):-1}function z(ob,Cb,Qb){return(Cb=/^(Z)|([+-]\d\d)(?::?(\d\d))?/.exec(Cb.slice(Qb,Qb+6)))?(ob.Z=Cb[1]?0:-(Cb[2]+(Cb[3]||"00")),Qb+
Cb[0].length):-1}function B(ob,Cb,Qb){return(Cb=Ta.exec(Cb.slice(Qb,Qb+1)))?(ob.q=3*Cb[0]-3,Qb+Cb[0].length):-1}function A(ob,Cb,Qb){return(Cb=Ta.exec(Cb.slice(Qb,Qb+2)))?(ob.m=Cb[0]-1,Qb+Cb[0].length):-1}function D(ob,Cb,Qb){return(Cb=Ta.exec(Cb.slice(Qb,Qb+2)))?(ob.d=+Cb[0],Qb+Cb[0].length):-1}function C(ob,Cb,Qb){return(Cb=Ta.exec(Cb.slice(Qb,Qb+3)))?(ob.m=0,ob.d=+Cb[0],Qb+Cb[0].length):-1}function v(ob,Cb,Qb){return(Cb=Ta.exec(Cb.slice(Qb,Qb+2)))?(ob.H=+Cb[0],Qb+Cb[0].length):-1}function y(ob,
Cb,Qb){return(Cb=Ta.exec(Cb.slice(Qb,Qb+2)))?(ob.M=+Cb[0],Qb+Cb[0].length):-1}function F(ob,Cb,Qb){return(Cb=Ta.exec(Cb.slice(Qb,Qb+2)))?(ob.S=+Cb[0],Qb+Cb[0].length):-1}function J(ob,Cb,Qb){return(Cb=Ta.exec(Cb.slice(Qb,Qb+3)))?(ob.L=+Cb[0],Qb+Cb[0].length):-1}function K(ob,Cb,Qb){return(Cb=Ta.exec(Cb.slice(Qb,Qb+6)))?(ob.L=Math.floor(Cb[0]/1E3),Qb+Cb[0].length):-1}function M(ob,Cb,Qb){return(ob=$a.exec(Cb.slice(Qb,Qb+1)))?Qb+ob[0].length:-1}function H(ob,Cb,Qb){return(Cb=Ta.exec(Cb.slice(Qb)))?
(ob.Q=+Cb[0],Qb+Cb[0].length):-1}function O(ob,Cb,Qb){return(Cb=Ta.exec(Cb.slice(Qb)))?(ob.s=+Cb[0],Qb+Cb[0].length):-1}function I(ob,Cb){return h(ob.getDate(),Cb,2)}function L(ob,Cb){return h(ob.getHours(),Cb,2)}function Q(ob,Cb){return h(ob.getHours()%12||12,Cb,2)}function Z(ob,Cb){return h(1+n.timeDay.count(n.timeYear(ob),ob),Cb,3)}function ba(ob,Cb){return h(ob.getMilliseconds(),Cb,3)}function V(ob,Cb){return ba(ob,Cb)+"000"}function S(ob,Cb){return h(ob.getMonth()+1,Cb,2)}function T(ob,Cb){return h(ob.getMinutes(),
Cb,2)}function fa(ob,Cb){return h(ob.getSeconds(),Cb,2)}function W(ob){ob=ob.getDay();return 0===ob?7:ob}function aa(ob,Cb){return h(n.timeSunday.count(n.timeYear(ob)-1,ob),Cb,2)}function ja(ob,Cb){var Qb=ob.getDay();ob=4<=Qb||0===Qb?n.timeThursday(ob):n.timeThursday.ceil(ob);return h(n.timeThursday.count(n.timeYear(ob),ob)+(4===n.timeYear(ob).getDay()),Cb,2)}function ma(ob){return ob.getDay()}function ia(ob,Cb){return h(n.timeMonday.count(n.timeYear(ob)-1,ob),Cb,2)}function ra(ob,Cb){return h(ob.getFullYear()%
100,Cb,2)}function wa(ob,Cb){return h(ob.getFullYear()%1E4,Cb,4)}function pa(ob){ob=ob.getTimezoneOffset();return(0<ob?"-":(ob*=-1,"+"))+h(ob/60|0,"0",2)+h(ob%60,"0",2)}function la(ob,Cb){return h(ob.getUTCDate(),Cb,2)}function ka(ob,Cb){return h(ob.getUTCHours(),Cb,2)}function na(ob,Cb){return h(ob.getUTCHours()%12||12,Cb,2)}function oa(ob,Cb){return h(1+n.utcDay.count(n.utcYear(ob),ob),Cb,3)}function sa(ob,Cb){return h(ob.getUTCMilliseconds(),Cb,3)}function za(ob,Cb){return sa(ob,Cb)+"000"}function Ha(ob,
Cb){return h(ob.getUTCMonth()+1,Cb,2)}function Wa(ob,Cb){return h(ob.getUTCMinutes(),Cb,2)}function Za(ob,Cb){return h(ob.getUTCSeconds(),Cb,2)}function bb(ob){ob=ob.getUTCDay();return 0===ob?7:ob}function sb(ob,Cb){return h(n.utcSunday.count(n.utcYear(ob)-1,ob),Cb,2)}function hb(ob,Cb){var Qb=ob.getUTCDay();ob=4<=Qb||0===Qb?n.utcThursday(ob):n.utcThursday.ceil(ob);return h(n.utcThursday.count(n.utcYear(ob),ob)+(4===n.utcYear(ob).getUTCDay()),Cb,2)}function ub(ob){return ob.getUTCDay()}function pb(ob,
Cb){return h(n.utcMonday.count(n.utcYear(ob)-1,ob),Cb,2)}function Ab(ob,Cb){return h(ob.getUTCFullYear()%100,Cb,2)}function tb(ob,Cb){return h(ob.getUTCFullYear()%1E4,Cb,4)}function vb(){return"+0000"}function qb(){return"%"}function zb(ob){return+ob}function La(ob){return Math.floor(+ob/1E3)}function Ka(ob){Db=g(ob);p.timeFormat=Db.format;p.timeParse=Db.parse;p.utcFormat=Db.utcFormat;p.utcParse=Db.utcParse;return Db}function ya(ob){return ob.toISOString()}function Aa(ob){ob=new Date(ob);return isNaN(ob)?
null:ob}var Ja={"-":"",_:" ",0:"0"},Ta=/^\s*\d+/,$a=/^%/,ab=/[\\^$*+?|[\]().{}]/g,Db;Ka({dateTime:"%x, %X",date:"%-m/%-d/%Y",time:"%-I:%M:%S %p",periods:["AM","PM"],days:"Sunday Monday Tuesday Wednesday Thursday Friday Saturday".split(" "),shortDays:"Sun Mon Tue Wed Thu Fri Sat".split(" "),months:"January February March April May June July August September October November December".split(" "),shortMonths:"Jan Feb Mar Apr May Jun Jul Aug Sep Oct Nov Dec".split(" ")});var Nb=Date.prototype.toISOString?
ya:p.utcFormat("%Y-%m-%dT%H:%M:%S.%LZ"),ec=+new Date("2000-01-01T00:00:00.000Z")?Aa:p.utcParse("%Y-%m-%dT%H:%M:%S.%LZ");p.isoFormat=Nb;p.isoParse=ec;p.timeFormatDefaultLocale=Ka;p.timeFormatLocale=g;Object.defineProperty(p,"__esModule",{value:!0})})},{"d3-time":176}],176:[function(b,N,G){(function(p,n){"object"===typeof G&&"undefined"!==typeof N?n(G):(p=p||self,n(p.d3=p.d3||{}))})(this,function(p){function n(hb,ub,pb,Ab){function tb(vb){return hb(vb=0===arguments.length?new Date:new Date(+vb)),vb}
tb.floor=function(vb){return hb(vb=new Date(+vb)),vb};tb.ceil=function(vb){return hb(vb=new Date(vb-1)),ub(vb,1),hb(vb),vb};tb.round=function(vb){var qb=tb(vb),zb=tb.ceil(vb);return vb-qb<zb-vb?qb:zb};tb.offset=function(vb,qb){return ub(vb=new Date(+vb),null==qb?1:Math.floor(qb)),vb};tb.range=function(vb,qb,zb){var La=[],Ka;vb=tb.ceil(vb);zb=null==zb?1:Math.floor(zb);if(!(vb<qb&&0<zb))return La;do La.push(Ka=new Date(+vb)),ub(vb,zb),hb(vb);while(Ka<vb&&vb<qb);return La};tb.filter=function(vb){return n(function(qb){if(qb>=
qb)for(;hb(qb),!vb(qb);)qb.setTime(qb-1)},function(qb,zb){if(qb>=qb)if(0>zb)for(;0>=++zb;)for(;ub(qb,-1),!vb(qb););else for(;0<=--zb;)for(;ub(qb,1),!vb(qb););})};pb&&(tb.count=function(vb,qb){a.setTime(+vb);g.setTime(+qb);hb(a);hb(g);return Math.floor(pb(a,g))},tb.every=function(vb){vb=Math.floor(vb);return isFinite(vb)&&0<vb?1<vb?tb.filter(Ab?function(qb){return 0===Ab(qb)%vb}:function(qb){return 0===tb.count(0,qb)%vb}):tb:null});return tb}function k(hb){return n(function(ub){ub.setDate(ub.getDate()-
(ub.getDay()+7-hb)%7);ub.setHours(0,0,0,0)},function(ub,pb){ub.setDate(ub.getDate()+7*pb)},function(ub,pb){return(pb-ub-6E4*(pb.getTimezoneOffset()-ub.getTimezoneOffset()))/6048E5})}function m(hb){return n(function(ub){ub.setUTCDate(ub.getUTCDate()-(ub.getUTCDay()+7-hb)%7);ub.setUTCHours(0,0,0,0)},function(ub,pb){ub.setUTCDate(ub.getUTCDate()+7*pb)},function(ub,pb){return(pb-ub)/6048E5})}var a=new Date,g=new Date,h=n(function(){},function(hb,ub){hb.setTime(+hb+ub)},function(hb,ub){return ub-hb});
h.every=function(hb){hb=Math.floor(hb);return isFinite(hb)&&0<hb?1<hb?n(function(ub){ub.setTime(Math.floor(ub/hb)*hb)},function(ub,pb){ub.setTime(+ub+pb*hb)},function(ub,pb){return(pb-ub)/hb}):h:null};var r=h.range,l=n(function(hb){hb.setTime(hb-hb.getMilliseconds())},function(hb,ub){hb.setTime(+hb+1E3*ub)},function(hb,ub){return(ub-hb)/1E3},function(hb){return hb.getUTCSeconds()}),c=l.range,d=n(function(hb){hb.setTime(hb-hb.getMilliseconds()-1E3*hb.getSeconds())},function(hb,ub){hb.setTime(+hb+6E4*
ub)},function(hb,ub){return(ub-hb)/6E4},function(hb){return hb.getMinutes()}),e=d.range,f=n(function(hb){hb.setTime(hb-hb.getMilliseconds()-1E3*hb.getSeconds()-6E4*hb.getMinutes())},function(hb,ub){hb.setTime(+hb+36E5*ub)},function(hb,ub){return(ub-hb)/36E5},function(hb){return hb.getHours()}),q=f.range,t=n(function(hb){hb.setHours(0,0,0,0)},function(hb,ub){hb.setDate(hb.getDate()+ub)},function(hb,ub){return(ub-hb-6E4*(ub.getTimezoneOffset()-hb.getTimezoneOffset()))/864E5},function(hb){return hb.getDate()-
1}),w=t.range,x=k(0),z=k(1),B=k(2),A=k(3),D=k(4),C=k(5),v=k(6),y=x.range,F=z.range,J=B.range,K=A.range,M=D.range,H=C.range,O=v.range,I=n(function(hb){hb.setDate(1);hb.setHours(0,0,0,0)},function(hb,ub){hb.setMonth(hb.getMonth()+ub)},function(hb,ub){return ub.getMonth()-hb.getMonth()+12*(ub.getFullYear()-hb.getFullYear())},function(hb){return hb.getMonth()}),L=I.range,Q=n(function(hb){hb.setMonth(0,1);hb.setHours(0,0,0,0)},function(hb,ub){hb.setFullYear(hb.getFullYear()+ub)},function(hb,ub){return ub.getFullYear()-
hb.getFullYear()},function(hb){return hb.getFullYear()});Q.every=function(hb){return isFinite(hb=Math.floor(hb))&&0<hb?n(function(ub){ub.setFullYear(Math.floor(ub.getFullYear()/hb)*hb);ub.setMonth(0,1);ub.setHours(0,0,0,0)},function(ub,pb){ub.setFullYear(ub.getFullYear()+pb*hb)}):null};var Z=Q.range,ba=n(function(hb){hb.setUTCSeconds(0,0)},function(hb,ub){hb.setTime(+hb+6E4*ub)},function(hb,ub){return(ub-hb)/6E4},function(hb){return hb.getUTCMinutes()}),V=ba.range,S=n(function(hb){hb.setUTCMinutes(0,
0,0)},function(hb,ub){hb.setTime(+hb+36E5*ub)},function(hb,ub){return(ub-hb)/36E5},function(hb){return hb.getUTCHours()}),T=S.range,fa=n(function(hb){hb.setUTCHours(0,0,0,0)},function(hb,ub){hb.setUTCDate(hb.getUTCDate()+ub)},function(hb,ub){return(ub-hb)/864E5},function(hb){return hb.getUTCDate()-1}),W=fa.range,aa=m(0),ja=m(1),ma=m(2),ia=m(3),ra=m(4),wa=m(5),pa=m(6),la=aa.range,ka=ja.range,na=ma.range,oa=ia.range,sa=ra.range,za=wa.range,Ha=pa.range,Wa=n(function(hb){hb.setUTCDate(1);hb.setUTCHours(0,
0,0,0)},function(hb,ub){hb.setUTCMonth(hb.getUTCMonth()+ub)},function(hb,ub){return ub.getUTCMonth()-hb.getUTCMonth()+12*(ub.getUTCFullYear()-hb.getUTCFullYear())},function(hb){return hb.getUTCMonth()}),Za=Wa.range,bb=n(function(hb){hb.setUTCMonth(0,1);hb.setUTCHours(0,0,0,0)},function(hb,ub){hb.setUTCFullYear(hb.getUTCFullYear()+ub)},function(hb,ub){return ub.getUTCFullYear()-hb.getUTCFullYear()},function(hb){return hb.getUTCFullYear()});bb.every=function(hb){return isFinite(hb=Math.floor(hb))&&
0<hb?n(function(ub){ub.setUTCFullYear(Math.floor(ub.getUTCFullYear()/hb)*hb);ub.setUTCMonth(0,1);ub.setUTCHours(0,0,0,0)},function(ub,pb){ub.setUTCFullYear(ub.getUTCFullYear()+pb*hb)}):null};var sb=bb.range;p.timeDay=t;p.timeDays=w;p.timeFriday=C;p.timeFridays=H;p.timeHour=f;p.timeHours=q;p.timeInterval=n;p.timeMillisecond=h;p.timeMilliseconds=r;p.timeMinute=d;p.timeMinutes=e;p.timeMonday=z;p.timeMondays=F;p.timeMonth=I;p.timeMonths=L;p.timeSaturday=v;p.timeSaturdays=O;p.timeSecond=l;p.timeSeconds=
c;p.timeSunday=x;p.timeSundays=y;p.timeThursday=D;p.timeThursdays=M;p.timeTuesday=B;p.timeTuesdays=J;p.timeWednesday=A;p.timeWednesdays=K;p.timeWeek=x;p.timeWeeks=y;p.timeYear=Q;p.timeYears=Z;p.utcDay=fa;p.utcDays=W;p.utcFriday=wa;p.utcFridays=za;p.utcHour=S;p.utcHours=T;p.utcMillisecond=h;p.utcMilliseconds=r;p.utcMinute=ba;p.utcMinutes=V;p.utcMonday=ja;p.utcMondays=ka;p.utcMonth=Wa;p.utcMonths=Za;p.utcSaturday=pa;p.utcSaturdays=Ha;p.utcSecond=l;p.utcSeconds=c;p.utcSunday=aa;p.utcSundays=la;p.utcThursday=
ra;p.utcThursdays=sa;p.utcTuesday=ma;p.utcTuesdays=na;p.utcWednesday=ia;p.utcWednesdays=oa;p.utcWeek=aa;p.utcWeeks=la;p.utcYear=bb;p.utcYears=sb;Object.defineProperty(p,"__esModule",{value:!0})})},{}],177:[function(b,N,G){arguments[4][176][0].apply(G,arguments)},{dup:176}],178:[function(b,N,G){(function(p,n){"object"===typeof G&&"undefined"!==typeof N?n(G):(p=p||self,n(p.d3=p.d3||{}))})(this,function(p){function n(){return w||(B(k),w=z.now()+x)}function k(){w=0}function m(){this._call=this._time=
this._next=null}function a(A,D,C){var v=new m;v.restart(A,D,C);return v}function g(){n();++c;for(var A=f,D;A;)0<=(D=w-A._time)&&A._call.call(null,D),A=A._next;--c}function h(){w=(t=z.now())+x;c=d=0;try{g()}finally{c=0;for(var A,D=f,C,v=Infinity;D;)D._call?(v>D._time&&(v=D._time),A=D,D=D._next):(C=D._next,D._next=null,D=A?A._next=C:f=C);q=A;l(v);w=0}}function r(){var A=z.now(),D=A-t;1E3<D&&(x-=D,t=A)}function l(A){c||(d&&(d=clearTimeout(d)),24<A-w?(Infinity>A&&(d=setTimeout(h,A-z.now()-x)),e&&(e=clearInterval(e))):
(e||(t=z.now(),e=setInterval(r,1E3)),c=1,B(h)))}var c=0,d=0,e=0,f,q,t=0,w=0,x=0,z="object"===typeof performance&&performance.now?performance:Date,B="object"===typeof window&&window.requestAnimationFrame?window.requestAnimationFrame.bind(window):function(A){setTimeout(A,17)};m.prototype=a.prototype={constructor:m,restart:function(A,D,C){if("function"!==typeof A)throw new TypeError("callback is not a function");C=(null==C?n():+C)+(null==D?0:+D);this._next||q===this||(q?q._next=this:f=this,q=this);this._call=
A;this._time=C;l()},stop:function(){this._call&&(this._call=null,this._time=Infinity,l())}};p.interval=function(A,D,C){var v=new m,y=D;if(null==D)return v.restart(A,D,C),v;D=+D;C=null==C?n():+C;v.restart(function K(J){J+=y;v.restart(K,y+=D,C);A(J)},D,C);return v};p.now=n;p.timeout=function(A,D,C){var v=new m;D=null==D?0:+D;v.restart(function(y){v.stop();A(y+D)},D,C);return v};p.timer=a;p.timerFlush=g;Object.defineProperty(p,"__esModule",{value:!0})})},{}],179:[function(b,N,G){N.exports=function(){for(var p=
0;p<arguments.length;p++)if(void 0!==arguments[p])return arguments[p]}},{}],180:[function(b,N,G){function p(g,h){this.point=g;this.index=h}function n(g,h){g=g.point;h=h.point;for(var r=g.length,l=0;l<r;++l){var c=h[l]-g[l];if(c)return c}return 0}function k(g,h,r){if(1===g)return r?[[-1,0]]:[];h=h.map(function(d,e){return[d[0],e]});h.sort(function(d,e){return d[0]-e[0]});for(var l=Array(g-1),c=1;c<g;++c)l[c-1]=[h[c-1][1],h[c][1]];r&&l.push([-1,l[0][1]],[l[g-1][1],-1]);return l}var m=b("incremental-convex-hull"),
a=b("uniq");N.exports=function(g,h){var r=g.length;if(0===r)return[];var l=g[0].length;if(1>l)return[];if(1===l)return k(r,g,h);for(var c=Array(r),d=1,e=0;e<r;++e){for(var f=g[e],q=Array(l+1),t=0,w=0;w<l;++w){var x=f[w];q[w]=x;t+=x*x}q[l]=t;c[e]=new p(q,e);d=Math.max(t,d)}a(c,n);r=c.length;g=Array(r+l+1);var z=Array(r+l+1);f=Array(l+1);for(e=0;e<=l;++e)f[e]=0;f[l]=(l+1)*(l+1)*d;g[0]=f.slice();z[0]=-1;for(e=0;e<=l;++e)q=f.slice(),q[e]=1,g[e+1]=q,z[e+1]=-1;for(e=0;e<r;++e)d=c[e],g[e+l+1]=d.point,z[e+
l+1]=d.index;r=m(g,!1);r=h?r.filter(function(B){for(var A=0,D=0;D<=l;++D){var C=z[B[D]];if(0>C&&2<=++A)return!1;B[D]=C}return!0}):r.filter(function(B){for(var A=0;A<=l;++A){var D=z[B[A]];if(0>D)return!1;B[A]=D}return!0});if(l&1)for(e=0;e<r.length;++e)d=r[e],q=d[0],d[0]=d[1],d[1]=q;return r}},{"incremental-convex-hull":446,uniq:619}],181:[function(b,N,G){function p(a,g){Array.isArray(a)&&(a=a.join(", "));var h={},r=16,l=.05;if(g)if(2===g.length&&"number"===typeof g[0])var c=n(g);else Array.isArray(g)?
c=g:(g.o?c=n(g.o):g.pairs&&(c=g.pairs),g.fontSize&&(r=g.fontSize),null!=g.threshold&&(l=g.threshold));c||(c=m);k.font=r+"px "+a;for(a=0;a<c.length;a++){g=c[a];var d=k.measureText(g[0]).width+k.measureText(g[1]).width,e=k.measureText(g).width;Math.abs(d-e)>r*l&&(h[g]=(e-d)/r*1E3)}return h}function n(a){for(var g=[],h=a[0];h<=a[1];h++)for(var r=String.fromCharCode(h),l=a[0];l<a[1];l++){var c=String.fromCharCode(l);g.push(r+c)}return g}N.exports=p;var k=(p.canvas=document.createElement("canvas")).getContext("2d"),
m=n([32,126]);p.createPairs=n;p.ascii=m},{}],182:[function(b,N,G){(function(p){(function(){var n=!1;if("undefined"!==typeof Float64Array){var k=new Float64Array(1),m=new Uint32Array(k.buffer);k[0]=1;n=!0;1072693248===m[1]?(N.exports=function(g){k[0]=g;return[m[0],m[1]]},N.exports.pack=function(g,h){m[0]=g;m[1]=h;return k[0]},N.exports.lo=function(g){k[0]=g;return m[0]},N.exports.hi=function(g){k[0]=g;return m[1]}):1072693248===m[0]?(N.exports=function(g){k[0]=g;return[m[1],m[0]]},N.exports.pack=function(g,
h){m[1]=g;m[0]=h;return k[0]},N.exports.lo=function(g){k[0]=g;return m[1]},N.exports.hi=function(g){k[0]=g;return m[0]}):n=!1}if(!n){var a=new p(8);N.exports=function(g){a.writeDoubleLE(g,0,!0);return[a.readUInt32LE(0,!0),a.readUInt32LE(4,!0)]};N.exports.pack=function(g,h){a.writeUInt32LE(g,0,!0);a.writeUInt32LE(h,4,!0);return a.readDoubleLE(0,!0)};N.exports.lo=function(g){a.writeDoubleLE(g,0,!0);return a.readUInt32LE(0,!0)};N.exports.hi=function(g){a.writeDoubleLE(g,0,!0);return a.readUInt32LE(4,
!0)}}N.exports.sign=function(g){return N.exports.hi(g)>>>31};N.exports.exponent=function(g){return(N.exports.hi(g)<<1>>>21)-1023};N.exports.fraction=function(g){var h=N.exports.lo(g);g=N.exports.hi(g);var r=g&1048575;g&2146435072&&(r+=1048576);return[h,r]};N.exports.denormalized=function(g){return!(N.exports.hi(g)&2146435072)}}).call(this)}).call(this,b("buffer").Buffer)},{buffer:117}],183:[function(b,N,G){var p=b("abs-svg-path"),n=b("normalize-svg-path"),k={M:"moveTo",C:"bezierCurveTo"};N.exports=
function(m,a){m.beginPath();n(p(a)).forEach(function(g){var h=g[0];g=g.slice(1);m[k[h]].apply(m,g)});m.closePath()}},{"abs-svg-path":71,"normalize-svg-path":485}],184:[function(b,N,G){N.exports=function(p){switch(p){case "int8":return Int8Array;case "int16":return Int16Array;case "int32":return Int32Array;case "uint8":return Uint8Array;case "uint16":return Uint16Array;case "uint32":return Uint32Array;case "float32":return Float32Array;case "float64":return Float64Array;case "array":return Array;case "uint8_clamped":return Uint8ClampedArray}}},
{}],185:[function(b,N,G){function p(n,k,m){var a=n[m]|0;if(0>=a)return[];var g=Array(a),h;if(m===n.length-1)for(h=0;h<a;++h)g[h]=k;else for(h=0;h<a;++h)g[h]=p(n,k,m+1);return g}N.exports=function(n,k){"undefined"===typeof k&&(k=0);switch(typeof n){case "number":if(0<n){n|=0;var m;var a=Array(n);for(m=0;m<n;++m)a[m]=k;return a}break;case "object":if("number"===typeof n.length)return p(n,k,0)}return[]}},{}],186:[function(b,N,G){function p(D,C,v){v=v||2;var y=C&&C.length,F=y?C[0]*v:D.length,J=n(D,0,
F,v,!0),K=[];if(!J||J.next===J.prev)return K;var M;if(y){var H=v;y=[];var O;var I=0;for(O=C.length;I<O;I++){var L=C[I]*H;var Q=I<O-1?C[I+1]*H:D.length;L=n(D,L,Q,H,!1);L===L.next&&(L.steiner=!0);Q=y;var Z=Q.push,ba=L,V=L;do{if(ba.x<V.x||ba.x===V.x&&ba.y<V.y)V=ba;ba=ba.next}while(ba!==L);Z.call(Q,V)}y.sort(g);for(I=0;I<y.length;I++){H=y[I];C=J;if(C=h(H,C))H=w(C,H),k(C,C.next),k(H,H.next);J=k(J,J.next)}}if(D.length>80*v){var S=M=D[0];var T=y=D[1];for(H=v;H<F;H+=v)I=D[H],C=D[H+1],I<S&&(S=I),C<T&&(T=C),
I>M&&(M=I),C>y&&(y=C);M=Math.max(M-S,y-T);M=0!==M?1/M:0}m(J,K,v,S,T,M);return K}function n(D,C,v,y,F){if(F===0<A(D,C,v,y))for(F=C;F<v;F+=y)var J=x(F,D[F],D[F+1],J);else for(F=v-y;F>=C;F-=y)J=x(F,D[F],D[F+1],J);J&&d(J,J.next)&&(z(J),J=J.next);return J}function k(D,C){if(!D)return D;C||(C=D);do{var v=!1;if(D.steiner||!d(D,D.next)&&0!==c(D.prev,D,D.next))D=D.next;else{z(D);D=C=D.prev;if(D===D.next)break;v=!0}}while(v||D!==C);return C}function m(D,C,v,y,F,J,K){if(D){if(!K&&J){var M=D,H=M;do null===H.z&&
(H.z=r(H.x,H.y,y,F,J)),H.prevZ=H.prev,H=H.nextZ=H.next;while(H!==M);H.prevZ.nextZ=null;H.prevZ=null;M=H;var O,I,L,Q,Z=1;do{H=M;var ba=M=null;for(I=0;H;){I++;var V=H;for(O=L=0;O<Z&&(L++,V=V.nextZ,V);O++);for(Q=Z;0<L||0<Q&&V;)0!==L&&(0===Q||!V||H.z<=V.z)?(O=H,H=H.nextZ,L--):(O=V,V=V.nextZ,Q--),ba?ba.nextZ=O:M=O,O.prevZ=ba,ba=O;H=V}ba.nextZ=null;Z*=2}while(1<I)}for(M=D;D.prev!==D.next;){H=D.prev;V=D.next;if(J)ba=a(D,y,F,J);else a:if(ba=D,I=ba.prev,L=ba,Z=ba.next,0<=c(I,L,Z))ba=!1;else{for(O=ba.next.next;O!==
ba.prev;){if(l(I.x,I.y,L.x,L.y,Z.x,Z.y,O.x,O.y)&&0<=c(O.prev,O,O.next)){ba=!1;break a}O=O.next}ba=!0}if(ba)C.push(H.i/v),C.push(D.i/v),C.push(V.i/v),z(D),M=D=V.next;else if(D=V,D===M){if(!K)m(k(D),C,v,y,F,J,1);else if(1===K){D=k(D);K=C;M=v;H=D;do V=H.prev,ba=H.next.next,!d(V,ba)&&e(V,H,H.next,ba)&&t(V,ba)&&t(ba,V)&&(K.push(V.i/M),K.push(H.i/M),K.push(ba.i/M),z(H),z(H.next),H=D=ba),H=H.next;while(H!==D);D=k(H);m(D,C,v,y,F,J,2)}else if(2===K)a:{K=D;do{for(M=K.next.next;M!==K.prev;){if(H=K.i!==M.i){H=
K;V=M;if(ba=H.next.i!==V.i&&H.prev.i!==V.i){b:{ba=H;do{if(ba.i!==H.i&&ba.next.i!==H.i&&ba.i!==V.i&&ba.next.i!==V.i&&e(ba,ba.next,H,V)){ba=!0;break b}ba=ba.next}while(ba!==H);ba=!1}ba=!ba}if(ba){if(ba=t(H,V)&&t(V,H)){ba=H;I=!1;L=(H.x+V.x)/2;Z=(H.y+V.y)/2;do ba.y>Z!==ba.next.y>Z&&ba.next.y!==ba.y&&L<(ba.next.x-ba.x)*(Z-ba.y)/(ba.next.y-ba.y)+ba.x&&(I=!I),ba=ba.next;while(ba!==H);ba=I}ba=ba&&(c(H.prev,H,V.prev)||c(H,V.prev,V))||d(H,V)&&0<c(H.prev,H,H.next)&&0<c(V.prev,V,V.next)}H=ba}if(H){D=w(K,M);K=
k(K,K.next);D=k(D,D.next);m(K,C,v,y,F,J);m(D,C,v,y,F,J);break a}M=M.next}K=K.next}while(K!==D)}break}}}}function a(D,C,v,y){var F=D.prev,J=D.next;if(0<=c(F,D,J))return!1;var K=F.x>D.x?F.x>J.x?F.x:J.x:D.x>J.x?D.x:J.x,M=F.y>D.y?F.y>J.y?F.y:J.y:D.y>J.y?D.y:J.y,H=r(F.x<D.x?F.x<J.x?F.x:J.x:D.x<J.x?D.x:J.x,F.y<D.y?F.y<J.y?F.y:J.y:D.y<J.y?D.y:J.y,C,v,y);C=r(K,M,C,v,y);v=D.prevZ;for(y=D.nextZ;v&&v.z>=H&&y&&y.z<=C;){if(v!==D.prev&&v!==D.next&&l(F.x,F.y,D.x,D.y,J.x,J.y,v.x,v.y)&&0<=c(v.prev,v,v.next))return!1;
v=v.prevZ;if(y!==D.prev&&y!==D.next&&l(F.x,F.y,D.x,D.y,J.x,J.y,y.x,y.y)&&0<=c(y.prev,y,y.next))return!1;y=y.nextZ}for(;v&&v.z>=H;){if(v!==D.prev&&v!==D.next&&l(F.x,F.y,D.x,D.y,J.x,J.y,v.x,v.y)&&0<=c(v.prev,v,v.next))return!1;v=v.prevZ}for(;y&&y.z<=C;){if(y!==D.prev&&y!==D.next&&l(F.x,F.y,D.x,D.y,J.x,J.y,y.x,y.y)&&0<=c(y.prev,y,y.next))return!1;y=y.nextZ}return!0}function g(D,C){return D.x-C.x}function h(D,C){var v=C,y=D.x,F=D.y,J=-Infinity;do{if(F<=v.y&&F>=v.next.y&&v.next.y!==v.y){var K=v.x+(F-v.y)*
(v.next.x-v.x)/(v.next.y-v.y);if(K<=y&&K>J){J=K;if(K===y){if(F===v.y)return v;if(F===v.next.y)return v.next}var M=v.x<v.next.x?v:v.next}}v=v.next}while(v!==C);if(!M)return null;if(y===J)return M;C=M;K=M.x;var H=M.y,O=Infinity;v=M;do{if(y>=v.x&&v.x>=K&&y!==v.x&&l(F<H?y:J,F,K,H,F<H?J:y,F,v.x,v.y)){var I=Math.abs(F-v.y)/(y-v.x);var L;if((L=t(v,D))&&!(L=I<O)&&(L=I===O)&&!(L=v.x>M.x)&&(L=v.x===M.x)){L=M;var Q=v;L=0>c(L.prev,L,Q.prev)&&0>c(Q.next,L,L.next)}L&&(M=v,O=I)}v=v.next}while(v!==C);return M}function r(D,
C,v,y,F){D=32767*(D-v)*F;C=32767*(C-y)*F;D=(D|D<<8)&16711935;D=(D|D<<4)&252645135;D=(D|D<<2)&858993459;C=(C|C<<8)&16711935;C=(C|C<<4)&252645135;C=(C|C<<2)&858993459;return(D|D<<1)&1431655765|((C|C<<1)&1431655765)<<1}function l(D,C,v,y,F,J,K,M){return 0<=(F-K)*(C-M)-(D-K)*(J-M)&&0<=(D-K)*(y-M)-(v-K)*(C-M)&&0<=(v-K)*(J-M)-(F-K)*(y-M)}function c(D,C,v){return(C.y-D.y)*(v.x-C.x)-(C.x-D.x)*(v.y-C.y)}function d(D,C){return D.x===C.x&&D.y===C.y}function e(D,C,v,y){var F=q(c(D,C,v)),J=q(c(D,C,y)),K=q(c(v,
y,D)),M=q(c(v,y,C));return F!==J&&K!==M||0===F&&f(D,v,C)||0===J&&f(D,y,C)||0===K&&f(v,D,y)||0===M&&f(v,C,y)?!0:!1}function f(D,C,v){return C.x<=Math.max(D.x,v.x)&&C.x>=Math.min(D.x,v.x)&&C.y<=Math.max(D.y,v.y)&&C.y>=Math.min(D.y,v.y)}function q(D){return 0<D?1:0>D?-1:0}function t(D,C){return 0>c(D.prev,D,D.next)?0<=c(D,C,D.next)&&0<=c(D,D.prev,C):0>c(D,C,D.prev)||0>c(D,D.next,C)}function w(D,C){var v=new B(D.i,D.x,D.y),y=new B(C.i,C.x,C.y),F=D.next,J=C.prev;D.next=C;C.prev=D;v.next=F;F.prev=v;y.next=
v;v.prev=y;J.next=y;y.prev=J;return y}function x(D,C,v,y){D=new B(D,C,v);y?(D.next=y.next,D.prev=y,y.next.prev=D,y.next=D):(D.prev=D,D.next=D);return D}function z(D){D.next.prev=D.prev;D.prev.next=D.next;D.prevZ&&(D.prevZ.nextZ=D.nextZ);D.nextZ&&(D.nextZ.prevZ=D.prevZ)}function B(D,C,v){this.i=D;this.x=C;this.y=v;this.nextZ=this.prevZ=this.z=this.next=this.prev=null;this.steiner=!1}function A(D,C,v,y){for(var F=0,J=v-y;C<v;C+=y)F+=(D[J]-D[C])*(D[C+1]+D[J+1]),J=C;return F}N.exports=p;N.exports.default=
p;p.deviation=function(D,C,v,y){var F=C&&C.length,J=Math.abs(A(D,0,F?C[0]*v:D.length,v));if(F){F=0;for(var K=C.length;F<K;F++)J-=Math.abs(A(D,C[F]*v,F<K-1?C[F+1]*v:D.length,v))}for(F=C=0;F<y.length;F+=3){K=y[F]*v;var M=y[F+1]*v,H=y[F+2]*v;C+=Math.abs((D[K]-D[H])*(D[M+1]-D[K+1])-(D[K]-D[M])*(D[H+1]-D[K+1]))}return 0===J&&0===C?0:Math.abs((C-J)/J)};p.flatten=function(D){for(var C=D[0][0].length,v={vertices:[],holes:[],dimensions:C},y=0,F=0;F<D.length;F++){for(var J=0;J<D[F].length;J++)for(var K=0;K<
C;K++)v.vertices.push(D[F][J][K]);0<F&&(y+=D[F-1].length,v.holes.push(y))}return v}},{}],187:[function(b,N,G){N.exports=function(n,k){var m=n.length;if("number"!==typeof k){for(var a=k=0;a<m;++a){var g=n[a];k=Math.max(k,g[0],g[1])}k=(k|0)+1}k|=0;var h=Array(k);for(a=0;a<k;++a)h[a]=[];for(a=0;a<m;++a)g=n[a],h[g[0]].push(g[1]),h[g[1]].push(g[0]);for(n=0;n<k;++n)p(h[n],function(r,l){return r-l});return h};var p=b("uniq")},{uniq:619}],188:[function(b,N,G){var p=b("strongly-connected-components");N.exports=
function(n,k){function m(z){c[z]=!1;d.hasOwnProperty(z)&&Object.keys(d[z]).forEach(function(B){delete d[z][B];c[B]&&m(B)})}function a(z){var B=!1;l.push(z);c[z]=!0;var A;for(A=0;A<e[z].length;A++){var D=e[z][A];D===f?(B=f,B=[].concat(l).concat(B),k?k(a):r.push(B),B=!0):c[D]||(B=a(D))}if(B)m(z);else for(A=0;A<e[z].length;A++){D=e[z][A];var C=d[D];C||(C={},d[D]=C);C[D]=!0}l.pop();return B}function g(z){for(var B=0;B<n.length;B++)B<z&&(n[B]=[]),n[B]=n[B].filter(function(A){return A>=z})}function h(z){g(z);
var B=p(n).components.filter(function(y){return 1<y.length});z=Infinity;for(var A,D=0;D<B.length;D++)for(var C=0;C<B[D].length;C++)B[D][C]<z&&(z=B[D][C],A=D);var v=B[A];if(!v)return!1;A=n.map(function(y,F){return-1===v.indexOf(F)?[]:y.filter(function(J){return-1!==v.indexOf(J)})});return{leastVertex:z,adjList:A}}var r=[],l=[],c=[],d={},e=[];var f=0;for(var q=n.length;f<q;){var t=h(f);f=t.leastVertex;if(e=t.adjList){for(t=0;t<e.length;t++)for(var w=0;w<e[t].length;w++){var x=e[t][w];c[+x]=!1;d[x]=
{}}a(f);f+=1}else f=q}if(!k)return r}},{"strongly-connected-components":590}],189:[function(b,N,G){var p=b("../../object/valid-value");N.exports=function(){p(this).length=0;return this}},{"../../object/valid-value":220}],190:[function(b,N,G){N.exports=b("./is-implemented")()?Array.from:b("./shim")},{"./is-implemented":191,"./shim":192}],191:[function(b,N,G){N.exports=function(){var p=Array.from;if("function"!==typeof p)return!1;var n=["raz","dwa"];p=p(n);return!(!p||p===n||"dwa"!==p[1])}},{}],192:[function(b,
N,G){var p=b("es6-symbol").iterator,n=b("../../function/is-arguments"),k=b("../../function/is-function"),m=b("../../number/to-pos-integer"),a=b("../../object/valid-callable"),g=b("../../object/valid-value"),h=b("../../object/is-value"),r=b("../../string/is-string"),l=Array.isArray,c=Function.prototype.call,d={configurable:!0,enumerable:!0,writable:!0,value:null},e=Object.defineProperty;N.exports=function(f,q,t){var w,x;f=Object(g(f));h(q)&&a(q);if(this&&this!==Array&&k(this))var z=this;else{if(!q){if(n(f)){var B=
f.length;if(1!==B)return Array.apply(null,f);var A=Array(1);A[0]=f[0];return A}if(l(f)){A=Array(B=f.length);for(w=0;w<B;++w)A[w]=f[w];return A}}A=[]}if(!l(f))if(void 0!==(w=f[p])){B=a(w).call(f);z&&(A=new z);var D=B.next();for(w=0;!D.done;)D=q?c.call(q,t,D.value,w):D.value,z?(d.value=D,e(A,w,d)):A[w]=D,D=B.next(),++w;B=w}else if(r(f)){B=f.length;z&&(A=new z);for(x=w=0;w<B;++w){D=f[w];if(w+1<B){var C=D.charCodeAt(0);55296<=C&&56319>=C&&(D+=f[++w])}D=q?c.call(q,t,D,x):D;z?(d.value=D,e(A,x,d)):A[x]=
D;++x}B=x}if(void 0===B)for(B=m(f.length),z&&(A=new z(B)),w=0;w<B;++w)D=q?c.call(q,t,f[w],w):f[w],z?(d.value=D,e(A,w,d)):A[w]=D;z&&(d.value=null,A.length=B);return A}},{"../../function/is-arguments":193,"../../function/is-function":194,"../../number/to-pos-integer":200,"../../object/is-value":209,"../../object/valid-callable":218,"../../object/valid-value":220,"../../string/is-string":224,"es6-symbol":233}],193:[function(b,N,G){var p=Object.prototype.toString,n=p.call(function(){return arguments}());
N.exports=function(k){return p.call(k)===n}},{}],194:[function(b,N,G){var p=Object.prototype.toString,n=RegExp.prototype.test.bind(/^[object [A-Za-z0-9]*Function]$/);N.exports=function(k){return"function"===typeof k&&n(p.call(k))}},{}],195:[function(b,N,G){N.exports=function(){}},{}],196:[function(b,N,G){N.exports=b("./is-implemented")()?Math.sign:b("./shim")},{"./is-implemented":197,"./shim":198}],197:[function(b,N,G){N.exports=function(){var p=Math.sign;return"function"!==typeof p?!1:1===p(10)&&
-1===p(-20)}},{}],198:[function(b,N,G){N.exports=function(p){p=Number(p);return isNaN(p)||0===p?p:0<p?1:-1}},{}],199:[function(b,N,G){var p=b("../math/sign"),n=Math.abs,k=Math.floor;N.exports=function(m){if(isNaN(m))return 0;m=Number(m);return 0!==m&&isFinite(m)?p(m)*k(n(m)):m}},{"../math/sign":196}],200:[function(b,N,G){var p=b("./to-integer"),n=Math.max;N.exports=function(k){return n(0,p(k))}},{"./to-integer":199}],201:[function(b,N,G){var p=b("./valid-callable"),n=b("./valid-value"),k=Function.prototype.bind,
m=Function.prototype.call,a=Object.keys,g=Object.prototype.propertyIsEnumerable;N.exports=function(h,r){return function(l,c,d,e){l=Object(n(l));p(c);var f=a(l);e&&f.sort("function"===typeof e?k.call(e,l):void 0);"function"!==typeof h&&(h=f[h]);return m.call(h,f,function(q,t){return g.call(l,q)?m.call(c,d,l[q],q,l,t):r})}}},{"./valid-callable":218,"./valid-value":220}],202:[function(b,N,G){N.exports=b("./is-implemented")()?Object.assign:b("./shim")},{"./is-implemented":203,"./shim":204}],203:[function(b,
N,G){N.exports=function(){var p=Object.assign;if("function"!==typeof p)return!1;var n={foo:"raz"};p(n,{bar:"dwa"},{trzy:"trzy"});return"razdwatrzy"===n.foo+n.bar+n.trzy}},{}],204:[function(b,N,G){var p=b("../keys"),n=b("../valid-value"),k=Math.max;N.exports=function(m,a){var g,h,r=k(arguments.length,2);m=Object(n(m));var l=function(c){try{m[c]=a[c]}catch(d){g||(g=d)}};for(h=1;h<r;++h)a=arguments[h],p(a).forEach(l);if(void 0!==g)throw g;return m}},{"../keys":210,"../valid-value":220}],205:[function(b,
N,G){var p=b("../array/from"),n=b("./assign"),k=b("./valid-value");N.exports=function(m,a,g){var h=Object(k(m)),r=Object(g);if(h!==m&&!a)return h;var l={};a?p(a,function(c){if(r.ensure||c in m)l[c]=m[c]}):n(l,m);return l}},{"../array/from":190,"./assign":202,"./valid-value":220}],206:[function(b,N,G){var p=Object.create,n;b("./set-prototype-of/is-implemented")()||(n=b("./set-prototype-of/shim"));N.exports=function(){if(!n||1!==n.level)return p;var k={};var m={};var a={configurable:!1,enumerable:!1,
writable:!0,value:void 0};Object.getOwnPropertyNames(Object.prototype).forEach(function(g){m[g]="__proto__"===g?{configurable:!0,enumerable:!1,writable:!0,value:void 0}:a});Object.defineProperties(k,m);Object.defineProperty(n,"nullPolyfill",{configurable:!1,enumerable:!1,writable:!1,value:k});return function(g,h){return p(null===g?k:g,h)}}()},{"./set-prototype-of/is-implemented":216,"./set-prototype-of/shim":217}],207:[function(b,N,G){N.exports=b("./_iterate")("forEach")},{"./_iterate":201}],208:[function(b,
N,G){var p=b("./is-value"),n={function:!0,object:!0};N.exports=function(k){return p(k)&&n[typeof k]||!1}},{"./is-value":209}],209:[function(b,N,G){var p=b("../function/noop")();N.exports=function(n){return n!==p&&null!==n}},{"../function/noop":195}],210:[function(b,N,G){N.exports=b("./is-implemented")()?Object.keys:b("./shim")},{"./is-implemented":211,"./shim":212}],211:[function(b,N,G){N.exports=function(){try{return Object.keys("primitive"),!0}catch(p){return!1}}},{}],212:[function(b,N,G){var p=
b("../is-value"),n=Object.keys;N.exports=function(k){return n(p(k)?Object(k):k)}},{"../is-value":209}],213:[function(b,N,G){var p=b("./valid-callable"),n=b("./for-each"),k=Function.prototype.call;N.exports=function(m,a,g){var h={};p(a);n(m,function(r,l,c,d){h[l]=k.call(a,g,r,l,c,d)});return h}},{"./for-each":207,"./valid-callable":218}],214:[function(b,N,G){var p=b("./is-value"),n=Array.prototype.forEach,k=Object.create;N.exports=function(m){var a=k(null);n.call(arguments,function(g){if(p(g)){g=Object(g);
for(var h in g)a[h]=g[h]}});return a}},{"./is-value":209}],215:[function(b,N,G){N.exports=b("./is-implemented")()?Object.setPrototypeOf:b("./shim")},{"./is-implemented":216,"./shim":217}],216:[function(b,N,G){var p=Object.create,n=Object.getPrototypeOf,k={};N.exports=function(m){var a=Object.setPrototypeOf;return"function"!==typeof a?!1:n(a((m||p)(null),k))===k}},{}],217:[function(b,N,G){var p=b("../is-object"),n=b("../valid-value"),k=Object.prototype.isPrototypeOf,m=Object.defineProperty,a={configurable:!0,
enumerable:!1,writable:!0,value:void 0};var g=function(h,r){n(h);if(null===r||p(r))return h;throw new TypeError("Prototype must be null or an object");};N.exports=function(h){if(!h)return null;if(2===h.level)if(h.set){var r=h.set;var l=function(c,d){r.call(g(c,d),d);return c}}else l=function(c,d){g(c,d).__proto__=d;return c};else l=function f(d,e){var q;g(d,e);(q=k.call(f.nullPolyfill,d))&&delete f.nullPolyfill.__proto__;null===e&&(e=f.nullPolyfill);d.__proto__=e;q&&m(f.nullPolyfill,"__proto__",a);
return d};return Object.defineProperty(l,"level",{configurable:!1,enumerable:!1,writable:!1,value:h.level})}(function(){var h=Object.create(null),r={},l=Object.getOwnPropertyDescriptor(Object.prototype,"__proto__");if(l){try{var c=l.set;c.call(h,r)}catch(d){}if(Object.getPrototypeOf(h)===r)return{set:c,level:2}}h.__proto__=r;if(Object.getPrototypeOf(h)===r)return{level:2};h={};h.__proto__=r;return Object.getPrototypeOf(h)===r?{level:1}:!1}());b("../create")},{"../create":206,"../is-object":208,"../valid-value":220}],
218:[function(b,N,G){N.exports=function(p){if("function"!==typeof p)throw new TypeError(p+" is not a function");return p}},{}],219:[function(b,N,G){var p=b("./is-object");N.exports=function(n){if(!p(n))throw new TypeError(n+" is not an Object");return n}},{"./is-object":208}],220:[function(b,N,G){var p=b("./is-value");N.exports=function(n){if(!p(n))throw new TypeError("Cannot use null or undefined");return n}},{"./is-value":209}],221:[function(b,N,G){N.exports=b("./is-implemented")()?String.prototype.contains:
b("./shim")},{"./is-implemented":222,"./shim":223}],222:[function(b,N,G){N.exports=function(){return"function"!==typeof"razdwatrzy".contains?!1:!0==="razdwatrzy".contains("dwa")&&!1==="razdwatrzy".contains("foo")}},{}],223:[function(b,N,G){var p=String.prototype.indexOf;N.exports=function(n,k){return-1<p.call(this,n,k)}},{}],224:[function(b,N,G){var p=Object.prototype.toString,n=p.call("");N.exports=function(k){return"string"===typeof k||k&&"object"===typeof k&&(k instanceof String||p.call(k)===n)||
!1}},{}],225:[function(b,N,G){var p=Object.create(null),n=Math.random;N.exports=function(){do var k=n().toString(36).slice(2);while(p[k]);return k}},{}],226:[function(b,N,G){G=b("es5-ext/object/set-prototype-of");var p=b("es5-ext/string/#/contains"),n=b("d"),k=b("es6-symbol"),m=b("./"),a=Object.defineProperty;var g=N.exports=function(h,r){if(!(this instanceof g))throw new TypeError("Constructor requires 'new'");m.call(this,h);r=r?p.call(r,"key+value")?"key+value":p.call(r,"key")?"key":"value":"value";
a(this,"__kind__",n("",r))};G&&G(g,m);delete g.prototype.constructor;g.prototype=Object.create(m.prototype,{_resolve:n(function(h){return"value"===this.__kind__?this.__list__[h]:"key+value"===this.__kind__?[h,this.__list__[h]]:h})});a(g.prototype,k.toStringTag,n("c","Array Iterator"))},{"./":229,d:161,"es5-ext/object/set-prototype-of":215,"es5-ext/string/#/contains":221,"es6-symbol":233}],227:[function(b,N,G){var p=b("es5-ext/function/is-arguments"),n=b("es5-ext/object/valid-callable"),k=b("es5-ext/string/is-string"),
m=b("./get"),a=Array.isArray,g=Function.prototype.call,h=Array.prototype.some;N.exports=function(r,l,c){var d,e;a(r)||p(r)?d="array":k(r)?d="string":r=m(r);n(l);var f=function(){e=!0};if("array"===d)h.call(r,function(x){g.call(l,c,x,f);return e});else if("string"===d){var q=r.length;for(d=0;d<q;++d){var t=r[d];if(d+1<q){var w=t.charCodeAt(0);55296<=w&&56319>=w&&(t+=r[++d])}g.call(l,c,t,f);if(e)break}}else for(d=r.next();!d.done;){g.call(l,c,d.value,f);if(e)break;d=r.next()}}},{"./get":228,"es5-ext/function/is-arguments":193,
"es5-ext/object/valid-callable":218,"es5-ext/string/is-string":224}],228:[function(b,N,G){var p=b("es5-ext/function/is-arguments"),n=b("es5-ext/string/is-string"),k=b("./array"),m=b("./string"),a=b("./valid-iterable"),g=b("es6-symbol").iterator;N.exports=function(h){return"function"===typeof a(h)[g]?h[g]():p(h)?new k(h):n(h)?new m(h):new k(h)}},{"./array":226,"./string":231,"./valid-iterable":232,"es5-ext/function/is-arguments":193,"es5-ext/string/is-string":224,"es6-symbol":233}],229:[function(b,
N,G){var p=b("es5-ext/array/#/clear");G=b("es5-ext/object/assign");var n=b("es5-ext/object/valid-callable"),k=b("es5-ext/object/valid-value"),m=b("d"),a=b("d/auto-bind"),g=b("es6-symbol"),h=Object.defineProperty,r=Object.defineProperties,l;N.exports=l=function(c,d){if(!(this instanceof l))throw new TypeError("Constructor requires 'new'");r(this,{__list__:m("w",k(c)),__context__:m("w",d),__nextIndex__:m("w",0)});d&&(n(d.on),d.on("_add",this._onAdd),d.on("_delete",this._onDelete),d.on("_clear",this._onClear))};
delete l.prototype.constructor;r(l.prototype,G({_next:m(function(){if(this.__list__){if(this.__redo__){var c=this.__redo__.shift();if(void 0!==c)return c}if(this.__nextIndex__<this.__list__.length)return this.__nextIndex__++;this._unBind()}}),next:m(function(){return this._createResult(this._next())}),_createResult:m(function(c){return void 0===c?{done:!0,value:void 0}:{done:!1,value:this._resolve(c)}}),_resolve:m(function(c){return this.__list__[c]}),_unBind:m(function(){this.__list__=null;delete this.__redo__;
this.__context__&&(this.__context__.off("_add",this._onAdd),this.__context__.off("_delete",this._onDelete),this.__context__.off("_clear",this._onClear),this.__context__=null)}),toString:m(function(){return"[object "+(this[g.toStringTag]||"Object")+"]"})},a({_onAdd:m(function(c){c>=this.__nextIndex__||(++this.__nextIndex__,this.__redo__?(this.__redo__.forEach(function(d,e){d>=c&&(this.__redo__[e]=++d)},this),this.__redo__.push(c)):h(this,"__redo__",m("c",[c])))}),_onDelete:m(function(c){if(!(c>=this.__nextIndex__)&&
(--this.__nextIndex__,this.__redo__)){var d=this.__redo__.indexOf(c);-1!==d&&this.__redo__.splice(d,1);this.__redo__.forEach(function(e,f){e>c&&(this.__redo__[f]=--e)},this)}}),_onClear:m(function(){this.__redo__&&p.call(this.__redo__);this.__nextIndex__=0})})));h(l.prototype,g.iterator,m(function(){return this}))},{d:161,"d/auto-bind":160,"es5-ext/array/#/clear":189,"es5-ext/object/assign":202,"es5-ext/object/valid-callable":218,"es5-ext/object/valid-value":220,"es6-symbol":233}],230:[function(b,
N,G){var p=b("es5-ext/function/is-arguments"),n=b("es5-ext/object/is-value"),k=b("es5-ext/string/is-string"),m=b("es6-symbol").iterator,a=Array.isArray;N.exports=function(g){return n(g)?a(g)||k(g)||p(g)?!0:"function"===typeof g[m]:!1}},{"es5-ext/function/is-arguments":193,"es5-ext/object/is-value":209,"es5-ext/string/is-string":224,"es6-symbol":233}],231:[function(b,N,G){G=b("es5-ext/object/set-prototype-of");var p=b("d"),n=b("es6-symbol"),k=b("./"),m=Object.defineProperty;var a=N.exports=function(g){if(!(this instanceof
a))throw new TypeError("Constructor requires 'new'");g=String(g);k.call(this,g);m(this,"__length__",p("",g.length))};G&&G(a,k);delete a.prototype.constructor;a.prototype=Object.create(k.prototype,{_next:p(function(){if(this.__list__){if(this.__nextIndex__<this.__length__)return this.__nextIndex__++;this._unBind()}}),_resolve:p(function(g){g=this.__list__[g];if(this.__nextIndex__===this.__length__)return g;var h=g.charCodeAt(0);return 55296<=h&&56319>=h?g+this.__list__[this.__nextIndex__++]:g})});
m(a.prototype,n.toStringTag,p("c","String Iterator"))},{"./":229,d:161,"es5-ext/object/set-prototype-of":215,"es6-symbol":233}],232:[function(b,N,G){var p=b("./is-iterable");N.exports=function(n){if(!p(n))throw new TypeError(n+" is not iterable");return n}},{"./is-iterable":230}],233:[function(b,N,G){N.exports=b("./is-implemented")()?b("ext/global-this").Symbol:b("./polyfill")},{"./is-implemented":234,"./polyfill":239,"ext/global-this":246}],234:[function(b,N,G){var p=b("ext/global-this"),n={object:!0,
symbol:!0};N.exports=function(){var k=p.Symbol;if("function"!==typeof k)return!1;var m=k("test symbol");try{String(m)}catch(a){return!1}return n[typeof k.iterator]&&n[typeof k.toPrimitive]&&n[typeof k.toStringTag]?!0:!1}},{"ext/global-this":246}],235:[function(b,N,G){N.exports=function(p){return p?"symbol"===typeof p?!0:p.constructor&&"Symbol"===p.constructor.name?"Symbol"===p[p.constructor.toStringTag]:!1:!1}},{}],236:[function(b,N,G){var p=b("d");b=Object.create;var n=Object.defineProperty,k=Object.prototype,
m=b(null);N.exports=function(a){for(var g=0,h,r;m[a+(g||"")];)++g;a+=g||"";m[a]=!0;h="@@"+a;n(k,h,p.gs(null,function(l){r||(r=!0,n(this,h,p(l)),r=!1)}));return h}},{d:161}],237:[function(b,N,G){var p=b("d"),n=b("ext/global-this").Symbol;N.exports=function(k){return Object.defineProperties(k,{hasInstance:p("",n&&n.hasInstance||k("hasInstance")),isConcatSpreadable:p("",n&&n.isConcatSpreadable||k("isConcatSpreadable")),iterator:p("",n&&n.iterator||k("iterator")),match:p("",n&&n.match||k("match")),replace:p("",
n&&n.replace||k("replace")),search:p("",n&&n.search||k("search")),species:p("",n&&n.species||k("species")),split:p("",n&&n.split||k("split")),toPrimitive:p("",n&&n.toPrimitive||k("toPrimitive")),toStringTag:p("",n&&n.toStringTag||k("toStringTag")),unscopables:p("",n&&n.unscopables||k("unscopables"))})}},{d:161,"ext/global-this":246}],238:[function(b,N,G){var p=b("d"),n=b("../../../validate-symbol"),k=Object.create(null);N.exports=function(m){return Object.defineProperties(m,{for:p(function(a){return k[a]?
k[a]:k[a]=m(String(a))}),keyFor:p(function(a){var g;n(a);for(g in k)if(k[g]===a)return g})})}},{"../../../validate-symbol":240,d:161}],239:[function(b,N,G){var p=b("d"),n=b("./validate-symbol"),k=b("ext/global-this").Symbol,m=b("./lib/private/generate-name");G=b("./lib/private/setup/standard-symbols");b=b("./lib/private/setup/symbol-registry");var a=Object.create,g=Object.defineProperties,h=Object.defineProperty,r;if("function"===typeof k)try{String(k());var l=!0}catch(d){}else k=null;var c=function(d){if(this instanceof
c)throw new TypeError("Symbol is not a constructor");return r(d)};N.exports=r=function f(e){if(this instanceof f)throw new TypeError("Symbol is not a constructor");if(l)return k(e);var q=a(c.prototype);e=void 0===e?"":String(e);return g(q,{__description__:p("",e),__name__:p("",m(e))})};G(r);b(r);g(c.prototype,{constructor:p(r),toString:p("",function(){return this.__name__})});g(r.prototype,{toString:p(function(){return"Symbol ("+n(this).__description__+")"}),valueOf:p(function(){return n(this)})});
h(r.prototype,r.toPrimitive,p("",function(){var e=n(this);return"symbol"===typeof e?e:e.toString()}));h(r.prototype,r.toStringTag,p("c","Symbol"));h(c.prototype,r.toStringTag,p("c",r.prototype[r.toStringTag]));h(c.prototype,r.toPrimitive,p("c",r.prototype[r.toPrimitive]))},{"./lib/private/generate-name":236,"./lib/private/setup/standard-symbols":237,"./lib/private/setup/symbol-registry":238,"./validate-symbol":240,d:161,"ext/global-this":246}],240:[function(b,N,G){var p=b("./is-symbol");N.exports=
function(n){if(!p(n))throw new TypeError(n+" is not a symbol");return n}},{"./is-symbol":235}],241:[function(b,N,G){N.exports=b("./is-implemented")()?WeakMap:b("./polyfill")},{"./is-implemented":242,"./polyfill":244}],242:[function(b,N,G){N.exports=function(){var p;if("function"!==typeof WeakMap)return!1;try{var n=new WeakMap([[p={},"one"],[{},"two"],[{},"three"]])}catch(k){return!1}return"[object WeakMap]"!==String(n)||"function"!==typeof n.set||n.set({},1)!==n||"function"!==typeof n.delete||"function"!==
typeof n.has||"one"!==n.get(p)?!1:!0}},{}],243:[function(b,N,G){b="function"!==typeof WeakMap?!1:"[object WeakMap]"===Object.prototype.toString.call(new WeakMap);N.exports=b},{}],244:[function(b,N,G){var p=b("es5-ext/object/is-value"),n=b("es5-ext/object/set-prototype-of"),k=b("es5-ext/object/valid-object"),m=b("es5-ext/object/valid-value"),a=b("es5-ext/string/random-uniq"),g=b("d"),h=b("es6-iterator/get"),r=b("es6-iterator/for-of");G=b("es6-symbol").toStringTag;var l=b("./is-native-implemented"),
c=Array.isArray,d=Object.defineProperty,e=Object.prototype.hasOwnProperty,f=Object.getPrototypeOf,q;N.exports=q=function(t){if(!(this instanceof q))throw new TypeError("Constructor requires 'new'");var w=l&&n&&WeakMap!==q?n(new WeakMap,f(this)):this;p(t)&&(c(t)||(t=h(t)));d(w,"__weakMapData__",g("c","$weakMap$"+a()));if(!t)return w;r(t,function(x){m(x);w.set(x[0],x[1])});return w};l&&(n&&n(q,WeakMap),q.prototype=Object.create(WeakMap.prototype,{constructor:g(q)}));Object.defineProperties(q.prototype,
{delete:g(function(t){return e.call(k(t),this.__weakMapData__)?(delete t[this.__weakMapData__],!0):!1}),get:g(function(t){if(e.call(k(t),this.__weakMapData__))return t[this.__weakMapData__]}),has:g(function(t){return e.call(k(t),this.__weakMapData__)}),set:g(function(t,w){d(k(t),this.__weakMapData__,g("c",w));return this}),toString:g(function(){return"[object WeakMap]"})});d(q.prototype,G,g("c","WeakMap"))},{"./is-native-implemented":243,d:161,"es5-ext/object/is-value":209,"es5-ext/object/set-prototype-of":215,
"es5-ext/object/valid-object":219,"es5-ext/object/valid-value":220,"es5-ext/string/random-uniq":225,"es6-iterator/for-of":227,"es6-iterator/get":228,"es6-symbol":233}],245:[function(b,N,G){var p=function(){if("object"===typeof self&&self)return self;if("object"===typeof window&&window)return window;throw Error("Unable to resolve global `this`");};N.exports=function(){if(this)return this;try{Object.defineProperty(Object.prototype,"__global__",{get:function(){return this},configurable:!0})}catch(n){return p()}try{return __global__?
__global__:p()}finally{delete Object.prototype.__global__}}()},{}],246:[function(b,N,G){N.exports=b("./is-implemented")()?globalThis:b("./implementation")},{"./implementation":245,"./is-implemented":247}],247:[function(b,N,G){N.exports=function(){return"object"===typeof globalThis&&globalThis?globalThis.Array===Array:!1}},{}],248:[function(b,N,G){N.exports=function(p,n,k){n=n||0;k=k||1;return[[p[12]+p[0],p[13]+p[1],p[14]+p[2],p[15]+p[3]],[p[12]-p[0],p[13]-p[1],p[14]-p[2],p[15]-p[3]],[p[12]+p[4],p[13]+
p[5],p[14]+p[6],p[15]+p[7]],[p[12]-p[4],p[13]-p[5],p[14]-p[6],p[15]-p[7]],[n*p[12]+p[8],n*p[13]+p[9],n*p[14]+p[10],n*p[15]+p[11]],[k*p[12]-p[8],k*p[13]-p[9],k*p[14]-p[10],k*p[15]-p[11]]]}},{}],249:[function(b,N,G){var p=b("is-string-blank");N.exports=function(n){var k=typeof n;if("string"===k){if(k=n,n=+n,0===n&&p(k))return!1}else if("number"!==k)return!1;return 1>n-n}},{"is-string-blank":458}],250:[function(b,N,G){function p(g,h,r){return Math.min(h,Math.max(g,r))}function n(g,h,r){this.dimension=
g.length;this.bounds=[Array(this.dimension),Array(this.dimension)];for(var l=0;l<this.dimension;++l)this.bounds[0][l]=-Infinity,this.bounds[1][l]=Infinity;this._state=g.slice().reverse();this._velocity=h.slice().reverse();this._time=[r];this._scratch=[g.slice(),g.slice(),g.slice(),g.slice(),g.slice()]}function k(g){for(var h=Array(g),r=0;r<g;++r)h[r]=0;return h}N.exports=function(g,h,r){switch(arguments.length){case 0:return new n([0],[0],0);case 1:if("number"===typeof g){var l=k(g);return new n(l,
l,0)}return new n(g,k(g.length),0);case 2:if("number"===typeof h)return l=k(g.length),new n(g,l,+h);r=0;case 3:if(g.length!==h.length)throw Error("state and velocity lengths must match");return new n(g,h,r)}};var m=b("cubic-hermite"),a=b("binary-search-bounds");b=n.prototype;b.flush=function(g){g=a.gt(this._time,g)-1;0>=g||(this._time.splice(0,g),this._state.splice(0,g*this.dimension),this._velocity.splice(0,g*this.dimension))};b.curve=function(g){var h=this._time,r=h.length,l=a.le(h,g),c=this._scratch[0],
d=this._state,e=this._velocity,f=this.dimension,q=this.bounds;if(0>l){var t=f-1;for(h=0;h<f;++h,--t)c[h]=d[t]}else if(l>=r-1)for(t=d.length-1,g-=h[r-1],h=0;h<f;++h,--t)c[h]=d[t]+g*e[t];else{t=f*(l+1)-1;r=h[l];l=h[l+1]-r||1;var w=this._scratch[1],x=this._scratch[2],z=this._scratch[3],B=this._scratch[4],A=!0;for(h=0;h<f;++h,--t)w[h]=d[t],z[h]=e[t]*l,x[h]=d[t+f],B[h]=e[t+f]*l,A=A&&w[h]===x[h]&&z[h]===B[h]&&0===z[h];if(A)for(h=0;h<f;++h)c[h]=w[h];else m(w,z,x,B,(g-r)/l,c)}d=q[0];q=q[1];for(h=0;h<f;++h)c[h]=
p(d[h],q[h],c[h]);return c};b.dcurve=function(g){var h=this._time,r=h.length,l=a.le(h,g),c=this._scratch[0],d=this._state,e=this._velocity,f=this.dimension;if(l>=r-1)for(r=d.length-1,h=0;h<f;++h,--r)c[h]=e[r];else{r=f*(l+1)-1;var q=h[l];l=h[l+1]-q||1;var t=this._scratch[1],w=this._scratch[2],x=this._scratch[3],z=this._scratch[4],B=!0;for(h=0;h<f;++h,--r)t[h]=d[r],x[h]=e[r]*l,w[h]=d[r+f],z[h]=e[r+f]*l,B=B&&t[h]===w[h]&&x[h]===z[h]&&0===x[h];if(B)for(h=0;h<f;++h)c[h]=0;else for(m.derivative(t,x,w,z,
(g-q)/l,c),h=0;h<f;++h)c[h]/=l}return c};b.lastT=function(){var g=this._time;return g[g.length-1]};b.stable=function(){for(var g=this._velocity,h=g.length,r=this.dimension-1;0<=r;--r)if(g[--h])return!1;return!0};b.jump=function(g){var h=this.lastT(),r=this.dimension;if(!(g<h||arguments.length!==r+1)){var l=this._state,c=this._velocity,d=l.length-this.dimension,e=this.bounds,f=e[0];e=e[1];this._time.push(h,g);for(h=0;2>h;++h)for(var q=0;q<r;++q)l.push(l[d++]),c.push(0);this._time.push(g);for(q=r;0<
q;--q)l.push(p(f[q-1],e[q-1],arguments[q])),c.push(0)}};b.push=function(g){var h=this.lastT(),r=this.dimension;if(!(g<h||arguments.length!==r+1)){var l=this._state,c=this._velocity,d=l.length-this.dimension,e=g-h,f=this.bounds;h=f[0];f=f[1];e=1E-6<e?1/e:0;for(this._time.push(g);0<r;--r){var q=p(h[r-1],f[r-1],arguments[r]);l.push(q);c.push((q-l[d++])*e)}}};b.set=function(g){var h=this.dimension;if(!(g<this.lastT()||arguments.length!==h+1)){var r=this._state,l=this._velocity,c=this.bounds,d=c[0];c=
c[1];for(this._time.push(g);0<h;--h)r.push(p(d[h-1],c[h-1],arguments[h])),l.push(0)}};b.move=function(g){var h=this.lastT(),r=this.dimension;if(!(g<=h||arguments.length!==r+1)){var l=this._state,c=this._velocity,d=l.length-this.dimension,e=this.bounds,f=e[0];e=e[1];h=g-h;h=1E-6<h?1/h:0;for(this._time.push(g);0<r;--r){var q=arguments[r];l.push(p(f[r-1],e[r-1],l[d++]+q));c.push(q*h)}}};b.idle=function(g){var h=this.lastT();if(!(g<h)){var r=this.dimension,l=this._state,c=this._velocity,d=l.length-r,
e=this.bounds,f=e[0];e=e[1];h=g-h;this._time.push(g);for(g=r-1;0<=g;--g)l.push(p(f[g],e[g],l[d]+h*c[d])),c.push(0),d+=1}}},{"binary-search-bounds":251,"cubic-hermite":156}],251:[function(b,N,G){function p(k,m,a,g,h,r){k=["function ",k,"(a,l,h,",g.join(","),"){",r?"":"var i\x3d",a?"l-1":"h+1",";while(l\x3c\x3dh){var m\x3d(l+h)\x3e\x3e\x3e1,x\x3da",h?".get(m)":"[m]"];r?0>m.indexOf("c")?k.push(";if(x\x3d\x3d\x3dy){return m}else if(x\x3c\x3dy){"):k.push(";var p\x3dc(x,y);if(p\x3d\x3d\x3d0){return m}else if(p\x3c\x3d0){"):
k.push(";if(",m,"){i\x3dm;");a?k.push("l\x3dm+1}else{h\x3dm-1}"):k.push("h\x3dm-1}else{l\x3dm+1}");k.push("}");r?k.push("return -1};"):k.push("return i};");return k.join("")}function n(k,m,a,g){return(new Function([p("A","x"+k+"y",m,["y"],!1,g),p("B","x"+k+"y",m,["y"],!0,g),p("P","c(x,y)"+k+"0",m,["y","c"],!1,g),p("Q","c(x,y)"+k+"0",m,["y","c"],!0,g),"function dispatchBsearch",a,"(a,y,c,l,h){if(a.shape){if(typeof(c)\x3d\x3d\x3d'function'){return Q(a,(l\x3d\x3d\x3dundefined)?0:l|0,(h\x3d\x3d\x3dundefined)?a.shape[0]-1:h|0,y,c)}else{return B(a,(c\x3d\x3d\x3dundefined)?0:c|0,(l\x3d\x3d\x3dundefined)?a.shape[0]-1:l|0,y)}}else{if(typeof(c)\x3d\x3d\x3d'function'){return P(a,(l\x3d\x3d\x3dundefined)?0:l|0,(h\x3d\x3d\x3dundefined)?a.length-1:h|0,y,c)}else{return A(a,(c\x3d\x3d\x3dundefined)?0:c|0,(l\x3d\x3d\x3dundefined)?a.length-1:l|0,y)}}}return dispatchBsearch",
a].join("")))()}N.exports={ge:n("\x3e\x3d",!1,"GE"),gt:n("\x3e",!1,"GT"),lt:n("\x3c",!0,"LT"),le:n("\x3c\x3d",!0,"LE"),eq:n("-",!0,"EQ",!0)}},{}],252:[function(b,N,G){var p=b("dtype");N.exports=function(n,k,m){if(!n)throw new TypeError("must specify data as first parameter");m=+(m||0)|0;if(Array.isArray(n)&&n[0]&&"number"===typeof n[0][0]){var a=n[0].length,g=n.length*a;k&&"string"!==typeof k||(k=new (p(k||"float32"))(g+m));var h=k.length-m;if(g!==h)throw Error("source length "+g+" ("+a+"x"+n.length+
") does not match destination length "+h);for(g=0;g<n.length;g++)for(h=0;h<a;h++)k[m++]=null===n[g][h]?NaN:n[g][h]}else if(k&&"string"!==typeof k)k.set(n,m);else if(a=p(k||"float32"),Array.isArray(n)||"array"===k)for(k=new a(n.length+m),g=0,a=k.length;m<a;m++,g++)k[m]=null===n[g]?NaN:n[g];else 0===m?k=new a(n):(k=new a(n.length+m),k.set(n,m));return k}},{dtype:184}],253:[function(b,N,G){var p=b("css-font/stringify"),n=[32,126];N.exports=function(k){k=k||{};var m=k.shape?k.shape:k.canvas?[k.canvas.width,
k.canvas.height]:[512,512],a=k.canvas||document.createElement("canvas"),g=k.font,h="number"===typeof k.step?[k.step,k.step]:k.step||[32,32];k=k.chars||n;g&&"string"!==typeof g&&(g=p(g));if(!Array.isArray(k))k=String(k).split("");else if(2===k.length&&"number"===typeof k[0]&&"number"===typeof k[1]){for(var r=[],l=k[0],c=0;l<=k[1];l++)r[c++]=String.fromCharCode(l);k=r}m=m.slice();a.width=m[0];a.height=m[1];r=a.getContext("2d");r.fillStyle="#000";r.fillRect(0,0,a.width,a.height);r.font=g;r.textAlign=
"center";r.textBaseline="middle";r.fillStyle="#fff";g=h[0]/2;c=h[1]/2;for(l=0;l<k.length;l++)r.fillText(k[l],g,c),(g+=h[0])>m[0]-h[0]/2&&(g=h[0]/2,c+=h[1]);return a}},{"css-font/stringify":153}],254:[function(b,N,G){function p(a,g){g||(g={});if("string"===typeof a||Array.isArray(a))g.family=a;var h=Array.isArray(g.family)?g.family.join(", "):g.family;if(!h)throw Error("`family` must be defined");var r=g.size||g.fontSize||g.em||48;a=[g.style||g.fontStyle||"",g.weight||g.fontWeight||"",r].join(" ")+
"px "+h;var l=g.origin||"top";if(p.cache[h]&&r<=p.cache[h].em)return n(p.cache[h],l);var c=g.canvas||p.canvas,d=c.getContext("2d"),e=void 0!==g.upper?g.upper:"H",f=void 0!==g.lower?g.lower:"x",q=void 0!==g.descent?g.descent:"p",t=void 0!==g.ascent?g.ascent:"h",w=void 0!==g.tittle?g.tittle:"i";g=void 0!==g.overshoot?g.overshoot:"O";var x=Math.ceil(1.5*r);c.height=x;c.width=.5*x;d.font=a;a={top:0};d.clearRect(0,0,x,x);d.textBaseline="top";d.fillStyle="black";d.fillText("H",0,0);c=k(d.getImageData(0,
0,x,x));d.clearRect(0,0,x,x);d.textBaseline="bottom";d.fillText("H",0,x);var z=k(d.getImageData(0,0,x,x));a.lineHeight=a.bottom=x-z+c;d.clearRect(0,0,x,x);d.textBaseline="alphabetic";d.fillText("H",0,x);z=k(d.getImageData(0,0,x,x));z=x-z-1+c;a.baseline=a.alphabetic=z;d.clearRect(0,0,x,x);d.textBaseline="middle";d.fillText("H",0,.5*x);var B=k(d.getImageData(0,0,x,x));a.median=a.middle=x-B-1+c-.5*x;d.clearRect(0,0,x,x);d.textBaseline="hanging";d.fillText("H",0,.5*x);B=k(d.getImageData(0,0,x,x));a.hanging=
x-B-1+c-.5*x;d.clearRect(0,0,x,x);d.textBaseline="ideographic";d.fillText("H",0,x);B=k(d.getImageData(0,0,x,x));a.ideographic=x-B-1+c;e&&(d.clearRect(0,0,x,x),d.textBaseline="top",d.fillText(e,0,0),a.upper=k(d.getImageData(0,0,x,x)),a.capHeight=a.baseline-a.upper);f&&(d.clearRect(0,0,x,x),d.textBaseline="top",d.fillText(f,0,0),a.lower=k(d.getImageData(0,0,x,x)),a.xHeight=a.baseline-a.lower);w&&(d.clearRect(0,0,x,x),d.textBaseline="top",d.fillText(w,0,0),a.tittle=k(d.getImageData(0,0,x,x)));t&&(d.clearRect(0,
0,x,x),d.textBaseline="top",d.fillText(t,0,0),a.ascent=k(d.getImageData(0,0,x,x)));q&&(d.clearRect(0,0,x,x),d.textBaseline="top",d.fillText(q,0,0),a.descent=m(d.getImageData(0,0,x,x)));g&&(d.clearRect(0,0,x,x),d.textBaseline="top",d.fillText(g,0,0),d=m(d.getImageData(0,0,x,x)),a.overshoot=d-z);for(var A in a)a[A]/=r;a.em=r;p.cache[h]=a;return n(a,l)}function n(a,g){var h={};"string"===typeof g&&(g=a[g]);for(var r in a)"em"!==r&&(h[r]=a[r]-g);return h}function k(a){var g=a.height;a=a.data;for(var h=
3;h<a.length;h+=4)if(0!==a[h])return Math.floor(.25*(h-3)/g)}function m(a){var g=a.height;a=a.data;for(var h=a.length-1;0<h;h-=4)if(0!==a[h])return Math.floor(.25*(h-3)/g)}N.exports=p;p.canvas=document.createElement("canvas");p.cache={}},{}],255:[function(b,N,G){function p(e,f,q,t,w,x){this._color=e;this.key=f;this.value=q;this.left=t;this.right=w;this._count=x}function n(e){return new p(e._color,e.key,e.value,e.left,e.right,e._count)}function k(e,f){return new p(e,f.key,f.value,f.left,f.right,f._count)}
function m(e){e._count=1+(e.left?e.left._count:0)+(e.right?e.right._count:0)}function a(e,f){this._compare=e;this.root=f}function g(e,f){if(f.left){var q=g(e,f.left);if(q)return q}if(q=e(f.key,f.value))return q;if(f.right)return g(e,f.right)}function h(e,f,q,t){if(0>=f(e,t.key)){if(t.left){var w=h(e,f,q,t.left);if(w)return w}if(w=q(t.key,t.value))return w}if(t.right)return h(e,f,q,t.right)}function r(e,f,q,t,w){var x=q(e,w.key),z=q(f,w.key);if(0>=x&&(w.left&&(x=r(e,f,q,t,w.left))||0<z&&(x=t(w.key,
w.value))))return x;if(0<z&&w.right)return r(e,f,q,t,w.right)}function l(e,f){this.tree=e;this._stack=f}function c(e,f){e.key=f.key;e.value=f.value;e.left=f.left;e.right=f.right;e._color=f._color;e._count=f._count}function d(e,f){return e<f?-1:e>f?1:0}N.exports=function(e){return new a(e||d,null)};b=a.prototype;Object.defineProperty(b,"keys",{get:function(){var e=[];this.forEach(function(f,q){e.push(f)});return e}});Object.defineProperty(b,"values",{get:function(){var e=[];this.forEach(function(f,
q){e.push(q)});return e}});Object.defineProperty(b,"length",{get:function(){return this.root?this.root._count:0}});b.insert=function(e,f){for(var q=this._compare,t=this.root,w=[],x=[];t;){var z=q(e,t.key);w.push(t);x.push(z);t=0>=z?t.left:t.right}w.push(new p(0,e,f,null,null,1));for(e=w.length-2;0<=e;--e)t=w[e],w[e]=0>=x[e]?new p(t._color,t.key,t.value,w[e+1],t.right,t._count+1):new p(t._color,t.key,t.value,t.left,w[e+1],t._count+1);for(e=w.length-1;1<e;--e){x=w[e-1];t=w[e];if(1===x._color||1===t._color)break;
f=w[e-2];if(f.left===x)if(x.left===t)if((z=f.right)&&0===z._color)x._color=1,f.right=k(1,z),f._color=0,--e;else{f._color=0;f.left=x.right;x._color=1;x.right=f;w[e-2]=x;w[e-1]=t;m(f);m(x);3<=e&&(e=w[e-3],e.left===f?e.left=x:e.right=x);break}else if((z=f.right)&&0===z._color)x._color=1,f.right=k(1,z),f._color=0,--e;else{x.right=t.left;f._color=0;f.left=t.right;t._color=1;t.left=x;t.right=f;w[e-2]=t;w[e-1]=x;m(f);m(x);m(t);3<=e&&(e=w[e-3],e.left===f?e.left=t:e.right=t);break}else if(x.right===t)if((z=
f.left)&&0===z._color)x._color=1,f.left=k(1,z),f._color=0,--e;else{f._color=0;f.right=x.left;x._color=1;x.left=f;w[e-2]=x;w[e-1]=t;m(f);m(x);3<=e&&(e=w[e-3],e.right===f?e.right=x:e.left=x);break}else if((z=f.left)&&0===z._color)x._color=1,f.left=k(1,z),f._color=0,--e;else{x.left=t.right;f._color=0;f.right=t.left;t._color=1;t.right=x;t.left=f;w[e-2]=t;w[e-1]=x;m(f);m(x);m(t);3<=e&&(e=w[e-3],e.right===f?e.right=t:e.left=t);break}}w[0]._color=1;return new a(q,w[0])};b.forEach=function(e,f,q){if(this.root)switch(arguments.length){case 1:return g(e,
this.root);case 2:return h(f,this._compare,e,this.root);case 3:if(!(0<=this._compare(f,q)))return r(f,q,this._compare,e,this.root)}};Object.defineProperty(b,"begin",{get:function(){for(var e=[],f=this.root;f;)e.push(f),f=f.left;return new l(this,e)}});Object.defineProperty(b,"end",{get:function(){for(var e=[],f=this.root;f;)e.push(f),f=f.right;return new l(this,e)}});b.at=function(e){if(0>e)return new l(this,[]);for(var f=this.root,q=[];;){q.push(f);if(f.left){if(e<f.left._count){f=f.left;continue}e-=
f.left._count}if(!e)return new l(this,q);--e;if(f.right){if(e>=f.right._count)break;f=f.right}else break}return new l(this,[])};b.ge=function(e){for(var f=this._compare,q=this.root,t=[],w=0;q;){var x=f(e,q.key);t.push(q);0>=x&&(w=t.length);q=0>=x?q.left:q.right}t.length=w;return new l(this,t)};b.gt=function(e){for(var f=this._compare,q=this.root,t=[],w=0;q;){var x=f(e,q.key);t.push(q);0>x&&(w=t.length);q=0>x?q.left:q.right}t.length=w;return new l(this,t)};b.lt=function(e){for(var f=this._compare,
q=this.root,t=[],w=0;q;){var x=f(e,q.key);t.push(q);0<x&&(w=t.length);q=0>=x?q.left:q.right}t.length=w;return new l(this,t)};b.le=function(e){for(var f=this._compare,q=this.root,t=[],w=0;q;){var x=f(e,q.key);t.push(q);0<=x&&(w=t.length);q=0>x?q.left:q.right}t.length=w;return new l(this,t)};b.find=function(e){for(var f=this._compare,q=this.root,t=[];q;){var w=f(e,q.key);t.push(q);if(0===w)return new l(this,t);q=0>=w?q.left:q.right}return new l(this,[])};b.remove=function(e){return(e=this.find(e))?
e.remove():this};b.get=function(e){for(var f=this._compare,q=this.root;q;){var t=f(e,q.key);if(0===t)return q.value;q=0>=t?q.left:q.right}};b=l.prototype;Object.defineProperty(b,"valid",{get:function(){return 0<this._stack.length}});Object.defineProperty(b,"node",{get:function(){return 0<this._stack.length?this._stack[this._stack.length-1]:null},enumerable:!0});b.clone=function(){return new l(this.tree,this._stack.slice())};b.remove=function(){var e=this._stack;if(0===e.length)return this.tree;var f=
Array(e.length),q=e[e.length-1];f[f.length-1]=new p(q._color,q.key,q.value,q.left,q.right,q._count);for(var t=e.length-2;0<=t;--t)q=e[t],f[t]=q.left===e[t+1]?new p(q._color,q.key,q.value,f[t+1],q.right,q._count):new p(q._color,q.key,q.value,q.left,f[t+1],q._count);q=f[f.length-1];if(q.left&&q.right){e=f.length;for(q=q.left;q.right;)f.push(q),q=q.right;t=f[e-1];f.push(new p(q._color,t.key,t.value,q.left,q.right,q._count));f[e-1].key=q.key;f[e-1].value=q.value;for(t=f.length-2;t>=e;--t)q=f[t],f[t]=
new p(q._color,q.key,q.value,q.left,f[t+1],q._count);f[e-1].left=f[e]}q=f[f.length-1];if(0===q._color)for(t=f[f.length-2],t.left===q?t.left=null:t.right===q&&(t.right=null),f.pop(),t=0;t<f.length;++t)f[t]._count--;else if(q.left||q.right)for(q.left?c(q,q.left):q.right&&c(q,q.right),q._color=1,t=0;t<f.length-1;++t)f[t]._count--;else{if(1===f.length)return new a(this.tree._compare,null);for(t=0;t<f.length;++t)f[t]._count--;t=f[f.length-2];for(var w,x,z,B=f.length-1;0<=B;--B){e=f[B];if(0===B){e._color=
1;break}w=f[B-1];if(w.left===e){x=w.right;if(x.right&&0===x.right._color){x=w.right=n(x);z=x.right=n(x.right);w.right=x.left;x.left=w;x.right=z;x._color=w._color;e._color=1;w._color=1;z._color=1;m(w);m(x);if(1<B){var A=f[B-2];A.left===w?A.left=x:A.right=x}f[B-1]=x;break}else if(x.left&&0===x.left._color){x=w.right=n(x);z=x.left=n(x.left);w.right=z.left;x.left=z.right;z.left=w;z.right=x;z._color=w._color;w._color=1;x._color=1;e._color=1;m(w);m(x);m(z);1<B&&(A=f[B-2],A.left===w?A.left=z:A.right=z);
f[B-1]=z;break}if(1===x._color)if(0===w._color){w._color=1;w.right=k(0,x);break}else w.right=k(0,x);else x=n(x),w.right=x.left,x.left=w,x._color=w._color,w._color=0,m(w),m(x),1<B&&(A=f[B-2],A.left===w?A.left=x:A.right=x),f[B-1]=x,f[B]=w,B+1<f.length?f[B+1]=e:f.push(e),B+=2}else{x=w.left;if(x.left&&0===x.left._color){x=w.left=n(x);z=x.left=n(x.left);w.left=x.right;x.right=w;x.left=z;x._color=w._color;e._color=1;w._color=1;z._color=1;m(w);m(x);1<B&&(A=f[B-2],A.right===w?A.right=x:A.left=x);f[B-1]=x;
break}else if(x.right&&0===x.right._color){x=w.left=n(x);z=x.right=n(x.right);w.left=z.right;x.right=z.left;z.right=w;z.left=x;z._color=w._color;w._color=1;x._color=1;e._color=1;m(w);m(x);m(z);1<B&&(A=f[B-2],A.right===w?A.right=z:A.left=z);f[B-1]=z;break}if(1===x._color)if(0===w._color){w._color=1;w.left=k(0,x);break}else w.left=k(0,x);else x=n(x),w.left=x.right,x.right=w,x._color=w._color,w._color=0,m(w),m(x),1<B&&(A=f[B-2],A.right===w?A.right=x:A.left=x),f[B-1]=x,f[B]=w,B+1<f.length?f[B+1]=e:f.push(e),
B+=2}}t.left===q?t.left=null:t.right=null}return new a(this.tree._compare,f[0])};Object.defineProperty(b,"key",{get:function(){if(0<this._stack.length)return this._stack[this._stack.length-1].key},enumerable:!0});Object.defineProperty(b,"value",{get:function(){if(0<this._stack.length)return this._stack[this._stack.length-1].value},enumerable:!0});Object.defineProperty(b,"index",{get:function(){var e=0,f=this._stack;if(0===f.length)return(e=this.tree.root)?e._count:0;f[f.length-1].left&&(e=f[f.length-
1].left._count);for(var q=f.length-2;0<=q;--q)f[q+1]===f[q].right&&(++e,f[q].left&&(e+=f[q].left._count));return e},enumerable:!0});b.next=function(){var e=this._stack;if(0!==e.length){var f=e[e.length-1];if(f.right)for(f=f.right;f;)e.push(f),f=f.left;else for(e.pop();0<e.length&&e[e.length-1].right===f;)f=e[e.length-1],e.pop()}};Object.defineProperty(b,"hasNext",{get:function(){var e=this._stack;if(0===e.length)return!1;if(e[e.length-1].right)return!0;for(var f=e.length-1;0<f;--f)if(e[f-1].left===
e[f])return!0;return!1}});b.update=function(e){var f=this._stack;if(0===f.length)throw Error("Can't update empty node!");var q=Array(f.length),t=f[f.length-1];q[q.length-1]=new p(t._color,t.key,e,t.left,t.right,t._count);for(e=f.length-2;0<=e;--e)t=f[e],q[e]=t.left===f[e+1]?new p(t._color,t.key,t.value,q[e+1],t.right,t._count):new p(t._color,t.key,t.value,t.left,q[e+1],t._count);return new a(this.tree._compare,q[0])};b.prev=function(){var e=this._stack;if(0!==e.length){var f=e[e.length-1];if(f.left)for(f=
f.left;f;)e.push(f),f=f.right;else for(e.pop();0<e.length&&e[e.length-1].left===f;)f=e[e.length-1],e.pop()}};Object.defineProperty(b,"hasPrev",{get:function(){var e=this._stack;if(0===e.length)return!1;if(e[e.length-1].left)return!0;for(var f=e.length-1;0<f;--f)if(e[f-1].right===e[f])return!0;return!1}})},{}],256:[function(b,N,G){function p(m){if(0>m)return Number("0/0");for(var a=k[0],g=k.length-1;0<g;--g)a+=k[g]/(m+g);g=m+4.7421875+.5;return.5*Math.log(2*Math.PI)+(m+.5)*Math.log(g)-g+Math.log(a)-
Math.log(m)}var n=[.9999999999998099,676.5203681218851,-1259.1392167224028,771.3234287776531,-176.6150291621406,12.507343278686905,-.13857109526572012,9.984369578019572E-6,1.5056327351493116E-7],k=[.9999999999999971,57.15623566586292,-59.59796035547549,14.136097974741746,-.4919138160976202,3.399464998481189E-5,4.652362892704858E-5,-9.837447530487956E-5,1.580887032249125E-4,-2.1026444172410488E-4,2.1743961811521265E-4,-1.643181065367639E-4,8.441822398385275E-5,-2.6190838401581408E-5,3.6899182659531625E-6];
N.exports=function g(a){if(.5>a)return Math.PI/(Math.sin(Math.PI*a)*g(1-a));if(100<a)return Math.exp(p(a));--a;for(var h=n[0],r=1;9>r;r++)h+=n[r]/(a+r);r=a+7+.5;return Math.sqrt(2*Math.PI)*Math.pow(r,a+.5)*Math.exp(-r)*h};N.exports.log=p},{}],257:[function(b,N,G){N.exports=function(p,n){if("string"!==typeof p)throw new TypeError("must specify type string");n=n||{};if("undefined"===typeof document&&!n.canvas)return null;var k=n.canvas||document.createElement("canvas");"number"===typeof n.width&&(k.width=
n.width);"number"===typeof n.height&&(k.height=n.height);var m;try{var a=[p];0===p.indexOf("webgl")&&a.push("experimental-"+p);for(p=0;p<a.length;p++)if(m=k.getContext(a[p],n))return m}catch(g){m=null}return m||null}},{}],258:[function(b,N,G){function p(x,z){x[0]=z[0];x[1]=z[1];x[2]=z[2];return x}function n(x){this.gl=x;this.pixelRatio=1;this.bounds=[[-10,-10,-10],[10,10,10]];this.ticks=[[],[],[]];this.autoTicks=!0;this.tickSpacing=[1,1,1];this.tickEnable=[!0,!0,!0];this.tickFont=["sans-serif","sans-serif",
"sans-serif"];this.tickSize=[12,12,12];this.tickAngle=[0,0,0];this.tickAlign=["auto","auto","auto"];this.tickColor=[[0,0,0,1],[0,0,0,1],[0,0,0,1]];this.tickPad=[10,10,10];this.lastCubeProps={cubeEdges:[0,0,0],axis:[0,0,0]};this.labels=["x","y","z"];this.labelEnable=[!0,!0,!0];this.labelFont="sans-serif";this.labelSize=[20,20,20];this.labelAngle=[0,0,0];this.labelAlign=["auto","auto","auto"];this.labelColor=[[0,0,0,1],[0,0,0,1],[0,0,0,1]];this.labelPad=[10,10,10];this.lineEnable=[!0,!0,!0];this.lineMirror=
[!1,!1,!1];this.lineWidth=[1,1,1];this.lineColor=[[0,0,0,1],[0,0,0,1],[0,0,0,1]];this.lineTickEnable=[!0,!0,!0];this.lineTickMirror=[!1,!1,!1];this.lineTickLength=[0,0,0];this.lineTickWidth=[1,1,1];this.lineTickColor=[[0,0,0,1],[0,0,0,1],[0,0,0,1]];this.gridEnable=[!0,!0,!0];this.gridWidth=[1,1,1];this.gridColor=[[0,0,0,1],[0,0,0,1],[0,0,0,1]];this.zeroEnable=[!0,!0,!0];this.zeroLineColor=[[0,0,0,1],[0,0,0,1],[0,0,0,1]];this.zeroLineWidth=[2,2,2];this.backgroundEnable=[!1,!1,!1];this.backgroundColor=
[[.8,.8,.8,.5],[.8,.8,.8,.5],[.8,.8,.8,.5]];this._firstInit=!0;this._lines=this._text=null;this._background=h(x)}function k(){this.primalOffset=[0,0,0];this.primalMinor=[0,0,0];this.mirrorOffset=[0,0,0];this.mirrorMinor=[0,0,0]}function m(x,z,B,A,D){var C=x.primalOffset,v=x.primalMinor,y=x.mirrorOffset;x=x.mirrorMinor;A=A[z];for(var F=0;3>F;++F)if(z!==F){var J=C,K=y,M=v,H=x;A&1<<F&&(J=y,K=C,M=x,H=v);J[F]=B[0][F];K[F]=B[1][F];0<D[F]?(M[F]=-1,H[F]=0):(M[F]=0,H[F]=1)}}N.exports=function(x,z){x=new n(x);
x.update(z);return x};var a=b("./lib/text.js"),g=b("./lib/lines.js"),h=b("./lib/background.js"),r=b("./lib/cube.js"),l=b("./lib/ticks.js"),c=new Float32Array([1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1]);b=n.prototype;b.update=function(x){function z(H,O,I){if(I in x){var L=x[I],Q=this[I],Z;(H?Array.isArray(L)&&Array.isArray(L[0]):Array.isArray(L))?this[I]=Z=[O(L[0]),O(L[1]),O(L[2])]:this[I]=Z=[O(L),O(L),O(L)];for(H=0;3>H;++H)if(Z[H]!==Q[H])return!0}return!1}x=x||{};var B=z.bind(this,!1,Number),A=z.bind(this,
!1,Boolean),D=z.bind(this,!1,String),C=z.bind(this,!0,function(H){if(Array.isArray(H)){if(3===H.length)return[+H[0],+H[1],+H[2],1];if(4===H.length)return[+H[0],+H[1],+H[2],+H[3]]}return[0,0,0,1]}),v=!1,y=!1;if("bounds"in x){var F=x.bounds,J=0;for(;2>J;++J)for(var K=0;3>K;++K)F[J][K]!==this.bounds[J][K]&&(y=!0),this.bounds[J][K]=F[J][K]}if("ticks"in x){var M=x.ticks;v=!0;this.autoTicks=!1;for(J=0;3>J;++J)this.tickSpacing[J]=0}else B("tickSpacing")&&(y=this.autoTicks=!0);this._firstInit&&("ticks"in
x||"tickSpacing"in x||(this.autoTicks=!0),v=y=!0,this._firstInit=!1);y&&this.autoTicks&&(M=l.create(this.bounds,this.tickSpacing),v=!0);if(v){for(J=0;3>J;++J)M[J].sort(function(H,O){return H.x-O.x});l.equal(M,this.ticks)?v=!1:this.ticks=M}A("tickEnable");D("tickFont")&&(v=!0);B("tickSize");B("tickAngle");B("tickPad");C("tickColor");M=D("labels");D("labelFont")&&(M=!0);A("labelEnable");B("labelSize");B("labelPad");C("labelColor");A("lineEnable");A("lineMirror");B("lineWidth");C("lineColor");A("lineTickEnable");
A("lineTickMirror");B("lineTickLength");B("lineTickWidth");C("lineTickColor");A("gridEnable");B("gridWidth");C("gridColor");A("zeroEnable");C("zeroLineColor");B("zeroLineWidth");A("backgroundEnable");C("backgroundColor");this._text?this._text&&(M||v)&&this._text.update(this.bounds,this.labels,this.labelFont,this.ticks,this.tickFont):this._text=a(this.gl,this.bounds,this.labels,this.labelFont,this.ticks,this.tickFont);this._lines&&v&&(this._lines.dispose(),this._lines=null);this._lines||(this._lines=
g(this.gl,this.bounds,this.ticks))};var d=[new k,new k,new k],e=[0,0,0],f={model:c,view:c,projection:c,_ortho:!1};b.isOpaque=function(){return!0};b.isTransparent=function(){return!1};b.drawTransparent=function(x){};var q=[0,0,0],t=[0,0,0],w=[0,0,0];b.draw=function(x){function z(I){O=[0,0,0];O[I]=1}function B(I,L,Q){var Z=(I+1)%3;I=(I+2)%3;var ba=L[Z];L=L[I];var V=Q[Z];Q=Q[I];0<ba&&0<Q?z(Z):0<ba&&0>Q?z(Z):0>ba&&0<Q?z(Z):0>ba&&0>Q?z(Z):0<L&&0<V?z(I):0<L&&0>V?z(I):0>L&&0<V?z(I):0>L&&0>V&&z(I)}x=x||f;
var A=this.gl,D=x.model||c,C=x.view||c,v=x.projection||c,y=this.bounds;x=x._ortho||!1;var F=r(D,C,v,y,x),J=F.cubeEdges;F=F.axis;x=(x?2:1)*this.pixelRatio*(v[3]*C[12]+v[7]*C[13]+v[11]*C[14]+v[15]*C[15])/A.drawingBufferHeight;for(A=0;3>A;++A)this.lastCubeProps.cubeEdges[A]=J[A],this.lastCubeProps.axis[A]=F[A];for(A=0;3>A;++A)m(d[A],A,this.bounds,J,F);A=this.gl;for(A=0;3>A;++A)e[A]=this.backgroundEnable[A]?F[A]:0;this._background.draw(D,C,v,y,e,this.backgroundColor);this._lines.bind(D,C,v,this);for(A=
0;3>A;++A){var K=[0,0,0];K[A]=0<F[A]?y[1][A]:y[0][A];for(J=0;2>J;++J){var M=(A+1+J)%3,H=(A+1+(J^1))%3;this.gridEnable[M]&&this._lines.drawGrid(M,H,this.bounds,K,this.gridColor[M],this.gridWidth[M]*this.pixelRatio)}for(J=0;2>J;++J)M=(A+1+J)%3,H=(A+1+(J^1))%3,this.zeroEnable[H]&&0>=Math.min(y[0][H],y[1][H])&&0<=Math.max(y[0][H],y[1][H])&&this._lines.drawZero(M,H,this.bounds,K,this.zeroLineColor[H],this.zeroLineWidth[H]*this.pixelRatio)}for(A=0;3>A;++A){this.lineEnable[A]&&this._lines.drawAxisLine(A,
this.bounds,d[A].primalOffset,this.lineColor[A],this.lineWidth[A]*this.pixelRatio);this.lineMirror[A]&&this._lines.drawAxisLine(A,this.bounds,d[A].mirrorOffset,this.lineColor[A],this.lineWidth[A]*this.pixelRatio);F=p(q,d[A].primalMinor);K=p(t,d[A].mirrorMinor);M=this.lineTickLength;for(J=0;3>J;++J)H=x/D[5*J],F[J]=F[J]*M[J]*H,K[J]=K[J]*M[J]*H;this.lineTickEnable[A]&&this._lines.drawAxisTicks(A,d[A].primalOffset,F,this.lineTickColor[A],this.lineTickWidth[A]*this.pixelRatio);this.lineTickMirror[A]&&
this._lines.drawAxisTicks(A,d[A].mirrorOffset,K,this.lineTickColor[A],this.lineTickWidth[A]*this.pixelRatio)}this._lines.unbind();this._text.bind(D,C,v,this.pixelRatio);for(A=0;3>A;++A){C=d[A].primalMinor;v=d[A].mirrorMinor;F=p(w,d[A].primalOffset);for(J=0;3>J;++J)this.lineTickEnable[A]&&(F[J]+=x*C[J]*Math.max(this.lineTickLength[J],0)/D[5*J]);K=[0,0,0];K[A]=1;if(this.tickEnable[A]){-3600===this.tickAngle[A]?(this.tickAngle[A]=0,this.tickAlign[A]="auto"):this.tickAlign[A]=-1;J=1;M=[this.tickAlign[A],
.5,J];M[0]="auto"===M[0]?0:parseInt(""+M[0]);var O=[0,0,0];B(A,C,v);for(J=0;3>J;++J)F[J]+=x*C[J]*this.tickPad[J]/D[5*J];this._text.drawTicks(A,this.tickSize[A],this.tickAngle[A],F,this.tickColor[A],K,O,M)}if(this.labelEnable[A]){J=0;O=[0,0,0];4<this.labels[A].length&&(z(A),J=1);M=[this.labelAlign[A],.5,J];M[0]="auto"===M[0]?0:parseInt(""+M[0]);for(J=0;3>J;++J)F[J]+=x*C[J]*this.labelPad[J]/D[5*J];F[A]+=.5*(y[0][A]+y[1][A]);this._text.drawLabel(A,this.labelSize[A],this.labelAngle[A],F,this.labelColor[A],
[0,0,0],O,M)}}this._text.unbind()};b.dispose=function(){this._text.dispose();this._lines.dispose();this._background.dispose();this.gl=this._background=this._text=this._lines=null}},{"./lib/background.js":259,"./lib/cube.js":260,"./lib/lines.js":261,"./lib/text.js":263,"./lib/ticks.js":264}],259:[function(b,N,G){function p(a,g,h,r){this.gl=a;this.buffer=g;this.vao=h;this.shader=r}N.exports=function(a){for(var g=[],h=[],r=0,l=0;3>l;++l)for(var c=(l+1)%3,d=(l+2)%3,e=[0,0,0],f=[0,0,0],q=-1;1>=q;q+=2){h.push(r,
r+2,r+1,r+1,r+2,r+3);e[l]=q;f[l]=q;for(var t=-1;1>=t;t+=2){e[c]=t;for(var w=-1;1>=w;w+=2)e[d]=w,g.push(e[0],e[1],e[2],f[0],f[1],f[2]),r+=1}t=c;c=d;d=t}g=n(a,new Float32Array(g));h=n(a,new Uint16Array(h),a.ELEMENT_ARRAY_BUFFER);h=k(a,[{buffer:g,type:a.FLOAT,size:3,offset:0,stride:24},{buffer:g,type:a.FLOAT,size:3,offset:12,stride:24}],h);r=m(a);r.attributes.position.location=0;r.attributes.normal.location=1;return new p(a,g,h,r)};var n=b("gl-buffer"),k=b("gl-vao"),m=b("./shaders").bg;b=p.prototype;
b.draw=function(a,g,h,r,l,c){for(var d=!1,e=0;3>e;++e)d=d||l[e];d&&(d=this.gl,d.enable(d.POLYGON_OFFSET_FILL),d.polygonOffset(1,2),this.shader.bind(),this.shader.uniforms={model:a,view:g,projection:h,bounds:r,enable:l,colors:c},this.vao.bind(),this.vao.draw(this.gl.TRIANGLES,36),this.vao.unbind(),d.disable(d.POLYGON_OFFSET_FILL))};b.dispose=function(){this.vao.dispose();this.buffer.dispose();this.shader.dispose()}},{"./shaders":262,"gl-buffer":267,"gl-vao":361}],260:[function(b,N,G){N.exports=function(q,
t,w,x,z){n(a,t,q);n(a,w,a);for(q=t=0;2>q;++q)for(r[2]=x[q][2],w=0;2>w;++w){r[1]=x[w][1];for(var B=0;2>B;++B){r[0]=x[B][0];for(var A=g[t],D=r,C=a,v=0;4>v;++v){A[v]=C[12+v];for(var y=0;3>y;++y)A[v]+=D[y]*C[4*y+v]}t+=1}}x=-1;for(q=0;8>q;++q){t=g[q][3];for(w=0;3>w;++w)h[q][w]=g[q][w]/t;z&&(h[q][2]*=-1);0>t&&(0>x?x=q:h[q][2]<h[x][2]&&(x=q))}if(0>x)for(q=x=0;3>q;++q){t=(q+2)%3;z=(q+1)%3;B=w=-1;for(A=0;2>A;++A)D=A<<q,C=D+(A<<t)+(1-A<<z),v=D+(1-A<<t)+(A<<z),0>m(h[D],h[C],h[v],l)||(A?w=1:B=1);if(!(0>w||0>
B))for(A=0;2>A;++A){D=A<<q;C=D+(A<<t)+(1-A<<z);v=D+(1-A<<t)+(A<<z);a:{D=[g[D],g[C],g[v],g[D+(1<<t)+(1<<z)]];for(v=0;v<c.length;++v)if(D=k.positive(D,c[v]),3>D.length){D=0;break a}v=D[0];C=v[0]/v[3];y=v[1]/v[3];var F=0;for(v=1;v+1<D.length;++v){var J=D[v],K=D[v+1];F+=Math.abs((J[0]/J[3]-C)*(K[1]/K[3]-y)-(J[1]/J[3]-y)*(K[0]/K[3]-C))}D=F}A?w=D:B=D}B>w&&(x|=1<<q)}t=7^x;A=-1;for(q=0;8>q;++q)q!==x&&q!==t&&(0>A?A=q:h[A][1]>h[q][1]&&(A=q));w=-1;for(q=0;3>q;++q)D=A^1<<q,D!==x&&D!==t&&(0>w&&(w=D),z=h[D],z[0]<
h[w][0]&&(w=D));B=-1;for(q=0;3>q;++q)D=A^1<<q,D!==x&&D!==t&&D!==w&&(0>B&&(B=D),z=h[D],z[0]>h[B][0]&&(B=D));z=d;z[0]=z[1]=z[2]=0;z[p.log2(w^A)]=A&w;z[p.log2(A^B)]=A&B;q=B^7;q===x||q===t?(q=w^7,z[p.log2(B^q)]=q&B):z[p.log2(w^q)]=q&w;z=e;for(q=0;3>q;++q)z[q]=x&1<<q?-1:1;return f};var p=b("bit-twiddle"),n=b("gl-mat4/multiply"),k=b("split-polygon"),m=b("robust-orientation"),a=Array(16),g=Array(8),h=Array(8),r=Array(3),l=[0,0,0];(function(){for(var q=0;8>q;++q)g[q]=[1,1,1,1],h[q]=[1,1,1]})();var c=[[0,
0,1,0,0],[0,0,-1,1,0],[0,-1,0,1,0],[0,1,0,1,0],[-1,0,0,1,0],[1,0,0,1,0]],d=[1,1,1],e=[0,0,0],f={cubeEdges:d,axis:e}},{"bit-twiddle":104,"gl-mat4/multiply":301,"robust-orientation":548,"split-polygon":567}],261:[function(b,N,G){function p(e){e[0]=e[1]=e[2]=0;return e}function n(e,f){e[0]=f[0];e[1]=f[1];e[2]=f[2];return e}function k(e,f,q,t,w,x,z,B){this.gl=e;this.vertBuffer=f;this.vao=q;this.shader=t;this.tickCount=w;this.tickOffset=x;this.gridCount=z;this.gridOffset=B}N.exports=function(e,f,q){var t=
[];f=[0,0,0];var w=[0,0,0],x=[0,0,0],z=[0,0,0];t.push(0,0,1,0,1,1,0,0,-1,0,0,-1,0,1,1,0,1,-1);for(var B=0;3>B;++B){for(var A=t.length/3|0,D=0;D<q[B].length;++D){var C=+q[B][D].x;t.push(C,0,1,C,1,1,C,0,-1,C,0,-1,C,1,1,C,1,-1)}C=t.length/3|0;f[B]=A;w[B]=C-A;A=t.length/3|0;for(D=0;D<q[B].length;++D)C=+q[B][D].x,t.push(C,0,1,C,1,1,C,0,-1,C,0,-1,C,1,1,C,1,-1);C=t.length/3|0;x[B]=A;z[B]=C-A}q=m(e,new Float32Array(t));t=a(e,[{buffer:q,type:e.FLOAT,size:3,stride:0,offset:0}]);B=g(e);B.attributes.position.location=
0;return new k(e,q,t,B,w,f,z,x)};var m=b("gl-buffer"),a=b("gl-vao"),g=b("./shaders").line,h=[0,0,0],r=[0,0,0],l=[0,0,0],c=[0,0,0],d=[1,1];b=k.prototype;b.bind=function(e,f,q){this.shader.bind();this.shader.uniforms.model=e;this.shader.uniforms.view=f;this.shader.uniforms.projection=q;d[0]=this.gl.drawingBufferWidth;d[1]=this.gl.drawingBufferHeight;this.shader.uniforms.screenShape=d;this.vao.bind()};b.unbind=function(){this.vao.unbind()};b.drawAxisLine=function(e,f,q,t,w){var x=p(r);this.shader.uniforms.majorAxis=
r;x[e]=f[1][e]-f[0][e];this.shader.uniforms.minorAxis=x;q=n(c,q);q[e]+=f[0][e];this.shader.uniforms.offset=q;this.shader.uniforms.lineWidth=w;this.shader.uniforms.color=t;f=p(l);f[(e+2)%3]=1;this.shader.uniforms.screenAxis=f;this.vao.draw(this.gl.TRIANGLES,6);f=p(l);f[(e+1)%3]=1;this.shader.uniforms.screenAxis=f;this.vao.draw(this.gl.TRIANGLES,6)};b.drawAxisTicks=function(e,f,q,t,w){if(this.tickCount[e]){var x=p(h);x[e]=1;this.shader.uniforms.majorAxis=x;this.shader.uniforms.offset=f;this.shader.uniforms.minorAxis=
q;this.shader.uniforms.color=t;this.shader.uniforms.lineWidth=w;f=p(l);f[e]=1;this.shader.uniforms.screenAxis=f;this.vao.draw(this.gl.TRIANGLES,this.tickCount[e],this.tickOffset[e])}};b.drawGrid=function(e,f,q,t,w,x){if(this.gridCount[e]){var z=p(r);z[f]=q[1][f]-q[0][f];this.shader.uniforms.minorAxis=z;t=n(c,t);t[f]+=q[0][f];this.shader.uniforms.offset=t;f=p(h);f[e]=1;this.shader.uniforms.majorAxis=f;f=p(l);f[e]=1;this.shader.uniforms.screenAxis=f;this.shader.uniforms.lineWidth=x;this.shader.uniforms.color=
w;this.vao.draw(this.gl.TRIANGLES,this.gridCount[e],this.gridOffset[e])}};b.drawZero=function(e,f,q,t,w,x){var z=p(r);this.shader.uniforms.majorAxis=z;z[e]=q[1][e]-q[0][e];this.shader.uniforms.minorAxis=z;t=n(c,t);t[e]+=q[0][e];this.shader.uniforms.offset=t;e=p(l);e[f]=1;this.shader.uniforms.screenAxis=e;this.shader.uniforms.lineWidth=x;this.shader.uniforms.color=w;this.vao.draw(this.gl.TRIANGLES,6)};b.dispose=function(){this.vao.dispose();this.vertBuffer.dispose();this.shader.dispose()}},{"./shaders":262,
"gl-buffer":267,"gl-vao":361}],262:[function(b,N,G){N=b("glslify");var p=b("gl-shader"),n=N(["precision highp float;\n#define GLSLIFY 1\n\nattribute vec3 position;\n\nuniform mat4 model, view, projection;\nuniform vec3 offset, majorAxis, minorAxis, screenAxis;\nuniform float lineWidth;\nuniform vec2 screenShape;\n\nvec3 project(vec3 p) {\n  vec4 pp \x3d projection * view * model * vec4(p, 1.0);\n  return pp.xyz / max(pp.w, 0.0001);\n}\n\nvoid main() {\n  vec3 major \x3d position.x * majorAxis;\n  vec3 minor \x3d position.y * minorAxis;\n\n  vec3 vPosition \x3d major + minor + offset;\n  vec3 pPosition \x3d project(vPosition);\n  vec3 offset \x3d project(vPosition + screenAxis * position.z);\n\n  vec2 screen \x3d normalize((offset - pPosition).xy * screenShape) / screenShape;\n\n  gl_Position \x3d vec4(pPosition + vec3(0.5 * screen * lineWidth, 0), 1.0);\n}\n"]),
k=N(["precision highp float;\n#define GLSLIFY 1\n\nuniform vec4 color;\nvoid main() {\n  gl_FragColor \x3d color;\n}"]);G.line=function(r){return p(r,n,k,null,[{name:"position",type:"vec3"}])};var m=N(["precision highp float;\n#define GLSLIFY 1\n\nattribute vec3 position;\n\nuniform mat4 model, view, projection;\nuniform vec3 offset, axis, alignDir, alignOpt;\nuniform float scale, angle, pixelScale;\nuniform vec2 resolution;\n\nvec3 project(vec3 p) {\n  vec4 pp \x3d projection * view * model * vec4(p, 1.0);\n  return pp.xyz / max(pp.w, 0.0001);\n}\n\nfloat computeViewAngle(vec3 a, vec3 b) {\n  vec3 A \x3d project(a);\n  vec3 B \x3d project(b);\n\n  return atan(\n    (B.y - A.y) * resolution.y,\n    (B.x - A.x) * resolution.x\n  );\n}\n\nconst float PI \x3d 3.141592;\nconst float TWO_PI \x3d 2.0 * PI;\nconst float HALF_PI \x3d 0.5 * PI;\nconst float ONE_AND_HALF_PI \x3d 1.5 * PI;\n\nint option \x3d int(floor(alignOpt.x + 0.001));\nfloat hv_ratio \x3d       alignOpt.y;\nbool enableAlign \x3d    (alignOpt.z !\x3d 0.0);\n\nfloat mod_angle(float a) {\n  return mod(a, PI);\n}\n\nfloat positive_angle(float a) {\n  return mod_angle((a \x3c 0.0) ?\n    a + TWO_PI :\n    a\n  );\n}\n\nfloat look_upwards(float a) {\n  float b \x3d positive_angle(a);\n  return ((b \x3e HALF_PI) \x26\x26 (b \x3c\x3d ONE_AND_HALF_PI)) ?\n    b - PI :\n    b;\n}\n\nfloat look_horizontal_or_vertical(float a, float ratio) {\n  // ratio controls the ratio between being horizontal to (vertical + horizontal)\n  // if ratio is set to 0.5 then it is 50%, 50%.\n  // when using a higher ratio e.g. 0.75 the result would\n  // likely be more horizontal than vertical.\n\n  float b \x3d positive_angle(a);\n\n  return\n    (b \x3c (      ratio) * HALF_PI) ? 0.0 :\n    (b \x3c (2.0 - ratio) * HALF_PI) ? -HALF_PI :\n    (b \x3c (2.0 + ratio) * HALF_PI) ? 0.0 :\n    (b \x3c (4.0 - ratio) * HALF_PI) ? HALF_PI :\n                                    0.0;\n}\n\nfloat roundTo(float a, float b) {\n  return float(b * floor((a + 0.5 * b) / b));\n}\n\nfloat look_round_n_directions(float a, int n) {\n  float b \x3d positive_angle(a);\n  float div \x3d TWO_PI / float(n);\n  float c \x3d roundTo(b, div);\n  return look_upwards(c);\n}\n\nfloat applyAlignOption(float rawAngle, float delta) {\n  return\n    (option \x3e  2) ? look_round_n_directions(rawAngle + delta, option) :       // option 3-n: round to n directions\n    (option \x3d\x3d 2) ? look_horizontal_or_vertical(rawAngle + delta, hv_ratio) : // horizontal or vertical\n    (option \x3d\x3d 1) ? rawAngle + delta :       // use free angle, and flip to align with one direction of the axis\n    (option \x3d\x3d 0) ? look_upwards(rawAngle) : // use free angle, and stay upwards\n    (option \x3d\x3d-1) ? 0.0 :                    // useful for backward compatibility, all texts remains horizontal\n                    rawAngle;                // otherwise return back raw input angle\n}\n\nbool isAxisTitle \x3d (axis.x \x3d\x3d 0.0) \x26\x26\n                   (axis.y \x3d\x3d 0.0) \x26\x26\n                   (axis.z \x3d\x3d 0.0);\n\nvoid main() {\n  //Compute world offset\n  float axisDistance \x3d position.z;\n  vec3 dataPosition \x3d axisDistance * axis + offset;\n\n  float beta \x3d angle; // i.e. user defined attributes for each tick\n\n  float axisAngle;\n  float clipAngle;\n  float flip;\n\n  if (enableAlign) {\n    axisAngle \x3d (isAxisTitle) ? HALF_PI :\n                      computeViewAngle(dataPosition, dataPosition + axis);\n    clipAngle \x3d computeViewAngle(dataPosition, dataPosition + alignDir);\n\n    axisAngle +\x3d (sin(axisAngle) \x3c 0.0) ? PI : 0.0;\n    clipAngle +\x3d (sin(clipAngle) \x3c 0.0) ? PI : 0.0;\n\n    flip \x3d (dot(vec2(cos(axisAngle), sin(axisAngle)),\n                vec2(sin(clipAngle),-cos(clipAngle))) \x3e 0.0) ? 1.0 : 0.0;\n\n    beta +\x3d applyAlignOption(clipAngle, flip * PI);\n  }\n\n  //Compute plane offset\n  vec2 planeCoord \x3d position.xy * pixelScale;\n\n  mat2 planeXform \x3d scale * mat2(\n     cos(beta), sin(beta),\n    -sin(beta), cos(beta)\n  );\n\n  vec2 viewOffset \x3d 2.0 * planeXform * planeCoord / resolution;\n\n  //Compute clip position\n  vec3 clipPosition \x3d project(dataPosition);\n\n  //Apply text offset in clip coordinates\n  clipPosition +\x3d vec3(viewOffset, 0.0);\n\n  //Done\n  gl_Position \x3d vec4(clipPosition, 1.0);\n}"]),
a=N(["precision highp float;\n#define GLSLIFY 1\n\nuniform vec4 color;\nvoid main() {\n  gl_FragColor \x3d color;\n}"]);G.text=function(r){return p(r,m,a,null,[{name:"position",type:"vec3"}])};var g=N(["precision highp float;\n#define GLSLIFY 1\n\nattribute vec3 position;\nattribute vec3 normal;\n\nuniform mat4 model, view, projection;\nuniform vec3 enable;\nuniform vec3 bounds[2];\n\nvarying vec3 colorChannel;\n\nvoid main() {\n\n  vec3 signAxis \x3d sign(bounds[1] - bounds[0]);\n\n  vec3 realNormal \x3d signAxis * normal;\n\n  if(dot(realNormal, enable) \x3e 0.0) {\n    vec3 minRange \x3d min(bounds[0], bounds[1]);\n    vec3 maxRange \x3d max(bounds[0], bounds[1]);\n    vec3 nPosition \x3d mix(minRange, maxRange, 0.5 * (position + 1.0));\n    gl_Position \x3d projection * view * model * vec4(nPosition, 1.0);\n  } else {\n    gl_Position \x3d vec4(0,0,0,0);\n  }\n\n  colorChannel \x3d abs(realNormal);\n}"]),
h=N(["precision highp float;\n#define GLSLIFY 1\n\nuniform vec4 colors[3];\n\nvarying vec3 colorChannel;\n\nvoid main() {\n  gl_FragColor \x3d colorChannel.x * colors[0] +\n                 colorChannel.y * colors[1] +\n                 colorChannel.z * colors[2];\n}"]);G.bg=function(r){return p(r,g,h,null,[{name:"position",type:"vec3"},{name:"normal",type:"vec3"}])}},{"gl-shader":339,glslify:265}],263:[function(b,N,G){(function(p){(function(){function n(c,d,e,f){this.gl=c;this.shader=d;this.buffer=
e;this.vao=f;this.tickOffset=this.tickCount=this.labelOffset=this.labelCount=null}N.exports=function(c,d,e,f,q,t){var w=k(c),x=m(c,[{buffer:w,size:3}]),z=g(c);z.attributes.position.location=0;c=new n(c,z,w,x);c.update(d,e,f,q,t);return c};var k=b("gl-buffer"),m=b("gl-vao"),a=b("vectorize-text"),g=b("./shaders").text,h=window||p.global||{},r=h.__TEXT_CACHE||{};h.__TEXT_CACHE={};h=n.prototype;var l=[0,0];h.bind=function(c,d,e,f){this.vao.bind();this.shader.bind();var q=this.shader.uniforms;q.model=
c;q.view=d;q.projection=e;q.pixelScale=f;l[0]=this.gl.drawingBufferWidth;l[1]=this.gl.drawingBufferHeight;this.shader.uniforms.resolution=l};h.unbind=function(){this.vao.unbind()};h.update=function(c,d,e,f,q){function t(y,F,J,K,M,H){var O=r[J];O||(O=r[J]={});var I=O[F];if(!I){I=O;J={triangles:!0,font:J,textAlign:"center",textBaseline:"middle",lineSpacing:M,styletags:H};try{var L=a(F,J)}catch(Q){console.warn('error vectorizing text:"'+F+'" error:',Q),L={cells:[],positions:[]}}I=I[F]=L}F=(K||12)/12;
K=I.positions;I=I.cells;L=0;for(J=I.length;L<J;++L)for(M=I[L],H=2;0<=H;--H)O=K[M[H]],w.push(F*O[0],-F*O[1],y)}for(var w=[],x=[0,0,0],z=[0,0,0],B=[0,0,0],A=[0,0,0],D={breaklines:!0,bolds:!0,italics:!0,subscripts:!0,superscripts:!0},C=0;3>C;++C){B[C]=w.length/3|0;t(.5*(c[0][C]+c[1][C]),d[C],e[C],12,1.25,D);A[C]=(w.length/3|0)-B[C];x[C]=w.length/3|0;for(var v=0;v<f[C].length;++v)f[C][v].text&&t(f[C][v].x,f[C][v].text,f[C][v].font||q,f[C][v].fontSize||12,1.25,D);z[C]=(w.length/3|0)-x[C]}this.buffer.update(w);
this.tickOffset=x;this.tickCount=z;this.labelOffset=B;this.labelCount=A};h.drawTicks=function(c,d,e,f,q,t,w,x){this.tickCount[c]&&(this.shader.uniforms.axis=t,this.shader.uniforms.color=q,this.shader.uniforms.angle=e,this.shader.uniforms.scale=d,this.shader.uniforms.offset=f,this.shader.uniforms.alignDir=w,this.shader.uniforms.alignOpt=x,this.vao.draw(this.gl.TRIANGLES,this.tickCount[c],this.tickOffset[c]))};h.drawLabel=function(c,d,e,f,q,t,w,x){this.labelCount[c]&&(this.shader.uniforms.axis=t,this.shader.uniforms.color=
q,this.shader.uniforms.angle=e,this.shader.uniforms.scale=d,this.shader.uniforms.offset=f,this.shader.uniforms.alignDir=w,this.shader.uniforms.alignOpt=x,this.vao.draw(this.gl.TRIANGLES,this.labelCount[c],this.labelOffset[c]))};h.dispose=function(){this.shader.dispose();this.vao.dispose();this.buffer.dispose()}}).call(this)}).call(this,b("_process"))},{"./shaders":262,_process:528,"gl-buffer":267,"gl-vao":361,"vectorize-text":623}],264:[function(b,N,G){function p(n,k){var m=n+"",a=m.indexOf("."),
g=0;0<=a&&(g=m.length-a-1);m=Math.pow(10,g);n=Math.round(n*k*m);k=n+"";if(0<=k.indexOf("e"))return k;k=n/m;m=n%m;0>n?(k=-Math.ceil(k)|0,m=-m|0):(k=Math.floor(k)|0,m|=0);k=""+k;0>n&&(k="-"+k);if(g){for(m=""+m;m.length<g;)m="0"+m;return k+"."+m}return k}G.create=function(n,k){for(var m=[],a=0;3>a;++a){for(var g=[],h=0;h*k[a]<=n[1][a];++h)g.push({x:h*k[a],text:p(k[a],h)});for(h=-1;h*k[a]>=n[0][a];--h)g.push({x:h*k[a],text:p(k[a],h)});m.push(g)}return m};G.equal=function(n,k){for(var m=0;3>m;++m){if(n[m].length!==
k[m].length)return!1;for(var a=0;a<n[m].length;++a){var g=n[m][a],h=k[m][a];if(g.x!==h.x||g.text!==h.text||g.font!==h.font||g.fontColor!==h.fontColor||g.fontSize!==h.fontSize||g.dx!==h.dx||g.dy!==h.dy)return!1}}return!0}},{}],265:[function(b,N,G){N.exports=function(p){"string"===typeof p&&(p=[p]);for(var n=[].slice.call(arguments,1),k=[],m=0;m<p.length-1;m++)k.push(p[m],n[m]||"");k.push(p[m]);return k.join("")}},{}],266:[function(b,N,G){function p(q,t,w){this.lo=q;this.hi=t;this.pixelsPerDataUnit=
w}N.exports=function(q,t,w,x,z){var B=t.model||r,A=t.view||r,D=t.projection||r;t=t._ortho||!1;q=q.bounds;z=z||m(B,A,D,q,t);z=z.axis;a(l,A,B);a(l,D,l);B=e;for(A=0;3>A;++A)B[A].lo=Infinity,B[A].hi=-Infinity,B[A].pixelsPerDataUnit=Infinity;D=n(g(l,l));g(l,l);for(var C=0;3>C;++C){var v=(C+1)%3,y=(C+2)%3,F=f;A=0;a:for(;2>A;++A){var J=[];if(0>z[C]!==!!A){F[C]=q[A][C];for(var K=0;2>K;++K){F[v]=q[K^A][v];for(var M=0;2>M;++M)F[y]=q[M^K^A][y],J.push(F.slice())}for(K=M=t?5:4;K===M;++K){if(0===J.length)continue a;
J=k.positive(J,D[K])}for(K=0;K<J.length;++K){y=J[K];M=f;var H=l;for(var O=y,I=w,L=x,Q=0;3>Q;++Q){for(var Z=c,ba=d,V=0;3>V;++V)ba[V]=Z[V]=O[V];ba[3]=Z[3]=1;ba[Q]+=1;h(ba,ba,H);0>ba[3]&&(M[Q]=Infinity);--Z[Q];h(Z,Z,H);0>Z[3]&&(M[Q]=Infinity);V=(Z[0]/Z[3]-ba[0]/ba[3])*I;Z=(Z[1]/Z[3]-ba[1]/ba[3])*L;M[Q]=.25*Math.sqrt(V*V+Z*Z)}H=M;for(M=0;3>M;++M)B[M].lo=Math.min(B[M].lo,y[M]),B[M].hi=Math.max(B[M].hi,y[M]),M!==C&&(B[M].pixelsPerDataUnit=Math.min(B[M].pixelsPerDataUnit,Math.abs(H[M])))}}}}return B};var n=
b("extract-frustum-planes"),k=b("split-polygon"),m=b("./lib/cube.js"),a=b("gl-mat4/multiply"),g=b("gl-mat4/transpose"),h=b("gl-vec4/transformMat4"),r=new Float32Array([1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1]),l=new Float32Array(16),c=[0,0,0,1],d=[0,0,0,1],e=[new p(Infinity,-Infinity,Infinity),new p(Infinity,-Infinity,Infinity),new p(Infinity,-Infinity,Infinity)],f=[0,0,0]},{"./lib/cube.js":260,"extract-frustum-planes":248,"gl-mat4/multiply":301,"gl-mat4/transpose":312,"gl-vec4/transformMat4":432,"split-polygon":567}],
267:[function(b,N,G){function p(r,l,c,d,e){this.gl=r;this.type=l;this.handle=c;this.length=d;this.usage=e}function n(r,l,c,d,e,f){var q=e.length*e.BYTES_PER_ELEMENT;if(0>f)return r.bufferData(l,e,d),q;if(q+f>c)throw Error("gl-buffer: If resizing buffer, must not specify offset");r.bufferSubData(l,f,e);return c}function k(r,l){l=m.malloc(r.length,l);for(var c=r.length,d=0;d<c;++d)l[d]=r[d];return l}var m=b("typedarray-pool"),a=b("ndarray-ops"),g=b("ndarray"),h="uint8 uint8_clamped uint16 uint32 int8 int16 int32 float32".split(" ");
b=p.prototype;b.bind=function(){this.gl.bindBuffer(this.type,this.handle)};b.unbind=function(){this.gl.bindBuffer(this.type,null)};b.dispose=function(){this.gl.deleteBuffer(this.handle)};b.update=function(r,l){"number"!==typeof l&&(l=-1);this.bind();if("object"===typeof r&&"undefined"!==typeof r.shape){var c=r.dtype;0>h.indexOf(c)&&(c="float32");this.type===this.gl.ELEMENT_ARRAY_BUFFER&&(c=gl.getExtension("OES_element_index_uint")&&"uint16"!==c?"uint32":"uint16");var d;if(d=c===r.dtype)a:{d=r.stride;
for(var e=1,f=d.length-1;0<=f;--f){if(d[f]!==e){d=!1;break a}e*=r.shape[f]}d=!0}d?this.length=0===r.offset&&r.data.length===r.shape[0]?n(this.gl,this.type,this.length,this.usage,r.data,l):n(this.gl,this.type,this.length,this.usage,r.data.subarray(r.offset,r.shape[0]),l):(c=m.malloc(r.size,c),d=g(c,r.shape),a.assign(d,r),this.length=0>l?n(this.gl,this.type,this.length,this.usage,c,l):n(this.gl,this.type,this.length,this.usage,c.subarray(0,r.size),l),m.free(c))}else if(Array.isArray(r))c=this.type===
this.gl.ELEMENT_ARRAY_BUFFER?k(r,"uint16"):k(r,"float32"),this.length=0>l?n(this.gl,this.type,this.length,this.usage,c,l):n(this.gl,this.type,this.length,this.usage,c.subarray(0,r.length),l),m.free(c);else if("object"===typeof r&&"number"===typeof r.length)this.length=n(this.gl,this.type,this.length,this.usage,r,l);else if("number"===typeof r||void 0===r){if(0<=l)throw Error("gl-buffer: Cannot specify offset when resizing buffer");r|=0;0>=r&&(r=1);this.gl.bufferData(this.type,r|0,this.usage);this.length=
r}else throw Error("gl-buffer: Invalid data type");};N.exports=function(r,l,c,d){c=c||r.ARRAY_BUFFER;d=d||r.DYNAMIC_DRAW;if(c!==r.ARRAY_BUFFER&&c!==r.ELEMENT_ARRAY_BUFFER)throw Error("gl-buffer: Invalid type for webgl buffer, must be either gl.ARRAY_BUFFER or gl.ELEMENT_ARRAY_BUFFER");if(d!==r.DYNAMIC_DRAW&&d!==r.STATIC_DRAW&&d!==r.STREAM_DRAW)throw Error("gl-buffer: Invalid usage for buffer, must be either gl.DYNAMIC_DRAW, gl.STATIC_DRAW or gl.STREAM_DRAW");var e=r.createBuffer();r=new p(r,c,e,0,
d);r.update(l);return r}},{ndarray:483,"ndarray-ops":478,"typedarray-pool":617}],268:[function(b,N,G){var p=b("gl-vec3");N.exports=function(k,m){var a=k.positions,g=k.vectors,h={positions:[],vertexIntensity:[],vertexIntensityBounds:k.vertexIntensityBounds,vectors:[],cells:[],coneOffset:k.coneOffset,colormap:k.colormap};if(0===k.positions.length)return m&&(m[0]=[0,0,0],m[1]=[0,0,0]),h;for(var r=0,l=Infinity,c=-Infinity,d=Infinity,e=-Infinity,f=Infinity,q=-Infinity,t=null,w=null,x=[],z=Infinity,B=!1,
A=0;A<a.length;A++){var D=a[A];l=Math.min(D[0],l);c=Math.max(D[0],c);d=Math.min(D[1],d);e=Math.max(D[1],e);f=Math.min(D[2],f);q=Math.max(D[2],q);var C=g[A];p.length(C)>r&&(r=p.length(C));A&&((B=2*p.distance(t,D)/(p.length(w)+p.length(C)))?(z=Math.min(z,B),B=!1):B=!0);B||(t=D,w=C);x.push(C)}A=[l,d,f];D=[c,e,q];m&&(m[0]=A,m[1]=D);0===r&&(r=1);m=1/r;isFinite(z)||(z=1);h.vectorScale=z;A=k.coneSize||.5;k.absoluteConeSize&&(A=k.absoluteConeSize*m);h.coneScale=A;for(k=A=0;A<a.length;A++)for(D=a[A],z=D[0],
r=D[1],D=D[2],c=x[A],e=p.length(c)*m,q=0;8>q;q++)h.positions.push([z,r,D,k++]),h.positions.push([z,r,D,k++]),h.positions.push([z,r,D,k++]),h.positions.push([z,r,D,k++]),h.positions.push([z,r,D,k++]),h.positions.push([z,r,D,k++]),h.vectors.push(c),h.vectors.push(c),h.vectors.push(c),h.vectors.push(c),h.vectors.push(c),h.vectors.push(c),h.vertexIntensity.push(e,e,e),h.vertexIntensity.push(e,e,e),g=h.positions.length,h.cells.push([g-6,g-5,g-4],[g-3,g-2,g-1]);return h};var n=b("./lib/shaders");N.exports.createMesh=
b("./create_mesh");N.exports.createConeMesh=function(k,m){return N.exports.createMesh(k,m,{shaders:n,traceType:"cone"})}},{"./create_mesh":269,"./lib/shaders":270,"gl-vec3":380}],269:[function(b,N,G){function p(d,e,f,q,t,w,x,z,B,A,D){this.gl=d;this.pixelRatio=1;this.cells=[];this.positions=[];this.intensity=[];this.texture=e;this.dirty=!0;this.triShader=f;this.pickShader=q;this.trianglePositions=t;this.triangleVectors=w;this.triangleColors=z;this.triangleUVs=B;this.triangleIds=x;this.triangleVAO=
A;this.triangleCount=0;this.pickId=1;this.bounds=[[Infinity,Infinity,Infinity],[-Infinity,-Infinity,-Infinity]];this.clipBounds=[[-Infinity,-Infinity,-Infinity],[Infinity,Infinity,Infinity]];this.lightPosition=[1E5,1E5,0];this.diffuseLight=this.ambientLight=.8;this.specularLight=2;this.roughness=.5;this.fresnel=1.5;this.opacity=1;this.traceType=D;this.tubeScale=1;this.coneScale=2;this.vectorScale=1;this.coneOffset=.25;this._projection=this._view=this._model=c;this._resolution=[1,1]}var n=b("gl-shader"),
k=b("gl-buffer"),m=b("gl-vao"),a=b("gl-texture2d"),g=b("gl-mat4/multiply"),h=b("gl-mat4/invert"),r=b("ndarray"),l=b("colormap"),c=[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1];b=p.prototype;b.isOpaque=function(){return 1<=this.opacity};b.isTransparent=function(){return 1>this.opacity};b.pickSlots=1;b.setPickBase=function(d){this.pickId=d};b.update=function(d){d=d||{};var e=this.gl;this.dirty=!0;"lightPosition"in d&&(this.lightPosition=d.lightPosition);"opacity"in d&&(this.opacity=d.opacity);"ambient"in d&&(this.ambientLight=
d.ambient);"diffuse"in d&&(this.diffuseLight=d.diffuse);"specular"in d&&(this.specularLight=d.specular);"roughness"in d&&(this.roughness=d.roughness);"fresnel"in d&&(this.fresnel=d.fresnel);void 0!==d.tubeScale&&(this.tubeScale=d.tubeScale);void 0!==d.vectorScale&&(this.vectorScale=d.vectorScale);void 0!==d.coneScale&&(this.coneScale=d.coneScale);void 0!==d.coneOffset&&(this.coneOffset=d.coneOffset);if(d.colormap){this.texture.shape=[256,256];this.texture.minFilter=e.LINEAR_MIPMAP_LINEAR;this.texture.magFilter=
e.LINEAR;e=this.texture;var f=e.setPixels;var q=l({colormap:d.colormap,nshades:256,format:"rgba"});for(var t=new Uint8Array(1024),w=0;256>w;++w){for(var x=q[w],z=0;3>z;++z)t[4*w+z]=x[z];t[4*w+3]=255*x[3]}q=r(t,[256,256,4],[4,0,1]);f.call(e,q);this.texture.generateMipmap()}e=d.cells;f=d.positions;q=d.vectors;if(f&&e&&q){t=[];w=[];x=[];z=[];var B=[];this.cells=e;this.positions=f;this.vectors=q;var A=d.meshColor||[1,1,1,1],D=d.vertexIntensity,C=Infinity,v=-Infinity;if(D)if(d.vertexIntensityBounds)C=
+d.vertexIntensityBounds[0],v=+d.vertexIntensityBounds[1];else for(d=0;d<D.length;++d){var y=D[d];C=Math.min(C,y);v=Math.max(v,y)}else for(d=0;d<f.length;++d)y=f[d][2],C=Math.min(C,y),v=Math.max(v,y);if(D)this.intensity=D;else{d=f.length;y=Array(d);for(var F=0;F<d;++F)y[F]=f[F][2];this.intensity=y}this.bounds=[[Infinity,Infinity,Infinity],[-Infinity,-Infinity,-Infinity]];for(d=0;d<f.length;++d){var J=f[d];for(y=0;3>y;++y)!isNaN(J[y])&&isFinite(J[y])&&(this.bounds[0][y]=Math.min(this.bounds[0][y],
J[y]),this.bounds[1][y]=Math.max(this.bounds[1][y],J[y]))}d=F=0;a:for(;d<e.length;++d){var K=e[d];switch(K.length){case 3:for(y=0;3>y;++y){var M=K[y];J=f[M];for(M=0;3>M;++M)if(isNaN(J[M])||!isFinite(J[M]))continue a}for(y=0;3>y;++y){M=K[2-y];J=f[M];t.push(J[0],J[1],J[2],J[3]);var H=q[M];w.push(H[0],H[1],H[2],H[3]||0);H=A;3===H.length?x.push(H[0],H[1],H[2],1):x.push(H[0],H[1],H[2],H[3]);J=D?[(D[M]-C)/(v-C),0]:[(J[2]-C)/(v-C),0];z.push(J[0],J[1]);B.push(d)}F+=1}}this.triangleCount=F;this.trianglePositions.update(t);
this.triangleVectors.update(w);this.triangleColors.update(x);this.triangleUVs.update(z);this.triangleIds.update(new Uint32Array(B))}};b.drawTransparent=b.draw=function(d){d=d||{};var e=this.gl,f=d.model||c,q=d.view||c,t=d.projection||c,w=[[-1E6,-1E6,-1E6],[1E6,1E6,1E6]];for(d=0;3>d;++d)w[0][d]=Math.max(w[0][d],this.clipBounds[0][d]),w[1][d]=Math.min(w[1][d],this.clipBounds[1][d]);f={model:f,view:q,projection:t,inverseModel:c.slice(),clipBounds:w,kambient:this.ambientLight,kdiffuse:this.diffuseLight,
kspecular:this.specularLight,roughness:this.roughness,fresnel:this.fresnel,eyePosition:[0,0,0],lightPosition:[0,0,0],opacity:this.opacity,tubeScale:this.tubeScale,vectorScale:this.vectorScale,coneScale:this.coneScale,coneOffset:this.coneOffset,texture:0};f.inverseModel=h(f.inverseModel,f.model);e.disable(e.CULL_FACE);this.texture.bind(0);q=Array(16);g(q,f.view,f.model);g(q,f.projection,q);h(q,q);for(d=0;3>d;++d)f.eyePosition[d]=q[12+d]/q[15];t=q[15];for(d=0;3>d;++d)t+=this.lightPosition[d]*q[4*d+
3];for(d=0;3>d;++d){w=q[12+d];for(var x=0;3>x;++x)w+=q[4*x+d]*this.lightPosition[x];f.lightPosition[d]=w/t}0<this.triangleCount&&(d=this.triShader,d.bind(),d.uniforms=f,this.triangleVAO.bind(),e.drawArrays(e.TRIANGLES,0,3*this.triangleCount),this.triangleVAO.unbind())};b.drawPick=function(d){d=d||{};var e=this.gl,f=d.model||c,q=d.view||c;d=d.projection||c;for(var t=[[-1E6,-1E6,-1E6],[1E6,1E6,1E6]],w=0;3>w;++w)t[0][w]=Math.max(t[0][w],this.clipBounds[0][w]),t[1][w]=Math.min(t[1][w],this.clipBounds[1][w]);
this._model=[].slice.call(f);this._view=[].slice.call(q);this._projection=[].slice.call(d);this._resolution=[e.drawingBufferWidth,e.drawingBufferHeight];f={model:f,view:q,projection:d,clipBounds:t,tubeScale:this.tubeScale,vectorScale:this.vectorScale,coneScale:this.coneScale,coneOffset:this.coneOffset,pickId:this.pickId/255};q=this.pickShader;q.bind();q.uniforms=f;0<this.triangleCount&&(this.triangleVAO.bind(),e.drawArrays(e.TRIANGLES,0,3*this.triangleCount),this.triangleVAO.unbind())};b.pick=function(d){if(!d||
d.id!==this.pickId)return null;d=d.value[0]+256*d.value[1]+65536*d.value[2];var e=this.cells[d],f=this.positions[e[1]].slice(0,3);f={position:f,dataCoordinate:f,index:Math.floor(e[1]/48)};"cone"===this.traceType?f.index=Math.floor(e[1]/48):"streamtube"===this.traceType&&(f.intensity=this.intensity[e[1]],f.velocity=this.vectors[e[1]].slice(0,3),f.divergence=this.vectors[e[1]][3],f.index=d);return f};b.dispose=function(){this.texture.dispose();this.triShader.dispose();this.pickShader.dispose();this.triangleVAO.dispose();
this.trianglePositions.dispose();this.triangleVectors.dispose();this.triangleColors.dispose();this.triangleUVs.dispose();this.triangleIds.dispose()};N.exports=function(d,e,f){var q=f.shaders;1===arguments.length&&(e=d,d=e.gl);var t=n(d,q.meshShader.vertex,q.meshShader.fragment,null,q.meshShader.attributes);t.attributes.position.location=0;t.attributes.color.location=2;t.attributes.uv.location=3;t.attributes.vector.location=4;q=n(d,q.pickShader.vertex,q.pickShader.fragment,null,q.pickShader.attributes);
q.attributes.position.location=0;q.attributes.id.location=1;q.attributes.vector.location=4;var w=a(d,r(new Uint8Array([255,255,255,255]),[1,1,4]));w.generateMipmap();w.minFilter=d.LINEAR_MIPMAP_LINEAR;w.magFilter=d.LINEAR;var x=k(d),z=k(d),B=k(d),A=k(d),D=k(d),C=m(d,[{buffer:x,type:d.FLOAT,size:4},{buffer:D,type:d.UNSIGNED_BYTE,size:4,normalized:!0},{buffer:B,type:d.FLOAT,size:4},{buffer:A,type:d.FLOAT,size:2},{buffer:z,type:d.FLOAT,size:4}]);t=new p(d,w,t,q,x,z,D,B,A,C,f.traceType||"cone");t.update(e);
return t}},{colormap:137,"gl-buffer":267,"gl-mat4/invert":299,"gl-mat4/multiply":301,"gl-shader":339,"gl-texture2d":356,"gl-vao":361,ndarray:483}],270:[function(b,N,G){var p=b("glslify");b=p(["precision highp float;\n\nprecision highp float;\n#define GLSLIFY 1\n\nvec3 getOrthogonalVector(vec3 v) {\n  // Return up-vector for only-z vector.\n  // Return ax + by + cz \x3d 0, a point that lies on the plane that has v as a normal and that isn't (0,0,0).\n  // From the above if-statement we have ||a|| \x3e 0  U  ||b|| \x3e 0.\n  // Assign z \x3d 0, x \x3d -b, y \x3d a:\n  // a*-b + b*a + c*0 \x3d -ba + ba + 0 \x3d 0\n  if (v.x*v.x \x3e v.z*v.z || v.y*v.y \x3e v.z*v.z) {\n    return normalize(vec3(-v.y, v.x, 0.0));\n  } else {\n    return normalize(vec3(0.0, v.z, -v.y));\n  }\n}\n\n// Calculate the cone vertex and normal at the given index.\n//\n// The returned vertex is for a cone with its top at origin and height of 1.0,\n// pointing in the direction of the vector attribute.\n//\n// Each cone is made up of a top vertex, a center base vertex and base perimeter vertices.\n// These vertices are used to make up the triangles of the cone by the following:\n//   segment + 0 top vertex\n//   segment + 1 perimeter vertex a+1\n//   segment + 2 perimeter vertex a\n//   segment + 3 center base vertex\n//   segment + 4 perimeter vertex a\n//   segment + 5 perimeter vertex a+1\n// Where segment is the number of the radial segment * 6 and a is the angle at that radial segment.\n// To go from index to segment, floor(index / 6)\n// To go from segment to angle, 2*pi * (segment/segmentCount)\n// To go from index to segment index, index - (segment*6)\n//\nvec3 getConePosition(vec3 d, float rawIndex, float coneOffset, out vec3 normal) {\n\n  const float segmentCount \x3d 8.0;\n\n  float index \x3d rawIndex - floor(rawIndex /\n    (segmentCount * 6.0)) *\n    (segmentCount * 6.0);\n\n  float segment \x3d floor(0.001 + index/6.0);\n  float segmentIndex \x3d index - (segment*6.0);\n\n  normal \x3d -normalize(d);\n\n  if (segmentIndex \x3e 2.99 \x26\x26 segmentIndex \x3c 3.01) {\n    return mix(vec3(0.0), -d, coneOffset);\n  }\n\n  float nextAngle \x3d (\n    (segmentIndex \x3e 0.99 \x26\x26  segmentIndex \x3c 1.01) ||\n    (segmentIndex \x3e 4.99 \x26\x26  segmentIndex \x3c 5.01)\n  ) ? 1.0 : 0.0;\n  float angle \x3d 2.0 * 3.14159 * ((segment + nextAngle) / segmentCount);\n\n  vec3 v1 \x3d mix(d, vec3(0.0), coneOffset);\n  vec3 v2 \x3d v1 - d;\n\n  vec3 u \x3d getOrthogonalVector(d);\n  vec3 v \x3d normalize(cross(u, d));\n\n  vec3 x \x3d u * cos(angle) * length(d)*0.25;\n  vec3 y \x3d v * sin(angle) * length(d)*0.25;\n  vec3 v3 \x3d v2 + x + y;\n  if (segmentIndex \x3c 3.0) {\n    vec3 tx \x3d u * sin(angle);\n    vec3 ty \x3d v * -cos(angle);\n    vec3 tangent \x3d tx + ty;\n    normal \x3d normalize(cross(v3 - v1, tangent));\n  }\n\n  if (segmentIndex \x3d\x3d 0.0) {\n    return mix(d, vec3(0.0), coneOffset);\n  }\n  return v3;\n}\n\nattribute vec3 vector;\nattribute vec4 color, position;\nattribute vec2 uv;\n\nuniform float vectorScale, coneScale, coneOffset;\nuniform mat4 model, view, projection, inverseModel;\nuniform vec3 eyePosition, lightPosition;\n\nvarying vec3 f_normal, f_lightDirection, f_eyeDirection, f_data, f_position;\nvarying vec4 f_color;\nvarying vec2 f_uv;\n\nvoid main() {\n  // Scale the vector magnitude to stay constant with\n  // model \x26 view changes.\n  vec3 normal;\n  vec3 XYZ \x3d getConePosition(mat3(model) * ((vectorScale * coneScale) * vector), position.w, coneOffset, normal);\n  vec4 conePosition \x3d model * vec4(position.xyz, 1.0) + vec4(XYZ, 0.0);\n\n  //Lighting geometry parameters\n  vec4 cameraCoordinate \x3d view * conePosition;\n  cameraCoordinate.xyz /\x3d cameraCoordinate.w;\n  f_lightDirection \x3d lightPosition - cameraCoordinate.xyz;\n  f_eyeDirection   \x3d eyePosition - cameraCoordinate.xyz;\n  f_normal \x3d normalize((vec4(normal, 0.0) * inverseModel).xyz);\n\n  // vec4 m_position  \x3d model * vec4(conePosition, 1.0);\n  vec4 t_position  \x3d view * conePosition;\n  gl_Position      \x3d projection * t_position;\n\n  f_color          \x3d color;\n  f_data           \x3d conePosition.xyz;\n  f_position       \x3d position.xyz;\n  f_uv             \x3d uv;\n}\n"]);
N=p(["#extension GL_OES_standard_derivatives : enable\n\nprecision highp float;\n#define GLSLIFY 1\n\nfloat beckmannDistribution(float x, float roughness) {\n  float NdotH \x3d max(x, 0.0001);\n  float cos2Alpha \x3d NdotH * NdotH;\n  float tan2Alpha \x3d (cos2Alpha - 1.0) / cos2Alpha;\n  float roughness2 \x3d roughness * roughness;\n  float denom \x3d 3.141592653589793 * roughness2 * cos2Alpha * cos2Alpha;\n  return exp(tan2Alpha / roughness2) / denom;\n}\n\nfloat cookTorranceSpecular(\n  vec3 lightDirection,\n  vec3 viewDirection,\n  vec3 surfaceNormal,\n  float roughness,\n  float fresnel) {\n\n  float VdotN \x3d max(dot(viewDirection, surfaceNormal), 0.0);\n  float LdotN \x3d max(dot(lightDirection, surfaceNormal), 0.0);\n\n  //Half angle vector\n  vec3 H \x3d normalize(lightDirection + viewDirection);\n\n  //Geometric term\n  float NdotH \x3d max(dot(surfaceNormal, H), 0.0);\n  float VdotH \x3d max(dot(viewDirection, H), 0.000001);\n  float LdotH \x3d max(dot(lightDirection, H), 0.000001);\n  float G1 \x3d (2.0 * NdotH * VdotN) / VdotH;\n  float G2 \x3d (2.0 * NdotH * LdotN) / LdotH;\n  float G \x3d min(1.0, min(G1, G2));\n  \n  //Distribution term\n  float D \x3d beckmannDistribution(NdotH, roughness);\n\n  //Fresnel term\n  float F \x3d pow(1.0 - VdotN, fresnel);\n\n  //Multiply terms and done\n  return  G * F * D / max(3.14159265 * VdotN, 0.000001);\n}\n\nbool outOfRange(float a, float b, float p) {\n  return ((p \x3e max(a, b)) || \n          (p \x3c min(a, b)));\n}\n\nbool outOfRange(vec2 a, vec2 b, vec2 p) {\n  return (outOfRange(a.x, b.x, p.x) ||\n          outOfRange(a.y, b.y, p.y));\n}\n\nbool outOfRange(vec3 a, vec3 b, vec3 p) {\n  return (outOfRange(a.x, b.x, p.x) ||\n          outOfRange(a.y, b.y, p.y) ||\n          outOfRange(a.z, b.z, p.z));\n}\n\nbool outOfRange(vec4 a, vec4 b, vec4 p) {\n  return outOfRange(a.xyz, b.xyz, p.xyz);\n}\n\nuniform vec3 clipBounds[2];\nuniform float roughness, fresnel, kambient, kdiffuse, kspecular, opacity;\nuniform sampler2D texture;\n\nvarying vec3 f_normal, f_lightDirection, f_eyeDirection, f_data, f_position;\nvarying vec4 f_color;\nvarying vec2 f_uv;\n\nvoid main() {\n  if (outOfRange(clipBounds[0], clipBounds[1], f_position)) discard;\n  vec3 N \x3d normalize(f_normal);\n  vec3 L \x3d normalize(f_lightDirection);\n  vec3 V \x3d normalize(f_eyeDirection);\n\n  if(gl_FrontFacing) {\n    N \x3d -N;\n  }\n\n  float specular \x3d min(1.0, max(0.0, cookTorranceSpecular(L, V, N, roughness, fresnel)));\n  float diffuse  \x3d min(kambient + kdiffuse * max(dot(N, L), 0.0), 1.0);\n\n  vec4 surfaceColor \x3d f_color * texture2D(texture, f_uv);\n  vec4 litColor \x3d surfaceColor.a * vec4(diffuse * surfaceColor.rgb + kspecular * vec3(1,1,1) * specular,  1.0);\n\n  gl_FragColor \x3d litColor * opacity;\n}\n"]);
var n=p(["precision highp float;\n\nprecision highp float;\n#define GLSLIFY 1\n\nvec3 getOrthogonalVector(vec3 v) {\n  // Return up-vector for only-z vector.\n  // Return ax + by + cz \x3d 0, a point that lies on the plane that has v as a normal and that isn't (0,0,0).\n  // From the above if-statement we have ||a|| \x3e 0  U  ||b|| \x3e 0.\n  // Assign z \x3d 0, x \x3d -b, y \x3d a:\n  // a*-b + b*a + c*0 \x3d -ba + ba + 0 \x3d 0\n  if (v.x*v.x \x3e v.z*v.z || v.y*v.y \x3e v.z*v.z) {\n    return normalize(vec3(-v.y, v.x, 0.0));\n  } else {\n    return normalize(vec3(0.0, v.z, -v.y));\n  }\n}\n\n// Calculate the cone vertex and normal at the given index.\n//\n// The returned vertex is for a cone with its top at origin and height of 1.0,\n// pointing in the direction of the vector attribute.\n//\n// Each cone is made up of a top vertex, a center base vertex and base perimeter vertices.\n// These vertices are used to make up the triangles of the cone by the following:\n//   segment + 0 top vertex\n//   segment + 1 perimeter vertex a+1\n//   segment + 2 perimeter vertex a\n//   segment + 3 center base vertex\n//   segment + 4 perimeter vertex a\n//   segment + 5 perimeter vertex a+1\n// Where segment is the number of the radial segment * 6 and a is the angle at that radial segment.\n// To go from index to segment, floor(index / 6)\n// To go from segment to angle, 2*pi * (segment/segmentCount)\n// To go from index to segment index, index - (segment*6)\n//\nvec3 getConePosition(vec3 d, float rawIndex, float coneOffset, out vec3 normal) {\n\n  const float segmentCount \x3d 8.0;\n\n  float index \x3d rawIndex - floor(rawIndex /\n    (segmentCount * 6.0)) *\n    (segmentCount * 6.0);\n\n  float segment \x3d floor(0.001 + index/6.0);\n  float segmentIndex \x3d index - (segment*6.0);\n\n  normal \x3d -normalize(d);\n\n  if (segmentIndex \x3e 2.99 \x26\x26 segmentIndex \x3c 3.01) {\n    return mix(vec3(0.0), -d, coneOffset);\n  }\n\n  float nextAngle \x3d (\n    (segmentIndex \x3e 0.99 \x26\x26  segmentIndex \x3c 1.01) ||\n    (segmentIndex \x3e 4.99 \x26\x26  segmentIndex \x3c 5.01)\n  ) ? 1.0 : 0.0;\n  float angle \x3d 2.0 * 3.14159 * ((segment + nextAngle) / segmentCount);\n\n  vec3 v1 \x3d mix(d, vec3(0.0), coneOffset);\n  vec3 v2 \x3d v1 - d;\n\n  vec3 u \x3d getOrthogonalVector(d);\n  vec3 v \x3d normalize(cross(u, d));\n\n  vec3 x \x3d u * cos(angle) * length(d)*0.25;\n  vec3 y \x3d v * sin(angle) * length(d)*0.25;\n  vec3 v3 \x3d v2 + x + y;\n  if (segmentIndex \x3c 3.0) {\n    vec3 tx \x3d u * sin(angle);\n    vec3 ty \x3d v * -cos(angle);\n    vec3 tangent \x3d tx + ty;\n    normal \x3d normalize(cross(v3 - v1, tangent));\n  }\n\n  if (segmentIndex \x3d\x3d 0.0) {\n    return mix(d, vec3(0.0), coneOffset);\n  }\n  return v3;\n}\n\nattribute vec4 vector;\nattribute vec4 position;\nattribute vec4 id;\n\nuniform mat4 model, view, projection;\nuniform float vectorScale, coneScale, coneOffset;\n\nvarying vec3 f_position;\nvarying vec4 f_id;\n\nvoid main() {\n  vec3 normal;\n  vec3 XYZ \x3d getConePosition(mat3(model) * ((vectorScale * coneScale) * vector.xyz), position.w, coneOffset, normal);\n  vec4 conePosition \x3d model * vec4(position.xyz, 1.0) + vec4(XYZ, 0.0);\n  gl_Position \x3d projection * view * conePosition;\n  f_id        \x3d id;\n  f_position  \x3d position.xyz;\n}\n"]);
p=p(["precision highp float;\n#define GLSLIFY 1\n\nbool outOfRange(float a, float b, float p) {\n  return ((p \x3e max(a, b)) || \n          (p \x3c min(a, b)));\n}\n\nbool outOfRange(vec2 a, vec2 b, vec2 p) {\n  return (outOfRange(a.x, b.x, p.x) ||\n          outOfRange(a.y, b.y, p.y));\n}\n\nbool outOfRange(vec3 a, vec3 b, vec3 p) {\n  return (outOfRange(a.x, b.x, p.x) ||\n          outOfRange(a.y, b.y, p.y) ||\n          outOfRange(a.z, b.z, p.z));\n}\n\nbool outOfRange(vec4 a, vec4 b, vec4 p) {\n  return outOfRange(a.xyz, b.xyz, p.xyz);\n}\n\nuniform vec3  clipBounds[2];\nuniform float pickId;\n\nvarying vec3 f_position;\nvarying vec4 f_id;\n\nvoid main() {\n  if (outOfRange(clipBounds[0], clipBounds[1], f_position)) discard;\n\n  gl_FragColor \x3d vec4(pickId, f_id.xyz);\n}"]);
G.meshShader={vertex:b,fragment:N,attributes:[{name:"position",type:"vec4"},{name:"color",type:"vec4"},{name:"uv",type:"vec2"},{name:"vector",type:"vec3"}]};G.pickShader={vertex:n,fragment:p,attributes:[{name:"position",type:"vec4"},{name:"id",type:"vec4"},{name:"vector",type:"vec3"}]}},{glslify:442}],271:[function(b,N,G){N.exports={0:"NONE",1:"ONE",2:"LINE_LOOP",3:"LINE_STRIP",4:"TRIANGLES",5:"TRIANGLE_STRIP",6:"TRIANGLE_FAN",256:"DEPTH_BUFFER_BIT",512:"NEVER",513:"LESS",514:"EQUAL",515:"LEQUAL",
516:"GREATER",517:"NOTEQUAL",518:"GEQUAL",519:"ALWAYS",768:"SRC_COLOR",769:"ONE_MINUS_SRC_COLOR",770:"SRC_ALPHA",771:"ONE_MINUS_SRC_ALPHA",772:"DST_ALPHA",773:"ONE_MINUS_DST_ALPHA",774:"DST_COLOR",775:"ONE_MINUS_DST_COLOR",776:"SRC_ALPHA_SATURATE",1024:"STENCIL_BUFFER_BIT",1028:"FRONT",1029:"BACK",1032:"FRONT_AND_BACK",1280:"INVALID_ENUM",1281:"INVALID_VALUE",1282:"INVALID_OPERATION",1285:"OUT_OF_MEMORY",1286:"INVALID_FRAMEBUFFER_OPERATION",2304:"CW",2305:"CCW",2849:"LINE_WIDTH",2884:"CULL_FACE",
2885:"CULL_FACE_MODE",2886:"FRONT_FACE",2928:"DEPTH_RANGE",2929:"DEPTH_TEST",2930:"DEPTH_WRITEMASK",2931:"DEPTH_CLEAR_VALUE",2932:"DEPTH_FUNC",2960:"STENCIL_TEST",2961:"STENCIL_CLEAR_VALUE",2962:"STENCIL_FUNC",2963:"STENCIL_VALUE_MASK",2964:"STENCIL_FAIL",2965:"STENCIL_PASS_DEPTH_FAIL",2966:"STENCIL_PASS_DEPTH_PASS",2967:"STENCIL_REF",2968:"STENCIL_WRITEMASK",2978:"VIEWPORT",3024:"DITHER",3042:"BLEND",3088:"SCISSOR_BOX",3089:"SCISSOR_TEST",3106:"COLOR_CLEAR_VALUE",3107:"COLOR_WRITEMASK",3317:"UNPACK_ALIGNMENT",
3333:"PACK_ALIGNMENT",3379:"MAX_TEXTURE_SIZE",3386:"MAX_VIEWPORT_DIMS",3408:"SUBPIXEL_BITS",3410:"RED_BITS",3411:"GREEN_BITS",3412:"BLUE_BITS",3413:"ALPHA_BITS",3414:"DEPTH_BITS",3415:"STENCIL_BITS",3553:"TEXTURE_2D",4352:"DONT_CARE",4353:"FASTEST",4354:"NICEST",5120:"BYTE",5121:"UNSIGNED_BYTE",5122:"SHORT",5123:"UNSIGNED_SHORT",5124:"INT",5125:"UNSIGNED_INT",5126:"FLOAT",5386:"INVERT",5890:"TEXTURE",6401:"STENCIL_INDEX",6402:"DEPTH_COMPONENT",6406:"ALPHA",6407:"RGB",6408:"RGBA",6409:"LUMINANCE",
6410:"LUMINANCE_ALPHA",7680:"KEEP",7681:"REPLACE",7682:"INCR",7683:"DECR",7936:"VENDOR",7937:"RENDERER",7938:"VERSION",9728:"NEAREST",9729:"LINEAR",9984:"NEAREST_MIPMAP_NEAREST",9985:"LINEAR_MIPMAP_NEAREST",9986:"NEAREST_MIPMAP_LINEAR",9987:"LINEAR_MIPMAP_LINEAR",10240:"TEXTURE_MAG_FILTER",10241:"TEXTURE_MIN_FILTER",10242:"TEXTURE_WRAP_S",10243:"TEXTURE_WRAP_T",10497:"REPEAT",10752:"POLYGON_OFFSET_UNITS",16384:"COLOR_BUFFER_BIT",32769:"CONSTANT_COLOR",32770:"ONE_MINUS_CONSTANT_COLOR",32771:"CONSTANT_ALPHA",
32772:"ONE_MINUS_CONSTANT_ALPHA",32773:"BLEND_COLOR",32774:"FUNC_ADD",32777:"BLEND_EQUATION_RGB",32778:"FUNC_SUBTRACT",32779:"FUNC_REVERSE_SUBTRACT",32819:"UNSIGNED_SHORT_4_4_4_4",32820:"UNSIGNED_SHORT_5_5_5_1",32823:"POLYGON_OFFSET_FILL",32824:"POLYGON_OFFSET_FACTOR",32854:"RGBA4",32855:"RGB5_A1",32873:"TEXTURE_BINDING_2D",32926:"SAMPLE_ALPHA_TO_COVERAGE",32928:"SAMPLE_COVERAGE",32936:"SAMPLE_BUFFERS",32937:"SAMPLES",32938:"SAMPLE_COVERAGE_VALUE",32939:"SAMPLE_COVERAGE_INVERT",32968:"BLEND_DST_RGB",
32969:"BLEND_SRC_RGB",32970:"BLEND_DST_ALPHA",32971:"BLEND_SRC_ALPHA",33071:"CLAMP_TO_EDGE",33170:"GENERATE_MIPMAP_HINT",33189:"DEPTH_COMPONENT16",33306:"DEPTH_STENCIL_ATTACHMENT",33635:"UNSIGNED_SHORT_5_6_5",33648:"MIRRORED_REPEAT",33901:"ALIASED_POINT_SIZE_RANGE",33902:"ALIASED_LINE_WIDTH_RANGE",33984:"TEXTURE0",33985:"TEXTURE1",33986:"TEXTURE2",33987:"TEXTURE3",33988:"TEXTURE4",33989:"TEXTURE5",33990:"TEXTURE6",33991:"TEXTURE7",33992:"TEXTURE8",33993:"TEXTURE9",33994:"TEXTURE10",33995:"TEXTURE11",
33996:"TEXTURE12",33997:"TEXTURE13",33998:"TEXTURE14",33999:"TEXTURE15",34E3:"TEXTURE16",34001:"TEXTURE17",34002:"TEXTURE18",34003:"TEXTURE19",34004:"TEXTURE20",34005:"TEXTURE21",34006:"TEXTURE22",34007:"TEXTURE23",34008:"TEXTURE24",34009:"TEXTURE25",34010:"TEXTURE26",34011:"TEXTURE27",34012:"TEXTURE28",34013:"TEXTURE29",34014:"TEXTURE30",34015:"TEXTURE31",34016:"ACTIVE_TEXTURE",34024:"MAX_RENDERBUFFER_SIZE",34041:"DEPTH_STENCIL",34055:"INCR_WRAP",34056:"DECR_WRAP",34067:"TEXTURE_CUBE_MAP",34068:"TEXTURE_BINDING_CUBE_MAP",
34069:"TEXTURE_CUBE_MAP_POSITIVE_X",34070:"TEXTURE_CUBE_MAP_NEGATIVE_X",34071:"TEXTURE_CUBE_MAP_POSITIVE_Y",34072:"TEXTURE_CUBE_MAP_NEGATIVE_Y",34073:"TEXTURE_CUBE_MAP_POSITIVE_Z",34074:"TEXTURE_CUBE_MAP_NEGATIVE_Z",34076:"MAX_CUBE_MAP_TEXTURE_SIZE",34338:"VERTEX_ATTRIB_ARRAY_ENABLED",34339:"VERTEX_ATTRIB_ARRAY_SIZE",34340:"VERTEX_ATTRIB_ARRAY_STRIDE",34341:"VERTEX_ATTRIB_ARRAY_TYPE",34342:"CURRENT_VERTEX_ATTRIB",34373:"VERTEX_ATTRIB_ARRAY_POINTER",34466:"NUM_COMPRESSED_TEXTURE_FORMATS",34467:"COMPRESSED_TEXTURE_FORMATS",
34660:"BUFFER_SIZE",34661:"BUFFER_USAGE",34816:"STENCIL_BACK_FUNC",34817:"STENCIL_BACK_FAIL",34818:"STENCIL_BACK_PASS_DEPTH_FAIL",34819:"STENCIL_BACK_PASS_DEPTH_PASS",34877:"BLEND_EQUATION_ALPHA",34921:"MAX_VERTEX_ATTRIBS",34922:"VERTEX_ATTRIB_ARRAY_NORMALIZED",34930:"MAX_TEXTURE_IMAGE_UNITS",34962:"ARRAY_BUFFER",34963:"ELEMENT_ARRAY_BUFFER",34964:"ARRAY_BUFFER_BINDING",34965:"ELEMENT_ARRAY_BUFFER_BINDING",34975:"VERTEX_ATTRIB_ARRAY_BUFFER_BINDING",35040:"STREAM_DRAW",35044:"STATIC_DRAW",35048:"DYNAMIC_DRAW",
35632:"FRAGMENT_SHADER",35633:"VERTEX_SHADER",35660:"MAX_VERTEX_TEXTURE_IMAGE_UNITS",35661:"MAX_COMBINED_TEXTURE_IMAGE_UNITS",35663:"SHADER_TYPE",35664:"FLOAT_VEC2",35665:"FLOAT_VEC3",35666:"FLOAT_VEC4",35667:"INT_VEC2",35668:"INT_VEC3",35669:"INT_VEC4",35670:"BOOL",35671:"BOOL_VEC2",35672:"BOOL_VEC3",35673:"BOOL_VEC4",35674:"FLOAT_MAT2",35675:"FLOAT_MAT3",35676:"FLOAT_MAT4",35678:"SAMPLER_2D",35680:"SAMPLER_CUBE",35712:"DELETE_STATUS",35713:"COMPILE_STATUS",35714:"LINK_STATUS",35715:"VALIDATE_STATUS",
35716:"INFO_LOG_LENGTH",35717:"ATTACHED_SHADERS",35718:"ACTIVE_UNIFORMS",35719:"ACTIVE_UNIFORM_MAX_LENGTH",35720:"SHADER_SOURCE_LENGTH",35721:"ACTIVE_ATTRIBUTES",35722:"ACTIVE_ATTRIBUTE_MAX_LENGTH",35724:"SHADING_LANGUAGE_VERSION",35725:"CURRENT_PROGRAM",36003:"STENCIL_BACK_REF",36004:"STENCIL_BACK_VALUE_MASK",36005:"STENCIL_BACK_WRITEMASK",36006:"FRAMEBUFFER_BINDING",36007:"RENDERBUFFER_BINDING",36048:"FRAMEBUFFER_ATTACHMENT_OBJECT_TYPE",36049:"FRAMEBUFFER_ATTACHMENT_OBJECT_NAME",36050:"FRAMEBUFFER_ATTACHMENT_TEXTURE_LEVEL",
36051:"FRAMEBUFFER_ATTACHMENT_TEXTURE_CUBE_MAP_FACE",36053:"FRAMEBUFFER_COMPLETE",36054:"FRAMEBUFFER_INCOMPLETE_ATTACHMENT",36055:"FRAMEBUFFER_INCOMPLETE_MISSING_ATTACHMENT",36057:"FRAMEBUFFER_INCOMPLETE_DIMENSIONS",36061:"FRAMEBUFFER_UNSUPPORTED",36064:"COLOR_ATTACHMENT0",36096:"DEPTH_ATTACHMENT",36128:"STENCIL_ATTACHMENT",36160:"FRAMEBUFFER",36161:"RENDERBUFFER",36162:"RENDERBUFFER_WIDTH",36163:"RENDERBUFFER_HEIGHT",36164:"RENDERBUFFER_INTERNAL_FORMAT",36168:"STENCIL_INDEX8",36176:"RENDERBUFFER_RED_SIZE",
36177:"RENDERBUFFER_GREEN_SIZE",36178:"RENDERBUFFER_BLUE_SIZE",36179:"RENDERBUFFER_ALPHA_SIZE",36180:"RENDERBUFFER_DEPTH_SIZE",36181:"RENDERBUFFER_STENCIL_SIZE",36194:"RGB565",36336:"LOW_FLOAT",36337:"MEDIUM_FLOAT",36338:"HIGH_FLOAT",36339:"LOW_INT",36340:"MEDIUM_INT",36341:"HIGH_INT",36346:"SHADER_COMPILER",36347:"MAX_VERTEX_UNIFORM_VECTORS",36348:"MAX_VARYING_VECTORS",36349:"MAX_FRAGMENT_UNIFORM_VECTORS",37440:"UNPACK_FLIP_Y_WEBGL",37441:"UNPACK_PREMULTIPLY_ALPHA_WEBGL",37442:"CONTEXT_LOST_WEBGL",
37443:"UNPACK_COLORSPACE_CONVERSION_WEBGL",37444:"BROWSER_DEFAULT_WEBGL"}},{}],272:[function(b,N,G){var p=b("./1.0/numbers");N.exports=function(n){return p[n]}},{"./1.0/numbers":271}],273:[function(b,N,G){function p(l,c,d,e){this.gl=l;this.shader=e;this.buffer=c;this.vao=d;this.pixelRatio=1;this.bounds=[[Infinity,Infinity,Infinity],[-Infinity,-Infinity,-Infinity]];this.clipBounds=[[-Infinity,-Infinity,-Infinity],[Infinity,Infinity,Infinity]];this.lineWidth=[1,1,1];this.capSize=[10,10,10];this.lineCount=
[0,0,0];this.lineOffset=[0,0,0];this.opacity=1;this.hasAlpha=!1}function n(l,c){for(var d=0;3>d;++d)l[0][d]=Math.min(l[0][d],c[d]),l[1][d]=Math.max(l[1][d],c[d])}function k(l,c,d,e){e=r[e];for(var f=0;f<e.length;++f){var q=e[f];l.push(c[0],c[1],c[2],d[0],d[1],d[2],d[3],q[0],q[1],q[2])}return e.length}N.exports=function(l){var c=l.gl,d=m(c),e=a(c,[{buffer:d,type:c.FLOAT,size:3,offset:0,stride:40},{buffer:d,type:c.FLOAT,size:4,offset:12,stride:40},{buffer:d,type:c.FLOAT,size:3,offset:28,stride:40}]),
f=g(c);f.attributes.position.location=0;f.attributes.color.location=1;f.attributes.offset.location=2;c=new p(c,d,e,f);c.update(l);return c};var m=b("gl-buffer"),a=b("gl-vao"),g=b("./shaders/index"),h=[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1];b=p.prototype;b.isOpaque=function(){return!this.hasAlpha};b.isTransparent=function(){return this.hasAlpha};b.drawTransparent=b.draw=function(l){var c=this.gl,d=this.shader.uniforms;this.shader.bind();var e=d.view=l.view||h,f=d.projection=l.projection||h;d.model=l.model||
h;d.clipBounds=this.clipBounds;d.opacity=this.opacity;l=(l._ortho?2:1)*this.pixelRatio*(f[3]*e[12]+f[7]*e[13]+f[11]*e[14]+f[15]*e[15])/c.drawingBufferHeight;this.vao.bind();for(e=0;3>e;++e)c.lineWidth(this.lineWidth[e]*this.pixelRatio),d.capSize=this.capSize[e]*l,this.lineCount[e]&&c.drawArrays(c.LINES,this.lineOffset[e],this.lineCount[e]);this.vao.unbind()};var r=function(){for(var l=Array(3),c=0;3>c;++c){for(var d=[],e=1;2>=e;++e)for(var f=-1;1>=f;f+=2){var q=[0,0,0];q[(e+c)%3]=f;d.push(q)}l[c]=
d}return l}();b.update=function(l){l=l||{};"lineWidth"in l&&(this.lineWidth=l.lineWidth,Array.isArray(this.lineWidth)||(this.lineWidth=[this.lineWidth,this.lineWidth,this.lineWidth]));"capSize"in l&&(this.capSize=l.capSize,Array.isArray(this.capSize)||(this.capSize=[this.capSize,this.capSize,this.capSize]));this.hasAlpha=!1;"opacity"in l&&(this.opacity=+l.opacity,1>this.opacity&&(this.hasAlpha=!0));var c=l.color||[[0,0,0],[0,0,0],[0,0,0]],d=l.position;l=l.error;Array.isArray(c[0])||(c=[c,c,c]);if(d&&
l){var e=[],f=d.length,q=0;this.bounds=[[Infinity,Infinity,Infinity],[-Infinity,-Infinity,-Infinity]];this.lineCount=[0,0,0];for(var t=0;3>t;++t){this.lineOffset[t]=q;var w=0;a:for(;w<f;++w){for(var x=d[w],z=0;3>z;++z)if(isNaN(x[z])||!isFinite(x[z]))continue a;z=l[w];var B=c[t];Array.isArray(B[0])&&(B=c[w]);3===B.length?B=[B[0],B[1],B[2],1]:4===B.length&&(B=[B[0],B[1],B[2],B[3]],!this.hasAlpha&&1>B[3]&&(this.hasAlpha=!0));if(!isNaN(z[0][t])&&!isNaN(z[1][t])){if(0>z[0][t]){var A=x.slice();A[t]+=z[0][t];
e.push(x[0],x[1],x[2],B[0],B[1],B[2],B[3],0,0,0,A[0],A[1],A[2],B[0],B[1],B[2],B[3],0,0,0);n(this.bounds,A);q+=2+k(e,A,B,t)}0<z[1][t]&&(A=x.slice(),A[t]+=z[1][t],e.push(x[0],x[1],x[2],B[0],B[1],B[2],B[3],0,0,0,A[0],A[1],A[2],B[0],B[1],B[2],B[3],0,0,0),n(this.bounds,A),q+=2+k(e,A,B,t))}}this.lineCount[t]=q-this.lineOffset[t]}this.buffer.update(e)}};b.dispose=function(){this.shader.dispose();this.buffer.dispose();this.vao.dispose()}},{"./shaders/index":275,"gl-buffer":267,"gl-vao":361}],274:[function(b,
N,G){arguments[4][265][0].apply(G,arguments)},{dup:265}],275:[function(b,N,G){G=b("glslify");var p=b("gl-shader"),n=G(["precision highp float;\n#define GLSLIFY 1\n\nattribute vec3 position, offset;\nattribute vec4 color;\nuniform mat4 model, view, projection;\nuniform float capSize;\nvarying vec4 fragColor;\nvarying vec3 fragPosition;\n\nvoid main() {\n  vec4 worldPosition  \x3d model * vec4(position, 1.0);\n  worldPosition       \x3d (worldPosition / worldPosition.w) + vec4(capSize * offset, 0.0);\n  gl_Position         \x3d projection * view * worldPosition;\n  fragColor           \x3d color;\n  fragPosition        \x3d position;\n}"]),
k=G(["precision highp float;\n#define GLSLIFY 1\n\nbool outOfRange(float a, float b, float p) {\n  return ((p \x3e max(a, b)) || \n          (p \x3c min(a, b)));\n}\n\nbool outOfRange(vec2 a, vec2 b, vec2 p) {\n  return (outOfRange(a.x, b.x, p.x) ||\n          outOfRange(a.y, b.y, p.y));\n}\n\nbool outOfRange(vec3 a, vec3 b, vec3 p) {\n  return (outOfRange(a.x, b.x, p.x) ||\n          outOfRange(a.y, b.y, p.y) ||\n          outOfRange(a.z, b.z, p.z));\n}\n\nbool outOfRange(vec4 a, vec4 b, vec4 p) {\n  return outOfRange(a.xyz, b.xyz, p.xyz);\n}\n\nuniform vec3 clipBounds[2];\nuniform float opacity;\nvarying vec3 fragPosition;\nvarying vec4 fragColor;\n\nvoid main() {\n  if (\n    outOfRange(clipBounds[0], clipBounds[1], fragPosition) ||\n    fragColor.a * opacity \x3d\x3d 0.\n  ) discard;\n\n  gl_FragColor \x3d opacity * fragColor;\n}"]);
N.exports=function(m){return p(m,n,k,null,[{name:"position",type:"vec3"},{name:"color",type:"vec4"},{name:"offset",type:"vec3"}])}},{"gl-shader":339,glslify:274}],276:[function(b,N,G){function p(t){var w=t.getParameter(t.FRAMEBUFFER_BINDING),x=t.getParameter(t.RENDERBUFFER_BINDING);t=t.getParameter(t.TEXTURE_BINDING_2D);return[w,x,t]}function n(t,w){t.bindFramebuffer(t.FRAMEBUFFER,w[0]);t.bindRenderbuffer(t.RENDERBUFFER,w[1]);t.bindTexture(t.TEXTURE_2D,w[2])}function k(t){switch(t){case d:throw Error("gl-fbo: Framebuffer unsupported");
case e:throw Error("gl-fbo: Framebuffer incomplete attachment");case f:throw Error("gl-fbo: Framebuffer incomplete dimensions");case q:throw Error("gl-fbo: Framebuffer incomplete missing attachment");default:throw Error("gl-fbo: Framebuffer failed for unspecified reason");}}function m(t,w,x,z,B,A){if(!z)return null;w=l(t,w,x,B,z);w.magFilter=t.NEAREST;w.minFilter=t.NEAREST;w.mipSamples=1;w.bind();t.framebufferTexture2D(t.FRAMEBUFFER,A,t.TEXTURE_2D,w.handle,0);return w}function a(t,w,x,z,B){var A=
t.createRenderbuffer();t.bindRenderbuffer(t.RENDERBUFFER,A);t.renderbufferStorage(t.RENDERBUFFER,z,w,x);t.framebufferRenderbuffer(t.FRAMEBUFFER,B,t.RENDERBUFFER,A);return A}function g(t){var w=p(t.gl),x=t.gl,z=t.handle=x.createFramebuffer(),B=t._shape[0],A=t._shape[1],D=t.color.length,C=t._ext,v=t._useStencil,y=t._useDepth,F=t._colorType;x.bindFramebuffer(x.FRAMEBUFFER,z);for(z=0;z<D;++z)t.color[z]=m(x,B,A,F,x.RGBA,x.COLOR_ATTACHMENT0+z);0===D?(t._color_rb=a(x,B,A,x.RGBA4,x.COLOR_ATTACHMENT0),C&&
C.drawBuffersWEBGL(c[0])):1<D&&C.drawBuffersWEBGL(c[D]);(D=x.getExtension("WEBGL_depth_texture"))?v?t.depth=m(x,B,A,D.UNSIGNED_INT_24_8_WEBGL,x.DEPTH_STENCIL,x.DEPTH_STENCIL_ATTACHMENT):y&&(t.depth=m(x,B,A,x.UNSIGNED_SHORT,x.DEPTH_COMPONENT,x.DEPTH_ATTACHMENT)):y&&v?t._depth_rb=a(x,B,A,x.DEPTH_STENCIL,x.DEPTH_STENCIL_ATTACHMENT):y?t._depth_rb=a(x,B,A,x.DEPTH_COMPONENT16,x.DEPTH_ATTACHMENT):v&&(t._depth_rb=a(x,B,A,x.STENCIL_INDEX,x.STENCIL_ATTACHMENT));B=x.checkFramebufferStatus(x.FRAMEBUFFER);if(B!==
x.FRAMEBUFFER_COMPLETE){t._destroyed=!0;x.bindFramebuffer(x.FRAMEBUFFER,null);x.deleteFramebuffer(t.handle);t.handle=null;t.depth&&(t.depth.dispose(),t.depth=null);t._depth_rb&&(x.deleteRenderbuffer(t._depth_rb),t._depth_rb=null);for(z=0;z<t.color.length;++z)t.color[z].dispose(),t.color[z]=null;t._color_rb&&(x.deleteRenderbuffer(t._color_rb),t._color_rb=null);n(x,w);k(B)}n(x,w)}function h(t,w,x,z,B,A,D,C){this.gl=t;this._shape=[w|0,x|0];this._destroyed=!1;this._ext=C;this.color=Array(B);for(t=0;t<
B;++t)this.color[t]=null;this._depth_rb=this.depth=this._color_rb=null;this._colorType=z;this._useDepth=A;this._useStencil=D;var v=this;w=[w|0,x|0];Object.defineProperties(w,{0:{get:function(){return v._shape[0]},set:function(y){return v.width=y}},1:{get:function(){return v._shape[1]},set:function(y){return v.height=y}}});this._shapeVector=w;g(this)}function r(t,w,x){if(t._destroyed)throw Error("gl-fbo: Can't resize destroyed FBO");if(t._shape[0]!==w||t._shape[1]!==x){var z=t.gl,B=z.getParameter(z.MAX_RENDERBUFFER_SIZE);
if(0>w||w>B||0>x||x>B)throw Error("gl-fbo: Can't resize FBO, invalid dimensions");t._shape[0]=w;t._shape[1]=x;w=p(z);for(x=0;x<t.color.length;++x)t.color[x].shape=t._shape;t._color_rb&&(z.bindRenderbuffer(z.RENDERBUFFER,t._color_rb),z.renderbufferStorage(z.RENDERBUFFER,z.RGBA4,t._shape[0],t._shape[1]));t.depth&&(t.depth.shape=t._shape);t._depth_rb&&(z.bindRenderbuffer(z.RENDERBUFFER,t._depth_rb),t._useDepth&&t._useStencil?z.renderbufferStorage(z.RENDERBUFFER,z.DEPTH_STENCIL,t._shape[0],t._shape[1]):
t._useDepth?z.renderbufferStorage(z.RENDERBUFFER,z.DEPTH_COMPONENT16,t._shape[0],t._shape[1]):t._useStencil&&z.renderbufferStorage(z.RENDERBUFFER,z.STENCIL_INDEX,t._shape[0],t._shape[1]));z.bindFramebuffer(z.FRAMEBUFFER,t.handle);x=z.checkFramebufferStatus(z.FRAMEBUFFER);x!==z.FRAMEBUFFER_COMPLETE&&(t.dispose(),n(z,w),k(x));n(z,w)}}var l=b("gl-texture2d");N.exports=function(t,w,x,z){d||(d=t.FRAMEBUFFER_UNSUPPORTED,e=t.FRAMEBUFFER_INCOMPLETE_ATTACHMENT,f=t.FRAMEBUFFER_INCOMPLETE_DIMENSIONS,q=t.FRAMEBUFFER_INCOMPLETE_MISSING_ATTACHMENT);
var B=t.getExtension("WEBGL_draw_buffers");if(!c&&B){var A=t.getParameter(B.MAX_COLOR_ATTACHMENTS_WEBGL);c=Array(A+1);for(var D=0;D<=A;++D){for(var C=Array(A),v=0;v<D;++v)C[v]=t.COLOR_ATTACHMENT0+v;for(v=D;v<A;++v)C[v]=t.NONE;c[D]=C}}Array.isArray(w)&&(z=x,x=w[1]|0,w=w[0]|0);if("number"!==typeof w)throw Error("gl-fbo: Missing shape parameter");A=t.getParameter(t.MAX_RENDERBUFFER_SIZE);if(0>w||w>A||0>x||x>A)throw Error("gl-fbo: Parameters are too large for FBO");z=z||{};A=1;if("color"in z){A=Math.max(z.color|
0,0);if(0>A)throw Error("gl-fbo: Must specify a nonnegative number of colors");if(1<A){if(!B)throw Error("gl-fbo: Multiple draw buffer extension not supported");if(A>t.getParameter(B.MAX_COLOR_ATTACHMENTS_WEBGL))throw Error("gl-fbo: Context does not support "+A+" draw buffers");}}D=t.UNSIGNED_BYTE;C=t.getExtension("OES_texture_float");if(z.float&&0<A){if(!C)throw Error("gl-fbo: Context does not support floating point textures");D=t.FLOAT}else z.preferFloat&&0<A&&C&&(D=t.FLOAT);C=!0;"depth"in z&&(C=
!!z.depth);v=!1;"stencil"in z&&(v=!!z.stencil);return new h(t,w,x,D,A,C,v,B)};var c=null,d,e,f,q;b=h.prototype;Object.defineProperties(b,{shape:{get:function(){return this._destroyed?[0,0]:this._shapeVector},set:function(t){Array.isArray(t)||(t=[t|0,t|0]);if(2!==t.length)throw Error("gl-fbo: Shape vector must be length 2");var w=t[0]|0;t=t[1]|0;r(this,w,t);return[w,t]},enumerable:!1},width:{get:function(){return this._destroyed?0:this._shape[0]},set:function(t){t|=0;r(this,t,this._shape[1]);return t},
enumerable:!1},height:{get:function(){return this._destroyed?0:this._shape[1]},set:function(t){t|=0;r(this,this._shape[0],t);return t},enumerable:!1}});b.bind=function(){if(!this._destroyed){var t=this.gl;t.bindFramebuffer(t.FRAMEBUFFER,this.handle);t.viewport(0,0,this._shape[0],this._shape[1])}};b.dispose=function(){if(!this._destroyed){this._destroyed=!0;var t=this.gl;t.deleteFramebuffer(this.handle);this.handle=null;this.depth&&(this.depth.dispose(),this.depth=null);this._depth_rb&&(t.deleteRenderbuffer(this._depth_rb),
this._depth_rb=null);for(var w=0;w<this.color.length;++w)this.color[w].dispose(),this.color[w]=null;this._color_rb&&(t.deleteRenderbuffer(this._color_rb),this._color_rb=null)}}},{"gl-texture2d":356}],277:[function(b,N,G){var p=b("sprintf-js").sprintf,n=b("gl-constants/lookup"),k=b("glsl-shader-name"),m=b("add-line-numbers");N.exports=function(a,g,h){var r=k(g)||"of unknown name (see npm glsl-shader-name)",l="unknown type";void 0!==h&&(l=h===n.FRAGMENT_SHADER?"fragment":"vertex");h=p("Error compiling %s shader %s:\n",
l,r);r=p("%s%s",h,a);var c=a.split("\n");a={};for(l=0;l<c.length;l++){var d=c[l];if(""!==d&&"\x00"!==d){var e=parseInt(d.split(":")[2]);if(isNaN(e))throw Error(p("Could not parse error: %s",d));a[e]=d}}g=m(g).split("\n");for(l=0;l<g.length;l++)if(a[l+3]||a[l+2]||a[l+1])h+=g[l]+"\n",a[l+1]&&(c=a[l+1],c=c.substr(c.split(":",3).join(":").length+1).trim(),h+=p("^^^ %s\n\n",c));return{long:h.trim(),short:r.trim()}}},{"add-line-numbers":72,"gl-constants/lookup":272,"glsl-shader-name":434,"sprintf-js":568}],
278:[function(b,N,G){function p(l,c,d,e,f,q,t){this.plot=l;this.shader=c;this.pickShader=d;this.positionBuffer=e;this.weightBuffer=f;this.colorBuffer=q;this.idBuffer=t;this.xData=[];this.yData=[];this.shape=[0,0];this.bounds=[Infinity,Infinity,-Infinity,-Infinity];this.pickOffset=0}N.exports=function(l,c){var d=l.gl,e=a(d,h.vertex,h.fragment),f=a(d,h.pickVertex,h.pickFragment),q=g(d),t=g(d),w=g(d);d=g(d);e=new p(l,e,f,q,t,w,d);e.update(c);l.addObject(e);return e};var n=b("binary-search-bounds"),k=
b("iota-array"),m=b("typedarray-pool"),a=b("gl-shader"),g=b("gl-buffer"),h=b("./lib/shaders");b=p.prototype;var r=[0,0,1,0,0,1,1,0,1,1,0,1];b.draw=function(){var l=[1,0,0,0,1,0,0,0,1];return function(){var c=this.plot,d=this.shader,e=this.bounds,f=this.numVertices;if(!(0>=f)){var q=c.gl;c=c.dataBox;var t=e[3]-e[1],w=c[2]-c[0],x=c[3]-c[1];l[0]=2*(e[2]-e[0])/w;l[4]=2*t/x;l[6]=2*(e[0]-c[0])/w-1;l[7]=2*(e[1]-c[1])/x-1;d.bind();e=d.uniforms;e.viewTransform=l;e.shape=this.shape;d=d.attributes;this.positionBuffer.bind();
d.position.pointer();this.weightBuffer.bind();d.weight.pointer(q.UNSIGNED_BYTE,!1);this.colorBuffer.bind();d.color.pointer(q.UNSIGNED_BYTE,!0);q.drawArrays(q.TRIANGLES,0,f)}}}();b.drawPick=function(){var l=[1,0,0,0,1,0,0,0,1],c=[0,0,0,0];return function(d){var e=this.plot,f=this.pickShader,q=this.bounds,t=this.numVertices;if(!(0>=t)){var w=e.gl;e=e.dataBox;var x=q[3]-q[1],z=e[2]-e[0],B=e[3]-e[1];l[0]=2*(q[2]-q[0])/z;l[4]=2*x/B;l[6]=2*(q[0]-e[0])/z-1;l[7]=2*(q[1]-e[1])/B-1;for(q=0;4>q;++q)c[q]=d>>
8*q&255;this.pickOffset=d;f.bind();q=f.uniforms;q.viewTransform=l;q.pickOffset=c;q.shape=this.shape;f=f.attributes;this.positionBuffer.bind();f.position.pointer();this.weightBuffer.bind();f.weight.pointer(w.UNSIGNED_BYTE,!1);this.idBuffer.bind();f.pickId.pointer(w.UNSIGNED_BYTE,!1);w.drawArrays(w.TRIANGLES,0,t);return d+this.shape[0]*this.shape[1]}}}();b.pick=function(l,c,d){l=this.pickOffset;c=this.shape[0]*this.shape[1];if(d<l||d>=l+c)return null;d-=l;return{object:this,pointId:d,dataCoord:[this.xData[d%
this.shape[0]],this.yData[d/this.shape[0]|0]]}};b.update=function(l){l=l||{};var c=l.shape||[0,0],d=l.x||k(c[0]),e=l.y||k(c[1]),f=l.z||new Float32Array(c[0]*c[1]),q=!1!==l.zsmooth;this.xData=d;this.yData=e;var t=l.colorLevels||[0];l=l.colorValues||[0,0,0,1];var w=t.length,x=this.bounds;if(q){var z=x[0]=d[0];var B=x[1]=e[0];var A=x[2]=d[d.length-1];x=x[3]=e[e.length-1]}else z=x[0]=d[0]+(d[1]-d[0])/2,B=x[1]=e[0]+(e[1]-e[0])/2,A=x[2]=d[d.length-1]+(d[d.length-1]-d[d.length-2])/2,x=x[3]=e[e.length-1]+
(e[e.length-1]-e[e.length-2])/2;A=1/(A-z);x=1/(x-B);var D=c[0];c=c[1];this.shape=[D,c];var C=(q?(D-1)*(c-1):D*c)*(r.length>>>1);this.numVertices=C;var v=m.mallocUint8(4*C),y=m.mallocFloat32(2*C),F=m.mallocUint8(2*C);C=m.mallocUint32(C);for(var J=0,K=q?D-1:D,M=q?c-1:c,H=0;H<M;++H){if(q){var O=x*(e[H]-B);var I=x*(e[H+1]-B)}else O=H<c-1?x*(e[H]-(e[H+1]-e[H])/2-B):x*(e[H]-(e[H]-e[H-1])/2-B),I=H<c-1?x*(e[H]+(e[H+1]-e[H])/2-B):x*(e[H]+(e[H]-e[H-1])/2-B);for(var L=0;L<K;++L){if(q){var Q=A*(d[L]-z);var Z=
A*(d[L+1]-z)}else Q=L<D-1?A*(d[L]-(d[L+1]-d[L])/2-z):A*(d[L]-(d[L]-d[L-1])/2-z),Z=L<D-1?A*(d[L]+(d[L+1]-d[L])/2-z):A*(d[L]+(d[L]-d[L-1])/2-z);for(var ba=0;ba<r.length;ba+=2){var V=r[ba],S=r[ba+1],T=f[q?(H+S)*D+(L+V):H*D+L],fa=n.le(t,T);if(0>fa){fa=l[0];T=l[1];var W=l[2];var aa=l[3]}else if(fa===w-1)fa=l[4*w-4],T=l[4*w-3],W=l[4*w-2],aa=l[4*w-1];else{aa=(T-t[fa])/(t[fa+1]-t[fa]);var ja=1-aa,ma=4*fa,ia=4*(fa+1);fa=ja*l[ma]+aa*l[ia];T=ja*l[ma+1]+aa*l[ia+1];W=ja*l[ma+2]+aa*l[ia+2];aa=ja*l[ma+3]+aa*l[ia+
3]}v[4*J]=255*fa;v[4*J+1]=255*T;v[4*J+2]=255*W;v[4*J+3]=255*aa;y[2*J]=.5*Q+.5*Z;y[2*J+1]=.5*O+.5*I;F[2*J]=V;F[2*J+1]=S;C[J]=H*D+L;J+=1}}}this.positionBuffer.update(y);this.weightBuffer.update(F);this.colorBuffer.update(v);this.idBuffer.update(C);m.free(y);m.free(v);m.free(F);m.free(C)};b.dispose=function(){this.shader.dispose();this.pickShader.dispose();this.positionBuffer.dispose();this.weightBuffer.dispose();this.colorBuffer.dispose();this.idBuffer.dispose();this.plot.removeObject(this)}},{"./lib/shaders":279,
"binary-search-bounds":103,"gl-buffer":267,"gl-shader":339,"iota-array":451,"typedarray-pool":617}],279:[function(b,N,G){b=b("glslify");N.exports={fragment:b(["precision lowp float;\n#define GLSLIFY 1\nvarying vec4 fragColor;\nvoid main() {\n  gl_FragColor \x3d vec4(fragColor.rgb * fragColor.a, fragColor.a);\n}\n"]),vertex:b(["precision mediump float;\n#define GLSLIFY 1\n\nattribute vec2 position;\nattribute vec4 color;\nattribute vec2 weight;\n\nuniform vec2 shape;\nuniform mat3 viewTransform;\n\nvarying vec4 fragColor;\n\nvoid main() {\n  vec3 vPosition \x3d viewTransform * vec3( position + (weight-.5)/(shape-1.) , 1.0);\n  fragColor \x3d color;\n  gl_Position \x3d vec4(vPosition.xy, 0, vPosition.z);\n}\n"]),
pickFragment:b(["precision mediump float;\n#define GLSLIFY 1\n\nvarying vec4 fragId;\nvarying vec2 vWeight;\n\nuniform vec2 shape;\nuniform vec4 pickOffset;\n\nvoid main() {\n  vec2 d \x3d step(.5, vWeight);\n  vec4 id \x3d fragId + pickOffset;\n  id.x +\x3d d.x + d.y*shape.x;\n\n  id.y +\x3d floor(id.x / 256.0);\n  id.x -\x3d floor(id.x / 256.0) * 256.0;\n\n  id.z +\x3d floor(id.y / 256.0);\n  id.y -\x3d floor(id.y / 256.0) * 256.0;\n\n  id.w +\x3d floor(id.z / 256.0);\n  id.z -\x3d floor(id.z / 256.0) * 256.0;\n\n  gl_FragColor \x3d id/255.;\n}\n"]),
pickVertex:b(["precision mediump float;\n#define GLSLIFY 1\n\nattribute vec2 position;\nattribute vec4 pickId;\nattribute vec2 weight;\n\nuniform vec2 shape;\nuniform mat3 viewTransform;\n\nvarying vec4 fragId;\nvarying vec2 vWeight;\n\nvoid main() {\n  vWeight \x3d weight;\n\n  fragId \x3d pickId;\n\n  vec3 vPosition \x3d viewTransform * vec3( position + (weight-.5)/(shape-1.) , 1.0);\n  gl_Position \x3d vec4(vPosition.xy, 0, vPosition.z);\n}\n"])}},{glslify:442}],280:[function(b,N,G){N=b("glslify");
var p=b("gl-shader"),n=N(["precision highp float;\n#define GLSLIFY 1\n\nattribute vec3 position, nextPosition;\nattribute float arcLength, lineWidth;\nattribute vec4 color;\n\nuniform vec2 screenShape;\nuniform float pixelRatio;\nuniform mat4 model, view, projection;\n\nvarying vec4 fragColor;\nvarying vec3 worldPosition;\nvarying float pixelArcLength;\n\nvec4 project(vec3 p) {\n  return projection * view * model * vec4(p, 1.0);\n}\n\nvoid main() {\n  vec4 startPoint \x3d project(position);\n  vec4 endPoint   \x3d project(nextPosition);\n\n  vec2 A \x3d startPoint.xy / startPoint.w;\n  vec2 B \x3d   endPoint.xy /   endPoint.w;\n\n  float clipAngle \x3d atan(\n    (B.y - A.y) * screenShape.y,\n    (B.x - A.x) * screenShape.x\n  );\n\n  vec2 offset \x3d 0.5 * pixelRatio * lineWidth * vec2(\n    sin(clipAngle),\n    -cos(clipAngle)\n  ) / screenShape;\n\n  gl_Position \x3d vec4(startPoint.xy + startPoint.w * offset, startPoint.zw);\n\n  worldPosition \x3d position;\n  pixelArcLength \x3d arcLength;\n  fragColor \x3d color;\n}\n"]),
k=N(["precision highp float;\n#define GLSLIFY 1\n\nbool outOfRange(float a, float b, float p) {\n  return ((p \x3e max(a, b)) || \n          (p \x3c min(a, b)));\n}\n\nbool outOfRange(vec2 a, vec2 b, vec2 p) {\n  return (outOfRange(a.x, b.x, p.x) ||\n          outOfRange(a.y, b.y, p.y));\n}\n\nbool outOfRange(vec3 a, vec3 b, vec3 p) {\n  return (outOfRange(a.x, b.x, p.x) ||\n          outOfRange(a.y, b.y, p.y) ||\n          outOfRange(a.z, b.z, p.z));\n}\n\nbool outOfRange(vec4 a, vec4 b, vec4 p) {\n  return outOfRange(a.xyz, b.xyz, p.xyz);\n}\n\nuniform vec3      clipBounds[2];\nuniform sampler2D dashTexture;\nuniform float     dashScale;\nuniform float     opacity;\n\nvarying vec3    worldPosition;\nvarying float   pixelArcLength;\nvarying vec4    fragColor;\n\nvoid main() {\n  if (\n    outOfRange(clipBounds[0], clipBounds[1], worldPosition) ||\n    fragColor.a * opacity \x3d\x3d 0.\n  ) discard;\n\n  float dashWeight \x3d texture2D(dashTexture, vec2(dashScale * pixelArcLength, 0)).r;\n  if(dashWeight \x3c 0.5) {\n    discard;\n  }\n  gl_FragColor \x3d fragColor * opacity;\n}\n"]),
m=N(["precision highp float;\n#define GLSLIFY 1\n\n#define FLOAT_MAX  1.70141184e38\n#define FLOAT_MIN  1.17549435e-38\n\n// https://github.com/mikolalysenko/glsl-read-float/blob/master/index.glsl\nvec4 packFloat(float v) {\n  float av \x3d abs(v);\n\n  //Handle special cases\n  if(av \x3c FLOAT_MIN) {\n    return vec4(0.0, 0.0, 0.0, 0.0);\n  } else if(v \x3e FLOAT_MAX) {\n    return vec4(127.0, 128.0, 0.0, 0.0) / 255.0;\n  } else if(v \x3c -FLOAT_MAX) {\n    return vec4(255.0, 128.0, 0.0, 0.0) / 255.0;\n  }\n\n  vec4 c \x3d vec4(0,0,0,0);\n\n  //Compute exponent and mantissa\n  float e \x3d floor(log2(av));\n  float m \x3d av * pow(2.0, -e) - 1.0;\n\n  //Unpack mantissa\n  c[1] \x3d floor(128.0 * m);\n  m -\x3d c[1] / 128.0;\n  c[2] \x3d floor(32768.0 * m);\n  m -\x3d c[2] / 32768.0;\n  c[3] \x3d floor(8388608.0 * m);\n\n  //Unpack exponent\n  float ebias \x3d e + 127.0;\n  c[0] \x3d floor(ebias / 2.0);\n  ebias -\x3d c[0] * 2.0;\n  c[1] +\x3d floor(ebias) * 128.0;\n\n  //Unpack sign bit\n  c[0] +\x3d 128.0 * step(0.0, -v);\n\n  //Scale back to range\n  return c / 255.0;\n}\n\nbool outOfRange(float a, float b, float p) {\n  return ((p \x3e max(a, b)) || \n          (p \x3c min(a, b)));\n}\n\nbool outOfRange(vec2 a, vec2 b, vec2 p) {\n  return (outOfRange(a.x, b.x, p.x) ||\n          outOfRange(a.y, b.y, p.y));\n}\n\nbool outOfRange(vec3 a, vec3 b, vec3 p) {\n  return (outOfRange(a.x, b.x, p.x) ||\n          outOfRange(a.y, b.y, p.y) ||\n          outOfRange(a.z, b.z, p.z));\n}\n\nbool outOfRange(vec4 a, vec4 b, vec4 p) {\n  return outOfRange(a.xyz, b.xyz, p.xyz);\n}\n\nuniform float pickId;\nuniform vec3 clipBounds[2];\n\nvarying vec3 worldPosition;\nvarying float pixelArcLength;\nvarying vec4 fragColor;\n\nvoid main() {\n  if (outOfRange(clipBounds[0], clipBounds[1], worldPosition)) discard;\n\n  gl_FragColor \x3d vec4(pickId/255.0, packFloat(pixelArcLength).xyz);\n}"]),
a=[{name:"position",type:"vec3"},{name:"nextPosition",type:"vec3"},{name:"arcLength",type:"float"},{name:"lineWidth",type:"float"},{name:"color",type:"vec4"}];G.createShader=function(g){return p(g,n,k,null,a)};G.createPickShader=function(g){return p(g,n,m,null,a)}},{"gl-shader":339,glslify:282}],281:[function(b,N,G){function p(q){for(var t=[[-1E6,-1E6,-1E6],[1E6,1E6,1E6]],w=0;3>w;++w)t[0][w]=Math.max(q[0][w],t[0][w]),t[1][w]=Math.min(q[1][w],t[1][w]);return t}function n(q,t,w,x){this.arcLength=q;
this.position=t;this.index=w;this.dataCoordinate=x}function k(q,t,w,x,z,B){this.gl=q;this.shader=t;this.pickShader=w;this.buffer=x;this.vao=z;this.clipBounds=[[-Infinity,-Infinity,-Infinity],[Infinity,Infinity,Infinity]];this.points=[];this.arcLength=[];this.vertexCount=0;this.bounds=[[0,0,0],[0,0,0]];this.pickId=0;this.lineWidth=1;this.texture=B;this.opacity=this.dashScale=1;this.hasAlpha=!1;this.dirty=!0;this.pixelRatio=1}N.exports=function(q){var t=q.gl||q.scene&&q.scene.gl,w=d(t);w.attributes.position.location=
0;w.attributes.nextPosition.location=1;w.attributes.arcLength.location=2;w.attributes.lineWidth.location=3;w.attributes.color.location=4;var x=e(t);x.attributes.position.location=0;x.attributes.nextPosition.location=1;x.attributes.arcLength.location=2;x.attributes.lineWidth.location=3;x.attributes.color.location=4;for(var z=m(t),B=a(t,[{buffer:z,size:3,offset:0,stride:48},{buffer:z,size:3,offset:12,stride:48},{buffer:z,size:1,offset:24,stride:48},{buffer:z,size:1,offset:28,stride:48},{buffer:z,size:4,
offset:32,stride:48}]),A=c(Array(1024),[256,1,4]),D=0;1024>D;++D)A.data[D]=255;A=g(t,A);A.wrap=t.REPEAT;t=new k(t,w,x,z,B,A);t.update(q);return t};var m=b("gl-buffer"),a=b("gl-vao"),g=b("gl-texture2d"),h=new Uint8Array(4),r=new Float32Array(h.buffer),l=b("binary-search-bounds"),c=b("ndarray");b=b("./lib/shaders");var d=b.createShader,e=b.createPickShader,f=[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1];b=k.prototype;b.isTransparent=function(){return this.hasAlpha};b.isOpaque=function(){return!this.hasAlpha};b.pickSlots=
1;b.setPickBase=function(q){this.pickId=q};b.drawTransparent=b.draw=function(q){if(this.vertexCount){var t=this.gl,w=this.shader,x=this.vao;w.bind();w.uniforms={model:q.model||f,view:q.view||f,projection:q.projection||f,clipBounds:p(this.clipBounds),dashTexture:this.texture.bind(),dashScale:this.dashScale/this.arcLength[this.arcLength.length-1],opacity:this.opacity,screenShape:[t.drawingBufferWidth,t.drawingBufferHeight],pixelRatio:this.pixelRatio};x.bind();x.draw(t.TRIANGLE_STRIP,this.vertexCount);
x.unbind()}};b.drawPick=function(q){if(this.vertexCount){var t=this.gl,w=this.pickShader,x=this.vao;w.bind();w.uniforms={model:q.model||f,view:q.view||f,projection:q.projection||f,pickId:this.pickId,clipBounds:p(this.clipBounds),screenShape:[t.drawingBufferWidth,t.drawingBufferHeight],pixelRatio:this.pixelRatio};x.bind();x.draw(t.TRIANGLE_STRIP,this.vertexCount);x.unbind()}};b.update=function(q){var t;this.dirty=!0;var w=!!q.connectGaps;"dashScale"in q&&(this.dashScale=q.dashScale);this.hasAlpha=
!1;"opacity"in q&&(this.opacity=+q.opacity,1>this.opacity&&(this.hasAlpha=!0));var x=[],z=[],B=[],A=0,D=0,C=[[Infinity,Infinity,Infinity],[-Infinity,-Infinity,-Infinity]],v=q.position||q.positions;if(v){var y=q.color||q.colors||[0,0,0,1],F=q.lineWidth||1,J=!1;var K=1;a:for(;K<v.length;++K){var M=v[K-1],H=v[K];z.push(A);B.push(M.slice());for(t=0;3>t;++t){if(isNaN(M[t])||isNaN(H[t])||!isFinite(M[t])||!isFinite(H[t])){if(!w&&0<x.length){for(J=0;24>J;++J)x.push(x[x.length-12]);D+=2;J=!0}continue a}C[0][t]=
Math.min(C[0][t],M[t],H[t]);C[1][t]=Math.max(C[1][t],M[t],H[t])}if(Array.isArray(y[0])){var O=y.length>K-1?y[K-1]:0<y.length?y[y.length-1]:[0,0,0,1];var I=y.length>K?y[K]:0<y.length?y[y.length-1]:[0,0,0,1]}else O=I=y;3===O.length&&(O=[O[0],O[1],O[2],1]);3===I.length&&(I=[I[0],I[1],I[2],1]);!this.hasAlpha&&1>O[3]&&(this.hasAlpha=!0);var L=Array.isArray(F)?F.length>K-1?F[K-1]:0<F.length?F[F.length-1]:[0,0,0,1]:F;var Q=A;t=A;for(var Z=A=0;3>Z;++Z){var ba=M[Z]-H[Z];A+=ba*ba}A=t+Math.sqrt(A);if(J){for(t=
0;2>t;++t)x.push(M[0],M[1],M[2],H[0],H[1],H[2],Q,L,O[0],O[1],O[2],O[3]);D+=2;J=!1}x.push(M[0],M[1],M[2],H[0],H[1],H[2],Q,L,O[0],O[1],O[2],O[3],M[0],M[1],M[2],H[0],H[1],H[2],Q,-L,O[0],O[1],O[2],O[3],H[0],H[1],H[2],M[0],M[1],M[2],A,-L,I[0],I[1],I[2],I[3],H[0],H[1],H[2],M[0],M[1],M[2],A,L,I[0],I[1],I[2],I[3]);D+=4}}this.buffer.update(x);z.push(A);B.push(v[v.length-1].slice());this.bounds=C;this.vertexCount=D;this.points=B;this.arcLength=z;if("dashes"in q){q=q.dashes.slice();q.unshift(0);for(K=1;K<q.length;++K)q[K]=
q[K-1]+q[K];w=c(Array(1024),[256,1,4]);for(K=0;256>K;++K){for(t=0;4>t;++t)w.set(K,0,t,0);l.le(q,q[q.length-1]*K/255)&1?w.set(K,0,0,0):w.set(K,0,0,255)}this.texture.setPixels(w)}};b.dispose=function(){this.shader.dispose();this.vao.dispose();this.buffer.dispose()};b.pick=function(q){if(!q||q.id!==this.pickId)return null;var t=q.value[0];var w=q.value[1];q=q.value[2];h[0]=0;h[1]=q;h[2]=w;h[3]=t;t=r[0];q=l.le(this.arcLength,t);if(0>q)return null;if(q===this.arcLength.length-1)return new n(this.arcLength[this.arcLength.length-
1],this.points[this.points.length-1].slice(),q);var x=this.points[q],z=this.points[Math.min(q+1,this.points.length-1)],B=(t-this.arcLength[q])/(this.arcLength[q+1]-this.arcLength[q]),A=1-B;w=[0,0,0];for(var D=0;3>D;++D)w[D]=A*x[D]+B*z[D];q=Math.min(.5>B?q:q+1,this.points.length-1);return new n(t,w,q,this.points[q])}},{"./lib/shaders":280,"binary-search-bounds":103,"gl-buffer":267,"gl-texture2d":356,"gl-vao":361,ndarray:483}],282:[function(b,N,G){arguments[4][265][0].apply(G,arguments)},{dup:265}],
283:[function(b,N,G){N.exports=function(p,n){var k=n[0],m=n[1],a=n[2],g=n[3],h=n[4],r=n[5],l=n[6],c=n[7],d=n[8],e=n[9],f=n[10],q=n[11],t=n[12],w=n[13],x=n[14];n=n[15];p[0]=r*(f*n-q*x)-e*(l*n-c*x)+w*(l*q-c*f);p[1]=-(m*(f*n-q*x)-e*(a*n-g*x)+w*(a*q-g*f));p[2]=m*(l*n-c*x)-r*(a*n-g*x)+w*(a*c-g*l);p[3]=-(m*(l*q-c*f)-r*(a*q-g*f)+e*(a*c-g*l));p[4]=-(h*(f*n-q*x)-d*(l*n-c*x)+t*(l*q-c*f));p[5]=k*(f*n-q*x)-d*(a*n-g*x)+t*(a*q-g*f);p[6]=-(k*(l*n-c*x)-h*(a*n-g*x)+t*(a*c-g*l));p[7]=k*(l*q-c*f)-h*(a*q-g*f)+d*(a*c-
g*l);p[8]=h*(e*n-q*w)-d*(r*n-c*w)+t*(r*q-c*e);p[9]=-(k*(e*n-q*w)-d*(m*n-g*w)+t*(m*q-g*e));p[10]=k*(r*n-c*w)-h*(m*n-g*w)+t*(m*c-g*r);p[11]=-(k*(r*q-c*e)-h*(m*q-g*e)+d*(m*c-g*r));p[12]=-(h*(e*x-f*w)-d*(r*x-l*w)+t*(r*f-l*e));p[13]=k*(e*x-f*w)-d*(m*x-a*w)+t*(m*f-a*e);p[14]=-(k*(r*x-l*w)-h*(m*x-a*w)+t*(m*l-a*r));p[15]=k*(r*f-l*e)-h*(m*f-a*e)+d*(m*l-a*r);return p}},{}],284:[function(b,N,G){N.exports=function(p){var n=new Float32Array(16);n[0]=p[0];n[1]=p[1];n[2]=p[2];n[3]=p[3];n[4]=p[4];n[5]=p[5];n[6]=
p[6];n[7]=p[7];n[8]=p[8];n[9]=p[9];n[10]=p[10];n[11]=p[11];n[12]=p[12];n[13]=p[13];n[14]=p[14];n[15]=p[15];return n}},{}],285:[function(b,N,G){N.exports=function(p,n){p[0]=n[0];p[1]=n[1];p[2]=n[2];p[3]=n[3];p[4]=n[4];p[5]=n[5];p[6]=n[6];p[7]=n[7];p[8]=n[8];p[9]=n[9];p[10]=n[10];p[11]=n[11];p[12]=n[12];p[13]=n[13];p[14]=n[14];p[15]=n[15];return p}},{}],286:[function(b,N,G){N.exports=function(){var p=new Float32Array(16);p[0]=1;p[1]=0;p[2]=0;p[3]=0;p[4]=0;p[5]=1;p[6]=0;p[7]=0;p[8]=0;p[9]=0;p[10]=1;
p[11]=0;p[12]=0;p[13]=0;p[14]=0;p[15]=1;return p}},{}],287:[function(b,N,G){N.exports=function(p){var n=p[0],k=p[1],m=p[2],a=p[3],g=p[4],h=p[5],r=p[6],l=p[7],c=p[8],d=p[9],e=p[10],f=p[11],q=p[12],t=p[13],w=p[14];p=p[15];return(n*h-k*g)*(e*p-f*w)-(n*r-m*g)*(d*p-f*t)+(n*l-a*g)*(d*w-e*t)+(k*r-m*h)*(c*p-f*q)-(k*l-a*h)*(c*w-e*q)+(m*l-a*r)*(c*t-d*q)}},{}],288:[function(b,N,G){N.exports=function(p,n){var k=n[0],m=n[1],a=n[2];n=n[3];var g=k+k,h=m+m,r=a+a;k*=g;var l=m*g;m*=h;var c=a*g,d=a*h;a*=r;g*=n;h*=n;
n*=r;p[0]=1-m-a;p[1]=l+n;p[2]=c-h;p[3]=0;p[4]=l-n;p[5]=1-k-a;p[6]=d+g;p[7]=0;p[8]=c+h;p[9]=d-g;p[10]=1-k-m;p[11]=0;p[12]=0;p[13]=0;p[14]=0;p[15]=1;return p}},{}],289:[function(b,N,G){N.exports=function(p,n,k){var m=k[0],a=k[1];k=k[2];var g=Math.sqrt(m*m+a*a+k*k);if(1E-6>Math.abs(g))return null;g=1/g;m*=g;a*=g;k*=g;g=Math.sin(n);n=Math.cos(n);var h=1-n;p[0]=m*m*h+n;p[1]=a*m*h+k*g;p[2]=k*m*h-a*g;p[3]=0;p[4]=m*a*h-k*g;p[5]=a*a*h+n;p[6]=k*a*h+m*g;p[7]=0;p[8]=m*k*h+a*g;p[9]=a*k*h-m*g;p[10]=k*k*h+n;p[11]=
0;p[12]=0;p[13]=0;p[14]=0;p[15]=1;return p}},{}],290:[function(b,N,G){N.exports=function(p,n,k){var m=n[0],a=n[1],g=n[2],h=n[3],r=m+m,l=a+a,c=g+g;n=m*r;var d=m*l;m*=c;var e=a*l;a*=c;g*=c;r*=h;l*=h;h*=c;p[0]=1-(e+g);p[1]=d+h;p[2]=m-l;p[3]=0;p[4]=d-h;p[5]=1-(n+g);p[6]=a+r;p[7]=0;p[8]=m+l;p[9]=a-r;p[10]=1-(n+e);p[11]=0;p[12]=k[0];p[13]=k[1];p[14]=k[2];p[15]=1;return p}},{}],291:[function(b,N,G){N.exports=function(p,n){p[0]=n[0];p[1]=0;p[2]=0;p[3]=0;p[4]=0;p[5]=n[1];p[6]=0;p[7]=0;p[8]=0;p[9]=0;p[10]=
n[2];p[11]=0;p[12]=0;p[13]=0;p[14]=0;p[15]=1;return p}},{}],292:[function(b,N,G){N.exports=function(p,n){p[0]=1;p[1]=0;p[2]=0;p[3]=0;p[4]=0;p[5]=1;p[6]=0;p[7]=0;p[8]=0;p[9]=0;p[10]=1;p[11]=0;p[12]=n[0];p[13]=n[1];p[14]=n[2];p[15]=1;return p}},{}],293:[function(b,N,G){N.exports=function(p,n){var k=Math.sin(n);n=Math.cos(n);p[0]=1;p[1]=0;p[2]=0;p[3]=0;p[4]=0;p[5]=n;p[6]=k;p[7]=0;p[8]=0;p[9]=-k;p[10]=n;p[11]=0;p[12]=0;p[13]=0;p[14]=0;p[15]=1;return p}},{}],294:[function(b,N,G){N.exports=function(p,n){var k=
Math.sin(n);n=Math.cos(n);p[0]=n;p[1]=0;p[2]=-k;p[3]=0;p[4]=0;p[5]=1;p[6]=0;p[7]=0;p[8]=k;p[9]=0;p[10]=n;p[11]=0;p[12]=0;p[13]=0;p[14]=0;p[15]=1;return p}},{}],295:[function(b,N,G){N.exports=function(p,n){var k=Math.sin(n);n=Math.cos(n);p[0]=n;p[1]=k;p[2]=0;p[3]=0;p[4]=-k;p[5]=n;p[6]=0;p[7]=0;p[8]=0;p[9]=0;p[10]=1;p[11]=0;p[12]=0;p[13]=0;p[14]=0;p[15]=1;return p}},{}],296:[function(b,N,G){N.exports=function(p,n,k,m,a,g,h){var r=1/(k-n),l=1/(a-m),c=1/(g-h);p[0]=2*g*r;p[1]=0;p[2]=0;p[3]=0;p[4]=0;p[5]=
2*g*l;p[6]=0;p[7]=0;p[8]=(k+n)*r;p[9]=(a+m)*l;p[10]=(h+g)*c;p[11]=-1;p[12]=0;p[13]=0;p[14]=h*g*2*c;p[15]=0;return p}},{}],297:[function(b,N,G){N.exports=function(p){p[0]=1;p[1]=0;p[2]=0;p[3]=0;p[4]=0;p[5]=1;p[6]=0;p[7]=0;p[8]=0;p[9]=0;p[10]=1;p[11]=0;p[12]=0;p[13]=0;p[14]=0;p[15]=1;return p}},{}],298:[function(b,N,G){N.exports={create:b("./create"),clone:b("./clone"),copy:b("./copy"),identity:b("./identity"),transpose:b("./transpose"),invert:b("./invert"),adjoint:b("./adjoint"),determinant:b("./determinant"),
multiply:b("./multiply"),translate:b("./translate"),scale:b("./scale"),rotate:b("./rotate"),rotateX:b("./rotateX"),rotateY:b("./rotateY"),rotateZ:b("./rotateZ"),fromRotation:b("./fromRotation"),fromRotationTranslation:b("./fromRotationTranslation"),fromScaling:b("./fromScaling"),fromTranslation:b("./fromTranslation"),fromXRotation:b("./fromXRotation"),fromYRotation:b("./fromYRotation"),fromZRotation:b("./fromZRotation"),fromQuat:b("./fromQuat"),frustum:b("./frustum"),perspective:b("./perspective"),
perspectiveFromFieldOfView:b("./perspectiveFromFieldOfView"),ortho:b("./ortho"),lookAt:b("./lookAt"),str:b("./str")}},{"./adjoint":283,"./clone":284,"./copy":285,"./create":286,"./determinant":287,"./fromQuat":288,"./fromRotation":289,"./fromRotationTranslation":290,"./fromScaling":291,"./fromTranslation":292,"./fromXRotation":293,"./fromYRotation":294,"./fromZRotation":295,"./frustum":296,"./identity":297,"./invert":299,"./lookAt":300,"./multiply":301,"./ortho":302,"./perspective":303,"./perspectiveFromFieldOfView":304,
"./rotate":305,"./rotateX":306,"./rotateY":307,"./rotateZ":308,"./scale":309,"./str":310,"./translate":311,"./transpose":312}],299:[function(b,N,G){N.exports=function(p,n){var k=n[0],m=n[1],a=n[2],g=n[3],h=n[4],r=n[5],l=n[6],c=n[7],d=n[8],e=n[9],f=n[10],q=n[11],t=n[12],w=n[13],x=n[14];n=n[15];var z=k*r-m*h,B=k*l-a*h,A=k*c-g*h,D=m*l-a*r,C=m*c-g*r,v=a*c-g*l,y=d*w-e*t,F=d*x-f*t,J=d*n-q*t,K=e*x-f*w,M=e*n-q*w,H=f*n-q*x,O=z*H-B*M+A*K+D*J-C*F+v*y;if(!O)return null;O=1/O;p[0]=(r*H-l*M+c*K)*O;p[1]=(a*M-m*
H-g*K)*O;p[2]=(w*v-x*C+n*D)*O;p[3]=(f*C-e*v-q*D)*O;p[4]=(l*J-h*H-c*F)*O;p[5]=(k*H-a*J+g*F)*O;p[6]=(x*A-t*v-n*B)*O;p[7]=(d*v-f*A+q*B)*O;p[8]=(h*M-r*J+c*y)*O;p[9]=(m*J-k*M-g*y)*O;p[10]=(t*C-w*A+n*z)*O;p[11]=(e*A-d*C-q*z)*O;p[12]=(r*F-h*K-l*y)*O;p[13]=(k*K-m*F+a*y)*O;p[14]=(w*B-t*D-x*z)*O;p[15]=(d*D-e*B+f*z)*O;return p}},{}],300:[function(b,N,G){var p=b("./identity");N.exports=function(n,k,m,a){var g=k[0],h=k[1];k=k[2];var r=a[0];var l=a[1];var c=a[2];var d=m[0];a=m[1];var e=m[2];if(1E-6>Math.abs(g-
d)&&1E-6>Math.abs(h-a)&&1E-6>Math.abs(k-e))return p(n);m=g-d;a=h-a;d=k-e;var f=1/Math.sqrt(m*m+a*a+d*d);m*=f;a*=f;d*=f;e=l*d-c*a;c=c*m-r*d;r=r*a-l*m;(f=Math.sqrt(e*e+c*c+r*r))?(f=1/f,e*=f,c*=f,r*=f):r=c=e=0;l=a*r-d*c;var q=d*e-m*r;var t=m*c-a*e;(f=Math.sqrt(l*l+q*q+t*t))?(f=1/f,l*=f,q*=f,t*=f):t=q=l=0;n[0]=e;n[1]=l;n[2]=m;n[3]=0;n[4]=c;n[5]=q;n[6]=a;n[7]=0;n[8]=r;n[9]=t;n[10]=d;n[11]=0;n[12]=-(e*g+c*h+r*k);n[13]=-(l*g+q*h+t*k);n[14]=-(m*g+a*h+d*k);n[15]=1;return n}},{"./identity":297}],301:[function(b,
N,G){N.exports=function(p,n,k){var m=n[0],a=n[1],g=n[2],h=n[3],r=n[4],l=n[5],c=n[6],d=n[7],e=n[8],f=n[9],q=n[10],t=n[11],w=n[12],x=n[13],z=n[14];n=n[15];var B=k[0],A=k[1],D=k[2],C=k[3];p[0]=B*m+A*r+D*e+C*w;p[1]=B*a+A*l+D*f+C*x;p[2]=B*g+A*c+D*q+C*z;p[3]=B*h+A*d+D*t+C*n;B=k[4];A=k[5];D=k[6];C=k[7];p[4]=B*m+A*r+D*e+C*w;p[5]=B*a+A*l+D*f+C*x;p[6]=B*g+A*c+D*q+C*z;p[7]=B*h+A*d+D*t+C*n;B=k[8];A=k[9];D=k[10];C=k[11];p[8]=B*m+A*r+D*e+C*w;p[9]=B*a+A*l+D*f+C*x;p[10]=B*g+A*c+D*q+C*z;p[11]=B*h+A*d+D*t+C*n;B=k[12];
A=k[13];D=k[14];C=k[15];p[12]=B*m+A*r+D*e+C*w;p[13]=B*a+A*l+D*f+C*x;p[14]=B*g+A*c+D*q+C*z;p[15]=B*h+A*d+D*t+C*n;return p}},{}],302:[function(b,N,G){N.exports=function(p,n,k,m,a,g,h){var r=1/(n-k),l=1/(m-a),c=1/(g-h);p[0]=-2*r;p[1]=0;p[2]=0;p[3]=0;p[4]=0;p[5]=-2*l;p[6]=0;p[7]=0;p[8]=0;p[9]=0;p[10]=2*c;p[11]=0;p[12]=(n+k)*r;p[13]=(a+m)*l;p[14]=(h+g)*c;p[15]=1;return p}},{}],303:[function(b,N,G){N.exports=function(p,n,k,m,a){n=1/Math.tan(n/2);var g=1/(m-a);p[0]=n/k;p[1]=0;p[2]=0;p[3]=0;p[4]=0;p[5]=n;
p[6]=0;p[7]=0;p[8]=0;p[9]=0;p[10]=(a+m)*g;p[11]=-1;p[12]=0;p[13]=0;p[14]=2*a*m*g;p[15]=0;return p}},{}],304:[function(b,N,G){N.exports=function(p,n,k,m){var a=Math.tan(n.upDegrees*Math.PI/180),g=Math.tan(n.downDegrees*Math.PI/180),h=Math.tan(n.leftDegrees*Math.PI/180);n=Math.tan(n.rightDegrees*Math.PI/180);var r=2/(h+n),l=2/(a+g);p[0]=r;p[1]=0;p[2]=0;p[3]=0;p[4]=0;p[5]=l;p[6]=0;p[7]=0;p[8]=-((h-n)*r*.5);p[9]=(a-g)*l*.5;p[10]=m/(k-m);p[11]=-1;p[12]=0;p[13]=0;p[14]=m*k/(k-m);p[15]=0;return p}},{}],
305:[function(b,N,G){N.exports=function(p,n,k,m){var a=m[0],g=m[1];m=m[2];var h=Math.sqrt(a*a+g*g+m*m);if(1E-6>Math.abs(h))return null;h=1/h;a*=h;g*=h;m*=h;var r=Math.sin(k);var l=Math.cos(k);var c=1-l;k=n[0];h=n[1];var d=n[2];var e=n[3];var f=n[4];var q=n[5];var t=n[6];var w=n[7];var x=n[8];var z=n[9];var B=n[10];var A=n[11];var D=a*a*c+l;var C=g*a*c+m*r;var v=m*a*c-g*r;var y=a*g*c-m*r;var F=g*g*c+l;var J=m*g*c+a*r;var K=a*m*c+g*r;a=g*m*c-a*r;g=m*m*c+l;p[0]=k*D+f*C+x*v;p[1]=h*D+q*C+z*v;p[2]=d*D+
t*C+B*v;p[3]=e*D+w*C+A*v;p[4]=k*y+f*F+x*J;p[5]=h*y+q*F+z*J;p[6]=d*y+t*F+B*J;p[7]=e*y+w*F+A*J;p[8]=k*K+f*a+x*g;p[9]=h*K+q*a+z*g;p[10]=d*K+t*a+B*g;p[11]=e*K+w*a+A*g;n!==p&&(p[12]=n[12],p[13]=n[13],p[14]=n[14],p[15]=n[15]);return p}},{}],306:[function(b,N,G){N.exports=function(p,n,k){var m=Math.sin(k);k=Math.cos(k);var a=n[4],g=n[5],h=n[6],r=n[7],l=n[8],c=n[9],d=n[10],e=n[11];n!==p&&(p[0]=n[0],p[1]=n[1],p[2]=n[2],p[3]=n[3],p[12]=n[12],p[13]=n[13],p[14]=n[14],p[15]=n[15]);p[4]=a*k+l*m;p[5]=g*k+c*m;p[6]=
h*k+d*m;p[7]=r*k+e*m;p[8]=l*k-a*m;p[9]=c*k-g*m;p[10]=d*k-h*m;p[11]=e*k-r*m;return p}},{}],307:[function(b,N,G){N.exports=function(p,n,k){var m=Math.sin(k);k=Math.cos(k);var a=n[0],g=n[1],h=n[2],r=n[3],l=n[8],c=n[9],d=n[10],e=n[11];n!==p&&(p[4]=n[4],p[5]=n[5],p[6]=n[6],p[7]=n[7],p[12]=n[12],p[13]=n[13],p[14]=n[14],p[15]=n[15]);p[0]=a*k-l*m;p[1]=g*k-c*m;p[2]=h*k-d*m;p[3]=r*k-e*m;p[8]=a*m+l*k;p[9]=g*m+c*k;p[10]=h*m+d*k;p[11]=r*m+e*k;return p}},{}],308:[function(b,N,G){N.exports=function(p,n,k){var m=
Math.sin(k);k=Math.cos(k);var a=n[0],g=n[1],h=n[2],r=n[3],l=n[4],c=n[5],d=n[6],e=n[7];n!==p&&(p[8]=n[8],p[9]=n[9],p[10]=n[10],p[11]=n[11],p[12]=n[12],p[13]=n[13],p[14]=n[14],p[15]=n[15]);p[0]=a*k+l*m;p[1]=g*k+c*m;p[2]=h*k+d*m;p[3]=r*k+e*m;p[4]=l*k-a*m;p[5]=c*k-g*m;p[6]=d*k-h*m;p[7]=e*k-r*m;return p}},{}],309:[function(b,N,G){N.exports=function(p,n,k){var m=k[0],a=k[1];k=k[2];p[0]=n[0]*m;p[1]=n[1]*m;p[2]=n[2]*m;p[3]=n[3]*m;p[4]=n[4]*a;p[5]=n[5]*a;p[6]=n[6]*a;p[7]=n[7]*a;p[8]=n[8]*k;p[9]=n[9]*k;p[10]=
n[10]*k;p[11]=n[11]*k;p[12]=n[12];p[13]=n[13];p[14]=n[14];p[15]=n[15];return p}},{}],310:[function(b,N,G){N.exports=function(p){return"mat4("+p[0]+", "+p[1]+", "+p[2]+", "+p[3]+", "+p[4]+", "+p[5]+", "+p[6]+", "+p[7]+", "+p[8]+", "+p[9]+", "+p[10]+", "+p[11]+", "+p[12]+", "+p[13]+", "+p[14]+", "+p[15]+")"}},{}],311:[function(b,N,G){N.exports=function(p,n,k){var m=k[0],a=k[1];k=k[2];if(n===p)p[12]=n[0]*m+n[4]*a+n[8]*k+n[12],p[13]=n[1]*m+n[5]*a+n[9]*k+n[13],p[14]=n[2]*m+n[6]*a+n[10]*k+n[14],p[15]=n[3]*
m+n[7]*a+n[11]*k+n[15];else{var g=n[0];var h=n[1];var r=n[2];var l=n[3];var c=n[4];var d=n[5];var e=n[6];var f=n[7];var q=n[8];var t=n[9];var w=n[10];var x=n[11];p[0]=g;p[1]=h;p[2]=r;p[3]=l;p[4]=c;p[5]=d;p[6]=e;p[7]=f;p[8]=q;p[9]=t;p[10]=w;p[11]=x;p[12]=g*m+c*a+q*k+n[12];p[13]=h*m+d*a+t*k+n[13];p[14]=r*m+e*a+w*k+n[14];p[15]=l*m+f*a+x*k+n[15]}return p}},{}],312:[function(b,N,G){N.exports=function(p,n){if(p===n){var k=n[1],m=n[2],a=n[3],g=n[6],h=n[7],r=n[11];p[1]=n[4];p[2]=n[8];p[3]=n[12];p[4]=k;p[6]=
n[9];p[7]=n[13];p[8]=m;p[9]=g;p[11]=n[14];p[12]=a;p[13]=h;p[14]=r}else p[0]=n[0],p[1]=n[4],p[2]=n[8],p[3]=n[12],p[4]=n[1],p[5]=n[5],p[6]=n[9],p[7]=n[13],p[8]=n[2],p[9]=n[6],p[10]=n[10],p[11]=n[14],p[12]=n[3],p[13]=n[7],p[14]=n[11],p[15]=n[15];return p}},{}],313:[function(b,N,G){function p(m,a){for(var g=[0,0,0,0],h=0;4>h;++h)for(var r=0;4>r;++r)g[r]+=m[4*h+r]*a[h];return g}var n=b("barycentric"),k=b("polytope-closest-point/lib/closest_point_2d.js");N.exports=function(m,a,g,h,r,l){if(1===m.length)return[0,
m[0].slice()];for(var c=Array(m.length),d=0;d<m.length;++d){var e=d,f=m[d],q=l;f=p(r,p(h,p(g,[f[0],f[1],f[2],1])));for(var t=0;3>t;++t)f[t]/=f[3];c[e]=[.5*q[0]*(1+f[0]),.5*q[1]*(1-f[1])]}g=0;h=Infinity;for(d=0;d<c.length;++d){for(l=r=0;2>l;++l)r+=Math.pow(c[d][l]-a[l],2);r<h&&(h=r,g=d)}if(2===c.length){for(r=h=d=0;2>r;++r)d+=Math.pow(a[r]-c[0][r],2),h+=Math.pow(a[r]-c[1][r],2);d=Math.sqrt(d);h=Math.sqrt(h);a=1E-6>d+h?[1,0]:[h/(d+h),d/(h+d)]}else 3===c.length?(d=[0,0],k(c[0],c[1],c[2],a,d),a=n(c,d)):
a=[];for(d=c=0;3>d;++d){if(-.001>a[d]||1.0001<a[d])return null;c+=a[d]}if(.001<Math.abs(c-1))return null;c=[0,0,0];for(d=0;d<m.length;++d)for(h=m[d],r=a[d],l=0;3>l;++l)c[l]+=r*h[l];return[g,c,a]}},{barycentric:85,"polytope-closest-point/lib/closest_point_2d.js":512}],314:[function(b,N,G){var p=b("glslify");b=p(["precision highp float;\n#define GLSLIFY 1\n\nattribute vec3 position, normal;\nattribute vec4 color;\nattribute vec2 uv;\n\nuniform mat4 model\n           , view\n           , projection\n           , inverseModel;\nuniform vec3 eyePosition\n           , lightPosition;\n\nvarying vec3 f_normal\n           , f_lightDirection\n           , f_eyeDirection\n           , f_data;\nvarying vec4 f_color;\nvarying vec2 f_uv;\n\nvec4 project(vec3 p) {\n  return projection * view * model * vec4(p, 1.0);\n}\n\nvoid main() {\n  gl_Position      \x3d project(position);\n\n  //Lighting geometry parameters\n  vec4 cameraCoordinate \x3d view * vec4(position , 1.0);\n  cameraCoordinate.xyz /\x3d cameraCoordinate.w;\n  f_lightDirection \x3d lightPosition - cameraCoordinate.xyz;\n  f_eyeDirection   \x3d eyePosition - cameraCoordinate.xyz;\n  f_normal  \x3d normalize((vec4(normal, 0.0) * inverseModel).xyz);\n\n  f_color          \x3d color;\n  f_data           \x3d position;\n  f_uv             \x3d uv;\n}\n"]);
N=p(["#extension GL_OES_standard_derivatives : enable\n\nprecision highp float;\n#define GLSLIFY 1\n\nfloat beckmannDistribution(float x, float roughness) {\n  float NdotH \x3d max(x, 0.0001);\n  float cos2Alpha \x3d NdotH * NdotH;\n  float tan2Alpha \x3d (cos2Alpha - 1.0) / cos2Alpha;\n  float roughness2 \x3d roughness * roughness;\n  float denom \x3d 3.141592653589793 * roughness2 * cos2Alpha * cos2Alpha;\n  return exp(tan2Alpha / roughness2) / denom;\n}\n\nfloat cookTorranceSpecular(\n  vec3 lightDirection,\n  vec3 viewDirection,\n  vec3 surfaceNormal,\n  float roughness,\n  float fresnel) {\n\n  float VdotN \x3d max(dot(viewDirection, surfaceNormal), 0.0);\n  float LdotN \x3d max(dot(lightDirection, surfaceNormal), 0.0);\n\n  //Half angle vector\n  vec3 H \x3d normalize(lightDirection + viewDirection);\n\n  //Geometric term\n  float NdotH \x3d max(dot(surfaceNormal, H), 0.0);\n  float VdotH \x3d max(dot(viewDirection, H), 0.000001);\n  float LdotH \x3d max(dot(lightDirection, H), 0.000001);\n  float G1 \x3d (2.0 * NdotH * VdotN) / VdotH;\n  float G2 \x3d (2.0 * NdotH * LdotN) / LdotH;\n  float G \x3d min(1.0, min(G1, G2));\n  \n  //Distribution term\n  float D \x3d beckmannDistribution(NdotH, roughness);\n\n  //Fresnel term\n  float F \x3d pow(1.0 - VdotN, fresnel);\n\n  //Multiply terms and done\n  return  G * F * D / max(3.14159265 * VdotN, 0.000001);\n}\n\n//#pragma glslify: beckmann \x3d require(glsl-specular-beckmann) // used in gl-surface3d\n\nbool outOfRange(float a, float b, float p) {\n  return ((p \x3e max(a, b)) || \n          (p \x3c min(a, b)));\n}\n\nbool outOfRange(vec2 a, vec2 b, vec2 p) {\n  return (outOfRange(a.x, b.x, p.x) ||\n          outOfRange(a.y, b.y, p.y));\n}\n\nbool outOfRange(vec3 a, vec3 b, vec3 p) {\n  return (outOfRange(a.x, b.x, p.x) ||\n          outOfRange(a.y, b.y, p.y) ||\n          outOfRange(a.z, b.z, p.z));\n}\n\nbool outOfRange(vec4 a, vec4 b, vec4 p) {\n  return outOfRange(a.xyz, b.xyz, p.xyz);\n}\n\nuniform vec3 clipBounds[2];\nuniform float roughness\n            , fresnel\n            , kambient\n            , kdiffuse\n            , kspecular;\nuniform sampler2D texture;\n\nvarying vec3 f_normal\n           , f_lightDirection\n           , f_eyeDirection\n           , f_data;\nvarying vec4 f_color;\nvarying vec2 f_uv;\n\nvoid main() {\n  if (f_color.a \x3d\x3d 0.0 ||\n    outOfRange(clipBounds[0], clipBounds[1], f_data)\n  ) discard;\n\n  vec3 N \x3d normalize(f_normal);\n  vec3 L \x3d normalize(f_lightDirection);\n  vec3 V \x3d normalize(f_eyeDirection);\n\n  if(gl_FrontFacing) {\n    N \x3d -N;\n  }\n\n  float specular \x3d min(1.0, max(0.0, cookTorranceSpecular(L, V, N, roughness, fresnel)));\n  //float specular \x3d max(0.0, beckmann(L, V, N, roughness)); // used in gl-surface3d\n\n  float diffuse  \x3d min(kambient + kdiffuse * max(dot(N, L), 0.0), 1.0);\n\n  vec4 surfaceColor \x3d vec4(f_color.rgb, 1.0) * texture2D(texture, f_uv);\n  vec4 litColor \x3d surfaceColor.a * vec4(diffuse * surfaceColor.rgb + kspecular * vec3(1,1,1) * specular,  1.0);\n\n  gl_FragColor \x3d litColor * f_color.a;\n}\n"]);
var n=p(["precision highp float;\n#define GLSLIFY 1\n\nattribute vec3 position;\nattribute vec4 color;\nattribute vec2 uv;\n\nuniform mat4 model, view, projection;\n\nvarying vec4 f_color;\nvarying vec3 f_data;\nvarying vec2 f_uv;\n\nvoid main() {\n  gl_Position \x3d projection * view * model * vec4(position, 1.0);\n  f_color \x3d color;\n  f_data  \x3d position;\n  f_uv    \x3d uv;\n}"]),k=p(["precision highp float;\n#define GLSLIFY 1\n\nbool outOfRange(float a, float b, float p) {\n  return ((p \x3e max(a, b)) || \n          (p \x3c min(a, b)));\n}\n\nbool outOfRange(vec2 a, vec2 b, vec2 p) {\n  return (outOfRange(a.x, b.x, p.x) ||\n          outOfRange(a.y, b.y, p.y));\n}\n\nbool outOfRange(vec3 a, vec3 b, vec3 p) {\n  return (outOfRange(a.x, b.x, p.x) ||\n          outOfRange(a.y, b.y, p.y) ||\n          outOfRange(a.z, b.z, p.z));\n}\n\nbool outOfRange(vec4 a, vec4 b, vec4 p) {\n  return outOfRange(a.xyz, b.xyz, p.xyz);\n}\n\nuniform vec3 clipBounds[2];\nuniform sampler2D texture;\nuniform float opacity;\n\nvarying vec4 f_color;\nvarying vec3 f_data;\nvarying vec2 f_uv;\n\nvoid main() {\n  if (outOfRange(clipBounds[0], clipBounds[1], f_data)) discard;\n\n  gl_FragColor \x3d f_color * texture2D(texture, f_uv) * opacity;\n}"]),
m=p(["precision highp float;\n#define GLSLIFY 1\n\nbool outOfRange(float a, float b, float p) {\n  return ((p \x3e max(a, b)) || \n          (p \x3c min(a, b)));\n}\n\nbool outOfRange(vec2 a, vec2 b, vec2 p) {\n  return (outOfRange(a.x, b.x, p.x) ||\n          outOfRange(a.y, b.y, p.y));\n}\n\nbool outOfRange(vec3 a, vec3 b, vec3 p) {\n  return (outOfRange(a.x, b.x, p.x) ||\n          outOfRange(a.y, b.y, p.y) ||\n          outOfRange(a.z, b.z, p.z));\n}\n\nbool outOfRange(vec4 a, vec4 b, vec4 p) {\n  return outOfRange(a.xyz, b.xyz, p.xyz);\n}\n\nattribute vec3 position;\nattribute vec4 color;\nattribute vec2 uv;\nattribute float pointSize;\n\nuniform mat4 model, view, projection;\nuniform vec3 clipBounds[2];\n\nvarying vec4 f_color;\nvarying vec2 f_uv;\n\nvoid main() {\n  if (outOfRange(clipBounds[0], clipBounds[1], position)) {\n\n    gl_Position \x3d vec4(0.0, 0.0 ,0.0 ,0.0);\n  } else {\n    gl_Position \x3d projection * view * model * vec4(position, 1.0);\n  }\n  gl_PointSize \x3d pointSize;\n  f_color \x3d color;\n  f_uv \x3d uv;\n}"]),
a=p(["precision highp float;\n#define GLSLIFY 1\n\nuniform sampler2D texture;\nuniform float opacity;\n\nvarying vec4 f_color;\nvarying vec2 f_uv;\n\nvoid main() {\n  vec2 pointR \x3d gl_PointCoord.xy - vec2(0.5, 0.5);\n  if(dot(pointR, pointR) \x3e 0.25) {\n    discard;\n  }\n  gl_FragColor \x3d f_color * texture2D(texture, f_uv) * opacity;\n}"]),g=p(["precision highp float;\n#define GLSLIFY 1\n\nattribute vec3 position;\nattribute vec4 id;\n\nuniform mat4 model, view, projection;\n\nvarying vec3 f_position;\nvarying vec4 f_id;\n\nvoid main() {\n  gl_Position \x3d projection * view * model * vec4(position, 1.0);\n  f_id        \x3d id;\n  f_position  \x3d position;\n}"]),
h=p(["precision highp float;\n#define GLSLIFY 1\n\nbool outOfRange(float a, float b, float p) {\n  return ((p \x3e max(a, b)) || \n          (p \x3c min(a, b)));\n}\n\nbool outOfRange(vec2 a, vec2 b, vec2 p) {\n  return (outOfRange(a.x, b.x, p.x) ||\n          outOfRange(a.y, b.y, p.y));\n}\n\nbool outOfRange(vec3 a, vec3 b, vec3 p) {\n  return (outOfRange(a.x, b.x, p.x) ||\n          outOfRange(a.y, b.y, p.y) ||\n          outOfRange(a.z, b.z, p.z));\n}\n\nbool outOfRange(vec4 a, vec4 b, vec4 p) {\n  return outOfRange(a.xyz, b.xyz, p.xyz);\n}\n\nuniform vec3  clipBounds[2];\nuniform float pickId;\n\nvarying vec3 f_position;\nvarying vec4 f_id;\n\nvoid main() {\n  if (outOfRange(clipBounds[0], clipBounds[1], f_position)) discard;\n\n  gl_FragColor \x3d vec4(pickId, f_id.xyz);\n}"]),
r=p(["precision highp float;\n#define GLSLIFY 1\n\nbool outOfRange(float a, float b, float p) {\n  return ((p \x3e max(a, b)) || \n          (p \x3c min(a, b)));\n}\n\nbool outOfRange(vec2 a, vec2 b, vec2 p) {\n  return (outOfRange(a.x, b.x, p.x) ||\n          outOfRange(a.y, b.y, p.y));\n}\n\nbool outOfRange(vec3 a, vec3 b, vec3 p) {\n  return (outOfRange(a.x, b.x, p.x) ||\n          outOfRange(a.y, b.y, p.y) ||\n          outOfRange(a.z, b.z, p.z));\n}\n\nbool outOfRange(vec4 a, vec4 b, vec4 p) {\n  return outOfRange(a.xyz, b.xyz, p.xyz);\n}\n\nattribute vec3  position;\nattribute float pointSize;\nattribute vec4  id;\n\nuniform mat4 model, view, projection;\nuniform vec3 clipBounds[2];\n\nvarying vec3 f_position;\nvarying vec4 f_id;\n\nvoid main() {\n  if (outOfRange(clipBounds[0], clipBounds[1], position)) {\n\n    gl_Position \x3d vec4(0.0, 0.0, 0.0, 0.0);\n  } else {\n    gl_Position  \x3d projection * view * model * vec4(position, 1.0);\n    gl_PointSize \x3d pointSize;\n  }\n  f_id         \x3d id;\n  f_position   \x3d position;\n}"]),
l=p(["precision highp float;\n#define GLSLIFY 1\n\nattribute vec3 position;\n\nuniform mat4 model, view, projection;\n\nvoid main() {\n  gl_Position \x3d projection * view * model * vec4(position, 1.0);\n}"]);p=p(["precision highp float;\n#define GLSLIFY 1\n\nuniform vec3 contourColor;\n\nvoid main() {\n  gl_FragColor \x3d vec4(contourColor, 1.0);\n}\n"]);G.meshShader={vertex:b,fragment:N,attributes:[{name:"position",type:"vec3"},{name:"normal",type:"vec3"},{name:"color",type:"vec4"},{name:"uv",type:"vec2"}]};
G.wireShader={vertex:n,fragment:k,attributes:[{name:"position",type:"vec3"},{name:"color",type:"vec4"},{name:"uv",type:"vec2"}]};G.pointShader={vertex:m,fragment:a,attributes:[{name:"position",type:"vec3"},{name:"color",type:"vec4"},{name:"uv",type:"vec2"},{name:"pointSize",type:"float"}]};G.pickShader={vertex:g,fragment:h,attributes:[{name:"position",type:"vec3"},{name:"id",type:"vec4"}]};G.pointPickShader={vertex:r,fragment:h,attributes:[{name:"position",type:"vec3"},{name:"pointSize",type:"float"},
{name:"id",type:"vec4"}]};G.contourShader={vertex:l,fragment:p,attributes:[{name:"position",type:"vec3"}]}},{glslify:442}],315:[function(b,N,G){function p(C,v,y,F,J,K,M,H,O,I,L,Q,Z,ba,V,S,T,fa,W,aa,ja,ma,ia,ra,wa,pa,la){this.gl=C;this.pixelRatio=1;this.cells=[];this.positions=[];this.intensity=[];this.texture=v;this.dirty=!0;this.triShader=y;this.lineShader=F;this.pointShader=J;this.pickShader=K;this.pointPickShader=M;this.contourShader=H;this.trianglePositions=O;this.triangleColors=L;this.triangleNormals=
Z;this.triangleUVs=Q;this.triangleIds=I;this.triangleVAO=ba;this.triangleCount=0;this.lineWidth=1;this.edgePositions=V;this.edgeColors=T;this.edgeUVs=fa;this.edgeIds=S;this.edgeVAO=W;this.edgeCount=0;this.pointPositions=aa;this.pointColors=ma;this.pointUVs=ia;this.pointSizes=ra;this.pointIds=ja;this.pointVAO=wa;this.pointCount=0;this.contourLineWidth=1;this.contourPositions=pa;this.contourVAO=la;this.contourCount=0;this.contourColor=[0,0,0];this.pickVertex=this.contourEnable=!0;this.pickId=1;this.bounds=
[[Infinity,Infinity,Infinity],[-Infinity,-Infinity,-Infinity]];this.clipBounds=[[-Infinity,-Infinity,-Infinity],[Infinity,Infinity,Infinity]];this.lightPosition=[1E5,1E5,0];this.diffuseLight=this.ambientLight=.8;this.specularLight=2;this.roughness=.5;this.fresnel=1.5;this.opacity=1;this.opacityscale=this.hasAlpha=!1;this._projection=this._view=this._model=D;this._resolution=[1,1]}function n(C,v){if(!v||!v.length)return 1;for(var y=0;y<v.length&&!(2>v.length);++y){if(v[y][0]===C)return v[y][1];if(v[y][0]>
C&&0<y)return C=(v[y][0]-C)/(v[y][0]-v[y-1][0]),v[y][1]*(1-C)+C*v[y-1][1]}return 1}var k=b("gl-shader"),m=b("gl-buffer"),a=b("gl-vao"),g=b("gl-texture2d"),h=b("normals"),r=b("gl-mat4/multiply"),l=b("gl-mat4/invert"),c=b("ndarray"),d=b("colormap"),e=b("simplicial-complex-contour"),f=b("typedarray-pool");G=b("./lib/shaders");var q=b("./lib/closest-point"),t=G.meshShader,w=G.wireShader,x=G.pointShader,z=G.pickShader,B=G.pointPickShader,A=G.contourShader,D=[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1];b=p.prototype;
b.isOpaque=function(){return!this.hasAlpha};b.isTransparent=function(){return this.hasAlpha};b.pickSlots=1;b.setPickBase=function(C){this.pickId=C};b.highlight=function(C){if(C&&this.contourEnable){var v=e(this.cells,this.intensity,C.intensity);C=v.cells;var y=v.vertexIds;v=v.vertexWeights;for(var F=C.length,J=f.mallocFloat32(6*F),K=0,M=0;M<F;++M)for(var H=C[M],O=0;2>O;++O){var I=H[0];2===H.length&&(I=H[O]);var L=v[I],Q=1-L,Z=this.positions[y[I][0]];I=this.positions[y[I][1]];for(var ba=0;3>ba;++ba)J[K++]=
L*Z[ba]+Q*I[ba]}this.contourCount=K/3|0;this.contourPositions.update(J.subarray(0,K));f.free(J)}else this.contourCount=0};b.update=function(C){C=C||{};var v=this.gl;this.dirty=!0;"contourEnable"in C&&(this.contourEnable=C.contourEnable);"contourColor"in C&&(this.contourColor=C.contourColor);"lineWidth"in C&&(this.lineWidth=C.lineWidth);"lightPosition"in C&&(this.lightPosition=C.lightPosition);this.hasAlpha=!1;"opacity"in C&&(this.opacity=C.opacity,1>this.opacity&&(this.hasAlpha=!0));"opacityscale"in
C&&(this.opacityscale=C.opacityscale,this.hasAlpha=!0);"ambient"in C&&(this.ambientLight=C.ambient);"diffuse"in C&&(this.diffuseLight=C.diffuse);"specular"in C&&(this.specularLight=C.specular);"roughness"in C&&(this.roughness=C.roughness);"fresnel"in C&&(this.fresnel=C.fresnel);if(C.texture)this.texture.dispose(),this.texture=g(v,C.texture);else if(C.colormap){this.texture.shape=[256,256];this.texture.minFilter=v.LINEAR_MIPMAP_LINEAR;this.texture.magFilter=v.LINEAR;v=this.texture;var y=v.setPixels;
var F=this.opacityscale;for(var J=d({colormap:C.colormap,nshades:256,format:"rgba"}),K=new Uint8Array(1024),M=0;256>M;++M){for(var H=J[M],O=0;3>O;++O)K[4*M+O]=H[O];K[4*M+3]=F?255*n(M/255,F):255*H[3]}F=c(K,[256,256,4],[4,0,1]);y.call(v,F);this.texture.generateMipmap()}v=C.cells;if((y=C.positions)&&v){F=[];J=[];K=[];M=[];H=[];O=[];var I=[],L=[],Q=[],Z=[],ba=[],V=[],S=[],T=[];this.cells=v;this.positions=y;var fa=C.vertexNormals,W=C.cellNormals,aa=void 0===C.vertexNormalsEpsilon?1E-6:C.vertexNormalsEpsilon,
ja=void 0===C.faceNormalsEpsilon?1E-6:C.faceNormalsEpsilon;C.useFacetNormals&&!W&&(W=h.faceNormals(v,y,ja));W||fa||(fa=h.vertexNormals(v,y,aa));aa=C.vertexColors;ja=C.cellColors;var ma=C.meshColor||[1,1,1,1],ia=C.vertexUVs,ra=C.vertexIntensity,wa=C.cellUVs,pa=C.cellIntensity,la=Infinity,ka=-Infinity;if(!ia&&!wa)if(ra)if(C.vertexIntensityBounds)la=+C.vertexIntensityBounds[0],ka=+C.vertexIntensityBounds[1];else for(var na=0;na<ra.length;++na){var oa=ra[na];la=Math.min(la,oa);ka=Math.max(ka,oa)}else if(pa)if(C.cellIntensityBounds)la=
+C.cellIntensityBounds[0],ka=+C.cellIntensityBounds[1];else for(na=0;na<pa.length;++na)oa=pa[na],la=Math.min(la,oa),ka=Math.max(ka,oa);else for(na=0;na<y.length;++na)oa=y[na][2],la=Math.min(la,oa),ka=Math.max(ka,oa);if(ra)this.intensity=ra;else if(pa)this.intensity=pa;else{na=y.length;oa=Array(na);for(var sa=0;sa<na;++sa)oa[sa]=y[sa][2];this.intensity=oa}this.pickVertex=!(pa||ja);oa=C.pointSizes;C=C.pointSize||1;this.bounds=[[Infinity,Infinity,Infinity],[-Infinity,-Infinity,-Infinity]];for(na=0;na<
y.length;++na){var za=y[na];for(sa=0;3>sa;++sa)!isNaN(za[sa])&&isFinite(za[sa])&&(this.bounds[0][sa]=Math.min(this.bounds[0][sa],za[sa]),this.bounds[1][sa]=Math.max(this.bounds[1][sa],za[sa]))}var Ha=0,Wa=0,Za=0;na=0;a:for(;na<v.length;++na){var bb=v[na];switch(bb.length){case 1:var sb=bb[0];za=y[sb];for(sa=0;3>sa;++sa)if(isNaN(za[sa])||!isFinite(za[sa]))continue a;Z.push(za[0],za[1],za[2]);var hb=aa?aa[sb]:ja?ja[na]:ma;this.opacityscale&&ra?J.push(hb[0],hb[1],hb[2],this.opacity*n((ra[sb]-la)/(ka-
la),this.opacityscale)):3===hb.length?ba.push(hb[0],hb[1],hb[2],this.opacity):(ba.push(hb[0],hb[1],hb[2],hb[3]*this.opacity),1>hb[3]&&(this.hasAlpha=!0));za=ia?ia[sb]:ra?[(ra[sb]-la)/(ka-la),0]:wa?wa[na]:pa?[(pa[na]-la)/(ka-la),0]:[(za[2]-la)/(ka-la),0];V.push(za[0],za[1]);oa?S.push(oa[sb]):S.push(C);T.push(na);Za+=1;break;case 2:for(sa=0;2>sa;++sa)for(sb=bb[sa],za=y[sb],sb=0;3>sb;++sb)if(isNaN(za[sb])||!isFinite(za[sb]))continue a;for(sa=0;2>sa;++sa)sb=bb[sa],za=y[sb],O.push(za[0],za[1],za[2]),hb=
aa?aa[sb]:ja?ja[na]:ma,this.opacityscale&&ra?J.push(hb[0],hb[1],hb[2],this.opacity*n((ra[sb]-la)/(ka-la),this.opacityscale)):3===hb.length?I.push(hb[0],hb[1],hb[2],this.opacity):(I.push(hb[0],hb[1],hb[2],hb[3]*this.opacity),1>hb[3]&&(this.hasAlpha=!0)),za=ia?ia[sb]:ra?[(ra[sb]-la)/(ka-la),0]:wa?wa[na]:pa?[(pa[na]-la)/(ka-la),0]:[(za[2]-la)/(ka-la),0],L.push(za[0],za[1]),Q.push(na);Wa+=1;break;case 3:for(sa=0;3>sa;++sa)for(sb=bb[sa],za=y[sb],sb=0;3>sb;++sb)if(isNaN(za[sb])||!isFinite(za[sb]))continue a;
for(sa=0;3>sa;++sa)sb=bb[2-sa],za=y[sb],F.push(za[0],za[1],za[2]),(hb=aa?aa[sb]:ja?ja[na]:ma)?this.opacityscale&&ra?J.push(hb[0],hb[1],hb[2],this.opacity*n((ra[sb]-la)/(ka-la),this.opacityscale)):3===hb.length?J.push(hb[0],hb[1],hb[2],this.opacity):(J.push(hb[0],hb[1],hb[2],hb[3]*this.opacity),1>hb[3]&&(this.hasAlpha=!0)):J.push(.5,.5,.5,1),za=ia?ia[sb]:ra?[(ra[sb]-la)/(ka-la),0]:wa?wa[na]:pa?[(pa[na]-la)/(ka-la),0]:[(za[2]-la)/(ka-la),0],M.push(za[0],za[1]),za=fa?fa[sb]:W[na],K.push(za[0],za[1],
za[2]),H.push(na);Ha+=1}}this.pointCount=Za;this.edgeCount=Wa;this.triangleCount=Ha;this.pointPositions.update(Z);this.pointColors.update(ba);this.pointUVs.update(V);this.pointSizes.update(S);this.pointIds.update(new Uint32Array(T));this.edgePositions.update(O);this.edgeColors.update(I);this.edgeUVs.update(L);this.edgeIds.update(new Uint32Array(Q));this.trianglePositions.update(F);this.triangleColors.update(J);this.triangleUVs.update(M);this.triangleNormals.update(K);this.triangleIds.update(new Uint32Array(H))}};
b.drawTransparent=b.draw=function(C){C=C||{};var v=this.gl,y=C.model||D,F=C.view||D,J=C.projection||D,K=[[-1E6,-1E6,-1E6],[1E6,1E6,1E6]];for(C=0;3>C;++C)K[0][C]=Math.max(K[0][C],this.clipBounds[0][C]),K[1][C]=Math.min(K[1][C],this.clipBounds[1][C]);y={model:y,view:F,projection:J,inverseModel:D.slice(),clipBounds:K,kambient:this.ambientLight,kdiffuse:this.diffuseLight,kspecular:this.specularLight,roughness:this.roughness,fresnel:this.fresnel,eyePosition:[0,0,0],lightPosition:[0,0,0],contourColor:this.contourColor,
texture:0};y.inverseModel=l(y.inverseModel,y.model);v.disable(v.CULL_FACE);this.texture.bind(0);F=Array(16);r(F,y.view,y.model);r(F,y.projection,F);l(F,F);for(C=0;3>C;++C)y.eyePosition[C]=F[12+C]/F[15];J=F[15];for(C=0;3>C;++C)J+=this.lightPosition[C]*F[4*C+3];for(C=0;3>C;++C){K=F[12+C];for(var M=0;3>M;++M)K+=F[4*M+C]*this.lightPosition[M];y.lightPosition[C]=K/J}0<this.triangleCount&&(C=this.triShader,C.bind(),C.uniforms=y,this.triangleVAO.bind(),v.drawArrays(v.TRIANGLES,0,3*this.triangleCount),this.triangleVAO.unbind());
0<this.edgeCount&&0<this.lineWidth&&(C=this.lineShader,C.bind(),C.uniforms=y,this.edgeVAO.bind(),v.lineWidth(this.lineWidth*this.pixelRatio),v.drawArrays(v.LINES,0,2*this.edgeCount),this.edgeVAO.unbind());0<this.pointCount&&(C=this.pointShader,C.bind(),C.uniforms=y,this.pointVAO.bind(),v.drawArrays(v.POINTS,0,this.pointCount),this.pointVAO.unbind());this.contourEnable&&0<this.contourCount&&0<this.contourLineWidth&&(C=this.contourShader,C.bind(),C.uniforms=y,this.contourVAO.bind(),v.drawArrays(v.LINES,
0,this.contourCount),this.contourVAO.unbind())};b.drawPick=function(C){C=C||{};var v=this.gl,y=C.model||D,F=C.view||D;C=C.projection||D;for(var J=[[-1E6,-1E6,-1E6],[1E6,1E6,1E6]],K=0;3>K;++K)J[0][K]=Math.max(J[0][K],this.clipBounds[0][K]),J[1][K]=Math.min(J[1][K],this.clipBounds[1][K]);this._model=[].slice.call(y);this._view=[].slice.call(F);this._projection=[].slice.call(C);this._resolution=[v.drawingBufferWidth,v.drawingBufferHeight];y={model:y,view:F,projection:C,clipBounds:J,pickId:this.pickId/
255};F=this.pickShader;F.bind();F.uniforms=y;0<this.triangleCount&&(this.triangleVAO.bind(),v.drawArrays(v.TRIANGLES,0,3*this.triangleCount),this.triangleVAO.unbind());0<this.edgeCount&&(this.edgeVAO.bind(),v.lineWidth(this.lineWidth*this.pixelRatio),v.drawArrays(v.LINES,0,2*this.edgeCount),this.edgeVAO.unbind());0<this.pointCount&&(F=this.pointPickShader,F.bind(),F.uniforms=y,this.pointVAO.bind(),v.drawArrays(v.POINTS,0,this.pointCount),this.pointVAO.unbind())};b.pick=function(C){if(!C||C.id!==this.pickId)return null;
for(var v=C.value[0]+256*C.value[1]+65536*C.value[2],y=this.cells[v],F=this.positions,J=Array(y.length),K=0;K<y.length;++K)J[K]=F[y[K]];K=C.coord[0];C=C.coord[1];if(!this.pickVertex){J=this.positions[y[0]];F=this.positions[y[1]];var M=this.positions[y[2]];return{_cellCenter:!0,position:[K,C],index:v,cell:y,cellId:v,intensity:this.intensity[v],dataCoordinate:[(J[0]+F[0]+M[0])/3,(J[1]+F[1]+M[1])/3,(J[2]+F[2]+M[2])/3]}}J=q(J,[K*this.pixelRatio,this._resolution[1]-C*this.pixelRatio],this._model,this._view,
this._projection,this._resolution);if(!J)return null;C=J[2];for(K=F=0;K<y.length;++K)F+=C[K]*this.intensity[y[K]];return{position:J[1],index:y[J[0]],cell:y,cellId:v,intensity:F,dataCoordinate:this.positions[y[J[0]]]}};b.dispose=function(){this.texture.dispose();this.triShader.dispose();this.lineShader.dispose();this.pointShader.dispose();this.pickShader.dispose();this.pointPickShader.dispose();this.triangleVAO.dispose();this.trianglePositions.dispose();this.triangleColors.dispose();this.triangleUVs.dispose();
this.triangleNormals.dispose();this.triangleIds.dispose();this.edgeVAO.dispose();this.edgePositions.dispose();this.edgeColors.dispose();this.edgeUVs.dispose();this.edgeIds.dispose();this.pointVAO.dispose();this.pointPositions.dispose();this.pointColors.dispose();this.pointUVs.dispose();this.pointSizes.dispose();this.pointIds.dispose();this.contourVAO.dispose();this.contourPositions.dispose();this.contourShader.dispose()};N.exports=function(C,v){1===arguments.length&&(v=C,C=v.gl);if(!(C.getExtension("OES_standard_derivatives")||
C.getExtension("MOZ_OES_standard_derivatives")||C.getExtension("WEBKIT_OES_standard_derivatives")))throw Error("derivatives not supported");var y=k(C,t.vertex,t.fragment);y.attributes.position.location=0;y.attributes.color.location=2;y.attributes.uv.location=3;y.attributes.normal.location=4;var F=k(C,w.vertex,w.fragment);F.attributes.position.location=0;F.attributes.color.location=2;F.attributes.uv.location=3;var J=k(C,x.vertex,x.fragment);J.attributes.position.location=0;J.attributes.color.location=
2;J.attributes.uv.location=3;J.attributes.pointSize.location=4;var K=k(C,z.vertex,z.fragment);K.attributes.position.location=0;K.attributes.id.location=1;var M=k(C,B.vertex,B.fragment);M.attributes.position.location=0;M.attributes.id.location=1;M.attributes.pointSize.location=4;var H=k(C,A.vertex,A.fragment);H.attributes.position.location=0;var O=g(C,c(new Uint8Array([255,255,255,255]),[1,1,4]));O.generateMipmap();O.minFilter=C.LINEAR_MIPMAP_LINEAR;O.magFilter=C.LINEAR;var I=m(C),L=m(C),Q=m(C),Z=
m(C),ba=m(C),V=a(C,[{buffer:I,type:C.FLOAT,size:3},{buffer:ba,type:C.UNSIGNED_BYTE,size:4,normalized:!0},{buffer:L,type:C.FLOAT,size:4},{buffer:Q,type:C.FLOAT,size:2},{buffer:Z,type:C.FLOAT,size:3}]),S=m(C),T=m(C),fa=m(C),W=m(C),aa=a(C,[{buffer:S,type:C.FLOAT,size:3},{buffer:W,type:C.UNSIGNED_BYTE,size:4,normalized:!0},{buffer:T,type:C.FLOAT,size:4},{buffer:fa,type:C.FLOAT,size:2}]),ja=m(C),ma=m(C),ia=m(C),ra=m(C),wa=m(C),pa=a(C,[{buffer:ja,type:C.FLOAT,size:3},{buffer:wa,type:C.UNSIGNED_BYTE,size:4,
normalized:!0},{buffer:ma,type:C.FLOAT,size:4},{buffer:ia,type:C.FLOAT,size:2},{buffer:ra,type:C.FLOAT,size:1}]),la=m(C),ka=a(C,[{buffer:la,type:C.FLOAT,size:3}]);y=new p(C,O,y,F,J,K,M,H,I,ba,L,Q,Z,V,S,W,T,fa,aa,ja,wa,ma,ia,ra,pa,la,ka);y.update(v);return y}},{"./lib/closest-point":313,"./lib/shaders":314,colormap:137,"gl-buffer":267,"gl-mat4/invert":299,"gl-mat4/multiply":301,"gl-shader":339,"gl-texture2d":356,"gl-vao":361,ndarray:483,normals:486,"simplicial-complex-contour":557,"typedarray-pool":617}],
316:[function(b,N,G){function p(a,g,h){this.plot=a;this.vbo=g;this.shader=h}N.exports=function(a){var g=a.gl,h=n(g,[0,0,0,1,1,0,1,1]);g=k(g,m.boxVert,m.lineFrag);return new p(a,h,g)};var n=b("gl-buffer"),k=b("gl-shader"),m=b("./shaders");b=p.prototype;b.bind=function(){var a=this.shader;this.vbo.bind();this.shader.bind();a.attributes.coord.pointer();a.uniforms.screenBox=this.plot.screenBox};b.drawBox=function(){var a=[0,0],g=[0,0];return function(h,r,l,c,d){var e=this.shader,f=this.plot.gl;a[0]=h;
a[1]=r;g[0]=l;g[1]=c;e.uniforms.lo=a;e.uniforms.hi=g;e.uniforms.color=d;f.drawArrays(f.TRIANGLE_STRIP,0,4)}}();b.dispose=function(){this.vbo.dispose();this.shader.dispose()}},{"./shaders":319,"gl-buffer":267,"gl-shader":339}],317:[function(b,N,G){function p(h,r,l,c){this.plot=h;this.vbo=r;this.shader=l;this.tickShader=c;this.ticks=[[],[]]}function n(h,r){return h-r}N.exports=function(h){var r=h.gl,l=k(r),c=m(r,g.gridVert,g.gridFrag);r=m(r,g.tickVert,g.gridFrag);return new p(h,l,c,r)};var k=b("gl-buffer"),
m=b("gl-shader"),a=b("binary-search-bounds"),g=b("./shaders");b=p.prototype;b.draw=function(){var h=[0,0],r=[0,0],l=[0,0];return function(){var c=this.plot,d=this.vbo,e=this.shader,f=this.ticks,q=c.gl,t=c._tickBounds,w=c.dataBox,x=c.viewBox,z=c.gridLineWidth,B=c.gridLineColor,A=c.gridLineEnable;c=c.pixelRatio;for(var D=0;2>D;++D){var C=t[D],v=.5*(w[D+2]+w[D]),y=w[D+2]-w[D];r[D]=2*(t[D+2]-C)/y;h[D]=2*(C-v)/y}e.bind();d.bind();e.attributes.dataCoord.pointer();e.uniforms.dataShift=h;e.uniforms.dataScale=
r;for(D=d=0;2>D;++D)l[0]=l[1]=0,l[D]=1,e.uniforms.dataAxis=l,e.uniforms.lineWidth=z[D]/(x[D+2]-x[D])*c,e.uniforms.color=B[D],t=6*f[D].length,A[D]&&t&&q.drawArrays(q.TRIANGLES,d,t),d+=t}}();b.drawTickMarks=function(){var h=[0,0],r=[0,0],l=[1,0],c=[0,1],d=[0,0],e=[0,0];return function(){var f=this.plot,q=this.vbo,t=this.tickShader,w=this.ticks,x=f.gl,z=f._tickBounds,B=f.dataBox,A=f.viewBox,D=f.pixelRatio,C=f.screenBox,v=C[2]-C[0];C=C[3]-C[1];for(var y=A[2]-A[0],F=A[3]-A[1],J=0;2>J;++J){var K=z[J],M=
.5*(B[J+2]+B[J]),H=B[J+2]-B[J];r[J]=2*(z[J+2]-K)/H;h[J]=2*(K-M)/H}r[0]*=y/v;h[0]*=y/v;r[1]*=F/C;h[1]*=F/C;t.bind();q.bind();t.attributes.dataCoord.pointer();q=t.uniforms;q.dataShift=h;q.dataScale=r;t=f.tickMarkLength;y=f.tickMarkWidth;f=f.tickMarkColor;J=6*w[0].length;K=Math.min(a.ge(w[0],(B[0]-z[0])/(z[2]-z[0]),n),w[0].length);M=Math.min(a.gt(w[0],(B[2]-z[0])/(z[2]-z[0]),n),w[0].length);F=6*K;K=6*Math.max(0,M-K);M=Math.min(a.ge(w[1],(B[1]-z[1])/(z[3]-z[1]),n),w[1].length);w=Math.min(a.gt(w[1],(B[3]-
z[1])/(z[3]-z[1]),n),w[1].length);z=J+6*M;w=6*Math.max(0,w-M);d[0]=2*(A[0]-t[1])/v-1;d[1]=(A[3]+A[1])/C-1;e[0]=t[1]*D/v;e[1]=y[1]*D/C;w&&(q.color=f[1],q.tickScale=e,q.dataAxis=c,q.screenOffset=d,x.drawArrays(x.TRIANGLES,z,w));d[0]=(A[2]+A[0])/v-1;d[1]=2*(A[1]-t[0])/C-1;e[0]=y[0]*D/v;e[1]=t[0]*D/C;K&&(q.color=f[0],q.tickScale=e,q.dataAxis=l,q.screenOffset=d,x.drawArrays(x.TRIANGLES,F,K));d[0]=2*(A[2]+t[3])/v-1;d[1]=(A[3]+A[1])/C-1;e[0]=t[3]*D/v;e[1]=y[3]*D/C;w&&(q.color=f[3],q.tickScale=e,q.dataAxis=
c,q.screenOffset=d,x.drawArrays(x.TRIANGLES,z,w));d[0]=(A[2]+A[0])/v-1;d[1]=2*(A[3]+t[2])/C-1;e[0]=y[2]*D/v;e[1]=t[2]*D/C;K&&(q.color=f[2],q.tickScale=e,q.dataAxis=l,q.screenOffset=d,x.drawArrays(x.TRIANGLES,F,K))}}();b.update=function(){var h=[1,1,-1,-1,1,-1],r=[1,-1,1,1,-1,-1];return function(l){var c=l.ticks;l=l.bounds;for(var d=new Float32Array(18*(c[0].length+c[1].length)),e=0,f=[[],[]],q=0;2>q;++q)for(var t=f[q],w=c[q],x=l[q],z=l[q+2],B=0;B<w.length;++B){var A=(w[B].x-x)/(z-x);t.push(A);for(var D=
0;6>D;++D)d[e++]=A,d[e++]=h[D],d[e++]=r[D]}this.ticks=f;this.vbo.update(d)}}();b.dispose=function(){this.vbo.dispose();this.shader.dispose();this.tickShader.dispose()}},{"./shaders":319,"binary-search-bounds":103,"gl-buffer":267,"gl-shader":339}],318:[function(b,N,G){function p(a,g,h){this.plot=a;this.vbo=g;this.shader=h}N.exports=function(a){var g=a.gl,h=n(g,[-1,-1,-1,1,1,-1,1,1]);g=k(g,m.lineVert,m.lineFrag);return new p(a,h,g)};var n=b("gl-buffer"),k=b("gl-shader"),m=b("./shaders");b=p.prototype;
b.bind=function(){var a=this.shader;this.vbo.bind();this.shader.bind();a.attributes.coord.pointer();a.uniforms.screenBox=this.plot.screenBox};b.drawLine=function(){var a=[0,0],g=[0,0];return function(h,r,l,c,d,e){var f=this.plot,q=this.shader,t=f.gl;a[0]=h;a[1]=r;g[0]=l;g[1]=c;q.uniforms.start=a;q.uniforms.end=g;q.uniforms.width=d*f.pixelRatio;q.uniforms.color=e;t.drawArrays(t.TRIANGLE_STRIP,0,4)}}();b.dispose=function(){this.vbo.dispose();this.shader.dispose()}},{"./shaders":319,"gl-buffer":267,
"gl-shader":339}],319:[function(b,N,G){b=b("glslify");G=b(["precision lowp float;\n#define GLSLIFY 1\nuniform vec4 color;\nvoid main() {\n  gl_FragColor \x3d vec4(color.xyz * color.w, color.w);\n}\n"]);N.exports={lineVert:b(["precision mediump float;\n#define GLSLIFY 1\n\nattribute vec2 coord;\n\nuniform vec4 screenBox;\nuniform vec2 start, end;\nuniform float width;\n\nvec2 perp(vec2 v) {\n  return vec2(v.y, -v.x);\n}\n\nvec2 screen(vec2 v) {\n  return 2.0 * (v - screenBox.xy) / (screenBox.zw - screenBox.xy) - 1.0;\n}\n\nvoid main() {\n  vec2 delta \x3d normalize(perp(start - end));\n  vec2 offset \x3d mix(start, end, 0.5 * (coord.y+1.0));\n  gl_Position \x3d vec4(screen(offset + 0.5 * width * delta * coord.x), 0, 1);\n}\n"]),
lineFrag:G,textVert:b(["#define GLSLIFY 1\nattribute vec3 textCoordinate;\n\nuniform vec2 dataScale, dataShift, dataAxis, screenOffset, textScale;\nuniform float angle;\n\nvoid main() {\n  float dataOffset  \x3d textCoordinate.z;\n  vec2 glyphOffset  \x3d textCoordinate.xy;\n  mat2 glyphMatrix \x3d mat2(cos(angle), sin(angle), -sin(angle), cos(angle));\n  vec2 screenCoordinate \x3d dataAxis * (dataScale * dataOffset + dataShift) +\n    glyphMatrix * glyphOffset * textScale + screenOffset;\n  gl_Position \x3d vec4(screenCoordinate, 0, 1);\n}\n"]),
textFrag:G,gridVert:b(["precision mediump float;\n#define GLSLIFY 1\n\nattribute vec3 dataCoord;\n\nuniform vec2 dataAxis, dataShift, dataScale;\nuniform float lineWidth;\n\nvoid main() {\n  vec2 pos \x3d dataAxis * (dataScale * dataCoord.x + dataShift);\n  pos +\x3d 10.0 * dataCoord.y * vec2(dataAxis.y, -dataAxis.x) + dataCoord.z * lineWidth;\n  gl_Position \x3d vec4(pos, 0, 1);\n}\n"]),gridFrag:G,boxVert:b(["precision mediump float;\n#define GLSLIFY 1\n\nattribute vec2 coord;\n\nuniform vec4 screenBox;\nuniform vec2 lo, hi;\n\nvec2 screen(vec2 v) {\n  return 2.0 * (v - screenBox.xy) / (screenBox.zw - screenBox.xy) - 1.0;\n}\n\nvoid main() {\n  gl_Position \x3d vec4(screen(mix(lo, hi, coord)), 0, 1);\n}\n"]),
tickVert:b(["precision mediump float;\n#define GLSLIFY 1\n\nattribute vec3 dataCoord;\n\nuniform vec2 dataAxis, dataShift, dataScale, screenOffset, tickScale;\n\nvoid main() {\n  vec2 pos \x3d dataAxis * (dataScale * dataCoord.x + dataShift);\n  gl_Position \x3d vec4(pos + tickScale*dataCoord.yz + screenOffset, 0, 1);\n}\n"])}},{glslify:321}],320:[function(b,N,G){function p(h,r,l){this.plot=h;this.vbo=r;this.shader=l;this.tickOffset=[[],[]];this.tickX=[[],[]];this.labelOffset=[0,0];this.labelCount=
[0,0]}N.exports=function(h){var r=h.gl,l=n(r);r=k(r,g.textVert,g.textFrag);return new p(h,l,r)};var n=b("gl-buffer"),k=b("gl-shader"),m=b("text-cache"),a=b("binary-search-bounds"),g=b("./shaders");b=p.prototype;b.drawTicks=function(){var h=[0,0],r=[0,0],l=[0,0];return function(c){var d=this.plot,e=this.shader,f=this.tickX[c],q=this.tickOffset[c],t=d.gl,w=d.viewBox,x=d.dataBox,z=d.screenBox,B=d.pixelRatio,A=d.tickEnable,D=d.tickPad,C=d.tickColor,v=d.tickAngle,y=d.labelEnable,F=d.labelPad,J=d.labelColor;
d=d.labelAngle;var K=this.labelOffset[c],M=this.labelCount[c],H=a.lt(f,x[c]);f=a.le(f,x[c+2]);h[0]=h[1]=0;h[c]=1;r[c]=(w[2+c]+w[c])/(z[2+c]-z[c])-1;z=2/z[2+(c^1)]-z[c^1];r[c^1]=z*w[c^1]-1;A[c]&&(r[c^1]-=z*B*D[c],H<f&&q[f]>q[H]&&(e.uniforms.dataAxis=h,e.uniforms.screenOffset=r,e.uniforms.color=C[c],e.uniforms.angle=v[c],t.drawArrays(t.TRIANGLES,q[H],q[f]-q[H])));y[c]&&M&&(r[c^1]-=z*B*F[c],e.uniforms.dataAxis=l,e.uniforms.screenOffset=r,e.uniforms.color=J[c],e.uniforms.angle=d[c],t.drawArrays(t.TRIANGLES,
K,M));r[c^1]=z*w[2+(c^1)]-1;A[c+2]&&(r[c^1]+=z*B*D[c+2],H<f&&q[f]>q[H]&&(e.uniforms.dataAxis=h,e.uniforms.screenOffset=r,e.uniforms.color=C[c+2],e.uniforms.angle=v[c+2],t.drawArrays(t.TRIANGLES,q[H],q[f]-q[H])));y[c+2]&&M&&(r[c^1]+=z*B*F[c+2],e.uniforms.dataAxis=l,e.uniforms.screenOffset=r,e.uniforms.color=J[c+2],e.uniforms.angle=d[c+2],t.drawArrays(t.TRIANGLES,K,M))}}();b.drawTitle=function(){var h=[0,0],r=[0,0];return function(){var l=this.plot,c=this.shader,d=l.gl,e=l.screenBox,f=l.titleCenter,
q=l.titleAngle,t=l.titleColor;l=l.pixelRatio;if(this.titleCount){for(var w=0;2>w;++w)r[w]=2*(f[w]*l-e[w])/(e[2+w]-e[w])-1;c.bind();c.uniforms.dataAxis=h;c.uniforms.screenOffset=r;c.uniforms.angle=q;c.uniforms.color=t;d.drawArrays(d.TRIANGLES,this.titleOffset,this.titleCount)}}}();b.bind=function(){var h=[0,0],r=[0,0],l=[0,0];return function(){var c=this.plot,d=this.shader,e=c._tickBounds,f=c.dataBox,q=c.screenBox,t=c.viewBox;d.bind();for(var w=0;2>w;++w){var x=e[w],z=.5*(f[w+2]+f[w]),B=f[w+2]-f[w],
A=t[w+2]-t[w],D=q[w+2]-q[w];r[w]=2*(e[w+2]-x)/B*A/D;h[w]=2*(x-z)/B*A/D}l[1]=2*c.pixelRatio/(q[3]-q[1]);l[0]=l[1]*(q[3]-q[1])/(q[2]-q[0]);d.uniforms.dataScale=r;d.uniforms.dataShift=h;d.uniforms.textScale=l;this.vbo.bind();d.attributes.textCoordinate.pointer()}}();b.update=function(h){var r=[],l=h.ticks,c=h.bounds,d,e;for(e=0;2>e;++e){var f=[Math.floor(r.length/3)],q=[-Infinity],t=l[e];for(d=0;d<t.length;++d){var w=t[d];var x=w.x;var z=w.text;var B=w.font||"sans-serif";w=w.fontSize||12;for(var A=1/
(c[e+2]-c[e]),D=c[e],C=z.split("\n"),v=0;v<C.length;v++){var y=m(B,C[v]).data;for(z=0;z<y.length;z+=2)r.push(y[z]*w,-y[z+1]*w-v*w*1.2,(x-D)*A)}f.push(Math.floor(r.length/3));q.push(x)}this.tickOffset[e]=f;this.tickX[e]=q}for(e=0;2>e;++e){this.labelOffset[e]=Math.floor(r.length/3);y=m(h.labelFont[e],h.labels[e],{textAlign:"center"}).data;w=h.labelSize[e];for(d=0;d<y.length;d+=2)r.push(y[d]*w,-y[d+1]*w,0);this.labelCount[e]=Math.floor(r.length/3)-this.labelOffset[e]}this.titleOffset=Math.floor(r.length/
3);y=m(h.titleFont,h.title).data;w=h.titleSize;for(d=0;d<y.length;d+=2)r.push(y[d]*w,-y[d+1]*w,0);this.titleCount=Math.floor(r.length/3)-this.titleOffset;this.vbo.update(r)};b.dispose=function(){this.vbo.dispose();this.shader.dispose()}},{"./shaders":319,"binary-search-bounds":103,"gl-buffer":267,"gl-shader":339,"text-cache":596}],321:[function(b,N,G){arguments[4][265][0].apply(G,arguments)},{dup:265}],322:[function(b,N,G){function p(l,c){this.gl=l;this.pickBuffer=c;this.screenBox=[0,0,l.drawingBufferWidth,
l.drawingBufferHeight];this.viewBox=[0,0,0,0];this.dataBox=[-10,-10,10,10];this.gridLineEnable=[!0,!0];this.gridLineWidth=[1,1];this.gridLineColor=[[0,0,0,1],[0,0,0,1]];this.pixelRatio=1;this.tickMarkLength=[0,0,0,0];this.tickMarkWidth=[0,0,0,0];this.tickMarkColor=[[0,0,0,1],[0,0,0,1],[0,0,0,1],[0,0,0,1]];this.tickPad=[15,15,15,15];this.tickAngle=[0,0,0,0];this.tickEnable=[!0,!0,!0,!0];this.tickColor=[[0,0,0,1],[0,0,0,1],[0,0,0,1],[0,0,0,1]];this.labelPad=[15,15,15,15];this.labelAngle=[0,Math.PI/
2,0,3*Math.PI/2];this.labelEnable=[!0,!0,!0,!0];this.labelColor=[[0,0,0,1],[0,0,0,1],[0,0,0,1],[0,0,0,1]];this.titleCenter=[0,0];this.titleEnable=!0;this.titleAngle=0;this.titleColor=[0,0,0,1];this.borderColor=[0,0,0,0];this.backgroundColor=[0,0,0,0];this.zeroLineEnable=[!0,!0];this.zeroLineWidth=[4,4];this.zeroLineColor=[[0,0,0,1],[0,0,0,1]];this.borderLineEnable=[!0,!0,!0,!0];this.borderLineWidth=[2,2,2,2];this.borderLineColor=[[0,0,0,1],[0,0,0,1],[0,0,0,1],[0,0,0,1]];this.box=this.line=this.text=
this.grid=null;this.objects=[];this.overlays=[];this._tickBounds=[Infinity,Infinity,-Infinity,-Infinity];this.pickDirty=this.dirty=this.static=!1;this.pickDelay=120;this.pickRadius=10;this._pickTimeout=null;this._drawPick=this.drawPick.bind(this);this._depthCounter=0}function n(l){l=l.slice();for(var c=0;c<l.length;++c)l[c]=l[c].slice();return l}function k(l,c){return l.x-c.x}N.exports=function(l){var c=l.gl,d=m(c,[c.drawingBufferWidth,c.drawingBufferHeight]);c=new p(c,d);c.grid=a(c);c.text=g(c);
c.line=h(c);c.box=r(c);c.update(l);return c};var m=b("gl-select-static"),a=b("./lib/grid"),g=b("./lib/text"),h=b("./lib/line"),r=b("./lib/box");b=p.prototype;b.setDirty=function(){this.dirty=this.pickDirty=!0};b.setOverlayDirty=function(){this.dirty=!0};b.nextDepthValue=function(){return this._depthCounter++/65536};b.draw=function(){return function(){var l=this.gl,c=this.screenBox,d=this.viewBox,e=this.dataBox,f=this.pixelRatio,q=this.grid,t=this.line,w=this.text,x=this.objects;this._depthCounter=
0;this.pickDirty&&(this._pickTimeout&&clearTimeout(this._pickTimeout),this.pickDirty=!1,this._pickTimeout=setTimeout(this._drawPick,this.pickDelay));if(this.dirty){this.dirty=!1;l.bindFramebuffer(l.FRAMEBUFFER,null);l.enable(l.SCISSOR_TEST);l.disable(l.DEPTH_TEST);l.depthFunc(l.LESS);l.depthMask(!1);l.enable(l.BLEND);l.blendEquation(l.FUNC_ADD,l.FUNC_ADD);l.blendFunc(l.ONE,l.ONE_MINUS_SRC_ALPHA);if(this.borderColor){l.scissor(c[0],c[1],c[2]-c[0],c[3]-c[1]);var z=this.borderColor;l.clearColor(z[0]*
z[3],z[1]*z[3],z[2]*z[3],z[3]);l.clear(l.COLOR_BUFFER_BIT|l.DEPTH_BUFFER_BIT)}l.scissor(d[0],d[1],d[2]-d[0],d[3]-d[1]);l.viewport(d[0],d[1],d[2]-d[0],d[3]-d[1]);z=this.backgroundColor;l.clearColor(z[0]*z[3],z[1]*z[3],z[2]*z[3],z[3]);l.clear(l.COLOR_BUFFER_BIT);q.draw();z=this.zeroLineEnable;var B=this.zeroLineColor,A=this.zeroLineWidth;if(z[0]||z[1])for(t.bind(),q=0;2>q;++q)if(z[q]&&0>=e[q]&&0<=e[q+2]){var D=c[q]-e[q]*(c[q+2]-c[q])/(e[q+2]-e[q]);0===q?t.drawLine(D,c[1],D,c[3],A[q],B[q]):t.drawLine(c[0],
D,c[2],D,A[q],B[q])}for(q=0;q<x.length;++q)x[q].draw();l.viewport(c[0],c[1],c[2]-c[0],c[3]-c[1]);l.scissor(c[0],c[1],c[2]-c[0],c[3]-c[1]);this.grid.drawTickMarks();t.bind();c=this.borderLineEnable;e=this.borderLineWidth;x=this.borderLineColor;c[1]&&t.drawLine(d[0],d[1]-.5*e[1]*f,d[0],d[3]+.5*e[3]*f,e[1],x[1]);c[0]&&t.drawLine(d[0]-.5*e[0]*f,d[1],d[2]+.5*e[2]*f,d[1],e[0],x[0]);c[3]&&t.drawLine(d[2],d[1]-.5*e[1]*f,d[2],d[3]+.5*e[3]*f,e[3],x[3]);c[2]&&t.drawLine(d[0]-.5*e[0]*f,d[3],d[2]+.5*e[2]*f,d[3],
e[2],x[2]);w.bind();for(q=0;2>q;++q)w.drawTicks(q);this.titleEnable&&w.drawTitle();d=this.overlays;for(q=0;q<d.length;++q)d[q].draw();l.disable(l.SCISSOR_TEST);l.disable(l.BLEND);l.depthMask(!0)}}}();b.drawPick=function(){return function(){if(!this.static){var l=this.pickBuffer;this._pickTimeout=null;l.begin();for(var c=1,d=this.objects,e=0;e<d.length;++e)c=d[e].drawPick(c);l.end()}}}();b.pick=function(){return function(l,c){if(!this.static){var d=this.pixelRatio,e=this.pickPixelRatio,f=this.viewBox;
l=Math.round((l-f[0]/d)*e)|0;c=Math.round((c-f[1]/d)*e)|0;d=this.pickBuffer.query(l,c,this.pickRadius);if(!d)return null;d=d.id+(d.value[0]<<8)+(d.value[1]<<16)+(d.value[2]<<24);e=this.objects;for(f=0;f<e.length;++f){var q=e[f].pick(l,c,d);if(q)return q}return null}}}();b.setScreenBox=function(l){var c=this.screenBox,d=this.pixelRatio;c[0]=Math.round(l[0]*d)|0;c[1]=Math.round(l[1]*d)|0;c[2]=Math.round(l[2]*d)|0;c[3]=Math.round(l[3]*d)|0;this.setDirty()};b.setDataBox=function(l){var c=this.dataBox;
if(c[0]!==l[0]||c[1]!==l[1]||c[2]!==l[2]||c[3]!==l[3])c[0]=l[0],c[1]=l[1],c[2]=l[2],c[3]=l[3],this.setDirty()};b.setViewBox=function(l){var c=this.pixelRatio,d=this.viewBox;d[0]=Math.round(l[0]*c)|0;d[1]=Math.round(l[1]*c)|0;d[2]=Math.round(l[2]*c)|0;d[3]=Math.round(l[3]*c)|0;c=this.pickPixelRatio;this.pickBuffer.shape=[Math.round((l[2]-l[0])*c)|0,Math.round((l[3]-l[1])*c)|0];this.setDirty()};b.update=function(l){l=l||{};var c=this.gl,d=this.pixelRatio=l.pixelRatio||1;this.pickPixelRatio=Math.max(d,
1);this.setScreenBox(l.screenBox||[0,0,c.drawingBufferWidth/d,c.drawingBufferHeight/d]);this.setViewBox(l.viewBox||[.125*(this.screenBox[2]-this.screenBox[0])/d,.125*(this.screenBox[3]-this.screenBox[1])/d,.875*(this.screenBox[2]-this.screenBox[0])/d,.875*(this.screenBox[3]-this.screenBox[1])/d]);c=this.viewBox;var e=(c[2]-c[0])/(c[3]-c[1]);this.setDataBox(l.dataBox||[-10,-10/e,10,10/e]);this.borderColor=!1!==l.borderColor?(l.borderColor||[0,0,0,0]).slice():!1;this.backgroundColor=(l.backgroundColor||
[0,0,0,0]).slice();this.gridLineEnable=(l.gridLineEnable||[!0,!0]).slice();this.gridLineWidth=(l.gridLineWidth||[1,1]).slice();this.gridLineColor=n(l.gridLineColor||[[.5,.5,.5,1],[.5,.5,.5,1]]);this.zeroLineEnable=(l.zeroLineEnable||[!0,!0]).slice();this.zeroLineWidth=(l.zeroLineWidth||[4,4]).slice();this.zeroLineColor=n(l.zeroLineColor||[[0,0,0,1],[0,0,0,1]]);this.tickMarkLength=(l.tickMarkLength||[0,0,0,0]).slice();this.tickMarkWidth=(l.tickMarkWidth||[0,0,0,0]).slice();this.tickMarkColor=n(l.tickMarkColor||
[[0,0,0,1],[0,0,0,1],[0,0,0,1],[0,0,0,1]]);this.titleCenter=(l.titleCenter||[.5*(c[0]+c[2])/d,(c[3]+120)/d]).slice();this.titleEnable=!("titleEnable"in l)||!!l.titleEnable;this.titleAngle=l.titleAngle||0;this.titleColor=(l.titleColor||[0,0,0,1]).slice();this.labelPad=(l.labelPad||[15,15,15,15]).slice();this.labelAngle=(l.labelAngle||[0,Math.PI/2,0,3*Math.PI/2]).slice();this.labelEnable=(l.labelEnable||[!0,!0,!0,!0]).slice();this.labelColor=n(l.labelColor||[[0,0,0,1],[0,0,0,1],[0,0,0,1],[0,0,0,1]]);
this.tickPad=(l.tickPad||[15,15,15,15]).slice();this.tickAngle=(l.tickAngle||[0,0,0,0]).slice();this.tickEnable=(l.tickEnable||[!0,!0,!0,!0]).slice();this.tickColor=n(l.tickColor||[[0,0,0,1],[0,0,0,1],[0,0,0,1],[0,0,0,1]]);this.borderLineEnable=(l.borderLineEnable||[!0,!0,!0,!0]).slice();this.borderLineWidth=(l.borderLineWidth||[2,2,2,2]).slice();this.borderLineColor=n(l.borderLineColor||[[0,0,0,1],[0,0,0,1],[0,0,0,1],[0,0,0,1]]);d=l.ticks||[[],[]];c=this._tickBounds;c[0]=c[1]=Infinity;c[2]=c[3]=
-Infinity;for(e=0;2>e;++e){var f=d[e].slice(0);0!==f.length&&(f.sort(k),c[e]=Math.min(c[e],f[0].x),c[e+2]=Math.max(c[e+2],f[f.length-1].x))}this.grid.update({bounds:c,ticks:d});this.text.update({bounds:c,ticks:d,labels:l.labels||["x","y"],labelSize:l.labelSize||[12,12],labelFont:l.labelFont||["sans-serif","sans-serif"],title:l.title||"",titleSize:l.titleSize||18,titleFont:l.titleFont||"sans-serif"});this.static=!!l.static;this.setDirty()};b.dispose=function(){this.box.dispose();this.grid.dispose();
this.text.dispose();this.line.dispose();for(var l=this.objects.length-1;0<=l;--l)this.objects[l].dispose();this.objects.length=0;for(l=this.overlays.length-1;0<=l;--l)this.overlays[l].dispose();this.overlays.length=0;this.gl=null};b.addObject=function(l){0>this.objects.indexOf(l)&&(this.objects.push(l),this.setDirty())};b.removeObject=function(l){for(var c=this.objects,d=0;d<c.length;++d)if(c[d]===l){c.splice(d,1);this.setDirty();break}};b.addOverlay=function(l){0>this.overlays.indexOf(l)&&(this.overlays.push(l),
this.setOverlayDirty())};b.removeOverlay=function(l){for(var c=this.overlays,d=0;d<c.length;++d)if(c[d]===l){c.splice(d,1);this.setOverlayDirty();break}}},{"./lib/box":316,"./lib/grid":317,"./lib/line":318,"./lib/text":320,"gl-select-static":338}],323:[function(b,N,G){N.exports=function(h,r){h=h||document.body;r=r||{};var l=[.01,Infinity];"distanceLimits"in r&&(l[0]=r.distanceLimits[0],l[1]=r.distanceLimits[1]);"zoomMin"in r&&(l[0]=r.zoomMin);"zoomMax"in r&&(l[1]=r.zoomMax);var c=n({center:r.center||
[0,0,0],up:r.up||[0,1,0],eye:r.eye||[0,0,10],mode:r.mode||"orbit",distanceLimits:l}),d=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],e=0,f=h.clientWidth,q=h.clientHeight,t={keyBindingMode:"rotate",enableWheel:!0,view:c,element:h,delay:r.delay||16,rotateSpeed:r.rotateSpeed||1,zoomSpeed:r.zoomSpeed||1,translateSpeed:r.translateSpeed||1,flipX:!!r.flipX,flipY:!!r.flipY,modes:c.modes,_ortho:r._ortho||r.projection&&"orthographic"===r.projection.type||!1,tick:function(){var w=p(),x=this.delay,z=w-2*x;c.idle(w-x);c.recalcMatrix(z);
c.flush(w-(100+2*x));w=!0;x=c.computedMatrix;for(z=0;16>z;++z)w=w&&d[z]===x[z],d[z]=x[z];x=h.clientWidth===f&&h.clientHeight===q;f=h.clientWidth;q=h.clientHeight;if(w)return!x;e=Math.exp(c.computedRadius[0]);return!0},lookAt:function(w,x,z){c.lookAt(c.lastT(),w,x,z)},rotate:function(w,x,z){c.rotate(c.lastT(),w,x,z)},pan:function(w,x,z){c.pan(c.lastT(),w,x,z)},translate:function(w,x,z){c.translate(c.lastT(),w,x,z)}};Object.defineProperties(t,{matrix:{get:function(){return c.computedMatrix},set:function(w){c.setMatrix(c.lastT(),
w);return c.computedMatrix},enumerable:!0},mode:{get:function(){return c.getMode()},set:function(w){var x=c.computedUp.slice(),z=c.computedEye.slice(),B=c.computedCenter.slice();c.setMode(w);"turntable"===w&&(w=p(),c._active.lookAt(w,z,B,x),c._active.lookAt(w+500,z,B,[0,0,1]),c._active.flush(w));return c.getMode()},enumerable:!0},center:{get:function(){return c.computedCenter},set:function(w){c.lookAt(c.lastT(),null,w);return c.computedCenter},enumerable:!0},eye:{get:function(){return c.computedEye},
set:function(w){c.lookAt(c.lastT(),w);return c.computedEye},enumerable:!0},up:{get:function(){return c.computedUp},set:function(w){c.lookAt(c.lastT(),null,null,w);return c.computedUp},enumerable:!0},distance:{get:function(){return e},set:function(w){c.setDistance(c.lastT(),w);return w},enumerable:!0},distanceLimits:{get:function(){return c.getDistanceLimits(l)},set:function(w){c.setDistanceLimits(w);return w},enumerable:!0}});h.addEventListener("contextmenu",function(w){w.preventDefault();return!1});
t._lastX=-1;t._lastY=-1;t._lastMods={shift:!1,control:!1,alt:!1,meta:!1};t.enableMouseListeners=function(){function w(x,z,B,A){var D=t.keyBindingMode;if(!1!==D){var C="rotate"===D,v="pan"===D;D="zoom"===D;var y=!!A.control,F=!!A.alt,J=!!A.shift,K=!!(x&1),M=!!(x&2);x=!!(x&4);var H=1/h.clientHeight,O=H*(z-t._lastX),I=H*(B-t._lastY),L=t.flipX?1:-1,Q=t.flipY?1:-1,Z=Math.PI*t.rotateSpeed;H=p();-1!==t._lastX&&-1!==t._lastY&&((C&&K&&!y&&!F&&!J||K&&!y&&!F&&J)&&c.rotate(H,L*Z*O,-Q*Z*I,0),(v&&K&&!y&&!F&&!J||
M||K&&y&&!F&&!J)&&c.pan(H,-t.translateSpeed*O*e,t.translateSpeed*I*e,0),D&&K&&!y&&!F&&!J||x||K&&!y&&F&&!J)&&(C=-t.zoomSpeed*I/window.innerHeight*(H-c.lastT())*100,c.pan(H,0,0,e*(Math.exp(C)-1)));t._lastX=z;t._lastY=B;t._lastMods=A;return!0}}t.mouseListener=k(h,w);h.addEventListener("touchstart",function(x){x=a(x.changedTouches[0],h);w(0,x[0],x[1],t._lastMods);w(1,x[0],x[1],t._lastMods)},g?{passive:!0}:!1);h.addEventListener("touchmove",function(x){var z=a(x.changedTouches[0],h);w(1,z[0],z[1],t._lastMods);
x.preventDefault()},g?{passive:!1}:!1);h.addEventListener("touchend",function(x){w(0,t._lastX,t._lastY,t._lastMods)},g?{passive:!0}:!1);t.wheelListener=m(h,function(x,z){if(!1!==t.keyBindingMode&&t.enableWheel){var B=t.flipX?1:-1,A=t.flipY?1:-1,D=p();Math.abs(x)>Math.abs(z)?c.rotate(D,0,0,-x*B*Math.PI*t.rotateSpeed/window.innerWidth):t._ortho||(x=-t.zoomSpeed*A*z/window.innerHeight*(D-c.lastT())/20,c.pan(D,0,0,e*(Math.exp(x)-1)))}},!0)};t.enableMouseListeners();return t};var p=b("right-now"),n=b("3d-view"),
k=b("mouse-change"),m=b("mouse-wheel"),a=b("mouse-event-offset"),g=b("has-passive-events")},{"3d-view":55,"has-passive-events":444,"mouse-change":470,"mouse-event-offset":471,"mouse-wheel":473,"right-now":542}],324:[function(b,N,G){G=b("glslify");var p=b("gl-shader"),n=G(["precision mediump float;\n#define GLSLIFY 1\nattribute vec2 position;\nvarying vec2 uv;\nvoid main() {\n  uv \x3d position;\n  gl_Position \x3d vec4(position, 0, 1);\n}"]),k=G(["precision mediump float;\n#define GLSLIFY 1\n\nuniform sampler2D accumBuffer;\nvarying vec2 uv;\n\nvoid main() {\n  vec4 accum \x3d texture2D(accumBuffer, 0.5 * (uv + 1.0));\n  gl_FragColor \x3d min(vec4(1,1,1,1), accum);\n}"]);
N.exports=function(m){return p(m,n,k,null,[{name:"position",type:"vec2"}])}},{"gl-shader":339,glslify:325}],325:[function(b,N,G){arguments[4][265][0].apply(G,arguments)},{dup:265}],326:[function(b,N,G){function p(){this.mouse=[-1,-1];this.screen=null;this.distance=Infinity;this.data=this.object=this.dataPosition=this.dataCoordinate=this.index=null}function n(w,x){var z=null;try{(z=w.getContext("webgl",x))||(z=w.getContext("experimental-webgl",x))}catch(B){return null}return z}function k(w){return"boolean"===
typeof w?w:!0}var m=b("./camera.js"),a=b("gl-axes3d"),g=b("gl-axes3d/properties"),h=b("gl-spikes3d"),r=b("gl-select-static"),l=b("gl-fbo"),c=b("a-big-triangle"),d=b("mouse-change"),e=b("gl-mat4/perspective"),f=b("gl-mat4/ortho"),q=b("./lib/shader"),t=b("is-mobile")({tablet:!0,featureDetect:!0});N.exports={createScene:function(w){function x(){if(!aa._stopped&&aa.autoResize){var ra=C.parentNode;if(ra&&ra!==document.body){var wa=ra.clientWidth;ra=ra.clientHeight}else wa=window.innerWidth,ra=window.innerHeight;
var pa=Math.ceil(wa*aa.pixelRatio)|0,la=Math.ceil(ra*aa.pixelRatio)|0;if(pa!==C.width||la!==C.height)C.width=pa,C.height=la,pa=C.style,pa.position=pa.position||"absolute",pa.left="0px",pa.top="0px",pa.width=wa+"px",pa.height=ra+"px",S=!0}}function z(){for(var ra=Q.length,wa=V.length,pa=0;pa<wa;++pa)ba[pa]=0;pa=0;a:for(;pa<ra;++pa){var la=Q[pa],ka=la.pickSlots;if(ka){for(var na=0;na<wa;++na)if(255>ba[na]+ka){Z[pa]=na;la.setPickBase(ba[na]+1);ba[na]+=ka;continue a}na=r(v,W);Z[pa]=wa;V.push(na);ba.push(ka);
la.setPickBase(1);wa+=1}else Z[pa]=-1}for(;0<wa&&0===ba[wa-1];)ba.pop(),V.pop().dispose()}function B(){if(aa.contextLost)return!0;if(v.isContextLost()&&(aa.contextLost=!0,aa.mouseListener.enabled=!1,aa.selection.object=null,aa.oncontextloss))aa.oncontextloss()}function A(){if(!B()){x();var ra=aa.camera.tick();fa.view=aa.camera.matrix;S=S||ra;T=T||ra;I.pixelRatio=aa.pixelRatio;L.pixelRatio=aa.pixelRatio;ra=Q.length;var wa=ma[0],pa=ma[1];wa[0]=wa[1]=wa[2]=Infinity;pa[0]=pa[1]=pa[2]=-Infinity;for(var la=
0;la<ra;++la){var ka=Q[la];ka.pixelRatio=aa.pixelRatio;ka.axes=aa.axes;S=S||!!ka.dirty;T=T||!!ka.dirty;if(ka=ka.bounds){var na=ka[0],oa=ka[1];for(ka=0;3>ka;++ka)wa[ka]=Math.min(wa[ka],na[ka]),pa[ka]=Math.max(pa[ka],oa[ka])}}na=aa.bounds;if(aa.autoBounds)for(ka=0;3>ka;++ka)pa[ka]<wa[ka]?(wa[ka]=-1,pa[ka]=1):(wa[ka]===pa[ka]&&(--wa[ka],pa[ka]+=1),la=.05*(pa[ka]-wa[ka]),wa[ka]-=la,pa[ka]+=la),na[0][ka]=wa[ka],na[1][ka]=pa[ka];wa=!1;for(ka=0;3>ka;++ka)wa=wa||ia[0][ka]!==na[0][ka]||ia[1][ka]!==na[1][ka],
ia[0][ka]=na[0][ka],ia[1][ka]=na[1][ka];T=T||wa;if(S=S||wa){if(wa){wa=[0,0,0];for(la=0;3>la;++la)pa=la,ka=(na[1][la]-na[0][la])/10,oa=Math.round(Math.log(Math.abs(ka))/Math.log(10)),0>oa?(oa=Math.round(Math.pow(10,-oa)),ka=Math.ceil(ka*oa)/oa):0<oa?(oa=Math.round(Math.pow(10,oa)),ka=Math.ceil(ka/oa)*oa):ka=Math.ceil(ka),wa[pa]=ka;I.autoTicks?I.update({bounds:na,tickSpacing:wa}):I.update({bounds:na})}wa=v.drawingBufferWidth;pa=v.drawingBufferHeight;W[0]=wa;W[1]=pa;ja[0]=Math.max(wa/aa.pixelRatio,1)|
0;ja[1]=Math.max(pa/aa.pixelRatio,1)|0;la=aa;ka=la.bounds;var sa=la.cameraParams,za=sa.projection;oa=sa.model;var Ha=la.zNear,Wa=la.zFar,Za=la.fovy,bb=la.gl.drawingBufferWidth/la.gl.drawingBufferHeight;M?(f(za,-bb,bb,-1,1,Ha,Wa),sa._ortho=!0):(e(za,Za,bb,Ha,Wa),sa._ortho=!1);for(sa=0;16>sa;++sa)oa[sa]=0;oa[15]=1;for(sa=za=0;3>sa;++sa)za=Math.max(za,ka[1][sa]-ka[0][sa]);for(sa=0;3>sa;++sa)oa[5*sa]=la.autoScale?la.aspect[sa]/(ka[1][sa]-ka[0][sa]):1/za,la.autoCenter&&(oa[12+sa]=.5*-oa[5*sa]*(ka[0][sa]+
ka[1][sa]));for(la=0;la<ra;++la)ka=Q[la],ka.axesBounds=na,aa.clipToBounds&&(ka.clipBounds=na);F.object&&(L.position=aa.snapToData?F.dataCoordinate:F.dataPosition,L.bounds=na);if(T&&(T=!1,!B()))for(v.colorMask(!0,!0,!0,!0),v.depthMask(!0),v.disable(v.BLEND),v.enable(v.DEPTH_TEST),v.depthFunc(v.LEQUAL),na=Q.length,la=V.length,ka=0;ka<la;++ka){oa=V[ka];oa.shape=ja;oa.begin();for(sa=0;sa<na;++sa)Z[sa]===ka&&(za=Q[sa],za.drawPick&&(za.pixelRatio=1,za.drawPick(fa)));oa.end()}aa.axesPixels=g(aa.axes,fa,
wa,pa);if(aa.onrender)aa.onrender();v.bindFramebuffer(v.FRAMEBUFFER,null);v.viewport(0,0,wa,pa);aa.clearRGBA();v.depthMask(!0);v.colorMask(!0,!0,!0,!0);v.enable(v.DEPTH_TEST);v.depthFunc(v.LEQUAL);v.disable(v.BLEND);v.disable(v.CULL_FACE);na=!1;I.enable&&(na=na||I.isTransparent(),I.draw(fa));L.axes=I;F.object&&L.draw(fa);v.disable(v.CULL_FACE);for(la=0;la<ra;++la)ka=Q[la],ka.axes=I,ka.pixelRatio=aa.pixelRatio,ka.isOpaque&&ka.isOpaque()&&ka.draw(fa),ka.isTransparent&&ka.isTransparent()&&(na=!0);if(na){J.shape=
W;J.bind();v.clear(v.DEPTH_BUFFER_BIT);v.colorMask(!1,!1,!1,!1);v.depthMask(!0);v.depthFunc(v.LESS);I.enable&&I.isTransparent()&&I.drawTransparent(fa);for(la=0;la<ra;++la)ka=Q[la],ka.isOpaque&&ka.isOpaque()&&ka.draw(fa);v.enable(v.BLEND);v.blendEquation(v.FUNC_ADD);v.blendFunc(v.ONE,v.ONE_MINUS_SRC_ALPHA);v.colorMask(!0,!0,!0,!0);v.depthMask(!1);v.clearColor(0,0,0,0);v.clear(v.COLOR_BUFFER_BIT);I.isTransparent()&&I.drawTransparent(fa);for(la=0;la<ra;++la)ka=Q[la],ka.isTransparent&&ka.isTransparent()&&
ka.drawTransparent(fa);v.bindFramebuffer(v.FRAMEBUFFER,null);v.blendFunc(v.ONE,v.ONE_MINUS_SRC_ALPHA);v.disable(v.DEPTH_TEST);K.bind();J.color[0].bind(0);K.uniforms.accumBuffer=0;c(v);v.disable(v.BLEND)}S=!1;for(la=0;la<ra;++la)Q[la].dirty=!1}}}function D(){aa._stopped||aa.contextLost||(A(),requestAnimationFrame(D))}w=w||{};w.camera=w.camera||{};var C=w.canvas;C||(C=document.createElement("canvas"),w.container?w.container.appendChild(C):document.body.appendChild(C));var v=w.gl;v||(w.glOptions&&(t=
!!w.glOptions.preserveDrawingBuffer),v=n(C,w.glOptions||{premultipliedAlpha:!0,antialias:!0,preserveDrawingBuffer:t}));if(!v)throw Error("webgl not supported");var y=w.bounds||[[-10,-10,-10],[10,10,10]],F=new p,J=l(v,v.drawingBufferWidth,v.drawingBufferHeight,{preferFloat:!t}),K=q(v),M=w.cameraObject&&!0===w.cameraObject._ortho||w.camera.projection&&"orthographic"===w.camera.projection.type||!1,H={eye:w.camera.eye||[2,0,0],center:w.camera.center||[0,0,0],up:w.camera.up||[0,1,0],zoomMin:w.camera.zoomMax||
.1,zoomMax:w.camera.zoomMin||100,mode:w.camera.mode||"turntable",_ortho:M},O=w.axes||{},I=a(v,O);I.enable=!O.disable;var L=h(v,w.spikes||{}),Q=[],Z=[],ba=[],V=[],S=!0,T=!0,fa={view:null,projection:Array(16),model:Array(16),_ortho:!1};T=!0;var W=[v.drawingBufferWidth,v.drawingBufferHeight];H=w.cameraObject||m(C,H);var aa={gl:v,contextLost:!1,pixelRatio:w.pixelRatio||1,canvas:C,selection:F,camera:H,axes:I,axesPixels:null,spikes:L,bounds:y,objects:Q,shape:W,aspect:w.aspectRatio||[1,1,1],pickRadius:w.pickRadius||
10,zNear:w.zNear||.01,zFar:w.zFar||1E3,fovy:w.fovy||Math.PI/4,clearColor:w.clearColor||[0,0,0,0],autoResize:k(w.autoResize),autoBounds:k(w.autoBounds),autoScale:!!w.autoScale,autoCenter:k(w.autoCenter),clipToBounds:k(w.clipToBounds),snapToData:!!w.snapToData,onselect:w.onselect||null,onrender:w.onrender||null,onclick:w.onclick||null,cameraParams:fa,oncontextloss:null,mouseListener:null,_stopped:!1,getAspectratio:function(){return{x:this.aspect[0],y:this.aspect[1],z:this.aspect[2]}},setAspectratio:function(ra){this.aspect[0]=
ra.x;this.aspect[1]=ra.y;this.aspect[2]=ra.z;T=!0},setBounds:function(ra,wa){this.bounds[0][ra]=wa.min;this.bounds[1][ra]=wa.max},setClearColor:function(ra){this.clearColor=ra},clearRGBA:function(){this.gl.clearColor(this.clearColor[0],this.clearColor[1],this.clearColor[2],this.clearColor[3]);this.gl.clear(this.gl.COLOR_BUFFER_BIT|this.gl.DEPTH_BUFFER_BIT)}},ja=[v.drawingBufferWidth/aa.pixelRatio|0,v.drawingBufferHeight/aa.pixelRatio|0];aa.autoResize&&x();window.addEventListener("resize",x);aa.update=
function(ra){aa._stopped||(T=S=!0)};aa.add=function(ra){aa._stopped||(ra.axes=I,Q.push(ra),Z.push(-1),T=S=!0,z())};aa.remove=function(ra){aa._stopped||(ra=Q.indexOf(ra),0>ra||(Q.splice(ra,1),Z.pop(),T=S=!0,z()))};aa.dispose=function(){if(!aa._stopped&&(aa._stopped=!0,window.removeEventListener("resize",x),C.removeEventListener("webglcontextlost",B),aa.mouseListener.enabled=!1,!aa.contextLost)){I.dispose();L.dispose();for(var ra=0;ra<Q.length;++ra)Q[ra].dispose();J.dispose();for(ra=0;ra<V.length;++ra)V[ra].dispose();
K.dispose();L=I=v=null;Q=[]}};aa._mouseRotating=!1;aa._prevButtons=0;aa.enableMouseListeners=function(){aa.mouseListener=d(C,function(ra,wa,pa){if(!aa._stopped){var la=V.length,ka=Q.length,na=F.object;F.distance=Infinity;F.mouse[0]=wa;F.mouse[1]=pa;F.object=null;F.screen=null;F.dataCoordinate=F.dataPosition=null;var oa=!1;if(ra&&aa._prevButtons)aa._mouseRotating=!0;else{aa._mouseRotating&&(T=!0);aa._mouseRotating=!1;for(var sa=0;sa<la;++sa){var za=V[sa].query(wa,ja[1]-pa-1,aa.pickRadius);if(za&&!(za.distance>
F.distance))for(var Ha=0;Ha<ka;++Ha){var Wa=Q[Ha];if(Z[Ha]===sa){var Za=Wa.pick(za);Za&&(F.buttons=ra,F.screen=za.coord,F.distance=za.distance,F.object=Wa,F.index=Za.distance,F.dataPosition=Za.position,F.dataCoordinate=Za.dataCoordinate,F.data=Za,oa=!0)}}}}na&&na!==F.object&&(na.highlight&&na.highlight(null),S=!0);F.object&&(F.object.highlight&&F.object.highlight(F.data),S=!0);if((oa=oa||F.object!==na)&&aa.onselect)aa.onselect(F);if(ra&1&&!(aa._prevButtons&1)&&aa.onclick)aa.onclick(F);aa._prevButtons=
ra}})};C.addEventListener("webglcontextlost",B);var ma=[[Infinity,Infinity,Infinity],[-Infinity,-Infinity,-Infinity]],ia=[ma[0].slice(),ma[1].slice()];aa.enableMouseListeners();D();aa.redraw=function(){aa._stopped||(S=!0,A())};return aa},createCamera:m}},{"./camera.js":323,"./lib/shader":324,"a-big-triangle":70,"gl-axes3d":258,"gl-axes3d/properties":266,"gl-fbo":276,"gl-mat4/ortho":302,"gl-mat4/perspective":303,"gl-select-static":338,"gl-spikes3d":349,"is-mobile":455,"mouse-change":470}],327:[function(b,
N,G){b=b("glslify");G.pointVertex=b(["precision mediump float;\n#define GLSLIFY 1\n\nattribute vec2 position;\n\nuniform mat3 matrix;\nuniform float pointSize;\nuniform float pointCloud;\n\nhighp float rand(vec2 co) {\n  highp float a \x3d 12.9898;\n  highp float b \x3d 78.233;\n  highp float c \x3d 43758.5453;\n  highp float d \x3d dot(co.xy, vec2(a, b));\n  highp float e \x3d mod(d, 3.14);\n  return fract(sin(e) * c);\n}\n\nvoid main() {\n  vec3 hgPosition \x3d matrix * vec3(position, 1);\n  gl_Position  \x3d vec4(hgPosition.xy, 0, hgPosition.z);\n    // if we don't jitter the point size a bit, overall point cloud\n    // saturation 'jumps' on zooming, which is disturbing and confusing\n  gl_PointSize \x3d pointSize * ((19.5 + rand(position)) / 20.0);\n  if(pointCloud !\x3d 0.0) { // pointCloud is truthy\n    // get the same square surface as circle would be\n    gl_PointSize *\x3d 0.886;\n  }\n}"]);
G.pointFragment=b(["precision mediump float;\n#define GLSLIFY 1\n\nuniform vec4 color, borderColor;\nuniform float centerFraction;\nuniform float pointCloud;\n\nvoid main() {\n  float radius;\n  vec4 baseColor;\n  if(pointCloud !\x3d 0.0) { // pointCloud is truthy\n    if(centerFraction \x3d\x3d 1.0) {\n      gl_FragColor \x3d color;\n    } else {\n      gl_FragColor \x3d mix(borderColor, color, centerFraction);\n    }\n  } else {\n    radius \x3d length(2.0 * gl_PointCoord.xy - 1.0);\n    if(radius \x3e 1.0) {\n      discard;\n    }\n    baseColor \x3d mix(borderColor, color, step(radius, centerFraction));\n    gl_FragColor \x3d vec4(baseColor.rgb * baseColor.a, baseColor.a);\n  }\n}\n"]);
G.pickVertex=b(["precision mediump float;\n#define GLSLIFY 1\n\nattribute vec2 position;\nattribute vec4 pickId;\n\nuniform mat3 matrix;\nuniform float pointSize;\nuniform vec4 pickOffset;\n\nvarying vec4 fragId;\n\nvoid main() {\n  vec3 hgPosition \x3d matrix * vec3(position, 1);\n  gl_Position  \x3d vec4(hgPosition.xy, 0, hgPosition.z);\n  gl_PointSize \x3d pointSize;\n\n  vec4 id \x3d pickId + pickOffset;\n  id.y +\x3d floor(id.x / 256.0);\n  id.x -\x3d floor(id.x / 256.0) * 256.0;\n\n  id.z +\x3d floor(id.y / 256.0);\n  id.y -\x3d floor(id.y / 256.0) * 256.0;\n\n  id.w +\x3d floor(id.z / 256.0);\n  id.z -\x3d floor(id.z / 256.0) * 256.0;\n\n  fragId \x3d id;\n}\n"]);
G.pickFragment=b(["precision mediump float;\n#define GLSLIFY 1\n\nvarying vec4 fragId;\n\nvoid main() {\n  float radius \x3d length(2.0 * gl_PointCoord.xy - 1.0);\n  if(radius \x3e 1.0) {\n    discard;\n  }\n  gl_FragColor \x3d fragId / 255.0;\n}\n"])},{glslify:442}],328:[function(b,N,G){function p(g,h,r,l,c){this.plot=g;this.offsetBuffer=h;this.pickBuffer=r;this.shader=l;this.pickShader=c;this.sizeMin=.5;this.sizeMinCap=2;this.sizeMax=20;this.areaRatio=1;this.pointCount=0;this.color=[1,0,0,1];this.borderColor=
[0,0,0,1];this.blend=!1;this.pickOffset=0;this.points=null}var n=b("gl-shader"),k=b("gl-buffer"),m=b("typedarray-pool"),a=b("./lib/shader");N.exports=function(g,h){var r=g.gl,l=k(r),c=k(r),d=n(r,a.pointVertex,a.pointFragment);r=n(r,a.pickVertex,a.pickFragment);l=new p(g,l,c,d,r);l.update(h);g.addObject(l);return l};b=p.prototype;b.dispose=function(){this.shader.dispose();this.pickShader.dispose();this.offsetBuffer.dispose();this.pickBuffer.dispose();this.plot.removeObject(this)};b.update=function(g){function h(t,
w){return t in g?g[t]:w}var r;g=g||{};this.sizeMin=h("sizeMin",.5);this.sizeMax=h("sizeMax",20);this.color=h("color",[1,0,0,1]).slice();this.areaRatio=h("areaRatio",1);this.borderColor=h("borderColor",[0,0,0,1]).slice();this.blend=h("blend",!1);var l=g.positions.length>>>1,c=g.positions instanceof Float32Array,d=g.idToIndex instanceof Int32Array&&g.idToIndex.length>=l,e=g.positions,f=c?e:m.mallocFloat32(e.length),q=d?g.idToIndex:m.mallocInt32(l);c||f.set(e);if(!d)for(f.set(e),r=0;r<l;r++)q[r]=r;this.points=
e;this.offsetBuffer.update(f);this.pickBuffer.update(q);c||m.free(f);d||m.free(q);this.pointCount=l;this.pickOffset=0};b.unifiedDraw=function(){var g=[1,0,0,0,1,0,0,0,1],h=[0,0,0,0];return function(r){var l=void 0!==r,c=l?this.pickShader:this.shader,d=this.plot.gl,e=this.plot.dataBox;if(0===this.pointCount)return r;var f=e[2]-e[0],q=e[3]-e[1],t=this.points,w=0,x=t.length>>>1,z;for(z=0;z<x;z++){var B=t[2*z],A=t[2*z+1];B>=e[0]&&B<=e[2]&&A>=e[1]&&A<=e[3]&&w++}t=this.plot.pickPixelRatio*Math.max(Math.min(this.sizeMinCap,
this.sizeMin),Math.min(this.sizeMax,this.sizeMax/Math.pow(w,.33333)));g[0]=2/f;g[4]=2/q;g[6]=-2*e[0]/f-1;g[7]=-2*e[1]/q-1;this.offsetBuffer.bind();c.bind();c.attributes.position.pointer();c.uniforms.matrix=g;c.uniforms.color=this.color;c.uniforms.borderColor=this.borderColor;c.uniforms.pointCloud=5>t;c.uniforms.pointSize=t;c.uniforms.centerFraction=Math.min(1,Math.max(0,Math.sqrt(1-this.areaRatio)));l&&(h[0]=r&255,h[1]=r>>8&255,h[2]=r>>16&255,h[3]=r>>24&255,this.pickBuffer.bind(),c.attributes.pickId.pointer(d.UNSIGNED_BYTE),
c.uniforms.pickOffset=h,this.pickOffset=r);l=d.getParameter(d.BLEND);c=d.getParameter(d.DITHER);l&&!this.blend&&d.disable(d.BLEND);c&&d.disable(d.DITHER);d.drawArrays(d.POINTS,0,this.pointCount);l&&!this.blend&&d.enable(d.BLEND);c&&d.enable(d.DITHER);return r+this.pointCount}}();b.draw=b.unifiedDraw;b.drawPick=b.unifiedDraw;b.pick=function(g,h,r){g=this.pickOffset;h=this.pointCount;if(r<g||r>=g+h)return null;r-=g;g=this.points;return{object:this,pointId:r,dataCoord:[g[2*r],g[2*r+1]]}}},{"./lib/shader":327,
"gl-buffer":267,"gl-shader":339,"typedarray-pool":617}],329:[function(b,N,G){N.exports=function(p,n,k,m){var a=n[0],g=n[1],h=n[2];n=n[3];var r=k[0],l=k[1],c=k[2];k=k[3];var d=a*r+g*l+h*c+n*k;0>d&&(d=-d,r=-r,l=-l,c=-c,k=-k);if(1E-6<1-d){var e=Math.acos(d);var f=Math.sin(e);d=Math.sin((1-m)*e)/f;m=Math.sin(m*e)/f}else d=1-m;p[0]=d*a+m*r;p[1]=d*g+m*l;p[2]=d*h+m*c;p[3]=d*n+m*k;return p}},{}],330:[function(b,N,G){N.exports=function(p){return p||0===p?p.toString():""}},{}],331:[function(b,N,G){var p=b("vectorize-text");
N.exports=function(k,m,a){var g=n[m];g||(g=n[m]={});if(k in g)return g[k];var h={textAlign:"center",textBaseline:"middle",lineHeight:1,font:m,lineSpacing:1.25,styletags:{breaklines:!0,bolds:!0,italics:!0,subscripts:!0,superscripts:!0},triangles:!0};m=p(k,h);h.triangles=!1;h=p(k,h);var r,l;if(a&&1!==a){for(r=0;r<m.positions.length;++r)for(l=0;l<m.positions[r].length;++l)m.positions[r][l]/=a;for(r=0;r<h.positions.length;++r)for(l=0;l<h.positions[r].length;++l)h.positions[r][l]/=a}a=[[Infinity,Infinity],
[-Infinity,-Infinity]];var c=h.positions.length;for(r=0;r<c;++r){var d=h.positions[r];for(l=0;2>l;++l)a[0][l]=Math.min(a[0][l],d[l]),a[1][l]=Math.max(a[1][l],d[l])}return g[k]=[m,h,a]};var n={}},{"vectorize-text":623}],332:[function(b,N,G){function p(f,q){f=n(f,q);q=f.attributes;q.position.location=0;q.color.location=1;q.glyph.location=2;q.id.location=3;return f}var n=b("gl-shader"),k=b("glslify");b=k(["precision highp float;\n#define GLSLIFY 1\n\nbool outOfRange(float a, float b, float p) {\n  return ((p \x3e max(a, b)) || \n          (p \x3c min(a, b)));\n}\n\nbool outOfRange(vec2 a, vec2 b, vec2 p) {\n  return (outOfRange(a.x, b.x, p.x) ||\n          outOfRange(a.y, b.y, p.y));\n}\n\nbool outOfRange(vec3 a, vec3 b, vec3 p) {\n  return (outOfRange(a.x, b.x, p.x) ||\n          outOfRange(a.y, b.y, p.y) ||\n          outOfRange(a.z, b.z, p.z));\n}\n\nbool outOfRange(vec4 a, vec4 b, vec4 p) {\n  return outOfRange(a.xyz, b.xyz, p.xyz);\n}\n\nattribute vec3 position;\nattribute vec4 color;\nattribute vec2 glyph;\nattribute vec4 id;\n\nuniform vec4 highlightId;\nuniform float highlightScale;\nuniform mat4 model, view, projection;\nuniform vec3 clipBounds[2];\n\nvarying vec4 interpColor;\nvarying vec4 pickId;\nvarying vec3 dataCoordinate;\n\nvoid main() {\n  if (outOfRange(clipBounds[0], clipBounds[1], position)) {\n\n    gl_Position \x3d vec4(0,0,0,0);\n  } else {\n    float scale \x3d 1.0;\n    if(distance(highlightId, id) \x3c 0.0001) {\n      scale \x3d highlightScale;\n    }\n\n    vec4 worldPosition \x3d model * vec4(position, 1);\n    vec4 viewPosition \x3d view * worldPosition;\n    viewPosition \x3d viewPosition / viewPosition.w;\n    vec4 clipPosition \x3d projection * (viewPosition + scale * vec4(glyph.x, -glyph.y, 0, 0));\n\n    gl_Position \x3d clipPosition;\n    interpColor \x3d color;\n    pickId \x3d id;\n    dataCoordinate \x3d position;\n  }\n}"]);
N=k(["precision highp float;\n#define GLSLIFY 1\n\nbool outOfRange(float a, float b, float p) {\n  return ((p \x3e max(a, b)) || \n          (p \x3c min(a, b)));\n}\n\nbool outOfRange(vec2 a, vec2 b, vec2 p) {\n  return (outOfRange(a.x, b.x, p.x) ||\n          outOfRange(a.y, b.y, p.y));\n}\n\nbool outOfRange(vec3 a, vec3 b, vec3 p) {\n  return (outOfRange(a.x, b.x, p.x) ||\n          outOfRange(a.y, b.y, p.y) ||\n          outOfRange(a.z, b.z, p.z));\n}\n\nbool outOfRange(vec4 a, vec4 b, vec4 p) {\n  return outOfRange(a.xyz, b.xyz, p.xyz);\n}\n\nattribute vec3 position;\nattribute vec4 color;\nattribute vec2 glyph;\nattribute vec4 id;\n\nuniform mat4 model, view, projection;\nuniform vec2 screenSize;\nuniform vec3 clipBounds[2];\nuniform float highlightScale, pixelRatio;\nuniform vec4 highlightId;\n\nvarying vec4 interpColor;\nvarying vec4 pickId;\nvarying vec3 dataCoordinate;\n\nvoid main() {\n  if (outOfRange(clipBounds[0], clipBounds[1], position)) {\n\n    gl_Position \x3d vec4(0,0,0,0);\n  } else {\n    float scale \x3d pixelRatio;\n    if(distance(highlightId.bgr, id.bgr) \x3c 0.001) {\n      scale *\x3d highlightScale;\n    }\n\n    vec4 worldPosition \x3d model * vec4(position, 1.0);\n    vec4 viewPosition \x3d view * worldPosition;\n    vec4 clipPosition \x3d projection * viewPosition;\n    clipPosition /\x3d clipPosition.w;\n\n    gl_Position \x3d clipPosition + vec4(screenSize * scale * vec2(glyph.x, -glyph.y), 0.0, 0.0);\n    interpColor \x3d color;\n    pickId \x3d id;\n    dataCoordinate \x3d position;\n  }\n}"]);
var m=k(["precision highp float;\n#define GLSLIFY 1\n\nbool outOfRange(float a, float b, float p) {\n  return ((p \x3e max(a, b)) || \n          (p \x3c min(a, b)));\n}\n\nbool outOfRange(vec2 a, vec2 b, vec2 p) {\n  return (outOfRange(a.x, b.x, p.x) ||\n          outOfRange(a.y, b.y, p.y));\n}\n\nbool outOfRange(vec3 a, vec3 b, vec3 p) {\n  return (outOfRange(a.x, b.x, p.x) ||\n          outOfRange(a.y, b.y, p.y) ||\n          outOfRange(a.z, b.z, p.z));\n}\n\nbool outOfRange(vec4 a, vec4 b, vec4 p) {\n  return outOfRange(a.xyz, b.xyz, p.xyz);\n}\n\nattribute vec3 position;\nattribute vec4 color;\nattribute vec2 glyph;\nattribute vec4 id;\n\nuniform float highlightScale;\nuniform vec4 highlightId;\nuniform vec3 axes[2];\nuniform mat4 model, view, projection;\nuniform vec2 screenSize;\nuniform vec3 clipBounds[2];\nuniform float scale, pixelRatio;\n\nvarying vec4 interpColor;\nvarying vec4 pickId;\nvarying vec3 dataCoordinate;\n\nvoid main() {\n  if (outOfRange(clipBounds[0], clipBounds[1], position)) {\n\n    gl_Position \x3d vec4(0,0,0,0);\n  } else {\n    float lscale \x3d pixelRatio * scale;\n    if(distance(highlightId, id) \x3c 0.0001) {\n      lscale *\x3d highlightScale;\n    }\n\n    vec4 clipCenter   \x3d projection * view * model * vec4(position, 1);\n    vec3 dataPosition \x3d position + 0.5*lscale*(axes[0] * glyph.x + axes[1] * glyph.y) * clipCenter.w * screenSize.y;\n    vec4 clipPosition \x3d projection * view * model * vec4(dataPosition, 1);\n\n    gl_Position \x3d clipPosition;\n    interpColor \x3d color;\n    pickId \x3d id;\n    dataCoordinate \x3d dataPosition;\n  }\n}\n"]),
a=k(["precision highp float;\n#define GLSLIFY 1\n\nbool outOfRange(float a, float b, float p) {\n  return ((p \x3e max(a, b)) || \n          (p \x3c min(a, b)));\n}\n\nbool outOfRange(vec2 a, vec2 b, vec2 p) {\n  return (outOfRange(a.x, b.x, p.x) ||\n          outOfRange(a.y, b.y, p.y));\n}\n\nbool outOfRange(vec3 a, vec3 b, vec3 p) {\n  return (outOfRange(a.x, b.x, p.x) ||\n          outOfRange(a.y, b.y, p.y) ||\n          outOfRange(a.z, b.z, p.z));\n}\n\nbool outOfRange(vec4 a, vec4 b, vec4 p) {\n  return outOfRange(a.xyz, b.xyz, p.xyz);\n}\n\nuniform vec3 fragClipBounds[2];\nuniform float opacity;\n\nvarying vec4 interpColor;\nvarying vec3 dataCoordinate;\n\nvoid main() {\n  if (\n    outOfRange(fragClipBounds[0], fragClipBounds[1], dataCoordinate) ||\n    interpColor.a * opacity \x3d\x3d 0.\n  ) discard;\n  gl_FragColor \x3d interpColor * opacity;\n}\n"]);
k=k(["precision highp float;\n#define GLSLIFY 1\n\nbool outOfRange(float a, float b, float p) {\n  return ((p \x3e max(a, b)) || \n          (p \x3c min(a, b)));\n}\n\nbool outOfRange(vec2 a, vec2 b, vec2 p) {\n  return (outOfRange(a.x, b.x, p.x) ||\n          outOfRange(a.y, b.y, p.y));\n}\n\nbool outOfRange(vec3 a, vec3 b, vec3 p) {\n  return (outOfRange(a.x, b.x, p.x) ||\n          outOfRange(a.y, b.y, p.y) ||\n          outOfRange(a.z, b.z, p.z));\n}\n\nbool outOfRange(vec4 a, vec4 b, vec4 p) {\n  return outOfRange(a.xyz, b.xyz, p.xyz);\n}\n\nuniform vec3 fragClipBounds[2];\nuniform float pickGroup;\n\nvarying vec4 pickId;\nvarying vec3 dataCoordinate;\n\nvoid main() {\n  if (outOfRange(fragClipBounds[0], fragClipBounds[1], dataCoordinate)) discard;\n\n  gl_FragColor \x3d vec4(pickGroup, pickId.bgr);\n}"]);
var g=[{name:"position",type:"vec3"},{name:"color",type:"vec4"},{name:"glyph",type:"vec2"},{name:"id",type:"vec4"}],h={vertex:b,fragment:a,attributes:g},r={vertex:N,fragment:a,attributes:g},l={vertex:m,fragment:a,attributes:g},c={vertex:b,fragment:k,attributes:g},d={vertex:N,fragment:k,attributes:g},e={vertex:m,fragment:k,attributes:g};G.createPerspective=function(f){return p(f,h)};G.createOrtho=function(f){return p(f,r)};G.createProject=function(f){return p(f,l)};G.createPickPerspective=function(f){return p(f,
c)};G.createPickOrtho=function(f){return p(f,d)};G.createPickProject=function(f){return p(f,e)}},{"gl-shader":339,glslify:333}],333:[function(b,N,G){arguments[4][265][0].apply(G,arguments)},{dup:265}],334:[function(b,N,G){function p(H,O){var I=H[0],L=H[1],Q=H[2],Z=H[3];H[0]=O[0]*I+O[4]*L+O[8]*Q+O[12]*Z;H[1]=O[1]*I+O[5]*L+O[9]*Q+O[13]*Z;H[2]=O[2]*I+O[6]*L+O[10]*Q+O[14]*Z;H[3]=O[3]*I+O[7]*L+O[11]*Q+O[15]*Z;return H}function n(H,O,I,L){p(L,L,I);p(L,L,O);return p(L,L,H)}function k(H,O){this.index=H;this.dataCoordinate=
this.position=O}function m(H){return!0===H||1<H?1:H}function a(H,O,I,L,Q,Z,ba,V,S,T,fa,W){this.gl=H;this.pixelRatio=1;this.shader=O;this.orthoShader=I;this.projectShader=L;this.pointBuffer=Q;this.colorBuffer=Z;this.glyphBuffer=ba;this.idBuffer=V;this.vao=S;this.lineVertexCount=this.vertexCount=0;this.opacity=1;this.hasAlpha=!1;this.lineWidth=0;this.projectScale=[2/3,2/3,2/3];this.projectOpacity=[1,1,1];this.projectHasAlpha=!1;this.pickId=0;this.pickPerspectiveShader=T;this.pickOrthoShader=fa;this.pickProjectShader=
W;this.points=[];this._selectResult=new k(0,[0,0,0]);this.useOrtho=!0;this.bounds=[[Infinity,Infinity,Infinity],[-Infinity,-Infinity,-Infinity]];this.axesProject=[!0,!0,!0];this.axesBounds=[[-Infinity,-Infinity,-Infinity],[Infinity,Infinity,Infinity]];this.highlightId=[1,1,1,1];this.highlightScale=2;this.clipBounds=[[-Infinity,-Infinity,-Infinity],[Infinity,Infinity,Infinity]];this.dirty=!0}function g(H){H[0]=H[1]=H[2]=0;return H}function h(H,O){H[0]=O[0];H[1]=O[1];H[2]=O[2];H[3]=1;return H}function r(H,
O,I,L){H[0]=O[0];H[1]=O[1];H[2]=O[2];H[I]=L;return H}function l(H,O,I,L,Q,Z,ba){var V=I.gl;if(Z===I.projectHasAlpha||ba){for(var S=I.axesProject,T=I.gl,fa=O.uniforms,W=L.model||B,aa=L.view||B,ja=L.projection||B,ma=I.axesBounds,ia=I.clipBounds,ra=K,wa=0;2>wa;++wa)for(var pa=0;3>pa;++pa)ra[wa][pa]=Math.max(Math.min(ia[wa][pa],1E8),-1E8);ia=I.axes&&I.axes.lastCubeProps?I.axes.lastCubeProps.axis:[1,1,1];A[0]=2/T.drawingBufferWidth;A[1]=2/T.drawingBufferHeight;O.bind();fa.view=aa;fa.projection=ja;fa.screenSize=
A;fa.highlightId=I.highlightId;fa.highlightScale=I.highlightScale;fa.clipBounds=ra;fa.pickGroup=I.pickId/255;fa.pixelRatio=Q;for(O=0;3>O;++O)if(S[O]){fa.scale=I.projectScale[O];fa.opacity=I.projectOpacity[O];wa=F;for(var la=0;16>la;++la)wa[la]=0;for(la=0;4>la;++la)wa[5*la]=1;wa[5*O]=0;wa[12+O]=0>ia[O]?ma[0][O]:ma[1][O];t(wa,W,wa);fa.model=wa;wa=(O+1)%3;pa=(O+2)%3;var ka=g(D),na=g(C);ka[wa]=1;na[pa]=1;la=n(ja,aa,W,h(v,ka));var oa=n(ja,aa,W,h(y,na));if(Math.abs(la[1])>Math.abs(oa[1])){var sa=la;la=
oa;oa=sa;sa=ka;ka=na;na=sa;sa=wa;wa=pa;pa=sa}0>la[0]&&(ka[wa]=-1);0<oa[1]&&(na[pa]=-1);for(la=sa=oa=0;4>la;++la)oa+=Math.pow(W[4*wa+la],2),sa+=Math.pow(W[4*pa+la],2);ka[wa]/=Math.sqrt(oa);na[pa]/=Math.sqrt(sa);fa.axes[0]=ka;fa.axes[1]=na;fa.fragClipBounds[0]=r(J,ra[0],O,-1E8);fa.fragClipBounds[1]=r(J,ra[1],O,1E8);I.vao.bind();I.vao.draw(T.TRIANGLES,I.vertexCount);0<I.lineWidth&&(T.lineWidth(I.lineWidth*Q),I.vao.draw(T.LINES,I.lineVertexCount,I.vertexCount));I.vao.unbind()}}if(Z===I.hasAlpha||ba)H.bind(),
H=H.uniforms,H.model=L.model||B,H.view=L.view||B,H.projection=L.projection||B,A[0]=2/V.drawingBufferWidth,A[1]=2/V.drawingBufferHeight,H.screenSize=A,H.highlightId=I.highlightId,H.highlightScale=I.highlightScale,H.fragClipBounds=M,H.clipBounds=I.axes.bounds,H.opacity=I.opacity,H.pickGroup=I.pickId/255,H.pixelRatio=Q,I.vao.bind(),I.vao.draw(V.TRIANGLES,I.vertexCount),0<I.lineWidth&&(V.lineWidth(I.lineWidth*Q),I.vao.draw(V.LINES,I.lineVertexCount,I.vertexCount)),I.vao.unbind()}function c(H,O,I,L){O=
Array.isArray(H)?O<H.length?H[O]:void 0:H;O=z(O);H=!0;d(O)&&(O="",H=!1);I=x(O,I,L);return{mesh:I[0],lines:I[1],bounds:I[2],visible:H}}var d=b("is-string-blank"),e=b("gl-buffer"),f=b("gl-vao"),q=b("typedarray-pool"),t=b("gl-mat4/multiply"),w=b("./lib/shaders"),x=b("./lib/glyphs"),z=b("./lib/get-simple-string"),B=[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1];N.exports=function(H){var O=H.gl,I=w.createPerspective(O),L=w.createOrtho(O),Q=w.createProject(O),Z=w.createPickPerspective(O),ba=w.createPickOrtho(O),V=
w.createPickProject(O),S=e(O),T=e(O),fa=e(O),W=e(O),aa=f(O,[{buffer:S,size:3,type:O.FLOAT},{buffer:T,size:4,type:O.FLOAT},{buffer:fa,size:2,type:O.FLOAT},{buffer:W,size:4,type:O.UNSIGNED_BYTE,normalized:!0}]);O=new a(O,I,L,Q,S,T,fa,W,aa,Z,ba,V);O.update(H);return O};b=a.prototype;b.pickSlots=1;b.setPickBase=function(H){this.pickId=H};b.isTransparent=function(){if(this.hasAlpha)return!0;for(var H=0;3>H;++H)if(this.axesProject[H]&&this.projectHasAlpha)return!0;return!1};b.isOpaque=function(){if(!this.hasAlpha)return!0;
for(var H=0;3>H;++H)if(this.axesProject[H]&&!this.projectHasAlpha)return!0;return!1};var A=[0,0],D=[0,0,0],C=[0,0,0],v=[0,0,0,1],y=[0,0,0,1],F=B.slice(),J=[0,0,0],K=[[0,0,0],[0,0,0]],M=[[-1E8,-1E8,-1E8],[1E8,1E8,1E8]];b.draw=function(H){l(this.useOrtho?this.orthoShader:this.shader,this.projectShader,this,H,this.pixelRatio,!1,!1)};b.drawTransparent=function(H){l(this.useOrtho?this.orthoShader:this.shader,this.projectShader,this,H,this.pixelRatio,!0,!1)};b.drawPick=function(H){l(this.useOrtho?this.pickOrthoShader:
this.pickPerspectiveShader,this.pickProjectShader,this,H,1,!0,!0)};b.pick=function(H){if(!H||H.id!==this.pickId)return null;var O=H.value[2]+(H.value[1]<<8)+(H.value[0]<<16);if(O>=this.pointCount||0>O)return null;H=this.points[O];var I=this._selectResult;I.index=O;for(O=0;3>O;++O)I.position[O]=I.dataCoordinate[O]=H[O];return I};b.highlight=function(H){H?(H=H.index,this.highlightId=[(H&255)/255,(H>>8&255)/255,(H>>16&255)/255,0]):this.highlightId=[1,1,1,1]};b.update=function(H){H=H||{};"perspective"in
H&&(this.useOrtho=!H.perspective);"orthographic"in H&&(this.useOrtho=!!H.orthographic);"lineWidth"in H&&(this.lineWidth=H.lineWidth);if("project"in H)if(Array.isArray(H.project))this.axesProject=H.project;else{var O=!!H.project;this.axesProject=[O,O,O]}"projectScale"in H&&(Array.isArray(H.projectScale)?this.projectScale=H.projectScale.slice():(O=+H.projectScale,this.projectScale=[O,O,O]));this.projectHasAlpha=!1;if("projectOpacity"in H){Array.isArray(H.projectOpacity)?this.projectOpacity=H.projectOpacity.slice():
(O=+H.projectOpacity,this.projectOpacity=[O,O,O]);for(var I=0;3>I;++I)this.projectOpacity[I]=m(this.projectOpacity[I]),1>this.projectOpacity[I]&&(this.projectHasAlpha=!0)}this.hasAlpha=!1;"opacity"in H&&(this.opacity=m(H.opacity),1>this.opacity&&(this.hasAlpha=!0));this.dirty=!0;O=H.position;var L=H.font||"normal",Q=H.alignment||[0,0];if(2===Q.length){var Z=Q[0];var ba=Q[1]}else for(Z=[],ba=[],I=0;I<Q.length;++I)Z[I]=Q[I][0],ba[I]=Q[I][1];Q=[Infinity,Infinity,Infinity];var V=[-Infinity,-Infinity,
-Infinity],S=H.glyph,T=H.color,fa=H.size,W=H.angle;H=H.lineColor;var aa=-1,ja=0,ma=0,ia=0;if(O.length)a:for(ia=O.length,I=0;I<ia;++I){for(var ra=O[I],wa=0;3>wa;++wa)if(isNaN(ra[wa])||!isFinite(ra[wa]))continue a;var pa=c(S,I,L,this.pixelRatio),la=pa.mesh,ka=pa.lines;ja+=3*la.cells.length;ma+=2*ka.edges.length}I=ja+ma;var na=q.mallocFloat(3*I),oa=q.mallocFloat(4*I),sa=q.mallocFloat(2*I),za=q.mallocUint32(I);if(0<I){var Ha=0,Wa=ja,Za=[0,0,0,1],bb=[0,0,0,1],sb=Array.isArray(T)&&Array.isArray(T[0]),hb=
Array.isArray(H)&&Array.isArray(H[0]);I=0;a:for(;I<ia;++I){aa+=1;ra=O[I];for(wa=0;3>wa;++wa){if(isNaN(ra[wa])||!isFinite(ra[wa]))continue a;V[wa]=Math.max(V[wa],ra[wa]);Q[wa]=Math.min(Q[wa],ra[wa])}pa=c(S,I,L,this.pixelRatio);la=pa.mesh;ka=pa.lines;var ub=pa.bounds;var pb=pa.visible;if(pb)if(Array.isArray(T))if(pa=sb?I<T.length?T[I]:[0,0,0,0]:T,3===pa.length){for(wa=0;3>wa;++wa)Za[wa]=pa[wa];Za[3]=1}else{if(4===pa.length){for(wa=0;4>wa;++wa)Za[wa]=pa[wa];!this.hasAlpha&&1>pa[3]&&(this.hasAlpha=!0)}}else Za[0]=
Za[1]=Za[2]=0,Za[3]=1;else Za=[1,1,1,0];if(pb)if(Array.isArray(H))if(pa=hb?I<H.length?H[I]:[0,0,0,0]:H,3===pa.length){for(wa=0;3>wa;++wa)bb[wa]=pa[wa];bb[wa]=1}else{if(4===pa.length){for(wa=0;4>wa;++wa)bb[wa]=pa[wa];!this.hasAlpha&&1>pa[3]&&(this.hasAlpha=!0)}}else bb[0]=bb[1]=bb[2]=0,bb[3]=1;else bb=[1,1,1,0];pa=.5;pb?Array.isArray(fa)?pa=I<fa.length?+fa[I]:12:fa?pa=+fa:this.useOrtho&&(pa=12):pa=0;ra=0;Array.isArray(W)?ra=I<W.length?+W[I]:0:W&&(ra=+W);pb=Math.cos(ra);var Ab=Math.sin(ra);ra=O[I];
for(wa=0;3>wa;++wa)V[wa]=Math.max(V[wa],ra[wa]),Q[wa]=Math.min(Q[wa],ra[wa]);wa=0;Array.isArray(Z)?wa=I<Z.length?Z[I]:0:Z&&(wa=Z);var tb=0;Array.isArray(ba)?tb=I<ba.length?ba[I]:0:ba&&(tb=ba);wa*=0<wa?1-ub[0][0]:0>wa?1+ub[1][0]:1;tb*=0<tb?1-ub[0][1]:0>tb?1+ub[1][1]:1;ub=[wa,tb];tb=la.cells||[];la=la.positions||[];for(wa=0;wa<tb.length;++wa)for(var vb=tb[wa],qb=0;3>qb;++qb){for(var zb=0;3>zb;++zb)na[3*Ha+zb]=ra[zb];for(zb=0;4>zb;++zb)oa[4*Ha+zb]=Za[zb];za[Ha]=aa;zb=la[vb[qb]];sa[2*Ha]=pa*(pb*zb[0]-
Ab*zb[1]+ub[0]);sa[2*Ha+1]=pa*(Ab*zb[0]+pb*zb[1]+ub[1]);Ha+=1}tb=ka.edges;la=ka.positions;for(wa=0;wa<tb.length;++wa)for(vb=tb[wa],qb=0;2>qb;++qb){for(zb=0;3>zb;++zb)na[3*Wa+zb]=ra[zb];for(zb=0;4>zb;++zb)oa[4*Wa+zb]=bb[zb];za[Wa]=aa;zb=la[vb[qb]];sa[2*Wa]=pa*(pb*zb[0]-Ab*zb[1]+ub[0]);sa[2*Wa+1]=pa*(Ab*zb[0]+pb*zb[1]+ub[1]);Wa+=1}}}this.bounds=[Q,V];this.points=O;this.pointCount=O.length;this.vertexCount=ja;this.lineVertexCount=ma;this.pointBuffer.update(na);this.colorBuffer.update(oa);this.glyphBuffer.update(sa);
this.idBuffer.update(za);q.free(na);q.free(oa);q.free(sa);q.free(za)};b.dispose=function(){this.shader.dispose();this.orthoShader.dispose();this.pickPerspectiveShader.dispose();this.pickOrthoShader.dispose();this.vao.dispose();this.pointBuffer.dispose();this.colorBuffer.dispose();this.glyphBuffer.dispose();this.idBuffer.dispose()}},{"./lib/get-simple-string":330,"./lib/glyphs":331,"./lib/shaders":332,"gl-buffer":267,"gl-mat4/multiply":301,"gl-vao":361,"is-string-blank":458,"typedarray-pool":617}],
335:[function(b,N,G){b=b("glslify");G.boxVertex=b(["precision mediump float;\n#define GLSLIFY 1\n\nattribute vec2 vertex;\n\nuniform vec2 cornerA, cornerB;\n\nvoid main() {\n  gl_Position \x3d vec4(mix(cornerA, cornerB, vertex), 0, 1);\n}\n"]);G.boxFragment=b(["precision mediump float;\n#define GLSLIFY 1\n\nuniform vec4 color;\n\nvoid main() {\n  gl_FragColor \x3d color;\n}\n"])},{glslify:336}],336:[function(b,N,G){arguments[4][265][0].apply(G,arguments)},{dup:265}],337:[function(b,N,G){function p(a,
g,h){this.plot=a;this.boxBuffer=g;this.boxShader=h;this.enabled=!0;this.selectBox=[Infinity,Infinity,-Infinity,-Infinity];this.borderColor=[0,0,0,1];this.innerFill=!1;this.innerColor=[0,0,0,.25];this.outerFill=!0;this.outerColor=[0,0,0,.5];this.borderWidth=10}var n=b("gl-shader"),k=b("gl-buffer"),m=b("./lib/shaders");N.exports=function(a,g){var h=a.gl,r=k(h,[0,0,0,1,1,0,1,1]);h=n(h,m.boxVertex,m.boxFragment);r=new p(a,r,h);r.update(g);a.addOverlay(r);return r};b=p.prototype;b.draw=function(){if(this.enabled){var a=
this.plot,g=this.selectBox,h=this.borderWidth,r=this.innerColor,l=this.outerColor,c=this.borderColor,d=a.box,e=a.screenBox,f=a.dataBox,q=a.viewBox,t=a.pixelRatio;a=(g[0]-f[0])*(q[2]-q[0])/(f[2]-f[0])+q[0];var w=(g[1]-f[1])*(q[3]-q[1])/(f[3]-f[1])+q[1],x=(g[2]-f[0])*(q[2]-q[0])/(f[2]-f[0])+q[0];g=(g[3]-f[1])*(q[3]-q[1])/(f[3]-f[1])+q[1];a=Math.max(a,q[0]);w=Math.max(w,q[1]);x=Math.min(x,q[2]);g=Math.min(g,q[3]);x<a||g<w||(d.bind(),q=e[2]-e[0],e=e[3]-e[1],this.outerFill&&(d.drawBox(0,0,q,w,l),d.drawBox(0,
w,a,g,l),d.drawBox(0,g,q,e,l),d.drawBox(x,w,q,g,l)),this.innerFill&&d.drawBox(a,w,x,g,r),0<h&&(h*=t,d.drawBox(a-h,w-h,x+h,w+h,c),d.drawBox(a-h,g-h,x+h,g+h,c),d.drawBox(a-h,w-h,a+h,g+h,c),d.drawBox(x-h,w-h,x+h,g+h,c)))}};b.update=function(a){a=a||{};this.innerFill=!!a.innerFill;this.outerFill=!!a.outerFill;this.innerColor=(a.innerColor||[0,0,0,.5]).slice();this.outerColor=(a.outerColor||[0,0,0,.5]).slice();this.borderColor=(a.borderColor||[0,0,0,1]).slice();this.borderWidth=a.borderWidth||0;this.selectBox=
(a.selectBox||this.selectBox).slice()};b.dispose=function(){this.boxBuffer.dispose();this.boxShader.dispose();this.plot.removeOverlay(this)}},{"./lib/shaders":335,"gl-buffer":267,"gl-shader":339}],338:[function(b,N,G){function p(h,r,l,c,d){this.coord=[h,r];this.id=l;this.value=c;this.distance=d}function n(h,r,l){this.gl=h;this.fbo=r;this.buffer=l;this._readTimeout=null;var c=this;this._readCallback=function(){c.gl&&(r.bind(),h.readPixels(0,0,r.shape[0],r.shape[1],h.RGBA,h.UNSIGNED_BYTE,c.buffer),
c._readTimeout=null)}}N.exports=function(h,r){var l=r[0],c=r[1];r=k(h,l,c,{});l=m.mallocUint8(l*c*4);return new n(h,r,l)};var k=b("gl-fbo"),m=b("typedarray-pool"),a=b("ndarray"),g=b("bit-twiddle").nextPow2;b=n.prototype;Object.defineProperty(b,"shape",{get:function(){return this.gl?this.fbo.shape.slice():[0,0]},set:function(h){if(this.gl){this.fbo.shape=h;var r=this.fbo.shape[0],l=this.fbo.shape[1];if(l*r*4>this.buffer.length){m.free(this.buffer);for(var c=this.buffer=m.mallocUint8(g(l*r*4)),d=0;d<
l*r*4;++d)c[d]=255}return h}}});b.begin=function(){var h=this.gl;h&&(this.fbo.bind(),h.clearColor(1,1,1,1),h.clear(h.COLOR_BUFFER_BIT|h.DEPTH_BUFFER_BIT))};b.end=function(){var h=this.gl;h&&(h.bindFramebuffer(h.FRAMEBUFFER,null),this._readTimeout||clearTimeout(this._readTimeout),this._readTimeout=setTimeout(this._readCallback,1))};b.query=function(h,r,l){if(!this.gl)return null;var c=this.fbo.shape.slice();h|=0;r|=0;"number"!==typeof l&&(l=1);var d=Math.min(Math.max(h-l,0),c[0])|0,e=Math.min(Math.max(h+
l,0),c[0])|0;h=Math.min(Math.max(r-l,0),c[1])|0;r=Math.min(Math.max(r+l,0),c[1])|0;if(e<=d||r<=h)return null;r=[e-d,r-h];c=a(this.buffer,[r[0],r[1],4],[4,4*c[0],1],4*(d+c[0]*h));r=c.hi(r[0],r[1],1);e=l;for(var f=1E8,q=-1,t=-1,w=r.shape[0],x=r.shape[1],z=0;z<w;z++)for(var B=0;B<x;B++){var A=r.get(z,B,0),D=r.get(z,B,1),C=r.get(z,B,2),v=r.get(z,B,3);if(255>A||255>D||255>C||255>v)A=e-z,D=l-B,A=A*A+D*D,A<f&&(f=A,q=z,t=B)}r=[q,t,f];e=r[0];l=r[1];if(0>e||Math.pow(this.radius,2)<r[2])return null;f=c.get(e,
l,0);q=c.get(e,l,1);t=c.get(e,l,2);c=c.get(e,l,3);return new p(e+d|0,l+h|0,f,[q,t,c],Math.sqrt(r[2]))};b.dispose=function(){this.gl&&(this.fbo.dispose(),m.free(this.buffer),this.gl=null,this._readTimeout&&clearTimeout(this._readTimeout))}},{"bit-twiddle":104,"gl-fbo":276,ndarray:483,"typedarray-pool":617}],339:[function(b,N,G){function p(l){this.gl=l;this.gl.lastAttribCount=0;this._vref=this._fref=this._relink=this.vertShader=this.fragShader=this.program=this.attributes=this.uniforms=this.types=null}
function n(l,c){return l.name<c.name?-1:1}var k=b("./lib/create-uniforms"),m=b("./lib/create-attributes"),a=b("./lib/reflect"),g=b("./lib/shader-cache"),h=b("./lib/runtime-reflect"),r=b("./lib/GLError");b=p.prototype;b.bind=function(){this.program||this._relink();var l,c=this.gl.getProgramParameter(this.program,this.gl.ACTIVE_ATTRIBUTES),d=this.gl.lastAttribCount;if(c>d)for(l=d;l<c;l++)this.gl.enableVertexAttribArray(l);else if(d>c)for(l=c;l<d;l++)this.gl.disableVertexAttribArray(l);this.gl.lastAttribCount=
c;this.gl.useProgram(this.program)};b.dispose=function(){for(var l=this.gl.lastAttribCount,c=0;c<l;c++)this.gl.disableVertexAttribArray(c);this.gl.lastAttribCount=0;this._fref&&this._fref.dispose();this._vref&&this._vref.dispose();this.attributes=this.types=this.vertShader=this.fragShader=this.program=this._relink=this._fref=this._vref=null};b.update=function(l,c,d,e){function f(){t.program=g.program(w,t._vref,t._fref,x,z);for(var F=0;F<d.length;++F)y[F]=w.getUniformLocation(t.program,d[F].name)}
if(!c||1===arguments.length){var q=l;l=q.vertex;c=q.fragment;d=q.uniforms;e=q.attributes}var t=this,w=t.gl;q=t._vref;t._vref=g.shader(w,w.VERTEX_SHADER,l);q&&q.dispose();t.vertShader=t._vref.shader;q=this._fref;t._fref=g.shader(w,w.FRAGMENT_SHADER,c);q&&q.dispose();t.fragShader=t._fref.shader;if(!d||!e){q=w.createProgram();w.attachShader(q,t.fragShader);w.attachShader(q,t.vertShader);w.linkProgram(q);if(!w.getProgramParameter(q,w.LINK_STATUS))throw q=w.getProgramInfoLog(q),new r(q,"Error linking program:"+
q);d=d||h.uniforms(w,q);e=e||h.attributes(w,q);w.deleteProgram(q)}e=e.slice();e.sort(n);q=[];var x=[],z=[],B;for(B=0;B<e.length;++B){var A=e[B];if(0<=A.type.indexOf("mat")){for(var D=A.type.charAt(A.type.length-1)|0,C=Array(D),v=0;v<D;++v)C[v]=z.length,x.push(A.name+"["+v+"]"),"number"===typeof A.location?z.push(A.location+v):Array.isArray(A.location)&&A.location.length===D&&"number"===typeof A.location[v]?z.push(A.location[v]|0):z.push(-1);q.push({name:A.name,type:A.type,locations:C})}else q.push({name:A.name,
type:A.type,locations:[z.length]}),x.push(A.name),"number"===typeof A.location?z.push(A.location|0):z.push(-1)}for(B=A=0;B<z.length;++B)if(0>z[B]){for(;0<=z.indexOf(A);)A+=1;z[B]=A}var y=Array(d.length);f();t._relink=f;t.types={uniforms:a(d),attributes:a(e)};t.attributes=m(w,t,q,z);Object.defineProperty(t,"uniforms",k(w,t,d,y))};N.exports=function(l,c,d,e,f){l=new p(l);l.update(c,d,e,f);return l}},{"./lib/GLError":340,"./lib/create-attributes":341,"./lib/create-uniforms":342,"./lib/reflect":343,"./lib/runtime-reflect":344,
"./lib/shader-cache":345}],340:[function(b,N,G){function p(n,k,m){this.shortMessage=k||"";this.longMessage=m||"";this.rawError=n||"";this.message="gl-shader: "+(k||n||"")+(m?"\n"+m:"");this.stack=Error().stack}p.prototype=Error();p.prototype.name="GLError";p.prototype.constructor=p;N.exports=p},{}],341:[function(b,N,G){function p(a,g,h,r,l,c){this._gl=a;this._wrapper=g;this._index=h;this._locations=r;this._dimension=l;this._constFunc=c}function n(a,g,h,r,l,c,d){for(var e=["gl","v"],f=[],q=0;q<l;++q)e.push("x"+
q),f.push("x"+q);e.push("if(x0.length\x3d\x3d\x3dvoid 0){return gl.vertexAttrib"+l+"f(v,"+f.join()+")}else{return gl.vertexAttrib"+l+"fv(v,x0)}");var t=Function.apply(null,e),w=new p(a,g,h,r,l,t);Object.defineProperty(c,d,{set:function(x){a.disableVertexAttribArray(r[h]);t(a,r[h],x);return x},get:function(){return w},enumerable:!0})}function k(a,g,h,r,l,c,d){for(var e=Array(l),f=Array(l),q=0;q<l;++q)n(a,g,h[q],r,l,e,q),f[q]=e[q];Object.defineProperty(e,"location",{set:function(x){if(Array.isArray(x))for(var z=
0;z<l;++z)f[z].location=x[z];else for(z=0;z<l;++z)f[z].location=x+z;return x},get:function(){for(var x=Array(l),z=0;z<l;++z)x[z]=r[h[z]];return x},enumerable:!0});e.pointer=function(x,z,B,A){x=x||a.FLOAT;z=!!z;B=B||l*l;A=A||0;for(var D=0;D<l;++D){var C=r[h[D]];a.vertexAttribPointer(C,l,x,z,B,A+D*l);a.enableVertexAttribArray(C)}};var t=Array(l),w=a["vertexAttrib"+l+"fv"];Object.defineProperty(c,d,{set:function(x){for(var z=0;z<l;++z){var B=r[h[z]];a.disableVertexAttribArray(B);if(Array.isArray(x[0]))w.call(a,
B,x[z]);else{for(var A=0;A<l;++A)t[A]=x[l*z+A];w.call(a,B,t)}}return x},get:function(){return e},enumerable:!0})}N.exports=function(a,g,h,r){for(var l={},c=0,d=h.length;c<d;++c){var e=h[c],f=e.name,q=e.type;e=e.locations;switch(q){case "bool":case "int":case "float":n(a,g,e[0],r,1,l,f);break;default:if(0<=q.indexOf("vec")){var t=q.charCodeAt(q.length-1)-48;if(2>t||4<t)throw new m("","Invalid data type for attribute "+f+": "+q);n(a,g,e[0],r,t,l,f)}else if(0<=q.indexOf("mat")){t=q.charCodeAt(q.length-
1)-48;if(2>t||4<t)throw new m("","Invalid data type for attribute "+f+": "+q);k(a,g,e,r,t,l,f)}else throw new m("","Unknown data type for attribute "+f+": "+q);}}return l};var m=b("./GLError");b=p.prototype;b.pointer=function(a,g,h,r){var l=this._gl,c=this._locations[this._index];l.vertexAttribPointer(c,this._dimension,a||l.FLOAT,!!g,h||0,r||0);l.enableVertexAttribArray(c)};b.set=function(a,g,h,r){return this._constFunc(this._locations[this._index],a,g,h,r)};Object.defineProperty(b,"location",{get:function(){return this._locations[this._index]},
set:function(a){a!==this._locations[this._index]&&(this._locations[this._index]=a|0,this._wrapper.program=null);return a|0}})},{"./GLError":340}],342:[function(b,N,G){function p(a){return(new Function("y","return function(){return y}"))(a)}function n(a,g){for(var h=Array(a),r=0;r<a;++r)h[r]=g;return h}var k=b("./reflect"),m=b("./GLError");N.exports=function(a,g,h,r){function l(w,x,z){switch(z){case "bool":case "int":case "sampler2D":case "samplerCube":return"gl.uniform1i(locations["+x+"],obj"+w+")";
case "float":return"gl.uniform1f(locations["+x+"],obj"+w+")";default:var B=z.indexOf("vec");if(0<=B&&1>=B&&z.length===4+B){B=z.charCodeAt(z.length-1)-48;if(2>B||4<B)throw new m("","Invalid data type");switch(z.charAt(0)){case "b":case "i":return"gl.uniform"+B+"iv(locations["+x+"],obj"+w+")";case "v":return"gl.uniform"+B+"fv(locations["+x+"],obj"+w+")";default:throw new m("","Unrecognized data type for vector "+name+": "+z);}}else{if(0===z.indexOf("mat")&&4===z.length){B=z.charCodeAt(z.length-1)-48;
if(2>B||4<B)throw new m("","Invalid uniform dimension type for matrix "+name+": "+z);return"gl.uniformMatrix"+B+"fv(locations["+x+"],false,obj"+w+")"}throw new m("","Unknown uniform data type for "+name+": "+z);}}}function c(w,x){if("object"!==typeof x)return[[w,x]];var z=[],B;for(B in x){var A=x[B],D=w;D=parseInt(B)+""===B?D+("["+B+"]"):D+("."+B);"object"===typeof A?z.push.apply(z,c(D,A)):z.push([D,A])}return z}function d(w){var x=["return function updateProperty(obj){"];w=c("",w);for(var z=0;z<
w.length;++z){var B=w[z],A=B[0];B=B[1];r[B]&&x.push(l(A,B,h[B].type))}x.push("return obj}");return(new Function("gl","locations",x.join("\n")))(a,r)}function e(w){switch(w){case "bool":return!1;case "int":case "sampler2D":case "samplerCube":return 0;case "float":return 0;default:var x=w.indexOf("vec");if(0<=x&&1>=x&&w.length===4+x){x=w.charCodeAt(w.length-1)-48;if(2>x||4<x)throw new m("","Invalid data type");return"b"===w.charAt(0)?n(x,!1):n(x,0)}if(0===w.indexOf("mat")&&4===w.length){x=w.charCodeAt(w.length-
1)-48;if(2>x||4<x)throw new m("","Invalid uniform dimension type for matrix "+name+": "+w);return n(x*x,0)}throw new m("","Unknown uniform data type for "+name+": "+w);}}function f(w,x,z){if("object"===typeof z){var B=q(z);Object.defineProperty(w,x,{get:p(B),set:d(z),enumerable:!0,configurable:!1})}else if(r[z]){B=Object;var A=B.defineProperty;var D=(new Function("gl","wrapper","locations","return function(){return gl.getUniform(wrapper.program,locations["+z+"])}"))(a,g,r);A.call(B,w,x,{get:D,set:d(z),
enumerable:!0,configurable:!1})}else w[x]=e(h[z].type)}function q(w){if(Array.isArray(w)){var x=Array(w.length);for(var z=0;z<w.length;++z)f(x,z,w[z])}else for(z in x={},w)f(x,z,w[z]);return x}var t=k(h,!0);return{get:p(q(t)),set:d(t),enumerable:!0,configurable:!0}}},{"./GLError":340,"./reflect":343}],343:[function(b,N,G){N.exports=function(p,n){for(var k={},m=0;m<p.length;++m)for(var a=p[m].name.split("."),g=k,h=0;h<a.length;++h){var r=a[h].split("[");if(1<r.length){r[0]in g||(g[r[0]]=[]);g=g[r[0]];
for(var l=1;l<r.length;++l){var c=parseInt(r[l]);l<r.length-1||h<a.length-1?(c in g||(g[c]=l<r.length-1?[]:{}),g=g[c]):g[c]=n?m:p[m].type}}else h<a.length-1?(r[0]in g||(g[r[0]]={}),g=g[r[0]]):g[r[0]]=n?m:p[m].type}return k}},{}],344:[function(b,N,G){function p(m,a){if(!k){var g=Object.keys(n);k={};for(var h=0;h<g.length;++h){var r=g[h];k[m[r]]=n[r]}}return k[a]}G.uniforms=function(m,a){for(var g=m.getProgramParameter(a,m.ACTIVE_UNIFORMS),h=[],r=0;r<g;++r){var l=m.getActiveUniform(a,r);if(l){var c=
p(m,l.type);if(1<l.size)for(var d=0;d<l.size;++d)h.push({name:l.name.replace("[0]","["+d+"]"),type:c});else h.push({name:l.name,type:c})}}return h};G.attributes=function(m,a){for(var g=m.getProgramParameter(a,m.ACTIVE_ATTRIBUTES),h=[],r=0;r<g;++r){var l=m.getActiveAttrib(a,r);l&&h.push({name:l.name,type:p(m,l.type)})}return h};var n={FLOAT:"float",FLOAT_VEC2:"vec2",FLOAT_VEC3:"vec3",FLOAT_VEC4:"vec4",INT:"int",INT_VEC2:"ivec2",INT_VEC3:"ivec3",INT_VEC4:"ivec4",BOOL:"bool",BOOL_VEC2:"bvec2",BOOL_VEC3:"bvec3",
BOOL_VEC4:"bvec4",FLOAT_MAT2:"mat2",FLOAT_MAT3:"mat3",FLOAT_MAT4:"mat4",SAMPLER_2D:"sampler2D",SAMPLER_CUBE:"samplerCube"},k=null},{}],345:[function(b,N,G){function p(r,l,c,d,e,f,q){this.id=r;this.src=l;this.type=c;this.shader=d;this.count=f;this.programs=[];this.cache=q}function n(r){this.gl=r;this.shaders=[{},{}];this.programs={}}function k(r){var l=g.get(r);l||(l=new n(r),g.set(r,l));return l}G.shader=function(r,l,c){return k(r).getShaderReference(l,c)};G.program=function(r,l,c,d,e){return k(r).getProgram(l,
c,d,e)};var m=b("./GLError"),a=b("gl-format-compiler-error"),g=new ("undefined"===typeof WeakMap?b("weakmap-shim"):WeakMap),h=0;p.prototype.dispose=function(){if(0===--this.count){for(var r=this.cache,l=r.gl,c=this.programs,d=0,e=c.length;d<e;++d){var f=r.programs[c[d]];f&&(delete r.programs[d],l.deleteProgram(f))}l.deleteShader(this.shader);delete r.shaders[this.type===l.FRAGMENT_SHADER|0][this.src]}};b=n.prototype;b.getShaderReference=function(r,l){var c=this.gl,d=this.shaders[r===c.FRAGMENT_SHADER|
0],e=d[l];if(e&&c.isShader(e.shader))e.count+=1;else{e=c.createShader(r);c.shaderSource(e,l);c.compileShader(e);if(!c.getShaderParameter(e,c.COMPILE_STATUS)){c=c.getShaderInfoLog(e);try{var f=a(c,l,r)}catch(q){throw console.warn("Failed to format compiler error: "+q),new m(c,"Error compiling shader:\n"+c);}throw new m(c,f.short,f.long);}e=d[l]=new p(h++,l,r,e,[],1,this)}return e};b.getProgram=function(r,l,c,d){var e=[r.id,l.id,c.join(":"),d.join(":")].join("@"),f=this.programs[e];if(!f||!this.gl.isProgram(f)){f=
this.programs;var q=this.gl,t=r.shader,w=l.shader,x=q.createProgram();q.attachShader(x,t);q.attachShader(x,w);for(t=0;t<c.length;++t)q.bindAttribLocation(x,d[t],c[t]);q.linkProgram(x);if(!q.getProgramParameter(x,q.LINK_STATUS))throw r=q.getProgramInfoLog(x),new m(r,"Error linking program: "+r);f[e]=f=x;r.programs.push(e);l.programs.push(e)}return f}},{"./GLError":340,"gl-format-compiler-error":277,"weakmap-shim":628}],346:[function(b,N,G){function p(n){this.plot=n;this.enable=[!0,!0,!1,!1];this.width=
[1,1,1,1];this.color=[[0,0,0,1],[0,0,0,1],[0,0,0,1],[0,0,0,1]];this.center=[Infinity,Infinity]}N.exports=function(n,k){var m=new p(n);m.update(k);n.addOverlay(m);return m};b=p.prototype;b.update=function(n){n=n||{};this.enable=(n.enable||[!0,!0,!1,!1]).slice();this.width=(n.width||[1,1,1,1]).slice();this.color=(n.color||[[0,0,0,1],[0,0,0,1],[0,0,0,1],[0,0,0,1]]).map(function(k){return k.slice()});this.center=(n.center||[Infinity,Infinity]).slice();this.plot.setOverlayDirty()};b.draw=function(){var n=
this.enable,k=this.width,m=this.color,a=this.center,g=this.plot,h=g.line,r=g.dataBox;g=g.viewBox;h.bind();if(r[0]<=a[0]&&a[0]<=r[2]&&r[1]<=a[1]&&a[1]<=r[3]){var l=g[0]+(a[0]-r[0])/(r[2]-r[0])*(g[2]-g[0]);a=g[1]+(a[1]-r[1])/(r[3]-r[1])*(g[3]-g[1]);n[0]&&h.drawLine(l,a,g[0],a,k[0],m[0]);n[1]&&h.drawLine(l,a,l,g[1],k[1],m[1]);n[2]&&h.drawLine(l,a,g[2],a,k[2],m[2]);n[3]&&h.drawLine(l,a,l,g[3],k[3],m[3])}};b.dispose=function(){this.plot.removeOverlay(this)}},{}],347:[function(b,N,G){arguments[4][265][0].apply(G,
arguments)},{dup:265}],348:[function(b,N,G){G=b("glslify");var p=b("gl-shader"),n=G(["precision mediump float;\n#define GLSLIFY 1\n\nattribute vec3 position, color;\nattribute float weight;\n\nuniform mat4 model, view, projection;\nuniform vec3 coordinates[3];\nuniform vec4 colors[3];\nuniform vec2 screenShape;\nuniform float lineWidth;\n\nvarying vec4 fragColor;\n\nvoid main() {\n  vec3 vertexPosition \x3d mix(coordinates[0],\n    mix(coordinates[2], coordinates[1], 0.5 * (position + 1.0)), abs(position));\n\n  vec4 clipPos \x3d projection * view * model * vec4(vertexPosition, 1.0);\n  vec2 clipOffset \x3d (projection * view * model * vec4(color, 0.0)).xy;\n  vec2 delta \x3d weight * clipOffset * screenShape;\n  vec2 lineOffset \x3d normalize(vec2(delta.y, -delta.x)) / screenShape;\n\n  gl_Position   \x3d vec4(clipPos.xy + clipPos.w * 0.5 * lineWidth * lineOffset, clipPos.z, clipPos.w);\n  fragColor     \x3d color.x * colors[0] + color.y * colors[1] + color.z * colors[2];\n}\n"]),
k=G(["precision mediump float;\n#define GLSLIFY 1\n\nvarying vec4 fragColor;\n\nvoid main() {\n  gl_FragColor \x3d fragColor;\n}"]);N.exports=function(m){return p(m,n,k,null,[{name:"position",type:"vec3"},{name:"color",type:"vec3"},{name:"weight",type:"float"}])}},{"gl-shader":339,glslify:347}],349:[function(b,N,G){function p(l,c,d,e){this.gl=l;this.buffer=c;this.vao=d;this.shader=e;this.pixelRatio=1;this.bounds=[[-1E3,-1E3,-1E3],[1E3,1E3,1E3]];this.position=[0,0,0];this.lineWidth=[2,2,2];this.colors=
[[0,0,0,1],[0,0,0,1],[0,0,0,1]];this.enabled=[!0,!0,!0];this.drawSides=[!0,!0,!0];this.axes=null}var n=b("gl-buffer"),k=b("gl-vao"),m=b("./shaders/index");N.exports=function(l,c){function d(w,x,z,B,A,D){w=[w,x,z,0,0,0,1];w[B+3]=1;w[B]=A;e.push.apply(e,w);w[6]=-1;e.push.apply(e,w);w[B]=D;e.push.apply(e,w);e.push.apply(e,w);w[6]=1;e.push.apply(e,w);w[B]=A;e.push.apply(e,w)}var e=[];d(0,0,0,0,0,1);d(0,0,0,1,0,1);d(0,0,0,2,0,1);d(1,0,0,1,-1,1);d(1,0,0,2,-1,1);d(0,1,0,0,-1,1);d(0,1,0,2,-1,1);d(0,0,1,0,
-1,1);d(0,0,1,1,-1,1);var f=n(l,e),q=k(l,[{type:l.FLOAT,buffer:f,size:3,offset:0,stride:28},{type:l.FLOAT,buffer:f,size:3,offset:12,stride:28},{type:l.FLOAT,buffer:f,size:1,offset:24,stride:28}]),t=m(l);t.attributes.position.location=0;t.attributes.color.location=1;t.attributes.weight.location=2;l=new p(l,f,q,t);l.update(c);return l};var a=[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1];b=p.prototype;var g=[0,0,0],h=[0,0,0],r=[0,0];b.isTransparent=function(){return!1};b.drawTransparent=function(l){};b.draw=function(l){var c=
this.gl,d=this.vao,e=this.shader;d.bind();e.bind();var f=l.model||a,q=l.view||a;l=l.projection||a;if(this.axes)var t=this.axes.lastCubeProps.axis;for(var w=0;3>w;++w)t&&0>t[w]?(g[w]=this.bounds[0][w],h[w]=this.bounds[1][w]):(g[w]=this.bounds[1][w],h[w]=this.bounds[0][w]);r[0]=c.drawingBufferWidth;r[1]=c.drawingBufferHeight;e.uniforms.model=f;e.uniforms.view=q;e.uniforms.projection=l;e.uniforms.coordinates=[this.position,g,h];e.uniforms.colors=this.colors;e.uniforms.screenShape=r;for(w=0;3>w;++w)e.uniforms.lineWidth=
this.lineWidth[w]*this.pixelRatio,this.enabled[w]&&(d.draw(c.TRIANGLES,6,6*w),this.drawSides[w]&&d.draw(c.TRIANGLES,12,18+12*w));d.unbind()};b.update=function(l){l&&("bounds"in l&&(this.bounds=l.bounds),"position"in l&&(this.position=l.position),"lineWidth"in l&&(this.lineWidth=l.lineWidth),"colors"in l&&(this.colors=l.colors),"enabled"in l&&(this.enabled=l.enabled),"drawSides"in l&&(this.drawSides=l.drawSides))};b.dispose=function(){this.vao.dispose();this.buffer.dispose();this.shader.dispose()}},
{"./shaders/index":348,"gl-buffer":267,"gl-vao":361}],350:[function(b,N,G){var p=b("glslify");b=p(["precision highp float;\n\nprecision highp float;\n#define GLSLIFY 1\n\nvec3 getOrthogonalVector(vec3 v) {\n  // Return up-vector for only-z vector.\n  // Return ax + by + cz \x3d 0, a point that lies on the plane that has v as a normal and that isn't (0,0,0).\n  // From the above if-statement we have ||a|| \x3e 0  U  ||b|| \x3e 0.\n  // Assign z \x3d 0, x \x3d -b, y \x3d a:\n  // a*-b + b*a + c*0 \x3d -ba + ba + 0 \x3d 0\n  if (v.x*v.x \x3e v.z*v.z || v.y*v.y \x3e v.z*v.z) {\n    return normalize(vec3(-v.y, v.x, 0.0));\n  } else {\n    return normalize(vec3(0.0, v.z, -v.y));\n  }\n}\n\n// Calculate the tube vertex and normal at the given index.\n//\n// The returned vertex is for a tube ring with its center at origin, radius of length(d), pointing in the direction of d.\n//\n// Each tube segment is made up of a ring of vertices.\n// These vertices are used to make up the triangles of the tube by connecting them together in the vertex array.\n// The indexes of tube segments run from 0 to 8.\n//\nvec3 getTubePosition(vec3 d, float index, out vec3 normal) {\n  float segmentCount \x3d 8.0;\n\n  float angle \x3d 2.0 * 3.14159 * (index / segmentCount);\n\n  vec3 u \x3d getOrthogonalVector(d);\n  vec3 v \x3d normalize(cross(u, d));\n\n  vec3 x \x3d u * cos(angle) * length(d);\n  vec3 y \x3d v * sin(angle) * length(d);\n  vec3 v3 \x3d x + y;\n\n  normal \x3d normalize(v3);\n\n  return v3;\n}\n\nattribute vec4 vector;\nattribute vec4 color, position;\nattribute vec2 uv;\n\nuniform float vectorScale, tubeScale;\nuniform mat4 model, view, projection, inverseModel;\nuniform vec3 eyePosition, lightPosition;\n\nvarying vec3 f_normal, f_lightDirection, f_eyeDirection, f_data, f_position;\nvarying vec4 f_color;\nvarying vec2 f_uv;\n\nvoid main() {\n  // Scale the vector magnitude to stay constant with\n  // model \x26 view changes.\n  vec3 normal;\n  vec3 XYZ \x3d getTubePosition(mat3(model) * (tubeScale * vector.w * normalize(vector.xyz)), position.w, normal);\n  vec4 tubePosition \x3d model * vec4(position.xyz, 1.0) + vec4(XYZ, 0.0);\n\n  //Lighting geometry parameters\n  vec4 cameraCoordinate \x3d view * tubePosition;\n  cameraCoordinate.xyz /\x3d cameraCoordinate.w;\n  f_lightDirection \x3d lightPosition - cameraCoordinate.xyz;\n  f_eyeDirection   \x3d eyePosition - cameraCoordinate.xyz;\n  f_normal \x3d normalize((vec4(normal, 0.0) * inverseModel).xyz);\n\n  // vec4 m_position  \x3d model * vec4(tubePosition, 1.0);\n  vec4 t_position  \x3d view * tubePosition;\n  gl_Position      \x3d projection * t_position;\n\n  f_color          \x3d color;\n  f_data           \x3d tubePosition.xyz;\n  f_position       \x3d position.xyz;\n  f_uv             \x3d uv;\n}\n"]);
N=p(["#extension GL_OES_standard_derivatives : enable\n\nprecision highp float;\n#define GLSLIFY 1\n\nfloat beckmannDistribution(float x, float roughness) {\n  float NdotH \x3d max(x, 0.0001);\n  float cos2Alpha \x3d NdotH * NdotH;\n  float tan2Alpha \x3d (cos2Alpha - 1.0) / cos2Alpha;\n  float roughness2 \x3d roughness * roughness;\n  float denom \x3d 3.141592653589793 * roughness2 * cos2Alpha * cos2Alpha;\n  return exp(tan2Alpha / roughness2) / denom;\n}\n\nfloat cookTorranceSpecular(\n  vec3 lightDirection,\n  vec3 viewDirection,\n  vec3 surfaceNormal,\n  float roughness,\n  float fresnel) {\n\n  float VdotN \x3d max(dot(viewDirection, surfaceNormal), 0.0);\n  float LdotN \x3d max(dot(lightDirection, surfaceNormal), 0.0);\n\n  //Half angle vector\n  vec3 H \x3d normalize(lightDirection + viewDirection);\n\n  //Geometric term\n  float NdotH \x3d max(dot(surfaceNormal, H), 0.0);\n  float VdotH \x3d max(dot(viewDirection, H), 0.000001);\n  float LdotH \x3d max(dot(lightDirection, H), 0.000001);\n  float G1 \x3d (2.0 * NdotH * VdotN) / VdotH;\n  float G2 \x3d (2.0 * NdotH * LdotN) / LdotH;\n  float G \x3d min(1.0, min(G1, G2));\n  \n  //Distribution term\n  float D \x3d beckmannDistribution(NdotH, roughness);\n\n  //Fresnel term\n  float F \x3d pow(1.0 - VdotN, fresnel);\n\n  //Multiply terms and done\n  return  G * F * D / max(3.14159265 * VdotN, 0.000001);\n}\n\nbool outOfRange(float a, float b, float p) {\n  return ((p \x3e max(a, b)) || \n          (p \x3c min(a, b)));\n}\n\nbool outOfRange(vec2 a, vec2 b, vec2 p) {\n  return (outOfRange(a.x, b.x, p.x) ||\n          outOfRange(a.y, b.y, p.y));\n}\n\nbool outOfRange(vec3 a, vec3 b, vec3 p) {\n  return (outOfRange(a.x, b.x, p.x) ||\n          outOfRange(a.y, b.y, p.y) ||\n          outOfRange(a.z, b.z, p.z));\n}\n\nbool outOfRange(vec4 a, vec4 b, vec4 p) {\n  return outOfRange(a.xyz, b.xyz, p.xyz);\n}\n\nuniform vec3 clipBounds[2];\nuniform float roughness, fresnel, kambient, kdiffuse, kspecular, opacity;\nuniform sampler2D texture;\n\nvarying vec3 f_normal, f_lightDirection, f_eyeDirection, f_data, f_position;\nvarying vec4 f_color;\nvarying vec2 f_uv;\n\nvoid main() {\n  if (outOfRange(clipBounds[0], clipBounds[1], f_position)) discard;\n  vec3 N \x3d normalize(f_normal);\n  vec3 L \x3d normalize(f_lightDirection);\n  vec3 V \x3d normalize(f_eyeDirection);\n\n  if(gl_FrontFacing) {\n    N \x3d -N;\n  }\n\n  float specular \x3d min(1.0, max(0.0, cookTorranceSpecular(L, V, N, roughness, fresnel)));\n  float diffuse  \x3d min(kambient + kdiffuse * max(dot(N, L), 0.0), 1.0);\n\n  vec4 surfaceColor \x3d f_color * texture2D(texture, f_uv);\n  vec4 litColor \x3d surfaceColor.a * vec4(diffuse * surfaceColor.rgb + kspecular * vec3(1,1,1) * specular,  1.0);\n\n  gl_FragColor \x3d litColor * opacity;\n}\n"]);
var n=p(["precision highp float;\n\nprecision highp float;\n#define GLSLIFY 1\n\nvec3 getOrthogonalVector(vec3 v) {\n  // Return up-vector for only-z vector.\n  // Return ax + by + cz \x3d 0, a point that lies on the plane that has v as a normal and that isn't (0,0,0).\n  // From the above if-statement we have ||a|| \x3e 0  U  ||b|| \x3e 0.\n  // Assign z \x3d 0, x \x3d -b, y \x3d a:\n  // a*-b + b*a + c*0 \x3d -ba + ba + 0 \x3d 0\n  if (v.x*v.x \x3e v.z*v.z || v.y*v.y \x3e v.z*v.z) {\n    return normalize(vec3(-v.y, v.x, 0.0));\n  } else {\n    return normalize(vec3(0.0, v.z, -v.y));\n  }\n}\n\n// Calculate the tube vertex and normal at the given index.\n//\n// The returned vertex is for a tube ring with its center at origin, radius of length(d), pointing in the direction of d.\n//\n// Each tube segment is made up of a ring of vertices.\n// These vertices are used to make up the triangles of the tube by connecting them together in the vertex array.\n// The indexes of tube segments run from 0 to 8.\n//\nvec3 getTubePosition(vec3 d, float index, out vec3 normal) {\n  float segmentCount \x3d 8.0;\n\n  float angle \x3d 2.0 * 3.14159 * (index / segmentCount);\n\n  vec3 u \x3d getOrthogonalVector(d);\n  vec3 v \x3d normalize(cross(u, d));\n\n  vec3 x \x3d u * cos(angle) * length(d);\n  vec3 y \x3d v * sin(angle) * length(d);\n  vec3 v3 \x3d x + y;\n\n  normal \x3d normalize(v3);\n\n  return v3;\n}\n\nattribute vec4 vector;\nattribute vec4 position;\nattribute vec4 id;\n\nuniform mat4 model, view, projection;\nuniform float tubeScale;\n\nvarying vec3 f_position;\nvarying vec4 f_id;\n\nvoid main() {\n  vec3 normal;\n  vec3 XYZ \x3d getTubePosition(mat3(model) * (tubeScale * vector.w * normalize(vector.xyz)), position.w, normal);\n  vec4 tubePosition \x3d model * vec4(position.xyz, 1.0) + vec4(XYZ, 0.0);\n\n  gl_Position \x3d projection * view * tubePosition;\n  f_id        \x3d id;\n  f_position  \x3d position.xyz;\n}\n"]);
p=p(["precision highp float;\n#define GLSLIFY 1\n\nbool outOfRange(float a, float b, float p) {\n  return ((p \x3e max(a, b)) || \n          (p \x3c min(a, b)));\n}\n\nbool outOfRange(vec2 a, vec2 b, vec2 p) {\n  return (outOfRange(a.x, b.x, p.x) ||\n          outOfRange(a.y, b.y, p.y));\n}\n\nbool outOfRange(vec3 a, vec3 b, vec3 p) {\n  return (outOfRange(a.x, b.x, p.x) ||\n          outOfRange(a.y, b.y, p.y) ||\n          outOfRange(a.z, b.z, p.z));\n}\n\nbool outOfRange(vec4 a, vec4 b, vec4 p) {\n  return outOfRange(a.xyz, b.xyz, p.xyz);\n}\n\nuniform vec3  clipBounds[2];\nuniform float pickId;\n\nvarying vec3 f_position;\nvarying vec4 f_id;\n\nvoid main() {\n  if (outOfRange(clipBounds[0], clipBounds[1], f_position)) discard;\n\n  gl_FragColor \x3d vec4(pickId, f_id.xyz);\n}"]);
G.meshShader={vertex:b,fragment:N,attributes:[{name:"position",type:"vec4"},{name:"color",type:"vec4"},{name:"uv",type:"vec2"},{name:"vector",type:"vec4"}]};G.pickShader={vertex:n,fragment:p,attributes:[{name:"position",type:"vec4"},{name:"id",type:"vec4"},{name:"vector",type:"vec4"}]}},{glslify:351}],351:[function(b,N,G){arguments[4][265][0].apply(G,arguments)},{dup:265}],352:[function(b,N,G){var p=b("gl-vec3"),n=b("gl-vec4"),k="xyz xzy yxz yzx zxy zyx".split(" "),m=function(d,e,f,q){for(var t=0,
w=0;w<d.length;w++)for(var x=d[w].velocities,z=0;z<x.length;z++)t=Math.max(t,p.length(x[z]));d=d.map(function(K){var M=t,H=K.points,O=K.velocities;K=K.divergences;var I=[],L=[],Q=[],Z=[],ba=[],V=[],S=0;n.create();for(var T=n.create(),fa=0;fa<H.length;fa++){var W=H[fa],aa=O[fa],ja=K[fa];0===f&&(ja=.05*q);var ma=p.length(aa)/M;var ia=n.create();p.copy(ia,aa);ia[3]=ja;for(aa=0;8>aa;aa++)ba[aa]=[W[0],W[1],W[2],aa];if(0<Z.length)for(aa=0;8>aa;aa++)W=(aa+1)%8,I.push(Z[aa],ba[aa],ba[W],ba[W],Z[W],Z[aa]),
Q.push(T,ia,ia,ia,T,T),V.push(S,ma,ma,ma,S,S),W=I.length,L.push([W-6,W-5,W-4],[W-3,W-2,W-1]);S=Z;Z=ba;ba=S;T=ia;S=ma}return{positions:I,cells:L,vectors:Q,vertexIntensity:V}});x=[];var B=[],A=[],D=[];for(w=0;w<d.length;w++){var C=d[w],v=x.length;x=x.concat(C.positions);A=A.concat(C.vectors);D=D.concat(C.vertexIntensity);for(z=0;z<C.cells.length;z++){var y=C.cells[z],F=[];B.push(F);for(var J=0;J<y.length;J++)F.push(y[J]+v)}}return{positions:x,cells:B,vectors:A,vertexIntensity:D,colormap:e}},a=function(d,
e){var f=d.length,q;for(q=0;q<f;q++){var t=d[q];if(t===e)break;else if(t>e)return q-1}return q},g=function(d,e,f){return d<e?e:d>f?f:d},h=function(d){var e=Infinity;d.sort(function(w,x){return w-x});for(var f=d.length,q=1;q<f;q++){var t=Math.abs(d[q]-d[q-1]);t<e&&(e=t)}return e},r=function(d){for(var e=[],f=[],q=[],t={},w={},x={},z=d.length,B=0;B<z;B++){var A=d[B],D=A[0],C=A[1];A=A[2];t[D]||(e.push(D),t[D]=!0);w[C]||(f.push(C),w[C]=!0);x[A]||(q.push(A),x[A]=!0)}d=h(e);f=h(f);q=h(q);q=Math.min(d,f,
q);return isFinite(q)?q:1};N.exports=function(d,e){var f=d.startingPositions,q=d.maxLength||1E3,t=d.tubeSize||1,w=d.absoluteTubeSize,x=d.gridFill||"+x+y+z",z,B,A;-1!==x.indexOf("-x")&&(z=!0);-1!==x.indexOf("-y")&&(B=!0);-1!==x.indexOf("-z")&&(A=!0);var D=k.indexOf(x.replace(/-/g,"").replace(/\+/g,""));var C=d.getVelocity||function(ra){var wa=d.vectors,pa=d.meshgrid;var la=ra[0];var ka=ra[1],na=ra[2];ra=pa[0].length;var oa=pa[1].length,sa=pa[2].length,za=a(pa[0],la),Ha=a(pa[1],ka),Wa=a(pa[2],na),Za=
za+1,bb=Ha+1,sb=Wa+1;za=g(za,0,ra-1);Za=g(Za,0,ra-1);Ha=g(Ha,0,oa-1);bb=g(bb,0,oa-1);Wa=g(Wa,0,sa-1);sb=g(sb,0,sa-1);if(0>za||0>Ha||0>Wa||Za>ra-1||bb>oa-1||sb>sa-1)la=p.create();else{var hb=pa[0][za],ub=pa[1][Ha],pb=pa[2][Wa];la=(la-hb)/(pa[0][Za]-hb);ka=(ka-ub)/(pa[1][bb]-ub);pa=(na-pb)/(pa[2][sb]-pb);isFinite(la)||(la=.5);isFinite(ka)||(ka=.5);isFinite(pa)||(pa=.5);z&&(za=ra-1-za,Za=ra-1-Za);B&&(Ha=oa-1-Ha,bb=oa-1-bb);A&&(Wa=sa-1-Wa,sb=sa-1-sb);switch(D){case 5:Ha*=sa;bb*=sa;za=za*sa*oa;Za=Za*sa*
oa;break;case 4:za*=sa;Za*=sa;Ha=Ha*sa*ra;bb=bb*sa*ra;break;case 3:Wa*=oa;sb*=oa;za=za*oa*sa;Za=Za*oa*sa;break;case 2:za*=oa;Za*=oa;Wa=Wa*oa*ra;sb=sb*oa*ra;break;case 1:Wa*=ra;sb*=ra;Ha=Ha*ra*sa;bb=bb*ra*sa;break;default:Ha*=ra,bb*=ra,Wa=Wa*ra*oa,sb=sb*ra*oa}ra=wa[za+Ha+Wa];oa=wa[za+Ha+sb];sa=wa[za+bb+Wa];za=wa[za+bb+sb];na=wa[Za+Ha+Wa];Ha=wa[Za+Ha+sb];Wa=wa[Za+bb+Wa];pb=wa[Za+bb+sb];wa=p.create();Za=p.create();bb=p.create();sb=p.create();p.lerp(wa,ra,na,la);p.lerp(Za,oa,Ha,la);p.lerp(bb,sa,Wa,la);
p.lerp(sb,za,pb,la);la=p.create();ra=p.create();p.lerp(la,wa,bb,ka);p.lerp(ra,Za,sb,ka);ka=p.create();p.lerp(ka,la,ra,pa);la=ka}return la};x=d.getDivergence||function(ra,wa){var pa=p.create();p.add(pa,ra,[1E-4,0,0]);var la=C(pa);p.subtract(la,la,wa);p.scale(la,la,1E4);p.add(pa,ra,[0,1E-4,0]);var ka=C(pa);p.subtract(ka,ka,wa);p.scale(ka,ka,1E4);p.add(pa,ra,[0,0,1E-4]);ra=C(pa);p.subtract(ra,ra,wa);p.scale(ra,ra,1E4);p.add(pa,la,ka);p.add(pa,pa,ra);return pa};var v=[],y=e[0][0],F=e[0][1],J=e[0][2],
K=e[1][0],M=e[1][1],H=e[1][2],O=function(ra){var wa=ra[0],pa=ra[1];ra=ra[2];return!(wa<y||wa>K||pa<F||pa>M||ra<J||ra>H)},I=10*p.distance(e[0],e[1])/q,L=I*I;e=1;var Q=0,Z=f.length;1<Z&&(e=r(f));for(var ba=0;ba<Z;ba++){var V=p.create();p.copy(V,f[ba]);var S=[V],T=[],fa=C(V),W=V;T.push(fa);var aa=[],ja=x(V,fa);ja=p.length(ja);isFinite(ja)&&ja>Q&&(Q=ja);aa.push(ja);v.push({points:S,velocities:T,divergences:aa});for(var ma=0;ma<100*q&&S.length<q&&O(V);){ma++;var ia=p.clone(fa);fa=p.squaredLength(ia);if(0===
fa)break;else fa>L&&p.scale(ia,ia,I/Math.sqrt(fa));p.add(ia,ia,V);fa=C(ia);p.squaredDistance(W,ia)-L>-1E-4*L&&(S.push(ia),W=ia,T.push(fa),ja=x(ia,fa),ja=p.length(ja),isFinite(ja)&&ja>Q&&(Q=ja),aa.push(ja));V=ia}}f=m(v,d.colormap,Q,e);w?f.tubeScale=w:(0===Q&&(Q=1),f.tubeScale=.5*t*e/Q);return f};var l=b("./lib/shaders"),c=b("gl-cone3d").createMesh;N.exports.createTubeMesh=function(d,e){return c(d,e,{shaders:l,traceType:"streamtube"})}},{"./lib/shaders":350,"gl-cone3d":268,"gl-vec3":380,"gl-vec4":416}],
353:[function(b,N,G){var p=b("gl-shader");b=b("glslify");var n=b(["precision highp float;\n#define GLSLIFY 1\n\nattribute vec4 uv;\nattribute vec3 f;\nattribute vec3 normal;\n\nuniform vec3 objectOffset;\nuniform mat4 model, view, projection, inverseModel;\nuniform vec3 lightPosition, eyePosition;\nuniform sampler2D colormap;\n\nvarying float value, kill;\nvarying vec3 worldCoordinate;\nvarying vec2 planeCoordinate;\nvarying vec3 lightDirection, eyeDirection, surfaceNormal;\nvarying vec4 vColor;\n\nvoid main() {\n  vec3 localCoordinate \x3d vec3(uv.zw, f.x);\n  worldCoordinate \x3d objectOffset + localCoordinate;\n  vec4 worldPosition \x3d model * vec4(worldCoordinate, 1.0);\n  vec4 clipPosition \x3d projection * view * worldPosition;\n  gl_Position \x3d clipPosition;\n  kill \x3d f.y;\n  value \x3d f.z;\n  planeCoordinate \x3d uv.xy;\n\n  vColor \x3d texture2D(colormap, vec2(value, value));\n\n  //Lighting geometry parameters\n  vec4 cameraCoordinate \x3d view * worldPosition;\n  cameraCoordinate.xyz /\x3d cameraCoordinate.w;\n  lightDirection \x3d lightPosition - cameraCoordinate.xyz;\n  eyeDirection   \x3d eyePosition - cameraCoordinate.xyz;\n  surfaceNormal  \x3d normalize((vec4(normal,0) * inverseModel).xyz);\n}\n"]),
k=b(["precision highp float;\n#define GLSLIFY 1\n\nfloat beckmannDistribution(float x, float roughness) {\n  float NdotH \x3d max(x, 0.0001);\n  float cos2Alpha \x3d NdotH * NdotH;\n  float tan2Alpha \x3d (cos2Alpha - 1.0) / cos2Alpha;\n  float roughness2 \x3d roughness * roughness;\n  float denom \x3d 3.141592653589793 * roughness2 * cos2Alpha * cos2Alpha;\n  return exp(tan2Alpha / roughness2) / denom;\n}\n\nfloat beckmannSpecular(\n  vec3 lightDirection,\n  vec3 viewDirection,\n  vec3 surfaceNormal,\n  float roughness) {\n  return beckmannDistribution(dot(surfaceNormal, normalize(lightDirection + viewDirection)), roughness);\n}\n\nbool outOfRange(float a, float b, float p) {\n  return ((p \x3e max(a, b)) || \n          (p \x3c min(a, b)));\n}\n\nbool outOfRange(vec2 a, vec2 b, vec2 p) {\n  return (outOfRange(a.x, b.x, p.x) ||\n          outOfRange(a.y, b.y, p.y));\n}\n\nbool outOfRange(vec3 a, vec3 b, vec3 p) {\n  return (outOfRange(a.x, b.x, p.x) ||\n          outOfRange(a.y, b.y, p.y) ||\n          outOfRange(a.z, b.z, p.z));\n}\n\nbool outOfRange(vec4 a, vec4 b, vec4 p) {\n  return outOfRange(a.xyz, b.xyz, p.xyz);\n}\n\nuniform vec3 lowerBound, upperBound;\nuniform float contourTint;\nuniform vec4 contourColor;\nuniform sampler2D colormap;\nuniform vec3 clipBounds[2];\nuniform float roughness, fresnel, kambient, kdiffuse, kspecular, opacity;\nuniform float vertexColor;\n\nvarying float value, kill;\nvarying vec3 worldCoordinate;\nvarying vec3 lightDirection, eyeDirection, surfaceNormal;\nvarying vec4 vColor;\n\nvoid main() {\n  if (\n    kill \x3e 0.0 ||\n    vColor.a \x3d\x3d 0.0 ||\n    outOfRange(clipBounds[0], clipBounds[1], worldCoordinate)\n  ) discard;\n\n  vec3 N \x3d normalize(surfaceNormal);\n  vec3 V \x3d normalize(eyeDirection);\n  vec3 L \x3d normalize(lightDirection);\n\n  if(gl_FrontFacing) {\n    N \x3d -N;\n  }\n\n  float specular \x3d max(beckmannSpecular(L, V, N, roughness), 0.);\n  float diffuse  \x3d min(kambient + kdiffuse * max(dot(N, L), 0.0), 1.0);\n\n  //decide how to interpolate color  in vertex or in fragment\n  vec4 surfaceColor \x3d\n    step(vertexColor, .5) * texture2D(colormap, vec2(value, value)) +\n    step(.5, vertexColor) * vColor;\n\n  vec4 litColor \x3d surfaceColor.a * vec4(diffuse * surfaceColor.rgb + kspecular * vec3(1,1,1) * specular,  1.0);\n\n  gl_FragColor \x3d mix(litColor, contourColor, contourTint) * opacity;\n}\n"]),
m=b(["precision highp float;\n#define GLSLIFY 1\n\nattribute vec4 uv;\nattribute float f;\n\nuniform vec3 objectOffset;\nuniform mat3 permutation;\nuniform mat4 model, view, projection;\nuniform float height, zOffset;\nuniform sampler2D colormap;\n\nvarying float value, kill;\nvarying vec3 worldCoordinate;\nvarying vec2 planeCoordinate;\nvarying vec3 lightDirection, eyeDirection, surfaceNormal;\nvarying vec4 vColor;\n\nvoid main() {\n  vec3 dataCoordinate \x3d permutation * vec3(uv.xy, height);\n  worldCoordinate \x3d objectOffset + dataCoordinate;\n  vec4 worldPosition \x3d model * vec4(worldCoordinate, 1.0);\n\n  vec4 clipPosition \x3d projection * view * worldPosition;\n  clipPosition.z +\x3d zOffset;\n\n  gl_Position \x3d clipPosition;\n  value \x3d f + objectOffset.z;\n  kill \x3d -1.0;\n  planeCoordinate \x3d uv.zw;\n\n  vColor \x3d texture2D(colormap, vec2(value, value));\n\n  //Don't do lighting for contours\n  surfaceNormal   \x3d vec3(1,0,0);\n  eyeDirection    \x3d vec3(0,1,0);\n  lightDirection  \x3d vec3(0,0,1);\n}\n"]),
a=b(["precision highp float;\n#define GLSLIFY 1\n\nbool outOfRange(float a, float b, float p) {\n  return ((p \x3e max(a, b)) || \n          (p \x3c min(a, b)));\n}\n\nbool outOfRange(vec2 a, vec2 b, vec2 p) {\n  return (outOfRange(a.x, b.x, p.x) ||\n          outOfRange(a.y, b.y, p.y));\n}\n\nbool outOfRange(vec3 a, vec3 b, vec3 p) {\n  return (outOfRange(a.x, b.x, p.x) ||\n          outOfRange(a.y, b.y, p.y) ||\n          outOfRange(a.z, b.z, p.z));\n}\n\nbool outOfRange(vec4 a, vec4 b, vec4 p) {\n  return outOfRange(a.xyz, b.xyz, p.xyz);\n}\n\nuniform vec2 shape;\nuniform vec3 clipBounds[2];\nuniform float pickId;\n\nvarying float value, kill;\nvarying vec3 worldCoordinate;\nvarying vec2 planeCoordinate;\nvarying vec3 surfaceNormal;\n\nvec2 splitFloat(float v) {\n  float vh \x3d 255.0 * v;\n  float upper \x3d floor(vh);\n  float lower \x3d fract(vh);\n  return vec2(upper / 255.0, floor(lower * 16.0) / 16.0);\n}\n\nvoid main() {\n  if ((kill \x3e 0.0) ||\n      (outOfRange(clipBounds[0], clipBounds[1], worldCoordinate))) discard;\n\n  vec2 ux \x3d splitFloat(planeCoordinate.x / shape.x);\n  vec2 uy \x3d splitFloat(planeCoordinate.y / shape.y);\n  gl_FragColor \x3d vec4(pickId, ux.x, uy.x, ux.y + (uy.y/16.0));\n}\n"]);
G.createShader=function(g){g=p(g,n,k,null,[{name:"uv",type:"vec4"},{name:"f",type:"vec3"},{name:"normal",type:"vec3"}]);g.attributes.uv.location=0;g.attributes.f.location=1;g.attributes.normal.location=2;return g};G.createPickShader=function(g){g=p(g,n,a,null,[{name:"uv",type:"vec4"},{name:"f",type:"vec3"},{name:"normal",type:"vec3"}]);g.attributes.uv.location=0;g.attributes.f.location=1;g.attributes.normal.location=2;return g};G.createContourShader=function(g){g=p(g,m,k,null,[{name:"uv",type:"vec4"},
{name:"f",type:"float"}]);g.attributes.uv.location=0;g.attributes.f.location=1;return g};G.createPickContourShader=function(g){g=p(g,m,a,null,[{name:"uv",type:"vec4"},{name:"f",type:"float"}]);g.attributes.uv.location=0;g.attributes.f.location=1;return g}},{"gl-shader":339,glslify:442}],354:[function(b,N,G){function p(T,fa,W,aa,ja){this.position=T;this.index=fa;this.uv=W;this.level=aa;this.dataCoordinate=ja}function n(T,fa,W,aa,ja,ma,ia,ra,wa,pa,la,ka,na,oa,sa){this.gl=T;this.shape=fa;this.bounds=
W;this.objectOffset=sa;this.intensityBounds=[];this._shader=aa;this._pickShader=ja;this._coordinateBuffer=ma;this._vao=ia;this._colorMap=ra;this._contourShader=wa;this._contourPickShader=pa;this._contourBuffer=la;this._contourVAO=ka;this._contourOffsets=[[],[],[]];this._contourCounts=[[],[],[]];this._vertexCount=0;this._pickResult=new p([0,0,0],[0,0],[0,0],[0,0,0],[0,0,0]);this._dynamicBuffer=na;this._dynamicVAO=oa;this._dynamicOffsets=[0,0,0];this._dynamicCounts=[0,0,0];this.contourWidth=[1,1,1];
this.contourLevels=[[1],[1],[1]];this.contourTint=[0,0,0];this.contourColor=[[.5,.5,.5,1],[.5,.5,.5,1],[.5,.5,.5,1]];this.showSurface=this.showContour=!0;this.enableHighlight=[!0,!0,!0];this.highlightColor=[[0,0,0,1],[0,0,0,1],[0,0,0,1]];this.highlightTint=[1,1,1];this.highlightLevel=[-1,-1,-1];this.enableDynamic=[!0,!0,!0];this.dynamicLevel=[NaN,NaN,NaN];this.dynamicColor=[[0,0,0,1],[0,0,0,1],[0,0,0,1]];this.dynamicTint=[1,1,1];this.dynamicWidth=[1,1,1];this.axesBounds=[[Infinity,Infinity,Infinity],
[-Infinity,-Infinity,-Infinity]];this.surfaceProject=[!1,!1,!1];this.contourProject=[[!1,!1,!1],[!1,!1,!1],[!1,!1,!1]];this.colorBounds=[!1,!1];this._field=[x(f.mallocFloat(1024),[0,0]),x(f.mallocFloat(1024),[0,0]),x(f.mallocFloat(1024),[0,0])];this.pickId=1;this.clipBounds=[[-Infinity,-Infinity,-Infinity],[Infinity,Infinity,Infinity]];this.snapToData=!1;this.opacity=this.pixelRatio=1;this.lightPosition=[10,1E4,0];this.diffuseLight=this.ambientLight=.8;this.specularLight=2;this.roughness=.5;this.fresnel=
1.5;this.vertexColor=0;this.dirty=!0}function k(T,fa){if(!fa||!fa.length)return 1;for(var W=0;W<fa.length&&!(2>fa.length);++W){if(fa[W][0]===T)return fa[W][1];if(fa[W][0]>T&&0<W)return T=(fa[W][0]-T)/(fa[W][0]-fa[W-1][0]),fa[W][1]*(1-T)+T*fa[W-1][1]}return 1}function m(T,fa){var W,aa,ja=fa.axes&&fa.axes.lastCubeProps.axis||L,ma=fa.showSurface,ia=fa.showContour;for(W=0;3>W;++W)for(ma=ma||fa.surfaceProject[W],aa=0;3>aa;++aa)ia=ia||fa.contourProject[W][aa];for(W=0;3>W;++W){var ra=Q.projections[W];for(aa=
0;16>aa;++aa)ra[aa]=0;for(aa=0;4>aa;++aa)ra[5*aa]=1;ra[5*W]=0;ra[12+W]=fa.axesBounds[+(0<ja[W])][W];B(ra,T.model,ra);var wa=Q.clipBounds[W];for(ra=0;2>ra;++ra)for(aa=0;3>aa;++aa)wa[ra][aa]=T.clipBounds[ra][aa];wa[0][W]=-1E8;wa[1][W]=1E8}Q.showSurface=ma;Q.showContour=ia;return Q}function a(T,fa){T=T||{};fa=this.gl;fa.disable(fa.CULL_FACE);this._colorMap.bind(0);var W=Z;W.model=T.model||M;W.view=T.view||M;W.projection=T.projection||M;W.lowerBound=[this.bounds[0][0],this.bounds[0][1],this.colorBounds[0]||
this.bounds[0][2]];W.upperBound=[this.bounds[1][0],this.bounds[1][1],this.colorBounds[1]||this.bounds[1][2]];W.objectOffset=this.objectOffset;W.contourColor=this.contourColor[0];W.inverseModel=A(W.inverseModel,W.model);for(T=0;2>T;++T)for(var aa=W.clipBounds[T],ja=0;3>ja;++ja)aa[ja]=Math.min(Math.max(this.clipBounds[T][ja],-1E8),1E8);W.kambient=this.ambientLight;W.kdiffuse=this.diffuseLight;W.kspecular=this.specularLight;W.roughness=this.roughness;W.fresnel=this.fresnel;W.opacity=this.opacity;W.height=
0;W.permutation=V;W.vertexColor=this.vertexColor;aa=ba;B(aa,W.view,W.model);B(aa,W.projection,aa);A(aa,aa);for(T=0;3>T;++T)W.eyePosition[T]=aa[12+T]/aa[15];var ma=aa[15];for(T=0;3>T;++T)ma+=this.lightPosition[T]*aa[4*T+3];for(T=0;3>T;++T){var ia=aa[12+T];for(ja=0;3>ja;++ja)ia+=aa[4*ja+T]*this.lightPosition[ja];W.lightPosition[T]=ia/ma}aa=m(W,this);if(aa.showSurface){this._shader.bind();this._shader.uniforms=W;this._vao.bind();this.showSurface&&this._vertexCount&&this._vao.draw(fa.TRIANGLES,this._vertexCount);
for(T=0;3>T;++T)this.surfaceProject[T]&&this.vertexCount&&(this._shader.uniforms.model=aa.projections[T],this._shader.uniforms.clipBounds=aa.clipBounds[T],this._vao.draw(fa.TRIANGLES,this._vertexCount));this._vao.unbind()}if(aa.showContour){ma=this._contourShader;W.kambient=1;W.kdiffuse=0;W.kspecular=0;W.opacity=1;ma.bind();ma.uniforms=W;ia=this._contourVAO;ia.bind();for(T=0;3>T;++T)for(ma.uniforms.permutation=O[T],fa.lineWidth(this.contourWidth[T]*this.pixelRatio),ja=0;ja<this.contourLevels[T].length;++ja){if(ja===
this.highlightLevel[T])ma.uniforms.contourColor=this.highlightColor[T],ma.uniforms.contourTint=this.highlightTint[T];else if(0===ja||ja-1===this.highlightLevel[T])ma.uniforms.contourColor=this.contourColor[T],ma.uniforms.contourTint=this.contourTint[T];this._contourCounts[T][ja]&&(ma.uniforms.height=this.contourLevels[T][ja],ia.draw(fa.LINES,this._contourCounts[T][ja],this._contourOffsets[T][ja]))}for(T=0;3>T;++T)for(ma.uniforms.model=aa.projections[T],ma.uniforms.clipBounds=aa.clipBounds[T],ja=0;3>
ja;++ja)if(this.contourProject[T][ja]){ma.uniforms.permutation=O[ja];fa.lineWidth(this.contourWidth[ja]*this.pixelRatio);for(var ra=0;ra<this.contourLevels[ja].length;++ra){if(ra===this.highlightLevel[ja])ma.uniforms.contourColor=this.highlightColor[ja],ma.uniforms.contourTint=this.highlightTint[ja];else if(0===ra||ra-1===this.highlightLevel[ja])ma.uniforms.contourColor=this.contourColor[ja],ma.uniforms.contourTint=this.contourTint[ja];this._contourCounts[ja][ra]&&(ma.uniforms.height=this.contourLevels[ja][ra],
ia.draw(fa.LINES,this._contourCounts[ja][ra],this._contourOffsets[ja][ra]))}}ia.unbind();ia=this._dynamicVAO;ia.bind();for(T=0;3>T;++T)if(0!==this._dynamicCounts[T])for(ma.uniforms.model=W.model,ma.uniforms.clipBounds=W.clipBounds,ma.uniforms.permutation=O[T],fa.lineWidth(this.dynamicWidth[T]*this.pixelRatio),ma.uniforms.contourColor=this.dynamicColor[T],ma.uniforms.contourTint=this.dynamicTint[T],ma.uniforms.height=this.dynamicLevel[T],ia.draw(fa.LINES,this._dynamicCounts[T],this._dynamicOffsets[T]),
ja=0;3>ja;++ja)this.contourProject[ja][T]&&(ma.uniforms.model=aa.projections[ja],ma.uniforms.clipBounds=aa.clipBounds[ja],ia.draw(fa.LINES,this._dynamicCounts[T],this._dynamicOffsets[T]));ia.unbind()}}function g(T,fa){return Array.isArray(T)?[fa(T[0]),fa(T[1]),fa(T[2])]:[fa(T),fa(T),fa(T)]}function h(T){return Array.isArray(T)?3===T.length?[T[0],T[1],T[2],1]:[T[0],T[1],T[2],T[3]]:[0,0,0,1]}function r(T){if(Array.isArray(T)){if(Array.isArray(T))return[h(T[0]),h(T[1]),h(T[2])];T=h(T);return[T.slice(),
T.slice(),T.slice()]}}N.exports=function(T){var fa=T.gl,W=v(fa),aa=F(fa),ja=y(fa),ma=J(fa),ia=c(fa),ra=d(fa,[{buffer:ia,size:4,stride:K,offset:0},{buffer:ia,size:3,stride:K,offset:16},{buffer:ia,size:3,stride:K,offset:28}]),wa=c(fa),pa=d(fa,[{buffer:wa,size:4,stride:20,offset:0},{buffer:wa,size:1,stride:20,offset:16}]),la=c(fa),ka=d(fa,[{buffer:la,size:2,type:fa.FLOAT}]),na=e(fa,1,I,fa.RGBA,fa.UNSIGNED_BYTE);na.minFilter=fa.LINEAR;na.magFilter=fa.LINEAR;fa=new n(fa,[0,0],[[0,0,0],[0,0,0]],W,aa,ia,
ra,na,ja,ma,wa,pa,la,ka,[0,0,0]);W={levels:[[],[],[]]};for(var oa in T)W[oa]=T[oa];W.colormap=W.colormap||"jet";fa.update(W);return fa};var l=b("bit-twiddle"),c=b("gl-buffer"),d=b("gl-vao"),e=b("gl-texture2d"),f=b("typedarray-pool"),q=b("colormap"),t=b("ndarray-ops"),w=b("ndarray-pack"),x=b("ndarray"),z=b("surface-nets"),B=b("gl-mat4/multiply"),A=b("gl-mat4/invert"),D=b("binary-search-bounds"),C=b("ndarray-gradient");b=b("./lib/shaders");var v=b.createShader,y=b.createContourShader,F=b.createPickShader,
J=b.createPickContourShader,K=40,M=[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1],H=[[0,0],[0,1],[1,0],[1,1],[1,0],[0,1]],O=[[0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0]];(function(){for(var T=0;3>T;++T){var fa=O[T],W=(T+2)%3;fa[(T+1)%3]=1;fa[W+3]=1;fa[T+6]=1}})();var I=256;b=n.prototype;b.genColormap=function(T,fa){var W=!1;T=w([q({colormap:T,nshades:I,format:"rgba"}).map(function(aa,ja){ja=fa?k(ja/255,fa):aa[3];1>ja&&(W=!0);return[aa[0],aa[1],aa[2],255*ja]})]);t.divseq(T,255);this.hasAlphaScale=
W;return T};b.isTransparent=function(){return 1>this.opacity||this.hasAlphaScale};b.isOpaque=function(){return!this.isTransparent()};b.pickSlots=1;b.setPickBase=function(T){this.pickId=T};var L=[0,0,0],Q={showSurface:!1,showContour:!1,projections:[M.slice(),M.slice(),M.slice()],clipBounds:[[[0,0,0],[0,0,0]],[[0,0,0],[0,0,0]],[[0,0,0],[0,0,0]]]},Z={model:M,view:M,projection:M,inverseModel:M.slice(),lowerBound:[0,0,0],upperBound:[0,0,0],colorMap:0,clipBounds:[[0,0,0],[0,0,0]],height:0,contourTint:0,
contourColor:[0,0,0,1],permutation:[1,0,0,0,1,0,0,0,1],zOffset:-1E-4,objectOffset:[0,0,0],kambient:1,kdiffuse:1,kspecular:1,lightPosition:[1E3,1E3,1E3],eyePosition:[0,0,0],roughness:1,fresnel:1,opacity:1,vertexColor:0},ba=M.slice(),V=[1,0,0,0,1,0,0,0,1];b.draw=function(T){return a.call(this,T,!1)};b.drawTransparent=function(T){return a.call(this,T,!0)};var S={model:M,view:M,projection:M,inverseModel:M,clipBounds:[[0,0,0],[0,0,0]],height:0,shape:[0,0],pickId:0,lowerBound:[0,0,0],upperBound:[0,0,0],
zOffset:0,objectOffset:[0,0,0],permutation:[1,0,0,0,1,0,0,0,1],lightPosition:[0,0,0],eyePosition:[0,0,0]};b.drawPick=function(T){T=T||{};var fa=this.gl;fa.disable(fa.CULL_FACE);S.model=T.model||M;S.view=T.view||M;S.projection=T.projection||M;S.shape=this._field[2].shape;S.pickId=this.pickId/255;S.lowerBound=this.bounds[0];S.upperBound=this.bounds[1];S.objectOffset=this.objectOffset;S.permutation=V;for(T=0;2>T;++T)for(var W=S.clipBounds[T],aa=0;3>aa;++aa)W[aa]=Math.min(Math.max(this.clipBounds[T][aa],
-1E8),1E8);W=m(S,this);if(W.showSurface){this._pickShader.bind();this._pickShader.uniforms=S;this._vao.bind();this._vao.draw(fa.TRIANGLES,this._vertexCount);for(T=0;3>T;++T)this.surfaceProject[T]&&(this._pickShader.uniforms.model=W.projections[T],this._pickShader.uniforms.clipBounds=W.clipBounds[T],this._vao.draw(fa.TRIANGLES,this._vertexCount));this._vao.unbind()}if(W.showContour){var ja=this._contourPickShader;ja.bind();ja.uniforms=S;var ma=this._contourVAO;ma.bind();for(aa=0;3>aa;++aa)for(fa.lineWidth(this.contourWidth[aa]*
this.pixelRatio),ja.uniforms.permutation=O[aa],T=0;T<this.contourLevels[aa].length;++T)this._contourCounts[aa][T]&&(ja.uniforms.height=this.contourLevels[aa][T],ma.draw(fa.LINES,this._contourCounts[aa][T],this._contourOffsets[aa][T]));for(T=0;3>T;++T)for(ja.uniforms.model=W.projections[T],ja.uniforms.clipBounds=W.clipBounds[T],aa=0;3>aa;++aa)if(this.contourProject[T][aa]){ja.uniforms.permutation=O[aa];fa.lineWidth(this.contourWidth[aa]*this.pixelRatio);for(var ia=0;ia<this.contourLevels[aa].length;++ia)this._contourCounts[aa][ia]&&
(ja.uniforms.height=this.contourLevels[aa][ia],ma.draw(fa.LINES,this._contourCounts[aa][ia],this._contourOffsets[aa][ia]))}ma.unbind()}};b.pick=function(T){if(!T||T.id!==this.pickId)return null;var fa=this._field[2].shape,W=this._pickResult,aa=fa[0]*(T.value[0]+(T.value[2]>>4)/16)/255,ja=Math.floor(aa),ma=aa-ja;T=fa[1]*(T.value[1]+(T.value[2]&15)/16)/255;var ia=Math.floor(T),ra=T-ia;ja+=1;ia+=1;for(var wa=W.position,pa=wa[0]=wa[1]=wa[2]=0;2>pa;++pa)for(var la=pa?ma:1-ma,ka=0;2>ka;++ka)for(var na=
ja+pa,oa=ia+ka,sa=la*(ka?ra:1-ra),za=0;3>za;++za)wa[za]+=this._field[za].get(na,oa)*sa;pa=this._pickResult.level;for(la=0;3>la;++la)pa[la]=D.le(this.contourLevels[la],wa[la]),0>pa[la]?0<this.contourLevels[la].length&&(pa[la]=0):pa[la]<this.contourLevels[la].length-1&&Math.abs(this.contourLevels[la][pa[la]]-wa[la])>Math.abs(this.contourLevels[la][pa[la]+1]-wa[la])&&(pa[la]+=1);W.index[0]=.5>ma?ja:ja+1;W.index[1]=.5>ra?ia:ia+1;W.uv[0]=aa/fa[0];W.uv[1]=T/fa[1];for(za=0;3>za;++za)W.dataCoordinate[za]=
this._field[za].get(W.index[0],W.index[1]);return W};b.padField=function(T,fa){var W=fa.shape.slice(),aa=T.shape.slice();t.assign(T.lo(1,1).hi(W[0],W[1]),fa);t.assign(T.lo(1).hi(W[0],1),fa.hi(W[0],1));t.assign(T.lo(1,aa[1]-1).hi(W[0],1),fa.lo(0,W[1]-1).hi(W[0],1));t.assign(T.lo(0,1).hi(1,W[1]),fa.hi(1));t.assign(T.lo(aa[0]-1,1).hi(1,W[1]),fa.lo(W[0]-1));T.set(0,0,fa.get(0,0));T.set(0,aa[1]-1,fa.get(0,W[1]-1));T.set(aa[0]-1,0,fa.get(W[0]-1,0));T.set(aa[0]-1,aa[1]-1,fa.get(W[0]-1,W[1]-1))};b.update=
function(T){T=T||{};this.objectOffset=T.objectOffset||this.objectOffset;this.dirty=!0;"contourWidth"in T&&(this.contourWidth=g(T.contourWidth,Number));"showContour"in T&&(this.showContour=g(T.showContour,Boolean));"showSurface"in T&&(this.showSurface=!!T.showSurface);"contourTint"in T&&(this.contourTint=g(T.contourTint,Boolean));"contourColor"in T&&(this.contourColor=r(T.contourColor));"contourProject"in T&&(this.contourProject=g(T.contourProject,function(zb){return g(zb,Boolean)}));"surfaceProject"in
T&&(this.surfaceProject=T.surfaceProject);"dynamicColor"in T&&(this.dynamicColor=r(T.dynamicColor));"dynamicTint"in T&&(this.dynamicTint=g(T.dynamicTint,Number));"dynamicWidth"in T&&(this.dynamicWidth=g(T.dynamicWidth,Number));"opacity"in T&&(this.opacity=T.opacity);"opacityscale"in T&&(this.opacityscale=T.opacityscale);"colorBounds"in T&&(this.colorBounds=T.colorBounds);"vertexColor"in T&&(this.vertexColor=T.vertexColor?1:0);"colormap"in T&&this._colorMap.setPixels(this.genColormap(T.colormap,this.opacityscale));
var fa=T.field||T.coords&&T.coords[2]||null,W=!1;fa||(fa=this._field[2].shape[0]||this._field[2].shape[2]?this._field[2].lo(1,1).hi(this._field[2].shape[0]-2,this._field[2].shape[1]-2):this._field[2].hi(0,0));if("field"in T||"coords"in T){var aa=(fa.shape[0]+2)*(fa.shape[1]+2);aa>this._field[2].data.length&&(f.freeFloat(this._field[2].data),this._field[2].data=f.mallocFloat(l.nextPow2(aa)));this._field[2]=x(this._field[2].data,[fa.shape[0]+2,fa.shape[1]+2]);this.padField(this._field[2],fa);aa=this.shape=
fa.shape.slice();for(fa=0;2>fa;++fa)this._field[2].size>this._field[fa].data.length&&(f.freeFloat(this._field[fa].data),this._field[fa].data=f.mallocFloat(this._field[2].size)),this._field[fa]=x(this._field[fa].data,[aa[0]+2,aa[1]+2]);if(T.coords){var ja=T.coords;if(!Array.isArray(ja)||3!==ja.length)throw Error("gl-surface: invalid coordinates for x/y");for(fa=0;2>fa;++fa){var ma=ja[fa];for(ia=0;2>ia;++ia)if(ma.shape[ia]!==aa[ia])throw Error("gl-surface: coords have incorrect shape");this.padField(this._field[fa],
ma)}}else if(T.ticks){ia=T.ticks;if(!Array.isArray(ia)||2!==ia.length)throw Error("gl-surface: invalid ticks");for(fa=0;2>fa;++fa){ja=ia[fa];if(Array.isArray(ja)||ja.length)ja=x(ja);if(ja.shape[0]!==aa[fa])throw Error("gl-surface: invalid tick length");ma=x(ja.data,aa);ma.stride[fa]=ja.stride[0];ma.stride[fa^1]=0;this.padField(this._field[fa],ma)}}else{for(fa=0;2>fa;++fa)ia=[0,0],ia[fa]=1,this._field[fa]=x(this._field[fa].data,[aa[0]+2,aa[1]+2],ia,0);this._field[0].set(0,0,0);for(var ia=0;ia<aa[0];++ia)this._field[0].set(ia+
1,0,ia);this._field[0].set(aa[0]+1,0,aa[0]-1);this._field[1].set(0,0,0);for(ia=0;ia<aa[1];++ia)this._field[1].set(0,ia+1,ia);this._field[1].set(0,aa[1]+1,aa[1]-1)}ia=this._field;ja=x(f.mallocFloat(6*ia[2].size),[3,aa[0]+2,aa[1]+2,2]);for(fa=0;3>fa;++fa)C(ja.pick(fa),ia[fa],"mirror");var ra=x(f.mallocFloat(3*ia[2].size),[aa[0]+2,aa[1]+2,3]);for(fa=0;fa<aa[0]+2;++fa)for(ia=0;ia<aa[1]+2;++ia){ma=ja.get(0,fa,ia,0);var wa=ja.get(0,fa,ia,1),pa=ja.get(1,fa,ia,0),la=ja.get(1,fa,ia,1),ka=ja.get(2,fa,ia,0),
na=ja.get(2,fa,ia,1),oa=pa*na-la*ka;ka=ka*wa-na*ma;na=ma*la-wa*pa;ma=Math.sqrt(oa*oa+ka*ka+na*na);1E-8>ma?(ma=Math.max(Math.abs(oa),Math.abs(ka),Math.abs(na)),1E-8>ma?(na=1,ka=oa=0,ma=1):ma=1/ma):ma=1/Math.sqrt(ma);ra.set(fa,ia,0,oa*ma);ra.set(fa,ia,1,ka*ma);ra.set(fa,ia,2,na*ma)}f.free(ja.data);var sa=[Infinity,Infinity,Infinity],za=[-Infinity,-Infinity,-Infinity],Ha=Infinity,Wa=-Infinity,Za=f.mallocFloat(l.nextPow2((aa[0]-1)*(aa[1]-1)*60)),bb=0;for(fa=ja=0;fa<aa[0]-1;++fa)a:for(ia=0;ia<aa[1]-1;++ia){for(oa=
0;2>oa;++oa)for(ka=0;2>ka;++ka)for(ma=0;3>ma;++ma)if(wa=this._field[ma].get(1+fa+oa,1+ia+ka),isNaN(wa)||!isFinite(wa))continue a;for(ma=0;6>ma;++ma){pa=fa+H[ma][0];la=ia+H[ma][1];var sb=this._field[0].get(pa+1,la+1),hb=this._field[1].get(pa+1,la+1);wa=this._field[2].get(pa+1,la+1);oa=ra.get(pa+1,la+1,0);ka=ra.get(pa+1,la+1,1);na=ra.get(pa+1,la+1,2);T.intensity&&(ub=T.intensity.get(pa,la));var ub=T.intensity?T.intensity.get(pa,la):wa+this.objectOffset[2];Za[bb++]=pa;Za[bb++]=la;Za[bb++]=sb;Za[bb++]=
hb;Za[bb++]=wa;Za[bb++]=0;Za[bb++]=ub;Za[bb++]=oa;Za[bb++]=ka;Za[bb++]=na;sa[0]=Math.min(sa[0],sb+this.objectOffset[0]);sa[1]=Math.min(sa[1],hb+this.objectOffset[1]);sa[2]=Math.min(sa[2],wa+this.objectOffset[2]);Ha=Math.min(Ha,ub);za[0]=Math.max(za[0],sb+this.objectOffset[0]);za[1]=Math.max(za[1],hb+this.objectOffset[1]);za[2]=Math.max(za[2],wa+this.objectOffset[2]);Wa=Math.max(Wa,ub);ja+=1}}T.intensityBounds&&(Ha=+T.intensityBounds[0],Wa=+T.intensityBounds[1]);for(fa=6;fa<bb;fa+=10)Za[fa]=(Za[fa]-
Ha)/(Wa-Ha);this._vertexCount=ja;this._coordinateBuffer.update(Za.subarray(0,bb));f.freeFloat(Za);f.free(ra.data);this.bounds=[sa,za];this.intensity=T.intensity||this._field[2];if(this.intensityBounds[0]!==Ha||this.intensityBounds[1]!==Wa)W=!0;this.intensityBounds=[Ha,Wa]}if("levels"in T){aa=T.levels;aa=Array.isArray(aa[0])?aa.slice():[[],[],aa];for(fa=0;3>fa;++fa)aa[fa]=aa[fa].slice(),aa[fa].sort(function(zb,La){return zb-La});for(fa=0;3>fa;++fa)for(ia=0;ia<aa[fa].length;++ia)aa[fa][ia]-=this.objectOffset[fa];
fa=0;a:for(;3>fa;++fa){if(aa[fa].length!==this.contourLevels[fa].length){W=!0;break}for(ia=0;ia<aa[fa].length;++ia)if(aa[fa][ia]!==this.contourLevels[fa][ia]){W=!0;break a}}this.contourLevels=aa}if(W){ia=this._field;aa=this.shape;W=[];for(T=0;3>T;++T){ra=this.contourLevels[T];na=[];sa=[];za=[0,0,0];for(fa=0;fa<ra.length;++fa){Ha=z(this._field[T],ra[fa]);na.push(W.length/5|0);ia=ja=0;a:for(;ia<Ha.cells.length;++ia)for(Wa=Ha.cells[ia],ma=0;2>ma;++ma){Za=Ha.positions[Wa[ma]];wa=Za[0];bb=Math.floor(wa)|
0;sb=wa-bb;wa=Za[1];hb=Math.floor(wa)|0;ub=wa-hb;var pb=!1,Ab=0;b:for(;3>Ab;++Ab){za[Ab]=0;var tb=(T+Ab+1)%3;for(oa=0;2>oa;++oa){var vb=oa?sb:1-sb;pa=Math.min(Math.max(bb+oa,0),aa[0])|0;for(ka=0;2>ka;++ka){var qb=ka?ub:1-ub;la=Math.min(Math.max(hb+ka,0),aa[1])|0;wa=2>Ab?this._field[tb].get(pa,la):(this.intensity.get(pa,la)-this.intensityBounds[0])/(this.intensityBounds[1]-this.intensityBounds[0]);if(!isFinite(wa)||isNaN(wa)){pb=!0;break b}za[Ab]+=vb*qb*wa}}}if(pb){if(0<ma){for(ma=0;5>ma;++ma)W.pop();
--ja}continue a}else W.push(za[0],za[1],Za[0],Za[1],za[2]),ja+=1}sa.push(ja)}this._contourOffsets[T]=na;this._contourCounts[T]=sa}aa=f.mallocFloat(W.length);for(fa=0;fa<W.length;++fa)aa[fa]=W[fa];this._contourBuffer.update(aa);f.freeFloat(aa)}};b.dispose=function(){this._shader.dispose();this._vao.dispose();this._coordinateBuffer.dispose();this._colorMap.dispose();this._contourBuffer.dispose();this._contourVAO.dispose();this._contourShader.dispose();this._contourPickShader.dispose();this._dynamicBuffer.dispose();
this._dynamicVAO.dispose();for(var T=0;3>T;++T)f.freeFloat(this._field[T].data)};b.highlight=function(T){var fa;if(T){for(fa=0;3>fa;++fa)this.highlightLevel[fa]=this.enableHighlight[fa]?T.level[fa]:-1;T=this.snapToData?T.dataCoordinate:T.position;for(fa=0;3>fa;++fa)T[fa]-=this.objectOffset[fa];if(this.enableDynamic[0]&&T[0]!==this.dynamicLevel[0]||this.enableDynamic[1]&&T[1]!==this.dynamicLevel[1]||this.enableDynamic[2]&&T[2]!==this.dynamicLevel[2]){for(var W=0,aa=this.shape,ja=f.mallocFloat(12*aa[0]*
aa[1]),ma=0;3>ma;++ma)if(this.enableDynamic[ma]){this.dynamicLevel[ma]=T[ma];var ia=this._field[(ma+1)%3],ra=this._field[(ma+2)%3];fa=z(this._field[ma],T[ma]);var wa=fa.cells,pa=fa.positions;this._dynamicOffsets[ma]=W;for(fa=0;fa<wa.length;++fa)for(var la=wa[fa],ka=0;2>ka;++ka){var na=pa[la[ka]],oa=+na[0],sa=oa|0,za=Math.min(sa+1,aa[0])|0,Ha=oa-sa,Wa=1-Ha,Za=+na[1];na=Za|0;oa=Math.min(na+1,aa[1])|0;var bb=Za-na,sb=1-bb;Za=Wa*sb;Wa*=bb;sb*=Ha;bb*=Ha;Ha=Za*ia.get(sa,na)+Wa*ia.get(sa,oa)+sb*ia.get(za,
na)+bb*ia.get(za,oa);sa=Za*ra.get(sa,na)+Wa*ra.get(sa,oa)+sb*ra.get(za,na)+bb*ra.get(za,oa);if(isNaN(Ha)||isNaN(sa)){ka&&--W;break}ja[2*W]=Ha;ja[2*W+1]=sa;W+=1}this._dynamicCounts[ma]=W-this._dynamicOffsets[ma]}else this.dynamicLevel[ma]=NaN,this._dynamicCounts[ma]=0;this._dynamicBuffer.update(ja.subarray(0,2*W));f.freeFloat(ja)}}else this._dynamicCounts=[0,0,0],this.dyanamicLevel=[NaN,NaN,NaN],this.highlightLevel=[-1,-1,-1]}},{"./lib/shaders":353,"binary-search-bounds":103,"bit-twiddle":104,colormap:137,
"gl-buffer":267,"gl-mat4/invert":299,"gl-mat4/multiply":301,"gl-texture2d":356,"gl-vao":361,ndarray:483,"ndarray-gradient":476,"ndarray-ops":478,"ndarray-pack":479,"surface-nets":591,"typedarray-pool":617}],355:[function(b,N,G){var p=b("css-font"),n=b("pick-by-alias"),k=b("regl"),m=b("gl-util/context");G=b("es6-weak-map");var a=b("color-normalize"),g=b("font-atlas"),h=b("typedarray-pool"),r=b("parse-rect"),l=b("is-plain-obj"),c=b("parse-unit"),d=b("to-px"),e=b("detect-kerning"),f=b("object-assign"),
q=b("font-measure"),t=b("flatten-vertex-data"),w=b("bit-twiddle").nextPow2,x=new G,z=!1;document.body&&(b=document.body.appendChild(document.createElement("div")),b.style.font="italic small-caps bold condensed 16px/2 cursive",getComputedStyle(b).fontStretch&&(z=!0),document.body.removeChild(b));var B=function(A){"function"===typeof A&&A._gl&&A.prop&&A.texture&&A.buffer?(A={regl:A},this.gl=A.regl._gl):this.gl=m(A);this.regl=(this.shader=x.get(this.gl))?this.shader.regl:A.regl||k({gl:this.gl});this.charBuffer=
this.regl.buffer({type:"uint8",usage:"stream"});this.sizeBuffer=this.regl.buffer({type:"float",usage:"stream"});this.shader||(this.shader=this.createShader(),x.set(this.gl,this.shader));this.batch=[];this.fontSize=[];this.font=[];this.fontAtlas=[];this.draw=this.shader.draw.bind(this);this.render=function(){this.regl._refresh();this.draw(this.batch)};this.canvas=this.gl.canvas;this.update(l(A)?A:{})};B.prototype.createShader=function(){var A=this.regl,D=A({blend:{enable:!0,color:[0,0,0,1],func:{srcRGB:"src alpha",
dstRGB:"one minus src alpha",srcAlpha:"one minus dst alpha",dstAlpha:"one"}},stencil:{enable:!1},depth:{enable:!1},count:A.prop("count"),offset:A.prop("offset"),attributes:{charOffset:{offset:4,stride:8,buffer:A.this("sizeBuffer")},width:{offset:0,stride:8,buffer:A.this("sizeBuffer")},char:A.this("charBuffer"),position:A.this("position")},uniforms:{atlasSize:function(C,v){return[v.atlas.width,v.atlas.height]},atlasDim:function(C,v){return[v.atlas.cols,v.atlas.rows]},atlas:function(C,v){return v.atlas.texture},
charStep:function(C,v){return v.atlas.step},em:function(C,v){return v.atlas.em},color:A.prop("color"),opacity:A.prop("opacity"),viewport:A.this("viewportArray"),scale:A.this("scale"),align:A.prop("align"),baseline:A.prop("baseline"),translate:A.this("translate"),positionOffset:A.prop("positionOffset")},primitive:"points",viewport:A.this("viewport"),vert:"\n\t\t\tprecision highp float;\n\t\t\tattribute float width, charOffset, char;\n\t\t\tattribute vec2 position;\n\t\t\tuniform float fontSize, charStep, em, align, baseline;\n\t\t\tuniform vec4 viewport;\n\t\t\tuniform vec4 color;\n\t\t\tuniform vec2 atlasSize, atlasDim, scale, translate, positionOffset;\n\t\t\tvarying vec2 charCoord, charId;\n\t\t\tvarying float charWidth;\n\t\t\tvarying vec4 fontColor;\n\t\t\tvoid main () {\n\t\t\t\t"+
(B.normalViewport?"":"vec2 positionOffset \x3d vec2(positionOffset.x,- positionOffset.y);")+"\n\n\t\t\t\tvec2 offset \x3d floor(em * (vec2(align + charOffset, baseline)\n\t\t\t\t\t+ positionOffset))\n\t\t\t\t\t/ (viewport.zw * scale.xy);\n\n\t\t\t\tvec2 position \x3d (position + translate) * scale;\n\t\t\t\tposition +\x3d offset * scale;\n\n\t\t\t\t"+(B.normalViewport?"position.y \x3d 1. - position.y;":"")+"\n\n\t\t\t\tcharCoord \x3d position * viewport.zw + viewport.xy;\n\n\t\t\t\tgl_Position \x3d vec4(position * 2. - 1., 0, 1);\n\n\t\t\t\tgl_PointSize \x3d charStep;\n\n\t\t\t\tcharId.x \x3d mod(char, atlasDim.x);\n\t\t\t\tcharId.y \x3d floor(char / atlasDim.x);\n\n\t\t\t\tcharWidth \x3d width * em;\n\n\t\t\t\tfontColor \x3d color / 255.;\n\t\t\t}",
frag:"\n\t\t\tprecision highp float;\n\t\t\tuniform sampler2D atlas;\n\t\t\tuniform float fontSize, charStep, opacity;\n\t\t\tuniform vec2 atlasSize;\n\t\t\tuniform vec4 viewport;\n\t\t\tvarying vec4 fontColor;\n\t\t\tvarying vec2 charCoord, charId;\n\t\t\tvarying float charWidth;\n\n\t\t\tfloat lightness(vec4 color) {\n\t\t\t\treturn color.r * 0.299 + color.g * 0.587 + color.b * 0.114;\n\t\t\t}\n\n\t\t\tvoid main () {\n\t\t\t\tvec2 uv \x3d gl_FragCoord.xy - charCoord + charStep * .5;\n\t\t\t\tfloat halfCharStep \x3d floor(charStep * .5 + .5);\n\n\t\t\t\t// invert y and shift by 1px (FF expecially needs that)\n\t\t\t\tuv.y \x3d charStep - uv.y;\n\n\t\t\t\t// ignore points outside of character bounding box\n\t\t\t\tfloat halfCharWidth \x3d ceil(charWidth * .5);\n\t\t\t\tif (floor(uv.x) \x3e halfCharStep + halfCharWidth ||\n\t\t\t\t\tfloor(uv.x) \x3c halfCharStep - halfCharWidth) return;\n\n\t\t\t\tuv +\x3d charId * charStep;\n\t\t\t\tuv \x3d uv / atlasSize;\n\n\t\t\t\tvec4 color \x3d fontColor;\n\t\t\t\tvec4 mask \x3d texture2D(atlas, uv);\n\n\t\t\t\tfloat maskY \x3d lightness(mask);\n\t\t\t\t// float colorY \x3d lightness(color);\n\t\t\t\tcolor.a *\x3d maskY;\n\t\t\t\tcolor.a *\x3d opacity;\n\n\t\t\t\t// color.a +\x3d .1;\n\n\t\t\t\t// antialiasing, see yiq color space y-channel formula\n\t\t\t\t// color.rgb +\x3d (1. - color.rgb) * (1. - mask.rgb);\n\n\t\t\t\tgl_FragColor \x3d color;\n\t\t\t}"});
return{regl:A,draw:D,atlas:{}}};B.prototype.update=function(A){var D=this;if("string"===typeof A)A={text:A};else if(!A)return;A=n(A,{position:"position positions coord coords coordinates",font:"font fontFace fontface typeface cssFont css-font family fontFamily",fontSize:"fontSize fontsize size font-size",text:"text texts chars characters value values symbols",align:"align alignment textAlign textbaseline",baseline:"baseline textBaseline textbaseline",direction:"dir direction textDirection",color:"color colour fill fill-color fillColor textColor textcolor",
kerning:"kerning kern",range:"range dataBox",viewport:"vp viewport viewBox viewbox viewPort",opacity:"opacity alpha transparency visible visibility opaque",offset:"offset positionOffset padding shift indent indentation"},!0);null!=A.opacity&&(Array.isArray(A.opacity)?this.opacity=A.opacity.map(function(V){return parseFloat(V)}):this.opacity=parseFloat(A.opacity));null!=A.viewport&&(this.viewport=r(A.viewport),B.normalViewport&&(this.viewport.y=this.canvas.height-this.viewport.y-this.viewport.height),
this.viewportArray=[this.viewport.x,this.viewport.y,this.viewport.width,this.viewport.height]);null==this.viewport&&(this.viewport={x:0,y:0,width:this.gl.drawingBufferWidth,height:this.gl.drawingBufferHeight},this.viewportArray=[this.viewport.x,this.viewport.y,this.viewport.width,this.viewport.height]);null!=A.kerning&&(this.kerning=A.kerning);null!=A.offset&&("number"===typeof A.offset&&(A.offset=[A.offset,0]),this.positionOffset=t(A.offset));A.direction&&(this.direction=A.direction);A.range&&(this.range=
A.range,this.scale=[1/(A.range[2]-A.range[0]),1/(A.range[3]-A.range[1])],this.translate=[-A.range[0],-A.range[1]]);A.scale&&(this.scale=A.scale);A.translate&&(this.translate=A.translate);this.scale||(this.scale=[1/this.viewport.width,1/this.viewport.height]);this.translate||(this.translate=[0,0]);this.font.length||A.font||(A.font=B.baseFontSize+"px sans-serif");var C=!1,v=!1;A.font&&(Array.isArray(A.font)?A.font:[A.font]).forEach(function(V,S){if("string"===typeof V)try{V=p.parse(V)}catch(aa){V=p.parse(B.baseFontSize+
"px "+V)}else V=p.parse(p.stringify(V));var T=p.stringify({size:B.baseFontSize,family:V.family,stretch:z?V.stretch:void 0,variant:V.variant,weight:V.weight,style:V.style}),fa=c(V.size);fa=Math.round(fa[0]*d(fa[1]));fa!==D.fontSize[S]&&(v=!0,D.fontSize[S]=fa);if(!D.font[S]||T!=D.font[S].baseString)if(C=!0,D.font[S]=B.fonts[T],!D.font[S]){fa=V.family.join(", ");var W=[V.style];V.style!=V.variant&&W.push(V.variant);V.variant!=V.weight&&W.push(V.weight);z&&V.weight!=V.stretch&&W.push(V.stretch);D.font[S]=
{baseString:T,family:fa,weight:V.weight,stretch:V.stretch,style:V.style,variant:V.variant,width:{},kerning:{},metrics:q(fa,{origin:"top",fontSize:B.baseFontSize,fontStyle:W.join(" ")})};B.fonts[T]=D.font[S]}});(C||v)&&this.font.forEach(function(V,S){var T=p.stringify({size:D.fontSize[S],family:V.family,stretch:z?V.stretch:void 0,variant:V.variant,weight:V.weight,style:V.style});D.fontAtlas[S]=D.shader.atlas[T];D.fontAtlas[S]||(D.shader.atlas[T]=D.fontAtlas[S]={fontString:T,step:2*Math.ceil(D.fontSize[S]*
V.metrics.bottom*.5),em:D.fontSize[S],cols:0,rows:0,height:0,width:0,chars:[],ids:{},texture:D.regl.texture()});null==A.text&&(A.text=D.text)});if("string"===typeof A.text&&A.position&&2<A.position.length){for(var y=Array(.5*A.position.length),F=0;F<y.length;F++)y[F]=A.text;A.text=y}if(null!=A.text||C){this.textOffsets=[0];if(Array.isArray(A.text)){this.count=A.text[0].length;this.counts=[this.count];for(y=1;y<A.text.length;y++)this.textOffsets[y]=this.textOffsets[y-1]+A.text[y-1].length,this.count+=
A.text[y].length,this.counts.push(A.text[y].length);this.text=A.text.join("")}else this.text=A.text,this.count=this.text.length,this.counts=[this.count];var J=[];this.font.forEach(function(V,S){B.atlasContext.font=V.baseString;S=D.fontAtlas[S];for(var T=0;T<D.text.length;T++){var fa=D.text.charAt(T);null==S.ids[fa]&&(S.ids[fa]=S.chars.length,S.chars.push(fa),J.push(fa));if(null==V.width[fa]&&(V.width[fa]=B.atlasContext.measureText(fa).width/B.baseFontSize,D.kerning)){var W=[],aa;for(aa in V.width)W.push(aa+
fa,fa+aa);f(V.kerning,e(V.family,{pairs:W}))}}})}if(A.position)if(2<A.position.length){y=!A.position[0].length;F=h.mallocFloat(2*this.count);for(var K=0,M=0;K<this.counts.length;K++){var H=this.counts[K];if(y)for(var O=0;O<H;O++)F[M++]=A.position[2*K],F[M++]=A.position[2*K+1];else for(O=0;O<H;O++)F[M++]=A.position[K][0],F[M++]=A.position[K][1]}this.position.call?this.position({type:"float",data:F}):this.position=this.regl.buffer({type:"float",data:F});h.freeFloat(F)}else this.position.destroy&&this.position.destroy(),
this.position={constant:A.position};if(A.text||C){y=h.mallocUint8(this.count);F=h.mallocFloat(2*this.count);this.textWidth=[];for(M=K=0;K<this.counts.length;K++){H=this.counts[K];O=this.font[K]||this.font[0];for(var I=this.fontAtlas[K]||this.fontAtlas[0],L=0;L<H;L++){var Q=this.text.charAt(M),Z=this.text.charAt(M-1);y[M]=I.ids[Q];F[2*M]=O.width[Q];if(L){var ba=F[2*M-1]+.5*F[2*M-2]+.5*F[2*M];this.kerning&&(Q=O.kerning[Z+Q])&&(ba+=.001*Q);F[2*M+1]=ba}else F[2*M+1]=.5*F[2*M];M++}this.textWidth.push(F.length?
.5*F[2*M-2]+F[2*M-1]:0)}A.align||(A.align=this.align);this.charBuffer({data:y,type:"uint8",usage:"stream"});this.sizeBuffer({data:F,type:"float",usage:"stream"});h.freeUint8(y);h.freeFloat(F);J.length&&this.font.forEach(function(V,S){V=D.fontAtlas[S];S=V.step;var T=Math.min(Math.floor(B.maxAtlasSize/S),V.chars.length),fa=Math.ceil(V.chars.length/T),W=w(T*S),aa=w(fa*S);V.width=W;V.height=aa;V.rows=fa;V.cols=T;V.em&&V.texture({data:g({canvas:B.atlasCanvas,font:V.fontString,chars:V.chars,shape:[W,aa],
step:[S,S]})})})}A.align&&(this.align=A.align,this.alignOffset=this.textWidth.map(function(V,S){S=Array.isArray(D.align)?1<D.align.length?D.align[S]:D.align[0]:D.align;if("number"===typeof S)return S;switch(S){case "right":case "end":return-V;case "center":case "centre":case "middle":return.5*-V}return 0}));null==this.baseline&&null==A.baseline&&(A.baseline=0);null!=A.baseline&&(this.baseline=A.baseline,Array.isArray(this.baseline)||(this.baseline=[this.baseline]),this.baselineOffset=this.baseline.map(function(V,
S){S=(D.font[S]||D.font[0]).metrics;var T=.5*S.bottom;T="number"===typeof V?T+(V-S.baseline):T+-S[V];B.normalViewport||(T*=-1);return T}));if(null!=A.color)if(A.color||(A.color="transparent"),"string"!==typeof A.color&&isNaN(A.color)){if("number"===typeof A.color[0]&&A.color.length>this.counts.length)for(F=A.color.length,y=h.mallocUint8(F),K=(A.color.subarray||A.color.slice).bind(A.color),M=0;M<F;M+=4)y.set(a(K(M,M+4),"uint8"),M);else for(F=A.color.length,y=h.mallocUint8(4*F),K=0;K<F;K++)y.set(a(A.color[K]||
0,"uint8"),4*K);this.color=y}else this.color=a(A.color,"uint8");if(A.position||A.text||A.color||A.baseline||A.align||A.font||A.offset||A.opacity)if(4<this.color.length||1<this.baselineOffset.length||this.align&&1<this.align.length||1<this.fontAtlas.length||2<this.positionOffset.length)for(this.batch=Array(Math.max(.5*this.position.length||0,.25*this.color.length||0,this.baselineOffset.length||0,this.alignOffset.length||0,this.font.length||0,this.opacity.length||0,.5*this.positionOffset.length||0)),
y=0;y<this.batch.length;y++)this.batch[y]={count:1<this.counts.length?this.counts[y]:this.counts[0],offset:1<this.textOffsets.length?this.textOffsets[y]:this.textOffsets[0],color:this.color?4>=this.color.length?this.color:this.color.subarray(4*y,4*y+4):[0,0,0,255],opacity:Array.isArray(this.opacity)?this.opacity[y]:this.opacity,baseline:null!=this.baselineOffset[y]?this.baselineOffset[y]:this.baselineOffset[0],align:this.align?null!=this.alignOffset[y]?this.alignOffset[y]:this.alignOffset[0]:0,atlas:this.fontAtlas[y]||
this.fontAtlas[0],positionOffset:2<this.positionOffset.length?this.positionOffset.subarray(2*y,2*y+2):this.positionOffset};else this.batch=this.count?[{count:this.count,offset:0,color:this.color||[0,0,0,255],opacity:Array.isArray(this.opacity)?this.opacity[0]:this.opacity,baseline:this.baselineOffset[0],align:this.alignOffset?this.alignOffset[0]:0,atlas:this.fontAtlas[0],positionOffset:this.positionOffset}]:[]};B.prototype.destroy=function(){};B.prototype.kerning=!0;B.prototype.position={constant:new Float32Array(2)};
B.prototype.translate=null;B.prototype.scale=null;B.prototype.font=null;B.prototype.text="";B.prototype.positionOffset=[0,0];B.prototype.opacity=1;B.prototype.color=new Uint8Array([0,0,0,255]);B.prototype.alignOffset=[0,0];B.normalViewport=!1;B.maxAtlasSize=1024;B.atlasCanvas=document.createElement("canvas");B.atlasContext=B.atlasCanvas.getContext("2d",{alpha:!1});B.baseFontSize=64;B.fonts={};N.exports=B},{"bit-twiddle":104,"color-normalize":131,"css-font":150,"detect-kerning":181,"es6-weak-map":241,
"flatten-vertex-data":252,"font-atlas":253,"font-measure":254,"gl-util/context":357,"is-plain-obj":457,"object-assign":487,"parse-rect":492,"parse-unit":494,"pick-by-alias":498,regl:540,"to-px":600,"typedarray-pool":617}],356:[function(b,N,G){function p(f){return"undefined"!=typeof HTMLCanvasElement&&f instanceof HTMLCanvasElement||"undefined"!=typeof HTMLImageElement&&f instanceof HTMLImageElement||"undefined"!=typeof HTMLVideoElement&&f instanceof HTMLVideoElement||"undefined"!=typeof ImageData&&
f instanceof ImageData}function n(f,q,t){var w=f.gl,x=w.getParameter(w.MAX_TEXTURE_SIZE);if(0>q||q>x||0>t||t>x)throw Error("gl-texture2d: Invalid texture size");f._shape=[q,t];f.bind();w.texImage2D(w.TEXTURE_2D,0,f.format,q,t,0,f.format,f.type,null);f._mipLevels=[0];return f}function k(f,q,t,w,x,z){this.gl=f;this.handle=q;this.format=x;this.type=z;this._shape=[t,w];this._mipLevels=[0];this._minFilter=this._magFilter=f.NEAREST;this._wrapT=this._wrapS=f.CLAMP_TO_EDGE;this._anisoSamples=1;var B=this;
f=[this._wrapS,this._wrapT];Object.defineProperties(f,[{get:function(){return B._wrapS},set:function(A){return B.wrapS=A}},{get:function(){return B._wrapT},set:function(A){return B.wrapT=A}}]);this._wrapVector=f;f=[this._shape[0],this._shape[1]];Object.defineProperties(f,[{get:function(){return B._shape[0]},set:function(A){return B.width=A}},{get:function(){return B._shape[1]},set:function(A){return B.height=A}}]);this._shapeVector=f}function m(f,q){return 3===f.length?1===q[2]&&q[1]===f[0]*f[2]&&
q[0]===f[2]:1===q[0]&&q[1]===f[0]}function a(f){var q=f.createTexture();f.bindTexture(f.TEXTURE_2D,q);f.texParameteri(f.TEXTURE_2D,f.TEXTURE_MIN_FILTER,f.NEAREST);f.texParameteri(f.TEXTURE_2D,f.TEXTURE_MAG_FILTER,f.NEAREST);f.texParameteri(f.TEXTURE_2D,f.TEXTURE_WRAP_S,f.CLAMP_TO_EDGE);f.texParameteri(f.TEXTURE_2D,f.TEXTURE_WRAP_T,f.CLAMP_TO_EDGE);return q}function g(f,q,t,w,x){var z=f.getParameter(f.MAX_TEXTURE_SIZE);if(0>q||q>z||0>t||t>z)throw Error("gl-texture2d: Invalid texture shape");if(x===
f.FLOAT&&!f.getExtension("OES_texture_float"))throw Error("gl-texture2d: Floating point textures not supported on this platform");z=a(f);f.texImage2D(f.TEXTURE_2D,0,w,q,t,0,w,x,null);return new k(f,z,q,t,w,x)}var h=b("ndarray"),r=b("ndarray-ops"),l=b("typedarray-pool");N.exports=function(f){if(1>=arguments.length)throw Error("gl-texture2d: Missing arguments for texture2d constructor");c||(c=[f.LINEAR,f.NEAREST_MIPMAP_LINEAR,f.LINEAR_MIPMAP_NEAREST,f.LINEAR_MIPMAP_NEAREST],d=[f.NEAREST,f.LINEAR,f.NEAREST_MIPMAP_NEAREST,
f.NEAREST_MIPMAP_LINEAR,f.LINEAR_MIPMAP_NEAREST,f.LINEAR_MIPMAP_LINEAR],e=[f.REPEAT,f.CLAMP_TO_EDGE,f.MIRRORED_REPEAT]);if("number"===typeof arguments[1])return g(f,arguments[1],arguments[2],arguments[3]||f.RGBA,arguments[4]||f.UNSIGNED_BYTE);if(Array.isArray(arguments[1]))return g(f,arguments[1][0]|0,arguments[1][1]|0,arguments[2]||f.RGBA,arguments[3]||f.UNSIGNED_BYTE);if("object"===typeof arguments[1]){var q=arguments[1],t=p(q)?q:q.raw;if(t){var w=q.width|0;q=q.height|0;var x=arguments[2]||f.RGBA,
z=arguments[3]||f.UNSIGNED_BYTE,B=a(f);f.texImage2D(f.TEXTURE_2D,0,x,x,z,t);return new k(f,B,w,q,x,z)}if(q.shape&&q.data&&q.stride){B=q;var A=B.dtype;t=B.shape.slice();q=f.getParameter(f.MAX_TEXTURE_SIZE);if(0>t[0]||t[0]>q||0>t[1]||t[1]>q)throw Error("gl-texture2d: Invalid texture size");q=m(t,B.stride.slice());"float32"===A?x=f.FLOAT:"float64"===A?(x=f.FLOAT,q=!1,A="float32"):"uint8"===A?x=f.UNSIGNED_BYTE:(x=f.UNSIGNED_BYTE,q=!1,A="uint8");if(2===t.length)z=f.LUMINANCE,t=[t[0],t[1],1],B=h(B.data,
t,[B.stride[0],B.stride[1],1],B.offset);else if(3===t.length)if(1===t[2])z=f.ALPHA;else if(2===t[2])z=f.LUMINANCE_ALPHA;else if(3===t[2])z=f.RGB;else if(4===t[2])z=f.RGBA;else throw Error("gl-texture2d: Invalid shape for pixel coords");else throw Error("gl-texture2d: Invalid shape for texture");x!==f.FLOAT||f.getExtension("OES_texture_float")||(x=f.UNSIGNED_BYTE,q=!1);var D=B.size;if(q)B=0===B.offset&&B.data.length===D?B.data:B.data.subarray(B.offset,B.offset+D);else{var C=[t[2],t[2]*t[0],1];w=l.malloc(D,
A);C=h(w,t,C,0);"float32"!==A&&"float64"!==A||x!==f.UNSIGNED_BYTE?r.assign(C,B):r.muls(C,B,255);B=w.subarray(0,D)}A=a(f);f.texImage2D(f.TEXTURE_2D,0,z,t[0],t[1],0,z,x,B);q||l.free(w);return new k(f,A,t[0],t[1],z,x)}}throw Error("gl-texture2d: Invalid arguments for texture2d constructor");};var c=null,d=null,e=null;b=k.prototype;Object.defineProperties(b,{minFilter:{get:function(){return this._minFilter},set:function(f){this.bind();var q=this.gl;this.type===q.FLOAT&&0<=c.indexOf(f)&&!q.getExtension("OES_texture_float_linear")&&
(f=q.NEAREST);if(0>d.indexOf(f))throw Error("gl-texture2d: Unknown filter mode "+f);q.texParameteri(q.TEXTURE_2D,q.TEXTURE_MIN_FILTER,f);return this._minFilter=f}},magFilter:{get:function(){return this._magFilter},set:function(f){this.bind();var q=this.gl;this.type===q.FLOAT&&0<=c.indexOf(f)&&!q.getExtension("OES_texture_float_linear")&&(f=q.NEAREST);if(0>d.indexOf(f))throw Error("gl-texture2d: Unknown filter mode "+f);q.texParameteri(q.TEXTURE_2D,q.TEXTURE_MAG_FILTER,f);return this._magFilter=f}},
mipSamples:{get:function(){return this._anisoSamples},set:function(f){var q=this._anisoSamples;this._anisoSamples=Math.max(f,1)|0;q!==this._anisoSamples&&(f=this.gl.getExtension("EXT_texture_filter_anisotropic"))&&this.gl.texParameterf(this.gl.TEXTURE_2D,f.TEXTURE_MAX_ANISOTROPY_EXT,this._anisoSamples);return this._anisoSamples}},wrapS:{get:function(){return this._wrapS},set:function(f){this.bind();if(0>e.indexOf(f))throw Error("gl-texture2d: Unknown wrap mode "+f);this.gl.texParameteri(this.gl.TEXTURE_2D,
this.gl.TEXTURE_WRAP_S,f);return this._wrapS=f}},wrapT:{get:function(){return this._wrapT},set:function(f){this.bind();if(0>e.indexOf(f))throw Error("gl-texture2d: Unknown wrap mode "+f);this.gl.texParameteri(this.gl.TEXTURE_2D,this.gl.TEXTURE_WRAP_T,f);return this._wrapT=f}},wrap:{get:function(){return this._wrapVector},set:function(f){Array.isArray(f)||(f=[f,f]);if(2!==f.length)throw Error("gl-texture2d: Must specify wrap mode for rows and columns");for(var q=0;2>q;++q)if(0>e.indexOf(f[q]))throw Error("gl-texture2d: Unknown wrap mode "+
f);this._wrapS=f[0];this._wrapT=f[1];q=this.gl;this.bind();q.texParameteri(q.TEXTURE_2D,q.TEXTURE_WRAP_S,this._wrapS);q.texParameteri(q.TEXTURE_2D,q.TEXTURE_WRAP_T,this._wrapT);return f}},shape:{get:function(){return this._shapeVector},set:function(f){if(!Array.isArray(f))f=[f|0,f|0];else if(2!==f.length)throw Error("gl-texture2d: Invalid texture shape");n(this,f[0]|0,f[1]|0);return[f[0]|0,f[1]|0]}},width:{get:function(){return this._shape[0]},set:function(f){f|=0;n(this,f,this._shape[1]);return f}},
height:{get:function(){return this._shape[1]},set:function(f){f|=0;n(this,this._shape[0],f);return f}}});b.bind=function(f){var q=this.gl;void 0!==f&&q.activeTexture(q.TEXTURE0+(f|0));q.bindTexture(q.TEXTURE_2D,this.handle);return void 0!==f?f|0:q.getParameter(q.ACTIVE_TEXTURE)-q.TEXTURE0};b.dispose=function(){this.gl.deleteTexture(this.handle)};b.generateMipmap=function(){this.bind();this.gl.generateMipmap(this.gl.TEXTURE_2D);for(var f=Math.min(this._shape[0],this._shape[1]),q=0;0<f;++q,f>>>=1)0>
this._mipLevels.indexOf(q)&&this._mipLevels.push(q)};b.setPixels=function(f,q,t,w){var x=this.gl;this.bind();Array.isArray(q)?(w=t,t=q[1]|0,q=q[0]|0):(q=q||0,t=t||0);w=w||0;var z=p(f)?f:f.raw;if(z)0>this._mipLevels.indexOf(w)?(x.texImage2D(x.TEXTURE_2D,0,this.format,this.format,this.type,z),this._mipLevels.push(w)):x.texSubImage2D(x.TEXTURE_2D,w,q,t,this.format,this.type,z);else if(f.shape&&f.stride&&f.data){if(2>f.shape.length||q+f.shape[1]>this._shape[1]>>>w||t+f.shape[0]>this._shape[0]>>>w||0>
q||0>t)throw Error("gl-texture2d: Texture dimensions are out of bounds");z=this.format;var B=this.type,A=this._mipLevels,D=f.dtype,C=f.shape.slice();if(2>C.length||3<C.length)throw Error("gl-texture2d: Invalid ndarray, must be 2d or 3d");var v=m(C,f.stride.slice());"float32"===D?D=x.FLOAT:"float64"===D?(D=x.FLOAT,v=!1):"uint8"===D?D=x.UNSIGNED_BYTE:(D=x.UNSIGNED_BYTE,v=!1);if(2===C.length){var y=x.LUMINANCE;C=[C[0],C[1],1];f=h(f.data,C,[f.stride[0],f.stride[1],1],f.offset)}else if(3===C.length)if(1===
C[2])y=x.ALPHA;else if(2===C[2])y=x.LUMINANCE_ALPHA;else if(3===C[2])y=x.RGB;else if(4===C[2])y=x.RGBA;else throw Error("gl-texture2d: Invalid shape for pixel coords");else throw Error("gl-texture2d: Invalid shape for texture");y!==x.LUMINANCE&&y!==x.ALPHA||z!==x.LUMINANCE&&z!==x.ALPHA||(y=z);if(y!==z)throw Error("gl-texture2d: Incompatible texture format for setPixels");y=f.size;var F=0>A.indexOf(w);F&&A.push(w);D===B&&v?0===f.offset&&f.data.length===y?F?x.texImage2D(x.TEXTURE_2D,w,z,C[0],C[1],0,
z,B,f.data):x.texSubImage2D(x.TEXTURE_2D,w,q,t,C[0],C[1],z,B,f.data):F?x.texImage2D(x.TEXTURE_2D,w,z,C[0],C[1],0,z,B,f.data.subarray(f.offset,f.offset+y)):x.texSubImage2D(x.TEXTURE_2D,w,q,t,C[0],C[1],z,B,f.data.subarray(f.offset,f.offset+y)):(A=B===x.FLOAT?l.mallocFloat32(y):l.mallocUint8(y),v=h(A,C,[C[2],C[2]*C[0],1]),D===x.FLOAT&&B===x.UNSIGNED_BYTE?r.muls(v,f,255):r.assign(v,f),F?x.texImage2D(x.TEXTURE_2D,w,z,C[0],C[1],0,z,B,A.subarray(0,y)):x.texSubImage2D(x.TEXTURE_2D,w,q,t,C[0],C[1],z,B,A.subarray(0,
y)),B===x.FLOAT?l.freeFloat32(A):l.freeUint8(A))}else throw Error("gl-texture2d: Unsupported data type");}},{ndarray:483,"ndarray-ops":478,"typedarray-pool":617}],357:[function(b,N,G){(function(p){(function(){function n(g){if(g.container)if(g.container==document.body)document.body.style.width||(g.canvas.width=g.width||g.pixelRatio*p.innerWidth),document.body.style.height||(g.canvas.height=g.height||g.pixelRatio*p.innerHeight);else{var h=g.container.getBoundingClientRect();g.canvas.width=g.width||
h.right-h.left;g.canvas.height=g.height||h.bottom-h.top}}function k(g){return"function"===typeof g.getContext&&"width"in g&&"height"in g}function m(){var g=document.createElement("canvas");g.style.position="absolute";g.style.top=0;g.style.left=0;return g}var a=b("pick-by-alias");N.exports=function(g){g?"string"===typeof g&&(g={container:g}):g={};g=k(g)?{container:g}:"string"===typeof g.nodeName&&"function"===typeof g.appendChild&&"function"===typeof g.getBoundingClientRect?{container:g}:"function"===
typeof g.drawArrays||"function"===typeof g.drawElements?{gl:g}:a(g,{container:"container target element el canvas holder parent parentNode wrapper use ref root node",gl:"gl context webgl glContext",attrs:"attributes attrs contextAttributes",pixelRatio:"pixelRatio pxRatio px ratio pxratio pixelratio",width:"w width",height:"h height"},!0);g.pixelRatio||(g.pixelRatio=p.pixelRatio||1);if(g.gl)return g.gl;g.canvas&&(g.container=g.canvas.parentNode);if(g.container){if("string"===typeof g.container){var h=
document.querySelector(g.container);if(!h)throw Error("Element "+g.container+" is not found");g.container=h}k(g.container)?(g.canvas=g.container,g.container=g.canvas.parentNode):g.canvas||(g.canvas=m(),g.container.appendChild(g.canvas),n(g))}else if(!g.canvas)if("undefined"!==typeof document)g.container=document.body||document.documentElement,g.canvas=m(),g.container.appendChild(g.canvas),n(g);else throw Error("Not DOM environment. Use headless-gl.");if(!g.gl)try{g.gl=g.canvas.getContext("webgl",
g.attrs)}catch(r){try{g.gl=g.canvas.getContext("experimental-webgl",g.attrs)}catch(l){g.gl=g.canvas.getContext("webgl-experimental",g.attrs)}}return g.gl}}).call(this)}).call(this,"undefined"!==typeof xe?xe:"undefined"!==typeof self?self:"undefined"!==typeof window?window:{})},{"pick-by-alias":498}],358:[function(b,N,G){N.exports=function(p,n,k){n?n.bind():p.bindBuffer(p.ELEMENT_ARRAY_BUFFER,null);n=p.getParameter(p.MAX_VERTEX_ATTRIBS)|0;if(k){if(k.length>n)throw Error("gl-vao: Too many vertex attributes");
for(var m=0;m<k.length;++m){var a=k[m];if(a.buffer){var g=a.size||4,h=a.type||p.FLOAT,r=!!a.normalized,l=a.stride||0,c=a.offset||0;a.buffer.bind();p.enableVertexAttribArray(m);p.vertexAttribPointer(m,g,h,r,l,c)}else{if("number"===typeof a)p.vertexAttrib1f(m,a);else if(1===a.length)p.vertexAttrib1f(m,a[0]);else if(2===a.length)p.vertexAttrib2f(m,a[0],a[1]);else if(3===a.length)p.vertexAttrib3f(m,a[0],a[1],a[2]);else if(4===a.length)p.vertexAttrib4f(m,a[0],a[1],a[2],a[3]);else throw Error("gl-vao: Invalid vertex attribute");
p.disableVertexAttribArray(m)}}}else p.bindBuffer(p.ARRAY_BUFFER,null),m=0;for(;m<n;++m)p.disableVertexAttribArray(m)}},{}],359:[function(b,N,G){function p(k){this.gl=k;this._attributes=this._elements=null;this._elementsType=k.UNSIGNED_SHORT}var n=b("./do-bind.js");p.prototype.bind=function(){n(this.gl,this._elements,this._attributes)};p.prototype.update=function(k,m,a){this._elements=m;this._attributes=k;this._elementsType=a||this.gl.UNSIGNED_SHORT};p.prototype.dispose=function(){};p.prototype.unbind=
function(){};p.prototype.draw=function(k,m,a){a=a||0;var g=this.gl;this._elements?g.drawElements(k,m,this._elementsType,a):g.drawArrays(k,a,m)};N.exports=function(k){return new p(k)}},{"./do-bind.js":358}],360:[function(b,N,G){function p(m,a,g,h,r,l){this.location=m;this.dimension=a;this.a=g;this.b=h;this.c=r;this.d=l}function n(m,a,g){this.gl=m;this._ext=a;this.handle=g;this._attribs=[];this._useElements=!1;this._elementsType=m.UNSIGNED_SHORT}var k=b("./do-bind.js");p.prototype.bind=function(m){switch(this.dimension){case 1:m.vertexAttrib1f(this.location,
this.a);break;case 2:m.vertexAttrib2f(this.location,this.a,this.b);break;case 3:m.vertexAttrib3f(this.location,this.a,this.b,this.c);break;case 4:m.vertexAttrib4f(this.location,this.a,this.b,this.c,this.d)}};n.prototype.bind=function(){this._ext.bindVertexArrayOES(this.handle);for(var m=0;m<this._attribs.length;++m)this._attribs[m].bind(this.gl)};n.prototype.unbind=function(){this._ext.bindVertexArrayOES(null)};n.prototype.dispose=function(){this._ext.deleteVertexArrayOES(this.handle)};n.prototype.update=
function(m,a,g){this.bind();k(this.gl,a,m);this.unbind();this._attribs.length=0;if(m)for(var h=0;h<m.length;++h){var r=m[h];"number"===typeof r?this._attribs.push(new p(h,1,r)):Array.isArray(r)&&this._attribs.push(new p(h,r.length,r[0],r[1],r[2],r[3]))}this._useElements=!!a;this._elementsType=g||this.gl.UNSIGNED_SHORT};n.prototype.draw=function(m,a,g){g=g||0;var h=this.gl;this._useElements?h.drawElements(m,a,this._elementsType,g):h.drawArrays(m,g,a)};N.exports=function(m,a){return new n(m,a,a.createVertexArrayOES())}},
{"./do-bind.js":358}],361:[function(b,N,G){function p(m){this.bindVertexArrayOES=m.bindVertexArray.bind(m);this.createVertexArrayOES=m.createVertexArray.bind(m);this.deleteVertexArrayOES=m.deleteVertexArray.bind(m)}var n=b("./lib/vao-native.js"),k=b("./lib/vao-emulated.js");N.exports=function(m,a,g,h){var r=m.createVertexArray?new p(m):m.getExtension("OES_vertex_array_object");m=r?n(m,r):k(m);m.update(a,g,h);return m}},{"./lib/vao-emulated.js":359,"./lib/vao-native.js":360}],362:[function(b,N,G){N.exports=
function(p,n,k){p[0]=n[0]+k[0];p[1]=n[1]+k[1];p[2]=n[2]+k[2];return p}},{}],363:[function(b,N,G){N.exports=function(m,a){m=p(m[0],m[1],m[2]);a=p(a[0],a[1],a[2]);n(m,m);n(a,a);a=k(m,a);return 1<a?0:Math.acos(a)};var p=b("./fromValues"),n=b("./normalize"),k=b("./dot")},{"./dot":373,"./fromValues":379,"./normalize":390}],364:[function(b,N,G){N.exports=function(p,n){p[0]=Math.ceil(n[0]);p[1]=Math.ceil(n[1]);p[2]=Math.ceil(n[2]);return p}},{}],365:[function(b,N,G){N.exports=function(p){var n=new Float32Array(3);
n[0]=p[0];n[1]=p[1];n[2]=p[2];return n}},{}],366:[function(b,N,G){N.exports=function(p,n){p[0]=n[0];p[1]=n[1];p[2]=n[2];return p}},{}],367:[function(b,N,G){N.exports=function(){var p=new Float32Array(3);p[0]=0;p[1]=0;p[2]=0;return p}},{}],368:[function(b,N,G){N.exports=function(p,n,k){var m=n[0],a=n[1];n=n[2];var g=k[0],h=k[1];k=k[2];p[0]=a*k-n*h;p[1]=n*g-m*k;p[2]=m*h-a*g;return p}},{}],369:[function(b,N,G){N.exports=b("./distance")},{"./distance":370}],370:[function(b,N,G){N.exports=function(p,n){var k=
n[0]-p[0],m=n[1]-p[1];p=n[2]-p[2];return Math.sqrt(k*k+m*m+p*p)}},{}],371:[function(b,N,G){N.exports=b("./divide")},{"./divide":372}],372:[function(b,N,G){N.exports=function(p,n,k){p[0]=n[0]/k[0];p[1]=n[1]/k[1];p[2]=n[2]/k[2];return p}},{}],373:[function(b,N,G){N.exports=function(p,n){return p[0]*n[0]+p[1]*n[1]+p[2]*n[2]}},{}],374:[function(b,N,G){N.exports=1E-6},{}],375:[function(b,N,G){N.exports=function(n,k){var m=n[0],a=n[1];n=n[2];var g=k[0],h=k[1];k=k[2];return Math.abs(m-g)<=p*Math.max(1,Math.abs(m),
Math.abs(g))&&Math.abs(a-h)<=p*Math.max(1,Math.abs(a),Math.abs(h))&&Math.abs(n-k)<=p*Math.max(1,Math.abs(n),Math.abs(k))};var p=b("./epsilon")},{"./epsilon":374}],376:[function(b,N,G){N.exports=function(p,n){return p[0]===n[0]&&p[1]===n[1]&&p[2]===n[2]}},{}],377:[function(b,N,G){N.exports=function(p,n){p[0]=Math.floor(n[0]);p[1]=Math.floor(n[1]);p[2]=Math.floor(n[2]);return p}},{}],378:[function(b,N,G){N.exports=function(n,k,m,a,g,h){k||(k=3);m||(m=0);for(a=a?Math.min(a*k+m,n.length):n.length;m<a;m+=
k)p[0]=n[m],p[1]=n[m+1],p[2]=n[m+2],g(p,p,h),n[m]=p[0],n[m+1]=p[1],n[m+2]=p[2];return n};var p=b("./create")()},{"./create":367}],379:[function(b,N,G){N.exports=function(p,n,k){var m=new Float32Array(3);m[0]=p;m[1]=n;m[2]=k;return m}},{}],380:[function(b,N,G){N.exports={EPSILON:b("./epsilon"),create:b("./create"),clone:b("./clone"),angle:b("./angle"),fromValues:b("./fromValues"),copy:b("./copy"),set:b("./set"),equals:b("./equals"),exactEquals:b("./exactEquals"),add:b("./add"),subtract:b("./subtract"),
sub:b("./sub"),multiply:b("./multiply"),mul:b("./mul"),divide:b("./divide"),div:b("./div"),min:b("./min"),max:b("./max"),floor:b("./floor"),ceil:b("./ceil"),round:b("./round"),scale:b("./scale"),scaleAndAdd:b("./scaleAndAdd"),distance:b("./distance"),dist:b("./dist"),squaredDistance:b("./squaredDistance"),sqrDist:b("./sqrDist"),length:b("./length"),len:b("./len"),squaredLength:b("./squaredLength"),sqrLen:b("./sqrLen"),negate:b("./negate"),inverse:b("./inverse"),normalize:b("./normalize"),dot:b("./dot"),
cross:b("./cross"),lerp:b("./lerp"),random:b("./random"),transformMat4:b("./transformMat4"),transformMat3:b("./transformMat3"),transformQuat:b("./transformQuat"),rotateX:b("./rotateX"),rotateY:b("./rotateY"),rotateZ:b("./rotateZ"),forEach:b("./forEach")}},{"./add":362,"./angle":363,"./ceil":364,"./clone":365,"./copy":366,"./create":367,"./cross":368,"./dist":369,"./distance":370,"./div":371,"./divide":372,"./dot":373,"./epsilon":374,"./equals":375,"./exactEquals":376,"./floor":377,"./forEach":378,
"./fromValues":379,"./inverse":381,"./len":382,"./length":383,"./lerp":384,"./max":385,"./min":386,"./mul":387,"./multiply":388,"./negate":389,"./normalize":390,"./random":391,"./rotateX":392,"./rotateY":393,"./rotateZ":394,"./round":395,"./scale":396,"./scaleAndAdd":397,"./set":398,"./sqrDist":399,"./sqrLen":400,"./squaredDistance":401,"./squaredLength":402,"./sub":403,"./subtract":404,"./transformMat3":405,"./transformMat4":406,"./transformQuat":407}],381:[function(b,N,G){N.exports=function(p,n){p[0]=
1/n[0];p[1]=1/n[1];p[2]=1/n[2];return p}},{}],382:[function(b,N,G){N.exports=b("./length")},{"./length":383}],383:[function(b,N,G){N.exports=function(p){var n=p[0],k=p[1];p=p[2];return Math.sqrt(n*n+k*k+p*p)}},{}],384:[function(b,N,G){N.exports=function(p,n,k,m){var a=n[0],g=n[1];n=n[2];p[0]=a+m*(k[0]-a);p[1]=g+m*(k[1]-g);p[2]=n+m*(k[2]-n);return p}},{}],385:[function(b,N,G){N.exports=function(p,n,k){p[0]=Math.max(n[0],k[0]);p[1]=Math.max(n[1],k[1]);p[2]=Math.max(n[2],k[2]);return p}},{}],386:[function(b,
N,G){N.exports=function(p,n,k){p[0]=Math.min(n[0],k[0]);p[1]=Math.min(n[1],k[1]);p[2]=Math.min(n[2],k[2]);return p}},{}],387:[function(b,N,G){N.exports=b("./multiply")},{"./multiply":388}],388:[function(b,N,G){N.exports=function(p,n,k){p[0]=n[0]*k[0];p[1]=n[1]*k[1];p[2]=n[2]*k[2];return p}},{}],389:[function(b,N,G){N.exports=function(p,n){p[0]=-n[0];p[1]=-n[1];p[2]=-n[2];return p}},{}],390:[function(b,N,G){N.exports=function(p,n){var k=n[0],m=n[1],a=n[2];k=k*k+m*m+a*a;0<k&&(k=1/Math.sqrt(k),p[0]=
n[0]*k,p[1]=n[1]*k,p[2]=n[2]*k);return p}},{}],391:[function(b,N,G){N.exports=function(p,n){n=n||1;var k=2*Math.random()*Math.PI,m=2*Math.random()-1,a=Math.sqrt(1-m*m)*n;p[0]=Math.cos(k)*a;p[1]=Math.sin(k)*a;p[2]=m*n;return p}},{}],392:[function(b,N,G){N.exports=function(p,n,k,m){var a=k[1];k=k[2];var g=n[1]-a,h=n[2]-k,r=Math.sin(m);m=Math.cos(m);p[0]=n[0];p[1]=a+g*m-h*r;p[2]=k+g*r+h*m;return p}},{}],393:[function(b,N,G){N.exports=function(p,n,k,m){var a=k[0];k=k[2];var g=n[0]-a,h=n[2]-k,r=Math.sin(m);
m=Math.cos(m);p[0]=a+h*r+g*m;p[1]=n[1];p[2]=k+h*m-g*r;return p}},{}],394:[function(b,N,G){N.exports=function(p,n,k,m){var a=k[0];k=k[1];var g=n[0]-a,h=n[1]-k,r=Math.sin(m);m=Math.cos(m);p[0]=a+g*m-h*r;p[1]=k+g*r+h*m;p[2]=n[2];return p}},{}],395:[function(b,N,G){N.exports=function(p,n){p[0]=Math.round(n[0]);p[1]=Math.round(n[1]);p[2]=Math.round(n[2]);return p}},{}],396:[function(b,N,G){N.exports=function(p,n,k){p[0]=n[0]*k;p[1]=n[1]*k;p[2]=n[2]*k;return p}},{}],397:[function(b,N,G){N.exports=function(p,
n,k,m){p[0]=n[0]+k[0]*m;p[1]=n[1]+k[1]*m;p[2]=n[2]+k[2]*m;return p}},{}],398:[function(b,N,G){N.exports=function(p,n,k,m){p[0]=n;p[1]=k;p[2]=m;return p}},{}],399:[function(b,N,G){N.exports=b("./squaredDistance")},{"./squaredDistance":401}],400:[function(b,N,G){N.exports=b("./squaredLength")},{"./squaredLength":402}],401:[function(b,N,G){N.exports=function(p,n){var k=n[0]-p[0],m=n[1]-p[1];p=n[2]-p[2];return k*k+m*m+p*p}},{}],402:[function(b,N,G){N.exports=function(p){var n=p[0],k=p[1];p=p[2];return n*
n+k*k+p*p}},{}],403:[function(b,N,G){N.exports=b("./subtract")},{"./subtract":404}],404:[function(b,N,G){N.exports=function(p,n,k){p[0]=n[0]-k[0];p[1]=n[1]-k[1];p[2]=n[2]-k[2];return p}},{}],405:[function(b,N,G){N.exports=function(p,n,k){var m=n[0],a=n[1];n=n[2];p[0]=m*k[0]+a*k[3]+n*k[6];p[1]=m*k[1]+a*k[4]+n*k[7];p[2]=m*k[2]+a*k[5]+n*k[8];return p}},{}],406:[function(b,N,G){N.exports=function(p,n,k){var m=n[0],a=n[1];n=n[2];var g=k[3]*m+k[7]*a+k[11]*n+k[15];g=g||1;p[0]=(k[0]*m+k[4]*a+k[8]*n+k[12])/
g;p[1]=(k[1]*m+k[5]*a+k[9]*n+k[13])/g;p[2]=(k[2]*m+k[6]*a+k[10]*n+k[14])/g;return p}},{}],407:[function(b,N,G){N.exports=function(p,n,k){var m=n[0],a=n[1],g=n[2];n=k[0];var h=k[1],r=k[2];k=k[3];var l=k*m+h*g-r*a,c=k*a+r*m-n*g,d=k*g+n*a-h*m;m=-n*m-h*a-r*g;p[0]=l*k+m*-n+c*-r-d*-h;p[1]=c*k+m*-h+d*-n-l*-r;p[2]=d*k+m*-r+l*-h-c*-n;return p}},{}],408:[function(b,N,G){N.exports=function(p,n,k){p[0]=n[0]+k[0];p[1]=n[1]+k[1];p[2]=n[2]+k[2];p[3]=n[3]+k[3];return p}},{}],409:[function(b,N,G){N.exports=function(p){var n=
new Float32Array(4);n[0]=p[0];n[1]=p[1];n[2]=p[2];n[3]=p[3];return n}},{}],410:[function(b,N,G){N.exports=function(p,n){p[0]=n[0];p[1]=n[1];p[2]=n[2];p[3]=n[3];return p}},{}],411:[function(b,N,G){N.exports=function(){var p=new Float32Array(4);p[0]=0;p[1]=0;p[2]=0;p[3]=0;return p}},{}],412:[function(b,N,G){N.exports=function(p,n){var k=n[0]-p[0],m=n[1]-p[1],a=n[2]-p[2];p=n[3]-p[3];return Math.sqrt(k*k+m*m+a*a+p*p)}},{}],413:[function(b,N,G){N.exports=function(p,n,k){p[0]=n[0]/k[0];p[1]=n[1]/k[1];p[2]=
n[2]/k[2];p[3]=n[3]/k[3];return p}},{}],414:[function(b,N,G){N.exports=function(p,n){return p[0]*n[0]+p[1]*n[1]+p[2]*n[2]+p[3]*n[3]}},{}],415:[function(b,N,G){N.exports=function(p,n,k,m){var a=new Float32Array(4);a[0]=p;a[1]=n;a[2]=k;a[3]=m;return a}},{}],416:[function(b,N,G){N.exports={create:b("./create"),clone:b("./clone"),fromValues:b("./fromValues"),copy:b("./copy"),set:b("./set"),add:b("./add"),subtract:b("./subtract"),multiply:b("./multiply"),divide:b("./divide"),min:b("./min"),max:b("./max"),
scale:b("./scale"),scaleAndAdd:b("./scaleAndAdd"),distance:b("./distance"),squaredDistance:b("./squaredDistance"),length:b("./length"),squaredLength:b("./squaredLength"),negate:b("./negate"),inverse:b("./inverse"),normalize:b("./normalize"),dot:b("./dot"),lerp:b("./lerp"),random:b("./random"),transformMat4:b("./transformMat4"),transformQuat:b("./transformQuat")}},{"./add":408,"./clone":409,"./copy":410,"./create":411,"./distance":412,"./divide":413,"./dot":414,"./fromValues":415,"./inverse":417,"./length":418,
"./lerp":419,"./max":420,"./min":421,"./multiply":422,"./negate":423,"./normalize":424,"./random":425,"./scale":426,"./scaleAndAdd":427,"./set":428,"./squaredDistance":429,"./squaredLength":430,"./subtract":431,"./transformMat4":432,"./transformQuat":433}],417:[function(b,N,G){N.exports=function(p,n){p[0]=1/n[0];p[1]=1/n[1];p[2]=1/n[2];p[3]=1/n[3];return p}},{}],418:[function(b,N,G){N.exports=function(p){var n=p[0],k=p[1],m=p[2];p=p[3];return Math.sqrt(n*n+k*k+m*m+p*p)}},{}],419:[function(b,N,G){N.exports=
function(p,n,k,m){var a=n[0],g=n[1],h=n[2];n=n[3];p[0]=a+m*(k[0]-a);p[1]=g+m*(k[1]-g);p[2]=h+m*(k[2]-h);p[3]=n+m*(k[3]-n);return p}},{}],420:[function(b,N,G){N.exports=function(p,n,k){p[0]=Math.max(n[0],k[0]);p[1]=Math.max(n[1],k[1]);p[2]=Math.max(n[2],k[2]);p[3]=Math.max(n[3],k[3]);return p}},{}],421:[function(b,N,G){N.exports=function(p,n,k){p[0]=Math.min(n[0],k[0]);p[1]=Math.min(n[1],k[1]);p[2]=Math.min(n[2],k[2]);p[3]=Math.min(n[3],k[3]);return p}},{}],422:[function(b,N,G){N.exports=function(p,
n,k){p[0]=n[0]*k[0];p[1]=n[1]*k[1];p[2]=n[2]*k[2];p[3]=n[3]*k[3];return p}},{}],423:[function(b,N,G){N.exports=function(p,n){p[0]=-n[0];p[1]=-n[1];p[2]=-n[2];p[3]=-n[3];return p}},{}],424:[function(b,N,G){N.exports=function(p,n){var k=n[0],m=n[1],a=n[2];n=n[3];var g=k*k+m*m+a*a+n*n;0<g&&(g=1/Math.sqrt(g),p[0]=k*g,p[1]=m*g,p[2]=a*g,p[3]=n*g);return p}},{}],425:[function(b,N,G){var p=b("./normalize"),n=b("./scale");N.exports=function(k,m){m=m||1;k[0]=Math.random();k[1]=Math.random();k[2]=Math.random();
k[3]=Math.random();p(k,k);n(k,k,m);return k}},{"./normalize":424,"./scale":426}],426:[function(b,N,G){N.exports=function(p,n,k){p[0]=n[0]*k;p[1]=n[1]*k;p[2]=n[2]*k;p[3]=n[3]*k;return p}},{}],427:[function(b,N,G){N.exports=function(p,n,k,m){p[0]=n[0]+k[0]*m;p[1]=n[1]+k[1]*m;p[2]=n[2]+k[2]*m;p[3]=n[3]+k[3]*m;return p}},{}],428:[function(b,N,G){N.exports=function(p,n,k,m,a){p[0]=n;p[1]=k;p[2]=m;p[3]=a;return p}},{}],429:[function(b,N,G){N.exports=function(p,n){var k=n[0]-p[0],m=n[1]-p[1],a=n[2]-p[2];
p=n[3]-p[3];return k*k+m*m+a*a+p*p}},{}],430:[function(b,N,G){N.exports=function(p){var n=p[0],k=p[1],m=p[2];p=p[3];return n*n+k*k+m*m+p*p}},{}],431:[function(b,N,G){N.exports=function(p,n,k){p[0]=n[0]-k[0];p[1]=n[1]-k[1];p[2]=n[2]-k[2];p[3]=n[3]-k[3];return p}},{}],432:[function(b,N,G){N.exports=function(p,n,k){var m=n[0],a=n[1],g=n[2];n=n[3];p[0]=k[0]*m+k[4]*a+k[8]*g+k[12]*n;p[1]=k[1]*m+k[5]*a+k[9]*g+k[13]*n;p[2]=k[2]*m+k[6]*a+k[10]*g+k[14]*n;p[3]=k[3]*m+k[7]*a+k[11]*g+k[15]*n;return p}},{}],433:[function(b,
N,G){N.exports=function(p,n,k){var m=n[0],a=n[1],g=n[2],h=k[0],r=k[1],l=k[2];k=k[3];var c=k*m+r*g-l*a,d=k*a+l*m-h*g,e=k*g+h*a-r*m;m=-h*m-r*a-l*g;p[0]=c*k+m*-h+d*-l-e*-r;p[1]=d*k+m*-r+e*-h-c*-l;p[2]=e*k+m*-l+c*-r-d*-h;p[3]=n[3];return p}},{}],434:[function(b,N,G){var p=b("glsl-tokenizer"),n=b("atob-lite");N.exports=function(k){k=Array.isArray(k)?k:p(k);for(var m=0;m<k.length;m++){var a=k[m];if("preprocessor"===a.type&&(a=a.data.match(/#define\s+SHADER_NAME(_B64)?\s+(.+)$/))&&a[2])return k=a[2],(a[1]?
n(k):k).trim()}}},{"atob-lite":84,"glsl-tokenizer":441}],435:[function(b,N,G){N.exports=function(D){function C(pa){pa.length&&ba.push({type:A[I],data:pa,position:T,line:V,column:S})}function v(){Z=Z.length?[]:Z;if("/"===Q&&"*"===L)return T=O+H-1,I=r,Q=L,H+1;if("/"===Q&&"/"===L)return T=O+H-1,I=l,Q=L,H+1;if("#"===L)return I=c,T=O+H,H;if(/\s/.test(L))return I=x,T=O+H,H;fa=/\d/.test(L);W=/[^\w_]/.test(L);T=O+H;I=fa?e:W?d:h;return H}function y(){if(("\r"===L||"\n"===L)&&"\\"!==Q)return C(Z.join("")),
I=g,H;Z.push(L);Q=L;return H+1}function F(){if("."===Q&&/\d/.test(L))return I=f,H;if("/"===Q&&"*"===L)return I=r,H;if("/"===Q&&"/"===L)return I=l,H;if("."===L&&Z.length){for(;J(Z););I=f;return H}if(";"===L||")"===L||"("===L){if(Z.length)for(;J(Z););C(L);I=g;return H+1}var pa=2===Z.length&&"\x3d"!==L;if(/[\w_\d\s]/.test(L)||pa){for(;J(Z););I=g;return H}Z.push(L);Q=L;return H+1}function J(pa){var la=0;do{var ka=n.indexOf(pa.slice(0,pa.length+la).join(""));var na=n[ka];if(-1===ka){if(0<la--+pa.length)continue;
na=pa.slice(0,1).join("")}C(na);T+=na.length;Z=Z.slice(na.length);return Z.length}while(1)}function K(){if("."===L||/[eE]/.test(L))return Z.push(L),I=f,Q=L,H+1;if("x"===L&&1===Z.length&&"0"===Z[0])return I=B,Z.push(L),Q=L,H+1;if(/[^\d]/.test(L))return C(Z.join("")),I=g,H;Z.push(L);Q=L;return H+1}function M(){"f"===L&&(Z.push(L),Q=L,H+=1);if(/[eE]/.test(L)||("-"===L||"+"===L)&&/[eE]/.test(Q))return Z.push(L),Q=L,H+1;if(/[^\d]/.test(L))return C(Z.join("")),I=g,H;Z.push(L);Q=L;return H+1}var H=0,O=0,
I=g,L,Q,Z=[],ba=[],V=1,S=0,T=0,fa=!1,W=!1,aa="",ja;D=D||{};var ma=k,ia=p;"300 es"===D.version&&(ma=a,ia=m);var ra={},wa={};for(H=0;H<ma.length;H++)ra[ma[H]]=!0;for(H=0;H<ia.length;H++)wa[ia[H]]=!0;return function(pa){ba=[];if(null!==pa){H=0;pa.toString&&(pa=pa.toString());aa+=pa.replace(/\r\n/g,"\n");for(ja=aa.length;L=aa[H],H<ja;){pa=H;switch(I){case r:"/"===L&&"*"===Q?(Z.push(L),C(Z.join("")),I=g):(Z.push(L),Q=L);H+=1;break;case l:H=y();break;case c:H=y();break;case d:H=F();break;case e:H=K();break;
case B:/[^a-fA-F0-9]/.test(L)?(C(Z.join("")),I=g):(Z.push(L),Q=L,H+=1);break;case f:H=M();break;case h:if(/[^\d\w_]/.test(L)){var la=Z.join("");I=wa[la]?w:ra[la]?t:q;C(Z.join(""));I=g}else Z.push(L),Q=L,H+=1;break;case x:/[^\s]/g.test(L)?(C(Z.join("")),I=g):(Z.push(L),Q=L,H+=1);break;case g:H=v()}if(pa!==H)switch(aa[pa]){case "\n":S=0;++V;break;default:++S}}O+=H;aa=aa.slice(H);return ba}Z.length&&C(Z.join(""));I=z;C("(eof)");return ba}};var p=b("./lib/literals"),n=b("./lib/operators"),k=b("./lib/builtins"),
m=b("./lib/literals-300es"),a=b("./lib/builtins-300es"),g=999,h=9999,r=0,l=1,c=2,d=3,e=4,f=5,q=6,t=7,w=8,x=9,z=10,B=11,A="block-comment line-comment preprocessor operator integer float ident builtin keyword whitespace eof integer".split(" ")},{"./lib/builtins":437,"./lib/builtins-300es":436,"./lib/literals":439,"./lib/literals-300es":438,"./lib/operators":440}],436:[function(b,N,G){b=b("./builtins");b=b.slice().filter(function(p){return!/^(gl_|texture)/.test(p)});N.exports=b.concat("gl_VertexID gl_InstanceID gl_Position gl_PointSize gl_FragCoord gl_FrontFacing gl_FragDepth gl_PointCoord gl_MaxVertexAttribs gl_MaxVertexUniformVectors gl_MaxVertexOutputVectors gl_MaxFragmentInputVectors gl_MaxVertexTextureImageUnits gl_MaxCombinedTextureImageUnits gl_MaxTextureImageUnits gl_MaxFragmentUniformVectors gl_MaxDrawBuffers gl_MinProgramTexelOffset gl_MaxProgramTexelOffset gl_DepthRangeParameters gl_DepthRange trunc round roundEven isnan isinf floatBitsToInt floatBitsToUint intBitsToFloat uintBitsToFloat packSnorm2x16 unpackSnorm2x16 packUnorm2x16 unpackUnorm2x16 packHalf2x16 unpackHalf2x16 outerProduct transpose determinant inverse texture textureSize textureProj textureLod textureOffset texelFetch texelFetchOffset textureProjOffset textureLodOffset textureProjLod textureProjLodOffset textureGrad textureGradOffset textureProjGrad textureProjGradOffset".split(" "))},
{"./builtins":437}],437:[function(b,N,G){N.exports="abs acos all any asin atan ceil clamp cos cross dFdx dFdy degrees distance dot equal exp exp2 faceforward floor fract gl_BackColor gl_BackLightModelProduct gl_BackLightProduct gl_BackMaterial gl_BackSecondaryColor gl_ClipPlane gl_ClipVertex gl_Color gl_DepthRange gl_DepthRangeParameters gl_EyePlaneQ gl_EyePlaneR gl_EyePlaneS gl_EyePlaneT gl_Fog gl_FogCoord gl_FogFragCoord gl_FogParameters gl_FragColor gl_FragCoord gl_FragData gl_FragDepth gl_FragDepthEXT gl_FrontColor gl_FrontFacing gl_FrontLightModelProduct gl_FrontLightProduct gl_FrontMaterial gl_FrontSecondaryColor gl_LightModel gl_LightModelParameters gl_LightModelProducts gl_LightProducts gl_LightSource gl_LightSourceParameters gl_MaterialParameters gl_MaxClipPlanes gl_MaxCombinedTextureImageUnits gl_MaxDrawBuffers gl_MaxFragmentUniformComponents gl_MaxLights gl_MaxTextureCoords gl_MaxTextureImageUnits gl_MaxTextureUnits gl_MaxVaryingFloats gl_MaxVertexAttribs gl_MaxVertexTextureImageUnits gl_MaxVertexUniformComponents gl_ModelViewMatrix gl_ModelViewMatrixInverse gl_ModelViewMatrixInverseTranspose gl_ModelViewMatrixTranspose gl_ModelViewProjectionMatrix gl_ModelViewProjectionMatrixInverse gl_ModelViewProjectionMatrixInverseTranspose gl_ModelViewProjectionMatrixTranspose gl_MultiTexCoord0 gl_MultiTexCoord1 gl_MultiTexCoord2 gl_MultiTexCoord3 gl_MultiTexCoord4 gl_MultiTexCoord5 gl_MultiTexCoord6 gl_MultiTexCoord7 gl_Normal gl_NormalMatrix gl_NormalScale gl_ObjectPlaneQ gl_ObjectPlaneR gl_ObjectPlaneS gl_ObjectPlaneT gl_Point gl_PointCoord gl_PointParameters gl_PointSize gl_Position gl_ProjectionMatrix gl_ProjectionMatrixInverse gl_ProjectionMatrixInverseTranspose gl_ProjectionMatrixTranspose gl_SecondaryColor gl_TexCoord gl_TextureEnvColor gl_TextureMatrix gl_TextureMatrixInverse gl_TextureMatrixInverseTranspose gl_TextureMatrixTranspose gl_Vertex greaterThan greaterThanEqual inversesqrt length lessThan lessThanEqual log log2 matrixCompMult max min mix mod normalize not notEqual pow radians reflect refract sign sin smoothstep sqrt step tan texture2D texture2DLod texture2DProj texture2DProjLod textureCube textureCubeLod texture2DLodEXT texture2DProjLodEXT textureCubeLodEXT texture2DGradEXT texture2DProjGradEXT textureCubeGradEXT".split(" ")},
{}],438:[function(b,N,G){b=b("./literals");N.exports=b.slice().concat("layout centroid smooth case mat2x2 mat2x3 mat2x4 mat3x2 mat3x3 mat3x4 mat4x2 mat4x3 mat4x4 uvec2 uvec3 uvec4 samplerCubeShadow sampler2DArray sampler2DArrayShadow isampler2D isampler3D isamplerCube isampler2DArray usampler2D usampler3D usamplerCube usampler2DArray coherent restrict readonly writeonly resource atomic_uint noperspective patch sample subroutine common partition active filter image1D image2D image3D imageCube iimage1D iimage2D iimage3D iimageCube uimage1D uimage2D uimage3D uimageCube image1DArray image2DArray iimage1DArray iimage2DArray uimage1DArray uimage2DArray image1DShadow image2DShadow image1DArrayShadow image2DArrayShadow imageBuffer iimageBuffer uimageBuffer sampler1DArray sampler1DArrayShadow isampler1D isampler1DArray usampler1D usampler1DArray isampler2DRect usampler2DRect samplerBuffer isamplerBuffer usamplerBuffer sampler2DMS isampler2DMS usampler2DMS sampler2DMSArray isampler2DMSArray usampler2DMSArray".split(" "))},
{"./literals":439}],439:[function(b,N,G){N.exports="precision highp mediump lowp attribute const uniform varying break continue do for while if else in out inout float int uint void bool true false discard return mat2 mat3 mat4 vec2 vec3 vec4 ivec2 ivec3 ivec4 bvec2 bvec3 bvec4 sampler1D sampler2D sampler3D samplerCube sampler1DShadow sampler2DShadow struct asm class union enum typedef template this packed goto switch default inline noinline volatile public static extern external interface long short double half fixed unsigned input output hvec2 hvec3 hvec4 dvec2 dvec3 dvec4 fvec2 fvec3 fvec4 sampler2DRect sampler3DRect sampler2DRectShadow sizeof cast namespace using".split(" ")},
{}],440:[function(b,N,G){N.exports="\x3c\x3c\x3d \x3e\x3e\x3d ++ -- \x3c\x3c \x3e\x3e \x3c\x3d \x3e\x3d \x3d\x3d !\x3d \x26\x26 || +\x3d -\x3d *\x3d /\x3d %\x3d \x26\x3d ^^ ^\x3d |\x3d ( ) [ ] . ! ~ * / % + - \x3c \x3e \x26 ^ | ? : \x3d , ; { }".split(" ")},{}],441:[function(b,N,G){var p=b("./index");N.exports=function(n,k){k=p(k);var m=[];m=m.concat(k(n));return m=m.concat(k(null))}},{"./index":435}],442:[function(b,N,G){arguments[4][265][0].apply(G,arguments)},{dup:265}],443:[function(b,N,G){G=
"undefined"!==typeof xe?xe:"undefined"!==typeof self?self:"undefined"!==typeof window?window:{};b=b("is-browser");b="function"===typeof G.matchMedia?!G.matchMedia("(hover: none)").matches:b;N.exports=b},{"is-browser":452}],444:[function(b,N,G){function p(){var n=!1;try{var k=Object.defineProperty({},"passive",{get:function(){n=!0}});window.addEventListener("test",null,k);window.removeEventListener("test",null,k)}catch(m){n=!1}return n}b=b("is-browser");N.exports=b&&p()},{"is-browser":452}],445:[function(b,
N,G){G.read=function(p,n,k,m,a){var g=8*a-m-1;var h=(1<<g)-1,r=h>>1,l=-7;a=k?a-1:0;var c=k?-1:1,d=p[n+a];a+=c;k=d&(1<<-l)-1;d>>=-l;for(l+=g;0<l;k=256*k+p[n+a],a+=c,l-=8);g=k&(1<<-l)-1;k>>=-l;for(l+=m;0<l;g=256*g+p[n+a],a+=c,l-=8);if(0===k)k=1-r;else{if(k===h)return g?NaN:Infinity*(d?-1:1);g+=Math.pow(2,m);k-=r}return(d?-1:1)*g*Math.pow(2,k-m)};G.write=function(p,n,k,m,a,g){var h,r=8*g-a-1,l=(1<<r)-1,c=l>>1,d=23===a?Math.pow(2,-24)-Math.pow(2,-77):0;g=m?0:g-1;var e=m?1:-1,f=0>n||0===n&&0>1/n?1:0;n=
Math.abs(n);isNaN(n)||Infinity===n?(n=isNaN(n)?1:0,m=l):(m=Math.floor(Math.log(n)/Math.LN2),1>n*(h=Math.pow(2,-m))&&(m--,h*=2),n=1<=m+c?n+d/h:n+d*Math.pow(2,1-c),2<=n*h&&(m++,h/=2),m+c>=l?(n=0,m=l):1<=m+c?(n=(n*h-1)*Math.pow(2,a),m+=c):(n=n*Math.pow(2,c-1)*Math.pow(2,a),m=0));for(;8<=a;p[k+g]=n&255,g+=e,n/=256,a-=8);m=m<<a|n;for(r+=a;0<r;p[k+g]=m&255,g+=e,m/=256,r-=8);p[k+g-e]|=128*f}},{}],446:[function(b,N,G){function p(l,c,d){this.vertices=l;this.adjacent=c;this.boundary=d;this.lastVisited=-1}function n(l,
c,d){this.vertices=l;this.cell=c;this.index=d}function k(l,c){return h(l.vertices,c.vertices)}function m(l){for(var c=["function orient(){var tuple\x3dthis.tuple;return test("],d=0;d<=l;++d)0<d&&c.push(","),c.push("tuple[",d,"]");c.push(")}return orient");c=new Function("test",c.join(""));(l=g[l+1])||(l=g);return c(l)}function a(l,c,d){this.dimension=l;this.vertices=c;this.simplices=d;this.interior=d.filter(function(e){return!e.boundary});this.tuple=Array(l+1);for(c=0;c<=l;++c)this.tuple[c]=this.vertices[c];
(c=r[l])||(c=r[l]=m(l));this.orient=c}N.exports=function(l,c){var d=l.length;if(0===d)throw Error("Must have at least d+1 points");var e=l[0].length;if(d<=e)throw Error("Must input at least d+1 points");var f=l.slice(0,e+1),q=g.apply(void 0,f);if(0===q)throw Error("Input not in general position");for(var t=Array(e+1),w=0;w<=e;++w)t[w]=w;0>q&&(t[0]=1,t[1]=0);q=new p(t,Array(e+1),!1);var x=q.adjacent,z=Array(e+2);for(w=0;w<=e;++w){for(var B=t.slice(),A=0;A<=e;++A)A===w&&(B[A]=-1);A=B[0];B[0]=B[1];B[1]=
A;B=new p(B,Array(e+1),!0);x[w]=B;z[w]=B}z[e+1]=q;for(w=0;w<=e;++w)for(B=x[w].vertices,t=x[w].adjacent,A=0;A<=e;++A){var D=B[A];if(0>D)t[A]=q;else for(var C=0;C<=e;++C)0>x[C].vertices.indexOf(D)&&(t[A]=x[C])}f=new a(e,f,z);c=!!c;for(w=e+1;w<d;++w)f.insert(l[w],c);return f.boundary()};var g=b("robust-orientation"),h=b("simplicial-complex").compareCells;p.prototype.flip=function(){var l=this.vertices[0];this.vertices[0]=this.vertices[1];this.vertices[1]=l;l=this.adjacent[0];this.adjacent[0]=this.adjacent[1];
this.adjacent[1]=l};var r=[];b=a.prototype;b.handleBoundaryDegeneracy=function(l,c){var d=this.dimension,e=this.vertices.length-1,f=this.tuple,q=this.vertices,t=[l];for(l.lastVisited=-e;0<t.length;){l=t.pop();l=l.adjacent;for(var w=0;w<=d;++w){var x=l[w];if(x.boundary&&!(x.lastVisited<=-e)){for(var z=x.vertices,B=0;B<=d;++B){var A=z[B];f[B]=0>A?c:q[A]}z=this.orient();if(0<z)return x;x.lastVisited=-e;0===z&&t.push(x)}}}return null};b.walk=function(l,c){var d=this.vertices.length-1,e=this.dimension,
f=this.vertices,q=this.tuple,t=this.interior[c?this.interior.length*Math.random()|0:this.interior.length-1];a:for(;!t.boundary;){var w=t.vertices;c=t.adjacent;for(var x=0;x<=e;++x)q[x]=f[w[x]];t.lastVisited=d;for(x=0;x<=e;++x)if(t=c[x],!(t.lastVisited>=d)){w=q[x];q[x]=l;var z=this.orient();q[x]=w;if(0>z)continue a;else t.lastVisited=t.boundary?-d:d}return}return t};b.addPeaks=function(l,c){var d=this.vertices.length-1,e=this.dimension,f=this.vertices,q=this.tuple,t=this.interior,w=this.simplices,
x=[c];c.lastVisited=d;c.vertices[c.vertices.indexOf(-1)]=d;c.boundary=!1;t.push(c);for(var z=[];0<x.length;){c=x.pop();var B=c.vertices,A=c.adjacent,D=B.indexOf(d);if(!(0>D))for(var C=0;C<=e;++C)if(C!==D){var v=A[C];if(v.boundary&&!(v.lastVisited>=d)){var y=v.vertices;if(v.lastVisited!==-d){for(var F=0,J=0;J<=e;++J)0>y[J]?(F=J,q[J]=l):q[J]=f[y[J]];if(0<this.orient()){y[F]=d;v.boundary=!1;t.push(v);x.push(v);v.lastVisited=d;continue}else v.lastVisited=-d}J=v.adjacent;y=B.slice();var K=A.slice();F=
new p(y,K,!0);w.push(F);var M=J.indexOf(c);if(!(0>M))for(J[M]=F,K[D]=v,y[C]=-1,K[C]=c,A[C]=F,F.flip(),J=0;J<=e;++J)if(v=y[J],!(0>v||v===d)){v=Array(e-1);for(M=K=0;M<=e;++M){var H=y[M];0>H||M===J||(v[K++]=H)}z.push(new n(v,F,J))}}}}z.sort(k);for(C=0;C+1<z.length;C+=2)l=z[C],c=z[C+1],d=c.index,0>l.index||0>d||(l.cell.adjacent[l.index]=c.cell,c.cell.adjacent[c.index]=l.cell)};b.insert=function(l,c){var d=this.vertices;d.push(l);if(c=this.walk(l,c)){for(var e=this.dimension,f=this.tuple,q=0;q<=e;++q){var t=
c.vertices[q];f[q]=0>t?l:d[t]}d=this.orient(f);if(!(0>d)){if(0===d&&(c=this.handleBoundaryDegeneracy(c,l),!c))return;this.addPeaks(l,c)}}};b.boundary=function(){for(var l=this.dimension,c=[],d=this.simplices,e=d.length,f=0;f<e;++f){var q=d[f];if(q.boundary){var t=Array(l);q=q.vertices;for(var w=0,x=0,z=0;z<=l;++z)0<=q[z]?t[w++]=q[z]:x=z&1;x===(l&1)&&(q=t[0],t[0]=t[1],t[1]=q);c.push(t)}}return c}},{"robust-orientation":548,"simplicial-complex":559}],447:[function(b,N,G){N.exports="function"===typeof Object.create?
function(p,n){n&&(p.super_=n,p.prototype=Object.create(n.prototype,{constructor:{value:p,enumerable:!1,writable:!0,configurable:!0}}))}:function(p,n){if(n){p.super_=n;var k=function(){};k.prototype=n.prototype;p.prototype=new k;p.prototype.constructor=p}}},{}],448:[function(b,N,G){function p(q,t,w,x,z){this.mid=q;this.left=t;this.right=w;this.leftPoints=x;this.rightPoints=z;this.count=(t?t.count:0)+(w?w.count:0)+x.length}function n(q,t){q.mid=t.mid;q.left=t.left;q.right=t.right;q.leftPoints=t.leftPoints;
q.rightPoints=t.rightPoints;q.count=t.count}function k(q,t){t=d(t);q.mid=t.mid;q.left=t.left;q.right=t.right;q.leftPoints=t.leftPoints;q.rightPoints=t.rightPoints;q.count=t.count}function m(q,t){var w=q.intervals([]);t=w.indexOf(t);if(0>t)return 0;w.splice(t,1);k(q,w);return 1}function a(q,t,w){for(var x=0;x<q.length&&q[x][0]<=t;++x){var z=w(q[x]);if(z)return z}}function g(q,t,w){for(var x=q.length-1;0<=x&&q[x][1]>=t;--x){var z=w(q[x]);if(z)return z}}function h(q,t){for(var w=0;w<q.length;++w){var x=
t(q[w]);if(x)return x}}function r(q,t){return q-t}function l(q,t){var w=q[0]-t[0];return w?w:q[1]-t[1]}function c(q,t){var w=q[1]-t[1];return w?w:q[0]-t[0]}function d(q){if(0===q.length)return null;for(var t=[],w=0;w<q.length;++w)t.push(q[w][0],q[w][1]);t.sort(r);t=t[t.length>>1];var x=[],z=[],B=[];for(w=0;w<q.length;++w){var A=q[w];A[1]<t?x.push(A):t<A[0]?z.push(A):B.push(A)}q=B.slice();B.sort(l);q.sort(c);return new p(t,d(x),d(z),B,q)}function e(q){this.root=q}var f=b("binary-search-bounds");N.exports=
function(q){return q&&0!==q.length?new e(d(q)):new e(null)};b=p.prototype;b.intervals=function(q){q.push.apply(q,this.leftPoints);this.left&&this.left.intervals(q);this.right&&this.right.intervals(q);return q};b.insert=function(q){var t=this.count-this.leftPoints.length;this.count+=1;if(q[1]<this.mid)this.left?4*(this.left.count+1)>3*(t+1)?(t=this.intervals([]),t.push(q),k(this,t)):this.left.insert(q):this.left=d([q]);else if(q[0]>this.mid)this.right?4*(this.right.count+1)>3*(t+1)?(t=this.intervals([]),
t.push(q),k(this,t)):this.right.insert(q):this.right=d([q]);else{t=f.ge(this.leftPoints,q,l);var w=f.ge(this.rightPoints,q,c);this.leftPoints.splice(t,0,q);this.rightPoints.splice(w,0,q)}};b.remove=function(q){var t=this.count-this.leftPoints;if(q[1]<this.mid){if(!this.left)return 0;if(4*(this.right?this.right.count:0)>3*(t-1))return m(this,q);t=this.left.remove(q);if(2===t)return this.left=null,--this.count,1;1===t&&--this.count;return t}if(q[0]>this.mid){if(!this.right)return 0;if(4*(this.left?
this.left.count:0)>3*(t-1))return m(this,q);t=this.right.remove(q);if(2===t)return this.right=null,--this.count,1;1===t&&--this.count;return t}if(1===this.count)return this.leftPoints[0]===q?2:0;if(1===this.leftPoints.length&&this.leftPoints[0]===q){if(this.left&&this.right){q=this;for(var w=this.left;w.right;)q=w,w=w.right;if(q===this)w.right=this.right;else{var x=this.left;t=this.right;q.count-=w.count;q.right=w.left;w.left=x;w.right=t}n(this,w);this.count=(this.left?this.left.count:0)+(this.right?
this.right.count:0)+this.leftPoints.length}else this.left?n(this,this.left):n(this,this.right);return 1}for(x=f.ge(this.leftPoints,q,l);x<this.leftPoints.length&&this.leftPoints[x][0]===q[0];++x)if(this.leftPoints[x]===q)for(--this.count,this.leftPoints.splice(x,1),t=f.ge(this.rightPoints,q,c);t<this.rightPoints.length&&this.rightPoints[t][1]===q[1];++t)if(this.rightPoints[t]===q)return this.rightPoints.splice(t,1),1;return 0};b.queryPoint=function(q,t){if(q<this.mid){if(this.left){var w=this.left.queryPoint(q,
t);if(w)return w}return a(this.leftPoints,q,t)}return q>this.mid?this.right&&(w=this.right.queryPoint(q,t))?w:g(this.rightPoints,q,t):h(this.leftPoints,t)};b.queryInterval=function(q,t,w){if(q<this.mid&&this.left){var x=this.left.queryInterval(q,t,w);if(x)return x}return t>this.mid&&this.right&&(x=this.right.queryInterval(q,t,w))?x:t<this.mid?a(this.leftPoints,t,w):q>this.mid?g(this.rightPoints,q,w):h(this.leftPoints,w)};b=e.prototype;b.insert=function(q){this.root?this.root.insert(q):this.root=new p(q[0],
null,null,[q],[q])};b.remove=function(q){return this.root?(q=this.root.remove(q),2===q&&(this.root=null),0!==q):!1};b.queryPoint=function(q,t){if(this.root)return this.root.queryPoint(q,t)};b.queryInterval=function(q,t,w){if(q<=t&&this.root)return this.root.queryInterval(q,t,w)};Object.defineProperty(b,"count",{get:function(){return this.root?this.root.count:0}});Object.defineProperty(b,"intervals",{get:function(){return this.root?this.root.intervals([]):[]}})},{"binary-search-bounds":449}],449:[function(b,
N,G){arguments[4][251][0].apply(G,arguments)},{dup:251}],450:[function(b,N,G){N.exports=function(p,n){n=n||Array(p.length);for(var k=0;k<p.length;++k)n[p[k]]=k;return n}},{}],451:[function(b,N,G){N.exports=function(p){for(var n=Array(p),k=0;k<p;++k)n[k]=k;return n}},{}],452:[function(b,N,G){N.exports=!0},{}],453:[function(b,N,G){function p(n){return!!n.constructor&&"function"===typeof n.constructor.isBuffer&&n.constructor.isBuffer(n)}N.exports=function(n){return null!=n&&(p(n)||"function"===typeof n.readFloatLE&&
"function"===typeof n.slice&&p(n.slice(0,0))||!!n._isBuffer)}},{}],454:[function(b,N,G){N.exports="undefined"!==typeof navigator&&(/MSIE/.test(navigator.userAgent)||/Trident\//.test(navigator.appVersion))},{}],455:[function(b,N,G){function p(m){m||(m={});var a=m.ua;a||"undefined"===typeof navigator||(a=navigator.userAgent);a&&a.headers&&"string"===typeof a.headers["user-agent"]&&(a=a.headers["user-agent"]);if("string"!==typeof a)return!1;var g=m.tablet?k.test(a):n.test(a);!g&&m.tablet&&m.featureDetect&&
navigator&&1<navigator.maxTouchPoints&&-1!==a.indexOf("Macintosh")&&-1!==a.indexOf("Safari")&&(g=!0);return g}N.exports=p;N.exports.isMobile=p;N.exports.default=p;var n=/(android|bb\d+|meego).+mobile|avantgo|bada\/|blackberry|blazer|compal|elaine|fennec|hiptop|iemobile|ip(hone|od)|iris|kindle|lge |maemo|midp|mmp|mobile.+firefox|netfront|opera m(ob|in)i|palm( os)?|phone|p(ixi|re)\/|plucker|pocket|psp|series[46]0|symbian|treo|up\.(browser|link)|vodafone|wap|windows (ce|phone)|xda|xiino/i,k=/(android|bb\d+|meego).+mobile|avantgo|bada\/|blackberry|blazer|compal|elaine|fennec|hiptop|iemobile|ip(hone|od)|iris|kindle|lge |maemo|midp|mmp|mobile.+firefox|netfront|opera m(ob|in)i|palm( os)?|phone|p(ixi|re)\/|plucker|pocket|psp|series[46]0|symbian|treo|up\.(browser|link)|vodafone|wap|windows (ce|phone)|xda|xiino|android|ipad|playbook|silk/i},
{}],456:[function(b,N,G){N.exports=function(p){var n=typeof p;return null!==p&&("object"===n||"function"===n)}},{}],457:[function(b,N,G){var p=Object.prototype.toString;N.exports=function(n){var k;return"[object Object]"===p.call(n)&&(k=Object.getPrototypeOf(n),null===k||k===Object.getPrototypeOf({}))}},{}],458:[function(b,N,G){N.exports=function(p){for(var n=p.length,k,m=0;m<n;m++)if(k=p.charCodeAt(m),(9>k||13<k)&&32!==k&&133!==k&&160!==k&&5760!==k&&6158!==k&&(8192>k||8205<k)&&8232!==k&&8233!==k&&
8239!==k&&8287!==k&&8288!==k&&12288!==k&&65279!==k)return!1;return!0}},{}],459:[function(b,N,G){N.exports=function(p){if("string"!==typeof p)return!1;p=p.trim();return/^[mzlhvcsqta]\s*[-+.0-9][^mlhvzcsqta]+/i.test(p)&&/[\dz]$/i.test(p)&&4<p.length?!0:!1}},{}],460:[function(b,N,G){N.exports=function(p,n,k){return p*(1-k)+n*k}},{}],461:[function(b,N,G){(function(p,n){"object"===typeof G&&"undefined"!==typeof N?N.exports=n():(p=p||self,p.mapboxgl=n())})(this,function(){function p(a,g){if(n)if(k){a="var sharedChunk \x3d {}; ("+
n+")(sharedChunk); ("+k+")(sharedChunk);";var h={};n(h);m=g(h);m.workerUrl=window.URL.createObjectURL(new Blob([a],{type:"text/javascript"}))}else k=g;else n=g}var n,k,m;p(["exports"],function(a){function g(u,E){return E={exports:{}},u(E,E.exports),E.exports}function h(u,E,P,ea){this.cx=3*u;this.bx=3*(P-u)-this.cx;this.ax=1-this.cx-this.bx;this.cy=3*E;this.by=3*(ea-E)-this.cy;this.ay=1-this.cy-this.by;this.p1x=u;this.p1y=ea;this.p2x=P;this.p2y=ea}function r(u,E){this.x=u;this.y=E}function l(u,E){if(Array.isArray(u)){if(!Array.isArray(E)||
u.length!==E.length)return!1;for(var P=0;P<u.length;P++)if(!l(u[P],E[P]))return!1;return!0}if("object"===typeof u&&null!==u&&null!==E){if("object"!==typeof E||Object.keys(u).length!==Object.keys(E).length)return!1;for(P in u)if(!l(u[P],E[P]))return!1;return!0}return u===E}function c(u,E,P,ea){var qa=new Sh(u,E,P,ea);return function(xa){return qa.solve(xa)}}function d(u,E,P){return Math.min(P,Math.max(E,u))}function e(u,E,P){var ea=P-E;u=((u-E)%ea+ea)%ea+E;return u===E?P:u}function f(u){for(var E=
[],P=arguments.length-1;0<P--;)E[P]=arguments[P+1];for(P=0;P<E.length;P+=1){var ea=E[P],qa;for(qa in ea)u[qa]=ea[qa]}return u}function q(){function u(E){return E?(E^16*Math.random()>>E/4).toString(16):"10000000-1000-4000-8000-100000000000".replace(/[018]/g,u)}return u()}function t(u){return u?/^[0-9a-f]{8}-[0-9a-f]{4}-[4][0-9a-f]{3}-[89ab][0-9a-f]{3}-[0-9a-f]{12}$/i.test(u):!1}function w(u,E){u.forEach(function(P){E[P]&&(E[P]=E[P].bind(E))})}function x(u,E){return-1!==u.indexOf(E,u.length-E.length)}
function z(u,E,P){var ea={},qa;for(qa in u)ea[qa]=E.call(P||this,u[qa],qa,u);return ea}function B(u,E,P){var ea={},qa;for(qa in u)E.call(P||this,u[qa],qa,u)&&(ea[qa]=u[qa]);return ea}function A(u){return Array.isArray(u)?u.map(A):"object"===typeof u&&u?z(u,A):u}function D(u){xi[u]||("undefined"!==typeof console&&console.warn(u),xi[u]=!0)}function C(u,E,P){return(P.y-u.y)*(E.x-u.x)>(E.y-u.y)*(P.x-u.x)}function v(){return"undefined"!==typeof WorkerGlobalScope&&"undefined"!==typeof self&&self instanceof
WorkerGlobalScope}function y(u){var E={};u.replace(/(?:^|(?:\s*,\s*))([^\x00-\x20\(\)<>@,;:\\"\/\[\]\?=\{\}\x7F]+)(?:=(?:([^\x00-\x20\(\)<>@,;:\\"\/\[\]\?=\{\}\x7F]+)|(?:"((?:[^"\\]|\\.)*)")))?/g,function(P,ea,qa,xa){P=qa||xa;E[ea]=P?P.toLowerCase():!0;return""});E["max-age"]&&(u=parseInt(E["max-age"],10),isNaN(u)?delete E["max-age"]:E["max-age"]=u);return E}function F(u){if(null==gi){var E=u.navigator?u.navigator.userAgent:null;gi=!!u.safari||!(!E||!(/\b(iPad|iPhone|iPod)\b/.test(E)||E.match("Safari")&&
!E.match("Chrome")))}return gi}function J(u){try{var E=self[u];E.setItem("_mapbox_test_",1);E.removeItem("_mapbox_test_");return!0}catch(P){return!1}}function K(u){return self.btoa(encodeURIComponent(u).replace(/%([0-9A-F]{2})/g,function(E,P){return String.fromCharCode(Number("0x"+P))}))}function M(u){return decodeURIComponent(self.atob(u).split("").map(function(E){return"%"+("00"+E.charCodeAt(0).toString(16)).slice(-2)}).join(""))}function H(u){var E=u.createTexture();u.bindTexture(u.TEXTURE_2D,
E);try{u.texImage2D(u.TEXTURE_2D,0,u.RGBA,u.RGBA,u.UNSIGNED_BYTE,dc);if(u.isContextLost())return;Qa.supported=!0}catch(P){}u.deleteTexture(E);Lb=!0}function O(u){return 0===u.indexOf("mapbox:")}function I(u){return 0<u.indexOf("sku\x3d")&&Gc.test(u)}function L(u){u=u.match(Xc);if(!u)throw Error("Unable to parse URL object");return{protocol:u[1],authority:u[2],path:u[3]||"/",params:u[4]?u[4].split("\x26"):[]}}function Q(u){var E=u.params.length?"?"+u.params.join("\x26"):"";return u.protocol+"://"+
u.authority+u.path+E}function Z(u){if(!u)return null;u=u.split(".");if(!u||3!==u.length)return null;try{return JSON.parse(M(u[1]))}catch(E){return null}}function ba(){self.caches&&!re&&(re=self.caches.open("mapbox-tiles"))}function V(u,E){if(void 0===ne)try{new Response(new ReadableStream),ne=!0}catch(P){ne=!1}ne?E(u.body):u.blob().then(E)}function S(u,E,P){ba();if(re){var ea={status:E.status,statusText:E.statusText,headers:new self.Headers};E.headers.forEach(function(xa,Ea){return ea.headers.set(Ea,
xa)});var qa=y(E.headers.get("Cache-Control")||"");qa["no-store"]||(qa["max-age"]&&ea.headers.set("Expires",(new Date(P+1E3*qa["max-age"])).toUTCString()),42E4>(new Date(ea.headers.get("Expires"))).getTime()-P||V(E,function(xa){var Ea=new self.Response(xa,ea);ba();re&&re.then(function(Va){return Va.put(T(u.url),Ea)}).catch(function(Va){return D(Va.message)})}))}}function T(u){var E=u.indexOf("?");return 0>E?u:u.slice(0,E)}function fa(u,E){ba();if(!re)return E(null);var P=T(u.url);re.then(function(ea){ea.match(P).then(function(qa){if(qa){var xa=
new Date(qa.headers.get("Expires")||0);var Ea=y(qa.headers.get("Cache-Control")||"");xa=xa>Date.now()&&!Ea["no-cache"]}else xa=!1;ea.delete(P);xa&&ea.put(P,qa.clone());E(null,qa,xa)}).catch(E)}).catch(E)}function W(){null==we&&(we=self.OffscreenCanvas&&(new self.OffscreenCanvas(1,1)).getContext("2d")&&"function"===typeof self.createImageBitmap);return we}function aa(u,E){var P=new self.AbortController,ea=new self.Request(u.url,{method:u.method||"GET",body:u.body,credentials:u.credentials,headers:u.headers,
referrer:xf(),signal:P.signal}),qa=!1,xa=!1,Ea=I(ea.url);"json"===u.type&&ea.headers.set("Accept","application/json");var Va=function(gb,Fb,Sb){if(!xa){gb&&"SecurityError"!==gb.message&&D(gb);if(Fb&&Sb)return Ya(Fb);var jc=Date.now();self.fetch(ea).then(function(Dc){if(Dc.ok){var xc=Ea?Dc.clone():null;return Ya(Dc,xc,jc)}return E(new Ne(Dc.statusText,Dc.status,u.url))}).catch(function(Dc){20!==Dc.code&&E(Error(Dc.message))})}},Ya=function(gb,Fb,Sb){("arrayBuffer"===u.type?gb.arrayBuffer():"json"===
u.type?gb.json():gb.text()).then(function(jc){xa||(Fb&&Sb&&S(ea,Fb,Sb),qa=!0,E(null,jc,gb.headers.get("Cache-Control"),gb.headers.get("Expires")))}).catch(function(jc){xa||E(Error(jc.message))})};Ea?fa(ea,Va):Va(null,null);return{cancel:function(){xa=!0;qa||P.abort()}}}function ja(u,E){var P=new self.XMLHttpRequest;P.open(u.method||"GET",u.url,!0);"arrayBuffer"===u.type&&(P.responseType="arraybuffer");for(var ea in u.headers)P.setRequestHeader(ea,u.headers[ea]);"json"===u.type&&(P.responseType="text",
P.setRequestHeader("Accept","application/json"));P.withCredentials="include"===u.credentials;P.onerror=function(){E(Error(P.statusText))};P.onload=function(){if((200<=P.status&&300>P.status||0===P.status)&&null!==P.response){var qa=P.response;if("json"===u.type)try{qa=JSON.parse(P.response)}catch(xa){return E(xa)}E(null,qa,P.getResponseHeader("Cache-Control"),P.getResponseHeader("Expires"))}else E(new Ne(P.statusText,P.status,u.url))};P.send(u.body);return{cancel:function(){return P.abort()}}}function ma(u){var E=
self.document.createElement("a");E.href=u;return E.protocol===self.document.location.protocol&&E.host===self.document.location.host}function ia(u,E,P,ea){var qa=new self.Image,xa=self.URL;qa.onload=function(){E(null,qa);xa.revokeObjectURL(qa.src)};qa.onerror=function(){return E(Error("Could not load image. Please make sure to use a supported image type such as PNG or JPEG. Note that SVGs are not supported."))};var Ea=new self.Blob([new Uint8Array(u)],{type:"image/png"});qa.cacheControl=P;qa.expires=
ea;qa.src=u.byteLength?xa.createObjectURL(Ea):"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAAC0lEQVQYV2NgAAIAAAUAAarVyFEAAAAASUVORK5CYII\x3d"}function ra(u,E){u=new self.Blob([new Uint8Array(u)],{type:"image/png"});self.createImageBitmap(u).then(function(P){E(null,P)}).catch(function(P){E(Error("Could not load image because of "+P.message+". Please make sure to use a supported image type such as PNG or JPEG. Note that SVGs are not supported."))})}function wa(u,E,P){P[u]&&-1!==
P[u].indexOf(E)||(P[u]=P[u]||[],P[u].push(E))}function pa(u,E,P){P&&P[u]&&(E=P[u].indexOf(E),-1!==E&&P[u].splice(E,1))}function la(u){var E=u.key;return(u=u.value)?[new Ma(E,u,"constants have been deprecated as of v8")]:[]}function ka(u){for(var E=[],P=arguments.length-1;0<P--;)E[P]=arguments[P+1];for(P=0;P<E.length;P+=1){var ea=E[P],qa;for(qa in ea)u[qa]=ea[qa]}return u}function na(u){return u instanceof Number||u instanceof String||u instanceof Boolean?u.valueOf():u}function oa(u){if(Array.isArray(u))return u.map(oa);
if(u instanceof Object&&!(u instanceof Number||u instanceof String||u instanceof Boolean)){var E={},P;for(P in u)E[P]=oa(u[P]);return E}return na(u)}function sa(u,E){return{kind:"array",itemType:u,N:E}}function za(u){if("array"===u.kind){var E=za(u.itemType);return"number"===typeof u.N?"array\x3c"+E+", "+u.N+"\x3e":"value"===u.itemType.kind?"array":"array\x3c"+E+"\x3e"}return u.kind}function Ha(u,E){if("error"===E.kind)return null;if("array"===u.kind){if("array"===E.kind&&(0===E.N&&"value"===E.itemType.kind||
!Ha(u.itemType,E.itemType))&&("number"!==typeof u.N||u.N===E.N))return null}else{if(u.kind===E.kind)return null;if("value"===u.kind)for(var P=0,ea=Qc;P<ea.length;P+=1)if(!Ha(ea[P],E))return null}return"Expected "+za(u)+" but found "+za(E)+" instead."}function Wa(u,E){return E.some(function(P){return P.kind===u.kind})}function Za(u,E){return E.some(function(P){return"null"===P?null===u:"array"===P?Array.isArray(u):"object"===P?u&&!Array.isArray(u)&&"object"===typeof u:P===typeof u})}function bb(u,
E,P,ea){return"number"===typeof u&&0<=u&&255>=u&&"number"===typeof E&&0<=E&&255>=E&&"number"===typeof P&&0<=P&&255>=P?"undefined"===typeof ea||"number"===typeof ea&&0<=ea&&1>=ea?null:"Invalid rgba value ["+[u,E,P,ea].join(", ")+"]: 'a' must be between 0 and 1.":"Invalid rgba value ["+("number"===typeof ea?[u,E,P,ea]:[u,E,P]).join(", ")+"]: 'r', 'g', and 'b' must be between 0 and 255."}function sb(u){if(null===u||"string"===typeof u||"boolean"===typeof u||"number"===typeof u||u instanceof sd||u instanceof
qd||u instanceof zd||u instanceof ee)return!0;if(Array.isArray(u)){for(var E=0;E<u.length;E+=1)if(!sb(u[E]))return!1;return!0}if("object"===typeof u){for(E in u)if(!sb(u[E]))return!1;return!0}return!1}function hb(u){if(null===u)return eb;if("string"===typeof u)return wb;if("boolean"===typeof u)return Eb;if("number"===typeof u)return db;if(u instanceof sd)return Tb;if(u instanceof qd)return Ac;if(u instanceof zd)return Kc;if(u instanceof ee)return Lc;if(Array.isArray(u)){for(var E=u.length,P,ea=0;ea<
u.length;ea+=1){var qa=hb(u[ea]);if(P){if(P!==qa){P=ic;break}}else P=qa}return sa(P||ic,E)}return mc}function ub(u){var E=typeof u;return null===u?"":"string"===E||"number"===E||"boolean"===E?String(u):u instanceof sd||u instanceof zd||u instanceof ee?u.toString():JSON.stringify(u)}function pb(u,E){u[0]=Math.min(u[0],E[0]);u[1]=Math.min(u[1],E[1]);u[2]=Math.max(u[2],E[0]);u[3]=Math.max(u[3],E[1])}function Ab(u,E){return u[0]<=E[0]||u[2]>=E[2]||u[1]<=E[1]||u[3]>=E[3]?!1:!0}function tb(u,E){for(var P=
!1,ea=0,qa=E.length;ea<qa;ea++)for(var xa=E[ea],Ea=0,Va=xa.length;Ea<Va-1;Ea++){var Ya=xa[Ea],gb=xa[Ea+1],Fb=u[0]-Ya[0];Ya=u[1]-Ya[1];var Sb=u[0]-gb[0];gb=u[1]-gb[1];if(0===Fb*gb-Sb*Ya&&0>=Fb*Sb&&0>=Ya*gb)return!1;Fb=xa[Ea];gb=xa[Ea+1];Fb[1]>u[1]!==gb[1]>u[1]&&u[0]<(gb[0]-Fb[0])*(u[1]-Fb[1])/(gb[1]-Fb[1])+Fb[0]&&(P=!P)}return P}function vb(u,E,P,ea){var qa=ea[0]-P[0];ea=ea[1]-P[1];u=(u[0]-P[0])*ea-qa*(u[1]-P[1]);E=(E[0]-P[0])*ea-qa*(E[1]-P[1]);return 0<u&&0>E||0>u&&0<E?!0:!1}function qb(u,E){for(var P=
0;P<u.length;++P)if(!tb(u[P],E))return!1;for(P=0;P<u.length-1;++P){a:{var ea=u[P];for(var qa=u[P+1],xa=0,Ea=E;xa<Ea.length;xa+=1)for(var Va=Ea[xa],Ya=0;Ya<Va.length-1;++Ya){var gb=ea,Fb=qa,Sb=Va[Ya],jc=Va[Ya+1],Dc=[jc[0]-Sb[0],jc[1]-Sb[1]],xc=[Fb[0]-gb[0],Fb[1]-gb[1]];if(0===Dc[0]*xc[1]-Dc[1]*xc[0]?0:vb(gb,Fb,Sb,jc)&&vb(Sb,jc,gb,Fb)){ea=!0;break a}}ea=!1}if(ea)return!1}return!0}function zb(u,E,P){for(var ea=[],qa=0;qa<u.length;qa++){for(var xa=[],Ea=0;Ea<u[qa].length;Ea++){var Va=u[qa][Ea];var Ya=
Math.pow(2,P.z);Va=[Math.round((180+Va[0])/360*Ya*8192),Math.round((180-180/Math.PI*Math.log(Math.tan(Math.PI/4+Va[1]*Math.PI/360)))/360*Ya*8192)];pb(E,Va);xa.push(Va)}ea.push(xa)}return ea}function La(u,E,P){for(var ea=[],qa=0;qa<u.length;qa++){var xa=zb(u[qa],E,P);ea.push(xa)}return ea}function Ka(u,E,P,ea){if(u[0]<P[0]||u[0]>P[2]){var qa=.5*ea,xa=u[0]-P[0]>qa?-ea:P[0]-u[0]>qa?ea:0;0===xa&&(xa=u[0]-P[2]>qa?-ea:P[2]-u[0]>qa?ea:0);u[0]+=xa}pb(E,u)}function ya(u,E,P,ea){var qa=8192*Math.pow(2,ea.z);
ea=[8192*ea.x,8192*ea.y];for(var xa=[],Ea=0;Ea<u.length;Ea+=1)for(var Va=0,Ya=u[Ea];Va<Ya.length;Va+=1){var gb=Ya[Va];gb=[gb.x+ea[0],gb.y+ea[1]];Ka(gb,E,P,qa);xa.push(gb)}return xa}function Aa(u,E,P,ea){var qa=8192*Math.pow(2,ea.z),xa=[8192*ea.x,8192*ea.y];ea=[];for(var Ea=0;Ea<u.length;Ea+=1){for(var Va=[],Ya=0,gb=u[Ea];Ya<gb.length;Ya+=1){var Fb=gb[Ya];Fb=[Fb.x+xa[0],Fb.y+xa[1]];pb(E,Fb);Va.push(Fb)}ea.push(Va)}if(E[2]-E[0]<=qa/2)for(E[0]=E[1]=Infinity,E[2]=E[3]=-Infinity,u=0;u<ea.length;u+=1)for(xa=
0,Ea=ea[u];xa<Ea.length;xa+=1)Ka(Ea[xa],E,P,qa);return ea}function Ja(u,E){var P=[Infinity,Infinity,-Infinity,-Infinity],ea=[Infinity,Infinity,-Infinity,-Infinity],qa=u.canonicalID();if("Polygon"===E.type){var xa=zb(E.coordinates,ea,qa),Ea=ya(u.geometry(),P,ea,qa);if(!Ab(P,ea))return!1;for(var Va=0;Va<Ea.length;Va+=1)if(!tb(Ea[Va],xa))return!1}if("MultiPolygon"===E.type){E=La(E.coordinates,ea,qa);u=ya(u.geometry(),P,ea,qa);if(!Ab(P,ea))return!1;for(P=0;P<u.length;P+=1){a:{ea=u[P];qa=E;for(xa=0;xa<
qa.length;xa++)if(tb(ea,qa[xa])){ea=!0;break a}ea=!1}if(!ea)return!1}}return!0}function Ta(u,E){var P=[Infinity,Infinity,-Infinity,-Infinity],ea=[Infinity,Infinity,-Infinity,-Infinity],qa=u.canonicalID();if("Polygon"===E.type){var xa=zb(E.coordinates,ea,qa),Ea=Aa(u.geometry(),P,ea,qa);if(!Ab(P,ea))return!1;for(var Va=0;Va<Ea.length;Va+=1)if(!qb(Ea[Va],xa))return!1}if("MultiPolygon"===E.type){E=La(E.coordinates,ea,qa);u=Aa(u.geometry(),P,ea,qa);if(!Ab(P,ea))return!1;for(P=0;P<u.length;P+=1){a:{ea=
u[P];qa=E;for(xa=0;xa<qa.length;xa++)if(qb(ea,qa[xa])){ea=!0;break a}ea=!1}if(!ea)return!1}}return!0}function $a(u){if(u instanceof Uf&&("get"===u.name&&1===u.args.length||"feature-state"===u.name||"has"===u.name&&1===u.args.length||"properties"===u.name||"geometry-type"===u.name||"id"===u.name||/^filter-/.test(u.name))||u instanceof wg)return!1;var E=!0;u.eachChild(function(P){E&&!$a(P)&&(E=!1)});return E}function ab(u){if(u instanceof Uf&&"feature-state"===u.name)return!1;var E=!0;u.eachChild(function(P){E&&
!ab(P)&&(E=!1)});return E}function Db(u,E){if(u instanceof Uf&&0<=E.indexOf(u.name))return!1;var P=!0;u.eachChild(function(ea){P&&!Db(ea,E)&&(P=!1)});return P}function Nb(u){if(u instanceof Fg)return Nb(u.boundExpression);if(u instanceof Uf&&"error"===u.name||u instanceof gg||u instanceof wg)return!1;var E=u instanceof Bf||u instanceof me,P=!0;u.eachChild(function(ea){P=E?P&&Nb(ea):P&&ea instanceof le});return P?$a(u)&&Db(u,["zoom","heatmap-density","line-progress","accumulated","is-supported-script"]):
!1}function ec(u,E){for(var P=u.length-1,ea=0,qa=P,xa,Ea,Va;ea<=qa;)if(xa=Math.floor((ea+qa)/2),Ea=u[xa],Va=u[xa+1],Ea<=E){if(xa===P||E<Va)return xa;ea=xa+1}else if(Ea>E)qa=xa-1;else throw new je("Input is not a number.");return 0}function ob(u,E,P){return u*(1-P)+E*P}function Cb(u){return u>xg?Math.pow(u,1/3):u/rg+xj}function Qb(u){return u>Fi?u*u*u:rg*(u-xj)}function yc(u){return 255*(.0031308>=u?12.92*u:1.055*Math.pow(u,1/2.4)-.055)}function Jc(u){u/=255;return.04045>=u?u/12.92:Math.pow((u+.055)/
1.055,2.4)}function Ia(u){var E=Jc(u.r),P=Jc(u.g),ea=Jc(u.b),qa=Cb((.4124564*E+.3575761*P+.1804375*ea)/.95047),xa=Cb(.2126729*E+.7151522*P+.072175*ea);E=Cb((.0193339*E+.119192*P+.9503041*ea)/1.08883);return{l:116*xa-16,a:500*(qa-xa),b:200*(xa-E),alpha:u.a}}function Na(u){var E=(u.l+16)/116,P=isNaN(u.a)?E:E+u.a/500,ea=isNaN(u.b)?E:E-u.b/200;E=1*Qb(E);P=.95047*Qb(P);ea=1.08883*Qb(ea);return new sd(yc(3.2404542*P-1.5371385*E-.4985314*ea),yc(-.969266*P+1.8760108*E+.041556*ea),yc(.0556434*P-.2040259*E+
1.0572252*ea),u.alpha)}function ib(u,E,P,ea){ea-=P;u-=P;return 0===ea?0:1===E?u/ea:(Math.pow(E,u)-1)/(Math.pow(E,ea)-1)}function Gb(u,E){return"\x3d\x3d"===u||"!\x3d"===u?"boolean"===E.kind||"string"===E.kind||"number"===E.kind||"null"===E.kind||"value"===E.kind:"string"===E.kind||"number"===E.kind||"value"===E.kind}function Hb(u,E,P,ea){return 0===ea.compare(E,P)}function $b(u,E,P){var ea="\x3d\x3d"!==u&&"!\x3d"!==u;return function(){function qa(xa,Ea,Va){this.type=Eb;this.lhs=xa;this.rhs=Ea;this.collator=
Va;this.hasUntypedArgument="value"===xa.type.kind||"value"===Ea.type.kind}qa.parse=function(xa,Ea){if(3!==xa.length&&4!==xa.length)return Ea.error("Expected two or three arguments.");var Va=xa[0],Ya=Ea.parse(xa[1],1,ic);if(!Ya)return null;if(!Gb(Va,Ya.type))return Ea.concat(1).error('"'+Va+"\" comparisons are not supported for type '"+za(Ya.type)+"'.");var gb=Ea.parse(xa[2],2,ic);if(!gb)return null;if(!Gb(Va,gb.type))return Ea.concat(2).error('"'+Va+"\" comparisons are not supported for type '"+za(gb.type)+
"'.");if(Ya.type.kind!==gb.type.kind&&"value"!==Ya.type.kind&&"value"!==gb.type.kind)return Ea.error("Cannot compare types '"+za(Ya.type)+"' and '"+za(gb.type)+"'.");ea&&("value"===Ya.type.kind&&"value"!==gb.type.kind?Ya=new me(gb.type,[Ya]):"value"!==Ya.type.kind&&"value"===gb.type.kind&&(gb=new me(Ya.type,[gb])));Va=null;if(4===xa.length){if("string"!==Ya.type.kind&&"string"!==gb.type.kind&&"value"!==Ya.type.kind&&"value"!==gb.type.kind)return Ea.error("Cannot use collator to compare non-string types.");
Va=Ea.parse(xa[3],3,Ac);if(!Va)return null}return new qa(Ya,gb,Va)};qa.prototype.evaluate=function(xa){var Ea=this.lhs.evaluate(xa),Va=this.rhs.evaluate(xa);if(ea&&this.hasUntypedArgument){var Ya=hb(Ea),gb=hb(Va);if(Ya.kind!==gb.kind||"string"!==Ya.kind&&"number"!==Ya.kind)throw new je('Expected arguments for "'+u+'" to be (string, string) or (number, number), but found ('+Ya.kind+", "+gb.kind+") instead.");}return this.collator&&!ea&&this.hasUntypedArgument&&(Ya=hb(Ea),gb=hb(Va),"string"!==Ya.kind||
"string"!==gb.kind)?E(xa,Ea,Va):this.collator?P(xa,Ea,Va,this.collator.evaluate(xa)):E(xa,Ea,Va)};qa.prototype.eachChild=function(xa){xa(this.lhs);xa(this.rhs);this.collator&&xa(this.collator)};qa.prototype.outputDefined=function(){return!0};qa.prototype.serialize=function(){var xa=[u];this.eachChild(function(Ea){xa.push(Ea.serialize())});return xa};return qa}()}function uc(u,E){var P=E[0],ea=E[1],qa=E[2];E=E[3];P=P.evaluate(u);ea=ea.evaluate(u);qa=qa.evaluate(u);u=E?E.evaluate(u):1;if(E=bb(P,ea,
qa,u))throw new je(E);return new sd(P/255*u,ea/255*u,qa/255*u,u)}function fd(u,E){u=E[u];return"undefined"===typeof u?null:u}function fb(u){return{result:"success",value:u}}function Pb(u){return{result:"error",value:u}}function fc(u){return"data-driven"===u["property-type"]||"cross-faded-data-driven"===u["property-type"]}function Fc(u){return!!u.expression&&-1<u.expression.parameters.indexOf("zoom")}function Pc(u){return!!u.expression&&u.expression.interpolated}function Uc(u){return u instanceof Number?
"number":u instanceof String?"string":u instanceof Boolean?"boolean":Array.isArray(u)?"array":null===u?"null":typeof u}function rb(u){return"object"===typeof u&&null!==u&&!Array.isArray(u)}function Jb(u){return u}function sc(u,E){var P="color"===E.type,ea=u.stops&&"object"===typeof u.stops[0][0],qa=ea||void 0!==u.property;qa=ea||!qa;var xa=u.type||(Pc(E)?"exponential":"interval");P&&(u=ka({},u),u.stops&&(u.stops=u.stops.map(function(jc){return[jc[0],sd.parse(jc[1])]})),u.default=u.default?sd.parse(u.default):
sd.parse(E.default));if(u.colorSpace&&"rgb"!==u.colorSpace&&!Vi[u.colorSpace])throw Error("Unknown color space: "+u.colorSpace);if("exponential"===xa)var Ea=Wb;else if("interval"===xa)Ea=Vb;else if("categorical"===xa){Ea=vc;var Va=Object.create(null);P=0;for(var Ya=u.stops;P<Ya.length;P+=1){var gb=Ya[P];Va[gb[0]]=gb[1]}var Fb=typeof u.stops[0][0]}else if("identity"===xa)Ea=yb;else throw Error('Unknown function type "'+xa+'"');if(ea){ea={};qa=[];for(xa=0;xa<u.stops.length;xa++)P=u.stops[xa],Ya=P[0].zoom,
void 0===ea[Ya]&&(ea[Ya]={zoom:Ya,type:u.type,property:u.property,default:u.default,stops:[]},qa.push(Ya)),ea[Ya].stops.push([P[0].value,P[1]]);var Sb=[];for(xa=0;xa<qa.length;xa+=1)P=qa[xa],Sb.push([ea[P].zoom,sc(ea[P],E)]);ea={name:"linear"};return{kind:"composite",interpolationType:ea,interpolationFactor:Jg.interpolationFactor.bind(void 0,ea),zoomStops:Sb.map(function(jc){return jc[0]}),evaluate:function(jc,Dc){jc=jc.zoom;return Wb({stops:Sb,base:u.base},E,jc).evaluate(jc,Dc)}}}return qa?(ea="exponential"===
xa?{name:"exponential",base:void 0!==u.base?u.base:1}:null,{kind:"camera",interpolationType:ea,interpolationFactor:Jg.interpolationFactor.bind(void 0,ea),zoomStops:u.stops.map(function(jc){return jc[0]}),evaluate:function(jc){return Ea(u,E,jc.zoom,Va,Fb)}}):{kind:"source",evaluate:function(jc,Dc){jc=Dc&&Dc.properties?Dc.properties[u.property]:void 0;return void 0===jc?nc(u.default,E.default):Ea(u,E,jc,Va,Fb)}}}function nc(u,E,P){if(void 0!==u)return u;if(void 0!==E)return E;if(void 0!==P)return P}
function vc(u,E,P,ea,qa){return nc(typeof P===qa?ea[P]:void 0,u.default,E.default)}function Vb(u,E,P){if("number"!==Uc(P))return nc(u.default,E.default);E=u.stops.length;if(1===E||P<=u.stops[0][0])return u.stops[0][1];if(P>=u.stops[E-1][0])return u.stops[E-1][1];P=ec(u.stops.map(function(ea){return ea[0]}),P);return u.stops[P][1]}function Wb(u,E,P){var ea=void 0!==u.base?u.base:1;if("number"!==Uc(P))return nc(u.default,E.default);var qa=u.stops.length;if(1===qa||P<=u.stops[0][0])return u.stops[0][1];
if(P>=u.stops[qa-1][0])return u.stops[qa-1][1];qa=ec(u.stops.map(function(Fb){return Fb[0]}),P);var xa=ac(P,ea,u.stops[qa][0],u.stops[qa+1][0]),Ea=u.stops[qa][1],Va=u.stops[qa+1][1],Ya=Ui[E.type]||Jb;if(u.colorSpace&&"rgb"!==u.colorSpace){var gb=Vi[u.colorSpace];Ya=function(Fb,Sb){return gb.reverse(gb.interpolate(gb.forward(Fb),gb.forward(Sb),xa))}}return"function"===typeof Ea.evaluate?{evaluate:function(){for(var Fb=[],Sb=arguments.length;Sb--;)Fb[Sb]=arguments[Sb];Sb=Ea.evaluate.apply(void 0,Fb);
Fb=Va.evaluate.apply(void 0,Fb);if(void 0!==Sb&&void 0!==Fb)return Ya(Sb,Fb,xa)}}:Ya(Ea,Va,xa)}function yb(u,E,P){"color"===E.type?P=sd.parse(P):"formatted"===E.type?P=zd.fromString(P.toString()):"resolvedImage"===E.type?P=ee.fromString(P.toString()):Uc(P)===E.type||"enum"===E.type&&E.values[P]||(P=void 0);return nc(P,u.default,E.default)}function ac(u,E,P,ea){ea-=P;u-=P;return 0===ea?0:1===E?u/ea:(Math.pow(E,u)-1)/(Math.pow(E,ea)-1)}function Ub(u){return Array.isArray(u)&&0<u.length&&"string"===
typeof u[0]&&u[0]in yj}function lc(u,E){var P=Wh;if(E){var ea={color:Tb,string:wb,number:db,enum:wb,boolean:Eb,formatted:Kc,resolvedImage:Lc};ea="array"===E.type?sa(ea[E.value]||ic,E.length):ea[E.type]}else ea=void 0;P=new P(yj,[],ea);return(u=P.parse(u,void 0,void 0,void 0,E&&"string"===E.type?{typeAnnotation:"coerce"}:void 0))?fb(new jj(u,E)):Pb(P.errors)}function tc(u,E){u=lc(u,E);if("error"===u.result)return u;var P=u.value.expression,ea=$a(P);if(!ea&&!fc(E))return Pb([new Ua("","data expressions not supported")]);
var qa=Db(P,["zoom"]);if(!qa&&!Fc(E))return Pb([new Ua("","zoom expressions not supported")]);if((P=kd(P))||qa){if(P instanceof Ua)return Pb([P]);if(P instanceof Jg&&!Pc(E))return Pb([new Ua("",'"interpolate" expressions cannot be used with this property')])}else return Pb([new Ua("",'"zoom" expression may only be used as input to a top-level "step" or "interpolate" expression.')]);if(!P)return fb(ea?new zj("constant",u.value):new zj("source",u.value));E=P instanceof Jg?P.interpolation:void 0;return fb(ea?
new kj("camera",u.value,P.labels,E):new kj("composite",u.value,P.labels,E))}function Rc(u,E){if(rb(u))return new Qj(u,E);if(Ub(u)){u=tc(u,E);if("error"===u.result)throw Error(u.value.map(function(ea){return ea.key+": "+ea.message}).join(", "));return u.value}var P=u;"string"===typeof u&&"color"===E.type&&(P=sd.parse(u));return{kind:"constant",evaluate:function(){return P}}}function kd(u){var E=null;if(u instanceof qi)E=kd(u.result);else if(u instanceof Gi)for(var P=0,ea=u.args;P<ea.length&&!(E=kd(ea[P]));P+=
1);else(u instanceof pi||u instanceof Jg)&&u.input instanceof Uf&&"zoom"===u.input.name&&(E=u);if(E instanceof Ua)return E;u.eachChild(function(qa){qa=kd(qa);qa instanceof Ua?E=qa:!E&&qa?E=new Ua("",'"zoom" expression may only be used as input to a top-level "step" or "interpolate" expression.'):E&&qa&&E!==qa&&(E=new Ua("",'Only one zoom-based "step" or "interpolate" subexpression may be used in an expression.'))});return E}function Cd(u){var E=u.key,P=u.value,ea=u.valueSpec||{},qa=u.objectElementValidators||
{},xa=u.style;u=u.styleSpec;var Ea=[],Va=Uc(P);if("object"!==Va)return[new Ma(E,P,"object expected, "+Va+" found")];for(var Ya in P){var gb=Ya.split(".")[0];Va=ea[gb]||ea["*"];if(qa[gb])gb=qa[gb];else if(ea[gb])gb=hf;else if(qa["*"])gb=qa["*"];else if(ea["*"])gb=hf;else{Ea.push(new Ma(E,P[Ya],'unknown property "'+Ya+'"'));continue}Ea=Ea.concat(gb({key:(E?E+".":E)+Ya,value:P[Ya],valueSpec:Va,style:xa,styleSpec:u,object:P,objectKey:Ya},P))}for(var Fb in ea)qa[Fb]||ea[Fb].required&&void 0===ea[Fb]["default"]&&
void 0===P[Fb]&&Ea.push(new Ma(E,P,'missing required property "'+Fb+'"'));return Ea}function Gd(u){var E=u.value,P=u.valueSpec,ea=u.style,qa=u.styleSpec,xa=u.key;u=u.arrayElementValidator||hf;if("array"!==Uc(E))return[new Ma(xa,E,"array expected, "+Uc(E)+" found")];if(P.length&&E.length!==P.length)return[new Ma(xa,E,"array length "+P.length+" expected, length "+E.length+" found")];if(P["min-length"]&&E.length<P["min-length"])return[new Ma(xa,E,"array length at least "+P["min-length"]+" expected, length "+
E.length+" found")];var Ea={type:P.value,values:P.values};7>qa.$version&&(Ea.function=P.function);"object"===Uc(P.value)&&(Ea=P.value);P=[];for(var Va=0;Va<E.length;Va++)P=P.concat(u({array:E,arrayIndex:Va,value:E[Va],valueSpec:Ea,style:ea,styleSpec:qa,key:xa+"["+Va+"]"}));return P}function Ad(u){var E=u.key,P=u.value;u=u.valueSpec;var ea=Uc(P);"number"===ea&&P!==P&&(ea="NaN");return"number"!==ea?[new Ma(E,P,"number expected, "+ea+" found")]:"minimum"in u&&P<u.minimum?[new Ma(E,P,P+" is less than the minimum value "+
u.minimum)]:"maximum"in u&&P>u.maximum?[new Ma(E,P,P+" is greater than the maximum value "+u.maximum)]:[]}function Nc(u){function E(Dc){var xc=[],Hc=Dc.value,vd=Dc.key;if("array"!==Uc(Hc))return[new Ma(vd,Hc,"array expected, "+Uc(Hc)+" found")];if(2!==Hc.length)return[new Ma(vd,Hc,"array length 2 expected, length "+Hc.length+" found")];if(Sb){if("object"!==Uc(Hc[0]))return[new Ma(vd,Hc,"object expected, "+Uc(Hc[0])+" found")];if(void 0===Hc[0].zoom)return[new Ma(vd,Hc,"object stop key must have zoom")];
if(void 0===Hc[0].value)return[new Ma(vd,Hc,"object stop key must have value")];if(Ya&&Ya>na(Hc[0].zoom))return[new Ma(vd,Hc[0].zoom,"stop zoom values must appear in ascending order")];na(Hc[0].zoom)!==Ya&&(Ya=na(Hc[0].zoom),Va=void 0,Ea={});xc=xc.concat(Cd({key:vd+"[0]",value:Hc[0],valueSpec:{zoom:{}},style:Dc.style,styleSpec:Dc.styleSpec,objectElementValidators:{zoom:Ad,value:P}}))}else xc=xc.concat(P({key:vd+"[0]",value:Hc[0],valueSpec:{},style:Dc.style,styleSpec:Dc.styleSpec},Hc));return Ub(oa(Hc[1]))?
xc.concat([new Ma(vd+"[1]",Hc[1],"expressions are not allowed in function stops.")]):xc.concat(hf({key:vd+"[1]",value:Hc[1],valueSpec:ea,style:Dc.style,styleSpec:Dc.styleSpec}))}function P(Dc,xc){var Hc=Uc(Dc.value),vd=na(Dc.value);xc=null!==Dc.value?Dc.value:xc;if(!xa)xa=Hc;else if(Hc!==xa)return[new Ma(Dc.key,xc,Hc+" stop domain type must match previous stop domain type "+xa)];if("number"!==Hc&&"string"!==Hc&&"boolean"!==Hc)return[new Ma(Dc.key,xc,"stop domain value must be a number, string, or boolean")];
if("number"!==Hc&&"categorical"!==qa)return Hc="number expected, "+Hc+" found",fc(ea)&&void 0===qa&&(Hc+='\nIf you intended to use a categorical function, specify `"type": "categorical"`.'),[new Ma(Dc.key,xc,Hc)];if("categorical"===qa&&"number"===Hc&&(!isFinite(vd)||Math.floor(vd)!==vd))return[new Ma(Dc.key,xc,"integer expected, found "+vd)];if("categorical"!==qa&&"number"===Hc&&void 0!==Va&&vd<Va)return[new Ma(Dc.key,xc,"stop domain values must appear in ascending order")];Va=vd;if("categorical"===
qa&&vd in Ea)return[new Ma(Dc.key,xc,"stop domain values must be unique")];Ea[vd]=!0;return[]}var ea=u.valueSpec,qa=na(u.value.type),xa,Ea={},Va,Ya,gb="categorical"!==qa&&void 0===u.value.property,Fb=!gb,Sb="array"===Uc(u.value.stops)&&"array"===Uc(u.value.stops[0])&&"object"===Uc(u.value.stops[0][0]),jc=Cd({key:u.key,value:u.value,valueSpec:u.styleSpec.function,style:u.style,styleSpec:u.styleSpec,objectElementValidators:{stops:function(Dc){if("identity"===qa)return[new Ma(Dc.key,Dc.value,'identity function may not have a "stops" property')];
var xc=[],Hc=Dc.value;xc=xc.concat(Gd({key:Dc.key,value:Hc,valueSpec:Dc.valueSpec,style:Dc.style,styleSpec:Dc.styleSpec,arrayElementValidator:E}));"array"===Uc(Hc)&&0===Hc.length&&xc.push(new Ma(Dc.key,Hc,"array must have at least one stop"));return xc},default:function(Dc){return hf({key:Dc.key,value:Dc.value,valueSpec:ea,style:Dc.style,styleSpec:Dc.styleSpec})}}});"identity"===qa&&gb&&jc.push(new Ma(u.key,u.value,'missing required property "property"'));"identity"===qa||u.value.stops||jc.push(new Ma(u.key,
u.value,'missing required property "stops"'));"exponential"===qa&&u.valueSpec.expression&&!Pc(u.valueSpec)&&jc.push(new Ma(u.key,u.value,"exponential functions not supported"));8<=u.styleSpec.$version&&(Fb&&!fc(u.valueSpec)?jc.push(new Ma(u.key,u.value,"property functions not supported")):gb&&!Fc(u.valueSpec)&&jc.push(new Ma(u.key,u.value,"zoom functions not supported")));"categorical"!==qa&&!Sb||void 0!==u.value.property||jc.push(new Ma(u.key,u.value,'"property" property is required'));return jc}
function cd(u){var E=("property"===u.expressionContext?tc:lc)(oa(u.value),u.valueSpec);if("error"===E.result)return E.value.map(function(P){return new Ma(""+u.key+P.key,u.value,P.message)});E=E.value.expression||E.value._styleExpression.expression;if("property"===u.expressionContext&&"text-font"===u.propertyKey&&!E.outputDefined())return[new Ma(u.key,u.value,'Invalid data expression for "'+u.propertyKey+'". Output values must be contained as literals within the expression.')];if("property"===u.expressionContext&&
"layout"===u.propertyType&&!ab(E))return[new Ma(u.key,u.value,'"feature-state" data expressions are not supported with layout properties.')];if("filter"===u.expressionContext&&!ab(E))return[new Ma(u.key,u.value,'"feature-state" data expressions are not supported with filters.')];if(u.expressionContext&&0===u.expressionContext.indexOf("cluster")){if(!Db(E,["zoom","feature-state"]))return[new Ma(u.key,u.value,'"zoom" and "feature-state" expressions are not supported with cluster properties.')];if("cluster-initial"===
u.expressionContext&&!$a(E))return[new Ma(u.key,u.value,"Feature data expressions are not supported with initial expression part of cluster properties.")]}return[]}function Cc(u){var E=u.key,P=u.value;u=u.valueSpec;var ea=[];Array.isArray(u.values)?-1===u.values.indexOf(na(P))&&ea.push(new Ma(E,P,"expected one of ["+u.values.join(", ")+"], "+JSON.stringify(P)+" found")):-1===Object.keys(u.values).indexOf(na(P))&&ea.push(new Ma(E,P,"expected one of ["+Object.keys(u.values).join(", ")+"], "+JSON.stringify(P)+
" found"));return ea}function dd(u){if(!0===u||!1===u)return!0;if(!Array.isArray(u)||0===u.length)return!1;switch(u[0]){case "has":return 2<=u.length&&"$id"!==u[1]&&"$type"!==u[1];case "in":return 3<=u.length&&("string"!==typeof u[1]||Array.isArray(u[2]));case "!in":case "!has":case "none":return!1;case "\x3d\x3d":case "!\x3d":case "\x3e":case "\x3e\x3d":case "\x3c":case "\x3c\x3d":return 3!==u.length||Array.isArray(u[1])||Array.isArray(u[2]);case "any":case "all":var E=0;for(u=u.slice(1);E<u.length;E+=
1){var P=u[E];if(!dd(P)&&"boolean"!==typeof P)return!1}return!0;default:return!0}}function Vc(u){if(null===u||void 0===u)return{filter:function(){return!0},needGeometry:!1};dd(u)||(u=Md(u));var E=lc(u,cl);if("error"===E.result)throw Error(E.value.map(function(P){return P.key+": "+P.message}).join(", "));return{filter:function(P,ea,qa){return E.value.evaluate(P,ea,{},qa)},needGeometry:id(u)}}function Sc(u,E){return u<E?-1:u>E?1:0}function id(u){if(!Array.isArray(u))return!1;if("within"===u[0])return!0;
for(var E=1;E<u.length;E++)if(id(u[E]))return!0;return!1}function Md(u){if(!u)return!0;var E=u[0];return 1>=u.length?"any"!==E:"\x3d\x3d"===E?Sd(u[1],u[2],"\x3d\x3d"):"!\x3d"===E?Ke(Sd(u[1],u[2],"\x3d\x3d")):"\x3c"===E||"\x3e"===E||"\x3c\x3d"===E||"\x3e\x3d"===E?Sd(u[1],u[2],E):"any"===E?["any"].concat(u.slice(1).map(Md)):"all"===E?["all"].concat(u.slice(1).map(Md)):"none"===E?["all"].concat(u.slice(1).map(Md).map(Ke)):"in"===E?Td(u[1],u.slice(2)):"!in"===E?Ke(Td(u[1],u.slice(2))):"has"===E?Ue(u[1]):
"!has"===E?Ke(Ue(u[1])):"within"===E?u:!0}function Sd(u,E,P){switch(u){case "$type":return["filter-type-"+P,E];case "$id":return["filter-id-"+P,E];default:return["filter-"+P,u,E]}}function Td(u,E){if(0===E.length)return!1;switch(u){case "$type":return["filter-type-in",["literal",E]];case "$id":return["filter-id-in",["literal",E]];default:return 200<E.length&&!E.some(function(P){return typeof P!==typeof E[0]})?["filter-in-large",u,["literal",E.sort(Sc)]]:["filter-in-small",u,["literal",E]]}}function Ue(u){switch(u){case "$type":return!0;
case "$id":return["filter-has-id"];default:return["filter-has",u]}}function Ke(u){return["!",u]}function ve(u){return dd(oa(u.value))?cd(ka({},u,{expressionContext:"filter",valueSpec:{value:"boolean"}})):zf(u)}function zf(u){var E=u.value,P=u.key;if("array"!==Uc(E))return[new Ma(P,E,"array expected, "+Uc(E)+" found")];var ea=u.styleSpec,qa=[];if(1>E.length)return[new Ma(P,E,"filter array must have at least 1 element")];qa=qa.concat(Cc({key:P+"[0]",value:E[0],valueSpec:ea.filter_operator,style:u.style,
styleSpec:u.styleSpec}));switch(na(E[0])){case "\x3c":case "\x3c\x3d":case "\x3e":case "\x3e\x3d":2<=E.length&&"$type"===na(E[1])&&qa.push(new Ma(P,E,'"$type" cannot be use with operator "'+E[0]+'"'));case "\x3d\x3d":case "!\x3d":3!==E.length&&qa.push(new Ma(P,E,'filter array for operator "'+E[0]+'" must have 3 elements'));case "in":case "!in":if(2<=E.length){var xa=Uc(E[1]);"string"!==xa&&qa.push(new Ma(P+"[1]",E[1],"string expected, "+xa+" found"))}for(var Ea=2;Ea<E.length;Ea++)xa=Uc(E[Ea]),"$type"===
na(E[1])?qa=qa.concat(Cc({key:P+"["+Ea+"]",value:E[Ea],valueSpec:ea.geometry_type,style:u.style,styleSpec:u.styleSpec})):"string"!==xa&&"number"!==xa&&"boolean"!==xa&&qa.push(new Ma(P+"["+Ea+"]",E[Ea],"string, number, or boolean expected, "+xa+" found"));break;case "any":case "all":case "none":for(ea=1;ea<E.length;ea++)qa=qa.concat(zf({key:P+"["+ea+"]",value:E[ea],style:u.style,styleSpec:u.styleSpec}));break;case "has":case "!has":xa=Uc(E[1]);2!==E.length?qa.push(new Ma(P,E,'filter array for "'+E[0]+
'" operator must have 2 elements')):"string"!==xa&&qa.push(new Ma(P+"[1]",E[1],"string expected, "+xa+" found"));break;case "within":xa=Uc(E[1]),2!==E.length?qa.push(new Ma(P,E,'filter array for "'+E[0]+'" operator must have 2 elements')):"object"!==xa&&qa.push(new Ma(P+"[1]",E[1],"object expected, "+xa+" found"))}return qa}function Ef(u,E){var P=u.key,ea=u.style,qa=u.styleSpec,xa=u.value,Ea=u.objectKey,Va=qa[E+"_"+u.layerType];if(!Va)return[];var Ya=Ea.match(/^(.*)-transition$/);if("paint"===E&&
Ya&&Va[Ya[1]]&&Va[Ya[1]].transition)return hf({key:P,value:xa,valueSpec:qa.transition,style:ea,styleSpec:qa});Va=u.valueSpec||Va[Ea];if(!Va)return[new Ma(P,xa,'unknown property "'+Ea+'"')];var gb;if("string"===Uc(xa)&&fc(Va)&&!Va.tokens&&(gb=/^{([^}]+)}$/.exec(xa)))return[new Ma(P,xa,'"'+Ea+'" does not support interpolation syntax\nUse an identity property function instead: `{ "type": "identity", "property": '+JSON.stringify(gb[1])+" }`.")];gb=[];"symbol"===u.layerType&&("text-field"===Ea&&ea&&!ea.glyphs&&
gb.push(new Ma(P,xa,'use of "text-field" requires a style "glyphs" property')),"text-font"===Ea&&rb(oa(xa))&&"identity"===na(xa.type)&&gb.push(new Ma(P,xa,'"text-font" does not support identity functions')));return gb.concat(hf({key:u.key,value:xa,valueSpec:Va,style:ea,styleSpec:qa,expressionContext:"property",propertyType:E,propertyKey:Ea}))}function qf(u){return Ef(u,"paint")}function Ff(u){return Ef(u,"layout")}function Rf(u){var E=[],P=u.value,ea=u.key,qa=u.style,xa=u.styleSpec;P.type||P.ref||
E.push(new Ma(ea,P,'either "type" or "ref" is required'));var Ea=na(P.type),Va=na(P.ref);if(P.id)for(var Ya=na(P.id),gb=0;gb<u.arrayIndex;gb++){var Fb=qa.layers[gb];na(Fb.id)===Ya&&E.push(new Ma(ea,P.id,'duplicate layer id "'+P.id+'", previously used at line '+Fb.id.__line__))}if("ref"in P){["type","source","source-layer","filter","layout"].forEach(function(jc){jc in P&&E.push(new Ma(ea,P[jc],'"'+jc+'" is prohibited for ref layers'))});var Sb;qa.layers.forEach(function(jc){na(jc.id)===Va&&(Sb=jc)});
Sb?Sb.ref?E.push(new Ma(ea,P.ref,"ref cannot reference another ref layer")):Ea=na(Sb.type):E.push(new Ma(ea,P.ref,'ref layer "'+Va+'" not found'))}else"background"!==Ea&&(P.source?(Ya=(qa=qa.sources&&qa.sources[P.source])&&na(qa.type),qa?"vector"===Ya&&"raster"===Ea?E.push(new Ma(ea,P.source,'layer "'+P.id+'" requires a raster source')):"raster"===Ya&&"raster"!==Ea?E.push(new Ma(ea,P.source,'layer "'+P.id+'" requires a vector source')):"vector"!==Ya||P["source-layer"]?"raster-dem"===Ya&&"hillshade"!==
Ea?E.push(new Ma(ea,P.source,"raster-dem source can only be used with layer type 'hillshade'.")):"line"!==Ea||!P.paint||!P.paint["line-gradient"]||"geojson"===Ya&&qa.lineMetrics||E.push(new Ma(ea,P,'layer "'+P.id+'" specifies a line-gradient, which requires a GeoJSON source with `lineMetrics` enabled.')):E.push(new Ma(ea,P,'layer "'+P.id+'" must specify a "source-layer"')):E.push(new Ma(ea,P.source,'source "'+P.source+'" not found'))):E.push(new Ma(ea,P,'missing required property "source"')));return E=
E.concat(Cd({key:ea,value:P,valueSpec:xa.layer,style:u.style,styleSpec:u.styleSpec,objectElementValidators:{"*":function(){return[]},type:function(){return hf({key:ea+".type",value:P.type,valueSpec:xa.layer.type,style:u.style,styleSpec:u.styleSpec,object:P,objectKey:"type"})},filter:ve,layout:function(jc){return Cd({layer:P,key:jc.key,value:jc.value,style:jc.style,styleSpec:jc.styleSpec,objectElementValidators:{"*":function(Dc){return Ff(ka({layerType:Ea},Dc))}}})},paint:function(jc){return Cd({layer:P,
key:jc.key,value:jc.value,style:jc.style,styleSpec:jc.styleSpec,objectElementValidators:{"*":function(Dc){return qf(ka({layerType:Ea},Dc))}}})}}}))}function Ud(u){var E=u.value;u=u.key;var P=Uc(E);return"string"!==P?[new Ma(u,E,"string expected, "+P+" found")]:[]}function Ae(u){var E=u.value,P=u.key,ea=u.styleSpec,qa=u.style;if(!E.type)return[new Ma(P,E,'"type" is required')];var xa=na(E.type);switch(xa){case "vector":case "raster":case "raster-dem":return u=Cd({key:P,value:E,valueSpec:ea["source_"+
xa.replace("-","_")],style:u.style,styleSpec:ea,objectElementValidators:Qk});case "geojson":u=Cd({key:P,value:E,valueSpec:ea.source_geojson,style:qa,styleSpec:ea,objectElementValidators:Qk});if(E.cluster)for(var Ea in E.clusterProperties)ea=E.clusterProperties[Ea],qa=ea[0],qa="string"===typeof qa?[qa,["accumulated"],["get",Ea]]:qa,u.push.apply(u,cd({key:P+"."+Ea+".map",value:ea[1],expressionContext:"cluster-map"})),u.push.apply(u,cd({key:P+"."+Ea+".reduce",value:qa,expressionContext:"cluster-reduce"}));
return u;case "video":return Cd({key:P,value:E,valueSpec:ea.source_video,style:qa,styleSpec:ea});case "image":return Cd({key:P,value:E,valueSpec:ea.source_image,style:qa,styleSpec:ea});case "canvas":return[new Ma(P,null,"Please use runtime APIs to add canvas sources, rather than including them in stylesheets.","source.canvas")];default:return Cc({key:P+".type",value:E.type,valueSpec:{values:"vector raster raster-dem geojson video image".split(" ")},style:qa,styleSpec:ea})}}function rf(u){var E=u.value,
P=u.styleSpec,ea=P.light;u=u.style;var qa=[],xa=Uc(E);if(void 0===E)return qa;if("object"!==xa)return qa=qa.concat([new Ma("light",E,"object expected, "+xa+" found")]);for(var Ea in E)qa=(xa=Ea.match(/^(.*)-transition$/))&&ea[xa[1]]&&ea[xa[1]].transition?qa.concat(hf({key:Ea,value:E[Ea],valueSpec:P.transition,style:u,styleSpec:P})):ea[Ea]?qa.concat(hf({key:Ea,value:E[Ea],valueSpec:ea[Ea],style:u,styleSpec:P})):qa.concat([new Ma(Ea,E[Ea],'unknown property "'+Ea+'"')]);return qa}function hf(u){var E=
u.value,P=u.valueSpec,ea=u.styleSpec;return P.expression&&rb(na(E))?Nc(u):P.expression&&Ub(oa(E))?cd(u):P.type&&yk[P.type]?yk[P.type](u):Cd(ka({},u,{valueSpec:P.type?ea[P.type]:P}))}function Te(u){var E=u.value,P=u.key;u=Ud(u);if(u.length)return u;-1===E.indexOf("{fontstack}")&&u.push(new Ma(P,E,'"glyphs" url must include a "{fontstack}" token'));-1===E.indexOf("{range}")&&u.push(new Ma(P,E,'"glyphs" url must include a "{range}" token'));return u}function Be(u,E){void 0===E&&(E=Da);var P=[];P=P.concat(hf({key:"",
value:u,valueSpec:E.$root,styleSpec:E,style:u,objectElementValidators:{glyphs:Te,"*":function(){return[]}}}));u.constants&&(P=P.concat(la({key:"constants",value:u.constants,style:u,styleSpec:E})));return Ie(P)}function Ie(u){return[].concat(u).sort(function(E,P){return E.line-P.line})}function nf(u){return function(){for(var E=[],P=arguments.length;P--;)E[P]=arguments[P];return Ie(u.apply(this,E))}}function Zc(u,E){var P=!1;if(E&&E.length)for(var ea=0;ea<E.length;ea+=1)u.fire(new ua(Error(E[ea].message))),
P=!0;return P}function Bd(u,E,P){var ea=this.cells=[];if(u instanceof ArrayBuffer){this.arrayBuffer=u;var qa=new Int32Array(this.arrayBuffer);u=qa[0];E=qa[1];P=qa[2];this.d=E+2*P;for(var xa=0;xa<this.d*this.d;xa++){var Ea=qa[Yi+xa],Va=qa[Yi+xa+1];ea.push(Ea===Va?null:qa.subarray(Ea,Va))}xa=qa[Yi+ea.length+1];this.keys=qa.subarray(qa[Yi+ea.length],xa);this.bboxes=qa.subarray(xa);this.insert=this._insertReadonly}else{this.d=E+2*P;for(qa=0;qa<this.d*this.d;qa++)ea.push([]);this.keys=[];this.bboxes=[]}this.n=
E;this.extent=u;this.padding=P;this.scale=E/u;this.uid=0;E=P/E*u;this.min=-E;this.max=u+E}function Ob(u,E,P){void 0===P&&(P={});Object.defineProperty(E,"_classRegistryKey",{value:u,writeable:!1});Aj[u]={klass:E,omit:P.omit||[],shallow:P.shallow||[]}}function Zb(u){return u&&"undefined"!==typeof ArrayBuffer&&(u instanceof ArrayBuffer||u.constructor&&"ArrayBuffer"===u.constructor.name)}function Mc(u,E){if(null===u||void 0===u||"boolean"===typeof u||"number"===typeof u||"string"===typeof u||u instanceof
Boolean||u instanceof Number||u instanceof String||u instanceof Date||u instanceof RegExp)return u;if(Zb(u)||hk&&u instanceof hk)return E&&E.push(u),u;if(ArrayBuffer.isView(u))return E&&E.push(u.buffer),u;if(u instanceof Rk)return E&&E.push(u.data.buffer),u;if(Array.isArray(u)){for(var P=[],ea=0;ea<u.length;ea+=1)P.push(Mc(u[ea],E));return P}if("object"===typeof u){var qa=u.constructor;P=qa._classRegistryKey;if(!P)throw Error("can't serialize object of unregistered class");ea=qa.serialize?qa.serialize(u,
E):{};if(!qa.serialize){for(var xa in u)!u.hasOwnProperty(xa)||0<=Aj[P].omit.indexOf(xa)||(qa=u[xa],ea[xa]=0<=Aj[P].shallow.indexOf(xa)?qa:Mc(qa,E));u instanceof Error&&(ea.message=u.message)}if(ea.$name)throw Error("$name property is reserved for worker serialization logic.");"Object"!==P&&(ea.$name=P);return ea}throw Error("can't serialize object of type "+typeof u);}function Fd(u){if(null===u||void 0===u||"boolean"===typeof u||"number"===typeof u||"string"===typeof u||u instanceof Boolean||u instanceof
Number||u instanceof String||u instanceof Date||u instanceof RegExp||Zb(u)||hk&&u instanceof hk||ArrayBuffer.isView(u)||u instanceof Rk)return u;if(Array.isArray(u))return u.map(Fd);if("object"===typeof u){var E=u.$name||"Object",P=Aj[E].klass;if(!P)throw Error("can't deserialize unregistered class "+E);if(P.deserialize)return P.deserialize(u);P=Object.create(P.prototype);for(var ea=0,qa=Object.keys(u);ea<qa.length;ea+=1){var xa=qa[ea];if("$name"!==xa){var Ea=u[xa];P[xa]=0<=Aj[E].shallow.indexOf(xa)?
Ea:Fd(Ea)}}return P}throw Error("can't deserialize object of type "+typeof u);}function rd(u){for(var E=0;E<u.length;E+=1)if(Hd(u[E].charCodeAt(0)))return!0;return!1}function pe(u){for(var E=0;E<u.length;E+=1){var P=u[E].charCodeAt(0);if(Je.Arabic(P)||Je["Arabic Supplement"](P)||Je["Arabic Extended-A"](P)||Je["Arabic Presentation Forms-A"](P)||Je["Arabic Presentation Forms-B"](P))return!1}return!0}function Hd(u){return 746===u||747===u?!0:4352>u?!1:Je["Bopomofo Extended"](u)||Je.Bopomofo(u)||Je["CJK Compatibility Forms"](u)&&
!(65097<=u&&65103>=u)||Je["CJK Compatibility Ideographs"](u)||Je["CJK Compatibility"](u)||Je["CJK Radicals Supplement"](u)||Je["CJK Strokes"](u)||Je["CJK Symbols and Punctuation"](u)&&!(12296<=u&&12305>=u||12308<=u&&12319>=u)&&12336!==u||Je["CJK Unified Ideographs Extension A"](u)||Je["CJK Unified Ideographs"](u)||Je["Enclosed CJK Letters and Months"](u)||Je["Hangul Compatibility Jamo"](u)||Je["Hangul Jamo Extended-A"](u)||Je["Hangul Jamo Extended-B"](u)||Je["Hangul Jamo"](u)||Je["Hangul Syllables"](u)||
Je.Hiragana(u)||Je["Ideographic Description Characters"](u)||Je.Kanbun(u)||Je["Kangxi Radicals"](u)||Je["Katakana Phonetic Extensions"](u)||Je.Katakana(u)&&12540!==u||Je["Halfwidth and Fullwidth Forms"](u)&&!(65288===u||65289===u||65293===u||65306<=u&&65310>=u||65339===u||65341===u||65343===u||65371<=u&&65503>=u||65507===u||65512<=u&&65519>=u)||Je["Small Form Variants"](u)&&!(65112<=u&&65118>=u||65123<=u&&65126>=u)||Je["Unified Canadian Aboriginal Syllabics"](u)||Je["Unified Canadian Aboriginal Syllabics Extended"](u)||
Je["Vertical Forms"](u)||Je["Yijing Hexagram Symbols"](u)||Je["Yi Syllables"](u)||Je["Yi Radicals"](u)?!0:!1}function qe(u){var E;(E=Hd(u))||(E=Je["Latin-1 Supplement"](u)&&(167===u||169===u||174===u||177===u||188===u||189===u||190===u||215===u||247===u)||Je["General Punctuation"](u)&&(8214===u||8224===u||8225===u||8240===u||8241===u||8251===u||8252===u||8258===u||8263===u||8264===u||8265===u||8273===u)||Je["Letterlike Symbols"](u)||Je["Number Forms"](u)||Je["Miscellaneous Technical"](u)&&(8960<=
u&&8967>=u||8972<=u&&8991>=u||8996<=u&&9E3>=u||9003===u||9085<=u&&9114>=u||9150<=u&&9165>=u||9167===u||9169<=u&&9179>=u||9186<=u&&9215>=u)||Je["Control Pictures"](u)&&9251!==u||Je["Optical Character Recognition"](u)||Je["Enclosed Alphanumerics"](u)||Je["Geometric Shapes"](u)||Je["Miscellaneous Symbols"](u)&&!(9754<=u&&9759>=u)||Je["Miscellaneous Symbols and Arrows"](u)&&(11026<=u&&11055>=u||11088<=u&&11097>=u||11192<=u&&11243>=u)||Je["CJK Symbols and Punctuation"](u)||Je.Katakana(u)||Je["Private Use Area"](u)||
Je["CJK Compatibility Forms"](u)||Je["Small Form Variants"](u)||Je["Halfwidth and Fullwidth Forms"](u)||8734===u||8756===u||8757===u||9984<=u&&10087>=u||10102<=u&&10131>=u||65532===u||65533===u?!0:!1);return!E}function Ge(u){return 1424<=u&&2303>=u||Je["Arabic Presentation Forms-A"](u)||Je["Arabic Presentation Forms-B"](u)}function oe(){Rj.fire(new ca("pluginStateChange",{pluginStatus:Eh,pluginURL:Zi}))}function xb(u,E){void 0===E&&(E=1);var P=0,ea=0;u=u.map(function(xa){var Ea=Sj[xa.type].BYTES_PER_ELEMENT,
Va=P=oc(P,Math.max(E,Ea)),Ya=xa.components||1;ea=Math.max(ea,Ea);P+=Ea*Ya;return{name:xa.name,type:xa.type,components:Ya,offset:Va}});var qa=oc(P,Math.max(ea,E));return{members:u,size:qa,alignment:E}}function oc(u,E){return Math.ceil(u/E)*E}function Yb(u,E){u=d(Math.floor(u),0,255);E=d(Math.floor(E),0,255);return 256*u+E}function Bc(u){var E=+u;return!isNaN(E)&&E<=Sk?E:$i(String(u))}function Yc(u,E,P,ea){for(;P<ea;){for(var qa=u[P+ea>>1],xa=P-1,Ea=ea+1;;){do xa++;while(u[xa]<qa);do Ea--;while(u[Ea]>
qa);if(xa>=Ea)break;bd(u,xa,Ea);bd(E,3*xa,3*Ea);bd(E,3*xa+1,3*Ea+1);bd(E,3*xa+2,3*Ea+2)}Ea-P<ea-Ea?(Yc(u,E,P,Ea),P=Ea+1):(Yc(u,E,Ea+1,ea),ea=Ea)}}function bd(u,E,P){var ea=u[E];u[E]=u[P];u[P]=ea}function Tc(u){return[Yb(255*u.r,255*u.g),Yb(255*u.b,255*u.a)]}function Oc(u,E,P){var ea={color:{source:Bj,composite:Hi},number:{source:Ii,composite:Bj}};return(u={"line-pattern":{source:Ai,composite:Ai},"fill-pattern":{source:Ai,composite:Ai},"fill-extrusion-pattern":{source:Ai,composite:Ai}}[u])&&u[P]||
ea[E][P]}function wc(u){var E=8192/u.extent;u=u.loadGeometry();for(var P=0;P<u.length;P++)for(var ea=u[P],qa=0;qa<ea.length;qa++){var xa=ea[qa];xa.x=Math.round(xa.x*E);xa.y=Math.round(xa.y*E);if(xa.x<zg.min||xa.x>zg.max||xa.y<zg.min||xa.y>zg.max)D("Geometry exceeds allowed extent, reduce your vector tile buffer size"),xa.x=d(xa.x,zg.min,zg.max),xa.y=d(xa.y,zg.min,zg.max)}return u}function rc(u,E,P,ea,qa){u.emplaceBack(2*E+(ea+1)/2,2*P+(qa+1)/2)}function pc(u,E){for(var P=0;P<u.length;P++)if(bf(E,
u[P]))return!0;for(P=0;P<E.length;P++)if(bf(u,E[P]))return!0;return ae(u,E)?!0:!1}function ud(u,E){if(1===u.length)return Xd(E,u[0]);for(var P=0;P<E.length;P++)for(var ea=E[P],qa=0;qa<ea.length;qa++)if(bf(u,ea[qa]))return!0;for(P=0;P<u.length;P++)if(Xd(E,u[P]))return!0;for(P=0;P<E.length;P++)if(ae(u,E[P]))return!0;return!1}function ae(u,E){if(0===u.length||0===E.length)return!1;for(var P=0;P<u.length-1;P++)for(var ea=u[P],qa=u[P+1],xa=0;xa<E.length-1;xa++){var Ea=ea,Va=qa,Ya=E[xa],gb=E[xa+1];if(C(Ea,
Ya,gb)!==C(Va,Ya,gb)&&C(Ea,Va,Ya)!==C(Ea,Va,gb))return!0}return!1}function Wd(u,E,P){P*=P;if(1===E.length)return u.distSqr(E[0])<P;for(var ea=1;ea<E.length;ea++)if(Ce(u,E[ea-1],E[ea])<P)return!0;return!1}function Ce(u,E,P){var ea=E.distSqr(P);if(0===ea)return u.distSqr(E);ea=((u.x-E.x)*(P.x-E.x)+(u.y-E.y)*(P.y-E.y))/ea;return 0>ea?u.distSqr(E):1<ea?u.distSqr(P):u.distSqr(P.sub(E)._mult(ea)._add(E))}function Xd(u,E){for(var P=!1,ea,qa,xa,Ea=0;Ea<u.length;Ea++){ea=u[Ea];var Va=0;for(xa=ea.length-1;Va<
ea.length;xa=Va++)qa=ea[Va],xa=ea[xa],qa.y>E.y!==xa.y>E.y&&E.x<(xa.x-qa.x)*(E.y-qa.y)/(xa.y-qa.y)+qa.x&&(P=!P)}return P}function bf(u,E){for(var P=!1,ea=0,qa=u.length-1;ea<u.length;qa=ea++){var xa=u[ea];qa=u[qa];xa.y>E.y!==qa.y>E.y&&E.x<(qa.x-xa.x)*(E.y-xa.y)/(qa.y-xa.y)+xa.x&&(P=!P)}return P}function Ve(u,E,P){var ea=E.paint.get(u).value;return"constant"===ea.kind?ea.value:P.programConfigurations.get(E.id).getMaxValue(u)}function vf(u){return Math.sqrt(u[0]*u[0]+u[1]*u[1])}function Oe(u,E,P,ea,qa){if(!E[0]&&
!E[1])return u;E=af.convert(E)._mult(qa);"viewport"===P&&E._rotate(-ea);P=[];for(ea=0;ea<u.length;ea++)P.push(u[ea].sub(E));return P}function Mf(u){u[0]=1;u[1]=0;u[2]=0;u[3]=0;u[4]=0;u[5]=1;u[6]=0;u[7]=0;u[8]=0;u[9]=0;u[10]=1;u[11]=0;u[12]=0;u[13]=0;u[14]=0;u[15]=1;return u}function ng(u,E,P){var ea=E[0],qa=E[1],xa=E[2],Ea=E[3],Va=E[4],Ya=E[5],gb=E[6],Fb=E[7],Sb=E[8],jc=E[9],Dc=E[10],xc=E[11],Hc=E[12],vd=E[13],ce=E[14];E=E[15];var Ed=P[0],Kd=P[1],fe=P[2],te=P[3];u[0]=Ed*ea+Kd*Va+fe*Sb+te*Hc;u[1]=
Ed*qa+Kd*Ya+fe*jc+te*vd;u[2]=Ed*xa+Kd*gb+fe*Dc+te*ce;u[3]=Ed*Ea+Kd*Fb+fe*xc+te*E;Ed=P[4];Kd=P[5];fe=P[6];te=P[7];u[4]=Ed*ea+Kd*Va+fe*Sb+te*Hc;u[5]=Ed*qa+Kd*Ya+fe*jc+te*vd;u[6]=Ed*xa+Kd*gb+fe*Dc+te*ce;u[7]=Ed*Ea+Kd*Fb+fe*xc+te*E;Ed=P[8];Kd=P[9];fe=P[10];te=P[11];u[8]=Ed*ea+Kd*Va+fe*Sb+te*Hc;u[9]=Ed*qa+Kd*Ya+fe*jc+te*vd;u[10]=Ed*xa+Kd*gb+fe*Dc+te*ce;u[11]=Ed*Ea+Kd*Fb+fe*xc+te*E;Ed=P[12];Kd=P[13];fe=P[14];te=P[15];u[12]=Ed*ea+Kd*Va+fe*Sb+te*Hc;u[13]=Ed*qa+Kd*Ya+fe*jc+te*vd;u[14]=Ed*xa+Kd*gb+fe*Dc+te*
ce;u[15]=Ed*Ea+Kd*Fb+fe*xc+te*E;return u}function Sg(){var u=new eh(3);eh!=Float32Array&&(u[0]=0,u[1]=0,u[2]=0);return u}function Og(){var u=new eh(4);eh!=Float32Array&&(u[0]=0,u[1]=0,u[2]=0,u[3]=0);return u}function Ah(u,E,P){var ea=E[0],qa=E[1],xa=E[2];E=E[3];u[0]=P[0]*ea+P[4]*qa+P[8]*xa+P[12]*E;u[1]=P[1]*ea+P[5]*qa+P[9]*xa+P[13]*E;u[2]=P[2]*ea+P[6]*qa+P[10]*xa+P[14]*E;u[3]=P[3]*ea+P[7]*qa+P[11]*xa+P[15]*E;return u}function Kh(){var u=new eh(2);eh!=Float32Array&&(u[0]=0,u[1]=0);return u}function rh(u,
E){u=Ah([],[u.x,u.y,0,1],E);return new af(u[0]/u[3],u[1]/u[3])}function Yg(u,E){return u.map(function(P){return rh(P,E)})}function sh(u,E,P,ea){var qa=E.width;E=E.height;if(!ea)ea=new Uint8Array(qa*E*P);else if(ea instanceof Uint8ClampedArray)ea=new Uint8Array(ea.buffer);else if(ea.length!==qa*E*P)throw new RangeError("mismatched image size");u.width=qa;u.height=E;u.data=ea;return u}function ah(u,E,P){var ea=E.width;E=E.height;if(ea!==u.width||E!==u.height){var qa=sh({},{width:ea,height:E},P);bh(u,
qa,{x:0,y:0},{x:0,y:0},{width:Math.min(u.width,ea),height:Math.min(u.height,E)},P);u.width=ea;u.height=E;u.data=qa.data}}function bh(u,E,P,ea,qa,xa){if(0===qa.width||0===qa.height)return E;if(qa.width>u.width||qa.height>u.height||P.x>u.width-qa.width||P.y>u.height-qa.height)throw new RangeError("out of range source coordinates for image copy");if(qa.width>E.width||qa.height>E.height||ea.x>E.width-qa.width||ea.y>E.height-qa.height)throw new RangeError("out of range destination coordinates for image copy");
for(var Ea=u.data,Va=E.data,Ya=0;Ya<qa.height;Ya++)for(var gb=((P.y+Ya)*u.width+P.x)*xa,Fb=((ea.y+Ya)*E.width+ea.x)*xa,Sb=0;Sb<qa.width*xa;Sb++)Va[Fb+Sb]=Ea[gb+Sb];return E}function Th(u,E){for(var P=new Uint8Array(1024),ea={},qa=0,xa=0;256>qa;qa++,xa+=4){ea[E]=qa/255;var Ea=u.evaluate(ea);P[xa+0]=Math.floor(255*Ea.r/Ea.a);P[xa+1]=Math.floor(255*Ea.g/Ea.a);P[xa+2]=Math.floor(255*Ea.b/Ea.a);P[xa+3]=Math.floor(255*Ea.a)}return new ag({width:256,height:1},P)}function ch(u,E,P){P=P||2;var ea=E&&E.length,
qa=ea?E[0]*P:u.length,xa=bg(u,0,qa,P,!0),Ea=[];if(!xa||xa.next===xa.prev)return Ea;var Va;if(ea){var Ya=P;ea=[];var gb;var Fb=0;for(gb=E.length;Fb<gb;Fb++){var Sb=E[Fb]*Ya;var jc=Fb<gb-1?E[Fb+1]*Ya:u.length;Sb=bg(u,Sb,jc,Ya,!1);Sb===Sb.next&&(Sb.steiner=!0);jc=ea;var Dc=jc.push,xc=Sb,Hc=Sb;do{if(xc.x<Hc.x||xc.x===Hc.x&&xc.y<Hc.y)Hc=xc;xc=xc.next}while(xc!==Sb);Dc.call(jc,Hc)}ea.sort(Tg);for(Fb=0;Fb<ea.length;Fb++){Ya=ea[Fb];E=xa;if(E=Ig(Ya,E))Ya=Bh(E,Ya),og(E,E.next),og(Ya,Ya.next);xa=og(xa,xa.next)}}if(u.length>
80*P){var vd=Va=u[0];var ce=ea=u[1];for(Ya=P;Ya<qa;Ya+=P)Fb=u[Ya],E=u[Ya+1],Fb<vd&&(vd=Fb),E<ce&&(ce=E),Fb>Va&&(Va=Fb),E>ea&&(ea=E);Va=Math.max(Va-vd,ea-ce);Va=0!==Va?1/Va:0}qg(xa,Ea,P,vd,ce,Va);return Ea}function bg(u,E,P,ea,qa){if(qa===0<vh(u,E,P,ea))for(qa=E;qa<P;qa+=ea)var xa=Gg(qa,u[qa],u[qa+1],xa);else for(qa=P-ea;qa>=E;qa-=ea)xa=Gg(qa,u[qa],u[qa+1],xa);xa&&kh(xa,xa.next)&&(lh(xa),xa=xa.next);return xa}function og(u,E){if(!u)return u;E||(E=u);do{var P=!1;if(u.steiner||!kh(u,u.next)&&0!==Wf(u.prev,
u,u.next))u=u.next;else{lh(u);u=E=u.prev;if(u===u.next)break;P=!0}}while(P||u!==E);return E}function qg(u,E,P,ea,qa,xa,Ea){if(u){if(!Ea&&xa){var Va=u,Ya=Va;do null===Ya.z&&(Ya.z=jh(Ya.x,Ya.y,ea,qa,xa)),Ya.prevZ=Ya.prev,Ya=Ya.nextZ=Ya.next;while(Ya!==Va);Ya.prevZ.nextZ=null;Ya.prevZ=null;Va=Ya;var gb,Fb,Sb,jc,Dc=1;do{Ya=Va;var xc=Va=null;for(Fb=0;Ya;){Fb++;var Hc=Ya;for(gb=Sb=0;gb<Dc&&(Sb++,Hc=Hc.nextZ,Hc);gb++);for(jc=Dc;0<Sb||0<jc&&Hc;)0!==Sb&&(0===jc||!Hc||Ya.z<=Hc.z)?(gb=Ya,Ya=Ya.nextZ,Sb--):(gb=
Hc,Hc=Hc.nextZ,jc--),xc?xc.nextZ=gb:Va=gb,gb.prevZ=xc,xc=gb;Ya=Hc}xc.nextZ=null;Dc*=2}while(1<Fb)}for(Va=u;u.prev!==u.next;){Ya=u.prev;Hc=u.next;if(xa)xc=ug(u,ea,qa,xa);else a:if(xc=u,Fb=xc.prev,Sb=xc,Dc=xc.next,0<=Wf(Fb,Sb,Dc))xc=!1;else{for(gb=xc.next.next;gb!==xc.prev;){if(Ug(Fb.x,Fb.y,Sb.x,Sb.y,Dc.x,Dc.y,gb.x,gb.y)&&0<=Wf(gb.prev,gb,gb.next)){xc=!1;break a}gb=gb.next}xc=!0}if(xc)E.push(Ya.i/P),E.push(u.i/P),E.push(Hc.i/P),lh(u),Va=u=Hc.next;else if(u=Hc,u===Va){if(!Ea)qg(og(u),E,P,ea,qa,xa,1);
else if(1===Ea){u=og(u);Ea=E;Va=P;Ya=u;do Hc=Ya.prev,xc=Ya.next.next,!kh(Hc,xc)&&pg(Hc,Ya,Ya.next,xc)&&uh(Hc,xc)&&uh(xc,Hc)&&(Ea.push(Hc.i/Va),Ea.push(Ya.i/Va),Ea.push(xc.i/Va),lh(Ya),lh(Ya.next),Ya=u=xc),Ya=Ya.next;while(Ya!==u);u=og(Ya);qg(u,E,P,ea,qa,xa,2)}else if(2===Ea)a:{Ea=u;do{for(Va=Ea.next.next;Va!==Ea.prev;){if(Ya=Ea.i!==Va.i){Ya=Ea;Hc=Va;if(xc=Ya.next.i!==Hc.i&&Ya.prev.i!==Hc.i){b:{xc=Ya;do{if(xc.i!==Ya.i&&xc.next.i!==Ya.i&&xc.i!==Hc.i&&xc.next.i!==Hc.i&&pg(xc,xc.next,Ya,Hc)){xc=!0;break b}xc=
xc.next}while(xc!==Ya);xc=!1}xc=!xc}if(xc){if(xc=uh(Ya,Hc)&&uh(Hc,Ya)){xc=Ya;Fb=!1;Sb=(Ya.x+Hc.x)/2;Dc=(Ya.y+Hc.y)/2;do xc.y>Dc!==xc.next.y>Dc&&xc.next.y!==xc.y&&Sb<(xc.next.x-xc.x)*(Dc-xc.y)/(xc.next.y-xc.y)+xc.x&&(Fb=!Fb),xc=xc.next;while(xc!==Ya);xc=Fb}xc=xc&&(Wf(Ya.prev,Ya,Hc.prev)||Wf(Ya,Hc.prev,Hc))||kh(Ya,Hc)&&0<Wf(Ya.prev,Ya,Ya.next)&&0<Wf(Hc.prev,Hc,Hc.next)}Ya=xc}if(Ya){u=Bh(Ea,Va);Ea=og(Ea,Ea.next);u=og(u,u.next);qg(Ea,E,P,ea,qa,xa);qg(u,E,P,ea,qa,xa);break a}Va=Va.next}Ea=Ea.next}while(Ea!==
u)}break}}}}function ug(u,E,P,ea){var qa=u.prev,xa=u.next;if(0<=Wf(qa,u,xa))return!1;var Ea=qa.x>u.x?qa.x>xa.x?qa.x:xa.x:u.x>xa.x?u.x:xa.x,Va=qa.y>u.y?qa.y>xa.y?qa.y:xa.y:u.y>xa.y?u.y:xa.y,Ya=jh(qa.x<u.x?qa.x<xa.x?qa.x:xa.x:u.x<xa.x?u.x:xa.x,qa.y<u.y?qa.y<xa.y?qa.y:xa.y:u.y<xa.y?u.y:xa.y,E,P,ea);E=jh(Ea,Va,E,P,ea);P=u.prevZ;for(ea=u.nextZ;P&&P.z>=Ya&&ea&&ea.z<=E;){if(P!==u.prev&&P!==u.next&&Ug(qa.x,qa.y,u.x,u.y,xa.x,xa.y,P.x,P.y)&&0<=Wf(P.prev,P,P.next))return!1;P=P.prevZ;if(ea!==u.prev&&ea!==u.next&&
Ug(qa.x,qa.y,u.x,u.y,xa.x,xa.y,ea.x,ea.y)&&0<=Wf(ea.prev,ea,ea.next))return!1;ea=ea.nextZ}for(;P&&P.z>=Ya;){if(P!==u.prev&&P!==u.next&&Ug(qa.x,qa.y,u.x,u.y,xa.x,xa.y,P.x,P.y)&&0<=Wf(P.prev,P,P.next))return!1;P=P.prevZ}for(;ea&&ea.z<=E;){if(ea!==u.prev&&ea!==u.next&&Ug(qa.x,qa.y,u.x,u.y,xa.x,xa.y,ea.x,ea.y)&&0<=Wf(ea.prev,ea,ea.next))return!1;ea=ea.nextZ}return!0}function Tg(u,E){return u.x-E.x}function Ig(u,E){var P=E,ea=u.x,qa=u.y,xa=-Infinity;do{if(qa<=P.y&&qa>=P.next.y&&P.next.y!==P.y){var Ea=
P.x+(qa-P.y)*(P.next.x-P.x)/(P.next.y-P.y);if(Ea<=ea&&Ea>xa){xa=Ea;if(Ea===ea){if(qa===P.y)return P;if(qa===P.next.y)return P.next}var Va=P.x<P.next.x?P:P.next}}P=P.next}while(P!==E);if(!Va)return null;if(ea===xa)return Va;E=Va;Ea=Va.x;var Ya=Va.y,gb=Infinity;P=Va;do{if(ea>=P.x&&P.x>=Ea&&ea!==P.x&&Ug(qa<Ya?ea:xa,qa,Ea,Ya,qa<Ya?xa:ea,qa,P.x,P.y)){var Fb=Math.abs(qa-P.y)/(ea-P.x);var Sb;if((Sb=uh(P,u))&&!(Sb=Fb<gb)&&(Sb=Fb===gb)&&!(Sb=P.x>Va.x)&&(Sb=P.x===Va.x)){Sb=Va;var jc=P;Sb=0>Wf(Sb.prev,Sb,jc.prev)&&
0>Wf(jc.next,Sb,Sb.next)}Sb&&(Va=P,gb=Fb)}P=P.next}while(P!==E);return Va}function jh(u,E,P,ea,qa){u=32767*(u-P)*qa;E=32767*(E-ea)*qa;u=(u|u<<8)&16711935;u=(u|u<<4)&252645135;u=(u|u<<2)&858993459;E=(E|E<<8)&16711935;E=(E|E<<4)&252645135;E=(E|E<<2)&858993459;return(u|u<<1)&1431655765|((E|E<<1)&1431655765)<<1}function Ug(u,E,P,ea,qa,xa,Ea,Va){return 0<=(qa-Ea)*(E-Va)-(u-Ea)*(xa-Va)&&0<=(u-Ea)*(ea-Va)-(P-Ea)*(E-Va)&&0<=(P-Ea)*(xa-Va)-(qa-Ea)*(ea-Va)}function Wf(u,E,P){return(E.y-u.y)*(P.x-E.x)-(E.x-
u.x)*(P.y-E.y)}function kh(u,E){return u.x===E.x&&u.y===E.y}function pg(u,E,P,ea){var qa=th(Wf(u,E,P)),xa=th(Wf(u,E,ea)),Ea=th(Wf(P,ea,u)),Va=th(Wf(P,ea,E));return qa!==xa&&Ea!==Va||0===qa&&Bg(u,P,E)||0===xa&&Bg(u,ea,E)||0===Ea&&Bg(P,u,ea)||0===Va&&Bg(P,E,ea)?!0:!1}function Bg(u,E,P){return E.x<=Math.max(u.x,P.x)&&E.x>=Math.min(u.x,P.x)&&E.y<=Math.max(u.y,P.y)&&E.y>=Math.min(u.y,P.y)}function th(u){return 0<u?1:0>u?-1:0}function uh(u,E){return 0>Wf(u.prev,u,u.next)?0<=Wf(u,E,u.next)&&0<=Wf(u,u.prev,
E):0>Wf(u,E,u.prev)||0>Wf(u,u.next,E)}function Bh(u,E){var P=new Lh(u.i,u.x,u.y),ea=new Lh(E.i,E.x,E.y),qa=u.next,xa=E.prev;u.next=E;E.prev=u;P.next=qa;qa.prev=P;ea.next=P;P.prev=ea;xa.next=ea;ea.prev=xa;return ea}function Gg(u,E,P,ea){u=new Lh(u,E,P);ea?(u.next=ea.next,u.prev=ea,ea.next.prev=u,ea.next=u):(u.prev=u,u.next=u);return u}function lh(u){u.next.prev=u.prev;u.prev.next=u.next;u.prevZ&&(u.prevZ.nextZ=u.nextZ);u.nextZ&&(u.nextZ.prevZ=u.prevZ)}function Lh(u,E,P){this.i=u;this.x=E;this.y=P;
this.nextZ=this.prevZ=this.z=this.next=this.prev=null;this.steiner=!1}function vh(u,E,P,ea){for(var qa=0,xa=P-ea;E<P;E+=ea)qa+=(u[xa]-u[E])*(u[E+1]+u[xa+1]),xa=E;return qa}function Ga(u,E,P,ea,qa){for(;ea>P;){if(600<ea-P){var xa=ea-P+1,Ea=E-P+1,Va=Math.log(xa),Ya=.5*Math.exp(2*Va/3);Va=.5*Math.sqrt(Va*Ya*(xa-Ya)/xa)*(0>Ea-xa/2?-1:1);Ga(u,E,Math.max(P,Math.floor(E-Ea*Ya/xa+Va)),Math.min(ea,Math.floor(E+(xa-Ea)*Ya/xa+Va)),qa)}xa=u[E];Ea=P;Ya=ea;Fa(u,P,E);for(0<qa(u[ea],xa)&&Fa(u,P,ea);Ea<Ya;){Fa(u,
Ea,Ya);Ea++;for(Ya--;0>qa(u[Ea],xa);)Ea++;for(;0<qa(u[Ya],xa);)Ya--}0===qa(u[P],xa)?Fa(u,P,Ya):(Ya++,Fa(u,Ya,ea));Ya<=E&&(P=Ya+1);E<=Ya&&(ea=Ya-1)}}function Fa(u,E,P){var ea=u[E];u[E]=u[P];u[P]=ea}function Oa(u,E){return u<E?-1:u>E?1:0}function Sa(u,E){var P=u.length;if(1>=P)return[u];for(var ea=[],qa,xa,Ea=0;Ea<P;Ea++){var Va=u[Ea];for(var Ya=0,gb=0,Fb=Va.length,Sb=Fb-1,jc;gb<Fb;Sb=gb++)jc=Va[gb],Sb=Va[Sb],Ya+=(Sb.x-jc.x)*(jc.y+Sb.y);Va=Ya;0!==Va&&(u[Ea].area=Math.abs(Va),void 0===xa&&(xa=0>Va),
xa===0>Va?(qa&&ea.push(qa),qa=[u[Ea]]):qa.push(u[Ea]))}qa&&ea.push(qa);if(1<E)for(u=0;u<ea.length;u++)ea[u].length<=E||(P=ea[u],Ga(P,E,1,ea[u].length-1||P.length-1,cb||Oa),ea[u]=ea[u].slice(0,E));return ea}function cb(u,E){return E.area-u.area}function jb(u,E,P){P=P.patternDependencies;for(var ea=!1,qa=0;qa<E.length;qa+=1){var xa=E[qa].paint.get(u+"-pattern");xa.isConstant()||(ea=!0);if(xa=xa.constantOr(null))ea=!0,P[xa.to]=!0,P[xa.from]=!0}return ea}function Bb(u,E,P,ea,qa){for(var xa=qa.patternDependencies,
Ea=0;Ea<E.length;Ea+=1){var Va=E[Ea],Ya=Va.paint.get(u+"-pattern").value;if("constant"!==Ya.kind){var gb=Ya.evaluate({zoom:ea-1},P,{},qa.availableImages),Fb=Ya.evaluate({zoom:ea},P,{},qa.availableImages);Ya=Ya.evaluate({zoom:ea+1},P,{},qa.availableImages);gb=gb&&gb.name?gb.name:gb;Fb=Fb&&Fb.name?Fb.name:Fb;Ya=Ya&&Ya.name?Ya.name:Ya;xa[gb]=!0;xa[Fb]=!0;xa[Ya]=!0;P.patterns[Va.id]={min:gb,mid:Fb,max:Ya}}}return P}function Xb(u,E,P,ea,qa){this.properties={};this.extent=P;this.type=0;this._pbf=u;this._geometry=
-1;this._keys=ea;this._values=qa;u.readFields(Ib,this,E)}function Ib(u,E,P){if(1==u)E.id=P.readVarint();else if(2==u)for(u=P.readVarint()+P.pos;P.pos<u;){var ea=E._keys[P.readVarint()],qa=E._values[P.readVarint()];E.properties[ea]=qa}else 3==u?E.type=P.readVarint():4==u&&(E._geometry=P.pos)}function gc(u){var E=u.length;if(1>=E)return[u];for(var P=[],ea,qa,xa=0;xa<E;xa++){var Ea,Va=u[xa],Ya=0,gb=0,Fb=Va.length;for(Ea=Fb-1;gb<Fb;Ea=gb++){var Sb=Va[gb];Ea=Va[Ea];Ya+=(Ea.x-Sb.x)*(Sb.y+Ea.y)}Sb=Ya;0!==
Sb&&(void 0===qa&&(qa=0>Sb),qa===0>Sb?(ea&&P.push(ea),ea=[u[xa]]):ea.push(u[xa]))}ea&&P.push(ea);return P}function hc(u,E){this.version=1;this.name=null;this.extent=4096;this.length=0;this._pbf=u;this._keys=[];this._values=[];this._features=[];u.readFields(qc,this,E);this.length=this._features.length}function qc(u,E,P){if(15===u)E.version=P.readVarint();else if(1===u)E.name=P.readString();else if(5===u)E.extent=P.readVarint();else if(2===u)E._features.push(P.pos);else if(3===u)E._keys.push(P.readString());
else if(4===u){u=E._values;E=u.push;for(var ea=null,qa=P.readVarint()+P.pos;P.pos<qa;)ea=P.readVarint()>>3,ea=1===ea?P.readString():2===ea?P.readFloat():3===ea?P.readDouble():4===ea?P.readVarint64():5===ea?P.readVarint():6===ea?P.readSVarint():7===ea?P.readBoolean():null;E.call(u,ea)}}function Ec(u,E,P){3===u&&(u=new Tj(P,P.readVarint()+P.pos),u.length&&(E[u.name]=u))}function ld(u,E,P,ea,qa,xa,Ea,Va){u.emplaceBack(E,P,2*Math.floor(ea*zk)+Ea,qa*zk*2,xa*zk*2,Math.round(Va))}function Dd(u){return u.every(function(E){return 0>
E.x})||u.every(function(E){return 8192<E.x})||u.every(function(E){return 0>E.y})||u.every(function(E){return 8192<E.y})}function ye(u,E){return u.x*E.x+u.y*E.y}function ze(u,E){if(1===u.length){for(var P=0,ea=E[P++],qa;!qa||ea.equals(qa);)if(qa=E[P++],!qa)return Infinity;for(;P<E.length;P++){var xa=E[P],Ea=u[0],Va=qa.sub(ea),Ya=xa.sub(ea),gb=Ea.sub(ea);Ea=ye(Va,Va);var Fb=ye(Va,Ya),Sb=ye(Ya,Ya);Va=ye(gb,Va);Ya=ye(gb,Ya);gb=Ea*Sb-Fb*Fb;Sb=(Sb*Va-Fb*Ya)/gb;Ea=(Ea*Ya-Fb*Va)/gb;xa=ea.z*(1-Sb-Ea)+qa.z*
Sb+xa.z*Ea;if(isFinite(xa))return xa}return Infinity}u=Infinity;for(P=0;P<E.length;P+=1)u=Math.min(u,E[P].z);return u}function We(u,E,P){u.sections.forEach(function(ea){var qa=ea.text,xa=E.layout.get("text-transform").evaluate(P,{});"uppercase"===xa?qa=qa.toLocaleUpperCase():"lowercase"===xa&&(qa=qa.toLocaleLowerCase());bi.applyArabicShaping&&(qa=bi.applyArabicShaping(qa));ea.text=qa});return u}function fg(u){function E(xc,Hc,vd){var ce=xa[xc];delete xa[xc];xa[Hc]=ce;Ea[ce].geometry[0].pop();Ea[ce].geometry[0]=
Ea[ce].geometry[0].concat(vd[0]);return ce}function P(xc,Hc,vd){var ce=qa[Hc];delete qa[Hc];qa[xc]=ce;Ea[ce].geometry[0].shift();Ea[ce].geometry[0]=vd[0].concat(Ea[ce].geometry[0]);return ce}function ea(xc,Hc,vd){Hc=vd?Hc[0][Hc[0].length-1]:Hc[0][0];return xc+":"+Hc.x+":"+Hc.y}for(var qa={},xa={},Ea=[],Va=0,Ya=0;Ya<u.length;Ya++){var gb=u[Ya],Fb=gb.geometry;if(gb=gb.text?gb.text.toString():null){var Sb=ea(gb,Fb),jc=ea(gb,Fb,!0);if(Sb in xa&&jc in qa&&xa[Sb]!==qa[jc]){Fb=P(Sb,jc,Fb);var Dc=E(Sb,jc,
Ea[Fb].geometry);delete qa[Sb];delete xa[jc];xa[ea(gb,Ea[Dc].geometry,!0)]=Dc;Ea[Fb].geometry=null}else Sb in xa?E(Sb,jc,Fb):jc in qa?P(Sb,jc,Fb):(Ea.push(u[Ya]),Va++,qa[Sb]=Va-1,xa[jc]=Va-1)}else Ea.push(u[Ya]),Va++}return Ea.filter(function(xc){return xc.geometry})}function He(u){this.buf=ArrayBuffer.isView&&ArrayBuffer.isView(u)?u:new Uint8Array(u||0);this.type=this.pos=0;this.length=this.buf.length}function cg(u,E,P){var ea=P.buf;var qa=ea[P.pos++];var xa=(qa&112)>>4;if(128>qa)return Af(u,xa,
E);qa=ea[P.pos++];xa|=(qa&127)<<3;if(128>qa)return Af(u,xa,E);qa=ea[P.pos++];xa|=(qa&127)<<10;if(128>qa)return Af(u,xa,E);qa=ea[P.pos++];xa|=(qa&127)<<17;if(128>qa)return Af(u,xa,E);qa=ea[P.pos++];xa|=(qa&127)<<24;if(128>qa)return Af(u,xa,E);qa=ea[P.pos++];if(128>qa)return Af(u,xa|(qa&1)<<31,E);throw Error("Expected varint not more than 10 bytes");}function Xf(u){return u.type===He.Bytes?u.readVarint()+u.pos:u.pos+1}function Af(u,E,P){return P?4294967296*E+(u>>>0):4294967296*(E>>>0)+(u>>>0)}function Pg(u,
E,P){E=16383>=E?1:2097151>=E?2:268435455>=E?3:Math.floor(Math.log(E)/(7*Math.LN2));P.realloc(E);for(var ea=P.pos-1;ea>=u;ea--)P.buf[ea+E]=P.buf[ea]}function Mg(u,E){for(var P=0;P<u.length;P++)E.writeVarint(u[P])}function vg(u,E){for(var P=0;P<u.length;P++)E.writeSVarint(u[P])}function Jf(u,E){for(var P=0;P<u.length;P++)E.writeFloat(u[P])}function Yf(u,E){for(var P=0;P<u.length;P++)E.writeDouble(u[P])}function wh(u,E){for(var P=0;P<u.length;P++)E.writeBoolean(u[P])}function Uh(u,E){for(var P=0;P<u.length;P++)E.writeFixed32(u[P])}
function hi(u,E){for(var P=0;P<u.length;P++)E.writeSFixed32(u[P])}function yi(u,E){for(var P=0;P<u.length;P++)E.writeFixed64(u[P])}function zi(u,E){for(var P=0;P<u.length;P++)E.writeSFixed64(u[P])}function Vh(u,E){return(u[E]|u[E+1]<<8|u[E+2]<<16)+16777216*u[E+3]}function Xa(u,E,P){u[P]=E;u[P+1]=E>>>8;u[P+2]=E>>>16;u[P+3]=E>>>24}function Pa(u,E){return(u[E]|u[E+1]<<8|u[E+2]<<16)+(u[E+3]<<24)}function Mb(u,E,P){1===u&&P.readMessage(bc,E)}function bc(u,E,P){if(3===u){u=P.readMessage(kc,{});P=u.width;
var ea=u.height,qa=u.left,xa=u.top,Ea=u.advance;E.push({id:u.id,bitmap:new ri({width:P+6,height:ea+6},u.bitmap),metrics:{width:P,height:ea,left:qa,top:xa,advance:Ea}})}}function kc(u,E,P){1===u?E.id=P.readVarint():2===u?E.bitmap=P.readBytes():3===u?E.width=P.readVarint():4===u?E.height=P.readVarint():5===u?E.left=P.readSVarint():6===u?E.top=P.readSVarint():7===u&&(E.advance=P.readVarint())}function ed(u){for(var E=0,P=0,ea=0;ea<u.length;ea+=1){var qa=u[ea];E+=qa.w*qa.h;P=Math.max(P,qa.w)}u.sort(function(gb,
Fb){return Fb.h-gb.h});P=[{x:0,y:0,w:Math.max(Math.ceil(Math.sqrt(E/.95)),P),h:Infinity}];for(var xa=qa=ea=0;xa<u.length;xa+=1)for(var Ea=u[xa],Va=P.length-1;0<=Va;Va--){var Ya=P[Va];if(!(Ea.w>Ya.w||Ea.h>Ya.h)){Ea.x=Ya.x;Ea.y=Ya.y;qa=Math.max(qa,Ea.y+Ea.h);ea=Math.max(ea,Ea.x+Ea.w);Ea.w===Ya.w&&Ea.h===Ya.h?(Ea=P.pop(),Va<P.length&&(P[Va]=Ea)):Ea.h===Ya.h?(Ya.x+=Ea.w,Ya.w-=Ea.w):(Ea.w!==Ya.w&&P.push({x:Ya.x+Ea.w,y:Ya.y,w:Ya.w-Ea.w,h:Ea.h}),Ya.y+=Ea.h,Ya.h-=Ea.h);break}}return{w:ea,h:qa,fill:E/(ea*
qa)||0}}function nd(u,E,P,ea,qa,xa,Ea,Va,Ya,gb,Fb,Sb,jc,Dc,xc,Hc){u=Qg.fromFeature(u,qa);Sb===Ng.vertical&&u.verticalizePunctuation();var vd=bi.processBidirectionalText,ce=bi.processStyledBidirectionalText;if(vd&&1===u.sections.length){qa=[];var Ed=0;for(xa=vd(u.toString(),xd(u,gb,xa,E,ea,Dc,xc));Ed<xa.length;Ed+=1){Dc=xa[Ed];xc=new Qg;xc.text=Dc;xc.sections=u.sections;for(vd=0;vd<Dc.length;vd++)xc.sectionIndex.push(0);qa.push(xc)}}else if(ce)for(qa=[],Ed=0,xa=ce(u.text,u.sectionIndex,xd(u,gb,xa,
E,ea,Dc,xc));Ed<xa.length;Ed+=1)Dc=xa[Ed],xc=new Qg,xc.text=Dc[0],xc.sectionIndex=Dc[1],xc.sections=u.sections,qa.push(xc);else{xa=xd(u,gb,xa,E,ea,Dc,xc);qa=[];Dc=u.text;for(Ed=xc=0;Ed<xa.length;Ed+=1)vd=xa[Ed],qa.push(u.substring(xc,vd)),xc=vd;xc<Dc.length&&qa.push(u.substring(xc,Dc.length))}xa=[];Fb={positionedLines:xa,text:u.toString(),top:Fb[1],bottom:Fb[1],left:Fb[0],right:Fb[0],writingMode:Sb,iconsInText:!1,verticalizable:!1};var Kd=0;xc=-17;Dc=u=0;Ya="right"===Ya?1:"left"===Ya?0:.5;for(vd=
Ed=0;vd<qa.length;vd+=1){var fe=qa[vd];fe.trim();var te=fe.getMaxScale();ce=24*(te-1);var Me={positionedGlyphs:[],lineOffset:0};Fb.positionedLines[Ed]=Me;var ue=Me.positionedGlyphs,lf=0;if(fe.length()){for(var Xe=0;Xe<fe.length();Xe++){var Ye=fe.getSection(Xe),of=fe.getSectionIndex(Xe),Hf=fe.getCharCode(Xe),mf=null,ff=null,Pe=24,$e;($e=Sb===Ng.horizontal||!jc&&!Hd(Hf))||!($e=jc)||($e=aj[Hf])||($e=Hf,$e=Je.Arabic($e)||Je["Arabic Supplement"]($e)||Je["Arabic Extended-A"]($e)||Je["Arabic Presentation Forms-A"]($e)||
Je["Arabic Presentation Forms-B"]($e));$e=!$e;if(Ye.imageName){Pe=ea[Ye.imageName];if(!Pe)continue;ff=Ye.imageName;Fb.iconsInText=Fb.iconsInText||!0;mf=Pe.paddedRect;var mg=Pe.displaySize;Ye.scale=24*Ye.scale/Hc;var Hg={width:mg[0],height:mg[1],left:1,top:-3,advance:$e?mg[1]:mg[0]};var Eg=ce+(24-mg[1]*Ye.scale);Pe=Hg.advance;mg=$e?mg[0]*Ye.scale-24*te:mg[1]*Ye.scale-24*te;0<mg&&mg>lf&&(lf=mg)}else{if((Eg=(Eg=P[Ye.fontStack])&&Eg[Hf])&&Eg.rect)mf=Eg.rect,Hg=Eg.metrics;else{Eg=(Eg=E[Ye.fontStack])&&
Eg[Hf];if(!Eg)continue;Hg=Eg.metrics}Eg=24*(te-Ye.scale)}$e?(Fb.verticalizable=!0,ue.push({glyph:Hf,imageName:ff,x:Kd,y:xc+Eg,vertical:$e,scale:Ye.scale,fontStack:Ye.fontStack,sectionIndex:of,metrics:Hg,rect:mf}),Kd+=Pe*Ye.scale+gb):(ue.push({glyph:Hf,imageName:ff,x:Kd,y:xc+Eg,vertical:$e,scale:Ye.scale,fontStack:Ye.fontStack,sectionIndex:of,metrics:Hg,rect:mf}),Kd+=Hg.advance*Ye.scale+gb)}if(0!==ue.length&&(u=Math.max(Kd-gb,u),Kd=ue,ue=ue.length-1,fe=lf,Ya||fe))for(Xe=Kd[ue],Xe=(Kd[ue].x+Xe.metrics.advance*
Xe.scale)*Ya,Ye=0;Ye<=ue;Ye++)Kd[Ye].x-=Xe,Kd[Ye].y+=fe;Kd=0;te=Ea*te+lf;Me.lineOffset=Math.max(lf,ce);xc+=te;Dc=Math.max(te,Dc)}else xc+=Ea;++Ed}E=xc- -17;P=Ld(Va);Va=P.horizontalAlign;P=P.verticalAlign;ea=(Ya-Va)*u;Ea=Dc!==Ea?-E*P- -17:(-P*qa.length+.5)*Ea;gb=0;for(Sb=Fb.positionedLines;gb<Sb.length;gb+=1)for(jc=0,Hc=Sb[gb].positionedGlyphs;jc<Hc.length;jc+=1)qa=Hc[jc],qa.x+=ea,qa.y+=Ea;Fb.top+=-P*E;Fb.bottom=Fb.top+E;Fb.left+=-Va*u;Fb.right=Fb.left+u;a:{for(Ea=0;Ea<xa.length;Ea+=1)if(0!==xa[Ea].positionedGlyphs.length){Ea=
!1;break a}Ea=!0}return Ea?!1:Fb}function hd(u,E,P,ea,qa,xa){return E.imageName?(u=ea[E.imageName])?u.displaySize[0]*E.scale*24/xa+qa:0:(u=(xa=P[E.fontStack])&&xa[u])?u.metrics.advance*E.scale+qa:0}function md(u,E,P,ea){var qa=Math.pow(u-E,2);return ea?u<E?qa/2:2*qa:qa+Math.abs(P)*P}function pd(u,E,P,ea,qa,xa){for(var Ea=null,Va=md(E,P,qa,xa),Ya=0;Ya<ea.length;Ya+=1){var gb=ea[Ya],Fb=md(E-gb.x,P,qa,xa)+gb.badness;Fb<=Va&&(Ea=gb,Va=Fb)}return{index:u,x:E,priorBreak:Ea,badness:Va}}function Pd(u){return u?
Pd(u.priorBreak).concat(u.index):[]}function xd(u,E,P,ea,qa,xa,Ea){if("point"!==xa||!u)return[];xa=[];for(var Va=0,Ya=0;Ya<u.length();Ya++){var gb=u.getSection(Ya);Va+=hd(u.getCharCode(Ya),gb,ea,qa,E,Ea)}P=Va/Math.max(1,Math.ceil(Va/P));Va=0<=u.text.indexOf("");for(gb=Ya=0;gb<u.length();gb++){var Fb=u.getSection(gb),Sb=u.getCharCode(gb);aj[Sb]||(Ya+=hd(Sb,Fb,ea,qa,E,Ea));if(gb<u.length()-1){var jc=Sb;jc=11904>jc?!1:Je["Bopomofo Extended"](jc)||Je.Bopomofo(jc)||Je["CJK Compatibility Forms"](jc)||
Je["CJK Compatibility Ideographs"](jc)||Je["CJK Compatibility"](jc)||Je["CJK Radicals Supplement"](jc)||Je["CJK Strokes"](jc)||Je["CJK Symbols and Punctuation"](jc)||Je["CJK Unified Ideographs Extension A"](jc)||Je["CJK Unified Ideographs"](jc)||Je["Enclosed CJK Letters and Months"](jc)||Je["Halfwidth and Fullwidth Forms"](jc)||Je.Hiragana(jc)||Je["Ideographic Description Characters"](jc)||Je["Kangxi Radicals"](jc)||Je["Katakana Phonetic Extensions"](jc)||Je.Katakana(jc)||Je["Vertical Forms"](jc)||
Je["Yi Radicals"](jc)||Je["Yi Syllables"](jc)?!0:!1;if(Ak[Sb]||jc||Fb.imageName){Fb=xa;var Dc=Fb.push,xc=gb+1,Hc=Ya,vd=u.getCharCode(gb+1),ce=0;10===Sb&&(ce-=1E4);jc&&Va&&(ce+=150);if(40===Sb||65288===Sb)ce+=50;if(41===vd||65289===vd)ce+=50;Dc.call(Fb,pd(xc,Hc,P,xa,ce,!1))}}}return Pd(pd(u.length(),Ya,P,xa,0,!0))}function Ld(u){var E=.5,P=.5;switch(u){case "right":case "top-right":case "bottom-right":E=1;break;case "left":case "top-left":case "bottom-left":E=0}switch(u){case "bottom":case "bottom-right":case "bottom-left":P=
1;break;case "top":case "top-right":case "top-left":P=0}return{horizontalAlign:E,verticalAlign:P}}function $d(u,E,P){var ea=Ld(P);P=E[0]-u.displaySize[0]*ea.horizontalAlign;E=E[1]-u.displaySize[1]*ea.verticalAlign;return{image:u,top:E,bottom:E+u.displaySize[1],left:P,right:P+u.displaySize[0]}}function Vd(u,E,P,ea,qa,xa){u=u.image;if(u.content){var Ea=u.content;var Va=u.pixelRatio||1;Ea=[Ea[0]/Va,Ea[1]/Va,u.displaySize[0]-Ea[2]/Va,u.displaySize[1]-Ea[3]/Va]}Va=E.left*xa;var Ya=E.right*xa;"width"===
P||"both"===P?(Va=qa[0]+Va-ea[3],Ya=qa[0]+Ya+ea[1]):(Va=qa[0]+(Va+Ya-u.displaySize[0])/2,Ya=Va+u.displaySize[0]);var gb=E.top*xa;E=E.bottom*xa;"height"===P||"both"===P?(P=qa[1]+gb-ea[0],ea=qa[1]+E+ea[2]):(P=qa[1]+(gb+E-u.displaySize[1])/2,ea=P+u.displaySize[1]);return{image:u,top:P,right:Ya,bottom:ea,left:Va,collisionPadding:Ea}}function Yd(u,E){var P=E.expression;if("constant"===P.kind)return{kind:"constant",layoutSize:P.evaluate(new Ag(u+1))};if("source"===P.kind)return{kind:"source"};var ea=P.zoomStops;
E=P.interpolationType;for(var qa=0;qa<ea.length&&ea[qa]<=u;)qa++;for(var xa=qa=Math.max(0,qa-1);xa<ea.length&&ea[xa]<u+1;)xa++;xa=Math.min(ea.length-1,xa);u=ea[qa];ea=ea[xa];if("composite"===P.kind)return{kind:"composite",minZoom:u,maxZoom:ea,interpolationType:E};xa=P.evaluate(new Ag(u));P=P.evaluate(new Ag(ea));return{kind:"camera",minZoom:u,maxZoom:ea,minSize:xa,maxSize:P,interpolationType:E}}function df(u,E,P){var ea=E.uSize;E=E.uSizeT;var qa=P.lowerSize;P=P.upperSize;return"source"===u.kind?qa/
128:"composite"===u.kind?ob(qa/128,P/128,E):ea}function Se(u,E){var P=0,ea=0;if("constant"===u.kind)ea=u.layoutSize;else if("source"!==u.kind){var qa=u.interpolationType,xa=u.minZoom,Ea=u.maxZoom;E=qa?d(Jg.interpolationFactor(qa,E,xa,Ea),0,1):0;"camera"===u.kind?ea=ob(u.minSize,u.maxSize,E):P=E}return{uSizeT:P,uSize:ea}}function he(u,E,P,ea,qa){if(void 0===E.segment)return!0;var xa=E;E=E.segment+1;for(var Ea=0;Ea>-P/2;){E--;if(0>E)return!1;Ea-=u[E].dist(xa);xa=u[E]}Ea+=u[E].dist(u[E+1]);E++;xa=[];
for(var Va=0;Ea<P/2;){var Ya=u[E],gb=u[E+1];if(!gb)return!1;var Fb=u[E-1].angleTo(Ya)-Ya.angleTo(gb);Fb=Math.abs((Fb+3*Math.PI)%(2*Math.PI)-Math.PI);xa.push({distance:Ea,angleDelta:Fb});for(Va+=Fb;Ea-xa[0].distance>ea;)Va-=xa.shift().angleDelta;if(Va>qa)return!1;E++;Ea+=Ya.dist(gb)}return!0}function se(u){for(var E=0,P=0;P<u.length-1;P++)E+=u[P].dist(u[P+1]);return E}function de(u,E,P,ea,qa,xa){qa=P?.6*qa*xa:0;P=Math.max(P?P.right-P.left:0,ea?ea.right-ea.left:0)*xa;var Ea=0,Va=se(u)/2;for(ea=0;ea<
u.length-1;ea++){xa=u[ea];var Ya=u[ea+1],gb=xa.dist(Ya);if(Ea+gb>Va){Va=(Va-Ea)/gb;Ea=ob(xa.x,Ya.x,Va);Va=ob(xa.y,Ya.y,Va);ea=new bj(Ea,Va,Ya.angleTo(xa),ea);ea._round();if(!qa||he(u,ea,P,qa,E))return ea;break}Ea+=gb}}function De(u,E,P,ea,qa,xa,Ea,Va,Ya){qa=Math.max(ea?ea.right-ea.left:0,qa?qa.right-qa.left:0);var gb=qa*Ea,Fb=0===u[0].x||u[0].x===Ya||0===u[0].y||u[0].y===Ya;E-gb<E/4&&(E=gb+E/4);return yf(u,Fb?E/2*Va%E:(qa/2+2*xa)*Ea*Va%E,E,ea?.6*xa*Ea:0,P,gb,Fb,!1,Ya)}function yf(u,E,P,ea,qa,xa,Ea,
Va,Ya){var gb=xa/2,Fb=se(u),Sb=0;E-=P;for(var jc=[],Dc=0;Dc<u.length-1;Dc++){for(var xc=u[Dc],Hc=u[Dc+1],vd=xc.dist(Hc),ce=Hc.angleTo(xc);E+P<Sb+vd;){E+=P;var Ed=(E-Sb)/vd,Kd=ob(xc.x,Hc.x,Ed);Ed=ob(xc.y,Hc.y,Ed);0<=Kd&&Kd<Ya&&0<=Ed&&Ed<Ya&&0<=E-gb&&E+gb<=Fb&&(Kd=new bj(Kd,Ed,ce,Dc),Kd._round(),ea&&!he(u,Kd,xa,ea,qa)||jc.push(Kd))}Sb+=vd}Va||jc.length||Ea||(jc=yf(u,Sb/2,P,ea,qa,xa,Ea,!0,Ya));return jc}function Zf(u,E,P,ea,qa){for(var xa=[],Ea=0;Ea<u.length;Ea++)for(var Va=u[Ea],Ya=void 0,gb=0;gb<Va.length-
1;gb++){var Fb=Va[gb],Sb=Va[gb+1];Fb.x<E&&Sb.x<E||(Fb.x<E?Fb=(new af(E,Fb.y+(E-Fb.x)/(Sb.x-Fb.x)*(Sb.y-Fb.y)))._round():Sb.x<E&&(Sb=(new af(E,Fb.y+(E-Fb.x)/(Sb.x-Fb.x)*(Sb.y-Fb.y)))._round()),Fb.y<P&&Sb.y<P||(Fb.y<P?Fb=(new af(Fb.x+(P-Fb.y)/(Sb.y-Fb.y)*(Sb.x-Fb.x),P))._round():Sb.y<P&&(Sb=(new af(Fb.x+(P-Fb.y)/(Sb.y-Fb.y)*(Sb.x-Fb.x),P))._round()),Fb.x>=ea&&Sb.x>=ea||(Fb.x>=ea?Fb=(new af(ea,Fb.y+(ea-Fb.x)/(Sb.x-Fb.x)*(Sb.y-Fb.y)))._round():Sb.x>=ea&&(Sb=(new af(ea,Fb.y+(ea-Fb.x)/(Sb.x-Fb.x)*(Sb.y-
Fb.y)))._round()),Fb.y>=qa&&Sb.y>=qa||(Fb.y>=qa?Fb=(new af(Fb.x+(qa-Fb.y)/(Sb.y-Fb.y)*(Sb.x-Fb.x),qa))._round():Sb.y>=qa&&(Sb=(new af(Fb.x+(qa-Fb.y)/(Sb.y-Fb.y)*(Sb.x-Fb.x),qa))._round()),Ya&&Fb.equals(Ya[Ya.length-1])||(Ya=[Fb],xa.push(Ya)),Ya.push(Sb)))))}return xa}function Tf(u,E,P,ea){var qa=[],xa=u.image,Ea=xa.pixelRatio,Va=xa.paddedRect.w-2,Ya=xa.paddedRect.h-2,gb=u.right-u.left,Fb=u.bottom-u.top,Sb=xa.stretchX||[[0,Va]],jc=xa.stretchY||[[0,Ya]],Dc=function(Ye,of){return Ye+of[1]-of[0]},xc=
Sb.reduce(Dc,0),Hc=jc.reduce(Dc,0),vd=Va-xc,ce=Ya-Hc,Ed=0,Kd=xc,fe=0,te=Hc,Me=0,ue=vd,lf=0,Xe=ce;xa.content&&ea&&(Dc=xa.content,Ed=gf(Sb,0,Dc[0]),fe=gf(jc,0,Dc[1]),Kd=gf(Sb,Dc[0],Dc[2]),te=gf(jc,Dc[1],Dc[3]),Me=Dc[0]-Ed,lf=Dc[1]-fe,ue=Dc[2]-Dc[0]-Kd,Xe=Dc[3]-Dc[1]-te);Dc=function(Ye,of,Hf,mf){var ff=(Ye.stretch-Ed)/Kd*gb+u.left,Pe=Ye.fixed-Me-ue*Ye.stretch/xc,$e=(of.stretch-fe)/te*Fb+u.top,mg=of.fixed-lf-Xe*of.stretch/Hc,Hg=(Hf.stretch-Ed)/Kd*gb+u.left,Eg=Hf.fixed-Me-ue*Hf.stretch/xc,lj=(mf.stretch-
fe)/te*Fb+u.top,fh=mf.fixed-lf-Xe*mf.stretch/Hc,Bi=new af(ff,$e);$e=new af(Hg,$e);Hg=new af(Hg,lj);ff=new af(ff,lj);Pe=new af(Pe/Ea,mg/Ea);Eg=new af(Eg/Ea,fh/Ea);if(mg=E*Math.PI/180)fh=Math.sin(mg),mg=Math.cos(mg),fh=[mg,-fh,fh,mg],Bi._matMult(fh),$e._matMult(fh),ff._matMult(fh),Hg._matMult(fh);Ye=Ye.stretch+Ye.fixed;of=of.stretch+of.fixed;return{tl:Bi,tr:$e,bl:ff,br:Hg,tex:{x:xa.paddedRect.x+1+Ye,y:xa.paddedRect.y+1+of,w:Hf.stretch+Hf.fixed-Ye,h:mf.stretch+mf.fixed-of},writingMode:void 0,glyphOffset:[0,
0],sectionIndex:0,pixelOffsetTL:Pe,pixelOffsetBR:Eg,minFontScaleX:ue/Ea/gb,minFontScaleY:Xe/Ea/Fb,isSDF:P}};if(ea&&(xa.stretchX||xa.stretchY))for(ea=uf(Sb,vd,xc),jc=uf(jc,ce,Hc),Va=0;Va<ea.length-1;Va++)for(Ya=ea[Va],Sb=ea[Va+1],ce=0;ce<jc.length-1;ce++)qa.push(Dc(Ya,jc[ce],Sb,jc[ce+1]));else qa.push(Dc({fixed:0,stretch:-1},{fixed:0,stretch:-1},{fixed:0,stretch:Va+1},{fixed:0,stretch:Ya+1}));return qa}function gf(u,E,P){for(var ea=0,qa=0;qa<u.length;qa+=1){var xa=u[qa];ea+=Math.max(E,Math.min(P,xa[1]))-
Math.max(E,Math.min(P,xa[0]))}return ea}function uf(u,E,P){for(var ea=[{fixed:-1,stretch:0}],qa=0;qa<u.length;qa+=1){var xa=u[qa],Ea=xa[0];xa=xa[1];var Va=ea[ea.length-1];ea.push({fixed:Ea-Va.stretch,stretch:Va.stretch});ea.push({fixed:Ea-Va.stretch,stretch:Va.stretch+(xa-Ea)})}ea.push({fixed:E+1,stretch:P});return ea}function dg(u,E){return u<E?-1:u>E?1:0}function kg(u,E,P){void 0===E&&(E=1);void 0===P&&(P=!1);for(var ea=Infinity,qa=Infinity,xa=-Infinity,Ea=-Infinity,Va=u[0],Ya=0;Ya<Va.length;Ya++){var gb=
Va[Ya];if(!Ya||gb.x<ea)ea=gb.x;if(!Ya||gb.y<qa)qa=gb.y;if(!Ya||gb.x>xa)xa=gb.x;if(!Ya||gb.y>Ea)Ea=gb.y}gb=Math.min(xa-ea,Ea-qa);Ya=gb/2;Va=new cj([],Kg);if(0===gb)return new af(ea,qa);for(;ea<xa;ea+=gb)for(var Fb=qa;Fb<Ea;Fb+=gb)Va.push(new $f(ea+Ya,Fb+Ya,Ya,u));Ea=xa=qa=0;Ya=u[0];ea=0;gb=Ya.length;for(var Sb=gb-1;ea<gb;Sb=ea++){Fb=Ya[ea];Sb=Ya[Sb];var jc=Fb.x*Sb.y-Sb.x*Fb.y;xa+=(Fb.x+Sb.x)*jc;Ea+=(Fb.y+Sb.y)*jc;qa+=3*jc}qa=new $f(xa/qa,Ea/qa,0,u);for(xa=Va.length;Va.length;){Ea=Va.pop();if(Ea.d>
qa.d||!qa.d)qa=Ea,P&&console.log("found best %d after %d probes",Math.round(1E4*Ea.d)/1E4,xa);Ea.max-qa.d<=E||(Ya=Ea.h/2,Va.push(new $f(Ea.p.x-Ya,Ea.p.y-Ya,Ya,u)),Va.push(new $f(Ea.p.x+Ya,Ea.p.y-Ya,Ya,u)),Va.push(new $f(Ea.p.x-Ya,Ea.p.y+Ya,Ya,u)),Va.push(new $f(Ea.p.x+Ya,Ea.p.y+Ya,Ya,u)),xa+=4)}P&&(console.log("num probes: "+xa),console.log("best distance: "+qa.d));return qa.p}function Kg(u,E){return E.max-u.max}function $f(u,E,P,ea){this.p=new af(u,E);this.h=P;u=this.p;E=!1;P=Infinity;for(var qa=
0;qa<ea.length;qa++)for(var xa=ea[qa],Ea=0,Va=xa.length,Ya=Va-1;Ea<Va;Ya=Ea++){var gb=xa[Ea];Ya=xa[Ya];gb.y>u.y!==Ya.y>u.y&&u.x<(Ya.x-gb.x)*(u.y-gb.y)/(Ya.y-gb.y)+gb.x&&(E=!E);P=Math.min(P,Ce(u,gb,Ya))}this.d=(E?1:-1)*Math.sqrt(P);this.max=this.d+this.h*Math.SQRT2}function Ee(u,E){function P(qa,xa){var Ea=0,Va=0;0>xa&&(xa=0);var Ya=xa/Math.sqrt(2);switch(qa){case "top-right":case "top-left":Va=Ya-7;break;case "bottom-right":case "bottom-left":Va=-Ya+7;break;case "bottom":Va=-xa+7;break;case "top":Va=
xa-7}switch(qa){case "top-right":case "bottom-right":Ea=-Ya;break;case "top-left":case "bottom-left":Ea=Ya;break;case "left":Ea=xa;break;case "right":Ea=-xa}return[Ea,Va]}function ea(qa,xa,Ea){var Va=0,Ya=0;xa=Math.abs(xa);Ea=Math.abs(Ea);switch(qa){case "top-right":case "top-left":case "top":Ya=Ea-7;break;case "bottom-right":case "bottom-left":case "bottom":Ya=-Ea+7}switch(qa){case "top-right":case "bottom-right":case "right":Va=-xa;break;case "top-left":case "bottom-left":case "left":Va=xa}return[Va,
Ya]}return E[1]!==Cj?ea(u,E[0],E[1]):P(u,E[0])}function eg(u){switch(u){case "right":case "top-right":case "bottom-right":return"right";case "left":case "top-left":case "bottom-left":return"left"}return"center"}function Cg(u,E,P,ea,qa,xa,Ea,Va,Ya,gb,Fb){var Sb=xa.textMaxSize.evaluate(E,{});void 0===Sb&&(Sb=Ea);var jc=u.layers[0].layout,Dc=jc.get("icon-offset").evaluate(E,{},Fb),xc=Wi(P.horizontal),Hc=Ea/24,vd=u.tilePixelRatio*Hc;Sb=u.tilePixelRatio*Sb/24;var ce=u.tilePixelRatio*Va,Ed=u.tilePixelRatio*
jc.get("symbol-spacing"),Kd=jc.get("text-padding")*u.tilePixelRatio,fe=jc.get("icon-padding")*u.tilePixelRatio;Va=jc.get("text-max-angle")/180*Math.PI;var te="map"===jc.get("text-rotation-alignment")&&"point"!==jc.get("symbol-placement"),Me="map"===jc.get("icon-rotation-alignment")&&"point"!==jc.get("symbol-placement"),ue=jc.get("symbol-placement"),lf=Ed/2,Xe=jc.get("icon-text-fit"),Ye;ea&&"none"!==Xe&&(u.allowVerticalPlacement&&P.vertical&&(Ye=Vd(ea,P.vertical,Xe,jc.get("icon-text-fit-padding"),
Dc,Hc)),xc&&(ea=Vd(ea,xc,Xe,jc.get("icon-text-fit-padding"),Dc,Hc)));jc=function(Pe,$e){0>$e.x||8192<=$e.x||0>$e.y||8192<=$e.y||Ch(u,$e,Pe,P,ea,qa,Ye,u.layers[0],u.collisionBoxArray,E.index,E.sourceLayerIndex,u.index,vd,Kd,te,Ya,ce,fe,Me,Dc,E,xa,gb,Fb,Ea)};if("line"===ue)for(Hc=0,ue=Zf(E.geometry,0,0,8192,8192);Hc<ue.length;Hc+=1){Xe=ue[Hc];for(var of=0,Hf=De(Xe,Ed,Va,P.vertical||xc,ea,24,Sb,u.overscaling,8192);of<Hf.length;of+=1){var mf=Hf[of],ff=xc;ff&&Xi(u,ff.text,lf,mf)||jc(Xe,mf)}}else if("line-center"===
ue)for(Ed=0,lf=E.geometry;Ed<lf.length;Ed+=1)Hc=lf[Ed],1<Hc.length&&(ue=de(Hc,Va,P.vertical||xc,ea,24,Sb))&&jc(Hc,ue);else if("Polygon"===E.type)for(xc=0,Sb=Sa(E.geometry,0);xc<Sb.length;xc+=1)Va=Sb[xc],Ed=kg(Va,16),jc(Va[0],new bj(Ed.x,Ed.y,0));else if("LineString"===E.type)for(xc=0,Sb=E.geometry;xc<Sb.length;xc+=1)Va=Sb[xc],jc(Va,new bj(Va[0].x,Va[0].y,0));else if("Point"===E.type)for(xc=0,Sb=E.geometry;xc<Sb.length;xc+=1)for(Va=0,Ed=Sb[xc];Va<Ed.length;Va+=1)lf=Ed[Va],jc([lf],new bj(lf.x,lf.y,
0))}function mh(u,E,P,ea,qa,xa,Ea,Va,Ya,gb,Fb,Sb,jc,Dc,xc){for(var Hc=u.allowVerticalPlacement,vd=qa.layout.get("text-rotate").evaluate(Ea,{})*Math.PI/180,ce=[],Ed=0,Kd=P.positionedLines;Ed<Kd.length;Ed+=1)for(var fe=Kd[Ed],te=0,Me=fe.positionedGlyphs;te<Me.length;te+=1){var ue=Me[te];if(ue.rect){var lf=ue.rect||{},Xe=4,Ye=!0,of=1,Hf=0,mf=(xa||Hc)&&ue.vertical,ff=ue.metrics.advance*ue.scale/2;if(Hc&&P.verticalizable){var Pe=24*(ue.scale-1);Hf=(24-ue.metrics.width*ue.scale)/2;Hf=fe.lineOffset/2-(ue.imageName?
-Hf:Pe)}ue.imageName&&(Pe=ea[ue.imageName],Ye=Pe.sdf,of=Pe.pixelRatio,Xe=1/of);Pe=xa?[ue.x+ff,ue.y]:[0,0];var $e=xa?[0,0]:[ue.x+ff+Va[0],ue.y+Va[1]-Hf],mg=[0,0];mf&&(mg=$e,$e=[0,0]);Hf=(ue.metrics.left-Xe)*ue.scale-ff+$e[0];Xe=(-ue.metrics.top-Xe)*ue.scale+$e[1];$e=Hf+lf.w*ue.scale/of;var Hg=Xe+lf.h*ue.scale/of;of=new af(Hf,Xe);Xe=new af($e,Xe);Hf=new af(Hf,Hg);$e=new af($e,Hg);mf&&(mf=new af(-ff,ff- -17),Hg=-Math.PI/2,ff=12-ff,ff=new af(22-ff,-(ue.imageName?ff:0)),mg=new (Function.prototype.bind.apply(af,
[null].concat(mg))),of._rotateAround(Hg,mf)._add(ff)._add(mg),Xe._rotateAround(Hg,mf)._add(ff)._add(mg),Hf._rotateAround(Hg,mf)._add(ff)._add(mg),$e._rotateAround(Hg,mf)._add(ff)._add(mg));vd&&(ff=Math.sin(vd),mf=Math.cos(vd),ff=[mf,-ff,ff,mf],of._matMult(ff),Xe._matMult(ff),Hf._matMult(ff),$e._matMult(ff));ff=new af(0,0);mf=new af(0,0);ce.push({tl:of,tr:Xe,bl:Hf,br:$e,tex:lf,writingMode:P.writingMode,glyphOffset:Pe,sectionIndex:ue.sectionIndex,isSDF:Ye,pixelOffsetTL:ff,pixelOffsetBR:mf,minFontScaleX:0,
minFontScaleY:0})}}P=u.textSizeData;ea=null;"source"===P.kind?(ea=[128*qa.layout.get("text-size").evaluate(Ea,{})],ea[0]>si&&D(u.layerIds[0]+': Value for "text-size" is \x3e\x3d '+ci+'. Reduce your "text-size".')):"composite"===P.kind&&(ea=[128*Dc.compositeTextSizes[0].evaluate(Ea,{},xc),128*Dc.compositeTextSizes[1].evaluate(Ea,{},xc)],(ea[0]>si||ea[1]>si)&&D(u.layerIds[0]+': Value for "text-size" is \x3e\x3d '+ci+'. Reduce your "text-size".'));u.addSymbols(u.text,ce,ea,Va,xa,Ea,gb,E,Ya.lineStartIndex,
Ya.lineLength,jc,xc);for(E=0;E<Fb.length;E+=1)Sb[Fb[E]]=u.text.placedSymbolArray.length-1;return 4*ce.length}function Wi(u){for(var E in u)return u[E];return null}function Ch(u,E,P,ea,qa,xa,Ea,Va,Ya,gb,Fb,Sb,jc,Dc,xc,Hc,vd,ce,Ed,Kd,fe,te,Me,ue,lf){var Xe=u.addToLineVertexArray(E,P),Ye,of=0,Hf=P=0,mf=0,ff=-1,Pe=-1,$e={},mg=$i(""),Hg=0;var Eg=0;void 0===Va._unevaluatedLayout.getValue("text-radial-offset")?(Eg=Va.layout.get("text-offset").evaluate(fe,{},ue).map(function(Bk){return 24*Bk}),Hg=Eg[0],Eg=
Eg[1]):(Hg=24*Va.layout.get("text-radial-offset").evaluate(fe,{},ue),Eg=Cj);if(u.allowVerticalPlacement&&ea.vertical){var lj=Va.layout.get("text-rotate").evaluate(fe,{},ue)+90;var fh=new dj(Ya,E,gb,Fb,Sb,ea.vertical,jc,Dc,xc,lj);Ea&&(Ye=new dj(Ya,E,gb,Fb,Sb,Ea,vd,ce,xc,lj))}if(qa){var Bi=Va.layout.get("icon-rotate").evaluate(fe,{});of="none"!==Va.layout.get("icon-text-fit");ff=Tf(qa,Bi,Me,of);Ea=Ea?Tf(Ea,Bi,Me,of):void 0;Bi=new dj(Ya,E,gb,Fb,Sb,qa,vd,ce,!1,Bi);of=4*ff.length;vd=u.iconSizeData;qa=
null;"source"===vd.kind?(qa=[128*Va.layout.get("icon-size").evaluate(fe,{})],qa[0]>si&&D(u.layerIds[0]+': Value for "icon-size" is \x3e\x3d '+ci+'. Reduce your "icon-size".')):"composite"===vd.kind&&(qa=[128*te.compositeIconSizes[0].evaluate(fe,{},ue),128*te.compositeIconSizes[1].evaluate(fe,{},ue)],(qa[0]>si||qa[1]>si)&&D(u.layerIds[0]+': Value for "icon-size" is \x3e\x3d '+ci+'. Reduce your "icon-size".'));u.addSymbols(u.icon,ff,qa,Kd,Ed,fe,!1,E,Xe.lineStartIndex,Xe.lineLength,-1,ue);ff=u.icon.placedSymbolArray.length-
1;Ea&&(P=4*Ea.length,u.addSymbols(u.icon,Ea,qa,Kd,Ed,fe,Ng.vertical,E,Xe.lineStartIndex,Xe.lineLength,-1,ue),Pe=u.icon.placedSymbolArray.length-1)}for(var ql in ea.horizontal){Ed=ea.horizontal[ql];if(!Fh){mg=$i(Ed.text);var Fh=Va.layout.get("text-rotate").evaluate(fe,{},ue);Fh=new dj(Ya,E,gb,Fb,Sb,Ed,jc,Dc,xc,Fh)}Kd=1===Ed.positionedLines.length;Hf+=mh(u,E,Ed,xa,Va,xc,fe,Hc,Xe,ea.vertical?Ng.horizontal:Ng.horizontalOnly,Kd?Object.keys(ea.horizontal):[ql],$e,ff,te,ue);if(Kd)break}ea.vertical&&(mf+=
mh(u,E,ea.vertical,xa,Va,xc,fe,Hc,Xe,Ng.vertical,["vertical"],$e,Pe,te,ue));ea=Fh?Fh.boxStartIndex:u.collisionBoxArray.length;xa=Fh?Fh.boxEndIndex:u.collisionBoxArray.length;Va=fh?fh.boxStartIndex:u.collisionBoxArray.length;Ya=fh?fh.boxEndIndex:u.collisionBoxArray.length;Fb=Bi?Bi.boxStartIndex:u.collisionBoxArray.length;Sb=Bi?Bi.boxEndIndex:u.collisionBoxArray.length;Dc=Ye?Ye.boxStartIndex:u.collisionBoxArray.length;xc=Ye?Ye.boxEndIndex:u.collisionBoxArray.length;Hc=function(Bk,rl){return Bk&&Bk.circleDiameter?
Math.max(Bk.circleDiameter,rl):rl};Fh=Hc(Fh,-1);Fh=Hc(fh,Fh);Fh=Hc(Bi,Fh);Fh=Hc(Ye,Fh);(fh=-1<Fh?1:0)&&(Fh*=lf/24);u.glyphOffsetArray.length>=ig.MAX_GLYPHS&&D("Too many glyphs being rendered in a tile. See https://github.com/mapbox/mapbox-gl-js/issues/2907");void 0!==fe.sortKey&&u.addToSortKeyRanges(u.symbolInstances.length,fe.sortKey);u.symbolInstances.emplaceBack(E.x,E.y,0<=$e.right?$e.right:-1,0<=$e.center?$e.center:-1,0<=$e.left?$e.left:-1,$e.vertical||-1,ff,Pe,mg,ea,xa,Va,Ya,Fb,Sb,Dc,xc,gb,Hf,
mf,of,P,fh,0,jc,Hg,Eg,Fh)}function Xi(u,E,P,ea){u=u.compareText;if(E in u)for(var qa=u[E],xa=qa.length-1;0<=xa;xa--){if(ea.dist(qa[xa])<P)return!0}else u[E]=[];u[E].push(ea);return!1}function Ih(u,E,P,ea,qa,xa,Ea,Va,Ya,gb,Fb,Sb,jc){u.emplaceBack(E,P,Math.round(32*ea),Math.round(32*qa),xa,Ea,((Va?Math.min(si,Math.round(Va[0])):0)<<1)+(Ya?1:0),Va?Math.min(si,Math.round(Va[1])):0,16*gb,16*Fb,256*Sb,256*jc)}function Si(u,E,P){u.emplaceBack(E.x,E.y,P);u.emplaceBack(E.x,E.y,P);u.emplaceBack(E.x,E.y,P);
u.emplaceBack(E.x,E.y,P)}function ij(u){var E=0;for(u=u.sections;E<u.length;E+=1){a:{var P=0;for(var ea=u[E].text;P<ea.length;P+=1)if(Ge(ea[P].charCodeAt(0))){P=!0;break a}P=!1}if(P)return!0}return!1}function Xh(u,E){return E.replace(/{([^{}]+)}/g,function(P,ea){return ea in u?String(u[ea]):""})}function Nh(u,E,P){P=12756274*Math.PI/256/Math.pow(2,P);return[u*P-12756274*Math.PI/2,E*P-12756274*Math.PI/2]}function Xg(u){return(180+u)/360}function oi(u){return(180-180/Math.PI*Math.log(Math.tan(Math.PI/
4+u*Math.PI/360)))/360}function Lg(u){return 360/Math.PI*Math.atan(Math.exp((180-360*u)*Math.PI/180))-90}function Rh(u,E,P,ea,qa){u*=2;0>u&&(u=-1*u-1);var xa=1<<P;return(xa*xa*u+xa*qa+ea).toString(36)+P.toString(36)+E.toString(36)}function ai(u,E){var P={};if(!E)return P;for(var ea=function(){var Ea=xa[qa],Va=Ea.layerIds.map(function(gb){return E.getLayer(gb)}).filter(Boolean);if(0!==Va.length){Ea.layers=Va;Ea.stateDependentLayerIds&&(Ea.stateDependentLayers=Ea.stateDependentLayerIds.map(function(gb){return Va.filter(function(Fb){return Fb.id===
gb})[0]}));for(var Ya=0;Ya<Va.length;Ya+=1)P[Va[Ya].id]=Ea}},qa=0,xa=u;qa<xa.length;qa+=1)ea();return P}function ph(u,E,P,ea,qa){return z(u,function(xa,Ea){return(xa=E instanceof mj?E.get(Ea):null)&&xa.evaluate?xa.evaluate(P,ea,qa):xa})}function Dh(u){for(var E=Infinity,P=Infinity,ea=-Infinity,qa=-Infinity,xa=0;xa<u.length;xa+=1){var Ea=u[xa];E=Math.min(E,Ea.x);P=Math.min(P,Ea.y);ea=Math.max(ea,Ea.x);qa=Math.max(qa,Ea.y)}return{minX:E,minY:P,maxX:ea,maxY:qa}}function Jh(u,E){return E-u}var Sh=h;h.prototype.sampleCurveX=
function(u){return((this.ax*u+this.bx)*u+this.cx)*u};h.prototype.sampleCurveY=function(u){return((this.ay*u+this.by)*u+this.cy)*u};h.prototype.sampleCurveDerivativeX=function(u){return(3*this.ax*u+2*this.bx)*u+this.cx};h.prototype.solveCurveX=function(u,E){"undefined"===typeof E&&(E=1E-6);var P;var ea=u;for(P=0;8>P;P++){var qa=this.sampleCurveX(ea)-u;if(Math.abs(qa)<E)return ea;var xa=this.sampleCurveDerivativeX(ea);if(1E-6>Math.abs(xa))break;ea-=qa/xa}P=0;xa=1;ea=u;if(ea<P)return P;if(ea>xa)return xa;
for(;P<xa;){qa=this.sampleCurveX(ea);if(Math.abs(qa-u)<E)break;u>qa?P=ea:xa=ea;ea=.5*(xa-P)+P}return ea};h.prototype.solve=function(u,E){return this.sampleCurveY(this.solveCurveX(u,E))};var af=r;r.prototype={clone:function(){return new r(this.x,this.y)},add:function(u){return this.clone()._add(u)},sub:function(u){return this.clone()._sub(u)},multByPoint:function(u){return this.clone()._multByPoint(u)},divByPoint:function(u){return this.clone()._divByPoint(u)},mult:function(u){return this.clone()._mult(u)},
div:function(u){return this.clone()._div(u)},rotate:function(u){return this.clone()._rotate(u)},rotateAround:function(u,E){return this.clone()._rotateAround(u,E)},matMult:function(u){return this.clone()._matMult(u)},unit:function(){return this.clone()._unit()},perp:function(){return this.clone()._perp()},round:function(){return this.clone()._round()},mag:function(){return Math.sqrt(this.x*this.x+this.y*this.y)},equals:function(u){return this.x===u.x&&this.y===u.y},dist:function(u){return Math.sqrt(this.distSqr(u))},
distSqr:function(u){var E=u.x-this.x;u=u.y-this.y;return E*E+u*u},angle:function(){return Math.atan2(this.y,this.x)},angleTo:function(u){return Math.atan2(this.y-u.y,this.x-u.x)},angleWith:function(u){return this.angleWithSep(u.x,u.y)},angleWithSep:function(u,E){return Math.atan2(this.x*E-this.y*u,this.x*u+this.y*E)},_matMult:function(u){var E=u[2]*this.x+u[3]*this.y;this.x=u[0]*this.x+u[1]*this.y;this.y=E;return this},_add:function(u){this.x+=u.x;this.y+=u.y;return this},_sub:function(u){this.x-=
u.x;this.y-=u.y;return this},_mult:function(u){this.x*=u;this.y*=u;return this},_div:function(u){this.x/=u;this.y/=u;return this},_multByPoint:function(u){this.x*=u.x;this.y*=u.y;return this},_divByPoint:function(u){this.x/=u.x;this.y/=u.y;return this},_unit:function(){this._div(this.mag());return this},_perp:function(){var u=this.y;this.y=this.x;this.x=-u;return this},_rotate:function(u){var E=Math.cos(u);u=Math.sin(u);var P=u*this.x+E*this.y;this.x=E*this.x-u*this.y;this.y=P;return this},_rotateAround:function(u,
E){var P=Math.cos(u);u=Math.sin(u);var ea=E.y+u*(this.x-E.x)+P*(this.y-E.y);this.x=E.x+P*(this.x-E.x)-u*(this.y-E.y);this.y=ea;return this},_round:function(){this.x=Math.round(this.x);this.y=Math.round(this.y);return this}};r.convert=function(u){return u instanceof r?u:Array.isArray(u)?new r(u[0],u[1]):u};var qh=c(.25,.1,.25,1),Ti=1,xi={},gi=null,kb=self.performance&&self.performance.now?self.performance.now.bind(self.performance):Date.now.bind(Date),R=self.requestAnimationFrame||self.mozRequestAnimationFrame||
self.webkitRequestAnimationFrame||self.msRequestAnimationFrame,X=self.cancelAnimationFrame||self.mozCancelAnimationFrame||self.webkitCancelAnimationFrame||self.msCancelAnimationFrame,U,da,va={now:kb,frame:function(u){var E=R(u);return{cancel:function(){return X(E)}}},getImageData:function(u,E){void 0===E&&(E=0);var P=self.document.createElement("canvas"),ea=P.getContext("2d");if(!ea)throw Error("failed to create canvas 2d context");P.width=u.width;P.height=u.height;ea.drawImage(u,0,0,u.width,u.height);
return ea.getImageData(-E,-E,u.width+2*E,u.height+2*E)},resolveURL:function(u){U||(U=self.document.createElement("a"));U.href=u;return U.href},hardwareConcurrency:self.navigator.hardwareConcurrency||4,get devicePixelRatio(){return self.devicePixelRatio},get prefersReducedMotion(){if(!self.matchMedia)return!1;null==da&&(da=self.matchMedia("(prefers-reduced-motion: reduce)"));return da.matches}},Ca={API_URL:"https://api.mapbox.com",get EVENTS_URL(){return this.API_URL?0===this.API_URL.indexOf("https://api.mapbox.cn")?
"https://events.mapbox.cn/events/v2":0===this.API_URL.indexOf("https://api.mapbox.com")?"https://events.mapbox.com/events/v2":null:null},FEEDBACK_URL:"https://apps.mapbox.com/feedback",REQUIRE_ACCESS_TOKEN:!0,ACCESS_TOKEN:null,MAX_PARALLEL_IMAGE_REQUESTS:16},Qa={supported:!1,testSupport:function(u){!Lb&&dc&&(Rb?H(u):lb=u)}},lb,Lb=!1,Rb=!1;if(self.document){var dc=self.document.createElement("img");dc.onload=function(){lb&&H(lb);lb=null;Rb=!0};dc.onerror=function(){Lb=!0;lb=null};dc.src="data:image/webp;base64,UklGRh4AAABXRUJQVlA4TBEAAAAvAQAAAAfQ//73v/+BiOh/AAA\x3d"}var Ic=
function(u,E){this._transformRequestFn=u;this._customAccessToken=E;this._createSkuToken()};Ic.prototype._createSkuToken=function(){for(var u="",E=0;10>E;E++)u+="0123456789abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ"[Math.floor(62*Math.random())];u=["101",u].join("");E=Date.now()+432E5;this._skuToken=u;this._skuTokenExpiresAt=E};Ic.prototype._isSkuTokenExpired=function(){return Date.now()>this._skuTokenExpiresAt};Ic.prototype.transformRequest=function(u,E){return this._transformRequestFn?
this._transformRequestFn(u,E)||{url:u}:{url:u}};Ic.prototype.normalizeStyleURL=function(u,E){if(!O(u))return u;u=L(u);u.path="/styles/v1"+u.path;return this._makeAPIURL(u,this._customAccessToken||E)};Ic.prototype.normalizeGlyphsURL=function(u,E){if(!O(u))return u;u=L(u);u.path="/fonts/v1"+u.path;return this._makeAPIURL(u,this._customAccessToken||E)};Ic.prototype.normalizeSourceURL=function(u,E){if(!O(u))return u;u=L(u);u.path="/v4/"+u.authority+".json";u.params.push("secure");return this._makeAPIURL(u,
this._customAccessToken||E)};Ic.prototype.normalizeSpriteURL=function(u,E,P,ea){var qa=L(u);if(!O(u))return qa.path+=""+E+P,Q(qa);qa.path="/styles/v1"+qa.path+"/sprite"+E+P;return this._makeAPIURL(qa,this._customAccessToken||ea)};Ic.prototype.normalizeTileURL=function(u,E){this._isSkuTokenExpired()&&this._createSkuToken();if(u&&!O(u))return u;u=L(u);u.path=u.path.replace(/(\.(png|jpg)\d*)(?=$)/,(2<=va.devicePixelRatio||512===E?"@2x":"")+(Qa.supported?".webp":"$1"));u.path=u.path.replace(/^.+\/v4\//,
"/");u.path="/v4"+u.path;if(!(E=this._customAccessToken))a:{E=0;for(var P=u.params;E<P.length;E+=1){var ea=P[E].match(/^access_token=(.*)$/);if(ea){E=ea[1];break a}}E=null}E=E||Ca.ACCESS_TOKEN;Ca.REQUIRE_ACCESS_TOKEN&&E&&this._skuToken&&u.params.push("sku\x3d"+this._skuToken);return this._makeAPIURL(u,E)};Ic.prototype.canonicalizeTileURL=function(u,E){var P=/\.[\w]+$/,ea=L(u);if(!ea.path.match(/(^\/v4\/)/)||!ea.path.match(P))return u;u="mapbox://tiles/"+ea.path.replace("/v4/","");ea=ea.params;E&&
(ea=ea.filter(function(qa){return!qa.match(/^access_token=/)}));ea.length&&(u+="?"+ea.join("\x26"));return u};Ic.prototype.canonicalizeTileset=function(u,E){E=E?O(E):!1;var P=[],ea=0;for(u=u.tiles||[];ea<u.length;ea+=1){var qa=u[ea];Gc.test(qa)?P.push(this.canonicalizeTileURL(qa,E)):P.push(qa)}return P};Ic.prototype._makeAPIURL=function(u,E){var P=L(Ca.API_URL);u.protocol=P.protocol;u.authority=P.authority;"/"!==P.path&&(u.path=""+P.path+u.path);if(!Ca.REQUIRE_ACCESS_TOKEN)return Q(u);E=E||Ca.ACCESS_TOKEN;
if(!E)throw Error("An API access token is required to use Mapbox GL. See https://www.mapbox.com/api-documentation/#access-tokens-and-token-scopes");if("s"===E[0])throw Error("Use a public access token (pk.*) with Mapbox GL, not a secret access token (sk.*). See https://www.mapbox.com/api-documentation/#access-tokens-and-token-scopes");u.params=u.params.filter(function(ea){return-1===ea.indexOf("access_token")});u.params.push("access_token\x3d"+E);return Q(u)};var Gc=/^((https?:)?\/\/)?([^\/]+\.)?mapbox\.c(n|om)(\/|\?|$)/i,
Xc=/^(\w+):\/\/([^/?]*)(\/[^?]+)?\??(.+)?/,$c=function(u){this.type=u;this.anonId=null;this.eventData={};this.queue=[];this.pendingRequest=null};$c.prototype.getStorageKey=function(u){var E=Z(Ca.ACCESS_TOKEN);E=E&&E.u?K(E.u):Ca.ACCESS_TOKEN||"";return u?"mapbox.eventData."+u+":"+E:"mapbox.eventData:"+E};$c.prototype.fetchEventData=function(){var u=J("localStorage"),E=this.getStorageKey(),P=this.getStorageKey("uuid");if(u)try{var ea=self.localStorage.getItem(E);ea&&(this.eventData=JSON.parse(ea));
var qa=self.localStorage.getItem(P);qa&&(this.anonId=qa)}catch(xa){D("Unable to read from LocalStorage")}};$c.prototype.saveEventData=function(){var u=J("localStorage"),E=this.getStorageKey(),P=this.getStorageKey("uuid");if(u)try{self.localStorage.setItem(P,this.anonId),1<=Object.keys(this.eventData).length&&self.localStorage.setItem(E,JSON.stringify(this.eventData))}catch(ea){D("Unable to write to LocalStorage")}};$c.prototype.processRequests=function(u){};$c.prototype.postEvent=function(u,E,P,ea){var qa=
this;if(Ca.EVENTS_URL){var xa=L(Ca.EVENTS_URL);xa.params.push("access_token\x3d"+(ea||Ca.ACCESS_TOKEN||""));u={event:this.type,created:(new Date(u)).toISOString(),sdkIdentifier:"mapbox-gl-js",sdkVersion:"1.10.1",skuId:"01",userId:this.anonId};E=E?f(u,E):u;xa={url:Q(xa),headers:{"Content-Type":"text/plain"},body:JSON.stringify([E])};this.pendingRequest=Cf(xa,function(Ea){qa.pendingRequest=null;P(Ea);qa.saveEventData();qa.processRequests(ea)})}};$c.prototype.queueRequest=function(u,E){this.queue.push(u);
this.processRequests(E)};var Wc=function(u){function E(){u.call(this,"map.load");this.success={};this.skuToken=""}u&&(E.__proto__=u);E.prototype=Object.create(u&&u.prototype);E.prototype.constructor=E;E.prototype.postMapLoadEvent=function(P,ea,qa,xa){this.skuToken=qa;(Ca.EVENTS_URL&&xa||Ca.ACCESS_TOKEN&&Array.isArray(P)&&P.some(function(Ea){return O(Ea)||Gc.test(Ea)}))&&this.queueRequest({id:ea,timestamp:Date.now()},xa)};E.prototype.processRequests=function(P){var ea=this;if(!this.pendingRequest&&
0!==this.queue.length){var qa=this.queue.shift(),xa=qa.id;qa=qa.timestamp;xa&&this.success[xa]||(this.anonId||this.fetchEventData(),t(this.anonId)||(this.anonId=q()),this.postEvent(qa,{skuToken:this.skuToken},function(Ea){Ea||xa&&(ea.success[xa]=!0)},P))}};return E}($c),wd=new (function(u){function E(P){u.call(this,"appUserTurnstile");this._customAccessToken=P}u&&(E.__proto__=u);E.prototype=Object.create(u&&u.prototype);E.prototype.constructor=E;E.prototype.postTurnstileEvent=function(P,ea){Ca.EVENTS_URL&&
Ca.ACCESS_TOKEN&&Array.isArray(P)&&P.some(function(qa){return O(qa)||Gc.test(qa)})&&this.queueRequest(Date.now(),ea)};E.prototype.processRequests=function(P){var ea=this;if(!this.pendingRequest&&0!==this.queue.length){this.anonId&&this.eventData.lastSuccess&&this.eventData.tokenU||this.fetchEventData();var qa=Z(Ca.ACCESS_TOKEN),xa=qa?qa.u:Ca.ACCESS_TOKEN;qa=xa!==this.eventData.tokenU;t(this.anonId)||(this.anonId=q(),qa=!0);var Ea=this.queue.shift();if(this.eventData.lastSuccess){var Va=new Date(this.eventData.lastSuccess),
Ya=new Date(Ea),gb=(Ea-this.eventData.lastSuccess)/864E5;qa=qa||1<=gb||-1>gb||Va.getDate()!==Ya.getDate()}else qa=!0;if(!qa)return this.processRequests();this.postEvent(Ea,{"enabled.telemetry":!1},function(Fb){Fb||(ea.eventData.lastSuccess=Ea,ea.eventData.tokenU=xa)},P)}};return E}($c)),Qd=wd.postTurnstileEvent.bind(wd),yd=new Wc,ge=yd.postMapLoadEvent.bind(yd),be=500,ke=50,re,ne,Le=Infinity,we,kf={Unknown:"Unknown",Style:"Style",Source:"Source",Tile:"Tile",Glyphs:"Glyphs",SpriteImage:"SpriteImage",
SpriteJSON:"SpriteJSON",Image:"Image"};"function"==typeof Object.freeze&&Object.freeze(kf);var Ne=function(u){function E(P,ea,qa){401===ea&&Gc.test(qa)&&(P+=": you may have provided an invalid Mapbox access token. See https://www.mapbox.com/api-documentation/#access-tokens-and-token-scopes");u.call(this,P);this.status=ea;this.url=qa;this.name=this.constructor.name;this.message=P}u&&(E.__proto__=u);E.prototype=Object.create(u&&u.prototype);E.prototype.constructor=E;E.prototype.toString=function(){return this.name+
": "+this.message+" ("+this.status+"): "+this.url};return E}(Error),xf=v()?function(){return self.worker&&self.worker.referrer}:function(){return("blob:"===self.location.protocol?self.parent:self).location.href},wf=function(u,E){var P=u.url;if(!(/^file:/.test(P)||/^file:/.test(xf())&&!/^\w+:/.test(P))){if(self.fetch&&self.Request&&self.AbortController&&self.Request.prototype.hasOwnProperty("signal"))return aa(u,E);if(v()&&self.worker&&self.worker.actor)return self.worker.actor.send("getResource",
u,E,void 0,!0)}return ja(u,E)},lg=function(u,E){return wf(f(u,{type:"arrayBuffer"}),E)},Cf=function(u,E){return wf(f(u,{method:"POST"}),E)};var Dg=[];var ef=0;var hg=function(u,E){Qa.supported&&(u.headers||(u.headers={}),u.headers.accept="image/webp,*/*");if(ef>=Ca.MAX_PARALLEL_IMAGE_REQUESTS)return u={requestParameters:u,callback:E,cancelled:!1,cancel:function(){this.cancelled=!0}},Dg.push(u),u;ef++;var P=!1,ea=function(){if(!P)for(P=!0,ef--;Dg.length&&ef<Ca.MAX_PARALLEL_IMAGE_REQUESTS;){var xa=
Dg.shift(),Ea=xa.requestParameters,Va=xa.callback;xa.cancelled||(xa.cancel=hg(Ea,Va).cancel)}},qa=lg(u,function(xa,Ea,Va,Ya){ea();xa?E(xa):Ea&&(W()?ra(Ea,E):ia(Ea,E,Va,Ya))});return{cancel:function(){qa.cancel();ea()}}},ca=function(u,E){void 0===E&&(E={});f(this,E);this.type=u},ua=function(u){function E(P,ea){void 0===ea&&(ea={});u.call(this,"error",f({error:P},ea))}u&&(E.__proto__=u);E.prototype=Object.create(u&&u.prototype);return E.prototype.constructor=E}(ca),Ba=function(){};Ba.prototype.on=function(u,
E){this._listeners=this._listeners||{};wa(u,E,this._listeners);return this};Ba.prototype.off=function(u,E){pa(u,E,this._listeners);pa(u,E,this._oneTimeListeners);return this};Ba.prototype.once=function(u,E){this._oneTimeListeners=this._oneTimeListeners||{};wa(u,E,this._oneTimeListeners);return this};Ba.prototype.fire=function(u,E){"string"===typeof u&&(u=new ca(u,E||{}));E=u.type;if(this.listens(E)){u.target=this;for(var P=0,ea=this._listeners&&this._listeners[E]?this._listeners[E].slice():[];P<ea.length;P+=
1)ea[P].call(this,u);P=0;for(ea=this._oneTimeListeners&&this._oneTimeListeners[E]?this._oneTimeListeners[E].slice():[];P<ea.length;P+=1){var qa=ea[P];pa(E,qa,this._oneTimeListeners);qa.call(this,u)}if(E=this._eventedParent)f(u,"function"===typeof this._eventedParentData?this._eventedParentData():this._eventedParentData),E.fire(u)}else u instanceof ua&&console.error(u.error);return this};Ba.prototype.listens=function(u){return this._listeners&&this._listeners[u]&&0<this._listeners[u].length||this._oneTimeListeners&&
this._oneTimeListeners[u]&&0<this._oneTimeListeners[u].length||this._eventedParent&&this._eventedParent.listens(u)};Ba.prototype.setEventedParent=function(u,E){this._eventedParent=u;this._eventedParentData=E;return this};var Da={$version:8,$root:{version:{required:!0,type:"enum",values:[8]},name:{type:"string"},metadata:{type:"*"},center:{type:"array",value:"number"},zoom:{type:"number"},bearing:{type:"number","default":0,period:360,units:"degrees"},pitch:{type:"number","default":0,units:"degrees"},
light:{type:"light"},sources:{required:!0,type:"sources"},sprite:{type:"string"},glyphs:{type:"string"},transition:{type:"transition"},layers:{required:!0,type:"array",value:"layer"}},sources:{"*":{type:"source"}},source:"source_vector source_raster source_raster_dem source_geojson source_video source_image".split(" "),source_vector:{type:{required:!0,type:"enum",values:{vector:{}}},url:{type:"string"},tiles:{type:"array",value:"string"},bounds:{type:"array",value:"number",length:4,"default":[-180,
-85.051129,180,85.051129]},scheme:{type:"enum",values:{xyz:{},tms:{}},"default":"xyz"},minzoom:{type:"number","default":0},maxzoom:{type:"number","default":22},attribution:{type:"string"},promoteId:{type:"promoteId"},"*":{type:"*"}},source_raster:{type:{required:!0,type:"enum",values:{raster:{}}},url:{type:"string"},tiles:{type:"array",value:"string"},bounds:{type:"array",value:"number",length:4,"default":[-180,-85.051129,180,85.051129]},minzoom:{type:"number","default":0},maxzoom:{type:"number",
"default":22},tileSize:{type:"number","default":512,units:"pixels"},scheme:{type:"enum",values:{xyz:{},tms:{}},"default":"xyz"},attribution:{type:"string"},"*":{type:"*"}},source_raster_dem:{type:{required:!0,type:"enum",values:{"raster-dem":{}}},url:{type:"string"},tiles:{type:"array",value:"string"},bounds:{type:"array",value:"number",length:4,"default":[-180,-85.051129,180,85.051129]},minzoom:{type:"number","default":0},maxzoom:{type:"number","default":22},tileSize:{type:"number","default":512,
units:"pixels"},attribution:{type:"string"},encoding:{type:"enum",values:{terrarium:{},mapbox:{}},"default":"mapbox"},"*":{type:"*"}},source_geojson:{type:{required:!0,type:"enum",values:{geojson:{}}},data:{type:"*"},maxzoom:{type:"number","default":18},attribution:{type:"string"},buffer:{type:"number","default":128,maximum:512,minimum:0},tolerance:{type:"number","default":.375},cluster:{type:"boolean","default":!1},clusterRadius:{type:"number","default":50,minimum:0},clusterMaxZoom:{type:"number"},
clusterProperties:{type:"*"},lineMetrics:{type:"boolean","default":!1},generateId:{type:"boolean","default":!1},promoteId:{type:"promoteId"}},source_video:{type:{required:!0,type:"enum",values:{video:{}}},urls:{required:!0,type:"array",value:"string"},coordinates:{required:!0,type:"array",length:4,value:{type:"array",length:2,value:"number"}}},source_image:{type:{required:!0,type:"enum",values:{image:{}}},url:{required:!0,type:"string"},coordinates:{required:!0,type:"array",length:4,value:{type:"array",
length:2,value:"number"}}},layer:{id:{type:"string",required:!0},type:{type:"enum",values:{fill:{},line:{},symbol:{},circle:{},heatmap:{},"fill-extrusion":{},raster:{},hillshade:{},background:{}},required:!0},metadata:{type:"*"},source:{type:"string"},"source-layer":{type:"string"},minzoom:{type:"number",minimum:0,maximum:24},maxzoom:{type:"number",minimum:0,maximum:24},filter:{type:"filter"},layout:{type:"layout"},paint:{type:"paint"}},layout:"layout_fill layout_line layout_circle layout_heatmap layout_fill-extrusion layout_symbol layout_raster layout_hillshade layout_background".split(" "),
layout_background:{visibility:{type:"enum",values:{visible:{},none:{}},"default":"visible","property-type":"constant"}},layout_fill:{"fill-sort-key":{type:"number",expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},visibility:{type:"enum",values:{visible:{},none:{}},"default":"visible","property-type":"constant"}},layout_circle:{"circle-sort-key":{type:"number",expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},visibility:{type:"enum",
values:{visible:{},none:{}},"default":"visible","property-type":"constant"}},layout_heatmap:{visibility:{type:"enum",values:{visible:{},none:{}},"default":"visible","property-type":"constant"}},"layout_fill-extrusion":{visibility:{type:"enum",values:{visible:{},none:{}},"default":"visible","property-type":"constant"}},layout_line:{"line-cap":{type:"enum",values:{butt:{},round:{},square:{}},"default":"butt",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"line-join":{type:"enum",
values:{bevel:{},round:{},miter:{}},"default":"miter",expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"line-miter-limit":{type:"number","default":2,requires:[{"line-join":"miter"}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"line-round-limit":{type:"number","default":1.05,requires:[{"line-join":"round"}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"line-sort-key":{type:"number",expression:{interpolated:!1,
parameters:["zoom","feature"]},"property-type":"data-driven"},visibility:{type:"enum",values:{visible:{},none:{}},"default":"visible","property-type":"constant"}},layout_symbol:{"symbol-placement":{type:"enum",values:{point:{},line:{},"line-center":{}},"default":"point",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"symbol-spacing":{type:"number","default":250,minimum:1,units:"pixels",requires:[{"symbol-placement":"line"}],expression:{interpolated:!0,parameters:["zoom"]},
"property-type":"data-constant"},"symbol-avoid-edges":{type:"boolean","default":!1,expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"symbol-sort-key":{type:"number",expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"symbol-z-order":{type:"enum",values:{auto:{},"viewport-y":{},source:{}},"default":"auto",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-allow-overlap":{type:"boolean","default":!1,
requires:["icon-image"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-ignore-placement":{type:"boolean","default":!1,requires:["icon-image"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-optional":{type:"boolean","default":!1,requires:["icon-image","text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-rotation-alignment":{type:"enum",values:{map:{},viewport:{},auto:{}},
"default":"auto",requires:["icon-image"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-size":{type:"number","default":1,minimum:0,units:"factor of the original icon size",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-text-fit":{type:"enum",values:{none:{},width:{},height:{},both:{}},"default":"none",requires:["icon-image","text-field"],expression:{interpolated:!1,parameters:["zoom"]},
"property-type":"data-constant"},"icon-text-fit-padding":{type:"array",value:"number",length:4,"default":[0,0,0,0],units:"pixels",requires:["icon-image","text-field",{"icon-text-fit":["both","width","height"]}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"icon-image":{type:"resolvedImage",tokens:!0,expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-rotate":{type:"number","default":0,period:360,units:"degrees",requires:["icon-image"],
expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-padding":{type:"number","default":2,minimum:0,units:"pixels",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"icon-keep-upright":{type:"boolean","default":!1,requires:["icon-image",{"icon-rotation-alignment":"map"},{"symbol-placement":["line","line-center"]}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-offset":{type:"array",
value:"number",length:2,"default":[0,0],requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-anchor":{type:"enum",values:{center:{},left:{},right:{},top:{},bottom:{},"top-left":{},"top-right":{},"bottom-left":{},"bottom-right":{}},"default":"center",requires:["icon-image"],expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-pitch-alignment":{type:"enum",values:{map:{},viewport:{},auto:{}},
"default":"auto",requires:["icon-image"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-pitch-alignment":{type:"enum",values:{map:{},viewport:{},auto:{}},"default":"auto",requires:["text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-rotation-alignment":{type:"enum",values:{map:{},viewport:{},auto:{}},"default":"auto",requires:["text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},
"text-field":{type:"formatted","default":"",tokens:!0,expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-font":{type:"array",value:"string","default":["Open Sans Regular","Arial Unicode MS Regular"],requires:["text-field"],expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-size":{type:"number","default":16,minimum:0,units:"pixels",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature"]},
"property-type":"data-driven"},"text-max-width":{type:"number","default":10,minimum:0,units:"ems",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-line-height":{type:"number","default":1.2,units:"ems",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"text-letter-spacing":{type:"number","default":0,units:"ems",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom",
"feature"]},"property-type":"data-driven"},"text-justify":{type:"enum",values:{auto:{},left:{},center:{},right:{}},"default":"center",requires:["text-field"],expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-radial-offset":{type:"number",units:"ems","default":0,requires:["text-field"],"property-type":"data-driven",expression:{interpolated:!0,parameters:["zoom","feature"]}},"text-variable-anchor":{type:"array",value:"enum",values:{center:{},left:{},right:{},
top:{},bottom:{},"top-left":{},"top-right":{},"bottom-left":{},"bottom-right":{}},requires:["text-field",{"symbol-placement":["point"]}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-anchor":{type:"enum",values:{center:{},left:{},right:{},top:{},bottom:{},"top-left":{},"top-right":{},"bottom-left":{},"bottom-right":{}},"default":"center",requires:["text-field",{"!":"text-variable-anchor"}],expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},
"text-max-angle":{type:"number","default":45,units:"degrees",requires:["text-field",{"symbol-placement":["line","line-center"]}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"text-writing-mode":{type:"array",value:"enum",values:{horizontal:{},vertical:{}},requires:["text-field",{"symbol-placement":["point"]}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-rotate":{type:"number","default":0,period:360,units:"degrees",requires:["text-field"],
expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-padding":{type:"number","default":2,minimum:0,units:"pixels",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"text-keep-upright":{type:"boolean","default":!0,requires:["text-field",{"text-rotation-alignment":"map"},{"symbol-placement":["line","line-center"]}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-transform":{type:"enum",
values:{none:{},uppercase:{},lowercase:{}},"default":"none",requires:["text-field"],expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-offset":{type:"array",value:"number",units:"ems",length:2,"default":[0,0],requires:["text-field",{"!":"text-radial-offset"}],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-allow-overlap":{type:"boolean","default":!1,requires:["text-field"],expression:{interpolated:!1,parameters:["zoom"]},
"property-type":"data-constant"},"text-ignore-placement":{type:"boolean","default":!1,requires:["text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-optional":{type:"boolean","default":!1,requires:["text-field","icon-image"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},visibility:{type:"enum",values:{visible:{},none:{}},"default":"visible","property-type":"constant"}},layout_raster:{visibility:{type:"enum",values:{visible:{},
none:{}},"default":"visible","property-type":"constant"}},layout_hillshade:{visibility:{type:"enum",values:{visible:{},none:{}},"default":"visible","property-type":"constant"}},filter:{type:"array",value:"*"},filter_operator:{type:"enum",values:{"\x3d\x3d":{},"!\x3d":{},"\x3e":{},"\x3e\x3d":{},"\x3c":{},"\x3c\x3d":{},"in":{},"!in":{},all:{},any:{},none:{},has:{},"!has":{},within:{}}},geometry_type:{type:"enum",values:{Point:{},LineString:{},Polygon:{}}},"function":{expression:{type:"expression"},
stops:{type:"array",value:"function_stop"},base:{type:"number","default":1,minimum:0},property:{type:"string","default":"$zoom"},type:{type:"enum",values:{identity:{},exponential:{},interval:{},categorical:{}},"default":"exponential"},colorSpace:{type:"enum",values:{rgb:{},lab:{},hcl:{}},"default":"rgb"},"default":{type:"*",required:!1}},function_stop:{type:"array",minimum:0,maximum:24,value:["number","color"],length:2},expression:{type:"array",value:"*",minimum:1},expression_name:{type:"enum",values:{let:{group:"Variable binding"},
"var":{group:"Variable binding"},literal:{group:"Types"},array:{group:"Types"},at:{group:"Lookup"},"in":{group:"Lookup"},"index-of":{group:"Lookup"},slice:{group:"Lookup"},"case":{group:"Decision"},match:{group:"Decision"},coalesce:{group:"Decision"},step:{group:"Ramps, scales, curves"},interpolate:{group:"Ramps, scales, curves"},"interpolate-hcl":{group:"Ramps, scales, curves"},"interpolate-lab":{group:"Ramps, scales, curves"},ln2:{group:"Math"},pi:{group:"Math"},e:{group:"Math"},"typeof":{group:"Types"},
string:{group:"Types"},number:{group:"Types"},boolean:{group:"Types"},object:{group:"Types"},collator:{group:"Types"},format:{group:"Types"},image:{group:"Types"},"number-format":{group:"Types"},"to-string":{group:"Types"},"to-number":{group:"Types"},"to-boolean":{group:"Types"},"to-rgba":{group:"Color"},"to-color":{group:"Types"},rgb:{group:"Color"},rgba:{group:"Color"},get:{group:"Lookup"},has:{group:"Lookup"},length:{group:"Lookup"},properties:{group:"Feature data"},"feature-state":{group:"Feature data"},
"geometry-type":{group:"Feature data"},id:{group:"Feature data"},zoom:{group:"Zoom"},"heatmap-density":{group:"Heatmap"},"line-progress":{group:"Feature data"},accumulated:{group:"Feature data"},"+":{group:"Math"},"*":{group:"Math"},"-":{group:"Math"},"/":{group:"Math"},"%":{group:"Math"},"^":{group:"Math"},sqrt:{group:"Math"},log10:{group:"Math"},ln:{group:"Math"},log2:{group:"Math"},sin:{group:"Math"},cos:{group:"Math"},tan:{group:"Math"},asin:{group:"Math"},acos:{group:"Math"},atan:{group:"Math"},
min:{group:"Math"},max:{group:"Math"},round:{group:"Math"},abs:{group:"Math"},ceil:{group:"Math"},floor:{group:"Math"},distance:{group:"Math"},"\x3d\x3d":{group:"Decision"},"!\x3d":{group:"Decision"},"\x3e":{group:"Decision"},"\x3c":{group:"Decision"},"\x3e\x3d":{group:"Decision"},"\x3c\x3d":{group:"Decision"},all:{group:"Decision"},any:{group:"Decision"},"!":{group:"Decision"},within:{group:"Decision"},"is-supported-script":{group:"String"},upcase:{group:"String"},downcase:{group:"String"},concat:{group:"String"},
"resolved-locale":{group:"String"}}},light:{anchor:{type:"enum","default":"viewport",values:{map:{},viewport:{}},"property-type":"data-constant",transition:!1,expression:{interpolated:!1,parameters:["zoom"]}},position:{type:"array","default":[1.15,210,30],length:3,value:"number","property-type":"data-constant",transition:!0,expression:{interpolated:!0,parameters:["zoom"]}},color:{type:"color","property-type":"data-constant","default":"#ffffff",expression:{interpolated:!0,parameters:["zoom"]},transition:!0},
intensity:{type:"number","property-type":"data-constant","default":.5,minimum:0,maximum:1,expression:{interpolated:!0,parameters:["zoom"]},transition:!0}},paint:"paint_fill paint_line paint_circle paint_heatmap paint_fill-extrusion paint_symbol paint_raster paint_hillshade paint_background".split(" "),paint_fill:{"fill-antialias":{type:"boolean","default":!0,expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"fill-opacity":{type:"number","default":1,minimum:0,maximum:1,
transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-color":{type:"color","default":"#000000",transition:!0,requires:[{"!":"fill-pattern"}],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-outline-color":{type:"color",transition:!0,requires:[{"!":"fill-pattern"},{"fill-antialias":!0}],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},
"fill-translate":{type:"array",value:"number",length:2,"default":[0,0],transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"fill-translate-anchor":{type:"enum",values:{map:{},viewport:{}},"default":"map",requires:["fill-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"fill-pattern":{type:"resolvedImage",transition:!0,expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"cross-faded-data-driven"}},
"paint_fill-extrusion":{"fill-extrusion-opacity":{type:"number","default":1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"fill-extrusion-color":{type:"color","default":"#000000",transition:!0,requires:[{"!":"fill-extrusion-pattern"}],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-extrusion-translate":{type:"array",value:"number",length:2,"default":[0,0],transition:!0,
units:"pixels",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"fill-extrusion-translate-anchor":{type:"enum",values:{map:{},viewport:{}},"default":"map",requires:["fill-extrusion-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"fill-extrusion-pattern":{type:"resolvedImage",transition:!0,expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"cross-faded-data-driven"},"fill-extrusion-height":{type:"number",
"default":0,minimum:0,units:"meters",transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-extrusion-base":{type:"number","default":0,minimum:0,units:"meters",transition:!0,requires:["fill-extrusion-height"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-extrusion-vertical-gradient":{type:"boolean","default":!0,transition:!1,expression:{interpolated:!1,parameters:["zoom"]},
"property-type":"data-constant"}},paint_line:{"line-opacity":{type:"number","default":1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-color":{type:"color","default":"#000000",transition:!0,requires:[{"!":"line-pattern"}],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-translate":{type:"array",value:"number",length:2,"default":[0,0],transition:!0,
units:"pixels",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"line-translate-anchor":{type:"enum",values:{map:{},viewport:{}},"default":"map",requires:["line-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"line-width":{type:"number","default":1,minimum:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-gap-width":{type:"number",
"default":0,minimum:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-offset":{type:"number","default":0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-blur":{type:"number","default":0,minimum:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},
"line-dasharray":{type:"array",value:"number",minimum:0,transition:!0,units:"line widths",requires:[{"!":"line-pattern"}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"cross-faded"},"line-pattern":{type:"resolvedImage",transition:!0,expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"cross-faded-data-driven"},"line-gradient":{type:"color",transition:!1,requires:[{"!":"line-dasharray"},{"!":"line-pattern"},{source:"geojson",has:{lineMetrics:!0}}],expression:{interpolated:!0,
parameters:["line-progress"]},"property-type":"color-ramp"}},paint_circle:{"circle-radius":{type:"number","default":5,minimum:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-color":{type:"color","default":"#000000",transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-blur":{type:"number","default":0,transition:!0,expression:{interpolated:!0,
parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-opacity":{type:"number","default":1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-translate":{type:"array",value:"number",length:2,"default":[0,0],transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"circle-translate-anchor":{type:"enum",values:{map:{},viewport:{}},
"default":"map",requires:["circle-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"circle-pitch-scale":{type:"enum",values:{map:{},viewport:{}},"default":"map",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"circle-pitch-alignment":{type:"enum",values:{map:{},viewport:{}},"default":"viewport",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"circle-stroke-width":{type:"number","default":0,
minimum:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-stroke-color":{type:"color","default":"#000000",transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-stroke-opacity":{type:"number","default":1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"}},
paint_heatmap:{"heatmap-radius":{type:"number","default":30,minimum:1,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"heatmap-weight":{type:"number","default":1,minimum:0,transition:!1,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"heatmap-intensity":{type:"number","default":1,minimum:0,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},
"heatmap-color":{type:"color","default":["interpolate",["linear"],["heatmap-density"],0,"rgba(0, 0, 255, 0)",.1,"royalblue",.3,"cyan",.5,"lime",.7,"yellow",1,"red"],transition:!1,expression:{interpolated:!0,parameters:["heatmap-density"]},"property-type":"color-ramp"},"heatmap-opacity":{type:"number","default":1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"}},paint_symbol:{"icon-opacity":{type:"number","default":1,minimum:0,maximum:1,
transition:!0,requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-color":{type:"color","default":"#000000",transition:!0,requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-halo-color":{type:"color","default":"rgba(0, 0, 0, 0)",transition:!0,requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},
"property-type":"data-driven"},"icon-halo-width":{type:"number","default":0,minimum:0,transition:!0,units:"pixels",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-halo-blur":{type:"number","default":0,minimum:0,transition:!0,units:"pixels",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-translate":{type:"array",value:"number",
length:2,"default":[0,0],transition:!0,units:"pixels",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"icon-translate-anchor":{type:"enum",values:{map:{},viewport:{}},"default":"map",requires:["icon-image","icon-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-opacity":{type:"number","default":1,minimum:0,maximum:1,transition:!0,requires:["text-field"],expression:{interpolated:!0,parameters:["zoom",
"feature","feature-state"]},"property-type":"data-driven"},"text-color":{type:"color","default":"#000000",transition:!0,overridable:!0,requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-halo-color":{type:"color","default":"rgba(0, 0, 0, 0)",transition:!0,requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-halo-width":{type:"number",
"default":0,minimum:0,transition:!0,units:"pixels",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-halo-blur":{type:"number","default":0,minimum:0,transition:!0,units:"pixels",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-translate":{type:"array",value:"number",length:2,"default":[0,0],transition:!0,units:"pixels",requires:["text-field"],
expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"text-translate-anchor":{type:"enum",values:{map:{},viewport:{}},"default":"map",requires:["text-field","text-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"}},paint_raster:{"raster-opacity":{type:"number","default":1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-hue-rotate":{type:"number","default":0,
period:360,transition:!0,units:"degrees",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-brightness-min":{type:"number","default":0,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-brightness-max":{type:"number","default":1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-saturation":{type:"number","default":0,
minimum:-1,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-contrast":{type:"number","default":0,minimum:-1,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-resampling":{type:"enum",values:{linear:{},nearest:{}},"default":"linear",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"raster-fade-duration":{type:"number","default":300,minimum:0,
transition:!1,units:"milliseconds",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"}},paint_hillshade:{"hillshade-illumination-direction":{type:"number","default":335,minimum:0,maximum:359,transition:!1,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-illumination-anchor":{type:"enum",values:{map:{},viewport:{}},"default":"viewport",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-exaggeration":{type:"number",
"default":.5,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-shadow-color":{type:"color","default":"#000000",transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-highlight-color":{type:"color","default":"#FFFFFF",transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-accent-color":{type:"color","default":"#000000",
transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"}},paint_background:{"background-color":{type:"color","default":"#000000",transition:!0,requires:[{"!":"background-pattern"}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"background-pattern":{type:"resolvedImage",transition:!0,expression:{interpolated:!1,parameters:["zoom"]},"property-type":"cross-faded"},"background-opacity":{type:"number","default":1,minimum:0,maximum:1,
transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"}},transition:{duration:{type:"number","default":300,minimum:0,units:"milliseconds"},delay:{type:"number","default":0,minimum:0,units:"milliseconds"}},"property-type":{"data-driven":{type:"property-type"},"cross-faded":{type:"property-type"},"cross-faded-data-driven":{type:"property-type"},"color-ramp":{type:"property-type"},"data-constant":{type:"property-type"},constant:{type:"property-type"}},promoteId:{"*":{type:"string"}}},
Ma=function(u,E,P,ea){this.message=(u?u+": ":"")+P;ea&&(this.identifier=ea);null!==E&&void 0!==E&&E.__line__&&(this.line=E.__line__)},Ua=function(u){function E(P,ea){u.call(this,ea);this.message=ea;this.key=P}u&&(E.__proto__=u);E.prototype=Object.create(u&&u.prototype);return E.prototype.constructor=E}(Error),nb=function(u,E){void 0===E&&(E=[]);this.parent=u;this.bindings={};for(u=0;u<E.length;u+=1){var P=E[u];this.bindings[P[0]]=P[1]}};nb.prototype.concat=function(u){return new nb(this,u)};nb.prototype.get=
function(u){if(this.bindings[u])return this.bindings[u];if(this.parent)return this.parent.get(u);throw Error(u+" not found in scope.");};nb.prototype.has=function(u){return this.bindings[u]?!0:this.parent?this.parent.has(u):!1};var eb={kind:"null"},db={kind:"number"},wb={kind:"string"},Eb={kind:"boolean"},Tb={kind:"color"},mc={kind:"object"},ic={kind:"value"},Ac={kind:"collator"},Kc={kind:"formatted"},Lc={kind:"resolvedImage"},Qc=[eb,db,wb,Eb,Tb,Kc,mc,sa(ic),Lc],od=g(function(u,E){function P(gb){gb=
Math.round(gb);return 0>gb?0:255<gb?255:gb}function ea(gb){return 0>gb?0:1<gb?1:gb}function qa(gb){return"%"===gb[gb.length-1]?P(parseFloat(gb)/100*255):P(parseInt(gb))}function xa(gb){return"%"===gb[gb.length-1]?ea(parseFloat(gb)/100):ea(parseFloat(gb))}function Ea(gb,Fb,Sb){0>Sb?Sb+=1:1<Sb&&--Sb;return 1>6*Sb?gb+(Fb-gb)*Sb*6:1>2*Sb?Fb:2>3*Sb?gb+(Fb-gb)*(2/3-Sb)*6:gb}function Va(gb){gb=gb.replace(/ /g,"").toLowerCase();if(gb in Ya)return Ya[gb].slice();if("#"===gb[0])return 4===gb.length?(gb=parseInt(gb.substr(1),
16),0<=gb&&4095>=gb?[(gb&3840)>>4|(gb&3840)>>8,gb&240|(gb&240)>>4,gb&15|(gb&15)<<4,1]:null):7===gb.length?(gb=parseInt(gb.substr(1),16),0<=gb&&16777215>=gb?[(gb&16711680)>>16,(gb&65280)>>8,gb&255,1]:null):null;var Fb=gb.indexOf("("),Sb=gb.indexOf(")");if(-1!==Fb&&Sb+1===gb.length){var jc=gb.substr(0,Fb);Fb=gb.substr(Fb+1,Sb-(Fb+1)).split(",");gb=1;switch(jc){case "rgba":if(4!==Fb.length)break;gb=xa(Fb.pop());case "rgb":if(3!==Fb.length)break;return[qa(Fb[0]),qa(Fb[1]),qa(Fb[2]),gb];case "hsla":if(4!==
Fb.length)break;gb=xa(Fb.pop());case "hsl":if(3===Fb.length)return jc=(parseFloat(Fb[0])%360+360)%360/360,Sb=xa(Fb[1]),Fb=xa(Fb[2]),Sb=.5>=Fb?Fb*(Sb+1):Fb+Sb-Fb*Sb,Fb=2*Fb-Sb,[P(255*Ea(Fb,Sb,jc+1/3)),P(255*Ea(Fb,Sb,jc)),P(255*Ea(Fb,Sb,jc-1/3)),gb]}}return null}var Ya={transparent:[0,0,0,0],aliceblue:[240,248,255,1],antiquewhite:[250,235,215,1],aqua:[0,255,255,1],aquamarine:[127,255,212,1],azure:[240,255,255,1],beige:[245,245,220,1],bisque:[255,228,196,1],black:[0,0,0,1],blanchedalmond:[255,235,205,
1],blue:[0,0,255,1],blueviolet:[138,43,226,1],brown:[165,42,42,1],burlywood:[222,184,135,1],cadetblue:[95,158,160,1],chartreuse:[127,255,0,1],chocolate:[210,105,30,1],coral:[255,127,80,1],cornflowerblue:[100,149,237,1],cornsilk:[255,248,220,1],crimson:[220,20,60,1],cyan:[0,255,255,1],darkblue:[0,0,139,1],darkcyan:[0,139,139,1],darkgoldenrod:[184,134,11,1],darkgray:[169,169,169,1],darkgreen:[0,100,0,1],darkgrey:[169,169,169,1],darkkhaki:[189,183,107,1],darkmagenta:[139,0,139,1],darkolivegreen:[85,
107,47,1],darkorange:[255,140,0,1],darkorchid:[153,50,204,1],darkred:[139,0,0,1],darksalmon:[233,150,122,1],darkseagreen:[143,188,143,1],darkslateblue:[72,61,139,1],darkslategray:[47,79,79,1],darkslategrey:[47,79,79,1],darkturquoise:[0,206,209,1],darkviolet:[148,0,211,1],deeppink:[255,20,147,1],deepskyblue:[0,191,255,1],dimgray:[105,105,105,1],dimgrey:[105,105,105,1],dodgerblue:[30,144,255,1],firebrick:[178,34,34,1],floralwhite:[255,250,240,1],forestgreen:[34,139,34,1],fuchsia:[255,0,255,1],gainsboro:[220,
220,220,1],ghostwhite:[248,248,255,1],gold:[255,215,0,1],goldenrod:[218,165,32,1],gray:[128,128,128,1],green:[0,128,0,1],greenyellow:[173,255,47,1],grey:[128,128,128,1],honeydew:[240,255,240,1],hotpink:[255,105,180,1],indianred:[205,92,92,1],indigo:[75,0,130,1],ivory:[255,255,240,1],khaki:[240,230,140,1],lavender:[230,230,250,1],lavenderblush:[255,240,245,1],lawngreen:[124,252,0,1],lemonchiffon:[255,250,205,1],lightblue:[173,216,230,1],lightcoral:[240,128,128,1],lightcyan:[224,255,255,1],lightgoldenrodyellow:[250,
250,210,1],lightgray:[211,211,211,1],lightgreen:[144,238,144,1],lightgrey:[211,211,211,1],lightpink:[255,182,193,1],lightsalmon:[255,160,122,1],lightseagreen:[32,178,170,1],lightskyblue:[135,206,250,1],lightslategray:[119,136,153,1],lightslategrey:[119,136,153,1],lightsteelblue:[176,196,222,1],lightyellow:[255,255,224,1],lime:[0,255,0,1],limegreen:[50,205,50,1],linen:[250,240,230,1],magenta:[255,0,255,1],maroon:[128,0,0,1],mediumaquamarine:[102,205,170,1],mediumblue:[0,0,205,1],mediumorchid:[186,
85,211,1],mediumpurple:[147,112,219,1],mediumseagreen:[60,179,113,1],mediumslateblue:[123,104,238,1],mediumspringgreen:[0,250,154,1],mediumturquoise:[72,209,204,1],mediumvioletred:[199,21,133,1],midnightblue:[25,25,112,1],mintcream:[245,255,250,1],mistyrose:[255,228,225,1],moccasin:[255,228,181,1],navajowhite:[255,222,173,1],navy:[0,0,128,1],oldlace:[253,245,230,1],olive:[128,128,0,1],olivedrab:[107,142,35,1],orange:[255,165,0,1],orangered:[255,69,0,1],orchid:[218,112,214,1],palegoldenrod:[238,232,
170,1],palegreen:[152,251,152,1],paleturquoise:[175,238,238,1],palevioletred:[219,112,147,1],papayawhip:[255,239,213,1],peachpuff:[255,218,185,1],peru:[205,133,63,1],pink:[255,192,203,1],plum:[221,160,221,1],powderblue:[176,224,230,1],purple:[128,0,128,1],rebeccapurple:[102,51,153,1],red:[255,0,0,1],rosybrown:[188,143,143,1],royalblue:[65,105,225,1],saddlebrown:[139,69,19,1],salmon:[250,128,114,1],sandybrown:[244,164,96,1],seagreen:[46,139,87,1],seashell:[255,245,238,1],sienna:[160,82,45,1],silver:[192,
192,192,1],skyblue:[135,206,235,1],slateblue:[106,90,205,1],slategray:[112,128,144,1],slategrey:[112,128,144,1],snow:[255,250,250,1],springgreen:[0,255,127,1],steelblue:[70,130,180,1],tan:[210,180,140,1],teal:[0,128,128,1],thistle:[216,191,216,1],tomato:[255,99,71,1],turquoise:[64,224,208,1],violet:[238,130,238,1],wheat:[245,222,179,1],white:[255,255,255,1],whitesmoke:[245,245,245,1],yellow:[255,255,0,1],yellowgreen:[154,205,50,1]};try{E.parseCSSColor=Va}catch(gb){}}).parseCSSColor,sd=function(u,
E,P,ea){void 0===ea&&(ea=1);this.r=u;this.g=E;this.b=P;this.a=ea};sd.parse=function(u){if(u){if(u instanceof sd)return u;if("string"===typeof u&&(u=od(u)))return new sd(u[0]/255*u[3],u[1]/255*u[3],u[2]/255*u[3],u[3])}};sd.prototype.toString=function(){var u=this.toArray();return"rgba("+Math.round(u[0])+","+Math.round(u[1])+","+Math.round(u[2])+","+u[3]+")"};sd.prototype.toArray=function(){var u=this.r,E=this.g,P=this.b,ea=this.a;return 0===ea?[0,0,0,0]:[255*u/ea,255*E/ea,255*P/ea,ea]};sd.black=new sd(0,
0,0,1);sd.white=new sd(1,1,1,1);sd.transparent=new sd(0,0,0,0);sd.red=new sd(1,0,0,1);var qd=function(u,E,P){this.sensitivity=u?E?"variant":"case":E?"accent":"base";this.locale=P;this.collator=new Intl.Collator(this.locale?this.locale:[],{sensitivity:this.sensitivity,usage:"search"})};qd.prototype.compare=function(u,E){return this.collator.compare(u,E)};qd.prototype.resolvedLocale=function(){return(new Intl.Collator(this.locale?this.locale:[])).resolvedOptions().locale};var Id=function(u,E,P,ea,qa){this.text=
u;this.image=E;this.scale=P;this.fontStack=ea;this.textColor=qa},zd=function(u){this.sections=u};zd.fromString=function(u){return new zd([new Id(u,null,null,null,null)])};zd.prototype.isEmpty=function(){return 0===this.sections.length?!0:!this.sections.some(function(u){return 0!==u.text.length||u.image&&0!==u.image.name.length})};zd.factory=function(u){return u instanceof zd?u:zd.fromString(u)};zd.prototype.toString=function(){return 0===this.sections.length?"":this.sections.map(function(u){return u.text}).join("")};
zd.prototype.serialize=function(){for(var u=["format"],E=0,P=this.sections;E<P.length;E+=1){var ea=P[E];if(ea.image)u.push(["image",ea.image.name]);else{u.push(ea.text);var qa={};ea.fontStack&&(qa["text-font"]=["literal",ea.fontStack.split(",")]);ea.scale&&(qa["font-scale"]=ea.scale);ea.textColor&&(qa["text-color"]=["rgba"].concat(ea.textColor.toArray()));u.push(qa)}}return u};var ee=function(u){this.name=u.name;this.available=u.available};ee.prototype.toString=function(){return this.name};ee.fromString=
function(u){return u?new ee({name:u,available:!1}):null};ee.prototype.serialize=function(){return["image",this.name]};var le=function(u,E){this.type=u;this.value=E};le.parse=function(u,E){if(2!==u.length)return E.error("'literal' expression requires exactly one argument, but found "+(u.length-1)+" instead.");if(!sb(u[1]))return E.error("invalid value");u=u[1];var P=hb(u);E=E.expectedType;"array"!==P.kind||0!==P.N||!E||"array"!==E.kind||"number"===typeof E.N&&0!==E.N||(P=E);return new le(P,u)};le.prototype.evaluate=
function(){return this.value};le.prototype.eachChild=function(){};le.prototype.outputDefined=function(){return!0};le.prototype.serialize=function(){return"array"===this.type.kind||"object"===this.type.kind?["literal",this.value]:this.value instanceof sd?["rgba"].concat(this.value.toArray()):this.value instanceof zd?this.value.serialize():this.value};var je=function(u){this.name="ExpressionEvaluationError";this.message=u};je.prototype.toJSON=function(){return this.message};var Gf={string:wb,number:db,
boolean:Eb,object:mc},me=function(u,E){this.type=u;this.args=E};me.parse=function(u,E){if(2>u.length)return E.error("Expected at least one argument.");var P=1,ea=u[0];if("array"===ea){if(2<u.length){ea=u[1];if("string"!==typeof ea||!(ea in Gf)||"object"===ea)return E.error('The item type argument of "array" must be one of string, number, boolean',1);ea=Gf[ea];P++}else ea=ic;if(3<u.length){if(null!==u[2]&&("number"!==typeof u[2]||0>u[2]||u[2]!==Math.floor(u[2])))return E.error('The length argument to "array" must be a positive integer literal',
2);var qa=u[2];P++}qa=sa(ea,qa)}else qa=Gf[ea];for(ea=[];P<u.length;P++){var xa=E.parse(u[P],P,ic);if(!xa)return null;ea.push(xa)}return new me(qa,ea)};me.prototype.evaluate=function(u){for(var E=0;E<this.args.length;E++){var P=this.args[E].evaluate(u);if(!Ha(this.type,hb(P)))return P;if(E===this.args.length-1)throw new je("Expected value to be of type "+za(this.type)+", but found "+za(hb(P))+" instead.");}return null};me.prototype.eachChild=function(u){this.args.forEach(u)};me.prototype.outputDefined=
function(){return this.args.every(function(u){return u.outputDefined()})};me.prototype.serialize=function(){var u=this.type,E=[u.kind];if("array"===u.kind){var P=u.itemType;if("string"===P.kind||"number"===P.kind||"boolean"===P.kind)E.push(P.kind),u=u.N,("number"===typeof u||1<this.args.length)&&E.push(u)}return E.concat(this.args.map(function(ea){return ea.serialize()}))};var Od=function(u){this.type=Kc;this.sections=u};Od.parse=function(u,E){if(2>u.length)return E.error("Expected at least one argument.");
var P=u[1];if(!Array.isArray(P)&&"object"===typeof P)return E.error("First argument must be an image or text section.");P=[];for(var ea=!1,qa=1;qa<=u.length-1;++qa){var xa=u[qa];if(ea&&"object"===typeof xa&&!Array.isArray(xa)){ea=!1;var Ea=null;if(xa["font-scale"]&&(Ea=E.parse(xa["font-scale"],1,db),!Ea))return null;var Va=null;if(xa["text-font"]&&(Va=E.parse(xa["text-font"],1,sa(wb)),!Va))return null;var Ya=null;if(xa["text-color"]&&(Ya=E.parse(xa["text-color"],1,Tb),!Ya))return null;xa=P[P.length-
1];xa.scale=Ea;xa.font=Va;xa.textColor=Ya}else{Ea=E.parse(u[qa],1,ic);if(!Ea)return null;ea=Ea.type.kind;if("string"!==ea&&"value"!==ea&&"null"!==ea&&"resolvedImage"!==ea)return E.error("Formatted text type must be 'string', 'value', 'image' or 'null'.");ea=!0;P.push({content:Ea,scale:null,font:null,textColor:null})}}return new Od(P)};Od.prototype.evaluate=function(u){return new zd(this.sections.map(function(E){var P=E.content.evaluate(u);return hb(P)===Lc?new Id("",P,null,null,null):new Id(ub(P),
null,E.scale?E.scale.evaluate(u):null,E.font?E.font.evaluate(u).join(","):null,E.textColor?E.textColor.evaluate(u):null)}))};Od.prototype.eachChild=function(u){for(var E=0,P=this.sections;E<P.length;E+=1){var ea=P[E];u(ea.content);ea.scale&&u(ea.scale);ea.font&&u(ea.font);ea.textColor&&u(ea.textColor)}};Od.prototype.outputDefined=function(){return!1};Od.prototype.serialize=function(){for(var u=["format"],E=0,P=this.sections;E<P.length;E+=1){var ea=P[E];u.push(ea.content.serialize());var qa={};ea.scale&&
(qa["font-scale"]=ea.scale.serialize());ea.font&&(qa["text-font"]=ea.font.serialize());ea.textColor&&(qa["text-color"]=ea.textColor.serialize());u.push(qa)}return u};var sf=function(u){this.type=Lc;this.input=u};sf.parse=function(u,E){return 2!==u.length?E.error("Expected two arguments."):(u=E.parse(u[1],1,wb))?new sf(u):E.error("No image name provided.")};sf.prototype.evaluate=function(u){var E=this.input.evaluate(u),P=ee.fromString(E);P&&u.availableImages&&(P.available=-1<u.availableImages.indexOf(E));
return P};sf.prototype.eachChild=function(u){u(this.input)};sf.prototype.outputDefined=function(){return!1};sf.prototype.serialize=function(){return["image",this.input.serialize()]};var Vf={"to-boolean":Eb,"to-color":Tb,"to-number":db,"to-string":wb},Bf=function(u,E){this.type=u;this.args=E};Bf.parse=function(u,E){if(2>u.length)return E.error("Expected at least one argument.");var P=u[0];if(("to-boolean"===P||"to-string"===P)&&2!==u.length)return E.error("Expected one argument.");P=Vf[P];for(var ea=
[],qa=1;qa<u.length;qa++){var xa=E.parse(u[qa],qa,ic);if(!xa)return null;ea.push(xa)}return new Bf(P,ea)};Bf.prototype.evaluate=function(u){if("boolean"===this.type.kind)return!!this.args[0].evaluate(u);if("color"===this.type.kind){for(var E,P,ea=0,qa=this.args;ea<qa.length;ea+=1){E=qa[ea].evaluate(u);P=null;if(E instanceof sd)return E;if("string"===typeof E){var xa=u.parseColor(E);if(xa)return xa}else if(Array.isArray(E)&&(P=3>E.length||4<E.length?"Invalid rbga value "+JSON.stringify(E)+": expected an array containing either three or four numeric values.":
bb(E[0],E[1],E[2],E[3]),!P))return new sd(E[0]/255,E[1]/255,E[2]/255,E[3])}throw new je(P||"Could not parse color from value '"+("string"===typeof E?E:String(JSON.stringify(E)))+"'");}if("number"===this.type.kind){E=null;P=0;for(ea=this.args;P<ea.length;P+=1){E=ea[P].evaluate(u);if(null===E)return 0;qa=Number(E);if(!isNaN(qa))return qa}throw new je("Could not convert "+JSON.stringify(E)+" to number.");}return"formatted"===this.type.kind?zd.fromString(ub(this.args[0].evaluate(u))):"resolvedImage"===
this.type.kind?ee.fromString(ub(this.args[0].evaluate(u))):ub(this.args[0].evaluate(u))};Bf.prototype.eachChild=function(u){this.args.forEach(u)};Bf.prototype.outputDefined=function(){return this.args.every(function(u){return u.outputDefined()})};Bf.prototype.serialize=function(){if("formatted"===this.type.kind)return(new Od([{content:this.args[0],scale:null,font:null,textColor:null}])).serialize();if("resolvedImage"===this.type.kind)return(new sf(this.args[0])).serialize();var u=["to-"+this.type.kind];
this.eachChild(function(E){u.push(E.serialize())});return u};var Of=["Unknown","Point","LineString","Polygon"],Nf=function(){this.formattedSection=this.featureState=this.feature=this.globals=null;this._parseColorCache={};this.canonical=this.availableImages=null};Nf.prototype.id=function(){return this.feature&&"id"in this.feature?this.feature.id:null};Nf.prototype.geometryType=function(){return this.feature?"number"===typeof this.feature.type?Of[this.feature.type]:this.feature.type:null};Nf.prototype.geometry=
function(){return this.feature&&"geometry"in this.feature?this.feature.geometry:null};Nf.prototype.canonicalID=function(){return this.canonical};Nf.prototype.properties=function(){return this.feature&&this.feature.properties||{}};Nf.prototype.parseColor=function(u){var E=this._parseColorCache[u];E||(E=this._parseColorCache[u]=sd.parse(u));return E};var Uf=function(u,E,P,ea){this.name=u;this.type=E;this._evaluate=P;this.args=ea};Uf.prototype.evaluate=function(u){return this._evaluate(u,this.args)};
Uf.prototype.eachChild=function(u){this.args.forEach(u)};Uf.prototype.outputDefined=function(){return!1};Uf.prototype.serialize=function(){return[this.name].concat(this.args.map(function(u){return u.serialize()}))};Uf.parse=function(u,E){var P,ea=u[0],qa=Uf.definitions[ea];if(!qa)return E.error('Unknown expression "'+ea+'". If you wanted a literal array, use ["literal", [...]].',0);var xa=Array.isArray(qa)?qa[0]:qa.type;qa=Array.isArray(qa)?[[qa[1],qa[2]]]:qa.overloads;for(var Ea=qa.filter(function(vd){vd=
vd[0];return!Array.isArray(vd)||vd.length===u.length-1}),Va=null,Ya=0;Ya<Ea.length;Ya+=1){Va=Ea[Ya];var gb=Va[0],Fb=Va[1];Va=new Wh(E.registry,E.path,null,E.scope);for(var Sb=[],jc=!1,Dc=1;Dc<u.length;Dc++){var xc=u[Dc],Hc=Array.isArray(gb)?gb[Dc-1]:gb.type;xc=Va.parse(xc,1+Sb.length,Hc);if(!xc){jc=!0;break}Sb.push(xc)}if(!jc)if(Array.isArray(gb)&&gb.length!==Sb.length)Va.error("Expected "+gb.length+" arguments, but found "+Sb.length+" instead.");else{for(jc=0;jc<Sb.length;jc++)Dc=Array.isArray(gb)?
gb[jc]:gb.type,xc=Sb[jc],Va.concat(jc+1).checkSubtype(Dc,xc.type);if(0===Va.errors.length)return new Uf(ea,xa,Fb,Sb)}}if(1===Ea.length)(P=E.errors).push.apply(P,Va.errors);else{P=(Ea.length?Ea:qa).map(function(vd){vd=vd[0];vd=Array.isArray(vd)?"("+vd.map(za).join(", ")+")":"("+za(vd.type)+"...)";return vd}).join(" | ");ea=[];for(xa=1;xa<u.length;xa++){qa=E.parse(u[xa],1+ea.length);if(!qa)return null;ea.push(za(qa.type))}E.error("Expected arguments of type "+P+", but found ("+ea.join(", ")+") instead.")}return null};
Uf.register=function(u,E){Uf.definitions=E;for(var P in E)u[P]=Uf};var gg=function(u,E,P){this.type=Ac;this.locale=P;this.caseSensitive=u;this.diacriticSensitive=E};gg.parse=function(u,E){if(2!==u.length)return E.error("Expected one argument.");u=u[1];if("object"!==typeof u||Array.isArray(u))return E.error("Collator options argument must be an object.");var P=E.parse(void 0===u["case-sensitive"]?!1:u["case-sensitive"],1,Eb);if(!P)return null;var ea=E.parse(void 0===u["diacritic-sensitive"]?!1:u["diacritic-sensitive"],
1,Eb);if(!ea)return null;var qa=null;return u.locale&&(qa=E.parse(u.locale,1,wb),!qa)?null:new gg(P,ea,qa)};gg.prototype.evaluate=function(u){return new qd(this.caseSensitive.evaluate(u),this.diacriticSensitive.evaluate(u),this.locale?this.locale.evaluate(u):null)};gg.prototype.eachChild=function(u){u(this.caseSensitive);u(this.diacriticSensitive);this.locale&&u(this.locale)};gg.prototype.outputDefined=function(){return!1};gg.prototype.serialize=function(){var u={};u["case-sensitive"]=this.caseSensitive.serialize();
u["diacritic-sensitive"]=this.diacriticSensitive.serialize();this.locale&&(u.locale=this.locale.serialize());return["collator",u]};var wg=function(u,E){this.type=Eb;this.geojson=u;this.geometries=E};wg.parse=function(u,E){if(2!==u.length)return E.error("'within' expression requires exactly one argument, but found "+(u.length-1)+" instead.");if(sb(u[1]))if(u=u[1],"FeatureCollection"===u.type)for(var P=0;P<u.features.length;++P){var ea=u.features[P].geometry.type;if("Polygon"===ea||"MultiPolygon"===
ea)return new wg(u,u.features[P].geometry)}else if("Feature"===u.type){if(P=u.geometry.type,"Polygon"===P||"MultiPolygon"===P)return new wg(u,u.geometry)}else if("Polygon"===u.type||"MultiPolygon"===u.type)return new wg(u,u);return E.error("'within' expression requires valid geojson object that contains polygon geometry type.")};wg.prototype.evaluate=function(u){if(null!=u.geometry()&&null!=u.canonicalID()){if("Point"===u.geometryType())return Ja(u,this.geometries);if("LineString"===u.geometryType())return Ta(u,
this.geometries)}return!1};wg.prototype.eachChild=function(){};wg.prototype.outputDefined=function(){return!0};wg.prototype.serialize=function(){return["within",this.geojson]};var Fg=function(u,E){this.type=E.type;this.name=u;this.boundExpression=E};Fg.parse=function(u,E){if(2!==u.length||"string"!==typeof u[1])return E.error("'var' expression requires exactly one string literal argument.");u=u[1];return E.scope.has(u)?new Fg(u,E.scope.get(u)):E.error('Unknown variable "'+u+'". Make sure "'+u+'" has been bound in an enclosing "let" expression before using it.',
1)};Fg.prototype.evaluate=function(u){return this.boundExpression.evaluate(u)};Fg.prototype.eachChild=function(){};Fg.prototype.outputDefined=function(){return!1};Fg.prototype.serialize=function(){return["var",this.name]};var Wh=function(u,E,P,ea,qa){void 0===E&&(E=[]);void 0===ea&&(ea=new nb);void 0===qa&&(qa=[]);this.registry=u;this.path=E;this.key=E.map(function(xa){return"["+xa+"]"}).join("");this.scope=ea;this.errors=qa;this.expectedType=P};Wh.prototype.parse=function(u,E,P,ea,qa){void 0===qa&&
(qa={});return E?this.concat(E,P,ea)._parse(u,qa):this._parse(u,qa)};Wh.prototype._parse=function(u,E){function P(xa,Ea,Va){return"assert"===Va?new me(Ea,[xa]):"coerce"===Va?new Bf(Ea,[xa]):xa}if(null===u||"string"===typeof u||"boolean"===typeof u||"number"===typeof u)u=["literal",u];if(Array.isArray(u)){if(0===u.length)return this.error('Expected an array with at least one element. If you wanted a literal array, use ["literal", []].');var ea=u[0];if("string"!==typeof ea)return this.error("Expression name must be a string, but found "+
typeof ea+' instead. If you wanted a literal array, use ["literal", [...]].',0),null;var qa=this.registry[ea];if(qa){u=qa.parse(u,this);if(!u)return null;if(this.expectedType)if(ea=this.expectedType,qa=u.type,("string"===ea.kind||"number"===ea.kind||"boolean"===ea.kind||"object"===ea.kind||"array"===ea.kind)&&"value"===qa.kind)u=P(u,ea,E.typeAnnotation||"assert");else if(!("color"!==ea.kind&&"formatted"!==ea.kind&&"resolvedImage"!==ea.kind||"value"!==qa.kind&&"string"!==qa.kind))u=P(u,ea,E.typeAnnotation||
"coerce");else if(this.checkSubtype(ea,qa))return null;if(!(u instanceof le)&&"resolvedImage"!==u.type.kind&&Nb(u)){E=new Nf;try{u=new le(u.type,u.evaluate(E))}catch(xa){return this.error(xa.message),null}}return u}return this.error('Unknown expression "'+ea+'". If you wanted a literal array, use ["literal", [...]].',0)}return"undefined"===typeof u?this.error("'undefined' value invalid. Use null instead."):"object"===typeof u?this.error('Bare objects invalid. Use ["literal", {...}] instead.'):this.error("Expected an array, but found "+
typeof u+" instead.")};Wh.prototype.concat=function(u,E,P){u="number"===typeof u?this.path.concat(u):this.path;P=P?this.scope.concat(P):this.scope;return new Wh(this.registry,u,E||null,P,this.errors)};Wh.prototype.error=function(u){for(var E=[],P=arguments.length-1;0<P--;)E[P]=arguments[P+1];E=""+this.key+E.map(function(ea){return"["+ea+"]"}).join("");this.errors.push(new Ua(E,u))};Wh.prototype.checkSubtype=function(u,E){(u=Ha(u,E))&&this.error(u);return u};var pi=function(u,E,P){this.type=u;this.input=
E;this.labels=[];this.outputs=[];for(u=0;u<P.length;u+=1){E=P[u];var ea=E[1];this.labels.push(E[0]);this.outputs.push(ea)}};pi.parse=function(u,E){if(4>u.length-1)return E.error("Expected at least 4 arguments, but found only "+(u.length-1)+".");if(0!==(u.length-1)%2)return E.error("Expected an even number of arguments.");var P=E.parse(u[1],1,db);if(!P)return null;var ea=[],qa=null;E.expectedType&&"value"!==E.expectedType.kind&&(qa=E.expectedType);for(var xa=1;xa<u.length;xa+=2){var Ea=1===xa?-Infinity:
u[xa],Va=u[xa+1],Ya=xa,gb=xa+1;if("number"!==typeof Ea)return E.error('Input/output pairs for "step" expressions must be defined using literal numeric values (not computed expressions) for the input values.',Ya);if(ea.length&&ea[ea.length-1][0]>=Ea)return E.error('Input/output pairs for "step" expressions must be arranged with input values in strictly ascending order.',Ya);Va=E.parse(Va,gb,qa);if(!Va)return null;qa=qa||Va.type;ea.push([Ea,Va])}return new pi(qa,P,ea)};pi.prototype.evaluate=function(u){var E=
this.labels,P=this.outputs;if(1===E.length)return P[0].evaluate(u);var ea=this.input.evaluate(u);if(ea<=E[0])return P[0].evaluate(u);var qa=E.length;if(ea>=E[qa-1])return P[qa-1].evaluate(u);E=ec(E,ea);return P[E].evaluate(u)};pi.prototype.eachChild=function(u){u(this.input);for(var E=0,P=this.outputs;E<P.length;E+=1)u(P[E])};pi.prototype.outputDefined=function(){return this.outputs.every(function(u){return u.outputDefined()})};pi.prototype.serialize=function(){for(var u=["step",this.input.serialize()],
E=0;E<this.labels.length;E++)0<E&&u.push(this.labels[E]),u.push(this.outputs[E].serialize());return u};var Ui=Object.freeze({__proto__:null,number:ob,color:function(u,E,P){return new sd(ob(u.r,E.r,P),ob(u.g,E.g,P),ob(u.b,E.b,P),ob(u.a,E.a,P))},array:function(u,E,P){return u.map(function(ea,qa){return ob(ea,E[qa],P)})}}),xj=4/29,Fi=6/29,rg=3*Fi*Fi,xg=Fi*Fi*Fi,Mh=Math.PI/180,yg=180/Math.PI,dh={forward:Ia,reverse:Na,interpolate:function(u,E,P){return{l:ob(u.l,E.l,P),a:ob(u.a,E.a,P),b:ob(u.b,E.b,P),alpha:ob(u.alpha,
E.alpha,P)}}},ii={forward:function(u){var E=Ia(u),P=E.a,ea=E.b,qa=Math.atan2(ea,P)*yg;return{h:0>qa?qa+360:qa,c:Math.sqrt(P*P+ea*ea),l:E.l,alpha:u.a}},reverse:function(u){var E=u.h*Mh,P=u.c;return Na({l:u.l,a:Math.cos(E)*P,b:Math.sin(E)*P,alpha:u.alpha})},interpolate:function(u,E,P){var ea=u.h,qa=E.h-ea;return{h:ea+P*(180<qa||-180>qa?qa-360*Math.round(qa/360):qa),c:ob(u.c,E.c,P),l:ob(u.l,E.l,P),alpha:ob(u.alpha,E.alpha,P)}}},Vi=Object.freeze({__proto__:null,lab:dh,hcl:ii}),Jg=function(u,E,P,ea,qa){this.type=
u;this.operator=E;this.interpolation=P;this.input=ea;this.labels=[];this.outputs=[];for(u=0;u<qa.length;u+=1)E=qa[u],P=E[1],this.labels.push(E[0]),this.outputs.push(P)};Jg.interpolationFactor=function(u,E,P,ea){var qa=0;"exponential"===u.name?qa=ib(E,u.base,P,ea):"linear"===u.name?qa=ib(E,1,P,ea):"cubic-bezier"===u.name&&(u=u.controlPoints,qa=(new Sh(u[0],u[1],u[2],u[3])).solve(ib(E,1,P,ea)));return qa};Jg.parse=function(u,E){var P=u[0],ea=u[1],qa=u[2],xa=u.slice(3);if(!Array.isArray(ea)||0===ea.length)return E.error("Expected an interpolation type expression.",
1);if("linear"===ea[0])ea={name:"linear"};else if("exponential"===ea[0]){ea=ea[1];if("number"!==typeof ea)return E.error("Exponential interpolation requires a numeric base.",1,1);ea={name:"exponential",base:ea}}else if("cubic-bezier"===ea[0]){ea=ea.slice(1);if(4!==ea.length||ea.some(function(jc){return"number"!==typeof jc||0>jc||1<jc}))return E.error("Cubic bezier interpolation requires four numeric arguments with values between 0 and 1.",1);ea={name:"cubic-bezier",controlPoints:ea}}else return E.error("Unknown interpolation type "+
String(ea[0]),1,0);if(4>u.length-1)return E.error("Expected at least 4 arguments, but found only "+(u.length-1)+".");if(0!==(u.length-1)%2)return E.error("Expected an even number of arguments.");qa=E.parse(qa,2,db);if(!qa)return null;u=[];var Ea=null;"interpolate-hcl"===P||"interpolate-lab"===P?Ea=Tb:E.expectedType&&"value"!==E.expectedType.kind&&(Ea=E.expectedType);for(var Va=0;Va<xa.length;Va+=2){var Ya=xa[Va],gb=xa[Va+1],Fb=Va+3,Sb=Va+4;if("number"!==typeof Ya)return E.error('Input/output pairs for "interpolate" expressions must be defined using literal numeric values (not computed expressions) for the input values.',
Fb);if(u.length&&u[u.length-1][0]>=Ya)return E.error('Input/output pairs for "interpolate" expressions must be arranged with input values in strictly ascending order.',Fb);gb=E.parse(gb,Sb,Ea);if(!gb)return null;Ea=Ea||gb.type;u.push([Ya,gb])}return"number"===Ea.kind||"color"===Ea.kind||"array"===Ea.kind&&"number"===Ea.itemType.kind&&"number"===typeof Ea.N?new Jg(Ea,P,ea,qa,u):E.error("Type "+za(Ea)+" is not interpolatable.")};Jg.prototype.evaluate=function(u){var E=this.labels,P=this.outputs;if(1===
E.length)return P[0].evaluate(u);var ea=this.input.evaluate(u);if(ea<=E[0])return P[0].evaluate(u);var qa=E.length;if(ea>=E[qa-1])return P[qa-1].evaluate(u);qa=ec(E,ea);E=Jg.interpolationFactor(this.interpolation,ea,E[qa],E[qa+1]);ea=P[qa].evaluate(u);u=P[qa+1].evaluate(u);return"interpolate"===this.operator?Ui[this.type.kind.toLowerCase()](ea,u,E):"interpolate-hcl"===this.operator?ii.reverse(ii.interpolate(ii.forward(ea),ii.forward(u),E)):dh.reverse(dh.interpolate(dh.forward(ea),dh.forward(u),E))};
Jg.prototype.eachChild=function(u){u(this.input);for(var E=0,P=this.outputs;E<P.length;E+=1)u(P[E])};Jg.prototype.outputDefined=function(){return this.outputs.every(function(u){return u.outputDefined()})};Jg.prototype.serialize=function(){var u="linear"===this.interpolation.name?["linear"]:"exponential"===this.interpolation.name?1===this.interpolation.base?["linear"]:["exponential",this.interpolation.base]:["cubic-bezier"].concat(this.interpolation.controlPoints);u=[this.operator,u,this.input.serialize()];
for(var E=0;E<this.labels.length;E++)u.push(this.labels[E],this.outputs[E].serialize());return u};var Gi=function(u,E){this.type=u;this.args=E};Gi.parse=function(u,E){if(2>u.length)return E.error("Expectected at least one argument.");var P=null,ea=E.expectedType;ea&&"value"!==ea.kind&&(P=ea);var qa=[],xa=0;for(u=u.slice(1);xa<u.length;xa+=1){var Ea=E.parse(u[xa],1+qa.length,P,void 0,{typeAnnotation:"omit"});if(!Ea)return null;P=P||Ea.type;qa.push(Ea)}return ea&&qa.some(function(Va){return Ha(ea,Va.type)})?
new Gi(ic,qa):new Gi(P,qa)};Gi.prototype.evaluate=function(u){for(var E=null,P=0,ea,qa=0,xa=this.args;qa<xa.length&&(E=xa[qa],P++,(E=E.evaluate(u))&&E instanceof ee&&!E.available&&(ea||(ea=E.name),E=null,P===this.args.length&&(E=ea)),null===E);qa+=1);return E};Gi.prototype.eachChild=function(u){this.args.forEach(u)};Gi.prototype.outputDefined=function(){return this.args.every(function(u){return u.outputDefined()})};Gi.prototype.serialize=function(){var u=["coalesce"];this.eachChild(function(E){u.push(E.serialize())});
return u};var qi=function(u,E){this.type=E.type;this.bindings=[].concat(u);this.result=E};qi.prototype.evaluate=function(u){return this.result.evaluate(u)};qi.prototype.eachChild=function(u){for(var E=0,P=this.bindings;E<P.length;E+=1)u(P[E][1]);u(this.result)};qi.parse=function(u,E){if(4>u.length)return E.error("Expected at least 3 arguments, but found "+(u.length-1)+" instead.");for(var P=[],ea=1;ea<u.length-1;ea+=2){var qa=u[ea];if("string"!==typeof qa)return E.error("Expected string, but found "+
typeof qa+" instead.",ea);if(/[^a-zA-Z0-9_]/.test(qa))return E.error("Variable names must contain only alphanumeric characters or '_'.",ea);var xa=E.parse(u[ea+1],ea+1);if(!xa)return null;P.push([qa,xa])}return(u=E.parse(u[u.length-1],u.length-1,E.expectedType,P))?new qi(P,u):null};qi.prototype.outputDefined=function(){return this.result.outputDefined()};qi.prototype.serialize=function(){for(var u=["let"],E=0,P=this.bindings;E<P.length;E+=1){var ea=P[E];u.push(ea[0],ea[1].serialize())}u.push(this.result.serialize());
return u};var Yh=function(u,E,P){this.type=u;this.index=E;this.input=P};Yh.parse=function(u,E){if(3!==u.length)return E.error("Expected 2 arguments, but found "+(u.length-1)+" instead.");var P=E.parse(u[1],1,db);u=E.parse(u[2],2,sa(E.expectedType||ic));return P&&u?new Yh(u.type.itemType,P,u):null};Yh.prototype.evaluate=function(u){var E=this.index.evaluate(u);u=this.input.evaluate(u);if(0>E)throw new je("Array index out of bounds: "+E+" \x3c 0.");if(E>=u.length)throw new je("Array index out of bounds: "+
E+" \x3e "+(u.length-1)+".");if(E!==Math.floor(E))throw new je("Array index must be an integer, but found "+E+" instead.");return u[E]};Yh.prototype.eachChild=function(u){u(this.index);u(this.input)};Yh.prototype.outputDefined=function(){return!1};Yh.prototype.serialize=function(){return["at",this.index.serialize(),this.input.serialize()]};var Ji=function(u,E){this.type=Eb;this.needle=u;this.haystack=E};Ji.parse=function(u,E){if(3!==u.length)return E.error("Expected 2 arguments, but found "+(u.length-
1)+" instead.");var P=E.parse(u[1],1,ic);u=E.parse(u[2],2,ic);return P&&u?Wa(P.type,[Eb,wb,db,eb,ic])?new Ji(P,u):E.error("Expected first argument to be of type boolean, string, number or null, but found "+za(P.type)+" instead"):null};Ji.prototype.evaluate=function(u){var E=this.needle.evaluate(u);u=this.haystack.evaluate(u);if(!u)return!1;if(!Za(E,["boolean","string","number","null"]))throw new je("Expected first argument to be of type boolean, string, number or null, but found "+za(hb(E))+" instead.");
if(!Za(u,["string","array"]))throw new je("Expected second argument to be of type array or string, but found "+za(hb(u))+" instead.");return 0<=u.indexOf(E)};Ji.prototype.eachChild=function(u){u(this.needle);u(this.haystack)};Ji.prototype.outputDefined=function(){return!0};Ji.prototype.serialize=function(){return["in",this.needle.serialize(),this.haystack.serialize()]};var ti=function(u,E,P){this.type=db;this.needle=u;this.haystack=E;this.fromIndex=P};ti.parse=function(u,E){if(2>=u.length||5<=u.length)return E.error("Expected 3 or 4 arguments, but found "+
(u.length-1)+" instead.");var P=E.parse(u[1],1,ic),ea=E.parse(u[2],2,ic);return P&&ea?Wa(P.type,[Eb,wb,db,eb,ic])?4===u.length?(u=E.parse(u[3],3,db))?new ti(P,ea,u):null:new ti(P,ea):E.error("Expected first argument to be of type boolean, string, number or null, but found "+za(P.type)+" instead"):null};ti.prototype.evaluate=function(u){var E=this.needle.evaluate(u),P=this.haystack.evaluate(u);if(!Za(E,["boolean","string","number","null"]))throw new je("Expected first argument to be of type boolean, string, number or null, but found "+
za(hb(E))+" instead.");if(!Za(P,["string","array"]))throw new je("Expected second argument to be of type array or string, but found "+za(hb(P))+" instead.");return this.fromIndex?(u=this.fromIndex.evaluate(u),P.indexOf(E,u)):P.indexOf(E)};ti.prototype.eachChild=function(u){u(this.needle);u(this.haystack);this.fromIndex&&u(this.fromIndex)};ti.prototype.outputDefined=function(){return!1};ti.prototype.serialize=function(){if(null!=this.fromIndex&&void 0!==this.fromIndex){var u=this.fromIndex.serialize();
return["index-of",this.needle.serialize(),this.haystack.serialize(),u]}return["index-of",this.needle.serialize(),this.haystack.serialize()]};var ji=function(u,E,P,ea,qa,xa){this.inputType=u;this.type=E;this.input=P;this.cases=ea;this.outputs=qa;this.otherwise=xa};ji.parse=function(u,E){if(5>u.length)return E.error("Expected at least 4 arguments, but found only "+(u.length-1)+".");if(1!==u.length%2)return E.error("Expected an even number of arguments.");if(E.expectedType&&"value"!==E.expectedType.kind)var P=
E.expectedType;for(var ea={},qa=[],xa=2;xa<u.length-1;xa+=2){var Ea=u[xa],Va=u[xa+1];Array.isArray(Ea)||(Ea=[Ea]);var Ya=E.concat(xa);if(0===Ea.length)return Ya.error("Expected at least one branch label.");for(var gb=0;gb<Ea.length;gb+=1){var Fb=Ea[gb];if("number"!==typeof Fb&&"string"!==typeof Fb)return Ya.error("Branch labels must be numbers or strings.");if("number"===typeof Fb&&Math.abs(Fb)>Number.MAX_SAFE_INTEGER)return Ya.error("Branch labels must be integers no larger than "+Number.MAX_SAFE_INTEGER+
".");if("number"===typeof Fb&&Math.floor(Fb)!==Fb)return Ya.error("Numeric branch labels must be integer values.");if(!Sb)var Sb=hb(Fb);else if(Ya.checkSubtype(Sb,hb(Fb)))return null;if("undefined"!==typeof ea[String(Fb)])return Ya.error("Branch labels must be unique.");ea[String(Fb)]=qa.length}Va=E.parse(Va,xa,P);if(!Va)return null;P=P||Va.type;qa.push(Va)}xa=E.parse(u[1],1,ic);if(!xa)return null;u=E.parse(u[u.length-1],u.length-1,P);return!u||"value"!==xa.type.kind&&E.concat(1).checkSubtype(Sb,
xa.type)?null:new ji(Sb,P,xa,ea,qa,u)};ji.prototype.evaluate=function(u){var E=this.input.evaluate(u);return(hb(E)===this.inputType&&this.outputs[this.cases[E]]||this.otherwise).evaluate(u)};ji.prototype.eachChild=function(u){u(this.input);this.outputs.forEach(u);u(this.otherwise)};ji.prototype.outputDefined=function(){return this.outputs.every(function(u){return u.outputDefined()})&&this.otherwise.outputDefined()};ji.prototype.serialize=function(){for(var u=this,E=["match",this.input.serialize()],
P=[],ea={},qa=0,xa=Object.keys(this.cases).sort();qa<xa.length;qa+=1){var Ea=xa[qa],Va=ea[this.cases[Ea]];void 0===Va?(ea[this.cases[Ea]]=P.length,P.push([this.cases[Ea],[Ea]])):P[Va][1].push(Ea)}ea=function(Ya){return"number"===u.inputType.kind?Number(Ya):Ya};for(qa=0;qa<P.length;qa+=1)xa=P[qa],Va=xa[0],Va=xa[1],1===Va.length?E.push(ea(Va[0])):E.push(Va.map(ea)),E.push(this.outputs[outputIndex$1].serialize());E.push(this.otherwise.serialize());return E};var Ki=function(u,E,P){this.type=u;this.branches=
E;this.otherwise=P};Ki.parse=function(u,E){if(4>u.length)return E.error("Expected at least 3 arguments, but found only "+(u.length-1)+".");if(0!==u.length%2)return E.error("Expected an odd number of arguments.");if(E.expectedType&&"value"!==E.expectedType.kind)var P=E.expectedType;for(var ea=[],qa=1;qa<u.length-1;qa+=2){var xa=E.parse(u[qa],qa,Eb);if(!xa)return null;var Ea=E.parse(u[qa+1],qa+1,P);if(!Ea)return null;ea.push([xa,Ea]);P=P||Ea.type}return(u=E.parse(u[u.length-1],u.length-1,P))?new Ki(P,
ea,u):null};Ki.prototype.evaluate=function(u){for(var E=0,P=this.branches;E<P.length;E+=1){var ea=P[E],qa=ea[1];if(ea[0].evaluate(u))return qa.evaluate(u)}return this.otherwise.evaluate(u)};Ki.prototype.eachChild=function(u){for(var E=0,P=this.branches;E<P.length;E+=1){var ea=P[E],qa=ea[1];u(ea[0]);u(qa)}u(this.otherwise)};Ki.prototype.outputDefined=function(){return this.branches.every(function(u){return u[1].outputDefined()})&&this.otherwise.outputDefined()};Ki.prototype.serialize=function(){var u=
["case"];this.eachChild(function(E){u.push(E.serialize())});return u};var ki=function(u,E,P,ea){this.type=u;this.input=E;this.beginIndex=P;this.endIndex=ea};ki.parse=function(u,E){if(2>=u.length||5<=u.length)return E.error("Expected 3 or 4 arguments, but found "+(u.length-1)+" instead.");var P=E.parse(u[1],1,ic),ea=E.parse(u[2],2,db);return P&&ea?Wa(P.type,[sa(ic),wb,ic])?4===u.length?(u=E.parse(u[3],3,db))?new ki(P.type,P,ea,u):null:new ki(P.type,P,ea):E.error("Expected first argument to be of type array or string, but found "+
za(P.type)+" instead"):null};ki.prototype.evaluate=function(u){var E=this.input.evaluate(u),P=this.beginIndex.evaluate(u);if(!Za(E,["string","array"]))throw new je("Expected first argument to be of type array or string, but found "+za(hb(E))+" instead.");return this.endIndex?(u=this.endIndex.evaluate(u),E.slice(P,u)):E.slice(P)};ki.prototype.eachChild=function(u){u(this.input);u(this.beginIndex);this.endIndex&&u(this.endIndex)};ki.prototype.outputDefined=function(){return!1};ki.prototype.serialize=
function(){if(null!=this.endIndex&&void 0!==this.endIndex){var u=this.endIndex.serialize();return["slice",this.input.serialize(),this.beginIndex.serialize(),u]}return["slice",this.input.serialize(),this.beginIndex.serialize()]};var dl=$b("\x3d\x3d",function(u,E,P){return E===P},Hb),Ck=$b("!\x3d",function(u,E,P){return E!==P},function(u,E,P,ea){return!Hb(u,E,P,ea)}),Dk=$b("\x3c",function(u,E,P){return E<P},function(u,E,P,ea){return 0>ea.compare(E,P)}),Uj=$b("\x3e",function(u,E,P){return E>P},function(u,
E,P,ea){return 0<ea.compare(E,P)}),ik=$b("\x3c\x3d",function(u,E,P){return E<=P},function(u,E,P,ea){return 0>=ea.compare(E,P)}),Tk=$b("\x3e\x3d",function(u,E,P){return E>=P},function(u,E,P,ea){return 0<=ea.compare(E,P)}),nj=function(u,E,P,ea,qa){this.type=wb;this.number=u;this.locale=E;this.currency=P;this.minFractionDigits=ea;this.maxFractionDigits=qa};nj.parse=function(u,E){if(3!==u.length)return E.error("Expected two arguments.");var P=E.parse(u[1],1,db);if(!P)return null;u=u[2];if("object"!==
typeof u||Array.isArray(u))return E.error("NumberFormat options argument must be an object.");var ea=null;if(u.locale&&(ea=E.parse(u.locale,1,wb),!ea))return null;var qa=null;if(u.currency&&(qa=E.parse(u.currency,1,wb),!qa))return null;var xa=null;if(u["min-fraction-digits"]&&(xa=E.parse(u["min-fraction-digits"],1,db),!xa))return null;var Ea=null;return u["max-fraction-digits"]&&(Ea=E.parse(u["max-fraction-digits"],1,db),!Ea)?null:new nj(P,ea,qa,xa,Ea)};nj.prototype.evaluate=function(u){return(new Intl.NumberFormat(this.locale?
this.locale.evaluate(u):[],{style:this.currency?"currency":"decimal",currency:this.currency?this.currency.evaluate(u):void 0,minimumFractionDigits:this.minFractionDigits?this.minFractionDigits.evaluate(u):void 0,maximumFractionDigits:this.maxFractionDigits?this.maxFractionDigits.evaluate(u):void 0})).format(this.number.evaluate(u))};nj.prototype.eachChild=function(u){u(this.number);this.locale&&u(this.locale);this.currency&&u(this.currency);this.minFractionDigits&&u(this.minFractionDigits);this.maxFractionDigits&&
u(this.maxFractionDigits)};nj.prototype.outputDefined=function(){return!1};nj.prototype.serialize=function(){var u={};this.locale&&(u.locale=this.locale.serialize());this.currency&&(u.currency=this.currency.serialize());this.minFractionDigits&&(u["min-fraction-digits"]=this.minFractionDigits.serialize());this.maxFractionDigits&&(u["max-fraction-digits"]=this.maxFractionDigits.serialize());return["number-format",this.number.serialize(),u]};var oj=function(u){this.type=db;this.input=u};oj.parse=function(u,
E){return 2!==u.length?E.error("Expected 1 argument, but found "+(u.length-1)+" instead."):(u=E.parse(u[1],1))?"array"!==u.type.kind&&"string"!==u.type.kind&&"value"!==u.type.kind?E.error("Expected argument of type string or array, but found "+za(u.type)+" instead."):new oj(u):null};oj.prototype.evaluate=function(u){u=this.input.evaluate(u);if("string"===typeof u||Array.isArray(u))return u.length;throw new je("Expected value to be of type string or array, but found "+za(hb(u))+" instead.");};oj.prototype.eachChild=
function(u){u(this.input)};oj.prototype.outputDefined=function(){return!1};oj.prototype.serialize=function(){var u=["length"];this.eachChild(function(E){u.push(E.serialize())});return u};var yj={"\x3d\x3d":dl,"!\x3d":Ck,"\x3e":Uj,"\x3c":Dk,"\x3e\x3d":Tk,"\x3c\x3d":ik,array:me,at:Yh,"boolean":me,"case":Ki,coalesce:Gi,collator:gg,format:Od,image:sf,"in":Ji,"index-of":ti,interpolate:Jg,"interpolate-hcl":Jg,"interpolate-lab":Jg,length:oj,let:qi,literal:le,match:ji,number:me,"number-format":nj,object:me,
slice:ki,step:pi,string:me,"to-boolean":Bf,"to-color":Bf,"to-number":Bf,"to-string":Bf,"var":Fg,within:wg};Uf.register(yj,{error:[{kind:"error"},[wb],function(u,E){throw new je(E[0].evaluate(u));}],"typeof":[wb,[ic],function(u,E){return za(hb(E[0].evaluate(u)))}],"to-rgba":[sa(db,4),[Tb],function(u,E){return E[0].evaluate(u).toArray()}],rgb:[Tb,[db,db,db],uc],rgba:[Tb,[db,db,db,db],uc],has:{type:Eb,overloads:[[[wb],function(u,E){E=E[0].evaluate(u);u=u.properties();return E in u}],[[wb,mc],function(u,
E){var P=E[1];E=E[0].evaluate(u);u=P.evaluate(u);return E in u}]]},get:{type:ic,overloads:[[[wb],function(u,E){return fd(E[0].evaluate(u),u.properties())}],[[wb,mc],function(u,E){var P=E[1];return fd(E[0].evaluate(u),P.evaluate(u))}]]},"feature-state":[ic,[wb],function(u,E){return fd(E[0].evaluate(u),u.featureState||{})}],properties:[mc,[],function(u){return u.properties()}],"geometry-type":[wb,[],function(u){return u.geometryType()}],id:[ic,[],function(u){return u.id()}],zoom:[db,[],function(u){return u.globals.zoom}],
"heatmap-density":[db,[],function(u){return u.globals.heatmapDensity||0}],"line-progress":[db,[],function(u){return u.globals.lineProgress||0}],accumulated:[ic,[],function(u){return void 0===u.globals.accumulated?null:u.globals.accumulated}],"+":[db,{type:db},function(u,E){for(var P=0,ea=0;ea<E.length;ea+=1)P+=E[ea].evaluate(u);return P}],"*":[db,{type:db},function(u,E){for(var P=1,ea=0;ea<E.length;ea+=1)P*=E[ea].evaluate(u);return P}],"-":{type:db,overloads:[[[db,db],function(u,E){var P=E[1];return E[0].evaluate(u)-
P.evaluate(u)}],[[db],function(u,E){return-E[0].evaluate(u)}]]},"/":[db,[db,db],function(u,E){var P=E[1];return E[0].evaluate(u)/P.evaluate(u)}],"%":[db,[db,db],function(u,E){var P=E[1];return E[0].evaluate(u)%P.evaluate(u)}],ln2:[db,[],function(){return Math.LN2}],pi:[db,[],function(){return Math.PI}],e:[db,[],function(){return Math.E}],"^":[db,[db,db],function(u,E){var P=E[1];return Math.pow(E[0].evaluate(u),P.evaluate(u))}],sqrt:[db,[db],function(u,E){return Math.sqrt(E[0].evaluate(u))}],log10:[db,
[db],function(u,E){return Math.log(E[0].evaluate(u))/Math.LN10}],ln:[db,[db],function(u,E){return Math.log(E[0].evaluate(u))}],log2:[db,[db],function(u,E){return Math.log(E[0].evaluate(u))/Math.LN2}],sin:[db,[db],function(u,E){return Math.sin(E[0].evaluate(u))}],cos:[db,[db],function(u,E){return Math.cos(E[0].evaluate(u))}],tan:[db,[db],function(u,E){return Math.tan(E[0].evaluate(u))}],asin:[db,[db],function(u,E){return Math.asin(E[0].evaluate(u))}],acos:[db,[db],function(u,E){return Math.acos(E[0].evaluate(u))}],
atan:[db,[db],function(u,E){return Math.atan(E[0].evaluate(u))}],min:[db,{type:db},function(u,E){return Math.min.apply(Math,E.map(function(P){return P.evaluate(u)}))}],max:[db,{type:db},function(u,E){return Math.max.apply(Math,E.map(function(P){return P.evaluate(u)}))}],abs:[db,[db],function(u,E){return Math.abs(E[0].evaluate(u))}],round:[db,[db],function(u,E){u=E[0].evaluate(u);return 0>u?-Math.round(-u):Math.round(u)}],floor:[db,[db],function(u,E){return Math.floor(E[0].evaluate(u))}],ceil:[db,
[db],function(u,E){return Math.ceil(E[0].evaluate(u))}],"filter-\x3d\x3d":[Eb,[wb,ic],function(u,E){var P=E[0];E=E[1];return u.properties()[P.value]===E.value}],"filter-id-\x3d\x3d":[Eb,[ic],function(u,E){E=E[0];return u.id()===E.value}],"filter-type-\x3d\x3d":[Eb,[wb],function(u,E){E=E[0];return u.geometryType()===E.value}],"filter-\x3c":[Eb,[wb,ic],function(u,E){var P=E[0];E=E[1];u=u.properties()[P.value];P=E.value;return typeof u===typeof P&&u<P}],"filter-id-\x3c":[Eb,[ic],function(u,E){E=E[0];
u=u.id();E=E.value;return typeof u===typeof E&&u<E}],"filter-\x3e":[Eb,[wb,ic],function(u,E){var P=E[0];E=E[1];u=u.properties()[P.value];P=E.value;return typeof u===typeof P&&u>P}],"filter-id-\x3e":[Eb,[ic],function(u,E){E=E[0];u=u.id();E=E.value;return typeof u===typeof E&&u>E}],"filter-\x3c\x3d":[Eb,[wb,ic],function(u,E){var P=E[0];E=E[1];u=u.properties()[P.value];P=E.value;return typeof u===typeof P&&u<=P}],"filter-id-\x3c\x3d":[Eb,[ic],function(u,E){E=E[0];u=u.id();E=E.value;return typeof u===
typeof E&&u<=E}],"filter-\x3e\x3d":[Eb,[wb,ic],function(u,E){var P=E[0];E=E[1];u=u.properties()[P.value];P=E.value;return typeof u===typeof P&&u>=P}],"filter-id-\x3e\x3d":[Eb,[ic],function(u,E){E=E[0];u=u.id();E=E.value;return typeof u===typeof E&&u>=E}],"filter-has":[Eb,[ic],function(u,E){return E[0].value in u.properties()}],"filter-has-id":[Eb,[],function(u){return null!==u.id()&&void 0!==u.id()}],"filter-type-in":[Eb,[sa(wb)],function(u,E){return 0<=E[0].value.indexOf(u.geometryType())}],"filter-id-in":[Eb,
[sa(ic)],function(u,E){return 0<=E[0].value.indexOf(u.id())}],"filter-in-small":[Eb,[wb,sa(ic)],function(u,E){var P=E[0];return 0<=E[1].value.indexOf(u.properties()[P.value])}],"filter-in-large":[Eb,[wb,sa(ic)],function(u,E){var P=E[0];E=E[1];a:{u=u.properties()[P.value];P=E.value;var ea=0;for(E=E.value.length-1;ea<=E;){var qa=ea+E>>1;if(P[qa]===u){E=!0;break a}P[qa]>u?E=qa-1:ea=qa+1}E=!1}return E}],all:{type:Eb,overloads:[[[Eb,Eb],function(u,E){var P=E[1];return E[0].evaluate(u)&&P.evaluate(u)}],
[{type:Eb},function(u,E){for(var P=0;P<E.length;P+=1)if(!E[P].evaluate(u))return!1;return!0}]]},any:{type:Eb,overloads:[[[Eb,Eb],function(u,E){var P=E[1];return E[0].evaluate(u)||P.evaluate(u)}],[{type:Eb},function(u,E){for(var P=0;P<E.length;P+=1)if(E[P].evaluate(u))return!0;return!1}]]},"!":[Eb,[Eb],function(u,E){return!E[0].evaluate(u)}],"is-supported-script":[Eb,[wb],function(u,E){E=E[0];var P=u.globals&&u.globals.isSupportedScript;return P?P(E.evaluate(u)):!0}],upcase:[wb,[wb],function(u,E){return E[0].evaluate(u).toUpperCase()}],
downcase:[wb,[wb],function(u,E){return E[0].evaluate(u).toLowerCase()}],concat:[wb,{type:ic},function(u,E){return E.map(function(P){return ub(P.evaluate(u))}).join("")}],"resolved-locale":[wb,[Ac],function(u,E){return E[0].evaluate(u).resolvedLocale()}]});var jj=function(u,E){this.expression=u;this._warningHistory={};this._evaluator=new Nf;this._defaultValue=E?"color"===E.type&&rb(E.default)?new sd(0,0,0,0):"color"===E.type?sd.parse(E.default)||null:void 0===E.default?null:E.default:null;this._enumValues=
E&&"enum"===E.type?E.values:null};jj.prototype.evaluateWithoutErrorHandling=function(u,E,P,ea,qa,xa){this._evaluator.globals=u;this._evaluator.feature=E;this._evaluator.featureState=P;this._evaluator.canonical=ea;this._evaluator.availableImages=qa||null;this._evaluator.formattedSection=xa;return this.expression.evaluate(this._evaluator)};jj.prototype.evaluate=function(u,E,P,ea,qa,xa){this._evaluator.globals=u;this._evaluator.feature=E||null;this._evaluator.featureState=P||null;this._evaluator.canonical=
ea;this._evaluator.availableImages=qa||null;this._evaluator.formattedSection=xa||null;try{var Ea=this.expression.evaluate(this._evaluator);if(null===Ea||void 0===Ea||"number"===typeof Ea&&Ea!==Ea)return this._defaultValue;if(this._enumValues&&!(Ea in this._enumValues))throw new je("Expected value to be one of "+Object.keys(this._enumValues).map(function(Va){return JSON.stringify(Va)}).join(", ")+", but found "+JSON.stringify(Ea)+" instead.");return Ea}catch(Va){return this._warningHistory[Va.message]||
(this._warningHistory[Va.message]=!0,"undefined"!==typeof console&&console.warn(Va.message)),this._defaultValue}};var zj=function(u,E){this.kind=u;this._styleExpression=E;this.isStateDependent="constant"!==u&&!ab(E.expression)};zj.prototype.evaluateWithoutErrorHandling=function(u,E,P,ea,qa,xa){return this._styleExpression.evaluateWithoutErrorHandling(u,E,P,ea,qa,xa)};zj.prototype.evaluate=function(u,E,P,ea,qa,xa){return this._styleExpression.evaluate(u,E,P,ea,qa,xa)};var kj=function(u,E,P,ea){this.kind=
u;this.zoomStops=P;this._styleExpression=E;this.isStateDependent="camera"!==u&&!ab(E.expression);this.interpolationType=ea};kj.prototype.evaluateWithoutErrorHandling=function(u,E,P,ea,qa,xa){return this._styleExpression.evaluateWithoutErrorHandling(u,E,P,ea,qa,xa)};kj.prototype.evaluate=function(u,E,P,ea,qa,xa){return this._styleExpression.evaluate(u,E,P,ea,qa,xa)};kj.prototype.interpolationFactor=function(u,E,P){return this.interpolationType?Jg.interpolationFactor(this.interpolationType,u,E,P):0};
var Qj=function(u,E){this._parameters=u;this._specification=E;ka(this,sc(this._parameters,this._specification))};Qj.deserialize=function(u){return new Qj(u._parameters,u._specification)};Qj.serialize=function(u){return{_parameters:u._parameters,_specification:u._specification}};var cl={type:"boolean","default":!1,transition:!1,"property-type":"data-driven",expression:{interpolated:!1,parameters:["zoom","feature"]}},Qk={promoteId:function(u){var E=u.key;u=u.value;if("string"===Uc(u))return Ud({key:E,
value:u});var P=[],ea;for(ea in u)P.push.apply(P,Ud({key:E+"."+ea,value:u[ea]}));return P}},yk={"*":function(){return[]},array:Gd,"boolean":function(u){var E=u.value;u=u.key;var P=Uc(E);return"boolean"!==P?[new Ma(u,E,"boolean expected, "+P+" found")]:[]},number:Ad,color:function(u){var E=u.key;u=u.value;var P=Uc(u);return"string"!==P?[new Ma(E,u,"color expected, "+P+" found")]:null===od(u)?[new Ma(E,u,'color expected, "'+u+'" found')]:[]},constants:la,"enum":Cc,filter:ve,"function":Nc,layer:Rf,object:Cd,
source:Ae,light:rf,string:Ud,formatted:function(u){return 0===Ud(u).length?[]:cd(u)},resolvedImage:function(u){return 0===Ud(u).length?[]:cd(u)}};Be.source=nf(Ae);Be.light=nf(rf);Be.layer=nf(Rf);Be.filter=nf(ve);Be.paintProperty=nf(qf);Be.layoutProperty=nf(Ff);var el=Be.light,fl=Be.paintProperty,hl=Be.layoutProperty,Yi=3;Bd.prototype.insert=function(u,E,P,ea,qa){this._forEachCell(E,P,ea,qa,this._insertCell,this.uid++);this.keys.push(u);this.bboxes.push(E);this.bboxes.push(P);this.bboxes.push(ea);
this.bboxes.push(qa)};Bd.prototype._insertReadonly=function(){throw"Cannot insert into a GridIndex created from an ArrayBuffer.";};Bd.prototype._insertCell=function(u,E,P,ea,qa,xa){this.cells[qa].push(xa)};Bd.prototype.query=function(u,E,P,ea,qa){var xa=this.min,Ea=this.max;if(u<=xa&&E<=xa&&Ea<=P&&Ea<=ea&&!qa)return Array.prototype.slice.call(this.keys);xa=[];this._forEachCell(u,E,P,ea,this._queryCell,xa,{},qa);return xa};Bd.prototype._queryCell=function(u,E,P,ea,qa,xa,Ea,Va){qa=this.cells[qa];if(null!==
qa)for(var Ya=this.keys,gb=this.bboxes,Fb=0;Fb<qa.length;Fb++){var Sb=qa[Fb];if(void 0===Ea[Sb]){var jc=4*Sb;(Va?Va(gb[jc+0],gb[jc+1],gb[jc+2],gb[jc+3]):u<=gb[jc+2]&&E<=gb[jc+3]&&P>=gb[jc+0]&&ea>=gb[jc+1])?(Ea[Sb]=!0,xa.push(Ya[Sb])):Ea[Sb]=!1}}};Bd.prototype._forEachCell=function(u,E,P,ea,qa,xa,Ea,Va){for(var Ya=this._convertToCellCoord(u),gb=this._convertToCellCoord(E),Fb=this._convertToCellCoord(P),Sb=this._convertToCellCoord(ea);Ya<=Fb;Ya++)for(var jc=gb;jc<=Sb;jc++){var Dc=this.d*jc+Ya;if((!Va||
Va(this._convertFromCellCoord(Ya),this._convertFromCellCoord(jc),this._convertFromCellCoord(Ya+1),this._convertFromCellCoord(jc+1)))&&qa.call(this,u,E,P,ea,Dc,xa,Ea,Va))return}};Bd.prototype._convertFromCellCoord=function(u){return(u-this.padding)/this.scale};Bd.prototype._convertToCellCoord=function(u){return Math.max(0,Math.min(this.d-1,Math.floor(u*this.scale)+this.padding))};Bd.prototype.toArrayBuffer=function(){if(this.arrayBuffer)return this.arrayBuffer;for(var u=this.cells,E=Yi+this.cells.length+
1+1,P=0,ea=0;ea<this.cells.length;ea++)P+=this.cells[ea].length;P=new Int32Array(E+P+this.keys.length+this.bboxes.length);P[0]=this.extent;P[1]=this.n;P[2]=this.padding;for(ea=0;ea<u.length;ea++){var qa=u[ea];P[Yi+ea]=E;P.set(qa,E);E+=qa.length}P[Yi+u.length]=E;P.set(this.keys,E);E+=this.keys.length;P[Yi+u.length+1]=E;P.set(this.bboxes,E);return P.buffer};var Rk=self.ImageData,hk=self.ImageBitmap,Aj={};Ob("Object",Object);Bd.serialize=function(u,E){u=u.toArrayBuffer();E&&E.push(u);return{buffer:u}};
Bd.deserialize=function(u){return new Bd(u.buffer)};Ob("Grid",Bd);Ob("Color",sd);Ob("Error",Error);Ob("ResolvedImage",ee);Ob("StylePropertyFunction",Qj);Ob("StyleExpression",jj,{omit:["_evaluator"]});Ob("ZoomDependentExpression",kj);Ob("ZoomConstantExpression",zj);Ob("CompoundExpression",Uf,{omit:["_evaluate"]});for(var Ek in yj)yj[Ek]._classRegistryKey||Ob("Expression_"+Ek,yj[Ek]);var Fk=function(){this.first=!0};Fk.prototype.update=function(u,E){var P=Math.floor(u);if(this.first)return this.first=
!1,this.lastIntegerZoom=P,this.lastIntegerZoomTime=0,this.lastZoom=u,this.lastFloorZoom=P,!0;this.lastFloorZoom>P?(this.lastIntegerZoom=P+1,this.lastIntegerZoomTime=E):this.lastFloorZoom<P&&(this.lastIntegerZoom=P,this.lastIntegerZoomTime=E);return u!==this.lastZoom?(this.lastZoom=u,this.lastFloorZoom=P,!0):!1};var Je={"Latin-1 Supplement":function(u){return 128<=u&&255>=u},Arabic:function(u){return 1536<=u&&1791>=u},"Arabic Supplement":function(u){return 1872<=u&&1919>=u},"Arabic Extended-A":function(u){return 2208<=
u&&2303>=u},"Hangul Jamo":function(u){return 4352<=u&&4607>=u},"Unified Canadian Aboriginal Syllabics":function(u){return 5120<=u&&5759>=u},Khmer:function(u){return 6016<=u&&6143>=u},"Unified Canadian Aboriginal Syllabics Extended":function(u){return 6320<=u&&6399>=u},"General Punctuation":function(u){return 8192<=u&&8303>=u},"Letterlike Symbols":function(u){return 8448<=u&&8527>=u},"Number Forms":function(u){return 8528<=u&&8591>=u},"Miscellaneous Technical":function(u){return 8960<=u&&9215>=u},
"Control Pictures":function(u){return 9216<=u&&9279>=u},"Optical Character Recognition":function(u){return 9280<=u&&9311>=u},"Enclosed Alphanumerics":function(u){return 9312<=u&&9471>=u},"Geometric Shapes":function(u){return 9632<=u&&9727>=u},"Miscellaneous Symbols":function(u){return 9728<=u&&9983>=u},"Miscellaneous Symbols and Arrows":function(u){return 11008<=u&&11263>=u},"CJK Radicals Supplement":function(u){return 11904<=u&&12031>=u},"Kangxi Radicals":function(u){return 12032<=u&&12255>=u},"Ideographic Description Characters":function(u){return 12272<=
u&&12287>=u},"CJK Symbols and Punctuation":function(u){return 12288<=u&&12351>=u},Hiragana:function(u){return 12352<=u&&12447>=u},Katakana:function(u){return 12448<=u&&12543>=u},Bopomofo:function(u){return 12544<=u&&12591>=u},"Hangul Compatibility Jamo":function(u){return 12592<=u&&12687>=u},Kanbun:function(u){return 12688<=u&&12703>=u},"Bopomofo Extended":function(u){return 12704<=u&&12735>=u},"CJK Strokes":function(u){return 12736<=u&&12783>=u},"Katakana Phonetic Extensions":function(u){return 12784<=
u&&12799>=u},"Enclosed CJK Letters and Months":function(u){return 12800<=u&&13055>=u},"CJK Compatibility":function(u){return 13056<=u&&13311>=u},"CJK Unified Ideographs Extension A":function(u){return 13312<=u&&19903>=u},"Yijing Hexagram Symbols":function(u){return 19904<=u&&19967>=u},"CJK Unified Ideographs":function(u){return 19968<=u&&40959>=u},"Yi Syllables":function(u){return 40960<=u&&42127>=u},"Yi Radicals":function(u){return 42128<=u&&42191>=u},"Hangul Jamo Extended-A":function(u){return 43360<=
u&&43391>=u},"Hangul Syllables":function(u){return 44032<=u&&55215>=u},"Hangul Jamo Extended-B":function(u){return 55216<=u&&55295>=u},"Private Use Area":function(u){return 57344<=u&&63743>=u},"CJK Compatibility Ideographs":function(u){return 63744<=u&&64255>=u},"Arabic Presentation Forms-A":function(u){return 64336<=u&&65023>=u},"Vertical Forms":function(u){return 65040<=u&&65055>=u},"CJK Compatibility Forms":function(u){return 65072<=u&&65103>=u},"Small Form Variants":function(u){return 65104<=
u&&65135>=u},"Arabic Presentation Forms-B":function(u){return 65136<=u&&65279>=u},"Halfwidth and Fullwidth Forms":function(u){return 65280<=u&&65519>=u}},Gk=null,Eh="unavailable",Zi=null,Uk=function(u){u&&"string"===typeof u&&-1<u.indexOf("NetworkError")&&(Eh="error");Gk&&Gk(u)},Rj=new Ba,Dj=function(){if("deferred"!==Eh||!Zi)throw Error("rtl-text-plugin cannot be downloaded unless a pluginURL is specified");Eh="loading";oe();Zi&&lg({url:Zi},function(u){u?Uk(u):(Eh="loaded",oe())})},bi={applyArabicShaping:null,
processBidirectionalText:null,processStyledBidirectionalText:null,isLoaded:function(){return"loaded"===Eh||null!=bi.applyArabicShaping},isLoading:function(){return"loading"===Eh},setState:function(u){Eh=u.pluginStatus;Zi=u.pluginURL},isParsed:function(){return null!=bi.applyArabicShaping&&null!=bi.processBidirectionalText&&null!=bi.processStyledBidirectionalText},getPluginURL:function(){return Zi}},Ag=function(u,E){this.zoom=u;E?(this.now=E.now,this.fadeDuration=E.fadeDuration,this.zoomHistory=E.zoomHistory,
this.transition=E.transition):(this.fadeDuration=this.now=0,this.zoomHistory=new Fk,this.transition={})};Ag.prototype.isSupportedScript=function(u){a:{for(var E=bi.isLoaded(),P=0;P<u.length;P+=1){var ea=u[P].charCodeAt(0);if(!E&&Ge(ea)||2304<=ea&&3583>=ea||3840<=ea&&4255>=ea||Je.Khmer(ea)){u=!1;break a}}u=!0}return u};Ag.prototype.crossFadingFactor=function(){return 0===this.fadeDuration?1:Math.min((this.now-this.zoomHistory.lastIntegerZoomTime)/this.fadeDuration,1)};Ag.prototype.getCrossfadeParameters=
function(){var u=this.zoom,E=u-Math.floor(u),P=this.crossFadingFactor();return u>this.zoomHistory.lastIntegerZoom?{fromScale:2,toScale:1,t:E+(1-E)*P}:{fromScale:.5,toScale:1,t:1-(1-P)*E}};var pj=function(u,E){this.property=u;this.value=E;this.expression=Rc(void 0===E?u.specification.default:E,u.specification)};pj.prototype.isDataDriven=function(){return"source"===this.expression.kind||"composite"===this.expression.kind};pj.prototype.possiblyEvaluate=function(u,E,P){return this.property.possiblyEvaluate(this,
u,E,P)};var Ej=function(u){this.property=u;this.value=new pj(u,void 0)};Ej.prototype.transitioned=function(u,E){return new Hk(this.property,this.value,E,f({},u.transition,this.transition),u.now)};Ej.prototype.untransitioned=function(){return new Hk(this.property,this.value,null,{},0)};var Zh=function(u){this._properties=u;this._values=Object.create(u.defaultTransitionablePropertyValues)};Zh.prototype.getValue=function(u){return A(this._values[u].value.value)};Zh.prototype.setValue=function(u,E){this._values.hasOwnProperty(u)||
(this._values[u]=new Ej(this._values[u].property));this._values[u].value=new pj(this._values[u].property,null===E?void 0:A(E))};Zh.prototype.getTransition=function(u){return A(this._values[u].transition)};Zh.prototype.setTransition=function(u,E){this._values.hasOwnProperty(u)||(this._values[u]=new Ej(this._values[u].property));this._values[u].transition=A(E)||void 0};Zh.prototype.serialize=function(){for(var u={},E=0,P=Object.keys(this._values);E<P.length;E+=1){var ea=P[E],qa=this.getValue(ea);void 0!==
qa&&(u[ea]=qa);qa=this.getTransition(ea);void 0!==qa&&(u[ea+"-transition"]=qa)}return u};Zh.prototype.transitioned=function(u,E){for(var P=new ej(this._properties),ea=0,qa=Object.keys(this._values);ea<qa.length;ea+=1){var xa=qa[ea];P._values[xa]=this._values[xa].transitioned(u,E._values[xa])}return P};Zh.prototype.untransitioned=function(){for(var u=new ej(this._properties),E=0,P=Object.keys(this._values);E<P.length;E+=1){var ea=P[E];u._values[ea]=this._values[ea].untransitioned()}return u};var Hk=
function(u,E,P,ea,qa){this.property=u;this.value=E;this.begin=qa+ea.delay||0;this.end=this.begin+ea.duration||0;u.specification.transition&&(ea.delay||ea.duration)&&(this.prior=P)};Hk.prototype.possiblyEvaluate=function(u,E,P){var ea=u.now||0,qa=this.value.possiblyEvaluate(u,E,P),xa=this.prior;if(xa){if(ea>this.end||this.value.isDataDriven())return this.prior=null,qa;if(ea<this.begin)return xa.possiblyEvaluate(u,E,P);var Ea=(ea-this.begin)/(this.end-this.begin);ea=this.property;var Va=ea.interpolate;
u=xa.possiblyEvaluate(u,E,P);0>=Ea?Ea=0:1<=Ea?Ea=1:(E=Ea*Ea,P=E*Ea,Ea=4*(.5>Ea?P:3*(Ea-E)+P-.75));return Va.call(ea,u,qa,Ea)}return qa};var ej=function(u){this._properties=u;this._values=Object.create(u.defaultTransitioningPropertyValues)};ej.prototype.possiblyEvaluate=function(u,E,P){for(var ea=new mj(this._properties),qa=0,xa=Object.keys(this._values);qa<xa.length;qa+=1){var Ea=xa[qa];ea._values[Ea]=this._values[Ea].possiblyEvaluate(u,E,P)}return ea};ej.prototype.hasTransition=function(){for(var u=
0,E=Object.keys(this._values);u<E.length;u+=1)if(this._values[E[u]].prior)return!0;return!1};var Li=function(u){this._properties=u;this._values=Object.create(u.defaultPropertyValues)};Li.prototype.getValue=function(u){return A(this._values[u].value)};Li.prototype.setValue=function(u,E){this._values[u]=new pj(this._values[u].property,null===E?void 0:A(E))};Li.prototype.serialize=function(){for(var u={},E=0,P=Object.keys(this._values);E<P.length;E+=1){var ea=P[E],qa=this.getValue(ea);void 0!==qa&&(u[ea]=
qa)}return u};Li.prototype.possiblyEvaluate=function(u,E,P){for(var ea=new mj(this._properties),qa=0,xa=Object.keys(this._values);qa<xa.length;qa+=1){var Ea=xa[qa];ea._values[Ea]=this._values[Ea].possiblyEvaluate(u,E,P)}return ea};var Oh=function(u,E,P){this.property=u;this.value=E;this.parameters=P};Oh.prototype.isConstant=function(){return"constant"===this.value.kind};Oh.prototype.constantOr=function(u){return"constant"===this.value.kind?this.value.value:u};Oh.prototype.evaluate=function(u,E,P,
ea){return this.property.evaluate(this.value,this.parameters,u,E,P,ea)};var mj=function(u){this._properties=u;this._values=Object.create(u.defaultPossiblyEvaluatedValues)};mj.prototype.get=function(u){return this._values[u]};var Ze=function(u){this.specification=u};Ze.prototype.possiblyEvaluate=function(u,E){return u.expression.evaluate(E)};Ze.prototype.interpolate=function(u,E,P){var ea=Ui[this.specification.type];return ea?ea(u,E,P):u};var pf=function(u,E){this.specification=u;this.overrides=E};
pf.prototype.possiblyEvaluate=function(u,E,P,ea){return"constant"===u.expression.kind||"camera"===u.expression.kind?new Oh(this,{kind:"constant",value:u.expression.evaluate(E,null,{},P,ea)},E):new Oh(this,u.expression,E)};pf.prototype.interpolate=function(u,E,P){if("constant"!==u.value.kind||"constant"!==E.value.kind)return u;if(void 0===u.value.value||void 0===E.value.value)return new Oh(this,{kind:"constant",value:void 0},u.parameters);var ea=Ui[this.specification.type];return ea?new Oh(this,{kind:"constant",
value:ea(u.value.value,E.value.value,P)},u.parameters):u};pf.prototype.evaluate=function(u,E,P,ea,qa,xa){return"constant"===u.kind?u.value:u.evaluate(E,P,ea,qa,xa)};var Ph=function(u){function E(){u.apply(this,arguments)}u&&(E.__proto__=u);E.prototype=Object.create(u&&u.prototype);E.prototype.constructor=E;E.prototype.possiblyEvaluate=function(P,ea,qa,xa){return void 0===P.value?new Oh(this,{kind:"constant",value:void 0},ea):"constant"===P.expression.kind?(qa=P.expression.evaluate(ea,null,{},qa,xa),
P="resolvedImage"===P.property.specification.type&&"string"!==typeof qa?qa.name:qa,P=this._calculate(P,P,P,ea),new Oh(this,{kind:"constant",value:P},ea)):"camera"===P.expression.kind?(P=this._calculate(P.expression.evaluate({zoom:ea.zoom-1}),P.expression.evaluate({zoom:ea.zoom}),P.expression.evaluate({zoom:ea.zoom+1}),ea),new Oh(this,{kind:"constant",value:P},ea)):new Oh(this,P.expression,ea)};E.prototype.evaluate=function(P,ea,qa,xa,Ea,Va){return"source"===P.kind?(P=P.evaluate(ea,qa,xa,Ea,Va),this._calculate(P,
P,P,ea)):"composite"===P.kind?this._calculate(P.evaluate({zoom:Math.floor(ea.zoom)-1},qa,xa),P.evaluate({zoom:Math.floor(ea.zoom)},qa,xa),P.evaluate({zoom:Math.floor(ea.zoom)+1},qa,xa),ea):P.value};E.prototype._calculate=function(P,ea,qa,xa){return xa.zoom>xa.zoomHistory.lastIntegerZoom?{from:P,to:ea}:{from:qa,to:ea}};E.prototype.interpolate=function(P){return P};return E}(pf),Fj=function(u){this.specification=u};Fj.prototype.possiblyEvaluate=function(u,E,P,ea){if(void 0!==u.value)return"constant"===
u.expression.kind?(u=u.expression.evaluate(E,null,{},P,ea),this._calculate(u,u,u,E)):this._calculate(u.expression.evaluate(new Ag(Math.floor(E.zoom-1),E)),u.expression.evaluate(new Ag(Math.floor(E.zoom),E)),u.expression.evaluate(new Ag(Math.floor(E.zoom+1),E)),E)};Fj.prototype._calculate=function(u,E,P,ea){return ea.zoom>ea.zoomHistory.lastIntegerZoom?{from:u,to:E}:{from:P,to:E}};Fj.prototype.interpolate=function(u){return u};var Vj=function(u){this.specification=u};Vj.prototype.possiblyEvaluate=
function(u,E,P,ea){return!!u.expression.evaluate(E,null,{},P,ea)};Vj.prototype.interpolate=function(){return!1};var gh=function(u){this.properties=u;this.defaultPropertyValues={};this.defaultTransitionablePropertyValues={};this.defaultTransitioningPropertyValues={};this.defaultPossiblyEvaluatedValues={};this.overridableProperties=[];for(var E in u){var P=u[E];P.specification.overridable&&this.overridableProperties.push(E);var ea=this.defaultPropertyValues[E]=new pj(P,void 0);P=this.defaultTransitionablePropertyValues[E]=
new Ej(P);this.defaultTransitioningPropertyValues[E]=P.untransitioned();this.defaultPossiblyEvaluatedValues[E]=ea.possiblyEvaluate({})}};Ob("DataDrivenProperty",pf);Ob("DataConstantProperty",Ze);Ob("CrossFadedDataDrivenProperty",Ph);Ob("CrossFadedProperty",Fj);Ob("ColorRampProperty",Vj);var li=function(u){function E(P,ea){u.call(this);this.id=P.id;this.type=P.type;this._featureFilter={filter:function(){return!0},needGeometry:!1};if("custom"!==P.type&&(this.metadata=P.metadata,this.minzoom=P.minzoom,
this.maxzoom=P.maxzoom,"background"!==P.type&&(this.source=P.source,this.sourceLayer=P["source-layer"],this.filter=P.filter),ea.layout&&(this._unevaluatedLayout=new Li(ea.layout)),ea.paint)){this._transitionablePaint=new Zh(ea.paint);for(var qa in P.paint)this.setPaintProperty(qa,P.paint[qa],{validate:!1});for(var xa in P.layout)this.setLayoutProperty(xa,P.layout[xa],{validate:!1});this._transitioningPaint=this._transitionablePaint.untransitioned();this.paint=new mj(ea.paint)}}u&&(E.__proto__=u);
E.prototype=Object.create(u&&u.prototype);E.prototype.constructor=E;E.prototype.getCrossfadeParameters=function(){return this._crossfadeParameters};E.prototype.getLayoutProperty=function(P){return"visibility"===P?this.visibility:this._unevaluatedLayout.getValue(P)};E.prototype.setLayoutProperty=function(P,ea,qa){void 0===qa&&(qa={});null!==ea&&void 0!==ea&&this._validate(hl,"layers."+this.id+".layout."+P,P,ea,qa)||("visibility"===P?this.visibility=ea:this._unevaluatedLayout.setValue(P,ea))};E.prototype.getPaintProperty=
function(P){return x(P,"-transition")?this._transitionablePaint.getTransition(P.slice(0,-11)):this._transitionablePaint.getValue(P)};E.prototype.setPaintProperty=function(P,ea,qa){void 0===qa&&(qa={});if(null!==ea&&void 0!==ea&&this._validate(fl,"layers."+this.id+".paint."+P,P,ea,qa))return!1;if(x(P,"-transition"))return this._transitionablePaint.setTransition(P.slice(0,-11),ea||void 0),!1;var xa=this._transitionablePaint._values[P];qa="cross-faded-data-driven"===xa.property.specification["property-type"];
var Ea=xa.value.isDataDriven();xa=xa.value;this._transitionablePaint.setValue(P,ea);this._handleSpecialPaintPropertyUpdate(P);ea=this._transitionablePaint._values[P].value;return ea.isDataDriven()||Ea||qa||this._handleOverridablePaintPropertyUpdate(P,xa,ea)};E.prototype._handleSpecialPaintPropertyUpdate=function(P){};E.prototype._handleOverridablePaintPropertyUpdate=function(P,ea,qa){return!1};E.prototype.isHidden=function(P){return this.minzoom&&P<this.minzoom||this.maxzoom&&P>=this.maxzoom?!0:"none"===
this.visibility};E.prototype.updateTransitions=function(P){this._transitioningPaint=this._transitionablePaint.transitioned(P,this._transitioningPaint)};E.prototype.hasTransition=function(){return this._transitioningPaint.hasTransition()};E.prototype.recalculate=function(P,ea){P.getCrossfadeParameters&&(this._crossfadeParameters=P.getCrossfadeParameters());this._unevaluatedLayout&&(this.layout=this._unevaluatedLayout.possiblyEvaluate(P,void 0,ea));this.paint=this._transitioningPaint.possiblyEvaluate(P,
void 0,ea)};E.prototype.serialize=function(){var P={id:this.id,type:this.type,source:this.source,"source-layer":this.sourceLayer,metadata:this.metadata,minzoom:this.minzoom,maxzoom:this.maxzoom,filter:this.filter,layout:this._unevaluatedLayout&&this._unevaluatedLayout.serialize(),paint:this._transitionablePaint&&this._transitionablePaint.serialize()};this.visibility&&(P.layout=P.layout||{},P.layout.visibility=this.visibility);return B(P,function(ea,qa){return void 0!==ea&&!("layout"===qa&&!Object.keys(ea).length)&&
!("paint"===qa&&!Object.keys(ea).length)})};E.prototype._validate=function(P,ea,qa,xa,Ea){void 0===Ea&&(Ea={});return Ea&&!1===Ea.validate?!1:Zc(this,P.call(Be,{key:ea,layerType:this.type,objectKey:qa,value:xa,styleSpec:Da,style:{glyphs:!0,sprite:!0}}))};E.prototype.is3D=function(){return!1};E.prototype.isTileClipped=function(){return!1};E.prototype.hasOffscreenPass=function(){return!1};E.prototype.resize=function(){};E.prototype.isStateDependent=function(){for(var P in this.paint._values){var ea=
this.paint.get(P);if(ea instanceof Oh&&fc(ea.property.specification)&&("source"===ea.value.kind||"composite"===ea.value.kind)&&ea.value.isStateDependent)return!0}return!1};return E}(Ba),Sj={Int8:Int8Array,Uint8:Uint8Array,Int16:Int16Array,Uint16:Uint16Array,Int32:Int32Array,Uint32:Uint32Array,Float32:Float32Array},Gj=function(u,E){this._structArray=u;this._pos1=E*this.size;this._pos2=this._pos1/2;this._pos4=this._pos1/4;this._pos8=this._pos1/8},sg=function(){this.isTransferred=!1;this.capacity=-1;
this.resize(0)};sg.serialize=function(u,E){u._trim();E&&(u.isTransferred=!0,E.push(u.arrayBuffer));return{length:u.length,arrayBuffer:u.arrayBuffer}};sg.deserialize=function(u){var E=Object.create(this.prototype);E.arrayBuffer=u.arrayBuffer;E.length=u.length;E.capacity=u.arrayBuffer.byteLength/E.bytesPerElement;E._refreshViews();return E};sg.prototype._trim=function(){this.length!==this.capacity&&(this.capacity=this.length,this.arrayBuffer=this.arrayBuffer.slice(0,this.length*this.bytesPerElement),
this._refreshViews())};sg.prototype.clear=function(){this.length=0};sg.prototype.resize=function(u){this.reserve(u);this.length=u};sg.prototype.reserve=function(u){u>this.capacity&&(this.capacity=Math.max(u,Math.floor(5*this.capacity),128),this.arrayBuffer=new ArrayBuffer(this.capacity*this.bytesPerElement),u=this.uint8,this._refreshViews(),u&&this.uint8.set(u))};sg.prototype._refreshViews=function(){throw Error("_refreshViews() must be implemented by each concrete StructArray layout");};var qj=function(u){function E(){u.apply(this,
arguments)}u&&(E.__proto__=u);E.prototype=Object.create(u&&u.prototype);E.prototype.constructor=E;E.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer);this.int16=new Int16Array(this.arrayBuffer)};E.prototype.emplaceBack=function(P,ea){var qa=this.length;this.resize(qa+1);return this.emplace(qa,P,ea)};E.prototype.emplace=function(P,ea,qa){var xa=2*P;this.int16[xa+0]=ea;this.int16[xa+1]=qa;return P};return E}(sg);qj.prototype.bytesPerElement=4;Ob("StructArrayLayout2i4",qj);
var rj=function(u){function E(){u.apply(this,arguments)}u&&(E.__proto__=u);E.prototype=Object.create(u&&u.prototype);E.prototype.constructor=E;E.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer);this.int16=new Int16Array(this.arrayBuffer)};E.prototype.emplaceBack=function(P,ea,qa,xa){var Ea=this.length;this.resize(Ea+1);return this.emplace(Ea,P,ea,qa,xa)};E.prototype.emplace=function(P,ea,qa,xa,Ea){var Va=4*P;this.int16[Va+0]=ea;this.int16[Va+1]=qa;this.int16[Va+2]=xa;
this.int16[Va+3]=Ea;return P};return E}(sg);rj.prototype.bytesPerElement=8;Ob("StructArrayLayout4i8",rj);var jk=function(u){function E(){u.apply(this,arguments)}u&&(E.__proto__=u);E.prototype=Object.create(u&&u.prototype);E.prototype.constructor=E;E.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer);this.int16=new Int16Array(this.arrayBuffer)};E.prototype.emplaceBack=function(P,ea,qa,xa,Ea,Va){var Ya=this.length;this.resize(Ya+1);return this.emplace(Ya,P,ea,qa,xa,Ea,Va)};
E.prototype.emplace=function(P,ea,qa,xa,Ea,Va,Ya){var gb=6*P;this.int16[gb+0]=ea;this.int16[gb+1]=qa;this.int16[gb+2]=xa;this.int16[gb+3]=Ea;this.int16[gb+4]=Va;this.int16[gb+5]=Ya;return P};return E}(sg);jk.prototype.bytesPerElement=12;Ob("StructArrayLayout2i4i12",jk);var kk=function(u){function E(){u.apply(this,arguments)}u&&(E.__proto__=u);E.prototype=Object.create(u&&u.prototype);E.prototype.constructor=E;E.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer);this.int16=
new Int16Array(this.arrayBuffer)};E.prototype.emplaceBack=function(P,ea,qa,xa,Ea,Va){var Ya=this.length;this.resize(Ya+1);return this.emplace(Ya,P,ea,qa,xa,Ea,Va)};E.prototype.emplace=function(P,ea,qa,xa,Ea,Va,Ya){var gb=4*P,Fb=8*P;this.int16[gb+0]=ea;this.int16[gb+1]=qa;this.uint8[Fb+4]=xa;this.uint8[Fb+5]=Ea;this.uint8[Fb+6]=Va;this.uint8[Fb+7]=Ya;return P};return E}(sg);kk.prototype.bytesPerElement=8;Ob("StructArrayLayout2i4ub8",kk);var Ai=function(u){function E(){u.apply(this,arguments)}u&&(E.__proto__=
u);E.prototype=Object.create(u&&u.prototype);E.prototype.constructor=E;E.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer);this.uint16=new Uint16Array(this.arrayBuffer)};E.prototype.emplaceBack=function(P,ea,qa,xa,Ea,Va,Ya,gb,Fb,Sb){var jc=this.length;this.resize(jc+1);return this.emplace(jc,P,ea,qa,xa,Ea,Va,Ya,gb,Fb,Sb)};E.prototype.emplace=function(P,ea,qa,xa,Ea,Va,Ya,gb,Fb,Sb,jc){var Dc=9*P,xc=18*P;this.uint16[Dc+0]=ea;this.uint16[Dc+1]=qa;this.uint16[Dc+2]=xa;this.uint16[Dc+
3]=Ea;this.uint16[Dc+4]=Va;this.uint16[Dc+5]=Ya;this.uint16[Dc+6]=gb;this.uint16[Dc+7]=Fb;this.uint8[xc+16]=Sb;this.uint8[xc+17]=jc;return P};return E}(sg);Ai.prototype.bytesPerElement=18;Ob("StructArrayLayout8ui2ub18",Ai);var Wj=function(u){function E(){u.apply(this,arguments)}u&&(E.__proto__=u);E.prototype=Object.create(u&&u.prototype);E.prototype.constructor=E;E.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer);this.int16=new Int16Array(this.arrayBuffer);this.uint16=
new Uint16Array(this.arrayBuffer)};E.prototype.emplaceBack=function(P,ea,qa,xa,Ea,Va,Ya,gb,Fb,Sb,jc,Dc){var xc=this.length;this.resize(xc+1);return this.emplace(xc,P,ea,qa,xa,Ea,Va,Ya,gb,Fb,Sb,jc,Dc)};E.prototype.emplace=function(P,ea,qa,xa,Ea,Va,Ya,gb,Fb,Sb,jc,Dc,xc){var Hc=12*P;this.int16[Hc+0]=ea;this.int16[Hc+1]=qa;this.int16[Hc+2]=xa;this.int16[Hc+3]=Ea;this.uint16[Hc+4]=Va;this.uint16[Hc+5]=Ya;this.uint16[Hc+6]=gb;this.uint16[Hc+7]=Fb;this.int16[Hc+8]=Sb;this.int16[Hc+9]=jc;this.int16[Hc+10]=
Dc;this.int16[Hc+11]=xc;return P};return E}(sg);Wj.prototype.bytesPerElement=24;Ob("StructArrayLayout4i4ui4i24",Wj);var lk=function(u){function E(){u.apply(this,arguments)}u&&(E.__proto__=u);E.prototype=Object.create(u&&u.prototype);E.prototype.constructor=E;E.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer);this.float32=new Float32Array(this.arrayBuffer)};E.prototype.emplaceBack=function(P,ea,qa){var xa=this.length;this.resize(xa+1);return this.emplace(xa,P,ea,qa)};
E.prototype.emplace=function(P,ea,qa,xa){var Ea=3*P;this.float32[Ea+0]=ea;this.float32[Ea+1]=qa;this.float32[Ea+2]=xa;return P};return E}(sg);lk.prototype.bytesPerElement=12;Ob("StructArrayLayout3f12",lk);var Ik=function(u){function E(){u.apply(this,arguments)}u&&(E.__proto__=u);E.prototype=Object.create(u&&u.prototype);E.prototype.constructor=E;E.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer);this.uint32=new Uint32Array(this.arrayBuffer)};E.prototype.emplaceBack=function(P){var ea=
this.length;this.resize(ea+1);return this.emplace(ea,P)};E.prototype.emplace=function(P,ea){this.uint32[1*P]=ea;return P};return E}(sg);Ik.prototype.bytesPerElement=4;Ob("StructArrayLayout1ul4",Ik);var Xj=function(u){function E(){u.apply(this,arguments)}u&&(E.__proto__=u);E.prototype=Object.create(u&&u.prototype);E.prototype.constructor=E;E.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer);this.int16=new Int16Array(this.arrayBuffer);this.uint32=new Uint32Array(this.arrayBuffer);
this.uint16=new Uint16Array(this.arrayBuffer)};E.prototype.emplaceBack=function(P,ea,qa,xa,Ea,Va,Ya,gb,Fb){var Sb=this.length;this.resize(Sb+1);return this.emplace(Sb,P,ea,qa,xa,Ea,Va,Ya,gb,Fb)};E.prototype.emplace=function(P,ea,qa,xa,Ea,Va,Ya,gb,Fb,Sb){var jc=10*P;this.int16[jc+0]=ea;this.int16[jc+1]=qa;this.int16[jc+2]=xa;this.int16[jc+3]=Ea;this.int16[jc+4]=Va;this.int16[jc+5]=Ya;this.uint32[5*P+3]=gb;this.uint16[jc+8]=Fb;this.uint16[jc+9]=Sb;return P};return E}(sg);Xj.prototype.bytesPerElement=
20;Ob("StructArrayLayout6i1ul2ui20",Xj);var sj=function(u){function E(){u.apply(this,arguments)}u&&(E.__proto__=u);E.prototype=Object.create(u&&u.prototype);E.prototype.constructor=E;E.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer);this.int16=new Int16Array(this.arrayBuffer)};E.prototype.emplaceBack=function(P,ea,qa,xa,Ea,Va){var Ya=this.length;this.resize(Ya+1);return this.emplace(Ya,P,ea,qa,xa,Ea,Va)};E.prototype.emplace=function(P,ea,qa,xa,Ea,Va,Ya){var gb=6*P;this.int16[gb+
0]=ea;this.int16[gb+1]=qa;this.int16[gb+2]=xa;this.int16[gb+3]=Ea;this.int16[gb+4]=Va;this.int16[gb+5]=Ya;return P};return E}(sg);sj.prototype.bytesPerElement=12;Ob("StructArrayLayout2i2i2i12",sj);var Ci=function(u){function E(){u.apply(this,arguments)}u&&(E.__proto__=u);E.prototype=Object.create(u&&u.prototype);E.prototype.constructor=E;E.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer);this.float32=new Float32Array(this.arrayBuffer);this.int16=new Int16Array(this.arrayBuffer)};
E.prototype.emplaceBack=function(P,ea,qa,xa,Ea){var Va=this.length;this.resize(Va+1);return this.emplace(Va,P,ea,qa,xa,Ea)};E.prototype.emplace=function(P,ea,qa,xa,Ea,Va){var Ya=4*P,gb=8*P;this.float32[Ya+0]=ea;this.float32[Ya+1]=qa;this.float32[Ya+2]=xa;this.int16[gb+6]=Ea;this.int16[gb+7]=Va;return P};return E}(sg);Ci.prototype.bytesPerElement=16;Ob("StructArrayLayout2f1f2i16",Ci);var Hj=function(u){function E(){u.apply(this,arguments)}u&&(E.__proto__=u);E.prototype=Object.create(u&&u.prototype);
E.prototype.constructor=E;E.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer);this.float32=new Float32Array(this.arrayBuffer)};E.prototype.emplaceBack=function(P,ea,qa,xa){var Ea=this.length;this.resize(Ea+1);return this.emplace(Ea,P,ea,qa,xa)};E.prototype.emplace=function(P,ea,qa,xa,Ea){var Va=12*P,Ya=3*P;this.uint8[Va+0]=ea;this.uint8[Va+1]=qa;this.float32[Ya+1]=xa;this.float32[Ya+2]=Ea;return P};return E}(sg);Hj.prototype.bytesPerElement=12;Ob("StructArrayLayout2ub2f12",
Hj);var di=function(u){function E(){u.apply(this,arguments)}u&&(E.__proto__=u);E.prototype=Object.create(u&&u.prototype);E.prototype.constructor=E;E.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer);this.uint16=new Uint16Array(this.arrayBuffer)};E.prototype.emplaceBack=function(P,ea,qa){var xa=this.length;this.resize(xa+1);return this.emplace(xa,P,ea,qa)};E.prototype.emplace=function(P,ea,qa,xa){var Ea=3*P;this.uint16[Ea+0]=ea;this.uint16[Ea+1]=qa;this.uint16[Ea+2]=xa;
return P};return E}(sg);di.prototype.bytesPerElement=6;Ob("StructArrayLayout3ui6",di);var mk=function(u){function E(){u.apply(this,arguments)}u&&(E.__proto__=u);E.prototype=Object.create(u&&u.prototype);E.prototype.constructor=E;E.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer);this.int16=new Int16Array(this.arrayBuffer);this.uint16=new Uint16Array(this.arrayBuffer);this.uint32=new Uint32Array(this.arrayBuffer);this.float32=new Float32Array(this.arrayBuffer)};E.prototype.emplaceBack=
function(P,ea,qa,xa,Ea,Va,Ya,gb,Fb,Sb,jc,Dc,xc,Hc,vd,ce,Ed){var Kd=this.length;this.resize(Kd+1);return this.emplace(Kd,P,ea,qa,xa,Ea,Va,Ya,gb,Fb,Sb,jc,Dc,xc,Hc,vd,ce,Ed)};E.prototype.emplace=function(P,ea,qa,xa,Ea,Va,Ya,gb,Fb,Sb,jc,Dc,xc,Hc,vd,ce,Ed,Kd){var fe=24*P,te=12*P,Me=48*P;this.int16[fe+0]=ea;this.int16[fe+1]=qa;this.uint16[fe+2]=xa;this.uint16[fe+3]=Ea;this.uint32[te+2]=Va;this.uint32[te+3]=Ya;this.uint32[te+4]=gb;this.uint16[fe+10]=Fb;this.uint16[fe+11]=Sb;this.uint16[fe+12]=jc;this.float32[te+
7]=Dc;this.float32[te+8]=xc;this.uint8[Me+36]=Hc;this.uint8[Me+37]=vd;this.uint8[Me+38]=ce;this.uint32[te+10]=Ed;this.int16[fe+22]=Kd;return P};return E}(sg);mk.prototype.bytesPerElement=48;Ob("StructArrayLayout2i2ui3ul3ui2f3ub1ul1i48",mk);var Yj=function(u){function E(){u.apply(this,arguments)}u&&(E.__proto__=u);E.prototype=Object.create(u&&u.prototype);E.prototype.constructor=E;E.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer);this.int16=new Int16Array(this.arrayBuffer);
this.uint16=new Uint16Array(this.arrayBuffer);this.uint32=new Uint32Array(this.arrayBuffer);this.float32=new Float32Array(this.arrayBuffer)};E.prototype.emplaceBack=function(P,ea,qa,xa,Ea,Va,Ya,gb,Fb,Sb,jc,Dc,xc,Hc,vd,ce,Ed,Kd,fe,te,Me,ue,lf,Xe,Ye,of,Hf,mf){var ff=this.length;this.resize(ff+1);return this.emplace(ff,P,ea,qa,xa,Ea,Va,Ya,gb,Fb,Sb,jc,Dc,xc,Hc,vd,ce,Ed,Kd,fe,te,Me,ue,lf,Xe,Ye,of,Hf,mf)};E.prototype.emplace=function(P,ea,qa,xa,Ea,Va,Ya,gb,Fb,Sb,jc,Dc,xc,Hc,vd,ce,Ed,Kd,fe,te,Me,ue,lf,Xe,
Ye,of,Hf,mf,ff){var Pe=34*P,$e=17*P;this.int16[Pe+0]=ea;this.int16[Pe+1]=qa;this.int16[Pe+2]=xa;this.int16[Pe+3]=Ea;this.int16[Pe+4]=Va;this.int16[Pe+5]=Ya;this.int16[Pe+6]=gb;this.int16[Pe+7]=Fb;this.uint16[Pe+8]=Sb;this.uint16[Pe+9]=jc;this.uint16[Pe+10]=Dc;this.uint16[Pe+11]=xc;this.uint16[Pe+12]=Hc;this.uint16[Pe+13]=vd;this.uint16[Pe+14]=ce;this.uint16[Pe+15]=Ed;this.uint16[Pe+16]=Kd;this.uint16[Pe+17]=fe;this.uint16[Pe+18]=te;this.uint16[Pe+19]=Me;this.uint16[Pe+20]=ue;this.uint16[Pe+21]=lf;
this.uint16[Pe+22]=Xe;this.uint32[$e+12]=Ye;this.float32[$e+13]=of;this.float32[$e+14]=Hf;this.float32[$e+15]=mf;this.float32[$e+16]=ff;return P};return E}(sg);Yj.prototype.bytesPerElement=68;Ob("StructArrayLayout8i15ui1ul4f68",Yj);var Ii=function(u){function E(){u.apply(this,arguments)}u&&(E.__proto__=u);E.prototype=Object.create(u&&u.prototype);E.prototype.constructor=E;E.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer);this.float32=new Float32Array(this.arrayBuffer)};
E.prototype.emplaceBack=function(P){var ea=this.length;this.resize(ea+1);return this.emplace(ea,P)};E.prototype.emplace=function(P,ea){this.float32[1*P]=ea;return P};return E}(sg);Ii.prototype.bytesPerElement=4;Ob("StructArrayLayout1f4",Ii);var Di=function(u){function E(){u.apply(this,arguments)}u&&(E.__proto__=u);E.prototype=Object.create(u&&u.prototype);E.prototype.constructor=E;E.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer);this.int16=new Int16Array(this.arrayBuffer)};
E.prototype.emplaceBack=function(P,ea,qa){var xa=this.length;this.resize(xa+1);return this.emplace(xa,P,ea,qa)};E.prototype.emplace=function(P,ea,qa,xa){var Ea=3*P;this.int16[Ea+0]=ea;this.int16[Ea+1]=qa;this.int16[Ea+2]=xa;return P};return E}(sg);Di.prototype.bytesPerElement=6;Ob("StructArrayLayout3i6",Di);var nh=function(u){function E(){u.apply(this,arguments)}u&&(E.__proto__=u);E.prototype=Object.create(u&&u.prototype);E.prototype.constructor=E;E.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer);
this.uint32=new Uint32Array(this.arrayBuffer);this.uint16=new Uint16Array(this.arrayBuffer)};E.prototype.emplaceBack=function(P,ea,qa){var xa=this.length;this.resize(xa+1);return this.emplace(xa,P,ea,qa)};E.prototype.emplace=function(P,ea,qa,xa){var Ea=4*P;this.uint32[2*P]=ea;this.uint16[Ea+2]=qa;this.uint16[Ea+3]=xa;return P};return E}(sg);nh.prototype.bytesPerElement=8;Ob("StructArrayLayout1ul2ui8",nh);var oh=function(u){function E(){u.apply(this,arguments)}u&&(E.__proto__=u);E.prototype=Object.create(u&&
u.prototype);E.prototype.constructor=E;E.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer);this.uint16=new Uint16Array(this.arrayBuffer)};E.prototype.emplaceBack=function(P,ea){var qa=this.length;this.resize(qa+1);return this.emplace(qa,P,ea)};E.prototype.emplace=function(P,ea,qa){var xa=2*P;this.uint16[xa+0]=ea;this.uint16[xa+1]=qa;return P};return E}(sg);oh.prototype.bytesPerElement=4;Ob("StructArrayLayout2ui4",oh);var Mi=function(u){function E(){u.apply(this,arguments)}
u&&(E.__proto__=u);E.prototype=Object.create(u&&u.prototype);E.prototype.constructor=E;E.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer);this.uint16=new Uint16Array(this.arrayBuffer)};E.prototype.emplaceBack=function(P){var ea=this.length;this.resize(ea+1);return this.emplace(ea,P)};E.prototype.emplace=function(P,ea){this.uint16[1*P]=ea;return P};return E}(sg);Mi.prototype.bytesPerElement=2;Ob("StructArrayLayout1ui2",Mi);var Bj=function(u){function E(){u.apply(this,
arguments)}u&&(E.__proto__=u);E.prototype=Object.create(u&&u.prototype);E.prototype.constructor=E;E.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer);this.float32=new Float32Array(this.arrayBuffer)};E.prototype.emplaceBack=function(P,ea){var qa=this.length;this.resize(qa+1);return this.emplace(qa,P,ea)};E.prototype.emplace=function(P,ea,qa){var xa=2*P;this.float32[xa+0]=ea;this.float32[xa+1]=qa;return P};return E}(sg);Bj.prototype.bytesPerElement=8;Ob("StructArrayLayout2f8",
Bj);var Hi=function(u){function E(){u.apply(this,arguments)}u&&(E.__proto__=u);E.prototype=Object.create(u&&u.prototype);E.prototype.constructor=E;E.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer);this.float32=new Float32Array(this.arrayBuffer)};E.prototype.emplaceBack=function(P,ea,qa,xa){var Ea=this.length;this.resize(Ea+1);return this.emplace(Ea,P,ea,qa,xa)};E.prototype.emplace=function(P,ea,qa,xa,Ea){var Va=4*P;this.float32[Va+0]=ea;this.float32[Va+1]=qa;this.float32[Va+
2]=xa;this.float32[Va+3]=Ea;return P};return E}(sg);Hi.prototype.bytesPerElement=16;Ob("StructArrayLayout4f16",Hi);var Vk=function(u){function E(){u.apply(this,arguments)}u&&(E.__proto__=u);E.prototype=Object.create(u&&u.prototype);E.prototype.constructor=E;var P={anchorPointX:{configurable:!0},anchorPointY:{configurable:!0},x1:{configurable:!0},y1:{configurable:!0},x2:{configurable:!0},y2:{configurable:!0},featureIndex:{configurable:!0},sourceLayerIndex:{configurable:!0},bucketIndex:{configurable:!0},
anchorPoint:{configurable:!0}};P.anchorPointX.get=function(){return this._structArray.int16[this._pos2+0]};P.anchorPointY.get=function(){return this._structArray.int16[this._pos2+1]};P.x1.get=function(){return this._structArray.int16[this._pos2+2]};P.y1.get=function(){return this._structArray.int16[this._pos2+3]};P.x2.get=function(){return this._structArray.int16[this._pos2+4]};P.y2.get=function(){return this._structArray.int16[this._pos2+5]};P.featureIndex.get=function(){return this._structArray.uint32[this._pos4+
3]};P.sourceLayerIndex.get=function(){return this._structArray.uint16[this._pos2+8]};P.bucketIndex.get=function(){return this._structArray.uint16[this._pos2+9]};P.anchorPoint.get=function(){return new af(this.anchorPointX,this.anchorPointY)};Object.defineProperties(E.prototype,P);return E}(Gj);Vk.prototype.size=20;var Zj=function(u){function E(){u.apply(this,arguments)}u&&(E.__proto__=u);E.prototype=Object.create(u&&u.prototype);E.prototype.constructor=E;E.prototype.get=function(P){return new Vk(this,
P)};return E}(Xj);Ob("CollisionBoxArray",Zj);var nk=function(u){function E(){u.apply(this,arguments)}u&&(E.__proto__=u);E.prototype=Object.create(u&&u.prototype);E.prototype.constructor=E;var P={anchorX:{configurable:!0},anchorY:{configurable:!0},glyphStartIndex:{configurable:!0},numGlyphs:{configurable:!0},vertexStartIndex:{configurable:!0},lineStartIndex:{configurable:!0},lineLength:{configurable:!0},segment:{configurable:!0},lowerSize:{configurable:!0},upperSize:{configurable:!0},lineOffsetX:{configurable:!0},
lineOffsetY:{configurable:!0},writingMode:{configurable:!0},placedOrientation:{configurable:!0},hidden:{configurable:!0},crossTileID:{configurable:!0},associatedIconIndex:{configurable:!0}};P.anchorX.get=function(){return this._structArray.int16[this._pos2+0]};P.anchorY.get=function(){return this._structArray.int16[this._pos2+1]};P.glyphStartIndex.get=function(){return this._structArray.uint16[this._pos2+2]};P.numGlyphs.get=function(){return this._structArray.uint16[this._pos2+3]};P.vertexStartIndex.get=
function(){return this._structArray.uint32[this._pos4+2]};P.lineStartIndex.get=function(){return this._structArray.uint32[this._pos4+3]};P.lineLength.get=function(){return this._structArray.uint32[this._pos4+4]};P.segment.get=function(){return this._structArray.uint16[this._pos2+10]};P.lowerSize.get=function(){return this._structArray.uint16[this._pos2+11]};P.upperSize.get=function(){return this._structArray.uint16[this._pos2+12]};P.lineOffsetX.get=function(){return this._structArray.float32[this._pos4+
7]};P.lineOffsetY.get=function(){return this._structArray.float32[this._pos4+8]};P.writingMode.get=function(){return this._structArray.uint8[this._pos1+36]};P.placedOrientation.get=function(){return this._structArray.uint8[this._pos1+37]};P.placedOrientation.set=function(ea){this._structArray.uint8[this._pos1+37]=ea};P.hidden.get=function(){return this._structArray.uint8[this._pos1+38]};P.hidden.set=function(ea){this._structArray.uint8[this._pos1+38]=ea};P.crossTileID.get=function(){return this._structArray.uint32[this._pos4+
10]};P.crossTileID.set=function(ea){this._structArray.uint32[this._pos4+10]=ea};P.associatedIconIndex.get=function(){return this._structArray.int16[this._pos2+22]};Object.defineProperties(E.prototype,P);return E}(Gj);nk.prototype.size=48;var Wk=function(u){function E(){u.apply(this,arguments)}u&&(E.__proto__=u);E.prototype=Object.create(u&&u.prototype);E.prototype.constructor=E;E.prototype.get=function(P){return new nk(this,P)};return E}(mk);Ob("PlacedSymbolArray",Wk);var Jk=function(u){function E(){u.apply(this,
arguments)}u&&(E.__proto__=u);E.prototype=Object.create(u&&u.prototype);E.prototype.constructor=E;var P={anchorX:{configurable:!0},anchorY:{configurable:!0},rightJustifiedTextSymbolIndex:{configurable:!0},centerJustifiedTextSymbolIndex:{configurable:!0},leftJustifiedTextSymbolIndex:{configurable:!0},verticalPlacedTextSymbolIndex:{configurable:!0},placedIconSymbolIndex:{configurable:!0},verticalPlacedIconSymbolIndex:{configurable:!0},key:{configurable:!0},textBoxStartIndex:{configurable:!0},textBoxEndIndex:{configurable:!0},
verticalTextBoxStartIndex:{configurable:!0},verticalTextBoxEndIndex:{configurable:!0},iconBoxStartIndex:{configurable:!0},iconBoxEndIndex:{configurable:!0},verticalIconBoxStartIndex:{configurable:!0},verticalIconBoxEndIndex:{configurable:!0},featureIndex:{configurable:!0},numHorizontalGlyphVertices:{configurable:!0},numVerticalGlyphVertices:{configurable:!0},numIconVertices:{configurable:!0},numVerticalIconVertices:{configurable:!0},useRuntimeCollisionCircles:{configurable:!0},crossTileID:{configurable:!0},
textBoxScale:{configurable:!0},textOffset0:{configurable:!0},textOffset1:{configurable:!0},collisionCircleDiameter:{configurable:!0}};P.anchorX.get=function(){return this._structArray.int16[this._pos2+0]};P.anchorY.get=function(){return this._structArray.int16[this._pos2+1]};P.rightJustifiedTextSymbolIndex.get=function(){return this._structArray.int16[this._pos2+2]};P.centerJustifiedTextSymbolIndex.get=function(){return this._structArray.int16[this._pos2+3]};P.leftJustifiedTextSymbolIndex.get=function(){return this._structArray.int16[this._pos2+
4]};P.verticalPlacedTextSymbolIndex.get=function(){return this._structArray.int16[this._pos2+5]};P.placedIconSymbolIndex.get=function(){return this._structArray.int16[this._pos2+6]};P.verticalPlacedIconSymbolIndex.get=function(){return this._structArray.int16[this._pos2+7]};P.key.get=function(){return this._structArray.uint16[this._pos2+8]};P.textBoxStartIndex.get=function(){return this._structArray.uint16[this._pos2+9]};P.textBoxEndIndex.get=function(){return this._structArray.uint16[this._pos2+
10]};P.verticalTextBoxStartIndex.get=function(){return this._structArray.uint16[this._pos2+11]};P.verticalTextBoxEndIndex.get=function(){return this._structArray.uint16[this._pos2+12]};P.iconBoxStartIndex.get=function(){return this._structArray.uint16[this._pos2+13]};P.iconBoxEndIndex.get=function(){return this._structArray.uint16[this._pos2+14]};P.verticalIconBoxStartIndex.get=function(){return this._structArray.uint16[this._pos2+15]};P.verticalIconBoxEndIndex.get=function(){return this._structArray.uint16[this._pos2+
16]};P.featureIndex.get=function(){return this._structArray.uint16[this._pos2+17]};P.numHorizontalGlyphVertices.get=function(){return this._structArray.uint16[this._pos2+18]};P.numVerticalGlyphVertices.get=function(){return this._structArray.uint16[this._pos2+19]};P.numIconVertices.get=function(){return this._structArray.uint16[this._pos2+20]};P.numVerticalIconVertices.get=function(){return this._structArray.uint16[this._pos2+21]};P.useRuntimeCollisionCircles.get=function(){return this._structArray.uint16[this._pos2+
22]};P.crossTileID.get=function(){return this._structArray.uint32[this._pos4+12]};P.crossTileID.set=function(ea){this._structArray.uint32[this._pos4+12]=ea};P.textBoxScale.get=function(){return this._structArray.float32[this._pos4+13]};P.textOffset0.get=function(){return this._structArray.float32[this._pos4+14]};P.textOffset1.get=function(){return this._structArray.float32[this._pos4+15]};P.collisionCircleDiameter.get=function(){return this._structArray.float32[this._pos4+16]};Object.defineProperties(E.prototype,
P);return E}(Gj);Jk.prototype.size=68;var ok=function(u){function E(){u.apply(this,arguments)}u&&(E.__proto__=u);E.prototype=Object.create(u&&u.prototype);E.prototype.constructor=E;E.prototype.get=function(P){return new Jk(this,P)};return E}(Yj);Ob("SymbolInstanceArray",ok);var Xk=function(u){function E(){u.apply(this,arguments)}u&&(E.__proto__=u);E.prototype=Object.create(u&&u.prototype);E.prototype.constructor=E;E.prototype.getoffsetX=function(P){return this.float32[1*P]};return E}(Ii);Ob("GlyphOffsetArray",
Xk);var ak=function(u){function E(){u.apply(this,arguments)}u&&(E.__proto__=u);E.prototype=Object.create(u&&u.prototype);E.prototype.constructor=E;E.prototype.getx=function(P){return this.int16[3*P]};E.prototype.gety=function(P){return this.int16[3*P+1]};E.prototype.gettileUnitDistanceFromAnchor=function(P){return this.int16[3*P+2]};return E}(Di);Ob("SymbolLineVertexArray",ak);var Kk=function(u){function E(){u.apply(this,arguments)}u&&(E.__proto__=u);E.prototype=Object.create(u&&u.prototype);E.prototype.constructor=
E;var P={featureIndex:{configurable:!0},sourceLayerIndex:{configurable:!0},bucketIndex:{configurable:!0}};P.featureIndex.get=function(){return this._structArray.uint32[this._pos4+0]};P.sourceLayerIndex.get=function(){return this._structArray.uint16[this._pos2+2]};P.bucketIndex.get=function(){return this._structArray.uint16[this._pos2+3]};Object.defineProperties(E.prototype,P);return E}(Gj);Kk.prototype.size=8;var Lk=function(u){function E(){u.apply(this,arguments)}u&&(E.__proto__=u);E.prototype=Object.create(u&&
u.prototype);E.prototype.constructor=E;E.prototype.get=function(P){return new Kk(this,P)};return E}(nh);Ob("FeatureIndexArray",Lk);var Mk=xb([{name:"a_pos",components:2,type:"Int16"}],4).members,Vg=function(u){void 0===u&&(u=[]);this.segments=u};Vg.prototype.prepareSegment=function(u,E,P,ea){var qa=this.segments[this.segments.length-1];u>Vg.MAX_VERTEX_ARRAY_LENGTH&&D("Max vertices per segment is "+Vg.MAX_VERTEX_ARRAY_LENGTH+": bucket requested "+u);if(!qa||qa.vertexLength+u>Vg.MAX_VERTEX_ARRAY_LENGTH||
qa.sortKey!==ea)qa={vertexOffset:E.length,primitiveOffset:P.length,vertexLength:0,primitiveLength:0},void 0!==ea&&(qa.sortKey=ea),this.segments.push(qa);return qa};Vg.prototype.get=function(){return this.segments};Vg.prototype.destroy=function(){for(var u=0,E=this.segments;u<E.length;u+=1){var P=E[u],ea;for(ea in P.vaos)P.vaos[ea].destroy()}};Vg.simpleSegment=function(u,E,P,ea){return new Vg([{vertexOffset:u,primitiveOffset:E,vertexLength:P,primitiveLength:ea,vaos:{},sortKey:0}])};Vg.MAX_VERTEX_ARRAY_LENGTH=
Math.pow(2,16)-1;Ob("SegmentVector",Vg);var pk=xb([{name:"a_pattern_from",components:4,type:"Uint16"},{name:"a_pattern_to",components:4,type:"Uint16"},{name:"a_pixel_ratio_from",components:1,type:"Uint8"},{name:"a_pixel_ratio_to",components:1,type:"Uint8"}]),Yk=g(function(u){u.exports=function(E,P){var ea=E.length&3;var qa=E.length-ea;var xa=P;for(P=0;P<qa;){var Ea=E.charCodeAt(P)&255|(E.charCodeAt(++P)&255)<<8|(E.charCodeAt(++P)&255)<<16|(E.charCodeAt(++P)&255)<<24;++P;Ea=3432918353*(Ea&65535)+((3432918353*
(Ea>>>16)&65535)<<16)&4294967295;Ea=Ea<<15|Ea>>>17;Ea=461845907*(Ea&65535)+((461845907*(Ea>>>16)&65535)<<16)&4294967295;xa^=Ea;xa=xa<<13|xa>>>19;xa=5*(xa&65535)+((5*(xa>>>16)&65535)<<16)&4294967295;xa=(xa&65535)+27492+(((xa>>>16)+58964&65535)<<16)}Ea=0;switch(ea){case 3:Ea^=(E.charCodeAt(P+2)&255)<<16;case 2:Ea^=(E.charCodeAt(P+1)&255)<<8;case 1:Ea^=E.charCodeAt(P)&255,Ea=3432918353*(Ea&65535)+((3432918353*(Ea>>>16)&65535)<<16)&4294967295,Ea=Ea<<15|Ea>>>17,xa^=461845907*(Ea&65535)+((461845907*(Ea>>>
16)&65535)<<16)&4294967295}xa^=E.length;xa^=xa>>>16;xa=2246822507*(xa&65535)+((2246822507*(xa>>>16)&65535)<<16)&4294967295;xa^=xa>>>13;xa=3266489909*(xa&65535)+((3266489909*(xa>>>16)&65535)<<16)&4294967295;return(xa^xa>>>16)>>>0}}),Ni=g(function(u){u.exports=function(E,P){var ea=E.length;P^=ea;for(var qa=0,xa;4<=ea;)xa=E.charCodeAt(qa)&255|(E.charCodeAt(++qa)&255)<<8|(E.charCodeAt(++qa)&255)<<16|(E.charCodeAt(++qa)&255)<<24,xa=1540483477*(xa&65535)+((1540483477*(xa>>>16)&65535)<<16),xa^=xa>>>24,xa=
1540483477*(xa&65535)+((1540483477*(xa>>>16)&65535)<<16),P=1540483477*(P&65535)+((1540483477*(P>>>16)&65535)<<16)^xa,ea-=4,++qa;switch(ea){case 3:P^=(E.charCodeAt(qa+2)&255)<<16;case 2:P^=(E.charCodeAt(qa+1)&255)<<8;case 1:P^=E.charCodeAt(qa)&255,P=1540483477*(P&65535)+((1540483477*(P>>>16)&65535)<<16)}P^=P>>>13;P=1540483477*(P&65535)+((1540483477*(P>>>16)&65535)<<16);return(P^P>>>15)>>>0}}),$i=Yk;$i.murmur3=Yk;$i.murmur2=Ni;var Oi=function(){this.ids=[];this.positions=[];this.indexed=!1};Oi.prototype.add=
function(u,E,P,ea){this.ids.push(Bc(u));this.positions.push(E,P,ea)};Oi.prototype.getPositions=function(u){u=Bc(u);for(var E=0,P=this.ids.length-1;E<P;){var ea=E+P>>1;this.ids[ea]>=u?P=ea:E=ea+1}for(P=[];this.ids[E]===u;)P.push({index:this.positions[3*E],start:this.positions[3*E+1],end:this.positions[3*E+2]}),E++;return P};Oi.serialize=function(u,E){var P=new Float64Array(u.ids);u=new Uint32Array(u.positions);Yc(P,u,0,P.length-1);E&&E.push(P.buffer,u.buffer);return{ids:P,positions:u}};Oi.deserialize=
function(u){var E=new Oi;E.ids=u.ids;E.positions=u.positions;E.indexed=!0;return E};var Sk=Math.pow(2,53)-1;Ob("FeaturePositionMap",Oi);var Rg=function(u,E){this.gl=u.gl;this.location=E},il=function(u){function E(P,ea){u.call(this,P,ea);this.current=0}u&&(E.__proto__=u);E.prototype=Object.create(u&&u.prototype);E.prototype.constructor=E;E.prototype.set=function(P){this.current!==P&&(this.current=P,this.gl.uniform1i(this.location,P))};return E}(Rg),tj=function(u){function E(P,ea){u.call(this,P,ea);
this.current=0}u&&(E.__proto__=u);E.prototype=Object.create(u&&u.prototype);E.prototype.constructor=E;E.prototype.set=function(P){this.current!==P&&(this.current=P,this.gl.uniform1f(this.location,P))};return E}(Rg),Ij=function(u){function E(P,ea){u.call(this,P,ea);this.current=[0,0]}u&&(E.__proto__=u);E.prototype=Object.create(u&&u.prototype);E.prototype.constructor=E;E.prototype.set=function(P){if(P[0]!==this.current[0]||P[1]!==this.current[1])this.current=P,this.gl.uniform2f(this.location,P[0],
P[1])};return E}(Rg),fj=function(u){function E(P,ea){u.call(this,P,ea);this.current=[0,0,0]}u&&(E.__proto__=u);E.prototype=Object.create(u&&u.prototype);E.prototype.constructor=E;E.prototype.set=function(P){if(P[0]!==this.current[0]||P[1]!==this.current[1]||P[2]!==this.current[2])this.current=P,this.gl.uniform3f(this.location,P[0],P[1],P[2])};return E}(Rg),uj=function(u){function E(P,ea){u.call(this,P,ea);this.current=[0,0,0,0]}u&&(E.__proto__=u);E.prototype=Object.create(u&&u.prototype);E.prototype.constructor=
E;E.prototype.set=function(P){if(P[0]!==this.current[0]||P[1]!==this.current[1]||P[2]!==this.current[2]||P[3]!==this.current[3])this.current=P,this.gl.uniform4f(this.location,P[0],P[1],P[2],P[3])};return E}(Rg),Pi=function(u){function E(P,ea){u.call(this,P,ea);this.current=sd.transparent}u&&(E.__proto__=u);E.prototype=Object.create(u&&u.prototype);E.prototype.constructor=E;E.prototype.set=function(P){if(P.r!==this.current.r||P.g!==this.current.g||P.b!==this.current.b||P.a!==this.current.a)this.current=
P,this.gl.uniform4f(this.location,P.r,P.g,P.b,P.a)};return E}(Rg),Zk=new Float32Array(16),qk=function(u){function E(P,ea){u.call(this,P,ea);this.current=Zk}u&&(E.__proto__=u);E.prototype=Object.create(u&&u.prototype);E.prototype.constructor=E;E.prototype.set=function(P){if(P[12]!==this.current[12]||P[0]!==this.current[0])this.current=P,this.gl.uniformMatrix4fv(this.location,!1,P);else for(var ea=1;16>ea;ea++)if(P[ea]!==this.current[ea]){this.current=P;this.gl.uniformMatrix4fv(this.location,!1,P);
break}};return E}(Rg),Qi=function(u,E,P){this.value=u;this.uniformNames=E.map(function(ea){return"u_"+ea});this.type=P};Qi.prototype.setUniform=function(u,E,P){u.set(P.constantOr(this.value))};Qi.prototype.getBinding=function(u,E,P){return"color"===this.type?new Pi(u,E):new tj(u,E)};var ui=function(u,E){this.uniformNames=E.map(function(P){return"u_"+P});this.patternTo=this.patternFrom=null;this.pixelRatioTo=this.pixelRatioFrom=1};ui.prototype.setConstantPatternPositions=function(u,E){this.pixelRatioFrom=
E.pixelRatio;this.pixelRatioTo=u.pixelRatio;this.patternFrom=E.tlbr;this.patternTo=u.tlbr};ui.prototype.setUniform=function(u,E,P,ea){(E="u_pattern_to"===ea?this.patternTo:"u_pattern_from"===ea?this.patternFrom:"u_pixel_ratio_to"===ea?this.pixelRatioTo:"u_pixel_ratio_from"===ea?this.pixelRatioFrom:null)&&u.set(E)};ui.prototype.getBinding=function(u,E,P){return"u_pattern"===P.substr(0,9)?new uj(u,E):new tj(u,E)};var $h=function(u,E,P,ea){this.expression=u;this.type=P;this.maxValue=0;this.paintVertexAttributes=
E.map(function(qa){return{name:"a_"+qa,type:"Float32",components:"color"===P?2:1,offset:0}});this.paintVertexArray=new ea};$h.prototype.populatePaintArray=function(u,E,P,ea,qa){P=this.paintVertexArray.length;E=this.expression.evaluate(new Ag(0),E,{},ea,[],qa);this.paintVertexArray.resize(u);this._setPaintValue(P,u,E)};$h.prototype.updatePaintArray=function(u,E,P,ea){P=this.expression.evaluate({zoom:0},P,ea);this._setPaintValue(u,E,P)};$h.prototype._setPaintValue=function(u,E,P){if("color"===this.type)for(P=
Tc(P);u<E;u++)this.paintVertexArray.emplace(u,P[0],P[1]);else{for(;u<E;u++)this.paintVertexArray.emplace(u,P);this.maxValue=Math.max(this.maxValue,Math.abs(P))}};$h.prototype.upload=function(u){this.paintVertexArray&&this.paintVertexArray.arrayBuffer&&(this.paintVertexBuffer&&this.paintVertexBuffer.buffer?this.paintVertexBuffer.updateData(this.paintVertexArray):this.paintVertexBuffer=u.createVertexBuffer(this.paintVertexArray,this.paintVertexAttributes,this.expression.isStateDependent))};$h.prototype.destroy=
function(){this.paintVertexBuffer&&this.paintVertexBuffer.destroy()};var Zg=function(u,E,P,ea,qa,xa){this.expression=u;this.uniformNames=E.map(function(Ea){return"u_"+Ea+"_t"});this.type=P;this.useIntegerZoom=ea;this.zoom=qa;this.maxValue=0;this.paintVertexAttributes=E.map(function(Ea){return{name:"a_"+Ea,type:"Float32",components:"color"===P?4:2,offset:0}});this.paintVertexArray=new xa};Zg.prototype.populatePaintArray=function(u,E,P,ea,qa){P=this.expression.evaluate(new Ag(this.zoom),E,{},ea,[],
qa);E=this.expression.evaluate(new Ag(this.zoom+1),E,{},ea,[],qa);ea=this.paintVertexArray.length;this.paintVertexArray.resize(u);this._setPaintValue(ea,u,P,E)};Zg.prototype.updatePaintArray=function(u,E,P,ea){var qa=this.expression.evaluate({zoom:this.zoom},P,ea);P=this.expression.evaluate({zoom:this.zoom+1},P,ea);this._setPaintValue(u,E,qa,P)};Zg.prototype._setPaintValue=function(u,E,P,ea){if("color"===this.type)for(P=Tc(P),ea=Tc(ea);u<E;u++)this.paintVertexArray.emplace(u,P[0],P[1],ea[0],ea[1]);
else{for(;u<E;u++)this.paintVertexArray.emplace(u,P,ea);this.maxValue=Math.max(this.maxValue,Math.abs(P),Math.abs(ea))}};Zg.prototype.upload=function(u){this.paintVertexArray&&this.paintVertexArray.arrayBuffer&&(this.paintVertexBuffer&&this.paintVertexBuffer.buffer?this.paintVertexBuffer.updateData(this.paintVertexArray):this.paintVertexBuffer=u.createVertexBuffer(this.paintVertexArray,this.paintVertexAttributes,this.expression.isStateDependent))};Zg.prototype.destroy=function(){this.paintVertexBuffer&&
this.paintVertexBuffer.destroy()};Zg.prototype.setUniform=function(u,E){E=d(this.expression.interpolationFactor(this.useIntegerZoom?Math.floor(E.zoom):E.zoom,this.zoom,this.zoom+1),0,1);u.set(E)};Zg.prototype.getBinding=function(u,E,P){return new tj(u,E)};var Wg=function(u,E,P,ea,qa,xa){this.expression=u;this.type=E;this.useIntegerZoom=P;this.zoom=ea;this.layerId=xa;this.zoomInPaintVertexArray=new qa;this.zoomOutPaintVertexArray=new qa};Wg.prototype.populatePaintArray=function(u,E,P){var ea=this.zoomInPaintVertexArray.length;
this.zoomInPaintVertexArray.resize(u);this.zoomOutPaintVertexArray.resize(u);this._setPaintValues(ea,u,E.patterns&&E.patterns[this.layerId],P)};Wg.prototype.updatePaintArray=function(u,E,P,ea,qa){this._setPaintValues(u,E,P.patterns&&P.patterns[this.layerId],qa)};Wg.prototype._setPaintValues=function(u,E,P,ea){if(ea&&P){var qa=ea[P.min],xa=ea[P.mid];P=ea[P.max];if(qa&&xa&&P)for(;u<E;u++)this.zoomInPaintVertexArray.emplace(u,xa.tl[0],xa.tl[1],xa.br[0],xa.br[1],qa.tl[0],qa.tl[1],qa.br[0],qa.br[1],xa.pixelRatio,
qa.pixelRatio),this.zoomOutPaintVertexArray.emplace(u,xa.tl[0],xa.tl[1],xa.br[0],xa.br[1],P.tl[0],P.tl[1],P.br[0],P.br[1],xa.pixelRatio,P.pixelRatio)}};Wg.prototype.upload=function(u){this.zoomInPaintVertexArray&&this.zoomInPaintVertexArray.arrayBuffer&&this.zoomOutPaintVertexArray&&this.zoomOutPaintVertexArray.arrayBuffer&&(this.zoomInPaintVertexBuffer=u.createVertexBuffer(this.zoomInPaintVertexArray,pk.members,this.expression.isStateDependent),this.zoomOutPaintVertexBuffer=u.createVertexBuffer(this.zoomOutPaintVertexArray,
pk.members,this.expression.isStateDependent))};Wg.prototype.destroy=function(){this.zoomOutPaintVertexBuffer&&this.zoomOutPaintVertexBuffer.destroy();this.zoomInPaintVertexBuffer&&this.zoomInPaintVertexBuffer.destroy()};var xh=function(u,E,P,ea){this.binders={};this.layoutAttributes=ea;this._buffers=[];ea=[];for(var qa in u.paint._values)if(P(qa)){var xa=u.paint.get(qa);if(xa instanceof Oh&&fc(xa.property.specification)){var Ea={"text-opacity":["opacity"],"icon-opacity":["opacity"],"text-color":["fill_color"],
"icon-color":["fill_color"],"text-halo-color":["halo_color"],"icon-halo-color":["halo_color"],"text-halo-blur":["halo_blur"],"icon-halo-blur":["halo_blur"],"text-halo-width":["halo_width"],"icon-halo-width":["halo_width"],"line-gap-width":["gapwidth"],"line-pattern":["pattern_to","pattern_from","pixel_ratio_to","pixel_ratio_from"],"fill-pattern":["pattern_to","pattern_from","pixel_ratio_to","pixel_ratio_from"],"fill-extrusion-pattern":["pattern_to","pattern_from","pixel_ratio_to","pixel_ratio_from"]}[qa]||
[qa.replace(u.type+"-","").replace(/-/g,"_")];var Va=xa.value,Ya=xa.property.specification.type,gb=xa.property.useIntegerZoom;xa=xa.property.specification["property-type"];xa="cross-faded"===xa||"cross-faded-data-driven"===xa;if("constant"===Va.kind)this.binders[qa]=xa?new ui(Va.value,Ea):new Qi(Va.value,Ea,Ya),ea.push("/u_"+qa);else if("source"===Va.kind||xa){var Fb=Oc(qa,Ya,"source");this.binders[qa]=xa?new Wg(Va,Ya,gb,E,Fb,u.id):new $h(Va,Ea,Ya,Fb);ea.push("/a_"+qa)}else xa=Oc(qa,Ya,"composite"),
this.binders[qa]=new Zg(Va,Ea,Ya,gb,E,xa),ea.push("/z_"+qa)}}this.cacheKey=ea.sort().join("")};xh.prototype.getMaxValue=function(u){u=this.binders[u];return u instanceof $h||u instanceof Zg?u.maxValue:0};xh.prototype.populatePaintArrays=function(u,E,P,ea,qa){for(var xa in this.binders){var Ea=this.binders[xa];(Ea instanceof $h||Ea instanceof Zg||Ea instanceof Wg)&&Ea.populatePaintArray(u,E,P,ea,qa)}};xh.prototype.setConstantPatternPositions=function(u,E){for(var P in this.binders){var ea=this.binders[P];
ea instanceof ui&&ea.setConstantPatternPositions(u,E)}};xh.prototype.updatePaintArrays=function(u,E,P,ea,qa){var xa=!1,Ea;for(Ea in u)for(var Va=0,Ya=E.getPositions(Ea);Va<Ya.length;Va+=1){var gb=Ya[Va],Fb=P.feature(gb.index),Sb;for(Sb in this.binders){var jc=this.binders[Sb];(jc instanceof $h||jc instanceof Zg||jc instanceof Wg)&&!0===jc.expression.isStateDependent&&(xa=ea.paint.get(Sb),jc.expression=xa.value,jc.updatePaintArray(gb.start,gb.end,Fb,u[Ea],qa),xa=!0)}}return xa};xh.prototype.defines=
function(){var u=[],E;for(E in this.binders){var P=this.binders[E];(P instanceof Qi||P instanceof ui)&&u.push.apply(u,P.uniformNames.map(function(ea){return"#define HAS_UNIFORM_"+ea}))}return u};xh.prototype.getPaintVertexBuffers=function(){return this._buffers};xh.prototype.getUniforms=function(u,E){var P=[],ea;for(ea in this.binders){var qa=this.binders[ea];if(qa instanceof Qi||qa instanceof ui||qa instanceof Zg)for(var xa=0,Ea=qa.uniformNames;xa<Ea.length;xa+=1){var Va=Ea[xa];if(E[Va]){var Ya=
qa.getBinding(u,E[Va],Va);P.push({name:Va,property:ea,binding:Ya})}}}return P};xh.prototype.setUniforms=function(u,E,P,ea){for(u=0;u<E.length;u+=1){var qa=E[u],xa=qa.name,Ea=qa.property;this.binders[Ea].setUniform(qa.binding,ea,P.get(Ea),xa)}};xh.prototype.updatePaintBuffers=function(u){this._buffers=[];for(var E in this.binders){var P=this.binders[E];u&&P instanceof Wg?(P=2===u.fromScale?P.zoomInPaintVertexBuffer:P.zoomOutPaintVertexBuffer)&&this._buffers.push(P):(P instanceof $h||P instanceof Zg)&&
P.paintVertexBuffer&&this._buffers.push(P.paintVertexBuffer)}};xh.prototype.upload=function(u){for(var E in this.binders){var P=this.binders[E];(P instanceof $h||P instanceof Zg||P instanceof Wg)&&P.upload(u)}this.updatePaintBuffers()};xh.prototype.destroy=function(){for(var u in this.binders){var E=this.binders[u];(E instanceof $h||E instanceof Zg||E instanceof Wg)&&E.destroy()}};var Gh=function(u,E,P,ea){void 0===ea&&(ea=function(){return!0});this.programConfigurations={};for(var qa=0;qa<E.length;qa+=
1){var xa=E[qa];this.programConfigurations[xa.id]=new xh(xa,P,ea,u)}this.needsUpload=!1;this._featureMap=new Oi;this._bufferOffset=0};Gh.prototype.populatePaintArrays=function(u,E,P,ea,qa,xa){for(var Ea in this.programConfigurations)this.programConfigurations[Ea].populatePaintArrays(u,E,ea,qa,xa);void 0!==E.id&&this._featureMap.add(E.id,P,this._bufferOffset,u);this._bufferOffset=u;this.needsUpload=!0};Gh.prototype.updatePaintArrays=function(u,E,P,ea){for(var qa=0;qa<P.length;qa+=1){var xa=P[qa];this.needsUpload=
this.programConfigurations[xa.id].updatePaintArrays(u,this._featureMap,E,xa,ea)||this.needsUpload}};Gh.prototype.get=function(u){return this.programConfigurations[u]};Gh.prototype.upload=function(u){if(this.needsUpload){for(var E in this.programConfigurations)this.programConfigurations[E].upload(u);this.needsUpload=!1}};Gh.prototype.destroy=function(){for(var u in this.programConfigurations)this.programConfigurations[u].destroy()};Ob("ConstantBinder",Qi);Ob("CrossFadedConstantBinder",ui);Ob("SourceExpressionBinder",
$h);Ob("CrossFadedCompositeBinder",Wg);Ob("CompositeExpressionBinder",Zg);Ob("ProgramConfiguration",xh,{omit:["_buffers"]});Ob("ProgramConfigurationSet",Gh);var zg={min:-1*Math.pow(2,14),max:Math.pow(2,14)-1},$g=function(u){this.zoom=u.zoom;this.overscaling=u.overscaling;this.layers=u.layers;this.layerIds=this.layers.map(function(E){return E.id});this.index=u.index;this.hasPattern=!1;this.layoutVertexArray=new qj;this.indexArray=new di;this.segments=new Vg;this.programConfigurations=new Gh(Mk,u.layers,
u.zoom);this.stateDependentLayerIds=this.layers.filter(function(E){return E.isStateDependent()}).map(function(E){return E.id})};$g.prototype.populate=function(u,E,P){var ea=this.layers[0],qa=[],xa=null;"circle"===ea.type&&(xa=ea.layout.get("circle-sort-key"));for(ea=0;ea<u.length;ea+=1){var Ea=u[ea],Va=Ea.feature,Ya=Ea.id,gb=Ea.index;Ea=Ea.sourceLayerIndex;var Fb=this.layers[0]._featureFilter.needGeometry,Sb={type:Va.type,id:Ya,properties:Va.properties,geometry:Fb?wc(Va):[]};this.layers[0]._featureFilter.filter(new Ag(this.zoom),
Sb,P)&&(Fb||(Sb.geometry=wc(Va)),Fb=xa?xa.evaluate(Sb,{},P):void 0,qa.push({id:Ya,properties:Va.properties,type:Va.type,sourceLayerIndex:Ea,index:gb,geometry:Sb.geometry,patterns:{},sortKey:Fb}))}xa&&qa.sort(function(jc,Dc){return jc.sortKey-Dc.sortKey});for(xa=0;xa<qa.length;xa+=1)gb=ea=qa[xa],Va=gb.geometry,Ya=gb.index,gb=gb.sourceLayerIndex,Ea=u[Ya].feature,this.addFeature(ea,Va,Ya,P),E.featureIndex.insert(Ea,Va,Ya,gb,this.index)};$g.prototype.update=function(u,E,P){this.stateDependentLayers.length&&
this.programConfigurations.updatePaintArrays(u,E,this.stateDependentLayers,P)};$g.prototype.isEmpty=function(){return 0===this.layoutVertexArray.length};$g.prototype.uploadPending=function(){return!this.uploaded||this.programConfigurations.needsUpload};$g.prototype.upload=function(u){this.uploaded||(this.layoutVertexBuffer=u.createVertexBuffer(this.layoutVertexArray,Mk),this.indexBuffer=u.createIndexBuffer(this.indexArray));this.programConfigurations.upload(u);this.uploaded=!0};$g.prototype.destroy=
function(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.programConfigurations.destroy(),this.segments.destroy())};$g.prototype.addFeature=function(u,E,P,ea){for(var qa=0;qa<E.length;qa+=1)for(var xa=0,Ea=E[qa];xa<Ea.length;xa+=1){var Va=Ea[xa],Ya=Va.x;Va=Va.y;if(!(0>Ya||8192<=Ya||0>Va||8192<=Va)){var gb=this.segments.prepareSegment(4,this.layoutVertexArray,this.indexArray,u.sortKey),Fb=gb.vertexLength;rc(this.layoutVertexArray,Ya,Va,-1,-1);rc(this.layoutVertexArray,
Ya,Va,1,-1);rc(this.layoutVertexArray,Ya,Va,1,1);rc(this.layoutVertexArray,Ya,Va,-1,1);this.indexArray.emplaceBack(Fb,Fb+1,Fb+2);this.indexArray.emplaceBack(Fb,Fb+3,Fb+2);gb.vertexLength+=4;gb.primitiveLength+=2}}this.programConfigurations.populatePaintArrays(this.layoutVertexArray.length,u,P,{},ea)};Ob("CircleBucket",$g,{omit:["layers"]});var Ei=new gh({"circle-sort-key":new pf(Da.layout_circle["circle-sort-key"])}),mi={paint:new gh({"circle-radius":new pf(Da.paint_circle["circle-radius"]),"circle-color":new pf(Da.paint_circle["circle-color"]),
"circle-blur":new pf(Da.paint_circle["circle-blur"]),"circle-opacity":new pf(Da.paint_circle["circle-opacity"]),"circle-translate":new Ze(Da.paint_circle["circle-translate"]),"circle-translate-anchor":new Ze(Da.paint_circle["circle-translate-anchor"]),"circle-pitch-scale":new Ze(Da.paint_circle["circle-pitch-scale"]),"circle-pitch-alignment":new Ze(Da.paint_circle["circle-pitch-alignment"]),"circle-stroke-width":new pf(Da.paint_circle["circle-stroke-width"]),"circle-stroke-color":new pf(Da.paint_circle["circle-stroke-color"]),
"circle-stroke-opacity":new pf(Da.paint_circle["circle-stroke-opacity"])}),layout:Ei},eh="undefined"!==typeof Float32Array?Float32Array:Array;Math.hypot||(Math.hypot=function(){for(var u=arguments,E=0,P=arguments.length;P--;)E+=u[P]*u[P];return Math.sqrt(E)});(function(){var u=Sg();return function(E,P,ea,qa,xa,Ea){P||(P=3);ea||(ea=0);for(qa=qa?Math.min(qa*P+ea,E.length):E.length;ea<qa;ea+=P)u[0]=E[ea],u[1]=E[ea+1],u[2]=E[ea+2],xa(u,u,Ea),E[ea]=u[0],E[ea+1]=u[1],E[ea+2]=u[2];return E}})();(function(){var u=
Og();return function(E,P,ea,qa,xa,Ea){P||(P=4);ea||(ea=0);for(qa=qa?Math.min(qa*P+ea,E.length):E.length;ea<qa;ea+=P)u[0]=E[ea],u[1]=E[ea+1],u[2]=E[ea+2],u[3]=E[ea+3],xa(u,u,Ea),E[ea]=u[0],E[ea+1]=u[1],E[ea+2]=u[2],E[ea+3]=u[3];return E}})();(function(){var u=Kh();return function(E,P,ea,qa,xa,Ea){P||(P=2);ea||(ea=0);for(qa=qa?Math.min(qa*P+ea,E.length):E.length;ea<qa;ea+=P)u[0]=E[ea],u[1]=E[ea+1],xa(u,u,Ea),E[ea]=u[0],E[ea+1]=u[1];return E}})();var bk=function(u){function E(P){u.call(this,P,mi)}u&&
(E.__proto__=u);E.prototype=Object.create(u&&u.prototype);E.prototype.constructor=E;E.prototype.createBucket=function(P){return new $g(P)};E.prototype.queryRadius=function(P){return Ve("circle-radius",this,P)+Ve("circle-stroke-width",this,P)+vf(this.paint.get("circle-translate"))};E.prototype.queryIntersectsFeature=function(P,ea,qa,xa,Ea,Va,Ya,gb){P=Oe(P,this.paint.get("circle-translate"),this.paint.get("circle-translate-anchor"),Va.angle,Ya);Ea=this.paint.get("circle-radius").evaluate(ea,qa);ea=
this.paint.get("circle-stroke-width").evaluate(ea,qa);qa=Ea+ea;P=(ea="map"===this.paint.get("circle-pitch-alignment"))?P:Yg(P,gb);Ya=ea?qa*Ya:qa;for(qa=0;qa<xa.length;qa+=1){Ea=0;for(var Fb=xa[qa];Ea<Fb.length;Ea+=1){var Sb=Fb[Ea],jc=ea?Sb:rh(Sb,gb),Dc=Ya;Sb=Ah([],[Sb.x,Sb.y,0,1],gb);"viewport"===this.paint.get("circle-pitch-scale")&&"map"===this.paint.get("circle-pitch-alignment")?Dc*=Sb[3]/Va.cameraToCenterDistance:"map"===this.paint.get("circle-pitch-scale")&&"viewport"===this.paint.get("circle-pitch-alignment")&&
(Dc*=Va.cameraToCenterDistance/Sb[3]);Sb=P;Dc=bf(Sb,jc)?!0:Wd(jc,Sb,Dc)?!0:!1;if(Dc)return!0}}return!1};return E}(li),ei=function(u){function E(){u.apply(this,arguments)}u&&(E.__proto__=u);E.prototype=Object.create(u&&u.prototype);return E.prototype.constructor=E}($g);Ob("HeatmapBucket",ei,{omit:["layers"]});var ri=function(u,E){sh(this,u,1,E)};ri.prototype.resize=function(u){ah(this,u,1)};ri.prototype.clone=function(){return new ri({width:this.width,height:this.height},new Uint8Array(this.data))};
ri.copy=function(u,E,P,ea,qa){bh(u,E,P,ea,qa,1)};var ag=function(u,E){sh(this,u,4,E)};ag.prototype.resize=function(u){ah(this,u,4)};ag.prototype.replace=function(u,E){E?this.data.set(u):this.data=u instanceof Uint8ClampedArray?new Uint8Array(u.buffer):u};ag.prototype.clone=function(){return new ag({width:this.width,height:this.height},new Uint8Array(this.data))};ag.copy=function(u,E,P,ea,qa){bh(u,E,P,ea,qa,4)};Ob("AlphaImage",ri);Ob("RGBAImage",ag);var Hh={paint:new gh({"heatmap-radius":new pf(Da.paint_heatmap["heatmap-radius"]),
"heatmap-weight":new pf(Da.paint_heatmap["heatmap-weight"]),"heatmap-intensity":new Ze(Da.paint_heatmap["heatmap-intensity"]),"heatmap-color":new Vj(Da.paint_heatmap["heatmap-color"]),"heatmap-opacity":new Ze(Da.paint_heatmap["heatmap-opacity"])})},yh=function(u){function E(P){u.call(this,P,Hh);this._updateColorRamp()}u&&(E.__proto__=u);E.prototype=Object.create(u&&u.prototype);E.prototype.constructor=E;E.prototype.createBucket=function(P){return new ei(P)};E.prototype._handleSpecialPaintPropertyUpdate=
function(P){"heatmap-color"===P&&this._updateColorRamp()};E.prototype._updateColorRamp=function(){this.colorRamp=Th(this._transitionablePaint._values["heatmap-color"].value.expression,"heatmapDensity");this.colorRampTexture=null};E.prototype.resize=function(){this.heatmapFbo&&(this.heatmapFbo.destroy(),this.heatmapFbo=null)};E.prototype.queryRadius=function(){return 0};E.prototype.queryIntersectsFeature=function(){return!1};E.prototype.hasOffscreenPass=function(){return 0!==this.paint.get("heatmap-opacity")&&
"none"!==this.visibility};return E}(li),rk={paint:new gh({"hillshade-illumination-direction":new Ze(Da.paint_hillshade["hillshade-illumination-direction"]),"hillshade-illumination-anchor":new Ze(Da.paint_hillshade["hillshade-illumination-anchor"]),"hillshade-exaggeration":new Ze(Da.paint_hillshade["hillshade-exaggeration"]),"hillshade-shadow-color":new Ze(Da.paint_hillshade["hillshade-shadow-color"]),"hillshade-highlight-color":new Ze(Da.paint_hillshade["hillshade-highlight-color"]),"hillshade-accent-color":new Ze(Da.paint_hillshade["hillshade-accent-color"])})},
ck=function(u){function E(P){u.call(this,P,rk)}u&&(E.__proto__=u);E.prototype=Object.create(u&&u.prototype);E.prototype.constructor=E;E.prototype.hasOffscreenPass=function(){return 0!==this.paint.get("hillshade-exaggeration")&&"none"!==this.visibility};return E}(li),dk=xb([{name:"a_pos",components:2,type:"Int16"}],4).members;ch.deviation=function(u,E,P,ea){var qa=E&&E.length,xa=Math.abs(vh(u,0,qa?E[0]*P:u.length,P));if(qa){qa=0;for(var Ea=E.length;qa<Ea;qa++)xa-=Math.abs(vh(u,E[qa]*P,qa<Ea-1?E[qa+
1]*P:u.length,P))}for(qa=E=0;qa<ea.length;qa+=3){Ea=ea[qa]*P;var Va=ea[qa+1]*P,Ya=ea[qa+2]*P;E+=Math.abs((u[Ea]-u[Ya])*(u[Va+1]-u[Ea+1])-(u[Ea]-u[Va])*(u[Ya+1]-u[Ea+1]))}return 0===xa&&0===E?0:Math.abs((E-xa)/xa)};ch.flatten=function(u){for(var E=u[0][0].length,P={vertices:[],holes:[],dimensions:E},ea=0,qa=0;qa<u.length;qa++){for(var xa=0;xa<u[qa].length;xa++)for(var Ea=0;Ea<E;Ea++)P.vertices.push(u[qa][xa][Ea]);0<qa&&(ea+=u[qa-1].length,P.holes.push(ea))}return P};ch.default=ch;var vi=function(u){this.zoom=
u.zoom;this.overscaling=u.overscaling;this.layers=u.layers;this.layerIds=this.layers.map(function(E){return E.id});this.index=u.index;this.hasPattern=!1;this.patternFeatures=[];this.layoutVertexArray=new qj;this.indexArray=new di;this.indexArray2=new oh;this.programConfigurations=new Gh(dk,u.layers,u.zoom);this.segments=new Vg;this.segments2=new Vg;this.stateDependentLayerIds=this.layers.filter(function(E){return E.isStateDependent()}).map(function(E){return E.id})};vi.prototype.populate=function(u,
E,P){this.hasPattern=jb("fill",this.layers,E);for(var ea=this.layers[0].layout.get("fill-sort-key"),qa=[],xa=0;xa<u.length;xa+=1){var Ea=u[xa],Va=Ea.feature,Ya=Ea.id,gb=Ea.index;Ea=Ea.sourceLayerIndex;var Fb=this.layers[0]._featureFilter.needGeometry,Sb={type:Va.type,id:Ya,properties:Va.properties,geometry:Fb?wc(Va):[]};this.layers[0]._featureFilter.filter(new Ag(this.zoom),Sb,P)&&(Fb||(Sb.geometry=wc(Va)),Fb=ea?ea.evaluate(Sb,{},P,E.availableImages):void 0,qa.push({id:Ya,properties:Va.properties,
type:Va.type,sourceLayerIndex:Ea,index:gb,geometry:Sb.geometry,patterns:{},sortKey:Fb}))}ea&&qa.sort(function(jc,Dc){return jc.sortKey-Dc.sortKey});for(ea=0;ea<qa.length;ea+=1)gb=Ya=qa[ea],xa=gb.geometry,Va=gb.index,gb=gb.sourceLayerIndex,this.hasPattern?(Ya=Bb("fill",this.layers,Ya,this.zoom,E),this.patternFeatures.push(Ya)):this.addFeature(Ya,xa,Va,P,{}),E.featureIndex.insert(u[Va].feature,xa,Va,gb,this.index)};vi.prototype.update=function(u,E,P){this.stateDependentLayers.length&&this.programConfigurations.updatePaintArrays(u,
E,this.stateDependentLayers,P)};vi.prototype.addFeatures=function(u,E,P){u=0;for(var ea=this.patternFeatures;u<ea.length;u+=1){var qa=ea[u];this.addFeature(qa,qa.geometry,qa.index,E,P)}};vi.prototype.isEmpty=function(){return 0===this.layoutVertexArray.length};vi.prototype.uploadPending=function(){return!this.uploaded||this.programConfigurations.needsUpload};vi.prototype.upload=function(u){this.uploaded||(this.layoutVertexBuffer=u.createVertexBuffer(this.layoutVertexArray,dk),this.indexBuffer=u.createIndexBuffer(this.indexArray),
this.indexBuffer2=u.createIndexBuffer(this.indexArray2));this.programConfigurations.upload(u);this.uploaded=!0};vi.prototype.destroy=function(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.indexBuffer2.destroy(),this.programConfigurations.destroy(),this.segments.destroy(),this.segments2.destroy())};vi.prototype.addFeature=function(u,E,P,ea,qa){var xa=0;for(E=Sa(E,500);xa<E.length;xa+=1){for(var Ea=E[xa],Va=0,Ya=0,gb=Ea;Ya<gb.length;Ya+=1)Va+=gb[Ya].length;
Ya=this.segments.prepareSegment(Va,this.layoutVertexArray,this.indexArray);gb=Ya.vertexLength;for(var Fb=[],Sb=[],jc=0,Dc=Ea;jc<Dc.length;jc+=1){var xc=Dc[jc];if(0!==xc.length){xc!==Ea[0]&&Sb.push(Fb.length/2);var Hc=this.segments2.prepareSegment(xc.length,this.layoutVertexArray,this.indexArray2),vd=Hc.vertexLength;this.layoutVertexArray.emplaceBack(xc[0].x,xc[0].y);this.indexArray2.emplaceBack(vd+xc.length-1,vd);Fb.push(xc[0].x);Fb.push(xc[0].y);for(var ce=1;ce<xc.length;ce++)this.layoutVertexArray.emplaceBack(xc[ce].x,
xc[ce].y),this.indexArray2.emplaceBack(vd+ce-1,vd+ce),Fb.push(xc[ce].x),Fb.push(xc[ce].y);Hc.vertexLength+=xc.length;Hc.primitiveLength+=xc.length}}Ea=ch(Fb,Sb);for(Fb=0;Fb<Ea.length;Fb+=3)this.indexArray.emplaceBack(gb+Ea[Fb],gb+Ea[Fb+1],gb+Ea[Fb+2]);Ya.vertexLength+=Va;Ya.primitiveLength+=Ea.length/3}this.programConfigurations.populatePaintArrays(this.layoutVertexArray.length,u,P,qa,ea)};Ob("FillBucket",vi,{omit:["layers","patternFeatures"]});var jl=new gh({"fill-sort-key":new pf(Da.layout_fill["fill-sort-key"])}),
kl={paint:new gh({"fill-antialias":new Ze(Da.paint_fill["fill-antialias"]),"fill-opacity":new pf(Da.paint_fill["fill-opacity"]),"fill-color":new pf(Da.paint_fill["fill-color"]),"fill-outline-color":new pf(Da.paint_fill["fill-outline-color"]),"fill-translate":new Ze(Da.paint_fill["fill-translate"]),"fill-translate-anchor":new Ze(Da.paint_fill["fill-translate-anchor"]),"fill-pattern":new Ph(Da.paint_fill["fill-pattern"])}),layout:jl},ll=function(u){function E(P){u.call(this,P,kl)}u&&(E.__proto__=u);
E.prototype=Object.create(u&&u.prototype);E.prototype.constructor=E;E.prototype.recalculate=function(P,ea){u.prototype.recalculate.call(this,P,ea);P=this.paint._values["fill-outline-color"];"constant"===P.value.kind&&void 0===P.value.value&&(this.paint._values["fill-outline-color"]=this.paint._values["fill-color"])};E.prototype.createBucket=function(P){return new vi(P)};E.prototype.queryRadius=function(){return vf(this.paint.get("fill-translate"))};E.prototype.queryIntersectsFeature=function(P,ea,
qa,xa,Ea,Va,Ya){P=Oe(P,this.paint.get("fill-translate"),this.paint.get("fill-translate-anchor"),Va.angle,Ya);return ud(P,xa)};E.prototype.isTileClipped=function(){return!0};return E}(li),ni=xb([{name:"a_pos",components:2,type:"Int16"},{name:"a_normal_ed",components:4,type:"Int16"}],4).members;Xb.types=["Unknown","Point","LineString","Polygon"];Xb.prototype.loadGeometry=function(){var u=this._pbf;u.pos=this._geometry;for(var E=u.readVarint()+u.pos,P=1,ea=0,qa=0,xa=0,Ea=[],Va;u.pos<E;)if(0>=ea&&(ea=
u.readVarint(),P=ea&7,ea>>=3),ea--,1===P||2===P)qa+=u.readSVarint(),xa+=u.readSVarint(),1===P&&(Va&&Ea.push(Va),Va=[]),Va.push(new af(qa,xa));else if(7===P)Va&&Va.push(Va[0].clone());else throw Error("unknown command "+P);Va&&Ea.push(Va);return Ea};Xb.prototype.bbox=function(){var u=this._pbf;u.pos=this._geometry;for(var E=u.readVarint()+u.pos,P=1,ea=0,qa=0,xa=0,Ea=Infinity,Va=-Infinity,Ya=Infinity,gb=-Infinity;u.pos<E;)if(0>=ea&&(ea=u.readVarint(),P=ea&7,ea>>=3),ea--,1===P||2===P)qa+=u.readSVarint(),
xa+=u.readSVarint(),qa<Ea&&(Ea=qa),qa>Va&&(Va=qa),xa<Ya&&(Ya=xa),xa>gb&&(gb=xa);else if(7!==P)throw Error("unknown command "+P);return[Ea,Ya,Va,gb]};Xb.prototype.toGeoJSON=function(u,E,P){function ea(Ya){for(var gb=0;gb<Ya.length;gb++){var Fb=Ya[gb];Ya[gb]=[360*(Fb.x+xa)/qa-180,360/Math.PI*Math.atan(Math.exp((180-360*(Fb.y+Ea)/qa)*Math.PI/180))-90]}}var qa=this.extent*Math.pow(2,P),xa=this.extent*u,Ea=this.extent*E;u=this.loadGeometry();E=Xb.types[this.type];switch(this.type){case 1:var Va=[];for(P=
0;P<u.length;P++)Va[P]=u[P][0];u=Va;ea(u);break;case 2:for(P=0;P<u.length;P++)ea(u[P]);break;case 3:for(u=gc(u),P=0;P<u.length;P++)for(Va=0;Va<u[P].length;Va++)ea(u[P][Va])}1===u.length?u=u[0]:E="Multi"+E;u={type:"Feature",geometry:{type:E,coordinates:u},properties:this.properties};"id"in this&&(u.id=this.id);return u};var Tj=hc;hc.prototype.feature=function(u){if(0>u||u>=this._features.length)throw Error("feature index out of bounds");this._pbf.pos=this._features[u];u=this._pbf.readVarint()+this._pbf.pos;
return new Xb(this._pbf,u,this.extent,this._keys,this._values)};var Jj={VectorTile:function(u,E){this.layers=u.readFields(Ec,{},E)},VectorTileFeature:Xb,VectorTileLayer:Tj},$k=Jj.VectorTileFeature.types,zk=Math.pow(2,13),wi=function(u){this.zoom=u.zoom;this.overscaling=u.overscaling;this.layers=u.layers;this.layerIds=this.layers.map(function(E){return E.id});this.index=u.index;this.hasPattern=!1;this.layoutVertexArray=new jk;this.indexArray=new di;this.programConfigurations=new Gh(ni,u.layers,u.zoom);
this.segments=new Vg;this.stateDependentLayerIds=this.layers.filter(function(E){return E.isStateDependent()}).map(function(E){return E.id})};wi.prototype.populate=function(u,E,P){this.features=[];this.hasPattern=jb("fill-extrusion",this.layers,E);for(var ea=0;ea<u.length;ea+=1){var qa=u[ea],xa=qa.feature,Ea=qa.id,Va=qa.index;qa=qa.sourceLayerIndex;var Ya=this.layers[0]._featureFilter.needGeometry,gb={type:xa.type,id:Ea,properties:xa.properties,geometry:Ya?wc(xa):[]};this.layers[0]._featureFilter.filter(new Ag(this.zoom),
gb,P)&&(Ea={id:Ea,sourceLayerIndex:qa,index:Va,geometry:Ya?gb.geometry:wc(xa),properties:xa.properties,type:xa.type,patterns:{}},"undefined"!==typeof xa.id&&(Ea.id=xa.id),this.hasPattern?this.features.push(Bb("fill-extrusion",this.layers,Ea,this.zoom,E)):this.addFeature(Ea,Ea.geometry,Va,P,{}),E.featureIndex.insert(xa,Ea.geometry,Va,qa,this.index,!0))}};wi.prototype.addFeatures=function(u,E,P){u=0;for(var ea=this.features;u<ea.length;u+=1){var qa=ea[u];this.addFeature(qa,qa.geometry,qa.index,E,P)}};
wi.prototype.update=function(u,E,P){this.stateDependentLayers.length&&this.programConfigurations.updatePaintArrays(u,E,this.stateDependentLayers,P)};wi.prototype.isEmpty=function(){return 0===this.layoutVertexArray.length};wi.prototype.uploadPending=function(){return!this.uploaded||this.programConfigurations.needsUpload};wi.prototype.upload=function(u){this.uploaded||(this.layoutVertexBuffer=u.createVertexBuffer(this.layoutVertexArray,ni),this.indexBuffer=u.createIndexBuffer(this.indexArray));this.programConfigurations.upload(u);
this.uploaded=!0};wi.prototype.destroy=function(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.programConfigurations.destroy(),this.segments.destroy())};wi.prototype.addFeature=function(u,E,P,ea,qa){var xa=0;for(E=Sa(E,500);xa<E.length;xa+=1){for(var Ea=E[xa],Va=0,Ya=0,gb=Ea;Ya<gb.length;Ya+=1)Va+=gb[Ya].length;Ya=this.segments.prepareSegment(4,this.layoutVertexArray,this.indexArray);gb=0;for(var Fb=Ea;gb<Fb.length;gb+=1){var Sb=Fb[gb];if(0!==Sb.length&&
!Dd(Sb))for(var jc=0,Dc=0;Dc<Sb.length;Dc++){var xc=Sb[Dc];if(1<=Dc){var Hc=Sb[Dc-1];if(!(xc.x===Hc.x&&(0>xc.x||8192<xc.x)||xc.y===Hc.y&&(0>xc.y||8192<xc.y))){Ya.vertexLength+4>Vg.MAX_VERTEX_ARRAY_LENGTH&&(Ya=this.segments.prepareSegment(4,this.layoutVertexArray,this.indexArray));var vd=xc.sub(Hc)._perp()._unit(),ce=Hc.dist(xc);32768<jc+ce&&(jc=0);ld(this.layoutVertexArray,xc.x,xc.y,vd.x,vd.y,0,0,jc);ld(this.layoutVertexArray,xc.x,xc.y,vd.x,vd.y,0,1,jc);jc+=ce;ld(this.layoutVertexArray,Hc.x,Hc.y,
vd.x,vd.y,0,0,jc);ld(this.layoutVertexArray,Hc.x,Hc.y,vd.x,vd.y,0,1,jc);xc=Ya.vertexLength;this.indexArray.emplaceBack(xc,xc+2,xc+1);this.indexArray.emplaceBack(xc+1,xc+2,xc+3);Ya.vertexLength+=4;Ya.primitiveLength+=2}}}}Ya.vertexLength+Va>Vg.MAX_VERTEX_ARRAY_LENGTH&&(Ya=this.segments.prepareSegment(Va,this.layoutVertexArray,this.indexArray));if("Polygon"===$k[u.type]){Fb=[];Sb=[];gb=Ya.vertexLength;jc=0;for(Dc=Ea;jc<Dc.length;jc+=1)if(xc=Dc[jc],0!==xc.length)for(xc!==Ea[0]&&Sb.push(Fb.length/2),
Hc=0;Hc<xc.length;Hc++)vd=xc[Hc],ld(this.layoutVertexArray,vd.x,vd.y,0,0,1,1,0),Fb.push(vd.x),Fb.push(vd.y);Ea=ch(Fb,Sb);for(Fb=0;Fb<Ea.length;Fb+=3)this.indexArray.emplaceBack(gb+Ea[Fb],gb+Ea[Fb+2],gb+Ea[Fb+1]);Ya.primitiveLength+=Ea.length/3;Ya.vertexLength+=Va}}this.programConfigurations.populatePaintArrays(this.layoutVertexArray.length,u,P,qa,ea)};Ob("FillExtrusionBucket",wi,{omit:["layers","features"]});var ml={paint:new gh({"fill-extrusion-opacity":new Ze(Da["paint_fill-extrusion"]["fill-extrusion-opacity"]),
"fill-extrusion-color":new pf(Da["paint_fill-extrusion"]["fill-extrusion-color"]),"fill-extrusion-translate":new Ze(Da["paint_fill-extrusion"]["fill-extrusion-translate"]),"fill-extrusion-translate-anchor":new Ze(Da["paint_fill-extrusion"]["fill-extrusion-translate-anchor"]),"fill-extrusion-pattern":new Ph(Da["paint_fill-extrusion"]["fill-extrusion-pattern"]),"fill-extrusion-height":new pf(Da["paint_fill-extrusion"]["fill-extrusion-height"]),"fill-extrusion-base":new pf(Da["paint_fill-extrusion"]["fill-extrusion-base"]),
"fill-extrusion-vertical-gradient":new Ze(Da["paint_fill-extrusion"]["fill-extrusion-vertical-gradient"])})},nl=function(u){function E(P){u.call(this,P,ml)}u&&(E.__proto__=u);E.prototype=Object.create(u&&u.prototype);E.prototype.constructor=E;E.prototype.createBucket=function(P){return new wi(P)};E.prototype.queryRadius=function(){return vf(this.paint.get("fill-extrusion-translate"))};E.prototype.is3D=function(){return!0};E.prototype.queryIntersectsFeature=function(P,ea,qa,xa,Ea,Va,Ya,gb){P=Oe(P,
this.paint.get("fill-extrusion-translate"),this.paint.get("fill-extrusion-translate-anchor"),Va.angle,Ya);var Fb=this.paint.get("fill-extrusion-height").evaluate(ea,qa),Sb=this.paint.get("fill-extrusion-base").evaluate(ea,qa);ea=[];for(qa=0;qa<P.length;qa+=1)Ea=P[qa],Ea=[Ea.x,Ea.y,0,1],Ah(Ea,Ea,gb),ea.push(new af(Ea[0]/Ea[3],Ea[1]/Ea[3]));P=[];qa=[];Ea=gb[8]*Sb;Va=gb[9]*Sb;Ya=gb[10]*Sb;Sb*=gb[11];var jc=gb[8]*Fb,Dc=gb[9]*Fb,xc=gb[10]*Fb;Fb*=gb[11];for(var Hc=0;Hc<xa.length;Hc+=1){for(var vd=[],ce=
[],Ed=0,Kd=xa[Hc];Ed<Kd.length;Ed+=1){var fe=Kd[Ed],te=fe.x,Me=fe.y;fe=gb[0]*te+gb[4]*Me+gb[12];var ue=gb[1]*te+gb[5]*Me+gb[13],lf=gb[2]*te+gb[6]*Me+gb[14],Xe=gb[3]*te+gb[7]*Me+gb[15];te=lf+Ya;Me=Xe+Sb;var Ye=fe+jc,of=ue+Dc;lf+=xc;Xe+=Fb;fe=new af((fe+Ea)/Me,(ue+Va)/Me);fe.z=te/Me;vd.push(fe);fe=new af(Ye/Xe,of/Xe);fe.z=lf/Xe;ce.push(fe)}P.push(vd);qa.push(ce)}gb=[P,qa];xa=gb[0];gb=gb[1];P=Infinity;ud(ea,gb)&&(P=ze(ea,gb[0]));for(qa=0;qa<gb.length;qa++)for(Ea=gb[qa],Va=xa[qa],Ya=0;Ya<Ea.length-1;Ya++)Sb=
Ea[Ya],Sb=[Sb,Ea[Ya+1],Va[Ya+1],Va[Ya],Sb],pc(ea,Sb)&&(P=Math.min(P,ze(ea,Sb)));return Infinity===P?!1:P};return E}(li),al=xb([{name:"a_pos_normal",components:2,type:"Int16"},{name:"a_data",components:4,type:"Uint8"}],4).members,sk=Jj.VectorTileFeature.types,Nk=Math.cos(Math.PI/180*37.5),Pf=Math.pow(2,14)/.5,tg=function(u){this.zoom=u.zoom;this.overscaling=u.overscaling;this.layers=u.layers;this.layerIds=this.layers.map(function(E){return E.id});this.index=u.index;this.hasPattern=!1;this.patternFeatures=
[];this.layoutVertexArray=new kk;this.indexArray=new di;this.programConfigurations=new Gh(al,u.layers,u.zoom);this.segments=new Vg;this.stateDependentLayerIds=this.layers.filter(function(E){return E.isStateDependent()}).map(function(E){return E.id})};tg.prototype.populate=function(u,E,P){this.hasPattern=jb("line",this.layers,E);for(var ea=this.layers[0].layout.get("line-sort-key"),qa=[],xa=0;xa<u.length;xa+=1){var Ea=u[xa],Va=Ea.feature,Ya=Ea.id,gb=Ea.index;Ea=Ea.sourceLayerIndex;var Fb=this.layers[0]._featureFilter.needGeometry,
Sb={type:Va.type,id:Ya,properties:Va.properties,geometry:Fb?wc(Va):[]};this.layers[0]._featureFilter.filter(new Ag(this.zoom),Sb,P)&&(Fb||(Sb.geometry=wc(Va)),Fb=ea?ea.evaluate(Sb,{},P):void 0,qa.push({id:Ya,properties:Va.properties,type:Va.type,sourceLayerIndex:Ea,index:gb,geometry:Sb.geometry,patterns:{},sortKey:Fb}))}ea&&qa.sort(function(jc,Dc){return jc.sortKey-Dc.sortKey});for(ea=0;ea<qa.length;ea+=1)gb=Ya=qa[ea],xa=gb.geometry,Va=gb.index,gb=gb.sourceLayerIndex,this.hasPattern?(Ya=Bb("line",
this.layers,Ya,this.zoom,E),this.patternFeatures.push(Ya)):this.addFeature(Ya,xa,Va,P,{}),E.featureIndex.insert(u[Va].feature,xa,Va,gb,this.index)};tg.prototype.update=function(u,E,P){this.stateDependentLayers.length&&this.programConfigurations.updatePaintArrays(u,E,this.stateDependentLayers,P)};tg.prototype.addFeatures=function(u,E,P){u=0;for(var ea=this.patternFeatures;u<ea.length;u+=1){var qa=ea[u];this.addFeature(qa,qa.geometry,qa.index,E,P)}};tg.prototype.isEmpty=function(){return 0===this.layoutVertexArray.length};
tg.prototype.uploadPending=function(){return!this.uploaded||this.programConfigurations.needsUpload};tg.prototype.upload=function(u){this.uploaded||(this.layoutVertexBuffer=u.createVertexBuffer(this.layoutVertexArray,al),this.indexBuffer=u.createIndexBuffer(this.indexArray));this.programConfigurations.upload(u);this.uploaded=!0};tg.prototype.destroy=function(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.programConfigurations.destroy(),this.segments.destroy())};
tg.prototype.addFeature=function(u,E,P,ea,qa){var xa=this.layers[0].layout,Ea=xa.get("line-join").evaluate(u,{}),Va=xa.get("line-cap"),Ya=xa.get("line-miter-limit");xa=xa.get("line-round-limit");for(var gb=0;gb<E.length;gb+=1)this.addLine(E[gb],u,Ea,Va,Ya,xa);this.programConfigurations.populatePaintArrays(this.layoutVertexArray.length,u,P,qa,ea)};tg.prototype.addLine=function(u,E,P,ea,qa,xa){this.totalDistance=this.scaledDistance=this.distance=0;if(E.properties&&E.properties.hasOwnProperty("mapbox_clip_start")&&
E.properties.hasOwnProperty("mapbox_clip_end")){this.clipStart=+E.properties.mapbox_clip_start;this.clipEnd=+E.properties.mapbox_clip_end;for(var Ea=0;Ea<u.length-1;Ea++)this.totalDistance+=u[Ea].dist(u[Ea+1]);this.updateScaledDistance()}E="Polygon"===sk[E.type];for(Ea=u.length;2<=Ea&&u[Ea-1].equals(u[Ea-2]);)Ea--;for(var Va=0;Va<Ea-1&&u[Va].equals(u[Va+1]);)Va++;if(!(Ea<(E?3:2))){"bevel"===P&&(qa=1.05);var Ya=16>=this.overscaling?122880/(512*this.overscaling):0,gb=this.segments.prepareSegment(10*
Ea,this.layoutVertexArray,this.indexArray),Fb=void 0,Sb=void 0,jc=void 0;this.e1=this.e2=-1;if(E){var Dc=u[Ea-2];jc=u[Va].sub(Dc)._unit()._perp()}for(var xc=Va;xc<Ea;xc++){var Hc=xc===Ea-1?E?u[Va+1]:void 0:u[xc+1];if(!Hc||!u[xc].equals(Hc)){jc&&(Sb=jc);Dc&&(Fb=Dc);Dc=u[xc];jc=Hc?Hc.sub(Dc)._unit()._perp():Sb;Sb=Sb||jc;var vd=Sb.add(jc);0===vd.x&&0===vd.y||vd._unit();var ce=Sb.x*jc.x+Sb.y*jc.y,Ed=vd.x*jc.x+vd.y*jc.y,Kd=0!==Ed?1/Ed:Infinity,fe=2*Math.sqrt(2-2*Ed);Ed=Ed<Nk&&Fb&&Hc;var te=0<Sb.x*jc.y-
Sb.y*jc.x;if(Ed&&xc>Va){var Me=Dc.dist(Fb);Me>2*Ya&&(Me=Dc.sub(Dc.sub(Fb)._mult(Ya/Me)._round()),this.updateDistance(Fb,Me),this.addCurrentVertex(Me,Sb,0,0,gb),Fb=Me)}var ue=Fb&&Hc;Me=ue?P:E?"butt":ea;ue&&"round"===Me&&(Kd<xa?Me="miter":2>=Kd&&(Me="fakeround"));"miter"===Me&&Kd>qa&&(Me="bevel");"bevel"===Me&&(2<Kd&&(Me="flipbevel"),Kd<qa&&(Me="miter"));Fb&&this.updateDistance(Fb,Dc);if("miter"===Me)vd._mult(Kd),this.addCurrentVertex(Dc,vd,0,0,gb);else if("flipbevel"===Me)100<Kd?vd=jc.mult(-1):(ce=
Kd*Sb.add(jc).mag()/Sb.sub(jc).mag(),vd._perp()._mult(ce*(te?-1:1))),this.addCurrentVertex(Dc,vd,0,0,gb),this.addCurrentVertex(Dc,vd.mult(-1),0,0,gb);else if("bevel"===Me||"fakeround"===Me){Kd=-Math.sqrt(Kd*Kd-1);vd=te?Kd:0;Kd=te?0:Kd;Fb&&this.addCurrentVertex(Dc,Sb,vd,Kd,gb);if("fakeround"===Me)for(fe=Math.round(180*fe/Math.PI/20),Me=1;Me<fe;Me++){ue=Me/fe;if(.5!==ue){var lf=ue-.5;ue+=ue*lf*(ue-1)*((1.0904+ce*(-3.2452+ce*(3.55645-1.43519*ce)))*lf*lf+(.848013+ce*(-1.06021+.215638*ce)))}ue=jc.sub(Sb)._mult(ue)._add(Sb)._unit()._mult(te?
-1:1);this.addHalfVertex(Dc,ue.x,ue.y,!1,te,0,gb)}Hc&&this.addCurrentVertex(Dc,jc,-vd,-Kd,gb)}else"butt"===Me?this.addCurrentVertex(Dc,vd,0,0,gb):"square"===Me?(ce=Fb?1:-1,this.addCurrentVertex(Dc,vd,ce,ce,gb)):"round"===Me&&(Fb&&(this.addCurrentVertex(Dc,Sb,0,0,gb),this.addCurrentVertex(Dc,Sb,1,1,gb,!0)),Hc&&(this.addCurrentVertex(Dc,jc,-1,-1,gb,!0),this.addCurrentVertex(Dc,jc,0,0,gb)));Ed&&xc<Ea-1&&(Ed=Dc.dist(Hc),Ed>2*Ya&&(Hc=Dc.add(Hc.sub(Dc)._mult(Ya/Ed)._round()),this.updateDistance(Dc,Hc),
this.addCurrentVertex(Hc,jc,0,0,gb),Dc=Hc))}}}};tg.prototype.addCurrentVertex=function(u,E,P,ea,qa,xa){void 0===xa&&(xa=!1);var Ea=-E.x+E.y*ea,Va=-E.y-E.x*ea;this.addHalfVertex(u,E.x+E.y*P,E.y-E.x*P,xa,!1,P,qa);this.addHalfVertex(u,Ea,Va,xa,!0,-ea,qa);this.distance>Pf/2&&0===this.totalDistance&&(this.distance=0,this.addCurrentVertex(u,E,P,ea,qa,xa))};tg.prototype.addHalfVertex=function(u,E,P,ea,qa,xa,Ea){var Va=.5*this.scaledDistance;this.layoutVertexArray.emplaceBack((u.x<<1)+(ea?1:0),(u.y<<1)+(qa?
1:0),Math.round(63*E)+128,Math.round(63*P)+128,(0===xa?0:0>xa?-1:1)+1|(Va&63)<<2,Va>>6);u=Ea.vertexLength++;0<=this.e1&&0<=this.e2&&(this.indexArray.emplaceBack(this.e1,this.e2,u),Ea.primitiveLength++);qa?this.e2=u:this.e1=u};tg.prototype.updateScaledDistance=function(){this.scaledDistance=0<this.totalDistance?(this.clipStart+(this.clipEnd-this.clipStart)*this.distance/this.totalDistance)*(Pf-1):this.distance};tg.prototype.updateDistance=function(u,E){this.distance+=u.dist(E);this.updateScaledDistance()};
Ob("LineBucket",tg,{omit:["layers","patternFeatures"]});var hh=new gh({"line-cap":new Ze(Da.layout_line["line-cap"]),"line-join":new pf(Da.layout_line["line-join"]),"line-miter-limit":new Ze(Da.layout_line["line-miter-limit"]),"line-round-limit":new Ze(Da.layout_line["line-round-limit"]),"line-sort-key":new pf(Da.layout_line["line-sort-key"])}),zh={paint:new gh({"line-opacity":new pf(Da.paint_line["line-opacity"]),"line-color":new pf(Da.paint_line["line-color"]),"line-translate":new Ze(Da.paint_line["line-translate"]),
"line-translate-anchor":new Ze(Da.paint_line["line-translate-anchor"]),"line-width":new pf(Da.paint_line["line-width"]),"line-gap-width":new pf(Da.paint_line["line-gap-width"]),"line-offset":new pf(Da.paint_line["line-offset"]),"line-blur":new pf(Da.paint_line["line-blur"]),"line-dasharray":new Fj(Da.paint_line["line-dasharray"]),"line-pattern":new Ph(Da.paint_line["line-pattern"]),"line-gradient":new Vj(Da.paint_line["line-gradient"])}),layout:hh},gj=new (function(u){function E(){u.apply(this,arguments)}
u&&(E.__proto__=u);E.prototype=Object.create(u&&u.prototype);E.prototype.constructor=E;E.prototype.possiblyEvaluate=function(P,ea){ea=new Ag(Math.floor(ea.zoom),{now:ea.now,fadeDuration:ea.fadeDuration,zoomHistory:ea.zoomHistory,transition:ea.transition});return u.prototype.possiblyEvaluate.call(this,P,ea)};E.prototype.evaluate=function(P,ea,qa,xa){ea=f({},ea,{zoom:Math.floor(ea.zoom)});return u.prototype.evaluate.call(this,P,ea,qa,xa)};return E}(pf))(zh.paint.properties["line-width"].specification);
gj.useIntegerZoom=!0;var Ok=function(u){function E(P){u.call(this,P,zh)}u&&(E.__proto__=u);E.prototype=Object.create(u&&u.prototype);E.prototype.constructor=E;E.prototype._handleSpecialPaintPropertyUpdate=function(P){"line-gradient"===P&&this._updateGradient()};E.prototype._updateGradient=function(){this.gradient=Th(this._transitionablePaint._values["line-gradient"].value.expression,"lineProgress");this.gradientTexture=null};E.prototype.recalculate=function(P,ea){u.prototype.recalculate.call(this,
P,ea);this.paint._values["line-floorwidth"]=gj.possiblyEvaluate(this._transitioningPaint._values["line-width"].value,P)};E.prototype.createBucket=function(P){return new tg(P)};E.prototype.queryRadius=function(P){var ea=Ve("line-width",this,P);var qa=Ve("line-gap-width",this,P);ea=0<qa?qa+2*ea:ea;P=Ve("line-offset",this,P);return ea/2+Math.abs(P)+vf(this.paint.get("line-translate"))};E.prototype.queryIntersectsFeature=function(P,ea,qa,xa,Ea,Va,Ya){P=Oe(P,this.paint.get("line-translate"),this.paint.get("line-translate-anchor"),
Va.angle,Ya);Ea=this.paint.get("line-width").evaluate(ea,qa);Va=this.paint.get("line-gap-width").evaluate(ea,qa);Ea=Ya/2*(0<Va?Va+2*Ea:Ea);if(ea=this.paint.get("line-offset").evaluate(ea,qa)){Ya*=ea;ea=[];qa=new af(0,0);for(Va=0;Va<xa.length;Va++){for(var gb=xa[Va],Fb=[],Sb=0;Sb<gb.length;Sb++){var jc=gb[Sb-1],Dc=gb[Sb],xc=gb[Sb+1];jc=0===Sb?qa:Dc.sub(jc)._unit()._perp();xc=Sb===gb.length-1?qa:xc.sub(Dc)._unit()._perp();jc=jc._add(xc)._unit();jc._mult(1/(jc.x*xc.x+jc.y*xc.y));Fb.push(jc._mult(Ya)._add(Dc))}ea.push(Fb)}xa=
ea}a:{for(Ya=0;Ya<xa.length;Ya++){qa=xa[Ya];if(3<=P.length)for(ea=0;ea<qa.length;ea++)if(bf(P,qa[ea])){P=!0;break a}b:{ea=P;Va=Ea;if(1<ea.length){if(ae(ea,qa)){ea=!0;break b}for(gb=0;gb<qa.length;gb++)if(Wd(qa[gb],ea,Va)){ea=!0;break b}}for(gb=0;gb<ea.length;gb++)if(Wd(ea[gb],qa,Va)){ea=!0;break b}ea=!1}if(ea){P=!0;break a}}P=!1}return P};E.prototype.isTileClipped=function(){return!0};return E}(li),ih=xb([{name:"a_pos_offset",components:4,type:"Int16"},{name:"a_data",components:4,type:"Uint16"},{name:"a_pixeloffset",
components:4,type:"Int16"}],4),tk=xb([{name:"a_projected_pos",components:3,type:"Float32"}],4);xb([{name:"a_fade_opacity",components:1,type:"Uint32"}],4);var Kj=xb([{name:"a_placed",components:2,type:"Uint8"},{name:"a_shift",components:2,type:"Float32"}]);xb([{type:"Int16",name:"anchorPointX"},{type:"Int16",name:"anchorPointY"},{type:"Int16",name:"x1"},{type:"Int16",name:"y1"},{type:"Int16",name:"x2"},{type:"Int16",name:"y2"},{type:"Uint32",name:"featureIndex"},{type:"Uint16",name:"sourceLayerIndex"},
{type:"Uint16",name:"bucketIndex"}]);var Lj=xb([{name:"a_pos",components:2,type:"Int16"},{name:"a_anchor_pos",components:2,type:"Int16"},{name:"a_extrude",components:2,type:"Int16"}],4),Mj=xb([{name:"a_pos",components:2,type:"Float32"},{name:"a_radius",components:1,type:"Float32"},{name:"a_flags",components:2,type:"Int16"}],4);xb([{name:"triangle",components:3,type:"Uint16"}]);xb([{type:"Int16",name:"anchorX"},{type:"Int16",name:"anchorY"},{type:"Uint16",name:"glyphStartIndex"},{type:"Uint16",name:"numGlyphs"},
{type:"Uint32",name:"vertexStartIndex"},{type:"Uint32",name:"lineStartIndex"},{type:"Uint32",name:"lineLength"},{type:"Uint16",name:"segment"},{type:"Uint16",name:"lowerSize"},{type:"Uint16",name:"upperSize"},{type:"Float32",name:"lineOffsetX"},{type:"Float32",name:"lineOffsetY"},{type:"Uint8",name:"writingMode"},{type:"Uint8",name:"placedOrientation"},{type:"Uint8",name:"hidden"},{type:"Uint32",name:"crossTileID"},{type:"Int16",name:"associatedIconIndex"}]);xb([{type:"Int16",name:"anchorX"},{type:"Int16",
name:"anchorY"},{type:"Int16",name:"rightJustifiedTextSymbolIndex"},{type:"Int16",name:"centerJustifiedTextSymbolIndex"},{type:"Int16",name:"leftJustifiedTextSymbolIndex"},{type:"Int16",name:"verticalPlacedTextSymbolIndex"},{type:"Int16",name:"placedIconSymbolIndex"},{type:"Int16",name:"verticalPlacedIconSymbolIndex"},{type:"Uint16",name:"key"},{type:"Uint16",name:"textBoxStartIndex"},{type:"Uint16",name:"textBoxEndIndex"},{type:"Uint16",name:"verticalTextBoxStartIndex"},{type:"Uint16",name:"verticalTextBoxEndIndex"},
{type:"Uint16",name:"iconBoxStartIndex"},{type:"Uint16",name:"iconBoxEndIndex"},{type:"Uint16",name:"verticalIconBoxStartIndex"},{type:"Uint16",name:"verticalIconBoxEndIndex"},{type:"Uint16",name:"featureIndex"},{type:"Uint16",name:"numHorizontalGlyphVertices"},{type:"Uint16",name:"numVerticalGlyphVertices"},{type:"Uint16",name:"numIconVertices"},{type:"Uint16",name:"numVerticalIconVertices"},{type:"Uint16",name:"useRuntimeCollisionCircles"},{type:"Uint32",name:"crossTileID"},{type:"Float32",name:"textBoxScale"},
{type:"Float32",components:2,name:"textOffset"},{type:"Float32",name:"collisionCircleDiameter"}]);xb([{type:"Float32",name:"offsetX"}]);xb([{type:"Int16",name:"x"},{type:"Int16",name:"y"},{type:"Int16",name:"tileUnitDistanceFromAnchor"}]);var vj={"!":"","#":"",$:"","%":"","\x26":"","(":"",")":"","*":"","+":"",",":"","-":"",".":"","/":"",":":"",";":"","\x3c":"","\x3d":"","\x3e":"","?":"","@":"","[":"","\\":"","]":"","^":"",_:"","`":"","{":"","|":"","}":"","~":"","":"",
"":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":""},Nj={read:function(u,E,P,ea,qa){var xa=8*qa-ea-1;var Ea=(1<<xa)-1,Va=Ea>>1,Ya=-7;qa=P?
qa-1:0;var gb=P?-1:1,Fb=u[E+qa];qa+=gb;P=Fb&(1<<-Ya)-1;Fb>>=-Ya;for(Ya+=xa;0<Ya;P=256*P+u[E+qa],qa+=gb,Ya-=8);xa=P&(1<<-Ya)-1;P>>=-Ya;for(Ya+=ea;0<Ya;xa=256*xa+u[E+qa],qa+=gb,Ya-=8);if(0===P)P=1-Va;else{if(P===Ea)return xa?NaN:Infinity*(Fb?-1:1);xa+=Math.pow(2,ea);P-=Va}return(Fb?-1:1)*xa*Math.pow(2,P-ea)},write:function(u,E,P,ea,qa,xa){var Ea,Va=8*xa-qa-1,Ya=(1<<Va)-1,gb=Ya>>1,Fb=23===qa?Math.pow(2,-24)-Math.pow(2,-77):0;xa=ea?0:xa-1;var Sb=ea?1:-1,jc=0>E||0===E&&0>1/E?1:0;E=Math.abs(E);isNaN(E)||
Infinity===E?(E=isNaN(E)?1:0,ea=Ya):(ea=Math.floor(Math.log(E)/Math.LN2),1>E*(Ea=Math.pow(2,-ea))&&(ea--,Ea*=2),E=1<=ea+gb?E+Fb/Ea:E+Fb*Math.pow(2,1-gb),2<=E*Ea&&(ea++,Ea/=2),ea+gb>=Ya?(E=0,ea=Ya):1<=ea+gb?(E=(E*Ea-1)*Math.pow(2,qa),ea+=gb):(E=E*Math.pow(2,gb-1)*Math.pow(2,qa),ea=0));for(;8<=qa;u[P+xa]=E&255,xa+=Sb,E/=256,qa-=8);ea=ea<<qa|E;for(Va+=qa;0<Va;u[P+xa]=ea&255,xa+=Sb,ea/=256,Va-=8);u[P+xa-Sb]|=128*jc}};He.Varint=0;He.Fixed64=1;He.Bytes=2;He.Fixed32=5;var uk=1/4294967296,vk="undefined"===
typeof TextDecoder?null:new TextDecoder("utf8");He.prototype={destroy:function(){this.buf=null},readFields:function(u,E,P){for(P=P||this.length;this.pos<P;){var ea=this.readVarint(),qa=ea>>3,xa=this.pos;this.type=ea&7;u(qa,E,this);this.pos===xa&&this.skip(ea)}return E},readMessage:function(u,E){return this.readFields(u,E,this.readVarint()+this.pos)},readFixed32:function(){var u=Vh(this.buf,this.pos);this.pos+=4;return u},readSFixed32:function(){var u=Pa(this.buf,this.pos);this.pos+=4;return u},readFixed64:function(){var u=
Vh(this.buf,this.pos)+4294967296*Vh(this.buf,this.pos+4);this.pos+=8;return u},readSFixed64:function(){var u=Vh(this.buf,this.pos)+4294967296*Pa(this.buf,this.pos+4);this.pos+=8;return u},readFloat:function(){var u=Nj.read(this.buf,this.pos,!0,23,4);this.pos+=4;return u},readDouble:function(){var u=Nj.read(this.buf,this.pos,!0,52,8);this.pos+=8;return u},readVarint:function(u){var E=this.buf;var P=E[this.pos++];var ea=P&127;if(128>P)return ea;P=E[this.pos++];ea|=(P&127)<<7;if(128>P)return ea;P=E[this.pos++];
ea|=(P&127)<<14;if(128>P)return ea;P=E[this.pos++];ea|=(P&127)<<21;if(128>P)return ea;P=E[this.pos];return cg(ea|(P&15)<<28,u,this)},readVarint64:function(){return this.readVarint(!0)},readSVarint:function(){var u=this.readVarint();return 1===u%2?(u+1)/-2:u/2},readBoolean:function(){return!!this.readVarint()},readString:function(){var u=this.readVarint()+this.pos,E=this.pos;this.pos=u;if(12<=u-E&&vk)return vk.decode(this.buf.subarray(E,u));for(var P=this.buf,ea="";E<u;){var qa=P[E],xa=null,Ea=239<
qa?4:223<qa?3:191<qa?2:1;if(E+Ea>u)break;if(1===Ea)128>qa&&(xa=qa);else if(2===Ea){var Va=P[E+1];128===(Va&192)&&(xa=(qa&31)<<6|Va&63,127>=xa&&(xa=null))}else if(3===Ea){Va=P[E+1];var Ya=P[E+2];128===(Va&192)&&128===(Ya&192)&&(xa=(qa&15)<<12|(Va&63)<<6|Ya&63,2047>=xa||55296<=xa&&57343>=xa)&&(xa=null)}else if(4===Ea){Va=P[E+1];Ya=P[E+2];var gb=P[E+3];128===(Va&192)&&128===(Ya&192)&&128===(gb&192)&&(xa=(qa&15)<<18|(Va&63)<<12|(Ya&63)<<6|gb&63,65535>=xa||1114112<=xa)&&(xa=null)}null===xa?(xa=65533,Ea=
1):65535<xa&&(xa-=65536,ea+=String.fromCharCode(xa>>>10&1023|55296),xa=56320|xa&1023);ea+=String.fromCharCode(xa);E+=Ea}return ea},readBytes:function(){var u=this.readVarint()+this.pos,E=this.buf.subarray(this.pos,u);this.pos=u;return E},readPackedVarint:function(u,E){if(this.type!==He.Bytes)return u.push(this.readVarint(E));var P=Xf(this);for(u=u||[];this.pos<P;)u.push(this.readVarint(E));return u},readPackedSVarint:function(u){if(this.type!==He.Bytes)return u.push(this.readSVarint());var E=Xf(this);
for(u=u||[];this.pos<E;)u.push(this.readSVarint());return u},readPackedBoolean:function(u){if(this.type!==He.Bytes)return u.push(this.readBoolean());var E=Xf(this);for(u=u||[];this.pos<E;)u.push(this.readBoolean());return u},readPackedFloat:function(u){if(this.type!==He.Bytes)return u.push(this.readFloat());var E=Xf(this);for(u=u||[];this.pos<E;)u.push(this.readFloat());return u},readPackedDouble:function(u){if(this.type!==He.Bytes)return u.push(this.readDouble());var E=Xf(this);for(u=u||[];this.pos<
E;)u.push(this.readDouble());return u},readPackedFixed32:function(u){if(this.type!==He.Bytes)return u.push(this.readFixed32());var E=Xf(this);for(u=u||[];this.pos<E;)u.push(this.readFixed32());return u},readPackedSFixed32:function(u){if(this.type!==He.Bytes)return u.push(this.readSFixed32());var E=Xf(this);for(u=u||[];this.pos<E;)u.push(this.readSFixed32());return u},readPackedFixed64:function(u){if(this.type!==He.Bytes)return u.push(this.readFixed64());var E=Xf(this);for(u=u||[];this.pos<E;)u.push(this.readFixed64());
return u},readPackedSFixed64:function(u){if(this.type!==He.Bytes)return u.push(this.readSFixed64());var E=Xf(this);for(u=u||[];this.pos<E;)u.push(this.readSFixed64());return u},skip:function(u){u&=7;if(u===He.Varint)for(;127<this.buf[this.pos++];);else if(u===He.Bytes)this.pos=this.readVarint()+this.pos;else if(u===He.Fixed32)this.pos+=4;else if(u===He.Fixed64)this.pos+=8;else throw Error("Unimplemented type: "+u);},writeTag:function(u,E){this.writeVarint(u<<3|E)},realloc:function(u){for(var E=this.length||
16;E<this.pos+u;)E*=2;E!==this.length&&(u=new Uint8Array(E),u.set(this.buf),this.buf=u,this.length=E)},finish:function(){this.length=this.pos;this.pos=0;return this.buf.subarray(0,this.length)},writeFixed32:function(u){this.realloc(4);Xa(this.buf,u,this.pos);this.pos+=4},writeSFixed32:function(u){this.realloc(4);Xa(this.buf,u,this.pos);this.pos+=4},writeFixed64:function(u){this.realloc(8);Xa(this.buf,u&-1,this.pos);Xa(this.buf,Math.floor(u*uk),this.pos+4);this.pos+=8},writeSFixed64:function(u){this.realloc(8);
Xa(this.buf,u&-1,this.pos);Xa(this.buf,Math.floor(u*uk),this.pos+4);this.pos+=8},writeVarint:function(u){u=+u||0;if(268435455<u||0>u){if(0<=u){var E=u%4294967296|0;var P=u/4294967296|0}else E=~(-u%4294967296),P=~(-u/4294967296),E^4294967295?E=E+1|0:(E=0,P=P+1|0);if(1.8446744073709552E19<=u||-1.8446744073709552E19>u)throw Error("Given varint doesn't fit into 10 bytes");this.realloc(10);u=E;this.buf[this.pos++]=u&127|128;u>>>=7;this.buf[this.pos++]=u&127|128;u>>>=7;this.buf[this.pos++]=u&127|128;u>>>=
7;this.buf[this.pos++]=u&127|128;this.buf[this.pos]=u>>>7&127;this.buf[this.pos++]|=(P&7)<<4|((P>>>=3)?128:0);P&&(this.buf[this.pos++]=P&127|((P>>>=7)?128:0),P&&(this.buf[this.pos++]=P&127|((P>>>=7)?128:0),P&&(this.buf[this.pos++]=P&127|((P>>>=7)?128:0),P&&(this.buf[this.pos++]=P&127|((P>>>=7)?128:0),P&&(this.buf[this.pos++]=P&127)))))}else this.realloc(4),this.buf[this.pos++]=u&127|(127<u?128:0),127>=u||(this.buf[this.pos++]=(u>>>=7)&127|(127<u?128:0),127>=u||(this.buf[this.pos++]=(u>>>=7)&127|(127<
u?128:0),127>=u||(this.buf[this.pos++]=u>>>7&127)))},writeSVarint:function(u){this.writeVarint(0>u?2*-u-1:2*u)},writeBoolean:function(u){this.writeVarint(!!u)},writeString:function(u){u=String(u);this.realloc(4*u.length);this.pos++;for(var E=this.pos,P=this.buf,ea=this.pos,qa=0,xa,Ea;qa<u.length;qa++){xa=u.charCodeAt(qa);if(55295<xa&&57344>xa)if(Ea)if(56320>xa){P[ea++]=239;P[ea++]=191;P[ea++]=189;Ea=xa;continue}else xa=Ea-55296<<10|xa-56320|65536,Ea=null;else{56319<xa||qa+1===u.length?(P[ea++]=239,
P[ea++]=191,P[ea++]=189):Ea=xa;continue}else Ea&&(P[ea++]=239,P[ea++]=191,P[ea++]=189,Ea=null);128>xa?P[ea++]=xa:(2048>xa?P[ea++]=xa>>6|192:(65536>xa?P[ea++]=xa>>12|224:(P[ea++]=xa>>18|240,P[ea++]=xa>>12&63|128),P[ea++]=xa>>6&63|128),P[ea++]=xa&63|128)}this.pos=ea;P=this.pos-E;128<=P&&Pg(E,P,this);this.pos=E-1;this.writeVarint(P);this.pos+=P},writeFloat:function(u){this.realloc(4);Nj.write(this.buf,u,this.pos,!0,23,4);this.pos+=4},writeDouble:function(u){this.realloc(8);Nj.write(this.buf,u,this.pos,
!0,52,8);this.pos+=8},writeBytes:function(u){var E=u.length;this.writeVarint(E);this.realloc(E);for(var P=0;P<E;P++)this.buf[this.pos++]=u[P]},writeRawMessage:function(u,E){this.pos++;var P=this.pos;u(E,this);u=this.pos-P;128<=u&&Pg(P,u,this);this.pos=P-1;this.writeVarint(u);this.pos+=u},writeMessage:function(u,E,P){this.writeTag(u,He.Bytes);this.writeRawMessage(E,P)},writePackedVarint:function(u,E){E.length&&this.writeMessage(u,Mg,E)},writePackedSVarint:function(u,E){E.length&&this.writeMessage(u,
vg,E)},writePackedBoolean:function(u,E){E.length&&this.writeMessage(u,wh,E)},writePackedFloat:function(u,E){E.length&&this.writeMessage(u,Jf,E)},writePackedDouble:function(u,E){E.length&&this.writeMessage(u,Yf,E)},writePackedFixed32:function(u,E){E.length&&this.writeMessage(u,Uh,E)},writePackedSFixed32:function(u,E){E.length&&this.writeMessage(u,hi,E)},writePackedFixed64:function(u,E){E.length&&this.writeMessage(u,yi,E)},writePackedSFixed64:function(u,E){E.length&&this.writeMessage(u,zi,E)},writeBytesField:function(u,
E){this.writeTag(u,He.Bytes);this.writeBytes(E)},writeFixed32Field:function(u,E){this.writeTag(u,He.Fixed32);this.writeFixed32(E)},writeSFixed32Field:function(u,E){this.writeTag(u,He.Fixed32);this.writeSFixed32(E)},writeFixed64Field:function(u,E){this.writeTag(u,He.Fixed64);this.writeFixed64(E)},writeSFixed64Field:function(u,E){this.writeTag(u,He.Fixed64);this.writeSFixed64(E)},writeVarintField:function(u,E){this.writeTag(u,He.Varint);this.writeVarint(E)},writeSVarintField:function(u,E){this.writeTag(u,
He.Varint);this.writeSVarint(E)},writeStringField:function(u,E){this.writeTag(u,He.Bytes);this.writeString(E)},writeFloatField:function(u,E){this.writeTag(u,He.Fixed32);this.writeFloat(E)},writeDoubleField:function(u,E){this.writeTag(u,He.Fixed64);this.writeDouble(E)},writeBooleanField:function(u,E){this.writeVarintField(u,!!E)}};var Qe=function(u,E){var P=E.pixelRatio,ea=E.version,qa=E.stretchX,xa=E.stretchY;E=E.content;this.paddedRect=u;this.pixelRatio=P;this.stretchX=qa;this.stretchY=xa;this.content=
E;this.version=ea},hj={tl:{configurable:!0},br:{configurable:!0},tlbr:{configurable:!0},displaySize:{configurable:!0}};hj.tl.get=function(){return[this.paddedRect.x+1,this.paddedRect.y+1]};hj.br.get=function(){return[this.paddedRect.x+this.paddedRect.w-1,this.paddedRect.y+this.paddedRect.h-1]};hj.tlbr.get=function(){return this.tl.concat(this.br)};hj.displaySize.get=function(){return[(this.paddedRect.w-2)/this.pixelRatio,(this.paddedRect.h-2)/this.pixelRatio]};Object.defineProperties(Qe.prototype,
hj);var wj=function(u,E){var P={},ea={};this.haveRenderCallbacks=[];var qa=[];this.addImages(u,P,qa);this.addImages(E,ea,qa);qa=ed(qa);qa=new ag({width:qa.w||1,height:qa.h||1});for(var xa in u){var Ea=u[xa],Va=P[xa].paddedRect;ag.copy(Ea.data,qa,{x:0,y:0},{x:Va.x+1,y:Va.y+1},Ea.data)}for(var Ya in E){u=E[Ya];Ea=ea[Ya].paddedRect;xa=Ea.x+1;Ea=Ea.y+1;Va=u.data.width;var gb=u.data.height;ag.copy(u.data,qa,{x:0,y:0},{x:xa,y:Ea},u.data);ag.copy(u.data,qa,{x:0,y:gb-1},{x:xa,y:Ea-1},{width:Va,height:1});
ag.copy(u.data,qa,{x:0,y:0},{x:xa,y:Ea+gb},{width:Va,height:1});ag.copy(u.data,qa,{x:Va-1,y:0},{x:xa-1,y:Ea},{width:1,height:gb});ag.copy(u.data,qa,{x:0,y:0},{x:xa+Va,y:Ea},{width:1,height:gb})}this.image=qa;this.iconPositions=P;this.patternPositions=ea};wj.prototype.addImages=function(u,E,P){for(var ea in u){var qa=u[ea],xa={x:0,y:0,w:qa.data.width+2,h:qa.data.height+2};P.push(xa);E[ea]=new Qe(xa,qa);qa.hasRenderCallback&&this.haveRenderCallbacks.push(ea)}};wj.prototype.patchUpdatedImages=function(u,
E){u.dispatchRenderCallbacks(this.haveRenderCallbacks);for(var P in u.updatedImages)this.patchUpdatedImage(this.iconPositions[P],u.getImage(P),E),this.patchUpdatedImage(this.patternPositions[P],u.getImage(P),E)};wj.prototype.patchUpdatedImage=function(u,E,P){u&&E&&u.version!==E.version&&(u.version=E.version,u=u.tl,P.update(E.data,void 0,{x:u[0],y:u[1]}))};Ob("ImagePosition",Qe);Ob("ImageAtlas",wj);var Ng={horizontal:1,vertical:2,horizontalOnly:3},fi=function(){this.scale=1;this.fontStack="";this.imageName=
null};fi.forText=function(u,E){var P=new fi;P.scale=u||1;P.fontStack=E;return P};fi.forImage=function(u){var E=new fi;E.imageName=u;return E};var Qg=function(){this.text="";this.sectionIndex=[];this.sections=[];this.imageSectionID=null};Qg.fromFeature=function(u,E){for(var P=new Qg,ea=0;ea<u.sections.length;ea++){var qa=u.sections[ea];qa.image?P.addImageSection(qa):P.addTextSection(qa,E)}return P};Qg.prototype.length=function(){return this.text.length};Qg.prototype.getSection=function(u){return this.sections[this.sectionIndex[u]]};
Qg.prototype.getSectionIndex=function(u){return this.sectionIndex[u]};Qg.prototype.getCharCode=function(u){return this.text.charCodeAt(u)};Qg.prototype.verticalizePunctuation=function(){for(var u=this.text,E="",P=0;P<u.length;P++){var ea=u.charCodeAt(P+1)||null,qa=u.charCodeAt(P-1)||null;E=ea&&qe(ea)&&!vj[u[P+1]]||qa&&qe(qa)&&!vj[u[P-1]]||!vj[u[P]]?E+u[P]:E+vj[u[P]]}this.text=E};Qg.prototype.trim=function(){for(var u=0,E=0;E<this.text.length&&aj[this.text.charCodeAt(E)];E++)u++;E=this.text.length;
for(var P=this.text.length-1;0<=P&&P>=u&&aj[this.text.charCodeAt(P)];P--)E--;this.text=this.text.substring(u,E);this.sectionIndex=this.sectionIndex.slice(u,E)};Qg.prototype.substring=function(u,E){var P=new Qg;P.text=this.text.substring(u,E);P.sectionIndex=this.sectionIndex.slice(u,E);P.sections=this.sections;return P};Qg.prototype.toString=function(){return this.text};Qg.prototype.getMaxScale=function(){var u=this;return this.sectionIndex.reduce(function(E,P){return Math.max(E,u.sections[P].scale)},
0)};Qg.prototype.addTextSection=function(u,E){this.text+=u.text;this.sections.push(fi.forText(u.scale,u.fontStack||E));E=this.sections.length-1;for(var P=0;P<u.text.length;++P)this.sectionIndex.push(E)};Qg.prototype.addImageSection=function(u){u=u.image?u.image.name:"";if(0===u.length)D("Can't add FormattedSection with an empty image.");else{var E=this.getNextImageSectionCharCode();E?(this.text+=String.fromCharCode(E),this.sections.push(fi.forImage(u)),this.sectionIndex.push(this.sections.length-
1)):D("Reached maximum number of images 6401")}};Qg.prototype.getNextImageSectionCharCode=function(){return this.imageSectionID?63743<=this.imageSectionID?null:++this.imageSectionID:this.imageSectionID=57344};var aj={9:!0,10:!0,11:!0,12:!0,13:!0,32:!0},Ak={10:!0,32:!0,38:!0,40:!0,41:!0,43:!0,45:!0,47:!0,173:!0,183:!0,8203:!0,8208:!0,8211:!0,8231:!0},bj=function(u){function E(P,ea,qa,xa){u.call(this,P,ea);this.angle=qa;void 0!==xa&&(this.segment=xa)}u&&(E.__proto__=u);E.prototype=Object.create(u&&
u.prototype);E.prototype.constructor=E;E.prototype.clone=function(){return new E(this.x,this.y,this.angle,this.segment)};return E}(af);Ob("Anchor",bj);var Ri=Object.freeze({__proto__:null,getSizeData:Yd,evaluateSizeForFeature:df,evaluateSizeForZoom:Se,SIZE_PACK_FACTOR:128}),dj=function(u,E,P,ea,qa,xa,Ea,Va,Ya,gb){this.boxStartIndex=u.length;if(Ya){E=xa.top;P=xa.bottom;if(ea=xa.collisionPadding)E-=ea[1],P+=ea[3];E=P-E;0<E&&(this.circleDiameter=E=Math.max(10,E))}else{Ya=xa.top*Ea-Va;var Fb=xa.bottom*
Ea+Va,Sb=xa.left*Ea-Va;Va=xa.right*Ea+Va;if(xa=xa.collisionPadding)Sb-=xa[0]*Ea,Ya-=xa[1]*Ea,Va+=xa[2]*Ea,Fb+=xa[3]*Ea;if(gb){xa=new af(Sb,Ya);Ea=new af(Va,Ya);var jc=new af(Sb,Fb);Fb=new af(Va,Fb);gb=gb*Math.PI/180;xa._rotate(gb);Ea._rotate(gb);jc._rotate(gb);Fb._rotate(gb);Sb=Math.min(xa.x,Ea.x,jc.x,Fb.x);Va=Math.max(xa.x,Ea.x,jc.x,Fb.x);Ya=Math.min(xa.y,Ea.y,jc.y,Fb.y);Fb=Math.max(xa.y,Ea.y,jc.y,Fb.y)}u.emplaceBack(E.x,E.y,Sb,Ya,Va,Fb,P,ea,qa)}this.boxEndIndex=u.length},cj=function(u,E){void 0===
u&&(u=[]);void 0===E&&(E=dg);this.data=u;this.length=this.data.length;this.compare=E;if(0<this.length)for(u=(this.length>>1)-1;0<=u;u--)this._down(u)};cj.prototype.push=function(u){this.data.push(u);this.length++;this._up(this.length-1)};cj.prototype.pop=function(){if(0!==this.length){var u=this.data[0],E=this.data.pop();this.length--;0<this.length&&(this.data[0]=E,this._down(0));return u}};cj.prototype.peek=function(){return this.data[0]};cj.prototype._up=function(u){for(var E=this.data,P=this.compare,
ea=E[u];0<u;){var qa=u-1>>1,xa=E[qa];if(0<=P(ea,xa))break;E[u]=xa;u=qa}E[u]=ea};cj.prototype._down=function(u){for(var E=this.data,P=this.compare,ea=this.length>>1,qa=E[u];u<ea;){var xa=(u<<1)+1,Ea=E[xa],Va=xa+1;Va<this.length&&0>P(E[Va],Ea)&&(xa=Va,Ea=E[Va]);if(0<=P(Ea,qa))break;E[u]=Ea;u=xa}E[u]=qa};var Cj=Number.POSITIVE_INFINITY,ci=255,si=128*ci,ek=Jj.VectorTileFeature.types,wk=[{name:"a_fade_opacity",components:1,type:"Uint8",offset:0}],Oj=function(u){this.layoutVertexArray=new Wj;this.indexArray=
new di;this.programConfigurations=u;this.segments=new Vg;this.dynamicLayoutVertexArray=new lk;this.opacityVertexArray=new Ik;this.placedSymbolArray=new Wk};Oj.prototype.isEmpty=function(){return 0===this.layoutVertexArray.length&&0===this.indexArray.length&&0===this.dynamicLayoutVertexArray.length&&0===this.opacityVertexArray.length};Oj.prototype.upload=function(u,E,P,ea){this.isEmpty()||(P&&(this.layoutVertexBuffer=u.createVertexBuffer(this.layoutVertexArray,ih.members),this.indexBuffer=u.createIndexBuffer(this.indexArray,
E),this.dynamicLayoutVertexBuffer=u.createVertexBuffer(this.dynamicLayoutVertexArray,tk.members,!0),this.opacityVertexBuffer=u.createVertexBuffer(this.opacityVertexArray,wk,!0),this.opacityVertexBuffer.itemSize=1),(P||ea)&&this.programConfigurations.upload(u))};Oj.prototype.destroy=function(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.programConfigurations.destroy(),this.segments.destroy(),this.dynamicLayoutVertexBuffer.destroy(),this.opacityVertexBuffer.destroy())};
Ob("SymbolBuffers",Oj);var fk=function(u,E,P){this.layoutVertexArray=new u;this.layoutAttributes=E;this.indexArray=new P;this.segments=new Vg;this.collisionVertexArray=new Hj};fk.prototype.upload=function(u){this.layoutVertexBuffer=u.createVertexBuffer(this.layoutVertexArray,this.layoutAttributes);this.indexBuffer=u.createIndexBuffer(this.indexArray);this.collisionVertexBuffer=u.createVertexBuffer(this.collisionVertexArray,Kj.members,!0)};fk.prototype.destroy=function(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),
this.indexBuffer.destroy(),this.segments.destroy(),this.collisionVertexBuffer.destroy())};Ob("CollisionBuffers",fk);var ig=function(u){this.collisionBoxArray=u.collisionBoxArray;this.zoom=u.zoom;this.overscaling=u.overscaling;this.layers=u.layers;this.layerIds=this.layers.map(function(qa){return qa.id});this.index=u.index;this.pixelRatio=u.pixelRatio;this.sourceLayerIndex=u.sourceLayerIndex;this.hasRTLText=this.hasPattern=!1;this.sortKeyRanges=[];this.collisionCircleArray=[];this.placementInvProjMatrix=
Mf([]);this.placementViewportMatrix=Mf([]);var E=this.layers[0]._unevaluatedLayout._values;this.textSizeData=Yd(this.zoom,E["text-size"]);this.iconSizeData=Yd(this.zoom,E["icon-size"]);E=this.layers[0].layout;var P=E.get("symbol-sort-key"),ea=E.get("symbol-z-order");this.sortFeaturesByKey="viewport-y"!==ea&&void 0!==P.constantOr(1);this.sortFeaturesByY=("viewport-y"===ea||"auto"===ea&&!this.sortFeaturesByKey)&&(E.get("text-allow-overlap")||E.get("icon-allow-overlap")||E.get("text-ignore-placement")||
E.get("icon-ignore-placement"));"point"===E.get("symbol-placement")&&(this.writingModes=E.get("text-writing-mode").map(function(qa){return Ng[qa]}));this.stateDependentLayerIds=this.layers.filter(function(qa){return qa.isStateDependent()}).map(function(qa){return qa.id});this.sourceID=u.sourceID};ig.prototype.createArrays=function(){this.text=new Oj(new Gh(ih.members,this.layers,this.zoom,function(u){return/^text/.test(u)}));this.icon=new Oj(new Gh(ih.members,this.layers,this.zoom,function(u){return/^icon/.test(u)}));
this.glyphOffsetArray=new Xk;this.lineVertexArray=new ak;this.symbolInstances=new ok};ig.prototype.calculateGlyphDependencies=function(u,E,P,ea,qa){for(var xa=0;xa<u.length;xa++)if(E[u.charCodeAt(xa)]=!0,(P||ea)&&qa){var Ea=vj[u.charAt(xa)];Ea&&(E[Ea.charCodeAt(0)]=!0)}};ig.prototype.populate=function(u,E,P){var ea=this.layers[0],qa=ea.layout,xa=qa.get("text-font"),Ea=qa.get("text-field"),Va=qa.get("icon-image");Ea=("constant"!==Ea.value.kind||Ea.value.value instanceof zd&&!Ea.value.value.isEmpty()||
0<Ea.value.value.toString().length)&&("constant"!==xa.value.kind||0<xa.value.value.length);Va="constant"!==Va.value.kind||!!Va.value.value||0<Object.keys(Va.parameters).length;var Ya=qa.get("symbol-sort-key");this.features=[];if(Ea||Va){var gb=E.iconDependencies,Fb=E.glyphDependencies;E=E.availableImages;for(var Sb=new Ag(this.zoom),jc=0;jc<u.length;jc+=1){var Dc=u[jc],xc=Dc.feature,Hc=Dc.id,vd=Dc.index,ce=Dc.sourceLayerIndex;Dc=ea._featureFilter.needGeometry;var Ed={type:xc.type,id:Hc,properties:xc.properties,
geometry:Dc?wc(xc):[]};if(ea._featureFilter.filter(Sb,Ed,P)){Dc||(Ed.geometry=wc(xc));Dc=void 0;if(Ea){var Kd=ea.getValueAndResolveTokens("text-field",Ed,P,E);Kd=zd.factory(Kd);ij(Kd)&&(this.hasRTLText=!0);if(!this.hasRTLText||"unavailable"===Eh||this.hasRTLText&&bi.isParsed())Dc=We(Kd,ea,Ed)}Kd=void 0;Va&&(Kd=ea.getValueAndResolveTokens("icon-image",Ed,P,E),Kd=Kd instanceof ee?Kd:ee.fromString(Kd));if(Dc||Kd){var fe=this.sortFeaturesByKey?Ya.evaluate(Ed,{},P):void 0;xc={id:Hc,text:Dc,icon:Kd,index:vd,
sourceLayerIndex:ce,geometry:wc(xc),properties:xc.properties,type:ek[xc.type],sortKey:fe};this.features.push(xc);Kd&&(gb[Kd.name]=!0);if(Dc)for(xc=xa.evaluate(Ed,{},P).join(","),Hc="map"===qa.get("text-rotation-alignment")&&"point"!==qa.get("symbol-placement"),this.allowVerticalPlacement=this.writingModes&&0<=this.writingModes.indexOf(Ng.vertical),vd=0,Ed=Dc.sections;vd<Ed.length;vd+=1)ce=Ed[vd],ce.image?gb[ce.image.name]=!0:(Kd=rd(Dc.toString()),fe=ce.fontStack||xc,fe=Fb[fe]=Fb[fe]||{},this.calculateGlyphDependencies(ce.text,
fe,Hc,this.allowVerticalPlacement,Kd))}}}"line"===qa.get("symbol-placement")&&(this.features=fg(this.features));this.sortFeaturesByKey&&this.features.sort(function(te,Me){return te.sortKey-Me.sortKey})}};ig.prototype.update=function(u,E,P){this.stateDependentLayers.length&&(this.text.programConfigurations.updatePaintArrays(u,E,this.layers,P),this.icon.programConfigurations.updatePaintArrays(u,E,this.layers,P))};ig.prototype.isEmpty=function(){return 0===this.symbolInstances.length&&!this.hasRTLText};
ig.prototype.uploadPending=function(){return!this.uploaded||this.text.programConfigurations.needsUpload||this.icon.programConfigurations.needsUpload};ig.prototype.upload=function(u){!this.uploaded&&this.hasDebugData()&&(this.textCollisionBox.upload(u),this.iconCollisionBox.upload(u));this.text.upload(u,this.sortFeaturesByY,!this.uploaded,this.text.programConfigurations.needsUpload);this.icon.upload(u,this.sortFeaturesByY,!this.uploaded,this.icon.programConfigurations.needsUpload);this.uploaded=!0};
ig.prototype.destroyDebugData=function(){this.textCollisionBox.destroy();this.iconCollisionBox.destroy()};ig.prototype.destroy=function(){this.text.destroy();this.icon.destroy();this.hasDebugData()&&this.destroyDebugData()};ig.prototype.addToLineVertexArray=function(u,E){var P=this.lineVertexArray.length;if(void 0!==u.segment){for(var ea=u.dist(E[u.segment+1]),qa=u.dist(E[u.segment]),xa={},Ea=u.segment+1;Ea<E.length;Ea++)xa[Ea]={x:E[Ea].x,y:E[Ea].y,tileUnitDistanceFromAnchor:ea},Ea<E.length-1&&(ea+=
E[Ea+1].dist(E[Ea]));for(u=u.segment||0;0<=u;u--)xa[u]={x:E[u].x,y:E[u].y,tileUnitDistanceFromAnchor:qa},0<u&&(qa+=E[u-1].dist(E[u]));for(qa=0;qa<E.length;qa++)u=xa[qa],this.lineVertexArray.emplaceBack(u.x,u.y,u.tileUnitDistanceFromAnchor)}return{lineStartIndex:P,lineLength:this.lineVertexArray.length-P}};ig.prototype.addSymbols=function(u,E,P,ea,qa,xa,Ea,Va,Ya,gb,Fb,Sb){qa=u.indexArray;for(var jc=u.layoutVertexArray,Dc=u.segments.prepareSegment(4*E.length,jc,qa,xa.sortKey),xc=this.glyphOffsetArray.length,
Hc=Dc.vertexLength,vd=this.allowVerticalPlacement&&Ea===Ng.vertical?Math.PI/2:0,ce=xa.text&&xa.text.sections,Ed=0;Ed<E.length;Ed++){var Kd=E[Ed],fe=Kd.tl,te=Kd.tr,Me=Kd.bl,ue=Kd.br,lf=Kd.tex,Xe=Kd.pixelOffsetTL,Ye=Kd.pixelOffsetBR,of=Kd.minFontScaleX,Hf=Kd.minFontScaleY,mf=Kd.glyphOffset,ff=Kd.isSDF;Kd=Kd.sectionIndex;var Pe=Dc.vertexLength,$e=mf[1];Ih(jc,Va.x,Va.y,fe.x,$e+fe.y,lf.x,lf.y,P,ff,Xe.x,Xe.y,of,Hf);Ih(jc,Va.x,Va.y,te.x,$e+te.y,lf.x+lf.w,lf.y,P,ff,Ye.x,Xe.y,of,Hf);Ih(jc,Va.x,Va.y,Me.x,$e+
Me.y,lf.x,lf.y+lf.h,P,ff,Xe.x,Ye.y,of,Hf);Ih(jc,Va.x,Va.y,ue.x,$e+ue.y,lf.x+lf.w,lf.y+lf.h,P,ff,Ye.x,Ye.y,of,Hf);Si(u.dynamicLayoutVertexArray,Va,vd);qa.emplaceBack(Pe,Pe+1,Pe+2);qa.emplaceBack(Pe+1,Pe+2,Pe+3);Dc.vertexLength+=4;Dc.primitiveLength+=2;this.glyphOffsetArray.emplaceBack(mf[0]);Ed!==E.length-1&&Kd===E[Ed+1].sectionIndex||u.programConfigurations.populatePaintArrays(jc.length,xa,xa.index,{},Sb,ce&&ce[Kd])}u.placedSymbolArray.emplaceBack(Va.x,Va.y,xc,this.glyphOffsetArray.length-xc,Hc,Ya,
gb,Va.segment,P?P[0]:0,P?P[1]:0,ea[0],ea[1],Ea,0,!1,0,Fb)};ig.prototype._addCollisionDebugVertex=function(u,E,P,ea,qa,xa){E.emplaceBack(0,0);return u.emplaceBack(P.x,P.y,ea,qa,Math.round(xa.x),Math.round(xa.y))};ig.prototype.addCollisionDebugVertices=function(u,E,P,ea,qa,xa,Ea){var Va=qa.segments.prepareSegment(4,qa.layoutVertexArray,qa.indexArray),Ya=Va.vertexLength,gb=qa.layoutVertexArray,Fb=qa.collisionVertexArray,Sb=Ea.anchorX;Ea=Ea.anchorY;this._addCollisionDebugVertex(gb,Fb,xa,Sb,Ea,new af(u,
E));this._addCollisionDebugVertex(gb,Fb,xa,Sb,Ea,new af(P,E));this._addCollisionDebugVertex(gb,Fb,xa,Sb,Ea,new af(P,ea));this._addCollisionDebugVertex(gb,Fb,xa,Sb,Ea,new af(u,ea));Va.vertexLength+=4;u=qa.indexArray;u.emplaceBack(Ya,Ya+1);u.emplaceBack(Ya+1,Ya+2);u.emplaceBack(Ya+2,Ya+3);u.emplaceBack(Ya+3,Ya);Va.primitiveLength+=4};ig.prototype.addDebugCollisionBoxes=function(u,E,P,ea){for(;u<E;u++){var qa=this.collisionBoxArray.get(u);this.addCollisionDebugVertices(qa.x1,qa.y1,qa.x2,qa.y2,ea?this.textCollisionBox:
this.iconCollisionBox,qa.anchorPoint,P)}};ig.prototype.generateCollisionDebugBuffers=function(){this.hasDebugData()&&this.destroyDebugData();this.textCollisionBox=new fk(sj,Lj.members,oh);this.iconCollisionBox=new fk(sj,Lj.members,oh);for(var u=0;u<this.symbolInstances.length;u++){var E=this.symbolInstances.get(u);this.addDebugCollisionBoxes(E.textBoxStartIndex,E.textBoxEndIndex,E,!0);this.addDebugCollisionBoxes(E.verticalTextBoxStartIndex,E.verticalTextBoxEndIndex,E,!0);this.addDebugCollisionBoxes(E.iconBoxStartIndex,
E.iconBoxEndIndex,E,!1);this.addDebugCollisionBoxes(E.verticalIconBoxStartIndex,E.verticalIconBoxEndIndex,E,!1)}};ig.prototype._deserializeCollisionBoxesForSymbol=function(u,E,P,ea,qa,xa,Ea,Va,Ya){for(var gb={};E<P;){E=u.get(E);gb.textBox={x1:E.x1,y1:E.y1,x2:E.x2,y2:E.y2,anchorPointX:E.anchorPointX,anchorPointY:E.anchorPointY};gb.textFeatureIndex=E.featureIndex;break}for(;ea<qa;){ea=u.get(ea);gb.verticalTextBox={x1:ea.x1,y1:ea.y1,x2:ea.x2,y2:ea.y2,anchorPointX:ea.anchorPointX,anchorPointY:ea.anchorPointY};
gb.verticalTextFeatureIndex=ea.featureIndex;break}for(;xa<Ea;){xa=u.get(xa);gb.iconBox={x1:xa.x1,y1:xa.y1,x2:xa.x2,y2:xa.y2,anchorPointX:xa.anchorPointX,anchorPointY:xa.anchorPointY};gb.iconFeatureIndex=xa.featureIndex;break}for(;Va<Ya;){u=u.get(Va);gb.verticalIconBox={x1:u.x1,y1:u.y1,x2:u.x2,y2:u.y2,anchorPointX:u.anchorPointX,anchorPointY:u.anchorPointY};gb.verticalIconFeatureIndex=u.featureIndex;break}return gb};ig.prototype.deserializeCollisionBoxes=function(u){this.collisionArrays=[];for(var E=
0;E<this.symbolInstances.length;E++){var P=this.symbolInstances.get(E);this.collisionArrays.push(this._deserializeCollisionBoxesForSymbol(u,P.textBoxStartIndex,P.textBoxEndIndex,P.verticalTextBoxStartIndex,P.verticalTextBoxEndIndex,P.iconBoxStartIndex,P.iconBoxEndIndex,P.verticalIconBoxStartIndex,P.verticalIconBoxEndIndex))}};ig.prototype.hasTextData=function(){return 0<this.text.segments.get().length};ig.prototype.hasIconData=function(){return 0<this.icon.segments.get().length};ig.prototype.hasDebugData=
function(){return this.textCollisionBox&&this.iconCollisionBox};ig.prototype.hasTextCollisionBoxData=function(){return this.hasDebugData()&&0<this.textCollisionBox.segments.get().length};ig.prototype.hasIconCollisionBoxData=function(){return this.hasDebugData()&&0<this.iconCollisionBox.segments.get().length};ig.prototype.addIndicesForPlacedSymbol=function(u,E){var P=u.placedSymbolArray.get(E);E=P.vertexStartIndex+4*P.numGlyphs;for(P=P.vertexStartIndex;P<E;P+=4)u.indexArray.emplaceBack(P,P+1,P+2),
u.indexArray.emplaceBack(P+1,P+2,P+3)};ig.prototype.getSortedSymbolIndexes=function(u){if(this.sortedAngle===u&&void 0!==this.symbolInstanceIndexes)return this.symbolInstanceIndexes;var E=Math.sin(u);u=Math.cos(u);for(var P=[],ea=[],qa=[],xa=0;xa<this.symbolInstances.length;++xa){qa.push(xa);var Ea=this.symbolInstances.get(xa);P.push(Math.round(E*Ea.anchorX+u*Ea.anchorY)|0);ea.push(Ea.featureIndex)}qa.sort(function(Va,Ya){return P[Va]-P[Ya]||ea[Ya]-ea[Va]});return qa};ig.prototype.addToSortKeyRanges=
function(u,E){var P=this.sortKeyRanges[this.sortKeyRanges.length-1];P&&P.sortKey===E?P.symbolInstanceEnd=u+1:this.sortKeyRanges.push({sortKey:E,symbolInstanceStart:u,symbolInstanceEnd:u+1})};ig.prototype.sortFeatures=function(u){var E=this;if(this.sortFeaturesByY&&this.sortedAngle!==u&&!(1<this.text.segments.get().length||1<this.icon.segments.get().length)){this.symbolInstanceIndexes=this.getSortedSymbolIndexes(u);this.sortedAngle=u;this.text.indexArray.clear();this.icon.indexArray.clear();this.featureSortOrder=
[];u=0;for(var P=this.symbolInstanceIndexes;u<P.length;u+=1){var ea=this.symbolInstances.get(P[u]);this.featureSortOrder.push(ea.featureIndex);[ea.rightJustifiedTextSymbolIndex,ea.centerJustifiedTextSymbolIndex,ea.leftJustifiedTextSymbolIndex].forEach(function(qa,xa,Ea){0<=qa&&Ea.indexOf(qa)===xa&&E.addIndicesForPlacedSymbol(E.text,qa)});0<=ea.verticalPlacedTextSymbolIndex&&this.addIndicesForPlacedSymbol(this.text,ea.verticalPlacedTextSymbolIndex);0<=ea.placedIconSymbolIndex&&this.addIndicesForPlacedSymbol(this.icon,
ea.placedIconSymbolIndex);0<=ea.verticalPlacedIconSymbolIndex&&this.addIndicesForPlacedSymbol(this.icon,ea.verticalPlacedIconSymbolIndex)}this.text.indexBuffer&&this.text.indexBuffer.updateData(this.text.indexArray);this.icon.indexBuffer&&this.icon.indexBuffer.updateData(this.icon.indexArray)}};Ob("SymbolBucket",ig,{omit:["layers","collisionBoxArray","features","compareText"]});ig.MAX_GLYPHS=65535;ig.addDynamicAttributes=Si;var ol=new gh({"symbol-placement":new Ze(Da.layout_symbol["symbol-placement"]),
"symbol-spacing":new Ze(Da.layout_symbol["symbol-spacing"]),"symbol-avoid-edges":new Ze(Da.layout_symbol["symbol-avoid-edges"]),"symbol-sort-key":new pf(Da.layout_symbol["symbol-sort-key"]),"symbol-z-order":new Ze(Da.layout_symbol["symbol-z-order"]),"icon-allow-overlap":new Ze(Da.layout_symbol["icon-allow-overlap"]),"icon-ignore-placement":new Ze(Da.layout_symbol["icon-ignore-placement"]),"icon-optional":new Ze(Da.layout_symbol["icon-optional"]),"icon-rotation-alignment":new Ze(Da.layout_symbol["icon-rotation-alignment"]),
"icon-size":new pf(Da.layout_symbol["icon-size"]),"icon-text-fit":new Ze(Da.layout_symbol["icon-text-fit"]),"icon-text-fit-padding":new Ze(Da.layout_symbol["icon-text-fit-padding"]),"icon-image":new pf(Da.layout_symbol["icon-image"]),"icon-rotate":new pf(Da.layout_symbol["icon-rotate"]),"icon-padding":new Ze(Da.layout_symbol["icon-padding"]),"icon-keep-upright":new Ze(Da.layout_symbol["icon-keep-upright"]),"icon-offset":new pf(Da.layout_symbol["icon-offset"]),"icon-anchor":new pf(Da.layout_symbol["icon-anchor"]),
"icon-pitch-alignment":new Ze(Da.layout_symbol["icon-pitch-alignment"]),"text-pitch-alignment":new Ze(Da.layout_symbol["text-pitch-alignment"]),"text-rotation-alignment":new Ze(Da.layout_symbol["text-rotation-alignment"]),"text-field":new pf(Da.layout_symbol["text-field"]),"text-font":new pf(Da.layout_symbol["text-font"]),"text-size":new pf(Da.layout_symbol["text-size"]),"text-max-width":new pf(Da.layout_symbol["text-max-width"]),"text-line-height":new Ze(Da.layout_symbol["text-line-height"]),"text-letter-spacing":new pf(Da.layout_symbol["text-letter-spacing"]),
"text-justify":new pf(Da.layout_symbol["text-justify"]),"text-radial-offset":new pf(Da.layout_symbol["text-radial-offset"]),"text-variable-anchor":new Ze(Da.layout_symbol["text-variable-anchor"]),"text-anchor":new pf(Da.layout_symbol["text-anchor"]),"text-max-angle":new Ze(Da.layout_symbol["text-max-angle"]),"text-writing-mode":new Ze(Da.layout_symbol["text-writing-mode"]),"text-rotate":new pf(Da.layout_symbol["text-rotate"]),"text-padding":new Ze(Da.layout_symbol["text-padding"]),"text-keep-upright":new Ze(Da.layout_symbol["text-keep-upright"]),
"text-transform":new pf(Da.layout_symbol["text-transform"]),"text-offset":new pf(Da.layout_symbol["text-offset"]),"text-allow-overlap":new Ze(Da.layout_symbol["text-allow-overlap"]),"text-ignore-placement":new Ze(Da.layout_symbol["text-ignore-placement"]),"text-optional":new Ze(Da.layout_symbol["text-optional"])}),Pk={paint:new gh({"icon-opacity":new pf(Da.paint_symbol["icon-opacity"]),"icon-color":new pf(Da.paint_symbol["icon-color"]),"icon-halo-color":new pf(Da.paint_symbol["icon-halo-color"]),
"icon-halo-width":new pf(Da.paint_symbol["icon-halo-width"]),"icon-halo-blur":new pf(Da.paint_symbol["icon-halo-blur"]),"icon-translate":new Ze(Da.paint_symbol["icon-translate"]),"icon-translate-anchor":new Ze(Da.paint_symbol["icon-translate-anchor"]),"text-opacity":new pf(Da.paint_symbol["text-opacity"]),"text-color":new pf(Da.paint_symbol["text-color"],{runtimeType:Tb,getOverride:function(u){return u.textColor},hasOverride:function(u){return!!u.textColor}}),"text-halo-color":new pf(Da.paint_symbol["text-halo-color"]),
"text-halo-width":new pf(Da.paint_symbol["text-halo-width"]),"text-halo-blur":new pf(Da.paint_symbol["text-halo-blur"]),"text-translate":new Ze(Da.paint_symbol["text-translate"]),"text-translate-anchor":new Ze(Da.paint_symbol["text-translate-anchor"])}),layout:ol},Pj=function(u){this.type=u.property.overrides?u.property.overrides.runtimeType:eb;this.defaultValue=u};Pj.prototype.evaluate=function(u){if(u.formattedSection){var E=this.defaultValue.property.overrides;if(E&&E.hasOverride(u.formattedSection))return E.getOverride(u.formattedSection)}return u.feature&&
u.featureState?this.defaultValue.evaluate(u.feature,u.featureState):this.defaultValue.property.specification.default};Pj.prototype.eachChild=function(u){this.defaultValue.isConstant()||u(this.defaultValue.value._styleExpression.expression)};Pj.prototype.outputDefined=function(){return!1};Pj.prototype.serialize=function(){return null};Ob("FormatSectionOverride",Pj,{omit:["defaultValue"]});var gk=function(u){function E(P){u.call(this,P,Pk)}u&&(E.__proto__=u);E.prototype=Object.create(u&&u.prototype);
E.prototype.constructor=E;E.prototype.recalculate=function(P,ea){u.prototype.recalculate.call(this,P,ea);"auto"===this.layout.get("icon-rotation-alignment")&&("point"!==this.layout.get("symbol-placement")?this.layout._values["icon-rotation-alignment"]="map":this.layout._values["icon-rotation-alignment"]="viewport");"auto"===this.layout.get("text-rotation-alignment")&&("point"!==this.layout.get("symbol-placement")?this.layout._values["text-rotation-alignment"]="map":this.layout._values["text-rotation-alignment"]=
"viewport");"auto"===this.layout.get("text-pitch-alignment")&&(this.layout._values["text-pitch-alignment"]=this.layout.get("text-rotation-alignment"));"auto"===this.layout.get("icon-pitch-alignment")&&(this.layout._values["icon-pitch-alignment"]=this.layout.get("icon-rotation-alignment"));if("point"===this.layout.get("symbol-placement"))if(P=this.layout.get("text-writing-mode")){ea=[];for(var qa=0;qa<P.length;qa+=1){var xa=P[qa];0>ea.indexOf(xa)&&ea.push(xa)}this.layout._values["text-writing-mode"]=
ea}else this.layout._values["text-writing-mode"]=["horizontal"];this._setPaintOverrides()};E.prototype.getValueAndResolveTokens=function(P,ea,qa,xa){qa=this.layout.get(P).evaluate(ea,{},qa,xa);P=this._unevaluatedLayout._values[P];return P.isDataDriven()||Ub(P.value)||!qa?qa:Xh(ea.properties,qa)};E.prototype.createBucket=function(P){return new ig(P)};E.prototype.queryRadius=function(){return 0};E.prototype.queryIntersectsFeature=function(){return!1};E.prototype._setPaintOverrides=function(){for(var P=
0,ea=Pk.paint.overridableProperties;P<ea.length;P+=1){var qa=ea[P];if(E.hasPaintOverride(this.layout,qa)){var xa=this.paint.get(qa),Ea=new Pj(xa);Ea=new jj(Ea,xa.property.specification);Ea="constant"===xa.value.kind||"source"===xa.value.kind?new zj("source",Ea):new kj("composite",Ea,xa.value.zoomStops,xa.value._interpolationType);this.paint._values[qa]=new Oh(xa.property,Ea,xa.parameters)}}};E.prototype._handleOverridablePaintPropertyUpdate=function(P,ea,qa){return!this.layout||ea.isDataDriven()||
qa.isDataDriven()?!1:E.hasPaintOverride(this.layout,P)};E.hasPaintOverride=function(P,ea){P=P.get("text-field");var qa=Pk.paint.properties[ea],xa=!1,Ea=function(Ya){for(var gb=0;gb<Ya.length;gb+=1){var Fb=Ya[gb];if(qa.overrides&&qa.overrides.hasOverride(Fb)){xa=!0;break}}};if("constant"===P.value.kind&&P.value.value instanceof zd)Ea(P.value.value.sections);else if("source"===P.value.kind){var Va=function(Ya){xa||(Ya instanceof le&&hb(Ya.value)===Kc?Ea(Ya.value.sections):Ya instanceof Od?Ea(Ya.sections):
Ya.eachChild(Va))};ea=P.value;ea._styleExpression&&Va(ea._styleExpression.expression)}return xa};return E}(li),pl={paint:new gh({"background-color":new Ze(Da.paint_background["background-color"]),"background-pattern":new Fj(Da.paint_background["background-pattern"]),"background-opacity":new Ze(Da.paint_background["background-opacity"])})},xk=function(u){function E(P){u.call(this,P,pl)}u&&(E.__proto__=u);E.prototype=Object.create(u&&u.prototype);return E.prototype.constructor=E}(li),Y={paint:new gh({"raster-opacity":new Ze(Da.paint_raster["raster-opacity"]),
"raster-hue-rotate":new Ze(Da.paint_raster["raster-hue-rotate"]),"raster-brightness-min":new Ze(Da.paint_raster["raster-brightness-min"]),"raster-brightness-max":new Ze(Da.paint_raster["raster-brightness-max"]),"raster-saturation":new Ze(Da.paint_raster["raster-saturation"]),"raster-contrast":new Ze(Da.paint_raster["raster-contrast"]),"raster-resampling":new Ze(Da.paint_raster["raster-resampling"]),"raster-fade-duration":new Ze(Da.paint_raster["raster-fade-duration"])})},ha=function(u){function E(P){u.call(this,
P,Y)}u&&(E.__proto__=u);E.prototype=Object.create(u&&u.prototype);return E.prototype.constructor=E}(li),ta=function(u){function E(P){u.call(this,P,{});this.implementation=P}u&&(E.__proto__=u);E.prototype=Object.create(u&&u.prototype);E.prototype.constructor=E;E.prototype.is3D=function(){return"3d"===this.implementation.renderingMode};E.prototype.hasOffscreenPass=function(){return void 0!==this.implementation.prerender};E.prototype.recalculate=function(){};E.prototype.updateTransitions=function(){};
E.prototype.hasTransition=function(){};E.prototype.serialize=function(){};E.prototype.onAdd=function(P){if(this.implementation.onAdd)this.implementation.onAdd(P,P.painter.context.gl)};E.prototype.onRemove=function(P){if(this.implementation.onRemove)this.implementation.onRemove(P,P.painter.context.gl)};return E}(li),Ra={circle:bk,heatmap:yh,hillshade:ck,fill:ll,"fill-extrusion":nl,line:Ok,symbol:gk,background:xk,raster:ha},mb=self.HTMLImageElement,Kb=self.HTMLCanvasElement,cc=self.HTMLVideoElement,
zc=self.ImageData,ad=self.ImageBitmap,Jd=function(u,E,P,ea){this.context=u;this.format=P;this.texture=u.gl.createTexture();this.update(E,ea)};Jd.prototype.update=function(u,E,P){var ea=u.width,qa=u.height,xa=(!this.size||this.size[0]!==ea||this.size[1]!==qa)&&!P,Ea=this.context,Va=Ea.gl;this.useMipmap=!(!E||!E.useMipmap);Va.bindTexture(Va.TEXTURE_2D,this.texture);Ea.pixelStoreUnpackFlipY.set(!1);Ea.pixelStoreUnpack.set(1);Ea.pixelStoreUnpackPremultiplyAlpha.set(this.format===Va.RGBA&&(!E||!1!==E.premultiply));
xa?(this.size=[ea,qa],u instanceof mb||u instanceof Kb||u instanceof cc||u instanceof zc||ad&&u instanceof ad?Va.texImage2D(Va.TEXTURE_2D,0,this.format,this.format,Va.UNSIGNED_BYTE,u):Va.texImage2D(Va.TEXTURE_2D,0,this.format,ea,qa,0,this.format,Va.UNSIGNED_BYTE,u.data)):(P=P||{x:0,y:0},E=P.x,P=P.y,u instanceof mb||u instanceof Kb||u instanceof cc||u instanceof zc||ad&&u instanceof ad?Va.texSubImage2D(Va.TEXTURE_2D,0,E,P,Va.RGBA,Va.UNSIGNED_BYTE,u):Va.texSubImage2D(Va.TEXTURE_2D,0,E,P,ea,qa,Va.RGBA,
Va.UNSIGNED_BYTE,u.data));this.useMipmap&&this.isSizePowerOfTwo()&&Va.generateMipmap(Va.TEXTURE_2D)};Jd.prototype.bind=function(u,E,P){var ea=this.context.gl;ea.bindTexture(ea.TEXTURE_2D,this.texture);P!==ea.LINEAR_MIPMAP_NEAREST||this.isSizePowerOfTwo()||(P=ea.LINEAR);u!==this.filter&&(ea.texParameteri(ea.TEXTURE_2D,ea.TEXTURE_MAG_FILTER,u),ea.texParameteri(ea.TEXTURE_2D,ea.TEXTURE_MIN_FILTER,P||u),this.filter=u);E!==this.wrap&&(ea.texParameteri(ea.TEXTURE_2D,ea.TEXTURE_WRAP_S,E),ea.texParameteri(ea.TEXTURE_2D,
ea.TEXTURE_WRAP_T,E),this.wrap=E)};Jd.prototype.isSizePowerOfTwo=function(){return this.size[0]===this.size[1]&&0===Math.log(this.size[0])/Math.LN2%1};Jd.prototype.destroy=function(){this.context.gl.deleteTexture(this.texture);this.texture=null};var Re=function(u){var E=this;this._callback=u;this._triggered=!1;"undefined"!==typeof MessageChannel&&(this._channel=new MessageChannel,this._channel.port2.onmessage=function(){E._triggered=!1;E._callback()})};Re.prototype.trigger=function(){var u=this;this._triggered||
(this._triggered=!0,this._channel?this._channel.port1.postMessage(!0):setTimeout(function(){u._triggered=!1;u._callback()},0))};Re.prototype.remove=function(){delete this._channel;this._callback=function(){}};var If=function(u,E,P){this.target=u;this.parent=E;this.mapId=P;this.callbacks={};this.tasks={};this.taskQueue=[];this.cancelCallbacks={};w(["receive","process"],this);this.invoker=new Re(this.process);this.target.addEventListener("message",this.receive,!1);this.globalScope=v()?u:self};If.prototype.send=
function(u,E,P,ea,qa){var xa=this;void 0===qa&&(qa=!1);var Ea=Math.round(1E18*Math.random()).toString(36).substring(0,10);P&&(this.callbacks[Ea]=P);var Va=F(this.globalScope)?void 0:[];this.target.postMessage({id:Ea,type:u,hasCallback:!!P,targetMapId:ea,mustQueue:qa,sourceMapId:this.mapId,data:Mc(E,Va)},Va);return{cancel:function(){P&&delete xa.callbacks[Ea];xa.target.postMessage({id:Ea,type:"\x3ccancel\x3e",targetMapId:ea,sourceMapId:xa.mapId})}}};If.prototype.receive=function(u){var E=u.data;!(u=
E.id)||E.targetMapId&&this.mapId!==E.targetMapId||("\x3ccancel\x3e"===E.type?(delete this.tasks[u],E=this.cancelCallbacks[u],delete this.cancelCallbacks[u],E&&E()):v()||E.mustQueue?(this.tasks[u]=E,this.taskQueue.push(u),this.invoker.trigger()):this.processTask(u,E))};If.prototype.process=function(){if(this.taskQueue.length){var u=this.taskQueue.shift(),E=this.tasks[u];delete this.tasks[u];this.taskQueue.length&&this.invoker.trigger();E&&this.processTask(u,E)}};If.prototype.processTask=function(u,
E){var P=this;if("\x3cresponse\x3e"===E.type){var ea=this.callbacks[u];delete this.callbacks[u];ea&&(E.error?ea(Fd(E.error)):ea(null,Fd(E.data)))}else{var qa=!1,xa=F(this.globalScope)?void 0:[];ea=E.hasCallback?function(Ya,gb){qa=!0;delete P.cancelCallbacks[u];P.target.postMessage({id:u,type:"\x3cresponse\x3e",sourceMapId:P.mapId,error:Ya?Mc(Ya):null,data:Mc(gb,xa)},xa)}:function(Ya){qa=!0};var Ea=null,Va=Fd(E.data);this.parent[E.type]?Ea=this.parent[E.type](E.sourceMapId,Va,ea):this.parent.getWorkerSource?
(Ea=E.type.split("."),Ea=this.parent.getWorkerSource(E.sourceMapId,Ea[0],Va.source)[Ea[1]](Va,ea)):ea(Error("Could not find function "+E.type));!qa&&Ea&&Ea.cancel&&(this.cancelCallbacks[u]=Ea.cancel)}};If.prototype.remove=function(){this.invoker.remove();this.target.removeEventListener("message",this.receive,!1)};var Rd=function(u,E){u&&(E?this.setSouthWest(u).setNorthEast(E):4===u.length?this.setSouthWest([u[0],u[1]]).setNorthEast([u[2],u[3]]):this.setSouthWest(u[0]).setNorthEast(u[1]))};Rd.prototype.setNorthEast=
function(u){this._ne=u instanceof Fe?new Fe(u.lng,u.lat):Fe.convert(u);return this};Rd.prototype.setSouthWest=function(u){this._sw=u instanceof Fe?new Fe(u.lng,u.lat):Fe.convert(u);return this};Rd.prototype.extend=function(u){var E=this._sw,P=this._ne;if(u instanceof Fe)var ea=u;else if(u instanceof Rd){if(ea=u._sw,u=u._ne,!ea||!u)return this}else return Array.isArray(u)?4===u.length||u.every(Array.isArray)?this.extend(Rd.convert(u)):this.extend(Fe.convert(u)):this;E||P?(E.lng=Math.min(ea.lng,E.lng),
E.lat=Math.min(ea.lat,E.lat),P.lng=Math.max(u.lng,P.lng),P.lat=Math.max(u.lat,P.lat)):(this._sw=new Fe(ea.lng,ea.lat),this._ne=new Fe(u.lng,u.lat));return this};Rd.prototype.getCenter=function(){return new Fe((this._sw.lng+this._ne.lng)/2,(this._sw.lat+this._ne.lat)/2)};Rd.prototype.getSouthWest=function(){return this._sw};Rd.prototype.getNorthEast=function(){return this._ne};Rd.prototype.getNorthWest=function(){return new Fe(this.getWest(),this.getNorth())};Rd.prototype.getSouthEast=function(){return new Fe(this.getEast(),
this.getSouth())};Rd.prototype.getWest=function(){return this._sw.lng};Rd.prototype.getSouth=function(){return this._sw.lat};Rd.prototype.getEast=function(){return this._ne.lng};Rd.prototype.getNorth=function(){return this._ne.lat};Rd.prototype.toArray=function(){return[this._sw.toArray(),this._ne.toArray()]};Rd.prototype.toString=function(){return"LngLatBounds("+this._sw.toString()+", "+this._ne.toString()+")"};Rd.prototype.isEmpty=function(){return!(this._sw&&this._ne)};Rd.prototype.contains=function(u){var E=
Fe.convert(u);u=E.lng;E=E.lat;E=this._sw.lat<=E&&E<=this._ne.lat;var P=this._sw.lng<=u&&u<=this._ne.lng;this._sw.lng>this._ne.lng&&(P=this._sw.lng>=u&&u>=this._ne.lng);return E&&P};Rd.convert=function(u){return!u||u instanceof Rd?u:new Rd(u)};var Fe=function(u,E){if(isNaN(u)||isNaN(E))throw Error("Invalid LngLat object: ("+u+", "+E+")");this.lng=+u;this.lat=+E;if(90<this.lat||-90>this.lat)throw Error("Invalid LngLat latitude value: must be between -90 and 90");};Fe.prototype.wrap=function(){return new Fe(e(this.lng,
-180,180),this.lat)};Fe.prototype.toArray=function(){return[this.lng,this.lat]};Fe.prototype.toString=function(){return"LngLat("+this.lng+", "+this.lat+")"};Fe.prototype.distanceTo=function(u){var E=Math.PI/180,P=this.lat*E,ea=u.lat*E;return 6371008.8*Math.acos(Math.min(Math.sin(P)*Math.sin(ea)+Math.cos(P)*Math.cos(ea)*Math.cos((u.lng-this.lng)*E),1))};Fe.prototype.toBounds=function(u){void 0===u&&(u=0);u=360*u/40075017;var E=u/Math.cos(Math.PI/180*this.lat);return new Rd(new Fe(this.lng-E,this.lat-
u),new Fe(this.lng+E,this.lat+u))};Fe.convert=function(u){if(u instanceof Fe)return u;if(Array.isArray(u)&&(2===u.length||3===u.length))return new Fe(Number(u[0]),Number(u[1]));if(!Array.isArray(u)&&"object"===typeof u&&null!==u)return new Fe(Number("lng"in u?u.lng:u.lon),Number(u.lat));throw Error("`LngLatLike` argument must be specified as a LngLat instance, an object {lng: \x3clng\x3e, lat: \x3clat\x3e}, an object {lon: \x3clng\x3e, lat: \x3clat\x3e}, or an array of [\x3clng\x3e, \x3clat\x3e]");
};var Kf=1.27420176E7*Math.PI,tf=function(u,E,P){void 0===P&&(P=0);this.x=+u;this.y=+E;this.z=+P};tf.fromLngLat=function(u,E){void 0===E&&(E=0);u=Fe.convert(u);return new tf(Xg(u.lng),oi(u.lat),E/(Kf*Math.cos(u.lat*Math.PI/180)))};tf.prototype.toLngLat=function(){return new Fe(360*this.x-180,Lg(this.y))};tf.prototype.toAltitude=function(){return this.z*Kf*Math.cos(Lg(this.y)*Math.PI/180)};tf.prototype.meterInMercatorCoordinateUnits=function(){return 1/Kf*(1/Math.cos(Lg(this.y)*Math.PI/180))};var td=
function(u,E,P){this.z=u;this.x=E;this.y=P;this.key=Rh(0,u,u,E,P)};td.prototype.equals=function(u){return this.z===u.z&&this.x===u.x&&this.y===u.y};td.prototype.url=function(u,E){var P=this.x,ea=this.y,qa=this.z;ea=Math.pow(2,qa)-ea-1;var xa=Nh(256*P,256*ea,qa);P=Nh(256*(P+1),256*(ea+1),qa);xa=xa[0]+","+xa[1]+","+P[0]+","+P[1];P="";for(qa=this.z;0<qa;qa--)ea=1<<qa-1,P+=(this.x&ea?1:0)+(this.y&ea?2:0);return u[(this.x+this.y)%u.length].replace("{prefix}",(this.x%16).toString(16)+(this.y%16).toString(16)).replace("{z}",
String(this.z)).replace("{x}",String(this.x)).replace("{y}",String("tms"===E?Math.pow(2,this.z)-this.y-1:this.y)).replace("{quadkey}",P).replace("{bbox-epsg-3857}",xa)};td.prototype.getTilePoint=function(u){var E=Math.pow(2,this.z);return new af(8192*(u.x*E-this.x),8192*(u.y*E-this.y))};td.prototype.toString=function(){return this.z+"/"+this.x+"/"+this.y};var gd=function(u,E){this.wrap=u;this.canonical=E;this.key=Rh(u,E.z,E.z,E.x,E.y)},jd=function(u,E,P,ea,qa){this.overscaledZ=u;this.wrap=E;this.canonical=
new td(P,+ea,+qa);this.key=Rh(E,u,P,ea,qa)};jd.prototype.equals=function(u){return this.overscaledZ===u.overscaledZ&&this.wrap===u.wrap&&this.canonical.equals(u.canonical)};jd.prototype.scaledTo=function(u){var E=this.canonical.z-u;return u>this.canonical.z?new jd(u,this.wrap,this.canonical.z,this.canonical.x,this.canonical.y):new jd(u,this.wrap,u,this.canonical.x>>E,this.canonical.y>>E)};jd.prototype.calculateScaledKey=function(u,E){var P=this.canonical.z-u;return u>this.canonical.z?Rh(this.wrap*
+E,u,this.canonical.z,this.canonical.x,this.canonical.y):Rh(this.wrap*+E,u,u,this.canonical.x>>P,this.canonical.y>>P)};jd.prototype.isChildOf=function(u){if(u.wrap!==this.wrap)return!1;var E=this.canonical.z-u.canonical.z;return 0===u.overscaledZ||u.overscaledZ<this.overscaledZ&&u.canonical.x===this.canonical.x>>E&&u.canonical.y===this.canonical.y>>E};jd.prototype.children=function(u){if(this.overscaledZ>=u)return[new jd(this.overscaledZ+1,this.wrap,this.canonical.z,this.canonical.x,this.canonical.y)];
u=this.canonical.z+1;var E=2*this.canonical.x,P=2*this.canonical.y;return[new jd(u,this.wrap,u,E,P),new jd(u,this.wrap,u,E+1,P),new jd(u,this.wrap,u,E,P+1),new jd(u,this.wrap,u,E+1,P+1)]};jd.prototype.isLessThan=function(u){return this.wrap<u.wrap?!0:this.wrap>u.wrap?!1:this.overscaledZ<u.overscaledZ?!0:this.overscaledZ>u.overscaledZ?!1:this.canonical.x<u.canonical.x?!0:this.canonical.x>u.canonical.x?!1:this.canonical.y<u.canonical.y?!0:!1};jd.prototype.wrapped=function(){return new jd(this.overscaledZ,
0,this.canonical.z,this.canonical.x,this.canonical.y)};jd.prototype.unwrapTo=function(u){return new jd(this.overscaledZ,u,this.canonical.z,this.canonical.x,this.canonical.y)};jd.prototype.overscaleFactor=function(){return Math.pow(2,this.overscaledZ-this.canonical.z)};jd.prototype.toUnwrapped=function(){return new gd(this.wrap,this.canonical)};jd.prototype.toString=function(){return this.overscaledZ+"/"+this.canonical.x+"/"+this.canonical.y};jd.prototype.getTilePoint=function(u){return this.canonical.getTilePoint(new tf(u.x-
this.wrap,u.y))};Ob("CanonicalTileID",td);Ob("OverscaledTileID",jd,{omit:["posMatrix"]});var Zd=function(u,E,P){this.uid=u;if(E.height!==E.width)throw new RangeError("DEM tiles must be square");if(P&&"mapbox"!==P&&"terrarium"!==P)return D('"'+P+'" is not a valid encoding type. Valid types include "mapbox" and "terrarium".');this.stride=E.height;u=this.dim=E.height-2;this.data=new Uint32Array(E.data.buffer);this.encoding=P||"mapbox";for(E=0;E<u;E++)this.data[this._idx(-1,E)]=this.data[this._idx(0,
E)],this.data[this._idx(u,E)]=this.data[this._idx(u-1,E)],this.data[this._idx(E,-1)]=this.data[this._idx(E,0)],this.data[this._idx(E,u)]=this.data[this._idx(E,u-1)];this.data[this._idx(-1,-1)]=this.data[this._idx(0,0)];this.data[this._idx(u,-1)]=this.data[this._idx(u-1,0)];this.data[this._idx(-1,u)]=this.data[this._idx(0,u-1)];this.data[this._idx(u,u)]=this.data[this._idx(u-1,u-1)]};Zd.prototype.get=function(u,E){var P=new Uint8Array(this.data.buffer);u=4*this._idx(u,E);return("terrarium"===this.encoding?
this._unpackTerrarium:this._unpackMapbox)(P[u],P[u+1],P[u+2])};Zd.prototype.getUnpackVector=function(){return"terrarium"===this.encoding?[256,1,1/256,32768]:[6553.6,25.6,.1,1E4]};Zd.prototype._idx=function(u,E){if(-1>u||u>=this.dim+1||-1>E||E>=this.dim+1)throw new RangeError("out of range source coordinates for DEM data");return(E+1)*this.stride+(u+1)};Zd.prototype._unpackMapbox=function(u,E,P){return(65536*u+256*E+P)/10-1E4};Zd.prototype._unpackTerrarium=function(u,E,P){return 256*u+E+P/256-32768};
Zd.prototype.getPixels=function(){return new ag({width:this.stride,height:this.stride},new Uint8Array(this.data.buffer))};Zd.prototype.backfillBorder=function(u,E,P){if(this.dim!==u.dim)throw Error("dem dimension mismatch");var ea=E*this.dim,qa=E*this.dim+this.dim,xa=P*this.dim,Ea=P*this.dim+this.dim;switch(E){case -1:ea=qa-1;break;case 1:qa=ea+1}switch(P){case -1:xa=Ea-1;break;case 1:Ea=xa+1}E=-E*this.dim;for(P=-P*this.dim;xa<Ea;xa++)for(var Va=ea;Va<qa;Va++)this.data[this._idx(Va,xa)]=u.data[this._idx(Va+
E,xa+P)]};Ob("DEMData",Zd);var ie=function(u){this._stringToNumber={};this._numberToString=[];for(var E=0;E<u.length;E++){var P=u[E];this._stringToNumber[P]=E;this._numberToString[E]=P}};ie.prototype.encode=function(u){return this._stringToNumber[u]};ie.prototype.decode=function(u){return this._numberToString[u]};var Qf=function(u,E,P,ea,qa){this.type="Feature";this._vectorTileFeature=u;u._z=E;u._x=P;u._y=ea;this.properties=u.properties;this.id=qa},cf={geometry:{configurable:!0}};cf.geometry.get=
function(){void 0===this._geometry&&(this._geometry=this._vectorTileFeature.toGeoJSON(this._vectorTileFeature._x,this._vectorTileFeature._y,this._vectorTileFeature._z).geometry);return this._geometry};cf.geometry.set=function(u){this._geometry=u};Qf.prototype.toJSON=function(){var u={geometry:this.geometry},E;for(E in this)"_geometry"!==E&&"_vectorTileFeature"!==E&&(u[E]=this[E]);return u};Object.defineProperties(Qf.prototype,cf);var Lf=function(){this.state={};this.stateChanges={};this.deletedStates=
{}};Lf.prototype.updateState=function(u,E,P){E=String(E);this.stateChanges[u]=this.stateChanges[u]||{};this.stateChanges[u][E]=this.stateChanges[u][E]||{};f(this.stateChanges[u][E],P);if(null===this.deletedStates[u]){this.deletedStates[u]={};for(var ea in this.state[u])ea!==E&&(this.deletedStates[u][ea]=null)}else if(this.deletedStates[u]&&null===this.deletedStates[u][E]){this.deletedStates[u][E]={};for(var qa in this.state[u][E])P[qa]||(this.deletedStates[u][E][qa]=null)}else for(var xa in P)this.deletedStates[u]&&
this.deletedStates[u][E]&&null===this.deletedStates[u][E][xa]&&delete this.deletedStates[u][E][xa]};Lf.prototype.removeFeatureState=function(u,E,P){if(null!==this.deletedStates[u]){var ea=String(E);this.deletedStates[u]=this.deletedStates[u]||{};if(P&&void 0!==E)null!==this.deletedStates[u][ea]&&(this.deletedStates[u][ea]=this.deletedStates[u][ea]||{},this.deletedStates[u][ea][P]=null);else if(void 0!==E)if(this.stateChanges[u]&&this.stateChanges[u][ea])for(P in this.deletedStates[u][ea]={},this.stateChanges[u][ea])this.deletedStates[u][ea][P]=
null;else this.deletedStates[u][ea]=null;else this.deletedStates[u]=null}};Lf.prototype.getState=function(u,E){var P=String(E);P=f({},(this.state[u]||{})[P],(this.stateChanges[u]||{})[P]);if(null===this.deletedStates[u])return{};if(this.deletedStates[u]){u=this.deletedStates[u][E];if(null===u)return{};for(var ea in u)delete P[ea]}return P};Lf.prototype.initializeTileState=function(u,E){u.setFeatureState(this.state,E)};Lf.prototype.coalesceChanges=function(u,E){var P={};for(Ea in this.stateChanges){this.state[Ea]=
this.state[Ea]||{};var ea={},qa;for(qa in this.stateChanges[Ea])this.state[Ea][qa]||(this.state[Ea][qa]={}),f(this.state[Ea][qa],this.stateChanges[Ea][qa]),ea[qa]=this.state[Ea][qa];P[Ea]=ea}for(var xa in this.deletedStates){this.state[xa]=this.state[xa]||{};var Ea={};if(null===this.deletedStates[xa])for(var Va in this.state[xa])Ea[Va]={},this.state[xa][Va]={};else for(var Ya in this.deletedStates[xa]){if(null===this.deletedStates[xa][Ya])this.state[xa][Ya]={};else for(ea=0,qa=Object.keys(this.deletedStates[xa][Ya]);ea<
qa.length;ea+=1)delete this.state[xa][Ya][qa[ea]];Ea[Ya]=this.state[xa][Ya]}P[xa]=P[xa]||{};f(P[xa],Ea)}this.stateChanges={};this.deletedStates={};if(0!==Object.keys(P).length)for(var gb in u)u[gb].setFeatureState(P,E)};var Sf=function(u,E){this.tileID=u;this.x=u.canonical.x;this.y=u.canonical.y;this.z=u.canonical.z;this.grid=new Bd(8192,16,0);this.grid3D=new Bd(8192,16,0);this.featureIndexArray=new Lk;this.promoteId=E};Sf.prototype.insert=function(u,E,P,ea,qa,xa){u=this.featureIndexArray.length;
this.featureIndexArray.emplaceBack(P,ea,qa);P=xa?this.grid3D:this.grid;for(ea=0;ea<E.length;ea++){qa=E[ea];xa=[Infinity,Infinity,-Infinity,-Infinity];for(var Ea=0;Ea<qa.length;Ea++){var Va=qa[Ea];xa[0]=Math.min(xa[0],Va.x);xa[1]=Math.min(xa[1],Va.y);xa[2]=Math.max(xa[2],Va.x);xa[3]=Math.max(xa[3],Va.y)}8192>xa[0]&&8192>xa[1]&&0<=xa[2]&&0<=xa[3]&&P.insert(u,xa[0],xa[1],xa[2],xa[3])}};Sf.prototype.loadVTLayers=function(){this.vtLayers||(this.vtLayers=(new Jj.VectorTile(new He(this.rawTileData))).layers,
this.sourceLayerCoder=new ie(this.vtLayers?Object.keys(this.vtLayers).sort():["_geojsonTileLayer"]));return this.vtLayers};Sf.prototype.query=function(u,E,P,ea){var qa=this;this.loadVTLayers();var xa=u.params||{},Ea=8192/u.tileSize/u.scale,Va=Vc(xa.filter),Ya=u.queryGeometry,gb=u.queryPadding*Ea,Fb=Dh(Ya),Sb=this.grid.query(Fb.minX-gb,Fb.minY-gb,Fb.maxX+gb,Fb.maxY+gb),jc=Dh(u.cameraQueryGeometry);Fb=0;for(jc=this.grid3D.query(jc.minX-gb,jc.minY-gb,jc.maxX+gb,jc.maxY+gb,function(Hc,vd,ce,Ed){a:{var Kd=
u.cameraQueryGeometry;Hc-=gb;vd-=gb;ce+=gb;Ed+=gb;for(var fe=0;fe<Kd.length;fe+=1){var te=Kd[fe];if(Hc<=te.x&&vd<=te.y&&ce>=te.x&&Ed>=te.y){Kd=!0;break a}}Hc=[new af(Hc,vd),new af(Hc,Ed),new af(ce,Ed),new af(ce,vd)];if(2<Kd.length)for(vd=0;vd<Hc.length;vd+=1)if(bf(Kd,Hc[vd])){Kd=!0;break a}for(vd=0;vd<Kd.length-1;vd++){Ed=Kd[vd];ce=Kd[vd+1];fe=Hc;te=fe[0];var Me=fe[2];Ed.x<te.x&&ce.x<te.x||Ed.x>Me.x&&ce.x>Me.x||Ed.y<te.y&&ce.y<te.y||Ed.y>Me.y&&ce.y>Me.y?Ed=!1:(te=C(Ed,ce,fe[0]),Ed=te!==C(Ed,ce,fe[1])||
te!==C(Ed,ce,fe[2])||te!==C(Ed,ce,fe[3]));if(Ed){Kd=!0;break a}}Kd=!1}return Kd});Fb<jc.length;Fb+=1)Sb.push(jc[Fb]);Sb.sort(Jh);var Dc={},xc;Fb=function(Hc){Hc=Sb[Hc];if(Hc!==xc){xc=Hc;Hc=qa.featureIndexArray.get(Hc);var vd=null;qa.loadMatchingFeature(Dc,Hc.bucketIndex,Hc.sourceLayerIndex,Hc.featureIndex,Va,xa.layers,xa.availableImages,E,P,ea,function(ce,Ed,Kd){vd||(vd=wc(ce));return Ed.queryIntersectsFeature(Ya,ce,Kd,vd,qa.z,u.transform,Ea,u.pixelPosMatrix)})}};for(jc=0;jc<Sb.length;jc++)Fb(jc);
return Dc};Sf.prototype.loadMatchingFeature=function(u,E,P,ea,qa,xa,Ea,Va,Ya,gb,Fb){E=this.bucketLayerIDs[E];var Sb;if(Sb=xa){a:{for(Sb=0;Sb<xa.length;Sb++)if(0<=E.indexOf(xa[Sb])){Sb=!0;break a}Sb=!1}Sb=!Sb}if(!Sb&&(Sb=this.sourceLayerCoder.decode(P),P=this.vtLayers[Sb].feature(ea),qa.filter(new Ag(this.tileID.overscaledZ),P)))for(qa=this.getId(P,Sb),Sb=0;Sb<E.length;Sb++){var jc=E[Sb];if(!(xa&&0>xa.indexOf(jc))){var Dc=Va[jc];if(Dc){var xc={};void 0!==qa&&gb&&(xc=gb.getState(Dc.sourceLayer||"_geojsonTileLayer",
qa));var Hc=Ya[jc];Hc.paint=ph(Hc.paint,Dc.paint,P,xc,Ea);Hc.layout=ph(Hc.layout,Dc.layout,P,xc,Ea);if(Dc=!Fb||Fb(P,Dc,xc))xc=new Qf(P,this.z,this.x,this.y,qa),xc.layer=Hc,Hc=u[jc],void 0===Hc&&(Hc=u[jc]=[]),Hc.push({featureIndex:ea,feature:xc,intersectionZ:Dc})}}}};Sf.prototype.lookupSymbolFeatures=function(u,E,P,ea,qa,xa,Ea,Va){var Ya={};this.loadVTLayers();qa=Vc(qa);for(var gb=0;gb<u.length;gb+=1)this.loadMatchingFeature(Ya,P,ea,u[gb],qa,xa,Ea,Va,E);return Ya};Sf.prototype.hasLayer=function(u){for(var E=
0,P=this.bucketLayerIDs;E<P.length;E+=1)for(var ea=0,qa=P[E];ea<qa.length;ea+=1)if(u===qa[ea])return!0;return!1};Sf.prototype.getId=function(u,E){var P=u.id;this.promoteId&&(P=u.properties["string"===typeof this.promoteId?this.promoteId:this.promoteId[E]],"boolean"===typeof P&&(P=Number(P)));return P};Ob("FeatureIndex",Sf,{omit:["rawTileData","sourceLayerCoder"]});var jf=function(u,E){this.tileID=u;this.uid=Ti++;this.uses=0;this.tileSize=E;this.buckets={};this.expirationTime=null;this.queryPadding=
0;this.hasRTLText=this.hasSymbolBuckets=!1;this.dependencies={};this.expiredRequestCount=0;this.state="loading"};jf.prototype.registerFadeDuration=function(u){u+=this.timeAdded;u<va.now()||this.fadeEndTime&&u<this.fadeEndTime||(this.fadeEndTime=u)};jf.prototype.wasRequested=function(){return"errored"===this.state||"loaded"===this.state||"reloading"===this.state};jf.prototype.loadVectorData=function(u,E,P){this.hasData()&&this.unloadVectorData();this.state="loaded";if(u){u.featureIndex&&(this.latestFeatureIndex=
u.featureIndex,u.rawTileData?(this.latestRawTileData=u.rawTileData,this.latestFeatureIndex.rawTileData=u.rawTileData):this.latestRawTileData&&(this.latestFeatureIndex.rawTileData=this.latestRawTileData));this.collisionBoxArray=u.collisionBoxArray;this.buckets=ai(u.buckets,E.style);this.hasSymbolBuckets=!1;for(var ea in this.buckets){var qa=this.buckets[ea];if(qa instanceof ig)if(this.hasSymbolBuckets=!0,P)qa.justReloaded=!0;else break}this.hasRTLText=!1;if(this.hasSymbolBuckets)for(var xa in this.buckets)if(P=
this.buckets[xa],P instanceof ig&&P.hasRTLText){this.hasRTLText=!0;bi.isLoading()||bi.isLoaded()||"deferred"!==Eh||Dj();break}this.queryPadding=0;for(var Ea in this.buckets)xa=this.buckets[Ea],this.queryPadding=Math.max(this.queryPadding,E.style.getLayer(Ea).queryRadius(xa));u.imageAtlas&&(this.imageAtlas=u.imageAtlas);u.glyphAtlasImage&&(this.glyphAtlasImage=u.glyphAtlasImage)}else this.collisionBoxArray=new Zj};jf.prototype.unloadVectorData=function(){for(var u in this.buckets)this.buckets[u].destroy();
this.buckets={};this.imageAtlasTexture&&this.imageAtlasTexture.destroy();this.imageAtlas&&(this.imageAtlas=null);this.glyphAtlasTexture&&this.glyphAtlasTexture.destroy();this.latestFeatureIndex=null;this.state="unloaded"};jf.prototype.getBucket=function(u){return this.buckets[u.id]};jf.prototype.upload=function(u){for(var E in this.buckets){var P=this.buckets[E];P.uploadPending()&&P.upload(u)}E=u.gl;this.imageAtlas&&!this.imageAtlas.uploaded&&(this.imageAtlasTexture=new Jd(u,this.imageAtlas.image,
E.RGBA),this.imageAtlas.uploaded=!0);this.glyphAtlasImage&&(this.glyphAtlasTexture=new Jd(u,this.glyphAtlasImage,E.ALPHA),this.glyphAtlasImage=null)};jf.prototype.prepare=function(u){this.imageAtlas&&this.imageAtlas.patchUpdatedImages(u,this.imageAtlasTexture)};jf.prototype.queryRenderedFeatures=function(u,E,P,ea,qa,xa,Ea,Va,Ya,gb){return this.latestFeatureIndex&&this.latestFeatureIndex.rawTileData?this.latestFeatureIndex.query({queryGeometry:ea,cameraQueryGeometry:qa,scale:xa,tileSize:this.tileSize,
pixelPosMatrix:gb,transform:Va,params:Ea,queryPadding:this.queryPadding*Ya},u,E,P):{}};jf.prototype.querySourceFeatures=function(u,E){var P=this.latestFeatureIndex;if(P&&P.rawTileData){var ea=P.loadVTLayers(),qa=E?E.sourceLayer:"";if(ea=ea._geojsonTileLayer||ea[qa]){E=Vc(E&&E.filter);var xa=this.tileID.canonical,Ea=xa.z,Va=xa.x;xa=xa.y;for(var Ya={z:Ea,x:Va,y:xa},gb=0;gb<ea.length;gb++){var Fb=ea.feature(gb);if(E.filter(new Ag(this.tileID.overscaledZ),Fb)){var Sb=P.getId(Fb,qa);Fb=new Qf(Fb,Ea,Va,
xa,Sb);Fb.tile=Ya;u.push(Fb)}}}}};jf.prototype.hasData=function(){return"loaded"===this.state||"reloading"===this.state||"expired"===this.state};jf.prototype.patternsLoaded=function(){return this.imageAtlas&&!!Object.keys(this.imageAtlas.patternPositions).length};jf.prototype.setExpiryData=function(u){var E=this.expirationTime;u.cacheControl?(u=y(u.cacheControl),u["max-age"]&&(this.expirationTime=Date.now()+1E3*u["max-age"])):u.expires&&(this.expirationTime=(new Date(u.expires)).getTime());if(this.expirationTime){u=
Date.now();var P=!1;this.expirationTime>u?P=!1:E?this.expirationTime<E?P=!0:(E=this.expirationTime-E)?this.expirationTime=u+Math.max(E,3E4):P=!0:P=!0;P?(this.expiredRequestCount++,this.state="expired"):this.expiredRequestCount=0}};jf.prototype.getExpiryTimeout=function(){if(this.expirationTime)return this.expiredRequestCount?1E3*(1<<Math.min(this.expiredRequestCount-1,31)):Math.min(this.expirationTime-(new Date).getTime(),Math.pow(2,31)-1)};jf.prototype.setFeatureState=function(u,E){if(this.latestFeatureIndex&&
this.latestFeatureIndex.rawTileData&&0!==Object.keys(u).length){var P=this.latestFeatureIndex.loadVTLayers(),ea;for(ea in this.buckets)if(E.style.hasLayer(ea)){var qa=this.buckets[ea],xa=qa.layers[0].sourceLayer||"_geojsonTileLayer",Ea=P[xa];xa=u[xa];Ea&&xa&&0!==Object.keys(xa).length&&(qa.update(xa,Ea,this.imageAtlas&&this.imageAtlas.patternPositions||{}),Ea=E&&E.style&&E.style.getLayer(ea))&&(this.queryPadding=Math.max(this.queryPadding,Ea.queryRadius(qa)))}}};jf.prototype.holdingForFade=function(){return void 0!==
this.symbolFadeHoldUntil};jf.prototype.symbolFadeFinished=function(){return!this.symbolFadeHoldUntil||this.symbolFadeHoldUntil<va.now()};jf.prototype.clearFadeHold=function(){this.symbolFadeHoldUntil=void 0};jf.prototype.setHoldDuration=function(u){this.symbolFadeHoldUntil=va.now()+u};jf.prototype.setDependencies=function(u,E){for(var P={},ea=0;ea<E.length;ea+=1)P[E[ea]]=!0;this.dependencies[u]=P};jf.prototype.hasDependency=function(u,E){for(var P=0;P<u.length;P+=1){var ea=this.dependencies[u[P]];
if(ea)for(var qa=0,xa=E;qa<xa.length;qa+=1)if(ea[xa[qa]])return!0}return!1};var Qh=self.performance,bl=function(u){this._marks={start:[u.url,"start"].join("#"),end:[u.url,"end"].join("#"),measure:u.url.toString()};Qh.mark(this._marks.start)};bl.prototype.finish=function(){Qh.mark(this._marks.end);var u=Qh.getEntriesByName(this._marks.measure);0===u.length&&(Qh.measure(this._marks.measure,this._marks.start,this._marks.end),u=Qh.getEntriesByName(this._marks.measure),Qh.clearMarks(this._marks.start),
Qh.clearMarks(this._marks.end),Qh.clearMeasures(this._marks.measure));return u};a.Actor=If;a.AlphaImage=ri;a.CanonicalTileID=td;a.CollisionBoxArray=Zj;a.Color=sd;a.DEMData=Zd;a.DataConstantProperty=Ze;a.DictionaryCoder=ie;a.EXTENT=8192;a.ErrorEvent=ua;a.EvaluationParameters=Ag;a.Event=ca;a.Evented=Ba;a.FeatureIndex=Sf;a.FillBucket=vi;a.FillExtrusionBucket=wi;a.ImageAtlas=wj;a.ImagePosition=Qe;a.LineBucket=tg;a.LngLat=Fe;a.LngLatBounds=Rd;a.MercatorCoordinate=tf;a.ONE_EM=24;a.OverscaledTileID=jd;a.Point=
af;a.Point$1=af;a.Properties=gh;a.Protobuf=He;a.RGBAImage=ag;a.RequestManager=Ic;a.RequestPerformance=bl;a.ResourceType=kf;a.SegmentVector=Vg;a.SourceFeatureState=Lf;a.StructArrayLayout1ui2=Mi;a.StructArrayLayout2f1f2i16=Ci;a.StructArrayLayout2i4=qj;a.StructArrayLayout3ui6=di;a.StructArrayLayout4i8=rj;a.SymbolBucket=ig;a.Texture=Jd;a.Tile=jf;a.Transitionable=Zh;a.Uniform1f=tj;a.Uniform1i=il;a.Uniform2f=Ij;a.Uniform3f=fj;a.Uniform4f=uj;a.UniformColor=Pi;a.UniformMatrix4f=qk;a.UnwrappedTileID=gd;a.ValidationError=
Ma;a.WritingMode=Ng;a.ZoomHistory=Fk;a.add=function(u,E,P){u[0]=E[0]+P[0];u[1]=E[1]+P[1];u[2]=E[2]+P[2];return u};a.addDynamicAttributes=Si;a.asyncAll=function(u,E,P){if(!u.length)return P(null,[]);var ea=u.length,qa=Array(u.length),xa=null;u.forEach(function(Ea,Va){E(Ea,function(Ya,gb){Ya&&(xa=Ya);qa[Va]=gb;0===--ea&&P(xa,qa)})})};a.bezier=c;a.bindAll=w;a.browser=va;a.cacheEntryPossiblyAdded=function(u){Le++;Le>ke&&(u.getActor().send("enforceCacheSizeLimit",be),Le=0)};a.clamp=d;a.clearTileCache=
function(u){var E=self.caches.delete("mapbox-tiles");u&&E.catch(u).then(function(){return u()})};a.clipLine=Zf;a.clone=function(u){var E=new eh(16);E[0]=u[0];E[1]=u[1];E[2]=u[2];E[3]=u[3];E[4]=u[4];E[5]=u[5];E[6]=u[6];E[7]=u[7];E[8]=u[8];E[9]=u[9];E[10]=u[10];E[11]=u[11];E[12]=u[12];E[13]=u[13];E[14]=u[14];E[15]=u[15];return E};a.clone$1=A;a.clone$2=function(u){var E=new eh(3);E[0]=u[0];E[1]=u[1];E[2]=u[2];return E};a.collisionCircleLayout=Mj;a.config=Ca;a.create=function(){var u=new eh(16);eh!=Float32Array&&
(u[1]=0,u[2]=0,u[3]=0,u[4]=0,u[6]=0,u[7]=0,u[8]=0,u[9]=0,u[11]=0,u[12]=0,u[13]=0,u[14]=0);u[0]=1;u[5]=1;u[10]=1;u[15]=1;return u};a.create$1=function(){var u=new eh(9);eh!=Float32Array&&(u[1]=0,u[2]=0,u[3]=0,u[5]=0,u[6]=0,u[7]=0);u[0]=1;u[4]=1;u[8]=1;return u};a.create$2=function(){var u=new eh(4);eh!=Float32Array&&(u[1]=0,u[2]=0);u[0]=1;u[3]=1;return u};a.createCommonjsModule=g;a.createExpression=lc;a.createLayout=xb;a.createStyleLayer=function(u){return"custom"===u.type?new ta(u):new Ra[u.type](u)};
a.cross=function(u,E,P){var ea=E[0],qa=E[1];E=E[2];var xa=P[0],Ea=P[1];P=P[2];u[0]=qa*P-E*Ea;u[1]=E*xa-ea*P;u[2]=ea*Ea-qa*xa;return u};a.deepEqual=l;a.dot=function(u,E){return u[0]*E[0]+u[1]*E[1]+u[2]*E[2]};a.dot$1=function(u,E){return u[0]*E[0]+u[1]*E[1]+u[2]*E[2]+u[3]*E[3]};a.ease=qh;a.emitValidationErrors=Zc;a.endsWith=x;a.enforceCacheSizeLimit=function(u){ba();re&&re.then(function(E){E.keys().then(function(P){for(var ea=0;ea<P.length-u;ea++)E.delete(P[ea])})})};a.evaluateSizeForFeature=df;a.evaluateSizeForZoom=
Se;a.evaluateVariableOffset=Ee;a.evented=Rj;a.extend=f;a.featureFilter=Vc;a.filterObject=B;a.fromRotation=function(u,E){var P=Math.sin(E);E=Math.cos(E);u[0]=E;u[1]=P;u[2]=0;u[3]=-P;u[4]=E;u[5]=0;u[6]=0;u[7]=0;u[8]=1;return u};a.getAnchorAlignment=Ld;a.getAnchorJustification=eg;a.getArrayBuffer=lg;a.getImage=hg;a.getJSON=function(u,E){return wf(f(u,{type:"json"}),E)};a.getRTLTextPluginStatus=function(){return Eh};a.getReferrer=xf;a.getVideo=function(u,E){var P=self.document.createElement("video");
P.muted=!0;P.onloadstart=function(){E(null,P)};for(var ea=0;ea<u.length;ea++){var qa=self.document.createElement("source");ma(u[ea])||(P.crossOrigin="Anonymous");qa.src=u[ea];P.appendChild(qa)}return{cancel:function(){}}};a.identity=Mf;a.invert=function(u,E){var P=E[0],ea=E[1],qa=E[2],xa=E[3],Ea=E[4],Va=E[5],Ya=E[6],gb=E[7],Fb=E[8],Sb=E[9],jc=E[10],Dc=E[11],xc=E[12],Hc=E[13],vd=E[14];E=E[15];var ce=P*Va-ea*Ea,Ed=P*Ya-qa*Ea,Kd=P*gb-xa*Ea,fe=ea*Ya-qa*Va,te=ea*gb-xa*Va,Me=qa*gb-xa*Ya,ue=Fb*Hc-Sb*xc,
lf=Fb*vd-jc*xc,Xe=Fb*E-Dc*xc,Ye=Sb*vd-jc*Hc,of=Sb*E-Dc*Hc,Hf=jc*E-Dc*vd,mf=ce*Hf-Ed*of+Kd*Ye+fe*Xe-te*lf+Me*ue;if(!mf)return null;mf=1/mf;u[0]=(Va*Hf-Ya*of+gb*Ye)*mf;u[1]=(qa*of-ea*Hf-xa*Ye)*mf;u[2]=(Hc*Me-vd*te+E*fe)*mf;u[3]=(jc*te-Sb*Me-Dc*fe)*mf;u[4]=(Ya*Xe-Ea*Hf-gb*lf)*mf;u[5]=(P*Hf-qa*Xe+xa*lf)*mf;u[6]=(vd*Kd-xc*Me-E*Ed)*mf;u[7]=(Fb*Me-jc*Kd+Dc*Ed)*mf;u[8]=(Ea*of-Va*Xe+gb*ue)*mf;u[9]=(ea*Xe-P*of-xa*ue)*mf;u[10]=(xc*te-Hc*Kd+E*ce)*mf;u[11]=(Sb*Kd-Fb*te-Dc*ce)*mf;u[12]=(Va*lf-Ea*Ye-Ya*ue)*mf;u[13]=
(P*Ye-ea*lf+qa*ue)*mf;u[14]=(Hc*Ed-xc*fe-vd*ce)*mf;u[15]=(Fb*fe-Sb*Ed+jc*ce)*mf;return u};a.isChar=Je;a.isMapboxURL=O;a.keysDifference=function(u,E){var P=[],ea;for(ea in u)ea in E||P.push(ea);return P};a.makeRequest=wf;a.mapObject=z;a.mercatorXfromLng=Xg;a.mercatorYfromLat=oi;a.mercatorZfromAltitude=function(u,E){return u/(Kf*Math.cos(E*Math.PI/180))};a.mul=ng;a.multiply=ng;a.mvt=Jj;a.normalize=function(u,E){var P=E[0],ea=E[1],qa=E[2];P=P*P+ea*ea+qa*qa;0<P&&(P=1/Math.sqrt(P));u[0]=E[0]*P;u[1]=E[1]*
P;u[2]=E[2]*P;return u};a.number=ob;a.offscreenCanvasSupported=W;a.ortho=function(u,E,P,ea,qa,xa,Ea){var Va=1/(E-P),Ya=1/(ea-qa),gb=1/(xa-Ea);u[0]=-2*Va;u[1]=0;u[2]=0;u[3]=0;u[4]=0;u[5]=-2*Ya;u[6]=0;u[7]=0;u[8]=0;u[9]=0;u[10]=2*gb;u[11]=0;u[12]=(E+P)*Va;u[13]=(qa+ea)*Ya;u[14]=(Ea+xa)*gb;u[15]=1;return u};a.parseGlyphPBF=function(u){return(new He(u)).readFields(Mb,[])};a.pbf=He;a.performSymbolLayout=function(u,E,P,ea,qa,xa,Ea){u.createArrays();u.tilePixelRatio=8192/(512*u.overscaling);u.compareText=
{};u.iconsNeedLinear=!1;var Va=u.layers[0].layout,Ya=u.layers[0]._unevaluatedLayout._values,gb={};if("composite"===u.textSizeData.kind){var Fb=u.textSizeData,Sb=Fb.maxZoom;gb.compositeTextSizes=[Ya["text-size"].possiblyEvaluate(new Ag(Fb.minZoom),Ea),Ya["text-size"].possiblyEvaluate(new Ag(Sb),Ea)]}"composite"===u.iconSizeData.kind&&(Fb=u.iconSizeData,Sb=Fb.maxZoom,gb.compositeIconSizes=[Ya["icon-size"].possiblyEvaluate(new Ag(Fb.minZoom),Ea),Ya["icon-size"].possiblyEvaluate(new Ag(Sb),Ea)]);gb.layoutTextSize=
Ya["text-size"].possiblyEvaluate(new Ag(u.zoom+1),Ea);gb.layoutIconSize=Ya["icon-size"].possiblyEvaluate(new Ag(u.zoom+1),Ea);gb.textMaxSize=Ya["text-size"].possiblyEvaluate(new Ag(18));var jc=24*Va.get("text-line-height"),Dc="map"===Va.get("text-rotation-alignment")&&"point"!==Va.get("symbol-placement"),xc=Va.get("text-keep-upright"),Hc=Va.get("text-size");Ya=function(){var Ed=ce[vd],Kd=Va.get("text-font").evaluate(Ed,{},Ea).join(","),fe=Hc.evaluate(Ed,{},Ea),te=gb.layoutTextSize.evaluate(Ed,{},
Ea),Me=gb.layoutIconSize.evaluate(Ed,{},Ea),ue={horizontal:{},vertical:void 0},lf=Ed.text,Xe=[0,0];if(lf){var Ye=lf.toString(),of=24*Va.get("text-letter-spacing").evaluate(Ed,{},Ea),Hf=pe(Ye)?of:0,mf=Va.get("text-anchor").evaluate(Ed,{},Ea),ff=Va.get("text-variable-anchor");ff||(Xe=(of=Va.get("text-radial-offset").evaluate(Ed,{},Ea))?Ee(mf,[24*of,Cj]):Va.get("text-offset").evaluate(Ed,{},Ea).map(function(fh){return 24*fh}));var Pe=Dc?"center":Va.get("text-justify").evaluate(Ed,{},Ea),$e=Va.get("symbol-placement"),
mg="point"===$e?24*Va.get("text-max-width").evaluate(Ed,{},Ea):0;of=function(){u.allowVerticalPlacement&&rd(Ye)&&(ue.vertical=nd(lf,E,P,qa,Kd,mg,jc,mf,"left",Hf,Xe,Ng.vertical,!0,$e,te,fe))};if(!Dc&&ff){ff="auto"===Pe?ff.map(function(fh){return eg(fh)}):[Pe];Pe=!1;for(var Hg=0;Hg<ff.length;Hg++){var Eg=ff[Hg];if(!ue.horizontal[Eg])if(Pe)ue.horizontal[Eg]=ue.horizontal[0];else{var lj=nd(lf,E,P,qa,Kd,mg,jc,"center",Eg,Hf,Xe,Ng.horizontal,!1,$e,te,fe);lj&&(ue.horizontal[Eg]=lj,Pe=1===lj.positionedLines.length)}}of()}else"auto"===
Pe&&(Pe=eg(mf)),(ff=nd(lf,E,P,qa,Kd,mg,jc,mf,Pe,Hf,Xe,Ng.horizontal,!1,$e,te,fe))&&(ue.horizontal[Pe]=ff),of(),rd(Ye)&&Dc&&xc&&(ue.vertical=nd(lf,E,P,qa,Kd,mg,jc,mf,Pe,Hf,Xe,Ng.vertical,!1,$e,te,fe))}of=void 0;ff=!1;Ed.icon&&Ed.icon.name&&(Pe=ea[Ed.icon.name])&&(of=$d(qa[Ed.icon.name],Va.get("icon-offset").evaluate(Ed,{},Ea),Va.get("icon-anchor").evaluate(Ed,{},Ea)),ff=Pe.sdf,void 0===u.sdfIcons?u.sdfIcons=Pe.sdf:u.sdfIcons!==Pe.sdf&&D("Style sheet warning: Cannot mix SDF and non-SDF icons in one buffer"),
Pe.pixelRatio!==u.pixelRatio?u.iconsNeedLinear=!0:0!==Va.get("icon-rotate").constantOr(1)&&(u.iconsNeedLinear=!0));Pe=Wi(ue.horizontal)||ue.vertical;u.iconsInText=Pe?Pe.iconsInText:!1;(Pe||of)&&Cg(u,Ed,ue,of,ea,gb,te,Me,Xe,ff,Ea)};for(var vd=0,ce=u.features;vd<ce.length;vd+=1)Ya();xa&&u.generateCollisionDebugBuffers()};a.perspective=function(u,E,P,ea,qa){E=1/Math.tan(E/2);u[0]=E/P;u[1]=0;u[2]=0;u[3]=0;u[4]=0;u[5]=E;u[6]=0;u[7]=0;u[8]=0;u[9]=0;u[11]=-1;u[12]=0;u[13]=0;u[15]=0;null!=qa&&Infinity!==
qa?(P=1/(ea-qa),u[10]=(qa+ea)*P,u[14]=2*qa*ea*P):(u[10]=-1,u[14]=-2*ea);return u};a.pick=function(u,E){for(var P={},ea=0;ea<E.length;ea++){var qa=E[ea];qa in u&&(P[qa]=u[qa])}return P};a.plugin=bi;a.polygonIntersectsPolygon=pc;a.postMapLoadEvent=ge;a.postTurnstileEvent=Qd;a.potpack=ed;a.refProperties="type source source-layer minzoom maxzoom filter layout".split(" ");a.register=Ob;a.registerForPluginStateChange=function(u){u({pluginStatus:Eh,pluginURL:Zi});Rj.on("pluginStateChange",u);return u};a.rotate=
function(u,E,P){var ea=E[0],qa=E[1],xa=E[2];E=E[3];var Ea=Math.sin(P);P=Math.cos(P);u[0]=ea*P+xa*Ea;u[1]=qa*P+E*Ea;u[2]=ea*-Ea+xa*P;u[3]=qa*-Ea+E*P;return u};a.rotateX=function(u,E,P){var ea=Math.sin(P);P=Math.cos(P);var qa=E[4],xa=E[5],Ea=E[6],Va=E[7],Ya=E[8],gb=E[9],Fb=E[10],Sb=E[11];E!==u&&(u[0]=E[0],u[1]=E[1],u[2]=E[2],u[3]=E[3],u[12]=E[12],u[13]=E[13],u[14]=E[14],u[15]=E[15]);u[4]=qa*P+Ya*ea;u[5]=xa*P+gb*ea;u[6]=Ea*P+Fb*ea;u[7]=Va*P+Sb*ea;u[8]=Ya*P-qa*ea;u[9]=gb*P-xa*ea;u[10]=Fb*P-Ea*ea;u[11]=
Sb*P-Va*ea;return u};a.rotateZ=function(u,E,P){var ea=Math.sin(P);P=Math.cos(P);var qa=E[0],xa=E[1],Ea=E[2],Va=E[3],Ya=E[4],gb=E[5],Fb=E[6],Sb=E[7];E!==u&&(u[8]=E[8],u[9]=E[9],u[10]=E[10],u[11]=E[11],u[12]=E[12],u[13]=E[13],u[14]=E[14],u[15]=E[15]);u[0]=qa*P+Ya*ea;u[1]=xa*P+gb*ea;u[2]=Ea*P+Fb*ea;u[3]=Va*P+Sb*ea;u[4]=Ya*P-qa*ea;u[5]=gb*P-xa*ea;u[6]=Fb*P-Ea*ea;u[7]=Sb*P-Va*ea;return u};a.scale=function(u,E,P){var ea=P[0],qa=P[1];P=P[2];u[0]=E[0]*ea;u[1]=E[1]*ea;u[2]=E[2]*ea;u[3]=E[3]*ea;u[4]=E[4]*qa;
u[5]=E[5]*qa;u[6]=E[6]*qa;u[7]=E[7]*qa;u[8]=E[8]*P;u[9]=E[9]*P;u[10]=E[10]*P;u[11]=E[11]*P;u[12]=E[12];u[13]=E[13];u[14]=E[14];u[15]=E[15];return u};a.scale$1=function(u,E,P){u[0]=E[0]*P;u[1]=E[1]*P;u[2]=E[2]*P;u[3]=E[3]*P;return u};a.scale$2=function(u,E,P){u[0]=E[0]*P;u[1]=E[1]*P;u[2]=E[2]*P;return u};a.setCacheLimits=function(u,E){be=u;ke=E};a.setRTLTextPlugin=function(u,E,P){void 0===P&&(P=!1);if("deferred"===Eh||"loading"===Eh||"loaded"===Eh)throw Error("setRTLTextPlugin cannot be called multiple times.");
Zi=va.resolveURL(u);Eh="deferred";Gk=E;oe();P||Dj()};a.sphericalToCartesian=function(u){var E=u[0],P=u[1];u=u[2];P=Math.PI/180*(P+90);u*=Math.PI/180;return{x:E*Math.cos(P)*Math.sin(u),y:E*Math.sin(P)*Math.sin(u),z:E*Math.cos(u)}};a.sqrLen=function(u){var E=u[0];u=u[1];return E*E+u*u};a.styleSpec=Da;a.sub=function(u,E,P){u[0]=E[0]-P[0];u[1]=E[1]-P[1];u[2]=E[2]-P[2];return u};a.symbolSize=Ri;a.transformMat3=function(u,E,P){var ea=E[0],qa=E[1];E=E[2];u[0]=ea*P[0]+qa*P[3]+E*P[6];u[1]=ea*P[1]+qa*P[4]+
E*P[7];u[2]=ea*P[2]+qa*P[5]+E*P[8];return u};a.transformMat4=Ah;a.translate=function(u,E,P){var ea=P[0],qa=P[1];P=P[2];if(E===u)u[12]=E[0]*ea+E[4]*qa+E[8]*P+E[12],u[13]=E[1]*ea+E[5]*qa+E[9]*P+E[13],u[14]=E[2]*ea+E[6]*qa+E[10]*P+E[14],u[15]=E[3]*ea+E[7]*qa+E[11]*P+E[15];else{var xa=E[0];var Ea=E[1];var Va=E[2];var Ya=E[3];var gb=E[4];var Fb=E[5];var Sb=E[6];var jc=E[7];var Dc=E[8];var xc=E[9];var Hc=E[10];var vd=E[11];u[0]=xa;u[1]=Ea;u[2]=Va;u[3]=Ya;u[4]=gb;u[5]=Fb;u[6]=Sb;u[7]=jc;u[8]=Dc;u[9]=xc;
u[10]=Hc;u[11]=vd;u[12]=xa*ea+gb*qa+Dc*P+E[12];u[13]=Ea*ea+Fb*qa+xc*P+E[13];u[14]=Va*ea+Sb*qa+Hc*P+E[14];u[15]=Ya*ea+jc*qa+vd*P+E[15]}return u};a.triggerPluginCompletionEvent=Uk;a.uniqueId=function(){return Ti++};a.validateCustomStyleLayer=function(u){var E=[],P=u.id;void 0===P&&E.push({message:"layers."+P+': missing required property "id"'});void 0===u.render&&E.push({message:"layers."+P+': missing required method "render"'});u.renderingMode&&"2d"!==u.renderingMode&&"3d"!==u.renderingMode&&E.push({message:"layers."+
P+': property "renderingMode" must be either "2d" or "3d"'});return E};a.validateLight=el;a.validateStyle=Be;a.values=function(u){var E=[],P;for(P in u)E.push(u[P]);return E};a.vectorTile=Jj;a.version="1.10.1";a.warnOnce=D;a.webpSupported=Qa;a.window=self;a.wrap=e});p(["./shared"],function(a){function g(ya){var Aa=typeof ya;if("number"===Aa||"boolean"===Aa||"string"===Aa||void 0===ya||null===ya)return JSON.stringify(ya);if(Array.isArray(ya)){Aa="[";for(var Ja=0;Ja<ya.length;Ja+=1)Aa+=g(ya[Ja])+",";
return Aa+"]"}Aa=Object.keys(ya).sort();Ja="{";for(var Ta=0;Ta<Aa.length;Ta++)Ja+=JSON.stringify(Aa[Ta])+":"+g(ya[Aa[Ta]])+",";return Ja+"}"}function h(ya,Aa){for(var Ja={},Ta=0;Ta<ya.length;Ta++){var $a;if(!($a=Aa&&Aa[ya[Ta].id])){$a=ya[Ta];for(var ab="",Db=0,Nb=a.refProperties;Db<Nb.length;Db+=1)ab+="/"+g($a[Nb[Db]]);$a=ab}Aa&&(Aa[ya[Ta].id]=$a);(ab=Ja[$a])||(ab=Ja[$a]=[]);ab.push(ya[Ta])}ya=[];for(var ec in Ja)ya.push(Ja[ec]);return ya}function r(ya,Aa,Ja){Aa=new a.EvaluationParameters(Aa);for(var Ta=
0;Ta<ya.length;Ta+=1)ya[Ta].recalculate(Aa,Ja)}function l(ya,Aa){var Ja=a.getArrayBuffer(ya.request,function(Ta,$a,ab,Db){Ta?Aa(Ta):$a&&Aa(null,{vectorTile:new a.vectorTile.VectorTile(new a.pbf($a)),rawData:$a,cacheControl:ab,expires:Db})});return function(){Ja.cancel();Aa()}}function c(ya,Aa){var Ja=ya&&ya.type;if("FeatureCollection"===Ja)for(Ja=0;Ja<ya.features.length;Ja++)c(ya.features[Ja],Aa);else if("GeometryCollection"===Ja)for(Ja=0;Ja<ya.geometries.length;Ja++)c(ya.geometries[Ja],Aa);else if("Feature"===
Ja)c(ya.geometry,Aa);else if("Polygon"===Ja)d(ya.coordinates,Aa);else if("MultiPolygon"===Ja)for(Ja=0;Ja<ya.coordinates.length;Ja++)d(ya.coordinates[Ja],Aa);return ya}function d(ya,Aa){if(0!==ya.length){e(ya[0],Aa);for(var Ja=1;Ja<ya.length;Ja++)e(ya[Ja],!Aa)}}function e(ya,Aa){for(var Ja=0,Ta=0,$a=ya.length,ab=$a-1;Ta<$a;ab=Ta++)Ja+=(ya[Ta][0]-ya[ab][0])*(ya[ab][1]+ya[Ta][1]);0<=Ja!==!!Aa&&ya.reverse()}function f(ya,Aa){this.options=Aa||{};this.features=ya;this.length=ya.length}function q(ya,Aa){this.id=
"number"===typeof ya.id?ya.id:void 0;this.type=ya.type;this.rawGeometry=1===ya.type?[ya.geometry]:ya.geometry;this.properties=ya.tags;this.extent=Aa||4096}function t(ya){var Aa=new a.pbf,Ja;for(Ja in ya.layers)Aa.writeMessage(3,w,ya.layers[Ja]);return Aa.finish()}function w(ya,Aa){Aa.writeVarintField(15,ya.version||1);Aa.writeStringField(1,ya.name||"");Aa.writeVarintField(5,ya.extent||4096);var Ja,Ta={keys:[],values:[],keycache:{},valuecache:{}};for(Ja=0;Ja<ya.length;Ja++)Ta.feature=ya.feature(Ja),
Aa.writeMessage(2,x,Ta);ya=Ta.keys;for(Ja=0;Ja<ya.length;Ja++)Aa.writeStringField(3,ya[Ja]);Ta=Ta.values;for(Ja=0;Ja<Ta.length;Ja++)Aa.writeMessage(4,A,Ta[Ja])}function x(ya,Aa){var Ja=ya.feature;void 0!==Ja.id&&Aa.writeVarintField(1,Ja.id);Aa.writeMessage(2,z,ya);Aa.writeVarintField(3,Ja.type);Aa.writeMessage(4,B,Ja)}function z(ya,Aa){var Ja=ya.feature,Ta=ya.keys,$a=ya.values,ab=ya.keycache;ya=ya.valuecache;for(var Db in Ja.properties){var Nb=ab[Db];"undefined"===typeof Nb&&(Ta.push(Db),Nb=Ta.length-
1,ab[Db]=Nb);Aa.writeVarint(Nb);Nb=Ja.properties[Db];var ec=typeof Nb;"string"!==ec&&"boolean"!==ec&&"number"!==ec&&(Nb=JSON.stringify(Nb));ec=ec+":"+Nb;var ob=ya[ec];"undefined"===typeof ob&&($a.push(Nb),ob=$a.length-1,ya[ec]=ob);Aa.writeVarint(ob)}}function B(ya,Aa){var Ja=ya.loadGeometry();ya=ya.type;for(var Ta=0,$a=0,ab=Ja.length,Db=0;Db<ab;Db++){var Nb=Ja[Db],ec=1;1===ya&&(ec=Nb.length);Aa.writeVarint((ec<<3)+1);ec=3===ya?Nb.length-1:Nb.length;for(var ob=0;ob<ec;ob++){1===ob&&1!==ya&&Aa.writeVarint((ec-
1<<3)+2);var Cb=Nb[ob].x-Ta,Qb=Nb[ob].y-$a;Aa.writeVarint(Cb<<1^Cb>>31);Aa.writeVarint(Qb<<1^Qb>>31);Ta+=Cb;$a+=Qb}3===ya&&Aa.writeVarint(15)}}function A(ya,Aa){var Ja=typeof ya;"string"===Ja?Aa.writeStringField(1,ya):"boolean"===Ja?Aa.writeBooleanField(7,ya):"number"===Ja&&(0!==ya%1?Aa.writeDoubleField(3,ya):0>ya?Aa.writeSVarintField(6,ya):Aa.writeVarintField(5,ya))}function D(ya,Aa,Ja,Ta,$a,ab){if(!($a-Ta<=Ja)){var Db=Ta+$a>>1;C(ya,Aa,Db,Ta,$a,ab%2);D(ya,Aa,Ja,Ta,Db-1,ab+1);D(ya,Aa,Ja,Db+1,$a,ab+
1)}}function C(ya,Aa,Ja,Ta,$a,ab){for(;$a>Ta;){if(600<$a-Ta){var Db=$a-Ta+1,Nb=Ja-Ta+1,ec=Math.log(Db),ob=.5*Math.exp(2*ec/3);ec=.5*Math.sqrt(ec*ob*(Db-ob)/Db)*(0>Nb-Db/2?-1:1);C(ya,Aa,Ja,Math.max(Ta,Math.floor(Ja-Nb*ob/Db+ec)),Math.min($a,Math.floor(Ja+(Db-Nb)*ob/Db+ec)),ab)}Db=Aa[2*Ja+ab];Nb=Ta;ob=$a;v(ya,Aa,Ta,Ja);for(Aa[2*$a+ab]>Db&&v(ya,Aa,Ta,$a);Nb<ob;){v(ya,Aa,Nb,ob);Nb++;for(ob--;Aa[2*Nb+ab]<Db;)Nb++;for(;Aa[2*ob+ab]>Db;)ob--}Aa[2*Ta+ab]===Db?v(ya,Aa,Ta,ob):(ob++,v(ya,Aa,ob,$a));ob<=Ja&&(Ta=
ob+1);Ja<=ob&&($a=ob-1)}}function v(ya,Aa,Ja,Ta){y(ya,Ja,Ta);y(Aa,2*Ja,2*Ta);y(Aa,2*Ja+1,2*Ta+1)}function y(ya,Aa,Ja){var Ta=ya[Aa];ya[Aa]=ya[Ja];ya[Ja]=Ta}function F(ya){var Aa=ya.id,Ja=J(ya);return{type:"Feature",id:Aa,properties:Ja,geometry:{type:"Point",coordinates:[360*(ya.x-.5),360*Math.atan(Math.exp((180-360*ya.y)*Math.PI/180))/Math.PI-90]}}}function J(ya){var Aa=ya.numPoints,Ja=1E4<=Aa?Math.round(Aa/1E3)+"k":1E3<=Aa?Math.round(Aa/100)/10+"k":Aa;return M(M({},ya.properties),{cluster:!0,cluster_id:ya.id,
point_count:Aa,point_count_abbreviated:Ja})}function K(ya){ya=Math.sin(ya*Math.PI/180);ya=.5-.25*Math.log((1+ya)/(1-ya))/Math.PI;return 0>ya?0:1<ya?1:ya}function M(ya,Aa){for(var Ja in Aa)ya[Ja]=Aa[Ja];return ya}function H(ya){return ya.x}function O(ya){return ya.y}function I(ya,Aa,Ja,Ta){for(var $a=Ta,ab=Ja-Aa>>1,Db=Ja-Aa,Nb,ec=ya[Aa],ob=ya[Aa+1],Cb=ya[Ja],Qb=ya[Ja+1],yc=Aa+3;yc<Ja;yc+=3){var Jc=ya[yc];var Ia=ya[yc+1],Na=ec,ib=ob,Gb=Cb-Na,Hb=Qb-ib;if(0!==Gb||0!==Hb){var $b=((Jc-Na)*Gb+(Ia-ib)*Hb)/
(Gb*Gb+Hb*Hb);1<$b?(Na=Cb,ib=Qb):0<$b&&(Na+=Gb*$b,ib+=Hb*$b)}Gb=Jc-Na;Hb=Ia-ib;Jc=Gb*Gb+Hb*Hb;Jc>$a?(Nb=yc,$a=Jc):Jc===$a&&(Jc=Math.abs(yc-ab),Jc<Db&&(Nb=yc,Db=Jc))}$a>Ta&&(3<Nb-Aa&&I(ya,Aa,Nb,Ta),ya[Nb+2]=$a,3<Ja-Nb&&I(ya,Nb,Ja,Ta))}function L(ya,Aa,Ja,Ta){ya={id:"undefined"===typeof ya?null:ya,type:Aa,geometry:Ja,tags:Ta,minX:Infinity,minY:Infinity,maxX:-Infinity,maxY:-Infinity};Aa=ya.geometry;Ja=ya.type;if("Point"===Ja||"MultiPoint"===Ja||"LineString"===Ja)Q(ya,Aa);else if("Polygon"===Ja||"MultiLineString"===
Ja)for(Ja=0;Ja<Aa.length;Ja++)Q(ya,Aa[Ja]);else if("MultiPolygon"===Ja)for(Ja=0;Ja<Aa.length;Ja++)for(Ta=0;Ta<Aa[Ja].length;Ta++)Q(ya,Aa[Ja][Ta]);return ya}function Q(ya,Aa){for(var Ja=0;Ja<Aa.length;Ja+=3)ya.minX=Math.min(ya.minX,Aa[Ja]),ya.minY=Math.min(ya.minY,Aa[Ja+1]),ya.maxX=Math.max(ya.maxX,Aa[Ja]),ya.maxY=Math.max(ya.maxY,Aa[Ja+1])}function Z(ya,Aa,Ja,Ta){if(Aa.geometry){var $a=Aa.geometry.coordinates,ab=Aa.geometry.type,Db=Math.pow(Ja.tolerance/((1<<Ja.maxZoom)*Ja.extent),2),Nb=[],ec=Aa.id;
Ja.promoteId?ec=Aa.properties[Ja.promoteId]:Ja.generateId&&(ec=Ta||0);if("Point"===ab)ba($a,Nb);else if("MultiPoint"===ab)for(var ob=0;ob<$a.length;ob++)ba($a[ob],Nb);else if("LineString"===ab)V($a,Nb,Db,!1);else if("MultiLineString"===ab){if(Ja.lineMetrics){for(ob=0;ob<$a.length;ob++)Nb=[],V($a[ob],Nb,Db,!1),ya.push(L(ec,"LineString",Nb,Aa.properties));return}S($a,Nb,Db,!1)}else if("Polygon"===ab)S($a,Nb,Db,!0);else if("MultiPolygon"===ab)for(ob=0;ob<$a.length;ob++)Ja=[],S($a[ob],Ja,Db,!0),Nb.push(Ja);
else{if("GeometryCollection"===ab){for(ob=0;ob<Aa.geometry.geometries.length;ob++)Z(ya,{id:ec,geometry:Aa.geometry.geometries[ob],properties:Aa.properties},Ja,Ta);return}throw Error("Input data is not a valid GeoJSON object.");}ya.push(L(ec,ab,Nb,Aa.properties))}}function ba(ya,Aa){Aa.push(ya[0]/360+.5);Aa.push(T(ya[1]));Aa.push(0)}function V(ya,Aa,Ja,Ta){for(var $a,ab,Db=0,Nb=0;Nb<ya.length;Nb++){var ec=ya[Nb][0]/360+.5,ob=T(ya[Nb][1]);Aa.push(ec);Aa.push(ob);Aa.push(0);0<Nb&&(Db=Ta?Db+($a*ob-ec*
ab)/2:Db+Math.sqrt(Math.pow(ec-$a,2)+Math.pow(ob-ab,2)));$a=ec;ab=ob}ya=Aa.length-3;Aa[2]=1;I(Aa,0,ya,Ja);Aa[ya+2]=1;Aa.size=Math.abs(Db);Aa.start=0;Aa.end=Aa.size}function S(ya,Aa,Ja,Ta){for(var $a=0;$a<ya.length;$a++){var ab=[];V(ya[$a],ab,Ja,Ta);Aa.push(ab)}}function T(ya){ya=Math.sin(ya*Math.PI/180);ya=.5-.25*Math.log((1+ya)/(1-ya))/Math.PI;return 0>ya?0:1<ya?1:ya}function fa(ya,Aa,Ja,Ta,$a,ab,Db,Nb){Ja/=Aa;Ta/=Aa;if(ab>=Ja&&Db<Ta)return ya;if(Db<Ja||ab>=Ta)return null;Aa=[];for(ab=0;ab<ya.length;ab++){Db=
ya[ab];var ec=Db.geometry,ob=Db.type,Cb=0===$a?Db.minX:Db.minY,Qb=0===$a?Db.maxX:Db.maxY;if(Cb>=Ja&&Qb<Ta)Aa.push(Db);else if(!(Qb<Ja||Cb>=Ta)){Cb=[];if("Point"===ob||"MultiPoint"===ob){Qb=Cb;for(var yc=Ja,Jc=Ta,Ia=$a,Na=0;Na<ec.length;Na+=3){var ib=ec[Na+Ia];ib>=yc&&ib<=Jc&&(Qb.push(ec[Na]),Qb.push(ec[Na+1]),Qb.push(ec[Na+2]))}}else if("LineString"===ob)W(ec,Cb,Ja,Ta,$a,!1,Nb.lineMetrics);else if("MultiLineString"===ob)ja(ec,Cb,Ja,Ta,$a,!1);else if("Polygon"===ob)ja(ec,Cb,Ja,Ta,$a,!0);else if("MultiPolygon"===
ob)for(Qb=0;Qb<ec.length;Qb++)yc=[],ja(ec[Qb],yc,Ja,Ta,$a,!0),yc.length&&Cb.push(yc);if(Cb.length)if(Nb.lineMetrics&&"LineString"===ob)for(Qb=0;Qb<Cb.length;Qb++)Aa.push(L(Db.id,ob,Cb[Qb],Db.tags));else{if("LineString"===ob||"MultiLineString"===ob)1===Cb.length?(ob="LineString",Cb=Cb[0]):ob="MultiLineString";if("Point"===ob||"MultiPoint"===ob)ob=3===Cb.length?"Point":"MultiPoint";Aa.push(L(Db.id,ob,Cb,Db.tags))}}}return Aa.length?Aa:null}function W(ya,Aa,Ja,Ta,$a,ab,Db){for(var Nb=aa(ya),ec=0===$a?
ma:ia,ob=ya.start,Cb,Qb,yc=0;yc<ya.length-3;yc+=3){var Jc=ya[yc],Ia=ya[yc+1],Na=ya[yc+2],ib=ya[yc+3],Gb=ya[yc+4],Hb=0===$a?Jc:Ia,$b=0===$a?ib:Gb,uc=!1;Db&&(Cb=Math.sqrt(Math.pow(Jc-ib,2)+Math.pow(Ia-Gb,2)));if(Hb<Ja)$b>Ja&&(Qb=ec(Nb,Jc,Ia,ib,Gb,Ja),Db&&(Nb.start=ob+Cb*Qb));else if(Hb>Ta)$b<Ta&&(Qb=ec(Nb,Jc,Ia,ib,Gb,Ta),Db&&(Nb.start=ob+Cb*Qb));else{var fd=Nb,fb=Ia;fd.push(Jc);fd.push(fb);fd.push(Na)}$b<Ja&&Hb>=Ja&&(Qb=ec(Nb,Jc,Ia,ib,Gb,Ja),uc=!0);$b>Ta&&Hb<=Ta&&(Qb=ec(Nb,Jc,Ia,ib,Gb,Ta),uc=!0);!ab&&
uc&&(Db&&(Nb.end=ob+Cb*Qb),Aa.push(Nb),Nb=aa(ya));Db&&(ob+=Cb)}Na=ya.length-3;Jc=ya[Na];Ia=ya[Na+1];Na=ya[Na+2];Hb=0===$a?Jc:Ia;Hb>=Ja&&Hb<=Ta&&(ya=Nb,Ja=Na,ya.push(Jc),ya.push(Ia),ya.push(Ja));Na=Nb.length-3;ab&&3<=Na&&(Nb[Na]!==Nb[0]||Nb[Na+1]!==Nb[1])&&(ab=Nb,Jc=Nb[1],Ia=Nb[2],ab.push(Nb[0]),ab.push(Jc),ab.push(Ia));Nb.length&&Aa.push(Nb)}function aa(ya){var Aa=[];Aa.size=ya.size;Aa.start=ya.start;Aa.end=ya.end;return Aa}function ja(ya,Aa,Ja,Ta,$a,ab){for(var Db=0;Db<ya.length;Db++)W(ya[Db],Aa,
Ja,Ta,$a,ab,!1)}function ma(ya,Aa,Ja,Ta,$a,ab){Aa=(ab-Aa)/(Ta-Aa);ya.push(ab);ya.push(Ja+($a-Ja)*Aa);ya.push(1);return Aa}function ia(ya,Aa,Ja,Ta,$a,ab){Ja=(ab-Ja)/($a-Ja);ya.push(Aa+(Ta-Aa)*Ja);ya.push(ab);ya.push(1);return Ja}function ra(ya,Aa){for(var Ja=[],Ta=0;Ta<ya.length;Ta++){var $a=ya[Ta],ab=$a.type;if("Point"===ab||"MultiPoint"===ab||"LineString"===ab)var Db=wa($a.geometry,Aa);else if("MultiLineString"===ab||"Polygon"===ab){Db=[];for(var Nb=0;Nb<$a.geometry.length;Nb++)Db.push(wa($a.geometry[Nb],
Aa))}else if("MultiPolygon"===ab)for(Db=[],Nb=0;Nb<$a.geometry.length;Nb++){for(var ec=[],ob=0;ob<$a.geometry[Nb].length;ob++)ec.push(wa($a.geometry[Nb][ob],Aa));Db.push(ec)}Ja.push(L($a.id,ab,Db,$a.tags))}return Ja}function wa(ya,Aa){var Ja=[];Ja.size=ya.size;void 0!==ya.start&&(Ja.start=ya.start,Ja.end=ya.end);for(var Ta=0;Ta<ya.length;Ta+=3)Ja.push(ya[Ta]+Aa,ya[Ta+1],ya[Ta+2]);return Ja}function pa(ya,Aa){if(ya.transformed)return ya;var Ja=1<<ya.z,Ta=ya.x,$a=ya.y,ab,Db;for(ab=0;ab<ya.features.length;ab++){var Nb=
ya.features[ab],ec=Nb.geometry;var ob=Nb.type;Nb.geometry=[];if(1===ob)for(ob=0;ob<ec.length;ob+=2)Nb.geometry.push([Math.round(Aa*(ec[ob]*Ja-Ta)),Math.round(Aa*(ec[ob+1]*Ja-$a))]);else for(ob=0;ob<ec.length;ob++){var Cb=[];for(Db=0;Db<ec[ob].length;Db+=2)Cb.push([Math.round(Aa*(ec[ob][Db]*Ja-Ta)),Math.round(Aa*(ec[ob][Db+1]*Ja-$a))]);Nb.geometry.push(Cb)}}ya.transformed=!0;return ya}function la(ya,Aa,Ja,Ta,$a,ab){var Db=Ta*Ta;if(0<Ta&&Aa.size<($a?Db:Ta))Ja.numPoints+=Aa.length/3;else{for(var Nb=
[],ec=0;ec<Aa.length;ec+=3){if(0===Ta||Aa[ec+2]>Db)Ja.numSimplified++,Nb.push(Aa[ec]),Nb.push(Aa[ec+1]);Ja.numPoints++}if($a){Aa=Ta=0;Ja=Nb.length;for($a=Ja-2;Aa<Ja;$a=Aa,Aa+=2)Ta+=(Nb[Aa]-Nb[$a])*(Nb[Aa+1]+Nb[$a+1]);if(0<Ta===ab)for(Aa=0,Ja=Nb.length;Aa<Ja/2;Aa+=2)ab=Nb[Aa],Ta=Nb[Aa+1],Nb[Aa]=Nb[Ja-2-Aa],Nb[Aa+1]=Nb[Ja-1-Aa],Nb[Ja-2-Aa]=ab,Nb[Ja-1-Aa]=Ta}ya.push(Nb)}}function ka(ya,Aa){var Ja=Object.create(this.options);for(Ta in Aa)Ja[Ta]=Aa[Ta];Aa=this.options=Ja;(Ja=Aa.debug)&&console.time("preprocess data");
if(0>Aa.maxZoom||24<Aa.maxZoom)throw Error("maxZoom should be in the 0-24 range");if(Aa.promoteId&&Aa.generateId)throw Error("promoteId and generateId cannot be used together.");var Ta=Aa;var $a=[];if("FeatureCollection"===ya.type)for(var ab=0;ab<ya.features.length;ab++)Z($a,ya.features[ab],Ta,ab);else"Feature"===ya.type?Z($a,ya,Ta):Z($a,{geometry:ya},Ta);ya=$a;this.tiles={};this.tileCoords=[];Ja&&(console.timeEnd("preprocess data"),console.log("index: maxZoom: %d, maxPoints: %d",Aa.indexMaxZoom,
Aa.indexMaxPoints),console.time("generate tiles"),this.stats={},this.total=0);Ta=Aa.buffer/Aa.extent;$a=ya;ab=fa(ya,1,-1-Ta,Ta,0,-1,2,Aa);var Db=fa(ya,1,1-Ta,2+Ta,0,-1,2,Aa);if(ab||Db)$a=fa(ya,1,-Ta,1+Ta,0,-1,2,Aa)||[],ab&&($a=ra(ab,1).concat($a)),Db&&($a=$a.concat(ra(Db,-1)));ya=$a;ya.length&&this.splitTile(ya,0,0,0);Ja&&(ya.length&&console.log("features: %d, points: %d",this.tiles[0].numFeatures,this.tiles[0].numPoints),console.timeEnd("generate tiles"),console.log("tiles generated:",this.total,
JSON.stringify(this.stats)))}function na(ya,Aa){ya=ya.tileID.canonical;if(!this._geoJSONIndex)return Aa(null,null);ya=this._geoJSONIndex.getTile(ya.z,ya.x,ya.y);if(!ya)return Aa(null,null);ya=new ub(ya.features);var Ja=Ab(ya);if(0!==Ja.byteOffset||Ja.byteLength!==Ja.buffer.byteLength)Ja=new Uint8Array(Ja);Aa(null,{vectorTile:ya,rawData:Ja.buffer})}function oa(ya){var Aa=ya.superclusterOptions;ya=ya.clusterProperties;if(!ya||!Aa)return Aa;for(var Ja={},Ta={},$a={accumulated:null,zoom:0},ab={properties:null},
Db=Object.keys(ya),Nb=0;Nb<Db.length;Nb+=1){var ec=Db[Nb],ob=ya[ec],Cb=ob[0];ob=a.createExpression(ob[1]);Cb=a.createExpression("string"===typeof Cb?[Cb,["accumulated"],["get",ec]]:Cb);Ja[ec]=ob.value;Ta[ec]=Cb.value}Aa.map=function(Qb){ab.properties=Qb;Qb={};for(var yc=0;yc<Db.length;yc+=1){var Jc=Db[yc];Qb[Jc]=Ja[Jc].evaluate($a,ab)}return Qb};Aa.reduce=function(Qb,yc){ab.properties=yc;for(yc=0;yc<Db.length;yc+=1){var Jc=Db[yc];$a.accumulated=Qb[Jc];Qb[Jc]=Ta[Jc].evaluate($a,ab)}};return Aa}var sa=
function(ya){this.keyCache={};ya&&this.replace(ya)};sa.prototype.replace=function(ya){this._layerConfigs={};this._layers={};this.update(ya,[])};sa.prototype.update=function(ya,Aa){for(var Ja=this,Ta=0;Ta<ya.length;Ta+=1){var $a=ya[Ta];this._layerConfigs[$a.id]=$a;var ab=this._layers[$a.id]=a.createStyleLayer($a);ab._featureFilter=a.featureFilter(ab.filter);this.keyCache[$a.id]&&delete this.keyCache[$a.id]}for(ya=0;ya<Aa.length;ya+=1)Ta=Aa[ya],delete this.keyCache[Ta],delete this._layerConfigs[Ta],
delete this._layers[Ta];this.familiesBySource={};Aa=0;for(ya=h(a.values(this._layerConfigs),this.keyCache);Aa<ya.length;Aa+=1)if(Ta=ya[Aa].map(function(Nb){return Ja._layers[Nb.id]}),ab=Ta[0],"none"!==ab.visibility){var Db=ab.source||"";($a=this.familiesBySource[Db])||($a=this.familiesBySource[Db]={});ab=ab.sourceLayer||"_geojsonTileLayer";(Db=$a[ab])||(Db=$a[ab]=[]);Db.push(Ta)}};var za=function(ya){var Aa={},Ja=[];for(ob in ya){var Ta=ya[ob],$a=Aa[ob]={},ab;for(ab in Ta){var Db=Ta[+ab];if(Db&&0!==
Db.bitmap.width&&0!==Db.bitmap.height){var Nb={x:0,y:0,w:Db.bitmap.width+2,h:Db.bitmap.height+2};Ja.push(Nb);$a[ab]={rect:Nb,metrics:Db.metrics}}}}Ja=a.potpack(Ja);Ja=new a.AlphaImage({width:Ja.w||1,height:Ja.h||1});for(var ec in ya){var ob=ya[ec];for(var Cb in ob)(Ta=ob[+Cb])&&0!==Ta.bitmap.width&&0!==Ta.bitmap.height&&($a=Aa[ec][Cb].rect,a.AlphaImage.copy(Ta.bitmap,Ja,{x:0,y:0},{x:$a.x+1,y:$a.y+1},Ta.bitmap))}this.image=Ja;this.positions=Aa};a.register("GlyphAtlas",za);var Ha=function(ya){this.tileID=
new a.OverscaledTileID(ya.tileID.overscaledZ,ya.tileID.wrap,ya.tileID.canonical.z,ya.tileID.canonical.x,ya.tileID.canonical.y);this.uid=ya.uid;this.zoom=ya.zoom;this.pixelRatio=ya.pixelRatio;this.tileSize=ya.tileSize;this.source=ya.source;this.overscaling=this.tileID.overscaleFactor();this.showCollisionBoxes=ya.showCollisionBoxes;this.collectResourceTiming=!!ya.collectResourceTiming;this.returnDependencies=!!ya.returnDependencies;this.promoteId=ya.promoteId};Ha.prototype.parse=function(ya,Aa,Ja,Ta,
$a){function ab(){if(Hb)return $a(Hb);if($b&&uc&&fd){var fb=new za($b),Pb=new a.ImageAtlas(uc,fd),fc;for(fc in ob){var Fc=ob[fc];Fc instanceof a.SymbolBucket?(r(Fc.layers,this.zoom,Ja),a.performSymbolLayout(Fc,$b,fb.positions,uc,Pb.iconPositions,this.showCollisionBoxes,this.tileID.canonical)):Fc.hasPattern&&(Fc instanceof a.LineBucket||Fc instanceof a.FillBucket||Fc instanceof a.FillExtrusionBucket)&&(r(Fc.layers,this.zoom,Ja),Fc.addFeatures(Cb,this.tileID.canonical,Pb.patternPositions))}this.status=
"done";$a(null,{buckets:a.values(ob).filter(function(Pc){return!Pc.isEmpty()}),featureIndex:ec,collisionBoxArray:this.collisionBoxArray,glyphAtlasImage:fb.image,imageAtlas:Pb,glyphMap:this.returnDependencies?$b:null,iconMap:this.returnDependencies?uc:null,glyphPositions:this.returnDependencies?fb.positions:null})}}var Db=this;this.status="parsing";this.data=ya;this.collisionBoxArray=new a.CollisionBoxArray;var Nb=new a.DictionaryCoder(Object.keys(ya.layers).sort()),ec=new a.FeatureIndex(this.tileID,
this.promoteId);ec.bucketLayerIDs=[];var ob={},Cb={featureIndex:ec,iconDependencies:{},patternDependencies:{},glyphDependencies:{},availableImages:Ja};Aa=Aa.familiesBySource[this.source];for(var Qb in Aa){var yc=ya.layers[Qb];if(yc){1===yc.version&&a.warnOnce('Vector tile source "'+this.source+'" layer "'+Qb+'" does not use vector tile spec v2 and therefore may have some rendering errors.');for(var Jc=Nb.encode(Qb),Ia=[],Na=0;Na<yc.length;Na++){var ib=yc.feature(Na),Gb=ec.getId(ib,Qb);Ia.push({feature:ib,
id:Gb,index:Na,sourceLayerIndex:Jc})}yc=0;for(Na=Aa[Qb];yc<Na.length;yc+=1)ib=Na[yc],Gb=ib[0],Gb.minzoom&&this.zoom<Math.floor(Gb.minzoom)||Gb.maxzoom&&this.zoom>=Gb.maxzoom||"none"===Gb.visibility||(r(ib,this.zoom,Ja),(ob[Gb.id]=Gb.createBucket({index:ec.bucketLayerIDs.length,layers:ib,zoom:this.zoom,pixelRatio:this.pixelRatio,overscaling:this.overscaling,collisionBoxArray:this.collisionBoxArray,sourceLayerIndex:Jc,sourceID:this.source})).populate(Ia,Cb,this.tileID.canonical),ec.bucketLayerIDs.push(ib.map(function(fb){return fb.id})))}}var Hb,
$b,uc,fd;ya=a.mapObject(Cb.glyphDependencies,function(fb){return Object.keys(fb).map(Number)});Object.keys(ya).length?Ta.send("getGlyphs",{uid:this.uid,stacks:ya},function(fb,Pb){Hb||(Hb=fb,$b=Pb,ab.call(Db))}):$b={};ya=Object.keys(Cb.iconDependencies);ya.length?Ta.send("getImages",{icons:ya,source:this.source,tileID:this.tileID,type:"icons"},function(fb,Pb){Hb||(Hb=fb,uc=Pb,ab.call(Db))}):uc={};ya=Object.keys(Cb.patternDependencies);ya.length?Ta.send("getImages",{icons:ya,source:this.source,tileID:this.tileID,
type:"patterns"},function(fb,Pb){Hb||(Hb=fb,fd=Pb,ab.call(Db))}):fd={};ab.call(this)};var Wa=function(ya,Aa,Ja,Ta){this.actor=ya;this.layerIndex=Aa;this.availableImages=Ja;this.loadVectorData=Ta||l;this.loading={};this.loaded={}};Wa.prototype.loadTile=function(ya,Aa){var Ja=this,Ta=ya.uid;this.loading||(this.loading={});var $a=ya&&ya.request&&ya.request.collectResourceTiming?new a.RequestPerformance(ya.request):!1,ab=this.loading[Ta]=new Ha(ya);ab.abort=this.loadVectorData(ya,function(Db,Nb){delete Ja.loading[Ta];
if(Db||!Nb)return ab.status="done",Ja.loaded[Ta]=ab,Aa(Db);var ec=Nb.rawData,ob={};Nb.expires&&(ob.expires=Nb.expires);Nb.cacheControl&&(ob.cacheControl=Nb.cacheControl);var Cb={};$a&&(Db=$a.finish())&&(Cb.resourceTiming=JSON.parse(JSON.stringify(Db)));ab.vectorTile=Nb.vectorTile;ab.parse(Nb.vectorTile,Ja.layerIndex,Ja.availableImages,Ja.actor,function(Qb,yc){if(Qb||!yc)return Aa(Qb);Aa(null,a.extend({rawTileData:ec.slice(0)},yc,ob,Cb))});Ja.loaded=Ja.loaded||{};Ja.loaded[Ta]=ab})};Wa.prototype.reloadTile=
function(ya,Aa){var Ja=this,Ta=this.loaded,$a=ya.uid,ab=this;if(Ta&&Ta[$a]){var Db=Ta[$a];Db.showCollisionBoxes=ya.showCollisionBoxes;ya=function(Nb,ec){var ob=Db.reloadCallback;ob&&(delete Db.reloadCallback,Db.parse(Db.vectorTile,ab.layerIndex,Ja.availableImages,ab.actor,ob));Aa(Nb,ec)};"parsing"===Db.status?Db.reloadCallback=ya:"done"===Db.status&&(Db.vectorTile?Db.parse(Db.vectorTile,this.layerIndex,this.availableImages,this.actor,ya):ya())}};Wa.prototype.abortTile=function(ya,Aa){var Ja=this.loading;
ya=ya.uid;Ja&&Ja[ya]&&Ja[ya].abort&&(Ja[ya].abort(),delete Ja[ya]);Aa()};Wa.prototype.removeTile=function(ya,Aa){var Ja=this.loaded;ya=ya.uid;Ja&&Ja[ya]&&delete Ja[ya];Aa()};var Za=a.window.ImageBitmap,bb=function(){this.loaded={}};bb.prototype.loadTile=function(ya,Aa){var Ja=ya.uid,Ta=ya.encoding;ya=ya.rawImageData;ya=Za&&ya instanceof Za?this.getImageData(ya):ya;Ta=new a.DEMData(Ja,ya,Ta);this.loaded=this.loaded||{};this.loaded[Ja]=Ta;Aa(null,Ta)};bb.prototype.getImageData=function(ya){this.offscreenCanvas&&
this.offscreenCanvasContext||(this.offscreenCanvas=new OffscreenCanvas(ya.width,ya.height),this.offscreenCanvasContext=this.offscreenCanvas.getContext("2d"));this.offscreenCanvas.width=ya.width;this.offscreenCanvas.height=ya.height;this.offscreenCanvasContext.drawImage(ya,0,0,ya.width,ya.height);ya=this.offscreenCanvasContext.getImageData(-1,-1,ya.width+2,ya.height+2);this.offscreenCanvasContext.clearRect(0,0,this.offscreenCanvas.width,this.offscreenCanvas.height);return new a.RGBAImage({width:ya.width,
height:ya.height},ya.data)};bb.prototype.removeTile=function(ya){var Aa=this.loaded;ya=ya.uid;Aa&&Aa[ya]&&delete Aa[ya]};var sb=a.vectorTile.VectorTileFeature.prototype.toGeoJSON,hb=function(ya){this._feature=ya;this.extent=a.EXTENT;this.type=ya.type;this.properties=ya.tags;"id"in ya&&!isNaN(ya.id)&&(this.id=parseInt(ya.id,10))};hb.prototype.loadGeometry=function(){if(1===this._feature.type){for(var ya=[],Aa=0,Ja=this._feature.geometry;Aa<Ja.length;Aa+=1){var Ta=Ja[Aa];ya.push([new a.Point$1(Ta[0],
Ta[1])])}return ya}ya=[];Aa=0;for(Ja=this._feature.geometry;Aa<Ja.length;Aa+=1){Ta=[];for(var $a=0,ab=Ja[Aa];$a<ab.length;$a+=1){var Db=ab[$a];Ta.push(new a.Point$1(Db[0],Db[1]))}ya.push(Ta)}return ya};hb.prototype.toGeoJSON=function(ya,Aa,Ja){return sb.call(this,ya,Aa,Ja)};var ub=function(ya){this.layers={_geojsonTileLayer:this};this.name="_geojsonTileLayer";this.extent=a.EXTENT;this.length=ya.length;this._features=ya};ub.prototype.feature=function(ya){return new hb(this._features[ya])};var pb=a.vectorTile.VectorTileFeature;
f.prototype.feature=function(ya){return new q(this.features[ya],this.options.extent)};q.prototype.loadGeometry=function(){var ya=this.rawGeometry;this.geometry=[];for(var Aa=0;Aa<ya.length;Aa++){for(var Ja=ya[Aa],Ta=[],$a=0;$a<Ja.length;$a++)Ta.push(new a.Point$1(Ja[$a][0],Ja[$a][1]));this.geometry.push(Ta)}return this.geometry};q.prototype.bbox=function(){this.geometry||this.loadGeometry();for(var ya=this.geometry,Aa=Infinity,Ja=-Infinity,Ta=Infinity,$a=-Infinity,ab=0;ab<ya.length;ab++)for(var Db=
ya[ab],Nb=0;Nb<Db.length;Nb++){var ec=Db[Nb];Aa=Math.min(Aa,ec.x);Ja=Math.max(Ja,ec.x);Ta=Math.min(Ta,ec.y);$a=Math.max($a,ec.y)}return[Aa,Ta,Ja,$a]};q.prototype.toGeoJSON=pb.prototype.toGeoJSON;var Ab=t;Ab.fromVectorTileJs=t;Ab.fromGeojsonVt=function(ya,Aa){Aa=Aa||{};var Ja={},Ta;for(Ta in ya)Ja[Ta]=new f(ya[Ta].features,Aa),Ja[Ta].name=Ta,Ja[Ta].version=Aa.version,Ja[Ta].extent=Aa.extent;return t({layers:Ja})};Ab.GeoJSONWrapper=f;var tb=function(ya){return ya[0]},vb=function(ya){return ya[1]},qb=
function(ya,Aa,Ja,Ta,$a){void 0===Aa&&(Aa=tb);void 0===Ja&&(Ja=vb);void 0===Ta&&(Ta=64);void 0===$a&&($a=Float64Array);this.nodeSize=Ta;this.points=ya;var ab=this.ids=new (65536>ya.length?Uint16Array:Uint32Array)(ya.length);$a=this.coords=new $a(2*ya.length);for(var Db=0;Db<ya.length;Db++)ab[Db]=Db,$a[2*Db]=Aa(ya[Db]),$a[2*Db+1]=Ja(ya[Db]);D(ab,$a,Ta,0,ab.length-1,0)};qb.prototype.range=function(ya,Aa,Ja,Ta){for(var $a=this.ids,ab=this.coords,Db=this.nodeSize,Nb=[0,$a.length-1,0],ec=[],ob,Cb;Nb.length;){var Qb=
Nb.pop(),yc=Nb.pop(),Jc=Nb.pop();if(yc-Jc<=Db)for(Qb=Jc;Qb<=yc;Qb++)ob=ab[2*Qb],Cb=ab[2*Qb+1],ob>=ya&&ob<=Ja&&Cb>=Aa&&Cb<=Ta&&ec.push($a[Qb]);else{var Ia=Math.floor((Jc+yc)/2);ob=ab[2*Ia];Cb=ab[2*Ia+1];ob>=ya&&ob<=Ja&&Cb>=Aa&&Cb<=Ta&&ec.push($a[Ia]);var Na=(Qb+1)%2;if(0===Qb?ya<=ob:Aa<=Cb)Nb.push(Jc),Nb.push(Ia-1),Nb.push(Na);if(0===Qb?Ja>=ob:Ta>=Cb)Nb.push(Ia+1),Nb.push(yc),Nb.push(Na)}}return ec};qb.prototype.within=function(ya,Aa,Ja){for(var Ta=this.ids,$a=this.coords,ab=this.nodeSize,Db=[0,Ta.length-
1,0],Nb=[],ec=Ja*Ja;Db.length;){var ob=Db.pop(),Cb=Db.pop(),Qb=Db.pop();if(Cb-Qb<=ab)for(ob=Qb;ob<=Cb;ob++){Qb=$a[2*ob]-ya;var yc=$a[2*ob+1]-Aa;Qb*Qb+yc*yc<=ec&&Nb.push(Ta[ob])}else{yc=Math.floor((Qb+Cb)/2);var Jc=$a[2*yc],Ia=$a[2*yc+1],Na=Jc-ya,ib=Ia-Aa;Na*Na+ib*ib<=ec&&Nb.push(Ta[yc]);Na=(ob+1)%2;if(0===ob?ya-Ja<=Jc:Aa-Ja<=Ia)Db.push(Qb),Db.push(yc-1),Db.push(Na);if(0===ob?ya+Ja>=Jc:Aa+Ja>=Ia)Db.push(yc+1),Db.push(Cb),Db.push(Na)}}return Nb};var zb={minZoom:0,maxZoom:16,radius:40,extent:512,nodeSize:64,
log:!1,generateId:!1,reduce:null,map:function(ya){return ya}},La=function(ya){this.options=M(Object.create(zb),ya);this.trees=Array(this.options.maxZoom+1)};La.prototype.load=function(ya){var Aa=this.options,Ja=Aa.log,Ta=Aa.minZoom,$a=Aa.maxZoom;Aa=Aa.nodeSize;Ja&&console.time("total time");var ab="prepare "+ya.length+" points";Ja&&console.time(ab);this.points=ya;for(var Db=[],Nb=0;Nb<ya.length;Nb++)if(ya[Nb].geometry){var ec=Db,ob=ec.push;var Cb=Nb;var Qb=ya[Nb].geometry.coordinates;Cb={x:Qb[0]/
360+.5,y:K(Qb[1]),zoom:Infinity,index:Cb,parentId:-1};ob.call(ec,Cb)}this.trees[$a+1]=new qb(Db,H,O,Aa,Float32Array);Ja&&console.timeEnd(ab);for(ya=$a;ya>=Ta;ya--)$a=+Date.now(),Db=this._cluster(Db,ya),this.trees[ya]=new qb(Db,H,O,Aa,Float32Array),Ja&&console.log("z%d: %d clusters in %dms",ya,Db.length,+Date.now()-$a);Ja&&console.timeEnd("total time");return this};La.prototype.getClusters=function(ya,Aa){var Ja=((ya[0]+180)%360+360)%360-180,Ta=Math.max(-90,Math.min(90,ya[1])),$a=180===ya[2]?180:((ya[2]+
180)%360+360)%360-180,ab=Math.max(-90,Math.min(90,ya[3]));if(360<=ya[2]-ya[0])Ja=-180,$a=180;else if(Ja>$a)return Ja=this.getClusters([Ja,Ta,180,ab],Aa),Ta=this.getClusters([-180,Ta,$a,ab],Aa),Ja.concat(Ta);Aa=this.trees[this._limitZoom(Aa)];ya=[];var Db=0;for(Ta=Aa.range(Ja/360+.5,K(ab),$a/360+.5,K(Ta));Db<Ta.length;Db+=1)$a=Aa.points[Ta[Db]],ya.push($a.numPoints?F($a):this.points[$a.index]);return ya};La.prototype.getChildren=function(ya){var Aa=this._getOriginId(ya),Ja=this._getOriginZoom(ya),
Ta=this.trees[Ja];if(!Ta)throw Error("No cluster with the specified id.");var $a=Ta.points[Aa];if(!$a)throw Error("No cluster with the specified id.");Aa=[];var ab=0;for(Ja=Ta.within($a.x,$a.y,this.options.radius/(this.options.extent*Math.pow(2,Ja-1)));ab<Ja.length;ab+=1)$a=Ta.points[Ja[ab]],$a.parentId===ya&&Aa.push($a.numPoints?F($a):this.points[$a.index]);if(0===Aa.length)throw Error("No cluster with the specified id.");return Aa};La.prototype.getLeaves=function(ya,Aa,Ja){var Ta=[];this._appendLeaves(Ta,
ya,Aa||10,Ja||0,0);return Ta};La.prototype.getTile=function(ya,Aa,Ja){var Ta=this.trees[this._limitZoom(ya)];ya=Math.pow(2,ya);var $a=this.options;$a=$a.radius/$a.extent;var ab=(Ja-$a)/ya,Db=(Ja+1+$a)/ya,Nb={features:[]};this._addTileFeatures(Ta.range((Aa-$a)/ya,ab,(Aa+1+$a)/ya,Db),Ta.points,Aa,Ja,ya,Nb);0===Aa&&this._addTileFeatures(Ta.range(1-$a/ya,ab,1,Db),Ta.points,ya,Ja,ya,Nb);Aa===ya-1&&this._addTileFeatures(Ta.range(0,ab,$a/ya,Db),Ta.points,-1,Ja,ya,Nb);return Nb.features.length?Nb:null};La.prototype.getClusterExpansionZoom=
function(ya){for(var Aa=this._getOriginZoom(ya)-1;Aa<=this.options.maxZoom;){ya=this.getChildren(ya);Aa++;if(1!==ya.length)break;ya=ya[0].properties.cluster_id}return Aa};La.prototype._appendLeaves=function(ya,Aa,Ja,Ta,$a){var ab=0;for(Aa=this.getChildren(Aa);ab<Aa.length;ab+=1){var Db=Aa[ab],Nb=Db.properties;Nb&&Nb.cluster?$a=$a+Nb.point_count<=Ta?$a+Nb.point_count:this._appendLeaves(ya,Nb.cluster_id,Ja,Ta,$a):$a<Ta?$a++:ya.push(Db);if(ya.length===Ja)break}return $a};La.prototype._addTileFeatures=
function(ya,Aa,Ja,Ta,$a,ab){for(var Db=0;Db<ya.length;Db+=1){var Nb=Aa[ya[Db]],ec=Nb.numPoints,ob={type:1,geometry:[[Math.round(this.options.extent*(Nb.x*$a-Ja)),Math.round(this.options.extent*(Nb.y*$a-Ta))]],tags:ec?J(Nb):this.points[Nb.index].properties},Cb=void 0;ec?Cb=Nb.id:this.options.generateId?Cb=Nb.index:this.points[Nb.index].id&&(Cb=this.points[Nb.index].id);void 0!==Cb&&(ob.id=Cb);ab.features.push(ob)}};La.prototype._limitZoom=function(ya){return Math.max(this.options.minZoom,Math.min(ya,
this.options.maxZoom+1))};La.prototype._cluster=function(ya,Aa){var Ja=[],Ta=this.options,$a=Ta.reduce;Ta=Ta.radius/(Ta.extent*Math.pow(2,Aa));for(var ab=0;ab<ya.length;ab++){var Db=ya[ab];if(!(Db.zoom<=Aa)){Db.zoom=Aa;for(var Nb=this.trees[Aa+1],ec=Nb.within(Db.x,Db.y,Ta),ob=Db.numPoints||1,Cb=Db.x*ob,Qb=Db.y*ob,yc=$a&&1<ob?this._map(Db,!0):null,Jc=(ab<<5)+(Aa+1)+this.points.length,Ia=0;Ia<ec.length;Ia+=1){var Na=Nb.points[ec[Ia]];if(!(Na.zoom<=Aa)){Na.zoom=Aa;var ib=Na.numPoints||1;Cb+=Na.x*ib;
Qb+=Na.y*ib;ob+=ib;Na.parentId=Jc;$a&&(yc||(yc=this._map(Db,!0)),$a(yc,this._map(Na)))}}1===ob?Ja.push(Db):(Db.parentId=Jc,Ja.push({x:Cb/ob,y:Qb/ob,zoom:Infinity,id:Jc,parentId:-1,numPoints:ob,properties:yc}))}}return Ja};La.prototype._getOriginId=function(ya){return ya-this.points.length>>5};La.prototype._getOriginZoom=function(ya){return(ya-this.points.length)%32};La.prototype._map=function(ya,Aa){if(ya.numPoints)return Aa?M({},ya.properties):ya.properties;ya=this.points[ya.index].properties;var Ja=
this.options.map(ya);return Aa&&Ja===ya?M({},Ja):Ja};ka.prototype.options={maxZoom:14,indexMaxZoom:5,indexMaxPoints:1E5,tolerance:3,extent:4096,buffer:64,lineMetrics:!1,promoteId:null,generateId:!1,debug:0};ka.prototype.splitTile=function(ya,Aa,Ja,Ta,$a,ab,Db){for(var Nb=[ya,Aa,Ja,Ta],ec=this.options,ob=ec.debug;Nb.length;){Ta=Nb.pop();Ja=Nb.pop();Aa=Nb.pop();ya=Nb.pop();var Cb=1<<Aa,Qb=32*((1<<Aa)*Ta+Ja)+Aa,yc=this.tiles[Qb];if(!yc){1<ob&&console.time("creation");yc=this.tiles;for(var Jc=ya,Ia=ec,
Na=Aa===Ia.maxZoom?0:Ia.tolerance/((1<<Aa)*Ia.extent),ib={features:[],numPoints:0,numSimplified:0,numFeatures:0,source:null,x:Ja,y:Ta,z:Aa,transformed:!1,minX:2,minY:1,maxX:-1,maxY:0},Gb=0;Gb<Jc.length;Gb++){ib.numFeatures++;var Hb=void 0,$b=ib,uc=Jc[Gb],fd=Na,fb=Ia,Pb=uc.geometry,fc=uc.type,Fc=[];if("Point"===fc||"MultiPoint"===fc)for(var Pc=0;Pc<Pb.length;Pc+=3)Fc.push(Pb[Pc]),Fc.push(Pb[Pc+1]),$b.numPoints++,$b.numSimplified++;else if("LineString"===fc)la(Fc,Pb,$b,fd,!1,!1);else if("MultiLineString"===
fc||"Polygon"===fc)for(Pc=0;Pc<Pb.length;Pc++)la(Fc,Pb[Pc],$b,fd,"Polygon"===fc,0===Pc);else if("MultiPolygon"===fc)for(var Uc=0;Uc<Pb.length;Uc++){var rb=Pb[Uc];for(Pc=0;Pc<rb.length;Pc++)la(Fc,rb[Pc],$b,fd,!0,0===Pc)}if(Fc.length){fd=uc.tags||null;if("LineString"===fc&&fb.lineMetrics){fd={};for(Hb in uc.tags)fd[Hb]=uc.tags[Hb];fd.mapbox_clip_start=Pb.start/Pb.size;fd.mapbox_clip_end=Pb.end/Pb.size}Hb={geometry:Fc,type:"Polygon"===fc||"MultiPolygon"===fc?3:"LineString"===fc||"MultiLineString"===
fc?2:1,tags:fd};null!==uc.id&&(Hb.id=uc.id);$b.features.push(Hb)}$b=Jc[Gb].minX;uc=Jc[Gb].minY;Hb=Jc[Gb].maxX;fb=Jc[Gb].maxY;$b<ib.minX&&(ib.minX=$b);uc<ib.minY&&(ib.minY=uc);Hb>ib.maxX&&(ib.maxX=Hb);fb>ib.maxY&&(ib.maxY=fb)}yc=yc[Qb]=ib;this.tileCoords.push({z:Aa,x:Ja,y:Ta});ob&&(1<ob&&(console.log("tile z%d-%d-%d (features: %d, points: %d, simplified: %d)",Aa,Ja,Ta,yc.numFeatures,yc.numPoints,yc.numSimplified),console.timeEnd("creation")),Qb="z"+Aa,this.stats[Qb]=(this.stats[Qb]||0)+1,this.total++)}yc.source=
ya;if($a){if(Aa===ec.maxZoom||Aa===$a)continue;Qb=1<<$a-Aa;if(Ja!==Math.floor(ab/Qb)||Ta!==Math.floor(Db/Qb))continue}else if(Aa===ec.indexMaxZoom||yc.numPoints<=ec.indexMaxPoints)continue;yc.source=null;0!==ya.length&&(1<ob&&console.time("clipping"),Qb=.5*ec.buffer/ec.extent,Jc=.5-Qb,Ia=.5+Qb,Na=1+Qb,ib=Gb=$b=uc=null,Hb=fa(ya,Cb,Ja-Qb,Ja+Ia,0,yc.minX,yc.maxX,ec),ya=fa(ya,Cb,Ja+Jc,Ja+Na,0,yc.minX,yc.maxX,ec),Hb&&(ib=fa(Hb,Cb,Ta-Qb,Ta+Ia,1,yc.minY,yc.maxY,ec),Gb=fa(Hb,Cb,Ta+Jc,Ta+Na,1,yc.minY,yc.maxY,
ec)),ya&&($b=fa(ya,Cb,Ta-Qb,Ta+Ia,1,yc.minY,yc.maxY,ec),uc=fa(ya,Cb,Ta+Jc,Ta+Na,1,yc.minY,yc.maxY,ec)),1<ob&&console.timeEnd("clipping"),Nb.push(ib||[],Aa+1,2*Ja,2*Ta),Nb.push(Gb||[],Aa+1,2*Ja,2*Ta+1),Nb.push($b||[],Aa+1,2*Ja+1,2*Ta),Nb.push(uc||[],Aa+1,2*Ja+1,2*Ta+1))}};ka.prototype.getTile=function(ya,Aa,Ja){var Ta=this.options,$a=Ta.extent;Ta=Ta.debug;if(0>ya||24<ya)return null;var ab=1<<ya;Aa=(Aa%ab+ab)%ab;ab=32*((1<<ya)*Ja+Aa)+ya;if(this.tiles[ab])return pa(this.tiles[ab],$a);1<Ta&&console.log("drilling down to z%d-%d-%d",
ya,Aa,Ja);for(var Db=ya,Nb=Aa,ec=Ja,ob;!ob&&0<Db;)Db--,Nb=Math.floor(Nb/2),ec=Math.floor(ec/2),ob=this.tiles[32*((1<<Db)*ec+Nb)+Db];if(!ob||!ob.source)return null;1<Ta&&console.log("found parent tile z%d-%d-%d",Db,Nb,ec);1<Ta&&console.time("drilling down");this.splitTile(ob.source,Db,Nb,ec,ya,Aa,Ja);1<Ta&&console.timeEnd("drilling down");return this.tiles[ab]?pa(this.tiles[ab],$a):null};var Ka=function(ya){function Aa(Ja,Ta,$a,ab){ya.call(this,Ja,Ta,$a,na);ab&&(this.loadGeoJSON=ab)}ya&&(Aa.__proto__=
ya);Aa.prototype=Object.create(ya&&ya.prototype);Aa.prototype.constructor=Aa;Aa.prototype.loadData=function(Ja,Ta){this._pendingCallback&&this._pendingCallback(null,{abandoned:!0});this._pendingCallback=Ta;this._pendingLoadDataParams=Ja;this._state&&"Idle"!==this._state?this._state="NeedsLoadData":(this._state="Coalescing",this._loadData())};Aa.prototype._loadData=function(){var Ja=this;if(this._pendingCallback&&this._pendingLoadDataParams){var Ta=this._pendingCallback,$a=this._pendingLoadDataParams;
delete this._pendingCallback;delete this._pendingLoadDataParams;var ab=$a&&$a.request&&$a.request.collectResourceTiming?new a.RequestPerformance($a.request):!1;this.loadGeoJSON($a,function(Db,Nb){if(Db||!Nb)return Ta(Db);if("object"!==typeof Nb)return Ta(Error("Input data given to '"+$a.source+"' is not a valid GeoJSON object."));c(Nb,!0);try{Ja._geoJSONIndex=$a.cluster?(new La(oa($a))).load(Nb.features):new ka(Nb,$a.geojsonVtOptions)}catch(ec){return Ta(ec)}Ja.loaded={};Db={};ab&&(Nb=ab.finish())&&
(Db.resourceTiming={},Db.resourceTiming[$a.source]=JSON.parse(JSON.stringify(Nb)));Ta(null,Db)})}};Aa.prototype.coalesce=function(){"Coalescing"===this._state?this._state="Idle":"NeedsLoadData"===this._state&&(this._state="Coalescing",this._loadData())};Aa.prototype.reloadTile=function(Ja,Ta){var $a=this.loaded,ab=Ja.uid;return $a&&$a[ab]?ya.prototype.reloadTile.call(this,Ja,Ta):this.loadTile(Ja,Ta)};Aa.prototype.loadGeoJSON=function(Ja,Ta){if(Ja.request)a.getJSON(Ja.request,Ta);else if("string"===
typeof Ja.data)try{return Ta(null,JSON.parse(Ja.data))}catch($a){return Ta(Error("Input data given to '"+Ja.source+"' is not a valid GeoJSON object."))}else return Ta(Error("Input data given to '"+Ja.source+"' is not a valid GeoJSON object."))};Aa.prototype.removeSource=function(Ja,Ta){this._pendingCallback&&this._pendingCallback(null,{abandoned:!0});Ta()};Aa.prototype.getClusterExpansionZoom=function(Ja,Ta){try{Ta(null,this._geoJSONIndex.getClusterExpansionZoom(Ja.clusterId))}catch($a){Ta($a)}};
Aa.prototype.getClusterChildren=function(Ja,Ta){try{Ta(null,this._geoJSONIndex.getChildren(Ja.clusterId))}catch($a){Ta($a)}};Aa.prototype.getClusterLeaves=function(Ja,Ta){try{Ta(null,this._geoJSONIndex.getLeaves(Ja.clusterId,Ja.limit,Ja.offset))}catch($a){Ta($a)}};return Aa}(Wa);pb=function(ya){var Aa=this;this.self=ya;this.actor=new a.Actor(ya,this);this.layerIndexes={};this.availableImages={};this.workerSourceTypes={vector:Wa,geojson:Ka};this.workerSources={};this.demWorkerSources={};this.self.registerWorkerSource=
function(Ja,Ta){if(Aa.workerSourceTypes[Ja])throw Error('Worker source with name "'+Ja+'" already registered.');Aa.workerSourceTypes[Ja]=Ta};this.self.registerRTLTextPlugin=function(Ja){if(a.plugin.isParsed())throw Error("RTL text plugin already registered.");a.plugin.applyArabicShaping=Ja.applyArabicShaping;a.plugin.processBidirectionalText=Ja.processBidirectionalText;a.plugin.processStyledBidirectionalText=Ja.processStyledBidirectionalText}};pb.prototype.setReferrer=function(ya,Aa){this.referrer=
Aa};pb.prototype.setImages=function(ya,Aa,Ja){this.availableImages[ya]=Aa;for(var Ta in this.workerSources[ya]){var $a=this.workerSources[ya][Ta],ab;for(ab in $a)$a[ab].availableImages=Aa}Ja()};pb.prototype.setLayers=function(ya,Aa,Ja){this.getLayerIndex(ya).replace(Aa);Ja()};pb.prototype.updateLayers=function(ya,Aa,Ja){this.getLayerIndex(ya).update(Aa.layers,Aa.removedIds);Ja()};pb.prototype.loadTile=function(ya,Aa,Ja){this.getWorkerSource(ya,Aa.type,Aa.source).loadTile(Aa,Ja)};pb.prototype.loadDEMTile=
function(ya,Aa,Ja){this.getDEMWorkerSource(ya,Aa.source).loadTile(Aa,Ja)};pb.prototype.reloadTile=function(ya,Aa,Ja){this.getWorkerSource(ya,Aa.type,Aa.source).reloadTile(Aa,Ja)};pb.prototype.abortTile=function(ya,Aa,Ja){this.getWorkerSource(ya,Aa.type,Aa.source).abortTile(Aa,Ja)};pb.prototype.removeTile=function(ya,Aa,Ja){this.getWorkerSource(ya,Aa.type,Aa.source).removeTile(Aa,Ja)};pb.prototype.removeDEMTile=function(ya,Aa){this.getDEMWorkerSource(ya,Aa.source).removeTile(Aa)};pb.prototype.removeSource=
function(ya,Aa,Ja){if(this.workerSources[ya]&&this.workerSources[ya][Aa.type]&&this.workerSources[ya][Aa.type][Aa.source]){var Ta=this.workerSources[ya][Aa.type][Aa.source];delete this.workerSources[ya][Aa.type][Aa.source];void 0!==Ta.removeSource?Ta.removeSource(Aa,Ja):Ja()}};pb.prototype.loadWorkerSource=function(ya,Aa,Ja){try{this.self.importScripts(Aa.url),Ja()}catch(Ta){Ja(Ta.toString())}};pb.prototype.syncRTLPluginState=function(ya,Aa,Ja){try{a.plugin.setState(Aa);var Ta=a.plugin.getPluginURL();
if(a.plugin.isLoaded()&&!a.plugin.isParsed()&&null!=Ta){this.self.importScripts(Ta);var $a=a.plugin.isParsed();Ja($a?void 0:Error("RTL Text Plugin failed to import scripts from "+Ta),$a)}}catch(ab){Ja(ab.toString())}};pb.prototype.getAvailableImages=function(ya){(ya=this.availableImages[ya])||(ya=[]);return ya};pb.prototype.getLayerIndex=function(ya){var Aa=this.layerIndexes[ya];Aa||(Aa=this.layerIndexes[ya]=new sa);return Aa};pb.prototype.getWorkerSource=function(ya,Aa,Ja){var Ta=this;this.workerSources[ya]||
(this.workerSources[ya]={});this.workerSources[ya][Aa]||(this.workerSources[ya][Aa]={});this.workerSources[ya][Aa][Ja]||(this.workerSources[ya][Aa][Ja]=new this.workerSourceTypes[Aa]({send:function($a,ab,Db){Ta.actor.send($a,ab,Db,ya)}},this.getLayerIndex(ya),this.getAvailableImages(ya)));return this.workerSources[ya][Aa][Ja]};pb.prototype.getDEMWorkerSource=function(ya,Aa){this.demWorkerSources[ya]||(this.demWorkerSources[ya]={});this.demWorkerSources[ya][Aa]||(this.demWorkerSources[ya][Aa]=new bb);
return this.demWorkerSources[ya][Aa]};pb.prototype.enforceCacheSizeLimit=function(ya,Aa){a.enforceCacheSizeLimit(Aa)};"undefined"!==typeof WorkerGlobalScope&&"undefined"!==typeof a.window&&a.window instanceof WorkerGlobalScope&&(a.window.worker=new pb(a.window));return pb});p(["./shared"],function(a){function g(kb){if(!Db)return kb[0];for(var R=0;R<kb.length;R++)if(kb[R]in Db)return kb[R];return kb[0]}function h(kb,R,X){function U(){if(Ca)X(Ca);else if(da&&va){var Rb=a.browser.getImageData(va),dc=
{},Ic;for(Ic in da){var Gc=da[Ic],Xc=Gc.width,$c=Gc.height,Wc=Gc.x,wd=Gc.y,Qd=Gc.sdf,yd=Gc.pixelRatio,ge=Gc.stretchX,be=Gc.stretchY;Gc=Gc.content;var ke=new a.RGBAImage({width:Xc,height:$c});a.RGBAImage.copy(Rb,ke,{x:Wc,y:wd},{x:0,y:0},{width:Xc,height:$c});dc[Ic]={data:ke,pixelRatio:yd,sdf:Qd,stretchX:ge,stretchY:be,content:Gc}}X(null,dc)}}var da,va,Ca,Qa=1<a.browser.devicePixelRatio?"@2x":"",lb=a.getJSON(R.transformRequest(R.normalizeSpriteURL(kb,Qa,".json"),a.ResourceType.SpriteJSON),function(Rb,
dc){lb=null;Ca||(Ca=Rb,da=dc,U())}),Lb=a.getImage(R.transformRequest(R.normalizeSpriteURL(kb,Qa,".png"),a.ResourceType.SpriteImage),function(Rb,dc){Lb=null;Ca||(Ca=Rb,va=dc,U())});return{cancel:function(){lb&&(lb.cancel(),lb=null);Lb&&(Lb.cancel(),Lb=null)}}}function r(kb,R,X,U,da,va){this.fontSize=kb||24;this.buffer=void 0===R?3:R;this.cutoff=U||.25;this.fontFamily=da||"sans-serif";this.fontWeight=va||"normal";this.radius=X||8;kb=this.size=this.fontSize+2*this.buffer;this.canvas=document.createElement("canvas");
this.canvas.width=this.canvas.height=kb;this.ctx=this.canvas.getContext("2d");this.ctx.font=this.fontWeight+" "+this.fontSize+"px "+this.fontFamily;this.ctx.textBaseline="middle";this.ctx.fillStyle="black";this.gridOuter=new Float64Array(kb*kb);this.gridInner=new Float64Array(kb*kb);this.f=new Float64Array(kb);this.d=new Float64Array(kb);this.z=new Float64Array(kb+1);this.v=new Int16Array(kb);this.middle=Math.round(kb/2*(0<=navigator.userAgent.indexOf("Gecko/")?1.2:1))}function l(kb,R,X,U,da,va,Ca){for(var Qa=
0;Qa<R;Qa++){for(var lb=0;lb<X;lb++)U[lb]=kb[lb*R+Qa];c(U,da,va,Ca,X);for(lb=0;lb<X;lb++)kb[lb*R+Qa]=da[lb]}for(lb=0;lb<X;lb++){for(Qa=0;Qa<R;Qa++)U[Qa]=kb[lb*R+Qa];c(U,da,va,Ca,R);for(Qa=0;Qa<R;Qa++)kb[lb*R+Qa]=Math.sqrt(da[Qa])}}function c(kb,R,X,U,da){X[0]=0;U[0]=-1E20;U[1]=1E20;for(var va=1,Ca=0;va<da;va++){for(var Qa=(kb[va]+va*va-(kb[X[Ca]]+X[Ca]*X[Ca]))/(2*va-2*X[Ca]);Qa<=U[Ca];)Ca--,Qa=(kb[va]+va*va-(kb[X[Ca]]+X[Ca]*X[Ca]))/(2*va-2*X[Ca]);Ca++;X[Ca]=va;U[Ca]=Qa;U[Ca+1]=1E20}for(Ca=va=0;va<
da;va++){for(;U[Ca+1]<va;)Ca++;R[va]=(va-X[Ca])*(va-X[Ca])+kb[X[Ca]]}}function d(kb,R,X){var U=function(da,va){if(da)return X(da);va&&(da=a.pick(a.extend(va,kb),"tiles minzoom maxzoom attribution mapbox_logo bounds scheme tileSize encoding".split(" ")),va.vector_layers&&(da.vectorLayers=va.vector_layers,da.vectorLayerIds=da.vectorLayers.map(function(Ca){return Ca.id})),da.tiles=R.canonicalizeTileset(da,kb.url),X(null,da))};return kb.url?a.getJSON(R.transformRequest(R.normalizeSourceURL(kb.url),a.ResourceType.Source),
U):a.browser.frame(function(){return U(null,kb)})}function e(kb){for(var R=Infinity,X=Infinity,U=-Infinity,da=-Infinity,va=0;va<kb.length;va+=1){var Ca=kb[va];R=Math.min(R,Ca.x);X=Math.min(X,Ca.y);U=Math.max(U,Ca.x);da=Math.max(da,Ca.y)}kb=Math.max(0,Math.floor(-Math.log(Math.max(U-R,da-X))/Math.LN2));va=Math.pow(2,kb);return new a.CanonicalTileID(kb,Math.floor((R+U)/2*va),Math.floor((X+da)/2*va))}function f(kb,R){var X=a.identity([]);a.translate(X,X,[1,1,0]);a.scale(X,X,[.5*kb.width,.5*kb.height,
1]);return a.multiply(X,X,kb.calculatePosMatrix(R.toUnwrapped()))}function q(kb,R,X){if(kb)for(var U=0;U<kb.length;U+=1){var da=R[kb[U]];if(da&&da.source===X&&"fill-extrusion"===da.type)return!0}else for(U in R)if(kb=R[U],kb.source===X&&"fill-extrusion"===kb.type)return!0;return!1}function t(kb,R,X,U,da,va){var Ca=q(da&&da.layers,R,kb.id),Qa=va.maxPitchScaleFactor();U=kb.tilesIn(U,Qa,Ca);U.sort(z);Ca=[];for(var lb=0;lb<U.length;lb+=1){var Lb=U[lb];Ca.push({wrappedTileID:Lb.tileID.wrapped().key,queryResults:Lb.tile.queryRenderedFeatures(R,
X,kb._state,Lb.queryGeometry,Lb.cameraQueryGeometry,Lb.scale,da,va,Qa,f(kb.transform,Lb.tileID))})}R=B(Ca);for(var Rb in R)R[Rb].forEach(function(dc){dc=dc.feature;var Ic=kb.getFeatureState(dc.layer["source-layer"],dc.id);dc.source=dc.layer.source;dc.layer["source-layer"]&&(dc.sourceLayer=dc.layer["source-layer"]);dc.state=Ic});return R}function w(kb,R,X,U,da,va,Ca){var Qa={},lb=va.queryRenderedSymbols(U);U=[];va=0;for(var Lb=Object.keys(lb).map(Number);va<Lb.length;va+=1)U.push(Ca[Lb[va]]);U.sort(z);
Ca=function(){var Gc=dc[Rb],Xc=Gc.featureIndex.lookupSymbolFeatures(lb[Gc.bucketInstanceId],R,Gc.bucketIndex,Gc.sourceLayerIndex,da.filter,da.layers,da.availableImages,kb),$c;for($c in Xc){var Wc=Qa[$c]=Qa[$c]||[],wd=Xc[$c];wd.sort(function(yd,ge){var be=Gc.featureSortOrder;return be?(yd=be.indexOf(yd.featureIndex),be.indexOf(ge.featureIndex)-yd):ge.featureIndex-yd.featureIndex});for(var Qd=0;Qd<wd.length;Qd+=1)Wc.push(wd[Qd])}};for(var Rb=0,dc=U;Rb<dc.length;Rb+=1)Ca();Ca=function(Gc){Qa[Gc].forEach(function(Xc){Xc=
Xc.feature;var $c=X[kb[Gc].source].getFeatureState(Xc.layer["source-layer"],Xc.id);Xc.source=Xc.layer.source;Xc.layer["source-layer"]&&(Xc.sourceLayer=Xc.layer["source-layer"]);Xc.state=$c})};for(var Ic in Qa)Ca(Ic);return Qa}function x(kb,R){for(var X=kb.getRenderableIds().map(function(lb){return kb.getTileByID(lb)}),U=[],da={},va=0;va<X.length;va++){var Ca=X[va],Qa=Ca.tileID.canonical.key;da[Qa]||(da[Qa]=!0,Ca.querySourceFeatures(U,R))}return U}function z(kb,R){kb=kb.tileID;R=R.tileID;return kb.overscaledZ-
R.overscaledZ||kb.canonical.y-R.canonical.y||kb.wrap-R.wrap||kb.canonical.x-R.canonical.x}function B(kb){for(var R={},X={},U=0;U<kb.length;U+=1){var da=kb[U],va=da.queryResults;da=da.wrappedTileID;da=X[da]=X[da]||{};for(var Ca in va)for(var Qa=va[Ca],lb=da[Ca]=da[Ca]||{},Lb=R[Ca]=R[Ca]||[],Rb=0;Rb<Qa.length;Rb+=1){var dc=Qa[Rb];lb[dc.featureIndex]||(lb[dc.featureIndex]=!0,Lb.push(dc))}}return R}function A(kb,R){var X=Math.abs(2*kb.wrap)-+(0>kb.wrap),U=Math.abs(2*R.wrap)-+(0>R.wrap);return kb.overscaledZ-
R.overscaledZ||U-X||R.canonical.y-kb.canonical.y||R.canonical.x-kb.canonical.x}function D(kb){return"raster"===kb||"image"===kb||"video"===kb}function C(){return new a.window.Worker(gi.workerUrl)}function v(){pe||(pe=new rd);return pe}function y(kb,R){var X={},U;for(U in kb)"ref"!==U&&(X[U]=kb[U]);a.refProperties.forEach(function(da){da in R&&(X[da]=R[da])});return X}function F(kb){kb=kb.slice();for(var R=Object.create(null),X=0;X<kb.length;X++)R[kb[X].id]=kb[X];for(X=0;X<kb.length;X++)"ref"in kb[X]&&
(kb[X]=y(kb[X],R[kb[X].ref]));return kb}function J(kb,R,X,U){kb=kb||{};R=R||{};for(var da in kb)if(kb.hasOwnProperty(da)&&!R.hasOwnProperty(da)){var va=da,Ca=U;X.push({command:Hd.removeSource,args:[va]});Ca[va]=!0}for(da in R)if(R.hasOwnProperty(da))if(!kb.hasOwnProperty(da))X.push({command:Hd.addSource,args:[da,R[da]]});else if(!a.deepEqual(kb[da],R[da])){if(va="geojson"===kb[da].type&&"geojson"===R[da].type)a:{va=void 0;Ca=kb;var Qa=R,lb=da;for(va in Ca[lb])if(Ca[lb].hasOwnProperty(va)&&"data"!==
va&&!a.deepEqual(Ca[lb][va],Qa[lb][va])){va=!1;break a}for(va in Qa[lb])if(Qa[lb].hasOwnProperty(va)&&"data"!==va&&!a.deepEqual(Ca[lb][va],Qa[lb][va])){va=!1;break a}va=!0}if(va)X.push({command:Hd.setGeoJSONSourceData,args:[da,R[da].data]});else{va=da;Ca=R;Qa=X;lb=va;var Lb=U;Qa.push({command:Hd.removeSource,args:[lb]});Lb[lb]=!0;Qa.push({command:Hd.addSource,args:[va,Ca[va]]})}}}function K(kb,R,X,U,da,va){kb=kb||{};R=R||{};for(var Ca in kb)kb.hasOwnProperty(Ca)&&(a.deepEqual(kb[Ca],R[Ca])||X.push({command:va,
args:[U,Ca,R[Ca],da]}));for(Ca in R)R.hasOwnProperty(Ca)&&!kb.hasOwnProperty(Ca)&&(a.deepEqual(kb[Ca],R[Ca])||X.push({command:va,args:[U,Ca,R[Ca],da]}))}function M(kb){return kb.id}function H(kb,R){kb[R.id]=R;return kb}function O(kb,R,X){kb=kb||[];R=R||[];var U=kb.map(M),da=R.map(M);kb=kb.reduce(H,{});R=R.reduce(H,{});var va=U.slice(),Ca=Object.create(null),Qa,lb,Lb;for(lb=Qa=0;Qa<U.length;Qa++){var Rb=U[Qa];R.hasOwnProperty(Rb)?lb++:(X.push({command:Hd.removeLayer,args:[Rb]}),va.splice(va.indexOf(Rb,
lb),1))}for(lb=Qa=0;Qa<da.length;Qa++)if(Rb=da[da.length-1-Qa],va[va.length-1-Qa]!==Rb){kb.hasOwnProperty(Rb)?(X.push({command:Hd.removeLayer,args:[Rb]}),va.splice(va.lastIndexOf(Rb,va.length-lb),1)):lb++;var dc=va[va.length-Qa];X.push({command:Hd.addLayer,args:[R[Rb],dc]});va.splice(va.length-Qa,0,Rb);Ca[Rb]=!0}for(Qa=0;Qa<da.length;Qa++)if(Rb=da[Qa],lb=kb[Rb],U=R[Rb],!Ca[Rb]&&!a.deepEqual(lb,U))if(a.deepEqual(lb.source,U.source)&&a.deepEqual(lb["source-layer"],U["source-layer"])&&a.deepEqual(lb.type,
U.type)){K(lb.layout,U.layout,X,Rb,null,Hd.setLayoutProperty);K(lb.paint,U.paint,X,Rb,null,Hd.setPaintProperty);a.deepEqual(lb.filter,U.filter)||X.push({command:Hd.setFilter,args:[Rb,U.filter]});a.deepEqual(lb.minzoom,U.minzoom)&&a.deepEqual(lb.maxzoom,U.maxzoom)||X.push({command:Hd.setLayerZoomRange,args:[Rb,U.minzoom,U.maxzoom]});for(Lb in lb)lb.hasOwnProperty(Lb)&&"layout"!==Lb&&"paint"!==Lb&&"filter"!==Lb&&"metadata"!==Lb&&"minzoom"!==Lb&&"maxzoom"!==Lb&&(0===Lb.indexOf("paint.")?K(lb[Lb],U[Lb],
X,Rb,Lb.slice(6),Hd.setPaintProperty):a.deepEqual(lb[Lb],U[Lb])||X.push({command:Hd.setLayerProperty,args:[Rb,Lb,U[Lb]]}));for(Lb in U)U.hasOwnProperty(Lb)&&!lb.hasOwnProperty(Lb)&&"layout"!==Lb&&"paint"!==Lb&&"filter"!==Lb&&"metadata"!==Lb&&"minzoom"!==Lb&&"maxzoom"!==Lb&&(0===Lb.indexOf("paint.")?K(lb[Lb],U[Lb],X,Rb,Lb.slice(6),Hd.setPaintProperty):a.deepEqual(lb[Lb],U[Lb])||X.push({command:Hd.setLayerProperty,args:[Rb,Lb,U[Lb]]}))}else X.push({command:Hd.removeLayer,args:[Rb]}),dc=va[va.lastIndexOf(Rb)+
1],X.push({command:Hd.addLayer,args:[U,dc]})}function I(kb,R){if(!kb)return[{command:Hd.setStyle,args:[R]}];var X=[];try{if(!a.deepEqual(kb.version,R.version))return[{command:Hd.setStyle,args:[R]}];a.deepEqual(kb.center,R.center)||X.push({command:Hd.setCenter,args:[R.center]});a.deepEqual(kb.zoom,R.zoom)||X.push({command:Hd.setZoom,args:[R.zoom]});a.deepEqual(kb.bearing,R.bearing)||X.push({command:Hd.setBearing,args:[R.bearing]});a.deepEqual(kb.pitch,R.pitch)||X.push({command:Hd.setPitch,args:[R.pitch]});
a.deepEqual(kb.sprite,R.sprite)||X.push({command:Hd.setSprite,args:[R.sprite]});a.deepEqual(kb.glyphs,R.glyphs)||X.push({command:Hd.setGlyphs,args:[R.glyphs]});a.deepEqual(kb.transition,R.transition)||X.push({command:Hd.setTransition,args:[R.transition]});a.deepEqual(kb.light,R.light)||X.push({command:Hd.setLight,args:[R.light]});var U={},da=[];J(kb.sources,R.sources,da,U);var va=[];kb.layers&&kb.layers.forEach(function(Ca){U[Ca.source]?X.push({command:Hd.removeLayer,args:[Ca.id]}):va.push(Ca)});
X=X.concat(da);O(va,R.layers,X)}catch(Ca){console.warn("Unable to compute style diff:",Ca),X=[{command:Hd.setStyle,args:[R]}]}return X}function L(kb,R,X,U,da){var va=a.create();R?(a.scale(va,va,[1/da,1/da,1]),X||a.rotateZ(va,va,U.angle)):a.multiply(va,U.labelPlaneMatrix,kb);return va}function Q(kb,R,X,U,da){return R?(kb=a.clone(kb),a.scale(kb,kb,[da,da,1]),X||a.rotateZ(kb,kb,-U.angle),kb):U.glCoordMatrix}function Z(kb,R){kb=[kb.x,kb.y,0,1];ja(kb,kb,R);R=kb[3];return{point:new a.Point(kb[0]/R,kb[1]/
R),signedDistanceFromCamera:R}}function ba(kb,R,X,U,da,va,Ca,Qa){var lb=U?kb.textSizeData:kb.iconSizeData,Lb=a.evaluateSizeForZoom(lb,X.transform.zoom),Rb=[256/X.width*2+1,256/X.height*2+1],dc=U?kb.text.dynamicLayoutVertexArray:kb.icon.dynamicLayoutVertexArray;dc.clear();for(var Ic=kb.lineVertexArray,Gc=U?kb.text.placedSymbolArray:kb.icon.placedSymbolArray,Xc=X.transform.width/X.transform.height,$c=!1,Wc=0;Wc<Gc.length;Wc++){var wd=Gc.get(Wc);if(wd.hidden||wd.writingMode===a.WritingMode.vertical&&
!$c)aa(wd.numGlyphs,dc);else{$c=!1;var Qd=[wd.anchorX,wd.anchorY,0,1];a.transformMat4(Qd,Qd,R);var yd=Qd[0]/Qd[3],ge=Qd[1]/Qd[3];if(yd>=-Rb[0]&&yd<=Rb[0]&&ge>=-Rb[1]&&ge<=Rb[1]){$c=.5+X.transform.cameraToCenterDistance/Qd[3]*.5;Qd=a.evaluateSizeForFeature(lb,Lb,wd);Qd=Ca?Qd/$c:Qd*$c;yd=new a.Point(wd.anchorX,wd.anchorY);ge=Z(yd,da).point;var be={},ke=T(wd,Qd,!1,Qa,R,da,va,kb.glyphOffsetArray,Ic,dc,ge,yd,be,Xc);$c=ke.useVertical;(ke.notEnoughRoom||$c||ke.needsFlipping&&T(wd,Qd,!0,Qa,R,da,va,kb.glyphOffsetArray,
Ic,dc,ge,yd,be,Xc).notEnoughRoom)&&aa(wd.numGlyphs,dc)}else aa(wd.numGlyphs,dc)}}U?kb.text.dynamicLayoutVertexBuffer.updateData(dc):kb.icon.dynamicLayoutVertexBuffer.updateData(dc)}function V(kb,R,X,U,da,va,Ca,Qa,lb,Lb,Rb){var dc=Qa.glyphStartIndex+Qa.numGlyphs,Ic=Qa.lineStartIndex,Gc=Qa.lineStartIndex+Qa.lineLength,Xc=R.getoffsetX(Qa.glyphStartIndex);R=R.getoffsetX(dc-1);Xc=W(kb*Xc,X,U,da,va,Ca,Qa.segment,Ic,Gc,lb,Lb,Rb);return Xc?(kb=W(kb*R,X,U,da,va,Ca,Qa.segment,Ic,Gc,lb,Lb,Rb))?{first:Xc,last:kb}:
null:null}function S(kb,R,X,U){return kb===a.WritingMode.horizontal&&Math.abs(X.y-R.y)>Math.abs(X.x-R.x)*U?{useVertical:!0}:(kb===a.WritingMode.vertical?R.y<X.y:R.x>X.x)?{needsFlipping:!0}:null}function T(kb,R,X,U,da,va,Ca,Qa,lb,Lb,Rb,dc,Ic,Gc){R/=24;var Xc=kb.lineOffsetX*R,$c=kb.lineOffsetY*R;if(1<kb.numGlyphs){da=kb.glyphStartIndex+kb.numGlyphs;var Wc=kb.lineStartIndex,wd=kb.lineStartIndex+kb.lineLength,Qd=V(R,Qa,Xc,$c,X,Rb,dc,kb,lb,va,Ic);if(!Qd)return{notEnoughRoom:!0};var yd=Z(Qd.first.point,
Ca).point;Ca=Z(Qd.last.point,Ca).point;if(U&&!X&&(Gc=S(kb.writingMode,yd,Ca,Gc)))return Gc;Gc=[Qd.first];for(U=kb.glyphStartIndex+1;U<da-1;U++)Gc.push(W(R*Qa.getoffsetX(U),Xc,$c,X,Rb,dc,kb.segment,Wc,wd,lb,va,Ic));Gc.push(Qd.last)}else{if(U&&!X&&(Wc=Z(dc,da).point,wd=kb.lineStartIndex+kb.segment+1,wd=new a.Point(lb.getx(wd),lb.gety(wd)),Qd=Z(wd,da),da=0<Qd.signedDistanceFromCamera?Qd.point:fa(dc,wd,Wc,1,da),Gc=S(kb.writingMode,Wc,da,Gc)))return Gc;kb=W(R*Qa.getoffsetX(kb.glyphStartIndex),Xc,$c,X,
Rb,dc,kb.segment,kb.lineStartIndex,kb.lineStartIndex+kb.lineLength,lb,va,Ic);if(!kb)return{notEnoughRoom:!0};Gc=[kb]}kb=0;for(X=Gc;kb<X.length;kb+=1)va=X[kb],a.addDynamicAttributes(Lb,va.point,va.angle);return{}}function fa(kb,R,X,U,da){kb=Z(kb.add(kb.sub(R)._unit()),da).point;kb=X.sub(kb);return X.add(kb._mult(U/kb.mag()))}function W(kb,R,X,U,da,va,Ca,Qa,lb,Lb,Rb,dc){var Ic=U?kb-R:kb+R;kb=0<Ic?1:-1;R=0;U&&(kb*=-1,R=Math.PI);0>kb&&(R+=Math.PI);U=0<kb?Qa+Ca:Qa+Ca+1;Ca=da;var Gc=0,Xc=0,$c=Math.abs(Ic);
for(Ic=[];Gc+Xc<=$c;){U+=kb;if(U<Qa||U>=lb)return null;da=Ca;Ic.push(Ca);Ca=dc[U];if(void 0===Ca){Ca=new a.Point(Lb.getx(U),Lb.gety(U));var Wc=Z(Ca,Rb);0<Wc.signedDistanceFromCamera?Ca=dc[U]=Wc.point:(Wc=U-kb,Wc=0===Gc?va:new a.Point(Lb.getx(Wc),Lb.gety(Wc)),Ca=fa(Wc,Ca,da,$c-Gc+1,Rb))}Gc+=Xc;Xc=da.dist(Ca)}Qa=($c-Gc)/Xc;va=Ca.sub(da);Qa=va.mult(Qa)._add(da);Qa._add(va._unit()._perp()._mult(X*kb));X=R+Math.atan2(Ca.y-da.y,Ca.x-da.x);Ic.push(Qa);return{point:Qa,angle:X,path:Ic}}function aa(kb,R){for(var X=
0;X<kb;X++){var U=R.length;R.resize(U+4);R.float32.set(oe,3*U)}}function ja(kb,R,X){var U=R[0];R=R[1];kb[0]=X[0]*U+X[4]*R+X[12];kb[1]=X[1]*U+X[5]*R+X[13];kb[3]=X[3]*U+X[7]*R+X[15];return kb}function ma(kb,R,X){return a.EXTENT/(kb.tileSize*Math.pow(2,X-kb.tileID.overscaledZ))*R}function ia(kb,R,X,U,da){var va=a.getAnchorAlignment(kb);R*=-(va.horizontalAlign-.5);X*=-(va.verticalAlign-.5);kb=a.evaluateVariableOffset(kb,U);return new a.Point(R+kb[0]*da,X+kb[1]*da)}function ra(kb,R,X,U,da,va){var Ca=kb.x1,
Qa=kb.x2,lb=kb.y1,Lb=kb.y2,Rb=kb.anchorPointX;kb=kb.anchorPointY;R=new a.Point(R,X);U&&R._rotate(da?va:-va);return{x1:Ca+R.x,y1:lb+R.y,x2:Qa+R.x,y2:Lb+R.y,anchorPointX:Rb,anchorPointY:kb}}function wa(kb,R,X,U,da){kb.emplaceBack(R?1:0,X?1:0,U||0,da||0);kb.emplaceBack(R?1:0,X?1:0,U||0,da||0);kb.emplaceBack(R?1:0,X?1:0,U||0,da||0);kb.emplaceBack(R?1:0,X?1:0,U||0,da||0)}function pa(kb){if(0===kb.opacity&&!kb.placed)return 0;if(1===kb.opacity&&kb.placed)return 4294967295;var R=kb.placed?1:0;kb=Math.floor(127*
kb.opacity);return kb*wc+R*rc+kb*pc+R*ud+kb*ae+R*Wd+kb*Ce+R}function la(kb,R){var X=/#pragma mapbox: ([\w]+) ([\w]+) ([\w]+) ([\w]+)/g,U={};kb=kb.replace(X,function(da,va,Ca,Qa,lb){U[lb]=!0;return"define"===va?"\n#ifndef HAS_UNIFORM_u_"+lb+"\nvarying "+Ca+" "+Qa+" "+lb+";\n#else\nuniform "+Ca+" "+Qa+" u_"+lb+";\n#endif\n":"\n#ifdef HAS_UNIFORM_u_"+lb+"\n    "+Ca+" "+Qa+" "+lb+" \x3d u_"+lb+";\n#endif\n"});R=R.replace(X,function(da,va,Ca,Qa,lb){da="float"===Qa?"vec2":"vec4";var Lb=lb.match(/color/)?
"color":da;return U[lb]?"define"===va?"\n#ifndef HAS_UNIFORM_u_"+lb+"\nuniform lowp float u_"+lb+"_t;\nattribute "+Ca+" "+da+" a_"+lb+";\nvarying "+Ca+" "+Qa+" "+lb+";\n#else\nuniform "+Ca+" "+Qa+" u_"+lb+";\n#endif\n":"vec4"===Lb?"\n#ifndef HAS_UNIFORM_u_"+lb+"\n    "+lb+" \x3d a_"+lb+";\n#else\n    "+Ca+" "+Qa+" "+lb+" \x3d u_"+lb+";\n#endif\n":"\n#ifndef HAS_UNIFORM_u_"+lb+"\n    "+lb+" \x3d unpack_mix_"+Lb+"(a_"+lb+", u_"+lb+"_t);\n#else\n    "+Ca+" "+Qa+" "+lb+" \x3d u_"+lb+";\n#endif\n":"define"===
va?"\n#ifndef HAS_UNIFORM_u_"+lb+"\nuniform lowp float u_"+lb+"_t;\nattribute "+Ca+" "+da+" a_"+lb+";\n#else\nuniform "+Ca+" "+Qa+" u_"+lb+";\n#endif\n":"vec4"===Lb?"\n#ifndef HAS_UNIFORM_u_"+lb+"\n    "+Ca+" "+Qa+" "+lb+" \x3d a_"+lb+";\n#else\n    "+Ca+" "+Qa+" "+lb+" \x3d u_"+lb+";\n#endif\n":"\n#ifndef HAS_UNIFORM_u_"+lb+"\n    "+Ca+" "+Qa+" "+lb+" \x3d unpack_mix_"+Lb+"(a_"+lb+", u_"+lb+"_t);\n#else\n    "+Ca+" "+Qa+" "+lb+" \x3d u_"+lb+";\n#endif\n"});return{fragmentSource:kb,vertexSource:R}}
function ka(kb,R,X){var U=1/ma(X,1,R.transform.tileZoom),da=Math.pow(2,X.tileID.overscaledZ);R=X.tileSize*Math.pow(2,R.transform.tileZoom)/da;da=R*(X.tileID.canonical.x+X.tileID.wrap*da);R*=X.tileID.canonical.y;return{u_image:0,u_texsize:X.imageAtlasTexture.size,u_scale:[U,kb.fromScale,kb.toScale],u_fade:kb.t,u_pixel_coord_upper:[da>>16,R>>16],u_pixel_coord_lower:[da&65535,R&65535]}}function na(kb,R,X){return kb.translatePosMatrix(R.tileID.posMatrix,R,X.paint.get("line-translate"),X.paint.get("line-translate-anchor"))}
function oa(kb,R,X,U,da,va,Ca){for(var Qa=kb.context,lb=Qa.gl,Lb=kb.useProgram("collisionBox"),Rb=[],dc=0,Ic=0,Gc=0;Gc<U.length;Gc++){var Xc=U[Gc],$c=R.getTile(Xc),Wc=$c.getBucket(X);if(Wc){var wd=Xc.posMatrix;if(0!==da[0]||0!==da[1])wd=kb.translatePosMatrix(Xc.posMatrix,$c,da,va);Xc=Ca?Wc.textCollisionBox:Wc.iconCollisionBox;var Qd=Wc.collisionCircleArray;if(0<Qd.length){var yd=a.create(),ge=wd;a.mul(yd,Wc.placementInvProjMatrix,kb.transform.glCoordMatrix);a.mul(yd,yd,Wc.placementViewportMatrix);
Rb.push({circleArray:Qd,circleOffset:Ic,transform:ge,invTransform:yd});Ic=dc+=Qd.length/4}if(Xc){Wc=Lb;Qd=Wc.draw;yd=lb.LINES;ge=Zc.disabled;var be=Bd.disabled,ke=kb.colorModeForRenderPass(),re=Zb.disabled,ne=kb.transform,Le=$c;$c=ma(Le,1,ne.zoom);var we=Math.pow(2,ne.zoom-Le.tileID.overscaledZ);Le=Le.tileID.overscaleFactor();Qd.call(Wc,Qa,yd,ge,be,ke,re,{u_matrix:wd,u_camera_to_center_distance:ne.cameraToCenterDistance,u_pixels_to_tile_units:$c,u_extrude_scale:[ne.pixelsToGLUnits[0]/($c*we),ne.pixelsToGLUnits[1]/
($c*we)],u_overscale_factor:Le},X.id,Xc.layoutVertexBuffer,Xc.indexBuffer,Xc.segments,null,kb.transform.zoom,null,null,Xc.collisionVertexBuffer)}}}if(Ca&&Rb.length){R=kb.useProgram("collisionCircle");U=new a.StructArrayLayout2f1f2i16;U.resize(4*dc);U._trim();for(va=da=0;va<Rb.length;va+=1)for(Ca=Rb[va],Lb=0;Lb<Ca.circleArray.length/4;Lb++)$c=4*Lb,Ic=Ca.circleArray[$c+0],Gc=Ca.circleArray[$c+1],Xc=Ca.circleArray[$c+2],$c=Ca.circleArray[$c+3],U.emplace(da++,Ic,Gc,Xc,$c,0),U.emplace(da++,Ic,Gc,Xc,$c,
1),U.emplace(da++,Ic,Gc,Xc,$c,2),U.emplace(da++,Ic,Gc,Xc,$c,3);if(!Dd||Dd.length<2*dc){dc*=2;da=new a.StructArrayLayout3ui6;da.resize(dc);da._trim();for(va=0;va<dc;va++)Ca=6*va,da.uint16[Ca+0]=4*va,da.uint16[Ca+1]=4*va+1,da.uint16[Ca+2]=4*va+2,da.uint16[Ca+3]=4*va+2,da.uint16[Ca+4]=4*va+3,da.uint16[Ca+5]=4*va;Dd=da}dc=Qa.createIndexBuffer(Dd,!0);U=Qa.createVertexBuffer(U,a.collisionCircleLayout.members,!0);for(da=0;da<Rb.length;da+=1)va=Rb[da],Ca=kb.transform,Ca={u_matrix:va.transform,u_inv_matrix:va.invTransform,
u_camera_to_center_distance:Ca.cameraToCenterDistance,u_viewport_size:[Ca.width,Ca.height]},R.draw(Qa,lb.TRIANGLES,Zc.disabled,Bd.disabled,kb.colorModeForRenderPass(),Zb.disabled,Ca,X.id,U,dc,a.SegmentVector.simpleSegment(0,2*va.circleOffset,va.circleArray.length,va.circleArray.length/2),null,kb.transform.zoom,null,null,null);U.destroy();dc.destroy()}}function sa(kb,R,X,U,da,va,Ca,Qa,lb,Lb,Rb,dc){var Ic=kb.context,Gc=Ic.gl,Xc=kb.transform,$c="map"===Qa,Wc="map"===lb,wd=$c&&"point"!==X.layout.get("symbol-placement"),
Qd=$c&&!Wc&&!wd,yd=void 0!==X.layout.get("symbol-sort-key").constantOr(1);lb=kb.depthModeForSublayer(0,Zc.ReadOnly);var ge=X.layout.get("text-variable-anchor");Qa=[];for(var be=0;be<U.length;be+=1){var ke=U[be],re=R.getTile(ke),ne=re.getBucket(X);if(ne){var Le=da?ne.text:ne.icon;if(Le&&Le.segments.get().length){var we=Le.programConfigurations.get(X.id),kf=da||ne.sdfIcons,Ne=da?ne.textSizeData:ne.iconSizeData,xf=Wc||0!==Xc.pitch,wf=kb,lg=wf.useProgram;var Cf=ne.iconsInText&&da?"symbolTextAndIcon":
kf?"symbolSDF":"symbolIcon";we=lg.call(wf,Cf,we);wf=a.evaluateSizeForZoom(Ne,Xc.zoom);var Dg=void 0;lg=[0,0];var ef=Cf=void 0,hg=null,ca=void 0;da?(Cf=re.glyphAtlasTexture,ef=Gc.LINEAR,Dg=re.glyphAtlasTexture.size,ne.iconsInText&&(lg=re.imageAtlasTexture.size,hg=re.imageAtlasTexture,ca="composite"===Ne.kind||"camera"===Ne.kind,ca=xf||kb.options.rotating||kb.options.zooming||ca?Gc.LINEAR:Gc.NEAREST)):(Dg=1!==X.layout.get("icon-size").constantOr(0)||ne.iconsNeedLinear,Cf=re.imageAtlasTexture,ef=kf||
kb.options.rotating||kb.options.zooming||Dg||xf?Gc.LINEAR:Gc.NEAREST,Dg=re.imageAtlasTexture.size);var ua=ma(re,1,kb.transform.zoom);xf=L(ke.posMatrix,Wc,$c,kb.transform,ua);ua=Q(ke.posMatrix,Wc,$c,kb.transform,ua);var Ba=ge&&ne.hasTextData();Ba="none"!==X.layout.get("icon-text-fit")&&Ba&&ne.hasIconData();wd&&ba(ne,ke.posMatrix,kb,da,xf,ua,Wc,Lb);ke=kb.translatePosMatrix(ke.posMatrix,re,va,Ca);xf=wd||da&&ge||Ba?ye:xf;re=kb.translatePosMatrix(ua,re,va,Ca,!0);ua=kf&&0!==X.paint.get(da?"text-halo-width":
"icon-halo-width").constantOr(1);Ba=void 0;Ba=kf?ne.iconsInText?Ec(Ne.kind,wf,Qd,Wc,kb,ke,xf,re,Dg,lg):qc(Ne.kind,wf,Qd,Wc,kb,ke,xf,re,da,Dg,!0):hc(Ne.kind,wf,Qd,Wc,kb,ke,xf,re,da,Dg);ne={program:we,buffers:Le,uniformValues:Ba,atlasTexture:Cf,atlasTextureIcon:hg,atlasInterpolation:ef,atlasInterpolationIcon:ca,isSDF:kf,hasHalo:ua};if(yd)for(kf=0,Le=Le.segments.get();kf<Le.length;kf+=1)Ne=Le[kf],Qa.push({segments:new a.SegmentVector([Ne]),sortKey:Ne.sortKey,state:ne});else Qa.push({segments:Le.segments,
sortKey:0,state:ne})}}}yd&&Qa.sort(function(Da,Ma){return Da.sortKey-Ma.sortKey});for(R=0;R<Qa.length;R+=1)U=Qa[R],da=U.state,Ic.activeTexture.set(Gc.TEXTURE0),da.atlasTexture.bind(da.atlasInterpolation,Gc.CLAMP_TO_EDGE),da.atlasTextureIcon&&(Ic.activeTexture.set(Gc.TEXTURE1),da.atlasTextureIcon&&da.atlasTextureIcon.bind(da.atlasInterpolationIcon,Gc.CLAMP_TO_EDGE)),da.isSDF&&(va=da.uniformValues,da.hasHalo&&(va.u_is_halo=1,za(da.buffers,U.segments,X,kb,da.program,lb,Rb,dc,va)),va.u_is_halo=0),za(da.buffers,
U.segments,X,kb,da.program,lb,Rb,dc,da.uniformValues)}function za(kb,R,X,U,da,va,Ca,Qa,lb){var Lb=U.context;da.draw(Lb,Lb.gl.TRIANGLES,va,Ca,Qa,Zb.disabled,lb,X.id,kb.layoutVertexBuffer,kb.indexBuffer,R,X.paint,U.transform.zoom,kb.programConfigurations.get(X.id),kb.dynamicLayoutVertexBuffer,kb.opacityVertexBuffer)}function Ha(kb,R,X,U,da,va,Ca){var Qa=kb.context.gl,lb=X.paint.get("fill-pattern"),Lb=lb&&lb.constantOr(1),Rb=X.getCrossfadeParameters(),dc;if(Ca){var Ic=Lb&&!X.getPaintProperty("fill-outline-color")?
"fillOutlinePattern":"fillOutline";var Gc=Qa.LINES}else Ic=Lb?"fillPattern":"fill",Gc=Qa.TRIANGLES;for(var Xc=0;Xc<U.length;Xc+=1){var $c=U[Xc];var Wc=R.getTile($c);if(!Lb||Wc.patternsLoaded()){var wd=Wc.getBucket(X);if(wd){var Qd=wd.programConfigurations.get(X.id),yd=kb.useProgram(Ic,Qd);Lb&&(kb.context.activeTexture.set(Qa.TEXTURE0),Wc.imageAtlasTexture.bind(Qa.LINEAR,Qa.CLAMP_TO_EDGE),Qd.updatePaintBuffers(Rb));if((dc=lb.constantOr(null))&&Wc.imageAtlas){var ge=Wc.imageAtlas;var be=ge.patternPositions[dc.to.toString()];
dc=ge.patternPositions[dc.from.toString()];be&&dc&&Qd.setConstantPatternPositions(be,dc)}ge=kb.translatePosMatrix($c.posMatrix,Wc,X.paint.get("fill-translate"),X.paint.get("fill-translate-anchor"));if(Ca){be=wd.indexBuffer2;dc=wd.segments2;var ke=[Qa.drawingBufferWidth,Qa.drawingBufferHeight];if("fillOutlinePattern"===Ic&&Lb){var re=a,ne=re.extend;Wc=a.extend({u_matrix:ge},ka(Rb,kb,Wc));Wc=ne.call(re,Wc,{u_world:ke})}else Wc={u_matrix:ge,u_world:ke}}else be=wd.indexBuffer,dc=wd.segments,Wc=Lb?a.extend({u_matrix:ge},
ka(Rb,kb,Wc)):{u_matrix:ge};yd.draw(kb.context,Gc,da,kb.stencilModeForClipping($c),va,Zb.disabled,Wc,X.id,wd.layoutVertexBuffer,be,dc,X.paint,kb.transform.zoom,Qd)}}}}function Wa(kb,R,X,U,da,va,Ca){for(var Qa=kb.context,lb=Qa.gl,Lb=X.paint.get("fill-extrusion-pattern"),Rb=Lb.constantOr(1),dc=X.getCrossfadeParameters(),Ic=X.paint.get("fill-extrusion-opacity"),Gc=0;Gc<U.length;Gc+=1){var Xc=U[Gc],$c=R.getTile(Xc),Wc=$c.getBucket(X);if(Wc){var wd=Wc.programConfigurations.get(X.id),Qd=kb.useProgram(Rb?
"fillExtrusionPattern":"fillExtrusion",wd);Rb&&(kb.context.activeTexture.set(lb.TEXTURE0),$c.imageAtlasTexture.bind(lb.LINEAR,lb.CLAMP_TO_EDGE),wd.updatePaintBuffers(dc));var yd=Lb.constantOr(null);if(yd&&$c.imageAtlas){var ge=$c.imageAtlas,be=ge.patternPositions[yd.to.toString()];yd=ge.patternPositions[yd.from.toString()];be&&yd&&wd.setConstantPatternPositions(be,yd)}be=kb.translatePosMatrix(Xc.posMatrix,$c,X.paint.get("fill-extrusion-translate"),X.paint.get("fill-extrusion-translate-anchor"));yd=
X.paint.get("fill-extrusion-vertical-gradient");if(Rb){ge=kb;var ke=dc;$c=a.extend(Bb(be,ge,yd,Ic),ka(ke,ge,$c),{u_height_factor:-Math.pow(2,Xc.overscaledZ)/$c.tileSize/8})}else $c=Bb(be,kb,yd,Ic);Qd.draw(Qa,Qa.gl.TRIANGLES,da,va,Ca,Zb.backCCW,$c,X.id,Wc.layoutVertexBuffer,Wc.indexBuffer,Wc.segments,X.paint,kb.transform.zoom,wd)}}}function Za(kb){var R=kb.transform.padding;bb(kb,0,kb.transform.height-(R.top||0)+1.5,kb.transform.width,3,ze);bb(kb,0,(R.bottom||0)+1.5,kb.transform.width,3,We);bb(kb,
(R.left||0)-1.5,0,3,kb.transform.height,fg);bb(kb,kb.transform.width-(R.right||0)-1.5,0,3,kb.transform.height,He);var X=kb.transform.centerPoint;R=X.x;X=kb.transform.height-X.y;var U=cg;bb(kb,R-1,X-10,2,20,U);bb(kb,R-10,X-1,20,2,U)}function bb(kb,R,X,U,da,va){kb=kb.context;var Ca=kb.gl;Ca.enable(Ca.SCISSOR_TEST);Ca.scissor(R*a.browser.devicePixelRatio,X*a.browser.devicePixelRatio,U*a.browser.devicePixelRatio,da*a.browser.devicePixelRatio);kb.clear({color:va});Ca.disable(Ca.SCISSOR_TEST)}function sb(kb,
R){var X=!1,U=null,da=function(){U=null;X&&(kb(),U=setTimeout(da,R),X=!1)};return function(){X=!0;U||da();return U}}function hb(kb,R){if(!kb.duration||kb.duration<R.duration)kb.duration=R.duration,kb.easing=R.easing}function ub(kb,R,X){var U=X.maxSpeed,da=X.linearity,va=X.deceleration;kb=a.clamp(kb*da/(R/1E3),-U,U);da=Math.abs(kb)/(va*da);return{easing:X.easing,duration:1E3*da,amount:da/2*kb}}function pb(kb,R){for(var X={},U=0;U<kb.length;U++)X[kb[U].identifier]=R[U];return X}function Ab(kb,R,X){for(var U=
0;U<kb.length;U++)if(kb[U].identifier===X)return R[U]}function tb(kb){return Math.abs(kb.y)>Math.abs(kb.x)}function vb(kb){return kb*(2-kb)}function qb(kb){return kb.panDelta&&kb.panDelta.mag()||kb.zoomDelta||kb.bearingDelta||kb.pitchDelta}function zb(kb){kb.parentNode&&kb.parentNode.removeChild(kb)}function La(kb,R,X){kb=new a.LngLat(kb.lng,kb.lat);if(R){var U=new a.LngLat(kb.lng-360,kb.lat),da=new a.LngLat(kb.lng+360,kb.lat),va=X.locationPoint(kb).distSqr(R);X.locationPoint(U).distSqr(R)<va?kb=
U:X.locationPoint(da).distSqr(R)<va&&(kb=da)}for(;180<Math.abs(kb.lng-X.center.lng);){R=X.locationPoint(kb);if(0<=R.x&&0<=R.y&&R.x<=X.width&&R.y<=X.height)break;kb.lng=kb.lng>X.center.lng?kb.lng-360:kb.lng+360}return kb}function Ka(kb,R,X){kb=kb.classList;for(var U in oi)kb.remove("mapboxgl-"+X+"-anchor-"+U);kb.add("mapboxgl-"+X+"-anchor-"+R)}function ya(kb){void 0!==ai?kb(ai):void 0!==a.window.navigator.permissions?a.window.navigator.permissions.query({name:"geolocation"}).then(function(R){ai="denied"!==
R.state;kb(ai)}):(ai=!!a.window.navigator.geolocation,kb(ai))}function Aa(kb,R,X){var U=X&&X.maxWidth||100,da=kb._container.clientHeight/2,va=kb.unproject([0,da]);da=kb.unproject([U,da]);va=va.distanceTo(da);X&&"imperial"===X.unit?(X=3.2808*va,5280<X?Ja(R,U,X/5280,kb._getUIString("ScaleControl.Miles")):Ja(R,U,X,kb._getUIString("ScaleControl.Feet"))):X&&"nautical"===X.unit?Ja(R,U,va/1852,kb._getUIString("ScaleControl.NauticalMiles")):1E3<=va?Ja(R,U,va/1E3,kb._getUIString("ScaleControl.Kilometers")):
Ja(R,U,va,kb._getUIString("ScaleControl.Meters"))}function Ja(kb,R,X,U){var da=Math.pow(10,(""+Math.floor(X)).length-1);var va=X/da;if(10<=va)va=10;else if(5<=va)va=5;else if(3<=va)va=3;else if(2<=va)va=2;else if(1<=va)va=1;else{var Ca=Math.pow(10,Math.ceil(-Math.log(va)/Math.LN10));va=Math.round(va*Ca)/Ca}da*=va;kb.style.width=da/X*R+"px";kb.innerHTML=da+"\x26nbsp;"+U}function Ta(kb){if(kb){if("number"===typeof kb){var R=Math.round(Math.sqrt(.5*Math.pow(kb,2)));return{center:new a.Point(0,0),top:new a.Point(0,
kb),"top-left":new a.Point(R,R),"top-right":new a.Point(-R,R),bottom:new a.Point(0,-kb),"bottom-left":new a.Point(R,-R),"bottom-right":new a.Point(-R,-R),left:new a.Point(kb,0),right:new a.Point(-kb,0)}}return kb instanceof a.Point||Array.isArray(kb)?(kb=a.Point.convert(kb),{center:kb,top:kb,"top-left":kb,"top-right":kb,bottom:kb,"bottom-left":kb,"bottom-right":kb,left:kb,right:kb}):{center:a.Point.convert(kb.center||[0,0]),top:a.Point.convert(kb.top||[0,0]),"top-left":a.Point.convert(kb["top-left"]||
[0,0]),"top-right":a.Point.convert(kb["top-right"]||[0,0]),bottom:a.Point.convert(kb.bottom||[0,0]),"bottom-left":a.Point.convert(kb["bottom-left"]||[0,0]),"bottom-right":a.Point.convert(kb["bottom-right"]||[0,0]),left:a.Point.convert(kb.left||[0,0]),right:a.Point.convert(kb.right||[0,0])}}return Ta(new a.Point(0,0))}var $a=a.createCommonjsModule(function(kb){function R(da){return!X(da)}function X(da){if("undefined"===typeof window||"undefined"===typeof document)return"not a browser";if(!(Array.prototype&&
Array.prototype.every&&Array.prototype.filter&&Array.prototype.forEach&&Array.prototype.indexOf&&Array.prototype.lastIndexOf&&Array.prototype.map&&Array.prototype.some&&Array.prototype.reduce&&Array.prototype.reduceRight&&Array.isArray))return"insufficent Array support";if(!Function.prototype||!Function.prototype.bind)return"insufficient Function support";if(!(Object.keys&&Object.create&&Object.getPrototypeOf&&Object.getOwnPropertyNames&&Object.isSealed&&Object.isFrozen&&Object.isExtensible&&Object.getOwnPropertyDescriptor&&
Object.defineProperty&&Object.defineProperties&&Object.seal&&Object.freeze&&Object.preventExtensions))return"insufficient Object support";if(!("JSON"in window&&"parse"in JSON&&"stringify"in JSON))return"insufficient JSON support";if("Worker"in window&&"Blob"in window&&"URL"in window){var va=new Blob([""],{type:"text/javascript"});va=URL.createObjectURL(va);try{var Ca=new Worker(va);var Qa=!0}catch(lb){Qa=!1}Ca&&Ca.terminate();URL.revokeObjectURL(va)}else Qa=!1;if(!Qa)return"insufficient worker support";
if(!("Uint8ClampedArray"in window))return"insufficient Uint8ClampedArray support";if(!ArrayBuffer.isView)return"insufficient ArrayBuffer support";Qa=document.createElement("canvas");Qa.width=Qa.height=1;Qa=(Ca=Qa.getContext("2d"))?(Ca=Ca.getImageData(0,0,1,1))&&Ca.width===Qa.width:!1;if(!Qa)return"insufficient Canvas/getImageData support";da=da&&da.failIfMajorPerformanceCaveat;void 0===U[da]&&(Qa=U,Ca=document.createElement("canvas"),va=Object.create(R.webGLContextAttributes),va.failIfMajorPerformanceCaveat=
da,Ca=Ca.probablySupportsContext?Ca.probablySupportsContext("webgl",va)||Ca.probablySupportsContext("experimental-webgl",va):Ca.supportsContext?Ca.supportsContext("webgl",va)||Ca.supportsContext("experimental-webgl",va):Ca.getContext("webgl",va)||Ca.getContext("experimental-webgl",va),Ca?(va=Ca.createShader(Ca.VERTEX_SHADER),!va||Ca.isContextLost()?Ca=!1:(Ca.shaderSource(va,"void main() {}"),Ca.compileShader(va),Ca=!0===Ca.getShaderParameter(va,Ca.COMPILE_STATUS))):Ca=!1,Qa[da]=Ca);if(!U[da])return"insufficient WebGL support"}
kb.exports?kb.exports=R:window&&(window.mapboxgl=window.mapboxgl||{},window.mapboxgl.supported=R,window.mapboxgl.notSupportedReason=X);var U={};R.webGLContextAttributes={antialias:!1,alpha:!0,stencil:!0,depth:!0}}),ab={create:function(kb,R,X){kb=a.window.document.createElement(kb);void 0!==R&&(kb.className=R);X&&X.appendChild(kb);return kb},createNS:function(kb,R){return a.window.document.createElementNS(kb,R)}},Db=a.window.document.documentElement.style,Nb=g(["userSelect","MozUserSelect","WebkitUserSelect",
"msUserSelect"]),ec;ab.disableDrag=function(){Db&&Nb&&(ec=Db[Nb],Db[Nb]="none")};ab.enableDrag=function(){Db&&Nb&&(Db[Nb]=ec)};var ob=g(["transform","WebkitTransform"]);ab.setTransform=function(kb,R){kb.style[ob]=R};var Cb=!1;try{var Qb=Object.defineProperty({},"passive",{get:function(){Cb=!0}});a.window.addEventListener("test",Qb,Qb);a.window.removeEventListener("test",Qb,Qb)}catch(kb){Cb=!1}ab.addEventListener=function(kb,R,X,U){void 0===U&&(U={});"passive"in U&&Cb?kb.addEventListener(R,X,U):kb.addEventListener(R,
X,U.capture)};ab.removeEventListener=function(kb,R,X,U){void 0===U&&(U={});"passive"in U&&Cb?kb.removeEventListener(R,X,U):kb.removeEventListener(R,X,U.capture)};var yc=function(kb){kb.preventDefault();kb.stopPropagation();a.window.removeEventListener("click",yc,!0)};ab.suppressClick=function(){a.window.addEventListener("click",yc,!0);a.window.setTimeout(function(){a.window.removeEventListener("click",yc,!0)},0)};ab.mousePos=function(kb,R){var X=kb.getBoundingClientRect();return new a.Point(R.clientX-
X.left-kb.clientLeft,R.clientY-X.top-kb.clientTop)};ab.touchPos=function(kb,R){for(var X=kb.getBoundingClientRect(),U=[],da=0;da<R.length;da++)U.push(new a.Point(R[da].clientX-X.left-kb.clientLeft,R[da].clientY-X.top-kb.clientTop));return U};ab.mouseButton=function(kb){return"undefined"!==typeof a.window.InstallTrigger&&2===kb.button&&kb.ctrlKey&&0<=a.window.navigator.platform.toUpperCase().indexOf("MAC")?0:kb.button};ab.remove=function(kb){kb.parentNode&&kb.parentNode.removeChild(kb)};var Jc=function(kb){function R(){kb.call(this);
this.images={};this.updatedImages={};this.callbackDispatchedThisFrame={};this.loaded=!1;this.requestors=[];this.patterns={};this.atlasImage=new a.RGBAImage({width:1,height:1});this.dirty=!0}kb&&(R.__proto__=kb);R.prototype=Object.create(kb&&kb.prototype);R.prototype.constructor=R;R.prototype.isLoaded=function(){return this.loaded};R.prototype.setLoaded=function(X){if(this.loaded!==X&&(this.loaded=X)){X=0;for(var U=this.requestors;X<U.length;X+=1){var da=U[X];this._notify(da.ids,da.callback)}this.requestors=
[]}};R.prototype.getImage=function(X){return this.images[X]};R.prototype.addImage=function(X,U){this._validate(X,U)&&(this.images[X]=U)};R.prototype._validate=function(X,U){var da=!0;this._validateStretch(U.stretchX,U.data&&U.data.width)||(this.fire(new a.ErrorEvent(Error('Image "'+X+'" has invalid "stretchX" value'))),da=!1);this._validateStretch(U.stretchY,U.data&&U.data.height)||(this.fire(new a.ErrorEvent(Error('Image "'+X+'" has invalid "stretchY" value'))),da=!1);this._validateContent(U.content,
U)||(this.fire(new a.ErrorEvent(Error('Image "'+X+'" has invalid "content" value'))),da=!1);return da};R.prototype._validateStretch=function(X,U){if(!X)return!0;for(var da=0,va=0;va<X.length;va+=1){var Ca=X[va];if(Ca[0]<da||Ca[1]<Ca[0]||U<Ca[1])return!1;da=Ca[1]}return!0};R.prototype._validateContent=function(X,U){return X?4!==X.length||0>X[0]||U.data.width<X[0]||0>X[1]||U.data.height<X[1]||0>X[2]||U.data.width<X[2]||0>X[3]||U.data.height<X[3]||X[2]<X[0]||X[3]<X[1]?!1:!0:!0};R.prototype.updateImage=
function(X,U){U.version=this.images[X].version+1;this.images[X]=U;this.updatedImages[X]=!0};R.prototype.removeImage=function(X){var U=this.images[X];delete this.images[X];delete this.patterns[X];if(U.userImage&&U.userImage.onRemove)U.userImage.onRemove()};R.prototype.listImages=function(){return Object.keys(this.images)};R.prototype.getImages=function(X,U){var da=!0;if(!this.isLoaded())for(var va=0;va<X.length;va+=1)this.images[X[va]]||(da=!1);this.isLoaded()||da?this._notify(X,U):this.requestors.push({ids:X,
callback:U})};R.prototype._notify=function(X,U){for(var da={},va=0;va<X.length;va+=1){var Ca=X[va];this.images[Ca]||this.fire(new a.Event("styleimagemissing",{id:Ca}));var Qa=this.images[Ca];Qa?da[Ca]={data:Qa.data.clone(),pixelRatio:Qa.pixelRatio,sdf:Qa.sdf,version:Qa.version,stretchX:Qa.stretchX,stretchY:Qa.stretchY,content:Qa.content,hasRenderCallback:!(!Qa.userImage||!Qa.userImage.render)}:a.warnOnce('Image "'+Ca+'" could not be loaded. Please make sure you have added the image with map.addImage() or a "sprite" property in your style. You can provide missing images by listening for the "styleimagemissing" map event.')}U(null,
da)};R.prototype.getPixelSize=function(){var X=this.atlasImage;return{width:X.width,height:X.height}};R.prototype.getPattern=function(X){var U=this.patterns[X],da=this.getImage(X);if(!da)return null;if(U&&U.position.version===da.version)return U.position;U?U.position.version=da.version:(U={w:da.data.width+2,h:da.data.height+2,x:0,y:0},da=new a.ImagePosition(U,da),this.patterns[X]={bin:U,position:da});this._updatePatternAtlas();return this.patterns[X].position};R.prototype.bind=function(X){var U=X.gl;
this.atlasTexture?this.dirty&&(this.atlasTexture.update(this.atlasImage),this.dirty=!1):this.atlasTexture=new a.Texture(X,this.atlasImage,U.RGBA);this.atlasTexture.bind(U.LINEAR,U.CLAMP_TO_EDGE)};R.prototype._updatePatternAtlas=function(){var X=[];for(U in this.patterns)X.push(this.patterns[U].bin);var U=a.potpack(X);X=this.atlasImage;X.resize({width:U.w||1,height:U.h||1});for(var da in this.patterns){var va=this.patterns[da].bin;U=va.x+1;va=va.y+1;var Ca=this.images[da].data,Qa=Ca.width,lb=Ca.height;
a.RGBAImage.copy(Ca,X,{x:0,y:0},{x:U,y:va},{width:Qa,height:lb});a.RGBAImage.copy(Ca,X,{x:0,y:lb-1},{x:U,y:va-1},{width:Qa,height:1});a.RGBAImage.copy(Ca,X,{x:0,y:0},{x:U,y:va+lb},{width:Qa,height:1});a.RGBAImage.copy(Ca,X,{x:Qa-1,y:0},{x:U-1,y:va},{width:1,height:lb});a.RGBAImage.copy(Ca,X,{x:0,y:0},{x:U+Qa,y:va},{width:1,height:lb})}this.dirty=!0};R.prototype.beginFrame=function(){this.callbackDispatchedThisFrame={}};R.prototype.dispatchRenderCallbacks=function(X){for(var U=0;U<X.length;U+=1){var da=
X[U];if(!this.callbackDispatchedThisFrame[da]){this.callbackDispatchedThisFrame[da]=!0;var va=this.images[da];var Ca=va;var Qa=Ca.userImage;Qa&&Qa.render&&Qa.render()?(Ca.data.replace(new Uint8Array(Qa.data.buffer)),Ca=!0):Ca=!1;Ca&&this.updateImage(da,va)}}};return R}(a.Evented);r.prototype.draw=function(kb){this.ctx.clearRect(0,0,this.size,this.size);this.ctx.fillText(kb,this.buffer,this.middle);kb=this.ctx.getImageData(0,0,this.size,this.size);for(var R=new Uint8ClampedArray(this.size*this.size),
X=0;X<this.size*this.size;X++){var U=kb.data[4*X+3]/255;this.gridOuter[X]=1===U?0:0===U?1E20:Math.pow(Math.max(0,.5-U),2);this.gridInner[X]=1===U?1E20:0===U?0:Math.pow(Math.max(0,U-.5),2)}l(this.gridOuter,this.size,this.size,this.f,this.d,this.v,this.z);l(this.gridInner,this.size,this.size,this.f,this.d,this.v,this.z);for(X=0;X<this.size*this.size;X++)R[X]=Math.max(0,Math.min(255,Math.round(255-255*((this.gridOuter[X]-this.gridInner[X])/this.radius+this.cutoff))));return R};r.default=r;var Ia=function(kb,
R){this.requestManager=kb;this.localIdeographFontFamily=R;this.entries={}};Ia.prototype.setURL=function(kb){this.url=kb};Ia.prototype.getGlyphs=function(kb,R){var X=this,U=[],da;for(da in kb)for(var va=0,Ca=kb[da];va<Ca.length;va+=1)U.push({stack:da,id:Ca[va]});a.asyncAll(U,function(Qa,lb){var Lb=Qa.stack,Rb=Qa.id,dc=X.entries[Lb];dc||(dc=X.entries[Lb]={glyphs:{},requests:{},ranges:{}});Qa=dc.glyphs[Rb];if(void 0!==Qa)lb(null,{stack:Lb,id:Rb,glyph:Qa});else if(Qa=X._tinySDF(dc,Lb,Rb))dc.glyphs[Rb]=
Qa,lb(null,{stack:Lb,id:Rb,glyph:Qa});else{var Ic=Math.floor(Rb/256);if(65535<256*Ic)lb(Error("glyphs \x3e 65535 not supported"));else if(dc.ranges[Ic])lb(null,{stack:Lb,id:Rb,glyph:Qa});else{var Gc=dc.requests[Ic];Gc||(Gc=dc.requests[Ic]=[],Ia.loadGlyphRange(Lb,Ic,X.url,X.requestManager,function(Xc,$c){if($c){for(var Wc in $c)X._doesCharSupportLocalGlyph(+Wc)||(dc.glyphs[+Wc]=$c[+Wc]);dc.ranges[Ic]=!0}Wc=0;for(var wd=Gc;Wc<wd.length;Wc+=1)(0,wd[Wc])(Xc,$c);delete dc.requests[Ic]}));Gc.push(function(Xc,
$c){Xc?lb(Xc):$c&&lb(null,{stack:Lb,id:Rb,glyph:$c[Rb]||null})})}}},function(Qa,lb){if(Qa)R(Qa);else if(lb){Qa={};for(var Lb=0;Lb<lb.length;Lb+=1){var Rb=lb[Lb],dc=Rb.stack,Ic=Rb.id;Rb=Rb.glyph;(Qa[dc]||(Qa[dc]={}))[Ic]=Rb&&{id:Rb.id,bitmap:Rb.bitmap.clone(),metrics:Rb.metrics}}R(null,Qa)}})};Ia.prototype._doesCharSupportLocalGlyph=function(kb){return!!this.localIdeographFontFamily&&(a.isChar["CJK Unified Ideographs"](kb)||a.isChar["Hangul Syllables"](kb)||a.isChar.Hiragana(kb)||a.isChar.Katakana(kb))};
Ia.prototype._tinySDF=function(kb,R,X){var U=this.localIdeographFontFamily;if(U&&this._doesCharSupportLocalGlyph(X)){var da=kb.tinySDF;da||(da="400",/bold/i.test(R)?da="900":/medium/i.test(R)?da="500":/light/i.test(R)&&(da="200"),da=kb.tinySDF=new Ia.TinySDF(24,3,8,.25,U,da));return{id:X,bitmap:new a.AlphaImage({width:30,height:30},da.draw(String.fromCharCode(X))),metrics:{width:24,height:24,left:0,top:-8,advance:24}}}};Ia.loadGlyphRange=function(kb,R,X,U,da){R*=256;var va=R+255;kb=U.transformRequest(U.normalizeGlyphsURL(X).replace("{fontstack}",
kb).replace("{range}",R+"-"+va),a.ResourceType.Glyphs);a.getArrayBuffer(kb,function(Ca,Qa){if(Ca)da(Ca);else if(Qa){Ca={};var lb=0;for(Qa=a.parseGlyphPBF(Qa);lb<Qa.length;lb+=1){var Lb=Qa[lb];Ca[Lb.id]=Lb}da(null,Ca)}})};Ia.TinySDF=r;var Na=function(){this.specification=a.styleSpec.light.position};Na.prototype.possiblyEvaluate=function(kb,R){return a.sphericalToCartesian(kb.expression.evaluate(R))};Na.prototype.interpolate=function(kb,R,X){return{x:a.number(kb.x,R.x,X),y:a.number(kb.y,R.y,X),z:a.number(kb.z,
R.z,X)}};var ib=new a.Properties({anchor:new a.DataConstantProperty(a.styleSpec.light.anchor),position:new Na,color:new a.DataConstantProperty(a.styleSpec.light.color),intensity:new a.DataConstantProperty(a.styleSpec.light.intensity)}),Gb=function(kb){function R(X){kb.call(this);this._transitionable=new a.Transitionable(ib);this.setLight(X);this._transitioning=this._transitionable.untransitioned()}kb&&(R.__proto__=kb);R.prototype=Object.create(kb&&kb.prototype);R.prototype.constructor=R;R.prototype.getLight=
function(){return this._transitionable.serialize()};R.prototype.setLight=function(X,U){void 0===U&&(U={});if(!this._validate(a.validateLight,X,U))for(var da in X)U=X[da],a.endsWith(da,"-transition")?this._transitionable.setTransition(da.slice(0,-11),U):this._transitionable.setValue(da,U)};R.prototype.updateTransitions=function(X){this._transitioning=this._transitionable.transitioned(X,this._transitioning)};R.prototype.hasTransition=function(){return this._transitioning.hasTransition()};R.prototype.recalculate=
function(X){this.properties=this._transitioning.possiblyEvaluate(X)};R.prototype._validate=function(X,U,da){return da&&!1===da.validate?!1:a.emitValidationErrors(this,X.call(a.validateStyle,a.extend({value:U,style:{glyphs:!0,sprite:!0},styleSpec:a.styleSpec})))};return R}(a.Evented),Hb=function(kb,R){this.width=kb;this.height=R;this.nextRow=0;this.data=new Uint8Array(this.width*this.height);this.dashEntry={}};Hb.prototype.getDash=function(kb,R){var X=kb.join(",")+String(R);this.dashEntry[X]||(this.dashEntry[X]=
this.addDash(kb,R));return this.dashEntry[X]};Hb.prototype.getDashRanges=function(kb,R,X){R=[];var U=1===kb.length%2?-kb[kb.length-1]*X:0,da=kb[0]*X,va=!0;R.push({left:U,right:da,isDash:va,zeroLength:0===kb[0]});for(var Ca=kb[0],Qa=1;Qa<kb.length;Qa++){va=!va;var lb=kb[Qa];U=Ca*X;Ca+=lb;da=Ca*X;R.push({left:U,right:da,isDash:va,zeroLength:0===lb})}return R};Hb.prototype.addRoundDash=function(kb,R,X){R/=2;for(var U=-X;U<=X;U++)for(var da=this.width*(this.nextRow+X+U),va=0,Ca=kb[va],Qa=0;Qa<this.width;Qa++){1<
Qa/Ca.right&&(Ca=kb[++va]);var lb=Math.min(Math.abs(Qa-Ca.left),Math.abs(Qa-Ca.right)),Lb=U/X*(R+1);Ca.isDash?(Lb=R-Math.abs(Lb),lb=Math.sqrt(lb*lb+Lb*Lb)):lb=R-Math.sqrt(lb*lb+Lb*Lb);this.data[da+Qa]=Math.max(0,Math.min(255,lb+128))}};Hb.prototype.addRegularDash=function(kb){for(var R=kb.length-1;0<=R;--R){var X=kb[R],U=kb[R+1];X.zeroLength?kb.splice(R,1):U&&U.isDash===X.isDash&&(U.left=X.left,kb.splice(R,1))}R=kb[0];X=kb[kb.length-1];R.isDash===X.isDash&&(R.left=X.left-this.width,X.right=R.right+
this.width);R=this.width*this.nextRow;X=0;U=kb[X];for(var da=0;da<this.width;da++){1<da/U.right&&(U=kb[++X]);var va=Math.min(Math.abs(da-U.left),Math.abs(da-U.right));this.data[R+da]=Math.max(0,Math.min(255,(U.isDash?va:-va)+128))}};Hb.prototype.addDash=function(kb,R){var X=R?7:0,U=2*X+1;if(this.nextRow+U>this.height)return a.warnOnce("LineAtlas out of space"),null;for(var da=0,va=0;va<kb.length;va++)da+=kb[va];0!==da&&(va=this.width/da,kb=this.getDashRanges(kb,this.width,va),R?this.addRoundDash(kb,
va,X):this.addRegularDash(kb));R={y:(this.nextRow+X+.5)/this.height,height:2*X/this.height,width:da};this.nextRow+=U;this.dirty=!0;return R};Hb.prototype.bind=function(kb){kb=kb.gl;this.texture?(kb.bindTexture(kb.TEXTURE_2D,this.texture),this.dirty&&(this.dirty=!1,kb.texSubImage2D(kb.TEXTURE_2D,0,0,0,this.width,this.height,kb.ALPHA,kb.UNSIGNED_BYTE,this.data))):(this.texture=kb.createTexture(),kb.bindTexture(kb.TEXTURE_2D,this.texture),kb.texParameteri(kb.TEXTURE_2D,kb.TEXTURE_WRAP_S,kb.REPEAT),kb.texParameteri(kb.TEXTURE_2D,
kb.TEXTURE_WRAP_T,kb.REPEAT),kb.texParameteri(kb.TEXTURE_2D,kb.TEXTURE_MIN_FILTER,kb.LINEAR),kb.texParameteri(kb.TEXTURE_2D,kb.TEXTURE_MAG_FILTER,kb.LINEAR),kb.texImage2D(kb.TEXTURE_2D,0,kb.ALPHA,this.width,this.height,0,kb.ALPHA,kb.UNSIGNED_BYTE,this.data))};var $b=function U(R,X){this.workerPool=R;this.actors=[];this.currentActor=0;this.id=a.uniqueId();R=this.workerPool.acquire(this.id);for(var da=0;da<R.length;da++){var va=new U.Actor(R[da],X,this.id);va.name="Worker "+da;this.actors.push(va)}};
$b.prototype.broadcast=function(R,X,U){a.asyncAll(this.actors,function(da,va){da.send(R,X,va)},U||function(){})};$b.prototype.getActor=function(){this.currentActor=(this.currentActor+1)%this.actors.length;return this.actors[this.currentActor]};$b.prototype.remove=function(){this.actors.forEach(function(R){R.remove()});this.actors=[];this.workerPool.release(this.id)};$b.Actor=a.Actor;var uc=function(R,X,U){this.bounds=a.LngLatBounds.convert(this.validateBounds(R));this.minzoom=X||0;this.maxzoom=U||
24};uc.prototype.validateBounds=function(R){return Array.isArray(R)&&4===R.length?[Math.max(-180,R[0]),Math.max(-90,R[1]),Math.min(180,R[2]),Math.min(90,R[3])]:[-180,-90,180,90]};uc.prototype.contains=function(R){var X=Math.pow(2,R.z),U=Math.floor(a.mercatorXfromLng(this.bounds.getWest())*X),da=Math.floor(a.mercatorYfromLat(this.bounds.getNorth())*X),va=Math.ceil(a.mercatorXfromLng(this.bounds.getEast())*X);X=Math.ceil(a.mercatorYfromLat(this.bounds.getSouth())*X);return R.x>=U&&R.x<va&&R.y>=da&&
R.y<X};var fd=function(R){function X(U,da,va,Ca){R.call(this);this.id=U;this.dispatcher=va;this.type="vector";this.minzoom=0;this.maxzoom=22;this.scheme="xyz";this.tileSize=512;this.isTileClipped=this.reparseOverscaled=!0;this._loaded=!1;a.extend(this,a.pick(da,["url","scheme","tileSize","promoteId"]));this._options=a.extend({type:"vector"},da);this._collectResourceTiming=da.collectResourceTiming;if(512!==this.tileSize)throw Error("vector tile sources must have a tileSize of 512");this.setEventedParent(Ca)}
R&&(X.__proto__=R);X.prototype=Object.create(R&&R.prototype);X.prototype.constructor=X;X.prototype.load=function(){var U=this;this._loaded=!1;this.fire(new a.Event("dataloading",{dataType:"source"}));this._tileJSONRequest=d(this._options,this.map._requestManager,function(da,va){U._tileJSONRequest=null;U._loaded=!0;da?U.fire(new a.ErrorEvent(da)):va&&(a.extend(U,va),va.bounds&&(U.tileBounds=new uc(va.bounds,U.minzoom,U.maxzoom)),a.postTurnstileEvent(va.tiles,U.map._requestManager._customAccessToken),
a.postMapLoadEvent(va.tiles,U.map._getMapId(),U.map._requestManager._skuToken,U.map._requestManager._customAccessToken),U.fire(new a.Event("data",{dataType:"source",sourceDataType:"metadata"})),U.fire(new a.Event("data",{dataType:"source",sourceDataType:"content"})))})};X.prototype.loaded=function(){return this._loaded};X.prototype.hasTile=function(U){return!this.tileBounds||this.tileBounds.contains(U.canonical)};X.prototype.onAdd=function(U){this.map=U;this.load()};X.prototype.onRemove=function(){this._tileJSONRequest&&
(this._tileJSONRequest.cancel(),this._tileJSONRequest=null)};X.prototype.serialize=function(){return a.extend({},this._options)};X.prototype.loadTile=function(U,da){function va(Qa,lb){delete U.request;if(U.aborted)return da(null);if(Qa&&404!==Qa.status)return da(Qa);lb&&lb.resourceTiming&&(U.resourceTiming=lb.resourceTiming);this.map._refreshExpiredTiles&&lb&&U.setExpiryData(lb);U.loadVectorData(lb,this.map.painter);a.cacheEntryPossiblyAdded(this.dispatcher);da(null);U.reloadCallback&&(this.loadTile(U,
U.reloadCallback),U.reloadCallback=null)}var Ca=this.map._requestManager.normalizeTileURL(U.tileID.canonical.url(this.tiles,this.scheme));Ca={request:this.map._requestManager.transformRequest(Ca,a.ResourceType.Tile),uid:U.uid,tileID:U.tileID,zoom:U.tileID.overscaledZ,tileSize:this.tileSize*U.tileID.overscaleFactor(),type:this.type,source:this.id,pixelRatio:a.browser.devicePixelRatio,showCollisionBoxes:this.map.showCollisionBoxes,promoteId:this.promoteId};Ca.request.collectResourceTiming=this._collectResourceTiming;
U.actor&&"expired"!==U.state?"loading"===U.state?U.reloadCallback=da:U.request=U.actor.send("reloadTile",Ca,va.bind(this)):(U.actor=this.dispatcher.getActor(),U.request=U.actor.send("loadTile",Ca,va.bind(this)))};X.prototype.abortTile=function(U){U.request&&(U.request.cancel(),delete U.request);U.actor&&U.actor.send("abortTile",{uid:U.uid,type:this.type,source:this.id},void 0)};X.prototype.unloadTile=function(U){U.unloadVectorData();U.actor&&U.actor.send("removeTile",{uid:U.uid,type:this.type,source:this.id},
void 0)};X.prototype.hasTransition=function(){return!1};return X}(a.Evented),fb=function(R){function X(U,da,va,Ca){R.call(this);this.id=U;this.dispatcher=va;this.setEventedParent(Ca);this.type="raster";this.minzoom=0;this.maxzoom=22;this.roundZoom=!0;this.scheme="xyz";this.tileSize=512;this._loaded=!1;this._options=a.extend({type:"raster"},da);a.extend(this,a.pick(da,["url","scheme","tileSize"]))}R&&(X.__proto__=R);X.prototype=Object.create(R&&R.prototype);X.prototype.constructor=X;X.prototype.load=
function(){var U=this;this._loaded=!1;this.fire(new a.Event("dataloading",{dataType:"source"}));this._tileJSONRequest=d(this._options,this.map._requestManager,function(da,va){U._tileJSONRequest=null;U._loaded=!0;da?U.fire(new a.ErrorEvent(da)):va&&(a.extend(U,va),va.bounds&&(U.tileBounds=new uc(va.bounds,U.minzoom,U.maxzoom)),a.postTurnstileEvent(va.tiles),a.postMapLoadEvent(va.tiles,U.map._getMapId(),U.map._requestManager._skuToken),U.fire(new a.Event("data",{dataType:"source",sourceDataType:"metadata"})),
U.fire(new a.Event("data",{dataType:"source",sourceDataType:"content"})))})};X.prototype.loaded=function(){return this._loaded};X.prototype.onAdd=function(U){this.map=U;this.load()};X.prototype.onRemove=function(){this._tileJSONRequest&&(this._tileJSONRequest.cancel(),this._tileJSONRequest=null)};X.prototype.serialize=function(){return a.extend({},this._options)};X.prototype.hasTile=function(U){return!this.tileBounds||this.tileBounds.contains(U.canonical)};X.prototype.loadTile=function(U,da){var va=
this,Ca=this.map._requestManager.normalizeTileURL(U.tileID.canonical.url(this.tiles,this.scheme),this.tileSize);U.request=a.getImage(this.map._requestManager.transformRequest(Ca,a.ResourceType.Tile),function(Qa,lb){delete U.request;if(U.aborted)U.state="unloaded",da(null);else if(Qa)U.state="errored",da(Qa);else if(lb){va.map._refreshExpiredTiles&&U.setExpiryData(lb);delete lb.cacheControl;delete lb.expires;Qa=va.map.painter.context;var Lb=Qa.gl;U.texture=va.map.painter.getTileTexture(lb.width);U.texture?
U.texture.update(lb,{useMipmap:!0}):(U.texture=new a.Texture(Qa,lb,Lb.RGBA,{useMipmap:!0}),U.texture.bind(Lb.LINEAR,Lb.CLAMP_TO_EDGE,Lb.LINEAR_MIPMAP_NEAREST),Qa.extTextureFilterAnisotropic&&Lb.texParameterf(Lb.TEXTURE_2D,Qa.extTextureFilterAnisotropic.TEXTURE_MAX_ANISOTROPY_EXT,Qa.extTextureFilterAnisotropicMax));U.state="loaded";a.cacheEntryPossiblyAdded(va.dispatcher);da(null)}})};X.prototype.abortTile=function(U,da){U.request&&(U.request.cancel(),delete U.request);da()};X.prototype.unloadTile=
function(U,da){U.texture&&this.map.painter.saveTileTexture(U.texture);da()};X.prototype.hasTransition=function(){return!1};return X}(a.Evented),Pb=function(R){function X(U,da,va,Ca){R.call(this,U,da,va,Ca);this.type="raster-dem";this.maxzoom=22;this._options=a.extend({type:"raster-dem"},da);this.encoding=da.encoding||"mapbox"}R&&(X.__proto__=R);X.prototype=Object.create(R&&R.prototype);X.prototype.constructor=X;X.prototype.serialize=function(){return{type:"raster-dem",url:this.url,tileSize:this.tileSize,
tiles:this.tiles,bounds:this.bounds,encoding:this.encoding}};X.prototype.loadTile=function(U,da){function va(Qa,lb){Qa&&(U.state="errored",da(Qa));lb&&(U.dem=lb,U.needsHillshadePrepare=!0,U.state="loaded",da(null))}var Ca=this.map._requestManager.normalizeTileURL(U.tileID.canonical.url(this.tiles,this.scheme),this.tileSize);U.request=a.getImage(this.map._requestManager.transformRequest(Ca,a.ResourceType.Tile),function(Qa,lb){delete U.request;U.aborted?(U.state="unloaded",da(null)):Qa?(U.state="errored",
da(Qa)):lb&&(this.map._refreshExpiredTiles&&U.setExpiryData(lb),delete lb.cacheControl,delete lb.expires,Qa=a.window.ImageBitmap&&lb instanceof a.window.ImageBitmap&&a.offscreenCanvasSupported()?lb:a.browser.getImageData(lb,1),Qa={uid:U.uid,coord:U.tileID,source:this.id,rawImageData:Qa,encoding:this.encoding},U.actor&&"expired"!==U.state||(U.actor=this.dispatcher.getActor(),U.actor.send("loadDEMTile",Qa,va.bind(this))))}.bind(this));U.neighboringTiles=this._getNeighboringTiles(U.tileID)};X.prototype._getNeighboringTiles=
function(U){var da=U.canonical,va=Math.pow(2,da.z),Ca=(da.x-1+va)%va,Qa=0===da.x?U.wrap-1:U.wrap,lb=(da.x+1+va)%va,Lb=da.x+1===va?U.wrap+1:U.wrap,Rb={};Rb[(new a.OverscaledTileID(U.overscaledZ,Qa,da.z,Ca,da.y)).key]={backfilled:!1};Rb[(new a.OverscaledTileID(U.overscaledZ,Lb,da.z,lb,da.y)).key]={backfilled:!1};0<da.y&&(Rb[(new a.OverscaledTileID(U.overscaledZ,Qa,da.z,Ca,da.y-1)).key]={backfilled:!1},Rb[(new a.OverscaledTileID(U.overscaledZ,U.wrap,da.z,da.x,da.y-1)).key]={backfilled:!1},Rb[(new a.OverscaledTileID(U.overscaledZ,
Lb,da.z,lb,da.y-1)).key]={backfilled:!1});da.y+1<va&&(Rb[(new a.OverscaledTileID(U.overscaledZ,Qa,da.z,Ca,da.y+1)).key]={backfilled:!1},Rb[(new a.OverscaledTileID(U.overscaledZ,U.wrap,da.z,da.x,da.y+1)).key]={backfilled:!1},Rb[(new a.OverscaledTileID(U.overscaledZ,Lb,da.z,lb,da.y+1)).key]={backfilled:!1});return Rb};X.prototype.unloadTile=function(U){U.demTexture&&this.map.painter.saveTileTexture(U.demTexture);U.fbo&&(U.fbo.destroy(),delete U.fbo);U.dem&&delete U.dem;delete U.neighboringTiles;U.state=
"unloaded";U.actor&&U.actor.send("removeDEMTile",{uid:U.uid,source:this.id})};return X}(fb),fc=function(R){function X(U,da,va,Ca){R.call(this);this.id=U;this.type="geojson";this.minzoom=0;this.maxzoom=18;this.tileSize=512;this.reparseOverscaled=this.isTileClipped=!0;this._loaded=this._removed=!1;this.actor=va.getActor();this.setEventedParent(Ca);this._data=da.data;this._options=a.extend({},da);this._collectResourceTiming=da.collectResourceTiming;this._resourceTiming=[];void 0!==da.maxzoom&&(this.maxzoom=
da.maxzoom);da.type&&(this.type=da.type);da.attribution&&(this.attribution=da.attribution);this.promoteId=da.promoteId;U=a.EXTENT/this.tileSize;this.workerOptions=a.extend({source:this.id,cluster:da.cluster||!1,geojsonVtOptions:{buffer:(void 0!==da.buffer?da.buffer:128)*U,tolerance:(void 0!==da.tolerance?da.tolerance:.375)*U,extent:a.EXTENT,maxZoom:this.maxzoom,lineMetrics:da.lineMetrics||!1,generateId:da.generateId||!1},superclusterOptions:{maxZoom:void 0!==da.clusterMaxZoom?Math.min(da.clusterMaxZoom,
this.maxzoom-1):this.maxzoom-1,extent:a.EXTENT,radius:(da.clusterRadius||50)*U,log:!1,generateId:da.generateId||!1},clusterProperties:da.clusterProperties},da.workerOptions)}R&&(X.__proto__=R);X.prototype=Object.create(R&&R.prototype);X.prototype.constructor=X;X.prototype.load=function(){var U=this;this.fire(new a.Event("dataloading",{dataType:"source"}));this._updateWorkerData(function(da){da?U.fire(new a.ErrorEvent(da)):(da={dataType:"source",sourceDataType:"metadata"},U._collectResourceTiming&&
U._resourceTiming&&0<U._resourceTiming.length&&(da.resourceTiming=U._resourceTiming,U._resourceTiming=[]),U.fire(new a.Event("data",da)))})};X.prototype.onAdd=function(U){this.map=U;this.load()};X.prototype.setData=function(U){var da=this;this._data=U;this.fire(new a.Event("dataloading",{dataType:"source"}));this._updateWorkerData(function(va){va?da.fire(new a.ErrorEvent(va)):(va={dataType:"source",sourceDataType:"content"},da._collectResourceTiming&&da._resourceTiming&&0<da._resourceTiming.length&&
(va.resourceTiming=da._resourceTiming,da._resourceTiming=[]),da.fire(new a.Event("data",va)))});return this};X.prototype.getClusterExpansionZoom=function(U,da){this.actor.send("geojson.getClusterExpansionZoom",{clusterId:U,source:this.id},da);return this};X.prototype.getClusterChildren=function(U,da){this.actor.send("geojson.getClusterChildren",{clusterId:U,source:this.id},da);return this};X.prototype.getClusterLeaves=function(U,da,va,Ca){this.actor.send("geojson.getClusterLeaves",{source:this.id,
clusterId:U,limit:da,offset:va},Ca);return this};X.prototype._updateWorkerData=function(U){var da=this;this._loaded=!1;var va=a.extend({},this.workerOptions),Ca=this._data;"string"===typeof Ca?(va.request=this.map._requestManager.transformRequest(a.browser.resolveURL(Ca),a.ResourceType.Source),va.request.collectResourceTiming=this._collectResourceTiming):va.data=JSON.stringify(Ca);this.actor.send(this.type+".loadData",va,function(Qa,lb){da._removed||lb&&lb.abandoned||(da._loaded=!0,lb&&lb.resourceTiming&&
lb.resourceTiming[da.id]&&(da._resourceTiming=lb.resourceTiming[da.id].slice(0)),da.actor.send(da.type+".coalesce",{source:va.source},null),U(Qa))})};X.prototype.loaded=function(){return this._loaded};X.prototype.loadTile=function(U,da){var va=this,Ca=U.actor?"reloadTile":"loadTile";U.actor=this.actor;U.request=this.actor.send(Ca,{type:this.type,uid:U.uid,tileID:U.tileID,zoom:U.tileID.overscaledZ,maxZoom:this.maxzoom,tileSize:this.tileSize,source:this.id,pixelRatio:a.browser.devicePixelRatio,showCollisionBoxes:this.map.showCollisionBoxes,
promoteId:this.promoteId},function(Qa,lb){delete U.request;U.unloadVectorData();if(U.aborted)return da(null);if(Qa)return da(Qa);U.loadVectorData(lb,va.map.painter,"reloadTile"===Ca);return da(null)})};X.prototype.abortTile=function(U){U.request&&(U.request.cancel(),delete U.request);U.aborted=!0};X.prototype.unloadTile=function(U){U.unloadVectorData();this.actor.send("removeTile",{uid:U.uid,type:this.type,source:this.id})};X.prototype.onRemove=function(){this._removed=!0;this.actor.send("removeSource",
{type:this.type,source:this.id})};X.prototype.serialize=function(){return a.extend({},this._options,{type:this.type,data:this._data})};X.prototype.hasTransition=function(){return!1};return X}(a.Evented),Fc=a.createLayout([{name:"a_pos",type:"Int16",components:2},{name:"a_texture_pos",type:"Int16",components:2}]),Pc=function(R){function X(U,da,va,Ca){R.call(this);this.id=U;this.dispatcher=va;this.coordinates=da.coordinates;this.type="image";this.minzoom=0;this.maxzoom=22;this.tileSize=512;this.tiles=
{};this._loaded=!1;this.setEventedParent(Ca);this.options=da}R&&(X.__proto__=R);X.prototype=Object.create(R&&R.prototype);X.prototype.constructor=X;X.prototype.load=function(U,da){var va=this;this._loaded=!1;this.fire(new a.Event("dataloading",{dataType:"source"}));this.url=this.options.url;a.getImage(this.map._requestManager.transformRequest(this.url,a.ResourceType.Image),function(Ca,Qa){va._loaded=!0;Ca?va.fire(new a.ErrorEvent(Ca)):Qa&&(va.image=Qa,U&&(va.coordinates=U),da&&da(),va._finishLoading())})};
X.prototype.loaded=function(){return this._loaded};X.prototype.updateImage=function(U){var da=this;if(!this.image||!U.url)return this;this.options.url=U.url;this.load(U.coordinates,function(){da.texture=null});return this};X.prototype._finishLoading=function(){this.map&&(this.setCoordinates(this.coordinates),this.fire(new a.Event("data",{dataType:"source",sourceDataType:"metadata"})))};X.prototype.onAdd=function(U){this.map=U;this.load()};X.prototype.setCoordinates=function(U){var da=this;this.coordinates=
U;U=U.map(a.MercatorCoordinate.fromLngLat);this.tileID=e(U);this.minzoom=this.maxzoom=this.tileID.z;U=U.map(function(va){return da.tileID.getTilePoint(va)._round()});this._boundsArray=new a.StructArrayLayout4i8;this._boundsArray.emplaceBack(U[0].x,U[0].y,0,0);this._boundsArray.emplaceBack(U[1].x,U[1].y,a.EXTENT,0);this._boundsArray.emplaceBack(U[3].x,U[3].y,0,a.EXTENT);this._boundsArray.emplaceBack(U[2].x,U[2].y,a.EXTENT,a.EXTENT);this.boundsBuffer&&(this.boundsBuffer.destroy(),delete this.boundsBuffer);
this.fire(new a.Event("data",{dataType:"source",sourceDataType:"content"}));return this};X.prototype.prepare=function(){if(0!==Object.keys(this.tiles).length&&this.image){var U=this.map.painter.context,da=U.gl;this.boundsBuffer||(this.boundsBuffer=U.createVertexBuffer(this._boundsArray,Fc.members));this.boundsSegments||(this.boundsSegments=a.SegmentVector.simpleSegment(0,0,4,2));this.texture||(this.texture=new a.Texture(U,this.image,da.RGBA),this.texture.bind(da.LINEAR,da.CLAMP_TO_EDGE));for(var va in this.tiles)U=
this.tiles[va],"loaded"!==U.state&&(U.state="loaded",U.texture=this.texture)}};X.prototype.loadTile=function(U,da){this.tileID&&this.tileID.equals(U.tileID.canonical)?(this.tiles[String(U.tileID.wrap)]=U,U.buckets={}):U.state="errored";da(null)};X.prototype.serialize=function(){return{type:"image",url:this.options.url,coordinates:this.coordinates}};X.prototype.hasTransition=function(){return!1};return X}(a.Evented),Uc=function(R){function X(U,da,va,Ca){R.call(this,U,da,va,Ca);this.roundZoom=!0;this.type=
"video";this.options=da}R&&(X.__proto__=R);X.prototype=Object.create(R&&R.prototype);X.prototype.constructor=X;X.prototype.load=function(){var U=this;this._loaded=!1;var da=this.options;this.urls=[];var va=0;for(da=da.urls;va<da.length;va+=1)this.urls.push(this.map._requestManager.transformRequest(da[va],a.ResourceType.Source).url);a.getVideo(this.urls,function(Ca,Qa){U._loaded=!0;Ca?U.fire(new a.ErrorEvent(Ca)):Qa&&(U.video=Qa,U.video.loop=!0,U.video.addEventListener("playing",function(){U.map.triggerRepaint()}),
U.map&&U.video.play(),U._finishLoading())})};X.prototype.pause=function(){this.video&&this.video.pause()};X.prototype.play=function(){this.video&&this.video.play()};X.prototype.seek=function(U){if(this.video){var da=this.video.seekable;U<da.start(0)||U>da.end(0)?this.fire(new a.ErrorEvent(new a.ValidationError("sources."+this.id,null,"Playback for this video can be set only between the "+da.start(0)+" and "+da.end(0)+"-second mark."))):this.video.currentTime=U}};X.prototype.getVideo=function(){return this.video};
X.prototype.onAdd=function(U){this.map||(this.map=U,this.load(),this.video&&(this.video.play(),this.setCoordinates(this.coordinates)))};X.prototype.prepare=function(){if(!(0===Object.keys(this.tiles).length||2>this.video.readyState)){var U=this.map.painter.context,da=U.gl;this.boundsBuffer||(this.boundsBuffer=U.createVertexBuffer(this._boundsArray,Fc.members));this.boundsSegments||(this.boundsSegments=a.SegmentVector.simpleSegment(0,0,4,2));this.texture?this.video.paused||(this.texture.bind(da.LINEAR,
da.CLAMP_TO_EDGE),da.texSubImage2D(da.TEXTURE_2D,0,0,0,da.RGBA,da.UNSIGNED_BYTE,this.video)):(this.texture=new a.Texture(U,this.video,da.RGBA),this.texture.bind(da.LINEAR,da.CLAMP_TO_EDGE));for(var va in this.tiles)U=this.tiles[va],"loaded"!==U.state&&(U.state="loaded",U.texture=this.texture)}};X.prototype.serialize=function(){return{type:"video",urls:this.urls,coordinates:this.coordinates}};X.prototype.hasTransition=function(){return this.video&&!this.video.paused};return X}(Pc),rb=function(R){function X(U,
da,va,Ca){R.call(this,U,da,va,Ca);da.coordinates?Array.isArray(da.coordinates)&&4===da.coordinates.length&&!da.coordinates.some(function(Qa){return!Array.isArray(Qa)||2!==Qa.length||Qa.some(function(lb){return"number"!==typeof lb})})||this.fire(new a.ErrorEvent(new a.ValidationError("sources."+U,null,'"coordinates" property must be an array of 4 longitude/latitude array pairs'))):this.fire(new a.ErrorEvent(new a.ValidationError("sources."+U,null,'missing required property "coordinates"')));da.animate&&
"boolean"!==typeof da.animate&&this.fire(new a.ErrorEvent(new a.ValidationError("sources."+U,null,'optional "animate" property must be a boolean value')));da.canvas?"string"===typeof da.canvas||da.canvas instanceof a.window.HTMLCanvasElement||this.fire(new a.ErrorEvent(new a.ValidationError("sources."+U,null,'"canvas" must be either a string representing the ID of the canvas element from which to read, or an HTMLCanvasElement instance'))):this.fire(new a.ErrorEvent(new a.ValidationError("sources."+
U,null,'missing required property "canvas"')));this.options=da;this.animate=void 0!==da.animate?da.animate:!0}R&&(X.__proto__=R);X.prototype=Object.create(R&&R.prototype);X.prototype.constructor=X;X.prototype.load=function(){this._loaded=!0;this.canvas||(this.canvas=this.options.canvas instanceof a.window.HTMLCanvasElement?this.options.canvas:a.window.document.getElementById(this.options.canvas));this.width=this.canvas.width;this.height=this.canvas.height;this._hasInvalidDimensions()?this.fire(new a.ErrorEvent(Error("Canvas dimensions cannot be less than or equal to zero."))):
(this.play=function(){this._playing=!0;this.map.triggerRepaint()},this.pause=function(){this._playing&&(this.prepare(),this._playing=!1)},this._finishLoading())};X.prototype.getCanvas=function(){return this.canvas};X.prototype.onAdd=function(U){this.map=U;this.load();this.canvas&&this.animate&&this.play()};X.prototype.onRemove=function(){this.pause()};X.prototype.prepare=function(){var U=!1;this.canvas.width!==this.width&&(this.width=this.canvas.width,U=!0);this.canvas.height!==this.height&&(this.height=
this.canvas.height,U=!0);if(!this._hasInvalidDimensions()&&0!==Object.keys(this.tiles).length){var da=this.map.painter.context,va=da.gl;this.boundsBuffer||(this.boundsBuffer=da.createVertexBuffer(this._boundsArray,Fc.members));this.boundsSegments||(this.boundsSegments=a.SegmentVector.simpleSegment(0,0,4,2));this.texture?(U||this._playing)&&this.texture.update(this.canvas,{premultiply:!0}):this.texture=new a.Texture(da,this.canvas,va.RGBA,{premultiply:!0});for(var Ca in this.tiles)U=this.tiles[Ca],
"loaded"!==U.state&&(U.state="loaded",U.texture=this.texture)}};X.prototype.serialize=function(){return{type:"canvas",coordinates:this.coordinates}};X.prototype.hasTransition=function(){return this._playing};X.prototype._hasInvalidDimensions=function(){for(var U=0,da=[this.canvas.width,this.canvas.height];U<da.length;U+=1){var va=da[U];if(isNaN(va)||0>=va)return!0}return!1};return X}(Pc),Jb={vector:fd,raster:fb,"raster-dem":Pb,geojson:fc,video:Uc,image:Pc,canvas:rb},sc=function(R,X,U,da){X=new Jb[X.type](R,
X,U,da);if(X.id!==R)throw Error("Expected Source id to be "+R+" instead of "+X.id);a.bindAll(["load","abort","unload","serialize","prepare"],X);return X},nc=function(R,X){this.max=R;this.onRemove=X;this.reset()};nc.prototype.reset=function(){for(var R in this.data)for(var X=0,U=this.data[R];X<U.length;X+=1){var da=U[X];da.timeout&&clearTimeout(da.timeout);this.onRemove(da.value)}this.data={};this.order=[];return this};nc.prototype.add=function(R,X,U){var da=this,va=R.wrapped().key;void 0===this.data[va]&&
(this.data[va]=[]);var Ca={value:X,timeout:void 0};void 0!==U&&(Ca.timeout=setTimeout(function(){da.remove(R,Ca)},U));this.data[va].push(Ca);this.order.push(va);if(this.order.length>this.max&&(X=this._getAndRemoveByKey(this.order[0])))this.onRemove(X);return this};nc.prototype.has=function(R){return R.wrapped().key in this.data};nc.prototype.getAndRemove=function(R){return this.has(R)?this._getAndRemoveByKey(R.wrapped().key):null};nc.prototype._getAndRemoveByKey=function(R){var X=this.data[R].shift();
X.timeout&&clearTimeout(X.timeout);0===this.data[R].length&&delete this.data[R];this.order.splice(this.order.indexOf(R),1);return X.value};nc.prototype.getByKey=function(R){return(R=this.data[R])?R[0].value:null};nc.prototype.get=function(R){return this.has(R)?this.data[R.wrapped().key][0].value:null};nc.prototype.remove=function(R,X){if(!this.has(R))return this;R=R.wrapped().key;X=void 0===X?0:this.data[R].indexOf(X);var U=this.data[R][X];this.data[R].splice(X,1);U.timeout&&clearTimeout(U.timeout);
0===this.data[R].length&&delete this.data[R];this.onRemove(U.value);this.order.splice(this.order.indexOf(R),1);return this};nc.prototype.setMaxSize=function(R){for(this.max=R;this.order.length>this.max;)if(R=this._getAndRemoveByKey(this.order[0]))this.onRemove(R);return this};nc.prototype.filter=function(R){var X=[];for(Ca in this.data)for(var U=0,da=this.data[Ca];U<da.length;U+=1){var va=da[U];R(va.value)||X.push(va)}for(R=0;R<X.length;R+=1){var Ca=X[R];this.remove(Ca.value.tileID,Ca)}};var vc=function(R,
X,U){this.context=R;var da=R.gl;this.buffer=da.createBuffer();this.dynamicDraw=!!U;this.context.unbindVAO();R.bindElementBuffer.set(this.buffer);da.bufferData(da.ELEMENT_ARRAY_BUFFER,X.arrayBuffer,this.dynamicDraw?da.DYNAMIC_DRAW:da.STATIC_DRAW);this.dynamicDraw||delete X.arrayBuffer};vc.prototype.bind=function(){this.context.bindElementBuffer.set(this.buffer)};vc.prototype.updateData=function(R){var X=this.context.gl;this.context.unbindVAO();this.bind();X.bufferSubData(X.ELEMENT_ARRAY_BUFFER,0,R.arrayBuffer)};
vc.prototype.destroy=function(){var R=this.context.gl;this.buffer&&(R.deleteBuffer(this.buffer),delete this.buffer)};var Vb={Int8:"BYTE",Uint8:"UNSIGNED_BYTE",Int16:"SHORT",Uint16:"UNSIGNED_SHORT",Int32:"INT",Uint32:"UNSIGNED_INT",Float32:"FLOAT"},Wb=function(R,X,U,da){this.length=X.length;this.attributes=U;this.itemSize=X.bytesPerElement;this.dynamicDraw=da;this.context=R;U=R.gl;this.buffer=U.createBuffer();R.bindVertexBuffer.set(this.buffer);U.bufferData(U.ARRAY_BUFFER,X.arrayBuffer,this.dynamicDraw?
U.DYNAMIC_DRAW:U.STATIC_DRAW);this.dynamicDraw||delete X.arrayBuffer};Wb.prototype.bind=function(){this.context.bindVertexBuffer.set(this.buffer)};Wb.prototype.updateData=function(R){var X=this.context.gl;this.bind();X.bufferSubData(X.ARRAY_BUFFER,0,R.arrayBuffer)};Wb.prototype.enableAttributes=function(R,X){for(var U=0;U<this.attributes.length;U++){var da=X.attributes[this.attributes[U].name];void 0!==da&&R.enableVertexAttribArray(da)}};Wb.prototype.setVertexAttribPointers=function(R,X,U){for(var da=
0;da<this.attributes.length;da++){var va=this.attributes[da],Ca=X.attributes[va.name];void 0!==Ca&&R.vertexAttribPointer(Ca,va.components,R[Vb[va.type]],!1,this.itemSize,va.offset+this.itemSize*(U||0))}};Wb.prototype.destroy=function(){var R=this.context.gl;this.buffer&&(R.deleteBuffer(this.buffer),delete this.buffer)};var yb=function(R){this.gl=R.gl;this.current=this.default=this.getDefault();this.dirty=!1};yb.prototype.get=function(){return this.current};yb.prototype.set=function(R){};yb.prototype.getDefault=
function(){return this.default};yb.prototype.setDefault=function(){this.set(this.default)};var ac=function(R){function X(){R.apply(this,arguments)}R&&(X.__proto__=R);X.prototype=Object.create(R&&R.prototype);X.prototype.constructor=X;X.prototype.getDefault=function(){return a.Color.transparent};X.prototype.set=function(U){var da=this.current;if(U.r!==da.r||U.g!==da.g||U.b!==da.b||U.a!==da.a||this.dirty)this.gl.clearColor(U.r,U.g,U.b,U.a),this.current=U,this.dirty=!1};return X}(yb),Ub=function(R){function X(){R.apply(this,
arguments)}R&&(X.__proto__=R);X.prototype=Object.create(R&&R.prototype);X.prototype.constructor=X;X.prototype.getDefault=function(){return 1};X.prototype.set=function(U){if(U!==this.current||this.dirty)this.gl.clearDepth(U),this.current=U,this.dirty=!1};return X}(yb),lc=function(R){function X(){R.apply(this,arguments)}R&&(X.__proto__=R);X.prototype=Object.create(R&&R.prototype);X.prototype.constructor=X;X.prototype.getDefault=function(){return 0};X.prototype.set=function(U){if(U!==this.current||this.dirty)this.gl.clearStencil(U),
this.current=U,this.dirty=!1};return X}(yb),tc=function(R){function X(){R.apply(this,arguments)}R&&(X.__proto__=R);X.prototype=Object.create(R&&R.prototype);X.prototype.constructor=X;X.prototype.getDefault=function(){return[!0,!0,!0,!0]};X.prototype.set=function(U){var da=this.current;if(U[0]!==da[0]||U[1]!==da[1]||U[2]!==da[2]||U[3]!==da[3]||this.dirty)this.gl.colorMask(U[0],U[1],U[2],U[3]),this.current=U,this.dirty=!1};return X}(yb),Rc=function(R){function X(){R.apply(this,arguments)}R&&(X.__proto__=
R);X.prototype=Object.create(R&&R.prototype);X.prototype.constructor=X;X.prototype.getDefault=function(){return!0};X.prototype.set=function(U){if(U!==this.current||this.dirty)this.gl.depthMask(U),this.current=U,this.dirty=!1};return X}(yb),kd=function(R){function X(){R.apply(this,arguments)}R&&(X.__proto__=R);X.prototype=Object.create(R&&R.prototype);X.prototype.constructor=X;X.prototype.getDefault=function(){return 255};X.prototype.set=function(U){if(U!==this.current||this.dirty)this.gl.stencilMask(U),
this.current=U,this.dirty=!1};return X}(yb),Cd=function(R){function X(){R.apply(this,arguments)}R&&(X.__proto__=R);X.prototype=Object.create(R&&R.prototype);X.prototype.constructor=X;X.prototype.getDefault=function(){return{func:this.gl.ALWAYS,ref:0,mask:255}};X.prototype.set=function(U){var da=this.current;if(U.func!==da.func||U.ref!==da.ref||U.mask!==da.mask||this.dirty)this.gl.stencilFunc(U.func,U.ref,U.mask),this.current=U,this.dirty=!1};return X}(yb),Gd=function(R){function X(){R.apply(this,
arguments)}R&&(X.__proto__=R);X.prototype=Object.create(R&&R.prototype);X.prototype.constructor=X;X.prototype.getDefault=function(){var U=this.gl;return[U.KEEP,U.KEEP,U.KEEP]};X.prototype.set=function(U){var da=this.current;if(U[0]!==da[0]||U[1]!==da[1]||U[2]!==da[2]||this.dirty)this.gl.stencilOp(U[0],U[1],U[2]),this.current=U,this.dirty=!1};return X}(yb),Ad=function(R){function X(){R.apply(this,arguments)}R&&(X.__proto__=R);X.prototype=Object.create(R&&R.prototype);X.prototype.constructor=X;X.prototype.getDefault=
function(){return!1};X.prototype.set=function(U){if(U!==this.current||this.dirty){var da=this.gl;U?da.enable(da.STENCIL_TEST):da.disable(da.STENCIL_TEST);this.current=U;this.dirty=!1}};return X}(yb),Nc=function(R){function X(){R.apply(this,arguments)}R&&(X.__proto__=R);X.prototype=Object.create(R&&R.prototype);X.prototype.constructor=X;X.prototype.getDefault=function(){return[0,1]};X.prototype.set=function(U){var da=this.current;if(U[0]!==da[0]||U[1]!==da[1]||this.dirty)this.gl.depthRange(U[0],U[1]),
this.current=U,this.dirty=!1};return X}(yb),cd=function(R){function X(){R.apply(this,arguments)}R&&(X.__proto__=R);X.prototype=Object.create(R&&R.prototype);X.prototype.constructor=X;X.prototype.getDefault=function(){return!1};X.prototype.set=function(U){if(U!==this.current||this.dirty){var da=this.gl;U?da.enable(da.DEPTH_TEST):da.disable(da.DEPTH_TEST);this.current=U;this.dirty=!1}};return X}(yb),Cc=function(R){function X(){R.apply(this,arguments)}R&&(X.__proto__=R);X.prototype=Object.create(R&&
R.prototype);X.prototype.constructor=X;X.prototype.getDefault=function(){return this.gl.LESS};X.prototype.set=function(U){if(U!==this.current||this.dirty)this.gl.depthFunc(U),this.current=U,this.dirty=!1};return X}(yb),dd=function(R){function X(){R.apply(this,arguments)}R&&(X.__proto__=R);X.prototype=Object.create(R&&R.prototype);X.prototype.constructor=X;X.prototype.getDefault=function(){return!1};X.prototype.set=function(U){if(U!==this.current||this.dirty){var da=this.gl;U?da.enable(da.BLEND):da.disable(da.BLEND);
this.current=U;this.dirty=!1}};return X}(yb),Vc=function(R){function X(){R.apply(this,arguments)}R&&(X.__proto__=R);X.prototype=Object.create(R&&R.prototype);X.prototype.constructor=X;X.prototype.getDefault=function(){var U=this.gl;return[U.ONE,U.ZERO]};X.prototype.set=function(U){var da=this.current;if(U[0]!==da[0]||U[1]!==da[1]||this.dirty)this.gl.blendFunc(U[0],U[1]),this.current=U,this.dirty=!1};return X}(yb),Sc=function(R){function X(){R.apply(this,arguments)}R&&(X.__proto__=R);X.prototype=Object.create(R&&
R.prototype);X.prototype.constructor=X;X.prototype.getDefault=function(){return a.Color.transparent};X.prototype.set=function(U){var da=this.current;if(U.r!==da.r||U.g!==da.g||U.b!==da.b||U.a!==da.a||this.dirty)this.gl.blendColor(U.r,U.g,U.b,U.a),this.current=U,this.dirty=!1};return X}(yb),id=function(R){function X(){R.apply(this,arguments)}R&&(X.__proto__=R);X.prototype=Object.create(R&&R.prototype);X.prototype.constructor=X;X.prototype.getDefault=function(){return this.gl.FUNC_ADD};X.prototype.set=
function(U){if(U!==this.current||this.dirty)this.gl.blendEquation(U),this.current=U,this.dirty=!1};return X}(yb),Md=function(R){function X(){R.apply(this,arguments)}R&&(X.__proto__=R);X.prototype=Object.create(R&&R.prototype);X.prototype.constructor=X;X.prototype.getDefault=function(){return!1};X.prototype.set=function(U){if(U!==this.current||this.dirty){var da=this.gl;U?da.enable(da.CULL_FACE):da.disable(da.CULL_FACE);this.current=U;this.dirty=!1}};return X}(yb),Sd=function(R){function X(){R.apply(this,
arguments)}R&&(X.__proto__=R);X.prototype=Object.create(R&&R.prototype);X.prototype.constructor=X;X.prototype.getDefault=function(){return this.gl.BACK};X.prototype.set=function(U){if(U!==this.current||this.dirty)this.gl.cullFace(U),this.current=U,this.dirty=!1};return X}(yb),Td=function(R){function X(){R.apply(this,arguments)}R&&(X.__proto__=R);X.prototype=Object.create(R&&R.prototype);X.prototype.constructor=X;X.prototype.getDefault=function(){return this.gl.CCW};X.prototype.set=function(U){if(U!==
this.current||this.dirty)this.gl.frontFace(U),this.current=U,this.dirty=!1};return X}(yb),Ue=function(R){function X(){R.apply(this,arguments)}R&&(X.__proto__=R);X.prototype=Object.create(R&&R.prototype);X.prototype.constructor=X;X.prototype.getDefault=function(){return null};X.prototype.set=function(U){if(U!==this.current||this.dirty)this.gl.useProgram(U),this.current=U,this.dirty=!1};return X}(yb),Ke=function(R){function X(){R.apply(this,arguments)}R&&(X.__proto__=R);X.prototype=Object.create(R&&
R.prototype);X.prototype.constructor=X;X.prototype.getDefault=function(){return this.gl.TEXTURE0};X.prototype.set=function(U){if(U!==this.current||this.dirty)this.gl.activeTexture(U),this.current=U,this.dirty=!1};return X}(yb),ve=function(R){function X(){R.apply(this,arguments)}R&&(X.__proto__=R);X.prototype=Object.create(R&&R.prototype);X.prototype.constructor=X;X.prototype.getDefault=function(){var U=this.gl;return[0,0,U.drawingBufferWidth,U.drawingBufferHeight]};X.prototype.set=function(U){var da=
this.current;if(U[0]!==da[0]||U[1]!==da[1]||U[2]!==da[2]||U[3]!==da[3]||this.dirty)this.gl.viewport(U[0],U[1],U[2],U[3]),this.current=U,this.dirty=!1};return X}(yb),zf=function(R){function X(){R.apply(this,arguments)}R&&(X.__proto__=R);X.prototype=Object.create(R&&R.prototype);X.prototype.constructor=X;X.prototype.getDefault=function(){return null};X.prototype.set=function(U){if(U!==this.current||this.dirty){var da=this.gl;da.bindFramebuffer(da.FRAMEBUFFER,U);this.current=U;this.dirty=!1}};return X}(yb),
Ef=function(R){function X(){R.apply(this,arguments)}R&&(X.__proto__=R);X.prototype=Object.create(R&&R.prototype);X.prototype.constructor=X;X.prototype.getDefault=function(){return null};X.prototype.set=function(U){if(U!==this.current||this.dirty){var da=this.gl;da.bindRenderbuffer(da.RENDERBUFFER,U);this.current=U;this.dirty=!1}};return X}(yb),qf=function(R){function X(){R.apply(this,arguments)}R&&(X.__proto__=R);X.prototype=Object.create(R&&R.prototype);X.prototype.constructor=X;X.prototype.getDefault=
function(){return null};X.prototype.set=function(U){if(U!==this.current||this.dirty){var da=this.gl;da.bindTexture(da.TEXTURE_2D,U);this.current=U;this.dirty=!1}};return X}(yb),Ff=function(R){function X(){R.apply(this,arguments)}R&&(X.__proto__=R);X.prototype=Object.create(R&&R.prototype);X.prototype.constructor=X;X.prototype.getDefault=function(){return null};X.prototype.set=function(U){if(U!==this.current||this.dirty){var da=this.gl;da.bindBuffer(da.ARRAY_BUFFER,U);this.current=U;this.dirty=!1}};
return X}(yb),Rf=function(R){function X(){R.apply(this,arguments)}R&&(X.__proto__=R);X.prototype=Object.create(R&&R.prototype);X.prototype.constructor=X;X.prototype.getDefault=function(){return null};X.prototype.set=function(U){var da=this.gl;da.bindBuffer(da.ELEMENT_ARRAY_BUFFER,U);this.current=U;this.dirty=!1};return X}(yb),Ud=function(R){function X(U){R.call(this,U);this.vao=U.extVertexArrayObject}R&&(X.__proto__=R);X.prototype=Object.create(R&&R.prototype);X.prototype.constructor=X;X.prototype.getDefault=
function(){return null};X.prototype.set=function(U){this.vao&&(U!==this.current||this.dirty)&&(this.vao.bindVertexArrayOES(U),this.current=U,this.dirty=!1)};return X}(yb),Ae=function(R){function X(){R.apply(this,arguments)}R&&(X.__proto__=R);X.prototype=Object.create(R&&R.prototype);X.prototype.constructor=X;X.prototype.getDefault=function(){return 4};X.prototype.set=function(U){if(U!==this.current||this.dirty){var da=this.gl;da.pixelStorei(da.UNPACK_ALIGNMENT,U);this.current=U;this.dirty=!1}};return X}(yb),
rf=function(R){function X(){R.apply(this,arguments)}R&&(X.__proto__=R);X.prototype=Object.create(R&&R.prototype);X.prototype.constructor=X;X.prototype.getDefault=function(){return!1};X.prototype.set=function(U){if(U!==this.current||this.dirty){var da=this.gl;da.pixelStorei(da.UNPACK_PREMULTIPLY_ALPHA_WEBGL,U);this.current=U;this.dirty=!1}};return X}(yb),hf=function(R){function X(){R.apply(this,arguments)}R&&(X.__proto__=R);X.prototype=Object.create(R&&R.prototype);X.prototype.constructor=X;X.prototype.getDefault=
function(){return!1};X.prototype.set=function(U){if(U!==this.current||this.dirty){var da=this.gl;da.pixelStorei(da.UNPACK_FLIP_Y_WEBGL,U);this.current=U;this.dirty=!1}};return X}(yb),Te=function(R){function X(U,da){R.call(this,U);this.context=U;this.parent=da}R&&(X.__proto__=R);X.prototype=Object.create(R&&R.prototype);X.prototype.constructor=X;X.prototype.getDefault=function(){return null};return X}(yb),Be=function(R){function X(){R.apply(this,arguments)}R&&(X.__proto__=R);X.prototype=Object.create(R&&
R.prototype);X.prototype.constructor=X;X.prototype.setDirty=function(){this.dirty=!0};X.prototype.set=function(U){if(U!==this.current||this.dirty){this.context.bindFramebuffer.set(this.parent);var da=this.gl;da.framebufferTexture2D(da.FRAMEBUFFER,da.COLOR_ATTACHMENT0,da.TEXTURE_2D,U,0);this.current=U;this.dirty=!1}};return X}(Te),Ie=function(R){function X(){R.apply(this,arguments)}R&&(X.__proto__=R);X.prototype=Object.create(R&&R.prototype);X.prototype.constructor=X;X.prototype.set=function(U){if(U!==
this.current||this.dirty){this.context.bindFramebuffer.set(this.parent);var da=this.gl;da.framebufferRenderbuffer(da.FRAMEBUFFER,da.DEPTH_ATTACHMENT,da.RENDERBUFFER,U);this.current=U;this.dirty=!1}};return X}(Te),nf=function(R,X,U,da){this.context=R;this.width=X;this.height=U;X=this.framebuffer=R.gl.createFramebuffer();this.colorAttachment=new Be(R,X);da&&(this.depthAttachment=new Ie(R,X))};nf.prototype.destroy=function(){var R=this.context.gl,X=this.colorAttachment.get();X&&R.deleteTexture(X);this.depthAttachment&&
(X=this.depthAttachment.get())&&R.deleteRenderbuffer(X);R.deleteFramebuffer(this.framebuffer)};var Zc=function(R,X,U){this.func=R;this.mask=X;this.range=U};Zc.ReadOnly=!1;Zc.ReadWrite=!0;Zc.disabled=new Zc(519,Zc.ReadOnly,[0,1]);var Bd=function(R,X,U,da,va,Ca){this.test=R;this.ref=X;this.mask=U;this.fail=da;this.depthFail=va;this.pass=Ca};Bd.disabled=new Bd({func:519,mask:0},0,0,7680,7680,7680);var Ob=function(R,X,U){this.blendFunction=R;this.blendColor=X;this.mask=U};Ob.Replace=[1,0];Ob.disabled=
new Ob(Ob.Replace,a.Color.transparent,[!1,!1,!1,!1]);Ob.unblended=new Ob(Ob.Replace,a.Color.transparent,[!0,!0,!0,!0]);Ob.alphaBlended=new Ob([1,771],a.Color.transparent,[!0,!0,!0,!0]);var Zb=function(R,X,U){this.enable=R;this.mode=X;this.frontFace=U};Zb.disabled=new Zb(!1,1029,2305);Zb.backCCW=new Zb(!0,1029,2305);var Mc=function(R){this.gl=R;this.extVertexArrayObject=this.gl.getExtension("OES_vertex_array_object");this.clearColor=new ac(this);this.clearDepth=new Ub(this);this.clearStencil=new lc(this);
this.colorMask=new tc(this);this.depthMask=new Rc(this);this.stencilMask=new kd(this);this.stencilFunc=new Cd(this);this.stencilOp=new Gd(this);this.stencilTest=new Ad(this);this.depthRange=new Nc(this);this.depthTest=new cd(this);this.depthFunc=new Cc(this);this.blend=new dd(this);this.blendFunc=new Vc(this);this.blendColor=new Sc(this);this.blendEquation=new id(this);this.cullFace=new Md(this);this.cullFaceSide=new Sd(this);this.frontFace=new Td(this);this.program=new Ue(this);this.activeTexture=
new Ke(this);this.viewport=new ve(this);this.bindFramebuffer=new zf(this);this.bindRenderbuffer=new Ef(this);this.bindTexture=new qf(this);this.bindVertexBuffer=new Ff(this);this.bindElementBuffer=new Rf(this);this.bindVertexArrayOES=this.extVertexArrayObject&&new Ud(this);this.pixelStoreUnpack=new Ae(this);this.pixelStoreUnpackPremultiplyAlpha=new rf(this);this.pixelStoreUnpackFlipY=new hf(this);if(this.extTextureFilterAnisotropic=R.getExtension("EXT_texture_filter_anisotropic")||R.getExtension("MOZ_EXT_texture_filter_anisotropic")||
R.getExtension("WEBKIT_EXT_texture_filter_anisotropic"))this.extTextureFilterAnisotropicMax=R.getParameter(this.extTextureFilterAnisotropic.MAX_TEXTURE_MAX_ANISOTROPY_EXT);if(this.extTextureHalfFloat=R.getExtension("OES_texture_half_float"))R.getExtension("OES_texture_half_float_linear"),this.extRenderToTextureHalfFloat=R.getExtension("EXT_color_buffer_half_float");this.extTimerQuery=R.getExtension("EXT_disjoint_timer_query")};Mc.prototype.setDefault=function(){this.unbindVAO();this.clearColor.setDefault();
this.clearDepth.setDefault();this.clearStencil.setDefault();this.colorMask.setDefault();this.depthMask.setDefault();this.stencilMask.setDefault();this.stencilFunc.setDefault();this.stencilOp.setDefault();this.stencilTest.setDefault();this.depthRange.setDefault();this.depthTest.setDefault();this.depthFunc.setDefault();this.blend.setDefault();this.blendFunc.setDefault();this.blendColor.setDefault();this.blendEquation.setDefault();this.cullFace.setDefault();this.cullFaceSide.setDefault();this.frontFace.setDefault();
this.program.setDefault();this.activeTexture.setDefault();this.bindFramebuffer.setDefault();this.pixelStoreUnpack.setDefault();this.pixelStoreUnpackPremultiplyAlpha.setDefault();this.pixelStoreUnpackFlipY.setDefault()};Mc.prototype.setDirty=function(){this.clearColor.dirty=!0;this.clearDepth.dirty=!0;this.clearStencil.dirty=!0;this.colorMask.dirty=!0;this.depthMask.dirty=!0;this.stencilMask.dirty=!0;this.stencilFunc.dirty=!0;this.stencilOp.dirty=!0;this.stencilTest.dirty=!0;this.depthRange.dirty=
!0;this.depthTest.dirty=!0;this.depthFunc.dirty=!0;this.blend.dirty=!0;this.blendFunc.dirty=!0;this.blendColor.dirty=!0;this.blendEquation.dirty=!0;this.cullFace.dirty=!0;this.cullFaceSide.dirty=!0;this.frontFace.dirty=!0;this.program.dirty=!0;this.activeTexture.dirty=!0;this.viewport.dirty=!0;this.bindFramebuffer.dirty=!0;this.bindRenderbuffer.dirty=!0;this.bindTexture.dirty=!0;this.bindVertexBuffer.dirty=!0;this.bindElementBuffer.dirty=!0;this.extVertexArrayObject&&(this.bindVertexArrayOES.dirty=
!0);this.pixelStoreUnpack.dirty=!0;this.pixelStoreUnpackPremultiplyAlpha.dirty=!0;this.pixelStoreUnpackFlipY.dirty=!0};Mc.prototype.createIndexBuffer=function(R,X){return new vc(this,R,X)};Mc.prototype.createVertexBuffer=function(R,X,U){return new Wb(this,R,X,U)};Mc.prototype.createRenderbuffer=function(R,X,U){var da=this.gl,va=da.createRenderbuffer();this.bindRenderbuffer.set(va);da.renderbufferStorage(da.RENDERBUFFER,R,X,U);this.bindRenderbuffer.set(null);return va};Mc.prototype.createFramebuffer=
function(R,X,U){return new nf(this,R,X,U)};Mc.prototype.clear=function(R){var X=R.color;R=R.depth;var U=this.gl,da=0;X&&(da|=U.COLOR_BUFFER_BIT,this.clearColor.set(X),this.colorMask.set([!0,!0,!0,!0]));"undefined"!==typeof R&&(da|=U.DEPTH_BUFFER_BIT,this.depthRange.set([0,1]),this.clearDepth.set(R),this.depthMask.set(!0));U.clear(da)};Mc.prototype.setCullFace=function(R){!1===R.enable?this.cullFace.set(!1):(this.cullFace.set(!0),this.cullFaceSide.set(R.mode),this.frontFace.set(R.frontFace))};Mc.prototype.setDepthMode=
function(R){R.func!==this.gl.ALWAYS||R.mask?(this.depthTest.set(!0),this.depthFunc.set(R.func),this.depthMask.set(R.mask),this.depthRange.set(R.range)):this.depthTest.set(!1)};Mc.prototype.setStencilMode=function(R){R.test.func!==this.gl.ALWAYS||R.mask?(this.stencilTest.set(!0),this.stencilMask.set(R.mask),this.stencilOp.set([R.fail,R.depthFail,R.pass]),this.stencilFunc.set({func:R.test.func,ref:R.ref,mask:R.test.mask})):this.stencilTest.set(!1)};Mc.prototype.setColorMode=function(R){a.deepEqual(R.blendFunction,
Ob.Replace)?this.blend.set(!1):(this.blend.set(!0),this.blendFunc.set(R.blendFunction),this.blendColor.set(R.blendColor));this.colorMask.set(R.mask)};Mc.prototype.unbindVAO=function(){this.extVertexArrayObject&&this.bindVertexArrayOES.set(null)};var Fd=function(R){function X(U,da,va){var Ca=this;R.call(this);this.id=U;this.dispatcher=va;this.on("data",function(Qa){"source"===Qa.dataType&&"metadata"===Qa.sourceDataType&&(Ca._sourceLoaded=!0);Ca._sourceLoaded&&!Ca._paused&&"source"===Qa.dataType&&"content"===
Qa.sourceDataType&&(Ca.reload(),Ca.transform&&Ca.update(Ca.transform))});this.on("error",function(){Ca._sourceErrored=!0});this._source=sc(U,da,va,this);this._tiles={};this._cache=new nc(0,this._unloadTile.bind(this));this._timers={};this._cacheTimers={};this._maxTileCacheSize=null;this._loadedParentTiles={};this._coveredTiles={};this._state=new a.SourceFeatureState}R&&(X.__proto__=R);X.prototype=Object.create(R&&R.prototype);X.prototype.constructor=X;X.prototype.onAdd=function(U){this._maxTileCacheSize=
(this.map=U)?U._maxTileCacheSize:null;if(this._source&&this._source.onAdd)this._source.onAdd(U)};X.prototype.onRemove=function(U){if(this._source&&this._source.onRemove)this._source.onRemove(U)};X.prototype.loaded=function(){if(this._sourceErrored)return!0;if(!this._sourceLoaded||!this._source.loaded())return!1;for(var U in this._tiles){var da=this._tiles[U];if("loaded"!==da.state&&"errored"!==da.state)return!1}return!0};X.prototype.getSource=function(){return this._source};X.prototype.pause=function(){this._paused=
!0};X.prototype.resume=function(){if(this._paused){var U=this._shouldReloadOnResume;this._shouldReloadOnResume=this._paused=!1;U&&this.reload();this.transform&&this.update(this.transform)}};X.prototype._loadTile=function(U,da){return this._source.loadTile(U,da)};X.prototype._unloadTile=function(U){if(this._source.unloadTile)return this._source.unloadTile(U,function(){})};X.prototype._abortTile=function(U){if(this._source.abortTile)return this._source.abortTile(U,function(){})};X.prototype.serialize=
function(){return this._source.serialize()};X.prototype.prepare=function(U){this._source.prepare&&this._source.prepare();this._state.coalesceChanges(this._tiles,this.map?this.map.painter:null);for(var da in this._tiles){var va=this._tiles[da];va.upload(U);va.prepare(this.map.style.imageManager)}};X.prototype.getIds=function(){return a.values(this._tiles).map(function(U){return U.tileID}).sort(A).map(function(U){return U.key})};X.prototype.getRenderableIds=function(U){var da=this,va=[],Ca;for(Ca in this._tiles)this._isIdRenderable(Ca,
U)&&va.push(this._tiles[Ca]);return U?va.sort(function(Qa,lb){Qa=Qa.tileID;lb=lb.tileID;var Lb=(new a.Point(Qa.canonical.x,Qa.canonical.y))._rotate(da.transform.angle),Rb=(new a.Point(lb.canonical.x,lb.canonical.y))._rotate(da.transform.angle);return Qa.overscaledZ-lb.overscaledZ||Rb.y-Lb.y||Rb.x-Lb.x}).map(function(Qa){return Qa.tileID.key}):va.map(function(Qa){return Qa.tileID}).sort(A).map(function(Qa){return Qa.key})};X.prototype.hasRenderableParent=function(U){return(U=this.findLoadedParent(U,
0))?this._isIdRenderable(U.tileID.key):!1};X.prototype._isIdRenderable=function(U,da){return this._tiles[U]&&this._tiles[U].hasData()&&!this._coveredTiles[U]&&(da||!this._tiles[U].holdingForFade())};X.prototype.reload=function(){if(this._paused)this._shouldReloadOnResume=!0;else{this._cache.reset();for(var U in this._tiles)"errored"!==this._tiles[U].state&&this._reloadTile(U,"reloading")}};X.prototype._reloadTile=function(U,da){var va=this._tiles[U];va&&("loading"!==va.state&&(va.state=da),this._loadTile(va,
this._tileLoaded.bind(this,va,U,da)))};X.prototype._tileLoaded=function(U,da,va,Ca){Ca?(U.state="errored",404!==Ca.status?this._source.fire(new a.ErrorEvent(Ca,{tile:U})):this.update(this.transform)):(U.timeAdded=a.browser.now(),"expired"===va&&(U.refreshedUponExpiration=!0),this._setTileReloadTimer(da,U),"raster-dem"===this.getSource().type&&U.dem&&this._backfillDEM(U),this._state.initializeTileState(U,this.map?this.map.painter:null),this._source.fire(new a.Event("data",{dataType:"source",tile:U,
coord:U.tileID})))};X.prototype._backfillDEM=function(U){function da(lb,Lb){lb.needsHillshadePrepare=!0;var Rb=Lb.tileID.canonical.x-lb.tileID.canonical.x,dc=Lb.tileID.canonical.y-lb.tileID.canonical.y,Ic=Math.pow(2,lb.tileID.canonical.z),Gc=Lb.tileID.key;0===Rb&&0===dc||1<Math.abs(dc)||(1<Math.abs(Rb)&&(1===Math.abs(Rb+Ic)?Rb+=Ic:1===Math.abs(Rb-Ic)&&(Rb-=Ic)),Lb.dem&&lb.dem&&(lb.dem.backfillBorder(Lb.dem,Rb,dc),lb.neighboringTiles&&lb.neighboringTiles[Gc]&&(lb.neighboringTiles[Gc].backfilled=!0)))}
for(var va=this.getRenderableIds(),Ca=0;Ca<va.length;Ca++){var Qa=va[Ca];U.neighboringTiles&&U.neighboringTiles[Qa]&&(Qa=this.getTileByID(Qa),da(U,Qa),da(Qa,U))}};X.prototype.getTile=function(U){return this.getTileByID(U.key)};X.prototype.getTileByID=function(U){return this._tiles[U]};X.prototype._retainLoadedChildren=function(U,da,va,Ca){for(var Qa in this._tiles){var lb=this._tiles[Qa];if(!(Ca[Qa]||!lb.hasData()||lb.tileID.overscaledZ<=da||lb.tileID.overscaledZ>va)){for(var Lb=lb.tileID;lb&&lb.tileID.overscaledZ>
da+1;){var Rb=lb.tileID.scaledTo(lb.tileID.overscaledZ-1);(lb=this._tiles[Rb.key])&&lb.hasData()&&(Lb=Rb)}for(lb=Lb;lb.overscaledZ>da;)if(lb=lb.scaledTo(lb.overscaledZ-1),U[lb.key]){Ca[Lb.key]=Lb;break}}}};X.prototype.findLoadedParent=function(U,da){if(U.key in this._loadedParentTiles)return(U=this._loadedParentTiles[U.key])&&U.tileID.overscaledZ>=da?U:null;for(var va=U.overscaledZ-1;va>=da;va--){var Ca=U.scaledTo(va);if(Ca=this._getLoadedTile(Ca))return Ca}};X.prototype._getLoadedTile=function(U){var da=
this._tiles[U.key];return da&&da.hasData()?da:this._cache.getByKey(U.wrapped().key)};X.prototype.updateCacheSize=function(U){U=Math.floor((Math.ceil(U.width/this._source.tileSize)+1)*(Math.ceil(U.height/this._source.tileSize)+1)*5);this._cache.setMaxSize("number"===typeof this._maxTileCacheSize?Math.min(this._maxTileCacheSize,U):U)};X.prototype.handleWrapJump=function(U){var da=Math.round((U-(void 0===this._prevLng?U:this._prevLng))/360);this._prevLng=U;if(da){U={};for(var va in this._tiles){var Ca=
this._tiles[va];Ca.tileID=Ca.tileID.unwrapTo(Ca.tileID.wrap+da);U[Ca.tileID.key]=Ca}this._tiles=U;for(var Qa in this._timers)clearTimeout(this._timers[Qa]),delete this._timers[Qa];for(var lb in this._tiles)this._setTileReloadTimer(lb,this._tiles[lb])}};X.prototype.update=function(U){var da=this;this.transform=U;if(this._sourceLoaded&&!this._paused){this.updateCacheSize(U);this.handleWrapJump(this.transform.center.lng);this._coveredTiles={};if(this.used)if(this._source.tileID)var va=U.getVisibleUnwrappedCoordinates(this._source.tileID).map(function(wd){return new a.OverscaledTileID(wd.canonical.z,
wd.wrap,wd.canonical.z,wd.canonical.x,wd.canonical.y)});else va=U.coveringTiles({tileSize:this._source.tileSize,minzoom:this._source.minzoom,maxzoom:this._source.maxzoom,roundZoom:this._source.roundZoom,reparseOverscaled:this._source.reparseOverscaled}),this._source.hasTile&&(va=va.filter(function(wd){return da._source.hasTile(wd)}));else va=[];U=U.coveringZoomLevel(this._source);var Ca=Math.max(U-X.maxOverzooming,this._source.minzoom),Qa=Math.max(U+X.maxUnderzooming,this._source.minzoom);va=this._updateRetainedTiles(va,
U);if(D(this._source.type)){for(var lb={},Lb={},Rb=0,dc=Object.keys(va);Rb<dc.length;Rb+=1){var Ic=dc[Rb],Gc=va[Ic],Xc=this._tiles[Ic];if(Xc&&!(Xc.fadeEndTime&&Xc.fadeEndTime<=a.browser.now())){if(Xc=this.findLoadedParent(Gc,Ca))this._addTile(Xc.tileID),lb[Xc.tileID.key]=Xc.tileID;Lb[Ic]=Gc}}this._retainLoadedChildren(Lb,U,Qa,va);for(var $c in lb)va[$c]||(this._coveredTiles[$c]=!0,va[$c]=lb[$c])}for(var Wc in va)this._tiles[Wc].clearFadeHold();$c=0;for(Wc=a.keysDifference(this._tiles,va);$c<Wc.length;$c+=
1)U=Wc[$c],Ca=this._tiles[U],Ca.hasSymbolBuckets&&!Ca.holdingForFade()?Ca.setHoldDuration(this.map._fadeDuration):(!Ca.hasSymbolBuckets||Ca.symbolFadeFinished())&&this._removeTile(U);this._updateLoadedParentTileCache()}};X.prototype.releaseSymbolFadeTiles=function(){for(var U in this._tiles)this._tiles[U].holdingForFade()&&this._removeTile(U)};X.prototype._updateRetainedTiles=function(U,da){for(var va={},Ca={},Qa=Math.max(da-X.maxOverzooming,this._source.minzoom),lb=Math.max(da+X.maxUnderzooming,
this._source.minzoom),Lb={},Rb=0;Rb<U.length;Rb+=1){var dc=U[Rb],Ic=this._addTile(dc);va[dc.key]=dc;Ic.hasData()||da<this._source.maxzoom&&(Lb[dc.key]=dc)}this._retainLoadedChildren(Lb,da,lb,va);for(lb=0;lb<U.length;lb+=1)if(Lb=U[lb],Rb=this._tiles[Lb.key],!Rb.hasData()){if(da+1>this._source.maxzoom){if(dc=Lb.children(this._source.maxzoom)[0],(Ic=this.getTile(dc))&&Ic.hasData()){va[dc.key]=dc;continue}}else if(dc=Lb.children(this._source.maxzoom),va[dc[0].key]&&va[dc[1].key]&&va[dc[2].key]&&va[dc[3].key])continue;
dc=Rb.wasRequested();for(Ic=Lb.overscaledZ-1;Ic>=Qa;--Ic){var Gc=Lb.scaledTo(Ic);if(Ca[Gc.key])break;Ca[Gc.key]=!0;Rb=this.getTile(Gc);!Rb&&dc&&(Rb=this._addTile(Gc));if(Rb&&(va[Gc.key]=Gc,dc=Rb.wasRequested(),Rb.hasData()))break}}return va};X.prototype._updateLoadedParentTileCache=function(){this._loadedParentTiles={};for(var U in this._tiles){for(var da=[],va=void 0,Ca=this._tiles[U].tileID;0<Ca.overscaledZ;){if(Ca.key in this._loadedParentTiles){va=this._loadedParentTiles[Ca.key];break}da.push(Ca.key);
Ca=Ca.scaledTo(Ca.overscaledZ-1);if(va=this._getLoadedTile(Ca))break}for(Ca=0;Ca<da.length;Ca+=1)this._loadedParentTiles[da[Ca]]=va}};X.prototype._addTile=function(U){var da=this._tiles[U.key];if(da)return da;if(da=this._cache.getAndRemove(U))this._setTileReloadTimer(U.key,da),da.tileID=U,this._state.initializeTileState(da,this.map?this.map.painter:null),this._cacheTimers[U.key]&&(clearTimeout(this._cacheTimers[U.key]),delete this._cacheTimers[U.key],this._setTileReloadTimer(U.key,da));var va=!!da;
va||(da=new a.Tile(U,this._source.tileSize*U.overscaleFactor()),this._loadTile(da,this._tileLoaded.bind(this,da,U.key,da.state)));if(!da)return null;da.uses++;this._tiles[U.key]=da;va||this._source.fire(new a.Event("dataloading",{tile:da,coord:da.tileID,dataType:"source"}));return da};X.prototype._setTileReloadTimer=function(U,da){var va=this;U in this._timers&&(clearTimeout(this._timers[U]),delete this._timers[U]);(da=da.getExpiryTimeout())&&(this._timers[U]=setTimeout(function(){va._reloadTile(U,
"expired");delete va._timers[U]},da))};X.prototype._removeTile=function(U){var da=this._tiles[U];da&&(da.uses--,delete this._tiles[U],this._timers[U]&&(clearTimeout(this._timers[U]),delete this._timers[U]),0<da.uses||(da.hasData()&&"reloading"!==da.state?this._cache.add(da.tileID,da,da.getExpiryTimeout()):(da.aborted=!0,this._abortTile(da),this._unloadTile(da))))};X.prototype.clearTiles=function(){this._paused=this._shouldReloadOnResume=!1;for(var U in this._tiles)this._removeTile(U);this._cache.reset()};
X.prototype.tilesIn=function(U,da,va){var Ca=this,Qa=[],lb=this.transform;if(!lb)return Qa;va=va?lb.getCameraQueryGeometry(U):U;var Lb=U.map(function(Wc){return lb.pointCoordinate(Wc)}),Rb=va.map(function(Wc){return lb.pointCoordinate(Wc)}),dc=this.getIds(),Ic=Infinity,Gc=Infinity,Xc=-Infinity,$c=-Infinity;for(U=0;U<Rb.length;U+=1)va=Rb[U],Ic=Math.min(Ic,va.x),Gc=Math.min(Gc,va.y),Xc=Math.max(Xc,va.x),$c=Math.max($c,va.y);U=function(Wc){Wc=Ca._tiles[dc[Wc]];if(!Wc.holdingForFade()){var wd=Wc.tileID,
Qd=Math.pow(2,lb.zoom-Wc.tileID.overscaledZ),yd=da*Wc.queryPadding*a.EXTENT/Wc.tileSize/Qd,ge=[wd.getTilePoint(new a.MercatorCoordinate(Ic,Gc)),wd.getTilePoint(new a.MercatorCoordinate(Xc,$c))];ge[0].x-yd<a.EXTENT&&ge[0].y-yd<a.EXTENT&&0<=ge[1].x+yd&&0<=ge[1].y+yd&&(yd=Lb.map(function(be){return wd.getTilePoint(be)}),ge=Rb.map(function(be){return wd.getTilePoint(be)}),Qa.push({tile:Wc,tileID:wd,queryGeometry:yd,cameraQueryGeometry:ge,scale:Qd}))}};for(va=0;va<dc.length;va++)U(va);return Qa};X.prototype.getVisibleCoordinates=
function(U){var da=this;U=this.getRenderableIds(U).map(function(Qa){return da._tiles[Qa].tileID});for(var va=0;va<U.length;va+=1){var Ca=U[va];Ca.posMatrix=this.transform.calculatePosMatrix(Ca.toUnwrapped())}return U};X.prototype.hasTransition=function(){if(this._source.hasTransition())return!0;if(D(this._source.type))for(var U in this._tiles){var da=this._tiles[U];if(void 0!==da.fadeEndTime&&da.fadeEndTime>=a.browser.now())return!0}return!1};X.prototype.setFeatureState=function(U,da,va){this._state.updateState(U||
"_geojsonTileLayer",da,va)};X.prototype.removeFeatureState=function(U,da,va){this._state.removeFeatureState(U||"_geojsonTileLayer",da,va)};X.prototype.getFeatureState=function(U,da){return this._state.getState(U||"_geojsonTileLayer",da)};X.prototype.setDependencies=function(U,da,va){(U=this._tiles[U])&&U.setDependencies(da,va)};X.prototype.reloadTilesForDependencies=function(U,da){for(var va in this._tiles)this._tiles[va].hasDependency(U,da)&&this._reloadTile(va,"reloading");this._cache.filter(function(Ca){return!Ca.hasDependency(U,
da)})};return X}(a.Evented);Fd.maxOverzooming=10;Fd.maxUnderzooming=3;var rd=function(){this.active={}};rd.prototype.acquire=function(R){if(!this.workers)for(this.workers=[];this.workers.length<rd.workerCount;)this.workers.push(new C);this.active[R]=!0;return this.workers.slice()};rd.prototype.release=function(R){delete this.active[R];0===this.numActive()&&(this.workers.forEach(function(X){X.terminate()}),this.workers=null)};rd.prototype.isPreloaded=function(){return!!this.active.mapboxgl_preloaded_worker_pool};
rd.prototype.numActive=function(){return Object.keys(this.active).length};rd.workerCount=Math.max(Math.min(Math.floor(a.browser.hardwareConcurrency/2),6),1);var pe,Hd={setStyle:"setStyle",addLayer:"addLayer",removeLayer:"removeLayer",setPaintProperty:"setPaintProperty",setLayoutProperty:"setLayoutProperty",setFilter:"setFilter",addSource:"addSource",removeSource:"removeSource",setGeoJSONSourceData:"setGeoJSONSourceData",setLayerZoomRange:"setLayerZoomRange",setLayerProperty:"setLayerProperty",setCenter:"setCenter",
setZoom:"setZoom",setBearing:"setBearing",setPitch:"setPitch",setSprite:"setSprite",setGlyphs:"setGlyphs",setTransition:"setTransition",setLight:"setLight"},qe=function(R,X){this.reset(R,X)};qe.prototype.reset=function(R,X){this.points=R||[];this._distances=[0];for(R=1;R<this.points.length;R++)this._distances[R]=this._distances[R-1]+this.points[R].dist(this.points[R-1]);this.length=this._distances[this._distances.length-1];this.padding=Math.min(X||0,.5*this.length);this.paddedLength=this.length-2*
this.padding};qe.prototype.lerp=function(R){if(1===this.points.length)return this.points[0];R=a.clamp(R,0,1);for(var X=1,U=this._distances[X],da=R*this.paddedLength+this.padding;U<da&&X<this._distances.length;)U=this._distances[++X];R=X-1;var va=this._distances[R];U-=va;U=0<U?(da-va)/U:0;return this.points[R].mult(1-U).add(this.points[X].mult(U))};var Ge=function(R,X,U){var da=this.boxCells=[],va=this.circleCells=[];this.xCellCount=Math.ceil(R/U);this.yCellCount=Math.ceil(X/U);for(U=0;U<this.xCellCount*
this.yCellCount;U++)da.push([]),va.push([]);this.circleKeys=[];this.boxKeys=[];this.bboxes=[];this.circles=[];this.width=R;this.height=X;this.xScale=this.xCellCount/R;this.yScale=this.yCellCount/X;this.circleUid=this.boxUid=0};Ge.prototype.keysLength=function(){return this.boxKeys.length+this.circleKeys.length};Ge.prototype.insert=function(R,X,U,da,va){this._forEachCell(X,U,da,va,this._insertBoxCell,this.boxUid++);this.boxKeys.push(R);this.bboxes.push(X);this.bboxes.push(U);this.bboxes.push(da);this.bboxes.push(va)};
Ge.prototype.insertCircle=function(R,X,U,da){this._forEachCell(X-da,U-da,X+da,U+da,this._insertCircleCell,this.circleUid++);this.circleKeys.push(R);this.circles.push(X);this.circles.push(U);this.circles.push(da)};Ge.prototype._insertBoxCell=function(R,X,U,da,va,Ca){this.boxCells[va].push(Ca)};Ge.prototype._insertCircleCell=function(R,X,U,da,va,Ca){this.circleCells[va].push(Ca)};Ge.prototype._query=function(R,X,U,da,va,Ca){if(0>U||R>this.width||0>da||X>this.height)return va?!1:[];var Qa=[];if(0>=R&&
0>=X&&this.width<=U&&this.height<=da){if(va)return!0;for(R=0;R<this.boxKeys.length;R++)Qa.push({key:this.boxKeys[R],x1:this.bboxes[4*R],y1:this.bboxes[4*R+1],x2:this.bboxes[4*R+2],y2:this.bboxes[4*R+3]});for(R=0;R<this.circleKeys.length;R++)X=this.circles[3*R],U=this.circles[3*R+1],da=this.circles[3*R+2],Qa.push({key:this.circleKeys[R],x1:X-da,y1:U-da,x2:X+da,y2:U+da});return Ca?Qa.filter(Ca):Qa}this._forEachCell(R,X,U,da,this._queryCell,Qa,{hitTest:va,seenUids:{box:{},circle:{}}},Ca);return va?0<
Qa.length:Qa};Ge.prototype._queryCircle=function(R,X,U,da,va){var Ca=R-U,Qa=R+U,lb=X-U,Lb=X+U;if(0>Qa||Ca>this.width||0>Lb||lb>this.height)return da?!1:[];var Rb=[];this._forEachCell(Ca,lb,Qa,Lb,this._queryCellCircle,Rb,{hitTest:da,circle:{x:R,y:X,radius:U},seenUids:{box:{},circle:{}}},va);return da?0<Rb.length:Rb};Ge.prototype.query=function(R,X,U,da,va){return this._query(R,X,U,da,!1,va)};Ge.prototype.hitTest=function(R,X,U,da,va){return this._query(R,X,U,da,!0,va)};Ge.prototype.hitTestCircle=function(R,
X,U,da){return this._queryCircle(R,X,U,!0,da)};Ge.prototype._queryCell=function(R,X,U,da,va,Ca,Qa,lb){var Lb=Qa.seenUids,Rb=this.boxCells[va];if(null!==Rb)for(var dc=this.bboxes,Ic=0;Ic<Rb.length;Ic+=1){var Gc=Rb[Ic];if(!Lb.box[Gc]){Lb.box[Gc]=!0;var Xc=4*Gc;if(R<=dc[Xc+2]&&X<=dc[Xc+3]&&U>=dc[Xc+0]&&da>=dc[Xc+1]&&(!lb||lb(this.boxKeys[Gc]))){if(Qa.hitTest)return Ca.push(!0),!0;Ca.push({key:this.boxKeys[Gc],x1:dc[Xc],y1:dc[Xc+1],x2:dc[Xc+2],y2:dc[Xc+3]})}}}va=this.circleCells[va];if(null!==va)for(Rb=
this.circles,dc=0;dc<va.length;dc+=1)if(Ic=va[dc],!Lb.circle[Ic]){Lb.circle[Ic]=!0;var $c=3*Ic;if(this._circleAndRectCollide(Rb[$c],Rb[$c+1],Rb[$c+2],R,X,U,da)&&(!lb||lb(this.circleKeys[Ic]))){if(Qa.hitTest)return Ca.push(!0),!0;Gc=Rb[$c];Xc=Rb[$c+1];$c=Rb[$c+2];Ca.push({key:this.circleKeys[Ic],x1:Gc-$c,y1:Xc-$c,x2:Gc+$c,y2:Xc+$c})}}};Ge.prototype._queryCellCircle=function(R,X,U,da,va,Ca,Qa,lb){R=Qa.circle;Qa=Qa.seenUids;X=this.boxCells[va];if(null!==X)for(U=this.bboxes,da=0;da<X.length;da+=1){var Lb=
X[da];if(!Qa.box[Lb]){Qa.box[Lb]=!0;var Rb=4*Lb;if(this._circleAndRectCollide(R.x,R.y,R.radius,U[Rb+0],U[Rb+1],U[Rb+2],U[Rb+3])&&(!lb||lb(this.boxKeys[Lb])))return Ca.push(!0),!0}}va=this.circleCells[va];if(null!==va)for(X=this.circles,U=0;U<va.length;U+=1)if(da=va[U],!Qa.circle[da]&&(Qa.circle[da]=!0,Lb=3*da,this._circlesCollide(X[Lb],X[Lb+1],X[Lb+2],R.x,R.y,R.radius)&&(!lb||lb(this.circleKeys[da]))))return Ca.push(!0),!0};Ge.prototype._forEachCell=function(R,X,U,da,va,Ca,Qa,lb){for(var Lb=this._convertToXCellCoord(R),
Rb=this._convertToYCellCoord(X),dc=this._convertToXCellCoord(U),Ic=this._convertToYCellCoord(da);Lb<=dc;Lb++)for(var Gc=Rb;Gc<=Ic;Gc++)if(va.call(this,R,X,U,da,this.xCellCount*Gc+Lb,Ca,Qa,lb))return};Ge.prototype._convertToXCellCoord=function(R){return Math.max(0,Math.min(this.xCellCount-1,Math.floor(R*this.xScale)))};Ge.prototype._convertToYCellCoord=function(R){return Math.max(0,Math.min(this.yCellCount-1,Math.floor(R*this.yScale)))};Ge.prototype._circlesCollide=function(R,X,U,da,va,Ca){R=da-R;
X=va-X;U+=Ca;return U*U>R*R+X*X};Ge.prototype._circleAndRectCollide=function(R,X,U,da,va,Ca,Qa){Ca=(Ca-da)/2;R=Math.abs(R-(da+Ca));if(R>Ca+U)return!1;Qa=(Qa-va)/2;X=Math.abs(X-(va+Qa));if(X>Qa+U)return!1;if(R<=Ca||X<=Qa)return!0;va=R-Ca;X-=Qa;return va*va+X*X<=U*U};var oe=new Float32Array([-Infinity,-Infinity,0,-Infinity,-Infinity,0,-Infinity,-Infinity,0,-Infinity,-Infinity,0]),xb=function(R,X,U){void 0===X&&(X=new Ge(R.width+200,R.height+200,25));void 0===U&&(U=new Ge(R.width+200,R.height+200,25));
this.transform=R;this.grid=X;this.ignoredGrid=U;this.pitchfactor=Math.cos(R._pitch)*R.cameraToCenterDistance;this.screenRightBoundary=R.width+100;this.screenBottomBoundary=R.height+100;this.gridRightBoundary=R.width+200;this.gridBottomBoundary=R.height+200};xb.prototype.placeCollisionBox=function(R,X,U,da,va){da=this.projectAndGetPerspectiveRatio(da,R.anchorPointX,R.anchorPointY);var Ca=U*da.perspectiveRatio;U=R.x1*Ca+da.point.x;var Qa=R.y1*Ca+da.point.y,lb=R.x2*Ca+da.point.x;R=R.y2*Ca+da.point.y;
return!this.isInsideGrid(U,Qa,lb,R)||!X&&this.grid.hitTest(U,Qa,lb,R,va)?{box:[],offscreen:!1}:{box:[U,Qa,lb,R],offscreen:this.isOffscreen(U,Qa,lb,R)}};xb.prototype.placeCollisionCircles=function(R,X,U,da,va,Ca,Qa,lb,Lb,Rb,dc,Ic,Gc){var Xc=[],$c=new a.Point(X.anchorX,X.anchorY);Ca=Z($c,Ca);Ca=.5+this.transform.cameraToCenterDistance/Ca.signedDistanceFromCamera*.5;va=(Rb?va/Ca:va*Ca)/a.ONE_EM;Rb=Z($c,Qa).point;va=V(va,da,X.lineOffsetX*va,X.lineOffsetY*va,!1,Rb,$c,X,U,Qa,{});U=X=!1;da=!0;if(va){Ic=
.5*Ic*Ca+Gc;Qa=new a.Point(-100,-100);$c=new a.Point(this.screenRightBoundary,this.screenBottomBoundary);Gc=new qe;Ca=va.first;Rb=va.last;va=[];for(var Wc=Ca.path.length-1;1<=Wc;Wc--)va.push(Ca.path[Wc]);for(Ca=1;Ca<Rb.path.length;Ca++)va.push(Rb.path[Ca]);Ca=2.5*Ic;lb&&(va=va.map(function(ke){return Z(ke,lb)}),va=va.some(function(ke){return 0>=ke.signedDistanceFromCamera})?[]:va.map(function(ke){return ke.point}));Rb=[];if(0<va.length){Rb=va[0].clone();Wc=va[0].clone();for(var wd=1;wd<va.length;wd++)Rb.x=
Math.min(Rb.x,va[wd].x),Rb.y=Math.min(Rb.y,va[wd].y),Wc.x=Math.max(Wc.x,va[wd].x),Wc.y=Math.max(Wc.y,va[wd].y);Rb=Rb.x>=Qa.x&&Wc.x<=$c.x&&Rb.y>=Qa.y&&Wc.y<=$c.y?[va]:Wc.x<Qa.x||Rb.x>$c.x||Wc.y<Qa.y||Rb.y>$c.y?[]:a.clipLine([va],Qa.x,Qa.y,$c.x,$c.y)}Qa=0;for($c=Rb;Qa<$c.length;Qa+=1)for(Gc.reset($c[Qa],.25*Ic),va=0,va=Gc.length<=.5*Ic?1:Math.ceil(Gc.paddedLength/Ca)+1,Rb=0;Rb<va;Rb++){wd=Gc.lerp(Rb/Math.max(va-1,1));Wc=wd.x+100;wd=wd.y+100;Xc.push(Wc,wd,Ic,0);var Qd=Wc-Ic,yd=wd-Ic,ge=Wc+Ic,be=wd+Ic;
da=da&&this.isOffscreen(Qd,yd,ge,be);U=U||this.isInsideGrid(Qd,yd,ge,be);if(!R&&this.grid.hitTestCircle(Wc,wd,Ic,dc)&&(X=!0,!Lb))return{circles:[],offscreen:!1,collisionDetected:X}}}return{circles:!Lb&&X||!U?[]:Xc,offscreen:da,collisionDetected:X}};xb.prototype.queryRenderedSymbols=function(R){if(0===R.length||0===this.grid.keysLength()&&0===this.ignoredGrid.keysLength())return{};for(var X=[],U=Infinity,da=Infinity,va=-Infinity,Ca=-Infinity,Qa=0;Qa<R.length;Qa+=1){var lb=R[Qa];lb=new a.Point(lb.x+
100,lb.y+100);U=Math.min(U,lb.x);da=Math.min(da,lb.y);va=Math.max(va,lb.x);Ca=Math.max(Ca,lb.y);X.push(lb)}R={};Qa={};lb=0;for(U=this.grid.query(U,da,va,Ca).concat(this.ignoredGrid.query(U,da,va,Ca));lb<U.length;lb+=1)va=U[lb],da=va.key,void 0===R[da.bucketInstanceId]&&(R[da.bucketInstanceId]={}),R[da.bucketInstanceId][da.featureIndex]||(va=[new a.Point(va.x1,va.y1),new a.Point(va.x2,va.y1),new a.Point(va.x2,va.y2),new a.Point(va.x1,va.y2)],a.polygonIntersectsPolygon(X,va)&&(R[da.bucketInstanceId][da.featureIndex]=
!0,void 0===Qa[da.bucketInstanceId]&&(Qa[da.bucketInstanceId]=[]),Qa[da.bucketInstanceId].push(da.featureIndex)));return Qa};xb.prototype.insertCollisionBox=function(R,X,U,da,va){(X?this.ignoredGrid:this.grid).insert({bucketInstanceId:U,featureIndex:da,collisionGroupID:va},R[0],R[1],R[2],R[3])};xb.prototype.insertCollisionCircles=function(R,X,U,da,va){X=X?this.ignoredGrid:this.grid;U={bucketInstanceId:U,featureIndex:da,collisionGroupID:va};for(da=0;da<R.length;da+=4)X.insertCircle(U,R[da],R[da+1],
R[da+2])};xb.prototype.projectAndGetPerspectiveRatio=function(R,X,U){X=[X,U,0,1];ja(X,X,R);return{point:new a.Point((X[0]/X[3]+1)/2*this.transform.width+100,(-X[1]/X[3]+1)/2*this.transform.height+100),perspectiveRatio:.5+this.transform.cameraToCenterDistance/X[3]*.5}};xb.prototype.isOffscreen=function(R,X,U,da){return 100>U||R>=this.screenRightBoundary||100>da||X>this.screenBottomBoundary};xb.prototype.isInsideGrid=function(R,X,U,da){return 0<=U&&R<this.gridRightBoundary&&0<=da&&X<this.gridBottomBoundary};
xb.prototype.getViewportMatrix=function(){var R=a.identity([]);a.translate(R,R,[-100,-100,0]);return R};var oc=function(R,X,U,da){this.opacity=R?Math.max(0,Math.min(1,R.opacity+(R.placed?X:-X))):da&&U?1:0;this.placed=U};oc.prototype.isHidden=function(){return 0===this.opacity&&!this.placed};var Yb=function(R,X,U,da,va){this.text=new oc(R?R.text:null,X,U,va);this.icon=new oc(R?R.icon:null,X,da,va)};Yb.prototype.isHidden=function(){return this.text.isHidden()&&this.icon.isHidden()};var Bc=function(R,
X,U){this.text=R;this.icon=X;this.skipFade=U},Yc=function(){this.invProjMatrix=a.create();this.viewportMatrix=a.create();this.circles=[]},bd=function(R,X,U,da,va){this.bucketInstanceId=R;this.featureIndex=X;this.sourceLayerIndex=U;this.bucketIndex=da;this.tileID=va},Tc=function(R){this.crossSourceCollisions=R;this.maxGroupID=0;this.collisionGroups={}};Tc.prototype.get=function(R){if(this.crossSourceCollisions)return{ID:0,predicate:null};if(!this.collisionGroups[R]){var X=++this.maxGroupID;this.collisionGroups[R]=
{ID:X,predicate:function(U){return U.collisionGroupID===X}}}return this.collisionGroups[R]};var Oc=function(R,X,U,da){this.transform=R.clone();this.collisionIndex=new xb(this.transform);this.placements={};this.opacities={};this.variableOffsets={};this.stale=!1;this.commitTime=0;this.fadeDuration=X;this.retainedQueryData={};this.collisionGroups=new Tc(U);this.collisionCircleArrays={};if(this.prevPlacement=da)da.prevPlacement=void 0;this.placedOrientations={}};Oc.prototype.getBucketParts=function(R,
X,U,da){var va=U.getBucket(X),Ca=U.latestFeatureIndex;if(va&&Ca&&X.id===va.layerIds[0]){X=U.collisionBoxArray;var Qa=va.layers[0].layout,lb=Math.pow(2,this.transform.zoom-U.tileID.overscaledZ),Lb=U.tileSize/a.EXTENT,Rb=this.transform.calculatePosMatrix(U.tileID.toUnwrapped()),dc="map"===Qa.get("text-pitch-alignment"),Ic="map"===Qa.get("text-rotation-alignment"),Gc=ma(U,1,this.transform.zoom),Xc=L(Rb,dc,Ic,this.transform,Gc),$c=null;dc&&(dc=Q(Rb,dc,Ic,this.transform,Gc),$c=a.multiply([],this.transform.labelPlaneMatrix,
dc));this.retainedQueryData[va.bucketInstanceId]=new bd(va.bucketInstanceId,Ca,va.sourceLayerIndex,va.index,U.tileID);U={bucket:va,layout:Qa,posMatrix:Rb,textLabelPlaneMatrix:Xc,labelToScreenMatrix:$c,scale:lb,textPixelRatio:Lb,holdingForFade:U.holdingForFade(),collisionBoxArray:X,partiallyEvaluatedTextSize:a.evaluateSizeForZoom(va.textSizeData,this.transform.zoom),collisionGroup:this.collisionGroups.get(va.sourceID)};if(da)for(da=0,va=va.sortKeyRanges;da<va.length;da+=1)Ca=va[da],R.push({sortKey:Ca.sortKey,
symbolInstanceStart:Ca.symbolInstanceStart,symbolInstanceEnd:Ca.symbolInstanceEnd,parameters:U});else R.push({symbolInstanceStart:0,symbolInstanceEnd:va.symbolInstances.length,parameters:U})}};Oc.prototype.attemptAnchorPlacement=function(R,X,U,da,va,Ca,Qa,lb,Lb,Rb,dc,Ic,Gc,Xc,$c){var Wc=[Ic.textOffset0,Ic.textOffset1],wd=ia(R,U,da,Wc,va);X=this.collisionIndex.placeCollisionBox(ra(X,wd.x,wd.y,Ca,Qa,this.transform.angle),dc,lb,Lb,Rb.predicate);if((!$c||0!==this.collisionIndex.placeCollisionBox(ra($c,
wd.x,wd.y,Ca,Qa,this.transform.angle),dc,lb,Lb,Rb.predicate).box.length)&&0<X.box.length){if(this.prevPlacement&&this.prevPlacement.variableOffsets[Ic.crossTileID]&&this.prevPlacement.placements[Ic.crossTileID]&&this.prevPlacement.placements[Ic.crossTileID].text)var Qd=this.prevPlacement.variableOffsets[Ic.crossTileID].anchor;this.variableOffsets[Ic.crossTileID]={textOffset:Wc,width:U,height:da,anchor:R,textBoxScale:va,prevAnchor:Qd};this.markUsedJustification(Gc,R,Ic,Xc);Gc.allowVerticalPlacement&&
(this.markUsedOrientation(Gc,Xc,Ic),this.placedOrientations[Ic.crossTileID]=Xc);return{shift:wd,placedGlyphBoxes:X}}};Oc.prototype.placeLayerBucketPart=function(R,X,U){var da=this,va=R.parameters,Ca=va.bucket,Qa=va.layout,lb=va.posMatrix,Lb=va.textLabelPlaneMatrix,Rb=va.labelToScreenMatrix,dc=va.textPixelRatio,Ic=va.holdingForFade,Gc=va.collisionBoxArray,Xc=va.partiallyEvaluatedTextSize,$c=va.collisionGroup,Wc=Qa.get("text-optional"),wd=Qa.get("icon-optional"),Qd=Qa.get("text-allow-overlap"),yd=Qa.get("icon-allow-overlap"),
ge="map"===Qa.get("text-rotation-alignment"),be="map"===Qa.get("text-pitch-alignment"),ke="none"!==Qa.get("icon-text-fit");va="viewport-y"===Qa.get("symbol-z-order");var re=Qd&&(yd||!Ca.hasIconData()||wd),ne=yd&&(Qd||!Ca.hasTextData()||Wc);!Ca.collisionArrays&&Gc&&Ca.deserializeCollisionBoxes(Gc);Gc=function(we,kf){if(!X[we.crossTileID])if(Ic)da.placements[we.crossTileID]=new Bc(!1,!1,!1);else{var Ne=!1,xf=!1,wf=!0,lg=null,Cf={box:null,offscreen:null},Dg={box:null,offscreen:null},ef=null,hg=null,
ca=null,ua=0,Ba=0,Da=0;kf.textFeatureIndex?ua=kf.textFeatureIndex:we.useRuntimeCollisionCircles&&(ua=we.featureIndex);kf.verticalTextFeatureIndex&&(Ba=kf.verticalTextFeatureIndex);var Ma=kf.textBox;if(Ma)if(ef=function(Tb){var mc=a.WritingMode.horizontal;Ca.allowVerticalPlacement&&!Tb&&da.prevPlacement&&(Tb=da.prevPlacement.placedOrientations[we.crossTileID])&&(mc=da.placedOrientations[we.crossTileID]=Tb,da.markUsedOrientation(Ca,mc,we));return mc},wf=function(Tb,mc){if(Ca.allowVerticalPlacement&&
0<we.numVerticalGlyphVertices&&kf.verticalTextBox)for(var ic=0,Ac=Ca.writingModes;ic<Ac.length&&!(Ac[ic]===a.WritingMode.vertical?Dg=Cf=mc():Cf=Tb(),Cf&&Cf.box&&Cf.box.length);ic+=1);else Cf=Tb()},Qa.get("text-variable-anchor")){var Ua=Qa.get("text-variable-anchor");if(da.prevPlacement&&da.prevPlacement.variableOffsets[we.crossTileID]){var nb=da.prevPlacement.variableOffsets[we.crossTileID];0<Ua.indexOf(nb.anchor)&&(Ua=Ua.filter(function(Tb){return Tb!==nb.anchor}),Ua.unshift(nb.anchor))}var eb=function(Tb,
mc,ic){var Ac=Tb.x2-Tb.x1,Kc=Tb.y2-Tb.y1,Lc=we.textBoxScale;mc=ke&&!yd?mc:null;for(var Qc={box:[],offscreen:!1},od=Qd?2*Ua.length:Ua.length,sd=0;sd<od;++sd){var qd=da.attemptAnchorPlacement(Ua[sd%Ua.length],Tb,Ac,Kc,Lc,ge,be,dc,lb,$c,sd>=Ua.length,we,Ca,ic,mc);if(qd&&(Qc=qd.placedGlyphBoxes)&&Qc.box&&Qc.box.length){Ne=!0;lg=qd.shift;break}}return Qc};wf(function(){return eb(Ma,kf.iconBox,a.WritingMode.horizontal)},function(){var Tb=kf.verticalTextBox,mc=Cf&&Cf.box&&Cf.box.length;return Ca.allowVerticalPlacement&&
!mc&&0<we.numVerticalGlyphVertices&&Tb?eb(Tb,kf.verticalIconBox,a.WritingMode.vertical):{box:null,offscreen:null}});Cf&&(Ne=Cf.box,wf=Cf.offscreen);wf=ef(Cf&&Cf.box);!Ne&&da.prevPlacement&&(ef=da.prevPlacement.variableOffsets[we.crossTileID])&&(da.variableOffsets[we.crossTileID]=ef,da.markUsedJustification(Ca,ef.anchor,we,wf))}else{var db=function(Tb,mc){(Tb=da.collisionIndex.placeCollisionBox(Tb,Qd,dc,lb,$c.predicate))&&Tb.box&&Tb.box.length&&(da.markUsedOrientation(Ca,mc,we),da.placedOrientations[we.crossTileID]=
mc);return Tb};wf(function(){return db(Ma,a.WritingMode.horizontal)},function(){var Tb=kf.verticalTextBox;return Ca.allowVerticalPlacement&&0<we.numVerticalGlyphVertices&&Tb?db(Tb,a.WritingMode.vertical):{box:null,offscreen:null}});ef(Cf&&Cf.box&&Cf.box.length)}Ne=(ef=Cf)&&ef.box&&0<ef.box.length;wf=ef&&ef.offscreen;if(we.useRuntimeCollisionCircles){hg=Ca.text.placedSymbolArray.get(we.centerJustifiedTextSymbolIndex);var wb=a.evaluateSizeForFeature(Ca.textSizeData,Xc,hg),Eb=Qa.get("text-padding");
hg=da.collisionIndex.placeCollisionCircles(Qd,hg,Ca.lineVertexArray,Ca.glyphOffsetArray,wb,lb,Lb,Rb,U,be,$c.predicate,we.collisionCircleDiameter,Eb);Ne=Qd||0<hg.circles.length&&!hg.collisionDetected;wf=wf&&hg.offscreen}kf.iconFeatureIndex&&(Da=kf.iconFeatureIndex);kf.iconBox&&(xf=function(Tb){Tb=ke&&lg?ra(Tb,lg.x,lg.y,ge,be,da.transform.angle):Tb;return da.collisionIndex.placeCollisionBox(Tb,yd,dc,lb,$c.predicate)},ca=Dg&&Dg.box&&Dg.box.length&&kf.verticalIconBox?xf(kf.verticalIconBox):xf(kf.iconBox),
xf=0<ca.box.length,wf=wf&&ca.offscreen);wb=Wc||0===we.numHorizontalGlyphVertices&&0===we.numVerticalGlyphVertices;Eb=wd||0===we.numIconVertices;wb||Eb?Eb?wb||(xf=xf&&Ne):Ne=xf&&Ne:xf=Ne=xf&&Ne;Ne&&ef&&ef.box&&(Dg&&Dg.box&&Ba?da.collisionIndex.insertCollisionBox(ef.box,Qa.get("text-ignore-placement"),Ca.bucketInstanceId,Ba,$c.ID):da.collisionIndex.insertCollisionBox(ef.box,Qa.get("text-ignore-placement"),Ca.bucketInstanceId,ua,$c.ID));xf&&ca&&da.collisionIndex.insertCollisionBox(ca.box,Qa.get("icon-ignore-placement"),
Ca.bucketInstanceId,Da,$c.ID);if(hg&&(Ne&&da.collisionIndex.insertCollisionCircles(hg.circles,Qa.get("text-ignore-placement"),Ca.bucketInstanceId,ua,$c.ID),U))for(Ba=Ca.bucketInstanceId,ua=da.collisionCircleArrays[Ba],void 0===ua&&(ua=da.collisionCircleArrays[Ba]=new Yc),Ba=0;Ba<hg.circles.length;Ba+=4)ua.circles.push(hg.circles[Ba+0]),ua.circles.push(hg.circles[Ba+1]),ua.circles.push(hg.circles[Ba+2]),ua.circles.push(hg.collisionDetected?1:0);da.placements[we.crossTileID]=new Bc(Ne||re,xf||ne,wf||
Ca.justReloaded);X[we.crossTileID]=!0}};if(va)for(R=Ca.getSortedSymbolIndexes(this.transform.angle),va=R.length-1;0<=va;--va){var Le=R[va];Gc(Ca.symbolInstances.get(Le),Ca.collisionArrays[Le])}else for(va=R.symbolInstanceStart;va<R.symbolInstanceEnd;va++)Gc(Ca.symbolInstances.get(va),Ca.collisionArrays[va]);U&&Ca.bucketInstanceId in this.collisionCircleArrays&&(Gc=this.collisionCircleArrays[Ca.bucketInstanceId],a.invert(Gc.invProjMatrix,lb),Gc.viewportMatrix=this.collisionIndex.getViewportMatrix());
Ca.justReloaded=!1};Oc.prototype.markUsedJustification=function(R,X,U,da){var va={left:U.leftJustifiedTextSymbolIndex,center:U.centerJustifiedTextSymbolIndex,right:U.rightJustifiedTextSymbolIndex};X=da===a.WritingMode.vertical?U.verticalPlacedTextSymbolIndex:va[a.getAnchorJustification(X)];da=0;for(va=[U.leftJustifiedTextSymbolIndex,U.centerJustifiedTextSymbolIndex,U.rightJustifiedTextSymbolIndex,U.verticalPlacedTextSymbolIndex];da<va.length;da+=1){var Ca=va[da];0<=Ca&&(0<=X&&Ca!==X?R.text.placedSymbolArray.get(Ca).crossTileID=
0:R.text.placedSymbolArray.get(Ca).crossTileID=U.crossTileID)}};Oc.prototype.markUsedOrientation=function(R,X,U){var da=X===a.WritingMode.horizontal||X===a.WritingMode.horizontalOnly?X:0;X=X===a.WritingMode.vertical?X:0;for(var va=0,Ca=[U.leftJustifiedTextSymbolIndex,U.centerJustifiedTextSymbolIndex,U.rightJustifiedTextSymbolIndex];va<Ca.length;va+=1)R.text.placedSymbolArray.get(Ca[va]).placedOrientation=da;U.verticalPlacedTextSymbolIndex&&(R.text.placedSymbolArray.get(U.verticalPlacedTextSymbolIndex).placedOrientation=
X)};Oc.prototype.commit=function(R){this.commitTime=R;this.zoomAtLastRecencyCheck=this.transform.zoom;var X=this.prevPlacement,U=!1;this.prevZoomAdjustment=X?X.zoomAdjustment(this.transform.zoom):0;var da=X?X.symbolFadeChange(R):1,va=X?X.opacities:{},Ca=X?X.variableOffsets:{},Qa=X?X.placedOrientations:{};for(dc in this.placements){var lb=this.placements[dc],Lb=va[dc];Lb?(this.opacities[dc]=new Yb(Lb,da,lb.text,lb.icon),U=U||lb.text!==Lb.text.placed||lb.icon!==Lb.icon.placed):(this.opacities[dc]=new Yb(null,
da,lb.text,lb.icon,lb.skipFade),U=U||lb.text||lb.icon)}for(var Rb in va){var dc=va[Rb];this.opacities[Rb]||(lb=new Yb(dc,da,!1,!1),lb.isHidden()||(this.opacities[Rb]=lb,U=U||dc.text.placed||dc.icon.placed))}for(var Ic in Ca)this.variableOffsets[Ic]||!this.opacities[Ic]||this.opacities[Ic].isHidden()||(this.variableOffsets[Ic]=Ca[Ic]);for(var Gc in Qa)this.placedOrientations[Gc]||!this.opacities[Gc]||this.opacities[Gc].isHidden()||(this.placedOrientations[Gc]=Qa[Gc]);U?this.lastPlacementChangeTime=
R:"number"!==typeof this.lastPlacementChangeTime&&(this.lastPlacementChangeTime=X?X.lastPlacementChangeTime:R)};Oc.prototype.updateLayerOpacities=function(R,X){for(var U={},da=0;da<X.length;da+=1){var va=X[da],Ca=va.getBucket(R);Ca&&va.latestFeatureIndex&&R.id===Ca.layerIds[0]&&this.updateBucketOpacities(Ca,U,va.collisionBoxArray)}};Oc.prototype.updateBucketOpacities=function(R,X,U){var da=this;R.hasTextData()&&R.text.opacityVertexArray.clear();R.hasIconData()&&R.icon.opacityVertexArray.clear();R.hasIconCollisionBoxData()&&
R.iconCollisionBox.collisionVertexArray.clear();R.hasTextCollisionBoxData()&&R.textCollisionBox.collisionVertexArray.clear();var va=R.layers[0].layout,Ca=new Yb(null,0,!1,!1,!0),Qa=va.get("text-allow-overlap"),lb=va.get("icon-allow-overlap"),Lb=va.get("text-variable-anchor"),Rb="map"===va.get("text-rotation-alignment"),dc="map"===va.get("text-pitch-alignment"),Ic="none"!==va.get("icon-text-fit"),Gc=new Yb(null,0,Qa&&(lb||!R.hasIconData()||va.get("icon-optional")),lb&&(Qa||!R.hasTextData()||va.get("text-optional")),
!0);!R.collisionArrays&&U&&(R.hasIconCollisionBoxData()||R.hasTextCollisionBoxData())&&R.deserializeCollisionBoxes(U);var Xc=function($c,Wc,wd){for(var Qd=0;Qd<Wc/4;Qd++)$c.opacityVertexArray.emplaceBack(wd)};U=function($c){var Wc=R.symbolInstances.get($c),wd=Wc.numHorizontalGlyphVertices,Qd=Wc.numVerticalGlyphVertices,yd=Wc.crossTileID,ge=da.opacities[yd];X[yd]?ge=Ca:ge||(ge=Gc,da.opacities[yd]=ge);X[yd]=!0;var be=0<Wc.numIconVertices,ke=da.placedOrientations[Wc.crossTileID],re=ke===a.WritingMode.vertical,
ne=ke===a.WritingMode.horizontal||ke===a.WritingMode.horizontalOnly;if(0<wd||0<Qd){var Le=pa(ge.text);Xc(R.text,wd,re?Xd:Le);Xc(R.text,Qd,ne?Xd:Le);var we=ge.text.isHidden();[Wc.rightJustifiedTextSymbolIndex,Wc.centerJustifiedTextSymbolIndex,Wc.leftJustifiedTextSymbolIndex].forEach(function(kf){0<=kf&&(R.text.placedSymbolArray.get(kf).hidden=we||re?1:0)});0<=Wc.verticalPlacedTextSymbolIndex&&(R.text.placedSymbolArray.get(Wc.verticalPlacedTextSymbolIndex).hidden=we||ne?1:0);(wd=da.variableOffsets[Wc.crossTileID])&&
da.markUsedJustification(R,wd.anchor,Wc,ke);if(ke=da.placedOrientations[Wc.crossTileID])da.markUsedJustification(R,"left",Wc,ke),da.markUsedOrientation(R,ke,Wc)}be&&(be=pa(ge.icon),ke=!(Ic&&Wc.verticalPlacedIconSymbolIndex&&re),0<=Wc.placedIconSymbolIndex&&(Xc(R.icon,Wc.numIconVertices,ke?be:Xd),R.icon.placedSymbolArray.get(Wc.placedIconSymbolIndex).hidden=ge.icon.isHidden()),0<=Wc.verticalPlacedIconSymbolIndex&&(Xc(R.icon,Wc.numVerticalIconVertices,ke?Xd:be),R.icon.placedSymbolArray.get(Wc.verticalPlacedIconSymbolIndex).hidden=
ge.icon.isHidden()));if(R.hasIconCollisionBoxData()||R.hasTextCollisionBoxData())if($c=R.collisionArrays[$c]){Wc=new a.Point(0,0);if($c.textBox||$c.verticalTextBox)be=!0,Lb&&((yd=da.variableOffsets[yd])?(Wc=ia(yd.anchor,yd.width,yd.height,yd.textOffset,yd.textBoxScale),Rb&&Wc._rotate(dc?da.transform.angle:-da.transform.angle)):be=!1),$c.textBox&&wa(R.textCollisionBox.collisionVertexArray,ge.text.placed,!be||re,Wc.x,Wc.y),$c.verticalTextBox&&wa(R.textCollisionBox.collisionVertexArray,ge.text.placed,
!be||ne,Wc.x,Wc.y);ne=!(ne||!$c.verticalIconBox);$c.iconBox&&wa(R.iconCollisionBox.collisionVertexArray,ge.icon.placed,ne,Ic?Wc.x:0,Ic?Wc.y:0);$c.verticalIconBox&&wa(R.iconCollisionBox.collisionVertexArray,ge.icon.placed,!ne,Ic?Wc.x:0,Ic?Wc.y:0)}};for(va=0;va<R.symbolInstances.length;va++)U(va);R.sortFeatures(this.transform.angle);this.retainedQueryData[R.bucketInstanceId]&&(this.retainedQueryData[R.bucketInstanceId].featureSortOrder=R.featureSortOrder);R.hasTextData()&&R.text.opacityVertexBuffer&&
R.text.opacityVertexBuffer.updateData(R.text.opacityVertexArray);R.hasIconData()&&R.icon.opacityVertexBuffer&&R.icon.opacityVertexBuffer.updateData(R.icon.opacityVertexArray);R.hasIconCollisionBoxData()&&R.iconCollisionBox.collisionVertexBuffer&&R.iconCollisionBox.collisionVertexBuffer.updateData(R.iconCollisionBox.collisionVertexArray);R.hasTextCollisionBoxData()&&R.textCollisionBox.collisionVertexBuffer&&R.textCollisionBox.collisionVertexBuffer.updateData(R.textCollisionBox.collisionVertexArray);
R.bucketInstanceId in this.collisionCircleArrays&&(U=this.collisionCircleArrays[R.bucketInstanceId],R.placementInvProjMatrix=U.invProjMatrix,R.placementViewportMatrix=U.viewportMatrix,R.collisionCircleArray=U.circles,delete this.collisionCircleArrays[R.bucketInstanceId])};Oc.prototype.symbolFadeChange=function(R){return 0===this.fadeDuration?1:(R-this.commitTime)/this.fadeDuration+this.prevZoomAdjustment};Oc.prototype.zoomAdjustment=function(R){return Math.max(0,(this.transform.zoom-R)/1.5)};Oc.prototype.hasTransitions=
function(R){return this.stale||R-this.lastPlacementChangeTime<this.fadeDuration};Oc.prototype.stillRecent=function(R,X){var U=this.zoomAtLastRecencyCheck===X?1-this.zoomAdjustment(X):1;this.zoomAtLastRecencyCheck=X;return this.commitTime+this.fadeDuration*U>R};Oc.prototype.setStale=function(){this.stale=!0};var wc=Math.pow(2,25),rc=Math.pow(2,24),pc=Math.pow(2,17),ud=Math.pow(2,16),ae=Math.pow(2,9),Wd=Math.pow(2,8),Ce=Math.pow(2,1),Xd=0,bf=function(R){this._sortAcrossTiles="viewport-y"!==R.layout.get("symbol-z-order")&&
void 0!==R.layout.get("symbol-sort-key").constantOr(1);this._currentPartIndex=this._currentTileIndex=0;this._seenCrossTileIDs={};this._bucketParts=[]};bf.prototype.continuePlacement=function(R,X,U,da,va){for(var Ca=this._bucketParts;this._currentTileIndex<R.length;)if(X.getBucketParts(Ca,da,R[this._currentTileIndex],this._sortAcrossTiles),this._currentTileIndex++,va())return!0;this._sortAcrossTiles&&(this._sortAcrossTiles=!1,Ca.sort(function(Qa,lb){return Qa.sortKey-lb.sortKey}));for(;this._currentPartIndex<
Ca.length;)if(X.placeLayerBucketPart(Ca[this._currentPartIndex],this._seenCrossTileIDs,U),this._currentPartIndex++,va())return!0;return!1};var Ve=function(R,X,U,da,va,Ca,Qa){this.placement=new Oc(R,va,Ca,Qa);this._currentPlacementIndex=X.length-1;this._forceFullPlacement=U;this._showCollisionBoxes=da;this._done=!1};Ve.prototype.isDone=function(){return this._done};Ve.prototype.continuePlacement=function(R,X,U){for(var da=this,va=a.browser.now(),Ca=function(){var Lb=a.browser.now()-va;return da._forceFullPlacement?
!1:2<Lb};0<=this._currentPlacementIndex;){var Qa=X[R[this._currentPlacementIndex]],lb=this.placement.collisionIndex.transform.zoom;if("symbol"===Qa.type&&(!Qa.minzoom||Qa.minzoom<=lb)&&(!Qa.maxzoom||Qa.maxzoom>lb)){this._inProgressLayer||(this._inProgressLayer=new bf(Qa));if(this._inProgressLayer.continuePlacement(U[Qa.source],this.placement,this._showCollisionBoxes,Qa,Ca))return;delete this._inProgressLayer}this._currentPlacementIndex--}this._done=!0};Ve.prototype.commit=function(R){this.placement.commit(R);
return this.placement};var vf=512/a.EXTENT/2,Oe=function(R,X,U){this.tileID=R;this.indexedSymbolInstances={};this.bucketInstanceId=U;for(U=0;U<X.length;U++){var da=X.get(U),va=da.key;this.indexedSymbolInstances[va]||(this.indexedSymbolInstances[va]=[]);this.indexedSymbolInstances[va].push({crossTileID:da.crossTileID,coord:this.getScaledCoordinates(da,R)})}};Oe.prototype.getScaledCoordinates=function(R,X){var U=vf/Math.pow(2,X.canonical.z-this.tileID.canonical.z);return{x:Math.floor((X.canonical.x*
a.EXTENT+R.anchorX)*U),y:Math.floor((X.canonical.y*a.EXTENT+R.anchorY)*U)}};Oe.prototype.findMatches=function(R,X,U){for(var da=this.tileID.canonical.z<X.canonical.z?1:Math.pow(2,this.tileID.canonical.z-X.canonical.z),va=0;va<R.length;va++){var Ca=R.get(va);if(!Ca.crossTileID){var Qa=this.indexedSymbolInstances[Ca.key];if(Qa)for(var lb=this.getScaledCoordinates(Ca,X),Lb=0;Lb<Qa.length;Lb+=1){var Rb=Qa[Lb];if(Math.abs(Rb.coord.x-lb.x)<=da&&Math.abs(Rb.coord.y-lb.y)<=da&&!U[Rb.crossTileID]){U[Rb.crossTileID]=
!0;Ca.crossTileID=Rb.crossTileID;break}}}}};var Mf=function(){this.maxCrossTileID=0};Mf.prototype.generate=function(){return++this.maxCrossTileID};var ng=function(){this.indexes={};this.usedCrossTileIDs={};this.lng=0};ng.prototype.handleWrapJump=function(R){var X=Math.round((R-this.lng)/360);if(0!==X)for(var U in this.indexes){var da=this.indexes[U],va={},Ca;for(Ca in da){var Qa=da[Ca];Qa.tileID=Qa.tileID.unwrapTo(Qa.tileID.wrap+X);va[Qa.tileID.key]=Qa}this.indexes[U]=va}this.lng=R};ng.prototype.addBucket=
function(R,X,U){if(this.indexes[R.overscaledZ]&&this.indexes[R.overscaledZ][R.key]){if(this.indexes[R.overscaledZ][R.key].bucketInstanceId===X.bucketInstanceId)return!1;this.removeBucketCrossTileIDs(R.overscaledZ,this.indexes[R.overscaledZ][R.key])}for(var da=0;da<X.symbolInstances.length;da++)X.symbolInstances.get(da).crossTileID=0;this.usedCrossTileIDs[R.overscaledZ]||(this.usedCrossTileIDs[R.overscaledZ]={});da=this.usedCrossTileIDs[R.overscaledZ];for(var va in this.indexes){var Ca=this.indexes[va];
if(Number(va)>R.overscaledZ)for(var Qa in Ca){var lb=Ca[Qa];lb.tileID.isChildOf(R)&&lb.findMatches(X.symbolInstances,R,da)}else lb=R.scaledTo(Number(va)),(Ca=Ca[lb.key])&&Ca.findMatches(X.symbolInstances,R,da)}for(va=0;va<X.symbolInstances.length;va++)Qa=X.symbolInstances.get(va),Qa.crossTileID||(Qa.crossTileID=U.generate(),da[Qa.crossTileID]=!0);void 0===this.indexes[R.overscaledZ]&&(this.indexes[R.overscaledZ]={});this.indexes[R.overscaledZ][R.key]=new Oe(R,X.symbolInstances,X.bucketInstanceId);
return!0};ng.prototype.removeBucketCrossTileIDs=function(R,X){for(var U in X.indexedSymbolInstances)for(var da=0,va=X.indexedSymbolInstances[U];da<va.length;da+=1)delete this.usedCrossTileIDs[R][va[da].crossTileID]};ng.prototype.removeStaleBuckets=function(R){var X=!1,U;for(U in this.indexes){var da=this.indexes[U],va;for(va in da)R[da[va].bucketInstanceId]||(this.removeBucketCrossTileIDs(U,da[va]),delete da[va],X=!0)}return X};var Sg=function(){this.layerIndexes={};this.crossTileIDs=new Mf;this.maxBucketInstanceId=
0;this.bucketsInCurrentPlacement={}};Sg.prototype.addLayer=function(R,X,U){var da=this.layerIndexes[R.id];void 0===da&&(da=this.layerIndexes[R.id]=new ng);var va=!1,Ca={};da.handleWrapJump(U);for(U=0;U<X.length;U+=1){var Qa=X[U],lb=Qa.getBucket(R);lb&&R.id===lb.layerIds[0]&&(lb.bucketInstanceId||(lb.bucketInstanceId=++this.maxBucketInstanceId),da.addBucket(Qa.tileID,lb,this.crossTileIDs)&&(va=!0),Ca[lb.bucketInstanceId]=!0)}da.removeStaleBuckets(Ca)&&(va=!0);return va};Sg.prototype.pruneUnusedLayers=
function(R){var X={};R.forEach(function(da){X[da]=!0});for(var U in this.layerIndexes)X[U]||delete this.layerIndexes[U]};var Og=function(R,X){return a.emitValidationErrors(R,X&&X.filter(function(U){return"source.canvas"!==U.identifier}))},Ah=a.pick(Hd,"addLayer removeLayer setPaintProperty setLayoutProperty setFilter addSource removeSource setLayerZoomRange setLight setTransition setGeoJSONSourceData".split(" ")),Kh=a.pick(Hd,["setCenter","setZoom","setBearing","setPitch"]),rh=function(){var R={},
X=a.styleSpec.$version,U;for(U in a.styleSpec.$root){var da=a.styleSpec.$root[U];da.required&&(da="version"===U?X:"array"===da.type?[]:{},null!=da&&(R[U]=da))}return R}(),Yg=function(R){function X(U,da){var va=this;void 0===da&&(da={});R.call(this);this.map=U;this.dispatcher=new $b(v(),this);this.imageManager=new Jc;this.imageManager.setEventedParent(this);this.glyphManager=new Ia(U._requestManager,da.localIdeographFontFamily);this.lineAtlas=new Hb(256,512);this.crossTileSymbolIndex=new Sg;this._layers=
{};this._serializedLayers={};this._order=[];this.sourceCaches={};this.zoomHistory=new a.ZoomHistory;this._loaded=!1;this._availableImages=[];this._resetUpdates();this.dispatcher.broadcast("setReferrer",a.getReferrer());var Ca=this;this._rtlTextPluginCallback=X.registerForPluginStateChange(function(Qa){Ca.dispatcher.broadcast("syncRTLPluginState",{pluginStatus:Qa.pluginStatus,pluginURL:Qa.pluginURL},function(lb,Lb){a.triggerPluginCompletionEvent(lb);if(Lb&&Lb.every(function(dc){return dc}))for(var Rb in Ca.sourceCaches)Ca.sourceCaches[Rb].reload()})});
this.on("data",function(Qa){if("source"===Qa.dataType&&"metadata"===Qa.sourceDataType&&(Qa=va.sourceCaches[Qa.sourceId])&&(Qa=Qa.getSource())&&Qa.vectorLayerIds)for(var lb in va._layers){var Lb=va._layers[lb];Lb.source===Qa.id&&va._validateLayer(Lb)}})}R&&(X.__proto__=R);X.prototype=Object.create(R&&R.prototype);X.prototype.constructor=X;X.prototype.loadURL=function(U,da){var va=this;void 0===da&&(da={});this.fire(new a.Event("dataloading",{dataType:"style"}));var Ca="boolean"===typeof da.validate?
da.validate:!a.isMapboxURL(U);U=this.map._requestManager.normalizeStyleURL(U,da.accessToken);U=this.map._requestManager.transformRequest(U,a.ResourceType.Style);this._request=a.getJSON(U,function(Qa,lb){va._request=null;Qa?va.fire(new a.ErrorEvent(Qa)):lb&&va._load(lb,Ca)})};X.prototype.loadJSON=function(U,da){var va=this;void 0===da&&(da={});this.fire(new a.Event("dataloading",{dataType:"style"}));this._request=a.browser.frame(function(){va._request=null;va._load(U,!1!==da.validate)})};X.prototype.loadEmpty=
function(){this.fire(new a.Event("dataloading",{dataType:"style"}));this._load(rh,!1)};X.prototype._load=function(U,da){if(!da||!Og(this,a.validateStyle(U))){this._loaded=!0;this.stylesheet=U;for(var va in U.sources)this.addSource(va,U.sources[va],{validate:!1});U.sprite?this._loadSprite(U.sprite):this.imageManager.setLoaded(!0);this.glyphManager.setURL(U.glyphs);U=F(this.stylesheet.layers);this._order=U.map(function(Ca){return Ca.id});this._layers={};this._serializedLayers={};for(da=0;da<U.length;da+=
1)va=U[da],va=a.createStyleLayer(va),va.setEventedParent(this,{layer:{id:va.id}}),this._layers[va.id]=va,this._serializedLayers[va.id]=va.serialize();this.dispatcher.broadcast("setLayers",this._serializeLayers(this._order));this.light=new Gb(this.stylesheet.light);this.fire(new a.Event("data",{dataType:"style"}));this.fire(new a.Event("style.load"))}};X.prototype._loadSprite=function(U){var da=this;this._spriteRequest=h(U,this.map._requestManager,function(va,Ca){da._spriteRequest=null;if(va)da.fire(new a.ErrorEvent(va));
else if(Ca)for(var Qa in Ca)da.imageManager.addImage(Qa,Ca[Qa]);da.imageManager.setLoaded(!0);da._availableImages=da.imageManager.listImages();da.dispatcher.broadcast("setImages",da._availableImages);da.fire(new a.Event("data",{dataType:"style"}))})};X.prototype._validateLayer=function(U){var da=this.sourceCaches[U.source];if(da){var va=U.sourceLayer;va&&(da=da.getSource(),("geojson"===da.type||da.vectorLayerIds&&-1===da.vectorLayerIds.indexOf(va))&&this.fire(new a.ErrorEvent(Error('Source layer "'+
va+'" does not exist on source "'+da.id+'" as specified by style layer "'+U.id+'"'))))}};X.prototype.loaded=function(){if(!this._loaded||Object.keys(this._updatedSources).length)return!1;for(var U in this.sourceCaches)if(!this.sourceCaches[U].loaded())return!1;return this.imageManager.isLoaded()?!0:!1};X.prototype._serializeLayers=function(U){for(var da=[],va=0;va<U.length;va+=1){var Ca=this._layers[U[va]];"custom"!==Ca.type&&da.push(Ca.serialize())}return da};X.prototype.hasTransitions=function(){if(this.light&&
this.light.hasTransition())return!0;for(var U in this.sourceCaches)if(this.sourceCaches[U].hasTransition())return!0;for(var da in this._layers)if(this._layers[da].hasTransition())return!0;return!1};X.prototype._checkLoaded=function(){if(!this._loaded)throw Error("Style is not done loading");};X.prototype.update=function(U){if(this._loaded){var da=this._changed;if(this._changed){var va=Object.keys(this._updatedLayers),Ca=Object.keys(this._removedLayers);(va.length||Ca.length)&&this._updateWorkerLayers(va,
Ca);for(var Qa in this._updatedSources)va=this._updatedSources[Qa],"reload"===va?this._reloadSource(Qa):"clear"===va&&this._clearSource(Qa);this._updateTilesForChangedImages();for(var lb in this._updatedPaintProps)this._layers[lb].updateTransitions(U);this.light.updateTransitions(U);this._resetUpdates()}for(var Lb in this.sourceCaches)this.sourceCaches[Lb].used=!1;Qa=0;for(lb=this._order;Qa<lb.length;Qa+=1)Lb=this._layers[lb[Qa]],Lb.recalculate(U,this._availableImages),!Lb.isHidden(U.zoom)&&Lb.source&&
(this.sourceCaches[Lb.source].used=!0);this.light.recalculate(U);this.z=U.zoom;da&&this.fire(new a.Event("data",{dataType:"style"}))}};X.prototype._updateTilesForChangedImages=function(){var U=Object.keys(this._changedImages);if(U.length){for(var da in this.sourceCaches)this.sourceCaches[da].reloadTilesForDependencies(["icons","patterns"],U);this._changedImages={}}};X.prototype._updateWorkerLayers=function(U,da){this.dispatcher.broadcast("updateLayers",{layers:this._serializeLayers(U),removedIds:da})};
X.prototype._resetUpdates=function(){this._changed=!1;this._updatedLayers={};this._removedLayers={};this._updatedSources={};this._updatedPaintProps={};this._changedImages={}};X.prototype.setState=function(U){var da=this;this._checkLoaded();if(Og(this,a.validateStyle(U)))return!1;U=a.clone$1(U);U.layers=F(U.layers);var va=I(this.serialize(),U).filter(function(Qa){return!(Qa.command in Kh)});if(0===va.length)return!1;var Ca=va.filter(function(Qa){return!(Qa.command in Ah)});if(0<Ca.length)throw Error("Unimplemented: "+
Ca.map(function(Qa){return Qa.command}).join(", ")+".");va.forEach(function(Qa){"setTransition"!==Qa.command&&da[Qa.command].apply(da,Qa.args)});this.stylesheet=U;return!0};X.prototype.addImage=function(U,da){if(this.getImage(U))return this.fire(new a.ErrorEvent(Error("An image with this name already exists.")));this.imageManager.addImage(U,da);this._availableImages=this.imageManager.listImages();this._changed=this._changedImages[U]=!0;this.fire(new a.Event("data",{dataType:"style"}))};X.prototype.updateImage=
function(U,da){this.imageManager.updateImage(U,da)};X.prototype.getImage=function(U){return this.imageManager.getImage(U)};X.prototype.removeImage=function(U){if(!this.getImage(U))return this.fire(new a.ErrorEvent(Error("No image with this name exists.")));this.imageManager.removeImage(U);this._availableImages=this.imageManager.listImages();this._changed=this._changedImages[U]=!0;this.fire(new a.Event("data",{dataType:"style"}))};X.prototype.listImages=function(){this._checkLoaded();return this.imageManager.listImages()};
X.prototype.addSource=function(U,da,va){var Ca=this;void 0===va&&(va={});this._checkLoaded();if(void 0!==this.sourceCaches[U])throw Error("There is already a source with this ID");if(!da.type)throw Error("The type property must be defined, but the only the following properties were given: "+Object.keys(da).join(", ")+".");if(!(0<=["vector","raster","geojson","video","image"].indexOf(da.type)&&this._validate(a.validateStyle.source,"sources."+U,da,null,va))){this.map&&this.map._collectResourceTiming&&
(da.collectResourceTiming=!0);var Qa=this.sourceCaches[U]=new Fd(U,da,this.dispatcher);Qa.style=this;Qa.setEventedParent(this,function(){return{isSourceLoaded:Ca.loaded(),source:Qa.serialize(),sourceId:U}});Qa.onAdd(this.map);this._changed=!0}};X.prototype.removeSource=function(U){this._checkLoaded();if(void 0===this.sourceCaches[U])throw Error("There is no source with this ID");for(var da in this._layers)if(this._layers[da].source===U)return this.fire(new a.ErrorEvent(Error('Source "'+U+'" cannot be removed while layer "'+
da+'" is using it.')));da=this.sourceCaches[U];delete this.sourceCaches[U];delete this._updatedSources[U];da.fire(new a.Event("data",{sourceDataType:"metadata",dataType:"source",sourceId:U}));da.setEventedParent(null);da.clearTiles();if(da.onRemove)da.onRemove(this.map);this._changed=!0};X.prototype.setGeoJSONSourceData=function(U,da){this._checkLoaded();this.sourceCaches[U].getSource().setData(da);this._changed=!0};X.prototype.getSource=function(U){return this.sourceCaches[U]&&this.sourceCaches[U].getSource()};
X.prototype.addLayer=function(U,da,va){void 0===va&&(va={});this._checkLoaded();var Ca=U.id;if(this.getLayer(Ca))this.fire(new a.ErrorEvent(Error('Layer with id "'+Ca+'" already exists on this map')));else{if("custom"===U.type){if(Og(this,a.validateCustomStyleLayer(U)))return;U=a.createStyleLayer(U)}else{"object"===typeof U.source&&(this.addSource(Ca,U.source),U=a.clone$1(U),U=a.extend(U,{source:Ca}));if(this._validate(a.validateStyle.layer,"layers."+Ca,U,{arrayIndex:-1},va))return;U=a.createStyleLayer(U);
this._validateLayer(U);U.setEventedParent(this,{layer:{id:Ca}});this._serializedLayers[U.id]=U.serialize()}va=da?this._order.indexOf(da):this._order.length;if(da&&-1===va)this.fire(new a.ErrorEvent(Error('Layer with id "'+da+'" does not exist on this map.')));else if(this._order.splice(va,0,Ca),this._layerOrderChanged=!0,this._layers[Ca]=U,this._removedLayers[Ca]&&U.source&&"custom"!==U.type&&(da=this._removedLayers[Ca],delete this._removedLayers[Ca],da.type!==U.type?this._updatedSources[U.source]=
"clear":(this._updatedSources[U.source]="reload",this.sourceCaches[U.source].pause())),this._updateLayer(U),U.onAdd)U.onAdd(this.map)}};X.prototype.moveLayer=function(U,da){this._checkLoaded();this._changed=!0;if(!this._layers[U])this.fire(new a.ErrorEvent(Error("The layer '"+U+"' does not exist in the map's style and cannot be moved.")));else if(U!==da){var va=this._order.indexOf(U);this._order.splice(va,1);va=da?this._order.indexOf(da):this._order.length;da&&-1===va?this.fire(new a.ErrorEvent(Error('Layer with id "'+
da+'" does not exist on this map.'))):(this._order.splice(va,0,U),this._layerOrderChanged=!0)}};X.prototype.removeLayer=function(U){this._checkLoaded();var da=this._layers[U];if(da){da.setEventedParent(null);var va=this._order.indexOf(U);this._order.splice(va,1);this._changed=this._layerOrderChanged=!0;this._removedLayers[U]=da;delete this._layers[U];delete this._serializedLayers[U];delete this._updatedLayers[U];delete this._updatedPaintProps[U];if(da.onRemove)da.onRemove(this.map)}else this.fire(new a.ErrorEvent(Error("The layer '"+
U+"' does not exist in the map's style and cannot be removed.")))};X.prototype.getLayer=function(U){return this._layers[U]};X.prototype.hasLayer=function(U){return U in this._layers};X.prototype.setLayerZoomRange=function(U,da,va){this._checkLoaded();var Ca=this.getLayer(U);if(!Ca)this.fire(new a.ErrorEvent(Error("The layer '"+U+"' does not exist in the map's style and cannot have zoom extent.")));else if(Ca.minzoom!==da||Ca.maxzoom!==va)null!=da&&(Ca.minzoom=da),null!=va&&(Ca.maxzoom=va),this._updateLayer(Ca)};
X.prototype.setFilter=function(U,da,va){void 0===va&&(va={});this._checkLoaded();var Ca=this.getLayer(U);Ca?a.deepEqual(Ca.filter,da)||(null===da||void 0===da?(Ca.filter=void 0,this._updateLayer(Ca)):this._validate(a.validateStyle.filter,"layers."+Ca.id+".filter",da,null,va)||(Ca.filter=a.clone$1(da),this._updateLayer(Ca))):this.fire(new a.ErrorEvent(Error("The layer '"+U+"' does not exist in the map's style and cannot be filtered.")))};X.prototype.getFilter=function(U){return a.clone$1(this.getLayer(U).filter)};
X.prototype.setLayoutProperty=function(U,da,va,Ca){void 0===Ca&&(Ca={});this._checkLoaded();var Qa=this.getLayer(U);Qa?a.deepEqual(Qa.getLayoutProperty(da),va)||(Qa.setLayoutProperty(da,va,Ca),this._updateLayer(Qa)):this.fire(new a.ErrorEvent(Error("The layer '"+U+"' does not exist in the map's style and cannot be styled.")))};X.prototype.getLayoutProperty=function(U,da){var va=this.getLayer(U);if(va)return va.getLayoutProperty(da);this.fire(new a.ErrorEvent(Error("The layer '"+U+"' does not exist in the map's style.")))};
X.prototype.setPaintProperty=function(U,da,va,Ca){void 0===Ca&&(Ca={});this._checkLoaded();var Qa=this.getLayer(U);Qa?a.deepEqual(Qa.getPaintProperty(da),va)||(Qa.setPaintProperty(da,va,Ca)&&this._updateLayer(Qa),this._changed=!0,this._updatedPaintProps[U]=!0):this.fire(new a.ErrorEvent(Error("The layer '"+U+"' does not exist in the map's style and cannot be styled.")))};X.prototype.getPaintProperty=function(U,da){return this.getLayer(U).getPaintProperty(da)};X.prototype.setFeatureState=function(U,
da){this._checkLoaded();var va=U.source,Ca=U.sourceLayer,Qa=this.sourceCaches[va];void 0===Qa?this.fire(new a.ErrorEvent(Error("The source '"+va+"' does not exist in the map's style."))):(va=Qa.getSource().type,"geojson"===va&&Ca?this.fire(new a.ErrorEvent(Error("GeoJSON sources cannot have a sourceLayer parameter."))):"vector"!==va||Ca?(void 0===U.id&&this.fire(new a.ErrorEvent(Error("The feature id parameter must be provided."))),Qa.setFeatureState(Ca,U.id,da)):this.fire(new a.ErrorEvent(Error("The sourceLayer parameter must be provided for vector source types."))))};
X.prototype.removeFeatureState=function(U,da){this._checkLoaded();var va=U.source,Ca=this.sourceCaches[va];if(void 0===Ca)this.fire(new a.ErrorEvent(Error("The source '"+va+"' does not exist in the map's style.")));else{va=Ca.getSource().type;var Qa="vector"===va?U.sourceLayer:void 0;"vector"!==va||Qa?da&&"string"!==typeof U.id&&"number"!==typeof U.id?this.fire(new a.ErrorEvent(Error("A feature id is requred to remove its specific state property."))):Ca.removeFeatureState(Qa,U.id,da):this.fire(new a.ErrorEvent(Error("The sourceLayer parameter must be provided for vector source types.")))}};
X.prototype.getFeatureState=function(U){this._checkLoaded();var da=U.source,va=U.sourceLayer,Ca=this.sourceCaches[da];if(void 0===Ca)this.fire(new a.ErrorEvent(Error("The source '"+da+"' does not exist in the map's style.")));else{if("vector"!==Ca.getSource().type||va)return void 0===U.id&&this.fire(new a.ErrorEvent(Error("The feature id parameter must be provided."))),Ca.getFeatureState(va,U.id);this.fire(new a.ErrorEvent(Error("The sourceLayer parameter must be provided for vector source types.")))}};
X.prototype.getTransition=function(){return a.extend({duration:300,delay:0},this.stylesheet&&this.stylesheet.transition)};X.prototype.serialize=function(){return a.filterObject({version:this.stylesheet.version,name:this.stylesheet.name,metadata:this.stylesheet.metadata,light:this.stylesheet.light,center:this.stylesheet.center,zoom:this.stylesheet.zoom,bearing:this.stylesheet.bearing,pitch:this.stylesheet.pitch,sprite:this.stylesheet.sprite,glyphs:this.stylesheet.glyphs,transition:this.stylesheet.transition,
sources:a.mapObject(this.sourceCaches,function(U){return U.serialize()}),layers:this._serializeLayers(this._order)},function(U){return void 0!==U})};X.prototype._updateLayer=function(U){this._updatedLayers[U.id]=!0;U.source&&!this._updatedSources[U.source]&&"raster"!==this.sourceCaches[U.source].getSource().type&&(this._updatedSources[U.source]="reload",this.sourceCaches[U.source].pause());this._changed=!0};X.prototype._flattenAndSortRenderedFeatures=function(U){for(var da={},va=[],Ca=this._order.length-
1;0<=Ca;Ca--){var Qa=this._order[Ca];if("fill-extrusion"===this._layers[Qa].type){da[Qa]=Ca;for(var lb=0,Lb=U;lb<Lb.length;lb+=1){var Rb=Lb[lb][Qa];if(Rb)for(var dc=0;dc<Rb.length;dc+=1)va.push(Rb[dc])}}}va.sort(function(Gc,Xc){return Xc.intersectionZ-Gc.intersectionZ});Ca=[];for(Qa=this._order.length-1;0<=Qa;Qa--)if(lb=this._order[Qa],"fill-extrusion"===this._layers[lb].type)for(lb=va.length-1;0<=lb;lb--){Lb=va[lb].feature;if(da[Lb.layer.id]<Qa)break;Ca.push(Lb);va.pop()}else for(Lb=0,dc=U;Lb<dc.length;Lb+=
1){var Ic=dc[Lb][lb];if(Ic)for(Rb=0;Rb<Ic.length;Rb+=1)Ca.push(Ic[Rb].feature)}return Ca};X.prototype.queryRenderedFeatures=function(U,da,va){da&&da.filter&&this._validate(a.validateStyle.filter,"queryRenderedFeatures.filter",da.filter,null,da);var Ca={};if(da&&da.layers){if(!Array.isArray(da.layers))return this.fire(new a.ErrorEvent(Error("parameters.layers must be an Array."))),[];for(var Qa=0,lb=da.layers;Qa<lb.length;Qa+=1){var Lb=lb[Qa],Rb=this._layers[Lb];if(!Rb)return this.fire(new a.ErrorEvent(Error("The layer '"+
Lb+"' does not exist in the map's style and cannot be queried for features."))),[];Ca[Rb.source]=!0}}Qa=[];da.availableImages=this._availableImages;for(var dc in this.sourceCaches)da.layers&&!Ca[dc]||Qa.push(t(this.sourceCaches[dc],this._layers,this._serializedLayers,U,da,va));this.placement&&Qa.push(w(this._layers,this._serializedLayers,this.sourceCaches,U,da,this.placement.collisionIndex,this.placement.retainedQueryData));return this._flattenAndSortRenderedFeatures(Qa)};X.prototype.querySourceFeatures=
function(U,da){da&&da.filter&&this._validate(a.validateStyle.filter,"querySourceFeatures.filter",da.filter,null,da);return(U=this.sourceCaches[U])?x(U,da):[]};X.prototype.addSourceType=function(U,da,va){if(X.getSourceType(U))return va(Error('A source type called "'+U+'" already exists.'));X.setSourceType(U,da);if(!da.workerSourceURL)return va(null,null);this.dispatcher.broadcast("loadWorkerSource",{name:U,url:da.workerSourceURL},va)};X.prototype.getLight=function(){return this.light.getLight()};X.prototype.setLight=
function(U,da){void 0===da&&(da={});this._checkLoaded();var va=this.light.getLight(),Ca=!1,Qa;for(Qa in U)if(!a.deepEqual(U[Qa],va[Qa])){Ca=!0;break}Ca&&(va={now:a.browser.now(),transition:a.extend({duration:300,delay:0},this.stylesheet.transition)},this.light.setLight(U,da),this.light.updateTransitions(va))};X.prototype._validate=function(U,da,va,Ca,Qa){void 0===Qa&&(Qa={});return Qa&&!1===Qa.validate?!1:Og(this,U.call(a.validateStyle,a.extend({key:da,style:this.serialize(),value:va,styleSpec:a.styleSpec},
Ca)))};X.prototype._remove=function(){this._request&&(this._request.cancel(),this._request=null);this._spriteRequest&&(this._spriteRequest.cancel(),this._spriteRequest=null);a.evented.off("pluginStateChange",this._rtlTextPluginCallback);for(var U in this._layers)this._layers[U].setEventedParent(null);for(var da in this.sourceCaches)this.sourceCaches[da].clearTiles(),this.sourceCaches[da].setEventedParent(null);this.imageManager.setEventedParent(null);this.setEventedParent(null);this.dispatcher.remove()};
X.prototype._clearSource=function(U){this.sourceCaches[U].clearTiles()};X.prototype._reloadSource=function(U){this.sourceCaches[U].resume();this.sourceCaches[U].reload()};X.prototype._updateSources=function(U){for(var da in this.sourceCaches)this.sourceCaches[da].update(U)};X.prototype._generateCollisionBoxes=function(){for(var U in this.sourceCaches)this._reloadSource(U)};X.prototype._updatePlacement=function(U,da,va,Ca,Qa){void 0===Qa&&(Qa=!1);for(var lb=!1,Lb=!1,Rb={},dc=0,Ic=this._order;dc<Ic.length;dc+=
1){var Gc=this._layers[Ic[dc]];if("symbol"===Gc.type){if(!Rb[Gc.source]){var Xc=this.sourceCaches[Gc.source];Rb[Gc.source]=Xc.getRenderableIds(!0).map(function($c){return Xc.getTileByID($c)}).sort(function($c,Wc){return Wc.tileID.overscaledZ-$c.tileID.overscaledZ||($c.tileID.isLessThan(Wc.tileID)?-1:1)})}Gc=this.crossTileSymbolIndex.addLayer(Gc,Rb[Gc.source],U.center.lng);lb=lb||Gc}}this.crossTileSymbolIndex.pruneUnusedLayers(this._order);if((Qa=Qa||this._layerOrderChanged||0===va)||!this.pauseablePlacement||
this.pauseablePlacement.isDone()&&!this.placement.stillRecent(a.browser.now(),U.zoom))this.pauseablePlacement=new Ve(U,this._order,Qa,da,va,Ca,this.placement),this._layerOrderChanged=!1;this.pauseablePlacement.isDone()?this.placement.setStale():(this.pauseablePlacement.continuePlacement(this._order,this._layers,Rb),this.pauseablePlacement.isDone()&&(this.placement=this.pauseablePlacement.commit(a.browser.now()),Lb=!0),lb&&this.pauseablePlacement.placement.setStale());if(Lb||lb)for(U=0,da=this._order;U<
da.length;U+=1)va=this._layers[da[U]],"symbol"===va.type&&this.placement.updateLayerOpacities(va,Rb[va.source]);return!this.pauseablePlacement.isDone()||this.placement.hasTransitions(a.browser.now())};X.prototype._releaseSymbolFadeTiles=function(){for(var U in this.sourceCaches)this.sourceCaches[U].releaseSymbolFadeTiles()};X.prototype.getImages=function(U,da,va){this.imageManager.getImages(da.icons,va);this._updateTilesForChangedImages();(U=this.sourceCaches[da.source])&&U.setDependencies(da.tileID.key,
da.type,da.icons)};X.prototype.getGlyphs=function(U,da,va){this.glyphManager.getGlyphs(da.stacks,va)};X.prototype.getResource=function(U,da,va){return a.makeRequest(da,va)};return X}(a.Evented);Yg.getSourceType=function(R){return Jb[R]};Yg.setSourceType=function(R,X){Jb[R]=X};Yg.registerForPluginStateChange=a.registerForPluginStateChange;var sh=a.createLayout([{name:"a_pos",type:"Int16",components:2}]),ah=la("#ifdef GL_ES\nprecision mediump float;\n#else\n#if !defined(lowp)\n#define lowp\n#endif\n#if !defined(mediump)\n#define mediump\n#endif\n#if !defined(highp)\n#define highp\n#endif\n#endif",
"#ifdef GL_ES\nprecision highp float;\n#else\n#if !defined(lowp)\n#define lowp\n#endif\n#if !defined(mediump)\n#define mediump\n#endif\n#if !defined(highp)\n#define highp\n#endif\n#endif\nvec2 unpack_float(const float packedValue) {int packedIntValue\x3dint(packedValue);int v0\x3dpackedIntValue/256;return vec2(v0,packedIntValue-v0*256);}vec2 unpack_opacity(const float packedOpacity) {int intOpacity\x3dint(packedOpacity)/2;return vec2(float(intOpacity)/127.0,mod(packedOpacity,2.0));}vec4 decode_color(const vec2 encodedColor) {return vec4(unpack_float(encodedColor[0])/255.0,unpack_float(encodedColor[1])/255.0\n);}float unpack_mix_vec2(const vec2 packedValue,const float t) {return mix(packedValue[0],packedValue[1],t);}vec4 unpack_mix_color(const vec4 packedColors,const float t) {vec4 minColor\x3ddecode_color(vec2(packedColors[0],packedColors[1]));vec4 maxColor\x3ddecode_color(vec2(packedColors[2],packedColors[3]));return mix(minColor,maxColor,t);}vec2 get_pattern_pos(const vec2 pixel_coord_upper,const vec2 pixel_coord_lower,const vec2 pattern_size,const float tile_units_to_pixels,const vec2 pos) {vec2 offset\x3dmod(mod(mod(pixel_coord_upper,pattern_size)*256.0,pattern_size)*256.0+pixel_coord_lower,pattern_size);return (tile_units_to_pixels*pos+offset)/pattern_size;}"),
bh=la("uniform vec4 u_color;uniform float u_opacity;void main() {gl_FragColor\x3du_color*u_opacity;\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor\x3dvec4(1.0);\n#endif\n}","attribute vec2 a_pos;uniform mat4 u_matrix;void main() {gl_Position\x3du_matrix*vec4(a_pos,0,1);}"),Th=la("uniform vec2 u_pattern_tl_a;uniform vec2 u_pattern_br_a;uniform vec2 u_pattern_tl_b;uniform vec2 u_pattern_br_b;uniform vec2 u_texsize;uniform float u_mix;uniform float u_opacity;uniform sampler2D u_image;varying vec2 v_pos_a;varying vec2 v_pos_b;void main() {vec2 imagecoord\x3dmod(v_pos_a,1.0);vec2 pos\x3dmix(u_pattern_tl_a/u_texsize,u_pattern_br_a/u_texsize,imagecoord);vec4 color1\x3dtexture2D(u_image,pos);vec2 imagecoord_b\x3dmod(v_pos_b,1.0);vec2 pos2\x3dmix(u_pattern_tl_b/u_texsize,u_pattern_br_b/u_texsize,imagecoord_b);vec4 color2\x3dtexture2D(u_image,pos2);gl_FragColor\x3dmix(color1,color2,u_mix)*u_opacity;\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor\x3dvec4(1.0);\n#endif\n}",
"uniform mat4 u_matrix;uniform vec2 u_pattern_size_a;uniform vec2 u_pattern_size_b;uniform vec2 u_pixel_coord_upper;uniform vec2 u_pixel_coord_lower;uniform float u_scale_a;uniform float u_scale_b;uniform float u_tile_units_to_pixels;attribute vec2 a_pos;varying vec2 v_pos_a;varying vec2 v_pos_b;void main() {gl_Position\x3du_matrix*vec4(a_pos,0,1);v_pos_a\x3dget_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,u_scale_a*u_pattern_size_a,u_tile_units_to_pixels,a_pos);v_pos_b\x3dget_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,u_scale_b*u_pattern_size_b,u_tile_units_to_pixels,a_pos);}"),
ch=la("varying vec3 v_data;\n#pragma mapbox: define highp vec4 color\n#pragma mapbox: define mediump float radius\n#pragma mapbox: define lowp float blur\n#pragma mapbox: define lowp float opacity\n#pragma mapbox: define highp vec4 stroke_color\n#pragma mapbox: define mediump float stroke_width\n#pragma mapbox: define lowp float stroke_opacity\nvoid main() {\n#pragma mapbox: initialize highp vec4 color\n#pragma mapbox: initialize mediump float radius\n#pragma mapbox: initialize lowp float blur\n#pragma mapbox: initialize lowp float opacity\n#pragma mapbox: initialize highp vec4 stroke_color\n#pragma mapbox: initialize mediump float stroke_width\n#pragma mapbox: initialize lowp float stroke_opacity\nvec2 extrude\x3dv_data.xy;float extrude_length\x3dlength(extrude);lowp float antialiasblur\x3dv_data.z;float antialiased_blur\x3d-max(blur,antialiasblur);float opacity_t\x3dsmoothstep(0.0,antialiased_blur,extrude_length-1.0);float color_t\x3dstroke_width \x3c 0.01 ? 0.0 : smoothstep(antialiased_blur,0.0,extrude_length-radius/(radius+stroke_width));gl_FragColor\x3dopacity_t*mix(color*opacity,stroke_color*stroke_opacity,color_t);\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor\x3dvec4(1.0);\n#endif\n}",
"uniform mat4 u_matrix;uniform bool u_scale_with_map;uniform bool u_pitch_with_map;uniform vec2 u_extrude_scale;uniform lowp float u_device_pixel_ratio;uniform highp float u_camera_to_center_distance;attribute vec2 a_pos;varying vec3 v_data;\n#pragma mapbox: define highp vec4 color\n#pragma mapbox: define mediump float radius\n#pragma mapbox: define lowp float blur\n#pragma mapbox: define lowp float opacity\n#pragma mapbox: define highp vec4 stroke_color\n#pragma mapbox: define mediump float stroke_width\n#pragma mapbox: define lowp float stroke_opacity\nvoid main(void) {\n#pragma mapbox: initialize highp vec4 color\n#pragma mapbox: initialize mediump float radius\n#pragma mapbox: initialize lowp float blur\n#pragma mapbox: initialize lowp float opacity\n#pragma mapbox: initialize highp vec4 stroke_color\n#pragma mapbox: initialize mediump float stroke_width\n#pragma mapbox: initialize lowp float stroke_opacity\nvec2 extrude\x3dvec2(mod(a_pos,2.0)*2.0-1.0);vec2 circle_center\x3dfloor(a_pos*0.5);if (u_pitch_with_map) {vec2 corner_position\x3dcircle_center;if (u_scale_with_map) {corner_position+\x3dextrude*(radius+stroke_width)*u_extrude_scale;} else {vec4 projected_center\x3du_matrix*vec4(circle_center,0,1);corner_position+\x3dextrude*(radius+stroke_width)*u_extrude_scale*(projected_center.w/u_camera_to_center_distance);}gl_Position\x3du_matrix*vec4(corner_position,0,1);} else {gl_Position\x3du_matrix*vec4(circle_center,0,1);if (u_scale_with_map) {gl_Position.xy+\x3dextrude*(radius+stroke_width)*u_extrude_scale*u_camera_to_center_distance;} else {gl_Position.xy+\x3dextrude*(radius+stroke_width)*u_extrude_scale*gl_Position.w;}}lowp float antialiasblur\x3d1.0/u_device_pixel_ratio/(radius+stroke_width);v_data\x3dvec3(extrude.x,extrude.y,antialiasblur);}"),
bg=la("void main() {gl_FragColor\x3dvec4(1.0);}","attribute vec2 a_pos;uniform mat4 u_matrix;void main() {gl_Position\x3du_matrix*vec4(a_pos,0,1);}"),og=la("uniform highp float u_intensity;varying vec2 v_extrude;\n#pragma mapbox: define highp float weight\n#define GAUSS_COEF 0.3989422804014327\nvoid main() {\n#pragma mapbox: initialize highp float weight\nfloat d\x3d-0.5*3.0*3.0*dot(v_extrude,v_extrude);float val\x3dweight*u_intensity*GAUSS_COEF*exp(d);gl_FragColor\x3dvec4(val,1.0,1.0,1.0);\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor\x3dvec4(1.0);\n#endif\n}",
"uniform mat4 u_matrix;uniform float u_extrude_scale;uniform float u_opacity;uniform float u_intensity;attribute vec2 a_pos;varying vec2 v_extrude;\n#pragma mapbox: define highp float weight\n#pragma mapbox: define mediump float radius\nconst highp float ZERO\x3d1.0/255.0/16.0;\n#define GAUSS_COEF 0.3989422804014327\nvoid main(void) {\n#pragma mapbox: initialize highp float weight\n#pragma mapbox: initialize mediump float radius\nvec2 unscaled_extrude\x3dvec2(mod(a_pos,2.0)*2.0-1.0);float S\x3dsqrt(-2.0*log(ZERO/weight/u_intensity/GAUSS_COEF))/3.0;v_extrude\x3dS*unscaled_extrude;vec2 extrude\x3dv_extrude*radius*u_extrude_scale;vec4 pos\x3dvec4(floor(a_pos*0.5)+extrude,0,1);gl_Position\x3du_matrix*pos;}"),
qg=la("uniform sampler2D u_image;uniform sampler2D u_color_ramp;uniform float u_opacity;varying vec2 v_pos;void main() {float t\x3dtexture2D(u_image,v_pos).r;vec4 color\x3dtexture2D(u_color_ramp,vec2(t,0.5));gl_FragColor\x3dcolor*u_opacity;\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor\x3dvec4(0.0);\n#endif\n}","uniform mat4 u_matrix;uniform vec2 u_world;attribute vec2 a_pos;varying vec2 v_pos;void main() {gl_Position\x3du_matrix*vec4(a_pos*u_world,0,1);v_pos.x\x3da_pos.x;v_pos.y\x3d1.0-a_pos.y;}"),ug=
la("varying float v_placed;varying float v_notUsed;void main() {float alpha\x3d0.5;gl_FragColor\x3dvec4(1.0,0.0,0.0,1.0)*alpha;if (v_placed \x3e 0.5) {gl_FragColor\x3dvec4(0.0,0.0,1.0,0.5)*alpha;}if (v_notUsed \x3e 0.5) {gl_FragColor*\x3d.1;}}","attribute vec2 a_pos;attribute vec2 a_anchor_pos;attribute vec2 a_extrude;attribute vec2 a_placed;attribute vec2 a_shift;uniform mat4 u_matrix;uniform vec2 u_extrude_scale;uniform float u_camera_to_center_distance;varying float v_placed;varying float v_notUsed;void main() {vec4 projectedPoint\x3du_matrix*vec4(a_anchor_pos,0,1);highp float camera_to_anchor_distance\x3dprojectedPoint.w;highp float collision_perspective_ratio\x3dclamp(0.5+0.5*(u_camera_to_center_distance/camera_to_anchor_distance),0.0,4.0);gl_Position\x3du_matrix*vec4(a_pos,0.0,1.0);gl_Position.xy+\x3d(a_extrude+a_shift)*u_extrude_scale*gl_Position.w*collision_perspective_ratio;v_placed\x3da_placed.x;v_notUsed\x3da_placed.y;}"),
Tg=la("varying float v_radius;varying vec2 v_extrude;varying float v_perspective_ratio;varying float v_collision;void main() {float alpha\x3d0.5*min(v_perspective_ratio,1.0);float stroke_radius\x3d0.9*max(v_perspective_ratio,1.0);float distance_to_center\x3dlength(v_extrude);float distance_to_edge\x3dabs(distance_to_center-v_radius);float opacity_t\x3dsmoothstep(-stroke_radius,0.0,-distance_to_edge);vec4 color\x3dmix(vec4(0.0,0.0,1.0,0.5),vec4(1.0,0.0,0.0,1.0),v_collision);gl_FragColor\x3dcolor*alpha*opacity_t;}",
"attribute vec2 a_pos;attribute float a_radius;attribute vec2 a_flags;uniform mat4 u_matrix;uniform mat4 u_inv_matrix;uniform vec2 u_viewport_size;uniform float u_camera_to_center_distance;varying float v_radius;varying vec2 v_extrude;varying float v_perspective_ratio;varying float v_collision;vec3 toTilePosition(vec2 screenPos) {vec4 rayStart\x3du_inv_matrix*vec4(screenPos,-1.0,1.0);vec4 rayEnd  \x3du_inv_matrix*vec4(screenPos, 1.0,1.0);rayStart.xyz/\x3drayStart.w;rayEnd.xyz  /\x3drayEnd.w;highp float t\x3d(0.0-rayStart.z)/(rayEnd.z-rayStart.z);return mix(rayStart.xyz,rayEnd.xyz,t);}void main() {vec2 quadCenterPos\x3da_pos;float radius\x3da_radius;float collision\x3da_flags.x;float vertexIdx\x3da_flags.y;vec2 quadVertexOffset\x3dvec2(mix(-1.0,1.0,float(vertexIdx \x3e\x3d2.0)),mix(-1.0,1.0,float(vertexIdx \x3e\x3d1.0 \x26\x26 vertexIdx \x3c\x3d2.0)));vec2 quadVertexExtent\x3dquadVertexOffset*radius;vec3 tilePos\x3dtoTilePosition(quadCenterPos);vec4 clipPos\x3du_matrix*vec4(tilePos,1.0);highp float camera_to_anchor_distance\x3dclipPos.w;highp float collision_perspective_ratio\x3dclamp(0.5+0.5*(u_camera_to_center_distance/camera_to_anchor_distance),0.0,4.0);float padding_factor\x3d1.2;v_radius\x3dradius;v_extrude\x3dquadVertexExtent*padding_factor;v_perspective_ratio\x3dcollision_perspective_ratio;v_collision\x3dcollision;gl_Position\x3dvec4(clipPos.xyz/clipPos.w,1.0)+vec4(quadVertexExtent*padding_factor/u_viewport_size*2.0,0.0,0.0);}"),
Ig=la("uniform highp vec4 u_color;uniform sampler2D u_overlay;varying vec2 v_uv;void main() {vec4 overlay_color\x3dtexture2D(u_overlay,v_uv);gl_FragColor\x3dmix(u_color,overlay_color,overlay_color.a);}","attribute vec2 a_pos;varying vec2 v_uv;uniform mat4 u_matrix;uniform float u_overlay_scale;void main() {v_uv\x3da_pos/8192.0;gl_Position\x3du_matrix*vec4(a_pos*u_overlay_scale,0,1);}"),jh=la("#pragma mapbox: define highp vec4 color\n#pragma mapbox: define lowp float opacity\nvoid main() {\n#pragma mapbox: initialize highp vec4 color\n#pragma mapbox: initialize lowp float opacity\ngl_FragColor\x3dcolor*opacity;\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor\x3dvec4(1.0);\n#endif\n}",
"attribute vec2 a_pos;uniform mat4 u_matrix;\n#pragma mapbox: define highp vec4 color\n#pragma mapbox: define lowp float opacity\nvoid main() {\n#pragma mapbox: initialize highp vec4 color\n#pragma mapbox: initialize lowp float opacity\ngl_Position\x3du_matrix*vec4(a_pos,0,1);}"),Ug=la("varying vec2 v_pos;\n#pragma mapbox: define highp vec4 outline_color\n#pragma mapbox: define lowp float opacity\nvoid main() {\n#pragma mapbox: initialize highp vec4 outline_color\n#pragma mapbox: initialize lowp float opacity\nfloat dist\x3dlength(v_pos-gl_FragCoord.xy);float alpha\x3d1.0-smoothstep(0.0,1.0,dist);gl_FragColor\x3doutline_color*(alpha*opacity);\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor\x3dvec4(1.0);\n#endif\n}",
"attribute vec2 a_pos;uniform mat4 u_matrix;uniform vec2 u_world;varying vec2 v_pos;\n#pragma mapbox: define highp vec4 outline_color\n#pragma mapbox: define lowp float opacity\nvoid main() {\n#pragma mapbox: initialize highp vec4 outline_color\n#pragma mapbox: initialize lowp float opacity\ngl_Position\x3du_matrix*vec4(a_pos,0,1);v_pos\x3d(gl_Position.xy/gl_Position.w+1.0)/2.0*u_world;}"),Wf=la("uniform vec2 u_texsize;uniform sampler2D u_image;uniform float u_fade;varying vec2 v_pos_a;varying vec2 v_pos_b;varying vec2 v_pos;\n#pragma mapbox: define lowp float opacity\n#pragma mapbox: define lowp vec4 pattern_from\n#pragma mapbox: define lowp vec4 pattern_to\nvoid main() {\n#pragma mapbox: initialize lowp float opacity\n#pragma mapbox: initialize mediump vec4 pattern_from\n#pragma mapbox: initialize mediump vec4 pattern_to\nvec2 pattern_tl_a\x3dpattern_from.xy;vec2 pattern_br_a\x3dpattern_from.zw;vec2 pattern_tl_b\x3dpattern_to.xy;vec2 pattern_br_b\x3dpattern_to.zw;vec2 imagecoord\x3dmod(v_pos_a,1.0);vec2 pos\x3dmix(pattern_tl_a/u_texsize,pattern_br_a/u_texsize,imagecoord);vec4 color1\x3dtexture2D(u_image,pos);vec2 imagecoord_b\x3dmod(v_pos_b,1.0);vec2 pos2\x3dmix(pattern_tl_b/u_texsize,pattern_br_b/u_texsize,imagecoord_b);vec4 color2\x3dtexture2D(u_image,pos2);float dist\x3dlength(v_pos-gl_FragCoord.xy);float alpha\x3d1.0-smoothstep(0.0,1.0,dist);gl_FragColor\x3dmix(color1,color2,u_fade)*alpha*opacity;\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor\x3dvec4(1.0);\n#endif\n}",
"uniform mat4 u_matrix;uniform vec2 u_world;uniform vec2 u_pixel_coord_upper;uniform vec2 u_pixel_coord_lower;uniform vec3 u_scale;attribute vec2 a_pos;varying vec2 v_pos_a;varying vec2 v_pos_b;varying vec2 v_pos;\n#pragma mapbox: define lowp float opacity\n#pragma mapbox: define lowp vec4 pattern_from\n#pragma mapbox: define lowp vec4 pattern_to\n#pragma mapbox: define lowp float pixel_ratio_from\n#pragma mapbox: define lowp float pixel_ratio_to\nvoid main() {\n#pragma mapbox: initialize lowp float opacity\n#pragma mapbox: initialize mediump vec4 pattern_from\n#pragma mapbox: initialize mediump vec4 pattern_to\n#pragma mapbox: initialize lowp float pixel_ratio_from\n#pragma mapbox: initialize lowp float pixel_ratio_to\nvec2 pattern_tl_a\x3dpattern_from.xy;vec2 pattern_br_a\x3dpattern_from.zw;vec2 pattern_tl_b\x3dpattern_to.xy;vec2 pattern_br_b\x3dpattern_to.zw;float tileRatio\x3du_scale.x;float fromScale\x3du_scale.y;float toScale\x3du_scale.z;gl_Position\x3du_matrix*vec4(a_pos,0,1);vec2 display_size_a\x3d(pattern_br_a-pattern_tl_a)/pixel_ratio_from;vec2 display_size_b\x3d(pattern_br_b-pattern_tl_b)/pixel_ratio_to;v_pos_a\x3dget_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,fromScale*display_size_a,tileRatio,a_pos);v_pos_b\x3dget_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,toScale*display_size_b,tileRatio,a_pos);v_pos\x3d(gl_Position.xy/gl_Position.w+1.0)/2.0*u_world;}"),
kh=la("uniform vec2 u_texsize;uniform float u_fade;uniform sampler2D u_image;varying vec2 v_pos_a;varying vec2 v_pos_b;\n#pragma mapbox: define lowp float opacity\n#pragma mapbox: define lowp vec4 pattern_from\n#pragma mapbox: define lowp vec4 pattern_to\nvoid main() {\n#pragma mapbox: initialize lowp float opacity\n#pragma mapbox: initialize mediump vec4 pattern_from\n#pragma mapbox: initialize mediump vec4 pattern_to\nvec2 pattern_tl_a\x3dpattern_from.xy;vec2 pattern_br_a\x3dpattern_from.zw;vec2 pattern_tl_b\x3dpattern_to.xy;vec2 pattern_br_b\x3dpattern_to.zw;vec2 imagecoord\x3dmod(v_pos_a,1.0);vec2 pos\x3dmix(pattern_tl_a/u_texsize,pattern_br_a/u_texsize,imagecoord);vec4 color1\x3dtexture2D(u_image,pos);vec2 imagecoord_b\x3dmod(v_pos_b,1.0);vec2 pos2\x3dmix(pattern_tl_b/u_texsize,pattern_br_b/u_texsize,imagecoord_b);vec4 color2\x3dtexture2D(u_image,pos2);gl_FragColor\x3dmix(color1,color2,u_fade)*opacity;\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor\x3dvec4(1.0);\n#endif\n}",
"uniform mat4 u_matrix;uniform vec2 u_pixel_coord_upper;uniform vec2 u_pixel_coord_lower;uniform vec3 u_scale;attribute vec2 a_pos;varying vec2 v_pos_a;varying vec2 v_pos_b;\n#pragma mapbox: define lowp float opacity\n#pragma mapbox: define lowp vec4 pattern_from\n#pragma mapbox: define lowp vec4 pattern_to\n#pragma mapbox: define lowp float pixel_ratio_from\n#pragma mapbox: define lowp float pixel_ratio_to\nvoid main() {\n#pragma mapbox: initialize lowp float opacity\n#pragma mapbox: initialize mediump vec4 pattern_from\n#pragma mapbox: initialize mediump vec4 pattern_to\n#pragma mapbox: initialize lowp float pixel_ratio_from\n#pragma mapbox: initialize lowp float pixel_ratio_to\nvec2 pattern_tl_a\x3dpattern_from.xy;vec2 pattern_br_a\x3dpattern_from.zw;vec2 pattern_tl_b\x3dpattern_to.xy;vec2 pattern_br_b\x3dpattern_to.zw;float tileZoomRatio\x3du_scale.x;float fromScale\x3du_scale.y;float toScale\x3du_scale.z;vec2 display_size_a\x3d(pattern_br_a-pattern_tl_a)/pixel_ratio_from;vec2 display_size_b\x3d(pattern_br_b-pattern_tl_b)/pixel_ratio_to;gl_Position\x3du_matrix*vec4(a_pos,0,1);v_pos_a\x3dget_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,fromScale*display_size_a,tileZoomRatio,a_pos);v_pos_b\x3dget_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,toScale*display_size_b,tileZoomRatio,a_pos);}"),
pg=la("varying vec4 v_color;void main() {gl_FragColor\x3dv_color;\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor\x3dvec4(1.0);\n#endif\n}","uniform mat4 u_matrix;uniform vec3 u_lightcolor;uniform lowp vec3 u_lightpos;uniform lowp float u_lightintensity;uniform float u_vertical_gradient;uniform lowp float u_opacity;attribute vec2 a_pos;attribute vec4 a_normal_ed;varying vec4 v_color;\n#pragma mapbox: define highp float base\n#pragma mapbox: define highp float height\n#pragma mapbox: define highp vec4 color\nvoid main() {\n#pragma mapbox: initialize highp float base\n#pragma mapbox: initialize highp float height\n#pragma mapbox: initialize highp vec4 color\nvec3 normal\x3da_normal_ed.xyz;base\x3dmax(0.0,base);height\x3dmax(0.0,height);float t\x3dmod(normal.x,2.0);gl_Position\x3du_matrix*vec4(a_pos,t \x3e 0.0 ? height : base,1);float colorvalue\x3dcolor.r*0.2126+color.g*0.7152+color.b*0.0722;v_color\x3dvec4(0.0,0.0,0.0,1.0);vec4 ambientlight\x3dvec4(0.03,0.03,0.03,1.0);color+\x3dambientlight;float directional\x3dclamp(dot(normal/16384.0,u_lightpos),0.0,1.0);directional\x3dmix((1.0-u_lightintensity),max((1.0-colorvalue+u_lightintensity),1.0),directional);if (normal.y !\x3d0.0) {directional*\x3d((1.0-u_vertical_gradient)+(u_vertical_gradient*clamp((t+base)*pow(height/150.0,0.5),mix(0.7,0.98,1.0-u_lightintensity),1.0)));}v_color.r+\x3dclamp(color.r*directional*u_lightcolor.r,mix(0.0,0.3,1.0-u_lightcolor.r),1.0);v_color.g+\x3dclamp(color.g*directional*u_lightcolor.g,mix(0.0,0.3,1.0-u_lightcolor.g),1.0);v_color.b+\x3dclamp(color.b*directional*u_lightcolor.b,mix(0.0,0.3,1.0-u_lightcolor.b),1.0);v_color*\x3du_opacity;}"),
Bg=la("uniform vec2 u_texsize;uniform float u_fade;uniform sampler2D u_image;varying vec2 v_pos_a;varying vec2 v_pos_b;varying vec4 v_lighting;\n#pragma mapbox: define lowp float base\n#pragma mapbox: define lowp float height\n#pragma mapbox: define lowp vec4 pattern_from\n#pragma mapbox: define lowp vec4 pattern_to\n#pragma mapbox: define lowp float pixel_ratio_from\n#pragma mapbox: define lowp float pixel_ratio_to\nvoid main() {\n#pragma mapbox: initialize lowp float base\n#pragma mapbox: initialize lowp float height\n#pragma mapbox: initialize mediump vec4 pattern_from\n#pragma mapbox: initialize mediump vec4 pattern_to\n#pragma mapbox: initialize lowp float pixel_ratio_from\n#pragma mapbox: initialize lowp float pixel_ratio_to\nvec2 pattern_tl_a\x3dpattern_from.xy;vec2 pattern_br_a\x3dpattern_from.zw;vec2 pattern_tl_b\x3dpattern_to.xy;vec2 pattern_br_b\x3dpattern_to.zw;vec2 imagecoord\x3dmod(v_pos_a,1.0);vec2 pos\x3dmix(pattern_tl_a/u_texsize,pattern_br_a/u_texsize,imagecoord);vec4 color1\x3dtexture2D(u_image,pos);vec2 imagecoord_b\x3dmod(v_pos_b,1.0);vec2 pos2\x3dmix(pattern_tl_b/u_texsize,pattern_br_b/u_texsize,imagecoord_b);vec4 color2\x3dtexture2D(u_image,pos2);vec4 mixedColor\x3dmix(color1,color2,u_fade);gl_FragColor\x3dmixedColor*v_lighting;\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor\x3dvec4(1.0);\n#endif\n}",
"uniform mat4 u_matrix;uniform vec2 u_pixel_coord_upper;uniform vec2 u_pixel_coord_lower;uniform float u_height_factor;uniform vec3 u_scale;uniform float u_vertical_gradient;uniform lowp float u_opacity;uniform vec3 u_lightcolor;uniform lowp vec3 u_lightpos;uniform lowp float u_lightintensity;attribute vec2 a_pos;attribute vec4 a_normal_ed;varying vec2 v_pos_a;varying vec2 v_pos_b;varying vec4 v_lighting;\n#pragma mapbox: define lowp float base\n#pragma mapbox: define lowp float height\n#pragma mapbox: define lowp vec4 pattern_from\n#pragma mapbox: define lowp vec4 pattern_to\n#pragma mapbox: define lowp float pixel_ratio_from\n#pragma mapbox: define lowp float pixel_ratio_to\nvoid main() {\n#pragma mapbox: initialize lowp float base\n#pragma mapbox: initialize lowp float height\n#pragma mapbox: initialize mediump vec4 pattern_from\n#pragma mapbox: initialize mediump vec4 pattern_to\n#pragma mapbox: initialize lowp float pixel_ratio_from\n#pragma mapbox: initialize lowp float pixel_ratio_to\nvec2 pattern_tl_a\x3dpattern_from.xy;vec2 pattern_br_a\x3dpattern_from.zw;vec2 pattern_tl_b\x3dpattern_to.xy;vec2 pattern_br_b\x3dpattern_to.zw;float tileRatio\x3du_scale.x;float fromScale\x3du_scale.y;float toScale\x3du_scale.z;vec3 normal\x3da_normal_ed.xyz;float edgedistance\x3da_normal_ed.w;vec2 display_size_a\x3d(pattern_br_a-pattern_tl_a)/pixel_ratio_from;vec2 display_size_b\x3d(pattern_br_b-pattern_tl_b)/pixel_ratio_to;base\x3dmax(0.0,base);height\x3dmax(0.0,height);float t\x3dmod(normal.x,2.0);float z\x3dt \x3e 0.0 ? height : base;gl_Position\x3du_matrix*vec4(a_pos,z,1);vec2 pos\x3dnormal.x\x3d\x3d1.0 \x26\x26 normal.y\x3d\x3d0.0 \x26\x26 normal.z\x3d\x3d16384.0\n? a_pos\n: vec2(edgedistance,z*u_height_factor);v_pos_a\x3dget_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,fromScale*display_size_a,tileRatio,pos);v_pos_b\x3dget_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,toScale*display_size_b,tileRatio,pos);v_lighting\x3dvec4(0.0,0.0,0.0,1.0);float directional\x3dclamp(dot(normal/16383.0,u_lightpos),0.0,1.0);directional\x3dmix((1.0-u_lightintensity),max((0.5+u_lightintensity),1.0),directional);if (normal.y !\x3d0.0) {directional*\x3d((1.0-u_vertical_gradient)+(u_vertical_gradient*clamp((t+base)*pow(height/150.0,0.5),mix(0.7,0.98,1.0-u_lightintensity),1.0)));}v_lighting.rgb+\x3dclamp(directional*u_lightcolor,mix(vec3(0.0),vec3(0.3),1.0-u_lightcolor),vec3(1.0));v_lighting*\x3du_opacity;}"),
th=la("#ifdef GL_ES\nprecision highp float;\n#endif\nuniform sampler2D u_image;varying vec2 v_pos;uniform vec2 u_dimension;uniform float u_zoom;uniform float u_maxzoom;uniform vec4 u_unpack;float getElevation(vec2 coord,float bias) {vec4 data\x3dtexture2D(u_image,coord)*255.0;data.a\x3d-1.0;return dot(data,u_unpack)/4.0;}void main() {vec2 epsilon\x3d1.0/u_dimension;float a\x3dgetElevation(v_pos+vec2(-epsilon.x,-epsilon.y),0.0);float b\x3dgetElevation(v_pos+vec2(0,-epsilon.y),0.0);float c\x3dgetElevation(v_pos+vec2(epsilon.x,-epsilon.y),0.0);float d\x3dgetElevation(v_pos+vec2(-epsilon.x,0),0.0);float e\x3dgetElevation(v_pos,0.0);float f\x3dgetElevation(v_pos+vec2(epsilon.x,0),0.0);float g\x3dgetElevation(v_pos+vec2(-epsilon.x,epsilon.y),0.0);float h\x3dgetElevation(v_pos+vec2(0,epsilon.y),0.0);float i\x3dgetElevation(v_pos+vec2(epsilon.x,epsilon.y),0.0);float exaggeration\x3du_zoom \x3c 2.0 ? 0.4 : u_zoom \x3c 4.5 ? 0.35 : 0.3;vec2 deriv\x3dvec2((c+f+f+i)-(a+d+d+g),(g+h+h+i)-(a+b+b+c))/ pow(2.0,(u_zoom-u_maxzoom)*exaggeration+19.2562-u_zoom);gl_FragColor\x3dclamp(vec4(deriv.x/2.0+0.5,deriv.y/2.0+0.5,1.0,1.0),0.0,1.0);\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor\x3dvec4(1.0);\n#endif\n}",
"uniform mat4 u_matrix;uniform vec2 u_dimension;attribute vec2 a_pos;attribute vec2 a_texture_pos;varying vec2 v_pos;void main() {gl_Position\x3du_matrix*vec4(a_pos,0,1);highp vec2 epsilon\x3d1.0/u_dimension;float scale\x3d(u_dimension.x-2.0)/u_dimension.x;v_pos\x3d(a_texture_pos/8192.0)*scale+epsilon;}"),uh=la("uniform sampler2D u_image;varying vec2 v_pos;uniform vec2 u_latrange;uniform vec2 u_light;uniform vec4 u_shadow;uniform vec4 u_highlight;uniform vec4 u_accent;\n#define PI 3.141592653589793\nvoid main() {vec4 pixel\x3dtexture2D(u_image,v_pos);vec2 deriv\x3d((pixel.rg*2.0)-1.0);float scaleFactor\x3dcos(radians((u_latrange[0]-u_latrange[1])*(1.0-v_pos.y)+u_latrange[1]));float slope\x3datan(1.25*length(deriv)/scaleFactor);float aspect\x3dderiv.x !\x3d0.0 ? atan(deriv.y,-deriv.x) : PI/2.0*(deriv.y \x3e 0.0 ? 1.0 :-1.0);float intensity\x3du_light.x;float azimuth\x3du_light.y+PI;float base\x3d1.875-intensity*1.75;float maxValue\x3d0.5*PI;float scaledSlope\x3dintensity !\x3d0.5 ? ((pow(base,slope)-1.0)/(pow(base,maxValue)-1.0))*maxValue : slope;float accent\x3dcos(scaledSlope);vec4 accent_color\x3d(1.0-accent)*u_accent*clamp(intensity*2.0,0.0,1.0);float shade\x3dabs(mod((aspect+azimuth)/PI+0.5,2.0)-1.0);vec4 shade_color\x3dmix(u_shadow,u_highlight,shade)*sin(scaledSlope)*clamp(intensity*2.0,0.0,1.0);gl_FragColor\x3daccent_color*(1.0-shade_color.a)+shade_color;\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor\x3dvec4(1.0);\n#endif\n}",
"uniform mat4 u_matrix;attribute vec2 a_pos;attribute vec2 a_texture_pos;varying vec2 v_pos;void main() {gl_Position\x3du_matrix*vec4(a_pos,0,1);v_pos\x3da_texture_pos/8192.0;}"),Bh=la("uniform lowp float u_device_pixel_ratio;varying vec2 v_width2;varying vec2 v_normal;varying float v_gamma_scale;\n#pragma mapbox: define highp vec4 color\n#pragma mapbox: define lowp float blur\n#pragma mapbox: define lowp float opacity\nvoid main() {\n#pragma mapbox: initialize highp vec4 color\n#pragma mapbox: initialize lowp float blur\n#pragma mapbox: initialize lowp float opacity\nfloat dist\x3dlength(v_normal)*v_width2.s;float blur2\x3d(blur+1.0/u_device_pixel_ratio)*v_gamma_scale;float alpha\x3dclamp(min(dist-(v_width2.t-blur2),v_width2.s-dist)/blur2,0.0,1.0);gl_FragColor\x3dcolor*(alpha*opacity);\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor\x3dvec4(1.0);\n#endif\n}",
"\n#define scale 0.015873016\nattribute vec2 a_pos_normal;attribute vec4 a_data;uniform mat4 u_matrix;uniform mediump float u_ratio;uniform vec2 u_units_to_pixels;uniform lowp float u_device_pixel_ratio;varying vec2 v_normal;varying vec2 v_width2;varying float v_gamma_scale;varying highp float v_linesofar;\n#pragma mapbox: define highp vec4 color\n#pragma mapbox: define lowp float blur\n#pragma mapbox: define lowp float opacity\n#pragma mapbox: define mediump float gapwidth\n#pragma mapbox: define lowp float offset\n#pragma mapbox: define mediump float width\nvoid main() {\n#pragma mapbox: initialize highp vec4 color\n#pragma mapbox: initialize lowp float blur\n#pragma mapbox: initialize lowp float opacity\n#pragma mapbox: initialize mediump float gapwidth\n#pragma mapbox: initialize lowp float offset\n#pragma mapbox: initialize mediump float width\nfloat ANTIALIASING\x3d1.0/u_device_pixel_ratio/2.0;vec2 a_extrude\x3da_data.xy-128.0;float a_direction\x3dmod(a_data.z,4.0)-1.0;v_linesofar\x3d(floor(a_data.z/4.0)+a_data.w*64.0)*2.0;vec2 pos\x3dfloor(a_pos_normal*0.5);mediump vec2 normal\x3da_pos_normal-2.0*pos;normal.y\x3dnormal.y*2.0-1.0;v_normal\x3dnormal;gapwidth\x3dgapwidth/2.0;float halfwidth\x3dwidth/2.0;offset\x3d-1.0*offset;float inset\x3dgapwidth+(gapwidth \x3e 0.0 ? ANTIALIASING : 0.0);float outset\x3dgapwidth+halfwidth*(gapwidth \x3e 0.0 ? 2.0 : 1.0)+(halfwidth\x3d\x3d0.0 ? 0.0 : ANTIALIASING);mediump vec2 dist\x3doutset*a_extrude*scale;mediump float u\x3d0.5*a_direction;mediump float t\x3d1.0-abs(u);mediump vec2 offset2\x3doffset*a_extrude*scale*normal.y*mat2(t,-u,u,t);vec4 projected_extrude\x3du_matrix*vec4(dist/u_ratio,0.0,0.0);gl_Position\x3du_matrix*vec4(pos+offset2/u_ratio,0.0,1.0)+projected_extrude;float extrude_length_without_perspective\x3dlength(dist);float extrude_length_with_perspective\x3dlength(projected_extrude.xy/gl_Position.w*u_units_to_pixels);v_gamma_scale\x3dextrude_length_without_perspective/extrude_length_with_perspective;v_width2\x3dvec2(outset,inset);}"),
Gg=la("uniform lowp float u_device_pixel_ratio;uniform sampler2D u_image;varying vec2 v_width2;varying vec2 v_normal;varying float v_gamma_scale;varying highp float v_lineprogress;\n#pragma mapbox: define lowp float blur\n#pragma mapbox: define lowp float opacity\nvoid main() {\n#pragma mapbox: initialize lowp float blur\n#pragma mapbox: initialize lowp float opacity\nfloat dist\x3dlength(v_normal)*v_width2.s;float blur2\x3d(blur+1.0/u_device_pixel_ratio)*v_gamma_scale;float alpha\x3dclamp(min(dist-(v_width2.t-blur2),v_width2.s-dist)/blur2,0.0,1.0);vec4 color\x3dtexture2D(u_image,vec2(v_lineprogress,0.5));gl_FragColor\x3dcolor*(alpha*opacity);\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor\x3dvec4(1.0);\n#endif\n}",
"\n#define MAX_LINE_DISTANCE 32767.0\n#define scale 0.015873016\nattribute vec2 a_pos_normal;attribute vec4 a_data;uniform mat4 u_matrix;uniform mediump float u_ratio;uniform lowp float u_device_pixel_ratio;uniform vec2 u_units_to_pixels;varying vec2 v_normal;varying vec2 v_width2;varying float v_gamma_scale;varying highp float v_lineprogress;\n#pragma mapbox: define lowp float blur\n#pragma mapbox: define lowp float opacity\n#pragma mapbox: define mediump float gapwidth\n#pragma mapbox: define lowp float offset\n#pragma mapbox: define mediump float width\nvoid main() {\n#pragma mapbox: initialize lowp float blur\n#pragma mapbox: initialize lowp float opacity\n#pragma mapbox: initialize mediump float gapwidth\n#pragma mapbox: initialize lowp float offset\n#pragma mapbox: initialize mediump float width\nfloat ANTIALIASING\x3d1.0/u_device_pixel_ratio/2.0;vec2 a_extrude\x3da_data.xy-128.0;float a_direction\x3dmod(a_data.z,4.0)-1.0;v_lineprogress\x3d(floor(a_data.z/4.0)+a_data.w*64.0)*2.0/MAX_LINE_DISTANCE;vec2 pos\x3dfloor(a_pos_normal*0.5);mediump vec2 normal\x3da_pos_normal-2.0*pos;normal.y\x3dnormal.y*2.0-1.0;v_normal\x3dnormal;gapwidth\x3dgapwidth/2.0;float halfwidth\x3dwidth/2.0;offset\x3d-1.0*offset;float inset\x3dgapwidth+(gapwidth \x3e 0.0 ? ANTIALIASING : 0.0);float outset\x3dgapwidth+halfwidth*(gapwidth \x3e 0.0 ? 2.0 : 1.0)+(halfwidth\x3d\x3d0.0 ? 0.0 : ANTIALIASING);mediump vec2 dist\x3doutset*a_extrude*scale;mediump float u\x3d0.5*a_direction;mediump float t\x3d1.0-abs(u);mediump vec2 offset2\x3doffset*a_extrude*scale*normal.y*mat2(t,-u,u,t);vec4 projected_extrude\x3du_matrix*vec4(dist/u_ratio,0.0,0.0);gl_Position\x3du_matrix*vec4(pos+offset2/u_ratio,0.0,1.0)+projected_extrude;float extrude_length_without_perspective\x3dlength(dist);float extrude_length_with_perspective\x3dlength(projected_extrude.xy/gl_Position.w*u_units_to_pixels);v_gamma_scale\x3dextrude_length_without_perspective/extrude_length_with_perspective;v_width2\x3dvec2(outset,inset);}"),
lh=la("uniform lowp float u_device_pixel_ratio;uniform vec2 u_texsize;uniform float u_fade;uniform mediump vec3 u_scale;uniform sampler2D u_image;varying vec2 v_normal;varying vec2 v_width2;varying float v_linesofar;varying float v_gamma_scale;varying float v_width;\n#pragma mapbox: define lowp vec4 pattern_from\n#pragma mapbox: define lowp vec4 pattern_to\n#pragma mapbox: define lowp float pixel_ratio_from\n#pragma mapbox: define lowp float pixel_ratio_to\n#pragma mapbox: define lowp float blur\n#pragma mapbox: define lowp float opacity\nvoid main() {\n#pragma mapbox: initialize mediump vec4 pattern_from\n#pragma mapbox: initialize mediump vec4 pattern_to\n#pragma mapbox: initialize lowp float pixel_ratio_from\n#pragma mapbox: initialize lowp float pixel_ratio_to\n#pragma mapbox: initialize lowp float blur\n#pragma mapbox: initialize lowp float opacity\nvec2 pattern_tl_a\x3dpattern_from.xy;vec2 pattern_br_a\x3dpattern_from.zw;vec2 pattern_tl_b\x3dpattern_to.xy;vec2 pattern_br_b\x3dpattern_to.zw;float tileZoomRatio\x3du_scale.x;float fromScale\x3du_scale.y;float toScale\x3du_scale.z;vec2 display_size_a\x3d(pattern_br_a-pattern_tl_a)/pixel_ratio_from;vec2 display_size_b\x3d(pattern_br_b-pattern_tl_b)/pixel_ratio_to;vec2 pattern_size_a\x3dvec2(display_size_a.x*fromScale/tileZoomRatio,display_size_a.y);vec2 pattern_size_b\x3dvec2(display_size_b.x*toScale/tileZoomRatio,display_size_b.y);float aspect_a\x3ddisplay_size_a.y/v_width;float aspect_b\x3ddisplay_size_b.y/v_width;float dist\x3dlength(v_normal)*v_width2.s;float blur2\x3d(blur+1.0/u_device_pixel_ratio)*v_gamma_scale;float alpha\x3dclamp(min(dist-(v_width2.t-blur2),v_width2.s-dist)/blur2,0.0,1.0);float x_a\x3dmod(v_linesofar/pattern_size_a.x*aspect_a,1.0);float x_b\x3dmod(v_linesofar/pattern_size_b.x*aspect_b,1.0);float y\x3d0.5*v_normal.y+0.5;vec2 texel_size\x3d1.0/u_texsize;vec2 pos_a\x3dmix(pattern_tl_a*texel_size-texel_size,pattern_br_a*texel_size+texel_size,vec2(x_a,y));vec2 pos_b\x3dmix(pattern_tl_b*texel_size-texel_size,pattern_br_b*texel_size+texel_size,vec2(x_b,y));vec4 color\x3dmix(texture2D(u_image,pos_a),texture2D(u_image,pos_b),u_fade);gl_FragColor\x3dcolor*alpha*opacity;\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor\x3dvec4(1.0);\n#endif\n}",
"\n#define scale 0.015873016\n#define LINE_DISTANCE_SCALE 2.0\nattribute vec2 a_pos_normal;attribute vec4 a_data;uniform mat4 u_matrix;uniform vec2 u_units_to_pixels;uniform mediump float u_ratio;uniform lowp float u_device_pixel_ratio;varying vec2 v_normal;varying vec2 v_width2;varying float v_linesofar;varying float v_gamma_scale;varying float v_width;\n#pragma mapbox: define lowp float blur\n#pragma mapbox: define lowp float opacity\n#pragma mapbox: define lowp float offset\n#pragma mapbox: define mediump float gapwidth\n#pragma mapbox: define mediump float width\n#pragma mapbox: define lowp float floorwidth\n#pragma mapbox: define lowp vec4 pattern_from\n#pragma mapbox: define lowp vec4 pattern_to\n#pragma mapbox: define lowp float pixel_ratio_from\n#pragma mapbox: define lowp float pixel_ratio_to\nvoid main() {\n#pragma mapbox: initialize lowp float blur\n#pragma mapbox: initialize lowp float opacity\n#pragma mapbox: initialize lowp float offset\n#pragma mapbox: initialize mediump float gapwidth\n#pragma mapbox: initialize mediump float width\n#pragma mapbox: initialize lowp float floorwidth\n#pragma mapbox: initialize mediump vec4 pattern_from\n#pragma mapbox: initialize mediump vec4 pattern_to\n#pragma mapbox: initialize lowp float pixel_ratio_from\n#pragma mapbox: initialize lowp float pixel_ratio_to\nfloat ANTIALIASING\x3d1.0/u_device_pixel_ratio/2.0;vec2 a_extrude\x3da_data.xy-128.0;float a_direction\x3dmod(a_data.z,4.0)-1.0;float a_linesofar\x3d(floor(a_data.z/4.0)+a_data.w*64.0)*LINE_DISTANCE_SCALE;vec2 pos\x3dfloor(a_pos_normal*0.5);mediump vec2 normal\x3da_pos_normal-2.0*pos;normal.y\x3dnormal.y*2.0-1.0;v_normal\x3dnormal;gapwidth\x3dgapwidth/2.0;float halfwidth\x3dwidth/2.0;offset\x3d-1.0*offset;float inset\x3dgapwidth+(gapwidth \x3e 0.0 ? ANTIALIASING : 0.0);float outset\x3dgapwidth+halfwidth*(gapwidth \x3e 0.0 ? 2.0 : 1.0)+(halfwidth\x3d\x3d0.0 ? 0.0 : ANTIALIASING);mediump vec2 dist\x3doutset*a_extrude*scale;mediump float u\x3d0.5*a_direction;mediump float t\x3d1.0-abs(u);mediump vec2 offset2\x3doffset*a_extrude*scale*normal.y*mat2(t,-u,u,t);vec4 projected_extrude\x3du_matrix*vec4(dist/u_ratio,0.0,0.0);gl_Position\x3du_matrix*vec4(pos+offset2/u_ratio,0.0,1.0)+projected_extrude;float extrude_length_without_perspective\x3dlength(dist);float extrude_length_with_perspective\x3dlength(projected_extrude.xy/gl_Position.w*u_units_to_pixels);v_gamma_scale\x3dextrude_length_without_perspective/extrude_length_with_perspective;v_linesofar\x3da_linesofar;v_width2\x3dvec2(outset,inset);v_width\x3dfloorwidth;}"),
Lh=la("uniform lowp float u_device_pixel_ratio;uniform sampler2D u_image;uniform float u_sdfgamma;uniform float u_mix;varying vec2 v_normal;varying vec2 v_width2;varying vec2 v_tex_a;varying vec2 v_tex_b;varying float v_gamma_scale;\n#pragma mapbox: define highp vec4 color\n#pragma mapbox: define lowp float blur\n#pragma mapbox: define lowp float opacity\n#pragma mapbox: define mediump float width\n#pragma mapbox: define lowp float floorwidth\nvoid main() {\n#pragma mapbox: initialize highp vec4 color\n#pragma mapbox: initialize lowp float blur\n#pragma mapbox: initialize lowp float opacity\n#pragma mapbox: initialize mediump float width\n#pragma mapbox: initialize lowp float floorwidth\nfloat dist\x3dlength(v_normal)*v_width2.s;float blur2\x3d(blur+1.0/u_device_pixel_ratio)*v_gamma_scale;float alpha\x3dclamp(min(dist-(v_width2.t-blur2),v_width2.s-dist)/blur2,0.0,1.0);float sdfdist_a\x3dtexture2D(u_image,v_tex_a).a;float sdfdist_b\x3dtexture2D(u_image,v_tex_b).a;float sdfdist\x3dmix(sdfdist_a,sdfdist_b,u_mix);alpha*\x3dsmoothstep(0.5-u_sdfgamma/floorwidth,0.5+u_sdfgamma/floorwidth,sdfdist);gl_FragColor\x3dcolor*(alpha*opacity);\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor\x3dvec4(1.0);\n#endif\n}",
"\n#define scale 0.015873016\n#define LINE_DISTANCE_SCALE 2.0\nattribute vec2 a_pos_normal;attribute vec4 a_data;uniform mat4 u_matrix;uniform mediump float u_ratio;uniform lowp float u_device_pixel_ratio;uniform vec2 u_patternscale_a;uniform float u_tex_y_a;uniform vec2 u_patternscale_b;uniform float u_tex_y_b;uniform vec2 u_units_to_pixels;varying vec2 v_normal;varying vec2 v_width2;varying vec2 v_tex_a;varying vec2 v_tex_b;varying float v_gamma_scale;\n#pragma mapbox: define highp vec4 color\n#pragma mapbox: define lowp float blur\n#pragma mapbox: define lowp float opacity\n#pragma mapbox: define mediump float gapwidth\n#pragma mapbox: define lowp float offset\n#pragma mapbox: define mediump float width\n#pragma mapbox: define lowp float floorwidth\nvoid main() {\n#pragma mapbox: initialize highp vec4 color\n#pragma mapbox: initialize lowp float blur\n#pragma mapbox: initialize lowp float opacity\n#pragma mapbox: initialize mediump float gapwidth\n#pragma mapbox: initialize lowp float offset\n#pragma mapbox: initialize mediump float width\n#pragma mapbox: initialize lowp float floorwidth\nfloat ANTIALIASING\x3d1.0/u_device_pixel_ratio/2.0;vec2 a_extrude\x3da_data.xy-128.0;float a_direction\x3dmod(a_data.z,4.0)-1.0;float a_linesofar\x3d(floor(a_data.z/4.0)+a_data.w*64.0)*LINE_DISTANCE_SCALE;vec2 pos\x3dfloor(a_pos_normal*0.5);mediump vec2 normal\x3da_pos_normal-2.0*pos;normal.y\x3dnormal.y*2.0-1.0;v_normal\x3dnormal;gapwidth\x3dgapwidth/2.0;float halfwidth\x3dwidth/2.0;offset\x3d-1.0*offset;float inset\x3dgapwidth+(gapwidth \x3e 0.0 ? ANTIALIASING : 0.0);float outset\x3dgapwidth+halfwidth*(gapwidth \x3e 0.0 ? 2.0 : 1.0)+(halfwidth\x3d\x3d0.0 ? 0.0 : ANTIALIASING);mediump vec2 dist\x3doutset*a_extrude*scale;mediump float u\x3d0.5*a_direction;mediump float t\x3d1.0-abs(u);mediump vec2 offset2\x3doffset*a_extrude*scale*normal.y*mat2(t,-u,u,t);vec4 projected_extrude\x3du_matrix*vec4(dist/u_ratio,0.0,0.0);gl_Position\x3du_matrix*vec4(pos+offset2/u_ratio,0.0,1.0)+projected_extrude;float extrude_length_without_perspective\x3dlength(dist);float extrude_length_with_perspective\x3dlength(projected_extrude.xy/gl_Position.w*u_units_to_pixels);v_gamma_scale\x3dextrude_length_without_perspective/extrude_length_with_perspective;v_tex_a\x3dvec2(a_linesofar*u_patternscale_a.x/floorwidth,normal.y*u_patternscale_a.y+u_tex_y_a);v_tex_b\x3dvec2(a_linesofar*u_patternscale_b.x/floorwidth,normal.y*u_patternscale_b.y+u_tex_y_b);v_width2\x3dvec2(outset,inset);}"),
vh=la("uniform float u_fade_t;uniform float u_opacity;uniform sampler2D u_image0;uniform sampler2D u_image1;varying vec2 v_pos0;varying vec2 v_pos1;uniform float u_brightness_low;uniform float u_brightness_high;uniform float u_saturation_factor;uniform float u_contrast_factor;uniform vec3 u_spin_weights;void main() {vec4 color0\x3dtexture2D(u_image0,v_pos0);vec4 color1\x3dtexture2D(u_image1,v_pos1);if (color0.a \x3e 0.0) {color0.rgb\x3dcolor0.rgb/color0.a;}if (color1.a \x3e 0.0) {color1.rgb\x3dcolor1.rgb/color1.a;}vec4 color\x3dmix(color0,color1,u_fade_t);color.a*\x3du_opacity;vec3 rgb\x3dcolor.rgb;rgb\x3dvec3(dot(rgb,u_spin_weights.xyz),dot(rgb,u_spin_weights.zxy),dot(rgb,u_spin_weights.yzx));float average\x3d(color.r+color.g+color.b)/3.0;rgb+\x3d(average-rgb)*u_saturation_factor;rgb\x3d(rgb-0.5)*u_contrast_factor+0.5;vec3 u_high_vec\x3dvec3(u_brightness_low,u_brightness_low,u_brightness_low);vec3 u_low_vec\x3dvec3(u_brightness_high,u_brightness_high,u_brightness_high);gl_FragColor\x3dvec4(mix(u_high_vec,u_low_vec,rgb)*color.a,color.a);\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor\x3dvec4(1.0);\n#endif\n}",
"uniform mat4 u_matrix;uniform vec2 u_tl_parent;uniform float u_scale_parent;uniform float u_buffer_scale;attribute vec2 a_pos;attribute vec2 a_texture_pos;varying vec2 v_pos0;varying vec2 v_pos1;void main() {gl_Position\x3du_matrix*vec4(a_pos,0,1);v_pos0\x3d(((a_texture_pos/8192.0)-0.5)/u_buffer_scale )+0.5;v_pos1\x3d(v_pos0*u_scale_parent)+u_tl_parent;}"),Ga=la("uniform sampler2D u_texture;varying vec2 v_tex;varying float v_fade_opacity;\n#pragma mapbox: define lowp float opacity\nvoid main() {\n#pragma mapbox: initialize lowp float opacity\nlowp float alpha\x3dopacity*v_fade_opacity;gl_FragColor\x3dtexture2D(u_texture,v_tex)*alpha;\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor\x3dvec4(1.0);\n#endif\n}",
"const float PI\x3d3.141592653589793;attribute vec4 a_pos_offset;attribute vec4 a_data;attribute vec4 a_pixeloffset;attribute vec3 a_projected_pos;attribute float a_fade_opacity;uniform bool u_is_size_zoom_constant;uniform bool u_is_size_feature_constant;uniform highp float u_size_t;uniform highp float u_size;uniform highp float u_camera_to_center_distance;uniform highp float u_pitch;uniform bool u_rotate_symbol;uniform highp float u_aspect_ratio;uniform float u_fade_change;uniform mat4 u_matrix;uniform mat4 u_label_plane_matrix;uniform mat4 u_coord_matrix;uniform bool u_is_text;uniform bool u_pitch_with_map;uniform vec2 u_texsize;varying vec2 v_tex;varying float v_fade_opacity;\n#pragma mapbox: define lowp float opacity\nvoid main() {\n#pragma mapbox: initialize lowp float opacity\nvec2 a_pos\x3da_pos_offset.xy;vec2 a_offset\x3da_pos_offset.zw;vec2 a_tex\x3da_data.xy;vec2 a_size\x3da_data.zw;float a_size_min\x3dfloor(a_size[0]*0.5);vec2 a_pxoffset\x3da_pixeloffset.xy;vec2 a_minFontScale\x3da_pixeloffset.zw/256.0;highp float segment_angle\x3d-a_projected_pos[2];float size;if (!u_is_size_zoom_constant \x26\x26 !u_is_size_feature_constant) {size\x3dmix(a_size_min,a_size[1],u_size_t)/128.0;} else if (u_is_size_zoom_constant \x26\x26 !u_is_size_feature_constant) {size\x3da_size_min/128.0;} else {size\x3du_size;}vec4 projectedPoint\x3du_matrix*vec4(a_pos,0,1);highp float camera_to_anchor_distance\x3dprojectedPoint.w;highp float distance_ratio\x3du_pitch_with_map ?\ncamera_to_anchor_distance/u_camera_to_center_distance :\nu_camera_to_center_distance/camera_to_anchor_distance;highp float perspective_ratio\x3dclamp(0.5+0.5*distance_ratio,0.0,4.0);size*\x3dperspective_ratio;float fontScale\x3du_is_text ? size/24.0 : size;highp float symbol_rotation\x3d0.0;if (u_rotate_symbol) {vec4 offsetProjectedPoint\x3du_matrix*vec4(a_pos+vec2(1,0),0,1);vec2 a\x3dprojectedPoint.xy/projectedPoint.w;vec2 b\x3doffsetProjectedPoint.xy/offsetProjectedPoint.w;symbol_rotation\x3datan((b.y-a.y)/u_aspect_ratio,b.x-a.x);}highp float angle_sin\x3dsin(segment_angle+symbol_rotation);highp float angle_cos\x3dcos(segment_angle+symbol_rotation);mat2 rotation_matrix\x3dmat2(angle_cos,-1.0*angle_sin,angle_sin,angle_cos);vec4 projected_pos\x3du_label_plane_matrix*vec4(a_projected_pos.xy,0.0,1.0);gl_Position\x3du_coord_matrix*vec4(projected_pos.xy/projected_pos.w+rotation_matrix*(a_offset/32.0*max(a_minFontScale,fontScale)+a_pxoffset/16.0),0.0,1.0);v_tex\x3da_tex/u_texsize;vec2 fade_opacity\x3dunpack_opacity(a_fade_opacity);float fade_change\x3dfade_opacity[1] \x3e 0.5 ? u_fade_change :-u_fade_change;v_fade_opacity\x3dmax(0.0,min(1.0,fade_opacity[0]+fade_change));}"),
Fa=la("#define SDF_PX 8.0\nuniform bool u_is_halo;uniform sampler2D u_texture;uniform highp float u_gamma_scale;uniform lowp float u_device_pixel_ratio;uniform bool u_is_text;varying vec2 v_data0;varying vec3 v_data1;\n#pragma mapbox: define highp vec4 fill_color\n#pragma mapbox: define highp vec4 halo_color\n#pragma mapbox: define lowp float opacity\n#pragma mapbox: define lowp float halo_width\n#pragma mapbox: define lowp float halo_blur\nvoid main() {\n#pragma mapbox: initialize highp vec4 fill_color\n#pragma mapbox: initialize highp vec4 halo_color\n#pragma mapbox: initialize lowp float opacity\n#pragma mapbox: initialize lowp float halo_width\n#pragma mapbox: initialize lowp float halo_blur\nfloat EDGE_GAMMA\x3d0.105/u_device_pixel_ratio;vec2 tex\x3dv_data0.xy;float gamma_scale\x3dv_data1.x;float size\x3dv_data1.y;float fade_opacity\x3dv_data1[2];float fontScale\x3du_is_text ? size/24.0 : size;lowp vec4 color\x3dfill_color;highp float gamma\x3dEDGE_GAMMA/(fontScale*u_gamma_scale);lowp float buff\x3d(256.0-64.0)/256.0;if (u_is_halo) {color\x3dhalo_color;gamma\x3d(halo_blur*1.19/SDF_PX+EDGE_GAMMA)/(fontScale*u_gamma_scale);buff\x3d(6.0-halo_width/fontScale)/SDF_PX;}lowp float dist\x3dtexture2D(u_texture,tex).a;highp float gamma_scaled\x3dgamma*gamma_scale;highp float alpha\x3dsmoothstep(buff-gamma_scaled,buff+gamma_scaled,dist);gl_FragColor\x3dcolor*(alpha*opacity*fade_opacity);\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor\x3dvec4(1.0);\n#endif\n}",
"const float PI\x3d3.141592653589793;attribute vec4 a_pos_offset;attribute vec4 a_data;attribute vec4 a_pixeloffset;attribute vec3 a_projected_pos;attribute float a_fade_opacity;uniform bool u_is_size_zoom_constant;uniform bool u_is_size_feature_constant;uniform highp float u_size_t;uniform highp float u_size;uniform mat4 u_matrix;uniform mat4 u_label_plane_matrix;uniform mat4 u_coord_matrix;uniform bool u_is_text;uniform bool u_pitch_with_map;uniform highp float u_pitch;uniform bool u_rotate_symbol;uniform highp float u_aspect_ratio;uniform highp float u_camera_to_center_distance;uniform float u_fade_change;uniform vec2 u_texsize;varying vec2 v_data0;varying vec3 v_data1;\n#pragma mapbox: define highp vec4 fill_color\n#pragma mapbox: define highp vec4 halo_color\n#pragma mapbox: define lowp float opacity\n#pragma mapbox: define lowp float halo_width\n#pragma mapbox: define lowp float halo_blur\nvoid main() {\n#pragma mapbox: initialize highp vec4 fill_color\n#pragma mapbox: initialize highp vec4 halo_color\n#pragma mapbox: initialize lowp float opacity\n#pragma mapbox: initialize lowp float halo_width\n#pragma mapbox: initialize lowp float halo_blur\nvec2 a_pos\x3da_pos_offset.xy;vec2 a_offset\x3da_pos_offset.zw;vec2 a_tex\x3da_data.xy;vec2 a_size\x3da_data.zw;float a_size_min\x3dfloor(a_size[0]*0.5);vec2 a_pxoffset\x3da_pixeloffset.xy;highp float segment_angle\x3d-a_projected_pos[2];float size;if (!u_is_size_zoom_constant \x26\x26 !u_is_size_feature_constant) {size\x3dmix(a_size_min,a_size[1],u_size_t)/128.0;} else if (u_is_size_zoom_constant \x26\x26 !u_is_size_feature_constant) {size\x3da_size_min/128.0;} else {size\x3du_size;}vec4 projectedPoint\x3du_matrix*vec4(a_pos,0,1);highp float camera_to_anchor_distance\x3dprojectedPoint.w;highp float distance_ratio\x3du_pitch_with_map ?\ncamera_to_anchor_distance/u_camera_to_center_distance :\nu_camera_to_center_distance/camera_to_anchor_distance;highp float perspective_ratio\x3dclamp(0.5+0.5*distance_ratio,0.0,4.0);size*\x3dperspective_ratio;float fontScale\x3du_is_text ? size/24.0 : size;highp float symbol_rotation\x3d0.0;if (u_rotate_symbol) {vec4 offsetProjectedPoint\x3du_matrix*vec4(a_pos+vec2(1,0),0,1);vec2 a\x3dprojectedPoint.xy/projectedPoint.w;vec2 b\x3doffsetProjectedPoint.xy/offsetProjectedPoint.w;symbol_rotation\x3datan((b.y-a.y)/u_aspect_ratio,b.x-a.x);}highp float angle_sin\x3dsin(segment_angle+symbol_rotation);highp float angle_cos\x3dcos(segment_angle+symbol_rotation);mat2 rotation_matrix\x3dmat2(angle_cos,-1.0*angle_sin,angle_sin,angle_cos);vec4 projected_pos\x3du_label_plane_matrix*vec4(a_projected_pos.xy,0.0,1.0);gl_Position\x3du_coord_matrix*vec4(projected_pos.xy/projected_pos.w+rotation_matrix*(a_offset/32.0*fontScale+a_pxoffset),0.0,1.0);float gamma_scale\x3dgl_Position.w;vec2 fade_opacity\x3dunpack_opacity(a_fade_opacity);float fade_change\x3dfade_opacity[1] \x3e 0.5 ? u_fade_change :-u_fade_change;float interpolated_fade_opacity\x3dmax(0.0,min(1.0,fade_opacity[0]+fade_change));v_data0\x3da_tex/u_texsize;v_data1\x3dvec3(gamma_scale,size,interpolated_fade_opacity);}"),
Oa=la("#define SDF_PX 8.0\n#define SDF 1.0\n#define ICON 0.0\nuniform bool u_is_halo;uniform sampler2D u_texture;uniform sampler2D u_texture_icon;uniform highp float u_gamma_scale;uniform lowp float u_device_pixel_ratio;varying vec4 v_data0;varying vec4 v_data1;\n#pragma mapbox: define highp vec4 fill_color\n#pragma mapbox: define highp vec4 halo_color\n#pragma mapbox: define lowp float opacity\n#pragma mapbox: define lowp float halo_width\n#pragma mapbox: define lowp float halo_blur\nvoid main() {\n#pragma mapbox: initialize highp vec4 fill_color\n#pragma mapbox: initialize highp vec4 halo_color\n#pragma mapbox: initialize lowp float opacity\n#pragma mapbox: initialize lowp float halo_width\n#pragma mapbox: initialize lowp float halo_blur\nfloat fade_opacity\x3dv_data1[2];if (v_data1.w\x3d\x3dICON) {vec2 tex_icon\x3dv_data0.zw;lowp float alpha\x3dopacity*fade_opacity;gl_FragColor\x3dtexture2D(u_texture_icon,tex_icon)*alpha;\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor\x3dvec4(1.0);\n#endif\nreturn;}vec2 tex\x3dv_data0.xy;float EDGE_GAMMA\x3d0.105/u_device_pixel_ratio;float gamma_scale\x3dv_data1.x;float size\x3dv_data1.y;float fontScale\x3dsize/24.0;lowp vec4 color\x3dfill_color;highp float gamma\x3dEDGE_GAMMA/(fontScale*u_gamma_scale);lowp float buff\x3d(256.0-64.0)/256.0;if (u_is_halo) {color\x3dhalo_color;gamma\x3d(halo_blur*1.19/SDF_PX+EDGE_GAMMA)/(fontScale*u_gamma_scale);buff\x3d(6.0-halo_width/fontScale)/SDF_PX;}lowp float dist\x3dtexture2D(u_texture,tex).a;highp float gamma_scaled\x3dgamma*gamma_scale;highp float alpha\x3dsmoothstep(buff-gamma_scaled,buff+gamma_scaled,dist);gl_FragColor\x3dcolor*(alpha*opacity*fade_opacity);\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor\x3dvec4(1.0);\n#endif\n}",
"const float PI\x3d3.141592653589793;attribute vec4 a_pos_offset;attribute vec4 a_data;attribute vec3 a_projected_pos;attribute float a_fade_opacity;uniform bool u_is_size_zoom_constant;uniform bool u_is_size_feature_constant;uniform highp float u_size_t;uniform highp float u_size;uniform mat4 u_matrix;uniform mat4 u_label_plane_matrix;uniform mat4 u_coord_matrix;uniform bool u_is_text;uniform bool u_pitch_with_map;uniform highp float u_pitch;uniform bool u_rotate_symbol;uniform highp float u_aspect_ratio;uniform highp float u_camera_to_center_distance;uniform float u_fade_change;uniform vec2 u_texsize;uniform vec2 u_texsize_icon;varying vec4 v_data0;varying vec4 v_data1;\n#pragma mapbox: define highp vec4 fill_color\n#pragma mapbox: define highp vec4 halo_color\n#pragma mapbox: define lowp float opacity\n#pragma mapbox: define lowp float halo_width\n#pragma mapbox: define lowp float halo_blur\nvoid main() {\n#pragma mapbox: initialize highp vec4 fill_color\n#pragma mapbox: initialize highp vec4 halo_color\n#pragma mapbox: initialize lowp float opacity\n#pragma mapbox: initialize lowp float halo_width\n#pragma mapbox: initialize lowp float halo_blur\nvec2 a_pos\x3da_pos_offset.xy;vec2 a_offset\x3da_pos_offset.zw;vec2 a_tex\x3da_data.xy;vec2 a_size\x3da_data.zw;float a_size_min\x3dfloor(a_size[0]*0.5);float is_sdf\x3da_size[0]-2.0*a_size_min;highp float segment_angle\x3d-a_projected_pos[2];float size;if (!u_is_size_zoom_constant \x26\x26 !u_is_size_feature_constant) {size\x3dmix(a_size_min,a_size[1],u_size_t)/128.0;} else if (u_is_size_zoom_constant \x26\x26 !u_is_size_feature_constant) {size\x3da_size_min/128.0;} else {size\x3du_size;}vec4 projectedPoint\x3du_matrix*vec4(a_pos,0,1);highp float camera_to_anchor_distance\x3dprojectedPoint.w;highp float distance_ratio\x3du_pitch_with_map ?\ncamera_to_anchor_distance/u_camera_to_center_distance :\nu_camera_to_center_distance/camera_to_anchor_distance;highp float perspective_ratio\x3dclamp(0.5+0.5*distance_ratio,0.0,4.0);size*\x3dperspective_ratio;float fontScale\x3dsize/24.0;highp float symbol_rotation\x3d0.0;if (u_rotate_symbol) {vec4 offsetProjectedPoint\x3du_matrix*vec4(a_pos+vec2(1,0),0,1);vec2 a\x3dprojectedPoint.xy/projectedPoint.w;vec2 b\x3doffsetProjectedPoint.xy/offsetProjectedPoint.w;symbol_rotation\x3datan((b.y-a.y)/u_aspect_ratio,b.x-a.x);}highp float angle_sin\x3dsin(segment_angle+symbol_rotation);highp float angle_cos\x3dcos(segment_angle+symbol_rotation);mat2 rotation_matrix\x3dmat2(angle_cos,-1.0*angle_sin,angle_sin,angle_cos);vec4 projected_pos\x3du_label_plane_matrix*vec4(a_projected_pos.xy,0.0,1.0);gl_Position\x3du_coord_matrix*vec4(projected_pos.xy/projected_pos.w+rotation_matrix*(a_offset/32.0*fontScale),0.0,1.0);float gamma_scale\x3dgl_Position.w;vec2 fade_opacity\x3dunpack_opacity(a_fade_opacity);float fade_change\x3dfade_opacity[1] \x3e 0.5 ? u_fade_change :-u_fade_change;float interpolated_fade_opacity\x3dmax(0.0,min(1.0,fade_opacity[0]+fade_change));v_data0.xy\x3da_tex/u_texsize;v_data0.zw\x3da_tex/u_texsize_icon;v_data1\x3dvec4(gamma_scale,size,interpolated_fade_opacity,is_sdf);}"),
Sa=Object.freeze({__proto__:null,prelude:ah,background:bh,backgroundPattern:Th,circle:ch,clippingMask:bg,heatmap:og,heatmapTexture:qg,collisionBox:ug,collisionCircle:Tg,debug:Ig,fill:jh,fillOutline:Ug,fillOutlinePattern:Wf,fillPattern:kh,fillExtrusion:pg,fillExtrusionPattern:Bg,hillshadePrepare:th,hillshade:uh,line:Bh,lineGradient:Gg,linePattern:lh,lineSDF:Lh,raster:vh,symbolIcon:Ga,symbolSDF:Fa,symbolTextAndIcon:Oa}),cb=function(){this.boundLayoutVertexBuffer=this.boundProgram=null;this.boundPaintVertexBuffers=
[];this.vao=this.boundDynamicVertexBuffer=this.boundVertexOffset=this.boundIndexBuffer=null};cb.prototype.bind=function(R,X,U,da,va,Ca,Qa,lb){this.context=R;for(var Lb=this.boundPaintVertexBuffers.length!==da.length,Rb=0;!Lb&&Rb<da.length;Rb++)this.boundPaintVertexBuffers[Rb]!==da[Rb]&&(Lb=!0);Lb=!this.vao||this.boundProgram!==X||this.boundLayoutVertexBuffer!==U||Lb||this.boundIndexBuffer!==va||this.boundVertexOffset!==Ca||this.boundDynamicVertexBuffer!==Qa||this.boundDynamicVertexBuffer2!==lb;!R.extVertexArrayObject||
Lb?this.freshBind(X,U,da,va,Ca,Qa,lb):(R.bindVertexArrayOES.set(this.vao),Qa&&Qa.bind(),va&&va.dynamicDraw&&va.bind(),lb&&lb.bind())};cb.prototype.freshBind=function(R,X,U,da,va,Ca,Qa){var lb=R.numAttributes,Lb=this.context,Rb=Lb.gl;if(Lb.extVertexArrayObject)this.vao&&this.destroy(),this.vao=Lb.extVertexArrayObject.createVertexArrayOES(),Lb.bindVertexArrayOES.set(this.vao),this.boundProgram=R,this.boundLayoutVertexBuffer=X,this.boundPaintVertexBuffers=U,this.boundIndexBuffer=da,this.boundVertexOffset=
va,this.boundDynamicVertexBuffer=Ca,this.boundDynamicVertexBuffer2=Qa;else{var dc=Lb.currentNumAttributes||0;for(var Ic=lb;Ic<dc;Ic++)Rb.disableVertexAttribArray(Ic)}X.enableAttributes(Rb,R);for(dc=0;dc<U.length;dc+=1)U[dc].enableAttributes(Rb,R);Ca&&Ca.enableAttributes(Rb,R);Qa&&Qa.enableAttributes(Rb,R);X.bind();X.setVertexAttribPointers(Rb,R,va);for(X=0;X<U.length;X+=1)dc=U[X],dc.bind(),dc.setVertexAttribPointers(Rb,R,va);Ca&&(Ca.bind(),Ca.setVertexAttribPointers(Rb,R,va));da&&da.bind();Qa&&(Qa.bind(),
Qa.setVertexAttribPointers(Rb,R,va));Lb.currentNumAttributes=lb};cb.prototype.destroy=function(){this.vao&&(this.context.extVertexArrayObject.deleteVertexArrayOES(this.vao),this.vao=null)};var jb=function(R,X,U,da,va){var Ca=R.gl;this.program=Ca.createProgram();var Qa=U?U.defines():[];va&&Qa.push("#define OVERDRAW_INSPECTOR;");va=Qa.concat(ah.fragmentSource,X.fragmentSource).join("\n");Qa=Qa.concat(ah.vertexSource,X.vertexSource).join("\n");X=Ca.createShader(Ca.FRAGMENT_SHADER);if(Ca.isContextLost())this.failedToCreate=
!0;else if(Ca.shaderSource(X,va),Ca.compileShader(X),Ca.attachShader(this.program,X),va=Ca.createShader(Ca.VERTEX_SHADER),Ca.isContextLost())this.failedToCreate=!0;else{Ca.shaderSource(va,Qa);Ca.compileShader(va);Ca.attachShader(this.program,va);Qa=U?U.layoutAttributes:[];for(var lb=0;lb<Qa.length;lb++)Ca.bindAttribLocation(this.program,lb,Qa[lb].name);Ca.linkProgram(this.program);Ca.deleteShader(va);Ca.deleteShader(X);this.numAttributes=Ca.getProgramParameter(this.program,Ca.ACTIVE_ATTRIBUTES);this.attributes=
{};X={};for(va=0;va<this.numAttributes;va++)(Qa=Ca.getActiveAttrib(this.program,va))&&(this.attributes[Qa.name]=Ca.getAttribLocation(this.program,Qa.name));va=Ca.getProgramParameter(this.program,Ca.ACTIVE_UNIFORMS);for(Qa=0;Qa<va;Qa++)(lb=Ca.getActiveUniform(this.program,Qa))&&(X[lb.name]=Ca.getUniformLocation(this.program,lb.name));this.fixedUniforms=da(R,X);this.binderUniforms=U?U.getUniforms(R,X):[]}};jb.prototype.draw=function(R,X,U,da,va,Ca,Qa,lb,Lb,Rb,dc,Ic,Gc,Xc,$c,Wc){var wd,Qd=R.gl;if(!this.failedToCreate){R.program.set(this.program);
R.setDepthMode(U);R.setStencilMode(da);R.setColorMode(va);R.setCullFace(Ca);for(var yd in this.fixedUniforms)this.fixedUniforms[yd].set(Qa[yd]);Xc&&Xc.setUniforms(R,this.binderUniforms,Ic,{zoom:Gc});U=(wd={},wd[Qd.LINES]=2,wd[Qd.TRIANGLES]=3,wd[Qd.LINE_STRIP]=1,wd)[X];wd=0;for(dc=dc.get();wd<dc.length;wd+=1)da=dc[wd],va=da.vaos||(da.vaos={}),(va[lb]||(va[lb]=new cb)).bind(R,this,Lb,Xc?Xc.getPaintVertexBuffers():[],Rb,da.vertexOffset,$c,Wc),Qd.drawElements(X,da.primitiveLength*U,Qd.UNSIGNED_SHORT,
da.primitiveOffset*U*2)}};var Bb=function(R,X,U,da){var va=X.style.light,Ca=va.properties.get("position");Ca=[Ca.x,Ca.y,Ca.z];var Qa=a.create$1();"viewport"===va.properties.get("anchor")&&a.fromRotation(Qa,-X.transform.angle);a.transformMat3(Ca,Ca,Qa);X=va.properties.get("color");return{u_matrix:R,u_lightpos:Ca,u_lightintensity:va.properties.get("intensity"),u_lightcolor:[X.r,X.g,X.b],u_vertical_gradient:+U,u_opacity:da}},Xb=function(R,X,U,da){var va=R.transform;if("map"===da.paint.get("circle-pitch-alignment")){var Ca=
ma(U,1,va.zoom);var Qa=!0;Ca=[Ca,Ca]}else Qa=!1,Ca=va.pixelsToGLUnits;return{u_camera_to_center_distance:va.cameraToCenterDistance,u_scale_with_map:+("map"===da.paint.get("circle-pitch-scale")),u_matrix:R.translatePosMatrix(X.posMatrix,U,da.paint.get("circle-translate"),da.paint.get("circle-translate-anchor")),u_pitch_with_map:+Qa,u_device_pixel_ratio:a.browser.devicePixelRatio,u_extrude_scale:Ca}},Ib=function(R,X,U){void 0===U&&(U=1);return{u_matrix:R,u_color:X,u_overlay:0,u_overlay_scale:U}},gc=
function(R,X,U){var da=R.transform;return{u_matrix:na(R,X,U),u_ratio:1/ma(X,1,da.zoom),u_device_pixel_ratio:a.browser.devicePixelRatio,u_units_to_pixels:[1/da.pixelsToGLUnits[0],1/da.pixelsToGLUnits[1]]}},hc=function(R,X,U,da,va,Ca,Qa,lb,Lb,Rb){var dc=va.transform;return{u_is_size_zoom_constant:+("constant"===R||"source"===R),u_is_size_feature_constant:+("constant"===R||"camera"===R),u_size_t:X?X.uSizeT:0,u_size:X?X.uSize:0,u_camera_to_center_distance:dc.cameraToCenterDistance,u_pitch:dc.pitch/360*
2*Math.PI,u_rotate_symbol:+U,u_aspect_ratio:dc.width/dc.height,u_fade_change:va.options.fadeDuration?va.symbolFadeChange:1,u_matrix:Ca,u_label_plane_matrix:Qa,u_coord_matrix:lb,u_is_text:+Lb,u_pitch_with_map:+da,u_texsize:Rb,u_texture:0}},qc=function(R,X,U,da,va,Ca,Qa,lb,Lb,Rb,dc){var Ic=va.transform;return a.extend(hc(R,X,U,da,va,Ca,Qa,lb,Lb,Rb),{u_gamma_scale:da?Math.cos(Ic._pitch)*Ic.cameraToCenterDistance:1,u_device_pixel_ratio:a.browser.devicePixelRatio,u_is_halo:+dc})},Ec=function(R,X,U,da,
va,Ca,Qa,lb,Lb,Rb){return a.extend(qc(R,X,U,da,va,Ca,Qa,lb,!0,Lb,!0),{u_texsize_icon:Rb,u_texture_icon:1})},ld={fillExtrusion:function(R,X){return{u_matrix:new a.UniformMatrix4f(R,X.u_matrix),u_lightpos:new a.Uniform3f(R,X.u_lightpos),u_lightintensity:new a.Uniform1f(R,X.u_lightintensity),u_lightcolor:new a.Uniform3f(R,X.u_lightcolor),u_vertical_gradient:new a.Uniform1f(R,X.u_vertical_gradient),u_opacity:new a.Uniform1f(R,X.u_opacity)}},fillExtrusionPattern:function(R,X){return{u_matrix:new a.UniformMatrix4f(R,
X.u_matrix),u_lightpos:new a.Uniform3f(R,X.u_lightpos),u_lightintensity:new a.Uniform1f(R,X.u_lightintensity),u_lightcolor:new a.Uniform3f(R,X.u_lightcolor),u_vertical_gradient:new a.Uniform1f(R,X.u_vertical_gradient),u_height_factor:new a.Uniform1f(R,X.u_height_factor),u_image:new a.Uniform1i(R,X.u_image),u_texsize:new a.Uniform2f(R,X.u_texsize),u_pixel_coord_upper:new a.Uniform2f(R,X.u_pixel_coord_upper),u_pixel_coord_lower:new a.Uniform2f(R,X.u_pixel_coord_lower),u_scale:new a.Uniform3f(R,X.u_scale),
u_fade:new a.Uniform1f(R,X.u_fade),u_opacity:new a.Uniform1f(R,X.u_opacity)}},fill:function(R,X){return{u_matrix:new a.UniformMatrix4f(R,X.u_matrix)}},fillPattern:function(R,X){return{u_matrix:new a.UniformMatrix4f(R,X.u_matrix),u_image:new a.Uniform1i(R,X.u_image),u_texsize:new a.Uniform2f(R,X.u_texsize),u_pixel_coord_upper:new a.Uniform2f(R,X.u_pixel_coord_upper),u_pixel_coord_lower:new a.Uniform2f(R,X.u_pixel_coord_lower),u_scale:new a.Uniform3f(R,X.u_scale),u_fade:new a.Uniform1f(R,X.u_fade)}},
fillOutline:function(R,X){return{u_matrix:new a.UniformMatrix4f(R,X.u_matrix),u_world:new a.Uniform2f(R,X.u_world)}},fillOutlinePattern:function(R,X){return{u_matrix:new a.UniformMatrix4f(R,X.u_matrix),u_world:new a.Uniform2f(R,X.u_world),u_image:new a.Uniform1i(R,X.u_image),u_texsize:new a.Uniform2f(R,X.u_texsize),u_pixel_coord_upper:new a.Uniform2f(R,X.u_pixel_coord_upper),u_pixel_coord_lower:new a.Uniform2f(R,X.u_pixel_coord_lower),u_scale:new a.Uniform3f(R,X.u_scale),u_fade:new a.Uniform1f(R,
X.u_fade)}},circle:function(R,X){return{u_camera_to_center_distance:new a.Uniform1f(R,X.u_camera_to_center_distance),u_scale_with_map:new a.Uniform1i(R,X.u_scale_with_map),u_pitch_with_map:new a.Uniform1i(R,X.u_pitch_with_map),u_extrude_scale:new a.Uniform2f(R,X.u_extrude_scale),u_device_pixel_ratio:new a.Uniform1f(R,X.u_device_pixel_ratio),u_matrix:new a.UniformMatrix4f(R,X.u_matrix)}},collisionBox:function(R,X){return{u_matrix:new a.UniformMatrix4f(R,X.u_matrix),u_camera_to_center_distance:new a.Uniform1f(R,
X.u_camera_to_center_distance),u_pixels_to_tile_units:new a.Uniform1f(R,X.u_pixels_to_tile_units),u_extrude_scale:new a.Uniform2f(R,X.u_extrude_scale),u_overscale_factor:new a.Uniform1f(R,X.u_overscale_factor)}},collisionCircle:function(R,X){return{u_matrix:new a.UniformMatrix4f(R,X.u_matrix),u_inv_matrix:new a.UniformMatrix4f(R,X.u_inv_matrix),u_camera_to_center_distance:new a.Uniform1f(R,X.u_camera_to_center_distance),u_viewport_size:new a.Uniform2f(R,X.u_viewport_size)}},debug:function(R,X){return{u_color:new a.UniformColor(R,
X.u_color),u_matrix:new a.UniformMatrix4f(R,X.u_matrix),u_overlay:new a.Uniform1i(R,X.u_overlay),u_overlay_scale:new a.Uniform1f(R,X.u_overlay_scale)}},clippingMask:function(R,X){return{u_matrix:new a.UniformMatrix4f(R,X.u_matrix)}},heatmap:function(R,X){return{u_extrude_scale:new a.Uniform1f(R,X.u_extrude_scale),u_intensity:new a.Uniform1f(R,X.u_intensity),u_matrix:new a.UniformMatrix4f(R,X.u_matrix)}},heatmapTexture:function(R,X){return{u_matrix:new a.UniformMatrix4f(R,X.u_matrix),u_world:new a.Uniform2f(R,
X.u_world),u_image:new a.Uniform1i(R,X.u_image),u_color_ramp:new a.Uniform1i(R,X.u_color_ramp),u_opacity:new a.Uniform1f(R,X.u_opacity)}},hillshade:function(R,X){return{u_matrix:new a.UniformMatrix4f(R,X.u_matrix),u_image:new a.Uniform1i(R,X.u_image),u_latrange:new a.Uniform2f(R,X.u_latrange),u_light:new a.Uniform2f(R,X.u_light),u_shadow:new a.UniformColor(R,X.u_shadow),u_highlight:new a.UniformColor(R,X.u_highlight),u_accent:new a.UniformColor(R,X.u_accent)}},hillshadePrepare:function(R,X){return{u_matrix:new a.UniformMatrix4f(R,
X.u_matrix),u_image:new a.Uniform1i(R,X.u_image),u_dimension:new a.Uniform2f(R,X.u_dimension),u_zoom:new a.Uniform1f(R,X.u_zoom),u_maxzoom:new a.Uniform1f(R,X.u_maxzoom),u_unpack:new a.Uniform4f(R,X.u_unpack)}},line:function(R,X){return{u_matrix:new a.UniformMatrix4f(R,X.u_matrix),u_ratio:new a.Uniform1f(R,X.u_ratio),u_device_pixel_ratio:new a.Uniform1f(R,X.u_device_pixel_ratio),u_units_to_pixels:new a.Uniform2f(R,X.u_units_to_pixels)}},lineGradient:function(R,X){return{u_matrix:new a.UniformMatrix4f(R,
X.u_matrix),u_ratio:new a.Uniform1f(R,X.u_ratio),u_device_pixel_ratio:new a.Uniform1f(R,X.u_device_pixel_ratio),u_units_to_pixels:new a.Uniform2f(R,X.u_units_to_pixels),u_image:new a.Uniform1i(R,X.u_image)}},linePattern:function(R,X){return{u_matrix:new a.UniformMatrix4f(R,X.u_matrix),u_texsize:new a.Uniform2f(R,X.u_texsize),u_ratio:new a.Uniform1f(R,X.u_ratio),u_device_pixel_ratio:new a.Uniform1f(R,X.u_device_pixel_ratio),u_image:new a.Uniform1i(R,X.u_image),u_units_to_pixels:new a.Uniform2f(R,X.u_units_to_pixels),
u_scale:new a.Uniform3f(R,X.u_scale),u_fade:new a.Uniform1f(R,X.u_fade)}},lineSDF:function(R,X){return{u_matrix:new a.UniformMatrix4f(R,X.u_matrix),u_ratio:new a.Uniform1f(R,X.u_ratio),u_device_pixel_ratio:new a.Uniform1f(R,X.u_device_pixel_ratio),u_units_to_pixels:new a.Uniform2f(R,X.u_units_to_pixels),u_patternscale_a:new a.Uniform2f(R,X.u_patternscale_a),u_patternscale_b:new a.Uniform2f(R,X.u_patternscale_b),u_sdfgamma:new a.Uniform1f(R,X.u_sdfgamma),u_image:new a.Uniform1i(R,X.u_image),u_tex_y_a:new a.Uniform1f(R,
X.u_tex_y_a),u_tex_y_b:new a.Uniform1f(R,X.u_tex_y_b),u_mix:new a.Uniform1f(R,X.u_mix)}},raster:function(R,X){return{u_matrix:new a.UniformMatrix4f(R,X.u_matrix),u_tl_parent:new a.Uniform2f(R,X.u_tl_parent),u_scale_parent:new a.Uniform1f(R,X.u_scale_parent),u_buffer_scale:new a.Uniform1f(R,X.u_buffer_scale),u_fade_t:new a.Uniform1f(R,X.u_fade_t),u_opacity:new a.Uniform1f(R,X.u_opacity),u_image0:new a.Uniform1i(R,X.u_image0),u_image1:new a.Uniform1i(R,X.u_image1),u_brightness_low:new a.Uniform1f(R,
X.u_brightness_low),u_brightness_high:new a.Uniform1f(R,X.u_brightness_high),u_saturation_factor:new a.Uniform1f(R,X.u_saturation_factor),u_contrast_factor:new a.Uniform1f(R,X.u_contrast_factor),u_spin_weights:new a.Uniform3f(R,X.u_spin_weights)}},symbolIcon:function(R,X){return{u_is_size_zoom_constant:new a.Uniform1i(R,X.u_is_size_zoom_constant),u_is_size_feature_constant:new a.Uniform1i(R,X.u_is_size_feature_constant),u_size_t:new a.Uniform1f(R,X.u_size_t),u_size:new a.Uniform1f(R,X.u_size),u_camera_to_center_distance:new a.Uniform1f(R,
X.u_camera_to_center_distance),u_pitch:new a.Uniform1f(R,X.u_pitch),u_rotate_symbol:new a.Uniform1i(R,X.u_rotate_symbol),u_aspect_ratio:new a.Uniform1f(R,X.u_aspect_ratio),u_fade_change:new a.Uniform1f(R,X.u_fade_change),u_matrix:new a.UniformMatrix4f(R,X.u_matrix),u_label_plane_matrix:new a.UniformMatrix4f(R,X.u_label_plane_matrix),u_coord_matrix:new a.UniformMatrix4f(R,X.u_coord_matrix),u_is_text:new a.Uniform1i(R,X.u_is_text),u_pitch_with_map:new a.Uniform1i(R,X.u_pitch_with_map),u_texsize:new a.Uniform2f(R,
X.u_texsize),u_texture:new a.Uniform1i(R,X.u_texture)}},symbolSDF:function(R,X){return{u_is_size_zoom_constant:new a.Uniform1i(R,X.u_is_size_zoom_constant),u_is_size_feature_constant:new a.Uniform1i(R,X.u_is_size_feature_constant),u_size_t:new a.Uniform1f(R,X.u_size_t),u_size:new a.Uniform1f(R,X.u_size),u_camera_to_center_distance:new a.Uniform1f(R,X.u_camera_to_center_distance),u_pitch:new a.Uniform1f(R,X.u_pitch),u_rotate_symbol:new a.Uniform1i(R,X.u_rotate_symbol),u_aspect_ratio:new a.Uniform1f(R,
X.u_aspect_ratio),u_fade_change:new a.Uniform1f(R,X.u_fade_change),u_matrix:new a.UniformMatrix4f(R,X.u_matrix),u_label_plane_matrix:new a.UniformMatrix4f(R,X.u_label_plane_matrix),u_coord_matrix:new a.UniformMatrix4f(R,X.u_coord_matrix),u_is_text:new a.Uniform1i(R,X.u_is_text),u_pitch_with_map:new a.Uniform1i(R,X.u_pitch_with_map),u_texsize:new a.Uniform2f(R,X.u_texsize),u_texture:new a.Uniform1i(R,X.u_texture),u_gamma_scale:new a.Uniform1f(R,X.u_gamma_scale),u_device_pixel_ratio:new a.Uniform1f(R,
X.u_device_pixel_ratio),u_is_halo:new a.Uniform1i(R,X.u_is_halo)}},symbolTextAndIcon:function(R,X){return{u_is_size_zoom_constant:new a.Uniform1i(R,X.u_is_size_zoom_constant),u_is_size_feature_constant:new a.Uniform1i(R,X.u_is_size_feature_constant),u_size_t:new a.Uniform1f(R,X.u_size_t),u_size:new a.Uniform1f(R,X.u_size),u_camera_to_center_distance:new a.Uniform1f(R,X.u_camera_to_center_distance),u_pitch:new a.Uniform1f(R,X.u_pitch),u_rotate_symbol:new a.Uniform1i(R,X.u_rotate_symbol),u_aspect_ratio:new a.Uniform1f(R,
X.u_aspect_ratio),u_fade_change:new a.Uniform1f(R,X.u_fade_change),u_matrix:new a.UniformMatrix4f(R,X.u_matrix),u_label_plane_matrix:new a.UniformMatrix4f(R,X.u_label_plane_matrix),u_coord_matrix:new a.UniformMatrix4f(R,X.u_coord_matrix),u_is_text:new a.Uniform1i(R,X.u_is_text),u_pitch_with_map:new a.Uniform1i(R,X.u_pitch_with_map),u_texsize:new a.Uniform2f(R,X.u_texsize),u_texsize_icon:new a.Uniform2f(R,X.u_texsize_icon),u_texture:new a.Uniform1i(R,X.u_texture),u_texture_icon:new a.Uniform1i(R,X.u_texture_icon),
u_gamma_scale:new a.Uniform1f(R,X.u_gamma_scale),u_device_pixel_ratio:new a.Uniform1f(R,X.u_device_pixel_ratio),u_is_halo:new a.Uniform1i(R,X.u_is_halo)}},background:function(R,X){return{u_matrix:new a.UniformMatrix4f(R,X.u_matrix),u_opacity:new a.Uniform1f(R,X.u_opacity),u_color:new a.UniformColor(R,X.u_color)}},backgroundPattern:function(R,X){return{u_matrix:new a.UniformMatrix4f(R,X.u_matrix),u_opacity:new a.Uniform1f(R,X.u_opacity),u_image:new a.Uniform1i(R,X.u_image),u_pattern_tl_a:new a.Uniform2f(R,
X.u_pattern_tl_a),u_pattern_br_a:new a.Uniform2f(R,X.u_pattern_br_a),u_pattern_tl_b:new a.Uniform2f(R,X.u_pattern_tl_b),u_pattern_br_b:new a.Uniform2f(R,X.u_pattern_br_b),u_texsize:new a.Uniform2f(R,X.u_texsize),u_mix:new a.Uniform1f(R,X.u_mix),u_pattern_size_a:new a.Uniform2f(R,X.u_pattern_size_a),u_pattern_size_b:new a.Uniform2f(R,X.u_pattern_size_b),u_scale_a:new a.Uniform1f(R,X.u_scale_a),u_scale_b:new a.Uniform1f(R,X.u_scale_b),u_pixel_coord_upper:new a.Uniform2f(R,X.u_pixel_coord_upper),u_pixel_coord_lower:new a.Uniform2f(R,
X.u_pixel_coord_lower),u_tile_units_to_pixels:new a.Uniform1f(R,X.u_tile_units_to_pixels)}}},Dd,ye=a.identity(new Float32Array(16)),ze=new a.Color(1,0,0,1),We=new a.Color(0,1,0,1),fg=new a.Color(0,0,1,1),He=new a.Color(1,0,1,1),cg=new a.Color(0,1,1,1),Xf={symbol:function(R,X,U,da,va){if("translucent"===R.renderPass){var Ca=Bd.disabled,Qa=R.colorModeForRenderPass();if(U.layout.get("text-variable-anchor")){var lb=U.layout.get("text-rotation-alignment"),Lb=U.layout.get("text-pitch-alignment"),Rb=R.transform;
lb="map"===lb;Lb="map"===Lb;for(var dc=0;dc<da.length;dc+=1){var Ic=da[dc],Gc=X.getTile(Ic),Xc=Gc.getBucket(U);if(Xc&&Xc.text&&Xc.text.segments.get().length){var $c=a.evaluateSizeForZoom(Xc.textSizeData,Rb.zoom),Wc=ma(Gc,1,R.transform.zoom),wd=L(Ic.posMatrix,Lb,lb,R.transform,Wc),Qd="none"!==U.layout.get("icon-text-fit")&&Xc.hasIconData();if($c){Wc=lb;var yd=Lb,ge=va,be=a.symbolSize,ke=Rb;Ic=Ic.posMatrix;var re=Math.pow(2,Rb.zoom-Gc.tileID.overscaledZ),ne=$c,Le=Qd,we=Xc.text.placedSymbolArray;$c=
Xc.text.dynamicLayoutVertexArray;Qd=Xc.icon.dynamicLayoutVertexArray;Gc={};$c.clear();for(var kf=0;kf<we.length;kf++){var Ne=we.get(kf),xf=Xc.allowVerticalPlacement&&!Ne.placedOrientation,wf=Ne.hidden||!Ne.crossTileID||xf?null:ge[Ne.crossTileID];if(wf){xf=new a.Point(Ne.anchorX,Ne.anchorY);var lg=Z(xf,yd?Ic:wd),Cf=.5+ke.cameraToCenterDistance/lg.signedDistanceFromCamera*.5,Dg=be.evaluateSizeForFeature(Xc.textSizeData,ne,Ne)*Cf/a.ONE_EM;yd&&(Dg*=Xc.tilePixelRatio/re);Cf=wf.anchor;var ef=wf.width,hg=
wf.height,ca=wf.textOffset;wf=wf.textBoxScale;var ua=a.getAnchorAlignment(Cf);ef*=-(ua.horizontalAlign-.5);hg*=-(ua.verticalAlign-.5);Cf=a.evaluateVariableOffset(Cf,ca);Cf=new a.Point((ef/wf+Cf[0])*Dg,(hg/wf+Cf[1])*Dg);xf=yd?Z(xf.add(Cf),wd).point:lg.point.add(Wc?Cf.rotate(-ke.angle):Cf);lg=Xc.allowVerticalPlacement&&Ne.placedOrientation===a.WritingMode.vertical?Math.PI/2:0;for(Cf=0;Cf<Ne.numGlyphs;Cf++)a.addDynamicAttributes($c,xf,lg);Le&&0<=Ne.associatedIconIndex&&(Gc[Ne.associatedIconIndex]={shiftedAnchor:xf,
angle:lg})}else aa(Ne.numGlyphs,$c)}if(Le){Qd.clear();Wc=Xc.icon.placedSymbolArray;for(yd=0;yd<Wc.length;yd++)if(ge=Wc.get(yd),ge.hidden)aa(ge.numGlyphs,Qd);else if(be=Gc[yd])for(ke=0;ke<ge.numGlyphs;ke++)a.addDynamicAttributes(Qd,be.shiftedAnchor,be.angle);else aa(ge.numGlyphs,Qd);Xc.icon.dynamicLayoutVertexBuffer.updateData(Qd)}Xc.text.dynamicLayoutVertexBuffer.updateData($c)}}}}0!==U.paint.get("icon-opacity").constantOr(1)&&sa(R,X,U,da,!1,U.paint.get("icon-translate"),U.paint.get("icon-translate-anchor"),
U.layout.get("icon-rotation-alignment"),U.layout.get("icon-pitch-alignment"),U.layout.get("icon-keep-upright"),Ca,Qa);0!==U.paint.get("text-opacity").constantOr(1)&&sa(R,X,U,da,!0,U.paint.get("text-translate"),U.paint.get("text-translate-anchor"),U.layout.get("text-rotation-alignment"),U.layout.get("text-pitch-alignment"),U.layout.get("text-keep-upright"),Ca,Qa);X.map.showCollisionBoxes&&(oa(R,X,U,da,U.paint.get("text-translate"),U.paint.get("text-translate-anchor"),!0),oa(R,X,U,da,U.paint.get("icon-translate"),
U.paint.get("icon-translate-anchor"),!1))}},circle:function(R,X,U,da){if("translucent"===R.renderPass){var va=U.paint.get("circle-opacity"),Ca=U.paint.get("circle-stroke-width"),Qa=U.paint.get("circle-stroke-opacity"),lb=void 0!==U.layout.get("circle-sort-key").constantOr(1);if(0!==va.constantOr(1)||0!==Ca.constantOr(1)&&0!==Qa.constantOr(1)){va=R.context;Ca=va.gl;Qa=R.depthModeForSublayer(0,Zc.ReadOnly);for(var Lb=Bd.disabled,Rb=R.colorModeForRenderPass(),dc=[],Ic=0;Ic<da.length;Ic++){var Gc=da[Ic],
Xc=X.getTile(Gc),$c=Xc.getBucket(U);if($c){var Wc=$c.programConfigurations.get(U.id),wd=R.useProgram("circle",Wc),Qd=$c.layoutVertexBuffer,yd=$c.indexBuffer;Gc=Xb(R,Gc,Xc,U);Wc={programConfiguration:Wc,program:wd,layoutVertexBuffer:Qd,indexBuffer:yd,uniformValues:Gc};if(lb)for(wd=0,$c=$c.segments.get();wd<$c.length;wd+=1)Qd=$c[wd],dc.push({segments:new a.SegmentVector([Qd]),sortKey:Qd.sortKey,state:Wc});else dc.push({segments:$c.segments,sortKey:0,state:Wc})}}lb&&dc.sort(function(ge,be){return ge.sortKey-
be.sortKey});for(X=0;X<dc.length;X+=1)da=dc[X],lb=da.state,lb.program.draw(va,Ca.TRIANGLES,Qa,Lb,Rb,Zb.disabled,lb.uniformValues,U.id,lb.layoutVertexBuffer,lb.indexBuffer,da.segments,U.paint,R.transform.zoom,lb.programConfiguration)}}},heatmap:function(R,X,U,da){if(0!==U.paint.get("heatmap-opacity"))if("offscreen"===R.renderPass){var va=R.context,Ca=va.gl,Qa=Bd.disabled,lb=new Ob([Ca.ONE,Ca.ONE],a.Color.transparent,[!0,!0,!0,!0]),Lb=va.gl;va.activeTexture.set(Lb.TEXTURE1);va.viewport.set([0,0,R.width/
4,R.height/4]);var Rb=U.heatmapFbo;if(Rb)Lb.bindTexture(Lb.TEXTURE_2D,Rb.colorAttachment.get()),va.bindFramebuffer.set(Rb.framebuffer);else{var dc=Lb.createTexture();Lb.bindTexture(Lb.TEXTURE_2D,dc);Lb.texParameteri(Lb.TEXTURE_2D,Lb.TEXTURE_WRAP_S,Lb.CLAMP_TO_EDGE);Lb.texParameteri(Lb.TEXTURE_2D,Lb.TEXTURE_WRAP_T,Lb.CLAMP_TO_EDGE);Lb.texParameteri(Lb.TEXTURE_2D,Lb.TEXTURE_MIN_FILTER,Lb.LINEAR);Lb.texParameteri(Lb.TEXTURE_2D,Lb.TEXTURE_MAG_FILTER,Lb.LINEAR);Lb=Rb=U.heatmapFbo=va.createFramebuffer(R.width/
4,R.height/4,!1);Rb=va.gl;Rb.texImage2D(Rb.TEXTURE_2D,0,Rb.RGBA,R.width/4,R.height/4,0,Rb.RGBA,va.extRenderToTextureHalfFloat?va.extTextureHalfFloat.HALF_FLOAT_OES:Rb.UNSIGNED_BYTE,null);Lb.colorAttachment.set(dc)}va.clear({color:a.Color.transparent});for(dc=0;dc<da.length;dc++){var Ic=da[dc];if(!X.hasRenderableParent(Ic)){var Gc=X.getTile(Ic);if(Lb=Gc.getBucket(U)){Rb=Lb.programConfigurations.get(U.id);var Xc=R.useProgram("heatmap",Rb),$c=R.transform.zoom,Wc=Xc.draw,wd=Ca.TRIANGLES,Qd=Zc.disabled,
yd=Zb.disabled,ge=U.paint.get("heatmap-intensity");Ic={u_matrix:Ic.posMatrix,u_extrude_scale:ma(Gc,1,$c),u_intensity:ge};Wc.call(Xc,va,wd,Qd,Qa,lb,yd,Ic,U.id,Lb.layoutVertexBuffer,Lb.indexBuffer,Lb.segments,U.paint,R.transform.zoom,Rb)}}}va.viewport.set([0,0,R.width,R.height])}else"translucent"===R.renderPass&&(R.context.setColorMode(R.colorModeForRenderPass()),X=R.context,Ca=X.gl,da=U.heatmapFbo)&&(X.activeTexture.set(Ca.TEXTURE0),Ca.bindTexture(Ca.TEXTURE_2D,da.colorAttachment.get()),X.activeTexture.set(Ca.TEXTURE1),
da=U.colorRampTexture,da||(da=U.colorRampTexture=new a.Texture(X,U.colorRamp,Ca.RGBA)),da.bind(Ca.LINEAR,Ca.CLAMP_TO_EDGE),da=R.useProgram("heatmapTexture"),va=da.draw,Ca=Ca.TRIANGLES,Qa=Zc.disabled,lb=Bd.disabled,dc=R.colorModeForRenderPass(),Lb=Zb.disabled,Rb=a.create(),a.ortho(Rb,0,R.width,R.height,0,0,1),Ic=R.context.gl,Rb={u_matrix:Rb,u_world:[Ic.drawingBufferWidth,Ic.drawingBufferHeight],u_image:0,u_color_ramp:1,u_opacity:U.paint.get("heatmap-opacity")},va.call(da,X,Ca,Qa,lb,dc,Lb,Rb,U.id,R.viewportBuffer,
R.quadTriangleIndexBuffer,R.viewportSegments,U.paint,R.transform.zoom))},line:function(R,X,U,da){if("translucent"===R.renderPass){var va=U.paint.get("line-opacity"),Ca=U.paint.get("line-width");if(0!==va.constantOr(1)&&0!==Ca.constantOr(1)){va=R.depthModeForSublayer(0,Zc.ReadOnly);Ca=R.colorModeForRenderPass();var Qa=U.paint.get("line-dasharray"),lb=U.paint.get("line-pattern"),Lb=lb.constantOr(1),Rb=U.paint.get("line-gradient"),dc=U.getCrossfadeParameters(),Ic=Lb?"linePattern":Qa?"lineSDF":Rb?"lineGradient":
"line",Gc=R.context,Xc=Gc.gl,$c=!0;if(Rb){Gc.activeTexture.set(Xc.TEXTURE0);var Wc=U.gradientTexture;if(!U.gradient)return;Wc||(Wc=U.gradientTexture=new a.Texture(Gc,U.gradient,Xc.RGBA));Wc.bind(Xc.LINEAR,Xc.CLAMP_TO_EDGE)}for(Wc=0;Wc<da.length;Wc+=1){var wd=da[Wc],Qd=X.getTile(wd);if(!Lb||Qd.patternsLoaded()){var yd=Qd.getBucket(U);if(yd){var ge=yd.programConfigurations.get(U.id),be=R.context.program.get(),ke=R.useProgram(Ic,ge);$c=$c||ke.program!==be;var re=lb.constantOr(null);if(re&&Qd.imageAtlas){var ne=
Qd.imageAtlas;be=ne.patternPositions[re.to.toString()];re=ne.patternPositions[re.from.toString()];be&&re&&ge.setConstantPatternPositions(be,re)}if(Lb){be=R;re=Qd;ne=U;var Le=dc,we=be.transform,kf=1/ma(re,1,we.tileZoom);be={u_matrix:na(be,re,ne),u_texsize:re.imageAtlasTexture.size,u_ratio:1/ma(re,1,we.zoom),u_device_pixel_ratio:a.browser.devicePixelRatio,u_image:0,u_scale:[kf,Le.fromScale,Le.toScale],u_fade:Le.t,u_units_to_pixels:[1/we.pixelsToGLUnits[0],1/we.pixelsToGLUnits[1]]}}else if(Qa){be=R;
re=Qd;ne=U;var Ne=Qa;Le=dc;we=be.lineAtlas;kf=1/ma(re,1,be.transform.tileZoom);var xf="round"===ne.layout.get("line-cap"),wf=we.getDash(Ne.from,xf);Ne=we.getDash(Ne.to,xf);xf=wf.width*Le.fromScale;var lg=Ne.width*Le.toScale;be=a.extend(gc(be,re,ne),{u_patternscale_a:[kf/xf,-wf.height/2],u_patternscale_b:[kf/lg,-Ne.height/2],u_sdfgamma:we.width/(256*Math.min(xf,lg)*a.browser.devicePixelRatio)/2,u_image:0,u_tex_y_a:wf.y,u_tex_y_b:Ne.y,u_mix:Le.t})}else be=Rb?a.extend(gc(R,Qd,U),{u_image:0}):gc(R,Qd,
U);Lb?(Gc.activeTexture.set(Xc.TEXTURE0),Qd.imageAtlasTexture.bind(Xc.LINEAR,Xc.CLAMP_TO_EDGE),ge.updatePaintBuffers(dc)):Qa&&($c||R.lineAtlas.dirty)&&(Gc.activeTexture.set(Xc.TEXTURE0),R.lineAtlas.bind(Gc));ke.draw(Gc,Xc.TRIANGLES,va,R.stencilModeForClipping(wd),Ca,Zb.disabled,be,U.id,yd.layoutVertexBuffer,yd.indexBuffer,yd.segments,U.paint,R.transform.zoom,ge);$c=!1}}}}}},fill:function(R,X,U,da){var va=U.paint.get("fill-color"),Ca=U.paint.get("fill-opacity");if(0!==Ca.constantOr(1)){var Qa=R.colorModeForRenderPass(),
lb=U.paint.get("fill-pattern");va=R.opaquePassEnabledForLayer()&&!lb.constantOr(1)&&1===va.constantOr(a.Color.transparent).a&&1===Ca.constantOr(0)?"opaque":"translucent";R.renderPass===va&&(va=R.depthModeForSublayer(1,"opaque"===R.renderPass?Zc.ReadWrite:Zc.ReadOnly),Ha(R,X,U,da,va,Qa,!1));"translucent"===R.renderPass&&U.paint.get("fill-antialias")&&(va=R.depthModeForSublayer(U.getPaintProperty("fill-outline-color")?2:0,Zc.ReadOnly),Ha(R,X,U,da,va,Qa,!0))}},"fill-extrusion":function(R,X,U,da){var va=
U.paint.get("fill-extrusion-opacity");if(0!==va&&"translucent"===R.renderPass){var Ca=new Zc(R.context.gl.LEQUAL,Zc.ReadWrite,R.depthRangeFor3D);1!==va||U.paint.get("fill-extrusion-pattern").constantOr(1)?(Wa(R,X,U,da,Ca,Bd.disabled,Ob.disabled),Wa(R,X,U,da,Ca,R.stencilModeFor3D(),R.colorModeForRenderPass())):(va=R.colorModeForRenderPass(),Wa(R,X,U,da,Ca,Bd.disabled,va))}},hillshade:function(R,X,U,da){if("offscreen"===R.renderPass||"translucent"===R.renderPass){var va=R.context,Ca=X.getSource().maxzoom,
Qa=R.depthModeForSublayer(0,Zc.ReadOnly),lb=R.colorModeForRenderPass(),Lb="translucent"===R.renderPass?R.stencilConfigForOverlap(da):[{},da];da=Lb[0];var Rb=0;for(Lb=Lb[1];Rb<Lb.length;Rb+=1){var dc=Lb[Rb],Ic=X.getTile(dc);if(Ic.needsHillshadePrepare&&"offscreen"===R.renderPass){var Gc=R,Xc=U,$c=Ca,Wc=Qa,wd=Bd.disabled,Qd=lb;dc=Gc.context;var yd=dc.gl,ge=Ic.dem;if(ge&&ge.data){var be=ge.dim,ke=ge.stride,re=ge.getPixels();dc.activeTexture.set(yd.TEXTURE1);dc.pixelStoreUnpackPremultiplyAlpha.set(!1);
Ic.demTexture=Ic.demTexture||Gc.getTileTexture(ke);Ic.demTexture?(ke=Ic.demTexture,ke.update(re,{premultiply:!1}),ke.bind(yd.NEAREST,yd.CLAMP_TO_EDGE)):(Ic.demTexture=new a.Texture(dc,re,yd.RGBA,{premultiply:!1}),Ic.demTexture.bind(yd.NEAREST,yd.CLAMP_TO_EDGE));dc.activeTexture.set(yd.TEXTURE0);re=Ic.fbo;re||(ke=new a.Texture(dc,{width:be,height:be,data:null},yd.RGBA),ke.bind(yd.LINEAR,yd.CLAMP_TO_EDGE),re=Ic.fbo=dc.createFramebuffer(be,be,!0),re.colorAttachment.set(ke.texture));dc.bindFramebuffer.set(re.framebuffer);
dc.viewport.set([0,0,be,be]);be=Gc.useProgram("hillshadePrepare");re=be.draw;yd=yd.TRIANGLES;ke=Zb.disabled;var ne=Ic.tileID,Le=ge.stride,we=a.create();a.ortho(we,0,a.EXTENT,-a.EXTENT,0,0,1);a.translate(we,we,[0,-a.EXTENT,0]);$c={u_matrix:we,u_image:1,u_dimension:[Le,Le],u_zoom:ne.overscaledZ,u_maxzoom:$c,u_unpack:ge.getUnpackVector()};re.call(be,dc,yd,Wc,wd,Qd,ke,$c,Xc.id,Gc.rasterBoundsBuffer,Gc.quadTriangleIndexBuffer,Gc.rasterBoundsSegments);Ic.needsHillshadePrepare=!1}}else"translucent"===R.renderPass&&
(Gc=R,yd=Ic,Ic=U,Xc=Qa,dc=da[dc.overscaledZ],$c=lb,ge=Gc.context,be=ge.gl,Qd=yd.fbo)&&(re=Gc.useProgram("hillshade"),ge.activeTexture.set(be.TEXTURE0),be.bindTexture(be.TEXTURE_2D,Qd.colorAttachment.get()),ne=Gc,Le=yd,yd=Ic,Qd=yd.paint.get("hillshade-shadow-color"),Wc=yd.paint.get("hillshade-highlight-color"),wd=yd.paint.get("hillshade-accent-color"),ke=yd.paint.get("hillshade-illumination-direction")*(Math.PI/180),"viewport"===yd.paint.get("hillshade-illumination-anchor")&&(ke-=ne.transform.angle),
we=!ne.options.moving,ne=ne.transform.calculatePosMatrix(Le.tileID.toUnwrapped(),we),we=Le.tileID,Le=Math.pow(2,we.canonical.z),we=we.canonical.y,Le=[(new a.MercatorCoordinate(0,we/Le)).toLngLat().lat,(new a.MercatorCoordinate(0,(we+1)/Le)).toLngLat().lat],yd={u_matrix:ne,u_image:0,u_latrange:Le,u_light:[yd.paint.get("hillshade-exaggeration"),ke],u_shadow:Qd,u_highlight:Wc,u_accent:wd},re.draw(ge,be.TRIANGLES,Xc,dc,$c,Zb.disabled,yd,Ic.id,Gc.rasterBoundsBuffer,Gc.quadTriangleIndexBuffer,Gc.rasterBoundsSegments))}va.viewport.set([0,
0,R.width,R.height])}},raster:function(R,X,U,da){if("translucent"===R.renderPass&&0!==U.paint.get("raster-opacity")&&da.length){var va=R.context,Ca=va.gl,Qa=X.getSource(),lb=R.useProgram("raster"),Lb=R.colorModeForRenderPass(),Rb=Qa instanceof Pc?[{},da]:R.stencilConfigForOverlap(da);da=Rb[0];Rb=Rb[1];for(var dc=Rb[Rb.length-1].overscaledZ,Ic=!R.options.moving,Gc=0;Gc<Rb.length;Gc+=1){var Xc=Rb[Gc],$c=R.depthModeForSublayer(Xc.overscaledZ-dc,1===U.paint.get("raster-opacity")?Zc.ReadWrite:Zc.ReadOnly,
Ca.LESS),Wc=X.getTile(Xc),wd=R.transform.calculatePosMatrix(Xc.toUnwrapped(),Ic);Wc.registerFadeDuration(U.paint.get("raster-fade-duration"));var Qd=X.findLoadedParent(Xc,0);var yd=Wc,ge=Qd,be=X,ke=R.transform,re=U.paint.get("raster-fade-duration");if(0<re){var ne=a.browser.now();var Le=(ne-yd.timeAdded)/re;re=ge?(ne-ge.timeAdded)/re:-1;be=be.getSource();ke=ke.coveringZoomLevel({tileSize:be.tileSize,roundZoom:be.roundZoom});ke=(ke=!ge||Math.abs(ge.tileID.overscaledZ-ke)>Math.abs(yd.tileID.overscaledZ-
ke))&&yd.refreshedUponExpiration?1:a.clamp(ke?Le:1-re,0,1);yd.refreshedUponExpiration&&1<=Le&&(yd.refreshedUponExpiration=!1);Le=ge?{opacity:1,mix:1-ke}:{opacity:ke,mix:0}}else Le={opacity:1,mix:0};ge=yd=void 0;ke="nearest"===U.paint.get("raster-resampling")?Ca.NEAREST:Ca.LINEAR;va.activeTexture.set(Ca.TEXTURE0);Wc.texture.bind(ke,Ca.CLAMP_TO_EDGE,Ca.LINEAR_MIPMAP_NEAREST);va.activeTexture.set(Ca.TEXTURE1);Qd?(Qd.texture.bind(ke,Ca.CLAMP_TO_EDGE,Ca.LINEAR_MIPMAP_NEAREST),yd=Math.pow(2,Qd.tileID.overscaledZ-
Wc.tileID.overscaledZ),ge=[Wc.tileID.canonical.x*yd%1,Wc.tileID.canonical.y*yd%1]):Wc.texture.bind(ke,Ca.CLAMP_TO_EDGE,Ca.LINEAR_MIPMAP_NEAREST);Qd=U;Wc=ge||[0,0];yd=yd||1;ge=Le.mix;Le=Le.opacity*Qd.paint.get("raster-opacity");ke=Qd.paint.get("raster-brightness-min");re=Qd.paint.get("raster-brightness-max");be=Qd.paint.get("raster-saturation");be=0<be?1-1/(1.001-be):-be;ne=Qd.paint.get("raster-contrast");ne=0<ne?1/(1-ne):1+ne;var we=Qd.paint.get("raster-hue-rotate");we*=Math.PI/180;Qd=Math.sin(we);
we=Math.cos(we);wd={u_matrix:wd,u_tl_parent:Wc,u_scale_parent:yd,u_buffer_scale:1,u_fade_t:ge,u_opacity:Le,u_image0:0,u_image1:1,u_brightness_low:ke,u_brightness_high:re,u_saturation_factor:be,u_contrast_factor:ne,u_spin_weights:[(2*we+1)/3,(-Math.sqrt(3)*Qd-we+1)/3,(Math.sqrt(3)*Qd-we+1)/3]};Qa instanceof Pc?lb.draw(va,Ca.TRIANGLES,$c,Bd.disabled,Lb,Zb.disabled,wd,U.id,Qa.boundsBuffer,R.quadTriangleIndexBuffer,Qa.boundsSegments):lb.draw(va,Ca.TRIANGLES,$c,da[Xc.overscaledZ],Lb,Zb.disabled,wd,U.id,
R.rasterBoundsBuffer,R.quadTriangleIndexBuffer,R.rasterBoundsSegments)}}},background:function(R,X,U){X=U.paint.get("background-color");var da=U.paint.get("background-opacity");if(0!==da){var va=R.context,Ca=va.gl,Qa=R.transform,lb=Qa.tileSize,Lb=U.paint.get("background-pattern");if(!R.isPatternMissing(Lb)){var Rb=!Lb&&1===X.a&&1===da&&R.opaquePassEnabledForLayer()?"opaque":"translucent";if(R.renderPass===Rb){var dc=Bd.disabled;Rb=R.depthModeForSublayer(0,"opaque"===Rb?Zc.ReadWrite:Zc.ReadOnly);var Ic=
R.colorModeForRenderPass(),Gc=R.useProgram(Lb?"backgroundPattern":"background");Qa=Qa.coveringTiles({tileSize:lb});Lb&&(va.activeTexture.set(Ca.TEXTURE0),R.imageManager.bind(R.context));for(var Xc=U.getCrossfadeParameters(),$c=0;$c<Qa.length;$c+=1){var Wc=Qa[$c],wd=R.transform.calculatePosMatrix(Wc.toUnwrapped());if(Lb){var Qd=da,yd=a,ge=yd.extend,be=Lb;var ke=Xc;var re=R;Wc={tileID:Wc,tileSize:lb};var ne=re.imageManager.getPattern(be.from.toString());be=re.imageManager.getPattern(be.to.toString());
var Le=re.imageManager.getPixelSize(),we=Math.pow(2,Wc.tileID.overscaledZ),kf=Wc.tileSize*Math.pow(2,re.transform.tileZoom)/we;we=kf*(Wc.tileID.canonical.x+Wc.tileID.wrap*we);kf*=Wc.tileID.canonical.y;ke={u_image:0,u_pattern_tl_a:ne.tl,u_pattern_br_a:ne.br,u_pattern_tl_b:be.tl,u_pattern_br_b:be.br,u_texsize:[Le.width,Le.height],u_mix:ke.t,u_pattern_size_a:ne.displaySize,u_pattern_size_b:be.displaySize,u_scale_a:ke.fromScale,u_scale_b:ke.toScale,u_tile_units_to_pixels:1/ma(Wc,1,re.transform.tileZoom),
u_pixel_coord_upper:[we>>16,kf>>16],u_pixel_coord_lower:[we&65535,kf&65535]};wd=ge.call(yd,ke,{u_matrix:wd,u_opacity:Qd})}else wd={u_matrix:wd,u_opacity:da,u_color:X};Gc.draw(va,Ca.TRIANGLES,Rb,dc,Ic,Zb.disabled,wd,U.id,R.tileExtentBuffer,R.quadTriangleIndexBuffer,R.tileExtentSegments)}}}}},debug:function(R,X,U){for(var da=0;da<U.length;da++){var va=R,Ca=X,Qa=U[da],lb=va.context,Lb=lb.gl,Rb=Qa.posMatrix,dc=va.useProgram("debug"),Ic=Zc.disabled,Gc=Bd.disabled,Xc=va.colorModeForRenderPass();lb.activeTexture.set(Lb.TEXTURE0);
va.emptyTexture.bind(Lb.LINEAR,Lb.CLAMP_TO_EDGE);dc.draw(lb,Lb.LINE_STRIP,Ic,Gc,Xc,Zb.disabled,Ib(Rb,a.Color.red),"$debug",va.debugBuffer,va.tileBorderIndexBuffer,va.debugSegments);Xc=Ca.getTileByID(Qa.key).latestRawTileData;Xc=Math.floor((Xc&&Xc.byteLength||0)/1024);Ca=Ca.getTile(Qa).tileSize;Ca=512/Math.min(Ca,512)*(Qa.overscaledZ/va.transform.zoom)*.5;var $c=Qa.canonical.toString();Qa.overscaledZ!==Qa.canonical.z&&($c+=" \x3d\x3e "+Qa.overscaledZ);Qa=va;Xc=$c+" "+Xc+"kb";Qa.initDebugOverlayCanvas();
$c=Qa.debugOverlayCanvas;var Wc=Qa.context.gl,wd=Qa.debugOverlayCanvas.getContext("2d");wd.clearRect(0,0,$c.width,$c.height);wd.shadowColor="white";wd.shadowBlur=2;wd.lineWidth=1.5;wd.strokeStyle="white";wd.textBaseline="top";wd.font="bold 36px Open Sans, sans-serif";wd.fillText(Xc,5,5);wd.strokeText(Xc,5,5);Qa.debugOverlayTexture.update($c);Qa.debugOverlayTexture.bind(Wc.LINEAR,Wc.CLAMP_TO_EDGE);dc.draw(lb,Lb.TRIANGLES,Ic,Gc,Ob.alphaBlended,Zb.disabled,Ib(Rb,a.Color.transparent,Ca),"$debug",va.debugBuffer,
va.quadTriangleIndexBuffer,va.debugSegments)}},custom:function(R,X,U){X=R.context;U=U.implementation;if("offscreen"===R.renderPass){var da=U.prerender;da&&(R.setCustomLayerDefaults(),X.setColorMode(R.colorModeForRenderPass()),da.call(U,X.gl,R.transform.customLayerMatrix()),X.setDirty(),R.setBaseState())}else"translucent"===R.renderPass&&(R.setCustomLayerDefaults(),X.setColorMode(R.colorModeForRenderPass()),X.setStencilMode(Bd.disabled),da="3d"===U.renderingMode?new Zc(R.context.gl.LEQUAL,Zc.ReadWrite,
R.depthRangeFor3D):R.depthModeForSublayer(0,Zc.ReadOnly),X.setDepthMode(da),U.render(X.gl,R.transform.customLayerMatrix()),X.setDirty(),R.setBaseState(),X.bindFramebuffer.set(null))}},Af=function(R,X){this.context=new Mc(R);this.transform=X;this._tileTextures={};this.setup();this.numSublayers=Fd.maxUnderzooming+Fd.maxOverzooming+1;this.depthEpsilon=1/Math.pow(2,16);this.crossTileSymbolIndex=new Sg;this.gpuTimers={}};Af.prototype.resize=function(R,X){this.width=R*a.browser.devicePixelRatio;this.height=
X*a.browser.devicePixelRatio;this.context.viewport.set([0,0,this.width,this.height]);if(this.style)for(R=0,X=this.style._order;R<X.length;R+=1)this.style._layers[X[R]].resize()};Af.prototype.setup=function(){var R=this.context,X=new a.StructArrayLayout2i4;X.emplaceBack(0,0);X.emplaceBack(a.EXTENT,0);X.emplaceBack(0,a.EXTENT);X.emplaceBack(a.EXTENT,a.EXTENT);this.tileExtentBuffer=R.createVertexBuffer(X,sh.members);this.tileExtentSegments=a.SegmentVector.simpleSegment(0,0,4,2);X=new a.StructArrayLayout2i4;
X.emplaceBack(0,0);X.emplaceBack(a.EXTENT,0);X.emplaceBack(0,a.EXTENT);X.emplaceBack(a.EXTENT,a.EXTENT);this.debugBuffer=R.createVertexBuffer(X,sh.members);this.debugSegments=a.SegmentVector.simpleSegment(0,0,4,5);X=new a.StructArrayLayout4i8;X.emplaceBack(0,0,0,0);X.emplaceBack(a.EXTENT,0,a.EXTENT,0);X.emplaceBack(0,a.EXTENT,0,a.EXTENT);X.emplaceBack(a.EXTENT,a.EXTENT,a.EXTENT,a.EXTENT);this.rasterBoundsBuffer=R.createVertexBuffer(X,Fc.members);this.rasterBoundsSegments=a.SegmentVector.simpleSegment(0,
0,4,2);X=new a.StructArrayLayout2i4;X.emplaceBack(0,0);X.emplaceBack(1,0);X.emplaceBack(0,1);X.emplaceBack(1,1);this.viewportBuffer=R.createVertexBuffer(X,sh.members);this.viewportSegments=a.SegmentVector.simpleSegment(0,0,4,2);X=new a.StructArrayLayout1ui2;X.emplaceBack(0);X.emplaceBack(1);X.emplaceBack(3);X.emplaceBack(2);X.emplaceBack(0);this.tileBorderIndexBuffer=R.createIndexBuffer(X);X=new a.StructArrayLayout3ui6;X.emplaceBack(0,1,2);X.emplaceBack(2,1,3);this.quadTriangleIndexBuffer=R.createIndexBuffer(X);
this.emptyTexture=new a.Texture(R,{width:1,height:1,data:new Uint8Array([0,0,0,0])},R.gl.RGBA);R=this.context.gl;this.stencilClearMode=new Bd({func:R.ALWAYS,mask:0},0,255,R.ZERO,R.ZERO,R.ZERO)};Af.prototype.clearStencil=function(){var R=this.context,X=R.gl;this.nextStencilID=1;this.currentStencilSource=void 0;var U=a.create();a.ortho(U,0,this.width,this.height,0,0,1);a.scale(U,U,[X.drawingBufferWidth,X.drawingBufferHeight,0]);this.useProgram("clippingMask").draw(R,X.TRIANGLES,Zc.disabled,this.stencilClearMode,
Ob.disabled,Zb.disabled,{u_matrix:U},"$clipping",this.viewportBuffer,this.quadTriangleIndexBuffer,this.viewportSegments)};Af.prototype._renderTileClippingMasks=function(R,X){if(this.currentStencilSource!==R.source&&R.isTileClipped()&&X&&X.length){this.currentStencilSource=R.source;R=this.context;var U=R.gl;256<this.nextStencilID+X.length&&this.clearStencil();R.setColorMode(Ob.disabled);R.setDepthMode(Zc.disabled);var da=this.useProgram("clippingMask");this._tileClippingMaskIDs={};for(var va=0;va<
X.length;va+=1){var Ca=X[va],Qa=this._tileClippingMaskIDs[Ca.key]=this.nextStencilID++;da.draw(R,U.TRIANGLES,Zc.disabled,new Bd({func:U.ALWAYS,mask:0},Qa,255,U.KEEP,U.KEEP,U.REPLACE),Ob.disabled,Zb.disabled,{u_matrix:Ca.posMatrix},"$clipping",this.tileExtentBuffer,this.quadTriangleIndexBuffer,this.tileExtentSegments)}}};Af.prototype.stencilModeFor3D=function(){this.currentStencilSource=void 0;256<this.nextStencilID+1&&this.clearStencil();var R=this.nextStencilID++,X=this.context.gl;return new Bd({func:X.NOTEQUAL,
mask:255},R,255,X.KEEP,X.KEEP,X.REPLACE)};Af.prototype.stencilModeForClipping=function(R){var X=this.context.gl;return new Bd({func:X.EQUAL,mask:255},this._tileClippingMaskIDs[R.key],0,X.KEEP,X.KEEP,X.REPLACE)};Af.prototype.stencilConfigForOverlap=function(R){var X=this.context.gl;R=R.sort(function(Qa,lb){return lb.overscaledZ-Qa.overscaledZ});var U=R[R.length-1].overscaledZ,da=R[0].overscaledZ-U+1;if(1<da){this.currentStencilSource=void 0;256<this.nextStencilID+da&&this.clearStencil();var va={};
for(var Ca=0;Ca<da;Ca++)va[Ca+U]=new Bd({func:X.GEQUAL,mask:255},Ca+this.nextStencilID,255,X.KEEP,X.KEEP,X.REPLACE);this.nextStencilID+=da;return[va,R]}return[(va={},va[U]=Bd.disabled,va),R]};Af.prototype.colorModeForRenderPass=function(){var R=this.context.gl;return this._showOverdrawInspector?new Ob([R.CONSTANT_COLOR,R.ONE],new a.Color(.125,.125,.125,0),[!0,!0,!0,!0]):"opaque"===this.renderPass?Ob.unblended:Ob.alphaBlended};Af.prototype.depthModeForSublayer=function(R,X,U){if(!this.opaquePassEnabledForLayer())return Zc.disabled;
R=1-((1+this.currentLayer)*this.numSublayers+R)*this.depthEpsilon;return new Zc(U||this.context.gl.LEQUAL,X,[R,R])};Af.prototype.opaquePassEnabledForLayer=function(){return this.currentLayer<this.opaquePassCutoff};Af.prototype.render=function(R,X){var U=this;this.style=R;this.options=X;this.lineAtlas=R.lineAtlas;this.imageManager=R.imageManager;this.glyphManager=R.glyphManager;this.symbolFadeChange=R.placement.symbolFadeChange(a.browser.now());this.imageManager.beginFrame();var da=this.style._order,
va=this.style.sourceCaches;for(Qa in va){var Ca=va[Qa];Ca.used&&Ca.prepare(this.context)}var Qa={};Ca={};var lb={},Lb;for(Lb in va){var Rb=va[Lb];Qa[Lb]=Rb.getVisibleCoordinates();Ca[Lb]=Qa[Lb].slice().reverse();lb[Lb]=Rb.getVisibleCoordinates(!0).reverse()}this.opaquePassCutoff=Infinity;for(Lb=0;Lb<da.length;Lb++)if(this.style._layers[da[Lb]].is3D()){this.opaquePassCutoff=Lb;break}this.renderPass="offscreen";for(Lb=0;Lb<da.length;Lb+=1)if(Rb=this.style._layers[da[Lb]],Rb.hasOffscreenPass()&&!Rb.isHidden(this.transform.zoom)){var dc=
Ca[Rb.source];("custom"===Rb.type||dc.length)&&this.renderLayer(this,va[Rb.source],Rb,dc)}this.context.bindFramebuffer.set(null);this.context.clear({color:X.showOverdrawInspector?a.Color.black:a.Color.transparent,depth:1});this.clearStencil();this._showOverdrawInspector=X.showOverdrawInspector;this.depthRangeFor3D=[0,1-(R._order.length+2)*this.numSublayers*this.depthEpsilon];this.renderPass="opaque";for(this.currentLayer=da.length-1;0<=this.currentLayer;this.currentLayer--)R=this.style._layers[da[this.currentLayer]],
X=va[R.source],Lb=Qa[R.source],this._renderTileClippingMasks(R,Lb),this.renderLayer(this,X,R,Lb);this.renderPass="translucent";for(this.currentLayer=0;this.currentLayer<da.length;this.currentLayer++)R=this.style._layers[da[this.currentLayer]],X=va[R.source],Lb=("symbol"===R.type?lb:Ca)[R.source],this._renderTileClippingMasks(R,Qa[R.source]),this.renderLayer(this,X,R,Lb);if(this.options.showTileBoundaries){var Ic,Gc;a.values(this.style._layers).forEach(function(Xc){Xc.source&&!Xc.isHidden(U.transform.zoom)&&
(Xc.source!==(Gc&&Gc.id)&&(Gc=U.style.sourceCaches[Xc.source]),!Ic||Ic.getSource().maxzoom<Gc.getSource().maxzoom)&&(Ic=Gc)});Ic&&Xf.debug(this,Ic,Ic.getVisibleCoordinates())}this.options.showPadding&&Za(this);this.context.setDefault()};Af.prototype.renderLayer=function(R,X,U,da){U.isHidden(this.transform.zoom)||"background"!==U.type&&"custom"!==U.type&&!da.length||(this.id=U.id,this.gpuTimingStart(U),Xf[U.type](R,X,U,da,this.style.placement.variableOffsets),this.gpuTimingEnd())};Af.prototype.gpuTimingStart=
function(R){if(this.options.gpuTiming){var X=this.context.extTimerQuery,U=this.gpuTimers[R.id];U||(U=this.gpuTimers[R.id]={calls:0,cpuTime:0,query:X.createQueryEXT()});U.calls++;X.beginQueryEXT(X.TIME_ELAPSED_EXT,U.query)}};Af.prototype.gpuTimingEnd=function(){if(this.options.gpuTiming){var R=this.context.extTimerQuery;R.endQueryEXT(R.TIME_ELAPSED_EXT)}};Af.prototype.collectGpuTimers=function(){var R=this.gpuTimers;this.gpuTimers={};return R};Af.prototype.queryGpuTimers=function(R){var X={},U;for(U in R){var da=
R[U],va=this.context.extTimerQuery,Ca=va.getQueryObjectEXT(da.query,va.QUERY_RESULT_EXT)/1E6;va.deleteQueryEXT(da.query);X[U]=Ca}return X};Af.prototype.translatePosMatrix=function(R,X,U,da,va){if(!U[0]&&!U[1])return R;var Ca=va?"map"===da?this.transform.angle:0:"viewport"===da?-this.transform.angle:0;Ca&&(da=Math.sin(Ca),Ca=Math.cos(Ca),U=[U[0]*Ca-U[1]*da,U[0]*da+U[1]*Ca]);X=[va?U[0]:ma(X,U[0],this.transform.zoom),va?U[1]:ma(X,U[1],this.transform.zoom),0];U=new Float32Array(16);a.translate(U,R,X);
return U};Af.prototype.saveTileTexture=function(R){var X=this._tileTextures[R.size[0]];X?X.push(R):this._tileTextures[R.size[0]]=[R]};Af.prototype.getTileTexture=function(R){return(R=this._tileTextures[R])&&0<R.length?R.pop():null};Af.prototype.isPatternMissing=function(R){if(!R)return!1;if(!R.from||!R.to)return!0;var X=this.imageManager.getPattern(R.from.toString());R=this.imageManager.getPattern(R.to.toString());return!X||!R};Af.prototype.useProgram=function(R,X){this.cache=this.cache||{};var U=
""+R+(X?X.cacheKey:"")+(this._showOverdrawInspector?"/overdraw":"");this.cache[U]||(this.cache[U]=new jb(this.context,Sa[R],X,ld[R],this._showOverdrawInspector));return this.cache[U]};Af.prototype.setCustomLayerDefaults=function(){this.context.unbindVAO();this.context.cullFace.setDefault();this.context.activeTexture.setDefault();this.context.pixelStoreUnpack.setDefault();this.context.pixelStoreUnpackPremultiplyAlpha.setDefault();this.context.pixelStoreUnpackFlipY.setDefault()};Af.prototype.setBaseState=
function(){var R=this.context.gl;this.context.cullFace.set(!1);this.context.viewport.set([0,0,this.width,this.height]);this.context.blendEquation.set(R.FUNC_ADD)};Af.prototype.initDebugOverlayCanvas=function(){null==this.debugOverlayCanvas&&(this.debugOverlayCanvas=a.window.document.createElement("canvas"),this.debugOverlayCanvas.width=512,this.debugOverlayCanvas.height=512,this.debugOverlayTexture=new a.Texture(this.context,this.debugOverlayCanvas,this.context.gl.RGBA))};Af.prototype.destroy=function(){this.emptyTexture.destroy();
this.debugOverlayTexture&&this.debugOverlayTexture.destroy()};var Pg=function(R,X){this.points=R;this.planes=X};Pg.fromInvProjectionMatrix=function(R,X,U){var da=Math.pow(2,U),va=[[-1,1,-1,1],[1,1,-1,1],[1,-1,-1,1],[-1,-1,-1,1],[-1,1,1,1],[1,1,1,1],[1,-1,1,1],[-1,-1,1,1]].map(function(Ca){return a.transformMat4([],Ca,R)}).map(function(Ca){return a.scale$1([],Ca,1/Ca[3]/X*da)});U=[[0,1,2],[6,5,4],[0,3,7],[2,1,5],[3,2,6],[0,4,5]].map(function(Ca){var Qa=a.sub([],va[Ca[0]],va[Ca[1]]),lb=a.sub([],va[Ca[2]],
va[Ca[1]]);Qa=a.normalize([],a.cross([],Qa,lb));Ca=-a.dot(Qa,va[Ca[1]]);return Qa.concat(Ca)});return new Pg(va,U)};var Mg=function(R,X){this.min=R;this.max=X;this.center=a.scale$2([],a.add([],this.min,this.max),.5)};Mg.prototype.quadrant=function(R){R=[0===R%2,2>R];for(var X=a.clone$2(this.min),U=a.clone$2(this.max),da=0;da<R.length;da++)X[da]=R[da]?this.min[da]:this.center[da],U[da]=R[da]?this.center[da]:this.max[da];U[2]=this.max[2];return new Mg(X,U)};Mg.prototype.distanceX=function(R){return Math.max(Math.min(this.max[0],
R[0]),this.min[0])-R[0]};Mg.prototype.distanceY=function(R){return Math.max(Math.min(this.max[1],R[1]),this.min[1])-R[1]};Mg.prototype.intersects=function(R){for(var X=[[this.min[0],this.min[1],0,1],[this.max[0],this.min[1],0,1],[this.max[0],this.max[1],0,1],[this.min[0],this.max[1],0,1]],U=!0,da=0;da<R.planes.length;da++){for(var va=R.planes[da],Ca=0,Qa=0;Qa<X.length;Qa++)Ca+=0<=a.dot$1(va,X[Qa]);if(0===Ca)return 0;Ca!==X.length&&(U=!1)}if(U)return 2;for(X=0;3>X;X++){U=Number.MAX_VALUE;da=-Number.MAX_VALUE;
for(va=0;va<R.points.length;va++)Ca=R.points[va][X]-this.min[X],U=Math.min(U,Ca),da=Math.max(da,Ca);if(0>da||U>this.max[X]-this.min[X])return 0}return 1};var vg=function(R,X,U,da){void 0===R&&(R=0);void 0===X&&(X=0);void 0===U&&(U=0);void 0===da&&(da=0);if(isNaN(R)||0>R||isNaN(X)||0>X||isNaN(U)||0>U||isNaN(da)||0>da)throw Error("Invalid value for edge-insets, top, bottom, left and right must all be numbers");this.top=R;this.bottom=X;this.left=U;this.right=da};vg.prototype.interpolate=function(R,X,
U){null!=X.top&&null!=R.top&&(this.top=a.number(R.top,X.top,U));null!=X.bottom&&null!=R.bottom&&(this.bottom=a.number(R.bottom,X.bottom,U));null!=X.left&&null!=R.left&&(this.left=a.number(R.left,X.left,U));null!=X.right&&null!=R.right&&(this.right=a.number(R.right,X.right,U));return this};vg.prototype.getCenter=function(R,X){R=a.clamp((this.left+R-this.right)/2,0,R);X=a.clamp((this.top+X-this.bottom)/2,0,X);return new a.Point(R,X)};vg.prototype.equals=function(R){return this.top===R.top&&this.bottom===
R.bottom&&this.left===R.left&&this.right===R.right};vg.prototype.clone=function(){return new vg(this.top,this.bottom,this.left,this.right)};vg.prototype.toJSON=function(){return{top:this.top,bottom:this.bottom,left:this.left,right:this.right}};var Jf=function(R,X,U,da,va){this.tileSize=512;this.maxValidLatitude=85.051129;this._renderWorldCopies=void 0===va?!0:va;this._minZoom=R||0;this._maxZoom=X||22;this._minPitch=void 0===U||null===U?0:U;this._maxPitch=void 0===da||null===da?60:da;this.setMaxBounds();
this.height=this.width=0;this._center=new a.LngLat(0,0);this.angle=this.zoom=0;this._fov=.6435011087932844;this._pitch=0;this._unmodified=!0;this._edgeInsets=new vg;this._posMatrixCache={};this._alignedPosMatrixCache={}},Yf={minZoom:{configurable:!0},maxZoom:{configurable:!0},minPitch:{configurable:!0},maxPitch:{configurable:!0},renderWorldCopies:{configurable:!0},worldSize:{configurable:!0},centerOffset:{configurable:!0},size:{configurable:!0},bearing:{configurable:!0},pitch:{configurable:!0},fov:{configurable:!0},
zoom:{configurable:!0},center:{configurable:!0},padding:{configurable:!0},centerPoint:{configurable:!0},unmodified:{configurable:!0},point:{configurable:!0}};Jf.prototype.clone=function(){var R=new Jf(this._minZoom,this._maxZoom,this._minPitch,this.maxPitch,this._renderWorldCopies);R.tileSize=this.tileSize;R.latRange=this.latRange;R.width=this.width;R.height=this.height;R._center=this._center;R.zoom=this.zoom;R.angle=this.angle;R._fov=this._fov;R._pitch=this._pitch;R._unmodified=this._unmodified;
R._edgeInsets=this._edgeInsets.clone();R._calcMatrices();return R};Yf.minZoom.get=function(){return this._minZoom};Yf.minZoom.set=function(R){this._minZoom!==R&&(this._minZoom=R,this.zoom=Math.max(this.zoom,R))};Yf.maxZoom.get=function(){return this._maxZoom};Yf.maxZoom.set=function(R){this._maxZoom!==R&&(this._maxZoom=R,this.zoom=Math.min(this.zoom,R))};Yf.minPitch.get=function(){return this._minPitch};Yf.minPitch.set=function(R){this._minPitch!==R&&(this._minPitch=R,this.pitch=Math.max(this.pitch,
R))};Yf.maxPitch.get=function(){return this._maxPitch};Yf.maxPitch.set=function(R){this._maxPitch!==R&&(this._maxPitch=R,this.pitch=Math.min(this.pitch,R))};Yf.renderWorldCopies.get=function(){return this._renderWorldCopies};Yf.renderWorldCopies.set=function(R){void 0===R?R=!0:null===R&&(R=!1);this._renderWorldCopies=R};Yf.worldSize.get=function(){return this.tileSize*this.scale};Yf.centerOffset.get=function(){return this.centerPoint._sub(this.size._div(2))};Yf.size.get=function(){return new a.Point(this.width,
this.height)};Yf.bearing.get=function(){return-this.angle/Math.PI*180};Yf.bearing.set=function(R){R=-a.wrap(R,-180,180)*Math.PI/180;this.angle!==R&&(this._unmodified=!1,this.angle=R,this._calcMatrices(),this.rotationMatrix=a.create$2(),a.rotate(this.rotationMatrix,this.rotationMatrix,this.angle))};Yf.pitch.get=function(){return this._pitch/Math.PI*180};Yf.pitch.set=function(R){R=a.clamp(R,this.minPitch,this.maxPitch)/180*Math.PI;this._pitch!==R&&(this._unmodified=!1,this._pitch=R,this._calcMatrices())};
Yf.fov.get=function(){return this._fov/Math.PI*180};Yf.fov.set=function(R){R=Math.max(.01,Math.min(60,R));this._fov!==R&&(this._unmodified=!1,this._fov=R/180*Math.PI,this._calcMatrices())};Yf.zoom.get=function(){return this._zoom};Yf.zoom.set=function(R){R=Math.min(Math.max(R,this.minZoom),this.maxZoom);this._zoom!==R&&(this._unmodified=!1,this._zoom=R,this.scale=this.zoomScale(R),this.tileZoom=Math.floor(R),this.zoomFraction=R-this.tileZoom,this._constrain(),this._calcMatrices())};Yf.center.get=
function(){return this._center};Yf.center.set=function(R){if(R.lat!==this._center.lat||R.lng!==this._center.lng)this._unmodified=!1,this._center=R,this._constrain(),this._calcMatrices()};Yf.padding.get=function(){return this._edgeInsets.toJSON()};Yf.padding.set=function(R){this._edgeInsets.equals(R)||(this._unmodified=!1,this._edgeInsets.interpolate(this._edgeInsets,R,1),this._calcMatrices())};Yf.centerPoint.get=function(){return this._edgeInsets.getCenter(this.width,this.height)};Jf.prototype.isPaddingEqual=
function(R){return this._edgeInsets.equals(R)};Jf.prototype.interpolatePadding=function(R,X,U){this._unmodified=!1;this._edgeInsets.interpolate(R,X,U);this._constrain();this._calcMatrices()};Jf.prototype.coveringZoomLevel=function(R){R=(R.roundZoom?Math.round:Math.floor)(this.zoom+this.scaleZoom(this.tileSize/R.tileSize));return Math.max(0,R)};Jf.prototype.getVisibleUnwrappedCoordinates=function(R){var X=[new a.UnwrappedTileID(0,R)];if(this._renderWorldCopies){var U=this.pointCoordinate(new a.Point(0,
0)),da=this.pointCoordinate(new a.Point(this.width,0)),va=this.pointCoordinate(new a.Point(this.width,this.height)),Ca=this.pointCoordinate(new a.Point(0,this.height)),Qa=Math.floor(Math.max(U.x,da.x,va.x,Ca.x));for(U=Math.floor(Math.min(U.x,da.x,va.x,Ca.x))-1;U<=Qa+1;U++)0!==U&&X.push(new a.UnwrappedTileID(U,R))}return X};Jf.prototype.coveringTiles=function(R){var X=this.coveringZoomLevel(R),U=X;if(void 0!==R.minzoom&&X<R.minzoom)return[];void 0!==R.maxzoom&&X>R.maxzoom&&(X=R.maxzoom);var da=a.MercatorCoordinate.fromLngLat(this.center),
va=Math.pow(2,X);da=[va*da.x,va*da.y,0];var Ca=Pg.fromInvProjectionMatrix(this.invProjMatrix,this.worldSize,X),Qa=R.minzoom||0;60>=this.pitch&&.1>this._edgeInsets.top&&(Qa=X);var lb=function(Wc){return{aabb:new Mg([Wc*va,0,0],[(Wc+1)*va,va,0]),zoom:0,x:0,y:0,wrap:Wc,fullyVisible:!1}},Lb=[],Rb=[],dc=X;R=R.reparseOverscaled?U:X;if(this._renderWorldCopies)for(X=1;3>=X;X++)Lb.push(lb(-X)),Lb.push(lb(X));for(Lb.push(lb(0));0<Lb.length;){lb=Lb.pop();X=lb.x;U=lb.y;var Ic=lb.fullyVisible;if(!Ic){Ic=lb.aabb.intersects(Ca);
if(0===Ic)continue;Ic=2===Ic}var Gc=lb.aabb.distanceX(da),Xc=lb.aabb.distanceY(da);Gc=Math.max(Math.abs(Gc),Math.abs(Xc));Xc=3+(1<<dc-lb.zoom)-2;if(lb.zoom===dc||Gc>Xc&&lb.zoom>=Qa)Rb.push({tileID:new a.OverscaledTileID(lb.zoom===dc?R:lb.zoom,lb.wrap,lb.zoom,X,U),distanceSq:a.sqrLen([da[0]-.5-X,da[1]-.5-U])});else for(Gc=0;4>Gc;Gc++){Xc=(X<<1)+Gc%2;var $c=(U<<1)+(Gc>>1);Lb.push({aabb:lb.aabb.quadrant(Gc),zoom:lb.zoom+1,x:Xc,y:$c,wrap:lb.wrap,fullyVisible:Ic})}}return Rb.sort(function(Wc,wd){return Wc.distanceSq-
wd.distanceSq}).map(function(Wc){return Wc.tileID})};Jf.prototype.resize=function(R,X){this.width=R;this.height=X;this.pixelsToGLUnits=[2/R,-2/X];this._constrain();this._calcMatrices()};Yf.unmodified.get=function(){return this._unmodified};Jf.prototype.zoomScale=function(R){return Math.pow(2,R)};Jf.prototype.scaleZoom=function(R){return Math.log(R)/Math.LN2};Jf.prototype.project=function(R){var X=a.clamp(R.lat,-this.maxValidLatitude,this.maxValidLatitude);return new a.Point(a.mercatorXfromLng(R.lng)*
this.worldSize,a.mercatorYfromLat(X)*this.worldSize)};Jf.prototype.unproject=function(R){return(new a.MercatorCoordinate(R.x/this.worldSize,R.y/this.worldSize)).toLngLat()};Yf.point.get=function(){return this.project(this.center)};Jf.prototype.setLocationAtPoint=function(R,X){X=this.pointCoordinate(X);var U=this.pointCoordinate(this.centerPoint);R=this.locationCoordinate(R);R=new a.MercatorCoordinate(R.x-(X.x-U.x),R.y-(X.y-U.y));this.center=this.coordinateLocation(R);this._renderWorldCopies&&(this.center=
this.center.wrap())};Jf.prototype.locationPoint=function(R){return this.coordinatePoint(this.locationCoordinate(R))};Jf.prototype.pointLocation=function(R){return this.coordinateLocation(this.pointCoordinate(R))};Jf.prototype.locationCoordinate=function(R){return a.MercatorCoordinate.fromLngLat(R)};Jf.prototype.coordinateLocation=function(R){return R.toLngLat()};Jf.prototype.pointCoordinate=function(R){var X=[R.x,R.y,0,1];R=[R.x,R.y,1,1];a.transformMat4(X,X,this.pixelMatrixInverse);a.transformMat4(R,
R,this.pixelMatrixInverse);var U=X[3],da=R[3],va=X[1]/U,Ca=R[1]/da,Qa=X[2]/U,lb=R[2]/da;Qa=Qa===lb?0:(0-Qa)/(lb-Qa);return new a.MercatorCoordinate(a.number(X[0]/U,R[0]/da,Qa)/this.worldSize,a.number(va,Ca,Qa)/this.worldSize)};Jf.prototype.coordinatePoint=function(R){R=[R.x*this.worldSize,R.y*this.worldSize,0,1];a.transformMat4(R,R,this.pixelMatrix);return new a.Point(R[0]/R[3],R[1]/R[3])};Jf.prototype.getBounds=function(){return(new a.LngLatBounds).extend(this.pointLocation(new a.Point(0,0))).extend(this.pointLocation(new a.Point(this.width,
0))).extend(this.pointLocation(new a.Point(this.width,this.height))).extend(this.pointLocation(new a.Point(0,this.height)))};Jf.prototype.getMaxBounds=function(){return this.latRange&&2===this.latRange.length&&this.lngRange&&2===this.lngRange.length?new a.LngLatBounds([this.lngRange[0],this.latRange[0]],[this.lngRange[1],this.latRange[1]]):null};Jf.prototype.setMaxBounds=function(R){R?(this.lngRange=[R.getWest(),R.getEast()],this.latRange=[R.getSouth(),R.getNorth()],this._constrain()):(this.lngRange=
null,this.latRange=[-this.maxValidLatitude,this.maxValidLatitude])};Jf.prototype.calculatePosMatrix=function(R,X){void 0===X&&(X=!1);var U=R.key,da=X?this._alignedPosMatrixCache:this._posMatrixCache;if(da[U])return da[U];var va=R.canonical,Ca=this.worldSize/this.zoomScale(va.z);R=va.x+Math.pow(2,va.z)*R.wrap;var Qa=a.identity(new Float64Array(16));a.translate(Qa,Qa,[R*Ca,va.y*Ca,0]);a.scale(Qa,Qa,[Ca/a.EXTENT,Ca/a.EXTENT,1]);a.multiply(Qa,X?this.alignedProjMatrix:this.projMatrix,Qa);da[U]=new Float32Array(Qa);
return da[U]};Jf.prototype.customLayerMatrix=function(){return this.mercatorMatrix.slice()};Jf.prototype._constrain=function(){if(this.center&&this.width&&this.height&&!this._constraining){this._constraining=!0;var R=-90,X=90,U=-180,da=180,va,Ca,Qa=this.size,lb=this._unmodified;if(this.latRange){var Lb=this.latRange;R=a.mercatorYfromLat(Lb[1])*this.worldSize;X=a.mercatorYfromLat(Lb[0])*this.worldSize;var Rb=X-R<Qa.y?Qa.y/(X-R):0}if(this.lngRange){da=this.lngRange;U=a.mercatorXfromLng(da[0])*this.worldSize;
da=a.mercatorXfromLng(da[1])*this.worldSize;var dc=da-U<Qa.x?Qa.x/(da-U):0}Lb=this.point;var Ic=Math.max(dc||0,Rb||0);if(Ic)this.center=this.unproject(new a.Point(dc?(da+U)/2:Lb.x,Rb?(X+R)/2:Lb.y)),this.zoom+=this.scaleZoom(Ic);else if(this.latRange&&(Rb=Lb.y,dc=Qa.y/2,Rb-dc<R&&(Ca=R+dc),Rb+dc>X&&(Ca=X-dc)),this.lngRange&&(R=Lb.x,Qa=Qa.x/2,R-Qa<U&&(va=U+Qa),R+Qa>da&&(va=da-Qa)),void 0!==va||void 0!==Ca)this.center=this.unproject(new a.Point(void 0!==va?va:Lb.x,void 0!==Ca?Ca:Lb.y));this._unmodified=
lb;this._constraining=!1}};Jf.prototype._calcMatrices=function(){if(this.height){var R=this.centerOffset;this.cameraToCenterDistance=.5/Math.tan(this._fov/2)*this.height;var X=this._fov*(.5+R.y/this.height),U=Math.sin(X)*this.cameraToCenterDistance/Math.sin(a.clamp(Math.PI-(Math.PI/2+this._pitch)-X,.01,Math.PI-.01)),da=this.point;X=da.x;da=da.y;var va=1.01*(Math.cos(Math.PI/2-this._pitch)*U+this.cameraToCenterDistance),Ca=this.height/50;U=new Float64Array(16);a.perspective(U,this._fov,this.width/
this.height,Ca,va);U[8]=2*-R.x/this.width;U[9]=2*R.y/this.height;a.scale(U,U,[1,-1,1]);a.translate(U,U,[0,0,-this.cameraToCenterDistance]);a.rotateX(U,U,this._pitch);a.rotateZ(U,U,this.angle);a.translate(U,U,[-X,-da,0]);this.mercatorMatrix=a.scale([],U,[this.worldSize,this.worldSize,this.worldSize]);a.scale(U,U,[1,1,a.mercatorZfromAltitude(1,this.center.lat)*this.worldSize,1]);this.projMatrix=U;this.invProjMatrix=a.invert([],this.projMatrix);R=this.width%2/2;va=this.height%2/2;Ca=Math.cos(this.angle);
var Qa=Math.sin(this.angle);X=X-Math.round(X)+Ca*R+Qa*va;da=da-Math.round(da)+Ca*va+Qa*R;U=new Float64Array(U);a.translate(U,U,[.5<X?X-1:X,.5<da?da-1:da,0]);this.alignedProjMatrix=U;U=a.create();a.scale(U,U,[this.width/2,-this.height/2,1]);a.translate(U,U,[1,-1,0]);this.labelPlaneMatrix=U;U=a.create();a.scale(U,U,[1,-1,1]);a.translate(U,U,[-1,-1,0]);a.scale(U,U,[2/this.width,2/this.height,1]);this.glCoordMatrix=U;this.pixelMatrix=a.multiply(new Float64Array(16),this.labelPlaneMatrix,this.projMatrix);
U=a.invert(new Float64Array(16),this.pixelMatrix);if(!U)throw Error("failed to invert matrix");this.pixelMatrixInverse=U;this._posMatrixCache={};this._alignedPosMatrixCache={}}};Jf.prototype.maxPitchScaleFactor=function(){if(!this.pixelMatrixInverse)return 1;var R=this.pointCoordinate(new a.Point(0,0));R=[R.x*this.worldSize,R.y*this.worldSize,0,1];return a.transformMat4(R,R,this.pixelMatrix)[3]/this.cameraToCenterDistance};Jf.prototype.getCameraPoint=function(){return this.centerPoint.add(new a.Point(0,
Math.tan(this._pitch)*(this.cameraToCenterDistance||1)))};Jf.prototype.getCameraQueryGeometry=function(R){var X=this.getCameraPoint();if(1===R.length)return[R[0],X];var U=X.x,da=X.y,va=X.x;X=X.y;for(var Ca=0;Ca<R.length;Ca+=1){var Qa=R[Ca];U=Math.min(U,Qa.x);da=Math.min(da,Qa.y);va=Math.max(va,Qa.x);X=Math.max(X,Qa.y)}return[new a.Point(U,da),new a.Point(va,da),new a.Point(va,X),new a.Point(U,X),new a.Point(U,da)]};Object.defineProperties(Jf.prototype,Yf);var wh=function(R){this._hashName=R&&encodeURIComponent(R);
a.bindAll(["_getCurrentHash","_onHashChange","_updateHash"],this);this._updateHash=sb(this._updateHashUnthrottled.bind(this),300)};wh.prototype.addTo=function(R){this._map=R;a.window.addEventListener("hashchange",this._onHashChange,!1);this._map.on("moveend",this._updateHash);return this};wh.prototype.remove=function(){a.window.removeEventListener("hashchange",this._onHashChange,!1);this._map.off("moveend",this._updateHash);clearTimeout(this._updateHash());delete this._map;return this};wh.prototype.getHashString=
function(R){var X=this._map.getCenter(),U=Math.round(100*this._map.getZoom())/100,da=Math.pow(10,Math.ceil((U*Math.LN2+Math.log(512/360/.5))/Math.LN10)),va=Math.round(X.lng*da)/da;X=Math.round(X.lat*da)/da;da=this._map.getBearing();var Ca=this._map.getPitch(),Qa="";Qa=R?Qa+("/"+va+"/"+X+"/"+U):Qa+(U+"/"+X+"/"+va);if(da||Ca)Qa+="/"+Math.round(10*da)/10;Ca&&(Qa+="/"+Math.round(Ca));if(this._hashName){var lb=this._hashName,Lb=!1;R=a.window.location.hash.slice(1).split("\x26").map(function(Rb){var dc=
Rb.split("\x3d")[0];return dc===lb?(Lb=!0,dc+"\x3d"+Qa):Rb}).filter(function(Rb){return Rb});Lb||R.push(lb+"\x3d"+Qa);return"#"+R.join("\x26")}return"#"+Qa};wh.prototype._getCurrentHash=function(){var R=this,X=a.window.location.hash.replace("#","");if(this._hashName){var U;X.split("\x26").map(function(da){return da.split("\x3d")}).forEach(function(da){da[0]===R._hashName&&(U=da)});return(U?U[1]||"":"").split("/")}return X.split("/")};wh.prototype._onHashChange=function(){var R=this._getCurrentHash();
if(3<=R.length&&!R.some(function(U){return isNaN(U)})){var X=this._map.dragRotate.isEnabled()&&this._map.touchZoomRotate.isEnabled()?+(R[3]||0):this._map.getBearing();this._map.jumpTo({center:[+R[2],+R[1]],zoom:+R[0],bearing:X,pitch:+(R[4]||0)});return!0}return!1};wh.prototype._updateHashUnthrottled=function(){var R=this.getHashString();try{a.window.history.replaceState(a.window.history.state,"",R)}catch(X){}};var Uh={linearity:.3,easing:a.bezier(0,0,.3,1)},hi=a.extend({deceleration:2500,maxSpeed:1400},
Uh),yi=a.extend({deceleration:20,maxSpeed:1400},Uh),zi=a.extend({deceleration:1E3,maxSpeed:360},Uh),Vh=a.extend({deceleration:1E3,maxSpeed:90},Uh),Xa=function(R){this._map=R;this.clear()};Xa.prototype.clear=function(){this._inertiaBuffer=[]};Xa.prototype.record=function(R){this._drainInertiaBuffer();this._inertiaBuffer.push({time:a.browser.now(),settings:R})};Xa.prototype._drainInertiaBuffer=function(){for(var R=this._inertiaBuffer,X=a.browser.now();0<R.length&&160<X-R[0].time;)R.shift()};Xa.prototype._onMoveEnd=
function(R){this._drainInertiaBuffer();if(!(2>this._inertiaBuffer.length)){for(var X=0,U=0,da=0,va=new a.Point(0,0),Ca=void 0,Qa=void 0,lb=0,Lb=this._inertiaBuffer;lb<Lb.length;lb+=1){var Rb=Lb[lb].settings;X+=Rb.zoomDelta||0;U+=Rb.bearingDelta||0;da+=Rb.pitchDelta||0;Rb.panDelta&&va._add(Rb.panDelta);Rb.around&&(Qa=Rb.around);Rb.pinchAround&&(Ca=Rb.pinchAround)}Lb=this._inertiaBuffer[this._inertiaBuffer.length-1].time-this._inertiaBuffer[0].time;lb={};va.mag()&&(R=ub(va.mag(),Lb,a.extend({},hi,R||
{})),lb.offset=va.mult(R.amount/va.mag()),lb.center=this._map.transform.center,hb(lb,R));X&&(X=ub(X,Lb,yi),lb.zoom=this._map.transform.zoom+X.amount,hb(lb,X));U&&(U=ub(U,Lb,zi),lb.bearing=this._map.transform.bearing+a.clamp(U.amount,-179,179),hb(lb,U));da&&(da=ub(da,Lb,Vh),lb.pitch=this._map.transform.pitch+da.amount,hb(lb,da));if(lb.zoom||lb.bearing)Ca=void 0===Ca?Qa:Ca,lb.around=Ca?this._map.unproject(Ca):this._map.getCenter();this.clear();return a.extend(lb,{noMoveStart:!0})}};var Pa=function(R){function X(da,
va,Ca,Qa){void 0===Qa&&(Qa={});var lb=ab.mousePos(va.getCanvasContainer(),Ca),Lb=va.unproject(lb);R.call(this,da,a.extend({point:lb,lngLat:Lb,originalEvent:Ca},Qa));this._defaultPrevented=!1;this.target=va}R&&(X.__proto__=R);X.prototype=Object.create(R&&R.prototype);X.prototype.constructor=X;var U={defaultPrevented:{configurable:!0}};X.prototype.preventDefault=function(){this._defaultPrevented=!0};U.defaultPrevented.get=function(){return this._defaultPrevented};Object.defineProperties(X.prototype,
U);return X}(a.Event),Mb=function(R){function X(da,va,Ca){var Qa="touchend"===da?Ca.changedTouches:Ca.touches;Qa=ab.touchPos(va.getCanvasContainer(),Qa);var lb=Qa.map(function(dc){return va.unproject(dc)}),Lb=Qa.reduce(function(dc,Ic,Gc,Xc){return dc.add(Ic.div(Xc.length))},new a.Point(0,0)),Rb=va.unproject(Lb);R.call(this,da,{points:Qa,point:Lb,lngLats:lb,lngLat:Rb,originalEvent:Ca});this._defaultPrevented=!1}R&&(X.__proto__=R);X.prototype=Object.create(R&&R.prototype);X.prototype.constructor=X;
var U={defaultPrevented:{configurable:!0}};X.prototype.preventDefault=function(){this._defaultPrevented=!0};U.defaultPrevented.get=function(){return this._defaultPrevented};Object.defineProperties(X.prototype,U);return X}(a.Event),bc=function(R){function X(da,va,Ca){R.call(this,da,{originalEvent:Ca});this._defaultPrevented=!1}R&&(X.__proto__=R);X.prototype=Object.create(R&&R.prototype);X.prototype.constructor=X;var U={defaultPrevented:{configurable:!0}};X.prototype.preventDefault=function(){this._defaultPrevented=
!0};U.defaultPrevented.get=function(){return this._defaultPrevented};Object.defineProperties(X.prototype,U);return X}(a.Event),kc=function(R,X){this._map=R;this._clickTolerance=X.clickTolerance};kc.prototype.reset=function(){delete this._mousedownPos};kc.prototype.wheel=function(R){return this._firePreventable(new bc(R.type,this._map,R))};kc.prototype.mousedown=function(R,X){this._mousedownPos=X;return this._firePreventable(new Pa(R.type,this._map,R))};kc.prototype.mouseup=function(R){this._map.fire(new Pa(R.type,
this._map,R))};kc.prototype.click=function(R,X){this._mousedownPos&&this._mousedownPos.dist(X)>=this._clickTolerance||this._map.fire(new Pa(R.type,this._map,R))};kc.prototype.dblclick=function(R){return this._firePreventable(new Pa(R.type,this._map,R))};kc.prototype.mouseover=function(R){this._map.fire(new Pa(R.type,this._map,R))};kc.prototype.mouseout=function(R){this._map.fire(new Pa(R.type,this._map,R))};kc.prototype.touchstart=function(R){return this._firePreventable(new Mb(R.type,this._map,R))};
kc.prototype.touchmove=function(R){this._map.fire(new Mb(R.type,this._map,R))};kc.prototype.touchend=function(R){this._map.fire(new Mb(R.type,this._map,R))};kc.prototype.touchcancel=function(R){this._map.fire(new Mb(R.type,this._map,R))};kc.prototype._firePreventable=function(R){this._map.fire(R);if(R.defaultPrevented)return{}};kc.prototype.isEnabled=function(){return!0};kc.prototype.isActive=function(){return!1};kc.prototype.enable=function(){};kc.prototype.disable=function(){};var ed=function(R){this._map=
R};ed.prototype.reset=function(){this._delayContextMenu=!1;delete this._contextMenuEvent};ed.prototype.mousemove=function(R){this._map.fire(new Pa(R.type,this._map,R))};ed.prototype.mousedown=function(){this._delayContextMenu=!0};ed.prototype.mouseup=function(){this._delayContextMenu=!1;this._contextMenuEvent&&(this._map.fire(new Pa("contextmenu",this._map,this._contextMenuEvent)),delete this._contextMenuEvent)};ed.prototype.contextmenu=function(R){this._delayContextMenu?this._contextMenuEvent=R:
this._map.fire(new Pa(R.type,this._map,R));this._map.listens("contextmenu")&&R.preventDefault()};ed.prototype.isEnabled=function(){return!0};ed.prototype.isActive=function(){return!1};ed.prototype.enable=function(){};ed.prototype.disable=function(){};var nd=function(R,X){this._map=R;this._el=R.getCanvasContainer();this._container=R.getContainer();this._clickTolerance=X.clickTolerance||1};nd.prototype.isEnabled=function(){return!!this._enabled};nd.prototype.isActive=function(){return!!this._active};
nd.prototype.enable=function(){this.isEnabled()||(this._enabled=!0)};nd.prototype.disable=function(){this.isEnabled()&&(this._enabled=!1)};nd.prototype.mousedown=function(R,X){this.isEnabled()&&R.shiftKey&&0===R.button&&(ab.disableDrag(),this._startPos=this._lastPos=X,this._active=!0)};nd.prototype.mousemoveWindow=function(R,X){if(this._active&&!(this._lastPos.equals(X)||!this._box&&X.dist(this._startPos)<this._clickTolerance)){var U=this._startPos;this._lastPos=X;this._box||(this._box=ab.create("div",
"mapboxgl-boxzoom",this._container),this._container.classList.add("mapboxgl-crosshair"),this._fireEvent("boxzoomstart",R));R=Math.min(U.x,X.x);var da=Math.max(U.x,X.x),va=Math.min(U.y,X.y);X=Math.max(U.y,X.y);ab.setTransform(this._box,"translate("+R+"px,"+va+"px)");this._box.style.width=da-R+"px";this._box.style.height=X-va+"px"}};nd.prototype.mouseupWindow=function(R,X){var U=this;if(this._active&&0===R.button){var da=this._startPos;this.reset();ab.suppressClick();if(da.x===X.x&&da.y===X.y)this._fireEvent("boxzoomcancel",
R);else return this._map.fire(new a.Event("boxzoomend",{originalEvent:R})),{cameraAnimation:function(va){return va.fitScreenCoordinates(da,X,U._map.getBearing(),{linear:!0})}}}};nd.prototype.keydown=function(R){this._active&&27===R.keyCode&&(this.reset(),this._fireEvent("boxzoomcancel",R))};nd.prototype.reset=function(){this._active=!1;this._container.classList.remove("mapboxgl-crosshair");this._box&&(ab.remove(this._box),this._box=null);ab.enableDrag();delete this._startPos;delete this._lastPos};
nd.prototype._fireEvent=function(R,X){return this._map.fire(new a.Event(R,{originalEvent:X}))};var hd=function(R){this.reset();this.numTouches=R.numTouches};hd.prototype.reset=function(){delete this.centroid;delete this.startTime;delete this.touches;this.aborted=!1};hd.prototype.touchstart=function(R,X,U){if(this.centroid||U.length>this.numTouches)this.aborted=!0;if(!this.aborted&&(void 0===this.startTime&&(this.startTime=R.timeStamp),U.length===this.numTouches)){R=new a.Point(0,0);for(var da=0;da<
X.length;da+=1)R._add(X[da]);this.centroid=R.div(X.length);this.touches=pb(U,X)}};hd.prototype.touchmove=function(R,X,U){if(!this.aborted&&this.centroid){R=pb(U,X);for(var da in this.touches)if(X=this.touches[da],U=R[da],!U||30<U.dist(X))this.aborted=!0}};hd.prototype.touchend=function(R,X,U){if(!this.centroid||500<R.timeStamp-this.startTime)this.aborted=!0;if(0===U.length&&(R=!this.aborted&&this.centroid,this.reset(),R))return R};var md=function(R){this.singleTap=new hd(R);this.numTaps=R.numTaps;
this.reset()};md.prototype.reset=function(){this.lastTime=Infinity;delete this.lastTap;this.count=0;this.singleTap.reset()};md.prototype.touchstart=function(R,X,U){this.singleTap.touchstart(R,X,U)};md.prototype.touchmove=function(R,X,U){this.singleTap.touchmove(R,X,U)};md.prototype.touchend=function(R,X,U){if(X=this.singleTap.touchend(R,X,U)){U=500>R.timeStamp-this.lastTime;var da=!this.lastTap||30>this.lastTap.dist(X);U&&da||this.reset();this.count++;this.lastTime=R.timeStamp;this.lastTap=X;if(this.count===
this.numTaps)return this.reset(),X}};var pd=function(){this._zoomIn=new md({numTouches:1,numTaps:2});this._zoomOut=new md({numTouches:2,numTaps:1});this.reset()};pd.prototype.reset=function(){this._active=!1;this._zoomIn.reset();this._zoomOut.reset()};pd.prototype.touchstart=function(R,X,U){this._zoomIn.touchstart(R,X,U);this._zoomOut.touchstart(R,X,U)};pd.prototype.touchmove=function(R,X,U){this._zoomIn.touchmove(R,X,U);this._zoomOut.touchmove(R,X,U)};pd.prototype.touchend=function(R,X,U){var da=
this,va=this._zoomIn.touchend(R,X,U),Ca=this._zoomOut.touchend(R,X,U);if(va)return this._active=!0,R.preventDefault(),setTimeout(function(){return da.reset()},0),{cameraAnimation:function(Qa){return Qa.easeTo({duration:300,zoom:Qa.getZoom()+1,around:Qa.unproject(va)},{originalEvent:R})}};if(Ca)return this._active=!0,R.preventDefault(),setTimeout(function(){return da.reset()},0),{cameraAnimation:function(Qa){return Qa.easeTo({duration:300,zoom:Qa.getZoom()-1,around:Qa.unproject(Ca)},{originalEvent:R})}}};
pd.prototype.touchcancel=function(){this.reset()};pd.prototype.enable=function(){this._enabled=!0};pd.prototype.disable=function(){this._enabled=!1;this.reset()};pd.prototype.isEnabled=function(){return this._enabled};pd.prototype.isActive=function(){return this._active};var Pd=function(R){this.reset();this._clickTolerance=R.clickTolerance||1};Pd.prototype.reset=function(){this._moved=this._active=!1;delete this._lastPoint;delete this._eventButton};Pd.prototype._correctButton=function(R,X){return!1};
Pd.prototype._move=function(R,X){return{}};Pd.prototype.mousedown=function(R,X){if(!this._lastPoint){var U=ab.mouseButton(R);this._correctButton(R,U)&&(this._lastPoint=X,this._eventButton=U)}};Pd.prototype.mousemoveWindow=function(R,X){var U=this._lastPoint;if(U&&(R.preventDefault(),this._moved||!(X.dist(U)<this._clickTolerance)))return this._moved=!0,this._lastPoint=X,this._move(U,X)};Pd.prototype.mouseupWindow=function(R){ab.mouseButton(R)===this._eventButton&&(this._moved&&ab.suppressClick(),this.reset())};
Pd.prototype.enable=function(){this._enabled=!0};Pd.prototype.disable=function(){this._enabled=!1;this.reset()};Pd.prototype.isEnabled=function(){return this._enabled};Pd.prototype.isActive=function(){return this._active};var xd=function(R){function X(){R.apply(this,arguments)}R&&(X.__proto__=R);X.prototype=Object.create(R&&R.prototype);X.prototype.constructor=X;X.prototype.mousedown=function(U,da){R.prototype.mousedown.call(this,U,da);this._lastPoint&&(this._active=!0)};X.prototype._correctButton=
function(U,da){return 0===da&&!U.ctrlKey};X.prototype._move=function(U,da){return{around:da,panDelta:da.sub(U)}};return X}(Pd),Ld=function(R){function X(){R.apply(this,arguments)}R&&(X.__proto__=R);X.prototype=Object.create(R&&R.prototype);X.prototype.constructor=X;X.prototype._correctButton=function(U,da){return 0===da&&U.ctrlKey||2===da};X.prototype._move=function(U,da){if(U=.8*(da.x-U.x))return this._active=!0,{bearingDelta:U}};X.prototype.contextmenu=function(U){U.preventDefault()};return X}(Pd),
$d=function(R){function X(){R.apply(this,arguments)}R&&(X.__proto__=R);X.prototype=Object.create(R&&R.prototype);X.prototype.constructor=X;X.prototype._correctButton=function(U,da){return 0===da&&U.ctrlKey||2===da};X.prototype._move=function(U,da){if(U=-.5*(da.y-U.y))return this._active=!0,{pitchDelta:U}};X.prototype.contextmenu=function(U){U.preventDefault()};return X}(Pd),Vd=function(R){this._minTouches=1;this._clickTolerance=R.clickTolerance||1;this.reset()};Vd.prototype.reset=function(){this._active=
!1;this._touches={};this._sum=new a.Point(0,0)};Vd.prototype.touchstart=function(R,X,U){return this._calculateTransform(R,X,U)};Vd.prototype.touchmove=function(R,X,U){if(this._active)return R.preventDefault(),this._calculateTransform(R,X,U)};Vd.prototype.touchend=function(R,X,U){this._calculateTransform(R,X,U);this._active&&U.length<this._minTouches&&this.reset()};Vd.prototype.touchcancel=function(){this.reset()};Vd.prototype._calculateTransform=function(R,X,U){0<U.length&&(this._active=!0);U=pb(U,
X);R=new a.Point(0,0);var da=new a.Point(0,0);X=0;for(var va in U){var Ca=U[va],Qa=this._touches[va];Qa&&(R._add(Ca),da._add(Ca.sub(Qa)),X++,U[va]=Ca)}this._touches=U;if(!(X<this._minTouches||!da.mag()||(va=da.div(X),this._sum._add(va),this._sum.mag()<this._clickTolerance)))return{around:R.div(X),panDelta:va}};Vd.prototype.enable=function(){this._enabled=!0};Vd.prototype.disable=function(){this._enabled=!1;this.reset()};Vd.prototype.isEnabled=function(){return this._enabled};Vd.prototype.isActive=
function(){return this._active};var Yd=function(){this.reset()};Yd.prototype.reset=function(){this._active=!1;delete this._firstTwoTouches};Yd.prototype._start=function(R){};Yd.prototype._move=function(R,X,U){return{}};Yd.prototype.touchstart=function(R,X,U){this._firstTwoTouches||2>U.length||(this._firstTwoTouches=[U[0].identifier,U[1].identifier],this._start([X[0],X[1]]))};Yd.prototype.touchmove=function(R,X,U){if(this._firstTwoTouches){R.preventDefault();var da=this._firstTwoTouches,va=da[1];da=
Ab(U,X,da[0]);X=Ab(U,X,va);if(da&&X)return U=this._aroundCenter?null:da.add(X).div(2),this._move([da,X],U,R)}};Yd.prototype.touchend=function(R,X,U){if(this._firstTwoTouches){var da=this._firstTwoTouches;R=da[1];da=Ab(U,X,da[0]);X=Ab(U,X,R);da&&X||(this._active&&ab.suppressClick(),this.reset())}};Yd.prototype.touchcancel=function(){this.reset()};Yd.prototype.enable=function(R){this._enabled=!0;this._aroundCenter=!!R&&"center"===R.around};Yd.prototype.disable=function(){this._enabled=!1;this.reset()};
Yd.prototype.isEnabled=function(){return this._enabled};Yd.prototype.isActive=function(){return this._active};var df=function(R){function X(){R.apply(this,arguments)}R&&(X.__proto__=R);X.prototype=Object.create(R&&R.prototype);X.prototype.constructor=X;X.prototype.reset=function(){R.prototype.reset.call(this);delete this._distance;delete this._startDistance};X.prototype._start=function(U){this._startDistance=this._distance=U[0].dist(U[1])};X.prototype._move=function(U,da){var va=this._distance;this._distance=
U[0].dist(U[1]);if(this._active||!(.1>Math.abs(Math.log(this._distance/this._startDistance)/Math.LN2)))return this._active=!0,{zoomDelta:Math.log(this._distance/va)/Math.LN2,pinchAround:da}};return X}(Yd),Se=function(R){function X(){R.apply(this,arguments)}R&&(X.__proto__=R);X.prototype=Object.create(R&&R.prototype);X.prototype.constructor=X;X.prototype.reset=function(){R.prototype.reset.call(this);delete this._minDiameter;delete this._startVector;delete this._vector};X.prototype._start=function(U){this._startVector=
this._vector=U[0].sub(U[1]);this._minDiameter=U[0].dist(U[1])};X.prototype._move=function(U,da){var va=this._vector;this._vector=U[0].sub(U[1]);if(this._active||!this._isBelowThreshold(this._vector))return this._active=!0,{bearingDelta:180*this._vector.angleWith(va)/Math.PI,pinchAround:da}};X.prototype._isBelowThreshold=function(U){this._minDiameter=Math.min(this._minDiameter,U.mag());var da=25/(Math.PI*this._minDiameter)*360;U=180*U.angleWith(this._startVector)/Math.PI;return Math.abs(U)<da};return X}(Yd),
he=function(R){function X(){R.apply(this,arguments)}R&&(X.__proto__=R);X.prototype=Object.create(R&&R.prototype);X.prototype.constructor=X;X.prototype.reset=function(){R.prototype.reset.call(this);this._valid=void 0;delete this._firstMove;delete this._lastPoints};X.prototype._start=function(U){this._lastPoints=U;tb(U[0].sub(U[1]))&&(this._valid=!1)};X.prototype._move=function(U,da,va){da=U[0].sub(this._lastPoints[0]);var Ca=U[1].sub(this._lastPoints[1]);if(this._valid=this.gestureBeginsVertically(da,
Ca,va.timeStamp))return this._lastPoints=U,this._active=!0,{pitchDelta:(da.y+Ca.y)/2*-.5}};X.prototype.gestureBeginsVertically=function(U,da,va){if(void 0!==this._valid)return this._valid;var Ca=2<=U.mag(),Qa=2<=da.mag();if(Ca||Qa){if(!Ca||!Qa)return void 0===this._firstMove&&(this._firstMove=va),100>va-this._firstMove?void 0:!1;va=0<U.y===0<da.y;return tb(U)&&tb(da)&&va}};return X}(Yd),se=function(){this._panStep=100;this._bearingStep=15;this._pitchStep=10};se.prototype.reset=function(){this._active=
!1};se.prototype.keydown=function(R){var X=this;if(!(R.altKey||R.ctrlKey||R.metaKey)){var U=0,da=0,va=0,Ca=0,Qa=0;switch(R.keyCode){case 61:case 107:case 171:case 187:U=1;break;case 189:case 109:case 173:U=-1;break;case 37:R.shiftKey?da=-1:(R.preventDefault(),Ca=-1);break;case 39:R.shiftKey?da=1:(R.preventDefault(),Ca=1);break;case 38:R.shiftKey?va=1:(R.preventDefault(),Qa=-1);break;case 40:R.shiftKey?va=-1:(R.preventDefault(),Qa=1);break;default:return}return{cameraAnimation:function(lb){var Lb=
lb.getZoom();lb.easeTo({duration:300,easeId:"keyboardHandler",easing:vb,zoom:U?Math.round(Lb)+U*(R.shiftKey?2:1):Lb,bearing:lb.getBearing()+da*X._bearingStep,pitch:lb.getPitch()+va*X._pitchStep,offset:[-Ca*X._panStep,-Qa*X._panStep],center:lb.getCenter()},{originalEvent:R})}}}};se.prototype.enable=function(){this._enabled=!0};se.prototype.disable=function(){this._enabled=!1;this.reset()};se.prototype.isEnabled=function(){return this._enabled};se.prototype.isActive=function(){return this._active};
var de=1/450,De=function(R,X){this._map=R;this._el=R.getCanvasContainer();this._handler=X;this._delta=0;this._defaultZoomRate=.01;this._wheelZoomRate=de;a.bindAll(["_onWheel","_onTimeout","_onScrollFrame","_onScrollFinished"],this)};De.prototype.setZoomRate=function(R){this._defaultZoomRate=R};De.prototype.setWheelZoomRate=function(R){this._wheelZoomRate=R};De.prototype.isEnabled=function(){return!!this._enabled};De.prototype.isActive=function(){return!!this._active||void 0!==this._finishTimeout};
De.prototype.isZooming=function(){return!!this._zooming};De.prototype.enable=function(R){this.isEnabled()||(this._enabled=!0,this._aroundCenter=R&&"center"===R.around)};De.prototype.disable=function(){this.isEnabled()&&(this._enabled=!1)};De.prototype.wheel=function(R){if(this.isEnabled()){var X=R.deltaMode===a.window.WheelEvent.DOM_DELTA_LINE?40*R.deltaY:R.deltaY,U=a.browser.now(),da=U-(this._lastWheelEventTime||0);this._lastWheelEventTime=U;0!==X&&0===X%4.000244140625?this._type="wheel":0!==X&&
4>Math.abs(X)?this._type="trackpad":400<da?(this._type=null,this._lastValue=X,this._timeout=setTimeout(this._onTimeout,40,R)):this._type||(this._type=200>Math.abs(da*X)?"trackpad":"wheel",this._timeout&&(clearTimeout(this._timeout),this._timeout=null,X+=this._lastValue));R.shiftKey&&X&&(X/=4);this._type&&(this._lastWheelEvent=R,this._delta-=X,this._active||this._start(R));R.preventDefault()}};De.prototype._onTimeout=function(R){this._type="wheel";this._delta-=this._lastValue;this._active||this._start(R)};
De.prototype._start=function(R){this._delta&&(this._frameId&&(this._frameId=null),this._active=!0,this.isZooming()||(this._zooming=!0),this._finishTimeout&&(clearTimeout(this._finishTimeout),delete this._finishTimeout),R=ab.mousePos(this._el,R),this._around=a.LngLat.convert(this._aroundCenter?this._map.getCenter():this._map.unproject(R)),this._aroundPoint=this._map.transform.locationPoint(this._around),this._frameId||(this._frameId=!0,this._handler._triggerRenderFrame()))};De.prototype.renderFrame=
function(){return this._onScrollFrame()};De.prototype._onScrollFrame=function(){var R=this;if(this._frameId&&(this._frameId=null,this.isActive())){var X=this._map.transform;if(0!==this._delta){var U=2/(1+Math.exp(-Math.abs(this._delta*("wheel"===this._type&&4.000244140625<Math.abs(this._delta)?this._wheelZoomRate:this._defaultZoomRate))));0>this._delta&&0!==U&&(U=1/U);var da="number"===typeof this._targetZoom?X.zoomScale(this._targetZoom):X.scale;this._targetZoom=Math.min(X.maxZoom,Math.max(X.minZoom,
X.scaleZoom(da*U)));"wheel"===this._type&&(this._startZoom=X.zoom,this._easing=this._smoothOutEasing(200));this._delta=0}var va="number"===typeof this._targetZoom?this._targetZoom:X.zoom,Ca=this._startZoom,Qa=this._easing;U=!1;"wheel"===this._type&&Ca&&Qa?(da=Math.min((a.browser.now()-this._lastWheelEventTime)/200,1),Qa=Qa(da),va=a.number(Ca,va,Qa),1>da?this._frameId||(this._frameId=!0):U=!0):U=!0;this._active=!0;U&&(this._active=!1,this._finishTimeout=setTimeout(function(){R._zooming=!1;R._handler._triggerRenderFrame();
delete R._targetZoom;delete R._finishTimeout},200));return{noInertia:!0,needsRenderFrame:!U,zoomDelta:va-X.zoom,around:this._aroundPoint,originalEvent:this._lastWheelEvent}}};De.prototype._smoothOutEasing=function(R){var X=a.ease;if(this._prevEase){X=this._prevEase;var U=(a.browser.now()-X.start)/X.duration;X=X.easing(U+.01)-X.easing(U);X=.27/Math.sqrt(X*X+1E-4)*.01;X=a.bezier(X,Math.sqrt(.0729-X*X),.25,1)}this._prevEase={start:a.browser.now(),duration:R,easing:X};return X};De.prototype.reset=function(){this._active=
!1};var yf=function(R,X){this._clickZoom=R;this._tapZoom=X};yf.prototype.enable=function(){this._clickZoom.enable();this._tapZoom.enable()};yf.prototype.disable=function(){this._clickZoom.disable();this._tapZoom.disable()};yf.prototype.isEnabled=function(){return this._clickZoom.isEnabled()&&this._tapZoom.isEnabled()};yf.prototype.isActive=function(){return this._clickZoom.isActive()||this._tapZoom.isActive()};var Zf=function(){this.reset()};Zf.prototype.reset=function(){this._active=!1};Zf.prototype.dblclick=
function(R,X){R.preventDefault();return{cameraAnimation:function(U){U.easeTo({duration:300,zoom:U.getZoom()+(R.shiftKey?-1:1),around:U.unproject(X)},{originalEvent:R})}}};Zf.prototype.enable=function(){this._enabled=!0};Zf.prototype.disable=function(){this._enabled=!1;this.reset()};Zf.prototype.isEnabled=function(){return this._enabled};Zf.prototype.isActive=function(){return this._active};var Tf=function(){this._tap=new md({numTouches:1,numTaps:1});this.reset()};Tf.prototype.reset=function(){this._active=
!1;delete this._swipePoint;delete this._swipeTouch;delete this._tapTime;this._tap.reset()};Tf.prototype.touchstart=function(R,X,U){this._swipePoint||((this._tapTime&&500<R.timeStamp-this._tapTime&&this.reset(),this._tapTime)?0<U.length&&(this._swipePoint=X[0],this._swipeTouch=U[0].identifier):this._tap.touchstart(R,X,U))};Tf.prototype.touchmove=function(R,X,U){if(!this._tapTime)this._tap.touchmove(R,X,U);else if(this._swipePoint&&U[0].identifier===this._swipeTouch)return X=X[0],U=X.y-this._swipePoint.y,
this._swipePoint=X,R.preventDefault(),this._active=!0,{zoomDelta:U/128}};Tf.prototype.touchend=function(R,X,U){this._tapTime?this._swipePoint&&0===U.length&&this.reset():this._tap.touchend(R,X,U)&&(this._tapTime=R.timeStamp)};Tf.prototype.touchcancel=function(){this.reset()};Tf.prototype.enable=function(){this._enabled=!0};Tf.prototype.disable=function(){this._enabled=!1;this.reset()};Tf.prototype.isEnabled=function(){return this._enabled};Tf.prototype.isActive=function(){return this._active};var gf=
function(R,X,U){this._el=R;this._mousePan=X;this._touchPan=U};gf.prototype.enable=function(R){this._inertiaOptions=R||{};this._mousePan.enable();this._touchPan.enable();this._el.classList.add("mapboxgl-touch-drag-pan")};gf.prototype.disable=function(){this._mousePan.disable();this._touchPan.disable();this._el.classList.remove("mapboxgl-touch-drag-pan")};gf.prototype.isEnabled=function(){return this._mousePan.isEnabled()&&this._touchPan.isEnabled()};gf.prototype.isActive=function(){return this._mousePan.isActive()||
this._touchPan.isActive()};var uf=function(R,X,U){this._pitchWithRotate=R.pitchWithRotate;this._mouseRotate=X;this._mousePitch=U};uf.prototype.enable=function(){this._mouseRotate.enable();this._pitchWithRotate&&this._mousePitch.enable()};uf.prototype.disable=function(){this._mouseRotate.disable();this._mousePitch.disable()};uf.prototype.isEnabled=function(){return this._mouseRotate.isEnabled()&&(!this._pitchWithRotate||this._mousePitch.isEnabled())};uf.prototype.isActive=function(){return this._mouseRotate.isActive()||
this._mousePitch.isActive()};var dg=function(R,X,U,da){this._el=R;this._touchZoom=X;this._touchRotate=U;this._tapDragZoom=da;this._rotationDisabled=!1;this._enabled=!0};dg.prototype.enable=function(R){this._touchZoom.enable(R);this._rotationDisabled||this._touchRotate.enable(R);this._tapDragZoom.enable();this._el.classList.add("mapboxgl-touch-zoom-rotate")};dg.prototype.disable=function(){this._touchZoom.disable();this._touchRotate.disable();this._tapDragZoom.disable();this._el.classList.remove("mapboxgl-touch-zoom-rotate")};
dg.prototype.isEnabled=function(){return this._touchZoom.isEnabled()&&(this._rotationDisabled||this._touchRotate.isEnabled())&&this._tapDragZoom.isEnabled()};dg.prototype.isActive=function(){return this._touchZoom.isActive()||this._touchRotate.isActive()||this._tapDragZoom.isActive()};dg.prototype.disableRotation=function(){this._rotationDisabled=!0;this._touchRotate.disable()};dg.prototype.enableRotation=function(){this._rotationDisabled=!1;this._touchZoom.isEnabled()&&this._touchRotate.enable()};
var kg=function(R){return R.zoom||R.drag||R.pitch||R.rotate},Kg=function(R){function X(){R.apply(this,arguments)}R&&(X.__proto__=R);X.prototype=Object.create(R&&R.prototype);return X.prototype.constructor=X}(a.Event),$f=function(R,X){this._map=R;this._el=this._map.getCanvasContainer();this._handlers=[];this._handlersById={};this._changes=[];this._inertia=new Xa(R);this._bearingSnap=X.bearingSnap;this._previousActiveHandlers={};this._eventsInProgress={};this._addDefaultHandlers(X);a.bindAll(["handleEvent",
"handleWindowEvent"],this);R=this._el;this._listeners=[[R,"touchstart",{passive:!1}],[R,"touchmove",{passive:!1}],[R,"touchend",void 0],[R,"touchcancel",void 0],[R,"mousedown",void 0],[R,"mousemove",void 0],[R,"mouseup",void 0],[a.window.document,"mousemove",{capture:!0}],[a.window.document,"mouseup",void 0],[R,"mouseover",void 0],[R,"mouseout",void 0],[R,"dblclick",void 0],[R,"click",void 0],[R,"keydown",{capture:!1}],[R,"keyup",void 0],[R,"wheel",{passive:!1}],[R,"contextmenu",void 0],[a.window,
"blur",void 0]];R=0;for(X=this._listeners;R<X.length;R+=1){var U=X[R],da=U[0];ab.addEventListener(da,U[1],da===a.window.document?this.handleWindowEvent:this.handleEvent,U[2])}};$f.prototype.destroy=function(){for(var R=0,X=this._listeners;R<X.length;R+=1){var U=X[R],da=U[0];ab.removeEventListener(da,U[1],da===a.window.document?this.handleWindowEvent:this.handleEvent,U[2])}};$f.prototype._addDefaultHandlers=function(R){var X=this._map,U=X.getCanvasContainer();this._add("mapEvent",new kc(X,R));var da=
X.boxZoom=new nd(X,R);this._add("boxZoom",da);da=new pd;var va=new Zf;X.doubleClickZoom=new yf(va,da);this._add("tapZoom",da);this._add("clickZoom",va);da=new Tf;this._add("tapDragZoom",da);va=X.touchPitch=new he;this._add("touchPitch",va);va=new Ld(R);var Ca=new $d(R);X.dragRotate=new uf(R,va,Ca);this._add("mouseRotate",va,["mousePitch"]);this._add("mousePitch",Ca,["mouseRotate"]);va=new xd(R);Ca=new Vd(R);X.dragPan=new gf(U,va,Ca);this._add("mousePan",va);this._add("touchPan",Ca,["touchZoom","touchRotate"]);
va=new Se;Ca=new df;X.touchZoomRotate=new dg(U,Ca,va,da);this._add("touchRotate",va,["touchPan","touchZoom"]);this._add("touchZoom",Ca,["touchPan","touchRotate"]);U=X.scrollZoom=new De(X,this);this._add("scrollZoom",U,["mousePan"]);U=X.keyboard=new se;this._add("keyboard",U);this._add("blockableMapEvent",new ed(X));U=0;for(da="boxZoom doubleClickZoom tapDragZoom touchPitch dragRotate dragPan touchZoomRotate scrollZoom keyboard".split(" ");U<da.length;U+=1)va=da[U],R.interactive&&R[va]&&X[va].enable(R[va])};
$f.prototype._add=function(R,X,U){this._handlers.push({handlerName:R,handler:X,allowed:U});this._handlersById[R]=X};$f.prototype.stop=function(){if(!this._updatingCamera){for(var R=0,X=this._handlers;R<X.length;R+=1)X[R].handler.reset();this._inertia.clear();this._fireEvents({},{});this._changes=[]}};$f.prototype.isActive=function(){for(var R=0,X=this._handlers;R<X.length;R+=1)if(X[R].handler.isActive())return!0;return!1};$f.prototype.isZooming=function(){return!!this._eventsInProgress.zoom||this._map.scrollZoom.isZooming()};
$f.prototype.isRotating=function(){return!!this._eventsInProgress.rotate};$f.prototype.isMoving=function(){return!!kg(this._eventsInProgress)||this.isZooming()};$f.prototype._blockedByActive=function(R,X,U){for(var da in R)if(da!==U&&(!X||0>X.indexOf(da)))return!0;return!1};$f.prototype.handleWindowEvent=function(R){this.handleEvent(R,R.type+"Window")};$f.prototype._getMapTouches=function(R){for(var X=[],U=0;U<R.length;U+=1){var da=R[U];this._el.contains(da.target)&&X.push(da)}return X};$f.prototype.handleEvent=
function(R,X){if("blur"===R.type)this.stop();else{this._updatingCamera=!0;for(var U="renderFrame"===R.type?void 0:R,da={needsRenderFrame:!1},va={},Ca={},Qa=R.touches?this._getMapTouches(R.touches):void 0,lb=Qa?ab.touchPos(this._el,Qa):ab.mousePos(this._el,R),Lb=0,Rb=this._handlers;Lb<Rb.length;Lb+=1){var dc=Rb[Lb],Ic=dc.handlerName,Gc=dc.handler;dc=dc.allowed;if(Gc.isEnabled()){var Xc=void 0;this._blockedByActive(Ca,dc,Ic)?Gc.reset():Gc[X||R.type]&&(Xc=Gc[X||R.type](R,lb,Qa),this.mergeHandlerResult(da,
va,Xc,Ic,U),Xc&&Xc.needsRenderFrame&&this._triggerRenderFrame());if(Xc||Gc.isActive())Ca[Ic]=Gc}}R={};for(var $c in this._previousActiveHandlers)Ca[$c]||(R[$c]=U);this._previousActiveHandlers=Ca;if(Object.keys(R).length||qb(da))this._changes.push([da,va,R]),this._triggerRenderFrame();(Object.keys(Ca).length||qb(da))&&this._map._stop(!0);this._updatingCamera=!1;if(U=da.cameraAnimation)this._inertia.clear(),this._fireEvents({},{}),this._changes=[],U(this._map)}};$f.prototype.mergeHandlerResult=function(R,
X,U,da,va){U&&(a.extend(R,U),R={handlerName:da,originalEvent:U.originalEvent||va},void 0!==U.zoomDelta&&(X.zoom=R),void 0!==U.panDelta&&(X.drag=R),void 0!==U.pitchDelta&&(X.pitch=R),void 0!==U.bearingDelta&&(X.rotate=R))};$f.prototype._applyChanges=function(){for(var R={},X={},U={},da=0,va=this._changes;da<va.length;da+=1){var Ca=va[da],Qa=Ca[0],lb=Ca[1];Ca=Ca[2];Qa.panDelta&&(R.panDelta=(R.panDelta||new a.Point(0,0))._add(Qa.panDelta));Qa.zoomDelta&&(R.zoomDelta=(R.zoomDelta||0)+Qa.zoomDelta);Qa.bearingDelta&&
(R.bearingDelta=(R.bearingDelta||0)+Qa.bearingDelta);Qa.pitchDelta&&(R.pitchDelta=(R.pitchDelta||0)+Qa.pitchDelta);void 0!==Qa.around&&(R.around=Qa.around);void 0!==Qa.pinchAround&&(R.pinchAround=Qa.pinchAround);Qa.noInertia&&(R.noInertia=Qa.noInertia);a.extend(X,lb);a.extend(U,Ca)}this._updateMapTransform(R,X,U);this._changes=[]};$f.prototype._updateMapTransform=function(R,X,U){var da=this._map,va=da.transform;if(!qb(R))return this._fireEvents(X,U);var Ca=R.panDelta,Qa=R.zoomDelta,lb=R.bearingDelta,
Lb=R.pitchDelta,Rb=R.around,dc=R.pinchAround;void 0!==dc&&(Rb=dc);da._stop(!0);Rb=Rb||da.transform.centerPoint;da=va.pointLocation(Ca?Rb.sub(Ca):Rb);lb&&(va.bearing+=lb);Lb&&(va.pitch+=Lb);Qa&&(va.zoom+=Qa);va.setLocationAtPoint(da,Rb);this._map._update();R.noInertia||this._inertia.record(R);this._fireEvents(X,U)};$f.prototype._fireEvents=function(R,X){var U=this,da=kg(this._eventsInProgress),va=kg(R),Ca={};for(dc in R){var Qa=R[dc].originalEvent;this._eventsInProgress[dc]||(Ca[dc+"start"]=Qa);this._eventsInProgress[dc]=
R[dc]}!da&&va&&this._fireEvent("movestart",va.originalEvent);for(var lb in Ca)this._fireEvent(lb,Ca[lb]);R.rotate&&(this._bearingChanged=!0);va&&this._fireEvent("move",va.originalEvent);for(var Lb in R)this._fireEvent(Lb,R[Lb].originalEvent);R={};var Rb;for(Rb in this._eventsInProgress){var dc=this._eventsInProgress[Rb];Ca=dc.handlerName;dc=dc.originalEvent;if(!this._handlersById[Ca].isActive()){delete this._eventsInProgress[Rb];var Ic=X[Ca]||dc;R[Rb+"end"]=Ic}}for(var Gc in R)this._fireEvent(Gc,
R[Gc]);X=kg(this._eventsInProgress);!da&&!va||X||(this._updatingCamera=!0,da=this._inertia._onMoveEnd(this._map.dragPan._inertiaOptions),va=function(Xc){return 0!==Xc&&-U._bearingSnap<Xc&&Xc<U._bearingSnap},da?(va(da.bearing||this._map.getBearing())&&(da.bearing=0),this._map.easeTo(da,{originalEvent:Ic})):(this._map.fire(new a.Event("moveend",{originalEvent:Ic})),va(this._map.getBearing())&&this._map.resetNorth()),this._updatingCamera=this._bearingChanged=!1)};$f.prototype._fireEvent=function(R,X){this._map.fire(new a.Event(R,
X?{originalEvent:X}:{}))};$f.prototype._triggerRenderFrame=function(){var R=this;void 0===this._frameId&&(this._frameId=this._map._requestRenderFrame(function(X){delete R._frameId;R.handleEvent(new Kg("renderFrame",{timeStamp:X}));R._applyChanges()}))};var Ee=function(R){function X(U,da){R.call(this);this._zooming=this._moving=!1;this.transform=U;this._bearingSnap=da.bearingSnap;a.bindAll(["_renderFrameCallback"],this)}R&&(X.__proto__=R);X.prototype=Object.create(R&&R.prototype);X.prototype.constructor=
X;X.prototype.getCenter=function(){return new a.LngLat(this.transform.center.lng,this.transform.center.lat)};X.prototype.setCenter=function(U,da){return this.jumpTo({center:U},da)};X.prototype.panBy=function(U,da,va){U=a.Point.convert(U).mult(-1);return this.panTo(this.transform.center,a.extend({offset:U},da),va)};X.prototype.panTo=function(U,da,va){return this.easeTo(a.extend({center:U},da),va)};X.prototype.getZoom=function(){return this.transform.zoom};X.prototype.setZoom=function(U,da){this.jumpTo({zoom:U},
da);return this};X.prototype.zoomTo=function(U,da,va){return this.easeTo(a.extend({zoom:U},da),va)};X.prototype.zoomIn=function(U,da){this.zoomTo(this.getZoom()+1,U,da);return this};X.prototype.zoomOut=function(U,da){this.zoomTo(this.getZoom()-1,U,da);return this};X.prototype.getBearing=function(){return this.transform.bearing};X.prototype.setBearing=function(U,da){this.jumpTo({bearing:U},da);return this};X.prototype.getPadding=function(){return this.transform.padding};X.prototype.setPadding=function(U,
da){this.jumpTo({padding:U},da);return this};X.prototype.rotateTo=function(U,da,va){return this.easeTo(a.extend({bearing:U},da),va)};X.prototype.resetNorth=function(U,da){this.rotateTo(0,a.extend({duration:1E3},U),da);return this};X.prototype.resetNorthPitch=function(U,da){this.easeTo(a.extend({bearing:0,pitch:0,duration:1E3},U),da);return this};X.prototype.snapToNorth=function(U,da){return Math.abs(this.getBearing())<this._bearingSnap?this.resetNorth(U,da):this};X.prototype.getPitch=function(){return this.transform.pitch};
X.prototype.setPitch=function(U,da){this.jumpTo({pitch:U},da);return this};X.prototype.cameraForBounds=function(U,da){U=a.LngLatBounds.convert(U);return this._cameraForBoxAndBearing(U.getNorthWest(),U.getSouthEast(),0,da)};X.prototype._cameraForBoxAndBearing=function(U,da,va,Ca){var Qa={top:0,bottom:0,right:0,left:0};Ca=a.extend({padding:Qa,offset:[0,0],maxZoom:this.transform.maxZoom},Ca);if("number"===typeof Ca.padding){var lb=Ca.padding;Ca.padding={top:lb,bottom:lb,right:lb,left:lb}}Ca.padding=
a.extend(Qa,Ca.padding);Qa=this.transform;lb=Qa.padding;U=Qa.project(a.LngLat.convert(U));da=Qa.project(a.LngLat.convert(da));var Lb=U.rotate(-va*Math.PI/180),Rb=da.rotate(-va*Math.PI/180),dc=new a.Point(Math.max(Lb.x,Rb.x),Math.max(Lb.y,Rb.y));Lb=new a.Point(Math.min(Lb.x,Rb.x),Math.min(Lb.y,Rb.y));Lb=dc.sub(Lb);dc=(Qa.width-(lb.left+lb.right+Ca.padding.left+Ca.padding.right))/Lb.x;lb=(Qa.height-(lb.top+lb.bottom+Ca.padding.top+Ca.padding.bottom))/Lb.y;if(0>lb||0>dc)a.warnOnce("Map cannot fit within canvas with the given bounds, padding, and/or offset.");
else return lb=Math.min(Qa.scaleZoom(Qa.scale*Math.min(dc,lb)),Ca.maxZoom),dc=a.Point.convert(Ca.offset),Ca=(new a.Point(dc.x+(Ca.padding.left-Ca.padding.right)/2,dc.y+(Ca.padding.top-Ca.padding.bottom)/2)).mult(Qa.scale/Qa.zoomScale(lb)),{center:Qa.unproject(U.add(da).div(2).sub(Ca)),zoom:lb,bearing:va}};X.prototype.fitBounds=function(U,da,va){return this._fitInternal(this.cameraForBounds(U,da),da,va)};X.prototype.fitScreenCoordinates=function(U,da,va,Ca,Qa){return this._fitInternal(this._cameraForBoxAndBearing(this.transform.pointLocation(a.Point.convert(U)),
this.transform.pointLocation(a.Point.convert(da)),va,Ca),Ca,Qa)};X.prototype._fitInternal=function(U,da,va){if(!U)return this;da=a.extend(U,da);delete da.padding;return da.linear?this.easeTo(da,va):this.flyTo(da,va)};X.prototype.jumpTo=function(U,da){this.stop();var va=this.transform,Ca=!1,Qa=!1,lb=!1;"zoom"in U&&va.zoom!==+U.zoom&&(Ca=!0,va.zoom=+U.zoom);void 0!==U.center&&(va.center=a.LngLat.convert(U.center));"bearing"in U&&va.bearing!==+U.bearing&&(Qa=!0,va.bearing=+U.bearing);"pitch"in U&&va.pitch!==
+U.pitch&&(lb=!0,va.pitch=+U.pitch);null==U.padding||va.isPaddingEqual(U.padding)||(va.padding=U.padding);this.fire(new a.Event("movestart",da)).fire(new a.Event("move",da));Ca&&this.fire(new a.Event("zoomstart",da)).fire(new a.Event("zoom",da)).fire(new a.Event("zoomend",da));Qa&&this.fire(new a.Event("rotatestart",da)).fire(new a.Event("rotate",da)).fire(new a.Event("rotateend",da));lb&&this.fire(new a.Event("pitchstart",da)).fire(new a.Event("pitch",da)).fire(new a.Event("pitchend",da));return this.fire(new a.Event("moveend",
da))};X.prototype.easeTo=function(U,da){var va=this;this._stop(!1,U.easeId);U=a.extend({offset:[0,0],duration:500,easing:a.ease},U);if(!1===U.animate||!U.essential&&a.browser.prefersReducedMotion)U.duration=0;var Ca=this.transform,Qa=this.getZoom(),lb=this.getBearing(),Lb=this.getPitch(),Rb=this.getPadding(),dc="zoom"in U?+U.zoom:Qa,Ic="bearing"in U?this._normalizeBearing(U.bearing,lb):lb,Gc="pitch"in U?+U.pitch:Lb,Xc="padding"in U?U.padding:Ca.padding,$c=a.Point.convert(U.offset),Wc=Ca.centerPoint.add($c),
wd=Ca.pointLocation(Wc),Qd=a.LngLat.convert(U.center||wd);this._normalizeCenter(Qd);var yd=Ca.project(wd),ge=Ca.project(Qd).sub(yd),be=Ca.zoomScale(dc-Qa);if(U.around){var ke=a.LngLat.convert(U.around);var re=Ca.locationPoint(ke)}wd={moving:this._moving,zooming:this._zooming,rotating:this._rotating,pitching:this._pitching};this._zooming=this._zooming||dc!==Qa;this._rotating=this._rotating||lb!==Ic;this._pitching=this._pitching||Gc!==Lb;this._padding=!Ca.isPaddingEqual(Xc);this._easeId=U.easeId;this._prepareEase(da,
U.noMoveStart,wd);clearTimeout(this._easeEndTimeoutID);this._ease(function(ne){va._zooming&&(Ca.zoom=a.number(Qa,dc,ne));va._rotating&&(Ca.bearing=a.number(lb,Ic,ne));va._pitching&&(Ca.pitch=a.number(Lb,Gc,ne));va._padding&&(Ca.interpolatePadding(Rb,Xc,ne),Wc=Ca.centerPoint.add($c));if(ke)Ca.setLocationAtPoint(ke,re);else{var Le=Ca.zoomScale(Ca.zoom-Qa);ne=Ca.unproject(yd.add(ge.mult(ne*Math.pow(dc>Qa?Math.min(2,be):Math.max(.5,be),1-ne))).mult(Le));Ca.setLocationAtPoint(Ca.renderWorldCopies?ne.wrap():
ne,Wc)}va._fireMoveEvents(da)},function(ne){va._afterEase(da,ne)},U);return this};X.prototype._prepareEase=function(U,da,va){void 0===va&&(va={});this._moving=!0;da||va.moving||this.fire(new a.Event("movestart",U));this._zooming&&!va.zooming&&this.fire(new a.Event("zoomstart",U));this._rotating&&!va.rotating&&this.fire(new a.Event("rotatestart",U));this._pitching&&!va.pitching&&this.fire(new a.Event("pitchstart",U))};X.prototype._fireMoveEvents=function(U){this.fire(new a.Event("move",U));this._zooming&&
this.fire(new a.Event("zoom",U));this._rotating&&this.fire(new a.Event("rotate",U));this._pitching&&this.fire(new a.Event("pitch",U))};X.prototype._afterEase=function(U,da){if(!this._easeId||!da||this._easeId!==da){delete this._easeId;da=this._zooming;var va=this._rotating,Ca=this._pitching;this._padding=this._pitching=this._rotating=this._zooming=this._moving=!1;da&&this.fire(new a.Event("zoomend",U));va&&this.fire(new a.Event("rotateend",U));Ca&&this.fire(new a.Event("pitchend",U));this.fire(new a.Event("moveend",
U))}};X.prototype.flyTo=function(U,da){function va(ef){ef=(we*we-Le*Le+(ef?-1:1)*Ne*Ne*kf*kf)/(2*(ef?we:Le)*Ne*kf);return Math.log(Math.sqrt(ef*ef+1)-ef)}function Ca(ef){return(Math.exp(ef)+Math.exp(-ef))/2}var Qa=this;if(!U.essential&&a.browser.prefersReducedMotion)return U=a.pick(U,["center","zoom","bearing","pitch","around"]),this.jumpTo(U,da);this.stop();U=a.extend({offset:[0,0],speed:1.2,curve:1.42,easing:a.ease},U);var lb=this.transform,Lb=this.getZoom(),Rb=this.getBearing(),dc=this.getPitch(),
Ic=this.getPadding(),Gc="zoom"in U?a.clamp(+U.zoom,lb.minZoom,lb.maxZoom):Lb,Xc="bearing"in U?this._normalizeBearing(U.bearing,Rb):Rb,$c="pitch"in U?+U.pitch:dc,Wc="padding"in U?U.padding:lb.padding,wd=lb.zoomScale(Gc-Lb),Qd=a.Point.convert(U.offset),yd=lb.centerPoint.add(Qd),ge=lb.pointLocation(yd),be=a.LngLat.convert(U.center||ge);this._normalizeCenter(be);var ke=lb.project(ge),re=lb.project(be).sub(ke),ne=U.curve,Le=Math.max(lb.width,lb.height),we=Le/wd,kf=re.mag();"minZoom"in U&&(wd=a.clamp(Math.min(U.minZoom,
Lb,Gc),lb.minZoom,lb.maxZoom),wd=Le/lb.zoomScale(wd-Lb),ne=Math.sqrt(wd/kf*2));var Ne=ne*ne,xf=va(0),wf=function(ef){return Ca(xf)/Ca(xf+ne*ef)},lg=function(ef){var hg=Ca(xf);ef=xf+ne*ef;ef=(Math.exp(ef)-Math.exp(-ef))/2/Ca(ef);return(hg*ef-(Math.exp(xf)-Math.exp(-xf))/2)/Ne*Le/kf},Cf=(va(1)-xf)/ne;if(1E-6>Math.abs(kf)||!isFinite(Cf)){if(1E-6>Math.abs(Le-we))return this.easeTo(U,da);var Dg=we<Le?-1:1;Cf=Math.abs(Math.log(we/Le))/ne;lg=function(){return 0};wf=function(ef){return Math.exp(Dg*ne*ef)}}U.duration=
"duration"in U?+U.duration:1E3*Cf/("screenSpeed"in U?+U.screenSpeed/ne:+U.speed);U.maxDuration&&U.duration>U.maxDuration&&(U.duration=0);this._zooming=!0;this._rotating=Rb!==Xc;this._pitching=$c!==dc;this._padding=!lb.isPaddingEqual(Wc);this._prepareEase(da,!1);this._ease(function(ef){var hg=ef*Cf,ca=1/wf(hg);lb.zoom=1===ef?Gc:Lb+lb.scaleZoom(ca);Qa._rotating&&(lb.bearing=a.number(Rb,Xc,ef));Qa._pitching&&(lb.pitch=a.number(dc,$c,ef));Qa._padding&&(lb.interpolatePadding(Ic,Wc,ef),yd=lb.centerPoint.add(Qd));
ef=1===ef?be:lb.unproject(ke.add(re.mult(lg(hg))).mult(ca));lb.setLocationAtPoint(lb.renderWorldCopies?ef.wrap():ef,yd);Qa._fireMoveEvents(da)},function(){return Qa._afterEase(da)},U);return this};X.prototype.isEasing=function(){return!!this._easeFrameId};X.prototype.stop=function(){return this._stop()};X.prototype._stop=function(U,da){this._easeFrameId&&(this._cancelRenderFrame(this._easeFrameId),delete this._easeFrameId,delete this._onEaseFrame);if(this._onEaseEnd){var va=this._onEaseEnd;delete this._onEaseEnd;
va.call(this,da)}U||(U=this.handlers)&&U.stop();return this};X.prototype._ease=function(U,da,va){!1===va.animate||0===va.duration?(U(1),da()):(this._easeStart=a.browser.now(),this._easeOptions=va,this._onEaseFrame=U,this._onEaseEnd=da,this._easeFrameId=this._requestRenderFrame(this._renderFrameCallback))};X.prototype._renderFrameCallback=function(){var U=Math.min((a.browser.now()-this._easeStart)/this._easeOptions.duration,1);this._onEaseFrame(this._easeOptions.easing(U));1>U?this._easeFrameId=this._requestRenderFrame(this._renderFrameCallback):
this.stop()};X.prototype._normalizeBearing=function(U,da){U=a.wrap(U,-180,180);var va=Math.abs(U-da);Math.abs(U-360-da)<va&&(U-=360);Math.abs(U+360-da)<va&&(U+=360);return U};X.prototype._normalizeCenter=function(U){var da=this.transform;da.renderWorldCopies&&!da.lngRange&&(da=U.lng-da.center.lng,U.lng+=180<da?-360:-180>da?360:0)};return X}(a.Evented),eg=function(R){void 0===R&&(R={});this.options=R;a.bindAll(["_updateEditLink","_updateData","_updateCompact"],this)};eg.prototype.getDefaultPosition=
function(){return"bottom-right"};eg.prototype.onAdd=function(R){var X=this.options&&this.options.compact;this._map=R;this._container=ab.create("div","mapboxgl-ctrl mapboxgl-ctrl-attrib");this._innerContainer=ab.create("div","mapboxgl-ctrl-attrib-inner",this._container);X&&this._container.classList.add("mapboxgl-compact");this._updateAttributions();this._updateEditLink();this._map.on("styledata",this._updateData);this._map.on("sourcedata",this._updateData);this._map.on("moveend",this._updateEditLink);
void 0===X&&(this._map.on("resize",this._updateCompact),this._updateCompact());return this._container};eg.prototype.onRemove=function(){ab.remove(this._container);this._map.off("styledata",this._updateData);this._map.off("sourcedata",this._updateData);this._map.off("moveend",this._updateEditLink);this._map.off("resize",this._updateCompact);this._attribHTML=this._map=void 0};eg.prototype._updateEditLink=function(){var R=this._editLink;R||(R=this._editLink=this._container.querySelector(".mapbox-improve-map"));
var X=[{key:"owner",value:this.styleOwner},{key:"id",value:this.styleId},{key:"access_token",value:this._map._requestManager._customAccessToken||a.config.ACCESS_TOKEN}];if(R){var U=X.reduce(function(da,va,Ca){va.value&&(da+=va.key+"\x3d"+va.value+(Ca<X.length-1?"\x26":""));return da},"?");R.href=a.config.FEEDBACK_URL+"/"+U+(this._map._hash?this._map._hash.getHashString(!0):"");R.rel="noopener nofollow"}};eg.prototype._updateData=function(R){!R||"metadata"!==R.sourceDataType&&"style"!==R.dataType||
(this._updateAttributions(),this._updateEditLink())};eg.prototype._updateAttributions=function(){if(this._map.style){var R=[];this.options.customAttribution&&(Array.isArray(this.options.customAttribution)?R=R.concat(this.options.customAttribution.map(function(va){return"string"!==typeof va?"":va})):"string"===typeof this.options.customAttribution&&R.push(this.options.customAttribution));if(this._map.style.stylesheet){var X=this._map.style.stylesheet;this.styleOwner=X.owner;this.styleId=X.id}X=this._map.style.sourceCaches;
for(var U in X){var da=X[U];da.used&&(da=da.getSource(),da.attribution&&0>R.indexOf(da.attribution)&&R.push(da.attribution))}R.sort(function(va,Ca){return va.length-Ca.length});R=R.filter(function(va,Ca){for(Ca+=1;Ca<R.length;Ca++)if(0<=R[Ca].indexOf(va))return!1;return!0});U=R.join(" | ");U!==this._attribHTML&&(this._attribHTML=U,R.length?(this._innerContainer.innerHTML=U,this._container.classList.remove("mapboxgl-attrib-empty")):this._container.classList.add("mapboxgl-attrib-empty"),this._editLink=
null)}};eg.prototype._updateCompact=function(){640>=this._map.getCanvasContainer().offsetWidth?this._container.classList.add("mapboxgl-compact"):this._container.classList.remove("mapboxgl-compact")};var Cg=function(){a.bindAll(["_updateLogo"],this);a.bindAll(["_updateCompact"],this)};Cg.prototype.onAdd=function(R){this._map=R;this._container=ab.create("div","mapboxgl-ctrl");R=ab.create("a","mapboxgl-ctrl-logo");R.target="_blank";R.rel="noopener nofollow";R.href="https://www.mapbox.com/";R.setAttribute("aria-label",
this._map._getUIString("LogoControl.Title"));R.setAttribute("rel","noopener nofollow");this._container.appendChild(R);this._container.style.display="none";this._map.on("sourcedata",this._updateLogo);this._updateLogo();this._map.on("resize",this._updateCompact);this._updateCompact();return this._container};Cg.prototype.onRemove=function(){ab.remove(this._container);this._map.off("sourcedata",this._updateLogo);this._map.off("resize",this._updateCompact)};Cg.prototype.getDefaultPosition=function(){return"bottom-left"};
Cg.prototype._updateLogo=function(R){R&&"metadata"!==R.sourceDataType||(this._container.style.display=this._logoRequired()?"block":"none")};Cg.prototype._logoRequired=function(){if(this._map.style){var R=this._map.style.sourceCaches,X;for(X in R)if(R[X].getSource().mapbox_logo)return!0;return!1}};Cg.prototype._updateCompact=function(){var R=this._container.children;R.length&&(R=R[0],250>this._map.getCanvasContainer().offsetWidth?R.classList.add("mapboxgl-compact"):R.classList.remove("mapboxgl-compact"))};
var mh=function(){this._queue=[];this._id=0;this._currentlyRunning=this._cleared=!1};mh.prototype.add=function(R){var X=++this._id;this._queue.push({callback:R,id:X,cancelled:!1});return X};mh.prototype.remove=function(R){var X=this._currentlyRunning,U=0;for(X=X?this._queue.concat(X):this._queue;U<X.length;U+=1){var da=X[U];if(da.id===R){da.cancelled=!0;break}}};mh.prototype.run=function(R){void 0===R&&(R=0);var X=this._currentlyRunning=this._queue;this._queue=[];for(var U=0;U<X.length;U+=1){var da=
X[U];if(!da.cancelled&&(da.callback(R),this._cleared))break}this._currentlyRunning=this._cleared=!1};mh.prototype.clear=function(){this._currentlyRunning&&(this._cleared=!0);this._queue=[]};var Wi={"FullscreenControl.Enter":"Enter fullscreen","FullscreenControl.Exit":"Exit fullscreen","GeolocateControl.FindMyLocation":"Find my location","GeolocateControl.LocationNotAvailable":"Location not available","LogoControl.Title":"Mapbox logo","NavigationControl.ResetBearing":"Reset bearing to north","NavigationControl.ZoomIn":"Zoom in",
"NavigationControl.ZoomOut":"Zoom out","ScaleControl.Feet":"ft","ScaleControl.Meters":"m","ScaleControl.Kilometers":"km","ScaleControl.Miles":"mi","ScaleControl.NauticalMiles":"nm"},Ch=a.window.HTMLImageElement,Xi=a.window.HTMLElement,Ih=a.window.ImageBitmap,Si={center:[0,0],zoom:0,bearing:0,pitch:0,minZoom:-2,maxZoom:22,minPitch:0,maxPitch:60,interactive:!0,scrollZoom:!0,boxZoom:!0,dragRotate:!0,dragPan:!0,keyboard:!0,doubleClickZoom:!0,touchZoomRotate:!0,touchPitch:!0,bearingSnap:7,clickTolerance:3,
pitchWithRotate:!0,hash:!1,attributionControl:!0,failIfMajorPerformanceCaveat:!1,preserveDrawingBuffer:!1,trackResize:!0,renderWorldCopies:!0,refreshExpiredTiles:!0,maxTileCacheSize:null,localIdeographFontFamily:"sans-serif",transformRequest:null,accessToken:null,fadeDuration:300,crossSourceCollisions:!0},ij=function(R){function X(da){var va=this;da=a.extend({},Si,da);if(null!=da.minZoom&&null!=da.maxZoom&&da.minZoom>da.maxZoom)throw Error("maxZoom must be greater than or equal to minZoom");if(null!=
da.minPitch&&null!=da.maxPitch&&da.minPitch>da.maxPitch)throw Error("maxPitch must be greater than or equal to minPitch");if(null!=da.minPitch&&0>da.minPitch)throw Error("minPitch must be greater than or equal to 0");if(null!=da.maxPitch&&60<da.maxPitch)throw Error("maxPitch must be less than or equal to 60");var Ca=new Jf(da.minZoom,da.maxZoom,da.minPitch,da.maxPitch,da.renderWorldCopies);R.call(this,Ca,da);this._interactive=da.interactive;this._maxTileCacheSize=da.maxTileCacheSize;this._failIfMajorPerformanceCaveat=
da.failIfMajorPerformanceCaveat;this._preserveDrawingBuffer=da.preserveDrawingBuffer;this._antialias=da.antialias;this._trackResize=da.trackResize;this._bearingSnap=da.bearingSnap;this._refreshExpiredTiles=da.refreshExpiredTiles;this._fadeDuration=da.fadeDuration;this._crossSourceCollisions=da.crossSourceCollisions;this._crossFadingFactor=1;this._collectResourceTiming=da.collectResourceTiming;this._renderTaskQueue=new mh;this._controls=[];this._mapId=a.uniqueId();this._locale=a.extend({},Wi,da.locale);
this._requestManager=new a.RequestManager(da.transformRequest,da.accessToken);if("string"===typeof da.container){if(this._container=a.window.document.getElementById(da.container),!this._container)throw Error("Container '"+da.container+"' not found.");}else if(da.container instanceof Xi)this._container=da.container;else throw Error("Invalid type: 'container' must be a String or HTMLElement.");da.maxBounds&&this.setMaxBounds(da.maxBounds);a.bindAll(["_onWindowOnline","_onWindowResize","_contextLost",
"_contextRestored"],this);this._setupContainer();this._setupPainter();if(void 0===this.painter)throw Error("Failed to initialize WebGL.");this.on("move",function(){return va._update(!1)});this.on("moveend",function(){return va._update(!1)});this.on("zoom",function(){return va._update(!0)});"undefined"!==typeof a.window&&(a.window.addEventListener("online",this._onWindowOnline,!1),a.window.addEventListener("resize",this._onWindowResize,!1));this.handlers=new $f(this,da);Ca="string"===typeof da.hash&&
da.hash||void 0;this._hash=da.hash&&(new wh(Ca)).addTo(this);this._hash&&this._hash._onHashChange()||(this.jumpTo({center:da.center,zoom:da.zoom,bearing:da.bearing,pitch:da.pitch}),da.bounds&&(this.resize(),this.fitBounds(da.bounds,a.extend({},da.fitBoundsOptions,{duration:0}))));this.resize();this._localIdeographFontFamily=da.localIdeographFontFamily;da.style&&this.setStyle(da.style,{localIdeographFontFamily:da.localIdeographFontFamily});da.attributionControl&&this.addControl(new eg({customAttribution:da.customAttribution}));
this.addControl(new Cg,da.logoPosition);this.on("style.load",function(){va.transform.unmodified&&va.jumpTo(va.style.stylesheet)});this.on("data",function(Qa){va._update("style"===Qa.dataType);va.fire(new a.Event(Qa.dataType+"data",Qa))});this.on("dataloading",function(Qa){va.fire(new a.Event(Qa.dataType+"dataloading",Qa))})}R&&(X.__proto__=R);X.prototype=Object.create(R&&R.prototype);X.prototype.constructor=X;var U={showTileBoundaries:{configurable:!0},showPadding:{configurable:!0},showCollisionBoxes:{configurable:!0},
showOverdrawInspector:{configurable:!0},repaint:{configurable:!0},vertices:{configurable:!0},version:{configurable:!0}};X.prototype._getMapId=function(){return this._mapId};X.prototype.addControl=function(da,va){void 0===va&&da.getDefaultPosition&&(va=da.getDefaultPosition());void 0===va&&(va="top-right");if(!da||!da.onAdd)return this.fire(new a.ErrorEvent(Error("Invalid argument to map.addControl(). Argument must be a control with onAdd and onRemove methods.")));var Ca=da.onAdd(this);this._controls.push(da);
da=this._controlPositions[va];-1!==va.indexOf("bottom")?da.insertBefore(Ca,da.firstChild):da.appendChild(Ca);return this};X.prototype.removeControl=function(da){if(!da||!da.onRemove)return this.fire(new a.ErrorEvent(Error("Invalid argument to map.removeControl(). Argument must be a control with onAdd and onRemove methods.")));var va=this._controls.indexOf(da);-1<va&&this._controls.splice(va,1);da.onRemove(this);return this};X.prototype.resize=function(da){var va=this._containerDimensions(),Ca=va[0];
va=va[1];this._resizeCanvas(Ca,va);this.transform.resize(Ca,va);this.painter.resize(Ca,va);if(Ca=!this._moving)this.stop(),this.fire(new a.Event("movestart",da)).fire(new a.Event("move",da));this.fire(new a.Event("resize",da));Ca&&this.fire(new a.Event("moveend",da));return this};X.prototype.getBounds=function(){return this.transform.getBounds()};X.prototype.getMaxBounds=function(){return this.transform.getMaxBounds()};X.prototype.setMaxBounds=function(da){this.transform.setMaxBounds(a.LngLatBounds.convert(da));
return this._update()};X.prototype.setMinZoom=function(da){da=null===da||void 0===da?-2:da;if(-2<=da&&da<=this.transform.maxZoom)return this.transform.minZoom=da,this._update(),this.getZoom()<da&&this.setZoom(da),this;throw Error("minZoom must be between -2 and the current maxZoom, inclusive");};X.prototype.getMinZoom=function(){return this.transform.minZoom};X.prototype.setMaxZoom=function(da){da=null===da||void 0===da?22:da;if(da>=this.transform.minZoom)return this.transform.maxZoom=da,this._update(),
this.getZoom()>da&&this.setZoom(da),this;throw Error("maxZoom must be greater than the current minZoom");};X.prototype.getMaxZoom=function(){return this.transform.maxZoom};X.prototype.setMinPitch=function(da){da=null===da||void 0===da?0:da;if(0>da)throw Error("minPitch must be greater than or equal to 0");if(0<=da&&da<=this.transform.maxPitch)return this.transform.minPitch=da,this._update(),this.getPitch()<da&&this.setPitch(da),this;throw Error("minPitch must be between 0 and the current maxPitch, inclusive");
};X.prototype.getMinPitch=function(){return this.transform.minPitch};X.prototype.setMaxPitch=function(da){da=null===da||void 0===da?60:da;if(60<da)throw Error("maxPitch must be less than or equal to 60");if(da>=this.transform.minPitch)return this.transform.maxPitch=da,this._update(),this.getPitch()>da&&this.setPitch(da),this;throw Error("maxPitch must be greater than the current minPitch");};X.prototype.getMaxPitch=function(){return this.transform.maxPitch};X.prototype.getRenderWorldCopies=function(){return this.transform.renderWorldCopies};
X.prototype.setRenderWorldCopies=function(da){this.transform.renderWorldCopies=da;return this._update()};X.prototype.project=function(da){return this.transform.locationPoint(a.LngLat.convert(da))};X.prototype.unproject=function(da){return this.transform.pointLocation(a.Point.convert(da))};X.prototype.isMoving=function(){return this._moving||this.handlers.isMoving()};X.prototype.isZooming=function(){return this._zooming||this.handlers.isZooming()};X.prototype.isRotating=function(){return this._rotating||
this.handlers.isRotating()};X.prototype._createDelegatedListener=function(da,va,Ca){var Qa=this,lb;if("mouseenter"===da||"mouseover"===da){var Lb=!1;return{layer:va,listener:Ca,delegates:{mousemove:function(dc){var Ic=Qa.getLayer(va)?Qa.queryRenderedFeatures(dc.point,{layers:[va]}):[];Ic.length?Lb||(Lb=!0,Ca.call(Qa,new Pa(da,Qa,dc.originalEvent,{features:Ic}))):Lb=!1},mouseout:function(){Lb=!1}}}}if("mouseleave"===da||"mouseout"===da){var Rb=!1;return{layer:va,listener:Ca,delegates:{mousemove:function(dc){(Qa.getLayer(va)?
Qa.queryRenderedFeatures(dc.point,{layers:[va]}):[]).length?Rb=!0:Rb&&(Rb=!1,Ca.call(Qa,new Pa(da,Qa,dc.originalEvent)))},mouseout:function(dc){Rb&&(Rb=!1,Ca.call(Qa,new Pa(da,Qa,dc.originalEvent)))}}}}return{layer:va,listener:Ca,delegates:(lb={},lb[da]=function(dc){var Ic=Qa.getLayer(va)?Qa.queryRenderedFeatures(dc.point,{layers:[va]}):[];Ic.length&&(dc.features=Ic,Ca.call(Qa,dc),delete dc.features)},lb)}};X.prototype.on=function(da,va,Ca){if(void 0===Ca)return R.prototype.on.call(this,da,va);va=
this._createDelegatedListener(da,va,Ca);this._delegatedListeners=this._delegatedListeners||{};this._delegatedListeners[da]=this._delegatedListeners[da]||[];this._delegatedListeners[da].push(va);for(var Qa in va.delegates)this.on(Qa,va.delegates[Qa]);return this};X.prototype.once=function(da,va,Ca){if(void 0===Ca)return R.prototype.once.call(this,da,va);da=this._createDelegatedListener(da,va,Ca);for(var Qa in da.delegates)this.once(Qa,da.delegates[Qa]);return this};X.prototype.off=function(da,va,Ca){if(void 0===
Ca)return R.prototype.off.call(this,da,va);if(this._delegatedListeners&&this._delegatedListeners[da])a:{da=this._delegatedListeners[da];for(var Qa=0;Qa<da.length;Qa++){var lb=da[Qa];if(lb.layer===va&&lb.listener===Ca){for(var Lb in lb.delegates)this.off(Lb,lb.delegates[Lb]);da.splice(Qa,1);break a}}}return this};X.prototype.queryRenderedFeatures=function(da,va){if(!this.style)return[];void 0!==va||void 0===da||da instanceof a.Point||Array.isArray(da)||(va=da,da=void 0);va=va||{};da=da||[[0,0],[this.transform.width,
this.transform.height]];if(da instanceof a.Point||"number"===typeof da[0])var Ca=[a.Point.convert(da)];else Ca=a.Point.convert(da[0]),da=a.Point.convert(da[1]),Ca=[Ca,new a.Point(da.x,Ca.y),da,new a.Point(Ca.x,da.y),Ca];return this.style.queryRenderedFeatures(Ca,va,this.transform)};X.prototype.querySourceFeatures=function(da,va){return this.style.querySourceFeatures(da,va)};X.prototype.setStyle=function(da,va){va=a.extend({},{localIdeographFontFamily:this._localIdeographFontFamily},va);if(!1!==va.diff&&
va.localIdeographFontFamily===this._localIdeographFontFamily&&this.style&&da)return this._diffStyle(da,va),this;this._localIdeographFontFamily=va.localIdeographFontFamily;return this._updateStyle(da,va)};X.prototype._getUIString=function(da){var va=this._locale[da];if(null==va)throw Error("Missing UI string '"+da+"'");return va};X.prototype._updateStyle=function(da,va){this.style&&(this.style.setEventedParent(null),this.style._remove());if(da)this.style=new Yg(this,va||{});else return delete this.style,
this;this.style.setEventedParent(this,{style:this.style});"string"===typeof da?this.style.loadURL(da):this.style.loadJSON(da);return this};X.prototype._lazyInitEmptyStyle=function(){this.style||(this.style=new Yg(this,{}),this.style.setEventedParent(this,{style:this.style}),this.style.loadEmpty())};X.prototype._diffStyle=function(da,va){var Ca=this;"string"===typeof da?(da=this._requestManager.normalizeStyleURL(da),da=this._requestManager.transformRequest(da,a.ResourceType.Style),a.getJSON(da,function(Qa,
lb){Qa?Ca.fire(new a.ErrorEvent(Qa)):lb&&Ca._updateDiff(lb,va)})):"object"===typeof da&&this._updateDiff(da,va)};X.prototype._updateDiff=function(da,va){try{this.style.setState(da)&&this._update(!0)}catch(Ca){a.warnOnce("Unable to perform style diff: "+(Ca.message||Ca.error||Ca)+".  Rebuilding the style from scratch."),this._updateStyle(da,va)}};X.prototype.getStyle=function(){if(this.style)return this.style.serialize()};X.prototype.isStyleLoaded=function(){return this.style?this.style.loaded():a.warnOnce("There is no style added to the map.")};
X.prototype.addSource=function(da,va){this._lazyInitEmptyStyle();this.style.addSource(da,va);return this._update(!0)};X.prototype.isSourceLoaded=function(da){var va=this.style&&this.style.sourceCaches[da];if(void 0===va)this.fire(new a.ErrorEvent(Error("There is no source with ID '"+da+"'")));else return va.loaded()};X.prototype.areTilesLoaded=function(){var da=this.style&&this.style.sourceCaches,va;for(va in da){var Ca=da[va]._tiles,Qa;for(Qa in Ca){var lb=Ca[Qa];if("loaded"!==lb.state&&"errored"!==
lb.state)return!1}}return!0};X.prototype.addSourceType=function(da,va,Ca){this._lazyInitEmptyStyle();return this.style.addSourceType(da,va,Ca)};X.prototype.removeSource=function(da){this.style.removeSource(da);return this._update(!0)};X.prototype.getSource=function(da){return this.style.getSource(da)};X.prototype.addImage=function(da,va,Ca){void 0===Ca&&(Ca={});var Qa=Ca.pixelRatio;void 0===Qa&&(Qa=1);var lb=Ca.sdf;void 0===lb&&(lb=!1);var Lb=Ca.stretchX,Rb=Ca.stretchY;Ca=Ca.content;this._lazyInitEmptyStyle();
if(va instanceof Ch||Ih&&va instanceof Ih)va=a.browser.getImageData(va),this.style.addImage(da,{data:new a.RGBAImage({width:va.width,height:va.height},va.data),pixelRatio:Qa,stretchX:Lb,stretchY:Rb,content:Ca,sdf:lb,version:0});else{if(void 0===va.width||void 0===va.height)return this.fire(new a.ErrorEvent(Error("Invalid arguments to map.addImage(). The second argument must be an `HTMLImageElement`, `ImageData`, `ImageBitmap`, or object with `width`, `height`, and `data` properties with the same format as `ImageData`")));
this.style.addImage(da,{data:new a.RGBAImage({width:va.width,height:va.height},new Uint8Array(va.data)),pixelRatio:Qa,stretchX:Lb,stretchY:Rb,content:Ca,sdf:lb,version:0,userImage:va});if(va.onAdd)va.onAdd(this,da)}};X.prototype.updateImage=function(da,va){var Ca=this.style.getImage(da);if(!Ca)return this.fire(new a.ErrorEvent(Error("The map has no image with that id. If you are adding a new image use `map.addImage(...)` instead.")));var Qa=va instanceof Ch||Ih&&va instanceof Ih?a.browser.getImageData(va):
va,lb=Qa.width,Lb=Qa.height;Qa=Qa.data;if(void 0===lb||void 0===Lb)return this.fire(new a.ErrorEvent(Error("Invalid arguments to map.updateImage(). The second argument must be an `HTMLImageElement`, `ImageData`, `ImageBitmap`, or object with `width`, `height`, and `data` properties with the same format as `ImageData`")));if(lb!==Ca.data.width||Lb!==Ca.data.height)return this.fire(new a.ErrorEvent(Error("The width and height of the updated image must be that same as the previous version of the image")));
Ca.data.replace(Qa,!(va instanceof Ch||Ih&&va instanceof Ih));this.style.updateImage(da,Ca)};X.prototype.hasImage=function(da){return da?!!this.style.getImage(da):(this.fire(new a.ErrorEvent(Error("Missing required image id"))),!1)};X.prototype.removeImage=function(da){this.style.removeImage(da)};X.prototype.loadImage=function(da,va){a.getImage(this._requestManager.transformRequest(da,a.ResourceType.Image),va)};X.prototype.listImages=function(){return this.style.listImages()};X.prototype.addLayer=
function(da,va){this._lazyInitEmptyStyle();this.style.addLayer(da,va);return this._update(!0)};X.prototype.moveLayer=function(da,va){this.style.moveLayer(da,va);return this._update(!0)};X.prototype.removeLayer=function(da){this.style.removeLayer(da);return this._update(!0)};X.prototype.getLayer=function(da){return this.style.getLayer(da)};X.prototype.setLayerZoomRange=function(da,va,Ca){this.style.setLayerZoomRange(da,va,Ca);return this._update(!0)};X.prototype.setFilter=function(da,va,Ca){void 0===
Ca&&(Ca={});this.style.setFilter(da,va,Ca);return this._update(!0)};X.prototype.getFilter=function(da){return this.style.getFilter(da)};X.prototype.setPaintProperty=function(da,va,Ca,Qa){void 0===Qa&&(Qa={});this.style.setPaintProperty(da,va,Ca,Qa);return this._update(!0)};X.prototype.getPaintProperty=function(da,va){return this.style.getPaintProperty(da,va)};X.prototype.setLayoutProperty=function(da,va,Ca,Qa){void 0===Qa&&(Qa={});this.style.setLayoutProperty(da,va,Ca,Qa);return this._update(!0)};
X.prototype.getLayoutProperty=function(da,va){return this.style.getLayoutProperty(da,va)};X.prototype.setLight=function(da,va){void 0===va&&(va={});this._lazyInitEmptyStyle();this.style.setLight(da,va);return this._update(!0)};X.prototype.getLight=function(){return this.style.getLight()};X.prototype.setFeatureState=function(da,va){this.style.setFeatureState(da,va);return this._update()};X.prototype.removeFeatureState=function(da,va){this.style.removeFeatureState(da,va);return this._update()};X.prototype.getFeatureState=
function(da){return this.style.getFeatureState(da)};X.prototype.getContainer=function(){return this._container};X.prototype.getCanvasContainer=function(){return this._canvasContainer};X.prototype.getCanvas=function(){return this._canvas};X.prototype._containerDimensions=function(){var da=0,va=0;this._container&&(da=this._container.clientWidth||400,va=this._container.clientHeight||300);return[da,va]};X.prototype._detectMissingCSS=function(){"rgb(250, 128, 114)"!==a.window.getComputedStyle(this._missingCSSCanary).getPropertyValue("background-color")&&
a.warnOnce("This page appears to be missing CSS declarations for Mapbox GL JS, which may cause the map to display incorrectly. Please ensure your page includes mapbox-gl.css, as described in https://www.mapbox.com/mapbox-gl-js/api/.")};X.prototype._setupContainer=function(){var da=this._container;da.classList.add("mapboxgl-map");(this._missingCSSCanary=ab.create("div","mapboxgl-canary",da)).style.visibility="hidden";this._detectMissingCSS();var va=this._canvasContainer=ab.create("div","mapboxgl-canvas-container",
da);this._interactive&&va.classList.add("mapboxgl-interactive");this._canvas=ab.create("canvas","mapboxgl-canvas",va);this._canvas.addEventListener("webglcontextlost",this._contextLost,!1);this._canvas.addEventListener("webglcontextrestored",this._contextRestored,!1);this._canvas.setAttribute("tabindex","0");this._canvas.setAttribute("aria-label","Map");va=this._containerDimensions();this._resizeCanvas(va[0],va[1]);var Ca=this._controlContainer=ab.create("div","mapboxgl-control-container",da),Qa=
this._controlPositions={};["top-left","top-right","bottom-left","bottom-right"].forEach(function(lb){Qa[lb]=ab.create("div","mapboxgl-ctrl-"+lb,Ca)})};X.prototype._resizeCanvas=function(da,va){var Ca=a.browser.devicePixelRatio||1;this._canvas.width=Ca*da;this._canvas.height=Ca*va;this._canvas.style.width=da+"px";this._canvas.style.height=va+"px"};X.prototype._setupPainter=function(){var da=a.extend({},$a.webGLContextAttributes,{failIfMajorPerformanceCaveat:this._failIfMajorPerformanceCaveat,preserveDrawingBuffer:this._preserveDrawingBuffer,
antialias:this._antialias||!1});(da=this._canvas.getContext("webgl",da)||this._canvas.getContext("experimental-webgl",da))?(this.painter=new Af(da,this.transform),a.webpSupported.testSupport(da)):this.fire(new a.ErrorEvent(Error("Failed to initialize WebGL")))};X.prototype._contextLost=function(da){da.preventDefault();this._frame&&(this._frame.cancel(),this._frame=null);this.fire(new a.Event("webglcontextlost",{originalEvent:da}))};X.prototype._contextRestored=function(da){this._setupPainter();this.resize();
this._update();this.fire(new a.Event("webglcontextrestored",{originalEvent:da}))};X.prototype.loaded=function(){return!this._styleDirty&&!this._sourcesDirty&&!!this.style&&this.style.loaded()};X.prototype._update=function(da){if(!this.style)return this;this._styleDirty=this._styleDirty||da;this._sourcesDirty=!0;this.triggerRepaint();return this};X.prototype._requestRenderFrame=function(da){this._update();return this._renderTaskQueue.add(da)};X.prototype._cancelRenderFrame=function(da){this._renderTaskQueue.remove(da)};
X.prototype._render=function(da){var va=this,Ca=0,Qa=this.painter.context.extTimerQuery;if(this.listens("gpu-timing-frame")){var lb=Qa.createQueryEXT();Qa.beginQueryEXT(Qa.TIME_ELAPSED_EXT,lb);Ca=a.browser.now()}this.painter.context.setDirty();this.painter.setBaseState();this._renderTaskQueue.run(da);if(!this._removed){da=!1;if(this.style&&this._styleDirty){this._styleDirty=!1;var Lb=this.transform.zoom,Rb=a.browser.now();this.style.zoomHistory.update(Lb,Rb);Lb=new a.EvaluationParameters(Lb,{now:Rb,
fadeDuration:this._fadeDuration,zoomHistory:this.style.zoomHistory,transition:this.style.getTransition()});Rb=Lb.crossFadingFactor();if(1!==Rb||Rb!==this._crossFadingFactor)da=!0,this._crossFadingFactor=Rb;this.style.update(Lb)}this.style&&this._sourcesDirty&&(this._sourcesDirty=!1,this.style._updateSources(this.transform));this._placementDirty=this.style&&this.style._updatePlacement(this.painter.transform,this.showCollisionBoxes,this._fadeDuration,this._crossSourceCollisions);this.painter.render(this.style,
{showTileBoundaries:this.showTileBoundaries,showOverdrawInspector:this._showOverdrawInspector,rotating:this.isRotating(),zooming:this.isZooming(),moving:this.isMoving(),fadeDuration:this._fadeDuration,showPadding:this.showPadding,gpuTiming:!!this.listens("gpu-timing-layer")});this.fire(new a.Event("render"));this.loaded()&&!this._loaded&&(this._loaded=!0,this.fire(new a.Event("load")));this.style&&(this.style.hasTransitions()||da)&&(this._styleDirty=!0);this.style&&!this._placementDirty&&this.style._releaseSymbolFadeTiles();
if(this.listens("gpu-timing-frame")){var dc=a.browser.now()-Ca;Qa.endQueryEXT(Qa.TIME_ELAPSED_EXT,lb);setTimeout(function(){var Gc=Qa.getQueryObjectEXT(lb,Qa.QUERY_RESULT_EXT)/1E6;Qa.deleteQueryEXT(lb);va.fire(new a.Event("gpu-timing-frame",{cpuTime:dc,gpuTime:Gc}))},50)}if(this.listens("gpu-timing-layer")){var Ic=this.painter.collectGpuTimers();setTimeout(function(){var Gc=va.painter.queryGpuTimers(Ic);va.fire(new a.Event("gpu-timing-layer",{layerTimes:Gc}))},50)}this._sourcesDirty||this._styleDirty||
this._placementDirty||this._repaint?this.triggerRepaint():!this.isMoving()&&this.loaded()&&(this._fullyLoaded||(this._fullyLoaded=!0),this.fire(new a.Event("idle")));return this}};X.prototype.remove=function(){this._hash&&this._hash.remove();for(var da=0,va=this._controls;da<va.length;da+=1)va[da].onRemove(this);this._controls=[];this._frame&&(this._frame.cancel(),this._frame=null);this._renderTaskQueue.clear();this.painter.destroy();this.handlers.destroy();delete this.handlers;this.setStyle(null);
"undefined"!==typeof a.window&&(a.window.removeEventListener("resize",this._onWindowResize,!1),a.window.removeEventListener("online",this._onWindowOnline,!1));(da=this.painter.context.gl.getExtension("WEBGL_lose_context"))&&da.loseContext();zb(this._canvasContainer);zb(this._controlContainer);zb(this._missingCSSCanary);this._container.classList.remove("mapboxgl-map");this._removed=!0;this.fire(new a.Event("remove"))};X.prototype.triggerRepaint=function(){var da=this;this.style&&!this._frame&&(this._frame=
a.browser.frame(function(va){da._frame=null;da._render(va)}))};X.prototype._onWindowOnline=function(){this._update()};X.prototype._onWindowResize=function(da){this._trackResize&&this.resize({originalEvent:da})._update()};U.showTileBoundaries.get=function(){return!!this._showTileBoundaries};U.showTileBoundaries.set=function(da){this._showTileBoundaries!==da&&(this._showTileBoundaries=da,this._update())};U.showPadding.get=function(){return!!this._showPadding};U.showPadding.set=function(da){this._showPadding!==
da&&(this._showPadding=da,this._update())};U.showCollisionBoxes.get=function(){return!!this._showCollisionBoxes};U.showCollisionBoxes.set=function(da){this._showCollisionBoxes!==da&&((this._showCollisionBoxes=da)?this.style._generateCollisionBoxes():this._update())};U.showOverdrawInspector.get=function(){return!!this._showOverdrawInspector};U.showOverdrawInspector.set=function(da){this._showOverdrawInspector!==da&&(this._showOverdrawInspector=da,this._update())};U.repaint.get=function(){return!!this._repaint};
U.repaint.set=function(da){this._repaint!==da&&(this._repaint=da,this.triggerRepaint())};U.vertices.get=function(){return!!this._vertices};U.vertices.set=function(da){this._vertices=da;this._update()};X.prototype._setCacheLimits=function(da,va){a.setCacheLimits(da,va)};U.version.get=function(){return a.version};Object.defineProperties(X.prototype,U);return X}(Ee),Xh={showCompass:!0,showZoom:!0,visualizePitch:!1},Nh=function(R){var X=this;this.options=a.extend({},Xh,R);this._container=ab.create("div",
"mapboxgl-ctrl mapboxgl-ctrl-group");this._container.addEventListener("contextmenu",function(U){return U.preventDefault()});this.options.showZoom&&(a.bindAll(["_setButtonTitle","_updateZoomButtons"],this),this._zoomInButton=this._createButton("mapboxgl-ctrl-zoom-in",function(U){return X._map.zoomIn({},{originalEvent:U})}),ab.create("span","mapboxgl-ctrl-icon",this._zoomInButton).setAttribute("aria-hidden",!0),this._zoomOutButton=this._createButton("mapboxgl-ctrl-zoom-out",function(U){return X._map.zoomOut({},
{originalEvent:U})}),ab.create("span","mapboxgl-ctrl-icon",this._zoomOutButton).setAttribute("aria-hidden",!0));this.options.showCompass&&(a.bindAll(["_rotateCompassArrow"],this),this._compass=this._createButton("mapboxgl-ctrl-compass",function(U){X.options.visualizePitch?X._map.resetNorthPitch({},{originalEvent:U}):X._map.resetNorth({},{originalEvent:U})}),this._compassIcon=ab.create("span","mapboxgl-ctrl-icon",this._compass),this._compassIcon.setAttribute("aria-hidden",!0))};Nh.prototype._updateZoomButtons=
function(){var R=this._map.getZoom();this._zoomInButton.disabled=R===this._map.getMaxZoom();this._zoomOutButton.disabled=R===this._map.getMinZoom()};Nh.prototype._rotateCompassArrow=function(){this._compassIcon.style.transform=this.options.visualizePitch?"scale("+1/Math.pow(Math.cos(Math.PI/180*this._map.transform.pitch),.5)+") rotateX("+this._map.transform.pitch+"deg) rotateZ("+180/Math.PI*this._map.transform.angle+"deg)":"rotate("+180/Math.PI*this._map.transform.angle+"deg)"};Nh.prototype.onAdd=
function(R){this._map=R;this.options.showZoom&&(this._setButtonTitle(this._zoomInButton,"ZoomIn"),this._setButtonTitle(this._zoomOutButton,"ZoomOut"),this._map.on("zoom",this._updateZoomButtons),this._updateZoomButtons());if(this.options.showCompass){this._setButtonTitle(this._compass,"ResetBearing");if(this.options.visualizePitch)this._map.on("pitch",this._rotateCompassArrow);this._map.on("rotate",this._rotateCompassArrow);this._rotateCompassArrow();this._handler=new Xg(this._map,this._compass,this.options.visualizePitch)}return this._container};
Nh.prototype.onRemove=function(){ab.remove(this._container);this.options.showZoom&&this._map.off("zoom",this._updateZoomButtons);this.options.showCompass&&(this.options.visualizePitch&&this._map.off("pitch",this._rotateCompassArrow),this._map.off("rotate",this._rotateCompassArrow),this._handler.off(),delete this._handler);delete this._map};Nh.prototype._createButton=function(R,X){R=ab.create("button",R,this._container);R.type="button";R.addEventListener("click",X);return R};Nh.prototype._setButtonTitle=
function(R,X){X=this._map._getUIString("NavigationControl."+X);R.title=X;R.setAttribute("aria-label",X)};var Xg=function(R,X,U){void 0===U&&(U=!1);this._clickTolerance=10;this.element=X;this.mouseRotate=new Ld({clickTolerance:R.dragRotate._mouseRotate._clickTolerance});this.map=R;U&&(this.mousePitch=new $d({clickTolerance:R.dragRotate._mousePitch._clickTolerance}));a.bindAll("mousedown mousemove mouseup touchstart touchmove touchend reset".split(" "),this);ab.addEventListener(X,"mousedown",this.mousedown);
ab.addEventListener(X,"touchstart",this.touchstart,{passive:!1});ab.addEventListener(X,"touchmove",this.touchmove);ab.addEventListener(X,"touchend",this.touchend);ab.addEventListener(X,"touchcancel",this.reset)};Xg.prototype.down=function(R,X){this.mouseRotate.mousedown(R,X);this.mousePitch&&this.mousePitch.mousedown(R,X);ab.disableDrag()};Xg.prototype.move=function(R,X){var U=this.map,da=this.mouseRotate.mousemoveWindow(R,X);da&&da.bearingDelta&&U.setBearing(U.getBearing()+da.bearingDelta);this.mousePitch&&
(R=this.mousePitch.mousemoveWindow(R,X))&&R.pitchDelta&&U.setPitch(U.getPitch()+R.pitchDelta)};Xg.prototype.off=function(){var R=this.element;ab.removeEventListener(R,"mousedown",this.mousedown);ab.removeEventListener(R,"touchstart",this.touchstart,{passive:!1});ab.removeEventListener(R,"touchmove",this.touchmove);ab.removeEventListener(R,"touchend",this.touchend);ab.removeEventListener(R,"touchcancel",this.reset);this.offTemp()};Xg.prototype.offTemp=function(){ab.enableDrag();ab.removeEventListener(a.window,
"mousemove",this.mousemove);ab.removeEventListener(a.window,"mouseup",this.mouseup)};Xg.prototype.mousedown=function(R){this.down(a.extend({},R,{ctrlKey:!0,preventDefault:function(){return R.preventDefault()}}),ab.mousePos(this.element,R));ab.addEventListener(a.window,"mousemove",this.mousemove);ab.addEventListener(a.window,"mouseup",this.mouseup)};Xg.prototype.mousemove=function(R){this.move(R,ab.mousePos(this.element,R))};Xg.prototype.mouseup=function(R){this.mouseRotate.mouseupWindow(R);this.mousePitch&&
this.mousePitch.mouseupWindow(R);this.offTemp()};Xg.prototype.touchstart=function(R){1!==R.targetTouches.length?this.reset():(this._startPos=this._lastPos=ab.touchPos(this.element,R.targetTouches)[0],this.down({type:"mousedown",button:0,ctrlKey:!0,preventDefault:function(){return R.preventDefault()}},this._startPos))};Xg.prototype.touchmove=function(R){1!==R.targetTouches.length?this.reset():(this._lastPos=ab.touchPos(this.element,R.targetTouches)[0],this.move({preventDefault:function(){return R.preventDefault()}},
this._lastPos))};Xg.prototype.touchend=function(R){0===R.targetTouches.length&&this._startPos&&this._lastPos&&this._startPos.dist(this._lastPos)<this._clickTolerance&&this.element.click();this.reset()};Xg.prototype.reset=function(){this.mouseRotate.reset();this.mousePitch&&this.mousePitch.reset();delete this._startPos;delete this._lastPos;this.offTemp()};var oi={center:"translate(-50%,-50%)",top:"translate(-50%,0)","top-left":"translate(0,0)","top-right":"translate(-100%,0)",bottom:"translate(-50%,-100%)",
"bottom-left":"translate(0,-100%)","bottom-right":"translate(-100%,-100%)",left:"translate(0,-50%)",right:"translate(-100%,-50%)"},Lg=function(R){function X(U,da){var va=this;R.call(this);if(U instanceof a.window.HTMLElement||da)U=a.extend({element:U},da);a.bindAll("_update _onMove _onUp _addDragHandler _onMapClick _onKeyPress".split(" "),this);this._anchor=U&&U.anchor||"center";this._color=U&&U.color||"#3FB1CE";this._draggable=U&&U.draggable||!1;this._state="inactive";this._rotation=U&&U.rotation||
0;this._rotationAlignment=U&&U.rotationAlignment||"auto";this._pitchAlignment=U&&U.pitchAlignment&&"auto"!==U.pitchAlignment?U.pitchAlignment:this._rotationAlignment;if(U&&U.element)this._element=U.element,this._offset=a.Point.convert(U&&U.offset||[0,0]);else{this._defaultMarker=!0;this._element=ab.create("div");this._element.setAttribute("aria-label","Map marker");da=ab.createNS("http://www.w3.org/2000/svg","svg");da.setAttributeNS(null,"display","block");da.setAttributeNS(null,"height","41px");
da.setAttributeNS(null,"width","27px");da.setAttributeNS(null,"viewBox","0 0 27 41");var Ca=ab.createNS("http://www.w3.org/2000/svg","g");Ca.setAttributeNS(null,"stroke","none");Ca.setAttributeNS(null,"stroke-width","1");Ca.setAttributeNS(null,"fill","none");Ca.setAttributeNS(null,"fill-rule","evenodd");Ca=ab.createNS("http://www.w3.org/2000/svg","g");Ca.setAttributeNS(null,"fill-rule","nonzero");var Qa=ab.createNS("http://www.w3.org/2000/svg","g");Qa.setAttributeNS(null,"transform","translate(3.0, 29.0)");
Qa.setAttributeNS(null,"fill","#000000");for(var lb=0,Lb=[{rx:"10.5",ry:"5.25002273"},{rx:"10.5",ry:"5.25002273"},{rx:"9.5",ry:"4.77275007"},{rx:"8.5",ry:"4.29549936"},{rx:"7.5",ry:"3.81822308"},{rx:"6.5",ry:"3.34094679"},{rx:"5.5",ry:"2.86367051"},{rx:"4.5",ry:"2.38636864"}];lb<Lb.length;lb+=1){var Rb=Lb[lb],dc=ab.createNS("http://www.w3.org/2000/svg","ellipse");dc.setAttributeNS(null,"opacity","0.04");dc.setAttributeNS(null,"cx","10.5");dc.setAttributeNS(null,"cy","5.80029008");dc.setAttributeNS(null,
"rx",Rb.rx);dc.setAttributeNS(null,"ry",Rb.ry);Qa.appendChild(dc)}lb=ab.createNS("http://www.w3.org/2000/svg","g");lb.setAttributeNS(null,"fill",this._color);Lb=ab.createNS("http://www.w3.org/2000/svg","path");Lb.setAttributeNS(null,"d","M27,13.5 C27,19.074644 20.250001,27.000002 14.75,34.500002 C14.016665,35.500004 12.983335,35.500004 12.25,34.500002 C6.7499993,27.000002 0,19.222562 0,13.5 C0,6.0441559 6.0441559,0 13.5,0 C20.955844,0 27,6.0441559 27,13.5 Z");lb.appendChild(Lb);Lb=ab.createNS("http://www.w3.org/2000/svg",
"g");Lb.setAttributeNS(null,"opacity","0.25");Lb.setAttributeNS(null,"fill","#000000");Rb=ab.createNS("http://www.w3.org/2000/svg","path");Rb.setAttributeNS(null,"d","M13.5,0 C6.0441559,0 0,6.0441559 0,13.5 C0,19.222562 6.7499993,27 12.25,34.5 C13,35.522727 14.016664,35.500004 14.75,34.5 C20.250001,27 27,19.074644 27,13.5 C27,6.0441559 20.955844,0 13.5,0 Z M13.5,1 C20.415404,1 26,6.584596 26,13.5 C26,15.898657 24.495584,19.181431 22.220703,22.738281 C19.945823,26.295132 16.705119,30.142167 13.943359,33.908203 C13.743445,34.180814 13.612715,34.322738 13.5,34.441406 C13.387285,34.322738 13.256555,34.180814 13.056641,33.908203 C10.284481,30.127985 7.4148684,26.314159 5.015625,22.773438 C2.6163816,19.232715 1,15.953538 1,13.5 C1,6.584596 6.584596,1 13.5,1 Z");
Lb.appendChild(Rb);Rb=ab.createNS("http://www.w3.org/2000/svg","g");Rb.setAttributeNS(null,"transform","translate(6.0, 7.0)");Rb.setAttributeNS(null,"fill","#FFFFFF");dc=ab.createNS("http://www.w3.org/2000/svg","g");dc.setAttributeNS(null,"transform","translate(8.0, 8.0)");var Ic=ab.createNS("http://www.w3.org/2000/svg","circle");Ic.setAttributeNS(null,"fill","#000000");Ic.setAttributeNS(null,"opacity","0.25");Ic.setAttributeNS(null,"cx","5.5");Ic.setAttributeNS(null,"cy","5.5");Ic.setAttributeNS(null,
"r","5.4999962");var Gc=ab.createNS("http://www.w3.org/2000/svg","circle");Gc.setAttributeNS(null,"fill","#FFFFFF");Gc.setAttributeNS(null,"cx","5.5");Gc.setAttributeNS(null,"cy","5.5");Gc.setAttributeNS(null,"r","5.4999962");dc.appendChild(Ic);dc.appendChild(Gc);Ca.appendChild(Qa);Ca.appendChild(lb);Ca.appendChild(Lb);Ca.appendChild(Rb);Ca.appendChild(dc);da.appendChild(Ca);this._element.appendChild(da);this._offset=a.Point.convert(U&&U.offset||[0,-14])}this._element.classList.add("mapboxgl-marker");
this._element.addEventListener("dragstart",function(Xc){Xc.preventDefault()});this._element.addEventListener("mousedown",function(Xc){Xc.preventDefault()});this._element.addEventListener("focus",function(){var Xc=va._map.getContainer();Xc.scrollTop=0;Xc.scrollLeft=0});Ka(this._element,this._anchor,"marker");this._popup=null}R&&(X.__proto__=R);X.prototype=Object.create(R&&R.prototype);X.prototype.constructor=X;X.prototype.addTo=function(U){this.remove();this._map=U;U.getCanvasContainer().appendChild(this._element);
U.on("move",this._update);U.on("moveend",this._update);this.setDraggable(this._draggable);this._update();this._map.on("click",this._onMapClick);return this};X.prototype.remove=function(){this._map&&(this._map.off("click",this._onMapClick),this._map.off("move",this._update),this._map.off("moveend",this._update),this._map.off("mousedown",this._addDragHandler),this._map.off("touchstart",this._addDragHandler),this._map.off("mouseup",this._onUp),this._map.off("touchend",this._onUp),this._map.off("mousemove",
this._onMove),this._map.off("touchmove",this._onMove),delete this._map);ab.remove(this._element);this._popup&&this._popup.remove();return this};X.prototype.getLngLat=function(){return this._lngLat};X.prototype.setLngLat=function(U){this._lngLat=a.LngLat.convert(U);this._pos=null;this._popup&&this._popup.setLngLat(this._lngLat);this._update();return this};X.prototype.getElement=function(){return this._element};X.prototype.setPopup=function(U){this._popup&&(this._popup.remove(),this._popup=null,this._element.removeEventListener("keypress",
this._onKeyPress),this._originalTabIndex||this._element.removeAttribute("tabindex"));if(U){if(!("offset"in U.options)){var da=Math.sqrt(Math.pow(13.5,2)/2);U.options.offset=this._defaultMarker?{top:[0,0],"top-left":[0,0],"top-right":[0,0],bottom:[0,-38.1],"bottom-left":[da,-1*(24.6+da)],"bottom-right":[-da,-1*(24.6+da)],left:[13.5,-24.6],right:[-13.5,-24.6]}:this._offset}this._popup=U;this._lngLat&&this._popup.setLngLat(this._lngLat);(this._originalTabIndex=this._element.getAttribute("tabindex"))||
this._element.setAttribute("tabindex","0");this._element.addEventListener("keypress",this._onKeyPress)}return this};X.prototype._onKeyPress=function(U){var da=U.code;U=U.charCode||U.keyCode;"Space"!==da&&"Enter"!==da&&32!==U&&13!==U||this.togglePopup()};X.prototype._onMapClick=function(U){U=U.originalEvent.target;var da=this._element;this._popup&&(U===da||da.contains(U))&&this.togglePopup()};X.prototype.getPopup=function(){return this._popup};X.prototype.togglePopup=function(){var U=this._popup;U&&
(U.isOpen()?U.remove():U.addTo(this._map));return this};X.prototype._update=function(U){if(this._map){this._map.transform.renderWorldCopies&&(this._lngLat=La(this._lngLat,this._pos,this._map.transform));this._pos=this._map.project(this._lngLat)._add(this._offset);var da="";"viewport"===this._rotationAlignment||"auto"===this._rotationAlignment?da="rotateZ("+this._rotation+"deg)":"map"===this._rotationAlignment&&(da="rotateZ("+(this._rotation-this._map.getBearing())+"deg)");var va="";"viewport"===this._pitchAlignment||
"auto"===this._pitchAlignment?va="rotateX(0deg)":"map"===this._pitchAlignment&&(va="rotateX("+this._map.getPitch()+"deg)");U&&"moveend"!==U.type||(this._pos=this._pos.round());ab.setTransform(this._element,oi[this._anchor]+" translate("+this._pos.x+"px, "+this._pos.y+"px) "+va+" "+da)}};X.prototype.getOffset=function(){return this._offset};X.prototype.setOffset=function(U){this._offset=a.Point.convert(U);this._update();return this};X.prototype._onMove=function(U){this._pos=U.point.sub(this._positionDelta);
this._lngLat=this._map.unproject(this._pos);this.setLngLat(this._lngLat);this._element.style.pointerEvents="none";"pending"===this._state&&(this._state="active",this.fire(new a.Event("dragstart")));this.fire(new a.Event("drag"))};X.prototype._onUp=function(){this._element.style.pointerEvents="auto";this._positionDelta=null;this._map.off("mousemove",this._onMove);this._map.off("touchmove",this._onMove);"active"===this._state&&this.fire(new a.Event("dragend"));this._state="inactive"};X.prototype._addDragHandler=
function(U){this._element.contains(U.originalEvent.target)&&(U.preventDefault(),this._positionDelta=U.point.sub(this._pos).add(this._offset),this._state="pending",this._map.on("mousemove",this._onMove),this._map.on("touchmove",this._onMove),this._map.once("mouseup",this._onUp),this._map.once("touchend",this._onUp))};X.prototype.setDraggable=function(U){this._draggable=!!U;this._map&&(U?(this._map.on("mousedown",this._addDragHandler),this._map.on("touchstart",this._addDragHandler)):(this._map.off("mousedown",
this._addDragHandler),this._map.off("touchstart",this._addDragHandler)));return this};X.prototype.isDraggable=function(){return this._draggable};X.prototype.setRotation=function(U){this._rotation=U||0;this._update();return this};X.prototype.getRotation=function(){return this._rotation};X.prototype.setRotationAlignment=function(U){this._rotationAlignment=U||"auto";this._update();return this};X.prototype.getRotationAlignment=function(){return this._rotationAlignment};X.prototype.setPitchAlignment=function(U){this._pitchAlignment=
U&&"auto"!==U?U:this._rotationAlignment;this._update();return this};X.prototype.getPitchAlignment=function(){return this._pitchAlignment};return X}(a.Evented),Rh={positionOptions:{enableHighAccuracy:!1,maximumAge:0,timeout:6E3},fitBoundsOptions:{maxZoom:15},trackUserLocation:!1,showAccuracyCircle:!0,showUserLocation:!0},ai,ph=0,Dh=!1,Jh=function(R){function X(U){R.call(this);this.options=a.extend({},Rh,U);a.bindAll("_onSuccess _onError _onZoom _finish _setupUI _updateCamera _updateMarker".split(" "),
this)}R&&(X.__proto__=R);X.prototype=Object.create(R&&R.prototype);X.prototype.constructor=X;X.prototype.onAdd=function(U){this._map=U;this._container=ab.create("div","mapboxgl-ctrl mapboxgl-ctrl-group");ya(this._setupUI);return this._container};X.prototype.onRemove=function(){void 0!==this._geolocationWatchID&&(a.window.navigator.geolocation.clearWatch(this._geolocationWatchID),this._geolocationWatchID=void 0);this.options.showUserLocation&&this._userLocationDotMarker&&this._userLocationDotMarker.remove();
this.options.showAccuracyCircle&&this._accuracyCircleMarker&&this._accuracyCircleMarker.remove();ab.remove(this._container);this._map.off("zoom",this._onZoom);this._map=void 0;ph=0;Dh=!1};X.prototype._isOutOfMapMaxBounds=function(U){var da=this._map.getMaxBounds();U=U.coords;return da&&(U.longitude<da.getWest()||U.longitude>da.getEast()||U.latitude<da.getSouth()||U.latitude>da.getNorth())};X.prototype._setErrorState=function(){switch(this._watchState){case "WAITING_ACTIVE":this._watchState="ACTIVE_ERROR";
this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-active");this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-active-error");break;case "ACTIVE_LOCK":this._watchState="ACTIVE_ERROR";this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-active");this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-active-error");this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-waiting");break;case "BACKGROUND":this._watchState="BACKGROUND_ERROR",this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-background"),
this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-background-error"),this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-waiting")}};X.prototype._onSuccess=function(U){if(this._map){if(this._isOutOfMapMaxBounds(U))this._setErrorState(),this.fire(new a.Event("outofmaxbounds",U)),this._updateMarker();else{if(this.options.trackUserLocation)switch(this._lastKnownPosition=U,this._watchState){case "WAITING_ACTIVE":case "ACTIVE_LOCK":case "ACTIVE_ERROR":this._watchState="ACTIVE_LOCK";
this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-waiting");this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-active-error");this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-active");break;case "BACKGROUND":case "BACKGROUND_ERROR":this._watchState="BACKGROUND",this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-waiting"),this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-background-error"),this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-background")}this.options.showUserLocation&&
"OFF"!==this._watchState&&this._updateMarker(U);this.options.trackUserLocation&&"ACTIVE_LOCK"!==this._watchState||this._updateCamera(U);this.options.showUserLocation&&this._dotElement.classList.remove("mapboxgl-user-location-dot-stale");this.fire(new a.Event("geolocate",U))}this._finish()}};X.prototype._updateCamera=function(U){var da=new a.LngLat(U.coords.longitude,U.coords.latitude);U=U.coords.accuracy;var va=this._map.getBearing();va=a.extend({bearing:va},this.options.fitBoundsOptions);this._map.fitBounds(da.toBounds(U),
va,{geolocateSource:!0})};X.prototype._updateMarker=function(U){if(U){var da=new a.LngLat(U.coords.longitude,U.coords.latitude);this._accuracyCircleMarker.setLngLat(da).addTo(this._map);this._userLocationDotMarker.setLngLat(da).addTo(this._map);this._accuracy=U.coords.accuracy;this.options.showUserLocation&&this.options.showAccuracyCircle&&this._updateCircleRadius()}else this._userLocationDotMarker.remove(),this._accuracyCircleMarker.remove()};X.prototype._updateCircleRadius=function(){var U=this._map._container.clientHeight/
2,da=this._map.unproject([0,U]);U=this._map.unproject([1,U]);da=da.distanceTo(U);da=Math.ceil(2*this._accuracy/da);this._circleElement.style.width=da+"px";this._circleElement.style.height=da+"px"};X.prototype._onZoom=function(){this.options.showUserLocation&&this.options.showAccuracyCircle&&this._updateCircleRadius()};X.prototype._onError=function(U){if(this._map){if(this.options.trackUserLocation)if(1===U.code){this._watchState="OFF";this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-waiting");
this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-active");this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-active-error");this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-background");this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-background-error");this._geolocateButton.disabled=!0;var da=this._map._getUIString("GeolocateControl.LocationNotAvailable");this._geolocateButton.title=da;this._geolocateButton.setAttribute("aria-label",da);void 0!==
this._geolocationWatchID&&this._clearWatch()}else{if(3===U.code&&Dh)return;this._setErrorState()}"OFF"!==this._watchState&&this.options.showUserLocation&&this._dotElement.classList.add("mapboxgl-user-location-dot-stale");this.fire(new a.Event("error",U));this._finish()}};X.prototype._finish=function(){this._timeoutId&&clearTimeout(this._timeoutId);this._timeoutId=void 0};X.prototype._setupUI=function(U){var da=this;this._container.addEventListener("contextmenu",function(va){return va.preventDefault()});
this._geolocateButton=ab.create("button","mapboxgl-ctrl-geolocate",this._container);ab.create("span","mapboxgl-ctrl-icon",this._geolocateButton).setAttribute("aria-hidden",!0);this._geolocateButton.type="button";!1===U?(a.warnOnce("Geolocation support is not available so the GeolocateControl will be disabled."),U=this._map._getUIString("GeolocateControl.LocationNotAvailable"),this._geolocateButton.disabled=!0,this._geolocateButton.title=U,this._geolocateButton.setAttribute("aria-label",U)):(U=this._map._getUIString("GeolocateControl.FindMyLocation"),
this._geolocateButton.title=U,this._geolocateButton.setAttribute("aria-label",U));this.options.trackUserLocation&&(this._geolocateButton.setAttribute("aria-pressed","false"),this._watchState="OFF");this.options.showUserLocation&&(this._dotElement=ab.create("div","mapboxgl-user-location-dot"),this._userLocationDotMarker=new Lg(this._dotElement),this._circleElement=ab.create("div","mapboxgl-user-location-accuracy-circle"),this._accuracyCircleMarker=new Lg({element:this._circleElement,pitchAlignment:"map"}),
this.options.trackUserLocation&&(this._watchState="OFF"),this._map.on("zoom",this._onZoom));this._geolocateButton.addEventListener("click",this.trigger.bind(this));this._setup=!0;if(this.options.trackUserLocation)this._map.on("movestart",function(va){var Ca=va.originalEvent&&"resize"===va.originalEvent.type;va.geolocateSource||"ACTIVE_LOCK"!==da._watchState||Ca||(da._watchState="BACKGROUND",da._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-background"),da._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-active"),
da.fire(new a.Event("trackuserlocationend")))})};X.prototype.trigger=function(){if(!this._setup)return a.warnOnce("Geolocate control triggered before added to a map"),!1;if(this.options.trackUserLocation){switch(this._watchState){case "OFF":this._watchState="WAITING_ACTIVE";this.fire(new a.Event("trackuserlocationstart"));break;case "WAITING_ACTIVE":case "ACTIVE_LOCK":case "ACTIVE_ERROR":case "BACKGROUND_ERROR":ph--;Dh=!1;this._watchState="OFF";this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-waiting");
this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-active");this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-active-error");this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-background");this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-background-error");this.fire(new a.Event("trackuserlocationend"));break;case "BACKGROUND":this._watchState="ACTIVE_LOCK",this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-background"),this._lastKnownPosition&&
this._updateCamera(this._lastKnownPosition),this.fire(new a.Event("trackuserlocationstart"))}switch(this._watchState){case "WAITING_ACTIVE":this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-waiting");this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-active");break;case "ACTIVE_LOCK":this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-active");break;case "ACTIVE_ERROR":this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-waiting");this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-active-error");
break;case "BACKGROUND":this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-background");break;case "BACKGROUND_ERROR":this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-waiting"),this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-background-error")}if("OFF"===this._watchState&&void 0!==this._geolocationWatchID)this._clearWatch();else if(void 0===this._geolocationWatchID){this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-waiting");this._geolocateButton.setAttribute("aria-pressed",
"true");ph++;if(1<ph){var U={maximumAge:6E5,timeout:0};Dh=!0}else U=this.options.positionOptions,Dh=!1;this._geolocationWatchID=a.window.navigator.geolocation.watchPosition(this._onSuccess,this._onError,U)}}else a.window.navigator.geolocation.getCurrentPosition(this._onSuccess,this._onError,this.options.positionOptions),this._timeoutId=setTimeout(this._finish,1E4);return!0};X.prototype._clearWatch=function(){a.window.navigator.geolocation.clearWatch(this._geolocationWatchID);this._geolocationWatchID=
void 0;this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-waiting");this._geolocateButton.setAttribute("aria-pressed","false");this.options.showUserLocation&&this._updateMarker(null)};return X}(a.Evented),Sh={maxWidth:100,unit:"metric"},af=function(R){this.options=a.extend({},Sh,R);a.bindAll(["_onMove","setUnit"],this)};af.prototype.getDefaultPosition=function(){return"bottom-left"};af.prototype._onMove=function(){Aa(this._map,this._container,this.options)};af.prototype.onAdd=function(R){this._map=
R;this._container=ab.create("div","mapboxgl-ctrl mapboxgl-ctrl-scale",R.getContainer());this._map.on("move",this._onMove);this._onMove();return this._container};af.prototype.onRemove=function(){ab.remove(this._container);this._map.off("move",this._onMove);this._map=void 0};af.prototype.setUnit=function(R){this.options.unit=R;Aa(this._map,this._container,this.options)};var qh=function(R){this._fullscreen=!1;R&&R.container&&(R.container instanceof a.window.HTMLElement?this._container=R.container:a.warnOnce("Full screen control 'container' must be a DOM element."));
a.bindAll(["_onClickFullscreen","_changeIcon"],this);"onfullscreenchange"in a.window.document?this._fullscreenchange="fullscreenchange":"onmozfullscreenchange"in a.window.document?this._fullscreenchange="mozfullscreenchange":"onwebkitfullscreenchange"in a.window.document?this._fullscreenchange="webkitfullscreenchange":"onmsfullscreenchange"in a.window.document&&(this._fullscreenchange="MSFullscreenChange")};qh.prototype.onAdd=function(R){this._map=R;this._container||(this._container=this._map.getContainer());
this._controlContainer=ab.create("div","mapboxgl-ctrl mapboxgl-ctrl-group");this._checkFullscreenSupport()?this._setupUI():(this._controlContainer.style.display="none",a.warnOnce("This device does not support fullscreen mode."));return this._controlContainer};qh.prototype.onRemove=function(){ab.remove(this._controlContainer);this._map=null;a.window.document.removeEventListener(this._fullscreenchange,this._changeIcon)};qh.prototype._checkFullscreenSupport=function(){return!!(a.window.document.fullscreenEnabled||
a.window.document.mozFullScreenEnabled||a.window.document.msFullscreenEnabled||a.window.document.webkitFullscreenEnabled)};qh.prototype._setupUI=function(){var R=this._fullscreenButton=ab.create("button","mapboxgl-ctrl-fullscreen",this._controlContainer);ab.create("span","mapboxgl-ctrl-icon",R).setAttribute("aria-hidden",!0);R.type="button";this._updateTitle();this._fullscreenButton.addEventListener("click",this._onClickFullscreen);a.window.document.addEventListener(this._fullscreenchange,this._changeIcon)};
qh.prototype._updateTitle=function(){var R=this._getTitle();this._fullscreenButton.setAttribute("aria-label",R);this._fullscreenButton.title=R};qh.prototype._getTitle=function(){return this._map._getUIString(this._isFullscreen()?"FullscreenControl.Exit":"FullscreenControl.Enter")};qh.prototype._isFullscreen=function(){return this._fullscreen};qh.prototype._changeIcon=function(){(a.window.document.fullscreenElement||a.window.document.mozFullScreenElement||a.window.document.webkitFullscreenElement||
a.window.document.msFullscreenElement)===this._container!==this._fullscreen&&(this._fullscreen=!this._fullscreen,this._fullscreenButton.classList.toggle("mapboxgl-ctrl-shrink"),this._fullscreenButton.classList.toggle("mapboxgl-ctrl-fullscreen"),this._updateTitle())};qh.prototype._onClickFullscreen=function(){this._isFullscreen()?a.window.document.exitFullscreen?a.window.document.exitFullscreen():a.window.document.mozCancelFullScreen?a.window.document.mozCancelFullScreen():a.window.document.msExitFullscreen?
a.window.document.msExitFullscreen():a.window.document.webkitCancelFullScreen&&a.window.document.webkitCancelFullScreen():this._container.requestFullscreen?this._container.requestFullscreen():this._container.mozRequestFullScreen?this._container.mozRequestFullScreen():this._container.msRequestFullscreen?this._container.msRequestFullscreen():this._container.webkitRequestFullscreen&&this._container.webkitRequestFullscreen()};var Ti={closeButton:!0,closeOnClick:!0,className:"",maxWidth:"240px"},xi=function(R){function X(U){R.call(this);
this.options=a.extend(Object.create(Ti),U);a.bindAll("_update _onClose remove _onMouseMove _onMouseUp _onDrag".split(" "),this)}R&&(X.__proto__=R);X.prototype=Object.create(R&&R.prototype);X.prototype.constructor=X;X.prototype.addTo=function(U){this._map&&this.remove();this._map=U;if(this.options.closeOnClick)this._map.on("click",this._onClose);if(this.options.closeOnMove)this._map.on("move",this._onClose);this._map.on("remove",this.remove);this._update();if(this._trackPointer)this._map.on("mousemove",
this._onMouseMove),this._map.on("mouseup",this._onMouseUp),this._container&&this._container.classList.add("mapboxgl-popup-track-pointer"),this._map._canvasContainer.classList.add("mapboxgl-track-pointer");else this._map.on("move",this._update);this.fire(new a.Event("open"));return this};X.prototype.isOpen=function(){return!!this._map};X.prototype.remove=function(){this._content&&ab.remove(this._content);this._container&&(ab.remove(this._container),delete this._container);this._map&&(this._map.off("move",
this._update),this._map.off("move",this._onClose),this._map.off("click",this._onClose),this._map.off("remove",this.remove),this._map.off("mousemove",this._onMouseMove),this._map.off("mouseup",this._onMouseUp),this._map.off("drag",this._onDrag),delete this._map);this.fire(new a.Event("close"));return this};X.prototype.getLngLat=function(){return this._lngLat};X.prototype.setLngLat=function(U){this._lngLat=a.LngLat.convert(U);this._pos=null;this._trackPointer=!1;this._update();this._map&&(this._map.on("move",
this._update),this._map.off("mousemove",this._onMouseMove),this._container&&this._container.classList.remove("mapboxgl-popup-track-pointer"),this._map._canvasContainer.classList.remove("mapboxgl-track-pointer"));return this};X.prototype.trackPointer=function(){this._trackPointer=!0;this._pos=null;this._update();this._map&&(this._map.off("move",this._update),this._map.on("mousemove",this._onMouseMove),this._map.on("drag",this._onDrag),this._container&&this._container.classList.add("mapboxgl-popup-track-pointer"),
this._map._canvasContainer.classList.add("mapboxgl-track-pointer"));return this};X.prototype.getElement=function(){return this._container};X.prototype.setText=function(U){return this.setDOMContent(a.window.document.createTextNode(U))};X.prototype.setHTML=function(U){var da=a.window.document.createDocumentFragment(),va=a.window.document.createElement("body");for(va.innerHTML=U;;){U=va.firstChild;if(!U)break;da.appendChild(U)}return this.setDOMContent(da)};X.prototype.getMaxWidth=function(){return this._container&&
this._container.style.maxWidth};X.prototype.setMaxWidth=function(U){this.options.maxWidth=U;this._update();return this};X.prototype.setDOMContent=function(U){this._createContent();this._content.appendChild(U);this._update();return this};X.prototype.addClassName=function(U){this._container&&this._container.classList.add(U)};X.prototype.removeClassName=function(U){this._container&&this._container.classList.remove(U)};X.prototype.toggleClassName=function(U){if(this._container)return this._container.classList.toggle(U)};
X.prototype._createContent=function(){this._content&&ab.remove(this._content);this._content=ab.create("div","mapboxgl-popup-content",this._container);this.options.closeButton&&(this._closeButton=ab.create("button","mapboxgl-popup-close-button",this._content),this._closeButton.type="button",this._closeButton.setAttribute("aria-label","Close popup"),this._closeButton.innerHTML="\x26#215;",this._closeButton.addEventListener("click",this._onClose))};X.prototype._onMouseUp=function(U){this._update(U.point)};
X.prototype._onMouseMove=function(U){this._update(U.point)};X.prototype._onDrag=function(U){this._update(U.point)};X.prototype._update=function(U){var da=this,va=this._lngLat||this._trackPointer;if(this._map&&va&&this._content&&(this._container||(this._container=ab.create("div","mapboxgl-popup",this._map.getContainer()),this._tip=ab.create("div","mapboxgl-popup-tip",this._container),this._container.appendChild(this._content),this.options.className&&this.options.className.split(" ").forEach(function(lb){return da._container.classList.add(lb)}),
this._trackPointer&&this._container.classList.add("mapboxgl-popup-track-pointer")),this.options.maxWidth&&this._container.style.maxWidth!==this.options.maxWidth&&(this._container.style.maxWidth=this.options.maxWidth),this._map.transform.renderWorldCopies&&!this._trackPointer&&(this._lngLat=La(this._lngLat,this._pos,this._map.transform)),!this._trackPointer||U)){U=this._pos=this._trackPointer&&U?U:this._map.project(this._lngLat);var Ca=this.options.anchor;va=Ta(this.options.offset);if(!Ca){Ca=this._container.offsetWidth;
var Qa=this._container.offsetHeight;Qa=U.y+va.bottom.y<Qa?["top"]:U.y>this._map.transform.height-Qa?["bottom"]:[];U.x<Ca/2?Qa.push("left"):U.x>this._map.transform.width-Ca/2&&Qa.push("right");Ca=0===Qa.length?"bottom":Qa.join("-")}U=U.add(va[Ca]).round();ab.setTransform(this._container,oi[Ca]+" translate("+U.x+"px,"+U.y+"px)");Ka(this._container,Ca,"popup")}};X.prototype._onClose=function(){this.remove()};return X}(a.Evented),gi={version:a.version,supported:$a,setRTLTextPlugin:a.setRTLTextPlugin,
getRTLTextPluginStatus:a.getRTLTextPluginStatus,Map:ij,NavigationControl:Nh,GeolocateControl:Jh,AttributionControl:eg,ScaleControl:af,FullscreenControl:qh,Popup:xi,Marker:Lg,Style:Yg,LngLat:a.LngLat,LngLatBounds:a.LngLatBounds,Point:a.Point,MercatorCoordinate:a.MercatorCoordinate,Evented:a.Evented,config:a.config,prewarm:function(){v().acquire("mapboxgl_preloaded_worker_pool")},clearPrewarmedResources:function(){var R=pe;R&&(R.isPreloaded()&&1===R.numActive()?(R.release("mapboxgl_preloaded_worker_pool"),
pe=null):console.warn("Could not clear WebWorkers since there are active Map instances that still reference it. The pre-warmed WebWorker pool can only be cleared when all map instances have been removed with map.remove()"))},get accessToken(){return a.config.ACCESS_TOKEN},set accessToken(R){a.config.ACCESS_TOKEN=R},get baseApiUrl(){return a.config.API_URL},set baseApiUrl(R){a.config.API_URL=R},get workerCount(){return rd.workerCount},set workerCount(R){rd.workerCount=R},get maxParallelImageRequests(){return a.config.MAX_PARALLEL_IMAGE_REQUESTS},
set maxParallelImageRequests(R){a.config.MAX_PARALLEL_IMAGE_REQUESTS=R},clearStorage:function(R){a.clearTileCache(R)},workerUrl:""};return gi});return m})},{}],462:[function(b,N,G){function p(k,m,a){for(var g=Array(k),h=0;h<k;++h)g[h]=0,h===m&&(g[h]+=.5),h===a&&(g[h]+=.5);return g}N.exports=function(k){for(var m=1<<k+1,a=Array(m),g=0;g<m;++g){var h=g;var r=k,l=g;if(0===l||l===(1<<r+1)-1)var c=[];else{var d=[];c=[];for(var e=0;e<=r;++e)if(l&1<<e){d.push(p(r,e-1,e-1));c.push(null);for(var f=0;f<=r;++f)~l&
1<<f&&(d.push(p(r,e-1,f-1)),c.push([e,f]))}r=n(d);l=[];e=0;b:for(;e<r.length;++e){d=r[e];var q=[];for(f=0;f<d.length;++f){if(!c[d[f]])continue b;q.push(c[d[f]].slice())}l.push(q)}c=l}a[h]=c}return a};var n=b("convex-hull")},{"convex-hull":141}],463:[function(b,N,G){function p(f,q,t,w,x){f[0]=q[0]*w+t[0]*x;f[1]=q[1]*w+t[1]*x;f[2]=q[2]*w+t[2]*x}var n=b("./normalize");G=b("gl-mat4/create");var k=b("gl-mat4/clone"),m=b("gl-mat4/determinant"),a=b("gl-mat4/invert"),g=b("gl-mat4/transpose"),h={length:b("gl-vec3/length"),
normalize:b("gl-vec3/normalize"),dot:b("gl-vec3/dot"),cross:b("gl-vec3/cross")},r=G(),l=G(),c=[0,0,0,0],d=[[0,0,0],[0,0,0],[0,0,0]],e=[0,0,0];N.exports=function(f,q,t,w,x,z){q||(q=[0,0,0]);t||(t=[0,0,0]);w||(w=[0,0,0]);x||(x=[0,0,0,1]);z||(z=[0,0,0,1]);if(!n(r,f))return!1;k(l,r);l[3]=0;l[7]=0;l[11]=0;l[15]=1;if(Math.abs(1E-8>m(l)))return!1;var B=r[3],A=r[7],D=r[11];f=r[12];var C=r[13],v=r[14],y=r[15];if(0!==B||0!==A||0!==D){c[0]=B;c[1]=A;c[2]=D;c[3]=y;if(!a(l,l))return!1;g(l,l);B=c[0];A=c[1];D=c[2];
y=c[3];x[0]=l[0]*B+l[4]*A+l[8]*D+l[12]*y;x[1]=l[1]*B+l[5]*A+l[9]*D+l[13]*y;x[2]=l[2]*B+l[6]*A+l[10]*D+l[14]*y;x[3]=l[3]*B+l[7]*A+l[11]*D+l[15]*y}else x[0]=x[1]=x[2]=0,x[3]=1;q[0]=f;q[1]=C;q[2]=v;d[0][0]=r[0];d[0][1]=r[1];d[0][2]=r[2];d[1][0]=r[4];d[1][1]=r[5];d[1][2]=r[6];d[2][0]=r[8];d[2][1]=r[9];d[2][2]=r[10];t[0]=h.length(d[0]);h.normalize(d[0],d[0]);w[0]=h.dot(d[0],d[1]);p(d[1],d[1],d[0],1,-w[0]);t[1]=h.length(d[1]);h.normalize(d[1],d[1]);w[0]/=t[1];w[1]=h.dot(d[0],d[2]);p(d[2],d[2],d[0],1,-w[1]);
w[2]=h.dot(d[1],d[2]);p(d[2],d[2],d[1],1,-w[2]);t[2]=h.length(d[2]);h.normalize(d[2],d[2]);w[1]/=t[2];w[2]/=t[2];h.cross(e,d[1],d[2]);if(0>h.dot(d[0],e))for(q=0;3>q;q++)t[q]*=-1,d[q][0]*=-1,d[q][1]*=-1,d[q][2]*=-1;z[0]=.5*Math.sqrt(Math.max(1+d[0][0]-d[1][1]-d[2][2],0));z[1]=.5*Math.sqrt(Math.max(1-d[0][0]+d[1][1]-d[2][2],0));z[2]=.5*Math.sqrt(Math.max(1-d[0][0]-d[1][1]+d[2][2],0));z[3]=.5*Math.sqrt(Math.max(1+d[0][0]+d[1][1]+d[2][2],0));d[2][1]>d[1][2]&&(z[0]=-z[0]);d[0][2]>d[2][0]&&(z[1]=-z[1]);
d[1][0]>d[0][1]&&(z[2]=-z[2]);return!0}},{"./normalize":464,"gl-mat4/clone":284,"gl-mat4/create":286,"gl-mat4/determinant":287,"gl-mat4/invert":299,"gl-mat4/transpose":312,"gl-vec3/cross":368,"gl-vec3/dot":373,"gl-vec3/length":383,"gl-vec3/normalize":390}],464:[function(b,N,G){N.exports=function(p,n){var k=n[15];if(0===k)return!1;k=1/k;for(var m=0;16>m;m++)p[m]=n[m]*k;return!0}},{}],465:[function(b,N,G){function p(){return{translate:[0,0,0],scale:[1,1,1],skew:[0,0,0],perspective:[0,0,0,1],quaternion:[0,
0,0,1]}}var n=b("gl-vec3/lerp"),k=b("mat4-recompose"),m=b("mat4-decompose"),a=b("gl-mat4/determinant"),g=b("quat-slerp"),h=p(),r=p(),l=p();N.exports=function(c,d,e,f){if(0===a(d)||0===a(e))return!1;d=m(d,h.translate,h.scale,h.skew,h.perspective,h.quaternion);e=m(e,r.translate,r.scale,r.skew,r.perspective,r.quaternion);if(!d||!e)return!1;n(l.translate,h.translate,r.translate,f);n(l.skew,h.skew,r.skew,f);n(l.scale,h.scale,r.scale,f);n(l.perspective,h.perspective,r.perspective,f);g(l.quaternion,h.quaternion,
r.quaternion,f);k(c,l.translate,l.scale,l.skew,l.perspective,l.quaternion);return!0}},{"gl-mat4/determinant":287,"gl-vec3/lerp":384,"mat4-decompose":463,"mat4-recompose":466,"quat-slerp":529}],466:[function(b,N,G){var p={identity:b("gl-mat4/identity"),translate:b("gl-mat4/translate"),multiply:b("gl-mat4/multiply"),create:b("gl-mat4/create"),scale:b("gl-mat4/scale"),fromRotationTranslation:b("gl-mat4/fromRotationTranslation")};p.create();var n=p.create();N.exports=function(k,m,a,g,h,r){p.identity(k);
p.fromRotationTranslation(k,r,m);k[3]=h[0];k[7]=h[1];k[11]=h[2];k[15]=h[3];p.identity(n);0!==g[2]&&(n[9]=g[2],p.multiply(k,k,n));0!==g[1]&&(n[9]=0,n[8]=g[1],p.multiply(k,k,n));0!==g[0]&&(n[8]=0,n[4]=g[0],p.multiply(k,k,n));p.scale(k,k,a);return k}},{"gl-mat4/create":286,"gl-mat4/fromRotationTranslation":290,"gl-mat4/identity":297,"gl-mat4/multiply":301,"gl-mat4/scale":309,"gl-mat4/translate":311}],467:[function(b,N,G){N.exports=Math.log2||function(p){return Math.log(p)*Math.LOG2E}},{}],468:[function(b,
N,G){function p(f){this._components=f.slice();this._time=[0];this.prevMatrix=f.slice();this.nextMatrix=f.slice();this.computedMatrix=f.slice();this.computedInverse=f.slice();this.computedEye=[0,0,0];this.computedUp=[0,0,0];this.computedCenter=[0,0,0];this.computedRadius=[0];this._limits=[-Infinity,Infinity]}var n=b("binary-search-bounds"),k=b("mat4-interpolate"),m=b("gl-mat4/invert"),a=b("gl-mat4/rotateX"),g=b("gl-mat4/rotateY"),h=b("gl-mat4/rotateZ"),r=b("gl-mat4/lookAt"),l=b("gl-mat4/translate");
b("gl-mat4/scale");var c=b("gl-vec3/normalize"),d=[0,0,0];N.exports=function(f){f=f||{};return new p(f.matrix||[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1])};b=p.prototype;b.recalcMatrix=function(f){var q=this._time,t=n.le(q,f),w=this.computedMatrix;if(!(0>t)){var x=this._components;if(t===q.length-1)for(var z=16*t,B=0;16>B;++B)w[B]=x[z++];else{var A=q[t+1]-q[t];z=16*t;var D=this.prevMatrix,C=!0;for(B=0;16>B;++B)D[B]=x[z++];var v=this.nextMatrix;for(B=0;16>B;++B)v[B]=x[z++],C=C&&D[B]===v[B];if(1E-6>A||C)for(B=
0;16>B;++B)w[B]=D[B];else k(w,D,v,(f-q[t])/A)}B=this.computedUp;B[0]=w[1];B[1]=w[5];B[2]=w[9];c(B,B);B=this.computedInverse;m(B,w);f=this.computedEye;q=B[15];f[0]=B[12]/q;f[1]=B[13]/q;f[2]=B[14]/q;q=this.computedCenter;t=Math.exp(this.computedRadius[0]);for(B=0;3>B;++B)q[B]=f[B]-w[2+4*B]*t}};b.idle=function(f){if(!(f<this.lastT())){for(var q=this._components,t=q.length-16,w=0;16>w;++w)q.push(q[t++]);this._time.push(f)}};b.flush=function(f){f=n.gt(this._time,f)-2;0>f||(this._time.splice(0,f),this._components.splice(0,
16*f))};b.lastT=function(){return this._time[this._time.length-1]};b.lookAt=function(f,q,t,w){this.recalcMatrix(f);q=q||this.computedEye;t=t||d;w=w||this.computedUp;this.setMatrix(f,r(this.computedMatrix,q,t,w));for(w=f=0;3>w;++w)f+=Math.pow(t[w]-q[w],2);f=Math.log(Math.sqrt(f));this.computedRadius[0]=f};b.rotate=function(f,q,t,w){this.recalcMatrix(f);var x=this.computedInverse;q&&g(x,x,q);t&&a(x,x,t);w&&h(x,x,w);this.setMatrix(f,m(this.computedMatrix,x))};var e=[0,0,0];b.pan=function(f,q,t,w){e[0]=
-(q||0);e[1]=-(t||0);e[2]=-(w||0);this.recalcMatrix(f);q=this.computedInverse;l(q,q,e);this.setMatrix(f,m(q,q))};b.translate=function(f,q,t,w){e[0]=q||0;e[1]=t||0;e[2]=w||0;this.recalcMatrix(f);q=this.computedMatrix;l(q,q,e);this.setMatrix(f,q)};b.setMatrix=function(f,q){if(!(f<this.lastT()))for(this._time.push(f),f=0;16>f;++f)this._components.push(q[f])};b.setDistance=function(f,q){this.computedRadius[0]=q};b.setDistanceLimits=function(f,q){var t=this._limits;t[0]=f;t[1]=q};b.getDistanceLimits=function(f){var q=
this._limits;return f?(f[0]=q[0],f[1]=q[1],f):q}},{"binary-search-bounds":103,"gl-mat4/invert":299,"gl-mat4/lookAt":300,"gl-mat4/rotateX":306,"gl-mat4/rotateY":307,"gl-mat4/rotateZ":308,"gl-mat4/scale":309,"gl-mat4/translate":311,"gl-vec3/normalize":390,"mat4-interpolate":465}],469:[function(b,N,G){N.exports=function(n){var k=n.length;if(3>k){for(var m=Array(k),a=0;a<k;++a)m[a]=a;return 2===k&&n[0][0]===n[1][0]&&n[0][1]===n[1][1]?[0]:m}m=Array(k);for(a=0;a<k;++a)m[a]=a;m.sort(function(d,e){var f=
n[d][0]-n[e][0];return f?f:n[d][1]-n[e][1]});var g=[m[0],m[1]],h=[m[0],m[1]];for(a=2;a<k;++a){for(var r=m[a],l=n[r],c=g.length;1<c&&0>=p(n[g[c-2]],n[g[c-1]],l);)--c,g.pop();g.push(r);for(c=h.length;1<c&&0<=p(n[h[c-2]],n[h[c-1]],l);)--c,h.pop();h.push(r)}m=Array(h.length+g.length-2);a=k=0;for(r=g.length;a<r;++a)m[k++]=g[a];for(a=h.length-2;0<a;--a)m[k++]=h[a];return m};var p=b("robust-orientation")[3]},{"robust-orientation":548}],470:[function(b,N,G){N.exports=function(n,k){function m(B){var A=!1;
"altKey"in B&&(A=A||B.altKey!==w.alt,w.alt=!!B.altKey);"shiftKey"in B&&(A=A||B.shiftKey!==w.shift,w.shift=!!B.shiftKey);"ctrlKey"in B&&(A=A||B.ctrlKey!==w.control,w.control=!!B.ctrlKey);"metaKey"in B&&(A=A||B.metaKey!==w.meta,w.meta=!!B.metaKey);return A}function a(B,A){var D=p.x(A),C=p.y(A);"buttons"in A&&(B=A.buttons|0);if(B!==f||D!==q||C!==t||m(A))f=B|0,q=D||0,t=C||0,k&&k(f,q,t,w)}function g(B){a(0,B)}function h(){if(f||q||t||w.shift||w.alt||w.meta||w.control)f=q=t=0,w.shift=w.alt=w.control=w.meta=
!1,k&&k(0,0,0,w)}function r(B){m(B)&&k&&k(f,q,t,w)}function l(B){0===p.buttons(B)?a(0,B):a(f,B)}function c(B){a(f|p.buttons(B),B)}function d(B){a(f&~p.buttons(B),B)}function e(){x||(x=!0,n.addEventListener("mousemove",l),n.addEventListener("mousedown",c),n.addEventListener("mouseup",d),n.addEventListener("mouseleave",g),n.addEventListener("mouseenter",g),n.addEventListener("mouseout",g),n.addEventListener("mouseover",g),n.addEventListener("blur",h),n.addEventListener("keyup",r),n.addEventListener("keydown",
r),n.addEventListener("keypress",r),n!==window&&(window.addEventListener("blur",h),window.addEventListener("keyup",r),window.addEventListener("keydown",r),window.addEventListener("keypress",r)))}k||(k=n,n=window);var f=0,q=0,t=0,w={shift:!1,alt:!1,control:!1,meta:!1},x=!1;e();var z={element:n};Object.defineProperties(z,{enabled:{get:function(){return x},set:function(B){B?e():x&&(x=!1,n.removeEventListener("mousemove",l),n.removeEventListener("mousedown",c),n.removeEventListener("mouseup",d),n.removeEventListener("mouseleave",
g),n.removeEventListener("mouseenter",g),n.removeEventListener("mouseout",g),n.removeEventListener("mouseover",g),n.removeEventListener("blur",h),n.removeEventListener("keyup",r),n.removeEventListener("keydown",r),n.removeEventListener("keypress",r),n!==window&&(window.removeEventListener("blur",h),window.removeEventListener("keyup",r),window.removeEventListener("keydown",r),window.removeEventListener("keypress",r)))},enumerable:!0},buttons:{get:function(){return f},enumerable:!0},x:{get:function(){return q},
enumerable:!0},y:{get:function(){return t},enumerable:!0},mods:{get:function(){return w},enumerable:!0}});return z};var p=b("mouse-event")},{"mouse-event":472}],471:[function(b,N,G){var p={left:0,top:0};N.exports=function(n,k,m){k=k||n.currentTarget||n.srcElement;Array.isArray(m)||(m=[0,0]);var a=n.clientX||0;n=n.clientY||0;k=k===window||k===document||k===document.body?p:k.getBoundingClientRect();m[0]=a-k.left;m[1]=n-k.top;return m}},{}],472:[function(b,N,G){function p(n){return n.target||n.srcElement||
window}G.buttons=function(n){if("object"===typeof n){if("buttons"in n)return n.buttons;if("which"in n){n=n.which;if(2===n)return 4;if(3===n)return 2;if(0<n)return 1<<n-1}else if("button"in n){n=n.button;if(1===n)return 4;if(2===n)return 2;if(0<=n)return 1<<n}}return 0};G.element=p;G.x=function(n){if("object"===typeof n){if("offsetX"in n)return n.offsetX;var k=p(n).getBoundingClientRect();return n.clientX-k.left}return 0};G.y=function(n){if("object"===typeof n){if("offsetY"in n)return n.offsetY;var k=
p(n).getBoundingClientRect();return n.clientY-k.top}return 0}},{}],473:[function(b,N,G){var p=b("to-px");N.exports=function(n,k,m){"function"===typeof n&&(m=!!k,k=n,n=window);var a=p("ex",n),g=function(h){m&&h.preventDefault();var r=h.deltaX||0,l=h.deltaY||0,c=h.deltaZ||0,d=1;switch(h.deltaMode){case 1:d=a;break;case 2:d=window.innerHeight}r*=d;l*=d;c*=d;if(r||l||c)return k(r,l,c,h)};n.addEventListener("wheel",g);return g}},{"to-px":600}],474:[function(b,N,G){(function(p,n){(function(){(function(k,
m,a){m[k]=m[k]||a();"undefined"!=typeof N&&N.exports&&(N.exports=m[k])})("Promise","undefined"!=typeof p?p:this,function(){function k(z,B){w.add(z,B);e||(e=q(w.drain))}function m(z){var B=typeof z;if(null!=z&&("object"==B||"function"==B))var A=z.then;return"function"==typeof A?A:!1}function a(){for(var z=0;z<this.chain.length;z++){var B=void 0,A=void 0,D=1===this.state?this.chain[z].success:this.chain[z].failure,C=this.chain[z];try{!1===D?C.reject(this.msg):(A=!0===D?this.msg:D.call(void 0,this.msg),
A===C.promise?C.reject(TypeError("Promise-chain cycle")):(B=m(A))?B.call(A,C.resolve,C.reject):C.resolve(A))}catch(v){C.reject(v)}}this.chain.length=0}function g(z){var B,A=this;if(!A.triggered){A.triggered=!0;A.def&&(A=A.def);try{(B=m(z))?k(function(){var D=new l(A);try{B.call(z,function(){g.apply(D,arguments)},function(){h.apply(D,arguments)})}catch(C){h.call(D,C)}}):(A.msg=z,A.state=1,0<A.chain.length&&k(a,A))}catch(D){h.call(new l(A),D)}}}function h(z){var B=this;B.triggered||(B.triggered=!0,
B.def&&(B=B.def),B.msg=z,B.state=2,0<B.chain.length&&k(a,B))}function r(z,B,A,D){for(var C=0;C<B.length;C++)(function(v){z.resolve(B[v]).then(function(y){A(v,y)},D)})(C)}function l(z){this.def=z;this.triggered=!1}function c(z){this.promise=z;this.state=0;this.triggered=!1;this.chain=[];this.msg=void 0}function d(z){if("function"!=typeof z)throw TypeError("Not a function");if(0!==this.__NPO__)throw TypeError("Not a promise");this.__NPO__=1;var B=new c(this);this.then=function(A,D){var C={success:"function"==
typeof A?A:!0,failure:"function"==typeof D?D:!1};C.promise=new this.constructor(function(v,y){if("function"!=typeof v||"function"!=typeof y)throw TypeError("Not a function");C.resolve=v;C.reject=y});B.chain.push(C);0!==B.state&&k(a,B);return C.promise};this["catch"]=function(A){return this.then(void 0,A)};try{z.call(void 0,function(A){g.call(B,A)},function(A){h.call(B,A)})}catch(A){h.call(B,A)}}var e,f=Object.prototype.toString,q="undefined"!=typeof n?function(z){return n(z)}:setTimeout;try{Object.defineProperty({},
"x",{});var t=function(z,B,A,D){return Object.defineProperty(z,B,{value:A,writable:!0,configurable:!1!==D})}}catch(z){t=function(B,A,D){B[A]=D;return B}}var w=function(){function z(C,v){this.fn=C;this.self=v;this.next=void 0}var B,A,D;return{add:function(C,v){D=new z(C,v);A?A.next=D:B=D;A=D;D=void 0},drain:function(){var C=B;for(B=A=e=void 0;C;)C.fn.call(C.self),C=C.next}}}();var x=t({},"constructor",d,!1);d.prototype=x;t(x,"__NPO__",0,!1);t(d,"resolve",function(z){return z&&"object"==typeof z&&1===
z.__NPO__?z:new this(function(B,A){if("function"!=typeof B||"function"!=typeof A)throw TypeError("Not a function");B(z)})});t(d,"reject",function(z){return new this(function(B,A){if("function"!=typeof B||"function"!=typeof A)throw TypeError("Not a function");A(z)})});t(d,"all",function(z){var B=this;return"[object Array]"!=f.call(z)?B.reject(TypeError("Not an array")):0===z.length?B.resolve([]):new B(function(A,D){if("function"!=typeof A||"function"!=typeof D)throw TypeError("Not a function");var C=
z.length,v=Array(C),y=0;r(B,z,function(F,J){v[F]=J;++y===C&&A(v)},D)})});t(d,"race",function(z){var B=this;return"[object Array]"!=f.call(z)?B.reject(TypeError("Not an array")):new B(function(A,D){if("function"!=typeof A||"function"!=typeof D)throw TypeError("Not a function");r(B,z,function(C,v){A(v)},D)})});return d})}).call(this)}).call(this,"undefined"!==typeof xe?xe:"undefined"!==typeof self?self:"undefined"!==typeof window?window:{},b("timers").setImmediate)},{timers:597}],475:[function(b,N,
G){function p(c,d,e){for(var f=0,q=0;q<c;++q)d&1<<q&&(f|=1<<e[q]);return f}function n(c,d,e,f,q,t){function w(O,I){v.push("for(","i"+q[O],"\x3d",I,";","i"+q[O],"\x3c","s"+q[O],";","++","i"+q[O],"){")}function x(O){for(var I=0;I<A;++I)v.push("p"+I,"+\x3d","u"+I+"_"+q[O],";");v.push("}")}function z(){for(var O=1;O<1<<D;++O)v.push(l,"\x3d","e"+O,";","e"+O,"\x3d","y"+O,";","y"+O,"\x3d",l,";")}function B(O,I){if(0>O){for(var L=0;L<A;++L)t[L]?v.push("c"+L+"_0","\x3d","d"+L,".get(","p"+L,");"):v.push("c"+
L+"_0","\x3d","d"+L,"[","p"+L,"];");O=[];for(L=0;L<A;++L)O.push("c"+L+"_0");for(L=0;L<f;++L)O.push("x"+L);v.push("b0","\x3d",a,"[",r,"]\x3dphase(",O.join(),");");for(O=1;O<1<<D;++O)v.push("b"+O,"\x3d",a,"[",r,"+","e"+O,"];");L=[];for(O=1;O<1<<D;++O)L.push("(b0!\x3d\x3db"+O+")");v.push("if(",L.join("||"),"){");var Q=[];for(L=0;L<D;++L)Q.push("i"+L);for(L=0;L<A;++L)for(Q.push("c"+L+"_0"),O=1;O<1<<D;++O)t[L]?v.push("c"+L+"_"+O,"\x3d","d"+L,".get(","p"+L,"+","d"+L+"_"+O,");"):v.push("c"+L+"_"+O,"\x3d",
"d"+L,"[","p"+L,"+","d"+L+"_"+O,"];"),Q.push("c"+L+"_"+O);for(L=0;L<1<<D;++L)Q.push("b"+L);for(L=0;L<f;++L)Q.push("x"+L);v.push("vertex(",Q.join(),");","v0","\x3d",m,"[",r,"]\x3d",g,"++;");L=(1<<D)-1;Q="b"+L;for(O=0;O<D;++O)if(0===(I&~(1<<O))){for(var Z=L^1<<O,ba="b"+Z,V=[],S=Z;0<S;S=S-1&Z)V.push(m+"["+r+"+e"+S+"]");V.push("v0");for(S=0;S<A;++S)O&1?V.push("c"+S+"_"+L,"c"+S+"_"+Z):V.push("c"+S+"_"+Z,"c"+S+"_"+L);O&1?V.push(Q,ba):V.push(ba,Q);for(S=0;S<f;++S)V.push("x"+S);v.push("if(",Q,"!\x3d\x3d",
ba,"){","face(",V.join(),")}")}v.push("}",r,"+\x3d1;")}else{for(L=O-1;0<=L;--L)w(L,0);Q=[];for(L=0;L<A;++L)t[L]?Q.push("d"+L+".get(p"+L+")"):Q.push("d"+L+"[p"+L+"]");for(L=0;L<f;++L)Q.push("x"+L);v.push(a,"[",r,"++]\x3dphase(",Q.join(),");");for(L=0;L<O;++L)x(L);for(L=0;L<A;++L)v.push("p"+L,"+\x3d","u"+L+"_"+q[O],";");v.push("if(","s"+q[O],"\x3e0){","i"+q[O],"\x3d1;");B(O-1,I|1<<q[O]);for(L=0;L<A;++L)v.push("p"+L,"+\x3d","u"+L+"_"+q[O],";");O===D-1&&(v.push(r,"\x3d0;"),z());w(O,2);B(O-1,I);O===D-
1&&(v.push("if(","i"+q[D-1],"\x261){",r,"\x3d0;}"),z());x(O);v.push("}")}}var A=t.length,D=q.length;if(2>D)throw Error("ndarray-extract-contour: Dimension must be at least 2");for(var C="extractContour"+q.join("_"),v=[],y=[],F=[],J=0;J<A;++J)F.push("a"+J);for(J=0;J<f;++J)F.push("x"+J);for(J=0;J<D;++J)y.push("s"+J+"\x3da0.shape["+J+"]|0");for(J=0;J<A;++J){y.push("d"+J+"\x3da"+J+".data","o"+J+"\x3da"+J+".offset|0");for(var K=0;K<D;++K)y.push("t"+J+"_"+K+"\x3da"+J+".stride["+K+"]|0")}for(J=0;J<A;++J)for(y.push("p"+
J+"\x3do"+J),y.push("c"+J+"_0"),K=1;K<1<<D;++K){for(var M=[],H=0;H<D;++H)K&1<<H&&M.push("-t"+(J+"_"+H));y.push("d"+J+"_"+K+"\x3d("+M.join("")+")|0");y.push("c"+J+"_"+K+"\x3d0")}for(J=0;J<A;++J)for(K=0;K<D;++K)H=["t"+J+"_"+q[K]],0<K&&H.push("t"+J+"_"+q[K-1]+"*s"+q[K-1]),y.push("u"+J+"_"+q[K]+"\x3d("+H.join("-")+")|0");for(J=0;J<D;++J)y.push("i"+J+"\x3d0");y.push(g+"\x3d0");K=["2"];for(J=D-2;0<=J;--J)K.push("s"+q[J]);y.push(h+"\x3d("+K.join("*")+")|0",a+"\x3dmallocUint32("+h+")",m+"\x3dmallocUint32("+
h+")",r+"\x3d0");y.push("b0\x3d0");for(K=1;K<1<<D;++K){J=[];M=[];for(H=0;H<D;++H)K&1<<H&&(0===M.length?J.push("1"):J.unshift(M.join("*"))),M.push("s"+q[H]);H="";0>J[0].indexOf("s"+q[D-2])&&(H="-");M=p(D,K,q);y.push("e"+M+"\x3d(-"+J.join("-")+")|0","y"+M+"\x3d("+H+J.join("-")+")|0","b"+M+"\x3d0")}y.push("v0\x3d0",l+"\x3d0");B(D-1,0);v.push("freeUint32(",m,");freeUint32(",a,");");C=["'use strict';function ",C,"(",F.join(),"){var ",y.join(),";",v.join(""),"}return ",C].join("");return(new Function("vertex",
"face","phase","mallocUint32","freeUint32",C))(c,d,e,k.mallocUint32,k.freeUint32)}var k=b("typedarray-pool");N.exports=function(c){function d(z){throw Error("ndarray-extract-contour: "+z);}"object"!==typeof c&&d("Must specify arguments");var e=c.order;Array.isArray(e)||d("Must specify order");var f=c.arrayArguments||1;1>f&&d("Must have at least one array argument");var q=c.scalarArguments||0;0>q&&d("Scalar arg count must be \x3e 0");"function"!==typeof c.vertex&&d("Must specify vertex creation function");
"function"!==typeof c.cell&&d("Must specify cell creation function");"function"!==typeof c.phase&&d("Must specify phase function");for(var t=c.getters||[],w=Array(f),x=0;x<f;++x)0<=t.indexOf(x)?w[x]=!0:w[x]=!1;return n(c.vertex,c.cell,c.phase,q,e,w)};var m="V",a="P",g="N",h="Q",r="X",l="T"},{"typedarray-pool":617}],476:[function(b,N,G){function p(l){if(l in m)return m[l];for(var c=[],d=0;d<l;++d)c.push("out",d,"s\x3d0.5*(inp",d,"l-inp",d,"r);");var e=["array"],f=["junk"];for(d=0;d<l;++d){e.push("array");
f.push("out"+d+"s");var q=n(l);q[d]=-1;e.push({array:0,offset:q.slice()});q[d]=1;e.push({array:0,offset:q.slice()});f.push("inp"+d+"l","inp"+d+"r")}return m[l]=k({args:e,pre:g,post:g,body:{body:c.join(""),args:f.map(function(t){return{name:t,lvalue:0===t.indexOf("out"),rvalue:0===t.indexOf("inp"),count:"junk"!==t|0}}),thisVars:[],localVars:[]},funcName:"fdTemplate"+l})}N.exports=function(l,c,d){if(Array.isArray(d)){if(d.length!==c.dimension)throw Error("ndarray-gradient: invalid boundary conditions");
}else d="string"===typeof d?n(c.dimension,d):n(c.dimension,"clamp");if(l.dimension!==c.dimension+1)throw Error("ndarray-gradient: output dimension must be +1 input dimension");if(l.shape[c.dimension]!==c.dimension)throw Error("ndarray-gradient: output shape must match input shape");for(var e=0;e<c.dimension;++e)if(l.shape[e]!==c.shape[e])throw Error("ndarray-gradient: shape mismatch");if(0===c.size)return l;if(0>=c.dimension)return l.set(0),l;var f=d;d=f.join();e=a[d];if(!e){e=f.length;for(var q=
["function gradient(dst,src){var s\x3dsrc.shape.slice();"],t=0;t<1<<e;++t){for(var w=[],x=0;x<e;++x)t&1<<x&&w.push(x+1);for(var z=0;z<1<<w.length;++z){var B=w.slice();for(x=0;x<w.length;++x)z&1<<x&&(B[x]=-B[x]);x=B;B=e-x.length;for(var A=[],D=[],C=[],v=0;v<e;++v)0<=x.indexOf(v+1)?C.push("0"):0<=x.indexOf(-(v+1))?C.push("s["+v+"]-1"):(C.push("-1"),A.push("1"),D.push("s["+v+"]-2"));D=".lo("+A.join()+").hi("+D.join()+")";0===A.length&&(D="");if(0<B){q.push("if(1");for(v=0;v<e;++v)0<=x.indexOf(v+1)||
0<=x.indexOf(-(v+1))||q.push("\x26\x26s[",v,"]\x3e2");q.push("){grad",B,"(src.pick(",C.join(),")",D);for(v=0;v<e;++v)0<=x.indexOf(v+1)||0<=x.indexOf(-(v+1))||q.push(",dst.pick(",C.join(),",",v,")",D);q.push(");")}for(v=0;v<x.length;++v){A=Math.abs(x[v])-1;var y="dst.pick("+C.join()+","+A+")"+D;switch(f[A]){case "clamp":var F=C.slice(),J=C.slice();0>x[v]?F[A]="s["+A+"]-2":J[A]="1";0===B?q.push("if(s[",A,"]\x3e1){dst.set(",C.join(),",",A,",0.5*(src.get(",F.join(),")-src.get(",J.join(),")))}else{dst.set(",
C.join(),",",A,",0)};"):q.push("if(s[",A,"]\x3e1){diff(",y,",src.pick(",F.join(),")",D,",src.pick(",J.join(),")",D,");}else{zero(",y,");};");break;case "mirror":0===B?q.push("dst.set(",C.join(),",",A,",0);"):q.push("zero(",y,");");break;case "wrap":F=C.slice();J=C.slice();0>x[v]?(F[A]="s["+A+"]-2",J[A]="0"):(F[A]="s["+A+"]-1",J[A]="1");0===B?q.push("if(s[",A,"]\x3e2){dst.set(",C.join(),",",A,",0.5*(src.get(",F.join(),")-src.get(",J.join(),")))}else{dst.set(",C.join(),",",A,",0)};"):q.push("if(s[",
A,"]\x3e2){diff(",y,",src.pick(",F.join(),")",D,",src.pick(",J.join(),")",D,");}else{zero(",y,");};");break;default:throw Error("ndarray-gradient: Invalid boundary condition");}}0<B&&q.push("};")}}q.push("return dst;};return gradient");f=["diff","zero"];w=[h,r];for(t=1;t<=e;++t)f.push("grad"+t),w.push(p(t));f.push(q.join(""));e=Function.apply(void 0,f).apply(void 0,w);m[d]=e}return e(l,c)};var n=b("dup"),k=b("cwise-compiler"),m={},a={},g={body:"",args:[],thisVars:[],localVars:[]},h=k({args:["array",
"array","array"],pre:g,post:g,body:{args:[{name:"out",lvalue:!0,rvalue:!1,count:1},{name:"left",lvalue:!1,rvalue:!0,count:1},{name:"right",lvalue:!1,rvalue:!0,count:1}],body:"out\x3d0.5*(left-right)",thisVars:[],localVars:[]},funcName:"cdiff"}),r=k({args:["array"],pre:g,post:g,body:{args:[{name:"out",lvalue:!0,rvalue:!1,count:1}],body:"out\x3d0",thisVars:[],localVars:[]},funcName:"zero"})},{"cwise-compiler":157,dup:185}],477:[function(b,N,G){function p(a,g){var h=Math.floor(g);g-=h;var r=0<=h+1&&
h+1<a.shape[0],l=0<=h&&h<a.shape[0]?+a.get(h):0;a=r?+a.get(h+1):0;return(1-g)*l+g*a}function n(a,g,h){var r=Math.floor(g);g-=r;var l=0<=r&&r<a.shape[0],c=0<=r+1&&r+1<a.shape[0],d=Math.floor(h);h-=d;var e=0<=d&&d<a.shape[1],f=0<=d+1&&d+1<a.shape[1],q=l&&e?a.get(r,d):0;l=l&&f?a.get(r,d+1):0;e=c&&e?a.get(r+1,d):0;a=c&&f?a.get(r+1,d+1):0;return(1-h)*((1-g)*q+g*e)+h*((1-g)*l+g*a)}function k(a,g,h,r){var l=Math.floor(g);g-=l;var c=0<=l&&l<a.shape[0],d=0<=l+1&&l+1<a.shape[0],e=Math.floor(h);h-=e;var f=0<=
e&&e<a.shape[1],q=0<=e+1&&e+1<a.shape[1],t=Math.floor(r);r-=t;var w=0<=t&&t<a.shape[2],x=0<=t+1&&t+1<a.shape[2],z=c&&f&&w?a.get(l,e,t):0,B=c&&q&&w?a.get(l,e+1,t):0,A=d&&f&&w?a.get(l+1,e,t):0;w=d&&q&&w?a.get(l+1,e+1,t):0;var D=c&&f&&x?a.get(l,e,t+1):0;c=c&&q&&x?a.get(l,e+1,t+1):0;f=d&&f&&x?a.get(l+1,e,t+1):0;a=d&&q&&x?a.get(l+1,e+1,t+1):0;return(1-r)*((1-h)*((1-g)*z+g*A)+h*((1-g)*B+g*w))+r*((1-h)*((1-g)*D+g*f)+h*((1-g)*c+g*a))}function m(a){var g=a.shape.length|0,h=Array(g),r=Array(g),l=Array(g),c=
Array(g),d;for(d=0;d<g;++d){var e=+arguments[d+1];h[d]=Math.floor(e);r[d]=e-h[d];l[d]=0<=h[d]&&h[d]<a.shape[d];c[d]=0<=h[d]+1&&h[d]+1<a.shape[d]}e=0;var f;d=0;a:for(;d<1<<g;++d){var q=1;var t=a.offset;for(f=0;f<g;++f)if(d&1<<f){if(!c[f])continue a;q*=r[f];t+=a.stride[f]*(h[f]+1)}else{if(!l[f])continue a;q*=1-r[f];t+=a.stride[f]*h[f]}e+=q*a.data[t]}return e}N.exports=function(a,g,h,r){switch(a.shape.length){case 0:return 0;case 1:return p(a,g);case 2:return n(a,g,h);case 3:return k(a,g,h,r);default:return m.apply(void 0,
arguments)}};N.exports.d1=p;N.exports.d2=n;N.exports.d3=k},{}],478:[function(b,N,G){function p(d){if(!d)return m;for(var e=0;e<d.args.length;++e){var f=d.args[e];d.args[e]=0===e?{name:f,lvalue:!0,rvalue:!!d.rvalue,count:d.count||1}:{name:f,lvalue:!1,rvalue:!0,count:1}}d.thisVars||(d.thisVars=[]);d.localVars||(d.localVars=[]);return d}function n(d){for(var e=[],f=0;f<d.args.length;++f)e.push("a"+f);e=new Function("P",["return function ",d.funcName,"_ndarrayops(",e.join(","),") {P(",e.join(","),");return a0}"].join(""));
d=k({args:d.args,pre:p(d.pre),body:p(d.body),post:p(d.proc),funcName:d.funcName});return e(d)}var k=b("cwise-compiler"),m={body:"",args:[],thisVars:[],localVars:[]},a={add:"+",sub:"-",mul:"*",div:"/",mod:"%",band:"\x26",bor:"|",bxor:"^",lshift:"\x3c\x3c",rshift:"\x3e\x3e",rrshift:"\x3e\x3e\x3e"};(function(){for(var d in a){var e=a[d];G[d]=n({args:["array","array","array"],body:{args:["a","b","c"],body:"a\x3db"+e+"c"},funcName:d});G[d+"eq"]=n({args:["array","array"],body:{args:["a","b"],body:"a"+e+
"\x3db"},rvalue:!0,funcName:d+"eq"});G[d+"s"]=n({args:["array","array","scalar"],body:{args:["a","b","s"],body:"a\x3db"+e+"s"},funcName:d+"s"});G[d+"seq"]=n({args:["array","scalar"],body:{args:["a","s"],body:"a"+e+"\x3ds"},rvalue:!0,funcName:d+"seq"})}})();var g={not:"!",bnot:"~",neg:"-",recip:"1.0/"};(function(){for(var d in g){var e=g[d];G[d]=n({args:["array","array"],body:{args:["a","b"],body:"a\x3d"+e+"b"},funcName:d});G[d+"eq"]=n({args:["array"],body:{args:["a"],body:"a\x3d"+e+"a"},rvalue:!0,
count:2,funcName:d+"eq"})}})();var h={and:"\x26\x26",or:"||",eq:"\x3d\x3d\x3d",neq:"!\x3d\x3d",lt:"\x3c",gt:"\x3e",leq:"\x3c\x3d",geq:"\x3e\x3d"};(function(){for(var d in h){var e=h[d];G[d]=n({args:["array","array","array"],body:{args:["a","b","c"],body:"a\x3db"+e+"c"},funcName:d});G[d+"s"]=n({args:["array","array","scalar"],body:{args:["a","b","s"],body:"a\x3db"+e+"s"},funcName:d+"s"});G[d+"eq"]=n({args:["array","array"],body:{args:["a","b"],body:"a\x3da"+e+"b"},rvalue:!0,count:2,funcName:d+"eq"});
G[d+"seq"]=n({args:["array","scalar"],body:{args:["a","s"],body:"a\x3da"+e+"s"},rvalue:!0,count:2,funcName:d+"seq"})}})();var r="abs acos asin atan ceil cos exp floor log round sin sqrt tan".split(" ");(function(){for(var d=0;d<r.length;++d){var e=r[d];G[e]=n({args:["array","array"],pre:{args:[],body:"this_f\x3dMath."+e,thisVars:["this_f"]},body:{args:["a","b"],body:"a\x3dthis_f(b)",thisVars:["this_f"]},funcName:e});G[e+"eq"]=n({args:["array"],pre:{args:[],body:"this_f\x3dMath."+e,thisVars:["this_f"]},
body:{args:["a"],body:"a\x3dthis_f(a)",thisVars:["this_f"]},rvalue:!0,count:2,funcName:e+"eq"})}})();var l=["max","min","atan2","pow"];(function(){for(var d=0;d<l.length;++d){var e=l[d];G[e]=n({args:["array","array","array"],pre:{args:[],body:"this_f\x3dMath."+e,thisVars:["this_f"]},body:{args:["a","b","c"],body:"a\x3dthis_f(b,c)",thisVars:["this_f"]},funcName:e});G[e+"s"]=n({args:["array","array","scalar"],pre:{args:[],body:"this_f\x3dMath."+e,thisVars:["this_f"]},body:{args:["a","b","c"],body:"a\x3dthis_f(b,c)",
thisVars:["this_f"]},funcName:e+"s"});G[e+"eq"]=n({args:["array","array"],pre:{args:[],body:"this_f\x3dMath."+e,thisVars:["this_f"]},body:{args:["a","b"],body:"a\x3dthis_f(a,b)",thisVars:["this_f"]},rvalue:!0,count:2,funcName:e+"eq"});G[e+"seq"]=n({args:["array","scalar"],pre:{args:[],body:"this_f\x3dMath."+e,thisVars:["this_f"]},body:{args:["a","b"],body:"a\x3dthis_f(a,b)",thisVars:["this_f"]},rvalue:!0,count:2,funcName:e+"seq"})}})();var c=["atan2","pow"];(function(){for(var d=0;d<c.length;++d){var e=
c[d];G[e+"op"]=n({args:["array","array","array"],pre:{args:[],body:"this_f\x3dMath."+e,thisVars:["this_f"]},body:{args:["a","b","c"],body:"a\x3dthis_f(c,b)",thisVars:["this_f"]},funcName:e+"op"});G[e+"ops"]=n({args:["array","array","scalar"],pre:{args:[],body:"this_f\x3dMath."+e,thisVars:["this_f"]},body:{args:["a","b","c"],body:"a\x3dthis_f(c,b)",thisVars:["this_f"]},funcName:e+"ops"});G[e+"opeq"]=n({args:["array","array"],pre:{args:[],body:"this_f\x3dMath."+e,thisVars:["this_f"]},body:{args:["a",
"b"],body:"a\x3dthis_f(b,a)",thisVars:["this_f"]},rvalue:!0,count:2,funcName:e+"opeq"});G[e+"opseq"]=n({args:["array","scalar"],pre:{args:[],body:"this_f\x3dMath."+e,thisVars:["this_f"]},body:{args:["a","b"],body:"a\x3dthis_f(b,a)",thisVars:["this_f"]},rvalue:!0,count:2,funcName:e+"opseq"})}})();G.any=k({args:["array"],pre:m,body:{args:[{name:"a",lvalue:!1,rvalue:!0,count:1}],body:"if(a){return true}",localVars:[],thisVars:[]},post:{args:[],localVars:[],thisVars:[],body:"return false"},funcName:"any"});
G.all=k({args:["array"],pre:m,body:{args:[{name:"x",lvalue:!1,rvalue:!0,count:1}],body:"if(!x){return false}",localVars:[],thisVars:[]},post:{args:[],localVars:[],thisVars:[],body:"return true"},funcName:"all"});G.sum=k({args:["array"],pre:{args:[],localVars:[],thisVars:["this_s"],body:"this_s\x3d0"},body:{args:[{name:"a",lvalue:!1,rvalue:!0,count:1}],body:"this_s+\x3da",localVars:[],thisVars:["this_s"]},post:{args:[],localVars:[],thisVars:["this_s"],body:"return this_s"},funcName:"sum"});G.prod=
k({args:["array"],pre:{args:[],localVars:[],thisVars:["this_s"],body:"this_s\x3d1"},body:{args:[{name:"a",lvalue:!1,rvalue:!0,count:1}],body:"this_s*\x3da",localVars:[],thisVars:["this_s"]},post:{args:[],localVars:[],thisVars:["this_s"],body:"return this_s"},funcName:"prod"});G.norm2squared=k({args:["array"],pre:{args:[],localVars:[],thisVars:["this_s"],body:"this_s\x3d0"},body:{args:[{name:"a",lvalue:!1,rvalue:!0,count:2}],body:"this_s+\x3da*a",localVars:[],thisVars:["this_s"]},post:{args:[],localVars:[],
thisVars:["this_s"],body:"return this_s"},funcName:"norm2squared"});G.norm2=k({args:["array"],pre:{args:[],localVars:[],thisVars:["this_s"],body:"this_s\x3d0"},body:{args:[{name:"a",lvalue:!1,rvalue:!0,count:2}],body:"this_s+\x3da*a",localVars:[],thisVars:["this_s"]},post:{args:[],localVars:[],thisVars:["this_s"],body:"return Math.sqrt(this_s)"},funcName:"norm2"});G.norminf=k({args:["array"],pre:{args:[],localVars:[],thisVars:["this_s"],body:"this_s\x3d0"},body:{args:[{name:"a",lvalue:!1,rvalue:!0,
count:4}],body:"if(-a\x3ethis_s){this_s\x3d-a}else if(a\x3ethis_s){this_s\x3da}",localVars:[],thisVars:["this_s"]},post:{args:[],localVars:[],thisVars:["this_s"],body:"return this_s"},funcName:"norminf"});G.norm1=k({args:["array"],pre:{args:[],localVars:[],thisVars:["this_s"],body:"this_s\x3d0"},body:{args:[{name:"a",lvalue:!1,rvalue:!0,count:3}],body:"this_s+\x3da\x3c0?-a:a",localVars:[],thisVars:["this_s"]},post:{args:[],localVars:[],thisVars:["this_s"],body:"return this_s"},funcName:"norm1"});
G.sup=k({args:["array"],pre:{body:"this_h\x3d-Infinity",args:[],thisVars:["this_h"],localVars:[]},body:{body:"if(_inline_1_arg0_\x3ethis_h)this_h\x3d_inline_1_arg0_",args:[{name:"_inline_1_arg0_",lvalue:!1,rvalue:!0,count:2}],thisVars:["this_h"],localVars:[]},post:{body:"return this_h",args:[],thisVars:["this_h"],localVars:[]}});G.inf=k({args:["array"],pre:{body:"this_h\x3dInfinity",args:[],thisVars:["this_h"],localVars:[]},body:{body:"if(_inline_1_arg0_\x3cthis_h)this_h\x3d_inline_1_arg0_",args:[{name:"_inline_1_arg0_",
lvalue:!1,rvalue:!0,count:2}],thisVars:["this_h"],localVars:[]},post:{body:"return this_h",args:[],thisVars:["this_h"],localVars:[]}});G.argmin=k({args:["index","array","shape"],pre:{body:"{this_v\x3dInfinity;this_i\x3d_inline_0_arg2_.slice(0)}",args:[{name:"_inline_0_arg0_",lvalue:!1,rvalue:!1,count:0},{name:"_inline_0_arg1_",lvalue:!1,rvalue:!1,count:0},{name:"_inline_0_arg2_",lvalue:!1,rvalue:!0,count:1}],thisVars:["this_i","this_v"],localVars:[]},body:{body:"{if(_inline_1_arg1_\x3cthis_v){this_v\x3d_inline_1_arg1_;for(var _inline_1_k\x3d0;_inline_1_k\x3c_inline_1_arg0_.length;++_inline_1_k){this_i[_inline_1_k]\x3d_inline_1_arg0_[_inline_1_k]}}}",
args:[{name:"_inline_1_arg0_",lvalue:!1,rvalue:!0,count:2},{name:"_inline_1_arg1_",lvalue:!1,rvalue:!0,count:2}],thisVars:["this_i","this_v"],localVars:["_inline_1_k"]},post:{body:"{return this_i}",args:[],thisVars:["this_i"],localVars:[]}});G.argmax=k({args:["index","array","shape"],pre:{body:"{this_v\x3d-Infinity;this_i\x3d_inline_0_arg2_.slice(0)}",args:[{name:"_inline_0_arg0_",lvalue:!1,rvalue:!1,count:0},{name:"_inline_0_arg1_",lvalue:!1,rvalue:!1,count:0},{name:"_inline_0_arg2_",lvalue:!1,rvalue:!0,
count:1}],thisVars:["this_i","this_v"],localVars:[]},body:{body:"{if(_inline_1_arg1_\x3ethis_v){this_v\x3d_inline_1_arg1_;for(var _inline_1_k\x3d0;_inline_1_k\x3c_inline_1_arg0_.length;++_inline_1_k){this_i[_inline_1_k]\x3d_inline_1_arg0_[_inline_1_k]}}}",args:[{name:"_inline_1_arg0_",lvalue:!1,rvalue:!0,count:2},{name:"_inline_1_arg1_",lvalue:!1,rvalue:!0,count:2}],thisVars:["this_i","this_v"],localVars:["_inline_1_k"]},post:{body:"{return this_i}",args:[],thisVars:["this_i"],localVars:[]}});G.random=
n({args:["array"],pre:{args:[],body:"this_f\x3dMath.random",thisVars:["this_f"]},body:{args:["a"],body:"a\x3dthis_f()",thisVars:["this_f"]},funcName:"random"});G.assign=n({args:["array","array"],body:{args:["a","b"],body:"a\x3db"},funcName:"assign"});G.assigns=n({args:["array","scalar"],body:{args:["a","b"],body:"a\x3db"},funcName:"assigns"});G.equals=k({args:["array","array"],pre:m,body:{args:[{name:"x",lvalue:!1,rvalue:!0,count:1},{name:"y",lvalue:!1,rvalue:!0,count:1}],body:"if(x!\x3d\x3dy){return false}",
localVars:[],thisVars:[]},post:{args:[],localVars:[],thisVars:[],body:"return true"},funcName:"equals"})},{"cwise-compiler":157}],479:[function(b,N,G){var p=b("ndarray"),n=b("./doConvert.js");N.exports=function(k,m){for(var a=[],g=k,h=1;Array.isArray(g);)a.push(g.length),h*=g.length,g=g[0];if(0===a.length)return p();m||(m=p(new Float64Array(h),a));n(m,k);return m}},{"./doConvert.js":480,ndarray:483}],480:[function(b,N,G){N.exports=b("cwise-compiler")({args:["array","scalar","index"],pre:{body:"{}",
args:[],thisVars:[],localVars:[]},body:{body:"{\nvar _inline_1_v\x3d_inline_1_arg1_,_inline_1_i\nfor(_inline_1_i\x3d0;_inline_1_i\x3c_inline_1_arg2_.length-1;++_inline_1_i) {\n_inline_1_v\x3d_inline_1_v[_inline_1_arg2_[_inline_1_i]]\n}\n_inline_1_arg0_\x3d_inline_1_v[_inline_1_arg2_[_inline_1_arg2_.length-1]]\n}",args:[{name:"_inline_1_arg0_",lvalue:!0,rvalue:!1,count:1},{name:"_inline_1_arg1_",lvalue:!1,rvalue:!0,count:1},{name:"_inline_1_arg2_",lvalue:!1,rvalue:!0,count:4}],thisVars:[],localVars:["_inline_1_i",
"_inline_1_v"]},post:{body:"{}",args:[],thisVars:[],localVars:[]},funcName:"convert",blockSize:64})},{"cwise-compiler":157}],481:[function(b,N,G){function p(g){switch(g){case "uint8":return[a.mallocUint8,a.freeUint8];case "uint16":return[a.mallocUint16,a.freeUint16];case "uint32":return[a.mallocUint32,a.freeUint32];case "int8":return[a.mallocInt8,a.freeInt8];case "int16":return[a.mallocInt16,a.freeInt16];case "int32":return[a.mallocInt32,a.freeInt32];case "float32":return[a.mallocFloat,a.freeFloat];
case "float64":return[a.mallocDouble,a.freeDouble];default:return null}}function n(g){for(var h=[],r=0;r<g;++r)h.push("s"+r);for(r=0;r<g;++r)h.push("n"+r);for(r=1;r<g;++r)h.push("d"+r);for(r=1;r<g;++r)h.push("e"+r);for(r=1;r<g;++r)h.push("f"+r);return h}function k(g,h){function r(x){return"generic"===h?["data.get(",x,")"].join(""):["data[",x,"]"].join("")}function l(x,z){return"generic"===h?["data.set(",x,",",z,")"].join(""):["data[",x,"]\x3d",z].join("")}var c=["'use strict'"],d=["ndarrayInsertionSort",
g.join("d"),h].join(""),e=["left","right","data","offset"].concat(n(g.length)),f=p(h),q=["i,j,cptr,ptr\x3dleft*s0+offset"];if(1<g.length){for(var t=[],w=1;w<g.length;++w)q.push("i"+w),t.push("n"+w);f?q.push("scratch\x3dmalloc("+t.join("*")+")"):q.push("scratch\x3dnew Array("+t.join("*")+")");q.push("dptr","sptr","a","b")}else q.push("scratch");c.push(["function ",d,"(",e.join(","),"){var ",q.join(",")].join(""),"for(i\x3dleft+1;i\x3c\x3dright;++i){","j\x3di;ptr+\x3ds0","cptr\x3dptr");if(1<g.length){c.push("dptr\x3d0;sptr\x3dptr");
for(w=g.length-1;0<=w;--w)e=g[w],0!==e&&c.push(["for(i",e,"\x3d0;i",e,"\x3cn",e,";++i",e,"){"].join(""));c.push("scratch[dptr++]\x3d",r("sptr"));for(w=0;w<g.length;++w)e=g[w],0!==e&&c.push("sptr+\x3dd"+e,"}");c.push("__g:while(j--\x3eleft){","dptr\x3d0","sptr\x3dcptr-s0");for(w=1;w<g.length;++w)1===w&&c.push("__l:"),c.push(["for(i",w,"\x3d0;i",w,"\x3cn",w,";++i",w,"){"].join(""));c.push(["a\x3d",r("sptr"),"\nb\x3dscratch[dptr]\nif(a\x3cb){break __g}\nif(a\x3eb){break __l}"].join(""));for(w=g.length-
1;1<=w;--w)c.push("sptr+\x3de"+w,"dptr+\x3df"+w,"}");c.push("dptr\x3dcptr;sptr\x3dcptr-s0");for(w=g.length-1;0<=w;--w)e=g[w],0!==e&&c.push(["for(i",e,"\x3d0;i",e,"\x3cn",e,";++i",e,"){"].join(""));c.push(l("dptr",r("sptr")));for(w=0;w<g.length;++w)e=g[w],0!==e&&c.push(["dptr+\x3dd",e,";sptr+\x3dd",e].join(""),"}");c.push("cptr-\x3ds0\n}");c.push("dptr\x3dcptr;sptr\x3d0");for(w=g.length-1;0<=w;--w)e=g[w],0!==e&&c.push(["for(i",e,"\x3d0;i",e,"\x3cn",e,";++i",e,"){"].join(""));c.push(l("dptr","scratch[sptr++]"));
for(w=0;w<g.length;++w)e=g[w],0!==e&&c.push("dptr+\x3dd"+e,"}")}else c.push("scratch\x3d"+r("ptr"),"while((j--\x3eleft)\x26\x26("+r("cptr-s0")+"\x3escratch)){",l("cptr",r("cptr-s0")),"cptr-\x3ds0","}",l("cptr","scratch"));c.push("}");1<g.length&&f&&c.push("free(scratch)");c.push("} return "+d);if(f)return g=new Function("malloc","free",c.join("\n")),g(f[0],f[1]);g=new Function(c.join("\n"));return g()}function m(g,h,r){function l(I){return["(offset+",I,"*s0)"].join("")}function c(I){return"generic"===
h?["data.get(",I,")"].join(""):["data[",I,"]"].join("")}function d(I,L){return"generic"===h?["data.set(",I,",",L,")"].join(""):["data[",I,"]\x3d",L].join("")}function e(I,L,Q){if(1===I.length)y.push("ptr0\x3d"+l(I[0]));else for(var Z=0;Z<I.length;++Z)y.push(["b_ptr",Z,"\x3ds0*",I[Z]].join(""));L&&y.push("pivot_ptr\x3d0");y.push("ptr_shift\x3doffset");for(Z=g.length-1;0<=Z;--Z){var ba=g[Z];0!==ba&&y.push(["for(i",ba,"\x3d0;i",ba,"\x3cn",ba,";++i",ba,"){"].join(""))}if(1<I.length)for(Z=0;Z<I.length;++Z)y.push(["ptr",
Z,"\x3db_ptr",Z,"+ptr_shift"].join(""));y.push(Q);L&&y.push("++pivot_ptr");for(Z=0;Z<g.length;++Z)ba=g[Z],0!==ba&&(1<I.length?y.push("ptr_shift+\x3dd"+ba):y.push("ptr0+\x3dd"+ba),y.push("}"))}function f(I,L,Q,Z){if(1===L.length)y.push("ptr0\x3d"+l(L[0]));else{for(var ba=0;ba<L.length;++ba)y.push(["b_ptr",ba,"\x3ds0*",L[ba]].join(""));y.push("ptr_shift\x3doffset")}Q&&y.push("pivot_ptr\x3d0");I&&y.push(I+":");for(ba=1;ba<g.length;++ba)y.push(["for(i",ba,"\x3d0;i",ba,"\x3cn",ba,";++i",ba,"){"].join(""));
if(1<L.length)for(ba=0;ba<L.length;++ba)y.push(["ptr",ba,"\x3db_ptr",ba,"+ptr_shift"].join(""));y.push(Z);for(ba=g.length-1;1<=ba;--ba)Q&&y.push("pivot_ptr+\x3df"+ba),1<L.length?y.push("ptr_shift+\x3de"+ba):y.push("ptr0+\x3de"+ba),y.push("}")}function q(){1<g.length&&K&&y.push("free(pivot1)","free(pivot2)")}function t(I,L){I="el"+I;L="el"+L;if(1<g.length){var Q="__l"+ ++M;f(Q,[I,L],!1,["comp\x3d",c("ptr0"),"-",c("ptr1"),"\nif(comp\x3e0){tmp0\x3d",I,";",I,"\x3d",L,";",L,"\x3dtmp0;break ",Q,"}\nif(comp\x3c0){break ",
Q,"}"].join(""))}else y.push(["if(",c(l(I)),"\x3e",c(l(L)),"){tmp0\x3d",I,";",I,"\x3d",L,";",L,"\x3dtmp0}"].join(""))}function w(I,L){1<g.length?e([I,L],!1,d("ptr0",c("ptr1"))):y.push(d(l(I),c(l(L))))}function x(I,L,Q){if(1<g.length){var Z="__l"+ ++M;f(Z,[L],!0,[I,"\x3d",c("ptr0"),"-pivot",Q,"[pivot_ptr]\nif(",I,"!\x3d\x3d0){break ",Z,"}"].join(""))}else y.push([I,"\x3d",c(l(L)),"-pivot",Q].join(""))}function z(I,L){1<g.length?e([I,L],!1,["tmp\x3d",c("ptr0"),"\n",d("ptr0",c("ptr1")),"\n",d("ptr1",
"tmp")].join("")):y.push(["ptr0\x3d",l(I),"\nptr1\x3d",l(L),"\ntmp\x3d",c("ptr0"),"\n",d("ptr0",c("ptr1")),"\n",d("ptr1","tmp")].join(""))}function B(I,L,Q){1<g.length?(e([I,L,Q],!1,["tmp\x3d",c("ptr0"),"\n",d("ptr0",c("ptr1")),"\n",d("ptr1",c("ptr2")),"\n",d("ptr2","tmp")].join("")),y.push("++"+L,"--"+Q)):y.push(["ptr0\x3d",l(I),"\nptr1\x3d",l(L),"\nptr2\x3d",l(Q),"\n++",L,"\n--",Q,"\ntmp\x3d",c("ptr0"),"\n",d("ptr0",c("ptr1")),"\n",d("ptr1",c("ptr2")),"\n",d("ptr2","tmp")].join(""))}function A(I,
L){z(I,L);y.push("--"+L)}function D(I,L,Q){1<g.length?e([I,L],!0,[d("ptr0",c("ptr1")),"\n",d("ptr1",["pivot",Q,"[pivot_ptr]"].join(""))].join("")):y.push(d(l(I),c(l(L))),d(l(L),"pivot"+Q))}function C(I,L){y.push(["if((",L,"-",I,")\x3c\x3d32){\ninsertionSort(",I,",",L,",data,offset,",n(g.length).join(","),")\n}else{\n",F,"(",I,",",L,",data,offset,",n(g.length).join(","),")\n}"].join(""))}function v(I,L,Q){1<g.length?(y.push(["__l",++M,":while(true){"].join("")),e([I],!0,["if(",c("ptr0"),"!\x3d\x3dpivot",
L,"[pivot_ptr]){break __l",M,"}"].join("")),y.push(Q,"}")):y.push(["while(",c(l(I)),"\x3d\x3d\x3dpivot",L,"){",Q,"}"].join(""))}var y=["'use strict'"],F=["ndarrayQuickSort",g.join("d"),h].join(""),J=["left","right","data","offset"].concat(n(g.length)),K=p(h),M=0;y.push(["function ",F,"(",J.join(","),"){"].join(""));J="sixth\x3d((right-left+1)/6)|0 index1\x3dleft+sixth index5\x3dright-sixth index3\x3d(left+right)\x3e\x3e1 index2\x3dindex3-sixth index4\x3dindex3+sixth el1\x3dindex1 el2\x3dindex2 el3\x3dindex3 el4\x3dindex4 el5\x3dindex5 less\x3dleft+1 great\x3dright-1 pivots_are_equal\x3dtrue tmp tmp0 x y z k ptr0 ptr1 ptr2 comp_pivot1\x3d0 comp_pivot2\x3d0 comp\x3d0".split(" ");
if(1<g.length){for(var H=[],O=1;O<g.length;++O)H.push("n"+O),J.push("i"+O);for(O=0;8>O;++O)J.push("b_ptr"+O);J.push("ptr3","ptr4","ptr5","ptr6","ptr7","pivot_ptr","ptr_shift","elementSize\x3d"+H.join("*"));K?J.push("pivot1\x3dmalloc(elementSize)","pivot2\x3dmalloc(elementSize)"):J.push("pivot1\x3dnew Array(elementSize),pivot2\x3dnew Array(elementSize)")}else J.push("pivot1","pivot2");y.push("var "+J.join(","));t(1,2);t(4,5);t(1,3);t(2,3);t(1,4);t(3,4);t(2,5);t(2,3);t(4,5);1<g.length?e("el1 el2 el3 el4 el5 index1 index3 index5".split(" "),
!0,["pivot1[pivot_ptr]\x3d",c("ptr1"),"\npivot2[pivot_ptr]\x3d",c("ptr3"),"\npivots_are_equal\x3dpivots_are_equal\x26\x26(pivot1[pivot_ptr]\x3d\x3d\x3dpivot2[pivot_ptr])\nx\x3d",c("ptr0"),"\ny\x3d",c("ptr2"),"\nz\x3d",c("ptr4"),"\n",d("ptr5","x"),"\n",d("ptr6","y"),"\n",d("ptr7","z")].join("")):y.push(["pivot1\x3d",c(l("el2")),"\npivot2\x3d",c(l("el4")),"\npivots_are_equal\x3dpivot1\x3d\x3d\x3dpivot2\nx\x3d",c(l("el1")),"\ny\x3d",c(l("el3")),"\nz\x3d",c(l("el5")),"\n",d(l("index1"),"x"),"\n",d(l("index3"),
"y"),"\n",d(l("index5"),"z")].join(""));w("index2","left");w("index4","right");y.push("if(pivots_are_equal){");y.push("for(k\x3dless;k\x3c\x3dgreat;++k){");x("comp","k",1);y.push("if(comp\x3d\x3d\x3d0){continue}");y.push("if(comp\x3c0){");y.push("if(k!\x3d\x3dless){");z("k","less");y.push("}");y.push("++less");y.push("}else{");y.push("while(true){");x("comp","great",1);y.push("if(comp\x3e0){");y.push("great--");y.push("}else if(comp\x3c0){");B("k","less","great");y.push("break");y.push("}else{");
A("k","great");y.push("break");y.push("}");y.push("}");y.push("}");y.push("}");y.push("}else{");y.push("for(k\x3dless;k\x3c\x3dgreat;++k){");x("comp_pivot1","k",1);y.push("if(comp_pivot1\x3c0){");y.push("if(k!\x3d\x3dless){");z("k","less");y.push("}");y.push("++less");y.push("}else{");x("comp_pivot2","k",2);y.push("if(comp_pivot2\x3e0){");y.push("while(true){");x("comp","great",2);y.push("if(comp\x3e0){");y.push("if(--great\x3ck){break}");y.push("continue");y.push("}else{");x("comp","great",1);y.push("if(comp\x3c0){");
B("k","less","great");y.push("}else{");A("k","great");y.push("}");y.push("break");y.push("}");y.push("}");y.push("}");y.push("}");y.push("}");y.push("}");D("left","(less-1)",1);D("right","(great+1)",2);C("left","(less-2)");C("(great+2)","right");y.push("if(pivots_are_equal){");q();y.push("return");y.push("}");y.push("if(less\x3cindex1\x26\x26great\x3eindex5){");v("less",1,"++less");v("great",2,"--great");y.push("for(k\x3dless;k\x3c\x3dgreat;++k){");x("comp_pivot1","k",1);y.push("if(comp_pivot1\x3d\x3d\x3d0){");
y.push("if(k!\x3d\x3dless){");z("k","less");y.push("}");y.push("++less");y.push("}else{");x("comp_pivot2","k",2);y.push("if(comp_pivot2\x3d\x3d\x3d0){");y.push("while(true){");x("comp","great",2);y.push("if(comp\x3d\x3d\x3d0){");y.push("if(--great\x3ck){break}");y.push("continue");y.push("}else{");x("comp","great",1);y.push("if(comp\x3c0){");B("k","less","great");y.push("}else{");A("k","great");y.push("}");y.push("break");y.push("}");y.push("}");y.push("}");y.push("}");y.push("}");y.push("}");q();
C("less","great");y.push("}return "+F);if(1<g.length&&K)return J=new Function("insertionSort","malloc","free",y.join("\n")),J(r,K[0],K[1]);J=new Function("insertionSort",y.join("\n"));return J(r)}var a=b("typedarray-pool");N.exports=function(g,h){var r=["'use strict'"],l=["ndarraySortWrapper",g.join("d"),h].join("");r.push(["function ",l,"(array){"].join(""));for(var c=["data\x3darray.data,offset\x3darray.offset|0,shape\x3darray.shape,stride\x3darray.stride"],d=0;d<g.length;++d)c.push(["s",d,"\x3dstride[",
d,"]|0,n",d,"\x3dshape[",d,"]|0"].join(""));var e=Array(g.length),f=[];for(d=0;d<g.length;++d){var q=g[d];0!==q&&(e[q]=0===f.length?"1":f.join("*"),f.push("n"+q))}var t=f=-1;for(d=0;d<g.length;++d)q=g[d],0!==q&&(0<f?c.push(["d",q,"\x3ds",q,"-d",f,"*n",f].join("")):c.push(["d",q,"\x3ds",q].join("")),f=q),q=g.length-1-d,0!==q&&(0<t?c.push(["e",q,"\x3ds",q,"-e",t,"*n",t,",f",q,"\x3d",e[q],"-f",t,"*n",t].join("")):c.push(["e",q,"\x3ds",q,",f",q,"\x3d",e[q]].join("")),t=q);r.push("var "+c.join(","));c=
["0","n0-1","data","offset"].concat(n(g.length));r.push(["if(n0\x3c\x3d32){insertionSort(",c.join(","),")}else{quickSort(",c.join(","),")}"].join(""));r.push("}return "+l);r=new Function("insertionSort","quickSort",r.join("\n"));l=k(g,h);g=m(g,h,l);return r(l,g)}},{"typedarray-pool":617}],482:[function(b,N,G){var p=b("./lib/compile_sort.js"),n={};N.exports=function(k){var m=k.order,a=k.dtype,g=[m,a].join(":"),h=n[g];h||(n[g]=h=p(m,a));h(k);return k}},{"./lib/compile_sort.js":481}],483:[function(b,
N,G){function p(l,c){return l[0]-c[0]}function n(){var l=this.stride,c=Array(l.length),d;for(d=0;d<c.length;++d)c[d]=[Math.abs(l[d]),d];c.sort(p);l=Array(c.length);for(d=0;d<l.length;++d)l[d]=c[d][1];return l}function k(l,c){var d=["View",c,"d",l].join("");0>c&&(d="View_Nil"+l);var e="generic"===l;if(-1===c)return c=new Function("function "+d+"(a){this.data\x3da;};var proto\x3d"+d+".prototype;proto.dtype\x3d'"+l+"';proto.index\x3dfunction(){return -1};proto.size\x3d0;proto.dimension\x3d-1;proto.shape\x3dproto.stride\x3dproto.order\x3d[];proto.lo\x3dproto.hi\x3dproto.transpose\x3dproto.step\x3dfunction(){return new "+
d+"(this.data);};proto.get\x3dproto.set\x3dfunction(){};proto.pick\x3dfunction(){return null};return function construct_"+d+"(a){return new "+d+"(a);}"),c();if(0===c)return c=new Function("TrivialArray","function "+d+"(a,d) {this.data \x3d a;this.offset \x3d d};var proto\x3d"+d+".prototype;proto.dtype\x3d'"+l+"';proto.index\x3dfunction(){return this.offset};proto.dimension\x3d0;proto.size\x3d1;proto.shape\x3dproto.stride\x3dproto.order\x3d[];proto.lo\x3dproto.hi\x3dproto.transpose\x3dproto.step\x3dfunction "+
d+"_copy() {return new "+d+"(this.data,this.offset)};proto.pick\x3dfunction "+d+"_pick(){return TrivialArray(this.data);};proto.valueOf\x3dproto.get\x3dfunction "+d+"_get(){return "+(e?"this.data.get(this.offset)":"this.data[this.offset]")+"};proto.set\x3dfunction "+d+"_set(v){return "+(e?"this.data.set(this.offset,v)":"this.data[this.offset]\x3dv")+"};return function construct_"+d+"(a,b,c,d){return new "+d+"(a,d)}"),c(r[l][0]);var f=["'use strict'"];var q=a(c),t=q.map(function(B){return"i"+B}),w=
"this.offset+"+q.map(function(B){return"this.stride["+B+"]*i"+B}).join("+"),x=q.map(function(B){return"b"+B}).join(","),z=q.map(function(B){return"c"+B}).join(",");f.push("function "+d+"(a,"+x+","+z+",d){this.data\x3da","this.shape\x3d["+x+"]","this.stride\x3d["+z+"]","this.offset\x3dd|0}","var proto\x3d"+d+".prototype","proto.dtype\x3d'"+l+"'","proto.dimension\x3d"+c);f.push("Object.defineProperty(proto,'size',{get:function "+d+"_size(){return "+q.map(function(B){return"this.shape["+B+"]"}).join("*"),
"}})");1===c?f.push("proto.order\x3d[0]"):(f.push("Object.defineProperty(proto,'order',{get:"),4>c?(f.push("function "+d+"_order(){"),2===c?f.push("return (Math.abs(this.stride[0])\x3eMath.abs(this.stride[1]))?[1,0]:[0,1]}})"):3===c&&f.push("var s0\x3dMath.abs(this.stride[0]),s1\x3dMath.abs(this.stride[1]),s2\x3dMath.abs(this.stride[2]);if(s0\x3es1){if(s1\x3es2){return [2,1,0];}else if(s0\x3es2){return [1,2,0];}else{return [1,0,2];}}else if(s0\x3es2){return [2,0,1];}else if(s2\x3es1){return [0,1,2];}else{return [0,2,1];}}})")):
f.push("ORDER})"));f.push("proto.set\x3dfunction "+d+"_set("+t.join(",")+",v){");e?f.push("return this.data.set("+w+",v)}"):f.push("return this.data["+w+"]\x3dv}");f.push("proto.get\x3dfunction "+d+"_get("+t.join(",")+"){");e?f.push("return this.data.get("+w+")}"):f.push("return this.data["+w+"]}");f.push("proto.index\x3dfunction "+d+"_index(",t.join(),"){return "+w+"}");f.push("proto.hi\x3dfunction "+d+"_hi("+t.join(",")+"){return new "+d+"(this.data,"+q.map(function(B){return["(typeof i",B,"!\x3d\x3d'number'||i",
B,"\x3c0)?this.shape[",B,"]:i",B,"|0"].join("")}).join(",")+","+q.map(function(B){return"this.stride["+B+"]"}).join(",")+",this.offset)}");e=q.map(function(B){return"a"+B+"\x3dthis.shape["+B+"]"});w=q.map(function(B){return"c"+B+"\x3dthis.stride["+B+"]"});f.push("proto.lo\x3dfunction "+d+"_lo("+t.join(",")+"){var b\x3dthis.offset,d\x3d0,"+e.join(",")+","+w.join(","));for(e=0;e<c;++e)f.push("if(typeof i"+e+"\x3d\x3d\x3d'number'\x26\x26i"+e+"\x3e\x3d0){d\x3di"+e+"|0;b+\x3dc"+e+"*d;a"+e+"-\x3dd}");f.push("return new "+
d+"(this.data,"+q.map(function(B){return"a"+B}).join(",")+","+q.map(function(B){return"c"+B}).join(",")+",b)}");f.push("proto.step\x3dfunction "+d+"_step("+t.join(",")+"){var "+q.map(function(B){return"a"+B+"\x3dthis.shape["+B+"]"}).join(",")+","+q.map(function(B){return"b"+B+"\x3dthis.stride["+B+"]"}).join(",")+",c\x3dthis.offset,d\x3d0,ceil\x3dMath.ceil");for(e=0;e<c;++e)f.push("if(typeof i"+e+"\x3d\x3d\x3d'number'){d\x3di"+e+"|0;if(d\x3c0){c+\x3db"+e+"*(a"+e+"-1);a"+e+"\x3dceil(-a"+e+"/d)}else{a"+
e+"\x3dceil(a"+e+"/d)}b"+e+"*\x3dd}");f.push("return new "+d+"(this.data,"+q.map(function(B){return"a"+B}).join(",")+","+q.map(function(B){return"b"+B}).join(",")+",c)}");w=Array(c);x=Array(c);for(e=0;e<c;++e)w[e]="a[i"+e+"]",x[e]="b[i"+e+"]";f.push("proto.transpose\x3dfunction "+d+"_transpose("+t+"){"+t.map(function(B,A){return B+"\x3d("+B+"\x3d\x3d\x3dundefined?"+A+":"+B+"|0)"}).join(";"),"var a\x3dthis.shape,b\x3dthis.stride;return new "+d+"(this.data,"+w.join(",")+","+x.join(",")+",this.offset)}");
f.push("proto.pick\x3dfunction "+d+"_pick("+t+"){var a\x3d[],b\x3d[],c\x3dthis.offset");for(e=0;e<c;++e)f.push("if(typeof i"+e+"\x3d\x3d\x3d'number'\x26\x26i"+e+"\x3e\x3d0){c\x3d(c+this.stride["+e+"]*i"+e+")|0}else{a.push(this.shape["+e+"]);b.push(this.stride["+e+"])}");f.push("var ctor\x3dCTOR_LIST[a.length+1];return ctor(this.data,a,b,c)}");f.push("return function construct_"+d+"(data,shape,stride,offset){return new "+d+"(data,"+q.map(function(B){return"shape["+B+"]"}).join(",")+","+q.map(function(B){return"stride["+
B+"]"}).join(",")+",offset)}");c=new Function("CTOR_LIST","ORDER",f.join("\n"));return c(r[l],n)}function m(l){if(g(l))return"buffer";if(h)switch(Object.prototype.toString.call(l)){case "[object Float64Array]":return"float64";case "[object Float32Array]":return"float32";case "[object Int8Array]":return"int8";case "[object Int16Array]":return"int16";case "[object Int32Array]":return"int32";case "[object Uint8Array]":return"uint8";case "[object Uint16Array]":return"uint16";case "[object Uint32Array]":return"uint32";
case "[object Uint8ClampedArray]":return"uint8_clamped";case "[object BigInt64Array]":return"bigint64";case "[object BigUint64Array]":return"biguint64"}return Array.isArray(l)?"array":"generic"}var a=b("iota-array"),g=b("is-buffer"),h="undefined"!==typeof Float64Array,r={float32:[],float64:[],int8:[],int16:[],int32:[],uint8:[],uint16:[],uint32:[],array:[],uint8_clamped:[],bigint64:[],biguint64:[],buffer:[],generic:[]};(function(){for(var l in r)r[l].push(k(l,-1))});N.exports=function(l,c,d,e){if(void 0===
l){var f=r.array[0];return f([])}"number"===typeof l&&(l=[l]);void 0===c&&(c=[l.length]);f=c.length;if(void 0===d){d=Array(f);for(var q=f-1,t=1;0<=q;--q)d[q]=t,t*=c[q]}if(void 0===e)for(q=e=0;q<f;++q)0>d[q]&&(e-=(c[q]-1)*d[q]);q=m(l);for(t=r[q];t.length<=f+1;)t.push(k(q,t.length-1));f=t[f+1];return f(l,c,d,e)}},{"iota-array":451,"is-buffer":453}],484:[function(b,N,G){var p=b("double-bits"),n=Math.pow(2,-1074);N.exports=function(k,m){if(isNaN(k)||isNaN(m))return NaN;if(k===m)return k;if(0===k)return 0>
m?-n:n;var a=p.hi(k),g=p.lo(k);m>k===0<k?4294967295===g?(a+=1,g=0):g+=1:0===g?(g=4294967295,--a):--g;return p.pack(g,a)}},{"double-bits":182}],485:[function(b,N,G){function p(h,r,l,c){return["C",h,r,l,c,l,c]}function n(h,r,l,c,d,e){return["C",h/3+2/3*l,r/3+2/3*c,d/3+2/3*l,e/3+2/3*c,d,e]}function k(h,r,l,c,d,e,f,q,t,w){if(w)A=w[0],e=w[1],z=w[2],B=w[3];else{A=m(h,r,-d);h=A.x;r=A.y;A=m(q,t,-d);q=A.x;t=A.y;A=(h-q)/2;z=(r-t)/2;B=A*A/(l*l)+z*z/(c*c);1<B&&(B=Math.sqrt(B),l*=B,c*=B);B=l*l;var x=c*c;e=(e==
f?-1:1)*Math.sqrt(Math.abs((B*x-B*z*z-x*A*A)/(B*z*z+x*A*A)));Infinity==e&&(e=1);var z=e*l*z/c+(h+q)/2,B=e*-c*A/l+(r+t)/2,A=Math.asin(((r-B)/c).toFixed(9));e=Math.asin(((t-B)/c).toFixed(9));A=h<z?a-A:A;e=q<z?a-e:e;0>A&&(A=2*a+A);0>e&&(e=2*a+e);f&&A>e&&(A-=2*a);!f&&e>A&&(e-=2*a)}if(Math.abs(e-A)>g){var D=e;x=q;var C=t;e=A+g*(f&&e>A?1:-1);q=z+l*Math.cos(e);t=B+c*Math.sin(e);D=k(q,t,l,c,d,0,f,x,C,[e,D,z,B])}f=Math.tan((e-A)/4);l=4/3*l*f;c=4/3*c*f;h=[2*h-(h+l*Math.sin(A)),2*r-(r-c*Math.cos(A)),q+l*Math.sin(e),
t-c*Math.cos(e),q,t];if(w)return h;D&&(h=h.concat(D));for(w=0;w<h.length;)r=m(h[w],h[w+1],d),h[w++]=r.x,h[w++]=r.y;return h}function m(h,r,l){return{x:h*Math.cos(l)-r*Math.sin(l),y:h*Math.sin(l)+r*Math.cos(l)}}var a=Math.PI,g=a/180*120;N.exports=function(h){for(var r,l=[],c=0,d=0,e=0,f=0,q=null,t=null,w=0,x=0,z=0,B=h.length;z<B;z++){var A=h[z],D=A[0];switch(D){case "M":e=A[1];f=A[2];break;case "A":A=k(w,x,A[1],A[2],a/180*A[3],A[4],A[5],A[6],A[7]);A.unshift("C");7<A.length&&(l.push(A.splice(0,7)),
A.unshift("C"));break;case "S":if("C"==r||"S"==r)w+=w-c,x+=x-d;A=["C",w,x,A[1],A[2],A[3],A[4]];break;case "T":"Q"==r||"T"==r?(q=2*w-q,t=2*x-t):(q=w,t=x);A=n(w,x,q,t,A[1],A[2]);break;case "Q":q=A[1];t=A[2];A=n(w,x,A[1],A[2],A[3],A[4]);break;case "L":A=p(w,x,A[1],A[2]);break;case "H":A=p(w,x,A[1],x);break;case "V":A=p(w,x,w,A[1]);break;case "Z":A=p(w,x,e,f)}r=D;w=A[A.length-2];x=A[A.length-1];4<A.length?(c=A[A.length-4],d=A[A.length-3]):(c=w,d=x);l.push(A)}return l}},{}],486:[function(b,N,G){G.vertexNormals=
function(p,n,k){var m=n.length,a=Array(m);k=void 0===k?1E-6:k;for(var g=0;g<m;++g)a[g]=[0,0,0];for(g=0;g<p.length;++g)for(var h=p[g],r,l=h[h.length-1],c=h[0],d=0;d<h.length;++d){r=l;l=c;c=h[(d+1)%h.length];var e=n[r],f=n[l],q=n[c],t=Array(3),w=0,x=Array(3),z=0;for(r=0;3>r;++r)t[r]=e[r]-f[r],w+=t[r]*t[r],x[r]=q[r]-f[r],z+=x[r]*x[r];if(w*z>k)for(e=a[l],w=1/Math.sqrt(w*z),r=0;3>r;++r)z=(r+1)%3,f=(r+2)%3,e[r]+=w*(x[z]*t[f]-x[f]*t[z])}for(g=0;g<m;++g){e=a[g];for(r=p=0;3>r;++r)p+=e[r]*e[r];if(p>k)for(w=
1/Math.sqrt(p),r=0;3>r;++r)e[r]*=w;else for(r=0;3>r;++r)e[r]=0}return a};G.faceNormals=function(p,n,k){var m=p.length,a=Array(m);k=void 0===k?1E-6:k;for(var g=0;g<m;++g){for(var h=p[g],r=Array(3),l=0;3>l;++l)r[l]=n[h[l]];h=Array(3);var c=Array(3);for(l=0;3>l;++l)h[l]=r[1][l]-r[0][l],c[l]=r[2][l]-r[0][l];r=Array(3);var d=0;for(l=0;3>l;++l){var e=(l+1)%3,f=(l+2)%3;r[l]=h[e]*c[f]-h[f]*c[e];d+=r[l]*r[l]}d=d>k?1/Math.sqrt(d):0;for(l=0;3>l;++l)r[l]*=d;a[g]=r}return a}},{}],487:[function(b,N,G){var p=Object.getOwnPropertySymbols,
n=Object.prototype.hasOwnProperty,k=Object.prototype.propertyIsEnumerable;N.exports=function(){try{if(!Object.assign)return!1;var m=new String("abc");m[5]="de";if("5"===Object.getOwnPropertyNames(m)[0])return!1;var a={};for(m=0;10>m;m++)a["_"+String.fromCharCode(m)]=m;if("0123456789"!==Object.getOwnPropertyNames(a).map(function(h){return a[h]}).join(""))return!1;var g={};"abcdefghijklmnopqrst".split("").forEach(function(h){g[h]=h});return"abcdefghijklmnopqrst"!==Object.keys(Object.assign({},g)).join("")?
!1:!0}catch(h){return!1}}()?Object.assign:function(m,a){if(null===m||void 0===m)throw new TypeError("Object.assign cannot be called with null or undefined");var g=Object(m);for(var h,r=1;r<arguments.length;r++){var l=Object(arguments[r]);for(var c in l)n.call(l,c)&&(g[c]=l[c]);if(p){h=p(l);for(var d=0;d<h.length;d++)k.call(l,h[d])&&(g[h[d]]=l[h[d]])}}return g}},{}],488:[function(b,N,G){N.exports=function(p,n,k,m,a,g,h,r,l,c){var d=n+g+c;if(0<e){var e=Math.sqrt(d+1);p[0]=.5*(h-l)/e;p[1]=.5*(r-m)/e;
p[2]=.5*(k-g)/e;p[3]=.5*e}else c=Math.max(n,g,c),e=Math.sqrt(2*c-d+1),n>=c?(p[0]=.5*e,p[1]=.5*(a+k)/e,p[2]=.5*(r+m)/e,p[3]=.5*(h-l)/e):g>=c?(p[0]=.5*(k+a)/e,p[1]=.5*e,p[2]=.5*(l+h)/e,p[3]=.5*(r-m)/e):(p[0]=.5*(m+r)/e,p[1]=.5*(h+l)/e,p[2]=.5*e,p[3]=.5*(k-a)/e);return p}},{}],489:[function(b,N,G){function p(c,d,e){return Math.sqrt(Math.pow(c,2)+Math.pow(d,2)+Math.pow(e,2))}function n(c,d,e,f){return Math.sqrt(Math.pow(c,2)+Math.pow(d,2)+Math.pow(e,2)+Math.pow(f,2))}function k(c,d){var e=d[0],f=d[1],
q=d[2];d=d[3];var t=n(e,f,q,d);1E-6<t?(c[0]=e/t,c[1]=f/t,c[2]=q/t,c[3]=d/t):(c[0]=c[1]=c[2]=0,c[3]=1)}function m(c,d,e){this.radius=a([e]);this.center=a(d);this.rotation=a(c);this.computedRadius=this.radius.curve(0);this.computedCenter=this.center.curve(0);this.computedRotation=this.rotation.curve(0);this.computedUp=[.1,0,0];this.computedEye=[.1,0,0];this.computedMatrix=[.1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0];this.recalcMatrix(0)}N.exports=function(c){c=c||{};var d=c.center||[0,0,0],e=c.rotation||[0,0,
0,1],f=c.radius||1;d=[].slice.call(d,0,3);e=[].slice.call(e,0,4);k(e,e);d=new m(e,d,Math.log(f));d.setDistanceLimits(c.zoomMin,c.zoomMax);("eye"in c||"up"in c)&&d.lookAt(0,c.eye,c.center,c.up);return d};var a=b("filtered-vector"),g=b("gl-mat4/lookAt"),h=b("gl-mat4/fromQuat"),r=b("gl-mat4/invert"),l=b("./lib/quatFromFrame");b=m.prototype;b.lastT=function(){return Math.max(this.radius.lastT(),this.center.lastT(),this.rotation.lastT())};b.recalcMatrix=function(c){this.radius.curve(c);this.center.curve(c);
this.rotation.curve(c);var d=this.computedRotation;k(d,d);c=this.computedMatrix;h(c,d);var e=this.computedCenter;d=this.computedEye;var f=this.computedUp,q=Math.exp(this.computedRadius[0]);d[0]=e[0]+q*c[2];d[1]=e[1]+q*c[6];d[2]=e[2]+q*c[10];f[0]=c[1];f[1]=c[5];f[2]=c[9];for(e=0;3>e;++e){for(q=f=0;3>q;++q)f+=c[e+4*q]*d[q];c[12+e]=-f}};b.getMatrix=function(c,d){this.recalcMatrix(c);c=this.computedMatrix;if(d){for(var e=0;16>e;++e)d[e]=c[e];return d}return c};b.idle=function(c){this.center.idle(c);this.radius.idle(c);
this.rotation.idle(c)};b.flush=function(c){this.center.flush(c);this.radius.flush(c);this.rotation.flush(c)};b.pan=function(c,d,e,f){d=d||0;e=e||0;f=f||0;this.recalcMatrix(c);var q=this.computedMatrix,t=q[1],w=q[5],x=q[9],z=p(t,w,x);t/=z;w/=z;x/=z;z=q[0];var B=q[4],A=q[8],D=z*t+B*w+A*x;z-=t*D;B-=w*D;A-=x*D;D=p(z,B,A);z/=D;B/=D;A/=D;D=q[2];var C=q[6];q=q[10];var v=D*t+C*w+q*x,y=D*z+C*B+q*A;p(D-(v*t+y*z),C-(v*w+y*B),q-(v*x+y*A));this.center.move(c,z*d+t*e,B*d+w*e,A*d+x*e);d=Math.exp(this.computedRadius[0]);
d=Math.max(1E-4,d+f);this.radius.set(c,Math.log(d))};b.rotate=function(c,d,e,f){this.recalcMatrix(c);d=d||0;e=e||0;var q=this.computedMatrix,t=q[2],w=q[6],x=q[10],z=d*q[0]+e*q[1],B=d*q[4]+e*q[5];q=d*q[8]+e*q[9];e=-(w*q-x*B);q=-(x*z-t*q);z=-(t*B-w*z);B=Math.sqrt(Math.max(0,1-Math.pow(e,2)-Math.pow(q,2)-Math.pow(z,2)));var A=n(e,q,z,B);1E-6<A?(e/=A,q/=A,z/=A,B/=A):(e=q=z=0,B=1);A=this.computedRotation;var D=A[0],C=A[1],v=A[2],y=A[3];A=D*B+y*e+C*z-v*q;var F=C*B+y*q+v*e-D*z,J=v*B+y*z+D*q-C*e;D=y*B-D*
e-C*q-v*z;f&&(e=t,q=w,z=x,f=Math.sin(f)/p(e,q,z),e*=f,q*=f,z*=f,B=Math.cos(d),A=A*B+D*e+F*z-J*q,F=F*B+D*q+J*e-A*z,J=J*B+D*z+A*q-F*e,D=D*B-A*e-F*q-J*z);d=n(A,F,J,D);1E-6<d?(A/=d,F/=d,J/=d,D/=d):(A=F=J=0,D=1);this.rotation.set(c,A,F,J,D)};b.lookAt=function(c,d,e,f){this.recalcMatrix(c);e=e||this.computedCenter;d=d||this.computedEye;f=f||this.computedUp;var q=this.computedMatrix;g(q,d,e,f);f=this.computedRotation;l(f,q[0],q[1],q[2],q[4],q[5],q[6],q[8],q[9],q[10]);k(f,f);this.rotation.set(c,f[0],f[1],
f[2],f[3]);for(f=q=0;3>f;++f)q+=Math.pow(e[f]-d[f],2);this.radius.set(c,.5*Math.log(Math.max(q,1E-6)));this.center.set(c,e[0],e[1],e[2])};b.translate=function(c,d,e,f){this.center.move(c,d||0,e||0,f||0)};b.setMatrix=function(c,d){var e=this.computedRotation;l(e,d[0],d[1],d[2],d[4],d[5],d[6],d[8],d[9],d[10]);k(e,e);this.rotation.set(c,e[0],e[1],e[2],e[3]);e=this.computedMatrix;r(e,d);var f=e[15];if(1E-6<Math.abs(f)){d=e[12]/f;var q=e[13]/f;f=e[14]/f;this.recalcMatrix(c);var t=Math.exp(this.computedRadius[0]);
this.center.set(c,d-e[2]*t,q-e[6]*t,f-e[10]*t)}else this.center.idle(c);this.radius.idle(c)};b.setDistance=function(c,d){0<d&&this.radius.set(c,Math.log(d))};b.setDistanceLimits=function(c,d){c=0<c?Math.log(c):-Infinity;d=0<d?Math.log(d):Infinity;d=Math.max(d,c);this.radius.bounds[0][0]=c;this.radius.bounds[1][0]=d};b.getDistanceLimits=function(c){var d=this.radius.bounds;return c?(c[0]=Math.exp(d[0][0]),c[1]=Math.exp(d[1][0]),c):[Math.exp(d[0][0]),Math.exp(d[1][0])]};b.toJSON=function(){this.recalcMatrix(this.lastT());
return{center:this.computedCenter.slice(),rotation:this.computedRotation.slice(),distance:Math.log(this.computedRadius[0]),zoomMin:this.radius.bounds[0][0],zoomMax:this.radius.bounds[1][0]}};b.fromJSON=function(c){var d=this.lastT(),e=c.center;e&&this.center.set(d,e[0],e[1],e[2]);(e=c.rotation)&&this.rotation.set(d,e[0],e[1],e[2],e[3]);(e=c.distance)&&0<e&&this.radius.set(d,Math.log(e));this.setDistanceLimits(c.zoomMin,c.zoomMax)}},{"./lib/quatFromFrame":488,"filtered-vector":250,"gl-mat4/fromQuat":288,
"gl-mat4/invert":299,"gl-mat4/lookAt":300}],490:[function(b,N,G){var p=b("repeat-string");N.exports=function(n,k,m){return p("undefined"!==typeof m?m+"":" ",k)+n}},{"repeat-string":541}],491:[function(b,N,G){function p(m,a){function g(c,d,e){e=[];for(var f,q=0;f=l.exec(c);){if(1E4<q++)throw Error("Circular references in parenthesis");e.push(c.slice(0,f.index));e.push(g(d[f[1]],d));c=c.slice(f.index+f[0].length)}e.push(c);return e}if("string"!==typeof m)return[m];var h=[m];"string"===typeof a||Array.isArray(a)?
a={brackets:a}:a||(a={});m=a.brackets?Array.isArray(a.brackets)?a.brackets:[a.brackets]:["{}","[]","()"];var r=a.escape||"___";a=!!a.flat;m.forEach(function(c){function d(q,t,w){q=h.push(q.slice(c[0].length,-c[1].length))-1;f.push(q);return r+q+r}var e=new RegExp(["\\",c[0],"[^\\",c[0],"\\",c[1],"]*\\",c[1]].join("")),f=[];h.forEach(function(q,t){for(var w,x=0;q!=w;)if(w=q,q=q.replace(e,d),1E4<x++)throw Error("References have circular dependency. Please, check them.");h[t]=q});f=f.reverse();h=h.map(function(q){f.forEach(function(t){q=
q.replace(new RegExp("(\\"+r+t+"\\"+r+")","g"),c[0]+"$1"+c[1])});return q})});var l=new RegExp("\\"+r+"([0-9]+)\\"+r);return a?h:g(h[0],h)}function n(m,a){function g(c,d){if(null==m[d])throw Error("Reference "+d+"is undefined");return m[d]}if(a&&a.flat){var h=a&&a.escape||"___";a=m[0];if(!a)return"";h=new RegExp("\\"+h+"([0-9]+)\\"+h);for(var r=0;a!=l;){if(1E4<r++)throw Error("Circular references in "+m);var l=a;a=a.replace(h,g)}return a}return m.reduce(function f(d,e){Array.isArray(e)&&(e=e.reduce(f,
""));return d+e},"")}function k(m,a){return Array.isArray(m)?n(m,a):p(m,a)}k.parse=p;k.stringify=n;N.exports=k},{}],492:[function(b,N,G){var p=b("pick-by-alias");N.exports=function(n){1<arguments.length&&(n=arguments);"string"===typeof n?n=n.split(/\s/).map(parseFloat):"number"===typeof n&&(n=[n]);if(n.length&&"number"===typeof n[0])var k=1===n.length?{width:n[0],height:n[0],x:0,y:0}:2===n.length?{width:n[0],height:n[1],x:0,y:0}:{x:n[0],y:n[1],width:n[2]-n[0]||0,height:n[3]-n[1]||0};else n&&(n=p(n,
{left:"x l left Left",top:"y t top Top",width:"w width W Width",height:"h height W Width",bottom:"b bottom Bottom",right:"r right Right"}),k={x:n.left||0,y:n.top||0},k.width=null==n.width?n.right?n.right-k.x:0:n.width,k.height=null==n.height?n.bottom?n.bottom-k.y:0:n.height);return k}},{"pick-by-alias":498}],493:[function(b,N,G){N.exports=function(m){var a=[];m.replace(n,function(g,h,r){g=h.toLowerCase();r=(r=r.match(k))?r.map(Number):[];"m"==g&&2<r.length&&(a.push([h].concat(r.splice(0,2))),g="l",
h="m"==h?"l":"L");for(;;){if(r.length==p[g])return r.unshift(h),a.push(r);if(r.length<p[g])throw Error("malformed path data");a.push([h].concat(r.splice(0,p[g])))}});return a};var p={a:7,c:6,h:1,l:2,m:2,q:4,s:4,t:2,v:1,z:0},n=/([astvzqmhlc])([^astvzqmhlc]*)/ig,k=/-?[0-9]*\.?[0-9]+(?:e[-+]?\d+)?/ig},{}],494:[function(b,N,G){N.exports=function(p,n){n||(n=[0,""]);p=String(p);var k=parseFloat(p,10);n[0]=k;n[1]=p.match(/[\d.\-\+]*\s*(.*)/)[1]||"";return n}},{}],495:[function(b,N,G){(function(p){(function(){(function(){if("undefined"!==
typeof performance&&null!==performance&&performance.now)N.exports=function(){return performance.now()};else if("undefined"!==typeof p&&null!==p&&p.hrtime){N.exports=function(){return(k()-g)/1E6};var n=p.hrtime;var k=function(){var r=n();return 1E9*r[0]+r[1]};var m=k();var a=1E9*p.uptime();var g=m-a}else if(Date.now){N.exports=function(){return Date.now()-h};var h=Date.now()}else N.exports=function(){return(new Date).getTime()-h},h=(new Date).getTime()}).call(this)}).call(this)}).call(this,b("_process"))},
{_process:528}],496:[function(b,N,G){N.exports=function(k){var m=k.length;if(m<p)for(var a=1,g=0;g<m;++g)for(var h=0;h<g;++h)if(k[g]<k[h])a=-a;else{if(k[g]===k[h])return 0}else{var r=n.mallocUint8(m);for(g=0;g<m;++g)r[g]=0;a=1;for(g=0;g<m;++g)if(!r[g]){var l=1;r[g]=1;for(h=k[g];h!==g;h=k[h]){if(r[h])return n.freeUint8(r),0;l+=1;r[h]=1}l&1||(a=-a)}n.freeUint8(r)}return a};var p=32,n=b("typedarray-pool")},{"typedarray-pool":617}],497:[function(b,N,G){var p=b("typedarray-pool"),n=b("invert-permutation");
G.rank=function(k){var m=k.length;switch(m){case 0:case 1:return 0;case 2:return k[1]}var a=p.mallocUint32(m),g=p.mallocUint32(m),h=0,r;n(k,g);for(r=0;r<m;++r)a[r]=k[r];for(r=m-1;0<r;--r)m=g[r],k=a[r],a[r]=a[m],a[m]=k,g[r]=g[k],g[k]=m,h=(h+k)*r;p.freeUint32(g);p.freeUint32(a);return h};G.unrank=function(k,m,a){switch(k){case 0:return a?a:[];case 1:return a?(a[0]=0,a):[0];case 2:return a?(m?(a[0]=0,a[1]=1):(a[0]=1,a[1]=0),a):m?[0,1]:[1,0]}a=a||Array(k);var g,h=1;a[0]=0;for(g=1;g<k;++g)a[g]=g,h=h*g|
0;for(g=k-1;0<g;--g){k=m/h|0;m=m-k*h|0;h=h/g|0;var r=a[g]|0;a[g]=a[k]|0;a[k]=r|0}return a}},{"invert-permutation":450,"typedarray-pool":617}],498:[function(b,N,G){function p(k){if(n[k])return n[k];"string"===typeof k&&(k=n[k]=k.split(/\s*,\s*|\s+/));return k}N.exports=function(k,m,a){var g={},h,r;"string"===typeof m&&(m=p(m));if(Array.isArray(m)){var l={};for(r=0;r<m.length;r++)l[m[r]]=!0;m=l}for(h in m)m[h]=p(m[h]);l={};for(h in m){var c=m[h];if(Array.isArray(c))for(r=0;r<c.length;r++){var d=c[r];
a&&(l[d]=!0);if(d in k){g[h]=k[d];if(a)for(;r<c.length;r++)l[c[r]]=!0;break}}else h in k&&(m[h]&&(g[h]=k[h]),a&&(l[h]=!0))}if(a)for(h in k)l[h]||(g[h]=k[h]);return g};var n={}},{}],499:[function(b,N,G){N.exports=function(n,k){function m(f,q){q=l[q][f[q]];q.splice(q.indexOf(f),1)}function a(f,q,t){var w;for(w=0;2>w;++w)if(0<l[w][q].length){var x=l[w][q][0];var z=w;break}w=x[z^1];for(var B=0;2>B;++B)for(var A=l[B][q],D=0;D<A.length;++D){var C=A[D],v=C[B^1];0<p(k[f],k[q],k[w],k[v])&&(x=C,w=v,z=B)}if(t)return w;
x&&m(x,z);return w}function g(f,q){var t=l[q][f][0],w=[f];m(t,q);for(q=t[q^1];;){for(;q!==f;)w.push(q),q=a(w[w.length-2],q,!1);if(0===l[0][f].length+l[1][f].length)break;q=w[w.length-1];t=f;var x=w[1],z=a(q,t,!0);if(0>p(k[q],k[t],k[x],k[z]))break;w.push(f);q=a(q,t)}return w}for(var h=k.length|0,r=n.length,l=[Array(h),Array(h)],c=0;c<h;++c)l[0][c]=[],l[1][c]=[];for(c=0;c<r;++c){var d=n[c];l[0][d[0]].push(d);l[1][d[1]].push(d)}n=[];for(c=0;c<h;++c)0===l[0][c].length+l[1][c].length&&n.push([c]);for(c=
0;c<h;++c)for(r=0;2>r;++r){for(d=[];0<l[r][c].length;){var e=g(c,r);e[1]===e[e.length-1]?d.push.apply(d,e):(0<d.length&&n.push(d),d=e)}0<d.length&&n.push(d)}return n};var p=b("compare-angle")},{"compare-angle":138}],500:[function(b,N,G){N.exports=function(n,k){for(var m=p(n,k.length),a=Array(k.length),g=Array(k.length),h=[],r=0;r<k.length;++r){var l=m[r].length;g[r]=l;a[r]=!0;1>=l&&h.push(r)}for(;0<h.length;)for(l=h.pop(),a[l]=!1,l=m[l],r=0;r<l.length;++r){var c=l[r];0===--g[c]&&h.push(c)}m=Array(k.length);
g=[];for(r=0;r<k.length;++r)a[r]?(l=g.length,m[r]=l,g.push(k[r])):m[r]=-1;k=[];for(r=0;r<n.length;++r)h=n[r],a[h[0]]&&a[h[1]]&&k.push([m[h[0]],m[h[1]]]);return[k,g]};var p=b("edges-to-adjacency-list")},{"edges-to-adjacency-list":187}],501:[function(b,N,G){function p(c,d){for(var e=Array(c),f=0;f<c;++f)e[f]=d;return e}function n(c){for(var d=Array(c),e=0;e<c;++e)d[e]=[];return d}N.exports=function(c,d){function e(M){for(var H=M.length,O=0;O<H;++O)if(!J[M[O]])return!1;return!0}var f=l(c,d);c=f[0];d=
f[1];for(var q=d.length,t=k(c,d.length),w=0;w<q;++w)if(1===t[w].length%2)throw Error("planar-graph-to-polyline: graph must be manifold");c=m(c,d);c=c.filter(function(M){for(var H=M.length,O=[0],I=0;I<H;++I){var L=d[M[I]],Q=d[M[(I+1)%H]],Z=g(-L[0],L[1]),ba=g(-L[0],Q[1]);L=g(Q[0],L[1]);Q=g(Q[0],Q[1]);O=h(O,h(h(Z,ba),h(L,Q)))}return 0<O[O.length-1]});f=c.length;var x=Array(f),z=Array(f);for(w=0;w<f;++w){x[w]=w;var B=Array(f);t=c[w].map(function(M){return d[M]});var A=a([t]),D=0,C=0;a:for(;C<f;++C)if(B[C]=
0,w!==C){t=c[C];for(var v=t.length,y=0;y<v;++y){var F=A(d[t[y]]);if(0!==F){0>F&&(B[C]=1,D+=1);continue a}}B[C]=1;D+=1}z[w]=[D,w,B]}z.sort(function(M,H){return H[0]-M[0]});for(w=0;w<f;++w)for(B=z[w],t=B[1],v=B[2],C=0;C<f;++C)v[C]&&(x[C]=t);z=n(f);for(w=0;w<f;++w)z[w].push(x[w]),z[x[w]].push(w);B={};var J=p(q,!1);for(w=0;w<f;++w)for(t=c[w],v=t.length,C=0;C<v;++C)q=t[C],A=t[(C+1)%v],D=Math.min(q,A)+":"+Math.max(q,A),D in B?(D=B[D],z[D].push(w),z[w].push(D),J[q]=J[A]=!0):B[D]=w;C=[];q=p(f,-1);for(w=0;w<
f;++w)x[w]!==w||e(c[w])?q[w]=-1:(C.push(w),q[w]=0);for(f=[];0<C.length;){w=C.pop();x=z[w];r(x,function(M,H){return M-H});v=x.length;B=q[w];if(0===B){t=c[w];var K=[t]}for(w=0;w<v;++w)t=x[w],0<=q[t]||(q[t]=B^1,C.push(t),0===B&&(t=c[t],e(t)||(t.reverse(),K.push(t))));0===B&&f.push(K)}return f};var k=b("edges-to-adjacency-list"),m=b("planar-dual"),a=b("point-in-big-polygon"),g=b("two-product"),h=b("robust-sum"),r=b("uniq"),l=b("./lib/trim-leaves")},{"./lib/trim-leaves":500,"edges-to-adjacency-list":187,
"planar-dual":499,"point-in-big-polygon":503,"robust-sum":553,"two-product":604,uniq:619}],502:[function(b,N,G){arguments[4][251][0].apply(G,arguments)},{dup:251}],503:[function(b,N,G){function p(){return!0}function n(e){return function(f,q){return(f=e[f])?!!f.queryPoint(q,p):!1}}function k(e){for(var f={},q=0;q<e.length;++q){var t=e[q],w=t[0][0],x=t[0][1];t=t[1][1];x=[Math.min(x,t),Math.max(x,t)];w in f?f[w].push(x):f[w]=[x]}e={};w=Object.keys(f);for(q=0;q<w.length;++q)e[w[q]]=c(f[w[q]]);return n(e)}
function m(e,f){return function(q){var t=d.le(f,q[0]);if(0>t)return 1;var w=e[t];if(!w)if(0<t&&f[t]===q[0])w=e[t-1];else return 1;for(t=1;w;){var x=w.key,z=r(q,x[0],x[1]);if(x[0][0]<x[1][0])if(0>z)w=w.left;else if(0<z)t=-1,w=w.right;else return 0;else if(0<z)w=w.left;else if(0>z)t=1,w=w.right;else return 0}return t}}function a(e){return 1}function g(e){return function(f){return e(f[0],f[1])?0:1}}function h(e,f){return function(q){return e(q[0],q[1])?0:f(q)}}N.exports=function(e){for(var f=e.length,
q=[],t=[],w=0;w<f;++w)for(var x=e[w],z=x.length,B=z-1,A=0;A<z;B=A++){B=x[B];var D=x[A];B[0]===D[0]?t.push([B,D]):q.push([B,D])}if(0===q.length)return 0===t.length?a:g(k(t));e=l(q);e=m(e.slabs,e.coordinates);return 0===t.length?e:h(k(t),e)};var r=b("robust-orientation")[3],l=b("slab-decomposition"),c=b("interval-tree-1d"),d=b("binary-search-bounds")},{"binary-search-bounds":502,"interval-tree-1d":448,"robust-orientation":548,"slab-decomposition":566}],504:[function(b,N,G){function p(c,d,e){c=l.segments(c);
d=l.segments(d);d=l.combine(c,d);e=e(d);return l.polygon(e)}var n=b("./lib/build-log");G=b("./lib/epsilon");var k=b("./lib/intersecter"),m=b("./lib/segment-chainer"),a=b("./lib/segment-selector"),g=b("./lib/geojson"),h=!1,r=G();var l={buildLog:function(c){!0===c?h=n():!1===c&&(h=!1);return!1===h?!1:h.list},epsilon:function(c){return r.epsilon(c)},segments:function(c){var d=k(!0,r,h);c.regions.forEach(d.addRegion);return{segments:d.calculate(c.inverted),inverted:c.inverted}},combine:function(c,d){return{combined:k(!1,
r,h).calculate(c.segments,c.inverted,d.segments,d.inverted),inverted1:c.inverted,inverted2:d.inverted}},selectUnion:function(c){return{segments:a.union(c.combined,h),inverted:c.inverted1||c.inverted2}},selectIntersect:function(c){return{segments:a.intersect(c.combined,h),inverted:c.inverted1&&c.inverted2}},selectDifference:function(c){return{segments:a.difference(c.combined,h),inverted:c.inverted1&&!c.inverted2}},selectDifferenceRev:function(c){return{segments:a.differenceRev(c.combined,h),inverted:!c.inverted1&&
c.inverted2}},selectXor:function(c){return{segments:a.xor(c.combined,h),inverted:c.inverted1!==c.inverted2}},polygon:function(c){return{regions:m(c.segments,r,h),inverted:c.inverted}},polygonFromGeoJSON:function(c){return g.toPolygon(l,c)},polygonToGeoJSON:function(c){return g.fromPolygon(l,r,c)},union:function(c,d){return p(c,d,l.selectUnion)},intersect:function(c,d){return p(c,d,l.selectIntersect)},difference:function(c,d){return p(c,d,l.selectDifference)},differenceRev:function(c,d){return p(c,
d,l.selectDifferenceRev)},xor:function(c,d){return p(c,d,l.selectXor)}};"object"===typeof window&&(window.PolyBool=l);N.exports=l},{"./lib/build-log":505,"./lib/epsilon":506,"./lib/geojson":507,"./lib/intersecter":508,"./lib/segment-chainer":510,"./lib/segment-selector":511}],505:[function(b,N,G){N.exports=function(){function p(a,g){n.list.push({type:a,data:g?JSON.parse(JSON.stringify(g)):void 0});return n}var n,k=0,m=!1;return n={list:[],segmentId:function(){return k++},checkIntersection:function(a,
g){return p("check",{seg1:a,seg2:g})},segmentChop:function(a,g){p("div_seg",{seg:a,pt:g});return p("chop",{seg:a,pt:g})},statusRemove:function(a){return p("pop_seg",{seg:a})},segmentUpdate:function(a){return p("seg_update",{seg:a})},segmentNew:function(a,g){return p("new_seg",{seg:a,primary:g})},segmentRemove:function(a){return p("rem_seg",{seg:a})},tempStatus:function(a,g,h){return p("temp_status",{seg:a,above:g,below:h})},rewind:function(a){return p("rewind",{seg:a})},status:function(a,g,h){return p("status",
{seg:a,above:g,below:h})},vert:function(a){if(a===m)return n;m=a;return p("vert",{x:a})},log:function(a){"string"!==typeof a&&(a=JSON.stringify(a,!1,"  "));return p("log",{txt:a})},reset:function(){return p("reset")},selected:function(a){return p("selected",{segs:a})},chainStart:function(a){return p("chain_start",{seg:a})},chainRemoveHead:function(a,g){return p("chain_rem_head",{index:a,pt:g})},chainRemoveTail:function(a,g){return p("chain_rem_tail",{index:a,pt:g})},chainNew:function(a,g){return p("chain_new",
{pt1:a,pt2:g})},chainMatch:function(a){return p("chain_match",{index:a})},chainClose:function(a){return p("chain_close",{index:a})},chainAddHead:function(a,g){return p("chain_add_head",{index:a,pt:g})},chainAddTail:function(a,g){return p("chain_add_tail",{index:a,pt:g})},chainConnect:function(a,g){return p("chain_con",{index1:a,index2:g})},chainReverse:function(a){return p("chain_rev",{index:a})},chainJoin:function(a,g){return p("chain_join",{index1:a,index2:g})},done:function(){return p("done")}}}},
{}],506:[function(b,N,G){N.exports=function(p){"number"!==typeof p&&(p=1E-10);var n={epsilon:function(k){"number"===typeof k&&(p=k);return p},pointAboveOrOnLine:function(k,m,a){var g=m[0];m=m[1];return(a[0]-g)*(k[1]-m)-(a[1]-m)*(k[0]-g)>=-p},pointBetween:function(k,m,a){var g=a[0]-m[0];a=a[1]-m[1];k=(k[0]-m[0])*g+(k[1]-m[1])*a;return k<p||k-(g*g+a*a)>-p?!1:!0},pointsSameX:function(k,m){return Math.abs(k[0]-m[0])<p},pointsSameY:function(k,m){return Math.abs(k[1]-m[1])<p},pointsSame:function(k,m){return n.pointsSameX(k,
m)&&n.pointsSameY(k,m)},pointsCompare:function(k,m){return n.pointsSameX(k,m)?n.pointsSameY(k,m)?0:k[1]<m[1]?-1:1:k[0]<m[0]?-1:1},pointsCollinear:function(k,m,a){return Math.abs((k[0]-m[0])*(m[1]-a[1])-(m[0]-a[0])*(k[1]-m[1]))<p},linesIntersect:function(k,m,a,g){var h=m[0]-k[0];m=m[1]-k[1];var r=g[0]-a[0],l=g[1]-a[1];g=h*l-m*r;if(Math.abs(g)<p)return!1;var c=k[0]-a[0];a=k[1]-a[1];r=(r*a-l*c)/g;a=(h*a-m*c)/g;k={alongA:0,alongB:0,pt:[k[0]+r*h,k[1]+r*m]};k.alongA=r<=-p?-2:r<p?-1:r-1<=-p?0:r-1<p?1:2;
k.alongB=a<=-p?-2:a<p?-1:a-1<=-p?0:a-1<p?1:2;return k},pointInsideRegion:function(k,m){var a=k[0];k=k[1];for(var g=m[m.length-1][0],h=m[m.length-1][1],r=!1,l=0;l<m.length;l++){var c=m[l][0],d=m[l][1];d-k>p!=h-k>p&&(g-c)*(k-d)/(h-d)+c-a>p&&(r=!r);g=c;h=d}return r}};return n}},{}],507:[function(b,N,G){N.exports={toPolygon:function(p,n){function k(g){function h(c){c=c.slice(0,c.length-1);return p.segments({inverted:!1,regions:[c]})}if(0>=g.length)return p.segments({inverted:!1,regions:[]});for(var r=
h(g[0]),l=1;l<g.length;l++)r=p.selectDifference(p.combine(r,h(g[l])));return r}if("Polygon"===n.type)return p.polygon(k(n.coordinates));if("MultiPolygon"===n.type){for(var m=p.segments({inverted:!1,regions:[]}),a=0;a<n.coordinates.length;a++)m=p.selectUnion(p.combine(m,k(n.coordinates[a])));return p.polygon(m)}throw Error("PolyBool: Cannot convert GeoJSON object to PolyBool polygon");},fromPolygon:function(p,n,k){function m(d,e){return n.pointInsideRegion([.5*(d[0][0]+d[1][0]),.5*(d[0][1]+d[1][1])],
e)}function a(d,e){for(var f=0;f<d.children.length;f++){var q=d.children[f];if(m(e,q.region)){a(q,e);return}}var t={region:e,children:[]};for(f=0;f<d.children.length;f++)q=d.children[f],m(q.region,e)&&(t.children.push(q),d.children.splice(f,1),f--);d.children.push(t)}function g(d,e){for(var f=0,q=d[d.length-1][0],t=d[d.length-1][1],w=[],x=0;x<d.length;x++){var z=d[x][0],B=d[x][1];w.push([z,B]);f+=B*q-z*t;q=z;t=B}0>f!==e&&w.reverse();w.push([w[0][0],w[0][1]]);return w}function h(d){var e=[g(d.region,
!1)];c.push(e);for(var f=0;f<d.children.length;f++){var q=e,t=q.push;var w=d.children[f];for(var x=0;x<w.children.length;x++)h(w.children[x]);w=g(w.region,!0);t.call(q,w)}}k=p.polygon(p.segments(k));p={region:null,children:[]};for(var r=0;r<k.regions.length;r++){var l=k.regions[r];3>l.length||a(p,l)}var c=[];for(r=0;r<p.children.length;r++)h(p.children[r]);return 0>=c.length?{type:"Polygon",coordinates:[]}:1==c.length?{type:"Polygon",coordinates:c[0]}:{type:"MultiPolygon",coordinates:c}}}},{}],508:[function(b,
N,G){var p=b("./linked-list");N.exports=function(n,k,m){function a(d,e,f){return{id:m?m.segmentId():-1,start:d,end:e,myFill:{above:f.myFill.above,below:f.myFill.below},otherFill:null}}function g(d,e){c.insertBefore(d,function(f){var q=d.isStart;var t=f.isStart,w=f.pt;f=f.other.pt;var x=k.pointsCompare(d.pt,w);q=0!==x?x:k.pointsSame(e,f)?0:q!==t?q?1:-1:k.pointAboveOrOnLine(e,t?w:f,t?f:w)?1:-1;return 0>q})}function h(d,e){var f=p.node({isStart:!0,pt:d.start,seg:d,primary:e,other:null,status:null});
g(f,d.end);d=p.node({isStart:!1,pt:d.end,seg:d,primary:e,other:f,status:null});f.other=d;g(d,f.pt);return f}function r(d,e){var f=a(e,d.seg.end,d.seg);m&&m.segmentChop(d.seg,e);d.other.remove();d.seg.end=e;d.other.pt=e;g(d.other,d.pt);return h(f,d.primary)}function l(d,e){function f(v){return t.findTransition(function(y){var F=y.ev;y=v.seg.start;var J=v.seg.end,K=F.seg.start;F=F.seg.end;y=k.pointsCollinear(y,K,F)?k.pointsCollinear(J,K,F)?1:k.pointAboveOrOnLine(J,K,F)?1:-1:k.pointAboveOrOnLine(y,K,
F)?1:-1;return 0<y})}function q(v,y){var F=v.seg,J=y.seg,K=F.start,M=F.end,H=J.start,O=J.end;m&&m.checkIntersection(F,J);F=k.linesIntersect(K,M,H,O);if(!1===F){if(!k.pointsCollinear(K,M,H)||k.pointsSame(K,O)||k.pointsSame(M,H))return!1;F=k.pointsSame(K,H);J=k.pointsSame(M,O);if(F&&J)return y;var I=!F&&k.pointBetween(K,H,O);H=!J&&k.pointBetween(M,H,O);if(F)return H?r(y,M):r(v,O),y;I&&(J||(H?r(y,M):r(v,O)),r(y,K))}else 0===F.alongA&&(-1===F.alongB?r(v,H):0===F.alongB?r(v,F.pt):1===F.alongB&&r(v,O)),
0===F.alongB&&(-1===F.alongA?r(y,K):0===F.alongA?r(y,F.pt):1===F.alongA&&r(y,M));return!1}for(var t=p.create(),w=[];!c.isEmpty();){var x=c.getHead();m&&m.vert(x.pt[0]);if(x.isStart){m&&m.segmentNew(x.seg,x.primary);var z=f(x),B=z.before?z.before.ev:null,A=z.after?z.after.ev:null;m&&m.tempStatus(x.seg,B?B.seg:!1,A?A.seg:!1);var D=function(){if(B){var v=q(x,B);if(v)return v}return A?q(x,A):!1}();if(D){if(n){var C;if(C=null===x.seg.myFill.below?!0:x.seg.myFill.above!==x.seg.myFill.below)D.seg.myFill.above=
!D.seg.myFill.above}else D.seg.otherFill=x.seg.myFill;m&&m.segmentUpdate(D.seg);x.other.remove();x.remove()}if(c.getHead()!==x){m&&m.rewind(x.seg);continue}n?(C=null===x.seg.myFill.below?!0:x.seg.myFill.above!==x.seg.myFill.below,x.seg.myFill.below=A?A.seg.myFill.above:d,x.seg.myFill.above=C?!x.seg.myFill.below:x.seg.myFill.below):null===x.seg.otherFill&&(D=A?x.primary===A.primary?A.seg.otherFill.above:A.seg.myFill.above:x.primary?e:d,x.seg.otherFill={above:D,below:D});m&&m.status(x.seg,B?B.seg:!1,
A?A.seg:!1);x.other.status=z.insert(p.node({ev:x}))}else{z=x.status;if(null===z)throw Error("PolyBool: Zero-length segment detected; your epsilon is probably too small or too large");t.exists(z.prev)&&t.exists(z.next)&&q(z.prev.ev,z.next.ev);m&&m.statusRemove(z.ev.seg);z.remove();x.primary||(z=x.seg.myFill,x.seg.myFill=x.seg.otherFill,x.seg.otherFill=z);w.push(x.seg)}c.getHead().remove()}m&&m.done();return w}var c=p.create();return n?{addRegion:function(d){for(var e,f=d[d.length-1],q=0;q<d.length;q++){e=
f;f=d[q];var t=k.pointsCompare(e,f);if(0!==t){var w=0>t?e:f;e=0>t?f:e;w={id:m?m.segmentId():-1,start:w,end:e,myFill:{above:null,below:null},otherFill:null};h(w,!0)}}},calculate:function(d){return l(d,!1)}}:{calculate:function(d,e,f,q){d.forEach(function(t){h(a(t.start,t.end,t),!0)});f.forEach(function(t){h(a(t.start,t.end,t),!1)});return l(e,q)}}}},{"./linked-list":509}],509:[function(b,N,G){N.exports={create:function(){var p={root:{root:!0,next:null},exists:function(n){return null===n||n===p.root?
!1:!0},isEmpty:function(){return null===p.root.next},getHead:function(){return p.root.next},insertBefore:function(n,k){for(var m=p.root,a=p.root.next;null!==a;){if(k(a)){n.prev=a.prev;n.next=a;a.prev.next=n;a.prev=n;return}m=a;a=a.next}m.next=n;n.prev=m;n.next=null},findTransition:function(n){for(var k=p.root,m=p.root.next;null!==m&&!n(m);)k=m,m=m.next;return{before:k===p.root?null:k,after:m,insert:function(a){a.prev=k;a.next=m;k.next=a;null!==m&&(m.prev=a);return a}}}};return p},node:function(p){p.prev=
null;p.next=null;p.remove=function(){if(p.prev.next=p.next)p.next.prev=p.prev;p.prev=null;p.next=null};return p}}},{}],510:[function(b,N,G){N.exports=function(p,n,k){var m=[],a=[];p.forEach(function(g){function h(A,D,C){q.index=A;q.matches_head=D;q.matches_pt1=C;if(q===e)return q=f,!1;q=null;return!0}function r(A){k&&k.chainReverse(A);m[A].reverse()}function l(A,D){var C=m[A],v=m[D],y=C[C.length-1],F=C[C.length-2],J=v[0],K=v[1];n.pointsCollinear(F,y,J)&&(k&&k.chainRemoveTail(A,y),C.pop(),y=F);n.pointsCollinear(y,
J,K)&&(k&&k.chainRemoveHead(D,J),v.shift());k&&k.chainJoin(A,D);m[A]=C.concat(v);m.splice(D,1)}var c=g.start,d=g.end;if(n.pointsSame(c,d))console.warn("PolyBool: Warning: Zero-length segment detected; your epsilon is probably too small or too large");else{k&&k.chainStart(g);for(var e={index:0,matches_head:!1,matches_pt1:!1},f={index:0,matches_head:!1,matches_pt1:!1},q=e,t=0;t<m.length;t++){g=m[t];var w=g[0];g=g[g.length-1];if(n.pointsSame(w,c)){if(h(t,!0,!0))break}else if(n.pointsSame(w,d)){if(h(t,
!0,!1))break}else if(n.pointsSame(g,c)){if(h(t,!1,!0))break}else if(n.pointsSame(g,d)&&h(t,!1,!1))break}if(q===e)m.push([c,d]),k&&k.chainNew(c,d);else if(q===f){k&&k.chainMatch(e.index);t=e.index;c=e.matches_pt1?d:c;d=e.matches_head;g=m[t];w=d?g[0]:g[g.length-1];var x=d?g[1]:g[g.length-2],z=d?g[g.length-1]:g[0],B=d?g[g.length-2]:g[1];n.pointsCollinear(x,w,c)&&(d?(k&&k.chainRemoveHead(e.index,c),g.shift()):(k&&k.chainRemoveTail(e.index,c),g.pop()),w=x);n.pointsSame(z,c)?(m.splice(t,1),n.pointsCollinear(B,
z,w)&&(d?(k&&k.chainRemoveTail(e.index,w),g.pop()):(k&&k.chainRemoveHead(e.index,w),g.shift())),k&&k.chainClose(e.index),a.push(g)):d?(k&&k.chainAddHead(e.index,c),g.unshift(c)):(k&&k.chainAddTail(e.index,c),g.push(c))}else g=e.index,t=f.index,k&&k.chainConnect(g,t),c=m[g].length<m[t].length,e.matches_head?f.matches_head?c?(r(g),l(g,t)):(r(t),l(t,g)):l(t,g):f.matches_head?l(g,t):c?(r(g),l(t,g)):(r(t),l(g,t))}});return a}},{}],511:[function(b,N,G){function p(n,k,m){var a=[];n.forEach(function(g){var h=
(g.myFill.above?8:0)+(g.myFill.below?4:0)+(g.otherFill&&g.otherFill.above?2:0)+(g.otherFill&&g.otherFill.below?1:0);0!==k[h]&&a.push({id:m?m.segmentId():-1,start:g.start,end:g.end,myFill:{above:1===k[h],below:2===k[h]},otherFill:null})});m&&m.selected(a);return a}N.exports={union:function(n,k){return p(n,[0,2,1,0,2,2,0,0,1,0,1,0,0,0,0,0],k)},intersect:function(n,k){return p(n,[0,0,0,0,0,2,0,2,0,0,1,1,0,2,1,0],k)},difference:function(n,k){return p(n,[0,0,0,0,2,0,2,0,1,1,0,0,0,1,2,0],k)},differenceRev:function(n,
k){return p(n,[0,2,1,0,0,0,1,1,0,2,0,2,0,0,0,0],k)},xor:function(n,k){return p(n,[0,2,1,0,2,0,0,1,1,0,0,2,0,1,2,0],k)}}},{}],512:[function(b,N,G){var p=new Float64Array(4),n=new Float64Array(4),k=new Float64Array(4);N.exports=function(m,a,g,h,r){p.length<h.length&&(p=new Float64Array(h.length),n=new Float64Array(h.length),k=new Float64Array(h.length));for(var l=0;l<h.length;++l)p[l]=m[l]-h[l],n[l]=a[l]-m[l],k[l]=g[l]-m[l];var c=0,d=0,e=0,f=0,q=0,t=0;for(l=0;l<h.length;++l){var w=n[l],x=k[l],z=p[l];
c+=w*w;d+=w*x;e+=x*x;f+=z*w;q+=z*x;t+=z*z}l=Math.abs(c*e-d*d);w=d*q-e*f;x=d*f-c*q;w+x<=l?0>w?0>x?0>f?(x=0,-f>=c?(w=1,c=c+2*f+t):(w=-f/c,c=f*w+t)):(w=0,0<=q?(x=0,c=t):-q>=e?(x=1,c=e+2*q+t):(x=-q/e,c=q*x+t)):(w=0,0<=q?(x=0,c=t):-q>=e?(x=1,c=e+2*q+t):(x=-q/e,c=q*x+t)):0>x?(x=0,0<=f?(w=0,c=t):-f>=c?(w=1,c=c+2*f+t):(w=-f/c,c=f*w+t)):(l=1/l,w*=l,x*=l,c=w*(c*w+d*x+2*f)+x*(d*w+e*x+2*q)+t):0>w?(w=d+f,l=e+q,l>w?(l-=w,w=c-2*d+e,l>=w?(w=1,x=0,c=c+2*f+t):(w=l/w,x=1-w,c=w*(c*w+d*x+2*f)+x*(d*w+e*x+2*q)+t)):(w=0,
0>=l?(x=1,c=e+2*q+t):0<=q?(x=0,c=t):(x=-q/e,c=q*x+t))):0>x?(w=d+q,l=c+f,l>w?(l-=w,w=c-2*d+e,l>=w?(x=1,w=0,c=e+2*q+t):(x=l/w,w=1-x,c=w*(c*w+d*x+2*f)+x*(d*w+e*x+2*q)+t)):(x=0,0>=l?(w=1,c=c+2*f+t):0<=f?(w=0,c=t):(w=-f/c,c=f*w+t))):(l=e+q-d-f,0>=l?(w=0,x=1,c=e+2*q+t):(w=c-2*d+e,l>=w?(w=1,x=0,c=c+2*f+t):(w=l/w,x=1-w,c=w*(c*w+d*x+2*f)+x*(d*w+e*x+2*q)+t)));d=1-w-x;for(l=0;l<h.length;++l)r[l]=d*m[l]+w*a[l]+x*g[l];return 0>c?0:c}},{}],513:[function(b,N,G){function p(){k.call(this,{readableObjectMode:!0})}
function n(m,a,g){Error.call(this);Error.captureStackTrace(this,this.constructor);this.name=this.constructor.name;this.message=m;a&&(this.code=a);g&&(this.statusCode=g)}var k=b("stream").Transform;b=b("stream-parser");p.prototype=Object.create(k.prototype);p.prototype.constructor=p;b(p.prototype);G.ParserStream=p;G.sliceEq=function(m,a,g){for(var h=0;h<g.length;)if(m[a++]!==g[h++])return!1;return!0};G.str2arr=function(m,a){var g=[],h=0;if(a&&"hex"===a)for(;h<m.length;)g.push(parseInt(m.slice(h,h+
2),16)),h+=2;else for(;h<m.length;h++)g.push(m.charCodeAt(h)&255);return g};G.readUInt16LE=function(m,a){return m[a]|m[a+1]<<8};G.readUInt16BE=function(m,a){return m[a+1]|m[a]<<8};G.readUInt32LE=function(m,a){return m[a]|m[a+1]<<8|m[a+2]<<16|16777216*m[a+3]};G.readUInt32BE=function(m,a){return m[a+3]|m[a+2]<<8|m[a+1]<<16|16777216*m[a]};n.prototype=Object.create(Error.prototype);n.prototype.constructor=n;G.ProbeError=n},{stream:569,"stream-parser":585}],514:[function(b,N,G){function p(k,m){k=Error(k);
k.code=m;return k}function n(k,m,a){this.input=k.subarray(m,a);this.start=m;k=String.fromCharCode.apply(null,this.input.subarray(0,4));if("II*\x00"!==k&&"MM\x00*"!==k)throw p("invalid TIFF signature","EBADDATA");this.big_endian="M"===k[0]}n.prototype.each=function(k){this.aborted=!1;for(this.ifds_to_read=[{id:0,offset:this.read_uint32(4)}];0<this.ifds_to_read.length&&!this.aborted;){var m=this.ifds_to_read.shift();m.offset&&this.scan_ifd(m.id,m.offset,k)}};n.prototype.read_uint16=function(k){var m=
this.input;if(k+2>m.length)throw p("unexpected EOF","EBADDATA");return this.big_endian?256*m[k]+m[k+1]:m[k]+256*m[k+1]};n.prototype.read_uint32=function(k){var m=this.input;if(k+4>m.length)throw p("unexpected EOF","EBADDATA");return this.big_endian?16777216*m[k]+65536*m[k+1]+256*m[k+2]+m[k+3]:m[k]+256*m[k+1]+65536*m[k+2]+16777216*m[k+3]};n.prototype.is_subifd_link=function(k,m){return 0===k&&34665===m||0===k&&34853===m||34665===k&&40965===m};n.prototype.exif_format_length=function(k){switch(k){case 1:case 2:case 6:case 7:return 1;
case 3:case 8:return 2;case 4:case 9:case 11:return 4;case 5:case 10:case 12:return 8;default:return 0}};n.prototype.exif_format_read=function(k,m){switch(k){case 1:case 2:return k=this.input[m];case 6:return k=this.input[m],k|33554430*(k&128);case 3:return k=this.read_uint16(m);case 8:return k=this.read_uint16(m),k|131070*(k&32768);case 4:return k=this.read_uint32(m);case 9:return k=this.read_uint32(m),k|0;case 5:case 10:case 11:case 12:return null;case 7:return null;default:return null}};n.prototype.scan_ifd=
function(k,m,a){var g=this.read_uint16(m);m+=2;for(var h=0;h<g;h++){var r=this.read_uint16(m),l=this.read_uint16(m+2),c=this.read_uint32(m+4),d=this.exif_format_length(l),e=c*d,f=4>=e?m+8:this.read_uint32(m+8),q=!1;if(f+e>this.input.length)throw p("unexpected EOF","EBADDATA");for(var t=[],w=f,x=0;x<c;x++,w+=d){var z=this.exif_format_read(l,w);if(null===z){t=null;break}t.push(z)}if(Array.isArray(t)&&2===l){d=String.fromCharCode.apply(null,t);try{t=decodeURIComponent(escape(d))}catch(B){t=d}t&&"\x00"===
t[t.length-1]&&(t=t.slice(0,-1))}this.is_subifd_link(k,r)&&Array.isArray(t)&&Number.isInteger(t[0])&&0<t[0]&&(this.ifds_to_read.push({id:r,offset:t[0]}),q=!0);if(!1===a({is_big_endian:this.big_endian,ifd:k,tag:r,format:l,count:c,entry_offset:m+this.start,data_length:e,data_offset:f+this.start,value:t,is_subifd_link:q})){this.aborted=!0;return}m+=12}0===k&&this.ifds_to_read.push({id:1,offset:this.read_uint32(m)})};N.exports.ExifParser=n;N.exports.get_orientation=function(k){var m=0;try{return(new n(k,
0,k.length)).each(function(a){if(0===a.ifd&&274===a.tag&&Array.isArray(a.value))return m=a.value[0],!1}),m}catch(a){return-1}}},{}],515:[function(b,N,G){function p(h,r){if(h.length<4+r)return null;var l=g(h,r);return h.length<l+r||8>l?null:{boxtype:String.fromCharCode.apply(null,h.slice(r+4,r+8)),data:h.slice(r+8,r+l),end:r+l}}function n(h,r,l){for(var c=0,d=0;d<l;d++)c=256*c+(h[r+d]||0);return c}function k(h,r){for(var l=4;;){l=p(h,l);if(!l)break;if("iprp"===l.boxtype)for(var c=l.data,d=r,e=0;;){e=
p(c,e);if(!e)break;if("ipco"===e.boxtype)for(var f=e.data,q=d,t=0;;){t=p(f,t);if(!t)break;switch(t.boxtype){case "ispe":q.sizes.push({width:g(t.data,4),height:g(t.data,8)});break;case "irot":q.transforms.push({type:"irot",value:t.data[0]&3});break;case "imir":q.transforms.push({type:"imir",value:t.data[0]&1})}t=t.end}e=e.end}if("iloc"===l.boxtype){c=l.data;d=r;e=c[4]>>4&15;f=c[4]&15;q=c[5]>>4&15;t=a(c,6);for(var w=8,x=0;x<t;x++){var z=a(c,w);w+=2;var B=a(c,w);w+=2;var A=n(c,w,q);w+=q;var D=a(c,w);
w+=2;if(0===B&&1===D){B=n(c,w,e);var C=n(c,w+e,f);d.item_loc[z]={length:C,offset:B+A}}w+=D*(e+f)}}if("iinf"===l.boxtype)for(c=l.data,d=r,e=a(c,4),q=6,f=0;f<e;f++){q=p(c,q);if(!q)break;if("infe"===q.boxtype){t=a(q.data,4);w="";for(x=8;x<q.data.length&&q.data[x];x++)w+=String.fromCharCode(q.data[x]);d.item_inf[w]=t}q=q.end}l=l.end}}function m(h){var r=h.reduce(function(l,c){return l.width>c.width||l.width===c.width&&l.height>c.height?l:c});h=h.reduce(function(l,c){return l.height>c.height||l.height===
c.height&&l.width>c.width?l:c});return r.width>h.height||r.width===h.height&&r.height>h.width?r:h}var a=b("./common").readUInt16BE,g=b("./common").readUInt32BE;N.exports.unbox=p;N.exports.readSizeFromMeta=function(h){var r={sizes:[],transforms:[],item_inf:{},item_loc:{}};k(h,r);if(r.sizes.length){h=m(r.sizes);var l=1;r.transforms.forEach(function(d){var e={1:6,2:5,3:8,4:7,5:4,6:3,7:2,8:1},f={1:4,2:3,3:2,4:1,5:6,6:5,7:8,8:7};"imir"===d.type&&(0===d.value?l=f[l]:(l=f[l],l=e[l],l=e[l]));if("irot"===
d.type)for(f=0;f<d.value;f++)l=e[l]});var c=null;r.item_inf.Exif&&(c=r.item_loc[r.item_inf.Exif]);return{width:h.width,height:h.height,orientation:r.transforms.length?l:null,variants:r.sizes,exif_location:c}}};N.exports.getMimeType=function(h){var r=String.fromCharCode.apply(null,h.slice(0,4)),l={};l[r]=!0;for(var c=8;c<h.length;c+=4)l[String.fromCharCode.apply(null,h.slice(c,c+4))]=!0;if(l.mif1||l.msf1||l.miaf)return"avif"===r||"avis"===r||"avio"===r?{type:"avif",mime:"image/avif"}:"heic"===r||"heix"===
r?{type:"heic",mime:"image/heic"}:"hevc"===r||"hevx"===r?{type:"heic",mime:"image/heic-sequence"}:l.avif||l.avis?{type:"avif",mime:"image/avif"}:l.heic||l.heix||l.hevc||l.hevx||l.heis?l.msf1?{type:"heif",mime:"image/heif-sequence"}:{type:"heif",mime:"image/heif"}:{type:"avif",mime:"image/avif"}}},{"./common":513}],516:[function(b,N,G){G=b("../common").str2arr;var p=b("../common").sliceEq,n=b("../common").readUInt32BE,k=b("../miaf_utils"),m=b("../exif_utils"),a=G("ftyp");N.exports=function(g){if(p(g,
4,a)){var h=k.unbox(g,0);if(h){var r=k.getMimeType(h.data);if(r){for(h=h.end;;){var l=k.unbox(g,h);if(!l)break;h=l.end;if("mdat"===l.boxtype)return;if("meta"===l.boxtype){var c=l.data;break}}if(c&&(c=k.readSizeFromMeta(c)))return r={width:c.width,height:c.height,type:r.type,mime:r.mime,wUnits:"px",hUnits:"px"},1<c.variants.length&&(r.variants=c.variants),c.orientation&&(r.orientation=c.orientation),c.exif_location&&c.exif_location.offset+c.exif_location.length<=g.length&&(h=n(g,c.exif_location.offset),
g=g.slice(c.exif_location.offset+h+4,c.exif_location.offset+c.exif_location.length),g=m.get_orientation(g),0<g&&(r.orientation=g)),r}}}}},{"../common":513,"../exif_utils":514,"../miaf_utils":515}],517:[function(b,N,G){G=b("../common").str2arr;var p=b("../common").sliceEq,n=b("../common").readUInt16LE,k=G("BM");N.exports=function(m){if(!(26>m.length)&&p(m,0,k))return{width:n(m,18),height:n(m,22),type:"bmp",mime:"image/bmp",wUnits:"px",hUnits:"px"}}},{"../common":513}],518:[function(b,N,G){G=b("../common").str2arr;
var p=b("../common").sliceEq,n=b("../common").readUInt16LE,k=G("GIF87a"),m=G("GIF89a");N.exports=function(a){if(!(10>a.length)&&(p(a,0,k)||p(a,0,m)))return{width:n(a,6),height:n(a,8),type:"gif",mime:"image/gif",wUnits:"px",hUnits:"px"}}},{"../common":513}],519:[function(b,N,G){var p=b("../common").readUInt16LE;N.exports=function(n){var k=p(n,0),m=p(n,2),a=p(n,4);if(0===k&&1===m&&a){k=[];m={width:0,height:0};for(var g=0;g<a;g++){var h=n[6+16*g]||256,r=n[16*g+7]||256,l={width:h,height:r};k.push(l);
if(h>m.width||r>m.height)m=l}return{width:m.width,height:m.height,variants:k,type:"ico",mime:"image/x-icon",wUnits:"px",hUnits:"px"}}}},{"../common":513}],520:[function(b,N,G){var p=b("../common").readUInt16BE;G=b("../common").str2arr;var n=b("../common").sliceEq,k=b("../exif_utils"),m=G("Exif\x00\x00");N.exports=function(a){if(!(2>a.length)&&255===a[0]&&216===a[1])for(var g=2;!(2>a.length-g)&&255===a[g++];){for(var h=a[g++],r;255===h;)h=a[g++];if(208<=h&&217>=h||1===h)r=0;else if(192<=h&&254>=h){if(2>
a.length-g)break;r=p(a,g)-2;g+=2}else break;if(217===h||218===h)break;var l;225===h&&10<=r&&n(a,g,m)&&(l=k.get_orientation(a.slice(g+6,g+r)));if(5<=r&&192<=h&&207>=h&&196!==h&&200!==h&&204!==h){if(a.length-g<r)break;a={width:p(a,g+3),height:p(a,g+1),type:"jpg",mime:"image/jpeg",wUnits:"px",hUnits:"px"};0<l&&(a.orientation=l);return a}g+=r}}},{"../common":513,"../exif_utils":514}],521:[function(b,N,G){G=b("../common").str2arr;var p=b("../common").sliceEq,n=b("../common").readUInt32BE,k=G("PNG\r\n\n"),
m=G("IHDR");N.exports=function(a){if(!(24>a.length)&&p(a,0,k)&&p(a,12,m))return{width:n(a,16),height:n(a,20),type:"png",mime:"image/png",wUnits:"px",hUnits:"px"}}},{"../common":513}],522:[function(b,N,G){G=b("../common").str2arr;var p=b("../common").sliceEq,n=b("../common").readUInt32BE,k=G("8BPS\x00");N.exports=function(m){if(!(22>m.length)&&p(m,0,k))return{width:n(m,18),height:n(m,14),type:"psd",mime:"image/vnd.adobe.photoshop",wUnits:"px",hUnits:"px"}}},{"../common":513}],523:[function(b,N,G){function p(c){return 32===
c||9===c||13===c||10===c}function n(c){return"number"===typeof c&&isFinite(c)&&0<c}function k(c){return l.test(c)?c.match(l)[0]:"px"}var m=/<[-_.:a-zA-Z0-9][^>]*>/,a=/^<([-_.:a-zA-Z0-9]+:)?svg\s/,g=/[^-]\bwidth="([^%]+?)"|[^-]\bwidth='([^%]+?)'/,h=/\bheight="([^%]+?)"|\bheight='([^%]+?)'/,r=/\bview[bB]ox="(.+?)"|\bview[bB]ox='(.+?)'/,l=/in$|mm$|cm$|pt$|pc$|px$|em$|ex$/;N.exports=function(c){var d=0;var e=c.length;for(239===c[0]&&187===c[1]&&191===c[2]&&(d=3);d<e&&p(c[d]);)d++;d=d===e?!1:60===c[d];
if(d){d="";for(e=0;e<c.length;e++)d+=String.fromCharCode(c[e]);e=(d.match(m)||[""])[0];if(a.test(e)){c=e.match(g);d=e.match(h);e=e.match(r);c=c&&(c[1]||c[2]);d=d&&(d[1]||d[2]);var f=e&&(e[1]||e[2]);e=parseFloat(c);var q=parseFloat(d);if(c&&d)return n(e)&&n(q)?{width:e,height:q,type:"svg",mime:"image/svg+xml",wUnits:k(c),hUnits:k(d)}:void 0;var t=(f||"").split(" ");f=t[2];t=t[3];var w=parseFloat(f),x=parseFloat(t);if(n(w)&&n(x)&&k(f)===k(t)){var z=w/x;return c?n(e)?{width:e,height:e/z,type:"svg",mime:"image/svg+xml",
wUnits:k(c),hUnits:k(c)}:void 0:d?n(q)?{width:q*z,height:q,type:"svg",mime:"image/svg+xml",wUnits:k(d),hUnits:k(d)}:void 0:{width:w,height:x,type:"svg",mime:"image/svg+xml",wUnits:k(f),hUnits:k(t)}}}}}},{}],524:[function(b,N,G){function p(d,e,f){return f?g(d,e):a(d,e)}function n(d,e,f){return f?r(d,e):h(d,e)}function k(d,e,f){var q=p(d,e+2,f);return 1!==n(d,e+4,f)||3!==q&&4!==q?null:3===q?p(d,e+8,f):n(d,e+8,f)}G=b("../common").str2arr;var m=b("../common").sliceEq,a=b("../common").readUInt16LE,g=b("../common").readUInt16BE,
h=b("../common").readUInt32LE,r=b("../common").readUInt32BE,l=G("II*\x00"),c=G("MM\x00*");N.exports=function(d){if(!(8>d.length)&&(m(d,0,l)||m(d,0,c))){var e=77===d[0],f=n(d,4,e)-8;if(!(0>f||(f+=8,2>d.length-f))){var q=12*p(d,f+0,e);if(!(0>=q||(f+=2,d.length-f<q))){var t,w,x;for(t=0;t<q;t+=12){var z=p(d,f+t,e);256===z?w=k(d,f+t,e):257===z&&(x=k(d,f+t,e))}if(w&&x)return{width:w,height:x,type:"tiff",mime:"image/tiff",wUnits:"px",hUnits:"px"}}}}}},{"../common":513}],525:[function(b,N,G){G=b("../common").str2arr;
var p=b("../common").sliceEq,n=b("../common").readUInt16LE,k=b("../common").readUInt32LE,m=b("../exif_utils"),a=G("RIFF"),g=G("WEBP");N.exports=function(h){if(!(16>h.length)&&(p(h,0,a)||p(h,8,g))){var r=12,l=null,c=0,d=k(h,4)+8;if(!(d>h.length)){for(;r+8<d;)if(0===h[r])r++;else{var e=String.fromCharCode.apply(null,h.slice(r,r+4)),f=k(h,r+4);"VP8 "===e&&10<=f?l||(l=h,e=r+8,l=157!==l[e+3]||1!==l[e+4]||42!==l[e+5]?void 0:{width:n(l,e+6)&16383,height:n(l,e+8)&16383,type:"webp",mime:"image/webp",wUnits:"px",
hUnits:"px"}):"VP8L"===e&&9<=f?l||(l=r+8,47!==h[l]?l=void 0:(l=k(h,l+1),l={width:(l&16383)+1,height:(l>>14&16383)+1,type:"webp",mime:"image/webp",wUnits:"px",hUnits:"px"})):"VP8X"===e&&10<=f?l||(l=r+8,l={width:(h[l+6]<<16|h[l+5]<<8|h[l+4])+1,height:(h[l+9]<<l|h[l+8]<<8|h[l+7])+1,type:"webp",mime:"image/webp",wUnits:"px",hUnits:"px"}):"EXIF"===e&&(c=m.get_orientation(h.slice(r+8,r+8+f)),r=Infinity);r+=8+f}if(l)return 0<c&&(l.orientation=c),l}}}},{"../common":513,"../exif_utils":514}],526:[function(b,
N,G){N.exports={avif:b("./parse_sync/avif"),bmp:b("./parse_sync/bmp"),gif:b("./parse_sync/gif"),ico:b("./parse_sync/ico"),jpeg:b("./parse_sync/jpeg"),png:b("./parse_sync/png"),psd:b("./parse_sync/psd"),svg:b("./parse_sync/svg"),tiff:b("./parse_sync/tiff"),webp:b("./parse_sync/webp")}},{"./parse_sync/avif":516,"./parse_sync/bmp":517,"./parse_sync/gif":518,"./parse_sync/ico":519,"./parse_sync/jpeg":520,"./parse_sync/png":521,"./parse_sync/psd":522,"./parse_sync/svg":523,"./parse_sync/tiff":524,"./parse_sync/webp":525}],
527:[function(b,N,G){var p=b("./lib/parsers_sync");N.exports=function(n){a:{for(var k=Object.keys(p),m=0;m<k.length;m++){var a=p[k[m]](n);if(a){n=a;break a}}n=null}return n};N.exports.parsers=p},{"./lib/parsers_sync":526}],528:[function(b,N,G){function p(){throw Error("setTimeout has not been defined");}function n(){throw Error("clearTimeout has not been defined");}function k(t){if(l===setTimeout)return setTimeout(t,0);if((l===p||!l)&&setTimeout)return l=setTimeout,setTimeout(t,0);try{return l(t,
0)}catch(w){try{return l.call(null,t,0)}catch(x){return l.call(this,t,0)}}}function m(t){if(c===clearTimeout)return clearTimeout(t);if((c===n||!c)&&clearTimeout)return c=clearTimeout,clearTimeout(t);try{return c(t)}catch(w){try{return c.call(null,t)}catch(x){return c.call(this,t)}}}function a(){e&&f&&(e=!1,f.length?d=f.concat(d):q=-1,d.length&&g())}function g(){if(!e){var t=k(a);e=!0;for(var w=d.length;w;){f=d;for(d=[];++q<w;)f&&f[q].run();q=-1;w=d.length}f=null;e=!1;m(t)}}function h(t,w){this.fun=
t;this.array=w}function r(){}b=N.exports={};try{var l="function"===typeof setTimeout?setTimeout:p}catch(t){l=p}try{var c="function"===typeof clearTimeout?clearTimeout:n}catch(t){c=n}var d=[],e=!1,f,q=-1;b.nextTick=function(t){var w=Array(arguments.length-1);if(1<arguments.length)for(var x=1;x<arguments.length;x++)w[x-1]=arguments[x];d.push(new h(t,w));1!==d.length||e||k(g)};h.prototype.run=function(){this.fun.apply(null,this.array)};b.title="browser";b.browser=!0;b.env={};b.argv=[];b.version="";b.versions=
{};b.on=r;b.addListener=r;b.once=r;b.off=r;b.removeListener=r;b.removeAllListeners=r;b.emit=r;b.prependListener=r;b.prependOnceListener=r;b.listeners=function(t){return[]};b.binding=function(t){throw Error("process.binding is not supported");};b.cwd=function(){return"/"};b.chdir=function(t){throw Error("process.chdir is not supported");};b.umask=function(){return 0}},{}],529:[function(b,N,G){N.exports=b("gl-quat/slerp")},{"gl-quat/slerp":329}],530:[function(b,N,G){(function(p){(function(){for(var n=
b("performance-now"),k="undefined"===typeof window?p:window,m=["moz","webkit"],a=k.requestAnimationFrame,g=k.cancelAnimationFrame||k.cancelRequestAnimationFrame,h=0;!a&&h<m.length;h++)a=k[m[h]+"RequestAnimationFrame"],g=k[m[h]+"CancelAnimationFrame"]||k[m[h]+"CancelRequestAnimationFrame"];if(!a||!g){var r=0,l=0,c=[],d=1E3/60;a=function(e){if(0===c.length){var f=n(),q=Math.max(0,d-(f-r));r=q+f;setTimeout(function(){for(var t=c.slice(0),w=c.length=0;w<t.length;w++)if(!t[w].cancelled)try{t[w].callback(r)}catch(x){setTimeout(function(){throw x;
},0)}},Math.round(q))}c.push({handle:++l,callback:e,cancelled:!1});return l};g=function(e){for(var f=0;f<c.length;f++)c[f].handle===e&&(c[f].cancelled=!0)}}N.exports=function(e){return a.call(k,e)};N.exports.cancel=function(){g.apply(k,arguments)};N.exports.polyfill=function(e){e||(e=k);e.requestAnimationFrame=a;e.cancelAnimationFrame=g}}).call(this)}).call(this,"undefined"!==typeof xe?xe:"undefined"!==typeof self?self:"undefined"!==typeof window?window:{})},{"performance-now":495}],531:[function(b,
N,G){var p=b("big-rat/add");N.exports=function(n,k){for(var m=n.length,a=Array(m),g=0;g<m;++g)a[g]=p(n[g],k[g]);return a}},{"big-rat/add":87}],532:[function(b,N,G){N.exports=function(n){for(var k=Array(n.length),m=0;m<n.length;++m)k[m]=p(n[m]);return k};var p=b("big-rat")},{"big-rat":90}],533:[function(b,N,G){var p=b("big-rat"),n=b("big-rat/mul");N.exports=function(k,m){m=p(m);for(var a=k.length,g=Array(a),h=0;h<a;++h)g[h]=n(k[h],m);return g}},{"big-rat":90,"big-rat/mul":99}],534:[function(b,N,G){var p=
b("big-rat/sub");N.exports=function(n,k){for(var m=n.length,a=Array(m),g=0;g<m;++g)a[g]=p(n[g],k[g]);return a}},{"big-rat/sub":101}],535:[function(b,N,G){var p=b("compare-cell"),n=b("compare-oriented-cell"),k=b("cell-orientation");N.exports=function(m){m.sort(n);for(var a=m.length,g=0,h=0;h<a;++h){var r=m[h],l=k(r);if(0!==l){if(0<g){var c=m[g-1];if(0===p(r,c)&&k(c)!==l){--g;continue}}m[g++]=r}}m.length=g;return m}},{"cell-orientation":123,"compare-cell":139,"compare-oriented-cell":140}],536:[function(b,
N,G){var p=b("array-bounds"),n=b("color-normalize"),k=b("update-diff"),m=b("pick-by-alias"),a=b("object-assign"),g=b("flatten-vertex-data");b=b("to-float32");var h=b.float32,r=b.fract32;N.exports=function(c,d){function e(J){J?t(J):null===J&&w();f()}function f(J){if("number"===typeof J)return q(J);J&&!Array.isArray(J)&&(J=[J]);c._refresh();B.forEach(function(K,M){K&&(J&&(K.draw=J[M]?!0:!1),K.draw?q(M):K.draw=!0)})}function q(J){"number"===typeof J&&(J=B[J]);null!=J&&J&&J.count&&J.color&&J.opacity&&
J.positions&&1<J.positions.length&&(J.scaleRatio=[J.scale[0]*J.viewport.width,J.scale[1]*J.viewport.height],F(J),J.after&&J.after(J))}function t(J){if(J){null!=J.length?"number"===typeof J[0]&&(J=[{positions:J}]):Array.isArray(J)||(J=[J]);var K=0,M=0;e.groups=B=J.map(function(L,Q){var Z=B[Q];if(L)"function"===typeof L?L={after:L}:"number"===typeof L[0]&&(L={positions:L});else return Z;L=m(L,{color:"color colors fill",capSize:"capSize cap capsize cap-size",lineWidth:"lineWidth line-width width line thickness",
opacity:"opacity alpha",range:"range dataBox",viewport:"viewport viewBox",errors:"errors error",positions:"positions position data points"});Z||(B[Q]=Z={id:Q,scale:null,translate:null,scaleFract:null,translateFract:null,draw:!0},L=a({},z,L));k(Z,L,[{lineWidth:function(ba){return.5*+ba},capSize:function(ba){return.5*+ba},opacity:parseFloat,errors:function(ba){ba=g(ba);M+=ba.length;return ba},positions:function(ba,V){ba=g(ba,"float64");V.count=Math.floor(ba.length/2);V.bounds=p(ba,2);V.offset=K;K+=
V.count;return ba}},{color:function(ba,V){V=V.count;ba||(ba="transparent");if(!Array.isArray(ba)||"number"===typeof ba[0]){var S=ba;ba=Array(V);for(var T=0;T<V;T++)ba[T]=S}if(ba.length<V)throw Error("Not enough colors");S=new Uint8Array(4*V);for(T=0;T<V;T++){var fa=n(ba[T],"uint8");S.set(fa,4*T)}return S},range:function(ba,V,S){S=V.bounds;ba||(ba=S);V.scale=[1/(ba[2]-ba[0]),1/(ba[3]-ba[1])];V.translate=[-ba[0],-ba[1]];V.scaleFract=r(V.scale);V.translateFract=r(V.translate);return ba},viewport:function(ba){if(Array.isArray(ba))var V=
{x:ba[0],y:ba[1],width:ba[2]-ba[0],height:ba[3]-ba[1]};else ba?(V={x:ba.x||ba.left||0,y:ba.y||ba.top||0},V.width=ba.right?ba.right-V.x:ba.w||ba.width||0,V.height=ba.bottom?ba.bottom-V.y:ba.h||ba.height||0):V={x:0,y:0,width:x.drawingBufferWidth,height:x.drawingBufferHeight};return V}}]);return Z});if(K||M){J=B.reduce(function(L,Q,Z){return L+(Q?Q.count:0)},0);var H=new Float64Array(2*J),O=new Uint8Array(4*J),I=new Float32Array(4*J);B.forEach(function(L,Q){if(L){Q=L.positions;var Z=L.offset,ba=L.errors;
L.count&&(O.set(L.color,4*Z),I.set(ba,4*Z),H.set(Q,2*Z))}});J=h(H);D(J);J=r(H,J);C(J);A(O);v(I)}}}function w(){D.destroy();C.destroy();A.destroy();v.destroy();y.destroy()}"function"===typeof c?(d||(d={}),d.regl=c):d=c;d.length&&(d.positions=d);c=d.regl;if(!c.hasExtension("ANGLE_instanced_arrays"))throw Error("regl-error2d: `ANGLE_instanced_arrays` extension should be enabled");var x=c._gl,z={color:"black",capSize:5,lineWidth:1,opacity:1,viewport:null,range:null,offset:0,count:0,bounds:null,positions:[],
errors:[]},B=[];var A=c.buffer({usage:"dynamic",type:"uint8",data:new Uint8Array(0)});var D=c.buffer({usage:"dynamic",type:"float",data:new Uint8Array(0)});var C=c.buffer({usage:"dynamic",type:"float",data:new Uint8Array(0)});var v=c.buffer({usage:"dynamic",type:"float",data:new Uint8Array(0)});var y=c.buffer({usage:"static",type:"float",data:l});t(d);var F=c({vert:"\n\t\tprecision highp float;\n\n\t\tattribute vec2 position, positionFract;\n\t\tattribute vec4 error;\n\t\tattribute vec4 color;\n\n\t\tattribute vec2 direction, lineOffset, capOffset;\n\n\t\tuniform vec4 viewport;\n\t\tuniform float lineWidth, capSize;\n\t\tuniform vec2 scale, scaleFract, translate, translateFract;\n\n\t\tvarying vec4 fragColor;\n\n\t\tvoid main() {\n\t\t\tfragColor \x3d color / 255.;\n\n\t\t\tvec2 pixelOffset \x3d lineWidth * lineOffset + (capSize + lineWidth) * capOffset;\n\n\t\t\tvec2 dxy \x3d -step(.5, direction.xy) * error.xz + step(direction.xy, vec2(-.5)) * error.yw;\n\n\t\t\tvec2 position \x3d position + dxy;\n\n\t\t\tvec2 pos \x3d (position + translate) * scale\n\t\t\t\t+ (positionFract + translateFract) * scale\n\t\t\t\t+ (position + translate) * scaleFract\n\t\t\t\t+ (positionFract + translateFract) * scaleFract;\n\n\t\t\tpos +\x3d pixelOffset / viewport.zw;\n\n\t\t\tgl_Position \x3d vec4(pos * 2. - 1., 0, 1);\n\t\t}\n\t\t",
frag:"\n\t\tprecision highp float;\n\n\t\tvarying vec4 fragColor;\n\n\t\tuniform float opacity;\n\n\t\tvoid main() {\n\t\t\tgl_FragColor \x3d fragColor;\n\t\t\tgl_FragColor.a *\x3d opacity;\n\t\t}\n\t\t",uniforms:{range:c.prop("range"),lineWidth:c.prop("lineWidth"),capSize:c.prop("capSize"),opacity:c.prop("opacity"),scale:c.prop("scale"),translate:c.prop("translate"),scaleFract:c.prop("scaleFract"),translateFract:c.prop("translateFract"),viewport:function(J,K){return[K.viewport.x,K.viewport.y,J.viewportWidth,
J.viewportHeight]}},attributes:{color:{buffer:A,offset:function(J,K){return 4*K.offset},divisor:1},position:{buffer:D,offset:function(J,K){return 8*K.offset},divisor:1},positionFract:{buffer:C,offset:function(J,K){return 8*K.offset},divisor:1},error:{buffer:v,offset:function(J,K){return 16*K.offset},divisor:1},direction:{buffer:y,stride:24,offset:0},lineOffset:{buffer:y,stride:24,offset:8},capOffset:{buffer:y,stride:24,offset:16}},primitive:"triangles",blend:{enable:!0,color:[0,0,0,0],equation:{rgb:"add",
alpha:"add"},func:{srcRGB:"src alpha",dstRGB:"one minus src alpha",srcAlpha:"one minus dst alpha",dstAlpha:"one"}},depth:{enable:!1},scissor:{enable:!0,box:c.prop("viewport")},viewport:c.prop("viewport"),stencil:!1,instances:c.prop("count"),count:l.length});a(e,{update:t,draw:f,destroy:w,regl:c,gl:x,canvas:x.canvas,groups:B});return e};var l=[[1,0,0,1,0,0],[1,0,0,-1,0,0],[-1,0,0,-1,0,0],[-1,0,0,-1,0,0],[-1,0,0,1,0,0],[1,0,0,1,0,0],[1,0,-1,0,0,1],[1,0,-1,0,0,-1],[1,0,1,0,0,-1],[1,0,1,0,0,-1],[1,0,
1,0,0,1],[1,0,-1,0,0,1],[-1,0,-1,0,0,1],[-1,0,-1,0,0,-1],[-1,0,1,0,0,-1],[-1,0,1,0,0,-1],[-1,0,1,0,0,1],[-1,0,-1,0,0,1],[0,1,1,0,0,0],[0,1,-1,0,0,0],[0,-1,-1,0,0,0],[0,-1,-1,0,0,0],[0,1,1,0,0,0],[0,-1,1,0,0,0],[0,1,0,-1,1,0],[0,1,0,-1,-1,0],[0,1,0,1,-1,0],[0,1,0,1,1,0],[0,1,0,-1,1,0],[0,1,0,1,-1,0],[0,-1,0,-1,1,0],[0,-1,0,-1,-1,0],[0,-1,0,1,-1,0],[0,-1,0,1,1,0],[0,-1,0,-1,1,0],[0,-1,0,1,-1,0]]},{"array-bounds":76,"color-normalize":131,"flatten-vertex-data":252,"object-assign":487,"pick-by-alias":498,
"to-float32":599,"update-diff":621}],537:[function(b,N,G){function p(q,t){if(!(this instanceof p))return new p(q,t);"function"===typeof q?(t||(t={}),t.regl=q):t=q;t.length&&(t.positions=t);q=t.regl;if(!q.hasExtension("ANGLE_instanced_arrays"))throw Error("regl-error2d: `ANGLE_instanced_arrays` extension should be enabled");this.gl=q._gl;this.regl=q;this.passes=[];this.shaders=p.shaders.has(q)?p.shaders.get(q):p.shaders.set(q,p.createShaders(q)).get(q);this.update(t)}var n=b("color-normalize"),k=b("array-bounds"),
m=b("object-assign"),a=b("glslify"),g=b("pick-by-alias"),h=b("flatten-vertex-data"),r=b("earcut"),l=b("array-normalize");G=b("to-float32");var c=G.float32,d=G.fract32;G=b("es6-weak-map");var e=b("parse-rect"),f=b("array-find-index");N.exports=p;p.dashMult=2;p.maxPatternLength=256;p.precisionThreshold=3E6;p.maxPoints=1E4;p.maxLines=2048;p.shaders=new G;p.createShaders=function(q){var t=q.buffer({usage:"static",type:"float",data:[0,1,0,0,1,1,1,0]}),w={primitive:"triangle strip",instances:q.prop("count"),
count:4,offset:0,uniforms:{miterMode:function(B,A){return"round"===A.join?2:1},miterLimit:q.prop("miterLimit"),scale:q.prop("scale"),scaleFract:q.prop("scaleFract"),translateFract:q.prop("translateFract"),translate:q.prop("translate"),thickness:q.prop("thickness"),dashPattern:q.prop("dashTexture"),opacity:q.prop("opacity"),pixelRatio:q.context("pixelRatio"),id:q.prop("id"),dashSize:q.prop("dashLength"),viewport:function(B,A){return[A.viewport.x,A.viewport.y,B.viewportWidth,B.viewportHeight]},depth:q.prop("depth")},
blend:{enable:!0,color:[0,0,0,0],equation:{rgb:"add",alpha:"add"},func:{srcRGB:"src alpha",dstRGB:"one minus src alpha",srcAlpha:"one minus dst alpha",dstAlpha:"one"}},depth:{enable:function(B,A){return!A.overlay}},stencil:{enable:!1},scissor:{enable:!0,box:q.prop("viewport")},viewport:q.prop("viewport")},x=q(m({vert:a(["precision highp float;\n#define GLSLIFY 1\n\nattribute vec2 aCoord, bCoord, aCoordFract, bCoordFract;\nattribute vec4 color;\nattribute float lineEnd, lineTop;\n\nuniform vec2 scale, scaleFract, translate, translateFract;\nuniform float thickness, pixelRatio, id, depth;\nuniform vec4 viewport;\n\nvarying vec4 fragColor;\nvarying vec2 tangent;\n\nvec2 project(vec2 position, vec2 positionFract, vec2 scale, vec2 scaleFract, vec2 translate, vec2 translateFract) {\n\t// the order is important\n\treturn position * scale + translate\n       + positionFract * scale + translateFract\n       + position * scaleFract\n       + positionFract * scaleFract;\n}\n\nvoid main() {\n\tfloat lineStart \x3d 1. - lineEnd;\n\tfloat lineOffset \x3d lineTop * 2. - 1.;\n\n\tvec2 diff \x3d (bCoord + bCoordFract - aCoord - aCoordFract);\n\ttangent \x3d normalize(diff * scale * viewport.zw);\n\tvec2 normal \x3d vec2(-tangent.y, tangent.x);\n\n\tvec2 position \x3d project(aCoord, aCoordFract, scale, scaleFract, translate, translateFract) * lineStart\n\t\t+ project(bCoord, bCoordFract, scale, scaleFract, translate, translateFract) * lineEnd\n\n\t\t+ thickness * normal * .5 * lineOffset / viewport.zw;\n\n\tgl_Position \x3d vec4(position * 2.0 - 1.0, depth, 1);\n\n\tfragColor \x3d color / 255.;\n}\n"]),
frag:a(["precision highp float;\n#define GLSLIFY 1\n\nuniform sampler2D dashPattern;\n\nuniform float dashSize, pixelRatio, thickness, opacity, id;\n\nvarying vec4 fragColor;\nvarying vec2 tangent;\n\nvoid main() {\n\tfloat alpha \x3d 1.;\n\n\tfloat t \x3d fract(dot(tangent, gl_FragCoord.xy) / dashSize) * .5 + .25;\n\tfloat dash \x3d texture2D(dashPattern, vec2(t, .5)).r;\n\n\tgl_FragColor \x3d fragColor;\n\tgl_FragColor.a *\x3d alpha * opacity * dash;\n}\n"]),attributes:{lineEnd:{buffer:t,divisor:0,
stride:8,offset:0},lineTop:{buffer:t,divisor:0,stride:8,offset:4},aCoord:{buffer:q.prop("positionBuffer"),stride:8,offset:8,divisor:1},bCoord:{buffer:q.prop("positionBuffer"),stride:8,offset:16,divisor:1},aCoordFract:{buffer:q.prop("positionFractBuffer"),stride:8,offset:8,divisor:1},bCoordFract:{buffer:q.prop("positionFractBuffer"),stride:8,offset:16,divisor:1},color:{buffer:q.prop("colorBuffer"),stride:4,offset:0,divisor:1}}},w));try{var z=q(m({cull:{enable:!0,face:"back"},vert:a(["precision highp float;\n#define GLSLIFY 1\n\nattribute vec2 aCoord, bCoord, nextCoord, prevCoord;\nattribute vec4 aColor, bColor;\nattribute float lineEnd, lineTop;\n\nuniform vec2 scale, translate;\nuniform float thickness, pixelRatio, id, depth;\nuniform vec4 viewport;\nuniform float miterLimit, miterMode;\n\nvarying vec4 fragColor;\nvarying vec4 startCutoff, endCutoff;\nvarying vec2 tangent;\nvarying vec2 startCoord, endCoord;\nvarying float enableStartMiter, enableEndMiter;\n\nconst float REVERSE_THRESHOLD \x3d -.875;\nconst float MIN_DIFF \x3d 1e-6;\n\n// TODO: possible optimizations: avoid overcalculating all for vertices and calc just one instead\n// TODO: precalculate dot products, normalize things beforehead etc.\n// TODO: refactor to rectangular algorithm\n\nfloat distToLine(vec2 p, vec2 a, vec2 b) {\n\tvec2 diff \x3d b - a;\n\tvec2 perp \x3d normalize(vec2(-diff.y, diff.x));\n\treturn dot(p - a, perp);\n}\n\nbool isNaN( float val ){\n  return ( val \x3c 0.0 || 0.0 \x3c val || val \x3d\x3d 0.0 ) ? false : true;\n}\n\nvoid main() {\n\tvec2 aCoord \x3d aCoord, bCoord \x3d bCoord, prevCoord \x3d prevCoord, nextCoord \x3d nextCoord;\n\n  vec2 adjustedScale;\n  adjustedScale.x \x3d (abs(scale.x) \x3c MIN_DIFF) ? MIN_DIFF : scale.x;\n  adjustedScale.y \x3d (abs(scale.y) \x3c MIN_DIFF) ? MIN_DIFF : scale.y;\n\n  vec2 scaleRatio \x3d adjustedScale * viewport.zw;\n\tvec2 normalWidth \x3d thickness / scaleRatio;\n\n\tfloat lineStart \x3d 1. - lineEnd;\n\tfloat lineBot \x3d 1. - lineTop;\n\n\tfragColor \x3d (lineStart * aColor + lineEnd * bColor) / 255.;\n\n\tif (isNaN(aCoord.x) || isNaN(aCoord.y) || isNaN(bCoord.x) || isNaN(bCoord.y)) return;\n\n\tif (aCoord \x3d\x3d prevCoord) prevCoord \x3d aCoord + normalize(bCoord - aCoord);\n\tif (bCoord \x3d\x3d nextCoord) nextCoord \x3d bCoord - normalize(bCoord - aCoord);\n\n\tvec2 prevDiff \x3d aCoord - prevCoord;\n\tvec2 currDiff \x3d bCoord - aCoord;\n\tvec2 nextDiff \x3d nextCoord - bCoord;\n\n\tvec2 prevTangent \x3d normalize(prevDiff * scaleRatio);\n\tvec2 currTangent \x3d normalize(currDiff * scaleRatio);\n\tvec2 nextTangent \x3d normalize(nextDiff * scaleRatio);\n\n\tvec2 prevNormal \x3d vec2(-prevTangent.y, prevTangent.x);\n\tvec2 currNormal \x3d vec2(-currTangent.y, currTangent.x);\n\tvec2 nextNormal \x3d vec2(-nextTangent.y, nextTangent.x);\n\n\tvec2 startJoinDirection \x3d normalize(prevTangent - currTangent);\n\tvec2 endJoinDirection \x3d normalize(currTangent - nextTangent);\n\n\t// collapsed/unidirectional segment cases\n\t// FIXME: there should be more elegant solution\n\tvec2 prevTanDiff \x3d abs(prevTangent - currTangent);\n\tvec2 nextTanDiff \x3d abs(nextTangent - currTangent);\n\tif (max(prevTanDiff.x, prevTanDiff.y) \x3c MIN_DIFF) {\n\t\tstartJoinDirection \x3d currNormal;\n\t}\n\tif (max(nextTanDiff.x, nextTanDiff.y) \x3c MIN_DIFF) {\n\t\tendJoinDirection \x3d currNormal;\n\t}\n\tif (aCoord \x3d\x3d bCoord) {\n\t\tendJoinDirection \x3d startJoinDirection;\n\t\tcurrNormal \x3d prevNormal;\n\t\tcurrTangent \x3d prevTangent;\n\t}\n\n\ttangent \x3d currTangent;\n\n\t//calculate join shifts relative to normals\n\tfloat startJoinShift \x3d dot(currNormal, startJoinDirection);\n\tfloat endJoinShift \x3d dot(currNormal, endJoinDirection);\n\n\tfloat startMiterRatio \x3d abs(1. / startJoinShift);\n\tfloat endMiterRatio \x3d abs(1. / endJoinShift);\n\n\tvec2 startJoin \x3d startJoinDirection * startMiterRatio;\n\tvec2 endJoin \x3d endJoinDirection * endMiterRatio;\n\n\tvec2 startTopJoin, startBotJoin, endTopJoin, endBotJoin;\n\tstartTopJoin \x3d sign(startJoinShift) * startJoin * .5;\n\tstartBotJoin \x3d -startTopJoin;\n\n\tendTopJoin \x3d sign(endJoinShift) * endJoin * .5;\n\tendBotJoin \x3d -endTopJoin;\n\n\tvec2 aTopCoord \x3d aCoord + normalWidth * startTopJoin;\n\tvec2 bTopCoord \x3d bCoord + normalWidth * endTopJoin;\n\tvec2 aBotCoord \x3d aCoord + normalWidth * startBotJoin;\n\tvec2 bBotCoord \x3d bCoord + normalWidth * endBotJoin;\n\n\t//miter anti-clipping\n\tfloat baClipping \x3d distToLine(bCoord, aCoord, aBotCoord) / dot(normalize(normalWidth * endBotJoin), normalize(normalWidth.yx * vec2(-startBotJoin.y, startBotJoin.x)));\n\tfloat abClipping \x3d distToLine(aCoord, bCoord, bTopCoord) / dot(normalize(normalWidth * startBotJoin), normalize(normalWidth.yx * vec2(-endBotJoin.y, endBotJoin.x)));\n\n\t//prevent close to reverse direction switch\n\tbool prevReverse \x3d dot(currTangent, prevTangent) \x3c\x3d REVERSE_THRESHOLD \x26\x26 abs(dot(currTangent, prevNormal)) * min(length(prevDiff), length(currDiff)) \x3c  length(normalWidth * currNormal);\n\tbool nextReverse \x3d dot(currTangent, nextTangent) \x3c\x3d REVERSE_THRESHOLD \x26\x26 abs(dot(currTangent, nextNormal)) * min(length(nextDiff), length(currDiff)) \x3c  length(normalWidth * currNormal);\n\n\tif (prevReverse) {\n\t\t//make join rectangular\n\t\tvec2 miterShift \x3d normalWidth * startJoinDirection * miterLimit * .5;\n\t\tfloat normalAdjust \x3d 1. - min(miterLimit / startMiterRatio, 1.);\n\t\taBotCoord \x3d aCoord + miterShift - normalAdjust * normalWidth * currNormal * .5;\n\t\taTopCoord \x3d aCoord + miterShift + normalAdjust * normalWidth * currNormal * .5;\n\t}\n\telse if (!nextReverse \x26\x26 baClipping \x3e 0. \x26\x26 baClipping \x3c length(normalWidth * endBotJoin)) {\n\t\t//handle miter clipping\n\t\tbTopCoord -\x3d normalWidth * endTopJoin;\n\t\tbTopCoord +\x3d normalize(endTopJoin * normalWidth) * baClipping;\n\t}\n\n\tif (nextReverse) {\n\t\t//make join rectangular\n\t\tvec2 miterShift \x3d normalWidth * endJoinDirection * miterLimit * .5;\n\t\tfloat normalAdjust \x3d 1. - min(miterLimit / endMiterRatio, 1.);\n\t\tbBotCoord \x3d bCoord + miterShift - normalAdjust * normalWidth * currNormal * .5;\n\t\tbTopCoord \x3d bCoord + miterShift + normalAdjust * normalWidth * currNormal * .5;\n\t}\n\telse if (!prevReverse \x26\x26 abClipping \x3e 0. \x26\x26 abClipping \x3c length(normalWidth * startBotJoin)) {\n\t\t//handle miter clipping\n\t\taBotCoord -\x3d normalWidth * startBotJoin;\n\t\taBotCoord +\x3d normalize(startBotJoin * normalWidth) * abClipping;\n\t}\n\n\tvec2 aTopPosition \x3d (aTopCoord) * adjustedScale + translate;\n\tvec2 aBotPosition \x3d (aBotCoord) * adjustedScale + translate;\n\n\tvec2 bTopPosition \x3d (bTopCoord) * adjustedScale + translate;\n\tvec2 bBotPosition \x3d (bBotCoord) * adjustedScale + translate;\n\n\t//position is normalized 0..1 coord on the screen\n\tvec2 position \x3d (aTopPosition * lineTop + aBotPosition * lineBot) * lineStart + (bTopPosition * lineTop + bBotPosition * lineBot) * lineEnd;\n\n\tstartCoord \x3d aCoord * scaleRatio + translate * viewport.zw + viewport.xy;\n\tendCoord \x3d bCoord * scaleRatio + translate * viewport.zw + viewport.xy;\n\n\tgl_Position \x3d vec4(position  * 2.0 - 1.0, depth, 1);\n\n\tenableStartMiter \x3d step(dot(currTangent, prevTangent), .5);\n\tenableEndMiter \x3d step(dot(currTangent, nextTangent), .5);\n\n\t//bevel miter cutoffs\n\tif (miterMode \x3d\x3d 1.) {\n\t\tif (enableStartMiter \x3d\x3d 1.) {\n\t\t\tvec2 startMiterWidth \x3d vec2(startJoinDirection) * thickness * miterLimit * .5;\n\t\t\tstartCutoff \x3d vec4(aCoord, aCoord);\n\t\t\tstartCutoff.zw +\x3d vec2(-startJoinDirection.y, startJoinDirection.x) / scaleRatio;\n\t\t\tstartCutoff \x3d startCutoff * scaleRatio.xyxy + translate.xyxy * viewport.zwzw;\n\t\t\tstartCutoff +\x3d viewport.xyxy;\n\t\t\tstartCutoff +\x3d startMiterWidth.xyxy;\n\t\t}\n\n\t\tif (enableEndMiter \x3d\x3d 1.) {\n\t\t\tvec2 endMiterWidth \x3d vec2(endJoinDirection) * thickness * miterLimit * .5;\n\t\t\tendCutoff \x3d vec4(bCoord, bCoord);\n\t\t\tendCutoff.zw +\x3d vec2(-endJoinDirection.y, endJoinDirection.x)  / scaleRatio;\n\t\t\tendCutoff \x3d endCutoff * scaleRatio.xyxy + translate.xyxy * viewport.zwzw;\n\t\t\tendCutoff +\x3d viewport.xyxy;\n\t\t\tendCutoff +\x3d endMiterWidth.xyxy;\n\t\t}\n\t}\n\n\t//round miter cutoffs\n\telse if (miterMode \x3d\x3d 2.) {\n\t\tif (enableStartMiter \x3d\x3d 1.) {\n\t\t\tvec2 startMiterWidth \x3d vec2(startJoinDirection) * thickness * abs(dot(startJoinDirection, currNormal)) * .5;\n\t\t\tstartCutoff \x3d vec4(aCoord, aCoord);\n\t\t\tstartCutoff.zw +\x3d vec2(-startJoinDirection.y, startJoinDirection.x) / scaleRatio;\n\t\t\tstartCutoff \x3d startCutoff * scaleRatio.xyxy + translate.xyxy * viewport.zwzw;\n\t\t\tstartCutoff +\x3d viewport.xyxy;\n\t\t\tstartCutoff +\x3d startMiterWidth.xyxy;\n\t\t}\n\n\t\tif (enableEndMiter \x3d\x3d 1.) {\n\t\t\tvec2 endMiterWidth \x3d vec2(endJoinDirection) * thickness * abs(dot(endJoinDirection, currNormal)) * .5;\n\t\t\tendCutoff \x3d vec4(bCoord, bCoord);\n\t\t\tendCutoff.zw +\x3d vec2(-endJoinDirection.y, endJoinDirection.x)  / scaleRatio;\n\t\t\tendCutoff \x3d endCutoff * scaleRatio.xyxy + translate.xyxy * viewport.zwzw;\n\t\t\tendCutoff +\x3d viewport.xyxy;\n\t\t\tendCutoff +\x3d endMiterWidth.xyxy;\n\t\t}\n\t}\n}\n"]),
frag:a(["precision highp float;\n#define GLSLIFY 1\n\nuniform sampler2D dashPattern;\nuniform float dashSize, pixelRatio, thickness, opacity, id, miterMode;\n\nvarying vec4 fragColor;\nvarying vec2 tangent;\nvarying vec4 startCutoff, endCutoff;\nvarying vec2 startCoord, endCoord;\nvarying float enableStartMiter, enableEndMiter;\n\nfloat distToLine(vec2 p, vec2 a, vec2 b) {\n\tvec2 diff \x3d b - a;\n\tvec2 perp \x3d normalize(vec2(-diff.y, diff.x));\n\treturn dot(p - a, perp);\n}\n\nvoid main() {\n\tfloat alpha \x3d 1., distToStart, distToEnd;\n\tfloat cutoff \x3d thickness * .5;\n\n\t//bevel miter\n\tif (miterMode \x3d\x3d 1.) {\n\t\tif (enableStartMiter \x3d\x3d 1.) {\n\t\t\tdistToStart \x3d distToLine(gl_FragCoord.xy, startCutoff.xy, startCutoff.zw);\n\t\t\tif (distToStart \x3c -1.) {\n\t\t\t\tdiscard;\n\t\t\t\treturn;\n\t\t\t}\n\t\t\talpha *\x3d min(max(distToStart + 1., 0.), 1.);\n\t\t}\n\n\t\tif (enableEndMiter \x3d\x3d 1.) {\n\t\t\tdistToEnd \x3d distToLine(gl_FragCoord.xy, endCutoff.xy, endCutoff.zw);\n\t\t\tif (distToEnd \x3c -1.) {\n\t\t\t\tdiscard;\n\t\t\t\treturn;\n\t\t\t}\n\t\t\talpha *\x3d min(max(distToEnd + 1., 0.), 1.);\n\t\t}\n\t}\n\n\t// round miter\n\telse if (miterMode \x3d\x3d 2.) {\n\t\tif (enableStartMiter \x3d\x3d 1.) {\n\t\t\tdistToStart \x3d distToLine(gl_FragCoord.xy, startCutoff.xy, startCutoff.zw);\n\t\t\tif (distToStart \x3c 0.) {\n\t\t\t\tfloat radius \x3d length(gl_FragCoord.xy - startCoord);\n\n\t\t\t\tif(radius \x3e cutoff + .5) {\n\t\t\t\t\tdiscard;\n\t\t\t\t\treturn;\n\t\t\t\t}\n\n\t\t\t\talpha -\x3d smoothstep(cutoff - .5, cutoff + .5, radius);\n\t\t\t}\n\t\t}\n\n\t\tif (enableEndMiter \x3d\x3d 1.) {\n\t\t\tdistToEnd \x3d distToLine(gl_FragCoord.xy, endCutoff.xy, endCutoff.zw);\n\t\t\tif (distToEnd \x3c 0.) {\n\t\t\t\tfloat radius \x3d length(gl_FragCoord.xy - endCoord);\n\n\t\t\t\tif(radius \x3e cutoff + .5) {\n\t\t\t\t\tdiscard;\n\t\t\t\t\treturn;\n\t\t\t\t}\n\n\t\t\t\talpha -\x3d smoothstep(cutoff - .5, cutoff + .5, radius);\n\t\t\t}\n\t\t}\n\t}\n\n\tfloat t \x3d fract(dot(tangent, gl_FragCoord.xy) / dashSize) * .5 + .25;\n\tfloat dash \x3d texture2D(dashPattern, vec2(t, .5)).r;\n\n\tgl_FragColor \x3d fragColor;\n\tgl_FragColor.a *\x3d alpha * opacity * dash;\n}\n"]),
attributes:{lineEnd:{buffer:t,divisor:0,stride:8,offset:0},lineTop:{buffer:t,divisor:0,stride:8,offset:4},aColor:{buffer:q.prop("colorBuffer"),stride:4,offset:0,divisor:1},bColor:{buffer:q.prop("colorBuffer"),stride:4,offset:4,divisor:1},prevCoord:{buffer:q.prop("positionBuffer"),stride:8,offset:0,divisor:1},aCoord:{buffer:q.prop("positionBuffer"),stride:8,offset:8,divisor:1},bCoord:{buffer:q.prop("positionBuffer"),stride:8,offset:16,divisor:1},nextCoord:{buffer:q.prop("positionBuffer"),stride:8,
offset:24,divisor:1}}},w))}catch(B){z=x}return{fill:q({primitive:"triangle",elements:function(B,A){return A.triangles},offset:0,vert:a(["precision highp float;\n#define GLSLIFY 1\n\nattribute vec2 position, positionFract;\n\nuniform vec4 color;\nuniform vec2 scale, scaleFract, translate, translateFract;\nuniform float pixelRatio, id;\nuniform vec4 viewport;\nuniform float opacity;\n\nvarying vec4 fragColor;\n\nconst float MAX_LINES \x3d 256.;\n\nvoid main() {\n\tfloat depth \x3d (MAX_LINES - 4. - id) / (MAX_LINES);\n\n\tvec2 position \x3d position * scale + translate\n       + positionFract * scale + translateFract\n       + position * scaleFract\n       + positionFract * scaleFract;\n\n\tgl_Position \x3d vec4(position * 2.0 - 1.0, depth, 1);\n\n\tfragColor \x3d color / 255.;\n\tfragColor.a *\x3d opacity;\n}\n"]),
frag:a(["precision highp float;\n#define GLSLIFY 1\n\nvarying vec4 fragColor;\n\nvoid main() {\n\tgl_FragColor \x3d fragColor;\n}\n"]),uniforms:{scale:q.prop("scale"),color:q.prop("fill"),scaleFract:q.prop("scaleFract"),translateFract:q.prop("translateFract"),translate:q.prop("translate"),opacity:q.prop("opacity"),pixelRatio:q.context("pixelRatio"),id:q.prop("id"),viewport:function(B,A){return[A.viewport.x,A.viewport.y,B.viewportWidth,B.viewportHeight]}},attributes:{position:{buffer:q.prop("positionBuffer"),
stride:8,offset:8},positionFract:{buffer:q.prop("positionFractBuffer"),stride:8,offset:8}},blend:w.blend,depth:{enable:!1},scissor:w.scissor,stencil:w.stencil,viewport:w.viewport}),rect:x,miter:z}};p.defaults={dashes:null,join:"miter",miterLimit:1,thickness:10,cap:"square",color:"black",opacity:1,overlay:!1,viewport:null,range:null,close:!1,fill:null};p.prototype.render=function(){for(var q=[],t=arguments.length;t--;)q[t]=arguments[t];q.length&&this.update.apply(this,q);this.draw()};p.prototype.draw=
function(){for(var q=this,t=[],w=arguments.length;w--;)t[w]=arguments[w];(t.length?t:this.passes).forEach(function(x,z){if(x&&Array.isArray(x))return q.draw.apply(q,x);"number"===typeof x&&(x=q.passes[x]);x&&1<x.count&&x.opacity&&(q.regl._refresh(),x.fill&&x.triangles&&2<x.triangles.length&&q.shaders.fill(x),x.thickness&&(x.scale[0]*x.viewport.width>p.precisionThreshold||x.scale[1]*x.viewport.height>p.precisionThreshold?q.shaders.rect(x):"rect"===x.join||!x.join&&(2>=x.thickness||x.count>=p.maxPoints)?
q.shaders.rect(x):q.shaders.miter(x)))});return this};p.prototype.update=function(q){var t=this;if(q){null!=q.length?"number"===typeof q[0]&&(q=[{positions:q}]):Array.isArray(q)||(q=[q]);var w=this.regl,x=this.gl;q.forEach(function(A,D){var C=t.passes[D];if(void 0!==A)if(null===A)t.passes[D]=null;else{"number"===typeof A[0]&&(A={positions:A});A=g(A,{positions:"positions points data coords",thickness:"thickness lineWidth lineWidths line-width linewidth width stroke-width strokewidth strokeWidth",join:"lineJoin linejoin join type mode",
miterLimit:"miterlimit miterLimit",dashes:"dash dashes dasharray dash-array dashArray",color:"color colour stroke colors colours stroke-color strokeColor",fill:"fill fill-color fillColor",opacity:"alpha opacity",overlay:"overlay crease overlap intersect",close:"closed close closed-path closePath",range:"range dataBox",viewport:"viewport viewBox",hole:"holes hole hollow",splitNull:"splitNull"});C||(t.passes[D]=C={id:D,scale:null,scaleFract:null,translate:null,translateFract:null,count:0,hole:[],depth:0,
dashLength:1,dashTexture:w.texture({channels:1,data:new Uint8Array([255]),width:1,height:1,mag:"linear",min:"linear"}),colorBuffer:w.buffer({usage:"dynamic",type:"uint8",data:new Uint8Array}),positionBuffer:w.buffer({usage:"dynamic",type:"float",data:new Uint8Array}),positionFractBuffer:w.buffer({usage:"dynamic",type:"float",data:new Uint8Array})},A=m({},p.defaults,A));null!=A.thickness&&(C.thickness=parseFloat(A.thickness));null!=A.opacity&&(C.opacity=parseFloat(A.opacity));null!=A.miterLimit&&(C.miterLimit=
parseFloat(A.miterLimit));null!=A.overlay&&(C.overlay=!!A.overlay,D<p.maxLines&&(C.depth=2*(p.maxLines-1-D%p.maxLines)/p.maxLines-1));null!=A.join&&(C.join=A.join);null!=A.hole&&(C.hole=A.hole);null!=A.fill&&(C.fill=A.fill?n(A.fill,"uint8"):null);null!=A.viewport&&(C.viewport=e(A.viewport));C.viewport||(C.viewport=e([x.drawingBufferWidth,x.drawingBufferHeight]));null!=A.close&&(C.close=A.close);null===A.positions&&(A.positions=[]);if(A.positions){if(A.positions.x&&A.positions.y){var v=A.positions.x,
y=A.positions.y;var F=C.count=Math.max(v.length,y.length);D=new Float64Array(2*F);for(var J=0;J<F;J++)D[2*J]=v[J],D[2*J+1]=y[J]}else D=h(A.positions,"float64"),F=C.count=Math.floor(D.length/2);v=C.bounds=k(D,2);if(C.fill){var K=[];y={};for(var M=J=0,H=0,O=C.count;M<O;M++){var I=D[2*M],L=D[2*M+1];isNaN(I)||isNaN(L)||null==I||null==L?(I=D[2*J],L=D[2*J+1],y[M]=J):J=M;K[H++]=I;K[H++]=L}if(A.splitNull){C.count-1 in y||(y[C.count]=C.count-1);var Q=Object.keys(y).map(Number).sort(function(S,T){return S-
T}),Z=[],ba=0,V=null!=C.hole?C.hole[0]:null;null!=V&&(J=f(Q,function(S){return S>=V}),Q=Q.slice(0,J),Q.push(V));J=function(S){var T=K.slice(2*ba,2*Q[S]).concat(V?K.slice(2*V):[]),fa=(C.hole||[]).map(function(W){return W-V+(Q[S]-ba)});T=r(T,fa);T=T.map(function(W){return W+ba+(W+ba<Q[S]?0:V-Q[S])});Z.push.apply(Z,T);ba=Q[S]+1};for(M=0;M<Q.length;M++)J(M);J=0;for(M=Z.length;J<M;J++)null!=y[Z[J]]&&(Z[J]=y[Z[J]]);C.triangles=Z}else{J=r(K,C.hole||[]);M=0;for(H=J.length;M<H;M++)null!=y[J[M]]&&(J[M]=y[J[M]]);
C.triangles=J}}y=new Float64Array(D);l(y,2,v);v=new Float64Array(2*F+6);C.close?D[0]===D[2*F-2]&&D[1]===D[2*F-1]?(v[0]=y[2*F-4],v[1]=y[2*F-3]):(v[0]=y[2*F-2],v[1]=y[2*F-1]):(v[0]=y[0],v[1]=y[1]);v.set(y,2);C.close?D[0]===D[2*F-2]&&D[1]===D[2*F-1]?(v[2*F+2]=y[2],v[2*F+3]=y[3],--C.count):(v[2*F+2]=y[0],v[2*F+3]=y[1],v[2*F+4]=y[2],v[2*F+5]=y[3]):(v[2*F+2]=y[2*F-2],v[2*F+3]=y[2*F-1],v[2*F+4]=y[2*F-2],v[2*F+5]=y[2*F-1]);D=c(v);C.positionBuffer(D);D=d(v,D);C.positionFractBuffer(D)}A.range?C.range=A.range:
C.range||(C.range=C.bounds);(A.range||A.positions)&&C.count&&(D=C.bounds,F=C.range[2]-C.range[0],v=C.range[3]-C.range[1],C.scale=[(D[2]-D[0])/F,(D[3]-D[1])/v],C.translate=[-C.range[0]/F+D[0]/F||0,-C.range[1]/v+D[1]/v||0],C.scaleFract=d(C.scale),C.translateFract=d(C.translate));if(A.dashes){D=0;if(!A.dashes||2>A.dashes.length)D=1,F=new Uint8Array([255,255,255,255,255,255,255,255]);else{for(F=D=0;F<A.dashes.length;++F)D+=A.dashes[F];F=new Uint8Array(D*p.dashMult);v=0;y=255;for(J=0;2>J;J++)for(M=0;M<
A.dashes.length;++M){H=0;for(O=A.dashes[M]*p.dashMult*.5;H<O;++H)F[v++]=y;y^=255}}C.dashLength=D;C.dashTexture({channels:1,data:F,width:F.length,height:1,mag:"linear",min:"linear"},0,0)}if(A.color){D=C.count;(F=A.color)||(F="transparent");A=new Uint8Array(4*D+4);if(Array.isArray(F)&&"number"!==typeof F[0]){for(v=0;v<D;v++)y=n(F[v],"uint8"),A.set(y,4*v);A.set(n(F[0],"uint8"),4*D)}else for(F=n(F,"uint8"),v=0;v<D+1;v++)A.set(F,4*v);C.colorBuffer({usage:"dynamic",type:"uint8",data:A})}}});if(q.length<
this.passes.length){for(var z=q.length;z<this.passes.length;z++){var B=this.passes[z];B&&(B.colorBuffer.destroy(),B.positionBuffer.destroy(),B.dashTexture.destroy())}this.passes.length=q.length}q=[];for(z=0;z<this.passes.length;z++)null!==this.passes[z]&&q.push(this.passes[z]);this.passes=q;return this}};p.prototype.destroy=function(){this.passes.forEach(function(q){q.colorBuffer.destroy();q.positionBuffer.destroy();q.dashTexture.destroy()});this.passes.length=0;return this}},{"array-bounds":76,"array-find-index":77,
"array-normalize":78,"color-normalize":131,earcut:186,"es6-weak-map":241,"flatten-vertex-data":252,glslify:442,"object-assign":487,"parse-rect":492,"pick-by-alias":498,"to-float32":599}],538:[function(b,N,G){function p(x,z){if(x){if("string"===typeof x)return n(x,z);var B=Object.prototype.toString.call(x).slice(8,-1);"Object"===B&&x.constructor&&(B=x.constructor.name);if("Map"===B||"Set"===B)return Array.from(x);if("Arguments"===B||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(B))return n(x,z)}}
function n(x,z){if(null==z||z>x.length)z=x.length;for(var B=0,A=Array(z);B<z;B++)A[B]=x[B];return A}function k(x,z){var B=this;if(!(this instanceof k))return new k(x,z);"function"===typeof x?(z||(z={}),z.regl=x):(z=x,x=null);z&&z.length&&(z.positions=z);x=z.regl;var A=x._gl,D=[];this.tooManyColors=f;var C=x.texture({data:new Uint8Array(1020),width:255,height:1,type:"uint8",format:"rgba",wrapS:"clamp",wrapT:"clamp",mag:"nearest",min:"nearest"});r(this,{regl:x,gl:A,groups:[],markerCache:[null],markerTextures:[null],
palette:D,paletteIds:{},paletteTexture:C,maxColors:255,maxSize:100,canvas:A.canvas});this.update(z);A={uniforms:{constPointSize:!!z.constPointSize,pixelRatio:x.context("pixelRatio"),palette:C,paletteSize:function(v,y){return[B.tooManyColors?0:255,C.height]},scale:x.prop("scale"),scaleFract:x.prop("scaleFract"),translate:x.prop("translate"),translateFract:x.prop("translateFract"),opacity:x.prop("opacity"),marker:x.prop("markerTexture")},attributes:{x:function(v,y){return y.xAttr||{buffer:y.positionBuffer,
stride:8,offset:0}},y:function(v,y){return y.yAttr||{buffer:y.positionBuffer,stride:8,offset:4}},xFract:function(v,y){return y.xAttr?{constant:[0,0]}:{buffer:y.positionFractBuffer,stride:8,offset:0}},yFract:function(v,y){return y.yAttr?{constant:[0,0]}:{buffer:y.positionFractBuffer,stride:8,offset:4}},size:function(v,y){return y.size.length?{buffer:y.sizeBuffer,stride:2,offset:0}:{constant:[Math.round(255*y.size/B.maxSize)]}},borderSize:function(v,y){return y.borderSize.length?{buffer:y.sizeBuffer,
stride:2,offset:1}:{constant:[Math.round(255*y.borderSize/B.maxSize)]}},colorId:function(v,y){return y.color.length?{buffer:y.colorBuffer,stride:B.tooManyColors?8:4,offset:0}:{constant:B.tooManyColors?D.slice(4*y.color,4*y.color+4):[y.color]}},borderColorId:function(v,y){return y.borderColor.length?{buffer:y.colorBuffer,stride:B.tooManyColors?8:4,offset:B.tooManyColors?4:2}:{constant:B.tooManyColors?D.slice(4*y.borderColor,4*y.borderColor+4):[y.borderColor]}},isActive:function(v,y){return!0===y.activation?
{constant:[1]}:y.activation?y.activation:{constant:[0]}}},blend:{enable:!0,color:[0,0,0,1],func:{srcRGB:"src alpha",dstRGB:"one minus src alpha",srcAlpha:"one minus dst alpha",dstAlpha:"one"}},scissor:{enable:!0,box:x.prop("viewport")},viewport:x.prop("viewport"),stencil:{enable:!1},depth:{enable:!1},elements:x.prop("elements"),count:x.prop("count"),offset:x.prop("offset"),primitive:"points"};z=r({},A);z.frag=l(["precision highp float;\n#define GLSLIFY 1\n\nvarying vec4 fragColor, fragBorderColor;\nvarying float fragWidth, fragBorderColorLevel, fragColorLevel;\n\nuniform sampler2D marker;\nuniform float opacity;\n\nfloat smoothStep(float x, float y) {\n  return 1.0 / (1.0 + exp(50.0*(x - y)));\n}\n\nvoid main() {\n  float dist \x3d texture2D(marker, gl_PointCoord).r, delta \x3d fragWidth;\n\n  // max-distance alpha\n  if (dist \x3c 0.003) discard;\n\n  // null-border case\n  if (fragBorderColorLevel \x3d\x3d fragColorLevel || fragBorderColor.a \x3d\x3d 0.) {\n    float colorAmt \x3d smoothstep(.5 - delta, .5 + delta, dist);\n    gl_FragColor \x3d vec4(fragColor.rgb, colorAmt * fragColor.a * opacity);\n  }\n  else {\n    float borderColorAmt \x3d smoothstep(fragBorderColorLevel - delta, fragBorderColorLevel + delta, dist);\n    float colorAmt \x3d smoothstep(fragColorLevel - delta, fragColorLevel + delta, dist);\n\n    vec4 color \x3d fragBorderColor;\n    color.a *\x3d borderColorAmt;\n    color \x3d mix(color, fragColor, colorAmt);\n    color.a *\x3d opacity;\n\n    gl_FragColor \x3d color;\n  }\n\n}\n"]);
z.vert=l(["precision highp float;\n#define GLSLIFY 1\n\nattribute float x, y, xFract, yFract;\nattribute float size, borderSize;\nattribute vec4 colorId, borderColorId;\nattribute float isActive;\n\nuniform vec2 scale, scaleFract, translate, translateFract, paletteSize;\nuniform float pixelRatio;\nuniform bool constPointSize;\nuniform sampler2D palette;\n\nconst float maxSize \x3d 100.;\nconst float borderLevel \x3d .5;\n\nvarying vec4 fragColor, fragBorderColor;\nvarying float fragPointSize, fragBorderRadius, fragWidth, fragBorderColorLevel, fragColorLevel;\n\nfloat pointSizeScale \x3d (constPointSize) ? 2. : pixelRatio;\n\nbool isDirect \x3d (paletteSize.x \x3c 1.);\n\nvec4 getColor(vec4 id) {\n  return isDirect ? id / 255. : texture2D(palette,\n    vec2(\n      (id.x + .5) / paletteSize.x,\n      (id.y + .5) / paletteSize.y\n    )\n  );\n}\n\nvoid main() {\n  // ignore inactive points\n  if (isActive \x3d\x3d 0.) return;\n\n  vec2 position \x3d vec2(x, y);\n  vec2 positionFract \x3d vec2(xFract, yFract);\n\n  vec4 color \x3d getColor(colorId);\n  vec4 borderColor \x3d getColor(borderColorId);\n\n  float size \x3d size * maxSize / 255.;\n  float borderSize \x3d borderSize * maxSize / 255.;\n\n  gl_PointSize \x3d 2. * size * pointSizeScale;\n  fragPointSize \x3d size * pixelRatio;\n\n  vec2 pos \x3d (position + translate) * scale\n      + (positionFract + translateFract) * scale\n      + (position + translate) * scaleFract\n      + (positionFract + translateFract) * scaleFract;\n\n  gl_Position \x3d vec4(pos * 2. - 1., 0., 1.);\n\n  fragColor \x3d color;\n  fragBorderColor \x3d borderColor;\n  fragWidth \x3d 1. / gl_PointSize;\n\n  fragBorderColorLevel \x3d clamp(borderLevel - borderLevel * borderSize / size, 0., 1.);\n  fragColorLevel \x3d clamp(borderLevel + (1. - borderLevel) * borderSize / size, 0., 1.);\n}"]);
this.drawMarker=x(z);A=r({},A);A.frag=l(["precision highp float;\n#define GLSLIFY 1\n\nvarying vec4 fragColor, fragBorderColor;\n\nuniform float opacity;\nvarying float fragBorderRadius, fragWidth;\n\nfloat smoothStep(float edge0, float edge1, float x) {\n\tfloat t;\n\tt \x3d clamp((x - edge0) / (edge1 - edge0), 0.0, 1.0);\n\treturn t * t * (3.0 - 2.0 * t);\n}\n\nvoid main() {\n\tfloat radius, alpha \x3d 1.0, delta \x3d fragWidth;\n\n\tradius \x3d length(2.0 * gl_PointCoord.xy - 1.0);\n\n\tif (radius \x3e 1.0 + delta) {\n\t\tdiscard;\n\t}\n\n\talpha -\x3d smoothstep(1.0 - delta, 1.0 + delta, radius);\n\n\tfloat borderRadius \x3d fragBorderRadius;\n\tfloat ratio \x3d smoothstep(borderRadius - delta, borderRadius + delta, radius);\n\tvec4 color \x3d mix(fragColor, fragBorderColor, ratio);\n\tcolor.a *\x3d alpha * opacity;\n\tgl_FragColor \x3d color;\n}\n"]);
A.vert=l(["precision highp float;\n#define GLSLIFY 1\n\nattribute float x, y, xFract, yFract;\nattribute float size, borderSize;\nattribute vec4 colorId, borderColorId;\nattribute float isActive;\n\nuniform vec2 scale, scaleFract, translate, translateFract;\nuniform float pixelRatio;\nuniform bool constPointSize;\nuniform sampler2D palette;\nuniform vec2 paletteSize;\n\nconst float maxSize \x3d 100.;\n\nvarying vec4 fragColor, fragBorderColor;\nvarying float fragBorderRadius, fragWidth;\n\nfloat pointSizeScale \x3d (constPointSize) ? 2. : pixelRatio;\n\nbool isDirect \x3d (paletteSize.x \x3c 1.);\n\nvec4 getColor(vec4 id) {\n  return isDirect ? id / 255. : texture2D(palette,\n    vec2(\n      (id.x + .5) / paletteSize.x,\n      (id.y + .5) / paletteSize.y\n    )\n  );\n}\n\nvoid main() {\n  // ignore inactive points\n  if (isActive \x3d\x3d 0.) return;\n\n  vec2 position \x3d vec2(x, y);\n  vec2 positionFract \x3d vec2(xFract, yFract);\n\n  vec4 color \x3d getColor(colorId);\n  vec4 borderColor \x3d getColor(borderColorId);\n\n  float size \x3d size * maxSize / 255.;\n  float borderSize \x3d borderSize * maxSize / 255.;\n\n  gl_PointSize \x3d (size + borderSize) * pointSizeScale;\n\n  vec2 pos \x3d (position + translate) * scale\n      + (positionFract + translateFract) * scale\n      + (position + translate) * scaleFract\n      + (positionFract + translateFract) * scaleFract;\n\n  gl_Position \x3d vec4(pos * 2. - 1., 0., 1.);\n\n  fragBorderRadius \x3d 1. - 2. * borderSize / (size + borderSize);\n  fragColor \x3d color;\n  fragBorderColor \x3d borderColor.a \x3d\x3d 0. || borderSize \x3d\x3d 0. ? vec4(color.rgb, 0.) : borderColor;\n  fragWidth \x3d 1. / gl_PointSize;\n}\n"]);
f&&(A.frag=A.frag.replace("smoothstep","smoothStep"),z.frag=z.frag.replace("smoothstep","smoothStep"));this.drawCircle=x(A)}var m=b("color-normalize"),a=b("array-bounds"),g=b("color-id"),h=b("@plotly/point-cluster"),r=b("object-assign"),l=b("glslify"),c=b("pick-by-alias"),d=b("update-diff"),e=b("flatten-vertex-data"),f=b("is-iexplorer"),q=b("to-float32"),t=b("parse-rect");k.defaults={color:"black",borderColor:"transparent",borderSize:0,size:12,opacity:1,marker:void 0,viewport:null,range:null,pixelSize:null,
count:0,offset:0,bounds:null,positions:[],snap:1E4};k.prototype.render=function(){arguments.length&&this.update.apply(this,arguments);this.draw();return this};k.prototype.draw=function(){for(var x=this,z=arguments.length,B=Array(z),A=0;A<z;A++)B[A]=arguments[A];z=this.groups;1===B.length&&Array.isArray(B[0])&&(null===B[0][0]||Array.isArray(B[0][0]))&&(B=B[0]);this.regl._refresh();if(B.length)for(z=0;z<B.length;z++)this.drawItem(z,B[z]);else z.forEach(function(D,C){x.drawItem(C)});return this};k.prototype.drawItem=
function(x,z){var B=this.groups;x=B[x];"number"===typeof z&&(x=B[z],z=null);if(x&&x.count&&x.opacity){x.activation[0]&&this.drawCircle(this.getMarkerDrawOptions(0,x,z));B=[];for(var A=1;A<x.activation.length;A++)if(x.activation[A]&&(!0===x.activation[A]||x.activation[A].data.length)){var D=B.push,C=D.apply,v=this.getMarkerDrawOptions(A,x,z);var y=v;y=Array.isArray(y)?n(y):void 0;y||(y="undefined"!==typeof Symbol&&null!=v[Symbol.iterator]||null!=v["@@iterator"]?Array.from(v):void 0);if(!(v=y||p(v)))throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.");
C.call(D,B,v)}B.length&&this.drawMarker(B)}};k.prototype.getMarkerDrawOptions=function(x,z,B){var A=z.range,D=z.tree,C=z.viewport,v=z.activation,y=z.selectionBuffer,F=z.count;if(!D)return B?[r({},z,{markerTexture:this.markerTextures[x],activation:v[x],count:B.length,elements:B,offset:0})]:[r({},z,{markerTexture:this.markerTextures[x],activation:v[x],offset:0})];var J=[];A=D.range(A,{lod:!0,px:[(A[2]-A[0])/C.width,(A[3]-A[1])/C.height]});if(B){D=v[x].data;F=new Uint8Array(F);for(C=0;C<B.length;C++){var K=
B[C];F[K]=D?D[K]:1}y.subdata(F)}for(F=A.length;F--;){D=A[F];C=D;C=Array.isArray(C)?C:void 0;if(!C){K=C=void 0;var M=null==D?null:"undefined"!==typeof Symbol&&D[Symbol.iterator]||D["@@iterator"];if(null!=M){var H=[],O=!0,I=!1;try{for(M=M.call(D);!(O=(K=M.next()).done)&&(H.push(K.value),2!==H.length);O=!0);}catch(L){I=!0,C=L}finally{try{if(!O&&null!=M["return"])M["return"]()}finally{if(I)throw C;}}C=H}else C=void 0}if(!(D=C||p(D,2)))throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.");
C=D[0];J.push(r({},z,{markerTexture:this.markerTextures[x],activation:B?y:v[x],offset:C,count:D[1]-C}))}return J};k.prototype.update=function(){for(var x=this,z=arguments.length,B=Array(z),A=0;A<z;A++)B[A]=arguments[A];if(B.length){1===B.length&&Array.isArray(B[0])&&(B=B[0]);var D=this.groups,C=this.gl,v=this.regl,y=this.maxSize,F=this.maxColors,J=this.palette;this.groups=D=B.map(function(K,M){var H=D[M];if(void 0===K)return H;null===K?K={positions:null}:"function"===typeof K?K={ondraw:K}:"number"===
typeof K[0]&&(K={positions:K});K=c(K,{positions:"positions data points",snap:"snap cluster lod tree",size:"sizes size radius",borderSize:"borderSizes borderSize border-size bordersize borderWidth borderWidths border-width borderwidth stroke-width strokeWidth strokewidth outline",color:"colors color fill fill-color fillColor",borderColor:"borderColors borderColor stroke stroke-color strokeColor",marker:"markers marker shape",range:"range dataBox databox",viewport:"viewport viewPort viewBox viewbox",
opacity:"opacity alpha transparency",bounds:"bound bounds boundaries limits",tooManyColors:"tooManyColors palette paletteMode optimizePalette enablePalette"});null===K.positions&&(K.positions=[]);null!=K.tooManyColors&&(x.tooManyColors=K.tooManyColors);H||(D[M]=H={id:M,scale:null,translate:null,scaleFract:null,translateFract:null,activation:[],selectionBuffer:v.buffer({data:new Uint8Array(0),usage:"stream",type:"uint8"}),sizeBuffer:v.buffer({data:new Uint8Array(0),usage:"dynamic",type:"uint8"}),colorBuffer:v.buffer({data:new Uint8Array(0),
usage:"dynamic",type:"uint8"}),positionBuffer:v.buffer({data:new Uint8Array(0),usage:"dynamic",type:"float"}),positionFractBuffer:v.buffer({data:new Uint8Array(0),usage:"dynamic",type:"float"})},K=r({},k.defaults,K));!K.positions||"marker"in K||(K.marker=H.marker,delete H.marker);!K.marker||"positions"in K||(K.positions=H.positions,delete H.positions);var O=0,I=0;d(H,K,[{snap:!0,size:function(S,T){null==S&&(S=k.defaults.size);O+=S&&S.length?1:0;return S},borderSize:function(S,T){null==S&&(S=k.defaults.borderSize);
O+=S&&S.length?1:0;return S},opacity:parseFloat,color:function(S,T){null==S&&(S=k.defaults.color);S=x.updateColor(S);I++;return S},borderColor:function(S,T){null==S&&(S=k.defaults.borderColor);S=x.updateColor(S);I++;return S},bounds:function(S,T,fa){"range"in fa||(fa.range=null);return S},positions:function(S,T,fa){var W=T.snap,aa=T.positionBuffer,ja=T.positionFractBuffer,ma=T.selectionBuffer;if(S.x||S.y)return T.xAttr=S.x.length?{buffer:v.buffer(S.x),offset:0,stride:4,count:S.x.length}:{buffer:S.x.buffer,
offset:4*S.x.offset||0,stride:4*(S.x.stride||1),count:S.x.count},T.yAttr=S.y.length?{buffer:v.buffer(S.y),offset:0,stride:4,count:S.y.length}:{buffer:S.y.buffer,offset:4*S.y.offset||0,stride:4*(S.y.stride||1),count:S.y.count},T.count=Math.max(T.xAttr.count,T.yAttr.count),S;S=e(S,"float64");var ia=T.count=Math.floor(S.length/2),ra=T.bounds=ia?a(S,2):null;fa.range||T.range||(delete T.range,fa.range=ra);fa.marker||T.marker||(delete T.marker,fa.marker=null);W&&(!0===W||ia>W)?T.tree=h(S,{bounds:ra}):W&&
W.length&&(T.tree=W);T.tree&&(fa={primitive:"points",usage:"static",data:T.tree,type:"uint32"},T.elements?T.elements(fa):T.elements=v.elements(fa));T=q.float32(S);aa({data:T,usage:"dynamic"});aa=q.fract32(S,T);ja({data:aa,usage:"dynamic"});ma({data:new Uint8Array(ia),type:"uint8",usage:"stream"});return S}},{marker:function(S,T,fa){fa=T.activation;fa.forEach(function(ia){return ia&&ia.destroy&&ia.destroy()});fa.length=0;if(S&&"number"!==typeof S[0]){for(var W=[],aa=0,ja=Math.min(S.length,T.count);aa<
ja;aa++){var ma=x.addMarker(S[aa]);W[ma]||(W[ma]=new Uint8Array(T.count));W[ma][aa]=1}for(T=0;T<W.length;T++)if(W[T]){aa={data:W[T],type:"uint8",usage:"static"};if(fa[T])fa[T](aa);else fa[T]=v.buffer(aa);fa[T].data=W[T]}}else W=x.addMarker(S),fa[W]=!0;return S},range:function(S,T,fa){if(fa=T.bounds)return S||(S=fa),T.scale=[1/(S[2]-S[0]),1/(S[3]-S[1])],T.translate=[-S[0],-S[1]],T.scaleFract=q.fract(T.scale),T.translateFract=q.fract(T.translate),S},viewport:function(S){return t(S||[C.drawingBufferWidth,
C.drawingBufferHeight])}}]);if(O){var L=H;K=L.count;M=L.size;var Q=L.borderSize;L=L.sizeBuffer;var Z=new Uint8Array(2*K);if(M.length||Q.length)for(var ba=0;ba<K;ba++)Z[2*ba]=Math.round(255*(null==M[ba]?M:M[ba])/y),Z[2*ba+1]=Math.round(255*(null==Q[ba]?Q:Q[ba])/y);L({data:Z,usage:"dynamic"})}if(I){L=H;K=L.count;M=L.color;Q=L.borderColor;L=L.colorBuffer;if(x.tooManyColors){if(M.length||Q.length){var V=new Uint8Array(8*K);for(Z=0;Z<K;Z++)ba=M[Z],V[8*Z]=J[4*ba],V[8*Z+1]=J[4*ba+1],V[8*Z+2]=J[4*ba+2],V[8*
Z+3]=J[4*ba+3],ba=Q[Z],V[8*Z+4]=J[4*ba],V[8*Z+5]=J[4*ba+1],V[8*Z+6]=J[4*ba+2],V[8*Z+7]=J[4*ba+3]}}else if(M.length||Q.length)for(V=new Uint8Array(4*K+2),Z=0;Z<K;Z++)null!=M[Z]&&(V[4*Z]=M[Z]%F,V[4*Z+1]=Math.floor(M[Z]/F)),null!=Q[Z]&&(V[4*Z+2]=Q[Z]%F,V[4*Z+3]=Math.floor(Q[Z]/F));L({data:V||new Uint8Array(0),type:"uint8",usage:"dynamic"})}return H})}};k.prototype.addMarker=function(x){var z=this.markerTextures,B=this.regl,A=this.markerCache,D=null==x?0:A.indexOf(x);if(0<=D)return D;if(x instanceof Uint8Array||
x instanceof Uint8ClampedArray)var C=x;else{C=new Uint8Array(x.length);D=0;for(var v=x.length;D<v;D++)C[D]=255*x[D]}v=Math.floor(Math.sqrt(C.length));D=z.length;A.push(x);z.push(B.texture({channels:1,data:C,radius:v,mag:"linear",min:"linear"}));return D};k.prototype.updateColor=function(x){var z=this.paletteIds,B=this.palette,A=this.maxColors;Array.isArray(x)||(x=[x]);var D=[];if("number"===typeof x[0]){var C=[];if(Array.isArray(x))for(var v=0;v<x.length;v+=4)C.push(x.slice(v,v+4));else for(v=0;v<
x.length;v+=4)C.push(x.subarray(v,v+4));x=C}for(C=0;C<x.length;C++){v=x[C];v=m(v,"uint8");var y=g(v,!1);if(null==z[y]){var F=B.length;z[y]=Math.floor(F/4);B[F]=v[0];B[F+1]=v[1];B[F+2]=v[2];B[F+3]=v[3]}D[C]=z[y]}!this.tooManyColors&&B.length>4*A&&(this.tooManyColors=!0);this.updatePalette(B);return 1===D.length?D[0]:D};k.prototype.updatePalette=function(x){if(!this.tooManyColors){var z=this.maxColors,B=this.paletteTexture,A=Math.ceil(.25*x.length/z);if(1<A){x=x.slice();for(var D=.25*x.length%z;D<A*
z;D++)x.push(0,0,0,0)}B.height<A&&B.resize(z,A);B.subimage({width:Math.min(.25*x.length,z),height:A,data:x},0,0)}};k.prototype.destroy=function(){this.groups.forEach(function(x){x.sizeBuffer.destroy();x.positionBuffer.destroy();x.positionFractBuffer.destroy();x.colorBuffer.destroy();x.activation.forEach(function(z){return z&&z.destroy&&z.destroy()});x.selectionBuffer.destroy();x.elements&&x.elements.destroy()});this.groups.length=0;this.paletteTexture.destroy();this.markerTextures.forEach(function(x){return x&&
x.destroy&&x.destroy()});return this};var w=b("object-assign");N.exports=function(x,z){x=new k(x,z);z=x.render.bind(x);w(z,{render:z,update:x.update.bind(x),draw:x.draw.bind(x),destroy:x.destroy.bind(x),regl:x.regl,gl:x.gl,canvas:x.gl.canvas,groups:x.groups,markers:x.markerCache,palette:x.palette});return z}},{"@plotly/point-cluster":59,"array-bounds":76,"color-id":129,"color-normalize":131,"flatten-vertex-data":252,glslify:442,"is-iexplorer":454,"object-assign":487,"parse-rect":492,"pick-by-alias":498,
"to-float32":599,"update-diff":621}],539:[function(b,N,G){function p(d,e){if(!(this instanceof p))return new p(d,e);this.traces=[];this.passes={};this.regl=d;this.scatter=m(d);this.canvas=this.scatter.canvas}function n(d,e,f){e=d[e];var q=d[f];2<e.length?(d=e[1],e=e[3]):e.length?(d=e[0],e=e[1]):(d=e.y,e=e.y+e.height);2<q.length?(f=q[0],q=q[2]):q.length?(f=q[0],q=q[1]):(f=q.x,q=q.x+q.width);return[f,d,q,e]}function k(d){if("number"===typeof d)return[d,d,d,d];if(2===d.length)return[d[0],d[1],d[0],d[1]];
d=l(d);return[d.x,d.y,d.x+d.width,d.y+d.height]}var m=b("regl-scatter2d"),a=b("pick-by-alias"),g=b("array-bounds"),h=b("raf"),r=b("array-range"),l=b("parse-rect"),c=b("flatten-vertex-data");N.exports=p;p.prototype.render=function(){for(var d=this,e=[],f=arguments.length;f--;)e[f]=arguments[f];e.length&&this.update.apply(this,e);if(this.regl.attributes.preserveDrawingBuffer)return this.draw();this.dirty?null==this.planned&&(this.planned=h(function(){d.draw();d.dirty=!0;d.planned=null})):(this.draw(),
this.dirty=!0,h(function(){d.dirty=!1}));return this};p.prototype.update=function(){for(var d,e=[],f=arguments.length;f--;)e[f]=arguments[f];if(e.length){for(f=0;f<e.length;f++)this.updateItem(f,e[f]);this.traces=this.traces.filter(Boolean);e=[];for(var q=f=0;q<this.traces.length;q++){for(var t=this.traces[q],w=this.traces[q].passes,x=0;x<w.length;x++)e.push(this.passes[w[x]]);t.passOffset=f;f+=t.passes.length}(d=this.scatter).update.apply(d,e);return this}};p.prototype.updateItem=function(d,e){var f=
this.regl;if(null===e)return this.traces[d]=null,this;if(!e)return this;e=a(e,{data:"data items columns rows values dimensions samples x",snap:"snap cluster",size:"sizes size radius",color:"colors color fill fill-color fillColor",opacity:"opacity alpha transparency opaque",borderSize:"borderSizes borderSize border-size bordersize borderWidth borderWidths border-width borderwidth stroke-width strokeWidth strokewidth outline",borderColor:"borderColors borderColor bordercolor stroke stroke-color strokeColor",
marker:"markers marker shape",range:"range ranges databox dataBox",viewport:"viewport viewBox viewbox",domain:"domain domains area areas",padding:"pad padding paddings pads margin margins",transpose:"transpose transposed",diagonal:"diagonal diag showDiagonal",upper:"upper up top upperhalf upperHalf showupperhalf showUpper showUpperHalf",lower:"lower low bottom lowerhalf lowerHalf showlowerhalf showLowerHalf showLower"});d=this.traces[d]||(this.traces[d]={id:d,buffer:f.buffer({usage:"dynamic",type:"float",
data:new Uint8Array}),color:"black",marker:null,size:12,borderColor:"transparent",borderSize:1,viewport:l([f._gl.drawingBufferWidth,f._gl.drawingBufferHeight]),padding:[0,0,0,0],opacity:1,diagonal:!0,upper:!0,lower:!0});null!=e.color&&(d.color=e.color);null!=e.size&&(d.size=e.size);null!=e.marker&&(d.marker=e.marker);null!=e.borderColor&&(d.borderColor=e.borderColor);null!=e.borderSize&&(d.borderSize=e.borderSize);null!=e.opacity&&(d.opacity=e.opacity);e.viewport&&(d.viewport=l(e.viewport));null!=
e.diagonal&&(d.diagonal=e.diagonal);null!=e.upper&&(d.upper=e.upper);null!=e.lower&&(d.lower=e.lower);if(e.data)for(d.buffer(c(e.data)),d.columns=e.data.length,d.count=e.data[0].length,d.bounds=[],f=0;f<d.columns;f++)d.bounds[f]=g(e.data[f],1);if(e.range){d.range=e.range;var q=d.range&&"number"!==typeof d.range[0]}e.domain&&(d.domain=e.domain);f=!1;null!=e.padding&&(Array.isArray(e.padding)&&e.padding.length===d.columns&&"number"===typeof e.padding[e.padding.length-1]?(d.padding=e.padding.map(k),
f=!0):d.padding=k(e.padding));var t=d.columns,w=d.count,x=d.viewport.width,z=d.viewport.height,B=d.viewport.x,A=d.viewport.y,D=x/t,C=z/t;d.passes=[];for(var v=0;v<t;v++)for(var y=0;y<t;y++)if(d.diagonal||y!==v)if(d.upper||!(v>y))if(d.lower||!(v<y)){var F=d.id;F=(null!=F.id?F.id:F)<<16|(v&255)<<8|y&255;var J=this.passes[F]||(this.passes[F]={});e.data&&(J.positions=e.transpose?{x:{buffer:d.buffer,offset:y,count:w,stride:t},y:{buffer:d.buffer,offset:v,count:w,stride:t}}:{x:{buffer:d.buffer,offset:y*
w,count:w},y:{buffer:d.buffer,offset:v*w,count:w}},J.bounds=n(d.bounds,v,y));if(e.domain||e.viewport||e.data){var K=f?n(d.padding,v,y):d.padding;if(d.domain){var M=n(d.domain,v,y);J.viewport=[B+M[0]*x+K[0],A+M[1]*z+K[1],B+M[2]*x-K[2],A+M[3]*z-K[3]]}else J.viewport=[B+y*D+D*K[0],A+v*C+C*K[1],B+(y+1)*D-D*K[2],A+(v+1)*C-C*K[3]]}e.color&&(J.color=d.color);e.size&&(J.size=d.size);e.marker&&(J.marker=d.marker);e.borderSize&&(J.borderSize=d.borderSize);e.borderColor&&(J.borderColor=d.borderColor);e.opacity&&
(J.opacity=d.opacity);e.range&&(J.range=q?n(d.range,v,y):d.range||J.bounds);d.passes.push(F)}return this};p.prototype.draw=function(){for(var d,e=[],f=arguments.length;f--;)e[f]=arguments[f];if(e.length){var q=[];for(f=0;f<e.length;f++)if("number"===typeof e[f]){var t=this.traces[e[f]],w=t.passOffset;q.push.apply(q,r(w,w+t.passes.length))}else if(e[f].length){var x=e[f];t=this.traces[f];w=t.passes;var z=t.passOffset;w=w.map(function(B,A){q[z+A]=x})}(d=this.scatter).draw.apply(d,q)}else this.scatter.draw();
return this};p.prototype.destroy=function(){this.traces.forEach(function(d){d.buffer&&d.buffer.destroy&&d.buffer.destroy()});this.passes=this.traces=null;this.scatter.destroy();return this}},{"array-bounds":76,"array-range":79,"flatten-vertex-data":252,"parse-rect":492,"pick-by-alias":498,raf:530,"regl-scatter2d":538}],540:[function(b,N,G){(function(p,n){"object"===typeof G&&"undefined"!==typeof N?N.exports=n():p.createREGL=n()})(this,function(){function p(fb,Pb){this.id=ka++;this.type=fb;this.data=
Pb}function n(fb){if(0===fb.length)return[];var Pb=fb.charAt(0),fc=fb.charAt(fb.length-1);if(1<fb.length&&Pb===fc&&('"'===Pb||"'"===Pb))return['"'+fb.substr(1,fb.length-2).replace(/\\/g,"\\\\").replace(/"/g,'\\"')+'"'];if(Pb=/\[(false|true|null|\d+|'[^']*'|"[^"]*")\]/.exec(fb))return n(fb.substr(0,Pb.index)).concat(n(Pb[1])).concat(n(fb.substr(Pb.index+Pb[0].length)));Pb=fb.split(".");if(1===Pb.length)return['"'+fb.replace(/\\/g,"\\\\").replace(/"/g,'\\"')+'"'];fb=[];for(fc=0;fc<Pb.length;++fc)fb=
fb.concat(n(Pb[fc]));return fb}function k(fb){return"["+n(fb).join("][")+"]"}function m(){var fb={"":0},Pb=[""];return{id:function(fc){var Fc=fb[fc];if(Fc)return Fc;Fc=fb[fc]=Pb.length;Pb.push(fc);return Fc},str:function(fc){return Pb[fc]}}}function a(fb,Pb,fc){function Fc(){var rb=window.innerWidth,Jb=window.innerHeight;fb!==document.body&&(Jb=fb.getBoundingClientRect(),rb=Jb.right-Jb.left,Jb=Jb.bottom-Jb.top);Pc.width=fc*rb;Pc.height=fc*Jb;la(Pc.style,{width:rb+"px",height:Jb+"px"})}var Pc=document.createElement("canvas");
la(Pc.style,{border:0,margin:0,padding:0,top:0,left:0});fb.appendChild(Pc);fb===document.body&&(Pc.style.position="absolute",la(fb.style,{margin:0,padding:0}));var Uc;fb!==document.body&&"function"===typeof ResizeObserver?(Uc=new ResizeObserver(function(){setTimeout(Fc)}),Uc.observe(fb)):window.addEventListener("resize",Fc,!1);Fc();return{canvas:Pc,onDestroy:function(){Uc?Uc.disconnect():window.removeEventListener("resize",Fc);fb.removeChild(Pc)}}}function g(fb,Pb){function fc(Fc){try{return fb.getContext(Fc,
Pb)}catch(Pc){return null}}return fc("webgl")||fc("experimental-webgl")||fc("webgl-experimental")}function h(fb){return"string"===typeof fb?fb.split():fb}function r(fb){return"string"===typeof fb?document.querySelector(fb):fb}function l(fb){var Pb=fb||{},fc,Fc,Pc,Uc;fb={};var rb=[],Jb=[],sc="undefined"===typeof window?1:window.devicePixelRatio,nc=!1,vc=function(Wb){},Vb=function(){};"string"===typeof Pb?fc=document.querySelector(Pb):"object"===typeof Pb&&("string"===typeof Pb.nodeName&&"function"===
typeof Pb.appendChild&&"function"===typeof Pb.getBoundingClientRect?fc=Pb:"function"===typeof Pb.drawArrays||"function"===typeof Pb.drawElements?(Uc=Pb,Pc=Uc.canvas):("gl"in Pb?Uc=Pb.gl:"canvas"in Pb?Pc=r(Pb.canvas):"container"in Pb&&(Fc=r(Pb.container)),"attributes"in Pb&&(fb=Pb.attributes),"extensions"in Pb&&(rb=h(Pb.extensions)),"optionalExtensions"in Pb&&(Jb=h(Pb.optionalExtensions)),"onDone"in Pb&&(vc=Pb.onDone),"profile"in Pb&&(nc=!!Pb.profile),"pixelRatio"in Pb&&(sc=+Pb.pixelRatio)));fc&&("canvas"===
fc.nodeName.toLowerCase()?Pc=fc:Fc=fc);if(!Uc){if(!Pc){fc=a(Fc||document.body,vc,sc);if(!fc)return null;Pc=fc.canvas;Vb=fc.onDestroy}void 0===fb.premultipliedAlpha&&(fb.premultipliedAlpha=!0);Uc=g(Pc,fb)}return Uc?{gl:Uc,canvas:Pc,container:Fc,extensions:rb,optionalExtensions:Jb,pixelRatio:sc,profile:nc,onDone:vc,onDestroy:Vb}:(Vb(),vc("webgl not supported, try upgrading your browser or graphics drivers http://get.webgl.org"),null)}function c(fb,Pb){function fc(rb){rb=rb.toLowerCase();try{var Jb=
Fc[rb]=fb.getExtension(rb)}catch(sc){}return!!Jb}for(var Fc={},Pc=0;Pc<Pb.extensions.length;++Pc){var Uc=Pb.extensions[Pc];if(!fc(Uc))return Pb.onDestroy(),Pb.onDone('"'+Uc+'" extension is not supported by the current WebGL context, try upgrading your system or a different browser'),null}Pb.optionalExtensions.forEach(fc);return{extensions:Fc,restore:function(){Object.keys(Fc).forEach(function(rb){if(Fc[rb]&&!fc(rb))throw Error("(regl): error restoring extension "+rb);})}}}function d(fb,Pb){for(var fc=
Array(fb),Fc=0;Fc<fb;++Fc)fc[Fc]=Pb(Fc);return fc}function e(fb){var Pb=(65535<fb)<<4;fb>>>=Pb;var fc=(255<fb)<<3;fb>>>=fc;Pb|=fc;fc=(15<fb)<<2;fb>>>=fc;Pb|=fc;fc=(3<fb)<<1;return Pb|fc|fb>>>fc>>1}function f(){function fb(Fc){a:{for(var Pc=16;268435456>=Pc;Pc*=16)if(Fc<=Pc){Fc=Pc;break a}Fc=0}Pc=fc[e(Fc)>>2];return 0<Pc.length?Pc.pop():new ArrayBuffer(Fc)}function Pb(Fc){fc[e(Fc.byteLength)>>2].push(Fc)}var fc=d(8,function(){return[]});return{alloc:fb,free:Pb,allocType:function(Fc,Pc){switch(Fc){case 5120:Fc=
new Int8Array(fb(Pc),0,Pc);break;case 5121:Fc=new Uint8Array(fb(Pc),0,Pc);break;case 5122:Fc=new Int16Array(fb(2*Pc),0,Pc);break;case 5123:Fc=new Uint16Array(fb(2*Pc),0,Pc);break;case 5124:Fc=new Int32Array(fb(4*Pc),0,Pc);break;case 5125:Fc=new Uint32Array(fb(4*Pc),0,Pc);break;case 5126:Fc=new Float32Array(fb(4*Pc),0,Pc);break;default:return null}return Fc.length!==Pc?Fc.subarray(0,Pc):Fc},freeType:function(Fc){Pb(Fc.buffer)}}}function q(fb){return!!fb&&"object"===typeof fb&&Array.isArray(fb.shape)&&
Array.isArray(fb.stride)&&"number"===typeof fb.offset&&fb.shape.length===fb.stride.length&&(Array.isArray(fb.data)||Wa(fb.data))}function t(fb,Pb,fc,Fc,Pc,Uc){for(var rb=0;rb<Pb;++rb)for(var Jb=fb[rb],sc=0;sc<fc;++sc)for(var nc=Jb[sc],vc=0;vc<Fc;++vc)Pc[Uc++]=nc[vc]}function w(fb,Pb,fc,Fc,Pc){for(var Uc=1,rb=fc+1;rb<Pb.length;++rb)Uc*=Pb[rb];var Jb=Pb[fc];if(4===Pb.length-fc){var sc=Pb[fc+1],nc=Pb[fc+2];Pb=Pb[fc+3];for(rb=0;rb<Jb;++rb)t(fb[rb],sc,nc,Pb,Fc,Pc),Pc+=Uc}else for(rb=0;rb<Jb;++rb)w(fb[rb],
Pb,fc+1,Fc,Pc),Pc+=Uc}function x(fb){return sb[Object.prototype.toString.call(fb)]|0}function z(fb,Pb){for(var fc=0;fc<Pb.length;++fc)fb[fc]=Pb[fc]}function B(fb,Pb,fc,Fc,Pc,Uc,rb){for(var Jb=0,sc=0;sc<fc;++sc)for(var nc=0;nc<Fc;++nc)fb[Jb++]=Pb[Pc*sc+Uc*nc+rb]}function A(fb,Pb,fc,Fc){function Pc(Vb){this.id=sc++;this.buffer=fb.createBuffer();this.type=Vb;this.usage=35044;this.byteLength=0;this.dimension=1;this.dtype=5121;this.persistentData=null;fc.profile&&(this.stats={size:0})}function Uc(Vb,Wb,
yb){Vb.byteLength=Wb.byteLength;fb.bufferData(Vb.type,Wb,yb)}function rb(Vb,Wb,yb,ac,Ub,lc){Vb.usage=yb;if(Array.isArray(Wb)){if(Vb.dtype=ac||5126,0<Wb.length)if(Array.isArray(Wb[0])){Ub=Ab(Wb);for(var tc=ac=1;tc<Ub.length;++tc)ac*=Ub[tc];Vb.dimension=ac;Wb=pb(Wb,Ub,Vb.dtype);Uc(Vb,Wb,yb);lc?Vb.persistentData=Wb:za.freeType(Wb)}else"number"===typeof Wb[0]?(Vb.dimension=Ub,Ub=za.allocType(Vb.dtype,Wb.length),z(Ub,Wb),Uc(Vb,Ub,yb),lc?Vb.persistentData=Ub:za.freeType(Ub)):Wa(Wb[0])&&(Vb.dimension=Wb[0].length,
Vb.dtype=ac||x(Wb[0])||5126,Wb=pb(Wb,[Wb.length,Wb[0].length],Vb.dtype),Uc(Vb,Wb,yb),lc?Vb.persistentData=Wb:za.freeType(Wb))}else if(Wa(Wb))Vb.dtype=ac||x(Wb),Vb.dimension=Ub,Uc(Vb,Wb,yb),lc&&(Vb.persistentData=new Uint8Array(new Uint8Array(Wb.buffer)));else if(q(Wb)){Ub=Wb.shape;var Rc=Wb.stride;tc=Wb.offset;var kd=0,Cd=0,Gd=0,Ad=0;1===Ub.length?(kd=Ub[0],Cd=1,Gd=Rc[0],Ad=0):2===Ub.length&&(kd=Ub[0],Cd=Ub[1],Gd=Rc[0],Ad=Rc[1]);Vb.dtype=ac||x(Wb.data)||5126;Vb.dimension=Cd;Ub=za.allocType(Vb.dtype,
kd*Cd);B(Ub,Wb.data,kd,Cd,Gd,Ad,tc);Uc(Vb,Ub,yb);lc?Vb.persistentData=Ub:za.freeType(Ub)}else Wb instanceof ArrayBuffer&&(Vb.dtype=5121,Vb.dimension=Ub,Uc(Vb,Wb,yb),lc&&(Vb.persistentData=new Uint8Array(new Uint8Array(Wb))))}function Jb(Vb){Pb.bufferCount--;Fc(Vb);fb.deleteBuffer(Vb.buffer);Vb.buffer=null;delete nc[Vb.id]}var sc=0,nc={};Pc.prototype.bind=function(){fb.bindBuffer(this.type,this.buffer)};Pc.prototype.destroy=function(){Jb(this)};var vc=[];fc.profile&&(Pb.getTotalBufferSize=function(){var Vb=
0;Object.keys(nc).forEach(function(Wb){Vb+=nc[Wb].stats.size});return Vb});return{create:function(Vb,Wb,yb,ac){function Ub(tc){var Rc=35044,kd=null,Cd=0,Gd=0,Ad=1;Array.isArray(tc)||Wa(tc)||q(tc)||tc instanceof ArrayBuffer?kd=tc:"number"===typeof tc?Cd=tc|0:tc&&("data"in tc&&(kd=tc.data),"usage"in tc&&(Rc=ub[tc.usage]),"type"in tc&&(Gd=hb[tc.type]),"dimension"in tc&&(Ad=tc.dimension|0),"length"in tc&&(Cd=tc.length|0));lc.bind();kd?rb(lc,kd,Rc,Gd,Ad,ac):(Cd&&fb.bufferData(lc.type,Cd,Rc),lc.dtype=Gd||
5121,lc.usage=Rc,lc.dimension=Ad,lc.byteLength=Cd);fc.profile&&(lc.stats.size=lc.byteLength*tb[lc.dtype]);return Ub}Pb.bufferCount++;var lc=new Pc(Wb);nc[lc.id]=lc;yb||Ub(Vb);Ub._reglType="buffer";Ub._buffer=lc;Ub.subdata=function(tc,Rc){Rc=(Rc||0)|0;lc.bind();if(Wa(tc)||tc instanceof ArrayBuffer)fb.bufferSubData(lc.type,Rc,tc);else if(Array.isArray(tc)){if(0<tc.length)if("number"===typeof tc[0]){var kd=za.allocType(lc.dtype,tc.length);z(kd,tc);fb.bufferSubData(lc.type,Rc,kd);za.freeType(kd)}else if(Array.isArray(tc[0])||
Wa(tc[0])){var Cd=Ab(tc);kd=pb(tc,Cd,lc.dtype);fb.bufferSubData(lc.type,Rc,kd);za.freeType(kd)}}else if(q(tc)){Cd=tc.shape;var Gd=tc.stride,Ad=kd=0,Nc=0,cd=0;1===Cd.length?(kd=Cd[0],Ad=1,Nc=Gd[0],cd=0):2===Cd.length&&(kd=Cd[0],Ad=Cd[1],Nc=Gd[0],cd=Gd[1]);Cd=Array.isArray(tc.data)?lc.dtype:x(tc.data);Cd=za.allocType(Cd,kd*Ad);B(Cd,tc.data,kd,Ad,Nc,cd,tc.offset);fb.bufferSubData(lc.type,Rc,Cd);za.freeType(Cd)}return Ub};fc.profile&&(Ub.stats=lc.stats);Ub.destroy=function(){Jb(lc)};return Ub},createStream:function(Vb,
Wb){var yb=vc.pop();yb||(yb=new Pc(Vb));yb.bind();rb(yb,Wb,35040,0,1,!1);return yb},destroyStream:function(Vb){vc.push(Vb)},clear:function(){Za(nc).forEach(Jb);vc.forEach(Jb)},getBuffer:function(Vb){return Vb&&Vb._buffer instanceof Pc?Vb._buffer:null},restore:function(){Za(nc).forEach(function(Vb){Vb.buffer=fb.createBuffer();fb.bindBuffer(Vb.type,Vb.buffer);fb.bufferData(Vb.type,Vb.persistentData||Vb.byteLength,Vb.usage)})},_initBuffer:rb}}function D(fb,Pb,fc,Fc){function Pc(Vb){this.id=sc++;Jb[this.id]=
this;this.buffer=Vb;this.primType=4;this.type=this.vertCount=0}function Uc(Vb,Wb,yb,ac,Ub,lc,tc){Vb.buffer.bind();var Rc;Wb?((Rc=tc)||Wa(Wb)&&(!q(Wb)||Wa(Wb.data))||(Rc=Pb.oes_element_index_uint?5125:5123),fc._initBuffer(Vb.buffer,Wb,yb,Rc,3)):(fb.bufferData(34963,lc,yb),Vb.buffer.dtype=Rc||5121,Vb.buffer.usage=yb,Vb.buffer.dimension=3,Vb.buffer.byteLength=lc);Rc=tc;if(!tc){switch(Vb.buffer.dtype){case 5121:case 5120:Rc=5121;break;case 5123:case 5122:Rc=5123;break;case 5125:case 5124:Rc=5125}Vb.buffer.dtype=
Rc}Vb.type=Rc;Wb=Ub;0>Wb&&(Wb=Vb.buffer.byteLength,5123===Rc?Wb>>=1:5125===Rc&&(Wb>>=2));Vb.vertCount=Wb;Wb=ac;0>ac&&(Wb=4,ac=Vb.buffer.dimension,1===ac&&(Wb=0),2===ac&&(Wb=1),3===ac&&(Wb=4));Vb.primType=Wb}function rb(Vb){Fc.elementsCount--;delete Jb[Vb.id];Vb.buffer.destroy();Vb.buffer=null}var Jb={},sc=0,nc={uint8:5121,uint16:5123};Pb.oes_element_index_uint&&(nc.uint32=5125);Pc.prototype.bind=function(){this.buffer.bind()};var vc=[];return{create:function(Vb,Wb){function yb(lc){if(lc)if("number"===
typeof lc)ac(lc),Ub.primType=4,Ub.vertCount=lc|0,Ub.type=5121;else{var tc=null,Rc=35044,kd=-1,Cd=-1,Gd=0,Ad=0;if(Array.isArray(lc)||Wa(lc)||q(lc))tc=lc;else if("data"in lc&&(tc=lc.data),"usage"in lc&&(Rc=ub[lc.usage]),"primitive"in lc&&(kd=vb[lc.primitive]),"count"in lc&&(Cd=lc.count|0),"type"in lc&&(Ad=nc[lc.type]),"length"in lc)Gd=lc.length|0;else if(Gd=Cd,5123===Ad||5122===Ad)Gd*=2;else if(5125===Ad||5124===Ad)Gd*=4;Uc(Ub,tc,Rc,kd,Cd,Gd,Ad)}else ac(),Ub.primType=4,Ub.vertCount=0,Ub.type=5121;return yb}
var ac=fc.create(null,34963,!0),Ub=new Pc(ac._buffer);Fc.elementsCount++;yb(Vb);yb._reglType="elements";yb._elements=Ub;yb.subdata=function(lc,tc){ac.subdata(lc,tc);return yb};yb.destroy=function(){rb(Ub)};return yb},createStream:function(Vb){var Wb=vc.pop();Wb||(Wb=new Pc(fc.create(null,34963,!0,!1)._buffer));Uc(Wb,Vb,35040,-1,-1,0,0);return Wb},destroyStream:function(Vb){vc.push(Vb)},getElements:function(Vb){return"function"===typeof Vb&&Vb._elements instanceof Pc?Vb._elements:null},clear:function(){Za(Jb).forEach(rb)}}}
function C(fb){for(var Pb=za.allocType(5123,fb.length),fc=0;fc<fb.length;++fc)if(isNaN(fb[fc]))Pb[fc]=65535;else if(Infinity===fb[fc])Pb[fc]=31744;else if(-Infinity===fb[fc])Pb[fc]=64512;else{qb[0]=fb[fc];var Fc=zb[0],Pc=Fc>>>31<<15,Uc=(Fc<<1>>>24)-127;Fc=Fc>>13&1023;Pb[fc]=-24>Uc?Pc:-14>Uc?Pc+(Fc+1024>>-14-Uc):15<Uc?Pc+31744:Pc+(Uc+15<<10)+Fc}return Pb}function v(fb){return Array.isArray(fb)||Wa(fb)}function y(fb){return"[object "+fb+"]"}function F(fb){return Array.isArray(fb)&&(0===fb.length||"number"===
typeof fb[0])}function J(fb){return Array.isArray(fb)&&0!==fb.length&&v(fb[0])?!0:!1}function K(fb){return Object.prototype.toString.call(fb)}function M(fb){if(!fb)return!1;var Pb=K(fb);return 0<=Nb.indexOf(Pb)?!0:F(fb)||J(fb)||q(fb)}function H(fb,Pb){36193===fb.type?(fb.data=C(Pb),za.freeType(Pb)):fb.data=Pb}function O(fb,Pb,fc,Fc,Pc,Uc){fb="undefined"!==typeof ob[fb]?ob[fb]:ya[fb]*ec[Pb];Uc&&(fb*=6);if(Pc){for(Fc=0;1<=fc;)Fc+=fb*fc*fc,fc/=2;return Fc}return fb*fc*Fc}function I(fb,Pb,fc,Fc,Pc,Uc,
rb){function Jb(){this.format=this.internalformat=6408;this.type=5121;this.flipY=this.premultiplyAlpha=this.compressed=!1;this.unpackAlignment=1;this.colorSpace=37444;this.channels=this.height=this.width=0}function sc(Ob,Zb){Ob.internalformat=Zb.internalformat;Ob.format=Zb.format;Ob.type=Zb.type;Ob.compressed=Zb.compressed;Ob.premultiplyAlpha=Zb.premultiplyAlpha;Ob.flipY=Zb.flipY;Ob.unpackAlignment=Zb.unpackAlignment;Ob.colorSpace=Zb.colorSpace;Ob.width=Zb.width;Ob.height=Zb.height;Ob.channels=Zb.channels}
function nc(Ob,Zb){if("object"===typeof Zb&&Zb){"premultiplyAlpha"in Zb&&(Ob.premultiplyAlpha=Zb.premultiplyAlpha);"flipY"in Zb&&(Ob.flipY=Zb.flipY);"alignment"in Zb&&(Ob.unpackAlignment=Zb.alignment);"colorSpace"in Zb&&(Ob.colorSpace=Ue[Zb.colorSpace]);"type"in Zb&&(Ob.type=Ke[Zb.type]);var Mc=Ob.width,Fd=Ob.height,rd=Ob.channels,pe=!1;"shape"in Zb?(Mc=Zb.shape[0],Fd=Zb.shape[1],3===Zb.shape.length&&(rd=Zb.shape[2],pe=!0)):("radius"in Zb&&(Mc=Fd=Zb.radius),"width"in Zb&&(Mc=Zb.width),"height"in Zb&&
(Fd=Zb.height),"channels"in Zb&&(rd=Zb.channels,pe=!0));Ob.width=Mc|0;Ob.height=Fd|0;Ob.channels=rd|0;Mc=!1;"format"in Zb&&(Mc=Zb.format,Fd=Ob.internalformat=ve[Mc],Ob.format=hf[Fd],Mc in Ke&&!("type"in Zb)&&(Ob.type=Ke[Mc]),Mc in zf&&(Ob.compressed=!0),Mc=!0);!pe&&Mc?Ob.channels=ya[Ob.format]:pe&&!Mc&&Ob.channels!==Ka[Ob.format]&&(Ob.format=Ob.internalformat=Ka[Ob.channels])}}function vc(Ob){fb.pixelStorei(37440,Ob.flipY);fb.pixelStorei(37441,Ob.premultiplyAlpha);fb.pixelStorei(37443,Ob.colorSpace);
fb.pixelStorei(3317,Ob.unpackAlignment)}function Vb(){Jb.call(this);this.yOffset=this.xOffset=0;this.data=null;this.needsFree=!1;this.element=null;this.needsCopy=!1}function Wb(Ob,Zb){var Mc=null;M(Zb)?Mc=Zb:Zb&&(nc(Ob,Zb),"x"in Zb&&(Ob.xOffset=Zb.x|0),"y"in Zb&&(Ob.yOffset=Zb.y|0),M(Zb.data)&&(Mc=Zb.data));if(Zb.copy){Zb=Pc.viewportWidth;var Fd=Pc.viewportHeight;Ob.width=Ob.width||Zb-Ob.xOffset;Ob.height=Ob.height||Fd-Ob.yOffset;Ob.needsCopy=!0}else if(!Mc)Ob.width=Ob.width||1,Ob.height=Ob.height||
1,Ob.channels=Ob.channels||4;else if(Wa(Mc))Ob.channels=Ob.channels||4,Ob.data=Mc,"type"in Zb||5121!==Ob.type||(Ob.type=sb[Object.prototype.toString.call(Mc)]|0);else if(F(Mc)){Ob.channels=Ob.channels||4;Zb=Mc;Fd=Zb.length;switch(Ob.type){case 5121:case 5123:case 5125:case 5126:Fd=za.allocType(Ob.type,Fd);Fd.set(Zb);Ob.data=Fd;break;case 36193:Ob.data=C(Zb)}Ob.alignment=1;Ob.needsFree=!0}else if(q(Mc)){Zb=Mc.data;Array.isArray(Zb)||5121!==Ob.type||(Ob.type=sb[Object.prototype.toString.call(Zb)]|0);
Fd=Mc.shape;var rd=Mc.stride,pe,Hd;3===Fd.length?(pe=Fd[2],Hd=rd[2]):Hd=pe=1;var qe=Fd[0];var Ge=Fd[1];Fd=rd[0];rd=rd[1];Ob.alignment=1;Ob.width=qe;Ob.height=Ge;Ob.channels=pe;Ob.format=Ob.internalformat=Ka[pe];Ob.needsFree=!0;qe=Hd;Mc=Mc.offset;pe=Ob.width;Hd=Ob.height;Ge=Ob.channels;for(var oe=za.allocType(36193===Ob.type?5126:Ob.type,pe*Hd*Ge),xb=0,oc=0;oc<Hd;++oc)for(var Yb=0;Yb<pe;++Yb)for(var Bc=0;Bc<Ge;++Bc)oe[xb++]=Zb[Fd*Yb+rd*oc+qe*Bc+Mc];H(Ob,oe)}else if(K(Mc)===Aa||K(Mc)===Ja||K(Mc)===
Ta)K(Mc)===Aa||K(Mc)===Ja?Ob.element=Mc:Ob.element=Mc.canvas,Ob.width=Ob.element.width,Ob.height=Ob.element.height,Ob.channels=4;else if(K(Mc)===$a)Ob.element=Mc,Ob.width=Mc.width,Ob.height=Mc.height,Ob.channels=4;else if(K(Mc)===ab)Ob.element=Mc,Ob.width=Mc.naturalWidth,Ob.height=Mc.naturalHeight,Ob.channels=4;else if(K(Mc)===Db)Ob.element=Mc,Ob.width=Mc.videoWidth,Ob.height=Mc.videoHeight,Ob.channels=4;else if(J(Mc)){Zb=Ob.width||Mc[0].length;Fd=Ob.height||Mc.length;rd=Ob.channels;rd=v(Mc[0][0])?
rd||Mc[0][0].length:rd||1;qe=bb.shape(Mc);pe=1;for(Hd=0;Hd<qe.length;++Hd)pe*=qe[Hd];pe=za.allocType(36193===Ob.type?5126:Ob.type,pe);bb.flatten(Mc,qe,"",pe);H(Ob,pe);Ob.alignment=1;Ob.width=Zb;Ob.height=Fd;Ob.channels=rd;Ob.format=Ob.internalformat=Ka[rd];Ob.needsFree=!0}}function yb(Ob,Zb,Mc,Fd,rd){var pe=Ob.element,Hd=Ob.data,qe=Ob.internalformat,Ge=Ob.format,oe=Ob.type,xb=Ob.width,oc=Ob.height;vc(Ob);pe?fb.texSubImage2D(Zb,rd,Mc,Fd,Ge,oe,pe):Ob.compressed?fb.compressedTexSubImage2D(Zb,rd,Mc,Fd,
qe,xb,oc,Hd):Ob.needsCopy?(Fc(),fb.copyTexSubImage2D(Zb,rd,Mc,Fd,Ob.xOffset,Ob.yOffset,xb,oc)):fb.texSubImage2D(Zb,rd,Mc,Fd,xb,oc,Ge,oe,Hd)}function ac(){return Te.pop()||new Vb}function Ub(Ob){Ob.needsFree&&za.freeType(Ob.data);Vb.call(Ob);Te.push(Ob)}function lc(){Jb.call(this);this.genMipmaps=!1;this.mipmapHint=4352;this.mipmask=0;this.images=Array(16)}function tc(Ob,Zb,Mc){var Fd=Ob.images[0]=ac();Ob.mipmask=1;Fd.width=Ob.width=Zb;Fd.height=Ob.height=Mc;Fd.channels=Ob.channels=4}function Rc(Ob,
Zb){if(M(Zb)){var Mc=Ob.images[0]=ac();sc(Mc,Ob);Wb(Mc,Zb);Ob.mipmask=1}else if(nc(Ob,Zb),Array.isArray(Zb.mipmap)){Zb=Zb.mipmap;for(var Fd=0;Fd<Zb.length;++Fd)Mc=Ob.images[Fd]=ac(),sc(Mc,Ob),Mc.width>>=Fd,Mc.height>>=Fd,Wb(Mc,Zb[Fd]),Ob.mipmask|=1<<Fd}else Mc=Ob.images[0]=ac(),sc(Mc,Ob),Wb(Mc,Zb),Ob.mipmask=1;sc(Ob,Ob.images[0])}function kd(Ob,Zb){Ob=Ob.images;for(var Mc=0;Mc<Ob.length&&Ob[Mc];++Mc){var Fd=Ob[Mc],rd=Zb,pe=Mc,Hd=Fd.element,qe=Fd.data,Ge=Fd.internalformat,oe=Fd.format,xb=Fd.type,oc=
Fd.width,Yb=Fd.height;vc(Fd);Hd?fb.texImage2D(rd,pe,oe,oe,xb,Hd):Fd.compressed?fb.compressedTexImage2D(rd,pe,Ge,oc,Yb,0,qe):Fd.needsCopy?(Fc(),fb.copyTexImage2D(rd,pe,oe,Fd.xOffset,Fd.yOffset,oc,Yb,0)):fb.texImage2D(rd,pe,oe,oc,Yb,0,oe,xb,qe||null)}}function Cd(){var Ob=Be.pop()||new lc;Jb.call(Ob);for(var Zb=Ob.mipmask=0;16>Zb;++Zb)Ob.images[Zb]=null;return Ob}function Gd(Ob){for(var Zb=Ob.images,Mc=0;Mc<Zb.length;++Mc)Zb[Mc]&&Ub(Zb[Mc]),Zb[Mc]=null;Be.push(Ob)}function Ad(){this.magFilter=this.minFilter=
9728;this.wrapT=this.wrapS=33071;this.anisotropic=1;this.genMipmaps=!1;this.mipmapHint=4352}function Nc(Ob,Zb){"min"in Zb&&(Ob.minFilter=Td[Zb.min],0<=La.indexOf(Ob.minFilter)&&!("faces"in Zb)&&(Ob.genMipmaps=!0));"mag"in Zb&&(Ob.magFilter=Sd[Zb.mag]);var Mc=Ob.wrapS,Fd=Ob.wrapT;if("wrap"in Zb){var rd=Zb.wrap;"string"===typeof rd?Mc=Fd=Md[rd]:Array.isArray(rd)&&(Mc=Md[rd[0]],Fd=Md[rd[1]])}else"wrapS"in Zb&&(Mc=Md[Zb.wrapS]),"wrapT"in Zb&&(Fd=Md[Zb.wrapT]);Ob.wrapS=Mc;Ob.wrapT=Fd;"anisotropic"in Zb&&
(Ob.anisotropic=Zb.anisotropic);if("mipmap"in Zb){Mc=!1;switch(typeof Zb.mipmap){case "string":Ob.mipmapHint=id[Zb.mipmap];Mc=Ob.genMipmaps=!0;break;case "boolean":Mc=Ob.genMipmaps=Zb.mipmap;break;case "object":Ob.genMipmaps=!1,Mc=!0}!Mc||"min"in Zb||(Ob.minFilter=9984)}}function cd(Ob,Zb){fb.texParameteri(Zb,10241,Ob.minFilter);fb.texParameteri(Zb,10240,Ob.magFilter);fb.texParameteri(Zb,10242,Ob.wrapS);fb.texParameteri(Zb,10243,Ob.wrapT);Pb.ext_texture_filter_anisotropic&&fb.texParameteri(Zb,34046,
Ob.anisotropic);Ob.genMipmaps&&(fb.hint(33170,Ob.mipmapHint),fb.generateMipmap(Zb))}function Cc(Ob){Jb.call(this);this.mipmask=0;this.internalformat=6408;this.id=Ie++;this.refCount=1;this.target=Ob;this.texture=fb.createTexture();this.unit=-1;this.bindCount=0;this.texInfo=new Ad;rb.profile&&(this.stats={size:0})}function dd(Ob){fb.activeTexture(33984);fb.bindTexture(Ob.target,Ob.texture)}function Vc(){var Ob=Bd[0];Ob?fb.bindTexture(Ob.target,Ob.texture):fb.bindTexture(3553,null)}function Sc(Ob){var Zb=
Ob.texture,Mc=Ob.unit,Fd=Ob.target;0<=Mc&&(fb.activeTexture(33984+Mc),fb.bindTexture(Fd,null),Bd[Mc]=null);fb.deleteTexture(Zb);Ob.texture=null;Ob.params=null;Ob.pixels=null;Ob.refCount=0;delete nf[Ob.id];Uc.textureCount--}var id={"don't care":4352,"dont care":4352,nice:4354,fast:4353},Md={repeat:10497,clamp:33071,mirror:33648},Sd={nearest:9728,linear:9729},Td=la({mipmap:9987,"nearest mipmap nearest":9984,"linear mipmap nearest":9985,"nearest mipmap linear":9986,"linear mipmap linear":9987},Sd),Ue=
{none:0,browser:37444},Ke={uint8:5121,rgba4:32819,rgb565:33635,"rgb5 a1":32820},ve={alpha:6406,luminance:6409,"luminance alpha":6410,rgb:6407,rgba:6408,rgba4:32854,"rgb5 a1":32855,rgb565:36194},zf={};Pb.ext_srgb&&(ve.srgb=35904,ve.srgba=35906);Pb.oes_texture_float&&(Ke.float32=Ke["float"]=5126);Pb.oes_texture_half_float&&(Ke.float16=Ke["half float"]=36193);Pb.webgl_depth_texture&&(la(ve,{depth:6402,"depth stencil":34041}),la(Ke,{uint16:5123,uint32:5125,"depth stencil":34042}));Pb.webgl_compressed_texture_s3tc&&
la(zf,{"rgb s3tc dxt1":33776,"rgba s3tc dxt1":33777,"rgba s3tc dxt3":33778,"rgba s3tc dxt5":33779});Pb.webgl_compressed_texture_atc&&la(zf,{"rgb atc":35986,"rgba atc explicit alpha":35987,"rgba atc interpolated alpha":34798});Pb.webgl_compressed_texture_pvrtc&&la(zf,{"rgb pvrtc 4bppv1":35840,"rgb pvrtc 2bppv1":35841,"rgba pvrtc 4bppv1":35842,"rgba pvrtc 2bppv1":35843});Pb.webgl_compressed_texture_etc1&&(zf["rgb etc1"]=36196);var Ef=Array.prototype.slice.call(fb.getParameter(34467));Object.keys(zf).forEach(function(Ob){var Zb=
zf[Ob];0<=Ef.indexOf(Zb)&&(ve[Ob]=Zb)});var qf=Object.keys(ve);fc.textureFormats=qf;var Ff=[];Object.keys(ve).forEach(function(Ob){Ff[ve[Ob]]=Ob});var Rf=[];Object.keys(Ke).forEach(function(Ob){Rf[Ke[Ob]]=Ob});var Ud=[];Object.keys(Sd).forEach(function(Ob){Ud[Sd[Ob]]=Ob});var Ae=[];Object.keys(Td).forEach(function(Ob){Ae[Td[Ob]]=Ob});var rf=[];Object.keys(Md).forEach(function(Ob){rf[Md[Ob]]=Ob});var hf=qf.reduce(function(Ob,Zb){var Mc=ve[Zb];6409===Mc||6406===Mc||6409===Mc||6410===Mc||6402===Mc||
34041===Mc||Pb.ext_srgb&&(35904===Mc||35906===Mc)?Ob[Mc]=Mc:32855===Mc||0<=Zb.indexOf("rgba")?Ob[Mc]=6408:Ob[Mc]=6407;return Ob},{}),Te=[],Be=[],Ie=0,nf={},Zc=fc.maxTextureUnits,Bd=Array(Zc).map(function(){return null});la(Cc.prototype,{bind:function(){this.bindCount+=1;var Ob=this.unit;if(0>Ob){for(var Zb=0;Zb<Zc;++Zb){var Mc=Bd[Zb];if(Mc){if(0<Mc.bindCount)continue;Mc.unit=-1}Bd[Zb]=this;Ob=Zb;break}rb.profile&&Uc.maxTextureUnits<Ob+1&&(Uc.maxTextureUnits=Ob+1);this.unit=Ob;fb.activeTexture(33984+
Ob);fb.bindTexture(this.target,this.texture)}return Ob},unbind:function(){--this.bindCount},decRef:function(){0>=--this.refCount&&Sc(this)}});rb.profile&&(Uc.getTotalTextureSize=function(){var Ob=0;Object.keys(nf).forEach(function(Zb){Ob+=nf[Zb].stats.size});return Ob});return{create2D:function(Ob,Zb){function Mc(rd,pe){var Hd=Fd.texInfo;Ad.call(Hd);var qe=Cd();"number"===typeof rd?"number"===typeof pe?tc(qe,rd|0,pe|0):tc(qe,rd|0,rd|0):rd?(Nc(Hd,rd),Rc(qe,rd)):tc(qe,1,1);Hd.genMipmaps&&(qe.mipmask=
(qe.width<<1)-1);Fd.mipmask=qe.mipmask;sc(Fd,qe);Fd.internalformat=qe.internalformat;Mc.width=qe.width;Mc.height=qe.height;dd(Fd);kd(qe,3553);cd(Hd,3553);Vc();Gd(qe);rb.profile&&(Fd.stats.size=O(Fd.internalformat,Fd.type,qe.width,qe.height,Hd.genMipmaps,!1));Mc.format=Ff[Fd.internalformat];Mc.type=Rf[Fd.type];Mc.mag=Ud[Hd.magFilter];Mc.min=Ae[Hd.minFilter];Mc.wrapS=rf[Hd.wrapS];Mc.wrapT=rf[Hd.wrapT];return Mc}var Fd=new Cc(3553);nf[Fd.id]=Fd;Uc.textureCount++;Mc(Ob,Zb);Mc.subimage=function(rd,pe,
Hd,qe){pe|=0;Hd|=0;qe|=0;var Ge=ac();sc(Ge,Fd);Ge.width=0;Ge.height=0;Wb(Ge,rd);Ge.width=Ge.width||(Fd.width>>qe)-pe;Ge.height=Ge.height||(Fd.height>>qe)-Hd;dd(Fd);yb(Ge,3553,pe,Hd,qe);Vc();Ub(Ge);return Mc};Mc.resize=function(rd,pe){rd|=0;pe=pe|0||rd;if(rd===Fd.width&&pe===Fd.height)return Mc;Mc.width=Fd.width=rd;Mc.height=Fd.height=pe;dd(Fd);for(var Hd=0;Fd.mipmask>>Hd;++Hd){var qe=rd>>Hd,Ge=pe>>Hd;if(!qe||!Ge)break;fb.texImage2D(3553,Hd,Fd.format,qe,Ge,0,Fd.format,Fd.type,null)}Vc();rb.profile&&
(Fd.stats.size=O(Fd.internalformat,Fd.type,rd,pe,!1,!1));return Mc};Mc._reglType="texture2d";Mc._texture=Fd;rb.profile&&(Mc.stats=Fd.stats);Mc.destroy=function(){Fd.decRef()};return Mc},createCube:function(Ob,Zb,Mc,Fd,rd,pe){function Hd(oe,xb,oc,Yb,Bc,Yc){var bd,Tc=qe.texInfo;Ad.call(Tc);for(bd=0;6>bd;++bd)Ge[bd]=Cd();if("number"===typeof oe||!oe)for(oe=oe|0||1,bd=0;6>bd;++bd)tc(Ge[bd],oe,oe);else if("object"===typeof oe)if(xb)Rc(Ge[0],oe),Rc(Ge[1],xb),Rc(Ge[2],oc),Rc(Ge[3],Yb),Rc(Ge[4],Bc),Rc(Ge[5],
Yc);else if(Nc(Tc,oe),nc(qe,oe),"faces"in oe)for(oe=oe.faces,bd=0;6>bd;++bd)sc(Ge[bd],qe),Rc(Ge[bd],oe[bd]);else for(bd=0;6>bd;++bd)Rc(Ge[bd],oe);sc(qe,Ge[0]);qe.mipmask=Tc.genMipmaps?(Ge[0].width<<1)-1:Ge[0].mipmask;qe.internalformat=Ge[0].internalformat;Hd.width=Ge[0].width;Hd.height=Ge[0].height;dd(qe);for(bd=0;6>bd;++bd)kd(Ge[bd],34069+bd);cd(Tc,34067);Vc();rb.profile&&(qe.stats.size=O(qe.internalformat,qe.type,Hd.width,Hd.height,Tc.genMipmaps,!0));Hd.format=Ff[qe.internalformat];Hd.type=Rf[qe.type];
Hd.mag=Ud[Tc.magFilter];Hd.min=Ae[Tc.minFilter];Hd.wrapS=rf[Tc.wrapS];Hd.wrapT=rf[Tc.wrapT];for(bd=0;6>bd;++bd)Gd(Ge[bd]);return Hd}var qe=new Cc(34067);nf[qe.id]=qe;Uc.cubeCount++;var Ge=Array(6);Hd(Ob,Zb,Mc,Fd,rd,pe);Hd.subimage=function(oe,xb,oc,Yb,Bc){oc|=0;Yb|=0;Bc|=0;var Yc=ac();sc(Yc,qe);Yc.width=0;Yc.height=0;Wb(Yc,xb);Yc.width=Yc.width||(qe.width>>Bc)-oc;Yc.height=Yc.height||(qe.height>>Bc)-Yb;dd(qe);yb(Yc,34069+oe,oc,Yb,Bc);Vc();Ub(Yc);return Hd};Hd.resize=function(oe){oe|=0;if(oe!==qe.width){Hd.width=
qe.width=oe;Hd.height=qe.height=oe;dd(qe);for(var xb=0;6>xb;++xb)for(var oc=0;qe.mipmask>>oc;++oc)fb.texImage2D(34069+xb,oc,qe.format,oe>>oc,oe>>oc,0,qe.format,qe.type,null);Vc();rb.profile&&(qe.stats.size=O(qe.internalformat,qe.type,Hd.width,Hd.height,!1,!0));return Hd}};Hd._reglType="textureCube";Hd._texture=qe;rb.profile&&(Hd.stats=qe.stats);Hd.destroy=function(){qe.decRef()};return Hd},clear:function(){for(var Ob=0;Ob<Zc;++Ob)fb.activeTexture(33984+Ob),fb.bindTexture(3553,null),Bd[Ob]=null;Za(nf).forEach(Sc);
Uc.cubeCount=0;Uc.textureCount=0},getTexture:function(Ob){return null},restore:function(){for(var Ob=0;Ob<Zc;++Ob){var Zb=Bd[Ob];Zb&&(Zb.bindCount=0,Zb.unit=-1,Bd[Ob]=null)}Za(nf).forEach(function(Mc){Mc.texture=fb.createTexture();fb.bindTexture(Mc.target,Mc.texture);for(var Fd=0;32>Fd;++Fd)if(0!==(Mc.mipmask&1<<Fd))if(3553===Mc.target)fb.texImage2D(3553,Fd,Mc.internalformat,Mc.width>>Fd,Mc.height>>Fd,0,Mc.internalformat,Mc.type,null);else for(var rd=0;6>rd;++rd)fb.texImage2D(34069+rd,Fd,Mc.internalformat,
Mc.width>>Fd,Mc.height>>Fd,0,Mc.internalformat,Mc.type,null);cd(Mc.texInfo,Mc.target)})}}}function L(fb,Pb,fc,Fc,Pc,Uc){function rb(Cc,dd,Vc){this.target=Cc;this.texture=dd;this.renderbuffer=Vc;var Sc=Cc=0;dd?(Cc=dd.width,Sc=dd.height):Vc&&(Cc=Vc.width,Sc=Vc.height);this.width=Cc;this.height=Sc}function Jb(Cc){Cc&&(Cc.texture&&Cc.texture._texture.decRef(),Cc.renderbuffer&&Cc.renderbuffer._renderbuffer.decRef())}function sc(Cc,dd,Vc){Cc&&(Cc.texture?Cc.texture._texture.refCount+=1:Cc.renderbuffer._renderbuffer.refCount+=
1)}function nc(Cc,dd){dd&&(dd.texture?fb.framebufferTexture2D(36160,Cc,dd.target,dd.texture._texture.texture,0):fb.framebufferRenderbuffer(36160,Cc,36161,dd.renderbuffer._renderbuffer.renderbuffer))}function vc(Cc){var dd=3553,Vc=null,Sc=null,id=Cc;"object"===typeof Cc&&(id=Cc.data,"target"in Cc&&(dd=Cc.target|0));Cc=id._reglType;"texture2d"===Cc?Vc=id:"textureCube"===Cc?Vc=id:"renderbuffer"===Cc&&(Sc=id,dd=36161);return new rb(dd,Vc,Sc)}function Vb(Cc,dd,Vc,Sc,id){if(Vc)return Cc=Fc.create2D({width:Cc,
height:dd,format:Sc,type:id}),Cc._texture.refCount=0,new rb(3553,Cc,null);Cc=Pc.create({width:Cc,height:dd,format:Sc});Cc._renderbuffer.refCount=0;return new rb(36161,null,Cc)}function Wb(Cc){return Cc&&(Cc.texture||Cc.renderbuffer)}function yb(Cc,dd,Vc){Cc&&(Cc.texture?Cc.texture.resize(dd,Vc):Cc.renderbuffer&&Cc.renderbuffer.resize(dd,Vc),Cc.width=dd,Cc.height=Vc)}function ac(){this.id=Nc++;cd[this.id]=this;this.framebuffer=fb.createFramebuffer();this.height=this.width=0;this.colorAttachments=[];
this.depthStencilAttachment=this.stencilAttachment=this.depthAttachment=null}function Ub(Cc){Cc.colorAttachments.forEach(Jb);Jb(Cc.depthAttachment);Jb(Cc.stencilAttachment);Jb(Cc.depthStencilAttachment)}function lc(Cc){fb.deleteFramebuffer(Cc.framebuffer);Cc.framebuffer=null;Uc.framebufferCount--;delete cd[Cc.id]}function tc(Cc){var dd;fb.bindFramebuffer(36160,Cc.framebuffer);var Vc=Cc.colorAttachments;for(dd=0;dd<Vc.length;++dd)nc(36064+dd,Vc[dd]);for(dd=Vc.length;dd<fc.maxColorAttachments;++dd)fb.framebufferTexture2D(36160,
36064+dd,3553,null,0);fb.framebufferTexture2D(36160,33306,3553,null,0);fb.framebufferTexture2D(36160,36096,3553,null,0);fb.framebufferTexture2D(36160,36128,3553,null,0);nc(36096,Cc.depthAttachment);nc(36128,Cc.stencilAttachment);nc(33306,Cc.depthStencilAttachment);fb.checkFramebufferStatus(36160);fb.isContextLost();fb.bindFramebuffer(36160,kd.next?kd.next.framebuffer:null);kd.cur=kd.next;fb.getError()}function Rc(Cc,dd){function Vc(id,Md){var Sd=0,Td=0,Ue=!0,Ke=!0;var ve=null;var zf=!0,Ef="rgba",
qf="uint8",Ff=1,Rf=null,Ud=null,Ae=null,rf=!1;if("number"===typeof id)Sd=id|0,Td=Md|0||Sd;else if(id){"shape"in id?(Td=id.shape,Sd=Td[0],Td=Td[1]):("radius"in id&&(Sd=Td=id.radius),"width"in id&&(Sd=id.width),"height"in id&&(Td=id.height));if("color"in id||"colors"in id)ve=id.color||id.colors,Array.isArray(ve);if(!ve){"colorCount"in id&&(Ff=id.colorCount|0);"colorTexture"in id&&(zf=!!id.colorTexture,Ef="rgba4");if("colorType"in id&&(qf=id.colorType,!zf))if("half float"===qf||"float16"===qf)Ef="rgba16f";
else if("float"===qf||"float32"===qf)Ef="rgba32f";"colorFormat"in id&&(Ef=id.colorFormat,0<=Cd.indexOf(Ef)?zf=!0:0<=Gd.indexOf(Ef)&&(zf=!1))}if("depthTexture"in id||"depthStencilTexture"in id)rf=!(!id.depthTexture&&!id.depthStencilTexture);"depth"in id&&("boolean"===typeof id.depth?Ue=id.depth:(Rf=id.depth,Ke=!1));"stencil"in id&&("boolean"===typeof id.stencil?Ke=id.stencil:(Ud=id.stencil,Ue=!1));"depthStencil"in id&&("boolean"===typeof id.depthStencil?Ue=Ke=id.depthStencil:(Ae=id.depthStencil,Ke=
Ue=!1))}else Sd=Td=1;var hf=Md=null,Te=null;if(Array.isArray(ve))id=ve.map(vc);else if(ve)id=[vc(ve)];else for(id=Array(Ff),ve=0;ve<Ff;++ve)id[ve]=Vb(Sd,Td,zf,Ef,qf);Sd=Sd||id[0].width;Td=Td||id[0].height;Rf?Md=vc(Rf):Ue&&!Ke&&(Md=Vb(Sd,Td,rf,"depth","uint32"));Ud?hf=vc(Ud):Ke&&!Ue&&(hf=Vb(Sd,Td,!1,"stencil","uint8"));Ae?Te=vc(Ae):!Rf&&!Ud&&Ke&&Ue&&(Te=Vb(Sd,Td,rf,"depth stencil","depth stencil"));Ue=null;for(ve=0;ve<id.length;++ve)sc(id[ve],Sd,Td),id[ve]&&id[ve].texture&&(Ke=yc[id[ve].texture._texture.format]*
Jc[id[ve].texture._texture.type],null===Ue&&(Ue=Ke));sc(Md,Sd,Td);sc(hf,Sd,Td);sc(Te,Sd,Td);Ub(Sc);Sc.width=Sd;Sc.height=Td;Sc.colorAttachments=id;Sc.depthAttachment=Md;Sc.stencilAttachment=hf;Sc.depthStencilAttachment=Te;Vc.color=id.map(Wb);Vc.depth=Wb(Md);Vc.stencil=Wb(hf);Vc.depthStencil=Wb(Te);Vc.width=Sc.width;Vc.height=Sc.height;tc(Sc);return Vc}var Sc=new ac;Uc.framebufferCount++;Vc(Cc,dd);return la(Vc,{resize:function(id,Md){id=Math.max(id|0,1);Md=Math.max(Md|0||id,1);if(id===Sc.width&&Md===
Sc.height)return Vc;for(var Sd=Sc.colorAttachments,Td=0;Td<Sd.length;++Td)yb(Sd[Td],id,Md);yb(Sc.depthAttachment,id,Md);yb(Sc.stencilAttachment,id,Md);yb(Sc.depthStencilAttachment,id,Md);Sc.width=Vc.width=id;Sc.height=Vc.height=Md;tc(Sc);return Vc},_reglType:"framebuffer",_framebuffer:Sc,destroy:function(){lc(Sc);Ub(Sc)},use:function(id){kd.setFBO({framebuffer:Vc},id)}})}var kd={cur:null,next:null,dirty:!1,setFBO:null},Cd=["rgba"],Gd=["rgba4","rgb565","rgb5 a1"];Pb.ext_srgb&&Gd.push("srgba");Pb.ext_color_buffer_half_float&&
Gd.push("rgba16f","rgb16f");Pb.webgl_color_buffer_float&&Gd.push("rgba32f");var Ad=["uint8"];Pb.oes_texture_half_float&&Ad.push("half float","float16");Pb.oes_texture_float&&Ad.push("float","float32");var Nc=0,cd={};return la(kd,{getFramebuffer:function(Cc){return"function"===typeof Cc&&"framebuffer"===Cc._reglType&&(Cc=Cc._framebuffer,Cc instanceof ac)?Cc:null},create:Rc,createCube:function(Cc){function dd(Sc){var id={color:null},Md=0,Sd=null;var Td="rgba";var Ue="uint8",Ke=1;if("number"===typeof Sc)Md=
Sc|0;else if(Sc){"shape"in Sc?Md=Sc.shape[0]:("radius"in Sc&&(Md=Sc.radius|0),"width"in Sc?Md=Sc.width|0:"height"in Sc&&(Md=Sc.height|0));if("color"in Sc||"colors"in Sc)Sd=Sc.color||Sc.colors,Array.isArray(Sd);Sd||("colorCount"in Sc&&(Ke=Sc.colorCount|0),"colorType"in Sc&&(Ue=Sc.colorType),"colorFormat"in Sc&&(Td=Sc.colorFormat));"depth"in Sc&&(id.depth=Sc.depth);"stencil"in Sc&&(id.stencil=Sc.stencil);"depthStencil"in Sc&&(id.depthStencil=Sc.depthStencil)}else Md=1;if(Sd)if(Array.isArray(Sd))for(Sc=
[],Td=0;Td<Sd.length;++Td)Sc[Td]=Sd[Td];else Sc=[Sd];else for(Sc=Array(Ke),Sd={radius:Md,format:Td,type:Ue},Td=0;Td<Ke;++Td)Sc[Td]=Fc.createCube(Sd);id.color=Array(Sc.length);for(Td=0;Td<Sc.length;++Td)Ke=Sc[Td],Md=Md||Ke.width,id.color[Td]={target:34069,data:Sc[Td]};for(Td=0;6>Td;++Td){for(Ke=0;Ke<Sc.length;++Ke)id.color[Ke].target=34069+Td;0<Td&&(id.depth=Vc[0].depth,id.stencil=Vc[0].stencil,id.depthStencil=Vc[0].depthStencil);if(Vc[Td])Vc[Td](id);else Vc[Td]=Rc(id)}return la(dd,{width:Md,height:Md,
color:Sc})}var Vc=Array(6);dd(Cc);return la(dd,{faces:Vc,resize:function(Sc){var id=Sc|0;if(id===dd.width)return dd;var Md=dd.color;for(Sc=0;Sc<Md.length;++Sc)Md[Sc].resize(id);for(Sc=0;6>Sc;++Sc)Vc[Sc].resize(id);dd.width=dd.height=id;return dd},_reglType:"framebufferCube",destroy:function(){Vc.forEach(function(Sc){Sc.destroy()})}})},clear:function(){Za(cd).forEach(lc)},restore:function(){kd.cur=null;kd.next=null;kd.dirty=!0;Za(cd).forEach(function(Cc){Cc.framebuffer=fb.createFramebuffer();tc(Cc)})}})}
function Q(){this.w=this.z=this.y=this.x=this.state=0;this.buffer=null;this.size=0;this.normalized=!1;this.type=5126;this.divisor=this.stride=this.offset=0}function Z(fb,Pb,fc,Fc,Pc){function Uc(Ub){if(Ub!==ac.currentVAO){var lc=Pb.oes_vertex_array_object;Ub?lc.bindVertexArrayOES(Ub.vao):lc.bindVertexArrayOES(null);ac.currentVAO=Ub}}function rb(Ub){if(Ub!==ac.currentVAO){if(Ub)Ub.bindAttrs();else for(var lc=Pb.angle_instanced_arrays,tc=0;tc<Vb.length;++tc){var Rc=Vb[tc];Rc.buffer?(fb.enableVertexAttribArray(tc),
fb.vertexAttribPointer(tc,Rc.size,Rc.type,Rc.normalized,Rc.stride,Rc.offfset),lc&&lc.vertexAttribDivisorANGLE(tc,Rc.divisor)):(fb.disableVertexAttribArray(tc),fb.vertexAttrib4f(tc,Rc.x,Rc.y,Rc.z,Rc.w))}ac.currentVAO=Ub}}function Jb(){Za(yb).forEach(function(Ub){Ub.destroy()})}function sc(){this.id=++Wb;this.attributes=[];var Ub=Pb.oes_vertex_array_object;this.vao=Ub?Ub.createVertexArrayOES():null;yb[this.id]=this;this.buffers=[]}function nc(){Pb.oes_vertex_array_object&&Za(yb).forEach(function(Ub){Ub.refresh()})}
var vc=fc.maxAttributes,Vb=Array(vc);for(fc=0;fc<vc;++fc)Vb[fc]=new Q;var Wb=0,yb={},ac={Record:Q,scope:{},state:Vb,currentVAO:null,targetVAO:null,restore:Pb.oes_vertex_array_object?nc:function(){},createVAO:function(Ub){function lc(Rc){for(var kd=0;kd<tc.buffers.length;++kd)tc.buffers[kd].destroy();tc.buffers.length=0;kd=tc.attributes;kd.length=Rc.length;for(var Cd=0;Cd<Rc.length;++Cd){var Gd=Rc[Cd],Ad=kd[Cd]=new Q;Array.isArray(Gd)||Wa(Gd)||q(Gd)?(Gd=Pc.create(Gd,34962,!1,!0),Ad.buffer=Pc.getBuffer(Gd),
Ad.size=Ad.buffer.dimension|0,Ad.normalized=!1,Ad.type=Ad.buffer.dtype,Ad.offset=0,Ad.stride=0,Ad.divisor=0,Ad.state=1,tc.buffers.push(Gd)):Pc.getBuffer(Gd)?(Ad.buffer=Pc.getBuffer(Gd),Ad.size=Ad.buffer.dimension|0,Ad.normalized=!1,Ad.type=Ad.buffer.dtype,Ad.offset=0,Ad.stride=0,Ad.divisor=0,Ad.state=1):Pc.getBuffer(Gd.buffer)?(Ad.buffer=Pc.getBuffer(Gd.buffer),Ad.size=(+Gd.size||Ad.buffer.dimension)|0,Ad.normalized=!!Gd.normalized||!1,Ad.type="type"in Gd?hb[Gd.type]:Ad.buffer.dtype,Ad.offset=(Gd.offset||
0)|0,Ad.stride=(Gd.stride||0)|0,Ad.divisor=(Gd.divisor||0)|0,Ad.state=1):"x"in Gd&&(Ad.x=+Gd.x||0,Ad.y=+Gd.y||0,Ad.z=+Gd.z||0,Ad.w=+Gd.w||0,Ad.state=2)}tc.refresh();return lc}var tc=new sc;Fc.vaoCount+=1;lc.destroy=function(){tc.destroy()};lc._vao=tc;lc._reglType="vao";return lc(Ub)},getVAO:function(Ub){return"function"===typeof Ub&&Ub._vao?Ub._vao:null},destroyBuffer:function(Ub){for(var lc=0;lc<Vb.length;++lc){var tc=Vb[lc];tc.buffer===Ub&&(fb.disableVertexAttribArray(lc),tc.buffer=null)}},setVAO:Pb.oes_vertex_array_object?
Uc:rb,clear:Pb.oes_vertex_array_object?Jb:function(){}};sc.prototype.bindAttrs=function(){for(var Ub=Pb.angle_instanced_arrays,lc=this.attributes,tc=0;tc<lc.length;++tc){var Rc=lc[tc];Rc.buffer?(fb.enableVertexAttribArray(tc),fb.bindBuffer(34962,Rc.buffer.buffer),fb.vertexAttribPointer(tc,Rc.size,Rc.type,Rc.normalized,Rc.stride,Rc.offset),Ub&&Ub.vertexAttribDivisorANGLE(tc,Rc.divisor)):(fb.disableVertexAttribArray(tc),fb.vertexAttrib4f(tc,Rc.x,Rc.y,Rc.z,Rc.w))}for(Ub=lc.length;Ub<vc;++Ub)fb.disableVertexAttribArray(Ub)};
sc.prototype.refresh=function(){var Ub=Pb.oes_vertex_array_object;Ub&&(Ub.bindVertexArrayOES(this.vao),this.bindAttrs(),ac.currentVAO=this)};sc.prototype.destroy=function(){if(this.vao){var Ub=Pb.oes_vertex_array_object;this===ac.currentVAO&&(ac.currentVAO=null,Ub.bindVertexArrayOES(null));Ub.deleteVertexArrayOES(this.vao);this.vao=null}yb[this.id]&&(delete yb[this.id],--Fc.vaoCount)};return ac}function ba(fb,Pb,fc,Fc){function Pc(ac,Ub,lc,tc){this.name=ac;this.id=Ub;this.location=lc;this.info=tc}
function Uc(ac,Ub){for(var lc=0;lc<ac.length;++lc)if(ac[lc].id===Ub.id){ac[lc].location=Ub.location;return}ac.push(Ub)}function rb(ac,Ub,lc){lc=35632===ac?nc:vc;var tc=lc[Ub];if(!tc){var Rc=Pb.str(Ub);tc=fb.createShader(ac);fb.shaderSource(tc,Rc);fb.compileShader(tc);lc[Ub]=tc}return tc}function Jb(ac,Ub){this.id=yb++;this.fragId=ac;this.vertId=Ub;this.program=null;this.uniforms=[];this.attributes=[];Fc.profile&&(this.stats={uniformsCount:0,attributesCount:0})}function sc(ac,Ub,lc){var tc=rb(35632,
ac.fragId);var Rc=rb(35633,ac.vertId);Ub=ac.program=fb.createProgram();fb.attachShader(Ub,tc);fb.attachShader(Ub,Rc);if(lc)for(tc=0;tc<lc.length;++tc)Rc=lc[tc],fb.bindAttribLocation(Ub,Rc[0],Rc[1]);fb.linkProgram(Ub);Rc=fb.getProgramParameter(Ub,35718);Fc.profile&&(ac.stats.uniformsCount=Rc);var kd=ac.uniforms;for(tc=0;tc<Rc;++tc)if(lc=fb.getActiveUniform(Ub,tc))if(1<lc.size)for(var Cd=0;Cd<lc.size;++Cd){var Gd=lc.name.replace("[0]","["+Cd+"]");Uc(kd,new Pc(Gd,Pb.id(Gd),fb.getUniformLocation(Ub,Gd),
lc))}else Uc(kd,new Pc(lc.name,Pb.id(lc.name),fb.getUniformLocation(Ub,lc.name),lc));Rc=fb.getProgramParameter(Ub,35721);Fc.profile&&(ac.stats.attributesCount=Rc);ac=ac.attributes;for(tc=0;tc<Rc;++tc)(lc=fb.getActiveAttrib(Ub,tc))&&Uc(ac,new Pc(lc.name,Pb.id(lc.name),fb.getAttribLocation(Ub,lc.name),lc))}var nc={},vc={},Vb={},Wb=[],yb=0;Fc.profile&&(fc.getMaxUniformsCount=function(){var ac=0;Wb.forEach(function(Ub){Ub.stats.uniformsCount>ac&&(ac=Ub.stats.uniformsCount)});return ac},fc.getMaxAttributesCount=
function(){var ac=0;Wb.forEach(function(Ub){Ub.stats.attributesCount>ac&&(ac=Ub.stats.attributesCount)});return ac});return{clear:function(){var ac=fb.deleteShader.bind(fb);Za(nc).forEach(ac);nc={};Za(vc).forEach(ac);vc={};Wb.forEach(function(Ub){fb.deleteProgram(Ub.program)});Wb.length=0;Vb={};fc.shaderCount=0},program:function(ac,Ub,lc,tc){var Rc=Vb[Ub];Rc||(Rc=Vb[Ub]={});var kd=Rc[ac];if(kd&&!tc)return kd;Ub=new Jb(Ub,ac);fc.shaderCount++;sc(Ub,lc,tc);kd||(Rc[ac]=Ub);Wb.push(Ub);return Ub},restore:function(){nc=
{};vc={};for(var ac=0;ac<Wb.length;++ac)sc(Wb[ac],null,Wb[ac].attributes.map(function(Ub){return[Ub.location,Ub.name]}))},shader:rb,frag:-1,vert:-1}}function V(fb,Pb,fc,Fc,Pc,Uc,rb){function Jb(nc){var vc=null===Pb.next?5121:Pb.next.colorAttachments[0].texture._texture.type;var Vb=0,Wb=0,yb=Fc.framebufferWidth,ac=Fc.framebufferHeight,Ub=null;Wa(nc)?Ub=nc:nc&&(Vb=nc.x|0,Wb=nc.y|0,yb=(nc.width||Fc.framebufferWidth-Vb)|0,ac=(nc.height||Fc.framebufferHeight-Wb)|0,Ub=nc.data||null);fc();nc=yb*ac*4;Ub||
(5121===vc?Ub=new Uint8Array(nc):5126===vc&&(Ub=Ub||new Float32Array(nc)));fb.pixelStorei(3333,4);fb.readPixels(Vb,Wb,yb,ac,6408,vc,Ub);return Ub}function sc(nc){var vc;Pb.setFBO({framebuffer:nc.framebuffer},function(){vc=Jb(nc)});return vc}return function(nc){return nc&&"framebuffer"in nc?sc(nc):Jb(nc)}}function S(fb){return Array.prototype.slice.call(fb)}function T(fb){return S(fb).join("")}function fa(){function fb(){var Jb=[],sc=[];return la(function(){Jb.push.apply(Jb,S(arguments))},{def:function(){var nc=
"v"+fc++;sc.push(nc);0<arguments.length&&(Jb.push(nc,"\x3d"),Jb.push.apply(Jb,S(arguments)),Jb.push(";"));return nc},toString:function(){return T([0<sc.length?"var "+sc.join(",")+";":"",T(Jb)])}})}function Pb(){function Jb(Wb,yb){nc(Wb,yb,"\x3d",sc.def(Wb,yb),";")}var sc=fb(),nc=fb(),vc=sc.toString,Vb=nc.toString;return la(function(){sc.apply(sc,S(arguments))},{def:sc.def,entry:sc,exit:nc,save:Jb,set:function(Wb,yb,ac){Jb(Wb,yb);sc(Wb,yb,"\x3d",ac,";")},toString:function(){return vc()+Vb()}})}var fc=
0,Fc=[],Pc=[],Uc=fb(),rb={};return{global:Uc,link:function(Jb){for(var sc=0;sc<Pc.length;++sc)if(Pc[sc]===Jb)return Fc[sc];sc="g"+fc++;Fc.push(sc);Pc.push(Jb);return sc},block:fb,proc:function(Jb,sc){function nc(){var yb="a"+vc.length;vc.push(yb);return yb}var vc=[];sc=sc||0;for(var Vb=0;Vb<sc;++Vb)nc();Vb=Pb();var Wb=Vb.toString;return rb[Jb]=la(Vb,{arg:nc,toString:function(){return T(["function(",vc.join(),"){",Wb(),"}"])}})},scope:Pb,cond:function(){var Jb=T(arguments),sc=Pb(),nc=Pb(),vc=sc.toString,
Vb=nc.toString;return la(sc,{then:function(){sc.apply(sc,S(arguments));return this},"else":function(){nc.apply(nc,S(arguments));return this},toString:function(){var Wb=Vb();Wb&&(Wb="else{"+Wb+"}");return T(["if(",Jb,"){",vc(),"}",Wb])}})},compile:function(){var Jb=['"use strict";',Uc,"return {"];Object.keys(rb).forEach(function(nc){Jb.push('"',nc,'":',rb[nc].toString(),",")});Jb.push("}");var sc=T(Jb).replace(/;/g,";\n").replace(/}/g,"}\n").replace(/{/g,"{\n");return Function.apply(null,Fc.concat(sc)).apply(null,
Pc)}}}function W(fb){return Array.isArray(fb)||Wa(fb)||q(fb)}function aa(fb){return fb.sort(function(Pb,fc){return"viewport"===Pb?-1:"viewport"===fc?1:Pb<fc?-1:1})}function ja(fb,Pb,fc,Fc){this.thisDep=fb;this.contextDep=Pb;this.propDep=fc;this.append=Fc}function ma(fb){return fb&&!(fb.thisDep||fb.contextDep||fb.propDep)}function ia(fb){return new ja(!1,!1,!1,fb)}function ra(fb,Pb){var fc=fb.type;return 0===fc?(fc=fb.data.length,new ja(!0,1<=fc,2<=fc,Pb)):4===fc?(fc=fb.data,new ja(fc.thisDep,fc.contextDep,
fc.propDep,Pb)):new ja(3===fc,2===fc,1===fc,Pb)}function wa(fb,Pb,fc,Fc,Pc,Uc,rb,Jb,sc,nc,vc,Vb,Wb,yb,ac){function Ub(xb){return xb.replace(".","_")}function lc(xb,oc,Yb){var Bc=Ub(xb);rd.push(xb);Fd[Bc]=Mc[Bc]=!!Yb;pe[Bc]=oc}function tc(xb,oc,Yb){var Bc=Ub(xb);rd.push(xb);Array.isArray(Yb)?(Mc[Bc]=Yb.slice(),Fd[Bc]=Yb.slice()):Mc[Bc]=Fd[Bc]=Yb;Hd[Bc]=oc}function Rc(){var xb=fa(),oc=xb.link,Yb=xb.global;xb.id=oe++;xb.batchId="0";var Bc=oc(qe),Yc=xb.shared={props:"a0"};Object.keys(qe).forEach(function(rc){Yc[rc]=
Yb.def(Bc,".",rc)});var bd=xb.next={},Tc=xb.current={};Object.keys(Hd).forEach(function(rc){Array.isArray(Mc[rc])&&(bd[rc]=Yb.def(Yc.next,".",rc),Tc[rc]=Yb.def(Yc.current,".",rc))});var Oc=xb.constants={};Object.keys(Ge).forEach(function(rc){Oc[rc]=Yb.def(JSON.stringify(Ge[rc]))});xb.invoke=function(rc,pc){switch(pc.type){case 0:var ud=["this",Yc.context,Yc.props,xb.batchId];return rc.def(oc(pc.data),".call(",ud.slice(0,Math.max(pc.data.length+1,4)),")");case 1:return rc.def(Yc.props,pc.data);case 2:return rc.def(Yc.context,
pc.data);case 3:return rc.def("this",pc.data);case 4:return pc.data.append(xb,rc),pc.data.ref}};xb.attribCache={};var wc={};xb.scopeAttrib=function(rc){rc=Pb.id(rc);if(rc in wc)return wc[rc];var pc=nc.scope[rc];pc||(pc=nc.scope[rc]=new Zc);return wc[rc]=oc(pc)};return xb}function kd(xb){var oc=xb["static"];xb=xb.dynamic;if("profile"in oc){var Yb=!!oc.profile;var Bc=ia(function(bd,Tc){return Yb});Bc.enable=Yb}else if("profile"in xb){var Yc=xb.profile;Bc=ra(Yc,function(bd,Tc){return bd.invoke(Tc,Yc)})}return Bc}
function Cd(xb,oc){oc=xb["static"];xb=xb.dynamic;if("framebuffer"in oc){var Yb=oc.framebuffer;return Yb?(Yb=Jb.getFramebuffer(Yb),ia(function(Yc,bd){var Tc=Yc.link(Yb);Yc=Yc.shared;bd.set(Yc.framebuffer,".next",Tc);Yc=Yc.context;bd.set(Yc,".framebufferWidth",Tc+".width");bd.set(Yc,".framebufferHeight",Tc+".height");return Tc})):ia(function(Yc,bd){Yc=Yc.shared;bd.set(Yc.framebuffer,".next","null");Yc=Yc.context;bd.set(Yc,".framebufferWidth",Yc+".drawingBufferWidth");bd.set(Yc,".framebufferHeight",
Yc+".drawingBufferHeight");return"null"})}if("framebuffer"in xb){var Bc=xb.framebuffer;return ra(Bc,function(Yc,bd){var Tc=Yc.invoke(bd,Bc);Yc=Yc.shared;var Oc=Yc.framebuffer;Tc=bd.def(Oc,".getFramebuffer(",Tc,")");bd.set(Oc,".next",Tc);Yc=Yc.context;bd.set(Yc,".framebufferWidth",Tc+"?"+Tc+".width:"+Yc+".drawingBufferWidth");bd.set(Yc,".framebufferHeight",Tc+"?"+Tc+".height:"+Yc+".drawingBufferHeight");return Tc})}return null}function Gd(xb,oc,Yb){function Bc(Oc){if(Oc in Yc){var wc=Yc[Oc];Oc=!0;
var rc=wc.x|0,pc=wc.y|0,ud,ae;"width"in wc?ud=wc.width|0:Oc=!1;"height"in wc?ae=wc.height|0:Oc=!1;return new ja(!Oc&&oc&&oc.thisDep,!Oc&&oc&&oc.contextDep,!Oc&&oc&&oc.propDep,function(Ce,Xd){Ce=Ce.shared.context;var bf=ud;"width"in wc||(bf=Xd.def(Ce,".","framebufferWidth","-",rc));var Ve=ae;"height"in wc||(Ve=Xd.def(Ce,".","framebufferHeight","-",pc));return[rc,pc,bf,Ve]})}if(Oc in bd){var Wd=bd[Oc];Oc=ra(Wd,function(Ce,Xd){var bf=Ce.invoke(Xd,Wd);Ce=Ce.shared.context;var Ve=Xd.def(bf,".x|0"),vf=
Xd.def(bf,".y|0"),Oe=Xd.def('"width" in ',bf,"?",bf,".width|0:","(",Ce,".","framebufferWidth","-",Ve,")");bf=Xd.def('"height" in ',bf,"?",bf,".height|0:","(",Ce,".","framebufferHeight","-",vf,")");return[Ve,vf,Oe,bf]});oc&&(Oc.thisDep=Oc.thisDep||oc.thisDep,Oc.contextDep=Oc.contextDep||oc.contextDep,Oc.propDep=Oc.propDep||oc.propDep);return Oc}return oc?new ja(oc.thisDep,oc.contextDep,oc.propDep,function(Ce,Xd){Ce=Ce.shared.context;return[0,0,Xd.def(Ce,".","framebufferWidth"),Xd.def(Ce,".","framebufferHeight")]}):
null}var Yc=xb["static"],bd=xb.dynamic;if(xb=Bc("viewport")){var Tc=xb;xb=new ja(xb.thisDep,xb.contextDep,xb.propDep,function(Oc,wc){var rc=Tc.append(Oc,wc);Oc=Oc.shared.context;wc.set(Oc,".viewportWidth",rc[2]);wc.set(Oc,".viewportHeight",rc[3]);return rc})}return{viewport:xb,scissor_box:Bc("scissor.box")}}function Ad(xb,oc){xb=xb["static"];if("string"===typeof xb.frag&&"string"===typeof xb.vert){if(0<Object.keys(oc.dynamic).length)return null;xb=oc["static"];oc=Object.keys(xb);if(0<oc.length&&"number"===
typeof xb[oc[0]]){for(var Yb=[],Bc=0;Bc<oc.length;++Bc)Yb.push([xb[oc[Bc]]|0,oc[Bc]]);return Yb}}return null}function Nc(xb,oc,Yb){function Bc(rc){if(rc in Yc){var pc=Pb.id(Yc[rc]);rc=ia(function(){return pc});rc.id=pc;return rc}if(rc in bd){var ud=bd[rc];return ra(ud,function(ae,Wd){var Ce=ae.invoke(Wd,ud);return Wd.def(ae.shared.strings,".id(",Ce,")")})}return null}var Yc=xb["static"],bd=xb.dynamic,Tc=Bc("frag"),Oc=Bc("vert"),wc=null;ma(Tc)&&ma(Oc)?(wc=vc.program(Oc.id,Tc.id,null,Yb),xb=ia(function(rc,
pc){return rc.link(wc)})):xb=new ja(Tc&&Tc.thisDep||Oc&&Oc.thisDep,Tc&&Tc.contextDep||Oc&&Oc.contextDep,Tc&&Tc.propDep||Oc&&Oc.propDep,function(rc,pc){var ud=rc.shared.shader;var ae=Tc?Tc.append(rc,pc):pc.def(ud,".","frag");rc=Oc?Oc.append(rc,pc):pc.def(ud,".","vert");return pc.def(ud+".program("+rc+","+ae+")")});return{frag:Tc,vert:Oc,progVar:xb,program:wc}}function cd(xb,oc){function Yb(Oc,wc){if(Oc in Bc){var rc=Bc[Oc]|0;return ia(function(ud,ae){wc&&(ud.OFFSET=rc);return rc})}if(Oc in Yc){var pc=
Yc[Oc];return ra(pc,function(ud,ae){ae=ud.invoke(ae,pc);wc&&(ud.OFFSET=ae);return ae})}return wc&&bd?ia(function(ud,ae){ud.OFFSET="0";return 0}):null}var Bc=xb["static"],Yc=xb.dynamic,bd=function(){if("elements"in Bc){var Oc=Bc.elements;W(Oc)?Oc=Uc.getElements(Uc.create(Oc,!0)):Oc&&(Oc=Uc.getElements(Oc));var wc=ia(function(pc,ud){return Oc?(ud=pc.link(Oc),pc.ELEMENTS=ud):pc.ELEMENTS=null});wc.value=Oc;return wc}if("elements"in Yc){var rc=Yc.elements;return ra(rc,function(pc,ud){var ae=pc.shared,
Wd=ae.isBufferArgs;ae=ae.elements;var Ce=pc.invoke(ud,rc),Xd=ud.def("null");Wd=ud.def(Wd,"(",Ce,")");Ce=pc.cond(Wd).then(Xd,"\x3d",ae,".createStream(",Ce,");")["else"](Xd,"\x3d",ae,".getElements(",Ce,");");ud.entry(Ce);ud.exit(pc.cond(Wd).then(ae,".destroyStream(",Xd,");"));return pc.ELEMENTS=Xd})}return null}(),Tc=Yb("offset",!0);return{elements:bd,primitive:function(){if("primitive"in Bc){var Oc=Bc.primitive;return ia(function(rc,pc){return vb[Oc]})}if("primitive"in Yc){var wc=Yc.primitive;return ra(wc,
function(rc,pc){var ud=rc.constants.primTypes;rc=rc.invoke(pc,wc);return pc.def(ud,"[",rc,"]")})}return bd?ma(bd)?bd.value?ia(function(rc,pc){return pc.def(rc.ELEMENTS,".primType")}):ia(function(){return 4}):new ja(bd.thisDep,bd.contextDep,bd.propDep,function(rc,pc){rc=rc.ELEMENTS;return pc.def(rc,"?",rc,".primType:",4)}):null}(),count:function(){if("count"in Bc){var Oc=Bc.count|0;return ia(function(){return Oc})}if("count"in Yc){var wc=Yc.count;return ra(wc,function(rc,pc){return rc.invoke(pc,wc)})}return bd?
ma(bd)?bd?Tc?new ja(Tc.thisDep,Tc.contextDep,Tc.propDep,function(rc,pc){return pc.def(rc.ELEMENTS,".vertCount-",rc.OFFSET)}):ia(function(rc,pc){return pc.def(rc.ELEMENTS,".vertCount")}):ia(function(){return-1}):new ja(bd.thisDep||Tc.thisDep,bd.contextDep||Tc.contextDep,bd.propDep||Tc.propDep,function(rc,pc){var ud=rc.ELEMENTS;return rc.OFFSET?pc.def(ud,"?",ud,".vertCount-",rc.OFFSET,":-1"):pc.def(ud,"?",ud,".vertCount:-1")}):null}(),instances:Yb("instances",!1),offset:Tc}}function Cc(xb,oc){var Yb=
xb["static"],Bc=xb.dynamic,Yc={};rd.forEach(function(bd){function Tc(wc,rc){if(bd in Yb){var pc=wc(Yb[bd]);Yc[Oc]=ia(function(){return pc})}else if(bd in Bc){var ud=Bc[bd];Yc[Oc]=ra(ud,function(ae,Wd){return rc(ae,Wd,ae.invoke(Wd,ud))})}}var Oc=Ub(bd);switch(bd){case "cull.enable":case "blend.enable":case "dither":case "stencil.enable":case "depth.enable":case "scissor.enable":case "polygonOffset.enable":case "sample.alpha":case "sample.enable":case "depth.mask":return Tc(function(wc){return wc},
function(wc,rc,pc){return pc});case "depth.func":return Tc(function(wc){return Gb[wc]},function(wc,rc,pc){return rc.def(wc.constants.compareFuncs,"[",pc,"]")});case "depth.range":return Tc(function(wc){return wc},function(wc,rc,pc){wc=rc.def("+",pc,"[0]");rc=rc.def("+",pc,"[1]");return[wc,rc]});case "blend.func":return Tc(function(wc){return[ib["srcRGB"in wc?wc.srcRGB:wc.src],ib["dstRGB"in wc?wc.dstRGB:wc.dst],ib["srcAlpha"in wc?wc.srcAlpha:wc.src],ib["dstAlpha"in wc?wc.dstAlpha:wc.dst]]},function(wc,
rc,pc){function ud(Xd,bf){return rc.def('"',Xd,bf,'" in ',pc,"?",pc,".",Xd,bf,":",pc,".",Xd)}wc=wc.constants.blendFuncs;var ae=ud("src","RGB"),Wd=ud("dst","RGB");ae=rc.def(wc,"[",ae,"]");var Ce=rc.def(wc,"[",ud("src","Alpha"),"]");Wd=rc.def(wc,"[",Wd,"]");wc=rc.def(wc,"[",ud("dst","Alpha"),"]");return[ae,Wd,Ce,wc]});case "blend.equation":return Tc(function(wc){if("string"===typeof wc)return[Bd[wc],Bd[wc]];if("object"===typeof wc)return[Bd[wc.rgb],Bd[wc.alpha]]},function(wc,rc,pc){var ud=wc.constants.blendEquations,
ae=rc.def(),Wd=rc.def();wc=wc.cond("typeof ",pc,'\x3d\x3d\x3d"string"');wc.then(ae,"\x3d",Wd,"\x3d",ud,"[",pc,"];");wc["else"](ae,"\x3d",ud,"[",pc,".rgb];",Wd,"\x3d",ud,"[",pc,".alpha];");rc(wc);return[ae,Wd]});case "blend.color":return Tc(function(wc){return d(4,function(rc){return+wc[rc]})},function(wc,rc,pc){return d(4,function(ud){return rc.def("+",pc,"[",ud,"]")})});case "stencil.mask":return Tc(function(wc){return wc|0},function(wc,rc,pc){return rc.def(pc,"|0")});case "stencil.func":return Tc(function(wc){return[Gb[wc.cmp||
"keep"],wc.ref||0,"mask"in wc?wc.mask:-1]},function(wc,rc,pc){wc=rc.def('"cmp" in ',pc,"?",wc.constants.compareFuncs,"[",pc,".cmp]",":",7680);var ud=rc.def(pc,".ref|0");rc=rc.def('"mask" in ',pc,"?",pc,".mask|0:-1");return[wc,ud,rc]});case "stencil.opFront":case "stencil.opBack":return Tc(function(wc){return["stencil.opBack"===bd?1029:1028,Hb[wc.fail||"keep"],Hb[wc.zfail||"keep"],Hb[wc.zpass||"keep"]]},function(wc,rc,pc){function ud(Wd){return rc.def('"',Wd,'" in ',pc,"?",ae,"[",pc,".",Wd,"]:",7680)}
var ae=wc.constants.stencilOps;return["stencil.opBack"===bd?1029:1028,ud("fail"),ud("zfail"),ud("zpass")]});case "polygonOffset.offset":return Tc(function(wc){return[wc.factor|0,wc.units|0]},function(wc,rc,pc){wc=rc.def(pc,".factor|0");rc=rc.def(pc,".units|0");return[wc,rc]});case "cull.face":return Tc(function(wc){var rc=0;"front"===wc?rc=1028:"back"===wc&&(rc=1029);return rc},function(wc,rc,pc){return rc.def(pc,'\x3d\x3d\x3d"front"?',1028,":",1029)});case "lineWidth":return Tc(function(wc){return wc},
function(wc,rc,pc){return pc});case "frontFace":return Tc(function(wc){return $b[wc]},function(wc,rc,pc){return rc.def(pc+'\x3d\x3d\x3d"cw"?2304:2305')});case "colorMask":return Tc(function(wc){return wc.map(function(rc){return!!rc})},function(wc,rc,pc){return d(4,function(ud){return"!!"+pc+"["+ud+"]"})});case "sample.coverage":return Tc(function(wc){return["value"in wc?wc.value:1,!!wc.invert]},function(wc,rc,pc){wc=rc.def('"value" in ',pc,"?+",pc,".value:1");rc=rc.def("!!",pc,".invert");return[wc,
rc]})}});return Yc}function dd(xb,oc){var Yb=xb["static"],Bc=xb.dynamic,Yc={};Object.keys(Yb).forEach(function(bd){var Tc=Yb[bd];if("number"===typeof Tc||"boolean"===typeof Tc)var Oc=ia(function(){return Tc});else if("function"===typeof Tc){var wc=Tc._reglType;if("texture2d"===wc||"textureCube"===wc)Oc=ia(function(rc){return rc.link(Tc)});else if("framebuffer"===wc||"framebufferCube"===wc)Oc=ia(function(rc){return rc.link(Tc.color[0])})}else v(Tc)&&(Oc=ia(function(rc){return rc.global.def("[",d(Tc.length,
function(pc){return Tc[pc]}),"]")}));Oc.value=Tc;Yc[bd]=Oc});Object.keys(Bc).forEach(function(bd){var Tc=Bc[bd];Yc[bd]=ra(Tc,function(Oc,wc){return Oc.invoke(wc,Tc)})});return Yc}function Vc(xb,oc){var Yb=xb["static"],Bc=xb.dynamic,Yc={};Object.keys(Yb).forEach(function(bd){var Tc=Yb[bd],Oc=Pb.id(bd),wc=new Zc;if(W(Tc))wc.state=1,wc.buffer=Pc.getBuffer(Pc.create(Tc,34962,!1,!0)),wc.type=0;else{var rc=Pc.getBuffer(Tc);if(rc)wc.state=1,wc.buffer=rc,wc.type=0;else if("constant"in Tc){var pc=Tc.constant;
wc.buffer="null";wc.state=2;"number"===typeof pc?wc.x=pc:Ia.forEach(function(bf,Ve){Ve<pc.length&&(wc[bf]=pc[Ve])})}else{rc=W(Tc.buffer)?Pc.getBuffer(Pc.create(Tc.buffer,34962,!1,!0)):Pc.getBuffer(Tc.buffer);var ud=Tc.offset|0,ae=Tc.stride|0,Wd=Tc.size|0,Ce=!!Tc.normalized,Xd=0;"type"in Tc&&(Xd=hb[Tc.type]);Tc=Tc.divisor|0;wc.buffer=rc;wc.state=1;wc.size=Wd;wc.normalized=Ce;wc.type=Xd||rc.dtype;wc.offset=ud;wc.stride=ae;wc.divisor=Tc}}Yc[bd]=ia(function(bf,Ve){Ve=bf.attribCache;if(Oc in Ve)return Ve[Oc];
var vf={isStream:!1};Object.keys(wc).forEach(function(Oe){vf[Oe]=wc[Oe]});wc.buffer&&(vf.buffer=bf.link(wc.buffer),vf.type=vf.type||vf.buffer+".dtype");return Ve[Oc]=vf})});Object.keys(Bc).forEach(function(bd){var Tc=Bc[bd];Yc[bd]=ra(Tc,function(Oc,wc){function rc(Ve){wc(Wd[Ve],"\x3d",pc,".",Ve,"|0;")}var pc=Oc.invoke(wc,Tc),ud=Oc.shared;Oc=Oc.constants;var ae=ud.isBufferArgs;ud=ud.buffer;var Wd={isStream:wc.def(!1)},Ce=new Zc;Ce.state=1;Object.keys(Ce).forEach(function(Ve){Wd[Ve]=wc.def(""+Ce[Ve])});
var Xd=Wd.buffer,bf=Wd.type;wc("if(",ae,"(",pc,")){",Wd.isStream,"\x3dtrue;",Xd,"\x3d",ud,".createStream(",34962,",",pc,");",bf,"\x3d",Xd,".dtype;","}else{",Xd,"\x3d",ud,".getBuffer(",pc,");","if(",Xd,"){",bf,"\x3d",Xd,".dtype;",'}else if("constant" in ',pc,"){",Wd.state,"\x3d",2,";","if(typeof "+pc+'.constant \x3d\x3d\x3d "number"){',Wd[Ia[0]],"\x3d",pc,".constant;",Ia.slice(1).map(function(Ve){return Wd[Ve]}).join("\x3d"),"\x3d0;","}else{",Ia.map(function(Ve,vf){return Wd[Ve]+"\x3d"+pc+".constant.length\x3e"+
vf+"?"+pc+".constant["+vf+"]:0;"}).join(""),"}}else{","if(",ae,"(",pc,".buffer)){",Xd,"\x3d",ud,".createStream(",34962,",",pc,".buffer);","}else{",Xd,"\x3d",ud,".getBuffer(",pc,".buffer);","}",bf,'\x3d"type" in ',pc,"?",Oc.glTypes,"[",pc,".type]:",Xd,".dtype;",Wd.normalized,"\x3d!!",pc,".normalized;");rc("size");rc("offset");rc("stride");rc("divisor");wc("}}");wc.exit("if(",Wd.isStream,"){",ud,".destroyStream(",Xd,");","}");return Wd})});return Yc}function Sc(xb,oc){oc=xb["static"];xb=xb.dynamic;
if("vao"in oc){var Yb=oc.vao;null!==Yb&&null===nc.getVAO(Yb)&&(Yb=nc.createVAO(Yb));return ia(function(Yc){return Yc.link(nc.getVAO(Yb))})}if("vao"in xb){var Bc=xb.vao;return ra(Bc,function(Yc,bd){var Tc=Yc.invoke(bd,Bc);return bd.def(Yc.shared.vao+".getVAO("+Tc+")")})}return null}function id(xb){var oc=xb["static"],Yb=xb.dynamic,Bc={};Object.keys(oc).forEach(function(Yc){var bd=oc[Yc];Bc[Yc]=ia(function(Tc,Oc){return"number"===typeof bd||"boolean"===typeof bd?""+bd:Tc.link(bd)})});Object.keys(Yb).forEach(function(Yc){var bd=
Yb[Yc];Bc[Yc]=ra(bd,function(Tc,Oc){return Tc.invoke(Oc,bd)})});return Bc}function Md(xb,oc,Yb,Bc,Yc){function bd(Xd){var bf=wc[Xd];bf&&(pc[Xd]=bf)}var Tc=Ad(xb,oc),Oc=Cd(xb,Yc),wc=Gd(xb,Oc,Yc),rc=cd(xb,Yc),pc=Cc(xb,Yc),ud=Nc(xb,Yc,Tc);bd("viewport");bd(Ub("scissor.box"));var ae=0<Object.keys(pc).length;Oc={framebuffer:Oc,draw:rc,shader:ud,state:pc,dirty:ae,scopeVAO:null,drawVAO:null,useVAO:!1,attributes:{}};Oc.profile=kd(xb,Yc);Oc.uniforms=dd(Yb,Yc);Oc.drawVAO=Oc.scopeVAO=Sc(xb,Yc);if(!Oc.drawVAO&&
ud.program&&!Tc&&fc.angle_instanced_arrays){var Wd=!0;xb=ud.program.attributes.map(function(Xd){Xd=oc["static"][Xd];Wd=Wd&&!!Xd;return Xd});if(Wd&&0<xb.length){var Ce=nc.getVAO(nc.createVAO(xb));Oc.drawVAO=new ja(null,null,null,function(Xd,bf){return Xd.link(Ce)});Oc.useVAO=!0}}Tc?Oc.useVAO=!0:Oc.attributes=Vc(oc,Yc);Oc.context=id(Bc,Yc);return Oc}function Sd(xb,oc,Yb){var Bc=xb.shared.context,Yc=xb.scope();Object.keys(Yb).forEach(function(bd){oc.save(Bc,"."+bd);Yc(Bc,".",bd,"\x3d",Yb[bd].append(xb,
oc),";")});oc(Yc)}function Td(xb,oc,Yb,Bc){var Yc=xb.shared,bd=Yc.gl,Tc=Yc.framebuffer,Oc;Zb&&(Oc=oc.def(Yc.extensions,".webgl_draw_buffers"));var wc=xb.constants;Yc=wc.drawBuffer;wc=wc.backBuffer;xb=Yb?Yb.append(xb,oc):oc.def(Tc,".next");Bc||oc("if(",xb,"!\x3d\x3d",Tc,".cur){");oc("if(",xb,"){",bd,".bindFramebuffer(",36160,",",xb,".framebuffer);");Zb&&oc(Oc,".drawBuffersWEBGL(",Yc,"[",xb,".colorAttachments.length]);");oc("}else{",bd,".bindFramebuffer(",36160,",null);");Zb&&oc(Oc,".drawBuffersWEBGL(",
wc,");");oc("}",Tc,".cur\x3d",xb,";");Bc||oc("}")}function Ue(xb,oc,Yb){var Bc=xb.shared,Yc=Bc.gl,bd=xb.current,Tc=xb.next,Oc=Bc.current,wc=Bc.next,rc=xb.cond(Oc,".dirty");rd.forEach(function(pc){pc=Ub(pc);if(!(pc in Yb.state))if(pc in Tc){var ud=Tc[pc];var ae=bd[pc];var Wd=d(Mc[pc].length,function(Ce){return rc.def(ud,"[",Ce,"]")});rc(xb.cond(Wd.map(function(Ce,Xd){return Ce+"!\x3d\x3d"+ae+"["+Xd+"]"}).join("||")).then(Yc,".",Hd[pc],"(",Wd,");",Wd.map(function(Ce,Xd){return ae+"["+Xd+"]\x3d"+Ce}).join(";"),
";"))}else ud=rc.def(wc,".",pc),Wd=xb.cond(ud,"!\x3d\x3d",Oc,".",pc),rc(Wd),pc in pe?Wd(xb.cond(ud).then(Yc,".enable(",pe[pc],");")["else"](Yc,".disable(",pe[pc],");"),Oc,".",pc,"\x3d",ud,";"):Wd(Yc,".",Hd[pc],"(",ud,");",Oc,".",pc,"\x3d",ud,";")});0===Object.keys(Yb.state).length&&rc(Oc,".dirty\x3dfalse;");oc(rc)}function Ke(xb,oc,Yb,Bc){var Yc=xb.shared,bd=xb.current,Tc=Yc.current,Oc=Yc.gl;aa(Object.keys(Yb)).forEach(function(wc){var rc=Yb[wc];if(!Bc||Bc(rc)){var pc=rc.append(xb,oc);if(pe[wc]){var ud=
pe[wc];ma(rc)?pc?oc(Oc,".enable(",ud,");"):oc(Oc,".disable(",ud,");"):oc(xb.cond(pc).then(Oc,".enable(",ud,");")["else"](Oc,".disable(",ud,");"));oc(Tc,".",wc,"\x3d",pc,";")}else if(v(pc)){var ae=bd[wc];oc(Oc,".",Hd[wc],"(",pc,");",pc.map(function(Wd,Ce){return ae+"["+Ce+"]\x3d"+Wd}).join(";"),";")}else oc(Oc,".",Hd[wc],"(",pc,");",Tc,".",wc,"\x3d",pc,";")}})}function ve(xb,oc){Ob&&(xb.instancing=oc.def(xb.shared.extensions,".angle_instanced_arrays"))}function zf(xb,oc,Yb,Bc,Yc){function bd(){return"undefined"===
typeof performance?"Date.now()":"performance.now()"}function Tc(Xd){Wd=oc.def();Xd(Wd,"\x3d",bd(),";");"string"===typeof Yc?Xd(pc,".count+\x3d",Yc,";"):Xd(pc,".count++;");yb&&(Bc?(Ce=oc.def(),Xd(Ce,"\x3d",ae,".getNumPendingQueries();")):Xd(ae,".beginQuery(",pc,");"))}function Oc(Xd){Xd(pc,".cpuTime+\x3d",bd(),"-",Wd,";");yb&&(Bc?Xd(ae,".pushScopeStats(",Ce,",",ae,".getNumPendingQueries(),",pc,");"):Xd(ae,".endQuery();"))}function wc(Xd){var bf=oc.def(ud,".profile");oc(ud,".profile\x3d",Xd,";");oc.exit(ud,
".profile\x3d",bf,";")}var rc=xb.shared,pc=xb.stats,ud=rc.current,ae=rc.timer;Yb=Yb.profile;var Wd,Ce;if(Yb){if(ma(Yb)){Yb.enable?(Tc(oc),Oc(oc.exit),wc("true")):wc("false");return}Yb=Yb.append(xb,oc);wc(Yb)}else Yb=oc.def(ud,".profile");rc=xb.block();Tc(rc);oc("if(",Yb,"){",rc,"}");xb=xb.block();Oc(xb);oc.exit("if(",Yb,"){",xb,"}")}function Ef(xb,oc,Yb,Bc,Yc){function bd(wc){switch(wc){case 35664:case 35667:case 35671:return 2;case 35665:case 35668:case 35672:return 3;case 35666:case 35669:case 35673:return 4;
default:return 1}}function Tc(wc,rc,pc){function ud(){oc("if(!",Xd,".buffer){",Wd,".enableVertexAttribArray(",Ce,");}");var Oe=pc.type;var Mf=pc.size?oc.def(pc.size,"||",rc):rc;oc("if(",Xd,".type!\x3d\x3d",Oe,"||",Xd,".size!\x3d\x3d",Mf,"||",vf.map(function(ng){return Xd+"."+ng+"!\x3d\x3d"+pc[ng]}).join("||"),"){",Wd,".bindBuffer(",34962,",",bf,".buffer);",Wd,".vertexAttribPointer(",[Ce,Mf,Oe,pc.normalized,pc.stride,pc.offset],");",Xd,".type\x3d",Oe,";",Xd,".size\x3d",Mf,";",vf.map(function(ng){return Xd+
"."+ng+"\x3d"+pc[ng]+";"}).join(""),"}");Ob&&(Oe=pc.divisor,oc("if(",Xd,".divisor!\x3d\x3d",Oe,"){",xb.instancing,".vertexAttribDivisorANGLE(",[Ce,Oe],");",Xd,".divisor\x3d",Oe,";}"))}function ae(){oc("if(",Xd,".buffer){",Wd,".disableVertexAttribArray(",Ce,");",Xd,".buffer\x3dnull;","}if(",Ia.map(function(Oe,Mf){return Xd+"."+Oe+"!\x3d\x3d"+Ve[Mf]}).join("||"),"){",Wd,".vertexAttrib4f(",Ce,",",Ve,");",Ia.map(function(Oe,Mf){return Xd+"."+Oe+"\x3d"+Ve[Mf]+";"}).join(""),"}")}var Wd=Oc.gl,Ce=oc.def(wc,
".location"),Xd=oc.def(Oc.attributes,"[",Ce,"]");wc=pc.state;var bf=pc.buffer,Ve=[pc.x,pc.y,pc.z,pc.w],vf=["buffer","normalized","offset","stride"];1===wc?ud():2===wc?ae():(oc("if(",wc,"\x3d\x3d\x3d",1,"){"),ud(),oc("}else{"),ae(),oc("}"))}var Oc=xb.shared;Bc.forEach(function(wc){var rc=wc.name,pc=Yb.attributes[rc];if(pc){if(!Yc(pc))return;var ud=pc.append(xb,oc)}else{if(!Yc(uc))return;var ae=xb.scopeAttrib(rc);ud={};Object.keys(new Zc).forEach(function(Wd){ud[Wd]=oc.def(ae,".",Wd)})}Tc(xb.link(wc),
bd(wc.info.type),ud)})}function qf(xb,oc,Yb,Bc,Yc){for(var bd=xb.shared,Tc=bd.gl,Oc,wc=0;wc<Bc.length;++wc){var rc=Bc[wc],pc=rc.name,ud=rc.info.type,ae=Yb.uniforms[pc];rc=xb.link(rc)+".location";if(ae){if(!Yc(ae))continue;if(ma(ae)){pc=ae.value;if(35678===ud||35680===ud)ud=xb.link(pc._texture||pc.color[0]._texture),oc(Tc,".uniform1i(",rc,",",ud+".bind());"),oc.exit(ud,".unbind();");else if(35674===ud||35675===ud||35676===ud)pc=xb.global.def("new Float32Array(["+Array.prototype.slice.call(pc)+"])"),
ae=2,35675===ud?ae=3:35676===ud&&(ae=4),oc(Tc,".uniformMatrix",ae,"fv(",rc,",false,",pc,");");else{switch(ud){case 5126:Oc="1f";break;case 35664:Oc="2f";break;case 35665:Oc="3f";break;case 35666:Oc="4f";break;case 35670:Oc="1i";break;case 5124:Oc="1i";break;case 35671:Oc="2i";break;case 35667:Oc="2i";break;case 35672:Oc="3i";break;case 35668:Oc="3i";break;case 35673:Oc="4i";break;case 35669:Oc="4i"}oc(Tc,".uniform",Oc,"(",rc,",",v(pc)?Array.prototype.slice.call(pc):pc,");")}continue}else var Wd=ae.append(xb,
oc)}else{if(!Yc(uc))continue;Wd=oc.def(bd.uniforms,"[",Pb.id(pc),"]")}35678===ud?oc("if(",Wd,"\x26\x26",Wd,'._reglType\x3d\x3d\x3d"framebuffer"){',Wd,"\x3d",Wd,".color[0];","}"):35680===ud&&oc("if(",Wd,"\x26\x26",Wd,'._reglType\x3d\x3d\x3d"framebufferCube"){',Wd,"\x3d",Wd,".color[0];","}");pc=1;switch(ud){case 35678:case 35680:ud=oc.def(Wd,"._texture");oc(Tc,".uniform1i(",rc,",",ud,".bind());");oc.exit(ud,".unbind();");continue;case 5124:case 35670:Oc="1i";break;case 35667:case 35671:Oc="2i";pc=2;
break;case 35668:case 35672:Oc="3i";pc=3;break;case 35669:case 35673:Oc="4i";pc=4;break;case 5126:Oc="1f";break;case 35664:Oc="2f";pc=2;break;case 35665:Oc="3f";pc=3;break;case 35666:Oc="4f";pc=4;break;case 35674:Oc="Matrix2fv";break;case 35675:Oc="Matrix3fv";break;case 35676:Oc="Matrix4fv"}oc(Tc,".uniform",Oc,"(",rc,",");if("M"===Oc.charAt(0)){rc=Math.pow(ud-35674+2,2);var Ce=xb.global.def("new Float32Array(",rc,")");oc("false,(Array.isArray(",Wd,")||",Wd," instanceof Float32Array)?",Wd,":(",d(rc,
function(Xd){return Ce+"["+Xd+"]\x3d"+Wd+"["+Xd+"]"}),",",Ce,")")}else 1<pc?oc(d(pc,function(Xd){return Wd+"["+Xd+"]"})):oc(Wd);oc(");")}}function Ff(xb,oc,Yb,Bc){function Yc(Oe){var Mf=pc[Oe];return Mf?Mf.contextDep&&Bc.contextDynamic||Mf.propDep?Mf.append(xb,Yb):Mf.append(xb,oc):oc.def(rc,".",Oe)}function bd(){function Oe(){Yb(bf,".drawElementsInstancedANGLE(",[ae,Ce,Ve,Wd+"\x3c\x3c(("+Ve+"-5121)\x3e\x3e1)",Xd],");")}function Mf(){Yb(bf,".drawArraysInstancedANGLE(",[ae,Wd,Ce,Xd],");")}ud?vf?Oe():
(Yb("if(",ud,"){"),Oe(),Yb("}else{"),Mf(),Yb("}")):Mf()}function Tc(){function Oe(){Yb(wc+".drawElements("+[ae,Ce,Ve,Wd+"\x3c\x3c(("+Ve+"-5121)\x3e\x3e1)"]+");")}function Mf(){Yb(wc+".drawArrays("+[ae,Wd,Ce]+");")}ud?vf?Oe():(Yb("if(",ud,"){"),Oe(),Yb("}else{"),Mf(),Yb("}")):Mf()}var Oc=xb.shared,wc=Oc.gl,rc=Oc.draw,pc=Bc.draw,ud=function(){var Oe=pc.elements,Mf=oc;if(Oe){if(Oe.contextDep&&Bc.contextDynamic||Oe.propDep)Mf=Yb;Oe=Oe.append(xb,Mf)}else Oe=Mf.def(rc,".","elements");Oe&&Mf("if("+Oe+")"+
wc+".bindBuffer(34963,"+Oe+".buffer.buffer);");return Oe}(),ae=Yc("primitive"),Wd=Yc("offset"),Ce=function(){var Oe=pc.count,Mf=oc;if(Oe){if(Oe.contextDep&&Bc.contextDynamic||Oe.propDep)Mf=Yb;Oe=Oe.append(xb,Mf)}else Oe=Mf.def(rc,".","count");return Oe}();if("number"===typeof Ce){if(0===Ce)return}else Yb("if(",Ce,"){"),Yb.exit("}");var Xd,bf;Ob&&(Xd=Yc("instances"),bf=xb.instancing);var Ve=ud+".type",vf=pc.elements&&ma(pc.elements);Ob&&("number"!==typeof Xd||0<=Xd)?"string"===typeof Xd?(Yb("if(",
Xd,"\x3e0){"),bd(),Yb("}else if(",Xd,"\x3c0){"),Tc(),Yb("}")):bd():Tc()}function Rf(xb,oc,Yb,Bc,Yc){oc=Rc();Yc=oc.proc("body",Yc);Ob&&(oc.instancing=Yc.def(oc.shared.extensions,".angle_instanced_arrays"));xb(oc,Yc,Yb,Bc);return oc.compile().body}function Ud(xb,oc,Yb,Bc){ve(xb,oc);Yb.useVAO?Yb.drawVAO?oc(xb.shared.vao,".setVAO(",Yb.drawVAO.append(xb,oc),");"):oc(xb.shared.vao,".setVAO(",xb.shared.vao,".targetVAO);"):(oc(xb.shared.vao,".setVAO(null);"),Ef(xb,oc,Yb,Bc.attributes,function(){return!0}));
qf(xb,oc,Yb,Bc.uniforms,function(){return!0});Ff(xb,oc,oc,Yb)}function Ae(xb,oc){var Yb=xb.proc("draw",1);ve(xb,Yb);Sd(xb,Yb,oc.context);Td(xb,Yb,oc.framebuffer);Ue(xb,Yb,oc);Ke(xb,Yb,oc.state);zf(xb,Yb,oc,!1,!0);var Bc=oc.shader.progVar.append(xb,Yb);Yb(xb.shared.gl,".useProgram(",Bc,".program);");if(oc.shader.program)Ud(xb,Yb,oc,oc.shader.program);else{Yb(xb.shared.vao,".setVAO(null);");var Yc=xb.global.def("{}"),bd=Yb.def(Bc,".id"),Tc=Yb.def(Yc,"[",bd,"]");Yb(xb.cond(Tc).then(Tc,".call(this,a0);")["else"](Tc,
"\x3d",Yc,"[",bd,"]\x3d",xb.link(function(Oc){return Rf(Ud,xb,oc,Oc,1)}),"(",Bc,");",Tc,".call(this,a0);"))}0<Object.keys(oc.state).length&&Yb(xb.shared.current,".dirty\x3dtrue;")}function rf(xb,oc,Yb,Bc){function Yc(){return!0}xb.batchId="a1";ve(xb,oc);Ef(xb,oc,Yb,Bc.attributes,Yc);qf(xb,oc,Yb,Bc.uniforms,Yc);Ff(xb,oc,oc,Yb)}function hf(xb,oc,Yb,Bc){function Yc(ud){return ud.contextDep&&Tc||ud.propDep}function bd(ud){return!Yc(ud)}ve(xb,oc);var Tc=Yb.contextDep,Oc=oc.def(),wc=oc.def();xb.shared.props=
wc;xb.batchId=Oc;var rc=xb.scope(),pc=xb.scope();oc(rc.entry,"for(",Oc,"\x3d0;",Oc,"\x3c","a1",";++",Oc,"){",wc,"\x3d","a0","[",Oc,"];",pc,"}",rc.exit);Yb.needsContext&&Sd(xb,pc,Yb.context);Yb.needsFramebuffer&&Td(xb,pc,Yb.framebuffer);Ke(xb,pc,Yb.state,Yc);Yb.profile&&Yc(Yb.profile)&&zf(xb,pc,Yb,!1,!0);Bc?(Yb.useVAO?Yb.drawVAO?Yc(Yb.drawVAO)?pc(xb.shared.vao,".setVAO(",Yb.drawVAO.append(xb,pc),");"):rc(xb.shared.vao,".setVAO(",Yb.drawVAO.append(xb,rc),");"):rc(xb.shared.vao,".setVAO(",xb.shared.vao,
".targetVAO);"):(rc(xb.shared.vao,".setVAO(null);"),Ef(xb,rc,Yb,Bc.attributes,bd),Ef(xb,pc,Yb,Bc.attributes,Yc)),qf(xb,rc,Yb,Bc.uniforms,bd),qf(xb,pc,Yb,Bc.uniforms,Yc),Ff(xb,rc,pc,Yb)):(oc=xb.global.def("{}"),Bc=Yb.shader.progVar.append(xb,pc),wc=pc.def(Bc,".id"),rc=pc.def(oc,"[",wc,"]"),pc(xb.shared.gl,".useProgram(",Bc,".program);","if(!",rc,"){",rc,"\x3d",oc,"[",wc,"]\x3d",xb.link(function(ud){return Rf(rf,xb,Yb,ud,2)}),"(",Bc,");}",rc,".call(this,a0[",Oc,"],",Oc,");"))}function Te(xb,oc){function Yb(rc){return rc.contextDep&&
Yc||rc.propDep}var Bc=xb.proc("batch",2);xb.batchId="0";ve(xb,Bc);var Yc=!1,bd=!0;Object.keys(oc.context).forEach(function(rc){Yc=Yc||oc.context[rc].propDep});Yc||(Sd(xb,Bc,oc.context),bd=!1);var Tc=oc.framebuffer,Oc=!1;Tc?(Tc.propDep?Yc=Oc=!0:Tc.contextDep&&Yc&&(Oc=!0),Oc||Td(xb,Bc,Tc)):Td(xb,Bc,null);oc.state.viewport&&oc.state.viewport.propDep&&(Yc=!0);Ue(xb,Bc,oc);Ke(xb,Bc,oc.state,function(rc){return!Yb(rc)});oc.profile&&Yb(oc.profile)||zf(xb,Bc,oc,!1,"a1");oc.contextDep=Yc;oc.needsContext=bd;
oc.needsFramebuffer=Oc;bd=oc.shader.progVar;if(bd.contextDep&&Yc||bd.propDep)hf(xb,Bc,oc,null);else if(bd=bd.append(xb,Bc),Bc(xb.shared.gl,".useProgram(",bd,".program);"),oc.shader.program)hf(xb,Bc,oc,oc.shader.program);else{Bc(xb.shared.vao,".setVAO(null);");Tc=xb.global.def("{}");Oc=Bc.def(bd,".id");var wc=Bc.def(Tc,"[",Oc,"]");Bc(xb.cond(wc).then(wc,".call(this,a0,a1);")["else"](wc,"\x3d",Tc,"[",Oc,"]\x3d",xb.link(function(rc){return Rf(hf,xb,oc,rc,2)}),"(",bd,");",wc,".call(this,a0,a1);"))}0<
Object.keys(oc.state).length&&Bc(xb.shared.current,".dirty\x3dtrue;")}function Be(xb,oc){function Yb(Tc){var Oc=oc.shader[Tc];Oc&&Bc.set(Yc.shader,"."+Tc,Oc.append(xb,Bc))}var Bc=xb.proc("scope",3);xb.batchId="a2";var Yc=xb.shared,bd=Yc.current;Sd(xb,Bc,oc.context);oc.framebuffer&&oc.framebuffer.append(xb,Bc);aa(Object.keys(oc.state)).forEach(function(Tc){var Oc=oc.state[Tc].append(xb,Bc);v(Oc)?Oc.forEach(function(wc,rc){Bc.set(xb.next[Tc],"["+rc+"]",wc)}):Bc.set(Yc.next,"."+Tc,Oc)});zf(xb,Bc,oc,
!0,!0);["elements","offset","count","instances","primitive"].forEach(function(Tc){var Oc=oc.draw[Tc];Oc&&Bc.set(Yc.draw,"."+Tc,""+Oc.append(xb,Bc))});Object.keys(oc.uniforms).forEach(function(Tc){Bc.set(Yc.uniforms,"["+Pb.id(Tc)+"]",oc.uniforms[Tc].append(xb,Bc))});Object.keys(oc.attributes).forEach(function(Tc){var Oc=oc.attributes[Tc].append(xb,Bc),wc=xb.scopeAttrib(Tc);Object.keys(new Zc).forEach(function(rc){Bc.set(wc,"."+rc,Oc[rc])})});oc.scopeVAO&&Bc.set(Yc.vao,".targetVAO",oc.scopeVAO.append(xb,
Bc));Yb("vert");Yb("frag");0<Object.keys(oc.state).length&&(Bc(bd,".dirty\x3dtrue;"),Bc.exit(bd,".dirty\x3dtrue;"));Bc("a1(",xb.shared.context,",a0,",xb.batchId,");")}function Ie(xb){if("object"===typeof xb&&!v(xb)){for(var oc=Object.keys(xb),Yb=0;Yb<oc.length;++Yb)if(na.isDynamic(xb[oc[Yb]]))return!0;return!1}}function nf(xb,oc,Yb){function Bc(ud,ae){Tc.forEach(function(Wd){var Ce=Yc[Wd];na.isDynamic(Ce)&&(Ce=ud.invoke(ae,Ce),ae(pc,".",Wd,"\x3d",Ce,";"))})}var Yc=oc["static"][Yb];if(Yc&&Ie(Yc)){var bd=
xb.global,Tc=Object.keys(Yc),Oc=!1,wc=!1,rc=!1,pc=xb.global.def("{}");Tc.forEach(function(ud){var ae=Yc[ud];if(na.isDynamic(ae))"function"===typeof ae&&(ae=Yc[ud]=na.unbox(ae)),ud=ra(ae,null),Oc=Oc||ud.thisDep,rc=rc||ud.propDep,wc=wc||ud.contextDep;else{bd(pc,".",ud,"\x3d");switch(typeof ae){case "number":bd(ae);break;case "string":bd('"',ae,'"');break;case "object":Array.isArray(ae)&&bd("[",ae.join(),"]");break;default:bd(xb.link(ae))}bd(";")}});oc.dynamic[Yb]=new na.DynamicVariable(4,{thisDep:Oc,
contextDep:wc,propDep:rc,ref:pc,append:Bc});delete oc["static"][Yb]}}var Zc=nc.Record,Bd={add:32774,subtract:32778,"reverse subtract":32779};fc.ext_blend_minmax&&(Bd.min=32775,Bd.max=32776);var Ob=fc.angle_instanced_arrays,Zb=fc.webgl_draw_buffers,Mc={dirty:!0,profile:ac.profile},Fd={},rd=[],pe={},Hd={};lc("dither",3024);lc("blend.enable",3042);tc("blend.color","blendColor",[0,0,0,0]);tc("blend.equation","blendEquationSeparate",[32774,32774]);tc("blend.func","blendFuncSeparate",[1,0,1,0]);lc("depth.enable",
2929,!0);tc("depth.func","depthFunc",513);tc("depth.range","depthRange",[0,1]);tc("depth.mask","depthMask",!0);tc("colorMask","colorMask",[!0,!0,!0,!0]);lc("cull.enable",2884);tc("cull.face","cullFace",1029);tc("frontFace","frontFace",2305);tc("lineWidth","lineWidth",1);lc("polygonOffset.enable",32823);tc("polygonOffset.offset","polygonOffset",[0,0]);lc("sample.alpha",32926);lc("sample.enable",32928);tc("sample.coverage","sampleCoverage",[1,!1]);lc("stencil.enable",2960);tc("stencil.mask","stencilMask",
-1);tc("stencil.func","stencilFunc",[519,0,-1]);tc("stencil.opFront","stencilOpSeparate",[1028,7680,7680,7680]);tc("stencil.opBack","stencilOpSeparate",[1029,7680,7680,7680]);lc("scissor.enable",3089);tc("scissor.box","scissor",[0,0,fb.drawingBufferWidth,fb.drawingBufferHeight]);tc("viewport","viewport",[0,0,fb.drawingBufferWidth,fb.drawingBufferHeight]);var qe={gl:fb,context:Wb,strings:Pb,next:Fd,current:Mc,draw:Vb,elements:Uc,buffer:Pc,shader:vc,attributes:nc.state,vao:nc,uniforms:sc,framebuffer:Jb,
extensions:fc,timer:yb,isBufferArgs:W},Ge={primTypes:vb,compareFuncs:Gb,blendFuncs:ib,blendEquations:Bd,stencilOps:Hb,glTypes:hb,orientationType:$b};Zb&&(Ge.backBuffer=[1029],Ge.drawBuffer=d(Fc.maxDrawbuffers,function(xb){return 0===xb?[0]:d(xb,function(oc){return 36064+oc})}));var oe=0;return{next:Fd,current:Mc,procs:function(){var xb=Rc(),oc=xb.proc("poll"),Yb=xb.proc("refresh"),Bc=xb.block();oc(Bc);Yb(Bc);var Yc=xb.shared,bd=Yc.gl,Tc=Yc.next,Oc=Yc.current;Bc(Oc,".dirty\x3dfalse;");Td(xb,oc);Td(xb,
Yb,null,!0);var wc;Ob&&(wc=xb.link(Ob));fc.oes_vertex_array_object&&Yb(xb.link(fc.oes_vertex_array_object),".bindVertexArrayOES(null);");for(var rc=0;rc<Fc.maxAttributes;++rc){var pc=Yb.def(Yc.attributes,"[",rc,"]"),ud=xb.cond(pc,".buffer");ud.then(bd,".enableVertexAttribArray(",rc,");",bd,".bindBuffer(",34962,",",pc,".buffer.buffer);",bd,".vertexAttribPointer(",rc,",",pc,".size,",pc,".type,",pc,".normalized,",pc,".stride,",pc,".offset);")["else"](bd,".disableVertexAttribArray(",rc,");",bd,".vertexAttrib4f(",
rc,",",pc,".x,",pc,".y,",pc,".z,",pc,".w);",pc,".buffer\x3dnull;");Yb(ud);Ob&&Yb(wc,".vertexAttribDivisorANGLE(",rc,",",pc,".divisor);")}Yb(xb.shared.vao,".currentVAO\x3dnull;",xb.shared.vao,".setVAO(",xb.shared.vao,".targetVAO);");Object.keys(pe).forEach(function(ae){var Wd=pe[ae],Ce=Bc.def(Tc,".",ae),Xd=xb.block();Xd("if(",Ce,"){",bd,".enable(",Wd,")}else{",bd,".disable(",Wd,")}",Oc,".",ae,"\x3d",Ce,";");Yb(Xd);oc("if(",Ce,"!\x3d\x3d",Oc,".",ae,"){",Xd,"}")});Object.keys(Hd).forEach(function(ae){var Wd=
Hd[ae],Ce=Mc[ae],Xd,bf,Ve=xb.block();Ve(bd,".",Wd,"(");v(Ce)?(Wd=Ce.length,Xd=xb.global.def(Tc,".",ae),bf=xb.global.def(Oc,".",ae),Ve(d(Wd,function(vf){return Xd+"["+vf+"]"}),");",d(Wd,function(vf){return bf+"["+vf+"]\x3d"+Xd+"["+vf+"];"}).join("")),oc("if(",d(Wd,function(vf){return Xd+"["+vf+"]!\x3d\x3d"+bf+"["+vf+"]"}).join("||"),"){",Ve,"}")):(Xd=Bc.def(Tc,".",ae),bf=Bc.def(Oc,".",ae),Ve(Xd,");",Oc,".",ae,"\x3d",Xd,";"),oc("if(",Xd,"!\x3d\x3d",bf,"){",Ve,"}"));Yb(Ve)});return xb.compile()}(),compile:function(xb,
oc,Yb,Bc,Yc){var bd=Rc();bd.stats=bd.link(Yc);Object.keys(oc["static"]).forEach(function(Tc){nf(bd,oc,Tc)});Na.forEach(function(Tc){nf(bd,xb,Tc)});Yb=Md(xb,oc,Yb,Bc,bd);Ae(bd,Yb);Be(bd,Yb);Te(bd,Yb);return bd.compile()}}}function pa(fb,Pb){for(var fc=0;fc<fb.length;++fc)if(fb[fc]===Pb)return fc;return-1}var la=function(fb,Pb){for(var fc=Object.keys(Pb),Fc=0;Fc<fc.length;++Fc)fb[fc[Fc]]=Pb[fc[Fc]];return fb},ka=0,na={DynamicVariable:p,define:function(fb,Pb){return new p(fb,k(Pb+""))},isDynamic:function(fb){return"function"===
typeof fb&&!fb._reglType||fb instanceof p},unbox:function(fb,Pb){return"function"===typeof fb?new p(0,fb):fb},accessor:k},oa={next:"function"===typeof requestAnimationFrame?function(fb){return requestAnimationFrame(fb)}:function(fb){return setTimeout(fb,16)},cancel:"function"===typeof cancelAnimationFrame?function(fb){return cancelAnimationFrame(fb)}:clearTimeout},sa="undefined"!==typeof performance&&performance.now?function(){return performance.now()}:function(){return+new Date},za=f();za.zero=f();
var Ha=function(fb,Pb){var fc=1;Pb.ext_texture_filter_anisotropic&&(fc=fb.getParameter(34047));var Fc=1,Pc=1;Pb.webgl_draw_buffers&&(Fc=fb.getParameter(34852),Pc=fb.getParameter(36063));var Uc=!!Pb.oes_texture_float;if(Uc){Uc=fb.createTexture();fb.bindTexture(3553,Uc);fb.texImage2D(3553,0,6408,1,1,0,6408,5126,null);var rb=fb.createFramebuffer();fb.bindFramebuffer(36160,rb);fb.framebufferTexture2D(36160,36064,3553,Uc,0);fb.bindTexture(3553,null);if(36053!==fb.checkFramebufferStatus(36160))Uc=!1;else{fb.viewport(0,
0,1,1);fb.clearColor(1,0,0,1);fb.clear(16384);var Jb=za.allocType(5126,4);fb.readPixels(0,0,1,1,6408,5126,Jb);fb.getError()?Uc=!1:(fb.deleteFramebuffer(rb),fb.deleteTexture(Uc),Uc=1===Jb[0]);za.freeType(Jb)}}Jb=!0;"undefined"!==typeof navigator&&(/MSIE/.test(navigator.userAgent)||/Trident\//.test(navigator.appVersion)||/Edge/.test(navigator.userAgent))||(Jb=fb.createTexture(),rb=za.allocType(5121,36),fb.activeTexture(33984),fb.bindTexture(34067,Jb),fb.texImage2D(34069,0,6408,3,3,0,6408,5121,rb),za.freeType(rb),
fb.bindTexture(34067,null),fb.deleteTexture(Jb),Jb=!fb.getError());return{colorBits:[fb.getParameter(3410),fb.getParameter(3411),fb.getParameter(3412),fb.getParameter(3413)],depthBits:fb.getParameter(3414),stencilBits:fb.getParameter(3415),subpixelBits:fb.getParameter(3408),extensions:Object.keys(Pb).filter(function(sc){return!!Pb[sc]}),maxAnisotropic:fc,maxDrawbuffers:Fc,maxColorAttachments:Pc,pointSizeDims:fb.getParameter(33901),lineWidthDims:fb.getParameter(33902),maxViewportDims:fb.getParameter(3386),
maxCombinedTextureUnits:fb.getParameter(35661),maxCubeMapSize:fb.getParameter(34076),maxRenderbufferSize:fb.getParameter(34024),maxTextureUnits:fb.getParameter(34930),maxTextureSize:fb.getParameter(3379),maxAttributes:fb.getParameter(34921),maxVertexUniforms:fb.getParameter(36347),maxVertexTextureUnits:fb.getParameter(35660),maxVaryingVectors:fb.getParameter(36348),maxFragmentUniforms:fb.getParameter(36349),glsl:fb.getParameter(35724),renderer:fb.getParameter(7937),vendor:fb.getParameter(7936),version:fb.getParameter(7938),
readFloat:Uc,npotTextureCube:Jb}},Wa=function(fb){return fb instanceof Uint8Array||fb instanceof Uint16Array||fb instanceof Uint32Array||fb instanceof Int8Array||fb instanceof Int16Array||fb instanceof Int32Array||fb instanceof Float32Array||fb instanceof Float64Array||fb instanceof Uint8ClampedArray},Za=function(fb){return Object.keys(fb).map(function(Pb){return fb[Pb]})},bb={shape:function(fb){for(var Pb=[];fb.length;fb=fb[0])Pb.push(fb.length);return Pb},flatten:function(fb,Pb,fc,Fc){var Pc=1;
if(Pb.length)for(var Uc=0;Uc<Pb.length;++Uc)Pc*=Pb[Uc];else Pc=0;fc=Fc||za.allocType(fc,Pc);switch(Pb.length){case 0:break;case 1:Fc=Pb[0];for(Pb=0;Pb<Fc;++Pb)fc[Pb]=fb[Pb];break;case 2:Fc=Pb[0];Pb=Pb[1];for(Uc=Pc=0;Uc<Fc;++Uc)for(var rb=fb[Uc],Jb=0;Jb<Pb;++Jb)fc[Pc++]=rb[Jb];break;case 3:t(fb,Pb[0],Pb[1],Pb[2],fc,0);break;default:w(fb,Pb,0,fc,0)}return fc}},sb={"[object Int8Array]":5120,"[object Int16Array]":5122,"[object Int32Array]":5124,"[object Uint8Array]":5121,"[object Uint8ClampedArray]":5121,
"[object Uint16Array]":5123,"[object Uint32Array]":5125,"[object Float32Array]":5126,"[object Float64Array]":5121,"[object ArrayBuffer]":5121},hb={int8:5120,int16:5122,int32:5124,uint8:5121,uint16:5123,uint32:5125,"float":5126,float32:5126},ub={dynamic:35048,stream:35040,"static":35044},pb=bb.flatten,Ab=bb.shape,tb=[];tb[5120]=1;tb[5122]=2;tb[5124]=4;tb[5121]=1;tb[5123]=2;tb[5125]=4;tb[5126]=4;var vb={points:0,point:0,lines:1,line:1,triangles:4,triangle:4,"line loop":2,"line strip":3,"triangle strip":5,
"triangle fan":6},qb=new Float32Array(1),zb=new Uint32Array(qb.buffer),La=[9984,9986,9985,9987],Ka=[0,6409,6410,6407,6408],ya={};ya[6409]=ya[6406]=ya[6402]=1;ya[34041]=ya[6410]=2;ya[6407]=ya[35904]=3;ya[6408]=ya[35906]=4;var Aa=y("HTMLCanvasElement"),Ja=y("OffscreenCanvas"),Ta=y("CanvasRenderingContext2D"),$a=y("ImageBitmap"),ab=y("HTMLImageElement"),Db=y("HTMLVideoElement"),Nb=Object.keys(sb).concat([Aa,Ja,Ta,$a,ab,Db]),ec=[];ec[5121]=1;ec[5126]=4;ec[36193]=2;ec[5123]=2;ec[5125]=4;var ob=[];ob[32854]=
2;ob[32855]=2;ob[36194]=2;ob[34041]=4;ob[33776]=.5;ob[33777]=.5;ob[33778]=1;ob[33779]=1;ob[35986]=.5;ob[35987]=1;ob[34798]=1;ob[35840]=.5;ob[35841]=.25;ob[35842]=.5;ob[35843]=.25;ob[36196]=.5;var Cb=[];Cb[32854]=2;Cb[32855]=2;Cb[36194]=2;Cb[33189]=2;Cb[36168]=1;Cb[34041]=4;Cb[35907]=4;Cb[34836]=16;Cb[34842]=8;Cb[34843]=6;var Qb=function(fb,Pb,fc,Fc,Pc){function Uc(Vb){this.id=nc++;this.refCount=1;this.renderbuffer=Vb;this.format=32854;this.height=this.width=0;Pc.profile&&(this.stats={size:0})}function rb(Vb){var Wb=
Vb.renderbuffer;fb.bindRenderbuffer(36161,null);fb.deleteRenderbuffer(Wb);Vb.renderbuffer=null;Vb.refCount=0;delete vc[Vb.id];Fc.renderbufferCount--}var Jb={rgba4:32854,rgb565:36194,"rgb5 a1":32855,depth:33189,stencil:36168,"depth stencil":34041};Pb.ext_srgb&&(Jb.srgba=35907);Pb.ext_color_buffer_half_float&&(Jb.rgba16f=34842,Jb.rgb16f=34843);Pb.webgl_color_buffer_float&&(Jb.rgba32f=34836);var sc=[];Object.keys(Jb).forEach(function(Vb){sc[Jb[Vb]]=Vb});var nc=0,vc={};Uc.prototype.decRef=function(){0>=
--this.refCount&&rb(this)};Pc.profile&&(Fc.getTotalRenderbufferSize=function(){var Vb=0;Object.keys(vc).forEach(function(Wb){Vb+=vc[Wb].stats.size});return Vb});return{create:function(Vb,Wb){function yb(Ub,lc){var tc=0,Rc=0,kd=32854;"object"===typeof Ub&&Ub?("shape"in Ub?(Rc=Ub.shape,tc=Rc[0]|0,Rc=Rc[1]|0):("radius"in Ub&&(tc=Rc=Ub.radius|0),"width"in Ub&&(tc=Ub.width|0),"height"in Ub&&(Rc=Ub.height|0)),"format"in Ub&&(kd=Jb[Ub.format])):"number"===typeof Ub?(tc=Ub|0,Rc="number"===typeof lc?lc|0:
tc):Ub||(tc=Rc=1);if(tc!==ac.width||Rc!==ac.height||kd!==ac.format)return yb.width=ac.width=tc,yb.height=ac.height=Rc,ac.format=kd,fb.bindRenderbuffer(36161,ac.renderbuffer),fb.renderbufferStorage(36161,kd,tc,Rc),Pc.profile&&(ac.stats.size=Cb[ac.format]*ac.width*ac.height),yb.format=sc[ac.format],yb}var ac=new Uc(fb.createRenderbuffer());vc[ac.id]=ac;Fc.renderbufferCount++;yb(Vb,Wb);yb.resize=function(Ub,lc){Ub|=0;lc=lc|0||Ub;if(Ub===ac.width&&lc===ac.height)return yb;yb.width=ac.width=Ub;yb.height=
ac.height=lc;fb.bindRenderbuffer(36161,ac.renderbuffer);fb.renderbufferStorage(36161,ac.format,Ub,lc);Pc.profile&&(ac.stats.size=Cb[ac.format]*ac.width*ac.height);return yb};yb._reglType="renderbuffer";yb._renderbuffer=ac;Pc.profile&&(yb.stats=ac.stats);yb.destroy=function(){ac.decRef()};return yb},clear:function(){Za(vc).forEach(rb)},restore:function(){Za(vc).forEach(function(Vb){Vb.renderbuffer=fb.createRenderbuffer();fb.bindRenderbuffer(36161,Vb.renderbuffer);fb.renderbufferStorage(36161,Vb.format,
Vb.width,Vb.height)});fb.bindRenderbuffer(36161,null)}}},yc=[];yc[6408]=4;yc[6407]=3;var Jc=[];Jc[5121]=1;Jc[5126]=4;Jc[36193]=2;var Ia=["x","y","z","w"],Na="blend.func blend.equation stencil.func stencil.opFront stencil.opBack sample.coverage viewport scissor.box polygonOffset.offset".split(" "),ib={0:0,1:1,zero:0,one:1,"src color":768,"one minus src color":769,"src alpha":770,"one minus src alpha":771,"dst color":774,"one minus dst color":775,"dst alpha":772,"one minus dst alpha":773,"constant color":32769,
"one minus constant color":32770,"constant alpha":32771,"one minus constant alpha":32772,"src alpha saturate":776},Gb={never:512,less:513,"\x3c":513,equal:514,"\x3d":514,"\x3d\x3d":514,"\x3d\x3d\x3d":514,lequal:515,"\x3c\x3d":515,greater:516,"\x3e":516,notequal:517,"!\x3d":517,"!\x3d\x3d":517,gequal:518,"\x3e\x3d":518,always:519},Hb={0:0,zero:0,keep:7680,replace:7681,increment:7682,decrement:7683,"increment wrap":34055,"decrement wrap":34056,invert:5386},$b={cw:2304,ccw:2305},uc=new ja(!1,!1,!1,function(){}),
fd=function(fb,Pb){function fc(){this.endQueryIndex=this.startQueryIndex=-1;this.sum=0;this.stats=null}function Fc(vc,Vb,Wb){var yb=rb.pop()||new fc;yb.startQueryIndex=vc;yb.endQueryIndex=Vb;yb.sum=0;yb.stats=Wb;Jb.push(yb)}if(!Pb.ext_disjoint_timer_query)return null;var Pc=[],Uc=[],rb=[],Jb=[],sc=[],nc=[];return{beginQuery:function(vc){var Vb=Pc.pop()||Pb.ext_disjoint_timer_query.createQueryEXT();Pb.ext_disjoint_timer_query.beginQueryEXT(35007,Vb);Uc.push(Vb);Fc(Uc.length-1,Uc.length,vc)},endQuery:function(){Pb.ext_disjoint_timer_query.endQueryEXT(35007)},
pushScopeStats:Fc,update:function(){var vc;var Vb=Uc.length;if(0!==Vb){nc.length=Math.max(nc.length,Vb+1);sc.length=Math.max(sc.length,Vb+1);sc[0]=0;var Wb=nc[0]=0;for(vc=Vb=0;vc<Uc.length;++vc){var yb=Uc[vc];Pb.ext_disjoint_timer_query.getQueryObjectEXT(yb,34919)?(Wb+=Pb.ext_disjoint_timer_query.getQueryObjectEXT(yb,34918),Pc.push(yb)):Uc[Vb++]=yb;sc[vc+1]=Wb;nc[vc+1]=Vb}Uc.length=Vb;for(vc=Vb=0;vc<Jb.length;++vc){Wb=Jb[vc];var ac=Wb.startQueryIndex;yb=Wb.endQueryIndex;Wb.sum+=sc[yb]-sc[ac];ac=nc[ac];
yb=nc[yb];yb===ac?(Wb.stats.gpuTime+=Wb.sum/1E6,rb.push(Wb)):(Wb.startQueryIndex=ac,Wb.endQueryIndex=yb,Jb[Vb++]=Wb)}Jb.length=Vb}},getNumPendingQueries:function(){return Uc.length},clear:function(){Pc.push.apply(Pc,Uc);for(var vc=0;vc<Pc.length;vc++)Pb.ext_disjoint_timer_query.deleteQueryEXT(Pc[vc]);Uc.length=0;Pc.length=0},restore:function(){Uc.length=0;Pc.length=0}}};return function(fb){function Pb(){if(0===ve.length)kd&&kd.update(),Ff=null;else{Ff=oa.next(Pb);vc();for(var Ud=ve.length-1;0<=Ud;--Ud){var Ae=
ve[Ud];Ae&&Ae(Nc,null,0)}yb.flush();kd&&kd.update()}}function fc(){!Ff&&0<ve.length&&(Ff=oa.next(Pb))}function Fc(){Ff&&(oa.cancel(Pb),Ff=null)}function Pc(Ud){Ud.preventDefault();Fc();zf.forEach(function(Ae){Ae()})}function Uc(Ud){yb.getError();Ub.restore();Sc.restore();Cc.restore();id.restore();Md.restore();Sd.restore();dd.restore();kd&&kd.restore();Td.procs.refresh();fc();Ef.forEach(function(Ae){Ae()})}function rb(Ud){function Ae(Ob){var Zb={},Mc={};Object.keys(Ob).forEach(function(Fd){var rd=
Ob[Fd];na.isDynamic(rd)?Mc[Fd]=na.unbox(rd,Fd):Zb[Fd]=rd});return{dynamic:Mc,"static":Zb}}var rf=Ae(Ud.context||{}),hf=Ae(Ud.uniforms||{}),Te=Ae(Ud.attributes||{}),Be=Ae(function(Ob){function Zb(Fd){if(Fd in Mc){var rd=Mc[Fd];delete Mc[Fd];Object.keys(rd).forEach(function(pe){Mc[Fd+"."+pe]=rd[pe]})}}var Mc=la({},Ob);delete Mc.uniforms;delete Mc.attributes;delete Mc.context;delete Mc.vao;"stencil"in Mc&&Mc.stencil.op&&(Mc.stencil.opBack=Mc.stencil.opFront=Mc.stencil.op,delete Mc.stencil.op);Zb("blend");
Zb("depth");Zb("cull");Zb("stencil");Zb("polygonOffset");Zb("scissor");Zb("sample");"vao"in Ob&&(Mc.vao=Ob.vao);return Mc}(Ud));Ud={gpuTime:0,cpuTime:0,count:0};rf=Td.compile(Be,Te,hf,rf,Ud);var Ie=rf.draw,nf=rf.batch,Zc=rf.scope,Bd=[];return la(function(Ob,Zb){var Mc;if("function"===typeof Ob)return Zc.call(this,null,Ob,0);if("function"===typeof Zb)if("number"===typeof Ob)for(Mc=0;Mc<Ob;++Mc)Zc.call(this,null,Zb,Mc);else if(Array.isArray(Ob))for(Mc=0;Mc<Ob.length;++Mc)Zc.call(this,Ob[Mc],Zb,Mc);
else return Zc.call(this,Ob,Zb,0);else if("number"===typeof Ob){if(0<Ob){Zb=nf.call;for(Mc=Ob|0;Bd.length<Mc;)Bd.push(null);return Zb.call(nf,this,Bd,Ob|0)}}else if(Array.isArray(Ob)){if(Ob.length)return nf.call(this,Ob,Ob.length)}else return Ie.call(this,Ob)},{stats:Ud})}function Jb(Ud,Ae){Ud=0;Td.procs.poll();var rf=Ae.color;rf&&(yb.clearColor(+rf[0]||0,+rf[1]||0,+rf[2]||0,+rf[3]||0),Ud|=16384);"depth"in Ae&&(yb.clearDepth(+Ae.depth),Ud|=256);"stencil"in Ae&&(yb.clearStencil(Ae.stencil|0),Ud|=1024);
yb.clear(Ud)}function sc(Ud){ve.push(Ud);fc();return{cancel:function(){function Ae(){var hf=pa(ve,Ae);ve[hf]=ve[ve.length-1];--ve.length;0>=ve.length&&Fc()}var rf=pa(ve,Ud);ve[rf]=Ae}}}function nc(){var Ud=Ue.viewport,Ae=Ue.scissor_box;Ud[0]=Ud[1]=Ae[0]=Ae[1]=0;Nc.viewportWidth=Nc.framebufferWidth=Nc.drawingBufferWidth=Ud[2]=Ae[2]=yb.drawingBufferWidth;Nc.viewportHeight=Nc.framebufferHeight=Nc.drawingBufferHeight=Ud[3]=Ae[3]=yb.drawingBufferHeight}function vc(){Nc.tick+=1;Nc.time=Wb();nc();Td.procs.poll()}
function Vb(){nc();Td.procs.refresh();kd&&kd.update()}function Wb(){return(sa()-Cd)/1E3}fb=l(fb);if(!fb)return null;var yb=fb.gl,ac=yb.getContextAttributes();yb.isContextLost();var Ub=c(yb,fb);if(!Ub)return null;var lc=m(),tc={vaoCount:0,bufferCount:0,elementsCount:0,framebufferCount:0,shaderCount:0,textureCount:0,cubeCount:0,renderbufferCount:0,maxTextureUnits:0},Rc=Ub.extensions,kd=fd(yb,Rc),Cd=sa(),Gd=yb.drawingBufferWidth,Ad=yb.drawingBufferHeight,Nc={tick:0,time:0,viewportWidth:Gd,viewportHeight:Ad,
framebufferWidth:Gd,framebufferHeight:Ad,drawingBufferWidth:Gd,drawingBufferHeight:Ad,pixelRatio:fb.pixelRatio},cd=Ha(yb,Rc),Cc=A(yb,tc,fb,function(Ud){return dd.destroyBuffer(Ud)}),dd=Z(yb,Rc,cd,tc,Cc),Vc=D(yb,Rc,Cc,tc),Sc=ba(yb,lc,tc,fb),id=I(yb,Rc,cd,function(){Td.procs.poll()},Nc,tc,fb),Md=Qb(yb,Rc,cd,tc,fb),Sd=L(yb,Rc,cd,id,Md,tc),Td=wa(yb,lc,Rc,cd,Cc,Vc,id,Sd,{},dd,Sc,{elements:null,primitive:4,count:-1,offset:0,instances:-1},Nc,kd,fb);lc=V(yb,Sd,Td.procs.poll,Nc,ac,Rc,cd);var Ue=Td.next,Ke=
yb.canvas,ve=[],zf=[],Ef=[],qf=[fb.onDestroy],Ff=null;Ke&&(Ke.addEventListener("webglcontextlost",Pc,!1),Ke.addEventListener("webglcontextrestored",Uc,!1));var Rf=Sd.setFBO=rb({framebuffer:na.define.call(null,1,"framebuffer")});Vb();ac=la(rb,{clear:function(Ud){if("framebuffer"in Ud)if(Ud.framebuffer&&"framebufferCube"===Ud.framebuffer_reglType)for(var Ae=0;6>Ae;++Ae)Rf(la({framebuffer:Ud.framebuffer.faces[Ae]},Ud),Jb);else Rf(Ud,Jb);else Jb(null,Ud)},prop:na.define.bind(null,1),context:na.define.bind(null,
2),"this":na.define.bind(null,3),draw:rb({}),buffer:function(Ud){return Cc.create(Ud,34962,!1,!1)},elements:function(Ud){return Vc.create(Ud,!1)},texture:id.create2D,cube:id.createCube,renderbuffer:Md.create,framebuffer:Sd.create,framebufferCube:Sd.createCube,vao:dd.createVAO,attributes:ac,frame:sc,on:function(Ud,Ae){switch(Ud){case "frame":return sc(Ae);case "lost":var rf=zf;break;case "restore":rf=Ef;break;case "destroy":rf=qf}rf.push(Ae);return{cancel:function(){for(var hf=0;hf<rf.length;++hf)if(rf[hf]===
Ae){rf[hf]=rf[rf.length-1];rf.pop();break}}}},limits:cd,hasExtension:function(Ud){return 0<=cd.extensions.indexOf(Ud.toLowerCase())},read:lc,destroy:function(){ve.length=0;Fc();Ke&&(Ke.removeEventListener("webglcontextlost",Pc),Ke.removeEventListener("webglcontextrestored",Uc));Sc.clear();Sd.clear();Md.clear();id.clear();Vc.clear();Cc.clear();dd.clear();kd&&kd.clear();qf.forEach(function(Ud){Ud()})},_gl:yb,_refresh:Vb,poll:function(){vc();kd&&kd.update()},now:Wb,stats:tc});fb.onDone(null,ac);return ac}})},
{}],541:[function(b,N,G){var p="",n;N.exports=function(k,m){if("string"!==typeof k)throw new TypeError("expected a string");if(1===m)return k;if(2===m)return k+k;var a=k.length*m;if(n!==k||"undefined"===typeof n)n=k,p="";else if(p.length>=a)return p.substr(0,a);for(;a>p.length&&1<m;)m&1&&(p+=k),m>>=1,k+=k;p+=k;return p=p.substr(0,a)}},{}],542:[function(b,N,G){(function(p){(function(){N.exports=p.performance&&p.performance.now?function(){return performance.now()}:Date.now||function(){return+new Date}}).call(this)}).call(this,
"undefined"!==typeof xe?xe:"undefined"!==typeof self?self:"undefined"!==typeof window?window:{})},{}],543:[function(b,N,G){N.exports=function(p){for(var n=p.length,k=p[p.length-1],m=n,a=n-2;0<=a;--a){var g=k,h=p[a];k=g+h;g=k-g;if(h-=g)p[--m]=k,k=h}var r=0;for(a=m;a<n;++a)g=p[a],h=k,k=g+h,g=k-g,(h-=g)&&(p[r++]=h);p[r++]=k;p.length=r;return p}},{}],544:[function(b,N,G){function p(l){if(1===l.length)return l[0];if(2===l.length)return["sum(",l[0],",",l[1],")"].join("");var c=l.length>>1;return["sum(",
p(l.slice(0,c)),",",p(l.slice(c)),")"].join("")}function n(l){if(2===l.length)return["sum(prod(",l[0][0],",",l[1][1],"),prod(-",l[0][1],",",l[1][0],"))"].join("");for(var c=[],d=0;d<l.length;++d){for(var e=c,f=e.push,q=l,t=d,w=Array(q.length-1),x=1;x<q.length;++x)for(var z=w[x-1]=Array(q.length-1),B=0,A=0;B<q.length;++B)B!==t&&(z[A++]=q[x][B]);q=n(w);t=d&1?"-":"";f.call(e,["scale(",q,",",t,l[0][d],")"].join(""))}return p(c)}function k(l){for(var c=Function,d=Array(l),e=0;e<l;++e){d[e]=Array(l);for(var f=
0;f<l;++f)d[e][f]=["m[",e,"][",f,"]"].join("")}return(new c("sum","scale","prod","compress",["function robustDeterminant",l,"(m){return compress(",n(d),")};return robustDeterminant",l].join("")))(a,g,m,h)}var m=b("two-product"),a=b("robust-sum"),g=b("robust-scale"),h=b("robust-compress"),r=[function(){return[0]},function(l){return[l[0][0]]}];(function(){for(;6>r.length;)r.push(k(r.length));for(var l=[],c=["function robustDeterminant(m){switch(m.length){"],d=0;6>d;++d)l.push("det"+d),c.push("case ",
d,":return det",d,"(m);");c.push("}var det\x3dCACHE[m.length];if(!det)det\x3dCACHE[m.length]\x3dgen(m.length);return det(m);}return robustDeterminant");l.push("CACHE","gen",c.join(""));l=Function.apply(void 0,l);N.exports=l.apply(void 0,r.concat([r,k]));for(d=0;d<r.length;++d)N.exports[d]=r[d]})()},{"robust-compress":543,"robust-scale":550,"robust-sum":553,"two-product":604}],545:[function(b,N,G){var p=b("two-product"),n=b("robust-sum");N.exports=function(k,m){for(var a=p(k[0],m[0]),g=1;g<k.length;++g)a=
n(a,p(k[g],m[g]));return a}},{"robust-sum":553,"two-product":604}],546:[function(b,N,G){function p(e,f){for(var q=Array(e.length-1),t=1;t<e.length;++t)for(var w=q[t-1]=Array(e.length-1),x=0,z=0;x<e.length;++x)x!==f&&(w[z++]=e[t][x]);return q}function n(e){if(1===e.length)return e[0];if(2===e.length)return["sum(",e[0],",",e[1],")"].join("");var f=e.length>>1;return["sum(",n(e.slice(0,f)),",",n(e.slice(f)),")"].join("")}function k(e,f){return"m"===e.charAt(0)?"w"===f.charAt(0)?(e=e.split("["),["w",
f.substr(1),"m",e[0].substr(1)].join("")):["prod(",e,",",f,")"].join(""):k(f,e)}function m(e){if(2===e.length)return[["diff(",k(e[0][0],e[1][1]),",",k(e[1][0],e[0][1]),")"].join("")];for(var f=[],q=0;q<e.length;++q){var t=f,w=t.push,x=n(m(p(e,q)));var z=q&1?"-":"";w.call(t,["scale(",x,",",z,e[0][q],")"].join(""))}return f}function a(e){for(var f=[],q=[],t=Array(e),w=0;w<e;++w){t[w]=Array(e);for(var x=0;x<e;++x)t[w][x]=["m",x,"[",e-w-2,"]"].join("")}for(w=0;w<e;++w)t[0][w]="1",t[e-1][w]="w"+w;for(w=
0;w<e;++w)0===(w&1)?f.push.apply(f,m(p(t,w))):q.push.apply(q,m(p(t,w)));f=n(f);q=n(q);t="exactInSphere"+e;x=[];for(w=0;w<e;++w)x.push("m"+w);x=["function ",t,"(",x.join(),"){"];for(w=0;w<e;++w){var z=x,B=z.push,A=w;var D=w;for(var C=e,v=[],y=0;y<C-2;++y)v.push(["prod(m",D,"[",y,"],m",D,"[",y,"])"].join(""));D=n(v);B.call(z,"var w",A,"\x3d",D,";");for(z=0;z<e;++z)z!==w&&x.push("var w",w,"m",z,"\x3dscale(w",w,",m",z,"[0]);")}x.push("var p\x3d",f,",n\x3d",q,",d\x3ddiff(p,n);return d[d.length-1];}return ",
t);return(new Function("sum","diff","prod","scale",x.join("")))(r,l,h,c)}function g(e){var f=d[e.length];f||(f=d[e.length]=a(e.length));return f.apply(void 0,e)}var h=b("two-product"),r=b("robust-sum"),l=b("robust-subtract"),c=b("robust-scale"),d=[function(){return 0},function(){return 0},function(){return 0}];(function(){for(;6>=d.length;)d.push(a(d.length));for(var e=[],f=["slow"],q=0;6>=q;++q)e.push("a"+q),f.push("o"+q);var t=["function testInSphere(",e.join(),"){switch(arguments.length){case 0:case 1:return 0;"];
for(q=2;6>=q;++q)t.push("case ",q,":return o",q,"(",e.slice(0,q).join(),");");t.push("}var s\x3dnew Array(arguments.length);for(var i\x3d0;i\x3carguments.length;++i){s[i]\x3darguments[i]};return slow(s);}return testInSphere");f.push(t.join(""));e=Function.apply(void 0,f);N.exports=e.apply(void 0,[g].concat(d));for(q=0;6>=q;++q)N.exports[q]=d[q]})()},{"robust-scale":550,"robust-subtract":552,"robust-sum":553,"two-product":604}],547:[function(b,N,G){function p(m){for(var a="robustLinearSolve"+m+"d",
g=["function ",a,"(A,b){return ["],h=0;h<m;++h){g.push("det([");for(var r=0;r<m;++r){0<r&&g.push(",");g.push("[");for(var l=0;l<m;++l)0<l&&g.push(","),l===h?g.push("+b[",r,"]"):g.push("+A[",r,"][",l,"]");g.push("]")}g.push("]),")}g.push("det(A)]}return ",a);a=new Function("det",g.join(""));return 6>m?a(n[m]):a(n)}var n=b("robust-determinant"),k=[function(){return[0]},function(m,a){return[[a[0]],[m[0][0]]]}];(function(){for(;6>k.length;)k.push(p(k.length));for(var m=[],a=["function dispatchLinearSolve(A,b){switch(A.length){"],
g=0;6>g;++g)m.push("s"+g),a.push("case ",g,":return s",g,"(A,b);");a.push("}var s\x3dCACHE[A.length];if(!s)s\x3dCACHE[A.length]\x3dg(A.length);return s(A,b)}return dispatchLinearSolve");m.push("CACHE","g",a.join(""));m=Function.apply(void 0,m);N.exports=m.apply(void 0,k.concat([k,p]));for(g=0;6>g;++g)N.exports[g]=k[g]})()},{"robust-determinant":544}],548:[function(b,N,G){function p(f,q){for(var t=Array(f.length-1),w=1;w<f.length;++w)for(var x=t[w-1]=Array(f.length-1),z=0,B=0;z<f.length;++z)z!==q&&
(x[B++]=f[w][z]);return t}function n(f){if(1===f.length)return f[0];if(2===f.length)return["sum(",f[0],",",f[1],")"].join("");var q=f.length>>1;return["sum(",n(f.slice(0,q)),",",n(f.slice(q)),")"].join("")}function k(f){if(2===f.length)return[["sum(prod(",f[0][0],",",f[1][1],"),prod(-",f[0][1],",",f[1][0],"))"].join("")];for(var q=[],t=0;t<f.length;++t){var w=q,x=w.push,z=n(k(p(f,t)));var B=t&1?"-":"";x.call(w,["scale(",z,",",B,f[0][t],")"].join(""))}return q}function m(f){for(var q=[],t=[],w=Array(f),
x=0;x<f;++x){w[x]=Array(f);for(var z=0;z<f;++z)w[x][z]=["m",z,"[",f-x-1,"]"].join("")}x=[];for(z=0;z<f;++z)0===(z&1)?q.push.apply(q,k(p(w,z))):t.push.apply(t,k(p(w,z))),x.push("m"+z);q=n(q);t=n(t);f="orientation"+f+"Exact";f=["function ",f,"(",x.join(),"){var p\x3d",q,",n\x3d",t,",d\x3dsub(p,n);return d[d.length-1];};return ",f].join("");return(new Function("sum","prod","scale","sub",f))(h,g,r,l)}function a(f){var q=e[f.length];q||(q=e[f.length]=m(f.length));return q.apply(void 0,f)}var g=b("two-product"),
h=b("robust-sum"),r=b("robust-scale"),l=b("robust-subtract"),c=m(3),d=m(4),e=[function(){return 0},function(){return 0},function(f,q){return q[0]-f[0]},function(f,q,t){var w=(f[1]-t[1])*(q[0]-t[0]),x=(f[0]-t[0])*(q[1]-t[1]),z=w-x;if(0<w){if(0>=x)return z;w+=x}else if(0>w){if(0<=x)return z;w=-(w+x)}else return z;w*=3.3306690738754716E-16;return z>=w||z<=-w?z:c(f,q,t)},function(f,q,t,w){var x=f[0]-w[0],z=q[0]-w[0],B=t[0]-w[0],A=f[1]-w[1],D=q[1]-w[1],C=t[1]-w[1],v=f[2]-w[2],y=q[2]-w[2],F=t[2]-w[2],J=
z*C,K=B*D;B*=A;C*=x;x*=D;A*=z;z=v*(J-K)+y*(B-C)+F*(x-A);v=7.771561172376103E-16*((Math.abs(J)+Math.abs(K))*Math.abs(v)+(Math.abs(B)+Math.abs(C))*Math.abs(y)+(Math.abs(x)+Math.abs(A))*Math.abs(F));return z>v||-z>v?z:d(f,q,t,w)}];(function(){for(;5>=e.length;)e.push(m(e.length));for(var f=[],q=["slow"],t=0;5>=t;++t)f.push("a"+t),q.push("o"+t);var w=["function getOrientation(",f.join(),"){switch(arguments.length){case 0:case 1:return 0;"];for(t=2;5>=t;++t)w.push("case ",t,":return o",t,"(",f.slice(0,
t).join(),");");w.push("}var s\x3dnew Array(arguments.length);for(var i\x3d0;i\x3carguments.length;++i){s[i]\x3darguments[i]};return slow(s);}return getOrientation");q.push(w.join(""));f=Function.apply(void 0,q);N.exports=f.apply(void 0,[a].concat(e));for(t=0;5>=t;++t)N.exports[t]=e[t]})()},{"robust-scale":550,"robust-subtract":552,"robust-sum":553,"two-product":604}],549:[function(b,N,G){var p=b("robust-sum"),n=b("robust-scale");N.exports=function(k,m){if(1===k.length)return n(m,k[0]);if(1===m.length)return n(k,
m[0]);if(0===k.length||0===m.length)return[0];var a=[0];if(k.length<m.length)for(var g=0;g<k.length;++g)a=p(a,n(m,k[g]));else for(g=0;g<m.length;++g)a=p(a,n(k,m[g]));return a}},{"robust-scale":550,"robust-sum":553}],550:[function(b,N,G){var p=b("two-product"),n=b("two-sum");N.exports=function(k,m){var a=k.length;if(1===a)return k=p(k[0],m),k[0]?k:[k[1]];var g=Array(2*a),h=[.1,.1],r=[.1,.1],l=0;p(k[0],m,h);h[0]&&(g[l++]=h[0]);for(var c=1;c<a;++c){p(k[c],m,r);n(h[1],r[0],h);h[0]&&(g[l++]=h[0]);var d=
r[1],e=h[1],f=d+e;d=e-(f-d);h[1]=f;d&&(g[l++]=d)}h[1]&&(g[l++]=h[1]);0===l&&(g[l++]=0);g.length=l;return g}},{"two-product":604,"two-sum":605}],551:[function(b,N,G){N.exports=function(n,k,m,a){var g=p(n,m,a),h=p(k,m,a);if(0<g&&0<h||0>g&&0>h)return!1;var r=p(m,n,k),l=p(a,n,k);if(0<r&&0<l||0>r&&0>l)return!1;if(0===g&&0===h&&0===r&&0===l){a:{for(g=0;2>g;++g){h=n[g];r=k[g];l=Math.max(h,r);var c=m[g],d=a[g],e=Math.min(c,d);if(Math.max(c,d)<Math.min(h,r)||l<e){n=!1;break a}}n=!0}return n}return!0};var p=
b("robust-orientation")[3]},{"robust-orientation":548}],552:[function(b,N,G){N.exports=function(p,n){var k=p.length|0,m=n.length|0;if(1===k&&1===m)return p=p[0],k=-n[0],n=p+k,m=n-p,n=(p=p-(n-m)+(k-m))?[p,n]:[n],n;var a=Array(k+m),g=0,h=0,r=0,l=Math.abs,c=p[h],d=l(c),e=-n[r],f=l(e);if(d<f){var q=c;h+=1;h<k&&(c=p[h],d=l(c))}else q=e,r+=1,r<m&&(e=-n[r],f=l(e));if(h<k&&d<f||r>=m){var t=c;h+=1;h<k&&(c=p[h],d=l(c))}else t=e,r+=1,r<m&&(e=-n[r],f=l(e));var w=t+q;q-=w-t;for(var x=w,z;h<k&&r<m;)d<f?(t=c,h+=
1,h<k&&(c=p[h],d=l(c))):(t=e,r+=1,r<m&&(e=-n[r],f=l(e))),w=t+q,t=w-t,(t=q-t)&&(a[g++]=t),t=x+w,z=t-x,q=t-z,w-=z,x-=q,q=x+w,x=t;for(;h<k;)t=c,w=t+q,t=w-t,(t=q-t)&&(a[g++]=t),t=x+w,z=t-x,q=t-z,w-=z,x-=q,q=x+w,x=t,h+=1,h<k&&(c=p[h]);for(;r<m;)t=e,w=t+q,t=w-t,(t=q-t)&&(a[g++]=t),t=x+w,z=t-x,q=t-z,w-=z,x-=q,q=x+w,x=t,r+=1,r<m&&(e=-n[r]);q&&(a[g++]=q);x&&(a[g++]=x);g||(a[g++]=0);a.length=g;return a}},{}],553:[function(b,N,G){N.exports=function(p,n){var k=p.length|0,m=n.length|0;if(1===k&&1===m)return p=
p[0],k=n[0],n=p+k,m=n-p,n=(p=p-(n-m)+(k-m))?[p,n]:[n],n;var a=Array(k+m),g=0,h=0,r=0,l=Math.abs,c=p[h],d=l(c),e=n[r],f=l(e);if(d<f){var q=c;h+=1;h<k&&(c=p[h],d=l(c))}else q=e,r+=1,r<m&&(e=n[r],f=l(e));if(h<k&&d<f||r>=m){var t=c;h+=1;h<k&&(c=p[h],d=l(c))}else t=e,r+=1,r<m&&(e=n[r],f=l(e));var w=t+q;q-=w-t;for(var x=w,z;h<k&&r<m;)d<f?(t=c,h+=1,h<k&&(c=p[h],d=l(c))):(t=e,r+=1,r<m&&(e=n[r],f=l(e))),w=t+q,t=w-t,(t=q-t)&&(a[g++]=t),t=x+w,z=t-x,q=t-z,w-=z,x-=q,q=x+w,x=t;for(;h<k;)t=c,w=t+q,t=w-t,(t=q-t)&&
(a[g++]=t),t=x+w,z=t-x,q=t-z,w-=z,x-=q,q=x+w,x=t,h+=1,h<k&&(c=p[h]);for(;r<m;)t=e,w=t+q,t=w-t,(t=q-t)&&(a[g++]=t),t=x+w,z=t-x,q=t-z,w-=z,x-=q,q=x+w,x=t,r+=1,r<m&&(e=n[r]);q&&(a[g++]=q);x&&(a[g++]=x);g||(a[g++]=0);a.length=g;return a}},{}],554:[function(b,N,G){function p(a,g){for(var h in a)g[h]=a[h]}function n(a,g,h){return m(a,g,h)}var k=b("buffer"),m=k.Buffer;m.from&&m.alloc&&m.allocUnsafe&&m.allocUnsafeSlow?N.exports=k:(p(k,G),G.Buffer=n);n.prototype=Object.create(m.prototype);p(m,n);n.from=function(a,
g,h){if("number"===typeof a)throw new TypeError("Argument must not be a number");return m(a,g,h)};n.alloc=function(a,g,h){if("number"!==typeof a)throw new TypeError("Argument must be a number");a=m(a);void 0!==g?"string"===typeof h?a.fill(g,h):a.fill(g):a.fill(0);return a};n.allocUnsafe=function(a){if("number"!==typeof a)throw new TypeError("Argument must be a number");return m(a)};n.allocUnsafeSlow=function(a){if("number"!==typeof a)throw new TypeError("Argument must be a number");return k.SlowBuffer(a)}},
{buffer:117}],555:[function(b,N,G){N.exports=function(p){return 0>p?-1:0<p?1:0}},{}],556:[function(b,N,G){N.exports=function(k){return n(p(k))};var p=b("boundary-cells"),n=b("reduce-simplicial-complex")},{"boundary-cells":107,"reduce-simplicial-complex":535}],557:[function(b,N,G){N.exports=function(a,g,h,r){h=h||0;if("undefined"===typeof r){for(var l=a.length,c=r=0;c<l;++c)r=Math.max(r,a[c].length)|0;--r}if(0===a.length||1>r)return{cells:[],vertexIds:[],vertexWeights:[]};c=+h;var d=g.length;l=n.mallocUint8(d);
for(var e=0;e<d;++e)l[e]=g[e]<c|0;var f=r,q=a.length;c=n.mallocUint32(2*(f*(f+1)/2*q|0));for(e=d=0;e<q;++e){var t=a[e];f=t.length;for(var w=0;w<f;++w)for(var x=0;x<w;++x){var z=t[x],B=t[w];c[d++]=Math.min(z,B)|0;c[d++]=Math.max(z,B)|0}}k(p(c,[d/2|0,2]));for(e=f=2;e<d;e+=2)if(c[e-2]!==c[e]||c[e-1]!==c[e+1])c[f++]=c[e],c[f++]=c[e+1];c=p(c,[f/2|0,2]);h=+h;d=c.data;e=c.shape[0];f=n.mallocDouble(e);for(t=q=0;t<e;++t)w=d[2*t],x=d[2*t+1],l[w]!==l[x]&&(z=g[w],B=g[x],d[2*q]=w,d[2*q+1]=x,f[q++]=(B-h)/(B-z));
c.shape[0]=q;h=p(f,[q]);d=g.length|0;g=n.mallocInt32(2*d);e=c.shape[0];f=c.data;for(t=q=g[0]=0;t<e;++t)if(w=f[2*t],w!==q){for(g[2*q+1]=t;++q<w;)g[2*q]=t,g[2*q+1]=t;g[2*q]=t}for(g[2*q+1]=e;++q<d;)g[2*q]=g[2*q+1]=e;a=m(r)(a,c.data,g,l);d=c.shape[0]|0;e=c.data;r=Array(d);for(f=0;f<d;++f)r[f]=[e[2*f],e[2*f+1]];d=[].slice.call(h.data,0,h.shape[0]);n.free(l);n.free(c.data);n.free(h.data);n.free(g);return{cells:a,vertexIds:r,vertexWeights:d}};var p=b("ndarray"),n=b("typedarray-pool"),k=b("ndarray-sort"),
m=b("./lib/codegen")},{"./lib/codegen":558,ndarray:483,"ndarray-sort":482,"typedarray-pool":617}],558:[function(b,N,G){N.exports=function(m){var a=k[m];if(!a){a=k;var g=Array(m+1);g[0]=[[]];for(var h=1;h<=m;++h)for(var r=g[h]=n(h),l=0;l<r.length;++l);var c=["function B(C,E,i,j){","var a\x3dMath.min(i,j)|0,b\x3dMath.max(i,j)|0,l\x3dC[2*a],h\x3dC[2*a+1];","while(l\x3ch){","var m\x3d(l+h)\x3e\x3e1,v\x3dE[2*m+1];","if(v\x3d\x3d\x3db){return m}","if(b\x3cv){h\x3dm}else{l\x3dm+1}","}","return l;","};",
"function getContour",m,"d(F,E,C,S){","var n\x3dF.length,R\x3d[];","for(var i\x3d0;i\x3cn;++i){var c\x3dF[i],l\x3dc.length;"];for(h=m+1;1<h;--h){h<m+1&&c.push("else ");c.push("if(l\x3d\x3d\x3d",h,"){");r=[];for(l=0;l<h;++l)r.push("(S[c["+l+"]]\x3c\x3c"+l+")");c.push("var M\x3d",r.join("+"),";if(M\x3d\x3d\x3d0||M\x3d\x3d\x3d",(1<<h)-1,"){continue}switch(M){");r=g[h-1];for(l=0;l<r.length;++l){c.push("case ",l,":");var d=r[l];if(!(0>=d.length)){c.push("R.push(");for(var e=0;e<d.length;++e){var f=d[e];
0<e&&c.push(",");c.push("[");for(var q=0;q<f.length;++q){var t=f[q];0<q&&c.push(",");c.push("B(C,E,c[",t[0],"],c[",t[1],"])")}c.push("]")}c.push(");")}c.push("break;")}c.push("}}")}c.push("}return R;};return getContour",m,"d");g=(new Function("pool",c.join("")))(p);a=a[m]=g}return a};var p=b("typedarray-pool"),n=b("marching-simplex-table"),k={}},{"marching-simplex-table":462,"typedarray-pool":617}],559:[function(b,N,G){function p(c,d){var e=c.length,f=c.length-d.length,q=Math.min;if(f)return f;switch(e){case 0:return 0;
case 1:return c[0]-d[0];case 2:return(e=c[0]+c[1]-d[0]-d[1])?e:q(c[0],c[1])-q(d[0],d[1]);case 3:f=c[0]+c[1];var t=d[0]+d[1];if(e=f+c[2]-(t+d[2]))return e;var w=q(c[0],c[1]),x=q(d[0],d[1]);return(e=q(w,c[2])-q(x,d[2]))?e:q(w+c[2],f)-q(x+d[2],t);default:c=c.slice(0);c.sort();d=d.slice(0);d.sort();for(q=0;q<e;++q)if(f=c[q]-d[q])return f;return 0}}function n(c,d){return p(c[0],d[0])}function k(c,d){if(d){for(var e=c.length,f=Array(e),q=0;q<e;++q)f[q]=[c[q],d[q]];f.sort(n);for(q=0;q<e;++q)c[q]=f[q][0],
d[q]=f[q][1]}else c.sort(p);return c}function m(c){if(0===c.length)return[];for(var d=1,e=c.length,f=1;f<e;++f){var q=c[f];p(q,c[f-1])&&(f===d?d++:c[d++]=q)}c.length=d;return c}function a(c,d){for(var e=0,f=c.length-1,q=-1;e<=f;){var t=e+f>>1,w=p(c[t],d);0>=w?(0===w&&(q=t),e=t+1):0<w&&(f=t-1)}return q}function g(c,d){for(var e=Array(c.length),f=0,q=e.length;f<q;++f)e[f]=[];q=[];f=0;for(var t=d.length;f<t;++f)for(var w=d[f],x=w.length,z=1,B=1<<x;z<B;++z){q.length=r.popCount(z);for(var A=0,D=0;D<x;++D)z&
1<<D&&(q[A++]=w[D]);A=a(c,q);if(!(0>A))for(;!(e[A++].push(f),A>=c.length||0!==p(c[A],q)););}return e}function h(c,d){if(0>d)return[];for(var e=[],f=(1<<d+1)-1,q=0;q<c.length;++q)for(var t=c[q],w=f;w<1<<t.length;w=r.nextCombination(w)){for(var x=Array(d+1),z=0,B=0;B<t.length;++B)w&1<<B&&(x[z++]=t[B]);e.push(x)}return k(e)}"use restrict";var r=b("bit-twiddle"),l=b("union-find");G.dimension=function(c){for(var d=0,e=Math.max,f=0,q=c.length;f<q;++f)d=e(d,c[f].length);return d-1};G.countVertices=function(c){for(var d=
-1,e=Math.max,f=0,q=c.length;f<q;++f)for(var t=c[f],w=0,x=t.length;w<x;++w)d=e(d,t[w]);return d+1};G.cloneCells=function(c){for(var d=Array(c.length),e=0,f=c.length;e<f;++e)d[e]=c[e].slice(0);return d};G.compareCells=p;G.normalize=k;G.unique=m;G.findCell=a;G.incidence=g;G.dual=function(c,d){if(!d)return g(m(h(c,0)),c,0);for(var e=Array(d),f=0;f<d;++f)e[f]=[];f=0;for(d=c.length;f<d;++f)for(var q=c[f],t=0,w=q.length;t<w;++t)e[q[t]].push(f);return e};G.explode=function(c){for(var d=[],e=0,f=c.length;e<
f;++e)for(var q=c[e],t=q.length|0,w=1,x=1<<t;w<x;++w){for(var z=[],B=0;B<t;++B)w>>>B&1&&z.push(q[B]);d.push(z)}return k(d)};G.skeleton=h;G.boundary=function(c){for(var d=[],e=0,f=c.length;e<f;++e)for(var q=c[e],t=0,w=q.length;t<w;++t){for(var x=Array(q.length-1),z=0,B=0;z<w;++z)z!==t&&(x[B++]=q[z]);d.push(x)}return k(d)};G.connectedComponents=function(c,d){if(d){d=new l(d);for(var e=0;e<c.length;++e)for(var f=c[e],q=0;q<f.length;++q)for(var t=q+1;t<f.length;++t)d.link(f[q],f[t]);f=[];q=d.ranks;for(e=
0;e<q.length;++e)q[e]=-1;for(e=0;e<c.length;++e)t=d.find(c[e][0]),0>q[t]?(q[t]=f.length,f.push([c[e].slice(0)])):f[q[t]].push(c[e].slice(0));return f}d=m(k(h(c,0)));e=new l(d.length);for(f=0;f<c.length;++f)for(q=c[f],t=0;t<q.length;++t)for(var w=a(d,[q[t]]),x=t+1;x<q.length;++x)e.link(w,a(d,[q[x]]));q=[];t=e.ranks;for(f=0;f<t.length;++f)t[f]=-1;for(f=0;f<c.length;++f)w=e.find(a(d,[c[f][0]])),0>t[w]?(t[w]=q.length,q.push([c[f].slice(0)])):q[t[w]].push(c[f].slice(0));return q}},{"bit-twiddle":104,"union-find":618}],
560:[function(b,N,G){arguments[4][104][0].apply(G,arguments)},{dup:104}],561:[function(b,N,G){arguments[4][559][0].apply(G,arguments)},{"bit-twiddle":560,dup:559,"union-find":562}],562:[function(b,N,G){function p(n){this.roots=Array(n);this.ranks=Array(n);for(var k=0;k<n;++k)this.roots[k]=k,this.ranks[k]=0}"use restrict";N.exports=p;p.prototype.length=function(){return this.roots.length};p.prototype.makeSet=function(){var n=this.roots.length;this.roots.push(n);this.ranks.push(0);return n};p.prototype.find=
function(n){for(var k=this.roots;k[n]!==n;){var m=k[n];k[n]=k[m];n=m}return n};p.prototype.link=function(n,k){n=this.find(n);k=this.find(k);if(n!==k){var m=this.ranks,a=this.roots,g=m[n],h=m[k];g<h?a[n]=k:h<g?a[k]=n:(a[k]=n,++m[n])}}},{}],563:[function(b,N,G){N.exports=function(k,m,a){function g(K){if(B[K])return Infinity;var M=w[K],H=x[K];if(0>M||0>H)return Infinity;M=m[M];H=m[H];return Math.abs(p(m[K],M,H))/Math.sqrt(Math.pow(M[0]-H[0],2)+Math.pow(M[1]-H[1],2))}function h(K,M){var H=v[K],O=v[M];
v[K]=O;v[M]=H;y[H]=M;y[O]=K}function r(K){for(var M=z[v[K]];;){var H=M,O=2*K+1,I=2*(K+1),L=K;if(O<F){var Q=z[v[O]];Q<H&&(L=O,H=Q)}I<F&&z[v[I]]<H&&(L=I);if(L===K)return K;h(K,L);K=L}}function l(K){for(var M=z[v[K]];0<K;){var H=K&1?K-1>>1:(K>>1)-1;if(0<=H&&M<z[v[H]])h(K,H),K=H;else return K}}function c(){if(0<F){var K=v[0];h(0,F-1);--F;r(0);return K}return-1}function d(K,M){var H=v[K];if(z[H]===M)return K;z[H]=-Infinity;l(K);c();z[H]=M;F+=1;return l(F-1)}function e(K){if(!B[K]){B[K]=!0;var M=w[K];K=
x[K];0<=w[K]&&(w[K]=M);0<=x[M]&&(x[M]=K);0<=y[M]&&d(y[M],g(M));0<=y[K]&&d(y[K],g(K))}}function f(K,M){if(0>K[M])return M;var H=M,O=M;do{var I=K[O];if(!B[O]||0>I||I===O)break;O=I;I=K[O];if(!B[O]||0>I||I===O)break;O=I;H=K[H]}while(H!==O);for(;M!==O;M=K[M])K[M]=O;return O}for(var q=m.length,t=k.length,w=Array(q),x=Array(q),z=Array(q),B=Array(q),A=0;A<q;++A)w[A]=x[A]=-1,z[A]=Infinity,B[A]=!1;for(A=0;A<t;++A){var D=k[A];if(2!==D.length)throw Error("Input must be a graph");var C=D[1];D=D[0];x[D]=-1!==x[D]?
-2:C;w[C]=-1!==w[C]?-2:D}var v=[],y=Array(q);for(A=0;A<q;++A)Infinity>(z[A]=g(A))?(y[A]=v.length,v.push(A)):y[A]=-1;var F=v.length;for(A=F>>1;0<=A;--A)r(A);for(;;){A=c();if(0>A||z[A]>a)break;e(A)}a=[];for(A=0;A<q;++A)B[A]||(y[A]=a.length,a.push(m[A].slice()));var J=[];k.forEach(function(K){var M=f(w,K[0]);K=f(x,K[1]);0<=M&&0<=K&&M!==K&&(M=y[M],K=y[K],M!==K&&J.push([M,K]))});n.unique(n.normalize(J));return{positions:a,edges:J}};var p=b("robust-orientation"),n=b("simplicial-complex")},{"robust-orientation":548,
"simplicial-complex":561}],564:[function(b,N,G){function p(k,m){if(m[0][0]<m[1][0]){var a=m[0];m=m[1]}else if(m[0][0]>m[1][0])a=m[1],m=m[0];else{a=Math.min(k[0][1],k[1][1]);k=Math.max(k[0][1],k[1][1]);var g=Math.min(m[0][1],m[1][1]);m=Math.max(m[0][1],m[1][1]);return k<g?k-g:a>m?a-m:k-m}k[0][1]<k[1][1]?(g=k[0],k=k[1]):(g=k[1],k=k[0]);return(g=n(m,a,g))?g:(g=n(m,a,k))?g:k-m}N.exports=function(k,m){if(m[0][0]<m[1][0]){var a=m[0];var g=m[1]}else if(m[0][0]>m[1][0])a=m[1],g=m[0];else return p(m,k);if(k[0][0]<
k[1][0])m=k[0],k=k[1];else if(k[0][0]>k[1][0])m=k[1],k=k[0];else return-p(k,m);var h=n(a,g,k),r=n(a,g,m);if(0>h){if(0>=r)return h}else if(0<h){if(0<=r)return h}else if(r)return r;h=n(k,m,g);r=n(k,m,a);if(0>h){if(0>=r)return h}else if(0<h){if(0<=r)return h}else if(r)return r;return g[0]-k[0]};var n=b("robust-orientation")},{"robust-orientation":548}],565:[function(b,N,G){arguments[4][251][0].apply(G,arguments)},{dup:251}],566:[function(b,N,G){function p(c,d,e){this.slabs=c;this.coordinates=d;this.horizontal=
e}function n(c,d){return c.y-d}function k(c,d){for(var e=null;c;){var f=c.key;if(f[0][0]<f[1][0]){var q=f[0];var t=f[1]}else q=f[1],t=f[0];q=r(q,t,d);if(0>q)c=c.left;else if(0<q)if(d[0]!==f[1][0])e=c,c=c.right;else{if(f=k(c.right,d))return f;c=c.left}else{if(d[0]!==f[1][0])return c;if(f=k(c.right,d))return f;c=c.left}}return e}function m(c,d,e,f){this.y=c;this.index=d;this.start=e;this.closed=f}function a(c,d,e,f){this.x=c;this.segment=d;this.create=e;this.index=f}N.exports=function(c){for(var d=
c.length,e=2*d,f=Array(e),q=0;q<d;++q){var t=c[q],w=t[0][0]<t[1][0];f[2*q]=new a(t[0][0],t,w,q);f[2*q+1]=new a(t[1][0],t,!w,q)}f.sort(function(A,D){var C=A.x-D.x;return C?C:(C=A.create-D.create)?C:Math.min(A.segment[0][1],A.segment[1][1])-Math.min(D.segment[0][1],D.segment[1][1])});c=h(l);d=[];t=[];w=[];for(q=0;q<e;){for(var x=f[q].x,z=[];q<e;){var B=f[q];if(B.x!==x)break;q+=1;B.segment[0][0]===B.x&&B.segment[1][0]===B.x?B.create&&(B.segment[0][1]<B.segment[1][1]?(z.push(new m(B.segment[0][1],B.index,
!0,!0)),z.push(new m(B.segment[1][1],B.index,!1,!1))):(z.push(new m(B.segment[1][1],B.index,!0,!1)),z.push(new m(B.segment[0][1],B.index,!1,!0)))):c=B.create?c.insert(B.segment,B.index):c.remove(B.segment)}d.push(c.root);t.push(x);w.push(z)}return new p(d,t,w)};var g=b("binary-search-bounds"),h=b("functional-red-black-tree"),r=b("robust-orientation"),l=b("./lib/order-segments");p.prototype.castUp=function(c){var d=g.le(this.coordinates,c[0]);if(0>d)return-1;var e=k(this.slabs[d],c),f=-1;e&&(f=e.value);
if(this.coordinates[d]===c[0]){var q=null;e&&(q=e.key);0<d&&(e=k(this.slabs[d-1],c))&&(q?0<l(e.key,q)&&(q=e.key,f=e.value):(f=e.value,q=e.key));e=this.horizontal[d];if(0<e.length){var t=g.ge(e,c[1],n);if(t<e.length){d=e[t];if(c[1]===d.y){if(d.closed)return d.index;for(;t<e.length-1&&e[t+1].y===c[1];)if(t+=1,d=e[t],d.closed)return d.index;if(d.y===c[1]&&!d.start){t+=1;if(t>=e.length)return f;d=e[t]}}d.start?q?(c=r(q[0],q[1],[c[0],d.y]),q[0][0]>q[1][0]&&(c=-c),0<c&&(f=d.index)):f=d.index:d.y!==c[1]&&
(f=d.index)}}}return f}},{"./lib/order-segments":564,"binary-search-bounds":565,"functional-red-black-tree":255,"robust-orientation":548}],567:[function(b,N,G){function p(a,g){a=m(k(a,g),[g[g.length-1]]);return a[a.length-1]}function n(a,g,h,r){g=-g/(r-g);0>g?g=0:1<g&&(g=1);r=1-g;for(var l=a.length,c=Array(l),d=0;d<l;++d)c[d]=g*a[d]+r*h[d];return c}var k=b("robust-dot-product"),m=b("robust-sum");N.exports=function(a,g){for(var h=[],r=[],l=p(a[a.length-1],g),c=a[a.length-1],d,e=0;e<a.length;++e,c=
d){d=a[e];var f=p(d,g);if(0>l&&0<f||0<l&&0>f)l=n(c,f,d,l),h.push(l),r.push(l.slice());0>f?r.push(d.slice()):0<f?h.push(d.slice()):(h.push(d.slice()),r.push(d.slice()));l=f}return{positive:h,negative:r}};N.exports.positive=function(a,g){for(var h=[],r=p(a[a.length-1],g),l=a[a.length-1],c,d=0;d<a.length;++d,l=c){c=a[d];var e=p(c,g);(0>r&&0<e||0<r&&0>e)&&h.push(n(l,e,c,r));0<=e&&h.push(c.slice());r=e}return h};N.exports.negative=function(a,g){for(var h=[],r=p(a[a.length-1],g),l=a[a.length-1],c,d=0;d<
a.length;++d,l=c){c=a[d];var e=p(c,g);(0>r&&0<e||0<r&&0>e)&&h.push(n(l,e,c,r));0>=e&&h.push(c.slice());r=e}return h}},{"robust-dot-product":545,"robust-sum":553}],568:[function(b,N,G){!function(){function p(a){var g=a;if(m[g])g=m[g];else{for(var h=g,r,l=[],c=0;h;){if(null!==(r=k.text.exec(h)))l.push(r[0]);else if(null!==(r=k.modulo.exec(h)))l.push("%");else if(null!==(r=k.placeholder.exec(h))){if(r[2]){c|=1;var d=[],e=r[2],f;if(null!==(f=k.key.exec(e)))for(d.push(f[1]);""!==(e=e.substring(f[0].length));)if(null!==
(f=k.key_access.exec(e)))d.push(f[1]);else if(null!==(f=k.index_access.exec(e)))d.push(f[1]);else throw new SyntaxError("[sprintf] failed to parse named argument key");else throw new SyntaxError("[sprintf] failed to parse named argument key");r[2]=d}else c|=2;if(3===c)throw Error("[sprintf] mixing positional and named placeholders is not (yet) supported");l.push({placeholder:r[0],param_no:r[1],keys:r[2],sign:r[3],pad_char:r[4],align:r[5],width:r[6],precision:r[7],type:r[8]})}else throw new SyntaxError("[sprintf] unexpected placeholder");
h=h.substring(r[0].length)}g=m[g]=l}h=arguments;r=1;l=g.length;d="";var q,t;for(e=0;e<l;e++)if("string"===typeof g[e])d+=g[e];else if("object"===typeof g[e]){f=g[e];if(f.keys)for(c=h[r],q=0;q<f.keys.length;q++){if(void 0==c)throw Error(p('[sprintf] Cannot access property "%s" of undefined value "%s"',f.keys[q],f.keys[q-1]));c=c[f.keys[q]]}else c=f.param_no?h[f.param_no]:h[r++];k.not_type.test(f.type)&&k.not_primitive.test(f.type)&&c instanceof Function&&(c=c());if(k.numeric_arg.test(f.type)&&"number"!==
typeof c&&isNaN(c))throw new TypeError(p("[sprintf] expecting number but found %T",c));k.number.test(f.type)&&(t=0<=c);switch(f.type){case "b":c=parseInt(c,10).toString(2);break;case "c":c=String.fromCharCode(parseInt(c,10));break;case "d":case "i":c=parseInt(c,10);break;case "j":c=JSON.stringify(c,null,f.width?parseInt(f.width):0);break;case "e":c=f.precision?parseFloat(c).toExponential(f.precision):parseFloat(c).toExponential();break;case "f":c=f.precision?parseFloat(c).toFixed(f.precision):parseFloat(c);
break;case "g":c=f.precision?String(Number(c.toPrecision(f.precision))):parseFloat(c);break;case "o":c=(parseInt(c,10)>>>0).toString(8);break;case "s":c=String(c);c=f.precision?c.substring(0,f.precision):c;break;case "t":c=String(!!c);c=f.precision?c.substring(0,f.precision):c;break;case "T":c=Object.prototype.toString.call(c).slice(8,-1).toLowerCase();c=f.precision?c.substring(0,f.precision):c;break;case "u":c=parseInt(c,10)>>>0;break;case "v":c=c.valueOf();c=f.precision?c.substring(0,f.precision):
c;break;case "x":c=(parseInt(c,10)>>>0).toString(16);break;case "X":c=(parseInt(c,10)>>>0).toString(16).toUpperCase()}if(k.json.test(f.type))d+=c;else{if(!k.number.test(f.type)||t&&!f.sign)var w="";else w=t?"+":"-",c=c.toString().replace(k.sign,"");q=f.pad_char?"0"===f.pad_char?"0":f.pad_char.charAt(1):" ";var x=f.width-(w+c).length;x=f.width?0<x?q.repeat(x):"":"";d+=f.align?w+c+x:"0"===q?w+x+c:x+w+c}}return d}function n(a,g){return p.apply(null,[a].concat(g||[]))}var k={not_string:/[^s]/,not_bool:/[^t]/,
not_type:/[^T]/,not_primitive:/[^v]/,number:/[diefg]/,numeric_arg:/[bcdiefguxX]/,json:/[j]/,not_json:/[^j]/,text:/^[^\x25]+/,modulo:/^\x25{2}/,placeholder:/^\x25(?:([1-9]\d*)\$|\(([^)]+)\))?(\+)?(0|'[^$])?(-)?(\d+)?(?:\.(\d+))?([b-gijostTuvxX])/,key:/^([a-z_][a-z_\d]*)/i,key_access:/^\.([a-z_][a-z_\d]*)/i,index_access:/^\[(\d+)\]/,sign:/^[+-]/},m=Object.create(null);"undefined"!==typeof G&&(G.sprintf=p,G.vsprintf=n);"undefined"!==typeof window&&(window.sprintf=p,window.vsprintf=n)}()},{}],569:[function(b,
N,G){function p(){n.call(this)}N.exports=p;var n=b("events").EventEmitter;b("inherits")(p,n);p.Readable=b("readable-stream/lib/_stream_readable.js");p.Writable=b("readable-stream/lib/_stream_writable.js");p.Duplex=b("readable-stream/lib/_stream_duplex.js");p.Transform=b("readable-stream/lib/_stream_transform.js");p.PassThrough=b("readable-stream/lib/_stream_passthrough.js");p.finished=b("readable-stream/lib/internal/streams/end-of-stream.js");p.pipeline=b("readable-stream/lib/internal/streams/pipeline.js");
p.Stream=p;p.prototype.pipe=function(k,m){function a(f){k.writable&&!1===k.write(f)&&d.pause&&d.pause()}function g(){d.readable&&d.resume&&d.resume()}function h(){e||(e=!0,k.end())}function r(){e||(e=!0,"function"===typeof k.destroy&&k.destroy())}function l(f){c();if(0===n.listenerCount(this,"error"))throw f;}function c(){d.removeListener("data",a);k.removeListener("drain",g);d.removeListener("end",h);d.removeListener("close",r);d.removeListener("error",l);k.removeListener("error",l);d.removeListener("end",
c);d.removeListener("close",c);k.removeListener("close",c)}var d=this;d.on("data",a);k.on("drain",g);k._isStdio||m&&!1===m.end||(d.on("end",h),d.on("close",r));var e=!1;d.on("error",l);k.on("error",l);d.on("end",c);d.on("close",c);k.on("close",c);k.emit("pipe",d);return k}},{events:116,inherits:447,"readable-stream/lib/_stream_duplex.js":571,"readable-stream/lib/_stream_passthrough.js":572,"readable-stream/lib/_stream_readable.js":573,"readable-stream/lib/_stream_transform.js":574,"readable-stream/lib/_stream_writable.js":575,
"readable-stream/lib/internal/streams/end-of-stream.js":579,"readable-stream/lib/internal/streams/pipeline.js":581}],570:[function(b,N,G){function p(a,g){a.prototype=Object.create(g.prototype);a.prototype.constructor=a;a.__proto__=g}function n(a,g,h){h||(h=Error);var r=function(l){function c(d,e,f){var q=l.call;d="string"===typeof g?g:g(d,e,f);return q.call(l,this,d)||this}p(c,l);return c}(h);r.prototype.name=h.name;r.prototype.code=a;m[a]=r}function k(a,g){if(Array.isArray(a)){var h=a.length;a=a.map(function(r){return String(r)});
return 2<h?"one of ".concat(g," ").concat(a.slice(0,h-1).join(", "),", or ")+a[h-1]:2===h?"one of ".concat(g," ").concat(a[0]," or ").concat(a[1]):"of ".concat(g," ").concat(a[0])}return"of ".concat(g," ").concat(String(a))}var m={};n("ERR_INVALID_OPT_VALUE",function(a,g){return'The value "'+g+'" is invalid for option "'+a+'"'},TypeError);n("ERR_INVALID_ARG_TYPE",function(a,g,h){var r;if(r="string"===typeof g)r="not "===g.substr(0,4);r?(r="must not be",g=g.replace(/^not /,"")):r="must be";var l=void 0;
if(void 0===l||l>a.length)l=a.length;" argument"===a.substring(l-9,l)?a="The ".concat(a," ").concat(r," ").concat(k(g,"type")):(l=void 0,"number"!==typeof l&&(l=0),l=l+1>a.length?!1:-1!==a.indexOf(".",l),l=l?"property":"argument",a='The "'.concat(a,'" ').concat(l," ").concat(r," ").concat(k(g,"type")));return a+=". Received type ".concat(typeof h)},TypeError);n("ERR_STREAM_PUSH_AFTER_EOF","stream.push() after EOF");n("ERR_METHOD_NOT_IMPLEMENTED",function(a){return"The "+a+" method is not implemented"});
n("ERR_STREAM_PREMATURE_CLOSE","Premature close");n("ERR_STREAM_DESTROYED",function(a){return"Cannot call "+a+" after a stream was destroyed"});n("ERR_MULTIPLE_CALLBACK","Callback called multiple times");n("ERR_STREAM_CANNOT_PIPE","Cannot pipe, not readable");n("ERR_STREAM_WRITE_AFTER_END","write after end");n("ERR_STREAM_NULL_VALUES","May not write null values to stream",TypeError);n("ERR_UNKNOWN_ENCODING",function(a){return"Unknown encoding: "+a},TypeError);n("ERR_STREAM_UNSHIFT_AFTER_END_EVENT",
"stream.unshift() after end event");N.exports.codes=m},{}],571:[function(b,N,G){(function(p){(function(){function n(c){if(!(this instanceof n))return new n(c);g.call(this,c);h.call(this,c);this.allowHalfOpen=!0;c&&(!1===c.readable&&(this.readable=!1),!1===c.writable&&(this.writable=!1),!1===c.allowHalfOpen&&(this.allowHalfOpen=!1,this.once("end",k)))}function k(){this._writableState.ended||p.nextTick(m,this)}function m(c){c.end()}var a=Object.keys||function(c){var d=[],e;for(e in c)d.push(e);return d};
N.exports=n;var g=b("./_stream_readable"),h=b("./_stream_writable");b("inherits")(n,g);a=a(h.prototype);for(var r=0;r<a.length;r++){var l=a[r];n.prototype[l]||(n.prototype[l]=h.prototype[l])}Object.defineProperty(n.prototype,"writableHighWaterMark",{enumerable:!1,get:function(){return this._writableState.highWaterMark}});Object.defineProperty(n.prototype,"writableBuffer",{enumerable:!1,get:function(){return this._writableState&&this._writableState.getBuffer()}});Object.defineProperty(n.prototype,
"writableLength",{enumerable:!1,get:function(){return this._writableState.length}});Object.defineProperty(n.prototype,"destroyed",{enumerable:!1,get:function(){return void 0===this._readableState||void 0===this._writableState?!1:this._readableState.destroyed&&this._writableState.destroyed},set:function(c){void 0!==this._readableState&&void 0!==this._writableState&&(this._readableState.destroyed=c,this._writableState.destroyed=c)}})}).call(this)}).call(this,b("_process"))},{"./_stream_readable":573,
"./_stream_writable":575,_process:528,inherits:447}],572:[function(b,N,G){function p(k){if(!(this instanceof p))return new p(k);n.call(this,k)}N.exports=p;var n=b("./_stream_transform");b("inherits")(p,n);p.prototype._transform=function(k,m,a){a(null,k)}},{"./_stream_transform":574,inherits:447}],573:[function(b,N,G){(function(p,n){(function(){function k(W,aa,ja){if("function"===typeof W.prependListener)return W.prependListener(aa,ja);if(W._events&&W._events[aa])Array.isArray(W._events[aa])?W._events[aa].unshift(ja):
W._events[aa]=[ja,W._events[aa]];else W.on(aa,ja)}function m(W,aa,ja){C=C||b("./_stream_duplex");W=W||{};"boolean"!==typeof ja&&(ja=aa instanceof C);this.objectMode=!!W.objectMode;ja&&(this.objectMode=this.objectMode||!!W.readableObjectMode);this.highWaterMark=H(this,W,"readableHighWaterMark",ja);this.buffer=new M;this.length=0;this.pipes=null;this.pipesCount=0;this.flowing=null;this.reading=this.endEmitted=this.ended=!1;this.sync=!0;this.resumeScheduled=this.readableListening=this.emittedReadable=
this.needReadable=!1;this.paused=!0;this.emitClose=!1!==W.emitClose;this.autoDestroy=!!W.autoDestroy;this.destroyed=!1;this.defaultEncoding=W.defaultEncoding||"utf8";this.awaitDrain=0;this.readingMore=!1;this.encoding=this.decoder=null;W.encoding&&(ba||(ba=b("string_decoder/").StringDecoder),this.decoder=new ba(W.encoding),this.encoding=W.encoding)}function a(W){C=C||b("./_stream_duplex");if(!(this instanceof a))return new a(W);this._readableState=new m(W,this,this instanceof C);this.readable=!0;
W&&("function"===typeof W.read&&(this._read=W.read),"function"===typeof W.destroy&&(this._destroy=W.destroy));v.call(this)}function g(W,aa,ja,ma,ia){K("readableAddChunk",aa);var ra=W._readableState;if(null===aa)ra.reading=!1,K("onEofChunk"),ra.ended||(ra.decoder&&(aa=ra.decoder.end())&&aa.length&&(ra.buffer.push(aa),ra.length+=ra.objectMode?1:aa.length),ra.ended=!0,ra.sync?l(W):(ra.needReadable=!1,ra.emittedReadable||(ra.emittedReadable=!0,c(W))));else{if(!ia){ia=aa;var wa;y.isBuffer(ia)||ia instanceof
F||"string"===typeof ia||void 0===ia||ra.objectMode||(wa=new I("chunk",["string","Buffer","Uint8Array"],ia));var pa=wa}if(pa)T(W,pa);else if(ra.objectMode||aa&&0<aa.length)if("string"===typeof aa||ra.objectMode||Object.getPrototypeOf(aa)===y.prototype||(aa=y.from(aa)),ma)ra.endEmitted?T(W,new Z):h(W,ra,aa,!0);else if(ra.ended)T(W,new L);else{if(ra.destroyed)return!1;ra.reading=!1;ra.decoder&&!ja?(aa=ra.decoder.write(aa),ra.objectMode||0!==aa.length?h(W,ra,aa,!1):d(W,ra)):h(W,ra,aa,!1)}else ma||(ra.reading=
!1,d(W,ra))}return!ra.ended&&(ra.length<ra.highWaterMark||0===ra.length)}function h(W,aa,ja,ma){aa.flowing&&0===aa.length&&!aa.sync?(aa.awaitDrain=0,W.emit("data",ja)):(aa.length+=aa.objectMode?1:ja.length,ma?aa.buffer.unshift(ja):aa.buffer.push(ja),aa.needReadable&&l(W));d(W,aa)}function r(W,aa){if(0>=W||0===aa.length&&aa.ended)return 0;if(aa.objectMode)return 1;if(W!==W)return aa.flowing&&aa.length?aa.buffer.head.data.length:aa.length;if(W>aa.highWaterMark){var ja=W;1073741824<=ja?ja=1073741824:
(ja--,ja|=ja>>>1,ja|=ja>>>2,ja|=ja>>>4,ja|=ja>>>8,ja|=ja>>>16,ja++);aa.highWaterMark=ja}return W<=aa.length?W:aa.ended?aa.length:(aa.needReadable=!0,0)}function l(W){var aa=W._readableState;K("emitReadable",aa.needReadable,aa.emittedReadable);aa.needReadable=!1;aa.emittedReadable||(K("emitReadable",aa.flowing),aa.emittedReadable=!0,p.nextTick(c,W))}function c(W){var aa=W._readableState;K("emitReadable_",aa.destroyed,aa.length,aa.ended);aa.destroyed||!aa.length&&!aa.ended||(W.emit("readable"),aa.emittedReadable=
!1);aa.needReadable=!aa.flowing&&!aa.ended&&aa.length<=aa.highWaterMark;x(W)}function d(W,aa){aa.readingMore||(aa.readingMore=!0,p.nextTick(e,W,aa))}function e(W,aa){for(;!aa.reading&&!aa.ended&&(aa.length<aa.highWaterMark||aa.flowing&&0===aa.length);){var ja=aa.length;K("maybeReadMore read 0");W.read(0);if(ja===aa.length)break}aa.readingMore=!1}function f(W){return function(){var aa=W._readableState;K("pipeOnDrain",aa.awaitDrain);aa.awaitDrain&&aa.awaitDrain--;0===aa.awaitDrain&&W.listeners("data").length&&
(aa.flowing=!0,x(W))}}function q(W){var aa=W._readableState;aa.readableListening=0<W.listenerCount("readable");aa.resumeScheduled&&!aa.paused?aa.flowing=!0:0<W.listenerCount("data")&&W.resume()}function t(W){K("readable nexttick read 0");W.read(0)}function w(W,aa){K("resume",aa.reading);aa.reading||W.read(0);aa.resumeScheduled=!1;W.emit("resume");x(W);aa.flowing&&!aa.reading&&W.read(0)}function x(W){var aa=W._readableState;for(K("flow",aa.flowing);aa.flowing&&null!==W.read(););}function z(W,aa){if(0===
aa.length)return null;aa.objectMode?W=aa.buffer.shift():!W||W>=aa.length?(W=aa.decoder?aa.buffer.join(""):1===aa.buffer.length?aa.buffer.first():aa.buffer.concat(aa.length),aa.buffer.clear()):W=aa.buffer.consume(W,aa.decoder);return W}function B(W){var aa=W._readableState;K("endReadable",aa.endEmitted);aa.endEmitted||(aa.ended=!0,p.nextTick(A,aa,W))}function A(W,aa){K("endReadableNT",W.endEmitted,W.length);W.endEmitted||0!==W.length||(W.endEmitted=!0,aa.readable=!1,aa.emit("end"),W.autoDestroy&&(W=
aa._writableState,(!W||W.autoDestroy&&W.finished)&&aa.destroy()))}function D(W,aa){for(var ja=0,ma=W.length;ja<ma;ja++)if(W[ja]===aa)return ja;return-1}N.exports=a;var C;a.ReadableState=m;b("events");var v=b("./internal/streams/stream"),y=b("buffer").Buffer,F=n.Uint8Array||function(){},J=b("util");var K=J&&J.debuglog?J.debuglog("stream"):function(){};var M=b("./internal/streams/buffer_list");J=b("./internal/streams/destroy");var H=b("./internal/streams/state").getHighWaterMark,O=b("../errors").codes,
I=O.ERR_INVALID_ARG_TYPE,L=O.ERR_STREAM_PUSH_AFTER_EOF,Q=O.ERR_METHOD_NOT_IMPLEMENTED,Z=O.ERR_STREAM_UNSHIFT_AFTER_END_EVENT,ba,V,S;b("inherits")(a,v);var T=J.errorOrDestroy,fa=["error","close","destroy","pause","resume"];Object.defineProperty(a.prototype,"destroyed",{enumerable:!1,get:function(){return void 0===this._readableState?!1:this._readableState.destroyed},set:function(W){this._readableState&&(this._readableState.destroyed=W)}});a.prototype.destroy=J.destroy;a.prototype._undestroy=J.undestroy;
a.prototype._destroy=function(W,aa){aa(W)};a.prototype.push=function(W,aa){var ja=this._readableState;if(ja.objectMode)var ma=!0;else"string"===typeof W&&(aa=aa||ja.defaultEncoding,aa!==ja.encoding&&(W=y.from(W,aa),aa=""),ma=!0);return g(this,W,aa,!1,ma)};a.prototype.unshift=function(W){return g(this,W,null,!0,!1)};a.prototype.isPaused=function(){return!1===this._readableState.flowing};a.prototype.setEncoding=function(W){ba||(ba=b("string_decoder/").StringDecoder);W=new ba(W);this._readableState.decoder=
W;this._readableState.encoding=this._readableState.decoder.encoding;for(var aa=this._readableState.buffer.head,ja="";null!==aa;)ja+=W.write(aa.data),aa=aa.next;this._readableState.buffer.clear();""!==ja&&this._readableState.buffer.push(ja);this._readableState.length=ja.length;return this};a.prototype.read=function(W){K("read",W);W=parseInt(W,10);var aa=this._readableState,ja=W;0!==W&&(aa.emittedReadable=!1);if(0===W&&aa.needReadable&&((0!==aa.highWaterMark?aa.length>=aa.highWaterMark:0<aa.length)||
aa.ended))return K("read: emitReadable",aa.length,aa.ended),0===aa.length&&aa.ended?B(this):l(this),null;W=r(W,aa);if(0===W&&aa.ended)return 0===aa.length&&B(this),null;var ma=aa.needReadable;K("need readable",ma);if(0===aa.length||aa.length-W<aa.highWaterMark)ma=!0,K("length less than watermark",ma);aa.ended||aa.reading?K("reading or ended",!1):ma&&(K("do read"),aa.reading=!0,aa.sync=!0,0===aa.length&&(aa.needReadable=!0),this._read(aa.highWaterMark),aa.sync=!1,aa.reading||(W=r(ja,aa)));ma=0<W?z(W,
aa):null;null===ma?(aa.needReadable=aa.length<=aa.highWaterMark,W=0):(aa.length-=W,aa.awaitDrain=0);0===aa.length&&(aa.ended||(aa.needReadable=!0),ja!==W&&aa.ended&&B(this));null!==ma&&this.emit("data",ma);return ma};a.prototype._read=function(W){T(this,new Q("_read()"))};a.prototype.pipe=function(W,aa){function ja(za,Ha){K("onunpipe");za===ka&&Ha&&!1===Ha.hasUnpiped&&(Ha.hasUnpiped=!0,K("cleanup"),W.removeListener("close",wa),W.removeListener("finish",pa),W.removeListener("drain",oa),W.removeListener("error",
ra),W.removeListener("unpipe",ja),ka.removeListener("end",ma),ka.removeListener("end",la),ka.removeListener("data",ia),sa=!0,!na.awaitDrain||W._writableState&&!W._writableState.needDrain||oa())}function ma(){K("onend");W.end()}function ia(za){K("ondata");za=W.write(za);K("dest.write",za);!1===za&&((1===na.pipesCount&&na.pipes===W||1<na.pipesCount&&-1!==D(na.pipes,W))&&!sa&&(K("false write response, pause",na.awaitDrain),na.awaitDrain++),ka.pause())}function ra(za){K("onerror",za);la();W.removeListener("error",
ra);0===W.listeners("error").length&&T(W,za)}function wa(){W.removeListener("finish",pa);la()}function pa(){K("onfinish");W.removeListener("close",wa);la()}function la(){K("unpipe");ka.unpipe(W)}var ka=this,na=this._readableState;switch(na.pipesCount){case 0:na.pipes=W;break;case 1:na.pipes=[na.pipes,W];break;default:na.pipes.push(W)}na.pipesCount+=1;K("pipe count\x3d%d opts\x3d%j",na.pipesCount,aa);aa=aa&&!1===aa.end||W===p.stdout||W===p.stderr?la:ma;if(na.endEmitted)p.nextTick(aa);else ka.once("end",
aa);W.on("unpipe",ja);var oa=f(ka);W.on("drain",oa);var sa=!1;ka.on("data",ia);k(W,"error",ra);W.once("close",wa);W.once("finish",pa);W.emit("pipe",ka);na.flowing||(K("pipe resume"),ka.resume());return W};a.prototype.unpipe=function(W){var aa=this._readableState,ja={hasUnpiped:!1};if(0===aa.pipesCount)return this;if(1===aa.pipesCount){if(W&&W!==aa.pipes)return this;W||(W=aa.pipes);aa.pipes=null;aa.pipesCount=0;aa.flowing=!1;W&&W.emit("unpipe",this,ja);return this}if(!W){W=aa.pipes;ja=aa.pipesCount;
aa.pipes=null;aa.pipesCount=0;aa.flowing=!1;for(aa=0;aa<ja;aa++)W[aa].emit("unpipe",this,{hasUnpiped:!1});return this}var ma=D(aa.pipes,W);if(-1===ma)return this;aa.pipes.splice(ma,1);--aa.pipesCount;1===aa.pipesCount&&(aa.pipes=aa.pipes[0]);W.emit("unpipe",this,ja);return this};a.prototype.on=function(W,aa){aa=v.prototype.on.call(this,W,aa);var ja=this._readableState;"data"===W?(ja.readableListening=0<this.listenerCount("readable"),!1!==ja.flowing&&this.resume()):"readable"!==W||ja.endEmitted||ja.readableListening||
(ja.readableListening=ja.needReadable=!0,ja.flowing=!1,ja.emittedReadable=!1,K("on readable",ja.length,ja.reading),ja.length?l(this):ja.reading||p.nextTick(t,this));return aa};a.prototype.addListener=a.prototype.on;a.prototype.removeListener=function(W,aa){aa=v.prototype.removeListener.call(this,W,aa);"readable"===W&&p.nextTick(q,this);return aa};a.prototype.removeAllListeners=function(W){var aa=v.prototype.removeAllListeners.apply(this,arguments);"readable"!==W&&void 0!==W||p.nextTick(q,this);return aa};
a.prototype.resume=function(){var W=this._readableState;W.flowing||(K("resume"),W.flowing=!W.readableListening,W.resumeScheduled||(W.resumeScheduled=!0,p.nextTick(w,this,W)));W.paused=!1;return this};a.prototype.pause=function(){K("call pause flowing\x3d%j",this._readableState.flowing);!1!==this._readableState.flowing&&(K("pause"),this._readableState.flowing=!1,this.emit("pause"));this._readableState.paused=!0;return this};a.prototype.wrap=function(W){var aa=this,ja=this._readableState,ma=!1;W.on("end",
function(){K("wrapped end");if(ja.decoder&&!ja.ended){var ra=ja.decoder.end();ra&&ra.length&&aa.push(ra)}aa.push(null)});W.on("data",function(ra){K("wrapped data");ja.decoder&&(ra=ja.decoder.write(ra));ja.objectMode&&(null===ra||void 0===ra)||!(ja.objectMode||ra&&ra.length)||aa.push(ra)||(ma=!0,W.pause())});for(var ia in W)void 0===this[ia]&&"function"===typeof W[ia]&&(this[ia]=function(ra){return function(){return W[ra].apply(W,arguments)}}(ia));for(ia=0;ia<fa.length;ia++)W.on(fa[ia],this.emit.bind(this,
fa[ia]));this._read=function(ra){K("wrapped _read",ra);ma&&(ma=!1,W.resume())};return this};"function"===typeof Symbol&&(a.prototype[Symbol.asyncIterator]=function(){void 0===V&&(V=b("./internal/streams/async_iterator"));return V(this)});Object.defineProperty(a.prototype,"readableHighWaterMark",{enumerable:!1,get:function(){return this._readableState.highWaterMark}});Object.defineProperty(a.prototype,"readableBuffer",{enumerable:!1,get:function(){return this._readableState&&this._readableState.buffer}});
Object.defineProperty(a.prototype,"readableFlowing",{enumerable:!1,get:function(){return this._readableState.flowing},set:function(W){this._readableState&&(this._readableState.flowing=W)}});a._fromList=z;Object.defineProperty(a.prototype,"readableLength",{enumerable:!1,get:function(){return this._readableState.length}});"function"===typeof Symbol&&(a.from=function(W,aa){void 0===S&&(S=b("./internal/streams/from"));return S(a,W,aa)})}).call(this)}).call(this,b("_process"),"undefined"!==typeof xe?xe:
"undefined"!==typeof self?self:"undefined"!==typeof window?window:{})},{"../errors":570,"./_stream_duplex":571,"./internal/streams/async_iterator":576,"./internal/streams/buffer_list":577,"./internal/streams/destroy":578,"./internal/streams/from":580,"./internal/streams/state":582,"./internal/streams/stream":583,_process:528,buffer:117,events:116,inherits:447,"string_decoder/":584,util:115}],574:[function(b,N,G){function p(c,d){var e=this._transformState;e.transforming=!1;var f=e.writecb;if(null===
f)return this.emit("error",new g);e.writechunk=null;e.writecb=null;null!=d&&this.push(d);f(c);c=this._readableState;c.reading=!1;(c.needReadable||c.length<c.highWaterMark)&&this._read(c.highWaterMark)}function n(c){if(!(this instanceof n))return new n(c);l.call(this,c);this._transformState={afterTransform:p.bind(this),needTransform:!1,transforming:!1,writecb:null,writechunk:null,writeencoding:null};this._readableState.needReadable=!0;this._readableState.sync=!1;c&&("function"===typeof c.transform&&
(this._transform=c.transform),"function"===typeof c.flush&&(this._flush=c.flush));this.on("prefinish",k)}function k(){var c=this;"function"!==typeof this._flush||this._readableState.destroyed?m(this,null,null):this._flush(function(d,e){m(c,d,e)})}function m(c,d,e){if(d)return c.emit("error",d);null!=e&&c.push(e);if(c._writableState.length)throw new r;if(c._transformState.transforming)throw new h;return c.push(null)}N.exports=n;N=b("../errors").codes;var a=N.ERR_METHOD_NOT_IMPLEMENTED,g=N.ERR_MULTIPLE_CALLBACK,
h=N.ERR_TRANSFORM_ALREADY_TRANSFORMING,r=N.ERR_TRANSFORM_WITH_LENGTH_0,l=b("./_stream_duplex");b("inherits")(n,l);n.prototype.push=function(c,d){this._transformState.needTransform=!1;return l.prototype.push.call(this,c,d)};n.prototype._transform=function(c,d,e){e(new a("_transform()"))};n.prototype._write=function(c,d,e){var f=this._transformState;f.writecb=e;f.writechunk=c;f.writeencoding=d;f.transforming||(c=this._readableState,(f.needTransform||c.needReadable||c.length<c.highWaterMark)&&this._read(c.highWaterMark))};
n.prototype._read=function(c){c=this._transformState;null===c.writechunk||c.transforming?c.needTransform=!0:(c.transforming=!0,this._transform(c.writechunk,c.writeencoding,c.afterTransform))};n.prototype._destroy=function(c,d){l.prototype._destroy.call(this,c,function(e){d(e)})}},{"../errors":570,"./_stream_duplex":571,inherits:447}],575:[function(b,N,G){(function(p,n){(function(){function k(I){var L=this;this.entry=this.next=null;this.finish=function(){var Q=L.entry;for(L.entry=null;Q;){var Z=Q.callback;
I.pendingcb--;Z(void 0);Q=Q.next}I.corkedRequestsFree.next=L}}function m(){}function a(I,L,Q){f=f||b("./_stream_duplex");I=I||{};"boolean"!==typeof Q&&(Q=L instanceof f);this.objectMode=!!I.objectMode;Q&&(this.objectMode=this.objectMode||!!I.writableObjectMode);this.highWaterMark=B(this,I,"writableHighWaterMark",Q);this.destroyed=this.finished=this.ended=this.ending=this.needDrain=this.finalCalled=!1;this.decodeStrings=!1!==I.decodeStrings;this.defaultEncoding=I.defaultEncoding||"utf8";this.length=
0;this.writing=!1;this.corked=0;this.sync=!0;this.bufferProcessing=!1;this.onwrite=function(Z){var ba=L._writableState,V=ba.sync,S=ba.writecb;if("function"!==typeof S)throw new v;ba.writing=!1;ba.writecb=null;ba.length-=ba.writelen;ba.writelen=0;Z?(--ba.pendingcb,V?(p.nextTick(S,Z),p.nextTick(e,L,ba),L._writableState.errorEmitted=!0,H(L,Z)):(S(Z),L._writableState.errorEmitted=!0,H(L,Z),e(L,ba))):((Z=c(ba)||L.destroyed)||ba.corked||ba.bufferProcessing||!ba.bufferedRequest||l(L,ba),V?p.nextTick(r,L,
ba,Z,S):r(L,ba,Z,S))};this.writecb=null;this.writelen=0;this.lastBufferedRequest=this.bufferedRequest=null;this.pendingcb=0;this.errorEmitted=this.prefinished=!1;this.emitClose=!1!==I.emitClose;this.autoDestroy=!!I.autoDestroy;this.bufferedRequestCount=0;this.corkedRequestsFree=new k(this)}function g(I){f=f||b("./_stream_duplex");var L=this instanceof f;if(!L&&!O.call(g,this))return new g(I);this._writableState=new a(I,this,L);this.writable=!0;I&&("function"===typeof I.write&&(this._write=I.write),
"function"===typeof I.writev&&(this._writev=I.writev),"function"===typeof I.destroy&&(this._destroy=I.destroy),"function"===typeof I.final&&(this._final=I.final));t.call(this)}function h(I,L,Q,Z,ba,V,S){L.writelen=Z;L.writecb=S;L.writing=!0;L.sync=!0;if(L.destroyed)L.onwrite(new F("write"));else Q?I._writev(ba,L.onwrite):I._write(ba,V,L.onwrite);L.sync=!1}function r(I,L,Q,Z){!Q&&0===L.length&&L.needDrain&&(L.needDrain=!1,I.emit("drain"));L.pendingcb--;Z();e(I,L)}function l(I,L){L.bufferProcessing=
!0;var Q=L.bufferedRequest;if(I._writev&&Q&&Q.next){var Z=Array(L.bufferedRequestCount),ba=L.corkedRequestsFree;ba.entry=Q;for(var V=0,S=!0;Q;)Z[V]=Q,Q.isBuf||(S=!1),Q=Q.next,V+=1;Z.allBuffers=S;h(I,L,!0,L.length,Z,"",ba.finish);L.pendingcb++;L.lastBufferedRequest=null;ba.next?(L.corkedRequestsFree=ba.next,ba.next=null):L.corkedRequestsFree=new k(L);L.bufferedRequestCount=0}else{for(;Q&&(Z=Q.chunk,h(I,L,!1,L.objectMode?1:Z.length,Z,Q.encoding,Q.callback),Q=Q.next,L.bufferedRequestCount--,!L.writing););
null===Q&&(L.lastBufferedRequest=null)}L.bufferedRequest=Q;L.bufferProcessing=!1}function c(I){return I.ending&&0===I.length&&null===I.bufferedRequest&&!I.finished&&!I.writing}function d(I,L){I._final(function(Q){L.pendingcb--;Q&&H(I,Q);L.prefinished=!0;I.emit("prefinish");e(I,L)})}function e(I,L){var Q=c(L);Q&&(L.prefinished||L.finalCalled||("function"!==typeof I._final||L.destroyed?(L.prefinished=!0,I.emit("prefinish")):(L.pendingcb++,L.finalCalled=!0,p.nextTick(d,I,L))),0===L.pendingcb&&(L.finished=
!0,I.emit("finish"),L.autoDestroy&&(L=I._readableState,(!L||L.autoDestroy&&L.endEmitted)&&I.destroy())));return Q}N.exports=g;var f;g.WritableState=a;var q={deprecate:b("util-deprecate")},t=b("./internal/streams/stream"),w=b("buffer").Buffer,x=n.Uint8Array||function(){},z=b("./internal/streams/destroy"),B=b("./internal/streams/state").getHighWaterMark,A=b("../errors").codes,D=A.ERR_INVALID_ARG_TYPE,C=A.ERR_METHOD_NOT_IMPLEMENTED,v=A.ERR_MULTIPLE_CALLBACK,y=A.ERR_STREAM_CANNOT_PIPE,F=A.ERR_STREAM_DESTROYED,
J=A.ERR_STREAM_NULL_VALUES,K=A.ERR_STREAM_WRITE_AFTER_END,M=A.ERR_UNKNOWN_ENCODING,H=z.errorOrDestroy;b("inherits")(g,t);a.prototype.getBuffer=function(){for(var I=this.bufferedRequest,L=[];I;)L.push(I),I=I.next;return L};(function(){try{Object.defineProperty(a.prototype,"buffer",{get:q.deprecate(function(){return this.getBuffer()},"_writableState.buffer is deprecated. Use _writableState.getBuffer instead.","DEP0003")})}catch(I){}})();if("function"===typeof Symbol&&Symbol.hasInstance&&"function"===
typeof Function.prototype[Symbol.hasInstance]){var O=Function.prototype[Symbol.hasInstance];Object.defineProperty(g,Symbol.hasInstance,{value:function(I){return O.call(this,I)?!0:this!==g?!1:I&&I._writableState instanceof a}})}else O=function(I){return I instanceof this};g.prototype.pipe=function(){H(this,new y)};g.prototype.write=function(I,L,Q){var Z=this._writableState,ba=!1,V;if(V=!Z.objectMode)V=I,V=w.isBuffer(V)||V instanceof x;V&&!w.isBuffer(I)&&(I=w.from(I));"function"===typeof L&&(Q=L,L=
null);V?L="buffer":L||(L=Z.defaultEncoding);"function"!==typeof Q&&(Q=m);if(Z.ending)Z=Q,Q=new K,H(this,Q),p.nextTick(Z,Q);else{var S;if(!(S=V)){S=I;var T=Q,fa;null===S?fa=new J:"string"===typeof S||Z.objectMode||(fa=new D("chunk",["string","Buffer"],S));fa?(H(this,fa),p.nextTick(T,fa),S=!1):S=!0}S&&(Z.pendingcb++,ba=V,ba||(fa=I,Z.objectMode||!1===Z.decodeStrings||"string"!==typeof fa||(fa=w.from(fa,L)),I!==fa&&(ba=!0,L="buffer",I=fa)),V=Z.objectMode?1:I.length,Z.length+=V,fa=Z.length<Z.highWaterMark,
fa||(Z.needDrain=!0),Z.writing||Z.corked?(V=Z.lastBufferedRequest,Z.lastBufferedRequest={chunk:I,encoding:L,isBuf:ba,callback:Q,next:null},V?V.next=Z.lastBufferedRequest:Z.bufferedRequest=Z.lastBufferedRequest,Z.bufferedRequestCount+=1):h(this,Z,!1,V,I,L,Q),ba=fa)}return ba};g.prototype.cork=function(){this._writableState.corked++};g.prototype.uncork=function(){var I=this._writableState;I.corked&&(I.corked--,I.writing||I.corked||I.bufferProcessing||!I.bufferedRequest||l(this,I))};g.prototype.setDefaultEncoding=
function(I){"string"===typeof I&&(I=I.toLowerCase());if(!(-1<"hex utf8 utf-8 ascii binary base64 ucs2 ucs-2 utf16le utf-16le raw".split(" ").indexOf((I+"").toLowerCase())))throw new M(I);this._writableState.defaultEncoding=I;return this};Object.defineProperty(g.prototype,"writableBuffer",{enumerable:!1,get:function(){return this._writableState&&this._writableState.getBuffer()}});Object.defineProperty(g.prototype,"writableHighWaterMark",{enumerable:!1,get:function(){return this._writableState.highWaterMark}});
g.prototype._write=function(I,L,Q){Q(new C("_write()"))};g.prototype._writev=null;g.prototype.end=function(I,L,Q){var Z=this._writableState;"function"===typeof I?(Q=I,L=I=null):"function"===typeof L&&(Q=L,L=null);null!==I&&void 0!==I&&this.write(I,L);Z.corked&&(Z.corked=1,this.uncork());if(!Z.ending){I=Q;Z.ending=!0;e(this,Z);if(I)if(Z.finished)p.nextTick(I);else this.once("finish",I);Z.ended=!0;this.writable=!1}return this};Object.defineProperty(g.prototype,"writableLength",{enumerable:!1,get:function(){return this._writableState.length}});
Object.defineProperty(g.prototype,"destroyed",{enumerable:!1,get:function(){return void 0===this._writableState?!1:this._writableState.destroyed},set:function(I){this._writableState&&(this._writableState.destroyed=I)}});g.prototype.destroy=z.destroy;g.prototype._undestroy=z.undestroy;g.prototype._destroy=function(I,L){L(I)}}).call(this)}).call(this,b("_process"),"undefined"!==typeof xe?xe:"undefined"!==typeof self?self:"undefined"!==typeof window?window:{})},{"../errors":570,"./_stream_duplex":571,
"./internal/streams/destroy":578,"./internal/streams/state":582,"./internal/streams/stream":583,_process:528,buffer:117,inherits:447,"util-deprecate":622}],576:[function(b,N,G){(function(p){(function(){function n(z,B,A){B in z?Object.defineProperty(z,B,{value:A,enumerable:!0,configurable:!0,writable:!0}):z[B]=A;return z}function k(z,B){return{value:z,done:B}}function m(z){var B=z[l];if(null!==B){var A=z[t].read();null!==A&&(z[f]=null,z[l]=null,z[c]=null,B(k(A,!1)))}}function a(z){p.nextTick(m,z)}
function g(z,B){return function(A,D){z.then(function(){if(B[e])A(k(void 0,!0));else B[q](A,D)},D)}}var h,r=b("./end-of-stream"),l=Symbol("lastResolve"),c=Symbol("lastReject"),d=Symbol("error"),e=Symbol("ended"),f=Symbol("lastPromise"),q=Symbol("handlePromise"),t=Symbol("stream"),w=Object.getPrototypeOf(function(){}),x=Object.setPrototypeOf((h={get stream(){return this[t]},next:function(){var z=this,B=this[d];if(null!==B)return Promise.reject(B);if(this[e])return Promise.resolve(k(void 0,!0));if(this[t].destroyed)return new Promise(function(A,
D){p.nextTick(function(){z[d]?D(z[d]):A(k(void 0,!0))})});if(B=this[f])B=new Promise(g(B,this));else{B=this[t].read();if(null!==B)return Promise.resolve(k(B,!1));B=new Promise(this[q])}return this[f]=B}},n(h,Symbol.asyncIterator,function(){return this}),n(h,"return",function(){var z=this;return new Promise(function(B,A){z[t].destroy(null,function(D){D?A(D):B(k(void 0,!0))})})}),h),w);N.exports=function(z){var B,A=Object.create(x,(B={},n(B,t,{value:z,writable:!0}),n(B,l,{value:null,writable:!0}),n(B,
c,{value:null,writable:!0}),n(B,d,{value:null,writable:!0}),n(B,e,{value:z._readableState.endEmitted,writable:!0}),n(B,q,{value:function(D,C){var v=A[t].read();v?(A[f]=null,A[l]=null,A[c]=null,D(k(v,!1))):(A[l]=D,A[c]=C)},writable:!0}),B));A[f]=null;r(z,function(D){if(D&&"ERR_STREAM_PREMATURE_CLOSE"!==D.code){var C=A[c];null!==C&&(A[f]=null,A[l]=null,A[c]=null,C(D));A[d]=D}else D=A[l],null!==D&&(A[f]=null,A[l]=null,A[c]=null,D(k(void 0,!0))),A[e]=!0});z.on("readable",a.bind(null,A));return A}}).call(this)}).call(this,
b("_process"))},{"./end-of-stream":579,_process:528}],577:[function(b,N,G){function p(r,l){var c=Object.keys(r);if(Object.getOwnPropertySymbols){var d=Object.getOwnPropertySymbols(r);l&&(d=d.filter(function(e){return Object.getOwnPropertyDescriptor(r,e).enumerable}));c.push.apply(c,d)}return c}function n(r){for(var l=1;l<arguments.length;l++){var c=null!=arguments[l]?arguments[l]:{};l%2?p(Object(c),!0).forEach(function(d){var e=c[d];d in r?Object.defineProperty(r,d,{value:e,enumerable:!0,configurable:!0,
writable:!0}):r[d]=e}):Object.getOwnPropertyDescriptors?Object.defineProperties(r,Object.getOwnPropertyDescriptors(c)):p(Object(c)).forEach(function(d){Object.defineProperty(r,d,Object.getOwnPropertyDescriptor(c,d))})}return r}function k(r,l){for(var c=0;c<l.length;c++){var d=l[c];d.enumerable=d.enumerable||!1;d.configurable=!0;"value"in d&&(d.writable=!0);Object.defineProperty(r,d.key,d)}}function m(r,l,c){l&&k(r.prototype,l);c&&k(r,c);return r}var a=b("buffer").Buffer,g=b("util").inspect,h=g&&g.custom||
"inspect";N.exports=function(){function r(){if(!(this instanceof r))throw new TypeError("Cannot call a class as a function");this.tail=this.head=null;this.length=0}m(r,[{key:"push",value:function(l){l={data:l,next:null};0<this.length?this.tail.next=l:this.head=l;this.tail=l;++this.length}},{key:"unshift",value:function(l){l={data:l,next:this.head};0===this.length&&(this.tail=l);this.head=l;++this.length}},{key:"shift",value:function(){if(0!==this.length){var l=this.head.data;this.head=1===this.length?
this.tail=null:this.head.next;--this.length;return l}}},{key:"clear",value:function(){this.head=this.tail=null;this.length=0}},{key:"join",value:function(l){if(0===this.length)return"";for(var c=this.head,d=""+c.data;c=c.next;)d+=l+c.data;return d}},{key:"concat",value:function(l){if(0===this.length)return a.alloc(0);l=a.allocUnsafe(l>>>0);for(var c=this.head,d=0;c;)a.prototype.copy.call(c.data,l,d),d+=c.data.length,c=c.next;return l}},{key:"consume",value:function(l,c){l<this.head.data.length?(c=
this.head.data.slice(0,l),this.head.data=this.head.data.slice(l)):c=l===this.head.data.length?this.shift():c?this._getString(l):this._getBuffer(l);return c}},{key:"first",value:function(){return this.head.data}},{key:"_getString",value:function(l){var c=this.head,d=1,e=c.data;for(l-=e.length;c=c.next;){var f=c.data,q=l>f.length?f.length:l;e=q===f.length?e+f:e+f.slice(0,l);l-=q;if(0===l){q===f.length?(++d,this.head=c.next?c.next:this.tail=null):(this.head=c,c.data=f.slice(q));break}++d}this.length-=
d;return e}},{key:"_getBuffer",value:function(l){var c=a.allocUnsafe(l),d=this.head,e=1;d.data.copy(c);for(l-=d.data.length;d=d.next;){var f=d.data,q=l>f.length?f.length:l;f.copy(c,c.length-l,0,q);l-=q;if(0===l){q===f.length?(++e,this.head=d.next?d.next:this.tail=null):(this.head=d,d.data=f.slice(q));break}++e}this.length-=e;return c}},{key:h,value:function(l,c){return g(this,n({},c,{depth:0,customInspect:!1}))}}]);return r}()},{buffer:117,util:115}],578:[function(b,N,G){(function(p){(function(){function n(a,
g){m(a,g);k(a)}function k(a){a._writableState&&!a._writableState.emitClose||a._readableState&&!a._readableState.emitClose||a.emit("close")}function m(a,g){a.emit("error",g)}N.exports={destroy:function(a,g){var h=this,r=this._writableState&&this._writableState.destroyed;if(this._readableState&&this._readableState.destroyed||r)return g?g(a):a&&(this._writableState?this._writableState.errorEmitted||(this._writableState.errorEmitted=!0,p.nextTick(m,this,a)):p.nextTick(m,this,a)),this;this._readableState&&
(this._readableState.destroyed=!0);this._writableState&&(this._writableState.destroyed=!0);this._destroy(a||null,function(l){!g&&l?h._writableState?h._writableState.errorEmitted?p.nextTick(k,h):(h._writableState.errorEmitted=!0,p.nextTick(n,h,l)):p.nextTick(n,h,l):g?(p.nextTick(k,h),g(l)):p.nextTick(k,h)});return this},undestroy:function(){this._readableState&&(this._readableState.destroyed=!1,this._readableState.reading=!1,this._readableState.ended=!1,this._readableState.endEmitted=!1);this._writableState&&
(this._writableState.destroyed=!1,this._writableState.ended=!1,this._writableState.ending=!1,this._writableState.finalCalled=!1,this._writableState.prefinished=!1,this._writableState.finished=!1,this._writableState.errorEmitted=!1)},errorOrDestroy:function(a,g){var h=a._readableState,r=a._writableState;h&&h.autoDestroy||r&&r.autoDestroy?a.destroy(g):a.emit("error",g)}}}).call(this)}).call(this,b("_process"))},{_process:528}],579:[function(b,N,G){function p(a){var g=!1;return function(){if(!g){g=!0;
for(var h=arguments.length,r=Array(h),l=0;l<h;l++)r[l]=arguments[l];a.apply(this,r)}}}function n(){}function k(a,g,h){if("function"===typeof g)return k(a,null,g);g||(g={});h=p(h||n);var r=g.readable||!1!==g.readable&&a.readable,l=g.writable||!1!==g.writable&&a.writable,c=function(){a.writable||e()},d=a._writableState&&a._writableState.finished,e=function(){l=!1;d=!0;r||h.call(a)},f=a._readableState&&a._readableState.endEmitted,q=function(){r=!1;f=!0;l||h.call(a)},t=function(z){h.call(a,z)},w=function(){var z;
if(r&&!f)return a._readableState&&a._readableState.ended||(z=new m),h.call(a,z);if(l&&!d)return a._writableState&&a._writableState.ended||(z=new m),h.call(a,z)},x=function(){a.req.on("finish",e)};if(a.setHeader&&"function"===typeof a.abort)if(a.on("complete",e),a.on("abort",w),a.req)x();else a.on("request",x);else l&&!a._writableState&&(a.on("end",c),a.on("close",c));a.on("end",q);a.on("finish",e);if(!1!==g.error)a.on("error",t);a.on("close",w);return function(){a.removeListener("complete",e);a.removeListener("abort",
w);a.removeListener("request",x);a.req&&a.req.removeListener("finish",e);a.removeListener("end",c);a.removeListener("close",c);a.removeListener("finish",e);a.removeListener("end",q);a.removeListener("error",t);a.removeListener("close",w)}}var m=b("../../../errors").codes.ERR_STREAM_PREMATURE_CLOSE;N.exports=k},{"../../../errors":570}],580:[function(b,N,G){N.exports=function(){throw Error("Readable.from is not available in the browser");}},{}],581:[function(b,N,G){function p(l){var c=!1;return function(){c||
(c=!0,l.apply(void 0,arguments))}}function n(l){if(l)throw l;}function k(l,c,d,e){e=p(e);var f=!1;l.on("close",function(){f=!0});void 0===g&&(g=b("./end-of-stream"));g(l,{readable:c,writable:d},function(t){if(t)return e(t);f=!0;e()});var q=!1;return function(t){if(!f&&!q){q=!0;if(l.setHeader&&"function"===typeof l.abort)return l.abort();if("function"===typeof l.destroy)return l.destroy();e(t||new r("pipe"))}}}function m(l){l()}function a(l,c){return l.pipe(c)}var g;G=b("../../../errors").codes;var h=
G.ERR_MISSING_ARGS,r=G.ERR_STREAM_DESTROYED;N.exports=function(){for(var l=arguments.length,c=Array(l),d=0;d<l;d++)c[d]=arguments[d];var e=c.length?"function"!==typeof c[c.length-1]?n:c.pop():n;Array.isArray(c[0])&&(c=c[0]);if(2>c.length)throw new h("streams");var f,q=c.map(function(t,w){var x=w<c.length-1;return k(t,x,0<w,function(z){f||(f=z);z&&q.forEach(m);x||(q.forEach(m),e(f))})});return c.reduce(a)}},{"../../../errors":570,"./end-of-stream":579}],582:[function(b,N,G){var p=b("../../../errors").codes.ERR_INVALID_OPT_VALUE;
N.exports={getHighWaterMark:function(n,k,m,a){k=null!=k.highWaterMark?k.highWaterMark:a?k[m]:null;if(null!=k){if(!isFinite(k)||Math.floor(k)!==k||0>k)throw new p(a?m:"highWaterMark",k);return Math.floor(k)}return n.objectMode?16:16384}}},{"../../../errors":570}],583:[function(b,N,G){N.exports=b("events").EventEmitter},{events:116}],584:[function(b,N,G){function p(q){if(!q)return"utf8";for(var t;;)switch(q){case "utf8":case "utf-8":return"utf8";case "ucs2":case "ucs-2":case "utf16le":case "utf-16le":return"utf16le";
case "latin1":case "binary":return"latin1";case "base64":case "ascii":case "hex":return q;default:if(t)return;q=(""+q).toLowerCase();t=!0}}function n(q){var t=p(q);if("string"!==typeof t&&(e.isEncoding===f||!f(q)))throw Error("Unknown encoding: "+q);this.encoding=t||q;switch(this.encoding){case "utf16le":this.text=g;this.end=h;q=4;break;case "utf8":this.fillLast=a;q=4;break;case "base64":this.text=r;this.end=l;q=3;break;default:this.write=c;this.end=d;return}this.lastTotal=this.lastNeed=0;this.lastChar=
e.allocUnsafe(q)}function k(q){return 127>=q?0:6===q>>5?2:14===q>>4?3:30===q>>3?4:2===q>>6?-1:-2}function m(q,t,w){var x=t.length-1;if(x<w)return 0;var z=k(t[x]);if(0<=z)return 0<z&&(q.lastNeed=z-1),z;if(--x<w||-2===z)return 0;z=k(t[x]);if(0<=z)return 0<z&&(q.lastNeed=z-2),z;if(--x<w||-2===z)return 0;z=k(t[x]);return 0<=z?(0<z&&(2===z?z=0:q.lastNeed=z-3),z):0}function a(q){var t=this.lastTotal-this.lastNeed;a:if(128!==(q[0]&192)){this.lastNeed=0;var w=""}else{if(1<this.lastNeed&&1<q.length){if(128!==
(q[1]&192)){this.lastNeed=1;w="";break a}if(2<this.lastNeed&&2<q.length&&128!==(q[2]&192)){this.lastNeed=2;w="";break a}}w=void 0}if(void 0!==w)return w;if(this.lastNeed<=q.length)return q.copy(this.lastChar,t,0,this.lastNeed),this.lastChar.toString(this.encoding,0,this.lastTotal);q.copy(this.lastChar,t,0,q.length);this.lastNeed-=q.length}function g(q,t){if(0===(q.length-t)%2){if(t=q.toString("utf16le",t)){var w=t.charCodeAt(t.length-1);if(55296<=w&&56319>=w)return this.lastNeed=2,this.lastTotal=
4,this.lastChar[0]=q[q.length-2],this.lastChar[1]=q[q.length-1],t.slice(0,-1)}return t}this.lastNeed=1;this.lastTotal=2;this.lastChar[0]=q[q.length-1];return q.toString("utf16le",t,q.length-1)}function h(q){q=q&&q.length?this.write(q):"";return this.lastNeed?q+this.lastChar.toString("utf16le",0,this.lastTotal-this.lastNeed):q}function r(q,t){var w=(q.length-t)%3;if(0===w)return q.toString("base64",t);this.lastNeed=3-w;this.lastTotal=3;1===w?this.lastChar[0]=q[q.length-1]:(this.lastChar[0]=q[q.length-
2],this.lastChar[1]=q[q.length-1]);return q.toString("base64",t,q.length-w)}function l(q){q=q&&q.length?this.write(q):"";return this.lastNeed?q+this.lastChar.toString("base64",0,3-this.lastNeed):q}function c(q){return q.toString(this.encoding)}function d(q){return q&&q.length?this.write(q):""}var e=b("safe-buffer").Buffer,f=e.isEncoding||function(q){q=""+q;switch(q&&q.toLowerCase()){case "hex":case "utf8":case "utf-8":case "ascii":case "binary":case "base64":case "ucs2":case "ucs-2":case "utf16le":case "utf-16le":case "raw":return!0;
default:return!1}};G.StringDecoder=n;n.prototype.write=function(q){if(0===q.length)return"";if(this.lastNeed){var t=this.fillLast(q);if(void 0===t)return"";var w=this.lastNeed;this.lastNeed=0}else w=0;return w<q.length?t?t+this.text(q,w):this.text(q,w):t||""};n.prototype.end=function(q){q=q&&q.length?this.write(q):"";return this.lastNeed?q+"":q};n.prototype.text=function(q,t){var w=m(this,q,t);if(!this.lastNeed)return q.toString("utf8",t);this.lastTotal=w;w=q.length-(w-this.lastNeed);q.copy(this.lastChar,
0,w);return q.toString("utf8",t,w)};n.prototype.fillLast=function(q){if(this.lastNeed<=q.length)return q.copy(this.lastChar,this.lastTotal-this.lastNeed,0,this.lastNeed),this.lastChar.toString(this.encoding,0,this.lastTotal);q.copy(this.lastChar,this.lastTotal-this.lastNeed,0,q.length);this.lastNeed-=q.length}},{"safe-buffer":554}],585:[function(b,N,G){(function(p,n){(function(){function k(B){f("initializing parser stream");B._parserBytesLeft=0;B._parserBuffers=[];B._parserBuffered=0;B._parserState=
q;B._parserCallback=null;"function"==typeof B.push&&(B._parserOutput=B.push.bind(B));B._parserInit=!0}function m(B,A){e(!this._parserCallback,'there is already a "callback" set!');e(isFinite(B)&&0<B,'can only buffer a finite number of bytes \x3e 0, got "'+B+'"');this._parserInit||k(this);f("buffering %o bytes",B);this._parserBytesLeft=B;this._parserCallback=A;this._parserState=t}function a(B,A){e(!this._parserCallback,'there is already a "callback" set!');e(0<B,'can only skip \x3e 0 bytes, got "'+
B+'"');this._parserInit||k(this);f("skipping %o bytes",B);this._parserBytesLeft=B;this._parserCallback=A;this._parserState=w}function g(B,A){e(!this._parserCallback,'There is already a "callback" set!');e(0<B,'can only pass through \x3e 0 bytes, got "'+B+'"');this._parserInit||k(this);f("passing through %o bytes",B);this._parserBytesLeft=B;this._parserCallback=A;this._parserState=x}function h(B,A,D){this._parserInit||k(this);f("write(%o bytes)",B.length);"function"==typeof A&&(D=A);z(this,B,null,
D)}function r(B,A,D){this._parserInit||k(this);f("transform(%o bytes)",B.length);"function"!=typeof A&&(A=this._parserOutput);z(this,B,A,D)}function l(B,A,D,C){return 0>=B._parserBytesLeft?C(Error("got data but not currently parsing anything")):A.length<=B._parserBytesLeft?function(){return c(B,A,D,C)}:function(){var v=A.slice(0,B._parserBytesLeft);return c(B,v,D,function(y){if(y)return C(y);if(A.length>v.length)return function(){return l(B,A.slice(v.length),D,C)}})}}function c(B,A,D,C){B._parserBytesLeft-=
A.length;f("%o bytes left for stream piece",B._parserBytesLeft);B._parserState===t?(B._parserBuffers.push(A),B._parserBuffered+=A.length):B._parserState===x&&D(A);if(0===B._parserBytesLeft){var v=B._parserCallback;v&&B._parserState===t&&1<B._parserBuffers.length&&(A=n.concat(B._parserBuffers,B._parserBuffered));B._parserState!==t&&(A=null);B._parserCallback=null;B._parserBuffered=0;B._parserState=q;B._parserBuffers.splice(0);if(v){var y=[];A&&y.push(A);D&&y.push(D);(A=v.length>y.length)&&y.push(d(C));
B=v.apply(B,y);if(!A||C===B)return C}}else return C}function d(B){return function(){for(var A=B.apply(this,arguments);"function"==typeof A;)A=A();return A}}var e=b("assert"),f=b("debug")("stream-parser");N.exports=function(B){var A=B&&"function"==typeof B._transform,D=B&&"function"==typeof B._write;if(!A&&!D)throw Error("must pass a Writable or Transform stream in");f("extending Parser into stream");B._bytes=m;B._skipBytes=a;A&&(B._passthrough=g);A?B._transform=r:B._write=h};var q=-1,t=0,w=1,x=2,
z=d(l)}).call(this)}).call(this,b("_process"),b("buffer").Buffer)},{_process:528,assert:80,buffer:117,debug:586}],586:[function(b,N,G){(function(p){(function(){function n(){try{var a=G.storage.debug}catch(g){}!a&&"undefined"!==typeof p&&"env"in p&&(a=p.env.DEBUG);return a}G=N.exports=b("./debug");G.log=function(){return"object"===typeof console&&console.log&&Function.prototype.apply.call(console.log,console,arguments)};G.formatArgs=function(a){var g=this.useColors;a[0]=(g?"%c":"")+this.namespace+
(g?" %c":" ")+a[0]+(g?"%c ":" ")+"+"+G.humanize(this.diff);if(g){g="color: "+this.color;a.splice(1,0,g,"color: inherit");var h=0,r=0;a[0].replace(/%[a-zA-Z%]/g,function(l){"%%"!==l&&(h++,"%c"===l&&(r=h))});a.splice(r,0,g)}};G.save=function(a){try{null==a?G.storage.removeItem("debug"):G.storage.debug=a}catch(g){}};G.load=n;G.useColors=function(){return"undefined"!==typeof window&&window.process&&"renderer"===window.process.type?!0:"undefined"!==typeof document&&document.documentElement&&document.documentElement.style&&
document.documentElement.style.WebkitAppearance||"undefined"!==typeof window&&window.console&&(window.console.firebug||window.console.exception&&window.console.table)||"undefined"!==typeof navigator&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/firefox\/(\d+)/)&&31<=parseInt(RegExp.$1,10)||"undefined"!==typeof navigator&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/applewebkit\/(\d+)/)};var k=G;if("undefined"!=typeof chrome&&"undefined"!=typeof chrome.storage)var m=
chrome.storage.local;else a:{try{m=window.localStorage;break a}catch(a){}m=void 0}k.storage=m;G.colors="lightseagreen forestgreen goldenrod dodgerblue darkorchid crimson".split(" ");G.formatters.j=function(a){try{return JSON.stringify(a)}catch(g){return"[UnexpectedJSONParseError]: "+g.message}};G.enable(n())}).call(this)}).call(this,b("_process"))},{"./debug":587,_process:528}],587:[function(b,N,G){function p(m){var a=0,g;for(g in m)a=(a<<5)-a+m.charCodeAt(g),a|=0;return G.colors[Math.abs(a)%G.colors.length]}
function n(m){function a(){if(a.enabled){var g=+new Date;a.diff=g-(k||g);a.prev=k;k=a.curr=g;var h=Array(arguments.length);for(g=0;g<h.length;g++)h[g]=arguments[g];h[0]=G.coerce(h[0]);"string"!==typeof h[0]&&h.unshift("%O");var r=0;h[0]=h[0].replace(/%([a-zA-Z%])/g,function(l,c){if("%%"===l)return l;r++;c=G.formatters[c];"function"===typeof c&&(l=c.call(a,h[r]),h.splice(r,1),r--);return l});G.formatArgs.call(a,h);(a.log||G.log||console.log.bind(console)).apply(a,h)}}a.namespace=m;a.enabled=G.enabled(m);
a.useColors=G.useColors();a.color=p(m);"function"===typeof G.init&&G.init(a);return a}G=N.exports=n.debug=n["default"]=n;G.coerce=function(m){return m instanceof Error?m.stack||m.message:m};G.disable=function(){G.enable("")};G.enable=function(m){G.save(m);G.names=[];G.skips=[];for(var a=("string"===typeof m?m:"").split(/[\s,]+/),g=a.length,h=0;h<g;h++)a[h]&&(m=a[h].replace(/\*/g,".*?"),"-"===m[0]?G.skips.push(new RegExp("^"+m.substr(1)+"$")):G.names.push(new RegExp("^"+m+"$")))};G.enabled=function(m){var a;
var g=0;for(a=G.skips.length;g<a;g++)if(G.skips[g].test(m))return!1;g=0;for(a=G.names.length;g<a;g++)if(G.names[g].test(m))return!0;return!1};G.humanize=b("ms");G.names=[];G.skips=[];G.formatters={};var k},{ms:588}],588:[function(b,N,G){function p(a){a=String(a);if(!(100<a.length)&&(a=/^((?:\d+)?\.?\d+) *(milliseconds?|msecs?|ms|seconds?|secs?|s|minutes?|mins?|m|hours?|hrs?|h|days?|d|years?|yrs?|y)?$/i.exec(a))){var g=parseFloat(a[1]);switch((a[2]||"ms").toLowerCase()){case "years":case "year":case "yrs":case "yr":case "y":return g*
m;case "days":case "day":case "d":return g*k;case "hours":case "hour":case "hrs":case "hr":case "h":return 36E5*g;case "minutes":case "minute":case "mins":case "min":case "m":return 6E4*g;case "seconds":case "second":case "secs":case "sec":case "s":return 1E3*g;case "milliseconds":case "millisecond":case "msecs":case "msec":case "ms":return g}}}function n(a,g,h){if(!(a<g))return a<1.5*g?Math.floor(a/g)+" "+h:Math.ceil(a/g)+" "+h+"s"}var k=864E5,m=365.25*k;N.exports=function(a,g){g=g||{};var h=typeof a;
if("string"===h&&0<a.length)return p(a);if("number"===h&&!1===isNaN(a))return g.long?n(a,k,"day")||n(a,36E5,"hour")||n(a,6E4,"minute")||n(a,1E3,"second")||a+" ms":a>=k?Math.round(a/k)+"d":36E5<=a?Math.round(a/36E5)+"h":6E4<=a?Math.round(a/6E4)+"m":1E3<=a?Math.round(a/1E3)+"s":a+"ms";throw Error("val is not a non-empty string or a valid number. val\x3d"+JSON.stringify(a));}},{}],589:[function(b,N,G){var p=b("parenthesis");N.exports=function(n,k,m){if(null==n)throw Error("First argument should be a string");
if(null==k)throw Error("Separator should be a string or a RegExp");if(!m)m={};else if("string"===typeof m||Array.isArray(m))m={ignore:m};null==m.escape&&(m.escape=!0);null==m.ignore?m.ignore="[] () {} \x3c\x3e \"\" '' ``  ".split(" "):("string"===typeof m.ignore&&(m.ignore=[m.ignore]),m.ignore=m.ignore.map(function(l){1===l.length&&(l+=l);return l}));n=p.parse(n,{flat:!0,brackets:m.ignore});var a=n[0].split(k);if(m.escape){m=[];for(var g=0;g<a.length;g++){var h=a[g],r=a[g+1];"\\"===h[h.length-
1]&&"\\"!==h[h.length-2]?(m.push(h+k+r),g++):m.push(h)}a=m}for(g=0;g<a.length;g++)n[0]=a[g],a[g]=p.stringify(n,{flat:!0});return a}},{parenthesis:491}],590:[function(b,N,G){N.exports=function(p){function n(w){var x=[w],z=[w];m[w]=a[w]=d;g[w]=!0;for(d+=1;0<z.length;){w=z[z.length-1];var B=p[w];if(h[w]<B.length){for(var A=h[w];A<B.length;++A){var D=B[A];if(0>m[D]){m[D]=a[D]=d;g[D]=!0;d+=1;x.push(D);z.push(D);break}else g[D]&&(a[w]=Math.min(a[w],a[D])|0);0<=r[D]&&l[w].push(r[D])}h[w]=A}else{if(a[w]===
m[w]){var C=[];B=[];D=0;for(A=x.length-1;0<=A;--A){var v=x[A];g[v]=!1;C.push(v);B.push(l[v]);D+=l[v].length;r[v]=e.length;if(v===w){x.length=A;break}}e.push(C);w=Array(D);for(A=0;A<B.length;A++)for(C=0;C<B[A].length;C++)w[--D]=B[A][C];f.push(w)}z.pop()}}}for(var k=p.length,m=Array(k),a=Array(k),g=Array(k),h=Array(k),r=Array(k),l=Array(k),c=0;c<k;++c)m[c]=-1,a[c]=0,g[c]=!1,h[c]=0,r[c]=-1,l[c]=[];var d=0,e=[],f=[];for(c=0;c<k;++c)0>m[c]&&n(c);for(c=0;c<f.length;c++){var q=f[c];if(0!==q.length){q.sort(function(w,
x){return w-x});k=[q[0]];for(var t=1;t<q.length;t++)q[t]!==q[t-1]&&k.push(q[t]);f[c]=k}}return{components:e,adjacencyList:f}}},{}],591:[function(b,N,G){function p(g,h){var r=g.length,l=["'use strict';"],c="surfaceNets"+g.join("_")+"d"+h;l.push("var contour\x3dgenContour({","order:[",g.join(),"],","scalarArguments: 3,","phase:function phaseFunc(p,a,b,c) { return (p \x3e c)|0 },");"generic"===h&&l.push("getters:[0],");var d=[];h=[];for(g=0;g<r;++g)d.push("d"+g),h.push("d"+g);for(g=0;g<1<<r;++g)d.push("v"+
g),h.push("v"+g);for(g=0;g<1<<r;++g)d.push("p"+g),h.push("p"+g);d.push("a","b","c");h.push("a","c");l.push("vertex:function vertexFunc(",d.join(),"){");d=[];for(g=0;g<1<<r;++g)d.push("(p"+g+"\x3c\x3c"+g+")");l.push("var m\x3d(",d.join("+"),")|0;if(m\x3d\x3d\x3d0||m\x3d\x3d\x3d",(1<<(1<<r))-1,"){return}");d=[];var e=[];128>=1<<(1<<r)?(l.push("switch(m){"),e=l):l.push("switch(m\x3e\x3e\x3e7){");for(g=0;g<1<<(1<<r);++g){128<1<<(1<<r)&&0===g%128&&(0<d.length&&e.push("}}"),e="vExtra"+d.length,l.push("case ",
g>>>7,":",e,"(m\x260x7f,",h.join(),");break;"),e=["function ",e,"(m,",h.join(),"){switch(m){"],d.push(e));e.push("case ",g&127,":");for(var f=Array(r),q=Array(r),t=Array(r),w=Array(r),x=0,z=0;z<r;++z)f[z]=[],q[z]=[],t[z]=0,w[z]=0;for(z=0;z<1<<r;++z)for(var B=0;B<r;++B){var A=z^1<<B;if(!(A>z)&&!(g&1<<A)!==!(g&1<<z)){var D=1;g&1<<A?q[B].push("v"+A+"-v"+z):(q[B].push("v"+z+"-v"+A),D=-D);0>D?(f[B].push("-v"+z+"-v"+A),t[B]+=2):(f[B].push("v"+z+"+v"+A),t[B]-=2);x+=1;for(D=0;D<r;++D)D!==B&&(A&1<<D?w[D]+=
1:--w[D])}}z=[];for(B=0;B<r;++B)0===f[B].length?z.push("d"+B+"-0.5"):(A="",0>t[B]?A=t[B]+"*c":0<t[B]&&(A="+"+t[B]+"*c"),z.push("d"+B+"-"+(.5+w[B]/x*.5)+"-"+f[B].length/x*.5+"*("+f[B].join("+")+A+")/("+q[B].join("+")+")"));e.push("a.push([",z.join(),"]);","break;")}l.push("}},");0<d.length&&e.push("}}");h=[];for(g=0;g<1<<r-1;++g)h.push("v"+g);h.push("c0","c1","p0","p1","a","b","c");l.push("cell:function cellFunc(",h.join(),"){");r=k(r-1);l.push("if(p0){b.push(",r.map(function(C){return"["+C.map(function(v){return"v"+
v})+"]"}).join(),")}else{b.push(",r.map(function(C){C=C.slice();C.reverse();return"["+C.map(function(v){return"v"+v})+"]"}).join(),")}}});function ",c,"(array,level){var verts\x3d[],cells\x3d[];contour(array,verts,cells,level);return {positions:verts,cells:cells};} return ",c,";");for(g=0;g<d.length;++g)l.push(d[g].join(""));return(new Function("genContour",l.join("")))(n)}N.exports=function(g,h){if(0>=g.dimension)return{positions:[],cells:[]};if(1===g.dimension){g=m(g,h);h=g.length;for(var r=Array(h),
l=Array(h),c=0;c<h;++c)r[c]=[g[c]],l[c]=[c];return{positions:r,cells:l}}r=g.order.join()+"-"+g.dtype;l=a[r];h=+h||0;l||(l=a[r]=p(g.order,g.dtype));return l(g,h)};var n=b("ndarray-extract-contour"),k=b("triangulate-hypercube"),m=b("zero-crossings"),a={}},{"ndarray-extract-contour":475,"triangulate-hypercube":602,"zero-crossings":647}],592:[function(b,N,G){Object.defineProperty(G,"__esModule",{value:!0});var p=function(){return function(h,r){if(Array.isArray(h))return h;if(Symbol.iterator in Object(h)){var l=
[],c=!0,d=!1,e=void 0;try{for(var f=h[Symbol.iterator](),q;!(c=(q=f.next()).done)&&(l.push(q.value),!r||l.length!==r);c=!0);}catch(t){d=!0,e=t}finally{try{if(!c&&f["return"])f["return"]()}finally{if(d)throw e;}}return l}throw new TypeError("Invalid attempt to destructure non-iterable instance");}}(),n=2*Math.PI,k=function(h,r,l,c,d,e,f){var q=h.x;h=h.y;q*=r;h*=l;return{x:c*q-d*h+e,y:d*q+c*h+f}},m=function(h,r){var l=1.5707963267948966===r?.551915024494:-1.5707963267948966===r?-.551915024494:4/3*Math.tan(r/
4),c=Math.cos(h),d=Math.sin(h),e=Math.cos(h+r);h=Math.sin(h+r);return[{x:c-d*l,y:d+c*l},{x:e+h*l,y:h-e*l},{x:e,y:h}]},a=function(h,r,l,c){var d=h*l+r*c;1<d&&(d=1);-1>d&&(d=-1);return(0>h*c-r*l?-1:1)*Math.acos(d)},g=function(h,r,l,c,d,e,f,q,t,w,x,z){var B=Math.pow(d,2),A=Math.pow(e,2),D=Math.pow(x,2),C=Math.pow(z,2),v=B*A-B*C-A*D;0>v&&(v=0);v=Math.sqrt(v/(B*C+A*D))*(f===q?-1:1);f=v*d/e*z;v=v*-e/d*x;h=w*f-t*v+(h+l)/2;r=t*f+w*v+(r+c)/2;c=(x-f)/d;t=(z-v)/e;d=(-x-f)/d;z=(-z-v)/e;e=a(1,0,c,t);z=a(c,t,d,
z);0===q&&0<z&&(z-=n);1===q&&0>z&&(z+=n);return[h,r,e,z]};G.default=function(h){var r=h.px,l=h.py,c=h.cx,d=h.cy,e=h.rx,f=h.ry,q=h.xAxisRotation,t=void 0===q?0:q;q=h.largeArcFlag;var w=h.sweepFlag;h=[];if(0===e||0===f)return[];var x=Math.sin(t*n/360),z=Math.cos(t*n/360);t=z*(r-c)/2+x*(l-d)/2;var B=-x*(r-c)/2+z*(l-d)/2;if(0===t&&0===B)return[];e=Math.abs(e);f=Math.abs(f);var A=Math.pow(t,2)/Math.pow(e,2)+Math.pow(B,2)/Math.pow(f,2);1<A&&(e*=Math.sqrt(A),f*=Math.sqrt(A));r=g(r,l,c,d,e,f,void 0===q?0:
q,void 0===w?0:w,x,z,t,B);l=p(r,4);var D=l[0],C=l[1];r=l[2];l=l[3];c=Math.abs(l)/(n/4);1E-7>Math.abs(1-c)&&(c=1);c=Math.max(Math.ceil(c),1);l/=c;for(d=0;d<c;d++)h.push(m(r,l)),r+=l;return h.map(function(v){var y=k(v[0],e,f,z,x,D,C),F=y.x;y=y.y;var J=k(v[1],e,f,z,x,D,C),K=J.x;J=J.y;v=k(v[2],e,f,z,x,D,C);return{x1:F,y1:y,x2:K,y2:J,x:v.x,y:v.y}})};N.exports=G.default},{}],593:[function(b,N,G){var p=b("parse-svg-path"),n=b("abs-svg-path"),k=b("normalize-svg-path"),m=b("is-svg-path"),a=b("assert");N.exports=
function(g){Array.isArray(g)&&1===g.length&&"string"===typeof g[0]&&(g=g[0]);"string"===typeof g&&(a(m(g),"String is not an SVG path."),g=p(g));a(Array.isArray(g),"Argument should be a string or an array of path segments.");g=n(g);g=k(g);if(!g.length)return[0,0,0,0];for(var h=[Infinity,Infinity,-Infinity,-Infinity],r=0,l=g.length;r<l;r++)for(var c=g[r].slice(1),d=0;d<c.length;d+=2)c[d+0]<h[0]&&(h[0]=c[d+0]),c[d+1]<h[1]&&(h[1]=c[d+1]),c[d+0]>h[2]&&(h[2]=c[d+0]),c[d+1]>h[3]&&(h[3]=c[d+1]);return h}},
{"abs-svg-path":71,assert:80,"is-svg-path":459,"normalize-svg-path":594,"parse-svg-path":493}],594:[function(b,N,G){function p(m,a,g,h){return["C",m,a,g,h,g,h]}function n(m,a,g,h,r,l){return["C",m/3+2/3*g,a/3+2/3*h,r/3+2/3*g,l/3+2/3*h,r,l]}N.exports=function(m){for(var a,g=[],h=0,r=0,l=0,c=0,d=null,e=null,f=0,q=0,t=0,w=m.length;t<w;t++){var x=m[t],z=x[0];switch(z){case "M":l=x[1];c=x[2];break;case "A":var B=k({px:f,py:q,cx:x[6],cy:x[7],rx:x[1],ry:x[2],xAxisRotation:x[3],largeArcFlag:x[4],sweepFlag:x[5]});
if(!B.length)continue;for(a=0;a<B.length;a++)x=B[a],x=["C",x.x1,x.y1,x.x2,x.y2,x.x,x.y],a<B.length-1&&g.push(x);break;case "S":B=f;if("C"==a||"S"==a)B+=B-h,q+=q-r;x=["C",B,q,x[1],x[2],x[3],x[4]];break;case "T":"Q"==a||"T"==a?(d=2*f-d,e=2*q-e):(d=f,e=q);x=n(f,q,d,e,x[1],x[2]);break;case "Q":d=x[1];e=x[2];x=n(f,q,x[1],x[2],x[3],x[4]);break;case "L":x=p(f,q,x[1],x[2]);break;case "H":x=p(f,q,x[1],q);break;case "V":x=p(f,q,f,x[1]);break;case "Z":x=p(f,q,l,c)}a=z;f=x[x.length-2];q=x[x.length-1];4<x.length?
(h=x[x.length-4],r=x[x.length-3]):(h=f,r=q);g.push(x)}return g};var k=b("svg-arc-to-cubic-bezier")},{"svg-arc-to-cubic-bezier":592}],595:[function(b,N,G){function p(){if(null!=l)return l;var c=document.createElement("canvas").getContext("2d");c.canvas.width=c.canvas.height=1;if(!window.Path2D)return l=!1;var d=new Path2D("M0,0h1v1h-1v-1Z");c.fillStyle="black";c.fill(d);return l=(c=c.getImageData(0,0,1,1))&&c.data&&255===c.data[3]}var n=b("svg-path-bounds"),k=b("parse-svg-path"),m=b("draw-svg-path"),
a=b("is-svg-path"),g=b("bitmap-sdf"),h=document.createElement("canvas"),r=h.getContext("2d");N.exports=function(c,d){if(!a(c))throw Error("Argument should be valid svg path string");d||(d={});if(d.shape){var e=d.shape[0];var f=d.shape[1]}else e=h.width=d.w||d.width||200,f=h.height=d.h||d.height||200;var q=Math.min(e,f),t=d.stroke||0,w=d.viewbox||d.viewBox||n(c);w=[e/(w[2]-w[0]),f/(w[3]-w[1])];w=Math.min(w[0]||0,w[1]||0)/2;r.fillStyle="black";r.fillRect(0,0,e,f);r.fillStyle="white";t&&("number"!=typeof t&&
(t=1),r.strokeStyle=0<t?"white":"black",r.lineWidth=Math.abs(t));r.translate(.5*e,.5*f);r.scale(w,w);p()?(c=new Path2D(c),r.fill(c),t&&r.stroke(c)):(c=k(c),m(r,c),r.fill(),t&&r.stroke());r.setTransform(1,0,0,1,0,0);return g(r,{cutoff:null!=d.cutoff?d.cutoff:.5,radius:null!=d.radius?d.radius:.5*q})};var l},{"bitmap-sdf":105,"draw-svg-path":183,"is-svg-path":459,"parse-svg-path":493,"svg-path-bounds":593}],596:[function(b,N,G){(function(p){(function(){function n(g,h,r){r=r||{};var l=a[g];l||(l=a[g]=
{" ":{data:new Float32Array(0),shape:.2}});var c=l[h];if(!c)if(1>=h.length||!/\d/.test(h)){c=k(h,{triangles:!0,font:g,textAlign:r.textAlign||"left",textBaseline:"alphabetic",styletags:{breaklines:!0,bolds:!0,italics:!0,subscripts:!0,superscripts:!0}});r=c.cells;c=c.positions;for(var d=new Float32Array(6*r.length),e=g=0,f=0;f<r.length;++f)for(var q=r[f],t=0;3>t;++t){var w=c[q[t]];d[g++]=w[0];d[g++]=w[1]+1.4;e=Math.max(w[0],e)}c=l[h]={data:d,shape:e}}else{e=h.split(/(\d|\s)/);r=Array(e.length);for(d=
c=f=0;d<e.length;++d)r[d]=n(g,e[d]),f+=r[d].data.length,c+=r[d].shape,0<d&&(c+=.02);g=new Float32Array(f);e=0;f=-.5*c;for(d=0;d<r.length;++d){q=r[d].data;for(t=0;t<q.length;t+=2)g[e++]=q[t]+f,g[e++]=q[t+1];f+=r[d].shape+.02}c=l[h]={data:g,shape:c}}return c}N.exports=n;var k=b("vectorize-text"),m=window||p.global||{},a=m.__TEXT_CACHE||{};m.__TEXT_CACHE={}}).call(this)}).call(this,b("_process"))},{_process:528,"vectorize-text":623}],597:[function(b,N,G){(function(p,n){(function(){function k(l,c){this._id=
l;this._clearFn=c}var m=b("process/browser.js").nextTick,a=Function.prototype.apply,g=Array.prototype.slice,h={},r=0;G.setTimeout=function(){return new k(a.call(setTimeout,window,arguments),clearTimeout)};G.setInterval=function(){return new k(a.call(setInterval,window,arguments),clearInterval)};G.clearTimeout=G.clearInterval=function(l){l.close()};k.prototype.unref=k.prototype.ref=function(){};k.prototype.close=function(){this._clearFn.call(window,this._id)};G.enroll=function(l,c){clearTimeout(l._idleTimeoutId);
l._idleTimeout=c};G.unenroll=function(l){clearTimeout(l._idleTimeoutId);l._idleTimeout=-1};G._unrefActive=G.active=function(l){clearTimeout(l._idleTimeoutId);var c=l._idleTimeout;0<=c&&(l._idleTimeoutId=setTimeout(function(){l._onTimeout&&l._onTimeout()},c))};G.setImmediate="function"===typeof p?p:function(l){var c=r++,d=2>arguments.length?!1:g.call(arguments,1);h[c]=!0;m(function(){h[c]&&(d?l.apply(null,d):l.call(null),G.clearImmediate(c))});return c};G.clearImmediate="function"===typeof n?n:function(l){delete h[l]}}).call(this)}).call(this,
b("timers").setImmediate,b("timers").clearImmediate)},{"process/browser.js":528,timers:597}],598:[function(b,N,G){(function(p){function n(V,S){var T,fa;V=V?V:"";S=S||{};if(V instanceof n)return V;if(!(this instanceof n))return new n(V,S);var W=V;var aa={r:0,g:0,b:0};var ja=1;var ma=T=!1;if("string"==typeof W)a:{W=W.replace(J,"").replace(K,"").toLowerCase();var ia=!1;if(Q[W])W=Q[W],ia=!0;else if("transparent"==W){W={r:0,g:0,b:0,a:0,format:"name"};break a}W=(fa=ba.rgb.exec(W))?{r:fa[1],g:fa[2],b:fa[3]}:
(fa=ba.rgba.exec(W))?{r:fa[1],g:fa[2],b:fa[3],a:fa[4]}:(fa=ba.hsl.exec(W))?{h:fa[1],s:fa[2],l:fa[3]}:(fa=ba.hsla.exec(W))?{h:fa[1],s:fa[2],l:fa[3],a:fa[4]}:(fa=ba.hsv.exec(W))?{h:fa[1],s:fa[2],v:fa[3]}:(fa=ba.hsva.exec(W))?{h:fa[1],s:fa[2],v:fa[3],a:fa[4]}:(fa=ba.hex8.exec(W))?{r:parseInt(fa[1],16),g:parseInt(fa[2],16),b:parseInt(fa[3],16),a:parseInt(fa[4],16)/255,format:ia?"name":"hex8"}:(fa=ba.hex6.exec(W))?{r:parseInt(fa[1],16),g:parseInt(fa[2],16),b:parseInt(fa[3],16),format:ia?"name":"hex"}:
(fa=ba.hex4.exec(W))?{r:parseInt(fa[1]+""+fa[1],16),g:parseInt(fa[2]+""+fa[2],16),b:parseInt(fa[3]+""+fa[3],16),a:parseInt(fa[4]+""+fa[4],16)/255,format:ia?"name":"hex8"}:(fa=ba.hex3.exec(W))?{r:parseInt(fa[1]+""+fa[1],16),g:parseInt(fa[2]+""+fa[2],16),b:parseInt(fa[3]+""+fa[3],16),format:ia?"name":"hex"}:!1}if("object"==typeof W){if(F(W.r)&&F(W.g)&&F(W.b))aa=W.g,T=W.b,aa={r:255*C(W.r,255),g:255*C(aa,255),b:255*C(T,255)},T=!0,ma="%"===String(W.r).substr(-1)?"prgb":"rgb";else if(F(W.h)&&F(W.s)&&F(W.v)){aa=
y(W.s);ma=y(W.v);fa=W.h;T=aa;aa=ma;fa=6*C(fa,360);T=C(T,100);aa=C(aa,100);ma=p.floor(fa);var ra=fa-ma;fa=aa*(1-T);ia=aa*(1-ra*T);T=aa*(1-(1-ra)*T);ma%=6;aa={r:255*[aa,ia,fa,fa,T,aa][ma],g:255*[T,aa,aa,ia,fa,fa][ma],b:255*[fa,fa,T,aa,aa,ia][ma]};T=!0;ma="hsv"}else F(W.h)&&F(W.s)&&F(W.l)&&(aa=y(W.s),T=y(W.l),aa=m(W.h,aa,T),T=!0,ma="hsl");W.hasOwnProperty("a")&&(ja=W.a)}ja=D(ja);W=W.format||ma;ma=O(255,I(aa.r,0));fa=O(255,I(aa.g,0));aa=O(255,I(aa.b,0));this._originalInput=V;this._r=ma;this._g=fa;this._b=
aa;this._a=ja;this._roundA=H(100*this._a)/100;this._format=S.format||W;this._gradientType=S.gradientType;1>this._r&&(this._r=H(this._r));1>this._g&&(this._g=H(this._g));1>this._b&&(this._b=H(this._b));this._ok=T;this._tc_id=M++}function k(V,S,T){V=C(V,255);S=C(S,255);T=C(T,255);var fa=I(V,S,T),W=O(V,S,T),aa=(fa+W)/2;if(fa==W)var ja=W=0;else{var ma=fa-W;W=.5<aa?ma/(2-fa-W):ma/(fa+W);switch(fa){case V:ja=(S-T)/ma+(S<T?6:0);break;case S:ja=(T-V)/ma+2;break;case T:ja=(V-S)/ma+4}ja/=6}return{h:ja,s:W,
l:aa}}function m(V,S,T){function fa(ja,ma,ia){0>ia&&(ia+=1);1<ia&&--ia;return ia<1/6?ja+6*(ma-ja)*ia:.5>ia?ma:ia<2/3?ja+(ma-ja)*(2/3-ia)*6:ja}V=C(V,360);S=C(S,100);T=C(T,100);if(0===S)T=S=V=T;else{var W=.5>T?T*(1+S):T+S-T*S,aa=2*T-W;T=fa(aa,W,V+1/3);S=fa(aa,W,V);V=fa(aa,W,V-1/3)}return{r:255*T,g:255*S,b:255*V}}function a(V,S,T){V=C(V,255);S=C(S,255);T=C(T,255);var fa=I(V,S,T),W=O(V,S,T),aa=fa-W;if(fa==W)var ja=0;else{switch(fa){case V:ja=(S-T)/aa+(S<T?6:0);break;case S:ja=(T-V)/aa+2;break;case T:ja=
(V-S)/aa+4}ja/=6}return{h:ja,s:0===fa?0:aa/fa,v:fa}}function g(V,S,T,fa){V=[v(H(V).toString(16)),v(H(S).toString(16)),v(H(T).toString(16))];return fa&&V[0].charAt(0)==V[0].charAt(1)&&V[1].charAt(0)==V[1].charAt(1)&&V[2].charAt(0)==V[2].charAt(1)?V[0].charAt(0)+V[1].charAt(0)+V[2].charAt(0):V.join("")}function h(V,S,T,fa){return[v(p.round(255*parseFloat(fa)).toString(16)),v(H(V).toString(16)),v(H(S).toString(16)),v(H(T).toString(16))].join("")}function r(V,S){S=0===S?0:S||10;V=n(V).toHsl();V.s-=S/
100;V.s=O(1,I(0,V.s));return n(V)}function l(V,S){S=0===S?0:S||10;V=n(V).toHsl();V.s+=S/100;V.s=O(1,I(0,V.s));return n(V)}function c(V){return n(V).desaturate(100)}function d(V,S){S=0===S?0:S||10;V=n(V).toHsl();V.l+=S/100;V.l=O(1,I(0,V.l));return n(V)}function e(V,S){S=0===S?0:S||10;V=n(V).toRgb();V.r=I(0,O(255,V.r-H(255*-(S/100))));V.g=I(0,O(255,V.g-H(255*-(S/100))));V.b=I(0,O(255,V.b-H(255*-(S/100))));return n(V)}function f(V,S){S=0===S?0:S||10;V=n(V).toHsl();V.l-=S/100;V.l=O(1,I(0,V.l));return n(V)}
function q(V,S){V=n(V).toHsl();S=(V.h+S)%360;V.h=0>S?360+S:S;return n(V)}function t(V){V=n(V).toHsl();V.h=(V.h+180)%360;return n(V)}function w(V){var S=n(V).toHsl(),T=S.h;return[n(V),n({h:(T+120)%360,s:S.s,l:S.l}),n({h:(T+240)%360,s:S.s,l:S.l})]}function x(V){var S=n(V).toHsl(),T=S.h;return[n(V),n({h:(T+90)%360,s:S.s,l:S.l}),n({h:(T+180)%360,s:S.s,l:S.l}),n({h:(T+270)%360,s:S.s,l:S.l})]}function z(V){var S=n(V).toHsl(),T=S.h;return[n(V),n({h:(T+72)%360,s:S.s,l:S.l}),n({h:(T+216)%360,s:S.s,l:S.l})]}
function B(V,S,T){S=S||6;T=T||30;var fa=n(V).toHsl();T=360/T;V=[n(V)];for(fa.h=(fa.h-(T*S>>1)+720)%360;--S;)fa.h=(fa.h+T)%360,V.push(n(fa));return V}function A(V,S){S=S||6;var T=n(V).toHsv();V=T.h;var fa=T.s;T=T.v;for(var W=[],aa=1/S;S--;)W.push(n({h:V,s:fa,v:T})),T=(T+aa)%1;return W}function D(V){V=parseFloat(V);if(isNaN(V)||0>V||1<V)V=1;return V}function C(V,S){var T=V;"string"==typeof T&&-1!=T.indexOf(".")&&1===parseFloat(T)&&(V="100%");T="string"===typeof V&&-1!=V.indexOf("%");V=O(S,I(0,parseFloat(V)));
T&&(V=parseInt(V*S,10)/100);return 1E-6>p.abs(V-S)?1:V%S/parseFloat(S)}function v(V){return 1==V.length?"0"+V:""+V}function y(V){1>=V&&(V=100*V+"%");return V}function F(V){return!!ba.CSS_UNIT.exec(V)}var J=/^\s+/,K=/\s+$/,M=0,H=p.round,O=p.min,I=p.max,L=p.random;n.prototype={isDark:function(){return 128>this.getBrightness()},isLight:function(){return!this.isDark()},isValid:function(){return this._ok},getOriginalInput:function(){return this._originalInput},getFormat:function(){return this._format},
getAlpha:function(){return this._a},getBrightness:function(){var V=this.toRgb();return(299*V.r+587*V.g+114*V.b)/1E3},getLuminance:function(){var V=this.toRgb();var S=V.r/255;var T=V.g/255;V=V.b/255;S=.03928>=S?S/12.92:p.pow((S+.055)/1.055,2.4);T=.03928>=T?T/12.92:p.pow((T+.055)/1.055,2.4);V=.03928>=V?V/12.92:p.pow((V+.055)/1.055,2.4);return.2126*S+.7152*T+.0722*V},setAlpha:function(V){this._a=D(V);this._roundA=H(100*this._a)/100;return this},toHsv:function(){var V=a(this._r,this._g,this._b);return{h:360*
V.h,s:V.s,v:V.v,a:this._a}},toHsvString:function(){var V=a(this._r,this._g,this._b),S=H(360*V.h),T=H(100*V.s);V=H(100*V.v);return 1==this._a?"hsv("+S+", "+T+"%, "+V+"%)":"hsva("+S+", "+T+"%, "+V+"%, "+this._roundA+")"},toHsl:function(){var V=k(this._r,this._g,this._b);return{h:360*V.h,s:V.s,l:V.l,a:this._a}},toHslString:function(){var V=k(this._r,this._g,this._b),S=H(360*V.h),T=H(100*V.s);V=H(100*V.l);return 1==this._a?"hsl("+S+", "+T+"%, "+V+"%)":"hsla("+S+", "+T+"%, "+V+"%, "+this._roundA+")"},
toHex:function(V){return g(this._r,this._g,this._b,V)},toHexString:function(V){return"#"+this.toHex(V)},toHex8:function(V){var S=this._g,T=this._b,fa=this._a;S=[v(H(this._r).toString(16)),v(H(S).toString(16)),v(H(T).toString(16)),v(p.round(255*parseFloat(fa)).toString(16))];V=V&&S[0].charAt(0)==S[0].charAt(1)&&S[1].charAt(0)==S[1].charAt(1)&&S[2].charAt(0)==S[2].charAt(1)&&S[3].charAt(0)==S[3].charAt(1)?S[0].charAt(0)+S[1].charAt(0)+S[2].charAt(0)+S[3].charAt(0):S.join("");return V},toHex8String:function(V){return"#"+
this.toHex8(V)},toRgb:function(){return{r:H(this._r),g:H(this._g),b:H(this._b),a:this._a}},toRgbString:function(){return 1==this._a?"rgb("+H(this._r)+", "+H(this._g)+", "+H(this._b)+")":"rgba("+H(this._r)+", "+H(this._g)+", "+H(this._b)+", "+this._roundA+")"},toPercentageRgb:function(){return{r:H(100*C(this._r,255))+"%",g:H(100*C(this._g,255))+"%",b:H(100*C(this._b,255))+"%",a:this._a}},toPercentageRgbString:function(){return 1==this._a?"rgb("+H(100*C(this._r,255))+"%, "+H(100*C(this._g,255))+"%, "+
H(100*C(this._b,255))+"%)":"rgba("+H(100*C(this._r,255))+"%, "+H(100*C(this._g,255))+"%, "+H(100*C(this._b,255))+"%, "+this._roundA+")"},toName:function(){return 0===this._a?"transparent":1>this._a?!1:Z[g(this._r,this._g,this._b,!0)]||!1},toFilter:function(V){var S="#"+h(this._r,this._g,this._b,this._a),T=S,fa=this._gradientType?"GradientType \x3d 1, ":"";V&&(V=n(V),T="#"+h(V._r,V._g,V._b,V._a));return"progid:DXImageTransform.Microsoft.gradient("+fa+"startColorstr\x3d"+S+",endColorstr\x3d"+T+")"},
toString:function(V){var S=!!V;V=V||this._format;var T=!1,fa=1>this._a&&0<=this._a;if(!S&&fa&&("hex"===V||"hex6"===V||"hex3"===V||"hex4"===V||"hex8"===V||"name"===V))return"name"===V&&0===this._a?this.toName():this.toRgbString();"rgb"===V&&(T=this.toRgbString());"prgb"===V&&(T=this.toPercentageRgbString());if("hex"===V||"hex6"===V)T=this.toHexString();"hex3"===V&&(T=this.toHexString(!0));"hex4"===V&&(T=this.toHex8String(!0));"hex8"===V&&(T=this.toHex8String());"name"===V&&(T=this.toName());"hsl"===
V&&(T=this.toHslString());"hsv"===V&&(T=this.toHsvString());return T||this.toHexString()},clone:function(){return n(this.toString())},_applyModification:function(V,S){V=V.apply(null,[this].concat([].slice.call(S)));this._r=V._r;this._g=V._g;this._b=V._b;this.setAlpha(V._a);return this},lighten:function(){return this._applyModification(d,arguments)},brighten:function(){return this._applyModification(e,arguments)},darken:function(){return this._applyModification(f,arguments)},desaturate:function(){return this._applyModification(r,
arguments)},saturate:function(){return this._applyModification(l,arguments)},greyscale:function(){return this._applyModification(c,arguments)},spin:function(){return this._applyModification(q,arguments)},_applyCombination:function(V,S){return V.apply(null,[this].concat([].slice.call(S)))},analogous:function(){return this._applyCombination(B,arguments)},complement:function(){return this._applyCombination(t,arguments)},monochromatic:function(){return this._applyCombination(A,arguments)},splitcomplement:function(){return this._applyCombination(z,
arguments)},triad:function(){return this._applyCombination(w,arguments)},tetrad:function(){return this._applyCombination(x,arguments)}};n.fromRatio=function(V,S){if("object"==typeof V){var T={},fa;for(fa in V)V.hasOwnProperty(fa)&&(T[fa]="a"===fa?V[fa]:y(V[fa]));V=T}return n(V,S)};n.equals=function(V,S){return V&&S?n(V).toRgbString()==n(S).toRgbString():!1};n.random=function(){return n.fromRatio({r:L(),g:L(),b:L()})};n.mix=function(V,S,T){T=0===T?0:T||50;V=n(V).toRgb();S=n(S).toRgb();T/=100;return n({r:(S.r-
V.r)*T+V.r,g:(S.g-V.g)*T+V.g,b:(S.b-V.b)*T+V.b,a:(S.a-V.a)*T+V.a})};n.readability=function(V,S){V=n(V);S=n(S);return(p.max(V.getLuminance(),S.getLuminance())+.05)/(p.min(V.getLuminance(),S.getLuminance())+.05)};n.isReadable=function(V,S,T){V=n.readability(V,S);S=!1;var fa=T||{level:"AA",size:"small"};T=(fa.level||"AA").toUpperCase();fa=(fa.size||"small").toLowerCase();"AA"!==T&&"AAA"!==T&&(T="AA");"small"!==fa&&"large"!==fa&&(fa="small");switch(T+fa){case "AAsmall":case "AAAlarge":S=4.5<=V;break;
case "AAlarge":S=3<=V;break;case "AAAsmall":S=7<=V}return S};n.mostReadable=function(V,S,T){var fa=null,W=0;T=T||{};var aa=T.includeFallbackColors;var ja=T.level;var ma=T.size;for(var ia=0;ia<S.length;ia++){var ra=n.readability(V,S[ia]);ra>W&&(W=ra,fa=n(S[ia]))}if(n.isReadable(V,fa,{level:ja,size:ma})||!aa)return fa;T.includeFallbackColors=!1;return n.mostReadable(V,["#fff","#000"],T)};var Q=n.names={aliceblue:"f0f8ff",antiquewhite:"faebd7",aqua:"0ff",aquamarine:"7fffd4",azure:"f0ffff",beige:"f5f5dc",
bisque:"ffe4c4",black:"000",blanchedalmond:"ffebcd",blue:"00f",blueviolet:"8a2be2",brown:"a52a2a",burlywood:"deb887",burntsienna:"ea7e5d",cadetblue:"5f9ea0",chartreuse:"7fff00",chocolate:"d2691e",coral:"ff7f50",cornflowerblue:"6495ed",cornsilk:"fff8dc",crimson:"dc143c",cyan:"0ff",darkblue:"00008b",darkcyan:"008b8b",darkgoldenrod:"b8860b",darkgray:"a9a9a9",darkgreen:"006400",darkgrey:"a9a9a9",darkkhaki:"bdb76b",darkmagenta:"8b008b",darkolivegreen:"556b2f",darkorange:"ff8c00",darkorchid:"9932cc",darkred:"8b0000",
darksalmon:"e9967a",darkseagreen:"8fbc8f",darkslateblue:"483d8b",darkslategray:"2f4f4f",darkslategrey:"2f4f4f",darkturquoise:"00ced1",darkviolet:"9400d3",deeppink:"ff1493",deepskyblue:"00bfff",dimgray:"696969",dimgrey:"696969",dodgerblue:"1e90ff",firebrick:"b22222",floralwhite:"fffaf0",forestgreen:"228b22",fuchsia:"f0f",gainsboro:"dcdcdc",ghostwhite:"f8f8ff",gold:"ffd700",goldenrod:"daa520",gray:"808080",green:"008000",greenyellow:"adff2f",grey:"808080",honeydew:"f0fff0",hotpink:"ff69b4",indianred:"cd5c5c",
indigo:"4b0082",ivory:"fffff0",khaki:"f0e68c",lavender:"e6e6fa",lavenderblush:"fff0f5",lawngreen:"7cfc00",lemonchiffon:"fffacd",lightblue:"add8e6",lightcoral:"f08080",lightcyan:"e0ffff",lightgoldenrodyellow:"fafad2",lightgray:"d3d3d3",lightgreen:"90ee90",lightgrey:"d3d3d3",lightpink:"ffb6c1",lightsalmon:"ffa07a",lightseagreen:"20b2aa",lightskyblue:"87cefa",lightslategray:"789",lightslategrey:"789",lightsteelblue:"b0c4de",lightyellow:"ffffe0",lime:"0f0",limegreen:"32cd32",linen:"faf0e6",magenta:"f0f",
maroon:"800000",mediumaquamarine:"66cdaa",mediumblue:"0000cd",mediumorchid:"ba55d3",mediumpurple:"9370db",mediumseagreen:"3cb371",mediumslateblue:"7b68ee",mediumspringgreen:"00fa9a",mediumturquoise:"48d1cc",mediumvioletred:"c71585",midnightblue:"191970",mintcream:"f5fffa",mistyrose:"ffe4e1",moccasin:"ffe4b5",navajowhite:"ffdead",navy:"000080",oldlace:"fdf5e6",olive:"808000",olivedrab:"6b8e23",orange:"ffa500",orangered:"ff4500",orchid:"da70d6",palegoldenrod:"eee8aa",palegreen:"98fb98",paleturquoise:"afeeee",
palevioletred:"db7093",papayawhip:"ffefd5",peachpuff:"ffdab9",peru:"cd853f",pink:"ffc0cb",plum:"dda0dd",powderblue:"b0e0e6",purple:"800080",rebeccapurple:"663399",red:"f00",rosybrown:"bc8f8f",royalblue:"4169e1",saddlebrown:"8b4513",salmon:"fa8072",sandybrown:"f4a460",seagreen:"2e8b57",seashell:"fff5ee",sienna:"a0522d",silver:"c0c0c0",skyblue:"87ceeb",slateblue:"6a5acd",slategray:"708090",slategrey:"708090",snow:"fffafa",springgreen:"00ff7f",steelblue:"4682b4",tan:"d2b48c",teal:"008080",thistle:"d8bfd8",
tomato:"ff6347",turquoise:"40e0d0",violet:"ee82ee",wheat:"f5deb3",white:"fff",whitesmoke:"f5f5f5",yellow:"ff0",yellowgreen:"9acd32"},Z=n.hexNames=function(V){var S={},T;for(T in V)V.hasOwnProperty(T)&&(S[V[T]]=T);return S}(Q),ba={CSS_UNIT:/(?:[-\+]?\d*\.\d+%?)|(?:[-\+]?\d+%?)/,rgb:/rgb[\s|\(]+((?:[-\+]?\d*\.\d+%?)|(?:[-\+]?\d+%?))[,|\s]+((?:[-\+]?\d*\.\d+%?)|(?:[-\+]?\d+%?))[,|\s]+((?:[-\+]?\d*\.\d+%?)|(?:[-\+]?\d+%?))\s*\)?/,rgba:/rgba[\s|\(]+((?:[-\+]?\d*\.\d+%?)|(?:[-\+]?\d+%?))[,|\s]+((?:[-\+]?\d*\.\d+%?)|(?:[-\+]?\d+%?))[,|\s]+((?:[-\+]?\d*\.\d+%?)|(?:[-\+]?\d+%?))[,|\s]+((?:[-\+]?\d*\.\d+%?)|(?:[-\+]?\d+%?))\s*\)?/,
hsl:/hsl[\s|\(]+((?:[-\+]?\d*\.\d+%?)|(?:[-\+]?\d+%?))[,|\s]+((?:[-\+]?\d*\.\d+%?)|(?:[-\+]?\d+%?))[,|\s]+((?:[-\+]?\d*\.\d+%?)|(?:[-\+]?\d+%?))\s*\)?/,hsla:/hsla[\s|\(]+((?:[-\+]?\d*\.\d+%?)|(?:[-\+]?\d+%?))[,|\s]+((?:[-\+]?\d*\.\d+%?)|(?:[-\+]?\d+%?))[,|\s]+((?:[-\+]?\d*\.\d+%?)|(?:[-\+]?\d+%?))[,|\s]+((?:[-\+]?\d*\.\d+%?)|(?:[-\+]?\d+%?))\s*\)?/,hsv:/hsv[\s|\(]+((?:[-\+]?\d*\.\d+%?)|(?:[-\+]?\d+%?))[,|\s]+((?:[-\+]?\d*\.\d+%?)|(?:[-\+]?\d+%?))[,|\s]+((?:[-\+]?\d*\.\d+%?)|(?:[-\+]?\d+%?))\s*\)?/,
hsva:/hsva[\s|\(]+((?:[-\+]?\d*\.\d+%?)|(?:[-\+]?\d+%?))[,|\s]+((?:[-\+]?\d*\.\d+%?)|(?:[-\+]?\d+%?))[,|\s]+((?:[-\+]?\d*\.\d+%?)|(?:[-\+]?\d+%?))[,|\s]+((?:[-\+]?\d*\.\d+%?)|(?:[-\+]?\d+%?))\s*\)?/,hex3:/^#?([0-9a-fA-F]{1})([0-9a-fA-F]{1})([0-9a-fA-F]{1})$/,hex6:/^#?([0-9a-fA-F]{2})([0-9a-fA-F]{2})([0-9a-fA-F]{2})$/,hex4:/^#?([0-9a-fA-F]{1})([0-9a-fA-F]{1})([0-9a-fA-F]{1})([0-9a-fA-F]{1})$/,hex8:/^#?([0-9a-fA-F]{2})([0-9a-fA-F]{2})([0-9a-fA-F]{2})([0-9a-fA-F]{2})$/};"undefined"!==typeof N&&N.exports?
N.exports=n:window.tinycolor=n})(Math)},{}],599:[function(b,N,G){function p(k){if(k.length)return k instanceof Float32Array?k:new Float32Array(k);n[0]=k;return n[0]}N.exports=p;N.exports.float32=N.exports.float=p;N.exports.fract32=N.exports.fract=function(k,m){if(k.length){if(k instanceof Float32Array)return new Float32Array(k.length);m instanceof Float32Array||(m=p(k));for(var a=0,g=m.length;a<g;a++)m[a]=k[a]-m[a];return m}return p(k-p(k))};var n=new Float32Array(1)},{}],600:[function(b,N,G){function p(a,
g){g=k(getComputedStyle(a).getPropertyValue(g));return g[0]*n(g[1],a)}function n(a,g){g=g||document.body;a=(a||"px").trim().toLowerCase();if(g===window||g===document)g=document.body;switch(a){case "%":return g.clientHeight/100;case "ch":case "ex":var h=document.createElement("div");h.style["font-size"]="128"+a;g.appendChild(h);a=p(h,"font-size")/128;g.removeChild(h);return a;case "em":return p(g,"font-size");case "rem":return p(document.body,"font-size");case "vw":return window.innerWidth/100;case "vh":return window.innerHeight/
100;case "vmin":return Math.min(window.innerWidth,window.innerHeight)/100;case "vmax":return Math.max(window.innerWidth,window.innerHeight)/100;case "in":return m;case "cm":return m/2.54;case "mm":return m/25.4;case "pt":return m/72;case "pc":return m/6}return 1}var k=b("parse-unit");N.exports=n;var m=96},{"parse-unit":494}],601:[function(b,N,G){(function(p,n){"object"===typeof G&&"undefined"!==typeof N?n(G):(p=p||self,n(p.topojson=p.topojson||{}))})(this,function(p){function n(f){return f}function k(f){if(null==
f)return n;var q,t,w=f.scale[0],x=f.scale[1],z=f.translate[0],B=f.translate[1];return function(A,D){D||(q=t=0);D=2;var C=A.length,v=Array(C);v[0]=(q+=A[0])*w+z;for(v[1]=(t+=A[1])*x+B;D<C;)v[D]=A[D],++D;return v}}function m(f){function q(C){C=w(C);C[0]<z&&(z=C[0]);C[0]>A&&(A=C[0]);C[1]<B&&(B=C[1]);C[1]>D&&(D=C[1])}function t(C){switch(C.type){case "GeometryCollection":C.geometries.forEach(t);break;case "Point":q(C.coordinates);break;case "MultiPoint":C.coordinates.forEach(q)}}var w=k(f.transform),
x,z=Infinity,B=z,A=-z,D=-z;f.arcs.forEach(function(C){for(var v=-1,y=C.length,F;++v<y;)F=w(C[v],v),F[0]<z&&(z=F[0]),F[0]>A&&(A=F[0]),F[1]<B&&(B=F[1]),F[1]>D&&(D=F[1])});for(x in f.objects)t(f.objects[x]);return[z,B,A,D]}function a(f,q){var t=q.id,w=q.bbox,x=null==q.properties?{}:q.properties;f=g(f,q);return null==t&&null==w?{type:"Feature",properties:x,geometry:f}:null==w?{type:"Feature",id:t,properties:x,geometry:f}:{type:"Feature",id:t,bbox:w,properties:x,geometry:f}}function g(f,q){function t(C){return A(C)}
function w(C){for(var v=[],y=0,F=C.length;y<F;++y){var J=C[y],K=v;K.length&&K.pop();for(var M=D[0>J?~J:J],H=0,O=M.length;H<O;++H)K.push(A(M[H],H));if(0>J)for(J=K,K=J.length,M=K-O;M<--K;)O=J[M],J[M++]=J[K],J[K]=O}2>v.length&&v.push(v[0]);return v}function x(C){for(C=w(C);4>C.length;)C.push(C[0]);return C}function z(C){return C.map(x)}function B(C){var v=C.type;switch(v){case "GeometryCollection":return{type:v,geometries:C.geometries.map(B)};case "Point":C=A(C.coordinates);break;case "MultiPoint":C=
C.coordinates.map(t);break;case "LineString":C=w(C.arcs);break;case "MultiLineString":C=C.arcs.map(w);break;case "Polygon":C=z(C.arcs);break;case "MultiPolygon":C=C.arcs.map(z);break;default:return null}return{type:v,coordinates:C}}var A=k(f.transform),D=f.arcs;return B(q)}function h(f,q){function t(C){var v=f.arcs[0>C?~C:C],y=v[0];if(f.transform){var F=[0,0];v.forEach(function(J){F[0]+=J[0];F[1]+=J[1]})}else F=v[v.length-1];return 0>C?[F,y]:[y,F]}function w(C,v){for(var y in C){var F=C[y];delete v[F.start];
delete F.start;delete F.end;F.forEach(function(J){x[0>J?~J:J]=1});A.push(F)}}var x={},z={},B={},A=[],D=-1;q.forEach(function(C,v){var y=f.arcs[0>C?~C:C];3>y.length&&!y[1][0]&&!y[1][1]&&(y=q[++D],q[D]=C,q[v]=y)});q.forEach(function(C){var v=t(C),y=v[0],F=v[1];(v=B[y])?(delete B[v.end],v.push(C),v.end=F,(C=z[F])?(delete z[C.start],y=C===v?v:v.concat(C),z[y.start=v.start]=B[y.end=C.end]=y):z[v.start]=B[v.end]=v):(v=z[F])?(delete z[v.start],v.unshift(C),v.start=y,(C=B[y])?(delete B[C.end],y=C===v?v:C.concat(v),
z[y.start=C.start]=B[y.end=v.end]=y):z[v.start]=B[v.end]=v):(v=[C],z[v.start=y]=B[v.end=F]=v)});w(B,z);w(z,B);q.forEach(function(C){x[0>C?~C:C]||A.push([C])});return A}function r(f,q,t){var w;if(1<arguments.length)var x=l(f,q,t);else{var z=0;for(x=Array(w=f.arcs.length);z<w;++z)x[z]=z}return{type:"MultiLineString",arcs:h(f,x)}}function l(f,q,t){function w(v){var y=0>v?~v:v;(D[y]||(D[y]=[])).push({i:v,g:C})}function x(v){v.forEach(w)}function z(v){v.forEach(x)}function B(v){switch(C=v,v.type){case "GeometryCollection":v.geometries.forEach(B);
break;case "LineString":x(v.arcs);break;case "MultiLineString":case "Polygon":z(v.arcs);break;case "MultiPolygon":v.arcs.forEach(z)}}var A=[],D=[],C;B(q);D.forEach(null==t?function(v){A.push(v[0].i)}:function(v){t(v[0].g,v[v.length-1].g)&&A.push(v[0].i)});return A}function c(f,q){function t(D){switch(D.type){case "GeometryCollection":D.geometries.forEach(t);break;case "Polygon":w(D.arcs);break;case "MultiPolygon":D.arcs.forEach(w)}}function w(D){D.forEach(function(C){C.forEach(function(v){(z[v=0>
v?~v:v]||(z[v]=[])).push(D)})});B.push(D)}function x(D){D=g(f,{type:"Polygon",arcs:[D]}).coordinates[0];for(var C=-1,v=D.length,y,F=D[v-1],J=0;++C<v;)y=F,F=D[C],J+=y[0]*F[1]-y[1]*F[0];return Math.abs(J)}var z={},B=[],A=[];q.forEach(t);B.forEach(function(D){if(!D._){var C=[],v=[D];D._=1;for(A.push(C);D=v.pop();)C.push(D),D.forEach(function(y){y.forEach(function(F){z[0>F?~F:F].forEach(function(J){J._||(J._=1,v.push(J))})})})}});B.forEach(function(D){delete D._});return{type:"MultiPolygon",arcs:A.map(function(D){var C=
[];D.forEach(function(J){J.forEach(function(K){K.forEach(function(M){2>z[0>M?~M:M].length&&C.push(M)})})});C=h(f,C);if(1<(D=C.length))for(var v=1,y=x(C[0]),F;v<D;++v)(F=x(C[v]))>y&&(y=C[0],C[0]=C[v],C[v]=y,y=F);return C}).filter(function(D){return 0<D.length})}}function d(f,q){for(var t=0,w=f.length;t<w;){var x=t+w>>>1;f[x]<q?t=x+1:w=x}return t}function e(f){if(null==f)return n;var q,t,w=f.scale[0],x=f.scale[1],z=f.translate[0],B=f.translate[1];return function(A,D){D||(q=t=0);D=2;var C=A.length,v=
Array(C),y=Math.round((A[0]-z)/w),F=Math.round((A[1]-B)/x);v[0]=y-q;q=y;v[1]=F-t;for(t=F;D<C;)v[D]=A[D],++D;return v}}p.bbox=m;p.feature=function(f,q){"string"===typeof q&&(q=f.objects[q]);return"GeometryCollection"===q.type?{type:"FeatureCollection",features:q.geometries.map(function(t){return a(f,t)})}:a(f,q)};p.merge=function(f){return g(f,c.apply(this,arguments))};p.mergeArcs=c;p.mesh=function(f){return g(f,r.apply(this,arguments))};p.meshArcs=r;p.neighbors=function(f){function q(K,M){K.forEach(function(H){0>
H&&(H=~H);var O=x[H];O?O.push(M):x[H]=[M]})}function t(K,M){K.forEach(function(H){q(H,M)})}function w(K,M){if("GeometryCollection"===K.type)K.geometries.forEach(function(H){w(H,M)});else if(K.type in B)B[K.type](K.arcs,M)}var x={},z=f.map(function(){return[]}),B={LineString:q,MultiLineString:t,Polygon:t,MultiPolygon:function(K,M){K.forEach(function(H){t(H,M)})}};f.forEach(w);for(var A in x){f=x[A];for(var D=f.length,C=0;C<D;++C)for(var v=C+1;v<D;++v){var y=f[C],F=f[v],J;(J=z[y])[A=d(J,F)]!==F&&J.splice(A,
0,F);(J=z[F])[A=d(J,y)]!==y&&J.splice(A,0,y)}}return z};p.quantize=function(f,q){function t(y){return C(y)}function w(y){switch(y.type){case "GeometryCollection":var F={type:"GeometryCollection",geometries:y.geometries.map(w)};break;case "Point":F={type:"Point",coordinates:C(y.coordinates)};break;case "MultiPoint":F={type:"MultiPoint",coordinates:y.coordinates.map(t)};break;default:return y}null!=y.id&&(F.id=y.id);null!=y.bbox&&(F.bbox=y.bbox);null!=y.properties&&(F.properties=y.properties);return F}
if(f.transform)throw Error("already quantized");if(q&&q.scale)var x=f.bbox;else{if(!(2<=(D=Math.floor(q))))throw Error("n must be 2");x=f.bbox||m(f);q=x[0];var z=x[1],B=x[2],A=x[3],D;q={scale:[B-q?(B-q)/(D-1):1,A-z?(A-z)/(D-1):1],translate:[q,z]}}var C=e(q),v;z=f.objects;B={};for(v in z)B[v]=w(z[v]);return{type:"Topology",bbox:x,transform:q,objects:B,arcs:f.arcs.map(function(y){var F=0,J=1,K=y.length,M,H=Array(K);for(H[0]=C(y[0],0);++F<K;)if((M=C(y[F],F))[0]||M[1])H[J++]=M;1===J&&(H[J++]=[0,0]);
H.length=J;return H})}};p.transform=k;p.untransform=e;Object.defineProperty(p,"__esModule",{value:!0})})},{}],602:[function(b,N,G){N.exports=function(m){if(0>m)return[];if(0===m)return[[0]];for(var a=Math.round(k(m+1))|0,g=[],h=0;h<a;++h){for(var r=p.unrank(m,h),l=[0],c=0,d=0;d<r.length;++d)c+=1<<r[d],l.push(c);1>n(r)&&(l[0]=c,l[m]=0);g.push(l)}return g};var p=b("permutation-rank"),n=b("permutation-parity"),k=b("gamma")},{gamma:256,"permutation-parity":496,"permutation-rank":497}],603:[function(b,
N,G){function p(d,e,f){return Math.sqrt(Math.pow(d,2)+Math.pow(e,2)+Math.pow(f,2))}function n(d){var e=Math.abs(d[0]),f=Math.abs(d[1]),q=Math.abs(d[2]),t=[0,0,0];e>Math.max(f,q)?t[2]=1:f>Math.max(e,q)?t[0]=1:t[1]=1;for(q=f=e=0;3>q;++q)e+=d[q]*d[q],f+=t[q]*d[q];for(q=0;3>q;++q)t[q]-=f/e*d[q];r(t,t);return t}function k(d,e,f,q,t,w,x,z){this.center=m(f);this.up=m(q);this.right=m(t);this.radius=m([w]);this.angle=m([x,z]);this.angle.bounds=[[-Infinity,-Math.PI/2],[Infinity,Math.PI/2]];this.setDistanceLimits(d,
e);this.computedCenter=this.center.curve(0);this.computedUp=this.up.curve(0);this.computedRight=this.right.curve(0);this.computedRadius=this.radius.curve(0);this.computedAngle=this.angle.curve(0);this.computedToward=[0,0,0];this.computedEye=[0,0,0];this.computedMatrix=Array(16);for(d=0;16>d;++d)this.computedMatrix[d]=.5;this.recalcMatrix(0)}N.exports=function(d){d=d||{};var e=d.center||[0,0,0],f=d.up||[0,1,0],q=d.right||n(f),t=d.radius||1,w=d.theta||0,x=d.phi||0;e=[].slice.call(e,0,3);f=[].slice.call(f,
0,3);r(f,f);q=[].slice.call(q,0,3);r(q,q);"eye"in d&&(t=d.eye,w=[t[0]-e[0],t[1]-e[1],t[2]-e[2]],h(q,w,f),1E-6>p(q[0],q[1],q[2])?q=n(f):r(q,q),t=p(w[0],w[1],w[2]),x=l(f,w)/t,w=l(q,w)/t,x=Math.acos(x),w=Math.acos(w));t=Math.log(t);return new k(d.zoomMin,d.zoomMax,e,f,q,t,w,x)};var m=b("filtered-vector"),a=b("gl-mat4/invert"),g=b("gl-mat4/rotate"),h=b("gl-vec3/cross"),r=b("gl-vec3/normalize"),l=b("gl-vec3/dot");b=k.prototype;b.setDistanceLimits=function(d,e){d=0<d?Math.log(d):-Infinity;e=0<e?Math.log(e):
Infinity;e=Math.max(e,d);this.radius.bounds[0][0]=d;this.radius.bounds[1][0]=e};b.getDistanceLimits=function(d){var e=this.radius.bounds[0];return d?(d[0]=Math.exp(e[0][0]),d[1]=Math.exp(e[1][0]),d):[Math.exp(e[0][0]),Math.exp(e[1][0])]};b.recalcMatrix=function(d){this.center.curve(d);this.up.curve(d);this.right.curve(d);this.radius.curve(d);this.angle.curve(d);for(var e=this.computedUp,f=this.computedRight,q=0,t=0,w=0;3>w;++w)t+=e[w]*f[w],q+=e[w]*e[w];var x=Math.sqrt(q);for(w=d=0;3>w;++w)f[w]-=e[w]*
t/q,d+=f[w]*f[w],e[w]/=x;d=Math.sqrt(d);for(w=0;3>w;++w)f[w]/=d;var z=this.computedToward;h(z,e,f);r(z,z);d=Math.exp(this.computedRadius[0]);x=this.computedAngle[0];q=this.computedAngle[1];t=Math.cos(x);x=Math.sin(x);var B=Math.cos(q),A=Math.sin(q);q=this.computedCenter;var D=t*B,C=x*B,v=-t*A,y=-x*A;t=this.computedEye;x=this.computedMatrix;for(w=0;3>w;++w){var F=D*f[w]+C*z[w]+A*e[w];x[4*w+1]=v*f[w]+y*z[w]+B*e[w];x[4*w+2]=F;x[4*w+3]=0}f=x[1];w=x[5];A=x[9];z=x[2];B=x[6];D=x[10];e=w*D-A*B;A=A*z-f*D;
f=f*B-w*z;w=p(e,A,f);x[0]=e/w;x[4]=A/w;x[8]=f/w;for(w=0;3>w;++w)t[w]=q[w]+x[2+4*w]*d;for(w=0;3>w;++w){for(q=d=0;3>q;++q)d+=x[w+4*q]*t[q];x[12+w]=-d}x[15]=1};b.getMatrix=function(d,e){this.recalcMatrix(d);d=this.computedMatrix;if(e){for(var f=0;16>f;++f)e[f]=d[f];return e}return d};var c=[0,0,0];b.rotate=function(d,e,f,q){this.angle.move(d,e,f);if(q){this.recalcMatrix(d);e=this.computedMatrix;c[0]=e[2];c[1]=e[6];c[2]=e[10];f=this.computedUp;for(var t=this.computedRight,w=this.computedToward,x=0;3>
x;++x)e[4*x]=f[x],e[4*x+1]=t[x],e[4*x+2]=w[x];g(e,e,q,c);for(x=0;3>x;++x)f[x]=e[4*x],t[x]=e[4*x+1];this.up.set(d,f[0],f[1],f[2]);this.right.set(d,t[0],t[1],t[2])}};b.pan=function(d,e,f,q){e=e||0;f=f||0;q=q||0;this.recalcMatrix(d);var t=this.computedMatrix,w=t[1],x=t[5],z=t[9],B=p(w,x,z);w/=B;x/=B;z/=B;B=t[0];var A=t[4];t=t[8];var D=B*w+A*x+t*z;B-=w*D;A-=x*D;t-=z*D;D=p(B,A,t);this.center.move(d,B/D*e+w*f,A/D*e+x*f,t/D*e+z*f);e=Math.exp(this.computedRadius[0]);e=Math.max(1E-4,e+q);this.radius.set(d,
Math.log(e))};b.translate=function(d,e,f,q){this.center.move(d,e||0,f||0,q||0)};b.setMatrix=function(d,e,f,q){var t=1;"number"===typeof f&&(t=f|0);if(0>t||3<t)t=1;var w=(t+2)%3;e||(this.recalcMatrix(d),e=this.computedMatrix);f=e[t];var x=e[t+4],z=e[t+8];if(q){q=Math.abs(f);var B=Math.abs(z),A=Math.max(q,Math.abs(x),B);q===A?(f=0>f?-1:1,x=z=0):B===A?(z=0>z?-1:1,f=x=0):(x=0>x?-1:1,f=z=0)}else q=p(f,x,z),f/=q,x/=q,z/=q;q=e[w];B=e[w+4];w=e[w+8];A=q*f+B*x+w*z;q-=f*A;B-=x*A;w-=z*A;A=p(q,B,w);q/=A;B/=A;
w/=A;A=x*w-z*B;var D=z*q-f*w,C=f*B-x*q,v=p(A,D,C);A/=v;D/=v;C/=v;this.center.jump(d,F,J,K);this.radius.idle(d);this.up.jump(d,f,x,z);this.right.jump(d,q,B,w);if(2===t)J=e[1],K=e[5],f=e[9],F=0>y?-Math.PI/2:Math.PI/2,J=Math.atan2(J*A+K*D+f*C,J*q+K*B+f*w);else{J=e[2];K=e[6];var y=e[10];F=Math.asin(Math.min(1,Math.max(-1,J*f+K*x+y*z)));J=Math.atan2(J*A+K*D+y*C,J*q+K*B+y*w)}this.angle.jump(d,J,F);this.recalcMatrix(d);y=e[2];f=e[6];x=e[10];K=this.computedMatrix;a(K,e);e=K[15];var F=K[12]/e,J=K[13]/e,K=
K[14]/e;e=Math.exp(this.computedRadius[0]);this.center.jump(d,F-y*e,J-f*e,K-x*e)};b.lastT=function(){return Math.max(this.center.lastT(),this.up.lastT(),this.right.lastT(),this.radius.lastT(),this.angle.lastT())};b.idle=function(d){this.center.idle(d);this.up.idle(d);this.right.idle(d);this.radius.idle(d);this.angle.idle(d)};b.flush=function(d){this.center.flush(d);this.up.flush(d);this.right.flush(d);this.radius.flush(d);this.angle.flush(d)};b.setDistance=function(d,e){0<e&&this.radius.set(d,Math.log(e))};
b.lookAt=function(d,e,f,q){this.recalcMatrix(d);e=e||this.computedEye;f=f||this.computedCenter;q=q||this.computedUp;var t=q[0],w=q[1];q=q[2];var x=p(t,w,q);if(!(1E-6>x)){t/=x;w/=x;q/=x;x=e[0]-f[0];var z=e[1]-f[1];e=e[2]-f[2];var B=p(x,z,e);if(!(1E-6>B)){x/=B;z/=B;e/=B;var A=this.computedRight,D=A[0],C=A[1];A=A[2];var v=t*D+w*C+q*A;D-=v*t;C-=v*w;A-=v*q;v=p(D,C,A);if(.01>v&&(D=w*e-q*z,C=q*x-t*e,A=t*z-w*x,v=p(D,C,A),1E-6>v))return;D/=v;C/=v;A/=v;this.up.set(d,t,w,q);this.right.set(d,D,C,A);this.center.set(d,
f[0],f[1],f[2]);this.radius.set(d,Math.log(B));f=w*A-q*C;B=q*D-t*A;v=t*C-w*D;var y=p(f,B,v);t=Math.asin(Math.min(1,Math.max(-1,t*x+w*z+q*e)));w=Math.atan2(f/y*x+B/y*z+v/y*e,D*x+C*z+A*e);x=this.angle._state;q=x[x.length-1];x=x[x.length-2];q%=2*Math.PI;z=Math.abs(q-w);e=Math.abs(q-2*Math.PI-w);Math.abs(q+2*Math.PI-w)<z&&(q+=2*Math.PI);e<z&&(q-=2*Math.PI);this.angle.jump(this.angle.lastT(),q,x);this.angle.set(d,w,t)}}}},{"filtered-vector":250,"gl-mat4/invert":299,"gl-mat4/rotate":305,"gl-vec3/cross":368,
"gl-vec3/dot":373,"gl-vec3/normalize":390}],604:[function(b,N,G){N.exports=function(n,k,m){var a=n*k,g=p*n;g-=g-n;n-=g;var h=p*k;h-=h-k;k-=h;k=n*k-(a-g*h-n*h-g*k);return m?(m[0]=k,m[1]=a,m):[k,a]};var p=+(Math.pow(2,27)+1)},{}],605:[function(b,N,G){N.exports=function(p,n,k){var m=p+n,a=m-p;n-=a;p-=m-a;return k?(k[0]=p+n,k[1]=m,k):[p+n,m]}},{}],606:[function(b,N,G){var p=b("../prototype/is");N.exports=function(n){if("function"!==typeof n||!hasOwnProperty.call(n,"length"))return!1;try{if("number"!==
typeof n.length||"function"!==typeof n.call||"function"!==typeof n.apply)return!1}catch(k){return!1}return!p(n)}},{"../prototype/is":613}],607:[function(b,N,G){var p=b("../value/is"),n=b("../object/is"),k=b("../string/coerce"),m=b("./to-short-string");N.exports=function(a,g,h){if(!n(h))throw new TypeError(g.replace("%v",m(a)));if(!p(a)){if("default"in h)return h["default"];if(h.isOptional)return null}h=k(h.errorMessage);p(h)||(h=g);throw new TypeError(h.replace("%v",m(a)));}},{"../object/is":610,
"../string/coerce":614,"../value/is":616,"./to-short-string":609}],608:[function(b,N,G){N.exports=function(p){try{return p.toString()}catch(n){try{return String(p)}catch(k){return null}}}},{}],609:[function(b,N,G){var p=b("./safe-to-string"),n=/[\n\r\u2028\u2029]/g;N.exports=function(k){k=p(k);if(null===k)return"\x3cNon-coercible to string value\x3e";100<k.length&&(k=k.slice(0,99)+"");return k=k.replace(n,function(m){switch(m){case "\n":return"\\n";case "\r":return"\\r";case "\u2028":return"\\u2028";
case "\u2029":return"\\u2029";default:throw Error("Unexpected character");}})}},{"./safe-to-string":608}],610:[function(b,N,G){var p=b("../value/is"),n={object:!0,"function":!0,undefined:!0};N.exports=function(k){return p(k)?hasOwnProperty.call(n,typeof k):!1}},{"../value/is":616}],611:[function(b,N,G){var p=b("../lib/resolve-exception"),n=b("./is");N.exports=function(k,m){return n(k)?k:p(k,"%v is not a plain function",m)}},{"../lib/resolve-exception":607,"./is":612}],612:[function(b,N,G){var p=b("../function/is"),
n=/^\s*class[\s{/}]/,k=Function.prototype.toString;N.exports=function(m){return!p(m)||n.test(k.call(m))?!1:!0}},{"../function/is":606}],613:[function(b,N,G){var p=b("../object/is");N.exports=function(n){if(!p(n))return!1;try{return n.constructor?n.constructor.prototype===n:!1}catch(k){return!1}}},{"../object/is":610}],614:[function(b,N,G){var p=b("../value/is"),n=b("../object/is"),k=Object.prototype.toString;N.exports=function(m){if(!p(m))return null;if(n(m)){var a=m.toString;if("function"!==typeof a||
a===k)return null}return""+m}},{"../object/is":610,"../value/is":616}],615:[function(b,N,G){var p=b("../lib/resolve-exception"),n=b("./is");N.exports=function(k,m){return n(k)?k:p(k,"Cannot use %v",m)}},{"../lib/resolve-exception":607,"./is":616}],616:[function(b,N,G){N.exports=function(p){return void 0!==p&&null!==p}},{}],617:[function(b,N,G){(function(p){(function(){function n(J){if(J){var K=x.log2(J.length||J.byteLength);y[K].push(J)}}function k(J){J=x.nextPow2(J);var K=x.log2(J);K=y[K];return 0<
K.length?K.pop():new ArrayBuffer(J)}function m(J){return new Uint8Array(k(J),0,J)}function a(J){return new Uint16Array(k(2*J),0,J)}function g(J){return new Uint32Array(k(4*J),0,J)}function h(J){return new Int8Array(k(J),0,J)}function r(J){return new Int16Array(k(2*J),0,J)}function l(J){return new Int32Array(k(4*J),0,J)}function c(J){return new Float32Array(k(4*J),0,J)}function d(J){return new Float64Array(k(8*J),0,J)}function e(J){return A?new Uint8ClampedArray(k(J),0,J):m(J)}function f(J){return D?
new BigUint64Array(k(8*J),0,J):null}function q(J){return C?new BigInt64Array(k(8*J),0,J):null}function t(J){return new DataView(k(J),0,J)}function w(J){J=x.nextPow2(J);var K=x.log2(J);K=F[K];return 0<K.length?K.pop():new B(J)}var x=b("bit-twiddle"),z=b("dup"),B=b("buffer").Buffer;p.__TYPEDARRAY_POOL||(p.__TYPEDARRAY_POOL={UINT8:z([32,0]),UINT16:z([32,0]),UINT32:z([32,0]),BIGUINT64:z([32,0]),INT8:z([32,0]),INT16:z([32,0]),INT32:z([32,0]),BIGINT64:z([32,0]),FLOAT:z([32,0]),DOUBLE:z([32,0]),DATA:z([32,
0]),UINT8C:z([32,0]),BUFFER:z([32,0])});var A="undefined"!==typeof Uint8ClampedArray,D="undefined"!==typeof BigUint64Array,C="undefined"!==typeof BigInt64Array,v=p.__TYPEDARRAY_POOL;v.UINT8C||(v.UINT8C=z([32,0]));v.BIGUINT64||(v.BIGUINT64=z([32,0]));v.BIGINT64||(v.BIGINT64=z([32,0]));v.BUFFER||(v.BUFFER=z([32,0]));var y=v.DATA,F=v.BUFFER;G.free=function(J){if(B.isBuffer(J))F[x.log2(J.length)].push(J);else if("[object ArrayBuffer]"!==Object.prototype.toString.call(J)&&(J=J.buffer),J){var K=x.log2(J.length||
J.byteLength)|0;y[K].push(J)}};G.freeUint8=G.freeUint16=G.freeUint32=G.freeBigUint64=G.freeInt8=G.freeInt16=G.freeInt32=G.freeBigInt64=G.freeFloat32=G.freeFloat=G.freeFloat64=G.freeDouble=G.freeUint8Clamped=G.freeDataView=function(J){n(J.buffer)};G.freeArrayBuffer=n;G.freeBuffer=function(J){F[x.log2(J.length)].push(J)};G.malloc=function(J,K){if(void 0===K||"arraybuffer"===K)return k(J);switch(K){case "uint8":return m(J);case "uint16":return a(J);case "uint32":return g(J);case "int8":return h(J);case "int16":return r(J);
case "int32":return l(J);case "float":case "float32":return c(J);case "double":case "float64":return d(J);case "uint8_clamped":return e(J);case "bigint64":return q(J);case "biguint64":return f(J);case "buffer":return w(J);case "data":case "dataview":return t(J)}return null};G.mallocArrayBuffer=k;G.mallocUint8=m;G.mallocUint16=a;G.mallocUint32=g;G.mallocInt8=h;G.mallocInt16=r;G.mallocInt32=l;G.mallocFloat32=G.mallocFloat=c;G.mallocFloat64=G.mallocDouble=d;G.mallocUint8Clamped=e;G.mallocBigUint64=f;
G.mallocBigInt64=q;G.mallocDataView=t;G.mallocBuffer=w;G.clearCache=function(){for(var J=0;32>J;++J)v.UINT8[J].length=0,v.UINT16[J].length=0,v.UINT32[J].length=0,v.INT8[J].length=0,v.INT16[J].length=0,v.INT32[J].length=0,v.FLOAT[J].length=0,v.DOUBLE[J].length=0,v.BIGUINT64[J].length=0,v.BIGINT64[J].length=0,v.UINT8C[J].length=0,y[J].length=0,F[J].length=0}}).call(this)}).call(this,"undefined"!==typeof xe?xe:"undefined"!==typeof self?self:"undefined"!==typeof window?window:{})},{"bit-twiddle":104,
buffer:117,dup:185}],618:[function(b,N,G){function p(n){this.roots=Array(n);this.ranks=Array(n);for(var k=0;k<n;++k)this.roots[k]=k,this.ranks[k]=0}"use restrict";N.exports=p;b=p.prototype;Object.defineProperty(b,"length",{get:function(){return this.roots.length}});b.makeSet=function(){var n=this.roots.length;this.roots.push(n);this.ranks.push(0);return n};b.find=function(n){for(var k=n,m=this.roots;m[n]!==n;)n=m[n];for(;m[k]!==n;){var a=m[k];m[k]=n;k=a}return n};b.link=function(n,k){n=this.find(n);
k=this.find(k);if(n!==k){var m=this.ranks,a=this.roots,g=m[n],h=m[k];g<h?a[n]=k:h<g?a[k]=n:(a[k]=n,++m[n])}}},{}],619:[function(b,N,G){N.exports=function(p,n,k){if(0===p.length)return p;if(n){k||p.sort(n);k=1;for(var m=p.length,a=p[0],g,h=1;h<m;++h)g=a,a=p[h],n(a,g)&&(h===k?k++:p[k++]=a);p.length=k;return p}k||p.sort();n=1;k=p.length;m=p[0];for(g=1;g<k;++g)a=m,m=p[g],m!==a&&(g===n?n++:p[n++]=m);p.length=n;return p}},{}],620:[function(b,N,G){var p=/['"]/;N.exports=function(n){if(!n)return"";p.test(n.charAt(0))&&
(n=n.substr(1));p.test(n.charAt(n.length-1))&&(n=n.substr(0,n.length-1));return n}},{}],621:[function(b,N,G){N.exports=function(p,n,k){Array.isArray(k)||(k=[].slice.call(arguments,2));for(var m=0,a=k.length;m<a;m++){var g=k[m],h;for(h in g)if((void 0===n[h]||Array.isArray(n[h])||p[h]!==n[h])&&h in n){if(!0===g[h])var r=n[h];else if(!1===g[h])continue;else if("function"===typeof g[h]&&(r=g[h](n[h],p,n),void 0===r))continue;p[h]=r}}return p}},{}],622:[function(b,N,G){(function(p){(function(){function n(k){try{if(!p.localStorage)return!1}catch(m){return!1}k=
p.localStorage[k];return null==k?!1:"true"===String(k).toLowerCase()}N.exports=function(k,m){if(n("noDeprecation"))return k;var a=!1;return function(){if(!a){if(n("throwDeprecation"))throw Error(m);n("traceDeprecation")?console.trace(m):console.warn(m);a=!0}return k.apply(this,arguments)}}}).call(this)}).call(this,"undefined"!==typeof xe?xe:"undefined"!==typeof self?self:"undefined"!==typeof window?window:{})},{}],623:[function(b,N,G){N.exports=function(m,a){if("object"!==typeof a||null===a)a={};
return p(m,a.canvas||n,a.context||k,a)};var p=b("./lib/vtext"),n=null,k=null;"undefined"!==typeof document&&(n=document.createElement("canvas"),n.width=8192,n.height=1024,k=n.getContext("2d"))},{"./lib/vtext":624}],624:[function(b,N,G){function p(C,v,y,F){var J="\x3c"+C+"\x3e";C="\x3c/"+C+"\x3e";for(var K=J.length,M=C.length,H=v[0]===x||v[0]===A,O=0,I;-1<O;){O=y.indexOf(J,O);if(-1===O)break;I=y.indexOf(C,O+K);if(-1===I)break;if(I<=O)break;for(var L=O;L<I+M;++L)if(L<O+K||L>=I)F[L]=null,y=y.substr(0,
L)+" "+y.substr(L+1);else if(null!==F[L]){var Q=F[L].indexOf(v[0]);-1===Q?F[L]+=v:H&&(F[L]=F[L].substr(0,Q+1)+(1+parseInt(F[L][Q+1]))+F[L].substr(Q+2))}O+=K;O=y.substr(O,I-O).indexOf(J);O=-1!==O?O:I+M}return F}function n(C,v,y){for(var F=v.textAlign||"start",J=v.textBaseline||"alphabetic",K=[1073741824,1073741824],M=[0,0],H=C.length,O=0;O<H;++O)for(var I=C[O],L=0;2>L;++L)K[L]=Math.min(K[L],I[L])|0,M[L]=Math.max(M[L],I[L])|0;var Q=0;switch(F){case "center":Q=-.5*(K[0]+M[0]);break;case "right":case "end":Q=
-M[0];break;case "left":case "start":Q=-K[0];break;default:throw Error("vectorize-text: Unrecognized textAlign: '"+F+"'");}var Z=0;switch(J){case "hanging":case "top":Z=-K[1];break;case "middle":Z=-.5*(K[1]+M[1]);break;case "alphabetic":case "ideographic":Z=-3*y;break;case "bottom":Z=-M[1];break;default:throw Error("vectorize-text: Unrecoginized textBaseline: '"+J+"'");}var ba=1/y;"lineHeight"in v?ba*=+v.lineHeight:"width"in v?ba=v.width/(M[0]-K[0]):"height"in v&&(ba=v.height/(M[1]-K[1]));return C.map(function(V){return[ba*
(V[0]+Q),ba*(V[1]+Z)]})}function k(C,v,y,F,J,K){function M(){if(""!==fa){var ra=v.measureText(fa).width;v.fillText(fa,V+aa,S+ja);aa+=ra}}function H(){return""+Math.round(ma)+"px "}function O(ra,wa){var pa=""+v.font;if(!0===K.subscripts){var la=ra.indexOf(A),ka=wa.indexOf(A);la=-1<la?parseInt(ra[1+la]):0;ka=-1<ka?parseInt(wa[1+ka]):0;la!==ka&&(pa=pa.replace(H(),"?px "),ma*=Math.pow(.75,ka-la),pa=pa.replace("?px ",H()));ja+=.25*ba*(ka-la)}!0===K.superscripts&&(la=ra.indexOf(x),ka=wa.indexOf(x),la=-1<
la?parseInt(ra[1+la]):0,ka=-1<ka?parseInt(wa[1+ka]):0,la!==ka&&(pa=pa.replace(H(),"?px "),ma*=Math.pow(.75,ka-la),pa=pa.replace("?px ",H())),ja-=.25*ba*(ka-la));!0===K.bolds&&(ka=-1<ra.indexOf(f),la=-1<wa.indexOf(f),!ka&&la&&(pa=na?pa.replace("italic ","italic bold "):"bold "+pa),ka&&!la&&(pa=pa.replace("bold ","")));if(!0===K.italics){var na=-1<ra.indexOf(t);ra=-1<wa.indexOf(t);!na&&ra&&(pa="italic "+pa);na&&!ra&&(pa=pa.replace("italic ",""))}v.font=pa}y=y.replace(/\n/g,"");y=!0===K.breaklines?y.replace(/<br>/g,
"\n"):y.replace(/<br>/g," ");var I="",L=[];for(T=0;T<y.length;++T)L[T]=I;!0===K.bolds&&(L=p(e,f,y,L));!0===K.italics&&(L=p(q,t,y,L));!0===K.superscripts&&(L=p(w,z,y,L));!0===K.subscripts&&(L=p(B,D,y,L));var Q=[],Z="";for(T=0;T<y.length;++T)null!==L[T]&&(Z+=y[T],Q.push(L[T]));L=Z.split("\n");y=L.length;var ba=Math.round(J*F),V=F,S=2*F;J=0;T=y*ba+S;C.height<T&&(C.height=T);v.fillStyle="#000";v.fillRect(0,0,C.width,C.height);v.fillStyle="#fff";var T;Z=0;var fa="";for(C=0;C<y;++C){var W=L[C]+"\n";var aa=
0;var ja=C*ba;var ma=F;fa="";for(T=0;T<W.length;++T){var ia=T+Z<Q.length?Q[T+Z]:Q[Q.length-1];I===ia?fa+=W[T]:(M(),fa=W[T],void 0!==ia&&(O(I,ia),I=ia))}M();Z+=W.length;T=Math.round(aa+2*V)|0;J<T&&(J=T)}F=J;I=S+ba*y;return h(v.getImageData(0,0,F,I).data,[I,F,4]).pick(-1,-1,0).transpose(1,0)}function m(C,v,y,F){C=g(C,128);F=F?r(C.cells,C.positions,.25):{edges:C.cells,positions:C.positions};y=n(F.positions,v,y);C=F.edges;F="ccw"===v.orientation;l(y,C);if(v.polygons||v.polygon||v.polyline){v=d(C,y);C=
Array(v.length);for(var J=0;J<v.length;++J){for(var K=v[J],M=Array(K.length),H=0;H<K.length;++H){for(var O=K[H],I=Array(O.length),L=0;L<O.length;++L)I[L]=y[O[L]].slice();F&&I.reverse();M[H]=I}C[J]=M}return C}return v.triangles||v.triangulate||v.triangle?{cells:c(y,C,{delaunay:!1,exterior:!1,interior:!0}),positions:y}:{edges:C,positions:y}}function a(C,v,y){try{return m(C,v,y,!0)}catch(F){}try{return m(C,v,y,!1)}catch(F){}return v.polygons||v.polyline||v.polygon?[]:v.triangles||v.triangulate||v.triangle?
{cells:[],positions:[]}:{edges:[],positions:[]}}N.exports=function(C,v,y,F){var J=64,K=1.25,M={breaklines:!1,bolds:!1,italics:!1,subscripts:!1,superscripts:!1};F&&(F.size&&0<F.size&&(J=F.size),F.lineSpacing&&0<F.lineSpacing&&(K=F.lineSpacing),F.styletags&&F.styletags.breaklines&&(M.breaklines=F.styletags.breaklines?!0:!1),F.styletags&&F.styletags.bolds&&(M.bolds=F.styletags.bolds?!0:!1),F.styletags&&F.styletags.italics&&(M.italics=F.styletags.italics?!0:!1),F.styletags&&F.styletags.subscripts&&(M.subscripts=
F.styletags.subscripts?!0:!1),F.styletags&&F.styletags.superscripts&&(M.superscripts=F.styletags.superscripts?!0:!1));y.font=[F.fontStyle,F.fontVariant,F.fontWeight,J+"px",F.font].filter(function(H){return H}).join(" ");y.textAlign="start";y.textBaseline="alphabetic";y.direction="ltr";C=k(v,y,C,J,K,M);return a(C,F,J)};N.exports.processPixels=a;var g=b("surface-nets"),h=b("ndarray"),r=b("simplify-planar-graph"),l=b("clean-pslg"),c=b("cdt2d"),d=b("planar-graph-to-polyline"),e="b",f="b|",q="i",t="i|",
w="sup",x="+",z="+1",B="sub",A="-",D="-1"},{cdt2d:118,"clean-pslg":127,ndarray:483,"planar-graph-to-polyline":501,"simplify-planar-graph":563,"surface-nets":591}],625:[function(b,N,G){(function(){function p(z){z.permitHostObjects___&&z.permitHostObjects___(p)}function n(z){return!("weakmap:"==z.substr(0,8)&&"___"===z.substr(z.length-3))}function k(z){if(z!==Object(z))throw new TypeError("Not an object: "+z);var B=z[f];if(B&&B.key===z)return B;if(e(z)){B={key:z};try{return d(z,f,{value:B,writable:!1,
enumerable:!1,configurable:!1}),B}catch(A){}}}function m(z){z.prototype=null;return Object.freeze(z)}function a(){t||"undefined"===typeof console||(t=!0,console.warn("WeakMap should be invoked as new WeakMap(), not WeakMap(). This will be an error in the future."))}if("undefined"===typeof ses||!ses.ok||ses.ok()){"undefined"!==typeof ses&&(ses.weakMapPermitHostObjects=p);var g=!1;if("function"===typeof WeakMap){var h=WeakMap;if("undefined"===typeof navigator||!/Firefox/.test(navigator.userAgent)){var r=
new h,l=Object.freeze({});r.set(l,1);if(1!==r.get(l))g=!0;else{N.exports=WeakMap;return}}}var c=Object.getOwnPropertyNames,d=Object.defineProperty,e=Object.isExtensible,f="weakmap:ident:"+Math.random()+"___";"undefined"!==typeof crypto&&"function"===typeof crypto.getRandomValues&&"function"===typeof ArrayBuffer&&"function"===typeof Uint8Array&&(r=new ArrayBuffer(25),r=new Uint8Array(r),crypto.getRandomValues(r),f="weakmap:rand:"+Array.prototype.map.call(r,function(z){return(z%36).toString(36)}).join("")+
"___");d(Object,"getOwnPropertyNames",{value:function(z){return c(z).filter(n)}});if("getPropertyNames"in Object){var q=Object.getPropertyNames;d(Object,"getPropertyNames",{value:function(z){return q(z).filter(n)}})}(function(){var z=Object.freeze;d(Object,"freeze",{value:function(D){k(D);return z(D)}});var B=Object.seal;d(Object,"seal",{value:function(D){k(D);return B(D)}});var A=Object.preventExtensions;d(Object,"preventExtensions",{value:function(D){k(D);return A(D)}})})();var t=!1,w=0,x=function(){this instanceof
x||a();var z=[],B=[],A=w++;return Object.create(x.prototype,{get___:{value:m(function(D,C){var v=k(D);if(v)return A in v?v[A]:C;D=z.indexOf(D);return 0<=D?B[D]:C})},has___:{value:m(function(D){var C=k(D);return C?A in C:0<=z.indexOf(D)})},set___:{value:m(function(D,C){var v;(v=k(D))?v[A]=C:(v=z.indexOf(D),0<=v?B[v]=C:(v=z.length,B[v]=C,z[v]=D));return this})},delete___:{value:m(function(D){var C=k(D);if(C)return A in C&&delete C[A];D=z.indexOf(D);if(0>D)return!1;C=z.length-1;z[D]=void 0;B[D]=B[C];
z[D]=z[C];z.length=C;B.length=C;return!0})}})};x.prototype=Object.create(Object.prototype,{get:{value:function(z,B){return this.get___(z,B)},writable:!0,configurable:!0},has:{value:function(z){return this.has___(z)},writable:!0,configurable:!0},set:{value:function(z,B){return this.set___(z,B)},writable:!0,configurable:!0},"delete":{value:function(z){return this.delete___(z)},writable:!0,configurable:!0}});"function"===typeof h?function(){function z(){this instanceof x||a();var B=new h,A=void 0,D=
!1;var C=g?function(v,y){B.set(v,y);B.has(v)||(A||(A=new x),A.set(v,y));return this}:function(v,y){if(D)try{B.set(v,y)}catch(F){A||(A=new x),A.set___(v,y)}else B.set(v,y);return this};return Object.create(x.prototype,{get___:{value:m(function(v,y){return A?B.has(v)?B.get(v):A.get___(v,y):B.get(v,y)})},has___:{value:m(function(v){return B.has(v)||(A?A.has___(v):!1)})},set___:{value:m(C)},delete___:{value:m(function(v){var y=!!B["delete"](v);return A?A.delete___(v)||y:y})},permitHostObjects___:{value:m(function(v){if(v===
p)D=!0;else throw Error("bogus call to permitHostObjects___");})}})}g&&"undefined"!==typeof Proxy&&(Proxy=void 0);z.prototype=x.prototype;N.exports=z;Object.defineProperty(WeakMap.prototype,"constructor",{value:WeakMap,enumerable:!1,configurable:!0,writable:!0})}():("undefined"!==typeof Proxy&&(Proxy=void 0),N.exports=x)}})()},{}],626:[function(b,N,G){var p=b("./hidden-store.js");N.exports=function(){var n={};return function(k){if(("object"!==typeof k||null===k)&&"function"!==typeof k)throw Error("Weakmap-shim: Key must be object");
var m=k.valueOf(n);return m&&m.identity===n?m:p(k,n)}}},{"./hidden-store.js":627}],627:[function(b,N,G){N.exports=function(p,n){var k={identity:n},m=p.valueOf;Object.defineProperty(p,"valueOf",{value:function(a){return a!==n?m.apply(this,arguments):k},writable:!0});return k}},{}],628:[function(b,N,G){var p=b("./create-store.js");N.exports=function(){var n=p();return{get:function(k,m){k=n(k);return k.hasOwnProperty("value")?k.value:m},set:function(k,m){n(k).value=m;return this},has:function(k){return"value"in
n(k)},"delete":function(k){return delete n(k).value}}}},{"./create-store.js":626}],629:[function(b,N,G){var p=b("get-canvas-context");N.exports=function(n){return p("webgl",n)}},{"get-canvas-context":257}],630:[function(b,N,G){function p(c){this.local=this.regionalOptions[c||""]||this.regionalOptions[""]}var n=b("../main");b=b("object-assign");var k=n.instance();p.prototype=new n.baseCalendar;b(p.prototype,{name:"Chinese",jdEpoch:1721425.5,hasYearZero:!1,minMonth:0,firstMonth:0,minDay:1,regionalOptions:{"":{name:"Chinese",
epochs:["BEC","EC"],monthNumbers:function(c,d){if("string"===typeof c)return(d=c.match(a))?d[0]:"";var e=this._validateYear(c);c=c.month();var f=""+this.toChineseMonth(e,c);d&&2>f.length&&(f="0"+f);this.isIntercalaryMonth(e,c)&&(f+="i");return f},monthNames:function(c){if("string"===typeof c){var d=c.match(g);return d?d[0]:""}d=this._validateYear(c);c=c.month();var e="           ".split(" ")[this.toChineseMonth(d,c)-1];this.isIntercalaryMonth(d,c)&&(e=""+e);return e},monthNamesShort:function(c){if("string"===
typeof c){var d=c.match(h);return d?d[0]:""}d=this._validateYear(c);c=c.month();var e="           ".split(" ")[this.toChineseMonth(d,c)-1];this.isIntercalaryMonth(d,c)&&(e=""+e);return e},parseMonth:function(c,d){c=this._validateYear(c);var e=parseInt(d);if(isNaN(e)){if(""===d[0]){var f=!0;d=d.substring(1)}""===d[d.length-1]&&(d=d.substring(0,d.length-1));e=1+"           ".split(" ").indexOf(d)}else d=d[d.length-1],f="i"===d||"I"===d;return this.toMonthIndex(c,e,f)},
dayNames:"Sunday Monday Tuesday Wednesday Thursday Friday Saturday".split(" "),dayNamesShort:"Sun Mon Tue Wed Thu Fri Sat".split(" "),dayNamesMin:"Su Mo Tu We Th Fr Sa".split(" "),digits:null,dateFormat:"yyyy/mm/dd",firstDay:1,isRTL:!1}},_validateYear:function(c,d){c.year&&(c=c.year());if("number"!==typeof c||1888>c||2111<c)throw d.replace(/\{0\}/,this.local.name);return c},toMonthIndex:function(c,d,e){c=this.intercalaryMonth(c);if(e&&d!==c||1>d||12<d)throw n.local.invalidMonth.replace(/\{0\}/,this.local.name);
return c?!e&&d<=c?d-1:d:d-1},toChineseMonth:function(c,d){c.year&&(c=c.year(),d=c.month());c=this.intercalaryMonth(c);if(0>d||d>(c?12:11))throw n.local.invalidMonth.replace(/\{0\}/,this.local.name);return c?d<c?d+1:d:d+1},intercalaryMonth:function(c){c=this._validateYear(c);return r[c-r[0]]>>13},isIntercalaryMonth:function(c,d){c.year&&(c=c.year(),d=c.month());c=this.intercalaryMonth(c);return!!c&&c===d},leapYear:function(c){return 0!==this.intercalaryMonth(c)},weekOfYear:function(c,d,e){var f=this._validateYear(c,
n.local.invalidyear);f=l[f-l[0]];f=k.newDate(f>>9&4095,f>>5&15,f&31);f.add(4-(f.dayOfWeek()||7),"d");c=this.toJD(c,d,e)-f.toJD();return 1+Math.floor(c/7)},monthsInYear:function(c){return this.leapYear(c)?13:12},daysInMonth:function(c,d){c.year&&(d=c.month(),c=c.year());c=this._validateYear(c);c=r[c-r[0]];if(d>(c>>13?12:11))throw n.local.invalidMonth.replace(/\{0\}/,this.local.name);return c&1<<12-d?30:29},weekDay:function(c,d,e){return 6>(this.dayOfWeek(c,d,e)||7)},toJD:function(c,d,e){q=this._validate(c,
q,e,n.local.invalidDate);c=this._validateYear(q.year());d=q.month();e=q.day();var f=this.isIntercalaryMonth(c,d),q=this.toChineseMonth(c,d);if("object"===typeof c)d=q||{};else{if(!("number"===typeof c&&1888<=c&&2111>=c))throw Error("Lunar year outside range 1888-2111");if(!("number"===typeof q&&1<=q&&12>=q))throw Error("Lunar month outside range 1 - 12");if(!("number"===typeof e&&1<=e&&30>=e))throw Error("Lunar day outside range 1 - 30");if("object"===typeof f){var t=!1;d=f}else t=!!f,d={};c={year:c,
month:q,day:e,isIntercalary:t}}q=c.day-1;e=r[c.year-r[0]];f=(f=e>>13)?c.month>f?c.month:c.isIntercalary?c.month:c.month-1:c.month-1;for(t=0;t<f;t++)q+=e&1<<12-t?30:29;c=l[c.year-l[0]];c=new Date(c>>9&4095,(c>>5&15)-1,(c&31)+q);d.year=c.getFullYear();d.month=1+c.getMonth();d.day=c.getDate();return k.toJD(d.year,d.month,d.day)},fromJD:function(c){var d=k.fromJD(c),e=d.year();c=d.month();d=d.day();if("object"===typeof e)c=c||{};else{if(!("number"===typeof e&&1888<=e&&2111>=e))throw Error("Solar year outside range 1888-2111");
if(!("number"===typeof c&&1<=c&&12>=c))throw Error("Solar month outside range 1 - 12");if(!("number"===typeof d&&1<=d&&31>=d))throw Error("Solar day outside range 1 - 31");e={year:e,month:c,day:d};c={}}d=l[e.year-l[0]];c.year=(e.year<<9|e.month<<5|e.day)>=d?e.year:e.year-1;d=l[c.year-l[0]];e=Math.round((new Date(e.year,e.month-1,e.day)-new Date(d>>9&4095,(d>>5&15)-1,d&31))/864E5);var f=r[c.year-r[0]];for(d=0;13>d;d++){var q=f&1<<12-d?30:29;if(e<q)break;e-=q}f>>=13;!f||d<f?(c.isIntercalary=!1,c.month=
1+d):(c.isIntercalary=d===f?!0:!1,c.month=d);c.day=1+e;e=this.toMonthIndex(c.year,c.month,c.isIntercalary);return this.newDate(c.year,e,c.day)},fromString:function(c){c=c.match(m);var d=this._validateYear(+c[1]),e=this.toMonthIndex(d,+c[2],!!c[3]);return this.newDate(d,e,+c[4])},add:function(c,d,e){var f=c.year(),q=c.month(),t=this.isIntercalaryMonth(f,q);f=this.toChineseMonth(f,q);c=Object.getPrototypeOf(p.prototype).add.call(this,c,d,e);"y"===e&&(d=c.year(),e=c.month(),q=this.isIntercalaryMonth(d,
f),t=t&&q?this.toMonthIndex(d,f,!0):this.toMonthIndex(d,f,!1),t!==e&&c.month(t));return c}});var m=/^\s*(-?\d\d\d\d|\d\d)[-/](\d?\d)([iI]?)[-/](\d?\d)/m,a=/^\d?\d[iI]?/m,g=/^??[]?/m,h=/^??[]?/m;n.calendars.chinese=p;var r=[1887,5780,5802,19157,2742,50359,1198,2646,46378,7466,3412,30122,5482,67949,2396,5294,43597,6732,6954,36181,2772,4954,18781,2396,54427,5274,6730,47781,5800,6868,21210,4790,59703,2350,5270,46667,3402,3496,38325,1388,4782,18735,2350,52374,6804,7498,44457,2906,
1388,29294,4700,63789,6442,6804,56138,5802,2772,38235,1210,4698,22827,5418,63125,3476,5802,43701,2484,5302,27223,2646,70954,7466,3412,54698,5482,2412,38062,5294,2636,32038,6954,60245,2772,4826,43357,2394,5274,39501,6730,72357,5800,5844,53978,4790,2358,38039,5270,87627,3402,3496,54708,5484,4782,43311,2350,3222,27978,7498,68965,2904,5484,45677,4700,6444,39573,6804,6986,19285,2772,62811,1210,4698,47403,5418,5780,38570,5546,76469,2420,5302,51799,2646,5414,36501,3412,5546,18869,2412,54446,5276,6732,48422,
6822,2900,28010,4826,92509,2394,5274,55883,6730,6820,47956,5812,2778,18779,2358,62615,5270,5450,46757,3492,5556,27318,4718,67887,2350,3222,52554,7498,3428,38252,5468,4700,31022,6444,64149,6804,6986,43861,2772,5338,35421,2650,70955,5418,5780,54954,5546,2740,38074,5302,2646,29991,3366,61011,3412,5546,43445,2412,5294,35406,6732,72998,6820,6996,52586,2778,2396,38045,5274,6698,23333,6820,64338,5812,2746,43355,2358,5270,39499,5450,79525,3492,5548],l=[1887,966732,967231,967733,968265,968766,969297,969798,
970298,970829,971330,971830,972362,972863,973395,973896,974397,974928,975428,975929,976461,976962,977462,977994,978494,979026,979526,980026,980558,981059,981559,982091,982593,983124,983624,984124,984656,985157,985656,986189,986690,987191,987722,988222,988753,989254,989754,990286,990788,991288,991819,992319,992851,993352,993851,994383,994885,995385,995917,996418,996918,997450,997949,998481,998982,999483,1000014,1000515,1001016,1001548,1002047,1002578,1003080,1003580,1004111,1004613,1005113,1005645,
1006146,1006645,1007177,1007678,1008209,1008710,1009211,1009743,1010243,1010743,1011275,1011775,1012306,1012807,1013308,1013840,1014341,1014841,1015373,1015874,1016404,1016905,1017405,1017937,1018438,1018939,1019471,1019972,1020471,1021002,1021503,1022035,1022535,1023036,1023568,1024069,1024568,1025100,1025601,1026102,1026633,1027133,1027666,1028167,1028666,1029198,1029699,1030199,1030730,1031231,1031763,1032264,1032764,1033296,1033797,1034297,1034828,1035329,1035830,1036362,1036861,1037393,1037894,
1038394,1038925,1039427,1039927,1040459,1040959,1041491,1041992,1042492,1043023,1043524,1044024,1044556,1045057,1045558,1046090,1046590,1047121,1047622,1048122,1048654,1049154,1049655,1050187,1050689,1051219,1051720,1052220,1052751,1053252,1053752,1054284,1054786,1055285,1055817,1056317,1056849,1057349,1057850,1058382,1058883,1059383,1059915,1060415,1060947,1061447,1061947,1062479,1062981,1063480,1064012,1064514,1065014,1065545,1066045,1066577,1067078,1067578,1068110,1068611,1069112,1069642,1070142,
1070674,1071175,1071675,1072207,1072709,1073209,1073740,1074241,1074741,1075273,1075773,1076305,1076807,1077308,1077839,1078340,1078840,1079372,1079871,1080403,1080904]},{"../main":644,"object-assign":487}],631:[function(b,N,G){function p(k){this.local=this.regionalOptions[k||""]||this.regionalOptions[""]}var n=b("../main");b=b("object-assign");p.prototype=new n.baseCalendar;b(p.prototype,{name:"Coptic",jdEpoch:1825029.5,daysPerMonth:[30,30,30,30,30,30,30,30,30,30,30,30,5],hasYearZero:!1,minMonth:1,
firstMonth:1,minDay:1,regionalOptions:{"":{name:"Coptic",epochs:["BAM","AM"],monthNames:"Thout;Paopi;Hathor;Koiak;Tobi;Meshir;Paremhat;Paremoude;Pashons;Paoni;Epip;Mesori;Pi Kogi Enavot".split(";"),monthNamesShort:"Tho Pao Hath Koi Tob Mesh Pat Pad Pash Pao Epi Meso PiK".split(" "),dayNames:"Tkyriaka Pesnau Pshoment Peftoou Ptiou Psoou Psabbaton".split(" "),dayNamesShort:"Tky Pes Psh Pef Pti Pso Psa".split(" "),dayNamesMin:"Tk Pes Psh Pef Pt Pso Psa".split(" "),digits:null,dateFormat:"dd/mm/yyyy",
firstDay:0,isRTL:!1}},leapYear:function(k){k=this._validate(k,this.minMonth,this.minDay,n.local.invalidYear);k=k.year()+(0>k.year()?1:0);return 3===k%4||-1===k%4},monthsInYear:function(k){this._validate(k,this.minMonth,this.minDay,n.local.invalidYear||n.regionalOptions[""].invalidYear);return 13},weekOfYear:function(k,m,a){k=this.newDate(k,m,a);k.add(-k.dayOfWeek(),"d");return Math.floor((k.dayOfYear()-1)/7)+1},daysInMonth:function(k,m){k=this._validate(k,m,this.minDay,n.local.invalidMonth);return this.daysPerMonth[k.month()-
1]+(13===k.month()&&this.leapYear(k.year())?1:0)},weekDay:function(k,m,a){return 6>(this.dayOfWeek(k,m,a)||7)},toJD:function(k,m,a){m=this._validate(k,m,a,n.local.invalidDate);k=m.year();0>k&&k++;return m.day()+30*(m.month()-1)+365*(k-1)+Math.floor(k/4)+this.jdEpoch-1},fromJD:function(k){var m=Math.floor(k)+.5-this.jdEpoch,a=Math.floor((m-Math.floor((m+366)/1461))/365)+1;0>=a&&a--;m=Math.floor(k)+.5-this.newDate(a,1,1).toJD();k=Math.floor(m/30)+1;return this.newDate(a,k,m-30*(k-1)+1)}});n.calendars.coptic=
p},{"../main":644,"object-assign":487}],632:[function(b,N,G){function p(m){this.local=this.regionalOptions[m||""]||this.regionalOptions[""]}var n=b("../main");b=b("object-assign");p.prototype=new n.baseCalendar;b(p.prototype,{name:"Discworld",jdEpoch:1721425.5,daysPerMonth:[16,32,32,32,32,32,32,32,32,32,32,32,32],hasYearZero:!1,minMonth:1,firstMonth:1,minDay:1,regionalOptions:{"":{name:"Discworld",epochs:["BUC","UC"],monthNames:"Ick Offle February March April May June Grune August Spune Sektober Ember December".split(" "),
monthNamesShort:"Ick Off Feb Mar Apr May Jun Gru Aug Spu Sek Emb Dec".split(" "),dayNames:"Sunday Octeday Monday Tuesday Wednesday Thursday Friday Saturday".split(" "),dayNamesShort:"Sun Oct Mon Tue Wed Thu Fri Sat".split(" "),dayNamesMin:"Su Oc Mo Tu We Th Fr Sa".split(" "),digits:null,dateFormat:"yyyy/mm/dd",firstDay:2,isRTL:!1}},leapYear:function(m){this._validate(m,this.minMonth,this.minDay,n.local.invalidYear);return!1},monthsInYear:function(m){this._validate(m,this.minMonth,this.minDay,n.local.invalidYear);
return 13},daysInYear:function(m){this._validate(m,this.minMonth,this.minDay,n.local.invalidYear);return 400},weekOfYear:function(m,a,g){m=this.newDate(m,a,g);m.add(-m.dayOfWeek(),"d");return Math.floor((m.dayOfYear()-1)/8)+1},daysInMonth:function(m,a){m=this._validate(m,a,this.minDay,n.local.invalidMonth);return this.daysPerMonth[m.month()-1]},daysInWeek:function(){return 8},dayOfWeek:function(m,a,g){return(this._validate(m,a,g,n.local.invalidDate).day()+1)%8},weekDay:function(m,a,g){m=this.dayOfWeek(m,
a,g);return 2<=m&&6>=m},extraInfo:function(m,a,g){m=this._validate(m,a,g,n.local.invalidDate);return{century:k[Math.floor((m.year()-1)/100)+1]||""}},toJD:function(m,a,g){g=this._validate(m,a,g,n.local.invalidDate);m=g.year()+(0>g.year()?1:0);a=g.month();g=g.day();return g+(1<a?16:0)+(2<a?32*(a-2):0)+400*(m-1)+this.jdEpoch-1},fromJD:function(m){m=Math.floor(m+.5)-Math.floor(this.jdEpoch)-1;var a=Math.floor(m/400)+1;m-=400*(a-1);m+=15<m?16:0;var g=Math.floor(m/32)+1;return this.newDate(0>=a?a-1:a,g,
m-32*(g-1)+1)}});var k={20:"Fruitbat",21:"Anchovy"};n.calendars.discworld=p},{"../main":644,"object-assign":487}],633:[function(b,N,G){function p(k){this.local=this.regionalOptions[k||""]||this.regionalOptions[""]}var n=b("../main");b=b("object-assign");p.prototype=new n.baseCalendar;b(p.prototype,{name:"Ethiopian",jdEpoch:1724220.5,daysPerMonth:[30,30,30,30,30,30,30,30,30,30,30,30,5],hasYearZero:!1,minMonth:1,firstMonth:1,minDay:1,regionalOptions:{"":{name:"Ethiopian",epochs:["BEE","EE"],monthNames:"Meskerem Tikemet Hidar Tahesas Tir Yekatit Megabit Miazia Genbot Sene Hamle Nehase Pagume".split(" "),
monthNamesShort:"Mes Tik Hid Tah Tir Yek Meg Mia Gen Sen Ham Neh Pag".split(" "),dayNames:"Ehud Segno Maksegno Irob Hamus Arb Kidame".split(" "),dayNamesShort:"Ehu Seg Mak Iro Ham Arb Kid".split(" "),dayNamesMin:"Eh Se Ma Ir Ha Ar Ki".split(" "),digits:null,dateFormat:"dd/mm/yyyy",firstDay:0,isRTL:!1}},leapYear:function(k){k=this._validate(k,this.minMonth,this.minDay,n.local.invalidYear);k=k.year()+(0>k.year()?1:0);return 3===k%4||-1===k%4},monthsInYear:function(k){this._validate(k,this.minMonth,
this.minDay,n.local.invalidYear||n.regionalOptions[""].invalidYear);return 13},weekOfYear:function(k,m,a){k=this.newDate(k,m,a);k.add(-k.dayOfWeek(),"d");return Math.floor((k.dayOfYear()-1)/7)+1},daysInMonth:function(k,m){k=this._validate(k,m,this.minDay,n.local.invalidMonth);return this.daysPerMonth[k.month()-1]+(13===k.month()&&this.leapYear(k.year())?1:0)},weekDay:function(k,m,a){return 6>(this.dayOfWeek(k,m,a)||7)},toJD:function(k,m,a){m=this._validate(k,m,a,n.local.invalidDate);k=m.year();0>
k&&k++;return m.day()+30*(m.month()-1)+365*(k-1)+Math.floor(k/4)+this.jdEpoch-1},fromJD:function(k){var m=Math.floor(k)+.5-this.jdEpoch,a=Math.floor((m-Math.floor((m+366)/1461))/365)+1;0>=a&&a--;m=Math.floor(k)+.5-this.newDate(a,1,1).toJD();k=Math.floor(m/30)+1;return this.newDate(a,k,m-30*(k-1)+1)}});n.calendars.ethiopian=p},{"../main":644,"object-assign":487}],634:[function(b,N,G){function p(m){this.local=this.regionalOptions[m||""]||this.regionalOptions[""]}function n(m,a){return m-a*Math.floor(m/
a)}var k=b("../main");b=b("object-assign");p.prototype=new k.baseCalendar;b(p.prototype,{name:"Hebrew",jdEpoch:347995.5,daysPerMonth:[30,29,30,29,30,29,30,29,30,29,30,29,29],hasYearZero:!1,minMonth:1,firstMonth:7,minDay:1,regionalOptions:{"":{name:"Hebrew",epochs:["BAM","AM"],monthNames:"Nisan;Iyar;Sivan;Tammuz;Av;Elul;Tishrei;Cheshvan;Kislev;Tevet;Shevat;Adar;Adar II".split(";"),monthNamesShort:"Nis Iya Siv Tam Av Elu Tis Che Kis Tev She Ada Ad2".split(" "),dayNames:"Yom Rishon;Yom Sheni;Yom Shlishi;Yom Revi'i;Yom Chamishi;Yom Shishi;Yom Shabbat".split(";"),
dayNamesShort:"Ris She Shl Rev Cha Shi Sha".split(" "),dayNamesMin:"Ri She Shl Re Ch Shi Sha".split(" "),digits:null,dateFormat:"dd/mm/yyyy",firstDay:0,isRTL:!1}},leapYear:function(m){m=this._validate(m,this.minMonth,this.minDay,k.local.invalidYear);return this._leapYear(m.year())},_leapYear:function(m){return 7>n(7*(0>m?m+1:m)+1,19)},monthsInYear:function(m){this._validate(m,this.minMonth,this.minDay,k.local.invalidYear);return this._leapYear(m.year?m.year():m)?13:12},weekOfYear:function(m,a,g){m=
this.newDate(m,a,g);m.add(-m.dayOfWeek(),"d");return Math.floor((m.dayOfYear()-1)/7)+1},daysInYear:function(m){m=this._validate(m,this.minMonth,this.minDay,k.local.invalidYear).year();return this.toJD(-1===m?1:m+1,7,1)-this.toJD(m,7,1)},daysInMonth:function(m,a){m.year&&(a=m.month(),m=m.year());this._validate(m,a,this.minDay,k.local.invalidMonth);return 12===a&&this.leapYear(m)?30:8===a&&5===n(this.daysInYear(m),10)?30:9===a&&3===n(this.daysInYear(m),10)?29:this.daysPerMonth[a-1]},weekDay:function(m,
a,g){return 6!==this.dayOfWeek(m,a,g)},extraInfo:function(m,a,g){m=this._validate(m,a,g,k.local.invalidDate);return{yearType:(this.leapYear(m)?"embolismic":"common")+" "+["deficient","regular","complete"][this.daysInYear(m)%10-3]}},toJD:function(m,a,g){g=this._validate(m,a,g,k.local.invalidDate);m=g.year();a=g.month();g=g.day();var h=0>=m?m+1:m;g=this.jdEpoch+this._delay1(h)+this._delay2(h)+g+1;if(7>a){for(h=7;h<=this.monthsInYear(m);h++)g+=this.daysInMonth(m,h);h=1}else h=7;for(;h<a;h++)g+=this.daysInMonth(m,
h);return g},_delay1:function(m){m=Math.floor((235*m-234)/19);m=29*m+Math.floor((12084+13753*m)/25920);3>n(3*(m+1),7)&&m++;return m},_delay2:function(m){var a=this._delay1(m-1),g=this._delay1(m);return 356===this._delay1(m+1)-g?2:382===g-a?1:0},fromJD:function(m){m=Math.floor(m)+.5;for(var a=Math.floor(98496*(m-this.jdEpoch)/35975351)-1;m>=this.toJD(-1===a?1:a+1,7,1);)a++;for(var g=m<this.toJD(a,1,1)?7:1;m>this.toJD(a,g,this.daysInMonth(a,g));)g++;m=m-this.toJD(a,g,1)+1;return this.newDate(a,g,m)}});
k.calendars.hebrew=p},{"../main":644,"object-assign":487}],635:[function(b,N,G){function p(k){this.local=this.regionalOptions[k||""]||this.regionalOptions[""]}var n=b("../main");b=b("object-assign");p.prototype=new n.baseCalendar;b(p.prototype,{name:"Islamic",jdEpoch:1948439.5,daysPerMonth:[30,29,30,29,30,29,30,29,30,29,30,29],hasYearZero:!1,minMonth:1,firstMonth:1,minDay:1,regionalOptions:{"":{name:"Islamic",epochs:["BH","AH"],monthNames:"Muharram;Safar;Rabi' al-awwal;Rabi' al-thani;Jumada al-awwal;Jumada al-thani;Rajab;Sha'aban;Ramadan;Shawwal;Dhu al-Qi'dah;Dhu al-Hijjah".split(";"),
monthNamesShort:"Muh Saf Rab1 Rab2 Jum1 Jum2 Raj Sha' Ram Shaw DhuQ DhuH".split(" "),dayNames:"Yawm al-ahad;Yawm al-ithnayn;Yawm ath-thulaathaa';Yawm al-arbi'aa';Yawm al-khams;Yawm al-jum'a;Yawm as-sabt".split(";"),dayNamesShort:"Aha Ith Thu Arb Kha Jum Sab".split(" "),dayNamesMin:"Ah It Th Ar Kh Ju Sa".split(" "),digits:null,dateFormat:"yyyy/mm/dd",firstDay:6,isRTL:!1}},leapYear:function(k){return 11>(11*this._validate(k,this.minMonth,this.minDay,n.local.invalidYear).year()+14)%30},weekOfYear:function(k,
m,a){k=this.newDate(k,m,a);k.add(-k.dayOfWeek(),"d");return Math.floor((k.dayOfYear()-1)/7)+1},daysInYear:function(k){return this.leapYear(k)?355:354},daysInMonth:function(k,m){k=this._validate(k,m,this.minDay,n.local.invalidMonth);return this.daysPerMonth[k.month()-1]+(12===k.month()&&this.leapYear(k.year())?1:0)},weekDay:function(k,m,a){return 5!==this.dayOfWeek(k,m,a)},toJD:function(k,m,a){a=this._validate(k,m,a,n.local.invalidDate);k=a.year();m=a.month();a=a.day();k=0>=k?k+1:k;return a+Math.ceil(29.5*
(m-1))+354*(k-1)+Math.floor((3+11*k)/30)+this.jdEpoch-1},fromJD:function(k){k=Math.floor(k)+.5;var m=Math.floor((30*(k-this.jdEpoch)+10646)/10631);m=0>=m?m-1:m;var a=Math.min(12,Math.ceil((k-29-this.toJD(m,1,1))/29.5)+1);k=k-this.toJD(m,a,1)+1;return this.newDate(m,a,k)}});n.calendars.islamic=p},{"../main":644,"object-assign":487}],636:[function(b,N,G){function p(k){this.local=this.regionalOptions[k||""]||this.regionalOptions[""]}var n=b("../main");b=b("object-assign");p.prototype=new n.baseCalendar;
b(p.prototype,{name:"Julian",jdEpoch:1721423.5,daysPerMonth:[31,28,31,30,31,30,31,31,30,31,30,31],hasYearZero:!1,minMonth:1,firstMonth:1,minDay:1,regionalOptions:{"":{name:"Julian",epochs:["BC","AD"],monthNames:"January February March April May June July August September October November December".split(" "),monthNamesShort:"Jan Feb Mar Apr May Jun Jul Aug Sep Oct Nov Dec".split(" "),dayNames:"Sunday Monday Tuesday Wednesday Thursday Friday Saturday".split(" "),dayNamesShort:"Sun Mon Tue Wed Thu Fri Sat".split(" "),
dayNamesMin:"Su Mo Tu We Th Fr Sa".split(" "),digits:null,dateFormat:"mm/dd/yyyy",firstDay:0,isRTL:!1}},leapYear:function(k){k=this._validate(k,this.minMonth,this.minDay,n.local.invalidYear);k=0>k.year()?k.year()+1:k.year();return 0===k%4},weekOfYear:function(k,m,a){k=this.newDate(k,m,a);k.add(4-(k.dayOfWeek()||7),"d");return Math.floor((k.dayOfYear()-1)/7)+1},daysInMonth:function(k,m){k=this._validate(k,m,this.minDay,n.local.invalidMonth);return this.daysPerMonth[k.month()-1]+(2===k.month()&&this.leapYear(k.year())?
1:0)},weekDay:function(k,m,a){return 6>(this.dayOfWeek(k,m,a)||7)},toJD:function(k,m,a){a=this._validate(k,m,a,n.local.invalidDate);k=a.year();m=a.month();a=a.day();0>k&&k++;2>=m&&(k--,m+=12);return Math.floor(365.25*(k+4716))+Math.floor(30.6001*(m+1))+a-1524.5},fromJD:function(k){var m=Math.floor(k+.5)+1524,a=Math.floor((m-122.1)/365.25),g=Math.floor(365.25*a),h=Math.floor((m-g)/30.6001);k=h-Math.floor(14>h?1:13);a-=Math.floor(2<k?4716:4715);m=m-g-Math.floor(30.6001*h);0>=a&&a--;return this.newDate(a,
k,m)}});n.calendars.julian=p},{"../main":644,"object-assign":487}],637:[function(b,N,G){function p(m){this.local=this.regionalOptions[m||""]||this.regionalOptions[""]}function n(m,a){return m-a*Math.floor(m/a)}var k=b("../main");b=b("object-assign");p.prototype=new k.baseCalendar;b(p.prototype,{name:"Mayan",jdEpoch:584282.5,hasYearZero:!0,minMonth:0,firstMonth:0,minDay:0,regionalOptions:{"":{name:"Mayan",epochs:["",""],monthNames:"0 1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17".split(" "),monthNamesShort:"0 1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17".split(" "),
dayNames:"0 1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19".split(" "),dayNamesShort:"0 1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19".split(" "),dayNamesMin:"0 1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19".split(" "),digits:null,dateFormat:"YYYY.m.d",firstDay:0,isRTL:!1,haabMonths:"Pop Uo Zip Zotz Tzec Xul Yaxkin Mol Chen Yax Zac Ceh Mac Kankin Muan Pax Kayab Cumku Uayeb".split(" "),tzolkinMonths:"Imix Ik Akbal Kan Chicchan Cimi Manik Lamat Muluc Oc Chuen Eb Ben Ix Men Cib Caban Etznab Cauac Ahau".split(" ")}},
leapYear:function(m){this._validate(m,this.minMonth,this.minDay,k.local.invalidYear);return!1},formatYear:function(m){m=this._validate(m,this.minMonth,this.minDay,k.local.invalidYear).year();var a=Math.floor(m/400);m%=400;m+=0>m?400:0;return a+"."+Math.floor(m/20)+"."+m%20},forYear:function(m){m=m.split(".");if(3>m.length)throw"Invalid Mayan year";for(var a=0,g=0;g<m.length;g++){var h=parseInt(m[g],10);if(19<Math.abs(h)||0<g&&0>h)throw"Invalid Mayan year";a=20*a+h}return a},monthsInYear:function(m){this._validate(m,
this.minMonth,this.minDay,k.local.invalidYear);return 18},weekOfYear:function(m,a,g){this._validate(m,a,g,k.local.invalidDate);return 0},daysInYear:function(m){this._validate(m,this.minMonth,this.minDay,k.local.invalidYear);return 360},daysInMonth:function(m,a){this._validate(m,a,this.minDay,k.local.invalidMonth);return 20},daysInWeek:function(){return 5},dayOfWeek:function(m,a,g){return this._validate(m,a,g,k.local.invalidDate).day()},weekDay:function(m,a,g){this._validate(m,a,g,k.local.invalidDate);
return!0},extraInfo:function(m,a,g){a=this._validate(m,a,g,k.local.invalidDate).toJD();m=this._toHaab(a);a=this._toTzolkin(a);return{haabMonthName:this.local.haabMonths[m[0]-1],haabMonth:m[0],haabDay:m[1],tzolkinDayName:this.local.tzolkinMonths[a[0]-1],tzolkinDay:a[0],tzolkinTrecena:a[1]}},_toHaab:function(m){m-=this.jdEpoch;m=n(m+8+340,365);return[Math.floor(m/20)+1,n(m,20)]},_toTzolkin:function(m){m-=this.jdEpoch;return[n(m+20-1,20)+1,n(m+4-1,13)+1]},toJD:function(m,a,g){m=this._validate(m,a,g,
k.local.invalidDate);return m.day()+20*m.month()+360*m.year()+this.jdEpoch},fromJD:function(m){m=Math.floor(m)+.5-this.jdEpoch;var a=Math.floor(m/360);m%=360;m+=0>m?360:0;return this.newDate(a,Math.floor(m/20),m%20)}});k.calendars.mayan=p},{"../main":644,"object-assign":487}],638:[function(b,N,G){function p(m){this.local=this.regionalOptions[m||""]||this.regionalOptions[""]}var n=b("../main");b=b("object-assign");p.prototype=new n.baseCalendar;var k=n.instance("gregorian");b(p.prototype,{name:"Nanakshahi",
jdEpoch:2257673.5,daysPerMonth:[31,31,31,31,31,30,30,30,30,30,30,30],hasYearZero:!1,minMonth:1,firstMonth:1,minDay:1,regionalOptions:{"":{name:"Nanakshahi",epochs:["BN","AN"],monthNames:"Chet Vaisakh Jeth Harh Sawan Bhadon Assu Katak Maghar Poh Magh Phagun".split(" "),monthNamesShort:"Che Vai Jet Har Saw Bha Ass Kat Mgr Poh Mgh Pha".split(" "),dayNames:"Somvaar Mangalvar Budhvaar Veervaar Shukarvaar Sanicharvaar Etvaar".split(" "),dayNamesShort:"Som Mangal Budh Veer Shukar Sanichar Et".split(" "),
dayNamesMin:"So Ma Bu Ve Sh Sa Et".split(" "),digits:null,dateFormat:"dd-mm-yyyy",firstDay:0,isRTL:!1}},leapYear:function(m){m=this._validate(m,this.minMonth,this.minDay,n.local.invalidYear||n.regionalOptions[""].invalidYear);return k.leapYear(m.year()+(1>m.year()?1:0)+1469)},weekOfYear:function(m,a,g){m=this.newDate(m,a,g);m.add(1-(m.dayOfWeek()||7),"d");return Math.floor((m.dayOfYear()-1)/7)+1},daysInMonth:function(m,a){m=this._validate(m,a,this.minDay,n.local.invalidMonth);return this.daysPerMonth[m.month()-
1]+(12===m.month()&&this.leapYear(m.year())?1:0)},weekDay:function(m,a,g){return 6>(this.dayOfWeek(m,a,g)||7)},toJD:function(m,a,g){a=this._validate(m,a,g,n.local.invalidMonth);m=a.year();0>m&&m++;g=a.day();for(var h=1;h<a.month();h++)g+=this.daysPerMonth[h-1];return g+k.toJD(m+1468,3,13)},fromJD:function(m){m=Math.floor(m+.5);for(var a=Math.floor((m-(this.jdEpoch-1))/366);m>=this.toJD(a+1,1,1);)a++;m=m-Math.floor(this.toJD(a,1,1)+.5)+1;for(var g=1;m>this.daysInMonth(a,g);)m-=this.daysInMonth(a,g),
g++;return this.newDate(a,g,m)}});n.calendars.nanakshahi=p},{"../main":644,"object-assign":487}],639:[function(b,N,G){function p(k){this.local=this.regionalOptions[k||""]||this.regionalOptions[""]}var n=b("../main");b=b("object-assign");p.prototype=new n.baseCalendar;b(p.prototype,{name:"Nepali",jdEpoch:1700709.5,daysPerMonth:[31,31,32,32,31,30,30,29,30,29,30,30],hasYearZero:!1,minMonth:1,firstMonth:1,minDay:1,daysPerYear:365,regionalOptions:{"":{name:"Nepali",epochs:["BBS","ABS"],monthNames:"Baisakh Jestha Ashadh Shrawan Bhadra Ashwin Kartik Mangsir Paush Mangh Falgun Chaitra".split(" "),
monthNamesShort:"Bai Je As Shra Bha Ash Kar Mang Pau Ma Fal Chai".split(" "),dayNames:"Aaitabaar Sombaar Manglbaar Budhabaar Bihibaar Shukrabaar Shanibaar".split(" "),dayNamesShort:"Aaita Som Mangl Budha Bihi Shukra Shani".split(" "),dayNamesMin:"Aai So Man Bu Bi Shu Sha".split(" "),digits:null,dateFormat:"dd/mm/yyyy",firstDay:1,isRTL:!1}},leapYear:function(k){return this.daysInYear(k)!==this.daysPerYear},weekOfYear:function(k,m,a){k=this.newDate(k,m,a);k.add(-k.dayOfWeek(),"d");return Math.floor((k.dayOfYear()-
1)/7)+1},daysInYear:function(k){k=this._validate(k,this.minMonth,this.minDay,n.local.invalidYear).year();if("undefined"===typeof this.NEPALI_CALENDAR_DATA[k])return this.daysPerYear;for(var m=0,a=this.minMonth;12>=a;a++)m+=this.NEPALI_CALENDAR_DATA[k][a];return m},daysInMonth:function(k,m){k.year&&(m=k.month(),k=k.year());this._validate(k,m,this.minDay,n.local.invalidMonth);return"undefined"===typeof this.NEPALI_CALENDAR_DATA[k]?this.daysPerMonth[m-1]:this.NEPALI_CALENDAR_DATA[k][m]},weekDay:function(k,
m,a){return 6!==this.dayOfWeek(k,m,a)},toJD:function(k,m,a){a=this._validate(k,m,a,n.local.invalidDate);k=a.year();m=a.month();a=a.day();var g=n.instance(),h=0,r=m,l=k;this._createMissingCalendarData(k);k-=9<r||9===r&&a>=this.NEPALI_CALENDAR_DATA[l][0]?56:57;9!==m&&(h=a,r--);for(;9!==r;)0>=r&&(r=12,l--),h+=this.NEPALI_CALENDAR_DATA[l][r],r--;9===m?(h+=a-this.NEPALI_CALENDAR_DATA[l][0],0>h&&(h+=g.daysInYear(k))):h+=this.NEPALI_CALENDAR_DATA[l][9]-this.NEPALI_CALENDAR_DATA[l][0];return g.newDate(k,
1,1).add(h,"d").toJD()},fromJD:function(k){k=n.instance().fromJD(k);var m=k.year();k=k.dayOfYear();m+=56;this._createMissingCalendarData(m);for(var a=9,g=this.NEPALI_CALENDAR_DATA[m][a]-this.NEPALI_CALENDAR_DATA[m][0]+1;k>g;)a++,12<a&&(a=1,m++),g+=this.NEPALI_CALENDAR_DATA[m][a];return this.newDate(m,a,this.NEPALI_CALENDAR_DATA[m][a]-(g-k))},_createMissingCalendarData:function(k){var m=this.daysPerMonth.slice(0);m.unshift(17);for(var a=k-1;a<k+2;a++)"undefined"===typeof this.NEPALI_CALENDAR_DATA[a]&&
(this.NEPALI_CALENDAR_DATA[a]=m)},NEPALI_CALENDAR_DATA:{1970:[18,31,31,32,31,31,31,30,29,30,29,30,30],1971:[18,31,31,32,31,32,30,30,29,30,29,30,30],1972:[17,31,32,31,32,31,30,30,30,29,29,30,30],1973:[19,30,32,31,32,31,30,30,30,29,30,29,31],1974:[19,31,31,32,30,31,31,30,29,30,29,30,30],1975:[18,31,31,32,32,30,31,30,29,30,29,30,30],1976:[17,31,32,31,32,31,30,30,30,29,29,30,31],1977:[18,31,32,31,32,31,31,29,30,29,30,29,31],1978:[18,31,31,32,31,31,31,30,29,30,29,30,30],1979:[18,31,31,32,32,31,30,30,29,
30,29,30,30],1980:[17,31,32,31,32,31,30,30,30,29,29,30,31],1981:[18,31,31,31,32,31,31,29,30,30,29,30,30],1982:[18,31,31,32,31,31,31,30,29,30,29,30,30],1983:[18,31,31,32,32,31,30,30,29,30,29,30,30],1984:[17,31,32,31,32,31,30,30,30,29,29,30,31],1985:[18,31,31,31,32,31,31,29,30,30,29,30,30],1986:[18,31,31,32,31,31,31,30,29,30,29,30,30],1987:[18,31,32,31,32,31,30,30,29,30,29,30,30],1988:[17,31,32,31,32,31,30,30,30,29,29,30,31],1989:[18,31,31,31,32,31,31,30,29,30,29,30,30],1990:[18,31,31,32,31,31,31,30,
29,30,29,30,30],1991:[18,31,32,31,32,31,30,30,29,30,29,30,30],1992:[17,31,32,31,32,31,30,30,30,29,30,29,31],1993:[18,31,31,31,32,31,31,30,29,30,29,30,30],1994:[18,31,31,32,31,31,31,30,29,30,29,30,30],1995:[17,31,32,31,32,31,30,30,30,29,29,30,30],1996:[17,31,32,31,32,31,30,30,30,29,30,29,31],1997:[18,31,31,32,31,31,31,30,29,30,29,30,30],1998:[18,31,31,32,31,31,31,30,29,30,29,30,30],1999:[17,31,32,31,32,31,30,30,30,29,29,30,31],2E3:[17,30,32,31,32,31,30,30,30,29,30,29,31],2001:[18,31,31,32,31,31,31,
30,29,30,29,30,30],2002:[18,31,31,32,32,31,30,30,29,30,29,30,30],2003:[17,31,32,31,32,31,30,30,30,29,29,30,31],2004:[17,30,32,31,32,31,30,30,30,29,30,29,31],2005:[18,31,31,32,31,31,31,30,29,30,29,30,30],2006:[18,31,31,32,32,31,30,30,29,30,29,30,30],2007:[17,31,32,31,32,31,30,30,30,29,29,30,31],2008:[17,31,31,31,32,31,31,29,30,30,29,29,31],2009:[18,31,31,32,31,31,31,30,29,30,29,30,30],2010:[18,31,31,32,32,31,30,30,29,30,29,30,30],2011:[17,31,32,31,32,31,30,30,30,29,29,30,31],2012:[17,31,31,31,32,31,
31,29,30,30,29,30,30],2013:[18,31,31,32,31,31,31,30,29,30,29,30,30],2014:[18,31,31,32,32,31,30,30,29,30,29,30,30],2015:[17,31,32,31,32,31,30,30,30,29,29,30,31],2016:[17,31,31,31,32,31,31,29,30,30,29,30,30],2017:[18,31,31,32,31,31,31,30,29,30,29,30,30],2018:[18,31,32,31,32,31,30,30,29,30,29,30,30],2019:[17,31,32,31,32,31,30,30,30,29,30,29,31],2020:[17,31,31,31,32,31,31,30,29,30,29,30,30],2021:[18,31,31,32,31,31,31,30,29,30,29,30,30],2022:[17,31,32,31,32,31,30,30,30,29,29,30,30],2023:[17,31,32,31,32,
31,30,30,30,29,30,29,31],2024:[17,31,31,31,32,31,31,30,29,30,29,30,30],2025:[18,31,31,32,31,31,31,30,29,30,29,30,30],2026:[17,31,32,31,32,31,30,30,30,29,29,30,31],2027:[17,30,32,31,32,31,30,30,30,29,30,29,31],2028:[17,31,31,32,31,31,31,30,29,30,29,30,30],2029:[18,31,31,32,31,32,30,30,29,30,29,30,30],2030:[17,31,32,31,32,31,30,30,30,30,30,30,31],2031:[17,31,32,31,32,31,31,31,31,31,31,31,31],2032:[17,32,32,32,32,32,32,32,32,32,32,32,32],2033:[18,31,31,32,32,31,30,30,29,30,29,30,30],2034:[17,31,32,31,
32,31,30,30,30,29,29,30,31],2035:[17,30,32,31,32,31,31,29,30,30,29,29,31],2036:[17,31,31,32,31,31,31,30,29,30,29,30,30],2037:[18,31,31,32,32,31,30,30,29,30,29,30,30],2038:[17,31,32,31,32,31,30,30,30,29,29,30,31],2039:[17,31,31,31,32,31,31,29,30,30,29,30,30],2040:[17,31,31,32,31,31,31,30,29,30,29,30,30],2041:[18,31,31,32,32,31,30,30,29,30,29,30,30],2042:[17,31,32,31,32,31,30,30,30,29,29,30,31],2043:[17,31,31,31,32,31,31,29,30,30,29,30,30],2044:[17,31,31,32,31,31,31,30,29,30,29,30,30],2045:[18,31,32,
31,32,31,30,30,29,30,29,30,30],2046:[17,31,32,31,32,31,30,30,30,29,29,30,31],2047:[17,31,31,31,32,31,31,30,29,30,29,30,30],2048:[17,31,31,32,31,31,31,30,29,30,29,30,30],2049:[17,31,32,31,32,31,30,30,30,29,29,30,30],2050:[17,31,32,31,32,31,30,30,30,29,30,29,31],2051:[17,31,31,31,32,31,31,30,29,30,29,30,30],2052:[17,31,31,32,31,31,31,30,29,30,29,30,30],2053:[17,31,32,31,32,31,30,30,30,29,29,30,30],2054:[17,31,32,31,32,31,30,30,30,29,30,29,31],2055:[17,31,31,32,31,31,31,30,29,30,30,29,30],2056:[17,31,
31,32,31,32,30,30,29,30,29,30,30],2057:[17,31,32,31,32,31,30,30,30,29,29,30,31],2058:[17,30,32,31,32,31,30,30,30,29,30,29,31],2059:[17,31,31,32,31,31,31,30,29,30,29,30,30],2060:[17,31,31,32,32,31,30,30,29,30,29,30,30],2061:[17,31,32,31,32,31,30,30,30,29,29,30,31],2062:[17,30,32,31,32,31,31,29,30,29,30,29,31],2063:[17,31,31,32,31,31,31,30,29,30,29,30,30],2064:[17,31,31,32,32,31,30,30,29,30,29,30,30],2065:[17,31,32,31,32,31,30,30,30,29,29,30,31],2066:[17,31,31,31,32,31,31,29,30,30,29,29,31],2067:[17,
31,31,32,31,31,31,30,29,30,29,30,30],2068:[17,31,31,32,32,31,30,30,29,30,29,30,30],2069:[17,31,32,31,32,31,30,30,30,29,29,30,31],2070:[17,31,31,31,32,31,31,29,30,30,29,30,30],2071:[17,31,31,32,31,31,31,30,29,30,29,30,30],2072:[17,31,32,31,32,31,30,30,29,30,29,30,30],2073:[17,31,32,31,32,31,30,30,30,29,29,30,31],2074:[17,31,31,31,32,31,31,30,29,30,29,30,30],2075:[17,31,31,32,31,31,31,30,29,30,29,30,30],2076:[16,31,32,31,32,31,30,30,30,29,29,30,30],2077:[17,31,32,31,32,31,30,30,30,29,30,29,31],2078:[17,
31,31,31,32,31,31,30,29,30,29,30,30],2079:[17,31,31,32,31,31,31,30,29,30,29,30,30],2080:[16,31,32,31,32,31,30,30,30,29,29,30,30],2081:[17,31,31,32,32,31,30,30,30,29,30,30,30],2082:[17,31,32,31,32,31,30,30,30,29,30,30,30],2083:[17,31,31,32,31,31,30,30,30,29,30,30,30],2084:[17,31,31,32,31,31,30,30,30,29,30,30,30],2085:[17,31,32,31,32,31,31,30,30,29,30,30,30],2086:[17,31,32,31,32,31,30,30,30,29,30,30,30],2087:[16,31,31,32,31,31,31,30,30,29,30,30,30],2088:[16,30,31,32,32,30,31,30,30,29,30,30,30],2089:[17,
31,32,31,32,31,30,30,30,29,30,30,30],2090:[17,31,32,31,32,31,30,30,30,29,30,30,30],2091:[16,31,31,32,31,31,31,30,30,29,30,30,30],2092:[16,31,31,32,32,31,30,30,30,29,30,30,30],2093:[17,31,32,31,32,31,30,30,30,29,30,30,30],2094:[17,31,31,32,31,31,30,30,30,29,30,30,30],2095:[17,31,31,32,31,31,31,30,29,30,30,30,30],2096:[17,30,31,32,32,31,30,30,29,30,29,30,30],2097:[17,31,32,31,32,31,30,30,30,29,30,30,30],2098:[17,31,31,32,31,31,31,29,30,29,30,30,31],2099:[17,31,31,32,31,31,31,30,29,29,30,30,30],2100:[17,
31,32,31,32,30,31,30,29,30,29,30,30]}});n.calendars.nepali=p},{"../main":644,"object-assign":487}],640:[function(b,N,G){function p(k){this.local=this.regionalOptions[k||""]||this.regionalOptions[""]}var n=b("../main");b=b("object-assign");p.prototype=new n.baseCalendar;b(p.prototype,{name:"Persian",jdEpoch:1948320.5,daysPerMonth:[31,31,31,31,31,31,30,30,30,30,30,29],hasYearZero:!1,minMonth:1,firstMonth:1,minDay:1,regionalOptions:{"":{name:"Persian",epochs:["BP","AP"],monthNames:"Farvardin Ordibehesht Khordad Tir Mordad Shahrivar Mehr Aban Azar Day Bahman Esfand".split(" "),
monthNamesShort:"Far Ord Kho Tir Mor Sha Meh Aba Aza Day Bah Esf".split(" "),dayNames:"Yekshambe Doshambe Seshambe Chharshambe Panjshambe Jom'e Shambe".split(" "),dayNamesShort:"Yek Do Se Ch Panj Jom Sha".split(" "),dayNamesMin:"Ye Do Se Ch Pa Jo Sh".split(" "),digits:null,dateFormat:"yyyy/mm/dd",firstDay:6,isRTL:!1}},leapYear:function(k){k=this._validate(k,this.minMonth,this.minDay,n.local.invalidYear);return 682>682*((k.year()-(0<k.year()?474:473))%2820+512)%2816},weekOfYear:function(k,m,a){k=
this.newDate(k,m,a);k.add(-((k.dayOfWeek()+1)%7),"d");return Math.floor((k.dayOfYear()-1)/7)+1},daysInMonth:function(k,m){k=this._validate(k,m,this.minDay,n.local.invalidMonth);return this.daysPerMonth[k.month()-1]+(12===k.month()&&this.leapYear(k.year())?1:0)},weekDay:function(k,m,a){return 5!==this.dayOfWeek(k,m,a)},toJD:function(k,m,a){a=this._validate(k,m,a,n.local.invalidDate);k=a.year();m=a.month();a=a.day();k-=0<=k?474:473;var g=474+(k-2820*Math.floor(k/2820));return a+(7>=m?31*(m-1):30*(m-
1)+6)+Math.floor((682*g-110)/2816)+365*(g-1)+1029983*Math.floor(k/2820)+this.jdEpoch-1},fromJD:function(k){k=Math.floor(k)+.5;var m=k-this.toJD(475,1,1),a=Math.floor(m/1029983);m-=1029983*Math.floor(m/1029983);var g=2820;1029982!==m&&(g=Math.floor(m/366),g=Math.floor((2134*g+2816*(m-366*Math.floor(m/366))+2815)/1028522)+g+1);a=g+2820*a+474;a=0>=a?a-1:a;m=k-this.toJD(a,1,1)+1;m=186>=m?Math.ceil(m/31):Math.ceil((m-6)/30);k=k-this.toJD(a,m,1)+1;return this.newDate(a,m,k)}});n.calendars.persian=p;n.calendars.jalali=
p},{"../main":644,"object-assign":487}],641:[function(b,N,G){function p(m){this.local=this.regionalOptions[m||""]||this.regionalOptions[""]}var n=b("../main");b=b("object-assign");var k=n.instance();p.prototype=new n.baseCalendar;b(p.prototype,{name:"Taiwan",jdEpoch:2419402.5,yearsOffset:1911,daysPerMonth:[31,28,31,30,31,30,31,31,30,31,30,31],hasYearZero:!1,minMonth:1,firstMonth:1,minDay:1,regionalOptions:{"":{name:"Taiwan",epochs:["BROC","ROC"],monthNames:"January February March April May June July August September October November December".split(" "),
monthNamesShort:"Jan Feb Mar Apr May Jun Jul Aug Sep Oct Nov Dec".split(" "),dayNames:"Sunday Monday Tuesday Wednesday Thursday Friday Saturday".split(" "),dayNamesShort:"Sun Mon Tue Wed Thu Fri Sat".split(" "),dayNamesMin:"Su Mo Tu We Th Fr Sa".split(" "),digits:null,dateFormat:"yyyy/mm/dd",firstDay:1,isRTL:!1}},leapYear:function(m){m=this._validate(m,this.minMonth,this.minDay,n.local.invalidYear);m=this._t2gYear(m.year());return k.leapYear(m)},weekOfYear:function(m,a,g){a=this._validate(m,this.minMonth,
this.minDay,n.local.invalidYear);m=this._t2gYear(a.year());return k.weekOfYear(m,a.month(),a.day())},daysInMonth:function(m,a){m=this._validate(m,a,this.minDay,n.local.invalidMonth);return this.daysPerMonth[m.month()-1]+(2===m.month()&&this.leapYear(m.year())?1:0)},weekDay:function(m,a,g){return 6>(this.dayOfWeek(m,a,g)||7)},toJD:function(m,a,g){a=this._validate(m,a,g,n.local.invalidDate);m=this._t2gYear(a.year());return k.toJD(m,a.month(),a.day())},fromJD:function(m){m=k.fromJD(m);var a=this._g2tYear(m.year());
return this.newDate(a,m.month(),m.day())},_t2gYear:function(m){return m+this.yearsOffset+(m>=-this.yearsOffset&&-1>=m?1:0)},_g2tYear:function(m){return m-this.yearsOffset-(1<=m&&m<=this.yearsOffset?1:0)}});n.calendars.taiwan=p},{"../main":644,"object-assign":487}],642:[function(b,N,G){function p(m){this.local=this.regionalOptions[m||""]||this.regionalOptions[""]}var n=b("../main");b=b("object-assign");var k=n.instance();p.prototype=new n.baseCalendar;b(p.prototype,{name:"Thai",jdEpoch:1523098.5,yearsOffset:543,
daysPerMonth:[31,28,31,30,31,30,31,31,30,31,30,31],hasYearZero:!1,minMonth:1,firstMonth:1,minDay:1,regionalOptions:{"":{name:"Thai",epochs:["BBE","BE"],monthNames:"January February March April May June July August September October November December".split(" "),monthNamesShort:"Jan Feb Mar Apr May Jun Jul Aug Sep Oct Nov Dec".split(" "),dayNames:"Sunday Monday Tuesday Wednesday Thursday Friday Saturday".split(" "),dayNamesShort:"Sun Mon Tue Wed Thu Fri Sat".split(" "),dayNamesMin:"Su Mo Tu We Th Fr Sa".split(" "),
digits:null,dateFormat:"dd/mm/yyyy",firstDay:0,isRTL:!1}},leapYear:function(m){m=this._validate(m,this.minMonth,this.minDay,n.local.invalidYear);m=this._t2gYear(m.year());return k.leapYear(m)},weekOfYear:function(m,a,g){a=this._validate(m,this.minMonth,this.minDay,n.local.invalidYear);m=this._t2gYear(a.year());return k.weekOfYear(m,a.month(),a.day())},daysInMonth:function(m,a){m=this._validate(m,a,this.minDay,n.local.invalidMonth);return this.daysPerMonth[m.month()-1]+(2===m.month()&&this.leapYear(m.year())?
1:0)},weekDay:function(m,a,g){return 6>(this.dayOfWeek(m,a,g)||7)},toJD:function(m,a,g){a=this._validate(m,a,g,n.local.invalidDate);m=this._t2gYear(a.year());return k.toJD(m,a.month(),a.day())},fromJD:function(m){m=k.fromJD(m);var a=this._g2tYear(m.year());return this.newDate(a,m.month(),m.day())},_t2gYear:function(m){return m-this.yearsOffset-(1<=m&&m<=this.yearsOffset?1:0)},_g2tYear:function(m){return m+this.yearsOffset+(m>=-this.yearsOffset&&-1>=m?1:0)}});n.calendars.thai=p},{"../main":644,"object-assign":487}],
643:[function(b,N,G){function p(m){this.local=this.regionalOptions[m||""]||this.regionalOptions[""]}var n=b("../main");b=b("object-assign");p.prototype=new n.baseCalendar;b(p.prototype,{name:"UmmAlQura",hasYearZero:!1,minMonth:1,firstMonth:1,minDay:1,regionalOptions:{"":{name:"Umm al-Qura",epochs:["BH","AH"],monthNames:"Al-Muharram;Safar;Rabi' al-awwal;Rabi' Al-Thani;Jumada Al-Awwal;Jumada Al-Thani;Rajab;Sha'aban;Ramadan;Shawwal;Dhu al-Qi'dah;Dhu al-Hijjah".split(";"),monthNamesShort:"Muh Saf Rab1 Rab2 Jum1 Jum2 Raj Sha' Ram Shaw DhuQ DhuH".split(" "),
dayNames:"Yawm al-Ahad;Yawm al-Ithnain;Yawm al-Thalth;Yawm al-Arba;Yawm al-Khams;Yawm al-Juma;Yawm al-Sabt".split(";"),dayNamesMin:"Ah Ith Th Ar Kh Ju Sa".split(" "),digits:null,dateFormat:"yyyy/mm/dd",firstDay:6,isRTL:!0}},leapYear:function(m){m=this._validate(m,this.minMonth,this.minDay,n.local.invalidYear);return 355===this.daysInYear(m.year())},weekOfYear:function(m,a,g){m=this.newDate(m,a,g);m.add(-m.dayOfWeek(),"d");return Math.floor((m.dayOfYear()-1)/7)+1},daysInYear:function(m){for(var a=
0,g=1;12>=g;g++)a+=this.daysInMonth(m,g);return a},daysInMonth:function(m,a){m=this._validate(m,a,this.minDay,n.local.invalidMonth).toJD()-24E5+.5;for(var g=a=0;g<k.length;g++){if(k[g]>m)return k[a]-k[a-1];a++}return 30},weekDay:function(m,a,g){return 5!==this.dayOfWeek(m,a,g)},toJD:function(m,a,g){m=this._validate(m,a,g,n.local.invalidDate);a=12*(m.year()-1)+m.month()-15292;return m.day()+k[a-1]-1+24E5-.5},fromJD:function(m){m=m-24E5+.5;for(var a=0,g=0;g<k.length&&!(k[g]>m);g++)a++;g=a+15292;var h=
Math.floor((g-1)/12);return this.newDate(h+1,g-12*h,m-k[a-1]+1)},isValid:function(m,a,g){var h=n.baseCalendar.prototype.isValid.apply(this,arguments);h&&(m=null!=m.year?m.year:m,h=1276<=m&&1500>=m);return h},_validate:function(m,a,g,h){var r=n.baseCalendar.prototype._validate.apply(this,arguments);if(1276>r.year||1500<r.year)throw h.replace(/\{0\}/,this.local.name);return r}});n.calendars.ummalqura=p;var k=[20,50,79,109,138,168,197,227,256,286,315,345,374,404,433,463,492,522,551,581,611,641,670,700,
729,759,788,818,847,877,906,936,965,995,1024,1054,1083,1113,1142,1172,1201,1231,1260,1290,1320,1350,1379,1409,1438,1468,1497,1527,1556,1586,1615,1645,1674,1704,1733,1763,1792,1822,1851,1881,1910,1940,1969,1999,2028,2058,2087,2117,2146,2176,2205,2235,2264,2294,2323,2353,2383,2413,2442,2472,2501,2531,2560,2590,2619,2649,2678,2708,2737,2767,2796,2826,2855,2885,2914,2944,2973,3003,3032,3062,3091,3121,3150,3180,3209,3239,3268,3298,3327,3357,3386,3416,3446,3476,3505,3535,3564,3594,3623,3653,3682,3712,3741,
3771,3800,3830,3859,3889,3918,3948,3977,4007,4036,4066,4095,4125,4155,4185,4214,4244,4273,4303,4332,4362,4391,4421,4450,4480,4509,4539,4568,4598,4627,4657,4686,4716,4745,4775,4804,4834,4863,4893,4922,4952,4981,5011,5040,5070,5099,5129,5158,5188,5218,5248,5277,5307,5336,5366,5395,5425,5454,5484,5513,5543,5572,5602,5631,5661,5690,5720,5749,5779,5808,5838,5867,5897,5926,5956,5985,6015,6044,6074,6103,6133,6162,6192,6221,6251,6281,6311,6340,6370,6399,6429,6458,6488,6517,6547,6576,6606,6635,6665,6694,6724,
6753,6783,6812,6842,6871,6901,6930,6960,6989,7019,7048,7078,7107,7137,7166,7196,7225,7255,7284,7314,7344,7374,7403,7433,7462,7492,7521,7551,7580,7610,7639,7669,7698,7728,7757,7787,7816,7846,7875,7905,7934,7964,7993,8023,8053,8083,8112,8142,8171,8201,8230,8260,8289,8319,8348,8378,8407,8437,8466,8496,8525,8555,8584,8614,8643,8673,8702,8732,8761,8791,8821,8850,8880,8909,8938,8968,8997,9027,9056,9086,9115,9145,9175,9205,9234,9264,9293,9322,9352,9381,9410,9440,9470,9499,9529,9559,9589,9618,9648,9677,9706,
9736,9765,9794,9824,9853,9883,9913,9943,9972,10002,10032,10061,10090,10120,10149,10178,10208,10237,10267,10297,10326,10356,10386,10415,10445,10474,10504,10533,10562,10592,10621,10651,10680,10710,10740,10770,10799,10829,10858,10888,10917,10947,10976,11005,11035,11064,11094,11124,11153,11183,11213,11242,11272,11301,11331,11360,11389,11419,11448,11478,11507,11537,11567,11596,11626,11655,11685,11715,11744,11774,11803,11832,11862,11891,11921,11950,11980,12010,12039,12069,12099,12128,12158,12187,12216,
12246,12275,12304,12334,12364,12393,12423,12453,12483,12512,12542,12571,12600,12630,12659,12688,12718,12747,12777,12807,12837,12866,12896,12926,12955,12984,13014,13043,13072,13102,13131,13161,13191,13220,13250,13280,13310,13339,13368,13398,13427,13456,13486,13515,13545,13574,13604,13634,13664,13693,13723,13752,13782,13811,13840,13870,13899,13929,13958,13988,14018,14047,14077,14107,14136,14166,14195,14224,14254,14283,14313,14342,14372,14401,14431,14461,14490,14520,14550,14579,14609,14638,14667,14697,
14726,14756,14785,14815,14844,14874,14904,14933,14963,14993,15021,15051,15081,15110,15140,15169,15199,15228,15258,15287,15317,15347,15377,15406,15436,15465,15494,15524,15553,15582,15612,15641,15671,15701,15731,15760,15790,15820,15849,15878,15908,15937,15966,15996,16025,16055,16085,16114,16144,16174,16204,16233,16262,16292,16321,16350,16380,16409,16439,16468,16498,16528,16558,16587,16617,16646,16676,16705,16734,16764,16793,16823,16852,16882,16912,16941,16971,17001,17030,17060,17089,17118,17148,17177,
17207,17236,17266,17295,17325,17355,17384,17414,17444,17473,17502,17532,17561,17591,17620,17650,17679,17709,17738,17768,17798,17827,17857,17886,17916,17945,17975,18004,18034,18063,18093,18122,18152,18181,18211,18241,18270,18300,18330,18359,18388,18418,18447,18476,18506,18535,18565,18595,18625,18654,18684,18714,18743,18772,18802,18831,18860,18890,18919,18949,18979,19008,19038,19068,19098,19127,19156,19186,19215,19244,19274,19303,19333,19362,19392,19422,19452,19481,19511,19540,19570,19599,19628,19658,
19687,19717,19746,19776,19806,19836,19865,19895,19924,19954,19983,20012,20042,20071,20101,20130,20160,20190,20219,20249,20279,20308,20338,20367,20396,20426,20455,20485,20514,20544,20573,20603,20633,20662,20692,20721,20751,20780,20810,20839,20869,20898,20928,20957,20987,21016,21046,21076,21105,21135,21164,21194,21223,21253,21282,21312,21341,21371,21400,21430,21459,21489,21519,21548,21578,21607,21637,21666,21696,21725,21754,21784,21813,21843,21873,21902,21932,21962,21991,22021,22050,22080,22109,22138,
22168,22197,22227,22256,22286,22316,22346,22375,22405,22434,22464,22493,22522,22552,22581,22611,22640,22670,22700,22730,22759,22789,22818,22848,22877,22906,22936,22965,22994,23024,23054,23083,23113,23143,23173,23202,23232,23261,23290,23320,23349,23379,23408,23438,23467,23497,23527,23556,23586,23616,23645,23674,23704,23733,23763,23792,23822,23851,23881,23910,23940,23970,23999,24029,24058,24088,24117,24147,24176,24206,24235,24265,24294,24324,24353,24383,24413,24442,24472,24501,24531,24560,24590,24619,
24648,24678,24707,24737,24767,24796,24826,24856,24885,24915,24944,24974,25003,25032,25062,25091,25121,25150,25180,25210,25240,25269,25299,25328,25358,25387,25416,25446,25475,25505,25534,25564,25594,25624,25653,25683,25712,25742,25771,25800,25830,25859,25888,25918,25948,25977,26007,26037,26067,26096,26126,26155,26184,26214,26243,26272,26302,26332,26361,26391,26421,26451,26480,26510,26539,26568,26598,26627,26656,26686,26715,26745,26775,26805,26834,26864,26893,26923,26952,26982,27011,27041,27070,27099,
27129,27159,27188,27218,27248,27277,27307,27336,27366,27395,27425,27454,27484,27513,27542,27572,27602,27631,27661,27691,27720,27750,27779,27809,27838,27868,27897,27926,27956,27985,28015,28045,28074,28104,28134,28163,28193,28222,28252,28281,28310,28340,28369,28399,28428,28458,28488,28517,28547,28577,28607,28636,28665,28695,28724,28754,28783,28813,28843,28872,28901,28931,28960,28990,29019,29049,29078,29108,29137,29167,29196,29226,29255,29285,29315,29345,29375,29404,29434,29463,29492,29522,29551,29580,
29610,29640,29669,29699,29729,29759,29788,29818,29847,29876,29906,29935,29964,29994,30023,30053,30082,30112,30141,30171,30200,30230,30259,30289,30318,30348,30378,30408,30437,30467,30496,30526,30555,30585,30614,30644,30673,30703,30732,30762,30791,30821,30850,30880,30909,30939,30968,30998,31027,31057,31086,31116,31145,31175,31204,31234,31263,31293,31322,31352,31381,31411,31441,31471,31500,31530,31559,31589,31618,31648,31676,31706,31736,31766,31795,31825,31854,31884,31913,31943,31972,32002,32031,32061,
32090,32120,32150,32180,32209,32239,32268,32298,32327,32357,32386,32416,32445,32475,32504,32534,32563,32593,32622,32652,32681,32711,32740,32770,32799,32829,32858,32888,32917,32947,32976,33006,33035,33065,33094,33124,33153,33183,33213,33243,33272,33302,33331,33361,33390,33420,33450,33479,33509,33539,33568,33598,33627,33657,33686,33716,33745,33775,33804,33834,33863,33893,33922,33952,33981,34011,34040,34069,34099,34128,34158,34187,34217,34247,34277,34306,34336,34365,34395,34424,34454,34483,34512,34542,
34571,34601,34631,34660,34690,34719,34749,34778,34808,34837,34867,34896,34926,34955,34985,35015,35044,35074,35103,35133,35162,35192,35222,35251,35280,35310,35340,35370,35399,35429,35458,35488,35517,35547,35576,35605,35635,35665,35694,35723,35753,35782,35811,35841,35871,35901,35930,35960,35989,36019,36048,36078,36107,36136,36166,36195,36225,36254,36284,36314,36343,36373,36403,36433,36462,36492,36521,36551,36580,36610,36639,36669,36698,36728,36757,36786,36816,36845,36875,36904,36934,36963,36993,37022,
37052,37081,37111,37141,37170,37200,37229,37259,37288,37318,37347,37377,37406,37436,37465,37495,37524,37554,37584,37613,37643,37672,37701,37731,37760,37790,37819,37849,37878,37908,37938,37967,37997,38027,38056,38085,38115,38144,38174,38203,38233,38262,38292,38322,38351,38381,38410,38440,38469,38499,38528,38558,38587,38617,38646,38676,38705,38735,38764,38794,38823,38853,38882,38912,38941,38971,39001,39030,39059,39089,39118,39148,39178,39208,39237,39267,39297,39326,39355,39385,39414,39444,39473,39503,
39532,39562,39592,39621,39650,39680,39709,39739,39768,39798,39827,39857,39886,39916,39946,39975,40005,40035,40064,40094,40123,40153,40182,40212,40241,40271,40300,40330,40359,40389,40418,40448,40477,40507,40536,40566,40595,40625,40655,40685,40714,40744,40773,40803,40832,40862,40892,40921,40951,40980,41009,41039,41068,41098,41127,41157,41186,41216,41245,41275,41304,41334,41364,41393,41422,41452,41481,41511,41540,41570,41599,41629,41658,41688,41718,41748,41777,41807,41836,41865,41894,41924,41953,41983,
42012,42042,42072,42102,42131,42161,42190,42220,42249,42279,42308,42337,42367,42397,42426,42456,42485,42515,42545,42574,42604,42633,42662,42692,42721,42751,42780,42810,42839,42869,42899,42929,42958,42988,43017,43046,43076,43105,43135,43164,43194,43223,43253,43283,43312,43342,43371,43401,43430,43460,43489,43519,43548,43578,43607,43637,43666,43696,43726,43755,43785,43814,43844,43873,43903,43932,43962,43991,44021,44050,44080,44109,44139,44169,44198,44228,44258,44287,44317,44346,44375,44405,44434,44464,
44493,44523,44553,44582,44612,44641,44671,44700,44730,44759,44788,44818,44847,44877,44906,44936,44966,44996,45025,45055,45084,45114,45143,45172,45202,45231,45261,45290,45320,45350,45380,45409,45439,45468,45498,45527,45556,45586,45615,45644,45674,45704,45733,45763,45793,45823,45852,45882,45911,45940,45970,45999,46028,46058,46088,46117,46147,46177,46206,46236,46265,46295,46324,46354,46383,46413,46442,46472,46501,46531,46560,46590,46620,46649,46679,46708,46738,46767,46797,46826,46856,46885,46915,46944,
46974,47003,47033,47063,47092,47122,47151,47181,47210,47240,47269,47298,47328,47357,47387,47417,47446,47476,47506,47535,47565,47594,47624,47653,47682,47712,47741,47771,47800,47830,47860,47890,47919,47949,47978,48008,48037,48066,48096,48125,48155,48184,48214,48244,48273,48303,48333,48362,48392,48421,48450,48480,48509,48538,48568,48598,48627,48657,48687,48717,48746,48776,48805,48834,48864,48893,48922,48952,48982,49011,49041,49071,49100,49130,49160,49189,49218,49248,49277,49306,49336,49365,49395,49425,
49455,49484,49514,49543,49573,49602,49632,49661,49690,49720,49749,49779,49809,49838,49868,49898,49927,49957,49986,50016,50045,50075,50104,50133,50163,50192,50222,50252,50281,50311,50340,50370,50400,50429,50459,50488,50518,50547,50576,50606,50635,50665,50694,50724,50754,50784,50813,50843,50872,50902,50931,50960,50990,51019,51049,51078,51108,51138,51167,51197,51227,51256,51286,51315,51345,51374,51403,51433,51462,51492,51522,51552,51582,51611,51641,51670,51699,51729,51758,51787,51816,51846,51876,51906,
51936,51965,51995,52025,52054,52083,52113,52142,52171,52200,52230,52260,52290,52319,52349,52379,52408,52438,52467,52497,52526,52555,52585,52614,52644,52673,52703,52733,52762,52792,52822,52851,52881,52910,52939,52969,52998,53028,53057,53087,53116,53146,53176,53205,53235,53264,53294,53324,53353,53383,53412,53441,53471,53500,53530,53559,53589,53619,53648,53678,53708,53737,53767,53796,53825,53855,53884,53913,53943,53973,54003,54032,54062,54092,54121,54151,54180,54209,54239,54268,54297,54327,54357,54387,
54416,54446,54476,54505,54535,54564,54593,54623,54652,54681,54711,54741,54770,54800,54830,54859,54889,54919,54948,54977,55007,55036,55066,55095,55125,55154,55184,55213,55243,55273,55302,55332,55361,55391,55420,55450,55479,55508,55538,55567,55597,55627,55657,55686,55716,55745,55775,55804,55834,55863,55892,55922,55951,55981,56011,56040,56070,56100,56129,56159,56188,56218,56247,56276,56306,56335,56365,56394,56424,56454,56483,56513,56543,56572,56601,56631,56660,56690,56719,56749,56778,56808,56837,56867,
56897,56926,56956,56985,57015,57044,57074,57103,57133,57162,57192,57221,57251,57280,57310,57340,57369,57399,57429,57458,57487,57517,57546,57576,57605,57634,57664,57694,57723,57753,57783,57813,57842,57871,57901,57930,57959,57989,58018,58048,58077,58107,58137,58167,58196,58226,58255,58285,58314,58343,58373,58402,58432,58461,58491,58521,58551,58580,58610,58639,58669,58698,58727,58757,58786,58816,58845,58875,58905,58934,58964,58994,59023,59053,59082,59111,59141,59170,59200,59229,59259,59288,59318,59348,
59377,59407,59436,59466,59495,59525,59554,59584,59613,59643,59672,59702,59731,59761,59791,59820,59850,59879,59909,59939,59968,59997,60027,60056,60086,60115,60145,60174,60204,60234,60264,60293,60323,60352,60381,60411,60440,60469,60499,60528,60558,60588,60618,60648,60677,60707,60736,60765,60795,60824,60853,60883,60912,60942,60972,61002,61031,61061,61090,61120,61149,61179,61208,61237,61267,61296,61326,61356,61385,61415,61445,61474,61504,61533,61563,61592,61621,61651,61680,61710,61739,61769,61799,61828,
61858,61888,61917,61947,61976,62006,62035,62064,62094,62123,62153,62182,62212,62242,62271,62301,62331,62360,62390,62419,62448,62478,62507,62537,62566,62596,62625,62655,62685,62715,62744,62774,62803,62832,62862,62891,62921,62950,62980,63009,63039,63069,63099,63128,63157,63187,63216,63246,63275,63305,63334,63363,63393,63423,63453,63482,63512,63541,63571,63600,63630,63659,63689,63718,63747,63777,63807,63836,63866,63895,63925,63955,63984,64014,64043,64073,64102,64131,64161,64190,64220,64249,64279,64309,
64339,64368,64398,64427,64457,64486,64515,64545,64574,64603,64633,64663,64692,64722,64752,64782,64811,64841,64870,64899,64929,64958,64987,65017,65047,65076,65106,65136,65166,65195,65225,65254,65283,65313,65342,65371,65401,65431,65460,65490,65520,65549,65579,65608,65638,65667,65697,65726,65755,65785,65815,65844,65874,65903,65933,65963,65992,66022,66051,66081,66110,66140,66169,66199,66228,66258,66287,66317,66346,66376,66405,66435,66465,66494,66524,66553,66583,66612,66641,66671,66700,66730,66760,66789,
66819,66849,66878,66908,66937,66967,66996,67025,67055,67084,67114,67143,67173,67203,67233,67262,67292,67321,67351,67380,67409,67439,67468,67497,67527,67557,67587,67617,67646,67676,67705,67735,67764,67793,67823,67852,67882,67911,67941,67971,68E3,68030,68060,68089,68119,68148,68177,68207,68236,68266,68295,68325,68354,68384,68414,68443,68473,68502,68532,68561,68591,68620,68650,68679,68708,68738,68768,68797,68827,68857,68886,68916,68946,68975,69004,69034,69063,69092,69122,69152,69181,69211,69240,69270,
69300,69330,69359,69388,69418,69447,69476,69506,69535,69565,69595,69624,69654,69684,69713,69743,69772,69802,69831,69861,69890,69919,69949,69978,70008,70038,70067,70097,70126,70156,70186,70215,70245,70274,70303,70333,70362,70392,70421,70451,70481,70510,70540,70570,70599,70629,70658,70687,70717,70746,70776,70805,70835,70864,70894,70924,70954,70983,71013,71042,71071,71101,71130,71159,71189,71218,71248,71278,71308,71337,71367,71397,71426,71455,71485,71514,71543,71573,71602,71632,71662,71691,71721,71751,
71781,71810,71839,71869,71898,71927,71957,71986,72016,72046,72075,72105,72135,72164,72194,72223,72253,72282,72311,72341,72370,72400,72429,72459,72489,72518,72548,72577,72607,72637,72666,72695,72725,72754,72784,72813,72843,72872,72902,72931,72961,72991,73020,73050,73080,73109,73139,73168,73197,73227,73256,73286,73315,73345,73375,73404,73434,73464,73493,73523,73552,73581,73611,73640,73669,73699,73729,73758,73788,73818,73848,73877,73907,73936,73965,73995,74024,74053,74083,74113,74142,74172,74202,74231,
74261,74291,74320,74349,74379,74408,74437,74467,74497,74526,74556,74586,74615,74645,74675,74704,74733,74763,74792,74822,74851,74881,74910,74940,74969,74999,75029,75058,75088,75117,75147,75176,75206,75235,75264,75294,75323,75353,75383,75412,75442,75472,75501,75531,75560,75590,75619,75648,75678,75707,75737,75766,75796,75826,75856,75885,75915,75944,75974,76003,76032,76062,76091,76121,76150,76180,76210,76239,76269,76299,76328,76358,76387,76416,76446,76475,76505,76534,76564,76593,76623,76653,76682,76712,
76741,76771,76801,76830,76859,76889,76918,76948,76977,77007,77036,77066,77096,77125,77155,77185,77214,77243,77273,77302,77332,77361,77390,77420,77450,77479,77509,77539,77569,77598,77627,77657,77686,77715,77745,77774,77804,77833,77863,77893,77923,77952,77982,78011,78041,78070,78099,78129,78158,78188,78217,78247,78277,78307,78336,78366,78395,78425,78454,78483,78513,78542,78572,78601,78631,78661,78690,78720,78750,78779,78808,78838,78867,78897,78926,78956,78985,79015,79044,79074,79104,79133,79163,79192,
79222,79251,79281,79310,79340,79369,79399,79428,79458,79487,79517,79546,79576,79606,79635,79665,79695,79724,79753,79783,79812,79841,79871,79900,79930,79960,79990]},{"../main":644,"object-assign":487}],644:[function(b,N,G){function p(){this.regionalOptions=[];this.regionalOptions[""]={invalidCalendar:"Calendar {0} not found",invalidDate:"Invalid {0} date",invalidMonth:"Invalid {0} month",invalidYear:"Invalid {0} year",differentCalendars:"Cannot mix {0} and {1} dates"};this.local=this.regionalOptions[""];
this.calendars={};this._localCals={}}function n(h,r,l,c){this._calendar=h;this._year=r;this._month=l;this._day=c;if(0===this._calendar._validateLevel&&!this._calendar.isValid(this._year,this._month,this._day))throw(g.local.invalidDate||g.regionalOptions[""].invalidDate).replace(/\{0\}/,this._calendar.local.name);}function k(h,r){h=""+h;return"000000".substring(0,r-h.length)+h}function m(){this.shortYearCutoff="+10"}function a(h){this.local=this.regionalOptions[h]||this.regionalOptions[""]}b=b("object-assign");
b(p.prototype,{instance:function(h,r){h=(h||"gregorian").toLowerCase();r=r||"";var l=this._localCals[h+"-"+r];!l&&this.calendars[h]&&(l=new this.calendars[h](r),this._localCals[h+"-"+r]=l);if(!l)throw(this.local.invalidCalendar||this.regionalOptions[""].invalidCalendar).replace(/\{0\}/,h);return l},newDate:function(h,r,l,c,d){c=(null!=h&&h.year?h.calendar():"string"===typeof c?this.instance(c,d):c)||this.instance();return c.newDate(h,r,l)},substituteDigits:function(h){return function(r){return(r+
"").replace(/[0-9]/g,function(l){return h[l]})}},substituteChineseDigits:function(h,r){return function(l){for(var c="",d=0;0<l;){var e=l%10;c=(0===e?"":h[e]+r[d])+c;d++;l=Math.floor(l/10)}0===c.indexOf(h[1]+r[1])&&(c=c.substr(1));return c||h[0]}}});b(n.prototype,{newDate:function(h,r,l){return this._calendar.newDate(null==h?this:h,r,l)},year:function(h){return 0===arguments.length?this._year:this.set(h,"y")},month:function(h){return 0===arguments.length?this._month:this.set(h,"m")},day:function(h){return 0===
arguments.length?this._day:this.set(h,"d")},date:function(h,r,l){if(!this._calendar.isValid(h,r,l))throw(g.local.invalidDate||g.regionalOptions[""].invalidDate).replace(/\{0\}/,this._calendar.local.name);this._year=h;this._month=r;this._day=l;return this},leapYear:function(){return this._calendar.leapYear(this)},epoch:function(){return this._calendar.epoch(this)},formatYear:function(){return this._calendar.formatYear(this)},monthOfYear:function(){return this._calendar.monthOfYear(this)},weekOfYear:function(){return this._calendar.weekOfYear(this)},
daysInYear:function(){return this._calendar.daysInYear(this)},dayOfYear:function(){return this._calendar.dayOfYear(this)},daysInMonth:function(){return this._calendar.daysInMonth(this)},dayOfWeek:function(){return this._calendar.dayOfWeek(this)},weekDay:function(){return this._calendar.weekDay(this)},extraInfo:function(){return this._calendar.extraInfo(this)},add:function(h,r){return this._calendar.add(this,h,r)},set:function(h,r){return this._calendar.set(this,h,r)},compareTo:function(h){if(this._calendar.name!==
h._calendar.name)throw(g.local.differentCalendars||g.regionalOptions[""].differentCalendars).replace(/\{0\}/,this._calendar.local.name).replace(/\{1\}/,h._calendar.local.name);h=this._year!==h._year?this._year-h._year:this._month!==h._month?this.monthOfYear()-h.monthOfYear():this._day-h._day;return 0===h?0:0>h?-1:1},calendar:function(){return this._calendar},toJD:function(){return this._calendar.toJD(this)},fromJD:function(h){return this._calendar.fromJD(h)},toJSDate:function(){return this._calendar.toJSDate(this)},
fromJSDate:function(h){return this._calendar.fromJSDate(h)},toString:function(){return(0>this.year()?"-":"")+k(Math.abs(this.year()),4)+"-"+k(this.month(),2)+"-"+k(this.day(),2)}});b(m.prototype,{_validateLevel:0,newDate:function(h,r,l){if(null==h)return this.today();h.year&&(this._validate(h,r,l,g.local.invalidDate||g.regionalOptions[""].invalidDate),l=h.day(),r=h.month(),h=h.year());return new n(this,h,r,l)},today:function(){return this.fromJSDate(new Date)},epoch:function(h){return 0>this._validate(h,
this.minMonth,this.minDay,g.local.invalidYear||g.regionalOptions[""].invalidYear).year()?this.local.epochs[0]:this.local.epochs[1]},formatYear:function(h){h=this._validate(h,this.minMonth,this.minDay,g.local.invalidYear||g.regionalOptions[""].invalidYear);return(0>h.year()?"-":"")+k(Math.abs(h.year()),4)},monthsInYear:function(h){this._validate(h,this.minMonth,this.minDay,g.local.invalidYear||g.regionalOptions[""].invalidYear);return 12},monthOfYear:function(h,r){h=this._validate(h,r,this.minDay,
g.local.invalidMonth||g.regionalOptions[""].invalidMonth);return(h.month()+this.monthsInYear(h)-this.firstMonth)%this.monthsInYear(h)+this.minMonth},fromMonthOfYear:function(h,r){r=(r+this.firstMonth-2*this.minMonth)%this.monthsInYear(h)+this.minMonth;this._validate(h,r,this.minDay,g.local.invalidMonth||g.regionalOptions[""].invalidMonth);return r},daysInYear:function(h){h=this._validate(h,this.minMonth,this.minDay,g.local.invalidYear||g.regionalOptions[""].invalidYear);return this.leapYear(h)?366:
365},dayOfYear:function(h,r,l){h=this._validate(h,r,l,g.local.invalidDate||g.regionalOptions[""].invalidDate);return h.toJD()-this.newDate(h.year(),this.fromMonthOfYear(h.year(),this.minMonth),this.minDay).toJD()+1},daysInWeek:function(){return 7},dayOfWeek:function(h,r,l){h=this._validate(h,r,l,g.local.invalidDate||g.regionalOptions[""].invalidDate);return(Math.floor(this.toJD(h))+2)%this.daysInWeek()},extraInfo:function(h,r,l){this._validate(h,r,l,g.local.invalidDate||g.regionalOptions[""].invalidDate);
return{}},add:function(h,r,l){this._validate(h,this.minMonth,this.minDay,g.local.invalidDate||g.regionalOptions[""].invalidDate);return this._correctAdd(h,this._add(h,r,l),r,l)},_add:function(h,r,l){this._validateLevel++;if("d"===l||"w"===l){r=h.toJD()+r*("w"===l?this.daysInWeek():1);var c=h.calendar().fromJD(r);this._validateLevel--;return[c.year(),c.month(),c.day()]}try{var d=h.year()+("y"===l?r:0),e=h.monthOfYear()+("m"===l?r:0);c=h.day();if("y"===l)h.month()!==this.fromMonthOfYear(d,e)&&(e=this.newDate(d,
h.month(),this.minDay).monthOfYear()),e=Math.min(e,this.monthsInYear(d)),c=Math.min(c,this.daysInMonth(d,this.fromMonthOfYear(d,e)));else if("m"===l){for(;e<this.minMonth;)d--,e+=this.monthsInYear(d);for(var f=this.monthsInYear(d);e>f-1+this.minMonth;)d++,e-=f,f=this.monthsInYear(d);c=Math.min(c,this.daysInMonth(d,this.fromMonthOfYear(d,e)))}var q=[d,this.fromMonthOfYear(d,e),c];this._validateLevel--;return q}catch(t){throw this._validateLevel--,t;}},_correctAdd:function(h,r,l,c){this.hasYearZero||
"y"!==c&&"m"!==c||0!==r[0]&&0<h.year()===0<r[0]||(r={y:[1,1,"y"],m:[1,this.monthsInYear(-1),"m"],w:[this.daysInWeek(),this.daysInYear(-1),"d"],d:[1,this.daysInYear(-1),"d"]}[c],r=this._add(h,l*r[0]+(0>l?-1:1)*r[1],r[2]));return h.date(r[0],r[1],r[2])},set:function(h,r,l){this._validate(h,this.minMonth,this.minDay,g.local.invalidDate||g.regionalOptions[""].invalidDate);var c="y"===l?r:h.year(),d="m"===l?r:h.month();r="d"===l?r:h.day();if("y"===l||"m"===l)r=Math.min(r,this.daysInMonth(c,d));return h.date(c,
d,r)},isValid:function(h,r,l){this._validateLevel++;var c=this.hasYearZero||0!==h;c&&(h=this.newDate(h,r,this.minDay),c=r>=this.minMonth&&r-this.minMonth<this.monthsInYear(h)&&l>=this.minDay&&l-this.minDay<this.daysInMonth(h));this._validateLevel--;return c},toJSDate:function(h,r,l){h=this._validate(h,r,l,g.local.invalidDate||g.regionalOptions[""].invalidDate);return g.instance().fromJD(this.toJD(h)).toJSDate()},fromJSDate:function(h){return this.fromJD(g.instance().fromJSDate(h).toJD())},_validate:function(h,
r,l,c){if(h.year){if(0===this._validateLevel&&this.name!==h.calendar().name)throw(g.local.differentCalendars||g.regionalOptions[""].differentCalendars).replace(/\{0\}/,this.local.name).replace(/\{1\}/,h.calendar().local.name);return h}try{this._validateLevel++;if(1===this._validateLevel&&!this.isValid(h,r,l))throw c.replace(/\{0\}/,this.local.name);var d=this.newDate(h,r,l);this._validateLevel--;return d}catch(e){throw this._validateLevel--,e;}}});a.prototype=new m;b(a.prototype,{name:"Gregorian",
jdEpoch:1721425.5,daysPerMonth:[31,28,31,30,31,30,31,31,30,31,30,31],hasYearZero:!1,minMonth:1,firstMonth:1,minDay:1,regionalOptions:{"":{name:"Gregorian",epochs:["BCE","CE"],monthNames:"January February March April May June July August September October November December".split(" "),monthNamesShort:"Jan Feb Mar Apr May Jun Jul Aug Sep Oct Nov Dec".split(" "),dayNames:"Sunday Monday Tuesday Wednesday Thursday Friday Saturday".split(" "),dayNamesShort:"Sun Mon Tue Wed Thu Fri Sat".split(" "),dayNamesMin:"Su Mo Tu We Th Fr Sa".split(" "),
digits:null,dateFormat:"mm/dd/yyyy",firstDay:0,isRTL:!1}},leapYear:function(h){h=this._validate(h,this.minMonth,this.minDay,g.local.invalidYear||g.regionalOptions[""].invalidYear);h=h.year()+(0>h.year()?1:0);return 0===h%4&&(0!==h%100||0===h%400)},weekOfYear:function(h,r,l){h=this.newDate(h,r,l);h.add(4-(h.dayOfWeek()||7),"d");return Math.floor((h.dayOfYear()-1)/7)+1},daysInMonth:function(h,r){h=this._validate(h,r,this.minDay,g.local.invalidMonth||g.regionalOptions[""].invalidMonth);return this.daysPerMonth[h.month()-
1]+(2===h.month()&&this.leapYear(h.year())?1:0)},weekDay:function(h,r,l){return 6>(this.dayOfWeek(h,r,l)||7)},toJD:function(h,r,l){l=this._validate(h,r,l,g.local.invalidDate||g.regionalOptions[""].invalidDate);h=l.year();r=l.month();l=l.day();0>h&&h++;3>r&&(r+=12,h--);var c=Math.floor(h/100);return Math.floor(365.25*(h+4716))+Math.floor(30.6001*(r+1))+l+(2-c+Math.floor(c/4))-1524.5},fromJD:function(h){h=Math.floor(h+.5);var r=Math.floor((h-1867216.25)/36524.25);r=h+1+r-Math.floor(r/4);var l=r+1524;
h=Math.floor((l-122.1)/365.25);var c=Math.floor(365.25*h);r=Math.floor((l-c)/30.6001);l=l-c-Math.floor(30.6001*r);r-=13.5<r?13:1;h-=2.5<r?4716:4715;0>=h&&h--;return this.newDate(h,r,l)},toJSDate:function(h,r,l){h=this._validate(h,r,l,g.local.invalidDate||g.regionalOptions[""].invalidDate);h=new Date(h.year(),h.month()-1,h.day());h.setHours(0);h.setMinutes(0);h.setSeconds(0);h.setMilliseconds(0);h.setHours(12<h.getHours()?h.getHours()+2:0);return h},fromJSDate:function(h){return this.newDate(h.getFullYear(),
h.getMonth()+1,h.getDate())}});var g=N.exports=new p;g.cdate=n;g.baseCalendar=m;g.calendars.gregorian=a},{"object-assign":487}],645:[function(b,N,G){N=b("object-assign");var p=b("./main");N(p.regionalOptions[""],{invalidArguments:"Invalid arguments",invalidFormat:"Cannot format a date from another calendar",missingNumberAt:"Missing number at position {0}",unknownNameAt:"Unknown name at position {0}",unexpectedLiteralAt:"Unexpected literal at position {0}",unexpectedText:"Additional text found at end"});
p.local=p.regionalOptions[""];N(p.cdate.prototype,{formatDate:function(n,k){"string"!==typeof n&&(k=n,n="");return this._calendar.formatDate(n||"",this,k)}});N(p.baseCalendar.prototype,{UNIX_EPOCH:p.instance().newDate(1970,1,1).toJD(),SECS_PER_DAY:86400,TICKS_EPOCH:p.instance().jdEpoch,TICKS_PER_DAY:864E9,ATOM:"yyyy-mm-dd",COOKIE:"D, dd M yyyy",FULL:"DD, MM d, yyyy",ISO_8601:"yyyy-mm-dd",JULIAN:"J",RFC_822:"D, d M yy",RFC_850:"DD, dd-M-yy",RFC_1036:"D, d M yy",RFC_1123:"D, d M yyyy",RFC_2822:"D, d M yyyy",
RSS:"D, d M yy",TICKS:"!",TIMESTAMP:"@",W3C:"yyyy-mm-dd",formatDate:function(n,k,m){"string"!==typeof n&&(m=k,k=n,n="");if(!k)return"";if(k.calendar()!==this)throw p.local.invalidFormat||p.regionalOptions[""].invalidFormat;n=n||this.local.dateFormat;m=m||{};for(var a=m.dayNamesShort||this.local.dayNamesShort,g=m.dayNames||this.local.dayNames,h=m.monthNumbers||this.local.monthNumbers,r=m.monthNamesShort||this.local.monthNamesShort,l=m.monthNames||this.local.monthNames,c=function(D,C){for(var v=1;A+
v<n.length&&n.charAt(A+v)===D;)v++;A+=v-1;return 1<Math.floor(v/(C||1))},d=function(D,C,v,y){C=""+C;if(c(D,y))for(;C.length<v;)C="0"+C;return C},e=function(D,C,v,y){return c(D)?y[C]:v[C]},f=this,q=function(D){return"function"===typeof h?h.call(f,D,c("m")):x(d("m",D.month(),2))},t=function(D,C){return C?"function"===typeof l?l.call(f,D):l[D.month()-f.minMonth]:"function"===typeof r?r.call(f,D):r[D.month()-f.minMonth]},w=this.local.digits,x=function(D){return m.localNumbers&&w?w(D):D},z="",B=!1,A=0;A<
n.length;A++)if(B)"'"!==n.charAt(A)||c("'")?z+=n.charAt(A):B=!1;else switch(n.charAt(A)){case "d":z+=x(d("d",k.day(),2));break;case "D":z+=e("D",k.dayOfWeek(),a,g);break;case "o":z+=d("o",k.dayOfYear(),3);break;case "w":z+=d("w",k.weekOfYear(),2);break;case "m":z+=q(k);break;case "M":z+=t(k,c("M"));break;case "y":z+=c("y",2)?k.year():(10>k.year()%100?"0":"")+k.year()%100;break;case "Y":c("Y",2);z+=k.formatYear();break;case "J":z+=k.toJD();break;case "@":z+=(k.toJD()-this.UNIX_EPOCH)*this.SECS_PER_DAY;
break;case "!":z+=(k.toJD()-this.TICKS_EPOCH)*this.TICKS_PER_DAY;break;case "'":c("'")?z+="'":B=!0;break;default:z+=n.charAt(A)}return z},parseDate:function(n,k,m){if(null==k)throw p.local.invalidArguments||p.regionalOptions[""].invalidArguments;k="object"===typeof k?k.toString():k+"";if(""===k)return null;n=n||this.local.dateFormat;m=m||{};var a=m.shortYearCutoff||this.shortYearCutoff;a="string"!==typeof a?a:this.today().year()%100+parseInt(a,10);for(var g=m.dayNamesShort||this.local.dayNamesShort,
h=m.dayNames||this.local.dayNames,r=m.parseMonth||this.local.parseMonth,l=m.monthNumbers||this.local.monthNumbers,c=m.monthNamesShort||this.local.monthNamesShort,d=m.monthNames||this.local.monthNames,e=m=-1,f=-1,q=-1,t=-1,w=!1,x=!1,z=function(K,M){for(var H=1;J+H<n.length&&n.charAt(J+H)===K;)H++;J+=H-1;return 1<Math.floor(H/(M||1))},B=function(K,M){M=z(K,M);K=[2,3,M?4:2,M?4:2,10,11,20]["oyYJ@!".indexOf(K)+1];K=new RegExp("^-?\\d{1,"+K+"}");K=k.substring(F).match(K);if(!K)throw(p.local.missingNumberAt||
p.regionalOptions[""].missingNumberAt).replace(/\{0\}/,F);F+=K[0].length;return parseInt(K[0],10)},A=this,D=function(){if("function"===typeof l){z("m");var K=l.call(A,k.substring(F));F+=K.length;return K}return B("m")},C=function(K,M,H,O){K=z(K,O)?H:M;for(M=0;M<K.length;M++)if(k.substr(F,K[M].length).toLowerCase()===K[M].toLowerCase())return F+=K[M].length,M+A.minMonth;throw(p.local.unknownNameAt||p.regionalOptions[""].unknownNameAt).replace(/\{0\}/,F);},v=function(){if("function"===typeof d){var K=
z("M")?d.call(A,k.substring(F)):c.call(A,k.substring(F));F+=K.length;return K}return C("M",c,d)},y=function(){if(k.charAt(F)!==n.charAt(J))throw(p.local.unexpectedLiteralAt||p.regionalOptions[""].unexpectedLiteralAt).replace(/\{0\}/,F);F++},F=0,J=0;J<n.length;J++)if(x)"'"!==n.charAt(J)||z("'")?y():x=!1;else switch(n.charAt(J)){case "d":q=B("d");break;case "D":C("D",g,h);break;case "o":t=B("o");break;case "w":B("w");break;case "m":f=D();break;case "M":f=v();break;case "y":e=J;w=!z("y",2);J=e;e=B("y",
2);break;case "Y":e=B("Y",2);break;case "J":m=B("J")+.5;"."===k.charAt(F)&&(F++,B("J"));break;case "@":m=B("@")/this.SECS_PER_DAY+this.UNIX_EPOCH;break;case "!":m=B("!")/this.TICKS_PER_DAY+this.TICKS_EPOCH;break;case "*":F=k.length;break;case "'":z("'")?y():x=!0;break;default:y()}if(F<k.length)throw p.local.unexpectedText||p.regionalOptions[""].unexpectedText;-1===e?e=this.today().year():100>e&&w&&(e+=-1===a?1900:this.today().year()-this.today().year()%100-(e<=a?0:100));"string"===typeof f&&(f=r.call(this,
e,f));if(-1<t)for(f=1,q=t,a=this.daysInMonth(e,f);q>a;a=this.daysInMonth(e,f))f++,q-=a;return-1<m?this.fromJD(m):this.newDate(e,f,q)},determineDate:function(n,k,m,a,g){m&&"object"!==typeof m&&(g=a,a=m,m=null);"string"!==typeof a&&(g=a,a="");k=k?k.newDate():null;if(null==n)n=k;else{if("string"===typeof n)a:{try{var h=this.parseDate(a,n,g);break a}catch(r){}n=n.toLowerCase();m=(n.match(/^c/)&&m?m.newDate():null)||this.today();a=/([+-]?[0-9]+)\s*(d|w|m|y)?/g;for(g=a.exec(n);g;)m.add(parseInt(g[1],10),
g[2]||"d"),g=a.exec(n);h=m}else h="number"===typeof n?isNaN(n)||Infinity===n||-Infinity===n?k:this.today().add(n,"d"):this.newDate(n);n=h}return n}})},{"./main":644,"object-assign":487}],646:[function(b,N,G){N.exports=b("cwise-compiler")({args:["array",{offset:[1],array:0},"scalar","scalar","index"],pre:{body:"{}",args:[],thisVars:[],localVars:[]},post:{body:"{}",args:[],thisVars:[],localVars:[]},body:{body:"{\n        var _inline_1_da \x3d _inline_1_arg0_ - _inline_1_arg3_\n        var _inline_1_db \x3d _inline_1_arg1_ - _inline_1_arg3_\n        if((_inline_1_da \x3e\x3d 0) !\x3d\x3d (_inline_1_db \x3e\x3d 0)) {\n          _inline_1_arg2_.push(_inline_1_arg4_[0] + 0.5 + 0.5 * (_inline_1_da + _inline_1_db) / (_inline_1_da - _inline_1_db))\n        }\n      }",
args:[{name:"_inline_1_arg0_",lvalue:!1,rvalue:!0,count:1},{name:"_inline_1_arg1_",lvalue:!1,rvalue:!0,count:1},{name:"_inline_1_arg2_",lvalue:!1,rvalue:!0,count:1},{name:"_inline_1_arg3_",lvalue:!1,rvalue:!0,count:2},{name:"_inline_1_arg4_",lvalue:!1,rvalue:!0,count:1}],thisVars:[],localVars:["_inline_1_da","_inline_1_db"]},funcName:"zeroCrossings"})},{"cwise-compiler":157}],647:[function(b,N,G){N.exports=function(n,k){var m=[];k=+k||0;p(n.hi(n.shape[0]-1),m,k);return m};var p=b("./lib/zc-core")},
{"./lib/zc-core":646}],648:[function(b,N,G){N.exports=[{path:"",backoff:0},{path:"M-2.4,-3V3L0.6,0Z",backoff:.6},{path:"M-3.7,-2.5V2.5L1.3,0Z",backoff:1.3},{path:"M-4.45,-3L-1.65,-0.2V0.2L-4.45,3L1.55,0Z",backoff:1.55},{path:"M-2.2,-2.2L-0.2,-0.2V0.2L-2.2,2.2L-1.4,3L1.6,0L-1.4,-3Z",backoff:1.6},{path:"M-4.4,-2.1L-0.6,-0.2V0.2L-4.4,2.1L-4,3L2,0L-4,-3Z",backoff:2},{path:"M2,0A2,2 0 1,1 0,-2A2,2 0 0,1 2,0Z",backoff:0,noRotate:!0},{path:"M2,2V-2H-2V2Z",backoff:0,noRotate:!0}]},{}],649:[function(b,N,G){G=
b("./arrow_paths");var p=b("../../plots/font_attributes"),n=b("../../plots/cartesian/constants"),k=b("../../plot_api/plot_template").templatedArray;b("../../constants/axis_placeable_objects");N.exports=k("annotation",{visible:{valType:"boolean",dflt:!0,editType:"calc+arraydraw"},text:{valType:"string",editType:"calc+arraydraw"},textangle:{valType:"angle",dflt:0,editType:"calc+arraydraw"},font:p({editType:"calc+arraydraw",colorEditType:"arraydraw"}),width:{valType:"number",min:1,dflt:null,editType:"calc+arraydraw"},
height:{valType:"number",min:1,dflt:null,editType:"calc+arraydraw"},opacity:{valType:"number",min:0,max:1,dflt:1,editType:"arraydraw"},align:{valType:"enumerated",values:["left","center","right"],dflt:"center",editType:"arraydraw"},valign:{valType:"enumerated",values:["top","middle","bottom"],dflt:"middle",editType:"arraydraw"},bgcolor:{valType:"color",dflt:"rgba(0,0,0,0)",editType:"arraydraw"},bordercolor:{valType:"color",dflt:"rgba(0,0,0,0)",editType:"arraydraw"},borderpad:{valType:"number",min:0,
dflt:1,editType:"calc+arraydraw"},borderwidth:{valType:"number",min:0,dflt:1,editType:"calc+arraydraw"},showarrow:{valType:"boolean",dflt:!0,editType:"calc+arraydraw"},arrowcolor:{valType:"color",editType:"arraydraw"},arrowhead:{valType:"integer",min:0,max:G.length,dflt:1,editType:"arraydraw"},startarrowhead:{valType:"integer",min:0,max:G.length,dflt:1,editType:"arraydraw"},arrowside:{valType:"flaglist",flags:["end","start"],extras:["none"],dflt:"end",editType:"arraydraw"},arrowsize:{valType:"number",
min:.3,dflt:1,editType:"calc+arraydraw"},startarrowsize:{valType:"number",min:.3,dflt:1,editType:"calc+arraydraw"},arrowwidth:{valType:"number",min:.1,editType:"calc+arraydraw"},standoff:{valType:"number",min:0,dflt:0,editType:"calc+arraydraw"},startstandoff:{valType:"number",min:0,dflt:0,editType:"calc+arraydraw"},ax:{valType:"any",editType:"calc+arraydraw"},ay:{valType:"any",editType:"calc+arraydraw"},axref:{valType:"enumerated",dflt:"pixel",values:["pixel",n.idRegex.x.toString()],editType:"calc"},
ayref:{valType:"enumerated",dflt:"pixel",values:["pixel",n.idRegex.y.toString()],editType:"calc"},xref:{valType:"enumerated",values:["paper",n.idRegex.x.toString()],editType:"calc"},x:{valType:"any",editType:"calc+arraydraw"},xanchor:{valType:"enumerated",values:["auto","left","center","right"],dflt:"auto",editType:"calc+arraydraw"},xshift:{valType:"number",dflt:0,editType:"calc+arraydraw"},yref:{valType:"enumerated",values:["paper",n.idRegex.y.toString()],editType:"calc"},y:{valType:"any",editType:"calc+arraydraw"},
yanchor:{valType:"enumerated",values:["auto","top","middle","bottom"],dflt:"auto",editType:"calc+arraydraw"},yshift:{valType:"number",dflt:0,editType:"calc+arraydraw"},clicktoshow:{valType:"enumerated",values:[!1,"onoff","onout"],dflt:!1,editType:"arraydraw"},xclick:{valType:"any",editType:"arraydraw"},yclick:{valType:"any",editType:"arraydraw"},hovertext:{valType:"string",editType:"arraydraw"},hoverlabel:{bgcolor:{valType:"color",editType:"arraydraw"},bordercolor:{valType:"color",editType:"arraydraw"},
font:p({editType:"arraydraw"}),editType:"arraydraw"},captureevents:{valType:"boolean",editType:"arraydraw"},editType:"calc",_deprecated:{ref:{valType:"string",editType:"calc"}}})},{"../../constants/axis_placeable_objects":772,"../../plot_api/plot_template":843,"../../plots/cartesian/constants":861,"../../plots/font_attributes":883,"./arrow_paths":648}],650:[function(b,N,G){function p(g){k.filterVisible(g._fullLayout.annotations).forEach(function(h){var r=m.getFromId(g,h.xref),l=m.getFromId(g,h.yref),
c=m.getRefType(h.xref),d=m.getRefType(h.yref);h._extremes={};"range"===c&&n(h,r);"range"===d&&n(h,l)})}function n(g,h){var r=h._id,l=r.charAt(0),c=g[l],d=g["a"+l],e=g["_"+l+"padplus"],f=g["_"+l+"padminus"],q={x:1,y:-1}[l]*g[l+"shift"],t=3*g.arrowsize*g.arrowwidth||0,w=t+q,x=t-q,z=3*g.startarrowsize*g.arrowwidth||0;t=z+q;q=z-q;g["a"+l+"ref"]===g[l+"ref"]?(l=m.findExtremes(h,[h.r2c(c)],{ppadplus:w,ppadminus:x}),h=m.findExtremes(h,[h.r2c(d)],{ppadplus:Math.max(e,t),ppadminus:Math.max(f,q)}),h={min:[l.min[0],
h.min[0]],max:[l.max[0],h.max[0]]}):(t=d?t+d:t,q=d?q-d:q,h=m.findExtremes(h,[h.r2c(c)],{ppadplus:Math.max(e,w,t),ppadminus:Math.max(f,x,q)}));g._extremes[r]=h}var k=b("../../lib"),m=b("../../plots/cartesian/axes"),a=b("./draw").draw;N.exports=function(g){if(k.filterVisible(g._fullLayout.annotations).length&&g._fullData.length)return k.syncOrAsync([a,p],g)}},{"../../lib":803,"../../plots/cartesian/axes":854,"./draw":655}],651:[function(b,N,G){function p(g,h){g=g._fullLayout.annotations;var r=[],l=
[],c=[],d=(h||[]).length,e,f,q;for(e=0;e<g.length;e++){var t=g[e];if(q=t.clicktoshow){for(f=0;f<d;f++){var w=h[f];var x=w.xaxis;var z=w.yaxis;if(x._id===t.xref&&z._id===t.yref&&x.d2r(w.x)===n(t._xclick,x)&&z.d2r(w.y)===n(t._yclick,z)){w=t.visible?"onout"===q?l:c:r;w.push(e);break}}f===d&&t.visible&&"onout"===q&&l.push(e)}}return{on:r,off:l,explicitOff:c}}function n(g,h){return"log"===h.type?h.l2r(g):h.d2r(g)}var k=b("../../lib"),m=b("../../registry"),a=b("../../plot_api/plot_template").arrayEditor;
N.exports={hasClickToShow:function(g,h){g=p(g,h);return 0<g.on.length||0<g.explicitOff.length},onClick:function(g,h){var r=p(g,h);h=r.on;r=r.off.concat(r.explicitOff);var l={},c=g._fullLayout.annotations,d;if(h.length||r.length){for(d=0;d<h.length;d++){var e=a(g.layout,"annotations",c[h[d]]);e.modifyItem("visible",!0);k.extendFlat(l,e.getUpdateObj())}for(d=0;d<r.length;d++)e=a(g.layout,"annotations",c[r[d]]),e.modifyItem("visible",!1),k.extendFlat(l,e.getUpdateObj());return m.call("update",g,{},l)}}}},
{"../../lib":803,"../../plot_api/plot_template":843,"../../registry":931}],652:[function(b,N,G){var p=b("../../lib"),n=b("../color");N.exports=function(k,m,a,g){g("opacity");k=g("bgcolor");var h=g("bordercolor");h=n.opacity(h);g("borderpad");var r=g("borderwidth"),l=g("showarrow");g("text",l?" ":a._dfltTitle.annotation);g("textangle");p.coerceFont(g,"font",a.font);g("width");g("align");g("height")&&g("valign");if(l){l=g("arrowside");if(-1!==l.indexOf("end")){var c=g("arrowhead");var d=g("arrowsize")}-1!==
l.indexOf("start")&&(g("startarrowhead",c),g("startarrowsize",d));g("arrowcolor",h?m.bordercolor:n.defaultLine);g("arrowwidth",2*(h&&r||1));g("standoff");g("startstandoff")}m=g("hovertext");a=a.hoverlabel||{};m&&(k=g("hoverlabel.bgcolor",a.bgcolor||(n.opacity(k)?n.rgb(k):n.defaultLine)),k=g("hoverlabel.bordercolor",a.bordercolor||n.contrast(k)),p.coerceFont(g,"hoverlabel.font",{family:a.font.family,size:a.font.size,color:a.font.color||k}));g("captureevents",!!m)}},{"../../lib":803,"../color":666}],
653:[function(b,N,G){var p=b("fast-isnumeric"),n=b("../../lib/to_log_range");N.exports=function(k,m,a,g){function h(e){var f=l[e];f=r?n(f,m.range):Math.pow(10,f);p(f)||(f=null);g(c+e,f)}m=m||{};var r="log"===a&&"linear"===m.type;a="linear"===a&&"log"===m.type;if(r||a){k=k._fullLayout.annotations;a=m._id.charAt(0);for(var l,c,d=0;d<k.length;d++)l=k[d],c="annotations["+d+"].",l[a+"ref"]===m._id&&h(a),l["a"+a+"ref"]===m._id&&h("a"+a)}}},{"../../lib/to_log_range":831,"fast-isnumeric":249}],654:[function(b,
N,G){function p(h,r,l){function c(A,D){return n.coerce(h,r,g,A,D)}var d=c("visible"),e=c("clicktoshow");if(d||e){a(h,r,l,c);d=r.showarrow;var f=["x","y"],q=[-10,-30];l={_fullLayout:l};for(var t=0;2>t;t++){var w=f[t],x=k.coerceRef(h,r,l,w,"","paper");"paper"!==x&&k.getFromId(l,x)._annIndices.push(r._index);k.coercePosition(r,l,c,x,w,.5);if(d){var z="a"+w,B=k.coerceRef(h,r,l,z,"pixel",["pixel","paper"]);"pixel"!==B&&B!==x&&(B=r[z]="pixel");k.coercePosition(r,l,c,B,z,"pixel"===B?q[t]:.4)}c(w+"anchor");
c(w+"shift")}n.noneOrAll(h,r,["x","y"]);d&&n.noneOrAll(h,r,["ax","ay"]);e&&(e=c("xclick"),d=c("yclick"),r._xclick=void 0===e?r.x:k.cleanPosition(e,l,r.xref),r._yclick=void 0===d?r.y:k.cleanPosition(d,l,r.yref))}}var n=b("../../lib"),k=b("../../plots/cartesian/axes"),m=b("../../plots/array_container_defaults"),a=b("./common_defaults"),g=b("./attributes");N.exports=function(h,r){m(h,r,{name:"annotations",handleItemDefaults:p})}},{"../../lib":803,"../../plots/array_container_defaults":849,"../../plots/cartesian/axes":854,
"./attributes":649,"./common_defaults":652}],655:[function(b,N,G){function p(z,B){var A=z._fullLayout.annotations[B]||{},D=l.getFromId(z,A.xref),C=l.getFromId(z,A.yref);D&&D.setScale();C&&C.setScale();k(z,A,B,!1,D,C)}function n(z,B,A,D,C){var v=C[A];C=C[A+"ref"];A=-1!==A.indexOf("y");C="domain"===l.getRefType(C);D=A?D.h:D.w;return z?C?v+(A?-B:B)/z._length:z.p2r(z.r2p(v)+B):v+(A?-B:B)/D}function k(z,B,A,D,C,v){function y(ka){ka={index:A,annotation:B._input,fullAnnotation:B,event:ka};D&&(ka.subplotId=
D);return ka}function F(ka){ka.call(d.font,pa).attr({"text-anchor":{left:"start",right:"end"}[B.align]||"middle"});f.convertToTspans(ka,z,J);return ka}function J(){function ka(Nb,ec){"auto"===ec&&(ec=Nb<1/3?"left":Nb>2/3?"right":"center");return{center:0,middle:0,left:.5,bottom:-.5,right:-.5,top:.5}[ec]}var na=la.selectAll("a");1===na.size()&&na.text()===la.text()&&aa.insert("a",":first-child").attr({"xlink:xlink:href":na.attr("xlink:href"),"xlink:xlink:show":na.attr("xlink:show")}).style({cursor:"pointer"}).node().appendChild(ia.node());
na=aa.select(".annotation-text-math-group");for(var oa=!na.empty(),sa=d.bBox((oa?na:la).node()),za=sa.width,Ha=sa.height,Wa=B.width||za,Za=B.height||Ha,bb=Math.round(Wa+2*ma),sb=Math.round(Za+2*ma),hb=!1,ub=["x","y"],pb=0;pb<ub.length;pb++){var Ab=ub[pb],tb=B[Ab+"ref"]||Ab,vb=B["a"+Ab+"ref"],qb={x:C,y:v}[Ab],zb=(S+("x"===Ab?0:-90))*Math.PI/180,La=bb*Math.cos(zb),Ka=sb*Math.sin(zb);zb=Math.abs(La)+Math.abs(Ka);var ya=B[Ab+"anchor"],Aa=B[Ab+"shift"]*("x"===Ab?1:-1),Ja=V[Ab];var Ta=l.getRefType(tb);
if(qb&&"domain"!==Ta){Ta=qb.r2fraction(B[Ab]);if(0>Ta||1<Ta)if(vb===tb){if(Ta=qb.r2fraction(B["a"+Ab]),0>Ta||1<Ta)hb=!0}else hb=!0;Ta=qb._offset+qb.r2p(B[Ab]);var $a=.5}else Ta="domain"===Ta,"x"===Ab?($a=B[Ab],Ta=Ta?qb._offset+qb._length*$a:Ta=M.l+M.w*$a):($a=1-B[Ab],Ta=Ta?qb._offset+qb._length*$a:Ta=M.t+M.h*$a),$a=B.showarrow?.5:$a;B.showarrow?(Ja.head=Ta,ya=B["a"+Ab],La=La*ka(.5,B.xanchor)-Ka*ka(.5,B.yanchor),vb===tb?(Ka=l.getRefType(vb),"domain"===Ka?("y"===Ab&&(ya=1-ya),Ja.tail=qb._offset+qb._length*
ya):"paper"===Ka?"y"===Ab?(ya=1-ya,Ja.tail=M.t+M.h*ya):Ja.tail=M.l+M.w*ya:Ja.tail=qb._offset+qb.r2p(ya),qb=La):(Ja.tail=Ta+ya,qb=La+ya),Ja.text=Ja.tail+La,Ka=K["x"===Ab?"width":"height"],"paper"===tb&&(Ja.head=h.constrain(Ja.head,1,Ka-1)),"pixel"===vb&&(tb=-Math.max(Ja.tail-3,Ja.text),vb=Math.min(Ja.tail+3,Ja.text)-Ka,0<tb?(Ja.tail+=tb,Ja.text+=tb):0<vb&&(Ja.tail-=vb,Ja.text-=vb)),Ja.tail+=Aa,Ja.head+=Aa):(qb=La=zb*ka($a,ya),Ja.text=Ta+La);Ja.text+=Aa;La+=Aa;qb+=Aa;B["_"+Ab+"padplus"]=zb/2+qb;B["_"+
Ab+"padminus"]=zb/2-qb;B["_"+Ab+"size"]=zb;B["_"+Ab+"shift"]=La}if(hb)aa.remove();else{ub=hb=0;"left"!==B.align&&(hb=(Wa-za)*("center"===B.align?.5:1));"top"!==B.valign&&(ub=(Za-Ha)*("middle"===B.valign?.5:1));oa?na.select("svg").attr({x:ma+hb-1,y:ma+ub}).call(d.setClipUrl,ra?ba:null,z):la.call(f.positionText,ma+hb-sa.left,ma+ub-sa.top).call(d.setClipUrl,ra?ba:null,z);wa.select("rect").call(d.setRect,ma,ma,Wa,Za);ia.call(d.setRect,ja/2,ja/2,bb-ja,sb-ja);aa.call(d.setTranslate,Math.round(V.x.text-
bb/2),Math.round(V.y.text-sb/2));fa.attr({transform:"rotate("+S+","+V.x.text+","+V.y.text+")"});var ab=function(Nb,ec){T.selectAll(".annotation-arrow-g").remove();var ob=V.x.head,Cb=V.y.head,Qb=V.x.tail+Nb,yc=V.y.tail+ec,Jc=V.x.text+Nb;Nb=V.y.text+ec;ec=h.rotationXYMatrix(S,Jc,Nb);var Ia=h.apply2DTransform(ec);ec=h.apply2DTransform2(ec);var Na=+ia.attr("width"),ib=+ia.attr("height");Jc-=.5*Na;Na=Jc+Na;Nb-=.5*ib;ib=Nb+ib;ec=[[Jc,Nb,Jc,ib],[Jc,ib,Na,ib],[Na,ib,Na,Nb],[Na,Nb,Jc,Nb]].map(ec);if(!ec.reduce(function(uc,
fd){return uc^!!h.segmentsIntersect(ob,Cb,ob+1E6,Cb+1E6,fd[0],fd[1],fd[2],fd[3])},!1)){ec.forEach(function(uc){if(uc=h.segmentsIntersect(Qb,yc,ob,Cb,uc[0],uc[1],uc[2],uc[3]))Qb=uc.x,yc=uc.y});ec=B.arrowwidth;ib=B.arrowcolor;Nb=B.arrowside;var Gb=T.append("g").style({opacity:c.opacity(ib)}).classed("annotation-arrow-g",!0);ib=Gb.append("path").attr("d","M"+Qb+","+yc+"L"+ob+","+Cb).style("stroke-width",ec+"px").call(c.stroke,c.rgb(ib));x(ib,Nb,B);if(H.annotationPosition&&ib.node().parentNode&&!D){Nb=
ob;ib=Cb;B.standoff&&(Jc=Math.sqrt(Math.pow(ob-Qb,2)+Math.pow(Cb-yc,2)),Nb+=B.standoff*(Qb-ob)/Jc,ib+=B.standoff*(yc-Cb)/Jc);ec=Gb.append("path").classed("annotation-arrow",!0).classed("anndrag",!0).classed("cursor-move",!0).attr({d:"M3,3H-3V-3H3ZM0,0L"+(Qb-Nb)+","+(yc-ib),transform:r(Nb,ib)}).style("stroke-width",ec+6+"px").call(c.stroke,"rgba(0,0,0,0)").call(c.fill,"rgba(0,0,0,0)");var Hb,$b;t.init({element:ec.node(),gd:z,prepFn:function(){var uc=d.getTranslate(aa);Hb=uc.x;$b=uc.y;C&&C.autorange&&
L(C._name+".autorange",!0);v&&v.autorange&&L(v._name+".autorange",!0)},moveFn:function(uc,fd){var fb=Ia(Hb,$b),Pb=fb[0]+uc;fb=fb[1]+fd;aa.call(d.setTranslate,Pb,fb);Q("x",n(C,uc,"x",M,B));Q("y",n(v,fd,"y",M,B));B.axref===B.xref&&Q("ax",n(C,uc,"ax",M,B));B.ayref===B.yref&&Q("ay",n(v,fd,"ay",M,B));Gb.attr("transform",r(uc,fd));fa.attr({transform:"rotate("+S+","+Pb+","+fb+")"})},doneFn:function(){a.call("_guiRelayout",z,Z());var uc=document.querySelector(".js-notes-box-panel");uc&&uc.redraw(uc.selectedObj)}})}}};
B.showarrow&&ab(0,0);if(W){var Db;t.init({element:aa.node(),gd:z,prepFn:function(){Db=fa.attr("transform")},moveFn:function(Nb,ec){var ob="pointer";if(B.showarrow)B.axref===B.xref?Q("ax",n(C,Nb,"ax",M,B)):Q("ax",B.ax+Nb),B.ayref===B.yref?Q("ay",n(v,ec,"ay",M.w,B)):Q("ay",B.ay+ec),ab(Nb,ec);else{if(D)return;if(C)var Cb=n(C,Nb,"x",M,B);else Cb=B._xsize/M.w,Cb=t.align(B.x+(B._xshift-B.xshift)/M.w-Cb/2+Nb/M.w,Cb,0,1,B.xanchor);if(v)var Qb=n(v,ec,"y",M,B);else Qb=B._ysize/M.h,Qb=t.align(B.y-(B._yshift+
B.yshift)/M.h-Qb/2-ec/M.h,Qb,0,1,B.yanchor);Q("x",Cb);Q("y",Qb);C&&v||(ob=t.getCursor(C?.5:Cb,v?.5:Qb,B.xanchor,B.yanchor))}fa.attr({transform:r(Nb,ec)+Db});q(aa,ob)},clickFn:function(Nb,ec){B.captureevents&&z.emit("plotly_clickannotation",y(ec))},doneFn:function(){q(aa);a.call("_guiRelayout",z,Z());var Nb=document.querySelector(".js-notes-box-panel");Nb&&Nb.redraw(Nb.selectedObj)}})}}}var K=z._fullLayout,M=z._fullLayout._size,H=z._context.edits;if(D){var O="annotation-"+D;var I=D+".annotations"}else O=
"annotation",I="annotations";I=w(z.layout,I,B);var L=I.modifyBase,Q=I.modifyItem,Z=I.getUpdateObj;K._infolayer.selectAll("."+O+'[data-index\x3d"'+A+'"]').remove();var ba="clip"+K._uid+"_ann"+A;if(B._input&&!1!==B.visible){var V={x:{},y:{}},S=+B.textangle||0,T=K._infolayer.append("g").classed(O,!0).attr("data-index",String(A)).style("opacity",B.opacity),fa=T.append("g").classed("annotation-text-g",!0),W=H[B.showarrow?"annotationTail":"annotationPosition"];O=B.captureevents||H.annotationText||W;var aa=
fa.append("g").style("pointer-events",O?"all":null).call(q,"pointer").on("click",function(){z._dragging=!1;z.emit("plotly_clickannotation",y(m.event))});if(B.hovertext)aa.on("mouseover",function(){var ka=B.hoverlabel,na=ka.font,oa=this.getBoundingClientRect(),sa=z.getBoundingClientRect();e.loneHover({x0:oa.left-sa.left,x1:oa.right-sa.left,y:(oa.top+oa.bottom)/2-sa.top,text:B.hovertext,color:ka.bgcolor,borderColor:ka.bordercolor,fontFamily:na.family,fontSize:na.size,fontColor:na.color},{container:K._hoverlayer.node(),
outerContainer:K._paper.node(),gd:z})}).on("mouseout",function(){e.loneUnhover(K._hoverlayer.node())});var ja=B.borderwidth,ma=ja+B.borderpad,ia=aa.append("rect").attr("class","bg").style("stroke-width",ja+"px").call(c.stroke,B.bordercolor).call(c.fill,B.bgcolor),ra=B.width||B.height,wa=K._topclips.selectAll("#"+ba).data(ra?[0]:[]);wa.enter().append("clipPath").classed("annclip",!0).attr("id",ba).append("rect");wa.exit().remove();var pa=B.font;O=K._meta?h.templateString(B.text,K._meta):B.text;var la=
aa.append("text").classed("annotation-text",!0).text(O);if(H.annotationText)la.call(f.makeEditable,{delegate:aa,gd:z}).call(F).on("edit",function(ka){B.text=ka;this.call(F);Q("text",ka);C&&C.autorange&&L(C._name+".autorange",!0);v&&v.autorange&&L(v._name+".autorange",!0);a.call("_guiRelayout",z,Z())});else la.call(F)}else m.selectAll("#"+ba).remove()}var m=b("@plotly/d3"),a=b("../../registry"),g=b("../../plots/plots"),h=b("../../lib"),r=h.strTranslate,l=b("../../plots/cartesian/axes"),c=b("../color"),
d=b("../drawing"),e=b("../fx"),f=b("../../lib/svg_text_utils"),q=b("../../lib/setcursor"),t=b("../dragelement"),w=b("../../plot_api/plot_template").arrayEditor,x=b("./draw_arrow_head");N.exports={draw:function(z){var B=z._fullLayout;B._infolayer.selectAll(".annotation").remove();for(var A=0;A<B.annotations.length;A++)B.annotations[A].visible&&p(z,A);return g.previousPromises(z)},drawOne:p,drawRaw:k}},{"../../lib":803,"../../lib/setcursor":824,"../../lib/svg_text_utils":829,"../../plot_api/plot_template":843,
"../../plots/cartesian/axes":854,"../../plots/plots":917,"../../registry":931,"../color":666,"../dragelement":685,"../drawing":688,"../fx":706,"./draw_arrow_head":656,"@plotly/d3":58}],656:[function(b,N,G){var p=b("@plotly/d3"),n=b("../color"),k=b("./arrow_paths");b=b("../../lib");var m=b.strScale,a=b.strRotate,g=b.strTranslate;N.exports=function(h,r,l){function c(){h.style("stroke-dasharray","0px,100px")}function d(K,M,H,O){K.path&&(K.noRotate&&(H=0),p.select(e.parentNode).append("path").attr({"class":h.attr("class"),
d:K.path,transform:g(M.x,M.y)+a(180*H/Math.PI)+m(O)}).style({fill:n.rgb(l.arrowcolor),"stroke-width":0}))}var e=h.node(),f=k[l.arrowhead||0],q=k[l.startarrowhead||0],t=(l.arrowwidth||1)*(l.arrowsize||1),w=(l.arrowwidth||1)*(l.startarrowsize||1),x=0<=r.indexOf("start");r=0<=r.indexOf("end");var z=f.backoff*t+l.standoff,B=q.backoff*w+l.startstandoff;if("line"===e.nodeName){var A={x:+h.attr("x1"),y:+h.attr("y1")};var D={x:+h.attr("x2"),y:+h.attr("y2")};var C=A.x-D.x,v=A.y-D.y;var y=Math.atan2(v,C);var F=
y+Math.PI;if(z&&B&&z+B>Math.sqrt(C*C+v*v)){c();return}if(z){if(z*z>C*C+v*v){c();return}var J=z*Math.sin(y);D.x+=z*Math.cos(y);D.y+=J;h.attr({x2:D.x,y2:D.y})}if(B){if(B*B>C*C+v*v){c();return}z=B*Math.sin(y);A.x-=B*Math.cos(y);A.y-=z;h.attr({x1:A.x,y1:A.y})}}else if("path"===e.nodeName){C=e.getTotalLength();v="";if(C<z+B){c();return}A=e.getPointAtLength(0);y=e.getPointAtLength(.1);y=Math.atan2(A.y-y.y,A.x-y.x);A=e.getPointAtLength(Math.min(B,C));v="0px,"+B+"px,";D=e.getPointAtLength(C);F=e.getPointAtLength(C-
.1);F=Math.atan2(D.y-F.y,D.x-F.x);D=e.getPointAtLength(Math.max(0,C-z));h.style("stroke-dasharray",v+(C-(v?B+z:z)+"px,"+C+"px"))}x&&d(q,A,y,w);r&&d(f,D,F,t)}},{"../../lib":803,"../color":666,"./arrow_paths":648,"@plotly/d3":58}],657:[function(b,N,G){G=b("./draw");var p=b("./click");N.exports={moduleType:"component",name:"annotations",layoutAttributes:b("./attributes"),supplyLayoutDefaults:b("./defaults"),includeBasePlot:b("../../plots/cartesian/include_components")("annotations"),calcAutorange:b("./calc_autorange"),
draw:G.draw,drawOne:G.drawOne,drawRaw:G.drawRaw,hasClickToShow:p.hasClickToShow,onClick:p.onClick,convertCoords:b("./convert_coords")}},{"../../plots/cartesian/include_components":867,"./attributes":649,"./calc_autorange":650,"./click":651,"./convert_coords":653,"./defaults":654,"./draw":655}],658:[function(b,N,G){G=b("../annotations/attributes");var p=b("../../plot_api/edit_types").overrideAll;b=b("../../plot_api/plot_template").templatedArray;N.exports=p(b("annotation",{visible:G.visible,x:{valType:"any"},
y:{valType:"any"},z:{valType:"any"},ax:{valType:"number"},ay:{valType:"number"},xanchor:G.xanchor,xshift:G.xshift,yanchor:G.yanchor,yshift:G.yshift,text:G.text,textangle:G.textangle,font:G.font,width:G.width,height:G.height,opacity:G.opacity,align:G.align,valign:G.valign,bgcolor:G.bgcolor,bordercolor:G.bordercolor,borderpad:G.borderpad,borderwidth:G.borderwidth,showarrow:G.showarrow,arrowcolor:G.arrowcolor,arrowhead:G.arrowhead,startarrowhead:G.startarrowhead,arrowside:G.arrowside,arrowsize:G.arrowsize,
startarrowsize:G.startarrowsize,arrowwidth:G.arrowwidth,standoff:G.standoff,startstandoff:G.startstandoff,hovertext:G.hovertext,hoverlabel:G.hoverlabel,captureevents:G.captureevents}),"calc","from-root")},{"../../plot_api/edit_types":836,"../../plot_api/plot_template":843,"../annotations/attributes":649}],659:[function(b,N,G){function p(m,a){var g=a.fullSceneLayout.domain,h=a.fullLayout._size;a={pdata:null,type:"linear",autorange:!1,range:[-Infinity,Infinity]};m._xa={};n.extendFlat(m._xa,a);k.setConvert(m._xa);
m._xa._offset=h.l+g.x[0]*h.w;m._xa.l2p=function(){return.5*(1+m._pdata[0]/m._pdata[3])*h.w*(g.x[1]-g.x[0])};m._ya={};n.extendFlat(m._ya,a);k.setConvert(m._ya);m._ya._offset=h.t+(1-g.y[1])*h.h;m._ya.l2p=function(){return.5*(1-m._pdata[1]/m._pdata[3])*h.h*(g.y[1]-g.y[0])}}var n=b("../../lib"),k=b("../../plots/cartesian/axes");N.exports=function(m){for(var a=m.fullSceneLayout.annotations,g=0;g<a.length;g++)p(a[g],m);m.fullLayout._infolayer.selectAll(".annotation-"+m.id).remove()}},{"../../lib":803,"../../plots/cartesian/axes":854}],
660:[function(b,N,G){function p(h,r,l,c){function d(f,q){return n.coerce(h,r,g,f,q)}function e(f){var q=f+"axis",t={_fullLayout:{}};t._fullLayout[q]=l[q];return k.coercePosition(r,t,d,f,f,.5)}d("visible")&&(a(h,r,c.fullLayout,d),e("x"),e("y"),e("z"),n.noneOrAll(h,r,["x","y","z"]),r.xref="x",r.yref="y",r.zref="z",d("xanchor"),d("yanchor"),d("xshift"),d("yshift"),r.showarrow&&(r.axref="pixel",r.ayref="pixel",d("ax",-10),d("ay",-30),n.noneOrAll(h,r,["ax","ay"])))}var n=b("../../lib"),k=b("../../plots/cartesian/axes"),
m=b("../../plots/array_container_defaults"),a=b("../annotations/common_defaults"),g=b("./attributes");N.exports=function(h,r,l){m(h,r,{name:"annotations",handleItemDefaults:p,fullLayout:l.fullLayout})}},{"../../lib":803,"../../plots/array_container_defaults":849,"../../plots/cartesian/axes":854,"../annotations/common_defaults":652,"./attributes":658}],661:[function(b,N,G){var p=b("../annotations/draw").drawRaw,n=b("../../plots/gl3d/project"),k=["x","y","z"];N.exports=function(m){for(var a=m.fullSceneLayout,
g=m.dataScale,h=a.annotations,r=0;r<h.length;r++){for(var l=h[r],c=!1,d=0;3>d;d++){var e=k[d];e=a[e+"axis"].r2fraction(l[e]);if(0>e||1<e){c=!0;break}}c?m.fullLayout._infolayer.select(".annotation-"+m.id+'[data-index\x3d"'+r+'"]').remove():(l._pdata=n(m.glplot.cameraParams,[a.xaxis.r2l(l.x)*g[0],a.yaxis.r2l(l.y)*g[1],a.zaxis.r2l(l.z)*g[2]]),p(m.graphDiv,l,r,m.id,l._xa,l._ya))}}},{"../../plots/gl3d/project":905,"../annotations/draw":655}],662:[function(b,N,G){var p=b("../../registry"),n=b("../../lib");
N.exports={moduleType:"component",name:"annotations3d",schema:{subplots:{scene:{annotations:b("./attributes")}}},layoutAttributes:b("./attributes"),handleDefaults:b("./defaults"),includeBasePlot:function(k,m){var a=p.subplotsRegistry.gl3d;if(a)for(var g=a.attrRegex,h=Object.keys(k),r=0;r<h.length;r++){var l=h[r];g.test(l)&&(k[l].annotations||[]).length&&(n.pushUnique(m._basePlotModules,a),n.pushUnique(m._subplots.gl3d,l))}},convert:b("./convert"),draw:b("./draw")}},{"../../lib":803,"../../registry":931,
"./attributes":658,"./convert":659,"./defaults":660,"./draw":661}],663:[function(b,N,G){N.exports=b("world-calendars/dist/main");b("world-calendars/dist/plus");b("world-calendars/dist/calendars/chinese");b("world-calendars/dist/calendars/coptic");b("world-calendars/dist/calendars/discworld");b("world-calendars/dist/calendars/ethiopian");b("world-calendars/dist/calendars/hebrew");b("world-calendars/dist/calendars/islamic");b("world-calendars/dist/calendars/julian");b("world-calendars/dist/calendars/mayan");
b("world-calendars/dist/calendars/nanakshahi");b("world-calendars/dist/calendars/nepali");b("world-calendars/dist/calendars/persian");b("world-calendars/dist/calendars/taiwan");b("world-calendars/dist/calendars/thai");b("world-calendars/dist/calendars/ummalqura")},{"world-calendars/dist/calendars/chinese":630,"world-calendars/dist/calendars/coptic":631,"world-calendars/dist/calendars/discworld":632,"world-calendars/dist/calendars/ethiopian":633,"world-calendars/dist/calendars/hebrew":634,"world-calendars/dist/calendars/islamic":635,
"world-calendars/dist/calendars/julian":636,"world-calendars/dist/calendars/mayan":637,"world-calendars/dist/calendars/nanakshahi":638,"world-calendars/dist/calendars/nepali":639,"world-calendars/dist/calendars/persian":640,"world-calendars/dist/calendars/taiwan":641,"world-calendars/dist/calendars/thai":642,"world-calendars/dist/calendars/ummalqura":643,"world-calendars/dist/main":644,"world-calendars/dist/plus":645}],664:[function(b,N,G){function p(q){var t=d[q];return t?t:t=d[q]=m.instance(q)}
function n(q){return a.extendFlat({},r,{description:q})}function k(q){return"Sets the calendar system to use with `"+q+"` date data."}var m=b("./calendars"),a=b("../../lib");b=b("../../constants/numerical");var g=b.EPOCHJD,h=b.ONEDAY,r={valType:"enumerated",values:a.sortObjectKeys(m.calendars),editType:"calc",dflt:"gregorian"},l=function(q,t,w,x){var z={};z[w]=r;return a.coerce(q,t,z,w,x)},c={d:{0:"dd","-":"d"},e:{0:"d","-":"d"},a:{0:"D","-":"D"},A:{0:"DD","-":"DD"},j:{0:"oo","-":"o"},W:{0:"ww","-":"w"},
m:{0:"mm","-":"m"},b:{0:"M","-":"M"},B:{0:"MM","-":"MM"},y:{0:"yy","-":"yy"},Y:{0:"yyyy","-":"yyyy"},U:"##",w:"##",c:{0:"D M d %X yyyy","-":"D M d %X yyyy"},x:{0:"mm/dd/yyyy","-":"mm/dd/yyyy"}},d={};b={xcalendar:n(k("x"))};G=a.extendFlat({},b,{ycalendar:n(k("y"))});var e=a.extendFlat({},G,{zcalendar:n(k("z"))}),f=n("Sets the calendar system to use for `range` and `tick0` if this is a date axis. This does not set the calendar for interpreting data on this axis, that's specified in the trace or via the global `layout.calendar`");
N.exports={moduleType:"component",name:"calendars",schema:{traces:{scatter:G,bar:G,box:G,heatmap:G,contour:G,histogram:G,histogram2d:G,histogram2dcontour:G,scatter3d:e,surface:e,mesh3d:e,scattergl:G,ohlc:b,candlestick:b},layout:{calendar:n("Sets the default calendar system to use for interpreting and displaying dates throughout the plot.")},subplots:{xaxis:{calendar:f},yaxis:{calendar:f},scene:{xaxis:{calendar:f},yaxis:{calendar:f},zaxis:{calendar:f}},polar:{radialaxis:{calendar:f}}},transforms:{filter:{valuecalendar:n("WARNING: All transforms are deprecated and may be removed from the API in next major version. Sets the calendar system to use for `value`, if it is a date."),
targetcalendar:n("WARNING: All transforms are deprecated and may be removed from the API in next major version. Sets the calendar system to use for `target`, if it is an array of dates. If `target` is a string (eg *x*) we use the corresponding trace attribute (eg `xcalendar`) if it exists, even if `targetcalendar` is provided.")}}},layoutAttributes:r,handleDefaults:l,handleTraceDefaults:function(q,t,w,x){for(var z=0;z<w.length;z++)l(q,t,w[z]+"calendar",x.calendar)},CANONICAL_SUNDAY:{chinese:"2000-01-02",
coptic:"2000-01-03",discworld:"2000-01-03",ethiopian:"2000-01-05",hebrew:"5000-01-01",islamic:"1000-01-02",julian:"2000-01-03",mayan:"5000-01-01",nanakshahi:"1000-01-05",nepali:"2000-01-05",persian:"1000-01-01",jalali:"1000-01-01",taiwan:"1000-01-04",thai:"2000-01-04",ummalqura:"1400-01-06"},CANONICAL_TICK:{chinese:"2000-01-01",coptic:"2000-01-01",discworld:"2000-01-01",ethiopian:"2000-01-01",hebrew:"5000-01-01",islamic:"1000-01-01",julian:"2000-01-01",mayan:"5000-01-01",nanakshahi:"1000-01-01",nepali:"2000-01-01",
persian:"1000-01-01",jalali:"1000-01-01",taiwan:"1000-01-01",thai:"2000-01-01",ummalqura:"1400-01-01"},DFLTRANGE:{chinese:["2000-01-01","2001-01-01"],coptic:["1700-01-01","1701-01-01"],discworld:["1800-01-01","1801-01-01"],ethiopian:["2000-01-01","2001-01-01"],hebrew:["5700-01-01","5701-01-01"],islamic:["1400-01-01","1401-01-01"],julian:["2000-01-01","2001-01-01"],mayan:["5200-01-01","5201-01-01"],nanakshahi:["0500-01-01","0501-01-01"],nepali:["2000-01-01","2001-01-01"],persian:["1400-01-01","1401-01-01"],
jalali:["1400-01-01","1401-01-01"],taiwan:["0100-01-01","0101-01-01"],thai:["2500-01-01","2501-01-01"],ummalqura:["1400-01-01","1401-01-01"]},getCal:p,worldCalFmt:function(q,t,w){t=Math.floor((t+.05)/h)+g;w=p(w).fromJD(t);t=0;for(var x,z,B;-1!==(t=q.indexOf("%",t));)x=q.charAt(t+1),"0"===x||"-"===x||"_"===x?(B=3,z=q.charAt(t+2),"_"===x&&(x="-")):(z=x,x="0",B=2),(z=c[z])?(x="##"===z?"##":w.formatDate(z[x]),q=q.substr(0,t)+x+q.substr(t+B),t+=x.length):t+=B;return q}}},{"../../constants/numerical":779,
"../../lib":803,"./calendars":663}],665:[function(b,N,G){G.defaults="#1f77b4 #ff7f0e #2ca02c #d62728 #9467bd #8c564b #e377c2 #7f7f7f #bcbd22 #17becf".split(" ");G.defaultLine="#444";G.lightLine="#eee";G.background="#fff";G.borderLine="#BEC8D9";G.lightFraction=1E3/11},{}],666:[function(b,N,G){function p(r){if(k(r)||"string"!==typeof r)return r;var l=r.trim();if("rgb"!==l.substr(0,3))return r;var c=l.match(/^rgba?\s*\(([^()]*)\)$/);if(!c)return r;c=c[1].trim().split(/\s*[\s,]\s*/);l="a"===l.charAt(3)&&
4===c.length;if(!l&&3!==c.length)return r;for(var d=0;d<c.length;d++){if(!c[d].length)return r;c[d]=Number(c[d]);if(!(0<=c[d]))return r;if(3===d)1<c[d]&&(c[d]=1);else if(1<=c[d])return r}r=Math.round(255*c[0])+", "+Math.round(255*c[1])+", "+Math.round(255*c[2]);return l?"rgba("+r+", "+c[3]+")":"rgb("+r+")"}var n=b("tinycolor2"),k=b("fast-isnumeric"),m=b("../../lib/array").isTypedArray,a=N.exports={};b=b("./attributes");a.defaults=b.defaults;var g=a.defaultLine=b.defaultLine;a.lightLine=b.lightLine;
var h=a.background=b.background;a.tinyRGB=function(r){r=r.toRgb();return"rgb("+Math.round(r.r)+", "+Math.round(r.g)+", "+Math.round(r.b)+")"};a.rgb=function(r){return a.tinyRGB(n(r))};a.opacity=function(r){return r?n(r).getAlpha():0};a.addOpacity=function(r,l){r=n(r).toRgb();return"rgba("+Math.round(r.r)+", "+Math.round(r.g)+", "+Math.round(r.b)+", "+l+")"};a.combine=function(r,l){var c=n(r).toRgb();if(1===c.a)return n(r).toRgbString();r=n(l||h).toRgb();r=1===r.a?r:{r:255*(1-r.a)+r.r*r.a,g:255*(1-
r.a)+r.g*r.a,b:255*(1-r.a)+r.b*r.a};return n({r:r.r*(1-c.a)+c.r*c.a,g:r.g*(1-c.a)+c.g*c.a,b:r.b*(1-c.a)+c.b*c.a}).toRgbString()};a.contrast=function(r,l,c){var d=n(r);1!==d.getAlpha()&&(d=n(a.combine(r,h)));return(d.isDark()?l?d.lighten(l):h:c?d.darken(c):g).toString()};a.stroke=function(r,l){l=n(l);r.style({stroke:a.tinyRGB(l),"stroke-opacity":l.getAlpha()})};a.fill=function(r,l){l=n(l);r.style({fill:a.tinyRGB(l),"fill-opacity":l.getAlpha()})};a.clean=function(r){if(r&&"object"===typeof r){var l=
Object.keys(r),c;for(c=0;c<l.length;c++){var d=l[c];var e=r[d];if("color"===d.substr(d.length-5))if(Array.isArray(e))for(d=0;d<e.length;d++)e[d]=p(e[d]);else r[d]=p(e);else if("colorscale"===d.substr(d.length-10)&&Array.isArray(e))for(d=0;d<e.length;d++)Array.isArray(e[d])&&(e[d][1]=p(e[d][1]));else if(Array.isArray(e)){if(d=e[0],!Array.isArray(d)&&d&&"object"===typeof d)for(d=0;d<e.length;d++)a.clean(e[d])}else e&&"object"===typeof e&&!m(e)&&a.clean(e)}}}},{"../../lib/array":785,"./attributes":665,
"fast-isnumeric":249,tinycolor2:598}],667:[function(b,N,G){G=b("../../plots/cartesian/layout_attributes");var p=b("../../plots/font_attributes"),n=b("../../lib/extend").extendFlat;b=b("../../plot_api/edit_types").overrideAll;N.exports=b({thicknessmode:{valType:"enumerated",values:["fraction","pixels"],dflt:"pixels"},thickness:{valType:"number",min:0,dflt:30},lenmode:{valType:"enumerated",values:["fraction","pixels"],dflt:"fraction"},len:{valType:"number",min:0,dflt:1},x:{valType:"number",dflt:1.02,
min:-2,max:3},xanchor:{valType:"enumerated",values:["left","center","right"],dflt:"left"},xpad:{valType:"number",min:0,dflt:10},y:{valType:"number",dflt:.5,min:-2,max:3},yanchor:{valType:"enumerated",values:["top","middle","bottom"],dflt:"middle"},ypad:{valType:"number",min:0,dflt:10},outlinecolor:G.linecolor,outlinewidth:G.linewidth,bordercolor:G.linecolor,borderwidth:{valType:"number",min:0,dflt:0},bgcolor:{valType:"color",dflt:"rgba(0,0,0,0)"},tickmode:G.tickmode,nticks:G.nticks,tick0:G.tick0,
dtick:G.dtick,tickvals:G.tickvals,ticktext:G.ticktext,ticks:n({},G.ticks,{dflt:""}),ticklabeloverflow:n({},G.ticklabeloverflow,{}),ticklabelposition:{valType:"enumerated",values:"outside;inside;outside top;inside top;outside bottom;inside bottom".split(";"),dflt:"outside"},ticklen:G.ticklen,tickwidth:G.tickwidth,tickcolor:G.tickcolor,showticklabels:G.showticklabels,tickfont:p({}),tickangle:G.tickangle,tickformat:G.tickformat,tickformatstops:G.tickformatstops,tickprefix:G.tickprefix,showtickprefix:G.showtickprefix,
ticksuffix:G.ticksuffix,showticksuffix:G.showticksuffix,separatethousands:G.separatethousands,exponentformat:G.exponentformat,minexponent:G.minexponent,showexponent:G.showexponent,title:{text:{valType:"string"},font:p({}),side:{valType:"enumerated",values:["right","top","bottom"],dflt:"top"}},_deprecated:{title:{valType:"string"},titlefont:p({}),titleside:{valType:"enumerated",values:["right","top","bottom"],dflt:"top"}}},"colorbars","from-root")},{"../../lib/extend":793,"../../plot_api/edit_types":836,
"../../plots/cartesian/layout_attributes":869,"../../plots/font_attributes":883}],668:[function(b,N,G){N.exports={cn:{colorbar:"colorbar",cbbg:"cbbg",cbfill:"cbfill",cbfills:"cbfills",cbline:"cbline",cblines:"cblines",cbaxis:"cbaxis",cbtitleunshift:"cbtitleunshift",cbtitle:"cbtitle",cboutline:"cboutline",crisp:"crisp",jsPlaceholder:"js-placeholder"}}},{}],669:[function(b,N,G){var p=b("../../lib"),n=b("../../plot_api/plot_template"),k=b("../../plots/cartesian/tick_value_defaults"),m=b("../../plots/cartesian/tick_mark_defaults"),
a=b("../../plots/cartesian/tick_label_defaults"),g=b("./attributes");N.exports=function(h,r,l){function c(q,t){return p.coerce(e,d,g,q,t)}var d=n.newContainer(r,"colorbar"),e=h.colorbar||{};h=c("thicknessmode");c("thickness","fraction"===h?30/(l.width-l.margin.l-l.margin.r):30);h=c("lenmode");c("len","fraction"===h?1:l.height-l.margin.t-l.margin.b);c("x");c("xanchor");c("xpad");c("y");c("yanchor");c("ypad");p.noneOrAll(e,d,["x","y"]);c("outlinecolor");c("outlinewidth");c("bordercolor");c("borderwidth");
c("bgcolor");r=c("ticklabelposition");c("ticklabeloverflow",-1!==r.indexOf("inside")?"hide past domain":"hide past div");k(e,d,c,"linear");h=l.font;var f={outerTicks:!1,font:h};-1!==r.indexOf("inside")&&(f.bgColor="black");a(e,d,c,"linear",f);m(e,d,c,"linear",f);c("title.text",l._dfltTitle.colorbar);l=d.tickfont;l=p.extendFlat({},l,{color:h.color,size:p.bigFont(l.size)});p.coerceFont(c,"title.font",l);c("title.side")}},{"../../lib":803,"../../plot_api/plot_template":843,"../../plots/cartesian/tick_label_defaults":876,
"../../plots/cartesian/tick_mark_defaults":877,"../../plots/cartesian/tick_value_defaults":878,"./attributes":667}],670:[function(b,N,G){function p(M){function H(ia){return q(ia,{_fillcolor:null,_line:{color:null,width:null,dash:null},_levels:{start:null,end:null,size:null},_filllevels:null,_fillgradient:null,_zrange:null})}function O(){"function"===typeof S.calc?S.calc(M,V,Z):(Z._fillgradient=ba.reversescale?A(ba.colorscale):ba.colorscale,Z._zrange=[ba[S.min],ba[S.max]])}for(var I=M._fullLayout,
L=M.calcdata,Q=[],Z,ba,V,S,T=0;T<L.length;T++){V=L[T][0].trace;var fa=V._module.colorbar;if(!0===V.visible&&fa){var W=Array.isArray(fa);fa=W?fa:[fa];for(var aa=0;aa<fa.length;aa++){S=fa[aa];var ja=S.container;(ba=ja?V[ja]:V)&&ba.showscale&&(Z=H(ba.colorbar),Z._id="cb"+V.uid+(W&&ja?"-"+ja:""),Z._traceIndex=V.index,Z._propPrefix=(ja?ja+".":"")+"colorbar.",Z._meta=V._meta,O(),Q.push(Z))}}}for(var ma in I._colorAxes)ba=I[ma],ba.showscale&&(L=I._colorAxes[ma],Z=H(ba.colorbar),Z._id="cb"+ma,Z._propPrefix=
ma+".colorbar.",Z._meta=I._meta,S={min:"cmin",max:"cmax"},"heatmap"!==L[0]&&(V=L[1],S.calc=V._module.colorbar.calc),O(),Q.push(Z));return Q}function n(M,H,O){function I(pb,Ab){var tb={propContainer:Za,propName:H._propPrefix+"title",traceIndex:H._traceIndex,_meta:H._meta,placeholder:L._dfltTitle.colorbar,containerGroup:M.select("."+K.cbtitle)},vb="h"===pb.charAt(0)?pb.substr(1):"h"+pb;M.selectAll("."+vb+",."+vb+"-math-group").remove();z.draw(O,pb,q(tb,Ab||{}))}var L=O._fullLayout,Q=L._size,Z=H._fillcolor,
ba=H._line,V=H.title,S=V.side,T=H._zrange||g.extent(("function"===typeof Z?Z:ba.color).domain()),fa="function"===typeof ba.color?ba.color:function(){return ba.color},W="function"===typeof Z?Z:function(){return Z},aa=H._levels,ja=m(O,H,T),ma=ja.fill,ia=ja.line,ra=Math.round(H.thickness*("fraction"===H.thicknessmode?Q.w:1));ja=ra/Q.w;var wa=Math.round(H.len*("fraction"===H.lenmode?Q.h:1)),pa=wa/Q.h,la=H.xpad/Q.w,ka=(H.borderwidth+H.outlinewidth)/2,na=H.ypad/Q.h,oa=Math.round(H.x*Q.w+H.xpad),sa=H.x-
ja*({middle:.5,right:1}[H.xanchor]||0),za=H.y+pa*(({top:-.5,bottom:.5}[H.yanchor]||0)-.5),Ha=Math.round(Q.h*(1-za)),Wa=Ha-wa;H._lenFrac=pa;H._thickFrac=ja;H._xLeftFrac=sa;H._yBottomFrac=za;var Za=H._axis=a(O,H,T);Za.position=H.x+la+ja;-1!==["top","bottom"].indexOf(S)&&(Za.title.side=S,Za.titlex=H.x+la,Za.titley=za+("top"===V.side?pa-na:na));ba.color&&"auto"===H.tickmode&&(Za.tickmode="linear",Za.tick0=aa.start,V=aa.size,ja=e.constrain((Ha-Wa)/50,4,15)+1,ja=(T[1]-T[0])/((H.nticks||ja)*V),1<ja&&(wa=
Math.pow(10,Math.floor(Math.log(ja)/Math.LN10)),V*=wa*e.roundUp(ja/wa,[2,5,10]),2E-6>(Math.abs(aa.start)/aa.size+1E-6)%1&&(Za.tick0=0)),Za.dtick=V);Za.domain=[za+na,za+pa-na];Za.setScale();M.attr("transform",f(Math.round(Q.l),Math.round(Q.t)));var bb=M.select("."+K.cbtitleunshift).attr("transform",f(-Math.round(Q.l),-Math.round(Q.t))),sb=M.select("."+K.cbaxis),hb,ub=0;return e.syncOrAsync([r.previousPromises,function(){if(-1!==["top","bottom"].indexOf(S)){var pb=Za.title.font.size;I(Za._id+"title",
{attributes:{x:Q.l+(H.x+la)*Q.w,y:"top"===S?(1-(za+pa-na))*Q.h+Q.t+3+.75*pb:(1-(za+na))*Q.h+Q.t-3-.25*pb,"text-anchor":"start"}})}},function(){if(-1!==["top","bottom"].indexOf(S)){var pb=M.select("."+K.cbtitle),Ab=pb.select("text"),tb=[-H.outlinewidth/2,H.outlinewidth/2],vb=pb.select(".h"+Za._id+"title-math-group").node(),qb=15.6;Ab.node()&&(qb=parseInt(Ab.node().style.fontSize,10)*y);vb?(ub=w.bBox(vb).height,ub>qb&&(tb[1]-=(ub-qb)/2)):Ab.node()&&!Ab.classed(K.jsPlaceholder)&&(ub=w.bBox(Ab.node()).height);
ub&&(ub+=5,"top"===S?(Za.domain[1]-=ub/Q.h,tb[1]*=-1):(Za.domain[0]+=ub/Q.h,Ab=B.lineCount(Ab),tb[1]+=(1-Ab)*qb),pb.attr("transform",f(tb[0],tb[1])),Za.setScale())}M.selectAll("."+K.cbfills+",."+K.cblines).attr("transform",f(0,Math.round(Q.h*(1-Za.domain[1]))));sb.attr("transform",f(0,Math.round(-Q.t)));pb=M.select("."+K.cbfills).selectAll("rect."+K.cbfill).attr("style","").data(ma);pb.enter().append("rect").classed(K.cbfill,!0).style("stroke","none");pb.exit().remove();var zb=T.map(Za.c2p).map(Math.round).sort(function(La,
Ka){return La-Ka});pb.each(function(La,Ka){Ka=[0===Ka?T[0]:(ma[Ka]+ma[Ka-1])/2,Ka===ma.length-1?T[1]:(ma[Ka]+ma[Ka+1])/2].map(Za.c2p).map(Math.round);Ka[1]=e.constrain(Ka[1]+(Ka[1]>Ka[0])?1:-1,zb[0],zb[1]);Ka=g.select(this).attr({x:oa,width:Math.max(ra,2),y:g.min(Ka),height:Math.max(g.max(Ka)-g.min(Ka),2)});H._fillgradient?w.gradient(Ka,O,H._id,"vertical",H._fillgradient,"fill"):(La=W(La).replace("e-",""),Ka.attr("fill",h(La).toHexString()))});pb=M.select("."+K.cblines).selectAll("path."+K.cbline).data(ba.color&&
ba.width?ia:[]);pb.enter().append("path").classed(K.cbline,!0);pb.exit().remove();pb.each(function(La){g.select(this).attr("d","M"+oa+","+(Math.round(Za.c2p(La))+ba.width/2%1)+"h"+ra).call(w.lineGroupStyle,ba.width,fa(La),ba.dash)});sb.selectAll("g."+Za._id+"tick,path").remove();pb=oa+ra+(H.outlinewidth||0)/2-("outside"===H.ticks?1:0);tb=c.calcTicks(Za);qb=c.getTickSigns(Za)[2];c.drawTicks(O,Za,{vals:"inside"===Za.ticks?c.clipEnds(Za,tb):tb,layer:sb,path:c.makeTickPath(Za,pb,qb),transFn:c.makeTransTickFn(Za)});
return c.drawLabels(O,Za,{vals:tb,layer:sb,transFn:c.makeTransTickLabelFn(Za),labelFns:c.makeLabelFns(Za,pb)})},function(){if(-1===["top","bottom"].indexOf(S)){var pb=Za.title.font.size,Ab=Za._offset+Za._length/2;pb=Q.l+(Za.position||0)*Q.w+("right"===Za.side?10+pb*(Za.showticklabels?1:.5):-10-pb*(Za.showticklabels?.5:0));I("h"+Za._id+"title",{avoid:{selection:g.select(O).selectAll("g."+Za._id+"tick"),side:S,offsetLeft:Q.l,offsetTop:0,maxShift:L.width},attributes:{x:pb,y:Ab,"text-anchor":"middle"},
transform:{rotate:"-90",offset:0}})}},r.previousPromises,function(){var pb=ra+H.outlinewidth/2;-1===Za.ticklabelposition.indexOf("inside")&&(pb+=w.bBox(sb.node()).width);hb=bb.select("text");if(hb.node()&&!hb.classed(K.jsPlaceholder)){var Ab=bb.select(".h"+Za._id+"title-math-group").node();Ab=Ab&&-1!==["top","bottom"].indexOf(S)?w.bBox(Ab).width:w.bBox(bb.node()).right-oa-Q.l;pb=Math.max(pb,Ab)}Ab=2*H.xpad+pb+H.borderwidth+H.outlinewidth/2;var tb=Ha-Wa;M.select("."+K.cbbg).attr({x:oa-H.xpad-(H.borderwidth+
H.outlinewidth)/2,y:Wa-ka,width:Math.max(Ab,2),height:Math.max(tb+2*ka,2)}).call(x.fill,H.bgcolor).call(x.stroke,H.bordercolor).style("stroke-width",H.borderwidth);M.selectAll("."+K.cboutline).attr({x:oa,y:Wa+H.ypad+("top"===S?ub:0),width:Math.max(ra,2),height:Math.max(tb-2*H.ypad-ub,2)}).call(x.stroke,H.outlinecolor).style({fill:"none","stroke-width":H.outlinewidth});M.attr("transform",f(Q.l-({center:.5,right:1}[H.xanchor]||0)*Ab,Q.t));pb={};var vb=F[H.yanchor],qb=J[H.yanchor];"pixels"===H.lenmode?
(pb.y=H.y,pb.t=tb*vb,pb.b=tb*qb):(pb.t=pb.b=0,pb.yt=H.y+H.len*vb,pb.yb=H.y-H.len*qb);tb=F[H.xanchor];vb=J[H.xanchor];"pixels"===H.thicknessmode?(pb.x=H.x,pb.l=Ab*tb,pb.r=Ab*vb):(Ab-=ra,pb.l=Ab*tb,pb.r=Ab*vb,pb.xl=H.x-H.thickness*tb,pb.xr=H.x+H.thickness*vb);r.autoMargin(O,H._id,pb)}],O)}function k(M,H,O){var I=O._fullLayout._size,L,Q,Z;d.init({element:M.node(),gd:O,prepFn:function(){L=M.attr("transform");t(M)},moveFn:function(ba,V){M.attr("transform",L+f(ba,V));Q=d.align(H._xLeftFrac+ba/I.w,H._thickFrac,
0,1,H.xanchor);Z=d.align(H._yBottomFrac-V/I.h,H._lenFrac,0,1,H.yanchor);ba=d.getCursor(Q,Z,H.xanchor,H.yanchor);t(M,ba)},doneFn:function(){t(M);if(void 0!==Q&&void 0!==Z){var ba={};ba[H._propPrefix+"x"]=Q;ba[H._propPrefix+"y"]=Z;void 0!==H._traceIndex?l.call("_guiRestyle",O,ba,H._traceIndex):l.call("_guiRelayout",O,ba)}}})}function m(M,H,O){var I=H._levels;M=[];var L=[],Q,Z=I.end+I.size/100,ba=I.size,V=1.001*O[0]-.001*O[1],S=1.001*O[1]-.001*O[0];for(Q=0;1E5>Q;Q++){var T=I.start+Q*ba;if(0<ba?T>=Z:
T<=Z)break;T>V&&T<S&&M.push(T)}if(H._fillgradient)L=[0];else if("function"===typeof H._fillcolor)if(H=H._filllevels)for(Z=H.end+H.size/100,ba=H.size,Q=0;1E5>Q;Q++){T=H.start+Q*ba;if(0<ba?T>=Z:T<=Z)break;T>O[0]&&T<O[1]&&L.push(T)}else L=M.map(function(fa){return fa-I.size/2}),L.push(L[L.length-1]+I.size);else H._fillcolor&&"string"===typeof H._fillcolor&&(L=[0]);0>I.size&&(M.reverse(),L.reverse());return{line:M,fill:L}}function a(M,H,O){function I(Z,ba){return e.coerce(L,Q,v,Z,ba)}M=M._fullLayout;
var L={type:"linear",range:O,tickmode:H.tickmode,nticks:H.nticks,tick0:H.tick0,dtick:H.dtick,tickvals:H.tickvals,ticktext:H.ticktext,ticks:H.ticks,ticklen:H.ticklen,tickwidth:H.tickwidth,tickcolor:H.tickcolor,showticklabels:H.showticklabels,ticklabelposition:H.ticklabelposition,ticklabeloverflow:H.ticklabeloverflow,tickfont:H.tickfont,tickangle:H.tickangle,tickformat:H.tickformat,exponentformat:H.exponentformat,minexponent:H.minexponent,separatethousands:H.separatethousands,showexponent:H.showexponent,
showtickprefix:H.showtickprefix,tickprefix:H.tickprefix,showticksuffix:H.showticksuffix,ticksuffix:H.ticksuffix,title:H.title,showline:!0,anchor:"free",side:"right",position:1},Q={type:"linear",_id:"y"+H._id};H={letter:"y",font:M.font,noHover:!0,noTickson:!0,noTicklabelmode:!0,calendar:M.calendar};D(L,Q,I,H,M);C(L,Q,I,H);return Q}var g=b("@plotly/d3"),h=b("tinycolor2"),r=b("../../plots/plots"),l=b("../../registry"),c=b("../../plots/cartesian/axes"),d=b("../dragelement"),e=b("../../lib"),f=e.strTranslate,
q=b("../../lib/extend").extendFlat,t=b("../../lib/setcursor"),w=b("../drawing"),x=b("../color"),z=b("../titles"),B=b("../../lib/svg_text_utils"),A=b("../colorscale/helpers").flipScale,D=b("../../plots/cartesian/axis_defaults"),C=b("../../plots/cartesian/position_defaults"),v=b("../../plots/cartesian/layout_attributes");G=b("../../constants/alignment");var y=G.LINE_SPACING,F=G.FROM_TL,J=G.FROM_BR,K=b("./constants").cn;N.exports={draw:function(M){var H=M._fullLayout._infolayer.selectAll("g."+K.colorbar).data(p(M),
function(O){return O._id});H.enter().append("g").attr("class",function(O){return O._id}).classed(K.colorbar,!0);H.each(function(O){var I=g.select(this);e.ensureSingle(I,"rect",K.cbbg);e.ensureSingle(I,"g",K.cbfills);e.ensureSingle(I,"g",K.cblines);e.ensureSingle(I,"g",K.cbaxis,function(Q){Q.classed(K.crisp,!0)});e.ensureSingle(I,"g",K.cbtitleunshift,function(Q){Q.append("g").classed(K.cbtitle,!0)});e.ensureSingle(I,"rect",K.cboutline);var L=n(I,O,M);L&&L.then&&(M._promises||[]).push(L);M._context.edits.colorbarPosition&&
k(I,O,M)});H.exit().each(function(O){r.autoMargin(M,O._id)}).remove();H.order()}}},{"../../constants/alignment":771,"../../lib":803,"../../lib/extend":793,"../../lib/setcursor":824,"../../lib/svg_text_utils":829,"../../plots/cartesian/axes":854,"../../plots/cartesian/axis_defaults":856,"../../plots/cartesian/layout_attributes":869,"../../plots/cartesian/position_defaults":872,"../../plots/plots":917,"../../registry":931,"../color":666,"../colorscale/helpers":677,"../dragelement":685,"../drawing":688,
"../titles":764,"./constants":668,"@plotly/d3":58,tinycolor2:598}],671:[function(b,N,G){var p=b("../../lib");N.exports=function(n){return p.isPlainObject(n.colorbar)}},{"../../lib":803}],672:[function(b,N,G){N.exports={moduleType:"component",name:"colorbar",attributes:b("./attributes"),supplyDefaults:b("./defaults"),draw:b("./draw").draw,hasColorbar:b("./has_colorbar")}},{"./attributes":667,"./defaults":669,"./draw":670,"./has_colorbar":671}],673:[function(b,N,G){var p=b("../colorbar/attributes"),
n=b("../../lib/regex").counter;G=b("../../lib/sort_object_keys");var k=b("./scales.js").scales;G(k);N.exports=function(m,a){a=a||{};var g=a.cLetter||"c";m="noScale"in a?a.noScale:"marker.line"===(m||"");var h="showScaleDflt"in a?a.showScaleDflt:"z"===g,r="string"===typeof a.colorscaleDflt?k[a.colorscaleDflt]:null,l=a.editTypeOverride||"";var c="colorAttr"in a?a.colorAttr:{z:"z",c:"color"}[g];var d=g+"auto",e=g+"min",f=g+"max",q={};q[e]=q[f]=void 0;var t={};t[d]=!1;var w={};"color"===c&&(w.color={valType:"color",
arrayOk:!0,editType:l||"style"},a.anim&&(w.color.anim=!0));w[d]={valType:"boolean",dflt:!0,editType:"calc",impliedEdits:q};w[e]={valType:"number",dflt:null,editType:l||"plot",impliedEdits:t};w[f]={valType:"number",dflt:null,editType:l||"plot",impliedEdits:t};w[g+"mid"]={valType:"number",dflt:null,editType:"calc",impliedEdits:q};w.colorscale={valType:"colorscale",editType:"calc",dflt:r,impliedEdits:{autocolorscale:!1}};w.autocolorscale={valType:"boolean",dflt:!1===a.autoColorDflt?!1:!0,editType:"calc",
impliedEdits:{colorscale:void 0}};w.reversescale={valType:"boolean",dflt:!1,editType:"plot"};m||(w.showscale={valType:"boolean",dflt:h,editType:"calc"},w.colorbar=p);a.noColorAxis||(w.coloraxis={valType:"subplotid",regex:n("coloraxis"),dflt:null,editType:"calc"});return w}},{"../../lib/regex":820,"../../lib/sort_object_keys":826,"../colorbar/attributes":667,"./scales.js":681}],674:[function(b,N,G){var p=b("fast-isnumeric"),n=b("../../lib"),k=b("./helpers").extractOpts;N.exports=function(m,a,g){m=
m._fullLayout;var h=g.vals;a=(g=g.containerStr)?n.nestedProperty(a,g).get():a;g=k(a);var r=!1!==g.auto,l=g.min,c=g.max,d=g.mid;void 0===l?l=n.aggNums(Math.min,null,h):r&&(l=a._colorAx&&p(l)?Math.min(l,n.aggNums(Math.min,null,h)):n.aggNums(Math.min,null,h));void 0===c?c=n.aggNums(Math.max,null,h):r&&(c=a._colorAx&&p(c)?Math.max(c,n.aggNums(Math.max,null,h)):n.aggNums(Math.max,null,h));r&&void 0!==d&&(c-d>d-l?l=d-(c-d):c-d<d-l&&(c=d+(d-l)));l===c&&(l-=.5,c+=.5);g._sync("min",l);g._sync("max",c);g.autocolorscale&&
g._sync("colorscale",0>l*c?m.colorscale.diverging:0<=l?m.colorscale.sequential:m.colorscale.sequentialminus)}},{"../../lib":803,"./helpers":677,"fast-isnumeric":249}],675:[function(b,N,G){var p=b("../../lib"),n=b("./helpers").hasColorscale,k=b("./helpers").extractOpts;N.exports=function(m,a){function g(f,q){var t=f["_"+q];void 0!==t&&(f[q]=t)}function h(f,q){if(f=q.container?p.nestedProperty(f,q.container).get():f)if(f.coloraxis)f._colorAx=a[f.coloraxis];else{var t=k(f),w=t.auto;(w||void 0===t.min)&&
g(f,q.min);(w||void 0===t.max)&&g(f,q.max);t.autocolorscale&&g(f,"colorscale")}}for(var r=0;r<m.length;r++){var l=m[r],c=l._module.colorbar;if(c)if(Array.isArray(c))for(var d=0;d<c.length;d++)h(l,c[d]);else h(l,c);n(l,"marker.line")&&h(l,{container:"marker.line",min:"cmin",max:"cmax"})}for(var e in a._colorAxes)h(a[e],{min:"cmin",max:"cmax"})}},{"../../lib":803,"./helpers":677}],676:[function(b,N,G){function p(r,l){var c=l.slice(0,l.length-1);return l?k.nestedProperty(r,c).get()||{}:r}var n=b("fast-isnumeric"),
k=b("../../lib"),m=b("../colorbar/has_colorbar"),a=b("../colorbar/defaults"),g=b("./scales").isValid,h=b("../../registry").traceIs;N.exports=function q(l,c,d,e,f){var t=f.prefix,w=f.cLetter,x="_module"in c,z=p(l,t),B=p(c,t),A=p(c._template||{},t)||{},D=function(){delete l.coloraxis;delete c.coloraxis;return q(l,c,d,e,f)};if(x){var C=d._colorAxes||{},v=e(t+"coloraxis");if(v){t=h(c,"contour")&&k.nestedProperty(c,"contours.coloring").get()||"heatmap";(x=C[v])?(x[2].push(D),x[0]!==t&&(x[0]=!1,k.warn(["Ignoring coloraxis:",
v,"setting as it is linked to incompatible colorscales."].join(" ")))):C[v]=[t,c,[D]];return}}D=z[w+"min"];C=z[w+"max"];D=n(D)&&n(C)&&D<C;e(t+w+"auto",!D)?e(t+w+"mid"):(e(t+w+"min"),e(t+w+"max"));w=z.colorscale;D=A.colorscale;var y;void 0!==w&&(y=!g(w));void 0!==D&&(y=!g(D));e(t+"autocolorscale",y);e(t+"colorscale");e(t+"reversescale");if("marker.line."!==t){var F;t&&x&&(F=m(z));e(t+"showscale",F)&&(t&&A&&(B._template=A),a(z,B,d))}}},{"../../lib":803,"../../registry":931,"../colorbar/defaults":669,
"../colorbar/has_colorbar":671,"./scales":681,"fast-isnumeric":249}],677:[function(b,N,G){function p(q){var t=q._colorAx,w=t?t:q;q={};var x;for(x=0;x<e.length;x++){var z=e[x];q[z]=w[z]}if(t){var B="c";for(x=0;x<f.length;x++)z=f[x],q[z]=w["c"+z]}else{for(x=0;x<f.length;x++){z=f[x];var A="c"+z;A in w?q[z]=w[A]:(A="z"+z,A in w&&(q[z]=w[A]))}B=A.charAt(0)}q._sync=function(D,C){D=-1!==f.indexOf(D)?B+D:D;w[D]=w["_"+D]=C};return q}function n(q){var t=p(q);q=t.min;var w=t.max;t=t.reversescale?k(t.colorscale):
t.colorscale;for(var x=t.length,z=Array(x),B=Array(x),A=0;A<x;A++){var D=t[A];z[A]=q+D[0]*(w-q);B[A]=D[1]}return{domain:z,range:B}}function k(q){var t=q.length,w=Array(t);--t;for(var x=0;0<=t;t--,x++){var z=q[t];w[x]=[1-z[0],z[1]]}return w}function m(q,t){t=t||{};var w=q.domain,x=q.range;q=x.length;for(var z=Array(q),B=0;B<q;B++){var A=h(x[B]).toRgb();z[B]=[A.r,A.g,A.b,A.a]}var D=g.scale.linear().domain(w).range(z).clamp(!0);w=t.noNumericCheck;t=t.returnArray;t=w&&t?D:w?function(C){return a(D(C))}:
t?function(C){return r(C)?D(C):h(C).isValid()?C:c.defaultLine}:function(C){return r(C)?a(D(C)):h(C).isValid()?C:c.defaultLine};t.domain=D.domain;t.range=function(){return x};return t}function a(q){return h({r:q[0],g:q[1],b:q[2],a:q[3]}).toRgbString()}var g=b("@plotly/d3"),h=b("tinycolor2"),r=b("fast-isnumeric"),l=b("../../lib"),c=b("../color"),d=b("./scales").isValid,e=["showscale","autocolorscale","colorscale","reversescale","colorbar"],f=["min","max","mid","auto"];N.exports={hasColorscale:function(q,
t,w){q=t?l.nestedProperty(q,t).get()||{}:q;w=q[w||"color"];t=!1;if(l.isArrayOrTypedArray(w))for(var x=0;x<w.length;x++)if(r(w[x])){t=!0;break}return l.isPlainObject(q)&&(t||!0===q.showscale||r(q.cmin)&&r(q.cmax)||d(q.colorscale)||l.isPlainObject(q.colorbar))},extractOpts:p,extractScale:n,flipScale:k,makeColorScaleFunc:m,makeColorScaleFuncFromTrace:function(q,t){return m(n(q),t)}}},{"../../lib":803,"../color":666,"./scales":681,"@plotly/d3":58,"fast-isnumeric":249,tinycolor2:598}],678:[function(b,
N,G){G=b("./scales");var p=b("./helpers");N.exports={moduleType:"component",name:"colorscale",attributes:b("./attributes"),layoutAttributes:b("./layout_attributes"),supplyLayoutDefaults:b("./layout_defaults"),handleDefaults:b("./defaults"),crossTraceDefaults:b("./cross_trace_defaults"),calc:b("./calc"),scales:G.scales,defaultScale:G.defaultScale,getScale:G.get,isValidScale:G.isValid,hasColorscale:p.hasColorscale,extractOpts:p.extractOpts,extractScale:p.extractScale,flipScale:p.flipScale,makeColorScaleFunc:p.makeColorScaleFunc,
makeColorScaleFuncFromTrace:p.makeColorScaleFuncFromTrace}},{"./attributes":673,"./calc":674,"./cross_trace_defaults":675,"./defaults":676,"./helpers":677,"./layout_attributes":679,"./layout_defaults":680,"./scales":681}],679:[function(b,N,G){G=b("../../lib/extend").extendFlat;var p=b("./attributes");b=b("./scales").scales;N.exports={editType:"calc",colorscale:{editType:"calc",sequential:{valType:"colorscale",dflt:b.Reds,editType:"calc"},sequentialminus:{valType:"colorscale",dflt:b.Blues,editType:"calc"},
diverging:{valType:"colorscale",dflt:b.RdBu,editType:"calc"}},coloraxis:G({_isSubplotObj:!0,editType:"calc"},p("",{colorAttr:"corresponding trace color array(s)",noColorAxis:!0,showScaleDflt:!0}))}},{"../../lib/extend":793,"./attributes":673,"./scales":681}],680:[function(b,N,G){var p=b("../../lib"),n=b("../../plot_api/plot_template"),k=b("./layout_attributes"),m=b("./defaults");N.exports=function(a,g){function h(q,t){return p.coerce(d,e,k.coloraxis,q,t)}p.coerce(a,g,k,"colorscale.sequential",void 0);
p.coerce(a,g,k,"colorscale.sequentialminus",void 0);p.coerce(a,g,k,"colorscale.diverging",void 0);var r=g._colorAxes,l;for(l in r){var c=r[l];if(c[0]){var d=a[l]||{};var e=n.newContainer(g,l,"coloraxis");e._name=l;m(d,e,g,h,{prefix:"",cLetter:"c"})}else{for(var f=0;f<c[2].length;f++)c[2][f]();delete g._colorAxes[l]}}}},{"../../lib":803,"../../plot_api/plot_template":843,"./defaults":676,"./layout_attributes":679}],681:[function(b,N,G){function p(a){var g=0;if(!Array.isArray(a)||2>a.length||!a[0]||
!a[a.length-1]||0!==+a[0][0]||1!==+a[a.length-1][0])return!1;for(var h=0;h<a.length;h++){var r=a[h];if(2!==r.length||+r[0]<g||!n(r[1]).isValid())return!1;g=+r[0]}return!0}var n=b("tinycolor2"),k={Greys:[[0,"rgb(0,0,0)"],[1,"rgb(255,255,255)"]],YlGnBu:[[0,"rgb(8,29,88)"],[.125,"rgb(37,52,148)"],[.25,"rgb(34,94,168)"],[.375,"rgb(29,145,192)"],[.5,"rgb(65,182,196)"],[.625,"rgb(127,205,187)"],[.75,"rgb(199,233,180)"],[.875,"rgb(237,248,217)"],[1,"rgb(255,255,217)"]],Greens:[[0,"rgb(0,68,27)"],[.125,"rgb(0,109,44)"],
[.25,"rgb(35,139,69)"],[.375,"rgb(65,171,93)"],[.5,"rgb(116,196,118)"],[.625,"rgb(161,217,155)"],[.75,"rgb(199,233,192)"],[.875,"rgb(229,245,224)"],[1,"rgb(247,252,245)"]],YlOrRd:[[0,"rgb(128,0,38)"],[.125,"rgb(189,0,38)"],[.25,"rgb(227,26,28)"],[.375,"rgb(252,78,42)"],[.5,"rgb(253,141,60)"],[.625,"rgb(254,178,76)"],[.75,"rgb(254,217,118)"],[.875,"rgb(255,237,160)"],[1,"rgb(255,255,204)"]],Bluered:[[0,"rgb(0,0,255)"],[1,"rgb(255,0,0)"]],RdBu:[[0,"rgb(5,10,172)"],[.35,"rgb(106,137,247)"],[.5,"rgb(190,190,190)"],
[.6,"rgb(220,170,132)"],[.7,"rgb(230,145,90)"],[1,"rgb(178,10,28)"]],Reds:[[0,"rgb(220,220,220)"],[.2,"rgb(245,195,157)"],[.4,"rgb(245,160,105)"],[1,"rgb(178,10,28)"]],Blues:[[0,"rgb(5,10,172)"],[.35,"rgb(40,60,190)"],[.5,"rgb(70,100,245)"],[.6,"rgb(90,120,245)"],[.7,"rgb(106,137,247)"],[1,"rgb(220,220,220)"]],Picnic:[[0,"rgb(0,0,255)"],[.1,"rgb(51,153,255)"],[.2,"rgb(102,204,255)"],[.3,"rgb(153,204,255)"],[.4,"rgb(204,204,255)"],[.5,"rgb(255,255,255)"],[.6,"rgb(255,204,255)"],[.7,"rgb(255,153,255)"],
[.8,"rgb(255,102,204)"],[.9,"rgb(255,102,102)"],[1,"rgb(255,0,0)"]],Rainbow:[[0,"rgb(150,0,90)"],[.125,"rgb(0,0,200)"],[.25,"rgb(0,25,255)"],[.375,"rgb(0,152,255)"],[.5,"rgb(44,255,150)"],[.625,"rgb(151,255,0)"],[.75,"rgb(255,234,0)"],[.875,"rgb(255,111,0)"],[1,"rgb(255,0,0)"]],Portland:[[0,"rgb(12,51,131)"],[.25,"rgb(10,136,186)"],[.5,"rgb(242,211,56)"],[.75,"rgb(242,143,56)"],[1,"rgb(217,30,30)"]],Jet:[[0,"rgb(0,0,131)"],[.125,"rgb(0,60,170)"],[.375,"rgb(5,255,255)"],[.625,"rgb(255,255,0)"],[.875,
"rgb(250,0,0)"],[1,"rgb(128,0,0)"]],Hot:[[0,"rgb(0,0,0)"],[.3,"rgb(230,0,0)"],[.6,"rgb(255,210,0)"],[1,"rgb(255,255,255)"]],Blackbody:[[0,"rgb(0,0,0)"],[.2,"rgb(230,0,0)"],[.4,"rgb(230,210,0)"],[.7,"rgb(255,255,255)"],[1,"rgb(160,200,255)"]],Earth:[[0,"rgb(0,0,130)"],[.1,"rgb(0,180,180)"],[.2,"rgb(40,210,40)"],[.4,"rgb(230,230,50)"],[.6,"rgb(120,70,20)"],[1,"rgb(255,255,255)"]],Electric:[[0,"rgb(0,0,0)"],[.15,"rgb(30,0,100)"],[.4,"rgb(120,0,100)"],[.6,"rgb(160,90,0)"],[.8,"rgb(230,200,0)"],[1,"rgb(255,250,220)"]],
Viridis:[[0,"#440154"],[.06274509803921569,"#48186a"],[.12549019607843137,"#472d7b"],[.18823529411764706,"#424086"],[.25098039215686274,"#3b528b"],[.3137254901960784,"#33638d"],[.3764705882352941,"#2c728e"],[.4392156862745098,"#26828e"],[.5019607843137255,"#21918c"],[.5647058823529412,"#1fa088"],[.6274509803921569,"#28ae80"],[.6901960784313725,"#3fbc73"],[.7529411764705882,"#5ec962"],[.8156862745098039,"#84d44b"],[.8784313725490196,"#addc30"],[.9411764705882353,"#d8e219"],[1,"#fde725"]],Cividis:[[0,
"rgb(0,32,76)"],[.058824,"rgb(0,42,102)"],[.117647,"rgb(0,52,110)"],[.176471,"rgb(39,63,108)"],[.235294,"rgb(60,74,107)"],[.294118,"rgb(76,85,107)"],[.352941,"rgb(91,95,109)"],[.411765,"rgb(104,106,112)"],[.470588,"rgb(117,117,117)"],[.529412,"rgb(131,129,120)"],[.588235,"rgb(146,140,120)"],[.647059,"rgb(161,152,118)"],[.705882,"rgb(176,165,114)"],[.764706,"rgb(192,177,109)"],[.823529,"rgb(209,191,102)"],[.882353,"rgb(225,204,92)"],[.941176,"rgb(243,219,79)"],[1,"rgb(255,233,69)"]]},m=k.RdBu;N.exports=
{scales:k,defaultScale:m,get:function(a,g){function h(){try{a=k[a]||JSON.parse(a)}catch(r){a=g}}g||(g=m);if(!a)return g;"string"===typeof a&&(h(),"string"===typeof a&&h());return p(a)?a:g},isValid:function(a){return void 0!==k[a]?!0:p(a)}}},{tinycolor2:598}],682:[function(b,N,G){N.exports=function(p,n,k,m,a){p=(p-k)/(m-k);n=p+n/(m-k);k=(p+n)/2;return"left"===a||"bottom"===a?p:"center"===a||"middle"===a?k:"right"===a||"top"===a?n:p<2/3-k?p:n>4/3-k?n:k}},{}],683:[function(b,N,G){var p=b("../../lib"),
n=[["sw-resize","s-resize","se-resize"],["w-resize","move","e-resize"],["nw-resize","n-resize","ne-resize"]];N.exports=function(k,m,a,g){k="left"===a?0:"center"===a?1:"right"===a?2:p.constrain(Math.floor(3*k),0,2);m="bottom"===g?0:"middle"===g?1:"top"===g?2:p.constrain(Math.floor(3*m),0,2);return n[m][k]}},{"../../lib":803}],684:[function(b,N,G){G.selectMode=function(p){return"lasso"===p||"select"===p};G.drawMode=function(p){return"drawclosedpath"===p||"drawopenpath"===p||"drawline"===p||"drawrect"===
p||"drawcircle"===p};G.openMode=function(p){return"drawline"===p||"drawopenpath"===p};G.rectMode=function(p){return"select"===p||"drawline"===p||"drawrect"===p||"drawcircle"===p};G.freeMode=function(p){return"lasso"===p||"drawclosedpath"===p||"drawopenpath"===p};G.selectingOrDrawing=function(p){return G.freeMode(p)||G.rectMode(p)}},{}],685:[function(b,N,G){function p(){var l=document.createElement("div");l.className="dragcover";var c=l.style;c.position="fixed";c.left=0;c.right=0;c.top=0;c.bottom=
0;c.zIndex=999999999;c.background="none";document.body.appendChild(l);return l}function n(l){return k(l.changedTouches?l.changedTouches[0]:l,document.body)}var k=b("mouse-event-offset"),m=b("has-hover"),a=b("has-passive-events"),g=b("../../lib").removeElement,h=b("../../plots/cartesian/constants"),r=N.exports={};r.align=b("./align");r.getCursor=b("./cursor");b=b("./unhover");r.unhover=b.wrapped;r.unhoverRaw=b.raw;r.init=function(l){function c(K,M,H){Math.abs(K)<H&&(K=0);Math.abs(M)<H&&(M=0);return[K,
M]}function d(K){q._dragged=!1;q._dragging=!0;var M=n(K);z=M[0];B=M[1];y=K.target;v=K;F=2===K.buttons||K.ctrlKey;"undefined"===typeof K.clientX&&"undefined"===typeof K.clientY&&(K.clientX=z,K.clientY=B);A=(new Date).getTime();A-q._mouseDownTime<w?t+=1:(t=1,q._mouseDownTime=A);l.prepFn&&l.prepFn(K,z,B);m&&!F?(C=p(),C.style.cursor=window.getComputedStyle(x).cursor):m||(C=document,D=window.getComputedStyle(document.documentElement).cursor,document.documentElement.style.cursor=window.getComputedStyle(x).cursor);
document.addEventListener("mouseup",f);document.addEventListener("touchend",f);!1!==l.dragmode&&(K.preventDefault(),document.addEventListener("mousemove",e),document.addEventListener("touchmove",e,{passive:!1}))}function e(K){K.preventDefault();var M=n(K),H=J(M[0]-z,M[1]-B,l.minDrag||h.MINDRAG);M=H[0];H=H[1];if(M||H)q._dragged=!0,r.unhover(q,K);q._dragged&&l.moveFn&&!F&&(q._dragdata={element:x,dx:M,dy:H},l.moveFn(M,H))}function f(K){delete q._dragdata;!1!==l.dragmode&&(K.preventDefault(),document.removeEventListener("mousemove",
e),document.removeEventListener("touchmove",e));document.removeEventListener("mouseup",f);document.removeEventListener("touchend",f);m?g(C):D&&(C.documentElement.style.cursor=D,D=null);if(q._dragging){q._dragging=!1;(new Date).getTime()-q._mouseDownTime>w&&(t=Math.max(t-1,1));if(q._dragged)l.doneFn&&l.doneFn();else if(l.clickFn&&l.clickFn(t,v),!F){try{var M=new MouseEvent("click",K)}catch(O){var H=n(K);M=document.createEvent("MouseEvents");M.initMouseEvent("click",K.bubbles,K.cancelable,K.view,K.detail,
K.screenX,K.screenY,H[0],H[1],K.ctrlKey,K.altKey,K.shiftKey,K.metaKey,K.button,K.relatedTarget)}y.dispatchEvent(M)}q._dragging=!1}q._dragged=!1}var q=l.gd,t=1,w=q._context.doubleClickDelay,x=l.element,z,B,A,D,C,v,y,F;q._mouseDownTime||(q._mouseDownTime=0);x.style.pointerEvents="all";x.onmousedown=d;a?(x._ontouchstart&&x.removeEventListener("touchstart",x._ontouchstart),x._ontouchstart=d,x.addEventListener("touchstart",d,{passive:!1})):x.ontouchstart=d;var J=l.clampFn||c};r.coverSlip=p},{"../../lib":803,
"../../plots/cartesian/constants":861,"./align":682,"./cursor":683,"./unhover":686,"has-hover":443,"has-passive-events":444,"mouse-event-offset":471}],686:[function(b,N,G){var p=b("../../lib/events"),n=b("../../lib/throttle"),k=b("../../lib/dom").getGraphDiv,m=b("../fx/constants"),a=N.exports={};a.wrapped=function(g,h,r){g=k(g);g._fullLayout&&n.clear(g._fullLayout._uid+m.HOVERID);a.raw(g,h,r)};a.raw=function(g,h){var r=g._fullLayout,l=g._hoverdata;h||(h={});if(!h.target||g._dragged||!1!==p.triggerHandler(g,
"plotly_beforehover",h))r._hoverlayer.selectAll("g").remove(),r._hoverlayer.selectAll("line").remove(),r._hoverlayer.selectAll("circle").remove(),g._hoverdata=void 0,h.target&&l&&g.emit("plotly_unhover",{event:h,points:l})}},{"../../lib/dom":791,"../../lib/events":792,"../../lib/throttle":830,"../fx/constants":700}],687:[function(b,N,G){G.dash={valType:"string",values:"solid dot dash longdash dashdot longdashdot".split(" "),dflt:"solid",editType:"style"};G.pattern={shape:{valType:"enumerated",values:" / \\ x - | + .".split(" "),
dflt:"",arrayOk:!0,editType:"style"},fillmode:{valType:"enumerated",values:["replace","overlay"],dflt:"replace",editType:"style"},bgcolor:{valType:"color",arrayOk:!0,editType:"style"},fgcolor:{valType:"color",arrayOk:!0,editType:"style"},fgopacity:{valType:"number",editType:"style",min:0,max:1},size:{valType:"number",min:0,dflt:8,arrayOk:!0,editType:"style"},solidity:{valType:"number",min:0,max:1,dflt:.3,arrayOk:!0,editType:"style"},editType:"style"}},{}],688:[function(b,N,G){function p(Q,Z){return C.symbolFuncs[Q%
100](Z)+(200<=Q?"M0,0.5L0.5,0L0,-0.5L-0.5,0Z":"")}function n(Q,Z,ba,V){var S=h.select(Q.node().parentNode),T=-1!==Z.indexOf("top")?"top":-1!==Z.indexOf("bottom")?"bottom":"middle";Z=-1!==Z.indexOf("left")?"end":-1!==Z.indexOf("right")?"start":"middle";var fa=V?V/.8+1:0,W=(t.lineCount(Q)-1)*x+1;V=K[Z]*fa;ba=.75*ba+K[T]*fa+(K[T]-1)*W*ba/2;Q.attr("text-anchor",Z);S.attr("transform",q(V,ba))}function k(Q,Z){Q=Q.ts||Z.textfont.size;return l(Q)&&0<Q?Q:0}function m(Q,Z,ba,V){var S=Q[0]-Z[0],T=Q[1]-Z[1],
fa=ba[0]-Z[0],W=ba[1]-Z[1];ba=Math.pow(S*S+T*T,.25);Q=Math.pow(fa*fa+W*W,.25);S=(Q*Q*S-ba*ba*fa)*V;V*=Q*Q*T-ba*ba*W;T=3*Q*(ba+Q);ba=3*ba*(ba+Q);return[[h.round(Z[0]+(T&&S/T),2),h.round(Z[1]+(T&&V/T),2)],[h.round(Z[0]-(ba&&S/ba),2),h.round(Z[1]-(ba&&V/ba),2)]]}function a(Q){var Z=Q.getAttribute("data-unformatted");if(null!==Z)return Z+Q.getAttribute("data-math")+Q.getAttribute("text-anchor")+Q.getAttribute("style")}function g(Q,Z){if(!Q)return null;Z=Z._context;return(Z=Z._exportedPlot?"":Z._baseUrl||
"")?"url('"+Z+"#"+Q+"')":"url(#"+Q+")"}var h=b("@plotly/d3"),r=b("../../lib");G=r.numberFormat;var l=b("fast-isnumeric"),c=b("tinycolor2"),d=b("../../registry"),e=b("../color"),f=b("../colorscale"),q=r.strTranslate,t=b("../../lib/svg_text_utils"),w=b("../../constants/xmlns_namespaces"),x=b("../../constants/alignment").LINE_SPACING,z=b("../../constants/interactions").DESELECTDIM,B=b("../../traces/scatter/subtypes"),A=b("../../traces/scatter/make_bubble_size_func"),D=b("../../components/fx/helpers").appendArrayPointValue,
C=N.exports={};C.font=function(Q,Z,ba,V){r.isPlainObject(Z)&&(V=Z.color,ba=Z.size,Z=Z.family);Z&&Q.style("font-family",Z);ba+1&&Q.style("font-size",ba+"px");V&&Q.call(e.fill,V)};C.setPosition=function(Q,Z,ba){Q.attr("x",Z).attr("y",ba)};C.setSize=function(Q,Z,ba){Q.attr("width",Z).attr("height",ba)};C.setRect=function(Q,Z,ba,V,S){Q.call(C.setPosition,Z,ba).call(C.setSize,V,S)};C.translatePoint=function(Q,Z,ba,V){ba=ba.c2p(Q.x);Q=V.c2p(Q.y);if(l(ba)&&l(Q)&&Z.node())"text"===Z.node().nodeName?Z.attr("x",
ba).attr("y",Q):Z.attr("transform",q(ba,Q));else return!1;return!0};C.translatePoints=function(Q,Z,ba){Q.each(function(V){var S=h.select(this);C.translatePoint(V,S,Z,ba)})};C.hideOutsideRangePoint=function(Q,Z,ba,V,S,T){Z.attr("display",ba.isPtWithinRange(Q,S)&&V.isPtWithinRange(Q,T)?null:"none")};C.hideOutsideRangePoints=function(Q,Z){if(Z._hasClipOnAxisFalse){var ba=Z.xaxis,V=Z.yaxis;Q.each(function(S){S=S[0].trace;var T=S.xcalendar,fa=S.ycalendar;S=d.traceIs(S,"bar-like")?".bartext":".point,.textpoint";
Q.selectAll(S).each(function(W){C.hideOutsideRangePoint(W,h.select(this),ba,V,T,fa)})})}};C.crispRound=function(Q,Z,ba){return Z&&l(Z)?Q._context.staticPlot?Z:1>Z?1:Math.round(Z):ba||0};C.singleLineStyle=function(Q,Z,ba,V,S){Z.style("fill","none");Q=(((Q||[])[0]||{}).trace||{}).line||{};ba=ba||Q.width||0;S=S||Q.dash||"";e.stroke(Z,V||Q.color);C.dashLine(Z,S,ba)};C.lineGroupStyle=function(Q,Z,ba,V){Q.style("fill","none").each(function(S){S=(((S||[])[0]||{}).trace||{}).line||{};var T=Z||S.width||0,
fa=V||S.dash||"";h.select(this).call(e.stroke,ba||S.color).call(C.dashLine,fa,T)})};C.dashLine=function(Q,Z,ba){ba=+ba||0;Z=C.dashStyle(Z,ba);Q.style({"stroke-dasharray":Z,"stroke-width":ba+"px"})};C.dashStyle=function(Q,Z){Z=Math.max(+Z||1,3);"solid"===Q?Q="":"dot"===Q?Q=Z+"px,"+Z+"px":"dash"===Q?Q=3*Z+"px,"+3*Z+"px":"longdash"===Q?Q=5*Z+"px,"+5*Z+"px":"dashdot"===Q?Q=3*Z+"px,"+Z+"px,"+Z+"px,"+Z+"px":"longdashdot"===Q&&(Q=5*Z+"px,"+2*Z+"px,"+Z+"px,"+2*Z+"px");return Q};C.singleFillStyle=function(Q){var Z=
(((h.select(Q.node()).data()[0]||[])[0]||{}).trace||{}).fillcolor;Z&&Q.call(e.fill,Z)};C.fillGroupStyle=function(Q){Q.style("stroke-width",0).each(function(Z){var ba=h.select(this);Z[0].trace&&ba.call(e.fill,Z[0].trace.fillcolor)})};var v=b("./symbol_defs");C.symbolNames=[];C.symbolFuncs=[];C.symbolNeedLines={};C.symbolNoDot={};C.symbolNoFill={};C.symbolList=[];Object.keys(v).forEach(function(Q){var Z=v[Q],ba=Z.n;C.symbolList.push(ba,String(ba),Q,ba+100,String(ba+100),Q+"-open");C.symbolNames[ba]=
Q;C.symbolFuncs[ba]=Z.f;Z.needLine&&(C.symbolNeedLines[ba]=!0);Z.noDot?C.symbolNoDot[ba]=!0:C.symbolList.push(ba+200,String(ba+200),Q+"-dot",ba+300,String(ba+300),Q+"-open-dot");Z.noFill&&(C.symbolNoFill[ba]=!0)});var y=C.symbolNames.length;C.symbolNumber=function(Q){if(l(Q))Q=+Q;else if("string"===typeof Q){var Z=0;0<Q.indexOf("-open")&&(Z=100,Q=Q.replace("-open",""));0<Q.indexOf("-dot")&&(Z+=200,Q=Q.replace("-dot",""));Q=C.symbolNames.indexOf(Q);0<=Q&&(Q+=Z)}return Q%100>=y||400<=Q?0:Math.floor(Math.max(Q,
0))};b={x1:1,x2:0,y1:0,y2:0};N={x1:0,x2:0,y1:1,y2:0};var F=G("~f"),J={radial:{node:"radialGradient"},radialreversed:{node:"radialGradient",reversed:!0},horizontal:{node:"linearGradient",attrs:b},horizontalreversed:{node:"linearGradient",attrs:b,reversed:!0},vertical:{node:"linearGradient",attrs:N},verticalreversed:{node:"linearGradient",attrs:N,reversed:!0}};C.gradient=function(Q,Z,ba,V,S,T){for(var fa=S.length,W=J[V],aa=Array(fa),ja=0;ja<fa;ja++)W.reversed?aa[fa-1-ja]=[F(100*(1-S[ja][0])),S[ja][1]]:
aa[ja]=[F(100*S[ja][0]),S[ja][1]];S=Z._fullLayout;var ma="g"+S._uid+"-"+ba;ba=S._defs.select(".gradients").selectAll("#"+ma).data([V+aa.join(";")],r.identity);ba.exit().remove();ba.enter().append(W.node).each(function(){var ia=h.select(this);W.attrs&&ia.attr(W.attrs);ia.attr("id",ma);ia=ia.selectAll("stop").data(aa);ia.exit().remove();ia.enter().append("stop");ia.each(function(ra){var wa=c(ra[1]);h.select(this).attr({offset:ra[0]+"%","stop-color":e.tinyRGB(wa),"stop-opacity":wa.getAlpha()})})});Q.style(T,
g(ma,Z)).style(T+"-opacity",null);Q="."+h.select(Q.node().parentNode).attr("class").replace(/\s/g,".")+"\x3e."+Q.attr("class").replace(/\s/g,".");S._gradientUrlQueryParts[Q]=1};C.pattern=function(Q,Z,ba,V,S,T,fa,W,aa,ja,ma,ia){var ra="legend"===Z;W&&("overlay"===aa?(ja=W,ma=e.contrast(ja)):(ja=void 0,ma=W));Z=ba._fullLayout;var wa="p"+Z._uid+"-"+V;V=function(oa,sa,za,Ha,Wa){return Ha+(Wa-Ha)*(oa-sa)/(za-sa)};var pa={};switch(S){case "/":var la=T*Math.sqrt(2);var ka=T*Math.sqrt(2);var na="path";pa=
{d:"M-"+la/4+","+ka/4+"l"+la/2+",-"+ka/2+"M0,"+ka+"L"+la+",0M"+la/4*3+","+ka/4*5+"l"+la/2+",-"+ka/2,opacity:ia,stroke:ma,"stroke-width":fa*T+"px"};break;case "\\":la=T*Math.sqrt(2);ka=T*Math.sqrt(2);na="path";pa={d:"M"+la/4*3+",-"+ka/4+"l"+la/2+","+ka/2+"M0,0L"+la+","+ka+"M-"+la/4+","+ka/4*3+"l"+la/2+","+ka/2,opacity:ia,stroke:ma,"stroke-width":fa*T+"px"};break;case "x":la=T*Math.sqrt(2);ka=T*Math.sqrt(2);V=T-T*Math.sqrt(1-fa);na="path";pa={d:"M-"+la/4+","+ka/4+"l"+la/2+",-"+ka/2+"M0,"+ka+"L"+la+
",0M"+la/4*3+","+ka/4*5+"l"+la/2+",-"+ka/2+"M"+la/4*3+",-"+ka/4+"l"+la/2+","+ka/2+"M0,0L"+la+","+ka+"M-"+la/4+","+ka/4*3+"l"+la/2+","+ka/2,opacity:ia,stroke:ma,"stroke-width":V+"px"};break;case "|":ka=la=T;na=na="path";pa={d:"M"+la/2+",0L"+la/2+","+ka,opacity:ia,stroke:ma,"stroke-width":fa*T+"px"};break;case "-":ka=la=T;na=na="path";pa={d:"M0,"+ka/2+"L"+la+","+ka/2,opacity:ia,stroke:ma,"stroke-width":fa*T+"px"};break;case "+":ka=la=T;na="path";V=T-T*Math.sqrt(1-fa);na="path";pa={d:"M"+la/2+",0L"+
la/2+","+ka+"M0,"+ka/2+"L"+la+","+ka/2,opacity:ia,stroke:ma,"stroke-width":V+"px"};break;case ".":ka=la=T,V=fa<Math.PI/4?Math.sqrt(fa*T*T/Math.PI):V(fa,Math.PI/4,1,T/2,T/Math.sqrt(2)),na="circle",pa={cx:la/2,cy:ka/2,r:V,opacity:ia,fill:ma}}S=[S||"noSh",ja||"noBg",ma||"noFg",T,fa].join(";");S=Z._defs.select(".patterns").selectAll("#"+wa).data([S],r.identity);S.exit().remove();S.enter().append("pattern").each(function(){var oa=h.select(this);oa.attr({id:wa,width:la+"px",height:ka+"px",patternUnits:"userSpaceOnUse",
patternTransform:ra?"scale(0.8)":""});if(ja){var sa=oa.selectAll("rect").data([0]);sa.exit().remove();sa.enter().append("rect").attr({width:la+"px",height:ka+"px",fill:ja})}oa=oa.selectAll(na).data([0]);oa.exit().remove();oa.enter().append(na).attr(pa)});Q.style("fill",g(wa,ba)).style("fill-opacity",null);Q.classed("pattern_filled",!0);Q="."+h.select(Q.node().parentNode).attr("class").replace(/\s/g,".")+"\x3e.pattern_filled";Z._patternUrlQueryParts[Q]=1};C.initGradients=function(Q){Q=Q._fullLayout;
r.ensureSingle(Q._defs,"g","gradients").selectAll("linearGradient,radialGradient").remove();Q._gradientUrlQueryParts={}};C.initPatterns=function(Q){Q=Q._fullLayout;r.ensureSingle(Q._defs,"g","patterns").selectAll("pattern").remove();Q._patternUrlQueryParts={}};C.getPatternAttr=function(Q,Z,ba){return Q&&r.isArrayOrTypedArray(Q)?Z<Q.length?Q[Z]:ba:Q};C.pointStyle=function(Q,Z,ba){if(Q.size()){var V=C.makePointStyleFns(Z);Q.each(function(S){C.singlePointStyle(S,h.select(this),Z,V,ba)})}};C.singlePointStyle=
function(Q,Z,ba,V,S){var T=ba.marker,fa=T.line;Z.style("opacity",V.selectedOpacityFn?V.selectedOpacityFn(Q):void 0===Q.mo?T.opacity:Q.mo);if(V.ms2mrc){var W="various"===Q.ms||"various"===T.size?3:V.ms2mrc(Q.ms);Q.mrc=W;V.selectedSizeFn&&(W=Q.mrc=V.selectedSizeFn(Q));var aa=C.symbolNumber(Q.mx||T.symbol)||0;Q.om=100<=aa%200;Z.attr("d",p(aa,W))}aa=!1;if(Q.so){W=fa.outlierwidth;fa=fa.outliercolor;var ja=T.outliercolor}else W=(fa||{}).width,W=(Q.mlw+1||W+1||(Q.trace?(Q.trace.marker.line||{}).width:0)+
1)-1||0,fa="mlc"in Q?Q.mlcc=V.lineScale(Q.mlc):r.isArrayOrTypedArray(fa.color)?e.defaultLine:fa.color,r.isArrayOrTypedArray(T.color)&&(aa=!0),ja="mc"in Q?Q.mcc=V.markerScale(Q.mc):T.color||"rgba(0,0,0,0)",V.selectedColorFn&&(ja=V.selectedColorFn(Q));if(Q.om)Z.call(e.stroke,ja).style({"stroke-width":(W||1)+"px",fill:"none"});else{Z.style("stroke-width",(Q.isBlank?0:W)+"px");var ma=T.gradient,ia=Q.mgt;ia?aa=!0:ia=ma&&ma.type;r.isArrayOrTypedArray(ia)&&(ia=ia[0],J[ia]||(ia=0));V=(T=T.pattern)&&C.getPatternAttr(T.shape,
Q.i,"");if(ia&&"none"!==ia)(T=Q.mgc)?aa=!0:T=ma.color,ba=ba.uid,aa&&(ba+="-"+Q.i),C.gradient(Z,S,ba,ia,[[0,T],[1,ja]],"fill");else if(V){aa=C.getPatternAttr(T.bgcolor,Q.i,null);ja=C.getPatternAttr(T.fgcolor,Q.i,null);ia=T.fgopacity;ma=C.getPatternAttr(T.size,Q.i,8);var ra=C.getPatternAttr(T.solidity,Q.i,.3),wa=Q.mcc||r.isArrayOrTypedArray(T.shape)||r.isArrayOrTypedArray(T.bgcolor)||r.isArrayOrTypedArray(T.size)||r.isArrayOrTypedArray(T.solidity);ba=ba.uid;wa&&(ba+="-"+Q.i);C.pattern(Z,"point",S,ba,
V,ma,ra,Q.mcc,T.fillmode,aa,ja,ia)}else e.fill(Z,ja);W&&e.stroke(Z,fa)}};C.makePointStyleFns=function(Q){var Z={},ba=Q.marker;Z.markerScale=C.tryColorscale(ba,"");Z.lineScale=C.tryColorscale(ba,"line");d.traceIs(Q,"symbols")&&(Z.ms2mrc=B.isBubble(Q)?A(Q):function(){return(ba.size||6)/2});Q.selectedpoints&&r.extendFlat(Z,C.makeSelectedPointStyleFns(Q));return Z};C.makeSelectedPointStyleFns=function(Q){var Z={},ba=Q.marker||{},V=(Q.selected||{}).marker||{},S=(Q.unselected||{}).marker||{},T=V.opacity,
fa=S.opacity,W=void 0!==T,aa=void 0!==fa;if(r.isArrayOrTypedArray(ba.opacity)||W||aa)Z.selectedOpacityFn=function(na){var oa=void 0===na.mo?ba.opacity:na.mo;return na.selected?W?T:oa:aa?fa:z*oa};var ja=ba.color,ma=V.color,ia=S.color;if(ma||ia)Z.selectedColorFn=function(na){var oa=na.mcc||ja;return na.selected?ma||oa:ia||oa};var ra=ba.size,wa=V.size,pa=S.size,la=void 0!==wa,ka=void 0!==pa;d.traceIs(Q,"symbols")&&(la||ka)&&(Z.selectedSizeFn=function(na){var oa=na.mrc||ra/2;return na.selected?la?wa/
2:oa:ka?pa/2:oa});return Z};C.makeSelectedTextStyleFns=function(Q){var Z={},ba=(Q.textfont||{}).color,V=((Q.selected||{}).textfont||{}).color,S=((Q.unselected||{}).textfont||{}).color;Z.selectedTextColorFn=function(T){var fa=T.tc||ba;return T.selected?V||fa:S?S:V?fa:e.addOpacity(fa,z)};return Z};C.selectedPointStyle=function(Q,Z){if(Q.size()&&Z.selectedpoints){var ba=C.makeSelectedPointStyleFns(Z),V=Z.marker||{},S=[];ba.selectedOpacityFn&&S.push(function(T,fa){T.style("opacity",ba.selectedOpacityFn(fa))});
ba.selectedColorFn&&S.push(function(T,fa){e.fill(T,ba.selectedColorFn(fa))});ba.selectedSizeFn&&S.push(function(T,fa){var W=fa.mx||V.symbol||0,aa=ba.selectedSizeFn(fa);T.attr("d",p(C.symbolNumber(W),aa));fa.mrc2=aa});S.length&&Q.each(function(T){for(var fa=h.select(this),W=0;W<S.length;W++)S[W](fa,T)})}};C.tryColorscale=function(Q,Z){if(Q=Z?r.nestedProperty(Q,Z).get():Q)if(Z=Q.color,(Q.colorscale||Q._colorAx)&&r.isArrayOrTypedArray(Z))return f.makeColorScaleFuncFromTrace(Q);return r.identity};var K=
{start:1,end:-1,middle:0,bottom:1,top:-1};C.textPointStyle=function(Q,Z,ba){if(Q.size()){if(Z.selectedpoints)var V=C.makeSelectedTextStyleFns(Z).selectedTextColorFn;var S=Z.texttemplate,T=ba._fullLayout;Q.each(function(fa){var W=h.select(this),aa=S?r.extractOption(fa,Z,"txt","texttemplate"):r.extractOption(fa,Z,"tx","text");if(aa||0===aa){if(S){var ja=Z._module.formatLabels;ja=ja?ja(fa,Z,T):{};var ma={};D(ma,Z,fa.i);aa=r.texttemplateString(aa,ja,T._d3locale,ma,fa,Z._meta||{})}ja=fa.tp||Z.textposition;
ma=k(fa,Z);var ia=V?V(fa):fa.tc||Z.textfont.color;W.call(C.font,fa.tf||Z.textfont.family,ma,ia).text(aa).call(t.convertToTspans,ba).call(n,ja,ma,fa.mrc)}else W.remove()})}};C.selectedTextStyle=function(Q,Z){if(Q.size()&&Z.selectedpoints){var ba=C.makeSelectedTextStyleFns(Z);Q.each(function(V){var S=h.select(this),T=ba.selectedTextColorFn(V),fa=V.tp||Z.textposition,W=k(V,Z);e.fill(S,T);n(S,fa,W,V.mrc2||V.mrc)})}};C.smoothopen=function(Q,Z){if(3>Q.length)return"M"+Q.join("L");var ba="M"+Q[0],V=[],S;
for(S=1;S<Q.length-1;S++)V.push(m(Q[S-1],Q[S],Q[S+1],Z));ba+="Q"+V[0][0]+" "+Q[1];for(S=2;S<Q.length-1;S++)ba+="C"+V[S-2][1]+" "+V[S-1][0]+" "+Q[S];return ba+="Q"+V[Q.length-3][1]+" "+Q[Q.length-1]};C.smoothclosed=function(Q,Z){if(3>Q.length)return"M"+Q.join("L")+"Z";var ba="M"+Q[0],V=Q.length-1,S=[m(Q[V],Q[0],Q[1],Z)],T;for(T=1;T<V;T++)S.push(m(Q[T-1],Q[T],Q[T+1],Z));S.push(m(Q[V-1],Q[V],Q[0],Z));for(T=1;T<=V;T++)ba+="C"+S[T-1][1]+" "+S[T][0]+" "+Q[T];return ba+="C"+S[V][1]+" "+S[0][0]+" "+Q[0]+
"Z"};var M={hv:function(Q,Z){return"H"+h.round(Z[0],2)+"V"+h.round(Z[1],2)},vh:function(Q,Z){return"V"+h.round(Z[1],2)+"H"+h.round(Z[0],2)},hvh:function(Q,Z){return"H"+h.round((Q[0]+Z[0])/2,2)+"V"+h.round(Z[1],2)+"H"+h.round(Z[0],2)},vhv:function(Q,Z){return"V"+h.round((Q[1]+Z[1])/2,2)+"H"+h.round(Z[0],2)+"V"+h.round(Z[1],2)}},H=function(Q,Z){return"L"+h.round(Z[0],2)+","+h.round(Z[1],2)};C.steps=function(Q){var Z=M[Q]||H;return function(ba){for(var V="M"+h.round(ba[0][0],2)+","+h.round(ba[0][1],
2),S=1;S<ba.length;S++)V+=Z(ba[S-1],ba[S]);return V}};C.makeTester=function(){var Q=r.ensureSingleById(h.select("body"),"svg","js-plotly-tester",function(ba){ba.attr(w.svgAttrs).style({position:"absolute",left:"-10000px",top:"-10000px",width:"9000px",height:"9000px","z-index":"1"})}),Z=r.ensureSingle(Q,"path","js-reference-point",function(ba){ba.attr("d","M0,0H1V1H0Z").style({"stroke-width":0,fill:"black"})});C.tester=Q;C.testref=Z};C.savedBBoxes={};var O=0;C.bBox=function(Q,Z,ba){ba||(ba=a(Q));var V;
if(ba){if(V=C.savedBBoxes[ba])return r.extendFlat({},V)}else if(1===Q.childNodes.length){var S=Q.childNodes[0];if(ba=a(S)){V=+S.getAttribute("x")||0;var T=+S.getAttribute("y")||0,fa=S.getAttribute("transform");if(!fa)return ba=C.bBox(S,!1,ba),V&&(ba.left+=V,ba.right+=V),T&&(ba.top+=T,ba.bottom+=T),ba;ba+="~"+V+"~"+T+"~"+fa;if(V=C.savedBBoxes[ba])return r.extendFlat({},V)}}if(!Z){var W=C.tester.node();Q=Q.cloneNode(!0);W.appendChild(Q)}h.select(Q).attr("transform",null).call(t.positionText,0,0);V=
Q.getBoundingClientRect();T=C.testref.node().getBoundingClientRect();Z||W.removeChild(Q);Z={height:V.height,width:V.width,left:V.left-T.left,top:V.top-T.top,right:V.right-T.left,bottom:V.bottom-T.top};1E4<=O&&(C.savedBBoxes={},O=0);ba&&(C.savedBBoxes[ba]=Z);O++;return r.extendFlat({},Z)};C.setClipUrl=function(Q,Z,ba){Q.attr("clip-path",g(Z,ba))};C.getTranslate=function(Q){Q=(Q[Q.attr?"attr":"getAttribute"]("transform")||"").replace(/.*\btranslate\((-?\d*\.?\d*)[^-\d]*(-?\d*\.?\d*)[^\d].*/,function(Z,
ba,V){return[ba,V].join(" ")}).split(" ");return{x:+Q[0]||0,y:+Q[1]||0}};C.setTranslate=function(Q,Z,ba){var V=Q.attr?"attr":"setAttribute",S=Q[Q.attr?"attr":"getAttribute"]("transform")||"";Z=Z||0;ba=ba||0;S=S.replace(/(\btranslate\(.*?\);?)/,"").trim();S+=q(Z,ba);S=S.trim();Q[V]("transform",S);return S};C.getScale=function(Q){Q=(Q[Q.attr?"attr":"getAttribute"]("transform")||"").replace(/.*\bscale\((\d*\.?\d*)[^\d]*(\d*\.?\d*)[^\d].*/,function(Z,ba,V){return[ba,V].join(" ")}).split(" ");return{x:+Q[0]||
1,y:+Q[1]||1}};C.setScale=function(Q,Z,ba){var V=Q.attr?"attr":"setAttribute",S=Q[Q.attr?"attr":"getAttribute"]("transform")||"";Z=Z||1;ba=ba||1;S=S.replace(/(\bscale\(.*?\);?)/,"").trim();S=(S+("scale("+Z+","+ba+")")).trim();Q[V]("transform",S);return S};var I=/\s*sc.*/;C.setPointGroupScale=function(Q,Z,ba){Z=Z||1;ba=ba||1;if(Q){var V=1===Z&&1===ba?"":"scale("+Z+","+ba+")";Q.each(function(){var S=(this.getAttribute("transform")||"").replace(I,"");S+=V;S=S.trim();this.setAttribute("transform",S)})}};
var L=/translate\([^)]*\)\s*$/;C.setTextPointsScale=function(Q,Z,ba){Q&&Q.each(function(){var V=h.select(this),S=V.select("text");if(S.node()){var T=parseFloat(S.attr("x")||0);var fa=parseFloat(S.attr("y")||0);S=(V.attr("transform")||"").match(L);T=1===Z&&1===ba?[]:[q(T,fa),"scale("+Z+","+ba+")",q(-T,-fa)];S&&T.push(S);V.attr("transform",T.join(""))}})}},{"../../components/fx/helpers":702,"../../constants/alignment":771,"../../constants/interactions":778,"../../constants/xmlns_namespaces":780,"../../lib":803,
"../../lib/svg_text_utils":829,"../../registry":931,"../../traces/scatter/make_bubble_size_func":1235,"../../traces/scatter/subtypes":1243,"../color":666,"../colorscale":678,"./symbol_defs":689,"@plotly/d3":58,"fast-isnumeric":249,tinycolor2:598}],689:[function(b,N,G){var p=b("@plotly/d3");N.exports={circle:{n:0,f:function(n){n=p.round(n,2);return"M"+n+",0A"+n+","+n+" 0 1,1 0,-"+n+"A"+n+","+n+" 0 0,1 "+n+",0Z"}},square:{n:1,f:function(n){n=p.round(n,2);return"M"+n+","+n+"H-"+n+"V-"+n+"H"+n+"Z"}},
diamond:{n:2,f:function(n){n=p.round(1.3*n,2);return"M"+n+",0L0,"+n+"L-"+n+",0L0,-"+n+"Z"}},cross:{n:3,f:function(n){var k=p.round(.4*n,2);n=p.round(1.2*n,2);return"M"+n+","+k+"H"+k+"V"+n+"H-"+k+"V"+k+"H-"+n+"V-"+k+"H-"+k+"V-"+n+"H"+k+"V-"+k+"H"+n+"Z"}},x:{n:4,f:function(n){n=p.round(.8*n/Math.sqrt(2),2);var k="l"+n+","+n,m="l"+n+",-"+n,a="l-"+n+",-"+n,g="l-"+n+","+n;return"M0,"+n+k+m+a+m+a+g+a+g+k+g+k+"Z"}},"triangle-up":{n:5,f:function(n){var k=p.round(2*n/Math.sqrt(3),2),m=p.round(n/2,2);n=p.round(n,
2);return"M-"+k+","+m+"H"+k+"L0,-"+n+"Z"}},"triangle-down":{n:6,f:function(n){var k=p.round(2*n/Math.sqrt(3),2),m=p.round(n/2,2);n=p.round(n,2);return"M-"+k+",-"+m+"H"+k+"L0,"+n+"Z"}},"triangle-left":{n:7,f:function(n){var k=p.round(2*n/Math.sqrt(3),2),m=p.round(n/2,2);n=p.round(n,2);return"M"+m+",-"+k+"V"+k+"L-"+n+",0Z"}},"triangle-right":{n:8,f:function(n){var k=p.round(2*n/Math.sqrt(3),2),m=p.round(n/2,2);n=p.round(n,2);return"M-"+m+",-"+k+"V"+k+"L"+n+",0Z"}},"triangle-ne":{n:9,f:function(n){var k=
p.round(.6*n,2);n=p.round(1.2*n,2);return"M-"+n+",-"+k+"H"+k+"V"+n+"Z"}},"triangle-se":{n:10,f:function(n){var k=p.round(.6*n,2);n=p.round(1.2*n,2);return"M"+k+",-"+n+"V"+k+"H-"+n+"Z"}},"triangle-sw":{n:11,f:function(n){var k=p.round(.6*n,2);n=p.round(1.2*n,2);return"M"+n+","+k+"H-"+k+"V-"+n+"Z"}},"triangle-nw":{n:12,f:function(n){var k=p.round(.6*n,2);n=p.round(1.2*n,2);return"M-"+k+","+n+"V-"+k+"H"+n+"Z"}},pentagon:{n:13,f:function(n){var k=p.round(.951*n,2),m=p.round(.588*n,2),a=p.round(-n,2),
g=p.round(-.309*n,2);n=p.round(.809*n,2);return"M"+k+","+g+"L"+m+","+n+"H-"+m+"L-"+k+","+g+"L0,"+a+"Z"}},hexagon:{n:14,f:function(n){var k=p.round(n,2),m=p.round(n/2,2);n=p.round(n*Math.sqrt(3)/2,2);return"M"+n+",-"+m+"V"+m+"L0,"+k+"L-"+n+","+m+"V-"+m+"L0,-"+k+"Z"}},hexagon2:{n:15,f:function(n){var k=p.round(n,2),m=p.round(n/2,2);n=p.round(n*Math.sqrt(3)/2,2);return"M-"+m+","+n+"H"+m+"L"+k+",0L"+m+",-"+n+"H-"+m+"L-"+k+",0Z"}},octagon:{n:16,f:function(n){var k=p.round(.924*n,2);n=p.round(.383*n,2);
return"M-"+n+",-"+k+"H"+n+"L"+k+",-"+n+"V"+n+"L"+n+","+k+"H-"+n+"L-"+k+","+n+"V-"+n+"Z"}},star:{n:17,f:function(n){var k=1.4*n;n=p.round(.225*k,2);var m=p.round(.951*k,2),a=p.round(.363*k,2),g=p.round(.588*k,2),h=p.round(-k,2),r=p.round(-.309*k,2),l=p.round(.118*k,2),c=p.round(.809*k,2);k=p.round(.382*k,2);return"M"+n+","+r+"H"+m+"L"+a+","+l+"L"+g+","+c+"L0,"+k+"L-"+g+","+c+"L-"+a+","+l+"L-"+m+","+r+"H-"+n+"L0,"+h+"Z"}},hexagram:{n:18,f:function(n){var k=p.round(.66*n,2),m=p.round(.38*n,2);n=p.round(.76*
n,2);return"M-"+n+",0l-"+m+",-"+k+"h"+n+"l"+m+",-"+k+"l"+m+","+k+"h"+n+"l-"+m+","+k+"l"+m+","+k+"h-"+n+"l-"+m+","+k+"l-"+m+",-"+k+"h-"+n+"Z"}},"star-triangle-up":{n:19,f:function(n){var k=p.round(n*Math.sqrt(3)*.8,2),m=p.round(.8*n,2),a=p.round(1.6*n,2);n=p.round(4*n,2);n="A "+n+","+n+" 0 0 1 ";return"M-"+k+","+m+n+k+","+m+n+"0,-"+a+n+"-"+k+","+m+"Z"}},"star-triangle-down":{n:20,f:function(n){var k=p.round(n*Math.sqrt(3)*.8,2),m=p.round(.8*n,2),a=p.round(1.6*n,2);n=p.round(4*n,2);n="A "+n+","+n+" 0 0 1 ";
return"M"+k+",-"+m+n+"-"+k+",-"+m+n+"0,"+a+n+k+",-"+m+"Z"}},"star-square":{n:21,f:function(n){var k=p.round(1.1*n,2);n=p.round(2*n,2);n="A "+n+","+n+" 0 0 1 ";return"M-"+k+",-"+k+n+"-"+k+","+k+n+k+","+k+n+k+",-"+k+n+"-"+k+",-"+k+"Z"}},"star-diamond":{n:22,f:function(n){var k=p.round(1.4*n,2);n=p.round(1.9*n,2);n="A "+n+","+n+" 0 0 1 ";return"M-"+k+",0"+n+"0,"+k+n+k+",0"+n+"0,-"+k+n+"-"+k+",0Z"}},"diamond-tall":{n:23,f:function(n){var k=p.round(.7*n,2);n=p.round(1.4*n,2);return"M0,"+n+"L"+k+",0L0,-"+
n+"L-"+k+",0Z"}},"diamond-wide":{n:24,f:function(n){var k=p.round(1.4*n,2);n=p.round(.7*n,2);return"M0,"+n+"L"+k+",0L0,-"+n+"L-"+k+",0Z"}},hourglass:{n:25,f:function(n){n=p.round(n,2);return"M"+n+","+n+"H-"+n+"L"+n+",-"+n+"H-"+n+"Z"},noDot:!0},bowtie:{n:26,f:function(n){n=p.round(n,2);return"M"+n+","+n+"V-"+n+"L-"+n+","+n+"V-"+n+"Z"},noDot:!0},"circle-cross":{n:27,f:function(n){n=p.round(n,2);return"M0,"+n+"V-"+n+"M"+n+",0H-"+n+"M"+n+",0A"+n+","+n+" 0 1,1 0,-"+n+"A"+n+","+n+" 0 0,1 "+n+",0Z"},needLine:!0,
noDot:!0},"circle-x":{n:28,f:function(n){var k=p.round(n,2);n=p.round(n/Math.sqrt(2),2);return"M"+n+","+n+"L-"+n+",-"+n+"M"+n+",-"+n+"L-"+n+","+n+"M"+k+",0A"+k+","+k+" 0 1,1 0,-"+k+"A"+k+","+k+" 0 0,1 "+k+",0Z"},needLine:!0,noDot:!0},"square-cross":{n:29,f:function(n){n=p.round(n,2);return"M0,"+n+"V-"+n+"M"+n+",0H-"+n+"M"+n+","+n+"H-"+n+"V-"+n+"H"+n+"Z"},needLine:!0,noDot:!0},"square-x":{n:30,f:function(n){n=p.round(n,2);return"M"+n+","+n+"L-"+n+",-"+n+"M"+n+",-"+n+"L-"+n+","+n+"M"+n+","+n+"H-"+n+
"V-"+n+"H"+n+"Z"},needLine:!0,noDot:!0},"diamond-cross":{n:31,f:function(n){n=p.round(1.3*n,2);return"M"+n+",0L0,"+n+"L-"+n+",0L0,-"+n+"ZM0,-"+n+"V"+n+"M-"+n+",0H"+n},needLine:!0,noDot:!0},"diamond-x":{n:32,f:function(n){var k=p.round(1.3*n,2);n=p.round(.65*n,2);return"M"+k+",0L0,"+k+"L-"+k+",0L0,-"+k+"ZM-"+n+",-"+n+"L"+n+","+n+"M-"+n+","+n+"L"+n+",-"+n},needLine:!0,noDot:!0},"cross-thin":{n:33,f:function(n){n=p.round(1.4*n,2);return"M0,"+n+"V-"+n+"M"+n+",0H-"+n},needLine:!0,noDot:!0,noFill:!0},"x-thin":{n:34,
f:function(n){n=p.round(n,2);return"M"+n+","+n+"L-"+n+",-"+n+"M"+n+",-"+n+"L-"+n+","+n},needLine:!0,noDot:!0,noFill:!0},asterisk:{n:35,f:function(n){var k=p.round(1.2*n,2);n=p.round(.85*n,2);return"M0,"+k+"V-"+k+"M"+k+",0H-"+k+"M"+n+","+n+"L-"+n+",-"+n+"M"+n+",-"+n+"L-"+n+","+n},needLine:!0,noDot:!0,noFill:!0},hash:{n:36,f:function(n){var k=p.round(n/2,2);n=p.round(n,2);return"M"+k+","+n+"V-"+n+"m-"+n+",0V"+n+"M"+n+","+k+"H-"+n+"m0,-"+n+"H"+n},needLine:!0,noFill:!0},"y-up":{n:37,f:function(n){var k=
p.round(1.2*n,2),m=p.round(1.6*n,2);n=p.round(.8*n,2);return"M-"+k+","+n+"L0,0M"+k+","+n+"L0,0M0,-"+m+"L0,0"},needLine:!0,noDot:!0,noFill:!0},"y-down":{n:38,f:function(n){var k=p.round(1.2*n,2),m=p.round(1.6*n,2);n=p.round(.8*n,2);return"M-"+k+",-"+n+"L0,0M"+k+",-"+n+"L0,0M0,"+m+"L0,0"},needLine:!0,noDot:!0,noFill:!0},"y-left":{n:39,f:function(n){var k=p.round(1.2*n,2),m=p.round(1.6*n,2);n=p.round(.8*n,2);return"M"+n+","+k+"L0,0M"+n+",-"+k+"L0,0M-"+m+",0L0,0"},needLine:!0,noDot:!0,noFill:!0},"y-right":{n:40,
f:function(n){var k=p.round(1.2*n,2),m=p.round(1.6*n,2);n=p.round(.8*n,2);return"M-"+n+","+k+"L0,0M-"+n+",-"+k+"L0,0M"+m+",0L0,0"},needLine:!0,noDot:!0,noFill:!0},"line-ew":{n:41,f:function(n){n=p.round(1.4*n,2);return"M"+n+",0H-"+n},needLine:!0,noDot:!0,noFill:!0},"line-ns":{n:42,f:function(n){n=p.round(1.4*n,2);return"M0,"+n+"V-"+n},needLine:!0,noDot:!0,noFill:!0},"line-ne":{n:43,f:function(n){n=p.round(n,2);return"M"+n+",-"+n+"L-"+n+","+n},needLine:!0,noDot:!0,noFill:!0},"line-nw":{n:44,f:function(n){n=
p.round(n,2);return"M"+n+","+n+"L-"+n+",-"+n},needLine:!0,noDot:!0,noFill:!0},"arrow-up":{n:45,f:function(n){var k=p.round(n,2);n=p.round(2*n,2);return"M0,0L-"+k+","+n+"H"+k+"Z"},noDot:!0},"arrow-down":{n:46,f:function(n){var k=p.round(n,2);n=p.round(2*n,2);return"M0,0L-"+k+",-"+n+"H"+k+"Z"},noDot:!0},"arrow-left":{n:47,f:function(n){var k=p.round(2*n,2);n=p.round(n,2);return"M0,0L"+k+",-"+n+"V"+n+"Z"},noDot:!0},"arrow-right":{n:48,f:function(n){var k=p.round(2*n,2);n=p.round(n,2);return"M0,0L-"+
k+",-"+n+"V"+n+"Z"},noDot:!0},"arrow-bar-up":{n:49,f:function(n){var k=p.round(n,2);n=p.round(2*n,2);return"M-"+k+",0H"+k+"M0,0L-"+k+","+n+"H"+k+"Z"},needLine:!0,noDot:!0},"arrow-bar-down":{n:50,f:function(n){var k=p.round(n,2);n=p.round(2*n,2);return"M-"+k+",0H"+k+"M0,0L-"+k+",-"+n+"H"+k+"Z"},needLine:!0,noDot:!0},"arrow-bar-left":{n:51,f:function(n){var k=p.round(2*n,2);n=p.round(n,2);return"M0,-"+n+"V"+n+"M0,0L"+k+",-"+n+"V"+n+"Z"},needLine:!0,noDot:!0},"arrow-bar-right":{n:52,f:function(n){var k=
p.round(2*n,2);n=p.round(n,2);return"M0,-"+n+"V"+n+"M0,0L-"+k+",-"+n+"V"+n+"Z"},needLine:!0,noDot:!0}}},{"@plotly/d3":58}],690:[function(b,N,G){N.exports={visible:{valType:"boolean",editType:"calc"},type:{valType:"enumerated",values:["percent","constant","sqrt","data"],editType:"calc"},symmetric:{valType:"boolean",editType:"calc"},array:{valType:"data_array",editType:"calc"},arrayminus:{valType:"data_array",editType:"calc"},value:{valType:"number",min:0,dflt:10,editType:"calc"},valueminus:{valType:"number",
min:0,dflt:10,editType:"calc"},traceref:{valType:"integer",min:0,dflt:0,editType:"style"},tracerefminus:{valType:"integer",min:0,dflt:0,editType:"style"},copy_ystyle:{valType:"boolean",editType:"plot"},copy_zstyle:{valType:"boolean",editType:"style"},color:{valType:"color",editType:"style"},thickness:{valType:"number",min:0,dflt:2,editType:"style"},width:{valType:"number",min:0,editType:"plot"},editType:"calc",_deprecated:{opacity:{valType:"number",editType:"style"}}}},{}],691:[function(b,N,G){function p(h,
r,l,c){var d=r["error_"+c]||{},e=[];if(d.visible&&-1!==["linear","log"].indexOf(l.type)){d=g(d);for(var f=0;f<h.length;f++){var q=h[f],t=q.i;if(void 0===t)t=f;else if(null===t)continue;var w=q[c];if(n(l.c2l(w))){var x=d(w,t);n(x[0])&&n(x[1])&&(t=q[c+"s"]=w-x[0],q=q[c+"h"]=w+x[1],e.push(t,q))}}h=r._extremes[l._id];l=m.findExtremes(l,e,a.extendFlat({tozero:h.opts.tozero},{padded:!0}));h.min=h.min.concat(l.min);h.max=h.max.concat(l.max)}}var n=b("fast-isnumeric"),k=b("../../registry"),m=b("../../plots/cartesian/axes"),
a=b("../../lib"),g=b("./compute_error");N.exports=function(h){for(var r=h.calcdata,l=0;l<r.length;l++){var c=r[l],d=c[0].trace;if(!0===d.visible&&k.traceIs(d,"errorBarsOK")){var e=m.getFromId(h,d.xaxis),f=m.getFromId(h,d.yaxis);p(c,d,e,"x");p(c,d,f,"y")}}}},{"../../lib":803,"../../plots/cartesian/axes":854,"../../registry":931,"./compute_error":692,"fast-isnumeric":249}],692:[function(b,N,G){function p(n,k){if("percent"===n)return function(m){return Math.abs(m*k/100)};if("constant"===n)return function(){return Math.abs(k)};
if("sqrt"===n)return function(m){return Math.sqrt(Math.abs(m))}}N.exports=function(n){var k=n.type,m=n.symmetric;if("data"===k){var a=n.array||[];if(m)return function(l,c){l=+a[c];return[l,l]};var g=n.arrayminus||[];return function(l,c){l=+a[c];c=+g[c];return isNaN(l)&&isNaN(c)?[NaN,NaN]:[c||0,l||0]}}var h=p(k,n.value),r=p(k,n.valueminus);return m||void 0===n.valueminus?function(l){l=h(l);return[l,l]}:function(l){return[r(l),h(l)]}}},{}],693:[function(b,N,G){var p=b("fast-isnumeric"),n=b("../../registry"),
k=b("../../lib"),m=b("../../plot_api/plot_template"),a=b("./attributes");N.exports=function(g,h,r,l){function c(q,t){return k.coerce(f,e,a,q,t)}var d="error_"+l.axis,e=m.newContainer(h,d),f=g[d]||{};if(!1!==c("visible",void 0!==f.array||void 0!==f.value||"sqrt"===f.type)){g=c("type","array"in f?"data":"percent");d=!0;"sqrt"!==g&&(d=c("symmetric",!(("data"===g?"arrayminus":"valueminus")in f)));if("data"===g)c("array"),c("traceref"),d||(c("arrayminus"),c("tracerefminus"));else if("percent"===g||"constant"===
g)c("value"),d||c("valueminus");g="copy_"+l.inherit+"style";l.inherit&&(h["error_"+l.inherit]||{}).visible&&c(g,!(f.color||p(f.thickness)||p(f.width)));l.inherit&&e[g]||(c("color",r),c("thickness"),c("width",n.traceIs(h,"gl3d")?0:4))}}},{"../../lib":803,"../../plot_api/plot_template":843,"../../registry":931,"./attributes":690,"fast-isnumeric":249}],694:[function(b,N,G){var p=b("../../lib");G=b("../../plot_api/edit_types").overrideAll;var n=b("./attributes"),k={error_x:p.extendFlat({},n),error_y:p.extendFlat({},
n)};delete k.error_x.copy_zstyle;delete k.error_y.copy_zstyle;delete k.error_y.copy_ystyle;p={error_x:p.extendFlat({},n),error_y:p.extendFlat({},n),error_z:p.extendFlat({},n)};delete p.error_x.copy_ystyle;delete p.error_y.copy_ystyle;delete p.error_z.copy_ystyle;delete p.error_z.copy_zstyle;N.exports={moduleType:"component",name:"errorbars",schema:{traces:{scatter:k,bar:k,histogram:k,scatter3d:G(p,"calc","nested"),scattergl:G(k,"calc","nested")}},supplyDefaults:b("./defaults"),calc:b("./calc"),makeComputeError:b("./compute_error"),
plot:b("./plot"),style:b("./style"),hoverInfo:function(m,a,g){(a.error_y||{}).visible&&(g.yerr=m.yh-m.y,a.error_y.symmetric||(g.yerrneg=m.y-m.ys));(a.error_x||{}).visible&&(g.xerr=m.xh-m.x,a.error_x.symmetric||(g.xerrneg=m.x-m.xs))}}},{"../../lib":803,"../../plot_api/edit_types":836,"./attributes":690,"./calc":691,"./compute_error":692,"./defaults":693,"./plot":695,"./style":696}],695:[function(b,N,G){var p=b("@plotly/d3"),n=b("fast-isnumeric"),k=b("../drawing"),m=b("../../traces/scatter/subtypes");
N.exports=function(a,g,h,r){var l,c=h.xaxis,d=h.yaxis,e=r&&0<r.duration;g.each(function(f){var q=f[0].trace,t=q.error_x||{},w=q.error_y||{},x;q.ids&&(x=function(B){return B.id});var z=m.hasMarkers(q)&&0<q.marker.maxdisplayed;w.visible||t.visible||(f=[]);q=p.select(this).selectAll("g.errorbar").data(f,x);q.exit().remove();f.length&&(t.visible||q.selectAll("path.xerror").remove(),w.visible||q.selectAll("path.yerror").remove(),q.style("opacity",1),f=q.enter().append("g").classed("errorbar",!0),e&&f.style("opacity",
0).transition().duration(r.duration).style("opacity",1),k.setClipUrl(q,h.layerClipId,a),q.each(function(B){var A=p.select(this),D=c.c2p(B.x),C=d.c2p(B.y);if(void 0!==B.yh){var v=d.c2p(B.yh);var y=d.c2p(B.ys);if(!n(y)){var F=!0;y=d.c2p(B.ys,!0)}}if(void 0!==B.xh){var J=c.c2p(B.xh);var K=c.c2p(B.xs);if(!n(K)){var M=!0;K=c.c2p(B.xs,!0)}}if(!z||B.vis){B=A.select("path.yerror");if(w.visible&&n(D)&&n(v)&&n(y)){var H=w.width;D="M"+(D-H)+","+v+"h"+2*H+"m-"+H+",0V"+y;F||(D+="m-"+H+",0h"+2*H);(l=!B.size())?
B=A.append("path").style("vector-effect","non-scaling-stroke").classed("yerror",!0):e&&(B=B.transition().duration(r.duration).ease(r.easing));B.attr("d",D)}else B.remove();F=A.select("path.xerror");t.visible&&n(C)&&n(J)&&n(K)?(v=(t.copy_ystyle?w:t).width,D="M"+J+","+(C-v)+"v"+2*v+"m0,-"+v+"H"+K,M||(D+="m0,-"+v+"v"+2*v),(l=!F.size())?F=A.append("path").style("vector-effect","non-scaling-stroke").classed("xerror",!0):e&&(F=F.transition().duration(r.duration).ease(r.easing)),F.attr("d",D)):F.remove()}}))})}},
{"../../traces/scatter/subtypes":1243,"../drawing":688,"@plotly/d3":58,"fast-isnumeric":249}],696:[function(b,N,G){var p=b("@plotly/d3"),n=b("../color");N.exports=function(k){k.each(function(m){var a=m[0].trace;m=a.error_y||{};a=a.error_x||{};var g=p.select(this);g.selectAll("path.yerror").style("stroke-width",m.thickness+"px").call(n.stroke,m.color);a.copy_ystyle&&(a=m);g.selectAll("path.xerror").style("stroke-width",a.thickness+"px").call(n.stroke,a.color)})}},{"../color":666,"@plotly/d3":58}],
697:[function(b,N,G){G=b("../../plots/font_attributes");var p=b("./layout_attributes").hoverlabel;b=b("../../lib/extend").extendFlat;N.exports={hoverlabel:{bgcolor:b({},p.bgcolor,{arrayOk:!0}),bordercolor:b({},p.bordercolor,{arrayOk:!0}),font:G({arrayOk:!0,editType:"none"}),align:b({},p.align,{arrayOk:!0}),namelength:b({},p.namelength,{arrayOk:!0}),editType:"none"}}},{"../../lib/extend":793,"../../plots/font_attributes":883,"./layout_attributes":707}],698:[function(b,N,G){function p(m,a,g,h){h=h||
n.identity;Array.isArray(m)&&(a[0][g]=h(m))}var n=b("../../lib"),k=b("../../registry");N.exports=function(m){function a(d){return function(e){return n.coerceHoverinfo({hoverinfo:e},{_module:d._module},h)}}var g=m.calcdata,h=m._fullLayout;for(m=0;m<g.length;m++){var r=g[m],l=r[0].trace;if(!k.traceIs(l,"pie-like")){var c=k.traceIs(l,"2dMap")?p:n.fillArray;c(l.hoverinfo,r,"hi",a(l));l.hovertemplate&&c(l.hovertemplate,r,"ht");l.hoverlabel&&(c(l.hoverlabel.bgcolor,r,"hbg"),c(l.hoverlabel.bordercolor,r,
"hbc"),c(l.hoverlabel.font.size,r,"hts"),c(l.hoverlabel.font.color,r,"htc"),c(l.hoverlabel.font.family,r,"htf"),c(l.hoverlabel.namelength,r,"hnl"),c(l.hoverlabel.align,r,"hta"))}}}},{"../../lib":803,"../../registry":931}],699:[function(b,N,G){var p=b("../../registry"),n=b("./hover").hover;N.exports=function(k,m,a){function g(){k.emit("plotly_click",{points:k._hoverdata,event:m})}var h=p.getComponentMethod("annotations","onClick")(k,k._hoverdata);void 0!==a&&n(k,m,a,!0);k._hoverdata&&m&&m.target&&
(h&&h.then?h.then(g):g(),m.stopImmediatePropagation&&m.stopImmediatePropagation())}},{"../../registry":931,"./hover":703}],700:[function(b,N,G){N.exports={YANGLE:60,HOVERARROWSIZE:6,HOVERTEXTPAD:3,HOVERFONTSIZE:13,HOVERFONT:"Arial, sans-serif",HOVERMINTIME:50,HOVERID:"-hover"}},{}],701:[function(b,N,G){var p=b("../../lib"),n=b("./attributes"),k=b("./hoverlabel_defaults");N.exports=function(m,a,g,h){g=p.extendFlat({},h.hoverlabel);a.hovertemplate&&(g.namelength=-1);k(m,a,function(r,l){return p.coerce(m,
a,n,r,l)},g)}},{"../../lib":803,"./attributes":697,"./hoverlabel_defaults":704}],702:[function(b,N,G){function p(g,h){if(Array.isArray(h)){if(Array.isArray(g)&&Array.isArray(g[h[0]]))return g[h[0]][h[1]]}else return g[h]}var n=b("../../lib");G.getSubplot=function(g){return g.subplot||g.xaxis+g.yaxis||g.geo};G.isTraceInSubplots=function(g,h){if("splom"===g.type){var r=g.xaxes||[];g=g.yaxes||[];for(var l=0;l<r.length;l++)for(var c=0;c<g.length;c++)if(-1!==h.indexOf(r[l]+g[c]))return!0;return!1}return-1!==
h.indexOf(G.getSubplot(g))};G.flat=function(g,h){for(var r=Array(g.length),l=0;l<g.length;l++)r[l]=h;return r};G.p2c=function(g,h){for(var r=Array(g.length),l=0;l<g.length;l++)r[l]=g[l].p2c(h);return r};G.getDistanceFunction=function(g,h,r,l){return"closest"===g?l||G.quadrature(h,r):"x"===g.charAt(0)?h:r};G.getClosest=function(g,h,r){if(!1!==r.index)0<=r.index&&r.index<g.length?r.distance=0:r.index=!1;else for(var l=0;l<g.length;l++){var c=h(g[l]);c<=r.distance&&(r.index=l,r.distance=c)}return r};
G.inbox=function(g,h,r){return 0>g*h||0===g?r:Infinity};G.quadrature=function(g,h){return function(r){var l=g(r);r=h(r);return Math.sqrt(l*l+r*r)}};G.makeEventData=function(g,h,r){var l="index"in g?g.index:g.pointNumber,c={data:h._input,fullData:h,curveNumber:h.index,pointNumber:l};if(h._indexToPoints){var d=h._indexToPoints[l];1===d.length?c.pointIndex=d[0]:c.pointIndices=d}else c.pointIndex=l;h._module.eventData?c=h._module.eventData(c,g,h,r,l):("xVal"in g?c.x=g.xVal:"x"in g&&(c.x=g.x),"yVal"in
g?c.y=g.yVal:"y"in g&&(c.y=g.y),g.xa&&(c.xaxis=g.xa),g.ya&&(c.yaxis=g.ya),void 0!==g.zLabelVal&&(c.z=g.zLabelVal));G.appendArrayPointValue(c,h,l);return c};G.appendArrayPointValue=function(g,h,r){var l=h._arrayAttrs;if(l)for(var c=0;c<l.length;c++){var d=l[c],e=k[d]||d;void 0===g[e]&&(d=n.nestedProperty(h,d).get(),d=p(d,r),void 0!==d&&(g[e]=d))}};G.appendArrayMultiPointValues=function(g,h,r){var l=h._arrayAttrs;if(l)for(var c=0;c<l.length;c++){var d=l[c],e=k[d]||d;if(void 0===g[e]){d=n.nestedProperty(h,
d).get();for(var f=Array(r.length),q=0;q<r.length;q++)f[q]=p(d,r[q]);g[e]=f}}};var k={ids:"id",locations:"location",labels:"label",values:"value","marker.colors":"color",parents:"parent"},m={x:!0,y:!0},a={"x unified":!0,"y unified":!0};G.isUnifiedHover=function(g){return"string"!==typeof g?!1:!!a[g]};G.isXYhover=function(g){return"string"!==typeof g?!1:!!m[g]}},{"../../lib":803}],703:[function(b,N,G){function p(W,aa,ja,ma){function ia(yc,Jc){for(pb=0;pb<ub.length;pb++)if((Ab=ub[pb])&&Ab[0]&&Ab[0].trace&&
(Ja=Ab[0].trace,!0===Ja.visible&&0!==Ja._length&&-1===["carpet","contourcarpet"].indexOf(Ja._module.name))){"splom"===Ja.type?(vb=0,tb=pa[vb]):(tb=K.getSubplot(Ja),vb=pa.indexOf(tb));qb=Za;K.isUnifiedHover(qb)&&(qb=qb.charAt(0));Ka={cd:Ab,trace:Ja,xa:oa[vb],ya:sa[vb],maxHoverDistance:bb,maxSpikeDistance:sb,index:!1,distance:Math.min(ab,bb),spikeDistance:Infinity,xSpike:void 0,ySpike:void 0,color:v.defaultLine,name:Ja.name,x0:void 0,x1:void 0,y0:void 0,y1:void 0,xLabelVal:void 0,yLabelVal:void 0,zLabelVal:void 0,
text:void 0};la[tb]&&(Ka.subplot=la[tb]._subplot);la._splomScenes&&la._splomScenes[Ja.uid]&&(Ka.scene=la._splomScenes[Ja.uid]);ya=hb.length;if("array"===qb){var Ia=aa[pb];"pointNumber"in Ia?(Ka.index=Ia.pointNumber,qb="closest"):(qb="","xval"in Ia&&(zb=Ia.xval,qb="x"),"yval"in Ia&&(La=Ia.yval,qb=qb?"closest":"y"))}else void 0!==yc&&void 0!==Jc?(zb=yc,La=Jc):(zb=Ta[vb],La=$a[vb]);if(0!==bb)if(Ja._module&&Ja._module.hoverPoints){if(Ia=Ja._module.hoverPoints(Ka,zb,La,qb,{finiteRange:!0,hoverLayer:la._hoverlayer}))for(var Na,
ib=0;ib<Ia.length;ib++)Na=Ia[ib],q(Na.x0)&&q(Na.y0)&&hb.push(h(Na,Za))}else w.log("Unrecognized trace type in hover:",Ja);"closest"===Za&&hb.length>ya&&(hb.splice(0,ya),ab=hb[0].distance);na&&0!==sb&&0===hb.length&&(Ka.distance=sb,Ka.index=!1,(Ia=Ja._module.hoverPoints(Ka,zb,La,"closest",{hoverLayer:la._hoverlayer}))&&(Ia=Ia.filter(function(Gb){return Gb.spikeDistance<=sb})),Ia&&Ia.length)&&(Na=Ia.filter(function(Gb){return Gb.xa.showspikes&&"hovered data"!==Gb.xa.spikesnap}),Na.length&&(Na=Na[0],
q(Na.x0)&&q(Na.y0)&&(Na=wa(Na),!Aa.vLinePoint||Aa.vLinePoint.spikeDistance>Na.spikeDistance))&&(Aa.vLinePoint=Na),Ia=Ia.filter(function(Gb){return Gb.ya.showspikes&&"hovered data"!==Gb.ya.spikesnap}),Ia.length&&(Ia=Ia[0],q(Ia.x0)&&q(Ia.y0)&&(Na=wa(Ia),!Aa.hLinePoint||Aa.hLinePoint.spikeDistance>Na.spikeDistance))&&(Aa.hLinePoint=Na))}}function ra(yc,Jc,Ia){for(var Na=null,ib=Infinity,Gb,Hb=0;Hb<yc.length;Hb++)Gb=yc[Hb].spikeDistance,Ia&&0===Hb&&(Gb=-Infinity),Gb<=ib&&Gb<=Jc&&(Na=yc[Hb],ib=Gb);return Na}
function wa(yc){return yc?{xa:yc.xa,ya:yc.ya,x:void 0!==yc.xSpike?yc.xSpike:(yc.x0+yc.x1)/2,y:void 0!==yc.ySpike?yc.ySpike:(yc.y0+yc.y1)/2,distance:yc.distance,spikeDistance:yc.spikeDistance,curveNumber:yc.trace.index,color:yc.color,pointNumber:yc.index}:null}ja||(ja="xy");var pa=Array.isArray(ja)?ja:[ja],la=W._fullLayout,ka=la._plots||[];ja=ka[ja];var na=la._has("cartesian");ja&&(ja=ja.overlays.map(function(yc){return yc.id}),pa=pa.concat(ja));ja=pa.length;for(var oa=Array(ja),sa=Array(ja),za=!1,
Ha=0;Ha<ja;Ha++){var Wa=pa[Ha];if(ka[Wa])za=!0,oa[Ha]=ka[Wa].xaxis,sa[Ha]=ka[Wa].yaxis;else if(la[Wa]&&la[Wa]._subplot)Wa=la[Wa]._subplot,oa[Ha]=Wa.xaxis,sa[Ha]=Wa.yaxis;else{w.warn("Unrecognized subplot: "+Wa);return}}var Za=aa.hovermode||la.hovermode;Za&&!za&&(Za="closest");if(-1===["x","y","closest","x unified","y unified"].indexOf(Za)||!W.calcdata||W.querySelector(".zoombox")||W._dragging)return y.unhoverRaw(W,aa);var bb=la.hoverdistance;-1===bb&&(bb=Infinity);var sb=la.spikedistance;-1===sb&&
(sb=Infinity);var hb=[],ub=[],pb,Ab,tb,vb,qb,zb,La,Ka,ya,Aa={hLinePoint:null,vLinePoint:null};ka=!1;if(Array.isArray(aa))for(Za="array",Ha=0;Ha<aa.length;Ha++){if(Ab=W.calcdata[aa[Ha].curveNumber||0]){var Ja=Ab[0].trace;"skip"!==Ab[0].trace.hoverinfo&&(ub.push(Ab),"h"===Ja.orientation&&(ka=!0))}}else{for(pb=0;pb<W.calcdata.length;pb++)Ab=W.calcdata[pb],Ja=Ab[0].trace,"skip"!==Ja.hoverinfo&&K.isTraceInSubplots(Ja,pa)&&(ub.push(Ab),"h"===Ja.orientation&&(ka=!0));if(aa.target){if(!1===B.triggerHandler(W,
"plotly_beforehover",aa))return;ja=aa.composedPath&&aa.composedPath()[0];ja||(ja=aa.target);za=ja.getBoundingClientRect();ja=aa.clientX-za.left;za=aa.clientY-za.top;la._calcInverseTransform(W);za=w.apply3DTransform(la._invTransform)(ja,za);ja=za[0];za=za[1];if(0>ja||ja>oa[0]._length||0>za||za>sa[0]._length)return y.unhoverRaw(W,aa)}else ja="xpx"in aa?aa.xpx:oa[0]._length/2,za="ypx"in aa?aa.ypx:sa[0]._length/2;aa.pointerX=ja+oa[0]._offset;aa.pointerY=za+sa[0]._offset;var Ta="xval"in aa?K.flat(pa,aa.xval):
K.p2c(oa,ja);var $a="yval"in aa?K.flat(pa,aa.yval):K.p2c(sa,za);if(!q(Ta[0])||!q($a[0]))return w.warn("Fx.hover failed",aa,W),y.unhoverRaw(W,aa)}var ab=Infinity;ia();za={fullLayout:la,container:la._hoverlayer,outerContainer:la._paperdiv,event:aa};W._spikepoints={vLinePoint:Aa.vLinePoint,hLinePoint:Aa.hLinePoint};ja=function(){hb.sort(function(yc,Jc){return yc.distance-Jc.distance});hb=d(hb,Za)};ja();Ha=Za.charAt(0);Ha=("x"===Ha||"y"===Ha)&&hb[0]&&T[hb[0].trace.type];na&&0!==sb&&0!==hb.length&&(Wa=
hb.filter(function(yc){return yc.ya.showspikes}),Wa=ra(Wa,sb,Ha),Aa.hLinePoint=wa(Wa),Wa=hb.filter(function(yc){return yc.xa.showspikes}),Ha=ra(Wa,sb,Ha),Aa.vLinePoint=wa(Ha));if(0===hb.length)return ma=y.unhoverRaw(W,aa),!na||null===Aa.hLinePoint&&null===Aa.vLinePoint||r(W,Aa,za),ma;na&&r(W,Aa,za);if(K.isXYhover(qb)&&0!==hb[0].length&&"splom"!==hb[0].trace.type){var Db=hb[0];hb=S[Db.trace.type]?hb.filter(function(yc){return yc.trace.index===Db.trace.index}):[Db];za=hb.length;Ha=e("x",Db,la);Wa=e("y",
Db,la);ia(Ha,Wa);var Nb=[],ec={},ob=0;Ha=function(yc){var Jc=S[yc.trace.type]?n(yc):yc.trace.index;if(ec[Jc]){Jc=ec[Jc]-1;var Ia=Nb[Jc];0<Jc&&Math.abs(yc.distance)<Math.abs(Ia.distance)&&(Nb[Jc]=yc)}else ob++,ec[Jc]=ob,Nb.push(yc)};for(Wa=0;Wa<za;Wa++)Ha(hb[Wa]);for(Wa=hb.length-1;Wa>za-1;Wa--)Ha(hb[Wa]);hb=Nb;ja()}ja=W._hoverdata;za=[];for(Ha=0;Ha<hb.length;Ha++){Wa=hb[Ha];var Cb=K.makeEventData(Wa,Wa.trace,Wa.cd);if(!1!==Wa.hovertemplate){var Qb=!1;Wa.cd[Wa.index]&&Wa.cd[Wa.index].ht&&(Qb=Wa.cd[Wa.index].ht);
Wa.hovertemplate=Qb||Wa.trace.hovertemplate||!1}Wa.eventData=[Cb];za.push(Cb)}W._hoverdata=za;ka="y"===Za&&(1<ub.length||1<hb.length)||"closest"===Za&&ka&&1<hb.length;Ha=v.combine(la.plot_bgcolor||v.background,la.paper_bgcolor);Ha=k(hb,{hovermode:Za,rotateLabels:ka,bgColor:Ha,container:la._hoverlayer,outerContainer:la._paperdiv,commonLabelOpts:la.hoverlabel,hoverdistance:la.hoverdistance},W);K.isUnifiedHover(Za)||(a(Ha,ka?"xa":"ya",la),g(Ha,ka,la._invScaleX,la._invScaleY));aa.target&&aa.target.tagName&&
(ka=J.getComponentMethod("annotations","hasClickToShow")(W,za),D(f.select(aa.target),ka?"pointer":""));aa.target&&!ma&&l(W,aa,ja)&&(ja&&W.emit("plotly_unhover",{event:aa,points:ja}),W.emit("plotly_hover",{event:aa,points:W._hoverdata,xaxes:oa,yaxes:sa,xvals:Ta,yvals:$a}))}function n(W){return[W.trace.index,W.index,W.x0,W.y0,W.name,W.attr,W.xa?W.xa._id:"",W.ya?W.ya._id:""].join()}function k(W,aa,ja){var ma=ja._fullLayout,ia=aa.hovermode,ra=aa.rotateLabels,wa=aa.bgColor,pa=aa.container,la=aa.outerContainer,
ka=aa.commonLabelOpts||{},na=aa.fontFamily||M.HOVERFONT,oa=aa.fontSize||M.HOVERFONTSIZE,sa=W[0],za=sa.xa,Ha=sa.ya,Wa=ia.charAt(0),Za=sa[Wa+"Label"];la=la.node().getBoundingClientRect();var bb=la.top,sb=la.width,hb=la.height,ub=void 0!==Za&&sa.distance<=aa.hoverdistance&&("x"===ia||"y"===ia);if(ub){aa=!0;var pb;for(la=0;la<W.length;la++)if(aa&&void 0===W[la].zLabel&&(aa=!1),pb=W[la].hoverinfo||W[la].trace.hoverinfo)if(pb=Array.isArray(pb)?pb:pb.split("+"),-1===pb.indexOf("all")&&-1===pb.indexOf(ia)){ub=
!1;break}aa&&(ub=!1)}aa=pa.selectAll("g.axistext").data(ub?[0]:[]);aa.enter().append("g").classed("axistext",!0);aa.exit().remove();aa.each(function(){var La=f.select(this),Ka=w.ensureSingle(La,"path","",function(Cb){Cb.style({"stroke-width":"1px"})}),ya=w.ensureSingle(La,"text","",function(Cb){Cb.attr("data-notex",1)}),Aa=ka.bgcolor||v.defaultLine,Ja=ka.bordercolor||v.contrast(Aa),Ta=v.contrast(Aa),$a={family:ka.font.family||na,size:ka.font.size||oa,color:ka.font.color||Ta};Ka.style({fill:Aa,stroke:Ja});
ya.text(Za).call(C.font,$a).call(A.positionText,0,0).call(A.convertToTspans,ja);La.attr("transform","");var ab=ya.node().getBoundingClientRect();if("x"===ia)Ta="top"===za.side?"-":"",ya.attr("text-anchor","middle").call(A.positionText,0,"top"===za.side?bb-ab.bottom-ba-V:bb-ab.top+ba+V),Aa=za._offset+(sa.x0+sa.x1)/2,Ja=Ha._offset+("top"===za.side?0:Ha._length),ya=ab.width/2+V,Aa<ya?(Aa=ya,Ka.attr("d","M-"+(ya-ba)+",0L-"+(ya-2*ba)+","+Ta+ba+"H"+(V+ab.width/2)+"v"+Ta+(2*V+ab.height)+"H-"+ya+"V"+Ta+ba+
"Z")):Aa>ma.width-ya?(Aa=ma.width-ya,Ka.attr("d","M"+(ya-ba)+",0L"+ya+","+Ta+ba+"v"+Ta+(2*V+ab.height)+"H-"+ya+"V"+Ta+ba+"H"+(ya-2*ba)+"Z")):Ka.attr("d","M0,0L"+ba+","+Ta+ba+"H"+(V+ab.width/2)+"v"+Ta+(2*V+ab.height)+"H-"+(V+ab.width/2)+"V"+Ta+ba+"H-"+ba+"Z");else{if("right"===Ha.side){Ta="start";var Db=1;var Nb="";Aa=za._offset+za._length}else Ta="end",Db=-1,Nb="-",Aa=za._offset;Ja=Ha._offset+(sa.y0+sa.y1)/2;ya.attr("text-anchor",Ta);Ka.attr("d","M0,0L"+Nb+ba+","+ba+"V"+(V+ab.height/2)+"h"+Nb+(2*
V+ab.width)+"V-"+(V+ab.height/2)+"H"+Nb+ba+"V-"+ba+"Z");var ec=ab.height/2;Nb=bb-ab.top-ec;Ka="clip"+ma._uid+"commonlabel"+Ha._id;if(Aa<ab.width+2*V+ba){Db="M-"+(ba+V)+"-"+ec+"h-"+(ab.width-V)+"V"+ec+"h"+(ab.width-V)+"Z";var ob=ab.width-Aa+V;A.positionText(ya,ob,Nb);"end"===Ta&&ya.selectAll("tspan").each(function(){var Cb=f.select(this),Qb=C.tester.append("text").text(Cb.text()).call(C.font,$a),yc=Qb.node().getBoundingClientRect();Math.round(yc.width)<Math.round(ab.width)&&Cb.attr("x",ob-yc.width);
Qb.remove()})}else A.positionText(ya,Db*(V+ba),Nb),Db=null;Ta=ma._topclips.selectAll("#"+Ka).data(Db?[0]:[]);Ta.enter().append("clipPath").attr("id",Ka).append("path");Ta.exit().remove();Ta.select("path").attr("d",Db);C.setClipUrl(ya,Db?Ka:null,ja)}La.attr("transform",x(Aa,Ja))});if(K.isUnifiedHover(ia)){pa.selectAll("g.hovertext").remove();if(0===W.length)return;aa={};H({showlegend:!0,legend:{title:{text:Za,font:ma.hoverlabel.font},font:ma.hoverlabel.font,bgcolor:ma.hoverlabel.bgcolor,bordercolor:ma.hoverlabel.bordercolor,
borderwidth:1,tracegroupgap:7,traceorder:ma.legend?ma.legend.traceorder:void 0,orientation:"v"}},aa,ja._fullData);aa=aa.legend;aa.entries=[];for(la=0;la<W.length;la++){var Ab=m(W[la],!0,ia,ma,Za);pb=Ab[0];var tb=Ab[1];Ab=W[la];Ab.name=tb;Ab.text=""!==tb?tb+" : "+pb:pb;if(pb=Ab.cd[Ab.index])pb.mc&&(Ab.mc=pb.mc),pb.mcc&&(Ab.mc=pb.mcc),pb.mlc&&(Ab.mlc=pb.mlc),pb.mlcc&&(Ab.mlc=pb.mlcc),pb.mlw&&(Ab.mlw=pb.mlw),pb.mrc&&(Ab.mrc=pb.mrc),pb.dir&&(Ab.dir=pb.dir);Ab._distinct=!0;aa.entries.push([Ab])}aa.entries.sort(function(La,
Ka){return La[0].trace.index-Ka[0].trace.index});aa.layer=pa;aa._inHover=!0;O(ja,aa);pa=pa.select("g.legend");la=pa.node().getBoundingClientRect();aa=la.width+2*V;la=la.height+2*V;tb=W[0];Ab=(tb.x0+tb.x1)/2;pb=(tb.y0+tb.y1)/2;var vb=!(J.traceIs(tb.trace,"bar-like")||J.traceIs(tb.trace,"box-violin"));if("y"===Wa)if(vb){var qb=pb-V;tb=pb+V}else qb=Math.min.apply(null,W.map(function(La){return Math.min(La.y0,La.y1)})),tb=Math.max.apply(null,W.map(function(La){return Math.max(La.y0,La.y1)}));else qb=
tb=w.mean(W.map(function(La){return(La.y0+La.y1)/2}))-la/2;"x"===Wa?vb?(Wa=Ab+V,vb=Ab-V):(Wa=Math.max.apply(null,W.map(function(La){return Math.max(La.x0,La.x1)})),vb=Math.min.apply(null,W.map(function(La){return Math.min(La.x0,La.x1)}))):Wa=vb=w.mean(W.map(function(La){return(La.x0+La.x1)/2}))-aa/2;var zb=za._offset;W=Ha._offset;tb+=W;Wa+=zb;vb+=zb-aa;qb+=W-la;Wa=(Wa+aa<sb&&0<=Wa?Wa:vb+aa<sb&&0<=vb?vb:zb+aa<sb?zb:Wa-Ab<Ab-vb+aa?sb-aa:0)+V;W=(tb+la<hb&&0<=tb?tb:qb+la<hb&&0<=qb?qb:W+la<hb?W:tb-pb<
pb-qb+la?hb-la:0)+V;pa.attr("transform",x(Wa-1,W-1));return pa}W=pa.selectAll("g.hovertext").data(W,function(La){return n(La)});W.enter().append("g").classed("hovertext",!0).each(function(){var La=f.select(this);La.append("rect").call(v.fill,v.addOpacity(wa,.8));La.append("text").classed("name",!0);La.append("path").style("stroke-width","1px");La.append("text").classed("nums",!0).call(C.font,na,oa)});W.exit().remove();W.each(function(La){var Ka=f.select(this).attr("transform",""),ya=La.color;Array.isArray(ya)&&
(ya=ya[La.eventData[0].pointNumber]);var Aa=La.bgcolor||ya,Ja=v.combine(v.opacity(Aa)?Aa:v.defaultLine,wa),Ta=v.combine(v.opacity(ya)?ya:v.defaultLine,wa),$a=La.borderColor||v.contrast(Ja);ya=m(La,ub,ia,ma,Za,Ka);var ab=ya[0],Db=ya[1];ya=Ka.select("text.nums").call(C.font,La.fontFamily||na,La.fontSize||oa,La.fontColor||$a).text(ab).attr("data-notex",1).call(A.positionText,0,0).call(A.convertToTspans,ja);Aa=Ka.select("text.name");var Nb=0,ec=0;Db&&Db!==ab?(Aa.call(C.font,La.fontFamily||na,La.fontSize||
oa,Ta).text(Db).attr("data-notex",1).call(A.positionText,0,0).call(A.convertToTspans,ja),ec=Aa.node().getBoundingClientRect(),Nb=ec.width+2*V,ec=ec.height+2*V):(Aa.remove(),Ka.select("rect").remove());Ka.select("path").style({fill:Ja,stroke:$a});var ob=ya.node().getBoundingClientRect();Ja=La.xa._offset+(La.x0+La.x1)/2;$a=La.ya._offset+(La.y0+La.y1)/2;Ta=Math.abs(La.x1-La.x0);ab=Math.abs(La.y1-La.y0);Db=ob.width+ba+V+Nb;La.ty0=bb-ob.top;La.bx=ob.width+2*V;La.by=Math.max(ob.height+2*V,ec);La.anchor=
"start";La.txwidth=ob.width;La.tx2width=Nb;La.offset=0;ra?(La.pos=Ja,ec=$a+ab/2+Db<=hb,("top"===La.idealAlign||!ec)&&0<=$a-ab/2-Db?($a-=ab/2,La.anchor="end"):ec?($a+=ab/2,La.anchor="start"):La.anchor="middle"):(La.pos=$a,ec=Ja+Ta/2+Db<=sb,("left"===La.idealAlign||!ec)&&0<=Ja-Ta/2-Db?(Ja-=Ta/2,La.anchor="end"):ec?(Ja+=Ta/2,La.anchor="start"):(La.anchor="middle",Ta=Db/2,ec=Ja+Ta-sb,Ta=Ja-Ta,0<ec&&(Ja-=ec),0>Ta&&(Ja+=-Ta)));ya.attr("text-anchor",La.anchor);Nb&&Aa.attr("text-anchor",La.anchor);Ka.attr("transform",
x(Ja,$a)+(ra?z(I):""))});return W}function m(W,aa,ja,ma,ia,ra){var wa="",pa="";void 0!==W.nameOverride&&(W.name=W.nameOverride);W.name&&(W.trace._meta&&(W.name=w.templateString(W.name,W.trace._meta)),wa=c(W.name,W.nameLength));ja=ja.charAt(0);var la="x"===ja?"y":"x";void 0!==W.zLabel?(void 0!==W.xLabel&&(pa+="x: "+W.xLabel+"\x3cbr\x3e"),void 0!==W.yLabel&&(pa+="y: "+W.yLabel+"\x3cbr\x3e"),"choropleth"!==W.trace.type&&"choroplethmapbox"!==W.trace.type&&(pa+=(pa?"z: ":"")+W.zLabel)):aa&&W[ja+"Label"]===
ia?pa=W[la+"Label"]||"":void 0===W.xLabel?void 0!==W.yLabel&&"scattercarpet"!==W.trace.type&&(pa=W.yLabel):pa=void 0===W.yLabel?W.xLabel:"("+W.xLabel+", "+W.yLabel+")";!W.text&&0!==W.text||Array.isArray(W.text)||(pa+=(pa?"\x3cbr\x3e":"")+W.text);void 0!==W.extraText&&(pa+=(pa?"\x3cbr\x3e":"")+W.extraText);ra&&""===pa&&!W.hovertemplate&&(""===wa&&ra.remove(),pa=wa);if(aa=W.hovertemplate||!1)pa=W.hovertemplateLabels||W,W[ja+"Label"]!==ia&&(pa[ja+"other"]=pa[ja+"Val"],pa[ja+"otherLabel"]=pa[ja+"Label"]),
pa=w.hovertemplateString(aa,pa,ma._d3locale,W.eventData[0]||{},W.trace._meta),pa=pa.replace(fa,function(ka,na){wa=c(na,W.nameLength);return""});return[pa,wa]}function a(W,aa,ja){function ma(sb){var hb=sb[0],ub=sb[sb.length-1];na=hb.pmin-hb.pos-hb.dp+hb.size;oa=ub.pos+ub.dp+ub.size-hb.pmax;if(.01<na){for(za=sb.length-1;0<=za;za--)sb[za].dp+=na;ka=!1}if(!(.01>oa)){if(-.01>na){for(za=sb.length-1;0<=za;za--)sb[za].dp-=oa;ka=!1}if(ka){for(sa=ub=0;sa<sb.length;sa++)Ha=sb[sa],Ha.pos+Ha.dp+Ha.size>hb.pmax&&
ub++;for(sa=sb.length-1;0<=sa&&!(0>=ub);sa--)Ha=sb[sa],Ha.pos>hb.pmax-1&&(Ha.del=!0,ub--);for(sa=0;sa<sb.length&&!(0>=ub);sa++)if(Ha=sb[sa],Ha.pos<hb.pmin+1)for(Ha.del=!0,ub--,oa=2*Ha.size,za=sb.length-1;0<=za;za--)sb[za].dp-=oa;for(sa=sb.length-1;0<=sa&&!(0>=ub);sa--)Ha=sb[sa],Ha.pos+Ha.dp+Ha.size>hb.pmax&&(Ha.del=!0,ub--)}}}var ia=0,ra=1,wa=W.size(),pa=Array(wa),la=0;W.each(function(sb){var hb=sb[aa],ub="x"===hb._id.charAt(0);hb=hb.range;0===la&&hb&&hb[0]>hb[1]!==ub&&(ra=-1);pa[la++]=[{datum:sb,
traceIndex:sb.trace.index,dp:0,pos:sb.pos,posref:sb.posref,size:sb.by*(ub?L:1)/2,pmin:0,pmax:ub?ja.width:ja.height}]});pa.sort(function(sb,hb){return sb[0].posref-hb[0].posref||ra*(hb[0].traceIndex-sb[0].traceIndex)});for(var ka,na,oa,sa,za,Ha,Wa;!ka&&ia<=wa;){ia++;ka=!0;for(sa=0;sa<pa.length-1;){W=pa[sa];Wa=pa[sa+1];var Za=W[W.length-1],bb=Wa[0];na=Za.pos+Za.dp+Za.size-bb.pos-bb.dp+bb.size;if(.01<na&&Za.pmin===bb.pmin&&Za.pmax===bb.pmax){for(za=Wa.length-1;0<=za;za--)Wa[za].dp+=na;W.push.apply(W,
Wa);pa.splice(sa+1,1);Wa=0;for(za=W.length-1;0<=za;za--)Wa+=W[za].dp;oa=Wa/W.length;for(za=W.length-1;0<=za;za--)W[za].dp-=oa;ka=!1}else sa++}pa.forEach(ma)}for(sa=pa.length-1;0<=sa;sa--)for(ia=pa[sa],za=ia.length-1;0<=za;za--)wa=ia[za],W=wa.datum,W.offset=wa.dp,W.del=wa.del}function g(W,aa,ja,ma){W.each(function(ia){var ra=f.select(this);if(ia.del)return ra.remove();var wa=ra.select("text.nums"),pa=ia.anchor,la="end"===pa?-1:1,ka={start:1,end:-1,middle:0}[pa],na=ka*(ba+V),oa=na+ka*(ia.txwidth+V),
sa=0,za=ia.offset,Ha="middle"===pa;Ha&&(na-=ia.tx2width/2,oa+=ia.txwidth/2+V);aa&&(za*=-Z,sa=ia.offset*Q);ra.select("path").attr("d",Ha?"M-"+(ia.bx/2+ia.tx2width/2)*ja+","+(za-ia.by/2)*ma+"h"+ia.bx*ja+"v"+ia.by*ma+"h-"+ia.bx*ja+"Z":"M0,0L"+(la*ba+sa)*ja+","+(ba+za)*ma+"v"+(ia.by/2-ba)*ma+"h"+la*ia.bx*ja+"v-"+ia.by*ma+"H"+(la*ba+sa)*ja+"V"+(za-ba)*ma+"Z");la=sa+na;na=za+ia.ty0-ia.by/2+V;var Wa=ia.textAlign||"auto";"auto"!==Wa&&("left"===Wa&&"start"!==pa?(wa.attr("text-anchor","start"),la=Ha?-ia.bx/
2-ia.tx2width/2+V:-ia.bx-V):"right"===Wa&&"end"!==pa&&(wa.attr("text-anchor","end"),la=Ha?ia.bx/2-ia.tx2width/2-V:ia.bx+V));wa.call(A.positionText,la*ja,na*ma);ia.tx2width&&(ra.select("text.name").call(A.positionText,(oa+ka*V+sa)*ja,(za+ia.ty0-ia.by/2+V)*ma),ra.select("rect").call(C.setRect,(oa+(ka-1)*ia.tx2width/2+sa)*ja,(za-ia.by/2-1)*ma,ia.tx2width*ja,(ia.by+2)*ma))})}function h(W,aa){function ja(na){return na||q(na)&&0===na}function ma(na,oa,sa){oa=la(oa,sa);ja(oa)&&(W[na]=oa)}var ia=W.index,
ra=W.trace||{},wa=W.cd[0],pa=W.cd[ia]||{},la=Array.isArray(ia)?function(na,oa){na=w.castOption(wa,ia,na);return ja(na)?na:w.extractOption({},ra,"",oa)}:function(na,oa){return w.extractOption(pa,ra,na,oa)};ma("hoverinfo","hi","hoverinfo");ma("bgcolor","hbg","hoverlabel.bgcolor");ma("borderColor","hbc","hoverlabel.bordercolor");ma("fontFamily","htf","hoverlabel.font.family");ma("fontSize","hts","hoverlabel.font.size");ma("fontColor","htc","hoverlabel.font.color");ma("nameLength","hnl","hoverlabel.namelength");
ma("textAlign","hta","hoverlabel.align");W.posref="y"===aa||"closest"===aa&&"h"===ra.orientation?W.xa._offset+(W.x0+W.x1)/2:W.ya._offset+(W.y0+W.y1)/2;W.x0=w.constrain(W.x0,0,W.xa._length);W.x1=w.constrain(W.x1,0,W.xa._length);W.y0=w.constrain(W.y0,0,W.ya._length);W.y1=w.constrain(W.y1,0,W.ya._length);void 0!==W.xLabelVal&&(W.xLabel="xLabel"in W?W.xLabel:F.hoverLabelText(W.xa,W.xLabelVal,ra.xhoverformat),W.xVal=W.xa.c2d(W.xLabelVal));void 0!==W.yLabelVal&&(W.yLabel="yLabel"in W?W.yLabel:F.hoverLabelText(W.ya,
W.yLabelVal,ra.yhoverformat),W.yVal=W.ya.c2d(W.yLabelVal));void 0!==W.zLabelVal&&void 0===W.zLabel&&(W.zLabel=String(W.zLabelVal));if(!(isNaN(W.xerr)||"log"===W.xa.type&&0>=W.xerr)){var ka=F.tickText(W.xa,W.xa.c2l(W.xerr),"hover").text;W.xLabel=void 0!==W.xerrneg?W.xLabel+(" +"+ka+" / -"+F.tickText(W.xa,W.xa.c2l(W.xerrneg),"hover").text):W.xLabel+("  "+ka);"x"===aa&&(W.distance+=1)}isNaN(W.yerr)||"log"===W.ya.type&&0>=W.yerr||(ka=F.tickText(W.ya,W.ya.c2l(W.yerr),"hover").text,W.yLabel=void 0!==W.yerrneg?
W.yLabel+(" +"+ka+" / -"+F.tickText(W.ya,W.ya.c2l(W.yerrneg),"hover").text):W.yLabel+("  "+ka),"y"===aa&&(W.distance+=1));(aa=W.hoverinfo||W.trace.hoverinfo)&&"all"!==aa&&(aa=Array.isArray(aa)?aa:aa.split("+"),-1===aa.indexOf("x")&&(W.xLabel=void 0),-1===aa.indexOf("y")&&(W.yLabel=void 0),-1===aa.indexOf("z")&&(W.zLabel=void 0),-1===aa.indexOf("text")&&(W.text=void 0),-1===aa.indexOf("name")&&(W.name=void 0));return W}function r(W,aa,ja){var ma=ja.container,ia=ja.fullLayout,ra=ia._size;ja=ja.event;
var wa=!!aa.hLinePoint,pa=!!aa.vLinePoint;ma.selectAll(".spikeline").remove();if(pa||wa){ia=v.combine(ia.plot_bgcolor,ia.paper_bgcolor);if(wa){var la=aa.hLinePoint;var ka=la&&la.xa;wa=la&&la.ya;if("cursor"===wa.spikesnap){var na=ja.pointerX;ka=ja.pointerY}else na=ka._offset+la.x,ka=wa._offset+la.y;var oa=1.5>t.readability(la.color,ia)?v.contrast(ia):la.color;la=wa.spikemode;var sa=wa.spikethickness;oa=wa.spikecolor||oa;var za=F.getPxPosition(W,wa);if(-1!==la.indexOf("toaxis")||-1!==la.indexOf("across")){if(-1!==
la.indexOf("toaxis")){var Ha=za;var Wa=na}-1!==la.indexOf("across")&&(Ha=wa._counterDomainMin,Wa=wa._counterDomainMax,"free"===wa.anchor&&(Ha=Math.min(Ha,wa.position),Wa=Math.max(Wa,wa.position)),Ha=ra.l+Ha*ra.w,Wa=ra.l+Wa*ra.w);ma.insert("line",":first-child").attr({x1:Ha,x2:Wa,y1:ka,y2:ka,"stroke-width":sa,stroke:oa,"stroke-dasharray":C.dashStyle(wa.spikedash,sa)}).classed("spikeline",!0).classed("crisp",!0);ma.insert("line",":first-child").attr({x1:Ha,x2:Wa,y1:ka,y2:ka,"stroke-width":sa+2,stroke:ia}).classed("spikeline",
!0).classed("crisp",!0)}-1!==la.indexOf("marker")&&ma.insert("circle",":first-child").attr({cx:za+("right"!==wa.side?sa:-sa),cy:ka,r:sa,fill:oa}).classed("spikeline",!0)}if(pa){ka=(pa=aa.vLinePoint)&&pa.xa;wa=pa&&pa.ya;"cursor"===ka.spikesnap?(aa=ja.pointerX,wa=ja.pointerY):(aa=ka._offset+pa.x,wa=wa._offset+pa.y);Ha=1.5>t.readability(pa.color,ia)?v.contrast(ia):pa.color;ja=ka.spikemode;pa=ka.spikethickness;Ha=ka.spikecolor||Ha;W=F.getPxPosition(W,ka);if(-1!==ja.indexOf("toaxis")||-1!==ja.indexOf("across")){if(-1!==
ja.indexOf("toaxis")){var Za=W;var bb=wa}-1!==ja.indexOf("across")&&(bb=ka._counterDomainMin,Za=ka._counterDomainMax,"free"===ka.anchor&&(bb=Math.min(bb,ka.position),Za=Math.max(Za,ka.position)),Za=ra.t+(1-Za)*ra.h,bb=ra.t+(1-bb)*ra.h);ma.insert("line",":first-child").attr({x1:aa,x2:aa,y1:Za,y2:bb,"stroke-width":pa,stroke:Ha,"stroke-dasharray":C.dashStyle(ka.spikedash,pa)}).classed("spikeline",!0).classed("crisp",!0);ma.insert("line",":first-child").attr({x1:aa,x2:aa,y1:Za,y2:bb,"stroke-width":pa+
2,stroke:ia}).classed("spikeline",!0).classed("crisp",!0)}-1!==ja.indexOf("marker")&&ma.insert("circle",":first-child").attr({cx:aa,cy:W-("top"!==ka.side?pa:-pa),r:pa,fill:Ha}).classed("spikeline",!0)}}}function l(W,aa,ja){if(!ja||ja.length!==W._hoverdata.length)return!0;for(aa=ja.length-1;0<=aa;aa--){var ma=ja[aa],ia=W._hoverdata[aa];if(ma.curveNumber!==ia.curveNumber||String(ma.pointNumber)!==String(ia.pointNumber)||String(ma.pointNumbers)!==String(ia.pointNumbers))return!0}return!1}function c(W,
aa){return A.plainText(W||"",{len:aa,allowedTags:"br sub sup b i em".split(" ")})}function d(W,aa){aa=aa.charAt(0);for(var ja=[],ma=[],ia=[],ra=0;ra<W.length;ra++){var wa=W[ra];J.traceIs(wa.trace,"bar-like")||J.traceIs(wa.trace,"box-violin")?ia.push(wa):wa.trace[aa+"period"]?ma.push(wa):ja.push(wa)}return ja.concat(ma).concat(ia)}function e(W,aa,ja){var ma=aa[W+"a"],ia=aa[W+"Val"],ra=aa.cd[0];if("category"===ma.type)ia=ma._categoriesMap[ia];else if("date"===ma.type){var wa=aa.trace[W+"periodalignment"];
if(wa){aa=aa.cd[aa.index];var pa=aa[W+"Start"];void 0===pa&&(pa=aa[W]);var la=aa[W+"End"];void 0===la&&(la=aa[W]);W=la-pa;"end"===wa?ia+=W:"middle"===wa&&(ia+=W/2)}ia=ma.d2c(ia)}ra&&ra.t&&ra.t.posLetter===ma._id&&("group"===ja.boxmode||"group"===ja.violinmode)&&(ia+=ra.t.dPos);return ia}var f=b("@plotly/d3"),q=b("fast-isnumeric"),t=b("tinycolor2"),w=b("../../lib"),x=w.strTranslate,z=w.strRotate,B=b("../../lib/events"),A=b("../../lib/svg_text_utils"),D=b("../../lib/override_cursor"),C=b("../drawing"),
v=b("../color"),y=b("../dragelement"),F=b("../../plots/cartesian/axes"),J=b("../../registry"),K=b("./helpers"),M=b("./constants"),H=b("../legend/defaults"),O=b("../legend/draw"),I=M.YANGLE;b=Math.PI*I/180;var L=1/Math.sin(b),Q=Math.cos(b),Z=Math.sin(b),ba=M.HOVERARROWSIZE,V=M.HOVERTEXTPAD,S={box:!0,ohlc:!0,violin:!0,candlestick:!0},T={scatter:!0,scattergl:!0,splom:!0};G.hover=function(W,aa,ja,ma){W=w.getGraphDiv(W);w.throttle(W._fullLayout._uid+M.HOVERID,M.HOVERMINTIME,function(){p(W,aa,ja,ma)})};
G.loneHover=function(W,aa){var ja=!0;Array.isArray(W)||(ja=!1,W=[W]);W=W.map(function(pa){return{color:pa.color||v.defaultLine,x0:pa.x0||pa.x||0,x1:pa.x1||pa.x||0,y0:pa.y0||pa.y||0,y1:pa.y1||pa.y||0,xLabel:pa.xLabel,yLabel:pa.yLabel,zLabel:pa.zLabel,text:pa.text,name:pa.name,idealAlign:pa.idealAlign,borderColor:pa.borderColor,fontFamily:pa.fontFamily,fontSize:pa.fontSize,fontColor:pa.fontColor,nameLength:pa.nameLength,textAlign:pa.textAlign,trace:pa.trace||{index:0,hoverinfo:""},xa:{_offset:0},ya:{_offset:0},
index:0,hovertemplate:pa.hovertemplate||!1,eventData:pa.eventData||!1,hovertemplateLabels:pa.hovertemplateLabels||!1}});var ma=f.select(aa.container),ia=aa.outerContainer?f.select(aa.outerContainer):ma;ma={hovermode:"closest",rotateLabels:!1,bgColor:aa.bgColor||v.background,container:ma,outerContainer:ia};W=k(W,ma,aa.gd);var ra=0,wa=0;W.sort(function(pa,la){return pa.y0-la.y0}).each(function(pa,la){var ka=pa.y0-pa.by/2;pa.offset=ka-5<ra?ra-ka+5:0;ra=ka+pa.by+pa.offset;la===aa.anchorIndex&&(wa=pa.offset)}).each(function(pa){pa.offset-=
wa});g(W,ma.rotateLabels,aa.gd._fullLayout._invScaleX,aa.gd._fullLayout._invScaleY);return ja?W:W.node()};var fa=/<extra>([\s\S]*)<\/extra>/},{"../../lib":803,"../../lib/events":792,"../../lib/override_cursor":814,"../../lib/svg_text_utils":829,"../../plots/cartesian/axes":854,"../../registry":931,"../color":666,"../dragelement":685,"../drawing":688,"../legend/defaults":718,"../legend/draw":719,"./constants":700,"./helpers":702,"@plotly/d3":58,"fast-isnumeric":249,tinycolor2:598}],704:[function(b,
N,G){var p=b("../../lib"),n=b("../color"),k=b("./helpers").isUnifiedHover;N.exports=function(m,a,g,h){function r(l){h.font[l]||(h.font[l]=a.legend?a.legend.font[l]:a.font[l])}h=h||{};a&&k(a.hovermode)&&(h.font||(h.font={}),r("size"),r("family"),r("color"),a.legend?(h.bgcolor||(h.bgcolor=n.combine(a.legend.bgcolor,a.paper_bgcolor)),h.bordercolor||(h.bordercolor=a.legend.bordercolor)):h.bgcolor||(h.bgcolor=a.paper_bgcolor));g("hoverlabel.bgcolor",h.bgcolor);g("hoverlabel.bordercolor",h.bordercolor);
g("hoverlabel.namelength",h.namelength);p.coerceFont(g,"hoverlabel.font",h.font);g("hoverlabel.align",h.align)}},{"../../lib":803,"../color":666,"./helpers":702}],705:[function(b,N,G){var p=b("../../lib"),n=b("./layout_attributes");N.exports=function(k,m){function a(g,h){return void 0!==m[g]?m[g]:p.coerce(k,m,n,g,h)}a("clickmode");return a("hovermode")}},{"../../lib":803,"./layout_attributes":707}],706:[function(b,N,G){var p=b("@plotly/d3"),n=b("../../lib");G=b("../dragelement");var k=b("./helpers"),
m=b("./layout_attributes"),a=b("./hover");N.exports={moduleType:"component",name:"fx",constants:b("./constants"),schema:{layout:m},attributes:b("./attributes"),layoutAttributes:m,supplyLayoutGlobalDefaults:b("./layout_global_defaults"),supplyDefaults:b("./defaults"),supplyLayoutDefaults:b("./layout_defaults"),calc:b("./calc"),getDistanceFunction:k.getDistanceFunction,getClosest:k.getClosest,inbox:k.inbox,quadrature:k.quadrature,appendArrayPointValue:k.appendArrayPointValue,castHoverOption:function(g,
h,r){return n.castOption(g,h,"hoverlabel."+r)},castHoverinfo:function(g,h,r){return n.castOption(g,r,"hoverinfo",function(l){return n.coerceHoverinfo({hoverinfo:l},{_module:g._module},h)})},hover:a.hover,unhover:G.unhover,loneHover:a.loneHover,loneUnhover:function(g){g=n.isD3Selection(g)?g:p.select(g);g.selectAll("g.hovertext").remove();g.selectAll(".spikeline").remove()},click:b("./click")}},{"../../lib":803,"../dragelement":685,"./attributes":697,"./calc":698,"./click":699,"./constants":700,"./defaults":701,
"./helpers":702,"./hover":703,"./layout_attributes":707,"./layout_defaults":708,"./layout_global_defaults":709,"@plotly/d3":58}],707:[function(b,N,G){G=b("./constants");b=b("../../plots/font_attributes")({editType:"none"});b.family.dflt=G.HOVERFONT;b.size.dflt=G.HOVERFONTSIZE;N.exports={clickmode:{valType:"flaglist",flags:["event","select"],dflt:"event",editType:"plot",extras:["none"]},dragmode:{valType:"enumerated",values:["zoom","pan","select","lasso","drawclosedpath","drawopenpath","drawline",
"drawrect","drawcircle","orbit","turntable",!1],dflt:"zoom",editType:"modebar"},hovermode:{valType:"enumerated",values:["x","y","closest",!1,"x unified","y unified"],dflt:"closest",editType:"modebar"},hoverdistance:{valType:"integer",min:-1,dflt:20,editType:"none"},spikedistance:{valType:"integer",min:-1,dflt:-1,editType:"none"},hoverlabel:{bgcolor:{valType:"color",editType:"none"},bordercolor:{valType:"color",editType:"none"},font:b,align:{valType:"enumerated",values:["left","right","auto"],dflt:"auto",
editType:"none"},namelength:{valType:"integer",min:-1,dflt:15,editType:"none"},editType:"none"},selectdirection:{valType:"enumerated",values:["h","v","d","any"],dflt:"any",editType:"none"}}},{"../../plots/font_attributes":883,"./constants":700}],708:[function(b,N,G){var p=b("../../lib"),n=b("./layout_attributes"),k=b("./hovermode_defaults"),m=b("./hoverlabel_defaults");N.exports=function(a,g){function h(d,e){return p.coerce(a,g,n,d,e)}k(a,g)&&(h("hoverdistance"),h("spikedistance"));"select"===h("dragmode")&&
h("selectdirection");var r=g._has("mapbox"),l=g._has("geo"),c=g._basePlotModules.length;"zoom"===g.dragmode&&((r||l)&&1===c||r&&l&&2===c)&&(g.dragmode="pan");m(a,g,h)}},{"../../lib":803,"./hoverlabel_defaults":704,"./hovermode_defaults":705,"./layout_attributes":707}],709:[function(b,N,G){var p=b("../../lib"),n=b("./hoverlabel_defaults"),k=b("./layout_attributes");N.exports=function(m,a){n(m,a,function(g,h){return p.coerce(m,a,k,g,h)})}},{"../../lib":803,"./hoverlabel_defaults":704,"./layout_attributes":707}],
710:[function(b,N,G){function p(l,c,d){c=c[d+"axes"];l=Object.keys((l._splomAxes||{})[d]||{});if(Array.isArray(c))return c;if(l.length)return l}function n(l,c,d,e,f,q){d=c(l+"gap",d);var t=c("domain."+l);c(l+"side",e);l=Array(f);c=t[0];t=(t[1]-c)/(f-d);d=t*(1-d);for(e=0;e<f;e++){var w=c+t*e;l[q?f-1-e:e]=[w,w+d]}return l}function k(l,c,d,e,f){function q(x,z){-1!==c.indexOf(z)&&void 0===e[z]?(t[x]=z,e[z]=x):t[x]=""}var t=Array(d),w;if(Array.isArray(l))for(w=0;w<d;w++)q(w,l[w]);else for(q(0,f),w=1;w<
d;w++)q(w,f+(w+1));return t}var m=b("../../lib");G=b("../../lib/regex").counter;var a=b("../../plots/domain").attributes,g=b("../../plots/cartesian/constants").idRegex,h=b("../../plot_api/plot_template"),r={rows:{valType:"integer",min:1,editType:"plot"},roworder:{valType:"enumerated",values:["top to bottom","bottom to top"],dflt:"top to bottom",editType:"plot"},columns:{valType:"integer",min:1,editType:"plot"},subplots:{valType:"info_array",freeLength:!0,dimensions:2,items:{valType:"enumerated",values:[G("xy").toString(),
""],editType:"plot"},editType:"plot"},xaxes:{valType:"info_array",freeLength:!0,items:{valType:"enumerated",values:[g.x.toString(),""],editType:"plot"},editType:"plot"},yaxes:{valType:"info_array",freeLength:!0,items:{valType:"enumerated",values:[g.y.toString(),""],editType:"plot"},editType:"plot"},pattern:{valType:"enumerated",values:["independent","coupled"],dflt:"coupled",editType:"plot"},xgap:{valType:"number",min:0,max:1,editType:"plot"},ygap:{valType:"number",min:0,max:1,editType:"plot"},domain:a({name:"grid",
editType:"plot",noGridCell:!0},{}),xside:{valType:"enumerated",values:["bottom","bottom plot","top plot","top"],dflt:"bottom plot",editType:"plot"},yside:{valType:"enumerated",values:["left","left plot","right plot","right"],dflt:"left plot",editType:"plot"},editType:"plot"};N.exports={moduleType:"component",name:"grid",schema:{layout:{grid:r}},layoutAttributes:r,sizeDefaults:function(l,c){function d(v,y){return m.coerce(e,A,r,v,y)}var e=l.grid||{},f=p(c,e,"x"),q=p(c,e,"y");if(l.grid||f||q){l=Array.isArray(e.subplots)&&
Array.isArray(e.subplots[0]);var t=Array.isArray(f),w=Array.isArray(q),x=t&&f!==e.xaxes&&w&&q!==e.yaxes;if(l){var z=e.subplots.length;var B=e.subplots[0].length}else w&&(z=q.length),t&&(B=f.length);var A=h.newContainer(c,"grid");f=d("rows",z);B=d("columns",B);if(1<f*B){l||t||w||"independent"===d("pattern")&&(l=!0);A._hasSubplotGrid=l;t="top to bottom"===d("roworder");w=l?.3:.1;if(x&&c._splomGridDflt){var D=c._splomGridDflt.xside;var C=c._splomGridDflt.yside}A._domains={x:n("x",d,l?.2:.1,D,B),y:n("y",
d,w,C,f,t)}}else delete c.grid}},contentDefaults:function(l,c){var d=c.grid;if(d&&d._domains){var e=l.grid||{};l=c._subplots;var f=d._hasSubplotGrid,q=d.rows,t=d.columns,w="independent"===d.pattern,x,z=d._axisMap={};if(f){var B=e.subplots||[];var A=d.subplots=Array(q);var D=1;for(c=0;c<q;c++){var C=A[c]=Array(t),v=B[c]||[];for(x=0;x<t;x++)if(w?(e=1===D?"xy":"x"+D+"y"+D,D++):e=v[x],C[x]="",-1!==l.cartesian.indexOf(e)){var y=e.indexOf("y");var F=e.slice(0,y);y=e.slice(y);void 0!==z[F]&&z[F]!==x||void 0!==
z[y]&&z[y]!==c||(C[x]=e,z[F]=x,z[y]=c)}}}else y=p(c,e,"x"),c=p(c,e,"y"),d.xaxes=k(y,l.xaxis,t,z,"x"),d.yaxes=k(c,l.yaxis,q,z,"y");w=d._anchors={};x="top to bottom"===d.roworder;for(var J in z)if(c=J.charAt(0),e=d[c+"side"],8>e.length)w[J]="free";else if("x"===c)if("t"===e.charAt(0)===x?(c=0,B=1,D=q):(c=q-1,D=B=-1),f)for(F=z[J];c!==D;c+=B){if(e=A[c][F])if(y=e.indexOf("y"),e.slice(0,y)===J){w[J]=e.slice(y);break}}else for(;c!==D;c+=B){if(y=d.yaxes[c],-1!==l.cartesian.indexOf(J+y)){w[J]=y;break}}else if("l"===
e.charAt(0)?(c=0,B=1,D=t):(c=t-1,D=B=-1),f)for(F=z[J];c!==D;c+=B){if(e=A[F][c])if(y=e.indexOf("y"),e.slice(y)===J){w[J]=e.slice(0,y);break}}else for(;c!==D;c+=B)if(F=d.xaxes[c],-1!==l.cartesian.indexOf(F+J)){w[J]=F;break}}}}},{"../../lib":803,"../../lib/regex":820,"../../plot_api/plot_template":843,"../../plots/cartesian/constants":861,"../../plots/domain":882}],711:[function(b,N,G){G=b("../../plots/cartesian/constants");var p=b("../../plot_api/plot_template").templatedArray;b("../../constants/axis_placeable_objects");
N.exports=p("image",{visible:{valType:"boolean",dflt:!0,editType:"arraydraw"},source:{valType:"string",editType:"arraydraw"},layer:{valType:"enumerated",values:["below","above"],dflt:"above",editType:"arraydraw"},sizex:{valType:"number",dflt:0,editType:"arraydraw"},sizey:{valType:"number",dflt:0,editType:"arraydraw"},sizing:{valType:"enumerated",values:["fill","contain","stretch"],dflt:"contain",editType:"arraydraw"},opacity:{valType:"number",min:0,max:1,dflt:1,editType:"arraydraw"},x:{valType:"any",
dflt:0,editType:"arraydraw"},y:{valType:"any",dflt:0,editType:"arraydraw"},xanchor:{valType:"enumerated",values:["left","center","right"],dflt:"left",editType:"arraydraw"},yanchor:{valType:"enumerated",values:["top","middle","bottom"],dflt:"top",editType:"arraydraw"},xref:{valType:"enumerated",values:["paper",G.idRegex.x.toString()],dflt:"paper",editType:"arraydraw"},yref:{valType:"enumerated",values:["paper",G.idRegex.y.toString()],dflt:"paper",editType:"arraydraw"},editType:"arraydraw"})},{"../../constants/axis_placeable_objects":772,
"../../plot_api/plot_template":843,"../../plots/cartesian/constants":861}],712:[function(b,N,G){var p=b("fast-isnumeric"),n=b("../../lib/to_log_range");N.exports=function(k,m,a,g){m=m||{};var h="log"===a&&"linear"===m.type;a="linear"===a&&"log"===m.type;if(h||a){k=k._fullLayout.images;a=m._id.charAt(0);for(var r,l,c=0;c<k.length;c++)if(r=k[c],l="images["+c+"].",r[a+"ref"]===m._id){var d=r[a];r=r["size"+a];h?(d=n(d,m.range),r=r/Math.pow(10,d)/2,r=2*Math.log(r+Math.sqrt(1+r*r))/Math.LN10):(d=Math.pow(10,
d),r=d*(Math.pow(10,r/2)-Math.pow(10,-r/2)));p(d)?p(r)||(r=null):r=d=null;g(l+a,d);g(l+"size"+a,r)}}}},{"../../lib/to_log_range":831,"fast-isnumeric":249}],713:[function(b,N,G){function p(g,h,r){function l(q,t){return n.coerce(g,h,a,q,t)}var c=l("source");if(!l("visible",!!c))return h;l("layer");l("xanchor");l("yanchor");l("sizex");l("sizey");l("sizing");l("opacity");r={_fullLayout:r};c=["x","y"];for(var d=0;2>d;d++){var e=c[d],f=k.coerceRef(g,h,r,e,"paper",void 0);"paper"!==f&&k.getFromId(r,f)._imgIndices.push(h._index);
k.coercePosition(h,r,l,f,e,0)}return h}var n=b("../../lib"),k=b("../../plots/cartesian/axes"),m=b("../../plots/array_container_defaults"),a=b("./attributes");N.exports=function(g,h){m(g,h,{name:"images",handleItemDefaults:p})}},{"../../lib":803,"../../plots/array_container_defaults":849,"../../plots/cartesian/axes":854,"./attributes":711}],714:[function(b,N,G){var p=b("@plotly/d3"),n=b("../drawing"),k=b("../../plots/cartesian/axes"),m=b("../../plots/cartesian/axis_ids"),a=b("../../constants/xmlns_namespaces");
N.exports=function(g){function h(z){var B=p.select(this);if(this._imgSrc!==z.source)if(B.attr("xmlns",a.svg),z.source&&"data:"===z.source.slice(0,5))B.attr("xlink:href",z.source),this._imgSrc=z.source;else{var A=new Promise(function(D){function C(){B.remove();D()}var v=new Image;this.img=v;v.setAttribute("crossOrigin","anonymous");v.onerror=C;v.onload=function(){var y=document.createElement("canvas");y.width=this.width;y.height=this.height;y.getContext("2d").drawImage(this,0,0);y=y.toDataURL("image/png");
B.attr("xlink:href",y);D()};B.on("error",C);this._imgSrc=v.src=z.source}.bind(this));g._promises.push(A)}}function r(z){var B=p.select(this),A=k.getFromId(g,z.xref),D=k.getFromId(g,z.yref),C="domain"===k.getRefType(z.xref),v="domain"===k.getRefType(z.yref),y=l._size;var F=void 0!==A?"string"===typeof z.xref&&C?A._length*z.sizex:Math.abs(A.l2p(z.sizex)-A.l2p(0)):z.sizex*y.w;var J=void 0!==D?"string"===typeof z.yref&&v?D._length*z.sizey:Math.abs(D.l2p(z.sizey)-D.l2p(0)):z.sizey*y.h;var K=F*x.x[z.xanchor].offset,
M=J*x.y[z.yanchor].offset,H=x.x[z.xanchor].sizing+x.y[z.yanchor].sizing;C=void 0!==A?"string"===typeof z.xref&&C?A._length*z.x+A._offset:A.r2p(z.x)+A._offset:z.x*y.w+y.l;C+=K;v=void 0!==D?"string"===typeof z.yref&&v?D._length*(1-z.y)+D._offset:D.r2p(z.y)+D._offset:y.h-z.y*y.h+y.t;switch(z.sizing){case "fill":H+=" slice";break;case "stretch":H="none"}B.attr({x:C,y:v+M,width:F,height:J,preserveAspectRatio:H,opacity:z.opacity});A=A&&"domain"!==k.getRefType(z.xref)?A._id:"";z=D&&"domain"!==k.getRefType(z.yref)?
D._id:"";z=A+z;n.setClipUrl(B,z?"clip"+l._uid+z:null,g)}var l=g._fullLayout,c=[],d={},e=[],f;for(f=0;f<l.images.length;f++){var q=l.images[f];if(q.visible)if("below"===q.layer&&"paper"!==q.xref&&"paper"!==q.yref){var t=m.ref2id(q.xref)+m.ref2id(q.yref);var w=l._plots[t];w?(w.mainplot&&(t=w.mainplot.id),d[t]||(d[t]=[]),d[t].push(q)):e.push(q)}else"above"===q.layer?c.push(q):e.push(q)}var x={x:{left:{sizing:"xMin",offset:0},center:{sizing:"xMid",offset:-.5},right:{sizing:"xMax",offset:-1}},y:{top:{sizing:"YMin",
offset:0},middle:{sizing:"YMid",offset:-.5},bottom:{sizing:"YMax",offset:-1}}};f=l._imageLowerLayer.selectAll("image").data(e);t=l._imageUpperLayer.selectAll("image").data(c);f.enter().append("image");t.enter().append("image");f.exit().remove();t.exit().remove();f.each(function(z){h.bind(this)(z);r.bind(this)(z)});t.each(function(z){h.bind(this)(z);r.bind(this)(z)});c=Object.keys(l._plots);for(f=0;f<c.length;f++)t=c[f],e=l._plots[t],e.imagelayer&&(t=e.imagelayer.selectAll("image").data(d[t]||[]),
t.enter().append("image"),t.exit().remove(),t.each(function(z){h.bind(this)(z);r.bind(this)(z)}))}},{"../../constants/xmlns_namespaces":780,"../../plots/cartesian/axes":854,"../../plots/cartesian/axis_ids":858,"../drawing":688,"@plotly/d3":58}],715:[function(b,N,G){N.exports={moduleType:"component",name:"images",layoutAttributes:b("./attributes"),supplyLayoutDefaults:b("./defaults"),includeBasePlot:b("../../plots/cartesian/include_components")("images"),draw:b("./draw"),convertCoords:b("./convert_coords")}},
{"../../plots/cartesian/include_components":867,"./attributes":711,"./convert_coords":712,"./defaults":713,"./draw":714}],716:[function(b,N,G){G=b("../../plots/font_attributes");b=b("../color/attributes");N.exports={bgcolor:{valType:"color",editType:"legend"},bordercolor:{valType:"color",dflt:b.defaultLine,editType:"legend"},borderwidth:{valType:"number",min:0,dflt:0,editType:"legend"},font:G({editType:"legend"}),orientation:{valType:"enumerated",values:["v","h"],dflt:"v",editType:"legend"},traceorder:{valType:"flaglist",
flags:["reversed","grouped"],extras:["normal"],editType:"legend"},tracegroupgap:{valType:"number",min:0,dflt:10,editType:"legend"},itemsizing:{valType:"enumerated",values:["trace","constant"],dflt:"trace",editType:"legend"},itemwidth:{valType:"number",min:30,dflt:30,editType:"legend"},itemclick:{valType:"enumerated",values:["toggle","toggleothers",!1],dflt:"toggle",editType:"legend"},itemdoubleclick:{valType:"enumerated",values:["toggle","toggleothers",!1],dflt:"toggleothers",editType:"legend"},x:{valType:"number",
min:-2,max:3,editType:"legend"},xanchor:{valType:"enumerated",values:["auto","left","center","right"],dflt:"left",editType:"legend"},y:{valType:"number",min:-2,max:3,editType:"legend"},yanchor:{valType:"enumerated",values:["auto","top","middle","bottom"],editType:"legend"},uirevision:{valType:"any",editType:"none"},valign:{valType:"enumerated",values:["top","middle","bottom"],dflt:"middle",editType:"legend"},title:{text:{valType:"string",dflt:"",editType:"legend"},font:G({editType:"legend"}),side:{valType:"enumerated",
values:["top","left","top left"],editType:"legend"},editType:"legend"},editType:"legend"}},{"../../plots/font_attributes":883,"../color/attributes":665}],717:[function(b,N,G){N.exports={scrollBarWidth:6,scrollBarMinHeight:20,scrollBarColor:"#808BA4",scrollBarMargin:4,scrollBarEnterAttrs:{rx:20,ry:3,width:0,height:0},titlePad:2,itemGap:5}},{}],718:[function(b,N,G){var p=b("../../registry"),n=b("../../lib"),k=b("../../plot_api/plot_template"),m=b("./attributes"),a=b("../../plots/layout_attributes"),
g=b("./helpers");N.exports=function(h,r,l){function c(z,B){return n.coerce(d,x,m,z,B)}for(var d=h.legend||{},e=0,f=!1,q="normal",t=0;t<l.length;t++){var w=l[t];if(w.visible){if(w.showlegend||w._dfltShowLegend&&!(w._module&&w._module.attributes&&w._module.attributes.showlegend&&!1===w._module.attributes.showlegend.dflt))e++,w.showlegend&&(f=!0,(p.traceIs(w,"pie-like")||!0===w._input.showlegend)&&e++);if(p.traceIs(w,"bar")&&"stack"===r.barmode||-1!==["tonextx","tonexty"].indexOf(w.fill))q=g.isGrouped({traceorder:q})?
"grouped+reversed":"reversed";void 0!==w.legendgroup&&""!==w.legendgroup&&(q=g.isReversed({traceorder:q})?"reversed+grouped":"grouped")}}l=n.coerce(h,r,a,"showlegend",f&&1<e);if(!1!==l||d.uirevision){var x=k.newContainer(r,"legend");c("uirevision",r.uirevision);!1!==l&&(c("bgcolor",r.paper_bgcolor),c("bordercolor"),c("borderwidth"),l=n.coerceFont(c,"font",r.font),(e="h"===c("orientation"))?(f=0,p.getComponentMethod("rangeslider","isVisible")(h.xaxis)?(h=1.1,t="bottom"):(h=-.1,t="top")):(f=1.02,h=
1,t="auto"),c("traceorder",q),g.isGrouped(r.legend)&&c("tracegroupgap"),c("itemsizing"),c("itemwidth"),c("itemclick"),c("itemdoubleclick"),c("x",f),c("xanchor"),c("y",h),c("yanchor",t),c("valign"),n.noneOrAll(d,x,["x","y"]),c("title.text")&&(c("title.side",e?"left":"top"),r=n.extendFlat({},l,{size:n.bigFont(l.size)}),n.coerceFont(c,"title.font",r)))}}},{"../../lib":803,"../../plot_api/plot_template":843,"../../plots/layout_attributes":908,"../../registry":931,"./attributes":716,"./helpers":722}],
719:[function(b,N,G){function p(H,O){var I=H._fullLayout,L="legend"+I._uid,Q=O._inHover;if(Q){var Z=O.layer;L+="-hover"}else Z=I._infolayer;if(Z){H._legendMouseDownTime||(H._legendMouseDownTime=0);if(Q){if(!O.entries)return;var ba=J(O.entries,O)}else{if(!H.calcdata)return;ba=I.showlegend&&J(H.calcdata,O)}var V=I.hiddenlabels||[];if(!(Q||I.showlegend&&ba.length))return Z.selectAll(".legend").remove(),I._topdefs.select("#"+L).remove(),q.autoMargin(H,"legend");var S=f.ensureSingle(Z,"g","legend",function(wa){Q||
wa.attr("pointer-events","all")}),T=f.ensureSingleById(I._topdefs,"clipPath",L,function(wa){wa.append("rect")}),fa=f.ensureSingle(S,"rect","bg",function(wa){wa.attr("shape-rendering","crispEdges")});fa.call(B.stroke,O.bordercolor).call(B.fill,O.bgcolor).style("stroke-width",O.borderwidth+"px");var W=f.ensureSingle(S,"g","scrollbox"),aa=O.title;O._titleWidth=0;O._titleHeight=0;if(aa.text){var ja=f.ensureSingle(W,"text","legendtitletext");ja.attr("text-anchor","start").call(z.font,aa.font).text(aa.text);
g(ja,W,H,O,1)}else W.selectAll(".legendtitletext").remove();var ma=f.ensureSingle(S,"rect","scrollbar",function(wa){wa.attr(C.scrollBarEnterAttrs).call(B.fill,C.scrollBarColor)}),ia=W.selectAll("g.groups").data(ba);ia.enter().append("g").attr("class","groups");ia.exit().remove();var ra=ia.selectAll("g.traces").data(f.identity);ra.enter().append("g").attr("class","traces");ra.exit().remove();ra.style("opacity",function(wa){var pa=wa[0].trace;return t.traceIs(pa,"pie-like")?-1!==V.indexOf(wa[0].label)?
.5:1:"legendonly"===pa.visible?.5:1}).each(function(){e.select(this).call(k,H,O)}).call(K,H,O).each(function(){Q||e.select(this).call(a,H)});f.syncOrAsync([q.previousPromises,function(){return r(H,ia,ra,O)},function(){function wa(qb,zb,La){O._scrollY=H._fullLayout.legend._scrollY=qb;z.setTranslate(W,0,-qb);z.setRect(ma,O._width,C.scrollBarMargin+qb*La,C.scrollBarWidth,zb);T.select("rect").attr("y",la+qb)}if(Q||!l(H)){var pa=I._size,la=O.borderwidth,ka=pa.l+pa.w*O.x-y[c(O)]*O._width,na=pa.t+pa.h*(1-
O.y)-y[d(O)]*O._effHeight;if(!Q&&I.margin.autoexpand){var oa=ka,sa=na;ka=f.constrain(ka,0,I.width-O._width);na=f.constrain(na,0,I.height-O._effHeight);ka!==oa&&f.log("Constrain legend.x to make legend fit inside graph");na!==sa&&f.log("Constrain legend.y to make legend fit inside graph")}Q||z.setTranslate(S,ka,na);ma.on(".drag",null);S.on("wheel",null);if(Q||O._height<=O._maxHeight||H._context.staticPlot)ka=O._effHeight,Q&&(ka=O._height),fa.attr({width:O._width-la,height:ka-la,x:la/2,y:la/2}),z.setTranslate(W,
0,0),T.select("rect").attr({width:O._width-2*la,height:ka-2*la,x:la,y:la}),z.setClipUrl(W,L,H),z.setRect(ma,0,0,0,0),delete O._scrollY;else{var za=Math.max(C.scrollBarMinHeight,O._effHeight*O._effHeight/O._height),Ha=O._effHeight-za-2*C.scrollBarMargin,Wa=O._height-O._effHeight,Za=Ha/Wa,bb=Math.min(O._scrollY||0,Wa);fa.attr({width:O._width-2*la+C.scrollBarWidth+C.scrollBarMargin,height:O._effHeight-la,x:la/2,y:la/2});T.select("rect").attr({width:O._width-2*la+C.scrollBarWidth+C.scrollBarMargin,height:O._effHeight-
2*la,x:la,y:la+bb});z.setClipUrl(W,L,H);wa(bb,za,Za);S.on("wheel",function(){bb=f.constrain(O._scrollY+e.event.deltaY/Ha*Wa,0,Wa);wa(bb,za,Za);0!==bb&&bb!==Wa&&e.event.preventDefault()});var sb,hb,ub;ka=e.behavior.drag().on("dragstart",function(){var qb=e.event.sourceEvent;sb="touchstart"===qb.type?qb.changedTouches[0].clientY:qb.clientY;ub=bb}).on("drag",function(){var qb=e.event.sourceEvent;2===qb.buttons||qb.ctrlKey||(hb="touchmove"===qb.type?qb.changedTouches[0].clientY:qb.clientY,bb=f.constrain((hb-
sb)/Za+ub,0,Wa),wa(bb,za,Za))});ma.call(ka);ka=e.behavior.drag().on("dragstart",function(){var qb=e.event.sourceEvent;"touchstart"===qb.type&&(sb=qb.changedTouches[0].clientY,ub=bb)}).on("drag",function(){var qb=e.event.sourceEvent;"touchmove"===qb.type&&(hb=qb.changedTouches[0].clientY,bb=f.constrain((sb-hb)/Za+ub,0,Wa),wa(bb,za,Za))});W.call(ka)}if(H._context.edits.legendPosition){var pb,Ab,tb,vb;S.classed("cursor-move",!0);x.init({element:S.node(),gd:H,prepFn:function(){var qb=z.getTranslate(S);
tb=qb.x;vb=qb.y},moveFn:function(qb,zb){qb=tb+qb;zb=vb+zb;z.setTranslate(S,qb,zb);pb=x.align(qb,0,pa.l,pa.l+pa.w,O.xanchor);Ab=x.align(zb,0,pa.t+pa.h,pa.t,O.yanchor)},doneFn:function(){void 0!==pb&&void 0!==Ab&&t.call("_guiRelayout",H,{"legend.x":pb,"legend.y":Ab})},clickFn:function(qb,zb){var La=Z.selectAll("g.traces").filter(function(){var Ka=this.getBoundingClientRect();return zb.clientX>=Ka.left&&zb.clientX<=Ka.right&&zb.clientY>=Ka.top&&zb.clientY<=Ka.bottom});0<La.size()&&n(H,S,La,qb,zb)}})}}}],
H)}}function n(H,O,I,L,Q){var Z=I.data()[0][0].trace;Q={event:Q,node:I.node(),curveNumber:Z.index,expandedIndex:Z._expandedIndex,data:H.data,layout:H.layout,frames:H._transitionData._frames,config:H._context,fullData:H._fullData,fullLayout:H._fullLayout};Z._group&&(Q.group=Z._group);t.traceIs(Z,"pie-like")&&(Q.label=I.datum()[0].label);!1!==w.triggerHandler(H,"plotly_legendclick",Q)&&(1===L?O._clickTimeout=setTimeout(function(){H._fullLayout&&D(I,H,L)},H._context.doubleClickDelay):2===L&&(O._clickTimeout&&
clearTimeout(O._clickTimeout),H._legendMouseDownTime=0,!1!==w.triggerHandler(H,"plotly_legenddoubleclick",Q)&&D(I,H,L)))}function k(H,O,I){var L=H.data()[0][0],Q=L.trace,Z=t.traceIs(Q,"pie-like"),ba=!I._inHover&&O._context.edits.legendText&&!Z,V=I._maxNameLength;if(L.groupTitle){Z=L.groupTitle.text;var S=L.groupTitle.font}else S=I.font,I.entries?Z=L.text:(Z=Z?L.label:Q.name,Q._meta&&(Z=f.templateString(Z,Q._meta)));var T=f.ensureSingle(H,"text","legendtext");T.attr("text-anchor","start").call(z.font,
S).text(ba?m(Z,V):Z);A.positionText(T,I.itemwidth+2*C.itemGap,0);if(ba)T.call(A.makeEditable,{gd:O,text:Z}).call(g,H,O,I).on("edit",function(fa){this.text(m(fa,V)).call(g,H,O,I);var W=L.trace._fullInput||{},aa={};t.hasTransform(W,"groupby")?(aa=t.getTransformIndices(W,"groupby"),W=f.keyedContainer(W,"transforms["+aa[aa.length-1]+"].styles","target","value.name"),W.set(L.trace._group,fa),aa=W.constructUpdate()):aa.name=fa;return t.call("_guiRestyle",O,aa,Q.index)});else g(T,H,O,I)}function m(H,O){O=
Math.max(4,O);if(H&&H.trim().length>=O/2)return H;H=H||"";for(O-=H.length;0<O;O--)H+=" ";return H}function a(H,O){var I=O._context.doubleClickDelay,L,Q=1,Z=f.ensureSingle(H,"rect","legendtoggle",function(ba){O._context.staticPlot||ba.style("cursor","pointer").attr("pointer-events","all");ba.call(B.fill,"rgba(0,0,0,0)")});O._context.staticPlot||(Z.on("mousedown",function(){L=(new Date).getTime();L-O._legendMouseDownTime<I?Q+=1:(Q=1,O._legendMouseDownTime=L)}),Z.on("mouseup",function(){if(!O._dragged&&
!O._editing){var ba=O._fullLayout.legend;(new Date).getTime()-O._legendMouseDownTime>I&&(Q=Math.max(Q-1,1));n(O,ba,H,Q,e.event)}}))}function g(H,O,I,L,Q){L._inHover&&H.attr("data-notex",!0);A.convertToTspans(H,I,function(){var Z=L,ba=O.data()[0][0];if(Z._inHover||!ba||ba.trace.showlegend){var V=O.select("g[class*\x3dmath-group]"),S=V.node();Z||(Z=I._fullLayout.legend);var T=Z.borderwidth,fa=(1===Q?Z.title.font:ba.groupTitle?ba.groupTitle.font:Z.font).size*v;if(S){var W=z.bBox(S);S=W.height;W=W.width;
1===Q?z.setTranslate(V,T,T+.75*S):z.setTranslate(V,0,.25*S)}else{V=O.select(1===Q?".legendtitletext":".legendtext");var aa=A.lineCount(V);W=V.node();S=fa*aa;W=W?z.bBox(W).width:0;1===Q?("left"===Z.title.side&&(W+=2*C.itemGap),A.positionText(V,T+C.titlePad,T+fa)):(T=2*C.itemGap+Z.itemwidth,ba.groupTitle&&(T=C.itemGap,W-=Z.itemwidth),A.positionText(V,T,-fa*((aa-1)/2-.3)))}1===Q?(Z._titleWidth=W,Z._titleHeight=S):(ba.lineHeight=fa,ba.height=Math.max(S,16)+3,ba.width=W)}else O.remove()})}function h(H){var O=
0,I=0,L=H.title.side;L&&(-1!==L.indexOf("left")&&(O=H._titleWidth),-1!==L.indexOf("top")&&(I=H._titleHeight));return[O,I]}function r(H,O,I,L){var Q=H._fullLayout;L||(L=Q.legend);var Z=Q._size,ba=M.isVertical(L),V=M.isGrouped(L),S=L.borderwidth,T=2*S,fa=C.itemGap,W=L.itemwidth+2*fa,aa=2*(S+fa),ja=d(L),ma=0>L.y||0===L.y&&"top"===ja,ia=1<L.y||1===L.y&&"bottom"===ja,ra=L.tracegroupgap;L._maxHeight=Math.max(ma||ia?Q.height/2:Z.h,30);var wa=0;L._width=0;L._height=0;var pa=h(L);if(ba)I.each(function(pb){var Ab=
pb[0].height;z.setTranslate(this,S+pa[0],S+pa[1]+L._height+Ab/2+fa);L._height+=Ab;L._width=Math.max(L._width,pb[0].width)}),wa=W+L._width,L._width+=fa+W+T,L._height+=aa,V&&(O.each(function(pb,Ab){z.setTranslate(this,0,Ab*L.tracegroupgap)}),L._height+=(L._lgroupsLength-1)*L.tracegroupgap);else{ja=c(L);var la=1<L.x||1===L.x&&"left"===ja;ma=ia||ma;Q=Q.width/2;L._maxWidth=Math.max(0>L.x||0===L.x&&"right"===ja?ma&&"left"===ja?Z.l+Z.w:Q:la?ma&&"right"===ja?Z.r+Z.w:Q:Z.w,2*W);var ka=0,na=0;I.each(function(pb){pb=
pb[0].width+W;ka=Math.max(ka,pb);na+=pb});wa=null;var oa=0;if(V){var sa=0,za=0,Ha=0;O.each(function(){var pb=0,Ab=0;e.select(this).selectAll("g.traces").each(function(vb){var qb=vb[0].height;z.setTranslate(this,pa[0],pa[1]+S+fa+qb/2+Ab);Ab+=qb;pb=Math.max(pb,W+vb[0].width)});sa=Math.max(sa,Ab);var tb=pb+fa;tb+S+za>L._maxWidth&&(oa=Math.max(oa,za),za=0,Ha+=sa+ra,sa=Ab);z.setTranslate(this,za,Ha);za+=tb});L._width=Math.max(oa,za)+S;L._height=Ha+sa+aa}else{O=I.size();var Wa=na+T+(O-1)*fa<L._maxWidth,
Za=0,bb=0,sb=0,hb=0;I.each(function(pb){var Ab=pb[0].height;pb=W+pb[0].width;var tb=(Wa?pb:ka)+fa;tb+S+bb-fa>=L._maxWidth&&(oa=Math.max(oa,hb),bb=0,sb+=Za,L._height+=Za,Za=0);z.setTranslate(this,pa[0]+S+bb,pa[1]+S+sb+Ab/2+fa);hb=bb+pb+fa;bb+=tb;Za=Math.max(Za,Ab)});Wa?(L._width=bb+T,L._height=Za+aa):(L._width=Math.max(oa,hb)+T,L._height+=Za+aa)}}L._width=Math.ceil(Math.max(L._width+pa[0],L._titleWidth+2*(S+C.titlePad)));L._height=Math.ceil(Math.max(L._height+pa[1],L._titleHeight+2*(S+C.itemGap)));
L._effHeight=Math.min(L._height,L._maxHeight);H=H._context.edits;var ub=H.legendText||H.legendPosition;I.each(function(pb){var Ab=e.select(this).select(".legendtoggle"),tb=pb[0].height;pb=ub?W:wa||W+pb[0].width;ba||(pb+=fa/2);z.setRect(Ab,0,-tb/2,pb,tb)})}function l(H){var O=H._fullLayout.legend,I=c(O),L=d(O);return q.autoMargin(H,"legend",{x:O.x,y:O.y,l:O._width*y[I],r:O._width*F[I],b:O._effHeight*F[L],t:O._effHeight*y[L]})}function c(H){return f.isRightAnchor(H)?"right":f.isCenterAnchor(H)?"center":
"left"}function d(H){return f.isBottomAnchor(H)?"bottom":f.isMiddleAnchor(H)?"middle":"top"}var e=b("@plotly/d3"),f=b("../../lib"),q=b("../../plots/plots"),t=b("../../registry"),w=b("../../lib/events"),x=b("../dragelement"),z=b("../drawing"),B=b("../color"),A=b("../../lib/svg_text_utils"),D=b("./handle_click"),C=b("./constants");G=b("../../constants/alignment");var v=G.LINE_SPACING,y=G.FROM_TL,F=G.FROM_BR,J=b("./get_legend_data"),K=b("./style"),M=b("./helpers");N.exports=function(H,O){O||(O=H._fullLayout.legend||
{});return p(H,O)}},{"../../constants/alignment":771,"../../lib":803,"../../lib/events":792,"../../lib/svg_text_utils":829,"../../plots/plots":917,"../../registry":931,"../color":666,"../dragelement":685,"../drawing":688,"./constants":717,"./get_legend_data":720,"./handle_click":721,"./helpers":722,"./style":724,"@plotly/d3":58}],720:[function(b,N,G){var p=b("../../registry"),n=b("./helpers");N.exports=function(k,m){function a(A,D){""!==A&&n.isGrouped(m)?-1===l.indexOf(A)?(l.push(A),c=!0,r[A]=[D]):
r[A].push(D):(A="~~i"+e,l.push(A),r[A]=[D],e++)}var g=n.isGrouped(m),h=n.isReversed(m),r={},l=[],c=!1,d={},e=0,f=0,q;for(q=0;q<k.length;q++){var t=k[q];var w=t[0];var x=w.trace,z=x.legendgroup;if(m._inHover||x.visible&&x.showlegend)if(p.traceIs(x,"pie-like"))for(d[z]||(d[z]={}),w=0;w<t.length;w++){var B=t[w].label;d[z][B]||(a(z,{label:B,color:t[w].color,i:t[w].i,trace:x,pts:t[w].pts}),d[z][B]=!0,f=Math.max(f,(B||"").length))}else a(z,w),f=Math.max(f,(x.name||"").length)}if(!l.length)return[];w=!c||
!g;k=[];for(q=0;q<l.length;q++)g=r[l[q]],w?k.push(g[0]):k.push(g);w&&(k=[k]);for(q=0;q<k.length;q++){g=Infinity;for(w=0;w<k[q].length;w++)d=k[q][w].trace.legendrank,g>d&&(g=d);k[q][0]._groupMinRank=g;k[q][0]._preGroupSort=q}g=function(A,D){return A.trace.legendrank-D.trace.legendrank||A._preSort-D._preSort};k.forEach(function(A,D){A[0]._preGroupSort=D});k.sort(function(A,D){return A[0]._groupMinRank-D[0]._groupMinRank||A[0]._preGroupSort-D[0]._preGroupSort});for(q=0;q<k.length;q++){k[q].forEach(function(A,
D){A._preSort=D});k[q].sort(g);d=k[q][0].trace;t=null;for(w=0;w<k[q].length;w++)if((x=k[q][w].trace.legendgrouptitle)&&x.text){t=x;break}h&&k[q].reverse();if(t){x=!1;for(w=0;w<k[q].length;w++)if(p.traceIs(k[q][w].trace,"pie-like")){x=!0;break}k[q].unshift({i:-1,groupTitle:t,noClick:x,trace:{showlegend:d.showlegend,legendgroup:d.legendgroup,visible:d.visible}})}for(w=0;w<k[q].length;w++)k[q][w]=[k[q][w]]}m._lgroupsLength=k.length;m._maxNameLength=f;return k}},{"../../registry":931,"./helpers":722}],
721:[function(b,N,G){var p=b("../../lib"),n=b("../../registry"),k=!0;N.exports=function(m,a,g){function h(C,v,y){var F=t.indexOf(C),J=q[v];J||(J=q[v]=[]);-1===t.indexOf(C)&&(t.push(C),F=t.length-1);J[F]=y;return F}function r(C,v){var y=C._fullInput;if(n.hasTransform(y,"groupby")){var F=w[y.index];F||(F=n.getTransformIndices(y,"groupby"),F=p.keyedContainer(y,"transforms["+F[F.length-1]+"].styles","target","value.visible"),w[y.index]=F);var J=F.get(C._group);void 0===J&&(J=!0);!1!==J&&F.set(C._group,
v);x[y.index]=h(y.index,"visible",!1===y.visible?!1:!0)}else h(y.index,"visible",!1===y.visible?!1:v)}var l=a._fullLayout;if(!a._dragged&&!a._editing){var c=l.legend.itemclick,d=l.legend.itemdoubleclick;1===g&&"toggle"===c&&"toggleothers"===d&&k&&a.data&&a._context.showTips&&p.notifier(p._(a,"Double-click on legend to isolate one trace"),"long");k=!1;var e;1===g?e=c:2===g&&(e=d);if(e){var f=l.hiddenlabels?l.hiddenlabels.slice():[];m=m.data()[0][0];if(!m.groupTitle||!m.noClick){g=a._fullData;l=m.trace;
c=l.legendgroup;var q={},t=[],w=[],x=[];if(n.traceIs(l,"pie-like")){var z=m.label;m=f.indexOf(z);"toggle"===e?-1===m?f.push(z):f.splice(m,1):"toggleothers"===e&&(f=[],a.calcdata[0].forEach(function(C){z!==C.label&&f.push(C.label)}),a._fullLayout.hiddenlabels&&a._fullLayout.hiddenlabels.length===f.length&&-1===m&&(f=[]));n.call("_guiRelayout",a,"hiddenlabels",f)}else{d=c&&c.length;var B=[];if(d)for(m=0;m<g.length;m++){var A=g[m];A.visible&&A.legendgroup===c&&B.push(m)}if("toggle"===e){switch(l.visible){case !0:var D=
"legendonly";break;case !1:D=!1;break;case "legendonly":D=!0}if(d)for(m=0;m<g.length;m++)!1!==g[m].visible&&g[m].legendgroup===c&&r(g[m],D);else r(l,D)}else if("toggleothers"===e){B=!0;for(m=0;m<g.length;m++)if(A=g[m]===l,e=!0!==g[m].showlegend,!(A||e||(A=d&&g[m].legendgroup===c,A||!0!==g[m].visible||n.traceIs(g[m],"notLegendIsolatable")))){B=!1;break}for(m=0;m<g.length;m++)if(!1!==g[m].visible&&!n.traceIs(g[m],"notLegendIsolatable"))switch(l.visible){case "legendonly":r(g[m],!0);break;case !0:D=
B?!0:"legendonly",A=g[m]===l,e=!0!==g[m].showlegend&&!g[m].legendgroup,A=A||d&&g[m].legendgroup===c,r(g[m],A||e?!0:D)}}for(m=0;m<w.length;m++)if(e=w[m])for(c=e.constructUpdate(),D=Object.keys(c),e=0;e<D.length;e++)g=D[e],l=q[g]=q[g]||[],l[x[m]]=c[g];l=Object.keys(q);for(m=0;m<l.length;m++)for(g=l[m],e=0;e<t.length;e++)q[g].hasOwnProperty(e)||(q[g][e]=void 0);n.call("_guiRestyle",a,q,t)}}}}}},{"../../lib":803,"../../registry":931}],722:[function(b,N,G){G.isGrouped=function(p){return-1!==(p.traceorder||
"").indexOf("grouped")};G.isVertical=function(p){return"h"!==p.orientation};G.isReversed=function(p){return-1!==(p.traceorder||"").indexOf("reversed")}},{}],723:[function(b,N,G){N.exports={moduleType:"component",name:"legend",layoutAttributes:b("./attributes"),supplyLayoutDefaults:b("./defaults"),draw:b("./draw"),style:b("./style")}},{"./attributes":716,"./defaults":718,"./draw":719,"./style":724}],724:[function(b,N,G){function p(q,t){return(t?"radial":"horizontal")+(q?"":"reversed")}function n(q){var t=
q[0].trace;q=t.contours;var w=c.hasLines(t),x=c.hasMarkers(t);t=t.visible&&t.fill&&"none"!==t.fill;var z=!1,B=!1;if(q){var A=q.coloring;"lines"===A?z=!0:w="none"===A||"heatmap"===A||q.showlines;if("constraint"===q.type)t="\x3d"!==q._operation;else if("fill"===A||"heatmap"===A)B=!0}return{showMarker:x,showLine:w,showFill:t,showGradientLine:z,showGradientFill:B,anyLine:w||z,anyFill:t||B}}var k=b("@plotly/d3"),m=b("../../registry"),a=b("../../lib"),g=a.strTranslate,h=b("../drawing"),r=b("../color"),
l=b("../colorscale/helpers").extractOpts,c=b("../../traces/scatter/subtypes"),d=b("../../traces/pie/style_one"),e=b("../../traces/pie/helpers").castOption,f=b("./constants");N.exports=function(q,t,w){function x(y,F,J){var K=y[0].trace,M=K.marker||{},H=M.line||{},O=J?K.visible&&K.type===J:m.traceIs(K,"bar");y=k.select(F).select("g.legendpoints").selectAll("path.legend"+J).data(O?[y]:[]);y.enter().append("path").classed("legend"+J,!0).attr("d","M6,6H-6V-6H6Z").attr("transform",C);y.exit().remove();
y.each(function(I){var L=k.select(this);I=I[0];var Q=v(I.mlw,M.line,5,2);L.style("stroke-width",Q+"px");var Z=I.mcc;if(!w._inHover&&"mc"in I){Z=l(M);var ba=Z.mid;void 0===ba&&(ba=(Z.max+Z.min)/2);Z=h.tryColorscale(M,"")(ba)}var V=Z||I.mc||M.color,S=(ba=M.pattern)&&h.getPatternAttr(ba.shape,0,"");if(S){V=h.getPatternAttr(ba.bgcolor,0,null);var T=h.getPatternAttr(ba.fgcolor,0,null),fa=ba.fgopacity;var W=(W=ba.size)&&a.isArrayOrTypedArray(W)?8:10<W?10:W;var aa=(aa=ba.solidity)&&a.isArrayOrTypedArray(aa)?
.5:1<aa?1:aa;L.call(h.pattern,"legend",t,"legend-"+K.uid,S,W,aa,Z,ba.fillmode,V,T,fa)}else L.call(r.fill,V);Q&&r.stroke(L,I.mlc||H.color)})}function z(y,F,J){var K=y[0],M=K.trace,H=J?M.visible&&M.type===J:m.traceIs(M,J);y=k.select(F).select("g.legendpoints").selectAll("path.legend"+J).data(H?[y]:[]);y.enter().append("path").classed("legend"+J,!0).attr("d","M6,6H-6V-6H6Z").attr("transform",C);y.exit().remove();y.size()&&(J=(M.marker||{}).line,F=v(e(J.width,K.pts),J,5,2),M=a.minExtend(M,{marker:{line:{width:F}}}),
M.marker.line.color=J.color,K=a.minExtend(K,{trace:M}),d(y,K,M))}var B=t._fullLayout;w||(w=B.legend);var A="constant"===w.itemsizing,D=w.itemwidth,C=g((D+2*f.itemGap)/2,0),v=function(y,F,J,K){if(!(y+1))if(F&&0<F.width)y=F.width;else return 0;return A?K:Math.min(y,J)};q.each(function(y){var F=k.select(this);F=a.ensureSingle(F,"g","layers");F.style("opacity",y[0].trace.opacity);var J=w.valign,K=y[0].lineHeight,M=y[0].height;"middle"!==J&&K&&M?F.attr("transform",g(0,.5*{top:1,bottom:-1}[J]*(K-M+3))):
F.attr("transform",null);F.selectAll("g.legendfill").data([y]).enter().append("g").classed("legendfill",!0);F.selectAll("g.legendlines").data([y]).enter().append("g").classed("legendlines",!0);F=F.selectAll("g.legendsymbols").data([y]);F.enter().append("g").classed("legendsymbols",!0);F.selectAll("g.legendpoints").data([y]).enter().append("g").classed("legendpoints",!0)}).each(function(y){var F=y[0].trace;y=[];if(F.visible)switch(F.type){case "histogram2d":case "heatmap":y=[["M-15,-2V4H15V-2Z"]];
var J=!0;break;case "choropleth":case "choroplethmapbox":y=[["M-6,-6V6H6V-6Z"]];J=!0;break;case "densitymapbox":y=[["M-6,0 a6,6 0 1,0 12,0 a 6,6 0 1,0 -12,0"]];J="radial";break;case "cone":y=[["M-6,2 A2,2 0 0,0 -6,6 V6L6,4Z"],["M-6,-6 A2,2 0 0,0 -6,-2 L6,-4Z"],["M-6,-2 A2,2 0 0,0 -6,2 L6,0Z"]];J=!1;break;case "streamtube":y=[["M-6,2 A2,2 0 0,0 -6,6 H6 A2,2 0 0,1 6,2 Z"],["M-6,-6 A2,2 0 0,0 -6,-2 H6 A2,2 0 0,1 6,-6 Z"],["M-6,-2 A2,2 0 0,0 -6,2 H6 A2,2 0 0,1 6,-2 Z"]];J=!1;break;case "surface":y=[["M-6,-6 A2,3 0 0,0 -6,0 H6 A2,3 0 0,1 6,-6 Z"],
["M-6,1 A2,3 0 0,1 -6,6 H6 A2,3 0 0,0 6,0 Z"]];J=!0;break;case "mesh3d":y=[["M-6,6H0L-6,-6Z"],["M6,6H0L6,-6Z"],["M-6,-6H6L0,6Z"]];J=!1;break;case "volume":y=[["M-6,6H0L-6,-6Z"],["M6,6H0L6,-6Z"],["M-6,-6H6L0,6Z"]];J=!0;break;case "isosurface":y=[["M-6,6H0L-6,-6Z"],["M6,6H0L6,-6Z"],["M-6,-6 A12,24 0 0,0 6,-6 L0,6Z"]],J=!1}y=k.select(this).select("g.legendpoints").selectAll("path.legend3dandfriends").data(y);y.enter().append("path").classed("legend3dandfriends",!0).attr("transform",C).style("stroke-miterlimit",
1);y.exit().remove();y.each(function(K,M){var H=k.select(this),O=l(F),I=O.colorscale,L=O.reversescale;O=function(Z){Z.size()&&h.gradient(Z,t,"legendfill-"+F.uid,p(L,"radial"===J),I,"fill")};if(I)J||(Q=I.length,Q=0===M?I[L?Q-1:0][1]:1===M?I[L?0:Q-1][1]:I[Math.floor((Q-1)/2)][1]);else{var Q=F.vertexcolor||F.facecolor||F.color;Q=a.isArrayOrTypedArray(Q)?Q[M]||Q[0]:Q}H.attr("d",K[0]);Q?H.call(r.fill,Q):H.call(O)})}).each(function(y){var F=y[0].trace,J="waterfall"===F.type;if(y[0]._distinct&&J)return J=
y[0].trace[y[0].dir].marker,y[0].mc=J.color,y[0].mlw=J.line.width,y[0].mlc=J.line.color,x(y,this,"waterfall");var K=[];F.visible&&J&&(K=y[0].hasTotals?[["increasing","M-6,-6V6H0Z"],["totals","M6,6H0L-6,-6H-0Z"],["decreasing","M6,6V-6H0Z"]]:[["increasing","M-6,-6V6H6Z"],["decreasing","M6,6V-6H-6Z"]]);y=k.select(this).select("g.legendpoints").selectAll("path.legendwaterfall").data(K);y.enter().append("path").classed("legendwaterfall",!0).attr("transform",C).style("stroke-miterlimit",1);y.exit().remove();
y.each(function(M){var H=k.select(this),O=F[M[0]].marker,I=v(void 0,O.line,5,2);H.attr("d",M[1]).style("stroke-width",I+"px").call(r.fill,O.color);I&&H.call(r.stroke,O.line.color)})}).each(function(y){x(y,this,"funnel")}).each(function(y){x(y,this)}).each(function(y){var F=y[0].trace,J=k.select(this).select("g.legendpoints").selectAll("path.legendbox").data(F.visible&&m.traceIs(F,"box-violin")?[y]:[]);J.enter().append("path").classed("legendbox",!0).attr("d","M6,6H-6V-6H6Z").attr("transform",C);J.exit().remove();
J.each(function(){var K=k.select(this);if("all"!==F.boxpoints&&"all"!==F.points||0!==r.opacity(F.fillcolor)||0!==r.opacity((F.line||{}).color)){var M=v(void 0,F.line,5,2);K.style("stroke-width",M+"px").call(r.fill,F.fillcolor);M&&r.stroke(K,F.line.color)}else K=a.minExtend(F,{marker:{size:A?12:a.constrain(F.marker.size,2,16),sizeref:1,sizemin:1,sizemode:"diameter"}}),J.call(h.pointStyle,K,t)})}).each(function(y){z(y,this,"funnelarea")}).each(function(y){z(y,this,"pie")}).each(function(y){var F=n(y),
J=F.showFill,K=F.showLine,M=F.showGradientLine,H=F.showGradientFill,O=F.anyFill,I=F.anyLine;F=y[0];var L=F.trace,Q=l(L),Z=Q.colorscale,ba=Q.reversescale,V=function(T){T.size()&&h.gradient(T,t,"legendfill-"+L.uid,p(ba),Z,"fill")};Q=function(T){if(T.size()){var fa="legendline-"+L.uid;h.lineGroupStyle(T);h.gradient(T,t,fa,p(ba),Z,"stroke")}};O=c.hasMarkers(L)||!O?"M5,0":I?"M5,-2":"M5,-3";I=k.select(this);y=I.select(".legendfill").selectAll("path").data(J||H?[y]:[]);y.enter().append("path").classed("js-fill",
!0);y.exit().remove();y.attr("d",O+"h"+D+"v6h-"+D+"z").call(J?h.fillGroupStyle:V);if(K||M){J=v(void 0,L.line,10,5);J=a.minExtend(L,{line:{width:J}});var S=[a.minExtend(F,{trace:J})]}F=I.select(".legendlines").selectAll("path").data(K||M?[S]:[]);F.enter().append("path").classed("js-line",!0);F.exit().remove();F.attr("d",O+(M?"l"+D+",0.0001":"h"+D)).call(K?h.lineGroupStyle:Q)}).each(function(y){function F(ba,V,S,T){ba=a.nestedProperty(L,ba).get();V=a.isArrayOrTypedArray(ba)&&V?V(ba):ba;A&&V&&void 0!==
T&&(V=T);if(S){if(V<S[0])return S[0];if(V>S[1])return S[1]}return V}function J(ba){return I._distinct&&I.index&&ba[I.index]?ba[I.index]:ba[0]}var K=n(y),M=K.anyFill,H=K.anyLine,O=K.showLine;K=K.showMarker;var I=y[0],L=I.trace;y=!K&&!H&&!M&&c.hasText(L);if(K||y||O){var Q={};var Z={};K&&(Q.mc=F("marker.color",J),Q.mx=F("marker.symbol",J),Q.mo=F("marker.opacity",a.mean,[.2,1]),Q.mlc=F("marker.line.color",J),Q.mlw=F("marker.line.width",a.mean,[0,5],2),Z.marker={sizeref:1,sizemin:1,sizemode:"diameter"},
M=F("marker.size",a.mean,[2,16],12),Q.ms=M,Z.marker.size=M);O&&(Z.line={width:F("line.width",J,[0,10],5)});y&&(Q.tx="Aa",Q.tp=F("textposition",J),Q.ts=10,Q.tc=F("textfont.color",J),Q.tf=F("textfont.family",J));Q=[a.minExtend(I,Q)];Z=a.minExtend(L,Z);Z.selectedpoints=null;Z.texttemplate=null}O=k.select(this).select("g.legendpoints");M=O.selectAll("path.scatterpts").data(K?Q:[]);M.enter().insert("path",":first-child").classed("scatterpts",!0).attr("transform",C);M.exit().remove();M.call(h.pointStyle,
Z,t);K&&(Q[0].mrc=3);K=O.selectAll("g.pointtext").data(y?Q:[]);K.enter().append("g").classed("pointtext",!0).append("text").attr("transform",C);K.exit().remove();K.selectAll("text").call(h.textPointStyle,Z,t)}).each(function(y){var F=y[0].trace;y=k.select(this).select("g.legendpoints").selectAll("path.legendcandle").data(F.visible&&"candlestick"===F.type?[y,y]:[]);y.enter().append("path").classed("legendcandle",!0).attr("d",function(J,K){return K?"M-15,0H-8M-8,6V-6H8Z":"M15,0H8M8,-6V6H-8Z"}).attr("transform",
C).style("stroke-miterlimit",1);y.exit().remove();y.each(function(J,K){J=k.select(this);K=F[K?"increasing":"decreasing"];var M=v(void 0,K.line,5,2);J.style("stroke-width",M+"px").call(r.fill,K.fillcolor);M&&r.stroke(J,K.line.color)})}).each(function(y){var F=y[0].trace;y=k.select(this).select("g.legendpoints").selectAll("path.legendohlc").data(F.visible&&"ohlc"===F.type?[y,y]:[]);y.enter().append("path").classed("legendohlc",!0).attr("d",function(J,K){return K?"M-15,0H0M-8,-6V0":"M15,0H0M8,6V0"}).attr("transform",
C).style("stroke-miterlimit",1);y.exit().remove();y.each(function(J,K){J=k.select(this);K=F[K?"increasing":"decreasing"];var M=v(void 0,K.line,5,2);J.style("fill","none").call(h.dashLine,K.line.dash,M);M&&r.stroke(J,K.line.color)})})}},{"../../lib":803,"../../registry":931,"../../traces/pie/helpers":1197,"../../traces/pie/style_one":1203,"../../traces/scatter/subtypes":1243,"../color":666,"../colorscale/helpers":677,"../drawing":688,"./constants":717,"@plotly/d3":58}],725:[function(b,N,G){b("./constants");
N.exports={editType:"modebar",orientation:{valType:"enumerated",values:["v","h"],dflt:"h",editType:"modebar"},bgcolor:{valType:"color",editType:"modebar"},color:{valType:"color",editType:"modebar"},activecolor:{valType:"color",editType:"modebar"},uirevision:{valType:"any",editType:"none"},add:{valType:"string",arrayOk:!0,dflt:"",editType:"modebar"},remove:{valType:"string",arrayOk:!0,dflt:"",editType:"modebar"}}},{"./constants":727}],726:[function(b,N,G){function p(w,x){var z=x.currentTarget,B=z.getAttribute("data-attr");
x=z.getAttribute("data-val")||!0;var A=w._fullLayout,D={},C=e.list(w,null,!0),v=A._cartesianSpikesEnabled,y;if("zoom"===B){B="in"===x?.5:2;z=(1+B)/2;var F=(1-B)/2;for(y=0;y<C.length;y++)if(B=C[y],!B.fixedrange){var J=B._name;if("auto"===x)D[J+".autorange"]=!0;else if("reset"===x){if(void 0===B._rangeInitial)D[J+".autorange"]=!0;else{var K=B._rangeInitial.slice();D[J+".range[0]"]=K[0];D[J+".range[1]"]=K[1]}void 0!==B._showSpikeInitial&&(D[J+".showspikes"]=B._showSpikeInitial,"on"!==v||B._showSpikeInitial||
(v="off"))}else K=[B.r2l(B.range[0]),B.r2l(B.range[1])],K=[z*K[0]+F*K[1],z*K[1]+F*K[0]],D[J+".range[0]"]=B.l2r(K[0]),D[J+".range[1]"]=B.l2r(K[1])}}else"hovermode"!==B||"x"!==x&&"y"!==x||(x=A._isHoriz?"y":"x",z.setAttribute("data-val",x)),D[B]=x;A._cartesianSpikesEnabled=v;c.call("_guiRelayout",w,D)}function n(w,x){x=x.currentTarget;var z=x.getAttribute("data-attr");x=x.getAttribute("data-val")||!0;var B=w._fullLayout._subplots.gl3d||[],A={};z=z.split(".");for(var D=0;D<B.length;D++)A[B[D]+"."+z[1]]=
x;A.dragmode="pan"===x?x:"zoom";c.call("_guiRelayout",w,A)}function k(w,x){var z=x.currentTarget.getAttribute("data-attr");x="resetLastSave"===z;z="resetDefault"===z;for(var B=w._fullLayout,A=B._subplots.gl3d||[],D={},C=0;C<A.length;C++){var v=A[C],y=v+".camera",F=v+".aspectratio",J=v+".aspectmode";v=B[v]._scene;if(x){D[y+".up"]=v.viewInitial.up;D[y+".eye"]=v.viewInitial.eye;D[y+".center"]=v.viewInitial.center;var K=!0}else z&&(D[y+".up"]=null,D[y+".eye"]=null,D[y+".center"]=null,K=!0);K&&(D[F+".x"]=
v.viewInitial.aspectratio.x,D[F+".y"]=v.viewInitial.aspectratio.y,D[F+".z"]=v.viewInitial.aspectratio.z,D[J]=v.viewInitial.aspectmode)}c.call("_guiRelayout",w,D)}function m(w,x){x=x.currentTarget;var z=x._previousVal;w=w._fullLayout;var B=w._subplots.gl3d||[],A=["xaxis","yaxis","zaxis"],D={},C={};if(z)C=z,x._previousVal=null;else{for(z=0;z<B.length;z++){var v=B[z],y=w[v],F=v+".hovermode";D[F]=y.hovermode;C[F]=!1;for(F=0;3>F;F++){var J=A[F],K=v+"."+J+".showspikes";C[K]=!1;D[K]=y[J].showspikes}}x._previousVal=
D}return C}function a(w,x){var z=x.currentTarget;x=z.getAttribute("data-attr");z=z.getAttribute("data-val")||!0;for(var B=w._fullLayout,A=B._subplots.geo||[],D=0;D<A.length;D++){var C=A[D],v=B[C];"zoom"===x&&(v=v.projection.scale,c.call("_guiRelayout",w,C+".projection.scale","in"===z?2*v:.5*v))}"reset"===x&&l(w,"geo")}function g(w){w=w._fullLayout;return w.hovermode?!1:w._has("cartesian")?w._isHoriz?"y":"x":"closest"}function h(w){var x=g(w);c.call("_guiRelayout",w,"hovermode",x)}function r(w,x){x=
x.currentTarget.getAttribute("data-val");for(var z=w._fullLayout,B=z._subplots.mapbox||[],A={},D=0;D<B.length;D++){var C=B[D],v=z[C].zoom;A[C+".zoom"]="in"===x?1.05*v:v/1.05}c.call("_guiRelayout",w,A)}function l(w,x){var z=w._fullLayout;x=z._subplots[x]||[];for(var B={},A=0;A<x.length;A++)for(var D=x[A],C=z[D]._subplot.viewInitial,v=Object.keys(C),y=0;y<v.length;y++){var F=v[y];B[D+"."+F]=C[F]}c.call("_guiRelayout",w,B)}var c=b("../../registry"),d=b("../../plots/plots"),e=b("../../plots/cartesian/axis_ids");
G=b("../../fonts/ploticon");var f=b("../shapes/draw").eraseActiveShape,q=b("../../lib"),t=q._;b=N.exports={};b.toImage={name:"toImage",title:function(w){return"png"===((w._context.toImageButtonOptions||{}).format||"png")?t(w,"Download plot as a png"):t(w,"Download plot")},icon:G.camera,click:function(w){var x=w._context.toImageButtonOptions,z={format:x.format||"png"};q.notifier(t(w,"Taking snapshot - this may take a few seconds"),"long");"svg"!==z.format&&q.isIE()&&(q.notifier(t(w,"IE only supports svg.  Changing format to svg."),
"long"),z.format="svg");["filename","width","height","scale"].forEach(function(B){B in x&&(z[B]=x[B])});c.call("downloadImage",w,z).then(function(B){q.notifier(t(w,"Snapshot succeeded")+" - "+B,"long")}).catch(function(){q.notifier(t(w,"Sorry, there was a problem downloading your snapshot!"),"long")})}};b.sendDataToCloud={name:"sendDataToCloud",title:function(w){return t(w,"Edit in Chart Studio")},icon:G.disk,click:function(w){d.sendDataToCloud(w)}};b.editInChartStudio={name:"editInChartStudio",title:function(w){return t(w,
"Edit in Chart Studio")},icon:G.pencil,click:function(w){d.sendDataToCloud(w)}};b.zoom2d={name:"zoom2d",_cat:"zoom",title:function(w){return t(w,"Zoom")},attr:"dragmode",val:"zoom",icon:G.zoombox,click:p};b.pan2d={name:"pan2d",_cat:"pan",title:function(w){return t(w,"Pan")},attr:"dragmode",val:"pan",icon:G.pan,click:p};b.select2d={name:"select2d",_cat:"select",title:function(w){return t(w,"Box Select")},attr:"dragmode",val:"select",icon:G.selectbox,click:p};b.lasso2d={name:"lasso2d",_cat:"lasso",
title:function(w){return t(w,"Lasso Select")},attr:"dragmode",val:"lasso",icon:G.lasso,click:p};b.drawclosedpath={name:"drawclosedpath",title:function(w){return t(w,"Draw closed freeform")},attr:"dragmode",val:"drawclosedpath",icon:G.drawclosedpath,click:p};b.drawopenpath={name:"drawopenpath",title:function(w){return t(w,"Draw open freeform")},attr:"dragmode",val:"drawopenpath",icon:G.drawopenpath,click:p};b.drawline={name:"drawline",title:function(w){return t(w,"Draw line")},attr:"dragmode",val:"drawline",
icon:G.drawline,click:p};b.drawrect={name:"drawrect",title:function(w){return t(w,"Draw rectangle")},attr:"dragmode",val:"drawrect",icon:G.drawrect,click:p};b.drawcircle={name:"drawcircle",title:function(w){return t(w,"Draw circle")},attr:"dragmode",val:"drawcircle",icon:G.drawcircle,click:p};b.eraseshape={name:"eraseshape",title:function(w){return t(w,"Erase active shape")},icon:G.eraseshape,click:f};b.zoomIn2d={name:"zoomIn2d",_cat:"zoomin",title:function(w){return t(w,"Zoom in")},attr:"zoom",val:"in",
icon:G.zoom_plus,click:p};b.zoomOut2d={name:"zoomOut2d",_cat:"zoomout",title:function(w){return t(w,"Zoom out")},attr:"zoom",val:"out",icon:G.zoom_minus,click:p};b.autoScale2d={name:"autoScale2d",_cat:"autoscale",title:function(w){return t(w,"Autoscale")},attr:"zoom",val:"auto",icon:G.autoscale,click:p};b.resetScale2d={name:"resetScale2d",_cat:"resetscale",title:function(w){return t(w,"Reset axes")},attr:"zoom",val:"reset",icon:G.home,click:p};b.hoverClosestCartesian={name:"hoverClosestCartesian",
_cat:"hoverclosest",title:function(w){return t(w,"Show closest data on hover")},attr:"hovermode",val:"closest",icon:G.tooltip_basic,gravity:"ne",click:p};b.hoverCompareCartesian={name:"hoverCompareCartesian",_cat:"hoverCompare",title:function(w){return t(w,"Compare data on hover")},attr:"hovermode",val:function(w){return w._fullLayout._isHoriz?"y":"x"},icon:G.tooltip_compare,gravity:"ne",click:p};b.zoom3d={name:"zoom3d",_cat:"zoom",title:function(w){return t(w,"Zoom")},attr:"scene.dragmode",val:"zoom",
icon:G.zoombox,click:n};b.pan3d={name:"pan3d",_cat:"pan",title:function(w){return t(w,"Pan")},attr:"scene.dragmode",val:"pan",icon:G.pan,click:n};b.orbitRotation={name:"orbitRotation",title:function(w){return t(w,"Orbital rotation")},attr:"scene.dragmode",val:"orbit",icon:G["3d_rotate"],click:n};b.tableRotation={name:"tableRotation",title:function(w){return t(w,"Turntable rotation")},attr:"scene.dragmode",val:"turntable",icon:G["z-axis"],click:n};b.resetCameraDefault3d={name:"resetCameraDefault3d",
_cat:"resetCameraDefault",title:function(w){return t(w,"Reset camera to default")},attr:"resetDefault",icon:G.home,click:k};b.resetCameraLastSave3d={name:"resetCameraLastSave3d",_cat:"resetCameraLastSave",title:function(w){return t(w,"Reset camera to last save")},attr:"resetLastSave",icon:G.movie,click:k};b.hoverClosest3d={name:"hoverClosest3d",_cat:"hoverclosest",title:function(w){return t(w,"Toggle show closest data on hover")},attr:"hovermode",val:null,toggle:!0,icon:G.tooltip_basic,gravity:"ne",
click:function(w,x){x=m(w,x);c.call("_guiRelayout",w,x)}};b.zoomInGeo={name:"zoomInGeo",_cat:"zoomin",title:function(w){return t(w,"Zoom in")},attr:"zoom",val:"in",icon:G.zoom_plus,click:a};b.zoomOutGeo={name:"zoomOutGeo",_cat:"zoomout",title:function(w){return t(w,"Zoom out")},attr:"zoom",val:"out",icon:G.zoom_minus,click:a};b.resetGeo={name:"resetGeo",_cat:"reset",title:function(w){return t(w,"Reset")},attr:"reset",val:null,icon:G.autoscale,click:a};b.hoverClosestGeo={name:"hoverClosestGeo",_cat:"hoverclosest",
title:function(w){return t(w,"Toggle show closest data on hover")},attr:"hovermode",val:null,toggle:!0,icon:G.tooltip_basic,gravity:"ne",click:h};b.hoverClosestGl2d={name:"hoverClosestGl2d",_cat:"hoverclosest",title:function(w){return t(w,"Toggle show closest data on hover")},attr:"hovermode",val:null,toggle:!0,icon:G.tooltip_basic,gravity:"ne",click:h};b.hoverClosestPie={name:"hoverClosestPie",_cat:"hoverclosest",title:function(w){return t(w,"Toggle show closest data on hover")},attr:"hovermode",
val:"closest",icon:G.tooltip_basic,gravity:"ne",click:h};b.resetViewSankey={name:"resetSankeyGroup",title:function(w){return t(w,"Reset view")},icon:G.home,click:function(w){for(var x={"node.groups":[],"node.x":[],"node.y":[]},z=0;z<w._fullData.length;z++){var B=w._fullData[z]._viewInitial;x["node.groups"].push(B.node.groups.slice());x["node.x"].push(B.node.x.slice());x["node.y"].push(B.node.y.slice())}c.call("restyle",w,x)}};b.toggleHover={name:"toggleHover",title:function(w){return t(w,"Toggle show closest data on hover")},
attr:"hovermode",val:null,toggle:!0,icon:G.tooltip_basic,gravity:"ne",click:function(w,x){x=m(w,x);x.hovermode=g(w);c.call("_guiRelayout",w,x)}};b.resetViews={name:"resetViews",title:function(w){return t(w,"Reset views")},icon:G.home,click:function(w,x){var z=x.currentTarget;z.setAttribute("data-attr","zoom");z.setAttribute("data-val","reset");p(w,x);z.setAttribute("data-attr","resetLastSave");k(w,x);l(w,"geo");l(w,"mapbox")}};b.toggleSpikelines={name:"toggleSpikelines",title:function(w){return t(w,
"Toggle Spike Lines")},icon:G.spikeline,attr:"_cartesianSpikesEnabled",val:"on",click:function(w){var x=w._fullLayout;x._cartesianSpikesEnabled="on"===x._cartesianSpikesEnabled?"off":"on";x=c;for(var z=x.call,B="on"===w._fullLayout._cartesianSpikesEnabled,A=e.list(w,null,!0),D={},C=0;C<A.length;C++){var v=A[C];D[v._name+".showspikes"]=B?!0:v._showSpikeInitial}z.call(x,"_guiRelayout",w,D)}};b.resetViewMapbox={name:"resetViewMapbox",_cat:"resetView",title:function(w){return t(w,"Reset view")},attr:"reset",
icon:G.home,click:function(w){l(w,"mapbox")}};b.zoomInMapbox={name:"zoomInMapbox",_cat:"zoomin",title:function(w){return t(w,"Zoom in")},attr:"zoom",val:"in",icon:G.zoom_plus,click:r};b.zoomOutMapbox={name:"zoomOutMapbox",_cat:"zoomout",title:function(w){return t(w,"Zoom out")},attr:"zoom",val:"out",icon:G.zoom_minus,click:r}},{"../../fonts/ploticon":782,"../../lib":803,"../../plots/cartesian/axis_ids":858,"../../plots/plots":917,"../../registry":931,"../shapes/draw":750}],727:[function(b,N,G){var p=
b("./buttons");b=Object.keys(p);G="drawline drawopenpath drawclosedpath drawcircle drawrect eraseshape".split(" ");var n=["v1hovermode","hoverclosest","hovercompare","togglehover","togglespikelines"].concat(G),k=[];b.forEach(function(m){var a=p[m];-1===n.indexOf(a._cat||a.name)&&(m=a.name,a=(a._cat||a.name).toLowerCase(),-1===k.indexOf(m)&&k.push(m),-1===k.indexOf(a)&&k.push(a))});k.sort();N.exports={DRAW_MODES:G,backButtons:n,foreButtons:k}},{"./buttons":726}],728:[function(b,N,G){var p=b("../../lib"),
n=b("../color"),k=b("../../plot_api/plot_template"),m=b("./attributes");N.exports=function(a,g){function h(c,d){return p.coerce(r,l,m,c,d)}var r=a.modebar||{},l=k.newContainer(g,"modebar");h("orientation");h("bgcolor",n.addOpacity(g.paper_bgcolor,.5));a=n.contrast(n.rgb(g.modebar.bgcolor));h("color",n.addOpacity(a,.3));h("activecolor",n.addOpacity(a,.7));h("uirevision",g.uirevision);h("add");h("remove")}},{"../../lib":803,"../../plot_api/plot_template":843,"../color":666,"./attributes":725}],729:[function(b,
N,G){N.exports={moduleType:"component",name:"modebar",layoutAttributes:b("./attributes"),supplyLayoutDefaults:b("./defaults"),manage:b("./manage")}},{"./attributes":725,"./defaults":728,"./manage":730}],730:[function(b,N,G){function p(f){function q(T,fa){if("string"===typeof fa){if(fa.toLowerCase()===T.toLowerCase())return!0}else{var W=fa._cat||fa.name;if(fa.name===T||W===T.toLowerCase())return!0}return!1}function t(T){if(T.length){for(var fa=[],W=0;W<T.length;W++){var aa=T[W],ja=d[aa],ma=ja.name.toLowerCase();
ja=(ja._cat||ja.name).toLowerCase();for(var ia=!1,ra=0;ra<A.length;ra++){var wa=A[ra].toLowerCase();if(wa===ma||wa===ja){ia=!0;break}}ia||fa.push(d[aa])}Q.push(fa)}}var w=f._fullLayout,x=f._fullData,z=f._context;f=w.modebar.add;"string"===typeof f&&(f=[f]);var B=w.modebar.remove;"string"===typeof B&&(B=[B]);f=z.modeBarButtonsToAdd.concat(f.filter(function(T){for(var fa=0;fa<z.modeBarButtonsToRemove.length;fa++)if(q(T,z.modeBarButtonsToRemove[fa]))return!1;return!0}));var A=z.modeBarButtonsToRemove.concat(B.filter(function(T){for(var fa=
0;fa<z.modeBarButtonsToAdd.length;fa++)if(q(T,z.modeBarButtonsToAdd[fa]))return!1;return!0})),D=w._has("cartesian"),C=w._has("gl3d"),v=w._has("geo"),y=w._has("pie"),F=w._has("funnelarea"),J=w._has("gl2d"),K=w._has("ternary"),M=w._has("mapbox"),H=w._has("polar"),O=w._has("sankey"),I=n(w),L=l(w.hovermode),Q=[];B=["toImage"];z.showEditInChartStudio?B.push("editInChartStudio"):z.showSendToCloud&&B.push("sendDataToCloud");t(B);B=[];var Z=[],ba=[],V=[];1<(D||J||y||F||K)+v+C+M+H?(Z=["toggleHover"],ba=["resetViews"]):
v?(B=["zoomInGeo","zoomOutGeo"],Z=["hoverClosestGeo"],ba=["resetGeo"]):C?(Z=["hoverClosest3d"],ba=["resetCameraDefault3d","resetCameraLastSave3d"]):M?(B=["zoomInMapbox","zoomOutMapbox"],Z=["toggleHover"],ba=["resetViewMapbox"]):J?Z=["hoverClosestGl2d"]:y?Z=["hoverClosestPie"]:O?(Z=["hoverClosestCartesian","hoverCompareCartesian"],ba=["resetViewSankey"]):Z=["toggleHover"];D&&(Z=["toggleSpikelines","hoverClosestCartesian","hoverCompareCartesian"]);if(m(x)||L)Z=[];!D&&!J||I||(B=["zoomIn2d","zoomOut2d",
"autoScale2d"],"resetViews"!==ba[0]&&(ba=["resetScale2d"]));C?V=["zoom3d","pan3d","orbitRotation","tableRotation"]:(D||J)&&!I||K?V=["zoom2d","pan2d"]:M||v?V=["pan2d"]:H&&(V=["zoom2d"]);k(x)&&V.push("select2d","lasso2d");var S=[];x=function(T){-1===S.indexOf(T)&&-1!==Z.indexOf(T)&&S.push(T)};if(Array.isArray(f)){D=[];for(C=0;C<f.length;C++)v=f[C],"string"===typeof v?(v=v.toLowerCase(),-1!==e.indexOf(v)?(w._has("mapbox")||w._has("cartesian"))&&V.push(v):"togglespikelines"===v?x("toggleSpikelines"):
"togglehover"===v?x("toggleHover"):"hovercompare"===v?x("hoverCompareCartesian"):"hoverclosest"===v?(x("hoverClosestCartesian"),x("hoverClosestGeo"),x("hoverClosest3d"),x("hoverClosestGl2d"),x("hoverClosestPie")):"v1hovermode"===v&&(x("toggleHover"),x("hoverClosestCartesian"),x("hoverCompareCartesian"),x("hoverClosestGeo"),x("hoverClosest3d"),x("hoverClosestGl2d"),x("hoverClosestPie"))):D.push(v);f=D}t(V);t(B.concat(ba));t(S);return a(Q,f)}function n(f){f=g.list({_fullLayout:f},null,!0);for(var q=
0;q<f.length;q++)if(!f[q].fixedrange)return!1;return!0}function k(f){for(var q=!1,t=0;t<f.length&&!q;t++){var w=f[t];if(w._module&&w._module.selectPoints)if(r.traceIs(w,"scatter-like")){if(h.hasMarkers(w)||h.hasText(w))q=!0}else if(r.traceIs(w,"box-violin")){if("all"===w.boxpoints||"all"===w.points)q=!0}else q=!0}return q}function m(f){for(var q=0;q<f.length;q++)if(!r.traceIs(f[q],"noHover"))return!1;return!0}function a(f,q){if(q.length)if(Array.isArray(q[0]))for(var t=0;t<q.length;t++)f.push(q[t]);
else f.push(q);return f}var g=b("../../plots/cartesian/axis_ids"),h=b("../../traces/scatter/subtypes"),r=b("../../registry"),l=b("../fx/helpers").isUnifiedHover,c=b("./modebar"),d=b("./buttons"),e=b("./constants").DRAW_MODES;N.exports=function(f){var q=f._fullLayout,t=f._context,w=q._modeBar;if(t.displayModeBar||t.watermark){if(!Array.isArray(t.modeBarButtonsToRemove))throw Error("*modeBarButtonsToRemove* configuration options must be an array.");if(!Array.isArray(t.modeBarButtonsToAdd))throw Error("*modeBarButtonsToAdd* configuration options must be an array.");
var x=t.modeBarButtons;if(Array.isArray(x)&&x.length)for(t=0;t<x.length;t++)for(var z=x[t],B=0;B<z.length;B++){var A=z[B];if("string"===typeof A)if(void 0!==d[A])x[t][B]=d[A];else throw Error("*modeBarButtons* configuration options invalid button name");}else x=!t.displayModeBar&&t.watermark?[]:p(f);w?w.update(f,x):q._modeBar=c(f,x)}else w&&(w.destroy(),delete q._modeBar)}},{"../../plots/cartesian/axis_ids":858,"../../registry":931,"../../traces/scatter/subtypes":1243,"../fx/helpers":702,"./buttons":726,
"./constants":727,"./modebar":731}],731:[function(b,N,G){function p(h){this.container=h.container;this.element=document.createElement("div");this.update(h.graphInfo,h.buttons);this.container.appendChild(this.element)}var n=b("@plotly/d3"),k=b("fast-isnumeric"),m=b("../../lib"),a=b("../../fonts/ploticon"),g=new DOMParser;b=p.prototype;b.update=function(h,r){this.graphInfo=h;h=this.graphInfo._context;var l=this.graphInfo._fullLayout,c="modebar-"+l._uid;this.element.setAttribute("id",c);this._uid=c;
this.element.className="modebar";"hover"===h.displayModeBar&&(this.element.className+=" modebar--hover ease-bg");"v"===l.modebar.orientation&&(this.element.className+=" vertical",r=r.reverse());var d=l.modebar,e="hover"===h.displayModeBar?".js-plotly-plot .plotly:hover ":"";m.deleteRelatedStyleRule(c);m.addRelatedStyleRule(c,e+"#"+c+" .modebar-group","background-color: "+d.bgcolor);m.addRelatedStyleRule(c,"#"+c+" .modebar-btn .icon path","fill: "+d.color);m.addRelatedStyleRule(c,"#"+c+" .modebar-btn:hover .icon path",
"fill: "+d.activecolor);m.addRelatedStyleRule(c,"#"+c+" .modebar-btn.active .icon path","fill: "+d.activecolor);c=!this.hasButtons(r);d=this.hasLogo!==h.displaylogo;e=this.locale!==h.locale;this.locale=h.locale;if(c||d||e)if(this.removeAllButtons(),this.updateButtons(r),h.watermark||h.displaylogo)r=this.getLogo(),h.watermark&&(r.className+=" watermark"),"v"===l.modebar.orientation?this.element.insertBefore(r,this.element.childNodes[0]):this.element.appendChild(r),this.hasLogo=!0;this.updateActiveButton()};
b.updateButtons=function(h){var r=this;this.buttons=h;this.buttonElements=[];this.buttonsNames=[];this.buttons.forEach(function(l){var c=r.createGroup();l.forEach(function(d){var e=d.name;if(!e)throw Error("must provide button 'name' in button config");if(-1!==r.buttonsNames.indexOf(e))throw Error("button name '"+e+"' is taken");r.buttonsNames.push(e);d=r.createButton(d);r.buttonElements.push(d);c.appendChild(d)});r.element.appendChild(c)})};b.createGroup=function(){var h=document.createElement("div");
h.className="modebar-group";return h};b.createButton=function(h){var r=this,l=document.createElement("a");l.setAttribute("rel","tooltip");l.className="modebar-btn";var c=h.title;void 0===c?c=h.name:"function"===typeof c&&(c=c(this.graphInfo));(c||0===c)&&l.setAttribute("data-title",c);void 0!==h.attr&&l.setAttribute("data-attr",h.attr);c=h.val;void 0!==c&&("function"===typeof c&&(c=c(this.graphInfo)),l.setAttribute("data-val",c));if("function"!==typeof h.click)throw Error("must provide button 'click' function in button config");
l.addEventListener("click",function(d){h.click(r.graphInfo,d);r.updateActiveButton(d.currentTarget)});l.setAttribute("data-toggle",h.toggle||!1);h.toggle&&n.select(l).classed("active",!0);c=h.icon;"function"===typeof c?l.appendChild(c()):l.appendChild(this.createIcon(c||a.question));l.setAttribute("data-gravity",h.gravity||"n");return l};b.createIcon=function(h){var r=k(h.height)?Number(h.height):h.ascent-h.descent;if(h.path){var l=document.createElementNS("http://www.w3.org/2000/svg","svg");l.setAttribute("viewBox",
[0,0,h.width,r].join(" "));l.setAttribute("class","icon");r=document.createElementNS("http://www.w3.org/2000/svg","path");r.setAttribute("d",h.path);h.transform?r.setAttribute("transform",h.transform):void 0!==h.ascent&&r.setAttribute("transform","matrix(1 0 0 -1 0 "+h.ascent+")");l.appendChild(r)}h.svg&&(l=g.parseFromString(h.svg,"application/xml").childNodes[0]);l.setAttribute("height","1em");l.setAttribute("width","1em");return l};b.updateActiveButton=function(h){var r=this.graphInfo._fullLayout,
l=void 0!==h?h.getAttribute("data-attr"):null;this.buttonElements.forEach(function(c){var d=c.getAttribute("data-val")||!0,e=c.getAttribute("data-attr"),f="true"===c.getAttribute("data-toggle");c=n.select(c);f?e===l&&c.classed("active",!c.classed("active")):(e=null===e?e:m.nestedProperty(r,e).get(),c.classed("active",e===d))})};b.hasButtons=function(h){var r=this.buttons;if(!r||h.length!==r.length)return!1;for(var l=0;l<h.length;++l){if(h[l].length!==r[l].length)return!1;for(var c=0;c<h[l].length;c++)if(h[l][c].name!==
r[l][c].name)return!1}return!0};b.getLogo=function(){var h=this.createGroup(),r=document.createElement("a");r.href="https://plotly.com/";r.target="_blank";r.setAttribute("data-title",m._(this.graphInfo,"Produced with Plotly"));r.className="modebar-btn plotlyjsicon modebar-btn--logo";r.appendChild(this.createIcon(a.newplotlylogo));h.appendChild(r);return h};b.removeAllButtons=function(){for(;this.element.firstChild;)this.element.removeChild(this.element.firstChild);this.hasLogo=!1};b.destroy=function(){m.removeElement(this.container.querySelector(".modebar"));
m.deleteRelatedStyleRule(this._uid)};N.exports=function(h,r){var l=h._fullLayout;h=new p({graphInfo:h,container:l._modebardiv.node(),buttons:r});l._privateplot&&n.select(h.element).append("span").classed("badge-private float--left",!0).text("PRIVATE");return h}},{"../../fonts/ploticon":782,"../../lib":803,"@plotly/d3":58,"fast-isnumeric":249}],732:[function(b,N,G){G=b("../../plots/font_attributes");var p=b("../color/attributes");b=b("../../plot_api/plot_template").templatedArray;b=b("button",{visible:{valType:"boolean",
dflt:!0,editType:"plot"},step:{valType:"enumerated",values:"month year day hour minute second all".split(" "),dflt:"month",editType:"plot"},stepmode:{valType:"enumerated",values:["backward","todate"],dflt:"backward",editType:"plot"},count:{valType:"number",min:0,dflt:1,editType:"plot"},label:{valType:"string",editType:"plot"},editType:"plot"});N.exports={visible:{valType:"boolean",editType:"plot"},buttons:b,x:{valType:"number",min:-2,max:3,editType:"plot"},xanchor:{valType:"enumerated",values:["auto",
"left","center","right"],dflt:"left",editType:"plot"},y:{valType:"number",min:-2,max:3,editType:"plot"},yanchor:{valType:"enumerated",values:["auto","top","middle","bottom"],dflt:"bottom",editType:"plot"},font:G({editType:"plot"}),bgcolor:{valType:"color",dflt:p.lightLine,editType:"plot"},activecolor:{valType:"color",editType:"plot"},bordercolor:{valType:"color",dflt:p.defaultLine,editType:"plot"},borderwidth:{valType:"number",min:0,dflt:0,editType:"plot"},editType:"plot"}},{"../../plot_api/plot_template":843,
"../../plots/font_attributes":883,"../color/attributes":665}],733:[function(b,N,G){N.exports={yPad:.02,minButtonWidth:30,rx:3,ry:3,lightAmount:25,darkAmount:10}},{}],734:[function(b,N,G){function p(l,c,d,e){function f(q,t){return k.coerce(l,c,h.buttons,q,t)}d=e.calendar;f("visible")&&(e=f("step"),"all"!==e&&(!d||"gregorian"===d||"month"!==e&&"year"!==e?f("stepmode"):c.stepmode="backward",f("count")),f("label"))}function n(l,c,d){d=d.filter(function(t){return c[t].anchor===l._id});for(var e=0,f=0;f<
d.length;f++){var q=c[d[f]].domain;q&&(e=Math.max(q[1],e))}return[l.domain[0],e+r.yPad]}var k=b("../../lib"),m=b("../color"),a=b("../../plot_api/plot_template"),g=b("../../plots/array_container_defaults"),h=b("./attributes"),r=b("./constants");N.exports=function(l,c,d,e,f){function q(x,z){return k.coerce(t,w,h,x,z)}var t=l.rangeselector||{},w=a.newContainer(c,"rangeselector");f=g(t,w,{name:"buttons",handleItemDefaults:p,calendar:f});q("visible",0<f.length)&&(e=n(c,d,e),q("x",e[0]),q("y",e[1]),k.noneOrAll(l,
c,["x","y"]),q("xanchor"),q("yanchor"),k.coerceFont(q,"font",d.font),l=q("bgcolor"),q("activecolor",m.contrast(l,r.lightAmount,r.darkAmount)),q("bordercolor"),q("borderwidth"))}},{"../../lib":803,"../../plot_api/plot_template":843,"../../plots/array_container_defaults":849,"../color":666,"./attributes":732,"./constants":733}],735:[function(b,N,G){function p(C){C=w.list(C,"x",!0);for(var v=[],y=0;y<C.length;y++){var F=C[y];F.rangeselector&&F.rangeselector.visible&&v.push(F)}return v}function n(C){return C._id}
function k(C,v,y){if("all"===v.step)return!0===C.autorange;v=Object.keys(y);return C.range[0]===y[v[0]]&&C.range[1]===y[v[1]]}function m(C,v,y){C=f.ensureSingle(C,"rect","selector-rect",function(F){F.attr("shape-rendering","crispEdges")});C.attr({rx:A.rx,ry:A.ry});C.call(d.stroke,v.bordercolor).call(d.fill,y._isActive||y._isHovered?v.activecolor:v.bgcolor).style("stroke-width",v.borderwidth+"px")}function a(C,v,y,F){f.ensureSingle(C,"text","selector-text",function(J){J.attr("text-anchor","middle")}).call(e.font,
v.font).text(g(y,F._fullLayout._meta)).call(function(J){t.convertToTspans(J,F)})}function g(C,v){return C.label?v?f.templateString(C.label,v):C.label:"all"===C.step?"all":C.count+C.step.charAt(0)}function h(C,v,y,F,J){var K=0,M=0,H=y.borderwidth;v.each(function(){var Q=r.select(this).select(".selector-text");Q=Math.max(y.font.size*x*t.lineCount(Q),16)+3;M=Math.max(M,Q)});v.each(function(){var Q=r.select(this),Z=Q.select(".selector-rect"),ba=Q.select(".selector-text"),V=ba.node()&&e.bBox(ba.node()).width,
S=y.font.size*x,T=t.lineCount(ba);V=Math.max(V+10,A.minButtonWidth);Q.attr("transform",q(H+K,H));Z.attr({x:0,y:0,width:V,height:M});t.positionText(ba,V/2,M/2-(T-1)*S/2+3);K+=V+5});var O=C._fullLayout._size;v=O.l+O.w*y.x;O=O.t+O.h*(1-y.y);var I="left";f.isRightAnchor(y)&&(v-=K,I="right");f.isCenterAnchor(y)&&(v-=K/2,I="center");var L="top";f.isBottomAnchor(y)&&(O-=M,L="bottom");f.isMiddleAnchor(y)&&(O-=M/2,L="middle");K=Math.ceil(K);M=Math.ceil(M);v=Math.round(v);O=Math.round(O);c.autoMargin(C,F+"-range-selector",
{x:y.x,y:y.y,l:K*z[I],r:K*B[I],b:M*B[L],t:M*z[L]});J.attr("transform",q(v,O))}var r=b("@plotly/d3"),l=b("../../registry"),c=b("../../plots/plots"),d=b("../color"),e=b("../drawing"),f=b("../../lib"),q=f.strTranslate,t=b("../../lib/svg_text_utils"),w=b("../../plots/cartesian/axis_ids");G=b("../../constants/alignment");var x=G.LINE_SPACING,z=G.FROM_TL,B=G.FROM_BR,A=b("./constants"),D=b("./get_update_object");N.exports=function(C){var v=C._fullLayout._infolayer.selectAll(".rangeselector").data(p(C),n);
v.enter().append("g").classed("rangeselector",!0);v.exit().remove();v.style({cursor:"pointer","pointer-events":"all"});v.each(function(y){var F=r.select(this),J=y.rangeselector,K=F.selectAll("g.button").data(f.filterVisible(J.buttons));K.enter().append("g").classed("button",!0);K.exit().remove();K.each(function(M){var H=r.select(this),O=D(y,M);M._isActive=k(y,M,O);H.call(m,J,M);H.call(a,J,M,C);H.on("click",function(){C._dragged||l.call("_guiRelayout",C,O)});H.on("mouseover",function(){M._isHovered=
!0;H.call(m,J,M)});H.on("mouseout",function(){M._isHovered=!1;H.call(m,J,M)})});h(C,K,J,y._name,F)})}},{"../../constants/alignment":771,"../../lib":803,"../../lib/svg_text_utils":829,"../../plots/cartesian/axis_ids":858,"../../plots/plots":917,"../../registry":931,"../color":666,"../drawing":688,"./constants":733,"./get_update_object":736,"@plotly/d3":58}],736:[function(b,N,G){var p=b("d3-time"),n=b("../../lib").titleCase;N.exports=function(k,m){var a=k._name,g={};if("all"===m.step)g[a+".autorange"]=
!0;else{var h=k.range,r=new Date(k.r2l(h[1])),l=p["utc"+n(m.step)],c=m.count;switch(m.stepmode){case "backward":var d=k.l2r(+l.offset(r,-c));break;case "todate":m=l.offset(r,-c),d=k.l2r(+l.ceil(m))}k=[d,h[1]];g[a+".range[0]"]=k[0];g[a+".range[1]"]=k[1]}return g}},{"../../lib":803,"d3-time":177}],737:[function(b,N,G){N.exports={moduleType:"component",name:"rangeselector",schema:{subplots:{xaxis:{rangeselector:b("./attributes")}}},layoutAttributes:b("./attributes"),handleDefaults:b("./defaults"),draw:b("./draw")}},
{"./attributes":732,"./defaults":734,"./draw":735}],738:[function(b,N,G){b=b("../color/attributes");N.exports={bgcolor:{valType:"color",dflt:b.background,editType:"plot"},bordercolor:{valType:"color",dflt:b.defaultLine,editType:"plot"},borderwidth:{valType:"integer",dflt:0,min:0,editType:"plot"},autorange:{valType:"boolean",dflt:!0,editType:"calc",impliedEdits:{"range[0]":void 0,"range[1]":void 0}},range:{valType:"info_array",items:[{valType:"any",editType:"calc",impliedEdits:{"^autorange":!1}},{valType:"any",
editType:"calc",impliedEdits:{"^autorange":!1}}],editType:"calc",impliedEdits:{autorange:!1}},thickness:{valType:"number",dflt:.15,min:0,max:1,editType:"plot"},visible:{valType:"boolean",dflt:!0,editType:"calc"},editType:"calc"}},{"../color/attributes":665}],739:[function(b,N,G){var p=b("../../plots/cartesian/axis_ids").list,n=b("../../plots/cartesian/autorange").getAutoRange,k=b("./constants");N.exports=function(m){for(var a=p(m,"x",!0),g=0;g<a.length;g++){var h=a[g],r=h[k.name];r&&r.visible&&r.autorange&&
(r._input.autorange=!0,r._input.range=r.range=n(m,h))}}},{"../../plots/cartesian/autorange":853,"../../plots/cartesian/axis_ids":858,"./constants":740}],740:[function(b,N,G){N.exports={name:"rangeslider",containerClassName:"rangeslider-container",bgClassName:"rangeslider-bg",rangePlotClassName:"rangeslider-rangeplot",maskMinClassName:"rangeslider-mask-min",maskMaxClassName:"rangeslider-mask-max",slideBoxClassName:"rangeslider-slidebox",grabberMinClassName:"rangeslider-grabber-min",grabAreaMinClassName:"rangeslider-grabarea-min",
handleMinClassName:"rangeslider-handle-min",grabberMaxClassName:"rangeslider-grabber-max",grabAreaMaxClassName:"rangeslider-grabarea-max",handleMaxClassName:"rangeslider-handle-max",maskMinOppAxisClassName:"rangeslider-mask-min-opp-axis",maskMaxOppAxisClassName:"rangeslider-mask-max-opp-axis",maskColor:"rgba(0,0,0,0.4)",maskOppAxisColor:"rgba(0,0,0,0.2)",slideBoxFill:"transparent",slideBoxCursor:"ew-resize",grabAreaFill:"transparent",grabAreaCursor:"col-resize",grabAreaWidth:10,handleWidth:4,handleRadius:1,
handleStrokeWidth:1,extraPad:15}},{}],741:[function(b,N,G){var p=b("../../lib"),n=b("../../plot_api/plot_template"),k=b("../../plots/cartesian/axis_ids"),m=b("./attributes"),a=b("./oppaxis_attributes");N.exports=function(g,h,r){function l(z,B){return p.coerce(e,f,m,z,B)}function c(z,B){return p.coerce(t,w,a,z,B)}g=g[r];var d=h[r];if(g.rangeslider||h._requestRangeslider[d._id]){p.isPlainObject(g.rangeslider)||(g.rangeslider={});var e=g.rangeslider,f=n.newContainer(d,"rangeslider");if(l("visible")){l("bgcolor",
h.plot_bgcolor);l("bordercolor");l("borderwidth");l("thickness");l("autorange",!d.isValidRange(e.range));l("range");if(g=h._subplots)for(g=g.cartesian.filter(function(z){return z.substr(0,z.indexOf("y"))===k.name2id(r)}).map(function(z){return z.substr(z.indexOf("y"),z.length)}),g=p.simpleMap(g,k.id2name),d=0;d<g.length;d++){var q=g[d];var t=e[q]||{};var w=n.newContainer(f,q,"yaxis");q=h[q];var x;t.range&&q.isValidRange(t.range)&&(x="fixed");"match"!==c("rangemode",x)&&c("range",q.range.slice())}f._input=
e}}}},{"../../lib":803,"../../plot_api/plot_template":843,"../../plots/cartesian/axis_ids":858,"./attributes":738,"./oppaxis_attributes":745}],742:[function(b,N,G){function p(v,y,F,J){function K(){function I(W){var aa=+(W.clientX||W.touches[0].clientX)-ba;switch(Z){case M:var ja="ew-resize";W=S+aa;aa=T+aa;break;case H:ja="col-resize";W=S+aa;aa=T;break;case O:ja="col-resize";W=S;aa=T+aa;break;default:ja="ew-resize",W=V,aa=V+aa}if(aa<W){var ma=aa;aa=W;W=ma}J._pixelMin=W;J._pixelMax=aa;D(c.select(fa),
ja);n(v,y,F,J)}function L(){fa.removeEventListener("mousemove",I);fa.removeEventListener("mouseup",L);this.removeEventListener("touchmove",I);this.removeEventListener("touchend",L);f.removeElement(fa)}var Q=c.event,Z=Q.target,ba=Q.clientX||Q.touches[0].clientX,V=ba-v.node().getBoundingClientRect().left,S=J.d2p(F._rl[0]),T=J.d2p(F._rl[1]),fa=A.coverSlip();this.addEventListener("touchmove",I);this.addEventListener("touchend",L);fa.addEventListener("mousemove",I);fa.addEventListener("mouseup",L)}if(!y._context.staticPlot){var M=
v.select("rect."+C.slideBoxClassName).node(),H=v.select("rect."+C.grabAreaMinClassName).node(),O=v.select("rect."+C.grabAreaMaxClassName).node();v.on("mousedown",K);v.on("touchstart",K)}}function n(v,y,F,J){var K=F.l2r(f.constrain(J.p2d(J._pixelMin),J._rl[0],J._rl[1])),M=F.l2r(f.constrain(J.p2d(J._pixelMax),J._rl[0],J._rl[1]));window.requestAnimationFrame(function(){d.call("_guiRelayout",y,F._name+".range",[K,M])})}function k(v,y,F,J,K,M){y=C.handleWidth/2;var H=f.constrain(J.d2p(F._rl[0]),0,J._width);
F=f.constrain(J.d2p(F._rl[1]),0,J._width);v.select("rect."+C.slideBoxClassName).attr("x",H).attr("width",F-H);v.select("rect."+C.maskMinClassName).attr("width",H);v.select("rect."+C.maskMaxClassName).attr("x",F).attr("width",J._width-F);"match"!==M.rangemode&&(M=J._height-f.constrain(J.d2pOppAxis(K._rl[1]),0,J._height),K=J._height-f.constrain(J.d2pOppAxis(K._rl[0]),0,J._height),v.select("rect."+C.maskMinOppAxisClassName).attr("x",H).attr("height",M).attr("width",F-H),v.select("rect."+C.maskMaxOppAxisClassName).attr("x",
H).attr("y",K).attr("height",J._height-K).attr("width",F-H),v.select("rect."+C.slideBoxClassName).attr("y",M).attr("height",K-M));K=Math.round(f.constrain(H-y,-y,J._width+y))-.5;J=Math.round(f.constrain(F-y,-y,J._width+y))+.5;v.select("g."+C.grabberMinClassName).attr("transform",q(K,.5));v.select("g."+C.grabberMaxClassName).attr("transform",q(J,.5))}function m(v,y,F,J){v=f.ensureSingle(v,"rect",C.bgClassName,function(M){M.attr({x:0,y:0,"shape-rendering":"crispEdges"})});F=0===J.borderwidth%2?J.borderwidth:
J.borderwidth-1;var K=-J._offsetShift;y=t.crispRound(y,J.borderwidth);v.attr({width:J._width+F,height:J._height+F,transform:q(K,K),fill:J.bgcolor,stroke:J.bordercolor,"stroke-width":y})}function a(v,y,F,J){f.ensureSingleById(y._fullLayout._topdefs,"clipPath",J._clipId,function(K){K.append("rect").attr({x:0,y:0})}).select("rect").attr({width:J._width,height:J._height})}function g(v,y,F,J){var K=y.calcdata;v=v.selectAll("g."+C.rangePlotClassName).data(F._subplotsWith,f.identity);v.enter().append("g").attr("class",
function(H){return C.rangePlotClassName+" "+H}).call(t.setClipUrl,J._clipId,y);v.order();v.exit().remove();var M;v.each(function(H,O){var I=c.select(this);O=0===O;var L=B.getFromId(y,H,"y"),Q=L._name,Z=J[Q],ba={data:[],layout:{xaxis:{type:F.type,domain:[0,1],range:J.range.slice(),calendar:F.calendar},width:J._width,height:J._height,margin:{t:0,b:0,l:0,r:0}},_context:y._context};F.rangebreaks&&(ba.layout.xaxis.rangebreaks=F.rangebreaks);ba.layout[Q]={type:L.type,domain:[0,1],range:"match"!==Z.rangemode?
Z.range.slice():L.range.slice(),calendar:L.calendar};L.rangebreaks&&(ba.layout[Q].rangebreaks=L.rangebreaks);e.supplyDefaults(ba);L=ba._fullLayout.xaxis;Q=ba._fullLayout[Q];L.clearCalc();L.setScale();Q.clearCalc();Q.setScale();I={id:H,plotgroup:I,xaxis:L,yaxis:Q,isRangePlot:!0};O?M=I:(I.mainplot="xy",I.mainplotinfo=M);O=z;Q=O.rangePlot;ba=[];for(L=0;L<K.length;L++){Z=K[L];var V=Z[0].trace;V.xaxis+V.yaxis===H&&ba.push(Z)}Q.call(O,y,I,ba)})}function h(v,y,F,J,K){f.ensureSingle(v,"rect",C.maskMinClassName,
function(M){M.attr({x:0,y:0,"shape-rendering":"crispEdges"})}).attr("height",J._height).call(w.fill,C.maskColor);f.ensureSingle(v,"rect",C.maskMaxClassName,function(M){M.attr({y:0,"shape-rendering":"crispEdges"})}).attr("height",J._height).call(w.fill,C.maskColor);"match"!==K.rangemode&&(f.ensureSingle(v,"rect",C.maskMinOppAxisClassName,function(M){M.attr({y:0,"shape-rendering":"crispEdges"})}).attr("width",J._width).call(w.fill,C.maskOppAxisColor),f.ensureSingle(v,"rect",C.maskMaxOppAxisClassName,
function(M){M.attr({y:0,"shape-rendering":"crispEdges"})}).attr("width",J._width).style("border-top",C.maskOppBorder).call(w.fill,C.maskOppAxisColor))}function r(v,y,F,J){y._context.staticPlot||f.ensureSingle(v,"rect",C.slideBoxClassName,function(K){K.attr({y:0,cursor:C.slideBoxCursor,"shape-rendering":"crispEdges"})}).attr({height:J._height,fill:C.slideBoxFill})}function l(v,y,F,J){F=f.ensureSingle(v,"g",C.grabberMinClassName);v=f.ensureSingle(v,"g",C.grabberMaxClassName);var K={x:0,width:C.handleWidth,
rx:C.handleRadius,fill:w.background,stroke:w.defaultLine,"stroke-width":C.handleStrokeWidth,"shape-rendering":"crispEdges"},M={y:Math.round(J._height/4),height:Math.round(J._height/2)};f.ensureSingle(F,"rect",C.handleMinClassName,function(O){O.attr(K)}).attr(M);f.ensureSingle(v,"rect",C.handleMaxClassName,function(O){O.attr(K)}).attr(M);var H={width:C.grabAreaWidth,x:0,y:0,fill:C.grabAreaFill,cursor:y._context.staticPlot?void 0:C.grabAreaCursor};f.ensureSingle(F,"rect",C.grabAreaMinClassName,function(O){O.attr(H)}).attr("height",
J._height);f.ensureSingle(v,"rect",C.grabAreaMaxClassName,function(O){O.attr(H)}).attr("height",J._height)}var c=b("@plotly/d3"),d=b("../../registry"),e=b("../../plots/plots"),f=b("../../lib"),q=f.strTranslate,t=b("../drawing"),w=b("../color"),x=b("../titles"),z=b("../../plots/cartesian"),B=b("../../plots/cartesian/axis_ids"),A=b("../dragelement"),D=b("../../lib/setcursor"),C=b("./constants");N.exports=function(v){for(var y=v._fullLayout,F=y._rangeSliderData,J=0;J<F.length;J++){var K=F[J][C.name];
K._clipId=K._id+"-"+y._uid}J=y._infolayer.selectAll("g."+C.containerClassName).data(F,function(M){return M._name});J.exit().each(function(M){y._topdefs.select("#"+M[C.name]._clipId).remove()}).remove();0!==F.length&&(J.enter().append("g").classed(C.containerClassName,!0).attr("pointer-events","all"),J.each(function(M){var H=c.select(this),O=M[C.name],I=y[B.id2name(M.anchor)],L=O[B.id2name(M.anchor)];if(O.range){var Q=f.simpleMap(O.range,M.r2l),Z=f.simpleMap(M.range,M.r2l);O.range=O._input.range=f.simpleMap(Z[0]<
Z[1]?[Math.min(Q[0],Z[0]),Math.max(Q[1],Z[1])]:[Math.max(Q[0],Z[0]),Math.min(Q[1],Z[1])],M.l2r)}M.cleanRange("rangeslider.range");Z=y._size;var ba=M.domain;O._width=Z.w*(ba[1]-ba[0]);Q=Math.round(Z.t+Z.h*(1-M._counterDomainMin)+("bottom"===M.side?M._depth:0)+O._offsetShift+C.extraPad);H.attr("transform",q(Math.round(Z.l+Z.w*ba[0]),Q));O._rl=f.simpleMap(O.range,M.r2l);var V=O._rl[0];Z=O._rl[1];var S=Z-V;O.p2d=function(ra){return ra/O._width*S+V};O.d2p=function(ra){return(ra-V)/S*O._width};if(M.rangebreaks){var T=
M.locateBreaks(V,Z);if(T.length){var fa=0;for(ba=0;ba<T.length;ba++){var W=T[ba];fa+=W.max-W.min}var aa=O._width/(Z-V-fa),ja=[-aa*V];for(ba=0;ba<T.length;ba++)W=T[ba],ja.push(ja[ja.length-1]-aa*(W.max-W.min));O.d2p=function(ra){for(var wa=ja[0],pa=0;pa<T.length;pa++){var la=T[pa];if(ra>=la.max)wa=ja[pa+1];else if(ra<la.min)break}return wa+aa*ra};for(ba=0;ba<T.length;ba++)W=T[ba],W.pmin=O.d2p(W.min),W.pmax=O.d2p(W.max);O.p2d=function(ra){for(var wa=ja[0],pa=0;pa<T.length;pa++){var la=T[pa];if(ra>=
la.pmax)wa=ja[pa+1];else if(ra<la.pmin)break}return(ra-wa)/aa}}}if("match"!==L.rangemode){var ma=I.r2l(L.range[0]),ia=I.r2l(L.range[1])-ma;O.d2pOppAxis=function(ra){return(ra-ma)/ia*O._height}}H.call(m,v,M,O).call(a,v,M,O).call(g,v,M,O).call(h,v,M,O,L).call(r,v,M,O).call(l,v,M,O);p(H,v,M,O);k(H,v,M,O,I,L);"bottom"===M.side&&x.draw(v,M._id+"title",{propContainer:M,propName:M._name+".title",placeholder:y._dfltTitle.x,attributes:{x:M._offset+M._length/2,y:Q+O._height+O._offsetShift+10+1.5*M.title.font.size,
"text-anchor":"middle"}})}))}},{"../../lib":803,"../../lib/setcursor":824,"../../plots/cartesian":868,"../../plots/cartesian/axis_ids":858,"../../plots/plots":917,"../../registry":931,"../color":666,"../dragelement":685,"../drawing":688,"../titles":764,"./constants":740,"@plotly/d3":58}],743:[function(b,N,G){function p(h){return(h=h&&h[g])&&h.visible}var n=b("../../plots/cartesian/axis_ids"),k=b("../../lib/svg_text_utils"),m=b("./constants"),a=b("../../constants/alignment").LINE_SPACING,g=m.name;
G.isVisible=p;G.makeData=function(h){var r=n.list({_fullLayout:h},"x",!0),l=h.margin,c=[];if(!h._has("gl2d"))for(var d=0;d<r.length;d++){var e=r[d];if(p(e)){c.push(e);var f=e[g];f._id=g+e._id;f._height=(h.height-l.b-l.t)*f.thickness;f._offsetShift=Math.floor(f.borderwidth/2)}}h._rangeSliderData=c};G.autoMarginOpts=function(h,r){h=h._fullLayout;var l=r[g],c=r._id.charAt(0),d=0,e=0;"bottom"===r.side&&(d=r._depth,r.title.text!==h._dfltTitle[c]&&(e=1.5*r.title.font.size+10+l._offsetShift,c=(r.title.text.match(k.BR_TAG_ALL)||
[]).length,e+=c*r.title.font.size*a));return{x:0,y:r._counterDomainMin,l:0,r:0,t:0,b:l._height+d+Math.max(h.margin.b,e),pad:m.extraPad+2*l._offsetShift}}},{"../../constants/alignment":771,"../../lib/svg_text_utils":829,"../../plots/cartesian/axis_ids":858,"./constants":740}],744:[function(b,N,G){G=b("../../lib");var p=b("./attributes"),n=b("./oppaxis_attributes"),k=b("./helpers");N.exports={moduleType:"component",name:"rangeslider",schema:{subplots:{xaxis:{rangeslider:G.extendFlat({},p,{yaxis:n})}}},
layoutAttributes:b("./attributes"),handleDefaults:b("./defaults"),calcAutorange:b("./calc_autorange"),draw:b("./draw"),isVisible:k.isVisible,makeData:k.makeData,autoMarginOpts:k.autoMarginOpts}},{"../../lib":803,"./attributes":738,"./calc_autorange":739,"./defaults":741,"./draw":742,"./helpers":743,"./oppaxis_attributes":745}],745:[function(b,N,G){N.exports={_isSubplotObj:!0,rangemode:{valType:"enumerated",values:["auto","fixed","match"],dflt:"match",editType:"calc"},range:{valType:"info_array",items:[{valType:"any",
editType:"plot"},{valType:"any",editType:"plot"}],editType:"plot"},editType:"calc"}},{}],746:[function(b,N,G){G=b("../annotations/attributes");var p=b("../../traces/scatter/attributes").line,n=b("../drawing/attributes").dash,k=b("../../lib/extend").extendFlat,m=b("../../plot_api/plot_template").templatedArray;b("../../constants/axis_placeable_objects");N.exports=m("shape",{visible:{valType:"boolean",dflt:!0,editType:"calc+arraydraw"},type:{valType:"enumerated",values:["circle","rect","path","line"],
editType:"calc+arraydraw"},layer:{valType:"enumerated",values:["below","above"],dflt:"above",editType:"arraydraw"},xref:k({},G.xref,{}),xsizemode:{valType:"enumerated",values:["scaled","pixel"],dflt:"scaled",editType:"calc+arraydraw"},xanchor:{valType:"any",editType:"calc+arraydraw"},x0:{valType:"any",editType:"calc+arraydraw"},x1:{valType:"any",editType:"calc+arraydraw"},yref:k({},G.yref,{}),ysizemode:{valType:"enumerated",values:["scaled","pixel"],dflt:"scaled",editType:"calc+arraydraw"},yanchor:{valType:"any",
editType:"calc+arraydraw"},y0:{valType:"any",editType:"calc+arraydraw"},y1:{valType:"any",editType:"calc+arraydraw"},path:{valType:"string",editType:"calc+arraydraw"},opacity:{valType:"number",min:0,max:1,dflt:1,editType:"arraydraw"},line:{color:k({},p.color,{editType:"arraydraw"}),width:k({},p.width,{editType:"calc+arraydraw"}),dash:k({},n,{editType:"arraydraw"}),editType:"calc+arraydraw"},fillcolor:{valType:"color",dflt:"rgba(0,0,0,0)",editType:"arraydraw"},fillrule:{valType:"enumerated",values:["evenodd",
"nonzero"],dflt:"evenodd",editType:"arraydraw"},editable:{valType:"boolean",dflt:!1,editType:"calc+arraydraw"},editType:"arraydraw"})},{"../../constants/axis_placeable_objects":772,"../../lib/extend":793,"../../plot_api/plot_template":843,"../../traces/scatter/attributes":1218,"../annotations/attributes":649,"../drawing/attributes":687}],747:[function(b,N,G){function p(h,r,l,c,d,e){h/=2;return"pixel"===r?(l=d?g.extractPathCoords(d,e?a.paramIsY:a.paramIsX):[l,c],r=k.aggNums(Math.max,null,l),l=k.aggNums(Math.min,
null,l),l=0>l?Math.abs(l)+h:h,r=0<r?r+h:h,{ppad:h,ppadplus:e?l:r,ppadminus:e?r:l}):{ppad:h}}function n(h,r,l,c,d){var e="category"===h.type||"multicategory"===h.type?h.r2c:h.d2c;if(void 0!==r)return[e(r),e(l)];if(c){r=Infinity;l=-Infinity;c=c.match(a.segmentRE);var f;"date"===h.type&&(e=g.decodeDate(e));for(h=0;h<c.length;h++){var q=c[h];q=d[q.charAt(0)].drawn;void 0!==q&&(!(f=c[h].substr(1).match(a.paramRE))||f.length<q||(q=e(f[q]),q<r&&(r=q),q>l&&(l=q)))}if(l>=r)return[r,l]}}var k=b("../../lib"),
m=b("../../plots/cartesian/axes"),a=b("./constants"),g=b("./helpers");N.exports=function(h){var r=k.filterVisible(h._fullLayout.shapes);if(r.length&&h._fullData.length)for(var l=0;l<r.length;l++){var c=r[l];c._extremes={};var d=m.getRefType(c.xref);var e=m.getRefType(c.yref);if("paper"!==c.xref&&"domain"!==d){var f="pixel"===c.xsizemode?c.xanchor:c.x0;var q="pixel"===c.xsizemode?c.xanchor:c.x1;d=m.getFromId(h,c.xref);(f=n(d,f,q,c.path,a.paramIsX))&&(c._extremes[d._id]=m.findExtremes(d,f,p(c.line.width,
c.xsizemode,c.x0,c.x1,c.path,!1)))}"paper"!==c.yref&&"domain"!==e&&(e="pixel"===c.ysizemode?c.yanchor:c.y0,f="pixel"===c.ysizemode?c.yanchor:c.y1,d=m.getFromId(h,c.yref),(f=n(d,e,f,c.path,a.paramIsY))&&(c._extremes[d._id]=m.findExtremes(d,f,p(c.line.width,c.ysizemode,c.y0,c.y1,c.path,!0))))}}},{"../../lib":803,"../../plots/cartesian/axes":854,"./constants":748,"./helpers":757}],748:[function(b,N,G){N.exports={segmentRE:/[MLHVQCTSZ][^MLHVQCTSZ]*/g,paramRE:/[^\s,]+/g,paramIsX:{M:{0:!0,drawn:0},L:{0:!0,
drawn:0},H:{0:!0,drawn:0},V:{},Q:{0:!0,2:!0,drawn:2},C:{0:!0,2:!0,4:!0,drawn:4},T:{0:!0,drawn:0},S:{0:!0,2:!0,drawn:2},Z:{}},paramIsY:{M:{1:!0,drawn:1},L:{1:!0,drawn:1},H:{},V:{0:!0,drawn:0},Q:{1:!0,3:!0,drawn:3},C:{1:!0,3:!0,5:!0,drawn:5},T:{1:!0,drawn:1},S:{1:!0,3:!0,drawn:5},Z:{}},numParams:{M:2,L:2,H:1,V:1,Q:4,C:6,T:2,S:4,Z:0}}},{}],749:[function(b,N,G){function p(h,r,l){function c(J,K){return n.coerce(h,r,a,J,K)}if(c("visible")){var d=c("path");d=c("type",d?"path":"rect");"path"!==r.type&&delete r.path;
c("editable");c("layer");c("opacity");c("fillcolor");c("fillrule");c("line.width")&&(c("line.color"),c("line.dash"));for(var e=c("xsizemode"),f=c("ysizemode"),q=["x","y"],t=0;2>t;t++){var w=q[t],x=w+"anchor",z="x"===w?e:f,B={_fullLayout:l},A=k.coerceRef(h,r,B,w,void 0,"paper");if("range"===k.getRefType(A)){var D=k.getFromId(B,A);D._shapeIndices.push(r._index);var C=g.rangeToShapePosition(D);D=g.shapePositionToRange(D)}else D=C=n.identity;if("path"!==d){var v=w+"0";w+="1";var y=h[v],F=h[w];h[v]=D(h[v],
!0);h[w]=D(h[w],!0);"pixel"===z?(c(v,0),c(w,10)):(k.coercePosition(r,B,c,A,v,.25),k.coercePosition(r,B,c,A,w,.75));r[v]=C(r[v]);r[w]=C(r[w]);h[v]=y;h[w]=F}"pixel"===z&&(z=h[x],h[x]=D(h[x],!0),k.coercePosition(r,B,c,A,x,.25),r[x]=C(r[x]),h[x]=z)}"path"===d?c("path"):n.noneOrAll(h,r,["x0","x1","y0","y1"])}}var n=b("../../lib"),k=b("../../plots/cartesian/axes"),m=b("../../plots/array_container_defaults"),a=b("./attributes"),g=b("./helpers");N.exports=function(h,r){m(h,r,{name:"shapes",handleItemDefaults:p})}},
{"../../lib":803,"../../plots/array_container_defaults":849,"../../plots/cartesian/axes":854,"./attributes":746,"./helpers":757}],750:[function(b,N,G){function p(C){var v=C._fullLayout;v._shapeUpperLayer.selectAll("path").remove();v._shapeLowerLayer.selectAll("path").remove();for(var y in v._plots){var F=v._plots[y].shapelayer;F&&F.selectAll("path").remove()}for(y=0;y<v.shapes.length;y++)v.shapes[y].visible&&n(C,y)}function n(C,v){function y(M){var H=a(C,J),O={"data-index":v,"fill-rule":J.fillrule,
d:H},I=J.opacity,L=J.fillcolor,Q=J.line.width?J.line.color:"rgba(0,0,0,0)",Z=J.line.width,ba=J.line.dash;Z||!0!==J.editable||(Z=5,ba="solid");var V="Z"!==H[H.length-1],S=!C._context.edits.shapePosition&&J.editable&&C._fullLayout._activeShapeIndex===v;S&&(L=V?"rgba(0,0,0,0)":C._fullLayout.activeshape.fillcolor,I=C._fullLayout.activeshape.opacity);var T=M.append("path").attr(O).style("opacity",I).call(t.stroke,Q).call(t.fill,L).call(w.dashLine,ba,Z);k(T,C,J);if(S||C._context.edits.shapePosition)var fa=
x(C.layout,"shapes",J);S?(T.style({cursor:"move"}),M={element:T.node(),plotinfo:K,gd:C,editHelpers:fa,isActiveShape:!0},H=e(H,C),f(H,T,M)):C._context.edits.shapePosition?m(C,T,J,v,M,fa):!0===J.editable&&T.style("pointer-events",V||.5>=t.opacity(L)*I?"stroke":"all");T.node().addEventListener("click",function(){a:{if(!C._context.edits.shapePosition){var W=+T.node().getAttribute("data-index");if(0<=W){if(W===C._fullLayout._activeShapeIndex){r(C);W=void 0;break a}C._fullLayout._activeShapeIndex=W;C._fullLayout._deactivateShape=
r;p(C)}}W=void 0}return W})}C._fullLayout._paperdiv.selectAll('.shapelayer [data-index\x3d"'+v+'"]').remove();var F=D.makeOptionsAndPlotinfo(C,v),J=F.options,K=F.plotinfo;J._input&&!1!==J.visible&&("below"!==J.layer?y(C._fullLayout._shapeUpperLayer):"paper"===J.xref||"paper"===J.yref?y(C._fullLayout._shapeLowerLayer):K._hadPlotinfo?y((K.mainplotinfo||K).shapelayer):y(C._fullLayout._shapeLowerLayer))}function k(C,v,y){y=(y.xref+y.yref).replace(/paper/g,"").replace(/[xyz][1-9]* *domain/g,"");w.setClipUrl(C,
y?"clip"+v._fullLayout._uid+y:null,v)}function m(C,v,y,F,J,K){function M(){var tb=Math.max(y.line.width,10),vb=J.append("g").attr("data-index",F);vb.append("path").attr("d",v.attr("d")).style({cursor:"move","stroke-width":tb,"stroke-opacity":"0"});var qb={"fill-opacity":"0"};tb=Math.max(tb/2,10);vb.append("circle").attr({"data-line-point":"start-point",cx:Q?bb(y.xanchor)+y.x0:bb(y.x0),cy:Z?sb(y.yanchor)-y.y0:sb(y.y0),r:tb}).style(qb).classed("cursor-grab",!0);vb.append("circle").attr({"data-line-point":"end-point",
cx:Q?bb(y.xanchor)+y.x1:bb(y.x1),cy:Z?sb(y.yanchor)-y.y1:sb(y.y1),r:tb}).style(qb).classed("cursor-grab",!0);return vb}function H(tb){if(C._fullLayout._drawing)Ab=null;else if(ba)Ab="path"===tb.target.tagName?"move":"start-point"===tb.target.attributes["data-line-point"].value?"resize-over-start-point":"resize-over-end-point";else{var vb=pb.element.getBoundingClientRect(),qb=vb.right-vb.left,zb=vb.bottom-vb.top,La=tb.clientX-vb.left;vb=tb.clientY-vb.top;tb=!V&&10<qb&&10<zb&&!tb.shiftKey?z.getCursor(La/
qb,1-vb/zb):"move";B(v,tb);Ab=tb.split("-")[0]}}function O(tb,vb){if("path"===y.type){var qb=function(La){return La},zb=qb;Q?S("xanchor",y.xanchor=hb(ja+tb)):(zb=function(La){return hb(bb(La)+tb)},za&&"date"===za.type&&(zb=D.encodeDate(zb)));Z?S("yanchor",y.yanchor=ub(ma+vb)):(qb=function(La){return ub(sb(La)+vb)},Wa&&"date"===Wa.type&&(qb=D.encodeDate(qb)));S("path",y.path=h(sa,zb,qb))}else Q?S("xanchor",y.xanchor=hb(ja+tb)):(S("x0",y.x0=hb(T+tb)),S("x1",y.x1=hb(W+tb))),Z?S("yanchor",y.yanchor=ub(ma+
vb)):(S("y0",y.y0=ub(fa+vb)),S("y1",y.y1=ub(aa+vb)));v.attr("d",a(C,y));L(J,y)}function I(tb,vb){if(V){var qb=function(Ja){return Ja},zb=qb;Q?S("xanchor",y.xanchor=hb(ja+tb)):(zb=function(Ja){return hb(bb(Ja)+tb)},za&&"date"===za.type&&(zb=D.encodeDate(zb)));Z?S("yanchor",y.yanchor=ub(ma+vb)):(qb=function(Ja){return ub(sb(Ja)+vb)},Wa&&"date"===Wa.type&&(qb=D.encodeDate(qb)));S("path",y.path=h(sa,zb,qb))}else if(ba)"resize-over-start-point"===Ab?(zb=T+tb,qb=Z?fa-vb:fa+vb,S("x0",y.x0=Q?zb:hb(zb)),S("y0",
y.y0=Z?qb:ub(qb))):"resize-over-end-point"===Ab&&(zb=W+tb,qb=Z?aa-vb:aa+vb,S("x1",y.x1=Q?zb:hb(zb)),S("y1",y.y1=Z?qb:ub(qb)));else{zb=-1!==Ab.indexOf("n");qb=-1!==Ab.indexOf("s");var La=-1!==Ab.indexOf("w"),Ka=-1!==Ab.indexOf("e"),ya=zb?ia+vb:ia,Aa=qb?ra+vb:ra;La=La?wa+tb:wa;Ka=Ka?pa+tb:pa;Z&&(zb&&(ya=ia-vb),qb&&(Aa=ra-vb));if(!Z&&10<Aa-ya||Z&&10<ya-Aa)S(la,y[la]=Z?ya:ub(ya)),S(ka,y[ka]=Z?Aa:ub(Aa));10<Ka-La&&(S(na,y[na]=Q?La:hb(La)),S(oa,y[oa]=Q?Ka:hb(Ka)))}v.attr("d",a(C,y));L(J,y)}function L(tb,
vb){if(Q||Z){var qb="path"!==vb.type;tb=tb.selectAll(".visual-cue").data([0]);tb.enter().append("path").attr({fill:"#fff","fill-rule":"evenodd",stroke:"#000","stroke-width":1}).classed("visual-cue",!0);var zb=bb(Q?vb.xanchor:c.midRange(qb?[vb.x0,vb.x1]:D.extractPathCoords(vb.path,A.paramIsX)));vb=sb(Z?vb.yanchor:c.midRange(qb?[vb.y0,vb.y1]:D.extractPathCoords(vb.path,A.paramIsY)));zb=D.roundPositionForSharpStrokeRendering(zb,1);vb=D.roundPositionForSharpStrokeRendering(vb,1);Q&&Z?tb.attr("d","M"+
(zb-1-1)+","+(vb-1-1)+"h-8v2h8 v8h2v-8 h8v-2h-8 v-8h-2 Z"):Q?tb.attr("d","M"+(zb-1-1)+","+(vb-9-1)+"v18 h2 v-18 Z"):tb.attr("d","M"+(zb-9-1)+","+(vb-1-1)+"h18 v2 h-18 Z")}}var Q="pixel"===y.xsizemode,Z="pixel"===y.ysizemode,ba="line"===y.type,V="path"===y.type,S=K.modifyItem,T,fa,W,aa,ja,ma,ia,ra,wa,pa,la,ka,na,oa,sa,za=d.getFromId(C,y.xref),Ha=d.getRefType(y.xref),Wa=d.getFromId(C,y.yref),Za=d.getRefType(y.yref),bb=D.getDataToPixel(C,za,!1,Ha),sb=D.getDataToPixel(C,Wa,!0,Za),hb=D.getPixelToData(C,
za,!1,Ha),ub=D.getPixelToData(C,Wa,!0,Za);Ha=ba?M():v;var pb={element:Ha.node(),gd:C,prepFn:function(tb){if(!C._fullLayout._drawing){Q&&(ja=bb(y.xanchor));Z&&(ma=sb(y.yanchor));"path"===y.type?sa=y.path:(T=Q?y.x0:bb(y.x0),fa=Z?y.y0:sb(y.y0),W=Q?y.x1:bb(y.x1),aa=Z?y.y1:sb(y.y1));T<W?(wa=T,na="x0",pa=W,oa="x1"):(wa=W,na="x1",pa=T,oa="x0");!Z&&fa<aa||Z&&fa>aa?(ia=fa,la="y0",ra=aa,ka="y1"):(ia=aa,la="y1",ra=fa,ka="y0");H(tb);L(J,y);var vb=y.xref,qb=y.yref,zb=d.getFromId(C,vb),La=d.getFromId(C,qb),Ka=
"";"paper"===vb||zb.autorange||(Ka+=vb);"paper"===qb||La.autorange||(Ka+=qb);w.setClipUrl(v,Ka?"clip"+C._fullLayout._uid+Ka:null,C);pb.moveFn="move"===Ab?O:I;pb.altKey=tb.altKey}},doneFn:function(){C._fullLayout._drawing||(B(v),J.selectAll(".visual-cue").remove(),k(v,C,y),l.call("_guiRelayout",C,K.getUpdateObj()))},clickFn:function(){C._fullLayout._drawing||J.selectAll(".visual-cue").remove()}},Ab;z.init(pb);Ha.node().onmousemove=H}function a(C,v){var y=v.type,F=d.getRefType(v.xref),J=d.getRefType(v.yref),
K=d.getFromId(C,v.xref),M=d.getFromId(C,v.yref),H=C._fullLayout._size;if(K)if("domain"===F)C=function(Q){return K._offset+K._length*Q};else{var O=D.shapePositionToRange(K);C=function(Q){return K._offset+K.r2p(O(Q,!0))}}else C=function(Q){return H.l+H.w*Q};if(M)if("domain"===J)F=function(Q){return M._offset+M._length*(1-Q)};else{var I=D.shapePositionToRange(M);F=function(Q){return M._offset+M.r2p(I(Q,!0))}}else F=function(Q){return H.t+H.h*(1-Q)};if("path"===y)return K&&"date"===K.type&&(C=D.decodeDate(C)),
M&&"date"===M.type&&(F=D.decodeDate(F)),g(v,C,F);if("pixel"===v.xsizemode){C=C(v.xanchor);J=C+v.x0;var L=C+v.x1}else J=C(v.x0),L=C(v.x1);"pixel"===v.ysizemode?(F=F(v.yanchor),C=F-v.y0,v=F-v.y1):(C=F(v.y0),v=F(v.y1));if("line"===y)return"M"+J+","+C+"L"+L+","+v;if("rect"===y)return"M"+J+","+C+"H"+L+"V"+v+"H"+J+"Z";y=(J+L)/2;v=(C+v)/2;J=Math.abs(y-J);C=Math.abs(v-C);F="A"+J+","+C;J=y+J+","+v;return"M"+J+F+" 0 1,1 "+(y+","+(v-C))+F+" 0 0,1 "+J+"Z"}function g(C,v,y){var F=C.xsizemode,J=C.ysizemode,K=C.xanchor,
M=C.yanchor;return C.path.replace(A.segmentRE,function(H){var O=0,I=H.charAt(0),L=A.paramIsX[I],Q=A.paramIsY[I],Z=A.numParams[I],ba=H.substr(1).replace(A.paramRE,function(V){L[O]?V="pixel"===F?v(K)+Number(V):v(V):Q[O]&&(V="pixel"===J?y(M)-Number(V):y(V));O++;O>Z&&(V="X");return V});O>Z&&(ba=ba.replace(/[\s,]*X.*/,""),c.log("Ignoring extra params in segment "+H));return I+ba})}function h(C,v,y){return C.replace(A.segmentRE,function(F){var J=0,K=F.charAt(0),M=A.paramIsX[K],H=A.paramIsY[K],O=A.numParams[K];
F=F.substr(1).replace(A.paramRE,function(I){if(J>=O)return I;M[J]?I=v(I):H[J]&&(I=y(I));J++;return I});return K+F})}function r(C){!C._context.edits.shapePosition&&0<=C._fullLayout._activeShapeIndex&&(q(C),delete C._fullLayout._activeShapeIndex,p(C))}var l=b("../../registry"),c=b("../../lib"),d=b("../../plots/cartesian/axes"),e=b("./draw_newshape/helpers").readPaths,f=b("./draw_newshape/display_outlines"),q=b("../../plots/cartesian/handle_outline").clearOutlineControllers,t=b("../color"),w=b("../drawing"),
x=b("../../plot_api/plot_template").arrayEditor,z=b("../dragelement"),B=b("../../lib/setcursor"),A=b("./constants"),D=b("./helpers");N.exports={draw:p,drawOne:n,eraseActiveShape:function(C){if(!C._context.edits.shapePosition){q(C);var v=C._fullLayout._activeShapeIndex,y=(C.layout||{}).shapes||[];if(v<y.length){for(var F=[],J=0;J<y.length;J++)J!==v&&F.push(y[J]);delete C._fullLayout._activeShapeIndex;l.call("_guiRelayout",C,{shapes:F})}}}}},{"../../lib":803,"../../lib/setcursor":824,"../../plot_api/plot_template":843,
"../../plots/cartesian/axes":854,"../../plots/cartesian/handle_outline":865,"../../registry":931,"../color":666,"../dragelement":685,"../drawing":688,"./constants":748,"./draw_newshape/display_outlines":754,"./draw_newshape/helpers":755,"./helpers":757}],751:[function(b,N,G){G=b("../../drawing/attributes").dash;b=b("../../../lib/extend").extendFlat;N.exports={newshape:{line:{color:{valType:"color",editType:"none"},width:{valType:"number",min:0,dflt:4,editType:"none"},dash:b({},G,{dflt:"solid",editType:"none"}),
editType:"none"},fillcolor:{valType:"color",dflt:"rgba(0,0,0,0)",editType:"none"},fillrule:{valType:"enumerated",values:["evenodd","nonzero"],dflt:"evenodd",editType:"none"},opacity:{valType:"number",min:0,max:1,dflt:1,editType:"none"},layer:{valType:"enumerated",values:["below","above"],dflt:"above",editType:"none"},drawdirection:{valType:"enumerated",values:["ortho","horizontal","vertical","diagonal"],dflt:"diagonal",editType:"none"},editType:"none"},activeshape:{fillcolor:{valType:"color",dflt:"rgb(255,0,255)",
editType:"none"},opacity:{valType:"number",min:0,max:1,dflt:.5,editType:"none"},editType:"none"}}},{"../../../lib/extend":793,"../../drawing/attributes":687}],752:[function(b,N,G){N.exports={CIRCLE_SIDES:32,i000:0,i090:8,i180:16,i270:24,cos45:Math.cos(Math.PI/4),sin45:Math.sin(Math.PI/4),SQRT2:Math.sqrt(2)}},{}],753:[function(b,N,G){var p=b("../../color");N.exports=function(n,k,m){m("newshape.drawdirection");m("newshape.layer");m("newshape.fillcolor");m("newshape.fillrule");m("newshape.opacity");
m("newshape.line.width")&&(m("newshape.line.color",p.contrast((n||{}).plot_bgcolor||"#FFF")),m("newshape.line.dash"));m("activeshape.fillcolor");m("activeshape.opacity")}},{"../../color":666}],754:[function(b,N,G){function p(q,t){for(var w=0;w<t.length;w++){var x=t[w];q[w]=[];for(var z=0;z<x.length;z++){q[w][z]=[];for(var B=0;B<x[z].length;B++)q[w][z][B]=x[z][B]}}return q}var n=b("../../dragelement"),k=b("../../dragelement/helpers").drawMode,m=b("../../../registry");G=b("./constants");var a=G.i000,
g=G.i090,h=G.i180,r=G.i270,l=b("../../../plots/cartesian/handle_outline").clearOutlineControllers;G=b("./helpers");var c=G.pointsShapeRectangle,d=G.pointsShapeEllipse,e=G.writePaths,f=b("./newshapes");N.exports=function B(t,w,x,z){function A(){B(t,w,x,z++);d(t[0])&&D({redrawing:!0})}function D(T){x.isActiveShape=!1;var fa=f(w,x);Object.keys(fa).length&&m.call((T||{}).redrawing?"relayout":"_guiRelayout",O,fa)}function C(T){Z=+T.srcElement.getAttribute("data-i");ba=+T.srcElement.getAttribute("data-j");
Q[Z][ba].moveFn=v}function v(T,fa){if(t.length){var W=V[Z][ba][1],aa=V[Z][ba][2],ja=t[Z],ma=ja.length;if(c(ja)){for(var ia=0;ia<ma;ia++)if(ia!==ba){var ra=ja[ia];ra[1]===ja[ba][1]&&(ra[1]=W+T);ra[2]===ja[ba][2]&&(ra[2]=aa+fa)}ja[ba][1]=W+T;ja[ba][2]=aa+fa;if(!c(ja))for(T=0;T<ma;T++)for(fa=0;fa<ja[T].length;fa++)ja[T][fa]=V[Z][T][fa]}else ja[ba][1]=W+T,ja[ba][2]=aa+fa;A()}}function y(){D()}function F(T,fa){if(2===T&&(Z=+fa.srcElement.getAttribute("data-i"),ba=+fa.srcElement.getAttribute("data-j"),
T=t[Z],!c(T)&&!d(T)&&t.length&&t[Z]&&t[Z].length)){T=[];for(fa=0;fa<t[Z].length;fa++)fa!==ba&&T.push(t[Z][fa]);1<T.length&&(2!==T.length||"Z"!==T[1][0])&&(0===ba&&(T[0][0]="M"),t[Z]=T,A(),D())}}function J(T){Q=[];for(var fa=0;fa<t.length;fa++){var W=t[fa],aa=!c(W)&&d(W);Q[fa]=[];for(var ja=0;ja<W.length;ja++)if("Z"!==W[ja][0]&&(!aa||ja===a||ja===g||ja===h||ja===r)){var ma=W[ja][1],ia=W[ja][2];ma=T.append("circle").classed("cursor-grab",!0).attr("data-i",fa).attr("data-j",ja).attr("cx",ma).attr("cy",
ia).attr("r",4).style({"mix-blend-mode":"luminosity",fill:"black",stroke:"white","stroke-width":1});Q[fa][ja]={element:ma.node(),gd:O,prepFn:C,doneFn:y,clickFn:F};n.init(Q[fa][ja])}}}function K(T,fa){if(t.length)for(var W=0;W<t.length;W++)for(var aa=0;aa<t[W].length;aa++)for(var ja=0;ja+2<t[W][aa].length;ja+=2)t[W][aa][ja+1]=V[W][aa][ja+1]+T,t[W][aa][ja+2]=V[W][aa][ja+2]+fa;A()}function M(T){(Z=+T.srcElement.getAttribute("data-i"))||(Z=0);S[Z].moveFn=K}function H(){D()}z||(z=0);var O=x.gd,I=x.isActiveShape,
L=O._fullLayout._zoomlayer;k(x.dragmode)?O._fullLayout._drawing=!0:0<=O._fullLayout._activeShapeIndex&&l(O);w.attr("d",e(t));var Q,Z,ba;if(I&&!z){var V=p([],t);I=L.append("g").attr("class","outline-controllers");J(I);var S=[];t.length&&(S[0]={element:w[0][0],gd:O,prepFn:M,doneFn:H},n.init(S[0]))}}},{"../../../plots/cartesian/handle_outline":865,"../../../registry":931,"../../dragelement":685,"../../dragelement/helpers":684,"./constants":752,"./helpers":755,"./newshapes":756}],755:[function(b,N,G){function p(c,
d){return 1E-6>=Math.abs(c-d)}function n(c,d){var e=d[1]-c[1];c=d[2]-c[2];return Math.sqrt(e*e+c*c)}var k=b("parse-svg-path");N=b("./constants");var m=N.CIRCLE_SIDES,a=N.SQRT2;b=b("../../../plots/cartesian/helpers");var g=b.p2r,h=b.r2p,r=[0,3,4,5,6,1,2],l=[0,3,4,1,2];G.writePaths=function(c){var d=c.length;if(!d)return"M0,0Z";for(var e="",f=0;f<d;f++)for(var q=c[f].length,t=0;t<q;t++){var w=c[f][t][0];if("Z"===w)e+="Z";else for(var x=c[f][t].length,z=0;z<x;z++){var B=z;"Q"===w||"S"===w?B=l[z]:"C"===
w&&(B=r[z]);e+=c[f][t][B];0<z&&z<x-1&&(e+=",")}}return e};G.readPaths=function(c,d,e,f){c=k(c);var q=[],t=-1,w,x=0,z=0;var B=x;var A=z;for(var D=0;D<c.length;D++){var C=[],v=w=c[D][0];switch(w){case "M":t++;q[t]=[];x=+c[D][1];z=+c[D][2];C.push([v,x,z]);B=x;A=z;break;case "Q":case "S":w=+c[D][1];var y=+c[D][2];x=+c[D][3];z=+c[D][4];C.push([v,x,z,w,y]);break;case "C":w=+c[D][1];y=+c[D][2];var F=+c[D][3];var J=+c[D][4];x=+c[D][5];z=+c[D][6];C.push([v,x,z,w,y,F,J]);break;case "T":case "L":x=+c[D][1];
z=+c[D][2];C.push([v,x,z]);break;case "H":v="L";x=+c[D][1];C.push([v,x,z]);break;case "V":v="L";z=+c[D][1];C.push([v,x,z]);break;case "A":v="L";F=+c[D][1];y=+c[D][2];+c[D][4]||(F=-F,y=-y);J=x-F;var K=z;for(w=1;w<=m/2;w++){var M=2*Math.PI*w/m;C.push([v,J+F*Math.cos(M),K+y*Math.sin(M)])}break;case "Z":if(x!==B||z!==A)x=B,z=A,C.push([v,x,z])}v=(e||{}).domain;F=d._fullLayout._size;y=e&&"pixel"===e.xsizemode;J=e&&"pixel"===e.ysizemode;K=!1===f;for(M=0;M<C.length;M++){for(w=0;7>w+2;w+=2){var H=C[M][w+1],
O=C[M][w+2];void 0!==H&&void 0!==O&&(x=H,z=O,e&&(e.xaxis&&e.xaxis.p2r?(K&&(H-=e.xaxis._offset),H=y?h(e.xaxis,e.xanchor)+H:g(e.xaxis,H)):(K&&(H-=F.l),H=v?v.x[0]+H/F.w:H/F.w),e.yaxis&&e.yaxis.p2r?(K&&(O-=e.yaxis._offset),O=J?h(e.yaxis,e.yanchor)-O:g(e.yaxis,O)):(K&&(O-=F.t),O=v?v.y[1]-O/F.h:1-O/F.h)),C[M][w+1]=H,C[M][w+2]=O)}q[t].push(C[M].slice())}}return q};G.pointsShapeRectangle=function(c){if(5!==c.length)return!1;for(var d=1;3>d;d++)if(!p(c[0][d]-c[1][d],c[3][d]-c[2][d])||!p(c[0][d]-c[3][d],c[1][d]-
c[2][d]))return!1;return p(c[0][1],c[1][1])||p(c[0][1],c[3][1])?!!(n(c[0],c[1])*n(c[0],c[3])):!1};G.pointsShapeEllipse=function(c){var d=c.length;if(d!==m+1)return!1;d=m;for(var e=0;e<d;e++){var f=(2*d-e)%d,q=(d/2+f)%d;if(!p(n(c[e],c[(d/2+e)%d]),n(c[f],c[q])))return!1}return!0};G.handleEllipse=function(c,d,e){if(!c)return[d,e];var f=G.ellipseOver({x0:d[0],y0:d[1],x1:e[0],y1:e[1]});c=(f.x1+f.x0)/2;d=(f.y1+f.y0)/2;e=(f.x1-f.x0)/2;f=(f.y1-f.y0)/2;e||(e=f/=a);f||(f=e/=a);for(var q=[],t=0;t<m;t++){var w=
2*t*Math.PI/m;q.push([c+e*Math.cos(w),d+f*Math.sin(w)])}return q};G.ellipseOver=function(c){var d=c.x0,e=c.y0,f=c.x1,q=c.y1;c=f-d;var t=q-e;d=(d-c+f)/2;e=(e-t+q)/2;c*=a;t*=a;return{x0:d-c,y0:e-t,x1:d+c,y1:e+t}}},{"../../../plots/cartesian/helpers":866,"./constants":752,"parse-svg-path":493}],756:[function(b,N,G){G=b("../../dragelement/helpers");var p=G.drawMode,n=G.openMode;G=b("./constants");var k=G.i000,m=G.i090,a=G.i180,g=G.i270,h=G.cos45,r=G.sin45;G=b("../../../plots/cartesian/helpers");var l=
G.p2r,c=G.r2p,d=b("../../../plots/cartesian/handle_outline").clearSelect;b=b("./helpers");var e=b.readPaths,f=b.writePaths,q=b.ellipseOver;N.exports=function(t,w){if(t.length&&(t=t[0][0])){var x=t.getAttribute("d");t=w.gd;var z=t._fullLayout.newshape,B=w.plotinfo,A=B.xaxis,D=B.yaxis,C=!!B.domain||!B.xaxis,v=!!B.domain||!B.yaxis,y=w.isActiveShape,F=w.dragmode,J=(t.layout||{}).shapes||[];if(!p(F)&&void 0!==y){var K=t._fullLayout._activeShapeIndex;if(K<J.length)switch(t._fullLayout.shapes[K].type){case "rect":F=
"drawrect";break;case "circle":F="drawcircle";break;case "line":F="drawline";break;case "path":F=J[K].path||"",F="Z"===F[F.length-1]?"drawclosedpath":"drawopenpath"}}K=n(F);x=e(x,t,B,y);C={editable:!0,xref:C?"paper":A._id,yref:v?"paper":D._id,layer:z.layer,opacity:z.opacity,line:{color:z.line.color,width:z.line.width,dash:z.line.dash}};K||(C.fillcolor=z.fillcolor,C.fillrule=z.fillrule);var M;1===x.length&&(M=x[0]);if(M&&"drawrect"===F)C.type="rect",C.x0=M[0][1],C.y0=M[0][2],C.x1=M[2][1],C.y1=M[2][2];
else if(M&&"drawline"===F)C.type="line",C.x0=M[0][1],C.y0=M[0][2],C.x1=M[1][1],C.y1=M[1][2];else if(M&&"drawcircle"===F){C.type="circle";x=M[k][1];D=M[m][1];z=M[a][1];A=M[g][1];v=M[k][2];F=M[m][2];K=M[a][2];var H=M[g][2];M=B.xaxis&&("date"===B.xaxis.type||"log"===B.xaxis.type);var O=B.yaxis&&("date"===B.yaxis.type||"log"===B.yaxis.type);M&&(x=c(B.xaxis,x),D=c(B.xaxis,D),z=c(B.xaxis,z),A=c(B.xaxis,A));O&&(v=c(B.yaxis,v),F=c(B.yaxis,F),K=c(B.yaxis,K),H=c(B.yaxis,H));var I=(D+A)/2,L=(v+K)/2;x=q({x0:I,
y0:L,x1:I+(A-D+z-x)/2*h,y1:L+(H-F+K-v)/2*r});M&&(x.x0=l(B.xaxis,x.x0),x.x1=l(B.xaxis,x.x1));O&&(x.y0=l(B.yaxis,x.y0),x.y1=l(B.yaxis,x.y1));C.x0=x.x0;C.y0=x.y0;C.x1=x.x1;C.y1=x.y1}else{C.type="path";if(A&&D&&(B="date"===A.type,M="date"===D.type,B||M))for(D=0;D<x.length;D++)for(z=0;z<x[D].length;z++)for(A=0;A+2<x[D][z].length;A+=2)B&&(x[D][z][A+1]=x[D][z][A+1].replace(" ","_")),M&&(x[D][z][A+2]=x[D][z][A+2].replace(" ","_"));C.path=f(x)}d(t);w=w.editHelpers;B=(w||{}).modifyItem;M=[];for(x=0;x<J.length;x++)if(D=
t._fullLayout.shapes[x],M[x]=D._input,void 0!==y&&x===t._fullLayout._activeShapeIndex)switch(z=C,D.type){case "line":case "rect":case "circle":B("x0",z.x0);B("x1",z.x1);B("y0",z.y0);B("y1",z.y1);break;case "path":B("path",z.path)}return void 0===y?(M.push(C),M):w?w.getUpdateObj():{}}}},{"../../../plots/cartesian/handle_outline":865,"../../../plots/cartesian/helpers":866,"../../dragelement/helpers":684,"./constants":752,"./helpers":755}],757:[function(b,N,G){var p=b("./constants"),n=b("../../lib");
G.rangeToShapePosition=function(k){return"log"===k.type?k.r2d:function(m){return m}};G.shapePositionToRange=function(k){return"log"===k.type?k.d2r:function(m){return m}};G.decodeDate=function(k){return function(m){m.replace&&(m=m.replace("_"," "));return k(m)}};G.encodeDate=function(k){return function(m){return k(m).replace(" ","_")}};G.extractPathCoords=function(k,m){var a=[];k.match(p.segmentRE).forEach(function(g){var h=m[g.charAt(0)].drawn;void 0!==h&&(g=g.substr(1).match(p.paramRE),!g||g.length<
h||a.push(n.cleanNumber(g[h])))});return a};G.getDataToPixel=function(k,m,a,g){var h=k._fullLayout._size;if(m)if("domain"===g)k=function(l){return m._length*(a?1-l:l)+m._offset};else{var r=G.shapePositionToRange(m);k=function(l){return m._offset+m.r2p(r(l,!0))};"date"===m.type&&(k=G.decodeDate(k))}else k=a?function(l){return h.t+h.h*(1-l)}:function(l){return h.l+h.w*l};return k};G.getPixelToData=function(k,m,a,g){var h=k._fullLayout._size;if(m)if("domain"===g)k=function(l){l=(l-m._offset)/m._length;
return a?1-l:l};else{var r=G.rangeToShapePosition(m);k=function(l){return r(m.p2r(l-m._offset))}}else k=a?function(l){return 1-(l-h.t)/h.h}:function(l){return(l-h.l)/h.w};return k};G.roundPositionForSharpStrokeRendering=function(k,m){k=Math.round(k);return 1===Math.round(m%2)?k+.5:k};G.makeOptionsAndPlotinfo=function(k,m){m=k._fullLayout.shapes[m]||{};var a=k._fullLayout._plots[m.xref+m.yref];a?a._hadPlotinfo=!0:(a={},m.xref&&"paper"!==m.xref&&(a.xaxis=k._fullLayout[m.xref+"axis"]),m.yref&&"paper"!==
m.yref&&(a.yaxis=k._fullLayout[m.yref+"axis"]));a.xsizemode=m.xsizemode;a.ysizemode=m.ysizemode;a.xanchor=m.xanchor;a.yanchor=m.yanchor;return{options:m,plotinfo:a}}},{"../../lib":803,"./constants":748}],758:[function(b,N,G){G=b("./draw");N.exports={moduleType:"component",name:"shapes",layoutAttributes:b("./attributes"),supplyLayoutDefaults:b("./defaults"),supplyDrawNewShapeDefaults:b("./draw_newshape/defaults"),includeBasePlot:b("../../plots/cartesian/include_components")("shapes"),calcAutorange:b("./calc_autorange"),
draw:G.draw,drawOne:G.drawOne}},{"../../plots/cartesian/include_components":867,"./attributes":746,"./calc_autorange":747,"./defaults":749,"./draw":750,"./draw_newshape/defaults":753}],759:[function(b,N,G){G=b("../../plots/font_attributes");var p=b("../../plots/pad_attributes"),n=b("../../lib/extend").extendDeepAll,k=b("../../plot_api/edit_types").overrideAll,m=b("../../plots/animation_attributes"),a=b("../../plot_api/plot_template").templatedArray;b=b("./constants");var g=a("step",{visible:{valType:"boolean",
dflt:!0},method:{valType:"enumerated",values:["restyle","relayout","animate","update","skip"],dflt:"restyle"},args:{valType:"info_array",freeLength:!0,items:[{valType:"any"},{valType:"any"},{valType:"any"}]},label:{valType:"string"},value:{valType:"string"},execute:{valType:"boolean",dflt:!0}});N.exports=k(a("slider",{visible:{valType:"boolean",dflt:!0},active:{valType:"number",min:0,dflt:0},steps:g,lenmode:{valType:"enumerated",values:["fraction","pixels"],dflt:"fraction"},len:{valType:"number",
min:0,dflt:1},x:{valType:"number",min:-2,max:3,dflt:0},pad:n(p({editType:"arraydraw"}),{},{t:{dflt:20}}),xanchor:{valType:"enumerated",values:["auto","left","center","right"],dflt:"left"},y:{valType:"number",min:-2,max:3,dflt:0},yanchor:{valType:"enumerated",values:["auto","top","middle","bottom"],dflt:"top"},transition:{duration:{valType:"number",min:0,dflt:150},easing:{valType:"enumerated",values:m.transition.easing.values,dflt:"cubic-in-out"}},currentvalue:{visible:{valType:"boolean",dflt:!0},
xanchor:{valType:"enumerated",values:["left","center","right"],dflt:"left"},offset:{valType:"number",dflt:10},prefix:{valType:"string"},suffix:{valType:"string"},font:G({})},font:G({}),activebgcolor:{valType:"color",dflt:b.gripBgActiveColor},bgcolor:{valType:"color",dflt:b.railBgColor},bordercolor:{valType:"color",dflt:b.railBorderColor},borderwidth:{valType:"number",min:0,dflt:b.railBorderWidth},ticklen:{valType:"number",min:0,dflt:b.tickLength},tickcolor:{valType:"color",dflt:b.tickColor},tickwidth:{valType:"number",
min:0,dflt:1},minorticklen:{valType:"number",min:0,dflt:b.minorTickLength}}),"arraydraw","from-root")},{"../../lib/extend":793,"../../plot_api/edit_types":836,"../../plot_api/plot_template":843,"../../plots/animation_attributes":848,"../../plots/font_attributes":883,"../../plots/pad_attributes":916,"./constants":760}],760:[function(b,N,G){N.exports={name:"sliders",containerClassName:"slider-container",groupClassName:"slider-group",inputAreaClass:"slider-input-area",railRectClass:"slider-rail-rect",
railTouchRectClass:"slider-rail-touch-rect",gripRectClass:"slider-grip-rect",tickRectClass:"slider-tick-rect",inputProxyClass:"slider-input-proxy",labelsClass:"slider-labels",labelGroupClass:"slider-label-group",labelClass:"slider-label",currentValueClass:"slider-current-value",railHeight:5,menuIndexAttrName:"slider-active-index",autoMarginIdRoot:"slider-",minWidth:30,minHeight:30,textPadX:40,arrowOffsetX:4,railRadius:2,railWidth:5,railBorder:4,railBorderWidth:1,railBorderColor:"#bec8d9",railBgColor:"#f8fafc",
railInset:8,stepInset:10,gripRadius:10,gripWidth:20,gripHeight:20,gripBorder:20,gripBorderWidth:1,gripBorderColor:"#bec8d9",gripBgColor:"#f6f8fa",gripBgActiveColor:"#dbdde0",labelPadding:8,labelOffset:0,tickWidth:1,tickColor:"#333",tickOffset:25,tickLength:7,minorTickOffset:25,minorTickColor:"#333",minorTickLength:4,currentValuePadding:8,currentValueInset:0}},{}],761:[function(b,N,G){function p(r,l,c){function d(t,w){return k.coerce(r,l,a,t,w)}for(var e=m(r,l,{name:"steps",handleItemDefaults:n}),
f=0,q=0;q<e.length;q++)e[q].visible&&f++;if(2>f?l.visible=!1:d("visible"))l._stepCount=f,f=l._visibleSteps=k.filterVisible(e),q=d("active"),(e[q]||{}).visible||(l.active=f[0]._index),d("x"),d("y"),k.noneOrAll(r,l,["x","y"]),d("xanchor"),d("yanchor"),d("len"),d("lenmode"),d("pad.t"),d("pad.r"),d("pad.b"),d("pad.l"),k.coerceFont(d,"font",c.font),d("currentvalue.visible")&&(d("currentvalue.xanchor"),d("currentvalue.prefix"),d("currentvalue.suffix"),d("currentvalue.offset"),k.coerceFont(d,"currentvalue.font",
l.font)),d("transition.duration"),d("transition.easing"),d("bgcolor"),d("activebgcolor"),d("bordercolor"),d("borderwidth"),d("ticklen"),d("tickwidth"),d("tickcolor"),d("minorticklen")}function n(r,l){function c(e,f){return k.coerce(r,l,h,e,f)}if("skip"===r.method||Array.isArray(r.args)?c("visible"):l.visible=!1){c("method");c("args");var d=c("label","step-"+l._index);c("value",d);c("execute")}}var k=b("../../lib"),m=b("../../plots/array_container_defaults"),a=b("./attributes"),g=b("./constants").name,
h=a.steps;N.exports=function(r,l){m(r,l,{name:g,handleItemDefaults:p})}},{"../../lib":803,"../../plots/array_container_defaults":849,"./attributes":759,"./constants":760}],762:[function(b,N,G){function p(I,L){I=I[K.name];for(var Q=[],Z=0;Z<I.length;Z++){var ba=I[Z];ba.visible&&(ba._gd=L,Q.push(ba))}return Q}function n(I){return I._index}function k(I,L){var Q=C.tester.selectAll("g."+K.labelGroupClass).data(L._visibleSteps);Q.enter().append("g").classed(K.labelGroupClass,!0);var Z=0,ba=0;Q.each(function(fa){var W=
B.select(this);if(fa=h(W,{step:fa},L).node())fa=C.bBox(fa),ba=Math.max(ba,fa.height),Z=Math.max(Z,fa.width)});Q.remove();var V=L._dims={};V.inputAreaWidth=Math.max(K.railWidth,K.gripHeight);var S=I._fullLayout._size;V.lx=S.l+S.w*L.x;V.ly=S.t+S.h*(1-L.y);V.outerLength="fraction"===L.lenmode?Math.round(S.w*L.len):L.len;V.inputAreaStart=0;V.inputAreaLength=Math.round(V.outerLength-L.pad.l-L.pad.r);V.labelStride=Math.max(1,Math.ceil((Z+K.labelPadding)/((V.inputAreaLength-2*K.stepInset)/(L._stepCount-
1))));V.labelHeight=ba;V.currentValueMaxWidth=0;V.currentValueHeight=0;V.currentValueTotalHeight=0;V.currentValueMaxLines=1;if(L.currentvalue.visible){var T=C.tester.append("g");Q.each(function(fa){var W=a(T,L,fa.label);fa=W.node()&&C.bBox(W.node())||{width:0,height:0};W=F.lineCount(W);V.currentValueMaxWidth=Math.max(V.currentValueMaxWidth,Math.ceil(fa.width));V.currentValueHeight=Math.max(V.currentValueHeight,Math.ceil(fa.height));V.currentValueMaxLines=Math.max(V.currentValueMaxLines,W)});V.currentValueTotalHeight=
V.currentValueHeight+L.currentvalue.offset;T.remove()}V.height=V.currentValueTotalHeight+K.tickOffset+L.ticklen+K.labelOffset+V.labelHeight+L.pad.t+L.pad.b;Q="left";v.isRightAnchor(L)&&(V.lx-=V.outerLength,Q="right");v.isCenterAnchor(L)&&(V.lx-=V.outerLength/2,Q="center");S="top";v.isBottomAnchor(L)&&(V.ly-=V.height,S="bottom");v.isMiddleAnchor(L)&&(V.ly-=V.height/2,S="middle");V.outerLength=Math.ceil(V.outerLength);V.height=Math.ceil(V.height);V.lx=Math.round(V.lx);V.ly=Math.round(V.ly);S={y:L.y,
b:V.height*O[S],t:V.height*H[S]};"fraction"===L.lenmode?(S.l=0,S.xl=L.x-L.len*H[Q],S.r=0,S.xr=L.x+L.len*O[Q]):(S.x=L.x,S.l=V.outerLength*H[Q],S.r=V.outerLength*O[Q]);A.autoMargin(I,K.autoMarginIdRoot+L._index,S)}function m(I,L,Q){(Q.steps[Q.active]||{}).visible||(Q.active=Q._visibleSteps[0]._index);L.call(a,Q).call(z,Q).call(r,Q).call(e,Q).call(x,I,Q).call(g,I,Q);I=Q._dims;C.setTranslate(L,I.lx+Q.pad.l,I.ly+Q.pad.t);L.call(q,Q,!1);L.call(a,Q)}function a(I,L,Q){if(L.currentvalue.visible){var Z=L._dims;
switch(L.currentvalue.xanchor){case "right":var ba=Z.inputAreaLength-K.currentValueInset-Z.currentValueMaxWidth;var V="left";break;case "center":ba=.5*Z.inputAreaLength;V="middle";break;default:ba=K.currentValueInset,V="left"}I=v.ensureSingle(I,"text",K.labelClass,function(fa){fa.attr({"text-anchor":V,"data-notex":1})});var S=L.currentvalue.prefix?L.currentvalue.prefix:"";if("string"===typeof Q)S+=Q;else{Q=L.steps[L.active].label;var T=L._gd._fullLayout._meta;T&&(Q=v.templateString(Q,T));S+=Q}L.currentvalue.suffix&&
(S+=L.currentvalue.suffix);I.call(C.font,L.currentvalue.font).text(S).call(F.convertToTspans,L._gd);S=F.lineCount(I);F.positionText(I,ba,(Z.currentValueMaxLines+1-S)*L.currentvalue.font.size*M);return I}}function g(I,L,Q){v.ensureSingle(I,"rect",K.gripRectClass,function(Z){Z.call(d,L,I,Q).style("pointer-events","all")}).attr({width:K.gripWidth,height:K.gripHeight,rx:K.gripRadius,ry:K.gripRadius}).call(D.stroke,Q.bordercolor).call(D.fill,Q.bgcolor).style("stroke-width",Q.borderwidth+"px")}function h(I,
L,Q){I=v.ensureSingle(I,"text",K.labelClass,function(ba){ba.attr({"text-anchor":"middle","data-notex":1})});L=L.step.label;var Z=Q._gd._fullLayout._meta;Z&&(L=v.templateString(L,Z));I.call(C.font,Q.font).text(L).call(F.convertToTspans,Q._gd);return I}function r(I,L){I=v.ensureSingle(I,"g",K.labelsClass);var Q=L._dims;I=I.selectAll("g."+K.labelGroupClass).data(Q.labelSteps);I.enter().append("g").classed(K.labelGroupClass,!0);I.exit().remove();I.each(function(Z){var ba=B.select(this);ba.call(h,Z,L);
C.setTranslate(ba,t(L,Z.fraction),K.tickOffset+L.ticklen+L.font.size*M+K.labelOffset+Q.currentValueTotalHeight)})}function l(I,L,Q,Z,ba){Z=Q._visibleSteps[Math.round(Z*(Q._stepCount-1))]._index;Z!==Q.active&&c(I,L,Q,Z,!0,ba)}function c(I,L,Q,Z,ba,V){var S=Q.active;Q.active=Z;J(I.layout,K.name,Q).applyUpdate("active",Z);Z=Q.steps[Q.active];L.call(q,Q,V);L.call(a,Q);I.emit("plotly_sliderchange",{slider:Q,step:Q.steps[Q.active],interaction:ba,previousActive:S});Z&&Z.method&&ba&&(L._nextMethod?(L._nextMethod.step=
Z,L._nextMethod.doCallback=ba,L._nextMethod.doTransition=V):(L._nextMethod={step:Z,doCallback:ba,doTransition:V},L._nextMethodRaf=window.requestAnimationFrame(function(){var T=L._nextMethod.step;T.method&&(T.execute&&A.executeAPICommand(I,T.method,T.args),L._nextMethod=null,L._nextMethodRaf=null)})))}function d(I,L,Q){var Z=Q.node(),ba=B.select(L);I.on("mousedown",function(){var V=Q.data()[0];L.emit("plotly_sliderstart",{slider:V});var S=Q.select("."+K.gripRectClass);B.event.stopPropagation();B.event.preventDefault();
S.call(D.fill,V.activebgcolor);var T=w(V,B.mouse(Z)[0]);l(L,Q,V,T,!0);V._dragging=!0;ba.on("mousemove",function(){var fa=Q.data()[0],W=w(fa,B.mouse(Z)[0]);l(L,Q,fa,W,!1)});ba.on("mouseup",function(){var fa=Q.data()[0];fa._dragging=!1;S.call(D.fill,fa.bgcolor);ba.on("mouseup",null);ba.on("mousemove",null);L.emit("plotly_sliderend",{slider:fa,step:fa.steps[fa.active]})})})}function e(I,L){I=I.selectAll("rect."+K.tickRectClass).data(L._visibleSteps);var Q=L._dims;I.enter().append("rect").classed(K.tickRectClass,
!0);I.exit().remove();I.attr({width:L.tickwidth+"px","shape-rendering":"crispEdges"});I.each(function(Z,ba){Z=0===ba%Q.labelStride;var V=B.select(this);V.attr({height:Z?L.ticklen:L.minorticklen}).call(D.fill,L.tickcolor);C.setTranslate(V,t(L,ba/(L._stepCount-1))-.5*L.tickwidth,(Z?K.tickOffset:K.minorTickOffset)+Q.currentValueTotalHeight)})}function f(I){var L=I._dims;L.labelSteps=[];for(var Q=I._stepCount,Z=0;Z<Q;Z+=L.labelStride)L.labelSteps.push({fraction:Z/(Q-1),step:I._visibleSteps[Z]})}function q(I,
L,Q){I=I.select("rect."+K.gripRectClass);for(var Z=0,ba=0;ba<L._stepCount;ba++)if(L._visibleSteps[ba]._index===L.active){Z=ba;break}Z=t(L,Z/(L._stepCount-1));L._invokingCommand||(Q&&0<L.transition.duration&&(I=I.transition().duration(L.transition.duration).ease(L.transition.easing)),I.attr("transform",y(Z-.5*K.gripWidth,L._dims.currentValueTotalHeight)))}function t(I,L){I=I._dims;return I.inputAreaStart+K.stepInset+(I.inputAreaLength-2*K.stepInset)*Math.min(1,Math.max(0,L))}function w(I,L){I=I._dims;
return Math.min(1,Math.max(0,(L-K.stepInset-I.inputAreaStart)/(I.inputAreaLength-2*K.stepInset-2*I.inputAreaStart)))}function x(I,L,Q){var Z=Q._dims,ba=v.ensureSingle(I,"rect",K.railTouchRectClass,function(V){V.call(d,L,I,Q).style("pointer-events","all")});ba.attr({width:Z.inputAreaLength,height:Math.max(Z.inputAreaWidth,K.tickOffset+Q.ticklen+Z.labelHeight)}).call(D.fill,Q.bgcolor).attr("opacity",0);C.setTranslate(ba,0,Z.currentValueTotalHeight)}function z(I,L){var Q=L._dims,Z=Q.inputAreaLength-
2*K.railInset;I=v.ensureSingle(I,"rect",K.railRectClass);I.attr({width:Z,height:K.railWidth,rx:K.railRadius,ry:K.railRadius,"shape-rendering":"crispEdges"}).call(D.stroke,L.bordercolor).call(D.fill,L.bgcolor).style("stroke-width",L.borderwidth+"px");C.setTranslate(I,K.railInset,.5*(Q.inputAreaWidth-K.railWidth)+Q.currentValueTotalHeight)}var B=b("@plotly/d3"),A=b("../../plots/plots"),D=b("../color"),C=b("../drawing"),v=b("../../lib"),y=v.strTranslate,F=b("../../lib/svg_text_utils"),J=b("../../plot_api/plot_template").arrayEditor,
K=b("./constants");b=b("../../constants/alignment");var M=b.LINE_SPACING,H=b.FROM_TL,O=b.FROM_BR;N.exports=function(I){function L(V){V._commandObserver&&(V._commandObserver.remove(),delete V._commandObserver);A.autoMargin(I,K.autoMarginIdRoot+V._index)}var Q=I._fullLayout,Z=p(Q,I);Q=Q._infolayer.selectAll("g."+K.containerClassName).data(0<Z.length?[0]:[]);Q.enter().append("g").classed(K.containerClassName,!0).style("cursor","ew-resize");Q.exit().each(function(){B.select(this).selectAll("g."+K.groupClassName).each(L)}).remove();
if(0!==Z.length){Q=Q.selectAll("g."+K.groupClassName).data(Z,n);Q.enter().append("g").classed(K.groupClassName,!0);Q.exit().each(L).remove();for(var ba=0;ba<Z.length;ba++)k(I,Z[ba]);Q.each(function(V){var S=B.select(this);f(V);A.manageCommandObserver(I,V,V._visibleSteps,function(T){var fa=S.data()[0];fa.active!==T.index&&(fa._dragging||c(I,S,fa,T.index,!1,!0))});m(I,B.select(this),V)})}}},{"../../constants/alignment":771,"../../lib":803,"../../lib/svg_text_utils":829,"../../plot_api/plot_template":843,
"../../plots/plots":917,"../color":666,"../drawing":688,"./constants":760,"@plotly/d3":58}],763:[function(b,N,G){G=b("./constants");N.exports={moduleType:"component",name:G.name,layoutAttributes:b("./attributes"),supplyLayoutDefaults:b("./defaults"),draw:b("./draw")}},{"./attributes":759,"./constants":760,"./defaults":761,"./draw":762}],764:[function(b,N,G){var p=b("@plotly/d3"),n=b("fast-isnumeric"),k=b("../../plots/plots"),m=b("../../registry"),a=b("../../lib"),g=a.strTranslate,h=b("../drawing"),
r=b("../color"),l=b("../../lib/svg_text_utils"),c=b("../../constants/interactions"),d=b("../../constants/alignment").OPPOSITE_SIDE,e=/ [XY][0-9]* /;N.exports={draw:function(f,q,t){function w(S){a.syncOrAsync([x,z],S)}function x(S){if(F){var T="";F.rotate&&(T+="rotate("+[F.rotate,y.x,y.y]+")");F.offset&&(T+=g(0,F.offset))}else T=null;S.attr("transform",T);S.style({"font-family":L,"font-size":p.round(Q,2)+"px",fill:r.rgb(Z),opacity:M*r.opacity(Z),"font-weight":k.fontWeight}).attr(y).call(l.convertToTspans,
f);return k.previousPromises(f)}function z(S){S=p.select(S.node().parentNode);if(v&&v.selection&&v.side&&I){S.attr("transform",null);var T=d[v.side],fa="left"===v.side||"top"===v.side?-1:1,W=n(v.pad)?v.pad:2,aa=h.bBox(S.node()),ja={left:0,top:0,right:K.width,bottom:K.height};ja=v.maxShift||fa*(ja[v.side]-aa[v.side]);var ma=0;if(0>ja)ma=ja;else{var ia=v.offsetLeft||0,ra=v.offsetTop||0;aa.left-=ia;aa.right-=ia;aa.top-=ra;aa.bottom-=ra;v.selection.each(function(){var wa=h.bBox(this);a.bBoxIntersect(aa,
wa,W)&&(ma=Math.max(ma,fa*(wa[v.side]-aa[T])+W))});ma=Math.min(ja,ma)}if(0<ma||0>ja)ja={left:[-ma,0],right:[ma,0],top:[0,-ma],bottom:[0,ma]}[v.side],S.attr("transform",g(ja[0],ja[1]))}}function B(){M=0;H=!0;V.text(D).on("mouseover.opacity",function(){p.select(this).transition().duration(c.SHOW_PLACEHOLDER).style("opacity",1)}).on("mouseout.opacity",function(){p.select(this).transition().duration(c.HIDE_PLACEHOLDER).style("opacity",0)})}var A=t.propName,D=t.placeholder,C=t.traceIndex,v=t.avoid||{},
y=t.attributes,F=t.transform,J=t.containerGroup,K=f._fullLayout,M=1,H=!1,O=t.propContainer.title,I=(O&&O.text?O.text:"").trim();O=O&&O.font?O.font:{};var L=O.family,Q=O.size,Z=O.color,ba;"title.text"===A?ba="titleText":-1!==A.indexOf("axis")?ba="axisTitleText":A.indexOf(!0)&&(ba="colorbarTitleText");ba=f._context.edits[ba];""===I?M=0:I.replace(e," % ")===D.replace(e," % ")&&(M=.2,H=!0,ba||(I=""));t._meta?I=a.templateString(I,t._meta):K._meta&&(I=a.templateString(I,K._meta));t=I||ba;J||(J=a.ensureSingle(K._infolayer,
"g","g-"+q));var V=J.selectAll("text").data(t?[0]:[]);V.enter().append("text");V.text(I).attr("class",q);V.exit().remove();if(!t)return J;V.call(w);if(ba){if(I)V.on(".opacity",null);else B();V.call(l.makeEditable,{gd:f}).on("edit",function(S){void 0!==C?m.call("_guiRestyle",f,A,S,C):m.call("_guiRelayout",f,A,S)}).on("cancel",function(){this.text(this.attr("data-unformatted")).call(w)}).on("input",function(S){this.text(S||" ").call(l.positionText,y.x,y.y)})}V.classed("js-placeholder",H);return J}}},
{"../../constants/alignment":771,"../../constants/interactions":778,"../../lib":803,"../../lib/svg_text_utils":829,"../../plots/plots":917,"../../registry":931,"../color":666,"../drawing":688,"@plotly/d3":58,"fast-isnumeric":249}],765:[function(b,N,G){G=b("../../plots/font_attributes");var p=b("../color/attributes"),n=b("../../lib/extend").extendFlat,k=b("../../plot_api/edit_types").overrideAll,m=b("../../plots/pad_attributes");b=b("../../plot_api/plot_template").templatedArray;var a=b("button",{visible:{valType:"boolean"},
method:{valType:"enumerated",values:["restyle","relayout","animate","update","skip"],dflt:"restyle"},args:{valType:"info_array",freeLength:!0,items:[{valType:"any"},{valType:"any"},{valType:"any"}]},args2:{valType:"info_array",freeLength:!0,items:[{valType:"any"},{valType:"any"},{valType:"any"}]},label:{valType:"string",dflt:""},execute:{valType:"boolean",dflt:!0}});N.exports=k(b("updatemenu",{_arrayAttrRegexps:[/^updatemenus\[(0|[1-9][0-9]+)\]\.buttons/],visible:{valType:"boolean"},type:{valType:"enumerated",
values:["dropdown","buttons"],dflt:"dropdown"},direction:{valType:"enumerated",values:["left","right","up","down"],dflt:"down"},active:{valType:"integer",min:-1,dflt:0},showactive:{valType:"boolean",dflt:!0},buttons:a,x:{valType:"number",min:-2,max:3,dflt:-.05},xanchor:{valType:"enumerated",values:["auto","left","center","right"],dflt:"right"},y:{valType:"number",min:-2,max:3,dflt:1},yanchor:{valType:"enumerated",values:["auto","top","middle","bottom"],dflt:"top"},pad:n(m({editType:"arraydraw"}),
{}),font:G({}),bgcolor:{valType:"color"},bordercolor:{valType:"color",dflt:p.borderLine},borderwidth:{valType:"number",min:0,dflt:1,editType:"arraydraw"}}),"arraydraw","from-root")},{"../../lib/extend":793,"../../plot_api/edit_types":836,"../../plot_api/plot_template":843,"../../plots/font_attributes":883,"../../plots/pad_attributes":916,"../color/attributes":665}],766:[function(b,N,G){N.exports={name:"updatemenus",containerClassName:"updatemenu-container",headerGroupClassName:"updatemenu-header-group",
headerClassName:"updatemenu-header",headerArrowClassName:"updatemenu-header-arrow",dropdownButtonGroupClassName:"updatemenu-dropdown-button-group",dropdownButtonClassName:"updatemenu-dropdown-button",buttonClassName:"updatemenu-button",itemRectClassName:"updatemenu-item-rect",itemTextClassName:"updatemenu-item-text",menuIndexAttrName:"updatemenu-active-index",autoMarginIdRoot:"updatemenu-",blankHeaderOpts:{label:"  "},minWidth:30,minHeight:30,textPadX:24,arrowPadX:16,rx:2,ry:2,textOffsetX:12,textOffsetY:3,
arrowOffsetX:4,gapButtonHeader:5,gapButton:2,activeColor:"#F4FAFF",hoverColor:"#F4FAFF",arrowSymbol:{left:"",right:"",up:"",down:""}}},{}],767:[function(b,N,G){function p(r,l,c){function d(f,q){return k.coerce(r,l,a,f,q)}var e=m(r,l,{name:"buttons",handleItemDefaults:n});d("visible",0<e.length)&&(d("active"),d("direction"),d("type"),d("showactive"),d("x"),d("y"),k.noneOrAll(r,l,["x","y"]),d("xanchor"),d("yanchor"),d("pad.t"),d("pad.r"),d("pad.b"),d("pad.l"),k.coerceFont(d,"font",c.font),d("bgcolor",
c.paper_bgcolor),d("bordercolor"),d("borderwidth"))}function n(r,l){function c(d,e){return k.coerce(r,l,h,d,e)}c("visible","skip"===r.method||Array.isArray(r.args))&&(c("method"),c("args"),c("args2"),c("label"),c("execute"))}var k=b("../../lib"),m=b("../../plots/array_container_defaults"),a=b("./attributes"),g=b("./constants").name,h=a.buttons;N.exports=function(r,l){m(r,l,{name:g,handleItemDefaults:p})}},{"../../lib":803,"../../plots/array_container_defaults":849,"./attributes":765,"./constants":766}],
768:[function(b,N,G){function p(K){return K._index}function n(K,M){return+K.attr(F.menuIndexAttrName)===M._index}function k(K,M,H,O,I,L,Q,Z){M.active=Q;v(K.layout,F.name,M).applyUpdate("active",Q);"buttons"===M.type?a(K,O,null,null,M):"dropdown"===M.type&&(I.attr(F.menuIndexAttrName,"-1"),m(K,O,I,L,M),Z||a(K,O,I,L,M))}function m(K,M,H,O,I){var L=D.ensureSingle(M,"g",F.headerClassName,function(V){V.style("pointer-events","all")}),Q=I._dims,Z={y:I.pad.t,yPad:0,x:I.pad.l,xPad:0,index:0},ba={width:Q.headerWidth,
height:Q.headerHeight};L.call(r,I,I.buttons[I.active]||F.blankHeaderOpts,K).call(t,I,Z,ba);D.ensureSingle(M,"text",F.headerArrowClassName,function(V){V.attr("text-anchor","end").call(A.font,I.font).text(F.arrowSymbol[I.direction])}).attr({x:Q.headerWidth-F.arrowOffsetX+I.pad.l,y:Q.headerHeight/2+F.textOffsetY+I.pad.t});L.on("click",function(){H.call(w,String(n(H,I)?-1:I._index));a(K,M,H,O,I)});L.on("mouseover",function(){L.call(e)});L.on("mouseout",function(){L.call(f,I)});A.setTranslate(M,Q.lx,Q.ly)}
function a(K,M,H,O,I){H||(H=M,H.attr("pointer-events","all"));var L=-1!==+H.attr(F.menuIndexAttrName)||"buttons"===I.type?I.buttons:[],Q="dropdown"===I.type?F.dropdownButtonClassName:F.buttonClassName,Z=H.selectAll("g."+Q).data(D.filterVisible(L));L=Z.enter().append("g").classed(Q,!0);Q=Z.exit();"dropdown"===I.type?(L.attr("opacity","0").transition().attr("opacity","1"),Q.transition().attr("opacity","0").remove()):Q.remove();var ba=0,V=0;L=I._dims;Q=-1!==["up","down"].indexOf(I.direction);"dropdown"===
I.type&&(Q?V=L.headerHeight+F.gapButtonHeader:ba=L.headerWidth+F.gapButtonHeader);"dropdown"===I.type&&"up"===I.direction&&(V=-F.gapButtonHeader+F.gapButton-L.openHeight);"dropdown"===I.type&&"left"===I.direction&&(ba=-F.gapButtonHeader+F.gapButton-L.openWidth);var S={x:L.lx+ba+I.pad.l,y:L.ly+V+I.pad.t,yPad:F.gapButton,xPad:F.gapButton,index:0};ba={l:S.x+I.borderwidth,t:S.y+I.borderwidth};Z.each(function(T,fa){var W=x.select(this);W.call(r,I,T,K).call(t,I,S);W.on("click",function(){x.event.defaultPrevented||
(T.execute&&(T.args2&&I.active===fa?(k(K,I,T,M,H,O,-1),z.executeAPICommand(K,T.method,T.args2)):(k(K,I,T,M,H,O,fa),z.executeAPICommand(K,T.method,T.args))),K.emit("plotly_buttonclicked",{menu:I,button:T,active:I.active}))});W.on("mouseover",function(){W.call(e)});W.on("mouseout",function(){W.call(f,I);Z.call(d,I)})});Z.call(d,I);Q?(ba.w=Math.max(L.openWidth,L.headerWidth),ba.h=S.y-ba.t):(ba.w=S.x-ba.l,ba.h=Math.max(L.openHeight,L.headerHeight));ba.direction=I.direction;O&&(Z.size()?g(K,M,H,O,I,ba):
h(O))}function g(K,M,H,O,I,L){M=I.direction;K=I._dims;I=I.active;var Q,Z;if("up"===M||"down"===M)for(M=Z=0;M<I;M++)Z+=K.heights[M]+F.gapButton;else for(M=Q=0;M<I;M++)Q+=K.widths[M]+F.gapButton;O.enable(L,Q,Z);O.hbar&&O.hbar.attr("opacity","0").transition().attr("opacity","1");O.vbar&&O.vbar.attr("opacity","0").transition().attr("opacity","1")}function h(K){var M=!!K.hbar,H=!!K.vbar;M&&K.hbar.transition().attr("opacity","0").each("end",function(){M=!1;H||K.disable()});H&&K.vbar.transition().attr("opacity",
"0").each("end",function(){H=!1;M||K.disable()})}function r(K,M,H,O){K.call(l,M).call(c,M,H,O)}function l(K,M){D.ensureSingle(K,"rect",F.itemRectClassName,function(H){H.attr({rx:F.rx,ry:F.ry,"shape-rendering":"crispEdges"})}).call(B.stroke,M.bordercolor).call(B.fill,M.bgcolor).style("stroke-width",M.borderwidth+"px")}function c(K,M,H,O){K=D.ensureSingle(K,"text",F.itemTextClassName,function(L){L.attr({"text-anchor":"start","data-notex":1})});H=H.label;var I=O._fullLayout._meta;I&&(H=D.templateString(H,
I));K.call(A.font,M.font).text(H).call(C.convertToTspans,O)}function d(K,M){var H=M.active;K.each(function(O,I){O=x.select(this);I===H&&M.showactive&&O.select("rect."+F.itemRectClassName).call(B.fill,F.activeColor)})}function e(K){K.select("rect."+F.itemRectClassName).call(B.fill,F.hoverColor)}function f(K,M){K.select("rect."+F.itemRectClassName).call(B.fill,M.bgcolor)}function q(K,M){var H=M._dims={width1:0,height1:0,heights:[],widths:[],totalWidth:0,totalHeight:0,openWidth:0,openHeight:0,lx:0,ly:0},
O=A.tester.selectAll("g."+F.dropdownButtonClassName).data(D.filterVisible(M.buttons));O.enter().append("g").classed(F.dropdownButtonClassName,!0);var I=-1!==["up","down"].indexOf(M.direction);O.each(function(ba,V){var S=x.select(this);S.call(r,M,ba,K);S=S.select("."+F.itemTextClassName);ba=S.node()&&A.bBox(S.node()).width;ba=Math.max(ba+F.textPadX,F.minWidth);var T=M.font.size*y;S=C.lineCount(S);S=Math.max(T*S,F.minHeight)+F.textOffsetY;S=Math.ceil(S);ba=Math.ceil(ba);H.widths[V]=ba;H.heights[V]=
S;H.height1=Math.max(H.height1,S);H.width1=Math.max(H.width1,ba);I?(H.totalWidth=Math.max(H.totalWidth,ba),H.openWidth=H.totalWidth,H.totalHeight+=S+F.gapButton,H.openHeight+=S+F.gapButton):(H.totalWidth+=ba+F.gapButton,H.openWidth+=ba+F.gapButton,H.totalHeight=Math.max(H.totalHeight,S),H.openHeight=H.totalHeight)});I?H.totalHeight-=F.gapButton:H.totalWidth-=F.gapButton;H.headerWidth=H.width1+F.arrowPadX;H.headerHeight=H.height1;"dropdown"===M.type&&(I?(H.width1+=F.arrowPadX,H.totalHeight=H.height1):
H.totalWidth=H.width1,H.totalWidth+=F.arrowPadX);O.remove();O=H.totalWidth+M.pad.l+M.pad.r;var L=H.totalHeight+M.pad.t+M.pad.b,Q=K._fullLayout._size;H.lx=Q.l+Q.w*M.x;H.ly=Q.t+Q.h*(1-M.y);Q="left";D.isRightAnchor(M)&&(H.lx-=O,Q="right");D.isCenterAnchor(M)&&(H.lx-=O/2,Q="center");var Z="top";D.isBottomAnchor(M)&&(H.ly-=L,Z="bottom");D.isMiddleAnchor(M)&&(H.ly-=L/2,Z="middle");H.totalWidth=Math.ceil(H.totalWidth);H.totalHeight=Math.ceil(H.totalHeight);H.lx=Math.round(H.lx);H.ly=Math.round(H.ly);z.autoMargin(K,
F.autoMarginIdRoot+M._index,{x:M.x,y:M.y,l:O*({right:1,center:.5}[Q]||0),r:O*({left:1,center:.5}[Q]||0),b:L*({top:1,middle:.5}[Z]||0),t:L*({bottom:1,middle:.5}[Z]||0)})}function t(K,M,H,O){O=O||{};var I=K.select("."+F.itemRectClassName),L=K.select("."+F.itemTextClassName),Q=M.borderwidth,Z=H.index,ba=M._dims;A.setTranslate(K,Q+H.x,Q+H.y);K=-1!==["up","down"].indexOf(M.direction);Q=O.height||(K?ba.heights[Z]:ba.height1);I.attr({x:0,y:0,width:O.width||(K?ba.width1:ba.widths[Z]),height:Q});M=M.font.size*
y;O=C.lineCount(L);C.positionText(L,F.textOffsetX,Q/2-(O-1)*M/2+F.textOffsetY);K?H.y+=ba.heights[Z]+H.yPad:H.x+=ba.widths[Z]+H.xPad;H.index++}function w(K,M){K.attr(F.menuIndexAttrName,M||"-1").selectAll("g."+F.dropdownButtonClassName).remove()}var x=b("@plotly/d3"),z=b("../../plots/plots"),B=b("../color"),A=b("../drawing"),D=b("../../lib"),C=b("../../lib/svg_text_utils"),v=b("../../plot_api/plot_template").arrayEditor,y=b("../../constants/alignment").LINE_SPACING,F=b("./constants"),J=b("./scrollbox");
N.exports=function(K){function M(ba){z.autoMargin(K,F.autoMarginIdRoot+ba._index)}var H=K._fullLayout,O=D.filterVisible(H[F.name]),I=H._menulayer.selectAll("g."+F.containerClassName).data(0<O.length?[0]:[]);I.enter().append("g").classed(F.containerClassName,!0).style("cursor","pointer");I.exit().each(function(){x.select(this).selectAll("g."+F.headerGroupClassName).each(M)}).remove();if(0!==O.length){var L=I.selectAll("g."+F.headerGroupClassName).data(O,p);L.enter().append("g").classed(F.headerGroupClassName,
!0);var Q=D.ensureSingle(I,"g",F.dropdownButtonGroupClassName,function(ba){ba.style("pointer-events","all")});for(I=0;I<O.length;I++)q(K,O[I]);var Z=new J(K,Q,"updatemenus"+H._uid);L.enter().size()&&(Q.node().parentNode.appendChild(Q.node()),Q.call(w));L.exit().each(function(ba){Q.call(w);M(ba)}).remove();L.each(function(ba){var V=x.select(this),S="dropdown"===ba.type?Q:null;z.manageCommandObserver(K,ba,ba.buttons,function(T){k(K,ba,ba.buttons[T.index],V,S,Z,T.index,!0)});"dropdown"===ba.type?(m(K,
V,Q,Z,ba),n(Q,ba)&&a(K,V,Q,Z,ba)):a(K,V,null,null,ba)})}}},{"../../constants/alignment":771,"../../lib":803,"../../lib/svg_text_utils":829,"../../plot_api/plot_template":843,"../../plots/plots":917,"../color":666,"../drawing":688,"./constants":766,"./scrollbox":770,"@plotly/d3":58}],769:[function(b,N,G){arguments[4][763][0].apply(G,arguments)},{"./attributes":765,"./constants":766,"./defaults":767,"./draw":768,dup:763}],770:[function(b,N,G){function p(g,h,r){this.gd=g;this.container=h;this.id=r;this.vbar=
this.hbar=this.translateY=this.translateX=this.position=null;this.bg=this.container.selectAll("rect.scrollbox-bg").data([0]);this.bg.exit().on(".drag",null).on("wheel",null).remove();this.bg.enter().append("rect").classed("scrollbox-bg",!0).style("pointer-events","all").attr({opacity:0,x:0,y:0,width:0,height:0})}N.exports=p;var n=b("@plotly/d3"),k=b("../color"),m=b("../drawing"),a=b("../../lib");p.barWidth=2;p.barLength=20;p.barRadius=2;p.barPad=1;p.barColor="#808BA4";p.prototype.enable=function(g,
h,r){var l=this.gd._fullLayout,c=l.width,d=l.height;this.position=g;g=this.position.l;var e=this.position.w,f=this.position.t,q=this.position.h,t=this.position.direction,w="down"===t,x="left"===t,z="up"===t,B=e,A=q;w||x||"right"===t||z||(this.position.direction="down",w=!0);if(w||z){var D=g;var C=D+B;w?(z=f,t=Math.min(z+A,d)):(t=f+A,z=Math.max(t-A,0));A=t-z}else z=f,t=z+A,x?(C=g+B,D=Math.max(C-B,0)):(D=g,C=Math.min(D+B,c)),B=C-D;this._box={l:D,t:z,w:B,h:A};w=e>B;var v=p.barLength+2*p.barPad;x=p.barWidth+
2*p.barPad;var y=f+q;y+x>d&&(y=d-x);d=this.container.selectAll("rect.scrollbar-horizontal").data(w?[0]:[]);d.exit().on(".drag",null).remove();d.enter().append("rect").classed("scrollbar-horizontal",!0).call(k.fill,p.barColor);w?(this.hbar=d.attr({rx:p.barRadius,ry:p.barRadius,x:g,y,width:v,height:x}),this._hbarXMin=g+v/2,this._hbarTranslateMax=B-v):(delete this.hbar,delete this._hbarXMin,delete this._hbarTranslateMax);d=q>A;B=p.barWidth+2*p.barPad;v=p.barLength+2*p.barPad;y=g+e;y+B>c&&(y=c-B);c=this.container.selectAll("rect.scrollbar-vertical").data(d?
[0]:[]);c.exit().on(".drag",null).remove();c.enter().append("rect").classed("scrollbar-vertical",!0).call(k.fill,p.barColor);d?(this.vbar=c.attr({rx:p.barRadius,ry:p.barRadius,x:y,y:f,width:B,height:v}),this._vbarYMin=f+v/2,this._vbarTranslateMax=A-v):(delete this.vbar,delete this._vbarYMin,delete this._vbarTranslateMax);c=this.id;A=D-.5;C=d?C+B+.5:C+.5;z-=.5;t=w?t+x+.5:t+.5;l=l._topdefs.selectAll("#"+c).data(w||d?[0]:[]);l.exit().remove();l.enter().append("clipPath").attr("id",c).append("rect");
w||d?(this._clipRect=l.select("rect").attr({x:Math.floor(A),y:Math.floor(z),width:Math.ceil(C)-Math.floor(A),height:Math.ceil(t)-Math.floor(z)}),this.container.call(m.setClipUrl,c,this.gd),this.bg.attr({x:g,y:f,width:e,height:q})):(this.bg.attr({width:0,height:0}),this.container.on("wheel",null).on(".drag",null).call(m.setClipUrl,null),delete this._clipRect);if(w||d)l=n.behavior.drag().on("dragstart",function(){n.event.sourceEvent.preventDefault()}).on("drag",this._onBoxDrag.bind(this)),this.container.on("wheel",
null).on("wheel",this._onBoxWheel.bind(this)).on(".drag",null).call(l),l=n.behavior.drag().on("dragstart",function(){n.event.sourceEvent.preventDefault();n.event.sourceEvent.stopPropagation()}).on("drag",this._onBarDrag.bind(this)),w&&this.hbar.on(".drag",null).call(l),d&&this.vbar.on(".drag",null).call(l);this.setTranslate(h,r)};p.prototype.disable=function(){if(this.hbar||this.vbar)this.bg.attr({width:0,height:0}),this.container.on("wheel",null).on(".drag",null).call(m.setClipUrl,null),delete this._clipRect;
this.hbar&&(this.hbar.on(".drag",null),this.hbar.remove(),delete this.hbar,delete this._hbarXMin,delete this._hbarTranslateMax);this.vbar&&(this.vbar.on(".drag",null),this.vbar.remove(),delete this.vbar,delete this._vbarYMin,delete this._vbarTranslateMax)};p.prototype._onBoxDrag=function(){var g=this.translateX,h=this.translateY;this.hbar&&(g-=n.event.dx);this.vbar&&(h-=n.event.dy);this.setTranslate(g,h)};p.prototype._onBoxWheel=function(){var g=this.translateX,h=this.translateY;this.hbar&&(g+=n.event.deltaY);
this.vbar&&(h+=n.event.deltaY);this.setTranslate(g,h)};p.prototype._onBarDrag=function(){var g=this.translateX,h=this.translateY;if(this.hbar){g+=this._hbarXMin;var r=g+this._hbarTranslateMax;g=(a.constrain(n.event.x,g,r)-g)/(r-g)*(this.position.w-this._box.w)}this.vbar&&(h+=this._vbarYMin,r=h+this._vbarTranslateMax,h=(a.constrain(n.event.y,h,r)-h)/(r-h)*(this.position.h-this._box.h));this.setTranslate(g,h)};p.prototype.setTranslate=function(g,h){var r=this.position.w-this._box.w,l=this.position.h-
this._box.h;g=a.constrain(g||0,0,r);h=a.constrain(h||0,0,l);this.translateX=g;this.translateY=h;this.container.call(m.setTranslate,this._box.l-this.position.l-g,this._box.t-this.position.t-h);this._clipRect&&this._clipRect.attr({x:Math.floor(this.position.l+g-.5),y:Math.floor(this.position.t+h-.5)});this.hbar&&this.hbar.call(m.setTranslate,g+g/r*this._hbarTranslateMax,h);this.vbar&&this.vbar.call(m.setTranslate,g,h+h/l*this._vbarTranslateMax)}},{"../../lib":803,"../color":666,"../drawing":688,"@plotly/d3":58}],
771:[function(b,N,G){N.exports={FROM_BL:{left:0,center:.5,right:1,bottom:0,middle:.5,top:1},FROM_TL:{left:0,center:.5,right:1,bottom:1,middle:.5,top:0},FROM_BR:{left:1,center:.5,right:0,bottom:0,middle:.5,top:1},LINE_SPACING:1.3,CAP_SHIFT:.7,MID_SHIFT:.35,OPPOSITE_SIDE:{left:"right",right:"left",top:"bottom",bottom:"top"}}},{}],772:[function(b,N,G){N.exports={axisRefDescription:function(p,n,k){return["If set to a",p,"axis id (e.g. *"+p+"* or","*"+p+"2*), the `"+p+"` position refers to a",p,"coordinate. If set to *paper*, the `"+
p+"`","position refers to the distance from the",n,"of the plotting area in normalized coordinates where *0* (*1*) corresponds to the",n,"("+k+"). If set to a",p,"axis ID followed by *domain* (separated by a space), the position behaves like for *paper*, but refers to the distance in fractions of the domain length from the",n,"of the domain of that axis: e.g.,","*"+p+"2 domain* refers to the domain of the second",p," axis and a",p,"position of 0.5 refers to the point between the",n,"and the",k,"of the domain of the second",
p,"axis."].join(" ")}}},{}],773:[function(b,N,G){N.exports={INCREASING:{COLOR:"#3D9970",SYMBOL:""},DECREASING:{COLOR:"#FF4136",SYMBOL:""}}},{}],774:[function(b,N,G){N.exports={FORMAT_LINK:"https://github.com/d3/d3-format/tree/v1.4.5#d3-format",DATE_FORMAT_LINK:"https://github.com/d3/d3-time-format/tree/v2.2.3#locale_format"}},{}],775:[function(b,N,G){N.exports={COMPARISON_OPS:"\x3d !\x3d \x3c \x3e\x3d \x3e \x3c\x3d".split(" "),COMPARISON_OPS2:["\x3d","\x3c","\x3e\x3d","\x3e","\x3c\x3d"],INTERVAL_OPS:"[] () [) (] ][ )( ]( )[".split(" "),
SET_OPS:["{}","}{"],CONSTRAINT_REDUCTION:{"\x3d":"\x3d","\x3c":"\x3c","\x3c\x3d":"\x3c","\x3e":"\x3e","\x3e\x3d":"\x3e","[]":"[]","()":"[]","[)":"[]","(]":"[]","][":"][",")(":"][","](":"][",")[":"]["}}},{}],776:[function(b,N,G){N.exports={solid:[[],0],dot:[[.5,1],200],dash:[[.5,1],50],longdash:[[.5,1],10],dashdot:[[.5,.625,.875,1],50],longdashdot:[[.5,.7,.8,1],10]}},{}],777:[function(b,N,G){N.exports={circle:"","circle-open":"",square:"","square-open":"",diamond:"","diamond-open":"",cross:"+",
x:""}},{}],778:[function(b,N,G){N.exports={SHOW_PLACEHOLDER:100,HIDE_PLACEHOLDER:1E3,DESELECTDIM:.2}},{}],779:[function(b,N,G){N.exports={BADNUM:void 0,FP_SAFE:1E-4*Number.MAX_VALUE,ONEMAXYEAR:316224E5,ONEAVGYEAR:315576E5,ONEMINYEAR:31536E6,ONEMAXQUARTER:79488E5,ONEAVGQUARTER:78894E5,ONEMINQUARTER:76896E5,ONEMAXMONTH:26784E5,ONEAVGMONTH:26298E5,ONEMINMONTH:24192E5,ONEWEEK:6048E5,ONEDAY:864E5,ONEHOUR:36E5,ONEMIN:6E4,ONESEC:1E3,EPOCHJD:2440587.5,ALMOST_EQUAL:.999999,LOG_CLIP:10,MINUS_SIGN:""}},{}],
780:[function(b,N,G){G.xmlns="http://www.w3.org/2000/xmlns/";G.svg="http://www.w3.org/2000/svg";G.xlink="http://www.w3.org/1999/xlink";G.svgAttrs={xmlns:G.svg,"xmlns:xlink":G.xlink}},{}],781:[function(b,N,G){G.version=b("./version").version;b("native-promise-only");b("../build/plotcss");N=b("./registry");N=G.register=N.register;for(var p=b("./plot_api"),n=Object.keys(p),k=0;k<n.length;k++){var m=n[k];"_"!==m.charAt(0)&&(G[m]=p[m]);N({moduleType:"apiMethod",name:m,fn:p[m]})}N(b("./traces/scatter"));
N([b("./components/legend"),b("./components/fx"),b("./components/annotations"),b("./components/annotations3d"),b("./components/shapes"),b("./components/images"),b("./components/updatemenus"),b("./components/sliders"),b("./components/rangeslider"),b("./components/rangeselector"),b("./components/grid"),b("./components/errorbars"),b("./components/colorscale"),b("./components/colorbar"),b("./components/modebar")]);N([b("./locale-en"),b("./locale-en-us")]);window.PlotlyLocales&&Array.isArray(window.PlotlyLocales)&&
(N(window.PlotlyLocales),delete window.PlotlyLocales);G.Icons=b("./fonts/ploticon");N=b("./components/fx");p=b("./plots/plots");G.Plots={resize:p.resize,graphJson:p.graphJson,sendDataToCloud:p.sendDataToCloud};G.Fx={hover:N.hover,unhover:N.unhover,loneHover:N.loneHover,loneUnhover:N.loneUnhover};G.Snapshot=b("./snapshot");G.PlotSchema=b("./plot_api/plot_schema")},{"../build/plotcss":1,"./components/annotations":657,"./components/annotations3d":662,"./components/colorbar":672,"./components/colorscale":678,
"./components/errorbars":694,"./components/fx":706,"./components/grid":710,"./components/images":715,"./components/legend":723,"./components/modebar":729,"./components/rangeselector":737,"./components/rangeslider":744,"./components/shapes":758,"./components/sliders":763,"./components/updatemenus":769,"./fonts/ploticon":782,"./locale-en":834,"./locale-en-us":833,"./plot_api":838,"./plot_api/plot_schema":842,"./plots/plots":917,"./registry":931,"./snapshot":936,"./traces/scatter":1230,"./version":1404,
"native-promise-only":474}],782:[function(b,N,G){N.exports={undo:{width:857.1,height:1E3,path:"m857 350q0-87-34-166t-91-137-137-92-166-34q-96 0-183 41t-147 114q-4 6-4 13t5 11l76 77q6 5 14 5 9-1 13-7 41-53 100-82t126-29q58 0 110 23t92 61 61 91 22 111-22 111-61 91-92 61-110 23q-55 0-105-20t-90-57l77-77q17-16 8-38-10-23-33-23h-250q-15 0-25 11t-11 25v250q0 24 22 33 22 10 39-8l72-72q60 57 137 88t159 31q87 0 166-34t137-92 91-137 34-166z",transform:"matrix(1 0 0 -1 0 850)"},home:{width:928.6,height:1E3,
path:"m786 296v-267q0-15-11-26t-25-10h-214v214h-143v-214h-214q-15 0-25 10t-11 26v267q0 1 0 2t0 2l321 264 321-264q1-1 1-4z m124 39l-34-41q-5-5-12-6h-2q-7 0-12 3l-386 322-386-322q-7-4-13-4-7 2-12 7l-35 41q-4 5-3 13t6 12l401 334q18 15 42 15t43-15l136-114v109q0 8 5 13t13 5h107q8 0 13-5t5-13v-227l122-102q5-5 6-12t-4-13z",transform:"matrix(1 0 0 -1 0 850)"},"camera-retro":{width:1E3,height:1E3,path:"m518 386q0 8-5 13t-13 5q-37 0-63-27t-26-63q0-8 5-13t13-5 12 5 5 13q0 23 16 38t38 16q8 0 13 5t5 13z m125-73q0-59-42-101t-101-42-101 42-42 101 42 101 101 42 101-42 42-101z m-572-320h858v71h-858v-71z m643 320q0 89-62 152t-152 62-151-62-63-152 63-151 151-63 152 63 62 151z m-571 358h214v72h-214v-72z m-72-107h858v143h-462l-36-71h-360v-72z m929 143v-714q0-30-21-51t-50-21h-858q-29 0-50 21t-21 51v714q0 30 21 51t50 21h858q29 0 50-21t21-51z",
transform:"matrix(1 0 0 -1 0 850)"},zoombox:{width:1E3,height:1E3,path:"m1000-25l-250 251c40 63 63 138 63 218 0 224-182 406-407 406-224 0-406-182-406-406s183-406 407-406c80 0 155 22 218 62l250-250 125 125z m-812 250l0 438 437 0 0-438-437 0z m62 375l313 0 0-312-313 0 0 312z",transform:"matrix(1 0 0 -1 0 850)"},pan:{width:1E3,height:1E3,path:"m1000 350l-187 188 0-125-250 0 0 250 125 0-188 187-187-187 125 0 0-250-250 0 0 125-188-188 186-187 0 125 252 0 0-250-125 0 187-188 188 188-125 0 0 250 250 0 0-126 187 188z",
transform:"matrix(1 0 0 -1 0 850)"},zoom_plus:{width:875,height:1E3,path:"m1 787l0-875 875 0 0 875-875 0z m687-500l-187 0 0-187-125 0 0 187-188 0 0 125 188 0 0 187 125 0 0-187 187 0 0-125z",transform:"matrix(1 0 0 -1 0 850)"},zoom_minus:{width:875,height:1E3,path:"m0 788l0-876 875 0 0 876-875 0z m688-500l-500 0 0 125 500 0 0-125z",transform:"matrix(1 0 0 -1 0 850)"},autoscale:{width:1E3,height:1E3,path:"m250 850l-187 0-63 0 0-62 0-188 63 0 0 188 187 0 0 62z m688 0l-188 0 0-62 188 0 0-188 62 0 0 188 0 62-62 0z m-875-938l0 188-63 0 0-188 0-62 63 0 187 0 0 62-187 0z m875 188l0-188-188 0 0-62 188 0 62 0 0 62 0 188-62 0z m-125 188l-1 0-93-94-156 156 156 156 92-93 2 0 0 250-250 0 0-2 93-92-156-156-156 156 94 92 0 2-250 0 0-250 0 0 93 93 157-156-157-156-93 94 0 0 0-250 250 0 0 0-94 93 156 157 156-157-93-93 0 0 250 0 0 250z",
transform:"matrix(1 0 0 -1 0 850)"},tooltip_basic:{width:1500,height:1E3,path:"m375 725l0 0-375-375 375-374 0-1 1125 0 0 750-1125 0z",transform:"matrix(1 0 0 -1 0 850)"},tooltip_compare:{width:1125,height:1E3,path:"m187 786l0 2-187-188 188-187 0 0 937 0 0 373-938 0z m0-499l0 1-187-188 188-188 0 0 937 0 0 376-938-1z",transform:"matrix(1 0 0 -1 0 850)"},plotlylogo:{width:1542,height:1E3,path:"m0-10h182v-140h-182v140z m228 146h183v-286h-183v286z m225 714h182v-1000h-182v1000z m225-285h182v-715h-182v715z m225 142h183v-857h-183v857z m231-428h182v-429h-182v429z m225-291h183v-138h-183v138z",
transform:"matrix(1 0 0 -1 0 850)"},"z-axis":{width:1E3,height:1E3,path:"m833 5l-17 108v41l-130-65 130-66c0 0 0 38 0 39 0-1 36-14 39-25 4-15-6-22-16-30-15-12-39-16-56-20-90-22-187-23-279-23-261 0-341 34-353 59 3 60 228 110 228 110-140-8-351-35-351-116 0-120 293-142 474-142 155 0 477 22 477 142 0 50-74 79-163 96z m-374 94c-58-5-99-21-99-40 0-24 65-43 144-43 79 0 143 19 143 43 0 19-42 34-98 40v216h87l-132 135-133-135h88v-216z m167 515h-136v1c16 16 31 34 46 52l84 109v54h-230v-71h124v-1c-16-17-28-32-44-51l-89-114v-51h245v72z",
transform:"matrix(1 0 0 -1 0 850)"},"3d_rotate":{width:1E3,height:1E3,path:"m922 660c-5 4-9 7-14 11-359 263-580-31-580-31l-102 28 58-400c0 1 1 1 2 2 118 108 351 249 351 249s-62 27-100 42c88 83 222 183 347 122 16-8 30-17 44-27-2 1-4 2-6 4z m36-329c0 0 64 229-88 296-62 27-124 14-175-11 157-78 225-208 249-266 8-19 11-31 11-31 2 5 6 15 11 32-5-13-8-20-8-20z m-775-239c70-31 117-50 198-32-121 80-199 346-199 346l-96-15-58-12c0 0 55-226 155-287z m603 133l-317-139c0 0 4-4 19-14 7-5 24-15 24-15s-177-147-389 4c235-287 536-112 536-112l31-22 100 299-4-1z m-298-153c6-4 14-9 24-15 0 0-17 10-24 15z",
transform:"matrix(1 0 0 -1 0 850)"},camera:{width:1E3,height:1E3,path:"m500 450c-83 0-150-67-150-150 0-83 67-150 150-150 83 0 150 67 150 150 0 83-67 150-150 150z m400 150h-120c-16 0-34 13-39 29l-31 93c-6 15-23 28-40 28h-340c-16 0-34-13-39-28l-31-94c-6-15-23-28-40-28h-120c-55 0-100-45-100-100v-450c0-55 45-100 100-100h800c55 0 100 45 100 100v450c0 55-45 100-100 100z m-400-550c-138 0-250 112-250 250 0 138 112 250 250 250 138 0 250-112 250-250 0-138-112-250-250-250z m365 380c-19 0-35 16-35 35 0 19 16 35 35 35 19 0 35-16 35-35 0-19-16-35-35-35z",
transform:"matrix(1 0 0 -1 0 850)"},movie:{width:1E3,height:1E3,path:"m938 413l-188-125c0 37-17 71-44 94 64 38 107 107 107 187 0 121-98 219-219 219-121 0-219-98-219-219 0-61 25-117 66-156h-115c30 33 49 76 49 125 0 103-84 187-187 187s-188-84-188-187c0-57 26-107 65-141-38-22-65-62-65-109v-250c0-70 56-126 125-126h500c69 0 125 56 125 126l188-126c34 0 62 28 62 63v375c0 35-28 63-62 63z m-750 0c-69 0-125 56-125 125s56 125 125 125 125-56 125-125-56-125-125-125z m406-1c-87 0-157 70-157 157 0 86 70 156 157 156s156-70 156-156-70-157-156-157z",
transform:"matrix(1 0 0 -1 0 850)"},question:{width:857.1,height:1E3,path:"m500 82v107q0 8-5 13t-13 5h-107q-8 0-13-5t-5-13v-107q0-8 5-13t13-5h107q8 0 13 5t5 13z m143 375q0 49-31 91t-77 65-95 23q-136 0-207-119-9-14 4-24l74-55q4-4 10-4 9 0 14 7 30 38 48 51 19 14 48 14 27 0 48-15t21-33q0-21-11-34t-38-25q-35-16-65-48t-29-70v-20q0-8 5-13t13-5h107q8 0 13 5t5 13q0 10 12 27t30 28q18 10 28 16t25 19 25 27 16 34 7 45z m214-107q0-117-57-215t-156-156-215-58-216 58-155 156-58 215 58 215 155 156 216 58 215-58 156-156 57-215z",
transform:"matrix(1 0 0 -1 0 850)"},disk:{width:857.1,height:1E3,path:"m214-7h429v214h-429v-214z m500 0h72v500q0 8-6 21t-11 20l-157 156q-5 6-19 12t-22 5v-232q0-22-15-38t-38-16h-322q-22 0-37 16t-16 38v232h-72v-714h72v232q0 22 16 38t37 16h465q22 0 38-16t15-38v-232z m-214 518v178q0 8-5 13t-13 5h-107q-7 0-13-5t-5-13v-178q0-8 5-13t13-5h107q7 0 13 5t5 13z m357-18v-518q0-22-15-38t-38-16h-750q-23 0-38 16t-16 38v750q0 22 16 38t38 16h517q23 0 50-12t42-26l156-157q16-15 27-42t11-49z",transform:"matrix(1 0 0 -1 0 850)"},
drawopenpath:{width:70,height:70,path:"M33.21,85.65a7.31,7.31,0,0,1-2.59-.48c-8.16-3.11-9.27-19.8-9.88-41.3-.1-3.58-.19-6.68-.35-9-.15-2.1-.67-3.48-1.43-3.79-2.13-.88-7.91,2.32-12,5.86L3,32.38c1.87-1.64,11.55-9.66,18.27-6.9,2.13.87,4.75,3.14,5.17,9,.17,2.43.26,5.59.36,9.25a224.17,224.17,0,0,0,1.5,23.4c1.54,10.76,4,12.22,4.48,12.4.84.32,2.79-.46,5.76-3.59L43,80.07C41.53,81.57,37.68,85.64,33.21,85.65ZM74.81,69a11.34,11.34,0,0,0,6.09-6.72L87.26,44.5,74.72,32,56.9,38.35c-2.37.86-5.57,3.42-6.61,6L38.65,72.14l8.42,8.43ZM55,46.27a7.91,7.91,0,0,1,3.64-3.17l14.8-5.3,8,8L76.11,60.6l-.06.19a6.37,6.37,0,0,1-3,3.43L48.25,74.59,44.62,71Zm16.57,7.82A6.9,6.9,0,1,0,64.64,61,6.91,6.91,0,0,0,71.54,54.09Zm-4.05,0a2.85,2.85,0,1,1-2.85-2.85A2.86,2.86,0,0,1,67.49,54.09Zm-4.13,5.22L60.5,56.45,44.26,72.7l2.86,2.86ZM97.83,35.67,84.14,22l-8.57,8.57L89.26,44.24Zm-13.69-8,8,8-2.85,2.85-8-8Z",
transform:"matrix(1 0 0 1 -15 -15)"},drawclosedpath:{width:90,height:90,path:"M88.41,21.12a26.56,26.56,0,0,0-36.18,0l-2.07,2-2.07-2a26.57,26.57,0,0,0-36.18,0,23.74,23.74,0,0,0,0,34.8L48,90.12a3.22,3.22,0,0,0,4.42,0l36-34.21a23.73,23.73,0,0,0,0-34.79ZM84,51.24,50.16,83.35,16.35,51.25a17.28,17.28,0,0,1,0-25.47,20,20,0,0,1,27.3,0l4.29,4.07a3.23,3.23,0,0,0,4.44,0l4.29-4.07a20,20,0,0,1,27.3,0,17.27,17.27,0,0,1,0,25.46ZM66.76,47.68h-33v6.91h33ZM53.35,35H46.44V68h6.91Z",transform:"matrix(1 0 0 1 -5 -5)"},
lasso:{width:1031,height:1E3,path:"m1018 538c-36 207-290 336-568 286-277-48-473-256-436-463 10-57 36-108 76-151-13-66 11-137 68-183 34-28 75-41 114-42l-55-70 0 0c-2-1-3-2-4-3-10-14-8-34 5-45 14-11 34-8 45 4 1 1 2 3 2 5l0 0 113 140c16 11 31 24 45 40 4 3 6 7 8 11 48-3 100 0 151 9 278 48 473 255 436 462z m-624-379c-80 14-149 48-197 96 42 42 109 47 156 9 33-26 47-66 41-105z m-187-74c-19 16-33 37-39 60 50-32 109-55 174-68-42-25-95-24-135 8z m360 75c-34-7-69-9-102-8 8 62-16 128-68 170-73 59-175 54-244-5-9 20-16 40-20 61-28 159 121 317 333 354s407-60 434-217c28-159-121-318-333-355z",
transform:"matrix(1 0 0 -1 0 850)"},selectbox:{width:1E3,height:1E3,path:"m0 850l0-143 143 0 0 143-143 0z m286 0l0-143 143 0 0 143-143 0z m285 0l0-143 143 0 0 143-143 0z m286 0l0-143 143 0 0 143-143 0z m-857-286l0-143 143 0 0 143-143 0z m857 0l0-143 143 0 0 143-143 0z m-857-285l0-143 143 0 0 143-143 0z m857 0l0-143 143 0 0 143-143 0z m-857-286l0-143 143 0 0 143-143 0z m286 0l0-143 143 0 0 143-143 0z m285 0l0-143 143 0 0 143-143 0z m286 0l0-143 143 0 0 143-143 0z",transform:"matrix(1 0 0 -1 0 850)"},
drawline:{width:70,height:70,path:"M60.64,62.3a11.29,11.29,0,0,0,6.09-6.72l6.35-17.72L60.54,25.31l-17.82,6.4c-2.36.86-5.57,3.41-6.6,6L24.48,65.5l8.42,8.42ZM40.79,39.63a7.89,7.89,0,0,1,3.65-3.17l14.79-5.31,8,8L61.94,54l-.06.19a6.44,6.44,0,0,1-3,3.43L34.07,68l-3.62-3.63Zm16.57,7.81a6.9,6.9,0,1,0-6.89,6.9A6.9,6.9,0,0,0,57.36,47.44Zm-4,0a2.86,2.86,0,1,1-2.85-2.85A2.86,2.86,0,0,1,53.32,47.44Zm-4.13,5.22L46.33,49.8,30.08,66.05l2.86,2.86ZM83.65,29,70,15.34,61.4,23.9,75.09,37.59ZM70,21.06l8,8-2.84,2.85-8-8ZM87,80.49H10.67V87H87Z",
transform:"matrix(1 0 0 1 -15 -15)"},drawrect:{width:80,height:80,path:"M78,22V79H21V22H78m9-9H12V88H87V13ZM68,46.22H31V54H68ZM53,32H45.22V69H53Z",transform:"matrix(1 0 0 1 -10 -10)"},drawcircle:{width:80,height:80,path:"M50,84.72C26.84,84.72,8,69.28,8,50.3S26.84,15.87,50,15.87,92,31.31,92,50.3,73.16,84.72,50,84.72Zm0-60.59c-18.6,0-33.74,11.74-33.74,26.17S31.4,76.46,50,76.46,83.74,64.72,83.74,50.3,68.6,24.13,50,24.13Zm17.15,22h-34v7.11h34Zm-13.8-13H46.24v34h7.11Z",transform:"matrix(1 0 0 1 -10 -10)"},
eraseshape:{width:80,height:80,path:"M82.77,78H31.85L6,49.57,31.85,21.14H82.77a8.72,8.72,0,0,1,8.65,8.77V69.24A8.72,8.72,0,0,1,82.77,78ZM35.46,69.84H82.77a.57.57,0,0,0,.49-.6V29.91a.57.57,0,0,0-.49-.61H35.46L17,49.57Zm32.68-34.7-24,24,5,5,24-24Zm-19,.53-5,5,24,24,5-5Z",transform:"matrix(1 0 0 1 -10 -10)"},spikeline:{width:1E3,height:1E3,path:"M512 409c0-57-46-104-103-104-57 0-104 47-104 104 0 57 47 103 104 103 57 0 103-46 103-103z m-327-39l92 0 0 92-92 0z m-185 0l92 0 0 92-92 0z m370-186l92 0 0 93-92 0z m0-184l92 0 0 92-92 0z",
transform:"matrix(1.5 0 0 -1.5 0 850)"},pencil:{width:1792,height:1792,path:"M491 1536l91-91-235-235-91 91v107h128v128h107zm523-928q0-22-22-22-10 0-17 7l-542 542q-7 7-7 17 0 22 22 22 10 0 17-7l542-542q7-7 7-17zm-54-192l416 416-832 832h-416v-416zm683 96q0 53-37 90l-166 166-416-416 166-165q36-38 90-38 53 0 91 38l235 234q37 39 37 91z",transform:"matrix(1 0 0 1 0 1)"},newplotlylogo:{name:"newplotlylogo",svg:"\x3csvg xmlns\x3d'http://www.w3.org/2000/svg' viewBox\x3d'0 0 132 132'\x3e\x3cdefs\x3e\x3cstyle\x3e.cls-1 {fill: #3f4f75;} .cls-2 {fill: #80cfbe;} .cls-3 {fill: #fff;}\x3c/style\x3e\x3c/defs\x3e\x3ctitle\x3eplotly-logomark\x3c/title\x3e\x3cg id\x3d'symbol'\x3e\x3crect class\x3d'cls-1' width\x3d'132' height\x3d'132' rx\x3d'6' ry\x3d'6'/\x3e\x3ccircle class\x3d'cls-2' cx\x3d'78' cy\x3d'54' r\x3d'6'/\x3e\x3ccircle class\x3d'cls-2' cx\x3d'102' cy\x3d'30' r\x3d'6'/\x3e\x3ccircle class\x3d'cls-2' cx\x3d'78' cy\x3d'30' r\x3d'6'/\x3e\x3ccircle class\x3d'cls-2' cx\x3d'54' cy\x3d'30' r\x3d'6'/\x3e\x3ccircle class\x3d'cls-2' cx\x3d'30' cy\x3d'30' r\x3d'6'/\x3e\x3ccircle class\x3d'cls-2' cx\x3d'30' cy\x3d'54' r\x3d'6'/\x3e\x3cpath class\x3d'cls-3' d\x3d'M30,72a6,6,0,0,0-6,6v24a6,6,0,0,0,12,0V78A6,6,0,0,0,30,72Z'/\x3e\x3cpath class\x3d'cls-3' d\x3d'M78,72a6,6,0,0,0-6,6v24a6,6,0,0,0,12,0V78A6,6,0,0,0,78,72Z'/\x3e\x3cpath class\x3d'cls-3' d\x3d'M54,48a6,6,0,0,0-6,6v48a6,6,0,0,0,12,0V54A6,6,0,0,0,54,48Z'/\x3e\x3cpath class\x3d'cls-3' d\x3d'M102,48a6,6,0,0,0-6,6v48a6,6,0,0,0,12,0V54A6,6,0,0,0,102,48Z'/\x3e\x3c/g\x3e\x3c/svg\x3e"}}},
{}],783:[function(b,N,G){G.isLeftAnchor=function(p){return"left"===p.xanchor||"auto"===p.xanchor&&p.x<=1/3};G.isCenterAnchor=function(p){return"center"===p.xanchor||"auto"===p.xanchor&&p.x>1/3&&p.x<2/3};G.isRightAnchor=function(p){return"right"===p.xanchor||"auto"===p.xanchor&&p.x>=2/3};G.isTopAnchor=function(p){return"top"===p.yanchor||"auto"===p.yanchor&&p.y>=2/3};G.isMiddleAnchor=function(p){return"middle"===p.yanchor||"auto"===p.yanchor&&p.y>1/3&&p.y<2/3};G.isBottomAnchor=function(p){return"bottom"===
p.yanchor||"auto"===p.yanchor&&p.y<=1/3}},{}],784:[function(b,N,G){function p(l){return Math.abs(l[1]-l[0])>r-1E-14}function n(l,c){return g(c-l,r)}function k(l,c){if(p(c))return!0;if(c[0]<c[1]){var d=c[0];c=c[1]}else d=c[1],c=c[0];d=a(d,r);c=a(c,r);d>c&&(c+=r);l=a(l,r);var e=l+r;return l>=d&&l<=c||e>=d&&e<=c}function m(l,c,d,e,f,q,t){function w(C,v){return[C*Math.cos(v)+f,q-C*Math.sin(v)]}function x(C,v,y){return"A"+[C,C]+" "+[0,D,y]+" "+w(C,v)}f=f||0;q=q||0;var z=p([d,e]);if(z){var B=0;var A=h;
d=r}else d<e?(B=d,d=e):B=e;l<c?(e=l,l=c):e=c;var D=Math.abs(d-B)<=h?0:1;z?z=null===e?"M"+w(l,B)+x(l,A,0)+x(l,d,0)+"Z":"M"+w(e,B)+x(e,A,0)+x(e,d,0)+"ZM"+w(l,B)+x(l,A,1)+x(l,d,1)+"Z":null===e?(z="M"+w(l,B)+x(l,d,0),t&&(z+="L0,0Z")):z="M"+w(e,B)+"L"+w(l,B)+x(l,d,0)+"L"+w(e,d)+x(e,B,1)+"Z";return z}b=b("./mod");var a=b.mod,g=b.modHalf,h=Math.PI,r=2*h;N.exports={deg2rad:function(l){return l/180*h},rad2deg:function(l){return l/h*180},angleDelta:n,angleDist:function(l,c){return Math.abs(n(l,c))},isFullCircle:p,
isAngleInsideSector:k,isPtInsideSector:function(l,c,d,e){if(!k(c,e))return!1;d[0]<d[1]?(c=d[0],d=d[1]):(c=d[1],d=d[0]);return l>=c&&l<=d},pathArc:function(l,c,d,e,f){return m(null,l,c,d,e,f,0)},pathSector:function(l,c,d,e,f){return m(null,l,c,d,e,f,1)},pathAnnulus:function(l,c,d,e,f,q){return m(l,c,d,e,f,q,1)}}},{"./mod":810}],785:[function(b,N,G){function p(h){return a.isView(h)&&!(h instanceof g)}function n(h){return m(h)||p(h)}function k(h,r,l){if(n(h)){if(n(h[0])){for(var c=0;c<h.length;c++)l=
r(l,h[c].length);return l}return h.length}return 0}var m=Array.isArray,a=ArrayBuffer,g=DataView;G.isTypedArray=p;G.isArrayOrTypedArray=n;G.isArray1D=function(h){return!n(h[0])};G.ensureArray=function(h,r){m(h)||(h=[]);h.length=r;return h};G.concat=function(){var h=[],r=!0,l=0,c,d;for(c=0;c<arguments.length;c++){var e=arguments[c];if(d=e.length){if(f)h.push(e);else{var f=e;var q=d}if(m(e))var t=!1;else r=!1,l?t!==e.constructor&&(t=!1):t=e.constructor;l+=d}}if(!l)return[];if(!h.length)return f;if(r)return f.concat.apply(f,
h);if(t){r=new t(l);r.set(f);for(c=0;c<h.length;c++)e=h[c],r.set(e,q),q+=e.length;return r}r=Array(l);for(l=0;l<f.length;l++)r[l]=f[l];for(c=0;c<h.length;c++){e=h[c];for(l=0;l<e.length;l++)r[q+l]=e[l];q+=l}return r};G.maxRowLength=function(h){return k(h,Math.max,0)};G.minRowLength=function(h){return k(h,Math.min,Infinity)}},{}],786:[function(b,N,G){var p=b("fast-isnumeric"),n=b("../constants/numerical").BADNUM,k=/^['"%,$#\s']+|[, ]|['"%,$#\s']+$/g;N.exports=function(m){"string"===typeof m&&(m=m.replace(k,
""));return p(m)?Number(m):n}},{"../constants/numerical":779,"fast-isnumeric":249}],787:[function(b,N,G){N.exports=function(p){p=p._fullLayout;p._glcanvas&&p._glcanvas.size()&&p._glcanvas.each(function(n){n.regl&&n.regl.clear({color:!0,depth:!0})})}},{}],788:[function(b,N,G){N.exports=function(p){p._responsiveChartHandler&&(window.removeEventListener("resize",p._responsiveChartHandler),delete p._responsiveChartHandler)}},{}],789:[function(b,N,G){function p(e,f){var q=G.valObjectMeta[f.valType];if(f.arrayOk&&
d(e))return!0;if(q.validateFunction)return q.validateFunction(e,f);var t={},w=t;q.coerceFunction(e,{set:function(x){w=x}},t,f);return w!==t}var n=b("fast-isnumeric"),k=b("tinycolor2"),m=b("../plots/attributes"),a=b("../components/colorscale/scales"),g=b("../components/color"),h=b("../constants/interactions").DESELECTDIM,r=b("./nested_property"),l=b("./regex").counter,c=b("./mod").modHalf,d=b("./array").isArrayOrTypedArray;G.valObjectMeta={data_array:{coerceFunction:function(e,f,q){d(e)?f.set(e):void 0!==
q&&f.set(q)}},enumerated:{coerceFunction:function(e,f,q,t){t.coerceNumber&&(e=+e);-1===t.values.indexOf(e)?f.set(q):f.set(e)},validateFunction:function(e,f){f.coerceNumber&&(e=+e);f=f.values;for(var q=0;q<f.length;q++){var t=String(f[q]);if("/"===t.charAt(0)&&"/"===t.charAt(t.length-1)){if((new RegExp(t.substr(1,t.length-2))).test(e))return!0}else if(e===f[q])return!0}return!1}},"boolean":{coerceFunction:function(e,f,q){!0===e||!1===e?f.set(e):f.set(q)}},number:{coerceFunction:function(e,f,q,t){!n(e)||
void 0!==t.min&&e<t.min||void 0!==t.max&&e>t.max?f.set(q):f.set(+e)}},integer:{coerceFunction:function(e,f,q,t){e%1||!n(e)||void 0!==t.min&&e<t.min||void 0!==t.max&&e>t.max?f.set(q):f.set(+e)}},string:{coerceFunction:function(e,f,q,t){"string"!==typeof e?!0===t.strict||"number"!==typeof e?f.set(q):f.set(String(e)):t.noBlank&&!e?f.set(q):f.set(e)}},color:{coerceFunction:function(e,f,q){k(e).isValid()?f.set(e):f.set(q)}},colorlist:{coerceFunction:function(e,f,q){function t(w){return k(w).isValid()}
Array.isArray(e)&&e.length?e.every(t)?f.set(e):f.set(q):f.set(q)}},colorscale:{coerceFunction:function(e,f,q){f.set(a.get(e,q))}},angle:{coerceFunction:function(e,f,q){"auto"===e?f.set("auto"):n(e)?f.set(c(+e,360)):f.set(q)}},subplotid:{coerceFunction:function(e,f,q,t){t=t.regex||l(q);"string"===typeof e&&t.test(e)?f.set(e):f.set(q)},validateFunction:function(e,f){f=f.dflt;return e===f?!0:"string"!==typeof e?!1:l(f).test(e)?!0:!1}},flaglist:{coerceFunction:function(e,f,q,t){if("string"!==typeof e)f.set(q);
else if(-1!==(t.extras||[]).indexOf(e))f.set(e);else{e=e.split("+");for(var w=0;w<e.length;){var x=e[w];-1===t.flags.indexOf(x)||e.indexOf(x)<w?e.splice(w,1):w++}e.length?f.set(e.join("+")):f.set(q)}}},any:{coerceFunction:function(e,f,q){void 0===e?f.set(q):f.set(e)}},info_array:{coerceFunction:function(e,f,q,t){function w(J,K,M){var H;void 0===M&&(M=K.dflt);G.valObjectMeta[K.valType].coerceFunction(J,{set:function(O){H=O}},M,K);return H}var x=2===t.dimensions||"1-2"===t.dimensions&&Array.isArray(e)&&
Array.isArray(e[0]);if(Array.isArray(e)){t=t.items;var z=[],B=Array.isArray(t),A=B&&x&&Array.isArray(t[0]);A=x&&B&&!A;var D=B&&!A?t.length:e.length,C;q=Array.isArray(q)?q:[];if(x)for(x=0;x<D;x++){z[x]=[];var v=Array.isArray(e[x])?e[x]:[];var y=A?t.length:B?t[x].length:v.length;for(C=0;C<y;C++){var F=A?t[C]:B?t[x][C]:t;F=w(v[C],F,(q[x]||[])[C]);void 0!==F&&(z[x][C]=F)}}else for(x=0;x<D;x++)F=w(e[x],B?t[x]:t,q[x]),void 0!==F&&(z[x]=F);f.set(z)}else f.set(q)},validateFunction:function(e,f){if(!Array.isArray(e))return!1;
var q=f.items,t=Array.isArray(q),w=2===f.dimensions;if(!f.freeLength&&e.length!==q.length)return!1;for(var x=0;x<e.length;x++)if(w){if(!Array.isArray(e[x])||!f.freeLength&&e[x].length!==q[x].length)return!1;for(var z=0;z<e[x].length;z++)if(!p(e[x][z],t?q[x][z]:q))return!1}else if(!p(e[x],t?q[x]:q))return!1;return!0}}};G.coerce=function(e,f,q,t,w){q=r(q,t).get();var x=r(e,t);e=r(f,t);x=x.get();f=f._template;void 0===x&&f&&(x=r(f,t).get(),f=0);void 0===w&&(w=q.dflt);if(q.arrayOk&&d(x))return e.set(x),
x;var z=G.valObjectMeta[q.valType].coerceFunction;z(x,e,w,q);var B=e.get();f&&B===w&&!p(x,q)&&(x=r(f,t).get(),z(x,e,w,q),B=e.get());return B};G.coerce2=function(e,f,q,t,w){var x=r(e,t);e=G.coerce(e,f,q,t,w);x=x.get();return void 0!==x&&null!==x?e:!1};G.coerceFont=function(e,f,q){var t={};q=q||{};t.family=e(f+".family",q.family);t.size=e(f+".size",q.size);t.color=e(f+".color",q.color);return t};G.coercePattern=function(e,f,q,t){if(e(f+".shape")){e(f+".solidity");e(f+".size");var w="overlay"===e(f+
".fillmode");t||(t=e(f+".bgcolor",w?q:void 0),e(f+".fgcolor",w?g.contrast(t):q));e(f+".fgopacity",w?.5:1)}};G.coerceHoverinfo=function(e,f,q){var t=f._module.attributes;t=t.hoverinfo?t:m;var w=t.hoverinfo;if(1===q._dataLength){q="all"===w.dflt?w.flags.slice():w.dflt.split("+");q.splice(q.indexOf("name"),1);var x=q.join("+")}return G.coerce(e,f,t,"hoverinfo",x)};G.coerceSelectionMarkerOpacity=function(e,f){if(e.marker){var q=e.marker.opacity;if(void 0!==q){if(!d(q)&&!e.selected&&!e.unselected){var t=
q;var w=h*q}f("selected.marker.opacity",t);f("unselected.marker.opacity",w)}}};G.validate=p},{"../components/color":666,"../components/colorscale/scales":681,"../constants/interactions":778,"../plots/attributes":850,"./array":785,"./mod":810,"./nested_property":811,"./regex":820,"fast-isnumeric":249,tinycolor2:598}],790:[function(b,N,G){function p(O){return O&&t.componentsRegistry.calendars&&"string"===typeof O&&"gregorian"!==O}function n(O,I){return String(O+Math.pow(10,I)).substr(1)}function k(O,
I,L,Q,Z){if(I||L||Q||Z)if(O+=" "+n(I,2)+":"+n(L,2),Q||Z)if(O+=":"+n(Q,2),Z){for(I=4;0===Z%10;)--I,Z/=10;O+="."+n(Z,I)}return O}function m(O,I,L,Q){O=O.replace(F,function(ba){ba=Math.min(+ba.charAt(1)||6,6);return(I/1E3%1+2).toFixed(ba).substr(2).replace(/0+$/,"")||"0"});var Z=new Date(Math.floor(I+.05));O=O.replace(J,function(){return K[L("%q")(Z)]});if(p(Q))try{O=t.getComponentMethod("calendars","worldCalFmt")(O,I,Q)}catch(ba){return"Invalid"}return L(O)(Z)}var a=b("d3-time-format").timeFormat,g=
b("fast-isnumeric"),h=b("./loggers"),r=b("./mod").mod;N=b("../constants/numerical");var l=N.BADNUM,c=N.ONEDAY,d=N.ONEHOUR,e=N.ONEMIN,f=N.ONESEC,q=N.EPOCHJD,t=b("../registry"),w=b("d3-time-format").utcFormat,x=/^\s*(-?\d\d\d\d|\d\d)(-(\d?\d)(-(\d?\d)([ Tt]([01]?\d|2[0-3])(:([0-5]\d)(:([0-5]\d(\.\d+)?))?(Z|z|[+\-]\d\d(:?\d\d)?)?)?)?)?)?\s*$/m,z=/^\s*(-?\d\d\d\d|\d\d)(-(\d?\di?)(-(\d?\d)([ Tt]([01]?\d|2[0-3])(:([0-5]\d)(:([0-5]\d(\.\d+)?))?(Z|z|[+\-]\d\d(:?\d\d)?)?)?)?)?)?\s*$/m,B=(new Date).getFullYear()-
70;G.dateTick0=function(O,I){var L=!!I;L=p(O)?L?t.getComponentMethod("calendars","CANONICAL_SUNDAY")[O]:t.getComponentMethod("calendars","CANONICAL_TICK")[O]:L?"2000-01-02":"2000-01-01";if(2>I)return L;L=G.dateTime2ms(L,O);L+=c*(I-1);return G.ms2DateTime(L,0,O)};G.dfltRange=function(O){return p(O)?t.getComponentMethod("calendars","DFLTRANGE")[O]:["2000-01-01","2001-01-01"]};G.isJSDate=function(O){return"object"===typeof O&&null!==O&&"function"===typeof O.getTime};G.dateTime2ms=function(O,I){if(G.isJSDate(O)){I=
O.getTimezoneOffset()*e;var L=(O.getUTCMinutes()-O.getMinutes())*e+(O.getUTCSeconds()-O.getSeconds())*f+(O.getUTCMilliseconds()-O.getMilliseconds());if(L){var Q=3*e;I=I-Q/2+r(L-I+Q/2,Q)}O=Number(O)-I;return O>=A&&O<=D?O:l}if("string"!==typeof O&&"number"!==typeof O)return l;O=String(O);L=p(I);var Z=O.charAt(0);!L||"G"!==Z&&"g"!==Z||(O=O.substr(1),I="");Z=L&&"chinese"===I.substr(0,7);var ba=O.match(Z?z:x);if(!ba)return l;O=ba[1];var V=ba[3]||"1",S=Number(ba[5]||1),T=Number(ba[7]||0),fa=Number(ba[9]||
0);ba=Number(ba[11]||0);if(L){if(2===O.length)return l;O=Number(O);try{var W=t.getComponentMethod("calendars","getCal")(I);if(Z){var aa="i"===V.charAt(V.length-1);V=parseInt(V,10);Q=W.newDate(O,W.toMonthIndex(O,V,aa),S)}else Q=W.newDate(O,Number(V),S)}catch(ja){return l}return Q?(Q.toJD()-q)*c+T*d+fa*e+ba*f:l}O=2===O.length?(Number(O)+2E3-B)%100+B:Number(O);--V;I=new Date(Date.UTC(2E3,V,S,T,fa));I.setUTCFullYear(O);return I.getUTCMonth()!==V||I.getUTCDate()!==S?l:I.getTime()+ba*f};var A=G.MIN_MS=
G.dateTime2ms("-9999");var D=G.MAX_MS=G.dateTime2ms("9999-12-31 23:59:59.9999");G.isDateTime=function(O,I){return G.dateTime2ms(O,I)!==l};var C=90*c,v=3*d,y=5*e;G.ms2DateTime=function(O,I,L){if("number"!==typeof O||!(O>=A&&O<=D))return l;I||(I=0);var Q=Math.floor(10*r(O+.05,1)),Z=Math.round(O-Q/10);if(p(L)){var ba=Math.floor(Z/c)+q;O=Math.floor(r(O,c));try{var V=t.getComponentMethod("calendars","getCal")(L).fromJD(ba).formatDate("yyyy-mm-dd")}catch(S){V=w("G%Y-%m-%d")(new Date(Z))}if("-"===V.charAt(0))for(;11>
V.length;)V="-0"+V.substr(1);else for(;10>V.length;)V="0"+V;L=I<C?Math.floor(O/d):0;Z=I<C?Math.floor(O%d/e):0;ba=I<v?Math.floor(O%e/f):0;I=I<y?O%f*10+Q:0}else O=new Date(Z),V=w("%Y-%m-%d")(O),L=I<C?O.getUTCHours():0,Z=I<C?O.getUTCMinutes():0,ba=I<v?O.getUTCSeconds():0,I=I<y?10*O.getUTCMilliseconds()+Q:0;return k(V,L,Z,ba,I)};G.ms2DateTimeLocal=function(O){if(!(O>=A+c&&O<=D-c))return l;var I=Math.floor(10*r(O+.05,1)),L=new Date(Math.round(O-I/10));O=a("%Y-%m-%d")(L);var Q=L.getHours(),Z=L.getMinutes(),
ba=L.getSeconds();I=10*L.getUTCMilliseconds()+I;return k(O,Q,Z,ba,I)};G.cleanDate=function(O,I,L){if(O===l)return I;if(G.isJSDate(O)||"number"===typeof O&&isFinite(O)){if(p(L))return h.error("JS Dates and milliseconds are incompatible with world calendars",O),I;O=G.ms2DateTimeLocal(+O);if(!O&&void 0!==I)return I}else if(!G.isDateTime(O,L))return h.error("unrecognized date",O),I;return O};var F=/%\d?f/g,J=/%h/g,K={1:"1",2:"1",3:"2",4:"2"},M=[59,59.9,59.99,59.999,59.9999];G.formatDate=function(O,I,
L,Q,Z,ba){Z=p(Z)&&Z;if(!I)if("y"===L)I=ba.year;else if("m"===L)I=ba.month;else if("d"===L)I=ba.dayMonth+"\n"+ba.year;else{I=L;L=r(O+.05,c);L=n(Math.floor(L/d),2)+":"+n(r(Math.floor(L/e),60),2);if("M"!==I){g(I)||(I=0);var V=(100+Math.min(r(O/f,60),M[I])).toFixed(I).substr(1);0<I&&(V=V.replace(/0+$/,"").replace(/[\.]$/,""));L+=":"+V}return L+"\n"+m(ba.dayMonthYear,O,Q,Z)}return m(I,O,Q,Z)};var H=3*c;G.incrementMonth=function(O,I,L){L=p(L)&&L;var Q=r(O,c);O=Math.round(O-Q);if(L)try{var Z=Math.round(O/
c)+q,ba=t.getComponentMethod("calendars","getCal")(L),V=ba.fromJD(Z);I%12?ba.add(V,I,"m"):ba.add(V,I/12,"y");return(V.toJD()-q)*c+Q}catch(S){h.error("invalid ms "+O+" in calendar "+L)}O=new Date(O+H);return O.setUTCMonth(O.getUTCMonth()+I)+Q-H};G.findExactDates=function(O,I){for(var L=0,Q=0,Z=0,ba=0,V,S=p(I)&&t.getComponentMethod("calendars","getCal")(I),T=0;T<O.length;T++)if(I=O[T],!g(I))ba++;else if(!(I%c))if(S)try{V=S.fromJD(I/c+q),1===V.day()?1===V.month()?L++:Q++:Z++}catch(fa){}else V=new Date(I),
1===V.getUTCDate()?0===V.getUTCMonth()?L++:Q++:Z++;Q+=L;O=O.length-ba;return{exactYears:L/O,exactMonths:Q/O,exactDays:(Z+Q)/O}}},{"../constants/numerical":779,"../registry":931,"./loggers":807,"./mod":810,"d3-time-format":175,"fast-isnumeric":249}],791:[function(b,N,G){function p(l){var c=l&&l.parentNode;c&&c.removeChild(l)}function n(l,c,d){l="plotly.js-style-"+l;var e=document.getElementById(l);e||(e=document.createElement("style"),e.setAttribute("id",l),e.appendChild(document.createTextNode("")),
document.head.appendChild(e));l=e.sheet;l.insertRule?l.insertRule(c+"{"+d+"}",0):l.addRule?l.addRule(c,d,0):g.warn("addStyleRule failed")}function k(l){l=window.getComputedStyle(l,null);l=l.getPropertyValue("-webkit-transform")||l.getPropertyValue("-moz-transform")||l.getPropertyValue("-ms-transform")||l.getPropertyValue("-o-transform")||l.getPropertyValue("transform");return"none"===l?null:l.replace("matrix","").replace("3d","").slice(1,-1).split(",").map(function(c){return+c})}function m(l){for(var c=
[];l&&(l instanceof Element||l instanceof HTMLElement);)c.push(l),l=l.parentNode;return c}var a=b("@plotly/d3"),g=b("./loggers"),h=b("./matrix"),r=b("gl-mat4");N.exports={getGraphDiv:function(l){if("string"===typeof l){var c=document.getElementById(l);if(null===c)throw Error("No DOM element with id '"+l+"' exists on the page.");return c}if(null===l||void 0===l)throw Error("DOM element provided is null or undefined");return l},isPlotDiv:function(l){l=a.select(l);return l.node()instanceof HTMLElement&&
l.size()&&l.classed("js-plotly-plot")},removeElement:p,addStyleRule:function(l,c){n("global",l,c)},addRelatedStyleRule:n,deleteRelatedStyleRule:function(l){(l=document.getElementById("plotly.js-style-"+l))&&p(l)},getFullTransformMatrix:function(l){var c=[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1];m(l).forEach(function(d){if(d=k(d))d=h.convertCssMatrix(d),c=r.multiply(c,c,d)});return c},getElementTransformMatrix:k,getElementAndAncestors:m,equalDomRects:function(l,c){return l&&c&&l.x===c.x&&l.y===c.y&&l.top===
c.top&&l.left===c.left&&l.right===c.right&&l.bottom===c.bottom}}},{"./loggers":807,"./matrix":809,"@plotly/d3":58,"gl-mat4":298}],792:[function(b,N,G){var p=b("events").EventEmitter;N.exports={init:function(n){if(n._ev instanceof p)return n;var k=new p,m=new p;n._ev=k;n._internalEv=m;n.on=k.on.bind(k);n.once=k.once.bind(k);n.removeListener=k.removeListener.bind(k);n.removeAllListeners=k.removeAllListeners.bind(k);n._internalOn=m.on.bind(m);n._internalOnce=m.once.bind(m);n._removeInternalListener=
m.removeListener.bind(m);n._removeAllInternalListeners=m.removeAllListeners.bind(m);n.emit=function(a,g){"undefined"!==typeof jQuery&&jQuery(n).trigger(a,g);k.emit(a,g);m.emit(a,g)};return n},triggerHandler:function(n,k,m){function a(l){if(l.listener){if(h.removeListener(k,l.listener),!l.fired)return l.fired=!0,l.listener.apply(h,[m])}else return l.apply(h,[m])}var g;"undefined"!==typeof jQuery&&(g=jQuery(n).triggerHandler(k,m));var h=n._ev;if(!h)return g;n=h._events[k];if(!n)return g;n=Array.isArray(n)?
n:[n];var r;for(r=0;r<n.length-1;r++)a(n[r]);n=a(n[r]);return void 0!==g?g:n},purge:function(n){delete n._ev;delete n.on;delete n.once;delete n.removeListener;delete n.removeAllListeners;delete n.emit;delete n._ev;delete n._internalEv;delete n._internalOn;delete n._internalOnce;delete n._removeInternalListener;delete n._removeAllInternalListeners;return n}}},{events:116}],793:[function(b,N,G){function p(m,a,g,h){var r=m[0],l=m.length,c,d,e;if(2===l&&k(r)&&k(m[1])&&0===r.length){a:{var f=m[1];for(d=
0;d<f.length;d++){var q=f[d];if(null!==q&&"object"===typeof q){f=!1;break a}void 0!==q&&(r[d]=q)}f=!0}if(f)return r;r.splice(0,r.length)}for(q=1;q<l;q++)for(c in f=m[q],f){var t=r[c];d=f[c];if(h&&k(d))r[c]=d;else if(a&&d&&(n(d)||(e=k(d))))e?(e=!1,t=t&&k(t)?t:[]):t=t&&n(t)?t:{},r[c]=p([t,d],a,g,h);else if("undefined"!==typeof d||g)r[c]=d}return r}var n=b("./is_plain_object.js"),k=Array.isArray;G.extendFlat=function(){return p(arguments,!1,!1,!1)};G.extendDeep=function(){return p(arguments,!0,!1,!1)};
G.extendDeepAll=function(){return p(arguments,!0,!0,!1)};G.extendDeepNoArrays=function(){return p(arguments,!0,!1,!0)}},{"./is_plain_object.js":804}],794:[function(b,N,G){N.exports=function(p){for(var n={},k=[],m=0,a=0;a<p.length;a++){var g=p[a];1!==n[g]&&(n[g]=1,k[m++]=g)}return k}},{}],795:[function(b,N,G){function p(k){return!0===k.visible}function n(k){k=k[0].trace;return!0===k.visible&&0!==k._length}N.exports=function(k){for(var m=Array.isArray(k)&&Array.isArray(k[0])&&k[0][0]&&k[0][0].trace?
n:p,a=[],g=0;g<k.length;g++){var h=k[g];m(h)&&a.push(h)}return a}},{}],796:[function(b,N,G){function p(f){f=f.geojson;var q=window.PlotlyGeoAssets||{};q="string"===typeof f?q[f]:f;return r(q)?q:(h.error("Oops ... something went wrong when fetching "+f),!1)}var n=b("@plotly/d3"),k=b("country-regex"),m=b("@turf/area"),a=b("@turf/centroid"),g=b("@turf/bbox");G=b("./identity");var h=b("./loggers"),r=b("./is_plain_object"),l=b("./nested_property"),c=b("./polygon"),d=Object.keys(k),e={"ISO-3":G,"USA-states":G,
"country names":function(f){for(var q=0;q<d.length;q++){var t=d[q];if((new RegExp(k[t])).test(f.trim().toLowerCase()))return t}h.log("Unrecognized country name: "+f+".");return!1}};N.exports={locationToFeature:function(f,q,t){if(!q||"string"!==typeof q)return!1;q=e[f](q);var w;if(q){if("USA-states"===f)for(f=[],w=0;w<t.length;w++){var x=t[w];x.properties&&x.properties.gu&&"USA"===x.properties.gu&&f.push(x)}else f=t;for(w=0;w<f.length;w++)if(x=f[w],x.id===q)return x;h.log(["Location with id",q,"does not have a matching topojson feature at this resolution."].join(" "))}return!1},
feature2polygons:function(f){function q(A){for(var D=0;D<A.length-1;D++)if(0<A[D][0]&&0>A[D+1][0])return D;return null}var t=f.geometry,w=t.coordinates;f=f.id;var x=[],z,B;f="RUS"===f||"FJI"===f?function(A){if(null===q(A))var D=A;else for(D=Array(A.length),B=0;B<A.length;B++)D[B]=[0>A[B][0]?A[B][0]+360:A[B][0],A[B][1]];x.push(c.tester(D))}:"ATA"===f?function(A){var D=q(A);if(null===D)return x.push(c.tester(A));var C=Array(A.length+1),v=0;for(B=0;B<A.length;B++)B>D?C[v++]=[A[B][0]+360,A[B][1]]:B===
D?(C[v++]=A[B],C[v++]=[A[B][0],-90]):C[v++]=A[B];A=c.tester(C);A.pts.pop();x.push(A)}:function(A){x.push(c.tester(A))};switch(t.type){case "MultiPolygon":for(t=0;t<w.length;t++)for(z=0;z<w[t].length;z++)f(w[t][z]);break;case "Polygon":for(t=0;t<w.length;t++)f(w[t])}return x},getTraceGeojson:p,extractTraceFeature:function(f){function q(C){var v=l(C,t.featureidkey||"id").get(),y=x[v];if(y){var F=C.geometry;if("Polygon"===F.type||"MultiPolygon"===F.type){F={type:"Feature",id:v,geometry:F,properties:{}};
var J=F.properties,K=F.geometry;if("MultiPolygon"===K.type){K=K.coordinates;for(var M=0,H=0;H<K.length;H++){var O={type:"Polygon",coordinates:K[H]},I=m.default(O);if(I>M){M=I;var L=O}}}else L=K;L=a.default(L).geometry.coordinates;J.ct=L;y.fIn=C;y.fOut=F;z.push(F)}else h.log(["Location",y.loc,"does not have a valid GeoJSON geometry. Traces with locationmode *geojson-id* only support *Polygon* and *MultiPolygon* geometries."].join(" "))}delete x[v]}var t=f[0].trace,w=p(t);if(!w)return!1;var x={},z=
[],B;for(B=0;B<t._length;B++){var A=f[B];if(A.loc||0===A.loc)x[A.loc]=A}switch(w.type){case "FeatureCollection":f=w.features;for(B=0;B<f.length;B++)q(f[B]);break;case "Feature":q(w);break;default:return h.warn(["Invalid GeoJSON type",(w.type||"none")+".","Traces with locationmode *geojson-id* only support *FeatureCollection* and *Feature* types."].join(" ")),!1}for(var D in x)h.log(["Location *"+D+"*","does not have a matching feature with id-key","*"+t.featureidkey+"*."].join(" "));return z},fetchTraceGeoData:function(f){function q(A){return new Promise(function(D,
C){n.json(A,function(v,y){if(v)return delete w[A],C(Error(404===v.status?'GeoJSON at URL "'+A+'" does not exist.':"Unexpected error while fetching from "+A));w[A]=y;return D(y)})})}function t(A){return new Promise(function(D,C){var v=0,y=setInterval(function(){if(w[A]&&"pending"!==w[A])return clearInterval(y),D(w[A]);if(100<v)return clearInterval(y),C("Unexpected error while fetching from "+A);v++},50)})}for(var w=window.PlotlyGeoAssets||{},x=[],z=0;z<f.length;z++){var B=f[z][0].trace.geojson;"string"===
typeof B&&(w[B]?"pending"===w[B]&&x.push(t(B)):(w[B]="pending",x.push(q(B))))}return x},computeBbox:function(f){return g.default(f)}}},{"./identity":801,"./is_plain_object":804,"./loggers":807,"./nested_property":811,"./polygon":815,"@plotly/d3":58,"@turf/area":61,"@turf/bbox":64,"@turf/centroid":67,"country-regex":145}],797:[function(b,N,G){var p=b("../constants/numerical").BADNUM;G.calcTraceToLineCoords=function(n){for(var k=n[0].trace.connectgaps,m=[],a=[],g=0;g<n.length;g++){var h=n[g].lonlat;
h[0]!==p?a.push(h):!k&&0<a.length&&(m.push(a),a=[])}0<a.length&&m.push(a);return m};G.makeLine=function(n){return 1===n.length?{type:"LineString",coordinates:n[0]}:{type:"MultiLineString",coordinates:n}};G.makePolygon=function(n){if(1===n.length)return{type:"Polygon",coordinates:n};for(var k=Array(n.length),m=0;m<n.length;m++)k[m]=[n[m]];return{type:"MultiPolygon",coordinates:k}};G.makeBlank=function(){return{type:"Point",coordinates:[]}}},{"../constants/numerical":779}],798:[function(b,N,G){function p(h,
r,l,c,d,e,f,q){l-=h;var t=d-h;d=f-d;c-=r;f=e-r;q-=e;e=l*q-d*c;if(0===e)return null;q=(t*q-d*f)/e;t=(t*c-l*f)/e;return 0>t||1<t||0>q||1<q?null:{x:h+l*q,y:r+c*q}}function n(h,r,l,c,d){var e=c*h+d*r;if(0>e)return c*c+d*d;if(e>l)return l=c-h,r=d-r,l*l+r*r;r=c*r-d*h;return r*r/l}var k=b("./mod").mod;G.segmentsIntersect=p;G.segmentDistance=function(h,r,l,c,d,e,f,q){if(p(h,r,l,c,d,e,f,q))return 0;var t=l-h,w=c-r,x=f-d,z=q-e,B=t*t+w*w,A=x*x+z*z;h=Math.min(n(t,w,B,d-h,e-r),n(t,w,B,f-h,q-r),n(x,z,A,h-d,r-e),
n(x,z,A,l-d,c-e));return Math.sqrt(h)};var m,a,g;G.getTextLocation=function(h,r,l,c){if(h!==a||c!==g)m={},a=h,g=c;if(m[l])return m[l];var d=h.getPointAtLength(k(l-c/2,r));c=h.getPointAtLength(k(l+c/2,r));var e=Math.atan((c.y-d.y)/(c.x-d.x));h=h.getPointAtLength(k(l,r));d={x:(4*h.x+d.x+c.x)/6,y:(4*h.y+d.y+c.y)/6,theta:e};return m[l]=d};G.clearLocationCache=function(){a=null};G.getVisibleSegment=function(h,r,l){function c(A){var D=h.getPointAtLength(A);0===A?x=D:A===t&&(z=D);A=D.x<d?d-D.x:D.x>e?D.x-
e:0;D=D.y<f?f-D.y:D.y>q?D.y-q:0;return Math.sqrt(A*A+D*D)}var d=r.left,e=r.right,f=r.top,q=r.bottom;r=0;for(var t=h.getTotalLength(),w=t,x,z,B=c(r);B;){r+=B+l;if(r>w)return;B=c(r)}for(B=c(w);B;){w-=B+l;if(r>w)return;B=c(w)}return{min:r,max:w,len:w-r,total:t,isClosed:0===r&&w===t&&.1>Math.abs(x.x-z.x)&&.1>Math.abs(x.y-z.y)}};G.findPointOnPath=function(h,r,l,c){c=c||{};var d=c.pathLength||h.getTotalLength(),e=c.tolerance||.001;c=c.iterationLimit||30;for(var f=h.getPointAtLength(0)[l]>h.getPointAtLength(d)[l]?
-1:1,q=0,t=0,w,x,z;q<c&&!(w=(t+d)/2,x=h.getPointAtLength(w),z=x[l]-r,Math.abs(z)<e);)0<f*z?d=w:t=w,q++;return x}},{"./mod":810}],799:[function(b,N,G){function p(c,d){c[3]*=d;return c}function n(c){if(m(c))return l;c=g(c);return c.length?c:l}function k(c){return m(c)?c:1}var m=b("fast-isnumeric"),a=b("tinycolor2"),g=b("color-normalize"),h=b("../components/colorscale");G=b("../components/color/attributes").defaultLine;var r=b("./array").isArrayOrTypedArray,l=g(G);N.exports={formatColor:function(c,d,
e){var f=c.color,q=r(f),t=r(d),w=[];var x=void 0!==h.extractOpts(c).colorscale?h.makeColorScaleFuncFromTrace(c):n;c=q?function(A,D){return void 0===A[D]?l:g(x(A[D]))}:n;var z=t?function(A,D){return void 0===A[D]?1:k(A[D])}:k;if(q||t)for(var B=0;B<e;B++)q=c(f,B),t=z(d,B),w[B]=p(q,t);else w=p(g(f),d);return w},parseColorScale:function(c){c=h.extractOpts(c);var d=c.colorscale;c.reversescale&&(d=h.flipScale(c.colorscale));return d.map(function(e){var f=e[0];e=a(e[1]).toRgb();return{index:f,rgb:[e.r,e.g,
e.b,e.a]}})}}},{"../components/color/attributes":665,"../components/colorscale":678,"./array":785,"color-normalize":131,"fast-isnumeric":249,tinycolor2:598}],800:[function(b,N,G){function p(n){return[n]}b=b("./identity");N.exports={keyFun:function(n){return n.key},repeat:p,descend:b,wrap:p,unwrap:function(n){return n[0]}}},{"./identity":801}],801:[function(b,N,G){N.exports=function(p){return p}},{}],802:[function(b,N,G){N.exports=function(p,n){if(!n)return p;var k=1/Math.abs(n);k=1<k?(k*p+k*n)/k:
p+n;var m=String(k).length;16<m&&m>=String(p).length+String(n).length&&(p=parseFloat(k).toPrecision(12),-1===p.indexOf("e+")&&(k=+p));return k}},{}],803:[function(b,N,G){function p(v){var y={},F;for(F in v)for(var J=v[F],K=0;K<J.length;K++)y[J[K]]=+F;return y}function n(v,y,F){var J=this,K=arguments;y||(y={});var M={};return v.replace(c.TEMPLATE_STRING_REGEX,function(H,O,I){var L="_xother"===O||"_yother"===O,Q="_xother_"===O||"_yother_"===O,Z="xother_"===O||"yother_"===O,ba="xother"===O||"yother"===
O||L||Z||Q;if(L||Q)O=O.substring(1);if(Z||Q)O=O.substring(0,O.length-1);if(ba){var V=y[O];if(void 0===V)return""}else{var S,T;for(T=3;T<K.length;T++)if(S=K[T]){if(S.hasOwnProperty(O)){V=S[O];break}x.test(O)||(c.nestedProperty(S,O).get(),(V=M[O]||c.nestedProperty(S,O).get())&&(M[O]=V));if(void 0!==V)break}}if(void 0===V&&J)return J.count<J.max&&c.warn("Variable '"+O+"' in "+J.name+" could not be found!"),J.count===J.max&&c.warn("Too many "+J.name+" warnings - additional warnings will be suppressed"),
J.count++,H;I?(":"===I[0]&&(H=F?F.numberFormat:c.numberFormat,V=H(I.replace(A,""))(V)),"|"===I[0]&&(H=F?F.timeFormat:m,V=c.dateTime2ms(V),V=c.formatDate(V,I.replace(A,""),!1,H))):(I=O+"Label",y.hasOwnProperty(I)&&(V=y[I]));if(ba){V="("+V+")";if(L||Q)V=" "+V;if(Z||Q)V+=" "}return V})}var k=b("@plotly/d3"),m=b("d3-time-format").utcFormat,a=b("d3-format").format,g=b("fast-isnumeric");G=b("../constants/numerical");var h=G.FP_SAFE,r=-h,l=G.BADNUM,c=N.exports={};c.adjustFormat=function(v){return!v||/^\d[.]\df/.test(v)||
/[.]\d%/.test(v)?v:"0.f"===v?"~f":/^\d%/.test(v)?"~%":/^\ds/.test(v)?"~s":!/^[~,.0$]/.test(v)&&/[&fps]/.test(v)?"~"+v:v};var d={};c.warnBadFormat=function(v){v=String(v);d[v]||(d[v]=1,c.warn('encountered bad format: "'+v+'"'))};c.noFormat=function(v){return String(v)};c.numberFormat=function(v){try{var y=a(c.adjustFormat(v))}catch(F){return c.warnBadFormat(v),c.noFormat}return y};c.nestedProperty=b("./nested_property");c.keyedContainer=b("./keyed_container");c.relativeAttr=b("./relative_attr");c.isPlainObject=
b("./is_plain_object");c.toLogRange=b("./to_log_range");c.relinkPrivateKeys=b("./relink_private");N=b("./array");c.isTypedArray=N.isTypedArray;c.isArrayOrTypedArray=N.isArrayOrTypedArray;c.isArray1D=N.isArray1D;c.ensureArray=N.ensureArray;c.concat=N.concat;c.maxRowLength=N.maxRowLength;c.minRowLength=N.minRowLength;N=b("./mod");c.mod=N.mod;c.modHalf=N.modHalf;N=b("./coerce");c.valObjectMeta=N.valObjectMeta;c.coerce=N.coerce;c.coerce2=N.coerce2;c.coerceFont=N.coerceFont;c.coercePattern=N.coercePattern;
c.coerceHoverinfo=N.coerceHoverinfo;c.coerceSelectionMarkerOpacity=N.coerceSelectionMarkerOpacity;c.validate=N.validate;N=b("./dates");c.dateTime2ms=N.dateTime2ms;c.isDateTime=N.isDateTime;c.ms2DateTime=N.ms2DateTime;c.ms2DateTimeLocal=N.ms2DateTimeLocal;c.cleanDate=N.cleanDate;c.isJSDate=N.isJSDate;c.formatDate=N.formatDate;c.incrementMonth=N.incrementMonth;c.dateTick0=N.dateTick0;c.dfltRange=N.dfltRange;c.findExactDates=N.findExactDates;c.MIN_MS=N.MIN_MS;c.MAX_MS=N.MAX_MS;N=b("./search");c.findBin=
N.findBin;c.sorterAsc=N.sorterAsc;c.sorterDes=N.sorterDes;c.distinctVals=N.distinctVals;c.roundUp=N.roundUp;c.sort=N.sort;c.findIndexOfMin=N.findIndexOfMin;c.sortObjectKeys=b("./sort_object_keys");N=b("./stats");c.aggNums=N.aggNums;c.len=N.len;c.mean=N.mean;c.median=N.median;c.midRange=N.midRange;c.variance=N.variance;c.stdev=N.stdev;c.interp=N.interp;N=b("./matrix");c.init2dArray=N.init2dArray;c.transposeRagged=N.transposeRagged;c.dot=N.dot;c.translationMatrix=N.translationMatrix;c.rotationMatrix=
N.rotationMatrix;c.rotationXYMatrix=N.rotationXYMatrix;c.apply3DTransform=N.apply3DTransform;c.apply2DTransform=N.apply2DTransform;c.apply2DTransform2=N.apply2DTransform2;c.convertCssMatrix=N.convertCssMatrix;c.inverseTransformMatrix=N.inverseTransformMatrix;N=b("./angles");c.deg2rad=N.deg2rad;c.rad2deg=N.rad2deg;c.angleDelta=N.angleDelta;c.angleDist=N.angleDist;c.isFullCircle=N.isFullCircle;c.isAngleInsideSector=N.isAngleInsideSector;c.isPtInsideSector=N.isPtInsideSector;c.pathArc=N.pathArc;c.pathSector=
N.pathSector;c.pathAnnulus=N.pathAnnulus;N=b("./anchor_utils");c.isLeftAnchor=N.isLeftAnchor;c.isCenterAnchor=N.isCenterAnchor;c.isRightAnchor=N.isRightAnchor;c.isTopAnchor=N.isTopAnchor;c.isMiddleAnchor=N.isMiddleAnchor;c.isBottomAnchor=N.isBottomAnchor;N=b("./geometry2d");c.segmentsIntersect=N.segmentsIntersect;c.segmentDistance=N.segmentDistance;c.getTextLocation=N.getTextLocation;c.clearLocationCache=N.clearLocationCache;c.getVisibleSegment=N.getVisibleSegment;c.findPointOnPath=N.findPointOnPath;
N=b("./extend");c.extendFlat=N.extendFlat;c.extendDeep=N.extendDeep;c.extendDeepAll=N.extendDeepAll;c.extendDeepNoArrays=N.extendDeepNoArrays;N=b("./loggers");c.log=N.log;c.warn=N.warn;c.error=N.error;N=b("./regex");c.counterRegex=N.counter;N=b("./throttle");c.throttle=N.throttle;c.throttleDone=N.done;c.clearThrottle=N.clear;N=b("./dom");c.getGraphDiv=N.getGraphDiv;c.isPlotDiv=N.isPlotDiv;c.removeElement=N.removeElement;c.addStyleRule=N.addStyleRule;c.addRelatedStyleRule=N.addRelatedStyleRule;c.deleteRelatedStyleRule=
N.deleteRelatedStyleRule;c.getFullTransformMatrix=N.getFullTransformMatrix;c.getElementTransformMatrix=N.getElementTransformMatrix;c.getElementAndAncestors=N.getElementAndAncestors;c.equalDomRects=N.equalDomRects;c.clearResponsive=b("./clear_responsive");c.preserveDrawingBuffer=b("./preserve_drawing_buffer");c.makeTraceGroups=b("./make_trace_groups");c._=b("./localize");c.notifier=b("./notifier");c.filterUnique=b("./filter_unique");c.filterVisible=b("./filter_visible");c.pushUnique=b("./push_unique");
c.increment=b("./increment");c.cleanNumber=b("./clean_number");c.ensureNumber=function(v){if(!g(v))return l;v=Number(v);return v>h||v<r?l:v};c.isIndex=function(v,y){return void 0!==y&&v>=y?!1:g(v)&&0<=v&&0===v%1};c.noop=b("./noop");c.identity=b("./identity");c.repeat=function(v,y){for(var F=Array(y),J=0;J<y;J++)F[J]=v;return F};c.swapAttrs=function(v,y,F,J){F||(F="x");J||(J="y");for(var K=0;K<y.length;K++){var M=y[K],H=c.nestedProperty(v,M.replace("?",F));M=c.nestedProperty(v,M.replace("?",J));var O=
H.get();H.set(M.get());M.set(O)}};c.raiseToTop=function(v){v.parentNode.appendChild(v)};c.cancelTransition=function(v){return v.transition().duration(0)};c.constrain=function(v,y,F){return y>F?Math.max(F,Math.min(y,v)):Math.max(y,Math.min(F,v))};c.bBoxIntersect=function(v,y,F){F=F||0;return v.left<=y.right+F&&y.left<=v.right+F&&v.top<=y.bottom+F&&y.top<=v.bottom+F};c.simpleMap=function(v,y,F,J,K){for(var M=v.length,H=Array(M),O=0;O<M;O++)H[O]=y(v[O],F,J,K);return H};c.randstr=function M(y,F,J,K){J||
(J=16);void 0===F&&(F=24);if(0>=F)return"0";var H=Math.log(Math.pow(2,F))/Math.log(J),O="",I;for(I=2;Infinity===H;I*=2)H=Math.log(Math.pow(2,F/I))/Math.log(J)*I;var L=H-Math.floor(H);for(I=0;I<Math.floor(H);I++){var Q=Math.floor(Math.random()*J).toString(J);O=Q+O}L&&(H=Math.pow(J,L),Q=Math.floor(Math.random()*H).toString(J),O=Q+O);H=parseInt(O,J);return y&&y[O]||Infinity!==H&&H>=Math.pow(2,F)?10<K?(c.warn("randstr failed uniqueness"),O):M(y,F,J,(K||0)+1):O};c.OptionControl=function(y,F){y||(y={});
F||(F="opt");var J={optionList:[],_newoption:function(K){K[F]=y;J[K.name]=K;J.optionList.push(K)}};J["_"+F]=y;return J};c.smooth=function(y,F){F=Math.round(F)||0;if(2>F)return y;var J=y.length,K=2*J,M=2*F-1,H=Array(M),O=Array(J),I,L,Q;for(I=0;I<M;I++)H[I]=(1-Math.cos(Math.PI*(I+1)/F))/(2*F);for(I=0;I<J;I++){for(L=Q=0;L<M;L++){var Z=I+L+1-F;Z<-J?Z-=K*Math.round(Z/K):Z>=K&&(Z-=K*Math.floor(Z/K));0>Z?Z=-1-Z:Z>=J&&(Z=K-1-Z);Q+=y[Z]*H[L]}O[I]=Q}return O};c.syncOrAsync=function(y,F,J){function K(){return c.syncOrAsync(y,
F,J)}for(var M;y.length;)if(M=y.splice(0,1)[0],(M=M(F))&&M.then)return M.then(K).then(void 0,c.promiseError);return J&&J(F)};c.stripTrailingSlash=function(y){return"/"===y.substr(-1)?y.substr(0,y.length-1):y};c.noneOrAll=function(y,F,J){if(y){var K=!1,M=!0,H;for(H=0;H<J.length;H++){var O=y[J[H]];void 0!==O&&null!==O?K=!0:M=!1}if(K&&!M)for(H=0;H<J.length;H++)y[J[H]]=F[J[H]]}};c.mergeArray=function(y,F,J,K){var M="function"===typeof K;if(c.isArrayOrTypedArray(y))for(var H=Math.min(y.length,F.length),
O=0;O<H;O++){var I=y[O];F[O][J]=M?K(I):I}};c.mergeArrayCastPositive=function(y,F,J){return c.mergeArray(y,F,J,function(K){K=+K;return isFinite(K)?0<K?K:0:0})};c.fillArray=function(y,F,J,K){K=K||c.identity;if(c.isArrayOrTypedArray(y))for(var M=0;M<F.length;M++)F[M][J]=K(y[M])};c.castOption=function(y,F,J,K){K=K||c.identity;y=c.nestedProperty(y,J).get();return c.isArrayOrTypedArray(y)?Array.isArray(F)&&c.isArrayOrTypedArray(y[F[0]])?K(y[F[0]][F[1]]):K(y[F]):y};c.extractOption=function(y,F,J,K){if(J in
y)return y[J];y=c.nestedProperty(F,K).get();if(!Array.isArray(y))return y};c.tagSelected=function(y,F,J){var K=F.selectedpoints;F=F._indexToPoints;var M;F&&(M=p(F));for(F=0;F<K.length;F++){var H=K[F];if(c.isIndex(H)||c.isArrayOrTypedArray(H)&&c.isIndex(H[0])&&c.isIndex(H[1]))H=M?M[H]:H,H=J?J[H]:H,void 0!==H&&H<y.length&&(y[H].selected=1)}};c.selIndices2selPoints=function(y){var F=y.selectedpoints;if(y=y._indexToPoints){y=p(y);for(var J=[],K=0;K<F.length;K++){var M=F[K];c.isIndex(M)&&(M=y[M],c.isIndex(M)&&
J.push(M))}return J}return F};c.getTargetArray=function(y,F){F=F.target;return"string"===typeof F&&F?(y=c.nestedProperty(y,F).get(),Array.isArray(y)?y:!1):Array.isArray(F)?F:!1};c.minExtend=function(y,F){var J={};"object"!==typeof F&&(F={});var K=Object.keys(y),M;for(M=0;M<K.length;M++){var H=K[M];var O=y[H];"_"!==H.charAt(0)&&"function"!==typeof O&&("module"===H?J[H]=O:Array.isArray(O)?J[H]="colorscale"===H?O.slice():O.slice(0,3):c.isTypedArray(O)?J[H]=O.subarray(0,3):J[H]=O&&"object"===typeof O?
c.minExtend(y[H],F[H]):O)}K=Object.keys(F);for(M=0;M<K.length;M++)H=K[M],O=F[H],"object"===typeof O&&H in J&&"object"===typeof J[H]||(J[H]=O);return J};c.titleCase=function(y){return y.charAt(0).toUpperCase()+y.substr(1)};c.containsAny=function(y,F){for(var J=0;J<F.length;J++)if(-1!==y.indexOf(F[J]))return!0;return!1};c.isIE=function(){return"undefined"!==typeof window.navigator.msSaveBlob};var e=/Version\/[\d\.]+.*Safari/;c.isSafari=function(){return e.test(window.navigator.userAgent)};var f=/iPad|iPhone|iPod/;
c.isIOS=function(){return f.test(window.navigator.userAgent)};var q=/Firefox\/(\d+)\.\d+/;c.getFirefoxVersion=function(){var y=q.exec(window.navigator.userAgent);return y&&2===y.length&&(y=parseInt(y[1]),!isNaN(y))?y:null};c.isD3Selection=function(y){return y instanceof k.selection};c.ensureSingle=function(y,F,J,K){var M=y.select(F+(J?"."+J:""));if(M.size())return M;y=y.append(F);J&&y.classed(J,!0);K&&y.call(K);return y};c.ensureSingleById=function(y,F,J,K){var M=y.select(F+"#"+J);if(M.size())return M;
y=y.append(F).attr("id",J);K&&y.call(K);return y};c.objectFromPath=function(y,F){y=y.split(".");for(var J,K=J={},M=0;M<y.length;M++){var H=y[M],O;(O=y[M].match(/(.*)\[([0-9]+)\]/))?(H=O[1],O=O[2],J=J[H]=[],J[O]=M===y.length-1?F:{},J=J[O]):(J[H]=M===y.length-1?F:{},J=J[H])}return K};var t=/^([^\[\.]+)\.(.+)?/,w=/^([^\.]+)\[([0-9]+)\](\.)?(.+)?/;c.expandObjectPaths=function(y){var F,J;if("object"===typeof y&&!Array.isArray(y))for(J in y)if(y.hasOwnProperty(J))if(F=J.match(t)){var K=y[J];var M=F[1];
delete y[J];y[M]=c.extendDeepNoArrays(y[M]||{},c.objectFromPath(J,c.expandObjectPaths(K))[M])}else if(F=J.match(w)){K=y[J];M=F[1];var H=parseInt(F[2]);delete y[J];y[M]=y[M]||[];"."===F[3]?(F=F[4],M=y[M][H]=y[M][H]||{},c.extendDeepNoArrays(M,c.objectFromPath(F,c.expandObjectPaths(K)))):y[M][H]=c.expandObjectPaths(K)}else y[J]=c.expandObjectPaths(y[J]);return y};c.numSeparate=function(y,F,J){J||(J=!1);if("string"!==typeof F||0===F.length)throw Error("Separator string required for formatting!");"number"===
typeof y&&(y=String(y));var K=/(\d+)(\d{3})/,M=F.charAt(0);F=F.charAt(1);y=y.split(".");var H=y[0];M=1<y.length?M+y[1]:"";if(F&&(1<y.length||4<H.length||J))for(;K.test(H);)H=H.replace(K,"$1"+F+"$2");return H+M};c.TEMPLATE_STRING_REGEX=/%{([^\s%{}:]*)([:|\|][^}]*)?}/g;var x=/^\w*$/;c.templateString=function(y,F){var J={};return y.replace(c.TEMPLATE_STRING_REGEX,function(K,M){x.test(M)?K=F[M]:(J[M]=J[M]||c.nestedProperty(F,M).get,K=J[M]());return c.isValidTextValue(K)?K:""})};var z={max:10,count:0,
name:"hovertemplate"};c.hovertemplateString=function(){return n.apply(z,arguments)};var B={max:10,count:0,name:"texttemplate"};c.texttemplateString=function(){return n.apply(B,arguments)};var A=/^[:|\|]/;c.subplotSort=function(y,F){for(var J=Math.min(y.length,F.length)+1,K=0,M=0,H=0;H<J;H++){var O=y.charCodeAt(H)||0,I=F.charCodeAt(H)||0,L=48<=O&&57>=O,Q=48<=I&&57>=I;L&&(K=10*K+O-48);Q&&(M=10*M+I-48);if(!L||!Q){if(K!==M)return K-M;if(O!==I)return O-I}}return M-K};var D=2E9;c.seedPseudoRandom=function(){D=
2E9};c.pseudoRandom=function(){var y=D;D=(69069*D+1)%4294967296;return 429496729>Math.abs(D-y)?c.pseudoRandom():D/4294967296};c.fillText=function(y,F,J){var K=Array.isArray(J)?function(H){J.push(H)}:function(H){J.text=H},M=c.extractOption(y,F,"htx","hovertext");if(c.isValidTextValue(M))return K(M);y=c.extractOption(y,F,"tx","text");if(c.isValidTextValue(y))return K(y)};c.isValidTextValue=function(y){return y||0===y};c.formatPercent=function(y,F){F=F||0;y=(Math.round(100*y*Math.pow(10,F))*Math.pow(.1,
F)).toFixed(F)+"%";for(var J=0;J<F;J++)-1!==y.indexOf(".")&&(y=y.replace("0%","%"),y=y.replace(".%","%"));return y};c.isHidden=function(y){y=window.getComputedStyle(y).display;return!y||"none"===y};c.strTranslate=function(y,F){return y||F?"translate("+y+","+F+")":""};c.strRotate=function(y){return y?"rotate("+y+")":""};c.strScale=function(y){return 1!==y?"scale("+y+")":""};c.getTextTransform=function(y){var F=y.noCenter,J=y.textX,K=y.textY,M=y.targetX,H=y.targetY,O=y.anchorX||0,I=y.anchorY||0,L=y.rotate;
(y=y.scale)?1<y&&(y=1):y=0;return c.strTranslate(M-y*(J+O),H-y*(K+I))+c.strScale(y)+(L?"rotate("+L+(F?"":" "+J+" "+K)+")":"")};c.ensureUniformFontSize=function(y,F){var J=c.extendFlat({},F);J.size=Math.max(F.size,y._fullLayout.uniformtext.minsize||0);return J};c.join2=function(y,F,J){var K=y.length;return 1<K?y.slice(0,-1).join(F)+J+y[K-1]:y.join(F)};c.bigFont=function(y){return Math.round(1.2*y)};b=c.getFirefoxVersion();var C=null!==b&&86>b;c.getPositionFromD3Event=function(){return C?[k.event.layerX,
k.event.layerY]:[k.event.offsetX,k.event.offsetY]}},{"../constants/numerical":779,"./anchor_utils":783,"./angles":784,"./array":785,"./clean_number":786,"./clear_responsive":788,"./coerce":789,"./dates":790,"./dom":791,"./extend":793,"./filter_unique":794,"./filter_visible":795,"./geometry2d":798,"./identity":801,"./increment":802,"./is_plain_object":804,"./keyed_container":805,"./localize":806,"./loggers":807,"./make_trace_groups":808,"./matrix":809,"./mod":810,"./nested_property":811,"./noop":812,
"./notifier":813,"./preserve_drawing_buffer":817,"./push_unique":818,"./regex":820,"./relative_attr":821,"./relink_private":822,"./search":823,"./sort_object_keys":826,"./stats":827,"./throttle":830,"./to_log_range":831,"@plotly/d3":58,"d3-format":167,"d3-time-format":175,"fast-isnumeric":249}],804:[function(b,N,G){N.exports=function(p){return window&&window.process&&window.process.versions?"[object Object]"===Object.prototype.toString.call(p):"[object Object]"===Object.prototype.toString.call(p)&&
Object.getPrototypeOf(p).hasOwnProperty("hasOwnProperty")}},{}],805:[function(b,N,G){var p=b("./nested_property"),n=/^\w*$/;N.exports=function(k,m,a,g){a=a||"name";g=g||"value";var h,r={};if(m&&m.length){var l=p(k,m);var c=l.get()}else c=k;m=m||"";var d={};if(c)for(h=0;h<c.length;h++)d[c[h][a]]=h;var e=n.test(g),f={set:function(q,t){var w=null===t?4:0;if(!c){if(!l||4===w)return;c=[];l.set(c)}var x=d[q];if(void 0===x){if(4===w)return;w|=3;x=c.length;d[q]=x}else t!==(e?c[x][g]:p(c[x],g).get())&&(w|=
2);var z=c[x]=c[x]||{};z[a]=q;e?z[g]=t:p(z,g).set(t);null!==t&&(w&=-5);r[x]|=w;return f},get:function(q){if(c&&(q=d[q],void 0!==q))return e?c[q][g]:p(c[q],g).get()},rename:function(q,t){var w=d[q];if(void 0===w)return f;r[w]|=1;d[t]=w;delete d[q];c[w][a]=t;return f},remove:function(q){var t=d[q];if(void 0===t)return f;var w=c[t];if(2<Object.keys(w).length)return r[t]|=2,f.set(q,null);if(e){for(h=t;h<c.length;h++)r[h]|=3;for(h=t;h<c.length;h++)d[c[h][a]]--;c.splice(t,1);delete d[q]}else p(w,g).set(null),
r[t]|=6;return f},constructUpdate:function(){for(var q,t,w={},x=Object.keys(r),z=0;z<x.length;z++)t=x[z],q=m+"["+t+"]",c[t]?(r[t]&1&&(w[q+"."+a]=c[t][a]),r[t]&2&&(w[q+"."+g]=e?r[t]&4?null:c[t][g]:r[t]&4?null:p(c[t],g).get())):w[q]=null;return w}};return f}},{"./nested_property":811}],806:[function(b,N,G){var p=b("../registry");N.exports=function(n,k){for(var m=n._context.locale,a=0;2>a;a++){for(var g=n._context.locales,h=0;2>h;h++){if(g=(g[m]||{}).dictionary)if(g=g[k])return g;g=p.localeRegistry}h=
m.split("-")[0];if(h===m)break;m=h}return k}},{"../registry":931}],807:[function(b,N,G){var p=b("../plot_api/plot_config").dfltConfig,n=b("./notifier");b=N.exports={};b.log=function(){var k;if(1<p.logging){var m=["LOG:"];for(k=0;k<arguments.length;k++)m.push(arguments[k]);console.trace.apply(console,m)}if(1<p.notifyOnLogging){m=[];for(k=0;k<arguments.length;k++)m.push(arguments[k]);n(m.join("\x3cbr\x3e"),"long")}};b.warn=function(){var k;if(0<p.logging){var m=["WARN:"];for(k=0;k<arguments.length;k++)m.push(arguments[k]);
console.trace.apply(console,m)}if(0<p.notifyOnLogging){m=[];for(k=0;k<arguments.length;k++)m.push(arguments[k]);n(m.join("\x3cbr\x3e"),"stick")}};b.error=function(){var k;if(0<p.logging){var m=["ERROR:"];for(k=0;k<arguments.length;k++)m.push(arguments[k]);console.error.apply(console,m)}if(0<p.notifyOnLogging){m=[];for(k=0;k<arguments.length;k++)m.push(arguments[k]);n(m.join("\x3cbr\x3e"),"stick")}}},{"../plot_api/plot_config":841,"./notifier":813}],808:[function(b,N,G){var p=b("@plotly/d3");N.exports=
function(n,k,m){k=n.selectAll("g."+m.replace(/\s/g,".")).data(k,function(g){return g[0].trace.uid});k.exit().remove();k.enter().append("g").attr("class",m);k.order();var a=n.classed("rangeplot")?"nodeRangePlot3":"node3";k.each(function(g){g[0][a]=p.select(this)});return k}},{"@plotly/d3":58}],809:[function(b,N,G){var p=b("gl-mat4");G.init2dArray=function(n,k){for(var m=Array(n),a=0;a<n;a++)m[a]=Array(k);return m};G.transposeRagged=function(n){var k=0,m=n.length,a,g;for(a=0;a<m;a++)k=Math.max(k,n[a].length);
var h=Array(k);for(a=0;a<k;a++)for(h[a]=Array(m),g=0;g<m;g++)h[a][g]=n[g][a];return h};G.dot=function(n,k){if(!n.length||!k.length||n.length!==k.length)return null;var m=n.length,a;if(n[0].length){var g=Array(m);for(a=0;a<m;a++)g[a]=G.dot(n[a],k)}else if(k[0].length)for(k=G.transposeRagged(k),g=Array(k.length),a=0;a<k.length;a++)g[a]=G.dot(n,k[a]);else for(a=g=0;a<m;a++)g+=n[a]*k[a];return g};G.translationMatrix=function(n,k){return[[1,0,n],[0,1,k],[0,0,1]]};G.rotationMatrix=function(n){n=n*Math.PI/
180;return[[Math.cos(n),-Math.sin(n),0],[Math.sin(n),Math.cos(n),0],[0,0,1]]};G.rotationXYMatrix=function(n,k,m){return G.dot(G.dot(G.translationMatrix(k,m),G.rotationMatrix(n)),G.translationMatrix(-k,-m))};G.apply3DTransform=function(n){return function(){var k=arguments;k=1===arguments.length?k[0]:[k[0],k[1],k[2]||0];return G.dot(n,[k[0],k[1],k[2],1]).slice(0,3)}};G.apply2DTransform=function(n){return function(){var k=arguments;3===k.length&&(k=k[0]);k=1===arguments.length?k[0]:[k[0],k[1]];return G.dot(n,
[k[0],k[1],1]).slice(0,2)}};G.apply2DTransform2=function(n){var k=G.apply2DTransform(n);return function(m){return k(m.slice(0,2)).concat(k(m.slice(2,4)))}};G.convertCssMatrix=function(n){if(n){var k=n.length;if(16===k)return n;if(6===k)return[n[0],n[1],0,0,n[2],n[3],0,0,0,0,1,0,n[4],n[5],0,1]}return[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1]};G.inverseTransformMatrix=function(n){var k=[];p.invert(k,n);return[[k[0],k[1],k[2],k[3]],[k[4],k[5],k[6],k[7]],[k[8],k[9],k[10],k[11]],[k[12],k[13],k[14],k[15]]]}},{"gl-mat4":298}],
810:[function(b,N,G){N.exports={mod:function(p,n){p%=n;return 0>p?p+n:p},modHalf:function(p,n){return Math.abs(p)>n/2?p-Math.round(p/n)*n:p}}},{}],811:[function(b,N,G){function p(l,c){return function(){var d=l,e,f;for(e=0;e<c.length-1;e++){var q=c[e];if(-1===q){q=!0;var t=[];for(f=0;f<d.length;f++)t[f]=p(d[f],c.slice(e+1))(),t[f]!==t[0]&&(q=!1);return q?t[0]:t}if("number"===typeof q&&!h(d))return;d=d[q];if("object"!==typeof d||null===d)return}if("object"===typeof d&&null!==d&&(t=d[c[e]],null!==t))return t}}
function n(l,c){return void 0===l||null===l&&!c.match(r)}function k(l,c,d){return function(e){var f=l,q="",t=[[l,q]],w=n(e,d),x;for(x=0;x<c.length-1;x++){var z=c[x];if("number"===typeof z&&!h(f))throw"array index but container is not an array";if(-1===z){w=f;q=c.slice(x+1);z=e;var B=d,A=h(z),D=!0,C=z,v=B.replace("-1",0),y=A?!1:n(z,v),F=q[0];for(t=0;t<w.length;t++)v=B.replace("-1",t),A&&(C=z[t%z.length],y=n(C,v)),y&&(D=!1),m(w,t,F,y)&&k(w[t],q,B.replace("-1",t))(C);if(w=!D)break;else return}if(!m(f,
z,c[x+1],w))break;f=f[z];if("object"!==typeof f||null===f)throw"container is not an object";B=z;g(z)?B="["+z+"]":q&&(B="."+z);q+=B;t.push([f,q])}if(w){if(x===c.length-1&&(delete f[c[x]],Array.isArray(f)&&+c[x]===f.length-1))for(;f.length&&void 0===f[f.length-1];)f.pop()}else f[c[x]]=e}}function m(l,c,d,e){if(void 0===l[c]){if(e)return!1;l[c]="number"===typeof d?[]:{}}return!0}function a(l,c,d){return{set:function(){throw"bad container";},get:function(){},astr:c,parts:d,obj:l}}var g=b("fast-isnumeric"),
h=b("./array").isArrayOrTypedArray;N.exports=function(l,c){if(g(c))c=String(c);else if("string"!==typeof c||"[-1]"===c.substr(c.length-4))throw"bad property string";for(var d=0,e=c.split("."),f,q;d<e.length;){if(f=String(e[d]).match(/^([^\[\]]*)((\[\-?[0-9]*\])+)$/)){if(f[1])e[d]=f[1];else if(0===d)e.splice(0,1);else throw"bad property string";f=f[2].substr(1,f[2].length-2).split("][");for(q=0;q<f.length;q++)d++,e.splice(d,0,Number(f[q]))}d++}return"object"!==typeof l?a(l,c,e):{set:k(l,e,c),get:p(l,
e),astr:c,parts:e,obj:l}};var r=/(^|\.)args\[/},{"./array":785,"fast-isnumeric":249}],812:[function(b,N,G){N.exports=function(){}},{}],813:[function(b,N,G){var p=b("@plotly/d3"),n=b("fast-isnumeric"),k=[];N.exports=function(m,a){function g(r){r.duration(700).style("opacity",0).each("end",function(l){l=k.indexOf(l);-1!==l&&k.splice(l,1);p.select(this).remove()})}if(-1===k.indexOf(m)){k.push(m);var h=1E3;n(a)?h=a:"long"===a&&(h=3E3);m=p.select("body").selectAll(".plotly-notifier").data([0]);m.enter().append("div").classed("plotly-notifier",
!0);m.selectAll(".notifier-note").data(k).enter().append("div").classed("notifier-note",!0).style("opacity",0).each(function(r){var l=p.select(this);l.append("button").classed("notifier-close",!0).html("\x26times;").on("click",function(){l.transition().call(g)});var c=l.append("p");r=r.split(/<br\s*\/?>/g);for(var d=0;d<r.length;d++)d&&c.append("br"),c.append("span").text(r[d]);"stick"===a?l.transition().duration(350).style("opacity",1):l.transition().duration(700).style("opacity",1).transition().delay(h).call(g)})}}},
{"@plotly/d3":58,"fast-isnumeric":249}],814:[function(b,N,G){var p=b("./setcursor");N.exports=function(n,k){var m=n.attr("data-savedcursor");if(k){if(!m){m=(n.attr("class")||"").split(" ");for(var a=0;a<m.length;a++){var g=m[a];0===g.indexOf("cursor-")&&n.attr("data-savedcursor",g.substr(7)).classed(g,!1)}n.attr("data-savedcursor")||n.attr("data-savedcursor","!!")}p(n,k)}else m&&(n.attr("data-savedcursor",null),"!!"===m?p(n):p(n,m))}},{"./setcursor":824}],815:[function(b,N,G){var p=b("./matrix").dot,
n=b("../constants/numerical").BADNUM,k=N.exports={};k.tester=function(m){function a(w,x){var z=w[0],B=w[1];return z===n||z<r||z>l||B===n||B<c||B>d||x&&f(w)?!1:!0}function g(w,x){var z=w[0];w=w[1];if(z===n||z<r||z>l||w===n||w<c||w>d)return!1;var B=h.length,A=h[0][0],D=h[0][1],C=0,v;for(v=1;v<B;v++){var y=A;var F=D;A=h[v][0];D=h[v][1];var J=Math.min(y,A);if(!(z<J||z>Math.max(y,A)||w>Math.max(F,D)))if(w<Math.min(F,D))z!==J&&C++;else{y=A===y?w:F+(z-y)*(D-F)/(A-y);if(w===y)return 1===v&&x?!1:!0;w<=y&&
z!==J&&C++}}return 1===C%2}var h=m.slice(),r=h[0][0],l=r,c=h[0][1],d=c;h.push(h[0]);for(m=1;m<h.length;m++)r=Math.min(r,h[m][0]),l=Math.max(l,h[m][0]),c=Math.min(c,h[m][1]),d=Math.max(d,h[m][1]);var e=!1;if(5===h.length)if(h[0][0]===h[1][0]){if(h[2][0]===h[3][0]&&h[0][1]===h[3][1]&&h[1][1]===h[2][1]){e=!0;var f=function(w){return w[0]===h[0][0]}}}else h[0][1]===h[1][1]&&h[2][1]===h[3][1]&&h[0][0]===h[3][0]&&h[1][0]===h[2][0]&&(e=!0,f=function(w){return w[1]===h[0][1]});var q=!0,t=h[0];for(m=1;m<h.length;m++)if(t[0]!==
h[m][0]||t[1]!==h[m][1]){q=!1;break}return{xmin:r,xmax:l,ymin:c,ymax:d,pts:h,contains:e?a:g,isRect:e,degenerate:q}};k.isSegmentBent=function(m,a,g,h){var r=m[a],l=[m[g][0]-r[0],m[g][1]-r[1]],c=p(l,l),d=Math.sqrt(c);d=[-l[1]/d,l[0]/d];for(a+=1;a<g;a++){var e=[m[a][0]-r[0],m[a][1]-r[1]];var f=p(e,l);if(0>f||f>c||Math.abs(p(e,d))>h)return!0}return!1};k.filter=function(m,a){function g(d){m.push(d);d=h.length;var e=r;h.splice(l+1);for(var f=e+1;f<m.length;f++)if(f===m.length-1||k.isSegmentBent(m,e,f+1,
a))h.push(m[f]),h.length<d-2&&(r=f,l=h.length-1),e=f}var h=[m[0]],r=0,l=0;if(1<m.length){var c=m.pop();g(c)}return{addPt:g,raw:m,filtered:h}}},{"../constants/numerical":779,"./matrix":809}],816:[function(b,N,G){(function(p){(function(){var n=b("./show_no_webgl_msg"),k=b("regl");N.exports=function(m,a){var g=m._fullLayout,h=!0;g._glcanvas.each(function(r){if(!r.regl&&(!r.pick||g._has("parcoords"))){try{r.regl=k({canvas:this,attributes:{antialias:!r.pick,preserveDrawingBuffer:!0},pixelRatio:m._context.plotGlPixelRatio||
p.devicePixelRatio,extensions:a||[]})}catch(l){h=!1}r.regl||(h=!1);h&&this.addEventListener("webglcontextlost",function(l){m&&m.emit&&m.emit("plotly_webglcontextlost",{event:l,layer:r.key})},!1)}});h||n({container:g._glcontainer.node()});return h}}).call(this)}).call(this,"undefined"!==typeof xe?xe:"undefined"!==typeof self?self:"undefined"!==typeof window?window:{})},{"./show_no_webgl_msg":825,regl:540}],817:[function(b,N,G){var p=b("fast-isnumeric"),n=b("is-mobile");N.exports=function(k){if(k&&
k.hasOwnProperty("userAgent"))var m=k.userAgent;else"undefined"!==typeof navigator&&(m=navigator.userAgent),m&&m.headers&&"string"===typeof m.headers["user-agent"]&&(m=m.headers["user-agent"]);if("string"!==typeof m)return!0;k=n({ua:{headers:{"user-agent":m}},tablet:!0,featureDetect:!1});if(!k){m=m.split(" ");for(var a=1;a<m.length;a++)if(-1!==m[a].indexOf("Safari"))for(var g=a-1;-1<g;g--){var h=m[g];if("Version/"===h.substr(0,8)&&(h=h.substr(8).split(".")[0],p(h)&&(h=+h),13<=h))return!0}}return k}},
{"fast-isnumeric":249,"is-mobile":455}],818:[function(b,N,G){N.exports=function(p,n){if(n instanceof RegExp){for(var k=n.toString(),m=0;m<p.length;m++)if(p[m]instanceof RegExp&&p[m].toString()===k)return p;p.push(n)}else!n&&0!==n||-1!==p.indexOf(n)||p.push(n);return p}},{}],819:[function(b,N,G){var p=b("../lib"),n=b("../plot_api/plot_config").dfltConfig,k={add:function(m,a,g,h,r){m.undoQueue=m.undoQueue||{index:0,queue:[],sequence:!1};var l=m.undoQueue.index;if(m.autoplay)m.undoQueue.inSequence||
(m.autoplay=!1);else{if(!m.undoQueue.sequence||m.undoQueue.beginSequence){var c={undo:{calls:[],args:[]},redo:{calls:[],args:[]}};m.undoQueue.queue.splice(l,m.undoQueue.queue.length-l,c);m.undoQueue.index+=1}else c=m.undoQueue.queue[l-1];m.undoQueue.beginSequence=!1;c&&(c.undo.calls.unshift(a),c.undo.args.unshift(g),c.redo.calls.push(h),c.redo.args.push(r));m.undoQueue.queue.length>n.queueLength&&(m.undoQueue.queue.shift(),m.undoQueue.index--)}},startSequence:function(m){m.undoQueue=m.undoQueue||
{index:0,queue:[],sequence:!1};m.undoQueue.sequence=!0;m.undoQueue.beginSequence=!0},stopSequence:function(m){m.undoQueue=m.undoQueue||{index:0,queue:[],sequence:!1};m.undoQueue.sequence=!1;m.undoQueue.beginSequence=!1},undo:function(m){var a;if(!(void 0===m.undoQueue||isNaN(m.undoQueue.index)||0>=m.undoQueue.index)){m.undoQueue.index--;var g=m.undoQueue.queue[m.undoQueue.index];m.undoQueue.inSequence=!0;for(a=0;a<g.undo.calls.length;a++)k.plotDo(m,g.undo.calls[a],g.undo.args[a]);m.undoQueue.inSequence=
!1;m.autoplay=!1}},redo:function(m){var a;if(!(void 0===m.undoQueue||isNaN(m.undoQueue.index)||m.undoQueue.index>=m.undoQueue.queue.length)){var g=m.undoQueue.queue[m.undoQueue.index];m.undoQueue.inSequence=!0;for(a=0;a<g.redo.calls.length;a++)k.plotDo(m,g.redo.calls[a],g.redo.args[a]);m.undoQueue.inSequence=!1;m.autoplay=!1;m.undoQueue.index++}},plotDo:function(m,a,g){m.autoplay=!0;for(var h=[],r,l=0;l<g.length;l++)r=g[l],h[l]=r===m?r:"object"===typeof r?Array.isArray(r)?p.extendDeep([],r):p.extendDeepAll({},
r):r;a.apply(null,h)}};N.exports=k},{"../lib":803,"../plot_api/plot_config":841}],820:[function(b,N,G){G.counter=function(p,n,k,m){n=(n||"")+(k?"":"$");m=!1===m?"":"^";return"xy"===p?new RegExp(m+"x([2-9]|[1-9][0-9]+)?y([2-9]|[1-9][0-9]+)?"+n):new RegExp(m+p+"([2-9]|[1-9][0-9]+)?"+n)}},{}],821:[function(b,N,G){var p=/^(.*)(\.[^\.\[\]]+|\[\d\])$/,n=/^[^\.\[\]]+$/;N.exports=function(k,m){for(;m;){var a=k.match(p);if(a)k=a[1];else if(k.match(n))k="";else throw Error("bad relativeAttr call:"+[k,m]);if("^"===
m.charAt(0))m=m.slice(1);else break}return k&&"["!==m.charAt(0)?k+"."+m:k+m}},{}],822:[function(b,N,G){var p=b("./array").isArrayOrTypedArray,n=b("./is_plain_object");N.exports=function g(m,a){for(var h in a){var r=a[h],l=m[h];if(l!==r)if("_"===h.charAt(0)||"function"===typeof r)h in m||(m[h]=r);else if(p(r)&&p(l)&&n(r[0])){if("customdata"!==h&&"ids"!==h)for(var c=Math.min(r.length,l.length),d=0;d<c;d++)l[d]!==r[d]&&n(r[d])&&n(l[d])&&g(l[d],r[d])}else n(r)&&n(l)&&(g(l,r),Object.keys(l).length||delete m[h])}}},
{"./array":785,"./is_plain_object":804}],823:[function(b,N,G){function p(l,c){return l<c}function n(l,c){return l<=c}function k(l,c){return l>c}function m(l,c){return l>=c}var a=b("fast-isnumeric"),g=b("./loggers"),h=b("./identity"),r=b("../constants/numerical").BADNUM;G.findBin=function(l,c,d){if(a(c.start))return d?Math.ceil((l-c.start)/c.size-1E-9)-1:Math.floor((l-c.start)/c.size+1E-9);var e=0,f=c.length,q=0,t=1<f?(c[f-1]-c[0])/(f-1):1;var w=0<=t?d?p:n:d?m:k;for(l+=1E-9*t*(d?-1:1)*(0<=t?1:-1);e<
f&&100>q++;)d=Math.floor((e+f)/2),w(c[d],l)?e=d+1:f=d;90<q&&g.log("Long binary search...");return e-1};G.sorterAsc=function(l,c){return l-c};G.sorterDes=function(l,c){return c-l};G.distinctVals=function(l){l=l.slice();l.sort(G.sorterAsc);var c;for(c=l.length-1;-1<c&&l[c]===r;c--);for(var d=l[c]-l[0]||1,e=d/(c||1)/1E4,f=[],q,t=0;t<=c;t++){var w=l[t],x=w-q;void 0===q?(f.push(w),q=w):x>e&&(d=Math.min(d,x),f.push(w),q=w)}return{vals:f,minDiff:d}};G.roundUp=function(l,c,d){for(var e=0,f=c.length-1,q=0,
t=d?0:1,w=d?1:0,x=d?Math.ceil:Math.floor;e<f&&100>q++;)d=x((e+f)/2),c[d]<=l?e=d+t:f=d-w;return c[e]};G.sort=function(l,c){for(var d=0,e=0,f=1;f<l.length;f++){var q=c(l[f],l[f-1]);0>q?d=1:0<q&&(e=1);if(d&&e)return l.sort(c)}return e?l:l.reverse()};G.findIndexOfMin=function(l,c){c=c||h;for(var d=Infinity,e,f=0;f<l.length;f++){var q=c(l[f]);q<d&&(d=q,e=f)}return e}},{"../constants/numerical":779,"./identity":801,"./loggers":807,"fast-isnumeric":249}],824:[function(b,N,G){N.exports=function(p,n){(p.attr("class")||
"").split(" ").forEach(function(k){0===k.indexOf("cursor-")&&p.classed(k,!1)});n&&p.classed("cursor-"+n,!0)}},{}],825:[function(b,N,G){var p=b("../components/color"),n=function(){};N.exports=function(k){for(var m in k)"function"===typeof k[m]&&(k[m]=n);k.destroy=function(){k.container.parentNode.removeChild(k.container)};m=document.createElement("div");m.className="no-webgl";m.style.cursor="pointer";m.style.fontSize="24px";m.style.color=p.defaults[0];m.style.position="absolute";m.style.left=m.style.top=
"0px";m.style.width=m.style.height="100%";m.style["background-color"]=p.lightLine;m.style["z-index"]=30;var a=document.createElement("p");a.textContent="WebGL is not supported by your browser - visit https://get.webgl.org for more info";a.style.position="relative";a.style.top="50%";a.style.left="50%";a.style.height="30%";a.style.width="50%";a.style.margin="-15% 0 0 -25%";m.appendChild(a);k.container.appendChild(m);k.container.style.background="#FFFFFF";k.container.onclick=function(){window.open("https://get.webgl.org")};
return!1}},{"../components/color":666}],826:[function(b,N,G){N.exports=function(p){return Object.keys(p).sort()}},{}],827:[function(b,N,G){var p=b("fast-isnumeric"),n=b("./array").isArrayOrTypedArray;G.aggNums=function(k,m,a,g){var h;if(!g||g>a.length)g=a.length;p(m)||(m=!1);if(n(a[0])){var r=Array(g);for(h=0;h<g;h++)r[h]=G.aggNums(k,m,a[h]);a=r}for(h=0;h<g;h++)p(m)?p(a[h])&&(m=k(+m,+a[h])):m=a[h];return m};G.len=function(k){return G.aggNums(function(m){return m+1},0,k)};G.mean=function(k,m){m||(m=
G.len(k));return G.aggNums(function(a,g){return a+g},0,k)/m};G.midRange=function(k){if(void 0!==k&&0!==k.length)return(G.aggNums(Math.max,null,k)+G.aggNums(Math.min,null,k))/2};G.variance=function(k,m,a){m||(m=G.len(k));p(a)||(a=G.mean(k,m));return G.aggNums(function(g,h){return g+Math.pow(h-a,2)},0,k)/m};G.stdev=function(k,m,a){return Math.sqrt(G.variance(k,m,a))};G.median=function(k){k=k.slice().sort();return G.interp(k,.5)};G.interp=function(k,m){if(!p(m))throw"n should be a finite number";m=m*
k.length-.5;if(0>m)return k[0];if(m>k.length-1)return k[k.length-1];var a=m%1;return a*k[Math.ceil(m)]+(1-a)*k[Math.floor(m)]}},{"./array":785,"fast-isnumeric":249}],828:[function(b,N,G){var p=b("color-normalize");N.exports=function(n){return n?p(n):[0,0,0,1]}},{"color-normalize":131}],829:[function(b,N,G){function p(I,L,Q){var Z,ba,V,S;MathJax.Hub.Queue(function(){ba=r.extendDeepAll({},MathJax.Hub.config);V=MathJax.Hub.processSectionDelay;void 0!==MathJax.Hub.processSectionDelay&&(MathJax.Hub.processSectionDelay=
0);return MathJax.Hub.Config({messageStyle:"none",tex2jax:{inlineMath:[["$","$"],["\\(","\\)"]]},displayAlign:"left"})},function(){Z=MathJax.Hub.config.menuSettings.renderer;if("SVG"!==Z)return MathJax.Hub.setRenderer("SVG")},function(){var T="math-output-"+r.randstr({},64);S=h.select("body").append("div").attr({id:T}).style({visibility:"hidden",position:"absolute"}).style({"font-size":L.fontSize+"px"}).text(I.replace(f,"\\lt ").replace(q,"\\gt "));return MathJax.Hub.Typeset(S.node())},function(){var T=
h.select("body").select("#MathJax_SVG_glyphs");if(S.select(".MathJax_SVG").empty()||!S.select("svg").node())r.log("There was an error in the tex syntax.",I),Q();else{var fa=S.select("svg").node().getBoundingClientRect();Q(S.select(".MathJax_SVG"),T,fa)}S.remove();if("SVG"!==Z)return MathJax.Hub.setRenderer(Z)},function(){void 0!==V&&(MathJax.Hub.processSectionDelay=V);return MathJax.Hub.Config(ba)})}function n(I,L){return I?(I=(I=I.match(L))&&(I[3]||I[4]))&&k(I):null}function k(I){return I.replace(O,
function(L,Q){if("#"===Q.charAt(0))if(Q="x"===Q.charAt(1)?parseInt(Q.substr(2),16):parseInt(Q.substr(1),10),1114111<Q)Q=void 0;else{var Z=String.fromCodePoint;Z?Q=Z(Q):(Z=String.fromCharCode,Q=65535>=Q?Z(Q):Z((Q>>10)+55232,Q%1024+56320))}else Q=H[Q];return Q||L})}function m(I,L){function Q(){fa++;var la=document.createElementNS(c.svg,"tspan");h.select(la).attr({class:"line",dy:fa*d+"em"});I.appendChild(la);W=la;var ka=T;T=[{node:la}];if(1<ka.length)for(la=1;la<ka.length;la++)Z(ka[la])}function Z(la){var ka=
la.type,na={};if("a"===ka){var oa="a";var sa=la.target,za=la.href,Ha=la.popup;za&&(na={"xlink:xlink:show":"_blank"===sa||"_"!==sa.charAt(0)?"new":"replace",target:sa,"xlink:xlink:href":za},Ha&&(na.onclick='window.open(this.href.baseVal,this.target.baseVal,"'+Ha+'");return false;'))}else oa="tspan";la.style&&(na.style=la.style);oa=document.createElementNS(c.svg,oa);"sup"===ka||"sub"===ka?(ba(W,z),W.appendChild(oa),sa=document.createElementNS(c.svg,"tspan"),ba(sa,z),h.select(sa).attr("dy",x[ka]),na.dy=
w[ka],W.appendChild(oa),W.appendChild(sa)):W.appendChild(oa);h.select(oa).attr(na);W=la.node=oa;T.push(la)}function ba(la,ka){la.appendChild(document.createTextNode(ka))}function V(la){if(1===T.length)r.log("Ignoring unexpected end tag \x3c/"+la+"\x3e.",L);else{var ka=T.pop();la!==ka.type&&r.log("Start tag \x3c"+ka.type+"\x3e doesnt match end tag \x3c"+la+"\x3e. Pretending it did match.",L);W=T[T.length-1].node}}L=L.replace(A," ");var S=!1,T=[],fa=-1;if(v.test(L))Q();else{var W=I;T=[{node:I}]}for(var aa=
L.split(D),ja=0;ja<aa.length;ja++){var ma=aa[ja],ia=ma.match(C),ra=ia&&ia[2].toLowerCase(),wa=t[ra];if("br"===ra)Q();else if(void 0===wa)ba(W,k(ma));else if(ia[1])V(ra);else{ma=ia[4];ia={type:ra};var pa=n(ma,y);pa?(pa=pa.replace(M,"$1 fill:"),wa&&(pa+=";"+wa)):wa&&(pa=wa);pa&&(ia.style=pa);"a"===ra&&(S=!0,ra=n(ma,F))&&(ra=a(ra))&&(ia.href=ra,ia.target=n(ma,J)||"_blank",ia.popup=n(ma,K));Z(ia)}}return S}function a(I){var L=encodeURI(decodeURI(I)),Q=document.createElement("a"),Z=document.createElement("a");
Q.href=I;Z.href=L;I=Z.protocol;return-1!==B.indexOf(Q.protocol)&&-1!==B.indexOf(I)?L:""}function g(I,L,Q){var Z=Q.horizontalAlign,ba=Q.verticalAlign||"top",V=I.node().getBoundingClientRect(),S=L.node().getBoundingClientRect(),T;var fa="bottom"===ba?function(){return V.bottom-T.height}:"middle"===ba?function(){return V.top+(V.height-T.height)/2}:function(){return V.top};var W="right"===Z?function(){return V.right-T.width}:"center"===Z?function(){return V.left+(V.width-T.width)/2}:function(){return V.left};
return function(){T=this.node().getBoundingClientRect();var aa=W()-S.left,ja=fa()-S.top,ma=Q.gd||{};Q.gd&&(ma._fullLayout._calcInverseTransform(ma),ja=r.apply3DTransform(ma._fullLayout._invTransform)(aa,ja),aa=ja[0],ja=ja[1]);this.style({top:ja+"px",left:aa+"px","z-index":1E3});return this}}var h=b("@plotly/d3"),r=b("../lib"),l=r.strTranslate,c=b("../constants/xmlns_namespaces"),d=b("../constants/alignment").LINE_SPACING,e=/([^$]*)([$]+[^$]*[$]+)([^$]*)/;G.convertToTspans=function(I,L,Q){function Z(){S.empty()||
(T=I.attr("class")+"-math",S.select("svg."+T).remove());I.text("").style("white-space","pre");m(I.node(),ba)&&I.style("pointer-events","all");G.positionText(I);Q&&Q.call(I)}var ba=I.text(),V=!I.attr("data-notex")&&"undefined"!==typeof MathJax&&ba.match(e),S=h.select(I.node().parentNode);if(!S.empty()){var T=I.attr("class")?I.attr("class").split(" ")[0]:"text";T+="-math";S.selectAll("svg."+T).remove();S.selectAll("g."+T+"-group").remove();I.style("display",null).attr({"data-unformatted":ba,"data-math":"N"});
V?(L&&L._promises||[]).push(new Promise(function(fa){I.style("display","none");var W=parseInt(I.node().style.fontSize,10);p(V[2],{fontSize:W},function(aa,ja,ma){S.selectAll("svg."+T).remove();S.selectAll("g."+T+"-group").remove();if((aa=aa&&aa.select("svg"))&&aa.node()){var ia=S.append("g").classed(T+"-group",!0).attr({"pointer-events":"none","data-unformatted":ba,"data-math":"Y"});ia.node().appendChild(aa.node());ja&&ja.node()&&aa.node().insertBefore(ja.node().cloneNode(!0),aa.node().firstChild);
aa.attr({"class":T,height:ma.height,preserveAspectRatio:"xMinYMin meet"}).style({overflow:"visible","pointer-events":"none"});ja=I.node().style.fill||"black";ma=aa.select("g");ma.attr({fill:ja,stroke:ja});ja=ma.node().getBoundingClientRect().width;ma=ma.node().getBoundingClientRect().height;var ra=+I.attr("x")-ja*{start:0,middle:.5,end:1}[I.attr("text-anchor")||"start"],wa=-(W||I.node().getBoundingClientRect().height)/4;"y"===T[0]?(ia.attr({transform:"rotate("+[-90,+I.attr("x"),+I.attr("y")]+")"+
l(-ja/2,wa-ma/2)}),aa.attr({x:+I.attr("x"),y:+I.attr("y")})):"l"===T[0]?aa.attr({x:I.attr("x"),y:wa-ma/2}):"a"===T[0]&&0!==T.indexOf("atitle")?aa.attr({x:0,y:wa}):aa.attr({x:ra,y:+I.attr("y")+wa-ma/2});Q&&Q.call(I,ia);fa(ia)}else Z(),fa()})})):Z();return I}};var f=/(<|&lt;|&#60;)/g,q=/(>|&gt;|&#62;)/g,t={sup:"font-size:70%",sub:"font-size:70%",b:"font-weight:bold",i:"font-style:italic",a:"cursor:pointer",span:"",em:"font-style:italic;font-weight:bold"},w={sub:"0.3em",sup:"-0.6em"},x={sub:"-0.21em",
sup:"0.42em"},z="",B=["http:","https:","mailto:","",void 0,":"],A=G.NEWLINES=/(\r\n?|\n)/g,D=/(<[^<>]*>)/,C=/<(\/?)([^ >]*)(\s+(.*))?>/i,v=/<br(\s+.*)?>/i;G.BR_TAG_ALL=/<br(\s+.*)?>/gi;var y=/(^|[\s"'])style\s*=\s*("([^"]*);?"|'([^']*);?')/i,F=/(^|[\s"'])href\s*=\s*("([^"]*)"|'([^']*)')/i,J=/(^|[\s"'])target\s*=\s*("([^"\s]*)"|'([^'\s]*)')/i,K=/(^|[\s"'])popup\s*=\s*("([\w=,]*)"|'([\w=,]*)')/i,M=/(^|;)\s*color:/;G.plainText=function(I,L){L=L||{};var Q=void 0!==L.len&&-1!==L.len?L.len:Infinity;L=
void 0!==L.allowedTags?L.allowedTags:["br"];var Z=I.split(D);I=[];for(var ba="",V=0,S=0;S<Z.length;S++){var T=Z[S],fa=T.match(C);if(fa=fa&&fa[2].toLowerCase())-1!==L.indexOf(fa)&&(I.push(T),ba=fa);else{fa=T.length;if(V+fa<Q)I.push(T),V+=fa;else if(V<Q){L=Q-V;ba&&("br"!==ba||3>=L||3>=fa)&&I.pop();3<Q?I.push(T.substr(0,L-3)+"..."):I.push(T.substr(0,L));break}ba=""}}return I.join("")};var H={mu:"",amp:"\x26",lt:"\x3c",gt:"\x3e",nbsp:"",times:"",plusmn:"",deg:""},O=/&(#\d+|#x[\da-fA-F]+|[a-z]+);/g;
G.convertEntities=k;G.sanitizeHTML=function(I){I=I.replace(A," ");var L=document.createElement("p"),Q=L,Z=[];I=I.split(D);for(var ba=0;ba<I.length;ba++){var V=I[ba],S=V.match(C),T=S&&S[2].toLowerCase();if(T in t)if(S[1])Z.length&&(Q=Z.pop());else{S=S[4];V=(V=n(S,y))?{style:V}:{};if("a"===T){var fa=n(S,F);fa&&(fa=a(fa))&&(V.href=fa,S=n(S,J))&&(V.target=S)}T=document.createElement(T);Q.appendChild(T);h.select(T).attr(V);Q=T;Z.push(T)}else Q.appendChild(document.createTextNode(k(V)))}return L.innerHTML};
G.lineCount=function(I){return I.selectAll("tspan.line").size()||1};G.positionText=function(I,L,Q){return I.each(function(){function Z(T,fa){void 0===fa?(fa=ba.attr(T),null===fa&&(ba.attr(T,0),fa=0)):ba.attr(T,fa);return fa}var ba=h.select(this),V=Z("x",L),S=Z("y",Q);"text"===this.nodeName&&ba.selectAll("tspan.line").attr({x:V,y:S})})};G.makeTextShadow=function(I){return"1px 1px 1px "+I+", -1px -1px 1px "+I+", 1px -1px 1px "+I+", -1px 1px 1px "+I};G.makeEditable=function(I,L){function Q(){ba();I.style({opacity:0});
var W=fa.attr("class");(W=W?"."+W.split(" ")[0]+"-math-group":"[class*\x3d-math-group]")&&h.select(I.node().parentNode).select(W).style({opacity:0})}function Z(W){W=W.node();var aa=document.createRange();aa.selectNodeContents(W);var ja=window.getSelection();ja.removeAllRanges();ja.addRange(aa);W.focus()}function ba(){var W=h.select(V).select(".svg-container"),aa=W.append("div"),ja=I.node().style,ma=parseFloat(ja.fontSize||12),ia=L.text;void 0===ia&&(ia=I.attr("data-unformatted"));aa.classed("plugin-editable editable",
!0).style({position:"absolute","font-family":ja.fontFamily||"Arial","font-size":ma,color:L.fill||ja.fill||"black",opacity:1,"background-color":L.background||"transparent",outline:"#ffffff33 1px solid",margin:[-ma/8+1,0,0,-1].join("px ")+"px",padding:"0","box-sizing":"border-box"}).attr({contenteditable:!0}).text(ia).call(g(I,W,L)).on("blur",function(){V._editing=!1;I.text(this.textContent).style({opacity:1});var ra=h.select(this).attr("class");(ra=ra?"."+ra.split(" ")[0]+"-math-group":"[class*\x3d-math-group]")&&
h.select(I.node().parentNode).select(ra).style({opacity:0});ra=this.textContent;h.select(this).transition().duration(0).remove();h.select(document).on("mouseup",null);T.edit.call(I,ra)}).on("focus",function(){var ra=this;V._editing=!0;h.select(document).on("mouseup",function(){if(h.event.target===ra)return!1;document.activeElement===aa.node()&&aa.node().blur()})}).on("keyup",function(){27===h.event.which?(V._editing=!1,I.style({opacity:1}),h.select(this).style({opacity:0}).on("blur",function(){return!1}).transition().remove(),
T.cancel.call(I,this.textContent)):(T.input.call(I,this.textContent),h.select(this).call(g(I,W,L)))}).on("keydown",function(){13===h.event.which&&this.blur()}).call(Z)}var V=L.gd,S=L.delegate,T=h.dispatch("edit","input","cancel"),fa=S||I;I.style({"pointer-events":S?"none":"all"});if(1!==I.size())throw Error("boo");if(L.immediate)Q();else fa.on("click",Q);return h.rebind(I,T,"on")}},{"../constants/alignment":771,"../constants/xmlns_namespaces":780,"../lib":803,"@plotly/d3":58}],830:[function(b,N,G){function p(k){k&&
null!==k.timer&&(clearTimeout(k.timer),k.timer=null)}var n={};G.throttle=function(k,m,a){function g(){a();h.ts=Date.now();h.onDone&&(h.onDone(),h.onDone=null)}var h=n[k],r=Date.now();if(!h){for(var l in n)n[l].ts<r-6E4&&delete n[l];h=n[k]={ts:0,timer:null}}p(h);r>h.ts+m?g():h.timer=setTimeout(function(){g();h.timer=null},m)};G.done=function(k){var m=n[k];return m&&m.timer?new Promise(function(a){var g=m.onDone;m.onDone=function(){g&&g();a();m.onDone=null}}):Promise.resolve()};G.clear=function(k){if(k)p(n[k]),
delete n[k];else for(var m in n)G.clear(m)}},{}],831:[function(b,N,G){var p=b("fast-isnumeric");N.exports=function(n,k){if(0<n)return Math.log(n)/Math.LN10;n=Math.log(Math.min(k[0],k[1]))/Math.LN10;p(n)||(n=Math.log(Math.max(k[0],k[1]))/Math.LN10-6);return n}},{"fast-isnumeric":249}],832:[function(b,N,G){N=N.exports={};var p=b("../plots/geo/constants").locationmodeToLayer,n=b("topojson-client").feature;N.getTopojsonName=function(k){return[k.scope.replace(/ /g,"-"),"_",k.resolution.toString(),"m"].join("")};
N.getTopojsonPath=function(k,m){return k+m+".json"};N.getTopojsonFeatures=function(k,m){return n(m,m.objects[p[k.locationmode]]).features}},{"../plots/geo/constants":885,"topojson-client":601}],833:[function(b,N,G){N.exports={moduleType:"locale",name:"en-US",dictionary:{"Click to enter Colorscale title":"Click to enter Colorscale title"},format:{date:"%m/%d/%Y"}}},{}],834:[function(b,N,G){N.exports={moduleType:"locale",name:"en",dictionary:{"Click to enter Colorscale title":"Click to enter Colourscale title"},
format:{days:"Sunday Monday Tuesday Wednesday Thursday Friday Saturday".split(" "),shortDays:"Sun Mon Tue Wed Thu Fri Sat".split(" "),months:"January February March April May June July August September October November December".split(" "),shortMonths:"Jan Feb Mar Apr May Jun Jul Aug Sep Oct Nov Dec".split(" "),periods:["AM","PM"],dateTime:"%a %b %e %X %Y",date:"%d/%m/%Y",time:"%H:%M:%S",decimal:".",thousands:",",grouping:[3],currency:["$",""],year:"%Y",month:"%b %Y",dayMonth:"%b %-d",dayMonthYear:"%b %-d, %Y"}}},
{}],835:[function(b,N,G){var p=b("../registry");N.exports=function(n){for(var k=p.layoutArrayContainers,m=p.layoutArrayRegexes,a=n.split("[")[0],g,h,r=0;r<m.length;r++)if((h=n.match(m[r]))&&0===h.index){g=h[0];break}g||(g=k[k.indexOf(a)]);if(!g)return!1;n=n.substr(g.length);return n?(h=n.match(/^\[(0|[1-9][0-9]*)\](\.(.+))?$/))?{array:g,index:Number(h[1]),property:h[3]||""}:!1:{array:g,index:"",property:""}}},{"../registry":931}],836:[function(b,N,G){function p(r){for(var l={},c=0;c<r.length;c++)l[r[c]]=
!1;return l}function n(r,l,c){r=m({},r);for(var d in r){var e=r[d];a(e)&&(r[d]=k(e,l,c,d))}"from-root"===c&&(r.editType=l);return r}function k(r,l,c,d){if(r.valType){c=m({},r);c.editType=l;if(Array.isArray(r.items))for(c.items=Array(r.items.length),d=0;d<r.items.length;d++)c.items[d]=k(r.items[d],l,"from-root");return c}return n(r,l,"_"===d.charAt(0)?"nested":"from-root")}b=b("../lib");var m=b.extendFlat,a=b.isPlainObject;b={valType:"flaglist",extras:["none"],flags:"calc clearAxisTypes plot style markerSize colorbars".split(" ")};
G={valType:"flaglist",extras:["none"],flags:"calc plot legend ticks axrange layoutstyle modebar camera arraydraw colorbars".split(" ")};var g=b.flags.slice().concat(["fullReplot"]),h=G.flags.slice().concat("layoutReplot");N.exports={traces:b,layout:G,traceFlags:function(){return p(g)},layoutFlags:function(){return p(h)},update:function(r,l){if((l=l.editType)&&"none"!==l){l=l.split("+");for(var c=0;c<l.length;c++)r[l[c]]=!0}},overrideAll:n}},{"../lib":803}],837:[function(b,N,G){function p(z,B){var A=
z[B],D=B.charAt(0);A&&"paper"!==A&&(z[B]=f(A,D,!0))}function n(z){function B(A,D){var C=z.title&&z.title[D];z[A]&&!C&&(z.title||(z.title={}),z.title[D]=z[A],delete z[A])}if(z){if("string"===typeof z.title||"number"===typeof z.title)z.title={text:z.title};B("titlefont","font");B("titleposition","position");B("titleside","side");B("titleoffset","offset")}}function k(z){if(!c.isPlainObject(z))return!1;var B=z.name;delete z.name;delete z.showlegend;return("string"===typeof B||"number"===typeof B)&&String(B)}
function m(z){var B="middle",A="center";"string"===typeof z&&(-1!==z.indexOf("top")?B="top":-1!==z.indexOf("bottom")&&(B="bottom"),-1!==z.indexOf("left")?A="left":-1!==z.indexOf("right")&&(A="right"));return B+" "+A}function a(z,B){return B in z&&"object"===typeof z[B]&&0===Object.keys(z[B]).length}function g(z){var B=z.search(w);if(0<B)return z.substr(0,B)}var h=b("fast-isnumeric"),r=b("gl-mat4/fromQuat"),l=b("../registry"),c=b("../lib"),d=b("../plots/plots");N=b("../plots/cartesian/axis_ids");var e=
b("../components/color"),f=N.cleanId,q=N.getFromTrace,t=l.traceIs;G.clearPromiseQueue=function(z){Array.isArray(z._promises)&&0<z._promises.length&&c.log("Clearing previous rejected promises from queue.");z._promises=[]};G.cleanLayout=function(z){var B;z||(z={});z.xaxis1&&(z.xaxis||(z.xaxis=z.xaxis1),delete z.xaxis1);z.yaxis1&&(z.yaxis||(z.yaxis=z.yaxis1),delete z.yaxis1);z.scene1&&(z.scene||(z.scene=z.scene1),delete z.scene1);var A=(d.subplotsRegistry.cartesian||{}).attrRegex,D=(d.subplotsRegistry.polar||
{}).attrRegex,C=(d.subplotsRegistry.ternary||{}).attrRegex,v=(d.subplotsRegistry.gl3d||{}).attrRegex,y=Object.keys(z);for(B=0;B<y.length;B++){var F=y[B];if(A&&A.test(F)){F=z[F];F.anchor&&"free"!==F.anchor&&(F.anchor=f(F.anchor));F.overlaying&&(F.overlaying=f(F.overlaying));F.type||(F.isdate?F.type="date":F.islog?F.type="log":!1===F.isdate&&!1===F.islog&&(F.type="linear"));if("withzero"===F.autorange||"tozero"===F.autorange)F.autorange=!0,F.rangemode="tozero";delete F.islog;delete F.isdate;delete F.categories;
a(F,"domain")&&delete F.domain;void 0!==F.autotick&&(void 0===F.tickmode&&(F.tickmode=F.autotick?"auto":"linear"),delete F.autotick);n(F)}else if(D&&D.test(F))n(z[F].radialaxis);else if(C&&C.test(F))F=z[F],n(F.aaxis),n(F.baxis),n(F.caxis);else if(v&&v.test(F)){F=z[F];var J=F.cameraposition;if(Array.isArray(J)&&4===J[0].length){var K=J[1],M=J[2],H=r([],J[0]),O=[];for(J=0;3>J;++J)O[J]=K[J]+M*H[2+4*J];F.camera={eye:{x:O[0],y:O[1],z:O[2]},center:{x:K[0],y:K[1],z:K[2]},up:{x:0,y:0,z:1}};delete F.cameraposition}n(F.xaxis);
n(F.yaxis);n(F.zaxis)}}A=Array.isArray(z.annotations)?z.annotations.length:0;for(B=0;B<A;B++)D=z.annotations[B],c.isPlainObject(D)&&(D.ref&&("paper"===D.ref?(D.xref="paper",D.yref="paper"):"data"===D.ref&&(D.xref="x",D.yref="y"),delete D.ref),p(D,"xref"),p(D,"yref"));A=Array.isArray(z.shapes)?z.shapes.length:0;for(B=0;B<A;B++)D=z.shapes[B],c.isPlainObject(D)&&(p(D,"xref"),p(D,"yref"));A=Array.isArray(z.images)?z.images.length:0;for(B=0;B<A;B++)D=z.images[B],c.isPlainObject(D)&&(p(D,"xref"),p(D,"yref"));
if(B=z.legend)3<B.x?(B.x=1.02,B.xanchor="left"):-2>B.x&&(B.x=-.02,B.xanchor="right"),3<B.y?(B.y=1.02,B.yanchor="bottom"):-2>B.y&&(B.y=-.02,B.yanchor="top");n(z);"rotate"===z.dragmode&&(z.dragmode="orbit");e.clean(z);z.template&&z.template.layout&&G.cleanLayout(z.template.layout);return z};G.cleanData=function(z){for(var B=0;B<z.length;B++){var A=z[B];"histogramy"===A.type&&"xbins"in A&&!("ybins"in A)&&(A.ybins=A.xbins,delete A.xbins);if(A.error_y&&"opacity"in A.error_y){var D=e.defaults;D=A.error_y.color||
(t(A,"bar")?e.defaultLine:D[B%D.length]);A.error_y.color=e.addOpacity(e.rgb(D),e.opacity(D)*A.error_y.opacity);delete A.error_y.opacity}"bardir"in A&&("h"!==A.bardir||!t(A,"bar")&&"histogram"!==A.type.substr(0,9)||(A.orientation="h",G.swapXYData(A)),delete A.bardir);"histogramy"===A.type&&G.swapXYData(A);if("histogramx"===A.type||"histogramy"===A.type)A.type="histogram";"scl"in A&&!("colorscale"in A)&&(A.colorscale=A.scl,delete A.scl);"reversescl"in A&&!("reversescale"in A)&&(A.reversescale=A.reversescl,
delete A.reversescl);A.xaxis&&(A.xaxis=f(A.xaxis,"x"));A.yaxis&&(A.yaxis=f(A.yaxis,"y"));t(A,"gl3d")&&A.scene&&(A.scene=d.subplotsRegistry.gl3d.cleanId(A.scene));if(!t(A,"pie-like")&&!t(A,"bar-like"))if(Array.isArray(A.textposition))for(D=0;D<A.textposition.length;D++)A.textposition[D]=m(A.textposition[D]);else A.textposition&&(A.textposition=m(A.textposition));(D=l.getModule(A))&&D.colorbar&&(D=(D=D.colorbar.container)?A[D]:A)&&D.colorscale&&("YIGnBu"===D.colorscale&&(D.colorscale="YlGnBu"),"YIOrRd"===
D.colorscale&&(D.colorscale="YlOrRd"));if("surface"===A.type&&c.isPlainObject(A.contours)){var C=["x","y","z"];for(D=0;D<C.length;D++){var v=A.contours[C[D]];c.isPlainObject(v)&&(v.highlightColor&&(v.highlightcolor=v.highlightColor,delete v.highlightColor),v.highlightWidth&&(v.highlightwidth=v.highlightWidth,delete v.highlightWidth))}}if("candlestick"===A.type||"ohlc"===A.type){C=!1!==(A.increasing||{}).showlegend;v=!1!==(A.decreasing||{}).showlegend;D=k(A.increasing);var y=k(A.decreasing);if(!1!==
D&&!1!==y){if(!C||v)if(v&&!C)D=y;else if(D.trim()){if(y.trim()){v=Math.min(D.length,y.length);for(C=0;C<v&&D.charAt(C)===y.charAt(C);C++);D=D.substr(0,C).trim()}}else D=y;D&&(A.name=D)}else!D&&!y||A.name||(A.name=D||y)}if(Array.isArray(A.transforms))for(C=A.transforms,D=0;D<C.length;D++)if(v=C[D],c.isPlainObject(v))switch(v.type){case "filter":v.filtersrc&&(v.target=v.filtersrc,delete v.filtersrc);v.calendar&&(v.valuecalendar||(v.valuecalendar=v.calendar),delete v.calendar);break;case "groupby":if(v.styles=
v.styles||v.style,v.styles&&!Array.isArray(v.styles)){y=v.styles;var F=Object.keys(y);v.styles=[];for(var J=0;J<F.length;J++)v.styles.push({target:F[J],value:y[F[J]]})}}a(A,"line")&&delete A.line;"marker"in A&&(a(A.marker,"line")&&delete A.marker.line,a(A,"marker")&&delete A.marker);e.clean(A);A.autobinx&&(delete A.autobinx,delete A.xbins);A.autobiny&&(delete A.autobiny,delete A.ybins);n(A);A.colorbar&&n(A.colorbar);A.marker&&A.marker.colorbar&&n(A.marker.colorbar);A.line&&A.line.colorbar&&n(A.line.colorbar);
A.aaxis&&n(A.aaxis);A.baxis&&n(A.baxis)}};G.swapXYData=function(z){c.swapAttrs(z,"? ?0 d? ?bins nbins? autobin? ?src error_?".split(" "));Array.isArray(z.z)&&Array.isArray(z.z[0])&&(z.transpose?delete z.transpose:z.transpose=!0);if(z.error_x&&z.error_y){var B=z.error_y;B="copy_ystyle"in B?B.copy_ystyle:!(B.color||B.thickness||B.width);c.swapAttrs(z,["error_?.copy_ystyle"]);B&&c.swapAttrs(z,["error_?.color","error_?.thickness","error_?.width"])}if("string"===typeof z.hoverinfo){var A=z.hoverinfo.split("+");
for(B=0;B<A.length;B++)"x"===A[B]?A[B]="y":"y"===A[B]&&(A[B]="x");z.hoverinfo=A.join("+")}};G.coerceTraceIndices=function(z,B){if(h(B))return[B];if(!Array.isArray(B)||!B.length)return z.data.map(function(C,v){return v});if(Array.isArray(B)){for(var A=[],D=0;D<B.length;D++)c.isIndex(B[D],z.data.length)?A.push(B[D]):c.warn("trace index (",B[D],") is not a number or is out of bounds");return A}return B};G.manageArrayContainers=function(z,B,A){var D=z.obj,C=z.parts,v=C.length,y=C[v-1],F=h(y);F&&null===
B?(z=C.slice(0,v-1).join("."),c.nestedProperty(D,z).get().splice(y,1)):(F&&void 0===z.get()&&void 0===z.get()&&(A[z.astr]=null),z.set(B))};var w=/(\.[^\[\]\.]+|\[[^\[\]\.]+\])$/;G.hasParent=function(z,B){for(B=g(B);B;){if(B in z)return!0;B=g(B)}return!1};var x=["x","y","z"];G.clearAxisTypes=function(z,B,A){for(var D=0;D<B.length;D++)for(var C=z._fullData[D],v=0;3>v;v++){var y=q(z,C,x[v]);if(y&&"log"!==y.type){var F=y._name;y=y._id.substr(1);if("scene"===y.substr(0,5)){if(void 0!==A[y])continue;F=
y+"."+F}y=F+".type";void 0===A[F]&&void 0===A[y]&&c.nestedProperty(z.layout,y).set(null)}}}},{"../components/color":666,"../lib":803,"../plots/cartesian/axis_ids":858,"../plots/plots":917,"../registry":931,"fast-isnumeric":249,"gl-mat4/fromQuat":288}],838:[function(b,N,G){N=b("./plot_api");G._doPlot=N._doPlot;G.newPlot=N.newPlot;G.restyle=N.restyle;G.relayout=N.relayout;G.redraw=N.redraw;G.update=N.update;G._guiRestyle=N._guiRestyle;G._guiRelayout=N._guiRelayout;G._guiUpdate=N._guiUpdate;G._storeDirectGUIEdit=
N._storeDirectGUIEdit;G.react=N.react;G.extendTraces=N.extendTraces;G.prependTraces=N.prependTraces;G.addTraces=N.addTraces;G.deleteTraces=N.deleteTraces;G.moveTraces=N.moveTraces;G.purge=N.purge;G.addFrames=N.addFrames;G.deleteFrames=N.deleteFrames;G.animate=N.animate;G.setPlotConfig=N.setPlotConfig;G.toImage=b("./to_image");G.validate=b("./validate");G.downloadImage=b("../snapshot/download");b=b("./template_api");G.makeTemplate=b.makeTemplate;G.validateTemplate=b.validateTemplate},{"../snapshot/download":933,
"./plot_api":840,"./template_api":845,"./to_image":846,"./validate":847}],839:[function(b,N,G){var p=b("../lib/is_plain_object"),n=b("../lib/noop"),k=b("../lib/loggers"),m=b("../lib/search").sorterAsc,a=b("../registry");G.containerArrayMatch=b("./container_array_match");var g=G.isAddVal=function(r){return"add"===r||p(r)},h=G.isRemoveVal=function(r){return null===r||"remove"===r};G.applyContainerArrayChanges=function(r,l,c,d,e){var f=l.astr,q=a.getComponentMethod(f,"supplyLayoutDefaults"),t=a.getComponentMethod(f,
"draw"),w=a.getComponentMethod(f,"drawOne");d=d.replot||d.recalc||q===n||t===n;var x=r.layout,z=r._fullLayout;if(c[""]){1<Object.keys(c).length&&k.warn("Full array edits are incompatible with other edits",f);w=c[""][""];if(h(w))l.set(null);else if(Array.isArray(w))l.set(w);else return k.warn("Unrecognized full array edit value",f,w),!0;if(d)return!1;q(x,z);t(r);return!0}var B=Object.keys(c).map(Number).sort(m),A=l.get(),D=A||[],C=e(z,f).get(),v=[],y=-1,F=D.length,J;for(J=0;J<B.length;J++){var K=B[J];
var M=c[K];var H=Object.keys(M);var O=M[""];var I=g(O);if(0>K||K>D.length-(I?0:1))k.warn("index out of range",f,K);else if(void 0!==O)1<H.length&&k.warn("Insertion \x26 removal are incompatible with edits to the same index.",f,K),h(O)?v.push(K):I?("add"===O&&(O={}),D.splice(K,0,O),C&&C.splice(K,0,{})):k.warn("Unrecognized full object edit value",f,K,O),-1===y&&(y=K);else for(O=0;O<H.length;O++)I=f+"["+K+"].",e(D[K],H[O],I).set(M[H[O]])}for(J=v.length-1;0<=J;J--)D.splice(v[J],1),C&&C.splice(v[J],1);
D.length?A||l.set(D):l.set(null);if(d)return!1;q(x,z);if(w!==n){if(-1===y)l=B;else{F=Math.max(D.length,F);l=[];for(J=0;J<B.length;J++){K=B[J];if(K>=y)break;l.push(K)}for(J=y;J<F;J++)l.push(J)}for(J=0;J<l.length;J++)w(r,l[J])}else t(r);return!0}},{"../lib/is_plain_object":804,"../lib/loggers":807,"../lib/noop":812,"../lib/search":823,"../registry":931,"./container_array_match":835}],840:[function(b,N,G){function p(La){var Ka=La._fullLayout;Ka._redrawFromAutoMarginCount?Ka._redrawFromAutoMarginCount--:
La.emit("plotly_afterplot")}function n(La,Ka){try{La._fullLayout._paper.style("background",Ka)}catch(ya){ja.error(ya)}}function k(La,Ka){Ka=oa.combine(Ka,"white");n(La,Ka)}function m(La,Ka){if(!La._context){La._context=ja.extendDeep({},Wa);var ya=fa.select("base");La._context._baseUrl=ya.size()&&ya.attr("href")?window.location.href.split("#")[0]:""}var Aa=La._context;if(Ka){var Ja=Object.keys(Ka);for(ya=0;ya<Ja.length;ya++){var Ta=Ja[ya];"editable"!==Ta&&"edits"!==Ta&&Ta in Aa&&(Aa[Ta]="setBackground"===
Ta&&"opaque"===Ka[Ta]?k:Ka[Ta])}Ka.plot3dPixelRatio&&!Aa.plotGlPixelRatio&&(Aa.plotGlPixelRatio=Aa.plot3dPixelRatio);Ta=Ka.editable;if(void 0!==Ta)for(Aa.editable=Ta,Ja=Object.keys(Aa.edits),ya=0;ya<Ja.length;ya++)Aa.edits[Ja[ya]]=Ta;if(Ka.edits)for(Ja=Object.keys(Ka.edits),ya=0;ya<Ja.length;ya++)Ta=Ja[ya],Ta in Aa.edits&&(Aa.edits[Ta]=Ka.edits[Ta]);Aa._exportedPlot=Ka._exportedPlot}Aa.staticPlot&&(Aa.editable=!1,Aa.edits={},Aa.autosizable=!1,Aa.scrollZoom=!1,Aa.doubleClick=!1,Aa.showTips=!1,Aa.showLink=
!1,Aa.displayModeBar=!1);"hover"!==Aa.displayModeBar||aa||(Aa.displayModeBar=!0);if("transparent"===Aa.setBackground||"function"!==typeof Aa.setBackground)Aa.setBackground=n;Aa._hasZeroHeight=Aa._hasZeroHeight||0===La.clientHeight;Aa._hasZeroWidth=Aa._hasZeroWidth||0===La.clientWidth;ya=Aa.scrollZoom;La=Aa._scrollZoom={};if(!0===ya)La.cartesian=1,La.gl3d=1,La.geo=1,La.mapbox=1;else if("string"===typeof ya)for(Ka=ya.split("+"),ya=0;ya<Ka.length;ya++)La[Ka[ya]]=1;else!1!==ya&&(La.gl3d=1,La.geo=1,La.mapbox=
1)}function a(La,Ka){Ka+=1;var ya=[],Aa;for(Aa=0;Aa<La.length;Aa++){var Ja=La[Aa];0>Ja?ya.push(Ka+Ja):ya.push(Ja)}return ya}function g(La,Ka,ya){var Aa;for(Aa=0;Aa<Ka.length;Aa++){var Ja=Ka[Aa];if(Ja!==parseInt(Ja,10))throw Error("all values in "+ya+" must be integers");if(Ja>=La.data.length||Ja<-La.data.length)throw Error(ya+" must be valid indices for gd.data.");if(-1<Ka.indexOf(Ja,Aa+1)||0<=Ja&&-1<Ka.indexOf(-La.data.length+Ja)||0>Ja&&-1<Ka.indexOf(La.data.length+Ja))throw Error("each index in "+
ya+" must be unique.");}}function h(La,Ka,ya){if(!Array.isArray(La.data))throw Error("gd.data must be an array.");if("undefined"===typeof Ka)throw Error("currentIndices is a required argument.");Array.isArray(Ka)||(Ka=[Ka]);g(La,Ka,"currentIndices");"undefined"===typeof ya||Array.isArray(ya)||(ya=[ya]);"undefined"!==typeof ya&&g(La,ya,"newIndices");if("undefined"!==typeof ya&&Ka.length!==ya.length)throw Error("current and new indices must be of equal length.");}function r(La,Ka,ya){if(!Array.isArray(La.data))throw Error("gd.data must be an array.");
if("undefined"===typeof Ka)throw Error("traces must be defined.");Array.isArray(Ka)||(Ka=[Ka]);for(La=0;La<Ka.length;La++){var Aa=Ka[La];if("object"!==typeof Aa||Array.isArray(Aa)||null===Aa)throw Error("all values in traces array must be non-array objects");}"undefined"===typeof ya||Array.isArray(ya)||(ya=[ya]);if("undefined"!==typeof ya&&ya.length!==Ka.length)throw Error("if indices is specified, traces.length must equal indices.length");}function l(La,Ka,ya,Aa,Ja){var Ta=ja.isPlainObject(Aa);if(!Array.isArray(La.data))throw Error("gd.data must be an array");
if(!ja.isPlainObject(Ka))throw Error("update must be a key:value object");if("undefined"===typeof ya)throw Error("indices must be an integer or array of integers");g(La,ya,"indices");for(var $a in Ka){if(!Array.isArray(Ka[$a])||Ka[$a].length!==ya.length)throw Error("attribute "+$a+" must be an array of length equal to indices array length");if(Ta&&!($a in Aa&&Array.isArray(Aa[$a])&&Aa[$a].length===Ka[$a].length))throw Error("when maxPoints is set as a key:value object it must contain a 1:1 corrispondence with the keys and number of traces in the update object");
}Ta=ya;$a=ja.isPlainObject(Aa);ya=[];Array.isArray(Ta)||(Ta=[Ta]);Ta=a(Ta,La.data.length-1);for(var ab in Ka)for(var Db=0;Db<Ta.length;Db++){var Nb=La.data[Ta[Db]];var ec=ma(Nb,ab);Nb=ec.get();var ob=Ka[ab][Db];if(!ja.isArrayOrTypedArray(ob))throw Error("attribute: "+ab+" index: "+Db+" must be an array");if(!ja.isArrayOrTypedArray(Nb))throw Error("cannot extend missing or non-array attribute: "+ab);if(Nb.constructor!==ob.constructor)throw Error("cannot extend array with an array of a different type: "+
ab);var Cb=$a?Aa[ab][Db]:Aa;W(Cb)||(Cb=-1);ya.push({prop:ec,target:Nb,insert:ob,maxp:Math.floor(Cb)})}La={};Ka={};for(Aa=0;Aa<ya.length;Aa++)ab=ya[Aa].prop,Ta=Ja(ya[Aa].target,ya[Aa].insert,ya[Aa].maxp),ab.set(Ta[0]),Array.isArray(La[ab.astr])||(La[ab.astr]=[]),La[ab.astr].push(Ta[1]),Array.isArray(Ka[ab.astr])||(Ka[ab.astr]=[]),Ka[ab.astr].push(ya[Aa].target.length);return{update:La,maxPoints:Ka}}function c(La,Ka){var ya=new La.constructor(La.length+Ka.length);ya.set(La);ya.set(Ka,La.length);return ya}
function d(La,Ka,ya,Aa){La=ja.getGraphDiv(La);var Ja=l(La,Ka,ya,Aa,function($a,ab,Db){if(ja.isTypedArray($a))if(0>Db){var Nb=new $a.constructor(0);$a=c($a,ab);if(0>Db)var ec=$a;else ec=Nb,Nb=$a}else if(ec=new $a.constructor(Db),Nb=new $a.constructor($a.length+ab.length-Db),Db===ab.length)ec.set(ab),Nb.set($a);else if(Db<ab.length)Db=ab.length-Db,ec.set(ab.subarray(Db)),Nb.set($a),Nb.set(ab.subarray(0,Db),$a.length);else{Db-=ab.length;var ob=$a.length-Db;ec.set($a.subarray(ob));ec.set(ab,Db);Nb.set($a.subarray(0,
ob))}else ec=$a.concat(ab),Nb=0<=Db&&Db<ec.length?ec.splice(0,ec.length-Db):[];return[ec,Nb]}),Ta=G.redraw(La);ra.add(La,G.prependTraces,[La,Ja.update,ya,Ja.maxPoints],d,arguments);return Ta}function e(La,Ka,ya,Aa){La=ja.getGraphDiv(La);var Ja=l(La,Ka,ya,Aa,function($a,ab,Db){if(ja.isTypedArray($a))if(0>=Db){var Nb=new $a.constructor(0);$a=c(ab,$a);if(0>Db)var ec=$a;else ec=Nb,Nb=$a}else ec=new $a.constructor(Db),Nb=new $a.constructor($a.length+ab.length-Db),Db===ab.length?(ec.set(ab),Nb.set($a)):
Db<ab.length?(Db=ab.length-Db,ec.set(ab.subarray(0,Db)),Nb.set(ab.subarray(Db)),Nb.set($a,Db)):(Db-=ab.length,ec.set(ab),ec.set($a.subarray(0,Db),ab.length),Nb.set($a.subarray(Db)));else ec=ab.concat($a),Nb=0<=Db&&Db<ec.length?ec.splice(Db,ec.length):[];return[ec,Nb]}),Ta=G.redraw(La);ra.add(La,G.extendTraces,[La,Ja.update,ya,Ja.maxPoints],e,arguments);return Ta}function f(La,Ka,ya){La=ja.getGraphDiv(La);var Aa=[],Ja=G.deleteTraces,Ta=[La,Aa],$a=[La,Ka],ab;r(La,Ka,ya);Array.isArray(Ka)||(Ka=[Ka]);
Ka=Ka.map(function(Db){return ja.extendFlat({},Db)});bb.cleanData(Ka);for(ab=0;ab<Ka.length;ab++)La.data.push(Ka[ab]);for(ab=0;ab<Ka.length;ab++)Aa.push(-Ka.length+ab);if("undefined"===typeof ya)return Ka=G.redraw(La),ra.add(La,Ja,Ta,f,$a),Ka;Array.isArray(ya)||(ya=[ya]);try{h(La,Aa,ya)}catch(Db){throw La.data.splice(La.data.length-Ka.length,Ka.length),Db;}ra.startSequence(La);ra.add(La,Ja,Ta,f,$a);Ka=G.moveTraces(La,Aa,ya);ra.stopSequence(La);return Ka}function q(La,Ka){La=ja.getGraphDiv(La);var ya=
[],Aa=G.addTraces,Ja=[La,ya,Ka],Ta=[La,Ka],$a;if("undefined"===typeof Ka)throw Error("indices must be an integer or array of integers.");Array.isArray(Ka)||(Ka=[Ka]);g(La,Ka,"indices");Ka=a(Ka,La.data.length-1);Ka.sort(ja.sorterDes);for($a=0;$a<Ka.length;$a+=1){var ab=La.data.splice(Ka[$a],1)[0];ya.push(ab)}Ka=G.redraw(La);ra.add(La,Aa,Ja,q,Ta);return Ka}function t(La,Ka,ya){La=ja.getGraphDiv(La);var Aa=[],Ja=[],Ta=[La,ya,Ka],$a=[La,Ka,ya],ab;h(La,Ka,ya);Ka=Array.isArray(Ka)?Ka:[Ka];if("undefined"===
typeof ya)for(ya=[],ab=0;ab<Ka.length;ab++)ya.push(-Ka.length+ab);ya=Array.isArray(ya)?ya:[ya];Ka=a(Ka,La.data.length-1);ya=a(ya,La.data.length-1);for(ab=0;ab<La.data.length;ab++)-1===Ka.indexOf(ab)&&Aa.push(La.data[ab]);for(ab=0;ab<Ka.length;ab++)Ja.push({newIndex:ya[ab],trace:La.data[Ka[ab]]});Ja.sort(function(Db,Nb){return Db.newIndex-Nb.newIndex});for(ab=0;ab<Ja.length;ab+=1)Aa.splice(Ja[ab].newIndex,0,Ja[ab].trace);La.data=Aa;Ka=G.redraw(La);ra.add(La,t,Ta,t,$a);return Ka}function w(La,Ka,ya,
Aa){La=ja.getGraphDiv(La);bb.clearPromiseQueue(La);var Ja={};if("string"===typeof Ka)Ja[Ka]=ya;else if(ja.isPlainObject(Ka))Ja=ja.extendFlat({},Ka),void 0===Aa&&(Aa=ya);else return ja.warn("Restyle fail.",Ka,ya,Aa),Promise.reject();Object.keys(Ja).length&&(La.changed=!0);Ka=bb.coerceTraceIndices(La,Aa);var Ta=A(La,Ja,Ka);Ja=Ta.flags;Ja.calc&&(La.calcdata=void 0);Ja.clearAxisTypes&&bb.clearAxisTypes(La,Ka,{});Ka=[];Ja.fullReplot?Ka.push(G._doPlot):(Ka.push(la.previousPromises),la.supplyDefaults(La),
Ja.markerSize&&(la.doCalcdata(La),y(Ka)),Ja.style&&Ka.push(sb.doTraceStyle),Ja.colorbars&&Ka.push(sb.doColorBars),Ka.push(p));Ka.push(la.rehover,la.redrag);ra.add(La,w,[La,Ta.undoit,Ta.traces],w,[La,Ta.redoit,Ta.traces]);(Ja=ja.syncOrAsync(Ka,La))&&Ja.then||(Ja=Promise.resolve());return Ja.then(function(){La.emit("plotly_restyle",Ta.eventData);return La})}function x(La){return void 0===La?null:La}function z(La,Ka){return Ka?function(ya,Aa,Ja){var Ta=ma(ya,Aa),$a=Ta.set;Ta.set=function(ab){B((Ja||
"")+Aa,Ta.get(),ab,La);$a(ab)};return Ta}:ma}function B(La,Ka,ya,Aa){if(Array.isArray(Ka)||Array.isArray(ya)){var Ja=Array.isArray(Ka)?Ka:[];ya=Array.isArray(ya)?ya:[];Ka=Math.max(Ja.length,ya.length);for(var Ta=0;Ta<Ka;Ta++)B(La+"["+Ta+"]",Ja[Ta],ya[Ta],Aa)}else if(ja.isPlainObject(Ka)||ja.isPlainObject(ya))for(Ja in Ka=ja.isPlainObject(Ka)?Ka:{},ya=ja.isPlainObject(ya)?ya:{},Ta=ja.extendFlat({},Ka,ya),Ta)B(La+"."+Ja,Ka[Ja],ya[Ja],Aa);else void 0===Aa[La]&&(Aa[La]=x(Ka))}function A(La,Ka,ya){function Aa(){return ya.map(function(){})}
function Ja(Wb){Wb=ka.id2name(Wb);-1===Vb.indexOf(Wb)&&Vb.push(Wb)}function Ta(Wb){return"LAYOUT"+Wb+".autorange"}function $a(Wb){return"LAYOUT"+Wb+".range"}function ab(Wb){for(var yb=Wb;yb<Cb.length;yb++)if(Cb[yb]._input===Qb[Wb])return Cb[yb]}function Db(Wb,yb,ac){if(Array.isArray(Wb))Wb.forEach(function(tc){Db(tc,yb,ac)});else if(!(Wb in Ka||bb.hasParent(Ka,Wb))){if("LAYOUT"===Wb.substr(0,6))var Ub=Jc(La.layout,Wb.replace("LAYOUT",""));else{Ub=ya[ac];var lc=ob._tracePreGUI[ab(Ub)._fullInput.uid];
Ub=z(lc,yc)(Qb[Ub],Wb)}Wb in Hb||(Hb[Wb]=Aa());void 0===Hb[Wb][ac]&&(Hb[Wb][ac]=x(Ub.get()));void 0!==yb&&Ub.set(yb)}}function Nb(Wb){return function(yb){return Cb[yb][Wb]}}function ec(Wb){return function(yb,ac){return!1===yb?Cb[ya[ac]][Wb]:null}}var ob=La._fullLayout,Cb=La._fullData,Qb=La.data,yc=ob._guiEditing,Jc=z(ob._preGUI,yc),Ia=ja.extendDeepAll({},Ka),Na;D(Ka);var ib=hb.traceFlags(),Gb={},Hb={};for(fd in Ka){if(bb.hasParent(Ka,fd))throw Error("cannot set "+fd+" and a parent attribute simultaneously");
var $b=Ka[fd],uc;if("autobinx"===fd||"autobiny"===fd){var fd=fd.charAt(fd.length-1)+"bins";$b=Array.isArray($b)?$b.map(ec(fd)):!1===$b?ya.map(Nb(fd)):null}Gb[fd]=$b;if("LAYOUT"===fd.substr(0,6)){var fb=Jc(La.layout,fd.replace("LAYOUT",""));Hb[fd]=[x(fb.get())];fb.set(Array.isArray($b)?$b[0]:$b);ib.calc=!0}else{Hb[fd]=Aa();for(Na=0;Na<ya.length;Na++){var Pb=Qb[ya[Na]];var fc=ab(ya[Na]);fb=z(ob._tracePreGUI[fc._fullInput.uid],yc)(Pb,fd);var Fc=fb.get();var Pc=Array.isArray($b)?$b[Na%$b.length]:$b;if(void 0!==
Pc){var Uc=fb.parts[fb.parts.length-1],rb=(uc=fd.substr(0,fd.length-Uc.length-1))?uc+".":"",Jb=uc?ma(fc,uc).get():fc;if((uc=pa.getTraceValObject(fc,fb.parts))&&uc.impliedEdits&&null!==Pc)for(var sc in uc.impliedEdits)Db(ja.relativeAttr(fd,sc),uc.impliedEdits[sc],Na);else if("thicknessmode"!==Uc&&"lenmode"!==Uc||Fc===Pc||"fraction"!==Pc&&"pixels"!==Pc||!Jb)"type"!==fd||"pie"===Pc===("pie"===Fc)&&"funnelarea"===Pc===("funnelarea"===Fc)||(rb="x",Jb="y","bar"!==Pc&&"bar"!==Fc||"h"!==Pb.orientation||(rb=
"y",Jb="x"),ja.swapAttrs(Pb,["?","?src"],"labels",rb),ja.swapAttrs(Pb,["d?","?0"],"label",rb),ja.swapAttrs(Pb,["?","?src"],"values",Jb),"pie"===Fc||"funnelarea"===Fc?(ma(Pb,"marker.color").set(ma(Pb,"marker.colors").get()),ob._pielayer.selectAll("g.trace").remove()):wa.traceIs(Pb,"cartesian")&&ma(Pb,"marker.colors").set(ma(Pb,"marker.color").get()));else{var nc=ob._size,vc=Jb.orient;vc="top"===vc||"bottom"===vc;"thicknessmode"===Uc?(Uc=vc?nc.h:nc.w,Db(rb+"thickness",Jb.thickness*("fraction"===Pc?
1/Uc:Uc),Na)):(Uc=vc?nc.w:nc.h,Db(rb+"len",Jb.len*("fraction"===Pc?1/Uc:Uc),Na))}Hb[fd][Na]=x(Fc);if(-1!==["swapxy","swapxyaxes","orientation","orientationaxes"].indexOf(fd)){if("orientation"===fd){if(fb.set(Pc),Fc=Pb.x&&!Pb.y?"h":"v",(fb.get()||Fc)===fc.orientation)continue}else"orientationaxes"===fd&&(Pb.orientation={v:"h",h:"v"}[fc.orientation]);bb.swapXYData(Pb);ib.calc=ib.clearAxisTypes=!0}else-1!==la.dataArrayContainers.indexOf(fb.parts[0])?(bb.manageArrayContainers(fb,Pc,Hb),ib.calc=!0):(uc?
uc.arrayOk&&!wa.traceIs(fc,"regl")&&(ja.isArrayOrTypedArray(Pc)||ja.isArrayOrTypedArray(Fc))?ib.calc=!0:hb.update(ib,uc):ib.calc=!0,fb.set(Pc))}}-1!==["swapxyaxes","orientationaxes"].indexOf(fd)&&ka.swap(La,ya);"orientationaxes"===fd&&(Na=ma(La.layout,"hovermode"),$b=Na.get(),"x"===$b?Na.set("y"):"y"===$b?Na.set("x"):"x unified"===$b?Na.set("y unified"):"y unified"===$b&&Na.set("x unified"));if(-1!==["orientation","type"].indexOf(fd)){var Vb=[];for(Na=0;Na<ya.length;Na++)$b=Qb[ya[Na]],wa.traceIs($b,
"cartesian")&&(Ja($b.xaxis||"x"),Ja($b.yaxis||"y"));Db(Vb.map(Ta),!0,0);Db(Vb.map($a),[0,1],0)}}}if(ib.calc||ib.plot)ib.fullReplot=!0;return{flags:ib,undoit:Hb,redoit:Gb,traces:ya,eventData:ja.extendDeepNoArrays([],[Ia,ya])}}function D(La){function Ka(Db,Nb){La[Nb]=La[Db];delete La[Db]}var ya=ja.counterRegex("axis",".title",!1,!1),Aa=/colorbar\.title$/,Ja=Object.keys(La),Ta;for(Ta=0;Ta<Ja.length;Ta++){var $a=Ja[Ta];var ab=La[$a];"title"!==$a&&!ya.test($a)&&!Aa.test($a)||"string"!==typeof ab&&"number"!==
typeof ab?-1<$a.indexOf("titlefont")?Ka($a,$a.replace("titlefont","title.font")):-1<$a.indexOf("titleposition")?Ka($a,$a.replace("titleposition","title.position")):-1<$a.indexOf("titleside")?Ka($a,$a.replace("titleside","title.side")):-1<$a.indexOf("titleoffset")&&Ka($a,$a.replace("titleoffset","title.offset")):Ka($a,$a.replace("title","title.text"))}}function C(La,Ka,ya){La=ja.getGraphDiv(La);bb.clearPromiseQueue(La);var Aa={};if("string"===typeof Ka)Aa[Ka]=ya;else if(ja.isPlainObject(Ka))Aa=ja.extendFlat({},
Ka);else return ja.warn("Relayout fail.",Ka,ya),Promise.reject();Object.keys(Aa).length&&(La.changed=!0);var Ja=F(La,Aa);Ka=Ja.flags;Ka.calc&&(La.calcdata=void 0);ya=[la.previousPromises];Ka.layoutReplot?ya.push(sb.layoutReplot):Object.keys(Aa).length&&(v(La,Ka,Ja)||la.supplyDefaults(La),Ka.legend&&ya.push(sb.doLegend),Ka.layoutstyle&&ya.push(sb.layoutStyles),Ka.axrange&&y(ya,Ja.rangesAltered),Ka.ticks&&ya.push(sb.doTicksRelayout),Ka.modebar&&ya.push(sb.doModeBar),Ka.camera&&ya.push(sb.doCamera),
Ka.colorbars&&ya.push(sb.doColorBars),ya.push(p));ya.push(la.rehover,la.redrag);ra.add(La,C,[La,Ja.undoit],C,[La,Ja.redoit]);(Aa=ja.syncOrAsync(ya,La))&&Aa.then||(Aa=Promise.resolve(La));return Aa.then(function(){La.emit("plotly_relayout",Ja.eventData);return La})}function v(La,Ka,ya){var Aa=La._fullLayout;if(!Ka.axrange)return!1;for(var Ja in Ka)if("axrange"!==Ja&&Ka[Ja])return!1;for(var Ta in ya.rangesAltered)if(ya=ka.id2name(Ta),Ka=La.layout[ya],ya=Aa[ya],ya.autorange=Ka.autorange,Ka.range&&(ya.range=
Ka.range.slice()),ya.cleanRange(),ya._matchGroup)for(var $a in ya._matchGroup)$a!==Ta&&(Ka=Aa[ka.id2name($a)],Ka.autorange=ya.autorange,Ka.range=ya.range.slice(),Ka._input.range=ya.range.slice());return!0}function y(La,Ka){La.push(Ha,sb.doAutoRangeAndConstraints,Ka?function(ya){var Aa=[],Ja=!0,Ta;for(Ta in Ka){var $a=ka.getFromId(ya,Ta);Aa.push(Ta);-1!==($a.ticklabelposition||"").indexOf("inside")&&$a._anchorAxis&&Aa.push($a._anchorAxis._id);if($a._matchGroup)for(var ab in $a._matchGroup)Ka[ab]||
Aa.push(ab);$a.automargin&&(Ja=!1)}return ka.draw(ya,Aa,{skipTitle:Ja})}:function(ya){return ka.draw(ya,"redraw")},sb.drawData,sb.finalDraw)}function F(La,Ka){function ya(Uc,rb){if(Array.isArray(Uc))Uc.forEach(function(sc){ya(sc,rb)});else if(!(Uc in Ka||bb.hasParent(Ka,Uc))){var Jb=$a(Ja,Uc);Uc in yc||(yc[Uc]=x(Jb.get()));void 0!==rb&&Jb.set(rb)}}function Aa(Uc){Uc=ka.name2id(Uc.split(".")[0]);Jc[Uc]=1;return Uc}var Ja=La.layout,Ta=La._fullLayout,$a=z(Ta._preGUI,Ta._guiEditing),ab=Object.keys(Ka),
Db=ka.list(La),Nb=ja.extendDeepAll({},Ka),ec={},ob,Cb;D(Ka);ab=Object.keys(Ka);for(ob=0;ob<ab.length;ob++)if(0===ab[ob].indexOf("allaxes")){for(Cb=0;Cb<Db.length;Cb++){var Qb=Db[Cb]._id.substr(1);Qb=-1!==Qb.indexOf("scene")?Qb+".":"";Qb=ab[ob].replace("allaxes",Qb+Db[Cb]._name);Ka[Qb]||(Ka[Qb]=Ka[ab[ob]])}delete Ka[ab[ob]]}ab=hb.layoutFlags();Db={};var yc={},Jc={},Ia;for(Ia in Ka){if(bb.hasParent(Ka,Ia))throw Error("cannot set "+Ia+" and a parent attribute simultaneously");ob=$a(Ja,Ia);Cb=Ka[Ia];
for(Qb=ob.parts.length-1;0<Qb&&"string"!==typeof ob.parts[Qb];)Qb--;var Na=ob.parts[Qb],ib=ob.parts[Qb-1]+"."+Na,Gb=ob.parts.slice(0,Qb).join("."),Hb=ma(La.layout,Gb).get(),$b=ma(Ta,Gb).get(),uc=ob.get();if(void 0!==Cb){Db[Ia]=Cb;yc[Ia]="reverse"===Na?Cb:x(uc);if((Qb=pa.getLayoutValObject(Ta,ob.parts))&&Qb.impliedEdits&&null!==Cb)for(var fd in Qb.impliedEdits)ya(ja.relativeAttr(Ia,fd),Qb.impliedEdits[fd]);-1!==["width","height"].indexOf(Ia)?Cb?(ya("autosize",null),ib="height"===Ia?"width":"height",
ya(ib,Ta[ib])):Ta[Ia]=La._initialAutoSize[Ia]:"autosize"===Ia?(ya("width",Cb?null:Ta.width),ya("height",Cb?null:Ta.height)):ib.match(Ab)?(Aa(ib),ma(Ta,Gb+"._inputRange").set(null)):ib.match(tb)?(Aa(ib),ma(Ta,Gb+"._inputRange").set(null),ib=ma(Ta,Gb).get(),ib._inputDomain&&(ib._input.domain=ib._inputDomain.slice())):ib.match(vb)&&ma(Ta,Gb+"._inputDomain").set(null);if("type"===Na){var fb=Hb;ib="linear"===$b.type&&"log"===Cb;var Pb="log"===$b.type&&"linear"===Cb;ib||Pb?(fb&&fb.range?$b.autorange?ib&&
(fb.range=fb.range[1]>fb.range[0]?[1,2]:[2,1]):(Pb=fb.range[0],fb=fb.range[1],ib?(0>=Pb&&0>=fb&&ya(Gb+".autorange",!0),0>=Pb?Pb=fb/1E6:0>=fb&&(fb=Pb/1E6),ya(Gb+".range[0]",Math.log(Pb)/Math.LN10),ya(Gb+".range[1]",Math.log(fb)/Math.LN10)):(ya(Gb+".range[0]",Math.pow(10,Pb)),ya(Gb+".range[1]",Math.pow(10,fb)))):ya(Gb+".autorange",!0),Array.isArray(Ta._subplots.polar)&&Ta._subplots.polar.length&&Ta[ob.parts[0]]&&"radialaxis"===ob.parts[1]&&delete Ta[ob.parts[0]]._subplot.viewInitial["radialaxis.range"],
wa.getComponentMethod("annotations","convertCoords")(La,$b,Cb,ya),wa.getComponentMethod("images","convertCoords")(La,$b,Cb,ya)):(ya(Gb+".autorange",!0),ya(Gb+".range",null));ma(Ta,Gb+"._inputRange").set(null)}else Na.match(ub)&&(ib=ma(Ta,Ia).get(),(fb=(Cb||{}).type)&&"-"!==fb||(fb="linear"),wa.getComponentMethod("annotations","convertCoords")(La,ib,fb,ya),wa.getComponentMethod("images","convertCoords")(La,ib,fb,ya));if(ib=Za.containerArrayMatch(Ia)){var fc=ib.array;ob=ib.index;Na=ib.property;Qb=Qb||
{editType:"calc"};""!==ob&&""===Na&&(Za.isAddVal(Cb)?yc[Ia]=null:Za.isRemoveVal(Cb)?yc[Ia]=(ma(Ja,fc).get()||[])[ob]:ja.warn("unrecognized full object value",Ka));hb.update(ab,Qb);ec[fc]||(ec[fc]={});(Qb=ec[fc][ob])||(Qb=ec[fc][ob]={});Qb[Na]=Cb;delete Ka[Ia]}else"reverse"===Na?(Hb.range?Hb.range.reverse():(ya(Gb+".autorange",!0),Hb.range=[1,0]),$b.autorange?ab.calc=!0:ab.plot=!0):(Ta._has("scatter-like")&&Ta._has("regl")&&"dragmode"===Ia&&("lasso"===Cb||"select"===Cb)&&"lasso"!==uc&&"select"!==uc?
ab.plot=!0:Ta._has("gl2d")?ab.plot=!0:Qb?hb.update(ab,Qb):ab.calc=!0,ob.set(Cb))}}for(fc in ec)Za.applyContainerArrayChanges(La,$a(Ja,fc),ec[fc],ab,$a)||(ab.plot=!0);for(var Fc in Jc)if(Ta=(fb=ka.getFromId(La,Fc))&&fb._constraintGroup){ab.calc=!0;for(var Pc in Ta)Jc[Pc]||(ka.getFromId(La,Pc)._constraintShrinkable=!0)}if(J(La)||Ka.height||Ka.width)ab.plot=!0;if(ab.plot||ab.calc)ab.layoutReplot=!0;return{flags:ab,rangesAltered:Jc,undoit:yc,redoit:Db,eventData:Nb}}function J(La){var Ka=La._fullLayout,
ya=Ka.width,Aa=Ka.height;La.layout.autosize&&la.plotAutoSize(La,La.layout,Ka);return Ka.width!==ya||Ka.height!==Aa}function K(La,Ka,ya,Aa){La=ja.getGraphDiv(La);bb.clearPromiseQueue(La);ja.isPlainObject(Ka)||(Ka={});ja.isPlainObject(ya)||(ya={});Object.keys(Ka).length&&(La.changed=!0);Object.keys(ya).length&&(La.changed=!0);Aa=bb.coerceTraceIndices(La,Aa);var Ja=A(La,ja.extendFlat({},Ka),Aa);Ka=Ja.flags;var Ta=F(La,ja.extendFlat({},ya)),$a=Ta.flags;if(Ka.calc||$a.calc)La.calcdata=void 0;Ka.clearAxisTypes&&
bb.clearAxisTypes(La,Aa,ya);ya=[];$a.layoutReplot?ya.push(sb.layoutReplot):Ka.fullReplot?ya.push(G._doPlot):(ya.push(la.previousPromises),v(La,$a,Ta)||la.supplyDefaults(La),Ka.style&&ya.push(sb.doTraceStyle),(Ka.colorbars||$a.colorbars)&&ya.push(sb.doColorBars),$a.legend&&ya.push(sb.doLegend),$a.layoutstyle&&ya.push(sb.layoutStyles),$a.axrange&&y(ya,Ta.rangesAltered),$a.ticks&&ya.push(sb.doTicksRelayout),$a.modebar&&ya.push(sb.doModeBar),$a.camera&&ya.push(sb.doCamera),ya.push(p));ya.push(la.rehover,
la.redrag);ra.add(La,K,[La,Ja.undoit,Ta.undoit,Ja.traces],K,[La,Ja.redoit,Ta.redoit,Ja.traces]);(ya=ja.syncOrAsync(ya,La))&&ya.then||(ya=Promise.resolve(La));return ya.then(function(){La.emit("plotly_update",{data:Ja.eventData,layout:Ta.eventData});return La})}function M(La){return function(Ka){Ka._fullLayout._guiEditing=!0;var ya=La.apply(null,arguments);Ka._fullLayout._guiEditing=!1;return ya}}function H(La,Ka){for(var ya=0;ya<Ka.length;ya++){var Aa=Ka[ya],Ja=La.match(Aa.pattern);if(Ja)return{head:Ja[1],
attr:Aa.attr}}}function O(La,Ka){var ya=ma(Ka,La).get();if(void 0!==ya)return ya;La=La.split(".");for(La.pop();1<La.length;)if(La.pop(),ya=ma(Ka,La.join(".")+".uirevision").get(),void 0!==ya)return ya;return Ka.uirevision}function I(La,Ka){var ya=ja.isPlainObject(La),Aa=Array.isArray(La);return ya||Aa?(ya&&ja.isPlainObject(Ka)||Aa&&Array.isArray(Ka))&&JSON.stringify(La)===JSON.stringify(Ka):La===Ka}function L(La,Ka,ya,Aa){var Ja=Aa._preGUI,Ta,$a,ab,Db=[],Nb={};for(Ta in Ja){if($a=H(Ta,qb)){if($a=
$a.attr||$a.head+".uirevision",($a=(ab=ma(Aa,$a).get())&&O($a,Ka))&&$a===ab){ab=Ja[Ta];null===ab&&(ab=void 0);$a=ma(Ka,Ta);var ec=$a.get();if(I(ec,ab)){void 0===ec&&"autorange"===Ta.substr(Ta.length-9)&&Db.push(Ta.substr(0,Ta.length-10));$a.set(x(ma(Aa,Ta).get()));continue}}}else ja.warn("unrecognized GUI edit: "+Ta);delete Ja[Ta];"range["===Ta.substr(Ta.length-8,6)&&(Nb[Ta.substr(0,Ta.length-9)]=1)}for(Ja=0;Ja<Db.length;Ja++)ab=Db[Ja],Nb[ab]&&(ab=ma(Ka,ab).get())&&delete ab.autorange;Db=Aa._tracePreGUI;
for(var ob in Db)for(Ta in Nb=Db[ob],Ja=null,Nb){if(!Ja){a:{for(Ja=0;Ja<ya.length;Ja++)if(ya[Ja]._fullInput.uid===ob)break a;Ja=-1}if(0>Ja){delete Db[ob];break}var Cb=ya[Ja]._fullInput;a:{Ja=Cb.index;for(ab=0;ab<La.length;ab++)if(La[ab].uid===ob){Ja=ab;break a}Ja=!La[Ja]||La[Ja].uid?-1:Ja}if(0>Ja){delete Db[ob];break}Ja=La[Ja]}if($a=H(Ta,zb)){if($a.attr?$a=(ab=ma(Aa,$a.attr).get())&&O($a.attr,Ka):(ab=Cb.uirevision,$a=Ja.uirevision,void 0===$a&&($a=Ka.uirevision)),$a&&$a===ab&&(ab=Nb[Ta],null===ab&&
(ab=void 0),$a=ma(Ja,Ta),ec=$a.get(),I(ec,ab))){$a.set(x(ma(Cb,Ta).get()));continue}}else ja.warn("unrecognized GUI edit: "+Ta+" in trace uid "+ob);delete Nb[Ta]}}function Q(La,Ka,ya,Aa,Ja,Ta){var $a=Ka.length===ya.length;if(!Ja&&!$a)return{fullReplot:!0,calc:!0};var ab=hb.traceFlags();ab.arrays={};ab.nChanges=0;ab.nChangesAnim=0;Aa={getValObject:function(Nb){Nb=pa.getTraceValObject(Db,Nb);!Db._module.animatable&&Nb.anim&&(Nb.anim=!1);return Nb},flags:ab,immutable:Aa,transition:Ja,newDataRevision:Ta,
gd:La};Ta={};for(La=0;La<Ka.length;La++)if(ya[La]){var Db=ya[La]._fullInput;la.hasMakesDataTransform(Db)&&(Db=ya[La]);Ta[Db.uid]||(Ta[Db.uid]=1,ba(Ka[La]._fullInput,Db,[],Aa))}if(ab.calc||ab.plot)ab.fullReplot=!0;Ja&&ab.nChanges&&ab.nChangesAnim&&(ab.anim=ab.nChanges===ab.nChangesAnim&&$a?"all":"some");return ab}function Z(La,Ka,ya,Aa,Ja){var Ta=hb.layoutFlags();Ta.arrays={};Ta.rangesAltered={};Ta.nChanges=0;Ta.nChangesAnim=0;ba(Ka,ya,[],{getValObject:function($a){return pa.getLayoutValObject(ya,
$a)},flags:Ta,immutable:Aa,transition:Ja,gd:La});if(Ta.plot||Ta.calc)Ta.layoutReplot=!0;Ja&&Ta.nChanges&&Ta.nChangesAnim&&(Ta.anim=Ta.nChanges===Ta.nChangesAnim?"all":"some");return Ta}function ba(La,Ka,ya,Aa){function Ja(){var uc=Ta.editType;if(ec&&-1!==uc.indexOf("arraydraw"))ja.pushUnique(Db.arrays[ec],ob);else{hb.update(Db,Ta);"none"!==uc&&Db.nChanges++;Aa.transition&&Ta.anim&&Db.nChangesAnim++;if(Ab.test(Jc)||tb.test(Jc))Db.rangesAltered[ya[0]]=1;vb.test(Jc)&&ma(Ka,"_inputDomain").set(null);
"datarevision"===$a&&(Db.newDataRevision=1)}}var Ta,$a,ab=Aa.getValObject,Db=Aa.flags,Nb=Aa.immutable,ec=Aa.inArray,ob=Aa.arrayIndex;for($a in La){if(Db.calc&&!Aa.transition)return;var Cb=La[$a],Qb=Ka[$a],yc=ya.concat($a);var Jc=yc.join(".");if("_"!==$a.charAt(0)&&"function"!==typeof Cb&&Cb!==Qb){if(("tick0"===$a||"dtick"===$a)&&"geo"!==ya[0]){var Ia=Ka.tickmode;if("auto"===Ia||"array"===Ia||!Ia)continue}if(!("range"===$a&&Ka.autorange||("zmin"===$a||"zmax"===$a)&&"contourcarpet"===Ka.type||!(Ta=
ab(yc))||Ta._compareAsJSON&&JSON.stringify(Cb)===JSON.stringify(Qb))){Ia=Ta.valType;var Na="data_array"===Ta.valType||Ta.arrayOk,ib=Array.isArray(Cb),Gb=Array.isArray(Qb);if(ib&&Gb){var Hb="_input_"+$a,$b=La[Hb];Hb=Ka[Hb];if(Array.isArray($b)&&$b===Hb)continue}if(void 0===Qb)Na&&ib?Db.calc=!0:Ja();else if(Ta._isLinkedToArray){Na=[];ib=!1;ec||(Db.arrays[$a]=Na);Gb=Math.min(Cb.length,Qb.length);$b=Math.max(Cb.length,Qb.length);if(Gb!==$b)if("arraydraw"===Ta.editType)ib=!0;else{Ja();continue}for(Ia=
0;Ia<Gb;Ia++)ba(Cb[Ia],Qb[Ia],yc.concat(Ia),ja.extendFlat({inArray:$a,arrayIndex:Ia},Aa));if(ib)for(Ia=Gb;Ia<$b;Ia++)Na.push(Ia)}else!Ia&&ja.isPlainObject(Cb)?ba(Cb,Qb,yc,Aa):Na?ib&&Gb?(Nb&&(Db.calc=!0),(Nb||Aa.newDataRevision)&&Ja()):ib!==Gb?Db.calc=!0:Ja():ib&&Gb?(Cb.length!==Qb.length||String(Cb)!==String(Qb))&&Ja():Ja()}}}for($a in Ka)if(!($a in La||"_"===$a.charAt(0)||"function"===typeof Ka[$a]))if(Ta=ab(ya.concat($a)),("data_array"===Ta.valType||Ta.arrayOk)&&Array.isArray(Ka[$a])){Db.calc=!0;
break}else Ja()}function V(La,Ka){for(var ya in La)if("_"!==ya.charAt(0)){var Aa=La[ya],Ja=Ka[ya];if(Aa!==Ja)if(ja.isPlainObject(Aa)&&ja.isPlainObject(Ja)){if(V(Aa,Ja))return!0}else if(Array.isArray(Aa)&&Array.isArray(Ja)){if(Aa.length!==Ja.length)return!0;for(var Ta=0;Ta<Aa.length;Ta++)if(Aa[Ta]!==Ja[Ta])if(ja.isPlainObject(Aa[Ta])&&ja.isPlainObject(Ja[Ta])){if(V(Aa[Ta],Ja[Ta]))return!0}else return!0}else return!0}}function S(La){var Ka=La._fullLayout,ya=La.getBoundingClientRect();ja.equalDomRects(ya,
Ka._lastBBox)||(La=Ka._invTransform=ja.inverseTransformMatrix(ja.getFullTransformMatrix(La)),Ka._invScaleX=Math.sqrt(La[0][0]*La[0][0]+La[0][1]*La[0][1]+La[0][2]*La[0][2]),Ka._invScaleY=Math.sqrt(La[1][0]*La[1][0]+La[1][1]*La[1][1]+La[1][2]*La[1][2]),Ka._lastBBox=ya)}function T(La){var Ka=fa.select(La),ya=La._fullLayout;ya._calcInverseTransform=S;ya._calcInverseTransform(La);ya._container=Ka.selectAll(".plot-container").data([0]);ya._container.enter().insert("div",":first-child").classed("plot-container",
!0).classed("plotly",!0);ya._paperdiv=ya._container.selectAll(".svg-container").data([0]);ya._paperdiv.enter().append("div").classed("user-select-none",!0).classed("svg-container",!0).style("position","relative");ya._glcontainer=ya._paperdiv.selectAll(".gl-container").data([{}]);ya._glcontainer.enter().append("div").classed("gl-container",!0);ya._paperdiv.selectAll(".main-svg").remove();ya._paperdiv.select(".modebar-container").remove();ya._paper=ya._paperdiv.insert("svg",":first-child").classed("main-svg",
!0);ya._toppaper=ya._paperdiv.append("svg").classed("main-svg",!0);ya._modebardiv=ya._paperdiv.append("div");delete ya._modeBar;ya._hoverpaper=ya._paperdiv.append("svg").classed("main-svg",!0);if(!ya._uid){var Aa={};fa.selectAll("defs").each(function(){this.id&&(Aa[this.id.split("-")[1]]=1)});ya._uid=ja.randstr(Aa)}ya._paperdiv.selectAll(".main-svg").attr(za.svgAttrs);ya._defs=ya._paper.append("defs").attr("id","defs-"+ya._uid);ya._clips=ya._defs.append("g").classed("clips",!0);ya._topdefs=ya._toppaper.append("defs").attr("id",
"topdefs-"+ya._uid);ya._topclips=ya._topdefs.append("g").classed("clips",!0);ya._bgLayer=ya._paper.append("g").classed("bglayer",!0);ya._draggers=ya._paper.append("g").classed("draglayer",!0);Ka=ya._paper.append("g").classed("layer-below",!0);ya._imageLowerLayer=Ka.append("g").classed("imagelayer",!0);ya._shapeLowerLayer=Ka.append("g").classed("shapelayer",!0);ya._cartesianlayer=ya._paper.append("g").classed("cartesianlayer",!0);ya._polarlayer=ya._paper.append("g").classed("polarlayer",!0);ya._ternarylayer=
ya._paper.append("g").classed("ternarylayer",!0);ya._geolayer=ya._paper.append("g").classed("geolayer",!0);ya._funnelarealayer=ya._paper.append("g").classed("funnelarealayer",!0);ya._pielayer=ya._paper.append("g").classed("pielayer",!0);ya._iciclelayer=ya._paper.append("g").classed("iciclelayer",!0);ya._treemaplayer=ya._paper.append("g").classed("treemaplayer",!0);ya._sunburstlayer=ya._paper.append("g").classed("sunburstlayer",!0);ya._indicatorlayer=ya._toppaper.append("g").classed("indicatorlayer",
!0);ya._glimages=ya._paper.append("g").classed("glimages",!0);Ka=ya._toppaper.append("g").classed("layer-above",!0);ya._imageUpperLayer=Ka.append("g").classed("imagelayer",!0);ya._shapeUpperLayer=Ka.append("g").classed("shapelayer",!0);ya._infolayer=ya._toppaper.append("g").classed("infolayer",!0);ya._menulayer=ya._toppaper.append("g").classed("menulayer",!0);ya._zoomlayer=ya._toppaper.append("g").classed("zoomlayer",!0);ya._hoverlayer=ya._hoverpaper.append("g").classed("hoverlayer",!0);ya._modebardiv.classed("modebar-container",
!0).style("position","absolute").style("top","0px").style("right","0px");La.emit("plotly_framework")}var fa=b("@plotly/d3"),W=b("fast-isnumeric"),aa=b("has-hover"),ja=b("../lib"),ma=ja.nestedProperty,ia=b("../lib/events"),ra=b("../lib/queue"),wa=b("../registry"),pa=b("./plot_schema"),la=b("../plots/plots"),ka=b("../plots/cartesian/axes"),na=b("../components/drawing"),oa=b("../components/color"),sa=b("../plots/cartesian/graph_interact").initInteractions,za=b("../constants/xmlns_namespaces"),Ha=b("../plots/cartesian/select").clearSelect,
Wa=b("./plot_config").dfltConfig,Za=b("./manage_arrays"),bb=b("./helpers"),sb=b("./subroutines"),hb=b("./edit_types"),ub=b("../plots/cartesian/constants").AX_NAME_PATTERN,pb=0,Ab=/^[xyz]axis[0-9]*\.range(\[[0|1]\])?$/,tb=/^[xyz]axis[0-9]*\.autorange$/,vb=/^[xyz]axis[0-9]*\.domain(\[[0|1]\])?$/,qb=[{pattern:/^hiddenlabels/,attr:"legend.uirevision"},{pattern:/^((x|y)axis\d*)\.((auto)?range|title\.text)/},{pattern:/axis\d*\.showspikes$/,attr:"modebar.uirevision"},{pattern:/(hover|drag)mode$/,attr:"modebar.uirevision"},
{pattern:/^(scene\d*)\.camera/},{pattern:/^(geo\d*)\.(projection|center|fitbounds)/},{pattern:/^(ternary\d*\.[abc]axis)\.(min|title\.text)$/},{pattern:/^(polar\d*\.radialaxis)\.((auto)?range|angle|title\.text)/},{pattern:/^(polar\d*\.angularaxis)\.rotation/},{pattern:/^(mapbox\d*)\.(center|zoom|bearing|pitch)/},{pattern:/^legend\.(x|y)$/,attr:"editrevision"},{pattern:/^(shapes|annotations)/,attr:"editrevision"},{pattern:/^title\.text$/,attr:"editrevision"}],zb=[{pattern:/^selectedpoints$/,attr:"selectionrevision"},
{pattern:/(^|value\.)visible$/,attr:"legend.uirevision"},{pattern:/^dimensions\[\d+\]\.constraintrange/},{pattern:/^node\.(x|y|groups)/},{pattern:/^level$/},{pattern:/(^|value\.)name$/},{pattern:/colorbar\.title\.text$/},{pattern:/colorbar\.(x|y)$/,attr:"editrevision"}];G.animate=function(La,Ka,ya){function Aa(ab,Db){var Nb=0;return function(){if(ab&&++Nb===Db)return ab()}}La=ja.getGraphDiv(La);if(!ja.isPlotDiv(La))throw Error("This element is not a Plotly plot: "+La+". It's likely that you've failed to create a plot before animating it. For more details, see https://plotly.com/javascript/animations/");
var Ja=La._transitionData;Ja._frameQueue||(Ja._frameQueue=[]);ya=la.supplyAnimationDefaults(ya);var Ta=ya.transition,$a=ya.frame;void 0===Ja._frameWaitingCnt&&(Ja._frameWaitingCnt=0);return new Promise(function(ab,Db){function Nb(){if(0!==Ja._frameQueue.length){for(;Ja._frameQueue.length;){var Hb=Ja._frameQueue.pop();if(Hb.onInterrupt)Hb.onInterrupt()}La.emit("plotly_animationinterrupted",[])}}function ec(Hb){if(0!==Hb.length){for(var $b=0;$b<Hb.length;$b++){var uc="byname"===Hb[$b].type?la.computeFrame(La,
Hb[$b].name):Hb[$b].data;var fd=$b;fd=Array.isArray($a)?fd>=$a.length?$a[0]:$a[fd]:$a;var fb=$b;fb=Array.isArray(Ta)?fb>=Ta.length?Ta[0]:Ta[fb]:Ta;fb.duration=Math.min(fb.duration,fd.duration);uc={frame:uc,name:Hb[$b].name,frameOpts:fd,transitionOpts:fb};$b===Hb.length-1&&(uc.onComplete=Aa(ab,2),uc.onInterrupt=Db);Ja._frameQueue.push(uc)}"immediate"===ya.mode&&(Ja._lastFrameAt=-Infinity);Ja._animationRaf||Cb()}}function ob(){if(Ja._currentFrame&&Ja._currentFrame.onComplete)Ja._currentFrame.onComplete();
var Hb=Ja._currentFrame=Ja._frameQueue.shift();if(Hb){var $b=Hb.name?Hb.name.toString():null;La._fullLayout._currentFrame=$b;Ja._lastFrameAt=Date.now();Ja._timeToNext=Hb.frameOpts.duration;la.transition(La,Hb.frame.data,Hb.frame.layout,bb.coerceTraceIndices(La,Hb.frame.traces),Hb.frameOpts,Hb.transitionOpts).then(function(){if(Hb.onComplete)Hb.onComplete()});La.emit("plotly_animatingframe",{name:$b,frame:Hb.frame,animation:{frame:Hb.frameOpts,transition:Hb.transitionOpts}})}else La.emit("plotly_animated"),
window.cancelAnimationFrame(Ja._animationRaf),Ja._animationRaf=null}function Cb(){La.emit("plotly_animating");Ja._lastFrameAt=-Infinity;Ja._timeToNext=0;Ja._runningTransitions=0;Ja._currentFrame=null;var Hb=function(){Ja._animationRaf=window.requestAnimationFrame(Hb);Date.now()-Ja._lastFrameAt>Ja._timeToNext&&ob()};Hb()}function Qb(Hb){Array.isArray(Ta)?Hb.transitionOpts=yc>=Ta.length?Ta[yc]:Ta[0]:Hb.transitionOpts=Ta;yc++;return Hb}var yc=0,Jc,Ia=[],Na=void 0===Ka||null===Ka;var ib=Array.isArray(Ka);
if(!Na&&!ib&&ja.isPlainObject(Ka))Ia.push({type:"object",data:Qb(ja.extendFlat({},Ka))});else if(Na||-1!==["string","number"].indexOf(typeof Ka))for(ib=0;ib<Ja._frames.length;ib++)(Jc=Ja._frames[ib])&&(Na||String(Jc.group)===String(Ka))&&Ia.push({type:"byname",name:String(Jc.name),data:Qb({name:Jc.name})});else if(ib)for(ib=0;ib<Ka.length;ib++)Jc=Ka[ib],-1!==["number","string"].indexOf(typeof Jc)?(Jc=String(Jc),Ia.push({type:"byname",name:Jc,data:Qb({name:Jc})})):ja.isPlainObject(Jc)&&Ia.push({type:"object",
data:Qb(ja.extendFlat({},Jc))});for(ib=0;ib<Ia.length;ib++)if(Jc=Ia[ib],"byname"===Jc.type&&!Ja._frameHash[Jc.data.name]){ja.warn('animate failure: frame not found: "'+Jc.data.name+'"');Db();return}-1!==["next","immediate"].indexOf(ya.mode)&&Nb();"reverse"===ya.direction&&Ia.reverse();var Gb=La._fullLayout._currentFrame;if(Gb&&ya.fromcurrent){Na=-1;for(ib=0;ib<Ia.length;ib++)if(Jc=Ia[ib],"byname"===Jc.type&&Jc.name===Gb){Na=ib;break}if(0<Na&&Na<Ia.length-1){Gb=[];for(ib=0;ib<Ia.length;ib++)Jc=Ia[ib],
("byname"!==Ia[ib].type||ib>Na)&&Gb.push(Jc);Ia=Gb}}0<Ia.length?ec(Ia):(La.emit("plotly_animated"),ab())})};G.addFrames=function(La,Ka,ya){La=ja.getGraphDiv(La);if(null===Ka||void 0===Ka)return Promise.resolve();if(!ja.isPlotDiv(La))throw Error("This element is not a Plotly plot: "+La+". It's likely that you've failed to create a plot before adding frames. For more details, see https://plotly.com/javascript/animations/");var Aa,Ja=La._transitionData._frames,Ta=La._transitionData._frameHash;if(!Array.isArray(Ka))throw Error("addFrames failure: frameList must be an Array of frame definitions"+
Ka);var $a=Ja.length+2*Ka.length;var ab=[],Db={};for(Aa=Ka.length-1;0<=Aa;Aa--)if(ja.isPlainObject(Ka[Aa])){var Nb=Ka[Aa].name;var ec=(Ta[Nb]||Db[Nb]||{}).name,ob=Ka[Aa].name,Cb=Ta[ec]||Db[ec];ec&&ob&&"number"===typeof ob&&Cb&&5>pb&&(pb++,ja.warn('addFrames: overwriting frame "'+(Ta[ec]||Db[ec]).name+'" with a frame whose name of type "number" also equates to "'+ec+'". This is valid but may potentially lead to unexpected behavior since all plotly.js frame names are stored internally as strings.'),
5===pb&&ja.warn("addFrames: This API call has yielded too many of these warnings. For the rest of this call, further warnings about numeric frame names will be suppressed."));Db[Nb]={name:Nb};ab.push({frame:la.supplyFrameDefaults(Ka[Aa]),index:ya&&void 0!==ya[Aa]&&null!==ya[Aa]?ya[Aa]:$a+Aa})}ab.sort(function(Qb,yc){return Qb.index>yc.index?-1:Qb.index<yc.index?1:0});Ka=[];ya=[];Db=Ja.length;for(Aa=ab.length-1;0<=Aa;Aa--){$a=ab[Aa].frame;"number"===typeof $a.name&&ja.warn("Warning: addFrames accepts frames with numeric names, but the numbers areimplicitly cast to strings");
if(!$a.name)for(;Ta[$a.name="frame "+La._transitionData._counter++];);if(Ta[$a.name]){for(Nb=0;Nb<Ja.length&&(Ja[Nb]||{}).name!==$a.name;Nb++);Ka.push({type:"replace",index:Nb,value:$a});ya.unshift({type:"replace",index:Nb,value:Ja[Nb]})}else Nb=Math.max(0,Math.min(ab[Aa].index,Db)),Ka.push({type:"insert",index:Nb,value:$a}),ya.unshift({type:"delete",index:Nb}),Db++}Ja=Aa=la.modifyFrames;Ta=[La,ya];ab=[La,Ka];ra&&ra.add(La,Aa,Ta,Ja,ab);return la.modifyFrames(La,Ka)};G.deleteFrames=function(La,Ka){La=
ja.getGraphDiv(La);if(!ja.isPlotDiv(La))throw Error("This element is not a Plotly plot: "+La);var ya,Aa=La._transitionData._frames,Ja=[],Ta=[];if(!Ka)for(Ka=[],ya=0;ya<Aa.length;ya++)Ka.push(ya);Ka=Ka.slice();Ka.sort();for(ya=Ka.length-1;0<=ya;ya--){var $a=Ka[ya];Ja.push({type:"delete",index:$a});Ta.unshift({type:"insert",index:$a,value:Aa[$a]})}ya=Ka=la.modifyFrames;Ta=[La,Ta];$a=[La,Ja];ra&&ra.add(La,Ka,Ta,ya,$a);return la.modifyFrames(La,Ja)};G.addTraces=f;G.deleteTraces=q;G.extendTraces=d;G.moveTraces=
t;G.prependTraces=e;G.newPlot=function(La,Ka,ya,Aa){La=ja.getGraphDiv(La);la.cleanPlot([],{},La._fullData||[],La._fullLayout||{});la.purge(La);return G._doPlot(La,Ka,ya,Aa)};G._doPlot=function(La,Ka,ya,Aa){function Ja(){for(var Ia=Cb._basePlotModules,Na=0;Na<Ia.length;Na++)Ia[Na].drawFramework&&Ia[Na].drawFramework(La);!Cb._glcanvas&&Cb._has("gl")&&(Cb._glcanvas=Cb._glcontainer.selectAll(".gl-canvas").data([{key:"contextLayer",context:!0,pick:!1},{key:"focusLayer",context:!1,pick:!1},{key:"pickLayer",
context:!1,pick:!0}],function(ib){return ib.key}),Cb._glcanvas.enter().append("canvas").attr("class",function(ib){return"gl-canvas gl-canvas-"+ib.key.replace("Layer","")}).style({position:"absolute",top:0,left:0,overflow:"visible","pointer-events":"none"}));Ia=La._context.plotGlPixelRatio;if(Cb._glcanvas&&(Cb._glcanvas.attr("width",Cb.width*Ia).attr("height",Cb.height*Ia).style("width",Cb.width+"px").style("height",Cb.height+"px"),(Na=Cb._glcanvas.data()[0].regl)&&(Math.floor(Cb.width*Ia)!==Na._gl.drawingBufferWidth||
Math.floor(Cb.height*Ia)!==Na._gl.drawingBufferHeight)))if(Jc)ja.error("WebGL context buffer and canvas dimensions do not match due to browser/WebGL bug.");else return ja.log("WebGL context buffer and canvas dimensions do not match due to browser/WebGL bug. Clearing graph and plotting again."),la.cleanPlot([],{},La._fullData,Cb),la.supplyDefaults(La),Cb=La._fullLayout,la.doCalcdata(La),Jc++,Ja();"h"===Cb.modebar.orientation?Cb._modebardiv.style("height",null).style("width","100%"):Cb._modebardiv.style("width",
null).style("height",Cb.height+"px");return la.previousPromises(La)}function Ta(){la.clearAutoMarginIds(La);sb.drawMarginPushers(La);ka.allowAutoMargin(La);if(Cb._has("pie"))for(var Ia=La._fullData,Na=0;Na<Ia.length;Na++){var ib=Ia[Na];"pie"===ib.type&&ib.automargin&&la.allowAutoMargin(La,"pie."+ib.uid+".automargin")}la.doAutoMargin(La);return la.previousPromises(La)}function $a(){if(Qb)return ja.syncOrAsync([wa.getComponentMethod("shapes","calcAutorange"),wa.getComponentMethod("annotations","calcAutorange"),
ab],La);ab()}function ab(){La._transitioning||(sb.doAutoRangeAndConstraints(La),ob&&ka.saveRangeInitial(La),wa.getComponentMethod("rangeslider","calcAutorange")(La))}function Db(){return ka.draw(La,ob?"":"redraw")}La=ja.getGraphDiv(La);ia.init(La);if(ja.isPlainObject(Ka)){var Nb=Ka;Ka=Nb.data;ya=Nb.layout;Aa=Nb.config;var ec=Nb.frames}if(!1===ia.triggerHandler(La,"plotly_beforeplot",[Ka,ya,Aa]))return Promise.reject();Ka||ya||ja.isPlotDiv(La)||ja.warn("Calling _doPlot as if redrawing but this container doesn't yet have a plot.",
La);m(La,Aa);ya||(ya={});fa.select(La).classed("js-plotly-plot",!0);na.makeTester();Array.isArray(La._promises)||(La._promises=[]);var ob=0===(La.data||[]).length&&Array.isArray(Ka);Array.isArray(Ka)&&(bb.cleanData(Ka),ob?La.data=Ka:La.data.push.apply(La.data,Ka),La.empty=!1);if(!La.layout||ob)La.layout=bb.cleanLayout(ya);la.supplyDefaults(La);var Cb=La._fullLayout;Ka=Cb._has("cartesian");Cb._replotting=!0;if(ob||Cb._shouldCreateBgLayer)T(La),Cb._shouldCreateBgLayer&&delete Cb._shouldCreateBgLayer;
na.initGradients(La);na.initPatterns(La);ob&&ka.saveShowSpikeInitial(La);var Qb=!La.calcdata||La.calcdata.length!==(La._fullData||[]).length;Qb&&la.doCalcdata(La);for(ya=0;ya<La.calcdata.length;ya++)La.calcdata[ya][0].trace=La._fullData[ya];La._context.responsive?La._responsiveChartHandler||(La._responsiveChartHandler=function(){ja.isHidden(La)||la.resize(La)},window.addEventListener("resize",La._responsiveChartHandler)):ja.clearResponsive(La);var yc=ja.extendFlat({},Cb._size),Jc=0;ya=[la.previousPromises,
function(){if(ec)return G.addFrames(La,ec)},Ja,Ta,function(){if(la.didMarginChange(yc,Cb._size))return ja.syncOrAsync([Ta,sb.layoutStyles],La)}];Ka&&ya.push($a);ya.push(sb.layoutStyles);Ka&&ya.push(Db,function(Ia){Ia._fullLayout._insideTickLabelsAutorange&&C(Ia,Ia._fullLayout._insideTickLabelsAutorange).then(function(){Ia._fullLayout._insideTickLabelsAutorange=void 0})});ya.push(sb.drawData,sb.finalDraw,sa,la.addLinks,la.rehover,la.redrag,la.doAutoMargin,function(Ia){Ia._fullLayout._insideTickLabelsAutorange&&
ob&&ka.saveRangeInitial(Ia,!0)},la.previousPromises);(Ka=ja.syncOrAsync(ya,La))&&Ka.then||(Ka=Promise.resolve());return Ka.then(function(){p(La);return La})};G.purge=function(La){La=ja.getGraphDiv(La);var Ka=La._fullLayout||{};la.cleanPlot([],{},La._fullData||[],Ka);la.purge(La);ia.purge(La);Ka._container&&Ka._container.remove();delete La._context;return La};G.react=function(La,Ka,ya,Aa){function Ja(){return G.addFrames(La,Nb)}var Ta;La=ja.getGraphDiv(La);bb.clearPromiseQueue(La);var $a=La._fullData,
ab=La._fullLayout;if(ja.isPlotDiv(La)&&$a&&ab){if(ja.isPlainObject(Ka)){var Db=Ka;Ka=Db.data;ya=Db.layout;Aa=Db.config;var Nb=Db.frames}Db=!1;Aa&&(Db=ja.extendDeep({},La._context),La._context=void 0,m(La,Aa),Db=V(Db,La._context));La.data=Ka||[];bb.cleanData(La.data);La.layout=ya||{};bb.cleanLayout(La.layout);L(La.data,La.layout,$a,ab);la.supplyDefaults(La,{skipUpdateCalc:!0});var ec=La._fullData;Aa=La._fullLayout;var ob=void 0===Aa.datarevision,Cb=Aa.transition,Qb=Z(La,ab,Aa,ob,Cb),yc=Q(La,$a,ec,
ob,Cb,Qb.newDataRevision);J(La)&&(Qb.layoutReplot=!0);if(yc.calc||Qb.calc)for(La.calcdata=void 0,$a=Object.getOwnPropertyNames(Aa),ec=0;ec<$a.length;ec++)ob=$a[ec],Cb=ob.substring(0,5),("xaxis"===Cb||"yaxis"===Cb)&&(ob=Aa[ob]._emptyCategories)&&ob();else la.supplyDefaultsUpdateCalc(La.calcdata,ec);$a=[];Nb&&(La._transitionData={},la.createTransitionData(La),$a.push(Ja));if(Aa.transition&&!Db&&(yc.anim||Qb.anim))Qb.ticks&&$a.push(sb.doTicksRelayout),la.doCalcdata(La),sb.doAutoRangeAndConstraints(La),
$a.push(function(){return la.transitionFromReact(La,yc,Qb,ab)});else if(yc.fullReplot||Qb.layoutReplot||Db)La._fullLayout._skipDefaults=!0,$a.push(G._doPlot);else{for(Ta in Qb.arrays)if(Db=Qb.arrays[Ta],Db.length)if(Aa=wa.getComponentMethod(Ta,"drawOne"),Aa!==ja.noop)for(ec=0;ec<Db.length;ec++)Aa(La,Db[ec]);else{Db=wa.getComponentMethod(Ta,"draw");if(Db===ja.noop)throw Error("cannot draw components: "+Ta);Db(La)}$a.push(la.previousPromises);yc.style&&$a.push(sb.doTraceStyle);(yc.colorbars||Qb.colorbars)&&
$a.push(sb.doColorBars);Qb.legend&&$a.push(sb.doLegend);Qb.layoutstyle&&$a.push(sb.layoutStyles);Qb.axrange&&y($a);Qb.ticks&&$a.push(sb.doTicksRelayout);Qb.modebar&&$a.push(sb.doModeBar);Qb.camera&&$a.push(sb.doCamera);$a.push(p)}$a.push(la.rehover,la.redrag);(Ta=ja.syncOrAsync($a,La))&&Ta.then||(Ta=Promise.resolve(La))}else Ta=G.newPlot(La,Ka,ya,Aa);return Ta.then(function(){La.emit("plotly_react",{data:Ka,layout:ya});return La})};G.redraw=function(La){La=ja.getGraphDiv(La);if(!ja.isPlotDiv(La))throw Error("This element is not a Plotly plot: "+
La);bb.cleanData(La.data);bb.cleanLayout(La.layout);La.calcdata=void 0;return G._doPlot(La).then(function(){La.emit("plotly_redraw");return La})};G.relayout=C;G.restyle=w;G.setPlotConfig=function(La){return ja.extendFlat(Wa,La)};G.update=K;G._guiRelayout=M(C);G._guiRestyle=M(w);G._guiUpdate=M(K);G._storeDirectGUIEdit=function(La,Ka,ya){for(var Aa in ya){var Ja=ma(La,Aa);B(Aa,Ja.get(),ya[Aa],Ka)}}},{"../components/color":666,"../components/drawing":688,"../constants/xmlns_namespaces":780,"../lib":803,
"../lib/events":792,"../lib/queue":819,"../plots/cartesian/axes":854,"../plots/cartesian/constants":861,"../plots/cartesian/graph_interact":864,"../plots/cartesian/select":874,"../plots/plots":917,"../registry":931,"./edit_types":836,"./helpers":837,"./manage_arrays":839,"./plot_config":841,"./plot_schema":842,"./subroutines":844,"@plotly/d3":58,"fast-isnumeric":249,"has-hover":443}],841:[function(b,N,G){function p(n,k){for(var m in n){var a=n[m];a.valType?k[m]=a.dflt:(k[m]||(k[m]={}),p(a,k[m]))}}
b={staticPlot:{valType:"boolean",dflt:!1},plotlyServerURL:{valType:"string",dflt:""},editable:{valType:"boolean",dflt:!1},edits:{annotationPosition:{valType:"boolean",dflt:!1},annotationTail:{valType:"boolean",dflt:!1},annotationText:{valType:"boolean",dflt:!1},axisTitleText:{valType:"boolean",dflt:!1},colorbarPosition:{valType:"boolean",dflt:!1},colorbarTitleText:{valType:"boolean",dflt:!1},legendPosition:{valType:"boolean",dflt:!1},legendText:{valType:"boolean",dflt:!1},shapePosition:{valType:"boolean",
dflt:!1},titleText:{valType:"boolean",dflt:!1}},autosizable:{valType:"boolean",dflt:!1},responsive:{valType:"boolean",dflt:!1},fillFrame:{valType:"boolean",dflt:!1},frameMargins:{valType:"number",dflt:0,min:0,max:.5},scrollZoom:{valType:"flaglist",flags:["cartesian","gl3d","geo","mapbox"],extras:[!0,!1],dflt:"gl3d+geo+mapbox"},doubleClick:{valType:"enumerated",values:[!1,"reset","autosize","reset+autosize"],dflt:"reset+autosize"},doubleClickDelay:{valType:"number",dflt:300,min:0},showAxisDragHandles:{valType:"boolean",
dflt:!0},showAxisRangeEntryBoxes:{valType:"boolean",dflt:!0},showTips:{valType:"boolean",dflt:!0},showLink:{valType:"boolean",dflt:!1},linkText:{valType:"string",dflt:"Edit chart",noBlank:!0},sendData:{valType:"boolean",dflt:!0},showSources:{valType:"any",dflt:!1},displayModeBar:{valType:"enumerated",values:["hover",!0,!1],dflt:"hover"},showSendToCloud:{valType:"boolean",dflt:!1},showEditInChartStudio:{valType:"boolean",dflt:!1},modeBarButtonsToRemove:{valType:"any",dflt:[]},modeBarButtonsToAdd:{valType:"any",
dflt:[]},modeBarButtons:{valType:"any",dflt:!1},toImageButtonOptions:{valType:"any",dflt:{}},displaylogo:{valType:"boolean",dflt:!0},watermark:{valType:"boolean",dflt:!1},plotGlPixelRatio:{valType:"number",dflt:2,min:1,max:4},setBackground:{valType:"any",dflt:"transparent"},topojsonURL:{valType:"string",noBlank:!0,dflt:"https://cdn.plot.ly/"},mapboxAccessToken:{valType:"string",dflt:null},logging:{valType:"integer",min:0,max:2,dflt:1},notifyOnLogging:{valType:"integer",min:0,max:2,dflt:0},queueLength:{valType:"integer",
min:0,dflt:0},globalTransforms:{valType:"any",dflt:[]},locale:{valType:"string",dflt:"en-US"},locales:{valType:"any",dflt:{}}};G={};p(b,G);N.exports={configAttributes:b,dfltConfig:G}},{}],842:[function(b,N,G){function p(J,K){var M,H,O=J._basePlotModules;if(O){for(M=0;M<O.length;M++){var I=O[M];if(I.attrRegex&&I.attrRegex.test(K)){if(I.layoutAttrOverrides)return I.layoutAttrOverrides;if(!L&&I.layoutAttributes)var L=I.layoutAttributes}if((I=I.baseLayoutAttrOverrides)&&K in I)return I[K]}if(L)return L}if(O=
J._modules)for(M=0;M<O.length;M++)if((J=O[M].layoutAttributes)&&K in J)return J[K];for(H in f.componentsRegistry){I=f.componentsRegistry[H];if("colorscale"===I.name&&0===K.indexOf("coloraxis"))return I.layoutAttributes[K];if(!I.schema&&K===I.name)return I.layoutAttributes}return K in t?t[K]:!1}function n(J,K,M){if(!J)return!1;if(J._isLinkedToArray)if(k(K[M]))M++;else if(M<K.length)return!1;for(;M<K.length;M++){var H=J[K[M]];if(D(H))J=H;else break;if(M===K.length-1)break;if(J._isLinkedToArray){if(M++,
!k(K[M]))return!1}else if("info_array"===J.valType){M++;H=K[M];if(!k(H))return!1;var O=J.items;if(Array.isArray(O)){if(H>=O.length)return!1;if(2===J.dimensions){M++;if(K.length===M)break;J=K[M];if(!k(J))return!1;J=O[H][J]}else J=O[H]}else J=O}}return J}function k(J){return J===Math.round(J)&&0<=J}function m(J){var K=f.modules[J]._module;var M=K.basePlotModule;var H={type:null},O=A({},q),I=A({},K.attributes);G.crawl(I,function(L,Q,Z,ba,V){v(O,V).set(void 0);void 0===L&&v(I,V).set(void 0)});A(H,O);
f.traceIs(J,"noOpacity")&&delete H.opacity;f.traceIs(J,"showLegend")||(delete H.showlegend,delete H.legendgroup);f.traceIs(J,"noHover")&&(delete H.hoverinfo,delete H.hoverlabel);K.selectPoints||delete H.selectedpoints;A(H,I);M.attributes&&A(H,M.attributes);H.type=J;J={meta:K.meta||{},categories:K.categories||{},animatable:!!K.animatable,type:J,attributes:r(H)};K.layoutAttributes&&(M={},A(M,K.layoutAttributes),J.layoutAttributes=r(M));K.animatable||G.crawl(J,function(L){G.isValObject(L)&&"anim"in L&&
delete L.anim});return J}function a(){var J={},K;A(J,t);for(K in f.subplotsRegistry){var M=f.subplotsRegistry[K];if(M.layoutAttributes)if(Array.isArray(M.attr))for(var H=0;H<M.attr.length;H++)e(J,M,M.attr[H]);else e(J,M,"subplot"===M.attr?M.name:M.attr)}for(K in f.componentsRegistry)if(M=f.componentsRegistry[K],(H=M.schema)&&(H.subplots||H.layout)){if((M=H.subplots)&&M.xaxis&&!M.yaxis)for(var O in M.xaxis)delete J.yaxis[O]}else"colorscale"===M.name?A(J,M.layoutAttributes):M.layoutAttributes&&(H=M.layoutAttributes,
M=v(J,M.name),M.set(A(M.get()||{},H)));return{layoutAttributes:r(J)}}function g(J){var K=A({},f.transformsRegistry[J].attributes);Object.keys(f.componentsRegistry).forEach(function(M){var H=f.componentsRegistry[M];H.schema&&H.schema.transforms&&H.schema.transforms[J]&&Object.keys(H.schema.transforms[J]).forEach(function(O){var I=H.schema.transforms[J][O];O=v(K,O);O.set(A(O.get()||{},I))})});return{attributes:r(K)}}function h(){var J={frames:A({},w)};r(J);return J.frames}function r(J){l(J);c(J);d(J);
return J}function l(J){G.crawl(J,function(K,M,H){if(G.isValObject(K)){if(!0===K.arrayOk||"data_array"===K.valType)H[M+"src"]={valType:"string",editType:"none"}}else D(K)&&(K.role="object")})}function c(J){G.crawl(J,function(K,M,H){if(K){var O=K._isLinkedToArray;O&&(delete K._isLinkedToArray,H[M]={items:{}},H[M].items[O]=K,H[M].role="object")}})}function d(J){function K(M){for(var H in M)if(D(M[H]))K(M[H]);else if(Array.isArray(M[H]))for(var O=0;O<M[H].length;O++)K(M[H][O]);else M[H]instanceof RegExp&&
(M[H]=M[H].toString())}K(J)}function e(J,K,M){J=v(J,M);K=A({},K.layoutAttributes);K._isSubplotObj=!0;J.set(K)}var f=b("../registry");N=b("../lib");var q=b("../plots/attributes"),t=b("../plots/layout_attributes"),w=b("../plots/frame_attributes"),x=b("../plots/animation_attributes"),z=b("./plot_config").configAttributes,B=b("./edit_types"),A=N.extendDeepAll,D=N.isPlainObject,C=N.isArrayOrTypedArray,v=N.nestedProperty,y=N.valObjectMeta,F=["_isSubplotObj","_isLinkedToArray","_arrayAttrRegexps","_deprecated"];
G.IS_SUBPLOT_OBJ="_isSubplotObj";G.IS_LINKED_TO_ARRAY="_isLinkedToArray";G.DEPRECATED="_deprecated";G.UNDERSCORE_ATTRS=F;G.get=function(){var J={};f.allTypes.forEach(function(M){J[M]=m(M)});var K={};Object.keys(f.transformsRegistry).forEach(function(M){K[M]=g(M)});return{defs:{valObjects:y,metaKeys:F.concat(["description","role","editType","impliedEdits"]),editType:{traces:B.traces,layout:B.layout},impliedEdits:{}},traces:J,layout:a(),transforms:K,frames:h(),animation:r(x),config:r(z)}};G.crawl=function(J,
K,M,H){var O=M||0;H=H||"";Object.keys(J).forEach(function(I){var L=J[I];if(-1===F.indexOf(I)){var Q=(H?H+".":"")+I;K(L,I,J,O,Q);G.isValObject(L)||D(L)&&"impliedEdits"!==I&&G.crawl(L,K,O+1,Q)}})};G.isValObject=function(J){return J&&void 0!==J.valType};G.findArrayAttributes=function(J){function K(S,T,fa,W){O=O.slice(0,W).concat([T]);I=I.slice(0,W).concat([S&&S._isLinkedToArray]);!S||"data_array"!==S.valType&&!0!==S.arrayOk||"colorbar"===O[W-1]&&("ticktext"===T||"tickvals"===T)||M(L,0,"")}function M(S,
T,fa){S=S[O[T]];fa+=O[T];if(T===O.length-1)C(S)&&H.push(Q+fa);else if(I[T]){if(Array.isArray(S))for(var W=0;W<S.length;W++)D(S[W])&&M(S[W],T+1,fa+"["+W+"].")}else D(S)&&M(S,T+1,fa+".")}var H=[],O=[],I=[];var L=J;var Q="";G.crawl(q,K);J._module&&J._module.attributes&&G.crawl(J._module.attributes,K);if(J=J.transforms)for(var Z=0;Z<J.length;Z++){var ba=J[Z],V=ba._module;V&&(Q="transforms["+Z+"].",L=ba,G.crawl(V.attributes,K))}return H};G.getTraceValObject=function(J,K){var M=K[0],H=1;if("transforms"===
M){if(1===K.length)return q.transforms;M=J.transforms;if(!Array.isArray(M)||!M.length)return!1;H=K[1];if(!k(H)||H>=M.length)return!1;J=(J=(f.transformsRegistry[M[H].type]||{}).attributes)&&J[K[2]];H=3}else{var O=J._module;O||(O=(f.modules[J.type||q.type.dflt]||{})._module);if(!O)return!1;J=(J=O.attributes)&&J[M];J||(O=O.basePlotModule)&&O.attributes&&(J=O.attributes[M]);J||(J=q[M])}return n(J,K,H)};G.getLayoutValObject=function(J,K){J=p(J,K[0]);return n(J,K,1)}},{"../lib":803,"../plots/animation_attributes":848,
"../plots/attributes":850,"../plots/frame_attributes":884,"../plots/layout_attributes":908,"../registry":931,"./edit_types":836,"./plot_config":841}],843:[function(b,N,G){function p(a){"s"!==a.charAt(a.length-1)&&n.warn("bad argument to arrayDefaultKey: "+a);return a.substr(0,a.length-1)+"defaults"}var n=b("../lib"),k=b("../plots/attributes"),m={name:{valType:"string",editType:"none"},templateitemname:{valType:"string",editType:"calc"}};G.templatedArray=function(a,g){g._isLinkedToArray=a;g.name=m.name;
g.templateitemname=m.templateitemname;return g};G.traceTemplater=function(a){var g={},h;for(h in a){var r=a[h];Array.isArray(r)&&r.length&&(g[h]=0)}return{newTrace:function(l){h=n.coerce(l,{},k,"type");l={type:h,_template:null};if(h in g){r=a[h];var c=g[h]%r.length;g[h]++;l._template=r[c]}return l}}};G.newContainer=function(a,g,h){var r=a._template;h=r&&(r[g]||h&&r[h]);n.isPlainObject(h)||(h=null);return a[g]={_template:h}};G.arrayTemplater=function(a,g,h){var r=(a=a._template)&&a[p(g)],l=a&&a[g];
Array.isArray(l)&&l.length||(l=[]);var c={};return{newItem:function(d){var e={name:d.name,_input:d},f=e.templateitemname=d.templateitemname;if(!f||"string"!==typeof f)return e._template=r,e;for(var q=0;q<l.length;q++){var t=l[q];if(t.name===f)return c[f]=1,e._template=t,e}e[h]=d[h]||!1;e._template=!1;return e},defaultItems:function(){for(var d=[],e=0;e<l.length;e++){var f=l[e],q=f.name;if(q&&"string"===typeof q&&!c[q]){var t={_template:f,name:q,_input:{_templateitemname:q}};t.templateitemname=f.templateitemname;
d.push(t);c[q]=1}}return d}}};G.arrayDefaultKey=p;G.arrayEditor=function(a,g,h){function r(){t={};f&&(t[q]={},t[q].templateitemname=f)}function l(w,x){f?n.nestedProperty(t[q],w).set(x):t[q+"."+w]=x}function c(){var w=t;r();return w}var d=(n.nestedProperty(a,g).get()||[]).length,e=h._index,f=e>=d&&(h._input||{})._templateitemname;f&&(e=d);var q=g+"["+e+"]",t;r();return{modifyBase:function(w,x){t[w]=x},modifyItem:l,getUpdateObj:c,applyUpdate:function(w,x){w&&l(w,x);w=c();for(var z in w)n.nestedProperty(a,
z).set(w[z])}}}},{"../lib":803,"../plots/attributes":850}],844:[function(b,N,G){function p(A,D,C){for(var v=0;v<C.length;v++){var y=C[v][0],F=C[v][1];if(!(y[0]>=A[1]||y[1]<=A[0])&&F[0]<D[1]&&F[1]>D[0])return!0}return!1}function n(A){function D(wa,pa,la){var ka=wa._lw/2;return"x"===wa._id.charAt(0)?pa?"top"===la?pa._offset-H-ka:pa._offset+pa._length+H+ka:M.t+M.h*(1-(wa.position||0))+ka%1:pa?"right"===la?pa._offset+pa._length+H+ka:pa._offset-H-ka:M.l+M.w*(wa.position||0)+ka%1}function C(wa){return"M"+
ja+","+wa+"H"+ma}function v(wa){return"M"+W._offset+","+wa+"h"+W._length}function y(wa){return"M"+wa+","+ra+"V"+ia}function F(wa){return"M"+wa+","+aa._offset+"v"+aa._length}function J(wa,pa,la){if(!wa.showline||L!==wa._mainSubplot)return"";if(!wa._anchorAxis)return la(wa._mainLinePosition);la=pa(wa._mainLinePosition);wa.mirror&&(la+=pa(wa._mainMirrorPosition));return la}var K=A._fullLayout,M=K._size,H=M.p,O=t.list(A,"",!0),I,L;K._paperdiv.style({width:A._context.responsive&&K.autosize&&!A._context._hasZeroWidth&&
!A.layout.width?"100%":K.width+"px",height:A._context.responsive&&K.autosize&&!A._context._hasZeroHeight&&!A.layout.height?"100%":K.height+"px"}).selectAll(".main-svg").call(e.setSize,K.width,K.height);A._context.setBackground(A,K.paper_bgcolor);G.drawMainTitle(A);q.manage(A);if(!K._has("cartesian"))return r.previousPromises(A);for(I=0;I<O.length;I++){var Q=O[I];var Z=Q._anchorAxis;Q._linepositions={};Q._lw=e.crispRound(A,Q.linewidth,1);Q._mainLinePosition=D(Q,Z,Q.side);Q._mainMirrorPosition=Q.mirror&&
Z?D(Q,Z,w.OPPOSITE_SIDE[Q.side]):null}I=[];Z=[];var ba=[],V=1===d.opacity(K.paper_bgcolor)&&1===d.opacity(K.plot_bgcolor)&&K.paper_bgcolor===K.plot_bgcolor;for(L in K._plots)if(Q=K._plots[L],Q.mainplot)Q.bg&&Q.bg.remove(),Q.bg=void 0;else{var S=Q.xaxis.domain,T=Q.yaxis.domain,fa=Q.plotgroup;p(S,T,ba)?(S=fa.node(),Q=Q.bg=l.ensureSingle(fa,"rect","bg"),S.insertBefore(Q.node(),S.childNodes[0]),Z.push(L)):(fa.select("rect.bg").remove(),ba.push([S,T]),V||(I.push(L),Z.push(L)))}Q=K._bgLayer.selectAll(".bg").data(I);
Q.enter().append("rect").classed("bg",!0);Q.exit().remove();Q.each(function(wa){K._plots[wa].bg=g.select(this)});for(I=0;I<Z.length;I++){Q=K._plots[Z[I]];var W=Q.xaxis;var aa=Q.yaxis;Q.bg&&void 0!==W._offset&&void 0!==aa._offset&&Q.bg.call(e.setRect,W._offset-H,aa._offset-H,W._length+2*H,aa._length+2*H).call(d.fill,K.plot_bgcolor).style("stroke-width",0)}if(!K._hasOnlyLargeSploms)for(L in K._plots)Q=K._plots[L],W=Q.xaxis,aa=Q.yaxis,Z=Q.clipId="clip"+K._uid+L+"plot",I=l.ensureSingleById(K._clips,"clipPath",
Z,function(wa){wa.classed("plotclip",!0).append("rect")}),Q.clipRect=I.select("rect").attr({width:W._length,height:aa._length}),e.setTranslate(Q.plot,W._offset,aa._offset),Q._hasClipOnAxisFalse?I=null:(I=Z,Z=null),e.setClipUrl(Q.plot,I,A),Q.layerClipId=Z;for(L in K._plots){Q=K._plots[L];W=Q.xaxis;aa=Q.yaxis;V="M0,0";if(k(W,L)){Z=a(W,"left",aa,O);var ja=W._offset-(Z?H+Z:0);Z=a(W,"right",aa,O);var ma=W._offset+W._length+(Z?H+Z:0);I=D(W,aa,"bottom");ba=D(W,aa,"top");Z=!W._anchorAxis||L!==W._mainSubplot;
!Z||"allticks"!==W.mirror&&"all"!==W.mirror||(W._linepositions[L]=[I,ba]);V=J(W,C,v);Z&&W.showline&&("all"===W.mirror||"allticks"===W.mirror)&&(V+=C(I)+C(ba));Q.xlines.style("stroke-width",W._lw+"px").call(d.stroke,W.showline?W.linecolor:"rgba(0,0,0,0)")}Q.xlines.attr("d",V);V="M0,0";if(k(aa,L)){Z=a(aa,"bottom",W,O);var ia=aa._offset+aa._length+(Z?H:0);Z=a(aa,"top",W,O);var ra=aa._offset-(Z?H:0);I=D(aa,W,"left");ba=D(aa,W,"right");Z=!aa._anchorAxis||L!==aa._mainSubplot;!Z||"allticks"!==aa.mirror&&
"all"!==aa.mirror||(aa._linepositions[L]=[I,ba]);V=J(aa,y,F);Z&&aa.showline&&("all"===aa.mirror||"allticks"===aa.mirror)&&(V+=y(I)+y(ba));Q.ylines.style("stroke-width",aa._lw+"px").call(d.stroke,aa.showline?aa.linecolor:"rgba(0,0,0,0)")}Q.ylines.attr("d",V)}t.makeClipPaths(A);return r.previousPromises(A)}function k(A,D){return(A.ticks||A.showline)&&(D===A._mainSubplot||"all"===A.mirror||"allticks"===A.mirror)}function m(A,D,C){if(!C.showline||!C._lw)return!1;if("all"===C.mirror||"allticks"===C.mirror)return!0;
var v=C._anchorAxis;if(!v)return!1;var y=w.FROM_BL[D];return C.side===D?v.domain[y]===A.domain[y]:C.mirror&&v.domain[1-y]===A.domain[1-y]}function a(A,D,C,v){if(m(A,D,C))return C._lw;for(var y=0;y<v.length;y++){var F=v[y];if(F._mainAxis===C._mainAxis&&m(A,D,F))return F._lw}return 0}var g=b("@plotly/d3"),h=b("../registry"),r=b("../plots/plots"),l=b("../lib"),c=b("../lib/clear_gl_canvases"),d=b("../components/color"),e=b("../components/drawing"),f=b("../components/titles"),q=b("../components/modebar"),
t=b("../plots/cartesian/axes"),w=b("../constants/alignment");N=b("../plots/cartesian/constraints");var x=N.enforce,z=N.clean,B=b("../plots/cartesian/autorange").doAutoRange;G.layoutStyles=function(A){return l.syncOrAsync([r.doAutoMargin,n],A)};G.drawMainTitle=function(A){var D=A._fullLayout;var C=D.title;var v="middle";l.isRightAnchor(C)?v="end":l.isLeftAnchor(C)&&(v="start");C=v;v=D.title;var y="0em";l.isTopAnchor(v)?y=w.CAP_SHIFT+"em":l.isMiddleAnchor(v)&&(y=w.MID_SHIFT+"em");v=y;y=f.draw;var F=
D._dfltTitle.plot;a:{var J=D.title;var K=D._size,M=0;"start"===C?M=J.pad.l:"end"===C&&(M=-J.pad.r);switch(J.xref){case "paper":J=K.l+K.w*J.x+M;break a;default:J=D.width*J.x+M}}a:{K=D.title;M=D._size;var H=0;"0em"!==v&&v?v===w.CAP_SHIFT+"em"&&(H=K.pad.t):H=-K.pad.b;if("auto"===K.y)K=M.t/2;else switch(K.yref){case "paper":K=M.t+M.h-M.h*K.y+H;break a;default:K=D.height-D.height*K.y+H}}y.call(f,A,"gtitle",{propContainer:D,propName:"title.text",placeholder:F,attributes:{x:J,y:K,"text-anchor":C,dy:v}})};
G.doTraceStyle=function(A){var D=A.calcdata,C=[],v;for(v=0;v<D.length;v++){var y=D[v],F=y[0]||{},J=F.trace||{},K=J._module||{},M=K.arraysToCalcdata;M&&M(y,J);(y=K.editStyle)&&C.push({fn:y,cd0:F})}if(C.length){for(v=0;v<C.length;v++)D=C[v],D.fn(A,D.cd0);c(A);G.redrawReglTraces(A)}r.style(A);h.getComponentMethod("legend","draw")(A);return r.previousPromises(A)};G.doColorBars=function(A){h.getComponentMethod("colorbar","draw")(A);return r.previousPromises(A)};G.layoutReplot=function(A){var D=A.layout;
A.layout=void 0;return h.call("_doPlot",A,"",D)};G.doLegend=function(A){h.getComponentMethod("legend","draw")(A);return r.previousPromises(A)};G.doTicksRelayout=function(A){t.draw(A,"redraw");A._fullLayout._hasOnlyLargeSploms&&(h.subplotsRegistry.splom.updateGrid(A),c(A),G.redrawReglTraces(A));G.drawMainTitle(A);return r.previousPromises(A)};G.doModeBar=function(A){var D=A._fullLayout;q.manage(A);for(var C=0;C<D._basePlotModules.length;C++){var v=D._basePlotModules[C].updateFx;v&&v(A)}return r.previousPromises(A)};
G.doCamera=function(A){A=A._fullLayout;for(var D=A._subplots.gl3d,C=0;C<D.length;C++){var v=A[D[C]];v._scene.setViewport(v)}};G.drawData=function(A){var D=A._fullLayout;c(A);for(var C=D._basePlotModules,v=0;v<C.length;v++)C[v].plot(A);G.redrawReglTraces(A);r.style(A);h.getComponentMethod("shapes","draw")(A);h.getComponentMethod("annotations","draw")(A);h.getComponentMethod("images","draw")(A);D._replotting=!1;return r.previousPromises(A)};G.redrawReglTraces=function(A){var D=A._fullLayout;if(D._has("regl")){var C=
A._fullData;A=[];var v=[],y;D._hasOnlyLargeSploms&&D._splomGrid.draw();for(y=0;y<C.length;y++){var F=C[y];!0===F.visible&&0!==F._length&&("splom"===F.type?D._splomScenes[F.uid].draw():"scattergl"===F.type?l.pushUnique(A,F.xaxis+F.yaxis):"scatterpolargl"===F.type&&l.pushUnique(v,F.subplot))}for(y=0;y<A.length;y++)C=D._plots[A[y]],C._scene&&C._scene.draw();for(y=0;y<v.length;y++)C=D[v[y]]._subplot,C._scene&&C._scene.draw()}};G.doAutoRangeAndConstraints=function(A){for(var D=t.list(A,"",!0),C,v={},y=
0;y<D.length;y++)if(C=D[y],!v[C._id]){v[C._id]=1;z(A,C);B(A,C);var F=C._matchGroup;if(F)for(var J in F)F=t.getFromId(A,J),B(A,F,C.range),v[J]=1}x(A)};G.finalDraw=function(A){h.getComponentMethod("rangeslider","draw")(A);h.getComponentMethod("rangeselector","draw")(A)};G.drawMarginPushers=function(A){h.getComponentMethod("legend","draw")(A);h.getComponentMethod("rangeselector","draw")(A);h.getComponentMethod("sliders","draw")(A);h.getComponentMethod("updatemenus","draw")(A);h.getComponentMethod("colorbar",
"draw")(A)}},{"../components/color":666,"../components/drawing":688,"../components/modebar":729,"../components/titles":764,"../constants/alignment":771,"../lib":803,"../lib/clear_gl_canvases":787,"../plots/cartesian/autorange":853,"../plots/cartesian/axes":854,"../plots/cartesian/constraints":862,"../plots/plots":917,"../registry":931,"@plotly/d3":58}],845:[function(b,N,G){function p(t,w){function x(F,J,K){if(l(J)&&l(F))p(F,J);else if(Array.isArray(J)&&Array.isArray(F)){F=f.arrayTemplater({_template:t},
K);for(A=0;A<J.length;A++){K=J[A];var M=F.newItem(K)._template;M&&p(M,K)}F=F.defaultItems();for(A=0;A<F.length;A++)J.push(F[A]._template);for(A=0;A<J.length;A++)delete J[A].templateitemname}}t=r.extendDeep({},t);var z=Object.keys(t).sort(),B,A;for(B=0;B<z.length;B++){var D=z[B],C=t[D];D in w?x(C,w[D],D):w[D]=C;if(n(D)===D)for(var v in w){var y=n(v);v===y||y!==D||v in t||x(C,w[v],D)}}}function n(t){return t.replace(/[0-9]+$/,"")}function k(t,w,x,z,B){var A=B&&x(B),D;for(D in t){var C=t[D],v=g(t,D,
z),y=g(t,D,B),F=x(y);if(!F){var J=n(D);J!==D&&(y=g(t,J,B),F=x(y))}if(!(A&&A===F||!F||F._noTemplating||"data_array"===F.valType||F.arrayOk&&Array.isArray(C)))if(!F.valType&&l(C))k(C,w,x,v,y);else if(F._isLinkedToArray&&Array.isArray(C)){var K=!1;F=0;J={};for(var M=0;M<C.length;M++){var H=C[M];if(l(H)){var O=H.name;O?J[O]||(k(H,w,x,g(C,F,v),g(C,F,y)),F++,J[O]=1):K||(K=f.arrayDefaultKey(D),K=g(t,K,z),O=g(C,F,v),k(H,w,x,O,g(C,F,y)),H=r.nestedProperty(w,O),r.nestedProperty(w,K).set(H.get()),H.set(null),
K=!0)}}}else r.nestedProperty(w,v).set(C)}}function m(t,w){return c.getLayoutValObject(t,r.nestedProperty({},w).parts)}function a(t,w){return c.getTraceValObject(t,r.nestedProperty({},w).parts)}function g(t,w,x){return x?Array.isArray(t)?x+"["+w+"]":x+"."+w:w}function h(t){switch(t.code){case "data":var w="The template has no key data.";break;case "layout":w="The template has no key layout.";break;case "missing":w=t.path?"There are no templates for item "+t.path+" with name "+t.templateitemname:"There are no templates for trace "+
t.index+", of type "+t.traceType+".";break;case "unused":w=t.path?"The template item at "+t.path+" was not used in constructing the plot.":t.dataCount?"Some of the templates of type "+t.traceType+" were not used. The template has "+t.templateCount+" traces, the data only has "+t.dataCount+" of this type.":"The template has "+t.templateCount+" traces of type "+t.traceType+" but there are none in the data.";break;case "reused":w="Some of the templates of type "+t.traceType+" were used more than once. The template has "+
t.templateCount+" traces, the data has "+t.dataCount+" of this type."}t.msg=w;return t}var r=b("../lib"),l=r.isPlainObject,c=b("./plot_schema"),d=b("../plots/plots"),e=b("../plots/attributes"),f=b("./plot_template"),q=b("./plot_config").dfltConfig;G.makeTemplate=function(t){t=r.isPlainObject(t)?t:r.getGraphDiv(t);t=r.extendDeep({_context:q},{data:t.data,layout:t.layout});d.supplyDefaults(t);var w=t.data||[],x=t.layout||{};x._basePlotModules=t._fullLayout._basePlotModules;x._modules=t._fullLayout._modules;
var z={data:{},layout:{}};w.forEach(function(v){var y={};k(v,y,a.bind(null,v));v=r.coerce(v,{},e,"type");var F=z.data[v];F||(F=z.data[v]=[]);F.push(y)});k(x,z.layout,m.bind(null,x));delete z.layout.template;t=x.template;if(l(t)){w=t.layout;var B;l(w)&&p(w,z.layout);var A=t.data;if(l(A)){for(B in z.data)if(w=A[B],Array.isArray(w)){var D=z.data[B];var C=D.length;x=w.length;for(t=0;t<C;t++)p(w[t%x],D[t]);for(t=C;t<x;t++)D.push(r.extendDeep({},w[t]))}for(B in A)B in z.data||(z.data[B]=r.extendDeep([],
A[B]))}}return z};G.validateTemplate=function(t,w){function x(K,M){for(var H in K)if("_"!==H.charAt(0)&&l(K[H])){var O=n(H),I=[],L;for(L=0;L<M.length;L++)I.push(g(K,H,M[L])),O!==H&&I.push(g(K,O,M[L]));for(L=0;L<I.length;L++)y[I[L]]=1;x(K[H],I)}}function z(K,M){for(var H in K)if(-1===H.indexOf("defaults")&&l(K[H])){var O=g(K,H,M);y[O]?z(K[H],O):v.push({code:"unused",path:O})}}function B(K,M){for(var H in K)if("_"!==H.charAt(0)){var O=K[H],I=g(K,H,M);if(l(O))Array.isArray(K)&&!1===O._template&&O.templateitemname&&
v.push({code:"missing",path:I,templateitemname:O.templateitemname}),B(O,I);else{var L;if(L=Array.isArray(O))a:{L=O;for(var Q=0;Q<L.length;Q++)if(l(L[Q])){L=!0;break a}L=void 0}L&&B(O,I)}}}var A=r.extendDeep({},{_context:q,data:t.data,layout:t.layout}),D=A.layout||{};l(w)||(w=D.template||{});var C=w.layout;t=w.data;var v=[];A.layout=D;A.layout.template=w;d.supplyDefaults(A);w=A._fullLayout;A=A._fullData;var y={};l(C)?(x(w,["layout"]),z(C,"layout")):v.push({code:"layout"});if(l(t)){C={};for(D=0;D<A.length;D++){var F=
A[D];var J=F.type;C[J]=(C[J]||0)+1;F._fullInput._template||v.push({code:"missing",index:F._fullInput.index,traceType:J})}for(J in t)D=t[J].length,F=C[J]||0,D>F?v.push({code:"unused",traceType:J,templateCount:D,dataCount:F}):F>D&&v.push({code:"reused",traceType:J,templateCount:D,dataCount:F})}else v.push({code:"data"});B({data:A,layout:w},"");if(v.length)return v.map(h)}},{"../lib":803,"../plots/attributes":850,"../plots/plots":917,"./plot_config":841,"./plot_schema":842,"./plot_template":843}],846:[function(b,
N,G){var p=b("fast-isnumeric"),n=b("./plot_api"),k=b("../plots/plots"),m=b("../lib"),a=b("../snapshot/helpers"),g=b("../snapshot/tosvg"),h=b("../snapshot/svgtoimg"),r=b("../version").version,l={format:{valType:"enumerated",values:["png","jpeg","webp","svg","full-json"],dflt:"png"},width:{valType:"number",min:1},height:{valType:"number",min:1},scale:{valType:"number",min:0,dflt:1},setBackground:{valType:"any",dflt:!1},imageDataOnly:{valType:"boolean",dflt:!1}};N.exports=function(c,d){function e(O){return!(O in
d)||m.validate(d[O],l[O])}function f(O,I){return m.coerce(d,B,l,O,I)}function q(){return new Promise(function(O){setTimeout(O,a.getDelay(J._fullLayout))})}function t(){return new Promise(function(O,I){var L=g(J,A,v),Q=J._fullLayout.width,Z=J._fullLayout.height;if("full-json"===A)return I=k.graphJson(J,!1,"keepdata","object",!0,!0),I.version=r,I=JSON.stringify(I),n.purge(J),document.body.removeChild(J),F?O(I):O(a.encodeJSON(I));n.purge(J);document.body.removeChild(J);if("svg"===A)return F?O(L):O(a.encodeSVG(L));
var ba=document.createElement("canvas");ba.id=m.randstr();h({format:A,width:Q,height:Z,scale:v,canvas:ba,svg:L,promise:!0}).then(O).catch(I)})}d=d||{};if(m.isPlainObject(c)){var w=c.data||[];var x=c.layout||{};var z=c.config||{};c={}}else c=m.getGraphDiv(c),w=m.extendDeep([],c.data),x=m.extendDeep({},c.layout),z=c._context,c=c._fullLayout||{};if(!e("width")&&null!==d.width||!e("height")&&null!==d.height)throw Error("Height and width should be pixel values.");if(!e("format"))throw Error("Export format is not "+
m.join2(l.format.values,", "," or ")+".");var B={},A=f("format"),D=f("width"),C=f("height"),v=f("scale"),y=f("setBackground"),F=f("imageDataOnly"),J=document.createElement("div");J.style.position="absolute";J.style.left="-5000px";document.body.appendChild(J);var K=m.extendFlat({},x);D?K.width=D:null===d.width&&p(c.width)&&(K.width=c.width);C?K.height=C:null===d.height&&p(c.height)&&(K.height=c.height);var M=m.extendFlat({},z,{_exportedPlot:!0,staticPlot:!0,setBackground:y}),H=a.getRedrawFunc(J);return new Promise(function(O,
I){n.newPlot(J,w,K,M).then(H).then(q).then(t).then(function(L){L=F?L.replace(a.IMAGE_URL_PREFIX,""):L;O(L)}).catch(function(L){I(L)})})}},{"../lib":803,"../plots/plots":917,"../snapshot/helpers":935,"../snapshot/svgtoimg":937,"../snapshot/tosvg":939,"../version":1404,"./plot_api":840,"fast-isnumeric":249}],847:[function(b,N,G){function p(q,t,w,x,z,B){B=B||[];for(var A=Object.keys(q),D=0;D<A.length;D++){var C=A[D];if("transforms"!==C){var v=B.slice();v.push(C);var y=q[C],F=t[C];var J=w;if(C in J)var K=
J[C];else K=m(C),K=J[K.keyMinusId];var M=(K||{}).valType,H="info_array"===M,O="colorscale"===M;J=(K||{}).items;var I=w;var L=C,Q=m(L),Z=Q.keyMinusId;Q=Q.id;I=Z in I&&I[Z]._isSubplotObj&&Q?!0:L in I;if(I)if(l(y)&&l(F)&&"any"!==M)p(y,F,K,x,z,v);else if(H&&c(y))if(y.length>F.length&&x.push(k("unused",z,v.concat(F.length))),C=F.length,(M=Array.isArray(J))&&(C=Math.min(C,J.length)),2===K.dimensions)for(H=0;H<C;H++)if(c(y[H]))for(y[H].length>F[H].length&&x.push(k("unused",z,v.concat(H,F[H].length))),Z=
F[H].length,K=0;K<(M?Math.min(Z,J[H].length):Z);K++)O=M?J[H][K]:J,I=y[H][K],L=F[H][K],a.validate(I,O)?L!==I&&L!==+I&&x.push(k("dynamic",z,v.concat(H,K),I,L)):x.push(k("value",z,v.concat(H,K),I));else x.push(k("array",z,v.concat(H),y[H]));else for(H=0;H<C;H++)O=M?J[H]:J,I=y[H],L=F[H],a.validate(I,O)?L!==I&&L!==+I&&x.push(k("dynamic",z,v.concat(H),I,L)):x.push(k("value",z,v.concat(H),I));else if(K.items&&!H&&c(y)){J=J[Object.keys(J)[0]];C=[];for(K=0;K<F.length;K++)H=F[K]._index||K,M=v.slice(),M.push(H),
l(y[H])&&l(F[K])&&(C.push(H),H=y[H],O=F[K],l(H)&&!1!==H.visible&&!1===O.visible?x.push(k("invisible",z,M)):p(H,O,J,x,z,M));for(K=0;K<y.length;K++)M=v.slice(),M.push(K),l(y[K])?-1===C.indexOf(K)&&x.push(k("unused",z,M)):x.push(k("object",z,M,y[K]))}else!l(y)&&l(F)?x.push(k("object",z,v,y)):d(y)||!d(F)||H||O?C in t?a.validate(y,K)?"enumerated"===K.valType&&(K.coerceNumber&&y!==+F||y!==F)&&x.push(k("dynamic",z,v,y,F)):x.push(k("value",z,v,y)):x.push(k("unused",z,v,y)):x.push(k("array",z,v,y));else x.push(k("schema",
z,v))}}return x}function n(q){return c(q)?"In data trace "+q[1]+", ":"In "+q+", "}function k(q,t,w,x,z){w=w||"";if(c(t)){var B=t[0];var A=t[1]}else B=t,A=null;var D=w;if(c(D)){for(var C="",v=0;v<D.length;v++){var y=D[v];C="number"===typeof y?C.substr(0,C.length-1)+"["+y+"]":C+y;v<D.length-1&&(C+=".")}D=C}else D=String(D);t=e[q](t,D,x,z);a.log(t);return{code:q,container:B,trace:A,path:w,astr:D,msg:t}}function m(q){q=q.match(f);return{keyMinusId:q&&q[1],id:q&&q[2]}}var a=b("../lib"),g=b("../plots/plots"),
h=b("./plot_schema"),r=b("./plot_config").dfltConfig,l=a.isPlainObject,c=Array.isArray,d=a.isArrayOrTypedArray;N.exports=function(q,t){void 0===q&&(q=[]);void 0===t&&(t={});var w=h.get(),x=[],z={_context:a.extendFlat({},r)};if(c(q)){z.data=a.extendDeep([],q);var B=q}else z.data=[],B=[],x.push(k("array","data"));if(l(t)){z.layout=a.extendDeep({},t);var A=t}else z.layout={},A={},1<arguments.length&&x.push(k("object","layout"));g.supplyDefaults(z);for(var D=z._fullData,C=B.length,v=0;v<C;v++){var y=
B[v],F=["data",v];if(l(y)){var J=D[v],K=J.type,M=w.traces[K].attributes;M.type={valType:"enumerated",values:[K]};!1===J.visible&&!1!==y.visible&&x.push(k("invisible",F));p(y,J,M,x,F);y=y.transforms;J=J.transforms;if(y)for(c(y)||x.push(k("array",F,["transforms"])),F.push("transforms"),K=0;K<y.length;K++){M=["transforms",K];var H=y[K].type;l(y[K])?(H=w.transforms[H]?w.transforms[H].attributes:{},H.type={valType:"enumerated",values:Object.keys(w.transforms)},p(y[K],J[K],H,x,F,M)):x.push(k("object",F,
M))}}else x.push(k("object",F))}z=z._fullLayout;B=w.layout.layoutAttributes;for(C=0;C<D.length;C++)v=D[C],F=w.traces[v.type],(y=F.layoutAttributes)&&(v.subplot?a.extendFlat(B[F.attributes.subplot.dflt],y):a.extendFlat(B,y));p(A,z,B,x,"layout");return 0===x.length?void 0:x};var e={object:function(q,t){return("layout"===q&&""===t?"The layout argument":"data"===q[0]&&""===t?"Trace "+q[1]+" in the data argument":n(q)+"key "+t)+" must be linked to an object container"},array:function(q,t){return("data"===
q?"The data argument":n(q)+"key "+t)+" must be linked to an array container"},schema:function(q,t){return n(q)+"key "+t+" is not part of the schema"},unused:function(q,t,w){w=l(w)?"container":"key";return n(q)+w+" "+t+" did not get coerced"},dynamic:function(q,t,w,x){return[n(q)+"key",t,"(set to '"+w+"')","got reset to","'"+x+"'","during defaults."].join(" ")},invisible:function(q,t){return(t?n(q)+"item "+t:"Trace "+q[1])+" got defaulted to be not visible"},value:function(q,t,w){return[n(q)+"key "+
t,"is set to an invalid value ("+w+")"].join(" ")}},f=a.counterRegex("([a-z]+)")},{"../lib":803,"../plots/plots":917,"./plot_config":841,"./plot_schema":842}],848:[function(b,N,G){N.exports={mode:{valType:"enumerated",dflt:"afterall",values:["immediate","next","afterall"]},direction:{valType:"enumerated",values:["forward","reverse"],dflt:"forward"},fromcurrent:{valType:"boolean",dflt:!1},frame:{duration:{valType:"number",min:0,dflt:500},redraw:{valType:"boolean",dflt:!0}},transition:{duration:{valType:"number",
min:0,dflt:500,editType:"none"},easing:{valType:"enumerated",dflt:"cubic-in-out",values:"linear quad cubic sin exp circle elastic back bounce linear-in quad-in cubic-in sin-in exp-in circle-in elastic-in back-in bounce-in linear-out quad-out cubic-out sin-out exp-out circle-out elastic-out back-out bounce-out linear-in-out quad-in-out cubic-in-out sin-in-out exp-in-out circle-in-out elastic-in-out back-in-out bounce-in-out".split(" "),editType:"none"},ordering:{valType:"enumerated",values:["layout first",
"traces first"],dflt:"layout first",editType:"none"}}}},{}],849:[function(b,N,G){var p=b("../lib"),n=b("../plot_api/plot_template");N.exports=function(k,m,a){var g=a.name,h=a.inclusionAttr||"visible",r=m[g],l=p.isArrayOrTypedArray(k[g])?k[g]:[];k=m[g]=[];var c=n.arrayTemplater(m,g,h);for(g=0;g<l.length;g++){var d=l[g];if(p.isPlainObject(d))var e=c.newItem(d);else e=c.newItem({}),e[h]=!1;e._index=g;!1!==e[h]&&a.handleItemDefaults(d,e,m,a);k.push(e)}h=c.defaultItems();for(g=0;g<h.length;g++)e=h[g],
e._index=k.length,a.handleItemDefaults({},e,m,a,{}),k.push(e);if(p.isArrayOrTypedArray(r))for(m=Math.min(r.length,k.length),g=0;g<m;g++)p.relinkPrivateKeys(k[g],r[g]);return k}},{"../lib":803,"../plot_api/plot_template":843}],850:[function(b,N,G){G=b("./font_attributes");b=b("../components/fx/attributes");N.exports={type:{valType:"enumerated",values:[],dflt:"scatter",editType:"calc+clearAxisTypes",_noTemplating:!0},visible:{valType:"enumerated",values:[!0,!1,"legendonly"],dflt:!0,editType:"calc"},
showlegend:{valType:"boolean",dflt:!0,editType:"style"},legendgroup:{valType:"string",dflt:"",editType:"style"},legendgrouptitle:{text:{valType:"string",dflt:"",editType:"style"},font:G({editType:"style"}),editType:"style"},legendrank:{valType:"number",dflt:1E3,editType:"style"},opacity:{valType:"number",min:0,max:1,dflt:1,editType:"style"},name:{valType:"string",editType:"style"},uid:{valType:"string",editType:"plot",anim:!0},ids:{valType:"data_array",editType:"calc",anim:!0},customdata:{valType:"data_array",
editType:"calc"},meta:{valType:"any",arrayOk:!0,editType:"plot"},selectedpoints:{valType:"any",editType:"calc"},hoverinfo:{valType:"flaglist",flags:["x","y","z","text","name"],extras:["all","none","skip"],arrayOk:!0,dflt:"all",editType:"none"},hoverlabel:b.hoverlabel,stream:{token:{valType:"string",noBlank:!0,strict:!0,editType:"calc"},maxpoints:{valType:"number",min:0,max:1E4,dflt:500,editType:"calc"},editType:"calc"},transforms:{_isLinkedToArray:"transform",editType:"calc"},uirevision:{valType:"any",
editType:"none"}}},{"../components/fx/attributes":697,"./font_attributes":883}],851:[function(b,N,G){var p=b("fast-isnumeric");G=b("../../lib");var n=G.dateTime2ms,k=G.incrementMonth,m=b("../../constants/numerical").ONEAVGMONTH;N.exports=function(a,g,h,r){if("date"!==g.type)return{vals:r};var l=a[h+"periodalignment"];if(!l)return{vals:r};var c=a[h+"period"];if(p(c)){if(c=+c,0>=c)return{vals:r}}else if("string"===typeof c&&"M"===c.charAt(0)){var d=+c.substring(1);if(!(0<d&&Math.round(d)===d))return{vals:r}}g=
g.calendar;var e="start"===l;l="end"===l;a=n(a[h+"period0"],g)||0;h=[];for(var f=[],q=[],t=r.length,w=0;w<t;w++){var x=r[w];if(d){var z=Math.round((x-a)/(d*m));for(z=k(a,d*z,g);z>x;)z=k(z,-d,g);for(;z<=x;)z=k(z,d,g);x=k(z,-d,g)}else{z=Math.round((x-a)/c);for(z=a+z*c;z>x;)z-=c;for(;z<=x;)z+=c;x=z-c}h[w]=e?x:l?z:(x+z)/2;f[w]=x;q[w]=z}return{vals:h,starts:f,ends:q}}},{"../../constants/numerical":779,"../../lib":803,"fast-isnumeric":249}],852:[function(b,N,G){N.exports={xaxis:{valType:"subplotid",dflt:"x",
editType:"calc+clearAxisTypes"},yaxis:{valType:"subplotid",dflt:"y",editType:"calc+clearAxisTypes"}}},{}],853:[function(b,N,G){function p(D,C){function v(ma,ia){return Math.max(ma,M(ia))}var y,F,J=[],K=D._fullLayout;J=k(K,C,0);var M=k(K,C,1);D=a(D,C);var H=D.min,O=D.max;if(0===H.length||0===O.length)return q.simpleMap(C.range,C.r2l);D=H[0].val;var I=O[0].val;for(y=1;y<H.length&&D===I;y++)D=Math.min(D,H[y].val);for(y=1;y<O.length&&D===I;y++)I=Math.max(I,O[y].val);K=!1;C.range&&(K=q.simpleMap(C.range,
C.r2l),K=K[1]<K[0]);"reversed"===C.autorange&&(K=!0,C.autorange=!0);var L=C.rangemode,Q="tozero"===L,Z="nonnegative"===L;L=C._length;var ba=L/10,V=0;for(y=0;y<H.length;y++){var S=H[y];for(F=0;F<O.length;F++){var T=O[F];var fa=T.val-S.val-n(C,S.val,T.val);if(0<fa){var W=L-J(S)-M(T);if(W>ba){if(fa/W>V){var aa=S;var ja=T;V=fa/W}}else fa/L>V&&(aa={val:S.val,nopad:1},ja={val:T.val,nopad:1},V=fa/L)}}}D===I?(S=D-1,T=D+1,Q?0===D?J=[0,1]:(S=(0<D?O:H).reduce(v,0),S=D/(1-Math.min(.5,S/L)),J=0<D?[0,S]:[S,0]):
J=Z?[Math.max(0,S),Math.max(1,T)]:[S,T]):(Q?(0<=aa.val&&(aa={val:0,nopad:1}),0>=ja.val&&(ja={val:0,nopad:1})):Z&&(0>aa.val-V*J(aa)&&(aa={val:0,nopad:1}),0>=ja.val&&(ja={val:1,nopad:1})),V=(ja.val-aa.val-n(C,S.val,T.val))/(L-J(aa)-M(ja)),J=[aa.val-V*J(aa),ja.val+V*M(ja)]);K&&J.reverse();return q.simpleMap(J,C.l2r||Number)}function n(D,C,v){var y=0;if(D.rangebreaks)for(D=D.locateBreaks(C,v),C=0;C<D.length;C++)v=D[C],y+=v.max-v.min;return y}function k(D,C,v){var y=.05*C._length,F=C._anchorAxis||{};if(-1!==
(C.ticklabelposition||"").indexOf("inside")||-1!==(F.ticklabelposition||"").indexOf("inside"))F="reversed"===C.autorange,F||(F=q.simpleMap(C.range,C.r2l),F=F[1]<F[0]),F&&(v=!v);var J=0;B(D,C._id)||(J=m(D,C,v));y=Math.max(J,y);"domain"===C.constrain&&C._inputDomain&&(y*=(C._inputDomain[1]-C._inputDomain[0])/(C.domain[1]-C.domain[0]));return function(K){return K.nopad?0:K.pad+(K.extrapad?y:J)}}function m(D,C,v){var y=0,F="x"===C._id.charAt(0),J;for(J in D._plots){var K=D._plots[J];if(C._id===K.xaxis._id||
C._id===K.yaxis._id)if(K=(F?K.yaxis:K.xaxis)||{},-1!==(K.ticklabelposition||"").indexOf("inside")&&(!v&&("left"===K.side||"bottom"===K.side)||v&&("top"===K.side||"right"===K.side))){if(K._vals){var M=q.deg2rad(K._tickAngles[K._id+"tick"]||0),H=Math.abs(Math.cos(M));M=Math.abs(Math.sin(M));K._vals[0].bb||K._selections[K._id+"tick"].each(function(Q){var Z=e.select(this);Z.select(".text-math-group").empty()&&(Q.bb=x.bBox(Z.node()))});for(var O=0;O<K._vals.length;O++){var I=K._vals[O].bb;if(I){var L=
2*A+I.width;I=2*A+I.height;y=Math.max(y,F?Math.max(L*H,I*M):Math.max(I*H,L*M))}}}"inside"===K.ticks&&"inside"===K.ticklabelposition&&(y+=K.ticklen||0)}}return y}function a(D,C,v){function y(Q,Z){for(H=0;H<Z.length;H++){var ba=Q[Z[H]],V=(ba._extremes||{})[F];if(!0===ba.visible&&V){for(O=0;O<V.min.length;O++)L=V.min[O],g(K,L.val,L.pad,{extrapad:L.extrapad});for(O=0;O<V.max.length;O++)L=V.max[O],h(M,L.val,L.pad,{extrapad:L.extrapad})}}}var F=C._id,J=D._fullLayout,K=[],M=[],H,O;y(D._fullData,C._traceIndices);
y(J.annotations||[],C._annIndices||[]);y(J.shapes||[],C._shapeIndices||[]);if(C._matchGroup&&!v)for(var I in C._matchGroup)if(I!==C._id){J=z(D,I);v=a(D,J,!0);J=C._length/J._length;for(O=0;O<v.min.length;O++){var L=v.min[O];g(K,L.val,L.pad*J,{extrapad:L.extrapad})}for(O=0;O<v.max.length;O++)L=v.max[O],h(M,L.val,L.pad*J,{extrapad:L.extrapad})}return{min:K,max:M}}function g(D,C,v,y){r(D,C,v,y,c)}function h(D,C,v,y){r(D,C,v,y,d)}function r(D,C,v,y,F){var J=y.tozero;y=y.extrapad;for(var K=!0,M=0;M<D.length&&
K;M++){var H=D[M];if(F(H.val,C)&&H.pad>=v&&(H.extrapad||!y)){K=!1;break}else F(C,H.val)&&H.pad<=v&&(y||!H.extrapad)&&(D.splice(M,1),M--)}K&&(F=J&&0===C,D.push({val:C,pad:F?0:v,extrapad:F?!1:y}))}function l(D){return f(D)&&Math.abs(D)<t}function c(D,C){return D<=C}function d(D,C){return D>=C}var e=b("@plotly/d3"),f=b("fast-isnumeric"),q=b("../../lib"),t=b("../../constants/numerical").FP_SAFE,w=b("../../registry"),x=b("../../components/drawing");b=b("./axis_ids");var z=b.getFromId,B=b.isLinked;N.exports=
{getAutoRange:p,makePadFn:k,doAutoRange:function(D,C,v){C.setScale();if(C.autorange){C.range=v?v.slice():p(D,C);C._r=C.range.slice();C._rl=q.simpleMap(C._r,C.r2l);v=C._input;var y={};y[C._attr+".range"]=C.range;y[C._attr+".autorange"]=C.autorange;w.call("_storeDirectGUIEdit",D.layout,D._fullLayout._preGUI,y);v.range=C.range.slice();v.autorange=C.autorange}(v=C._anchorAxis)&&v.rangeslider&&((y=v.rangeslider[C._name])&&"auto"===y.rangemode&&(y.range=p(D,C)),v._input.rangeslider[C._name]=q.extendFlat({},
y))},findExtremes:function(D,C,v){function y(la){if(Array.isArray(la))return L=!0,function(na){return Math.max(Number(la[na]||0),0)};var ka=Math.max(Number(la||0),0);return function(){return ka}}function F(la){ba=C[la];f(ba)&&(T=W(la),fa=aa(la),Q?(V=D.c2l(ba)-ma(la),S=D.c2l(ba)+ja(la)):(ia=ba-ma(la),ra=ba+ja(la),I&&ia<ra/10&&(ia=ra/10),V=D.c2l(ia),S=D.c2l(ra)),O&&(V=Math.min(0,V),S=Math.max(0,S)),l(V)&&g(J,V,fa,pa),l(S)&&h(K,S,T,pa))}v||(v={});D._m||D.setScale();var J=[],K=[],M=C.length,H=v.padded||
!1,O=v.tozero&&("linear"===D.type||"-"===D.type),I="log"===D.type,L=!1,Q=v.vpadLinearized||!1,Z,ba,V,S,T,fa,W=y((0<D._m?v.ppadplus:v.ppadminus)||v.ppad||0),aa=y((0<D._m?v.ppadminus:v.ppadplus)||v.ppad||0),ja=y(v.vpadplus||v.vpad),ma=y(v.vpadminus||v.vpad);if(!L){var ia=Infinity;var ra=-Infinity;if(I)for(Z=0;Z<M;Z++){var wa=C[Z];wa<ia&&0<wa&&(ia=wa);wa>ra&&wa<t&&(ra=wa)}else for(Z=0;Z<M;Z++)wa=C[Z],wa<ia&&wa>-t&&(ia=wa),wa>ra&&wa<t&&(ra=wa);C=[ia,ra];M=2}var pa={tozero:O,extrapad:H};H=Math.min(6,M);
for(Z=0;Z<H;Z++)F(Z);for(Z=M-1;Z>=H;Z--)F(Z);return{min:J,max:K,opts:v}},concatExtremes:a};var A=3},{"../../components/drawing":688,"../../constants/numerical":779,"../../lib":803,"../../registry":931,"./axis_ids":858,"@plotly/d3":58,"fast-isnumeric":249}],854:[function(b,N,G){function p(Ia){var Na=1E-4*(Ia[1]-Ia[0]);return[Ia[0]-Na,Ia[1]+Na]}function n(Ia){return+Ia}function k(Ia){return String(Ia)}function m(Ia,Na,ib,Gb,Hb){function $b(Fc){return 2>(1+100*(Fc-Ia)/ib.dtick)%100}for(var uc=0,fd=0,
fb=0,Pb=0,fc=0;fc<Na.length;fc++)0===Na[fc]%1?fb++:Z(Na[fc])||Pb++,$b(Na[fc])&&uc++,$b(Na[fc]+ib.dtick/2)&&fd++;Na=Na.length-Pb;fb===Na&&"date"!==ib.type?1>ib.dtick?Ia=Gb-.5*ib.dtick:(Ia-=.5,Ia+ib.dtick<Gb&&(Ia+=ib.dtick)):fd<.1*Na&&(uc>.3*Na||$b(Gb)||$b(Hb))&&(Hb=ib.dtick/2,Ia+=Ia+Hb<Gb?Hb:-Hb);return Ia}function a(Ia){var Na=Ia.tickvals,ib=Ia.ticktext,Gb=Array(Na.length),Hb=S.simpleMap(Ia.range,Ia.r2l),$b=p(Hb);Hb=Math.min($b[0],$b[1]);$b=Math.max($b[0],$b[1]);var uc=0;Array.isArray(ib)||(ib=[]);
var fd="category"===Ia.type?Ia.d2l_noadd:Ia.d2l;"log"===Ia.type&&"L"!==String(Ia.dtick).charAt(0)&&(Ia.dtick="L"+Math.pow(10,Math.floor(Math.min(Ia.range[0],Ia.range[1]))-1));for(var fb=0;fb<Na.length;fb++){var Pb=fd(Na[fb]);Pb>Hb&&Pb<$b&&(Gb[uc]=void 0===ib[fb]?Aa.tickText(Ia,Pb):r(Ia,Pb,String(ib[fb])),uc++)}uc<Na.length&&Gb.splice(uc,Na.length-uc);Ia.rangebreaks&&(Gb=Gb.filter(function(fc){return Ia.maskBreaks(fc.x)!==pb}));return Gb}function g(Ia,Na,ib){return Na*S.roundUp(Ia/Na,ib)}function h(Ia){var Na=
Ia.dtick;Ia._tickexponent=0;Z(Na)||"string"===typeof Na||(Na=1);if("category"===Ia.type||"multicategory"===Ia.type)Ia._tickround=null;if("date"===Ia.type){var ib=Ia.r2l(Ia.tick0),Gb=Ia.l2r(ib).replace(/(^-|i)/g,""),Hb=Gb.length;"M"===String(Na).charAt(0)?10<Hb||"01-01"!==Gb.substr(5)?Ia._tickround="d":Ia._tickround=0===+Na.substr(1)%12?"y":"m":Na>=Wa&&10>=Hb||Na>=15*Wa?Ia._tickround="d":Na>=sb&&16>=Hb||Na>=bb?Ia._tickround="M":Na>=hb&&19>=Hb||Na>=sb?Ia._tickround="S":(Na=Ia.l2r(ib+Na).replace(/^-/,
"").length,Ia._tickround=Math.max(Hb,Na)-20,0>Ia._tickround&&(Ia._tickround=4))}else Z(Na)||"L"===Na.charAt(0)?(Hb=Ia.range.map(Ia.r2d||Number),Z(Na)||(Na=Number(Na.substr(1))),Ia._tickround=2-Math.floor(Math.log(Na)/Math.LN10+.01),Na=Math.floor(Math.log(Math.max(Math.abs(Hb[0]),Math.abs(Hb[1])))/Math.LN10+.01),Math.abs(Na)>(void 0===Ia.minexponent?3:Ia.minexponent)&&(!w(Ia.exponentformat)||14<Na||-15>Na?Ia._tickexponent=Na:Ia._tickexponent=3*Math.round((Na-1)/3))):Ia._tickround=null}function r(Ia,
Na,ib){Ia=Ia.tickfont||{};return{x:Na,dx:0,dy:0,text:ib||"",fontSize:Ia.size,font:Ia.family,fontColor:Ia.color}}function l(Ia,Na,ib,Gb){var Hb=Ia._tickround,$b=ib&&Ia.hoverformat||Aa.getTickFormat(Ia);Gb&&(Hb=Z(Hb)?4:{y:"m",m:"d",d:"M",M:"S",S:4}[Hb]);$b=S.formatDate(Na.x,$b,Hb,Ia._dateFormat,Ia.calendar,Ia._extraFormat);var uc=$b.indexOf("\n");if(-1!==uc){var fd=$b.substr(uc+1);$b=$b.substr(0,uc)}Gb&&("00:00:00"===$b||"00:00"===$b?($b=fd,fd=""):8===$b.length&&($b=$b.replace(/:00$/,"")));if(fd)if(ib)$b=
"d"===Hb?$b+(", "+fd):fd+($b?", "+$b:"");else if(Ia._inCalcTicks&&Ia._prevDateHead===fd){if(ib=I(Ia),Ia=Ia._realSide||Ia.side,!ib&&"top"===Ia||ib&&"bottom"===Ia)$b+="\x3cbr\x3e "}else Ia._prevDateHead=fd,$b+="\x3cbr\x3e"+fd;Na.text=$b}function c(Ia,Na,ib,Gb,Hb){var $b=Ia.dtick;ib=Na.x;var uc=Ia.tickformat,fd="string"===typeof $b&&$b.charAt(0);"never"===Hb&&(Hb="");Gb&&"L"!==fd&&($b="L3",fd="L");if(uc||"L"===fd)Na.text=x(Math.pow(10,ib),Ia,Hb,Gb);else if(Z($b)||"D"===fd&&.1>S.mod(ib+.01,1))Gb=Math.round(ib),
Hb=Math.abs(Gb),uc=Ia.exponentformat,"power"===uc||w(uc)&&(14<Gb||-15>Gb)?(Na.text=0===Gb?1:1===Gb?"10":"10\x3csup\x3e"+(1<Gb?"":ub)+Hb+"\x3c/sup\x3e",Na.fontSize*=1.25):("e"===uc||"E"===uc)&&2<Hb?Na.text="1"+uc+(0<Gb?"+":ub)+Hb:(Na.text=x(Math.pow(10,ib),Ia,"","fakehover"),"D1"===$b&&"y"===Ia._id.charAt(0)&&(Na.dy-=Na.fontSize/6));else if("D"===fd)Na.text=String(Math.round(Math.pow(10,S.mod(ib,1)))),Na.fontSize*=.75;else throw"unrecognized dtick "+String($b);"D1"===Ia.dtick&&($b=String(Na.text).charAt(0),
"0"===$b||"1"===$b)&&("y"===Ia._id.charAt(0)?Na.dx-=Na.fontSize/4:(Na.dy+=Na.fontSize/2,Na.dx+=(Ia.range[1]>Ia.range[0]?1:-1)*Na.fontSize*(0>ib?.5:.25)))}function d(Ia,Na){Ia=Ia._categories[Math.round(Na.x)];void 0===Ia&&(Ia="");Na.text=String(Ia)}function e(Ia,Na,ib){var Gb=Ia._categories[Math.round(Na.x)]||[];Ia=void 0===Gb[1]?"":String(Gb[1]);Gb=void 0===Gb[0]?"":String(Gb[0]);ib?Na.text=Gb+" - "+Ia:(Na.text=Ia,Na.text2=Gb)}function f(Ia,Na,ib,Gb,Hb){"never"===Hb?Hb="":"all"===Ia.showexponent&&
1E-6>Math.abs(Na.x/Ia.dtick)&&(Hb="hide");Na.text=x(Na.x,Ia,Hb,Gb)}function q(Ia,Na,ib,Gb,Hb){"radians"!==Ia.thetaunit||ib?Na.text=x(Na.x,Ia,Hb,Gb):(ib=Na.x/180,0===ib?Na.text="0":(ib=t(ib),100<=ib[1]?Na.text=x(S.deg2rad(Na.x),Ia,Hb,Gb):(Ia=0>Na.x,Na.text=1===ib[1]?1===ib[0]?"":ib[0]+"":["\x3csup\x3e",ib[0],"\x3c/sup\x3e\x3csub\x3e",ib[1],"\x3c/sub\x3e"].join(""),Ia&&(Na.text=ub+Na.text))))}function t(Ia){function Na(Hb,$b){return 1E-6>=Math.abs($b-0)?Hb:Na($b,Hb%$b)}var ib=function(Hb){for(var $b=
1;!(1E-6>=Math.abs(Math.round(Hb*$b)/$b-Hb));)$b*=10;return $b}(Ia);Ia*=ib;var Gb=Math.abs(Na(Ia,ib));return[Math.round(Ia/Gb),Math.round(ib/Gb)]}function w(Ia){return"SI"===Ia||"B"===Ia}function x(Ia,Na,ib,Gb){var Hb=0>Ia,$b=Na._tickround;ib=ib||Na.exponentformat||"B";var uc=Na._tickexponent,fd=Aa.getTickFormat(Na),fb=Na.separatethousands;Gb&&(uc={exponentformat:ib,minexponent:Na.minexponent,dtick:"none"===Na.showexponent?Na.dtick:Z(Ia)?Math.abs(Ia)||1:1,range:"none"===Na.showexponent?Na.range.map(Na.r2d):
[0,Ia||1]},h(uc),$b=(Number(uc._tickround)||0)+4,uc=uc._tickexponent,Na.hoverformat&&(fd=Na.hoverformat));if(fd)return Na._numFormat(fd)(Ia).replace(/-/g,ub);Gb=Math.pow(10,-$b)/2;"none"===ib&&(uc=0);Ia=Math.abs(Ia);if(Ia<Gb)Ia="0",Hb=!1;else{Ia+=Gb;uc&&(Ia*=Math.pow(10,-uc),$b+=uc);if(0===$b)Ia=String(Math.floor(Ia));else if(0>$b)for(Ia=String(Math.round(Ia)),Ia=Ia.substr(0,Ia.length+$b);0>$b;$b++)Ia+="0";else Ia=String(Ia),(Gb=Ia.indexOf(".")+1)&&(Ia=Ia.substr(0,Gb+$b).replace(/\.?0+$/,""));Ia=
S.numSeparate(Ia,Na._separators,fb)}uc&&"hide"!==ib&&(w(ib)&&(14<uc||-15>uc)&&(ib="power"),Na=0>uc?ub+-uc:"power"!==ib?"+"+uc:String(uc),"e"===ib||"E"===ib?Ia+=ib+Na:"power"===ib?Ia+="10\x3csup\x3e"+Na+"\x3c/sup\x3e":"B"===ib&&9===uc?Ia+="B":w(ib)&&(Ia+=Jc[uc/3+5]));return Hb?ub+Ia:Ia}function z(Ia,Na){var ib=[],Gb=function(Hb,$b){$b=Hb.xbnd[$b];null!==$b&&ib.push(S.extendFlat({},Hb,{x:$b}))};if(Na.length){for(Ia=0;Ia<Na.length;Ia++)Gb(Na[Ia],0);Gb(Na[Ia-1],1)}return ib}function B(Ia,Na){var ib=
[],Gb=Na.length&&Na[Na.length-1].x<Na[0].x,Hb=function(fd,fb){fb=fd.xbnd[fb];null!==fb&&ib.push(S.extendFlat({},fd,{x:fb}))};if(Ia.showdividers&&Na.length){for(Ia=0;Ia<Na.length;Ia++){var $b=Na[Ia];$b.text2!==uc&&Hb($b,Gb?1:0);var uc=$b.text2}Hb(Na[Ia-1],Gb?0:1)}return ib}function A(Ia,Na){if(Ia._selections[Na].size()){var ib=Infinity;var Gb=-Infinity;var Hb=Infinity;var $b=-Infinity;Ia._selections[Na].each(function(){var uc=K(this);uc=ja.bBox(uc.node().parentNode);ib=Math.min(ib,uc.top);Gb=Math.max(Gb,
uc.bottom);Hb=Math.min(Hb,uc.left);$b=Math.max($b,uc.right)})}else $b=Hb=Gb=ib=0;return{top:ib,bottom:Gb,left:Hb,right:$b,height:Gb-ib,width:$b-Hb}}function D(Ia){return void 0!==Ia.periodX?Ia.periodX:Ia.x}function C(Ia){var Na=Ia.ticklabelposition||"",ib=-1!==Na.indexOf("top"),Gb=-1!==Na.indexOf("left"),Hb=-1!==Na.indexOf("right"),$b=-1!==Na.indexOf("bottom");Na=-1!==Na.indexOf("inside");var uc=$b||Gb||ib||Hb;if(!uc&&!Na)return[0,0];var fd=Ia.side,fb=uc?(Ia.tickwidth||0)/2:0,Pb=3,fc=Ia.tickfont?
Ia.tickfont.size:12;if($b||ib)fb+=fc*La,Pb+=(Ia.linewidth||0)/2;if(Gb||Hb)fb+=(Ia.linewidth||0)/2,Pb+=3;Na&&"top"===fd&&(Pb-=fc*(1-La));if(Gb||ib)fb=-fb;if("bottom"===fd||"right"===fd)Pb=-Pb;return[uc?fb:0,Na?Pb:0]}function v(Ia){return[Ia.text,Ia.x,Ia.axInfo,Ia.font,Ia.fontSize,Ia.fontColor].join("_")}function y(Ia){var Na=Ia.title.font.size,ib=(Ia.title.text.match(fa.BR_TAG_ALL)||[]).length;return Ia.title.hasOwnProperty("standoff")?ib?Na*(La+ib*Ka):Na*La:ib?Na*(ib+1)*Ka:Na}function F(Ia,Na){Na=
Ia.l2p(Na);return 1<Na&&Na<Ia._length-1}function J(Ia,Na,ib,Gb){function Hb(fc){function Fc(rb){return"number"===typeof rb&&Math.abs(rb-Pb)<Pc}if(!fc.showline||!fc.linewidth)return!1;var Pc=Math.max((fc.linewidth+Na.zerolinewidth)/2,1);if(Fc(fc._mainLinePosition)||Fc(fc._mainMirrorPosition))return!0;fc=fc._linepositions||{};for(var Uc in fc)if(Fc(fc[Uc][0])||Fc(fc[Uc][1]))return!0}var $b=ib._mainAxis;if($b){var uc=Ia._fullLayout,fd=Na._id.charAt(0),fb=Aa.counterLetter(Na._id),Pb=Na._offset+(Math.abs(Gb[0])<
Math.abs(Gb[1])===("x"===fd)?0:Na._length);Gb=uc._plots[ib._mainSubplot];if(!(Gb.mainplotinfo||Gb).overlays.length)return Hb(ib,Pb);Ia=Aa.list(Ia,fb);for(ib=0;ib<Ia.length;ib++)if(fb=Ia[ib],fb._mainAxis===$b&&Hb(fb,Pb))return!0}}function K(Ia){Ia=Q.select(Ia);var Na=Ia.select(".text-math-group");return Na.empty()?Ia.select("text"):Na}function M(Ia){return Ia._id+".automargin"}function H(Ia,Na){for(var ib=0;ib<Na.length;ib++)-1===Ia.indexOf(Na[ib])&&Ia.push(Na[ib])}function O(Ia,Na){for(var ib=Na._rangebreaks.length,
Gb=0;Gb<ib;Gb++){var Hb=Na._rangebreaks[Gb];if(Ia>=Hb.min&&Ia<Hb.max)return Hb.max}return Ia}function I(Ia){return-1!==(Ia.ticklabelposition||"").indexOf("inside")}function L(Ia,Na){I(Ia._anchorAxis||{})&&Ia._hideCounterAxisInsideTickLabels&&Ia._hideCounterAxisInsideTickLabels(Na)}var Q=b("@plotly/d3"),Z=b("fast-isnumeric"),ba=b("../../plots/plots"),V=b("../../registry"),S=b("../../lib"),T=S.strTranslate,fa=b("../../lib/svg_text_utils"),W=b("../../components/titles"),aa=b("../../components/color"),
ja=b("../../components/drawing"),ma=b("./layout_attributes"),ia=b("./clean_ticks");G=b("../../constants/numerical");var ra=G.ONEMAXYEAR,wa=G.ONEAVGYEAR,pa=G.ONEMINYEAR,la=G.ONEMAXQUARTER,ka=G.ONEAVGQUARTER,na=G.ONEMINQUARTER,oa=G.ONEMAXMONTH,sa=G.ONEAVGMONTH,za=G.ONEMINMONTH,Ha=G.ONEWEEK,Wa=G.ONEDAY,Za=Wa/2,bb=G.ONEHOUR,sb=G.ONEMIN,hb=G.ONESEC,ub=G.MINUS_SIGN,pb=G.BADNUM,Ab={K:"zeroline"},tb={K:"gridline",L:"path"},vb={K:"tick",L:"path"},qb={K:"tick",L:"text"};G=b("../../constants/alignment");var zb=
G.MID_SHIFT,La=G.CAP_SHIFT,Ka=G.LINE_SPACING,ya=G.OPPOSITE_SIDE,Aa=N.exports={};Aa.setConvert=b("./set_convert");var Ja=b("./axis_autotype");N=b("./axis_ids");var Ta=N.idSort,$a=N.isLinked;Aa.id2name=N.id2name;Aa.name2id=N.name2id;Aa.cleanId=N.cleanId;Aa.list=N.list;Aa.listIds=N.listIds;Aa.getFromId=N.getFromId;Aa.getFromTrace=N.getFromTrace;b=b("./autorange");Aa.getAutoRange=b.getAutoRange;Aa.findExtremes=b.findExtremes;Aa.coerceRef=function(Ia,Na,ib,Gb,Hb,$b){var uc=Gb.charAt(Gb.length-1);ib=ib._fullLayout._subplots[uc+
"axis"];Gb+="ref";uc={};Hb||(Hb=ib[0]||("string"===typeof $b?$b:$b[0]));$b||($b=Hb);ib=ib.concat(ib.map(function(fd){return fd+" domain"}));uc[Gb]={valType:"enumerated",values:ib.concat($b?"string"===typeof $b?[$b]:$b:[]),dflt:Hb};return S.coerce(Ia,Na,uc,Gb)};Aa.getRefType=function(Ia){return void 0===Ia?Ia:"paper"===Ia?"paper":"pixel"===Ia?"pixel":/( domain)$/.test(Ia)?"domain":"range"};Aa.coercePosition=function(Ia,Na,ib,Gb,Hb,$b){"range"!==Aa.getRefType(Gb)?(Na=S.ensureNumber,ib=ib(Hb,$b)):(Na=
Aa.getFromId(Na,Gb),$b=Na.fraction2r($b),ib=ib(Hb,$b),Na=Na.cleanPos);Ia[Hb]=Na(ib)};Aa.cleanPosition=function(Ia,Na,ib){return("paper"===ib||"pixel"===ib?S.ensureNumber:Aa.getFromId(Na,ib).cleanPos)(Ia)};Aa.redrawComponents=function(Ia,Na){function ib(Hb,$b,uc,fd){Hb=V.getComponentMethod(Hb,$b);$b={};for(var fb=0;fb<Na.length;fb++)for(var Pb=Gb[Aa.id2name(Na[fb])][uc],fc=0;fc<Pb.length;fc++){var Fc=Pb[fc];if(!$b[Fc]&&(Hb(Ia,Fc),$b[Fc]=1,fd))return}}Na=Na?Na:Aa.listIds(Ia);var Gb=Ia._fullLayout;ib("annotations",
"drawOne","_annIndices");ib("shapes","drawOne","_shapeIndices");ib("images","draw","_imgIndices",!0)};var ab=Aa.getDataConversions=function(Ia,Na,ib,Gb){ib="x"===ib||"y"===ib||"z"===ib?ib:Gb;if(Array.isArray(ib)){if(Ia={type:Ja(Gb,void 0,{autotypenumbers:Ia._fullLayout.autotypenumbers}),_categories:[]},Aa.setConvert(Ia),"category"===Ia.type)for(Na=0;Na<Gb.length;Na++)Ia.d2c(Gb[Na])}else Ia=Aa.getFromTrace(Ia,Na,ib);return Ia?{d2c:Ia.d2c,c2d:Ia.c2d}:"ids"===ib?{d2c:k,c2d:k}:{d2c:n,c2d:n}};Aa.getDataToCoordFunc=
function(Ia,Na,ib,Gb){return ab(Ia,Na,ib,Gb).d2c};Aa.counterLetter=function(Ia){Ia=Ia.charAt(0);if("x"===Ia)return"y";if("y"===Ia)return"x"};Aa.minDtick=function(Ia,Na,ib,Gb){if(-1!==["log","category","multicategory"].indexOf(Ia.type)||!Gb)Ia._minDtick=0;else if(void 0===Ia._minDtick)Ia._minDtick=Na,Ia._forceTick0=ib;else if(Ia._minDtick)if(2E-6>(Ia._minDtick/Na+1E-6)%1&&2E-6>((ib-Ia._forceTick0)/Na%1+1.000001)%1)Ia._minDtick=Na,Ia._forceTick0=ib;else if(2E-6<(Na/Ia._minDtick+1E-6)%1||2E-6<((ib-Ia._forceTick0)/
Ia._minDtick%1+1.000001)%1)Ia._minDtick=0};Aa.saveRangeInitial=function(Ia,Na){Ia=Aa.list(Ia,"",!0);for(var ib=!1,Gb=0;Gb<Ia.length;Gb++){var Hb=Ia[Gb],$b=void 0===Hb._rangeInitial,uc=$b||!(Hb.range[0]===Hb._rangeInitial[0]&&Hb.range[1]===Hb._rangeInitial[1]);if($b&&!1===Hb.autorange||Na&&uc)Hb._rangeInitial=Hb.range.slice(),ib=!0}return ib};Aa.saveShowSpikeInitial=function(Ia,Na){for(var ib=Aa.list(Ia,"",!0),Gb=!1,Hb="on",$b=0;$b<ib.length;$b++){var uc=ib[$b],fd=void 0===uc._showSpikeInitial,fb=
fd||uc.showspikes!==uc._showspikes;if(fd||Na&&fb)uc._showSpikeInitial=uc.showspikes,Gb=!0;"on"!==Hb||uc.showspikes||(Hb="off")}Ia._fullLayout._cartesianSpikesEnabled=Hb;return Gb};Aa.autoBin=function(Ia,Na,ib,Gb,Hb,$b){var uc=S.aggNums(Math.min,null,Ia),fd=S.aggNums(Math.max,null,Ia);if("category"===Na.type||"multicategory"===Na.type)return{start:uc-.5,end:fd+.5,size:Math.max(1,Math.round($b)||1),_dataSpan:fd-uc};Hb||(Hb=Na.calendar);var fb="log"===Na.type?{type:"linear",range:[uc,fd]}:{type:Na.type,
range:S.simpleMap([uc,fd],Na.c2r,0,Hb),calendar:Hb};Aa.setConvert(fb);($b=$b&&ia.dtick($b,fb.type))?(fb.dtick=$b,fb.tick0=ia.tick0(void 0,fb.type,Hb)):(ib?Gb=(fd-uc)/ib:(ib=S.distinctVals(Ia),$b=Math.pow(10,Math.floor(Math.log(ib.minDiff)/Math.LN10)),ib=$b*S.roundUp(ib.minDiff/$b,[.9,1.9,4.9,9.9],!0),Gb=Math.max(ib,2*S.stdev(Ia)/Math.pow(Ia.length,Gb?.25:.4)),Z(Gb)||(Gb=1)),Aa.autoTicks(fb,Gb));Gb=fb.dtick;ib=Aa.tickIncrement(Aa.tickFirst(fb),Gb,"reverse",Hb);if("number"===typeof Gb)ib=m(ib,Ia,fb,
uc,fd),fb=1+Math.floor((fd-ib)/Gb),Ia=ib+fb*Gb;else{if("M"===fb.dtick.charAt(0))a:{fb=ib;Ia=S.findExactDates(Ia,Hb);if(.8<Ia.exactDays&&(ib=Number(Gb.substr(1)),fb=.8<Ia.exactYears&&0===ib%12?Aa.tickIncrement(fb,"M6","reverse")+1.5*Wa:.8<Ia.exactMonths?Aa.tickIncrement(fb,"M1","reverse")+15.5*Wa:fb-Za,Ia=Aa.tickIncrement(fb,Gb),Ia<=uc)){ib=Ia;break a}ib=fb}Ia=ib;for(fb=0;Ia<=fd;)Ia=Aa.tickIncrement(Ia,Gb,!1,Hb),fb++}return{start:Na.c2r(ib,0,Hb),end:Na.c2r(Ia,0,Hb),size:Gb,_dataSpan:fd-uc}};Aa.prepTicks=
function(Ia,Na){Na=S.simpleMap(Ia.range,Ia.r2l,void 0,void 0,Na);Ia._dtickInit=Ia.dtick;Ia._tick0Init=Ia.tick0;if("auto"===Ia.tickmode||!Ia.dtick){var ib=Ia.nticks;ib||("category"===Ia.type||"multicategory"===Ia.type?(ib=Ia.tickfont?S.bigFont(Ia.tickfont.size||12):15,ib=Ia._length/ib):(ib="y"===Ia._id.charAt(0)?40:80,ib=S.constrain(Ia._length/ib,4,9)+1),"radialaxis"===Ia._name&&(ib*=2));"array"===Ia.tickmode&&(ib*=100);Ia._roughDTick=Math.abs(Na[1]-Na[0])/ib;Aa.autoTicks(Ia,Ia._roughDTick);0<Ia._minDtick&&
Ia.dtick<2*Ia._minDtick&&(Ia.dtick=Ia._minDtick,Ia.tick0=Ia.l2r(Ia._forceTick0))}if("period"===Ia.ticklabelmode){Na=!(Z(Ia.dtick)||"M"!==Ia.dtick.charAt(0));if(ib=Aa.getTickFormat(Ia)){var Gb=Ia._dtickInit!==Ia.dtick;if(!/%[fLQsSMX]/.test(ib))if(/%[HI]/.test(ib)){var Hb=bb;Gb&&!Na&&Ia.dtick<bb&&(Ia.dtick=bb)}else/%p/.test(ib)?(Hb=Za,Gb&&!Na&&Ia.dtick<Za&&(Ia.dtick=Za)):/%[Aadejuwx]/.test(ib)?(Hb=Wa,Gb&&!Na&&Ia.dtick<Wa&&(Ia.dtick=Wa)):/%[UVW]/.test(ib)?(Hb=Ha,Gb&&!Na&&Ia.dtick<Ha&&(Ia.dtick=Ha)):
/%[Bbm]/.test(ib)?(Hb=sa,Gb&&(Na?1>+Ia.dtick.substring(1):Ia.dtick<za)&&(Ia.dtick="M1")):/%[q]/.test(ib)?(Hb=ka,Gb&&(Na?3>+Ia.dtick.substring(1):Ia.dtick<na)&&(Ia.dtick="M3")):/%[Yy]/.test(ib)&&(Hb=wa,Gb&&(Na?12>+Ia.dtick.substring(1):Ia.dtick<pa)&&(Ia.dtick="M12"))}(Na=!(Z(Ia.dtick)||"M"!==Ia.dtick.charAt(0)))&&Ia.tick0===Ia._dowTick0&&(Ia.tick0=Ia._rawTick0);Ia._definedDelta=Hb}Ia.tick0||(Ia.tick0="date"===Ia.type?"2000-01-01":0);"date"===Ia.type&&.1>Ia.dtick&&(Ia.dtick=.1);h(Ia)};Aa.calcTicks=
function(Ia,Na){Aa.prepTicks(Ia,Na);var ib=S.simpleMap(Ia.range,Ia.r2l,void 0,void 0,Na);if("array"===Ia.tickmode)return a(Ia);var Gb=p(ib),Hb=Gb[0],$b=Gb[1],uc=ib[1]<ib[0];Gb=Math.min(ib[0],ib[1]);var fd=Math.max(ib[0],ib[1]),fb="log"===Ia.type&&!(Z(Ia.dtick)||"L"===Ia.dtick.charAt(0)),Pb="period"===Ia.ticklabelmode;Ia._tmin=Aa.tickFirst(Ia,Na);if(Ia._tmin<Hb!==uc)return[];if("category"===Ia.type||"multicategory"===Ia.type)$b=uc?Math.max(-.5,$b):Math.min(Ia._categories.length-.5,$b);var fc=Ia._tmin;
Ia.rangebreaks&&Ia._tick0Init!==Ia.tick0&&(fc=O(fc,Ia),uc||(fc=Aa.tickIncrement(fc,Ia.dtick,!uc,Ia.calendar)));Pb&&(fc=Aa.tickIncrement(fc,Ia.dtick,!uc,Ia.calendar));var Fc=Math.max(1E3,Ia._length||0);Na=[];for(var Pc=null;uc?fc>=$b:fc<=$b;fc=Aa.tickIncrement(fc,Ia.dtick,uc,Ia.calendar)){if(Ia.rangebreaks&&!uc){if(fc<Hb)continue;if(Ia.maskBreaks(fc)===pb&&O(fc,Ia)>=fd)break}if(Na.length>Fc||fc===Pc)break;Pc=fc;var Uc=!1;fb&&fc!==(fc|0)&&(Uc=!0);Na.push({minor:Uc,value:fc})}if(Pb)for(Hb=Ia._definedDelta,
$b=0;$b<Na.length;$b++){fb=Na[$b].value;$b<Na.length-1?(Pb=$b,fc=$b+1):(Pb=0<$b?$b-1:$b,fc=$b);Pb=Math.abs(Na[fc].value-Na[Pb].value);Fc=Hb||Pb;fc=0;Fc>=pa?fc=Pb>=pa&&Pb<=ra?Pb:wa:Hb===ka&&Fc>=na?fc=Pb>=na&&Pb<=la?Pb:ka:Fc>=za?fc=Pb>=za&&Pb<=oa?Pb:sa:Hb===Ha&&Fc>=Ha?fc=Ha:Fc>=Wa?fc=Wa:Hb===Za&&Fc>=Za?fc=Za:Hb===bb&&Fc>=bb&&(fc=bb);if(fc>=Pb){fc=Pb;var rb=!0}Fc=fb+fc;if(Ia.rangebreaks&&0<fc){for(Uc=Pc=0;84>Uc;Uc++){var Jb=(Uc+.5)/84;Ia.maskBreaks(fb*(1-Jb)+Jb*Fc)!==pb&&Pc++}fc*=Pc/84;fc||(Na[$b].drop=
!0);rb&&Pb>Ha&&(fc=Pb)}if(0<fc||0===$b)Na[$b].periodX=fb+fc/2}if(Ia.rangebreaks)for(Hb="y"===Ia._id.charAt(0),$b=1,"auto"===Ia.tickmode&&($b=Ia.tickfont?Ia.tickfont.size:12),fb=NaN,rb=Na.length-1;-1<rb;rb--)Na[rb].drop?Na.splice(rb,1):(Na[rb].value=O(Na[rb].value,Ia),Pb=Ia.c2p(Na[rb].value),(Hb?fb>Pb-$b:fb<Pb+$b)?Na.splice(uc?rb+1:rb,1):fb=Pb);"angularaxis"===Ia._id&&360===Math.abs(ib[1]-ib[0])&&Na.pop();Ia._tmax=(Na[Na.length-1]||{}).value;Ia._prevDateHead="";Ia._inCalcTicks=!0;ib=[];for(rb=0;rb<
Na.length;rb++)uc=Aa.tickText(Ia,Na[rb].value,!1,Na[rb].minor),Hb=Na[rb].periodX,void 0!==Hb&&(uc.periodX=Hb,Hb>fd||Hb<Gb)&&(Hb>fd&&(uc.periodX=fd),Hb<Gb&&(uc.periodX=Gb),uc.text=" ",Ia._prevDateHead=""),ib.push(uc);Ia._inCalcTicks=!1;return ib};var Db=[2,5,10],Nb=[1,2,3,6,12],ec=[1,2,5,10,15,30],ob=[1,2,3,7,14],Cb=[-.046,0,.301,.477,.602,.699,.778,.845,.903,.954,1],Qb=[-.301,0,.301,.699,1],yc=[15,30,45,90,180];Aa.autoTicks=function(Ia,Na){function ib($b){return Math.pow($b,Math.floor(Math.log(Na)/
Math.LN10))}if("date"===Ia.type){Ia.tick0=S.dateTick0(Ia.calendar,0);var Gb=2*Na;if(Gb>wa)Na/=wa,Gb=ib(10),Ia.dtick="M"+12*g(Na,Gb,Db);else if(Gb>sa)Na/=sa,Ia.dtick="M"+g(Na,1,Nb);else if(Gb>Wa){Ia.dtick=g(Na,Wa,Ia._hasDayOfWeekBreaks?[1,2,7,14]:ob);Gb=Aa.getTickFormat(Ia);var Hb="period"===Ia.ticklabelmode;Hb&&(Ia._rawTick0=Ia.tick0);/%[uVW]/.test(Gb)?Ia.tick0=S.dateTick0(Ia.calendar,2):Ia.tick0=S.dateTick0(Ia.calendar,1);Hb&&(Ia._dowTick0=Ia.tick0)}else Gb>bb?Ia.dtick=g(Na,bb,Nb):Gb>sb?Ia.dtick=
g(Na,sb,ec):Gb>hb?Ia.dtick=g(Na,hb,ec):(Gb=ib(10),Ia.dtick=g(Na,Gb,Db))}else"log"===Ia.type?(Ia.tick0=0,Gb=S.simpleMap(Ia.range,Ia.r2l),.7<Na?Ia.dtick=Math.ceil(Na):1>Math.abs(Gb[1]-Gb[0])?(Na=Math.abs(Math.pow(10,Gb[1])-Math.pow(10,Gb[0]))/(1.5*Math.abs((Gb[1]-Gb[0])/Na)),Gb=ib(10),Ia.dtick="L"+g(Na,Gb,Db)):Ia.dtick=.3<Na?"D2":"D1"):"category"===Ia.type||"multicategory"===Ia.type?(Ia.tick0=0,Ia.dtick=Math.ceil(Math.max(Na,1))):"angularaxis"===Ia._id?(Ia.tick0=0,Ia.dtick=g(Na,1,yc)):(Ia.tick0=0,Gb=
ib(10),Ia.dtick=g(Na,Gb,Db));0===Ia.dtick&&(Ia.dtick=1);if(!Z(Ia.dtick)&&"string"!==typeof Ia.dtick)throw Gb=Ia.dtick,Ia.dtick=1,"ax.dtick error: "+String(Gb);};Aa.tickIncrement=function(Ia,Na,ib,Gb){var Hb=ib?-1:1;if(Z(Na))return S.increment(Ia,Hb*Na);var $b=Na.charAt(0),uc=Hb*Number(Na.substr(1));if("M"===$b)return S.incrementMonth(Ia,uc,Gb);if("L"===$b)return Math.log(Math.pow(10,Ia)+uc)/Math.LN10;if("D"===$b)return Na="D2"===Na?Qb:Cb,Ia+=.01*Hb,ib=S.roundUp(S.mod(Ia,1),Na,ib),Math.floor(Ia)+Math.log(Q.round(Math.pow(10,
ib),1))/Math.LN10;throw"unrecognized dtick "+String(Na);};Aa.tickFirst=function(Ia,Na){var ib=Ia.r2l||Number,Gb=S.simpleMap(Ia.range,ib,void 0,void 0,Na),Hb=(Na=Gb[1]<Gb[0])?Math.floor:Math.ceil;Gb=p(Gb)[0];var $b=Ia.dtick,uc=ib(Ia.tick0);if(Z($b)){Na=Hb((Gb-uc)/$b)*$b+uc;if("category"===Ia.type||"multicategory"===Ia.type)Na=S.constrain(Na,0,Ia._categories.length-1);return Na}ib=$b.charAt(0);var fd=Number($b.substr(1));if("M"===ib){Hb=0;for(var fb,Pb;10>Hb;){fb=Aa.tickIncrement(uc,$b,Na,Ia.calendar);
if(0>=(fb-Gb)*(uc-Gb))return Na?Math.min(uc,fb):Math.max(uc,fb);fb=(Gb-(uc+fb)/2)/(fb-uc);Pb=ib+(Math.abs(Math.round(fb))||1)*fd;uc=Aa.tickIncrement(uc,Pb,0>fb?!Na:Na,Ia.calendar);Hb++}S.error("tickFirst did not converge",Ia);return uc}if("L"===ib)return Math.log(Hb((Math.pow(10,Gb)-uc)/fd)*fd+uc)/Math.LN10;if("D"===ib)return Ia="D2"===$b?Qb:Cb,Ia=S.roundUp(S.mod(Gb,1),Ia,Na),Math.floor(Gb)+Math.log(Q.round(Math.pow(10,Ia),1))/Math.LN10;throw"unrecognized dtick "+String($b);};Aa.tickText=function(Ia,
Na,ib,Gb){function Hb(Fc){if(void 0===Fc)return!0;if(ib)return"none"===Fc;var Pc={first:Ia._tmin,last:Ia._tmax}[Fc];return"all"!==Fc&&Na!==Pc}var $b=r(Ia,Na),uc="array"===Ia.tickmode,fd=ib||uc,fb=Ia.type,Pb="category"===fb?Ia.d2l_noadd:Ia.d2l;if(uc&&Array.isArray(Ia.ticktext)){uc=S.simpleMap(Ia.range,Ia.r2l);var fc=(Math.abs(uc[1]-uc[0])-(Ia._lBreaks||0))/1E4;for(uc=0;uc<Ia.ticktext.length&&!(Math.abs(Na-Pb(Ia.tickvals[uc]))<fc);uc++);if(uc<Ia.ticktext.length)return $b.text=String(Ia.ticktext[uc]),
$b}Pb=ib?"never":"none"!==Ia.exponentformat&&Hb(Ia.showexponent)?"hide":"";"date"===fb?l(Ia,$b,ib,fd):"log"===fb?c(Ia,$b,ib,fd,Pb):"category"===fb?d(Ia,$b):"multicategory"===fb?e(Ia,$b,ib):"angularaxis"===Ia._id?q(Ia,$b,ib,fd,Pb):f(Ia,$b,ib,fd,Pb);Gb||(Ia.tickprefix&&!Hb(Ia.showtickprefix)&&($b.text=Ia.tickprefix+$b.text),Ia.ticksuffix&&!Hb(Ia.showticksuffix)&&($b.text+=Ia.ticksuffix));if("boundaries"===Ia.tickson||Ia.showdividers)Gb=function(Fc){var Pc=Ia.l2p(Fc);return 0<=Pc&&Pc<=Ia._length?Fc:
null},$b.xbnd=[Gb($b.x-.5),Gb($b.x+Ia.dtick-.5)];return $b};Aa.hoverLabelText=function(Ia,Na,ib){ib&&(Ia=S.extendFlat({},Ia,{hoverformat:ib}));var Gb=Array.isArray(Na)?Na[0]:Na;Na=Array.isArray(Na)?Na[1]:void 0;if(void 0!==Na&&Na!==Gb)return Aa.hoverLabelText(Ia,Gb,ib)+" - "+Aa.hoverLabelText(Ia,Na,ib);ib="log"===Ia.type&&0>=Gb;Ia=Aa.tickText(Ia,Ia.c2l(ib?-Gb:Gb),"hover").text;return ib?0===Gb?"0":ub+Ia:Ia};var Jc="f p n  m  k M G T".split(" ");Aa.getTickFormat=function(Ia){function Na(fb){return"string"!==
typeof fb?fb:Number(fb.replace("M",""))*sa}function ib(fb,Pb){var fc=["L","D"];if(typeof fb===typeof Pb){if("number"===typeof fb)return fb-Pb;var Fc=fc.indexOf(fb.charAt(0));fc=fc.indexOf(Pb.charAt(0));return Fc===fc?Number(fb.replace(/(L|D)/g,""))-Number(Pb.replace(/(L|D)/g,"")):Fc-fc}return"number"===typeof fb?1:-1}function Gb(fb,Pb,fc){fc=fc||function(Pc){return Pc};var Fc=Pb[0];Pb=Pb[1];return(!Fc&&"number"!==typeof Fc||fc(Fc)<=fc(fb))&&(!Pb&&"number"!==typeof Pb||fc(Pb)>=fc(fb))}function Hb(fb,
Pb){var fc=null===Pb[0],Fc=null===Pb[1],Pc=0<=ib(fb,Pb[0]);fb=0>=ib(fb,Pb[1]);return(fc||Pc)&&(Fc||fb)}var $b;if(Ia.tickformatstops&&0<Ia.tickformatstops.length)switch(Ia.type){case "date":case "linear":for($b=0;$b<Ia.tickformatstops.length;$b++){var uc=Ia.tickformatstops[$b];if(uc.enabled&&Gb(Ia.dtick,uc.dtickrange,Na)){var fd=uc;break}}break;case "log":for($b=0;$b<Ia.tickformatstops.length;$b++)if(uc=Ia.tickformatstops[$b],uc.enabled&&Hb(Ia.dtick,uc.dtickrange)){fd=uc;break}}return fd?fd.value:
Ia.tickformat};Aa.getSubplots=function(Ia,Na){Ia=Ia._fullLayout._subplots;Ia=Ia.cartesian.concat(Ia.gl2d||[]);Na=Na?Aa.findSubplotsWithAxis(Ia,Na):Ia;Na.sort(function(ib,Gb){ib=ib.substr(1).split("y");Gb=Gb.substr(1).split("y");return ib[0]===Gb[0]?+ib[1]-+Gb[1]:+ib[0]-+Gb[0]});return Na};Aa.findSubplotsWithAxis=function(Ia,Na){Na=new RegExp("x"===Na._id.charAt(0)?"^"+Na._id+"y":Na._id+"$");for(var ib=[],Gb=0;Gb<Ia.length;Gb++){var Hb=Ia[Gb];Na.test(Hb)&&ib.push(Hb)}return ib};Aa.makeClipPaths=function(Ia){var Na=
Ia._fullLayout;if(!Na._hasOnlyLargeSploms){var ib={_offset:0,_length:Na.width,_id:""},Gb={_offset:0,_length:Na.height,_id:""},Hb=Aa.list(Ia,"x",!0);Ia=Aa.list(Ia,"y",!0);var $b=[],uc,fd;for(uc=0;uc<Hb.length;uc++)for($b.push({x:Hb[uc],y:Gb}),fd=0;fd<Ia.length;fd++)0===uc&&$b.push({x:ib,y:Ia[fd]}),$b.push({x:Hb[uc],y:Ia[fd]});ib=Na._clips.selectAll(".axesclip").data($b,function(fb){return fb.x._id+fb.y._id});ib.enter().append("clipPath").classed("axesclip",!0).attr("id",function(fb){return"clip"+Na._uid+
fb.x._id+fb.y._id}).append("rect");ib.exit().remove();ib.each(function(fb){Q.select(this).select("rect").attr({x:fb.x._offset||0,y:fb.y._offset||0,width:fb.x._length||1,height:fb.y._length||1})})}};Aa.draw=function(Ia,Na,ib){var Gb=Ia._fullLayout;"redraw"===Na&&Gb._paper.selectAll("g.subplot").each(function(Hb){if(Hb=Gb._plots[Hb[0]]){var $b=Hb.xaxis,uc=Hb.yaxis;Hb.xaxislayer.selectAll("."+$b._id+"tick").remove();Hb.yaxislayer.selectAll("."+uc._id+"tick").remove();Hb.xaxislayer.selectAll("."+$b._id+
"tick2").remove();Hb.yaxislayer.selectAll("."+uc._id+"tick2").remove();Hb.xaxislayer.selectAll("."+$b._id+"divider").remove();Hb.yaxislayer.selectAll("."+uc._id+"divider").remove();Hb.gridlayer&&Hb.gridlayer.selectAll("path").remove();Hb.zerolinelayer&&Hb.zerolinelayer.selectAll("path").remove();Gb._infolayer.select(".g-"+$b._id+"title").remove();Gb._infolayer.select(".g-"+uc._id+"title").remove()}});Na=Na&&"redraw"!==Na?Na:Aa.listIds(Ia);return S.syncOrAsync(Na.map(function(Hb){return function(){if(Hb){var $b=
Aa.getFromId(Ia,Hb),uc=Aa.drawOne(Ia,$b,ib);$b._r=$b.range.slice();$b._rl=S.simpleMap($b._r,$b.r2l);return uc}}}))};Aa.drawOne=function(Ia,Na,ib){function Gb(Nc){Nc=uc+(Nc||"tick");rb[Nc]||(rb[Nc]=A(Na,Nc));return rb[Nc]}ib=ib||{};var Hb;Na.setScale();var $b=Ia._fullLayout,uc=Na._id,fd=uc.charAt(0),fb=Aa.counterLetter(uc),Pb=$b._plots[Na._mainSubplot];if(Pb){var fc=Pb[fd+"axislayer"],Fc=Na._mainLinePosition;Pb=Na._mainMirrorPosition;var Pc=Na._vals=Aa.calcTicks(Na),Uc=[Na.mirror,Fc,Pb].join("_");
for(Hb=0;Hb<Pc.length;Hb++)Pc[Hb].axInfo=Uc;Na._selections={};Na._tickAngles&&(Na._prevTickAngles=Na._tickAngles);Na._tickAngles={};Na._depth=null;var rb={};if(Na.visible){var Jb=Aa.makeTransTickFn(Na),sc=Aa.makeTransTickLabelFn(Na);Uc="inside"===Na.ticks;var nc="outside"===Na.ticks;if("boundaries"===Na.tickson){var vc=z(Na,Pc);Hb=Aa.clipEnds(Na,vc);Uc=Uc?Hb:vc}else Hb=Aa.clipEnds(Na,Pc),Uc=Uc&&"period"!==Na.ticklabelmode?Hb:Pc;vc=Na._gridVals=Hb;var Vb=B(Na,Pc);if(!$b._hasOnlyLargeSploms){var Wb=
Na._subplotsWith,yb={};for(Hb=0;Hb<Wb.length;Hb++){var ac=Wb[Hb];var Ub=$b._plots[ac];ac=Ub[fb+"axis"];var lc=ac._mainAxis._id;yb[lc]||(yb[lc]=1,lc="x"===fd?"M0,"+ac._offset+"v"+ac._length:"M"+ac._offset+",0h"+ac._length,Aa.drawGrid(Ia,Na,{vals:vc,counterAxis:ac,layer:Ub.gridlayer.select("."+uc),path:lc,transFn:Jb}),Aa.drawZeroLine(Ia,Na,{counterAxis:ac,layer:Ub.zerolinelayer,path:lc,transFn:Jb}))}}var tc=Aa.getTickSigns(Na);vc=[];if(Na.ticks){Hb=Aa.makeTickPath(Na,Fc,tc[2]);if(Na._anchorAxis&&Na.mirror&&
!0!==Na.mirror){var Rc=Aa.makeTickPath(Na,Pb,tc[3]);var kd=Hb+Rc}else Rc="",kd=Hb;if(Na.showdividers&&nc&&"boundaries"===Na.tickson){var Cd={};for(Hb=0;Hb<Vb.length;Hb++)Cd[Vb[Hb].x]=1;Pb=function(Nc){return Cd[Nc.x]?Rc:kd}}else Pb=kd;Aa.drawTicks(Ia,Na,{vals:Uc,layer:fc,path:Pb,transFn:Jb});"allticks"===Na.mirror&&(vc=Object.keys(Na._linepositions||{}))}for(Hb=0;Hb<vc.length;Hb++)ac=vc[Hb],Ub=$b._plots[ac],Pb=Na._linepositions[ac]||[],Pb=Aa.makeTickPath(Na,Pb[0],tc[0])+Aa.makeTickPath(Na,Pb[1],tc[1]),
Aa.drawTicks(Ia,Na,{vals:Uc,layer:Ub[fd+"axislayer"],path:Pb,transFn:Jb});Pb=[];Pb.push(function(){return Aa.drawLabels(Ia,Na,{vals:Pc,layer:fc,plotinfo:Ub,transFn:sc,labelFns:Aa.makeLabelFns(Na,Fc)})});if("multicategory"===Na.type){var Gd={x:2,y:10}[fd];Pb.push(function(){var Nc={x:"height",y:"width"}[fd];Nc=Gb()[Nc]+Gd+(Na._tickAngles[uc+"tick"]?Na.tickfont.size*Ka:0);for(var cd=Aa,Cc=cd.drawLabels,dd=[],Vc={},Sc=0;Sc<Pc.length;Sc++){var id=Pc[Sc];Vc[id.text2]?Vc[id.text2].push(id.x):Vc[id.text2]=
[id.x]}for(var Md in Vc)dd.push(r(Na,S.interp(Vc[Md],.5),Md));return Cc.call(cd,Ia,Na,{vals:dd,layer:fc,cls:uc+"tick2",repositionOnUpdate:!0,secondary:!0,transFn:Jb,labelFns:Aa.makeLabelFns(Na,Fc+Nc*tc[4])})});Pb.push(function(){Na._depth=tc[4]*(Gb("tick2")[Na.side]-Fc);var Nc=Aa.makeTickPath(Na,Fc,tc[4],Na._depth),cd=Na._id+"divider",Cc=fc.selectAll("path."+cd).data(Vb,v);Cc.exit().remove();Cc.enter().insert("path",":first-child").classed(cd,1).classed("crisp",1).call(aa.stroke,Na.dividercolor).style("stroke-width",
ja.crispRound(Ia,Na.dividerwidth,1)+"px");Cc.attr("transform",Jb).attr("d",Nc)})}else Na.title.hasOwnProperty("standoff")&&Pb.push(function(){Na._depth=tc[4]*(Gb()[Na.side]-Fc)});var Ad=V.getComponentMethod("rangeslider","isVisible")(Na);Pb.push(function(){var Nc=Na.side.charAt(0),cd=ya[Na.side].charAt(0),Cc=Aa.getPxPosition(Ia,Na),dd=nc?Na.ticklen:0,Vc;if(Na.automargin||Ad)if("multicategory"===Na.type)var Sc=Gb("tick2");else Sc=Gb(),"x"===fd&&"b"===Nc&&(Na._depth=Math.max(0<Sc.width?Sc.bottom-Cc:
0,dd));if(Na.automargin){var id={x:0,y:0,r:0,l:0,t:0,b:0};var Md=[0,1];"x"===fd?("b"===Nc?id[Nc]=Na._depth:(id[Nc]=Na._depth=Math.max(0<Sc.width?Cc-Sc.top:0,dd),Md.reverse()),0<Sc.width&&(Cc=Sc.right-(Na._offset+Na._length),0<Cc&&(id.xr=1,id.r=Cc),Sc=Na._offset-Sc.left,0<Sc&&(id.xl=0,id.l=Sc))):("l"===Nc?id[Nc]=Na._depth=Math.max(0<Sc.height?Cc-Sc.left:0,dd):(id[Nc]=Na._depth=Math.max(0<Sc.height?Sc.right-Cc:0,dd),Md.reverse()),0<Sc.height&&(Cc=Sc.bottom-(Na._offset+Na._length),0<Cc&&(id.yb=0,id.b=
Cc),Sc=Na._offset-Sc.top,0<Sc&&(id.yt=1,id.t=Sc)));id[fb]="free"===Na.anchor?Na.position:Na._anchorAxis.domain[Md[0]];Na.title.text!==$b._dfltTitle[fd]&&(id[Nc]+=y(Na)+(Na.title.standoff||0));if(Na.mirror&&"free"!==Na.anchor){var Sd={x:0,y:0,r:0,l:0,t:0,b:0};Sd[cd]=Na.linewidth;Na.mirror&&!0!==Na.mirror&&(Sd[cd]+=dd);if(!0===Na.mirror||"ticks"===Na.mirror)Sd[fb]=Na._anchorAxis.domain[Md[1]];else if("all"===Na.mirror||"allticks"===Na.mirror)Sd[fb]=[Na._counterDomainMin,Na._counterDomainMax][Md[1]]}}Ad&&
(Vc=V.getComponentMethod("rangeslider","autoMarginOpts")(Ia,Na));ba.autoMargin(Ia,M(Na),id);ba.autoMargin(Ia,M(Na)+".mirror",Sd);ba.autoMargin(Ia,Na._id+".rangeslider",Vc)});ib.skipTitle||Ad&&"bottom"===Na.side||Pb.push(function(){var Nc=Ia._fullLayout,cd=Na._id,Cc=cd.charAt(0),dd=Na.title.font.size;if(Na.title.hasOwnProperty("standoff"))var Vc=Na._depth+Na.title.standoff+y(Na);else{var Sc=I(Na);"multicategory"===Na.type?Vc=Na._depth:(Vc=1.5*dd,Sc&&(Vc=.5*dd,"outside"===Na.ticks&&(Vc+=Na.ticklen)),
Vc=10+Vc+(Na.linewidth?Na.linewidth-1:0));Sc||(Vc="x"===Cc?Vc+("top"===Na.side?dd*(Na.showticklabels?1:0):dd*(Na.showticklabels?1.5:.5)):Vc+("right"===Na.side?dd*(Na.showticklabels?1:.5):dd*(Na.showticklabels?.5:0)))}var id=Aa.getPxPosition(Ia,Na);if("x"===Cc)dd=Na._offset+Na._length/2,Sc="top"===Na.side?id-Vc:id+Vc;else{Sc=Na._offset+Na._length/2;dd="right"===Na.side?id+Vc:id-Vc;var Md={rotate:"-90",offset:0}}if("multicategory"!==Na.type){Vc=Na._selections[Na._id+"tick"];var Sd={selection:Vc,side:Na.side};
Vc&&Vc.node()&&Vc.node().parentNode&&(Vc=ja.getTranslate(Vc.node().parentNode),Sd.offsetLeft=Vc.x,Sd.offsetTop=Vc.y);Na.title.hasOwnProperty("standoff")&&(Sd.pad=0)}return W.draw(Ia,cd+"title",{propContainer:Na,propName:Na._name+".title.text",placeholder:Nc._dfltTitle[Cc],avoid:Sd,transform:Md,attributes:{x:dd,y:Sc,"text-anchor":"middle"}})});return S.syncOrAsync(Pb)}}};Aa.getTickSigns=function(Ia){var Na=Ia._id.charAt(0),ib=Ia.side==={x:"top",y:"right"}[Na]?1:-1;ib=[-1,1,ib,-ib];"inside"!==Ia.ticks===
("x"===Na)&&(ib=ib.map(function(Gb){return-Gb}));Ia.side&&ib.push({l:-1,t:-1,r:1,b:1}[Ia.side.charAt(0)]);return ib};Aa.makeTransTickFn=function(Ia){return"x"===Ia._id.charAt(0)?function(Na){return T(Ia._offset+Ia.l2p(Na.x),0)}:function(Na){return T(0,Ia._offset+Ia.l2p(Na.x))}};Aa.makeTransTickLabelFn=function(Ia){var Na=C(Ia),ib=Na[0],Gb=Na[1];return"x"===Ia._id.charAt(0)?function(Hb){return T(ib+Ia._offset+Ia.l2p(D(Hb)),Gb)}:function(Hb){return T(Gb,ib+Ia._offset+Ia.l2p(D(Hb)))}};Aa.makeTickPath=
function(Ia,Na,ib,Gb){Gb=void 0!==Gb?Gb:Ia.ticklen;var Hb=Ia._id.charAt(0);Ia=(Ia.linewidth||1)/2;return"x"===Hb?"M0,"+(Na+Ia*ib)+"v"+Gb*ib:"M"+(Na+Ia*ib)+",0h"+Gb*ib};Aa.makeLabelFns=function(Ia,Na,ib){var Gb=Ia.ticklabelposition||"",Hb=-1!==Gb.indexOf("top"),$b=-1!==Gb.indexOf("left"),uc=-1!==Gb.indexOf("right"),fd=-1!==Gb.indexOf("bottom")||$b||Hb||uc,fb=-1!==Gb.indexOf("inside"),Pb="inside"===Gb&&"inside"===Ia.ticks||!fb&&"outside"===Ia.ticks&&"boundaries"!==Ia.tickson;Hb=Gb=0;var fc=Pb?Ia.ticklen:
0;fb?fc*=-1:fd&&(fc=0);Pb&&(Gb+=fc,ib&&(Hb=S.deg2rad(ib),Gb=fc*Math.cos(Hb)+1,Hb=fc*Math.sin(Hb)));Ia.showticklabels&&(Pb||Ia.showline)&&(Gb+=.2*Ia.tickfont.size);Gb+=(Ia.linewidth||1)/2*(fb?-1:1);ib={labelStandoff:Gb,labelShift:Hb};var Fc=0;Pb=Ia.side;fc=Ia._id.charAt(0);var Pc=Ia.tickangle,Uc;if("x"===fc){var rb=(Uc=!fb&&"bottom"===Pb||fb&&"top"===Pb)?1:-1;fb&&(rb*=-1);var Jb=Hb*rb;var sc=Na+Gb*rb;var nc=Uc?1:-.2;90===Math.abs(Pc)&&(nc=fb?nc+zb:-90===Pc&&"bottom"===Pb?La:90===Pc&&"top"===Pb?zb:
.5,Fc=zb/2*(Pc/90));ib.xFn=function(vc){return vc.dx+Jb+Fc*vc.fontSize};ib.yFn=function(vc){return vc.dy+sc+vc.fontSize*nc};ib.anchorFn=function(vc,Vb){if(fd){if($b)return"end";if(uc)return"start"}return Z(Vb)&&0!==Vb&&180!==Vb?0>Vb*rb!==fb?"end":"start":"middle"};ib.heightFn=function(vc,Vb,Wb){return-60>Vb||60<Vb?-.5*Wb:"top"===Ia.side!==fb?-Wb:0}}else"y"===fc&&(rb=(Uc=!fb&&"left"===Pb||fb&&"right"===Pb)?1:-1,fb&&(rb*=-1),Jb=Gb,sc=Hb*rb,nc=0,fb||90!==Math.abs(Pc)||(nc=-90===Pc&&"left"===Pb||90===
Pc&&"right"===Pb?La:.5),fb&&(Gb=Z(Pc)?+Pc:0,0!==Gb&&(Gb=S.deg2rad(Gb),Fc=Math.abs(Math.sin(Gb))*La*rb,nc=0)),ib.xFn=function(vc){return vc.dx+Na-(Jb+vc.fontSize*nc)*rb+Fc*vc.fontSize},ib.yFn=function(vc){return vc.dy+sc+vc.fontSize*zb},ib.anchorFn=function(vc,Vb){return Z(Vb)&&90===Math.abs(Vb)?"middle":Uc?"end":"start"},ib.heightFn=function(vc,Vb,Wb){"right"===Ia.side&&(Vb*=-1);return-30>Vb?-Wb:30>Vb?-.5*Wb:0});return ib};Aa.drawTicks=function(Ia,Na,ib){ib=ib||{};var Gb=Na._id+"tick",Hb=ib.vals;
"period"===Na.ticklabelmode&&(Hb=Hb.slice(),Hb.shift());Hb=ib.layer.selectAll("path."+Gb).data(Na.ticks?Hb:[],v);Hb.exit().remove();Hb.enter().append("path").classed(Gb,1).classed("ticks",1).classed("crisp",!1!==ib.crisp).call(aa.stroke,Na.tickcolor).style("stroke-width",ja.crispRound(Ia,Na.tickwidth,1)+"px").attr("d",ib.path).style("display",null);L(Na,[vb]);Hb.attr("transform",ib.transFn)};Aa.drawGrid=function(Ia,Na,ib){ib=ib||{};var Gb=Na._id+"grid",Hb=ib.vals,$b=ib.counterAxis;if(!1===Na.showgrid)Hb=
[];else if($b&&Aa.shouldShowZeroLine(Ia,Na,$b)){$b="array"===Na.tickmode;for(var uc=0;uc<Hb.length;uc++){var fd=Hb[uc].x;if($b?!fd:Math.abs(fd)<Na.dtick/100)if(Hb=Hb.slice(0,uc).concat(Hb.slice(uc+1)),$b)uc--;else break}}Hb=ib.layer.selectAll("path."+Gb).data(Hb,v);Hb.exit().remove();Hb.enter().append("path").classed(Gb,1).classed("crisp",!1!==ib.crisp);Na._gw=ja.crispRound(Ia,Na.gridwidth,1);Hb.attr("transform",ib.transFn).attr("d",ib.path).call(aa.stroke,Na.gridcolor||"#ddd").style("stroke-width",
Na._gw+"px").style("display",null);L(Na,[tb]);"function"===typeof ib.path&&Hb.attr("d",ib.path)};Aa.drawZeroLine=function(Ia,Na,ib){ib=ib||ib;var Gb=Na._id+"zl",Hb=Aa.shouldShowZeroLine(Ia,Na,ib.counterAxis);Hb=ib.layer.selectAll("path."+Gb).data(Hb?[{x:0,id:Na._id}]:[]);Hb.exit().remove();Hb.enter().append("path").classed(Gb,1).classed("zl",1).classed("crisp",!1!==ib.crisp).each(function(){ib.layer.selectAll("path").sort(function($b,uc){return Ta($b.id,uc.id)})});Hb.attr("transform",ib.transFn).attr("d",
ib.path).call(aa.stroke,Na.zerolinecolor||aa.defaultLine).style("stroke-width",ja.crispRound(Ia,Na.zerolinewidth,Na._gw||1)+"px").style("display",null);L(Na,[Ab])};Aa.drawLabels=function(Ia,Na,ib){function Gb(nc,vc){nc.each(function(Vb){var Wb=Q.select(this),yb=Wb.select(".text-math-group"),ac=fc.anchorFn(Vb,vc),Ub=ib.transFn.call(Wb.node(),Vb)+(Z(vc)&&0!==+vc?" rotate("+vc+","+fc.xFn(Vb)+","+(fc.yFn(Vb)-Vb.fontSize/2)+")":""),lc=fa.lineCount(Wb),tc=Ka*Vb.fontSize;(Vb=fc.heightFn(Vb,Z(vc)?+vc:0,(lc-
1)*tc))&&(Ub+=T(0,Vb));yb.empty()?(yb=Wb.select("text"),yb.attr({transform:Ub,"text-anchor":ac}),yb.style("opacity",1),Na._adjustTickLabelsOverflow&&Na._adjustTickLabelsOverflow()):(ac=ja.bBox(yb.node()).width*{end:-.5,start:.5}[ac],yb.attr("transform",Ub+T(ac,0)))})}function Hb(){Gb(Uc,Fc);if(Pb.length&&"x"===fd&&!Z(Fc)&&("log"!==Na.type||"D"!==String(Na.dtick).charAt(0))){var nc=Jb=0,vc=[];Uc.each(function(lc){nc=Math.max(nc,lc.fontSize);lc=Na.l2p(lc.x);var tc=K(this);tc=ja.bBox(tc.node());vc.push({top:0,
bottom:10,height:10,left:lc-tc.width/2,right:lc+tc.width/2+2,width:tc.width+2})});if("boundaries"!==Na.tickson&&!Na.showdividers||ib.secondary){var Vb=Pb.length;Vb=Math.abs((Pb[Vb-1].x-Pb[0].x)*Na._m)/(Vb-1);var Wb=Na.ticklabelposition||"",yb=-1!==Wb.indexOf("top"),ac=-1!==Wb.indexOf("left"),Ub=-1!==Wb.indexOf("right");Wb=-1!==Wb.indexOf("bottom")||ac||yb||Ub?(Na.tickwidth||0)+6:0;yb=Vb<2.5*nc||"multicategory"===Na.type;for(Vb=0;Vb<vc.length-1;Vb++)if(S.bBoxIntersect(vc[Vb],vc[Vb+1],Wb)){Jb=yb?90:
30;break}}else for(Wb=2,Na.ticks&&(Wb+=Na.tickwidth/2),Vb=0;Vb<vc.length;Vb++)if(yb=Pb[Vb].xbnd,ac=vc[Vb],null!==yb[0]&&ac.left-Na.l2p(yb[0])<Wb||null!==yb[1]&&Na.l2p(yb[1])-ac.right<Wb){Jb=90;break}Jb&&Gb(Uc,Jb)}}ib=ib||{};var $b=Ia._fullLayout,uc=Na._id,fd=uc.charAt(0),fb=ib.cls||uc+"tick",Pb=ib.vals,fc=ib.labelFns,Fc=ib.secondary?0:Na.tickangle,Pc=(Na._prevTickAngles||{})[fb],Uc=ib.layer.selectAll("g."+fb).data(Na.showticklabels?Pb:[],v),rb=[];Uc.enter().append("g").classed(fb,1).append("text").attr("text-anchor",
"middle").each(function(nc){var vc=Q.select(this),Vb=Ia._promises.length;vc.call(fa.positionText,fc.xFn(nc),fc.yFn(nc)).call(ja.font,nc.font,nc.fontSize,nc.fontColor).text(nc.text).call(fa.convertToTspans,Ia);Ia._promises[Vb]?rb.push(Ia._promises.pop().then(function(){Gb(vc,Fc)})):Gb(vc,Fc)});L(Na,[qb]);Uc.exit().remove();ib.repositionOnUpdate&&Uc.each(function(nc){Q.select(this).select("text").call(fa.positionText,fc.xFn(nc),fc.yFn(nc))});Na._adjustTickLabelsOverflow=function(){var nc=Na.ticklabeloverflow;
if(nc&&"allow"!==nc){var vc=-1!==nc.indexOf("hide"),Vb="x"===Na._id.charAt(0),Wb=0,yb=Vb?Ia._fullLayout.width:Ia._fullLayout.height;-1!==nc.indexOf("domain")&&(nc=S.simpleMap(Na.range,Na.r2l),Wb=Na.l2p(nc[0])+Na._offset,yb=Na.l2p(nc[1])+Na._offset);var ac=Math.min(Wb,yb),Ub=Math.max(Wb,yb),lc=Na.side,tc=Infinity,Rc=-Infinity;Uc.each(function(Cd){var Gd=Q.select(this);if(Gd.select(".text-math-group").empty()){var Ad=ja.bBox(Gd.node()),Nc=0;Vb?Ad.right>Ub?Nc=1:Ad.left<ac&&(Nc=1):Ad.bottom>Ub?Nc=1:Ad.top+
(Na.tickangle?0:Cd.fontSize/4)<ac&&(Nc=1);Cd=Gd.select("text");Nc?vc&&Cd.style("opacity",0):(Cd.style("opacity",1),tc="bottom"===lc||"right"===lc?Math.min(tc,Vb?Ad.top:Ad.left):-Infinity,Rc="top"===lc||"left"===lc?Math.max(Rc,Vb?Ad.bottom:Ad.right):Infinity)}});for(var kd in $b._plots)if(Wb=$b._plots[kd],Na._id===Wb.xaxis._id||Na._id===Wb.yaxis._id)if(Wb=Vb?Wb.yaxis:Wb.xaxis)Wb["_visibleLabelMin_"+Na._id]=tc,Wb["_visibleLabelMax_"+Na._id]=Rc}};Na._hideCounterAxisInsideTickLabels=function(nc){var vc=
"x"===Na._id.charAt(0),Vb=[],Wb;for(Wb in $b._plots){var yb=$b._plots[Wb];Na._id!==yb.xaxis._id&&Na._id!==yb.yaxis._id||Vb.push(vc?yb.yaxis:yb.xaxis)}Vb.forEach(function(ac,Ub){ac&&I(ac)&&(nc||[Ab,tb,vb,qb]).forEach(function(lc){var tc="tick"===lc.K&&"text"===lc.L&&"period"===Na.ticklabelmode,Rc=$b._plots[Na._mainSubplot];(lc.K===Ab.K?Rc.zerolinelayer.selectAll("."+Na._id+"zl"):lc.K===tb.K?Rc.gridlayer.selectAll("."+Na._id):Rc[Na._id.charAt(0)+"axislayer"]).each(function(){var kd=Q.select(this);lc.L&&
(kd=kd.selectAll(lc.L));kd.each(function(Cd){Cd=Na.l2p(tc?D(Cd):Cd.x)+Na._offset;var Gd=Q.select(this);Cd<Na["_visibleLabelMax_"+ac._id]&&Cd>Na["_visibleLabelMin_"+ac._id]?Gd.style("display","none"):"tick"!==lc.K||Ub||Gd.style("display",null)})})})})};Gb(Uc,Pc+1?Pc:Fc);var Jb=null;Na._selections&&(Na._selections[fb]=Uc);uc=[function(){return rb.length&&Promise.all(rb)}];Na.automargin&&$b._redrawFromAutoMarginCount&&90===Pc?(Jb=90,uc.push(function(){Gb(Uc,Pc)})):uc.push(Hb);Na._tickAngles&&uc.push(function(){Na._tickAngles[fb]=
null===Jb?Z(Fc)?Fc:0:Jb});var sc=Na._anchorAxis;sc&&sc.autorange&&I(Na)&&!$a($b,Na._id)&&($b._insideTickLabelsAutorange||($b._insideTickLabelsAutorange={}),$b._insideTickLabelsAutorange[sc._name+".autorange"]=sc.autorange,uc.push(function(){Uc.each(function(nc,vc){nc=K(this);nc.select(".text-math-group").empty()&&(Na._vals[vc].bb=ja.bBox(nc.node()))})}));(uc=S.syncOrAsync(uc))&&uc.then&&Ia._promises.push(uc);return uc};Aa.getPxPosition=function(Ia,Na){Ia=Ia._fullLayout._size;var ib=Na._id.charAt(0),
Gb=Na.side,Hb;"free"!==Na.anchor?Hb=Na._anchorAxis:"x"===ib?Hb={_offset:Ia.t+(1-(Na.position||0))*Ia.h,_length:0}:"y"===ib&&(Hb={_offset:Ia.l+(Na.position||0)*Ia.w,_length:0});if("top"===Gb||"left"===Gb)return Hb._offset;if("bottom"===Gb||"right"===Gb)return Hb._offset+Hb._length};Aa.shouldShowZeroLine=function(Ia,Na,ib){var Gb=S.simpleMap(Na.range,Na.r2l),Hb;if(Hb=0>=Gb[0]*Gb[1]&&Na.zeroline&&("linear"===Na.type||"-"===Na.type)&&!(Na.rangebreaks&&Na.maskBreaks(0)===pb)){if(!(ib=F(Na,0)||!J(Ia,Na,
ib,Gb)))a:{Ia=Ia._fullData;ib=Na._mainSubplot;Na=Na._id.charAt(0);for(Gb=0;Gb<Ia.length;Gb++)if(Hb=Ia[Gb],!0===Hb.visible&&Hb.xaxis+Hb.yaxis===ib){if(V.traceIs(Hb,"bar-like")&&Hb.orientation==={x:"h",y:"v"}[Na]){ib=!0;break a}if(Hb.fill&&Hb.fill.charAt(Hb.fill.length-1)===Na){ib=!0;break a}}ib=!1}Hb=ib}return Hb};Aa.clipEnds=function(Ia,Na){return Na.filter(function(ib){return F(Ia,ib.x)})};Aa.allowAutoMargin=function(Ia){for(var Na=Aa.list(Ia,"",!0),ib=0;ib<Na.length;ib++){var Gb=Na[ib];Gb.automargin&&
(ba.allowAutoMargin(Ia,M(Gb)),Gb.mirror&&ba.allowAutoMargin(Ia,M(Gb)+".mirror"));V.getComponentMethod("rangeslider","isVisible")(Gb)&&ba.allowAutoMargin(Ia,Gb._id+".rangeslider")}};Aa.swap=function(Ia,Na){var ib=[],Gb,Hb;for(Gb=0;Gb<Na.length;Gb++){var $b=[],uc=Ia._fullData[Na[Gb]].xaxis,fd=Ia._fullData[Na[Gb]].yaxis;if(uc&&fd){for(Hb=0;Hb<ib.length;Hb++)-1===ib[Hb].x.indexOf(uc)&&-1===ib[Hb].y.indexOf(fd)||$b.push(Hb);if($b.length){var fb=ib[$b[0]];if(1<$b.length)for(Hb=1;Hb<$b.length;Hb++){var Pb=
ib[$b[Hb]];H(fb.x,Pb.x);H(fb.y,Pb.y)}H(fb.x,[uc]);H(fb.y,[fd])}else ib.push({x:[uc],y:[fd]})}}for(Na=0;Na<ib.length;Na++){var fc;Hb=Ia;$b=ib[Na].x;uc=ib[Na].y;fb=[];Pb=[];fd=Hb.layout;for(Gb=0;Gb<$b.length;Gb++)fb.push(Aa.getFromId(Hb,$b[Gb]));for(Gb=0;Gb<uc.length;Gb++)Pb.push(Aa.getFromId(Hb,uc[Gb]));var Fc=Object.keys(ma),Pc="anchor domain overlaying position side tickangle editType".split(" "),Uc=["linear","log"];for(Gb=0;Gb<Fc.length;Gb++){var rb=Fc[Gb],Jb=fb[0][rb],sc=Pb[0][rb],nc=!0,vc=!1,
Vb=!1;if("_"!==rb.charAt(0)&&"function"!==typeof Jb&&-1===Pc.indexOf(rb)){for(fc=1;fc<fb.length&&nc;fc++){var Wb=fb[fc][rb];"type"===rb&&-1!==Uc.indexOf(Jb)&&-1!==Uc.indexOf(Wb)&&Jb!==Wb?vc=!0:Wb!==Jb&&(nc=!1)}for(fc=1;fc<Pb.length&&nc;fc++)Jb=Pb[fc][rb],"type"===rb&&-1!==Uc.indexOf(sc)&&-1!==Uc.indexOf(Jb)&&sc!==Jb?Vb=!0:Pb[fc][rb]!==sc&&(nc=!1);if(nc){vc&&(fd[fb[0]._name].type="linear");Vb&&(fd[Pb[0]._name].type="linear");fc=fd;sc=fb;nc=Pb;Wb=Hb._fullLayout._dfltTitle;vc=S.nestedProperty;Vb=vc(fc[sc[0]._name],
rb).get();Jb=vc(fc[nc[0]._name],rb).get();"title"===rb&&(Vb&&Vb.text===Wb.x&&(Vb.text=Wb.y),Jb&&Jb.text===Wb.y&&(Jb.text=Wb.x));for(Wb=0;Wb<sc.length;Wb++)vc(fc,sc[Wb]._name+"."+rb).set(Jb);for(Wb=0;Wb<nc.length;Wb++)vc(fc,nc[Wb]._name+"."+rb).set(Vb)}}}for(Gb=0;Gb<Hb._fullLayout.annotations.length;Gb++)fb=Hb._fullLayout.annotations[Gb],-1!==$b.indexOf(fb.xref)&&-1!==uc.indexOf(fb.yref)&&S.swapAttrs(fd.annotations[Gb],["?"])}}},{"../../components/color":666,"../../components/drawing":688,"../../components/titles":764,
"../../constants/alignment":771,"../../constants/numerical":779,"../../lib":803,"../../lib/svg_text_utils":829,"../../plots/plots":917,"../../registry":931,"./autorange":853,"./axis_autotype":855,"./axis_ids":858,"./clean_ticks":860,"./layout_attributes":869,"./set_convert":875,"@plotly/d3":58,"fast-isnumeric":249}],855:[function(b,N,G){var p=b("fast-isnumeric");G=b("../../lib");var n=b("../../constants/numerical").BADNUM,k=G.isArrayOrTypedArray,m=G.isDateTime,a=G.cleanNumber,g=Math.round;N.exports=
function(h,r,l){var c=l.noMultiCategory;if(k(h)&&!h.length)return"-";var d;if(d=!c)d=h,d=k(d[0])&&k(d[1]);if(d)return"multicategory";if(c&&Array.isArray(h[0])){c=[];for(d=0;d<h.length;d++)if(k(h[d]))for(var e=0;e<h[d].length;e++)c.push(h[d][e]);h=c}c=h;d=c.length;e=Math.max(1,(d-1)/1E3);for(var f=0,q=0,t={},w=0;w<d;w+=e){var x=g(w);x=c[x];var z=String(x);t[z]||(t[z]=1,m(x,r)&&f++,p(x)&&q++)}if(f>2*q)return"date";r="strict"!==l.autotypenumbers;l=h;c=l.length;d=Math.max(1,(c-1)/1E3);f=e=0;q={};for(t=
0;t<c;t+=d)w=g(t),w=l[w],x=String(w),q[x]||(q[x]=1,x=typeof w,"boolean"===x?f++:(r?a(w)!==n:"number"===x)?e++:"string"===x&&f++);if(f>2*e)return"category";a:{l=h.length;for(c=0;c<l;c++)if(d=h[c],r?p(d):"number"===typeof d){h=!0;break a}h=!1}return h?"linear":"-"}},{"../../constants/numerical":779,"../../lib":803,"fast-isnumeric":249}],856:[function(b,N,G){function p(x,z,B){function A(F,J){return a.coerce(x,z,h.rangebreaks,F,J)}if(A("enabled")){var D=A("bounds");if(D&&2<=D.length){var C="",v,y;if(2===
D.length)for(v=0;2>v;v++)if(y=n(D[v])){C=q;break}C=A("pattern",C);if(C===q)for(v=0;2>v;v++)(y=n(D[v]))&&(z.bounds[v]=D[v]=y-1);if(C)for(v=0;2>v;v++)switch(y=D[v],C){case q:if(!k(y)){z.enabled=!1;return}y=+y;if(y!==Math.floor(y)||0>y||7<=y){z.enabled=!1;return}z.bounds[v]=D[v]=y;break;case t:if(!k(y)){z.enabled=!1;return}y=+y;if(0>y||24<y){z.enabled=!1;return}z.bounds[v]=D[v]=y}!1===B.autorange&&(B=B.range,B[0]<B[1]?D[0]<B[0]&&D[1]>B[1]&&(z.enabled=!1):D[0]>B[0]&&D[1]<B[1]&&(z.enabled=!1))}else(D=
A("values"))&&D.length?A("dvalue"):z.enabled=!1}}function n(x){if("string"===typeof x)return w[x.substr(0,3).toLowerCase()]}var k=b("fast-isnumeric"),m=b("../../registry"),a=b("../../lib"),g=b("../array_container_defaults"),h=b("./layout_attributes"),r=b("./tick_value_defaults"),l=b("./tick_mark_defaults"),c=b("./tick_label_defaults"),d=b("./category_order_defaults"),e=b("./line_grid_defaults"),f=b("./set_convert"),q=b("./constants").WEEKDAY_PATTERN,t=b("./constants").HOUR_PATTERN;N.exports=function(x,
z,B,A,D){var C=A.letter,v=A.font||{},y=A.splomStash||{},F=B("visible",!A.visibleDflt),J=z._template||{};J=z.type||J.type||"-";var K;"date"===J&&(m.getComponentMethod("calendars","handleDefaults")(x,z,"calendar",A.calendar),A.noTicklabelmode||(K=B("ticklabelmode")));var M="";A.noTicklabelposition&&"multicategory"!==J||(M=a.coerce(x,z,{ticklabelposition:{valType:"enumerated",dflt:"outside",values:"period"===K?["outside","inside"]:"x"===C?"outside;inside;outside left;inside left;outside right;inside right".split(";"):
"outside;inside;outside top;inside top;outside bottom;inside bottom".split(";")}},"ticklabelposition"));A.noTicklabeloverflow||B("ticklabeloverflow",-1!==M.indexOf("inside")?"hide past domain":"category"===J||"multicategory"===J?"allow":"hide past div");f(z,D);(K=!z.isValidRange(x.range))&&A.reverseDflt&&(K="reversed");!B("autorange",K)||"linear"!==J&&"-"!==J||B("rangemode");B("range");z.cleanRange();d(x,z,B,A);"category"===J||A.noHover||B("hoverformat");K=B("color");M=K!==h.color.dflt?K:v.color;
C=y.label||D._dfltTitle[C];c(x,z,B,J,A,{pass:1});if(!F)return z;B("title.text",C);a.coerceFont(B,"title.font",{family:v.family,size:a.bigFont(v.size),color:M});r(x,z,B,J);c(x,z,B,J,A,{pass:2});l(x,z,B,A);e(x,z,B,{dfltColor:K,bgColor:A.bgColor,showGrid:A.showGrid,attributes:h});(z.showline||z.ticks)&&B("mirror");A.automargin&&B("automargin");v="multicategory"===J;if(!A.noTickson&&("category"===J||v)&&(z.ticks||z.showgrid)){var H;v&&(H="boundaries");"boundaries"===B("tickson",H)&&delete z.ticklabelposition}v&&
B("showdividers")&&(B("dividercolor"),B("dividerwidth"));if("date"===J)if(g(x,z,{name:"rangebreaks",inclusionAttr:"enabled",handleItemDefaults:p}),z.rangebreaks.length){for(x=0;x<z.rangebreaks.length;x++)if(z.rangebreaks[x].pattern===q){z._hasDayOfWeekBreaks=!0;break}f(z,D);if(D._has("scattergl")||D._has("splom"))for(D=0;D<A.data.length;D++)if(x=A.data[D],"scattergl"===x.type||"splom"===x.type)x.visible=!1,a.warn(x.type+" traces do not work on axes with rangebreaks. Setting trace "+x.index+" to `visible: false`.")}else delete z.rangebreaks;
return z};var w={sun:1,mon:2,tue:3,wed:4,thu:5,fri:6,sat:7}},{"../../lib":803,"../../registry":931,"../array_container_defaults":849,"./category_order_defaults":859,"./constants":861,"./layout_attributes":869,"./line_grid_defaults":871,"./set_convert":875,"./tick_label_defaults":876,"./tick_mark_defaults":877,"./tick_value_defaults":878,"fast-isnumeric":249}],857:[function(b,N,G){function p(a,g){return["Sets the "+a+" formatting rule"+(g?"for `"+g+"` ":""),"using d3 formatting mini-languages","which are very similar to those in Python. For numbers, see: "+
k+"."].join(" ")}function n(a,g){return p(a,g)+[" And for dates see: "+m+".","We add two items to d3's date formatter: *%h* for half of the year as a decimal number as well as *%{n}f* for fractional seconds with n digits. For example, *2016-10-13 09:15:23.456* with tickformat *%H~%M~%S.%2f* would display *09~15~23.46*"].join(" ")}b=b("../../constants/docs");var k=b.FORMAT_LINK,m=b.DATE_FORMAT_LINK;N.exports={axisHoverFormat:function(a,g){return{valType:"string",dflt:"",editType:"none",description:(g?
p:n)("hover text",a)+["By default the values are formatted using "+(g?"generic number format":"`"+a+"axis.hoverformat`")+"."].join(" ")}},descriptionOnlyNumbers:p,descriptionWithDates:n}},{"../../constants/docs":774}],858:[function(b,N,G){function p(m,a){if(a&&a.length)for(var g=0;g<a.length;g++)if(a[g][m])return!0;return!1}var n=b("../../registry"),k=b("./constants");G.id2name=function(m){if("string"===typeof m&&m.match(k.AX_ID_PATTERN)){var a=m.split(" ")[0].substr(1);"1"===a&&(a="");return m.charAt(0)+
"axis"+a}};G.name2id=function(m){if(m.match(k.AX_NAME_PATTERN)){var a=m.substr(5);"1"===a&&(a="");return m.charAt(0)+a}};G.cleanId=function(m,a,g){var h=/( domain)$/.test(m);if(!("string"!==typeof m||!m.match(k.AX_ID_PATTERN)||a&&m.charAt(0)!==a||h&&!g))return a=m.split(" ")[0].substr(1).replace(/^0+/,""),"1"===a&&(a=""),m.charAt(0)+a+(h&&g?" domain":"")};G.list=function(m,a,g){var h=m._fullLayout;if(!h)return[];var r=G.listIds(m,a);m=Array(r.length);var l;for(l=0;l<r.length;l++){var c=r[l];m[l]=
h[c.charAt(0)+"axis"+c.substr(1)]}if(!g)for(g=h._subplots.gl3d||[],l=0;l<g.length;l++)r=h[g[l]],a?m.push(r[a+"axis"]):m.push(r.xaxis,r.yaxis,r.zaxis);return m};G.listIds=function(m,a){m=m._fullLayout;if(!m)return[];m=m._subplots;return a?m[a+"axis"]:m.xaxis.concat(m.yaxis)};G.getFromId=function(m,a,g){m=m._fullLayout;a=void 0===a||"string"!==typeof a?a:a.replace(" domain","");"x"===g?a=a.replace(/y[0-9]*/,""):"y"===g&&(a=a.replace(/x[0-9]*/,""));return m[G.id2name(a)]};G.getFromTrace=function(m,a,
g){var h=m._fullLayout,r=null;n.traceIs(a,"gl3d")?(m=a.scene,"scene"===m.substr(0,5)&&(r=h[m][g+"axis"])):r=G.getFromId(m,a[g+"axis"]||g);return r};G.idSort=function(m,a){var g=m.charAt(0),h=a.charAt(0);return g!==h?g>h?1:-1:+(m.substr(1)||1)-+(a.substr(1)||1)};G.ref2id=function(m){return/^[xyz]/.test(m)?m.split(" ")[0]:!1};G.isLinked=function(m,a){return p(a,m._axisMatchGroups)||p(a,m._axisConstraintGroups)}},{"../../registry":931,"./constants":861}],859:[function(b,N,G){N.exports=function(p,n,k,
m){if("category"===n.type){p=p.categoryarray;p=Array.isArray(p)&&0<p.length;var a;p&&(a="array");a=k("categoryorder",a);var g;"array"===a&&(g=k("categoryarray"));p||"array"!==a||(a=n.categoryorder="trace");if("trace"===a)n._initialCategories=[];else if("array"===a)n._initialCategories=g.slice();else{k=m.dataAttr||n._id.charAt(0);g={};var h;if(m.axData)p=m.axData;else for(p=[],h=0;h<m.data.length;h++){var r=m.data[h];r[k+"axis"]===n._id&&p.push(r)}for(h=0;h<p.length;h++)for(r=p[h][k],m=0;m<r.length;m++){var l=
r[m];null!==l&&void 0!==l&&(g[l]=1)}g=Object.keys(g).sort();"category ascending"===a?n._initialCategories=g:"category descending"===a&&(n._initialCategories=g.reverse())}}}},{}],860:[function(b,N,G){var p=b("fast-isnumeric"),n=b("../../lib");b=b("../../constants/numerical");var k=b.ONEDAY,m=b.ONEWEEK;G.dtick=function(a,g){var h="log"===g,r="date"===g,l="category"===g;g=r?k:1;if(!a)return g;if(p(a))return a=Number(a),0>=a?g:l?Math.max(1,Math.round(a)):r?Math.max(.1,a):a;if("string"!==typeof a||!r&&
!h)return g;l=a.charAt(0);var c=a.substr(1);c=p(c)?Number(c):0;return 0>=c||!(r&&"M"===l&&c===Math.round(c)||h&&"L"===l||h&&"D"===l&&(1===c||2===c))?g:a};G.tick0=function(a,g,h,r){if("date"===g)return n.cleanDate(a,n.dateTick0(h,0===r%m?1:0));if("D1"!==r&&"D2"!==r)return p(a)?Number(a):0}},{"../../constants/numerical":779,"../../lib":803,"fast-isnumeric":249}],861:[function(b,N,G){b=b("../../lib/regex").counter;N.exports={idRegex:{x:b("x","( domain)?"),y:b("y","( domain)?")},attrRegex:b("[xy]axis"),
xAxisMatch:b("xaxis"),yAxisMatch:b("yaxis"),AX_ID_PATTERN:/^[xyz][0-9]*( domain)?$/,AX_NAME_PATTERN:/^[xyz]axis[0-9]*$/,SUBPLOT_PATTERN:/^x([0-9]*)y([0-9]*)$/,HOUR_PATTERN:"hour",WEEKDAY_PATTERN:"day of week",MINDRAG:8,MINSELECT:12,MINZOOM:20,DRAGGERSIZE:20,BENDPX:1.5,REDRAWDELAY:50,SELECTDELAY:100,SELECTID:"-select",DFLTRANGEX:[-1,6],DFLTRANGEY:[-1,4],traceLayerClasses:"imagelayer heatmaplayer contourcarpetlayer contourlayer funnellayer waterfalllayer barlayer carpetlayer violinlayer boxlayer ohlclayer scattercarpetlayer scatterlayer".split(" "),
clipOnAxisFalseQuery:[".scatterlayer",".barlayer",".funnellayer",".waterfalllayer"],layerValue2layerClass:{"above traces":"above","below traces":"below"}}},{"../../lib/regex":820}],862:[function(b,N,G){function p(t,w,x){var z=x.axIds,B=x.layoutOut,A=x.hasImage;x=B._axisConstraintGroups;var D=B._axisMatchGroups,C=w._id,v=C.charAt(0),y=((B._splomAxes||{})[v]||{})[C]||{};C=w._id;v="x"===C.charAt(0);w._matchGroup=null;w._constraintGroup=null;h.coerce(t,w,c,"constrain",A?"domain":"range");h.coerce(t,w,
{constraintoward:{valType:"enumerated",values:v?["left","center","right"]:["bottom","middle","top"],dflt:v?"center":"middle"}},"constraintoward");var F=w.type,J,K=[];for(J=0;J<z.length;J++){var M=z[J];M!==C&&B[l(M)].type===F&&K.push(M)}if(F=k(x,C)){var H=[];for(J=0;J<K.length;J++)M=K[J],F[M]||H.push(M);K=H}J=K.length;var O,I;J&&(t.matches||y.matches)&&(O=h.coerce(t,w,{matches:{valType:"enumerated",values:K,dflt:-1!==K.indexOf(y.matches)?y.matches:void 0}},"matches"));A=A&&!v?w.anchor:void 0;J&&!O&&
(t.scaleanchor||A)&&(I=h.coerce(t,w,{scaleanchor:{valType:"enumerated",values:K}},"scaleanchor",A));O?(w._matchGroup=m(D,C,O,1),D=B[l(O)],B=n(B,w)/n(B,D),v!==("x"===O.charAt(0))&&(B=(v?"x":"y")+B),m(x,C,O,B)):t.matches&&-1!==z.indexOf(t.matches)&&h.warn("ignored "+w._name+'.matches: "'+t.matches+'" to avoid an infinite loop');I?(t=h.coerce(t,w,c,"scaleratio",void 0),t||(t=w.scaleratio=1),m(x,C,I,t)):t.scaleanchor&&-1!==z.indexOf(t.scaleanchor)&&h.warn("ignored "+w._name+'.scaleanchor: "'+t.scaleanchor+
'" to avoid either an infinite loop and possibly inconsistent scaleratios, or because this axis declares a *matches* constraint.')}function n(t,w){var x=w.domain;x||(x=t[l(w.overlaying)].domain);return x[1]-x[0]}function k(t,w){for(var x=0;x<t.length;x++)if(t[x][w])return t[x];return null}function m(t,w,x,z){var B,A=k(t,w);if(null===A){A={};A[w]=1;var D=t.length;t.push(A)}else D=t.indexOf(A);w=Object.keys(A);for(B=0;B<t.length;B++){var C=t[B];if(B!==D&&C[x]){var v=C[x];for(B=0;B<w.length;B++)x=w[B],
C[x]=a(v,a(z,A[x]));t.splice(D,1);return}}if(1!==z)for(B=0;B<w.length;B++)t=w[B],A[t]=a(z,A[t]);A[x]=1}function a(t,w){var x="",z="";if("string"===typeof t){x=t.match(/^[xy]*/)[0];var B=x.length;t=+t.substr(B)}if("string"===typeof w){z=w.match(/^[xy]*/)[0];var A=z.length;w=+w.substr(A)}var D=t*w;return B||A?B&&A&&x.charAt(0)!==z.charAt(0)?B===A?D:(B>A?x.substr(A):z.substr(B))+D:x+z+t*w:D}function g(t,w){var x=t._inputDomain,z=x[0]+(x[1]-x[0])*q[t.constraintoward];t.domain=t._input.domain=[z+(x[0]-
z)/w,z+(x[1]-z)/w];t.setScale()}var h=b("../../lib"),r=b("./autorange"),l=b("./axis_ids").id2name,c=b("./layout_attributes"),d=b("./scale_zoom"),e=b("./set_convert"),f=b("../../constants/numerical").ALMOST_EQUAL,q=b("../../constants/alignment").FROM_BL;G.handleDefaults=function(t,w,x){function z(Z,ba){for(v=0;v<Z.length;v++)for(y in M=Z[v],M)w[l(y)][ba]=M}function B(){L=K[I];"rangebreaks"===I&&(O=K._hasDayOfWeekBreaks)}var A=x.axIds,D=x.axHasImage,C=w._axisConstraintGroups=[];x=w._axisMatchGroups=
[];var v,y;for(v=0;v<A.length;v++){var F=l(A[v]);var J=t[F];var K=w[F];p(J,K,{axIds:A,layoutOut:w,hasImage:D[F]})}z(x,"_matchGroup");for(v=0;v<C.length;v++){var M=C[v];for(y in M)if(K=w[l(y)],K.fixedrange){for(var H in M)F=l(H),!1===(t[F]||{}).fixedrange&&h.warn("fixedrange was specified as false for axis "+F+" but was overridden because another axis in its constraint group has fixedrange true"),w[F].fixedrange=!0;break}}for(v=0;v<C.length;){M=C[v];for(y in M){K=w[l(y)];K._matchGroup&&Object.keys(K._matchGroup).length===
Object.keys(M).length&&(C.splice(v,1),v--);break}v++}z(C,"_constraintGroup");H="constrain range autorange rangemode rangebreaks categoryorder categoryarray".split(" ");var O=A=!1;for(v=0;v<x.length;v++)for(M=x[v],C=0;C<H.length;C++){var I=H[C];var L=null;for(y in M)if(F=l(y),J=t[F],K=w[F],I in K){if(!K.matches){var Q=K;if(I in J){B();break}}null===L&&I in J&&B()}"range"===I&&L&&(A=!0);"autorange"===I&&null===L&&A&&(L=!1);null===L&&I in Q&&(L=Q[I]);if(null!==L)for(y in M)K=w[l(y)],K[I]="range"===I?
L.slice():L,"rangebreaks"===I&&(K._hasDayOfWeekBreaks=O,e(K,w))}};G.enforce=function(t){var w=t._fullLayout,x=w._axisConstraintGroups||[],z;for(z=0;z<x.length;z++){var B=x[z];var A=w._size;A=A.h/A.w;for(var D={},C=Object.keys(B),v=0;v<C.length;v++){var y=C[v];var F=B[y];if("string"===typeof F){var J=F.match(/^[xy]*/)[0];var K=J.length;F=+F.substr(K);J="y"===J.charAt(0)?A:1/A;for(var M=0;M<K;M++)F*=J}D[y]=F}K=D;D=Object.keys(K);M=Infinity;var H=0;C=Infinity;v={};y={};var O=!1;for(B=0;B<D.length;B++)J=
D[B],y[J]=A=w[l(J)],A._inputDomain?A.domain=A._inputDomain.slice():A._inputDomain=A.domain.slice(),A._inputRange||(A._inputRange=A.range.slice()),A.setScale(),v[J]=F=Math.abs(A._m)/K[J],M=Math.min(M,F),"domain"!==A.constrain&&A._constraintShrinkable||(C=Math.min(C,F)),delete A._constraintShrinkable,H=Math.max(H,F),"domain"===A.constrain&&(O=!0);if(!(M>f*H)||O)for(B=0;B<D.length;B++)if(J=D[B],F=v[J],A=y[J],K=A.constrain,F!==C||"domain"===K)if(F/=C,"range"===K)d(A,F);else if(K=A._inputDomain,J=(A.domain[1]-
A.domain[0])/(K[1]-K[0]),M=(A.r2l(A.range[1])-A.r2l(A.range[0]))/(A.r2l(A._inputRange[1])-A.r2l(A._inputRange[0])),F/=J,1>F*M)A.domain=A._input.domain=K.slice(),d(A,F);else{1>M&&(A.range=A._input.range=A._inputRange.slice(),F*=M);if(A.autorange){K=A.r2l(A.range[0]);J=A.r2l(A.range[1]);var I=(K+J)/2;H=M=I;O=Math.abs(J-I);var L=I-O*F*1.0001;I+=O*F*1.0001;var Q=r.makePadFn(w,A,0),Z=r.makePadFn(w,A,1);g(A,F);var ba=Math.abs(A._m),V=r.concatExtremes(t,A),S=V.min;V=V.max;var T;for(T=0;T<S.length;T++){var fa=
S[T].val-Q(S[T])/ba;fa>L&&fa<M&&(M=fa)}for(T=0;T<V.length;T++)fa=V[T].val+Z(V[T])/ba,fa<I&&fa>H&&(H=fa);F/=(H-M)/(2*O);M=A.l2r(M);H=A.l2r(H);A.range=A._input.range=K<J?[M,H]:[H,M]}g(A,F)}}};G.getAxisGroup=function(t,w){t=t._axisMatchGroups;for(var x=0;x<t.length;x++)if(t[x][w])return"g"+x;return w};G.clean=function(t,w){if(w._inputDomain){var x=!1,z=w._id;t=t._fullLayout._axisConstraintGroups;for(var B=0;B<t.length;B++)if(t[B][z]){x=!0;break}x&&"domain"===w.constrain||(w._input.domain=w.domain=w._inputDomain,
delete w._inputDomain)}}},{"../../constants/alignment":771,"../../constants/numerical":779,"../../lib":803,"./autorange":853,"./axis_ids":858,"./layout_attributes":869,"./scale_zoom":873,"./set_convert":875}],863:[function(b,N,G){function p(pa,la,ka,na){la=B.ensureSingle(pa.draglayer,la,ka,function(oa){oa.classed("drag",!0).style({fill:"transparent","stroke-width":0}).attr("data-subplot",pa.id)});la.call(O,na);return la.node()}function n(pa,la,ka,na,oa,sa,za){pa=p(pa,"rect",la,ka);z.select(pa).call(K.setRect,
na,oa,sa,za);return pa}function k(pa,la){for(var ka=0;ka<pa.length;ka++)if(!pa[ka].fixedrange)return la;return""}function m(pa,la){var ka=pa.range[la];la=Math.abs(ka-pa.range[1-la]);if("date"===pa.type)return ka;if("log"===pa.type)return pa=Math.ceil(Math.max(0,-Math.log(la)/Math.LN10))+3,A("."+pa+"g")(Math.pow(10,ka));pa=Math.floor(Math.log(Math.abs(ka))/Math.LN10)-Math.floor(Math.log(la)/Math.LN10)+4;return A("."+String(pa)+"g")(ka)}function a(pa,la,ka,na,oa){for(var sa=0;sa<pa.length;sa++){var za=
pa[sa];if(!za.fixedrange)if(za.rangebreaks){var Ha="y"===za._id.charAt(0),Wa=Ha?1-ka:ka;na[za._name+".range[0]"]=za.l2r(za.p2l((Ha?1-la:la)*za._length));na[za._name+".range[1]"]=za.l2r(za.p2l(Wa*za._length))}else Ha=za._rl[0],Wa=za._rl[1]-Ha,na[za._name+".range[0]"]=za.l2r(Ha+Wa*la),na[za._name+".range[1]"]=za.l2r(Ha+Wa*ka)}oa&&oa.length&&(pa=(la+(1-ka))/2,a(oa,pa,1-pa,na,[]))}function g(pa,la){for(var ka=0;ka<pa.length;ka++){var na=pa[ka];if(!na.fixedrange)if(na.rangebreaks){var oa=na._length,sa=
na.p2l(0+la)-na.p2l(0);oa=na.p2l(oa+la)-na.p2l(oa);sa=(sa+oa)/2;na.range=[na.l2r(na._rl[0]-sa),na.l2r(na._rl[1]-sa)]}else na.range=[na.l2r(na._rl[0]-la/na._m),na.l2r(na._rl[1]-la/na._m)]}}function h(pa,la,ka){return pa?"nsew"===pa?ka?"":"pan"===la?"move":"crosshair":pa.toLowerCase()+"-resize":"pointer"}function r(pa,la,ka,na,oa){return pa.append("path").attr("class","zoombox").style({fill:.2<la?"rgba(0,0,0,0)":"rgba(255,255,255,0)","stroke-width":0}).attr("transform",y(ka,na)).attr("d",oa+"Z")}function l(pa,
la,ka){return pa.append("path").attr("class","zoombox-corners").style({fill:J.background,stroke:J.defaultLine,"stroke-width":1,opacity:0}).attr("transform",y(la,ka)).attr("d","M0,0Z")}function c(pa,la,ka,na,oa,sa){pa.attr("d",na+"M"+ka.l+","+ka.t+"v"+ka.h+"h"+ka.w+"v-"+ka.h+"h-"+ka.w+"Z");d(pa,la,oa,sa)}function d(pa,la,ka,na){ka||(pa.transition().style("fill",.2<na?"rgba(0,0,0,0.4)":"rgba(255,255,255,0.3)").duration(200),la.transition().style("opacity",1).duration(200))}function e(pa){z.select(pa).selectAll(".zoombox,.js-zoombox-backdrop,.js-zoombox-menu,.zoombox-corners").remove()}
function f(pa){wa&&pa.data&&pa._context.showTips&&(B.notifier(B._(pa,"Double-click to zoom back out"),"long"),wa=!1)}function q(pa){var la=Math.floor(Math.min(pa.b-pa.t,pa.r-pa.l,ra)/2);return"M"+(pa.l-3.5)+","+(pa.t-.5+la)+"h3v"+-la+"h"+la+"v-3h-"+(la+3)+"ZM"+(pa.r+3.5)+","+(pa.t-.5+la)+"h-3v"+-la+"h"+-la+"v-3h"+(la+3)+"ZM"+(pa.r+3.5)+","+(pa.b+.5-la)+"h-3v"+la+"h"+-la+"v3h"+(la+3)+"ZM"+(pa.l-3.5)+","+(pa.b+.5-la)+"h3v"+la+"h"+la+"v3h-"+(la+3)+"Z"}function t(pa,la,ka,na,oa){for(var sa=!1,za={},Ha=
{},Wa,Za,bb,sb,hb=(oa||{}).xaHash,ub=(oa||{}).yaHash,pb=0;pb<la.length;pb++){var Ab=la[pb];for(Wa in ka)if(Ab[Wa]){for(bb in Ab)oa&&(hb[bb]||ub[bb])||("x"===bb.charAt(0)?ka:na)[bb]||(za[bb]=Wa);for(Za in na)oa&&(hb[Za]||ub[Za])||!Ab[Za]||(sa=!0)}for(Za in na)if(Ab[Za])for(sb in Ab)oa&&(hb[sb]||ub[sb])||("x"===sb.charAt(0)?ka:na)[sb]||(Ha[sb]=Za)}sa&&(B.extendFlat(za,Ha),Ha={});la={};ka=[];for(bb in za)na=T(pa,bb),ka.push(na),la[na._id]=na;bb={};na=[];for(sb in Ha)oa=T(pa,sb),na.push(oa),bb[oa._id]=
oa;return{xaHash:la,yaHash:bb,xaxes:ka,yaxes:na,xLinks:za,yLinks:Ha,isSubplotConstrained:sa}}function w(pa,la){if(C){var ka=void 0!==pa.onwheel?"wheel":"mousewheel";pa._onwheel&&pa.removeEventListener(ka,pa._onwheel);pa._onwheel=la;pa.addEventListener(ka,la,{passive:!1})}else void 0!==pa.onwheel?pa.onwheel=la:void 0!==pa.onmousewheel?pa.onmousewheel=la:pa.isAddedWheelEvent||(pa.isAddedWheelEvent=!0,pa.addEventListener("wheel",la,{passive:!1}))}function x(pa){var la=[],ka;for(ka in pa)la.push(pa[ka]);
return la}var z=b("@plotly/d3"),B=b("../../lib"),A=B.numberFormat,D=b("tinycolor2"),C=b("has-passive-events"),v=b("../../registry"),y=B.strTranslate,F=b("../../lib/svg_text_utils"),J=b("../../components/color"),K=b("../../components/drawing"),M=b("../../components/fx"),H=b("./axes"),O=b("../../lib/setcursor"),I=b("../../components/dragelement");G=b("../../components/dragelement/helpers");var L=G.selectingOrDrawing,Q=G.freeMode,Z=b("../../constants/alignment").FROM_TL,ba=b("../../lib/clear_gl_canvases"),
V=b("../../plot_api/subroutines").redrawReglTraces,S=b("../plots"),T=b("./axis_ids").getFromId,fa=b("./select").prepSelect,W=b("./select").clearSelect,aa=b("./select").selectOnClick,ja=b("./scale_zoom"),ma=b("./constants"),ia=ma.MINDRAG,ra=ma.MINZOOM,wa=!0;N.exports={makeDragBox:function(pa,la,ka,na,oa,sa,za,Ha){function Wa(){ab=la.xaxis;Db=la.yaxis;Jc=ab._length;Ia=Db._length;Qb=ab._offset;yc=Db._offset;Nb={};Nb[ab._id]=ab;ec={};ec[Db._id]=Db;if(za&&Ha)for(var Nc=la.overlays,cd=0;cd<Nc.length;cd++){var Cc=
Nc[cd].xaxis;Nb[Cc._id]=Cc;Cc=Nc[cd].yaxis;ec[Cc._id]=Cc}ob=x(Nb);Cb=x(ec);Gb=k(ob,Ha);Hb=k(Cb,za);$b=!Hb&&!Gb;ib=t(pa,pa._fullLayout._axisMatchGroups,Nb,ec);Na=t(pa,pa._fullLayout._axisConstraintGroups,Nb,ec,ib);Nc=Na.isSubplotConstrained||ib.isSubplotConstrained;uc=Ha||Nc;fd=za||Nc;Nc=pa._fullLayout;fb=Nc._has("scattergl");Pb=Nc._has("splom");fc=Nc._has("svg")}function Za(Nc,cd){var Cc=sc.gd;if(0<=Cc._fullLayout._activeShapeIndex)Cc._fullLayout._deactivateShape(Cc);else{var dd=Cc._fullLayout.clickmode;
e(Cc);2!==Nc||$a||qb();if(Ta)-1<dd.indexOf("select")&&aa(cd,Cc,ob,Cb,la.id,sc),-1<dd.indexOf("event")&&M.click(Cc,cd,la.id);else if(1===Nc&&$a){var Vc=za?Db:ab;Nc="s"===za||"w"===Ha?0:1;var Sc=Vc._name+".range["+Nc+"]";Nc=m(Vc,Nc);cd="left";dd="middle";if(!Vc.fixedrange&&(za?(dd="n"===za?"top":"bottom","right"===Vc.side&&(cd="right")):"e"===Ha&&(cd="right"),Cc._context.showAxisRangeEntryBoxes))z.select(Jb).call(F.makeEditable,{gd:Cc,immediate:!0,background:Cc._fullLayout.paper_bgcolor,text:String(Nc),
fill:Vc.tickfont?Vc.tickfont.color:"#444",horizontalAlign:cd,verticalAlign:dd}).on("edit",function(id){id=Vc.d2r(id);void 0!==id&&v.call("_guiRelayout",Cc,Sc,id)})}}}function bb(Nc,cd,Cc){Nc=Jb.getBoundingClientRect();nc=cd-Nc.left;vc=Cc-Nc.top;pa._fullLayout._calcInverseTransform(pa);cd=B.apply3DTransform(pa._fullLayout._invTransform)(nc,vc);nc=cd[0];vc=cd[1];Vb={l:nc,r:nc,w:0,t:vc,b:vc,h:0};Wb=pa._hmpixcount?pa._hmlumcount/pa._hmpixcount:D(pa._fullLayout.plot_bgcolor).getLuminance();yb="M0,0H"+
Jc+"V"+Ia+"H0V0";ac=!1;Ub="xy";Rc=!1;lc=r(Ja,Wb,Qb,yc,yb);tc=l(Ja,Qb,yc)}function sb(Nc,cd){function Cc(){Ub="";Vb.r=Vb.l;Vb.t=Vb.b;tc.attr("d","M0,0Z")}if(pa._transitioningWithDuration)return!1;Nc=Math.max(0,Math.min(Jc,Pc*Nc+nc));cd=Math.max(0,Math.min(Ia,Uc*cd+vc));var dd=Math.abs(Nc-nc),Vc=Math.abs(cd-vc);Vb.l=Math.min(nc,Nc);Vb.r=Math.max(nc,Nc);Vb.t=Math.min(vc,cd);Vb.b=Math.max(vc,cd);Na.isSubplotConstrained?dd>ra||Vc>ra?(Ub="xy",dd/Jc>Vc/Ia?(Vc=dd*Ia/Jc,vc>cd?Vb.t=vc-Vc:Vb.b=vc+Vc):(dd=Vc*
Jc/Ia,nc>Nc?Vb.l=nc-dd:Vb.r=nc+dd),tc.attr("d",q(Vb))):Cc():ib.isSubplotConstrained?dd>ra||Vc>ra?(Ub="xy",Nc=Math.min(Vb.l/Jc,(Ia-Vb.b)/Ia),cd=Math.max(Vb.r/Jc,(Ia-Vb.t)/Ia),Vb.l=Nc*Jc,Vb.r=cd*Jc,Vb.b=(1-Nc)*Ia,Vb.t=(1-cd)*Ia,tc.attr("d",q(Vb))):Cc():!Hb||Vc<Math.min(Math.max(.6*dd,ia),ra)?dd<ia||!Gb?Cc():(Vb.t=0,Vb.b=Ia,Ub="x",tc.attr("d","M"+(Vb.l-.5)+","+(vc-ra-.5)+"h-3v"+(2*ra+1)+"h3ZM"+(Vb.r+.5)+","+(vc-ra-.5)+"h3v"+(2*ra+1)+"h-3Z")):!Gb||dd<Math.min(.6*Vc,ra)?(Vb.l=0,Vb.r=Jc,Ub="y",tc.attr("d",
"M"+(nc-ra-.5)+","+(Vb.t-.5)+"v-3h"+(2*ra+1)+"v3ZM"+(nc-ra-.5)+","+(Vb.b+.5)+"v3h"+(2*ra+1)+"v-3Z")):(Ub="xy",tc.attr("d",q(Vb)));Vb.w=Vb.r-Vb.l;Vb.h=Vb.b-Vb.t;Ub&&(Rc=!0);pa._dragged=Rc;c(lc,tc,Vb,yb,ac,Wb);hb();pa.emit("plotly_relayouting",Fc);ac=!0}function hb(){Fc={};if("xy"===Ub||"x"===Ub)a(ob,Vb.l/Jc,Vb.r/Jc,Fc,Na.xaxes),tb("x",Fc);if("xy"===Ub||"y"===Ub)a(Cb,(Ia-Vb.b)/Ia,(Ia-Vb.t)/Ia,Fc,Na.yaxes),tb("y",Fc)}function ub(){hb();e(pa);zb();f(pa)}function pb(Nc){function cd(id,Md,Sd){if(!id.fixedrange){var Td=
B.simpleMap(id.range,id.r2l),Ue=Td[0]+(Td[1]-Td[0])*Md;id.range=Td.map(function(Ke){return id.l2r(Ue+(Ke-Ue)*Sd)})}}if(pa._context._scrollZoom.cartesian||pa._fullLayout._enablescrollzoom)if(sc.plotinfo.selection=!1,W(pa),pa._transitioningWithDuration)Nc.preventDefault(),Nc.stopPropagation();else{Wa();clearTimeout(Cd);var Cc=-Nc.deltaY;isFinite(Cc)||(Cc=Nc.wheelDelta/10);if(isFinite(Cc)){Cc=Math.exp(-Math.min(Math.max(Cc,-20),20)/200);var dd=Ad.draglayer.select(".nsewdrag").node().getBoundingClientRect(),
Vc=(Nc.clientX-dd.left)/dd.width;dd=(dd.bottom-Nc.clientY)/dd.height;var Sc;if(uc){Ha||(Vc=.5);for(Sc=0;Sc<ob.length;Sc++)cd(ob[Sc],Vc,Cc);tb("x");kd[2]*=Cc;kd[0]+=kd[2]*Vc*(1/Cc-1)}if(fd){za||(dd=.5);for(Sc=0;Sc<Cb.length;Sc++)cd(Cb[Sc],dd,Cc);tb("y");kd[3]*=Cc;kd[1]+=kd[3]*(1-dd)*(1/Cc-1)}La(kd);vb();pa.emit("plotly_relayouting",Fc);Cd=setTimeout(function(){pa._fullLayout&&(kd=[0,0,Jc,Ia],zb())},Gd);Nc.preventDefault()}else B.log("Did not find wheel motion attributes: ",Nc)}}function Ab(Nc,cd){function Cc(Md,
Sd,Td){for(var Ue=1-Sd,Ke,ve,zf=0;zf<Md.length;zf++){var Ef=Md[zf];if(!Ef.fixedrange){Ke=Ef;ve=Td/Ef._length;ve=Ef._rl[Ue]+(Ef._rl[Sd]-Ef._rl[Ue])/(1-(0<=ve?Math.min(ve,.9):1/(1/Math.max(ve,-.3)+3.222)));var qf=Ef.l2r(ve);!1!==qf&&void 0!==qf&&(Ef.range[Sd]=qf)}}return Ke._length*(Ke._rl[Sd]-ve)/(Ke._rl[Sd]-Ke._rl[Ue])}Nc*=Pc;cd*=Uc;if(!pa._transitioningWithDuration){pa._fullLayout._replotting=!0;if("ew"===Gb||"ns"===Hb){var dd=Gb?-Nc:0,Vc=Hb?-cd:0;ib.isSubplotConstrained&&(Gb&&Hb&&(cd=(Nc/Jc-cd/
Ia)/2,Nc=cd*Jc,cd=-cd*Ia,dd=-Nc,Vc=-cd),Hb?dd=-Vc*Jc/Ia:Vc=-dd*Ia/Jc);Gb&&(g(ob,Nc),tb("x"));Hb&&(g(Cb,cd),tb("y"));La([dd,Vc,Jc,Ia])}else{var Sc="w"===Gb===("n"===Hb)?1:-1;Gb&&Hb&&(Na.isSubplotConstrained||ib.isSubplotConstrained)&&(cd=(Nc/Jc+Sc*cd/Ia)/2,Nc=cd*Jc,cd=Sc*cd*Ia);"w"===Gb?Nc=Cc(ob,0,Nc):"e"===Gb?Nc=Cc(ob,1,-Nc):Gb||(Nc=0);"n"===Hb?cd=Cc(Cb,1,cd):"s"===Hb?cd=Cc(Cb,0,-cd):Hb||(cd=0);dd="w"===Gb?Nc:0;Vc="n"===Hb?cd:0;if(Na.isSubplotConstrained&&!ib.isSubplotConstrained||ib.isSubplotConstrained&&
Gb&&Hb&&0<Sc){if(ib.isSubplotConstrained||!Gb&&1===Hb.length){for(Sc=0;Sc<ob.length;Sc++)ob[Sc].range=ob[Sc]._r.slice(),ja(ob[Sc],1-cd/Ia);Nc=cd*Jc/Ia;dd=Nc/2}if(ib.isSubplotConstrained||!Hb&&1===Gb.length){for(Sc=0;Sc<Cb.length;Sc++)Cb[Sc].range=Cb[Sc]._r.slice(),ja(Cb[Sc],1-Nc/Jc);cd=Nc*Ia/Jc;Vc=cd/2}}ib.isSubplotConstrained&&Hb||tb("x");ib.isSubplotConstrained&&Gb||tb("y");Sc=Jc-Nc;var id=Ia-cd;!ib.isSubplotConstrained||Gb&&Hb||(Gb?(Vc=dd?0:Nc*Ia/Jc,id=Sc*Ia/Jc):(dd=Vc?0:cd*Jc/Ia,Sc=id*Jc/Ia));
La([dd,Vc,Sc,id])}vb();pa.emit("plotly_relayouting",Fc)}}function tb(Nc,cd){var Cc=ib.isSubplotConstrained?{x:Cb,y:ob}[Nc]:ib[Nc+"axes"];Nc=ib.isSubplotConstrained?{x:ob,y:Cb}[Nc]:[];for(var dd=0;dd<Cc.length;dd++){var Vc=Cc[dd],Sc=Vc._id;Sc=ib.xLinks[Sc]||ib.yLinks[Sc];if(Sc=Nc[0]||Nb[Sc]||ec[Sc])cd?(cd[Vc._name+".range[0]"]=cd[Sc._name+".range[0]"],cd[Vc._name+".range[1]"]=cd[Sc._name+".range[1]"]):Vc.range=Sc.range.slice()}}function vb(){function Nc(Vc){for(Cc=0;Cc<Vc.length;Cc++)Vc[Cc].fixedrange||
cd.push(Vc[Cc]._id)}var cd=[],Cc;uc&&(Nc(ob),Nc(Na.xaxes),Nc(ib.xaxes));fd&&(Nc(Cb),Nc(Na.yaxes),Nc(ib.yaxes));Fc={};for(Cc=0;Cc<cd.length;Cc++){var dd=T(pa,cd[Cc]);H.drawOne(pa,dd,{skipTitle:!0});Fc[dd._name+".range[0]"]=dd.range[0];Fc[dd._name+".range[1]"]=dd.range[1]}H.redrawComponents(pa,cd)}function qb(){if(!pa._transitioningWithDuration){var Nc=pa._context.doubleClick,cd=[];Gb&&(cd=cd.concat(ob));Hb&&(cd=cd.concat(Cb));ib.xaxes&&(cd=cd.concat(ib.xaxes));ib.yaxes&&(cd=cd.concat(ib.yaxes));var Cc=
{},dd;if("reset+autosize"===Nc)for(Nc="autosize",dd=0;dd<cd.length;dd++){var Vc=cd[dd];if(Vc._rangeInitial&&(Vc.range[0]!==Vc._rangeInitial[0]||Vc.range[1]!==Vc._rangeInitial[1])||!Vc._rangeInitial&&!Vc.autorange){Nc="reset";break}}if("autosize"===Nc)for(dd=0;dd<cd.length;dd++)Vc=cd[dd],Vc.fixedrange||(Cc[Vc._name+".autorange"]=!0);else if("reset"===Nc){if(Gb||Na.isSubplotConstrained)cd=cd.concat(Na.xaxes);Hb&&!Na.isSubplotConstrained&&(cd=cd.concat(Na.yaxes));Na.isSubplotConstrained&&(Gb?Hb||(cd=
cd.concat(Cb)):cd=cd.concat(ob));for(dd=0;dd<cd.length;dd++)Vc=cd[dd],Vc.fixedrange||(Vc._rangeInitial?(Nc=Vc._rangeInitial,Cc[Vc._name+".range[0]"]=Nc[0],Cc[Vc._name+".range[1]"]=Nc[1]):Cc[Vc._name+".autorange"]=!0)}pa.emit("plotly_doubleclick",null);v.call("_guiRelayout",pa,Cc)}}function zb(){La([0,0,Jc,Ia]);B.syncOrAsync([S.previousPromises,function(){pa._fullLayout._replotting=!1;v.call("_guiRelayout",pa,Fc)}],pa)}function La(Nc){var cd=pa._fullLayout,Cc=cd._plots;cd=cd._subplots.cartesian;var dd;
Pb&&v.subplotsRegistry.splom.drag(pa);if(fb)for(dd=0;dd<cd.length;dd++){var Vc=Cc[cd[dd]];var Sc=Vc.xaxis;var id=Vc.yaxis;if(Vc._scene){var Md=B.simpleMap(Sc.range,Sc.r2l);id=B.simpleMap(id.range,id.r2l);Vc._scene.update({range:[Md[0],id[0],Md[1],id[1]]})}}if(Pb||fb)ba(pa),V(pa);if(fc){Md=Nc[2]/ab._length;var Sd=Nc[3]/Db._length;for(dd=0;dd<cd.length;dd++){Vc=Cc[cd[dd]];Sc=Vc.xaxis;id=Vc.yaxis;var Td=(fd||ib.isSubplotConstrained)&&!id.fixedrange&&ec[id._id];if((uc||ib.isSubplotConstrained)&&!Sc.fixedrange&&
Nb[Sc._id]){var Ue=Md;var Ke=Ha||ib.isSubplotConstrained?Nc[0]:Aa(Sc,Ue)}else ib.xaHash[Sc._id]?(Ue=Md,Ke=Nc[0]*Sc._length/ab._length):ib.yaHash[Sc._id]?(Ue=Sd,Ke="ns"===Hb?-Nc[1]*Sc._length/Db._length:Aa(Sc,Ue,{n:"top",s:"bottom"}[Hb])):(Ue=Ka(Sc,Md,Sd),Ke=ya(Sc,Ue));if(Td){Td=Sd;var ve=za||ib.isSubplotConstrained?Nc[1]:Aa(id,Td)}else ib.yaHash[id._id]?(Td=Sd,ve=Nc[1]*id._length/Db._length):ib.xaHash[id._id]?(Td=Md,ve="ew"===Gb?-Nc[0]*id._length/ab._length:Aa(id,Td,{e:"right",w:"left"}[Gb])):(Td=
Ka(id,Md,Sd),ve=ya(id,Td));if(Ue||Td){Ue||(Ue=1);Td||(Td=1);Sc=Sc._offset-Ke/Ue;id=id._offset-ve/Td;Vc.clipRect.call(K.setTranslate,Ke,ve).call(K.setScale,Ue,Td);Vc.plot.call(K.setTranslate,Sc,id).call(K.setScale,1/Ue,1/Td);if(Ue!==Vc.xScaleFactor||Td!==Vc.yScaleFactor)K.setPointGroupScale(Vc.zoomScalePts,Ue,Td),K.setTextPointsScale(Vc.zoomScaleTxt,Ue,Td);K.hideOutsideRangePoints(Vc.clipOnAxisFalseTraces,Vc);Vc.xScaleFactor=Ue;Vc.yScaleFactor=Td}}}}function Ka(Nc,cd,Cc){return Nc.fixedrange?0:uc&&
Na.xaHash[Nc._id]?cd:fd&&(Na.isSubplotConstrained?Na.xaHash:Na.yaHash)[Nc._id]?Cc:0}function ya(Nc,cd){return cd?(Nc.range=Nc._r.slice(),ja(Nc,cd),Aa(Nc,cd)):0}function Aa(Nc,cd,Cc){return Nc._length*(1-cd)*Z[Cc||Nc.constraintoward||"middle"]}var Ja=pa._fullLayout._zoomlayer,Ta="nsew"===za+Ha,$a=1===(za+Ha).length,ab,Db,Nb,ec,ob,Cb,Qb,yc,Jc,Ia,Na,ib,Gb,Hb,$b,uc,fd,fb,Pb,fc,Fc,Pc,Uc;Wa();var rb=h(Hb+Gb,pa._fullLayout.dragmode,Ta),Jb=n(la,za+Ha+"drag",rb,ka,na,oa,sa);if($b&&!Ta)return Jb.onmousedown=
null,Jb.style.pointerEvents="none",Jb;var sc={element:Jb,gd:pa,plotinfo:la,prepFn:function(Nc,cd,Cc){var dd=sc.dragmode,Vc=pa._fullLayout.dragmode;Vc!==dd&&(sc.dragmode=Vc);Wa();Pc=pa._fullLayout._invScaleX;Uc=pa._fullLayout._invScaleY;$b||(Ta?Nc.shiftKey?"pan"===Vc?Vc="zoom":L(Vc)||(Vc="pan"):Nc.ctrlKey&&(Vc="pan"):Vc="pan");Q(Vc)?sc.minDrag=1:sc.minDrag=void 0;L(Vc)?(sc.xaxes=ob,sc.yaxes=Cb,fa(Nc,cd,Cc,sc,Vc)):(sc.clickFn=Za,L(dd)&&(sc.plotinfo.selection=!1,W(pa)),$b||("zoom"===Vc?(sc.moveFn=sb,
sc.doneFn=ub,sc.minDrag=1,bb(Nc,cd,Cc)):"pan"===Vc&&(sc.moveFn=Ab,sc.doneFn=zb)));pa._fullLayout._redrag=function(){var Sc=pa._dragdata;Sc&&Sc.element===Jb&&!L(pa._fullLayout.dragmode)&&(Wa(),La([0,0,Jc,Ia]),sc.moveFn(Sc.dx,Sc.dy))}}};I.init(sc);var nc,vc,Vb,Wb,yb,ac,Ub,lc,tc,Rc,kd=[0,0,Jc,Ia],Cd=null,Gd=ma.REDRAWDELAY,Ad=la.mainplot?pa._fullLayout._plots[la.mainplot]:la;1!==za.length*Ha.length&&w(Jb,pb);return Jb},makeDragger:p,makeRectDragger:n,makeZoombox:r,makeCorners:l,updateZoombox:c,xyCorners:q,
transitionZoombox:d,removeZoombox:e,showDoubleClickNotifier:f,attachWheelEventHandler:w}},{"../../components/color":666,"../../components/dragelement":685,"../../components/dragelement/helpers":684,"../../components/drawing":688,"../../components/fx":706,"../../constants/alignment":771,"../../lib":803,"../../lib/clear_gl_canvases":787,"../../lib/setcursor":824,"../../lib/svg_text_utils":829,"../../plot_api/subroutines":844,"../../registry":931,"../plots":917,"./axes":854,"./axis_ids":858,"./constants":861,
"./scale_zoom":873,"./select":874,"@plotly/d3":58,"has-passive-events":444,tinycolor2:598}],864:[function(b,N,G){var p=b("@plotly/d3"),n=b("../../components/fx"),k=b("../../components/dragelement"),m=b("../../lib/setcursor"),a=b("./dragbox").makeDragBox,g=b("./constants").DRAGGERSIZE;G.initInteractions=function(h){var r=h._fullLayout;if(h._context.staticPlot)p.select(h).selectAll(".drag").remove();else if(r._has("cartesian")||r._has("splom")){Object.keys(r._plots||{}).sort(function(c,d){return(r._plots[c].mainplot&&
!0)===(r._plots[d].mainplot&&!0)?(c=c.split("y"),d=d.split("y"),c[0]===d[0]?Number(c[1]||1)-Number(d[1]||1):Number(c[0]||1)-Number(d[0]||1)):r._plots[c].mainplot?1:-1}).forEach(function(c){var d=r._plots[c],e=d.xaxis,f=d.yaxis;if(!d.mainplot){var q=a(h,d,e._offset,f._offset,e._length,f._length,"ns","ew");q.onmousemove=function(w){h._fullLayout._rehover=function(){h._fullLayout._hoversubplot===c&&h._fullLayout._plots[c]&&n.hover(h,w,c)};n.hover(h,w,c);h._fullLayout._lasthover=q;h._fullLayout._hoversubplot=
c};q.onmouseout=function(w){h._dragging||(h._fullLayout._hoversubplot=null,k.unhover(h,w))};h._context.showAxisDragHandles&&(a(h,d,e._offset-g,f._offset-g,g,g,"n","w"),a(h,d,e._offset+e._length,f._offset-g,g,g,"n","e"),a(h,d,e._offset-g,f._offset+f._length,g,g,"s","w"),a(h,d,e._offset+e._length,f._offset+f._length,g,g,"s","e"))}if(h._context.showAxisDragHandles){if(c===e._mainSubplot){var t=e._mainLinePosition;"top"===e.side&&(t-=g);a(h,d,e._offset+.1*e._length,t,.8*e._length,g,"","ew");a(h,d,e._offset,
t,.1*e._length,g,"","w");a(h,d,e._offset+.9*e._length,t,.1*e._length,g,"","e")}c===f._mainSubplot&&(e=f._mainLinePosition,"right"!==f.side&&(e-=g),a(h,d,e,f._offset+.1*f._length,g,.8*f._length,"ns",""),a(h,d,e,f._offset+.9*f._length,g,.1*f._length,"s",""),a(h,d,e,f._offset,g,.1*f._length,"n",""))}});var l=r._hoverlayer.node();l.onmousemove=function(c){c.target=h._fullLayout._lasthover;n.hover(h,c,r._hoversubplot)};l.onclick=function(c){c.target=h._fullLayout._lasthover;n.click(h,c)};l.onmousedown=
function(c){h._fullLayout._lasthover.onmousedown(c)};G.updateFx(h)}};G.updateFx=function(h){h=h._fullLayout;m(h._draggers,"pan"===h.dragmode?"move":"crosshair")}},{"../../components/dragelement":685,"../../components/fx":706,"../../lib/setcursor":824,"./constants":861,"./dragbox":863,"@plotly/d3":58}],865:[function(b,N,G){N.exports={clearOutlineControllers:function(p){(p=p._fullLayout._zoomlayer)&&p.selectAll(".outline-controllers").remove()},clearSelect:function(p){var n=p._fullLayout._zoomlayer;
n&&n.selectAll(".select-outline").remove();p._fullLayout._drawing=!1}}},{}],866:[function(b,N,G){function p(k,m){switch(k.type){case "log":return k.p2d(m);case "date":return k.p2r(m,0,k.calendar);default:return k.p2r(m)}}var n=b("../../lib").strTranslate;N.exports={p2r:p,r2p:function(k,m){switch(k.type){case "log":return k.d2p(m);case "date":return k.r2p(m,0,k.calendar);default:return k.r2p(m)}},axValue:function(k){var m="y"===k._id.charAt(0)?1:0;return function(a){return p(k,a[m])}},getTransform:function(k){return n(k.xaxis._offset,
k.yaxis._offset)}}},{"../../lib":803}],867:[function(b,N,G){var p=b("../../registry"),n=b("../../lib"),k=b("./axis_ids");N.exports=function(m){return function(a,g){a=a[m];if(Array.isArray(a)){var h=p.subplotsRegistry.cartesian,r=h.idRegex,l=g._subplots,c=l.xaxis,d=l.yaxis;l=l.cartesian;for(var e=g._has("cartesian")||g._has("gl2d"),f=0;f<a.length;f++){var q=a[f];if(n.isPlainObject(q)){var t=k.cleanId(q.xref,"x",!1);q=k.cleanId(q.yref,"y",!1);var w=r.x.test(t),x=r.y.test(q);if(w||x){e||n.pushUnique(g._basePlotModules,
h);var z=!1;w&&-1===c.indexOf(t)&&(c.push(t),z=!0);x&&-1===d.indexOf(q)&&(d.push(q),z=!0);z&&w&&x&&l.push(t+q)}}}}}}},{"../../lib":803,"../../registry":931,"./axis_ids":858}],868:[function(b,N,G){function p(x,z,B){return l.ensureSingle(x,z,B,function(A){A.datum(B)})}function n(x,z,B,A,D){for(var C=q.traceLayerClasses,v=x._fullLayout,y=v._modules,F,J,K=[],M=[],H=0;H<y.length;H++){F=y[H];J=F.name;var O=r.modules[J].categories;if(O.svg){var I=F.layerName||J+"layer";F=F.plot;B=e(B,F);J=B[0];B=B[1];J.length&&
K.push({i:C.indexOf(I),className:I,plotMethod:F,cdModule:J});O.zoomScale&&M.push("."+I)}}K.sort(function(L,Q){return L.i-Q.i});C=z.plot.selectAll("g.mlayer").data(K,function(L){return L.className});C.enter().append("g").attr("class",function(L){return L.className}).classed("mlayer",!0).classed("rangeplot",z.isRangePlot);C.exit().remove();C.order();C.each(function(L){var Q=h.select(this),Z=L.className;L.plotMethod(x,z,L.cdModule,Q,A,D);-1===q.clipOnAxisFalseQuery.indexOf("."+Z)&&d.setClipUrl(Q,z.layerClipId,
x)});v._has("scattergl")&&(F=r.getModule("scattergl"),J=e(B,F)[0],F.plot(x,z,J));x._context.staticPlot||(z._hasClipOnAxisFalse&&(z.clipOnAxisFalseTraces=z.plot.selectAll(q.clipOnAxisFalseQuery.join(",")).selectAll(".trace")),M.length&&(v=z.plot.selectAll(M.join(",")).selectAll(".trace"),z.zoomScalePts=v.selectAll("path.point"),z.zoomScaleTxt=v.selectAll(".textpoint")))}function k(x){x=x._fullLayout;var z=x._subplots.cartesian,B=z.length,A,D=[],C=[];for(A=0;A<B;A++){var v=z[A];var y=x._plots[v];var F=
y.xaxis;var J=y.yaxis;F=F._mainAxis._id+J._mainAxis._id;J=x._plots[F];y.overlays=[];F!==v&&J?(y.mainplot=F,y.mainplotinfo=J,C.push(v)):(y.mainplot=void 0,y.mainplotinfo=void 0,D.push(v))}for(A=0;A<C.length;A++)v=C[A],y=x._plots[v],y.mainplotinfo.overlays.push(y);z=D.concat(C);D=Array(B);for(A=0;A<B;A++){v=z[A];y=x._plots[v];F=y.xaxis;J=y.yaxis;F=[v,F.layer,J.layer,F.overlaying||"",J.overlaying||""];for(v=0;v<y.overlays.length;v++)F.push(y.overlays[v].id);D[A]=F}return D}function m(x,z){var B=z.plotgroup,
A=z.id,D=q.layerValue2layerClass[z.xaxis.layer],C=q.layerValue2layerClass[z.yaxis.layer];x=x._fullLayout._hasOnlyLargeSploms;if(z.mainplot){B=z.mainplotinfo;var v=B.plotgroup,y=A+"-x",F=A+"-y";z.gridlayer=B.gridlayer;z.zerolinelayer=B.zerolinelayer;w(B.overlinesBelow,"path",y);w(B.overlinesBelow,"path",F);w(B.overaxesBelow,"g",y);w(B.overaxesBelow,"g",F);z.plot=w(B.overplot,"g",A);w(B.overlinesAbove,"path",y);w(B.overlinesAbove,"path",F);w(B.overaxesAbove,"g",y);w(B.overaxesAbove,"g",F);z.xlines=
v.select(".overlines-"+D).select("."+y);z.ylines=v.select(".overlines-"+C).select("."+F);z.xaxislayer=v.select(".overaxes-"+D).select("."+y);z.yaxislayer=v.select(".overaxes-"+C).select("."+F)}else x?(z.xlines=w(B,"path","xlines-above"),z.ylines=w(B,"path","ylines-above"),z.xaxislayer=w(B,"g","xaxislayer-above"),z.yaxislayer=w(B,"g","yaxislayer-above")):(A=w(B,"g","layer-subplot"),z.shapelayer=w(A,"g","shapelayer"),z.imagelayer=w(A,"g","imagelayer"),z.gridlayer=w(B,"g","gridlayer"),z.zerolinelayer=
w(B,"g","zerolinelayer"),w(B,"path","xlines-below"),w(B,"path","ylines-below"),z.overlinesBelow=w(B,"g","overlines-below"),w(B,"g","xaxislayer-below"),w(B,"g","yaxislayer-below"),z.overaxesBelow=w(B,"g","overaxes-below"),z.plot=w(B,"g","plot"),z.overplot=w(B,"g","overplot"),z.xlines=w(B,"path","xlines-above"),z.ylines=w(B,"path","ylines-above"),z.overlinesAbove=w(B,"g","overlines-above"),w(B,"g","xaxislayer-above"),w(B,"g","yaxislayer-above"),z.overaxesAbove=w(B,"g","overaxes-above"),z.xlines=B.select(".xlines-"+
D),z.ylines=B.select(".ylines-"+C),z.xaxislayer=B.select(".xaxislayer-"+D),z.yaxislayer=B.select(".yaxislayer-"+C));x||(p(z.gridlayer,"g",z.xaxis._id),p(z.gridlayer,"g",z.yaxis._id),z.gridlayer.selectAll("g").map(function(J){return J[0]}).sort(f.idSort));z.xlines.style("fill","none").classed("crisp",!0);z.ylines.style("fill","none").classed("crisp",!0)}function a(x,z){if(x){var B={};x.each(function(v){v=v[0];h.select(this).remove();g(v,z);B[v]=!0});for(var A in z._plots){x=z._plots[A].overlays||[];
for(var D=0;D<x.length;D++){var C=x[D];B[C.id]&&C.plot.selectAll(".trace").remove()}}}}function g(x,z){z._draggers.selectAll("g."+x).remove();z._defs.select("#clip"+z._uid+x+"plot").remove()}var h=b("@plotly/d3"),r=b("../../registry"),l=b("../../lib"),c=b("../plots"),d=b("../../components/drawing"),e=b("../get_data").getModuleCalcData,f=b("./axis_ids"),q=b("./constants"),t=b("../../constants/xmlns_namespaces"),w=l.ensureSingle;G.name="cartesian";G.attr=["xaxis","yaxis"];G.idRoot=["x","y"];G.idRegex=
q.idRegex;G.attrRegex=q.attrRegex;G.attributes=b("./attributes");G.layoutAttributes=b("./layout_attributes");G.supplyLayoutDefaults=b("./layout_defaults");G.transitionAxes=b("./transition_axes");G.finalizeSubplots=function(x,z){var B=z._subplots;z=B.xaxis;var A=B.yaxis,D=B.cartesian;B=D.concat(B.gl2d||[]);var C={},v={},y;for(y=0;y<B.length;y++){var F=B[y].split("y");C[F[0]]=1;v["y"+F[1]]=1}for(y=0;y<z.length;y++)if(F=z[y],!C[F]){var J=(x[f.id2name(F)]||{}).anchor;q.idRegex.y.test(J)||(J="y");D.push(F+
J);B.push(F+J);v[J]||(v[J]=1,l.pushUnique(A,J))}for(y=0;y<A.length;y++)J=A[y],v[J]||(F=(x[f.id2name(J)]||{}).anchor,q.idRegex.x.test(F)||(F="x"),D.push(F+J),B.push(F+J),C[F]||(C[F]=1,l.pushUnique(z,F)));if(!B.length){J=F="";for(var K in x)if(q.attrRegex.test(K))if("x"===K.charAt(0)){if(!F||+K.substr(5)<+F.substr(5))F=K}else if(!J||+K.substr(5)<+J.substr(5))J=K;F=F?f.name2id(F):"x";J=J?f.name2id(J):"y";z.push(F);A.push(J);D.push(F+J)}};G.plot=function(x,z,B,A){var D=x._fullLayout,C=D._subplots.cartesian,
v=x.calcdata,y;if(!Array.isArray(z))for(z=[],y=0;y<v.length;y++)z.push(y);for(y=0;y<C.length;y++){for(var F=C[y],J=D._plots[F],K=[],M,H=0;H<v.length;H++){var O=v[H],I=O[0].trace;if(I.xaxis+I.yaxis===F){if(-1!==z.indexOf(I.index)||I.carpet)M&&M[0].trace.xaxis+M[0].trace.yaxis===F&&-1!==["tonextx","tonexty","tonext"].indexOf(I.fill)&&-1===K.indexOf(M)&&K.push(M),K.push(O);M=O}}n(x,J,K,B,A)}};G.clean=function(x,z,B,A){var D=A._plots||{};x=z._plots||{};B=A._subplots||{};var C;if(A._hasOnlyLargeSploms&&
!z._hasOnlyLargeSploms)for(C in D){var v=D[C];v.plotgroup&&v.plotgroup.remove()}v=A._has&&A._has("gl");var y=z._has&&z._has("gl");if(v&&!y)for(C in D)v=D[C],v._scene&&v._scene.destroy();if(B.xaxis&&B.yaxis)for(D=f.listIds({_fullLayout:A}),C=0;C<D.length;C++)v=D[C],z[f.id2name(v)]||A._infolayer.selectAll(".g-"+v+"title").remove();C=A._has&&A._has("cartesian");z=z._has&&z._has("cartesian");if(C&&!z)a(A._cartesianlayer.selectAll(".subplot"),A),A._defs.selectAll(".axesclip").remove(),delete A._axisConstraintGroups,
delete A._axisMatchGroups;else if(B.cartesian)for(C=0;C<B.cartesian.length;C++)z=B.cartesian[C],x[z]||(A._cartesianlayer.selectAll("."+z+",."+z+"-x,."+z+"-y").remove(),g(z,A))};G.drawFramework=function(x){var z=x._fullLayout,B=k(x);B=z._cartesianlayer.selectAll(".subplot").data(B,String);B.enter().append("g").attr("class",function(A){return"subplot "+A[0]});B.order();B.exit().call(a,z);B.each(function(A){A=A[0];var D=z._plots[A];D.plotgroup=h.select(this);m(x,D);D.draglayer=w(z._draggers,"g",A)})};
G.rangePlot=function(x,z,B){m(x,z);n(x,z,B);c.style(x)};G.toSVG=function(x){var z=x._fullLayout._glimages,B=h.select(x).selectAll(".svg-container");B.filter(function(A,D){return D===B.size()-1}).selectAll(".gl-canvas-context, .gl-canvas-focus").each(function(){var A=this.toDataURL("image/png");z.append("svg:image").attr({xmlns:t.svg,"xlink:href":A,preserveAspectRatio:"none",x:0,y:0,width:this.style.width,height:this.style.height})})};G.updateFx=b("./graph_interact").updateFx},{"../../components/drawing":688,
"../../constants/xmlns_namespaces":780,"../../lib":803,"../../registry":931,"../get_data":891,"../plots":917,"./attributes":852,"./axis_ids":858,"./constants":861,"./graph_interact":864,"./layout_attributes":869,"./layout_defaults":870,"./transition_axes":879,"@plotly/d3":58}],869:[function(b,N,G){G=b("../font_attributes");var p=b("../../components/color/attributes"),n=b("../../components/drawing/attributes").dash,k=b("../../lib/extend").extendFlat,m=b("../../plot_api/plot_template").templatedArray,
a=b("../../plots/cartesian/axis_format_attributes").descriptionWithDates,g=b("../../constants/numerical").ONEDAY;b=b("./constants");var h=b.HOUR_PATTERN,r=b.WEEKDAY_PATTERN;N.exports={visible:{valType:"boolean",editType:"plot"},color:{valType:"color",dflt:p.defaultLine,editType:"ticks"},title:{text:{valType:"string",editType:"ticks"},font:G({editType:"ticks"}),standoff:{valType:"number",min:0,editType:"ticks"},editType:"ticks"},type:{valType:"enumerated",values:"- linear log date category multicategory".split(" "),
dflt:"-",editType:"calc",_noTemplating:!0},autotypenumbers:{valType:"enumerated",values:["convert types","strict"],dflt:"convert types",editType:"calc"},autorange:{valType:"enumerated",values:[!0,!1,"reversed"],dflt:!0,editType:"axrange",impliedEdits:{"range[0]":void 0,"range[1]":void 0}},rangemode:{valType:"enumerated",values:["normal","tozero","nonnegative"],dflt:"normal",editType:"plot"},range:{valType:"info_array",items:[{valType:"any",editType:"axrange",impliedEdits:{"^autorange":!1},anim:!0},
{valType:"any",editType:"axrange",impliedEdits:{"^autorange":!1},anim:!0}],editType:"axrange",impliedEdits:{autorange:!1},anim:!0},fixedrange:{valType:"boolean",dflt:!1,editType:"calc"},scaleanchor:{valType:"enumerated",values:[b.idRegex.x.toString(),b.idRegex.y.toString()],editType:"plot"},scaleratio:{valType:"number",min:0,dflt:1,editType:"plot"},constrain:{valType:"enumerated",values:["range","domain"],editType:"plot"},constraintoward:{valType:"enumerated",values:"left center right top middle bottom".split(" "),
editType:"plot"},matches:{valType:"enumerated",values:[b.idRegex.x.toString(),b.idRegex.y.toString()],editType:"calc"},rangebreaks:m("rangebreak",{enabled:{valType:"boolean",dflt:!0,editType:"calc"},bounds:{valType:"info_array",items:[{valType:"any",editType:"calc"},{valType:"any",editType:"calc"}],editType:"calc"},pattern:{valType:"enumerated",values:[r,h,""],editType:"calc"},values:{valType:"info_array",freeLength:!0,editType:"calc",items:{valType:"any",editType:"calc"}},dvalue:{valType:"number",
editType:"calc",min:0,dflt:g},editType:"calc"}),tickmode:{valType:"enumerated",values:["auto","linear","array"],editType:"ticks",impliedEdits:{tick0:void 0,dtick:void 0}},nticks:{valType:"integer",min:0,dflt:0,editType:"ticks"},tick0:{valType:"any",editType:"ticks",impliedEdits:{tickmode:"linear"}},dtick:{valType:"any",editType:"ticks",impliedEdits:{tickmode:"linear"}},tickvals:{valType:"data_array",editType:"ticks"},ticktext:{valType:"data_array",editType:"ticks"},ticks:{valType:"enumerated",values:["outside",
"inside",""],editType:"ticks"},tickson:{valType:"enumerated",values:["labels","boundaries"],dflt:"labels",editType:"ticks"},ticklabelmode:{valType:"enumerated",values:["instant","period"],dflt:"instant",editType:"ticks"},ticklabelposition:{valType:"enumerated",values:"outside;inside;outside top;inside top;outside left;inside left;outside right;inside right;outside bottom;inside bottom".split(";"),dflt:"outside",editType:"calc"},ticklabeloverflow:{valType:"enumerated",values:["allow","hide past div",
"hide past domain"],editType:"calc"},mirror:{valType:"enumerated",values:[!0,"ticks",!1,"all","allticks"],dflt:!1,editType:"ticks+layoutstyle"},ticklen:{valType:"number",min:0,dflt:5,editType:"ticks"},tickwidth:{valType:"number",min:0,dflt:1,editType:"ticks"},tickcolor:{valType:"color",dflt:p.defaultLine,editType:"ticks"},showticklabels:{valType:"boolean",dflt:!0,editType:"ticks"},automargin:{valType:"boolean",dflt:!1,editType:"ticks"},showspikes:{valType:"boolean",dflt:!1,editType:"modebar"},spikecolor:{valType:"color",
dflt:null,editType:"none"},spikethickness:{valType:"number",dflt:3,editType:"none"},spikedash:k({},n,{dflt:"dash",editType:"none"}),spikemode:{valType:"flaglist",flags:["toaxis","across","marker"],dflt:"toaxis",editType:"none"},spikesnap:{valType:"enumerated",values:["data","cursor","hovered data"],dflt:"hovered data",editType:"none"},tickfont:G({editType:"ticks"}),tickangle:{valType:"angle",dflt:"auto",editType:"ticks"},tickprefix:{valType:"string",dflt:"",editType:"ticks"},showtickprefix:{valType:"enumerated",
values:["all","first","last","none"],dflt:"all",editType:"ticks"},ticksuffix:{valType:"string",dflt:"",editType:"ticks"},showticksuffix:{valType:"enumerated",values:["all","first","last","none"],dflt:"all",editType:"ticks"},showexponent:{valType:"enumerated",values:["all","first","last","none"],dflt:"all",editType:"ticks"},exponentformat:{valType:"enumerated",values:"none e E power SI B".split(" "),dflt:"B",editType:"ticks"},minexponent:{valType:"number",dflt:3,min:0,editType:"ticks"},separatethousands:{valType:"boolean",
dflt:!1,editType:"ticks"},tickformat:{valType:"string",dflt:"",editType:"ticks",description:a("tick label")},tickformatstops:m("tickformatstop",{enabled:{valType:"boolean",dflt:!0,editType:"ticks"},dtickrange:{valType:"info_array",items:[{valType:"any",editType:"ticks"},{valType:"any",editType:"ticks"}],editType:"ticks"},value:{valType:"string",dflt:"",editType:"ticks"},editType:"ticks"}),hoverformat:{valType:"string",dflt:"",editType:"none",description:a("hover text")},showline:{valType:"boolean",
dflt:!1,editType:"ticks+layoutstyle"},linecolor:{valType:"color",dflt:p.defaultLine,editType:"layoutstyle"},linewidth:{valType:"number",min:0,dflt:1,editType:"ticks+layoutstyle"},showgrid:{valType:"boolean",editType:"ticks"},gridcolor:{valType:"color",dflt:p.lightLine,editType:"ticks"},gridwidth:{valType:"number",min:0,dflt:1,editType:"ticks"},zeroline:{valType:"boolean",editType:"ticks"},zerolinecolor:{valType:"color",dflt:p.defaultLine,editType:"ticks"},zerolinewidth:{valType:"number",dflt:1,editType:"ticks"},
showdividers:{valType:"boolean",dflt:!0,editType:"ticks"},dividercolor:{valType:"color",dflt:p.defaultLine,editType:"ticks"},dividerwidth:{valType:"number",dflt:1,editType:"ticks"},anchor:{valType:"enumerated",values:["free",b.idRegex.x.toString(),b.idRegex.y.toString()],editType:"plot"},side:{valType:"enumerated",values:["top","bottom","left","right"],editType:"plot"},overlaying:{valType:"enumerated",values:["free",b.idRegex.x.toString(),b.idRegex.y.toString()],editType:"plot"},layer:{valType:"enumerated",
values:["above traces","below traces"],dflt:"above traces",editType:"plot"},domain:{valType:"info_array",items:[{valType:"number",min:0,max:1,editType:"plot"},{valType:"number",min:0,max:1,editType:"plot"}],dflt:[0,1],editType:"plot"},position:{valType:"number",min:0,max:1,dflt:0,editType:"plot"},categoryorder:{valType:"enumerated",values:"trace;category ascending;category descending;array;total ascending;total descending;min ascending;min descending;max ascending;max descending;sum ascending;sum descending;mean ascending;mean descending;median ascending;median descending".split(";"),
dflt:"trace",editType:"calc"},categoryarray:{valType:"data_array",editType:"calc"},uirevision:{valType:"any",editType:"none"},editType:"calc",_deprecated:{autotick:{valType:"boolean",editType:"ticks"},title:{valType:"string",editType:"ticks"},titlefont:G({editType:"ticks"})}}},{"../../components/color/attributes":665,"../../components/drawing/attributes":687,"../../constants/numerical":779,"../../lib/extend":793,"../../plot_api/plot_template":843,"../../plots/cartesian/axis_format_attributes":857,
"../font_attributes":883,"./constants":861}],870:[function(b,N,G){function p(B,A,D){Array.isArray(B[A])?B[A].push(D):B[A]=[D]}var n=b("../../lib"),k=b("../../components/color"),m=b("../../components/fx/helpers").isUnifiedHover,a=b("../../components/fx/hovermode_defaults"),g=b("../../plot_api/plot_template"),h=b("../layout_attributes"),r=b("./layout_attributes"),l=b("./type_defaults"),c=b("./axis_defaults"),d=b("./constraints"),e=b("./position_defaults"),f=b("./axis_ids"),q=f.id2name,t=f.name2id,w=
b("./constants").AX_ID_PATTERN;b=b("../../registry");var x=b.traceIs,z=b.getComponentMethod;N.exports=function(B,A,D){function C(){sa._traceIndices=(M[ka]||[]).map(function(hb){return hb._expandedIndex});sa._annIndices=[];sa._shapeIndices=[];sa._imgIndices=[];sa._subplotsWith=[];sa._counterAxes=[];sa._name=sa._attr=ka;sa._id=na}function v(hb,ub){return n.coerce(oa,sa,r,hb,ub)}function y(hb,ub){return n.coerce2(oa,sa,r,hb,ub)}function F(hb,ub){hb="x"===hb?ma:ia;for(var pb=[],Ab=0;Ab<hb.length;Ab++){var tb=
hb[Ab];tb===ub||(B[tb]||{}).overlaying||pb.push(t(tb))}return pb}function J(){var hb=oa.matches;w.test(hb)&&-1===ra.indexOf(hb)&&(wa[hb]=oa.type,pa=Object.keys(wa))}var K=A.autotypenumbers,M={},H={},O={},I={},L={},Q={},Z={},ba={},V={},S={},T,fa;for(T=0;T<D.length;T++){var W=D[T];if(x(W,"cartesian")||x(W,"gl2d")){if(W.xaxis){var aa=q(W.xaxis);p(M,aa,W)}else if(W.xaxes)for(fa=0;fa<W.xaxes.length;fa++)p(M,q(W.xaxes[fa]),W);if(W.yaxis){var ja=q(W.yaxis);p(M,ja,W)}else if(W.yaxes)for(fa=0;fa<W.yaxes.length;fa++)p(M,
q(W.yaxes[fa]),W);"funnel"===W.type?"h"===W.orientation?(aa&&(H[aa]=!0),ja&&(Z[ja]=!0)):ja&&(O[ja]=!0):"image"===W.type?(ja&&(ba[ja]=!0),aa&&(ba[aa]=!0)):(ja&&(L[ja]=!0,Q[ja]=!0),(!x(W,"carpet")||"carpet"===W.type&&!W._cheater)&&aa&&(I[aa]=!0));"carpet"===W.type&&W._cheater&&aa&&(H[aa]=!0);x(W,"2dMap")&&(V[aa]=!0,V[ja]=!0);x(W,"oriented")&&(S["h"===W.orientation?ja:aa]=!0)}}D=A._subplots;T=D.xaxis;W=D.yaxis;var ma=n.simpleMap(T,q),ia=n.simpleMap(W,q);D=ma.concat(ia);fa=k.background;T.length&&W.length&&
(fa=n.coerce(B,A,h,"plot_bgcolor"));fa=k.combine(fa,A.paper_bgcolor);aa={x:W,y:T};var ra=aa.x.concat(aa.y),wa={},pa=[];ja=a(B,A);var la=m(ja);for(T=0;T<D.length;T++){var ka=D[T];var na=t(ka);W=ka.charAt(0);n.isPlainObject(B[ka])||(B[ka]={});var oa=B[ka];var sa=g.newContainer(A,ka,W+"axis");C();var za={letter:W,font:A.font,outerTicks:V[ka],showGrid:!S[ka],data:M[ka]||[],bgColor:fa,calendar:A.calendar,automargin:!0,visibleDflt:"x"===W&&!I[ka]&&H[ka]||"y"===W&&!L[ka]&&O[ka],reverseDflt:"y"===W&&(!Q[ka]&&
Z[ka]||ba[ka]),autotypenumbersDflt:K,splomStash:((A._splomAxes||{})[W]||{})[na]};v("uirevision",A.uirevision);l(oa,sa,v,za);c(oa,sa,v,za,A);za=la&&W===ja.charAt(0);var Ha=y("spikecolor",la?sa.color:void 0),Wa=y("spikethickness",la?1.5:void 0),Za=y("spikedash",la?"dot":void 0),bb=y("spikemode",la?"across":void 0),sb=y("spikesnap");v("showspikes",!!za||!!Ha||!!Wa||!!Za||!!bb||!!sb)||(delete sa.spikecolor,delete sa.spikethickness,delete sa.spikedash,delete sa.spikemode,delete sa.spikesnap);e(oa,sa,v,
{letter:W,counterAxes:aa[W],overlayableAxes:F(W,ka),grid:A.grid});v("title.standoff");J();sa._input=oa}for(T=0;T<pa.length;)na=pa[T++],ka=q(na),W=ka.charAt(0),n.isPlainObject(B[ka])||(B[ka]={}),oa=B[ka],sa=g.newContainer(A,ka,W+"axis"),C(),H={letter:W,font:A.font,outerTicks:V[ka],showGrid:!S[ka],data:[],bgColor:fa,calendar:A.calendar,automargin:!0,visibleDflt:!1,reverseDflt:!1,autotypenumbersDflt:K,splomStash:((A._splomAxes||{})[W]||{})[na]},v("uirevision",A.uirevision),sa.type=wa[na]||"linear",c(oa,
sa,v,H,A),e(oa,sa,v,{letter:W,counterAxes:aa[W],overlayableAxes:F(W,ka),grid:A.grid}),v("fixedrange"),J(),sa._input=oa;K=z("rangeslider","handleDefaults");V=z("rangeselector","handleDefaults");for(T=0;T<ma.length;T++)ka=ma[T],oa=B[ka],sa=A[ka],K(B,A,ka),"date"===sa.type&&V(oa,sa,A,ia,sa.calendar),v("fixedrange");for(T=0;T<ia.length;T++)ka=ia[T],oa=B[ka],sa=A[ka],K=A[q(sa.anchor)],K=z("rangeslider","isVisible")(K),v("fixedrange",K);d.handleDefaults(B,A,{axIds:ra.concat(pa).sort(f.idSort),axHasImage:ba})}},
{"../../components/color":666,"../../components/fx/helpers":702,"../../components/fx/hovermode_defaults":705,"../../lib":803,"../../plot_api/plot_template":843,"../../registry":931,"../layout_attributes":908,"./axis_defaults":856,"./axis_ids":858,"./constants":861,"./constraints":862,"./layout_attributes":869,"./position_defaults":872,"./type_defaults":880}],871:[function(b,N,G){var p=b("tinycolor2").mix,n=b("../../components/color/attributes").lightFraction,k=b("../../lib");N.exports=function(m,
a,g,h){function r(e,f){return k.coerce2(m,a,h.attributes,e,f)}h=h||{};var l=h.dfltColor,c=r("linecolor",l),d=r("linewidth");g("showline",h.showLine||!!c||!!d)||(delete a.linecolor,delete a.linewidth);c=p(l,h.bgColor,h.blend||n).toRgbString();c=r("gridcolor",c);d=r("gridwidth");g("showgrid",h.showGrid||!!c||!!d)||(delete a.gridcolor,delete a.gridwidth);h.noZeroLine||(l=r("zerolinecolor",l),c=r("zerolinewidth"),g("zeroline",h.showGrid||!!l||!!c)||(delete a.zerolinecolor,delete a.zerolinewidth))}},{"../../components/color/attributes":665,
"../../lib":803,tinycolor2:598}],872:[function(b,N,G){var p=b("fast-isnumeric"),n=b("../../lib");N.exports=function(k,m,a,g){var h=g.counterAxes||[],r=g.overlayableAxes||[],l=g.letter;g=g.grid;if(g){var c=g._domains[l][g._axisMap[m._id]];var d=g._anchors[m._id];if(c){var e=g[l+"side"].split(" ")[0];var f=g.domain[l]["right"===e||"top"===e?1:0]}}c=c||[0,1];d=d||(p(k.position)?"free":h[0]||"free");e=e||("x"===l?"bottom":"left");f=f||0;"free"===n.coerce(k,m,{anchor:{valType:"enumerated",values:["free"].concat(h),
dflt:d}},"anchor")&&a("position",f);n.coerce(k,m,{side:{valType:"enumerated",values:"x"===l?["bottom","top"]:["left","right"],dflt:e}},"side");h=!1;r.length&&(h=n.coerce(k,m,{overlaying:{valType:"enumerated",values:[!1].concat(r),dflt:!1}},"overlaying"));h||(r=a("domain",c),r[0]>r[1]-1/4096&&(m.domain=c),n.noneOrAll(k.domain,m.domain,c));a("layer");return m}},{"../../lib":803,"fast-isnumeric":249}],873:[function(b,N,G){var p=b("../../constants/alignment").FROM_BL;N.exports=function(n,k,m){void 0===
m&&(m=p[n.constraintoward||"center"]);var a=[n.r2l(n.range[0]),n.r2l(n.range[1])];m=a[0]+(a[1]-a[0])*m;n.range=n._input.range=[n.l2r(m+(a[0]-m)*k),n.l2r(m+(a[1]-m)*k)];n.setScale()}},{"../../constants/alignment":771}],874:[function(b,N,G){function p(aa,ja,ma,ia,ra,wa,pa){var la=ja._hoverdata,ka=-1<ja._fullLayout.clickmode.indexOf("event"),na=[],oa;if(la&&Array.isArray(la)&&!0!==la[0].hoverOnBox){a(aa,ja,wa);ma=h(ja,ma,ia,ra);la=la[0];ia=-1;ra=[];var sa;for(sa=0;sa<ma.length;sa++){var za=ma[sa];if(la.fullData._expandedIndex===
za.cd[0].trace._expandedIndex){if(!0===la.hoverOnBox)break;void 0!==la.pointNumber?ia=la.pointNumber:void 0!==la.binNumber&&(ia=la.binNumber,ra=la.pointNumbers);break}}za={pointNumber:ia,pointNumbers:ra,searchInfo:za};if(0<za.pointNumbers.length)a:{ia=[];for(la=0;la<ma.length;la++)ra=ma[la],ra.cd[0].trace.selectedpoints&&0<ra.cd[0].trace.selectedpoints.length&&ia.push(ra);if(1===ia.length&&(la=ia[0]===za.searchInfo)&&(ia=za.searchInfo.cd[0].trace,ia.selectedpoints.length===za.pointNumbers.length)){for(la=
0;la<za.pointNumbers.length;la++)if(0>ia.selectedpoints.indexOf(za.pointNumbers[la])){la=!1;break a}la=!0;break a}la=!1}else{a:{for(ia=la=0;ia<ma.length;ia++)if(ra=ma[ia],ra=ra.cd[0].trace,ra.selectedpoints){if(1<ra.selectedpoints.length){la=!1;break a}la+=ra.selectedpoints.length;if(1<la){la=!1;break a}}la=1===la}la=la&&(oa=r(za))}if(la){pa&&pa.remove();for(oa=0;oa<ma.length;oa++)pa=ma[oa],pa._module.selectPoints(pa,!1);l(ja,ma);g(wa);ka&&ja.emit("plotly_deselect",null)}else{aa=aa.shiftKey&&(void 0!==
oa?oa:r(za));aa={pointNumber:za.pointNumber,searchInfo:za.searchInfo,subtract:aa};oa=wa.selectionDefs.concat([aa]);za=m(oa);for(oa=0;oa<ma.length;oa++)if(la=ma[oa]._module.selectPoints(ma[oa],za),la=d(la,ma[oa]),na.length)for(ia=0;ia<la.length;ia++)na.push(la[ia]);else na=la;na={points:na};l(ja,ma,na);aa&&wa&&wa.selectionDefs.push(aa);pa&&(ma=wa.mergedPolygons,aa=C(wa.dragmode),y(e(ma,aa),pa,wa));ka&&ja.emit("plotly_selected",na)}}}function n(aa){return"pointNumber"in aa&&"searchInfo"in aa}function k(aa){return{xmin:0,
xmax:0,ymin:0,ymax:0,pts:[],contains:function(ja,ma,ia,ra){return ra.cd[0].trace._expandedIndex===aa.searchInfo.cd[0].trace._expandedIndex&&ia===aa.pointNumber},isRect:!1,degenerate:!1,subtract:aa.subtract}}function m(aa){for(var ja=[],ma=n(aa[0])?0:aa[0][0][0],ia=ma,ra=n(aa[0])?0:aa[0][0][1],wa=ra,pa=0;pa<aa.length;pa++)if(n(aa[pa]))ja.push(k(aa[pa]));else{var la=M.tester(aa[pa]);la.subtract=aa[pa].subtract;ja.push(la);ma=Math.min(ma,la.xmin);ia=Math.max(ia,la.xmax);ra=Math.min(ra,la.ymin);wa=Math.max(wa,
la.ymax)}return{xmin:ma,xmax:ia,ymin:ra,ymax:wa,pts:[],contains:function(ka,na,oa,sa){for(var za=!1,Ha=0;Ha<ja.length;Ha++)ja[Ha].contains(ka,na,oa,sa)&&(za=!1===ja[Ha].subtract);return za},isRect:!1,degenerate:!1}}function a(aa,ja,ma){ja._fullLayout._drawing=!1;var ia=ja._fullLayout,ra=ma.plotinfo,wa=ma.dragmode,pa=ia._lastSelectedSubplot&&ia._lastSelectedSubplot===ra.id;aa=(aa.shiftKey||aa.altKey)&&!(D(wa)&&C(wa));pa&&aa&&ra.selection&&ra.selection.selectionDefs&&!ma.selectionDefs?(ma.selectionDefs=
ra.selection.selectionDefs,ma.mergedPolygons=ra.selection.mergedPolygons):aa&&ra.selection||g(ma);pa||(S(ja),ia._lastSelectedSubplot=ra.id)}function g(aa){var ja=aa.dragmode,ma=aa.plotinfo,ia=aa.gd;0<=ia._fullLayout._activeShapeIndex&&ia._fullLayout._deactivateShape(ia);D(ja)&&(ja=ia._fullLayout._zoomlayer.selectAll(".select-outline-"+ma.id))&&ia._fullLayout._drawing&&((ja=J(ja,aa))&&q.call("_guiRelayout",ia,{shapes:ja}),ia._fullLayout._drawing=!1);ma.selection={};ma.selection.selectionDefs=aa.selectionDefs=
[];ma.selection.mergedPolygons=aa.mergedPolygons=[]}function h(aa,ja,ma,ia){function ra(sa,za,Ha,Wa){return{_module:sa,cd:za,xaxis:Ha,yaxis:Wa}}var wa=[],pa=ja.map(function(sa){return sa._id}),la=ma.map(function(sa){return sa._id}),ka;for(ka=0;ka<aa.calcdata.length;ka++){var na=aa.calcdata[ka];var oa=na[0].trace;!0===oa.visible&&oa._module&&oa._module.selectPoints&&(!ia||oa.subplot!==ia&&oa.geo!==ia?"splom"===oa.type&&oa._xaxes[pa[0]]&&oa._yaxes[la[0]]?(na=ra(oa._module,na,ja[0],ma[0]),na.scene=aa._fullLayout._splomScenes[oa.uid],
wa.push(na)):"sankey"===oa.type?(oa=ra(oa._module,na,ja[0],ma[0]),wa.push(oa)):-1!==pa.indexOf(oa.xaxis)&&-1!==la.indexOf(oa.yaxis)&&wa.push(ra(oa._module,na,O(aa,oa.xaxis),O(aa,oa.yaxis))):wa.push(ra(oa._module,na,ja[0],ma[0])))}return wa}function r(aa){var ja=aa.searchInfo.cd[0].trace,ma=aa.pointNumber;aa=aa.pointNumbers;ma=0<aa.length?aa[0]:ma;return ja.selectedpoints?-1<ja.selectedpoints.indexOf(ma):!1}function l(aa,ja,ma){var ia;for(ia=0;ia<ja.length;ia++){var ra=ja[ia].cd[0].trace._fullInput;
var wa=aa._fullLayout._tracePreGUI[ra.uid]||{};void 0===wa.selectedpoints&&(wa.selectedpoints=ra._input.selectedpoints||null)}if(ma){ma=ma.points||[];for(ia=0;ia<ja.length;ia++){var pa=ja[ia].cd[0].trace;pa._input.selectedpoints=pa._fullInput.selectedpoints=[];pa._fullInput!==pa&&(pa.selectedpoints=[])}for(ia=0;ia<ma.length;ia++){ra=ma[ia];wa=ra.data;var la=ra.fullData;ra.pointIndices?([].push.apply(wa.selectedpoints,ra.pointIndices),pa._fullInput!==pa&&[].push.apply(la.selectedpoints,ra.pointIndices)):
(wa.selectedpoints.push(ra.pointIndex),pa._fullInput!==pa&&la.selectedpoints.push(ra.pointIndex))}}else for(ia=0;ia<ja.length;ia++)pa=ja[ia].cd[0].trace,delete pa.selectedpoints,delete pa._input.selectedpoints,pa._fullInput!==pa&&delete pa._fullInput.selectedpoints;ra=!1;for(ia=0;ia<ja.length;ia++)if(wa=ja[ia],ma=wa.cd,pa=ma[0].trace,q.traceIs(pa,"regl")&&(ra=!0),pa=wa._module,pa=pa.styleOnSelect||pa.style)pa(aa,ma,ma[0].node3),ma[0].nodeRangePlot3&&pa(aa,ma,ma[0].nodeRangePlot3);ra&&(I(aa),L(aa))}
function c(aa,ja,ma){if(ma)return aa=f.difference({regions:aa,inverted:!1},{regions:[ja],inverted:!1}),aa.regions;aa=f.union({regions:aa,inverted:!1},{regions:[ja],inverted:!1});return aa.regions}function d(aa,ja){if(Array.isArray(aa)){var ma=ja.cd;ja=ja.cd[0].trace;for(var ia=0;ia<aa.length;ia++)aa[ia]=z(aa[ia],ja,ma)}return aa}function e(aa,ja){for(var ma=[],ia=0;ia<aa.length;ia++){ma[ia]=[];for(var ra=0;ra<aa[ia].length;ra++){ma[ia][ra]=[];ma[ia][ra][0]=ra?"L":"M";for(var wa=0;wa<aa[ia][ra].length;wa++)ma[ia][ra].push(aa[ia][ra][wa])}ja||
ma[ia].push(["Z",ma[ia][0][1],ma[ia][0][2]])}return ma}var f=b("polybooljs"),q=b("../../registry"),t=b("../../components/drawing").dashStyle,w=b("../../components/color"),x=b("../../components/fx"),z=b("../../components/fx/helpers").makeEventData;G=b("../../components/dragelement/helpers");var B=G.freeMode,A=G.rectMode,D=G.drawMode,C=G.openMode,v=G.selectMode,y=b("../../components/shapes/draw_newshape/display_outlines"),F=b("../../components/shapes/draw_newshape/helpers").handleEllipse,J=b("../../components/shapes/draw_newshape/newshapes"),
K=b("../../lib"),M=b("../../lib/polygon"),H=b("../../lib/throttle"),O=b("./axis_ids").getFromId,I=b("../../lib/clear_gl_canvases"),L=b("../../plot_api/subroutines").redrawReglTraces,Q=b("./constants"),Z=Q.MINSELECT,ba=M.filter,V=M.tester,S=b("./handle_outline").clearSelect;b=b("./helpers");var T=b.p2r,fa=b.axValue,W=b.getTransform;N.exports={prepSelect:function(aa,ja,ma,ia,ra){function wa(Ia,Na){return Ia-Na}var pa=B(ra),la=A(ra),ka=C(ra),na=D(ra),oa=v(ra),sa="drawcircle"===ra,za="drawline"===ra||
sa,Ha=ia.gd,Wa=Ha._fullLayout,Za=Wa._zoomlayer,bb=ia.element.getBoundingClientRect(),sb=ia.plotinfo,hb=W(sb),ub=ja-bb.left,pb=ma-bb.top;Wa._calcInverseTransform(Ha);ja=K.apply3DTransform(Wa._invTransform)(ub,pb);ub=ja[0];pb=ja[1];var Ab=Wa._invScaleX,tb=Wa._invScaleY,vb=ub,qb=pb;ja="M"+ub+","+pb;var zb=ia.xaxes[0]._length,La=ia.yaxes[0]._length,Ka=ia.xaxes.concat(ia.yaxes),ya=aa.altKey&&!(D(ra)&&ka),Aa,Ja,Ta,$a,ab,Db,Nb;a(aa,Ha,ia);pa&&(Aa=ba([[ub,pb]],Q.BENDPX));var ec=Za.selectAll("path.select-outline-"+
sb.id).data(na?[0]:[1,2]);aa=Wa.newshape;ec.enter().append("path").attr("class",function(Ia){return"select-outline select-outline-"+Ia+" select-outline-"+sb.id}).style(na?{opacity:aa.opacity/2,fill:ka?void 0:aa.fillcolor,stroke:aa.line.color,"stroke-dasharray":t(aa.line.dash,aa.line.width),"stroke-width":aa.line.width+"px"}:{}).attr("fill-rule",aa.fillrule).classed("cursor-move",na?!0:!1).attr("transform",hb).attr("d",ja+"Z");var ob=Za.append("path").attr("class","zoombox-corners").style({fill:w.background,
stroke:w.defaultLine,"stroke-width":1}).attr("transform",hb).attr("d","M0,0Z"),Cb=Wa._uid+Q.SELECTID,Qb=[],yc=h(Ha,ia.xaxes,ia.yaxes,ia.subplot);var Jc=sb.fillRangeItems?sb.fillRangeItems:la?function(Ia,Na){Ia=Ia.range={};for(ab=0;ab<Ka.length;ab++){var ib=Ka[ab],Gb=ib._id.charAt(0);Ia[ib._id]=[T(ib,Na[Gb+"min"]),T(ib,Na[Gb+"max"])].sort(wa)}}:function(Ia,Na,ib){Ia=Ia.lassoPoints={};for(ab=0;ab<Ka.length;ab++)Na=Ka[ab],Ia[Na._id]=ib.filtered.map(fa(Na))};ia.moveFn=function(Ia,Na){vb=Math.max(0,Math.min(zb,
Ab*Ia+ub));qb=Math.max(0,Math.min(La,tb*Na+pb));Ia=Math.abs(vb-ub);Na=Math.abs(qb-pb);if(la){if(oa){var ib=Wa.selectdirection;ib="any"===ib?Na<Math.min(.6*Ia,Z)?"h":Ia<Math.min(.6*Na,Z)?"v":"d":ib;switch(ib){case "h":var Gb=sa?La/2:0;var Hb=La;break;case "v":Gb=sa?zb/2:0,Hb=zb}}if(na)switch(Wa.newshape.drawdirection){case "vertical":ib="h";Gb=sa?La/2:0;Hb=La;break;case "horizontal":ib="v";Gb=sa?zb/2:0;Hb=zb;break;case "ortho":Ia<Na?(ib="h",Gb=pb,Hb=qb):(ib="v",Gb=ub,Hb=vb);break;default:ib="d"}"h"===
ib?($a=za?F(sa,[vb,Gb],[vb,Hb]):[[ub,Gb],[ub,Hb],[vb,Hb],[vb,Gb]],$a.xmin=za?vb:Math.min(ub,vb),$a.xmax=za?vb:Math.max(ub,vb),$a.ymin=Math.min(Gb,Hb),$a.ymax=Math.max(Gb,Hb),ob.attr("d","M"+$a.xmin+","+(pb-Z)+"h-4v"+2*Z+"h4ZM"+($a.xmax-1)+","+(pb-Z)+"h4v"+2*Z+"h-4Z")):"v"===ib?($a=za?F(sa,[Gb,qb],[Hb,qb]):[[Gb,pb],[Gb,qb],[Hb,qb],[Hb,pb]],$a.xmin=Math.min(Gb,Hb),$a.xmax=Math.max(Gb,Hb),$a.ymin=za?qb:Math.min(pb,qb),$a.ymax=za?qb:Math.max(pb,qb),ob.attr("d","M"+(ub-Z)+","+$a.ymin+"v-4h"+2*Z+"v4ZM"+
(ub-Z)+","+($a.ymax-1)+"v4h"+2*Z+"v-4Z")):"d"===ib&&($a=za?F(sa,[ub,pb],[vb,qb]):[[ub,pb],[ub,qb],[vb,qb],[vb,pb]],$a.xmin=Math.min(ub,vb),$a.xmax=Math.max(ub,vb),$a.ymin=Math.min(pb,qb),$a.ymax=Math.max(pb,qb),ob.attr("d","M0,0Z"))}else pa&&(Aa.addPt([vb,qb]),$a=Aa.filtered);ia.selectionDefs&&ia.selectionDefs.length?(Ta=c(ia.mergedPolygons,$a,ya),$a.subtract=ya,Ja=m(ia.selectionDefs.concat([$a]))):(Ta=[$a],Ja=V($a));y(e(Ta,ka),ec,ia);oa&&H.throttle(Cb,Q.SELECTDELAY,function(){Qb=[];var $b=[];for(ab=
0;ab<yc.length;ab++){Db=yc[ab];var uc=Db._module.selectPoints(Db,Ja);$b.push(uc);uc=d(uc,Db);if(Qb.length)for(var fd=0;fd<uc.length;fd++)Qb.push(uc[fd]);else Qb=uc}Nb={points:Qb};l(Ha,yc,Nb);Jc(Nb,$a,Aa);ia.gd.emit("plotly_selecting",Nb)})};ia.clickFn=function(Ia,Na){ob.remove();if(0<=Ha._fullLayout._activeShapeIndex)Ha._fullLayout._deactivateShape(Ha);else if(!na){var ib=Wa.clickmode;H.done(Cb).then(function(){H.clear(Cb);if(2===Ia){ec.remove();for(ab=0;ab<yc.length;ab++)Db=yc[ab],Db._module.selectPoints(Db,
!1);l(Ha,yc);g(ia);Ha.emit("plotly_deselect",null)}else-1<ib.indexOf("select")&&p(Na,Ha,ia.xaxes,ia.yaxes,ia.subplot,ia,ec),"event"===ib&&Ha.emit("plotly_selected",void 0);x.click(Ha,Na)}).catch(K.error)}};ia.doneFn=function(){ob.remove();H.done(Cb).then(function(){H.clear(Cb);ia.gd.emit("plotly_selected",Nb);$a&&ia.selectionDefs&&($a.subtract=ya,ia.selectionDefs.push($a),ia.mergedPolygons.length=0,[].push.apply(ia.mergedPolygons,Ta));ia.doneFnCompleted&&ia.doneFnCompleted(Qb)}).catch(K.error);na&&
g(ia)}},clearSelect:S,clearSelectionsCache:g,selectOnClick:p}},{"../../components/color":666,"../../components/dragelement/helpers":684,"../../components/drawing":688,"../../components/fx":706,"../../components/fx/helpers":702,"../../components/shapes/draw_newshape/display_outlines":754,"../../components/shapes/draw_newshape/helpers":755,"../../components/shapes/draw_newshape/newshapes":756,"../../lib":803,"../../lib/clear_gl_canvases":787,"../../lib/polygon":815,"../../lib/throttle":830,"../../plot_api/subroutines":844,
"../../registry":931,"./axis_ids":858,"./constants":861,"./handle_outline":865,"./helpers":866,polybooljs:504}],875:[function(b,N,G){function p(y){return Math.pow(10,y)}var n=b("@plotly/d3"),k=b("d3-time-format").utcFormat,m=b("../../lib"),a=m.numberFormat,g=b("fast-isnumeric"),h=m.cleanNumber,r=m.ms2DateTime,l=m.dateTime2ms,c=m.ensureNumber,d=m.isArrayOrTypedArray;G=b("../../constants/numerical");var e=G.FP_SAFE,f=G.BADNUM,q=G.LOG_CLIP,t=G.ONEWEEK,w=G.ONEDAY,x=G.ONEHOUR,z=G.ONEMIN,B=G.ONESEC,A=b("./axis_ids"),
D=b("./constants"),C=D.HOUR_PATTERN,v=D.WEEKDAY_PATTERN;N.exports=function(y,F){function J(W,aa){return 0<W?Math.log(W)/Math.LN10:0>=W&&aa&&y.range&&2===y.range.length?(W=y.range[0],aa=y.range[1],.5*(W+aa-2*q*Math.abs(W-aa))):f}function K(W,aa,ja,ma){if((ma||{}).msUTC&&g(W))return+W;aa=l(W,ja||y.calendar);if(aa===f)if(g(W))W=+W,aa=Math.floor(10*m.mod(W+.05,1)),aa=l(new Date(Math.round(W-aa/10)))+aa/10;else return f;return aa}function M(W,aa,ja){return r(W,aa,ja||y.calendar)}function H(W){return y._categories[Math.round(W)]}
function O(W){if(null!==W&&void 0!==W){void 0===y._categoriesMap&&(y._categoriesMap={});if(void 0!==y._categoriesMap[W])return y._categoriesMap[W];y._categories.push("number"===typeof W?String(W):W);var aa=y._categories.length-1;return y._categoriesMap[W]=aa}return f}function I(W){if(y._categoriesMap)return y._categoriesMap[W]}function L(W){var aa=I(W);if(void 0!==aa)return aa;if(g(W))return+W}function Q(W){return g(W)?+W:I(W)}F=F||{};var Z=y._id||"x",ba=Z.charAt(0),V=function(W){return g(W)?n.round(y._b+
y._m*W,2):f},S=function(W){return(W-y._b)/y._m};if(y.rangebreaks){var T="y"===ba;V=function(W){if(!g(W))return f;var aa=y._rangebreaks.length;if(!aa)return n.round(y._b+y._m*W,2);var ja=T;y.range[0]>y.range[1]&&(ja=!ja);ja=ja?-1:1;for(var ma=ja*W,ia=0,ra=0;ra<aa;ra++){var wa=ja*y._rangebreaks[ra].min,pa=ja*y._rangebreaks[ra].max;if(ma<wa)break;if(ma>pa)ia=ra+1;else{ia=ma<(wa+pa)/2?ra:ra+1;break}}aa=y._B[ia]||0;return isFinite(aa)?n.round(aa+y._m2*W,2):0};S=function(W){var aa=y._rangebreaks.length;
if(!aa)return(W-y._b)/y._m;for(var ja=0,ma=0;ma<aa&&!(W<y._rangebreaks[ma].pmin);ma++)W>y._rangebreaks[ma].pmax&&(ja=ma+1);return(W-y._B[ja])/y._m2}}y.c2l="log"===y.type?J:c;y.l2c="log"===y.type?p:c;y.l2p=V;y.p2l=S;y.c2p="log"===y.type?function(W,aa){return V(J(W,aa))}:V;y.p2c="log"===y.type?function(W){return p(S(W))}:S;-1!==["linear","-"].indexOf(y.type)?(y.d2r=y.r2d=y.d2c=y.r2c=y.d2l=y.r2l=h,y.c2d=y.c2r=y.l2d=y.l2r=c,y.d2p=y.r2p=function(W){return y.l2p(h(W))},y.p2d=y.p2r=S,y.cleanPos=c):"log"===
y.type?(y.d2r=y.d2l=function(W,aa){return J(h(W),aa)},y.r2d=y.r2c=function(W){return p(h(W))},y.d2c=y.r2l=h,y.c2d=y.l2r=c,y.c2r=J,y.l2d=p,y.d2p=function(W,aa){return y.l2p(y.d2r(W,aa))},y.p2d=function(W){return p(S(W))},y.r2p=function(W){return y.l2p(h(W))},y.p2r=S,y.cleanPos=c):"date"===y.type?(y.d2r=y.r2d=m.identity,y.d2c=y.r2c=y.d2l=y.r2l=K,y.c2d=y.c2r=y.l2d=y.l2r=M,y.d2p=y.r2p=function(W,aa,ja){return y.l2p(K(W,0,ja))},y.p2d=y.p2r=function(W,aa,ja){return M(S(W),aa,ja)},y.cleanPos=function(W){return m.cleanDate(W,
f,y.calendar)}):"category"===y.type?(y.d2c=y.d2l=O,y.r2d=y.c2d=y.l2d=H,y.d2r=y.d2l_noadd=L,y.r2c=function(W){W=Q(W);return void 0!==W?W:y.fraction2r(.5)},y.l2r=y.c2r=c,y.r2l=Q,y.d2p=function(W){return y.l2p(y.r2c(W))},y.p2d=function(W){return H(S(W))},y.r2p=y.d2p,y.p2r=S,y.cleanPos=function(W){return"string"===typeof W&&""!==W?W:c(W)}):"multicategory"===y.type&&(y.r2d=y.c2d=y.l2d=H,y.d2r=y.d2l_noadd=L,y.r2c=function(W){W=L(W);return void 0!==W?W:y.fraction2r(.5)},y.r2c_just_indices=I,y.l2r=y.c2r=
c,y.r2l=L,y.d2p=function(W){return y.l2p(y.r2c(W))},y.p2d=function(W){return H(S(W))},y.r2p=y.d2p,y.p2r=S,y.cleanPos=function(W){return Array.isArray(W)||"string"===typeof W&&""!==W?W:c(W)},y.setupMultiCategory=function(W){var aa=y._traceIndices,ja,ma=y._matchGroup;if(ma&&0===y._categories.length)for(ja in ma)ja!==Z&&(ma=F[A.id2name(ja)],aa=aa.concat(ma._traceIndices));var ia=[[0,{}],[0,{}]];ma=[];for(ja=0;ja<aa.length;ja++){var ra=W[aa[ja]];if(ba in ra){var wa=ra[ba],pa=ra._length||m.minRowLength(wa);
if(d(wa[0])&&d(wa[1]))for(ra=0;ra<pa;ra++){var la=wa[0][ra],ka=wa[1][ra];null!==la&&void 0!==la&&null!==ka&&void 0!==ka&&(ma.push([la,ka]),la in ia[0][1]||(ia[0][1][la]=ia[0][0]++),ka in ia[1][1]||(ia[1][1][ka]=ia[1][0]++))}}}ma.sort(function(na,oa){var sa=ia[0][1];if(sa=sa[na[0]]-sa[oa[0]])return sa;sa=ia[1][1];return sa[na[1]]-sa[oa[1]]});for(ja=0;ja<ma.length;ja++)O(ma[ja])});y.fraction2r=function(W){var aa=y.r2l(y.range[0]),ja=y.r2l(y.range[1]);return y.l2r(aa+W*(ja-aa))};y.r2fraction=function(W){var aa=
y.r2l(y.range[0]),ja=y.r2l(y.range[1]);return(y.r2l(W)-aa)/(ja-aa)};y.cleanRange=function(W,aa){aa||(aa={});W||(W="range");var ja=m.nestedProperty(y,W).get();var ma="date"===y.type?m.dfltRange(y.calendar):"y"===ba?D.DFLTRANGEY:aa.dfltRange||D.DFLTRANGEX;ma=ma.slice();if("tozero"===y.rangemode||"nonnegative"===y.rangemode)ma[0]=0;if(ja&&2===ja.length)for("date"!==y.type||y.autorange||(ja[0]=m.cleanDate(ja[0],f,y.calendar),ja[1]=m.cleanDate(ja[1],f,y.calendar)),aa=0;2>aa;aa++)if("date"===y.type){if(!m.isDateTime(ja[aa],
y.calendar)){y[W]=ma;break}if(y.r2l(ja[0])===y.r2l(ja[1])){W=m.constrain(y.r2l(ja[0]),m.MIN_MS+1E3,m.MAX_MS-1E3);ja[0]=y.l2r(W-1E3);ja[1]=y.l2r(W+1E3);break}}else{if(!g(ja[aa]))if(g(ja[1-aa]))ja[aa]=ja[1-aa]*(aa?10:.1);else{y[W]=ma;break}ja[aa]<-e?ja[aa]=-e:ja[aa]>e&&(ja[aa]=e);if(ja[0]===ja[1]){var ia=Math.max(1,Math.abs(1E-6*ja[0]));ja[0]-=ia;ja[1]+=ia}}else m.nestedProperty(y,W).set(ma)};y.setScale=function(W){var aa=F._size;if(y.overlaying){var ja=A.getFromId({_fullLayout:F},y.overlaying);y.domain=
ja.domain}ja=W&&y._r?"_r":"range";var ma=y.calendar;y.cleanRange(ja);W=y.r2l(y[ja][0],ma);ja=y.r2l(y[ja][1],ma);(ma="y"===ba)?(y._offset=aa.t+(1-y.domain[1])*aa.h,y._length=aa.h*(y.domain[1]-y.domain[0]),y._m=y._length/(W-ja),y._b=-y._m*ja):(y._offset=aa.l+y.domain[0]*aa.w,y._length=aa.w*(y.domain[1]-y.domain[0]),y._m=y._length/(ja-W),y._b=-y._m*W);y._rangebreaks=[];y._lBreaks=0;y._m2=0;y._B=[];if(y.rangebreaks&&(y._rangebreaks=y.locateBreaks(Math.min(W,ja),Math.max(W,ja)),y._rangebreaks.length)){for(aa=
0;aa<y._rangebreaks.length;aa++){var ia=y._rangebreaks[aa];y._lBreaks+=Math.abs(ia.max-ia.min)}aa=ma;W>ja&&(aa=!aa);aa&&y._rangebreaks.reverse();var ra=aa?-1:1;y._m2=ra*y._length/(Math.abs(ja-W)-y._lBreaks);y._B.push(-y._m2*(ma?ja:W));for(aa=0;aa<y._rangebreaks.length;aa++)ia=y._rangebreaks[aa],y._B.push(y._B[y._B.length-1]-ra*y._m2*(ia.max-ia.min));for(aa=0;aa<y._rangebreaks.length;aa++)ia=y._rangebreaks[aa],ia.pmin=V(ia.min),ia.pmax=V(ia.max)}if(!isFinite(y._m)||!isFinite(y._b)||0>y._length)throw F._replotting=
!1,Error("Something went wrong with axis scaling");};y.maskBreaks=function(W){var aa=y.rangebreaks||[];aa._cachedPatterns||(aa._cachedPatterns=aa.map(function(ka){return ka.enabled&&ka.bounds?m.simpleMap(ka.bounds,ka.pattern?h:y.d2c):null}));aa._cachedValues||(aa._cachedValues=aa.map(function(ka){return ka.enabled&&ka.values?m.simpleMap(ka.values,y.d2c).sort(m.sorterAsc):null}));for(var ja=0;ja<aa.length;ja++){var ma=aa[ja];if(ma.enabled)if(ma.bounds){ma=ma.pattern;var ia=aa._cachedPatterns[ja];var ra=
ia[0];ia=ia[1];switch(ma){case v:var wa=new Date(W);var pa=wa.getUTCDay();ra>ia&&(ia+=7,pa<ra&&(pa+=7));break;case C:wa=new Date(W);pa=wa.getUTCHours();ma=wa.getUTCMinutes();var la=wa.getUTCSeconds();wa=wa.getUTCMilliseconds();pa+=ma/60+la/3600+wa/36E5;ra>ia&&(ia+=24,pa<ra&&(pa+=24));break;case "":pa=W}if(pa>=ra&&pa<ia)return f}else for(la=aa._cachedValues[ja],wa=0;wa<la.length;wa++)if(ra=la[wa],ia=ra+ma.dvalue,W>=ra&&W<ia)return f}return W};y.locateBreaks=function(W,aa){var ja,ma=[];if(!y.rangebreaks)return ma;
var ia=y.rangebreaks.slice().sort(function(za,Ha){return za.pattern===v&&Ha.pattern===C?-1:Ha.pattern===v&&za.pattern===C?1:0}),ra=function(za,Ha){za=m.constrain(za,W,aa);Ha=m.constrain(Ha,W,aa);if(za!==Ha){for(var Wa=!0,Za=0;Za<ma.length;Za++){var bb=ma[Za];za<bb.max&&Ha>=bb.min&&(za<bb.min&&(bb.min=za),Ha>bb.max&&(bb.max=Ha),Wa=!1)}Wa&&ma.push({min:za,max:Ha})}};for(ja=0;ja<ia.length;ja++){var wa=ia[ja];if(wa.enabled)if(wa.bounds){var pa=W,la=aa;wa.pattern&&(pa=Math.floor(pa));var ka=m.simpleMap(wa.bounds,
wa.pattern?h:y.r2l);var na=ka[0];var oa=ka[1];var sa=new Date(pa);switch(wa.pattern){case v:wa=t;oa=((oa<na?7:0)+(oa-na))*w;pa+=na*w-(sa.getUTCDay()*w+sa.getUTCHours()*x+sa.getUTCMinutes()*z+sa.getUTCSeconds()*B+sa.getUTCMilliseconds());break;case C:wa=w;oa=((oa<na?24:0)+(oa-na))*x;pa+=na*x-(sa.getUTCHours()*x+sa.getUTCMinutes()*z+sa.getUTCSeconds()*B+sa.getUTCMilliseconds());break;default:pa=Math.min(ka[0],ka[1]),la=Math.max(ka[0],ka[1]),oa=wa=la-pa}for(na=pa;na<la;na+=wa)ra(na,na+oa)}else for(la=
m.simpleMap(wa.values,y.d2c),pa=0;pa<la.length;pa++)na=la[pa],oa=na+wa.dvalue,ra(na,oa)}ma.sort(function(za,Ha){return za.min-Ha.min});return ma};y.makeCalcdata=function(W,aa,ja){var ma;var ia=y.type;var ra="date"===ia&&W[aa+"calendar"];if(aa in W){aa=W[aa];W=W._length||m.minRowLength(aa);if(m.isTypedArray(aa)&&("linear"===ia||"log"===ia)){if(W===aa.length)return aa;if(aa.subarray)return aa.subarray(0,W)}if("multicategory"===ia){ja=Array(W);for(ra=0;ra<W;ra++)ja[ra]=I([(aa[0]||[])[ra],(aa[1]||[])[ra]]);
return ja}ia=Array(W);for(ma=0;ma<W;ma++)ia[ma]=y.d2c(aa[ma],0,ra,ja)}else for(ja=(aa+"0"in W)?y.d2c(W[aa+"0"],0,ra):0,ra=W["d"+aa]?Number(W["d"+aa]):1,aa=W[{x:"y",y:"x"}[aa]],W=W._length||aa.length,ia=Array(W),ma=0;ma<W;ma++)ia[ma]=ja+ma*ra;if(y.rangebreaks)for(ma=0;ma<W;ma++)ia[ma]=y.maskBreaks(ia[ma]);return ia};y.isValidRange=function(W){return Array.isArray(W)&&2===W.length&&g(y.r2l(W[0]))&&g(y.r2l(W[1]))};y.isPtWithinRange=function(W,aa){W=y.c2l(W[ba],null,aa);aa=y.r2l(y.range[0]);var ja=y.r2l(y.range[1]);
return aa<ja?aa<=W&&W<=ja:ja<=W&&W<=aa};y._emptyCategories=function(){y._categories=[];y._categoriesMap={}};y.clearCalc=function(){var W=y._matchGroup;if(W){var aa=null,ja=null,ma;for(ma in W)if(W=F[A.id2name(ma)],W._categories){aa=W._categories;ja=W._categoriesMap;break}aa&&ja?(y._categories=aa,y._categoriesMap=ja):y._emptyCategories()}else y._emptyCategories();if(y._initialCategories)for(aa=0;aa<y._initialCategories.length;aa++)O(y._initialCategories[aa])};y.sortByInitialCategories=function(){var W=
[];y._emptyCategories();if(y._initialCategories)for(var aa=0;aa<y._initialCategories.length;aa++)O(y._initialCategories[aa]);W=W.concat(y._traceIndices);aa=y._matchGroup;for(var ja in aa)Z!==ja&&(aa=F[A.id2name(ja)],aa._categories=y._categories,aa._categoriesMap=y._categoriesMap,W=W.concat(aa._traceIndices));return W};var fa=F._d3locale;"date"===y.type&&(y._dateFormat=fa?fa.timeFormat:k,y._extraFormat=F._extraFormat);y._separators=F.separators;y._numFormat=fa?fa.numberFormat:a;delete y._minDtick;
delete y._forceTick0}},{"../../constants/numerical":779,"../../lib":803,"./axis_ids":858,"./constants":861,"@plotly/d3":58,"d3-time-format":175,"fast-isnumeric":249}],876:[function(b,N,G){function p(h){var r=["showexponent","showtickprefix","showticksuffix"].filter(function(l){return void 0!==h[l]});if(r.every(function(l){return h[l]===h[r[0]]})||1===r.length)return h[r[0]]}function n(h,r){k.coerce(h,r,a.tickformatstops,"enabled",void 0)&&(k.coerce(h,r,a.tickformatstops,"dtickrange",void 0),k.coerce(h,
r,a.tickformatstops,"value",void 0))}var k=b("../../lib"),m=b("../../components/color").contrast,a=b("./layout_attributes"),g=b("../array_container_defaults");N.exports=function(h,r,l,c,d,e){if(!e||1===e.pass){var f=p(h);l("tickprefix")&&l("showtickprefix",f);l("ticksuffix",d.tickSuffixDflt)&&l("showticksuffix",f)}if(!e||2===e.pass)if(e=p(h),l("tickprefix")&&l("showtickprefix",e),l("ticksuffix",d.tickSuffixDflt)&&l("showticksuffix",e),l("showticklabels")){f=d.font||{};var q=r.color;d=-1!==(r.ticklabelposition||
"").indexOf("inside")?m(d.bgColor):q&&q!==a.color.dflt?q:f.color;k.coerceFont(l,"tickfont",{family:f.family,size:f.size,color:d});l("tickangle");"category"!==c&&(d=l("tickformat"),g(h,r,{name:"tickformatstops",inclusionAttr:"enabled",handleItemDefaults:n}),r.tickformatstops.length||delete r.tickformatstops,d||"date"===c||(l("showexponent",e),l("exponentformat"),l("minexponent"),l("separatethousands")))}}},{"../../components/color":666,"../../lib":803,"../array_container_defaults":849,"./layout_attributes":869}],
877:[function(b,N,G){var p=b("../../lib"),n=b("./layout_attributes");N.exports=function(k,m,a,g){var h=p.coerce2(k,m,n,"ticklen"),r=p.coerce2(k,m,n,"tickwidth");k=p.coerce2(k,m,n,"tickcolor",m.color);a("ticks",g.outerTicks||h||r||k?"outside":"")||(delete m.ticklen,delete m.tickwidth,delete m.tickcolor)}},{"../../lib":803,"./layout_attributes":869}],878:[function(b,N,G){var p=b("./clean_ticks"),n=b("../../lib").isArrayOrTypedArray;N.exports=function(k,m,a,g){function h(d){var e=k[d];return void 0!==
e?e:(m._template||{})[d]}var r=h("tick0"),l=h("dtick"),c=h("tickvals");c=n(c)?"array":l?"linear":"auto";c=a("tickmode",c);"auto"===c?a("nticks"):"linear"===c?(a=m.dtick=p.dtick(l,g),m.tick0=p.tick0(r,g,m.calendar,a)):"multicategory"!==g&&(void 0===a("tickvals")?m.tickmode="auto":a("ticktext"))}},{"../../lib":803,"./clean_ticks":860}],879:[function(b,N,G){var p=b("@plotly/d3"),n=b("../../registry"),k=b("../../lib"),m=b("../../components/drawing"),a=b("./axes");N.exports=function(g,h,r,l){function c(A){var D=
A.xaxis,C=A.yaxis;q._defs.select("#"+A.clipId+"\x3e rect").call(m.setTranslate,0,0).call(m.setScale,1,1);A.plot.call(m.setTranslate,D._offset,C._offset).call(m.setScale,1,1);D=A.plot.selectAll(".scatterlayer .trace");D.selectAll(".point").call(m.setPointGroupScale,1,1);D.selectAll(".textpoint").call(m.setTextPointsScale,1,1);D.call(m.hideOutsideRangePoints,A)}function d(){for(var A={},D=0;D<h.length;D++){var C=h[D],v=C.plotinfo.xaxis,y=C.plotinfo.yaxis;C.xr1&&(A[v._name+".range"]=C.xr1.slice());C.yr1&&
(A[y._name+".range"]=C.yr1.slice())}t&&t();return n.call("relayout",g,A).then(function(){for(var F=0;F<h.length;F++)c(h[F].plotinfo)})}function e(){for(var A={},D=0;D<h.length;D++){var C=h[D],v=C.plotinfo.xaxis,y=C.plotinfo.yaxis;C.xr0&&(A[v._name+".range"]=C.xr0.slice());C.yr0&&(A[y._name+".range"]=C.yr0.slice())}return n.call("relayout",g,A).then(function(){for(var F=0;F<h.length;F++)c(h[F].plotinfo)})}function f(){w=Date.now();for(var A=x(Math.min(1,(w-z)/r.duration)),D=0;D<h.length;D++){var C=
h[D],v=A,y=C.plotinfo,F=y.xaxis,J=y.yaxis,K=F._length,M=J._length,H=!!C.xr1,O=!!C.yr1,I=[];if(H){var L=k.simpleMap(C.xr0,F.r2l),Q=k.simpleMap(C.xr1,F.r2l),Z=L[1]-L[0],ba=Q[1]-Q[0];I[0]=(L[0]*(1-v)+v*Q[0]-L[0])/(L[1]-L[0])*K;I[2]=K*(1-v+v*ba/Z);F.range[0]=F.l2r(L[0]*(1-v)+v*Q[0]);F.range[1]=F.l2r(L[1]*(1-v)+v*Q[1])}else I[0]=0,I[2]=K;O?(L=k.simpleMap(C.yr0,J.r2l),C=k.simpleMap(C.yr1,J.r2l),Q=L[1]-L[0],Z=C[1]-C[0],I[1]=(L[1]*(1-v)+v*C[1]-L[1])/(L[0]-L[1])*M,I[3]=M*(1-v+v*Z/Q),J.range[0]=F.l2r(L[0]*
(1-v)+v*C[0]),J.range[1]=J.l2r(L[1]*(1-v)+v*C[1])):(I[1]=0,I[3]=M);a.drawOne(g,F,{skipTitle:!0});a.drawOne(g,J,{skipTitle:!0});a.redrawComponents(g,[F._id,J._id]);v=H?K/I[2]:1;C=O?M/I[3]:1;F=F._offset-(H?I[0]/I[2]*K:0);J=J._offset-(O?I[1]/I[3]*M:0);y.clipRect.call(m.setTranslate,H?I[0]:0,O?I[1]:0).call(m.setScale,1/v,1/C);y.plot.call(m.setTranslate,F,J).call(m.setScale,v,C);m.setPointGroupScale(y.zoomScalePts,1/v,1/C);m.setTextPointsScale(y.zoomScaleTxt,1/v,1/C)}w-z>r.duration?(d(),B=window.cancelAnimationFrame(f)):
B=window.requestAnimationFrame(f)}var q=g._fullLayout;if(0===h.length)a.redrawComponents(g);else{var t;l&&(t=l());var w,x=p.ease(r.easing);g._transitionData._interruptCallbacks.push(function(){window.cancelAnimationFrame(B);B=null;return e()});var z=Date.now();var B=window.requestAnimationFrame(f);return Promise.resolve()}}},{"../../components/drawing":688,"../../lib":803,"../../registry":931,"./axes":854,"@plotly/d3":58}],880:[function(b,N,G){function p(m,a){var g={v:"x",h:"y"}[m.orientation||"v"],
h=n(m,"box-violin"),r=n(m._fullInput||{},"candlestick");return h&&!r&&a===g&&void 0===m[g]&&void 0===m[g+"0"]}var n=b("../../registry").traceIs,k=b("./axis_autotype");N.exports=function(m,a,g,h){g("autotypenumbers",h.autotypenumbersDflt);if("-"===g("type",(h.splomStash||{}).type)){g=h.data;if("-"===a.type){h=a._id;var r=h.charAt(0);-1!==h.indexOf("scene")&&(h=r);b:{for(var l=h,c=0;c<g.length;c++){var d=g[c];if("splom"===d.type&&0<d._length&&(d["_"+r+"axes"]||{})[l]||(d[r+"axis"]||r)===l&&(p(d,r)||
(d[r]||[]).length||d[r+"0"])){var e=d;break b}}e=void 0}if(e)if("histogram"===e.type&&r==={v:"y",h:"x"}[e.orientation||"v"])a.type="linear";else if(d=r+"calendar",l=e[d],c={noMultiCategory:!n(e,"cartesian")||n(e,"noMultiCategory")},"box"===e.type&&e._hasPreCompStats&&r==={h:"x",v:"y"}[e.orientation||"v"]&&(c.noMultiCategory=!0),c.autotypenumbers=a.autotypenumbers,p(e,r)){var f={v:"x",h:"y"}[e.orientation||"v"],q=[];for(e=0;e<g.length;e++){var t=g[e];n(t,"box-violin")&&(t[r+"axis"]||r)===h&&(void 0!==
t[f]?q.push(t[f][0]):void 0!==t.name?q.push(t.name):q.push("text"),t[d]!==l&&(l=void 0))}a.type=k(q,l,c)}else"splom"===e.type?(g=e.dimensions[e._axesDim[h]],g.visible&&(a.type=k(g.values,l,c))):a.type=k(e[r]||[e[r+"0"]],l,c)}"-"===a.type?a.type="linear":m.type=a.type}}},{"../../registry":931,"./axis_autotype":855}],881:[function(b,N,G){function p(h,r,l){var c=!1;if("data"===r.type)h=h._fullData[null!==r.traces?r.traces[0]:0];else if("layout"===r.type)h=h._fullLayout;else return!1;h=g.nestedProperty(h,
r.prop).get();l=l[r.type]=l[r.type]||{};l.hasOwnProperty(r.prop)&&l[r.prop]!==h&&(c=!0);l[r.prop]=h;return{changed:c,value:h}}function n(h,r){var l=[];h=r[0];var c={};if("string"===typeof h)c[h]=r[1];else if(g.isPlainObject(h))c=h;else return l;m(c,function(d,e,f){l.push({type:"layout",prop:d,value:f})},"",0);return l}function k(h,r){var l=[];var c=r[0];var d=r[1];var e=r[2];r={};if("string"===typeof c)r[c]=d;else if(g.isPlainObject(c))r=c,void 0===e&&(e=d);else return l;void 0===e&&(e=null);m(r,
function(f,q,t){if(Array.isArray(t)){t=t.slice();var w=Math.min(t.length,h.data.length);e&&(w=Math.min(w,e.length));q=[];for(var x=0;x<w;x++)q[x]=e?e[x]:x}else q=e?e.slice():null;if(null===q)Array.isArray(t)&&(t=t[0]);else if(Array.isArray(q)){if(!Array.isArray(t))for(w=t,t=[],x=0;x<q.length;x++)t[x]=w;t.length=Math.min(q.length,t.length)}l.push({type:"data",prop:f,traces:q,value:t})},"",0);return l}function m(h,r,l,c){Object.keys(h).forEach(function(d){var e=h[d];if("_"!==d[0]){var f=l+(0<c?".":
"")+d;g.isPlainObject(e)?m(e,r,f,c+1):r(f,d,e)}})}var a=b("../registry"),g=b("../lib");G.manageCommandObserver=function(h,r,l,c){var d={},e=!0;r&&r._commandObserver&&(d=r._commandObserver);d.cache||(d.cache={});d.lookupTable={};var f=G.hasSimpleAPICommandBindings(h,l,d.lookupTable);if(r&&r._commandObserver){if(f)return d;if(r._commandObserver.remove)return r._commandObserver.remove(),r._commandObserver=null,d}if(f){p(h,f,d.cache);d.check=function(){if(e){var t=p(h,f,d.cache);t.changed&&c&&void 0!==
d.lookupTable[t.value]&&(d.disable(),Promise.resolve(c({value:t.value,type:f.type,prop:f.prop,traces:f.traces,index:d.lookupTable[t.value]})).then(d.enable,d.enable));return t.changed}};var q="plotly_relayout plotly_redraw plotly_restyle plotly_update plotly_animatingframe plotly_afterplot".split(" ");for(l=0;l<q.length;l++)h._internalOn(q[l],d.check);d.remove=function(){for(var t=0;t<q.length;t++)h._removeInternalListener(q[t],d.check)}}else g.log("Unable to automatically bind plot updates to API command"),
d.lookupTable={},d.remove=function(){};d.disable=function(){e=!1};d.enable=function(){e=!0};r&&(r._commandObserver=d);return d};G.hasSimpleAPICommandBindings=function(h,r,l){var c,d=r.length;for(c=0;c<d;c++){var e=r[c];var f=e.method;e=e.args;Array.isArray(e)||(e=[]);if(!f)return!1;e=G.computeAPICommandBindings(h,f,e);if(1!==e.length)return!1;if(t){f=e[0];if(f.type!==t.type||f.prop!==t.prop)return!1;if(Array.isArray(t.traces))if(Array.isArray(f.traces)){f.traces.sort();for(var q=0;q<t.traces.length;q++)if(t.traces[q]!==
f.traces[q])return!1}else return!1;else if(f.prop!==t.prop)return!1}else{var t=e[0];Array.isArray(t.traces)&&t.traces.sort()}f=e[0];f=f.value;if(Array.isArray(f))if(1===f.length)f=f[0];else return!1;l&&(l[f]=c)}return t};G.executeAPICommand=function(h,r,l){if("skip"===r)return Promise.resolve();var c=a.apiMethodRegistry[r];h=[h];Array.isArray(l)||(l=[]);for(var d=0;d<l.length;d++)h.push(l[d]);return c.apply(null,h).catch(function(e){g.warn("API call to Plotly."+r+" rejected.",e);return Promise.reject(e)})};
G.computeAPICommandBindings=function(h,r,l){Array.isArray(l)||(l=[]);switch(r){case "restyle":h=k(h,l);break;case "relayout":h=n(h,l);break;case "update":h=k(h,[l[0],l[2]]).concat(n(h,[l[1]]));break;case "animate":h=l;h=Array.isArray(h[0])&&1===h[0].length&&-1!==["string","number"].indexOf(typeof h[0][0])?[{type:"layout",prop:"_currentFrame",value:h[0][0].toString()}]:[];break;default:h=[]}return h}},{"../lib":803,"../registry":931}],882:[function(b,N,G){var p=b("../lib/extend").extendFlat;G.attributes=
function(n,k){n=n||{};k={valType:"info_array",editType:n.editType,items:[{valType:"number",min:0,max:1,editType:n.editType},{valType:"number",min:0,max:1,editType:n.editType}],dflt:[0,1]};k={x:p({},k,{}),y:p({},k,{}),editType:n.editType};n.noGridCell||(k.row={valType:"integer",min:0,dflt:0,editType:n.editType},k.column={valType:"integer",min:0,dflt:0,editType:n.editType});return k};G.defaults=function(n,k,m,a){var g=a&&a.x||[0,1];a=a&&a.y||[0,1];if(k=k.grid){var h=m("domain.column");void 0!==h&&(h<
k.columns?g=k._domains.x[h]:delete n.domain.column);h=m("domain.row");void 0!==h&&(h<k.rows?a=k._domains.y[h]:delete n.domain.row)}k=m("domain.x",g);m=m("domain.y",a);k[0]<k[1]||(n.domain.x=g.slice());m[0]<m[1]||(n.domain.y=a.slice())}},{"../lib/extend":793}],883:[function(b,N,G){N.exports=function(p){var n=p.editType,k=p.colorEditType;void 0===k&&(k=n);n={family:{valType:"string",noBlank:!0,strict:!0,editType:n},size:{valType:"number",min:1,editType:n},color:{valType:"color",editType:k},editType:n};
p.arrayOk&&(n.family.arrayOk=!0,n.size.arrayOk=!0,n.color.arrayOk=!0);return n}},{}],884:[function(b,N,G){N.exports={_isLinkedToArray:"frames_entry",group:{valType:"string"},name:{valType:"string"},traces:{valType:"any"},baseframe:{valType:"string"},data:{valType:"any"},layout:{valType:"any"}}},{}],885:[function(b,N,G){G.projNames={airy:"airy",aitoff:"aitoff","albers usa":"albersUsa",albers:"albers",august:"august","azimuthal equal area":"azimuthalEqualArea","azimuthal equidistant":"azimuthalEquidistant",
baker:"baker",bertin1953:"bertin1953",boggs:"boggs",bonne:"bonne",bottomley:"bottomley",bromley:"bromley",collignon:"collignon","conic conformal":"conicConformal","conic equal area":"conicEqualArea","conic equidistant":"conicEquidistant",craig:"craig",craster:"craster","cylindrical equal area":"cylindricalEqualArea","cylindrical stereographic":"cylindricalStereographic",eckert1:"eckert1",eckert2:"eckert2",eckert3:"eckert3",eckert4:"eckert4",eckert5:"eckert5",eckert6:"eckert6",eisenlohr:"eisenlohr",
equirectangular:"equirectangular",fahey:"fahey","foucaut sinusoidal":"foucautSinusoidal",foucaut:"foucaut",ginzburg4:"ginzburg4",ginzburg5:"ginzburg5",ginzburg6:"ginzburg6",ginzburg8:"ginzburg8",ginzburg9:"ginzburg9",gnomonic:"gnomonic","gringorten quincuncial":"gringortenQuincuncial",gringorten:"gringorten",guyou:"guyou",hammer:"hammer",hill:"hill",homolosine:"homolosine",hufnagel:"hufnagel",hyperelliptical:"hyperelliptical",kavrayskiy7:"kavrayskiy7",lagrange:"lagrange",larrivee:"larrivee",laskowski:"laskowski",
loximuthal:"loximuthal",mercator:"mercator",miller:"miller",mollweide:"mollweide","mt flat polar parabolic":"mtFlatPolarParabolic","mt flat polar quartic":"mtFlatPolarQuartic","mt flat polar sinusoidal":"mtFlatPolarSinusoidal","natural earth":"naturalEarth","natural earth1":"naturalEarth1","natural earth2":"naturalEarth2","nell hammer":"nellHammer",nicolosi:"nicolosi",orthographic:"orthographic",patterson:"patterson","peirce quincuncial":"peirceQuincuncial",polyconic:"polyconic","rectangular polyconic":"rectangularPolyconic",
robinson:"robinson",satellite:"satellite","sinu mollweide":"sinuMollweide",sinusoidal:"sinusoidal",stereographic:"stereographic",times:"times","transverse mercator":"transverseMercator","van der grinten":"vanDerGrinten","van der grinten2":"vanDerGrinten2","van der grinten3":"vanDerGrinten3","van der grinten4":"vanDerGrinten4",wagner4:"wagner4",wagner6:"wagner6",wiechel:"wiechel","winkel tripel":"winkel3",winkel3:"winkel3"};G.axesNames=["lonaxis","lataxis"];G.lonaxisSpan={orthographic:180,"azimuthal equal area":360,
"azimuthal equidistant":360,"conic conformal":180,gnomonic:160,stereographic:180,"transverse mercator":180,"*":360};G.lataxisSpan={"conic conformal":150,stereographic:179.5,"*":180};G.scopeDefaults={world:{lonaxisRange:[-180,180],lataxisRange:[-90,90],projType:"equirectangular",projRotate:[0,0,0]},usa:{lonaxisRange:[-180,-50],lataxisRange:[15,80],projType:"albers usa"},europe:{lonaxisRange:[-30,60],lataxisRange:[30,85],projType:"conic conformal",projRotate:[15,0,0],projParallels:[0,60]},asia:{lonaxisRange:[22,
160],lataxisRange:[-15,55],projType:"mercator",projRotate:[0,0,0]},africa:{lonaxisRange:[-30,60],lataxisRange:[-40,40],projType:"mercator",projRotate:[0,0,0]},"north america":{lonaxisRange:[-180,-45],lataxisRange:[5,85],projType:"conic conformal",projRotate:[-100,0,0],projParallels:[29.5,45.5]},"south america":{lonaxisRange:[-100,-30],lataxisRange:[-60,15],projType:"mercator",projRotate:[0,0,0]}};G.clipPad=.001;G.precision=.1;G.landColor="#F0DC82";G.waterColor="#3399FF";G.locationmodeToLayer={"ISO-3":"countries",
"USA-states":"subunits","country names":"countries"};G.sphereSVG={type:"Sphere"};G.fillLayers={ocean:1,land:1,lakes:1};G.lineLayers={subunits:1,countries:1,coastlines:1,rivers:1,frame:1};G.layers="bg ocean land lakes subunits countries coastlines rivers lataxis lonaxis frame backplot frontplot".split(" ");G.layersForChoropleth="bg ocean land subunits countries coastlines lataxis lonaxis frame backplot rivers lakes frontplot".split(" ");G.layerNameToAdjective={ocean:"ocean",land:"land",lakes:"lake",
subunits:"subunit",countries:"country",coastlines:"coastline",rivers:"river",frame:"frame"}},{}],886:[function(b,N,G){function p(M){this.id=M.id;this.graphDiv=M.graphDiv;this.container=M.container;this.topojsonURL=M.topojsonURL;this.isStatic=M.staticPlot;this.midPt=this.bounds=this.fitScale=this.viewInitial=this.scope=this.projection=this.topojson=this.topojsonName=null;this.hasChoropleth=!1;this.traceHash={};this.layers={};this.basePaths={};this.dataPaths={};this.dataPoints={};this.bgRect=this.clipRect=
this.clipDef=null;this.makeFramework()}function n(M){var H=M.projection,O=H.type,I=y.projNames[O];I="geo"+d.titleCase(I);var L=(g[I]||l[I])(),Q=M._isSatellite?180*Math.acos(1/H.distance)/Math.PI:M._isClipped?y.lonaxisSpan[O]/2:null;O=["center","rotate","parallels","clipExtent"];I=function(V){return V?L:[]};for(var Z=0;Z<O.length;Z++){var ba=O[Z];"function"!==typeof L[ba]&&(L[ba]=I)}L.isLonLatOverEdges=function(V){if(null===L(V))return!0;if(Q){var S=L.rotate();return r(V,[-S[0],-S[1]])>Q*Math.PI/180}return!1};
L.getPath=function(){return h().projection(L)};L.getBounds=function(V){return L.getPath().bounds(V)};L.precision(y.precision);M._isSatellite&&L.tilt(H.tilt).distance(H.distance);Q&&L.clipAngle(Q-y.clipPad);return L}function k(M,H,O){var I=H[M],L=y.scopeDefaults[H.scope];if("lonaxis"===M){var Q=L.lonaxisRange;var Z=L.lataxisRange;var ba=function(S,T){return[S,T]}}else"lataxis"===M&&(Q=L.lataxisRange,Z=L.lonaxisRange,ba=function(S,T){return[T,S]});I={type:"linear",range:[Q[0],Q[1]-1E-6],tick0:I.tick0,
dtick:I.dtick};x.setConvert(I,O);O=x.calcTicks(I);H.isScoped||"lonaxis"!==M||O.pop();M=O.length;H=Array(M);for(I=0;I<M;I++){L=O[I].x;Q=H[I]=[];for(var V=Z[0];V<Z[1]+2.5;V+=2.5)Q.push(ba(L,V))}return{type:"MultiLineString",coordinates:H}}function m(M,H){var O=y.clipPad,I=M[0]+O;M=M[1]-O;var L=H[0]+O;H=H[1]-O;0<I&&0>M&&(M+=360);O=(M-I)/4;return{type:"Polygon",coordinates:[[[I,L],[I,H],[I+O,H],[I+2*O,H],[I+3*O,H],[M,H],[M,L],[M-O,L],[M-2*O,L],[M-3*O,L],[I,L]]]}}var a=b("@plotly/d3"),g=b("d3-geo"),h=
g.geoPath,r=g.geoDistance,l=b("d3-geo-projection"),c=b("../../registry"),d=b("../../lib"),e=d.strTranslate,f=b("../../components/color"),q=b("../../components/drawing"),t=b("../../components/fx"),w=b("../plots"),x=b("../cartesian/axes"),z=b("../cartesian/autorange").getAutoRange,B=b("../../components/dragelement"),A=b("../cartesian/select").prepSelect,D=b("../cartesian/select").clearSelect,C=b("../cartesian/select").selectOnClick,v=b("./zoom"),y=b("./constants"),F=b("../../lib/geo_location_utils"),
J=b("../../lib/topojson_utils"),K=b("topojson-client").feature;b=p.prototype;N.exports=function(M){return new p(M)};b.plot=function(M,H,O){var I=this,L=H[this.id],Q=[],Z=!1,ba;for(ba in y.layerNameToAdjective)if("frame"!==ba&&L["show"+ba]){Z=!0;break}for(ba=0;ba<M.length;ba++)if(M[0][0].trace.locationmode){Z=!0;break}Z&&(L=J.getTopojsonName(L),null===I.topojson||L!==I.topojsonName)&&(I.topojsonName=L,void 0===PlotlyGeoAssets.topojson[I.topojsonName]&&Q.push(I.fetchTopojson()));Q=Q.concat(F.fetchTraceGeoData(M));
O.push(new Promise(function(V,S){Promise.all(Q).then(function(){I.topojson=PlotlyGeoAssets.topojson[I.topojsonName];I.update(M,H);V()}).catch(S)}))};b.fetchTopojson=function(){var M=this,H=J.getTopojsonPath(M.topojsonURL,M.topojsonName);return new Promise(function(O,I){a.json(H,function(L,Q){if(L)return 404===L.status?I(Error(["plotly.js could not find topojson file at",H,". Make sure the *topojsonURL* plot config option is set properly."].join(" "))):I(Error(["unexpected error while fetching topojson file at",
H].join(" ")));PlotlyGeoAssets.topojson[M.topojsonName]=Q;O()})})};b.update=function(M,H){var O=H[this.id];this.hasChoropleth=!1;for(var I=0;I<M.length;I++){var L=M[I],Q=L[0].trace;"choropleth"===Q.type&&(this.hasChoropleth=!0);!0===Q.visible&&0<Q._length&&Q._module.calcGeoJSON(L,H)}this.updateProjection(M,H)||(this.viewInitial&&this.scope===O.scope||this.saveViewInitial(O),this.scope=O.scope,this.updateBaseLayers(H,O),this.updateDims(H,O),this.updateFx(H,O),w.generalUpdatePerTraceModule(this.graphDiv,
this,M,O),M=this.layers.frontplot.select(".scatterlayer"),this.dataPoints.point=M.selectAll(".point"),this.dataPoints.text=M.selectAll("text"),this.dataPaths.line=M.selectAll(".js-line"),M=this.layers.backplot.select(".choroplethlayer"),this.dataPaths.choropleth=M.selectAll("path"),this.render())};b.updateProjection=function(M,H){var O=this.graphDiv;M=H[this.id];var I=H._size,L=M.domain,Q=M.projection,Z=M.lonaxis,ba=M.lataxis,V=Z._ax,S=ba._ax;H=this.projection=n(M);L=[[I.l+I.w*L.x[0],I.t+I.h*(1-L.y[1])],
[I.l+I.w*L.x[1],I.t+I.h*(1-L.y[0])]];I=M.center||{};var T=Q.rotation||{};Z=Z.range||[];var fa=ba.range||[];M.fitbounds&&(V._length=L[1][0]-L[0][0],S._length=L[1][1]-L[0][1],V.range=z(O,V),S.range=z(O,S),O=(V.range[0]+V.range[1])/2,ba=(S.range[0]+S.range[1])/2,M._isScoped?I={lon:O,lat:ba}:M._isClipped?(I={lon:O,lat:ba},T={lon:O,lat:ba,roll:T.roll},fa=Q.type,Z=y.lonaxisSpan[fa]/2||180,fa=y.lataxisSpan[fa]/2||90,Z=[O-Z,O+Z],fa=[ba-fa,ba+fa]):(I={lon:O,lat:ba},T={lon:O,lat:T.lat,roll:T.roll}));H.center([I.lon-
T.lon,I.lat-T.lat]).rotate([-T.lon,-T.lat,T.roll]).parallels(Q.parallels);T=m(Z,fa);H.fitExtent(L,T);L=this.bounds=H.getBounds(T);O=this.fitScale=H.scale();T=H.translate();M.fitbounds?(Q=H.getBounds(m(V.range,S.range)),Q=Math.min((L[1][0]-L[0][0])/(Q[1][0]-Q[0][0]),(L[1][1]-L[0][1])/(Q[1][1]-Q[0][1])),isFinite(Q)?H.scale(Q*O):d.warn("Something went wrong during"+this.id+"fitbounds computations.")):H.scale(Q.scale*O);Q=this.midPt=[(L[0][0]+L[1][0])/2,(L[0][1]+L[1][1])/2];H.translate([T[0]+(Q[0]-T[0]),
T[1]+(Q[1]-T[1])]).clipExtent(L);M._isAlbersUsa&&(M=H([I.lon,I.lat]),I=H.translate(),H.translate([I[0]-(M[0]-I[0]),I[1]-(M[1]-I[1])]))};b.updateBaseLayers=function(M,H){function O(V){return"lonaxis"===V||"lataxis"===V}var I=this,L=I.topojson,Q=I.layers,Z=I.basePaths,ba=(this.hasChoropleth?y.layersForChoropleth:y.layers).filter(function(V){return y.lineLayers[V]||y.fillLayers[V]?H["show"+V]:O(V)?H[V].showgrid:!0});ba=I.framework.selectAll(".layer").data(ba,String);ba.exit().each(function(V){delete Q[V];
delete Z[V];a.select(this).remove()});ba.enter().append("g").attr("class",function(V){return"layer "+V}).each(function(V){var S=Q[V]=a.select(this);"bg"===V?I.bgRect=S.append("rect").style("pointer-events","all"):O(V)?Z[V]=S.append("path").style("fill","none"):"backplot"===V?S.append("g").classed("choroplethlayer",!0):"frontplot"===V?S.append("g").classed("scatterlayer",!0):y.lineLayers[V]?Z[V]=S.append("path").style("fill","none").style("stroke-miterlimit",2):y.fillLayers[V]&&(Z[V]=S.append("path").style("stroke",
"none"))});ba.order();ba.each(function(V){var S=Z[V],T=y.layerNameToAdjective[V];"frame"===V?S.datum(y.sphereSVG):y.lineLayers[V]||y.fillLayers[V]?S.datum(K(L,L.objects[V])):O(V)&&S.datum(k(V,H,M)).call(f.stroke,H[V].gridcolor).call(q.dashLine,"",H[V].gridwidth);y.lineLayers[V]?S.call(f.stroke,H[T+"color"]).call(q.dashLine,"",H[T+"width"]):y.fillLayers[V]&&S.call(f.fill,H[T+"color"])})};b.updateDims=function(M,H){var O=this.bounds,I=(H.framewidth||0)/2;M=O[0][0]-I;var L=O[0][1]-I,Q=O[1][0]-M+I;O=
O[1][1]-L+I;q.setRect(this.clipRect,M,L,Q,O);this.bgRect.call(q.setRect,M,L,Q,O).call(f.fill,H.bgcolor);this.xaxis._offset=M;this.xaxis._length=Q;this.yaxis._offset=L;this.yaxis._length=O};b.updateFx=function(M,H){function O(){var fa=L.viewInitial,W={},aa;for(aa in fa)W[L.id+"."+aa]=fa[aa];c.call("_guiRelayout",Q,W);Q.emit("plotly_doubleclick",null)}function I(fa){return L.projection.invert([fa[0]+L.xaxis._offset,fa[1]+L.yaxis._offset])}var L=this,Q=L.graphDiv,Z=L.bgRect,ba=M.dragmode,V=M.clickmode;
if(!L.isStatic){var S;"select"===ba?S=function(fa,W){(fa.range={})[L.id]=[I([W.xmin,W.ymin]),I([W.xmax,W.ymax])]}:"lasso"===ba&&(S=function(fa,W,aa){(fa.lassoPoints={})[L.id]=aa.filtered.map(I)});var T={element:L.bgRect.node(),gd:Q,plotinfo:{id:L.id,xaxis:L.xaxis,yaxis:L.yaxis,fillRangeItems:S},xaxes:[L.xaxis],yaxes:[L.yaxis],subplot:L.id,clickFn:function(fa){2===fa&&D(Q)}};if("pan"===ba){if(Z.node().onmousedown=null,Z.call(v(L,H)),Z.on("dblclick.zoom",O),!Q._context._scrollZoom.geo)Z.on("wheel.zoom",
null)}else if("select"===ba||"lasso"===ba)Z.on(".zoom",null),T.prepFn=function(fa,W,aa){A(fa,W,aa,T,ba)},B.init(T);Z.on("mousemove",function(){var fa=L.projection.invert(d.getPositionFromD3Event());if(!fa)return B.unhover(Q,a.event);L.xaxis.p2c=function(){return fa[0]};L.yaxis.p2c=function(){return fa[1]};t.hover(Q,a.event,L.id)});Z.on("mouseout",function(){Q._dragging||B.unhover(Q,a.event)});Z.on("click",function(){"select"!==ba&&"lasso"!==ba&&(-1<V.indexOf("select")&&C(a.event,Q,[L.xaxis],[L.yaxis],
L.id,T),-1<V.indexOf("event")&&t.click(Q,a.event))})}};b.makeFramework=function(){var M=this,H=M.graphDiv,O=H._fullLayout,I="clip"+O._uid+M.id;M.clipDef=O._clips.append("clipPath").attr("id",I);M.clipRect=M.clipDef.append("rect");M.framework=a.select(M.container).append("g").attr("class","geo "+M.id).call(q.setClipUrl,I,H);M.project=function(L){return(L=M.projection(L))?[L[0]-M.xaxis._offset,L[1]-M.yaxis._offset]:[null,null]};M.xaxis={_id:"x",c2p:function(L){return M.project(L)[0]}};M.yaxis={_id:"y",
c2p:function(L){return M.project(L)[1]}};M.mockAxis={type:"linear",showexponent:"all",exponentformat:"B"};x.setConvert(M.mockAxis,O)};b.saveViewInitial=function(M){var H=M.center||{},O=M.projection,I=O.rotation||{};this.viewInitial={fitbounds:M.fitbounds,"projection.scale":O.scale};d.extendFlat(this.viewInitial,M._isScoped?{"center.lon":H.lon,"center.lat":H.lat}:M._isClipped?{"projection.rotation.lon":I.lon,"projection.rotation.lat":I.lat}:{"center.lon":H.lon,"center.lat":H.lat,"projection.rotation.lon":I.lon})};
b.render=function(){function M(Q){return(Q=O(Q.lonlat))?e(Q[0],Q[1]):null}function H(Q){return O.isLonLatOverEdges(Q.lonlat)?"none":null}var O=this.projection,I=O.getPath(),L;for(L in this.basePaths)this.basePaths[L].attr("d",I);for(L in this.dataPaths)this.dataPaths[L].attr("d",function(Q){return I(Q.geojson)});for(L in this.dataPoints)this.dataPoints[L].attr("display",H).attr("transform",M)}},{"../../components/color":666,"../../components/dragelement":685,"../../components/drawing":688,"../../components/fx":706,
"../../lib":803,"../../lib/geo_location_utils":796,"../../lib/topojson_utils":832,"../../registry":931,"../cartesian/autorange":853,"../cartesian/axes":854,"../cartesian/select":874,"../plots":917,"./constants":885,"./zoom":890,"@plotly/d3":58,"d3-geo":169,"d3-geo-projection":168,"topojson-client":601}],887:[function(b,N,G){var p=b("../../plots/get_data").getSubplotCalcData;G=b("../../lib").counterRegex;var n=b("./geo");G=G("geo");N.exports={attr:"geo",name:"geo",idRoot:"geo",idRegex:G,attrRegex:G,
attributes:{geo:{valType:"subplotid",dflt:"geo",editType:"calc"}},layoutAttributes:b("./layout_attributes"),supplyLayoutDefaults:b("./layout_defaults"),plot:function(k){for(var m=k._fullLayout,a=k.calcdata,g=m._subplots.geo,h=0;h<g.length;h++){var r=g[h],l=p(a,"geo",r),c=m[r]._subplot;c||(c=n({id:r,graphDiv:k,container:m._geolayer.node(),topojsonURL:k._context.topojsonURL,staticPlot:k._context.staticPlot}),m[r]._subplot=c);c.plot(l,m,k._promises)}},updateFx:function(k){k=k._fullLayout;for(var m=k._subplots.geo,
a=0;a<m.length;a++){var g=k[m[a]];g._subplot.updateFx(k,g)}},clean:function(k,m,a,g){k=g._subplots.geo||[];for(a=0;a<k.length;a++){var h=k[a],r=g[h]._subplot;!m[h]&&r&&(r.framework.remove(),r.clipDef.remove())}}}},{"../../lib":803,"../../plots/get_data":891,"./geo":886,"./layout_attributes":888,"./layout_defaults":889}],888:[function(b,N,G){G=b("../../components/color/attributes");var p=b("../domain").attributes,n=b("./constants"),k=b("../../plot_api/edit_types").overrideAll;b=b("../../lib/sort_object_keys");
var m={range:{valType:"info_array",items:[{valType:"number"},{valType:"number"}]},showgrid:{valType:"boolean",dflt:!1},tick0:{valType:"number",dflt:0},dtick:{valType:"number"},gridcolor:{valType:"color",dflt:G.lightLine},gridwidth:{valType:"number",min:0,dflt:1}};(N.exports=k({domain:p({name:"geo"},{}),fitbounds:{valType:"enumerated",values:[!1,"locations","geojson"],dflt:!1,editType:"plot"},resolution:{valType:"enumerated",values:[110,50],dflt:110,coerceNumber:!0},scope:{valType:"enumerated",values:b(n.scopeDefaults),
dflt:"world"},projection:{type:{valType:"enumerated",values:b(n.projNames)},rotation:{lon:{valType:"number"},lat:{valType:"number"},roll:{valType:"number"}},tilt:{valType:"number",dflt:0},distance:{valType:"number",min:1.001,dflt:2},parallels:{valType:"info_array",items:[{valType:"number"},{valType:"number"}]},scale:{valType:"number",min:0,dflt:1}},center:{lon:{valType:"number"},lat:{valType:"number"}},visible:{valType:"boolean",dflt:!0},showcoastlines:{valType:"boolean"},coastlinecolor:{valType:"color",
dflt:G.defaultLine},coastlinewidth:{valType:"number",min:0,dflt:1},showland:{valType:"boolean",dflt:!1},landcolor:{valType:"color",dflt:n.landColor},showocean:{valType:"boolean",dflt:!1},oceancolor:{valType:"color",dflt:n.waterColor},showlakes:{valType:"boolean",dflt:!1},lakecolor:{valType:"color",dflt:n.waterColor},showrivers:{valType:"boolean",dflt:!1},rivercolor:{valType:"color",dflt:n.waterColor},riverwidth:{valType:"number",min:0,dflt:1},showcountries:{valType:"boolean"},countrycolor:{valType:"color",
dflt:G.defaultLine},countrywidth:{valType:"number",min:0,dflt:1},showsubunits:{valType:"boolean"},subunitcolor:{valType:"color",dflt:G.defaultLine},subunitwidth:{valType:"number",min:0,dflt:1},showframe:{valType:"boolean"},framecolor:{valType:"color",dflt:G.defaultLine},framewidth:{valType:"number",min:0,dflt:1},bgcolor:{valType:"color",dflt:G.background},lonaxis:m,lataxis:m},"plot","from-root")).uirevision={valType:"any",editType:"none"}},{"../../components/color/attributes":665,"../../lib/sort_object_keys":826,
"../../plot_api/edit_types":836,"../domain":882,"./constants":885}],889:[function(b,N,G){function p(r,l,c,d){var e=m(d.fullData,"geo",d.id).map(function(K){return K._expandedIndex});d=c("resolution");var f=c("scope"),q=a.scopeDefaults[f],t=c("projection.type",q.projType),w=l._isAlbersUsa="albers usa"===t;w&&(f=l.scope="usa");var x=l._isScoped="world"!==f,z=l._isSatellite="satellite"===t,B=l._isConic=-1!==t.indexOf("conic")||"albers"===t,A=l._isClipped=!!a.lonaxisSpan[t];!1===r.visible&&(r=n.extendDeep({},
l._template),r.showcoastlines=!1,r.showcountries=!1,r.showframe=!1,r.showlakes=!1,r.showland=!1,r.showocean=!1,r.showrivers=!1,r.showsubunits=!1,r.lonaxis&&(r.lonaxis.showgrid=!1),r.lataxis&&(r.lataxis.showgrid=!1),l._template=r);r=c("visible");for(var D,C=0;C<h.length;C++){var v=h[C];D=[30,10][C];if(x)var y=q[v+"Range"];else{y=a[v+"Span"];y=(y[t]||y["*"])/2;var F=c("projection.rotation."+v.substr(0,3),q.projRotate[C]);y=[F-y,F+y]}y=c(v+".range",y);c(v+".tick0");c(v+".dtick",D);if(D=c(v+".showgrid",
r?void 0:!1))c(v+".gridcolor"),c(v+".gridwidth");l[v]._ax={type:"linear",_id:v.slice(0,3),_traceIndices:e,setScale:n.identity,c2l:n.identity,r2l:n.identity,autorange:!0,range:y.slice(),_m:1,_input:{}}}C=l.lonaxis.range;e=l.lataxis.range;t=C[0];C=C[1];0<t&&0>C&&(C+=360);t=(t+C)/2;if(!w){C=x?q.projRotate:[t,0,0];var J=c("projection.rotation.lon",C[0]);c("projection.rotation.lat",C[1]);c("projection.rotation.roll",C[2]);if(D=c("showcoastlines",!x&&r))c("coastlinecolor"),c("coastlinewidth");(D=c("showocean",
r?void 0:!1))&&c("oceancolor")}w?(J=-96.6,w=38.7):(J=x?t:J,w=(e[0]+e[1])/2);c("center.lon",J);c("center.lat",w);z&&(c("projection.tilt"),c("projection.distance"));B&&c("projection.parallels",q.projParallels||[0,60]);c("projection.scale");(D=c("showland",r?void 0:!1))&&c("landcolor");(D=c("showlakes",r?void 0:!1))&&c("lakecolor");if(D=c("showrivers",r?void 0:!1))c("rivercolor"),c("riverwidth");if(D=c("showcountries",x&&"usa"!==f&&r))c("countrycolor"),c("countrywidth");if("usa"===f||"north america"===
f&&50===d)c("showsubunits",r),c("subunitcolor"),c("subunitwidth");!x&&(D=c("showframe",r))&&(c("framecolor"),c("framewidth"));c("bgcolor");c("fitbounds")&&(delete l.projection.scale,x?(delete l.center.lon,delete l.center.lat):A?(delete l.center.lon,delete l.center.lat,delete l.projection.rotation.lon,delete l.projection.rotation.lat,delete l.lonaxis.range,delete l.lataxis.range):(delete l.center.lon,delete l.center.lat,delete l.projection.rotation.lon))}var n=b("../../lib"),k=b("../subplot_defaults"),
m=b("../get_data").getSubplotData,a=b("./constants"),g=b("./layout_attributes"),h=a.axesNames;N.exports=function(r,l,c){k(r,l,c,{type:"geo",attributes:g,handleDefaults:p,fullData:c,partition:"y"})}},{"../../lib":803,"../get_data":891,"../subplot_defaults":925,"./constants":885,"./layout_attributes":888}],890:[function(b,N,G){function p(B,A){return e.behavior.zoom().translate(A.translate()).scale(A.scale())}function n(B,A,D){function C(I,L){H[v+"."+I]=f.nestedProperty(J,I).get();q.call("_storeDirectGUIEdit",
F,K._preGUI,H);var Q=f.nestedProperty(M,I);Q.get()!==L&&(Q.set(L),f.nestedProperty(J,I).set(L),O[v+"."+I]=L)}var v=B.id,y=B.graphDiv,F=y.layout,J=F[v],K=y._fullLayout,M=K[v],H={},O={};D(C);C("projection.scale",A.scale()/B.fitScale);C("fitbounds",!1);y.emit("plotly_relayout",O)}function k(B,A){function D(v){var y=A.invert(B.midPt);v("center.lon",y[0]);v("center.lat",y[1])}var C=p(B,A);C.on("zoomstart",function(){e.select(this).style(x)}).on("zoom",function(){A.scale(e.event.scale).translate(e.event.translate);
B.render();var v=A.invert(B.midPt);B.graphDiv.emit("plotly_relayouting",{"geo.projection.scale":A.scale()/B.fitScale,"geo.center.lon":v[0],"geo.center.lat":v[1]})}).on("zoomend",function(){e.select(this).style(z);n(B,A,D)});return C}function m(B,A){function D(L){var Q=A.rotate(),Z=A.invert(B.midPt);L("projection.rotation.lon",-Q[0]);L("center.lon",Z[0]);L("center.lat",Z[1])}var C=p(B,A),v,y,F,J,K,M,H,O,I;C.on("zoomstart",function(){e.select(this).style(x);v=e.mouse(this);y=A.rotate();F=A.translate();
J=y;K=A.invert(v)}).on("zoom",function(){M=e.mouse(this);var L=v;var Q=A.invert(L);Q?(Q=A(Q),L=2<Math.abs(Q[0]-L[0])||2<Math.abs(Q[1]-L[1])):L=!0;L?(C.scale(A.scale()),C.translate(A.translate())):(A.scale(e.event.scale),A.translate([F[0],e.event.translate[1]]),K?A.invert(M)&&(O=A.invert(M),H=[J[0]+(O[0]-K[0]),y[1],y[2]],A.rotate(H),J=H):(v=M,K=A.invert(v)),I=!0,B.render(),L=A.rotate(),Q=A.invert(B.midPt),B.graphDiv.emit("plotly_relayouting",{"geo.projection.scale":A.scale()/B.fitScale,"geo.center.lon":Q[0],
"geo.center.lat":Q[1],"geo.projection.rotation.lon":-L[0]}))}).on("zoomend",function(){e.select(this).style(z);I&&n(B,A,D)});return C}function a(B,A){function D(M){F++||M({type:"zoomstart"})}function C(M){var H=A.rotate();M("projection.rotation.lon",-H[0]);M("projection.rotation.lat",-H[1])}A.rotate();A.scale();var v=p(B,A),y=d(v,"zoomstart","zoom","zoomend"),F=0,J=v.on,K;v.on("zoomstart",function(){e.select(this).style(x);var M=e.mouse(this),H=A.rotate(),O=H,I=A.translate(),L=h(H);K=g(A,M);J.call(v,
"zoom",function(){var Q=e.mouse(this);A.scale(e.event.scale);if(!K)M=Q,K=g(A,M);else if(g(A,Q)){A.rotate(H).translate(I);var Z=g(A,Q);var ba=K;if(ba&&Z){Q=[ba[1]*Z[2]-ba[2]*Z[1],ba[2]*Z[0]-ba[0]*Z[2],ba[0]*Z[1]-ba[1]*Z[0]];var V=Math.sqrt(c(Q,Q));Z=.5*Math.acos(Math.max(-1,Math.min(1,c(ba,Z))));ba=Math.sin(Z)/V;var S=V&&[Math.cos(Z),Q[2]*ba,-Q[1]*ba,Q[0]*ba]}else S=void 0;Q=L[0];V=L[1];Z=L[2];ba=L[3];var T=S[0],fa=S[1],W=S[2];S=S[3];Q=[Q*T-V*fa-Z*W-ba*S,Q*fa+V*T+Z*S-ba*W,Q*W-V*S+Z*T+ba*fa,Q*S+V*W-
Z*fa+ba*T];Z=[Math.atan2(2*(Q[0]*Q[1]+Q[2]*Q[3]),1-2*(Q[1]*Q[1]+Q[2]*Q[2]))*w,Math.asin(Math.max(-1,Math.min(1,2*(Q[0]*Q[2]-Q[3]*Q[1]))))*w,Math.atan2(2*(Q[0]*Q[3]+Q[1]*Q[2]),1-2*(Q[2]*Q[2]+Q[3]*Q[3]))*w];V=K;Q=O;T=l(V,2,Z[0]);T=l(T,1,Z[1]);T=l(T,0,Z[2]-Q[2]);ba=V[0];S=V[1];V=V[2];Z=T[0];fa=T[1];T=T[2];W=Math.atan2(S,ba)*w;S=Math.sqrt(ba*ba+S*S);Math.abs(fa)>S?(ba=(0<fa?90:-90)-W,S=0):(ba=Math.asin(fa/S)*w-W,S=Math.sqrt(S*S-fa*fa));fa=180-ba-2*W;W=(Math.atan2(T,Z)-Math.atan2(V,S))*w;V=(Math.atan2(T,
Z)-Math.atan2(V,-S))*w;Z=r(Q[0],Q[1],ba,W);T=r(Q[0],Q[1],fa,V);Q=Z<=T?[ba,W,Q[2]]:[fa,V,Q[2]];isFinite(Q[0])&&isFinite(Q[1])&&isFinite(Q[2])||(Q=O);A.rotate(Q);O=Q}y.of(this,arguments)({type:"zoom"})});D(y.of(this,arguments))}).on("zoomend",function(){e.select(this).style(z);J.call(v,"zoom",null);var M=y.of(this,arguments);--F||M({type:"zoomend"});n(B,A,C)}).on("zoom.redraw",function(){B.render();var M=A.rotate();B.graphDiv.emit("plotly_relayouting",{"geo.projection.scale":A.scale()/B.fitScale,"geo.projection.rotation.lon":-M[0],
"geo.projection.rotation.lat":-M[1]})});return e.rebind(v,y,"on")}function g(B,A){if(B=(A=B.invert(A))&&isFinite(A[0])&&isFinite(A[1])){B=A[0]*t;A=A[1]*t;var D=Math.cos(A);B=[D*Math.cos(B),D*Math.sin(B),Math.sin(A)]}return B}function h(B){var A=.5*B[0]*t,D=.5*B[1]*t,C=.5*B[2]*t;B=Math.sin(A);A=Math.cos(A);var v=Math.sin(D);D=Math.cos(D);var y=Math.sin(C);C=Math.cos(C);return[A*D*C+B*v*y,B*D*C-A*v*y,A*v*C+B*D*y,A*D*y-B*v*C]}function r(B,A,D,C){B=((D-B)%360+540)%360-180;A=((C-A)%360+540)%360-180;return Math.sqrt(B*
B+A*A)}function l(B,A,D){var C=D*t;D=B.slice();var v=0===A?1:0;A=2===A?1:2;var y=Math.cos(C);C=Math.sin(C);D[v]=B[v]*y-B[A]*C;D[A]=B[A]*y+B[v]*C;return D}function c(B,A){for(var D=0,C=0,v=B.length;C<v;++C)D+=B[C]*A[C];return D}function d(B){for(var A=0,D=arguments.length,C=[];++A<D;)C.push(arguments[A]);var v=e.dispatch.apply(null,C);v.of=function(y,F){return function(J){try{var K=J.sourceEvent=e.event;J.target=B;e.event=J;v[J.type].apply(y,F)}finally{e.event=K}}};return v}var e=b("@plotly/d3"),f=
b("../../lib"),q=b("../../registry"),t=Math.PI/180,w=180/Math.PI,x={cursor:"pointer"},z={cursor:"auto"};N.exports=function(B,A){return(A._isScoped?k:A._isClipped?a:m)(B,B.projection)}},{"../../lib":803,"../../registry":931,"@plotly/d3":58}],891:[function(b,N,G){var p=b("../registry"),n=b("./cartesian/constants").SUBPLOT_PATTERN;G.getSubplotCalcData=function(k,m,a){m=p.subplotsRegistry[m];if(!m)return[];m=m.attr;for(var g=[],h=0;h<k.length;h++){var r=k[h];r[0].trace[m]===a&&g.push(r)}return g};G.getModuleCalcData=
function(k,m){var a=[],g=[];m="string"===typeof m?p.getModule(m).plot:"function"===typeof m?m:m.plot;if(!m)return[a,k];for(var h=0;h<k.length;h++){var r=k[h],l=r[0].trace;!0===l.visible&&0!==l._length&&(l._module.plot===m?a.push(r):g.push(r))}return[a,g]};G.getSubplotData=function(k,m,a){if(!p.subplotsRegistry[m])return[];var g=p.subplotsRegistry[m].attr,h=[];if("gl2d"===m){var r=a.match(n);var l="x"+r[1];var c="y"+r[2]}for(var d=0;d<k.length;d++)r=k[d],"gl2d"===m&&p.traceIs(r,"gl2d")?r[g[0]]===l&&
r[g[1]]===c&&h.push(r):r[g]===a&&h.push(r);return h}},{"../registry":931,"./cartesian/constants":861}],892:[function(b,N,G){function p(h,r){this.element=h;this.plot=r;this.wheelListener=this.mouseListener=null;this.lastInputTime=Date.now();this.lastPos=[0,0];this.boxInited=this.boxEnabled=!1;this.boxStart=[0,0];this.boxEnd=[0,0];this.dragStart=[0,0]}var n=b("mouse-change"),k=b("mouse-wheel"),m=b("mouse-event-offset"),a=b("../cartesian/constants"),g=b("has-passive-events");N.exports=function(h){function r(){for(var f=
h.graphDiv._fullLayout._axisConstraintGroups,q=h.xaxis._id,t=h.yaxis._id,w=0;w<f.length;w++)if(-1!==f[w][q]){if(-1!==f[w][t])return!0;break}return!1}function l(f,q,t){function w(v,y,F){var J=Math.min(y,F);y=Math.max(y,F);J!==y?(x[v]=J,x[v+2]=y,e.dataBox=x,h.setRanges(x)):(h.selectBox.selectBox=[0,0,1,1],h.glplot.setDirty())}var x=h.calcDataBox(),z=d.viewBox,B=e.lastPos[0],A=e.lastPos[1],D=a.MINDRAG*d.pixelRatio,C=a.MINZOOM*d.pixelRatio;q*=d.pixelRatio;t*=d.pixelRatio;t=z[3]-z[1]-t;switch(h.fullLayout.dragmode){case "zoom":f?
(A=q/(z[2]-z[0])*(x[2]-x[0])+x[0],z=t/(z[3]-z[1])*(x[3]-x[1])+x[1],e.boxInited||(e.boxStart[0]=A,e.boxStart[1]=z,e.dragStart[0]=q,e.dragStart[1]=t),e.boxEnd[0]=A,e.boxEnd[1]=z,e.boxInited=!0,e.boxEnabled||e.boxStart[0]===e.boxEnd[0]&&e.boxStart[1]===e.boxEnd[1]||(e.boxEnabled=!0),z=Math.abs(e.dragStart[0]-q)<C,C=Math.abs(e.dragStart[1]-t)<C,!r()||z&&C?(z&&(e.boxEnd[0]=e.boxStart[0]),C&&(e.boxEnd[1]=e.boxStart[1])):(C=e.boxEnd[0]-e.boxStart[0],z=e.boxEnd[1]-e.boxStart[1],A=(x[3]-x[1])/(x[2]-x[0]),
Math.abs(C*A)>Math.abs(z)?(e.boxEnd[1]=e.boxStart[1]+Math.abs(C)*A*(0<=z?1:-1),e.boxEnd[1]<x[1]?(e.boxEnd[1]=x[1],e.boxEnd[0]=e.boxStart[0]+(x[1]-e.boxStart[1])/Math.abs(A)):e.boxEnd[1]>x[3]&&(e.boxEnd[1]=x[3],e.boxEnd[0]=e.boxStart[0]+(x[3]-e.boxStart[1])/Math.abs(A))):(e.boxEnd[0]=e.boxStart[0]+Math.abs(z)/A*(0<=C?1:-1),e.boxEnd[0]<x[0]?(e.boxEnd[0]=x[0],e.boxEnd[1]=e.boxStart[1]+(x[0]-e.boxStart[0])*Math.abs(A)):e.boxEnd[0]>x[2]&&(e.boxEnd[0]=x[2],e.boxEnd[1]=e.boxStart[1]+(x[2]-e.boxStart[0])*
Math.abs(A))))):e.boxEnabled?(C=e.boxStart[0]!==e.boxEnd[0],z=e.boxStart[1]!==e.boxEnd[1],C||z?(C&&(w(0,e.boxStart[0],e.boxEnd[0]),h.xaxis.autorange=!1),z&&(w(1,e.boxStart[1],e.boxEnd[1]),h.yaxis.autorange=!1),h.relayoutCallback()):h.glplot.setDirty(),e.boxEnabled=!1,e.boxInited=!1):e.boxInited&&(e.boxInited=!1);break;case "pan":e.boxEnabled=!1,e.boxInited=!1,f?(e.panning||(e.dragStart[0]=q,e.dragStart[1]=t),Math.abs(e.dragStart[0]-q)<D&&(q=e.dragStart[0]),Math.abs(e.dragStart[1]-t)<D&&(t=e.dragStart[1]),
C=(B-q)*(x[2]-x[0])/(d.viewBox[2]-d.viewBox[0]),z=(A-t)*(x[3]-x[1])/(d.viewBox[3]-d.viewBox[1]),x[0]+=C,x[2]+=C,x[1]+=z,x[3]+=z,h.setRanges(x),e.panning=!0,e.lastInputTime=Date.now(),h.xaxis.autorange=!1,h.yaxis.autorange=!1,h.cameraChanged(),h.handleAnnotations()):e.panning&&(e.panning=!1,h.relayoutCallback())}e.lastPos[0]=q;e.lastPos[1]=t}var c=h.mouseContainer,d=h.glplot,e=new p(c,d);e.mouseListener=n(c,l);c.addEventListener("touchstart",function(f){var q=m(f.changedTouches[0],c);l(0,q[0],q[1]);
l(1,q[0],q[1]);f.preventDefault()},g?{passive:!1}:!1);c.addEventListener("touchmove",function(f){f.preventDefault();var q=m(f.changedTouches[0],c);l(1,q[0],q[1]);f.preventDefault()},g?{passive:!1}:!1);c.addEventListener("touchend",function(f){l(0,e.lastPos[0],e.lastPos[1]);f.preventDefault()},g?{passive:!1}:!1);e.wheelListener=k(c,function(f,q){if(!h.scrollZoom)return!1;f=h.calcDataBox();var t=d.viewBox;q=Math.exp(5*q/(t[3]-t[1]));var w=e.lastPos[0]/(t[2]-t[0])*(f[2]-f[0])+f[0];t=e.lastPos[1]/(t[3]-
t[1])*(f[3]-f[1])+f[1];f[0]=(f[0]-w)*q+w;f[2]=(f[2]-w)*q+w;f[1]=(f[1]-t)*q+t;f[3]=(f[3]-t)*q+t;h.setRanges(f);e.lastInputTime=Date.now();h.xaxis.autorange=!1;h.yaxis.autorange=!1;h.cameraChanged();h.handleAnnotations();h.relayoutCallback();return!0},!0);return e}},{"../cartesian/constants":861,"has-passive-events":444,"mouse-change":470,"mouse-event-offset":471,"mouse-wheel":473}],893:[function(b,N,G){function p(a){this.scene=a;this.gl=a.gl;this.pixelRatio=a.pixelRatio;this.screenBox=[0,0,1,1];this.viewBox=
[0,0,1,1];this.dataBox=[-1,-1,1,1];this.borderLineEnable=[!1,!1,!1,!1];this.borderLineWidth=[1,1,1,1];this.borderLineColor=[[0,0,0,1],[0,0,0,1],[0,0,0,1],[0,0,0,1]];this.ticks=[[],[]];this.tickEnable=[!0,!0,!1,!1];this.tickPad=[15,15,15,15];this.tickAngle=[0,0,0,0];this.tickColor=[[0,0,0,1],[0,0,0,1],[0,0,0,1],[0,0,0,1]];this.tickMarkLength=[0,0,0,0];this.tickMarkWidth=[0,0,0,0];this.tickMarkColor=[[0,0,0,1],[0,0,0,1],[0,0,0,1],[0,0,0,1]];this.labels=["x","y"];this.labelEnable=[!0,!0,!1,!1];this.labelAngle=
[0,Math.PI/2,0,3*Math.PI/2];this.labelPad=[15,15,15,15];this.labelSize=[12,12];this.labelFont=["sans-serif","sans-serif"];this.labelColor=[[0,0,0,1],[0,0,0,1],[0,0,0,1],[0,0,0,1]];this.title="";this.titleEnable=!0;this.titleCenter=[0,0,0,0];this.titleAngle=0;this.titleColor=[0,0,0,1];this.titleFont="sans-serif";this.titleSize=18;this.gridLineEnable=[!0,!0];this.gridLineColor=[[0,0,0,.5],[0,0,0,.5]];this.gridLineWidth=[1,1];this.zeroLineEnable=[!0,!0];this.zeroLineWidth=[1,1];this.zeroLineColor=[[0,
0,0,1],[0,0,0,1]];this.borderColor=[0,0,0,0];this.backgroundColor=[0,0,0,0];this.static=this.scene.staticPlot}var n=b("../cartesian/axes"),k=b("../../lib/str2rgbarray");b=p.prototype;var m=["xaxis","yaxis"];b.merge=function(a){this.titleEnable=!1;this.backgroundColor=k(a.plot_bgcolor);var g,h;for(h=0;2>h;++h){var r=m[h];var l=r.charAt(0);var c=a[this.scene[r]._name];l=c.title.text===this.scene.fullLayout._dfltTitle[l]?"":c.title.text;for(g=0;2>=g;g+=2)this.labelEnable[h+g]=!1,this.labels[h+g]=l,this.labelColor[h+
g]=k(c.title.font.color),this.labelFont[h+g]=c.title.font.family,this.labelSize[h+g]=c.title.font.size,this.labelPad[h+g]=this.getLabelPad(r,c),this.tickEnable[h+g]=!1,this.tickColor[h+g]=k((c.tickfont||{}).color),this.tickAngle[h+g]="auto"===c.tickangle?0:Math.PI*-c.tickangle/180,this.tickPad[h+g]=this.getTickPad(c),this.tickMarkLength[h+g]=0,this.tickMarkWidth[h+g]=c.tickwidth||0,this.tickMarkColor[h+g]=k(c.tickcolor),this.borderLineEnable[h+g]=!1,this.borderLineColor[h+g]=k(c.linecolor),this.borderLineWidth[h+
g]=c.linewidth||0;g=this.hasSharedAxis(c);l=this.hasAxisInDfltPos(r,c)&&!g;r=this.hasAxisInAltrPos(r,c)&&!g;var d=c.mirror||!1;var e=g?-1!==String(d).indexOf("all"):!!d;g=g?"allticks"===d:-1!==String(d).indexOf("ticks");l?this.labelEnable[h]=!0:r&&(this.labelEnable[h+2]=!0);l?this.tickEnable[h]=c.showticklabels:r&&(this.tickEnable[h+2]=c.showticklabels);if(l||e)this.borderLineEnable[h]=c.showline;if(r||e)this.borderLineEnable[h+2]=c.showline;if(l||g)this.tickMarkLength[h]=this.getTickMarkLength(c);
if(r||g)this.tickMarkLength[h+2]=this.getTickMarkLength(c);this.gridLineEnable[h]=c.showgrid;this.gridLineColor[h]=k(c.gridcolor);this.gridLineWidth[h]=c.gridwidth;this.zeroLineEnable[h]=c.zeroline;this.zeroLineColor[h]=k(c.zerolinecolor);this.zeroLineWidth[h]=c.zerolinewidth}};b.hasSharedAxis=function(a){var g=this.scene;return 0!==n.findSubplotsWithAxis(g.fullLayout._subplots.gl2d,a).indexOf(g.id)};b.hasAxisInDfltPos=function(a,g){g=g.side;if("xaxis"===a)return"bottom"===g;if("yaxis"===a)return"left"===
g};b.hasAxisInAltrPos=function(a,g){g=g.side;if("xaxis"===a)return"top"===g;if("yaxis"===a)return"right"===g};b.getLabelPad=function(a,g){var h=g.title.font.size,r=g.showticklabels;if("xaxis"===a)return"top"===g.side?-10+h*(1.5+(r?1:0)):-10+h*(1.5+(r?.5:0));if("yaxis"===a)return"right"===g.side?10+h*(1.5+(r?1:.5)):10+h*(1.5+(r?.5:0))};b.getTickPad=function(a){return"outside"===a.ticks?10+a.ticklen:15};b.getTickMarkLength=function(a){if(!a.ticks)return 0;var g=a.ticklen;return"inside"===a.ticks?-g:
g};N.exports=function(a){return new p(a)}},{"../../lib/str2rgbarray":828,"../cartesian/axes":854}],894:[function(b,N,G){N=b("../../plot_api/edit_types").overrideAll;var p=b("./scene2d"),n=b("../layout_attributes"),k=b("../../constants/xmlns_namespaces"),m=b("../cartesian/constants"),a=b("../cartesian"),g=b("../../components/fx/layout_attributes"),h=b("../get_data").getSubplotData;G.name="gl2d";G.attr=["xaxis","yaxis"];G.idRoot=["x","y"];G.idRegex=m.idRegex;G.attrRegex=m.attrRegex;G.attributes=b("../cartesian/attributes");
G.supplyLayoutDefaults=function(r,l,c){l._has("cartesian")||a.supplyLayoutDefaults(r,l,c)};G.layoutAttrOverrides=N(a.layoutAttributes,"plot","from-root");G.baseLayoutAttrOverrides=N({plot_bgcolor:n.plot_bgcolor,hoverlabel:g.hoverlabel},"plot","nested");G.plot=function(r){for(var l=r._fullLayout,c=r._fullData,d=l._subplots.gl2d,e=0;e<d.length;e++){var f=d[e],q=l._plots[f],t=h(c,"gl2d",f),w=q._scene2d;void 0===w&&(w=new p({id:f,graphDiv:r,container:r.querySelector(".gl-container"),staticPlot:r._context.staticPlot,
plotGlPixelRatio:r._context.plotGlPixelRatio},l),q._scene2d=w);w.plot(t,r.calcdata,l,r.layout)}};G.clean=function(r,l,c,d){for(var e=d._subplots.gl2d||[],f=0;f<e.length;f++){var q=e[f],t=d._plots[q];t._scene2d&&0===h(r,"gl2d",q).length&&(t._scene2d.destroy(),delete d._plots[q])}a.clean.apply(this,arguments)};G.drawFramework=function(r){r._context.staticPlot||a.drawFramework(r)};G.toSVG=function(r){r=r._fullLayout;for(var l=r._subplots.gl2d,c=0;c<l.length;c++){var d=r._plots[l[c]]._scene2d,e=d.toImage("png");
r._glimages.append("svg:image").attr({xmlns:k.svg,"xlink:href":e,x:0,y:0,width:"100%",height:"100%",preserveAspectRatio:"none"});d.destroy()}};G.updateFx=function(r){r=r._fullLayout;for(var l=r._subplots.gl2d,c=0;c<l.length;c++)r._plots[l[c]]._scene2d.updateFx(r.dragmode)}},{"../../components/fx/layout_attributes":707,"../../constants/xmlns_namespaces":780,"../../plot_api/edit_types":836,"../cartesian":868,"../cartesian/attributes":852,"../cartesian/constants":861,"../get_data":891,"../layout_attributes":908,
"./scene2d":895}],895:[function(b,N,G){function p(D,C){this.container=D.container;this.graphDiv=D.graphDiv;this.pixelRatio=D.plotGlPixelRatio||window.devicePixelRatio;this.id=D.id;this.staticPlot=!!D.staticPlot;this.scrollZoom=this.graphDiv._context._scrollZoom.cartesian;this.fullData=null;this.updateRefs(C);this.makeFramework();this.stopped||(this.glplotOptions=l(this),this.glplotOptions.merge(C),this.glplot=a(this.glplotOptions),this.camera=c(this),this.traces={},this.spikes=g(this.glplot),this.selectBox=
h(this.glplot,{innerFill:!1,outerFill:!0}),this.lastButtonState=0,this.pickResult=null,this.isMouseOver=!0,this.stopped=!1,this.redraw=this.draw.bind(this),this.redraw())}var n=b("../../registry"),k=b("../../plots/cartesian/axes"),m=b("../../components/fx"),a=b("gl-plot2d"),g=b("gl-spikes2d"),h=b("gl-select-box"),r=b("webgl-context"),l=b("./convert"),c=b("./camera"),d=b("../../lib/show_no_webgl_msg");G=b("../cartesian/constraints");var e=G.enforce,f=G.clean,q=b("../cartesian/autorange").doAutoRange;
G=b("../../components/dragelement/helpers");var t=G.drawMode,w=G.selectMode,x=["xaxis","yaxis"],z,B,A=b("../cartesian/constants").SUBPLOT_PATTERN;N.exports=p;b=p.prototype;b.makeFramework=function(){if(this.staticPlot){if(!B&&(z=document.createElement("canvas"),B=r({canvas:z,preserveDrawingBuffer:!1,premultipliedAlpha:!0,antialias:!0}),!B))throw Error("Error creating static canvas/context for image server");this.canvas=z;this.gl=B}else{var D=this.container.querySelector(".gl-canvas-focus"),C=r({canvas:D,
preserveDrawingBuffer:!0,premultipliedAlpha:!0});if(!C){d(this);this.stopped=!0;return}this.canvas=D;this.gl=C}D=this.canvas;D.style.width="100%";D.style.height="100%";D.style.position="absolute";D.style.top="0px";D.style.left="0px";D.style["pointer-events"]="none";this.updateSize(D);D=this.svgContainer=document.createElementNS("http://www.w3.org/2000/svg","svg");D.style.position="absolute";D.style.top=D.style.left="0px";D.style.width=D.style.height="100%";D.style["z-index"]=20;D.style["pointer-events"]=
"none";C=this.mouseContainer=document.createElement("div");C.style.position="absolute";C.style["pointer-events"]="auto";this.pickCanvas=this.container.querySelector(".gl-canvas-pick");var v=this.container;v.appendChild(D);v.appendChild(C);var y=this;C.addEventListener("mouseout",function(){y.isMouseOver=!1;y.unhover()});C.addEventListener("mouseover",function(){y.isMouseOver=!0})};b.toImage=function(D){D||(D="png");this.stopped=!0;this.staticPlot&&this.container.appendChild(z);this.updateSize(this.canvas);
var C=this.glplot.gl,v=C.drawingBufferWidth,y=C.drawingBufferHeight;C.clearColor(1,1,1,0);C.clear(C.COLOR_BUFFER_BIT|C.DEPTH_BUFFER_BIT);this.glplot.setDirty();this.glplot.draw();C.bindFramebuffer(C.FRAMEBUFFER,null);var F=new Uint8Array(v*y*4);C.readPixels(0,0,v,y,C.RGBA,C.UNSIGNED_BYTE,F);C=0;for(var J=y-1;C<J;++C,--J)for(var K=0;K<v;++K)for(var M=0;4>M;++M){var H=F[4*(v*C+K)+M];F[4*(v*C+K)+M]=F[4*(v*J+K)+M];F[4*(v*J+K)+M]=H}C=document.createElement("canvas");C.width=v;C.height=y;J=C.getContext("2d");
v=J.createImageData(v,y);v.data.set(F);J.putImageData(v,0,0);switch(D){case "jpeg":D=C.toDataURL("image/jpeg");break;case "webp":D=C.toDataURL("image/webp");break;default:D=C.toDataURL("image/png")}this.staticPlot&&this.container.removeChild(z);return D};b.updateSize=function(D){D||(D=this.canvas);var C=this.pixelRatio,v=this.fullLayout,y=Math.ceil(C*v.width)|0;C=Math.ceil(C*v.height)|0;if(D.width!==y||D.height!==C)D.width=y,D.height=C;return D};b.computeTickMarks=function(){this.xaxis.setScale();
this.yaxis.setScale();for(var D=[k.calcTicks(this.xaxis),k.calcTicks(this.yaxis)],C=0;2>C;++C)for(var v=0;v<D[C].length;++v)D[C][v].text+="";return D};b.updateRefs=function(D){this.fullLayout=D;D=this.id.match(A);var C="yaxis"+D[2];this.xaxis=this.fullLayout["xaxis"+D[1]];this.yaxis=this.fullLayout[C]};b.relayoutCallback=function(){var D=this.graphDiv,C=this.xaxis,v=this.yaxis,y=D.layout,F={},J=F[C._name+".range"]=C.range.slice(),K=F[v._name+".range"]=v.range.slice();F[C._name+".autorange"]=C.autorange;
F[v._name+".autorange"]=v.autorange;n.call("_storeDirectGUIEdit",D.layout,D._fullLayout._preGUI,F);var M=y[C._name];M.range=J;M.autorange=C.autorange;C=y[v._name];C.range=K;C.autorange=v.autorange;F.lastInputTime=this.camera.lastInputTime;D.emit("plotly_relayout",F)};b.cameraChanged=function(){var D=this.camera;this.glplot.setDataBox(this.calcDataBox());var C=this.computeTickMarks(),v=this.glplotOptions.ticks;a:{for(var y=0;2>y;++y){var F=C[y],J=v[y];if(F.length!==J.length){v=!0;break a}for(var K=
0;K<F.length;++K)if(F[K].x!==J[K].x){v=!0;break a}}v=!1}v&&(this.glplotOptions.ticks=C,this.glplotOptions.dataBox=D.dataBox,this.glplot.update(this.glplotOptions),this.handleAnnotations())};b.handleAnnotations=function(){for(var D=this.graphDiv,C=this.fullLayout.annotations,v=0;v<C.length;v++){var y=C[v];y.xref===this.xaxis._id&&y.yref===this.yaxis._id&&n.getComponentMethod("annotations","drawOne")(D,v)}};b.destroy=function(){if(this.glplot){var D=this.traces;D&&Object.keys(D).map(function(C){D[C].dispose();
delete D[C]});this.glplot.dispose();this.container.removeChild(this.svgContainer);this.container.removeChild(this.mouseContainer);this.glplot=this.fullData=null;this.stopped=!0;this.camera.mouseListener.enabled=!1;this.mouseContainer.removeEventListener("wheel",this.camera.wheelListener);this.camera=null}};b.plot=function(D,C,v){var y=this.glplot;this.updateRefs(v);this.xaxis.clearCalc();this.yaxis.clearCalc();this.updateTraces(D,C);this.updateFx(v.dragmode);var F=v.width,J=v.height;this.updateSize(this.canvas);
D=this.glplotOptions;D.merge(v);D.screenBox=[0,0,F,J];C={_fullLayout:{_axisConstraintGroups:v._axisConstraintGroups,xaxis:this.xaxis,yaxis:this.yaxis,_size:v._size}};f(C,this.xaxis);f(C,this.yaxis);var K=v._size,M=this.xaxis.domain,H=this.yaxis.domain;D.viewBox=[K.l+M[0]*K.w,K.b+H[0]*K.h,F-K.r-(1-M[1])*K.w,J-K.t-(1-H[1])*K.h];this.mouseContainer.style.width=K.w*(M[1]-M[0])+"px";this.mouseContainer.style.height=K.h*(H[1]-H[0])+"px";this.mouseContainer.height=K.h*(H[1]-H[0]);this.mouseContainer.style.left=
K.l+M[0]*K.w+"px";this.mouseContainer.style.top=K.t+(1-H[1])*K.h+"px";for(J=0;2>J;++J)F=this[x[J]],F._length=D.viewBox[J+2]-D.viewBox[J],q(this.graphDiv,F),F.setScale();e(C);D.ticks=this.computeTickMarks();D.dataBox=this.calcDataBox();D.merge(v);y.update(D);this.glplot.draw()};b.calcDataBox=function(){var D=this.xaxis,C=this.yaxis,v=D.range,y=C.range;D=D.r2l;C=C.r2l;return[D(v[0]),C(y[0]),D(v[1]),C(y[1])]};b.setRanges=function(D){var C=this.xaxis,v=this.yaxis,y=C.l2r,F=v.l2r;C.range=[y(D[0]),y(D[2])];
v.range=[F(D[1]),F(D[3])]};b.updateTraces=function(D,C){var v=Object.keys(this.traces),y;this.fullData=D;var F=0;a:for(;F<v.length;F++){var J=v[F],K=this.traces[J];for(y=0;y<D.length;y++){var M=D[y];if(M.uid===J&&M.type===K.type)continue a}K.dispose();delete this.traces[J]}for(F=0;F<D.length;F++)M=D[F],v=C[F],(y=this.traces[M.uid])?y.update(M,v):(y=M._module.plot(this,M,v),this.traces[M.uid]=y);this.glplot.objects.sort(function(H,O){return H._trace.index-O._trace.index})};b.updateFx=function(D){w(D)||
t(D)?(this.pickCanvas.style["pointer-events"]="none",this.mouseContainer.style["pointer-events"]="none"):(this.pickCanvas.style["pointer-events"]="auto",this.mouseContainer.style["pointer-events"]="auto");this.mouseContainer.style.cursor="pan"===D?"move":"zoom"===D?"crosshair":null};b.emitPointAction=function(D,C){for(var v=D.trace.uid,y=D.pointIndex,F,J=0;J<this.fullData.length;J++)this.fullData[J].uid===v&&(F=this.fullData[J]);D={x:D.traceCoord[0],y:D.traceCoord[1],curveNumber:F.index,pointNumber:y,
data:F._input,fullData:this.fullData,xaxis:this.xaxis,yaxis:this.yaxis};m.appendArrayPointValue(D,F,y);this.graphDiv.emit(C,{points:[D]})};b.draw=function(){if(!this.stopped){requestAnimationFrame(this.redraw);var D=this.glplot,C=this.camera,v=C.mouseListener,y=1===this.lastButtonState&&0===v.buttons,F=this.fullLayout;this.lastButtonState=v.buttons;this.cameraChanged();var J=v.x*D.pixelRatio;v=this.canvas.height-D.pixelRatio*v.y;if(C.boxEnabled&&"zoom"===F.dragmode){this.selectBox.enabled=!0;F=this.selectBox.selectBox=
[Math.min(C.boxStart[0],C.boxEnd[0]),Math.min(C.boxStart[1],C.boxEnd[1]),Math.max(C.boxStart[0],C.boxEnd[0]),Math.max(C.boxStart[1],C.boxEnd[1])];for(y=0;2>y;y++)C.boxStart[y]===C.boxEnd[y]&&(F[y]=D.dataBox[y],F[y+2]=D.dataBox[y+2]);D.setDirty()}else if(!C.panning&&this.isMouseOver){this.selectBox.enabled=!1;var K=F._size;(C=(K=D.pick(J/D.pixelRatio+K.l+this.xaxis.domain[0]*K.w,v/D.pixelRatio-(K.t+(1-this.yaxis.domain[1])*K.h)))&&K.object._trace.handlePick(K))&&y&&this.emitPointAction(C,"plotly_click");
K&&"skip"!==K.object._trace.hoverinfo&&F.hovermode&&C&&(!this.lastPickResult||this.lastPickResult.traceUid!==C.trace.uid||this.lastPickResult.dataCoord[0]!==C.dataCoord[0]||this.lastPickResult.dataCoord[1]!==C.dataCoord[1])&&(this.lastPickResult={traceUid:C.trace?C.trace.uid:null,dataCoord:C.dataCoord.slice()},this.spikes.update({center:K.dataCoord}),C.screenCoord=[((D.viewBox[2]-D.viewBox[0])*(K.dataCoord[0]-D.dataBox[0])/(D.dataBox[2]-D.dataBox[0])+D.viewBox[0])/D.pixelRatio,(this.canvas.height-
(D.viewBox[3]-D.viewBox[1])*(K.dataCoord[1]-D.dataBox[1])/(D.dataBox[3]-D.dataBox[1])-D.viewBox[1])/D.pixelRatio],this.emitPointAction(C,"plotly_hover"),y=this.fullData[C.trace.index]||{},J=C.pointIndex,(F=m.castHoverinfo(y,F,J))&&"all"!==F&&(F=F.split("+"),-1===F.indexOf("x")&&(C.traceCoord[0]=void 0),-1===F.indexOf("y")&&(C.traceCoord[1]=void 0),-1===F.indexOf("z")&&(C.traceCoord[2]=void 0),-1===F.indexOf("text")&&(C.textLabel=void 0),-1===F.indexOf("name")&&(C.name=void 0)),m.loneHover({x:C.screenCoord[0],
y:C.screenCoord[1],xLabel:this.hoverFormatter("xaxis",C.traceCoord[0]),yLabel:this.hoverFormatter("yaxis",C.traceCoord[1]),zLabel:C.traceCoord[2],text:C.textLabel,name:C.name,color:m.castHoverOption(y,J,"bgcolor")||C.color,borderColor:m.castHoverOption(y,J,"bordercolor"),fontFamily:m.castHoverOption(y,J,"font.family"),fontSize:m.castHoverOption(y,J,"font.size"),fontColor:m.castHoverOption(y,J,"font.color"),nameLength:m.castHoverOption(y,J,"namelength"),textAlign:m.castHoverOption(y,J,"align")},{container:this.svgContainer,
gd:this.graphDiv}))}K||this.unhover();D.draw()}};b.unhover=function(){this.lastPickResult&&(this.spikes.update({}),this.lastPickResult=null,this.graphDiv.emit("plotly_unhover"),m.loneUnhover(this.svgContainer))};b.hoverFormatter=function(D,C){if(void 0!==C)return D=this[D],k.tickText(D,D.c2l(C),"hover").text}},{"../../components/dragelement/helpers":684,"../../components/fx":706,"../../lib/show_no_webgl_msg":825,"../../plots/cartesian/axes":854,"../../registry":931,"../cartesian/autorange":853,"../cartesian/constants":861,
"../cartesian/constraints":862,"./camera":892,"./convert":893,"gl-plot2d":322,"gl-select-box":337,"gl-spikes2d":346,"webgl-context":629}],896:[function(b,N,G){N=b("../../plot_api/edit_types").overrideAll;var p=b("../../components/fx/layout_attributes"),n=b("./scene"),k=b("../get_data").getSubplotData,m=b("../../lib"),a=b("../../constants/xmlns_namespaces");G.name="gl3d";G.attr="scene";G.idRoot="scene";G.idRegex=G.attrRegex=m.counterRegex("scene");G.attributes=b("./layout/attributes");G.layoutAttributes=
b("./layout/layout_attributes");G.baseLayoutAttrOverrides=N({hoverlabel:p.hoverlabel},"plot","nested");G.supplyLayoutDefaults=b("./layout/defaults");G.plot=function(g){for(var h=g._fullLayout,r=g._fullData,l=h._subplots.gl3d,c=0;c<l.length;c++){var d=l[c],e=k(r,"gl3d",d),f=h[d],q=f.camera,t=f._scene;t||(t=new n({id:d,graphDiv:g,container:g.querySelector(".gl-container"),staticPlot:g._context.staticPlot,plotGlPixelRatio:g._context.plotGlPixelRatio,camera:q},h),f._scene=t);t.viewInitial||(t.viewInitial=
{up:{x:q.up.x,y:q.up.y,z:q.up.z},eye:{x:q.eye.x,y:q.eye.y,z:q.eye.z},center:{x:q.center.x,y:q.center.y,z:q.center.z}});t.plot(e,h,g.layout)}};G.clean=function(g,h,r,l){g=l._subplots.gl3d||[];for(r=0;r<g.length;r++){var c=g[r];!h[c]&&l[c]._scene&&(l[c]._scene.destroy(),l._infolayer&&l._infolayer.selectAll(".annotation-"+c).remove())}};G.toSVG=function(g){g=g._fullLayout;for(var h=g._subplots.gl3d,r=g._size,l=0;l<h.length;l++){var c=g[h[l]],d=c.domain;c=c._scene;var e=c.toImage("png");g._glimages.append("svg:image").attr({xmlns:a.svg,
"xlink:href":e,x:r.l+r.w*d.x[0],y:r.t+r.h*(1-d.y[1]),width:r.w*(d.x[1]-d.x[0]),height:r.h*(d.y[1]-d.y[0]),preserveAspectRatio:"none"});c.destroy()}};G.cleanId=function(g){if(g.match(/^scene[0-9]*$/))return g=g.substr(5),"1"===g&&(g=""),"scene"+g};G.updateFx=function(g){g=g._fullLayout;for(var h=g._subplots.gl3d,r=0;r<h.length;r++)g[h[r]]._scene.updateFx(g.dragmode,g.hovermode)}},{"../../components/fx/layout_attributes":707,"../../constants/xmlns_namespaces":780,"../../lib":803,"../../plot_api/edit_types":836,
"../get_data":891,"./layout/attributes":897,"./layout/defaults":901,"./layout/layout_attributes":902,"./scene":906}],897:[function(b,N,G){N.exports={scene:{valType:"subplotid",dflt:"scene",editType:"calc+clearAxisTypes"}}},{}],898:[function(b,N,G){G=b("../../../components/color");var p=b("../../cartesian/layout_attributes"),n=b("../../../lib/extend").extendFlat;b=b("../../../plot_api/edit_types").overrideAll;N.exports=b({visible:p.visible,showspikes:{valType:"boolean",dflt:!0},spikesides:{valType:"boolean",
dflt:!0},spikethickness:{valType:"number",min:0,dflt:2},spikecolor:{valType:"color",dflt:G.defaultLine},showbackground:{valType:"boolean",dflt:!1},backgroundcolor:{valType:"color",dflt:"rgba(204, 204, 204, 0.5)"},showaxeslabels:{valType:"boolean",dflt:!0},color:p.color,categoryorder:p.categoryorder,categoryarray:p.categoryarray,title:{text:p.title.text,font:p.title.font},type:n({},p.type,{values:["-","linear","log","date","category"]}),autotypenumbers:p.autotypenumbers,autorange:p.autorange,rangemode:p.rangemode,
range:n({},p.range,{items:[{valType:"any",editType:"plot",impliedEdits:{"^autorange":!1}},{valType:"any",editType:"plot",impliedEdits:{"^autorange":!1}}],anim:!1}),tickmode:p.tickmode,nticks:p.nticks,tick0:p.tick0,dtick:p.dtick,tickvals:p.tickvals,ticktext:p.ticktext,ticks:p.ticks,mirror:p.mirror,ticklen:p.ticklen,tickwidth:p.tickwidth,tickcolor:p.tickcolor,showticklabels:p.showticklabels,tickfont:p.tickfont,tickangle:p.tickangle,tickprefix:p.tickprefix,showtickprefix:p.showtickprefix,ticksuffix:p.ticksuffix,
showticksuffix:p.showticksuffix,showexponent:p.showexponent,exponentformat:p.exponentformat,minexponent:p.minexponent,separatethousands:p.separatethousands,tickformat:p.tickformat,tickformatstops:p.tickformatstops,hoverformat:p.hoverformat,showline:p.showline,linecolor:p.linecolor,linewidth:p.linewidth,showgrid:p.showgrid,gridcolor:n({},p.gridcolor,{dflt:"rgb(204, 204, 204)"}),gridwidth:p.gridwidth,zeroline:p.zeroline,zerolinecolor:p.zerolinecolor,zerolinewidth:p.zerolinewidth,_deprecated:{title:p._deprecated.title,
titlefont:p._deprecated.titlefont}},"plot","from-root")},{"../../../components/color":666,"../../../lib/extend":793,"../../../plot_api/edit_types":836,"../../cartesian/layout_attributes":869}],899:[function(b,N,G){var p=b("tinycolor2").mix,n=b("../../../lib"),k=b("../../../plot_api/plot_template"),m=b("./axis_attributes"),a=b("../../cartesian/type_defaults"),g=b("../../cartesian/axis_defaults"),h=["xaxis","yaxis","zaxis"],r=13600/187;N.exports=function(l,c,d){function e(x,z){return n.coerce(f,q,m,
x,z)}for(var f,q,t=0;t<h.length;t++){var w=h[t];f=l[w]||{};q=k.newContainer(c,w);q._id=w[0]+d.scene;q._name=w;a(f,q,e,d);g(f,q,e,{font:d.font,letter:w[0],data:d.data,showGrid:!0,noTickson:!0,noTicklabelmode:!0,noTicklabelposition:!0,noTicklabeloverflow:!0,bgColor:d.bgColor,calendar:d.calendar},d.fullLayout);e("gridcolor",p(q.color,d.bgColor,r).toRgbString());e("title.text",w[0]);q.setScale=n.noop;e("showspikes")&&(e("spikesides"),e("spikethickness"),e("spikecolor",q.color));e("showaxeslabels");e("showbackground")&&
e("backgroundcolor")}}},{"../../../lib":803,"../../../plot_api/plot_template":843,"../../cartesian/axis_defaults":856,"../../cartesian/type_defaults":880,"./axis_attributes":898,tinycolor2:598}],900:[function(b,N,G){function p(){this.bounds=[[-10,-10,-10],[10,10,10]];this.ticks=[[],[],[]];this.tickEnable=[!0,!0,!0];this.tickFont=["sans-serif","sans-serif","sans-serif"];this.tickSize=[12,12,12];this.tickAngle=[0,0,0];this.tickColor=[[0,0,0,1],[0,0,0,1],[0,0,0,1]];this.tickPad=[18,18,18];this.labels=
["x","y","z"];this.labelEnable=[!0,!0,!0];this.labelFont=["Open Sans","Open Sans","Open Sans"];this.labelSize=[20,20,20];this.labelColor=[[0,0,0,1],[0,0,0,1],[0,0,0,1]];this.labelPad=[30,30,30];this.lineEnable=[!0,!0,!0];this.lineMirror=[!1,!1,!1];this.lineWidth=[1,1,1];this.lineColor=[[0,0,0,1],[0,0,0,1],[0,0,0,1]];this.lineTickEnable=[!0,!0,!0];this.lineTickMirror=[!1,!1,!1];this.lineTickLength=[10,10,10];this.lineTickWidth=[1,1,1];this.lineTickColor=[[0,0,0,1],[0,0,0,1],[0,0,0,1]];this.gridEnable=
[!0,!0,!0];this.gridWidth=[1,1,1];this.gridColor=[[0,0,0,1],[0,0,0,1],[0,0,0,1]];this.zeroEnable=[!0,!0,!0];this.zeroLineColor=[[0,0,0,1],[0,0,0,1],[0,0,0,1]];this.zeroLineWidth=[2,2,2];this.backgroundEnable=[!0,!0,!0];this.backgroundColor=[[.8,.8,.8,.5],[.8,.8,.8,.5],[.8,.8,.8,.5]];this._defaultTickPad=this.tickPad.slice();this._defaultLabelPad=this.labelPad.slice();this._defaultLineTickLength=this.lineTickLength.slice()}var n=b("../../../lib/str2rgbarray"),k=b("../../../lib"),m=["xaxis","yaxis",
"zaxis"];p.prototype.merge=function(a,g){for(var h=0;3>h;++h){var r=g[m[h]];r.visible?(this.labels[h]=a._meta?k.templateString(r.title.text,a._meta):r.title.text,"font"in r.title&&(r.title.font.color&&(this.labelColor[h]=n(r.title.font.color)),r.title.font.family&&(this.labelFont[h]=r.title.font.family),r.title.font.size&&(this.labelSize[h]=r.title.font.size)),"showline"in r&&(this.lineEnable[h]=r.showline),"linecolor"in r&&(this.lineColor[h]=n(r.linecolor)),"linewidth"in r&&(this.lineWidth[h]=r.linewidth),
"showgrid"in r&&(this.gridEnable[h]=r.showgrid),"gridcolor"in r&&(this.gridColor[h]=n(r.gridcolor)),"gridwidth"in r&&(this.gridWidth[h]=r.gridwidth),"log"===r.type?this.zeroEnable[h]=!1:"zeroline"in r&&(this.zeroEnable[h]=r.zeroline),"zerolinecolor"in r&&(this.zeroLineColor[h]=n(r.zerolinecolor)),"zerolinewidth"in r&&(this.zeroLineWidth[h]=r.zerolinewidth),this.lineTickEnable[h]="ticks"in r&&r.ticks?!0:!1,"ticklen"in r&&(this.lineTickLength[h]=this._defaultLineTickLength[h]=r.ticklen),"tickcolor"in
r&&(this.lineTickColor[h]=n(r.tickcolor)),"tickwidth"in r&&(this.lineTickWidth[h]=r.tickwidth),"tickangle"in r&&(this.tickAngle[h]="auto"===r.tickangle?-3600:Math.PI*-r.tickangle/180),"showticklabels"in r&&(this.tickEnable[h]=r.showticklabels),"tickfont"in r&&(r.tickfont.color&&(this.tickColor[h]=n(r.tickfont.color)),r.tickfont.family&&(this.tickFont[h]=r.tickfont.family),r.tickfont.size&&(this.tickSize[h]=r.tickfont.size)),"mirror"in r?-1!==["ticks","all","allticks"].indexOf(r.mirror)?(this.lineTickMirror[h]=
!0,this.lineMirror[h]=!0):!0===r.mirror?(this.lineTickMirror[h]=!1,this.lineMirror[h]=!0):(this.lineTickMirror[h]=!1,this.lineMirror[h]=!1):this.lineMirror[h]=!1,"showbackground"in r&&!1!==r.showbackground?(this.backgroundEnable[h]=!0,this.backgroundColor[h]=n(r.backgroundcolor)):this.backgroundEnable[h]=!1):(this.tickEnable[h]=!1,this.labelEnable[h]=!1,this.lineEnable[h]=!1,this.lineTickEnable[h]=!1,this.gridEnable[h]=!1,this.zeroEnable[h]=!1,this.backgroundEnable[h]=!1)}};N.exports=function(a,g){var h=
new p;h.merge(a,g);return h}},{"../../../lib":803,"../../../lib/str2rgbarray":828}],901:[function(b,N,G){function p(l,c,d,e){var f=d("bgcolor");f=k.combine(f,e.paper_bgcolor);for(var q=["up","center","eye"],t=0;t<q.length;t++)d("camera."+q[t]+".x"),d("camera."+q[t]+".y"),d("camera."+q[t]+".z");d("camera.projection.type");q=!!d("aspectratio.x")&&!!d("aspectratio.y")&&!!d("aspectratio.z");t=d("aspectmode",q?"manual":"auto");q||(l.aspectratio=c.aspectratio={x:1,y:1,z:1},"manual"===t&&(c.aspectmode="auto"),
l.aspectmode=c.aspectmode);q=r(e.fullData,"gl3d",e.id);g(l,c,{font:e.font,scene:e.id,data:q,bgColor:f,calendar:e.calendar,autotypenumbersDflt:e.autotypenumbersDflt,fullLayout:e.fullLayout});m.getComponentMethod("annotations3d","handleDefaults")(l,c,e);c=e.getDfltFromLayout("dragmode");!1===c||c||(c="orbit",l.camera&&l.camera.up?(f=l.camera.up.x,q=l.camera.up.y,l=l.camera.up.z,0!==l&&(f&&q&&l?.999<l/Math.sqrt(f*f+q*q+l*l)&&(c="turntable"):c="turntable")):c="turntable");d("dragmode",c);d("hovermode",
e.getDfltFromLayout("hovermode"))}var n=b("../../../lib"),k=b("../../../components/color"),m=b("../../../registry"),a=b("../../subplot_defaults"),g=b("./axis_defaults"),h=b("./layout_attributes"),r=b("../../get_data").getSubplotData;N.exports=function(l,c,d){var e=1<c._basePlotModules.length;a(l,c,d,{type:"gl3d",attributes:h,handleDefaults:p,fullLayout:c,font:c.font,fullData:d,getDfltFromLayout:function(f){if(!e&&n.validate(l[f],h[f]))return l[f]},autotypenumbersDflt:c.autotypenumbers,paper_bgcolor:c.paper_bgcolor,
calendar:c.calendar})}},{"../../../components/color":666,"../../../lib":803,"../../../registry":931,"../../get_data":891,"../../subplot_defaults":925,"./axis_defaults":899,"./layout_attributes":902}],902:[function(b,N,G){function p(m,a,g){return{x:{valType:"number",dflt:m,editType:"camera"},y:{valType:"number",dflt:a,editType:"camera"},z:{valType:"number",dflt:g,editType:"camera"},editType:"camera"}}G=b("./axis_attributes");var n=b("../../domain").attributes,k=b("../../../lib/extend").extendFlat;
b=b("../../../lib").counterRegex;N.exports={_arrayAttrRegexps:[b("scene",".annotations",!0)],bgcolor:{valType:"color",dflt:"rgba(0,0,0,0)",editType:"plot"},camera:{up:k(p(0,0,1),{}),center:k(p(0,0,0),{}),eye:k(p(1.25,1.25,1.25),{}),projection:{type:{valType:"enumerated",values:["perspective","orthographic"],dflt:"perspective",editType:"calc"},editType:"calc"},editType:"camera"},domain:n({name:"scene",editType:"plot"}),aspectmode:{valType:"enumerated",values:["auto","cube","data","manual"],dflt:"auto",
editType:"plot",impliedEdits:{"aspectratio.x":void 0,"aspectratio.y":void 0,"aspectratio.z":void 0}},aspectratio:{x:{valType:"number",min:0,editType:"plot",impliedEdits:{"^aspectmode":"manual"}},y:{valType:"number",min:0,editType:"plot",impliedEdits:{"^aspectmode":"manual"}},z:{valType:"number",min:0,editType:"plot",impliedEdits:{"^aspectmode":"manual"}},editType:"plot",impliedEdits:{aspectmode:"manual"}},xaxis:G,yaxis:G,zaxis:G,dragmode:{valType:"enumerated",values:["orbit","turntable","zoom","pan",
!1],editType:"plot"},hovermode:{valType:"enumerated",values:["closest",!1],dflt:"closest",editType:"modebar"},uirevision:{valType:"any",editType:"none"},editType:"plot",_deprecated:{cameraposition:{valType:"info_array",editType:"camera"}}}},{"../../../lib":803,"../../../lib/extend":793,"../../domain":882,"./axis_attributes":898}],903:[function(b,N,G){function p(){this.enabled=[!0,!0,!0];this.colors=[[0,0,0,1],[0,0,0,1],[0,0,0,1]];this.drawSides=[!0,!0,!0];this.lineWidth=[1,1,1]}var n=b("../../../lib/str2rgbarray"),
k=["xaxis","yaxis","zaxis"];p.prototype.merge=function(m){for(var a=0;3>a;++a){var g=m[k[a]];g.visible?(this.enabled[a]=g.showspikes,this.colors[a]=n(g.spikecolor),this.drawSides[a]=g.spikesides,this.lineWidth[a]=g.spikethickness):(this.enabled[a]=!1,this.drawSides[a]=!1)}};N.exports=function(m){var a=new p;a.merge(m);return a}},{"../../../lib/str2rgbarray":828}],904:[function(b,N,G){N.exports=function(m){for(var a=m.axesOptions,g=m.glplot.axesPixels,h=m.fullSceneLayout,r=[[],[],[]],l=0;3>l;++l){var c=
h[k[l]];c._length=(g[l].hi-g[l].lo)*g[l].pixelsPerDataUnit/m.dataScale[l];if(Infinity===Math.abs(c._length)||isNaN(c._length))r[l]=[];else{c._input_range=c.range.slice();c.range[0]=g[l].lo/m.dataScale[l];c.range[1]=g[l].hi/m.dataScale[l];c._m=1/(m.dataScale[l]*g[l].pixelsPerDataUnit);c.range[0]===c.range[1]&&(--c.range[0],c.range[1]+=1);var d=c.tickmode;if("auto"===c.tickmode){c.tickmode="linear";var e=c.nticks||n.constrain(c._length/40,4,9);p.autoTicks(c,Math.abs(c.range[1]-c.range[0])/e)}e=p.calcTicks(c,
{msUTC:!0});for(var f=0;f<e.length;++f)e[f].x*=m.dataScale[l],"date"===c.type&&(e[f].text=e[f].text.replace(/<br>/g," "));r[l]=e;c.tickmode=d}}a.ticks=r;for(l=0;3>l;++l)for(f=0;2>f;++f)a.bounds[f][l]=m.glplot.bounds[f][l];a=Array(3);for(g=0;3>g;++g){h=r[g];l=Array(h.length);for(c=0;c<h.length;++c)l[c]=h[c].x;a[g]=l}m.contourLevels=a};var p=b("../../cartesian/axes"),n=b("../../../lib"),k=["xaxis","yaxis","zaxis"]},{"../../../lib":803,"../../cartesian/axes":854}],905:[function(b,N,G){function p(n,k){var m=
[0,0,0,0],a,g;for(a=0;4>a;++a)for(g=0;4>g;++g)m[g]+=n[4*a+g]*k[a];return m}N.exports=function(n,k){return p(n.projection,p(n.view,p(n.model,[k[0],k[1],k[2],1])))}},{}],906:[function(b,N,G){function p(v,y){var F=document.createElement("div"),J=v.container;this.graphDiv=v.graphDiv;var K=document.createElementNS("http://www.w3.org/2000/svg","svg");K.style.position="absolute";K.style.top=K.style.left="0px";K.style.width=K.style.height="100%";K.style["z-index"]=20;K.style["pointer-events"]="none";F.appendChild(K);
this.svgContainer=K;F.id=v.id;F.style.position="absolute";F.style.top=F.style.left="0px";F.style.width=F.style.height="100%";J.appendChild(F);this.fullLayout=y;this.id=v.id||"scene";this.fullSceneLayout=y[this.id];this.plotArgs=[[],{},{}];this.axesOptions=w(y,y[this.id]);this.spikeOptions=x(y[this.id]);this.container=F;this.staticMode=!!v.staticPlot;this.pixelRatio=this.pixelRatio||v.plotGlPixelRatio||2;this.dataScale=[1,1,1];this.contourLevels=[[],[],[]];this.convertAnnotations=r.getComponentMethod("annotations3d",
"convert");this.drawAnnotations=r.getComponentMethod("annotations3d","draw");this.initializeGLPlot()}function n(v,y,F){v=v.fullSceneLayout;for(var J=0;3>J;J++){var K=C[J],M=K.charAt(0);K=v[K];var H=y[M],O=y[M+"calendar"];M=y["_"+M+"length"];if(l.isArrayOrTypedArray(H))for(var I,L=0;L<(M||H.length);L++)if(l.isArrayOrTypedArray(H[L]))for(var Q=0;Q<H[L].length;++Q)I=K.d2l(H[L][Q],0,O),!isNaN(I)&&isFinite(I)&&(F[0][J]=Math.min(F[0][J],I),F[1][J]=Math.max(F[1][J],I));else I=K.d2l(H[L],0,O),!isNaN(I)&&
isFinite(I)&&(F[0][J]=Math.min(F[0][J],I),F[1][J]=Math.max(F[1][J],I));else F[0][J]=Math.min(F[0][J],0),F[1][J]=Math.max(F[1][J],M-1)}}function k(v,y){v=v.fullSceneLayout;for(var F=v.annotations||[],J=0;3>J;J++){var K=C[J],M=K.charAt(0);K=v[K];for(var H=0;H<F.length;H++){var O=F[H];O.visible&&(O=K.r2l(O[M]),!isNaN(O)&&isFinite(O)&&(y[0][J]=Math.min(y[0][J],O),y[1][J]=Math.max(y[1][J],O)))}}}G=b("gl-plot3d");var m=G.createCamera,a=G.createScene,g=b("webgl-context"),h=b("has-passive-events"),r=b("../../registry"),
l=b("../../lib"),c=l.preserveDrawingBuffer(),d=b("../../plots/cartesian/axes"),e=b("../../components/fx"),f=b("../../lib/str2rgbarray"),q=b("../../lib/show_no_webgl_msg"),t=b("./project"),w=b("./layout/convert"),x=b("./layout/spikes"),z=b("./layout/tick_marks"),B,A;b=p.prototype;b.prepareOptions=function(){var v={canvas:this.canvas,gl:this.gl,glOptions:{preserveDrawingBuffer:c,premultipliedAlpha:!0,antialias:!0},container:this.container,axes:this.axesOptions,spikes:this.spikeOptions,pickRadius:10,
snapToData:!0,autoScale:!0,autoBounds:!1,cameraObject:this.camera,pixelRatio:this.pixelRatio};if(this.staticMode){if(!A&&(B=document.createElement("canvas"),A=g({canvas:B,preserveDrawingBuffer:!0,premultipliedAlpha:!0,antialias:!0}),!A))throw Error("error creating static canvas/context for image server");v.gl=A;v.canvas=B}return v};var D=!0;b.tryCreatePlot=function(){var v=this.prepareOptions(),y=!0;try{this.glplot=a(v)}catch(F){if(this.staticMode||!D||c)y=!1;else{l.warn("webgl setup failed possibly due to false preserveDrawingBuffer config. The mobile/tablet device may not be detected by is-mobile module. Enabling preserveDrawingBuffer in second attempt to create webgl scene...");
try{c=v.glOptions.preserveDrawingBuffer=!0,this.glplot=a(v)}catch(J){y=c=v.glOptions.preserveDrawingBuffer=!1}}}D=!1;return y};b.initializeGLCamera=function(){var v=this.fullSceneLayout.camera;this.camera=m(this.container,{center:[v.center.x,v.center.y,v.center.z],eye:[v.eye.x,v.eye.y,v.eye.z],up:[v.up.x,v.up.y,v.up.z],_ortho:"orthographic"===v.projection.type,zoomMin:.01,zoomMax:100,mode:"orbit"})};b.initializeGLPlot=function(){var v=this;v.initializeGLCamera();if(!v.tryCreatePlot())return q(v);
v.traces={};v.make4thDimension();var y=v.graphDiv,F=y.layout,J=function(){var M={};v.isCameraChanged(F)&&(M[v.id+".camera"]=v.getCamera());v.isAspectChanged(F)&&(M[v.id+".aspectratio"]=v.glplot.getAspectratio(),"manual"!==F[v.id].aspectmode&&(v.fullSceneLayout.aspectmode=F[v.id].aspectmode=M[v.id+".aspectmode"]="manual"));return M},K=function(M){if(!1!==M.fullSceneLayout.dragmode){var H=J();M.saveLayout(F);M.graphDiv.emit("plotly_relayout",H)}};v.glplot.canvas&&(v.glplot.canvas.addEventListener("mouseup",
function(){K(v)}),v.glplot.canvas.addEventListener("wheel",function(M){if(y._context._scrollZoom.gl3d){if(v.camera._ortho){M=M.deltaX>M.deltaY?1.1:1/1.1;var H=v.glplot.getAspectratio();v.glplot.setAspectratio({x:M*H.x,y:M*H.y,z:M*H.z})}K(v)}},h?{passive:!1}:!1),v.glplot.canvas.addEventListener("mousemove",function(){if(!1!==v.fullSceneLayout.dragmode&&0!==v.camera.mouseListener.buttons){var M=J();v.graphDiv.emit("plotly_relayouting",M)}}),v.staticMode||v.glplot.canvas.addEventListener("webglcontextlost",
function(M){y&&y.emit&&y.emit("plotly_webglcontextlost",{event:M,layer:v.id})},!1));v.glplot.oncontextloss=function(){v.recoverContext()};v.glplot.onrender=function(){v.render()};return!0};b.render=function(){function v(fa,W,aa){fa=y.fullSceneLayout[fa+"axis"];"log"!==fa.type&&(W=fa.d2l(W));return d.hoverLabelText(fa,W,aa)}var y=this,F=y.graphDiv,J=y.svgContainer,K=y.container.getBoundingClientRect();F._fullLayout._calcInverseTransform(F);var M=K.width*F._fullLayout._invScaleX;K=K.height*F._fullLayout._invScaleY;
J.setAttributeNS(null,"viewBox","0 0 "+M+" "+K);J.setAttributeNS(null,"width",M);J.setAttributeNS(null,"height",K);z(y);y.glplot.axes.update(y.axesOptions);for(var H=Object.keys(y.traces),O=null,I=y.glplot.selection,L=0;L<H.length;++L){var Q=y.traces[H[L]];"skip"!==Q.data.hoverinfo&&Q.handlePick(I)&&(O=Q);Q.setContourLevels&&Q.setContourLevels()}if(null!==O){var Z=t(y.glplot.cameraParams,I.dataCoordinate);Q=O.data;H=F._fullData[Q.index];L=I.index;var ba={xLabel:v("x",I.traceCoordinate[0],Q.xhoverformat),
yLabel:v("y",I.traceCoordinate[1],Q.yhoverformat),zLabel:v("z",I.traceCoordinate[2],Q.zhoverformat)},V=e.castHoverinfo(H,y.fullLayout,L),S=(V||"").split("+");V=V&&"all"===V;H.hovertemplate||V||(-1===S.indexOf("x")&&(ba.xLabel=void 0),-1===S.indexOf("y")&&(ba.yLabel=void 0),-1===S.indexOf("z")&&(ba.zLabel=void 0),-1===S.indexOf("text")&&(I.textLabel=void 0),-1===S.indexOf("name")&&(O.name=void 0));var T=[];"cone"===Q.type||"streamtube"===Q.type?(ba.uLabel=v("x",I.traceCoordinate[3],Q.uhoverformat),
(V||-1!==S.indexOf("u"))&&T.push("u: "+ba.uLabel),ba.vLabel=v("y",I.traceCoordinate[4],Q.vhoverformat),(V||-1!==S.indexOf("v"))&&T.push("v: "+ba.vLabel),ba.wLabel=v("z",I.traceCoordinate[5],Q.whoverformat),(V||-1!==S.indexOf("w"))&&T.push("w: "+ba.wLabel),ba.normLabel=I.traceCoordinate[6].toPrecision(3),(V||-1!==S.indexOf("norm"))&&T.push("norm: "+ba.normLabel),"streamtube"===Q.type&&(ba.divergenceLabel=I.traceCoordinate[7].toPrecision(3),(V||-1!==S.indexOf("divergence"))&&T.push("divergence: "+ba.divergenceLabel)),
I.textLabel&&T.push(I.textLabel),S=T.join("\x3cbr\x3e")):"isosurface"===Q.type||"volume"===Q.type?(ba.valueLabel=d.hoverLabelText(y._mockAxis,y._mockAxis.d2l(I.traceCoordinate[3]),Q.valuehoverformat),T.push("value: "+ba.valueLabel),I.textLabel&&T.push(I.textLabel),S=T.join("\x3cbr\x3e")):S=I.textLabel;V={x:I.traceCoordinate[0],y:I.traceCoordinate[1],z:I.traceCoordinate[2],data:H._input,fullData:H,curveNumber:H.index,pointNumber:L};e.appendArrayPointValue(V,H,L);Q._module.eventData&&(V=H._module.eventData(V,
I,H,{},L));Q={points:[V]};y.fullSceneLayout.hovermode&&e.loneHover({trace:H,x:(.5+.5*Z[0]/Z[3])*M,y:(.5-.5*Z[1]/Z[3])*K,xLabel:ba.xLabel,yLabel:ba.yLabel,zLabel:ba.zLabel,text:S,name:O.name,color:e.castHoverOption(H,L,"bgcolor")||O.color,borderColor:e.castHoverOption(H,L,"bordercolor"),fontFamily:e.castHoverOption(H,L,"font.family"),fontSize:e.castHoverOption(H,L,"font.size"),fontColor:e.castHoverOption(H,L,"font.color"),nameLength:e.castHoverOption(H,L,"namelength"),textAlign:e.castHoverOption(H,
L,"align"),hovertemplate:l.castOption(H,L,"hovertemplate"),hovertemplateLabels:l.extendFlat({},V,ba),eventData:[V]},{container:J,gd:F});I.buttons&&5>I.distance?F.emit("plotly_click",Q):F.emit("plotly_hover",Q);Z=Q}else e.loneUnhover(J),F.emit("plotly_unhover",Z);y.drawAnnotations(y)};b.recoverContext=function(){var v=this;v.glplot.dispose();var y=function(){v.glplot.gl.isContextLost()?requestAnimationFrame(y):v.initializeGLPlot()?v.plot.apply(v,v.plotArgs):l.error("Catastrophic and unrecoverable WebGL error. Context lost.")};
requestAnimationFrame(y)};var C=["xaxis","yaxis","zaxis"];b.plot=function(v,y,F){this.plotArgs=[v,y,F];if(!this.glplot.contextLost){var J,K,M=y[this.id];F=F[this.id];this.fullLayout=y;this.fullSceneLayout=M;this.axesOptions.merge(y,M);this.spikeOptions.merge(M);this.setViewport(M);this.updateFx(M.dragmode,M.hovermode);this.camera.enableWheel=this.graphDiv._context._scrollZoom.gl3d;this.glplot.setClearColor(f(M.bgcolor));this.setConvert(O);v?Array.isArray(v)||(v=[v]):v=[];var H=[[Infinity,Infinity,
Infinity],[-Infinity,-Infinity,-Infinity]];for(J=0;J<v.length;++J){var O=v[J];!0===O.visible&&0!==O._length&&n(this,O,H)}k(this,H);var I=[1,1,1];for(K=0;3>K;++K)I[K]=H[1][K]===H[0][K]?1:1/(H[1][K]-H[0][K]);this.dataScale=I;this.convertAnnotations(this);for(J=0;J<v.length;++J)O=v[J],!0===O.visible&&0!==O._length&&((H=this.traces[O.uid])?H.data.type===O.type?H.update(O):(H.dispose(),H=O._module.plot(this,O),this.traces[O.uid]=H):(H=O._module.plot(this,O),this.traces[O.uid]=H),H.name=O.name);O=Object.keys(this.traces);
J=0;a:for(;J<O.length;++J){for(K=0;K<v.length;++K)if(v[K].uid===O[J]&&!0===v[K].visible&&0!==v[K]._length)continue a;H=this.traces[O[J]];H.dispose();delete this.traces[O[J]]}this.glplot.objects.sort(function(T,fa){return T._trace.data.index-fa._trace.data.index});H=[[0,0,0],[0,0,0]];v={};for(J=0;3>J;++J){O=M[C[J]];K=O.type;K in v?(v[K].acc*=I[J],v[K].count+=1):v[K]={acc:I[J],count:1};if(O.autorange){H[0][J]=Infinity;H[1][J]=-Infinity;var L=this.glplot.objects,Q=this.fullSceneLayout.annotations||[],
Z=O._name.charAt(0);for(K=0;K<L.length;K++){var ba=L[K],V=ba.bounds,S=ba._trace.data._pad||0;H[0][J]="ErrorBars"===ba.constructor.name&&O._lowerLogErrorBound?Math.min(H[0][J],O._lowerLogErrorBound):Math.min(H[0][J],V[0][J]/I[J]-S);H[1][J]=Math.max(H[1][J],V[1][J]/I[J]+S)}for(K=0;K<Q.length;K++)L=Q[K],L.visible&&(L=O.r2l(L[Z]),H[0][J]=Math.min(H[0][J],L),H[1][J]=Math.max(H[1][J],L));"rangemode"in O&&"tozero"===O.rangemode&&(H[0][J]=Math.min(H[0][J],0),H[1][J]=Math.max(H[1][J],0));H[0][J]>H[1][J]?(H[0][J]=
-1,H[1][J]=1):(K=H[1][J]-H[0][J],H[0][J]-=K/32,H[1][J]+=K/32);"reversed"===O.autorange&&(O=H[0][J],H[0][J]=H[1][J],H[1][J]=O)}else K=O.range,H[0][J]=O.r2l(K[0]),H[1][J]=O.r2l(K[1]);H[0][J]===H[1][J]&&(--H[0][J],H[1][J]+=1);this.glplot.setBounds(J,{min:H[0][J]*I[J],max:H[1][J]*I[J]})}H=M.aspectmode;if("cube"===H)J=[1,1,1];else if("manual"===H)J=M.aspectratio,J=[J.x,J.y,J.z];else if("auto"===H||"data"===H){Q=[1,1,1];for(J=0;3>J;++J)O=M[C[J]],K=O.type,O=v[K],Q[J]=Math.pow(O.acc,1/O.count)/I[J];J="data"===
H?Q:4>=Math.max.apply(null,Q)/Math.min.apply(null,Q)?Q:[1,1,1]}else throw Error("scene.js aspectRatio was not one of the enumerated types");M.aspectratio.x=F.aspectratio.x=J[0];M.aspectratio.y=F.aspectratio.y=J[1];M.aspectratio.z=F.aspectratio.z=J[2];this.glplot.setAspectratio(M.aspectratio);this.viewInitial.aspectratio||(this.viewInitial.aspectratio={x:M.aspectratio.x,y:M.aspectratio.y,z:M.aspectratio.z});this.viewInitial.aspectmode||(this.viewInitial.aspectmode=M.aspectmode);M=M.domain||null;y=
y._size||null;M&&y&&(F=this.container.style,F.position="absolute",F.left=y.l+M.x[0]*y.w+"px",F.top=y.t+(1-M.y[1])*y.h+"px",F.width=y.w*(M.x[1]-M.x[0])+"px",F.height=y.h*(M.y[1]-M.y[0])+"px");this.glplot.redraw()}};b.destroy=function(){this.glplot&&(this.camera.mouseListener.enabled=!1,this.container.removeEventListener("wheel",this.camera.wheelListener),this.camera=null,this.glplot.dispose(),this.container.parentNode.removeChild(this.container),this.glplot=null)};b.getCamera=function(){this.camera.view.recalcMatrix(this.camera.view.lastT());
var v=this.camera;return{up:{x:v.up[0],y:v.up[1],z:v.up[2]},center:{x:v.center[0],y:v.center[1],z:v.center[2]},eye:{x:v.eye[0],y:v.eye[1],z:v.eye[2]},projection:{type:!0===v._ortho?"orthographic":"perspective"}}};b.setViewport=function(v){var y=v.camera;this.camera.lookAt.apply(this,[[y.eye.x,y.eye.y,y.eye.z],[y.center.x,y.center.y,y.center.z],[y.up.x,y.up.y,y.up.z]]);this.glplot.setAspectratio(v.aspectratio);"orthographic"===y.projection.type!==this.camera._ortho&&(this.glplot.redraw(),this.glplot.clearRGBA(),
this.glplot.dispose(),this.initializeGLPlot())};b.isCameraChanged=function(v){var y=this.getCamera();v=l.nestedProperty(v,this.id+".camera").get();var F=!1;if(void 0===v)F=!0;else{for(var J=0;3>J;J++)for(var K=0;3>K;K++){var M=["up","center","eye"],H=["x","y","z"];if(!v[M[J]]||y[M[J]][H[K]]!==v[M[J]][H[K]]){F=!0;break}}if(!v.projection||y.projection&&y.projection.type!==v.projection.type)F=!0}return F};b.isAspectChanged=function(v){var y=this.glplot.getAspectratio();v=l.nestedProperty(v,this.id+".aspectratio").get();
return void 0===v||v.x!==y.x||v.y!==y.y||v.z!==y.z};b.saveLayout=function(v){var y=this.fullLayout,F=this.isCameraChanged(v),J=this.isAspectChanged(v),K=F||J;if(K){var M={};if(F){var H=this.getCamera();var O=l.nestedProperty(v,this.id+".camera");var I=O.get();M[this.id+".camera"]=I}if(J){var L=this.glplot.getAspectratio();var Q=l.nestedProperty(v,this.id+".aspectratio");I=Q.get();M[this.id+".aspectratio"]=I}r.call("_storeDirectGUIEdit",v,y._preGUI,M);F&&(O.set(H),l.nestedProperty(y,this.id+".camera").set(H));
J&&(Q.set(L),l.nestedProperty(y,this.id+".aspectratio").set(L),this.glplot.redraw())}return K};b.updateFx=function(v,y){var F=this.camera;if(F)if("orbit"===v)F.mode="orbit",F.keyBindingMode="rotate";else if("turntable"===v){F.up=[0,0,1];F.mode="turntable";F.keyBindingMode="rotate";var J=this.graphDiv;v=J._fullLayout;F=this.fullSceneLayout.camera;var K=F.up.x,M=F.up.y,H=F.up.z;.999>H/Math.sqrt(K*K+M*M+H*H)&&(K=this.id+".camera.up",M={x:0,y:0,z:1},H={},H[K]=M,J=J.layout,r.call("_storeDirectGUIEdit",
J,v._preGUI,H),F.up=M,l.nestedProperty(J,K).set(M))}else F.keyBindingMode=v;this.fullSceneLayout.hovermode=y};b.toImage=function(v){v||(v="png");this.staticMode&&this.container.appendChild(B);this.glplot.redraw();var y=this.glplot.gl,F=y.drawingBufferWidth,J=y.drawingBufferHeight;y.bindFramebuffer(y.FRAMEBUFFER,null);var K=new Uint8Array(F*J*4);y.readPixels(0,0,F,J,y.RGBA,y.UNSIGNED_BYTE,K);y=0;for(var M=J-1;y<M;++y,--M)for(var H=0;H<F;++H)for(var O=0;4>O;++O){var I=4*(F*y+H)+O,L=4*(F*M+H)+O,Q=K[I];
K[I]=K[L];K[L]=Q}for(y=0;y<J;++y)for(M=0;M<F;++M)if(H=4*(F*y+M),O=K[H+3],0<O)for(O=255/O,I=0;3>I;++I)K[H+I]=Math.min(O*K[H+I],255);y=document.createElement("canvas");y.width=F;y.height=J;M=y.getContext("2d");F=M.createImageData(F,J);F.data.set(K);M.putImageData(F,0,0);switch(v){case "jpeg":v=y.toDataURL("image/jpeg");break;case "webp":v=y.toDataURL("image/webp");break;default:v=y.toDataURL("image/png")}this.staticMode&&this.container.removeChild(B);return v};b.setConvert=function(){for(var v=0;3>
v;v++){var y=this.fullSceneLayout[C[v]];d.setConvert(y,this.fullLayout);y.setScale=l.noop}};b.make4thDimension=function(){var v=this.graphDiv._fullLayout;this._mockAxis={type:"linear",showexponent:"all",exponentformat:"B"};d.setConvert(this._mockAxis,v)};N.exports=p},{"../../components/fx":706,"../../lib":803,"../../lib/show_no_webgl_msg":825,"../../lib/str2rgbarray":828,"../../plots/cartesian/axes":854,"../../registry":931,"./layout/convert":900,"./layout/spikes":903,"./layout/tick_marks":904,"./project":905,
"gl-plot3d":326,"has-passive-events":444,"webgl-context":629}],907:[function(b,N,G){N.exports=function(p,n,k,m){m=m||p.length;for(var a=Array(m),g=0;g<m;g++)a[g]=[p[g],n[g],k[g]];return a}},{}],908:[function(b,N,G){G=b("./font_attributes");var p=b("./animation_attributes"),n=b("../components/color/attributes"),k=b("../components/shapes/draw_newshape/attributes"),m=b("./pad_attributes");b=b("../lib/extend").extendFlat;var a=G({editType:"calc"});a.family.dflt='"Open Sans", verdana, arial, sans-serif';
a.size.dflt=12;a.color.dflt=n.defaultLine;N.exports={font:a,title:{text:{valType:"string",editType:"layoutstyle"},font:G({editType:"layoutstyle"}),xref:{valType:"enumerated",dflt:"container",values:["container","paper"],editType:"layoutstyle"},yref:{valType:"enumerated",dflt:"container",values:["container","paper"],editType:"layoutstyle"},x:{valType:"number",min:0,max:1,dflt:.5,editType:"layoutstyle"},y:{valType:"number",min:0,max:1,dflt:"auto",editType:"layoutstyle"},xanchor:{valType:"enumerated",
dflt:"auto",values:["auto","left","center","right"],editType:"layoutstyle"},yanchor:{valType:"enumerated",dflt:"auto",values:["auto","top","middle","bottom"],editType:"layoutstyle"},pad:b(m({editType:"layoutstyle"}),{}),editType:"layoutstyle"},uniformtext:{mode:{valType:"enumerated",values:[!1,"hide","show"],dflt:!1,editType:"plot"},minsize:{valType:"number",min:0,dflt:0,editType:"plot"},editType:"plot"},autosize:{valType:"boolean",dflt:!1,editType:"none"},width:{valType:"number",min:10,dflt:700,
editType:"plot"},height:{valType:"number",min:10,dflt:450,editType:"plot"},margin:{l:{valType:"number",min:0,dflt:80,editType:"plot"},r:{valType:"number",min:0,dflt:80,editType:"plot"},t:{valType:"number",min:0,dflt:100,editType:"plot"},b:{valType:"number",min:0,dflt:80,editType:"plot"},pad:{valType:"number",min:0,dflt:0,editType:"plot"},autoexpand:{valType:"boolean",dflt:!0,editType:"plot"},editType:"plot"},computed:{valType:"any",editType:"none"},paper_bgcolor:{valType:"color",dflt:n.background,
editType:"plot"},plot_bgcolor:{valType:"color",dflt:n.background,editType:"layoutstyle"},autotypenumbers:{valType:"enumerated",values:["convert types","strict"],dflt:"convert types",editType:"calc"},separators:{valType:"string",editType:"plot"},hidesources:{valType:"boolean",dflt:!1,editType:"plot"},showlegend:{valType:"boolean",editType:"legend"},colorway:{valType:"colorlist",dflt:n.defaults,editType:"calc"},datarevision:{valType:"any",editType:"calc"},uirevision:{valType:"any",editType:"none"},
editrevision:{valType:"any",editType:"none"},selectionrevision:{valType:"any",editType:"none"},template:{valType:"any",editType:"calc"},newshape:k.newshape,activeshape:k.activeshape,meta:{valType:"any",arrayOk:!0,editType:"plot"},transition:b({},p.transition,{editType:"none"}),_deprecated:{title:{valType:"string",editType:"layoutstyle"},titlefont:G({editType:"layoutstyle"})}}},{"../components/color/attributes":665,"../components/shapes/draw_newshape/attributes":751,"../lib/extend":793,"./animation_attributes":848,
"./font_attributes":883,"./pad_attributes":916}],909:[function(b,N,G){G={"open-street-map":{id:"osm",version:8,sources:{"plotly-osm-tiles":{type:"raster",attribution:' \x3ca target\x3d"_blank" href\x3d"https://www.openstreetmap.org/copyright"\x3eOpenStreetMap\x3c/a\x3e contributors',tiles:["https://a.tile.openstreetmap.org/{z}/{x}/{y}.png","https://b.tile.openstreetmap.org/{z}/{x}/{y}.png"],tileSize:256}},layers:[{id:"plotly-osm-tiles",type:"raster",source:"plotly-osm-tiles",minzoom:0,maxzoom:22}]},
"white-bg":{id:"white-bg",version:8,sources:{},layers:[{id:"white-bg",type:"background",paint:{"background-color":"#FFFFFF"},minzoom:0,maxzoom:22}]},"carto-positron":{id:"carto-positron",version:8,sources:{"plotly-carto-positron":{type:"raster",attribution:' \x3ca target\x3d"_blank" href\x3d"https://carto.com/"\x3eCarto\x3c/a\x3e  \x3ca target\x3d"_blank" href\x3d"https://www.openstreetmap.org/copyright"\x3eOpenStreetMap\x3c/a\x3e contributors',tiles:["https://cartodb-basemaps-c.global.ssl.fastly.net/light_all/{z}/{x}/{y}.png"],
tileSize:256}},layers:[{id:"plotly-carto-positron",type:"raster",source:"plotly-carto-positron",minzoom:0,maxzoom:22}]},"carto-darkmatter":{id:"carto-darkmatter",version:8,sources:{"plotly-carto-darkmatter":{type:"raster",attribution:' \x3ca target\x3d"_blank" href\x3d"https://carto.com/"\x3eCarto\x3c/a\x3e  \x3ca target\x3d"_blank" href\x3d"https://www.openstreetmap.org/copyright"\x3eOpenStreetMap\x3c/a\x3e contributors',tiles:["https://cartodb-basemaps-c.global.ssl.fastly.net/dark_all/{z}/{x}/{y}.png"],
tileSize:256}},layers:[{id:"plotly-carto-darkmatter",type:"raster",source:"plotly-carto-darkmatter",minzoom:0,maxzoom:22}]},"stamen-terrain":{id:"stamen-terrain",version:8,sources:{"plotly-stamen-terrain":{type:"raster",attribution:'Map tiles by \x3ca target\x3d"_blank" href\x3d"https://stamen.com"\x3eStamen Design\x3c/a\x3e under \x3ca target\x3d"_blank" href\x3d"https://creativecommons.org/licenses/by/3.0"\x3eCC BY 3.0\x3c/a\x3e | Data by \x3ca target\x3d"_blank" href\x3d"https://openstreetmap.org"\x3eOpenStreetMap\x3c/a\x3e contributors under \x3ca target\x3d"_blank" href\x3d"https://www.openstreetmap.org/copyright"\x3eODbL\x3c/a\x3e',
tiles:["https://stamen-tiles.a.ssl.fastly.net/terrain/{z}/{x}/{y}.png"],tileSize:256}},layers:[{id:"plotly-stamen-terrain",type:"raster",source:"plotly-stamen-terrain",minzoom:0,maxzoom:22}]},"stamen-toner":{id:"stamen-toner",version:8,sources:{"plotly-stamen-toner":{type:"raster",attribution:'Map tiles by \x3ca target\x3d"_blank" href\x3d"https://stamen.com"\x3eStamen Design\x3c/a\x3e under \x3ca target\x3d"_blank" href\x3d"https://creativecommons.org/licenses/by/3.0"\x3eCC BY 3.0\x3c/a\x3e | Data by \x3ca target\x3d"_blank" href\x3d"https://openstreetmap.org"\x3eOpenStreetMap\x3c/a\x3e contributors under \x3ca target\x3d"_blank" href\x3d"https://www.openstreetmap.org/copyright"\x3eODbL\x3c/a\x3e',
tiles:["https://stamen-tiles.a.ssl.fastly.net/toner/{z}/{x}/{y}.png"],tileSize:256}},layers:[{id:"plotly-stamen-toner",type:"raster",source:"plotly-stamen-toner",minzoom:0,maxzoom:22}]},"stamen-watercolor":{id:"stamen-watercolor",version:8,sources:{"plotly-stamen-watercolor":{type:"raster",attribution:'Map tiles by \x3ca target\x3d"_blank" href\x3d"https://stamen.com"\x3eStamen Design\x3c/a\x3e under \x3ca target\x3d"_blank" href\x3d"https://creativecommons.org/licenses/by/3.0"\x3eCC BY 3.0\x3c/a\x3e | Data by \x3ca target\x3d"_blank" href\x3d"https://openstreetmap.org"\x3eOpenStreetMap\x3c/a\x3e contributors under \x3ca target\x3d"_blank" href\x3d"https://creativecommons.org/licenses/by-sa/3.0"\x3eCC BY SA\x3c/a\x3e',
tiles:["https://stamen-tiles.a.ssl.fastly.net/watercolor/{z}/{x}/{y}.png"],tileSize:256}},layers:[{id:"plotly-stamen-watercolor",type:"raster",source:"plotly-stamen-watercolor",minzoom:0,maxzoom:22}]}};b=b("../../lib/sort_object_keys")(G);N.exports={requiredVersion:"1.10.1",styleUrlPrefix:"mapbox://styles/mapbox/",styleUrlSuffix:"v9",styleValuesMapbox:"basic streets outdoors light dark satellite satellite-streets".split(" "),styleValueDflt:"basic",stylesNonMapbox:G,styleValuesNonMapbox:b,traceLayerPrefix:"plotly-trace-layer-",
layoutLayerPrefix:"plotly-layout-layer-",wrongVersionErrorMsg:"Your custom plotly.js bundle is not using the correct mapbox-gl version\nPlease install mapbox-gl@1.10.1.",noAccessTokenErrorMsg:"Missing Mapbox access token.\nMapbox trace type require a Mapbox access token to be registered.\nFor example:\n  Plotly.newPlot(gd, data, layout, { mapboxAccessToken: 'my-access-token' });\nMore info here: https://www.mapbox.com/help/define-access-token/",missingStyleErrorMsg:["No valid mapbox style found, please set `mapbox.style` to one of:",
b.join(", "),"or register a Mapbox access token to use a Mapbox-served style."].join("\n"),multipleTokensErrorMsg:"Set multiple mapbox access token across different mapbox subplot,\nusing first token found as mapbox-gl does not allow multipleaccess tokens on the same page.",mapOnErrorMsg:"Mapbox error.",mapboxLogo:{path0:"m 10.5,1.24 c -5.11,0 -9.25,4.15 -9.25,9.25 0,5.1 4.15,9.25 9.25,9.25 5.1,0 9.25,-4.15 9.25,-9.25 0,-5.11 -4.14,-9.25 -9.25,-9.25 z m 4.39,11.53 c -1.93,1.93 -4.78,2.31 -6.7,2.31 -0.7,0 -1.41,-0.05 -2.1,-0.16 0,0 -1.02,-5.64 2.14,-8.81 0.83,-0.83 1.95,-1.28 3.13,-1.28 1.27,0 2.49,0.51 3.39,1.42 1.84,1.84 1.89,4.75 0.14,6.52 z",
path1:"M 10.5,-0.01 C 4.7,-0.01 0,4.7 0,10.49 c 0,5.79 4.7,10.5 10.5,10.5 5.8,0 10.5,-4.7 10.5,-10.5 C 20.99,4.7 16.3,-0.01 10.5,-0.01 Z m 0,19.75 c -5.11,0 -9.25,-4.15 -9.25,-9.25 0,-5.1 4.14,-9.26 9.25,-9.26 5.11,0 9.25,4.15 9.25,9.25 0,5.13 -4.14,9.26 -9.25,9.26 z",path2:"M 14.74,6.25 C 12.9,4.41 9.98,4.35 8.23,6.1 5.07,9.27 6.09,14.91 6.09,14.91 c 0,0 5.64,1.02 8.81,-2.14 C 16.64,11 16.59,8.09 14.74,6.25 Z m -2.27,4.09 -0.91,1.87 -0.9,-1.87 -1.86,-0.91 1.86,-0.9 0.9,-1.87 0.91,1.87 1.86,0.9 z",
polygon:"11.56,12.21 10.66,10.34 8.8,9.43 10.66,8.53 11.56,6.66 12.47,8.53 14.33,9.43 12.47,10.34"},styleRules:{map:"overflow:hidden;position:relative;","missing-css":"display:none;",canary:"background-color:salmon;","ctrl-bottom-left":"position: absolute; pointer-events: none; z-index: 2; bottom: 0; left: 0;","ctrl-bottom-right":"position: absolute; pointer-events: none; z-index: 2; right: 0; bottom: 0;",ctrl:"clear: both; pointer-events: auto; transform: translate(0, 0);","ctrl-attrib.mapboxgl-compact .mapboxgl-ctrl-attrib-inner":"display: none;",
"ctrl-attrib.mapboxgl-compact:hover .mapboxgl-ctrl-attrib-inner":"display: block; margin-top:2px","ctrl-attrib.mapboxgl-compact:hover":"padding: 2px 24px 2px 4px; visibility: visible; margin-top: 6px;","ctrl-attrib.mapboxgl-compact::after":'content: ""; cursor: pointer; position: absolute; background-image: url(\'data:image/svg+xml;charset\x3dutf-8,%3Csvg viewBox\x3d"0 0 20 20" xmlns\x3d"http://www.w3.org/2000/svg"%3E %3Cpath fill\x3d"%23333333" fill-rule\x3d"evenodd" d\x3d"M4,10a6,6 0 1,0 12,0a6,6 0 1,0 -12,0 M9,7a1,1 0 1,0 2,0a1,1 0 1,0 -2,0 M9,10a1,1 0 1,1 2,0l0,3a1,1 0 1,1 -2,0"/%3E %3C/svg%3E\'); background-color: rgba(255, 255, 255, 0.5); width: 24px; height: 24px; box-sizing: border-box; border-radius: 12px;',
"ctrl-attrib.mapboxgl-compact":"min-height: 20px; padding: 0; margin: 10px; position: relative; background-color: #fff; border-radius: 3px 12px 12px 3px;","ctrl-bottom-right \x3e .mapboxgl-ctrl-attrib.mapboxgl-compact::after":"bottom: 0; right: 0","ctrl-bottom-left \x3e .mapboxgl-ctrl-attrib.mapboxgl-compact::after":"bottom: 0; left: 0","ctrl-bottom-left .mapboxgl-ctrl":"margin: 0 0 10px 10px; float: left;","ctrl-bottom-right .mapboxgl-ctrl":"margin: 0 10px 10px 0; float: right;","ctrl-attrib":"color: rgba(0, 0, 0, 0.75); text-decoration: none; font-size: 12px",
"ctrl-attrib a":"color: rgba(0, 0, 0, 0.75); text-decoration: none; font-size: 12px","ctrl-attrib a:hover":"color: inherit; text-decoration: underline;","ctrl-attrib .mapbox-improve-map":"font-weight: bold; margin-left: 2px;","attrib-empty":"display: none;","ctrl-logo":'display:block; width: 21px; height: 21px; background-image: url(\'data:image/svg+xml;charset\x3dutf-8,%3C?xml version\x3d"1.0" encoding\x3d"utf-8"?%3E %3Csvg version\x3d"1.1" id\x3d"Layer_1" xmlns\x3d"http://www.w3.org/2000/svg" xmlns:xlink\x3d"http://www.w3.org/1999/xlink" x\x3d"0px" y\x3d"0px" viewBox\x3d"0 0 21 21" style\x3d"enable-background:new 0 0 21 21;" xml:space\x3d"preserve"%3E%3Cg transform\x3d"translate(0,0.01)"%3E%3Cpath d\x3d"m 10.5,1.24 c -5.11,0 -9.25,4.15 -9.25,9.25 0,5.1 4.15,9.25 9.25,9.25 5.1,0 9.25,-4.15 9.25,-9.25 0,-5.11 -4.14,-9.25 -9.25,-9.25 z m 4.39,11.53 c -1.93,1.93 -4.78,2.31 -6.7,2.31 -0.7,0 -1.41,-0.05 -2.1,-0.16 0,0 -1.02,-5.64 2.14,-8.81 0.83,-0.83 1.95,-1.28 3.13,-1.28 1.27,0 2.49,0.51 3.39,1.42 1.84,1.84 1.89,4.75 0.14,6.52 z" style\x3d"opacity:0.9;fill:%23ffffff;enable-background:new" class\x3d"st0"/%3E%3Cpath d\x3d"M 10.5,-0.01 C 4.7,-0.01 0,4.7 0,10.49 c 0,5.79 4.7,10.5 10.5,10.5 5.8,0 10.5,-4.7 10.5,-10.5 C 20.99,4.7 16.3,-0.01 10.5,-0.01 Z m 0,19.75 c -5.11,0 -9.25,-4.15 -9.25,-9.25 0,-5.1 4.14,-9.26 9.25,-9.26 5.11,0 9.25,4.15 9.25,9.25 0,5.13 -4.14,9.26 -9.25,9.26 z" style\x3d"opacity:0.35;enable-background:new" class\x3d"st1"/%3E%3Cpath d\x3d"M 14.74,6.25 C 12.9,4.41 9.98,4.35 8.23,6.1 5.07,9.27 6.09,14.91 6.09,14.91 c 0,0 5.64,1.02 8.81,-2.14 C 16.64,11 16.59,8.09 14.74,6.25 Z m -2.27,4.09 -0.91,1.87 -0.9,-1.87 -1.86,-0.91 1.86,-0.9 0.9,-1.87 0.91,1.87 1.86,0.9 z" style\x3d"opacity:0.35;enable-background:new" class\x3d"st1"/%3E%3Cpolygon points\x3d"11.56,12.21 10.66,10.34 8.8,9.43 10.66,8.53 11.56,6.66 12.47,8.53 14.33,9.43 12.47,10.34 " style\x3d"opacity:0.9;fill:%23ffffff;enable-background:new" class\x3d"st0"/%3E%3C/g%3E%3C/svg%3E\')'}}},
{"../../lib/sort_object_keys":826}],910:[function(b,N,G){var p=b("../../lib");N.exports=function(n,k){var m=n.split(" ");n=m[0];m=m[1];var a=p.isArrayOrTypedArray(k)?p.mean(k):k;k=.5+a/100;a=1.5+a/100;var g=["",""],h=[0,0];switch(n){case "top":g[0]="top";h[1]=-a;break;case "bottom":g[0]="bottom",h[1]=a}switch(m){case "left":g[1]="right";h[0]=-k;break;case "right":g[1]="left",h[0]=k}return{anchor:g[0]&&g[1]?g.join("-"):g[0]?g[0]:g[1]?g[1]:"center",offset:h}}},{"../../lib":803}],911:[function(b,N,G){function p(f){return"string"===
typeof f&&(-1!==e.styleValuesMapbox.indexOf(f)||0===f.indexOf("mapbox://"))}var n=b("mapbox-gl/dist/mapbox-gl-unminified"),k=b("../../lib"),m=k.strTranslate,a=k.strScale,g=b("../../plots/get_data").getSubplotCalcData,h=b("../../constants/xmlns_namespaces"),r=b("@plotly/d3"),l=b("../../components/drawing"),c=b("../../lib/svg_text_utils"),d=b("./mapbox"),e=G.constants=b("./constants");G.name="mapbox";G.attr="subplot";G.idRoot="mapbox";G.idRegex=G.attrRegex=k.counterRegex("mapbox");G.attributes={subplot:{valType:"subplotid",
dflt:"mapbox",editType:"calc"}};G.layoutAttributes=b("./layout_attributes");G.supplyLayoutDefaults=b("./layout_defaults");G.plot=function(f){var q=f._fullLayout,t=f.calcdata,w=q._subplots.mapbox;if(n.version!==e.requiredVersion)throw Error(e.wrongVersionErrorMsg);var x=f._fullLayout;if(""===f._context.mapboxAccessToken)x="";else{for(var z=[],B=[],A=!1,D=!1,C=0;C<w.length;C++){var v=x[w[C]],y=v.accesstoken;p(v.style)&&(y?k.pushUnique(z,y):(p(v._input.style)&&(k.error("Uses Mapbox map style, but did not set an access token."),
A=!0),D=!0));y&&k.pushUnique(B,y)}if(D)throw f=A?e.noAccessTokenErrorMsg:e.missingStyleErrorMsg,k.error(f),Error(f);z.length?(1<z.length&&k.warn(e.multipleTokensErrorMsg),x=z[0]):(B.length&&k.log(["Listed mapbox access token(s)",B.join(","),"but did not use a Mapbox map style, ignoring token(s)."].join(" ")),x="")}n.accessToken=x;for(x=0;x<w.length;x++)z=w[x],B=g(t,"mapbox",z),A=q[z],D=A._subplot,D||(D=new d(f,z),q[z]._subplot=D),D.viewInitial||(D.viewInitial={center:k.extendFlat({},A.center),zoom:A.zoom,
bearing:A.bearing,pitch:A.pitch}),D.plot(B,q,f._promises)};G.clean=function(f,q,t,w){f=w._subplots.mapbox||[];for(t=0;t<f.length;t++){var x=f[t];!q[x]&&w[x]._subplot&&w[x]._subplot.destroy()}};G.toSVG=function(f){for(var q=f._fullLayout,t=q._subplots.mapbox,w=q._size,x=0;x<t.length;x++){var z=q[t[x]],B=z.domain,A=z._subplot.toImage("png");q._glimages.append("svg:image").attr({xmlns:h.svg,"xlink:href":A,x:w.l+w.w*B.x[0],y:w.t+w.h*(1-B.y[1]),width:w.w*(B.x[1]-B.x[0]),height:w.h*(B.y[1]-B.y[0]),preserveAspectRatio:"none"});
z=r.select(z._subplot.div);null!==z.select(".mapboxgl-ctrl-logo").node().offsetParent&&(A=q._glimages.append("g"),A.attr("transform",m(w.l+w.w*B.x[0]+10,w.t+w.h*(1-B.y[0])-31)),A.append("path").attr("d",e.mapboxLogo.path0).style({opacity:.9,fill:"#ffffff","enable-background":"new"}),A.append("path").attr("d",e.mapboxLogo.path1).style("opacity",.35).style("enable-background","new"),A.append("path").attr("d",e.mapboxLogo.path2).style("opacity",.35).style("enable-background","new"),A.append("polygon").attr("points",
e.mapboxLogo.polygon).style({opacity:.9,fill:"#ffffff","enable-background":"new"}));var D=z.select(".mapboxgl-ctrl-attrib").text().replace("Improve this map","");z=q._glimages.append("g");var C=z.append("text");C.text(D).classed("static-attribution",!0).attr({"font-size":12,"font-family":"Arial",color:"rgba(0, 0, 0, 0.75)","text-anchor":"end","data-unformatted":D});var v=l.bBox(C.node());A=w.w*(B.x[1]-B.x[0]);v.width>A/2&&(v=D.split("|").join("\x3cbr\x3e"),C.text(v).attr("data-unformatted",v).call(c.convertToTspans,
f),v=l.bBox(C.node()));C.attr("transform",m(-3,-v.height+8));z.insert("rect",".static-attribution").attr({x:-v.width-6,y:-v.height-3,width:v.width+6,height:v.height+3,fill:"rgba(255, 255, 255, 0.75)"});C=1;v.width+6>A&&(C=A/(v.width+6));B=[w.l+w.w*B.x[1],w.t+w.h*(1-B.y[0])];z.attr("transform",m(B[0],B[1])+a(C))}};G.updateFx=function(f){f=f._fullLayout;for(var q=f._subplots.mapbox,t=0;t<q.length;t++)f[q[t]]._subplot.updateFx(f)}},{"../../components/drawing":688,"../../constants/xmlns_namespaces":780,
"../../lib":803,"../../lib/svg_text_utils":829,"../../plots/get_data":891,"./constants":909,"./layout_attributes":913,"./layout_defaults":914,"./mapbox":915,"@plotly/d3":58,"mapbox-gl/dist/mapbox-gl-unminified":461}],912:[function(b,N,G){function p(r,l){this.subplot=r;this.uid=r.uid+"-"+l;this.index=l;this.idSource="source-"+this.uid;this.idLayer=h.layoutLayerPrefix+this.uid;this.below=this.layerType=this.source=this.sourceType=null;this.visible=!1}function n(r){if(!r.visible)return!1;r=r.source;
if(Array.isArray(r)&&0<r.length){for(var l=0;l<r.length;l++)if("string"!==typeof r[l]||0===r[l].length)return!1;return!0}return m.isPlainObject(r)||"string"===typeof r&&0<r.length}function k(r){var l={},c={};switch(r.type){case "circle":m.extendFlat(c,{"circle-radius":r.circle.radius,"circle-color":r.color,"circle-opacity":r.opacity});break;case "line":m.extendFlat(c,{"line-width":r.line.width,"line-color":r.color,"line-opacity":r.opacity,"line-dasharray":r.line.dash});break;case "fill":m.extendFlat(c,
{"fill-color":r.color,"fill-outline-color":r.fill.outlinecolor,"fill-opacity":r.opacity});break;case "symbol":var d=r.symbol,e=g(d.textposition,d.iconsize);m.extendFlat(l,{"icon-image":d.icon+"-15","icon-size":d.iconsize/10,"text-field":d.text,"text-size":d.textfont.size,"text-anchor":e.anchor,"text-offset":e.offset,"symbol-placement":d.placement});m.extendFlat(c,{"icon-color":r.color,"text-color":d.textfont.color,"text-opacity":r.opacity});break;case "raster":m.extendFlat(c,{"raster-fade-duration":0,
"raster-opacity":r.opacity})}return{layout:l,paint:c}}var m=b("../../lib"),a=b("../../lib/svg_text_utils").sanitizeHTML,g=b("./convert_text_opts"),h=b("./constants");b=p.prototype;b.update=function(r){this.visible?this.needsNewImage(r)?this.updateImage(r):this.needsNewSource(r)?(this.removeLayer(),this.updateSource(r),this.updateLayer(r)):this.needsNewLayer(r)?this.updateLayer(r):this.updateStyle(r):(this.updateSource(r),this.updateLayer(r));this.visible=n(r)};b.needsNewImage=function(r){return this.subplot.map.getSource(this.idSource)&&
"image"===this.sourceType&&"image"===r.sourcetype&&(this.source!==r.source||JSON.stringify(this.coordinates)!==JSON.stringify(r.coordinates))};b.needsNewSource=function(r){return this.sourceType!==r.sourcetype||JSON.stringify(this.source)!==JSON.stringify(r.source)||this.layerType!==r.type};b.needsNewLayer=function(r){return this.layerType!==r.type||this.below!==this.subplot.belowLookup["layout-"+this.index]};b.lookupBelow=function(){return this.subplot.belowLookup["layout-"+this.index]};b.updateImage=
function(r){this.subplot.map.getSource(this.idSource).updateImage({url:r.source,coordinates:r.coordinates});r=this.findFollowingMapboxLayerId(this.lookupBelow());null!==r&&this.subplot.map.moveLayer(this.idLayer,r)};b.updateSource=function(r){var l=this.subplot.map;l.getSource(this.idSource)&&l.removeSource(this.idSource);this.sourceType=r.sourcetype;this.source=r.source;if(n(r)){var c=r.sourcetype,d=r.source,e={type:c};if("geojson"===c)var f="data";else"vector"===c?f="string"===typeof d?"url":"tiles":
"raster"===c?(f="tiles",e.tileSize=256):"image"===c&&(f="url",e.coordinates=r.coordinates);e[f]=d;r.sourceattribution&&(e.attribution=a(r.sourceattribution));l.addSource(this.idSource,e)}};b.findFollowingMapboxLayerId=function(r){if("traces"===r)for(var l=this.subplot.getMapLayers(),c=0;c<l.length;c++){var d=l[c].id;if("string"===typeof d&&0===d.indexOf(h.traceLayerPrefix)){r=d;break}}return r};b.updateLayer=function(r){var l=this.subplot,c=k(r),d=this.lookupBelow(),e=this.findFollowingMapboxLayerId(d);
this.removeLayer();n(r)&&l.addLayer({id:this.idLayer,source:this.idSource,"source-layer":r.sourcelayer||"",type:r.type,minzoom:r.minzoom,maxzoom:r.maxzoom,layout:c.layout,paint:c.paint},e);this.layerType=r.type;this.below=d};b.updateStyle=function(r){n(r)&&(r=k(r),this.subplot.setOptions(this.idLayer,"setLayoutProperty",r.layout),this.subplot.setOptions(this.idLayer,"setPaintProperty",r.paint))};b.removeLayer=function(){var r=this.subplot.map;r.getLayer(this.idLayer)&&r.removeLayer(this.idLayer)};
b.dispose=function(){var r=this.subplot.map;r.getLayer(this.idLayer)&&r.removeLayer(this.idLayer);r.getSource(this.idSource)&&r.removeSource(this.idSource)};N.exports=function(r,l,c){r=new p(r,l);r.update(c);return r}},{"../../lib":803,"../../lib/svg_text_utils":829,"./constants":909,"./convert_text_opts":910}],913:[function(b,N,G){G=b("../../lib");var p=b("../../components/color").defaultLine,n=b("../domain").attributes,k=b("../font_attributes"),m=b("../../traces/scatter/attributes").textposition,
a=b("../../plot_api/edit_types").overrideAll,g=b("../../plot_api/plot_template").templatedArray;b=b("./constants");k=k({});k.family.dflt="Open Sans Regular, Arial Unicode MS Regular";(N.exports=a({_arrayAttrRegexps:[G.counterRegex("mapbox",".layers",!0)],domain:n({name:"mapbox"}),accesstoken:{valType:"string",noBlank:!0,strict:!0},style:{valType:"any",values:b.styleValuesMapbox.concat(b.styleValuesNonMapbox),dflt:b.styleValueDflt},center:{lon:{valType:"number",dflt:0},lat:{valType:"number",dflt:0}},
zoom:{valType:"number",dflt:1},bearing:{valType:"number",dflt:0},pitch:{valType:"number",dflt:0},layers:g("layer",{visible:{valType:"boolean",dflt:!0},sourcetype:{valType:"enumerated",values:["geojson","vector","raster","image"],dflt:"geojson"},source:{valType:"any"},sourcelayer:{valType:"string",dflt:""},sourceattribution:{valType:"string"},type:{valType:"enumerated",values:["circle","line","fill","symbol","raster"],dflt:"circle"},coordinates:{valType:"any"},below:{valType:"string"},color:{valType:"color",
dflt:p},opacity:{valType:"number",min:0,max:1,dflt:1},minzoom:{valType:"number",min:0,max:24,dflt:0},maxzoom:{valType:"number",min:0,max:24,dflt:24},circle:{radius:{valType:"number",dflt:15}},line:{width:{valType:"number",dflt:2},dash:{valType:"data_array"}},fill:{outlinecolor:{valType:"color",dflt:p}},symbol:{icon:{valType:"string",dflt:"marker"},iconsize:{valType:"number",dflt:10},text:{valType:"string",dflt:""},placement:{valType:"enumerated",values:["point","line","line-center"],dflt:"point"},
textfont:k,textposition:G.extendFlat({},m,{arrayOk:!1})}})},"plot","from-root")).uirevision={valType:"any",editType:"none"}},{"../../components/color":666,"../../lib":803,"../../plot_api/edit_types":836,"../../plot_api/plot_template":843,"../../traces/scatter/attributes":1218,"../domain":882,"../font_attributes":883,"./constants":909}],914:[function(b,N,G){function p(h,r,l,c){l("accesstoken",c.accessToken);l("style");l("center.lon");l("center.lat");l("zoom");l("bearing");l("pitch");a(h,r,{name:"layers",
handleItemDefaults:n});r._input=h}function n(h,r){function l(f,q){return k.coerce(h,r,g.layers,f,q)}if(l("visible")){var c=l("sourcetype"),d="raster"===c||"image"===c;l("source");l("sourceattribution");"vector"===c&&l("sourcelayer");"image"===c&&l("coordinates");var e;d&&(e="raster");c=l("type",e);d&&"raster"!==c&&(c=r.type="raster",k.log("Source types *raster* and *image* must drawn *raster* layer type."));l("below");l("color");l("opacity");l("minzoom");l("maxzoom");"circle"===c&&l("circle.radius");
"line"===c&&(l("line.width"),l("line.dash"));"fill"===c&&l("fill.outlinecolor");"symbol"===c&&(l("symbol.icon"),l("symbol.iconsize"),l("symbol.text"),k.coerceFont(l,"symbol.textfont"),l("symbol.textposition"),l("symbol.placement"))}}var k=b("../../lib"),m=b("../subplot_defaults"),a=b("../array_container_defaults"),g=b("./layout_attributes");N.exports=function(h,r,l){m(h,r,l,{type:"mapbox",attributes:g,handleDefaults:p,partition:"y",accessToken:r._mapboxAccessToken})}},{"../../lib":803,"../array_container_defaults":849,
"../subplot_defaults":925,"./layout_attributes":913}],915:[function(b,N,G){function p(D,C){this.id=C;this.gd=D;C=D._fullLayout;D=D._context;this.container=C._glcontainer.node();this.isStatic=D.staticPlot;this.uid=C._uid+"-"+this.id;this.yaxis=this.xaxis=this.div=null;this.createFramework(C);this.styleObj=this.accessToken=this.map=null;this.traceHash={};this.layerList=[];this.belowLookup={};this.wheeling=this.dragging=!1}function n(D){var C={};a.isPlainObject(D)?(C.id=D.id,C.style=D):"string"===typeof D?
(C.id=D,-1!==z.styleValuesMapbox.indexOf(D)?C.style=z.styleUrlPrefix+D+"-"+z.styleUrlSuffix:C.style=z.stylesNonMapbox[D]?z.stylesNonMapbox[D]:D):(C.id=z.styleValueDflt,C.style=z.styleUrlPrefix+z.styleValueDflt+"-"+z.styleUrlSuffix);C.transition={duration:0,delay:0};return C}function k(D){return[D.lon,D.lat]}var m=b("mapbox-gl/dist/mapbox-gl-unminified"),a=b("../../lib"),g=b("../../lib/geo_location_utils"),h=b("../../registry"),r=b("../cartesian/axes"),l=b("../../components/dragelement"),c=b("../../components/fx");
G=b("../../components/dragelement/helpers");var d=G.rectMode,e=G.drawMode,f=G.selectMode,q=b("../cartesian/select").prepSelect,t=b("../cartesian/select").clearSelect,w=b("../cartesian/select").clearSelectionsCache,x=b("../cartesian/select").selectOnClick,z=b("./constants"),B=b("./layers");b=p.prototype;b.plot=function(D,C,v){var y=this,F=C[y.id];y.map&&F.accesstoken!==y.accessToken&&(y.map.remove(),y.map=null,y.styleObj=null,y.traceHash={},y.layerList=[]);F=y.map?new Promise(function(J,K){y.updateMap(D,
C,J,K)}):new Promise(function(J,K){y.createMap(D,C,J,K)});v.push(F)};b.createMap=function(D,C,v,y){var F=this,J=C[F.id],K=F.styleObj=n(J.style);F.accessToken=J.accesstoken;var M=F.map=(new m.Map({container:F.div,style:K.style,center:k(J.center),zoom:J.zoom,bearing:J.bearing,pitch:J.pitch,interactive:!F.isStatic,preserveDrawingBuffer:F.isStatic,doubleClickZoom:!1,boxZoom:!1,attributionControl:!1})).addControl(new m.AttributionControl({compact:!0}));M._canvas.style.left="0px";M._canvas.style.top="0px";
F.rejectOnError(y);F.isStatic||F.initFx(D,C);J=[];J.push(new Promise(function(H){M.once("load",H)}));J=J.concat(g.fetchTraceGeoData(D));Promise.all(J).then(function(){F.fillBelowLookup(D,C);F.updateData(D);F.updateLayout(C);F.resolveOnRender(v)}).catch(y)};b.updateMap=function(D,C,v,y){var F=this,J=F.map,K=C[this.id];F.rejectOnError(y);var M=[];K=n(K.style);JSON.stringify(F.styleObj)!==JSON.stringify(K)&&(F.styleObj=K,J.setStyle(K.style),F.traceHash={},M.push(new Promise(function(H){J.once("styledata",
H)})));M=M.concat(g.fetchTraceGeoData(D));Promise.all(M).then(function(){F.fillBelowLookup(D,C);F.updateData(D);F.updateLayout(C);F.resolveOnRender(v)}).catch(y)};b.fillBelowLookup=function(D,C){var v=C[this.id].layers,y,F=this.belowLookup={},J=!1;for(C=0;C<D.length;C++){var K=D[C][0].trace,M=K._module;"string"===typeof K.below?y=K.below:M.getBelow&&(y=M.getBelow(K,this));""===y&&(J=!0);F["trace-"+K.uid]=y||""}for(C=0;C<v.length;C++)y=v[C],y="string"===typeof y.below?y.below:J?"traces":"",F["layout-"+
C]=y;D={};for(var H in F)y=F[H],D[y]?D[y].push(H):D[y]=[H];for(y in D)if(F=D[y],1<F.length)for(C=0;C<F.length;C++)H=F[C],0===H.indexOf("trace-")?(H=H.split("trace-")[1],this.traceHash[H]&&(this.traceHash[H].below=null)):0===H.indexOf("layout-")&&(H=H.split("layout-")[1],this.layerList[H]&&(this.layerList[H].below=null))};var A={choroplethmapbox:0,densitymapbox:1,scattermapbox:2};b.updateData=function(D){var C=this.traceHash,v,y=D.slice().sort(function(H,O){return A[H[0].trace.type]-A[O[0].trace.type]});
for(v=0;v<y.length;v++){var F=y[v];var J=F[0].trace;var K=C[J.uid];var M=!1;K&&(K.type===J.type?(K.update(F),M=!0):K.dispose());!M&&J._module&&(C[J.uid]=J._module.plot(this,F))}y=Object.keys(C);v=0;a:for(;v<y.length;v++){F=y[v];for(K=0;K<D.length;K++)if(J=D[K][0].trace,F===J.uid)continue a;K=C[F];K.dispose();delete C[F]}};b.updateLayout=function(D){var C=this.map,v=D[this.id];this.dragging||this.wheeling||(C.setCenter(k(v.center)),C.setZoom(v.zoom),C.setBearing(v.bearing),C.setPitch(v.pitch));this.updateLayers(D);
this.updateFramework(D);this.updateFx(D);this.map.resize();this.gd._context._scrollZoom.mapbox?C.scrollZoom.enable():C.scrollZoom.disable()};b.resolveOnRender=function(D){var C=this.map;C.on("render",function y(){C.loaded()&&(C.off("render",y),setTimeout(D,10))})};b.rejectOnError=function(D){function C(){D(Error(z.mapOnErrorMsg))}var v=this.map;v.once("error",C);v.once("style.error",C);v.once("source.error",C);v.once("tile.error",C);v.once("layer.error",C)};b.createFramework=function(D){var C=this,
v=C.div=document.createElement("div");v.id=C.uid;v.style.position="absolute";C.container.appendChild(v);C.xaxis={_id:"x",c2p:function(y){return C.project(y).x}};C.yaxis={_id:"y",c2p:function(y){return C.project(y).y}};C.updateFramework(D);C.mockAxis={type:"linear",showexponent:"all",exponentformat:"B"};r.setConvert(C.mockAxis,D)};b.initFx=function(D,C){function v(){c.loneUnhover(C._hoverlayer)}function y(){var M=F.getView();J.emit("plotly_relayouting",F.getViewEditsWithDerived(M))}var F=this,J=F.gd,
K=F.map;K.on("moveend",function(M){if(F.map){var H=J._fullLayout;if(M.originalEvent||F.wheeling){var O=H[F.id];h.call("_storeDirectGUIEdit",J.layout,H._preGUI,F.getViewEdits(O));var I=F.getView();O._input.center=O.center=I.center;O._input.zoom=O.zoom=I.zoom;O._input.bearing=O.bearing=I.bearing;O._input.pitch=O.pitch=I.pitch;J.emit("plotly_relayout",F.getViewEditsWithDerived(I))}M.originalEvent&&"mouseup"===M.originalEvent.type?F.dragging=!1:F.wheeling&&(F.wheeling=!1);H._rehover&&H._rehover()}});
K.on("wheel",function(){F.wheeling=!0});K.on("mousemove",function(M){var H=F.div.getBoundingClientRect(),O=[M.originalEvent.offsetX,M.originalEvent.offsetY];M.target.getBoundingClientRect=function(){return H};F.xaxis.p2c=function(){return K.unproject(O).lng};F.yaxis.p2c=function(){return K.unproject(O).lat};J._fullLayout._rehover=function(){J._fullLayout._hoversubplot===F.id&&J._fullLayout[F.id]&&c.hover(J,M,F.id)};c.hover(J,M,F.id);J._fullLayout._hoversubplot=F.id});K.on("dragstart",function(){F.dragging=
!0;v()});K.on("zoomstart",v);K.on("mouseout",function(){J._fullLayout._hoversubplot=null});K.on("drag",y);K.on("zoom",y);K.on("dblclick",function(){var M=J._fullLayout[F.id];h.call("_storeDirectGUIEdit",J.layout,J._fullLayout._preGUI,F.getViewEdits(M));var H=F.viewInitial;K.setCenter(k(H.center));K.setZoom(H.zoom);K.setBearing(H.bearing);K.setPitch(H.pitch);H=F.getView();M._input.center=M.center=H.center;M._input.zoom=M.zoom=H.zoom;M._input.bearing=M.bearing=H.bearing;M._input.pitch=M.pitch=H.pitch;
J.emit("plotly_doubleclick",null);J.emit("plotly_relayout",F.getViewEditsWithDerived(H))});F.clearSelect=function(){w(F.dragOptions);t(F.dragOptions.gd)};F.onClickInPanFn=function(M){return function(H){var O=J._fullLayout.clickmode;-1<O.indexOf("select")&&x(H.originalEvent,J,[F.xaxis],[F.yaxis],F.id,M);-1<O.indexOf("event")&&c.click(J,H.originalEvent)}}};b.updateFx=function(D){function C(M){M=v.map.unproject(M);return[M.lng,M.lat]}var v=this,y=v.map,F=v.gd;if(!v.isStatic){var J=D.dragmode;var K=d(J)?
function(M,H){(M.range={})[v.id]=[C([H.xmin,H.ymin]),C([H.xmax,H.ymax])]}:function(M,H,O){(M.lassoPoints={})[v.id]=O.filtered.map(C)};v.dragOptions=a.extendDeep(v.dragOptions||{},{dragmode:D.dragmode,element:v.div,gd:F,plotinfo:{id:v.id,domain:D[v.id].domain,xaxis:v.xaxis,yaxis:v.yaxis,fillRangeItems:K},xaxes:[v.xaxis],yaxes:[v.yaxis],subplot:v.id});y.off("click",v.onClickInPanHandler);f(J)||e(J)?(y.dragPan.disable(),y.on("zoomstart",v.clearSelect),v.dragOptions.prepFn=function(M,H,O){q(M,H,O,v.dragOptions,
J)},l.init(v.dragOptions)):(y.dragPan.enable(),y.off("zoomstart",v.clearSelect),v.div.onmousedown=null,v.onClickInPanHandler=v.onClickInPanFn(v.dragOptions),y.on("click",v.onClickInPanHandler))}};b.updateFramework=function(D){var C=D[this.id].domain;D=D._size;var v=this.div.style;v.width=D.w*(C.x[1]-C.x[0])+"px";v.height=D.h*(C.y[1]-C.y[0])+"px";v.left=D.l+C.x[0]*D.w+"px";v.top=D.t+(1-C.y[1])*D.h+"px";this.xaxis._offset=D.l+C.x[0]*D.w;this.xaxis._length=D.w*(C.x[1]-C.x[0]);this.yaxis._offset=D.t+
(1-C.y[1])*D.h;this.yaxis._length=D.h*(C.y[1]-C.y[0])};b.updateLayers=function(D){D=D[this.id].layers;var C=this.layerList,v;if(D.length!==C.length){for(v=0;v<C.length;v++)C[v].dispose();C=this.layerList=[];for(v=0;v<D.length;v++)C.push(B(this,v,D[v]))}else for(v=0;v<D.length;v++)C[v].update(D[v])};b.destroy=function(){this.map&&(this.map.remove(),this.map=null,this.container.removeChild(this.div))};b.toImage=function(){this.map.stop();return this.map.getCanvas().toDataURL()};b.setOptions=function(D,
C,v){for(var y in v)this.map[C](D,y,v[y])};b.getMapLayers=function(){return this.map.getStyle().layers};b.addLayer=function(D,C){var v=this.map;if("string"===typeof C){if(""===C){v.addLayer(D,C);return}for(var y=this.getMapLayers(),F=0;F<y.length;F++)if(C===y[F].id){v.addLayer(D,C);return}a.warn(["Trying to add layer with *below* value",C,"referencing a layer that does not exist or that does not yet exist."].join(" "))}v.addLayer(D)};b.project=function(D){return this.map.project(new m.LngLat(D[0],
D[1]))};b.getView=function(){var D=this.map,C=D.getCenter();C={lon:C.lng,lat:C.lat};var v=D.getCanvas(),y=v.width;v=v.height;return{center:C,zoom:D.getZoom(),bearing:D.getBearing(),pitch:D.getPitch(),_derived:{coordinates:[D.unproject([0,0]).toArray(),D.unproject([y,0]).toArray(),D.unproject([y,v]).toArray(),D.unproject([0,v]).toArray()]}}};b.getViewEdits=function(D){for(var C=this.id,v=["center","zoom","bearing","pitch"],y={},F=0;F<v.length;F++){var J=v[F];y[C+"."+J]=D[J]}return y};b.getViewEditsWithDerived=
function(D){var C=this.id,v=this.getViewEdits(D);v[C+"._derived"]=D._derived;return v};N.exports=p},{"../../components/dragelement":685,"../../components/dragelement/helpers":684,"../../components/fx":706,"../../lib":803,"../../lib/geo_location_utils":796,"../../registry":931,"../cartesian/axes":854,"../cartesian/select":874,"./constants":909,"./layers":912,"mapbox-gl/dist/mapbox-gl-unminified":461}],916:[function(b,N,G){N.exports=function(p){p=p.editType;return{t:{valType:"number",dflt:0,editType:p},
r:{valType:"number",dflt:0,editType:p},b:{valType:"number",dflt:0,editType:p},l:{valType:"number",dflt:0,editType:p},editType:p}}},{}],917:[function(b,N,G){function p(S,T){T.text("");T=T.append("a").attr({"xlink:xlink:href":"#","class":"link--impt link--embedview","font-weight":"bold"}).text(S._context.linkText+" "+String.fromCharCode(187));if(S._context.sendData)T.on("click",function(){I.sendDataToCloud(S)});else{var fa=window.location.pathname.split("/"),W=window.location.search;T.attr({"xlink:xlink:show":"new",
"xlink:xlink:href":"/"+fa[2].split(".")[0]+"/"+fa[1]+W})}}function n(S,T){function fa(la,ka){wa[ka]=la;pa[la]=1}function W(la,ka){if(la&&"string"===typeof la&&!pa[la])return fa(la,ka),!0}var aa=T.length,ja=[],ma;for(ma=0;ma<S.length;ma++){var ia=S[ma]._fullInput;ia!==ra&&ja.push(ia);var ra=ia}S=ja.length;var wa=Array(aa),pa={};for(ma=0;ma<aa;ma++)ra=T[ma].uid,"number"===typeof ra&&(ra=String(ra)),W(ra,ma)||ma<S&&W(ja[ma].uid,ma)||fa(D.randstr(pa),ma);return wa}function k(S,T){function fa(wa){for(var pa=
!0,la=0;la<T.length;la++){var ka=T[la];ja[ka]||(wa[ka]?ja[ka]=wa[ka]:pa=!1)}pa&&(aa=!0)}var W=S._context.locale;W||(W="en-US");for(var aa=!1,ja={},ma=0;2>ma;ma++){for(var ia=S._context.locales,ra=0;2>ra;ra++){if(ia=(ia[W]||{}).format)if(fa(ia),aa)break;ia=z.localeRegistry}ra=W.split("-")[0];if(aa||ra===W)break;W=ra}aa||fa(z.localeRegistry.en.format);return ja}function m(S,T){S.decimal=T.charAt(0);S.thousands=T.charAt(1);return{numberFormat:function(fa){try{fa=w(S).format(D.adjustFormat(fa))}catch(W){return D.warnBadFormat(fa),
D.noFormat}return fa},timeFormat:t(S).utcFormat}}function a(S){S=S.transforms;if(Array.isArray(S)&&S.length)for(var T=0;T<S.length;T++){var fa=S[T];if((fa=fa._module||L[fa.type])&&fa.makesData)return!0}return!1}function g(S,T,fa,W){for(var aa=S.transforms,ja=[S],ma=0;ma<aa.length;ma++){var ia=aa[ma],ra=L[ia.type];ra&&ra.transform&&(ja=ra.transform(ja,{transform:ia,fullTrace:S,fullData:T,layout:fa,fullLayout:W,transformIndex:ma}))}return ja}function h(S){return"string"===typeof S&&"px"===S.substr(S.length-
2)&&parseFloat(S)}function r(S){var T=S.margin;S._size||(T=S._size={l:Math.round(T.l),r:Math.round(T.r),t:Math.round(T.t),b:Math.round(T.b),p:Math.round(T.pad)},T.w=Math.round(S.width)-T.l-T.r,T.h=Math.round(S.height)-T.t-T.b);S._pushmargin||(S._pushmargin={});S._pushmarginIds||(S._pushmarginIds={})}function l(S){var T=y.list(S,"",!0);["_adjustTickLabelsOverflow","_hideCounterAxisInsideTickLabels"].forEach(function(fa){for(var W=0;W<T.length;W++){var aa=T[W][fa];aa&&aa()}})}function c(S,T,fa){function W(ia){if(ia)for(;ia.length;)ia.shift()}
function aa(ia){if(S._transitionData)return W(S._transitionData._interruptCallbacks),Promise.resolve().then(function(){if(fa.redraw)return z.call("redraw",S)}).then(function(){S._transitioning=!1;S._transitioningWithDuration=!1;S.emit("plotly_transitioned",[])}).then(ia)}var ja=!1,ma=D.syncOrAsync([I.previousPromises,function(){if(S._transitionData){S._transitioning=!1;var ia=S._transitionData._interruptCallbacks,ra=Promise.resolve();if(ia)for(;ia.length;)ra=ra.then(ia.shift());return ra}},fa.prepareFn,
I.rehover,function(){S.emit("plotly_transitioning",[]);return new Promise(function(ia){function ra(){wa++;return function(){pa++;ja||pa!==wa||aa(ia)}}S._transitioning=!0;0<T.duration&&(S._transitioningWithDuration=!0);S._transitionData._interruptCallbacks.push(function(){ja=!0});fa.redraw&&S._transitionData._interruptCallbacks.push(function(){return z.call("redraw",S)});S._transitionData._interruptCallbacks.push(function(){S.emit("plotly_transitioninterrupted",[])});var wa=0,pa=0;fa.runFn(ra);setTimeout(ra())})}],
S);ma&&ma.then||(ma=Promise.resolve());return ma.then(function(){return S})}function d(S,T){function fa(pb,Ab,tb){var vb=Ab._id.charAt(0);if("histogram2dcontour"===pb){pb=Ab._counterAxes[0];Ab=y.getFromId(T,pb);var qb="x"===vb||"x"===pb&&"category"===Ab.type,zb="y"===vb||"y"===pb&&"category"===Ab.type;return function(La,Ka){return 0===La||0===Ka||qb&&La===tb[Ka].length-1||zb&&Ka===tb.length-1?-1:("y"===vb?Ka:La)-1}}return function(La,Ka){return"y"===vb?Ka:La}}var W=[],aa,ja,ma,ia,ra={min:function(pb){return D.aggNums(Math.min,
null,pb)},max:function(pb){return D.aggNums(Math.max,null,pb)},sum:function(pb){return D.aggNums(function(Ab,tb){return Ab+tb},null,pb)},total:function(pb){return D.aggNums(function(Ab,tb){return Ab+tb},null,pb)},mean:function(pb){return D.mean(pb)},median:function(pb){return D.median(pb)}};for(aa=0;aa<S.length;aa++){var wa=S[aa];if("category"===wa.type&&(ja=wa.categoryorder.match(V))){var pa=ja[1],la=ja[2],ka=wa._id.charAt(0),na="x"===ka,oa=[];for(ja=0;ja<wa._categories.length;ja++)oa.push([wa._categories[ja],
[]]);for(ja=0;ja<wa._traceIndices.length;ja++){var sa=wa._traceIndices[ja];var za=T._fullData[sa];if(!0===za.visible){var Ha=za.type;z.traceIs(za,"histogram")&&(delete za._xautoBinFinished,delete za._yautoBinFinished);var Wa="splom"===Ha;Ha="scattergl"===Ha;var Za=T.calcdata[sa];for(sa=0;sa<Za.length;sa++){var bb=Za[sa];if(Wa){var sb=za._axesDim[wa._id];na||(ma=za._diag[sb][0])&&(wa=T._fullLayout[y.id2name(ma)]);var hb=bb.trace.dimensions[sb].values;for(ma=0;ma<hb.length;ma++){var ub=wa._categoriesMap[hb[ma]];
for(ia=0;ia<bb.trace.dimensions.length;ia++)ia!==sb&&oa[ub][1].push(bb.trace.dimensions[ia].values[ma])}}else if(Ha){for(ma=0;ma<bb.t.x.length;ma++)na?(ub=bb.t.x[ma],sb=bb.t.y[ma]):(ub=bb.t.y[ma],sb=bb.t.x[ma]),oa[ub][1].push(sb);bb.t&&bb.t._scene&&delete bb.t._scene.dirty}else if(bb.hasOwnProperty("z"))for(sb=bb.z,bb=fa(za.type,wa,sb),ma=0;ma<sb.length;ma++)for(ia=0;ia<sb[ma].length;ia++)ub=bb(ia,ma),ub+1&&oa[ub][1].push(sb[ma][ia]);else for(ub=bb.p,void 0===ub&&(ub=bb[ka]),sb=bb.s,void 0===sb&&
(sb=bb.v),void 0===sb&&(sb=na?bb.y:bb.x),Array.isArray(sb)||(sb=void 0===sb?[]:[sb]),ma=0;ma<sb.length;ma++)oa[ub][1].push(sb[ma])}}}wa._categoriesValue=oa;ka=[];for(ja=0;ja<oa.length;ja++)ka.push([oa[ja][0],ra[pa](oa[ja][1])]);ka.sort(function(pb,Ab){return pb[1]-Ab[1]});wa._categoriesAggregatedValue=ka;wa._initialCategories=ka.map(function(pb){return pb[0]});"descending"===la&&wa._initialCategories.reverse();W=W.concat(wa.sortByInitialCategories())}}return W}function e(S,T,fa){function W(ia){ia.clearCalc();
"multicategory"===ia.type&&ia.setupMultiCategory(T);aa[ia._id]=1}var aa={};D.simpleMap(S,W);S=fa._axisMatchGroups||[];for(var ja=0;ja<S.length;ja++)for(var ma in S[ja])aa[ma]||W(fa[y.id2name(ma)])}function f(S){var T=S._fullLayout,fa=T._visibleModules,W={},aa,ja;for(aa=0;aa<fa.length;aa++){var ma=fa[aa],ia=ma.crossTraceCalc;ia&&(ma=ma.basePlotModule.name,W[ma]?D.pushUnique(W[ma],ia):W[ma]=[ia])}for(ja in W)if(ia=W[ja],ma=T._subplots[ja],Array.isArray(ma))for(fa=0;fa<ma.length;fa++){var ra=ma[fa],
wa="cartesian"===ja?T._plots[ra]:T[ra];for(aa=0;aa<ia.length;aa++)ia[aa](S,wa,ra)}else for(aa=0;aa<ia.length;aa++)ia[aa](S)}var q=b("@plotly/d3"),t=b("d3-time-format").timeFormatLocale,w=b("d3-format").formatLocale,x=b("fast-isnumeric"),z=b("../registry"),B=b("../plot_api/plot_schema"),A=b("../plot_api/plot_template"),D=b("../lib"),C=b("../components/color"),v=b("../constants/numerical").BADNUM,y=b("./cartesian/axis_ids"),F=b("./cartesian/handle_outline").clearSelect,J=b("./animation_attributes"),
K=b("./frame_attributes"),M=b("../plots/get_data").getModuleCalcData,H=D.relinkPrivateKeys,O=D._,I=N.exports={};D.extendFlat(I,z);I.attributes=b("./attributes");I.attributes.type.values=I.allTypes;I.fontAttrs=b("./font_attributes");I.layoutAttributes=b("./layout_attributes");I.fontWeight="normal";var L=I.transformsRegistry;b=b("./command");I.executeAPICommand=b.executeAPICommand;I.computeAPICommandBindings=b.computeAPICommandBindings;I.manageCommandObserver=b.manageCommandObserver;I.hasSimpleAPICommandBindings=
b.hasSimpleAPICommandBindings;I.redrawText=function(S){S=D.getGraphDiv(S);return new Promise(function(T){setTimeout(function(){S._fullLayout&&(z.getComponentMethod("annotations","draw")(S),z.getComponentMethod("legend","draw")(S),z.getComponentMethod("colorbar","draw")(S),T(I.previousPromises(S)))},300)})};I.resize=function(S){S=D.getGraphDiv(S);var T,fa=new Promise(function(W,aa){S&&!D.isHidden(S)||aa(Error("Resize must be passed a displayed plot div element."));S._redrawTimer&&clearTimeout(S._redrawTimer);
S._resolveResize&&(T=S._resolveResize);S._resolveResize=W;S._redrawTimer=setTimeout(function(){if(!S.layout||S.layout.width&&S.layout.height||D.isHidden(S))W(S);else{delete S.layout.width;delete S.layout.height;var ja=S.changed;S.autoplay=!0;z.call("relayout",S,{autosize:!0}).then(function(){S.changed=ja;S._resolveResize===W&&(delete S._resolveResize,W(S))})}},100)});T&&T(fa);return fa};I.previousPromises=function(S){if((S._promises||[]).length)return Promise.all(S._promises).then(function(){S._promises=
[]})};I.addLinks=function(S){if(S._context.showLink||S._context.showSources){var T=S._fullLayout,fa=D.ensureSingle(T._paper,"text","js-plot-link-container",function(ja){ja.style({"font-family":'"Open Sans", Arial, sans-serif',"font-size":"12px",fill:C.defaultLine,"pointer-events":"all"}).each(function(){var ma=q.select(this);ma.append("tspan").classed("js-link-to-tool",!0);ma.append("tspan").classed("js-link-spacer",!0);ma.append("tspan").classed("js-sourcelinks",!0)})}),W=fa.node(),aa={y:T._paper.attr("height")-
9};document.body.contains(W)&&W.getComputedTextLength()>=T.width-20?(aa["text-anchor"]="start",aa.x=5):(aa["text-anchor"]="end",aa.x=T._paper.attr("width")-7);fa.attr(aa);T=fa.select(".js-link-to-tool");W=fa.select(".js-link-spacer");fa=fa.select(".js-sourcelinks");S._context.showSources&&S._context.showSources(S);S._context.showLink&&p(S,T);W.text(T.text()&&fa.text()?" - ":"")}};I.sendDataToCloud=function(S){var T=(window.PLOTLYENV||{}).BASE_URL||S._context.plotlyServerURL;if(T){S.emit("plotly_beforeexport");
var fa=q.select(S).append("div").attr("id","hiddenform").style("display","none");T=fa.append("form").attr({action:T+"/external",method:"post",target:"_blank"});T.append("input").attr({type:"text",name:"data"}).node().value=I.graphJson(S,!1,"keepdata");T.node().submit();fa.remove();S.emit("plotly_afterexport");return!1}};var Q="days shortDays months shortMonths periods dateTime date time decimal thousands grouping currency".split(" "),Z=["year","month","dayMonth","dayMonthYear"];I.supplyDefaults=function(S,
T){T=T&&T.skipUpdateCalc;var fa=S._fullLayout||{};if(fa._skipDefaults)delete fa._skipDefaults;else{var W=S._fullLayout={},aa=S.layout||{},ja=S._fullData||[],ma=S._fullData=[],ia=S.data||[],ra=S.calcdata||[],wa=S._context||{};S._transitionData||I.createTransitionData(S);W._dfltTitle={plot:O(S,"Click to enter Plot title"),x:O(S,"Click to enter X axis title"),y:O(S,"Click to enter Y axis title"),colorbar:O(S,"Click to enter Colorscale title"),annotation:O(S,"new text")};W._traceWord=O(S,"trace");var pa=
k(S,Q);W._mapboxAccessToken=wa.mapboxAccessToken;if(fa._initialAutoSizeIsDone){var la=fa.width,ka=fa.height;I.supplyLayoutGlobalDefaults(aa,W,pa);aa.width||(W.width=la);aa.height||(W.height=ka);I.sanitizeMargins(W)}else I.supplyLayoutGlobalDefaults(aa,W,pa),la=!aa.width||!aa.height,ka=W.autosize,wa=wa.autosizable,la&&(ka||wa)?I.plotAutoSize(S,aa,W):la&&I.sanitizeMargins(W),!ka&&la&&(aa.width=W.width,aa.height=W.height);W._d3locale=m(pa,W.separators);W._extraFormat=k(S,Z);W._initialAutoSizeIsDone=
!0;W._dataLength=ia.length;W._modules=[];W._visibleModules=[];W._basePlotModules=[];pa=z.collectableSubplotTypes;la={};var na;if(!pa)for(na in pa=[],wa=z.subplotsRegistry,wa){var oa=wa[na].attr;if(oa&&(pa.push(na),Array.isArray(oa)))for(ka=0;ka<oa.length;ka++)D.pushUnique(pa,oa[ka])}for(na=0;na<pa.length;na++)la[pa[na]]=[];la=W._subplots=la;pa=W._splomAxes={x:{},y:{}};ka=W._splomSubplots={};W._splomGridDflt={};W._scatterStackOpts={};W._firstScatter={};W._alignmentOpts={};W._colorAxes={};W._requestRangeslider=
{};W._traceUids=n(ja,ia);W._globalTransforms=(S._context||{}).globalTransforms;I.supplyDataDefaults(ia,ma,aa,W);na=Object.keys(pa.x);pa=Object.keys(pa.y);if(1<na.length&&1<pa.length){z.getComponentMethod("grid","sizeDefaults")(aa,W);for(ia=0;ia<na.length;ia++)D.pushUnique(la.xaxis,na[ia]);for(ia=0;ia<pa.length;ia++)D.pushUnique(la.yaxis,pa[ia]);for(var sa in ka)D.pushUnique(la.cartesian,sa)}W._has=I._hasPlotType.bind(W);if(ja.length===ma.length)for(ia=0;ia<ma.length;ia++)H(ma[ia],ja[ia]);I.supplyLayoutModuleDefaults(aa,
W,ma,S._transitionData);sa=W._visibleModules;aa=[];for(ia=0;ia<sa.length;ia++)(la=sa[ia].crossTraceDefaults)&&D.pushUnique(aa,la);for(ia=0;ia<aa.length;ia++)aa[ia](ma,W);W._hasOnlyLargeSploms=1===W._basePlotModules.length&&"splom"===W._basePlotModules[0].name&&15<na.length&&15<pa.length&&0===W.shapes.length&&0===W.images.length;I.linkSubplots(ma,W,ja,fa);I.cleanPlot(ma,W,ja,fa);aa=!(!fa._has||!fa._has("gl2d"));ja=!(!W._has||!W._has("gl2d"));ia=!(!fa._has||!fa._has("cartesian"));sa=!(!W._has||!W._has("cartesian"));
aa=ia||aa;ja=sa||ja;aa&&!ja?fa._bgLayer.remove():ja&&!aa&&(W._shouldCreateBgLayer=!0);fa._zoomlayer&&!S._dragging&&F({_fullLayout:fa});S=[];if(W.meta)var za=W._meta={meta:W.meta,layout:{meta:W.meta}};for(ja=0;ja<ma.length;ja++)sa=ma[ja],sa.meta?S[sa.index]=sa._meta={meta:sa.meta}:W.meta&&(sa._meta={meta:W.meta}),W.meta&&(sa._meta.layout={meta:W.meta});S.length&&(za||(za=W._meta={}),za.data=S);H(W,fa);z.getComponentMethod("colorscale","crossTraceDefaults")(ma,W);W._preGUI||(W._preGUI={});W._tracePreGUI||
(W._tracePreGUI={});za=W._tracePreGUI;fa={};for(var Ha in za)fa[Ha]="old";for(ia=0;ia<ma.length;ia++)Ha=ma[ia]._fullInput.uid,fa[Ha]||(za[Ha]={}),fa[Ha]="new";for(Ha in fa)"old"===fa[Ha]&&delete za[Ha];r(W);z.getComponentMethod("rangeslider","makeData")(W);T||ra.length!==ma.length||I.supplyDefaultsUpdateCalc(ra,ma)}};I.supplyDefaultsUpdateCalc=function(S,T){for(var fa=0;fa<T.length;fa++){var W=T[fa],aa=(S[fa]||[])[0];if(aa&&aa.trace){var ja=aa.trace;if(ja._hasCalcTransform){var ma=ja._arrayAttrs,
ia;for(ia=0;ia<ma.length;ia++){var ra=ma[ia];var wa=D.nestedProperty(ja,ra).get().slice();D.nestedProperty(W,ra).set(wa)}}aa.trace=W}}};I.createTransitionData=function(S){S._transitionData||(S._transitionData={});S._transitionData._frames||(S._transitionData._frames=[]);S._transitionData._frameHash||(S._transitionData._frameHash={});S._transitionData._counter||(S._transitionData._counter=0);S._transitionData._interruptCallbacks||(S._transitionData._interruptCallbacks=[])};I._hasPlotType=function(S){var T,
fa=this._basePlotModules||[];for(T=0;T<fa.length;T++)if(fa[T].name===S)return!0;fa=this._modules||[];for(T=0;T<fa.length;T++){var W=fa[T].name;if(W===S||(W=z.modules[W])&&W.categories[S])return!0}return!1};I.cleanPlot=function(S,T,fa,W){var aa,ja=W._basePlotModules||[];for(aa=0;aa<ja.length;aa++){var ma=ja[aa];ma.clean&&ma.clean(S,T,fa,W)}aa=W._has&&W._has("gl");T=T._has&&T._has("gl");aa&&!T&&void 0!==W._glcontainer&&(W._glcontainer.selectAll(".gl-canvas").remove(),W._glcontainer.selectAll(".no-webgl").remove(),
W._glcanvas=null);ja=!!W._infolayer;aa=0;a:for(;aa<fa.length;aa++){ma=fa[aa].uid;for(T=0;T<S.length;T++)if(ma===S[T].uid)continue a;ja&&W._infolayer.select(".cb"+ma).remove()}};I.linkSubplots=function(S,T,fa,W){var aa=W._plots||{},ja=T._plots={};W=T._subplots;fa={_fullData:S,_fullLayout:T};var ma=W.cartesian.concat(W.gl2d||[]);for(W=0;W<ma.length;W++){var ia=ma[W];var ra=aa[ia],wa=y.getFromId(fa,ia,"x"),pa=y.getFromId(fa,ia,"y");ra?ra=ja[ia]=ra:(ra=ja[ia]={},ra.id=ia);wa._counterAxes.push(pa._id);
pa._counterAxes.push(wa._id);wa._subplotsWith.push(ia);pa._subplotsWith.push(ia);ra.xaxis=wa;ra.yaxis=pa;ra._hasClipOnAxisFalse=!1;for(ia=0;ia<S.length;ia++)if(wa=S[ia],wa.xaxis===ra.xaxis._id&&wa.yaxis===ra.yaxis._id&&!1===wa.cliponaxis){ra._hasClipOnAxisFalse=!0;break}}S=y.list(fa,null,!0);for(W=0;W<S.length;W++)aa=S[W],ia=null,aa.overlaying&&(ia=y.getFromId(fa,aa.overlaying))&&ia.overlaying&&(aa.overlaying=!1,ia=null),aa._mainAxis=ia||aa,ia&&(aa.domain=ia.domain.slice()),aa._anchorAxis="free"===
aa.anchor?null:y.getFromId(fa,aa.anchor);for(W=0;W<S.length;W++){aa=S[W];aa._counterAxes.sort(y.idSort);aa._subplotsWith.sort(D.subplotSort);ja=ia=aa;var la=T;ma={_fullLayout:la};ra="x"===ja._id.charAt(0);var ka=ja._mainAxis._anchorAxis,na=pa=wa="";ka&&(na=ka._mainAxis._id,wa=ra?ja._id+na:na+ja._id);if(!wa||!la._plots[wa])for(wa="",la=ja._counterAxes,ka=0;ka<la.length;ka++){var oa=la[ka],sa=ra?ja._id+oa:oa+ja._id;pa||(pa=sa);oa=y.getFromId(ma,oa);if(na&&oa.overlaying===na){wa=sa;break}}ia._mainSubplot=
wa||pa;if(aa._counterAxes.length&&(aa.spikemode&&-1!==aa.spikemode.indexOf("across")||aa.automargin&&aa.mirror&&"free"!==aa.anchor||z.getComponentMethod("rangeslider","isVisible")(aa))){ja=1;for(ia=ma=0;ia<aa._counterAxes.length;ia++)ra=y.getFromId(fa,aa._counterAxes[ia]),ja=Math.min(ja,ra.domain[0]),ma=Math.max(ma,ra.domain[1]);ja<ma&&(aa._counterDomainMin=ja,aa._counterDomainMax=ma)}}};I.clearExpandedTraceDefaultColors=function(S){function T(ja,ma,ia,ra){W[ra]=ma;W.length=ra+1;"color"===ja.valType&&
void 0===ja.dflt&&aa.push(W.join("."))}var fa;var W=[];var aa=S._module._colorAttrs;aa||(S._module._colorAttrs=aa=[],B.crawl(S._module.attributes,T));for(fa=0;fa<aa.length;fa++)D.nestedProperty(S,"_input."+aa[fa]).get()||D.nestedProperty(S,aa[fa]).set(null)};I.supplyDataDefaults=function(S,T,fa,W){function aa(sb){T.push(sb);var hb=sb._module;hb&&(D.pushUnique(ja,hb),!0===sb.visible&&D.pushUnique(ma,hb),D.pushUnique(ia,sb._module.basePlotModule),ra++,!1!==sb._input.visible&&wa++)}var ja=W._modules,
ma=W._visibleModules,ia=W._basePlotModules,ra=0,wa=0,pa;W._transformModules=[];var la={},ka=[],na=A.traceTemplater((fa.template||{}).data||{});for(pa=0;pa<S.length;pa++){var oa=S[pa];var sa=na.newTrace(oa);sa.uid=W._traceUids[pa];I.supplyTraceDefaults(oa,sa,wa,W,pa);sa.index=pa;sa._input=oa;sa._expandedIndex=ra;if(sa.transforms&&sa.transforms.length)for(var za=!1!==oa.visible&&!1===sa.visible,Ha=g(sa,T,fa,W),Wa=0;Wa<Ha.length;Wa++){var Za=Ha[Wa],bb={_template:sa._template,type:sa.type,uid:sa.uid+
Wa};za&&!1===Za.visible&&delete Za.visible;I.supplyTraceDefaults(Za,bb,ra,W,pa);H(bb,Za);bb.index=pa;bb._input=oa;bb._fullInput=sa;bb._expandedIndex=ra;bb._expandedInput=Za;aa(bb)}else sa._fullInput=sa,sa._expandedInput=sa,aa(sa);z.traceIs(sa,"carpetAxis")&&(la[sa.carpet]=sa);z.traceIs(sa,"carpetDependent")&&ka.push(pa)}for(pa=0;pa<ka.length;pa++)sa=T[ka[pa]],sa.visible&&(S=la[sa.carpet],(sa._carpet=S)&&S.visible?(sa.xaxis=S.xaxis,sa.yaxis=S.yaxis):sa.visible=!1)};I.supplyAnimationDefaults=function(S){S=
S||{};var T,fa={};D.coerce(S||{},fa,J,"mode",void 0);D.coerce(S||{},fa,J,"direction",void 0);D.coerce(S||{},fa,J,"fromcurrent",void 0);if(Array.isArray(S.frame))for(fa.frame=[],T=0;T<S.frame.length;T++)fa.frame[T]=I.supplyAnimationFrameDefaults(S.frame[T]||{});else fa.frame=I.supplyAnimationFrameDefaults(S.frame||{});if(Array.isArray(S.transition))for(fa.transition=[],T=0;T<S.transition.length;T++)fa.transition[T]=I.supplyAnimationTransitionDefaults(S.transition[T]||{});else fa.transition=I.supplyAnimationTransitionDefaults(S.transition||
{});return fa};I.supplyAnimationFrameDefaults=function(S){var T={};D.coerce(S||{},T,J.frame,"duration",void 0);D.coerce(S||{},T,J.frame,"redraw",void 0);return T};I.supplyAnimationTransitionDefaults=function(S){var T={};D.coerce(S||{},T,J.transition,"duration",void 0);D.coerce(S||{},T,J.transition,"easing",void 0);return T};I.supplyFrameDefaults=function(S){function T(W,aa){return D.coerce(S,fa,K,W,aa)}var fa={};T("group");T("name");T("traces");T("baseframe");T("data");T("layout");return fa};I.supplyTraceDefaults=
function(S,T,fa,W,aa){function ja(sa,za){return D.coerce(S,T,I.attributes,sa,za)}var ma=W.colorway||C.defaults;fa=ma[fa%ma.length];ma=ja("visible");ja("type");ja("name",W._traceWord+" "+aa);ja("uirevision",W.uirevision);var ia=I.getModule(T);if(T._module=ia){var ra=ia.basePlotModule,wa=ra.attr,pa=ra.attributes;if(wa&&pa){var la=W._subplots,ka="";if(ma||"gl2d"!==ra.name){if(Array.isArray(wa))for(aa=0;aa<wa.length;aa++){var na=wa[aa],oa=D.coerce(S,T,pa,na);la[na]&&D.pushUnique(la[na],oa);ka+=oa}else ka=
D.coerce(S,T,pa,wa);la[ra.name]&&D.pushUnique(la[ra.name],ka)}}}ma&&(ja("customdata"),ja("ids"),ja("meta"),z.traceIs(T,"showLegend")?(D.coerce(S,T,ia.attributes.showlegend?ia.attributes:I.attributes,"showlegend"),ja("legendgroup"),ja("legendgrouptitle.text")&&D.coerceFont(ja,"legendgrouptitle.font",D.extendFlat({},W.font,{size:Math.round(1.1*W.font.size)})),ja("legendrank"),T._dfltShowLegend=!0):T._dfltShowLegend=!1,ia&&ia.supplyDefaults(S,T,fa,W),z.traceIs(T,"noOpacity")||ja("opacity"),z.traceIs(T,
"notLegendIsolatable")&&(T.visible=!!T.visible),z.traceIs(T,"noHover")||(T.hovertemplate||D.coerceHoverinfo(S,T,W),"parcats"!==T.type&&z.getComponentMethod("fx","supplyDefaults")(S,T,fa,W)),ia&&ia.selectPoints&&ja("selectedpoints"),I.supplyTransformDefaults(S,T,W));return T};I.hasMakesDataTransform=a;I.supplyTransformDefaults=function(S,T,fa){if(T._length||a(S)){var W=fa._globalTransforms||[],aa=fa._transformModules||[];if(Array.isArray(S.transforms)||0!==W.length){W=W.concat(S.transforms||[]);for(var ja=
T.transforms=[],ma=0;ma<W.length;ma++){var ia=W[ma],ra=ia.type,wa=L[ra],pa=!(ia._module&&ia._module===wa),la=wa&&"function"===typeof wa.transform;wa||D.warn("Unrecognized transform type "+ra+".");wa&&wa.supplyDefaults&&(pa||la)?(ia=wa.supplyDefaults(ia,T,fa,S),ia.type=ra,ia._module=wa,D.pushUnique(aa,wa)):ia=D.extendFlat({},ia);ja.push(ia)}}}};I.supplyLayoutGlobalDefaults=function(S,T,fa){function W(ja,ma){return D.coerce(S,T,I.layoutAttributes,ja,ma)}var aa=S.template;D.isPlainObject(aa)&&(T.template=
aa,T._template=aa.layout,T._dataTemplate=aa.data);W("autotypenumbers");aa=D.coerceFont(W,"font");W("title.text",T._dfltTitle.plot);D.coerceFont(W,"title.font",{family:aa.family,size:Math.round(1.4*aa.size),color:aa.color});W("title.xref");W("title.yref");W("title.x");W("title.y");W("title.xanchor");W("title.yanchor");W("title.pad.t");W("title.pad.r");W("title.pad.b");W("title.pad.l");W("uniformtext.mode")&&W("uniformtext.minsize");W("autosize",!(S.width&&S.height));W("width");W("height");W("margin.l");
W("margin.r");W("margin.t");W("margin.b");W("margin.pad");W("margin.autoexpand");S.width&&S.height&&I.sanitizeMargins(T);z.getComponentMethod("grid","sizeDefaults")(S,T);W("paper_bgcolor");W("separators",fa.decimal+fa.thousands);W("hidesources");W("colorway");W("datarevision");fa=W("uirevision");W("editrevision",fa);W("selectionrevision",fa);z.getComponentMethod("modebar","supplyLayoutDefaults")(S,T);z.getComponentMethod("shapes","supplyDrawNewShapeDefaults")(S,T,W);W("meta");D.isPlainObject(S.transition)&&
(W("transition.duration"),W("transition.easing"),W("transition.ordering"));z.getComponentMethod("calendars","handleDefaults")(S,T,"calendar");z.getComponentMethod("fx","supplyLayoutGlobalDefaults")(S,T,W)};I.plotAutoSize=function(S,T,fa){var W=S._context||{},aa=W.frameMargins,ja;(ja=D.isPlotDiv(S))&&S.emit("plotly_autosize");W.fillFrame?(W=window.innerWidth,ja=window.innerHeight,document.body.style.overflow="hidden"):(ja=ja?window.getComputedStyle(S):{},W=h(ja.width)||h(ja.maxWidth)||fa.width,ja=
h(ja.height)||h(ja.maxHeight)||fa.height,x(aa)&&0<aa&&(aa=1-2*aa,W=Math.round(aa*W),ja=Math.round(aa*ja)));aa=I.layoutAttributes.width.min;var ma=I.layoutAttributes.height.min;W<aa&&(W=aa);ja<ma&&(ja=ma);aa=!T.width&&1<Math.abs(fa.width-W);if((T=!T.height&&1<Math.abs(fa.height-ja))||aa)aa&&(fa.width=W),T&&(fa.height=ja);S._initialAutoSize||(S._initialAutoSize={width:W,height:ja});I.sanitizeMargins(fa)};I.supplyLayoutModuleDefaults=function(S,T,fa,W){var aa=z.componentsRegistry,ja=T._basePlotModules,
ma;var ia=z.subplotsRegistry.cartesian;for(ma in aa){var ra=aa[ma];ra.includeBasePlot&&ra.includeBasePlot(S,T)}ja.length||ja.push(ia);T._has("cartesian")&&(z.getComponentMethod("grid","contentDefaults")(S,T),ia.finalizeSubplots(S,T));for(var wa in T._subplots)T._subplots[wa].sort(D.subplotSort);for(ia=0;ia<ja.length;ia++)ra=ja[ia],ra.supplyLayoutDefaults&&ra.supplyLayoutDefaults(S,T,fa);ja=T._modules;for(ia=0;ia<ja.length;ia++)ra=ja[ia],ra.supplyLayoutDefaults&&ra.supplyLayoutDefaults(S,T,fa);ja=
T._transformModules;for(ia=0;ia<ja.length;ia++)ra=ja[ia],ra.supplyLayoutDefaults&&ra.supplyLayoutDefaults(S,T,fa,W);for(ma in aa)ra=aa[ma],ra.supplyLayoutDefaults&&ra.supplyLayoutDefaults(S,T,fa)};I.purge=function(S){var T=S._fullLayout||{};void 0!==T._glcontainer&&(T._glcontainer.selectAll(".gl-canvas").remove(),T._glcontainer.remove(),T._glcanvas=null);T._modeBar&&T._modeBar.destroy();S._transitionData&&(S._transitionData._interruptCallbacks&&(S._transitionData._interruptCallbacks.length=0),S._transitionData._animationRaf&&
window.cancelAnimationFrame(S._transitionData._animationRaf));D.clearThrottle();D.clearResponsive(S);delete S.data;delete S.layout;delete S._fullData;delete S._fullLayout;delete S.calcdata;delete S.empty;delete S.fid;delete S.undoqueue;delete S.undonum;delete S.autoplay;delete S.changed;delete S._promises;delete S._redrawTimer;delete S._hmlumcount;delete S._hmpixcount;delete S._transitionData;delete S._transitioning;delete S._initialAutoSize;delete S._transitioningWithDuration;delete S._dragging;
delete S._dragged;delete S._dragdata;delete S._hoverdata;delete S._snapshotInProgress;delete S._editing;delete S._mouseDownTime;delete S._legendMouseDownTime;S.removeAllListeners&&S.removeAllListeners()};I.style=function(S){var T=S._fullLayout._visibleModules,fa=[],W;for(W=0;W<T.length;W++){var aa=T[W];aa.style&&D.pushUnique(fa,aa.style)}for(W=0;W<fa.length;W++)fa[W](S)};I.sanitizeMargins=function(S){if(S&&S.margin){var T=S.width,fa=S.height;S=S.margin;var W=fa-(S.t+S.b);0>T-(S.l+S.r)&&(T=(T-1)/(S.l+
S.r),S.l=Math.floor(T*S.l),S.r=Math.floor(T*S.r));0>W&&(T=(fa-1)/(S.t+S.b),S.t=Math.floor(T*S.t),S.b=Math.floor(T*S.b))}};I.clearAutoMarginIds=function(S){S._fullLayout._pushmarginIds={}};I.allowAutoMargin=function(S,T){S._fullLayout._pushmarginIds[T]=1};I.autoMargin=function(S,T,fa){var W=S._fullLayout,aa=W.width,ja=W.height,ma=W.margin,ia=D.constrain(aa-ma.l-ma.r,2,64),ra=D.constrain(ja-ma.t-ma.b,2,64);aa=Math.max(0,aa-ia);var wa=Math.max(0,ja-ra);ja=W._pushmargin;ra=W._pushmarginIds;if(!1!==ma.autoexpand&&
(fa?(ia=fa.pad,void 0===ia&&(ia=Math.min(12,ma.l,ma.r,ma.t,ma.b)),aa&&(ma=(fa.l+fa.r)/aa,1<ma&&(fa.l/=ma,fa.r/=ma)),wa&&(ma=(fa.t+fa.b)/wa,1<ma&&(fa.t/=ma,fa.b/=ma)),ja[T]={l:{val:void 0!==fa.xl?fa.xl:fa.x,size:fa.l+ia},r:{val:void 0!==fa.xr?fa.xr:fa.x,size:fa.r+ia},b:{val:void 0!==fa.yb?fa.yb:fa.y,size:fa.b+ia},t:{val:void 0!==fa.yt?fa.yt:fa.y,size:fa.t+ia}},ra[T]=1):(delete ja[T],delete ra[T]),!W._replotting))return I.doAutoMargin(S)};I.doAutoMargin=function(S){var T=S._fullLayout,fa=T.width,W=
T.height;T._size||(T._size={});r(T);var aa=T._size,ja=T.margin,ma=D.extendFlat({},aa),ia=ja.l,ra=ja.r,wa=ja.t,pa=ja.b,la=T._pushmargin,ka=T._pushmarginIds;if(!1!==T.margin.autoexpand){for(var na in la)ka[na]||delete la[na];la.base={l:{val:0,size:ia},r:{val:1,size:ra},t:{val:1,size:wa},b:{val:0,size:pa}};for(var oa in la){var sa=la[oa].l||{},za=la[oa].b||{};na=sa.val;sa=sa.size;var Ha=za.val;za=za.size;for(var Wa in la){if(x(sa)&&la[Wa].r){var Za=la[Wa].r.val,bb=la[Wa].r.size;if(Za>na){var sb=(sa*
Za+(bb-fa)*na)/(Za-na);Za=(bb*(1-na)+(sa-fa)*(1-Za))/(Za-na);sb+Za>ia+ra&&(ia=sb,ra=Za)}}x(za)&&la[Wa].t&&(Za=la[Wa].t.val,bb=la[Wa].t.size,Za>Ha&&(sb=(za*Za+(bb-W)*Ha)/(Za-Ha),Za=(bb*(1-Ha)+(za-W)*(1-Za))/(Za-Ha),sb+Za>pa+wa&&(pa=sb,wa=Za)))}}}oa=D.constrain(fa-ja.l-ja.r,2,64);la=D.constrain(W-ja.t-ja.b,2,64);oa=Math.max(0,fa-oa);la=Math.max(0,W-la);oa&&(oa=(ia+ra)/oa,1<oa&&(ia/=oa,ra/=oa));la&&(la=(pa+wa)/la,1<la&&(pa/=la,wa/=la));aa.l=Math.round(ia);aa.r=Math.round(ra);aa.t=Math.round(wa);aa.b=
Math.round(pa);aa.p=Math.round(ja.pad);aa.w=Math.round(fa)-aa.l-aa.r;aa.h=Math.round(W)-aa.t-aa.b;if(!T._replotting&&I.didMarginChange(ma,aa)){"_redrawFromAutoMarginCount"in T?T._redrawFromAutoMarginCount++:T._redrawFromAutoMarginCount=1;fa=3*(1+Object.keys(ka).length);if(T._redrawFromAutoMarginCount<fa)return z.call("_doPlot",S);T._size=ma;D.warn("Too many auto-margin redraws.")}l(S)};var ba="lrtbpwh".split("");I.didMarginChange=function(S,T){for(var fa=0;fa<ba.length;fa++){var W=ba[fa],aa=S[W];
W=T[W];if(!x(aa)||1<Math.abs(W-aa))return!0}return!1};I.graphJson=function(S,T,fa,W,aa,ja){function ma(pa,la){if("function"===typeof pa)return la?"_function_":null;if(D.isPlainObject(pa)){var ka={},na;Object.keys(pa).sort().forEach(function(oa){if(-1===["_","["].indexOf(oa.charAt(0)))if("function"===typeof pa[oa])la&&(ka[oa]="_function");else{if("keepdata"===fa){if("src"===oa.substr(oa.length-3))return}else if("keepstream"===fa){if(na=pa[oa+"src"],"string"===typeof na&&0<na.indexOf(":")&&!D.isPlainObject(pa.stream))return}else if("keepall"!==
fa&&(na=pa[oa+"src"],"string"===typeof na&&0<na.indexOf(":")))return;ka[oa]=ma(pa[oa],la)}});return ka}return Array.isArray(pa)?pa.map(function(oa){return ma(oa,la)}):D.isTypedArray(pa)?D.simpleMap(pa,D.identity):D.isJSDate(pa)?D.ms2DateTimeLocal(+pa):pa}(aa&&T&&!S._fullData||aa&&!T&&!S._fullLayout)&&I.supplyDefaults(S);var ia=aa?S._fullLayout:S.layout,ra=(S._transitionData||{})._frames,wa={data:((aa?S._fullData:S.data)||[]).map(function(pa){pa=ma(pa);T&&delete pa.fit;return pa})};T||(wa.layout=ma(ia),
aa&&(aa=ia._size,wa.layout.computed={margin:{b:aa.b,l:aa.l,r:aa.r,t:aa.t}}));ra&&(wa.frames=ma(ra));ja&&(wa.config=ma(S._context,!0));return"object"===W?wa:JSON.stringify(wa)};I.modifyFrames=function(S,T){var fa=S._transitionData._frames,W=S._transitionData._frameHash;for(S=0;S<T.length;S++){var aa=T[S];switch(aa.type){case "replace":var ja=aa.value;var ma=(fa[aa.index]||{}).name,ia=ja.name;fa[aa.index]=W[ia]=ja;ia!==ma&&(delete W[ma],W[ia]=ja);break;case "insert":ja=aa.value;W[ja.name]=ja;fa.splice(aa.index,
0,ja);break;case "delete":ja=fa[aa.index],delete W[ja.name],fa.splice(aa.index,1)}}return Promise.resolve()};I.computeFrame=function(S,T){var fa=S._transitionData._frameHash,W;if(!T)throw Error("computeFrame must be given a string frame name");T=fa[T.toString()];if(!T)return!1;S=[T];for(W=[T.name];T.baseframe&&(T=fa[T.baseframe.toString()])&&-1===W.indexOf(T.name);)S.push(T),W.push(T.name);for(var aa={};T=S.pop();)if(T.layout&&(aa.layout=I.extendLayout(aa.layout,T.layout)),T.data){aa.data||(aa.data=
[]);W=T.traces;if(!W)for(W=[],fa=0;fa<T.data.length;fa++)W[fa]=fa;aa.traces||(aa.traces=[]);for(fa=0;fa<T.data.length;fa++){var ja=W[fa];if(void 0!==ja&&null!==ja){var ma=aa.traces.indexOf(ja);-1===ma&&(ma=aa.data.length,aa.traces[ma]=ja);aa.data[ma]=I.extendTrace(aa.data[ma],T.data[fa])}}}return aa};I.recomputeFrameHash=function(S){var T=S._transitionData._frameHash={};S=S._transitionData._frames;for(var fa=0;fa<S.length;fa++){var W=S[fa];W&&W.name&&(T[W.name]=W)}};I.extendObjectWithContainers=function(S,
T,fa){T=D.extendDeepNoArrays({},T||{});var W=D.expandObjectPaths(T);var aa={};if(fa&&fa.length)for(T=0;T<fa.length;T++){var ja=D.nestedProperty(W,fa[T]);var ma=ja.get();void 0===ma?D.nestedProperty(aa,fa[T]).set(null):(ja.set(null),D.nestedProperty(aa,fa[T]).set(ma))}S=D.extendDeepNoArrays(S||{},W);if(fa&&fa.length)for(T=0;T<fa.length;T++)if(ja=D.nestedProperty(aa,fa[T]),W=ja.get()){ma=D.nestedProperty(S,fa[T]);var ia=ma.get();Array.isArray(ia)||(ia=[],ma.set(ia));for(ja=0;ja<W.length;ja++){var ra=
W[ja];ia[ja]=null===ra?null:I.extendObjectWithContainers(ia[ja],ra)}ma.set(ia)}return S};I.dataArrayContainers=["transforms","dimensions"];I.layoutArrayContainers=z.layoutArrayContainers;I.extendTrace=function(S,T){return I.extendObjectWithContainers(S,T,I.dataArrayContainers)};I.extendLayout=function(S,T){return I.extendObjectWithContainers(S,T,I.layoutArrayContainers)};I.transition=function(S,T,fa,W,aa,ja){aa={redraw:aa.redraw};var ma={},ia=[];aa.prepareFn=function(){var ra=Array.isArray(T)?T.length:
0;ra=W.slice(0,ra);for(var wa=0;wa<ra.length;wa++){var pa=ra[wa],la=S._fullData[pa]._module;la&&(la.animatable&&(la=la.basePlotModule.name,ma[la]||(ma[la]=[]),ma[la].push(pa)),S.data[ra[wa]]=I.extendTrace(S.data[ra[wa]],T[wa]))}ra=D.expandObjectPaths(D.extendDeepNoArrays({},fa));wa=/^[xy]axis[0-9]*$/;for(var ka in ra)wa.test(ka)&&delete ra[ka].range;I.extendLayout(S.layout,ra);delete S.calcdata;I.supplyDefaults(S);I.doCalcdata(S);if(ka=D.expandObjectPaths(fa)){ra=S._fullLayout._plots;for(var na in ra){wa=
ra[na];pa=wa.xaxis;la=wa.yaxis;var oa=pa.range.slice(),sa=la.range.slice(),za=null,Ha=null,Wa=null,Za=null;Array.isArray(ka[pa._name+".range"])?za=ka[pa._name+".range"].slice():Array.isArray((ka[pa._name]||{}).range)&&(za=ka[pa._name].range.slice());Array.isArray(ka[la._name+".range"])?Ha=ka[la._name+".range"].slice():Array.isArray((ka[la._name]||{}).range)&&(Ha=ka[la._name].range.slice());oa&&za&&(pa.r2l(oa[0])!==pa.r2l(za[0])||pa.r2l(oa[1])!==pa.r2l(za[1]))&&(Wa={xr0:oa,xr1:za});sa&&Ha&&(la.r2l(sa[0])!==
la.r2l(Ha[0])||la.r2l(sa[1])!==la.r2l(Ha[1]))&&(Za={yr0:sa,yr1:Ha});(Wa||Za)&&ia.push(D.extendFlat({plotinfo:wa},Wa,Za))}}return Promise.resolve()};aa.runFn=function(ra){var wa=S._fullLayout._basePlotModules;var pa=ia.length,la;if(fa)for(la=0;la<wa.length;la++)wa[la].transitionAxes&&wa[la].transitionAxes(S,ia,ja,ra);pa?(wa=D.extendFlat({},ja),wa.duration=0,delete ma.cartesian):wa=ja;for(var ka in ma)pa=ma[ka],S._fullData[pa[0]]._module.basePlotModule.plot(S,pa,wa,ra)};return c(S,ja,aa)};I.transitionFromReact=
function(S,T,fa,W){var aa=S._fullLayout,ja=aa.transition,ma={},ia=[];ma.prepareFn=function(){var ra=aa._plots;ma.redraw=!1;"some"===T.anim&&(ma.redraw=!0);"some"===fa.anim&&(ma.redraw=!0);for(var wa in ra){var pa=ra[wa],la=pa.xaxis,ka=pa.yaxis,na=W[la._name].range.slice(),oa=W[ka._name].range.slice(),sa=la.range.slice(),za=ka.range.slice();la.setScale();ka.setScale();var Ha=null,Wa=null;if(la.r2l(na[0])!==la.r2l(sa[0])||la.r2l(na[1])!==la.r2l(sa[1]))Ha={xr0:na,xr1:sa};if(ka.r2l(oa[0])!==ka.r2l(za[0])||
ka.r2l(oa[1])!==ka.r2l(za[1]))Wa={yr0:oa,yr1:za};(Ha||Wa)&&ia.push(D.extendFlat({plotinfo:pa},Ha,Wa))}return Promise.resolve()};ma.runFn=function(ra){function wa(){if(S._fullLayout)for(var Wa=0;Wa<ka.length;Wa++)ka[Wa].transitionAxes&&ka[Wa].transitionAxes(S,ia,na,ra)}function pa(){if(S._fullLayout)for(var Wa=0;Wa<ka.length;Wa++)ka[Wa].plot(S,sa,oa,ra)}for(var la=S._fullData,ka=S._fullLayout._basePlotModules,na,oa,sa,za=[],Ha=0;Ha<la.length;Ha++)za.push(Ha);ia.length&&T.anim?"traces first"===ja.ordering?
(na=D.extendFlat({},ja,{duration:0}),sa=za,oa=ja,setTimeout(wa,ja.duration),pa()):(na=ja,sa=null,oa=D.extendFlat({},ja,{duration:0}),setTimeout(pa,na.duration),wa()):ia.length?(na=ja,wa()):T.anim&&(sa=za,oa=ja,pa())};return c(S,ja,ma)};I.doCalcdata=function(S,T){function fa(sa){ka=ja[sa];ia=ka._module;if(!0===ka.visible&&ka.transforms)for(ia&&ia.calc&&(sa=ia.calc(S,ka),sa[0]&&sa[0].t&&sa[0].t._scene&&delete sa[0].t._scene.dirty),wa=0;wa<ka.transforms.length;wa++)sa=ka.transforms[wa],(ia=L[sa.type])&&
ia.calcTransform&&(oa=ka._hasCalcTransform=!0,ia.calcTransform(S,ka,sa))}function W(sa,za){ka=ja[sa];ia=ka._module;if(!!ia.isContainer===za){za=[];if(!0===ka.visible&&0!==ka._length){delete ka._indexToPoints;var Ha=ka.transforms||[];for(wa=Ha.length-1;0<=wa;wa--)if(Ha[wa].enabled){ka._indexToPoints=Ha[wa]._indexToPoints;break}ia&&ia.calc&&(za=ia.calc(S,ka))}Array.isArray(za)&&za[0]||(za=[{x:v,y:v}]);za[0].t||(za[0].t={});za[0].trace=ka;pa[sa]=za}}var aa=y.list(S),ja=S._fullData,ma=S._fullLayout,ia,
ra,wa,pa=Array(ja.length),la=(S.calcdata||[]).slice();S.calcdata=pa;ma._numBoxes=0;ma._numViolins=0;ma._violinScaleGroupStats={};S._hmpixcount=0;S._hmlumcount=0;ma._piecolormap={};ma._sunburstcolormap={};ma._treemapcolormap={};ma._iciclecolormap={};ma._funnelareacolormap={};for(ra=0;ra<ja.length;ra++)Array.isArray(T)&&-1===T.indexOf(ra)&&(pa[ra]=la[ra]);for(ra=0;ra<ja.length;ra++){var ka=ja[ra];ka._arrayAttrs=B.findArrayAttributes(ka);ka._extremes={}}T=ma._subplots.polar||[];for(ra=0;ra<T.length;ra++)aa.push(ma[T[ra]].radialaxis,
ma[T[ra]].angularaxis);for(var na in ma._colorAxes)ra=ma[na],!1!==ra.cauto&&(delete ra.cmin,delete ra.cmax);var oa=!1;e(aa,ja,ma);for(ra=0;ra<ja.length;ra++)W(ra,!0);for(ra=0;ra<ja.length;ra++)fa(ra);oa&&e(aa,ja,ma);for(ra=0;ra<ja.length;ra++)W(ra,!0);for(ra=0;ra<ja.length;ra++)W(ra,!1);f(S);aa=d(aa,S);if(aa.length){ma._numBoxes=0;for(ra=ma._numViolins=0;ra<aa.length;ra++)W(aa[ra],!0);for(ra=0;ra<aa.length;ra++)W(aa[ra],!1);f(S)}z.getComponentMethod("fx","calc")(S);z.getComponentMethod("errorbars",
"calc")(S)};var V=/(total|sum|min|max|mean|median) (ascending|descending)/;I.rehover=function(S){S._fullLayout._rehover&&S._fullLayout._rehover()};I.redrag=function(S){S._fullLayout._redrag&&S._fullLayout._redrag()};I.generalUpdatePerTraceModule=function(S,T,fa,W){var aa=T.traceHash,ja={},ma;for(ma=0;ma<fa.length;ma++){var ia=fa[ma],ra=ia[0].trace;ra.visible&&(ja[ra.type]=ja[ra.type]||[],ja[ra.type].push(ia))}for(var wa in aa)ja[wa]||(fa=aa[wa][0],fa[0].trace.visible=!1,ja[wa]=[fa]);for(var pa in ja)aa=
ja[pa],aa[0][0].trace._module.plot(S,T,D.filterVisible(aa),W);T.traceHash=ja};I.plotBasePlot=function(S,T,fa,W,aa){S=z.getModule(S);fa=M(T.calcdata,S)[0];S.plot(T,fa,W,aa)};I.cleanBasePlot=function(S,T,fa,W,aa){T=aa._has&&aa._has(S);fa=fa._has&&fa._has(S);T&&!fa&&aa["_"+S+"layer"].selectAll("g.trace").remove()}},{"../components/color":666,"../constants/numerical":779,"../lib":803,"../plot_api/plot_schema":842,"../plot_api/plot_template":843,"../plots/get_data":891,"../registry":931,"./animation_attributes":848,
"./attributes":850,"./cartesian/axis_ids":858,"./cartesian/handle_outline":865,"./command":881,"./font_attributes":883,"./frame_attributes":884,"./layout_attributes":908,"@plotly/d3":58,"d3-format":167,"d3-time-format":175,"fast-isnumeric":249}],918:[function(b,N,G){N.exports={attr:"subplot",name:"polar",axisNames:["angularaxis","radialaxis"],axisName2dataArray:{angularaxis:"theta",radialaxis:"r"},layerNames:"draglayer plotbg backplot angular-grid radial-grid frontplot angular-line radial-line angular-axis radial-axis".split(" "),
radialDragBoxSize:50,angularDragBoxSize:30,cornerLen:25,cornerHalfWidth:2,MINDRAG:8,MINZOOM:20,OFFEDGE:20}},{}],919:[function(b,N,G){function p(e,f,q,t){var w=t[0];t=t[1];var x=m(Math.sin(f)-Math.sin(e));e=m(Math.cos(f)-Math.cos(e));q=Math.tan(q);var z=m(1/q),B=x/e;f=t-B*w;z?x&&e?(x=f/(q-B),w=q*x):e?(x=t*z,w=t):(x=w,w*=q):x&&e?(x=0,w=f):e?(x=0,w=t):x=w=NaN;return[x,w]}function n(e,f,q,t){function w(C,v,y){return p(C,v,y,[e*Math.cos(C),e*Math.sin(C)])}var x=t.length,z=[];var B=r(t,function(C){return l(C,
[f,q])?d(C,f):Infinity});var A=w(t[B],t[g.mod(B-1,x)],f);z.push(A);for(A=0;A<x;B++,A++){var D=t[g.mod(B,x)];if(!l(D,[f,q]))break;z.push([e*Math.cos(D),e*Math.sin(D)])}B=r(t,function(C){return l(C,[f,q])?d(C,q):Infinity});t=w(t[B],t[g.mod(B+1,x)],q);z.push(t);z.push([0,0]);z.push(z[0].slice());return z}function k(e,f,q,t){if(g.isFullCircle([f,q])){f=t.length;q=Array(f+1);var w;for(w=0;w<f;w++){var x=t[w];q[w]=[e*Math.cos(x),e*Math.sin(x)]}q[w]=q[0].slice();e=q}else e=n(e,f,q,t);return e}function m(e){return 1E-10<
Math.abs(e)?e:0}function a(e,f,q){f=f||0;q=q||0;for(var t=e.length,w=Array(t),x=0;x<t;x++){var z=e[x];w[x]=[f+z[0],q-z[1]]}return w}var g=b("../../lib"),h=b("../../lib/polygon").tester,r=g.findIndexOfMin,l=g.isAngleInsideSector,c=g.angleDelta,d=g.angleDist;N.exports={isPtInsidePolygon:function(e,f,q,t,w){if(!l(f,t))return!1;if(q[0]<q[1]){var x=q[0];q=q[1]}else x=q[1],q=q[0];x=h(k(x,t[0],t[1],w));t=h(k(q,t[0],t[1],w));e=[e*Math.cos(f),e*Math.sin(f)];return t.contains(e)&&!x.contains(e)},findPolygonOffset:function(e,
f,q,t){var w=Infinity,x=Infinity;e=k(e,f,q,t);for(f=0;f<e.length;f++)q=e[f],w=Math.min(w,q[0]),x=Math.min(x,-q[1]);return[w,x]},findEnclosingVertexAngles:function(e,f){var q=r(f,function(w){w=c(w,e);return 0<w?w:Infinity}),t=g.mod(q+1,f.length);return[f[q],f[t]]},findIntersectionXY:p,findXYatLength:function(e,f,q,t){var w=-f*q,x=f*f+1,z=2*(f*w-q);q=Math.sqrt(z*z-4*x*(w*w+q*q-e*e));e=(-z+q)/(2*x);x=(-z-q)/(2*x);return[[e,f*e+w+t],[x,f*x+w+t]]},clampTiny:m,pathPolygon:function(e,f,q,t,w,x){e=k(e,f,
q,t);return"M"+a(e,w,x).join("L")},pathPolygonAnnulus:function(e,f,q,t,w,x,z){if(e<f){var B=e;e=f}else B=f;B=a(k(B,q,t,w),x,z);return"M"+a(k(e,q,t,w),x,z).reverse().join("L")+"M"+B.join("L")}}},{"../../lib":803,"../../lib/polygon":815}],920:[function(b,N,G){var p=b("../get_data").getSubplotCalcData,n=b("../../lib").counterRegex,k=b("./polar"),m=b("./constants");G=m.attr;var a=m.name;n=n(a);m={};m[G]={valType:"subplotid",dflt:a,editType:"calc"};N.exports={attr:G,name:a,idRoot:a,idRegex:n,attrRegex:n,
attributes:m,layoutAttributes:b("./layout_attributes"),supplyLayoutDefaults:b("./layout_defaults"),plot:function(g){for(var h=g._fullLayout,r=g.calcdata,l=h._subplots[a],c=0;c<l.length;c++){var d=l[c],e=p(r,a,d),f=h[d]._subplot;f||(f=k(g,d),h[d]._subplot=f);f.plot(e,h,g._promises)}},clean:function(g,h,r,l){g=l._subplots[a]||[];r=l._has&&l._has("gl");var c=h._has&&h._has("gl");r=r&&!c;for(c=0;c<g.length;c++){var d=g[c],e=l[d]._subplot;if(!h[d]&&e){e.framework.remove();e.layers["radial-axis-title"].remove();
for(var f in e.clipPaths)e.clipPaths[f].remove()}r&&e._scene&&(e._scene.destroy(),e._scene=null)}},toSVG:b("../cartesian").toSVG}},{"../../lib":803,"../cartesian":868,"../get_data":891,"./constants":918,"./layout_attributes":921,"./layout_defaults":922,"./polar":923}],921:[function(b,N,G){G=b("../../components/color/attributes");var p=b("../cartesian/layout_attributes"),n=b("../domain").attributes,k=b("../../lib").extendFlat,m=b("../../plot_api/edit_types").overrideAll;b=m({color:p.color,showline:k({},
p.showline,{dflt:!0}),linecolor:p.linecolor,linewidth:p.linewidth,showgrid:k({},p.showgrid,{dflt:!0}),gridcolor:p.gridcolor,gridwidth:p.gridwidth},"plot","from-root");m=m({tickmode:p.tickmode,nticks:p.nticks,tick0:p.tick0,dtick:p.dtick,tickvals:p.tickvals,ticktext:p.ticktext,ticks:p.ticks,ticklen:p.ticklen,tickwidth:p.tickwidth,tickcolor:p.tickcolor,showticklabels:p.showticklabels,showtickprefix:p.showtickprefix,tickprefix:p.tickprefix,showticksuffix:p.showticksuffix,ticksuffix:p.ticksuffix,showexponent:p.showexponent,
exponentformat:p.exponentformat,minexponent:p.minexponent,separatethousands:p.separatethousands,tickfont:p.tickfont,tickangle:p.tickangle,tickformat:p.tickformat,tickformatstops:p.tickformatstops,layer:p.layer},"plot","from-root");var a={visible:k({},p.visible,{dflt:!0}),type:k({},p.type,{values:["-","linear","log","date","category"]}),autotypenumbers:p.autotypenumbers,autorange:k({},p.autorange,{editType:"plot"}),rangemode:{valType:"enumerated",values:["tozero","nonnegative","normal"],dflt:"tozero",
editType:"calc"},range:k({},p.range,{items:[{valType:"any",editType:"plot",impliedEdits:{"^autorange":!1}},{valType:"any",editType:"plot",impliedEdits:{"^autorange":!1}}],editType:"plot"}),categoryorder:p.categoryorder,categoryarray:p.categoryarray,angle:{valType:"angle",editType:"plot"},side:{valType:"enumerated",values:["clockwise","counterclockwise"],dflt:"clockwise",editType:"plot"},title:{text:k({},p.title.text,{editType:"plot",dflt:""}),font:k({},p.title.font,{editType:"plot"}),editType:"plot"},
hoverformat:p.hoverformat,uirevision:{valType:"any",editType:"none"},editType:"calc",_deprecated:{title:p._deprecated.title,titlefont:p._deprecated.titlefont}};k(a,b,m);p={visible:k({},p.visible,{dflt:!0}),type:{valType:"enumerated",values:["-","linear","category"],dflt:"-",editType:"calc",_noTemplating:!0},autotypenumbers:p.autotypenumbers,categoryorder:p.categoryorder,categoryarray:p.categoryarray,thetaunit:{valType:"enumerated",values:["radians","degrees"],dflt:"degrees",editType:"calc"},period:{valType:"number",
editType:"calc",min:0},direction:{valType:"enumerated",values:["counterclockwise","clockwise"],dflt:"counterclockwise",editType:"calc"},rotation:{valType:"angle",editType:"calc"},hoverformat:p.hoverformat,uirevision:{valType:"any",editType:"none"},editType:"calc"};k(p,b,m);N.exports={domain:n({name:"polar",editType:"plot"}),sector:{valType:"info_array",items:[{valType:"number",editType:"plot"},{valType:"number",editType:"plot"}],dflt:[0,360],editType:"plot"},hole:{valType:"number",min:0,max:1,dflt:0,
editType:"plot"},bgcolor:{valType:"color",editType:"plot",dflt:G.background},radialaxis:a,angularaxis:p,gridshape:{valType:"enumerated",values:["circular","linear"],dflt:"circular",editType:"plot"},uirevision:{valType:"any",editType:"none"},editType:"calc"}},{"../../components/color/attributes":665,"../../lib":803,"../../plot_api/edit_types":836,"../cartesian/layout_attributes":869,"../domain":882}],922:[function(b,N,G){function p(z,B,A,D){function C(ba,V){return A(J+"."+ba,V)}var v=A("bgcolor");
D.bgColor=m.combine(v,D.paper_bgcolor);v=A("sector");A("hole");for(var y=h(D.fullData,w.name,D.id),F=D.layoutOut,J,K=0;K<x.length;K++){J=x[K];k.isPlainObject(z[J])||(z[J]={});var M=z[J],H=a.newContainer(B,J);H._id=H._name=J;H._attr=D.id+"."+J;H._traceIndices=y.map(function(ba){return ba._expandedIndex});var O=w.axisName2dataArray[J],I=n(M,H,C,y,O,D);d(M,H,C,{axData:y,dataAttr:O});O=C("visible");t(H,B,F);C("uirevision",B.uirevision);if(O){var L=C("color");var Q=L===M.color?L:D.font.color}H._m=1;switch(J){case "radialaxis":var Z=
C("autorange",!H.isValidRange(M.range));M.autorange=Z;!Z||"linear"!==I&&"-"!==I||C("rangemode");"reversed"===Z&&(H._m=-1);C("range");H.cleanRange("range",{dfltRange:[0,1]});O&&(C("side"),C("angle",v[0]),C("title.text"),k.coerceFont(C,"title.font",{family:D.font.family,size:k.bigFont(D.font.size),color:Q}));break;case "angularaxis":if("date"===I){k.log("Polar plots do not support date angular axes yet.");for(I=0;I<y.length;I++)y[I].visible=!1;I=M.type=H.type="linear"}"linear"===I?C("thetaunit"):C("period");
Z=C("direction");C("rotation",{counterclockwise:0,clockwise:90}[Z])}O&&(r(M,H,C,H.type),c(M,H,C,H.type,{tickSuffixDflt:"degrees"===H.thetaunit?"":void 0}),l(M,H,C,{outerTicks:!0}),C("showticklabels")&&(k.coerceFont(C,"tickfont",{family:D.font.family,size:D.font.size,color:Q}),C("tickangle"),C("tickformat")),e(M,H,C,{dfltColor:L,bgColor:D.bgColor,blend:60,showLine:!0,showGrid:!0,noZeroLine:!0,attributes:q[J]}),C("layer"));"category"!==I&&C("hoverformat");H._input=M}"category"===B.angularaxis.type&&
A("gridshape")}function n(z,B,A,D,C,v){v=A("autotypenumbers",v.autotypenumbersDflt);if("-"===A("type")){for(A=0;A<D.length;A++)if(D[A].visible){var y=D[A];break}y&&y[C]&&(B.type=f(y[C],"gregorian",{noMultiCategory:!0,autotypenumbers:v}));"-"===B.type?B.type="linear":z.type=B.type}return B.type}var k=b("../../lib"),m=b("../../components/color"),a=b("../../plot_api/plot_template"),g=b("../subplot_defaults"),h=b("../get_data").getSubplotData,r=b("../cartesian/tick_value_defaults"),l=b("../cartesian/tick_mark_defaults"),
c=b("../cartesian/tick_label_defaults"),d=b("../cartesian/category_order_defaults"),e=b("../cartesian/line_grid_defaults"),f=b("../cartesian/axis_autotype"),q=b("./layout_attributes"),t=b("./set_convert"),w=b("./constants"),x=w.axisNames;N.exports=function(z,B,A){g(z,B,A,{type:w.name,attributes:q,handleDefaults:p,font:B.font,autotypenumbersDflt:B.autotypenumbers,paper_bgcolor:B.paper_bgcolor,fullData:A,layoutOut:B})}},{"../../components/color":666,"../../lib":803,"../../plot_api/plot_template":843,
"../cartesian/axis_autotype":855,"../cartesian/category_order_defaults":859,"../cartesian/line_grid_defaults":871,"../cartesian/tick_label_defaults":876,"../cartesian/tick_mark_defaults":877,"../cartesian/tick_value_defaults":878,"../get_data":891,"../subplot_defaults":925,"./constants":918,"./layout_attributes":921,"./set_convert":924}],923:[function(b,N,G){function p(ba,V){this.id=V;this.gd=ba;this.radialAxisAngle=this.vangles=this._hasClipOnAxisFalse=null;this.traceHash={};this.layers={};this.clipPaths=
{};this.clipIds={};this.viewInitial={};ba=ba._fullLayout;this.clipIds.forTraces="clip"+ba._uid+V+"-for-traces";this.clipPaths.forTraces=ba._clips.append("clipPath").attr("id",this.clipIds.forTraces);this.clipPaths.forTraces.append("path");this.framework=ba._polarlayer.append("g").attr("class",V);this.angularTickLayout=this.radialTickLayout=null}function n(ba){var V=ba.ticks+String(ba.ticklen)+String(ba.showticklabels);"side"in ba&&(V+=ba.side);return V}function k(ba,V){var S=r.findIndexOfMin(V,function(T){return r.angleDist(ba,
T)});return V[S]}function m(ba,V,S){V?(ba.attr("display",null),ba.attr(S)):ba&&ba.attr("display","none");return ba}var a=b("@plotly/d3"),g=b("tinycolor2"),h=b("../../registry"),r=b("../../lib"),l=r.strRotate,c=r.strTranslate,d=b("../../components/color"),e=b("../../components/drawing"),f=b("../plots"),q=b("../../plots/cartesian/axes"),t=b("../cartesian/set_convert"),w=b("./set_convert"),x=b("../cartesian/autorange").doAutoRange,z=b("../cartesian/dragbox"),B=b("../../components/dragelement"),A=b("../../components/fx"),
D=b("../../components/titles"),C=b("../cartesian/select").prepSelect,v=b("../cartesian/select").selectOnClick,y=b("../cartesian/select").clearSelect,F=b("../../lib/setcursor"),J=b("../../lib/clear_gl_canvases"),K=b("../../plot_api/subroutines").redrawReglTraces,M=b("../../constants/alignment").MID_SHIFT,H=b("./constants"),O=b("./helpers"),I=r._,L=r.mod,Q=r.deg2rad,Z=r.rad2deg;b=p.prototype;N.exports=function(ba,V){return new p(ba,V)};b.plot=function(ba,V){var S=V[this.id];this._hasClipOnAxisFalse=
!1;for(var T=0;T<ba.length;T++)if(!1===ba[T][0].trace.cliponaxis){this._hasClipOnAxisFalse=!0;break}this.updateLayers(V,S);this.updateLayout(V,S);f.generalUpdatePerTraceModule(this.gd,this,ba,S);this.updateFx(V,S)};b.updateLayers=function(ba,V){var S=this.layers;ba=V.radialaxis;V=V.angularaxis;var T=H.layerNames,fa=T.indexOf("frontplot");T=T.slice(0,fa);V="below traces"===V.layer;ba="below traces"===ba.layer;V&&T.push("angular-line");ba&&T.push("radial-line");V&&T.push("angular-axis");ba&&T.push("radial-axis");
T.push("frontplot");V||T.push("angular-line");ba||T.push("radial-line");V||T.push("angular-axis");ba||T.push("radial-axis");ba=this.framework.selectAll(".polarsublayer").data(T,String);ba.enter().append("g").attr("class",function(W){return"polarsublayer "+W}).each(function(W){var aa=S[W]=a.select(this);switch(W){case "frontplot":aa.append("g").classed("barlayer",!0);aa.append("g").classed("scatterlayer",!0);break;case "backplot":aa.append("g").classed("maplayer",!0);break;case "plotbg":S.bg=aa.append("path");
break;case "radial-grid":aa.style("fill","none");break;case "angular-grid":aa.style("fill","none");break;case "radial-line":aa.append("line").style("fill","none");break;case "angular-line":aa.append("path").style("fill","none")}});ba.order()};b.updateLayout=function(ba,V){var S=this.layers,T=ba._size,fa=V.radialaxis,W=V.angularaxis,aa=V.domain.x,ja=V.domain.y;this.xOffset=T.l+T.w*aa[0];this.yOffset=T.t+T.h*(1-ja[1]);var ma=this.xLength=T.w*(aa[1]-aa[0]),ia=this.yLength=T.h*(ja[1]-ja[0]),ra=V.sector;
this.sectorInRad=ra.map(Q);var wa=ra[0];ra=ra[1]-wa;wa=L(wa,360);ra=wa+ra;var pa=Math.cos(Q(wa)),la=Math.sin(Q(wa)),ka=Math.cos(Q(ra)),na=Math.sin(Q(ra));var oa=90>=wa&&90<=ra||90<wa&&450<=ra?1:0>=la&&0>=na?0:Math.max(la,na);var sa=180>=wa&&180<=ra||180<wa&&540<=ra?-1:0<=pa&&0<=ka?0:Math.min(pa,ka);wa=this.sectorBBox=[sa,270>=wa&&270<=ra||270<wa&&630<=ra?-1:0<=la&&0<=na?0:Math.min(la,na),360<=ra?1:0>=pa&&0>=ka?0:Math.max(pa,ka),oa];ra=wa[2]-wa[0];la=Math.abs((wa[3]-wa[1])/ra);ia/ma>la?(pa=ma,la*=
ma,ma=(ia-la)/T.h/2,aa=[aa[0],aa[1]],ja=[ja[0]+ma,ja[1]-ma]):(pa=ia/la,la=ia,ma=(ma-pa)/T.w/2,aa=[aa[0]+ma,aa[1]-ma],ja=[ja[0],ja[1]]);this.xLength2=pa;this.yLength2=la;this.xDomain2=aa;this.yDomain2=ja;ma=this.xOffset2=T.l+T.w*aa[0];ia=this.yOffset2=T.t+T.h*(1-ja[1]);pa=this.radius=pa/ra;la=this.innerRadius=V.hole*pa;ra=this.cx=ma-pa*wa[0];wa=this.cy=ia+pa*wa[3];ka=this.cxx=ra-ma;na=this.cyy=wa-ia;this.radialAxis=this.mockAxis(ba,V,fa,{_id:"x",side:{counterclockwise:"top",clockwise:"bottom"}[fa.side],
_realSide:fa.side,domain:[la/T.w,pa/T.w]});this.angularAxis=this.mockAxis(ba,V,W,{side:"right",domain:[0,Math.PI],autorange:!1});this.doAutoRange(ba,V);this.updateAngularAxis(ba,V);this.updateRadialAxis(ba,V);this.updateRadialAxisTitle(ba,V);this.xaxis=this.mockCartesianAxis(ba,V,{_id:"x",domain:aa});this.yaxis=this.mockCartesianAxis(ba,V,{_id:"y",domain:ja});ba=this.pathSubplot();this.clipPaths.forTraces.select("path").attr("d",ba).attr("transform",c(ka,na));S.frontplot.attr("transform",c(ma,ia)).call(e.setClipUrl,
this._hasClipOnAxisFalse?null:this.clipIds.forTraces,this.gd);S.bg.attr("d",ba).attr("transform",c(ra,wa)).call(d.fill,V.bgcolor)};b.mockAxis=function(ba,V,S,T){S=r.extendFlat({},S,T);w(S,V,ba);return S};b.mockCartesianAxis=function(ba,V,S){var T=this,fa=S._id,W=r.extendFlat({type:"linear"},S);t(W,ba);var aa={x:[0,2],y:[1,3]};W.setRange=function(){var ja=T.sectorBBox,ma=aa[fa],ia=T.radialAxis._rl;ia=(ia[1]-ia[0])/(1-V.hole);W.range=[ja[ma[0]]*ia,ja[ma[1]]*ia]};W.isPtWithinRange="x"===fa?function(ja){return T.isPtInside(ja)}:
function(){return!0};W.setRange();W.setScale();return W};b.doAutoRange=function(ba,V){var S=this.gd;ba=this.radialAxis;V=V.radialaxis;ba.setScale();x(S,ba);S=ba.range;V.range=S.slice();V._input.range=S.slice();ba._rl=[ba.r2l(S[0],null,"gregorian"),ba.r2l(S[1],null,"gregorian")]};b.updateRadialAxis=function(ba,V){var S=this,T=S.gd;ba=S.layers;var fa=S.radius,W=S.innerRadius,aa=S.cx,ja=S.cy,ma=V.radialaxis,ia=L(V.sector[0],360),ra=S.radialAxis;V=W<fa;S.fillViewInitialKey("radialaxis.angle",ma.angle);
S.fillViewInitialKey("radialaxis.range",ra.range.slice());ra.setGeometry();"auto"===ra.tickangle&&90<ia&&270>=ia&&(ra.tickangle=180);ia=function(na){return c(ra.l2p(na.x)+W,0)};var wa=function(na){return S.pathArc(ra.r2p(na.x)+W)},pa=n(ma);S.radialTickLayout!==pa&&(ba["radial-axis"].selectAll(".xtick").remove(),S.radialTickLayout=pa);if(V){ra.setScale();pa=q.calcTicks(ra);var la=q.clipEnds(ra,pa),ka=q.getTickSigns(ra)[2];q.drawTicks(T,ra,{vals:pa,layer:ba["radial-axis"],path:q.makeTickPath(ra,0,ka),
transFn:ia,crisp:!1});q.drawGrid(T,ra,{vals:la,layer:ba["radial-grid"],path:wa,transFn:r.noop,crisp:!1});q.drawLabels(T,ra,{vals:pa,layer:ba["radial-axis"],transFn:ia,labelFns:q.makeLabelFns(ra,0)})}T=S.radialAxisAngle=S.vangles?Z(k(Q(ma.angle),S.vangles)):ma.angle;aa=c(aa,ja);ja=aa+l(-T);m(ba["radial-axis"],V&&(ma.showticklabels||ma.ticks),{transform:ja});m(ba["radial-grid"],V&&ma.showgrid,{transform:aa});m(ba["radial-line"].select("line"),V&&ma.showline,{x1:W,y1:0,x2:fa,y2:0,transform:ja}).attr("stroke-width",
ma.linewidth).call(d.stroke,ma.linecolor)};b.updateRadialAxisTitle=function(ba,V,S){ba=this.gd;var T=this.radius,fa=this.cx,W=this.cy;V=V.radialaxis;var aa=this.id+"title";S=void 0!==S?S:this.radialAxisAngle;var ja=Q(S),ma=Math.cos(ja);ja=Math.sin(ja);var ia=0;if(V.title){ia=e.bBox(this.layers["radial-axis"].node()).height;var ra=V.title.font.size;ia="counterclockwise"===V.side?-ia-.4*ra:ia+.8*ra}this.layers["radial-axis-title"]=D.draw(ba,aa,{propContainer:V,propName:this.id+".radialaxis.title",placeholder:I(ba,
"Click to enter radial axis title"),attributes:{x:fa+T/2*ma+ia*ja,y:W-T/2*ja+ia*ma,"text-anchor":"middle"},transform:{rotate:-S}})};b.updateAngularAxis=function(ba,V){var S=this;ba=S.gd;var T=S.layers,fa=S.radius,W=S.innerRadius,aa=S.cx,ja=S.cy,ma=V.angularaxis,ia=S.angularAxis;S.fillViewInitialKey("angularaxis.rotation",ma.rotation);ia.setGeometry();ia.setScale();var ra=function(za){return ia.t2g(za.x)};"linear"===ia.type&&"radians"===ia.thetaunit&&(ia.tick0=Z(ia.tick0),ia.dtick=Z(ia.dtick));var wa=
function(za){return c(aa+fa*Math.cos(za),ja-fa*Math.sin(za))},pa=function(za){return wa(ra(za))},la=function(za){za=ra(za);return wa(za)+l(-Z(za))},ka=function(za){var Ha=ra(za);za=Math.cos(Ha);Ha=Math.sin(Ha);return"M"+[aa+W*za,ja-W*Ha]+"L"+[aa+fa*za,ja-fa*Ha]},na=q.makeLabelFns(ia,0).labelStandoff,oa={xFn:function(za){za=ra(za);return Math.cos(za)*na},yFn:function(za){var Ha=ra(za);return-Math.sin(Ha)*(na+za.fontSize*(0<Math.sin(Ha)?.2:1))+Math.abs(Math.cos(Ha))*za.fontSize*M},anchorFn:function(za){za=
ra(za);za=Math.cos(za);return.1>Math.abs(za)?"middle":0<za?"start":"end"},heightFn:function(za,Ha,Wa){za=ra(za);return-.5*(1+Math.sin(za))*Wa}},sa=n(ma);S.angularTickLayout!==sa&&(T["angular-axis"].selectAll("."+ia._id+"tick").remove(),S.angularTickLayout=sa);sa=q.calcTicks(ia);"linear"===V.gridshape?(V=sa.map(ra),0>r.angleDelta(V[0],V[1])&&(V=V.slice().reverse())):V=null;S.vangles=V;"category"===ia.type&&(sa=sa.filter(function(za){return r.isAngleInsideSector(ra(za),S.sectorInRad)}));ia.visible&&
(V="inside"===ia.ticks?-1:1,q.drawTicks(ba,ia,{vals:sa,layer:T["angular-axis"],path:"M"+(ia.linewidth||1)/2*V+",0h"+V*ia.ticklen,transFn:la,crisp:!1}),q.drawGrid(ba,ia,{vals:sa,layer:T["angular-grid"],path:ka,transFn:r.noop,crisp:!1}),q.drawLabels(ba,ia,{vals:sa,layer:T["angular-axis"],repositionOnUpdate:!0,transFn:pa,labelFns:oa}));m(T["angular-line"].select("path"),ma.showline,{d:S.pathSubplot(),transform:c(aa,ja)}).attr("stroke-width",ma.linewidth).call(d.stroke,ma.linecolor)};b.updateFx=function(ba,
V){this.gd._context.staticPlot||(this.updateAngularDrag(ba),this.updateRadialDrag(ba,V,0),this.updateRadialDrag(ba,V,1),this.updateMainDrag(ba))};b.updateMainDrag=function(ba){function V(Qb,yc){return Math.sqrt(Qb*Qb+yc*yc)}function S(Qb,yc){return[Qb*Math.cos(yc),Qb*Math.sin(-yc)]}function T(Qb,yc){if(0===Qb)return la.pathSector(2*qb);var Jc=zb/Qb,Ia=yc-Jc;yc+=Jc;Jc=Math.max(0,Math.min(Qb,za));Qb=Jc-qb;Jc+=qb;return"M"+S(Qb,Ia)+"A"+[Qb,Qb]+" 0,0,0 "+S(Qb,yc)+"L"+S(Jc,yc)+"A"+[Jc,Jc]+" 0,0,1 "+S(Jc,
Ia)+"Z"}function fa(Qb,yc,Jc){if(0===Qb)return la.pathSector(2*qb);yc=S(Qb,yc);Jc=S(Qb,Jc);Qb=Ab((yc[0]+Jc[0])/2);Jc=Ab((yc[1]+Jc[1])/2);if(Qb&&Jc){yc=Jc/Qb;var Ia=-1/yc;Qb=tb(qb,yc,Qb,Jc);yc=tb(zb,Ia,Qb[0][0],Qb[0][1]);Qb=tb(zb,Ia,Qb[1][0],Qb[1][1])}else{if(Jc){Ia=zb;var Na=qb}else Ia=qb,Na=zb;yc=[[Qb-Ia,Jc-Na],[Qb+Ia,Jc-Na]];Qb=[[Qb-Ia,Jc+Na],[Qb+Ia,Jc+Na]]}return"M"+yc.join("L")+"L"+Qb.reverse().join("L")+"Z"}function W(Qb,yc){yc=Math.max(Math.min(yc,za),Ha);Qb<sa?Qb=0:za-Qb<sa?Qb=za:yc<sa?yc=
0:za-yc<sa&&(yc=za);if(Math.abs(yc-Qb)>oa)return Qb<yc?($a=Qb,ab=yc):($a=yc,ab=Qb),!0;ab=$a=null;return!1}function aa(Qb,yc){Qb=Qb||Db;yc=yc||"M0,0Z";ob.attr("d",Qb);Cb.attr("d",yc);z.transitionZoombox(ob,Cb,Nb,ec);Nb=!0;Qb={};wa(Qb);ka.emit("plotly_relayouting",Qb)}function ja(Qb,yc){Qb*=La;yc*=Ka;Qb=Ja+Qb;var Jc=Ta+yc;yc=V(Ja-bb,Ta-sb);Qb=Math.min(V(Qb-bb,Jc-sb),za);Jc=Math.atan2(sb-Ta,Ja-bb);if(W(yc,Qb)){var Ia=Db+la.pathSector(ab);$a&&(Ia+=la.pathSector($a));var Na=T($a,Jc)+T(ab,Jc)}aa(Ia,Na)}
function ma(Qb,yc,Jc,Ia){Qb=O.findIntersectionXY(Jc,Ia,Jc,[Qb-bb,sb-yc]);return V(Qb[0],Qb[1])}function ia(Qb,yc){Qb=Ja+Qb;var Jc=Ta+yc,Ia=Math.atan2(sb-Jc,Qb-bb);yc=vb(Math.atan2(sb-Ta,Ja-bb),ub);var Na=vb(Ia,ub);Ia=ma(Ja,Ta,yc[0],yc[1]);Qb=Math.min(ma(Qb,Jc,Na[0],Na[1]),za);if(W(Ia,Qb)){var ib=Db+la.pathSector(ab);$a&&(ib+=la.pathSector($a));var Gb=[fa($a,yc[0],yc[1]),fa(ab,yc[0],yc[1])].join(" ")}aa(ib,Gb)}function ra(){z.removeZoombox(ka);if(null!==$a&&null!==ab){var Qb={};wa(Qb);z.showDoubleClickNotifier(ka);
h.call("_guiRelayout",ka,Qb)}}function wa(Qb){var yc=pb._rl,Jc=(yc[1]-yc[0])/(1-Ha/za)/za;Qb[la.id+".radialaxis.range"]=[yc[0]+($a-Ha)*Jc,yc[0]+(ab-Ha)*Jc]}function pa(Qb,yc){var Jc=ka._fullLayout.clickmode;z.removeZoombox(ka);if(2===Qb){var Ia={},Na;for(Na in la.viewInitial)Ia[la.id+"."+Na]=la.viewInitial[Na];ka.emit("plotly_doubleclick",null);h.call("_guiRelayout",ka,Ia)}-1<Jc.indexOf("select")&&1===Qb&&v(yc,ka,[la.xaxis],[la.yaxis],la.id,Aa);-1<Jc.indexOf("event")&&A.click(ka,yc,la.id)}var la=
this,ka=la.gd,na=ba._zoomlayer,oa=H.MINZOOM,sa=H.OFFEDGE,za=la.radius,Ha=la.innerRadius,Wa=la.cx,Za=la.cy,bb=la.cxx,sb=la.cyy,hb=la.sectorInRad,ub=la.vangles,pb=la.radialAxis,Ab=O.clampTiny,tb=O.findXYatLength,vb=O.findEnclosingVertexAngles,qb=H.cornerHalfWidth,zb=H.cornerLen/2,La,Ka,ya=z.makeDragger(la.layers,"path","maindrag","crosshair");a.select(ya).attr("d",la.pathSubplot()).attr("transform",c(Wa,Za));var Aa={element:ya,gd:ka,subplot:la.id,plotinfo:{id:la.id,xaxis:la.xaxis,yaxis:la.yaxis},xaxes:[la.xaxis],
yaxes:[la.yaxis]},Ja,Ta,$a,ab,Db,Nb,ec,ob,Cb;Aa.prepFn=function(Qb,yc,Jc){var Ia=ka._fullLayout.dragmode,Na=ya.getBoundingClientRect();ka._fullLayout._calcInverseTransform(ka);var ib=ka._fullLayout._invTransform;La=ka._fullLayout._invScaleX;Ka=ka._fullLayout._invScaleY;Na=r.apply3DTransform(ib)(yc-Na.left,Jc-Na.top);Ja=Na[0];Ta=Na[1];ub&&(Na=O.findPolygonOffset(za,hb[0],hb[1],ub),Ja+=bb+Na[0],Ta+=sb+Na[1]);switch(Ia){case "zoom":Aa.moveFn=ub?ia:ja;Aa.clickFn=pa;Aa.doneFn=ra;ab=$a=null;Db=la.pathSubplot();
Nb=!1;ec=g(ka._fullLayout[la.id].bgcolor).getLuminance();ob=z.makeZoombox(na,ec,Wa,Za,Db);ob.attr("fill-rule","evenodd");Cb=z.makeCorners(na,Wa,Za);y(ka);break;case "select":case "lasso":C(Qb,yc,Jc,Aa,Ia)}};ya.onmousemove=function(Qb){A.hover(ka,Qb,la.id);ka._fullLayout._lasthover=ya;ka._fullLayout._hoversubplot=la.id};ya.onmouseout=function(Qb){ka._dragging||B.unhover(ka,Qb)};B.init(Aa)};b.updateRadialDrag=function(ba,V,S){function T(tb,vb){ub?ub(tb,vb):(tb=[tb,-vb],tb=Math.abs(r.dot(tb,[Math.cos(oa),
Math.sin(oa)])/Math.sqrt(r.dot(tb,tb))),isNaN(tb)||(ub=.5>tb?W:aa));tb={};null!==pb?tb[ja.id+".radialaxis.angle"]=pb:null!==Ab&&(tb[ja.id+".radialaxis.range["+S+"]"]=Ab);ma.emit("plotly_relayouting",tb)}function fa(){null!==pb?h.call("_guiRelayout",ma,ja.id+".radialaxis.angle",pb):null!==Ab&&h.call("_guiRelayout",ma,ja.id+".radialaxis.range["+S+"]",Ab)}function W(tb,vb){0!==S&&(pb=Math.atan2(pa-(sb+vb),bb+tb-wa),ja.vangles&&(pb=k(pb,ja.vangles)),pb=Z(pb),tb=c(wa,pa)+l(-pb),ia["radial-axis"].attr("transform",
tb),ia["radial-line"].select("line").attr("transform",tb),tb=ja.gd._fullLayout,ja.updateRadialAxisTitle(tb,tb[ja.id],pb))}function aa(tb,vb){tb=r.dot([tb,-vb],[Math.cos(oa),Math.sin(oa)]);Ab=Wa-Za*tb;if(0<Za!==(S?Ab>za:Ab<Ha))Ab=null;else{vb=ma._fullLayout;tb=vb[ja.id];la.range[S]=Ab;la._rl[S]=Ab;ja.updateRadialAxis(vb,tb);ja.xaxis.setRange();ja.xaxis.setScale();ja.yaxis.setRange();ja.yaxis.setScale();vb=!1;for(var qb in ja.traceHash){var zb=ja.traceHash[qb],La=r.filterVisible(zb);zb[0][0].trace._module.plot(ma,
ja,La,tb);h.traceIs(qb,"gl")&&La.length&&(vb=!0)}vb&&(J(ma),K(ma))}}var ja=this,ma=ja.gd,ia=ja.layers;ba=ja.radius;var ra=ja.innerRadius,wa=ja.cx,pa=ja.cy,la=ja.radialAxis,ka=H.radialDragBoxSize,na=ka/2;if(la.visible){var oa=Q(ja.radialAxisAngle),sa=la._rl,za=sa[0],Ha=sa[1],Wa=sa[S],Za=.75*(sa[1]-sa[0])/(1-V.hole)/ba;if(S){var bb=wa+(ba+na)*Math.cos(oa);var sb=pa-(ba+na)*Math.sin(oa);V="radialdrag"}else bb=wa+(ra-na)*Math.cos(oa),sb=pa-(ra-na)*Math.sin(oa),V="radialdrag-inner";V=z.makeRectDragger(ia,
V,"crosshair",-na,-na,ka,ka);var hb={element:V,gd:ma};m(a.select(V),la.visible&&ra<ba,{transform:c(bb,sb)});var ub,pb,Ab;hb.prepFn=function(){Ab=pb=ub=null;hb.moveFn=T;hb.doneFn=fa;y(ma)};hb.clampFn=function(tb,vb){Math.sqrt(tb*tb+vb*vb)<H.MINDRAG&&(vb=tb=0);return[tb,vb]};B.init(hb)}};b.updateAngularDrag=function(ba){function V(ub,pb){var Ab=fa.gd._fullLayout,tb=Ab[fa.id],vb=Z(Math.atan2(pa+la-(Wa+pb*ba._invScaleY),Ha+ub*ba._invScaleX-wa-la)-hb);bb=Za+vb;aa.frontplot.attr("transform",c(fa.xOffset2,
fa.yOffset2)+l([-vb,wa,pa]));fa.vangles?(sb=fa.radialAxisAngle+vb,ub=c(ia,ra)+l(-vb),pb=c(ia,ra)+l(-sb),aa.bg.attr("transform",ub),aa["radial-grid"].attr("transform",ub),aa["radial-axis"].attr("transform",pb),aa["radial-line"].select("line").attr("transform",pb),fa.updateRadialAxisTitle(Ab,tb,sb)):fa.clipPaths.forTraces.select("path").attr("transform",c(wa,pa)+l(vb));sa.each(function(){var zb=a.select(this),La=e.getTranslate(zb);zb.attr("transform",c(La.x,La.y)+l([vb]))});za.each(function(){var zb=
a.select(this),La=zb.select("text"),Ka=e.getTranslate(zb);zb.attr("transform",l([vb,La.attr("x"),La.attr("y")])+c(Ka.x,Ka.y))});ma.rotation=r.modHalf(bb,360);fa.updateAngularAxis(Ab,tb);fa._hasClipOnAxisFalse&&!r.isFullCircle(fa.sectorInRad)&&oa.call(e.hideOutsideRangePoints,fa);Ab=!1;for(var qb in fa.traceHash)h.traceIs(qb,"gl")&&(ub=fa.traceHash[qb],pb=r.filterVisible(ub),ub[0][0].trace._module.plot(W,fa,pb,tb),pb.length&&(Ab=!0));Ab&&(J(W),K(W));tb={};S(tb);W.emit("plotly_relayouting",tb)}function S(ub){ub[fa.id+
".angularaxis.rotation"]=bb;fa.vangles&&(ub[fa.id+".radialaxis.angle"]=sb)}function T(){za.select("text").attr("transform",null);var ub={};S(ub);h.call("_guiRelayout",W,ub)}var fa=this,W=fa.gd,aa=fa.layers,ja=fa.radius,ma=fa.angularAxis,ia=fa.cx,ra=fa.cy,wa=fa.cxx,pa=fa.cyy,la=H.angularDragBoxSize,ka=z.makeDragger(aa,"path","angulardrag","move"),na={element:ka,gd:W};a.select(ka).attr("d",fa.pathAnnulus(ja,ja+la)).attr("transform",c(ia,ra)).call(F,"move");var oa=aa.frontplot.select(".scatterlayer").selectAll(".trace"),
sa=oa.selectAll(".point"),za=oa.selectAll(".textpoint"),Ha,Wa,Za,bb,sb,hb;na.prepFn=function(ub,pb,Ab){Za=ba[fa.id].angularaxis.rotation;ub=ka.getBoundingClientRect();Ha=pb-ub.left;Wa=Ab-ub.top;W._fullLayout._calcInverseTransform(W);pb=r.apply3DTransform(ba._invTransform)(Ha,Wa);Ha=pb[0];Wa=pb[1];hb=Math.atan2(pa+la-Wa,Ha-wa-la);na.moveFn=V;na.doneFn=T;y(W)};fa.vangles&&!r.isFullCircle(fa.sectorInRad)&&(na.prepFn=r.noop,F(a.select(ka),null));B.init(na)};b.isPtInside=function(ba){var V=this.sectorInRad,
S=this.vangles,T=this.angularAxis.c2g(ba.theta),fa=this.radialAxis;ba=fa.c2l(ba.r);return(S?O.isPtInsidePolygon:r.isPtInsideSector)(ba,T,fa._rl,V,S)};b.pathArc=function(ba){var V=this.sectorInRad,S=this.vangles;return(S?O.pathPolygon:r.pathArc)(ba,V[0],V[1],S)};b.pathSector=function(ba){var V=this.sectorInRad,S=this.vangles;return(S?O.pathPolygon:r.pathSector)(ba,V[0],V[1],S)};b.pathAnnulus=function(ba,V){var S=this.sectorInRad,T=this.vangles;return(T?O.pathPolygonAnnulus:r.pathAnnulus)(ba,V,S[0],
S[1],T)};b.pathSubplot=function(){var ba=this.innerRadius,V=this.radius;return ba?this.pathAnnulus(ba,V):this.pathSector(V)};b.fillViewInitialKey=function(ba,V){ba in this.viewInitial||(this.viewInitial[ba]=V)}},{"../../components/color":666,"../../components/dragelement":685,"../../components/drawing":688,"../../components/fx":706,"../../components/titles":764,"../../constants/alignment":771,"../../lib":803,"../../lib/clear_gl_canvases":787,"../../lib/setcursor":824,"../../plot_api/subroutines":844,
"../../plots/cartesian/axes":854,"../../registry":931,"../cartesian/autorange":853,"../cartesian/dragbox":863,"../cartesian/select":874,"../cartesian/set_convert":875,"../plots":917,"./constants":918,"./helpers":919,"./set_convert":924,"@plotly/d3":58,tinycolor2:598}],924:[function(b,N,G){function p(h,r){var l=r._subplot;h.setGeometry=function(){var c=h._rl[0],d=h._rl[1],e=l.innerRadius,f=(l.radius-e)/(d-c),q=e/f,t=c>d?function(w){return 0>=w}:function(w){return 0<=w};h.c2g=function(w){w=h.c2l(w)-
c;return(t(w)?w:0)+q};h.g2c=function(w){return h.l2c(w+c-q)};h.g2p=function(w){return w*f};h.c2p=function(w){return h.g2p(h.c2g(w))}}}function n(h,r){var l=h.type;if("linear"===l){var c=h.d2c,d=h.c2d;h.d2c=function(e,f){e=c(e);return"degrees"===f?a(e):e};h.c2d=function(e,f){e="degrees"===f?g(e):e;return d(e)}}h.makeCalcdata=function(e,f){var q=e[f],t=e._length,w;if(q){if(k.isTypedArray(q)&&"linear"===l){if(t===q.length)return q;if(q.subarray)return q.subarray(0,t)}f=Array(t);for(w=0;w<t;w++)f[w]=
h.d2c(q[w],e.thetaunit)}else for(w=f+"0",f="d"+f,q=(w in e)?h.d2c(e[w],e.thetaunit):0,e=e[f]?h.d2c(e[f],e.thetaunit):(h.period||2*Math.PI)/t,f=Array(t),w=0;w<t;w++)f[w]=q+w*e;return f};h.setGeometry=function(){var e=r.sector,f=e.map(a),q={clockwise:-1,counterclockwise:1}[h.direction],t=a(h.rotation),w=function(C){return(C-t)/q},x;switch(l){case "linear":var z=x=k.identity;var B=a;var A=g;h.range=k.isFullCircle(f)?[e[0],e[0]+360]:f.map(w).map(g);break;case "category":e=h._categories.length;var D=h.period?
Math.max(h.period,e):e;0===D&&(D=1);z=B=function(C){return 2*C*Math.PI/D};x=A=function(C){return C*D/Math.PI/2};h.range=[0,D]}h.c2g=function(C){return q*z(C)+t};h.g2c=function(C){return x(w(C))};h.t2g=function(C){return q*B(C)+t};h.g2t=function(C){return A(w(C))}}}var k=b("../../lib"),m=b("../cartesian/set_convert"),a=k.deg2rad,g=k.rad2deg;N.exports=function(h,r,l){m(h,l);switch(h._id){case "x":case "radialaxis":p(h,r);break;case "angularaxis":n(h,r)}}},{"../../lib":803,"../cartesian/set_convert":875}],
925:[function(b,N,G){var p=b("../lib"),n=b("../plot_api/plot_template"),k=b("./domain").defaults;N.exports=function(m,a,g,h){function r(B,A){return p.coerce(q,t,l,B,A)}var l=h.attributes;g=h.handleDefaults;for(var c=h.partition||"x",d=a._subplots[h.type],e=d.length,f=e&&d[0].replace(/\d+$/,""),q,t,w=0;w<e;w++){var x=d[w];q=m[x]?m[x]:m[x]={};t=n.newContainer(a,x,f);r("uirevision",a.uirevision);var z={};z[c]=[w/e,(w+1)/e];k(t,a,r,z);h.id=x;g(q,t,r,h)}}},{"../lib":803,"../plot_api/plot_template":843,
"./domain":882}],926:[function(b,N,G){function p(n){var k=n.description?" "+n.description:"";n=n.keys||[];if(0<n.length){k=[];for(var m=0;m<n.length;m++)k[m]="`"+n[m]+"`";k=1===n.length?"variable "+k[0]:"variables "+k.slice(0,-1).join(", ")+" and "+k.slice(-1)+"."}return k}b("../constants/docs");G.hovertemplateAttrs=function(n,k){n=n||{};k=k||{};p(k);k={valType:"string",dflt:"",editType:n.editType||"none"};!1!==n.arrayOk&&(k.arrayOk=!0);return k};G.texttemplateAttrs=function(n,k){n=n||{};k=k||{};
p(k);k={valType:"string",dflt:"",editType:n.editType||"calc"};!1!==n.arrayOk&&(k.arrayOk=!0);return k}},{"../constants/docs":774}],927:[function(b,N,G){var p=b("./ternary"),n=b("../../plots/get_data").getSubplotCalcData;N=b("../../lib").counterRegex;G.name="ternary";var k=G.attr="subplot";G.idRoot="ternary";G.idRegex=G.attrRegex=N("ternary");(G.attributes={})[k]={valType:"subplotid",dflt:"ternary",editType:"calc"};G.layoutAttributes=b("./layout_attributes");G.supplyLayoutDefaults=b("./layout_defaults");
G.plot=function(m){for(var a=m._fullLayout,g=m.calcdata,h=a._subplots.ternary,r=0;r<h.length;r++){var l=h[r],c=n(g,"ternary",l),d=a[l]._subplot;d||(d=new p({id:l,graphDiv:m,container:a._ternarylayer.node()},a),a[l]._subplot=d);d.plot(c,a,m._promises)}};G.clean=function(m,a,g,h){m=h._subplots.ternary||[];for(g=0;g<m.length;g++){var r=m[g],l=h[r]._subplot;!a[r]&&l&&(l.plotContainer.remove(),l.clipDef.remove(),l.clipDefRelative.remove(),l.layers["a-title"].remove(),l.layers["b-title"].remove(),l.layers["c-title"].remove())}}},
{"../../lib":803,"../../plots/get_data":891,"./layout_attributes":928,"./layout_defaults":929,"./ternary":930}],928:[function(b,N,G){G=b("../../components/color/attributes");var p=b("../domain").attributes,n=b("../cartesian/layout_attributes"),k=b("../../plot_api/edit_types").overrideAll;b=b("../../lib/extend").extendFlat;b={title:{text:n.title.text,font:n.title.font},color:n.color,tickmode:n.tickmode,nticks:b({},n.nticks,{dflt:6,min:1}),tick0:n.tick0,dtick:n.dtick,tickvals:n.tickvals,ticktext:n.ticktext,
ticks:n.ticks,ticklen:n.ticklen,tickwidth:n.tickwidth,tickcolor:n.tickcolor,showticklabels:n.showticklabels,showtickprefix:n.showtickprefix,tickprefix:n.tickprefix,showticksuffix:n.showticksuffix,ticksuffix:n.ticksuffix,showexponent:n.showexponent,exponentformat:n.exponentformat,minexponent:n.minexponent,separatethousands:n.separatethousands,tickfont:n.tickfont,tickangle:n.tickangle,tickformat:n.tickformat,tickformatstops:n.tickformatstops,hoverformat:n.hoverformat,showline:b({},n.showline,{dflt:!0}),
linecolor:n.linecolor,linewidth:n.linewidth,showgrid:b({},n.showgrid,{dflt:!0}),gridcolor:n.gridcolor,gridwidth:n.gridwidth,layer:n.layer,min:{valType:"number",dflt:0,min:0},_deprecated:{title:n._deprecated.title,titlefont:n._deprecated.titlefont}};N=N.exports=k({domain:p({name:"ternary"}),bgcolor:{valType:"color",dflt:G.background},sum:{valType:"number",dflt:1,min:0},aaxis:b,baxis:b,caxis:b},"plot","from-root");N.uirevision={valType:"any",editType:"none"};N.aaxis.uirevision=N.baxis.uirevision=N.caxis.uirevision=
{valType:"any",editType:"none"}},{"../../components/color/attributes":665,"../../lib/extend":793,"../../plot_api/edit_types":836,"../cartesian/layout_attributes":869,"../domain":882}],929:[function(b,N,G){function p(f,q,t,w){var x=t("bgcolor");t=t("sum");w.bgColor=k.combine(x,w.paper_bgcolor);for(var z,B,A=0;A<e.length;A++)x=e[A],z=f[x]||{},B=m.newContainer(q,x),B._name=x,n(z,B,w,q);w=q.aaxis;x=q.baxis;q=q.caxis;w.min+x.min+q.min>=t&&(w.min=0,x.min=0,q.min=0,f.aaxis&&delete f.aaxis.min,f.baxis&&delete f.baxis.min,
f.caxis&&delete f.caxis.min)}function n(f,q,t,w){function x(v,y){return a.coerce(f,q,z,v,y)}var z=d[q._name];x("uirevision",w.uirevision);q.type="linear";w=x("color");var B=w!==z.color.dflt?w:t.font.color,A=q._name.charAt(0).toUpperCase(),D="Component "+A,C=x("title.text",D);q._hovertitle=C===D?C:A;a.coerceFont(x,"title.font",{family:t.font.family,size:a.bigFont(t.font.size),color:B});x("min");l(f,q,x,"linear");h(f,q,x,"linear",{});r(f,q,x,{outerTicks:!0});x("showticklabels")&&(a.coerceFont(x,"tickfont",
{family:t.font.family,size:t.font.size,color:B}),x("tickangle"),x("tickformat"));c(f,q,x,{dfltColor:w,bgColor:t.bgColor,blend:60,showLine:!0,showGrid:!0,noZeroLine:!0,attributes:z});x("hoverformat");x("layer")}var k=b("../../components/color"),m=b("../../plot_api/plot_template"),a=b("../../lib"),g=b("../subplot_defaults"),h=b("../cartesian/tick_label_defaults"),r=b("../cartesian/tick_mark_defaults"),l=b("../cartesian/tick_value_defaults"),c=b("../cartesian/line_grid_defaults"),d=b("./layout_attributes"),
e=["aaxis","baxis","caxis"];N.exports=function(f,q,t){g(f,q,t,{type:"ternary",attributes:d,handleDefaults:p,font:q.font,paper_bgcolor:q.paper_bgcolor})}},{"../../components/color":666,"../../lib":803,"../../plot_api/plot_template":843,"../cartesian/line_grid_defaults":871,"../cartesian/tick_label_defaults":876,"../cartesian/tick_mark_defaults":877,"../cartesian/tick_value_defaults":878,"../subplot_defaults":925,"./layout_attributes":928}],930:[function(b,N,G){function p(O,I){this.id=O.id;this.graphDiv=
O.graphDiv;this.init(I);this.makeFramework(I);this.cTickLayout=this.bTickLayout=this.aTickLayout=null}function n(O){k.select(O).selectAll(".zoombox,.js-zoombox-backdrop,.js-zoombox-menu,.zoombox-corners").remove()}var k=b("@plotly/d3"),m=b("tinycolor2"),a=b("../../registry"),g=b("../../lib"),h=g.strTranslate,r=g._,l=b("../../components/color"),c=b("../../components/drawing"),d=b("../cartesian/set_convert"),e=b("../../lib/extend").extendFlat,f=b("../plots"),q=b("../cartesian/axes"),t=b("../../components/dragelement"),
w=b("../../components/fx");G=b("../../components/dragelement/helpers");var x=G.freeMode,z=G.rectMode,B=b("../../components/titles"),A=b("../cartesian/select").prepSelect,D=b("../cartesian/select").selectOnClick,C=b("../cartesian/select").clearSelect,v=b("../cartesian/select").clearSelectionsCache,y=b("../cartesian/constants");N.exports=p;b=p.prototype;b.init=function(O){this.container=O._ternarylayer;this.defs=O._defs;this.layoutId=O._uid;this.traceHash={};this.layers={}};b.plot=function(O,I){var L=
I[this.id];I=I._size;this._hasClipOnAxisFalse=!1;for(var Q=0;Q<O.length;Q++)if(!1===O[Q][0].trace.cliponaxis){this._hasClipOnAxisFalse=!0;break}this.updateLayers(L);this.adjustLayout(L,I);f.generalUpdatePerTraceModule(this.graphDiv,this,O,L);this.layers.plotbg.select("path").call(l.fill,L.bgcolor)};b.makeFramework=function(O){var I=this.graphDiv,L=O[this.id],Q=this.clipId="clip"+this.layoutId+this.id,Z=this.clipIdRelative="clip-relative"+this.layoutId+this.id;this.clipDef=g.ensureSingleById(O._clips,
"clipPath",Q,function(ba){ba.append("path").attr("d","M0,0Z")});this.clipDefRelative=g.ensureSingleById(O._clips,"clipPath",Z,function(ba){ba.append("path").attr("d","M0,0Z")});this.plotContainer=g.ensureSingle(this.container,"g",this.id);this.updateLayers(L);c.setClipUrl(this.layers.backplot,Q,I);c.setClipUrl(this.layers.grids,Q,I)};b.updateLayers=function(O){var I=this.layers,L=["draglayer","plotbg","backplot","grids"];"below traces"===O.aaxis.layer&&L.push("aaxis","aline");"below traces"===O.baxis.layer&&
L.push("baxis","bline");"below traces"===O.caxis.layer&&L.push("caxis","cline");L.push("frontplot");"above traces"===O.aaxis.layer&&L.push("aaxis","aline");"above traces"===O.baxis.layer&&L.push("baxis","bline");"above traces"===O.caxis.layer&&L.push("caxis","cline");O=this.plotContainer.selectAll("g.toplevel").data(L,String);var Q=["agrid","bgrid","cgrid"];O.enter().append("g").attr("class",function(Z){return"toplevel "+Z}).each(function(Z){var ba=k.select(this);I[Z]=ba;"frontplot"===Z?ba.append("g").classed("scatterlayer",
!0):"backplot"===Z?ba.append("g").classed("maplayer",!0):"plotbg"===Z?ba.append("path").attr("d","M0,0Z"):"aline"===Z||"bline"===Z||"cline"===Z?ba.append("path"):"grids"===Z&&Q.forEach(function(V){I[V]=ba.append("g").classed("grid "+V,!0)})});O.order()};var F=Math.sqrt(4/3);b.adjustLayout=function(O,I){var L=this,Q=O.domain,Z=(Q.x[0]+Q.x[1])/2,ba=(Q.y[0]+Q.y[1])/2,V=Q.x[1]-Q.x[0],S=Q.y[1]-Q.y[0],T=V*I.w,fa=S*I.h,W=O.sum,aa=O.aaxis.min,ja=O.baxis.min,ma=O.caxis.min;if(T>F*fa){var ia=fa;Q=ia*F}else Q=
T,ia=Q/F;T=V*Q/T;S=S*ia/fa;V=I.l+I.w*Z-Q/2;I=I.t+I.h*(1-ba)-ia/2;L.x0=V;L.y0=I;L.w=Q;L.h=ia;L.sum=W;L.xaxis={type:"linear",range:[aa+2*ma-W,W-aa-2*ja],domain:[Z-T/2,Z+T/2],_id:"x"};d(L.xaxis,L.graphDiv._fullLayout);L.xaxis.setScale();L.xaxis.isPtWithinRange=function(ra){return ra.a>=L.aaxis.range[0]&&ra.a<=L.aaxis.range[1]&&ra.b>=L.baxis.range[1]&&ra.b<=L.baxis.range[0]&&ra.c>=L.caxis.range[1]&&ra.c<=L.caxis.range[0]};L.yaxis={type:"linear",range:[aa,W-ja-ma],domain:[ba-S/2,ba+S/2],_id:"y"};d(L.yaxis,
L.graphDiv._fullLayout);L.yaxis.setScale();L.yaxis.isPtWithinRange=function(){return!0};T=L.yaxis.domain[0];Z=L.aaxis=e({},O.aaxis,{range:[aa,W-ja-ma],side:"left",tickangle:(+O.aaxis.tickangle||0)-30,domain:[T,T+S*F],anchor:"free",position:0,_id:"y",_length:Q});d(Z,L.graphDiv._fullLayout);Z.setScale();ba=L.baxis=e({},O.baxis,{range:[W-aa-ma,ja],side:"bottom",domain:L.xaxis.domain,anchor:"free",position:0,_id:"x",_length:Q});d(ba,L.graphDiv._fullLayout);ba.setScale();O=L.caxis=e({},O.caxis,{range:[W-
aa-ja,ma],side:"right",tickangle:(+O.caxis.tickangle||0)+30,domain:[T,T+S*F],anchor:"free",position:0,_id:"y",_length:Q});d(O,L.graphDiv._fullLayout);O.setScale();W="M"+V+","+(I+ia)+"h"+Q+"l-"+Q/2+",-"+ia+"Z";L.clipDef.select("path").attr("d",W);L.layers.plotbg.select("path").attr("d",W);W="M0,"+ia+"h"+Q+"l-"+Q/2+",-"+ia+"Z";L.clipDefRelative.select("path").attr("d",W);W=h(V,I);L.plotContainer.selectAll(".scatterlayer,.maplayer").attr("transform",W);L.clipDefRelative.select("path").attr("transform",
null);W=h(V-ba._offset,I+ia);L.layers.baxis.attr("transform",W);L.layers.bgrid.attr("transform",W);W=h(V+Q/2,I)+"rotate(30)"+h(0,-Z._offset);L.layers.aaxis.attr("transform",W);L.layers.agrid.attr("transform",W);W=h(V+Q/2,I)+"rotate(-30)"+h(0,-O._offset);L.layers.caxis.attr("transform",W);L.layers.cgrid.attr("transform",W);L.drawAxes(!0);L.layers.aline.select("path").attr("d",Z.showline?"M"+V+","+(I+ia)+"l"+Q/2+",-"+ia:"M0,0").call(l.stroke,Z.linecolor||"#000").style("stroke-width",(Z.linewidth||0)+
"px");L.layers.bline.select("path").attr("d",ba.showline?"M"+V+","+(I+ia)+"h"+Q:"M0,0").call(l.stroke,ba.linecolor||"#000").style("stroke-width",(ba.linewidth||0)+"px");L.layers.cline.select("path").attr("d",O.showline?"M"+(V+Q/2)+","+I+"l"+Q/2+","+ia:"M0,0").call(l.stroke,O.linecolor||"#000").style("stroke-width",(O.linewidth||0)+"px");L.graphDiv._context.staticPlot||L.initInteractions();c.setClipUrl(L.layers.frontplot,L._hasClipOnAxisFalse?null:L.clipId,L.graphDiv)};b.drawAxes=function(O){var I=
this.graphDiv,L=this.id.substr(7)+"title",Q=this.layers,Z=this.aaxis,ba=this.baxis,V=this.caxis;this.drawAx(Z);this.drawAx(ba);this.drawAx(V);if(O){O=Math.max(Z.showticklabels?Z.tickfont.size/2:0,(V.showticklabels?.75*V.tickfont.size:0)+("outside"===V.ticks?.87*V.ticklen:0));var S=(ba.showticklabels?ba.tickfont.size:0)+("outside"===ba.ticks?ba.ticklen:0)+3;Q["a-title"]=B.draw(I,"a"+L,{propContainer:Z,propName:this.id+".aaxis.title",placeholder:r(I,"Click to enter Component A title"),attributes:{x:this.x0+
this.w/2,y:this.y0-Z.title.font.size/3-O,"text-anchor":"middle"}});Q["b-title"]=B.draw(I,"b"+L,{propContainer:ba,propName:this.id+".baxis.title",placeholder:r(I,"Click to enter Component B title"),attributes:{x:this.x0-S,y:this.y0+this.h+.83*ba.title.font.size+S,"text-anchor":"middle"}});Q["c-title"]=B.draw(I,"c"+L,{propContainer:V,propName:this.id+".caxis.title",placeholder:r(I,"Click to enter Component C title"),attributes:{x:this.x0+this.w+S,y:this.y0+this.h+.83*V.title.font.size+S,"text-anchor":"middle"}})}};
b.drawAx=function(O){var I=this.graphDiv,L=O._name,Q=L.charAt(0),Z=O._id;L=this.layers[L];var ba=Q+"tickLayout",V=O.ticks+String(O.ticklen)+String(O.showticklabels);this[ba]!==V&&(L.selectAll("."+Z+"tick").remove(),this[ba]=V);O.setScale();Z=q.calcTicks(O);ba=q.clipEnds(O,Z);V=q.makeTransTickFn(O);var S=q.getTickSigns(O)[2],T=g.deg2rad(30),fa=S*(O.linewidth||1)/2;S*=O.ticklen;var W=this.w,aa=this.h;W={a:"M0,0l"+aa+",-"+W/2,b:"M0,0l-"+W/2+",-"+aa,c:"M0,0l-"+aa+","+W/2}[Q];q.drawTicks(I,O,{vals:"inside"===
O.ticks?ba:Z,layer:L,path:"b"===Q?"M0,"+fa+"l"+Math.sin(T)*S+","+Math.cos(T)*S:"M"+fa+",0l"+Math.cos(T)*S+","+-Math.sin(T)*S,transFn:V,crisp:!1});q.drawGrid(I,O,{vals:ba,layer:this.layers[Q+"grid"],path:W,transFn:V,crisp:!1});q.drawLabels(I,O,{vals:Z,layer:L,transFn:V,labelFns:q.makeLabelFns(O,0,30)})};N=y.MINZOOM/2+.87;var J="m-0.87,.5h"+N+"v3h-"+(N+5.2)+"l"+(N/2+2.6)+",-"+(.87*N+4.5)+"l2.6,1.5l-"+N/2+","+.87*N+"Z",K="m0.87,.5h-"+N+"v3h"+(N+5.2)+"l-"+(N/2+2.6)+",-"+(.87*N+4.5)+"l-2.6,1.5l"+N/2+","+
.87*N+"Z",M="m0,1l"+N/2+","+.87*N+"l2.6,-1.5l-"+(N/2+2.6)+",-"+(.87*N+4.5)+"l-"+(N/2+2.6)+","+(.87*N+4.5)+"l2.6,1.5l"+N/2+",-"+.87*N+"Z",H=!0;b.clearSelect=function(){v(this.dragOptions);C(this.dragOptions.gd)};b.initInteractions=function(){function O(sa){var za={};za[V.id+".aaxis.min"]=sa.a;za[V.id+".baxis.min"]=sa.b;za[V.id+".caxis.min"]=sa.c;return za}function I(sa,za){var Ha=T._fullLayout.clickmode;n(T);2===sa&&(T.emit("plotly_doubleclick",null),a.call("_guiRelayout",T,O({a:0,b:0,c:0})));-1<Ha.indexOf("select")&&
1===sa&&D(za,T,[V.xaxis],[V.yaxis],V.id,V.dragOptions);-1<Ha.indexOf("event")&&w.click(T,za,V.id)}function L(sa,za){var Ha=ja+sa*W,Wa=ma+za*aa;za=Math.max(0,Math.min(1,1-ma/V.h,1-Wa/V.h));sa=Math.max(0,Math.min(1,1-(ja+(V.h-ma)/Math.sqrt(3))/V.w,1-(Ha+(V.h-Wa)/Math.sqrt(3))/V.w));Ha=Math.max(0,Math.min(1,(ja-(V.h-ma)/Math.sqrt(3))/V.w,(Ha-(V.h-Wa)/Math.sqrt(3))/V.w));Wa=(za/2+Ha)*V.w;var Za=(1-za/2-sa)*V.w,bb=(Wa+Za)/2,sb=Za-Wa,hb=(1-za)*V.h,ub=hb-sb/F;sb<y.MINZOOM?(wa=ia,na.attr("d",la),oa.attr("d",
"M0,0Z")):(wa={a:ia.a+za*ra,b:ia.b+sa*ra,c:ia.c+Ha*ra},na.attr("d",la+"M"+Wa+","+hb+"H"+Za+"L"+bb+","+ub+"L"+Wa+","+hb+"Z"),oa.attr("d","M"+ja+","+ma+"m0.5,0.5h5v-2h-5v-5h-2v5h-5v2h5v5h2ZM"+Wa+","+hb+J+"M"+Za+","+hb+K+"M"+bb+","+ub+M));ka||(na.transition().style("fill",.2<pa?"rgba(0,0,0,0.4)":"rgba(255,255,255,0.3)").duration(200),oa.transition().style("opacity",1).duration(200),ka=!0);T.emit("plotly_relayouting",O(wa))}function Q(){n(T);wa!==ia&&(a.call("_guiRelayout",T,O(wa)),H&&T.data&&T._context.showTips&&
(g.notifier(r(T,"Double-click to zoom back out"),"long"),H=!1))}function Z(sa,za){var Ha=sa/V.xaxis._m,Wa=za/V.yaxis._m;wa={a:ia.a-Wa,b:ia.b+(Ha+Wa)/2,c:ia.c-(Ha-Wa)/2};Ha=[wa.a,wa.b,wa.c].sort(g.sorterAsc);Wa=Ha.indexOf(wa.a);var Za=Ha.indexOf(wa.b),bb=Ha.indexOf(wa.c);0>Ha[0]&&(0>Ha[1]+Ha[0]/2?(Ha[2]+=Ha[0]+Ha[1],Ha[0]=Ha[1]=0):(Ha[2]+=Ha[0]/2,Ha[1]+=Ha[0]/2,Ha[0]=0),wa={a:Ha[Wa],b:Ha[Za],c:Ha[bb]},za=(ia.a-wa.a)*V.yaxis._m,sa=(ia.c-wa.c-ia.b+wa.b)*V.xaxis._m);Ha=h(V.x0+sa,V.y0+za);V.plotContainer.selectAll(".scatterlayer,.maplayer").attr("transform",
Ha);sa=h(-sa,-za);V.clipDefRelative.select("path").attr("transform",sa);V.aaxis.range=[wa.a,V.sum-wa.b-wa.c];V.baxis.range=[V.sum-wa.a-wa.c,wa.b];V.caxis.range=[V.sum-wa.a-wa.b,wa.c];V.drawAxes(!1);V._hasClipOnAxisFalse&&V.plotContainer.select(".scatterlayer").selectAll(".trace").call(c.hideOutsideRangePoints,V);T.emit("plotly_relayouting",O(wa))}function ba(){a.call("_guiRelayout",T,O(wa))}var V=this,S=V.layers.plotbg.select("path").node(),T=V.graphDiv,fa=T._fullLayout._zoomlayer,W,aa;this.dragOptions=
{element:S,gd:T,plotinfo:{id:V.id,domain:T._fullLayout[V.id].domain,xaxis:V.xaxis,yaxis:V.yaxis},subplot:V.id,prepFn:function(sa,za,Ha){V.dragOptions.xaxes=[V.xaxis];V.dragOptions.yaxes=[V.yaxis];W=T._fullLayout._invScaleX;aa=T._fullLayout._invScaleY;var Wa=V.dragOptions.dragmode=T._fullLayout.dragmode;x(Wa)?V.dragOptions.minDrag=1:V.dragOptions.minDrag=void 0;"zoom"===Wa?(V.dragOptions.moveFn=L,V.dragOptions.clickFn=I,V.dragOptions.doneFn=Q,sa=S.getBoundingClientRect(),ja=za-sa.left,ma=Ha-sa.top,
T._fullLayout._calcInverseTransform(T),za=g.apply3DTransform(T._fullLayout._invTransform)(ja,ma),ja=za[0],ma=za[1],wa=ia={a:V.aaxis.range[0],b:V.baxis.range[1],c:V.caxis.range[1]},ra=V.aaxis.range[1]-ia.a,pa=m(V.graphDiv._fullLayout[V.id].bgcolor).getLuminance(),la="M0,"+V.h+"L"+V.w/2+", 0L"+V.w+","+V.h+"Z",ka=!1,na=fa.append("path").attr("class","zoombox").attr("transform",h(V.x0,V.y0)).style({fill:.2<pa?"rgba(0,0,0,0)":"rgba(255,255,255,0)","stroke-width":0}).attr("d",la),oa=fa.append("path").attr("class",
"zoombox-corners").attr("transform",h(V.x0,V.y0)).style({fill:l.background,stroke:l.defaultLine,"stroke-width":1,opacity:0}).attr("d","M0,0Z"),V.clearSelect(T)):"pan"===Wa?(V.dragOptions.moveFn=Z,V.dragOptions.clickFn=I,V.dragOptions.doneFn=ba,wa=ia={a:V.aaxis.range[0],b:V.baxis.range[1],c:V.caxis.range[1]},V.clearSelect(T)):(z(Wa)||x(Wa))&&A(sa,za,Ha,V.dragOptions,Wa)}};var ja,ma,ia,ra,wa,pa,la,ka,na,oa;S.onmousemove=function(sa){w.hover(T,sa,V.id);T._fullLayout._lasthover=S;T._fullLayout._hoversubplot=
V.id};S.onmouseout=function(sa){T._dragging||t.unhover(T,sa)};t.init(this.dragOptions)}},{"../../components/color":666,"../../components/dragelement":685,"../../components/dragelement/helpers":684,"../../components/drawing":688,"../../components/fx":706,"../../components/titles":764,"../../lib":803,"../../lib/extend":793,"../../registry":931,"../cartesian/axes":854,"../cartesian/constants":861,"../cartesian/select":874,"../cartesian/set_convert":875,"../plots":917,"@plotly/d3":58,tinycolor2:598}],
931:[function(b,N,G){function p(t){if(t.layoutAttributes&&(t=t.layoutAttributes._arrayAttrRegexps))for(var w=0;w<t.length;w++)r(G.layoutArrayRegexes,t[w])}function n(t,w){(t=G.componentsRegistry[t].schema)&&t.traces&&(t=t.traces[w])&&q(G.modules[w]._module.attributes,t)}function k(t,w){(t=G.componentsRegistry[t].schema)&&t.transforms&&(t=t.transforms[w])&&q(G.transformsRegistry[w].attributes,t)}function m(t,w){if((t=G.componentsRegistry[t].schema)&&t.subplots){var x=G.subplotsRegistry[w];w=x.layoutAttributes;
x="subplot"===x.attr?x.name:x.attr;Array.isArray(x)&&(x=x[0]);t=t.subplots[x];w&&t&&q(w,t)}}function a(t){"object"===typeof t&&(t=t.type);return t}var g=b("./lib/loggers"),h=b("./lib/noop"),r=b("./lib/push_unique"),l=b("./lib/is_plain_object"),c=b("./lib/dom").addStyleRule;N=b("./lib/extend");var d=b("./plots/attributes"),e=b("./plots/layout_attributes"),f=N.extendFlat,q=N.extendDeepAll;G.modules={};G.allCategories={};G.allTypes=[];G.subplotsRegistry={};G.transformsRegistry={};G.componentsRegistry=
{};G.layoutArrayContainers=[];G.layoutArrayRegexes=[];G.traceLayoutAttributes={};G.localeRegistry={};G.apiMethodRegistry={};G.collectableSubplotTypes=null;G.register=function(t){G.collectableSubplotTypes=null;if(t)t&&!Array.isArray(t)&&(t=[t]);else throw Error("No argument passed to Plotly.register.");for(var w=0;w<t.length;w++){var x=t[w];if(!x)throw Error("Invalid module was attempted to be registered!");switch(x.moduleType){case "trace":var z=void 0,B=void 0,A=x.name,D=x.categories,C=x.meta;if(G.modules[A])g.log("Type "+
A+" already registered");else{if(!G.subplotsRegistry[x.basePlotModule.name]){var v=void 0,y=x.basePlotModule,F=y.name;if(G.subplotsRegistry[F])g.log("Plot type "+F+" already registered.");else for(v in p(y),G.subplotsRegistry[F]=y,G.componentsRegistry)m(v,y.name)}v={};for(y=0;y<D.length;y++)v[D[y]]=!0,G.allCategories[D[y]]=!0;G.modules[A]={_module:x,categories:v};C&&Object.keys(C).length&&(G.modules[A].meta=C);G.allTypes.push(A);for(B in G.componentsRegistry)n(B,A);x.layoutAttributes&&f(G.traceLayoutAttributes,
x.layoutAttributes);x=x.basePlotModule;B=x.name;if("mapbox"===B)for(z in x=x.constants.styleRules,x)c(".js-plotly-plot .plotly .mapboxgl-"+z,x[z]);"geo"!==B&&"mapbox"!==B||void 0!==window.PlotlyGeoAssets||(window.PlotlyGeoAssets={topojson:{}})}break;case "transform":z=void 0;B=x;if("string"!==typeof B.name)throw Error("Transform module *name* must be a string.");x="Transform module "+B.name;A="function"===typeof B.transform;D="function"===typeof B.calcTransform;if(!A&&!D)throw Error(x+" is missing a *transform* or *calcTransform* method.");
A&&D&&g.log([x+" has both a *transform* and *calcTransform* methods.","Please note that all *transform* methods are executed before all *calcTransform* methods."].join(" "));l(B.attributes)||g.log(x+" registered without an *attributes* object.");"function"!==typeof B.supplyDefaults&&g.log(x+" registered without a *supplyDefaults* method.");G.transformsRegistry[B.name]=B;for(z in G.componentsRegistry)k(z,B.name);break;case "component":A=B=z=void 0;if("string"!==typeof x.name)throw Error("Component module *name* must be a string.");
D=x.name;G.componentsRegistry[D]=x;x.layoutAttributes&&(x.layoutAttributes._isLinkedToArray&&r(G.layoutArrayContainers,D),p(x));for(A in G.modules)n(D,A);for(B in G.subplotsRegistry)m(D,B);for(z in G.transformsRegistry)k(D,z);x.schema&&x.schema.layout&&q(e,x.schema.layout);break;case "locale":A=x;x=A.name;z=x.split("-")[0];B=A.dictionary;A=A.format;D=B&&Object.keys(B).length;C=A&&Object.keys(A).length;v=G.localeRegistry;(y=v[x])||(v[x]=y={});z!==x&&((x=v[z])||(v[z]=x={}),D&&x.dictionary===y.dictionary&&
(x.dictionary=B),C&&x.format===y.format&&(x.format=A));D&&(y.dictionary=B);C&&(y.format=A);break;case "apiMethod":G.apiMethodRegistry[x.name]=x.fn;break;default:throw Error("Invalid module was attempted to be registered!");}}};G.getModule=function(t){return(t=G.modules[a(t)])?t._module:!1};G.traceIs=function(t,w){t=a(t);if("various"===t)return!1;var x=G.modules[t];x||(t&&g.log("Unrecognized trace type "+t+"."),x=G.modules[d.type.dflt]);return!!x.categories[w]};G.getTransformIndices=function(t,w){var x=
[];t=t.transforms||[];for(var z=0;z<t.length;z++)t[z].type===w&&x.push(z);return x};G.hasTransform=function(t,w){t=t.transforms||[];for(var x=0;x<t.length;x++)if(t[x].type===w)return!0;return!1};G.getComponentMethod=function(t,w){return(t=G.componentsRegistry[t])?t[w]||h:h};G.call=function(){var t=arguments[0],w=[].slice.call(arguments,1);return G.apiMethodRegistry[t].apply(null,w)}},{"./lib/dom":791,"./lib/extend":793,"./lib/is_plain_object":804,"./lib/loggers":807,"./lib/noop":812,"./lib/push_unique":818,
"./plots/attributes":850,"./plots/layout_attributes":908}],932:[function(b,N,G){function p(a){switch(a){case "themes__thumb":a={autosize:!0,width:150,height:150,title:{text:""},showlegend:!1,margin:{l:5,r:5,t:5,b:5,pad:0},annotations:[]};break;case "thumbnail":a={title:{text:""},hidesources:!0,showlegend:!1,borderwidth:0,bordercolor:"",margin:{l:1,r:1,t:1,b:1,pad:0},annotations:[]};break;default:a={}}return a}var n=b("../registry");b=b("../lib");var k=b.extendFlat,m=b.extendDeep;N.exports=function(a,
g){var h,r=a.layout,l=m([],a.data);r=m({},r,p(g.tileClass));a=a._context||{};g.width&&(r.width=g.width);g.height&&(r.height=g.height);if("thumbnail"===g.tileClass||"themes__thumb"===g.tileClass){r.annotations=[];var c=Object.keys(r);for(h=0;h<c.length;h++)-1<["xaxis","yaxis","zaxis"].indexOf(c[h].slice(0,5))&&(r[c[h]].title={text:""});for(h=0;h<l.length;h++)c=l[h],c.showscale=!1,c.marker&&(c.marker.showscale=!1),n.traceIs(c,"pie-like")&&(c.textposition="none")}if(Array.isArray(g.annotations))for(h=
0;h<g.annotations.length;h++)r.annotations.push(g.annotations[h]);c=Object.keys(r).filter(function(f){return f.match(/^scene\d*$/)});if(c.length){var d={};"thumbnail"===g.tileClass&&(d={title:{text:""},showaxeslabels:!1,showticklabels:!1,linetickenable:!1});for(h=0;h<c.length;h++){var e=r[c[h]];e.xaxis||(e.xaxis={});e.yaxis||(e.yaxis={});e.zaxis||(e.zaxis={});k(e.xaxis,d);k(e.yaxis,d);k(e.zaxis,d);e._scene=null}}h=document.createElement("div");g.tileClass&&(h.className=g.tileClass);l={gd:h,td:h,layout:r,
data:l,config:{staticPlot:void 0===g.staticPlot?!0:g.staticPlot,plotGlPixelRatio:void 0===g.plotGlPixelRatio?2:g.plotGlPixelRatio,displaylogo:g.displaylogo||!1,showLink:g.showLink||!1,showTips:g.showTips||!1,mapboxAccessToken:a.mapboxAccessToken}};"transparent"!==g.setBackground&&(l.config.setBackground=g.setBackground||"opaque");l.gd.defaultLayout=p(g.tileClass);return l}},{"../lib":803,"../registry":931}],933:[function(b,N,G){var p=b("../lib"),n=b("../plot_api/to_image"),k=b("./filesaver"),m=b("./helpers");
N.exports=function(a,g){var h;p.isPlainObject(a)||(h=p.getGraphDiv(a));g=g||{};g.format=g.format||"png";g.width=g.width||null;g.height=g.height||null;g.imageDataOnly=!0;return new Promise(function(r,l){h&&h._snapshotInProgress&&l(Error("Snapshotting already in progress."));p.isIE()&&"svg"!==g.format&&l(Error(m.MSG_IE_BAD_FORMAT));h&&(h._snapshotInProgress=!0);var c=n(a,g),d=g.filename||a.fn||"newplot";d+="."+g.format.replace("-",".");c.then(function(e){h&&(h._snapshotInProgress=!1);return k(e,d,g.format)}).then(function(e){r(e)}).catch(function(e){h&&
(h._snapshotInProgress=!1);l(e)})})}},{"../lib":803,"../plot_api/to_image":846,"./filesaver":934,"./helpers":935}],934:[function(b,N,G){var p=b("../lib"),n=b("./helpers");N.exports=function(k,m,a){var g=document.createElement("a"),h="download"in g;return new Promise(function(r,l){if(p.isIE())return l=n.createBlob(k,"svg"),window.navigator.msSaveBlob(l,m),r(m);if(h)return l=n.createBlob(k,a),l=n.createObjectURL(l),g.href=l,g.download=m,document.body.appendChild(g),g.click(),document.body.removeChild(g),
n.revokeObjectURL(l),r(m);if(p.isSafari())return n.octetStream(("svg"===a?",":";base64,")+encodeURIComponent(k)),r(m);l(Error("download error"))})}},{"../lib":803,"./helpers":935}],935:[function(b,N,G){var p=b("../registry");G.getDelay=function(k){return k._has?k._has("gl3d")||k._has("gl2d")||k._has("mapbox")?500:0:0};G.getRedrawFunc=function(k){return function(){p.getComponentMethod("colorbar","draw")(k)}};G.encodeSVG=function(k){return"data:image/svg+xml,"+encodeURIComponent(k)};G.encodeJSON=function(k){return"data:application/json,"+
encodeURIComponent(k)};var n=window.URL||window.webkitURL;G.createObjectURL=function(k){return n.createObjectURL(k)};G.revokeObjectURL=function(k){return n.revokeObjectURL(k)};G.createBlob=function(k,m){if("svg"===m)return new window.Blob([k],{type:"image/svg+xml;charset\x3dutf-8"});if("full-json"===m)return new window.Blob([k],{type:"application/json;charset\x3dutf-8"});k=window.atob(k);for(var a=k.length,g=new ArrayBuffer(a),h=new Uint8Array(g),r=0;r<a;r++)h[r]=k.charCodeAt(r);return new window.Blob([g],
{type:"image/"+m})};G.octetStream=function(k){document.location.href="data:application/octet-stream"+k};G.IMAGE_URL_PREFIX=/^data:image\/\w+;base64,/;G.MSG_IE_BAD_FORMAT="Sorry IE does not support downloading from canvas. Try {format:'svg'} instead."},{"../registry":931}],936:[function(b,N,G){G=b("./helpers");b={getDelay:G.getDelay,getRedrawFunc:G.getRedrawFunc,clone:b("./cloneplot"),toSVG:b("./tosvg"),svgToImg:b("./svgtoimg"),toImage:b("./toimage"),downloadImage:b("./download")};N.exports=b},{"./cloneplot":932,
"./download":933,"./helpers":935,"./svgtoimg":937,"./toimage":938,"./tosvg":939}],937:[function(b,N,G){var p=b("../lib"),n=b("events").EventEmitter,k=b("./helpers");N.exports=function(m){var a=m.emitter||new n,g=new Promise(function(h,r){var l=window.Image,c=m.svg,d=m.format||"png";if(p.isIE()&&"svg"!==d)return l=Error(k.MSG_IE_BAD_FORMAT),r(l),m.promise?g:a.emit("error",l);var e=m.canvas,f=m.scale||1,q=f*(m.width||300),t=f*(m.height||150),w=e.getContext("2d"),x=new l;if("svg"===d||p.isSafari())var z=
k.encodeSVG(c);else{var B=k.createBlob(c,"svg");z=k.createObjectURL(B)}e.width=q;e.height=t;x.onload=function(){B=null;k.revokeObjectURL(z);"svg"!==d&&w.drawImage(x,0,0,q,t);switch(d){case "jpeg":var A=e.toDataURL("image/jpeg");break;case "png":A=e.toDataURL("image/png");break;case "webp":A=e.toDataURL("image/webp");break;case "svg":A=z;break;default:if(r(Error("Image format is not jpeg, png, svg or webp.")),!m.promise)return a.emit("error","Image format is not jpeg, png, svg or webp.")}h(A);m.promise||
a.emit("success",A)};x.onerror=function(A){B=null;k.revokeObjectURL(z);r(A);if(!m.promise)return a.emit("error",A)};x.src=z});return m.promise?g:a}},{"../lib":803,"./helpers":935,events:116}],938:[function(b,N,G){var p=b("events").EventEmitter,n=b("../registry"),k=b("../lib"),m=b("./helpers"),a=b("./cloneplot"),g=b("./tosvg"),h=b("./svgtoimg");N.exports=function(r,l){var c=new p;r=a(r,{format:"png"});var d=r.gd;d.style.position="absolute";d.style.left="-5000px";document.body.appendChild(d);var e=
m.getRedrawFunc(d);n.call("_doPlot",d,r.data,r.layout,r.config).then(e).then(function(){var f=m.getDelay(d._fullLayout);setTimeout(function(){var q=g(d),t=document.createElement("canvas");t.id=k.randstr();c=h({format:l.format,width:d._fullLayout.width,height:d._fullLayout.height,canvas:t,emitter:c,svg:q});c.clean=function(){d&&document.body.removeChild(d)}},f)}).catch(function(f){c.emit("error",f)});return c}},{"../lib":803,"../registry":931,"./cloneplot":932,"./helpers":935,"./svgtoimg":937,"./tosvg":939,
events:116}],939:[function(b,N,G){function p(l){var c=n.select("body").append("div").style({display:"none"}).html("");l=l.replace(/(&[^;]*;)/gi,function(d){return"\x26lt;"===d?"\x26#60;":"\x26rt;"===d?"\x26#62;":-1!==d.indexOf("\x3c")||-1!==d.indexOf("\x3e")?"":c.html(d).text()});c.remove();return l}var n=b("@plotly/d3"),k=b("../lib"),m=b("../components/drawing"),a=b("../components/color"),g=b("../constants/xmlns_namespaces"),h=/"/g,r=/("TOBESTRIPPED)|(TOBESTRIPPED")/g;N.exports=function(l,c,d){var e=
l._fullLayout,f=e._paper,q=e._toppaper,t=e.width,w=e.height,x,z;f.insert("rect",":first-child").call(m.setRect,0,0,t,w).call(a.fill,e.paper_bgcolor);var B=e._basePlotModules||[];for(x=0;x<B.length;x++){var A=B[x];A.toSVG&&A.toSVG(l)}if(q)for(x=q.node().childNodes,l=Array.prototype.slice.call(x),x=0;x<l.length;x++)q=l[x],q.childNodes.length&&f.node().appendChild(q);e._draggers&&e._draggers.remove();f.node().style.background="";f.selectAll("text").attr({"data-unformatted":null,"data-math":null}).each(function(){var D=
n.select(this);if("hidden"===this.style.visibility||"none"===this.style.display)D.remove();else{D.style({visibility:null,display:null});var C=this.style.fontFamily;C&&-1!==C.indexOf('"')&&D.style("font-family",C.replace(h,"TOBESTRIPPED"))}});x=[];if(e._gradientUrlQueryParts)for(z in e._gradientUrlQueryParts)x.push(z);if(e._patternUrlQueryParts)for(z in e._patternUrlQueryParts)x.push(z);x.length&&f.selectAll(x.join(",")).each(function(){var D=n.select(this),C=this.style.fill;C&&-1!==C.indexOf("url(")&&
D.style("fill",C.replace(h,"TOBESTRIPPED"));(C=this.style.stroke)&&-1!==C.indexOf("url(")&&D.style("stroke",C.replace(h,"TOBESTRIPPED"))});"pdf"!==c&&"eps"!==c||f.selectAll("#MathJax_SVG_glyphs path").attr("stroke-width",0);f.node().setAttributeNS(g.xmlns,"xmlns",g.svg);f.node().setAttributeNS(g.xmlns,"xmlns:xlink",g.xlink);"svg"===c&&d&&(f.attr("width",d*t),f.attr("height",d*w),f.attr("viewBox","0 0 "+t+" "+w));c=(new window.XMLSerializer).serializeToString(f.node());c=p(c);c=c.replace(/&(?!\w+;|#[0-9]+;| #x[0-9A-F]+;)/g,
"\x26amp;");c=c.replace(r,"'");k.isIE()&&(c=c.replace(/"/gi,"'"),c=c.replace(/(\('#)([^']*)('\))/gi,'("#$2")'),c=c.replace(/(\\')/gi,'"'));return c}},{"../components/color":666,"../components/drawing":688,"../constants/xmlns_namespaces":780,"../lib":803,"@plotly/d3":58}],940:[function(b,N,G){var p=b("../../lib");N.exports=function(n,k){for(var m=0;m<n.length;m++)n[m].i=m;p.mergeArray(k.text,n,"tx");p.mergeArray(k.hovertext,n,"htx");if(k=k.marker)if(p.mergeArray(k.opacity,n,"mo",!0),p.mergeArray(k.color,
n,"mc"),k=k.line)p.mergeArray(k.color,n,"mlc"),p.mergeArrayCastPositive(k.width,n,"mlw")}},{"../../lib":803}],941:[function(b,N,G){G=b("../scatter/attributes");var p=b("../../plots/cartesian/axis_format_attributes").axisHoverFormat,n=b("../../plots/template_attributes").hovertemplateAttrs,k=b("../../plots/template_attributes").texttemplateAttrs,m=b("../../components/colorscale/attributes"),a=b("../../plots/font_attributes"),g=b("./constants"),h=b("../../components/drawing/attributes").pattern;b=b("../../lib/extend").extendFlat;
a=a({editType:"calc",arrayOk:!0,colorEditType:"style"});var r=b({},G.marker.line.width,{dflt:0});r=b({width:r,editType:"calc"},m("marker.line"));m=b({line:r,editType:"calc"},m("marker"),{opacity:{valType:"number",arrayOk:!0,dflt:1,min:0,max:1,editType:"style"},pattern:h});N.exports={x:G.x,x0:G.x0,dx:G.dx,y:G.y,y0:G.y0,dy:G.dy,xperiod:G.xperiod,yperiod:G.yperiod,xperiod0:G.xperiod0,yperiod0:G.yperiod0,xperiodalignment:G.xperiodalignment,yperiodalignment:G.yperiodalignment,xhoverformat:p("x"),yhoverformat:p("y"),
text:G.text,texttemplate:k({editType:"plot"},{keys:g.eventDataKeys}),hovertext:G.hovertext,hovertemplate:n({},{keys:g.eventDataKeys}),textposition:{valType:"enumerated",values:["inside","outside","auto","none"],dflt:"auto",arrayOk:!0,editType:"calc"},insidetextanchor:{valType:"enumerated",values:["end","middle","start"],dflt:"end",editType:"plot"},textangle:{valType:"angle",dflt:"auto",editType:"plot"},textfont:b({},a,{}),insidetextfont:b({},a,{}),outsidetextfont:b({},a,{}),constraintext:{valType:"enumerated",
values:["inside","outside","both","none"],dflt:"both",editType:"calc"},cliponaxis:b({},G.cliponaxis,{}),orientation:{valType:"enumerated",values:["v","h"],editType:"calc+clearAxisTypes"},base:{valType:"any",dflt:null,arrayOk:!0,editType:"calc"},offset:{valType:"number",dflt:null,arrayOk:!0,editType:"calc"},width:{valType:"number",dflt:null,min:0,arrayOk:!0,editType:"calc"},marker:m,offsetgroup:{valType:"string",dflt:"",editType:"calc"},alignmentgroup:{valType:"string",dflt:"",editType:"calc"},selected:{marker:{opacity:G.selected.marker.opacity,
color:G.selected.marker.color,editType:"style"},textfont:G.selected.textfont,editType:"style"},unselected:{marker:{opacity:G.unselected.marker.opacity,color:G.unselected.marker.color,editType:"style"},textfont:G.unselected.textfont,editType:"style"},_deprecated:{bardir:{valType:"enumerated",editType:"calc",values:["v","h"]}}}},{"../../components/colorscale/attributes":673,"../../components/drawing/attributes":687,"../../lib/extend":793,"../../plots/cartesian/axis_format_attributes":857,"../../plots/font_attributes":883,
"../../plots/template_attributes":926,"../scatter/attributes":1218,"./constants":943}],942:[function(b,N,G){var p=b("../../plots/cartesian/axes"),n=b("../../plots/cartesian/align_period"),k=b("../../components/colorscale/helpers").hasColorscale,m=b("../../components/colorscale/calc"),a=b("./arrays_to_calcdata"),g=b("../scatter/calc_selection");N.exports=function(h,r){var l=p.getFromId(h,r.xaxis||"x"),c=p.getFromId(h,r.yaxis||"y");var d={msUTC:!(!r.base&&0!==r.base)};if("h"===r.orientation){d=l.makeCalcdata(r,
"x",d);var e=c.makeCalcdata(r,"y");c=n(r,c,"y",e);var f=!!r.yperiodalignment;var q="y"}else d=c.makeCalcdata(r,"y",d),e=l.makeCalcdata(r,"x"),c=n(r,l,"x",e),f=!!r.xperiodalignment,q="x";l=c.vals;for(var t=Math.min(l.length,d.length),w=Array(t),x=0;x<t;x++)w[x]={p:l[x],s:d[x]},f&&(w[x].orig_p=e[x],w[x][q+"End"]=c.ends[x],w[x][q+"Start"]=c.starts[x]),r.ids&&(w[x].id=String(r.ids[x]));k(r,"marker")&&m(h,r,{vals:r.marker.color,containerStr:"marker",cLetter:"c"});k(r,"marker.line")&&m(h,r,{vals:r.marker.line.color,
containerStr:"marker.line",cLetter:"c"});a(w,r);g(w,r);return w}},{"../../components/colorscale/calc":674,"../../components/colorscale/helpers":677,"../../plots/cartesian/align_period":851,"../../plots/cartesian/axes":854,"../scatter/calc_selection":1220,"./arrays_to_calcdata":940}],943:[function(b,N,G){N.exports={TEXTPAD:3,eventDataKeys:["value","label"]}},{}],944:[function(b,N,G){function p(B,A,D,C,v){if(C.length){var y;n(D,C);switch(v.mode){case "overlay":k(A,D,C,v);break;case "group":var F=[];
var J=[];for(y=0;y<C.length;y++){var K=C[y];var M=K[0].trace;void 0===M.offset?J.push(K):F.push(K)}if(J.length){J=new z(J,{posAxis:A,sepNegVal:!1,overlapNoMerge:!v.norm});var H=B._fullLayout;B=J.minDiff;y=J.traces;K=y.length;M=J.positions.length!==J.distinctPositions.length;var O=B*(1-v.gap),I=x(H,A._id)+y[0][0].trace.orientation;H=H._alignmentOpts[I]||{};for(I=0;I<K;I++){var L=y[I],Q=L[0].trace,Z=Object.keys((H[Q.alignmentgroup]||{}).offsetGroups||{}).length;var ba=Z?O/Z:M?O/K:O;var V=ba*(1-(v.groupgap||
0));Q=Z?((2*Q._offsetIndex+1-Z)*ba-V)/2:M?((2*I+1-K)*ba-V)/2:-V/2;L=L[0].t;L.barwidth=V;L.poffset=Q;L.bargroupwidth=O;L.bardelta=B}J.binWidth=y[0][0].t.barwidth/100;a(J);g(A,J);h(A,J,M);B=J.traces;for(y=0;y<B.length;y++)if(K=B[y],void 0===K[0].trace.base)for(M=new z([K],{posAxis:A,sepNegVal:!0,overlapNoMerge:!0}),O=0;O<K.length;O++)if(H=K[O],H.p!==q&&(I=M.put(H.p,H.b+H.s)))H.b=I;v.norm?(l(J),c(D,J,v)):r(D,J)}F.length&&k(A,D,F,v);break;case "stack":case "relative":F=[];J=[];for(y=0;y<C.length;y++)K=
C[y],M=K[0].trace,void 0===M.base?J.push(K):F.push(K);if(J.length){B=new z(J,{posAxis:A,sepNegVal:"relative"===v.mode,overlapNoMerge:!(v.norm||"stack"===v.mode||"relative"===v.mode)});m(A,B,v);y=D._id.charAt(0);K=B.traces;for(I=0;I<K.length;I++)if(M=K[I],O=M[0].trace,"funnel"===O.type)for(V=0;V<M.length;V++)L=M[V],L.s!==q&&B.put(L.p,-.5*L.s);for(I=0;I<K.length;I++){M=K[I];O=M[0].trace;H="funnel"===O.type;Q=[];for(V=0;V<M.length;V++)L=M[V],L.s!==q&&(ba=H?L.s:L.s+L.b,Z=B.put(L.p,ba),ba=Z+ba,L.b=Z,L[y]=
ba,v.norm||(Q.push(ba),L.hasB&&Q.push(Z)));v.norm||(O._extremes[D._id]=w.findExtremes(D,Q,{tozero:!0,padded:!0}))}for(y=0;y<J.length;y++)for(K=J[y],M=0;M<K.length;M++)O=K[M],O.s!==q&&O.b+O.s===B.get(O.p,O.s)&&(O._outmost=!0);v.norm&&c(D,B,v)}F.length&&k(A,D,F,v)}d(C,A)}}function n(B,A){var D;for(D=0;D<A.length;D++){var C=A[D];var v=C[0].trace;var y="funnel"===v.type?v._base:v.base,F="h"===v.orientation?v.xcalendar:v.ycalendar,J="category"===B.type||"multicategory"===B.type?function(){return null}:
B.d2c;if(f(y)){for(v=0;v<Math.min(y.length,C.length);v++){var K=J(y[v],0,F);e(K)?(C[v].b=+K,C[v].hasB=1):C[v].b=0}for(;v<C.length;v++)C[v].b=0}else for(K=J(y,0,F),K=(y=e(K))?K:0,v=0;v<C.length;v++)C[v].b=K,y&&(C[v].hasB=1)}}function k(B,A,D,C){for(var v=0;v<D.length;v++){var y=new z([D[v]],{posAxis:B,sepNegVal:!1,overlapNoMerge:!C.norm});m(B,y,C);C.norm?(l(y),c(A,y,C)):r(A,y)}}function m(B,A,D){var C=A.minDiff,v=A.traces,y=C*(1-D.gap);D=y*(1-(D.groupgap||0));for(var F=-D/2,J=0;J<v.length;J++){var K=
v[J][0].t;K.barwidth=D;K.poffset=F;K.bargroupwidth=y;K.bardelta=C}A.binWidth=v[0][0].t.barwidth/100;a(A);g(B,A);h(B,A)}function a(B){B=B.traces;var A,D;for(A=0;A<B.length;A++){var C=B[A],v=C[0],y=v.trace;v=v.t;var F=y._offset||y.offset,J=v.poffset;if(f(F)){var K=Array.prototype.slice.call(F,0,C.length);for(D=0;D<K.length;D++)e(K[D])||(K[D]=J);for(D=K.length;D<C.length;D++)K.push(J);v.poffset=K}else void 0!==F&&(v.poffset=F);D=y._width||y.width;y=v.barwidth;if(f(D)){var M=Array.prototype.slice.call(D,
0,C.length);for(D=0;D<M.length;D++)e(M[D])||(M[D]=y);for(D=M.length;D<C.length;D++)M.push(y);v.barwidth=M;if(void 0===F){K=[];for(D=0;D<C.length;D++)K.push(J+(y-M[D])/2);v.poffset=K}}else void 0!==D&&(v.barwidth=D,void 0===F&&(v.poffset=J+(y-D)/2))}}function g(B,A){A=A.traces;B=B._id.charAt(0);for(var D=0;D<A.length;D++){var C=A[D],v=C[0].t,y=v.poffset,F=Array.isArray(y);v=v.barwidth;for(var J=Array.isArray(v),K=0;K<C.length;K++){var M=C[K],H=M.w=J?v[K]:v;M[B]=M.p+(F?y[K]:y)+H/2}}}function h(B,A,
D){var C=A.traces,v=A.minDiff/2;w.minDtick(B,A.minDiff,A.distinctPositions[0],D);for(A=0;A<C.length;A++){D=C[A];var y=D[0],F=y.trace,J=[],K;for(K=0;K<D.length;K++){var M=D[K];var H=M.p-v;M=M.p+v;J.push(H,M)}if(F.width||F.offset){H=y.t;y=H.poffset;var O=H.barwidth,I=Array.isArray(y),L=Array.isArray(O);for(K=0;K<D.length;K++){M=D[K];var Q=L?O[K]:O;H=M.p+(I?y[K]:y);M=H+Q;J.push(H,M)}}F._extremes[B._id]=w.findExtremes(B,J,{padded:!1})}}function r(B,A){A=A.traces;for(var D=B._id.charAt(0),C=0;C<A.length;C++){for(var v=
A[C],y=v[0].trace,F=[],J=!1,K=0;K<v.length;K++){var M=v[K],H=M.b,O=H+M.s;M[D]=O;F.push(O);M.hasB&&F.push(H);M.hasB&&M.b||(J=!0)}y._extremes[B._id]=w.findExtremes(B,F,{tozero:J,padded:!0})}}function l(B){for(var A=B.traces,D=0;D<A.length;D++)for(var C=A[D],v=0;v<C.length;v++){var y=C[v];y.s!==q&&B.put(y.p,y.b+y.s)}}function c(B,A,D){function C(T){return e(B.c2l(T))&&(T<K-J||T>M+J||!e(K))}var v=A.traces,y=B._id.charAt(0),F="fraction"===D.norm?1:100,J=F/1E9,K=B.l2c(B.c2l(0)),M="stack"===D.mode?F:K;for(D=
0;D<v.length;D++){for(var H=v[D],O=H[0].trace,I=[],L=!1,Q=!1,Z=0;Z<H.length;Z++){var ba=H[Z];if(ba.s!==q){var V=Math.abs(F/A.get(ba.p,ba.s));ba.b*=V;ba.s*=V;V=ba.b;var S=V+ba.s;ba[y]=S;I.push(S);Q=Q||C(S);ba.hasB&&(I.push(V),Q=Q||C(V));ba.hasB&&ba.b||(L=!0)}}O._extremes[B._id]=w.findExtremes(B,I,{tozero:L,padded:Q})}}function d(B,A){A=A._id.charAt(0);var D={},C,v,y=Infinity,F=-Infinity;for(C=0;C<B.length;C++){var J=B[C];for(v=0;v<J.length;v++){var K=J[v].p;e(K)&&(y=Math.min(y,K),F=Math.max(F,K))}}var M=
1E4/(F-y);F=D.round=function(Z){return String(Math.round(M*(Z-y)))};for(C=0;C<B.length;C++){J=B[C];J[0].t.extents=D;K=J[0].t.poffset;var H=Array.isArray(K);for(v=0;v<J.length;v++){var O=J[v],I=O[A]-O.w/2;if(e(I)){var L=O[A]+O.w/2,Q=F(O.p);D[Q]=D[Q]?[Math.min(I,D[Q][0]),Math.max(L,D[Q][1])]:[I,L]}O.p0=O.p+(H?K[v]:K);O.p1=O.p0+O.w;O.s0=O.b;O.s1=O.s0+O.s}}}var e=b("fast-isnumeric"),f=b("../../lib").isArrayOrTypedArray,q=b("../../constants/numerical").BADNUM,t=b("../../registry"),w=b("../../plots/cartesian/axes"),
x=b("../../plots/cartesian/constraints").getAxisGroup,z=b("./sieve.js");N.exports={crossTraceCalc:function(B,A){var D=A.xaxis;A=A.yaxis;for(var C=B._fullLayout,v=B._fullData,y=B.calcdata,F=[],J=[],K=0;K<v.length;K++){var M=v[K];if(!0===M.visible&&t.traceIs(M,"bar")&&M.xaxis===D._id&&M.yaxis===A._id&&("h"===M.orientation?F.push(y[K]):J.push(y[K]),M._computePh)){M=B.calcdata[K];for(var H=0;H<M.length;H++)"function"===typeof M[H].ph0&&(M[H].ph0=M[H].ph0()),"function"===typeof M[H].ph1&&(M[H].ph1=M[H].ph1())}}C=
{xCat:"category"===D.type||"multicategory"===D.type,yCat:"category"===A.type||"multicategory"===A.type,mode:C.barmode,norm:C.barnorm,gap:C.bargap,groupgap:C.bargroupgap};p(B,D,A,J,C);p(B,A,D,F,C)},setGroupPositions:p}},{"../../constants/numerical":779,"../../lib":803,"../../plots/cartesian/axes":854,"../../plots/cartesian/constraints":862,"../../registry":931,"./sieve.js":954,"fast-isnumeric":249}],945:[function(b,N,G){function p(e,f,q,t){e=f.orientation;e=l(q,f[{v:"x",h:"y"}[e]+"axis"])+e;var w=
q._alignmentOpts||{};q=t("alignmentgroup");var x=w[e];x||(x=w[e]={});(e=x[q])?e.traces.push(f):e=x[q]={traces:[f],alignmentIndex:Object.keys(x).length,offsetGroups:{}};t=t("offsetgroup");e=e.offsetGroups;q=e[t];t&&(q||(q=e[t]={offsetIndex:Object.keys(e).length}),f._offsetIndex=q.offsetIndex)}function n(e,f,q,t,w,x){x=x||{};f=!1!==x.moduleHasSelected;var z=!1!==x.moduleHasUnselected,B=!1!==x.moduleHasConstrain,A=!1!==x.moduleHasCliponaxis,D=!1!==x.moduleHasTextangle,C=!1!==x.moduleHasInsideanchor,
v=!!x.hasPathbar,y=Array.isArray(w)||"auto"===w;x=y||"inside"===w;w=y||"outside"===w;if(x||w)q=d(t,"textfont",q.font),y=k.extendFlat({},q),(e=!(e.textfont&&e.textfont.color))&&delete y.color,d(t,"insidetextfont",y),v&&(v=k.extendFlat({},q),e&&delete v.color,d(t,"pathbar.textfont",v)),w&&d(t,"outsidetextfont",q),f&&t("selected.textfont.color"),z&&t("unselected.textfont.color"),B&&t("constraintext"),A&&t("cliponaxis"),D&&t("textangle"),t("texttemplate");x&&C&&t("insidetextanchor")}var k=b("../../lib"),
m=b("../../components/color"),a=b("../../registry"),g=b("../scatter/xy_defaults"),h=b("../scatter/period_defaults"),r=b("./style_defaults"),l=b("../../plots/cartesian/constraints").getAxisGroup,c=b("./attributes"),d=k.coerceFont;N.exports={supplyDefaults:function(e,f,q,t){function w(z,B){return k.coerce(e,f,c,z,B)}if(g(e,f,t,w)){h(e,f,t,w);w("xhoverformat");w("yhoverformat");w("orientation",f.x&&!f.y?"h":"v");w("base");w("offset");w("width");w("text");w("hovertext");w("hovertemplate");var x=w("textposition");
n(e,f,t,w,x,{moduleHasSelected:!0,moduleHasUnselected:!0,moduleHasConstrain:!0,moduleHasCliponaxis:!0,moduleHasTextangle:!0,moduleHasInsideanchor:!0});r(e,f,w,q,t);q=(f.marker.line||{}).color;t=a.getComponentMethod("errorbars","supplyDefaults");t(e,f,q||m.defaultLine,{axis:"y"});t(e,f,q||m.defaultLine,{axis:"x",inherit:"y"});k.coerceSelectionMarkerOpacity(f,w)}else f.visible=!1},crossTraceDefaults:function(e,f){function q(z){return k.coerce(w._input,w,c,z)}if("group"===f.barmode)for(var t=0;t<e.length;t++){var w=
e[t];if("bar"===w.type){var x=w._input;p(x,w,f,q)}}},handleGroupingDefaults:p,handleText:n}},{"../../components/color":666,"../../lib":803,"../../plots/cartesian/constraints":862,"../../registry":931,"../scatter/period_defaults":1238,"../scatter/xy_defaults":1245,"./attributes":941,"./style_defaults":956}],946:[function(b,N,G){N.exports=function(p,n,k){p.x="xVal"in n?n.xVal:n.x;p.y="yVal"in n?n.yVal:n.y;n.xa&&(p.xaxis=n.xa);n.ya&&(p.yaxis=n.ya);"h"===k.orientation?(p.label=p.y,p.value=p.x):(p.label=
p.x,p.value=p.y);return p}},{}],947:[function(b,N,G){var p=b("fast-isnumeric"),n=b("tinycolor2"),k=b("../../lib").isArrayOrTypedArray;G.coerceString=function(m,a,g){if("string"===typeof a){if(a||!m.noBlank)return a}else if(("number"===typeof a||!0===a)&&!m.strict)return String(a);return void 0!==g?g:m.dflt};G.coerceNumber=function(m,a,g){if(p(a)){a=+a;var h=m.min,r=m.max;if(!(void 0!==h&&a<h||void 0!==r&&a>r))return a}return void 0!==g?g:m.dflt};G.coerceColor=function(m,a,g){return n(a).isValid()?
a:void 0!==g?g:m.dflt};G.coerceEnumerated=function(m,a,g){m.coerceNumber&&(a=+a);return-1!==m.values.indexOf(a)?a:void 0!==g?g:m.dflt};G.getValue=function(m,a){var g;Array.isArray(m)?a<m.length&&(g=m[a]):g=m;return g};G.getLineWidth=function(m,a){return 0<a.mlw?a.mlw:k(m.marker.line.width)?0:m.marker.line.width}},{"../../lib":803,"fast-isnumeric":249,tinycolor2:598}],948:[function(b,N,G){function p(c,d,e,f,q){function t(T){return T[O]+-1*T.w/2}function w(T){return T[O]+1*T.w/2}function x(T,fa,W){q.finiteRange&&
(W=0);return k.inbox(T-M,fa-M,W+Math.min(1,Math.abs(fa-T)/S)-1)}function z(T){return x(ba(T),V(T),J)}function B(T){var fa=T[I];F&&(T=Math.abs(T.rawS)||0,0<H?fa+=T:0>H&&(fa-=T));return fa}function A(T){var fa=H,W=T.b;T=B(T);return k.inbox(W-fa,T-fa,J+(T-fa)/(T-W)-1)}var D=c.cd,C=D[0].trace,v=D[0].t,y="closest"===f,F="waterfall"===C.type,J=c.maxHoverDistance,K=c.maxSpikeDistance;if("h"===C.orientation){var M=e;var H=d;var O="y";var I="x";var L=A;var Q=z}else M=d,H=e,O="x",I="y",Q=A,L=z;d=C[O+"period"];
var Z=y||d,ba=y?t:d?function(T){return T.p-(T[O+"End"]-T[O+"Start"])/2}:function(T){return Math.min(t(T),T.p-v.bardelta/2)},V=y?w:d?function(T){return T.p+(T[O+"End"]-T[O+"Start"])/2}:function(T){return Math.max(w(T),T.p+v.bardelta/2)};d=c[O+"a"];e=c[I+"a"];var S=Math.abs(d.r2c(d.range[1])-d.r2c(d.range[0]));f=k.getDistanceFunction(f,L,Q,function(T){return(L(T)+Q(T))/2});k.getClosest(D,f,c);if(!1!==c.index&&D[c.index].p!==l)return Z||(ba=function(T){return Math.min(t(T),T.p-v.bargroupwidth/2)},V=
function(T){return Math.max(w(T),T.p+v.bargroupwidth/2)}),D=D[c.index],f=C.base?D.b+D.s:D.s,c[I+"0"]=c[I+"1"]=e.c2p(D[I],!0),c[I+"LabelVal"]=f,f=v.extents[v.extents.round(D.p)],c[O+"0"]=d.c2p(y?ba(D):f[0],!0),c[O+"1"]=d.c2p(y?V(D):f[1],!0),c[O+"LabelVal"]=void 0!==D.orig_p?D.orig_p:D.p,c.labelLabel=r(d,c[O+"LabelVal"],C[O+"hoverformat"]),c.valueLabel=r(e,c[I+"LabelVal"],C[I+"hoverformat"]),c.baseLabel=r(e,D.b,C[I+"hoverformat"]),c.spikeDistance=(function(T){var fa=H,W=T.b;T=B(T);return k.inbox(W-
fa,T-fa,K+(T-fa)/(T-W)-1)}(D)+function(T){return x(t(T),w(T),K)}(D))/2,c[O+"Spike"]=d.c2p(D.p,!0),g(D,C,c),c.hovertemplate=C.hovertemplate,c}function n(c,d){var e=d.mcc||c.marker.color,f=d.mlcc||c.marker.line.color;c=h(c,d);if(a.opacity(e))return e;if(a.opacity(f)&&c)return f}var k=b("../../components/fx"),m=b("../../registry"),a=b("../../components/color"),g=b("../../lib").fillText,h=b("./helpers").getLineWidth,r=b("../../plots/cartesian/axes").hoverLabelText,l=b("../../constants/numerical").BADNUM;
N.exports={hoverPoints:function(c,d,e,f,q){if(c=p(c,d,e,f,q))return e=c.cd,d=e[0].trace,e=e[c.index],c.color=n(d,e),m.getComponentMethod("errorbars","hoverInfo")(e,d,c),[c]},hoverOnBars:p,getTraceColor:n}},{"../../components/color":666,"../../components/fx":706,"../../constants/numerical":779,"../../lib":803,"../../plots/cartesian/axes":854,"../../registry":931,"./helpers":947}],949:[function(b,N,G){N.exports={attributes:b("./attributes"),layoutAttributes:b("./layout_attributes"),supplyDefaults:b("./defaults").supplyDefaults,
crossTraceDefaults:b("./defaults").crossTraceDefaults,supplyLayoutDefaults:b("./layout_defaults"),calc:b("./calc"),crossTraceCalc:b("./cross_trace_calc").crossTraceCalc,colorbar:b("../scatter/marker_colorbar"),arraysToCalcdata:b("./arrays_to_calcdata"),plot:b("./plot").plot,style:b("./style").style,styleOnSelect:b("./style").styleOnSelect,hoverPoints:b("./hover").hoverPoints,eventData:b("./event_data"),selectPoints:b("./select"),moduleType:"trace",name:"bar",basePlotModule:b("../../plots/cartesian"),
categories:"bar-like cartesian svg bar oriented errorBarsOK showLegend zoomScale".split(" "),animatable:!0,meta:{}}},{"../../plots/cartesian":868,"../scatter/marker_colorbar":1236,"./arrays_to_calcdata":940,"./attributes":941,"./calc":942,"./cross_trace_calc":944,"./defaults":945,"./event_data":946,"./hover":948,"./layout_attributes":950,"./layout_defaults":951,"./plot":952,"./select":953,"./style":955}],950:[function(b,N,G){N.exports={barmode:{valType:"enumerated",values:["stack","group","overlay",
"relative"],dflt:"group",editType:"calc"},barnorm:{valType:"enumerated",values:["","fraction","percent"],dflt:"",editType:"calc"},bargap:{valType:"number",min:0,max:1,editType:"calc"},bargroupgap:{valType:"number",min:0,max:1,dflt:0,editType:"calc"}}},{}],951:[function(b,N,G){var p=b("../../registry"),n=b("../../plots/cartesian/axes"),k=b("../../lib"),m=b("./layout_attributes");N.exports=function(a,g,h){for(var r=!1,l=!1,c=!1,d={},e=k.coerce(a,g,m,"barmode",void 0),f=0;f<h.length;f++){var q=h[f];
if(p.traceIs(q,"bar")&&q.visible){r=!0;if("group"===e){var t=q.xaxis+q.yaxis;d[t]&&(c=!0);d[t]=!0}q.visible&&"histogram"===q.type&&"category"!==n.getFromId({_fullLayout:g},q["v"===q.orientation?"xaxis":"yaxis"]).type&&(l=!0)}}r?("overlay"!==e&&k.coerce(a,g,m,"barnorm",void 0),k.coerce(a,g,m,"bargap",l&&!c?0:.2),k.coerce(a,g,m,"bargroupgap",void 0)):delete g.barmode}},{"../../lib":803,"../../plots/cartesian/axes":854,"../../registry":931,"./layout_attributes":950}],952:[function(b,N,G){function p(H){return H.id}
function n(H,O,I,L){var Q=[],Z=[],ba=L?O:I;O=L?I:O;Q[0]=ba.c2p(H.s0,!0);Z[0]=O.c2p(H.p0,!0);Q[1]=ba.c2p(H.s1,!0);Z[1]=O.c2p(H.p1,!0);return L?[Q,Z]:[Z,Q]}function k(H,O,I,L){if(!O.uniformtext.mode&&I&&0<I.duration){var Q;L&&(Q=L());return H.transition().duration(I.duration).ease(I.easing).each("end",function(){Q&&Q()}).each("interrupt",function(){Q&&Q()})}return H}function m(H,O,I,L,Q,Z,ba,V,S,T,fa){function W(za,Ha,Wa){return q.ensureSingle(za,"text").text(Ha).attr({"class":"bartext bartext-"+wa,
"text-anchor":"middle","data-notex":1}).call(x.font,Wa).call(t.convertToTspans,H)}var aa=O.xaxis,ja=O.yaxis;O=H._fullLayout;var ma=L[0].trace,ia="h"===ma.orientation,ra=r(O,L,Q,aa,ja);var wa=l(ma,Q);var pa=L[Q],la=!("stack"===T.mode||"relative"===T.mode)||pa._outmost;if(ra&&"none"!==wa&&(!pa.isBlank&&Z!==ba&&V!==S||"auto"!==wa&&"inside"!==wa)){var ka=O.font;L=C.getBarColor(L[Q],ma);L=C.getInsideTextFont(ma,Q,ka,L);Q=C.getOutsideTextFont(ma,Q,ka);ka=I.datum();ia?"log"===aa.type&&0>=ka.s0&&(Z=aa.range[0]<
aa.range[1]?0:aa._length):"log"===ja.type&&0>=ka.s0&&(V=ja.range[0]<ja.range[1]?ja._length:0);aa=Math.abs(ba-Z)-2*M;ja=Math.abs(S-V)-2*M;"outside"===wa&&(la||pa.hasB||(wa="inside"));if("auto"===wa)if(la){wa="inside";var na=q.ensureUniformFontSize(H,L);var oa=W(I,ra,na);var sa=x.bBox(oa.node());la=sa.width;ka=sa.height;0<la&&0<ka&&(la<=aa&&ka<=ja||la<=ja&&ka<=aa||(ia?aa>=ja/ka*la:ja>=aa/la*ka))?wa="inside":(wa="outside",oa.remove(),oa=null)}else wa="inside";if(!oa&&(na=q.ensureUniformFontSize(H,"outside"===
wa?Q:L),oa=W(I,ra,na),I=oa.attr("transform"),oa.attr("transform",""),sa=x.bBox(oa.node()),la=sa.width,ka=sa.height,oa.attr("transform",I),0>=la||0>=ka)){oa.remove();return}I=ma.textangle;"outside"===wa?(ra="both"===ma.constraintext||"outside"===ma.constraintext,Z=h(Z,ba,V,S,sa,{isHorizontal:ia,constrained:ra,angle:I})):(ra="both"===ma.constraintext||"inside"===ma.constraintext,Z=g(Z,ba,V,S,sa,{isHorizontal:ia,constrained:ra,angle:I,anchor:ma.insidetextanchor}));Z.fontSize=na.size;A(ma.type,Z,O);pa.transform=
Z;k(oa,O,T,fa).attr("transform",q.getTextTransform(Z))}else I.select("text").remove()}function a(H,O){var I=Math.PI/180*O;O=Math.abs(Math.sin(I));I=Math.abs(Math.cos(I));return{x:H.width*I+H.height*O,y:H.width*O+H.height*I}}function g(H,O,I,L,Q,Z){var ba=!!Z.isHorizontal,V=!!Z.constrained,S=Z.angle||0,T=Z.anchor||"end",fa="end"===T;T="start"===T;var W=((Z.leftToRight||0)+1)/2,aa=1-W,ja=Q.width,ma=Q.height,ia=Math.abs(O-H),ra=Math.abs(L-I);Z=ia>2*M&&ra>2*M?M:0;ia-=2*Z;ra-=2*Z;var wa="auto"===S?0:S;
"auto"!==S||ja<=ia&&ma<=ra||!(ja>ia||ma>ra)||(ja>ra||ma>ia)&&ja<ma===ia<ra||(wa+=90);ja=a(Q,wa);S=1;V&&(S=Math.min(1,ia/ja.x,ra/ja.y));V=Q.left*aa+Q.right*W;Q=(Q.top+Q.bottom)/2;W=(H+M)*aa+(O-M)*W;aa=(I+L)/2;ra=ia=0;if(T||fa)fa=(ba?ja.x:ja.y)/2,ja=ba?H<O?1:-1:I<L?1:-1,ba?T?(W=H+ja*Z,ia=-ja*fa):(W=O-ja*Z,ia=ja*fa):T?(aa=I+ja*Z,ra=-ja*fa):(aa=L-ja*Z,ra=ja*fa);return{textX:V,textY:Q,targetX:W,targetY:aa,anchorX:ia,anchorY:ra,scale:S,rotate:wa}}function h(H,O,I,L,Q,Z){var ba=!!Z.isHorizontal,V=!!Z.constrained,
S=Z.angle||0,T=Q.width,fa=Q.height,W=Math.abs(O-H),aa=Math.abs(L-I);Z=ba?aa>2*M?M:0:W>2*M?M:0;var ja=1;V&&(ja=ba?Math.min(1,aa/fa):Math.min(1,W/T));V="auto"===S?0:S;S=a(Q,V);S=(ba?S.x:S.y)/2;T=(Q.left+Q.right)/2;Q=(Q.top+Q.bottom)/2;fa=(H+O)/2;W=(I+L)/2;var ma=aa=0;H=ba?O<H?1:-1:I<L?1:-1;ba?(fa=O-H*Z,aa=H*S):(W=L+H*Z,ma=-H*S);return{textX:T,textY:Q,targetX:fa,targetY:W,anchorX:aa,anchorY:ma,scale:ja,rotate:V}}function r(H,O,I,L,Q){var Z=O[0].trace;H=Z.texttemplate?c(H,O,I,L,Q):Z.textinfo?d(O,I,L,
Q):v.getValue(Z.text,I);return v.coerceString(F,H)}function l(H,O){H=v.getValue(H.textposition,O);return v.coerceEnumerated(J,H)}function c(H,O,I,L,Q){function Z(ma){return B(ja,ja.c2l(ma),!0).text}var ba=O[0].trace,V=q.castOption(ba,I,"texttemplate");if(!V)return"";var S="waterfall"===ba.type,T="funnel"===ba.type;if("h"===ba.orientation){var fa="y";var W=Q;var aa="x";var ja=L}else fa="x",W=L,aa="y",ja=Q;I=O[I];O={};O.label=I.p;O.labelLabel=O[fa+"Label"]=B(W,W.c2l(I.p),!0).text;fa=q.castOption(ba,
I.i,"text");if(0===fa||fa)O.text=fa;O.value=I.s;O.valueLabel=O[aa+"Label"]=Z(I.s);aa={};K(aa,ba,I.i);S&&(O.delta=+I.rawS||I.s,O.deltaLabel=Z(O.delta),O.final=I.v,O.finalLabel=Z(O.final),O.initial=O.final-O.delta,O.initialLabel=Z(O.initial));T&&(O.value=I.s,O.valueLabel=Z(O.value),O.percentInitial=I.begR,O.percentInitialLabel=q.formatPercent(I.begR),O.percentPrevious=I.difR,O.percentPreviousLabel=q.formatPercent(I.difR),O.percentTotal=I.sumR,O.percenTotalLabel=q.formatPercent(I.sumR));if(S=q.castOption(ba,
I.i,"customdata"))O.customdata=S;return q.texttemplateString(V,O,H._d3locale,aa,O,ba._meta||{})}function d(H,O,I,L){function Q(ja){return B(ba?I:L,+ja,!0).text}var Z=H[0].trace,ba="h"===Z.orientation,V="waterfall"===Z.type,S="funnel"===Z.type,T=H[O],fa=Z.textinfo.split("+"),W=[],aa=function(ja){return-1!==fa.indexOf(ja)};aa("label")&&W.push(B(ba?L:I,H[O].p,!0).text);aa("text")&&(H=q.castOption(Z,T.i,"text"),(0===H||H)&&W.push(H));V&&(V=+T.rawS||T.s,H=T.v,O=H-V,aa("initial")&&W.push(Q(O)),aa("delta")&&
W.push(Q(V)),aa("final")&&W.push(Q(H)));S&&(aa("value")&&W.push(Q(T.s)),S=0,aa("percent initial")&&S++,aa("percent previous")&&S++,aa("percent total")&&S++,S=1<S,aa("percent initial")&&(H=q.formatPercent(T.begR),S&&(H+=" of initial"),W.push(H)),aa("percent previous")&&(H=q.formatPercent(T.difR),S&&(H+=" of previous"),W.push(H)),aa("percent total")&&(H=q.formatPercent(T.sumR),S&&(H+=" of total"),W.push(H)));return W.join("\x3cbr\x3e")}var e=b("@plotly/d3"),f=b("fast-isnumeric"),q=b("../../lib"),t=
b("../../lib/svg_text_utils"),w=b("../../components/color"),x=b("../../components/drawing"),z=b("../../registry"),B=b("../../plots/cartesian/axes").tickText;G=b("./uniform_text");var A=G.recordMinTextSize,D=G.clearMinTextSize,C=b("./style"),v=b("./helpers");G=b("./constants");var y=b("./attributes"),F=y.text,J=y.textposition,K=b("../../components/fx/helpers").appendArrayPointValue,M=G.TEXTPAD;N.exports={plot:function(H,O,I,L,Q,Z){var ba=O.xaxis,V=O.yaxis,S=H._fullLayout;Q||(Q={mode:S.barmode,norm:S.barmode,
gap:S.bargap,groupgap:S.bargroupgap},D("bar",S));I=q.makeTraceGroups(L,I,"trace bars").each(function(T){var fa=e.select(this),W=T[0].trace,aa="funnel"===W.type,ja="bar"===W.type||aa,ma=0;"waterfall"===W.type&&W.connector.visible&&"between"===W.connector.mode&&(ma=W.connector.line.width/2);var ia="h"===W.orientation,ra=Q&&0<Q.duration;aa=q.ensureSingle(fa,"g","points");var wa=W.ids?p:void 0;aa=aa.selectAll("g.point").data(q.identity,wa);aa.enter().append("g").classed("point",!0);aa.exit().remove();
aa.each(function(pa,la){function ka(hb){var ub=e.round(sb/2%1,2);return 0===Q.gap&&0===Q.groupgap?e.round(Math.round(hb)-ub,2):hb}function na(hb,ub,pb){return pb&&hb===ub?hb:2<=Math.abs(hb-ub)?ka(hb):hb>ub?Math.ceil(hb):Math.floor(hb)}var oa=e.select(this),sa=n(pa,ba,V,ia),za=sa[0][0],Ha=sa[0][1],Wa=sa[1][0];sa=sa[1][1];var Za=0===(ia?Ha-za:sa-Wa);Za&&ja&&v.getLineWidth(W,pa)&&(Za=!1);Za||(Za=!f(za)||!f(Ha)||!f(Wa)||!f(sa));(pa.isBlank=Za)&&(ia?Ha=za:sa=Wa);ma&&!Za&&(ia?(za-=(za<Ha?1:-1)*ma,Ha+=(za<
Ha?1:-1)*ma):(Wa-=(Wa<sa?1:-1)*ma,sa+=(Wa<sa?1:-1)*ma));if("waterfall"===W.type){if(!Za){var bb=W[pa.dir].marker;var sb=bb.line.width;bb=bb.color}}else sb=v.getLineWidth(W,pa),bb=pa.mc||W.marker.color;H._context.staticPlot||(bb=1>w.opacity(bb)||.01<sb?ka:na,za=bb(za,Ha,ia),Ha=bb(Ha,za,ia),Wa=bb(Wa,sa,!ia),sa=bb(sa,Wa,!ia));bb=k(q.ensureSingle(oa,"path"),S,Q,Z);bb.style("vector-effect","non-scaling-stroke").attr("d",isNaN((Ha-za)*(sa-Wa))||Za&&H._context.staticPlot?"M0,0Z":"M"+za+","+Wa+"V"+sa+"H"+
Ha+"V"+Wa+"Z").call(x.setClipUrl,O.layerClipId,H);!S.uniformtext.mode&&ra&&(Za=x.makePointStyleFns(W),x.singlePointStyle(pa,bb,W,Za,H));m(H,O,oa,T,la,za,Ha,Wa,sa,Q,Z);O.layerClipId&&x.hideOutsideRangePoint(pa,oa.select("text"),ba,V,W.xcalendar,W.ycalendar)});x.setClipUrl(fa,!1===W.cliponaxis?null:O.layerClipId,H)});z.getComponentMethod("errorbars","plot")(H,I,O,Q)},toMoveInsideBar:g}},{"../../components/color":666,"../../components/drawing":688,"../../components/fx/helpers":702,"../../lib":803,"../../lib/svg_text_utils":829,
"../../plots/cartesian/axes":854,"../../registry":931,"./attributes":941,"./constants":943,"./helpers":947,"./style":955,"./uniform_text":957,"@plotly/d3":58,"fast-isnumeric":249}],953:[function(b,N,G){N.exports=function(p,n){var k=p.cd,m=p.xaxis,a=p.yaxis,g=k[0].trace,h="funnel"===g.type;g="h"===g.orientation;var r=[],l;if(!1===n)for(l=0;l<k.length;l++)k[l].selected=0;else for(l=0;l<k.length;l++){var c=k[l];if("ct"in c)var d=c.ct;else{var e=c,f=m,q=a;d=g;var t=h,w=f.c2p(d?e.s0:e.p0,!0);f=f.c2p(d?
e.s1:e.p1,!0);var x=q.c2p(d?e.p0:e.s0,!0);e=q.c2p(d?e.p1:e.s1,!0);d=t?[(w+f)/2,(x+e)/2]:d?[f,(x+e)/2]:[(w+f)/2,e]}n.contains(d,!1,l,p)?(r.push({pointNumber:l,x:m.c2d(c.x),y:a.c2d(c.y)}),c.selected=1):c.selected=0}return r}},{}],954:[function(b,N,G){function p(m,a){this.traces=m;this.sepNegVal=a.sepNegVal;this.overlapNoMerge=a.overlapNoMerge;for(var g=Infinity,h=[],r=0;r<m.length;r++){for(var l=m[r],c=0;c<l.length;c++){var d=l[c];d.p!==k&&h.push(d.p)}l[0]&&l[0].width1&&(g=Math.min(l[0].width1,g))}this.positions=
h;m=n(h);this.distinctPositions=m.vals;this.minDiff=1===m.vals.length&&Infinity!==g?g:Math.min(m.minDiff,g);a=(a.posAxis||{}).type;if("category"===a||"multicategory"===a)this.minDiff=1;this.binWidth=this.minDiff;this.bins={}}N.exports=p;var n=b("../../lib").distinctVals,k=b("../../constants/numerical").BADNUM;p.prototype.put=function(m,a){m=this.getLabel(m,a);var g=this.bins[m]||0;this.bins[m]=g+a;return g};p.prototype.get=function(m,a){m=this.getLabel(m,a);return this.bins[m]||0};p.prototype.getLabel=
function(m,a){return(0>a&&this.sepNegVal?"v":"^")+(this.overlapNoMerge?m:Math.round(m/this.binWidth))}},{"../../constants/numerical":779,"../../lib":803}],955:[function(b,N,G){function p(z,B,A){z.selectAll("text").each(function(D){var C=r.select(this);D=d.ensureUniformFontSize(A,k(C,D,B,A));c.font(C,D)})}function n(z,B,A){z.each(function(D){var C=r.select(this);if(D.selected){D=d.ensureUniformFontSize(A,k(C,D,B,A));var v=B.selected.textfont&&B.selected.textfont.color;v&&(D.color=v);c.font(C,D)}else c.selectedTextStyle(C,
B)})}function k(z,B,A,D){D=D._fullLayout.font;var C=A.textfont;z.classed("bartext-inside")?(z=h(B,A),C=m(A,B.i,D,z)):z.classed("bartext-outside")&&(C=a(A,B.i,D));return C}function m(z,B,A,D){A=g(q,z.textfont,B,A);if(void 0===z._input.textfont||void 0===z._input.textfont.color||Array.isArray(z.textfont.color)&&void 0===z.textfont.color[B])A={color:l.contrast(D),family:A.family,size:A.size};return g(t,z.insidetextfont,B,A)}function a(z,B,A){A=g(q,z.textfont,B,A);return g(w,z.outsidetextfont,B,A)}function g(z,
B,A,D){B=B||{};var C=x.getValue(B.family,A),v=x.getValue(B.size,A);B=x.getValue(B.color,A);return{family:x.coerceString(z.family,C,D.family),size:x.coerceNumber(z.size,v,D.size),color:x.coerceColor(z.color,B,D.color)}}function h(z,B){return"waterfall"===B.type?B[z.dir].marker.color:z.mcc||z.mc||B.marker.color}var r=b("@plotly/d3"),l=b("../../components/color"),c=b("../../components/drawing"),d=b("../../lib"),e=b("../../registry"),f=b("./uniform_text").resizeText;G=b("./attributes");var q=G.textfont,
t=G.insidetextfont,w=G.outsidetextfont,x=b("./helpers");N.exports={style:function(z){var B=r.select(z).selectAll("g.barlayer").selectAll("g.trace");f(z,B,"bar");var A=B.size(),D=z._fullLayout;B.style("opacity",function(C){return C[0].trace.opacity}).each(function(C){("stack"===D.barmode&&1<A||0===D.bargap&&0===D.bargroupgap&&!C[0].trace.marker.line.width)&&r.select(this).attr("shape-rendering","crispEdges")});B.selectAll("g.points").each(function(C){var v=r.select(this);C=C[0].trace;c.pointStyle(v.selectAll("path"),
C,z);p(v,C,z)});e.getComponentMethod("errorbars","style")(B)},styleTextPoints:p,styleOnSelect:function(z,B,A){B=B[0].trace;B.selectedpoints?(c.selectedPointStyle(A.selectAll("path"),B),n(A.selectAll("text"),B,z)):(c.pointStyle(A.selectAll("path"),B,z),p(A,B,z),e.getComponentMethod("errorbars","style")(A))},getInsideTextFont:m,getOutsideTextFont:a,getBarColor:h,resizeText:f}},{"../../components/color":666,"../../components/drawing":688,"../../lib":803,"../../registry":931,"./attributes":941,"./helpers":947,
"./uniform_text":957,"@plotly/d3":58}],956:[function(b,N,G){var p=b("../../components/color"),n=b("../../components/colorscale/helpers").hasColorscale,k=b("../../components/colorscale/defaults"),m=b("../../lib").coercePattern;N.exports=function(a,g,h,r,l){r=h("marker.color",r);var c=n(a,"marker");c&&k(a,g,l,h,{prefix:"marker.",cLetter:"c"});h("marker.line.color",p.defaultLine);n(a,"marker.line")&&k(a,g,l,h,{prefix:"marker.line.",cLetter:"c"});h("marker.line.width");h("marker.opacity");m(h,"marker.pattern",
r,c);h("selected.marker.color");h("unselected.marker.color")}},{"../../components/color":666,"../../components/colorscale/defaults":676,"../../components/colorscale/helpers":677,"../../lib":803}],957:[function(b,N,G){var p=b("@plotly/d3"),n=b("../../lib");N.exports={recordMinTextSize:function(k,m,a){if(a.uniformtext.mode){k="_"+k+"Text_minsize";var g=a.uniformtext.minsize,h=m.scale*m.fontSize;m.hide=h<g;a[k]=a[k]||Infinity;m.hide||(a[k]=Math.min(a[k],Math.max(h,g)))}},clearMinTextSize:function(k,
m){m["_"+k+"Text_minsize"]=void 0},resizeText:function(k,m,a){k=k._fullLayout;var g=k["_"+a+"Text_minsize"];if(g){var h="hide"===k.uniformtext.mode;switch(a){case "funnelarea":case "pie":case "sunburst":a="g.slice";break;case "treemap":case "icicle":a="g.slice, g.pathbar";break;default:a="g.points \x3e g.point"}m.selectAll(a).each(function(r){if(r=r.transform)r.scale=h&&r.hide?0:g/r.fontSize,p.select(this).select("text").attr("transform",n.getTextTransform(r))})}}}},{"../../lib":803,"@plotly/d3":58}],
958:[function(b,N,G){G=b("../../plots/template_attributes").hovertemplateAttrs;var p=b("../../lib/extend").extendFlat,n=b("../scatterpolar/attributes");b=b("../bar/attributes");N.exports={r:n.r,theta:n.theta,r0:n.r0,dr:n.dr,theta0:n.theta0,dtheta:n.dtheta,thetaunit:n.thetaunit,base:p({},b.base,{}),offset:p({},b.offset,{}),width:p({},b.width,{}),text:p({},b.text,{}),hovertext:p({},b.hovertext,{}),marker:b.marker,hoverinfo:n.hoverinfo,hovertemplate:G(),selected:b.selected,unselected:b.unselected}},
{"../../lib/extend":793,"../../plots/template_attributes":926,"../bar/attributes":941,"../scatterpolar/attributes":1292}],959:[function(b,N,G){var p=b("../../components/colorscale/helpers").hasColorscale,n=b("../../components/colorscale/calc"),k=b("../bar/arrays_to_calcdata"),m=b("../bar/cross_trace_calc").setGroupPositions,a=b("../scatter/calc_selection"),g=b("../../registry").traceIs,h=b("../../lib").extendFlat;N.exports={calc:function(r,l){function c(x){var z=l[x];void 0!==z&&(l["_"+x]=Array.isArray(z)?
f.makeCalcdata(l,x):f.d2c(z,l.thetaunit))}var d=r._fullLayout,e=l.subplot,f=d[e].angularaxis;d=d[e].radialaxis.makeCalcdata(l,"r");e=f.makeCalcdata(l,"theta");for(var q=l._length,t=Array(q),w=0;w<q;w++)t[w]={p:e[w],s:d[w]};"linear"===f.type&&(c("width"),c("offset"));p(l,"marker")&&n(r,l,{vals:l.marker.color,containerStr:"marker",cLetter:"c"});p(l,"marker.line")&&n(r,l,{vals:l.marker.line.color,containerStr:"marker.line",cLetter:"c"});k(t,l);a(t,l);return t},crossTraceCalc:function(r,l,c){for(var d=
r.calcdata,e=[],f=0;f<d.length;f++){var q=d[f],t=q[0].trace;!0===t.visible&&g(t,"bar")&&t.subplot===c&&e.push(q)}c=h({},l.radialaxis,{_id:"x"});m(r,l.angularaxis,c,e,{mode:l.barmode,norm:l.barnorm,gap:l.bargap,groupgap:l.bargroupgap})}}},{"../../components/colorscale/calc":674,"../../components/colorscale/helpers":677,"../../lib":803,"../../registry":931,"../bar/arrays_to_calcdata":940,"../bar/cross_trace_calc":944,"../scatter/calc_selection":1220}],960:[function(b,N,G){var p=b("../../lib"),n=b("../scatterpolar/defaults").handleRThetaDefaults,
k=b("../bar/style_defaults"),m=b("./attributes");N.exports=function(a,g,h,r){function l(c,d){return p.coerce(a,g,m,c,d)}n(a,g,r,l)?(l("thetaunit"),l("base"),l("offset"),l("width"),l("text"),l("hovertext"),l("hovertemplate"),k(a,g,l,h,r),p.coerceSelectionMarkerOpacity(g,l)):g.visible=!1}},{"../../lib":803,"../bar/style_defaults":956,"../scatterpolar/defaults":1294,"./attributes":958}],961:[function(b,N,G){var p=b("../../components/fx"),n=b("../../lib"),k=b("../bar/hover").getTraceColor,m=n.fillText,
a=b("../scatterpolar/hover").makeHoverPointText,g=b("../../plots/polar/helpers").isPtInsidePolygon;N.exports=function(h,r,l){var c=h.cd,d=c[0].trace,e=h.subplot,f=e.radialAxis,q=e.vangles,t=q?g:n.isPtInsideSector,w=h.maxHoverDistance,x=e.angularAxis._period||2*Math.PI,z=Math.abs(f.g2p(Math.sqrt(r*r+l*l))),B=Math.atan2(l,r);f.range[0]>f.range[1]&&(B+=Math.PI);p.getClosest(c,function(A){return t(z,B,[A.rp0,A.rp1],[A.thetag0,A.thetag1],q)?w+Math.min(1,Math.abs(A.thetag1-A.thetag0)/x)-1+(A.rp1-z)/(A.rp1-
A.rp0)-1:Infinity},h);if(!1!==h.index)return r=c[h.index],h.x0=h.x1=r.ct[0],h.y0=h.y1=r.ct[1],l=n.extendFlat({},r,{r:r.s,theta:r.p}),m(r,d,h),a(l,d,e,h),h.hovertemplate=d.hovertemplate,h.color=k(d,r),h.xLabelVal=h.yLabelVal=void 0,0>r.s&&(h.idealAlign="left"),[h]}},{"../../components/fx":706,"../../lib":803,"../../plots/polar/helpers":919,"../bar/hover":948,"../scatterpolar/hover":1296}],962:[function(b,N,G){N.exports={moduleType:"trace",name:"barpolar",basePlotModule:b("../../plots/polar"),categories:["polar",
"bar","showLegend"],attributes:b("./attributes"),layoutAttributes:b("./layout_attributes"),supplyDefaults:b("./defaults"),supplyLayoutDefaults:b("./layout_defaults"),calc:b("./calc").calc,crossTraceCalc:b("./calc").crossTraceCalc,plot:b("./plot"),colorbar:b("../scatter/marker_colorbar"),formatLabels:b("../scatterpolar/format_labels"),style:b("../bar/style").style,styleOnSelect:b("../bar/style").styleOnSelect,hoverPoints:b("./hover"),selectPoints:b("../bar/select"),meta:{}}},{"../../plots/polar":920,
"../bar/select":953,"../bar/style":955,"../scatter/marker_colorbar":1236,"../scatterpolar/format_labels":1295,"./attributes":958,"./calc":959,"./defaults":960,"./hover":961,"./layout_attributes":963,"./layout_defaults":964,"./plot":965}],963:[function(b,N,G){N.exports={barmode:{valType:"enumerated",values:["stack","overlay"],dflt:"stack",editType:"calc"},bargap:{valType:"number",dflt:.1,min:0,max:1,editType:"calc"}}},{}],964:[function(b,N,G){var p=b("../../lib"),n=b("./layout_attributes");N.exports=
function(k,m,a){for(var g={},h,r=0;r<a.length;r++)h=a[r],"barpolar"===h.type&&!0===h.visible&&(h=h.subplot,g[h]||(p.coerce(k[h]||{},m[h],n,"barmode",void 0),p.coerce(k[h]||{},m[h],n,"bargap",void 0),g[h]=1))}},{"../../lib":803,"./layout_attributes":963}],965:[function(b,N,G){function p(h){var r=h.cxx,l=h.cyy;return h.vangles?function(c,d,e,f){if(0<m.angleDelta(e,f)){var q=e;e=f}else q=f;f=g.findEnclosingVertexAngles(q,h.vangles)[0];var t=g.findEnclosingVertexAngles(e,h.vangles)[1];return g.pathPolygonAnnulus(c,
d,q,e,[f,(q+e)/2,t],r,l)}:function(c,d,e,f){return m.pathAnnulus(c,d,e,f,r,l)}}var n=b("@plotly/d3"),k=b("fast-isnumeric"),m=b("../../lib"),a=b("../../components/drawing"),g=b("../../plots/polar/helpers");N.exports=function(h,r,l){var c=r.xaxis,d=r.yaxis,e=r.radialAxis,f=r.angularAxis,q=p(r),t=r.layers.frontplot.select("g.barlayer");m.makeTraceGroups(t,l,"trace bars").each(function(){var w=n.select(this),x=m.ensureSingle(w,"g","points").selectAll("g.point").data(m.identity);x.enter().append("g").style("vector-effect",
"non-scaling-stroke").style("stroke-miterlimit",2).classed("point",!0);x.exit().remove();x.each(function(z){var B=n.select(this),A=z.rp0=e.c2p(z.s0),D=z.rp1=e.c2p(z.s1),C=z.thetag0=f.c2g(z.p0),v=z.thetag1=f.c2g(z.p1);if(k(A)&&k(D)&&k(C)&&k(v)&&A!==D&&C!==v){var y=e.c2g(z.s1),F=(C+v)/2;z.ct=[c.c2p(y*Math.cos(F)),d.c2p(y*Math.sin(F))];z=q(A,D,C,v)}else z="M0,0Z";m.ensureSingle(B,"path").attr("d",z)});a.setClipUrl(w,r._hasClipOnAxisFalse?r.clipIds.forTraces:null,h)})}},{"../../components/drawing":688,
"../../lib":803,"../../plots/polar/helpers":919,"@plotly/d3":58,"fast-isnumeric":249}],966:[function(b,N,G){G=b("../scatter/attributes");var p=b("../bar/attributes"),n=b("../../components/color/attributes"),k=b("../../plots/cartesian/axis_format_attributes").axisHoverFormat,m=b("../../plots/template_attributes").hovertemplateAttrs;b=b("../../lib/extend").extendFlat;var a=G.marker,g=a.line;N.exports={y:{valType:"data_array",editType:"calc+clearAxisTypes"},x:{valType:"data_array",editType:"calc+clearAxisTypes"},
x0:{valType:"any",editType:"calc+clearAxisTypes"},y0:{valType:"any",editType:"calc+clearAxisTypes"},dx:{valType:"number",editType:"calc"},dy:{valType:"number",editType:"calc"},xperiod:G.xperiod,yperiod:G.yperiod,xperiod0:G.xperiod0,yperiod0:G.yperiod0,xperiodalignment:G.xperiodalignment,yperiodalignment:G.yperiodalignment,xhoverformat:k("x"),yhoverformat:k("y"),name:{valType:"string",editType:"calc+clearAxisTypes"},q1:{valType:"data_array",editType:"calc+clearAxisTypes"},median:{valType:"data_array",
editType:"calc+clearAxisTypes"},q3:{valType:"data_array",editType:"calc+clearAxisTypes"},lowerfence:{valType:"data_array",editType:"calc"},upperfence:{valType:"data_array",editType:"calc"},notched:{valType:"boolean",editType:"calc"},notchwidth:{valType:"number",min:0,max:.5,dflt:.25,editType:"calc"},notchspan:{valType:"data_array",editType:"calc"},boxpoints:{valType:"enumerated",values:["all","outliers","suspectedoutliers",!1],editType:"calc"},jitter:{valType:"number",min:0,max:1,editType:"calc"},
pointpos:{valType:"number",min:-2,max:2,editType:"calc"},boxmean:{valType:"enumerated",values:[!0,"sd",!1],editType:"calc"},mean:{valType:"data_array",editType:"calc"},sd:{valType:"data_array",editType:"calc"},orientation:{valType:"enumerated",values:["v","h"],editType:"calc+clearAxisTypes"},quartilemethod:{valType:"enumerated",values:["linear","exclusive","inclusive"],dflt:"linear",editType:"calc"},width:{valType:"number",min:0,dflt:0,editType:"calc"},marker:{outliercolor:{valType:"color",dflt:"rgba(0, 0, 0, 0)",
editType:"style"},symbol:b({},a.symbol,{arrayOk:!1,editType:"plot"}),opacity:b({},a.opacity,{arrayOk:!1,dflt:1,editType:"style"}),size:b({},a.size,{arrayOk:!1,editType:"calc"}),color:b({},a.color,{arrayOk:!1,editType:"style"}),line:{color:b({},g.color,{arrayOk:!1,dflt:n.defaultLine,editType:"style"}),width:b({},g.width,{arrayOk:!1,dflt:0,editType:"style"}),outliercolor:{valType:"color",editType:"style"},outlierwidth:{valType:"number",min:0,dflt:1,editType:"style"},editType:"style"},editType:"plot"},
line:{color:{valType:"color",editType:"style"},width:{valType:"number",min:0,dflt:2,editType:"style"},editType:"plot"},fillcolor:G.fillcolor,whiskerwidth:{valType:"number",min:0,max:1,dflt:.5,editType:"calc"},offsetgroup:p.offsetgroup,alignmentgroup:p.alignmentgroup,selected:{marker:G.selected.marker,editType:"style"},unselected:{marker:G.unselected.marker,editType:"style"},text:b({},G.text,{}),hovertext:b({},G.hovertext,{}),hovertemplate:m({}),hoveron:{valType:"flaglist",flags:["boxes","points"],
dflt:"boxes+points",editType:"style"}}},{"../../components/color/attributes":665,"../../lib/extend":793,"../../plots/cartesian/axis_format_attributes":857,"../../plots/template_attributes":926,"../bar/attributes":941,"../scatter/attributes":1218}],967:[function(b,N,G){function p(x,z,B,A){var D=z+"0"in x;if(z in x||D&&"d"+z in x)return A=B.makeCalcdata(x,z),[e(x,B,z,A).vals,A];A=D?x[z+"0"]:"name"in x&&("category"===B.type||c(x.name)&&-1!==["linear","log"].indexOf(B.type)||f.isDateTime(x.name)&&"date"===
B.type)?x.name:A;z="multicategory"===B.type?B.r2c_just_indices(A):B.d2c(A,0,x[z+"calendar"]);x=x._length;B=Array(x);for(A=0;A<x;A++)B[A]=z;return[B]}function n(x,z){for(var B=x.length,A=Array(B+1),D=0;D<B;D++)A[D]=x[D]-z;A[B]=x[B-1]+z;return A}function k(x){for(var z=Array(x),B=0;B<x;B++)z[B]=[];return z}function m(x,z,B){for(var A in w)f.isArrayOrTypedArray(z[A])&&(Array.isArray(B)?f.isArrayOrTypedArray(z[A][B[0]])&&(x[w[A]]=z[A][B[0]][B[1]]):x[w[A]]=z[A][B])}function a(x,z){if(f.isArrayOrTypedArray(z.selectedpoints))for(var B=
0;B<x.length;B++){for(var A=x[B].pts||[],D={},C=0;C<A.length;C++)D[A[C].i]=C;f.tagSelected(A,z,D)}}function g(x,z){return x.v-z.v}function h(x){return x.v}function r(x,z,B){return 0===B?x.q1:Math.min(x.q1,z[Math.min(f.findBin(2.5*x.q1-1.5*x.q3,z,!0)+1,B-1)])}function l(x,z,B){return 0===B?x.q3:Math.max(x.q3,z[Math.max(f.findBin(2.5*x.q3-1.5*x.q1,z),0)])}var c=b("fast-isnumeric"),d=b("../../plots/cartesian/axes"),e=b("../../plots/cartesian/align_period"),f=b("../../lib"),q=b("../../constants/numerical").BADNUM,
t=f._;N.exports=function(x,z){var B=x._fullLayout,A=d.getFromId(x,z.xaxis||"x"),D=d.getFromId(x,z.yaxis||"y"),C=[],v="violin"===z.type?"_numViolins":"_numBoxes",y,F;if("h"===z.orientation){var J=A;var K="x";A="y";var M=!!z.yperiodalignment}else J=D,K="y",D=A,A="x",M=!!z.xperiodalignment;var H=p(z,A,D,B[v]),O=H[0],I=H[1];D=f.distinctVals(O,D);var L=D.vals;D=D.minDiff/2;H="all"===(z.boxpoints||z.points)?f.identity:function(ja){return ja.v<S.lf||ja.v>S.uf};if(z._hasPreCompStats){var Q=z[K],Z=function(ja){return J.d2c((z[ja]||
[])[y])};L=Infinity;var ba=-Infinity;for(y=0;y<z._length;y++){var V=O[y];if(c(V)){var S={};S.pos=S[A]=V;M&&I&&(S.orig_p=I[y]);S.q1=Z("q1");S.med=Z("median");S.q3=Z("q3");V=[];if(Q&&f.isArrayOrTypedArray(Q[y]))for(F=0;F<Q[y].length;F++){var T=J.d2c(Q[y][F]);T!==q&&(T={v:T,i:[y,F]},m(T,z,[y,F]),V.push(T))}S.pts=V.sort(g);T=S[K]=V.map(h);F=T.length;if(S.med!==q&&S.q1!==q&&S.q3!==q&&S.med>=S.q1&&S.q3>=S.med){var fa=Z("lowerfence");S.lf=fa!==q&&fa<=S.q1?fa:r(S,T,F);fa=Z("upperfence");S.uf=fa!==q&&fa>=
S.q3?fa:l(S,T,F);fa=Z("mean");S.mean=fa!==q?fa:F?f.mean(T,F):(S.q1+S.q3)/2;var W=Z("sd");S.sd=fa!==q&&0<=W?W:F?f.stdev(T,F,S.mean):S.q3-S.q1;S.lo=4*S.q1-3*S.q3;S.uo=4*S.q3-3*S.q1;fa=Z("notchspan");fa=fa!==q&&0<fa?fa:0===F?0:1.57*(S.q3-S.q1)/Math.sqrt(F);S.ln=S.med-fa;S.un=S.med+fa;fa=S.lf;W=S.uf;z.boxpoints&&T.length&&(fa=Math.min(fa,T[0]),W=Math.max(W,T[F-1]));z.notched&&(fa=Math.min(fa,S.ln),W=Math.max(W,S.un));S.min=fa;S.max=W}else f.warn(["Invalid input - make sure that q1 \x3c\x3d median \x3c\x3d q3",
"q1 \x3d "+S.q1,"median \x3d "+S.med,"q3 \x3d "+S.q3].join("\n")),T=S.med!==q?S.med:S.q1!==q?S.q3!==q?(S.q1+S.q3)/2:S.q1:S.q3!==q?S.q3:0,S.med=T,S.q1=S.q3=T,S.lf=S.uf=T,S.mean=S.sd=T,S.ln=S.un=T,S.min=S.max=T;L=Math.min(L,S.min);ba=Math.max(ba,S.max);S.pts2=V.filter(H);C.push(S)}}z._extremes[J._id]=d.findExtremes(J,[L,ba],{padded:!0})}else{M=J.makeCalcdata(z,K);V=n(L,D);I=L.length;ba=k(I);for(y=0;y<z._length;y++)T=M[y],c(T)&&(F=f.findBin(O[y],V),0<=F&&F<I&&(T={v:T,i:y},m(T,z,y),ba[F].push(T)));O=
Infinity;fa=-Infinity;V=z.quartilemethod;W="exclusive"===V;var aa="inclusive"===V;for(y=0;y<I;y++)0<ba[y].length&&(S={},S.pos=S[A]=L[y],V=S.pts=ba[y].sort(g),T=S[K]=V.map(h),F=T.length,S.min=T[0],S.max=T[F-1],S.mean=f.mean(T,F),S.sd=f.stdev(T,F,S.mean),S.med=f.interp(T,.5),F%2&&(W||aa)?(W?(Q=T.slice(0,F/2),Z=T.slice(F/2+1)):aa&&(Q=T.slice(0,F/2+1),Z=T.slice(F/2)),S.q1=f.interp(Q,.5),S.q3=f.interp(Z,.5)):(S.q1=f.interp(T,.25),S.q3=f.interp(T,.75)),S.lf=r(S,T,F),S.uf=l(S,T,F),S.lo=4*S.q1-3*S.q3,S.uo=
4*S.q3-3*S.q1,T=0===F?0:1.57*(S.q3-S.q1)/Math.sqrt(F),S.ln=S.med-T,S.un=S.med+T,O=Math.min(O,S.ln),fa=Math.max(fa,S.un),S.pts2=V.filter(H),C.push(S));z._extremes[J._id]=d.findExtremes(J,z.notched?M.concat([O,fa]):M,{padded:!0})}a(C,z);return 0<C.length?(C[0].t={num:B[v],dPos:D,posLetter:A,valLetter:K,labels:{med:t(x,"median:"),min:t(x,"min:"),q1:t(x,"q1:"),q3:t(x,"q3:"),max:t(x,"max:"),mean:"sd"===z.boxmean?t(x,"mean  :"):t(x,"mean:"),lf:t(x,"lower fence:"),uf:t(x,"upper fence:")}},B[v]++,C):[{t:{empty:!0}}]};
var w={text:"tx",hovertext:"htx"}},{"../../constants/numerical":779,"../../lib":803,"../../plots/cartesian/align_period":851,"../../plots/cartesian/axes":854,"fast-isnumeric":249}],968:[function(b,N,G){function p(g,h,r,l){var c=h.calcdata;h=h._fullLayout;var d=l._id,e=d.charAt(0),f,q,t=[],w=0;for(f=0;f<r.length;f++){var x=c[r[f]];for(q=0;q<x.length;q++)t.push(l.c2l(x[q].pos,!0)),w+=(x[q].pts2||[]).length}if(t.length){f=k.distinctVals(t);if("category"===l.type||"multicategory"===l.type)f.minDiff=1;
t=f.minDiff/2;n.minDtick(l,f.minDiff,f.vals[0],!0);var z=h["violin"===g?"_numViolins":"_numBoxes"],B="group"===h[g+"mode"]&&1<z,A=1-h[g+"gap"];g=1-h[g+"groupgap"];for(f=0;f<r.length;f++){x=c[r[f]];var D=x[0].trace,C=x[0].t;q=D.width;var v=D.side,y,F;if(q){var J=y=F=q/2;var K=0}else J=t,B?(y=m(h,l._id)+D.orientation,F=(y=Object.keys(((h._alignmentOpts[y]||{})[D.alignmentgroup]||{}).offsetGroups||{}).length)||z,K=y?D._offsetIndex:C.num,y=J*A*g/F,K=2*J*(-.5+(K+.5)/F)*A,F=J*A/F):(y=J*A*g,K=0,F=J);C.dPos=
J;C.bPos=K;C.bdPos=y;C.wHover=F;y=K+y;C=!!q;F=(D.boxpoints||D.points)&&0<w;if("positive"===v)v=J*(q?1:.5),q=K;else if("negative"===v){v=K;q=J*(q?1:.5);var M=y}else v=q=J,K=M=y;if(F){J=D.pointpos;F=D.jitter;var H=D.marker.size/2,O=0;if(0<=J+F)if(O=y*(J+F),O>v){C=!0;var I=H;var L=O}else O>K&&(I=H,L=v);O<=v&&(L=v);v=0;if(0>=J-F)if(v=-y*(J-F),v>q){C=!0;var Q=H;var Z=v}else v>M&&(Q=H,Z=q);v<=q&&(Z=q)}else L=v,Z=q;J=Array(x.length);for(q=0;q<x.length;q++)J[q]=x[q].pos;D._extremes[d]=n.findExtremes(l,J,
{padded:C,vpadminus:Z,vpadplus:L,vpadLinearized:!0,ppadminus:{x:Q,y:I}[e],ppadplus:{x:I,y:Q}[e]})}}}var n=b("../../plots/cartesian/axes"),k=b("../../lib"),m=b("../../plots/cartesian/constraints").getAxisGroup,a=["v","h"];N.exports={crossTraceCalc:function(g,h){var r=g.calcdata,l=h.xaxis;h=h.yaxis;for(var c=0;c<a.length;c++){for(var d=a[c],e="h"===d?h:l,f=[],q=0;q<r.length;q++){var t=r[q],w=t[0].t;t=t[0].trace;!0!==t.visible||"box"!==t.type&&"candlestick"!==t.type||w.empty||(t.orientation||"v")!==
d||t.xaxis!==l._id||t.yaxis!==h._id||f.push(q)}p("box",g,f,e)}},setPositionOffset:p}},{"../../lib":803,"../../plots/cartesian/axes":854,"../../plots/cartesian/constraints":862}],969:[function(b,N,G){function p(c,d,e,f){function q(K){var M=0;K&&K.length&&(M+=1,k.isArrayOrTypedArray(K[0])&&K[0].length&&(M+=1));return M}function t(K){return k.validate(c[K],l[K])}var w=e("y"),x=e("x");if("box"===d.type){var z=e("q1"),B=e("median");var A=e("q3");d._hasPreCompStats=z&&z.length&&B&&B.length&&A&&A.length;
A=Math.min(k.minRowLength(z),k.minRowLength(B),k.minRowLength(A))}z=q(w);B=q(x);var D=z&&k.minRowLength(w),C=B&&k.minRowLength(x),v=f.calendar,y={autotypenumbers:f.autotypenumbers};if(d._hasPreCompStats)switch(String(B)+String(z)){case "00":w=t("x0")||t("dx");var F=!t("y0")&&!t("dy")||w?"v":"h";var J=A;break;case "10":F="v";J=Math.min(A,C);break;case "20":F="h";J=Math.min(A,x.length);break;case "01":F="h";J=Math.min(A,D);break;case "02":F="v";J=Math.min(A,w.length);break;case "12":F="v";J=Math.min(A,
C,w.length);break;case "21":F="h";J=Math.min(A,x.length,D);break;case "11":J=0;break;case "22":F=!1;for(J=0;J<x.length;J++)if("category"===r(x[J],v,y)){F=!0;break}if(F)F="v",J=Math.min(A,C,w.length);else{for(J=0;J<w.length;J++)if("category"===r(w[J],v,y)){F=!0;break}F?(F="h",J=Math.min(A,x.length,D)):(F="v",J=Math.min(A,C,w.length))}}else 0<z?(F="v",J=0<B?Math.min(C,D):Math.min(D)):0<B?(F="h",J=Math.min(C)):J=0;J?(d._length=J,w=e("orientation",F),d._hasPreCompStats?"v"===w&&0===B?(e("x0",0),e("dx",
1)):"h"===w&&0===z&&(e("y0",0),e("dy",1)):"v"===w&&0===B?e("x0"):"h"===w&&0===z&&e("y0"),m.getComponentMethod("calendars","handleTraceDefaults")(c,d,["x","y"],f)):d.visible=!1}function n(c,d,e,f){f=f.prefix;c=k.coerce2(c,d,l,"marker.outliercolor");var q=e("marker.line.outliercolor"),t="outliers";if(d._hasPreCompStats)t="all";else if(c||q)t="suspectedoutliers";(f=e(f+"points",t))?(e("jitter","all"===f?.3:0),e("pointpos","all"===f?-1.5:0),e("marker.symbol"),e("marker.opacity"),e("marker.size"),e("marker.color",
d.line.color),e("marker.line.color"),e("marker.line.width"),"suspectedoutliers"===f&&(e("marker.line.outliercolor",d.marker.color),e("marker.line.outlierwidth")),e("selected.marker.color"),e("unselected.marker.color"),e("selected.marker.size"),e("unselected.marker.size"),e("text"),e("hovertext")):delete d.marker;f=e("hoveron");"all"!==f&&-1===f.indexOf("points")||e("hovertemplate");k.coerceSelectionMarkerOpacity(d,e)}var k=b("../../lib"),m=b("../../registry"),a=b("../../components/color"),g=b("../scatter/period_defaults"),
h=b("../bar/defaults").handleGroupingDefaults,r=b("../../plots/cartesian/axis_autotype"),l=b("./attributes");N.exports={supplyDefaults:function(c,d,e,f){function q(x,z){return k.coerce(c,d,l,x,z)}p(c,d,q,f);if(!1!==d.visible){g(c,d,f,q);q("xhoverformat");q("yhoverformat");if(f=d._hasPreCompStats)q("lowerfence"),q("upperfence");q("line.color",(c.marker||{}).color||e);q("line.width");q("fillcolor",a.addOpacity(d.line.color,.5));e=!1;if(f){var t=q("mean"),w=q("sd");t&&t.length&&(e=!0,w&&w.length&&(e=
"sd"))}q("boxmean",e);q("whiskerwidth");q("width");q("quartilemethod");e=!1;f?(f=q("notchspan"))&&f.length&&(e=!0):k.validate(c.notchwidth,l.notchwidth)&&(e=!0);q("notched",e)&&q("notchwidth");n(c,d,q,{prefix:"box"})}},crossTraceDefaults:function(c,d){function e(x){return k.coerce(q._input,q,l,x)}for(var f,q,t=0;t<c.length;t++){q=c[t];var w=q.type;if("box"===w||"violin"===w)f=q._input,"group"===d[w+"mode"]&&h(f,q,d,e)}},handleSampleDefaults:p,handlePointsDefaults:n}},{"../../components/color":666,
"../../lib":803,"../../plots/cartesian/axis_autotype":855,"../../registry":931,"../bar/defaults":945,"../scatter/period_defaults":1238,"./attributes":966}],970:[function(b,N,G){N.exports=function(p,n){n.hoverOnBox&&(p.hoverOnBox=n.hoverOnBox);"xVal"in n&&(p.x=n.xVal);"yVal"in n&&(p.y=n.yVal);n.xa&&(p.xaxis=n.xa);n.ya&&(p.yaxis=n.ya);return p}},{}],971:[function(b,N,G){function p(r,l,c,d){function e(L){return(M(L)+H(L))/2}var f=r.cd,q=r.xa,t=r.ya,w=f[0].trace,x=f[0].t,z="violin"===w.type,B=[];var A=
x.bdPos;var D=x.wHover,C=function(L){return O.c2l(L.pos)+x.bPos-O.c2l(K)};if(z&&"both"!==w.side){if("positive"===w.side){var v=function(L){L=C(L);return a.inbox(L,L+D,I)};var y=A;var F=0}"negative"===w.side&&(v=function(L){L=C(L);return a.inbox(L-D,L,I)},y=0,F=A)}else v=function(L){L=C(L);return a.inbox(L-D,L+D,I)},y=F=A;z=z?function(L){return a.inbox(L.span[0]-J,L.span[1]-J,I)}:function(L){return a.inbox(L.min-J,L.max-J,I)};if("h"===w.orientation){var J=l;var K=c;var M=z;var H=v;c="y";var O=t;l=
"x"}else J=c,K=l,M=v,H=z,c="x",O=q,l="y",q=t;A=Math.min(1,A/Math.abs(O.r2c(O.range[1])-O.r2c(O.range[0])));var I=r.maxHoverDistance-A;A=r.maxSpikeDistance-A;d=a.getDistanceFunction(d,M,H,e);a.getClosest(f,d,r);if(!1===r.index)return[];f=f[r.index];d=w.line.color;t=(w.marker||{}).color;g.opacity(d)&&w.line.width?r.color=d:g.opacity(t)&&w.boxpoints?r.color=t:r.color=w.fillcolor;r[c+"0"]=O.c2p(f.pos+x.bPos-F,!0);r[c+"1"]=O.c2p(f.pos+x.bPos+y,!0);r[c+"LabelVal"]=void 0!==f.orig_p?f.orig_p:f.pos;y=c+"Spike";
r.spikeDistance=e(f)*A/I;r[y]=O.c2p(f.pos,!0);F={};d=["med","q1","q3","min","max"];(w.boxmean||(w.meanline||{}).visible)&&d.push("mean");(w.boxpoints||w.points)&&d.push("lf","uf");for(c=0;c<d.length;c++)A=d[c],A in f&&!(f[A]in F)&&(F[f[A]]=!0,t=f[A],v=q.c2p(t,!0),z=m.extendFlat({},r),z.attr=A,z[l+"0"]=z[l+"1"]=v,z[l+"LabelVal"]=t,z[l+"Label"]=(x.labels?x.labels[A]+" ":"")+k.hoverLabelText(q,t,w[l+"hoverformat"]),z.hoverOnBox=!0,"mean"===A&&"sd"in f&&"sd"===w.boxmean&&(z[l+"err"]=f.sd),r.name="",r.spikeDistance=
void 0,r[y]=void 0,z.hovertemplate=!1,B.push(z));return B}function n(r,l,c){for(var d=r.cd,e=r.xa,f=r.ya,q=d[0].trace,t=e.c2p(l),w=f.c2p(c),x=a.quadrature(function(D){var C=Math.max(3,D.mrc||0);return Math.max(Math.abs(e.c2p(D.x)-t)-C,1-3/C)},function(D){var C=Math.max(3,D.mrc||0);return Math.max(Math.abs(f.c2p(D.y)-w)-C,1-3/C)}),z=!1,B=0;B<d.length;B++){l=d[B];for(var A=0;A<(l.pts||[]).length;A++)c=l.pts[A],c=x(c),c<=r.distance&&(r.distance=c,z=[B,A])}if(!z)return!1;l=d[z[0]];c=l.pts[z[1]];d=e.c2p(c.x,
!0);x=f.c2p(c.y,!0);z=c.mrc||1;r=m.extendFlat({},r,{index:c.i,color:(q.marker||{}).color,name:q.name,x0:d-z,x1:d+z,y0:x-z,y1:x+z,spikeDistance:r.distance,hovertemplate:q.hovertemplate});d=l.orig_p;x=void 0!==d?d:l.pos;"h"===q.orientation?(d=f,r.xLabelVal=c.x,r.yLabelVal=x):(d=e,r.xLabelVal=x,r.yLabelVal=c.y);x=d._id.charAt(0);r[x+"Spike"]=d.c2p(l.pos,!0);h(c,q,r);return r}var k=b("../../plots/cartesian/axes"),m=b("../../lib"),a=b("../../components/fx"),g=b("../../components/color"),h=m.fillText;N.exports=
{hoverPoints:function(r,l,c,d){var e=r.cd[0].trace.hoveron,f=[],q;-1!==e.indexOf("boxes")&&(f=f.concat(p(r,l,c,d)));-1!==e.indexOf("points")&&(q=n(r,l,c));if("closest"===d)return q?[q]:f;q&&f.push(q);return f},hoverOnBoxes:p,hoverOnPoints:n}},{"../../components/color":666,"../../components/fx":706,"../../lib":803,"../../plots/cartesian/axes":854}],972:[function(b,N,G){N.exports={attributes:b("./attributes"),layoutAttributes:b("./layout_attributes"),supplyDefaults:b("./defaults").supplyDefaults,crossTraceDefaults:b("./defaults").crossTraceDefaults,
supplyLayoutDefaults:b("./layout_defaults").supplyLayoutDefaults,calc:b("./calc"),crossTraceCalc:b("./cross_trace_calc").crossTraceCalc,plot:b("./plot").plot,style:b("./style").style,styleOnSelect:b("./style").styleOnSelect,hoverPoints:b("./hover").hoverPoints,eventData:b("./event_data"),selectPoints:b("./select"),moduleType:"trace",name:"box",basePlotModule:b("../../plots/cartesian"),categories:"cartesian svg symbols oriented box-violin showLegend boxLayout zoomScale".split(" "),meta:{}}},{"../../plots/cartesian":868,
"./attributes":966,"./calc":967,"./cross_trace_calc":968,"./defaults":969,"./event_data":970,"./hover":971,"./layout_attributes":973,"./layout_defaults":974,"./plot":975,"./select":976,"./style":977}],973:[function(b,N,G){N.exports={boxmode:{valType:"enumerated",values:["group","overlay"],dflt:"overlay",editType:"calc"},boxgap:{valType:"number",min:0,max:1,dflt:.3,editType:"calc"},boxgroupgap:{valType:"number",min:0,max:1,dflt:.3,editType:"calc"}}},{}],974:[function(b,N,G){function p(a,g,h,r,l){a=
l+"Layout";g=!1;for(var c=0;c<h.length;c++)if(n.traceIs(h[c],a)){g=!0;break}g&&(r(l+"mode"),r(l+"gap"),r(l+"groupgap"))}var n=b("../../registry"),k=b("../../lib"),m=b("./layout_attributes");N.exports={supplyLayoutDefaults:function(a,g,h){p(a,g,h,function(r,l){return k.coerce(a,g,m,r,l)},"box")},_supply:p}},{"../../lib":803,"../../registry":931,"./layout_attributes":973}],975:[function(b,N,G){function p(h,r,l,c){var d="h"===l.orientation,e=r.val,f=r.pos,q=!!f.rangebreaks,t=c.bPos,w=c.wdPos||0,x=c.bPosPxOffset||
0,z=l.whiskerwidth||0,B=l.notched||!1,A=B?1-2*l.notchwidth:1;if(Array.isArray(c.bdPos)){var D=c.bdPos[0];var C=c.bdPos[1]}else C=D=c.bdPos;h=h.selectAll("path.box").data("violin"!==l.type||l.box.visible?a.identity:[]);h.enter().append("path").style("vector-effect","non-scaling-stroke").attr("class","box");h.exit().remove();h.each(function(v){if(v.empty)return"M0,0Z";var y=f.c2l(v.pos+t,!0),F=f.l2p(y-D)+x,J=f.l2p(y+C)+x,K=q?(F+J)/2:f.l2p(y)+x,M=l.whiskerwidth,H=q?F*M+(1-M)*K:f.l2p(y-w)+x;M=q?J*M+(1-
M)*K:f.l2p(y+w)+x;var O=f.l2p(y-D*A)+x;y=f.l2p(y+C*A)+x;var I=e.c2p(v.q1,!0),L=e.c2p(v.q3,!0),Q=a.constrain(e.c2p(v.med,!0),Math.min(I,L)+1,Math.max(I,L)-1),Z=void 0===v.lf||!1===l.boxpoints,ba=e.c2p(Z?v.min:v.lf,!0);Z=e.c2p(Z?v.max:v.uf,!0);var V=e.c2p(v.ln,!0);v=e.c2p(v.un,!0);d?m.select(this).attr("d","M"+Q+","+O+"V"+y+"M"+I+","+F+"V"+J+(B?"H"+V+"L"+Q+","+y+"L"+v+","+J:"")+"H"+L+"V"+F+(B?"H"+v+"L"+Q+","+O+"L"+V+","+F:"")+"ZM"+I+","+K+"H"+ba+"M"+L+","+K+"H"+Z+(0===z?"":"M"+ba+","+H+"V"+M+"M"+Z+
","+H+"V"+M)):m.select(this).attr("d","M"+O+","+Q+"H"+y+"M"+F+","+I+"H"+J+(B?"V"+V+"L"+y+","+Q+"L"+J+","+v:"")+"V"+L+"H"+F+(B?"V"+v+"L"+O+","+Q+"L"+F+","+V:"")+"ZM"+K+","+I+"V"+ba+"M"+K+","+L+"V"+Z+(0===z?"":"M"+H+","+ba+"H"+M+"M"+H+","+Z+"H"+M))})}function n(h,r,l,c){var d=r.x;r=r.y;var e=c.bdPos,f=c.bPos,q=l.boxpoints||l.points;a.seedPseudoRandom();var t=function(w){w.forEach(function(x){x.t=c;x.trace=l});return w};h=h.selectAll("g.points").data(q?t:[]);h.enter().append("g").attr("class","points");
h.exit().remove();h=h.selectAll("path").data(function(w){var x=w.pts2;var z=Math.max((w.max-w.min)/10,w.q3-w.q1);var B=1E-9*z,A=.01*z,D=[],C=0;if(l.jitter){if(0===z)for(C=1,D=Array(x.length),z=0;z<x.length;z++)D[z]=1;else for(z=0;z<x.length;z++){var v=Math.max(0,z-5);var y=x[v].v,F=Math.min(x.length-1,z+5),J=x[F].v;"all"!==q&&(x[z].v<w.lf?J=Math.min(J,w.lf):y=Math.max(y,w.uf));v=Math.sqrt(A*(F-v)/(J-y+B))||0;v=a.constrain(Math.abs(v),0,1);D.push(v);C=Math.max(v,C)}v=2*l.jitter/(C||1)}for(z=0;z<x.length;z++)B=
x[z],A=B.v,C=l.jitter?v*D[z]*(a.pseudoRandom()-.5):0,C=w.pos+f+e*(l.pointpos+C),"h"===l.orientation?(B.y=C,B.x=A):(B.x=C,B.y=A),"suspectedoutliers"===q&&A<w.uo&&A>w.lo&&(B.so=!0);return x});h.enter().append("path").classed("point",!0);h.exit().remove();h.call(g.translatePoints,d,r)}function k(h,r,l,c){var d=r.val,e=r.pos,f=!!e.rangebreaks,q=c.bPos,t=c.bPosPxOffset||0,w=l.boxmean||(l.meanline||{}).visible;if(Array.isArray(c.bdPos)){var x=c.bdPos[0];var z=c.bdPos[1]}else z=x=c.bdPos;h=h.selectAll("path.mean").data("box"===
l.type&&l.boxmean||"violin"===l.type&&l.box.visible&&l.meanline.visible?a.identity:[]);h.enter().append("path").attr("class","mean").style({fill:"none","vector-effect":"non-scaling-stroke"});h.exit().remove();h.each(function(B){var A=e.c2l(B.pos+q,!0),D=e.l2p(A-x)+t,C=e.l2p(A+z)+t;A=f?(D+C)/2:e.l2p(A)+t;var v=d.c2p(B.mean,!0),y=d.c2p(B.mean-B.sd,!0);B=d.c2p(B.mean+B.sd,!0);"h"===l.orientation?m.select(this).attr("d","M"+v+","+D+"V"+C+("sd"===w?"m0,0L"+y+","+A+"L"+v+","+D+"L"+B+","+A+"Z":"")):m.select(this).attr("d",
"M"+D+","+v+"H"+C+("sd"===w?"m0,0L"+A+","+y+"L"+D+","+v+"L"+A+","+B+"Z":""))})}var m=b("@plotly/d3"),a=b("../../lib"),g=b("../../components/drawing");N.exports={plot:function(h,r,l,c){var d=r.xaxis,e=r.yaxis;a.makeTraceGroups(c,l,"trace boxes").each(function(f){var q=m.select(this),t=f[0];f=t.t;t=t.trace;f.wdPos=f.bdPos*t.whiskerwidth;if(!0!==t.visible||f.empty)q.remove();else{if("h"===t.orientation){var w=e;var x=d}else w=d,x=e;p(q,{pos:w,val:x},t,f);n(q,{x:d,y:e},t,f);k(q,{pos:w,val:x},t,f)}})},
plotBoxAndWhiskers:p,plotPoints:n,plotBoxMean:k}},{"../../components/drawing":688,"../../lib":803,"@plotly/d3":58}],976:[function(b,N,G){N.exports=function(p,n){var k=p.cd,m=p.xaxis,a=p.yaxis,g=[],h,r;if(!1===n)for(h=0;h<k.length;h++)for(r=0;r<(k[h].pts||[]).length;r++)k[h].pts[r].selected=0;else for(h=0;h<k.length;h++)for(r=0;r<(k[h].pts||[]).length;r++){var l=k[h].pts[r],c=m.c2p(l.x),d=a.c2p(l.y);n.contains([c,d],null,l.i,p)?(g.push({pointNumber:l.i,x:m.c2d(l.x),y:a.c2d(l.y)}),l.selected=1):l.selected=
0}return g}},{}],977:[function(b,N,G){var p=b("@plotly/d3"),n=b("../../components/color"),k=b("../../components/drawing");N.exports={style:function(m,a,g){a=g?g:p.select(m).selectAll("g.trace.boxes");a.style("opacity",function(h){return h[0].trace.opacity});a.each(function(h){function r(e,f,q,t){e.style("stroke-width",f+"px").call(n.stroke,q).call(n.fill,t)}var l=p.select(this),c=h[0].trace;h=c.line.width;var d=l.selectAll("path.box");"candlestick"===c.type?d.each(function(e){if(!e.empty){var f=p.select(this),
q=c[e.dir];r(f,q.line.width,q.line.color,q.fillcolor);f.style("opacity",c.selectedpoints&&!e.selected?.3:1)}}):(r(d,h,c.line.color,c.fillcolor),l.selectAll("path.mean").style({"stroke-width":h,"stroke-dasharray":2*h+"px,"+h+"px"}).call(n.stroke,c.line.color),l=l.selectAll("path.point"),k.pointStyle(l,c,m))})},styleOnSelect:function(m,a,g){a=a[0].trace;g=g.selectAll("path.point");a.selectedpoints?k.selectedPointStyle(g,a):k.pointStyle(g,a,m)}}},{"../../components/color":666,"../../components/drawing":688,
"@plotly/d3":58}],978:[function(b,N,G){function p(a){return{line:{color:n({},m.line.color,{dflt:a}),width:m.line.width,editType:"style"},fillcolor:m.fillcolor,editType:"style"}}var n=b("../../lib").extendFlat;G=b("../../plots/cartesian/axis_format_attributes").axisHoverFormat;var k=b("../ohlc/attributes"),m=b("../box/attributes");N.exports={xperiod:k.xperiod,xperiod0:k.xperiod0,xperiodalignment:k.xperiodalignment,xhoverformat:G("x"),yhoverformat:G("y"),x:k.x,open:k.open,high:k.high,low:k.low,close:k.close,
line:{width:n({},m.line.width,{}),editType:"style"},increasing:p(k.increasing.line.color.dflt),decreasing:p(k.decreasing.line.color.dflt),text:k.text,hovertext:k.hovertext,whiskerwidth:n({},m.whiskerwidth,{dflt:0}),hoverlabel:k.hoverlabel}},{"../../lib":803,"../../plots/cartesian/axis_format_attributes":857,"../box/attributes":966,"../ohlc/attributes":1164}],979:[function(b,N,G){function p(g,h,r,l){return{min:r,q1:Math.min(g,l),med:l,q3:Math.max(g,l),max:h}}var n=b("../../lib"),k=b("../../plots/cartesian/axes"),
m=b("../../plots/cartesian/align_period"),a=b("../ohlc/calc").calcCommon;N.exports=function(g,h){var r=g._fullLayout,l=k.getFromId(g,h.xaxis),c=k.getFromId(g,h.yaxis),d=l.makeCalcdata(h,"x");l=m(h,l,"x",d).vals;g=a(g,h,d,l,c,p);return g.length?(n.extendFlat(g[0].t,{num:r._numBoxes,dPos:n.distinctVals(l).minDiff/2,posLetter:"x",valLetter:"y"}),r._numBoxes++,g):[{t:{empty:!0}}]}},{"../../lib":803,"../../plots/cartesian/align_period":851,"../../plots/cartesian/axes":854,"../ohlc/calc":1165}],980:[function(b,
N,G){function p(h,r,l,c){h=l(c+".line.color");l(c+".line.width",r.line.width);l(c+".fillcolor",k.addOpacity(h,.5))}var n=b("../../lib"),k=b("../../components/color"),m=b("../ohlc/ohlc_defaults"),a=b("../scatter/period_defaults"),g=b("./attributes");N.exports=function(h,r,l,c){function d(e,f){return n.coerce(h,r,g,e,f)}m(h,r,d,c)?(a(h,r,c,d,{x:!0}),d("xhoverformat"),d("yhoverformat"),d("line.width"),p(h,r,d,"increasing"),p(h,r,d,"decreasing"),d("text"),d("hovertext"),d("whiskerwidth"),c._requestRangeslider[r.xaxis]=
!0):r.visible=!1}},{"../../components/color":666,"../../lib":803,"../ohlc/ohlc_defaults":1169,"../scatter/period_defaults":1238,"./attributes":978}],981:[function(b,N,G){N.exports={moduleType:"trace",name:"candlestick",basePlotModule:b("../../plots/cartesian"),categories:["cartesian","svg","showLegend","candlestick","boxLayout"],meta:{},attributes:b("./attributes"),layoutAttributes:b("../box/layout_attributes"),supplyLayoutDefaults:b("../box/layout_defaults").supplyLayoutDefaults,crossTraceCalc:b("../box/cross_trace_calc").crossTraceCalc,
supplyDefaults:b("./defaults"),calc:b("./calc"),plot:b("../box/plot").plot,layerName:"boxlayer",style:b("../box/style").style,hoverPoints:b("../ohlc/hover").hoverPoints,selectPoints:b("../ohlc/select")}},{"../../plots/cartesian":868,"../box/cross_trace_calc":968,"../box/layout_attributes":973,"../box/layout_defaults":974,"../box/plot":975,"../box/style":977,"../ohlc/hover":1167,"../ohlc/select":1171,"./attributes":978,"./calc":979,"./defaults":980}],982:[function(b,N,G){function p(m,a,g,h){["aaxis",
"baxis"].forEach(function(r){var l=r.charAt(0),c=m[r]||{},d=k.newContainer(a,r);n(c,d,{tickfont:"x",id:l+"axis",letter:l,font:a.font,name:r,data:m[l],calendar:a.calendar,dfltColor:h,bgColor:g.paper_bgcolor,autotypenumbersDflt:g.autotypenumbers,fullLayout:g});d._categories=d._categories||[];m[r]||"-"===c.type||(m[r]={type:c.type})})}var n=b("./axis_defaults"),k=b("../../plot_api/plot_template");N.exports=function(m,a,g,h,r){h("a")||(h("da"),h("a0"));h("b")||(h("db"),h("b0"));p(m,a,g,r)}},{"../../plot_api/plot_template":843,
"./axis_defaults":987}],983:[function(b,N,G){function p(k,m){if(!n(k)||10<=m)return null;for(var a=Infinity,g=-Infinity,h=k.length,r=0;r<h;r++){var l=k[r];if(n(l)){if(l=p(l,m+1))a=Math.min(l[0],a),g=Math.max(l[1],g)}else a=Math.min(l,a),g=Math.max(l,g)}return[a,g]}var n=b("../../lib").isArrayOrTypedArray;N.exports=function(k){return p(k,0)}},{"../../lib":803}],984:[function(b,N,G){var p=b("../../plots/font_attributes");G=b("./axis_attributes");b=b("../../components/color/attributes");p=p({editType:"calc"});
p.family.dflt='"Open Sans", verdana, arial, sans-serif';p.size.dflt=12;p.color.dflt=b.defaultLine;N.exports={carpet:{valType:"string",editType:"calc"},x:{valType:"data_array",editType:"calc+clearAxisTypes"},y:{valType:"data_array",editType:"calc+clearAxisTypes"},a:{valType:"data_array",editType:"calc"},a0:{valType:"number",dflt:0,editType:"calc"},da:{valType:"number",dflt:1,editType:"calc"},b:{valType:"data_array",editType:"calc"},b0:{valType:"number",dflt:0,editType:"calc"},db:{valType:"number",
dflt:1,editType:"calc"},cheaterslope:{valType:"number",dflt:1,editType:"calc"},aaxis:G,baxis:G,font:p,color:{valType:"color",dflt:b.defaultLine,editType:"plot"},transforms:void 0}},{"../../components/color/attributes":665,"../../plots/font_attributes":883,"./axis_attributes":986}],985:[function(b,N,G){var p=b("../../lib").isArrayOrTypedArray;N.exports=function(n,k,m,a){var g=p(m)?"a":"b",h=("a"===g?n.aaxis:n.baxis).smoothing,r="a"===g?n.a2i:n.b2j,l="a"===g?m:a;a="a"===g?a:m;m="a"===g?k.a.length:k.b.length;
var c="a"===g?k.b.length:k.a.length,d=Math.floor("a"===g?n.b2j(a):n.a2i(a));k="a"===g?function(F){return n.evalxy([],F,d)}:function(F){return n.evalxy([],d,F)};if(h){var e=Math.max(0,Math.min(c-2,d));var f=d-e;var q="a"===g?function(F,J){return n.dxydi([],F,e,J,f)}:function(F,J){return n.dxydj([],e,F,f,J)}}g=r(l[0]);r=r(l[1]);l=g<r?1:-1;var t=1E-8*(r-g);var w=0<l?Math.ceil:Math.floor;a=0<l?Math.min:Math.max;c=0<l?Math.max:Math.min;var x=(0<l?Math.floor:Math.ceil)(g+t);w=w(r-t);t=k(g);for(var z=[[t]];x*
l<w*l;x+=l){var B=[];var A=c(g,x);var D=a(r,x+l);var C=D-A;var v=Math.max(0,Math.min(m-2,Math.floor(.5*(A+D))));var y=k(D);h&&(A=q(v,A-v),v=q(v,D-v),B.push([t[0]+A[0]/3*C,t[1]+A[1]/3*C]),B.push([y[0]-v[0]/3*C,y[1]-v[1]/3*C]));B.push(y);z.push(B);t=y}return z}},{"../../lib":803}],986:[function(b,N,G){G=b("../../plots/font_attributes");var p=b("../../components/color/attributes"),n=b("../../plots/cartesian/layout_attributes"),k=b("../../plots/cartesian/axis_format_attributes").descriptionWithDates;
b=b("../../plot_api/edit_types").overrideAll;N.exports={color:{valType:"color",editType:"calc"},smoothing:{valType:"number",dflt:1,min:0,max:1.3,editType:"calc"},title:{text:{valType:"string",dflt:"",editType:"calc"},font:G({editType:"calc"}),offset:{valType:"number",dflt:10,editType:"calc"},editType:"calc"},type:{valType:"enumerated",values:["-","linear","date","category"],dflt:"-",editType:"calc"},autotypenumbers:n.autotypenumbers,autorange:{valType:"enumerated",values:[!0,!1,"reversed"],dflt:!0,
editType:"calc"},rangemode:{valType:"enumerated",values:["normal","tozero","nonnegative"],dflt:"normal",editType:"calc"},range:{valType:"info_array",editType:"calc",items:[{valType:"any",editType:"calc"},{valType:"any",editType:"calc"}]},fixedrange:{valType:"boolean",dflt:!1,editType:"calc"},cheatertype:{valType:"enumerated",values:["index","value"],dflt:"value",editType:"calc"},tickmode:{valType:"enumerated",values:["linear","array"],dflt:"array",editType:"calc"},nticks:{valType:"integer",min:0,
dflt:0,editType:"calc"},tickvals:{valType:"data_array",editType:"calc"},ticktext:{valType:"data_array",editType:"calc"},showticklabels:{valType:"enumerated",values:["start","end","both","none"],dflt:"start",editType:"calc"},tickfont:G({editType:"calc"}),tickangle:{valType:"angle",dflt:"auto",editType:"calc"},tickprefix:{valType:"string",dflt:"",editType:"calc"},showtickprefix:{valType:"enumerated",values:["all","first","last","none"],dflt:"all",editType:"calc"},ticksuffix:{valType:"string",dflt:"",
editType:"calc"},showticksuffix:{valType:"enumerated",values:["all","first","last","none"],dflt:"all",editType:"calc"},showexponent:{valType:"enumerated",values:["all","first","last","none"],dflt:"all",editType:"calc"},exponentformat:{valType:"enumerated",values:"none e E power SI B".split(" "),dflt:"B",editType:"calc"},minexponent:{valType:"number",dflt:3,min:0,editType:"calc"},separatethousands:{valType:"boolean",dflt:!1,editType:"calc"},tickformat:{valType:"string",dflt:"",editType:"calc",description:k("tick label")},
tickformatstops:b(n.tickformatstops,"calc","from-root"),categoryorder:{valType:"enumerated",values:["trace","category ascending","category descending","array"],dflt:"trace",editType:"calc"},categoryarray:{valType:"data_array",editType:"calc"},labelpadding:{valType:"integer",dflt:10,editType:"calc"},labelprefix:{valType:"string",editType:"calc"},labelsuffix:{valType:"string",dflt:"",editType:"calc"},showline:{valType:"boolean",dflt:!1,editType:"calc"},linecolor:{valType:"color",dflt:p.defaultLine,
editType:"calc"},linewidth:{valType:"number",min:0,dflt:1,editType:"calc"},gridcolor:{valType:"color",editType:"calc"},gridwidth:{valType:"number",min:0,dflt:1,editType:"calc"},showgrid:{valType:"boolean",dflt:!0,editType:"calc"},minorgridcount:{valType:"integer",min:0,dflt:0,editType:"calc"},minorgridwidth:{valType:"number",min:0,dflt:1,editType:"calc"},minorgridcolor:{valType:"color",dflt:p.lightLine,editType:"calc"},startline:{valType:"boolean",editType:"calc"},startlinecolor:{valType:"color",
editType:"calc"},startlinewidth:{valType:"number",dflt:1,editType:"calc"},endline:{valType:"boolean",editType:"calc"},endlinewidth:{valType:"number",dflt:1,editType:"calc"},endlinecolor:{valType:"color",editType:"calc"},tick0:{valType:"number",min:0,dflt:0,editType:"calc"},dtick:{valType:"number",min:0,dflt:1,editType:"calc"},arraytick0:{valType:"integer",min:0,dflt:0,editType:"calc"},arraydtick:{valType:"integer",min:1,dflt:1,editType:"calc"},_deprecated:{title:{valType:"string",editType:"calc"},
titlefont:G({editType:"calc"}),titleoffset:{valType:"number",dflt:10,editType:"calc"}},editType:"calc"}},{"../../components/color/attributes":665,"../../plot_api/edit_types":836,"../../plots/cartesian/axis_format_attributes":857,"../../plots/cartesian/layout_attributes":869,"../../plots/font_attributes":883}],987:[function(b,N,G){function p(d,e){if("-"===d.type){var f=d._id.charAt(0);d.type=c(e,d[f+"calendar"],{autotypenumbers:d.autotypenumbers})}}var n=b("./attributes"),k=b("../../components/color").addOpacity,
m=b("../../registry"),a=b("../../lib"),g=b("../../plots/cartesian/tick_value_defaults"),h=b("../../plots/cartesian/tick_label_defaults"),r=b("../../plots/cartesian/category_order_defaults"),l=b("../../plots/cartesian/set_convert"),c=b("../../plots/cartesian/axis_autotype");N.exports=function(d,e,f){function q(C,v){return a.coerce(d,e,z,C,v)}function t(C,v){return a.coerce2(d,e,z,C,v)}var w=f.letter,x=f.font||{},z=n[w+"axis"];f.name&&(e._name=f.name,e._id=f.name);q("autotypenumbers",f.autotypenumbersDflt);
var B=q("type");"-"===B&&(f.data&&p(e,f.data),"-"===e.type?e.type="linear":B=d.type=e.type);q("smoothing");q("cheatertype");q("showticklabels");q("labelprefix",w+" \x3d ");q("labelsuffix");q("showtickprefix");q("showticksuffix");q("separatethousands");q("tickformat");q("exponentformat");q("minexponent");q("showexponent");q("categoryorder");q("tickmode");q("tickvals");q("ticktext");q("tick0");q("dtick");"array"===e.tickmode&&(q("arraytick0"),q("arraydtick"));q("labelpadding");e._hovertitle=w;"date"===
B&&m.getComponentMethod("calendars","handleDefaults")(d,e,"calendar",f.calendar);l(e,f.fullLayout);e.c2p=a.identity;var A=q("color",f.dfltColor),D=A===d.color?A:x.color;q("title.text")&&(a.coerceFont(q,"title.font",{family:x.family,size:a.bigFont(x.size),color:D}),q("title.offset"));q("tickangle");q("autorange",!e.isValidRange(d.range))&&q("rangemode");q("range");e.cleanRange();q("fixedrange");g(d,e,q,B);h(d,e,q,B,f);r(d,e,q,{data:f.data,dataAttr:w});f=t("gridcolor",k(A,.3));w=t("gridwidth");x=q("showgrid");
x||(delete e.gridcolor,delete e.gridwidth);B=t("startlinecolor",A);D=t("startlinewidth",w);q("startline",e.showgrid||!!B||!!D)||(delete e.startlinecolor,delete e.startlinewidth);A=t("endlinecolor",A);B=t("endlinewidth",w);q("endline",e.showgrid||!!A||!!B)||(delete e.endlinecolor,delete e.endlinewidth);x?(q("minorgridcount"),q("minorgridwidth",w),q("minorgridcolor",k(f,.06)),e.minorgridcount||(delete e.minorgridwidth,delete e.minorgridcolor)):(delete e.gridcolor,delete e.gridWidth);"none"===e.showticklabels&&
(delete e.tickfont,delete e.tickangle,delete e.showexponent,delete e.exponentformat,delete e.minexponent,delete e.tickformat,delete e.showticksuffix,delete e.showtickprefix);e.showticksuffix||delete e.ticksuffix;e.showtickprefix||delete e.tickprefix;q("tickmode");return e}},{"../../components/color":666,"../../lib":803,"../../plots/cartesian/axis_autotype":855,"../../plots/cartesian/category_order_defaults":859,"../../plots/cartesian/set_convert":875,"../../plots/cartesian/tick_label_defaults":876,
"../../plots/cartesian/tick_value_defaults":878,"../../registry":931,"./attributes":984}],988:[function(b,N,G){var p=b("../../plots/cartesian/axes"),n=b("../../lib").isArray1D,k=b("./cheater_basis"),m=b("./array_minmax"),a=b("./calc_gridlines"),g=b("./calc_labels"),h=b("./calc_clippath"),r=b("../heatmap/clean_2d_array"),l=b("./smooth_fill_2d_array"),c=b("../heatmap/convert_column_xyz"),d=b("./set_convert");N.exports=function(e,f){var q=p.getFromId(e,f.xaxis);e=p.getFromId(e,f.yaxis);var t=f.aaxis,
w=f.baxis,x=f.x,z=f.y,B=[];x&&n(x)&&B.push("x");z&&n(z)&&B.push("y");B.length&&c(f,t,w,"a","b",B);B=f._a=f._a||f.a;var A=f._b=f._b||f.b;x=f._x||f.x;z=f._y||f.y;var D={};f._cheater&&(x=k("index"===t.cheatertype?B.length:B,"index"===w.cheatertype?A.length:A,f.cheaterslope));f._x=x=r(x);f._y=z=r(z);l(x,B,A);l(z,B,A);d(f);f.setScale();var C=m(x),v=m(z),y=.5*(C[1]-C[0]);C=.5*(C[1]+C[0]);var F=.5*(v[1]-v[0]);v=.5*(v[1]+v[0]);C=[C-1.3*y,C+1.3*y];v=[v-1.3*F,v+1.3*F];f._extremes[q._id]=p.findExtremes(q,C,
{padded:!0});f._extremes[e._id]=p.findExtremes(e,v,{padded:!0});a(f,"a","b");a(f,"b","a");g(f,t);g(f,w);D.clipsegments=h(f._xctrl,f._yctrl,t,w);D.x=x;D.y=z;D.a=B;D.b=A;return[D]}},{"../../lib":803,"../../plots/cartesian/axes":854,"../heatmap/clean_2d_array":1087,"../heatmap/convert_column_xyz":1089,"./array_minmax":983,"./calc_clippath":989,"./calc_gridlines":990,"./calc_labels":991,"./cheater_basis":993,"./set_convert":1006,"./smooth_fill_2d_array":1007}],989:[function(b,N,G){N.exports=function(p,
n,k,m){var a,g=[];k=!!k.smoothing;var h=!!m.smoothing,r=p[0].length-1,l=p.length-1;m=0;var c=[];for(a=[];m<=r;m++)c[m]=p[0][m],a[m]=n[0][m];g.push({x:c,y:a,bicubic:k});m=0;c=[];for(a=[];m<=l;m++)c[m]=p[m][r],a[m]=n[m][r];g.push({x:c,y:a,bicubic:h});m=r;c=[];for(a=[];0<=m;m--)c[r-m]=p[l][m],a[r-m]=n[l][m];g.push({x:c,y:a,bicubic:k});m=l;c=[];for(a=[];0<=m;m--)c[l-m]=p[m][0],a[l-m]=n[m][0];g.push({x:c,y:a,bicubic:h});return g}},{}],990:[function(b,N,G){var p=b("../../plots/cartesian/axes"),n=b("../../lib/extend").extendFlat;
N.exports=function(k,m,a){function g(H){var O,I=[],L=[],Q={};if("b"===m){var Z=k.b2j(H);var ba=Math.floor(Math.max(0,Math.min(D-2,Z)));var V=Z-ba;Q.length=D;Q.crossLength=A;Q.xy=function(ja){return k.evalxy([],ja,Z)};Q.dxy=function(ja,ma){return k.dxydi([],ja,ba,ma,V)};for(O=0;O<A;O++){var S=Math.min(A-2,O);var T=O-S;var fa=k.evalxy([],O,Z);if(t.smoothing&&0<O){var W=k.dxydi([],O-1,ba,0,V);I.push(aa[0]+W[0]/3);L.push(aa[1]+W[1]/3);var aa=k.dxydi([],O-1,ba,1,V);I.push(fa[0]-aa[0]/3);L.push(fa[1]-aa[1]/
3)}I.push(fa[0]);L.push(fa[1]);aa=fa}}else for(O=k.a2i(H),S=Math.floor(Math.max(0,Math.min(A-2,O))),T=O-S,Q.length=A,Q.crossLength=D,Q.xy=function(ja){return k.evalxy([],O,ja)},Q.dxy=function(ja,ma){return k.dxydj([],S,ja,T,ma)},Z=0;Z<D;Z++)ba=Math.min(D-2,Z),V=Z-ba,fa=k.evalxy([],O,Z),t.smoothing&&0<Z&&(W=k.dxydj([],S,Z-1,T,0),I.push(aa[0]+W[0]/3),L.push(aa[1]+W[1]/3),aa=k.dxydj([],S,Z-1,T,1),I.push(fa[0]-aa[0]/3),L.push(fa[1]-aa[1]/3)),I.push(fa[0]),L.push(fa[1]),aa=fa;Q.axisLetter=m;Q.axis=c;Q.crossAxis=
t;Q.value=H;Q.constvar=a;Q.index=r;Q.x=I;Q.y=L;Q.smoothing=t.smoothing;return Q}function h(H){var O,I=[],L=[],Q={};Q.length=l.length;Q.crossLength=q.length;if("b"===m){var Z=Math.max(0,Math.min(D-2,H));var ba=Math.min(1,Math.max(0,H-Z));Q.xy=function(T){return k.evalxy([],T,H)};Q.dxy=function(T,fa){return k.dxydi([],T,Z,fa,ba)};for(O=0;O<z;O++)I[O]=w[H*C][O],L[O]=x[H*C][O]}else{var V=Math.max(0,Math.min(A-2,H));var S=Math.min(1,Math.max(0,H-V));Q.xy=function(T){return k.evalxy([],H,T)};Q.dxy=function(T,
fa){return k.dxydj([],V,T,S,fa)};for(O=0;O<B;O++)I[O]=w[O][H*C],L[O]=x[O][H*C]}Q.axisLetter=m;Q.axis=c;Q.crossAxis=t;Q.value=l[H];Q.constvar=a;Q.index=H;Q.x=I;Q.y=L;Q.smoothing=t.smoothing;return Q}var r,l=k["_"+m],c=k[m+"axis"];var d=c._gridlines=[];var e=c._minorgridlines=[],f=c._boundarylines=[],q=k["_"+a],t=k[a+"axis"];"array"===c.tickmode&&(c.tickvals=l.slice());var w=k._xctrl,x=k._yctrl,z=w[0].length,B=w.length,A=k._a.length,D=k._b.length;p.prepTicks(c);"array"===c.tickmode&&delete c.tickvals;
var C=c.smoothing?3:1;if("array"===c.tickmode){var v=5E-15;v=[Math.floor((l.length-1-c.arraytick0)/c.arraydtick*(1+v)),Math.ceil(-c.arraytick0/c.arraydtick/(1+v))].sort(function(H,O){return H-O});var y=v[0]-1;v=v[1]+1;for(r=y;r<v;r++){var F=c.arraytick0+c.arraydtick*r;0>F||F>l.length-1||d.push(n(h(F),{color:c.gridcolor,width:c.gridwidth}))}for(r=y;r<v;r++){y=c.arraytick0+c.arraydtick*r;var J=Math.min(y+c.arraydtick,l.length-1);if(!(0>y||y>l.length-1||0>J||J>l.length-1)){var K=l[y];var M=l[J];for(d=
0;d<c.minorgridcount;d++)F=J-y,0>=F||(F=K+(M-K)*(d+1)/(c.minorgridcount+1)*(c.arraydtick/F),F<l[0]||F>l[l.length-1]||e.push(n(g(F),{color:c.minorgridcolor,width:c.minorgridwidth})))}}c.startline&&f.push(n(h(0),{color:c.startlinecolor,width:c.startlinewidth}));c.endline&&f.push(n(h(l.length-1),{color:c.endlinecolor,width:c.endlinewidth}))}else{v=5E-15;v=[Math.floor((l[l.length-1]-c.tick0)/c.dtick*(1+v)),Math.ceil((l[0]-c.tick0)/c.dtick/(1+v))].sort(function(H,O){return H-O});y=v[0];v=v[1];for(r=y;r<=
v;r++)J=c.tick0+c.dtick*r,d.push(n(g(J),{color:c.gridcolor,width:c.gridwidth}));for(r=y-1;r<v+1;r++)for(J=c.tick0+c.dtick*r,d=0;d<c.minorgridcount;d++)F=J+c.dtick*(d+1)/(c.minorgridcount+1),F<l[0]||F>l[l.length-1]||e.push(n(g(F),{color:c.minorgridcolor,width:c.minorgridwidth}));c.startline&&f.push(n(g(l[0]),{color:c.startlinecolor,width:c.startlinewidth}));c.endline&&f.push(n(g(l[l.length-1]),{color:c.endlinecolor,width:c.endlinewidth}))}}},{"../../lib/extend":793,"../../plots/cartesian/axes":854}],
991:[function(b,N,G){var p=b("../../plots/cartesian/axes"),n=b("../../lib/extend").extendFlat;N.exports=function(k,m){var a=m._labels=[],g=m._gridlines;for(k=0;k<g.length;k++){var h=g[k];if(-1!==["start","both"].indexOf(m.showticklabels)){var r=p.tickText(m,h.value);n(r,{prefix:void 0,suffix:void 0,endAnchor:!0,xy:h.xy(0),dxy:h.dxy(0,0),axis:h.axis,length:h.crossAxis.length,font:h.axis.tickfont,isFirst:0===k,isLast:k===g.length-1});a.push(r)}-1!==["end","both"].indexOf(m.showticklabels)&&(r=p.tickText(m,
h.value),n(r,{endAnchor:!1,xy:h.xy(h.crossLength-1),dxy:h.dxy(h.crossLength-2,1),axis:h.axis,length:h.crossAxis.length,font:h.axis.tickfont,isFirst:0===k,isLast:k===g.length-1}),a.push(r))}}},{"../../lib/extend":793,"../../plots/cartesian/axes":854}],992:[function(b,N,G){N.exports=function(p,n,k,m){var a=p[0]-n[0],g=p[1]-n[1],h=k[0]-n[0],r=k[1]-n[1];k=Math.pow(a*a+g*g,.25);p=Math.pow(h*h+r*r,.25);a=(p*p*a-k*k*h)*m;m*=p*p*g-k*k*r;g=p*(k+p)*3;k=k*(k+p)*3;return[[n[0]+(g&&a/g),n[1]+(g&&m/g)],[n[0]-(k&&
a/k),n[1]-(k&&m/k)]]}},{}],993:[function(b,N,G){var p=b("../../lib").isArrayOrTypedArray;N.exports=function(n,k,m){var a,g,h=[],r=p(n)?n.length:n,l=p(k)?k.length:k,c=p(n)?n:null,d=p(k)?k:null;c&&(a=(c.length-1)/(c[c.length-1]-c[0])/(r-1));d&&(g=(d.length-1)/(d[d.length-1]-d[0])/(l-1));var e=Infinity,f=-Infinity;for(n=0;n<l;n++){h[n]=[];var q=d?(d[n]-d[0])*g:n/(l-1);for(k=0;k<r;k++){var t=c?(c[k]-c[0])*a:k/(r-1);t-=q*m;e=Math.min(t,e);f=Math.max(t,f);h[n][k]=t}}m=1/(f-e);a=-e*m;for(n=0;n<l;n++)for(k=
0;k<r;k++)h[n][k]=m*h[n][k]+a;return h}},{"../../lib":803}],994:[function(b,N,G){function p(m,a,g){return[(2*(-.5*g[0]+1.5*a[0])+m[0])/3,(2*(-.5*g[1]+1.5*a[1])+m[1])/3]}var n=b("./catmull_rom"),k=b("../../lib").ensureArray;N.exports=function(m,a,g,h,r,l){var c,d,e,f,q=g[0].length,t=g.length,w=r?3*q-2:q,x=l?3*t-2:t;m=k(m,x);a=k(a,x);for(e=0;e<x;e++)m[e]=k(m[e],w),a[e]=k(a[e],w);for(f=d=0;d<t;d++,f+=l?3:1){var z=m[f];var B=a[f];var A=g[d];var D=h[d];for(e=c=0;c<q;c++,e+=r?3:1)z[e]=A[c],B[e]=D[c]}if(r)for(f=
d=0;d<t;d++,f+=l?3:1){c=1;for(e=3;c<q-1;c++,e+=3)z=n([g[d][c-1],h[d][c-1]],[g[d][c],h[d][c]],[g[d][c+1],h[d][c+1]],r),m[f][e-1]=z[0][0],a[f][e-1]=z[0][1],m[f][e+1]=z[1][0],a[f][e+1]=z[1][1];c=p([m[f][0],a[f][0]],[m[f][2],a[f][2]],[m[f][3],a[f][3]]);m[f][1]=c[0];a[f][1]=c[1];c=p([m[f][w-1],a[f][w-1]],[m[f][w-3],a[f][w-3]],[m[f][w-4],a[f][w-4]]);m[f][w-2]=c[0];a[f][w-2]=c[1]}if(l)for(e=0;e<w;e++){for(f=3;f<x-3;f+=3)z=n([m[f-3][e],a[f-3][e]],[m[f][e],a[f][e]],[m[f+3][e],a[f+3][e]],l),m[f-1][e]=z[0][0],
a[f-1][e]=z[0][1],m[f+1][e]=z[1][0],a[f+1][e]=z[1][1];c=p([m[0][e],a[0][e]],[m[2][e],a[2][e]],[m[3][e],a[3][e]]);m[1][e]=c[0];a[1][e]=c[1];c=p([m[x-1][e],a[x-1][e]],[m[x-3][e],a[x-3][e]],[m[x-4][e],a[x-4][e]]);m[x-2][e]=c[0];a[x-2][e]=c[1]}if(r&&l)for(f=1;f<x;f+=0===(f+1)%3?2:1){for(e=3;e<w-3;e+=3)z=n([m[f][e-3],a[f][e-3]],[m[f][e],a[f][e]],[m[f][e+3],a[f][e+3]],r),m[f][e-1]=.5*(m[f][e-1]+z[0][0]),a[f][e-1]=.5*(a[f][e-1]+z[0][1]),m[f][e+1]=.5*(m[f][e+1]+z[1][0]),a[f][e+1]=.5*(a[f][e+1]+z[1][1]);c=
p([m[f][0],a[f][0]],[m[f][2],a[f][2]],[m[f][3],a[f][3]]);m[f][1]=.5*(m[f][1]+c[0]);a[f][1]=.5*(a[f][1]+c[1]);c=p([m[f][w-1],a[f][w-1]],[m[f][w-3],a[f][w-3]],[m[f][w-4],a[f][w-4]]);m[f][w-2]=.5*(m[f][w-2]+c[0]);a[f][w-2]=.5*(a[f][w-2]+c[1])}return[m,a]}},{"../../lib":803,"./catmull_rom":992}],995:[function(b,N,G){N.exports={RELATIVE_CULL_TOLERANCE:1E-6}},{}],996:[function(b,N,G){N.exports=function(p,n,k){return n&&k?function(m,a,g,h,r){m||(m=[]);var l;a*=3;g*=3;var c=h*h;var d=1-h,e=d*d;d=d*h*2;h=
-3*e;e=3*(e-d);d=3*(d-c);var f=3*c,q=r*r,t=q*r,w=1-r,x=w*w,z=x*w;for(l=0;l<p.length;l++){var B=p[l];c=h*B[g][a]+e*B[g][a+1]+d*B[g][a+2]+f*B[g][a+3];var A=h*B[g+1][a]+e*B[g+1][a+1]+d*B[g+1][a+2]+f*B[g+1][a+3];var D=h*B[g+2][a]+e*B[g+2][a+1]+d*B[g+2][a+2]+f*B[g+2][a+3];B=h*B[g+3][a]+e*B[g+3][a+1]+d*B[g+3][a+2]+f*B[g+3][a+3];m[l]=z*c+3*(x*r*A+w*q*D)+t*B}return m}:n?function(m,a,g,h,r){m||(m=[]);var l;a*=3;var c=h*h;var d=1-h,e=d*d;d=d*h*2;h=-3*e;e=3*(e-d);d=3*(d-c);var f=3*c,q=1-r;for(l=0;l<p.length;l++){var t=
p[l];c=h*t[g][a]+e*t[g][a+1]+d*t[g][a+2]+f*t[g][a+3];t=h*t[g+1][a]+e*t[g+1][a+1]+d*t[g+1][a+2]+f*t[g+1][a+3];m[l]=q*c+r*t}return m}:k?function(m,a,g,h,r){m||(m=[]);var l;g*=3;var c=r*r,d=c*r,e=1-r,f=e*e,q=f*e;for(l=0;l<p.length;l++){var t=p[l];h=t[g][a+1]-t[g][a];var w=t[g+1][a+1]-t[g+1][a];var x=t[g+2][a+1]-t[g+2][a];t=t[g+3][a+1]-t[g+3][a];m[l]=q*h+3*(f*r*w+e*c*x)+d*t}return m}:function(m,a,g,h,r){m||(m=[]);var l,c=1-r;for(l=0;l<p.length;l++){var d=p[l];h=d[g][a+1]-d[g][a];d=d[g+1][a+1]-d[g+1][a];
m[l]=c*h+r*d}return m}}},{}],997:[function(b,N,G){N.exports=function(p,n,k){return n&&k?function(m,a,g,h,r){m||(m=[]);var l;a*=3;g*=3;var c=h*h,d=c*h,e=1-h,f=e*e,q=f*e;var t=r*r;var w=1-r,x=w*w;w=w*r*2;r=-3*x;x=3*(x-w);w=3*(w-t);var z=3*t;for(l=0;l<p.length;l++){var B=p[l];t=r*B[g][a]+x*B[g+1][a]+w*B[g+2][a]+z*B[g+3][a];var A=r*B[g][a+1]+x*B[g+1][a+1]+w*B[g+2][a+1]+z*B[g+3][a+1];var D=r*B[g][a+2]+x*B[g+1][a+2]+w*B[g+2][a+2]+z*B[g+3][a+2];B=r*B[g][a+3]+x*B[g+1][a+3]+w*B[g+2][a+3]+z*B[g+3][a+3];m[l]=
q*t+3*(f*h*A+e*c*D)+d*B}return m}:n?function(m,a,g,h,r){m||(m=[]);var l;a*=3;var c=r*r,d=c*r,e=1-r,f=e*e,q=f*e;for(l=0;l<p.length;l++){var t=p[l];h=t[g+1][a]-t[g][a];var w=t[g+1][a+1]-t[g][a+1];var x=t[g+1][a+2]-t[g][a+2];t=t[g+1][a+3]-t[g][a+3];m[l]=q*h+3*(f*r*w+e*c*x)+d*t}return m}:k?function(m,a,g,h,r){m||(m=[]);var l;g*=3;var c=1-h;var d=r*r;var e=1-r,f=e*e;e=e*r*2;r=-3*f;f=3*(f-e);e=3*(e-d);var q=3*d;for(l=0;l<p.length;l++){var t=p[l];d=r*t[g][a]+f*t[g+1][a]+e*t[g+2][a]+q*t[g+3][a];t=r*t[g][a+
1]+f*t[g+1][a+1]+e*t[g+2][a+1]+q*t[g+3][a+1];m[l]=c*d+h*t}return m}:function(m,a,g,h,r){m||(m=[]);var l,c=1-h;for(l=0;l<p.length;l++){var d=p[l];r=d[g+1][a]-d[g][a];d=d[g+1][a+1]-d[g][a+1];m[l]=c*r+h*d}return m}}},{}],998:[function(b,N,G){N.exports=function(p,n,k,m,a){var g=n-2,h=k-2;return m&&a?function(r,l,c){r||(r=[]);var d,e=Math.max(0,Math.min(Math.floor(l),g)),f=Math.max(0,Math.min(Math.floor(c),h));l=Math.max(0,Math.min(1,l-e));var q=Math.max(0,Math.min(1,c-f));e*=3;f*=3;var t=l*l,w=t*l,x=
1-l,z=x*x,B=z*x,A=q*q,D=A*q,C=1-q,v=C*C,y=v*C;for(d=0;d<p.length;d++){var F=p[d];c=B*F[f][e]+3*(z*l*F[f][e+1]+x*t*F[f][e+2])+w*F[f][e+3];var J=B*F[f+1][e]+3*(z*l*F[f+1][e+1]+x*t*F[f+1][e+2])+w*F[f+1][e+3];var K=B*F[f+2][e]+3*(z*l*F[f+2][e+1]+x*t*F[f+2][e+2])+w*F[f+2][e+3];F=B*F[f+3][e]+3*(z*l*F[f+3][e+1]+x*t*F[f+3][e+2])+w*F[f+3][e+3];r[d]=y*c+3*(v*q*J+C*A*K)+D*F}return r}:m?function(r,l,c){r||(r=[]);var d=Math.max(0,Math.min(Math.floor(l),g)),e=Math.max(0,Math.min(Math.floor(c),h));l=Math.max(0,
Math.min(1,l-d));c=Math.max(0,Math.min(1,c-e));var f;d*=3;var q=l*l,t=q*l,w=1-l,x=w*w,z=x*w,B=1-c;for(f=0;f<p.length;f++){var A=p[f];var D=B*A[e][d]+c*A[e+1][d];var C=B*A[e][d+1]+c*A[e+1][d+1];var v=B*A[e][d+2]+c*A[e+1][d+1];A=B*A[e][d+3]+c*A[e+1][d+1];r[f]=z*D+3*(x*l*C+w*q*v)+t*A}return r}:a?function(r,l,c){r||(r=[]);var d=Math.max(0,Math.min(Math.floor(l),g)),e=Math.max(0,Math.min(Math.floor(c),h));l=Math.max(0,Math.min(1,l-d));c=Math.max(0,Math.min(1,c-e));var f;e*=3;var q=c*c,t=q*c,w=1-c,x=w*
w,z=x*w,B=1-l;for(f=0;f<p.length;f++){var A=p[f];var D=B*A[e][d]+l*A[e][d+1];var C=B*A[e+1][d]+l*A[e+1][d+1];var v=B*A[e+2][d]+l*A[e+2][d+1];A=B*A[e+3][d]+l*A[e+3][d+1];r[f]=z*D+3*(x*c*C+w*q*v)+t*A}return r}:function(r,l,c){r||(r=[]);var d=Math.max(0,Math.min(Math.floor(l),g)),e=Math.max(0,Math.min(Math.floor(c),h));l=Math.max(0,Math.min(1,l-d));c=Math.max(0,Math.min(1,c-e));var f,q=1-c,t=1-l;for(f=0;f<p.length;f++){var w=p[f];var x=t*w[e][d]+l*w[e][d+1];w=t*w[e+1][d]+l*w[e+1][d+1];r[f]=q*x+c*w}return r}}},
{}],999:[function(b,N,G){var p=b("../../lib"),n=b("./xy_defaults"),k=b("./ab_defaults"),m=b("./attributes"),a=b("../../components/color/attributes");N.exports=function(g,h,r,l){function c(d,e){return p.coerce(g,h,m,d,e)}h._clipPathId="clip"+h.uid+"carpet";r=c("color",a.defaultLine);p.coerceFont(c,"font");c("carpet");k(g,h,l,c,r);h.a&&h.b?(3>h.a.length&&(h.aaxis.smoothing=0),3>h.b.length&&(h.baxis.smoothing=0),n(g,h,c)||(h.visible=!1),h._cheater&&c("cheaterslope")):h.visible=!1}},{"../../components/color/attributes":665,
"../../lib":803,"./ab_defaults":982,"./attributes":984,"./xy_defaults":1008}],1E3:[function(b,N,G){N.exports={attributes:b("./attributes"),supplyDefaults:b("./defaults"),plot:b("./plot"),calc:b("./calc"),animatable:!0,isContainer:!0,moduleType:"trace",name:"carpet",basePlotModule:b("../../plots/cartesian"),categories:"cartesian svg carpet carpetAxis notLegendIsolatable noMultiCategory noHover noSortingByValue".split(" "),meta:{}}},{"../../plots/cartesian":868,"./attributes":984,"./calc":988,"./defaults":999,
"./plot":1005}],1001:[function(b,N,G){N.exports=function(p,n){for(var k=p._fullData.length,m,a=0;a<k;a++){var g=p._fullData[a];if(g.index!==n.index&&"carpet"===g.type&&(m||(m=g),g.carpet===n.carpet))return g}return m}},{}],1002:[function(b,N,G){N.exports=function(p,n,k){if(0===p.length)return"";var m,a=[],g=k?3:1;for(m=0;m<p.length;m+=g)a.push(p[m]+","+n[m]),k&&m<p.length-g&&(a.push("C"),a.push([p[m+1]+","+n[m+1],p[m+2]+","+n[m+2]+" "].join(" ")));return a.join(k?"":"L")}},{}],1003:[function(b,N,
G){var p=b("../../lib").isArrayOrTypedArray;N.exports=function(n,k,m){var a;p(n)?n.length>k.length&&(n=n.slice(0,k.length)):n=[];for(a=0;a<k.length;a++)n[a]=m(k[a]);return n}},{"../../lib":803}],1004:[function(b,N,G){N.exports=function(p,n,k,m,a,g){var h=a[0]*p.dpdx(n),r=a[1]*p.dpdy(k),l=1,c=1;g&&(c=Math.max(0,(a[0]*g[0]+a[1]*g[1])/Math.sqrt(a[0]*a[0]+a[1]*a[1])/Math.sqrt(g[0]*g[0]+g[1]*g[1])));a=180*Math.atan2(r,h)/Math.PI;-90>a?(a+=180,l=-l):90<a&&(a-=180,l=-l);return{angle:a,flip:l,p:p.c2p(m,n,
k),offsetMultplier:c}}},{}],1005:[function(b,N,G){function p(t,w,x,z,B,A){z="const-"+B+"-lines";x=x.selectAll("."+z).data(A);x.enter().append("path").classed(z,!0).style("vector-effect","non-scaling-stroke");x.each(function(D){var C=D.y,v=g([],D.x,t.c2p);C=g([],C,w.c2p);v="M"+h(v,C,D.smoothing);m.select(this).attr("d",v).style("stroke-width",D.width).style("stroke",D.color).style("fill","none")});x.exit().remove()}function n(t,w,x,z,B,A,D,C){B=A.selectAll("text."+C).data(D);B.enter().append("text").classed(C,
!0);var v=0,y={};B.each(function(F,J){if("auto"===F.axis.tickangle)var K=r(z,w,x,F.xy,F.dxy);else K=(F.axis.tickangle+180)*Math.PI/180,K=r(z,w,x,F.xy,[Math.cos(K),Math.sin(K)]);J||(y={angle:K.angle,flip:K.flip});J=(F.endAnchor?-1:1)*K.flip;var M=m.select(this).attr({"text-anchor":0<J?"start":"end","data-notex":1}).call(a.font,F.font).text(F.text).call(l.convertToTspans,t),H=a.bBox(this);M.attr("transform",e(K.p[0],K.p[1])+d(K.angle)+e(F.axis.labelpadding*J,.3*H.height));v=Math.max(v,H.width+F.axis.labelpadding)});
B.exit().remove();y.maxExtent=v;return y}function k(t,w,x,z,B,A,D,C,v,y,F){z=[];D.title.text&&z.push(D.title.text);w=w.selectAll("text."+F).data(z);var J=y.maxExtent;w.enter().append("text").classed(F,!0);w.each(function(){var K=r(x,C,v,B,A);-1===["start","both"].indexOf(D.showticklabels)&&(J=0);var M=D.title.font.size;J+=M+D.title.offset;var H=(y.angle+(0>y.flip?180:0)-K.angle+450)%360;H=90<H&&270>H;var O=m.select(this);O.text(D.title.text).call(l.convertToTspans,t);H&&(J=(-l.lineCount(O)+q)*f*M-
J);O.attr("transform",e(K.p[0],K.p[1])+d(K.angle)+e(0,J)).attr("text-anchor","middle").call(a.font,D.title.font)});w.exit().remove()}var m=b("@plotly/d3"),a=b("../../components/drawing"),g=b("./map_1d_array"),h=b("./makepath"),r=b("./orient_text"),l=b("../../lib/svg_text_utils"),c=b("../../lib"),d=c.strRotate,e=c.strTranslate;b=b("../../constants/alignment");N.exports=function(t,w,x,z){var B=w.xaxis,A=w.yaxis,D=t._fullLayout._clips;c.makeTraceGroups(z,x,"trace").each(function(C){var v=m.select(this),
y=C[0];C=y.trace;var F=C.aaxis,J=C.baxis,K=c.ensureSingle(v,"g","minorlayer"),M=c.ensureSingle(v,"g","majorlayer"),H=c.ensureSingle(v,"g","boundarylayer"),O=c.ensureSingle(v,"g","labellayer");v.style("opacity",C.opacity);p(B,A,M,F,"a",F._gridlines,!0);p(B,A,M,J,"b",J._gridlines,!0);p(B,A,K,F,"a",F._minorgridlines,!0);p(B,A,K,J,"b",J._minorgridlines,!0);p(B,A,H,F,"a-boundary",F._boundarylines);p(B,A,H,J,"b-boundary",J._boundarylines);v=n(t,B,A,C,y,O,F._labels,"a-label");J=n(t,B,A,C,y,O,J._labels,"b-label");
F=c.aggNums(Math.min,null,C.a);H=c.aggNums(Math.max,null,C.a);K=c.aggNums(Math.min,null,C.b);M=c.aggNums(Math.max,null,C.b);H=.5*(F+H);var I=K;var L=C.ab2xy(H,I,!0);var Q=C.dxyda_rough(H,I);void 0===v.angle&&c.extendFlat(v,r(C,B,A,L,C.dxydb_rough(H,I)));k(t,O,C,y,L,Q,C.aaxis,B,A,v,"a-title");H=F;I=.5*(K+M);L=C.ab2xy(H,I,!0);Q=C.dxydb_rough(H,I);void 0===J.angle&&c.extendFlat(J,r(C,B,A,L,C.dxyda_rough(H,I)));k(t,O,C,y,L,Q,C.baxis,B,A,J,"b-title");O=D.select("#"+C._clipPathId);O.size()||(O=D.append("clipPath").classed("carpetclip",
!0));v=c.ensureSingle(O,"path","carpetboundary");M=y.clipsegments;H=[];for(K=0;K<M.length;K++)y=M[K],J=g([],y.x,B.c2p),F=g([],y.y,A.c2p),H.push(h(J,F,y.bicubic));y="M"+H.join("L")+"Z";O.attr("id",C._clipPathId);v.attr("d",y)})};var f=b.LINE_SPACING,q=(1-b.MID_SHIFT)/f+1},{"../../components/drawing":688,"../../constants/alignment":771,"../../lib":803,"../../lib/svg_text_utils":829,"./makepath":1002,"./map_1d_array":1003,"./orient_text":1004,"@plotly/d3":58}],1006:[function(b,N,G){var p=b("./constants"),
n=b("../../lib/search").findBin,k=b("./compute_control_points"),m=b("./create_spline_evaluator"),a=b("./create_i_derivative_evaluator"),g=b("./create_j_derivative_evaluator");N.exports=function(h){var r=h._a,l=h._b,c=r.length,d=l.length,e=h.aaxis,f=h.baxis,q=r[0],t=r[c-1],w=l[0],x=l[d-1],z=r[r.length-1]-r[0],B=l[l.length-1]-l[0],A=z*p.RELATIVE_CULL_TOLERANCE,D=B*p.RELATIVE_CULL_TOLERANCE;q-=A;t+=A;w-=D;x+=D;h.isVisible=function(C,v){return C>q&&C<t&&v>w&&v<x};h.isOccluded=function(C,v){return C<q||
C>t||v<w||v>x};h.setScale=function(){var C=k(h._xctrl,h._yctrl,h._x,h._y,e.smoothing,f.smoothing);h._xctrl=C[0];h._yctrl=C[1];h.evalxy=m([h._xctrl,h._yctrl],c,d,e.smoothing,f.smoothing);h.dxydi=a([h._xctrl,h._yctrl],e.smoothing,f.smoothing);h.dxydj=g([h._xctrl,h._yctrl],e.smoothing,f.smoothing)};h.i2a=function(C){var v=Math.max(0,Math.floor(C[0]),c-2);C=C[0]-v;return(1-C)*r[v]+C*r[v+1]};h.j2b=function(C){var v=Math.max(0,Math.floor(C[1]),c-2);C=C[1]-v;return(1-C)*l[v]+C*l[v+1]};h.ij2ab=function(C){return[h.i2a(C[0]),
h.j2b(C[1])]};h.a2i=function(C){var v=Math.max(0,Math.min(n(C,r),c-2)),y=r[v];return Math.max(0,Math.min(c-1,v+(C-y)/(r[v+1]-y)))};h.b2j=function(C){var v=Math.max(0,Math.min(n(C,l),d-2)),y=l[v];return Math.max(0,Math.min(d-1,v+(C-y)/(l[v+1]-y)))};h.ab2ij=function(C){return[h.a2i(C[0]),h.b2j(C[1])]};h.i2c=function(C,v){return h.evalxy([],C,v)};h.ab2xy=function(C,v,y){if(!y&&(C<r[0]||C>r[c-1]|v<l[0]||v>l[d-1]))return[!1,!1];var F=h.a2i(C),J=h.b2j(v),K=h.evalxy([],F,J);if(y){var M=y=0,H=[],O;C<r[0]?
(F=O=0,y=(C-r[0])/(r[1]-r[0])):C>r[c-1]?(O=c-2,F=1,y=(C-r[c-1])/(r[c-1]-r[c-2])):(O=Math.max(0,Math.min(c-2,Math.floor(F))),F-=O);v<l[0]?(J=C=0,M=(v-l[0])/(l[1]-l[0])):v>l[d-1]?(C=d-2,J=1,M=(v-l[d-1])/(l[d-1]-l[d-2])):(C=Math.max(0,Math.min(d-2,Math.floor(J))),J-=C);y&&(h.dxydi(H,O,C,F,J),K[0]+=H[0]*y,K[1]+=H[1]*y);M&&(h.dxydj(H,O,C,F,J),K[0]+=H[0]*M,K[1]+=H[1]*M)}return K};h.c2p=function(C,v,y){return[v.c2p(C[0]),y.c2p(C[1])]};h.p2x=function(C,v,y){return[v.p2c(C[0]),y.p2c(C[1])]};h.dadi=function(C){C=
Math.max(0,Math.min(r.length-2,C));return r[C+1]-r[C]};h.dbdj=function(C){C=Math.max(0,Math.min(l.length-2,C));return l[C+1]-l[C]};h.dxyda=function(C,v,y,F){v=h.dxydi(null,C,v,y,F);C=h.dadi(C,y);return[v[0]/C,v[1]/C]};h.dxydb=function(C,v,y,F){C=h.dxydj(null,C,v,y,F);v=h.dbdj(v,F);return[C[0]/v,C[1]/v]};h.dxyda_rough=function(C,v,y){y=z*(y||.1);var F=h.ab2xy(C+y,v,!0);C=h.ab2xy(C-y,v,!0);return[.5*(F[0]-C[0])/y,.5*(F[1]-C[1])/y]};h.dxydb_rough=function(C,v,y){y=B*(y||.1);var F=h.ab2xy(C,v+y,!0);C=
h.ab2xy(C,v-y,!0);return[.5*(F[0]-C[0])/y,.5*(F[1]-C[1])/y]};h.dpdx=function(C){return C._m};h.dpdy=function(C){return C._m}}},{"../../lib/search":823,"./compute_control_points":994,"./constants":995,"./create_i_derivative_evaluator":996,"./create_j_derivative_evaluator":997,"./create_spline_evaluator":998}],1007:[function(b,N,G){var p=b("../../lib");N.exports=function(n,k,m){var a,g,h=[],r=[],l=n[0].length,c=n.length,d=0;for(a=0;a<l;a++)for(g=0;g<c;g++){if(void 0===n[g][a]){h.push(a);r.push(g);var e=
n[g];var f=a,q=void 0,t=0,w=0;0<a&&void 0!==(q=n[g][a-1])&&(w++,t+=q);a<l-1&&void 0!==(q=n[g][a+1])&&(w++,t+=q);0<g&&void 0!==(q=n[g-1][a])&&(w++,t+=q);g<c-1&&void 0!==(q=n[g+1][a])&&(w++,t+=q);e[f]=t/Math.max(1,w)}d=Math.max(d,Math.abs(n[g][a]))}if(!h.length)return n;q=0;t=h.length;do{for(e=f=0;e<t;e++){a=h[e];g=r[e];var x=w=0;if(0===a){var z=Math.min(l-1,2);var B=k[z];var A=k[1];z=n[g][z];var D=n[g][1];x+=D+(D-z)*(k[0]-A)/(A-B);w++}else a===l-1&&(z=Math.max(0,l-3),B=k[z],A=k[l-2],z=n[g][z],D=n[g][l-
2],x+=D+(D-z)*(k[l-1]-A)/(A-B),w++);(0===a||a===l-1)&&0<g&&g<c-1&&(B=m[g+1]-m[g],A=m[g]-m[g-1],x+=(A*n[g+1][a]+B*n[g-1][a])/(A+B),w++);0===g?(z=Math.min(c-1,2),B=m[z],A=m[1],z=n[z][a],D=n[1][a],x+=D+(D-z)*(m[0]-A)/(A-B),w++):g===c-1&&(z=Math.max(0,c-3),B=m[z],A=m[c-2],z=n[z][a],D=n[c-2][a],x+=D+(D-z)*(m[c-1]-A)/(A-B),w++);(0===g||g===c-1)&&0<a&&a<l-1&&(B=k[a+1]-k[a],A=k[a]-k[a-1],x+=(A*n[g][a+1]+B*n[g][a-1])/(A+B),w++);if(w)x/=w;else{x=k[a+1]-k[a];B=k[a]-k[a-1];A=m[g+1]-m[g];z=m[g]-m[g-1];D=x*B*(x+
B);var C=A*z*(A+z);x=(D*(z*n[g+1][a]+A*n[g-1][a])+C*(B*n[g][a+1]+x*n[g][a-1]))/(C*(B+x)+D*(z+A))}x-=n[g][a];B=x/d;f+=B*B;w=w?0:.85;n[g][a]+=x*(1+w)}f=Math.sqrt(f)}while(100>q++&&1E-5<f);p.log("Smoother converged to",f,"after",q,"iterations");return n}},{"../../lib":803}],1008:[function(b,N,G){var p=b("../../lib").isArray1D;N.exports=function(n,k,m){var a=(n=m("x"))&&n.length,g=(m=m("y"))&&m.length;if(!a&&!g)return!1;k._cheater=!n;a&&!p(n)||g&&!p(m)?k._length=null:(n=a?n.length:Infinity,g&&(n=Math.min(n,
m.length)),k.a&&k.a.length&&(n=Math.min(n,k.a.length)),k.b&&k.b.length&&(n=Math.min(n,k.b.length)),k._length=n);return!0}},{"../../lib":803}],1009:[function(b,N,G){G=b("../../plots/template_attributes").hovertemplateAttrs;var p=b("../scattergeo/attributes"),n=b("../../components/colorscale/attributes"),k=b("../../plots/attributes"),m=b("../../components/color/attributes").defaultLine;b=b("../../lib/extend").extendFlat;var a=p.marker.line;N.exports=b({locations:{valType:"data_array",editType:"calc"},
locationmode:p.locationmode,z:{valType:"data_array",editType:"calc"},geojson:b({},p.geojson,{}),featureidkey:p.featureidkey,text:b({},p.text,{}),hovertext:b({},p.hovertext,{}),marker:{line:{color:b({},a.color,{dflt:m}),width:b({},a.width,{dflt:1}),editType:"calc"},opacity:{valType:"number",arrayOk:!0,min:0,max:1,dflt:1,editType:"style"},editType:"calc"},selected:{marker:{opacity:p.selected.marker.opacity,editType:"plot"},editType:"plot"},unselected:{marker:{opacity:p.unselected.marker.opacity,editType:"plot"},
editType:"plot"},hoverinfo:b({},k.hoverinfo,{editType:"calc",flags:["location","z","text","name"]}),hovertemplate:G(),showlegend:b({},k.showlegend,{dflt:!1})},n("",{cLetter:"z",editTypeOverride:"calc"}))},{"../../components/color/attributes":665,"../../components/colorscale/attributes":673,"../../lib/extend":793,"../../plots/attributes":850,"../../plots/template_attributes":926,"../scattergeo/attributes":1260}],1010:[function(b,N,G){function p(h){return h&&"string"===typeof h}var n=b("fast-isnumeric"),
k=b("../../constants/numerical").BADNUM,m=b("../../components/colorscale/calc"),a=b("../scatter/arrays_to_calcdata"),g=b("../scatter/calc_selection");N.exports=function(h,r){var l=r._length,c=Array(l);var d=r.geojson?function(w){return p(w)||n(w)}:p;for(var e=0;e<l;e++){var f=c[e]={},q=r.locations[e],t=r.z[e];d(q)&&n(t)?(f.loc=q,f.z=t):(f.loc=null,f.z=k);f.index=e}a(c,r);m(h,r,{vals:r.z,containerStr:"",cLetter:"z"});g(c,r);return c}},{"../../components/colorscale/calc":674,"../../constants/numerical":779,
"../scatter/arrays_to_calcdata":1217,"../scatter/calc_selection":1220,"fast-isnumeric":249}],1011:[function(b,N,G){var p=b("../../lib"),n=b("../../components/colorscale/defaults"),k=b("./attributes");N.exports=function(m,a,g,h){function r(d,e){return p.coerce(m,a,k,d,e)}g=r("locations");var l=r("z");if(g&&g.length&&p.isArrayOrTypedArray(l)&&l.length){a._length=Math.min(g.length,l.length);g=r("geojson");if("string"===typeof g&&""!==g||p.isPlainObject(g))var c="geojson-id";"geojson-id"===r("locationmode",
c)&&r("featureidkey");r("text");r("hovertext");r("hovertemplate");r("marker.line.width")&&r("marker.line.color");r("marker.opacity");n(m,a,h,r,{prefix:"",cLetter:"z"});p.coerceSelectionMarkerOpacity(a,r)}else a.visible=!1}},{"../../components/colorscale/defaults":676,"../../lib":803,"./attributes":1009}],1012:[function(b,N,G){N.exports=function(p,n,k,m,a){p.location=n.location;p.z=n.z;n=m[a];n.fIn&&n.fIn.properties&&(p.properties=n.fIn.properties);p.ct=n.ct;return p}},{}],1013:[function(b,N,G){var p=
b("../../plots/cartesian/axes"),n=b("./attributes"),k=b("../../lib").fillText;N.exports=function(m,a,g){var h=m.cd,r=h[0].trace,l=m.subplot,c=[a,g],d=[a+360,g];for(a=0;a<h.length;a++){var e=h[a];var f=!1;if(e._polygons){for(g=0;g<e._polygons.length;g++)e._polygons[g].contains(c)&&(f=!f),e._polygons[g].contains(d)&&(f=!f);if(f)break}}if(f&&e)return m.x0=m.x1=m.xa.c2p(e.ct),m.y0=m.y1=m.ya.c2p(e.ct),m.index=e.index,m.location=e.loc,m.z=e.z,m.zLabel=p.tickText(l.mockAxis,l.mockAxis.c2l(e.z),"hover").text,
m.hovertemplate=e.hovertemplate,h=e,r.hovertemplate||(e=h.hi||r.hoverinfo,l=String(h.loc),a="all"===e?n.hoverinfo.flags:e.split("+"),e=-1!==a.indexOf("name"),f=-1!==a.indexOf("location"),c=-1!==a.indexOf("z"),a=-1!==a.indexOf("text"),g=[],!e&&f?m.nameOverride=l:(e&&(m.nameOverride=r.name),f&&g.push(l)),c&&g.push(m.zLabel),a&&k(h,r,g),m.extraText=g.join("\x3cbr\x3e")),[m]}},{"../../lib":803,"../../plots/cartesian/axes":854,"./attributes":1009}],1014:[function(b,N,G){N.exports={attributes:b("./attributes"),
supplyDefaults:b("./defaults"),colorbar:b("../heatmap/colorbar"),calc:b("./calc"),calcGeoJSON:b("./plot").calcGeoJSON,plot:b("./plot").plot,style:b("./style").style,styleOnSelect:b("./style").styleOnSelect,hoverPoints:b("./hover"),eventData:b("./event_data"),selectPoints:b("./select"),moduleType:"trace",name:"choropleth",basePlotModule:b("../../plots/geo"),categories:["geo","noOpacity","showLegend"],meta:{}}},{"../../plots/geo":887,"../heatmap/colorbar":1088,"./attributes":1009,"./calc":1010,"./defaults":1011,
"./event_data":1012,"./hover":1013,"./plot":1015,"./select":1016,"./style":1017}],1015:[function(b,N,G){var p=b("@plotly/d3"),n=b("../../lib"),k=b("../../lib/geo_location_utils"),m=b("../../lib/topojson_utils").getTopojsonFeatures,a=b("../../plots/cartesian/autorange").findExtremes,g=b("./style").style;N.exports={calcGeoJSON:function(h,r){var l=h[0].trace;r=r[l.geo];var c=r._subplot,d=l.locationmode,e=l._length,f="geojson-id"===d?k.extractTraceFeature(h):m(l,c.topojson);c=[];for(var q=[],t=0;t<e;t++){var w=
h[t],x="geojson-id"===d?w.fOut:k.locationToFeature(d,w.loc,f);x?(w.geojson=x,w.ct=x.properties.ct,w._polygons=k.feature2polygons(x),w=k.computeBbox(x),c.push(w[0],w[2]),q.push(w[1],w[3])):w.geojson=null}"geojson"===r.fitbounds&&"geojson-id"===d&&(h=k.computeBbox(k.getTraceGeojson(l)),c=[h[0],h[2]],q=[h[1],h[3]]);h={padded:!0};l._extremes.lon=a(r.lonaxis._ax,c,h);l._extremes.lat=a(r.lataxis._ax,q,h)},plot:function(h,r,l){r=r.layers.backplot.select(".choroplethlayer");n.makeTraceGroups(r,l,"trace choropleth").each(function(c){var d=
p.select(this).selectAll("path.choroplethlocation").data(n.identity);d.enter().append("path").classed("choroplethlocation",!0);d.exit().remove();g(h,c)})}}},{"../../lib":803,"../../lib/geo_location_utils":796,"../../lib/topojson_utils":832,"../../plots/cartesian/autorange":853,"./style":1017,"@plotly/d3":58}],1016:[function(b,N,G){N.exports=function(p,n){var k=p.cd,m=p.xaxis,a=p.yaxis,g=[],h,r;if(!1===n)for(h=0;h<k.length;h++)k[h].selected=0;else for(h=0;h<k.length;h++){var l=k[h];if(r=l.ct){var c=
m.c2p(r);var d=a.c2p(r);n.contains([c,d],null,h,p)?(g.push({pointNumber:h,lon:r[0],lat:r[1]}),l.selected=1):l.selected=0}}return g}},{}],1017:[function(b,N,G){function p(g,h){var r=h[0].trace;h=h[0].node3.selectAll(".choroplethlocation");var l=r.marker||{},c=l.line||{},d=a.makeColorScaleFuncFromTrace(r);h.each(function(e){n.select(this).attr("fill",d(e.z)).call(k.stroke,e.mlc||c.color).call(m.dashLine,"",e.mlw||c.width||0).style("opacity",l.opacity)});m.selectedPointStyle(h,r,g)}var n=b("@plotly/d3"),
k=b("../../components/color"),m=b("../../components/drawing"),a=b("../../components/colorscale");N.exports={style:function(g,h){h&&p(g,h)},styleOnSelect:function(g,h){var r=h[0].node3,l=h[0].trace;l.selectedpoints?m.selectedPointStyle(r.selectAll(".choroplethlocation"),l,g):p(g,h)}}},{"../../components/color":666,"../../components/colorscale":678,"../../components/drawing":688,"@plotly/d3":58}],1018:[function(b,N,G){G=b("../choropleth/attributes");var p=b("../../components/colorscale/attributes"),
n=b("../../plots/template_attributes").hovertemplateAttrs,k=b("../../plots/attributes");b=b("../../lib/extend").extendFlat;N.exports=b({locations:{valType:"data_array",editType:"calc"},z:{valType:"data_array",editType:"calc"},geojson:{valType:"any",editType:"calc"},featureidkey:b({},G.featureidkey,{}),below:{valType:"string",editType:"plot"},text:G.text,hovertext:G.hovertext,marker:{line:{color:b({},G.marker.line.color,{editType:"plot"}),width:b({},G.marker.line.width,{editType:"plot"}),editType:"calc"},
opacity:b({},G.marker.opacity,{editType:"plot"}),editType:"calc"},selected:{marker:{opacity:b({},G.selected.marker.opacity,{editType:"plot"}),editType:"plot"},editType:"plot"},unselected:{marker:{opacity:b({},G.unselected.marker.opacity,{editType:"plot"}),editType:"plot"},editType:"plot"},hoverinfo:G.hoverinfo,hovertemplate:n({},{keys:["properties"]}),showlegend:b({},k.showlegend,{dflt:!1})},p("",{cLetter:"z",editTypeOverride:"calc"}))},{"../../components/colorscale/attributes":673,"../../lib/extend":793,
"../../plots/attributes":850,"../../plots/template_attributes":926,"../choropleth/attributes":1009}],1019:[function(b,N,G){function p(r){var l=r[0].trace,c=l._opts;if(l.selectedpoints){l=a.makeSelectedPointStyleFns(l);for(var d=0;d<r.length;d++){var e=r[d];e.fOut&&(e.fOut.properties.mo2=l.selectedOpacityFn(e))}r={type:"identity",property:"mo2"}}else r=k.isArrayOrTypedArray(l.marker.opacity)?{type:"identity",property:"mo"}:l.marker.opacity;k.extendFlat(c.fill.paint,{"fill-opacity":r});k.extendFlat(c.line.paint,
{"line-opacity":r});return c}var n=b("fast-isnumeric"),k=b("../../lib"),m=b("../../components/colorscale"),a=b("../../components/drawing"),g=b("../../lib/geojson_utils").makeBlank,h=b("../../lib/geo_location_utils");N.exports={convert:function(r){var l=r[0].trace,c=!0===l.visible&&0!==l._length,d={layout:{visibility:"none"},paint:{}},e={layout:{visibility:"none"},paint:{}},f=l._opts={fill:d,line:e,geojson:g()};if(!c)return f;c=h.extractTraceFeature(r);if(!c)return f;var q=m.makeColorScaleFuncFromTrace(l),
t=l.marker;l=t.line||{};var w;k.isArrayOrTypedArray(t.opacity)&&(w=function(v){v=v.mo;return n(v)?+k.constrain(v,0,1):0});var x;k.isArrayOrTypedArray(l.color)&&(x=function(v){return v.mlc});var z;k.isArrayOrTypedArray(l.width)&&(z=function(v){return v.mlw});for(var B=0;B<r.length;B++){var A=r[B],D=A.fOut;if(D){var C=D.properties;C.fc=q(A.z);w&&(C.mo=w(A));x&&(C.mlc=x(A));z&&(C.mlw=z(A));A.ct=C.ct;A._polygons=h.feature2polygons(D)}}w=w?{type:"identity",property:"mo"}:t.opacity;k.extendFlat(d.paint,
{"fill-color":{type:"identity",property:"fc"},"fill-opacity":w});k.extendFlat(e.paint,{"line-color":x?{type:"identity",property:"mlc"}:l.color,"line-width":z?{type:"identity",property:"mlw"}:l.width,"line-opacity":w});d.layout.visibility="visible";e.layout.visibility="visible";f.geojson={type:"FeatureCollection",features:c};p(r);return f},convertOnSelect:p}},{"../../components/colorscale":678,"../../components/drawing":688,"../../lib":803,"../../lib/geo_location_utils":796,"../../lib/geojson_utils":797,
"fast-isnumeric":249}],1020:[function(b,N,G){var p=b("../../lib"),n=b("../../components/colorscale/defaults"),k=b("./attributes");N.exports=function(m,a,g,h){function r(d,e){return p.coerce(m,a,k,d,e)}g=r("locations");var l=r("z"),c=r("geojson");p.isArrayOrTypedArray(g)&&g.length&&p.isArrayOrTypedArray(l)&&l.length&&("string"===typeof c&&""!==c||p.isPlainObject(c))?(r("featureidkey"),a._length=Math.min(g.length,l.length),r("below"),r("text"),r("hovertext"),r("hovertemplate"),r("marker.line.width")&&
r("marker.line.color"),r("marker.opacity"),n(m,a,h,r,{prefix:"",cLetter:"z"}),p.coerceSelectionMarkerOpacity(a,r)):a.visible=!1}},{"../../components/colorscale/defaults":676,"../../lib":803,"./attributes":1018}],1021:[function(b,N,G){N.exports={attributes:b("./attributes"),supplyDefaults:b("./defaults"),colorbar:b("../heatmap/colorbar"),calc:b("../choropleth/calc"),plot:b("./plot"),hoverPoints:b("../choropleth/hover"),eventData:b("../choropleth/event_data"),selectPoints:b("../choropleth/select"),
styleOnSelect:function(p,n){n&&n[0].trace._glTrace.updateOnSelect(n)},getBelow:function(p,n){p=n.getMapLayers();for(n=p.length-2;0<=n;n--){var k=p[n].id;if("string"===typeof k&&0===k.indexOf("water"))for(var m=n+1;m<p.length;m++)if(k=p[m].id,"string"===typeof k&&-1===k.indexOf("plotly-"))return k}},moduleType:"trace",name:"choroplethmapbox",basePlotModule:b("../../plots/mapbox"),categories:["mapbox","gl","noOpacity","showLegend"],meta:{hr_name:"choropleth_mapbox"}}},{"../../plots/mapbox":911,"../choropleth/calc":1010,
"../choropleth/event_data":1012,"../choropleth/hover":1013,"../choropleth/select":1016,"../heatmap/colorbar":1088,"./attributes":1018,"./defaults":1020,"./plot":1022}],1022:[function(b,N,G){function p(a,g){this.type="choroplethmapbox";this.subplot=a;this.uid=g;this.sourceId="source-"+g;this.layerList=[["fill",m+g+"-fill"],["line",m+g+"-line"]];this.below=null}var n=b("./convert").convert,k=b("./convert").convertOnSelect,m=b("../../plots/mapbox/constants").traceLayerPrefix;b=p.prototype;b.update=function(a){this._update(n(a))};
b.updateOnSelect=function(a){this._update(k(a))};b._update=function(a){var g=this.subplot,h=this.layerList,r=g.belowLookup["trace-"+this.uid];g.map.getSource(this.sourceId).setData(a.geojson);r!==this.below&&(this._removeLayers(),this._addLayers(a,r),this.below=r);for(r=0;r<h.length;r++){var l=h[r],c=l[1];l=a[l[0]];g.setOptions(c,"setLayoutProperty",l.layout);"visible"===l.layout.visibility&&g.setOptions(c,"setPaintProperty",l.paint)}};b._addLayers=function(a,g){for(var h=this.subplot,r=this.layerList,
l=this.sourceId,c=0;c<r.length;c++){var d=r[c],e=d[0],f=a[e];h.addLayer({type:e,id:d[1],source:l,layout:f.layout,paint:f.paint},g)}};b._removeLayers=function(){for(var a=this.subplot.map,g=this.layerList,h=g.length-1;0<=h;h--)a.removeLayer(g[h][1])};b.dispose=function(){var a=this.subplot.map;this._removeLayers();a.removeSource(this.sourceId)};N.exports=function(a,g){var h=g[0].trace,r=new p(a,h.uid),l=r.sourceId,c=n(g);h=r.below=a.belowLookup["trace-"+h.uid];a.map.addSource(l,{type:"geojson",data:c.geojson});
r._addLayers(c,h);return g[0].trace._glTrace=r}},{"../../plots/mapbox/constants":909,"./convert":1019}],1023:[function(b,N,G){G=b("../../components/colorscale/attributes");var p=b("../../plots/cartesian/axis_format_attributes").axisHoverFormat,n=b("../../plots/template_attributes").hovertemplateAttrs,k=b("../mesh3d/attributes"),m=b("../../plots/attributes");b=b("../../lib/extend").extendFlat;var a={x:{valType:"data_array",editType:"calc+clearAxisTypes"},y:{valType:"data_array",editType:"calc+clearAxisTypes"},
z:{valType:"data_array",editType:"calc+clearAxisTypes"},u:{valType:"data_array",editType:"calc"},v:{valType:"data_array",editType:"calc"},w:{valType:"data_array",editType:"calc"},sizemode:{valType:"enumerated",values:["scaled","absolute"],editType:"calc",dflt:"scaled"},sizeref:{valType:"number",editType:"calc",min:0},anchor:{valType:"enumerated",editType:"calc",values:["tip","tail","cm","center"],dflt:"cm"},text:{valType:"string",dflt:"",arrayOk:!0,editType:"calc"},hovertext:{valType:"string",dflt:"",
arrayOk:!0,editType:"calc"},hovertemplate:n({editType:"calc"},{keys:["norm"]}),uhoverformat:p("u",1),vhoverformat:p("v",1),whoverformat:p("w",1),xhoverformat:p("x"),yhoverformat:p("y"),zhoverformat:p("z"),showlegend:b({},m.showlegend,{dflt:!1})};b(a,G("",{colorAttr:"u/v/w norm",showScaleDflt:!0,editTypeOverride:"calc"}));["opacity","lightposition","lighting"].forEach(function(g){a[g]=k[g]});a.hoverinfo=b({},m.hoverinfo,{editType:"calc",flags:"x y z u v w norm text name".split(" "),dflt:"x+y+z+norm+text+name"});
a.transforms=void 0;N.exports=a},{"../../components/colorscale/attributes":673,"../../lib/extend":793,"../../plots/attributes":850,"../../plots/cartesian/axis_format_attributes":857,"../../plots/template_attributes":926,"../mesh3d/attributes":1159}],1024:[function(b,N,G){var p=b("../../components/colorscale/calc");N.exports=function(n,k){for(var m=k.u,a=k.v,g=k.w,h=Math.min(k.x.length,k.y.length,k.z.length,m.length,a.length,g.length),r=-Infinity,l=Infinity,c=0;c<h;c++){var d=m[c],e=a[c],f=g[c];d=
Math.sqrt(d*d+e*e+f*f);r=Math.max(r,d);l=Math.min(l,d)}k._len=h;k._normMax=r;p(n,k,{vals:[l,r],containerStr:"",cLetter:"c"})}},{"../../components/colorscale/calc":674}],1025:[function(b,N,G){function p(e,f){this.scene=e;this.uid=f;this.data=this.mesh=null}function n(e,f){function q(z,B){var A=t[B],D=w[l[B]];return a(z,function(C){return A.d2l(C)*D})}var t=e.fullSceneLayout,w=e.dataScale;e={};e.vectors=r(q(f.u,"xaxis"),q(f.v,"yaxis"),q(f.w,"zaxis"),f._len);e.positions=r(q(f.x,"xaxis"),q(f.y,"yaxis"),
q(f.z,"zaxis"),f._len);var x=h(f);e.colormap=g(f);e.vertexIntensityBounds=[x.min/f._normMax,x.max/f._normMax];e.coneOffset=c[f.anchor];e.coneSize="scaled"===f.sizemode?f.sizeref||.5:f.sizeref&&f._normMax?f.sizeref/f._normMax:.5;e=k(e);x=f.lightposition;e.lightPosition=[x.x,x.y,x.z];e.ambient=f.lighting.ambient;e.diffuse=f.lighting.diffuse;e.specular=f.lighting.specular;e.roughness=f.lighting.roughness;e.fresnel=f.lighting.fresnel;e.opacity=f.opacity;f._pad=d[f.anchor]*e.vectorScale*e.coneScale*f._normMax;
return e}var k=b("gl-cone3d"),m=b("gl-cone3d").createConeMesh,a=b("../../lib").simpleMap,g=b("../../lib/gl_format_color").parseColorScale,h=b("../../components/colorscale").extractOpts,r=b("../../plots/gl3d/zip3");b=p.prototype;b.handlePick=function(e){if(e.object===this.mesh){var f=e.index=e.data.index,q=this.data.u[f],t=this.data.v[f],w=this.data.w[f];e.traceCoordinate=[this.data.x[f],this.data.y[f],this.data.z[f],q,t,w,Math.sqrt(q*q+t*t+w*w)];q=this.data.hovertext||this.data.text;Array.isArray(q)&&
void 0!==q[f]?e.textLabel=q[f]:q&&(e.textLabel=q);return!0}};var l={xaxis:0,yaxis:1,zaxis:2},c={tip:1,tail:0,cm:.25,center:.5},d={tip:1,tail:1,cm:.75,center:.5};b.update=function(e){this.data=e;e=n(this.scene,e);this.mesh.update(e)};b.dispose=function(){this.scene.glplot.remove(this.mesh);this.mesh.dispose()};N.exports=function(e,f){var q=e.glplot.gl,t=n(e,f);q=m(q,t);t=new p(e,f.uid);t.mesh=q;t.data=f;q._trace=t;e.glplot.add(q);return t}},{"../../components/colorscale":678,"../../lib":803,"../../lib/gl_format_color":799,
"../../plots/gl3d/zip3":907,"gl-cone3d":268}],1026:[function(b,N,G){var p=b("../../lib"),n=b("../../components/colorscale/defaults"),k=b("./attributes");N.exports=function(m,a,g,h){function r(q,t){return p.coerce(m,a,k,q,t)}g=r("u");var l=r("v"),c=r("w"),d=r("x"),e=r("y"),f=r("z");g&&g.length&&l&&l.length&&c&&c.length&&d&&d.length&&e&&e.length&&f&&f.length?(r("sizeref"),r("sizemode"),r("anchor"),r("lighting.ambient"),r("lighting.diffuse"),r("lighting.specular"),r("lighting.roughness"),r("lighting.fresnel"),
r("lightposition.x"),r("lightposition.y"),r("lightposition.z"),n(m,a,h,r,{prefix:"",cLetter:"c"}),r("text"),r("hovertext"),r("hovertemplate"),r("uhoverformat"),r("vhoverformat"),r("whoverformat"),r("xhoverformat"),r("yhoverformat"),r("zhoverformat"),a._length=null):a.visible=!1}},{"../../components/colorscale/defaults":676,"../../lib":803,"./attributes":1023}],1027:[function(b,N,G){N.exports={moduleType:"trace",name:"cone",basePlotModule:b("../../plots/gl3d"),categories:["gl3d","showLegend"],attributes:b("./attributes"),
supplyDefaults:b("./defaults"),colorbar:{min:"cmin",max:"cmax"},calc:b("./calc"),plot:b("./convert"),eventData:function(p,n){p.norm=n.traceCoordinate[6];return p},meta:{}}},{"../../plots/gl3d":896,"./attributes":1023,"./calc":1024,"./convert":1025,"./defaults":1026}],1028:[function(b,N,G){G=b("../heatmap/attributes");var p=b("../scatter/attributes"),n=b("../../plots/cartesian/axis_format_attributes"),k=n.axisHoverFormat;n=n.descriptionOnlyNumbers;var m=b("../../components/colorscale/attributes"),
a=b("../../components/drawing/attributes").dash,g=b("../../plots/font_attributes"),h=b("../../lib/extend").extendFlat,r=b("../../constants/filter_ops");b=r.COMPARISON_OPS2;r=r.INTERVAL_OPS;var l=p.line;N.exports=h({z:G.z,x:G.x,x0:G.x0,dx:G.dx,y:G.y,y0:G.y0,dy:G.dy,xperiod:G.xperiod,yperiod:G.yperiod,xperiod0:p.xperiod0,yperiod0:p.yperiod0,xperiodalignment:G.xperiodalignment,yperiodalignment:G.yperiodalignment,text:G.text,hovertext:G.hovertext,transpose:G.transpose,xtype:G.xtype,ytype:G.ytype,xhoverformat:k("x"),
yhoverformat:k("y"),zhoverformat:k("z",1),hovertemplate:G.hovertemplate,hoverongaps:G.hoverongaps,connectgaps:h({},G.connectgaps,{}),fillcolor:{valType:"color",editType:"calc"},autocontour:{valType:"boolean",dflt:!0,editType:"calc",impliedEdits:{"contours.start":void 0,"contours.end":void 0,"contours.size":void 0}},ncontours:{valType:"integer",dflt:15,min:1,editType:"calc"},contours:{type:{valType:"enumerated",values:["levels","constraint"],dflt:"levels",editType:"calc"},start:{valType:"number",dflt:null,
editType:"plot",impliedEdits:{"^autocontour":!1}},end:{valType:"number",dflt:null,editType:"plot",impliedEdits:{"^autocontour":!1}},size:{valType:"number",dflt:null,min:0,editType:"plot",impliedEdits:{"^autocontour":!1}},coloring:{valType:"enumerated",values:["fill","heatmap","lines","none"],dflt:"fill",editType:"calc"},showlines:{valType:"boolean",dflt:!0,editType:"plot"},showlabels:{valType:"boolean",dflt:!1,editType:"plot"},labelfont:g({editType:"plot",colorEditType:"style"}),labelformat:{valType:"string",
dflt:"",editType:"plot",description:n("contour label")},operation:{valType:"enumerated",values:[].concat(b).concat(r),dflt:"\x3d",editType:"calc"},value:{valType:"any",dflt:0,editType:"calc"},editType:"calc",impliedEdits:{autocontour:!1}},line:{color:h({},l.color,{editType:"style+colorbars"}),width:{valType:"number",min:0,editType:"style+colorbars"},dash:a,smoothing:h({},l.smoothing,{}),editType:"plot"}},m("",{cLetter:"z",autoColorDflt:!1,editTypeOverride:"calc"}))},{"../../components/colorscale/attributes":673,
"../../components/drawing/attributes":687,"../../constants/filter_ops":775,"../../lib/extend":793,"../../plots/cartesian/axis_format_attributes":857,"../../plots/font_attributes":883,"../heatmap/attributes":1085,"../scatter/attributes":1218}],1029:[function(b,N,G){var p=b("../../components/colorscale"),n=b("../heatmap/calc"),k=b("./set_contours"),m=b("./end_plus");N.exports=function(a,g){var h=n(a,g),r=h[0].z;k(g,r);var l=g.contours,c=p.extractOpts(g);"heatmap"===l.coloring&&c.auto&&!1===g.autocontour?
(r=l.start,c=m(l),l=l.size||1,c=Math.floor((c-r)/l)+1,isFinite(l)||(c=l=1),r-=l/2,l=[r,r+c*l]):l=r;p.calc(a,g,{vals:l,cLetter:"z"});return h}},{"../../components/colorscale":678,"../heatmap/calc":1086,"./end_plus":1039,"./set_contours":1047}],1030:[function(b,N,G){N.exports=function(p,n){var k=p[0],m=k.z,a;switch(n.type){case "levels":k=Math.min(m[0][0],m[0][1]);for(a=0;a<p.length;a++){var g=p[a];g.prefixBoundary=!g.edgepaths.length&&(k>g.level||g.starts.length&&k===g.level)}break;case "constraint":if(k.prefixBoundary=
!1,!k.edgepaths.length){var h=k.x.length,r=k.y.length;p=-Infinity;g=Infinity;for(a=0;a<r;a++)g=Math.min(g,m[a][0]),g=Math.min(g,m[a][h-1]),p=Math.max(p,m[a][0]),p=Math.max(p,m[a][h-1]);for(a=1;a<h-1;a++)g=Math.min(g,m[0][a]),g=Math.min(g,m[r-1][a]),p=Math.max(p,m[0][a]),p=Math.max(p,m[r-1][a]);a=n.value;switch(n._operation){case "\x3e":a>p&&(k.prefixBoundary=!0);break;case "\x3c":if(a<g||k.starts.length&&a===g)k.prefixBoundary=!0;break;case "[]":n=Math.min(a[0],a[1]);a=Math.max(a[0],a[1]);if(a<g||
n>p||k.starts.length&&a===g)k.prefixBoundary=!0;break;case "][":n=Math.min(a[0],a[1]),a=Math.max(a[0],a[1]),n<g&&a>p&&(k.prefixBoundary=!0)}}}}},{}],1031:[function(b,N,G){var p=b("../../components/colorscale"),n=b("./make_color_map"),k=b("./end_plus");N.exports={min:"zmin",max:"zmax",calc:function(m,a,g){m=a.contours;var h=a.line,r=m.size||1,l=m.coloring,c=n(a,{isColorbar:!0});"heatmap"===l?(a=p.extractOpts(a),g._fillgradient=a.reversescale?p.flipScale(a.colorscale):a.colorscale,g._zrange=[a.min,
a.max]):"fill"===l&&(g._fillcolor=c);g._line={color:"lines"===l?c:h.color,width:!1!==m.showlines?h.width:0,dash:h.dash};g._levels={start:m.start,end:k(m),size:r}}}},{"../../components/colorscale":678,"./end_plus":1039,"./make_color_map":1044}],1032:[function(b,N,G){N.exports={BOTTOMSTART:[1,9,13,104,713],TOPSTART:[4,6,7,104,713],LEFTSTART:[8,12,14,208,1114],RIGHTSTART:[2,3,11,208,1114],NEWDELTA:[null,[-1,0],[0,-1],[-1,0],[1,0],null,[0,-1],[-1,0],[0,1],[0,1],null,[0,1],[1,0],[1,0],[0,-1]],CHOOSESADDLE:{104:[4,
1],208:[2,8],713:[7,13],1114:[11,14]},SADDLEREMAINDER:{1:4,2:8,4:1,7:13,8:2,11:14,13:7,14:11},LABELDISTANCE:2,LABELINCREASE:10,LABELMIN:3,LABELMAX:10,LABELOPTIMIZER:{EDGECOST:1,ANGLECOST:1,NEIGHBORCOST:5,SAMELEVELFACTOR:10,SAMELEVELDISTANCE:5,MAXCOST:100,INITIALSEARCHPOINTS:10,ITERATIONS:5}}},{}],1033:[function(b,N,G){var p=b("fast-isnumeric"),n=b("./label_defaults");G=b("../../components/color");var k=G.addOpacity,m=G.opacity;b=b("../../constants/filter_ops");var a=b.CONSTRAINT_REDUCTION,g=b.COMPARISON_OPS2;
N.exports=function(h,r,l,c,d,e){var f=r.contours,q=l("contours.operation");f._operation=a[q];if(-1===g.indexOf(f.operation))if(l("contours.value",[0,1]),Array.isArray(f.value))if(2<f.value.length)f.value=f.value.slice(2);else if(0===f.length)f.value=[0,1];else if(2>f.length){var t=parseFloat(f.value[0]);f.value=[t,t+1]}else f.value=[parseFloat(f.value[0]),parseFloat(f.value[1])];else p(f.value)&&(t=parseFloat(f.value),f.value=[t,t+1]);else l("contours.value",0),p(f.value)||(Array.isArray(f.value)?
f.value=parseFloat(f.value[0]):f.value=0);if("\x3d"===q)f=f.showlines=!0;else{f=l("contours.showlines");var w=l("fillcolor",k((h.line||{}).color||d,.5))}if(f){h=w&&m(w)?k(r.fillcolor,1):d;var x=l("line.color",h);l("line.width",2);l("line.dash")}l("line.smoothing");n(l,c,x,e)}},{"../../components/color":666,"../../constants/filter_ops":775,"./label_defaults":1043,"fast-isnumeric":249}],1034:[function(b,N,G){function p(g,h){function r(d){return a(d)?+d:null}var l=Array.isArray(h),c;-1!==m.COMPARISON_OPS2.indexOf(g)?
c=l?r(h[0]):r(h):-1!==m.INTERVAL_OPS.indexOf(g)?c=l?[r(h[0]),r(h[1])]:[r(h),r(h)]:-1!==m.SET_OPS.indexOf(g)&&(c=l?h.map(r):[r(h)]);return c}function n(g){return function(h){h=p(g,h);var r=Math.min(h[0],h[1]);h=Math.max(h[0],h[1]);return{start:r,end:h,size:h-r}}}function k(g){return function(h){h=p(g,h);return{start:h,end:Infinity,size:Infinity}}}var m=b("../../constants/filter_ops"),a=b("fast-isnumeric");N.exports={"[]":n("[]"),"][":n("]["),"\x3e":k("\x3e"),"\x3c":k("\x3c"),"\x3d":k("\x3d")}},{"../../constants/filter_ops":775,
"fast-isnumeric":249}],1035:[function(b,N,G){N.exports=function(p,n,k,m){p=m("contours.start");m=m("contours.end");m=!1===p||!1===m;p=k("contours.size");(m?!(n.autocontour=!0):!k("autocontour",!1))&&p||k("ncontours")}},{}],1036:[function(b,N,G){function p(k){return n.extendFlat({},k,{edgepaths:n.extendDeep([],k.edgepaths),paths:n.extendDeep([],k.paths),starts:n.extendDeep([],k.starts)})}var n=b("../../lib");N.exports=function(k,m){var a=function(r){return r.reverse()},g=function(r){return r};switch(m){case "\x3d":case "\x3c":return k;
case "\x3e":1!==k.length&&n.warn("Contour data invalid for the specified inequality operation.");var h=k[0];for(m=0;m<h.edgepaths.length;m++)h.edgepaths[m]=a(h.edgepaths[m]);for(m=0;m<h.paths.length;m++)h.paths[m]=a(h.paths[m]);for(m=0;m<h.starts.length;m++)h.starts[m]=a(h.starts[m]);return k;case "][":m=a,a=g,g=m;case "[]":2!==k.length&&n.warn("Contour data invalid for the specified inequality range operation.");h=p(k[0]);k=p(k[1]);for(m=0;m<h.edgepaths.length;m++)h.edgepaths[m]=a(h.edgepaths[m]);
for(m=0;m<h.paths.length;m++)h.paths[m]=a(h.paths[m]);for(m=0;m<h.starts.length;m++)h.starts[m]=a(h.starts[m]);for(;k.edgepaths.length;)h.edgepaths.push(g(k.edgepaths.shift()));for(;k.paths.length;)h.paths.push(g(k.paths.shift()));for(;k.starts.length;)h.starts.push(g(k.starts.shift()));return[h]}}},{"../../lib":803}],1037:[function(b,N,G){var p=b("../../lib"),n=b("../heatmap/xyz_defaults"),k=b("../scatter/period_defaults"),m=b("./constraint_defaults"),a=b("./contours_defaults"),g=b("./style_defaults"),
h=b("./attributes");N.exports=function(r,l,c,d){function e(t,w){return p.coerce(r,l,h,t,w)}function f(t){return p.coerce2(r,l,h,t)}if(n(r,l,e,d)){k(r,l,d,e);e("xhoverformat");e("yhoverformat");e("text");e("hovertext");e("hovertemplate");e("hoverongaps");var q="constraint"===e("contours.type");e("connectgaps",p.isArray1D(l.z));q?m(r,l,e,d,c):(a(r,l,e,f),g(r,l,e,d))}else l.visible=!1}},{"../../lib":803,"../heatmap/xyz_defaults":1099,"../scatter/period_defaults":1238,"./attributes":1028,"./constraint_defaults":1033,
"./contours_defaults":1035,"./style_defaults":1049}],1038:[function(b,N,G){var p=b("../../lib"),n=b("./constraint_mapping"),k=b("./end_plus");N.exports=function(m,a,g){var h="constraint"===m.type?n[m._operation](m.value):m,r=h.size,l=[],c=k(h),d=g.trace._carpetTrace;a=d?{xaxis:d.aaxis,yaxis:d.baxis,x:g.a,y:g.b}:{xaxis:a.xaxis,yaxis:a.yaxis,x:g.x,y:g.y};for(h=h.start;h<c;h+=r)if(l.push(p.extendFlat({level:h,crossings:{},starts:[],edgepaths:[],paths:[],z:g.z,smoothing:g.trace.line.smoothing},a)),1E3<
l.length){p.warn("Too many contours, clipping at 1000",m);break}return l}},{"../../lib":803,"./constraint_mapping":1034,"./end_plus":1039}],1039:[function(b,N,G){N.exports=function(p){return p.end+p.size/1E6}},{}],1040:[function(b,N,G){function p(g,h,r,l){return Math.abs(g[0]-h[0])<r&&Math.abs(g[1]-h[1])<l}function n(g,h,r,l,c){var d=h.join(","),e=g.crossings[d],f=e,q=0,t=0;20<f&&r?208===f||1114===f?q=0===h[0]?1:-1:t=0===h[1]?1:-1:-1!==a.BOTTOMSTART.indexOf(f)?t=1:-1!==a.LEFTSTART.indexOf(f)?q=1:
-1!==a.TOPSTART.indexOf(f)?t=-1:q=-1;var w=[q,t];f=[k(g,h,[-w[0],-w[1]])];var x=g.z.length,z=g.z[0].length;q=h.slice();var B=w.slice();for(t=0;1E4>t;t++){20<e?(e=a.CHOOSESADDLE[e][0>(w[0]||w[1])?0:1],g.crossings[d]=a.SADDLEREMAINDER[e]):delete g.crossings[d];w=a.NEWDELTA[e];if(!w){m.log("Found bad marching index:",e,h,g.level);break}f.push(k(g,h,w));h[0]+=w[0];h[1]+=w[1];d=h.join(",");p(f[f.length-1],f[f.length-2],l,c)&&f.pop();e=w[0]&&(0>h[0]||h[0]>z-2)||w[1]&&(0>h[1]||h[1]>x-2);if(h[0]===q[0]&&
h[1]===q[1]&&w[0]===B[0]&&w[1]===B[1]||r&&e)break;e=g.crossings[d]}1E4===t&&m.log("Infinite loop in contour?");h=p(f[0],f[f.length-1],l,c);w=0;x=.2*g.smoothing;d=[];e=0;for(t=1;t<f.length;t++){B=f[t];var A=f[t-1];z=B[2]-A[2];B=B[3]-A[3];z=Math.sqrt(z*z+B*B);w+=z;d.push(z)}z=w/d.length*x;for(t=f.length-2;t>=e;t--)if(B=d[t],B<z){x=0;for(w=t-1;w>=e;w--)if(B+d[w]<z)B+=d[w];else break;if(h&&t===f.length-2)for(x=0;x<w;x++)if(B+d[x]<z)B+=d[x];else break;B=t-w+x+1;A=Math.floor((t+w+x+2)/2);B=h||t!==f.length-
2?h||-1!==w?B%2?f[A%f.length]:[(f[A%f.length][0]+f[(A+1)%f.length][0])/2,(f[A%f.length][1]+f[(A+1)%f.length][1])/2]:f[0]:f[f.length-1];f.splice(w+1,t-w+1,B);t=w+1;x&&(e=x);h&&(t===f.length-2?f[x]=f[f.length-1]:0===t&&(f[f.length-1]=f[0]))}f.splice(0,e);for(t=0;t<f.length;t++)f[t].length=2;if(!(2>f.length))if(h)f.pop(),g.paths.push(f);else{r||m.log("Unclosed interior contour?",g.level,q.join(","),f.join("L"));d=!1;for(r=0;r<g.edgepaths.length;r++)if(t=g.edgepaths[r],!d&&p(t[0],f[f.length-1],l,c)){f.pop();
d=!0;e=!1;for(q=0;q<g.edgepaths.length;q++)if(h=g.edgepaths[q],p(h[h.length-1],f[0],l,c)){e=!0;f.shift();g.edgepaths.splice(r,1);q===r?g.paths.push(f.concat(h)):(q>r&&q--,g.edgepaths[q]=h.concat(f,t));break}e||(g.edgepaths[r]=f.concat(t))}for(r=0;r<g.edgepaths.length&&!d;r++)t=g.edgepaths[r],p(t[t.length-1],f[0],l,c)&&(f.shift(),g.edgepaths[r]=t.concat(f),d=!0);d||g.edgepaths.push(f)}}function k(g,h,r){var l=h[0]+Math.max(r[0],0);h=h[1]+Math.max(r[1],0);var c=g.z[h][l],d=g.xaxis,e=g.yaxis;if(r[1])return r=
(g.level-c)/(g.z[h][l+1]-c),[d.c2p((1-r)*g.x[l]+r*g.x[l+1],!0),e.c2p(g.y[h],!0),l+r,h];r=(g.level-c)/(g.z[h+1][l]-c);return[d.c2p(g.x[l],!0),e.c2p((1-r)*g.y[h]+r*g.y[h+1],!0),l,h+r]}var m=b("../../lib"),a=b("./constants");N.exports=function(g,h,r){var l,c;h=h||.01;r=r||.01;for(c=0;c<g.length;c++){var d=g[c];for(l=0;l<d.starts.length;l++){var e=d.starts[l];n(d,e,"edge",h,r)}for(l=0;Object.keys(d.crossings).length&&1E4>l;)l++,e=Object.keys(d.crossings)[0].split(",").map(Number),n(d,e,void 0,h,r);1E4===
l&&m.log("Infinite loop in contour?")}}},{"../../lib":803,"./constants":1032}],1041:[function(b,N,G){var p=b("../../components/color"),n=b("../heatmap/hover");N.exports=function(k,m,a,g,h){h||(h={});h.isContour=!0;(k=n(k,m,a,g,h))&&k.forEach(function(r){var l=r.trace;"constraint"===l.contours.type&&(l.fillcolor&&p.opacity(l.fillcolor)?r.color=p.addOpacity(l.fillcolor,1):l.contours.showlines&&p.opacity(l.line.color)&&(r.color=p.addOpacity(l.line.color,1)))});return k}},{"../../components/color":666,
"../heatmap/hover":1092}],1042:[function(b,N,G){N.exports={attributes:b("./attributes"),supplyDefaults:b("./defaults"),calc:b("./calc"),plot:b("./plot").plot,style:b("./style"),colorbar:b("./colorbar"),hoverPoints:b("./hover"),moduleType:"trace",name:"contour",basePlotModule:b("../../plots/cartesian"),categories:["cartesian","svg","2dMap","contour","showLegend"],meta:{}}},{"../../plots/cartesian":868,"./attributes":1028,"./calc":1029,"./colorbar":1031,"./defaults":1037,"./hover":1041,"./plot":1046,
"./style":1048}],1043:[function(b,N,G){var p=b("../../lib");N.exports=function(n,k,m,a){a||(a={});n("contours.showlabels")&&(k=k.font,p.coerceFont(n,"contours.labelfont",{family:k.family,size:k.size,color:m}),n("contours.labelformat"));!1!==a.hasHover&&n("zhoverformat")}},{"../../lib":803}],1044:[function(b,N,G){var p=b("@plotly/d3"),n=b("../../components/colorscale"),k=b("./end_plus");N.exports=function(m){var a=m.contours,g=a.start,h=k(a),r=a.size||1,l=Math.floor((h-g)/r)+1,c="lines"===a.coloring?
0:1,d=n.extractOpts(m);isFinite(r)||(l=r=1);var e=d.reversescale?n.flipScale(d.colorscale):d.colorscale,f=e.length;m=Array(f);h=Array(f);var q;if("heatmap"===a.coloring){g=d.min;c=d.max;for(q=0;q<f;q++)d=e[q],m[q]=d[0]*(c-g)+g,h[q]=d[1];r=p.extent([g,c,a.start,a.start+r*(l-1)]);a=r[g<c?0:1];r=r[g<c?1:0];a!==g&&(m.splice(0,0,a),h.splice(0,0,h[0]));r!==c&&(m.push(r),h.push(h[h.length-1]))}else for(q=0;q<f;q++)d=e[q],m[q]=(d[0]*(l+c-1)-c/2)*r+g,h[q]=d[1];return n.makeColorScaleFunc({domain:m,range:h},
{noNumericCheck:!0})}},{"../../components/colorscale":678,"./end_plus":1039,"@plotly/d3":58}],1045:[function(b,N,G){var p=b("./constants");N.exports=function(n){var k=n[0].z,m=k.length,a=k[0].length,g=2===m||2===a,h,r,l;for(r=0;r<m-1;r++){var c=[];0===r&&(c=c.concat(p.BOTTOMSTART));r===m-2&&(c=c.concat(p.TOPSTART));for(h=0;h<a-1;h++){var d=c.slice();0===h&&(d=d.concat(p.LEFTSTART));h===a-2&&(d=d.concat(p.RIGHTSTART));var e=h+","+r;var f=[[k[r][h],k[r][h+1]],[k[r+1][h],k[r+1][h+1]]];for(l=0;l<n.length;l++){var q=
n[l];var t=q.level;var w=(f[0][0]>t?0:1)+(f[0][1]>t?0:2)+(f[1][1]>t?0:4)+(f[1][0]>t?0:8);t=5===w||10===w?t>(f[0][0]+f[0][1]+f[1][0]+f[1][1])/4?5===w?713:1114:5===w?104:208:15===w?0:w;t&&(q.crossings[e]=t,-1!==d.indexOf(t)&&(q.starts.push([h,r]),g&&-1!==d.indexOf(t,d.indexOf(t)+1)&&q.starts.push([h,r])))}}}}},{"./constants":1032}],1046:[function(b,N,G){function p(B,A,D,C){var v="fill"===C.coloring||"constraint"===C.type&&"\x3d"!==C._operation,y="M"+D.join("L")+"Z";v&&w(A,C);B=a.ensureSingle(B,"g",
"contourfill").selectAll("path").data(v?A:[]);B.enter().append("path");B.exit().remove();B.each(function(F){(F=(F.prefixBoundary?y:"")+n(F,D))?m.select(this).attr("d",F).style("stroke","none"):m.select(this).remove()})}function n(B,A){for(var D="",C=0,v=B.edgepaths.map(function(O,I){return I}),y=!0,F,J,K,M;v.length;){J=g.smoothopen(B.edgepaths[C],B.smoothing);D+=y?J:J.replace(/^M/,"L");v.splice(v.indexOf(C),1);y=B.edgepaths[C][B.edgepaths[C].length-1];K=-1;for(J=0;4>J;J++){if(!y){a.log("Missing end?",
C,B);break}.01>Math.abs(y[1]-A[0][1])&&!(.01>Math.abs(y[0]-A[2][0]))?F=A[1]:.01>Math.abs(y[0]-A[0][0])?F=A[0]:.01>Math.abs(y[1]-A[2][1])?F=A[3]:.01>Math.abs(y[0]-A[2][0])&&(F=A[2]);for(M=0;M<B.edgepaths.length;M++){var H=B.edgepaths[M][0];.01>Math.abs(y[0]-F[0])?.01>Math.abs(y[0]-H[0])&&0<=(H[1]-y[1])*(F[1]-H[1])&&(F=H,K=M):.01>Math.abs(y[1]-F[1])?.01>Math.abs(y[1]-H[1])&&0<=(H[0]-y[0])*(F[0]-H[0])&&(F=H,K=M):a.log("endpt to newendpt is not vert. or horz.",y,F,H)}y=F;if(0<=K)break;D+="L"+F}if(K===
B.edgepaths.length){a.log("unclosed perimeter path");break}C=K;if(y=-1===v.indexOf(C))C=v[0],D+="Z"}for(C=0;C<B.paths.length;C++)D+=g.smoothclosed(B.paths[C],B.smoothing);return D}function k(B,A,D,C,v){var y=a.ensureSingle(B,"g","contourlines"),F=!1!==v.showlines,J=v.showlabels,K=F&&J,M=G.createLines(y,F||J,A);y=G.createLineClip(y,K,D,C.trace.uid);B=B.selectAll("g.contourlabels").data(J?[0]:[]);B.exit().remove();B.enter().append("g").classed("contourlabels",!0);if(J){var H=[],O=[];a.clearLocationCache();
var I=G.labelFormatter(D,C),L=g.tester.append("text").attr("data-notex",1).call(g.font,v.labelfont),Q=A[0].xaxis,Z=A[0].yaxis;v=Q._length;var ba=Z._length,V=Q.range,S=Z.range,T=a.aggNums(Math.min,null,C.x),fa=a.aggNums(Math.max,null,C.x),W=a.aggNums(Math.min,null,C.y),aa=a.aggNums(Math.max,null,C.y);C=Math.max(Q.c2p(T,!0),0);Q=Math.min(Q.c2p(fa,!0),v);fa=Math.max(Z.c2p(aa,!0),0);Z=Math.min(Z.c2p(W,!0),ba);var ja={};V[0]<V[1]?(ja.left=C,ja.right=Q):(ja.left=Q,ja.right=C);S[0]<S[1]?(ja.top=fa,ja.bottom=
Z):(ja.top=Z,ja.bottom=fa);ja.middle=(ja.top+ja.bottom)/2;ja.center=(ja.left+ja.right)/2;H.push([[ja.left,ja.top],[ja.right,ja.top],[ja.right,ja.bottom],[ja.left,ja.bottom]]);var ma=x.LABELDISTANCE*Math.sqrt(v*v+ba*ba)/Math.max(1,A.length/x.LABELINCREASE);M.each(function(ia){var ra=G.calcTextOpts(ia.level,I,L,D);m.select(this).selectAll("path").each(function(){var wa=a.getVisibleSegment(this,ja,ra.height/2);if(wa&&!(wa.len<(ra.width+ra.height)*x.LABELMIN))for(var pa=Math.min(Math.ceil(wa.len/ma),
x.LABELMAX),la=0;la<pa;la++){var ka=G.findBestTextLocation(this,wa,ra,O,ja);if(!ka)break;G.addLabelData(ka,ra,O,H)}})});L.remove();G.drawLabels(B,O,D,y,K?H:null)}J&&!F&&M.remove()}var m=b("@plotly/d3"),a=b("../../lib"),g=b("../../components/drawing"),h=b("../../components/colorscale"),r=b("../../lib/svg_text_utils"),l=b("../../plots/cartesian/axes"),c=b("../../plots/cartesian/set_convert"),d=b("../heatmap/plot"),e=b("./make_crossings"),f=b("./find_all_paths"),q=b("./empty_pathinfo"),t=b("./convert_to_constraints"),
w=b("./close_boundaries"),x=b("./constants"),z=x.LABELOPTIMIZER;G.plot=function(B,A,D,C){var v=A.xaxis,y=A.yaxis;a.makeTraceGroups(C,D,"contour").each(function(F){var J=m.select(this),K=F[0],M=K.x,H=K.y,O=K.trace.contours,I=q(O,A,K),L=a.ensureSingle(J,"g","heatmapcoloring"),Q=[];"heatmap"===O.coloring&&(Q=[F]);d(B,A,Q,L);e(I);f(I);F=v.c2p(M[0],!0);M=v.c2p(M[M.length-1],!0);L=y.c2p(H[0],!0);H=y.c2p(H[H.length-1],!0);H=[[F,H],[M,H],[M,L],[F,L]];M=I;"constraint"===O.type&&(M=t(I,O._operation));F=a.ensureSingle(J,
"g","contourbg").selectAll("path").data("fill"===O.coloring?[0]:[]);F.enter().append("path");F.exit().remove();F.attr("d","M"+H.join("L")+"Z").style("stroke","none");p(J,M,H,O);k(J,I,B,K,O);M=K.trace;O="clip"+M.uid;I=B._fullLayout._clips.selectAll("#"+O).data(M.connectgaps?[]:[0]);I.enter().append("clipPath").classed("contourclip",!0).attr("id",O);I.exit().remove();if(!1===M.connectgaps){M=A.xaxis;F=A.yaxis;L=K.x;Q=K.y;var Z=K.trace._emptypoints,ba=[],V=K.z.length,S=K.z[0].length,T,fa=[];for(T=0;T<
S;T++)fa.push(1);for(T=0;T<V;T++)ba.push(fa.slice());for(T=0;T<Z.length;T++)V=Z[T],ba[V[0]][V[1]]=0;K.zmask=ba;K={level:.9,crossings:{},starts:[],edgepaths:[],paths:[],xaxis:M,yaxis:F,x:L,y:Q,z:ba,smoothing:0};e([K]);f([K]);w([K],{type:"levels"});a.ensureSingle(I,"path","").attr("d",(K.prefixBoundary?"M"+H.join("L")+"Z":"")+n(K,H))}else O=null;g.setClipUrl(J,O,B)})};G.createLines=function(B,A,D){var C=D[0].smoothing;B=B.selectAll("g.contourlevel").data(A?D:[]);B.exit().remove();B.enter().append("g").classed("contourlevel",
!0);A&&(A=B.selectAll("path.openline").data(function(v){return v.pedgepaths||v.edgepaths}),A.exit().remove(),A.enter().append("path").classed("openline",!0),A.attr("d",function(v){return g.smoothopen(v,C)}).style("stroke-miterlimit",1).style("vector-effect","non-scaling-stroke"),A=B.selectAll("path.closedline").data(function(v){return v.ppaths||v.paths}),A.exit().remove(),A.enter().append("path").classed("closedline",!0),A.attr("d",function(v){return g.smoothclosed(v,C)}).style("stroke-miterlimit",
1).style("vector-effect","non-scaling-stroke"));return B};G.createLineClip=function(B,A,D,C){C=A?"clipline"+C:null;A=D._fullLayout._clips.selectAll("#"+C).data(A?[0]:[]);A.exit().remove();A.enter().append("clipPath").classed("contourlineclip",!0).attr("id",C);g.setClipUrl(B,C,D);return A};G.labelFormatter=function(B,A){B=B._fullLayout;var D=A.trace;A=D.contours;var C={type:"linear",_id:"ycontour",showexponent:"all",exponentformat:"B"};A.labelformat?(C.tickformat=A.labelformat,c(C,B)):(D=h.extractOpts(D))&&
D.colorbar&&D.colorbar._axis?C=D.colorbar._axis:("constraint"===A.type?(A=A.value,Array.isArray(A)?C.range=[A[0],A[A.length-1]]:C.range=[A,A]):(C.range=[A.start,A.end],C.nticks=(A.end-A.start)/A.size),C.range[0]===C.range[1]&&(C.range[1]+=C.range[0]||1),C.nticks||(C.nticks=1E3),c(C,B),l.prepTicks(C),C._tmin=null,C._tmax=null);return function(v){return l.tickText(C,v).text}};G.calcTextOpts=function(B,A,D,C){A=A(B);D.text(A).call(r.convertToTspans,C);D=D.node();C=g.bBox(D,!0);return{text:A,width:C.width,
height:C.height,fontSize:+D.style["font-size"].replace("px",""),level:B,dy:(C.top+C.bottom)/2}};G.findBestTextLocation=function(B,A,D,C,v){var y=D.width;if(A.isClosed){var F=A.len/z.INITIALSEARCHPOINTS;var J=A.min+F/2;var K=A.max}else F=(A.len-y)/(z.INITIALSEARCHPOINTS+1),J=A.min+F+y/2,K=A.max-(F+y)/2;for(var M=Infinity,H=0;H<z.ITERATIONS;H++){for(;J<K;J+=F){var O=a.getTextLocation(B,A.total,J,y);a:{var I=D;var L=C,Q=I.width/2,Z=I.height/2,ba=O.x,V=O.y,S=O.theta,T=Math.cos(S)*Q,fa=Math.sin(S)*Q;Q=
(ba>v.center?v.right-ba:ba-v.left)/(T+Math.abs(Math.sin(S)*Z));Z=(V>v.middle?v.bottom-V:V-v.top)/(Math.abs(fa)+Math.cos(S)*Z);if(1>Q||1>Z)I=Infinity;else{Z=z.EDGECOST*(1/(Q-1)+1/(Z-1));Z+=z.ANGLECOST*S*S;S=ba-T;Q=V-fa;ba+=T;V+=fa;for(T=0;T<L.length;T++){fa=L[T];var W=Math.cos(fa.theta)*fa.width/2,aa=Math.sin(fa.theta)*fa.width/2;W=2*a.segmentDistance(S,Q,ba,V,fa.x-W,fa.y-aa,fa.x+W,fa.y+aa)/(I.height+fa.height);aa=(fa=fa.level===I.level)?z.SAMELEVELDISTANCE:1;if(W<=aa){I=Infinity;break a}Z+=z.NEIGHBORCOST*
(fa?z.SAMELEVELFACTOR:1)/(W-aa)}I=Z}}if(I<M){M=I;var ja=O;var ma=J}}if(M>2*z.MAXCOST)break;H&&(F/=2);J=ma-F/2;K=J+1.5*F}if(M<=z.MAXCOST)return ja};G.addLabelData=function(B,A,D,C){var v=A.fontSize,y=A.width+v/3;v=Math.max(0,A.height-v/3);var F=B.x,J=B.y;B=B.theta;var K=Math.sin(B),M=Math.cos(B),H=function(O,I){return[F+O*M-I*K,J+O*K+I*M]};H=[H(-y/2,-v/2),H(-y/2,v/2),H(y/2,v/2),H(y/2,-v/2)];D.push({text:A.text,x:F,y:J,dy:A.dy,theta:B,level:A.level,width:y,height:v});C.push(H)};G.drawLabels=function(B,
A,D,C,v){B=B.selectAll("text").data(A,function(y){return y.text+","+y.x+","+y.y+","+y.theta});B.exit().remove();B.enter().append("text").attr({"data-notex":1,"text-anchor":"middle"}).each(function(y){var F=y.x+Math.sin(y.theta)*y.dy,J=y.y-Math.cos(y.theta)*y.dy;m.select(this).text(y.text).attr({x:F,y:J,transform:"rotate("+180*y.theta/Math.PI+" "+F+" "+J+")"}).call(r.convertToTspans,D)});if(v){B="";for(A=0;A<v.length;A++)B+="M"+v[A].join("L")+"Z";a.ensureSingle(C,"path","").attr("d",B)}}},{"../../components/colorscale":678,
"../../components/drawing":688,"../../lib":803,"../../lib/svg_text_utils":829,"../../plots/cartesian/axes":854,"../../plots/cartesian/set_convert":875,"../heatmap/plot":1096,"./close_boundaries":1030,"./constants":1032,"./convert_to_constraints":1036,"./empty_pathinfo":1038,"./find_all_paths":1040,"./make_crossings":1045,"@plotly/d3":58}],1047:[function(b,N,G){function p(m,a,g){var h={type:"linear",range:[m,a]};n.autoTicks(h,(a-m)/(g||15));return h}var n=b("../../plots/cartesian/axes"),k=b("../../lib");
N.exports=function(m,a){var g=m.contours;if(m.autocontour){var h=m.zmin,r=m.zmax;if(m.zauto||void 0===h)h=k.aggNums(Math.min,null,a);if(m.zauto||void 0===r)r=k.aggNums(Math.max,null,a);a=p(h,r,m.ncontours);g.size=a.dtick;g.start=n.tickFirst(a);a.range.reverse();g.end=n.tickFirst(a);g.start===h&&(g.start+=g.size);g.end===r&&(g.end-=g.size);g.start>g.end&&(g.start=g.end=(g.start+g.end)/2);m._input.contours||(m._input.contours={});k.extendFlat(m._input.contours,{start:g.start,end:g.end,size:g.size});
m._input.autocontour=!0}else"constraint"!==g.type&&(r=g.start,a=g.end,h=m._input.contours,r>a&&(g.start=h.start=a,a=g.end=h.end=r,r=g.start),0<g.size||(m=r===a?1:p(r,a,m.ncontours).dtick,h.size=g.size=m))}},{"../../lib":803,"../../plots/cartesian/axes":854}],1048:[function(b,N,G){var p=b("@plotly/d3"),n=b("../../components/drawing"),k=b("../heatmap/style"),m=b("./make_color_map");N.exports=function(a){var g=p.select(a).selectAll("g.contour");g.style("opacity",function(h){return h[0].trace.opacity});
g.each(function(h){var r=p.select(this);h=h[0].trace;var l=h.contours,c=h.line,d=l.size||1,e=l.start,f="constraint"===l.type,q=!f&&"lines"===l.coloring,t=!f&&"fill"===l.coloring,w=q||t?m(h):null;r.selectAll("g.contourlevel").each(function(B){p.select(this).selectAll("path").call(n.lineGroupStyle,c.width,q?w(B.level):c.color,c.dash)});var x=l.labelfont;r.selectAll("g.contourlabels text").each(function(B){n.font(p.select(this),{family:x.family,size:x.size,color:x.color||(q?w(B.level):c.color)})});if(f)r.selectAll("g.contourfill path").style("fill",
h.fillcolor);else if(t){var z;r.selectAll("g.contourfill path").style("fill",function(B){void 0===z&&(z=B.level);return w(B.level+.5*d)});void 0===z&&(z=e);r.selectAll("g.contourbg path").style("fill",w(z-.5*d))}});k(a)}},{"../../components/drawing":688,"../heatmap/style":1097,"./make_color_map":1044,"@plotly/d3":58}],1049:[function(b,N,G){var p=b("../../components/colorscale/defaults"),n=b("./label_defaults");N.exports=function(k,m,a,g,h){var r=a("contours.coloring"),l,c="";"fill"===r&&(l=a("contours.showlines"));
!1!==l&&("lines"!==r&&(c=a("line.color","#000")),a("line.width",.5),a("line.dash"));"none"!==r&&(!0!==k.showlegend&&(m.showlegend=!1),m._dfltShowLegend=!1,p(k,m,g,a,{prefix:"",cLetter:"z"}));a("line.smoothing");n(a,g,c,h)}},{"../../components/colorscale/defaults":676,"./label_defaults":1043}],1050:[function(b,N,G){G=b("../heatmap/attributes");var p=b("../contour/attributes"),n=b("../../components/colorscale/attributes");b=b("../../lib/extend").extendFlat;var k=p.contours;N.exports=b({carpet:{valType:"string",
editType:"calc"},z:G.z,a:G.x,a0:G.x0,da:G.dx,b:G.y,b0:G.y0,db:G.dy,text:G.text,hovertext:G.hovertext,transpose:G.transpose,atype:G.xtype,btype:G.ytype,fillcolor:p.fillcolor,autocontour:p.autocontour,ncontours:p.ncontours,contours:{type:k.type,start:k.start,end:k.end,size:k.size,coloring:{valType:"enumerated",values:["fill","lines","none"],dflt:"fill",editType:"calc"},showlines:k.showlines,showlabels:k.showlabels,labelfont:k.labelfont,labelformat:k.labelformat,operation:k.operation,value:k.value,editType:"calc",
impliedEdits:{autocontour:!1}},line:{color:p.line.color,width:p.line.width,dash:p.line.dash,smoothing:p.line.smoothing,editType:"plot"},transforms:void 0},n("",{cLetter:"z",autoColorDflt:!1}))},{"../../components/colorscale/attributes":673,"../../lib/extend":793,"../contour/attributes":1028,"../heatmap/attributes":1085}],1051:[function(b,N,G){var p=b("../../components/colorscale/calc"),n=b("../../lib"),k=b("../heatmap/convert_column_xyz"),m=b("../heatmap/clean_2d_array"),a=b("../heatmap/interp2d"),
g=b("../heatmap/find_empties"),h=b("../heatmap/make_bound_array"),r=b("./defaults"),l=b("../carpet/lookup_carpetid"),c=b("../contour/set_contours");N.exports=function(d,e){var f=e._carpetTrace=l(d,e);if(f&&f.visible&&"legendonly"!==f.visible){if(!e.a||!e.b){f=d.data[f.index];var q=d.data[e.index];q.a||(q.a=f.a);q.b||(q.b=f.b);r(q,e,e._defaultColor,d._fullLayout)}f=e._carpetTrace;q=f.aaxis;var t=f.baxis;q._minDtick=0;t._minDtick=0;n.isArray1D(e.z)&&k(e,q,t,"a","b",["z"]);var w=e._a=e._a||e.a;var x=
e._b=e._b||e.b;w=w?q.makeCalcdata(e,"_a"):[];x=x?t.makeCalcdata(e,"_b"):[];var z=e.a0||0;var B=e.da||1;var A=e.b0||0;var D=e.db||1;f=e._z=m(e._z||e.z,e.transpose);e._emptypoints=g(f);a(f,e._emptypoints);var C=n.maxRowLength(f);q=h(e,"scaled"===e.xtype?"":w,z,B,C,q);t=h(e,"scaled"===e.ytype?"":x,A,D,f.length,t);q={a:q,b:t,z:f};"levels"===e.contours.type&&"none"!==e.contours.coloring&&p(d,e,{vals:f,containerStr:"",cLetter:"z"});d=[q];c(e,e._z);return d}}},{"../../components/colorscale/calc":674,"../../lib":803,
"../carpet/lookup_carpetid":1001,"../contour/set_contours":1047,"../heatmap/clean_2d_array":1087,"../heatmap/convert_column_xyz":1089,"../heatmap/find_empties":1091,"../heatmap/interp2d":1094,"../heatmap/make_bound_array":1095,"./defaults":1052}],1052:[function(b,N,G){var p=b("../../lib"),n=b("../heatmap/xyz_defaults"),k=b("./attributes"),m=b("../contour/constraint_defaults"),a=b("../contour/contours_defaults"),g=b("../contour/style_defaults");N.exports=function(h,r,l,c){function d(f,q){return p.coerce(h,
r,k,f,q)}function e(f){return p.coerce2(h,r,k,f)}d("carpet");h.a&&h.b?n(h,r,d,c,"a","b")?(d("text"),"constraint"===d("contours.type")?m(h,r,d,c,l,{hasHover:!1}):(a(h,r,d,e),g(h,r,d,c,{hasHover:!1}))):r.visible=!1:(r._defaultColor=l,r._length=null)}},{"../../lib":803,"../contour/constraint_defaults":1033,"../contour/contours_defaults":1035,"../contour/style_defaults":1049,"../heatmap/xyz_defaults":1099,"./attributes":1050}],1053:[function(b,N,G){N.exports={attributes:b("./attributes"),supplyDefaults:b("./defaults"),
colorbar:b("../contour/colorbar"),calc:b("./calc"),plot:b("./plot"),style:b("../contour/style"),moduleType:"trace",name:"contourcarpet",basePlotModule:b("../../plots/cartesian"),categories:"cartesian svg carpet contour symbols showLegend hasLines carpetDependent noHover noSortingByValue".split(" "),meta:{}}},{"../../plots/cartesian":868,"../contour/colorbar":1031,"../contour/style":1048,"./attributes":1050,"./calc":1051,"./defaults":1052,"./plot":1054}],1054:[function(b,N,G){function p(y,F){var J,
K,M;for(J=0;J<y.length;J++){var H=y[J];var O=H.pedgepaths=[];var I=H.ppaths=[];for(K=0;K<H.edgepaths.length;K++){var L=H.edgepaths[K];var Q=[];for(M=0;M<L.length;M++)Q[M]=F(L[M]);O.push(Q)}for(K=0;K<H.paths.length;K++){L=H.paths[K];O=[];for(M=0;M<L.length;M++)O[M]=F(L[M]);I.push(O)}}}function n(y,F,J,K,M,H,O){var I=q.ensureSingle(y,"g","contourlines"),L=!1!==M.showlines,Q=M.showlabels,Z=L&&Q,ba=x.createLines(I,L||Q,F);I=x.createLineClip(I,Z,J,K.trace.uid);y=y.selectAll("g.contourlabels").data(Q?[0]:
[]);y.exit().remove();y.enter().append("g").classed("contourlabels",!0);if(Q){var V=H.xaxis._length;H=H.yaxis._length;var S=[[[0,0],[V,0],[V,H],[0,H]]],T=[];q.clearLocationCache();var fa=x.labelFormatter(J,K),W=f.tester.append("text").attr("data-notex",1).call(f.font,M.labelfont),aa={left:0,right:V,center:V/2,top:0,bottom:H,middle:H/2},ja=z.LABELDISTANCE*Math.sqrt(V*V+H*H)/Math.max(1,F.length/z.LABELINCREASE);ba.each(function(ma){var ia=x.calcTextOpts(ma.level,fa,W,J);c.select(this).selectAll("path").each(function(ra){var wa=
q.getVisibleSegment(this,aa,ia.height/2);if(wa&&(k(this,ra,ma,wa,O,ia.height),!(wa.len<(ia.width+ia.height)*z.LABELMIN))){ra=Math.min(Math.ceil(wa.len/ja),z.LABELMAX);for(var pa=0;pa<ra;pa++){var la=x.findBestTextLocation(this,wa,ia,T,aa);if(!la)break;x.addLabelData(la,ia,T,S)}}})});W.remove();x.drawLabels(y,T,J,I,Z?S:null)}Q&&!L&&ba.remove()}function k(y,F,J,K,M,H){function O(S,T){var fa=0;if(.1>Math.abs(S[0]-Q)||.1>Math.abs(S[0]-Z)){var W=a(M.dxydb_rough(S[0],S[1],.1));fa=Math.max(fa,H*g(T,W)/2)}if(.1>
Math.abs(S[1]-ba)||.1>Math.abs(S[1]-V))W=a(M.dxyda_rough(S[0],S[1],.1)),fa=Math.max(fa,H*g(T,W)/2);return fa}for(var I,L=0;L<J.pedgepaths.length;L++)F===J.pedgepaths[L]&&(I=J.edgepaths[L]);if(I){var Q=M.a[0],Z=M.a[M.a.length-1],ba=M.b[0],V=M.b[M.b.length-1];F=m(y,0,1);y=m(y,K.total,K.total-1);F=O(I[0],F);I=K.total-O(I[I.length-1],y);K.min<F&&(K.min=F);K.max>I&&(K.max=I);K.len=K.max-K.min}}function m(y,F,J){F=y.getPointAtLength(F);J=y.getPointAtLength(J);y=J.x-F.x;F=J.y-F.y;J=Math.sqrt(y*y+F*F);return[y/
J,F/J]}function a(y){var F=Math.sqrt(y[0]*y[0]+y[1]*y[1]);return[y[0]/F,y[1]/F]}function g(y,F){y=Math.abs(y[0]*F[0]+y[1]*F[1]);return Math.sqrt(1-y*y)/y}function h(y,F,J,K,M,H){var O,I=q.ensureSingle(y,"g","contourbg").selectAll("path").data("fill"!==H||M?[]:[0]);I.enter().append("path");I.exit().remove();var L=[];for(O=0;O<F.length;O++)y=F[O],M=d([],y.x,J.c2p),H=d([],y.y,K.c2p),L.push(e(M,H,y.bicubic));I.attr("d","M"+L.join("L")+"Z").style("stroke","none")}function r(y,F,J,K,M,H,O,I,L,Q,Z){(Q="fill"===
Q)&&D(M,y.contours);F=q.ensureSingle(F,"g","contourfill").selectAll("path").data(Q?M:[]);F.enter().append("path");F.exit().remove();F.each(function(ba){(ba=(ba.prefixBoundary?Z:"")+l(y,ba,H,O,I,L,J,K))?c.select(this).attr("d",ba).style("stroke","none"):c.select(this).remove()})}function l(y,F,J,K,M,H,O,I){function L(ia){return Math.abs(ia[0]-J[2][0])<W}function Q(ia,ra){var wa="";if(Math.abs(ia[1]-J[0][1])<aa&&!L(ia)||Math.abs(ia[1]-J[2][1])<aa&&!(Math.abs(ia[0]-J[0][0])<W)){var pa=M.aaxis;var la=
v(M,H,[ia[0],ra[0]],.5*(ia[1]+ra[1]))}else pa=M.baxis,la=v(M,H,.5*(ia[0]+ra[0]),[ia[1],ra[1]]);for(ia=1;ia<la.length;ia++)for(wa+=pa.smoothing?"C":"L",ra=0;ra<la[ia].length;ra++){var ka=la[ia][ra];wa+=[O.c2p(ka[0]),I.c2p(ka[1])]+" "}return wa}var Z="",ba=F.edgepaths.map(function(ia,ra){return ra}),V=!0,S,T,fa,W=1E-4*Math.abs(J[0][0]-J[2][0]),aa=1E-4*Math.abs(J[0][1]-J[2][1]);y=0;for(S=null;ba.length;){var ja=F.edgepaths[y][0];S&&(Z+=Q(S,ja));S=f.smoothopen(F.edgepaths[y].map(K),F.smoothing);Z+=V?
S:S.replace(/^M/,"L");ba.splice(ba.indexOf(y),1);S=F.edgepaths[y][F.edgepaths[y].length-1];ja=-1;for(V=0;4>V;V++){if(!S){q.log("Missing end?",y,F);break}Math.abs(S[1]-J[0][1])<aa&&!L(S)?T=J[1]:Math.abs(S[0]-J[0][0])<W?T=J[0]:Math.abs(S[1]-J[2][1])<aa?T=J[3]:L(S)&&(T=J[2]);for(fa=0;fa<F.edgepaths.length;fa++){var ma=F.edgepaths[fa][0];Math.abs(S[0]-T[0])<W?Math.abs(S[0]-ma[0])<W&&0<=(ma[1]-S[1])*(T[1]-ma[1])&&(T=ma,ja=fa):Math.abs(S[1]-T[1])<aa?Math.abs(S[1]-ma[1])<aa&&0<=(ma[0]-S[0])*(T[0]-ma[0])&&
(T=ma,ja=fa):q.log("endpt to newendpt is not vert. or horz.",S,T,ma)}if(0<=ja)break;Z+=Q(S,T);S=T}if(ja===F.edgepaths.length){q.log("unclosed perimeter path");break}y=ja;if(V=-1===ba.indexOf(y))y=ba[0],Z+=Q(S,T)+"Z",S=null}for(y=0;y<F.paths.length;y++)Z+=f.smoothclosed(F.paths[y].map(K),F.smoothing);return Z}var c=b("@plotly/d3"),d=b("../carpet/map_1d_array"),e=b("../carpet/makepath"),f=b("../../components/drawing"),q=b("../../lib"),t=b("../contour/make_crossings"),w=b("../contour/find_all_paths"),
x=b("../contour/plot"),z=b("../contour/constants"),B=b("../contour/convert_to_constraints"),A=b("../contour/empty_pathinfo"),D=b("../contour/close_boundaries"),C=b("../carpet/lookup_carpetid"),v=b("../carpet/axis_aligned_line");N.exports=function(y,F,J,K){var M=F.xaxis,H=F.yaxis;q.makeTraceGroups(K,J,"contour").each(function(O){function I(pa){pa=Z.ab2xy(pa[0],pa[1],!0);return[M.c2p(pa[0]),H.c2p(pa[1])]}var L=c.select(this);O=O[0];var Q=O.trace,Z=Q._carpetTrace=C(y,Q),ba=y.calcdata[Z.index][0];if(Z.visible&&
"legendonly"!==Z.visible){var V=O.a,S=O.b,T=Q.contours,fa=A(T,F,O),W="constraint"===T.type,aa=T._operation,ja=W?"\x3d"===aa?"lines":"fill":T.coloring,ma=[[V[0],S[S.length-1]],[V[V.length-1],S[S.length-1]],[V[V.length-1],S[0]],[V[0],S[0]]];t(fa);w(fa,1E-8*(V[V.length-1]-V[0]),1E-8*(S[S.length-1]-S[0]));V=fa;"constraint"===T.type&&(V=B(fa,aa));p(fa,I);var ia,ra=[];for(ia=ba.clipsegments.length-1;0<=ia;ia--){aa=ba.clipsegments[ia];S=d([],aa.x,M.c2p);var wa=d([],aa.y,H.c2p);S.reverse();wa.reverse();ra.push(e(S,
wa,aa.bicubic))}aa="M"+ra.join("L")+"Z";h(L,ba.clipsegments,M,H,W,ja);r(Q,L,M,H,V,ma,I,Z,ba,ja,aa);n(L,fa,y,O,T,F,Z);f.setClipUrl(L,Z._clipPathId,y)}})}},{"../../components/drawing":688,"../../lib":803,"../carpet/axis_aligned_line":985,"../carpet/lookup_carpetid":1001,"../carpet/makepath":1002,"../carpet/map_1d_array":1003,"../contour/close_boundaries":1030,"../contour/constants":1032,"../contour/convert_to_constraints":1036,"../contour/empty_pathinfo":1038,"../contour/find_all_paths":1040,"../contour/make_crossings":1045,
"../contour/plot":1046,"@plotly/d3":58}],1055:[function(b,N,G){G=b("../../components/colorscale/attributes");var p=b("../../plots/template_attributes").hovertemplateAttrs,n=b("../../plots/attributes"),k=b("../scattermapbox/attributes");b=b("../../lib/extend").extendFlat;N.exports=b({lon:k.lon,lat:k.lat,z:{valType:"data_array",editType:"calc"},radius:{valType:"number",editType:"plot",arrayOk:!0,min:1,dflt:30},below:{valType:"string",editType:"plot"},text:k.text,hovertext:k.hovertext,hoverinfo:b({},
n.hoverinfo,{flags:["lon","lat","z","text","name"]}),hovertemplate:p(),showlegend:b({},n.showlegend,{dflt:!1})},G("",{cLetter:"z",editTypeOverride:"calc"}))},{"../../components/colorscale/attributes":673,"../../lib/extend":793,"../../plots/attributes":850,"../../plots/template_attributes":926,"../scattermapbox/attributes":1283}],1056:[function(b,N,G){var p=b("fast-isnumeric"),n=b("../../lib").isArrayOrTypedArray,k=b("../../constants/numerical").BADNUM,m=b("../../components/colorscale/calc"),a=b("../../lib")._;
N.exports=function(g,h){for(var r=h._length,l=Array(r),c=h.z,d=n(c)&&c.length,e=0;e<r;e++){var f=l[e]={},q=h.lon[e],t=h.lat[e];f.lonlat=p(q)&&p(t)?[+q,+t]:[k,k];d&&(q=c[e],f.z=p(q)?q:k)}m(g,h,{vals:d?c:[0,1],containerStr:"",cLetter:"z"});r&&(l[0].t={labels:{lat:a(g,"lat:")+" ",lon:a(g,"lon:")+" "}});return l}},{"../../components/colorscale/calc":674,"../../constants/numerical":779,"../../lib":803,"fast-isnumeric":249}],1057:[function(b,N,G){var p=b("fast-isnumeric"),n=b("../../lib"),k=b("../../components/color"),
m=b("../../components/colorscale"),a=b("../../constants/numerical").BADNUM,g=b("../../lib/geojson_utils").makeBlank;N.exports=function(h){var r=h[0].trace,l=!0===r.visible&&0!==r._length,c=r._opts={heatmap:{layout:{visibility:"none"},paint:{}},geojson:g()};if(!l)return c;l=[];var d,e=r.z,f=r.radius;e=n.isArrayOrTypedArray(e)&&e.length;var q=n.isArrayOrTypedArray(f);for(d=0;d<h.length;d++){var t=h[d],w=t.lonlat;if(w[0]!==a){var x={};e&&(t=t.z,x.z=t!==a?t:0);q&&(x.r=p(f[d])&&0<f[d]?+f[d]:0);l.push({type:"Feature",
geometry:{type:"Point",coordinates:w},properties:x})}}h=m.extractOpts(r);f=h.reversescale?m.flipScale(h.colorscale):h.colorscale;d=f[0][1];w=["interpolate",["linear"],["heatmap-density"],0,1>k.opacity(d)?d:k.addOpacity(d,0)];for(d=1;d<f.length;d++)w.push(f[d][0],f[d][1]);d=["interpolate",["linear"],["get","z"],h.min,0,h.max,1];n.extendFlat(c.heatmap.paint,{"heatmap-weight":e?d:1/(h.max-h.min),"heatmap-color":w,"heatmap-radius":q?{type:"identity",property:"r"}:r.radius,"heatmap-opacity":r.opacity});
c.geojson={type:"FeatureCollection",features:l};c.heatmap.layout.visibility="visible";return c}},{"../../components/color":666,"../../components/colorscale":678,"../../constants/numerical":779,"../../lib":803,"../../lib/geojson_utils":797,"fast-isnumeric":249}],1058:[function(b,N,G){var p=b("../../lib"),n=b("../../components/colorscale/defaults"),k=b("./attributes");N.exports=function(m,a,g,h){function r(c,d){return p.coerce(m,a,k,c,d)}g=r("lon")||[];var l=r("lat")||[];(g=Math.min(g.length,l.length))?
(a._length=g,r("z"),r("radius"),r("below"),r("text"),r("hovertext"),r("hovertemplate"),n(m,a,h,r,{prefix:"",cLetter:"z"})):a.visible=!1}},{"../../components/colorscale/defaults":676,"../../lib":803,"./attributes":1055}],1059:[function(b,N,G){N.exports=function(p,n){p.lon=n.lon;p.lat=n.lat;p.z=n.z;return p}},{}],1060:[function(b,N,G){var p=b("../../plots/cartesian/axes"),n=b("../scattermapbox/hover").hoverPoints,k=b("../scattermapbox/hover").getExtraText;N.exports=function(m,a,g){if(m=n(m,a,g)){m=
m[0];a=m.cd;g=a[0].trace;var h=a[m.index];delete m.color;if("z"in h){var r=m.subplot.mockAxis;m.z=h.z;m.zLabel=p.tickText(r,r.c2l(h.z),"hover").text}m.extraText=k(g,h,a[0].t.labels);return[m]}}},{"../../plots/cartesian/axes":854,"../scattermapbox/hover":1288}],1061:[function(b,N,G){N.exports={attributes:b("./attributes"),supplyDefaults:b("./defaults"),colorbar:b("../heatmap/colorbar"),formatLabels:b("../scattermapbox/format_labels"),calc:b("./calc"),plot:b("./plot"),hoverPoints:b("./hover"),eventData:b("./event_data"),
getBelow:function(p,n){p=n.getMapLayers();for(n=0;n<p.length;n++){var k=p[n],m=k.id;if("symbol"===k.type&&"string"===typeof m&&-1===m.indexOf("plotly-"))return m}},moduleType:"trace",name:"densitymapbox",basePlotModule:b("../../plots/mapbox"),categories:["mapbox","gl","showLegend"],meta:{hr_name:"density_mapbox"}}},{"../../plots/mapbox":911,"../heatmap/colorbar":1088,"../scattermapbox/format_labels":1287,"./attributes":1055,"./calc":1056,"./defaults":1058,"./event_data":1059,"./hover":1060,"./plot":1062}],
1062:[function(b,N,G){function p(m,a){this.type="densitymapbox";this.subplot=m;this.uid=a;this.sourceId="source-"+a;this.layerList=[["heatmap",k+a+"-heatmap"]];this.below=null}var n=b("./convert"),k=b("../../plots/mapbox/constants").traceLayerPrefix;b=p.prototype;b.update=function(m){var a=this.subplot,g=this.layerList;m=n(m);var h=a.belowLookup["trace-"+this.uid];a.map.getSource(this.sourceId).setData(m.geojson);h!==this.below&&(this._removeLayers(),this._addLayers(m,h),this.below=h);for(h=0;h<g.length;h++){var r=
g[h],l=r[1];r=m[r[0]];a.setOptions(l,"setLayoutProperty",r.layout);"visible"===r.layout.visibility&&a.setOptions(l,"setPaintProperty",r.paint)}};b._addLayers=function(m,a){for(var g=this.subplot,h=this.layerList,r=this.sourceId,l=0;l<h.length;l++){var c=h[l],d=c[0],e=m[d];g.addLayer({type:d,id:c[1],source:r,layout:e.layout,paint:e.paint},a)}};b._removeLayers=function(){for(var m=this.subplot.map,a=this.layerList,g=a.length-1;0<=g;g--)m.removeLayer(a[g][1])};b.dispose=function(){var m=this.subplot.map;
this._removeLayers();m.removeSource(this.sourceId)};N.exports=function(m,a){var g=a[0].trace,h=new p(m,g.uid),r=h.sourceId;a=n(a);g=h.below=m.belowLookup["trace-"+g.uid];m.map.addSource(r,{type:"geojson",data:a.geojson});h._addLayers(a,g);return h}},{"../../plots/mapbox/constants":909,"./convert":1057}],1063:[function(b,N,G){var p=b("../../lib");N.exports=function(n,k){for(var m=0;m<n.length;m++)n[m].i=m;p.mergeArray(k.text,n,"tx");p.mergeArray(k.hovertext,n,"htx");if(k=k.marker)if(p.mergeArray(k.opacity,
n,"mo"),p.mergeArray(k.color,n,"mc"),k=k.line)p.mergeArray(k.color,n,"mlc"),p.mergeArrayCastPositive(k.width,n,"mlw")}},{"../../lib":803}],1064:[function(b,N,G){G=b("../bar/attributes");var p=b("../scatter/attributes").line,n=b("../../plots/attributes"),k=b("../../plots/cartesian/axis_format_attributes").axisHoverFormat,m=b("../../plots/template_attributes").hovertemplateAttrs,a=b("../../plots/template_attributes").texttemplateAttrs,g=b("./constants"),h=b("../../lib/extend").extendFlat;b=b("../../components/color");
var r=G.x,l=G.x0,c=G.dx,d=G.y,e=G.y0,f=G.dy,q=G.xperiod,t=G.yperiod,w=G.xperiod0,x=G.yperiod0,z=G.xperiodalignment,B=G.yperiodalignment,A=k("x");k=k("y");var D=G.hovertext;m=m({},{keys:g.eventDataKeys});n=h({},n.hoverinfo,{flags:"name;x;y;text;percent initial;percent previous;percent total".split(";")});a=a({editType:"plot"},{keys:g.eventDataKeys.concat(["label","value"])});g=G.text;var C=G.textposition,v=h({},G.insidetextanchor,{dflt:"middle"}),y=h({},G.textangle,{dflt:0}),F=G.textfont,J=G.insidetextfont,
K=G.outsidetextfont,M=G.constraintext,H=G.cliponaxis,O=h({},G.orientation,{}),I=h({},G.offset,{arrayOk:!1}),L=h({},G.width,{arrayOk:!1}),Q=h({},G.marker);delete Q.pattern;N.exports={x:r,x0:l,dx:c,y:d,y0:e,dy:f,xperiod:q,yperiod:t,xperiod0:w,yperiod0:x,xperiodalignment:z,yperiodalignment:B,xhoverformat:A,yhoverformat:k,hovertext:D,hovertemplate:m,hoverinfo:n,textinfo:{valType:"flaglist",flags:"label;text;percent initial;percent previous;percent total;value".split(";"),extras:["none"],editType:"plot",
arrayOk:!1},texttemplate:a,text:g,textposition:C,insidetextanchor:v,textangle:y,textfont:F,insidetextfont:J,outsidetextfont:K,constraintext:M,cliponaxis:H,orientation:O,offset:I,width:L,marker:Q,connector:{fillcolor:{valType:"color",editType:"style"},line:{color:h({},p.color,{dflt:b.defaultLine}),width:h({},p.width,{dflt:0,editType:"plot"}),dash:p.dash,editType:"style"},visible:{valType:"boolean",dflt:!0,editType:"plot"},editType:"plot"},offsetgroup:G.offsetgroup,alignmentgroup:G.alignmentgroup}},
{"../../components/color":666,"../../lib/extend":793,"../../plots/attributes":850,"../../plots/cartesian/axis_format_attributes":857,"../../plots/template_attributes":926,"../bar/attributes":941,"../scatter/attributes":1218,"./constants":1066}],1065:[function(b,N,G){function p(h){return h===g?0:h}var n=b("../../plots/cartesian/axes"),k=b("../../plots/cartesian/align_period"),m=b("./arrays_to_calcdata"),a=b("../scatter/calc_selection"),g=b("../../constants/numerical").BADNUM;N.exports=function(h,r){var l=
n.getFromId(h,r.xaxis||"x"),c=n.getFromId(h,r.yaxis||"y"),d;if("h"===r.orientation){h=l.makeCalcdata(r,"x");var e=c.makeCalcdata(r,"y");c=k(r,c,"y",e);var f=!!r.yperiodalignment;var q="y"}else h=c.makeCalcdata(r,"y"),e=l.makeCalcdata(r,"x"),c=k(r,l,"x",e),f=!!r.xperiodalignment,q="x";l=c.vals;var t=Math.min(l.length,h.length),w=Array(t);r._base=[];for(d=0;d<t;d++){0>h[d]&&(h[d]=g);var x=!1;h[d]!==g&&d+1<t&&h[d+1]!==g&&(x=!0);x=w[d]={p:l[d],s:h[d],cNext:x};r._base[d]=-.5*x.s;f&&(w[d].orig_p=e[d],w[d][q+
"End"]=c.ends[d],w[d][q+"Start"]=c.starts[d]);r.ids&&(x.id=String(r.ids[d]));0===d&&(w[0].vTotal=0);w[0].vTotal+=p(x.s);x.begR=p(x.s)/p(w[0].s)}for(d=0;d<t;d++)if(x=w[d],x.s!==g){x.sumR=x.s/w[0].vTotal;x.difR=void 0!==z?x.s/z:1;var z=x.s}m(w,r);a(w,r);return w}},{"../../constants/numerical":779,"../../plots/cartesian/align_period":851,"../../plots/cartesian/axes":854,"../scatter/calc_selection":1220,"./arrays_to_calcdata":1063}],1066:[function(b,N,G){N.exports={eventDataKeys:["percentInitial","percentPrevious",
"percentTotal"]}},{}],1067:[function(b,N,G){var p=b("../bar/cross_trace_calc").setGroupPositions;N.exports=function(n,k){var m=n._fullLayout,a=n._fullData,g=n.calcdata,h=k.xaxis,r=k.yaxis;k=[];var l=[],c=[],d;for(d=0;d<a.length;d++){var e=a[d];var f="h"===e.orientation;!0===e.visible&&e.xaxis===h._id&&e.yaxis===r._id&&"funnel"===e.type&&(e=g[d],f?c.push(e):l.push(e),k.push(e))}m={mode:m.funnelmode,norm:m.funnelnorm,gap:m.funnelgap,groupgap:m.funnelgroupgap};p(n,h,r,l,m);p(n,r,h,c,m);for(d=0;d<k.length;d++)for(e=
k[d],n=0;n<e.length;n++)n+1<e.length&&(e[n].nextP0=e[n+1].p0,e[n].nextS0=e[n+1].s0,e[n].nextP1=e[n+1].p1,e[n].nextS1=e[n+1].s1)}},{"../bar/cross_trace_calc":944}],1068:[function(b,N,G){function p(l){l=n.isArrayOrTypedArray(l)?"#000":l;return r.addOpacity(l,.5*r.opacity(l))}var n=b("../../lib"),k=b("../bar/defaults").handleGroupingDefaults,m=b("../bar/defaults").handleText,a=b("../scatter/xy_defaults"),g=b("../scatter/period_defaults"),h=b("./attributes"),r=b("../../components/color");N.exports={supplyDefaults:function(l,
c,d,e){function f(w,x){return n.coerce(l,c,h,w,x)}if(a(l,c,e,f)){g(l,c,e,f);f("xhoverformat");f("yhoverformat");f("orientation",c.y&&!c.x?"v":"h");f("offset");f("width");var q=f("text");f("hovertext");f("hovertemplate");var t=f("textposition");m(l,c,e,f,t,{moduleHasSelected:!1,moduleHasUnselected:!1,moduleHasConstrain:!0,moduleHasCliponaxis:!0,moduleHasTextangle:!0,moduleHasInsideanchor:!0});"none"===c.textposition||c.texttemplate||f("textinfo",Array.isArray(q)?"text+value":"value");d=f("marker.color",
d);f("marker.line.color",r.defaultLine);f("marker.line.width");f("connector.visible")&&(f("connector.fillcolor",p(d)),f("connector.line.width")&&(f("connector.line.color"),f("connector.line.dash")))}else c.visible=!1},crossTraceDefaults:function(l,c){function d(t){return n.coerce(f._input,f,h,t)}if("group"===c.funnelmode)for(var e=0;e<l.length;e++){var f=l[e];var q=f._input;k(q,f,c,d)}}}},{"../../components/color":666,"../../lib":803,"../bar/defaults":945,"../scatter/period_defaults":1238,"../scatter/xy_defaults":1245,
"./attributes":1064}],1069:[function(b,N,G){N.exports=function(p,n){p.x="xVal"in n?n.xVal:n.x;p.y="yVal"in n?n.yVal:n.y;"percentInitial"in n&&(p.percentInitial=n.percentInitial);"percentPrevious"in n&&(p.percentPrevious=n.percentPrevious);"percentTotal"in n&&(p.percentTotal=n.percentTotal);n.xa&&(p.xaxis=n.xa);n.ya&&(p.yaxis=n.ya);return p}},{}],1070:[function(b,N,G){var p=b("../../components/color").opacity,n=b("../bar/hover").hoverOnBars,k=b("../../lib").formatPercent;N.exports=function(m,a,g,h,
r){if(m=n(m,a,g,h,r)){a=m.cd;g=a[0].trace;a=a[m.index];m[("h"===g.orientation?"x":"y")+"LabelVal"]=a.s;m.percentInitial=a.begR;m.percentInitialLabel=k(a.begR,1);m.percentPrevious=a.difR;m.percentPreviousLabel=k(a.difR,1);m.percentTotal=a.sumR;m.percentTotalLabel=k(a.sumR,1);var l=a.hi||g.hoverinfo;h=[];l&&"none"!==l&&"skip"!==l&&(r="all"===l,l=l.split("+"),(r||-1!==l.indexOf("percent initial"))&&h.push(m.percentInitialLabel+" of initial"),(r||-1!==l.indexOf("percent previous"))&&h.push(m.percentPreviousLabel+
" of previous"),(r||-1!==l.indexOf("percent total"))&&h.push(m.percentTotalLabel+" of total"));m.extraText=h.join("\x3cbr\x3e");r=g.marker;g=a.mc||r.color;h=a.mlc||r.line.color;a=a.mlw||r.line.width;a=p(g)?g:p(h)&&a?h:void 0;m.color=a;return[m]}}},{"../../components/color":666,"../../lib":803,"../bar/hover":948}],1071:[function(b,N,G){N.exports={attributes:b("./attributes"),layoutAttributes:b("./layout_attributes"),supplyDefaults:b("./defaults").supplyDefaults,crossTraceDefaults:b("./defaults").crossTraceDefaults,
supplyLayoutDefaults:b("./layout_defaults"),calc:b("./calc"),crossTraceCalc:b("./cross_trace_calc"),plot:b("./plot"),style:b("./style").style,hoverPoints:b("./hover"),eventData:b("./event_data"),selectPoints:b("../bar/select"),moduleType:"trace",name:"funnel",basePlotModule:b("../../plots/cartesian"),categories:"bar-like cartesian svg oriented showLegend zoomScale".split(" "),meta:{}}},{"../../plots/cartesian":868,"../bar/select":953,"./attributes":1064,"./calc":1065,"./cross_trace_calc":1067,"./defaults":1068,
"./event_data":1069,"./hover":1070,"./layout_attributes":1072,"./layout_defaults":1073,"./plot":1074,"./style":1075}],1072:[function(b,N,G){N.exports={funnelmode:{valType:"enumerated",values:["stack","group","overlay"],dflt:"stack",editType:"calc"},funnelgap:{valType:"number",min:0,max:1,editType:"calc"},funnelgroupgap:{valType:"number",min:0,max:1,dflt:0,editType:"calc"}}},{}],1073:[function(b,N,G){var p=b("../../lib"),n=b("./layout_attributes");N.exports=function(k,m,a){for(var g=!1,h=0;h<a.length;h++){var r=
a[h];if(r.visible&&"funnel"===r.type){g=!0;break}}g&&(p.coerce(k,m,n,"funnelmode",void 0),p.coerce(k,m,n,"funnelgap",.2),p.coerce(k,m,n,"funnelgroupgap",void 0))}},{"../../lib":803,"./layout_attributes":1072}],1074:[function(b,N,G){function p(c,d,e,f){var q=d.xaxis,t=d.yaxis;a.makeTraceGroups(f,e,"trace bars").each(function(w){var x=m.select(this);w=w[0].trace;x=a.ensureSingle(x,"g","regions");if(w.connector&&w.connector.visible){var z="h"===w.orientation;x=x.selectAll("g.region").data(a.identity);
x.enter().append("g").classed("region",!0);x.exit().remove();var B=x.size();x.each(function(A,D){if(D===B-1||A.cNext){D=k(A,q,t,z);A=D[0];D=D[1];var C="";A[0]!==h&&D[0]!==h&&A[1]!==h&&D[1]!==h&&A[2]!==h&&D[2]!==h&&A[3]!==h&&D[3]!==h&&(C=z?C+("M"+A[0]+","+D[1]+"L"+A[2]+","+D[2]+"H"+A[3]+"L"+A[1]+","+D[1]+"Z"):C+("M"+A[1]+","+D[1]+"L"+A[2]+","+D[3]+"V"+D[2]+"L"+A[1]+","+D[0]+"Z"));""===C&&(C="M0,0Z");a.ensureSingle(m.select(this),"path").attr("d",C).call(g.setClipUrl,d.layerClipId,c)}})}else x.remove()})}
function n(c,d,e,f){var q=d.xaxis,t=d.yaxis;a.makeTraceGroups(f,e,"trace bars").each(function(w){var x=m.select(this);w=w[0].trace;x=a.ensureSingle(x,"g","lines");if(w.connector&&w.connector.visible&&w.connector.line.width){var z="h"===w.orientation;x=x.selectAll("g.line").data(a.identity);x.enter().append("g").classed("line",!0);x.exit().remove();var B=x.size();x.each(function(A,D){if(D===B-1||A.cNext){D=k(A,q,t,z);A=D[0];D=D[1];var C="";void 0!==A[3]&&void 0!==D[3]&&(z?(C+="M"+A[0]+","+D[1]+"L"+
A[2]+","+D[2],C+="M"+A[1]+","+D[1]+"L"+A[3]+","+D[2]):(C+="M"+A[1]+","+D[1]+"L"+A[2]+","+D[3],C+="M"+A[1]+","+D[0]+"L"+A[2]+","+D[2]));""===C&&(C="M0,0Z");a.ensureSingle(m.select(this),"path").attr("d",C).call(g.setClipUrl,d.layerClipId,c)}})}else x.remove()})}function k(c,d,e,f){var q=[],t=[],w=f?d:e;d=f?e:d;q[0]=w.c2p(c.s0,!0);t[0]=d.c2p(c.p0,!0);q[1]=w.c2p(c.s1,!0);t[1]=d.c2p(c.p1,!0);q[2]=w.c2p(c.nextS0,!0);t[2]=d.c2p(c.nextP0,!0);q[3]=w.c2p(c.nextS1,!0);t[3]=d.c2p(c.nextP1,!0);return f?[q,t]:
[t,q]}var m=b("@plotly/d3"),a=b("../../lib"),g=b("../../components/drawing"),h=b("../../constants/numerical").BADNUM,r=b("../bar/plot"),l=b("../bar/uniform_text").clearMinTextSize;N.exports=function(c,d,e,f){var q=c._fullLayout;l("funnel",q);p(c,d,e,f);n(c,d,e,f);r.plot(c,d,e,f,{mode:q.funnelmode,norm:q.funnelmode,gap:q.funnelgap,groupgap:q.funnelgroupgap})}},{"../../components/drawing":688,"../../constants/numerical":779,"../../lib":803,"../bar/plot":952,"../bar/uniform_text":957,"@plotly/d3":58}],
1075:[function(b,N,G){var p=b("@plotly/d3"),n=b("../../components/drawing"),k=b("../../components/color"),m=b("../../constants/interactions").DESELECTDIM;G=b("../bar/style");var a=b("../bar/uniform_text").resizeText,g=G.styleTextPoints;N.exports={style:function(h,r,l){r=l?l:p.select(h).selectAll("g.funnellayer").selectAll("g.trace");a(h,r,"funnel");r.style("opacity",function(c){return c[0].trace.opacity});r.each(function(c){var d=p.select(this),e=c[0].trace;d.selectAll(".point \x3e path").each(function(f){if(!f.isBlank){var q=
e.marker;p.select(this).call(k.fill,f.mc||q.color).call(k.stroke,f.mlc||q.line.color).call(n.dashLine,q.line.dash,f.mlw||q.line.width).style("opacity",e.selectedpoints&&!f.selected?m:1)}});g(d,e,h);d.selectAll(".regions").each(function(){p.select(this).selectAll("path").style("stroke-width",0).call(k.fill,e.connector.fillcolor)});d.selectAll(".lines").each(function(){var f=e.connector.line;n.lineGroupStyle(p.select(this).selectAll("path"),f.width,f.color,f.dash)})})}}},{"../../components/color":666,
"../../components/drawing":688,"../../constants/interactions":778,"../bar/style":955,"../bar/uniform_text":957,"@plotly/d3":58}],1076:[function(b,N,G){G=b("../pie/attributes");var p=b("../../plots/attributes"),n=b("../../plots/domain").attributes,k=b("../../plots/template_attributes").hovertemplateAttrs,m=b("../../plots/template_attributes").texttemplateAttrs;b=b("../../lib/extend").extendFlat;N.exports={labels:G.labels,label0:G.label0,dlabel:G.dlabel,values:G.values,marker:{colors:G.marker.colors,
line:{color:b({},G.marker.line.color,{dflt:null}),width:b({},G.marker.line.width,{dflt:1}),editType:"calc"},editType:"calc"},text:G.text,hovertext:G.hovertext,scalegroup:b({},G.scalegroup,{}),textinfo:b({},G.textinfo,{flags:["label","text","value","percent"]}),texttemplate:m({editType:"plot"},{keys:["label","color","value","text","percent"]}),hoverinfo:b({},p.hoverinfo,{flags:["label","text","value","percent","name"]}),hovertemplate:k({},{keys:["label","color","value","text","percent"]}),textposition:b({},
G.textposition,{values:["inside","none"],dflt:"inside"}),textfont:G.textfont,insidetextfont:G.insidetextfont,title:{text:G.title.text,font:G.title.font,position:b({},G.title.position,{values:["top left","top center","top right"],dflt:"top center"}),editType:"plot"},domain:n({name:"funnelarea",trace:!0,editType:"calc"}),aspectratio:{valType:"number",min:0,dflt:1,editType:"plot"},baseratio:{valType:"number",min:0,max:1,dflt:.333,editType:"plot"}}},{"../../lib/extend":793,"../../plots/attributes":850,
"../../plots/domain":882,"../../plots/template_attributes":926,"../pie/attributes":1192}],1077:[function(b,N,G){var p=b("../../plots/plots");G.name="funnelarea";G.plot=function(n,k,m,a){p.plotBasePlot(G.name,n,k,m,a)};G.clean=function(n,k,m,a){p.cleanBasePlot(G.name,n,k,m,a)}},{"../../plots/plots":917}],1078:[function(b,N,G){var p=b("../pie/calc");N.exports={calc:function(n,k){return p.calc(n,k)},crossTraceCalc:function(n){p.crossTraceCalc(n,{type:"funnelarea"})}}},{"../pie/calc":1194}],1079:[function(b,
N,G){var p=b("../../lib"),n=b("./attributes"),k=b("../../plots/domain").defaults,m=b("../bar/defaults").handleText,a=b("../pie/defaults").handleLabelsAndValues;N.exports=function(g,h,r,l){function c(f,q){return p.coerce(g,h,n,f,q)}r=c("labels");var d=c("values");r=a(r,d);d=r.len;h._hasLabels=r.hasLabels;h._hasValues=r.hasValues;!h._hasLabels&&h._hasValues&&(c("label0"),c("dlabel"));if(d){h._length=d;c("marker.line.width")&&c("marker.line.color",l.paper_bgcolor);c("marker.colors");c("scalegroup");
r=c("text");d=c("texttemplate");var e;d||(e=c("textinfo",Array.isArray(r)?"text+percent":"percent"));c("hovertext");c("hovertemplate");if(d||e&&"none"!==e)e=c("textposition"),m(g,h,l,c,e,{moduleHasSelected:!1,moduleHasUnselected:!1,moduleHasConstrain:!1,moduleHasCliponaxis:!1,moduleHasTextangle:!1,moduleHasInsideanchor:!1});k(h,l,c);c("title.text")&&(c("title.position"),p.coerceFont(c,"title.font",l.font));c("aspectratio");c("baseratio")}else h.visible=!1}},{"../../lib":803,"../../plots/domain":882,
"../bar/defaults":945,"../pie/defaults":1195,"./attributes":1076}],1080:[function(b,N,G){N.exports={moduleType:"trace",name:"funnelarea",basePlotModule:b("./base_plot"),categories:["pie-like","funnelarea","showLegend"],attributes:b("./attributes"),layoutAttributes:b("./layout_attributes"),supplyDefaults:b("./defaults"),supplyLayoutDefaults:b("./layout_defaults"),calc:b("./calc").calc,crossTraceCalc:b("./calc").crossTraceCalc,plot:b("./plot"),style:b("./style"),styleOne:b("../pie/style_one"),meta:{}}},
{"../pie/style_one":1203,"./attributes":1076,"./base_plot":1077,"./calc":1078,"./defaults":1079,"./layout_attributes":1081,"./layout_defaults":1082,"./plot":1083,"./style":1084}],1081:[function(b,N,G){b=b("../pie/layout_attributes").hiddenlabels;N.exports={hiddenlabels:b,funnelareacolorway:{valType:"colorlist",editType:"calc"},extendfunnelareacolors:{valType:"boolean",dflt:!0,editType:"calc"}}},{"../pie/layout_attributes":1199}],1082:[function(b,N,G){var p=b("../../lib"),n=b("./layout_attributes");
N.exports=function(k,m){p.coerce(k,m,n,"hiddenlabels",void 0);p.coerce(k,m,n,"funnelareacolorway",m.colorway);p.coerce(k,m,n,"extendfunnelareacolors",void 0)}},{"../../lib":803,"./layout_attributes":1081}],1083:[function(b,N,G){function p(A,D){return"l"+(D[0]-A[0])+","+(D[1]-A[1])}function n(A,D){return[.5*(A[0]+D[0]),.5*(A[1]+D[1])]}function k(A){function D(){var I=Math.sqrt(J);return[I,-I]}if(A.length){var C=A[0],v=C.trace,y=v.aspectratio;v=v.baseratio;.999<v&&(v=.999);v=Math.pow(v,2);var F=C.vTotal,
J=F*v/(1-v)/F;v=[];v.push(D());var K;for(K=A.length-1;-1<K;K--){var M=A[K];M.hidden||(J+=M.v/F,v.push(D()))}F=Infinity;var H=-Infinity;for(K=0;K<v.length;K++)M=v[K],F=Math.min(F,M[1]),H=Math.max(H,M[1]);for(K=0;K<v.length;K++)v[K][1]-=(H+F)/2;K=C.r;F=(H-F)/2;M=K/v[v.length-1][0];y*=K/F;C.r=y*F;for(K=0;K<v.length;K++)v[K][0]*=M,v[K][1]*=y;M=v[0];C=[-M[0],M[1]];y=[M[0],M[1]];F=0;for(K=A.length-1;-1<K;K--)if(M=A[K],!M.hidden){F+=1;H=v[F][0];var O=v[F][1];M.TL=[-H,O];M.TR=[H,O];M.BL=C;M.BR=y;M.pxmid=
n(M.TR,M.BR);C=M.TL;y=M.TR}}}var m=b("@plotly/d3"),a=b("../../components/drawing"),g=b("../../lib"),h=g.strScale,r=g.strTranslate,l=b("../../lib/svg_text_utils"),c=b("../bar/plot").toMoveInsideBar;G=b("../bar/uniform_text");var d=G.recordMinTextSize,e=G.clearMinTextSize,f=b("../pie/helpers");b=b("../pie/plot");var q=b.attachFxHandlers,t=b.determineInsideTextFont,w=b.layoutAreas,x=b.prerenderTitles,z=b.positionTitleOutside,B=b.formatSliceLabel;N.exports=function(A,D){var C=A._fullLayout;e("funnelarea",
C);x(D,A);w(D,C._size);g.makeTraceGroups(C._funnelarealayer,D,"trace").each(function(v){var y=m.select(this),F=v[0],J=F.trace;k(v);y.each(function(){var K=m.select(this).selectAll("g.slice").data(v);K.enter().append("g").classed("slice",!0);K.exit().remove();K.each(function(M,H){if(M.hidden)m.select(this).selectAll("path,g").remove();else{M.pointNumber=M.i;M.curveNumber=J.index;var O=F.cx,I=F.cy,L=m.select(this),Q=L.selectAll("path.surface").data([M]);Q.enter().append("path").classed("surface",!0).style({"pointer-events":"all"});
L.call(q,A,v);var Z="M"+(O+M.TR[0])+","+(I+M.TR[1])+p(M.TR,M.BR)+p(M.BR,M.BL)+p(M.BL,M.TL)+"Z";Q.attr("d",Z);B(A,M,F);Q=f.castOption(J.textposition,M.pts);L=L.selectAll("g.slicetext").data(M.text&&"none"!==Q?[0]:[]);L.enter().append("g").classed("slicetext",!0);L.exit().remove();L.each(function(){var ba=g.ensureSingle(m.select(this),"text","",function(T){T.attr("data-notex",1)}),V=g.ensureUniformFontSize(A,t(J,M,C.font));ba.text(M.text).attr({"class":"slicetext",transform:"","text-anchor":"middle"}).call(a.font,
V).call(l.convertToTspans,A);var S=a.bBox(ba.node());S=c(Math.max(M.TL[0],M.BL[0])+O,Math.min(M.TR[0],M.BR[0])+O,Math.min(M.BL[1],M.BR[1])+I,Math.max(M.TL[1],M.TR[1])+I,S,{isHorizontal:!0,constrained:!0,angle:0,anchor:"middle"});S.fontSize=V.size;d(J.type,S,C);v[H].transform=S;ba.attr("transform",g.getTextTransform(S))})}});K=m.select(this).selectAll("g.titletext").data(J.title.text?[0]:[]);K.enter().append("g").classed("titletext",!0);K.exit().remove();K.each(function(){var M=g.ensureSingle(m.select(this),
"text","",function(O){O.attr("data-notex",1)}),H=J.title.text;J._meta&&(H=g.templateString(H,J._meta));M.text(H).attr({"class":"titletext",transform:"","text-anchor":"middle"}).call(a.font,J.title.font).call(l.convertToTspans,A);H=z(F,C._size);M.attr("transform",r(H.x,H.y)+h(Math.min(1,H.scale))+r(H.tx,H.ty))})})})}},{"../../components/drawing":688,"../../lib":803,"../../lib/svg_text_utils":829,"../bar/plot":952,"../bar/uniform_text":957,"../pie/helpers":1197,"../pie/plot":1201,"@plotly/d3":58}],
1084:[function(b,N,G){var p=b("@plotly/d3"),n=b("../pie/style_one"),k=b("../bar/uniform_text").resizeText;N.exports=function(m){var a=m._fullLayout._funnelarealayer.selectAll(".trace");k(m,a,"funnelarea");a.each(function(g){var h=g[0].trace;g=p.select(this);g.style({opacity:h.opacity});g.selectAll("path.surface").each(function(r){p.select(this).call(n,r,h)})})}},{"../bar/uniform_text":957,"../pie/style_one":1203,"@plotly/d3":58}],1085:[function(b,N,G){G=b("../scatter/attributes");var p=b("../../plots/attributes"),
n=b("../../plots/cartesian/axis_format_attributes").axisHoverFormat,k=b("../../plots/template_attributes").hovertemplateAttrs,m=b("../../components/colorscale/attributes");b=b("../../lib/extend").extendFlat;N.exports=b({z:{valType:"data_array",editType:"calc"},x:b({},G.x,{impliedEdits:{xtype:"array"}}),x0:b({},G.x0,{impliedEdits:{xtype:"scaled"}}),dx:b({},G.dx,{impliedEdits:{xtype:"scaled"}}),y:b({},G.y,{impliedEdits:{ytype:"array"}}),y0:b({},G.y0,{impliedEdits:{ytype:"scaled"}}),dy:b({},G.dy,{impliedEdits:{ytype:"scaled"}}),
xperiod:b({},G.xperiod,{impliedEdits:{xtype:"scaled"}}),yperiod:b({},G.yperiod,{impliedEdits:{ytype:"scaled"}}),xperiod0:b({},G.xperiod0,{impliedEdits:{xtype:"scaled"}}),yperiod0:b({},G.yperiod0,{impliedEdits:{ytype:"scaled"}}),xperiodalignment:b({},G.xperiodalignment,{impliedEdits:{xtype:"scaled"}}),yperiodalignment:b({},G.yperiodalignment,{impliedEdits:{ytype:"scaled"}}),text:{valType:"data_array",editType:"calc"},hovertext:{valType:"data_array",editType:"calc"},transpose:{valType:"boolean",dflt:!1,
editType:"calc"},xtype:{valType:"enumerated",values:["array","scaled"],editType:"calc+clearAxisTypes"},ytype:{valType:"enumerated",values:["array","scaled"],editType:"calc+clearAxisTypes"},zsmooth:{valType:"enumerated",values:["fast","best",!1],dflt:!1,editType:"calc"},hoverongaps:{valType:"boolean",dflt:!0,editType:"none"},connectgaps:{valType:"boolean",editType:"calc"},xgap:{valType:"number",dflt:0,min:0,editType:"plot"},ygap:{valType:"number",dflt:0,min:0,editType:"plot"},xhoverformat:n("x"),yhoverformat:n("y"),
zhoverformat:n("z",1),hovertemplate:k(),showlegend:b({},p.showlegend,{dflt:!1})},{transforms:void 0},m("",{cLetter:"z",autoColorDflt:!1}))},{"../../components/colorscale/attributes":673,"../../lib/extend":793,"../../plots/attributes":850,"../../plots/cartesian/axis_format_attributes":857,"../../plots/template_attributes":926,"../scatter/attributes":1218}],1086:[function(b,N,G){function p(t){for(var w=[],x=t.length,z=0;z<x;z++){var B=t[z];B!==q&&w.push(B)}return w}function n(t,w,x){for(var z=[],B=
-1,A=0;A<x.length;A++)if(w[A]!==q){B++;z[B]=[];for(var D=0;D<x[A].length;D++)t[D]!==q&&z[B].push(x[A][D])}return z}var k=b("../../registry"),m=b("../../lib"),a=b("../../plots/cartesian/axes"),g=b("../../plots/cartesian/align_period"),h=b("../histogram2d/calc"),r=b("../../components/colorscale/calc"),l=b("./convert_column_xyz"),c=b("./clean_2d_array"),d=b("./interp2d"),e=b("./find_empties"),f=b("./make_bound_array"),q=b("../../constants/numerical").BADNUM;N.exports=function(t,w){function x(S){v=w._input.zsmooth=
w.zsmooth=!1;m.warn('cannot use zsmooth: "fast": '+S)}var z=a.getFromId(t,w.xaxis||"x"),B=a.getFromId(t,w.yaxis||"y"),A=k.traceIs(w,"contour"),D=k.traceIs(w,"histogram"),C=k.traceIs(w,"gl2d"),v=A?"best":w.zsmooth,y;z._minDtick=0;B._minDtick=0;if(D){var F=h(t,w);var J=F.orig_x;var K=F.x;var M=F.x0;var H=F.dx;var O=F.orig_y;var I=F.y;var L=F.y0;var Q=F.dy;var Z=F.z}else Z=w.z,m.isArray1D(Z)?(l(w,z,B,"x","y",["z"]),K=w._x,I=w._y,Z=w._z):(J=w.x?z.makeCalcdata(w,"x"):[],O=w.y?B.makeCalcdata(w,"y"):[],
K=g(w,z,"x",J).vals,I=g(w,B,"y",O).vals,w._x=K,w._y=I),M=w.x0,H=w.dx,L=w.y0,Q=w.dy,Z=c(Z,w,z,B);if(z.rangebreaks||B.rangebreaks)Z=n(K,I,Z),D||(K=p(K),I=p(I),w._x=K,w._y=I);D||!A&&!w.connectgaps||(w._emptypoints=e(Z),d(Z,w._emptypoints));if("fast"===v)if("log"===z.type||"log"===B.type)x("log axis found");else if(!D){if(K.length){var ba=(K[K.length-1]-K[0])/(K.length-1),V=Math.abs(ba/100);for(y=0;y<K.length-1;y++)if(Math.abs(K[y+1]-K[y]-ba)>V){x("x scale is not linear");break}}if(I.length&&"fast"===
v)for(ba=(I[I.length-1]-I[0])/(I.length-1),V=Math.abs(ba/100),y=0;y<I.length-1;y++)if(Math.abs(I[y+1]-I[y]-ba)>V){x("y scale is not linear");break}}y=m.maxRowLength(Z);K="scaled"===w.xtype?"":K;ba=f(w,K,M,H,y,z);I="scaled"===w.ytype?"":I;V=f(w,I,L,Q,Z.length,B);C||(w._extremes[z._id]=a.findExtremes(z,ba),w._extremes[B._id]=a.findExtremes(B,V));C={x:ba,y:V,z:Z,text:w._text||w.text,hovertext:w._hovertext||w.hovertext};w.xperiodalignment&&J&&(C.orig_x=J);w.yperiodalignment&&O&&(C.orig_y=O);K&&K.length===
ba.length-1&&(C.xCenter=K);I&&I.length===V.length-1&&(C.yCenter=I);D&&(C.xRanges=F.xRanges,C.yRanges=F.yRanges,C.pts=F.pts);A||r(t,w,{vals:Z,cLetter:"z"});A&&w.contours&&"heatmap"===w.contours.coloring&&(t={type:"contour"===w.type?"heatmap":"histogram2d",xcalendar:w.xcalendar,ycalendar:w.ycalendar},C.xfill=f(t,K,M,H,y,z),C.yfill=f(t,I,L,Q,Z.length,B));return[C]}},{"../../components/colorscale/calc":674,"../../constants/numerical":779,"../../lib":803,"../../plots/cartesian/align_period":851,"../../plots/cartesian/axes":854,
"../../registry":931,"../histogram2d/calc":1118,"./clean_2d_array":1087,"./convert_column_xyz":1089,"./find_empties":1091,"./interp2d":1094,"./make_bound_array":1095}],1087:[function(b,N,G){var p=b("fast-isnumeric"),n=b("../../lib"),k=b("../../constants/numerical").BADNUM;N.exports=function(m,a,g,h){function r(B){if(p(B))return+B}function l(B){if(a&&"carpet"!==a.type&&"contourcarpet"!==a.type&&B&&"category"===B.type&&a["_"+B._id.charAt(0)].length){var A=B._id.charAt(0),D={};A=a["_"+A+"CategoryMap"]||
a[A];for(d=0;d<A.length;d++)D[A[d]]=d;return function(C){C=D[B._categories[C]];return C+1?C:k}}return n.identity}var c,d,e;if(a&&a.transpose){for(d=c=0;d<m.length;d++)c=Math.max(c,m[d].length);if(0===c)return!1;var f=function(B){return B.length};var q=function(B,A,D){return(B[D]||[])[A]}}else c=m.length,f=function(B,A){return B[A].length},q=function(B,A,D){return(B[A]||[])[D]};var t=function(B,A,D){return A===k||D===k?k:q(B,A,D)},w=l(g),x=l(h);h&&"category"===h.type&&(c=h._categories.length);var z=
Array(c);for(d=0;d<c;d++)for(h=g&&"category"===g.type?g._categories.length:f(m,d),z[d]=Array(h),e=0;e<h;e++)z[d][e]=r(t(m,x(d),w(e)));return z}},{"../../constants/numerical":779,"../../lib":803,"fast-isnumeric":249}],1088:[function(b,N,G){N.exports={min:"zmin",max:"zmax"}},{}],1089:[function(b,N,G){var p=b("../../lib"),n=b("../../constants/numerical").BADNUM,k=b("../../plots/cartesian/align_period");N.exports=function(m,a,g,h,r,l){var c=m._length,d=a.makeCalcdata(m,h),e=g.makeCalcdata(m,r);d=k(m,
a,h,d).vals;e=k(m,g,r,e).vals;var f=m.text,q=void 0!==f&&p.isArray1D(f),t=m.hovertext,w=void 0!==t&&p.isArray1D(t),x,z=p.distinctVals(d),B=z.vals,A=p.distinctVals(e),D=A.vals,C=[],v,y;var F=D.length;var J=B.length;for(x=0;x<l.length;x++)C[x]=p.init2dArray(F,J);q&&(v=p.init2dArray(F,J));w&&(y=p.init2dArray(F,J));J=p.init2dArray(F,J);for(x=0;x<c;x++)if(d[x]!==n&&e[x]!==n){var K=p.findBin(d[x]+z.minDiff/2,B),M=p.findBin(e[x]+A.minDiff/2,D);for(F=0;F<l.length;F++)C[F][M][K]=m[l[F]][x],J[M][K]=x;q&&(v[M][K]=
f[x]);w&&(y[M][K]=t[x])}m["_"+h]=B;m["_"+r]=D;for(F=0;F<l.length;F++)m["_"+l[F]]=C[F];q&&(m._text=v);w&&(m._hovertext=y);a&&"category"===a.type&&(m["_"+h+"CategoryMap"]=B.map(function(H){return a._categories[H]}));g&&"category"===g.type&&(m["_"+r+"CategoryMap"]=D.map(function(H){return g._categories[H]}));m._after2before=J}},{"../../constants/numerical":779,"../../lib":803,"../../plots/cartesian/align_period":851}],1090:[function(b,N,G){var p=b("../../lib"),n=b("./xyz_defaults"),k=b("../scatter/period_defaults"),
m=b("./style_defaults"),a=b("../../components/colorscale/defaults"),g=b("./attributes");N.exports=function(h,r,l,c){function d(e,f){return p.coerce(h,r,g,e,f)}n(h,r,d,c)?(k(h,r,c,d),d("xhoverformat"),d("yhoverformat"),d("text"),d("hovertext"),d("hovertemplate"),m(h,r,d,c),d("hoverongaps"),d("connectgaps",p.isArray1D(r.z)&&!1!==r.zsmooth),a(h,r,c,d,{prefix:"",cLetter:"z"})):r.visible=!1}},{"../../components/colorscale/defaults":676,"../../lib":803,"../scatter/period_defaults":1238,"./attributes":1085,
"./style_defaults":1098,"./xyz_defaults":1099}],1091:[function(b,N,G){var p=b("../../lib").maxRowLength;N.exports=function(n){var k=[],m={},a=[],g=n[0],h=[],r=[0,0,0],l=p(n),c,d,e;for(c=0;c<n.length;c++){var f=h;h=g;g=n[c+1]||[];for(d=0;d<l;d++)void 0===h[d]&&((e=(void 0!==h[d-1]?1:0)+(void 0!==h[d+1]?1:0)+(void 0!==f[d]?1:0)+(void 0!==g[d]?1:0))?(0===c&&e++,0===d&&e++,c===n.length-1&&e++,d===h.length-1&&e++,4>e&&(m[[c,d]]=[c,d,e]),k.push([c,d,e])):a.push([c,d]))}for(;a.length;){g={};h=!1;for(n=a.length-
1;0<=n;n--){var q=a[n];c=q[0];d=q[1];if(e=((m[[c-1,d]]||r)[2]+(m[[c+1,d]]||r)[2]+(m[[c,d-1]]||r)[2]+(m[[c,d+1]]||r)[2])/20)g[q]=[c,d,e],a.splice(n,1),h=!0}if(!h)throw"findEmpties iterated with no new neighbors";for(q in g)m[q]=g[q],k.push(g[q])}return k.sort(function(t,w){return w[2]-t[2]})}},{"../../lib":803}],1092:[function(b,N,G){var p=b("../../components/fx"),n=b("../../lib"),k=b("../../plots/cartesian/axes"),m=b("../../components/colorscale").extractOpts;N.exports=function(a,g,h,r,l){l||(l={});
var c=l.isContour,d=a.cd[0];r=d.trace;l=a.xa;var e=a.ya,f=d.x,q=d.y,t=d.z,w=d.xCenter,x=d.yCenter,z=d.zmask,B=r.zhoverformat,A=f,D=q;if(!1!==a.index){try{var C=Math.round(a.index[1]);var v=Math.round(a.index[0])}catch(J){n.error("Error hovering on heatmap, pointNumber must be [row,col], found:",a.index);return}if(0>C||C>=t[0].length||0>v||v>t.length)return}else{if(0<p.inbox(g-f[0],g-f[f.length-1],0)||0<p.inbox(h-q[0],h-q[q.length-1],0))return;if(c){A=[2*f[0]-f[1]];for(C=1;C<f.length;C++)A.push((f[C]+
f[C-1])/2);A.push([2*f[f.length-1]-f[f.length-2]]);D=[2*q[0]-q[1]];for(C=1;C<q.length;C++)D.push((q[C]+q[C-1])/2);D.push([2*q[q.length-1]-q[q.length-2]])}C=Math.max(0,Math.min(A.length-2,n.findBin(g,A)));v=Math.max(0,Math.min(D.length-2,n.findBin(h,D)))}g=l.c2p(f[C]);h=l.c2p(f[C+1]);A=e.c2p(q[v]);D=e.c2p(q[v+1]);if(c){var y=d.orig_x||f;c=d.orig_y||q;h=g;w=y[C];D=A;x=c[v]}else y=d.orig_x||w||f,c=d.orig_y||x||q,w=w?y[C]:(y[C]+y[C+1])/2,x=x?c[v]:(c[v]+c[v+1])/2,l&&"category"===l.type&&(w=f[C]),e&&"category"===
e.type&&(x=q[v]),r.zsmooth&&(g=h=l.c2p(w),A=D=e.c2p(x));e=t[v][C];z&&!z[v][C]&&(e=void 0);if(void 0!==e||r.hoverongaps){var F;Array.isArray(d.hovertext)&&Array.isArray(d.hovertext[v])?F=d.hovertext[v][C]:Array.isArray(d.text)&&Array.isArray(d.text[v])&&(F=d.text[v][C]);d=m(r);l=k.tickText({type:"linear",range:[d.min,d.max],hoverformat:B,_separators:l._separators,_numFormat:l._numFormat},e,"hover").text;return[n.extendFlat(a,{index:r._after2before?r._after2before[v][C]:[v,C],distance:a.maxHoverDistance,
spikeDistance:a.maxSpikeDistance,x0:g,x1:h,y0:A,y1:D,xLabelVal:w,yLabelVal:x,zLabelVal:e,zLabel:l,text:F})]}}},{"../../components/colorscale":678,"../../components/fx":706,"../../lib":803,"../../plots/cartesian/axes":854}],1093:[function(b,N,G){N.exports={attributes:b("./attributes"),supplyDefaults:b("./defaults"),calc:b("./calc"),plot:b("./plot"),colorbar:b("./colorbar"),style:b("./style"),hoverPoints:b("./hover"),moduleType:"trace",name:"heatmap",basePlotModule:b("../../plots/cartesian"),categories:["cartesian",
"svg","2dMap","showLegend"],meta:{}}},{"../../plots/cartesian":868,"./attributes":1085,"./calc":1086,"./colorbar":1088,"./defaults":1090,"./hover":1092,"./plot":1096,"./style":1097}],1094:[function(b,N,G){function p(m,a,g){var h=0,r,l,c,d,e,f;for(r=0;r<a.length;r++){var q=a[r];var t=q[0];q=q[1];var w=m[t][q];for(l=d=e=0;4>l;l++){var x=k[l];if(c=m[t+x[0]])if(x=c[q+x[1]],void 0!==x){if(0===e)var z=f=x;else z=Math.min(z,x),f=Math.max(f,x);d++;e+=x}}if(0===d)throw"iterateInterp2d order is wrong: no defined neighbors";
m[t][q]=e/d;void 0===w?4>d&&(h=1):(m[t][q]=(1+g)*m[t][q]-g*w,f>z&&(h=Math.max(h,Math.abs(m[t][q]-w)/(f-z))))}return h}var n=b("../../lib"),k=[[-1,0],[1,0],[0,-1],[0,1]];N.exports=function(m,a){var g=1,h;p(m,a);for(h=0;h<a.length&&!(4>a[h][2]);h++);a=a.slice(h);for(h=0;100>h&&.01<g;h++)g=p(m,a,.5-.25*Math.min(1,.5*g));.01<g&&n.log("interp2d didn't converge quickly",g);return m}},{"../../lib":803}],1095:[function(b,N,G){var p=b("../../registry"),n=b("../../lib").isArrayOrTypedArray;N.exports=function(k,
m,a,g,h,r){var l=[],c=p.traceIs(k,"contour"),d=p.traceIs(k,"histogram"),e=p.traceIs(k,"gl2d");if(n(m)&&1<m.length&&!d&&"category"!==r.type)if(g=m.length,g<=h){if(c||e)l=m.slice(0,h);else if(1===h)l=[m[0]-.5,m[0]+.5];else{l=[1.5*m[0]-.5*m[1]];for(c=1;c<g;c++)l.push(.5*(m[c-1]+m[c]));l.push(1.5*m[g-1]-.5*m[g-2])}if(g<h)for(e=l[l.length-1],m=e-l[l.length-2],c=g;c<h;c++)e+=m,l.push(e)}else return c?m.slice(0,h):m.slice(0,h+1);else for(k=k[r._id.charAt(0)+"calendar"],m=d?r.r2c(a,0,k):n(m)&&1===m.length?
m[0]:void 0===a?0:("log"===r.type?r.d2c:r.r2c)(a,0,k),g=g||1,c=c||e?0:-.5;c<h;c++)l.push(m+g*c);return l}},{"../../lib":803,"../../registry":931}],1096:[function(b,N,G){function p(c,d){var e=d.length-2,f=h.constrain(h.findBin(c,d),0,e),q=d[f];c=h.constrain(f+(c-q)/(d[f+1]-q)-.5,0,e);d=Math.round(c);f=Math.abs(c-d);return c&&c!==e&&f?{bin0:d,frac:f,bin1:Math.round(d+f/(c-d))}:{bin0:d,bin1:d,frac:0}}function n(c,d){var e=d.length-1;e=h.constrain(h.findBin(c,d),0,e);var f=d[e];c=(c-f)/(d[e+1]-f)||0;
return 0>=c?{bin0:e,bin1:e,frac:0}:.5>c?{bin0:e,bin1:e+1,frac:c}:{bin0:e+1,bin1:e,frac:1-c}}function k(c,d,e){c[d]=e[0];c[d+1]=e[1];c[d+2]=e[2];c[d+3]=Math.round(255*e[3])}var m=b("@plotly/d3"),a=b("tinycolor2"),g=b("../../registry"),h=b("../../lib"),r=b("../../components/colorscale").makeColorScaleFuncFromTrace,l=b("../../constants/xmlns_namespaces");N.exports=function(c,d,e,f){var q=d.xaxis,t=d.yaxis;h.makeTraceGroups(f,e,"hm").each(function(w){function x(na,oa){return void 0!==na?(na=W(na),na[0]=
Math.round(na[0]),na[1]=Math.round(na[1]),na[2]=Math.round(na[2]),ja+=oa,ma+=na[0]*oa,ia+=na[1]*oa,ra+=na[2]*oa,na):[0,0,0,0]}function z(na,oa,sa,za){var Ha=na[sa.bin0];if(void 0===Ha)return x(void 0,1);na=na[sa.bin1];var Wa=oa[sa.bin0];oa=oa[sa.bin1];return x(Ha+sa.frac*(na-Ha||0)+za.frac*((Wa-Ha||0)+sa.frac*(void 0===na?void 0===oa?0:void 0===Wa?2*(oa-Ha):2*(2*oa-Wa-Ha)/3:void 0===oa?void 0===Wa?0:2*(2*Ha-na-Wa)/3:void 0===Wa?2*(2*oa-na-Ha)/3:oa+Ha-na-Wa)))}var B=m.select(this),A=w[0],D=A.trace,
C=A.z,v=A.x,y=A.y,F=A.xCenter,J=A.yCenter,K=g.traceIs(D,"contour"),M=K?"best":D.zsmooth,H=C.length,O=h.maxRowLength(C),I=!1,L=!1,Q;for(Q=0;void 0===Z&&Q<v.length-1;){var Z=q.c2p(v[Q]);Q++}for(Q=v.length-1;void 0===ba&&0<Q;){var ba=q.c2p(v[Q]);Q--}ba<Z&&(Q=ba,ba=Z,Z=Q,I=!0);for(Q=0;void 0===V&&Q<y.length-1;){var V=t.c2p(y[Q]);Q++}for(Q=y.length-1;void 0===S&&0<Q;){var S=t.c2p(y[Q]);Q--}S<V&&(Q=V,V=S,S=Q,L=!0);K&&(F=v,J=y,v=A.xfill,y=A.yfill);"fast"!==M&&(Q="best"===M?0:.5,Z=Math.max(-Q*q._length,Z),
ba=Math.min((1+Q)*q._length,ba),V=Math.max(-Q*t._length,V),S=Math.min((1+Q)*t._length,S));var T=Math.round(ba-Z),fa=Math.round(S-V);if(0>=T||0>=fa)B.selectAll("image").data([]).exit().remove();else{"fast"===M?(S=O,Q=H):(S=T,Q=fa);ba=document.createElement("canvas");ba.width=S;ba.height=Q;S=ba.getContext("2d");var W=r(D,{noNumericCheck:!0,returnArray:!0});"fast"===M?(A=I?function(na){return O-1-na}:h.identity,K=L?function(na){return H-1-na}:h.identity):(A=function(na){return h.constrain(Math.round(q.c2p(v[na])-
Z),0,T)},K=function(na){return h.constrain(Math.round(t.c2p(y[na])-V),0,fa)});Q=K(0);var aa=[Q,Q];I=I?0:1;L=L?0:1;var ja=0,ma=0,ia=0,ra=0;if(M){D=0;try{var wa=new Uint8Array(T*fa*4)}catch(na){wa=Array(T*fa*4)}if("best"===M){M=F||v;I=J||y;L=Array(M.length);A=Array(I.length);K=Array(T);F=F?n:p;aa=J?n:p;for(Q=0;Q<M.length;Q++)L[Q]=Math.round(q.c2p(M[Q])-Z);for(Q=0;Q<I.length;Q++)A[Q]=Math.round(t.c2p(I[Q])-V);for(Q=0;Q<T;Q++)K[Q]=F(Q,L);for(J=0;J<fa;J++)for(M=aa(J,A),I=C[M.bin0],L=C[M.bin1],Q=0;Q<T;Q++,
D+=4)F=z(I,L,K[Q],M),k(wa,D,F)}else for(J=0;J<H;J++)for(M=C[J],aa=K(J),Q=0;Q<T;Q++)F=x(M[Q],1),D=4*(aa*T+A(Q)),k(wa,D,F);C=S.createImageData(T,fa);try{C.data.set(wa)}catch(na){for(Q=C.data,F=Q.length,J=0;J<F;J++)Q[J]=wa[J]}S.putImageData(C,0,0)}else{wa=D.xgap;D=D.ygap;var pa=Math.floor(wa/2),la=Math.floor(D/2);for(J=0;J<H;J++)if(M=C[J],aa.reverse(),aa[L]=K(J+1),aa[0]!==aa[1]&&void 0!==aa[0]&&void 0!==aa[1]){Q=A(0);var ka=[Q,Q];for(Q=0;Q<O;Q++)ka.reverse(),ka[I]=A(Q+1),ka[0]!==ka[1]&&void 0!==ka[0]&&
void 0!==ka[1]&&(F=M[Q],F=x(F,(ka[1]-ka[0])*(aa[1]-aa[0])),S.fillStyle="rgba("+F.join(",")+")",S.fillRect(ka[0]+pa,aa[0]+la,ka[1]-ka[0]-wa,aa[1]-aa[0]-D))}}ma=Math.round(ma/ja);ia=Math.round(ia/ja);ra=Math.round(ra/ja);C=a("rgb("+ma+","+ia+","+ra+")");c._hmpixcount=(c._hmpixcount||0)+ja;c._hmlumcount=(c._hmlumcount||0)+ja*C.getLuminance();w=B.selectAll("image").data(w);w.enter().append("svg:image").attr({xmlns:l.svg,preserveAspectRatio:"none"});w.attr({height:fa,width:T,x:Z,y:V,"xlink:href":ba.toDataURL("image/png")})}})}},
{"../../components/colorscale":678,"../../constants/xmlns_namespaces":780,"../../lib":803,"../../registry":931,"@plotly/d3":58,tinycolor2:598}],1097:[function(b,N,G){var p=b("@plotly/d3");N.exports=function(n){p.select(n).selectAll(".hm image").style("opacity",function(k){return k.trace.opacity})}},{"@plotly/d3":58}],1098:[function(b,N,G){N.exports=function(p,n,k){!1===k("zsmooth")&&(k("xgap"),k("ygap"));k("zhoverformat")}},{}],1099:[function(b,N,G){function p(a,g){var h=g(a);"scaled"===(h?g(a+"type",
"array"):"scaled")&&(g(a+"0"),g("d"+a));return h}var n=b("fast-isnumeric"),k=b("../../lib"),m=b("../../registry");N.exports=function(a,g,h,r,l,c){var d=h("z");l=l||"x";c=c||"y";if(void 0===d||!d.length)return 0;if(k.isArray1D(a.z)){var e=h(l);h=h(c);e=k.minRowLength(e);h=k.minRowLength(h);if(0===e||0===h)return 0;g._length=Math.min(e,h,d.length)}else{p(l,h);p(c,h);e=!0;for(var f=!1,q=!1,t,w=0;w<d.length;w++){t=d[w];if(!k.isArrayOrTypedArray(t)){e=!1;break}0<t.length&&(f=!0);for(var x=0;x<t.length;x++)if(n(t[x])){q=
!0;break}}if(!(e&&f&&q))return 0;h("transpose");g._length=null}if("heatmapgl"===a.type)return!0;m.getComponentMethod("calendars","handleTraceDefaults")(a,g,[l,c],r);return!0}},{"../../lib":803,"../../registry":931,"fast-isnumeric":249}],1100:[function(b,N,G){G=b("../heatmap/attributes");var p=b("../../components/colorscale/attributes"),n=b("../../lib/extend").extendFlat;b=b("../../plot_api/edit_types").overrideAll;for(var k="z x x0 dx y y0 dy text transpose xtype ytype".split(" "),m={},a=0;a<k.length;a++){var g=
k[a];m[g]=G[g]}m.zsmooth={valType:"enumerated",values:["fast",!1],dflt:"fast",editType:"calc"};n(m,p("",{cLetter:"z",autoColorDflt:!1}));N.exports=b(m,"calc","nested")},{"../../components/colorscale/attributes":673,"../../lib/extend":793,"../../plot_api/edit_types":836,"../heatmap/attributes":1085}],1101:[function(b,N,G){function p(a,g){this.scene=a;this.uid=g;this.type="heatmapgl";this.name="";this.hoverinfo="all";this.xData=[];this.yData=[];this.zData=[];this.textLabels=[];this.idToIndex=[];this.bounds=
[0,0,0,0];this.options={zsmooth:"fast",z:[],x:[],y:[],shape:[0,0],colorLevels:[0],colorValues:[0,0,0,1]};this.heatmap=n(a.glplot,this.options);this.heatmap._trace=this}var n=b("gl-heatmap2d"),k=b("../../plots/cartesian/axes"),m=b("../../lib/str2rgbarray");b=p.prototype;b.handlePick=function(a){var g=this.options,h=g.shape,r=a.pointId,l=r%h[0];h=Math.floor(r/h[0]);return{trace:this,dataCoord:a.dataCoord,traceCoord:[g.x[l],g.y[h],g.z[r]],textLabel:this.textLabels[r],name:this.name,pointIndex:[h,l],
hoverinfo:this.hoverinfo}};b.update=function(a,g){g=g[0];this.index=a.index;this.name=a.name;this.hoverinfo=a.hoverinfo;var h=g.z;this.options.z=[].concat.apply([],h);this.options.shape=[h[0].length,h.length];this.options.x=g.x;this.options.y=g.y;this.options.zsmooth=a.zsmooth;h=a.colorscale;for(var r=a.zmin,l=a.zmax,c=h.length,d=Array(c),e=Array(4*c),f=0;f<c;f++){var q=h[f],t=m(q[1]);d[f]=r+q[0]*(l-r);for(q=0;4>q;q++)e[4*f+q]=t[q]}this.options.colorLevels=d;this.options.colorValues=e;this.textLabels=
[].concat.apply([],a.text);this.heatmap.update(this.options);h=this.scene.xaxis;r=this.scene.yaxis;if(!1===a.zsmooth){var w={ppad:g.x[1]-g.x[0]};var x={ppad:g.y[1]-g.y[0]}}a._extremes[h._id]=k.findExtremes(h,g.x,w);a._extremes[r._id]=k.findExtremes(r,g.y,x)};b.dispose=function(){this.heatmap.dispose()};N.exports=function(a,g,h){a=new p(a,g.uid);a.update(g,h);return a}},{"../../lib/str2rgbarray":828,"../../plots/cartesian/axes":854,"gl-heatmap2d":278}],1102:[function(b,N,G){var p=b("../../lib"),n=
b("../heatmap/xyz_defaults"),k=b("../../components/colorscale/defaults"),m=b("./attributes");N.exports=function(a,g,h,r){function l(c,d){return p.coerce(a,g,m,c,d)}n(a,g,l,r)?(l("text"),l("zsmooth"),k(a,g,r,l,{prefix:"",cLetter:"z"})):g.visible=!1}},{"../../components/colorscale/defaults":676,"../../lib":803,"../heatmap/xyz_defaults":1099,"./attributes":1100}],1103:[function(b,N,G){N.exports={attributes:b("./attributes"),supplyDefaults:b("./defaults"),colorbar:b("../heatmap/colorbar"),calc:b("../heatmap/calc"),
plot:b("./convert"),moduleType:"trace",name:"heatmapgl",basePlotModule:b("../../plots/gl2d"),categories:["gl","gl2d","2dMap"],meta:{}}},{"../../plots/gl2d":894,"../heatmap/calc":1086,"../heatmap/colorbar":1088,"./attributes":1100,"./convert":1101,"./defaults":1102}],1104:[function(b,N,G){G=b("../bar/attributes");var p=b("../../plots/cartesian/axis_format_attributes").axisHoverFormat,n=b("../../plots/template_attributes").hovertemplateAttrs,k=b("./bin_attributes"),m=b("./constants");b=b("../../lib/extend").extendFlat;
N.exports={x:{valType:"data_array",editType:"calc+clearAxisTypes"},y:{valType:"data_array",editType:"calc+clearAxisTypes"},xhoverformat:p("x"),yhoverformat:p("y"),text:b({},G.text,{}),hovertext:b({},G.hovertext,{}),orientation:G.orientation,histfunc:{valType:"enumerated",values:["count","sum","avg","min","max"],dflt:"count",editType:"calc"},histnorm:{valType:"enumerated",values:["","percent","probability","density","probability density"],dflt:"",editType:"calc"},cumulative:{enabled:{valType:"boolean",
dflt:!1,editType:"calc"},direction:{valType:"enumerated",values:["increasing","decreasing"],dflt:"increasing",editType:"calc"},currentbin:{valType:"enumerated",values:["include","exclude","half"],dflt:"include",editType:"calc"},editType:"calc"},nbinsx:{valType:"integer",min:0,dflt:0,editType:"calc"},xbins:k("x",!0),nbinsy:{valType:"integer",min:0,dflt:0,editType:"calc"},ybins:k("y",!0),autobinx:{valType:"boolean",dflt:null,editType:"calc"},autobiny:{valType:"boolean",dflt:null,editType:"calc"},bingroup:{valType:"string",
dflt:"",editType:"calc"},hovertemplate:n({},{keys:m.eventDataKeys}),marker:G.marker,offsetgroup:G.offsetgroup,alignmentgroup:G.alignmentgroup,selected:G.selected,unselected:G.unselected,_deprecated:{bardir:G._deprecated.bardir}}},{"../../lib/extend":793,"../../plots/cartesian/axis_format_attributes":857,"../../plots/template_attributes":926,"../bar/attributes":941,"./bin_attributes":1106,"./constants":1110}],1105:[function(b,N,G){N.exports=function(p,n){for(var k=p.length,m=0,a=0;a<k;a++)n[a]?(p[a]/=
n[a],m+=p[a]):p[a]=null;return m}},{}],1106:[function(b,N,G){N.exports=function(p,n){return{start:{valType:"any",editType:"calc"},end:{valType:"any",editType:"calc"},size:{valType:"any",editType:"calc"},editType:"calc"}}},{}],1107:[function(b,N,G){var p=b("fast-isnumeric");N.exports={count:function(n,k,m){m[n]++;return 1},sum:function(n,k,m,a){k=a[k];return p(k)?(k=Number(k),m[n]+=k,k):0},avg:function(n,k,m,a,g){k=a[k];p(k)&&(k=Number(k),m[n]+=k,g[n]++);return 0},min:function(n,k,m,a){k=a[k];if(p(k)){k=
Number(k);if(!p(m[n]))return m[n]=k;if(m[n]>k)return a=k-m[n],m[n]=k,a}return 0},max:function(n,k,m,a){k=a[k];if(p(k)){k=Number(k);if(!p(m[n]))return m[n]=k;if(m[n]<k)return a=k-m[n],m[n]=k,a}return 0}}},{"fast-isnumeric":249}],1108:[function(b,N,G){function p(d,e,f,q){if(0>=d*e)return Infinity;for(var t="date"===f.type,w=n(Math.abs(e-d),t),x=0;10>x;x++){var z=n(80*w,t);if(w===z)break;var B=z;var A=d,D=e,C=f,v=q;t&&B>g?(A=k(A,C,v),D=k(D,C,v),B=B===m?0:1,B=A[B]!==D[B]):B=.1<Math.floor(D/B)-Math.floor(A/
B);if(B)w=z;else break}return w}function n(d,e){return e&&d>l?d>g?d>1.1*m?m:d>1.1*a?a:g:d>h?h:d>r?r:l:Math.pow(10,Math.floor(Math.log(d)/Math.LN10))}function k(d,e,f){d=e.c2d(d,m,f).split("-");""===d[0]&&(d.unshift(),d[0]="-"+d[0]);return d}G=b("../../constants/numerical");var m=G.ONEAVGYEAR,a=G.ONEAVGMONTH,g=G.ONEDAY,h=G.ONEHOUR,r=G.ONEMIN,l=G.ONESEC,c=b("../../plots/cartesian/axes").tickIncrement;N.exports=function(d,e,f,q,t){var w=-1.1*e,x=-.1*e,z=d-x;e=f[0];f=f[1];z=Math.min(p(e+x,e+z,q,t),p(f+
x,f+z,q,t));w=Math.min(p(e+w,e+x,q,t),p(f+w,f+x,q,t));if(z>w&&w<Math.abs(f-e)/4E3){var B=z;var A=!1}else B=Math.min(z,w),A=!0;if("date"===q.type&&B>g){var D=B===m?1:6,C=B===m?"M12":"M1";return function(v,y){var F=q.c2d(v,m,t),J=F.indexOf("-",D);0<J&&(F=F.substr(0,J));F=q.d2c(F,0,t);F<v&&(J=c(F,C,!1,t),(F+J)/2<v+d&&(F=J));return y&&A?c(F,C,!0,t):F}}return function(v,y){var F=B*Math.round(v/B);F+B/10<v&&F+.9*B<v+d&&(F+=B);y&&A&&(F-=B);return F}}},{"../../constants/numerical":779,"../../plots/cartesian/axes":854}],
1109:[function(b,N,G){function p(f,q,t,w,x){function z(Q,Z,ba){Z[Q+"Found"]?(Z[Q]=v(Z[Q]),null===Z[Q]&&(Z[Q]=ba[Q])):(L[Q]=Z[Q]=ba[Q],a.nestedProperty(y[0],B+"."+Q).set(ba[Q]))}var B=w+"bins",A=f._fullLayout,D=A._histogramBinOpts[q["_"+w+"bingroup"]];A="overlay"===A.barmode;var C,v="date"===t.type?function(Q){return Q||0===Q?a.cleanDate(Q,null,I):null}:function(Q){return m(Q)?Number(Q):null};if(q["_"+w+"autoBinFinished"])delete q["_"+w+"autoBinFinished"];else{var y=D.traces;var F=[],J=!0,K=!1,M=!1;
for(C=0;C<y.length;C++){var H=y[C];if(H.visible){var O=D.dirs[C];O=H["_"+O+"pos0"]=t.makeCalcdata(H,O);F=a.concat(F,O);delete H["_"+w+"autoBinFinished"];!0===q.visible&&(J?J=!1:(delete H._autoBin,H["_"+w+"autoBinFinished"]=1),g.traceIs(H,"2dMap")&&(K=!0),"histogram2dcontour"===H.type&&(M=!0))}}var I=y[0][w+"calendar"];C=h.autoBin(F,t,D.nbins,K,I,D.sizeFound&&D.size);var L=(y[0]._autoBin={})[D.dirs[0]]={};M&&(D.size||(C.start=t.c2r(h.tickIncrement(t.r2c(C.start,0,I),C.size,!0,I),0,I)),void 0===D.end&&
(C.end=t.c2r(h.tickIncrement(t.r2c(C.end,0,I),C.size,!1,I),0,I)));if(A&&!g.traceIs(q,"2dMap")&&0===C._dataSpan&&"category"!==t.type&&"multicategory"!==t.type){if(x)return[C,O,!0];C=n(f,q,t,w,B)}O=H.cumulative||{};O.enabled&&"include"!==O.currentbin&&("decreasing"===O.direction?C.start=t.c2r(h.tickIncrement(t.r2c(C.start,0,I),C.size,!0,I),0,I):C.end=t.c2r(h.tickIncrement(t.r2c(C.end,0,I),C.size,!1,I),0,I));D.size=C.size;D.sizeFound||(L.size=C.size,a.nestedProperty(y[0],B+".size").set(C.size));z("start",
D,C);z("end",D,C)}O=q["_"+w+"pos0"];delete q["_"+w+"pos0"];x=q._input[B]||{};f=a.extendFlat({},D);M=D.start;A=t.r2l(x.start);H=void 0!==A;(D.startFound||H)&&A!==t.r2l(M)&&(A=H?A:a.aggNums(Math.min,null,O),M={type:"category"===t.type||"multicategory"===t.type?"linear":t.type,r2l:t.r2l,dtick:D.size,tick0:M,calendar:I,range:[A,h.tickIncrement(A,D.size,!1,I)].map(t.l2r)},M=h.tickFirst(M),M>t.r2l(A)&&(M=h.tickIncrement(M,D.size,!0,I)),f.start=t.l2r(M),H||a.nestedProperty(q,B+".start").set(f.start));H=
D.end;A=t.r2l(x.end);x=void 0!==A;(D.endFound||x)&&A!==t.r2l(H)&&(D=x?A:a.aggNums(Math.max,null,O),f.end=t.l2r(D),x||a.nestedProperty(q,B+".start").set(f.end));t="autobin"+w;!1===q._input[t]&&(q._input[B]=a.extendFlat({},q[B]||{}),delete q._input[t],delete q[t]);return[f,O]}function n(f,q,t,w,x){for(var z=f._fullLayout,B=q.xaxis,A=q.yaxis,D=q.orientation,C=[],v=f._fullData,y=0;y<v.length;y++){var F=v[y];"histogram"===F.type&&!0===F.visible&&F.orientation===D&&F.xaxis===B&&F.yaxis===A&&C.push(F)}y=
!1;B=Infinity;A=[q];for(D=0;D<C.length;D++)if(v=C[D],v===q)y=!0;else if(y){F=p(f,v,t,w,!0);var J=F[0],K=F[2];v["_"+w+"autoBinFinished"]=1;v["_"+w+"pos0"]=F[1];K?A.push(v):B=Math.min(B,J.size)}else F=z._histogramBinOpts[v["_"+w+"bingroup"]],B=Math.min(B,F.size||v[x].size);f=Array(A.length);for(D=0;D<A.length;D++)for(C=A[D]["_"+w+"pos0"],v=0;v<C.length;v++)if(void 0!==C[v]){f[D]=C[v];break}isFinite(B)||(B=a.distinctVals(f).minDiff);for(D=0;D<A.length;D++)v=A[D],C=v[w+"calendar"],C={start:t.c2r(f[D]-
B/2,0,C),end:t.c2r(f[D]+B/2,0,C),size:B},v._input[x]=v[x]=C,(F=z._histogramBinOpts[v["_"+w+"bingroup"]])&&a.extendFlat(F,C);return q[x]}function k(f,q,t){function w(A){B=f[A];f[A]/=2}function x(A){z=f[A];f[A]=B+z/2;B+=z}var z,B;if("half"===t)if("increasing"===q)for(w(0),q=1;q<f.length;q++)x(q);else for(w(f.length-1),q=f.length-2;0<=q;q--)x(q);else if("increasing"===q){for(q=1;q<f.length;q++)f[q]+=f[q-1];"exclude"===t&&(f.unshift(0),f.pop())}else{for(q=f.length-2;0<=q;q--)f[q]+=f[q+1];"exclude"===
t&&(f.push(0),f.shift())}}var m=b("fast-isnumeric"),a=b("../../lib"),g=b("../../registry"),h=b("../../plots/cartesian/axes"),r=b("../bar/arrays_to_calcdata"),l=b("./bin_functions"),c=b("./norm_functions"),d=b("./average"),e=b("./bin_label_vals");N.exports={calc:function(f,q){var t=[],w=[],x=h.getFromId(f,"h"===q.orientation?q.yaxis:q.xaxis),z="h"===q.orientation?"y":"x",B={x:"y",y:"x"}[z],A=q[z+"calendar"],D=q.cumulative,C=p(f,q,x,z),v=C[0];C=C[1];var y="string"===typeof v.size,F=[],J=y?F:v,K=[],
M=[],H=[],O=0,I=q.histnorm,L=q.histfunc,Q=-1!==I.indexOf("density"),Z;D.enabled&&Q&&(I=I.replace(/ ?density$/,""),Q=!1);var ba="max"===L||"min"===L?null:0,V=l.count;I=c[I];var S=!1;if(a.isArrayOrTypedArray(q[B])&&"count"!==L){var T=q[B];S="avg"===L;V=l[L]}B=x.r2c(v.start,0,A);for(Z=x.r2c(v.end,0,A)+(B-h.tickIncrement(B,v.size,!1,A))/1E6;B<Z&&1E6>t.length;){L=h.tickIncrement(B,v.size,!1,A);t.push((B+L)/2);w.push(ba);H.push([]);F.push(B);Q&&K.push(1/(L-B));S&&M.push(0);if(L<=B)break;B=L}F.push(B);y||
"date"!==x.type||(J={start:x.r2c(J.start,0,A),end:x.r2c(J.end,0,A),size:J.size});f._fullLayout._roundFnOpts||(f._fullLayout._roundFnOpts={});var fa=q["_"+z+"bingroup"];ba={leftGap:Infinity,rightGap:Infinity};fa&&(f._fullLayout._roundFnOpts[fa]||(f._fullLayout._roundFnOpts[fa]=ba),ba=f._fullLayout._roundFnOpts[fa]);L=w.length;z=!0;Z=ba.leftGap;var W=ba.rightGap;y={};for(B=0;B<C.length;B++){var aa=C[B];Q=a.findBin(aa,J);0<=Q&&Q<L&&(O+=V(Q,B,w,T,M),z&&H[Q].length&&aa!==C[H[Q][0]]&&(z=!1),H[Q].push(B),
y[B]=Q,Z=Math.min(Z,aa-F[Q]),W=Math.min(W,F[Q+1]-aa))}ba.leftGap=Z;ba.rightGap=W;var ja;z||(ja=function(ma,ia){return function(){var ra=f._fullLayout._roundFnOpts[fa];return e(ra.leftGap,ra.rightGap,F,x,A)(ma,ia)}});S&&(O=d(w,M));I&&I(w,O,K);D.enabled&&k(w,D.direction,D.currentbin);K=Math.min(t.length,w.length);T=[];M=0;J=K-1;for(B=0;B<K;B++)if(w[B]){M=B;break}for(B=K-1;B>=M;B--)if(w[B]){J=B;break}for(B=M;B<=J;B++)m(t[B])&&m(w[B])&&(K={p:t[B],s:w[B],b:0},D.enabled||(K.pts=H[B],z?K.ph0=K.ph1=H[B].length?
C[H[B][0]]:t[B]:(q._computePh=!0,K.ph0=ja(F[B]),K.ph1=ja(F[B+1],!0))),T.push(K));1===T.length&&(T[0].width1=h.tickIncrement(T[0].p,v.size,!1,A)-T[0].p);r(T,q);a.isArrayOrTypedArray(q.selectedpoints)&&a.tagSelected(T,q,y);return T},calcAllAutoBins:p}},{"../../lib":803,"../../plots/cartesian/axes":854,"../../registry":931,"../bar/arrays_to_calcdata":940,"./average":1105,"./bin_functions":1107,"./bin_label_vals":1108,"./norm_functions":1116,"fast-isnumeric":249}],1110:[function(b,N,G){N.exports={eventDataKeys:["binNumber"]}},
{}],1111:[function(b,N,G){var p=b("../../lib"),n=b("../../plots/cartesian/axis_ids"),k=b("../../registry").traceIs,m=b("../bar/defaults").handleGroupingDefaults,a=p.nestedProperty,g=b("../../plots/cartesian/constraints").getAxisGroup,h=[{aStr:{x:"xbins.start",y:"ybins.start"},name:"start"},{aStr:{x:"xbins.end",y:"ybins.end"},name:"end"},{aStr:{x:"xbins.size",y:"ybins.size"},name:"size"},{aStr:{x:"nbinsx",y:"nbinsy"},name:"nbins"}],r=["x","y"];N.exports=function(l,c){function d(F,J){return p.coerce(B._input,
B,B._module.attributes,F,J)}function e(F){return"v"===F.orientation?"x":"y"}function f(F,J,K){var M=F.uid+"__"+K;J||(J=M);var H=n.getFromTrace({_fullLayout:c},F,K).type;var O=F[K+"calendar"]||"",I=q[J],L=!0;I&&(H===I.axType&&O===I.calendar?(L=!1,I.traces.push(F),I.dirs.push(K)):(J=M,H!==I.axType&&p.warn(["Attempted to group the bins of trace",F.index,"set on a","type:"+H,"axis with bins on","type:"+I.axType,"axis."].join(" ")),O!==I.calendar&&p.warn(["Attempted to group the bins of trace",F.index,
"set with a",O,"calendar with bins",I.calendar?"on a "+I.calendar+" calendar":"w/o a set calendar"].join(" "))));L&&(q[J]={traces:[F],dirs:[K],axType:H,calendar:F[K+"calendar"]||""});F["_"+K+"bingroup"]=J}var q=c._histogramBinOpts={},t=[],w={},x=[],z;for(z=0;z<l.length;z++){var B=l[z];k(B,"histogram")&&(t.push(B),delete B._xautoBinFinished,delete B._yautoBinFinished,k(B,"2dMap")||m(B._input,B,c,d))}l=c._alignmentOpts||{};for(z=0;z<t.length;z++){B=t[z];var A="";if(!k(B,"2dMap")){var D=e(B);if("group"===
c.barmode&&B.alignmentgroup){var C=g(c,B[D+"axis"])+B.orientation;(l[C]||{})[B.alignmentgroup]&&(A=C)}A||"overlay"===c.barmode||(A=g(c,B.xaxis)+g(c,B.yaxis)+e(B))}A?(w[A]||(w[A]=[]),w[A].push(B)):x.push(B)}for(A in w)if(t=w[A],1===t.length)x.push(t[0]);else for(z=!1,t.length&&(B=t[0],z=d("bingroup")),A=z||A,z=0;z<t.length;z++)B=t[z],(l=B._input.bingroup)&&l!==A&&p.warn(["Trace",B.index,"must match within bingroup",A+".","Ignoring its bingroup:",l,"setting."].join(" ")),B.bingroup=A,f(B,A,e(B));for(z=
0;z<x.length;z++)if(B=x[z],w=d("bingroup"),k(B,"2dMap"))for(t=0;2>t;t++)D=r[t],l=d(D+"bingroup",w?w+"__"+D:null),f(B,l,D);else f(B,w,e(B));for(A in q)for(w=q[A],t=w.traces,x=0;x<h.length;x++)if(l=h[x],C=l.name,"nbins"!==C||!w.sizeFound){for(z=0;z<t.length;z++){B=t[z];D=w.dirs[z];var v=l.aStr[D];if(void 0!==a(B._input,v).get()){w[C]=d(v);w[C+"Found"]=!0;break}var y=(B._autoBin||{})[D]||{};y[C]&&a(B,v).set(y[C])}if("start"===C||"end"===C)for(;z<t.length;z++)B=t[z],B["_"+D+"bingroup"]&&(y=(B._autoBin||
{})[D]||{},d(v,y[C]));"nbins"!==C||w.sizeFound||w.nbinsFound||(B=t[0],w[C]=d(v))}}},{"../../lib":803,"../../plots/cartesian/axis_ids":858,"../../plots/cartesian/constraints":862,"../../registry":931,"../bar/defaults":945}],1112:[function(b,N,G){var p=b("../../registry"),n=b("../../lib"),k=b("../../components/color"),m=b("../bar/style_defaults"),a=b("./attributes");N.exports=function(g,h,r,l){function c(t,w){return n.coerce(g,h,a,t,w)}var d=c("x"),e=c("y");c("cumulative.enabled")&&(c("cumulative.direction"),
c("cumulative.currentbin"));c("text");c("hovertext");c("hovertemplate");c("xhoverformat");c("yhoverformat");var f=c("orientation",e&&!d?"h":"v"),q="v"===f?"x":"y";f="v"===f?"y":"x";(d=d&&e?Math.min(n.minRowLength(d)&&n.minRowLength(e)):n.minRowLength(h[q]||[]))?(h._length=d,p.getComponentMethod("calendars","handleTraceDefaults")(g,h,["x","y"],l),h[f]&&c("histfunc"),c("histnorm"),c("autobin"+q),m(g,h,c,r,l),n.coerceSelectionMarkerOpacity(h,c),r=(h.marker.line||{}).color,l=p.getComponentMethod("errorbars",
"supplyDefaults"),l(g,h,r||k.defaultLine,{axis:"y"}),l(g,h,r||k.defaultLine,{axis:"x",inherit:"y"})):h.visible=!1}},{"../../components/color":666,"../../lib":803,"../../registry":931,"../bar/style_defaults":956,"./attributes":1104}],1113:[function(b,N,G){N.exports=function(p,n,k,m,a){p.x="xVal"in n?n.xVal:n.x;p.y="yVal"in n?n.yVal:n.y;"zLabelVal"in n&&(p.z=n.zLabelVal);n.xa&&(p.xaxis=n.xa);n.ya&&(p.yaxis=n.ya);if(!(k.cumulative||{}).enabled){n=Array.isArray(a)?m[0].pts[a[0]][a[1]]:m[a].pts;p.pointNumbers=
n;p.binNumber=p.pointNumber;delete p.pointNumber;delete p.pointIndex;if(k._indexToPoints)for(m=[],a=0;a<n.length;a++)m=m.concat(k._indexToPoints[n[a]]);else m=n;p.pointIndices=m}return p}},{}],1114:[function(b,N,G){var p=b("../bar/hover").hoverPoints,n=b("../../plots/cartesian/axes").hoverLabelText;N.exports=function(k,m,a,g,h){if(m=p(k,m,a,g,h))return k=m[0],a=k.cd[k.index],g=k.cd[0].trace,g.cumulative.enabled||(h="h"===g.orientation?"y":"x",k[h+"Label"]=n(k[h+"a"],[a.ph0,a.ph1],g[h+"hoverformat"])),
m}},{"../../plots/cartesian/axes":854,"../bar/hover":948}],1115:[function(b,N,G){N.exports={attributes:b("./attributes"),layoutAttributes:b("../bar/layout_attributes"),supplyDefaults:b("./defaults"),crossTraceDefaults:b("./cross_trace_defaults"),supplyLayoutDefaults:b("../bar/layout_defaults"),calc:b("./calc").calc,crossTraceCalc:b("../bar/cross_trace_calc").crossTraceCalc,plot:b("../bar/plot").plot,layerName:"barlayer",style:b("../bar/style").style,styleOnSelect:b("../bar/style").styleOnSelect,colorbar:b("../scatter/marker_colorbar"),
hoverPoints:b("./hover"),selectPoints:b("../bar/select"),eventData:b("./event_data"),moduleType:"trace",name:"histogram",basePlotModule:b("../../plots/cartesian"),categories:"bar-like cartesian svg bar histogram oriented errorBarsOK showLegend".split(" "),meta:{}}},{"../../plots/cartesian":868,"../bar/cross_trace_calc":944,"../bar/layout_attributes":950,"../bar/layout_defaults":951,"../bar/plot":952,"../bar/select":953,"../bar/style":955,"../scatter/marker_colorbar":1236,"./attributes":1104,"./calc":1109,
"./cross_trace_defaults":1111,"./defaults":1112,"./event_data":1113,"./hover":1114}],1116:[function(b,N,G){N.exports={percent:function(p,n){var k=p.length;n=100/n;for(var m=0;m<k;m++)p[m]*=n},probability:function(p,n){for(var k=p.length,m=0;m<k;m++)p[m]/=n},density:function(p,n,k,m){n=p.length;m=m||1;for(var a=0;a<n;a++)p[a]=p[a]*k[a]*m},"probability density":function(p,n,k,m){var a=p.length;m&&(n/=m);for(m=0;m<a;m++)p[m]*=k[m]/n}}},{}],1117:[function(b,N,G){G=b("../histogram/attributes");var p=b("../histogram/bin_attributes"),
n=b("../heatmap/attributes"),k=b("../../plots/attributes"),m=b("../../plots/cartesian/axis_format_attributes").axisHoverFormat,a=b("../../plots/template_attributes").hovertemplateAttrs,g=b("../../components/colorscale/attributes");b=b("../../lib/extend").extendFlat;N.exports=b({x:G.x,y:G.y,z:{valType:"data_array",editType:"calc"},marker:{color:{valType:"data_array",editType:"calc"},editType:"calc"},histnorm:G.histnorm,histfunc:G.histfunc,nbinsx:G.nbinsx,xbins:p("x"),nbinsy:G.nbinsy,ybins:p("y"),autobinx:G.autobinx,
autobiny:G.autobiny,bingroup:b({},G.bingroup,{}),xbingroup:b({},G.bingroup,{}),ybingroup:b({},G.bingroup,{}),xgap:n.xgap,ygap:n.ygap,zsmooth:n.zsmooth,xhoverformat:m("x"),yhoverformat:m("y"),zhoverformat:m("z",1),hovertemplate:a({},{keys:"z"}),showlegend:b({},k.showlegend,{dflt:!1})},g("",{cLetter:"z",autoColorDflt:!1}))},{"../../components/colorscale/attributes":673,"../../lib/extend":793,"../../plots/attributes":850,"../../plots/cartesian/axis_format_attributes":857,"../../plots/template_attributes":926,
"../heatmap/attributes":1085,"../histogram/attributes":1104,"../histogram/bin_attributes":1106}],1118:[function(b,N,G){function p(d,e,f,q){var t=Array(d);if(q)for(f=0;f<d;f++)t[f]=1/(e[f+1]-e[f]);else for(e=1/f,f=0;f<d;f++)t[f]=e;return t}function n(d,e){return{start:d(e.start),end:d(e.end),size:e.size}}function k(d,e,f,q,t,w){var x=d.length-1,z=Array(x);q=l(f,q,d,t,w);for(f=0;f<x;f++)t=(e||[])[f],z[f]=void 0===t?[q(d[f]),q(d[f+1],!0)]:[t,t];return z}var m=b("../../lib"),a=b("../../plots/cartesian/axes"),
g=b("../histogram/bin_functions"),h=b("../histogram/norm_functions"),r=b("../histogram/average"),l=b("../histogram/bin_label_vals"),c=b("../histogram/calc").calcAllAutoBins;N.exports=function(d,e){var f=a.getFromId(d,e.xaxis),q=a.getFromId(d,e.yaxis),t=e.xcalendar,w=e.ycalendar,x=function(oa){return f.r2c(oa,0,t)},z=function(oa){return q.r2c(oa,0,w)},B=c(d,e,f,"x");var A=B[0];B=B[1];d=c(d,e,q,"y");var D=d[0];d=d[1];var C=e._length;B.length>C&&B.splice(C,B.length-C);d.length>C&&d.splice(C,d.length-
C);var v=[],y=[],F=[],J="string"===typeof A.size,K="string"===typeof D.size,M=[],H=[],O=J?M:A,I=K?H:D,L=0,Q=[],Z=[],ba=e.histnorm,V=e.histfunc,S=-1!==ba.indexOf("density"),T="max"===V||"min"===V?null:0,fa=g.count;ba=h[ba];var W=!1,aa=[],ja=[];(e="z"in e?e.z:"marker"in e&&Array.isArray(e.marker.color)?e.marker.color:"")&&"count"!==V&&(W="avg"===V,fa=g[V]);V=A.size;var ma=x(A.start),ia=x(A.end)+(ma-a.tickIncrement(ma,V,!1,t))/1E6;for(A=ma;A<ia;A=a.tickIncrement(A,V,!1,t))y.push(T),M.push(A),W&&F.push(0);
M.push(A);T=y.length;V=(A-ma)/T;ma=f.c2r(ma+V/2,0,t);var ra=D.size;ia=z(D.start);var wa=z(D.end)+(ia-a.tickIncrement(ia,ra,!1,w))/1E6;for(A=ia;A<wa;A=a.tickIncrement(A,ra,!1,w)){v.push(y.slice());H.push(A);var pa=Array(T);for(D=0;D<T;D++)pa[D]=[];Z.push(pa);W&&Q.push(F.slice())}H.push(A);F=v.length;D=(A-ia)/F;ia=q.c2r(ia+D/2,0,w);S&&(aa=p(y.length,O,V,J),ja=p(v.length,I,D,K));J||"date"!==f.type||(O=n(x,O));K||"date"!==q.type||(I=n(z,I));J=y=!0;K=Array(T);S=Array(F);var la=pa=wa=ra=Infinity;for(A=
0;A<C;A++){var ka=B[A],na=d[A];x=m.findBin(ka,O);z=m.findBin(na,I);0<=x&&x<T&&0<=z&&z<F&&(L+=fa(x,A,v[z],e,Q[z]),Z[z][x].push(A),y&&(void 0===K[x]?K[x]=ka:K[x]!==ka&&(y=!1)),J&&(void 0===S[z]?S[z]=na:S[z]!==na&&(J=!1)),ra=Math.min(ra,ka-M[x]),wa=Math.min(wa,M[x+1]-ka),pa=Math.min(pa,na-H[z]),la=Math.min(la,H[z+1]-na))}if(W)for(z=0;z<F;z++)L+=r(v[z],Q[z]);if(ba)for(z=0;z<F;z++)ba(v[z],L,aa,ja[z]);return{x:B,xRanges:k(M,y&&K,ra,wa,f,t),x0:ma,dx:V,y:d,yRanges:k(H,J&&S,pa,la,q,w),y0:ia,dy:D,z:v,pts:Z}}},
{"../../lib":803,"../../plots/cartesian/axes":854,"../histogram/average":1105,"../histogram/bin_functions":1107,"../histogram/bin_label_vals":1108,"../histogram/calc":1109,"../histogram/norm_functions":1116}],1119:[function(b,N,G){var p=b("../../lib"),n=b("./sample_defaults"),k=b("../heatmap/style_defaults"),m=b("../../components/colorscale/defaults"),a=b("./attributes");N.exports=function(g,h,r,l){function c(d,e){return p.coerce(g,h,a,d,e)}n(g,h,c,l);!1!==h.visible&&(k(g,h,c,l),m(g,h,l,c,{prefix:"",
cLetter:"z"}),c("hovertemplate"),c("xhoverformat"),c("yhoverformat"))}},{"../../components/colorscale/defaults":676,"../../lib":803,"../heatmap/style_defaults":1098,"./attributes":1117,"./sample_defaults":1122}],1120:[function(b,N,G){var p=b("../heatmap/hover"),n=b("../../plots/cartesian/axes").hoverLabelText;N.exports=function(k,m,a,g,h){if(m=p(k,m,a,g,h)){k=m[0];h=k.index;var r=k.cd[0];a=r.trace;g=r.xRanges[h[1]];h=r.yRanges[h[0]];k.xLabel=n(k.xa,[g[0],g[1]],a.xhoverformat);k.yLabel=n(k.ya,[h[0],
h[1]],a.yhoverformat);return m}}},{"../../plots/cartesian/axes":854,"../heatmap/hover":1092}],1121:[function(b,N,G){N.exports={attributes:b("./attributes"),supplyDefaults:b("./defaults"),crossTraceDefaults:b("../histogram/cross_trace_defaults"),calc:b("../heatmap/calc"),plot:b("../heatmap/plot"),layerName:"heatmaplayer",colorbar:b("../heatmap/colorbar"),style:b("../heatmap/style"),hoverPoints:b("./hover"),eventData:b("../histogram/event_data"),moduleType:"trace",name:"histogram2d",basePlotModule:b("../../plots/cartesian"),
categories:["cartesian","svg","2dMap","histogram","showLegend"],meta:{}}},{"../../plots/cartesian":868,"../heatmap/calc":1086,"../heatmap/colorbar":1088,"../heatmap/plot":1096,"../heatmap/style":1097,"../histogram/cross_trace_defaults":1111,"../histogram/event_data":1113,"./attributes":1117,"./defaults":1119,"./hover":1120}],1122:[function(b,N,G){var p=b("../../registry"),n=b("../../lib");N.exports=function(k,m,a,g){var h=a("x"),r=a("y");h=n.minRowLength(h);r=n.minRowLength(r);h&&r?(m._length=Math.min(h,
r),p.getComponentMethod("calendars","handleTraceDefaults")(k,m,["x","y"],g),(a("z")||a("marker.color"))&&a("histfunc"),a("histnorm"),a("autobinx"),a("autobiny")):m.visible=!1}},{"../../lib":803,"../../registry":931}],1123:[function(b,N,G){G=b("../histogram2d/attributes");var p=b("../contour/attributes"),n=b("../../components/colorscale/attributes"),k=b("../../plots/cartesian/axis_format_attributes").axisHoverFormat;b=b("../../lib/extend").extendFlat;N.exports=b({x:G.x,y:G.y,z:G.z,marker:G.marker,
histnorm:G.histnorm,histfunc:G.histfunc,nbinsx:G.nbinsx,xbins:G.xbins,nbinsy:G.nbinsy,ybins:G.ybins,autobinx:G.autobinx,autobiny:G.autobiny,bingroup:G.bingroup,xbingroup:G.xbingroup,ybingroup:G.ybingroup,autocontour:p.autocontour,ncontours:p.ncontours,contours:p.contours,line:{color:p.line.color,width:b({},p.line.width,{dflt:.5}),dash:p.line.dash,smoothing:p.line.smoothing,editType:"plot"},xhoverformat:k("x"),yhoverformat:k("y"),zhoverformat:k("z",1),hovertemplate:G.hovertemplate},n("",{cLetter:"z",
editTypeOverride:"calc"}))},{"../../components/colorscale/attributes":673,"../../lib/extend":793,"../../plots/cartesian/axis_format_attributes":857,"../contour/attributes":1028,"../histogram2d/attributes":1117}],1124:[function(b,N,G){var p=b("../../lib"),n=b("../histogram2d/sample_defaults"),k=b("../contour/contours_defaults"),m=b("../contour/style_defaults"),a=b("./attributes");N.exports=function(g,h,r,l){function c(d,e){return p.coerce(g,h,a,d,e)}n(g,h,c,l);!1!==h.visible&&(k(g,h,c,function(d){return p.coerce2(g,
h,a,d)}),m(g,h,c,l),c("hovertemplate"),c("xhoverformat"),c("yhoverformat"))}},{"../../lib":803,"../contour/contours_defaults":1035,"../contour/style_defaults":1049,"../histogram2d/sample_defaults":1122,"./attributes":1123}],1125:[function(b,N,G){N.exports={attributes:b("./attributes"),supplyDefaults:b("./defaults"),crossTraceDefaults:b("../histogram/cross_trace_defaults"),calc:b("../contour/calc"),plot:b("../contour/plot").plot,layerName:"contourlayer",style:b("../contour/style"),colorbar:b("../contour/colorbar"),
hoverPoints:b("../contour/hover"),moduleType:"trace",name:"histogram2dcontour",basePlotModule:b("../../plots/cartesian"),categories:"cartesian svg 2dMap contour histogram showLegend".split(" "),meta:{}}},{"../../plots/cartesian":868,"../contour/calc":1029,"../contour/colorbar":1031,"../contour/hover":1041,"../contour/plot":1046,"../contour/style":1048,"../histogram/cross_trace_defaults":1111,"./attributes":1123,"./defaults":1124}],1126:[function(b,N,G){G=b("../../plots/template_attributes").hovertemplateAttrs;
var p=b("../../plots/template_attributes").texttemplateAttrs,n=b("../../components/colorscale/attributes"),k=b("../../plots/domain").attributes,m=b("../pie/attributes"),a=b("../sunburst/attributes"),g=b("../treemap/attributes"),h=b("../treemap/constants");b=b("../../lib/extend").extendFlat;N.exports={labels:a.labels,parents:a.parents,values:a.values,branchvalues:a.branchvalues,count:a.count,level:a.level,maxdepth:a.maxdepth,tiling:{orientation:{valType:"enumerated",values:["v","h"],dflt:"h",editType:"plot"},
flip:g.tiling.flip,pad:{valType:"number",min:0,dflt:0,editType:"plot"},editType:"calc"},marker:b({colors:a.marker.colors,line:a.marker.line,editType:"calc"},n("marker",{colorAttr:"colors",anim:!1})),leaf:a.leaf,pathbar:g.pathbar,text:m.text,textinfo:a.textinfo,texttemplate:p({editType:"plot"},{keys:h.eventDataKeys.concat(["label","value"])}),hovertext:m.hovertext,hoverinfo:a.hoverinfo,hovertemplate:G({},{keys:h.eventDataKeys}),textfont:m.textfont,insidetextfont:m.insidetextfont,outsidetextfont:g.outsidetextfont,
textposition:g.textposition,sort:m.sort,root:a.root,domain:k({name:"icicle",trace:!0,editType:"calc"})}},{"../../components/colorscale/attributes":673,"../../lib/extend":793,"../../plots/domain":882,"../../plots/template_attributes":926,"../pie/attributes":1192,"../sunburst/attributes":1330,"../treemap/attributes":1356,"../treemap/constants":1359}],1127:[function(b,N,G){var p=b("../../plots/plots");G.name="icicle";G.plot=function(n,k,m,a){p.plotBasePlot(G.name,n,k,m,a)};G.clean=function(n,k,m,a){p.cleanBasePlot(G.name,
n,k,m,a)}},{"../../plots/plots":917}],1128:[function(b,N,G){var p=b("../sunburst/calc");G.calc=function(n,k){return p.calc(n,k)};G.crossTraceCalc=function(n){return p._runCrossTraceCalc("icicle",n)}},{"../sunburst/calc":1332}],1129:[function(b,N,G){var p=b("../../lib"),n=b("./attributes"),k=b("../../components/color"),m=b("../../plots/domain").defaults,a=b("../bar/defaults").handleText,g=b("../bar/constants").TEXTPAD;b=b("../../components/colorscale");var h=b.hasColorscale,r=b.handleDefaults;N.exports=
function(l,c,d,e){function f(t,w){return p.coerce(l,c,n,t,w)}d=f("labels");var q=f("parents");d&&d.length&&q&&q.length?((d=f("values"))&&d.length?f("branchvalues"):f("count"),f("level"),f("maxdepth"),f("tiling.orientation"),f("tiling.flip"),f("tiling.pad"),d=f("text"),f("texttemplate"),c.texttemplate||f("textinfo",Array.isArray(d)?"text+label":"label"),f("hovertext"),f("hovertemplate"),d=f("pathbar.visible"),a(l,c,e,f,"auto",{hasPathbar:d,moduleHasSelected:!1,moduleHasUnselected:!1,moduleHasConstrain:!1,
moduleHasCliponaxis:!1,moduleHasTextangle:!1,moduleHasInsideanchor:!1}),f("textposition"),f("marker.line.width")&&f("marker.line.color",e.paper_bgcolor),f("marker.colors"),(q=c._hasColorscale=h(l,"marker","colors")||(l.marker||{}).coloraxis)&&r(l,c,e,f,{prefix:"marker.",cLetter:"c"}),f("leaf.opacity",q?1:.7),c._hovered={marker:{line:{width:2,color:k.contrast(e.paper_bgcolor)}}},d&&(f("pathbar.thickness",c.pathbar.textfont.size+2*g),f("pathbar.side"),f("pathbar.edgeshape")),f("sort"),f("root.color"),
m(c,e,f),c._length=null):c.visible=!1}},{"../../components/color":666,"../../components/colorscale":678,"../../lib":803,"../../plots/domain":882,"../bar/constants":943,"../bar/defaults":945,"./attributes":1126}],1130:[function(b,N,G){var p=b("@plotly/d3"),n=b("../../lib"),k=b("../../components/drawing"),m=b("../../lib/svg_text_utils"),a=b("./partition"),g=b("./style").styleOne,h=b("../treemap/constants"),r=b("../sunburst/helpers"),l=b("../sunburst/fx"),c=b("../sunburst/plot").formatSliceLabel;N.exports=
function(d,e,f,q,t){var w=t.width,x=t.height,z=t.viewX,B=t.viewY,A=t.pathSlice,D=t.toMoveInsideSlice,C=t.strTransform,v=t.hasTransition,y=t.handleSlicesExit,F=t.makeUpdateSliceInterpolator,J=t.makeUpdateTextInterpolator;t=t.prevEntry;var K=d._fullLayout,M=e[0].trace,H=-1!==M.textposition.indexOf("left"),O=-1!==M.textposition.indexOf("right"),I=-1!==M.textposition.indexOf("bottom"),L=a(f,[w,x],{flipX:-1<M.tiling.flip.indexOf("x"),flipY:-1<M.tiling.flip.indexOf("y"),orientation:M.tiling.orientation,
pad:{inner:M.tiling.pad},maxDepth:M._maxDepth}).descendants(),Q=Infinity,Z=-Infinity;L.forEach(function(S){var T=S.depth;T>=M._maxDepth?(S.x0=S.x1=(S.x0+S.x1)/2,S.y0=S.y1=(S.y0+S.y1)/2):(Q=Math.min(Q,T),Z=Math.max(Z,T))});q=q.data(L,r.getPtId);M._maxVisibleLayers=isFinite(Z)?Z-Q+1:0;q.enter().append("g").classed("slice",!0);y(q,!1,{},[w,x],A);q.order();var ba=null;if(v&&t){var V=r.getPtId(t);q.each(function(S){null===ba&&r.getPtId(S)===V&&(ba={x0:S.x0,x1:S.x1,y0:S.y0,y1:S.y1})})}v&&(q=q.transition().each("end",
function(){var S=p.select(this);r.setSliceCursor(S,d,{hideOnRoot:!0,hideOnLeaves:!1,isTransitioning:!1})}));q.each(function(S){S._hoverX=z(S.x1-M.tiling.pad);S._hoverY=I?B(S.y1-M.tiling.pad/2):B(S.y0+M.tiling.pad/2);var T=p.select(this),fa=n.ensureSingle(T,"path","surface",function(W){W.style("pointer-events","all")});v?fa.transition().attrTween("d",function(W){var aa=F(W,!1,ba||{x0:0,x1:w,y0:0,y1:x},[w,x],{orientation:M.tiling.orientation,flipX:-1<M.tiling.flip.indexOf("x"),flipY:-1<M.tiling.flip.indexOf("y")});
return function(ja){return A(aa(ja))}}):fa.attr("d",A);T.call(l,f,d,e,{styleOne:g,eventDataKeys:h.eventDataKeys,transitionTime:h.CLICK_TRANSITION_TIME,transitionEasing:h.CLICK_TRANSITION_EASING}).call(r.setSliceCursor,d,{isTransitioning:d._transitioning});fa.call(g,S,M,{hovered:!1});S._text=S.x0===S.x1||S.y0===S.y1?"":c(S,f,M,e,K)||"";T=n.ensureSingle(T,"g","slicetext");T=n.ensureSingle(T,"text","",function(W){W.attr("data-notex",1)});fa=n.ensureUniformFontSize(d,r.determineTextFont(M,S,K.font));
T.text(S._text||" ").classed("slicetext",!0).attr("text-anchor",O?"end":H?"start":"middle").call(k.font,fa).call(m.convertToTspans,d);S.textBB=k.bBox(T.node());S.transform=D(S,{fontSize:fa.size});S.transform.fontSize=fa.size;v?T.transition().attrTween("transform",function(W){var aa=J(W,!1,ba||{x0:0,x1:w,y0:0,y1:x},[w,x]);return function(ja){return C(aa(ja))}}):T.attr("transform",C(S))});return ba}},{"../../components/drawing":688,"../../lib":803,"../../lib/svg_text_utils":829,"../sunburst/fx":1335,
"../sunburst/helpers":1336,"../sunburst/plot":1340,"../treemap/constants":1359,"./partition":1134,"./style":1136,"@plotly/d3":58}],1131:[function(b,N,G){N.exports={moduleType:"trace",name:"icicle",basePlotModule:b("./base_plot"),categories:[],animatable:!0,attributes:b("./attributes"),layoutAttributes:b("./layout_attributes"),supplyDefaults:b("./defaults"),supplyLayoutDefaults:b("./layout_defaults"),calc:b("./calc").calc,crossTraceCalc:b("./calc").crossTraceCalc,plot:b("./plot"),style:b("./style").style,
colorbar:b("../scatter/marker_colorbar"),meta:{}}},{"../scatter/marker_colorbar":1236,"./attributes":1126,"./base_plot":1127,"./calc":1128,"./defaults":1129,"./layout_attributes":1132,"./layout_defaults":1133,"./plot":1135,"./style":1136}],1132:[function(b,N,G){N.exports={iciclecolorway:{valType:"colorlist",editType:"calc"},extendiciclecolors:{valType:"boolean",dflt:!0,editType:"calc"}}},{}],1133:[function(b,N,G){var p=b("../../lib"),n=b("./layout_attributes");N.exports=function(k,m){p.coerce(k,m,
n,"iciclecolorway",m.colorway);p.coerce(k,m,n,"extendiciclecolors",void 0)}},{"../../lib":803,"./layout_attributes":1132}],1134:[function(b,N,G){var p=b("d3-hierarchy"),n=b("../treemap/flip_tree");N.exports=function(k,m,a){var g=a.flipX,h=a.flipY,r="h"===a.orientation,l=a.maxDepth,c=m[0],d=m[1];l&&(c=(k.height+1)*m[0]/Math.min(k.height+1,l),d=(k.height+1)*m[1]/Math.min(k.height+1,l));k=p.partition().padding(a.pad.inner).size(r?[m[1],c]:[m[0],d])(k);(r||g||h)&&n(k,m,{swapXY:r,flipX:g,flipY:h});return k}},
{"../treemap/flip_tree":1364,"d3-hierarchy":170}],1135:[function(b,N,G){var p=b("../treemap/draw"),n=b("./draw_descendants");N.exports=function(k,m,a,g){return p(k,m,a,g,{type:"icicle",drawDescendants:n})}},{"../treemap/draw":1361,"./draw_descendants":1130}],1136:[function(b,N,G){function p(g,h,r){var l=h.data.data;h=!h.children;var c=l.i,d=m.castOption(r,c,"marker.line.color")||k.defaultLine;c=m.castOption(r,c,"marker.line.width")||0;g.style("stroke-width",c).call(k.fill,l.color).call(k.stroke,d).style("opacity",
h?r.leaf.opacity:null)}var n=b("@plotly/d3"),k=b("../../components/color"),m=b("../../lib"),a=b("../bar/uniform_text").resizeText;N.exports={style:function(g){var h=g._fullLayout._iciclelayer.selectAll(".trace");a(g,h,"icicle");h.each(function(r){var l=n.select(this),c=r[0].trace;l.style("opacity",c.opacity);l.selectAll("path.surface").each(function(d){n.select(this).call(p,d,c)})})},styleOne:p}},{"../../components/color":666,"../../lib":803,"../bar/uniform_text":957,"@plotly/d3":58}],1137:[function(b,
N,G){G=b("../../plots/attributes");var p=b("../../plots/template_attributes").hovertemplateAttrs,n=b("../../lib/extend").extendFlat;b=b("./constants").colormodel;for(var k=["rgb","rgba","rgba256","hsl","hsla"],m=[],a=[],g=0;g<k.length;g++){var h=b[k[g]];m.push("For the `"+k[g]+"` colormodel, it is ["+(h.zminDflt||h.min).join(", ")+"].");a.push("For the `"+k[g]+"` colormodel, it is ["+(h.zmaxDflt||h.max).join(", ")+"].")}N.exports=n({source:{valType:"string",editType:"calc"},z:{valType:"data_array",
editType:"calc"},colormodel:{valType:"enumerated",values:k,editType:"calc"},zsmooth:{valType:"enumerated",values:["fast",!1],dflt:!1,editType:"plot"},zmin:{valType:"info_array",items:[{valType:"number",editType:"calc"},{valType:"number",editType:"calc"},{valType:"number",editType:"calc"},{valType:"number",editType:"calc"}],editType:"calc"},zmax:{valType:"info_array",items:[{valType:"number",editType:"calc"},{valType:"number",editType:"calc"},{valType:"number",editType:"calc"},{valType:"number",editType:"calc"}],
editType:"calc"},x0:{valType:"any",dflt:0,editType:"calc+clearAxisTypes"},y0:{valType:"any",dflt:0,editType:"calc+clearAxisTypes"},dx:{valType:"number",dflt:1,editType:"calc"},dy:{valType:"number",dflt:1,editType:"calc"},text:{valType:"data_array",editType:"plot"},hovertext:{valType:"data_array",editType:"plot"},hoverinfo:n({},G.hoverinfo,{flags:"x y z color name text".split(" "),dflt:"x+y+z+text+name"}),hovertemplate:p({},{keys:["z","color","colormodel"]}),transforms:void 0})},{"../../lib/extend":793,
"../../plots/attributes":850,"../../plots/template_attributes":926,"./constants":1139}],1138:[function(b,N,G){function p(c,d,e,f){return function(q){return m.constrain((q-c)*d,e,f)}}function n(c,d){return function(e){return m.constrain(e,c,d)}}function k(c){var d=a.colormodel[c.colormodel],e=(d.colormodel||c.colormodel).length;c._sArray=[];for(var f=0;f<e;f++)d.min[f]!==c.zmin[f]||d.max[f]!==c.zmax[f]?c._sArray.push(p(c.zmin[f],(d.max[f]-d.min[f])/(c.zmax[f]-c.zmin[f]),d.min[f],d.max[f])):c._sArray.push(n(d.min[f],
d.max[f]));return function(q){q=q.slice(0,e);for(var t=0;t<e;t++){var w=q[t];if(!g(w))return!1;q[t]=c._sArray[t](w)}return q}}var m=b("../../lib"),a=b("./constants"),g=b("fast-isnumeric"),h=b("../../plots/cartesian/axes"),r=b("../../lib").maxRowLength,l=b("./helpers").getImageSize;N.exports=function(c,d){if(d._hasZ){var e=d.z.length;var f=r(d.z)}else d._hasSource&&(f=l(d.source),e=f.height,f=f.width);var q=h.getFromId(c,d.xaxis||"x");c=h.getFromId(c,d.yaxis||"y");var t=q.d2c(d.x0)-d.dx/2,w=c.d2c(d.y0)-
d.dy/2,x,z=[t,t+f*d.dx],B=[w,w+e*d.dy];if(q&&"log"===q.type)for(x=0;x<f;x++)z.push(t+x*d.dx);if(c&&"log"===c.type)for(x=0;x<e;x++)B.push(w+x*d.dy);d._extremes[q._id]=h.findExtremes(q,z);d._extremes[c._id]=h.findExtremes(c,B);d._scaler=k(d);return[{x0:t,y0:w,z:d.z,w:f,h:e}]}},{"../../lib":803,"../../plots/cartesian/axes":854,"./constants":1139,"./helpers":1142,"fast-isnumeric":249}],1139:[function(b,N,G){N.exports={colormodel:{rgb:{min:[0,0,0],max:[255,255,255],fmt:function(p){return p.slice(0,3)},
suffix:["","",""]},rgba:{min:[0,0,0,0],max:[255,255,255,1],fmt:function(p){return p.slice(0,4)},suffix:["","","",""]},rgba256:{colormodel:"rgba",zminDflt:[0,0,0,0],zmaxDflt:[255,255,255,255],min:[0,0,0,0],max:[255,255,255,1],fmt:function(p){return p.slice(0,4)},suffix:["","","",""]},hsl:{min:[0,0,0],max:[360,100,100],fmt:function(p){p=p.slice(0,3);p[1]+="%";p[2]+="%";return p},suffix:["","%","%"]},hsla:{min:[0,0,0,0],max:[360,100,100,1],fmt:function(p){p=p.slice(0,4);p[1]+="%";p[2]+="%";return p},
suffix:["","%","%",""]}},pixelatedStyle:"image-rendering: optimizeSpeed; image-rendering: -moz-crisp-edges; image-rendering: -o-crisp-edges; image-rendering: -webkit-optimize-contrast; image-rendering: optimize-contrast; image-rendering: crisp-edges; image-rendering: pixelated; "}},{}],1140:[function(b,N,G){var p=b("../../lib"),n=b("./attributes"),k=b("./constants"),m=b("../../snapshot/helpers").IMAGE_URL_PREFIX;N.exports=function(a,g){function h(l,c){return p.coerce(a,g,n,l,c)}h("source");g.source&&
!g.source.match(m)&&delete g.source;g._hasSource=!!g.source;var r=h("z");g._hasZ=!(void 0===r||!r.length||!r[0]||!r[0].length);g._hasZ||g._hasSource?(h("x0"),h("y0"),h("dx"),h("dy"),g._hasZ?(h("colormodel","rgb"),r=k.colormodel[g.colormodel],h("zmin",r.zminDflt||r.min),h("zmax",r.zmaxDflt||r.max)):g._hasSource&&(g.colormodel="rgba256",r=k.colormodel[g.colormodel],g.zmin=r.zminDflt,g.zmax=r.zmaxDflt),h("zsmooth"),h("text"),h("hovertext"),h("hovertemplate"),g._length=null):g.visible=!1}},{"../../lib":803,
"../../snapshot/helpers":935,"./attributes":1137,"./constants":1139}],1141:[function(b,N,G){N.exports=function(p,n){"xVal"in n&&(p.x=n.xVal);"yVal"in n&&(p.y=n.yVal);n.xa&&(p.xaxis=n.xa);n.ya&&(p.yaxis=n.ya);p.color=n.color;p.colormodel=n.trace.colormodel;p.z||(p.z=n.color);return p}},{}],1142:[function(b,N,G){var p=b("probe-image-size/sync"),n=b("../../snapshot/helpers").IMAGE_URL_PREFIX,k=b("buffer/").Buffer;G.getImageSize=function(m){m=m.replace(n,"");m=new k(m,"base64");return p(m)}},{"../../snapshot/helpers":935,
"buffer/":117,"probe-image-size/sync":527}],1143:[function(b,N,G){var p=b("../../components/fx"),n=b("../../lib"),k=b("./constants");N.exports=function(m,a,g){var h=m.cd[0],r=h.trace,l=m.xa,c=m.ya;if(!(0<p.inbox(a-h.x0,a-(h.x0+h.w*r.dx),0)||0<p.inbox(g-h.y0,g-(h.y0+h.h*r.dy),0))){a=Math.floor((a-h.x0)/r.dx);g=Math.floor(Math.abs(g-h.y0)/r.dy);if(r._hasZ)var d=h.z[g][a];else r._hasSource&&(d=r._canvas.el.getContext("2d").getImageData(a,g,1,1).data);if(d){var e=h.hi||r.hoverinfo,f;e&&(e=e.split("+"),
-1!==e.indexOf("all")&&(e=["color"]),-1!==e.indexOf("color")&&(f=!0));var q=k.colormodel[r.colormodel],t=q.colormodel||r.colormodel,w=t.length;e=r._scaler(d);q=q.suffix;var x=[];if(r.hovertemplate||f)x.push("["+[e[0]+q[0],e[1]+q[1],e[2]+q[2]].join(", ")),4===w&&x.push(", "+e[3]+q[3]),x.push("]"),x=x.join(""),m.extraText=t.toUpperCase()+": "+x;var z;Array.isArray(r.hovertext)&&Array.isArray(r.hovertext[g])?z=r.hovertext[g][a]:Array.isArray(r.text)&&Array.isArray(r.text[g])&&(z=r.text[g][a]);c=c.c2p(h.y0+
(g+.5)*r.dy);f=h.x0+(a+.5)*r.dx;t=h.y0+(g+.5)*r.dy;d="["+d.slice(0,r.colormodel.length).join(", ")+"]";return[n.extendFlat(m,{index:[g,a],x0:l.c2p(h.x0+a*r.dx),x1:l.c2p(h.x0+(a+1)*r.dx),y0:c,y1:c,color:e,xVal:f,xLabelVal:f,yVal:t,yLabelVal:t,zLabelVal:d,text:z,hovertemplateLabels:{zLabel:d,colorLabel:x,"color[0]Label":e[0]+q[0],"color[1]Label":e[1]+q[1],"color[2]Label":e[2]+q[2],"color[3]Label":e[3]+q[3]}})]}}}},{"../../components/fx":706,"../../lib":803,"./constants":1139}],1144:[function(b,N,G){N.exports=
{attributes:b("./attributes"),supplyDefaults:b("./defaults"),calc:b("./calc"),plot:b("./plot"),style:b("./style"),hoverPoints:b("./hover"),eventData:b("./event_data"),moduleType:"trace",name:"image",basePlotModule:b("../../plots/cartesian"),categories:["cartesian","svg","2dMap","noSortingByValue"],animatable:!1,meta:{}}},{"../../plots/cartesian":868,"./attributes":1137,"./calc":1138,"./defaults":1140,"./event_data":1141,"./hover":1143,"./plot":1145,"./style":1146}],1145:[function(b,N,G){var p=b("@plotly/d3"),
n=b("../../lib"),k=n.strTranslate,m=b("../../constants/xmlns_namespaces"),a=b("./constants"),g=n.isIOS()||n.isSafari()||n.isIE();N.exports=function(h,r,l,c){var d=r.xaxis,e=r.yaxis,f=!(g||h._context._exportedPlot);n.makeTraceGroups(c,l,"im").each(function(q){function t(V){var S=document.createElement("canvas");S.width=Q;S.height=Z;var T=S.getContext("2d"),fa=function(ka){return n.constrain(Math.round(d.c2p(D+ka*F)-M),0,Q)},W=function(ka){return n.constrain(Math.round(e.c2p(C+ka*J)-O),0,Z)},aa=a.colormodel[z.colormodel],
ja=aa.colormodel||z.colormodel;aa=aa.fmt;for(K=0;K<x.w;K++){var ma=fa(K),ia=fa(K+1);if(ia!==ma&&!isNaN(ia)&&!isNaN(ma))for(var ra=0;ra<x.h;ra++){var wa=W(ra),pa=W(ra+1);if(pa!==wa&&!isNaN(pa)&&!isNaN(wa)&&V(K,ra)){var la=z._scaler(V(K,ra));T.fillStyle=la?ja+"("+aa(la).join(",")+")":"rgba(0,0,0,0)";T.fillRect(ma,wa,ia-ma,pa-wa)}}}return S}var w=p.select(this),x=q[0],z=x.trace,B=("fast"===z.zsmooth||!1===z.zsmooth&&f)&&!z._hasZ&&z._hasSource&&"linear"===d.type&&"linear"===e.type;z._realImage=B;var A=
x.z,D=x.x0,C=x.y0,v=x.w,y=x.h,F=z.dx,J=z.dy,K;for(K=0;void 0===M&&K<v;){var M=d.c2p(D+K*F);K++}for(K=v;void 0===H&&0<K;){var H=d.c2p(D+K*F);K--}for(K=0;void 0===O&&K<y;){var O=e.c2p(C+K*J);K++}for(K=y;void 0===I&&0<K;){var I=e.c2p(C+K*J);K--}if(H<M){var L=H;H=M;M=L}I<O&&(L=O,O=I,I=L);B||(M=Math.max(-.5*d._length,M),H=Math.min(1.5*d._length,H),O=Math.max(-.5*e._length,O),I=Math.min(1.5*e._length,I));var Q=Math.round(H-M),Z=Math.round(I-O);if(0>=Q||0>=Z)w.selectAll("image").data([]).exit().remove();
else{var ba=w.selectAll("image").data([q]);ba.enter().append("svg:image").attr({xmlns:m.svg,preserveAspectRatio:"none"});ba.exit().remove();q=!1===z.zsmooth?a.pixelatedStyle:"";B&&(w=n.simpleMap(d.range,d.r2l),H=n.simpleMap(e.range,e.r2l),w=w[1]<w[0],H=H[1]>H[0],w||H)&&(L=M+Q/2,I=O+Z/2,q+="transform:"+k(L+"px",I+"px")+"scale("+(w?-1:1)+","+(H?-1:1)+")"+k(-L+"px",-I+"px")+";");ba.attr("style",q);q=(new Promise(function(V){if(z._hasZ)V();else if(z._hasSource)if(z._canvas&&z._canvas.el.width===v&&z._canvas.el.height===
y&&z._canvas.source===z.source)V();else{var S=document.createElement("canvas");S.width=v;S.height=y;var T=S.getContext("2d");z._image=z._image||new Image;var fa=z._image;fa.onload=function(){T.drawImage(fa,0,0);z._canvas={el:S,source:z.source};V()};fa.setAttribute("src",z.source)}})).then(function(){if(z._hasZ){var V=t(function(T,fa){return A[fa][T]});V=V.toDataURL("image/png")}else if(z._hasSource)if(B)V=z.source;else{var S=z._canvas.el.getContext("2d").getImageData(0,0,v,y).data;V=t(function(T,
fa){T=4*(fa*v+T);return[S[T],S[T+1],S[T+2],S[T+3]]});V=V.toDataURL("image/png")}ba.attr({"xlink:href":V,height:Z,width:Q,x:M,y:O})});h._promises.push(q)}})}},{"../../constants/xmlns_namespaces":780,"../../lib":803,"./constants":1139,"@plotly/d3":58}],1146:[function(b,N,G){var p=b("@plotly/d3");N.exports=function(n){p.select(n).selectAll(".im image").style("opacity",function(k){return k[0].trace.opacity})}},{"@plotly/d3":58}],1147:[function(b,N,G){G=b("../../lib/extend").extendFlat;var p=b("../../lib/extend").extendDeep,
n=b("../../plot_api/edit_types").overrideAll,k=b("../../plots/font_attributes"),m=b("../../components/color/attributes"),a=b("../../plots/domain").attributes,g=b("../../plots/cartesian/layout_attributes"),h=b("../../plot_api/plot_template").templatedArray,r=b("../../constants/delta.js");b=b("../../plots/cartesian/axis_format_attributes").descriptionOnlyNumbers;var l=k({editType:"plot",colorEditType:"plot"}),c={color:{valType:"color",editType:"plot"},line:{color:{valType:"color",dflt:m.defaultLine,
editType:"plot"},width:{valType:"number",min:0,dflt:0,editType:"plot"},editType:"calc"},thickness:{valType:"number",min:0,max:1,dflt:1,editType:"plot"},editType:"calc"},d={valType:"info_array",items:[{valType:"number",editType:"plot"},{valType:"number",editType:"plot"}],editType:"plot"};h=h("step",p({},c,{range:d}));N.exports={mode:{valType:"flaglist",editType:"calc",flags:["number","delta","gauge"],dflt:"number"},value:{valType:"number",editType:"calc",anim:!0},align:{valType:"enumerated",values:["left",
"center","right"],editType:"plot"},domain:a({name:"indicator",trace:!0,editType:"calc"}),title:{text:{valType:"string",editType:"plot"},align:{valType:"enumerated",values:["left","center","right"],editType:"plot"},font:G({},l,{}),editType:"plot"},number:{valueformat:{valType:"string",dflt:"",editType:"plot",description:b("value")},font:G({},l,{}),prefix:{valType:"string",dflt:"",editType:"plot"},suffix:{valType:"string",dflt:"",editType:"plot"},editType:"plot"},delta:{reference:{valType:"number",
editType:"calc"},position:{valType:"enumerated",values:["top","bottom","left","right"],dflt:"bottom",editType:"plot"},relative:{valType:"boolean",editType:"plot",dflt:!1},valueformat:{valType:"string",editType:"plot",description:b("value")},increasing:{symbol:{valType:"string",dflt:r.INCREASING.SYMBOL,editType:"plot"},color:{valType:"color",dflt:r.INCREASING.COLOR,editType:"plot"},editType:"plot"},decreasing:{symbol:{valType:"string",dflt:r.DECREASING.SYMBOL,editType:"plot"},color:{valType:"color",
dflt:r.DECREASING.COLOR,editType:"plot"},editType:"plot"},font:G({},l,{}),editType:"calc"},gauge:{shape:{valType:"enumerated",editType:"plot",dflt:"angular",values:["angular","bullet"]},bar:p({},c,{color:{dflt:"green"}}),bgcolor:{valType:"color",editType:"plot"},bordercolor:{valType:"color",dflt:m.defaultLine,editType:"plot"},borderwidth:{valType:"number",min:0,dflt:1,editType:"plot"},axis:n({range:d,visible:G({},g.visible,{dflt:!0}),tickmode:g.tickmode,nticks:g.nticks,tick0:g.tick0,dtick:g.dtick,
tickvals:g.tickvals,ticktext:g.ticktext,ticks:G({},g.ticks,{dflt:"outside"}),ticklen:g.ticklen,tickwidth:g.tickwidth,tickcolor:g.tickcolor,showticklabels:g.showticklabels,tickfont:k({}),tickangle:g.tickangle,tickformat:g.tickformat,tickformatstops:g.tickformatstops,tickprefix:g.tickprefix,showtickprefix:g.showtickprefix,ticksuffix:g.ticksuffix,showticksuffix:g.showticksuffix,separatethousands:g.separatethousands,exponentformat:g.exponentformat,minexponent:g.minexponent,showexponent:g.showexponent,
editType:"plot"},"plot"),steps:h,threshold:{line:{color:G({},c.line.color,{}),width:G({},c.line.width,{dflt:1}),editType:"plot"},thickness:G({},c.thickness,{dflt:.85}),value:{valType:"number",editType:"calc",dflt:!1},editType:"plot"},editType:"plot"}}},{"../../components/color/attributes":665,"../../constants/delta.js":773,"../../lib/extend":793,"../../plot_api/edit_types":836,"../../plot_api/plot_template":843,"../../plots/cartesian/axis_format_attributes":857,"../../plots/cartesian/layout_attributes":869,
"../../plots/domain":882,"../../plots/font_attributes":883}],1148:[function(b,N,G){var p=b("../../plots/plots");G.name="indicator";G.plot=function(n,k,m,a){p.plotBasePlot(G.name,n,k,m,a)};G.clean=function(n,k,m,a){p.cleanBasePlot(G.name,n,k,m,a)}},{"../../plots/plots":917}],1149:[function(b,N,G){N.exports={calc:function(p,n){p=[];var k=n.value;"number"!==typeof n._lastValue&&(n._lastValue=n.value);var m=n._lastValue,a=m;n._hasDelta&&"number"===typeof n.delta.reference&&(a=n.delta.reference);p[0]=
{y:k,lastY:m,delta:k-a,relativeDelta:(k-a)/a};return p}}},{}],1150:[function(b,N,G){N.exports={defaultNumberFontSize:80,bulletNumberDomainSize:.25,bulletPadding:.025,innerRadius:.75,valueThickness:.5,titlePadding:5,horizontalPadding:10}},{}],1151:[function(b,N,G){function p(d,e){function f(q,t){return n.coerce(d,e,k.gauge.steps,q,t)}f("color");f("line.color");f("line.width");f("range");f("thickness")}var n=b("../../lib"),k=b("./attributes"),m=b("../../plots/domain").defaults,a=b("../../plot_api/plot_template"),
g=b("../../plots/array_container_defaults"),h=b("./constants.js"),r=b("../../plots/cartesian/tick_value_defaults"),l=b("../../plots/cartesian/tick_mark_defaults"),c=b("../../plots/cartesian/tick_label_defaults");N.exports={supplyDefaults:function(d,e,f,q){function t(y,F){return n.coerce(d,e,k,y,F)}function w(y,F){return n.coerce(A,D,k.gauge,y,F)}function x(y,F){return n.coerce(C,v,k.gauge.axis,y,F)}m(e,q,t);t("mode");e._hasNumber=-1!==e.mode.indexOf("number");e._hasDelta=-1!==e.mode.indexOf("delta");
e._hasGauge=-1!==e.mode.indexOf("gauge");f=t("value");e._range=[0,"number"===typeof f?1.5*f:1];f=Array(2);if(e._hasNumber){t("number.valueformat");t("number.font.color",q.font.color);t("number.font.family",q.font.family);t("number.font.size");void 0===e.number.font.size&&(e.number.font.size=h.defaultNumberFontSize,f[0]=!0);t("number.prefix");t("number.suffix");var z=e.number.font.size}if(e._hasDelta){t("delta.font.color",q.font.color);t("delta.font.family",q.font.family);t("delta.font.size");void 0===
e.delta.font.size&&(e.delta.font.size=(e._hasNumber?.5:1)*(z||h.defaultNumberFontSize),f[1]=!0);t("delta.reference",e.value);t("delta.relative");t("delta.valueformat",e.delta.relative?"2%":"");t("delta.increasing.symbol");t("delta.increasing.color");t("delta.decreasing.symbol");t("delta.decreasing.color");t("delta.position");var B=e.delta.font.size}e._scaleNumbers=(!e._hasNumber||f[0])&&(!e._hasDelta||f[1])||!1;t("title.font.color",q.font.color);t("title.font.family",q.font.family);t("title.font.size",
.25*(z||B||h.defaultNumberFontSize));t("title.text");var A;if(e._hasGauge){(A=d.gauge)||(A={});var D=a.newContainer(e,"gauge");w("shape");(e._isBullet="bullet"===e.gauge.shape)||t("title.align","center");(e._isAngular="angular"===e.gauge.shape)||t("align","center");w("bgcolor",q.paper_bgcolor);w("borderwidth");w("bordercolor");w("bar.color");w("bar.line.color");w("bar.line.width");w("bar.thickness",h.valueThickness*("bullet"===e.gauge.shape?.5:1));g(A,D,{name:"steps",handleItemDefaults:p});w("threshold.value");
w("threshold.thickness");w("threshold.line.width");w("threshold.line.color");var C={};A&&(C=A.axis||{});var v=a.newContainer(D,"axis");x("visible");e._range=x("range",e._range);q={outerTicks:!0};r(C,v,x,"linear");c(C,v,x,"linear",q);l(C,v,x,q)}else t("title.align","center"),t("align","center"),e._isAngular=e._isBullet=!1;e._length=null}}},{"../../lib":803,"../../plot_api/plot_template":843,"../../plots/array_container_defaults":849,"../../plots/cartesian/tick_label_defaults":876,"../../plots/cartesian/tick_mark_defaults":877,
"../../plots/cartesian/tick_value_defaults":878,"../../plots/domain":882,"./attributes":1147,"./constants.js":1150}],1152:[function(b,N,G){N.exports={moduleType:"trace",name:"indicator",basePlotModule:b("./base_plot"),categories:["svg","noOpacity","noHover"],animatable:!0,attributes:b("./attributes"),supplyDefaults:b("./defaults").supplyDefaults,calc:b("./calc").calc,plot:b("./plot"),meta:{}}},{"./attributes":1147,"./base_plot":1148,"./calc":1149,"./defaults":1151,"./plot":1153}],1153:[function(b,
N,G){function p(H,O,I,L){function Q(wa){wa.attr("width",function(pa){return Math.max(0,ia.c2p(pa.range[1])-ia.c2p(pa.range[0]))}).attr("x",function(pa){return ia.c2p(pa.range[0])}).attr("y",function(pa){return.5*(1-pa.thickness)*ja}).attr("height",function(pa){return pa.thickness*ja})}var Z=I[0].trace;O=L.gauge;var ba=L.layer,V=L.gaugeBg,S=L.gaugeOutline,T=L.size,fa=Z.domain,W=L.transitionOpts,aa=L.onComplete;O.enter().append("g").classed("bullet",!0);O.attr("transform",t(T.l,T.t));ba.enter().append("g").classed("bulletaxis",
!0).classed("crisp",!0);ba.selectAll("g.xbulletaxistick,path,text").remove();var ja=T.h;L=Z.gauge.bar.thickness*ja;var ma=fa.x[0];fa=fa.x[0]+(fa.x[1]-fa.x[0])*(Z._hasNumber||Z._hasDelta?1-B.bulletNumberDomainSize:1);var ia=g(H,Z.gauge.axis);ia._id="xbulletaxis";ia.domain=[ma,fa];ia.setScale();fa=D.calcTicks(ia);ma=D.makeTransTickFn(ia);var ra=D.getTickSigns(ia)[2];T=T.t+T.h;ia.visible&&(D.drawTicks(H,ia,{vals:"inside"===ia.ticks?D.clipEnds(ia,fa):fa,layer:ba,path:D.makeTickPath(ia,T,ra),transFn:ma}),
D.drawLabels(H,ia,{vals:fa,layer:ba,transFn:ma,labelFns:D.makeLabelFns(ia,T)}));H=[V].concat(Z.gauge.steps);H=O.selectAll("g.bg-bullet").data(H);H.enter().append("g").classed("bg-bullet",!0).append("rect");H.select("rect").call(Q).call(m);H.exit().remove();H=O.selectAll("g.value-bullet").data([Z.gauge.bar]);H.enter().append("g").classed("value-bullet",!0).append("rect");H.select("rect").attr("height",L).attr("y",(ja-L)/2).call(m);W&&0<W.duration?H.select("rect").transition().duration(W.duration).ease(W.easing).each("end",
function(){aa&&aa()}).each("interrupt",function(){aa&&aa()}).attr("width",Math.max(0,ia.c2p(Math.min(Z.gauge.axis.range[1],I[0].y)))):H.select("rect").attr("width","number"===typeof I[0].y?Math.max(0,ia.c2p(Math.min(Z.gauge.axis.range[1],I[0].y))):0);H.exit().remove();I=I.filter(function(){return Z.gauge.threshold.value||0===Z.gauge.threshold.value});I=O.selectAll("g.threshold-bullet").data(I);I.enter().append("g").classed("threshold-bullet",!0).append("line");I.select("line").attr("x1",ia.c2p(Z.gauge.threshold.value)).attr("x2",
ia.c2p(Z.gauge.threshold.value)).attr("y1",(1-Z.gauge.threshold.thickness)/2*ja).attr("y2",(1-(1-Z.gauge.threshold.thickness)/2)*ja).call(F.stroke,Z.gauge.threshold.line.color).style("stroke-width",Z.gauge.threshold.line.width);I.exit().remove();O=O.selectAll("g.gauge-outline").data([S]);O.enter().append("g").classed("gauge-outline",!0).append("rect");O.select("rect").call(Q).call(m);O.exit().remove()}function n(H,O,I,L){function Q(Ha){var Wa=V.gauge.axis.range[0];Ha=(Ha-Wa)/(V.gauge.axis.range[1]-
Wa)*Math.PI-ra;return Ha<-ra?-ra:Ha>ra?ra:Ha}function Z(Ha){return c.svg.arc().innerRadius((fa+T)/2-Ha/2*(T-fa)).outerRadius((fa+T)/2+Ha/2*(T-fa)).startAngle(-ra)}function ba(Ha){Ha.attr("d",function(Wa){return Z(Wa.thickness).startAngle(Q(Wa.range[0])).endAngle(Q(Wa.range[1]))()})}var V=I[0].trace,S=L.size,T=L.radius,fa=L.innerRadius,W=L.gaugeBg;O=L.gaugeOutline;var aa=[S.l+S.w/2,S.t+S.h/2+T/2];S=L.gauge;var ja=L.layer,ma=L.transitionOpts,ia=L.onComplete,ra=Math.PI/2;S.enter().append("g").classed("angular",
!0);S.attr("transform",t(aa[0],aa[1]));ja.enter().append("g").classed("angularaxis",!0).classed("crisp",!0);ja.selectAll("g.xangularaxistick,path,text").remove();var wa=g(H,V.gauge.axis);wa.type="linear";wa.range=V.gauge.axis.range;wa._id="xangularaxis";wa.ticklabeloverflow="allow";wa.setScale();var pa=function(Ha){return(wa.range[0]-Ha.x)/(wa.range[1]-wa.range[0])*Math.PI+Math.PI},la={},ka=D.makeLabelFns(wa,0).labelStandoff;la.xFn=function(Ha){Ha=pa(Ha);return Math.cos(Ha)*ka};la.yFn=function(Ha){var Wa=
pa(Ha);return-Math.sin(Wa)*(ka+Ha.fontSize*(0<Math.sin(Wa)?.2:1))+Math.abs(Math.cos(Wa))*Ha.fontSize*x};la.anchorFn=function(Ha){Ha=pa(Ha);Ha=Math.cos(Ha);return.1>Math.abs(Ha)?"middle":0<Ha?"start":"end"};la.heightFn=function(Ha,Wa,Za){Ha=pa(Ha);return-.5*(1+Math.sin(Ha))*Za};var na=function(Ha){return t(aa[0]+T*Math.cos(Ha),aa[1]-T*Math.sin(Ha))};var oa=function(Ha){return na(pa(Ha))};var sa=function(Ha){Ha=pa(Ha);return na(Ha)+"rotate("+-w(Ha)+")"};L=D.calcTicks(wa);var za=D.getTickSigns(wa)[2];
wa.visible&&(za="inside"===wa.ticks?-1:1,D.drawTicks(H,wa,{vals:L,layer:ja,path:"M"+(wa.linewidth||1)/2*za+",0h"+za*wa.ticklen,transFn:sa}),D.drawLabels(H,wa,{vals:L,layer:ja,transFn:oa,labelFns:la}));H=[W].concat(V.gauge.steps);H=S.selectAll("g.bg-arc").data(H);H.enter().append("g").classed("bg-arc",!0).append("path");H.select("path").call(ba).call(m);H.exit().remove();H=Z(V.gauge.bar.thickness);W=S.selectAll("g.value-arc").data([V.gauge.bar]);W.enter().append("g").classed("value-arc",!0).append("path");
ja=W.select("path");ma&&0<ma.duration?(ja.transition().duration(ma.duration).ease(ma.easing).each("end",function(){ia&&ia()}).each("interrupt",function(){ia&&ia()}).attrTween("d",a(H,Q(I[0].lastY),Q(I[0].y))),V._lastValue=I[0].y):ja.attr("d","number"===typeof I[0].y?H.endAngle(Q(I[0].y)):"M0,0Z");ja.call(m);W.exit().remove();H=[];((I=V.gauge.threshold.value)||0===I)&&H.push({range:[I,I],color:V.gauge.threshold.color,line:{color:V.gauge.threshold.line.color,width:V.gauge.threshold.line.width},thickness:V.gauge.threshold.thickness});
I=S.selectAll("g.threshold-arc").data(H);I.enter().append("g").classed("threshold-arc",!0).append("path");I.select("path").call(ba).call(m);I.exit().remove();O=S.selectAll("g.gauge-outline").data([O]);O.enter().append("g").classed("gauge-outline",!0).append("path");O.select("path").call(ba).call(m);O.exit().remove()}function k(H,O,I,L){function Q(za,Ha,Wa,Za){if(!za.match("s")||0<=Wa===0<=Za||Ha(Wa).slice(-1).match(M)||Ha(Za).slice(-1).match(M))return Ha;za=za.slice().replace("s","f").replace(/\d+/,
function(sb){return parseInt(sb)-1});var bb=g(H,{tickformat:za});return function(sb){return 1>Math.abs(sb)?D.tickText(bb,sb).text:Ha(sb)}}function Z(){function za(){var hb="number"===typeof I[0].y?bb+Wa(I[0].y)+Za:"-";sb.text(hb).call(z.font,V.number.font).call(A.convertToTspans,H)}var Ha=g(H,{tickformat:V.number.valueformat},V._range);Ha.setScale();D.prepTicks(Ha);var Wa=function(hb){return D.tickText(Ha,hb).text},Za=V.number.suffix,bb=V.number.prefix,sb=ma.select("text.number");aa&&0<aa.duration?
sb.transition().duration(aa.duration).ease(aa.easing).each("end",function(){za();ja&&ja()}).each("interrupt",function(){za();ja&&ja()}).attrTween("text",function(){var hb=c.select(this),ub=e(I[0].lastY,I[0].y);V._lastValue=I[0].y;var pb=Q(V.number.valueformat,Wa,I[0].lastY,I[0].y);return function(Ab){hb.text(bb+pb(ub(Ab))+Za)}}):za();ia=r(bb+Wa(I[0].y)+Za,V.number.font,W,H);return sb}function ba(){function za(){hb.text(bb(Za(I[0]),Wa)).call(F.fill,sb(I[0])).call(A.convertToTspans,H)}var Ha=g(H,{tickformat:V.delta.valueformat},
V._range);Ha.setScale();D.prepTicks(Ha);var Wa=function(ub){return D.tickText(Ha,ub).text},Za=function(ub){return V.delta.relative?ub.relativeDelta:ub.delta},bb=function(ub,pb){return 0===ub||"number"!==typeof ub||isNaN(ub)?"-":(0<ub?V.delta.increasing.symbol:V.delta.decreasing.symbol)+pb(ub)},sb=function(ub){return 0<=ub.delta?V.delta.increasing.color:V.delta.decreasing.color};void 0===V._deltaLastValue&&(V._deltaLastValue=Za(I[0]));var hb=ma.select("text.delta");hb.call(z.font,V.delta.font).call(F.fill,
sb({delta:V._deltaLastValue}));aa&&0<aa.duration?hb.transition().duration(aa.duration).ease(aa.easing).tween("text",function(){var ub=c.select(this),pb=Za(I[0]),Ab=V._deltaLastValue,tb=Q(V.delta.valueformat,Wa,Ab,pb),vb=e(Ab,pb);V._deltaLastValue=pb;return function(qb){ub.text(bb(vb(qb),tb));ub.call(F.fill,sb({delta:vb(qb)}))}}).each("end",function(){za();ja&&ja()}).each("interrupt",function(){za();ja&&ja()}):za();ra=r(bb(Za(I[0]),Wa),V.delta.font,W,H);return hb}var V=I[0].trace,S=L.numbersX,T=L.numbersY,
fa=V.align||"center",W=J[fa],aa=L.transitionOpts,ja=L.onComplete,ma=f.ensureSingle(O,"g","numbers"),ia,ra;O=[];V._hasNumber&&O.push("number");V._hasDelta&&(O.push("delta"),"left"===V.delta.position&&O.reverse());O=ma.selectAll("text").data(O);O.enter().append("text");O.attr("text-anchor",function(){return W}).attr("class",function(za){return za}).attr("x",null).attr("y",null).attr("dx",null).attr("dy",null);O.exit().remove();var wa=V.mode+V.align;if(V._hasDelta){var pa=ba();wa+=V.delta.position+V.delta.font.size+
V.delta.font.family+V.delta.valueformat;wa+=V.delta.increasing.symbol+V.delta.decreasing.symbol;var la=ra}V._hasNumber&&(Z(),wa+=V.number.font.size+V.number.font.family+V.number.valueformat+V.number.suffix+V.number.prefix,la=ia);if(V._hasDelta&&V._hasNumber){O=[(ia.left+ia.right)/2,(ia.top+ia.bottom)/2];var ka=[(ra.left+ra.right)/2,(ra.top+ra.bottom)/2],na=.75*V.delta.font.size;if("left"===V.delta.position){var oa=l(V,"deltaPos",0,-1*(ia.width*K[V.align]+ra.width*(1-K[V.align])+na),wa,Math.min);var sa=
O[1]-ka[1];la={width:ia.width+ra.width+na,height:Math.max(ia.height,ra.height),left:ra.left+oa,right:ia.right,top:Math.min(ia.top,ra.top+sa),bottom:Math.max(ia.bottom,ra.bottom+sa)}}"right"===V.delta.position&&(oa=l(V,"deltaPos",0,ia.width*(1-K[V.align])+ra.width*K[V.align]+na,wa,Math.max),sa=O[1]-ka[1],la={width:ia.width+ra.width+na,height:Math.max(ia.height,ra.height),left:ia.left,right:ra.right+oa,top:Math.min(ia.top,ra.top+sa),bottom:Math.max(ia.bottom,ra.bottom+sa)});"bottom"===V.delta.position&&
(oa=null,sa=ra.height,la={width:Math.max(ia.width,ra.width),height:ia.height+ra.height,left:Math.min(ia.left,ra.left),right:Math.max(ia.right,ra.right),top:ia.bottom-ia.height,bottom:ia.bottom+ra.height});"top"===V.delta.position&&(oa=null,sa=ia.top,la={width:Math.max(ia.width,ra.width),height:ia.height+ra.height,left:Math.min(ia.left,ra.left),right:Math.max(ia.right,ra.right),top:ia.bottom-ia.height-ra.height,bottom:ia.bottom});pa.attr({dx:oa,dy:sa})}(V._hasNumber||V._hasDelta)&&ma.attr("transform",
function(){var za=L.numbersScaler(la);wa+=za[2];za=l(V,"numbersScale",1,za[0],wa,Math.min);V._scaleNumbers||(za=1);var Ha=V._isAngular?T-za*la.bottom:T-za*(la.top+la.bottom)/2;V._numbersTop=za*la.top+Ha;var Wa=la[fa];"center"===fa&&(Wa=(la.left+la.right)/2);Wa=S-za*Wa;Wa=l(V,"numbersTranslate",0,Wa,wa,Math.max);return t(Wa,Ha)+q(za)})}function m(H){H.each(function(O){F.stroke(c.select(this),O.line.color)}).each(function(O){F.fill(c.select(this),O.color)}).style("stroke-width",function(O){return O.line.width})}
function a(H,O,I){return function(){var L=d(O,I);return function(Q){return H.endAngle(L(Q))()}}}function g(H,O,I){function L(ba,V){return f.coerce(Q,Z,y,ba,V)}H=H._fullLayout;var Q=f.extendFlat({type:"linear",ticks:"outside",range:I,showline:!0},O),Z={type:"linear",_id:"x"+O._id};O={letter:"x",font:H.font,noHover:!0,noTickson:!0};C(Q,Z,L,O,H);v(Q,Z,L,O);return Z}function h(H,O,I){return[Math.min(O/H.width,I/H.height),H,O+"x"+I]}function r(H,O,I,L){var Q=document.createElementNS("http://www.w3.org/2000/svg",
"text");Q=c.select(Q);Q.text(H).attr("x",0).attr("y",0).attr("text-anchor",I).attr("data-unformatted",H).call(A.convertToTspans,L).call(z.font,O);return z.bBox(Q.node())}function l(H,O,I,L,Q,Z){O="_cache"+O;H[O]&&H[O].key===Q||(H[O]={key:Q,value:I});I=f.aggNums(Z,null,[H[O].value,L],2);return H[O].value=I}var c=b("@plotly/d3"),d=b("d3-interpolate").interpolate,e=b("d3-interpolate").interpolateNumber,f=b("../../lib"),q=f.strScale,t=f.strTranslate,w=f.rad2deg,x=b("../../constants/alignment").MID_SHIFT,
z=b("../../components/drawing"),B=b("./constants"),A=b("../../lib/svg_text_utils"),D=b("../../plots/cartesian/axes"),C=b("../../plots/cartesian/axis_defaults"),v=b("../../plots/cartesian/position_defaults"),y=b("../../plots/cartesian/layout_attributes"),F=b("../../components/color"),J={left:"start",center:"middle",right:"end"},K={left:0,center:.5,right:1},M=/[yzafpnmkMGTPEZY]/;N.exports=function(H,O,I,L){var Q=H._fullLayout,Z;I&&0<I.duration&&L&&(Z=L());f.makeTraceGroups(Q._indicatorlayer,O,"trace").each(function(ba){var V=
ba[0].trace,S=c.select(this),T=V._hasGauge,fa=V._isAngular,W=V._isBullet,aa=V.domain,ja={w:Q._size.w*(aa.x[1]-aa.x[0]),h:Q._size.h*(aa.y[1]-aa.y[0]),l:Q._size.l+Q._size.w*aa.x[0],r:Q._size.r+Q._size.w*(1-aa.x[1]),t:Q._size.t+Q._size.h*(1-aa.y[1]),b:Q._size.b+Q._size.h*aa.y[0]},ma=ja.l+ja.w/2,ia=ja.t+ja.h/2,ra=Math.min(ja.w/2,ja.h),wa=B.innerRadius*ra;aa=V.align||"center";var pa=ia;if(T){if(fa){var la=ma;pa=ia+ra/2;var ka=function(Wa){var Za=.9*wa;return[Za/Math.sqrt(Wa.width/2*(Wa.width/2)+Wa.height*
Wa.height),Wa,Za]}}if(W){var na=B.bulletPadding;la=1-B.bulletNumberDomainSize+na;la=ja.l+(la+(1-la)*K[aa])*ja.w;ka=function(Wa){return h(Wa,(B.bulletNumberDomainSize-na)*ja.w,ja.h)}}}else la=ja.l+K[aa]*ja.w,ka=function(Wa){return h(Wa,ja.w,ja.h)};k(H,S,ba,{numbersX:la,numbersY:pa,numbersScaler:ka,transitionOpts:I,onComplete:Z});if(T){var oa={range:V.gauge.axis.range,color:V.gauge.bgcolor,line:{color:V.gauge.bordercolor,width:0},thickness:1};var sa={range:V.gauge.axis.range,color:"rgba(0, 0, 0, 0)",
line:{color:V.gauge.bordercolor,width:V.gauge.borderwidth},thickness:1}}la=S.selectAll("g.angular").data(fa?ba:[]);la.exit().remove();var za=S.selectAll("g.angularaxis").data(fa?ba:[]);za.exit().remove();fa&&n(H,S,ba,{radius:ra,innerRadius:wa,gauge:la,layer:za,size:ja,gaugeBg:oa,gaugeOutline:sa,transitionOpts:I,onComplete:Z});la=S.selectAll("g.bullet").data(W?ba:[]);la.exit().remove();ka=S.selectAll("g.bulletaxis").data(W?ba:[]);ka.exit().remove();W&&p(H,S,ba,{gauge:la,layer:ka,size:ja,gaugeBg:oa,
gaugeOutline:sa,transitionOpts:I,onComplete:Z});var Ha=S.selectAll("text.title").data(ba);Ha.exit().remove();Ha.enter().append("text").classed("title",!0);Ha.attr("text-anchor",function(){return W?J.right:J[V.title.align]}).text(V.title.text).call(z.font,V.title.font).call(A.convertToTspans,H);Ha.attr("transform",function(){var Wa=ja.l+ja.w*K[V.title.align],Za,bb=B.titlePadding,sb=z.bBox(Ha.node());T?(fa&&(Za=V.gauge.axis.visible?z.bBox(za.node()).top-bb-sb.bottom:ja.t+ja.h/2-ra/2-sb.bottom-bb),W&&
(Za=pa-(sb.top+sb.bottom)/2,Wa=ja.l-B.bulletPadding*ja.w)):Za=V._numbersTop-bb-sb.bottom;return t(Wa,Za)})})}},{"../../components/color":666,"../../components/drawing":688,"../../constants/alignment":771,"../../lib":803,"../../lib/svg_text_utils":829,"../../plots/cartesian/axes":854,"../../plots/cartesian/axis_defaults":856,"../../plots/cartesian/layout_attributes":869,"../../plots/cartesian/position_defaults":872,"./constants":1150,"@plotly/d3":58,"d3-interpolate":171}],1154:[function(b,N,G){function p(r){return{show:{valType:"boolean",
dflt:!1},locations:{valType:"data_array",dflt:[]},fill:{valType:"number",min:0,max:1,dflt:1}}}function n(r){return{show:{valType:"boolean",dflt:!0},fill:{valType:"number",min:0,max:1,dflt:1}}}G=b("../../components/colorscale/attributes");var k=b("../../plots/cartesian/axis_format_attributes").axisHoverFormat,m=b("../../plots/template_attributes").hovertemplateAttrs,a=b("../mesh3d/attributes"),g=b("../../plots/attributes"),h=b("../../lib/extend").extendFlat;b=b("../../plot_api/edit_types").overrideAll;
N=N.exports=b(h({x:{valType:"data_array"},y:{valType:"data_array"},z:{valType:"data_array"},value:{valType:"data_array"},isomin:{valType:"number"},isomax:{valType:"number"},surface:{show:{valType:"boolean",dflt:!0},count:{valType:"integer",dflt:2,min:1},fill:{valType:"number",min:0,max:1,dflt:1},pattern:{valType:"flaglist",flags:["A","B","C","D","E"],extras:["all","odd","even"],dflt:"all"}},spaceframe:{show:{valType:"boolean",dflt:!1},fill:{valType:"number",min:0,max:1,dflt:.15}},slices:{x:p("x"),
y:p("y"),z:p("z")},caps:{x:n("x"),y:n("y"),z:n("z")},text:{valType:"string",dflt:"",arrayOk:!0},hovertext:{valType:"string",dflt:"",arrayOk:!0},hovertemplate:m(),xhoverformat:k("x"),yhoverformat:k("y"),zhoverformat:k("z"),valuehoverformat:k("value",1),showlegend:h({},g.showlegend,{dflt:!1})},G("",{colorAttr:"`value`",showScaleDflt:!0,editTypeOverride:"calc"}),{opacity:a.opacity,lightposition:a.lightposition,lighting:a.lighting,flatshading:a.flatshading,contour:a.contour,hoverinfo:h({},g.hoverinfo)}),
"calc","nested");N.flatshading.dflt=!0;N.lighting.facenormalsepsilon.dflt=0;N.x.editType=N.y.editType=N.z.editType=N.value.editType="calc+clearAxisTypes";N.transforms=void 0},{"../../components/colorscale/attributes":673,"../../lib/extend":793,"../../plot_api/edit_types":836,"../../plots/attributes":850,"../../plots/cartesian/axis_format_attributes":857,"../../plots/template_attributes":926,"../mesh3d/attributes":1159}],1155:[function(b,N,G){var p=b("../../components/colorscale/calc"),n=b("../streamtube/calc").processGrid,
k=b("../streamtube/calc").filter;N.exports=function(m,a){a._len=Math.min(a.x.length,a.y.length,a.z.length,a.value.length);a._x=k(a.x,a._len);a._y=k(a.y,a._len);a._z=k(a.z,a._len);a._value=k(a.value,a._len);var g=n(a);a._gridFill=g.fill;a._Xs=g.Xs;a._Ys=g.Ys;a._Zs=g.Zs;a._len=g.len;g=Infinity;for(var h=-Infinity,r=0;r<a._len;r++){var l=a._value[r];g=Math.min(g,l);h=Math.max(h,l)}a._minValues=g;a._maxValues=h;a._vMin=void 0===a.isomin||null===a.isomin?g:a.isomin;a._vMax=void 0===a.isomax||null===a.isomin?
h:a.isomax;p(m,a,{vals:[a._vMin,a._vMax],containerStr:"",cLetter:"c"})}},{"../../components/colorscale/calc":674,"../streamtube/calc":1326}],1156:[function(b,N,G){function p(c,d,e){this.scene=c;this.uid=e;this.mesh=d;this.name="";this.data=null;this.showContour=!1}function n(c){function d(){bb=[];sb=[];hb=[];ub=[];ia=ma=0}function e(Ab,tb,vb,qb){bb.push(Ab);sb.push(tb);hb.push(vb);ub.push(qb);ma++;return ma-1}function f(Ab,tb,vb){for(var qb=[],zb=0;zb<Ab.length;zb++)qb[zb]=Ab[zb]*(1-vb)+vb*tb[zb];
return qb}function q(Ab,tb){return"all"===Ab||null===Ab?!0:-1<Ab.indexOf(tb)}function t(Ab,tb,vb){ia=ma;var qb=[tb];var zb=[vb];if(1<=pb)qb=[tb],zb=[vb];else if(0<pb){var La=vb;qb=tb[0];zb=tb[1];tb=tb[2];for(var Ka=[],ya=0;ya<qb.length;ya++)Ka[ya]=(qb[ya]+zb[ya]+tb[ya])/3;var Aa=Math.sqrt(1-pb);ya=f(Ka,qb,Aa);vb=f(Ka,zb,Aa);var Ja=f(Ka,tb,Aa);Ka=La[0];Aa=La[1];La=La[2];tb=[[qb,zb,vb],[vb,ya,qb],[zb,tb,Ja],[Ja,vb,zb],[tb,qb,ya],[ya,Ja,tb]];zb=[[Ka,Aa,-1],[-1,-1,Ka],[Aa,La,-1],[-1,-1,Aa],[La,Ka,-1],
[-1,-1,La]];qb=tb}for(La=0;La<qb.length;La++){tb=qb[La];vb=zb[La];ya=[];for(Ka=0;3>Ka;Ka++){var Ta=tb[Ka][0],$a=tb[Ka][1];Ja=tb[Ka][2];Aa=tb[Ka][3];if(-1<vb[Ka])var ab=vb[Ka];else a:{ab=ub.length;for(var Db=ia;Db<ab;Db++)if(Ta===bb[Db]&&$a===sb[Db]&&Ja===hb[Db]){ab=Db;break a}ab=-1}-1<ab?ya[Ka]=ab:(ab=ya,Db=Ka,Aa=null===Ab?Aa:Ab,ab[Db]=e(Ta,$a,Ja,Aa))}tb=ya[1];vb=ya[2];c._meshI.push(ya[0]);c._meshJ.push(tb);c._meshK.push(vb);ja++}}function w(Ab,tb,vb){var qb=function(zb,La,Ka){t(Ab,[tb[zb],tb[La],
tb[Ka]],[vb[zb],vb[La],vb[Ka]])};qb(0,1,2);qb(2,3,0)}function x(Ab,tb,vb){var qb=function(zb,La,Ka){t(Ab,[tb[zb],tb[La],tb[Ka]],[vb[zb],vb[La],vb[Ka]])};qb(0,1,2);qb(3,0,1);qb(2,3,0);qb(1,2,3)}function z(Ab,tb,vb,qb){var zb=Ab[3];zb<vb&&(zb=vb);zb>qb&&(zb=qb);vb=(Ab[3]-zb)/(Ab[3]-tb[3]+1E-9);qb=[];for(zb=0;4>zb;zb++)qb[zb]=(1-vb)*Ab[zb]+vb*tb[zb];return qb}function B(Ab,tb,vb){return Ab>=tb&&Ab<=vb}function A(Ab){var tb=.001*(Za-Wa);return Ab>=Wa-tb&&Ab<=Za+tb}function D(Ab){for(var tb=[],vb=0;4>
vb;vb++){var qb=Ab[vb];tb.push([c._x[qb],c._y[qb],c._z[qb],c._value[qb]])}return tb}function C(Ab,tb,vb,qb,zb,La){La||(La=1);vb=[-1,-1,-1];var Ka=!1,ya=[B(tb[0][3],qb,zb),B(tb[1][3],qb,zb),B(tb[2][3],qb,zb)];if(!ya[0]&&!ya[1]&&!ya[2])return!1;var Aa=function(Ta,$a,ab){return A($a[0][3])&&A($a[1][3])&&A($a[2][3])?(t(Ta,$a,ab),!0):3>La?C(Ta,$a,ab,Wa,Za,++La):!1};if(ya[0]&&ya[1]&&ya[2])return Aa(Ab,tb,vb)||Ka;var Ja=!1;[[0,1,2],[2,0,1],[1,2,0]].forEach(function(Ta){if(ya[Ta[0]]&&ya[Ta[1]]&&!ya[Ta[2]]){var $a=
tb[Ta[0]],ab=tb[Ta[1]],Db=tb[Ta[2]],Nb=z(Db,$a,qb,zb);Db=z(Db,ab,qb,zb);Ka=Aa(Ab,[Db,Nb,$a],[-1,-1,vb[Ta[0]]])||Ka;Ka=Aa(Ab,[$a,ab,Db],[vb[Ta[0]],vb[Ta[1]],-1])||Ka;Ja=!0}});if(Ja)return Ka;[[0,1,2],[1,2,0],[2,0,1]].forEach(function(Ta){if(ya[Ta[0]]&&!ya[Ta[1]]&&!ya[Ta[2]]){var $a=tb[Ta[0]],ab=tb[Ta[2]],Db=z(tb[Ta[1]],$a,qb,zb);ab=z(ab,$a,qb,zb);Ka=Aa(Ab,[ab,Db,$a],[-1,-1,vb[Ta[0]]])||Ka;Ja=!0}});return Ka}function v(Ab,tb,vb,qb){var zb=!1,La=D(tb),Ka=[B(La[0][3],vb,qb),B(La[1][3],vb,qb),B(La[2][3],
vb,qb),B(La[3][3],vb,qb)];if(!(Ka[0]||Ka[1]||Ka[2]||Ka[3]))return zb;if(Ka[0]&&Ka[1]&&Ka[2]&&Ka[3])return aa&&(zb=x(Ab,La,tb)||zb),zb;var ya=!1;[[0,1,2,3],[3,0,1,2],[2,3,0,1],[1,2,3,0]].forEach(function(Aa){if(Ka[Aa[0]]&&Ka[Aa[1]]&&Ka[Aa[2]]&&!Ka[Aa[3]]){var Ja=La[Aa[0]],Ta=La[Aa[1]],$a=La[Aa[2]],ab=La[Aa[3]];aa?zb=t(Ab,[Ja,Ta,$a],[tb[Aa[0]],tb[Aa[1]],tb[Aa[2]]])||zb:(Aa=z(ab,Ja,vb,qb),Ta=z(ab,Ta,vb,qb),$a=z(ab,$a,vb,qb),zb=t(null,[Aa,Ta,$a],[-1,-1,-1])||zb);ya=!0}});if(ya)return zb;[[0,1,2,3],[1,
2,3,0],[2,3,0,1],[3,0,1,2],[0,2,3,1],[1,3,2,0]].forEach(function(Aa){if(Ka[Aa[0]]&&Ka[Aa[1]]&&!Ka[Aa[2]]&&!Ka[Aa[3]]){var Ja=La[Aa[0]],Ta=La[Aa[1]],$a=La[Aa[2]],ab=La[Aa[3]],Db=z($a,Ja,vb,qb);$a=z($a,Ta,vb,qb);var Nb=z(ab,Ta,vb,qb);ab=z(ab,Ja,vb,qb);aa?(zb=t(Ab,[Ja,ab,Db],[tb[Aa[0]],-1,-1])||zb,zb=t(Ab,[Ta,$a,Nb],[tb[Aa[1]],-1,-1])||zb):zb=w(null,[Db,$a,Nb,ab],[-1,-1,-1,-1])||zb;ya=!0}});if(ya)return zb;[[0,1,2,3],[1,2,3,0],[2,3,0,1],[3,0,1,2]].forEach(function(Aa){if(Ka[Aa[0]]&&!Ka[Aa[1]]&&!Ka[Aa[2]]&&
!Ka[Aa[3]]){var Ja=La[Aa[0]],Ta=La[Aa[2]],$a=La[Aa[3]],ab=z(La[Aa[1]],Ja,vb,qb);Ta=z(Ta,Ja,vb,qb);$a=z($a,Ja,vb,qb);aa?(zb=t(Ab,[Ja,ab,Ta],[tb[Aa[0]],-1,-1])||zb,zb=t(Ab,[Ja,Ta,$a],[tb[Aa[0]],-1,-1])||zb,zb=t(Ab,[Ja,$a,ab],[tb[Aa[0]],-1,-1])||zb):zb=t(null,[ab,Ta,$a],[-1,-1,-1])||zb;ya=!0}});return zb}function y(Ab,tb,vb,qb,zb,La,Ka,ya,Aa,Ja,Ta){var $a=!1;W&&(q(Ab,"A")&&($a=v(null,[tb,vb,qb,La],Ja,Ta)||$a),q(Ab,"B")&&($a=v(null,[vb,qb,zb,Aa],Ja,Ta)||$a),q(Ab,"C")&&($a=v(null,[vb,La,Ka,Aa],Ja,Ta)||
$a),q(Ab,"D")&&($a=v(null,[qb,La,ya,Aa],Ja,Ta)||$a),q(Ab,"E")&&($a=v(null,[vb,qb,La,Aa],Ja,Ta)||$a));aa&&($a=v(Ab,[vb,qb,La,Aa],Ja,Ta)||$a);return $a}function F(Ab,tb,vb,qb,zb,La,Ka,ya){return[!0===ya[0]?!0:C(Ab,D([tb,vb,qb]),[tb,vb,qb],La,Ka),!0===ya[1]?!0:C(Ab,D([qb,zb,tb]),[qb,zb,tb],La,Ka)]}function J(Ab,tb,vb,qb,zb,La,Ka,ya,Aa){return ya?F(Ab,tb,vb,zb,qb,La,Ka,Aa):F(Ab,vb,zb,qb,tb,La,Ka,Aa)}function K(Ab,tb,vb,qb,zb,La,Ka){var ya=!1,Aa=function(){ya=C(Ab,[$a,ab,Db],[-1,-1,-1],zb,La)||ya;ya=C(Ab,
[Db,Nb,$a],[-1,-1,-1],zb,La)||ya},Ja=Ka[0],Ta=Ka[1];Ka=Ka[2];if(Ja){var $a=f(D([sa(tb,vb-0,qb-0)])[0],D([sa(tb-1,vb-0,qb-0)])[0],Ja);var ab=f(D([sa(tb,vb-0,qb-1)])[0],D([sa(tb-1,vb-0,qb-1)])[0],Ja);var Db=f(D([sa(tb,vb-1,qb-1)])[0],D([sa(tb-1,vb-1,qb-1)])[0],Ja);var Nb=f(D([sa(tb,vb-1,qb-0)])[0],D([sa(tb-1,vb-1,qb-0)])[0],Ja);Aa()}Ta&&($a=f(D([sa(tb-0,vb,qb-0)])[0],D([sa(tb-0,vb-1,qb-0)])[0],Ta),ab=f(D([sa(tb-0,vb,qb-1)])[0],D([sa(tb-0,vb-1,qb-1)])[0],Ta),Db=f(D([sa(tb-1,vb,qb-1)])[0],D([sa(tb-1,
vb-1,qb-1)])[0],Ta),Nb=f(D([sa(tb-1,vb,qb-0)])[0],D([sa(tb-1,vb-1,qb-0)])[0],Ta),Aa());Ka&&($a=f(D([sa(tb-0,vb-0,qb)])[0],D([sa(tb-0,vb-0,qb-1)])[0],Ka),ab=f(D([sa(tb-0,vb-1,qb)])[0],D([sa(tb-0,vb-1,qb-1)])[0],Ka),Db=f(D([sa(tb-1,vb-1,qb)])[0],D([sa(tb-1,vb-1,qb-1)])[0],Ka),Nb=f(D([sa(tb-1,vb-0,qb)])[0],D([sa(tb-1,vb-0,qb-1)])[0],Ka),Aa());return ya}function M(Ab,tb,vb,qb,zb){for(var La=[],Ka=0,ya=0;ya<tb.length;ya++)for(var Aa=tb[ya],Ja=1;Ja<na;Ja++)for(var Ta=1;Ta<ka;Ta++)La.push(J(Ab,sa(Aa,Ta-
1,Ja-1),sa(Aa,Ta-1,Ja),sa(Aa,Ta,Ja-1),sa(Aa,Ta,Ja),vb,qb,(Aa+Ta+Ja)%2,zb&&zb[Ka]?zb[Ka]:[])),Ka++;return La}function H(Ab,tb,vb,qb,zb){for(var La=[],Ka=0,ya=0;ya<tb.length;ya++)for(var Aa=tb[ya],Ja=1;Ja<la;Ja++)for(var Ta=1;Ta<na;Ta++)La.push(J(Ab,sa(Ja-1,Aa,Ta-1),sa(Ja,Aa,Ta-1),sa(Ja-1,Aa,Ta),sa(Ja,Aa,Ta),vb,qb,(Ja+Aa+Ta)%2,zb&&zb[Ka]?zb[Ka]:[])),Ka++;return La}function O(Ab,tb,vb,qb,zb){for(var La=[],Ka=0,ya=0;ya<tb.length;ya++)for(var Aa=tb[ya],Ja=1;Ja<ka;Ja++)for(var Ta=1;Ta<la;Ta++)La.push(J(Ab,
sa(Ta-1,Ja-1,Aa),sa(Ta-1,Ja,Aa),sa(Ta,Ja-1,Aa),sa(Ta,Ja,Aa),vb,qb,(Ta+Ja+Aa)%2,zb&&zb[Ka]?zb[Ka]:[])),Ka++;return La}function I(Ab,tb,vb){for(var qb=1;qb<na;qb++)for(var zb=1;zb<ka;zb++)for(var La=1;La<la;La++){var Ka=Ab,ya=sa(La-1,zb-1,qb-1),Aa=sa(La-1,zb-1,qb),Ja=sa(La-1,zb,qb-1),Ta=sa(La-1,zb,qb),$a=sa(La,zb-1,qb-1),ab=sa(La,zb-1,qb),Db=sa(La,zb,qb-1),Nb=sa(La,zb,qb),ec=tb,ob=vb,Cb=Ka;(La+zb+qb)%2?(W&&"even"===Ka&&(Cb=null),y(Cb,ya,Aa,Ja,Ta,$a,ab,Db,Nb,ec,ob)):(W&&"odd"===Ka&&(Cb=null),y(Cb,Nb,
Db,ab,$a,Ta,Ja,Aa,ya,ec,ob))}}function L(Ab,tb,vb){aa=!0;I(Ab,tb,vb);aa=!1}function Q(Ab,tb,vb){W=!0;I(Ab,tb,vb);W=!1}function Z(Ab,tb){for(var vb=[];Ab<tb;Ab++)vb.push(Ab);return vb}function ba(){for(var Ab=0;Ab<la;Ab++)for(var tb=0;tb<ka;tb++)for(var vb=0;vb<na;vb++){var qb=sa(Ab,tb,vb);e(c._x[qb],c._y[qb],c._z[qb],c._value[qb])}}c._meshI=[];c._meshJ=[];c._meshK=[];var V=c.surface.show,S=c.spaceframe.show,T=c.surface.fill,fa=c.spaceframe.fill,W=!1,aa=!1,ja=0,ma,ia,ra=c._Xs,wa=c._Ys,pa=c._Zs,la=
ra.length,ka=wa.length,na=pa.length,oa=l.indexOf(c._gridFill.replace(/-/g,"").replace(/\+/g,"")),sa=function(Ab,tb,vb){switch(oa){case 5:return vb+na*tb+na*ka*Ab;case 4:return vb+na*Ab+na*la*tb;case 3:return tb+ka*vb+ka*na*Ab;case 2:return tb+ka*Ab+ka*la*vb;case 1:return Ab+la*vb+la*na*tb;default:return Ab+la*tb+la*ka*vb}},za=c._minValues,Ha=c._maxValues,Wa=c._vMin,Za=c._vMax,bb,sb,hb,ub,pb;(function(){d();ba();S&&fa&&(pb=fa,L(null,Wa,Za));if(V&&T){pb=T;for(var Ab=c.surface.pattern,tb=c.surface.count,
vb=0;vb<tb;vb++){var qb=1===tb?.5:vb/(tb-1);qb=(1-qb)*Wa+qb*Za;qb=Math.abs(qb-za)>Math.abs(qb-Ha)?[za,qb]:[qb,Ha];Q(Ab,qb[0],qb[1])}}var zb=[[Math.min(Wa,Ha),Math.max(Wa,Ha)],[Math.min(za,Za),Math.max(za,Za)]];["x","y","z"].forEach(function(La){for(var Ka=[],ya=0;ya<zb.length;ya++){var Aa=0,Ja=zb[ya][0],Ta=zb[ya][1],$a=c.slices[La];if($a.show&&$a.fill){pb=$a.fill;var ab=[],Db=[],Nb=[];if($a.locations.length)for(var ec=0;ec<$a.locations.length;ec++){var ob=r($a.locations[ec],"x"===La?ra:"y"===La?wa:
pa);0===ob.distRatio?ab.push(ob.id):0<ob.id&&(Db.push(ob.id),"x"===La?Nb.push([ob.distRatio,0,0]):"y"===La?Nb.push([0,ob.distRatio,0]):Nb.push([0,0,ob.distRatio]))}else ab="x"===La?Z(1,la-1):"y"===La?Z(1,ka-1):Z(1,na-1);if(0<Db.length){if("x"===La){$a=Aa;ec=Ja;ob=Ta;for(var Cb=Ka[Aa],Qb=[],yc=0,Jc=0;Jc<Db.length;Jc++)for(var Ia=Db[Jc],Na=1;Na<na;Na++)for(var ib=1;ib<ka;ib++)Qb.push(K(null,Ia,ib,Na,ec,ob,Nb[Jc],Cb&&Cb[yc]?Cb[yc]:[])),yc++;Ka[$a]=Qb}else if("y"===La){$a=Aa;ec=Ja;ob=Ta;Cb=Ka[Aa];Qb=
[];for(Jc=yc=0;Jc<Db.length;Jc++)for(Ia=Db[Jc],Na=1;Na<la;Na++)for(ib=1;ib<na;ib++)Qb.push(K(null,Na,Ia,ib,ec,ob,Nb[Jc],Cb&&Cb[yc]?Cb[yc]:[])),yc++;Ka[$a]=Qb}else{$a=Aa;ec=Ja;ob=Ta;Cb=Ka[Aa];Qb=[];for(Jc=yc=0;Jc<Db.length;Jc++)for(Ia=Db[Jc],Na=1;Na<ka;Na++)for(ib=1;ib<la;ib++)Qb.push(K(null,ib,Na,Ia,ec,ob,Nb[Jc],Cb&&Cb[yc]?Cb[yc]:[])),yc++;Ka[$a]=Qb}Aa++}0<ab.length&&(Ka[Aa]="x"===La?M(null,ab,Ja,Ta,Ka[Aa]):"y"===La?H(null,ab,Ja,Ta,Ka[Aa]):O(null,ab,Ja,Ta,Ka[Aa]),Aa++)}ab=c.caps[La];ab.show&&ab.fill&&
(pb=ab.fill,Ka[Aa]="x"===La?M(null,[0,la-1],Ja,Ta,Ka[Aa]):"y"===La?H(null,[0,ka-1],Ja,Ta,Ka[Aa]):O(null,[0,na-1],Ja,Ta,Ka[Aa]))}});0===ja&&d();c._meshX=bb;c._meshY=sb;c._meshZ=hb;c._meshIntensity=ub;c._Xs=ra;c._Ys=wa;c._Zs=pa})();return c}var k=b("gl-mesh3d"),m=b("../../lib/gl_format_color").parseColorScale,a=b("../../lib/str2rgbarray"),g=b("../../components/colorscale").extractOpts,h=b("../../plots/gl3d/zip3"),r=function(c,d){for(var e=d.length-1;0<e;e--){var f=Math.min(d[e],d[e-1]),q=Math.max(d[e],
d[e-1]);if(q>f&&f<c&&c<=q)return{id:e,distRatio:(q-c)/(q-f)}}return{id:0,distRatio:0}};b=p.prototype;b.handlePick=function(c){if(c.object===this.mesh){var d=c.data.index,e=this.data._meshY[d],f=this.data._meshZ[d],q=this.data._Ys.length,t=this.data._Zs.length;d=r(this.data._meshX[d],this.data._Xs).id;e=r(e,this.data._Ys).id;f=r(f,this.data._Zs).id;q=c.index=f+t*e+t*q*d;c.traceCoordinate=[this.data._meshX[q],this.data._meshY[q],this.data._meshZ[q],this.data._value[q]];t=this.data.hovertext||this.data.text;
Array.isArray(t)&&void 0!==t[q]?c.textLabel=t[q]:t&&(c.textLabel=t);return!0}};b.update=function(c){function d(q,t,w,x){return t.map(function(z){return q.d2l(z,0,x)*w})}var e=this.scene,f=e.fullSceneLayout;this.data=n(c);e=h(d(f.xaxis,c._meshX,e.dataScale[0],c.xcalendar),d(f.yaxis,c._meshY,e.dataScale[1],c.ycalendar),d(f.zaxis,c._meshZ,e.dataScale[2],c.zcalendar));f=h(c._meshI,c._meshJ,c._meshK);e={positions:e,cells:f,lightPosition:[c.lightposition.x,c.lightposition.y,c.lightposition.z],ambient:c.lighting.ambient,
diffuse:c.lighting.diffuse,specular:c.lighting.specular,roughness:c.lighting.roughness,fresnel:c.lighting.fresnel,vertexNormalsEpsilon:c.lighting.vertexnormalsepsilon,faceNormalsEpsilon:c.lighting.facenormalsepsilon,opacity:c.opacity,contourEnable:c.contour.show,contourColor:a(c.contour.color).slice(0,3),contourWidth:c.contour.width,useFacetNormals:c.flatshading};f=g(c);e.vertexIntensity=c._meshIntensity;e.vertexIntensityBounds=[f.min,f.max];e.colormap=m(c);this.mesh.update(e)};b.dispose=function(){this.scene.glplot.remove(this.mesh);
this.mesh.dispose()};var l="xyz xzy yxz yzx zxy zyx".split(" ");N.exports={findNearestOnAxis:r,generateIsoMeshes:n,createIsosurfaceTrace:function(c,d){var e=k({gl:c.glplot.gl}),f=new p(c,e,d.uid);e._trace=f;f.update(d);c.glplot.add(e);return f}}},{"../../components/colorscale":678,"../../lib/gl_format_color":799,"../../lib/str2rgbarray":828,"../../plots/gl3d/zip3":907,"gl-mesh3d":315}],1157:[function(b,N,G){function p(g,h,r,l,c){r=c("isomin");var d=c("isomax");void 0!==d&&null!==d&&void 0!==r&&null!==
r&&r>d&&(h.isomin=null,h.isomax=null);r=c("x");d=c("y");var e=c("z"),f=c("value");r&&r.length&&d&&d.length&&e&&e.length&&f&&f.length?(k.getComponentMethod("calendars","handleTraceDefaults")(g,h,["x","y","z"],l),c("valuehoverformat"),["x","y","z"].forEach(function(q){c(q+"hoverformat");var t="caps."+q;c(t+".show")&&c(t+".fill");q="slices."+q;c(q+".show")&&(c(q+".fill"),c(q+".locations"))}),c("spaceframe.show")&&c("spaceframe.fill"),c("surface.show")&&(c("surface.count"),c("surface.fill"),c("surface.pattern")),
c("contour.show")&&(c("contour.color"),c("contour.width")),"text hovertext hovertemplate lighting.ambient lighting.diffuse lighting.specular lighting.roughness lighting.fresnel lighting.vertexnormalsepsilon lighting.facenormalsepsilon lightposition.x lightposition.y lightposition.z flatshading opacity".split(" ").forEach(function(q){c(q)}),a(g,h,l,c,{prefix:"",cLetter:"c"}),h._length=null):h.visible=!1}var n=b("../../lib"),k=b("../../registry"),m=b("./attributes"),a=b("../../components/colorscale/defaults");
N.exports={supplyDefaults:function(g,h,r,l){p(g,h,r,l,function(c,d){return n.coerce(g,h,m,c,d)})},supplyIsoDefaults:p}},{"../../components/colorscale/defaults":676,"../../lib":803,"../../registry":931,"./attributes":1154}],1158:[function(b,N,G){N.exports={attributes:b("./attributes"),supplyDefaults:b("./defaults").supplyDefaults,calc:b("./calc"),colorbar:{min:"cmin",max:"cmax"},plot:b("./convert").createIsosurfaceTrace,moduleType:"trace",name:"isosurface",basePlotModule:b("../../plots/gl3d"),categories:["gl3d",
"showLegend"],meta:{}}},{"../../plots/gl3d":896,"./attributes":1154,"./calc":1155,"./convert":1156,"./defaults":1157}],1159:[function(b,N,G){G=b("../../components/colorscale/attributes");var p=b("../../plots/cartesian/axis_format_attributes").axisHoverFormat,n=b("../../plots/template_attributes").hovertemplateAttrs,k=b("../surface/attributes"),m=b("../../plots/attributes");b=b("../../lib/extend").extendFlat;N.exports=b({x:{valType:"data_array",editType:"calc+clearAxisTypes"},y:{valType:"data_array",
editType:"calc+clearAxisTypes"},z:{valType:"data_array",editType:"calc+clearAxisTypes"},i:{valType:"data_array",editType:"calc"},j:{valType:"data_array",editType:"calc"},k:{valType:"data_array",editType:"calc"},text:{valType:"string",dflt:"",arrayOk:!0,editType:"calc"},hovertext:{valType:"string",dflt:"",arrayOk:!0,editType:"calc"},hovertemplate:n({editType:"calc"}),xhoverformat:p("x"),yhoverformat:p("y"),zhoverformat:p("z"),delaunayaxis:{valType:"enumerated",values:["x","y","z"],dflt:"z",editType:"calc"},
alphahull:{valType:"number",dflt:-1,editType:"calc"},intensity:{valType:"data_array",editType:"calc"},intensitymode:{valType:"enumerated",values:["vertex","cell"],dflt:"vertex",editType:"calc"},color:{valType:"color",editType:"calc"},vertexcolor:{valType:"data_array",editType:"calc"},facecolor:{valType:"data_array",editType:"calc"},transforms:void 0},G("",{colorAttr:"`intensity`",showScaleDflt:!0,editTypeOverride:"calc"}),{opacity:k.opacity,flatshading:{valType:"boolean",dflt:!1,editType:"calc"},
contour:{show:b({},k.contours.x.show,{}),color:k.contours.x.color,width:k.contours.x.width,editType:"calc"},lightposition:{x:b({},k.lightposition.x,{dflt:1E5}),y:b({},k.lightposition.y,{dflt:1E5}),z:b({},k.lightposition.z,{dflt:0}),editType:"calc"},lighting:b({vertexnormalsepsilon:{valType:"number",min:0,max:1,dflt:1E-12,editType:"calc"},facenormalsepsilon:{valType:"number",min:0,max:1,dflt:1E-6,editType:"calc"},editType:"calc"},k.lighting),hoverinfo:b({},m.hoverinfo,{editType:"calc"}),showlegend:b({},
m.showlegend,{dflt:!1})})},{"../../components/colorscale/attributes":673,"../../lib/extend":793,"../../plots/attributes":850,"../../plots/cartesian/axis_format_attributes":857,"../../plots/template_attributes":926,"../surface/attributes":1342}],1160:[function(b,N,G){var p=b("../../components/colorscale/calc");N.exports=function(n,k){k.intensity&&p(n,k,{vals:k.intensity,containerStr:"",cLetter:"c"})}},{"../../components/colorscale/calc":674}],1161:[function(b,N,G){function p(q,t,w){this.scene=q;this.uid=
w;this.mesh=t;this.name="";this.color="#fff";this.data=null;this.showContour=!1}function n(q){for(var t=[],w=q.length,x=0;x<w;x++)t[x]=d(q[x]);return t}function k(q,t,w,x){for(var z=[],B=t.length,A=0;A<B;A++)z[A]=q.d2l(t[A],0,x)*w;return z}function m(q){for(var t=[],w=q.length,x=0;x<w;x++)t[x]=Math.round(q[x]);return t}function a(q,t){for(var w=q.length,x=0;x<w;x++)if(-.5>=q[x]||q[x]>=t-.5)return!1;return!0}var g=b("gl-mesh3d"),h=b("delaunay-triangulate"),r=b("alpha-shape"),l=b("convex-hull"),c=b("../../lib/gl_format_color").parseColorScale,
d=b("../../lib/str2rgbarray"),e=b("../../components/colorscale").extractOpts,f=b("../../plots/gl3d/zip3");b=p.prototype;b.handlePick=function(q){if(q.object===this.mesh){var t=q.index=q.data.index;q.traceCoordinate=q.data._cellCenter?q.data.dataCoordinate:[this.data.x[t],this.data.y[t],this.data.z[t]];var w=this.data.hovertext||this.data.text;Array.isArray(w)&&void 0!==w[t]?q.textLabel=w[t]:w&&(q.textLabel=w);return!0}};b.update=function(q){var t=this.scene,w=t.fullSceneLayout;this.data=q;var x=q.x.length;
t=f(k(w.xaxis,q.x,t.dataScale[0],q.xcalendar),k(w.yaxis,q.y,t.dataScale[1],q.ycalendar),k(w.zaxis,q.z,t.dataScale[2],q.zcalendar));if(q.i&&q.j&&q.k){if(q.i.length!==q.j.length||q.j.length!==q.k.length||!a(q.i,x)||!a(q.j,x)||!a(q.k,x))return;x=f(m(q.i),m(q.j),m(q.k))}else if(0===q.alphahull)x=l(t);else if(0<q.alphahull)x=r(q.alphahull,t);else{x=["x","y","z"].indexOf(q.delaunayaxis);w=[];for(var z=t.length,B=0;B<z;B++)w[B]=[t[B][(x+1)%3],t[B][(x+2)%3]];x=h(w)}t={positions:t,cells:x,lightPosition:[q.lightposition.x,
q.lightposition.y,q.lightposition.z],ambient:q.lighting.ambient,diffuse:q.lighting.diffuse,specular:q.lighting.specular,roughness:q.lighting.roughness,fresnel:q.lighting.fresnel,vertexNormalsEpsilon:q.lighting.vertexnormalsepsilon,faceNormalsEpsilon:q.lighting.facenormalsepsilon,opacity:q.opacity,contourEnable:q.contour.show,contourColor:d(q.contour.color).slice(0,3),contourWidth:q.contour.width,useFacetNormals:q.flatshading};q.intensity?(x=e(q),this.color="#fff",w=q.intensitymode,t[w+"Intensity"]=
q.intensity,t[w+"IntensityBounds"]=[x.min,x.max],t.colormap=c(q)):q.vertexcolor?(this.color=q.vertexcolor[0],t.vertexColors=n(q.vertexcolor)):q.facecolor?(this.color=q.facecolor[0],t.cellColors=n(q.facecolor)):(this.color=q.color,t.meshColor=d(q.color));this.mesh.update(t)};b.dispose=function(){this.scene.glplot.remove(this.mesh);this.mesh.dispose()};N.exports=function(q,t){var w=g({gl:q.glplot.gl}),x=new p(q,w,t.uid);w._trace=x;x.update(t);q.glplot.add(w);return x}},{"../../components/colorscale":678,
"../../lib/gl_format_color":799,"../../lib/str2rgbarray":828,"../../plots/gl3d/zip3":907,"alpha-shape":75,"convex-hull":141,"delaunay-triangulate":180,"gl-mesh3d":315}],1162:[function(b,N,G){var p=b("../../registry"),n=b("../../lib"),k=b("../../components/colorscale/defaults"),m=b("./attributes");N.exports=function(a,g,h,r){function l(d,e){return n.coerce(a,g,m,d,e)}function c(d){var e=d.map(function(f){return(f=l(f))&&n.isArrayOrTypedArray(f)?f:null});return e.every(function(f){return f&&f.length===
e[0].length})&&e}c(["x","y","z"])?(c(["i","j","k"]),(!g.i||g.j&&g.k)&&(!g.j||g.k&&g.i)&&(!g.k||g.i&&g.j)?(p.getComponentMethod("calendars","handleTraceDefaults")(a,g,["x","y","z"],r),"lighting.ambient lighting.diffuse lighting.specular lighting.roughness lighting.fresnel lighting.vertexnormalsepsilon lighting.facenormalsepsilon lightposition.x lightposition.y lightposition.z flatshading alphahull delaunayaxis opacity".split(" ").forEach(function(d){l(d)}),l("contour.show")&&(l("contour.color"),l("contour.width")),
"intensity"in a?(l("intensity"),l("intensitymode"),k(a,g,r,l,{prefix:"",cLetter:"c"})):(g.showscale=!1,"facecolor"in a?l("facecolor"):"vertexcolor"in a?l("vertexcolor"):l("color",h)),l("text"),l("hovertext"),l("hovertemplate"),l("xhoverformat"),l("yhoverformat"),l("zhoverformat"),g._length=null):g.visible=!1):g.visible=!1}},{"../../components/colorscale/defaults":676,"../../lib":803,"../../registry":931,"./attributes":1159}],1163:[function(b,N,G){N.exports={attributes:b("./attributes"),supplyDefaults:b("./defaults"),
calc:b("./calc"),colorbar:{min:"cmin",max:"cmax"},plot:b("./convert"),moduleType:"trace",name:"mesh3d",basePlotModule:b("../../plots/gl3d"),categories:["gl3d","showLegend"],meta:{}}},{"../../plots/gl3d":896,"./attributes":1159,"./calc":1160,"./convert":1161,"./defaults":1162}],1164:[function(b,N,G){function p(r){return{line:{color:n({},h.color,{dflt:r}),width:h.width,dash:m,editType:"style"},editType:"style"}}var n=b("../../lib").extendFlat;G=b("../scatter/attributes");var k=b("../../plots/cartesian/axis_format_attributes").axisHoverFormat,
m=b("../../components/drawing/attributes").dash,a=b("../../components/fx/attributes"),g=b("../../constants/delta.js");b=g.INCREASING.COLOR;g=g.DECREASING.COLOR;var h=G.line;N.exports={xperiod:G.xperiod,xperiod0:G.xperiod0,xperiodalignment:G.xperiodalignment,xhoverformat:k("x"),yhoverformat:k("y"),x:{valType:"data_array",editType:"calc+clearAxisTypes"},open:{valType:"data_array",editType:"calc"},high:{valType:"data_array",editType:"calc"},low:{valType:"data_array",editType:"calc"},close:{valType:"data_array",
editType:"calc"},line:{width:n({},h.width,{}),dash:n({},m,{}),editType:"style"},increasing:p(b),decreasing:p(g),text:{valType:"string",dflt:"",arrayOk:!0,editType:"calc"},hovertext:{valType:"string",dflt:"",arrayOk:!0,editType:"calc"},tickwidth:{valType:"number",min:0,max:.5,dflt:.3,editType:"calc"},hoverlabel:n({},a.hoverlabel,{split:{valType:"boolean",dflt:!1,editType:"style"}})}},{"../../components/drawing/attributes":687,"../../components/fx/attributes":697,"../../constants/delta.js":773,"../../lib":803,
"../../plots/cartesian/axis_format_attributes":857,"../scatter/attributes":1218}],1165:[function(b,N,G){function p(r,l,c,d){return{o:r,h:l,l:c,c:d}}function n(r,l,c,d,e,f){for(var q=e.makeCalcdata(l,"open"),t=e.makeCalcdata(l,"high"),w=e.makeCalcdata(l,"low"),x=e.makeCalcdata(l,"close"),z=Array.isArray(l.text),B=Array.isArray(l.hovertext),A=!0,D=null,C=!!l.xperiodalignment,v=[],y=0;y<d.length;y++){var F=d[y],J=q[y],K=t[y],M=w[y],H=x[y];if(F!==h&&J!==h&&K!==h&&M!==h&&H!==h){H===J?null!==D&&H!==D&&
(A=H>D):A=H>J;D=H;var O=f(J,K,M,H);O.pos=F;O.yc=(J+H)/2;O.i=y;O.dir=A?"increasing":"decreasing";O.x=O.pos;O.y=[M,K];C&&(O.orig_p=c[y]);z&&(O.tx=l.text[y]);B&&(O.htx=l.hovertext[y]);v.push(O)}else v.push({pos:F,empty:!0})}l._extremes[e._id]=a.findExtremes(e,k.concat(w,t),{padded:!0});v.length&&(v[0].t={labels:{open:m(r,"open:")+" ",high:m(r,"high:")+" ",low:m(r,"low:")+" ",close:m(r,"close:")+" "}});return v}var k=b("../../lib"),m=k._,a=b("../../plots/cartesian/axes"),g=b("../../plots/cartesian/align_period"),
h=b("../../constants/numerical").BADNUM;N.exports={calc:function(r,l){var c=a.getFromId(r,l.xaxis),d=a.getFromId(r,l.yaxis);var e=l._minDiff;if(!e){var f=r._fullData,q=[];e=Infinity;var t;for(t=0;t<f.length;t++){var w=f[t];if("ohlc"===w.type&&!0===w.visible&&w.xaxis===c._id){q.push(w);var x=c.makeCalcdata(w,"x");w._origX=x;x=g(l,c,"x",x).vals;w._xcalc=x;(w=k.distinctVals(x).minDiff)&&isFinite(w)&&(e=Math.min(e,w))}}Infinity===e&&(e=1);for(t=0;t<q.length;t++)q[t]._minDiff=e}e*=l.tickwidth;f=l._minDiff;
l._minDiff=null;t=l._origX;l._origX=null;q=l._xcalc;l._xcalc=null;r=n(r,l,t,q,d,p);l._extremes[c._id]=a.findExtremes(c,q,{vpad:f/2});return r.length?(k.extendFlat(r[0].t,{wHover:f/2,tickLen:e}),r):[{t:{empty:!0}}]},calcCommon:n}},{"../../constants/numerical":779,"../../lib":803,"../../plots/cartesian/align_period":851,"../../plots/cartesian/axes":854}],1166:[function(b,N,G){function p(g,h,r,l){r(l+".line.color");r(l+".line.width",h.line.width);r(l+".line.dash",h.line.dash)}var n=b("../../lib"),k=
b("./ohlc_defaults"),m=b("../scatter/period_defaults"),a=b("./attributes");N.exports=function(g,h,r,l){function c(d,e){return n.coerce(g,h,a,d,e)}k(g,h,c,l)?(m(g,h,l,c,{x:!0}),c("xhoverformat"),c("yhoverformat"),c("line.width"),c("line.dash"),p(g,h,c,"increasing"),p(g,h,c,"decreasing"),c("text"),c("hovertext"),c("tickwidth"),l._requestRangeslider[h.xaxis]=!0):h.visible=!1}},{"../../lib":803,"../scatter/period_defaults":1238,"./attributes":1164,"./ohlc_defaults":1169}],1167:[function(b,N,G){function p(c,
d,e,f){function q(K){K=K.pos+y-d;return g.inbox(K-F,K+F,J)}function t(K){var M=K[C];K=K[v];return M===K||g.inbox(M-e,K-e,J)}function w(K){return(q(K)+t(K))/2}var x=c.cd,z=c.xa,B=x[0].trace,A=x[0].t,D=B.type,C="ohlc"===D?"l":"min",v="ohlc"===D?"h":"max",y=A.bPos||0;D=A.bdPos||A.tickLen;var F=A.wHover;A=Math.min(1,D/Math.abs(z.r2c(z.range[1])-z.r2c(z.range[0])));var J=c.maxHoverDistance-A;A=c.maxSpikeDistance-A;f=g.getDistanceFunction(f,q,t,w);g.getClosest(x,f,c);if(!1===c.index)return null;x=x[c.index];
if(x.empty)return null;B=B[x.dir];f=B.line.color;h.opacity(f)&&B.line.width?c.color=f:c.color=B.fillcolor;c.x0=z.c2p(x.pos+y-D,!0);c.x1=z.c2p(x.pos+y+D,!0);c.xLabelVal=void 0!==x.orig_p?x.orig_p:x.pos;c.spikeDistance=w(x)*A/J;c.xSpike=z.c2p(x.pos,!0);return c}function n(c,d,e,f){var q=c.cd,t=c.ya,w=q[0].trace,x=q[0].t,z=[];c=p(c,d,e,f);if(!c)return[];q=q[c.index].hi||w.hoverinfo;d=q.split("+");if("all"!==q&&-1===d.indexOf("y"))return[];q=["high","open","close","low"];d={};for(e=0;e<q.length;e++){f=
q[e];var B=w[f][c.index],A=t.c2p(B,!0);if(B in d){var D=d[B];D.yLabel+="\x3cbr\x3e"+x.labels[f]+m.hoverLabelText(t,B,w.yhoverformat)}else D=a.extendFlat({},c),D.y0=D.y1=A,D.yLabelVal=B,D.yLabel=x.labels[f]+m.hoverLabelText(t,B,w.yhoverformat),D.name="",z.push(D),d[B]=D}return z}function k(c,d,e,f){function q(D){return z.labels[D]+m.hoverLabelText(w,x[D][B],x.yhoverformat)}var t=c.cd,w=c.ya,x=t[0].trace,z=t[0].t;c=p(c,d,e,f);if(!c)return[];t=t[c.index];var B=c.index=t.i;d=t.dir;f=t.hi||x.hoverinfo;
e=f.split("+");var A="all"===f;f=A||-1!==e.indexOf("y");e=A||-1!==e.indexOf("text");d=f?[q("open"),q("high"),q("low"),q("close")+"  "+l[d]]:[];e&&r(t,x,d);c.extraText=d.join("\x3cbr\x3e");c.y0=c.y1=w.c2p(t.yc,!0);return[c]}var m=b("../../plots/cartesian/axes"),a=b("../../lib"),g=b("../../components/fx"),h=b("../../components/color"),r=b("../../lib").fillText;b=b("../../constants/delta.js");var l={increasing:b.INCREASING.SYMBOL,decreasing:b.DECREASING.SYMBOL};N.exports={hoverPoints:function(c,d,e,
f){return c.cd[0].trace.hoverlabel.split?n(c,d,e,f):k(c,d,e,f)},hoverSplit:n,hoverOnPoints:k}},{"../../components/color":666,"../../components/fx":706,"../../constants/delta.js":773,"../../lib":803,"../../plots/cartesian/axes":854}],1168:[function(b,N,G){N.exports={moduleType:"trace",name:"ohlc",basePlotModule:b("../../plots/cartesian"),categories:["cartesian","svg","showLegend"],meta:{},attributes:b("./attributes"),supplyDefaults:b("./defaults"),calc:b("./calc").calc,plot:b("./plot"),style:b("./style"),
hoverPoints:b("./hover").hoverPoints,selectPoints:b("./select")}},{"../../plots/cartesian":868,"./attributes":1164,"./calc":1165,"./defaults":1166,"./hover":1167,"./plot":1170,"./select":1171,"./style":1172}],1169:[function(b,N,G){var p=b("../../registry"),n=b("../../lib");N.exports=function(k,m,a,g){var h=a("x"),r=a("open"),l=a("high"),c=a("low"),d=a("close");a("hoverlabel.split");p.getComponentMethod("calendars","handleTraceDefaults")(k,m,["x"],g);if(r&&l&&c&&d)return k=Math.min(r.length,l.length,
c.length,d.length),h&&(k=Math.min(k,n.minRowLength(h))),m._length=k}},{"../../lib":803,"../../registry":931}],1170:[function(b,N,G){var p=b("@plotly/d3"),n=b("../../lib");N.exports=function(k,m,a,g){var h=m.yaxis,r=m.xaxis,l=!!r.rangebreaks;n.makeTraceGroups(g,a,"trace ohlc").each(function(c){var d=p.select(this);c=c[0];var e=c.t;if(!0!==c.trace.visible||e.empty)d.remove();else{var f=e.tickLen;d=d.selectAll("path").data(n.identity);d.enter().append("path");d.exit().remove();d.attr("d",function(q){if(q.empty)return"M0,0Z";
var t=r.c2p(q.pos-f,!0),w=r.c2p(q.pos+f,!0),x=l?(t+w)/2:r.c2p(q.pos,!0),z=h.c2p(q.o,!0),B=h.c2p(q.h,!0),A=h.c2p(q.l,!0);q=h.c2p(q.c,!0);return"M"+t+","+z+"H"+x+"M"+x+","+B+"V"+A+"M"+w+","+q+"H"+x})}})}},{"../../lib":803,"@plotly/d3":58}],1171:[function(b,N,G){N.exports=function(p,n){var k=p.cd,m=p.xaxis,a=p.yaxis,g=[],h,r=k[0].t.bPos||0;if(!1===n)for(h=0;h<k.length;h++)k[h].selected=0;else for(h=0;h<k.length;h++){var l=k[h];n.contains([m.c2p(l.pos+r),a.c2p(l.yc)],null,l.i,p)?(g.push({pointNumber:l.i,
x:m.c2d(l.pos),y:a.c2d(l.yc)}),l.selected=1):l.selected=0}return g}},{}],1172:[function(b,N,G){var p=b("@plotly/d3"),n=b("../../components/drawing"),k=b("../../components/color");N.exports=function(m,a,g){m=g?g:p.select(m).selectAll("g.ohlclayer").selectAll("g.trace");m.style("opacity",function(h){return h[0].trace.opacity});m.each(function(h){var r=h[0].trace;p.select(this).selectAll("path").each(function(l){if(!l.empty){var c=r[l.dir].line;p.select(this).style("fill","none").call(k.stroke,c.color).call(n.dashLine,
c.dash,c.width).style("opacity",r.selectedpoints&&!l.selected?.3:1)}})})}},{"../../components/color":666,"../../components/drawing":688,"@plotly/d3":58}],1173:[function(b,N,G){G=b("../../lib/extend").extendFlat;var p=b("../../plots/attributes"),n=b("../../plots/font_attributes"),k=b("../../components/colorscale/attributes"),m=b("../../plots/template_attributes").hovertemplateAttrs;b=b("../../plots/domain").attributes;k=G({editType:"calc"},k("line",{editTypeOverride:"calc"}),{shape:{valType:"enumerated",
values:["linear","hspline"],dflt:"linear",editType:"plot"},hovertemplate:m({editType:"plot",arrayOk:!1},{keys:["count","probability"]})});N.exports={domain:b({name:"parcats",trace:!0,editType:"calc"}),hoverinfo:G({},p.hoverinfo,{flags:["count","probability"],editType:"plot",arrayOk:!1}),hoveron:{valType:"enumerated",values:["category","color","dimension"],dflt:"category",editType:"plot"},hovertemplate:m({editType:"plot",arrayOk:!1},{keys:"count probability category categorycount colorcount bandcolorcount".split(" ")}),
arrangement:{valType:"enumerated",values:["perpendicular","freeform","fixed"],dflt:"perpendicular",editType:"plot"},bundlecolors:{valType:"boolean",dflt:!0,editType:"plot"},sortpaths:{valType:"enumerated",values:["forward","backward"],dflt:"forward",editType:"plot"},labelfont:n({editType:"calc"}),tickfont:n({editType:"calc"}),dimensions:{_isLinkedToArray:"dimension",label:{valType:"string",editType:"calc"},categoryorder:{valType:"enumerated",values:["trace","category ascending","category descending",
"array"],dflt:"trace",editType:"calc"},categoryarray:{valType:"data_array",editType:"calc"},ticktext:{valType:"data_array",editType:"calc"},values:{valType:"data_array",dflt:[],editType:"calc"},displayindex:{valType:"integer",editType:"calc"},editType:"calc",visible:{valType:"boolean",dflt:!0,editType:"calc"}},line:k,counts:{valType:"number",min:0,dflt:1,arrayOk:!0,editType:"calc"},customdata:void 0,hoverlabel:void 0,ids:void 0,legendgroup:void 0,legendrank:void 0,opacity:void 0,selectedpoints:void 0,
showlegend:void 0}},{"../../components/colorscale/attributes":673,"../../lib/extend":793,"../../plots/attributes":850,"../../plots/domain":882,"../../plots/font_attributes":883,"../../plots/template_attributes":926}],1174:[function(b,N,G){var p=b("../../plots/get_data").getModuleCalcData,n=b("./plot");G.name="parcats";G.plot=function(k,m,a,g){m=p(k.calcdata,"parcats");m.length&&n(k,m[0],a,g)};G.clean=function(k,m,a,g){k=g._has&&g._has("parcats");m=m._has&&m._has("parcats");k&&!m&&g._paperdiv.selectAll(".parcats").remove()}},
{"../../plots/get_data":891,"./plot":1179}],1175:[function(b,N,G){function p(q,t,w){var x=q.map(function(z){return z.categories.length}).reduce(function(z,B){return Math.max(z,B)});return{dimensions:q,paths:t,trace:void 0,maxCats:x,count:w}}function n(q,t,w){q.valueInds.push(t);q.count+=w}function k(q,t,w){q.valueInds.push(t);q.count+=w}function m(q,t){t=void 0===t||null===t?[]:t.map(function(C){return C});var w={},x={},z=[];t.forEach(function(C,v){w[C]=0;x[C]=v});for(var B=0;B<q.length;B++){var A=
q[B];if(void 0===w[A]){w[A]=1;var D=t.push(A)-1;x[A]=D}else w[A]++,D=x[A];z.push(D)}q=t.map(function(C){return w[C]});return{uniqueValues:t,uniqueCounts:q,inds:z}}function a(q){var t=q.map(function(w){return w.displayindex});if(g(t))for(t=0;t<q.length;t++)q[t]._displayindex=q[t].displayindex;else for(t=0;t<q.length;t++)q[t]._displayindex=t}function g(q){for(var t=Array(q.length),w=0;w<q.length;w++){if(0>q[w]||q[w]>=q.length||void 0!==t[q[w]])return!1;t[q[w]]=!0}return!0}var h=b("../../lib/gup").wrap,
r=b("../../components/colorscale/helpers").hasColorscale,l=b("../../components/colorscale/calc"),c=b("../../lib/filter_unique.js"),d=b("../../components/drawing"),e=b("../../lib"),f=b("fast-isnumeric");N.exports=function(q,t){function w(O){if(e.isArrayOrTypedArray(A.color))var I=O=A.color[O%A.color.length];else O=A.color;return{color:D(O),rawColor:I}}var x=e.filterVisible(t.dimensions);if(0===x.length)return[];var z=x.map(function(O){if("trace"===O.categoryorder)var I=null;else if("array"===O.categoryorder)I=
O.categoryarray;else{I=c(O.values);for(var L=!0,Q=0;Q<I.length;Q++)if(!f(I[Q])){L=!1;break}I.sort(L?e.sorterAsc:void 0);"category descending"===O.categoryorder&&(I=I.reverse())}return m(O.values,I)});var B=e.isArrayOrTypedArray(t.counts)?t.counts:[t.counts];a(x);x.forEach(function(O,I){I=z[I];O._categoryarray=I.uniqueValues;O._ticktext=null===O.ticktext||void 0===O.ticktext?[]:O.ticktext.slice();for(var L=O._ticktext.length;L<I.uniqueValues.length;L++)O._ticktext.push(I.uniqueValues[L])});var A=t.line;
if(A){r(t,"line")&&l(q,t,{vals:t.line.color,containerStr:"line",cLetter:"c"});var D=d.tryColorscale(A)}else D=e.identity;var C=x[0].values.length,v={},y=z.map(function(O){return O.inds});var F=0;var J,K;for(J=0;J<C;J++){var M=[];for(K=0;K<y.length;K++)M.push(y[K][J]);q=B[J%B.length];F+=q;K=w(J);var H=M+"-"+K.rawColor;void 0===v[H]&&(v[H]={categoryInds:M,color:K.color,rawColor:K.rawColor,valueInds:[],count:0});k(v[H],J,q)}x=x.map(function(O,I){return{dimensionInd:I,containerInd:O._index,displayInd:O._displayindex,
dimensionLabel:O.label,count:F,categories:[],dragX:null}});for(J=0;J<C;J++)for(q=B[J%B.length],K=0;K<x.length;K++)y=x[K].containerInd,M=z[K].inds[J],H=x[K].categories,void 0===H[M]&&(H[M]={dimensionInd:K,categoryInd:M,categoryValue:t.dimensions[y]._categoryarray[M],displayInd:M,categoryLabel:t.dimensions[y]._ticktext[M],valueInds:[],count:0,dragY:null}),n(H[M],J,q);return h(p(x,v,F))}},{"../../components/colorscale/calc":674,"../../components/colorscale/helpers":677,"../../components/drawing":688,
"../../lib":803,"../../lib/filter_unique.js":794,"../../lib/gup":800,"fast-isnumeric":249}],1176:[function(b,N,G){function p(c,d,e,f,q){q("line.shape");q("line.hovertemplate");var t=q("line.color",f.colorway[0]);if(m(c,"line")&&k.isArrayOrTypedArray(t)){if(t.length)return q("line.colorscale"),a(c,d,f,q,{prefix:"line.",cLetter:"c"}),t.length;d.line.color=e}return Infinity}function n(c,d){function e(w,x){return k.coerce(c,d,r.dimensions,w,x)}var f=e("values"),q=e("visible");f&&f.length||(q=d.visible=
!1);if(q){e("label");e("displayindex",d._index);f=c.categoryarray;f=Array.isArray(f)&&0<f.length;var t;f&&(t="array");t=e("categoryorder",t);"array"===t?(e("categoryarray"),e("ticktext")):(delete c.categoryarray,delete c.ticktext);f||"array"!==t||(d.categoryorder="trace")}}var k=b("../../lib"),m=b("../../components/colorscale/helpers").hasColorscale,a=b("../../components/colorscale/defaults"),g=b("../../plots/domain").defaults,h=b("../../plots/array_container_defaults"),r=b("./attributes"),l=b("../parcoords/merge_length");
N.exports=function(c,d,e,f){function q(w,x){return k.coerce(c,d,r,w,x)}var t=h(c,d,{name:"dimensions",handleItemDefaults:n});e=p(c,d,e,f,q);g(d,f,q);Array.isArray(t)&&t.length||(d.visible=!1);l(d,t,"values",e);q("hoveron");q("hovertemplate");q("arrangement");q("bundlecolors");q("sortpaths");q("counts");k.coerceFont(q,"labelfont",{family:f.font.family,size:Math.round(f.font.size),color:f.font.color});k.coerceFont(q,"tickfont",{family:f.font.family,size:Math.round(f.font.size/1.2),color:f.font.color})}},
{"../../components/colorscale/defaults":676,"../../components/colorscale/helpers":677,"../../lib":803,"../../plots/array_container_defaults":849,"../../plots/domain":882,"../parcoords/merge_length":1189,"./attributes":1173}],1177:[function(b,N,G){N.exports={attributes:b("./attributes"),supplyDefaults:b("./defaults"),calc:b("./calc"),plot:b("./plot"),colorbar:{container:"line",min:"cmin",max:"cmax"},moduleType:"trace",name:"parcats",basePlotModule:b("./base_plot"),categories:["noOpacity"],meta:{}}},
{"./attributes":1173,"./base_plot":1174,"./calc":1175,"./defaults":1176,"./plot":1179}],1178:[function(b,N,G){function p(ia,ra,wa,pa){ia=ia.map(O.bind(0,ra,wa));pa=pa.selectAll("g.parcatslayer").data([null]);pa.enter().append("g").attr("class","parcatslayer").style("pointer-events","all");pa=pa.selectAll("g.trace.parcats").data(ia,n);ia=pa.enter().append("g").attr("class","trace parcats");pa.attr("transform",function(oa){return W(oa.x,oa.y)});ia.append("g").attr("class","paths");wa=pa.select("g.paths").selectAll("path.path").data(function(oa){return oa.paths},
n);wa.attr("fill",function(oa){return oa.model.color});var la=wa.enter().append("path").attr("class","path").attr("stroke-opacity",0).attr("fill",function(oa){return oa.model.color}).attr("fill-opacity",0);c(la);wa.attr("d",function(oa){return oa.svgD});la.empty()||wa.sort(m);wa.exit().remove();wa.on("mouseover",a).on("mouseout",g).on("click",l);ia.append("g").attr("class","dimensions");ia=pa.select("g.dimensions").selectAll("g.dimension").data(function(oa){return oa.dimensions},n);ia.enter().append("g").attr("class",
"dimension");ia.attr("transform",function(oa){return W(oa.x,0)});ia.exit().remove();wa=ia.selectAll("g.category").data(function(oa){return oa.categories},n);la=wa.enter().append("g").attr("class","category");wa.attr("transform",function(oa){return W(0,oa.y)});la.append("rect").attr("class","catrect").attr("pointer-events","none");wa.select("rect.catrect").attr("fill","none").attr("width",function(oa){return oa.width}).attr("height",function(oa){return oa.height});e(la);var ka=wa.selectAll("rect.bandrect").data(function(oa){return oa.bands},
n);ka.each(function(){fa.raiseToTop(this)});ka.attr("fill",function(oa){return oa.color});var na=ka.enter().append("rect").attr("class","bandrect").attr("stroke-opacity",0).attr("fill",function(oa){return oa.color}).attr("fill-opacity",0);ka.attr("fill",function(oa){return oa.color}).attr("width",function(oa){return oa.width}).attr("height",function(oa){return oa.height}).attr("y",function(oa){return oa.y}).attr("cursor",function(oa){return"fixed"===oa.parcatsViewModel.arrangement?"default":"perpendicular"===
oa.parcatsViewModel.arrangement?"ns-resize":"move"});f(na);ka.exit().remove();la.append("text").attr("class","catlabel").attr("pointer-events","none");ka=ra._fullLayout.paper_bgcolor;wa.select("text.catlabel").attr("text-anchor",function(oa){return k(oa)?"start":"end"}).attr("alignment-baseline","middle").style("text-shadow",ma.makeTextShadow(ka)).style("fill","rgb(0, 0, 0)").attr("x",function(oa){return k(oa)?oa.width+5:-5}).attr("y",function(oa){return oa.height/2}).text(function(oa){return oa.model.categoryLabel}).each(function(oa){aa.font(ba.select(this),
oa.parcatsViewModel.categorylabelfont);ma.convertToTspans(ba.select(this),ra)});la.append("text").attr("class","dimlabel");wa.select("text.dimlabel").attr("text-anchor","middle").attr("alignment-baseline","baseline").attr("cursor",function(oa){return"fixed"===oa.parcatsViewModel.arrangement?"default":"ew-resize"}).attr("x",function(oa){return oa.width/2}).attr("y",-5).text(function(oa,sa){return 0===sa?oa.parcatsViewModel.model.dimensions[oa.model.dimensionInd].dimensionLabel:null}).each(function(oa){aa.font(ba.select(this),
oa.parcatsViewModel.labelfont)});wa.selectAll("rect.bandrect").on("mouseover",C).on("mouseout",v);wa.exit().remove();ia.call(ba.behavior.drag().origin(function(oa){return{x:oa.x,y:0}}).on("dragstart",y).on("drag",F).on("dragend",J));pa.each(function(oa){oa.traceSelection=ba.select(this);oa.pathSelection=ba.select(this).selectAll("g.paths").selectAll("path.path");oa.dimensionSelection=ba.select(this).selectAll("g.dimensions").selectAll("g.dimension")});pa.exit().remove()}function n(ia){return ia.key}
function k(ia){return ia.model.dimensionInd===ia.parcatsViewModel.dimensions[ia.parcatsViewModel.dimensions.length-1].model.dimensionInd}function m(ia,ra){return ia.model.rawColor>ra.model.rawColor?1:ia.model.rawColor<ra.model.rawColor?-1:0}function a(ia){if(!ia.parcatsViewModel.dragDimension&&-1===ia.parcatsViewModel.hoverinfoItems.indexOf("skip")){fa.raiseToTop(this);d(ba.select(this));var ra=h(ia),wa=r(ia);ia.parcatsViewModel.graphDiv.emit("plotly_hover",{points:ra,event:ba.event,constraints:wa});
if(-1===ia.parcatsViewModel.hoverinfoItems.indexOf("none")){var pa=ba.mouse(this)[0];ra=ia.parcatsViewModel.graphDiv;wa=ia.parcatsViewModel.trace;var la=ra._fullLayout,ka=la._paperdiv.node().getBoundingClientRect(),na=ia.parcatsViewModel.graphDiv.getBoundingClientRect(),oa;for(oa=0;oa<ia.leftXs.length-1;oa++)if(ia.leftXs[oa]+ia.dimWidths[oa]-2<=pa&&pa<=ia.leftXs[oa+1]+2){var sa=ia.parcatsViewModel.dimensions[oa];sa=(sa.x+sa.width+ia.parcatsViewModel.dimensions[oa+1].x)/2;var za=(ia.topYs[oa]+ia.topYs[oa+
1]+ia.height)/2;break}sa=ia.parcatsViewModel.x+sa;za=ia.parcatsViewModel.y+za;oa=ja.mostReadable(ia.model.color,["black","white"]);pa=ia.model.count;var Ha=pa/ia.parcatsViewModel.model.count,Wa={countLabel:pa,probabilityLabel:Ha.toFixed(3)},Za=[];-1!==ia.parcatsViewModel.hoverinfoItems.indexOf("count")&&Za.push(["Count:",Wa.countLabel].join(" "));-1!==ia.parcatsViewModel.hoverinfoItems.indexOf("probability")&&Za.push(["P:",Wa.probabilityLabel].join(" "));Za=Za.join("\x3cbr\x3e");var bb=ba.mouse(ra)[0];
T.loneHover({trace:wa,x:sa-ka.left+na.left,y:za-ka.top+na.top,text:Za,color:ia.model.color,borderColor:"black",fontFamily:'Monaco, "Courier New", monospace',fontSize:10,fontColor:oa,idealAlign:bb<sa?"right":"left",hovertemplate:(wa.line||{}).hovertemplate,hovertemplateLabels:Wa,eventData:[{data:wa._input,fullData:wa,count:pa,probability:Ha}]},{container:la._hoverlayer.node(),outerContainer:la._paper.node(),gd:ra})}}}function g(ia){if(!ia.parcatsViewModel.dragDimension&&(c(ba.select(this)),T.loneUnhover(ia.parcatsViewModel.graphDiv._fullLayout._hoverlayer.node()),
ia.parcatsViewModel.pathSelection.sort(m),-1===ia.parcatsViewModel.hoverinfoItems.indexOf("skip"))){var ra=h(ia),wa=r(ia);ia.parcatsViewModel.graphDiv.emit("plotly_unhover",{points:ra,event:ba.event,constraints:wa})}}function h(ia){for(var ra=[],wa=K(ia.parcatsViewModel),pa=0;pa<ia.model.valueInds.length;pa++)ra.push({curveNumber:wa,pointNumber:ia.model.valueInds[pa]});return ra}function r(ia){for(var ra={},wa=ia.parcatsViewModel.model.dimensions,pa=0;pa<wa.length;pa++){var la=wa[pa];ra[la.containerInd]=
la.categories[ia.model.categoryInds[pa]].categoryValue}void 0!==ia.model.rawColor&&(ra.color=ia.model.rawColor);return ra}function l(ia){if(-1===ia.parcatsViewModel.hoverinfoItems.indexOf("skip")){var ra=h(ia),wa=r(ia);ia.parcatsViewModel.graphDiv.emit("plotly_click",{points:ra,event:ba.event,constraints:wa})}}function c(ia){ia.attr("fill",function(ra){return ra.model.color}).attr("fill-opacity",.6).attr("stroke","lightgray").attr("stroke-width",.2).attr("stroke-opacity",1)}function d(ia){ia.attr("fill-opacity",
.8).attr("stroke",function(ra){return ja.mostReadable(ra.model.color,["black","white"])}).attr("stroke-width",.3)}function e(ia){ia.select("rect.catrect").attr("stroke","black").attr("stroke-width",1).attr("stroke-opacity",1)}function f(ia){ia.attr("stroke","black").attr("stroke-width",.2).attr("stroke-opacity",1).attr("fill-opacity",1)}function q(ia){var ra=ia.categoryViewModel.model.dimensionInd,wa=ia.categoryViewModel.model.categoryInd;return ia.parcatsViewModel.pathSelection.filter(function(pa){return pa.model.categoryInds[ra]===
wa&&pa.model.color===ia.color})}function t(ia){ba.select(ia.parentNode).selectAll("rect.bandrect").each(function(ra){ra=q(ra);d(ra);ra.each(function(){fa.raiseToTop(this)})});ba.select(ia.parentNode).select("rect.catrect").attr("stroke","black").attr("stroke-width",2.5)}function w(ia){var ra=ba.select(ia).datum(),wa=q(ra);d(wa);wa.each(function(){fa.raiseToTop(this)});ba.select(ia.parentNode).selectAll("rect.bandrect").filter(function(pa){return pa.color===ra.color}).each(function(){fa.raiseToTop(this);
ba.select(this).attr("stroke","black").attr("stroke-width",1.5)})}function x(ia,ra,wa){var pa=ba.select(ia).datum(),la=pa.categoryViewModel.model;pa=pa.parcatsViewModel.graphDiv;var ka=[];ba.select(ia.parentNode).selectAll("rect.bandrect").each(function(na){q(na).each(function(oa){Array.prototype.push.apply(ka,h(oa))})});ia={};ia[la.dimensionInd]=la.categoryValue;pa.emit(ra,{points:ka,event:wa,constraints:ia})}function z(ia,ra,wa){ia=ba.select(ia).datum();var pa=ia.categoryViewModel.model,la=ia.parcatsViewModel.graphDiv,
ka=[];q(ia).each(function(oa){Array.prototype.push.apply(ka,h(oa))});var na={};na[pa.dimensionInd]=pa.categoryValue;void 0!==ia.rawColor&&(na.color=ia.rawColor);la.emit(ra,{points:ka,event:wa,constraints:na})}function B(ia,ra,wa){ia._fullLayout._calcInverseTransform(ia);var pa=ia._fullLayout._invScaleX;ia=ia._fullLayout._invScaleY;wa=ba.select(wa.parentNode).select("rect.catrect");var la=wa.node().getBoundingClientRect(),ka=wa.datum(),na=ka.parcatsViewModel,oa=na.model.dimensions[ka.model.dimensionInd];
wa=na.trace;var sa=la.top+la.height/2;1<na.dimensions.length&&oa.displayInd===na.dimensions.length-1?(la=la.left,na="left"):(la=la.left+la.width,na="right");oa=ka.model.count;var za=ka.model.categoryLabel,Ha=oa/ka.parcatsViewModel.model.count,Wa={countLabel:oa,categoryLabel:za,probabilityLabel:Ha.toFixed(3)},Za=[];-1!==ka.parcatsViewModel.hoverinfoItems.indexOf("count")&&Za.push(["Count:",Wa.countLabel].join(" "));-1!==ka.parcatsViewModel.hoverinfoItems.indexOf("probability")&&Za.push(["P("+Wa.categoryLabel+
"):",Wa.probabilityLabel].join(" "));ka=Za.join("\x3cbr\x3e");return{trace:wa,x:pa*(la-ra.left),y:ia*(sa-ra.top),text:ka,color:"lightgray",borderColor:"black",fontFamily:'Monaco, "Courier New", monospace',fontSize:12,fontColor:"black",idealAlign:na,hovertemplate:wa.hovertemplate,hovertemplateLabels:Wa,eventData:[{data:wa._input,fullData:wa,count:oa,category:za,probability:Ha}]}}function A(ia,ra,wa){var pa=[];ba.select(wa.parentNode.parentNode).selectAll("g.category").select("rect.catrect").each(function(){pa.push(B(ia,
ra,this))});return pa}function D(ia,ra,wa){ia._fullLayout._calcInverseTransform(ia);var pa=ia._fullLayout._invScaleX;ia=ia._fullLayout._invScaleY;var la=wa.getBoundingClientRect(),ka=ba.select(wa).datum(),na=ka.categoryViewModel,oa=na.parcatsViewModel,sa=oa.model.dimensions[na.model.dimensionInd];wa=oa.trace;var za=la.y+la.height/2;1<oa.dimensions.length&&sa.displayInd===oa.dimensions.length-1?(la=la.left,sa="left"):(la=la.left+la.width,sa="right");var Ha=na.model.categoryLabel,Wa=ka.parcatsViewModel.model.count,
Za=0;ka.categoryViewModel.bands.forEach(function(tb){tb.color===ka.color&&(Za+=tb.count)});var bb=na.model.count,sb=0;oa.pathSelection.each(function(tb){tb.model.color===ka.color&&(sb+=tb.model.count)});oa=Za/Wa;var hb=Za/sb,ub=Za/bb,pb={countLabel:Wa,categoryLabel:Ha,probabilityLabel:oa.toFixed(3)},Ab=[];-1!==na.parcatsViewModel.hoverinfoItems.indexOf("count")&&Ab.push(["Count:",pb.countLabel].join(" "));-1!==na.parcatsViewModel.hoverinfoItems.indexOf("probability")&&(Ab.push("P(color  "+Ha+"): "+
pb.probabilityLabel),Ab.push("P("+Ha+" | color): "+hb.toFixed(3)),Ab.push("P(color | "+Ha+"): "+ub.toFixed(3)));na=Ab.join("\x3cbr\x3e");hb=ja.mostReadable(ka.color,["black","white"]);return{trace:wa,x:pa*(la-ra.left),y:ia*(za-ra.top),text:na,color:ka.color,borderColor:"black",fontFamily:'Monaco, "Courier New", monospace',fontColor:hb,fontSize:10,idealAlign:sa,hovertemplate:wa.hovertemplate,hovertemplateLabels:pb,eventData:[{data:wa._input,fullData:wa,category:Ha,count:Wa,probability:oa,categorycount:bb,
colorcount:sb,bandcolorcount:Za}]}}function C(ia){if(!(ia.parcatsViewModel.dragDimension||-1!==ia.parcatsViewModel.hoverinfoItems.indexOf("skip")||-1>ba.mouse(this)[1])){var ra=ia.parcatsViewModel.graphDiv,wa=ra._fullLayout,pa=wa._paperdiv.node().getBoundingClientRect(),la=ia.parcatsViewModel.hoveron;"color"===la?(w(this),z(this,"plotly_hover",ba.event)):(t(this),x(this,"plotly_hover",ba.event));if(-1===ia.parcatsViewModel.hoverinfoItems.indexOf("none")){var ka;"category"===la?ka=B(ra,pa,this):"color"===
la?ka=D(ra,pa,this):"dimension"===la&&(ka=A(ra,pa,this));ka&&T.loneHover(ka,{container:wa._hoverlayer.node(),outerContainer:wa._paper.node(),gd:ra})}}}function v(ia){var ra=ia.parcatsViewModel;ra.dragDimension||(c(ra.pathSelection),e(ra.dimensionSelection.selectAll("g.category")),f(ra.dimensionSelection.selectAll("g.category").selectAll("rect.bandrect")),T.loneUnhover(ra.graphDiv._fullLayout._hoverlayer.node()),ra.pathSelection.sort(m),-1===ra.hoverinfoItems.indexOf("skip")&&("color"===ia.parcatsViewModel.hoveron?
z(this,"plotly_unhover",ba.event):x(this,"plotly_unhover",ba.event)))}function y(ia){"fixed"!==ia.parcatsViewModel.arrangement&&(ia.dragDimensionDisplayInd=ia.model.displayInd,ia.initialDragDimensionDisplayInds=ia.parcatsViewModel.model.dimensions.map(function(ra){return ra.displayInd}),ia.dragHasMoved=!1,ia.dragCategoryDisplayInd=null,ba.select(this).selectAll("g.category").select("rect.catrect").each(function(ra){var wa=ba.mouse(this)[0],pa=ba.mouse(this)[1];-2<=wa&&wa<=ra.width+2&&-2<=pa&&pa<=
ra.height+2&&(ia.dragCategoryDisplayInd=ra.model.displayInd,ia.initialDragCategoryDisplayInds=ia.model.categories.map(function(la){return la.displayInd}),ra.model.dragY=ra.y,fa.raiseToTop(this.parentNode),ba.select(this.parentNode).selectAll("rect.bandrect").each(function(la){la.y<pa&&pa<=la.y+la.height&&(ia.potentialClickBand=this)}))}),ia.parcatsViewModel.dragDimension=ia,T.loneUnhover(ia.parcatsViewModel.graphDiv._fullLayout._hoverlayer.node()))}function F(ia){if("fixed"!==ia.parcatsViewModel.arrangement&&
(ia.dragHasMoved=!0,null!==ia.dragDimensionDisplayInd)){var ra=ia.dragDimensionDisplayInd,wa=ra-1,pa=ra+1,la=ia.parcatsViewModel.dimensions[ra];if(null!==ia.dragCategoryDisplayInd){var ka=la.categories[ia.dragCategoryDisplayInd];ka.model.dragY+=ba.event.dy;var na=ka.model.dragY,oa=ka.model.displayInd,sa=la.categories,za=sa[oa-1];sa=sa[oa+1];void 0!==za&&na<za.y+za.height/2&&(ka.model.displayInd=za.model.displayInd,za.model.displayInd=oa);void 0!==sa&&na+ka.height>sa.y+sa.height/2&&(ka.model.displayInd=
sa.model.displayInd,sa.model.displayInd=oa);ia.dragCategoryDisplayInd=ka.model.displayInd}if(null===ia.dragCategoryDisplayInd||"freeform"===ia.parcatsViewModel.arrangement)la.model.dragX=ba.event.x,wa=ia.parcatsViewModel.dimensions[wa],pa=ia.parcatsViewModel.dimensions[pa],void 0!==wa&&la.model.dragX<wa.x+wa.width&&(la.model.displayInd=wa.model.displayInd,wa.model.displayInd=ra),void 0!==pa&&la.model.dragX+la.width>pa.x&&(la.model.displayInd=pa.model.displayInd,pa.model.displayInd=ia.dragDimensionDisplayInd),
ia.dragDimensionDisplayInd=la.model.displayInd;Q(ia.parcatsViewModel);L(ia.parcatsViewModel);H(ia.parcatsViewModel);M(ia.parcatsViewModel)}}function J(ia){if("fixed"!==ia.parcatsViewModel.arrangement&&null!==ia.dragDimensionDisplayInd){ba.select(this).selectAll("text").attr("font-weight","normal");var ra={},wa=K(ia.parcatsViewModel),pa=ia.parcatsViewModel.model.dimensions.map(function(za){return za.displayInd}),la=ia.initialDragDimensionDisplayInds.some(function(za,Ha){return za!==pa[Ha]});la&&pa.forEach(function(za,
Ha){ra["dimensions["+ia.parcatsViewModel.model.dimensions[Ha].containerInd+"].displayindex"]=za});var ka=!1;if(null!==ia.dragCategoryDisplayInd){var na=ia.model.categories.map(function(za){return za.displayInd});if(ka=ia.initialDragCategoryDisplayInds.some(function(za,Ha){return za!==na[Ha]})){var oa=ia.model.categories.slice().sort(function(za,Ha){return za.displayInd-Ha.displayInd}),sa=oa.map(function(za){return za.categoryValue});oa=oa.map(function(za){return za.categoryLabel});ra["dimensions["+
ia.model.containerInd+"].categoryarray"]=[sa];ra["dimensions["+ia.model.containerInd+"].ticktext"]=[oa];ra["dimensions["+ia.model.containerInd+"].categoryorder"]="array"}}-1===ia.parcatsViewModel.hoverinfoItems.indexOf("skip")&&!ia.dragHasMoved&&ia.potentialClickBand&&("color"===ia.parcatsViewModel.hoveron?z(ia.potentialClickBand,"plotly_click",ba.event.sourceEvent):x(ia.potentialClickBand,"plotly_click",ba.event.sourceEvent));ia.model.dragX=null;null!==ia.dragCategoryDisplayInd&&(ia.parcatsViewModel.dimensions[ia.dragDimensionDisplayInd].categories[ia.dragCategoryDisplayInd].model.dragY=
null,ia.dragCategoryDisplayInd=null);ia.dragDimensionDisplayInd=null;ia.parcatsViewModel.dragDimension=null;ia.dragHasMoved=null;ia.potentialClickBand=null;Q(ia.parcatsViewModel);L(ia.parcatsViewModel);ba.transition().duration(300).ease("cubic-in-out").each(function(){H(ia.parcatsViewModel,!0);M(ia.parcatsViewModel,!0)}).each("end",function(){(la||ka)&&S.restyle(ia.parcatsViewModel.graphDiv,ra,[wa])})}}function K(ia){for(var ra,wa=ia.graphDiv._fullData,pa=0;pa<wa.length;pa++)if(ia.key===wa[pa].uid){ra=
pa;break}return ra}function M(ia,ra){void 0===ra&&(ra=!1);ia.pathSelection.data(function(wa){return wa.paths},n);(function(wa){return ra?wa.transition():wa})(ia.pathSelection).attr("d",function(wa){return wa.svgD})}function H(ia,ra){function wa(la){return ra?la.transition():la}void 0===ra&&(ra=!1);ia.dimensionSelection.data(function(la){return la.dimensions},n);var pa=ia.dimensionSelection.selectAll("g.category").data(function(la){return la.categories},n);wa(ia.dimensionSelection).attr("transform",
function(la){return W(la.x,0)});wa(pa).attr("transform",function(la){return W(0,la.y)});pa.select(".dimlabel").text(function(la,ka){return 0===ka?la.parcatsViewModel.model.dimensions[la.model.dimensionInd].dimensionLabel:null});pa.select(".catlabel").attr("text-anchor",function(la){return k(la)?"start":"end"}).attr("x",function(la){return k(la)?la.width+5:-5}).each(function(la){if(k(la)){la=la.width+5;var ka="start"}else la=-5,ka="end";ba.select(this).selectAll("tspan").attr("x",la).attr("text-anchor",
ka)});ia=pa.selectAll("rect.bandrect").data(function(la){return la.bands},n);pa=ia.enter().append("rect").attr("class","bandrect").attr("cursor","move").attr("stroke-opacity",0).attr("fill",function(la){return la.color}).attr("fill-opacity",0);ia.attr("fill",function(la){return la.color}).attr("width",function(la){return la.width}).attr("height",function(la){return la.height}).attr("y",function(la){return la.y});f(pa);ia.each(function(){fa.raiseToTop(this)});ia.exit().remove()}function O(ia,ra,wa){wa=
wa[0];var pa=ra.margin||{l:80,r:80,t:100,b:80},la=wa.trace,ka=la.domain,na=ra.width,oa=Math.floor(na*(ka.x[1]-ka.x[0])),sa=Math.floor(ra.height*(ka.y[1]-ka.y[0]));na=ka.x[0]*na+pa.l;ra=ra.height-ka.y[1]*ra.height+pa.t;ka=la.line.shape;var za="all"===la.hoverinfo?["count","probability"]:(la.hoverinfo||"").split("+");ia={trace:la,key:la.uid,model:wa,x:na,y:ra,width:oa,height:sa,hoveron:la.hoveron,hoverinfoItems:za,arrangement:la.arrangement,bundlecolors:la.bundlecolors,sortpaths:la.sortpaths,labelfont:la.labelfont,
categorylabelfont:la.tickfont,pathShape:ka,dragDimension:null,margin:pa,paths:[],dimensions:[],graphDiv:ia,traceSelection:null,pathSelection:null,dimensionSelection:null};wa.dimensions&&(Q(ia),L(ia));return ia}function I(ia,ra,wa,pa,la){var ka=[],na=[],oa;for(oa=0;oa<wa.length-1;oa++){var sa=V(wa[oa]+ia[oa],ia[oa+1]);ka.push(sa(la));na.push(sa(1-la))}la="M "+ia[0]+","+ra[0];la+="l"+wa[0]+",0 ";for(oa=1;oa<wa.length;oa++)la+="C"+ka[oa-1]+","+ra[oa-1]+" "+na[oa-1]+","+ra[oa]+" "+ia[oa]+","+ra[oa],la+=
"l"+wa[oa]+",0 ";la=la+("l0,"+pa+" l -")+(wa[wa.length-1]+",0 ");for(oa=wa.length-2;0<=oa;oa--)la+="C"+na[oa]+","+(ra[oa+1]+pa)+" "+ka[oa]+","+(ra[oa]+pa)+" "+(ia[oa]+wa[oa])+","+(ra[oa]+pa),la+="l-"+wa[oa]+",0 ";return la+"Z"}function L(ia){function ra(vb){var qb=vb.categoryInds.map(function(zb,La){return ka[La][zb]});return oa.map(function(zb){return qb[zb]})}var wa=ia.dimensions,pa=ia.model,la=wa.map(function(vb){return vb.categories.map(function(qb){return qb.y})}),ka=ia.model.dimensions.map(function(vb){return vb.categories.map(function(qb){return qb.displayInd})}),
na=ia.model.dimensions.map(function(vb){return vb.displayInd}),oa=ia.dimensions.map(function(vb){return vb.model.dimensionInd}),sa=wa.map(function(vb){return vb.x}),za=wa.map(function(vb){return vb.width}),Ha=[];for(Wa in pa.paths)pa.paths.hasOwnProperty(Wa)&&Ha.push(pa.paths[Wa]);Ha.sort(function(vb,qb){var zb=ra(vb),La=ra(qb);"backward"===ia.sortpaths&&(zb.reverse(),La.reverse());zb.push(vb.valueInds[0]);La.push(qb.valueInds[0]);ia.bundlecolors&&(zb.unshift(vb.rawColor),La.unshift(qb.rawColor));
return zb<La?-1:zb>La?1:0});pa=Array(Ha.length);var Wa=wa[0].model.count;wa=wa[0].categories.map(function(vb){return vb.height}).reduce(function(vb,qb){return vb+qb});for(var Za=0;Za<Ha.length;Za++){var bb=Ha[Za];var sb=0<Wa?bb.count/Wa*wa:0;for(var hb=Array(la.length),ub=0;ub<bb.categoryInds.length;ub++){var pb=ka[ub][bb.categoryInds[ub]],Ab=na[ub];hb[Ab]=la[Ab][pb];la[Ab][pb]+=sb;pb=ia.dimensions[Ab].categories[pb];Ab=pb.bands.length;var tb=pb.bands[Ab-1];void 0===tb||bb.rawColor!==tb.rawColor?
(Ab=void 0===tb?0:tb.y+tb.height,pb.bands.push({key:Ab,color:bb.color,rawColor:bb.rawColor,height:sb,width:pb.width,count:bb.count,y:Ab,categoryViewModel:pb,parcatsViewModel:ia})):(pb=pb.bands[Ab-1],pb.height+=sb,pb.count+=bb.count)}ub="hspline"===ia.pathShape?I(sa,hb,za,sb,.5):I(sa,hb,za,sb,0);pa[Za]={key:bb.valueInds[0],model:bb,height:sb,leftXs:sa,topYs:hb,dimWidths:za,svgD:ub,parcatsViewModel:ia}}ia.paths=pa}function Q(ia){var ra=ia.model.dimensions.map(function(la){return{displayInd:la.displayInd,
dimensionInd:la.dimensionInd}});ra.sort(function(la,ka){return la.displayInd-ka.displayInd});var wa=[],pa;for(pa in ra)wa.push(Z(ia,ia.model.dimensions[ra[pa].dimensionInd]));ia.dimensions=wa}function Z(ia,ra){var wa=ia.model.dimensions.length;wa=40+(1<wa?(ia.width-80-16)/(wa-1):0)*ra.displayInd;var pa=[],la=ia.model.maxCats,ka=ra.categories.length,na=ra.count,oa=ia.height-8*(la-1),sa=8*(la-ka)/2,za=ra.categories.map(function(Za){return{displayInd:Za.displayInd,categoryInd:Za.categoryInd}});za.sort(function(Za,
bb){return Za.displayInd-bb.displayInd});for(la=0;la<ka;la++){var Ha=za[la].categoryInd;var Wa=ra.categories[Ha];Ha=0<na?Wa.count/na*oa:0;Wa={key:Wa.valueInds[0],model:Wa,width:16,height:Ha,y:null!==Wa.dragY?Wa.dragY:sa,bands:[],parcatsViewModel:ia};sa=sa+Ha+8;pa.push(Wa)}return{key:ra.dimensionInd,x:null!==ra.dragX?ra.dragX:wa,y:0,width:16,model:ra,categories:pa,parcatsViewModel:ia,dragCategoryDisplayInd:null,dragDimensionDisplayInd:null,initialDragDimensionDisplayInds:null,initialDragCategoryDisplayInds:null,
dragHasMoved:null,potentialClickBand:null}}var ba=b("@plotly/d3"),V=b("d3-interpolate").interpolateNumber,S=b("../../plot_api/plot_api"),T=b("../../components/fx"),fa=b("../../lib"),W=fa.strTranslate,aa=b("../../components/drawing"),ja=b("tinycolor2"),ma=b("../../lib/svg_text_utils");N.exports=function(ia,ra,wa,pa){p(wa,ia,pa,ra)}},{"../../components/drawing":688,"../../components/fx":706,"../../lib":803,"../../lib/svg_text_utils":829,"../../plot_api/plot_api":840,"@plotly/d3":58,"d3-interpolate":171,
tinycolor2:598}],1179:[function(b,N,G){var p=b("./parcats");N.exports=function(n,k,m,a){var g=n._fullLayout,h=g._size;p(n,g._paper,k,{width:h.w,height:h.h,margin:{t:h.t,r:h.r,b:h.b,l:h.l}},m,a)}},{"./parcats":1178}],1180:[function(b,N,G){G=b("../../components/colorscale/attributes");var p=b("../../plots/cartesian/layout_attributes"),n=b("../../plots/font_attributes"),k=b("../../plots/domain").attributes,m=b("../../lib/extend").extendFlat;b=b("../../plot_api/plot_template").templatedArray;N.exports=
{domain:k({name:"parcoords",trace:!0,editType:"plot"}),labelangle:{valType:"angle",dflt:0,editType:"plot"},labelside:{valType:"enumerated",values:["top","bottom"],dflt:"top",editType:"plot"},labelfont:n({editType:"plot"}),tickfont:n({editType:"plot"}),rangefont:n({editType:"plot"}),dimensions:b("dimension",{label:{valType:"string",editType:"plot"},tickvals:m({},p.tickvals,{editType:"plot"}),ticktext:m({},p.ticktext,{editType:"plot"}),tickformat:m({},p.tickformat,{editType:"plot"}),visible:{valType:"boolean",
dflt:!0,editType:"plot"},range:{valType:"info_array",items:[{valType:"number",editType:"plot"},{valType:"number",editType:"plot"}],editType:"plot"},constraintrange:{valType:"info_array",freeLength:!0,dimensions:"1-2",items:[{valType:"any",editType:"plot"},{valType:"any",editType:"plot"}],editType:"plot"},multiselect:{valType:"boolean",dflt:!0,editType:"plot"},values:{valType:"data_array",editType:"calc"},editType:"calc"}),line:m({editType:"calc"},G("line",{colorscaleDflt:"Viridis",autoColorDflt:!1,
editTypeOverride:"calc"}))}},{"../../components/colorscale/attributes":673,"../../lib/extend":793,"../../plot_api/plot_template":843,"../../plots/cartesian/layout_attributes":869,"../../plots/domain":882,"../../plots/font_attributes":883}],1181:[function(b,N,G){function p(O,I,L,Q){a:{for(var Z=0;Z<Q.length;Z++)if(L>=Q[Z][0]&&L<=Q[Z][1]){Q=!0;break a}Q=!1}if(Q)return L;O=O?-1:1;var ba=0;Q=I.length-1;0>O&&(Z=ba,ba=Q,Q=Z);for(var V=Z=I[ba];O*ba<O*Q;ba+=O){var S=ba+O,T=I[S];if(O*L<O*(Z*(1-H)+T*H))return Z*
(1-M)+V*M;if(O*L<O*T||S===Q)return T*(1-M)+Z*M;V=Z;Z=T}}function n(O){O.attr("x",-C.bar.captureWidth/2).attr("width",C.bar.captureWidth)}function k(O){O.attr("visibility","visible").style("visibility","visible").attr("fill","yellow").attr("opacity",0)}function m(O){if(!O.brush.filterSpecified)return"0,"+O.height;for(var I=a(O.brush.filter.getConsolidated(),O.height),L=[0],Q,Z,ba=I.length?I[0][0]:null,V=0;V<I.length;V++)Q=I[V],Z=Q[1]-Q[0],L.push(ba),L.push(Z),Z=V+1,Z<I.length&&(ba=I[Z][0]-Q[1]);L.push(O.height);
return L}function a(O,I){return O.map(function(L){return L.map(function(Q){return Math.max(0,Q*I)}).sort(J)})}function g(){v.select(document.body).style("cursor",null)}function h(O){O.attr("stroke-dasharray",m)}function r(O,I){O=v.select(O).selectAll(".highlight, .highlight-shadow");I=I?O.transition().duration(C.bar.snapDuration).each("end",I):O;h(I)}function l(O,I){var L=O.brush,Q={};if(L.filterSpecified){var Z=O.height;L=L.filter.getConsolidated();var ba=a(L,Z),V=NaN,S=NaN,T=NaN;for(Z=0;Z<=ba.length;Z++){var fa=
ba[Z];if(fa&&fa[0]<=I&&I<=fa[1]){V=Z;break}else if(S=Z?Z-1:NaN,fa&&fa[0]>I){T=Z;break}}Z=V;isNaN(Z)&&(Z=isNaN(S)||isNaN(T)?isNaN(S)?T:S:I-ba[S][1]<ba[T][0]-I?S:T);isNaN(Z)||(ba=ba[Z],S=C.bar.handleHeight,S=I>ba[1]+S||I<ba[0]-S?void 0:I>=.9*ba[1]+.1*ba[0]?"n":I<=.9*ba[0]+.1*ba[1]?"s":"ns",S&&(Q.interval=L[Z],Q.intervalPix=ba,Q.region=S))}if(O.ordinal&&!Q.region)for(L=O.unitTickvals,O=O.unitToPaddedPx.invert(I),Z=0;Z<L.length;Z++)if(I=[.25*L[Math.max(Z-1,0)]+.75*L[Z],.25*L[Math.min(Z+1,L.length-1)]+
.75*L[Z]],O>=I[0]&&O<=I[1]){Q.clickableOrdinalRange=I;break}return Q}function c(O,I){v.event.sourceEvent.stopPropagation();O=I.height-v.mouse(O)[1]-2*C.verticalPadding;var L=I.unitToPaddedPx.invert(O),Q=I.brush,Z=l(I,O),ba=Z.interval,V=Q.svgBrush;V.wasDragged=!1;V.grabbingBar="ns"===Z.region;if(V.grabbingBar){var S=ba.map(I.unitToPaddedPx);V.grabPoint=O-S[0]-C.verticalPadding;V.barLength=S[1]-S[0]}V.clickableOrdinalRange=Z.clickableOrdinalRange;V.stayingIntervals=I.multiselect&&Q.filterSpecified?
Q.filter.getConsolidated():[];ba&&(V.stayingIntervals=V.stayingIntervals.filter(function(T){return T[0]!==ba[0]&&T[1]!==ba[1]}));V.startExtent=Z.region?ba["s"===Z.region?1:0]:L;I.parent.inBrushDrag=!0;V.brushStartCallback()}function d(O,I){v.event.sourceEvent.stopPropagation();var L=I.height-v.mouse(O)[1]-2*C.verticalPadding,Q=I.brush.svgBrush;Q.wasDragged=!0;Q._dragging=!0;Q.newExtent=Q.grabbingBar?[L-Q.grabPoint,L+Q.barLength-Q.grabPoint].map(I.unitToPaddedPx.invert):[Q.startExtent,I.unitToPaddedPx.invert(L)].sort(J);
I.brush.filterSpecified=!0;Q.extent=Q.stayingIntervals.concat([Q.newExtent]);Q.brushCallback(I);r(O.parentNode)}function e(O,I){var L=I.brush,Q=L.filter,Z=L.svgBrush;Z._dragging||(f(O,I),d(O,I),I.brush.svgBrush.wasDragged=!1);Z._dragging=!1;v.event.sourceEvent.stopPropagation();var ba=Z.grabbingBar;Z.grabbingBar=!1;Z.grabLocation=void 0;I.parent.inBrushDrag=!1;g();if(Z.wasDragged)if(ba=function(){Q.set(Q.getConsolidated())},I.ordinal){var V=I.unitTickvals;V[V.length-1]<V[0]&&V.reverse();Z.newExtent=
[p(0,V,Z.newExtent[0],Z.stayingIntervals),p(1,V,Z.newExtent[1],Z.stayingIntervals)];V=Z.newExtent[1]>Z.newExtent[0];Z.extent=Z.stayingIntervals.concat(V?[Z.newExtent]:[]);Z.extent.length||z(L);Z.brushCallback(I);V?r(O.parentNode,ba):(ba(),r(O.parentNode))}else ba();else Z.wasDragged=void 0,Z.clickableOrdinalRange?L.filterSpecified&&I.multiselect?Z.extent.push(Z.clickableOrdinalRange):(Z.extent=[Z.clickableOrdinalRange],L.filterSpecified=!0):ba?(Z.extent=Z.stayingIntervals,0===Z.extent.length&&z(L)):
z(L),Z.brushCallback(I),r(O.parentNode);Z.brushEndCallback(L.filterSpecified?Q.getConsolidated():[])}function f(O,I){O=I.height-v.mouse(O)[1]-2*C.verticalPadding;I=l(I,O);O="crosshair";I.clickableOrdinalRange?O="pointer":I.region&&(O=I.region+"-resize");v.select(document.body).style("cursor",O)}function q(O){O.on("mousemove",function(I){v.event.preventDefault();I.parent.inBrushDrag||f(this,I)}).on("mouseleave",function(I){I.parent.inBrushDrag||g()}).call(v.behavior.drag().on("dragstart",function(I){c(this,
I)}).on("drag",function(I){d(this,I)}).on("dragend",function(I){e(this,I)}))}function t(O,I){return O[0]-I[0]}function w(O,I){var L=O.selectAll(".background").data(F);L.enter().append("rect").classed("background",!0).call(n).call(k).style("pointer-events","auto").attr("transform",K(0,C.verticalPadding));L.call(q).attr("height",function(Q){return Q.height-C.verticalPadding});L=O.selectAll(".highlight-shadow").data(F);L.enter().append("line").classed("highlight-shadow",!0).attr("x",-C.bar.width/2).attr("stroke-width",
C.bar.width+C.bar.strokeWidth).attr("stroke",I).attr("opacity",C.bar.strokeOpacity).attr("stroke-linecap","butt");L.attr("y1",function(Q){return Q.height}).call(h);O=O.selectAll(".highlight").data(F);O.enter().append("line").classed("highlight",!0).attr("x",-C.bar.width/2).attr("stroke-width",C.bar.width-C.bar.strokeWidth).attr("stroke",C.bar.fillColor).attr("opacity",C.bar.fillOpacity).attr("stroke-linecap","butt");O.attr("y1",function(Q){return Q.height}).call(h)}function x(O){return O.svgBrush.extent.map(function(I){return I.slice()})}
function z(O){O.filterSpecified=!1;O.svgBrush.extent=[[-Infinity,Infinity]]}function B(O){return function(I){I=I.brush;var L=x(I).slice();I.filter.set(L);O()}}function A(O){O=O.slice();for(var I=[],L,Q=O.shift();Q;){for(L=Q.slice();(Q=O.shift())&&Q[0]<=L[1];)L[1]=Math.max(L[1],Q[1]);I.push(L)}1===I.length&&I[0][0]>I[0][1]&&(I=[]);return I}function D(){var O=[],I,L;return{set:function(Q){O=Q.map(function(Z){return Z.slice().sort(J)}).sort(t);1===O.length&&-Infinity===O[0][0]&&Infinity===O[0][1]&&(O=
[[0,-1]]);I=A(O);L=O.reduce(function(Z,ba){return[Math.min(Z[0],ba[0]),Math.max(Z[1],ba[1])]},[Infinity,-Infinity])},get:function(){return O.slice()},getConsolidated:function(){return I},getBounds:function(){return L}}}var C=b("./constants"),v=b("@plotly/d3"),y=b("../../lib/gup").keyFun,F=b("../../lib/gup").repeat,J=b("../../lib").sorterAsc,K=b("../../lib").strTranslate,M=C.bar.snapRatio,H=C.bar.snapClose;N.exports={makeBrush:function(O,I,L,Q,Z,ba){O=D();O.set(L);return{filter:O,filterSpecified:I,
svgBrush:{extent:[],brushStartCallback:Q,brushCallback:B(Z),brushEndCallback:ba}}},ensureAxisBrush:function(O,I){O=O.selectAll("."+C.cn.axisBrush).data(F,y);O.enter().append("g").classed(C.cn.axisBrush,!0);w(O,I)},cleanRanges:function(O,I){Array.isArray(O[0])?(O=O.map(function(Q){return Q.sort(J)}),O=I.multiselect?A(O.sort(t)):[O[0]]):O=[O.sort(J)];if(I.tickvals){var L=I.tickvals.slice().sort(J);O=O.map(function(Q){Q=[p(0,L,Q[0],[]),p(1,L,Q[1],[])];if(Q[1]>Q[0])return Q}).filter(function(Q){return Q});
if(!O.length)return}return 1<O.length?O:O[0]}}},{"../../lib":803,"../../lib/gup":800,"./constants":1184,"@plotly/d3":58}],1182:[function(b,N,G){var p=b("@plotly/d3"),n=b("../../plots/get_data").getModuleCalcData,k=b("./plot"),m=b("../../constants/xmlns_namespaces");G.name="parcoords";G.plot=function(a){var g=n(a.calcdata,"parcoords")[0];g.length&&k(a,g)};G.clean=function(a,g,h,r){a=r._has&&r._has("parcoords");g=g._has&&g._has("parcoords");a&&!g&&(r._paperdiv.selectAll(".parcoords").remove(),r._glimages.selectAll("*").remove())};
G.toSVG=function(a){var g=a._fullLayout._glimages,h=p.select(a).selectAll(".svg-container");h.filter(function(r,l){return l===h.size()-1}).selectAll(".gl-canvas-context, .gl-canvas-focus").each(function(){var r=this.toDataURL("image/png");g.append("svg:image").attr({xmlns:m.svg,"xlink:href":r,preserveAspectRatio:"none",x:0,y:0,width:this.style.width,height:this.style.height})});window.setTimeout(function(){p.selectAll("#filterBarPattern").attr("id","filterBarPattern")},60)}},{"../../constants/xmlns_namespaces":780,
"../../plots/get_data":891,"./plot":1191,"@plotly/d3":58}],1183:[function(b,N,G){var p=b("../../lib").isArrayOrTypedArray,n=b("../../components/colorscale"),k=b("../../lib/gup").wrap;N.exports=function(m,a){if(n.hasColorscale(a,"line")&&p(a.line.color)){var g=a.line.color;var h=n.extractOpts(a.line).colorscale;n.calc(m,a,{vals:g,containerStr:"line",cLetter:"c"})}else{m=a._length;g=Array(m);for(h=0;h<m;h++)g[h]=.5;h=[[0,a.line.color],[1,a.line.color]]}return k({lineColor:g,cscale:h})}},{"../../components/colorscale":678,
"../../lib":803,"../../lib/gup":800}],1184:[function(b,N,G){N.exports={maxDimensionCount:60,overdrag:45,verticalPadding:2,tickDistance:50,canvasPixelRatio:1,blockLineCount:5E3,layers:["contextLineLayer","focusLineLayer","pickLineLayer"],axisTitleOffset:28,axisExtentOffset:10,deselectedLineColor:"#777",bar:{width:4,captureWidth:10,fillColor:"magenta",fillOpacity:1,snapDuration:150,snapRatio:.25,snapClose:.01,strokeOpacity:1,strokeWidth:1,handleHeight:8,handleOpacity:1,handleOverlap:0},cn:{axisExtentText:"axis-extent-text",
parcoordsLineLayers:"parcoords-line-layers",parcoordsLineLayer:"parcoords-lines",parcoords:"parcoords",parcoordsControlView:"parcoords-control-view",yAxis:"y-axis",axisOverlays:"axis-overlays",axis:"axis",axisHeading:"axis-heading",axisTitle:"axis-title",axisExtent:"axis-extent",axisExtentTop:"axis-extent-top",axisExtentTopText:"axis-extent-top-text",axisExtentBottom:"axis-extent-bottom",axisExtentBottomText:"axis-extent-bottom-text",axisBrush:"axis-brush"},id:{filterBarPattern:"filter-bar-pattern"}}},
{}],1185:[function(b,N,G){function p(f,q,t,w,x){var z=x("line.color",t);if(m(f,"line")&&k.isArrayOrTypedArray(z)){if(z.length)return x("line.colorscale"),a(f,q,w,x,{prefix:"line.",cLetter:"c"}),z.length;q.line.color=t}return Infinity}function n(f,q,t,w){function x(B,A){return k.coerce(f,q,l.dimensions,B,A)}t=x("values");var z=x("visible");t&&t.length||(z=q.visible=!1);z&&(x("label"),x("tickvals"),x("ticktext"),x("tickformat"),t=x("range"),q._ax={_id:"y",type:"linear",showexponent:"all",exponentformat:"B",
range:t},r.setConvert(q._ax,w.layout),x("multiselect"),w=x("constraintrange"))&&(q.constraintrange=c.cleanRanges(w,q))}var k=b("../../lib"),m=b("../../components/colorscale/helpers").hasColorscale,a=b("../../components/colorscale/defaults"),g=b("../../plots/domain").defaults,h=b("../../plots/array_container_defaults"),r=b("../../plots/cartesian/axes"),l=b("./attributes"),c=b("./axisbrush"),d=b("./constants").maxDimensionCount,e=b("./merge_length");N.exports=function(f,q,t,w){function x(B,A){return k.coerce(f,
q,l,B,A)}var z=f.dimensions;Array.isArray(z)&&z.length>d&&(k.log("parcoords traces support up to "+d+" dimensions at the moment"),z.splice(d));z=h(f,q,{name:"dimensions",layout:w,handleItemDefaults:n});t=p(f,q,t,w,x);g(q,w,x);Array.isArray(z)&&z.length||(q.visible=!1);e(q,z,"values",t);w={family:w.font.family,size:Math.round(w.font.size/1.2),color:w.font.color};k.coerceFont(x,"labelfont",w);k.coerceFont(x,"tickfont",w);k.coerceFont(x,"rangefont",w);x("labelangle");x("labelside")}},{"../../components/colorscale/defaults":676,
"../../components/colorscale/helpers":677,"../../lib":803,"../../plots/array_container_defaults":849,"../../plots/cartesian/axes":854,"../../plots/domain":882,"./attributes":1180,"./axisbrush":1181,"./constants":1184,"./merge_length":1189}],1186:[function(b,N,G){var p=b("../../lib").isTypedArray;G.convertTypedArray=function(n){return p(n)?Array.prototype.slice.call(n):n};G.isOrdinal=function(n){return!!n.tickvals};G.isVisible=function(n){return n.visible||!("visible"in n)}},{"../../lib":803}],1187:[function(b,
N,G){N.exports={attributes:b("./attributes"),supplyDefaults:b("./defaults"),calc:b("./calc"),plot:b("./plot"),colorbar:{container:"line",min:"cmin",max:"cmax"},moduleType:"trace",name:"parcoords",basePlotModule:b("./base_plot"),categories:["gl","regl","noOpacity","noHover"],meta:{}}},{"./attributes":1180,"./base_plot":1182,"./calc":1183,"./defaults":1185,"./plot":1191}],1188:[function(b,N,G){function p(x,z,B,A,D){var C=x._gl;C.enable(C.SCISSOR_TEST);C.scissor(z,B,A,D);x.clear({color:[0,0,0,0],depth:1})}
function n(x,z,B,A,D,C){function v(F){var J=Math.min(A,D-F*A);0===F&&(window.cancelAnimationFrame(B.currentRafs[y]),delete B.currentRafs[y],p(x,C.scissorX,C.scissorY,C.scissorWidth,C.viewBoxSize[1]));B.clearOnly||(C.count=2*J,C.offset=2*F*A,z(C),F*A+J<D&&(B.currentRafs[y]=window.requestAnimationFrame(function(){v(F+1)})),B.drawCompleted=!1)}var y=C.key;B.drawCompleted||(x.read({x:0,y:0,width:1,height:1,data:q}),B.drawCompleted=!0);v(0)}function k(x,z){for(var B=Array(256),A=0;256>A;A++)B[A]=x(A/255).concat(z);
return B}function m(x,z,B){for(var A=Array(x*(e+4)),D=0,C=0;C<x;C++){for(var v=0;v<e;v++)A[D++]=v<z.length?z[v].paddedUnitValues[C]:.5;A[D++]=(C>>>16)%256/255;A[D++]=(C>>>8)%256/255;A[D++]=(C>>>0)%256/255;A[D++]=Math.max(1E-6,Math.min(.999999,B[C]))}return A}function a(x){x="0"+x;return x.substr(x.length-2)}function g(x){return x<e?"p"+a(x+1)+"_"+a(x+4):"colors"}function h(x,z,B){for(var A=0;A<=e;A+=4){for(var D=x,C=D[g(A)],v=A/4,y=z,F=B,J=Array(8*y),K=0,M=0;M<y;M++)for(var H=0;2>H;H++)for(var O=
0;4>O;O++){var I=4*v+O,L=F[64*M+I];63===I&&0===H&&(L*=-1);J[K++]=L}C.call(D,J)}}function r(x){for(var z={},B=0;B<=e;B+=4)z[g(B)]=x.buffer({usage:"dynamic",type:"float",data:new Uint8Array(0)});return z}function l(x){var z=Math.max(0,Math.floor(2047*x[0]),0);x=Math.min(2047,Math.ceil(2047*x[1]),2047);return[Math.min(z,x),Math.max(z,x)]}G=b("glslify");var c=G(["precision highp float;\n#define GLSLIFY 1\n\nvarying vec4 fragColor;\n\nattribute vec4 p01_04, p05_08, p09_12, p13_16,\n               p17_20, p21_24, p25_28, p29_32,\n               p33_36, p37_40, p41_44, p45_48,\n               p49_52, p53_56, p57_60, colors;\n\nuniform mat4 dim0A, dim1A, dim0B, dim1B, dim0C, dim1C, dim0D, dim1D,\n             loA, hiA, loB, hiB, loC, hiC, loD, hiD;\n\nuniform vec2 resolution, viewBoxPos, viewBoxSize;\nuniform sampler2D mask, palette;\nuniform float maskHeight;\nuniform float drwLayer; // 0: context, 1: focus, 2: pick\nuniform vec4 contextColor;\n\nbool isPick    \x3d (drwLayer \x3e 1.5);\nbool isContext \x3d (drwLayer \x3c 0.5);\n\nconst vec4 ZEROS \x3d vec4(0.0, 0.0, 0.0, 0.0);\nconst vec4 UNITS \x3d vec4(1.0, 1.0, 1.0, 1.0);\n\nfloat val(mat4 p, mat4 v) {\n    return dot(matrixCompMult(p, v) * UNITS, UNITS);\n}\n\nfloat axisY(float ratio, mat4 A, mat4 B, mat4 C, mat4 D) {\n    float y1 \x3d val(A, dim0A) + val(B, dim0B) + val(C, dim0C) + val(D, dim0D);\n    float y2 \x3d val(A, dim1A) + val(B, dim1B) + val(C, dim1C) + val(D, dim1D);\n    return y1 * (1.0 - ratio) + y2 * ratio;\n}\n\nint iMod(int a, int b) {\n    return a - b * (a / b);\n}\n\nbool fOutside(float p, float lo, float hi) {\n    return (lo \x3c hi) \x26\x26 (lo \x3e p || p \x3e hi);\n}\n\nbool vOutside(vec4 p, vec4 lo, vec4 hi) {\n    return (\n        fOutside(p[0], lo[0], hi[0]) ||\n        fOutside(p[1], lo[1], hi[1]) ||\n        fOutside(p[2], lo[2], hi[2]) ||\n        fOutside(p[3], lo[3], hi[3])\n    );\n}\n\nbool mOutside(mat4 p, mat4 lo, mat4 hi) {\n    return (\n        vOutside(p[0], lo[0], hi[0]) ||\n        vOutside(p[1], lo[1], hi[1]) ||\n        vOutside(p[2], lo[2], hi[2]) ||\n        vOutside(p[3], lo[3], hi[3])\n    );\n}\n\nbool outsideBoundingBox(mat4 A, mat4 B, mat4 C, mat4 D) {\n    return mOutside(A, loA, hiA) ||\n           mOutside(B, loB, hiB) ||\n           mOutside(C, loC, hiC) ||\n           mOutside(D, loD, hiD);\n}\n\nbool outsideRasterMask(mat4 A, mat4 B, mat4 C, mat4 D) {\n    mat4 pnts[4];\n    pnts[0] \x3d A;\n    pnts[1] \x3d B;\n    pnts[2] \x3d C;\n    pnts[3] \x3d D;\n\n    for(int i \x3d 0; i \x3c 4; ++i) {\n        for(int j \x3d 0; j \x3c 4; ++j) {\n            for(int k \x3d 0; k \x3c 4; ++k) {\n                if(0 \x3d\x3d iMod(\n                    int(255.0 * texture2D(mask,\n                        vec2(\n                            (float(i * 2 + j / 2) + 0.5) / 8.0,\n                            (pnts[i][j][k] * (maskHeight - 1.0) + 1.0) / maskHeight\n                        ))[3]\n                    ) / int(pow(2.0, float(iMod(j * 4 + k, 8)))),\n                    2\n                )) return true;\n            }\n        }\n    }\n    return false;\n}\n\nvec4 position(bool isContext, float v, mat4 A, mat4 B, mat4 C, mat4 D) {\n    float x \x3d 0.5 * sign(v) + 0.5;\n    float y \x3d axisY(x, A, B, C, D);\n    float z \x3d 1.0 - abs(v);\n\n    z +\x3d isContext ? 0.0 : 2.0 * float(\n        outsideBoundingBox(A, B, C, D) ||\n        outsideRasterMask(A, B, C, D)\n    );\n\n    return vec4(\n        2.0 * (vec2(x, y) * viewBoxSize + viewBoxPos) / resolution - 1.0,\n        z,\n        1.0\n    );\n}\n\nvoid main() {\n    mat4 A \x3d mat4(p01_04, p05_08, p09_12, p13_16);\n    mat4 B \x3d mat4(p17_20, p21_24, p25_28, p29_32);\n    mat4 C \x3d mat4(p33_36, p37_40, p41_44, p45_48);\n    mat4 D \x3d mat4(p49_52, p53_56, p57_60, ZEROS);\n\n    float v \x3d colors[3];\n\n    gl_Position \x3d position(isContext, v, A, B, C, D);\n\n    fragColor \x3d\n        isContext ? vec4(contextColor) :\n        isPick ? vec4(colors.rgb, 1.0) : texture2D(palette, vec2(abs(v), 0.5));\n}\n"]),
d=G(["precision highp float;\n#define GLSLIFY 1\n\nvarying vec4 fragColor;\n\nvoid main() {\n    gl_FragColor \x3d fragColor;\n}\n"]),e=b("./constants").maxDimensionCount,f=b("../../lib"),q=new Uint8Array(4),t=new Uint8Array(4),w={shape:[256,1],format:"rgba",type:"uint8",mag:"nearest",min:"nearest"};N.exports=function(x,z){function B(Z){F=Z.model;J=Z.viewModel;K=J.dimensions.slice();M=K[0]?K[0].values.length:0;var ba=F.lines;Z=D?ba.color.map(function(V,S){return S/ba.color.length}):ba.color;Z=m(M,
K,Z);h(H,M,Z);A||D||(I=C.texture(f.extendFlat({data:k(F.unitToColor,255)},w)))}var A=z.context,D=z.pick,C=z.regl,v=C._gl;v=v.getParameter(v.ALIASED_LINE_WIDTH_RANGE);v=Math.max(v[0],Math.min(v[1],z.viewModel.plotGlPixelRatio));var y={currentRafs:{},drawCompleted:!0,clearOnly:!1},F,J,K,M,H=r(C),O,I=C.texture(w),L=[];B(z);var Q=C({profile:!1,blend:{enable:A,func:{srcRGB:"src alpha",dstRGB:"one minus src alpha",srcAlpha:1,dstAlpha:1},equation:{rgb:"add",alpha:"add"},color:[0,0,0,0]},depth:{enable:!A,
mask:!0,func:"less",range:[0,1]},cull:{enable:!0,face:"back"},scissor:{enable:!0,box:{x:C.prop("scissorX"),y:C.prop("scissorY"),width:C.prop("scissorWidth"),height:C.prop("scissorHeight")}},viewport:{x:C.prop("viewportX"),y:C.prop("viewportY"),width:C.prop("viewportWidth"),height:C.prop("viewportHeight")},dither:!1,vert:c,frag:d,primitive:"lines",lineWidth:v,attributes:H,uniforms:{resolution:C.prop("resolution"),viewBoxPos:C.prop("viewBoxPos"),viewBoxSize:C.prop("viewBoxSize"),dim0A:C.prop("dim0A"),
dim1A:C.prop("dim1A"),dim0B:C.prop("dim0B"),dim1B:C.prop("dim1B"),dim0C:C.prop("dim0C"),dim1C:C.prop("dim1C"),dim0D:C.prop("dim0D"),dim1D:C.prop("dim1D"),loA:C.prop("loA"),hiA:C.prop("hiA"),loB:C.prop("loB"),hiB:C.prop("hiB"),loC:C.prop("loC"),hiC:C.prop("hiC"),loD:C.prop("loD"),hiD:C.prop("hiD"),palette:I,contextColor:C.prop("contextColor"),mask:C.prop("maskTexture"),drwLayer:C.prop("drwLayer"),maskHeight:C.prop("maskHeight")},offset:C.prop("offset"),count:C.prop("count")});return{render:function(Z,
ba,V){var S=Z.length,T,fa=Infinity,W=-Infinity;for(T=0;T<S;T++){if(Z[T].dim0.canvasX<fa){fa=Z[T].dim0.canvasX;var aa=T}if(Z[T].dim1.canvasX>W){W=Z[T].dim1.canvasX;var ja=T}}0===S&&p(C,0,0,F.canvasWidth,F.canvasHeight);var ma=A,ia;T=[[],[]];for(W=0;64>W;W++)fa=!ma&&W<K.length?K[W].brush.filter.getBounds():[-Infinity,Infinity],T[0][W]=fa[0],T[1][W]=fa[1];var ra=Array(16384);for(fa=0;16384>fa;fa++)ra[fa]=255;if(!ma)for(fa=0;fa<K.length;fa++){W=fa%8;ma=(fa-W)/8;var wa=Math.pow(2,W),pa=K[fa].brush.filter.get();
if(!(2>pa.length)){var la=l(pa[0])[1];for(ia=1;ia<pa.length;ia++){var ka=l(pa[ia]);for(W=la+1;W<ka[0];W++)ra[8*W+ma]&=~wa;la=Math.max(la,ka[1])}}}fa={shape:[8,2048],format:"alpha",type:"uint8",mag:"nearest",min:"nearest",data:ra};O?O(fa):O=C.texture(fa);fa={maskTexture:O,maskHeight:2048,loA:T[0].slice(0,16),loB:T[0].slice(16,32),loC:T[0].slice(32,48),loD:T[0].slice(48,64),hiA:T[1].slice(0,16),hiB:T[1].slice(16,32),hiC:T[1].slice(32,48),hiD:T[1].slice(48,64)};for(T=0;T<S;T++){var na=Z[T];wa=na.dim0.crossfilterDimensionIndex;
pa=na.dim1.crossfilterDimensionIndex;la=na.canvasX;ka=na.canvasY;W=la+na.panelSizeX;var oa=na.plotGlPixelRatio;if(ba||!L[wa]||L[wa][0]!==la||L[wa][1]!==W){L[wa]=[la,W];W=F;ra=aa;ma=ja;ia=T;var sa=na.panelSizeX,za=na.panelSizeY;na=na.dim0.crossfilterDimensionIndex;var Ha=A?0:D?2:1,Wa=fa,Za=oa;oa=[[],[]];for(var bb=0;64>bb;bb++)oa[0][bb]=bb===wa?1:0,oa[1][bb]=bb===pa?1:0;la*=Za;ka*=Za;sa*=Za;za*=Za;bb=W.lines.canvasOverdrag*Za;var sb=W.domain,hb=W.canvasWidth*Za,ub=W.canvasHeight*Za,pb=W.pad.l*Za,Ab=
W.pad.b*Za,tb=W.layoutHeight*Za;Za*=W.layoutWidth;var vb=W.deselectedLines.color;W=f.extendFlat({key:na,resolution:[hb,ub],viewBoxPos:[la+bb,ka],viewBoxSize:[sa,za],i0:wa,i1:pa,dim0A:oa[0].slice(0,16),dim0B:oa[0].slice(16,32),dim0C:oa[0].slice(32,48),dim0D:oa[0].slice(48,64),dim1A:oa[1].slice(0,16),dim1B:oa[1].slice(16,32),dim1C:oa[1].slice(32,48),dim1D:oa[1].slice(48,64),drwLayer:Ha,contextColor:[vb[0]/255,vb[1]/255,vb[2]/255,1>vb[3]?vb[3]:Math.max(1/255,Math.pow(1/W.lines.color.length,1/3))],scissorX:(ia===
ra?0:la+bb)+(pb-bb)+Za*sb.x[0],scissorWidth:(ia===ma?hb-la+bb:sa+.5)+(ia===ra?la+bb:0),scissorY:ka+Ab+tb*sb.y[0],scissorHeight:za,viewportX:pb-bb+Za*sb.x[0],viewportY:Ab+tb*sb.y[0],viewportWidth:hb,viewportHeight:ub},Wa);y.clearOnly=V;n(C,Q,y,ba?F.lines.blockLineCount:M,M,W)}}},readPixel:function(Z,ba){C.read({x:Z,y:ba,width:1,height:1,data:t});return t},readPixels:function(Z,ba,V,S){var T=new Uint8Array(4*V*S);C.read({x:Z,y:ba,width:V,height:S,data:T});return T},destroy:function(){x.style["pointer-events"]=
"none";I.destroy();O&&O.destroy();for(var Z in H)H[Z].destroy()},update:B}}},{"../../lib":803,"./constants":1184,glslify:442}],1189:[function(b,N,G){N.exports=function(p,n,k,m){m||(m=Infinity);var a;for(a=0;a<n.length;a++){var g=n[a];g.visible&&(m=Math.min(m,g[k].length))}Infinity===m&&(m=0);p._length=m;for(a=0;a<n.length;a++)g=n[a],g.visible&&(g._length=m);return m}},{}],1190:[function(b,N,G){function p(V,S){return k(A.aggNums(Math.min,null,V,S),A.aggNums(Math.max,null,V,S))}function n(V){var S=
V.range;return S?k(S[0],S[1]):p(V.values,V._length)}function k(V,S){if(isNaN(V)||!isFinite(V))V=0;if(isNaN(S)||!isFinite(S))S=0;V===S&&(0===V?(--V,S+=1):(V*=.9,S*=1.1));return[V,S]}function m(V,S){return S?function(T,fa){fa=S[fa];return null===fa||void 0===fa?V(T):fa}:V}function a(V,S,T,fa,W){var aa=n(T);return fa?B.scale.ordinal().domain(fa.map(m(D(T.tickformat),W))).range(fa.map(function(ja){return V-S+(ja-aa[0])/(aa[1]-aa[0])*(2*S-V)})):B.scale.linear().domain(aa).range([V-S,S])}function g(V,S){return B.scale.linear().range([S,
V-S])}function h(V,S){return B.scale.linear().domain(n(V)).range([S,1-S])}function r(V){if(V.tickvals){var S=n(V);return B.scale.ordinal().domain(V.tickvals).range(V.tickvals.map(function(T){return(T-S[0])/(S[1]-S[0])}))}}function l(V){var S=V.map(function(aa){return aa[0]}),T=V.map(function(aa){aa=C(aa[1]);return B.rgb("rgb("+aa[0]+","+aa[1]+","+aa[2]+")")}),fa=function(aa){return function(ja){return ja[aa]}},W=["r","g","b"].map(function(aa){return B.scale.linear().clamp(!0).domain(S).range(T.map(fa(aa)))});
return function(aa){return W.map(function(ja){return ja(aa)})}}function c(V){return V.dimensions.some(function(S){return S.brush.filterSpecified})}function d(V,S,T){var fa=I(S),W=fa.trace,aa=L.convertTypedArray(fa.lineColor),ja=W.line;S={color:C(Q.deselectedLineColor)};var ma=M.extractOpts(ja);fa=ma.reversescale?M.flipScale(fa.cscale):fa.cscale;var ia=W.domain,ra=W.dimensions,wa=V.width,pa=W.labelangle,la=W.labelside,ka=W.labelfont,na=W.tickfont,oa=W.rangefont;W=A.extendDeepNoArrays({},ja,{color:aa.map(B.scale.linear().domain(n({values:aa,
range:[ma.min,ma.max],_length:W._length}))),blockLineCount:Q.blockLineCount,canvasOverdrag:Q.overdrag*Q.canvasPixelRatio});aa=V.margin||{l:80,r:80,t:100,b:80};ja=Math.floor(wa*(ia.x[1]-ia.x[0]));ma=Math.floor(V.height*(ia.y[1]-ia.y[0]));return{key:T,colCount:ra.filter(L.isVisible).length,dimensions:ra,tickDistance:Q.tickDistance,unitToColor:l(fa),lines:W,deselectedLines:S,labelAngle:pa,labelSide:la,labelFont:ka,tickFont:na,rangeFont:oa,layoutWidth:wa,layoutHeight:V.height,domain:ia,translateX:ia.x[0]*
wa,translateY:V.height-ia.y[1]*V.height,pad:aa,canvasWidth:ja*Q.canvasPixelRatio+2*W.canvasOverdrag,canvasHeight:ma*Q.canvasPixelRatio,width:ja,height:ma,canvasPixelRatio:Q.canvasPixelRatio}}function e(V,S,T){var fa=T.width,W=T.height,aa=T.dimensions,ja=T.canvasPixelRatio,ma=function(la){return fa*la/Math.max(1,T.colCount-1)},ia=Q.verticalPadding/W,ra=g(W,Q.verticalPadding),wa={key:T.key,xScale:ma,model:T,inBrushDrag:!1},pa={};wa.dimensions=aa.filter(L.isVisible).map(function(la,ka){function na(pb,
Ab){return{val:pb,text:sb[Ab]}}function oa(pb,Ab){return pb.val-Ab.val}var sa=h(la,ia),za=pa[la.label];pa[la.label]=(za||0)+1;za=la.label+(za?"__"+za:"");var Ha=la.constraintrange,Wa=Ha&&Ha.length;Wa&&!Array.isArray(Ha[0])&&(Ha=[Ha]);Ha=Wa?Ha.map(function(pb){return pb.map(sa)}):[[-Infinity,Infinity]];var Za=la.values;Za.length>la._length&&(Za=Za.slice(0,la._length));var bb=la.tickvals;if(Array.isArray(bb)&&bb.length){var sb=la.ticktext;Array.isArray(sb)&&sb.length?sb.length>bb.length?sb=sb.slice(0,
bb.length):bb.length>sb.length&&(bb=bb.slice(0,sb.length)):sb=bb.map(D(la.tickformat));for(var hb=1;hb<bb.length;hb++)if(bb[hb]<bb[hb-1]){hb=bb.map(na).sort(oa);for(var ub=0;ub<bb.length;ub++)bb[ub]=hb[ub].val,sb[ub]=hb[ub].text;break}}else bb=void 0;Za=L.convertTypedArray(Za);return{key:za,label:la.label,tickFormat:la.tickformat,tickvals:bb,ticktext:sb,ordinal:L.isOrdinal(la),multiselect:la.multiselect,xIndex:ka,crossfilterDimensionIndex:ka,visibleIndex:la._index,height:W,values:Za,paddedUnitValues:Za.map(sa),
unitTickvals:bb&&bb.map(sa),xScale:ma,x:ma(ka),canvasX:ma(ka)*ja,unitToPaddedPx:ra,domainScale:a(W,Q.verticalPadding,la,bb,sb),ordinalScale:r(la),parent:wa,model:T,brush:Z.makeBrush(V,Wa,Ha,function(){V.linePickActive(!1)},function(){wa.focusLayer&&wa.focusLayer.render(wa.panels,!0);var pb=c(wa);!V.contextShown()&&pb?(wa.contextLayer&&wa.contextLayer.render(wa.panels,!0),V.contextShown(!0)):V.contextShown()&&!pb&&(wa.contextLayer&&wa.contextLayer.render(wa.panels,!0,!0),V.contextShown(!1))},function(pb){wa.focusLayer.render(wa.panels,
!0);wa.pickLayer&&wa.pickLayer.render(wa.panels,!0);V.linePickActive(!0);if(S&&S.filterChanged){var Ab=sa.invert;pb=pb.map(function(tb){return tb.map(Ab).sort(A.sorterAsc)}).sort(function(tb,vb){return tb[0]-vb[0]});S.filterChanged(wa.key,la._index,pb)}})}});return wa}function f(V){V.classed(Q.cn.axisExtentText,!0).attr("text-anchor","middle").style("cursor","default")}function q(){var V=!0,S=!1;return{linePickActive:function(T){return arguments.length?V=!!T:V},contextShown:function(T){return arguments.length?
S=!!T:S}}}function t(V,S){var T=V*Math.PI/180;return{dir:"top"===S?1:-1,dx:Math.sin(T),dy:Math.cos(T),degrees:V}}function w(V,S,T){var fa=S.panels||(S.panels=[]);V=V.data();for(var W=0;W<V.length-1;W++){var aa=fa[W]||(fa[W]={}),ja=V[W],ma=V[W+1];aa.dim0=ja;aa.dim1=ma;aa.canvasX=ja.canvasX;aa.panelSizeX=ma.canvasX-ja.canvasX;aa.panelSizeY=S.model.canvasHeight;aa.y=0;aa.canvasY=0;aa.plotGlPixelRatio=T}}function x(V){for(var S=0;S<V.length;S++)for(var T=0;T<V[S].length;T++)for(var fa=V[S][T].trace,W=
fa.dimensions,aa=0;aa<W.length;aa++){var ja=W[aa].values,ma=W[aa]._ax;ma&&(ma.range=ma.range?k(ma.range[0],ma.range[1]):p(ja,fa._length),ma.dtick||(ma.dtick=.01*(Math.abs(ma.range[1]-ma.range[0])||1)),ma.tickformat=W[aa].tickformat,v.calcTicks(ma),ma.cleanRange())}}function z(V,S){if(V.ordinal)return"";var T=V.domainScale.domain();return v.tickText(V.model.dimensions[V.visibleIndex]._ax,T[S?T.length-1:0],!1).text}var B=b("@plotly/d3"),A=b("../../lib"),D=A.numberFormat,C=b("color-rgba"),v=b("../../plots/cartesian/axes"),
y=A.strRotate,F=A.strTranslate,J=b("../../lib/svg_text_utils"),K=b("../../components/drawing"),M=b("../../components/colorscale");G=b("../../lib/gup");var H=G.keyFun,O=G.repeat,I=G.unwrap,L=b("./helpers"),Q=b("./constants"),Z=b("./axisbrush"),ba=b("./lines");N.exports=function(V,S,T,fa){var W=V._fullLayout,aa=W._toppaper;W=W._glcontainer;var ja=V._context.plotGlPixelRatio,ma=V._fullLayout.paper_bgcolor;x(S);var ia=q(),ra=S.filter(function(ka){return I(ka).trace.visible}).map(d.bind(0,T)).map(e.bind(0,
ia,fa));W.each(function(ka,na){return A.extendFlat(ka,ra[na])});S=W.selectAll(".gl-canvas").each(function(ka){ka.viewModel=ra[0];ka.viewModel.plotGlPixelRatio=ja;ka.viewModel.paperColor=ma;ka.model=ka.viewModel?ka.viewModel.model:null});var wa=null;S.filter(function(ka){return ka.pick}).style("pointer-events","auto").on("mousemove",function(ka){if(ia.linePickActive()&&ka.lineLayer&&fa&&fa.hover){var na=B.event,oa=this.width,sa=this.height,za=B.mouse(this),Ha=za[0];za=za[1];0>Ha||0>za||Ha>=oa||za>=
sa||(sa=ka.lineLayer.readPixel(Ha,sa-1-za),sa=(oa=0!==sa[3])?sa[2]+256*(sa[1]+256*sa[0]):null,ka={x:Ha,y:za,clientX:na.clientX,clientY:na.clientY,dataIndex:ka.model.key,curveNumber:sa},sa!==wa&&(oa?fa.hover(ka):fa.unhover&&fa.unhover(ka),wa=sa))}});S.style("opacity",function(ka){return ka.pick?0:1});aa.style("background","rgba(255, 255, 255, 0)");aa=aa.selectAll("."+Q.cn.parcoords).data(ra,H);aa.exit().remove();aa.enter().append("g").classed(Q.cn.parcoords,!0).style("shape-rendering","crispEdges").style("pointer-events",
"none");aa.attr("transform",function(ka){return F(ka.model.translateX,ka.model.translateY)});aa=aa.selectAll("."+Q.cn.parcoordsControlView).data(O,H);aa.enter().append("g").classed(Q.cn.parcoordsControlView,!0);aa.attr("transform",function(ka){return F(ka.model.pad.l,ka.model.pad.t)});var pa=aa.selectAll("."+Q.cn.yAxis).data(function(ka){return ka.dimensions},H);pa.enter().append("g").classed(Q.cn.yAxis,!0);aa.each(function(ka){w(pa,ka,ja)});S.each(function(ka){if(ka.viewModel){!ka.lineLayer||fa?
ka.lineLayer=ba(this,ka):ka.lineLayer.update(ka);if(ka.key||0===ka.key)ka.viewModel[ka.key]=ka.lineLayer;ka.lineLayer.render(ka.viewModel.panels,!ka.context||fa)}});pa.attr("transform",function(ka){return F(ka.xScale(ka.xIndex),0)});pa.call(B.behavior.drag().origin(function(ka){return ka}).on("drag",function(ka){var na=ka.parent;ia.linePickActive(!1);ka.x=Math.max(-Q.overdrag,Math.min(ka.model.width+Q.overdrag,B.event.x));ka.canvasX=ka.x*ka.model.canvasPixelRatio;pa.sort(function(oa,sa){return oa.x-
sa.x}).each(function(oa,sa){oa.xIndex=sa;oa.x=ka===oa?oa.x:oa.xScale(oa.xIndex);oa.canvasX=oa.x*oa.model.canvasPixelRatio});w(pa,na,ja);pa.filter(function(oa){return 0!==Math.abs(ka.xIndex-oa.xIndex)}).attr("transform",function(oa){return F(oa.xScale(oa.xIndex),0)});B.select(this).attr("transform",F(ka.x,0));pa.each(function(oa,sa,za){za===ka.parent.key&&(na.dimensions[sa]=oa)});na.contextLayer&&na.contextLayer.render(na.panels,!1,!c(na));na.focusLayer.render&&na.focusLayer.render(na.panels)}).on("dragend",
function(ka){var na=ka.parent;ka.x=ka.xScale(ka.xIndex);ka.canvasX=ka.x*ka.model.canvasPixelRatio;w(pa,na,ja);B.select(this).attr("transform",function(oa){return F(oa.x,0)});na.contextLayer&&na.contextLayer.render(na.panels,!1,!c(na));na.focusLayer&&na.focusLayer.render(na.panels);na.pickLayer&&na.pickLayer.render(na.panels,!0);ia.linePickActive(!0);fa&&fa.axesMoved&&fa.axesMoved(na.key,na.dimensions.map(function(oa){return oa.crossfilterDimensionIndex}))}));pa.exit().remove();aa=pa.selectAll("."+
Q.cn.axisOverlays).data(O,H);aa.enter().append("g").classed(Q.cn.axisOverlays,!0);aa.selectAll("."+Q.cn.axis).remove();var la=aa.selectAll("."+Q.cn.axis).data(O,H);la.enter().append("g").classed(Q.cn.axis,!0);la.each(function(ka){var na=ka.model.height/ka.model.tickDistance,oa=ka.domainScale,sa=oa.domain();B.select(this).call(B.svg.axis().orient("left").tickSize(4).outerTickSize(2).ticks(na,ka.tickFormat).tickValues(ka.ordinal?sa:null).tickFormat(function(za){return L.isOrdinal(ka)?za:v.tickText(ka.model.dimensions[ka.visibleIndex]._ax,
za,!1).text}).scale(oa));K.font(la.selectAll("text"),ka.model.tickFont)});la.selectAll(".domain, .tick\x3eline").attr("fill","none").attr("stroke","black").attr("stroke-opacity",.25).attr("stroke-width","1px");la.selectAll("text").style("text-shadow",J.makeTextShadow(ma)).style("cursor","default");S=aa.selectAll("."+Q.cn.axisHeading).data(O,H);S.enter().append("g").classed(Q.cn.axisHeading,!0);S=S.selectAll("."+Q.cn.axisTitle).data(O,H);S.enter().append("text").classed(Q.cn.axisTitle,!0).attr("text-anchor",
"middle").style("cursor","ew-resize").style("pointer-events","auto");S.text(function(ka){return ka.label}).each(function(ka){var na=B.select(this);K.font(na,ka.model.labelFont);J.convertToTspans(na,V)}).attr("transform",function(ka){var na=t(ka.model.labelAngle,ka.model.labelSide),oa=Q.axisTitleOffset;return(0<na.dir?"":F(0,2*oa+ka.model.height))+y(na.degrees)+F(-oa*na.dx,-oa*na.dy)}).attr("text-anchor",function(ka){ka=t(ka.model.labelAngle,ka.model.labelSide);return 2*Math.abs(ka.dx)>Math.abs(ka.dy)?
0>ka.dir*ka.dx?"start":"end":"middle"});S=aa.selectAll("."+Q.cn.axisExtent).data(O,H);S.enter().append("g").classed(Q.cn.axisExtent,!0);T=S.selectAll("."+Q.cn.axisExtentTop).data(O,H);T.enter().append("g").classed(Q.cn.axisExtentTop,!0);T.attr("transform",F(0,-Q.axisExtentOffset));T=T.selectAll("."+Q.cn.axisExtentTopText).data(O,H);T.enter().append("text").classed(Q.cn.axisExtentTopText,!0).call(f);T.text(function(ka){return z(ka,!0)}).each(function(ka){K.font(B.select(this),ka.model.rangeFont)});
S=S.selectAll("."+Q.cn.axisExtentBottom).data(O,H);S.enter().append("g").classed(Q.cn.axisExtentBottom,!0);S.attr("transform",function(ka){return F(0,ka.model.height+Q.axisExtentOffset)});S=S.selectAll("."+Q.cn.axisExtentBottomText).data(O,H);S.enter().append("text").classed(Q.cn.axisExtentBottomText,!0).attr("dy","0.75em").call(f);S.text(function(ka){return z(ka,!1)}).each(function(ka){K.font(B.select(this),ka.model.rangeFont)});Z.ensureAxisBrush(aa,ma)}},{"../../components/colorscale":678,"../../components/drawing":688,
"../../lib":803,"../../lib/gup":800,"../../lib/svg_text_utils":829,"../../plots/cartesian/axes":854,"./axisbrush":1181,"./constants":1184,"./helpers":1186,"./lines":1188,"@plotly/d3":58,"color-rgba":133}],1191:[function(b,N,G){function p(g,h,r){r=h.indexOf(r);g=g.indexOf(r);-1===g&&(g+=h.length);return g}function n(g,h){return function(r,l){return p(g,h,r)-p(g,h,l)}}var k=b("./parcoords"),m=b("../../lib/prepare_regl"),a=b("./helpers").isVisible;N.exports=function(g,h){var r=g._fullLayout;if(m(g)){var l=
{},c={},d={},e={},f=r._size;h.forEach(function(q,t){q=q[0].trace;d[t]=q.index;q=e[t]=q._fullInput.index;l[t]=g.data[q].dimensions;c[t]=g.data[q].dimensions.slice()});k(g,h,{width:f.w,height:f.h,margin:{t:f.t,r:f.r,b:f.b,l:f.l}},{filterChanged:function(q,t,w){var x=c[q][t];w=w.map(function(A){return A.slice()});var z="dimensions["+t+"].constraintrange",B=r._tracePreGUI[g._fullData[d[q]]._fullInput.uid];void 0===B[z]&&(B[z]=x.constraintrange||null);t=g._fullData[d[q]].dimensions[t];w.length?(1===w.length&&
(w=w[0]),x.constraintrange=w,t.constraintrange=w.slice(),w=[w]):(delete x.constraintrange,delete t.constraintrange,w=null);x={};x[z]=w;g.emit("plotly_restyle",[x,[e[q]]])},hover:function(q){g.emit("plotly_hover",q)},unhover:function(q){g.emit("plotly_unhover",q)},axesMoved:function(q,t){t=n(t,c[q].filter(a));l[q].sort(t);c[q].filter(function(w){return!a(w)}).sort(function(w){return c[q].indexOf(w)}).forEach(function(w){l[q].splice(l[q].indexOf(w),1);l[q].splice(c[q].indexOf(w),0,w)});g.emit("plotly_restyle",
[{dimensions:[l[q]]},[e[q]]])}})}}},{"../../lib/prepare_regl":816,"./helpers":1186,"./parcoords":1190}],1192:[function(b,N,G){G=b("../../plots/attributes");var p=b("../../plots/domain").attributes,n=b("../../plots/font_attributes"),k=b("../../components/color/attributes"),m=b("../../plots/template_attributes").hovertemplateAttrs,a=b("../../plots/template_attributes").texttemplateAttrs;b=b("../../lib/extend").extendFlat;n=n({editType:"plot",arrayOk:!0,colorEditType:"plot"});N.exports={labels:{valType:"data_array",
editType:"calc"},label0:{valType:"number",dflt:0,editType:"calc"},dlabel:{valType:"number",dflt:1,editType:"calc"},values:{valType:"data_array",editType:"calc"},marker:{colors:{valType:"data_array",editType:"calc"},line:{color:{valType:"color",dflt:k.defaultLine,arrayOk:!0,editType:"style"},width:{valType:"number",min:0,dflt:0,arrayOk:!0,editType:"style"},editType:"calc"},editType:"calc"},text:{valType:"data_array",editType:"plot"},hovertext:{valType:"string",dflt:"",arrayOk:!0,editType:"style"},
scalegroup:{valType:"string",dflt:"",editType:"calc"},textinfo:{valType:"flaglist",flags:["label","text","value","percent"],extras:["none"],editType:"calc"},hoverinfo:b({},G.hoverinfo,{flags:["label","text","value","percent","name"]}),hovertemplate:m({},{keys:["label","color","value","percent","text"]}),texttemplate:a({editType:"plot"},{keys:["label","color","value","percent","text"]}),textposition:{valType:"enumerated",values:["inside","outside","auto","none"],dflt:"auto",arrayOk:!0,editType:"plot"},
textfont:b({},n,{}),insidetextorientation:{valType:"enumerated",values:["horizontal","radial","tangential","auto"],dflt:"auto",editType:"plot"},insidetextfont:b({},n,{}),outsidetextfont:b({},n,{}),automargin:{valType:"boolean",dflt:!1,editType:"plot"},title:{text:{valType:"string",dflt:"",editType:"plot"},font:b({},n,{}),position:{valType:"enumerated",values:"top left;top center;top right;middle center;bottom left;bottom center;bottom right".split(";"),editType:"plot"},editType:"plot"},domain:p({name:"pie",
trace:!0,editType:"calc"}),hole:{valType:"number",min:0,max:1,dflt:0,editType:"calc"},sort:{valType:"boolean",dflt:!0,editType:"calc"},direction:{valType:"enumerated",values:["clockwise","counterclockwise"],dflt:"counterclockwise",editType:"calc"},rotation:{valType:"number",min:-360,max:360,dflt:0,editType:"calc"},pull:{valType:"number",min:0,max:1,dflt:0,arrayOk:!0,editType:"calc"},_deprecated:{title:{valType:"string",dflt:"",editType:"calc"},titlefont:b({},n,{}),titleposition:{valType:"enumerated",
values:"top left;top center;top right;middle center;bottom left;bottom center;bottom right".split(";"),editType:"calc"}}}},{"../../components/color/attributes":665,"../../lib/extend":793,"../../plots/attributes":850,"../../plots/domain":882,"../../plots/font_attributes":883,"../../plots/template_attributes":926}],1193:[function(b,N,G){var p=b("../../plots/plots");G.name="pie";G.plot=function(n,k,m,a){p.plotBasePlot(G.name,n,k,m,a)};G.clean=function(n,k,m,a){p.cleanBasePlot(G.name,n,k,m,a)}},{"../../plots/plots":917}],
1194:[function(b,N,G){function p(h){return function(r,l){if(!r)return!1;r=m(r);if(!r.isValid())return!1;r=a.addOpacity(r,r.getAlpha());h[l]||(h[l]=r);return r}}function n(h,r){var l,c=JSON.stringify(h),d=r[c];if(!d){d=h.slice();for(l=0;l<h.length;l++)d.push(m(h[l]).lighten(20).toHexString());for(l=0;l<h.length;l++)d.push(m(h[l]).darken(20).toHexString());r[c]=d}return d}var k=b("fast-isnumeric"),m=b("tinycolor2"),a=b("../../components/color"),g={};N.exports={calc:function(h,r){var l=[],c=h._fullLayout;
h=c.hiddenlabels||[];var d=r.labels,e=r.marker.colors||[],f=r.values,q=r._length,t=r._hasValues&&q,w;if(r.dlabel)for(d=Array(q),w=0;w<q;w++)d[w]=String(r.label0+w*r.dlabel);var x={};c=p(c["_"+r.type+"colormap"]);var z=0,B=!1;for(w=0;w<q;w++){if(t){var A=f[w];if(!k(A))continue;A=+A;if(0>A)continue}else A=1;var D=d[w];if(void 0===D||""===D)D=w;D=String(D);var C=x[D];void 0===C?(x[D]=l.length,(C=-1!==h.indexOf(D))||(z+=A),l.push({v:A,label:D,color:c(e[w],D),i:w,pts:[w],hidden:C})):(B=!0,C=l[C],C.v+=
A,C.pts.push(w),C.hidden||(z+=A),!1===C.color&&e[w]&&(C.color=c(e[w],D)))}("funnelarea"===r.type?B:r.sort)&&l.sort(function(v,y){return y.v-v.v});l[0]&&(l[0].vTotal=z);return l},crossTraceCalc:function(h,r){(r=(r||{}).type)||(r="pie");var l=h._fullLayout;h=h.calcdata;var c=l[r+"colorway"],d=l["_"+r+"colormap"];l["extend"+r+"colors"]&&(c=n(c,g));for(var e=l=0;e<h.length;e++){var f=h[e];if(f[0].trace.type===r)for(var q=0;q<f.length;q++){var t=f[q];!1===t.color&&(d[t.label]?t.color=d[t.label]:(d[t.label]=
t.color=c[l%c.length],l++))}}},makePullColorFn:p,generateExtendedColors:n}},{"../../components/color":666,"fast-isnumeric":249,tinycolor2:598}],1195:[function(b,N,G){function p(h,r){var l=Array.isArray(h),c=k.isArrayOrTypedArray(r);h=Math.min(l?h.length:Infinity,c?r.length:Infinity);isFinite(h)||(h=0);if(h&&c){for(var d,e=0;e<h;e++){var f=r[e];if(n(f)&&0<f){d=!0;break}}d||(h=0)}return{hasLabels:l,hasValues:c,len:h}}var n=b("fast-isnumeric"),k=b("../../lib"),m=b("./attributes"),a=b("../../plots/domain").defaults,
g=b("../bar/defaults").handleText;N.exports={handleLabelsAndValues:p,supplyDefaults:function(h,r,l,c){function d(q,t){return k.coerce(h,r,m,q,t)}l=d("labels");var e=d("values");l=p(l,e);e=l.len;r._hasLabels=l.hasLabels;r._hasValues=l.hasValues;!r._hasLabels&&r._hasValues&&(d("label0"),d("dlabel"));if(e){r._length=e;d("marker.line.width")&&d("marker.line.color");d("marker.colors");d("scalegroup");l=d("text");e=d("texttemplate");var f;e||(f=d("textinfo",Array.isArray(l)?"text+percent":"percent"));d("hovertext");
d("hovertemplate");if(e||f&&"none"!==f)f=d("textposition"),g(h,r,c,d,f,{moduleHasSelected:!1,moduleHasUnselected:!1,moduleHasConstrain:!1,moduleHasCliponaxis:!1,moduleHasTextangle:!1,moduleHasInsideanchor:!1}),(Array.isArray(f)||"auto"===f||"outside"===f)&&d("automargin"),("inside"===f||"auto"===f||Array.isArray(f))&&d("insidetextorientation");a(r,c,d);f=d("hole");d("title.text")&&(l=d("title.position",f?"middle center":"top center"),f||"middle center"!==l||(r.title.position="top center"),k.coerceFont(d,
"title.font",c.font));d("sort");d("direction");d("rotation");d("pull")}else r.visible=!1}}},{"../../lib":803,"../../plots/domain":882,"../bar/defaults":945,"./attributes":1192,"fast-isnumeric":249}],1196:[function(b,N,G){var p=b("../../components/fx/helpers").appendArrayMultiPointValues;N.exports=function(n,k){var m={curveNumber:k.index,pointNumbers:n.pts,data:k._input,fullData:k,label:n.label,color:n.color,value:n.v,percent:n.percent,text:n.text,v:n.v};1===n.pts.length&&(m.pointNumber=m.i=n.pts[0]);
p(m,k,n.pts);"funnelarea"===k.type&&(delete m.v,delete m.i);return m}},{"../../components/fx/helpers":702}],1197:[function(b,N,G){function p(k){return-1!==k.indexOf("e")?k.replace(/[.]?0+e/,"e"):-1!==k.indexOf(".")?k.replace(/[.]?0+$/,""):k}var n=b("../../lib");G.formatPiePercent=function(k,m){k=p((100*k).toPrecision(3));return n.numSeparate(k,m)+"%"};G.formatPieValue=function(k,m){k=p(k.toPrecision(10));return n.numSeparate(k,m)};G.getFirstFilled=function(k,m){if(Array.isArray(k))for(var a=0;a<m.length;a++){var g=
k[m[a]];if(g||0===g||""===g)return g}};G.castOption=function(k,m){if(Array.isArray(k))return G.getFirstFilled(k,m);if(k)return k};G.getRotationAngle=function(k){return("auto"===k?0:k)*Math.PI/180}},{"../../lib":803}],1198:[function(b,N,G){N.exports={attributes:b("./attributes"),supplyDefaults:b("./defaults").supplyDefaults,supplyLayoutDefaults:b("./layout_defaults"),layoutAttributes:b("./layout_attributes"),calc:b("./calc").calc,crossTraceCalc:b("./calc").crossTraceCalc,plot:b("./plot").plot,style:b("./style"),
styleOne:b("./style_one"),moduleType:"trace",name:"pie",basePlotModule:b("./base_plot"),categories:["pie-like","pie","showLegend"],meta:{}}},{"./attributes":1192,"./base_plot":1193,"./calc":1194,"./defaults":1195,"./layout_attributes":1199,"./layout_defaults":1200,"./plot":1201,"./style":1202,"./style_one":1203}],1199:[function(b,N,G){N.exports={hiddenlabels:{valType:"data_array",editType:"calc"},piecolorway:{valType:"colorlist",editType:"calc"},extendpiecolors:{valType:"boolean",dflt:!0,editType:"calc"}}},
{}],1200:[function(b,N,G){var p=b("../../lib"),n=b("./layout_attributes");N.exports=function(k,m){p.coerce(k,m,n,"hiddenlabels",void 0);p.coerce(k,m,n,"piecolorway",m.colorway);p.coerce(k,m,n,"extendpiecolors",void 0)}},{"../../lib":803,"./layout_attributes":1199}],1201:[function(b,N,G){function p(ba,V){ba.each(function(S){var T=A.select(this);if(S.labelExtraX||S.labelExtraY){var fa=T.select("g.slicetext text");S.transform.targetX+=S.labelExtraX;S.transform.targetY+=S.labelExtraY;fa.attr("transform",
F.getTextTransform(S.transform));fa=S.cxFinal+S.pxmid[0];var W="M"+fa+","+(S.cyFinal+S.pxmid[1]),aa=(S.yLabelMax-S.yLabelMin)*(0>S.pxmid[0]?-1:1)/4;if(S.labelExtraX){var ja=S.labelExtraX*S.pxmid[1]/S.pxmid[0],ma=S.yLabelMid+S.labelExtraY-(S.cyFinal+S.pxmid[1]);W=Math.abs(ja)>Math.abs(ma)?W+("l"+ma*S.pxmid[0]/S.pxmid[1]+","+ma+"H"+(fa+S.labelExtraX+aa)):W+("l"+S.labelExtraX+","+ja+"v"+(ma-ja)+"h"+aa)}else W+="V"+(S.yLabelMid+S.labelExtraY)+"h"+aa;F.ensureSingle(T,"path","textline").call(v.stroke,V.outsidetextfont.color).attr({"stroke-width":Math.min(2,
V.outsidetextfont.size/8),d:W,fill:"none"})}else T.select("path.textline").remove()})}function n(ba,V,S){var T=S[0],fa=T.trace,W=T.cx,aa=T.cy;"_hasHoverLabel"in fa||(fa._hasHoverLabel=!1);"_hasHoverEvent"in fa||(fa._hasHoverEvent=!1);ba.on("mouseover",function(ja){var ma=V._fullLayout,ia=V._fullData[fa.index];if(!V._dragging&&!1!==ma.hovermode){var ra=ia.hoverinfo;Array.isArray(ra)&&(ra=C.castHoverinfo({hoverinfo:[L.castOption(ra,ja.pts)],_module:fa._module},ma,0));"all"===ra&&(ra="label+text+value+percent+name");
if(ia.hovertemplate||"none"!==ra&&"skip"!==ra&&ra){var wa=ja.rInscribed||0,pa=W+ja.pxmid[0]*(1-wa),la=aa+ja.pxmid[1]*(1-wa),ka=ma.separators,na=[];ra&&-1!==ra.indexOf("label")&&na.push(ja.label);ja.text=L.castOption(ia.hovertext||ia.text,ja.pts);if(ra&&-1!==ra.indexOf("text")){var oa=ja.text;F.isValidTextValue(oa)&&na.push(oa)}ja.value=ja.v;ja.valueLabel=L.formatPieValue(ja.v,ka);ra&&-1!==ra.indexOf("value")&&na.push(ja.valueLabel);ja.percent=ja.v/T.vTotal;ja.percentLabel=L.formatPiePercent(ja.percent,
ka);ra&&-1!==ra.indexOf("percent")&&na.push(ja.percentLabel);ka=ia.hoverlabel;oa=ka.font;C.loneHover({trace:fa,x0:pa-wa*T.r,x1:pa+wa*T.r,y:la,text:na.join("\x3cbr\x3e"),name:ia.hovertemplate||-1!==ra.indexOf("name")?ia.name:void 0,idealAlign:0>ja.pxmid[0]?"left":"right",color:L.castOption(ka.bgcolor,ja.pts)||ja.color,borderColor:L.castOption(ka.bordercolor,ja.pts),fontFamily:L.castOption(oa.family,ja.pts),fontSize:L.castOption(oa.size,ja.pts),fontColor:L.castOption(oa.color,ja.pts),nameLength:L.castOption(ka.namelength,
ja.pts),textAlign:L.castOption(ka.align,ja.pts),hovertemplate:L.castOption(ia.hovertemplate,ja.pts),hovertemplateLabels:ja,eventData:[Q(ja,ia)]},{container:ma._hoverlayer.node(),outerContainer:ma._paper.node(),gd:V});fa._hasHoverLabel=!0}fa._hasHoverEvent=!0;V.emit("plotly_hover",{points:[Q(ja,ia)],event:A.event})}});ba.on("mouseout",function(ja){var ma=V._fullLayout,ia=V._fullData[fa.index],ra=A.select(this).datum();fa._hasHoverEvent&&(ja.originalEvent=A.event,V.emit("plotly_unhover",{points:[Q(ra,
ia)],event:A.event}),fa._hasHoverEvent=!1);fa._hasHoverLabel&&(C.loneUnhover(ma._hoverlayer.node()),fa._hasHoverLabel=!1)});ba.on("click",function(ja){var ma=V._fullLayout;V._dragging||!1===ma.hovermode||(V._hoverdata=[Q(ja,V._fullData[fa.index])],C.click(V,A.event))})}function k(ba,V,S){var T=L.castOption(ba.outsidetextfont.color,V.pts)||L.castOption(ba.textfont.color,V.pts)||S.color,fa=L.castOption(ba.outsidetextfont.family,V.pts)||L.castOption(ba.textfont.family,V.pts)||S.family;ba=L.castOption(ba.outsidetextfont.size,
V.pts)||L.castOption(ba.textfont.size,V.pts)||S.size;return{color:T,family:fa,size:ba}}function m(ba,V,S){var T=L.castOption(ba.insidetextfont.color,V.pts);!T&&ba._input.textfont&&(T=L.castOption(ba._input.textfont.color,V.pts));var fa=L.castOption(ba.insidetextfont.family,V.pts)||L.castOption(ba.textfont.family,V.pts)||S.family;ba=L.castOption(ba.insidetextfont.size,V.pts)||L.castOption(ba.textfont.size,V.pts)||S.size;return{color:T||v.contrast(V.color),family:fa,size:ba}}function a(ba,V){for(var S,
T,fa=0;fa<ba.length;fa++)if(S=ba[fa][0],T=S.trace,T.title.text){var W=T.title.text;T._meta&&(W=F.templateString(W,T._meta));T=y.tester.append("text").attr("data-notex",1).text(W).call(y.font,T.title.font).call(M.convertToTspans,V);W=y.bBox(T.node(),!0);S.titleBox={width:W.width,height:W.height};T.remove()}}function g(ba,V,S){var T=S.r||V.rpx1,fa=V.rInscribed;if(V.startangle===V.stopangle)return{rCenter:1-fa,scale:0,rotate:0,textPosAngle:0};var W=V.ring,aa=1===W&&Math.abs(V.startangle-V.stopangle)===
2*Math.PI,ja=V.halfangle,ma=V.midangle;S=S.trace.insidetextorientation;var ia="horizontal"===S,ra="tangential"===S,wa="radial"===S;S="auto"===S;var pa=[];if(!S){var la=function(oa,sa){var za=V.startangle,Ha=V.stopangle;if(za>oa&&oa>Ha||za<oa&&oa<Ha)za=Math.abs(oa-V.startangle),Ha=Math.abs(oa-V.stopangle),za=za<Ha?za:Ha,na="tan"===sa?r(ba,T,W,za,0):h(ba,T,W,za,Math.PI/2),na.textPosAngle=oa,pa.push(na)},ka;if(ia||ra){for(ka=4;-4<=ka;ka-=2)la(Math.PI*ka,"tan");for(ka=4;-4<=ka;ka-=2)la(Math.PI*(ka+1),
"tan")}if(ia||wa){for(ka=4;-4<=ka;ka-=2)la(Math.PI*(ka+1.5),"rad");for(ka=4;-4<=ka;ka-=2)la(Math.PI*(ka+.5),"rad")}}if(aa||S||ia){var na={scale:fa*T*2/Math.sqrt(ba.width*ba.width+ba.height*ba.height),rCenter:1-fa,rotate:0};na.textPosAngle=(V.startangle+V.stopangle)/2;if(1<=na.scale)return na;pa.push(na)}if(S||wa)na=h(ba,T,W,ja,ma),na.textPosAngle=(V.startangle+V.stopangle)/2,pa.push(na);if(S||ra)na=r(ba,T,W,ja,ma),na.textPosAngle=(V.startangle+V.stopangle)/2,pa.push(na);for(ja=aa=fa=0;ja<pa.length&&
(ma=pa[ja].scale,aa<ma&&(aa=ma,fa=ja),S||!(1<=aa));ja++);return pa[fa]}function h(ba,V,S,T,fa){V=Math.max(0,V-2*I);var W=ba.width/ba.height;S=l(W,T,V,S);V=S/V;return{scale:2*S/ba.height,rCenter:Math.cos(V)-W*V,rotate:(180/Math.PI*fa+720)%180-90}}function r(ba,V,S,T,fa){V=Math.max(0,V-2*I);var W=ba.height/ba.width;S=l(W,T,V,S);V=S/V;return{scale:2*S/ba.width,rCenter:Math.cos(V)-W*V,rotate:(180/Math.PI*(fa+Math.PI/2)+720)%180-90}}function l(ba,V,S,T){V=ba+1/(2*Math.tan(V));return S*Math.min(1/(Math.sqrt(V*
V+.5)+V),T/(Math.sqrt(ba*ba+T/2)+ba))}function c(ba,V){var S=V.pxmid[0];V=V.pxmid[1];var T=ba.width/2;ba=ba.height/2;0>S&&(T*=-1);0>V&&(ba*=-1);return{scale:1,rCenter:1,rotate:0,x:T+Math.abs(ba)*(0<T?1:-1)/2,y:ba/(1+S*S/(V*V)),outside:!0}}function d(ba,V){var S=ba.trace,T=ba.cx,fa=ba.cy,W=0;var aa=0+S.title.font.size;var ja=f(S);-1!==S.title.position.indexOf("top")?(fa-=(1+ja)*ba.r,aa-=ba.titleBox.height):-1!==S.title.position.indexOf("bottom")&&(fa+=(1+ja)*ba.r);var ma=ba.trace.aspectratio;ma=ba.r/
(void 0===ma?1:ma);var ia=V.w*(S.domain.x[1]-S.domain.x[0])/2;-1!==S.title.position.indexOf("left")?(ia+=ma,T-=(1+ja)*ma,W+=ba.titleBox.width/2):-1!==S.title.position.indexOf("center")?ia*=2:-1!==S.title.position.indexOf("right")&&(ia+=ma,T+=(1+ja)*ma,W-=ba.titleBox.width/2);ja=ia/ba.titleBox.width;ba=e(ba,V)/ba.titleBox.height;return{x:T,y:fa,scale:Math.min(ja,ba),tx:W,ty:aa}}function e(ba,V){var S=ba.trace;return Math.min(ba.titleBox.height,V.h*(S.domain.y[1]-S.domain.y[0])/2)}function f(ba){var V=
ba.pull;if(!V)return 0;var S;if(Array.isArray(V))for(S=V=0;S<ba.pull.length;S++)ba.pull[S]>V&&(V=ba.pull[S]);return V}function q(ba,V){function S(sa,za){return sa.pxmid[1]-za.pxmid[1]}function T(sa,za){return za.pxmid[1]-sa.pxmid[1]}function fa(sa,za){za||(za={});var Ha=za.labelExtraY+(aa?za.yLabelMax:za.yLabelMin);za=aa?sa.yLabelMin:sa.yLabelMax;var Wa=aa?sa.yLabelMax:sa.yLabelMin,Za=sa.cyFinal+ia(sa.px0[1],sa.px1[1]),bb=Ha-za;0<bb*ra&&(sa.labelExtraY=bb);if(Array.isArray(V.pull))for(Ha=0;Ha<na.length;Ha++){var sb=
na[Ha];sb===sa||(L.castOption(V.pull,sa.pts)||0)>=(L.castOption(V.pull,sb.pts)||0)||(0<(sa.pxmid[1]-sb.pxmid[1])*ra?(bb=sb.cyFinal+ia(sb.px0[1],sb.px1[1]),bb=bb-za-sa.labelExtraY,0<bb*ra&&(sa.labelExtraY+=bb)):0<(Wa+sa.labelExtraY-Za)*ra&&(bb=3*pa*Math.abs(Ha-na.indexOf(sa)),sb=sb.cxFinal+wa(sb.px0[0],sb.px1[0]),bb=sb+bb-(sa.cxFinal+sa.pxmid[0])-sa.labelExtraX,0<bb*pa&&(sa.labelExtraX+=bb)))}}var W,aa,ja;for(aa=0;2>aa;aa++){var ma=aa?S:T;var ia=aa?Math.max:Math.min;var ra=aa?1:-1;for(W=0;2>W;W++){var wa=
W?Math.max:Math.min;var pa=W?1:-1;var la=ba[aa][W];la.sort(ma);var ka=ba[1-aa][W];var na=ka.concat(la);var oa=[];for(ja=0;ja<la.length;ja++)void 0!==la[ja].yLabelMid&&oa.push(la[ja]);la=!1;for(ja=0;aa&&ja<ka.length;ja++)if(void 0!==ka[ja].yLabelMid){la=ka[ja];break}for(ja=0;ja<oa.length;ja++)ka=ja&&oa[ja-1],la&&!ja&&(ka=la),fa(oa[ja],ka)}}}function t(ba,V){for(var S=[],T=0;T<ba.length;T++){var fa=ba[T][0],W=fa.trace,aa=W.domain,ja=V.w*(aa.x[1]-aa.x[0]);aa=V.h*(aa.y[1]-aa.y[0]);W.title.text&&"middle center"!==
W.title.position&&(aa-=e(fa,V));ja/=2;var ma=aa/2;"funnelarea"!==W.type||W.scalegroup||(ma/=W.aspectratio);fa.r=Math.min(ja,ma)/(1+f(W));fa.cx=V.l+V.w*(W.domain.x[1]+W.domain.x[0])/2;fa.cy=V.t+V.h*(1-W.domain.y[0])-aa/2;W.title.text&&-1!==W.title.position.indexOf("bottom")&&(fa.cy-=e(fa,V));W.scalegroup&&-1===S.indexOf(W.scalegroup)&&S.push(W.scalegroup)}for(W=0;W<S.length;W++){aa=Infinity;ja=S[W];for(T=0;T<ba.length;T++)if(V=ba[T][0],fa=V.trace,fa.scalegroup===ja){if("pie"===fa.type)var ia=V.r*V.r;
else"funnelarea"===fa.type&&(1<fa.aspectratio?(ia=V.r,ma=ia/fa.aspectratio):(ma=V.r,ia=ma*fa.aspectratio),ia*=(1+fa.baseratio)/2,ia*=ma);aa=Math.min(aa,ia/V.vTotal)}for(T=0;T<ba.length;T++)V=ba[T][0],fa=V.trace,fa.scalegroup===ja&&(ma=aa*V.vTotal,"funnelarea"===fa.type&&(ma/=(1+fa.baseratio)/2,ma/=fa.aspectratio),V.r=Math.sqrt(ma))}}function w(ba){var V=ba[0],S=V.r,T=V.trace,fa=L.getRotationAngle(T.rotation),W=2*Math.PI/V.vTotal,aa="px0",ja="px1",ma;if("counterclockwise"===T.direction){for(ma=0;ma<
ba.length&&ba[ma].hidden;ma++);if(ma===ba.length)return;fa+=W*ba[ma].v;W*=-1;aa="px1";ja="px0"}var ia=x(S,fa);for(ma=0;ma<ba.length;ma++){var ra=ba[ma];if(!ra.hidden){ra[aa]=ia;ra.startangle=fa;fa+=W*ra.v/2;ra.pxmid=x(S,fa);ra.midangle=fa;fa+=W*ra.v/2;ia=x(S,fa);ra.stopangle=fa;ra[ja]=ia;ra.largeArc=ra.v>V.vTotal/2?1:0;ra.halfangle=Math.PI*Math.min(ra.v/V.vTotal,.5);ra.ring=1-T.hole;var wa=ra;ra=ra.v!==V.vTotal||V.trace.hole?Math.min(1/(1+1/Math.sin(ra.halfangle)),ra.ring/2):1;wa.rInscribed=ra}}}
function x(ba,V){return[ba*Math.sin(V),-ba*Math.cos(V)]}function z(ba,V,S){var T=ba._fullLayout,fa=S.trace,W=fa.texttemplate,aa=fa.textinfo;if(!W&&aa&&"none"!==aa){var ja=aa.split("+"),ma=-1!==ja.indexOf("label"),ia=-1!==ja.indexOf("text");aa=-1!==ja.indexOf("value");ja=-1!==ja.indexOf("percent");var ra=T.separators;ma=ma?[V.label]:[];ia&&(ia=L.getFirstFilled(fa.text,V.pts),Z(ia)&&ma.push(ia));aa&&ma.push(L.formatPieValue(V.v,ra));ja&&ma.push(L.formatPiePercent(V.v/S.vTotal,ra));V.text=ma.join("\x3cbr\x3e")}if(W)if(W=
F.castOption(fa,V.i,"texttemplate")){S={label:V.label,value:V.v,valueLabel:L.formatPieValue(V.v,T.separators),percent:V.v/S.vTotal,percentLabel:L.formatPiePercent(V.v/S.vTotal,T.separators),color:V.color,text:V.text,customdata:F.castOption(fa,V.i,"customdata")};T=L.getFirstFilled(fa.text,V.pts);if(Z(T)||""===T)S.text=T;V.text=F.texttemplateString(W,S,ba._fullLayout._d3locale,S,fa._meta||{})}else V.text=""}function B(ba,V){var S=ba.rotate*Math.PI/180,T=Math.cos(S);S=Math.sin(S);var fa=(V.left+V.right)/
2;V=(V.top+V.bottom)/2;ba.textX=fa*T-V*S;ba.textY=fa*S+V*T;ba.noCenter=!0}var A=b("@plotly/d3"),D=b("../../plots/plots"),C=b("../../components/fx"),v=b("../../components/color"),y=b("../../components/drawing"),F=b("../../lib"),J=F.strScale,K=F.strTranslate,M=b("../../lib/svg_text_utils");G=b("../bar/uniform_text");var H=G.recordMinTextSize,O=G.clearMinTextSize,I=b("../bar/constants").TEXTPAD,L=b("./helpers"),Q=b("./event_data"),Z=b("../../lib").isValidTextValue;N.exports={plot:function(ba,V){var S=
ba._fullLayout,T=S._size;O("pie",S);a(V,ba);t(V,T);var fa=F.makeTraceGroups(S._pielayer,V,"trace").each(function(W){var aa=A.select(this),ja=W[0],ma=ja.trace;w(W);aa.attr("stroke-linejoin","round");aa.each(function(){var ia=A.select(this).selectAll("g.slice").data(W);ia.enter().append("g").classed("slice",!0);ia.exit().remove();var ra=[[[],[]],[[],[]]],wa=!1;ia.each(function(na,oa){function sa(pb,Ab,tb,vb){return"a"+vb*ja.r+","+vb*ja.r+" 0 "+na.largeArc+(tb?" 1 ":" 0 ")+vb*(Ab[0]-pb[0])+","+vb*(Ab[1]-
pb[1])}if(na.hidden)A.select(this).selectAll("path,g").remove();else{na.pointNumber=na.i;na.curveNumber=ma.index;ra[0>na.pxmid[1]?0:1][0>na.pxmid[0]?0:1].push(na);var za=ja.cx,Ha=ja.cy,Wa=A.select(this),Za=Wa.selectAll("path.surface").data([na]);Za.enter().append("path").classed("surface",!0).style({"pointer-events":"all"});Wa.call(n,ba,W);if(ma.pull){var bb=+L.castOption(ma.pull,na.pts)||0;0<bb&&(za+=bb*na.pxmid[0],Ha+=bb*na.pxmid[1])}na.cxFinal=za;na.cyFinal=Ha;bb=ma.hole;if(na.v===ja.vTotal){var sb=
"M"+(za+na.px0[0])+","+(Ha+na.px0[1])+sa(na.px0,na.pxmid,!0,1)+sa(na.pxmid,na.px0,!0,1)+"Z";bb?Za.attr("d","M"+(za+bb*na.px0[0])+","+(Ha+bb*na.px0[1])+sa(na.px0,na.pxmid,!1,bb)+sa(na.pxmid,na.px0,!1,bb)+"Z"+sb):Za.attr("d",sb)}else if(sb=sa(na.px0,na.px1,!0,1),bb){var hb=1-bb;Za.attr("d","M"+(za+bb*na.px1[0])+","+(Ha+bb*na.px1[1])+sa(na.px1,na.px0,!1,bb)+"l"+hb*na.px0[0]+","+hb*na.px0[1]+sb+"Z")}else Za.attr("d","M"+za+","+Ha+"l"+na.px0[0]+","+na.px0[1]+sb+"Z");z(ba,na,ja);var ub=L.castOption(ma.textposition,
na.pts);Wa=Wa.selectAll("g.slicetext").data(na.text&&"none"!==ub?[0]:[]);Wa.enter().append("g").classed("slicetext",!0);Wa.exit().remove();Wa.each(function(){var pb=F.ensureSingle(A.select(this),"text","",function(zb){zb.attr("data-notex",1)}),Ab=F.ensureUniformFontSize(ba,"outside"===ub?k(ma,na,S.font):m(ma,na,S.font));pb.text(na.text).attr({"class":"slicetext",transform:"","text-anchor":"middle"}).call(y.font,Ab).call(M.convertToTspans,ba);var tb=y.bBox(pb.node());if("outside"===ub)var vb=c(tb,
na);else vb=g(tb,na,ja),"auto"===ub&&1>vb.scale&&(tb=F.ensureUniformFontSize(ba,ma.outsidetextfont),pb.call(y.font,tb),tb=y.bBox(pb.node()),vb=c(tb,na));var qb=vb.textPosAngle;qb=void 0===qb?na.pxmid:x(ja.r,qb);vb.targetX=za+qb[0]*vb.rCenter+(vb.x||0);vb.targetY=Ha+qb[1]*vb.rCenter+(vb.y||0);B(vb,tb);vb.outside&&(qb=vb.targetY,na.yLabelMin=qb-tb.height/2,na.yLabelMid=qb,na.yLabelMax=qb+tb.height/2,na.labelExtraX=0,na.labelExtraY=0,wa=!0);vb.fontSize=Ab.size;H(ma.type,vb,S);W[oa].transform=vb;pb.attr("transform",
F.getTextTransform(vb))})}});var pa=A.select(this).selectAll("g.titletext").data(ma.title.text?[0]:[]);pa.enter().append("g").classed("titletext",!0);pa.exit().remove();pa.each(function(){var na=F.ensureSingle(A.select(this),"text","",function(sa){sa.attr("data-notex",1)}),oa=ma.title.text;ma._meta&&(oa=F.templateString(oa,ma._meta));na.text(oa).attr({"class":"titletext",transform:"","text-anchor":"middle"}).call(y.font,ma.title.font).call(M.convertToTspans,ba);oa="middle center"===ma.title.position?
{x:ja.cx,y:ja.cy,scale:ja.trace.hole*ja.r*2/Math.sqrt(ja.titleBox.width*ja.titleBox.width+ja.titleBox.height*ja.titleBox.height),tx:0,ty:-ja.titleBox.height/2+ja.trace.title.font.size}:d(ja,T);na.attr("transform",K(oa.x,oa.y)+J(Math.min(1,oa.scale))+K(oa.tx,oa.ty))});wa&&q(ra,ma);p(ia,ma);if(wa&&ma.automargin){ia=y.bBox(aa.node());pa=ma.domain;var la=(.5*T.w*(pa.x[1]-pa.x[0])-ja.r)/T.w,ka=(.5*T.h*(pa.y[1]-pa.y[0])-ja.r)/T.h;D.autoMargin(ba,"pie."+ma.uid+".automargin",{xl:pa.x[0]-la,xr:pa.x[1]+la,
yb:pa.y[0]-ka,yt:pa.y[1]+ka,l:Math.max(ja.cx-ja.r-ia.left,0),r:Math.max(ia.right-(ja.cx+ja.r),0),b:Math.max(ia.bottom-(ja.cy+ja.r),0),t:Math.max(ja.cy-ja.r-ia.top,0),pad:5})}})});setTimeout(function(){fa.selectAll("tspan").each(function(){var W=A.select(this);W.attr("dy")&&W.attr("dy",W.attr("dy"))})},0)},formatSliceLabel:z,transformInsideText:g,determineInsideTextFont:m,positionTitleOutside:d,prerenderTitles:a,layoutAreas:t,attachFxHandlers:n,computeTransform:B}},{"../../components/color":666,"../../components/drawing":688,
"../../components/fx":706,"../../lib":803,"../../lib/svg_text_utils":829,"../../plots/plots":917,"../bar/constants":943,"../bar/uniform_text":957,"./event_data":1196,"./helpers":1197,"@plotly/d3":58}],1202:[function(b,N,G){var p=b("@plotly/d3"),n=b("./style_one"),k=b("../bar/uniform_text").resizeText;N.exports=function(m){var a=m._fullLayout._pielayer.selectAll(".trace");k(m,a,"pie");a.each(function(g){var h=g[0].trace;g=p.select(this);g.style({opacity:h.opacity});g.selectAll("path.surface").each(function(r){p.select(this).call(n,
r,h)})})}},{"../bar/uniform_text":957,"./style_one":1203,"@plotly/d3":58}],1203:[function(b,N,G){var p=b("../../components/color"),n=b("./helpers").castOption;N.exports=function(k,m,a){var g=a.marker.line;a=n(g.color,m.pts)||p.defaultLine;g=n(g.width,m.pts)||0;k.style("stroke-width",g).call(p.fill,m.color).call(p.stroke,a)}},{"../../components/color":666,"./helpers":1197}],1204:[function(b,N,G){b=b("../scatter/attributes");N.exports={x:b.x,y:b.y,xy:{valType:"data_array",editType:"calc"},indices:{valType:"data_array",
editType:"calc"},xbounds:{valType:"data_array",editType:"calc"},ybounds:{valType:"data_array",editType:"calc"},text:b.text,marker:{color:{valType:"color",arrayOk:!1,editType:"calc"},opacity:{valType:"number",min:0,max:1,dflt:1,arrayOk:!1,editType:"calc"},blend:{valType:"boolean",dflt:null,editType:"calc"},sizemin:{valType:"number",min:.1,max:2,dflt:.5,editType:"calc"},sizemax:{valType:"number",min:.1,dflt:20,editType:"calc"},border:{color:{valType:"color",arrayOk:!1,editType:"calc"},arearatio:{valType:"number",
min:0,max:1,dflt:0,editType:"calc"},editType:"calc"},editType:"calc"},transforms:void 0}},{"../scatter/attributes":1218}],1205:[function(b,N,G){function p(g,h){this.scene=g;this.uid=h;this.type="pointcloud";this.pickXData=[];this.pickYData=[];this.xData=[];this.yData=[];this.textLabels=[];this.color="rgb(0, 0, 0)";this.name="";this.hoverinfo="all";this.idToIndex=new Int32Array(0);this.bounds=[0,0,0,0];this.pointcloudOptions={positions:new Float32Array(0),idToIndex:this.idToIndex,sizemin:.5,sizemax:12,
color:[0,0,0,1],areaRatio:1,borderColor:[0,0,0,1]};this.pointcloud=n(g.glplot,this.pointcloudOptions);this.pointcloud._trace=this}var n=b("gl-pointcloud2d"),k=b("../../lib/str2rgbarray"),m=b("../../plots/cartesian/autorange").findExtremes,a=b("../scatter/get_trace_color");b=p.prototype;b.handlePick=function(g){var h=this.idToIndex[g.pointId];return{trace:this,dataCoord:g.dataCoord,traceCoord:this.pickXYData?[this.pickXYData[2*h],this.pickXYData[2*h+1]]:[this.pickXData[h],this.pickYData[h]],textLabel:Array.isArray(this.textLabels)?
this.textLabels[h]:this.textLabels,color:this.color,name:this.name,pointIndex:h,hoverinfo:this.hoverinfo}};b.update=function(g){this.index=g.index;this.textLabels=g.text;this.name=g.name;this.hoverinfo=g.hoverinfo;this.bounds=[Infinity,Infinity,-Infinity,-Infinity];this.updateFast(g);this.color=a(g,{})};b.updateFast=function(g){var h=this.xData=this.pickXData=g.x,r=this.yData=this.pickYData=g.y,l=this.pickXYData=g.xy,c=g.xbounds&&g.ybounds,d=g.indices,e=this.bounds,f;if(l){var q=l;l=l.length>>>1;
if(c)e[0]=g.xbounds[0],e[2]=g.xbounds[1],e[1]=g.ybounds[0],e[3]=g.ybounds[1];else for(f=0;f<l;f++){c=q[2*f];var t=q[2*f+1];c<e[0]&&(e[0]=c);c>e[2]&&(e[2]=c);t<e[1]&&(e[1]=t);t>e[3]&&(e[3]=t)}if(!d)for(d=new Int32Array(l),f=0;f<l;f++)d[f]=f}else for(l=h.length,q=new Float32Array(2*l),d=new Int32Array(l),f=0;f<l;f++)c=h[f],t=r[f],d[f]=f,q[2*f]=c,q[2*f+1]=t,c<e[0]&&(e[0]=c),c>e[2]&&(e[2]=c),t<e[1]&&(e[1]=t),t>e[3]&&(e[3]=t);this.idToIndex=d;this.pointcloudOptions.idToIndex=d;this.pointcloudOptions.positions=
q;l=k(g.marker.color);q=k(g.marker.border.color);d=g.opacity*g.marker.opacity;l[3]*=d;this.pointcloudOptions.color=l;l=g.marker.blend;null===l&&(l=100>h.length||100>r.length);this.pointcloudOptions.blend=l;q[3]*=d;this.pointcloudOptions.borderColor=q;q=Math.max(g.marker.sizemax,g.marker.sizemin);this.pointcloudOptions.sizeMin=g.marker.sizemin;this.pointcloudOptions.sizeMax=q;this.pointcloudOptions.areaRatio=g.marker.border.arearatio;this.pointcloud.update(this.pointcloudOptions);h=this.scene.xaxis;
r=this.scene.yaxis;q=q/2||.5;g._extremes[h._id]=m(h,[e[0],e[2]],{ppad:q});g._extremes[r._id]=m(r,[e[1],e[3]],{ppad:q})};b.dispose=function(){this.pointcloud.dispose()};N.exports=function(g,h){g=new p(g,h.uid);g.update(h);return g}},{"../../lib/str2rgbarray":828,"../../plots/cartesian/autorange":853,"../scatter/get_trace_color":1228,"gl-pointcloud2d":328}],1206:[function(b,N,G){var p=b("../../lib"),n=b("./attributes");N.exports=function(k,m,a){function g(h,r){return p.coerce(k,m,n,h,r)}g("x");g("y");
g("xbounds");g("ybounds");k.xy&&k.xy instanceof Float32Array&&(m.xy=k.xy);k.indices&&k.indices instanceof Int32Array&&(m.indices=k.indices);g("text");g("marker.color",a);g("marker.opacity");g("marker.blend");g("marker.sizemin");g("marker.sizemax");g("marker.border.color",a);g("marker.border.arearatio");m._length=null}},{"../../lib":803,"./attributes":1204}],1207:[function(b,N,G){N.exports={attributes:b("./attributes"),supplyDefaults:b("./defaults"),calc:b("../scatter3d/calc"),plot:b("./convert"),
moduleType:"trace",name:"pointcloud",basePlotModule:b("../../plots/gl2d"),categories:["gl","gl2d","showLegend"],meta:{}}},{"../../plots/gl2d":894,"../scatter3d/calc":1247,"./attributes":1204,"./convert":1205,"./defaults":1206}],1208:[function(b,N,G){G=b("../../plots/font_attributes");var p=b("../../plots/attributes"),n=b("../../components/color/attributes"),k=b("../../components/fx/attributes"),m=b("../../plots/domain").attributes,a=b("../../plots/template_attributes").hovertemplateAttrs,g=b("../../components/colorscale/attributes"),
h=b("../../plot_api/plot_template").templatedArray,r=b("../../plots/cartesian/axis_format_attributes").descriptionOnlyNumbers,l=b("../../lib/extend").extendFlat;b=b("../../plot_api/edit_types").overrideAll;(N.exports=b({hoverinfo:l({},p.hoverinfo,{flags:[],arrayOk:!1}),hoverlabel:k.hoverlabel,domain:m({name:"sankey",trace:!0}),orientation:{valType:"enumerated",values:["v","h"],dflt:"h"},valueformat:{valType:"string",dflt:".3s",description:r("value")},valuesuffix:{valType:"string",dflt:""},arrangement:{valType:"enumerated",
values:["snap","perpendicular","freeform","fixed"],dflt:"snap"},textfont:G({}),customdata:void 0,node:{label:{valType:"data_array",dflt:[]},groups:{valType:"info_array",impliedEdits:{x:[],y:[]},dimensions:2,freeLength:!0,dflt:[],items:{valType:"number",editType:"calc"}},x:{valType:"data_array",dflt:[]},y:{valType:"data_array",dflt:[]},color:{valType:"color",arrayOk:!0},customdata:{valType:"data_array",editType:"calc"},line:{color:{valType:"color",dflt:n.defaultLine,arrayOk:!0},width:{valType:"number",
min:0,dflt:.5,arrayOk:!0}},pad:{valType:"number",arrayOk:!1,min:0,dflt:20},thickness:{valType:"number",arrayOk:!1,min:1,dflt:20},hoverinfo:{valType:"enumerated",values:["all","none","skip"],dflt:"all"},hoverlabel:k.hoverlabel,hovertemplate:a({},{keys:["value","label"]})},link:{label:{valType:"data_array",dflt:[]},color:{valType:"color",arrayOk:!0},customdata:{valType:"data_array",editType:"calc"},line:{color:{valType:"color",dflt:n.defaultLine,arrayOk:!0},width:{valType:"number",min:0,dflt:0,arrayOk:!0}},
source:{valType:"data_array",dflt:[]},target:{valType:"data_array",dflt:[]},value:{valType:"data_array",dflt:[]},hoverinfo:{valType:"enumerated",values:["all","none","skip"],dflt:"all"},hoverlabel:k.hoverlabel,hovertemplate:a({},{keys:["value","label"]}),colorscales:h("concentrationscales",{editType:"calc",label:{valType:"string",editType:"calc",dflt:""},cmax:{valType:"number",editType:"calc",dflt:1},cmin:{valType:"number",editType:"calc",dflt:0},colorscale:l(g().colorscale,{dflt:[[0,"white"],[1,
"black"]]})})}},"calc","nested")).transforms=void 0},{"../../components/color/attributes":665,"../../components/colorscale/attributes":673,"../../components/fx/attributes":697,"../../lib/extend":793,"../../plot_api/edit_types":836,"../../plot_api/plot_template":843,"../../plots/attributes":850,"../../plots/cartesian/axis_format_attributes":857,"../../plots/domain":882,"../../plots/font_attributes":883,"../../plots/template_attributes":926}],1209:[function(b,N,G){function p(c,d){var e=c._fullData[d],
f=c._fullLayout,q=f.dragmode,t=e._bgRect;if("pan"!==q&&"zoom"!==q){a(t,"pan"===f.dragmode?"move":"crosshair");f={_id:"x",c2p:r.identity,_offset:e._sankey.translateX,_length:e._sankey.width};e={_id:"y",c2p:r.identity,_offset:e._sankey.translateY,_length:e._sankey.height};var w={gd:c,element:t.node(),plotinfo:{id:d,xaxis:f,yaxis:e,fillRangeItems:r.noop},subplot:d,xaxes:[f],yaxes:[e],doneFnCompleted:function(x){for(var z=c._fullData[d],B=z.node.groups.slice(),A=[],D=0;D<x.length;D++){a:{var C=z._sankey.graph.nodes;
for(var v=0;v<C.length;v++)if(C[v].pointNumber===x[D].pointNumber){C=C[v];break a}C=void 0}if(C)if(C.group){for(v=0;v<C.childrenNodes.length;v++)A.push(C.childrenNodes[v].pointNumber);B[C.pointNumber-z.node._count]=!1}else A.push(C.pointNumber)}x=B.filter(Boolean).concat([A]);l.call("_guiRestyle",c,{"node.groups":[x]},d)},prepFn:function(x,z,B){h(x,z,B,w,q)}};g.init(w)}}N=b("../../plot_api/edit_types").overrideAll;var n=b("../../plots/get_data").getModuleCalcData,k=b("./plot"),m=b("../../components/fx/layout_attributes"),
a=b("../../lib/setcursor"),g=b("../../components/dragelement"),h=b("../../plots/cartesian/select").prepSelect,r=b("../../lib"),l=b("../../registry");G.name="sankey";G.baseLayoutAttrOverrides=N({hoverlabel:m.hoverlabel},"plot","nested");G.plot=function(c){var d=n(c.calcdata,"sankey")[0];k(c,d);G.updateFx(c)};G.clean=function(c,d,e,f){c=f._has&&f._has("sankey");d=d._has&&d._has("sankey");c&&!d&&(f._paperdiv.selectAll(".sankey").remove(),f._paperdiv.selectAll(".bgsankey").remove())};G.updateFx=function(c){for(var d=
0;d<c._fullData.length;d++)p(c,d)}},{"../../components/dragelement":685,"../../components/fx/layout_attributes":707,"../../lib":803,"../../lib/setcursor":824,"../../plot_api/edit_types":836,"../../plots/cartesian/select":874,"../../plots/get_data":891,"../../registry":931,"./plot":1214}],1210:[function(b,N,G){function p(r,l,c){for(var d=k.init2dArray(r,0),e=0;e<Math.min(l.length,c.length);e++)if(k.isIndex(l[e],r)&&k.isIndex(c[e],r)){if(l[e]===c[e])return!0;d[l[e]].push(c[e])}return n(d).components.some(function(f){return 1<
f.length})}var n=b("strongly-connected-components"),k=b("../../lib"),m=b("../../lib/gup").wrap,a=k.isArrayOrTypedArray,g=k.isIndex,h=b("../../components/colorscale");N.exports=function(r,l){var c=l.node,d=l.link;r=[];var e=a(d.color),f=a(d.customdata),q={},t={},w=d.colorscales.length,x;for(x=0;x<w;x++){var z=d.colorscales[x],B=h.extractScale(z,{cLetter:"c"});B=h.makeColorScaleFunc(B);t[z.label]=B}for(x=w=0;x<d.value.length;x++)d.source[x]>w&&(w=d.source[x]),d.target[x]>w&&(w=d.target[x]);w+=1;l.node._count=
w;l=l.node.groups;z={};for(x=0;x<l.length;x++){var A=l[x];for(B=0;B<A.length;B++){var D=A[B],C=w+x;z.hasOwnProperty(D)?k.warn("Node "+D+" is already part of a group."):z[D]=C}}B=[];A=[];for(x=0;x<d.value.length;x++){D=d.value[x];C=d.source[x];var v=d.target[x];if(0<D&&g(C,w)&&g(v,w)&&(!z.hasOwnProperty(C)||!z.hasOwnProperty(v)||z[C]!==z[v])){z.hasOwnProperty(v)&&(v=z[v]);z.hasOwnProperty(C)&&(C=z[C]);C=+C;v=+v;q[C]=q[v]=!0;var y="";d.label&&d.label[x]&&(y=d.label[x]);var F=null;y&&t.hasOwnProperty(y)&&
(F=t[y]);r.push({pointNumber:x,label:y,color:e?d.color[x]:d.color,customdata:f?d.customdata[x]:d.customdata,concentrationscale:F,source:C,target:v,value:+D});B.push(C);A.push(v)}}d=w+l.length;f=a(c.color);t=a(c.customdata);e=[];for(x=0;x<d;x++)q[x]&&e.push({group:x>w-1,childrenNodes:[],pointNumber:x,label:c.label[x],color:f?c.color[x]:c.color,customdata:t?c.customdata[x]:c.customdata});c=!1;p(d,B,A)&&(c=!0);return m({circular:c,_nodes:e,_links:r,_groups:l,_groupLookup:z})}},{"../../components/colorscale":678,
"../../lib":803,"../../lib/gup":800,"strongly-connected-components":590}],1211:[function(b,N,G){N.exports={nodeTextOffsetHorizontal:4,nodeTextOffsetVertical:3,nodePadAcross:10,sankeyIterations:50,forceIterations:5,forceTicksPerFrame:10,duration:500,ease:"linear",cn:{sankey:"sankey",sankeyLinks:"sankey-links",sankeyLink:"sankey-link",sankeyNodeSet:"sankey-node-set",sankeyNode:"sankey-node",nodeRect:"node-rect",nodeLabel:"node-label"}}},{}],1212:[function(b,N,G){function p(c,d){function e(f,q){return n.coerce(c,
d,k.link.colorscales,f,q)}e("label");e("cmin");e("cmax");e("colorscale")}var n=b("../../lib"),k=b("./attributes"),m=b("../../components/color"),a=b("tinycolor2"),g=b("../../plots/domain").defaults,h=b("../../components/fx/hoverlabel_defaults"),r=b("../../plot_api/plot_template"),l=b("../../plots/array_container_defaults");N.exports=function(c,d,e,f){function q(v,y){return n.coerce(c,d,k,v,y)}function t(v,y){return n.coerce(x,z,k.node,v,y)}function w(v,y){return n.coerce(A,D,k.link,v,y)}e=n.extendDeep(f.hoverlabel,
c.hoverlabel);var x=c.node,z=r.newContainer(d,"node");t("label");t("groups");t("x");t("y");t("pad");t("thickness");t("line.color");t("line.width");t("hoverinfo",c.hoverinfo);h(x,z,t,e);t("hovertemplate");var B=f.colorway;t("color",z.label.map(function(v,y){return m.addOpacity(B[y%B.length],.8)}));t("customdata");var A=c.link||{},D=r.newContainer(d,"link");w("label");w("source");w("target");w("value");w("line.color");w("line.width");w("hoverinfo",c.hoverinfo);h(A,D,w,e);w("hovertemplate");e=.333>a(f.paper_bgcolor).getLuminance()?
"rgba(255, 255, 255, 0.6)":"rgba(0, 0, 0, 0.2)";w("color",n.repeat(e,D.value.length));w("customdata");l(A,D,{name:"colorscales",handleItemDefaults:p});g(d,f,q);q("orientation");q("valueformat");q("valuesuffix");var C;z.x.length&&z.y.length&&(C="freeform");q("arrangement",C);n.coerceFont(q,"textfont",n.extendFlat({},f.font));d._length=null}},{"../../components/color":666,"../../components/fx/hoverlabel_defaults":704,"../../lib":803,"../../plot_api/plot_template":843,"../../plots/array_container_defaults":849,
"../../plots/domain":882,"./attributes":1208,tinycolor2:598}],1213:[function(b,N,G){N.exports={attributes:b("./attributes"),supplyDefaults:b("./defaults"),calc:b("./calc"),plot:b("./plot"),moduleType:"trace",name:"sankey",basePlotModule:b("./base_plot"),selectPoints:b("./select.js"),categories:["noOpacity"],meta:{}}},{"./attributes":1208,"./base_plot":1209,"./calc":1210,"./defaults":1212,"./plot":1214,"./select.js":1216}],1214:[function(b,N,G){function p(A){return""!==A}function n(A,D){return A.filter(function(C){return C.key===
D.traceId})}function k(A,D){e.select(A).select("path").style("fill-opacity",D);e.select(A).select("rect").style("fill-opacity",D)}function m(A){e.select(A).select("text.name").style("fill","black")}function a(A){return function(D){return-1!==A.node.sourceLinks.indexOf(D.link)||-1!==A.node.targetLinks.indexOf(D.link)}}function g(A){return function(D){return-1!==D.node.sourceLinks.indexOf(A.link)||-1!==D.node.targetLinks.indexOf(A.link)}}function h(A,D,C){D&&C&&n(C,D).selectAll("."+z.sankeyLink).filter(a(D)).call(l.bind(0,
D,C,!1))}function r(A,D,C){D&&C&&n(C,D).selectAll("."+z.sankeyLink).filter(a(D)).call(c.bind(0,D,C,!1))}function l(A,D,C,v){var y=v.datum().link.label;v.style("fill-opacity",function(F){if(!F.link.concentrationscale)return.4});y&&n(D,A).selectAll("."+z.sankeyLink).filter(function(F){return F.link.label===y}).style("fill-opacity",function(F){if(!F.link.concentrationscale)return.4});C&&n(D,A).selectAll("."+z.sankeyNode).filter(g(A)).call(h)}function c(A,D,C,v){var y=v.datum().link.label;v.style("fill-opacity",
function(F){return F.tinyColorAlpha});y&&n(D,A).selectAll("."+z.sankeyLink).filter(function(F){return F.link.label===y}).style("fill-opacity",function(F){return F.tinyColorAlpha});C&&n(D,A).selectAll(z.sankeyNode).filter(g(A)).call(r)}function d(A,D){A=f.nestedProperty(A.hoverlabel||{},D).get();return Array.isArray(A)?!1:A}var e=b("@plotly/d3"),f=b("../../lib"),q=f.numberFormat,t=b("./render"),w=b("../../components/fx"),x=b("../../components/color"),z=b("./constants").cn,B=f._;N.exports=function(A,
D){for(var C=A._fullLayout,v=C._paper,y=C._size,F=0;F<A._fullData.length;F++)if(A._fullData[F].visible&&A._fullData[F].type===z.sankey&&!A._fullData[F]._viewInitial){var J=A._fullData[F].node;A._fullData[F]._viewInitial={node:{groups:J.groups.slice(),x:J.x.slice(),y:J.y.slice()}}}var K=B(A,"source:")+" ",M=B(A,"target:")+" ",H=B(A,"concentration:")+" ",O=B(A,"incoming flow count:")+" ",I=B(A,"outgoing flow count:")+" ";t(A,v,D,{width:y.w,height:y.h,margin:{t:y.t,r:y.r,b:y.b,l:y.l}},{linkEvents:{hover:function(L,
Q,Z){!1!==A._fullLayout.hovermode&&(e.select(L).call(l.bind(0,Q,Z,!0)),"skip"!==Q.link.trace.link.hoverinfo&&(Q.link.fullData=Q.link.trace,A.emit("plotly_hover",{event:e.event,points:[Q.link]})))},follow:function(L,Q){function Z(aa){if(aa.circular){var ja=(aa.circularPathData.leftInnerExtent+aa.circularPathData.rightInnerExtent)/2;var ma=aa.circularPathData.verticalFullExtent}else ja=(aa.source.x1+aa.target.x0)/2,ma=(aa.y0+aa.y1)/2;ja=[ja,ma];"v"===aa.trace.orientation&&ja.reverse();ja[0]+=Q.parent.translateX;
ja[1]+=Q.parent.translateY;return ja}if(!1!==A._fullLayout.hovermode&&(L=Q.link.trace.link,"none"!==L.hoverinfo&&"skip"!==L.hoverinfo)){for(var ba=[],V=0,S=0;S<Q.flow.links.length;S++){var T=Q.flow.links[S];if("closest"!==A._fullLayout.hovermode||Q.link.pointNumber===T.pointNumber){Q.link.pointNumber===T.pointNumber&&(V=S);T.fullData=T.trace;L=Q.link.trace.link;var fa=Z(T),W={valueLabel:q(Q.valueFormat)(T.value)+Q.valueSuffix};ba.push({x:fa[0],y:fa[1],name:W.valueLabel,text:[T.label||"",K+T.source.label,
M+T.target.label,T.concentrationscale?H+q("%0.2f")(T.flow.labelConcentration):""].filter(p).join("\x3cbr\x3e"),color:d(L,"bgcolor")||x.addOpacity(T.color,1),borderColor:d(L,"bordercolor"),fontFamily:d(L,"font.family"),fontSize:d(L,"font.size"),fontColor:d(L,"font.color"),nameLength:d(L,"namelength"),textAlign:d(L,"align"),idealAlign:e.event.x<fa[0]?"right":"left",hovertemplate:L.hovertemplate,hovertemplateLabels:W,eventData:[T]})}}w.loneHover(ba,{container:C._hoverlayer.node(),outerContainer:C._paper.node(),
gd:A,anchorIndex:V}).each(function(){Q.link.concentrationscale||k(this,.65);m(this)})}},unhover:function(L,Q,Z){!1!==A._fullLayout.hovermode&&(e.select(L).call(c.bind(0,Q,Z,!0)),"skip"!==Q.link.trace.link.hoverinfo&&(Q.link.fullData=Q.link.trace,A.emit("plotly_unhover",{event:e.event,points:[Q.link]})),w.loneUnhover(C._hoverlayer.node()))},select:function(L,Q){L=Q.link;L.originalEvent=e.event;A._hoverdata=[L];w.click(A,{target:!0})}},nodeEvents:{hover:function(L,Q,Z){!1!==A._fullLayout.hovermode&&
(e.select(L).call(h,Q,Z),"skip"!==Q.node.trace.node.hoverinfo&&(Q.node.fullData=Q.node.trace,A.emit("plotly_hover",{event:e.event,points:[Q.node]})))},follow:function(L,Q){if(!1!==A._fullLayout.hovermode){var Z=Q.node.trace.node;if("none"!==Z.hoverinfo&&"skip"!==Z.hoverinfo){L=e.select(L).select("."+z.nodeRect);var ba=A._fullLayout._paperdiv.node().getBoundingClientRect(),V=L.node().getBoundingClientRect();L=V.left-2-ba.left;var S=V.right+2-ba.left;ba=V.top+V.height/4-ba.top;V={valueLabel:q(Q.valueFormat)(Q.node.value)+
Q.valueSuffix};Q.node.fullData=Q.node.trace;A._fullLayout._calcInverseTransform(A);var T=A._fullLayout._invScaleX;Q=w.loneHover({x0:T*L,x1:T*S,y:A._fullLayout._invScaleY*ba,name:q(Q.valueFormat)(Q.node.value)+Q.valueSuffix,text:[Q.node.label,O+Q.node.targetLinks.length,I+Q.node.sourceLinks.length].filter(p).join("\x3cbr\x3e"),color:d(Z,"bgcolor")||Q.tinyColorHue,borderColor:d(Z,"bordercolor"),fontFamily:d(Z,"font.family"),fontSize:d(Z,"font.size"),fontColor:d(Z,"font.color"),nameLength:d(Z,"namelength"),
textAlign:d(Z,"align"),idealAlign:"left",hovertemplate:Z.hovertemplate,hovertemplateLabels:V,eventData:[Q.node]},{container:C._hoverlayer.node(),outerContainer:C._paper.node(),gd:A});k(Q,.85);m(Q)}}},unhover:function(L,Q,Z){!1!==A._fullLayout.hovermode&&(e.select(L).call(r,Q,Z),"skip"!==Q.node.trace.node.hoverinfo&&(Q.node.fullData=Q.node.trace,A.emit("plotly_unhover",{event:e.event,points:[Q.node]})),w.loneUnhover(C._hoverlayer.node()))},select:function(L,Q,Z){var ba=Q.node;ba.originalEvent=e.event;
A._hoverdata=[ba];e.select(L).call(r,Q,Z);w.click(A,{target:!0})}}})}},{"../../components/color":666,"../../components/fx":706,"../../lib":803,"./constants":1211,"./render":1215,"@plotly/d3":58}],1215:[function(b,N,G){function p(T,fa,W){function aa(ub){ub.forEach(function(pb){var Ab=0;var tb=pb.length,vb;pb.sort(function(zb,La){return zb.y0-La.y0});for(vb=0;vb<tb;++vb){var qb=pb[vb];qb.y0>=Ab||(Ab-=qb.y0,1E-6<Ab&&(qb.y0+=Ab,qb.y1+=Ab));Ab=qb.y1+wa}})}function ja(ub){var pb=ub.map(function(Ka,ya){return{x0:Ka.x0,
index:ya}}).sort(function(Ka,ya){return Ka.x0-ya.x0}),Ab=[],tb=-1,vb=-Infinity;for(Wa=0;Wa<pb.length;Wa++){var qb=ub[pb[Wa].index];if(qb.x0>vb+pa){tb+=1;var zb=qb.x0}vb=qb.x0;Ab[tb]||(Ab[tb]=[]);Ab[tb].push(qb);var La=zb-qb.x0;qb.x0+=La;qb.x1+=La}return Ab}var ma=Q(fa);fa=ma.trace;var ia=fa.domain,ra="h"===fa.orientation,wa=fa.node.pad,pa=fa.node.thickness,la=T.width*(ia.x[1]-ia.x[0]),ka=T.height*(ia.y[1]-ia.y[0]),na=ma._nodes,oa=ma._links,sa=ma.circular;var za=sa?v.sankeyCircular().circularLinkGap(0):
C.sankey();za.iterations(y.sankeyIterations).size(ra?[la,ka]:[ka,la]).nodeWidth(pa).nodePadding(wa).nodeId(function(ub){return ub.pointNumber}).nodes(na).links(oa);var Ha=za();za.nodePadding()<wa&&M.warn("node.pad was reduced to ",za.nodePadding()," to fit within the figure.");var Wa,Za,bb;for(hb in ma._groupLookup){na=parseInt(ma._groupLookup[hb]);for(Wa=0;Wa<Ha.nodes.length;Wa++)if(Ha.nodes[Wa].pointNumber===na){var sb=Ha.nodes[Wa];break}sb&&(na={pointNumber:parseInt(hb),x0:sb.x0,x1:sb.x1,y0:sb.y0,
y1:sb.y1,partOfGroup:!0,sourceLinks:[],targetLinks:[]},Ha.nodes.unshift(na),sb.childrenNodes.unshift(na))}(function(){for(Wa=0;Wa<Ha.nodes.length;Wa++){var ub=Ha.nodes[Wa],pb={};for(Za=0;Za<ub.targetLinks.length;Za++){var Ab=ub.targetLinks[Za];var tb=Ab.source.pointNumber+":"+Ab.target.pointNumber;pb.hasOwnProperty(tb)||(pb[tb]=[]);pb[tb].push(Ab)}var vb=Object.keys(pb);for(Za=0;Za<vb.length;Za++){tb=vb[Za];tb=pb[tb];var qb=0,zb={};for(bb=0;bb<tb.length;bb++)Ab=tb[bb],zb[Ab.label]||(zb[Ab.label]=
0),zb[Ab.label]+=Ab.value,qb+=Ab.value;for(bb=0;bb<tb.length;bb++)Ab=tb[bb],Ab.flow={value:qb,labelConcentration:zb[Ab.label]/qb,concentration:Ab.value/qb,links:tb},Ab.concentrationscale&&(Ab.color=F(Ab.concentrationscale(Ab.flow.labelConcentration)))}for(Za=pb=0;Za<ub.sourceLinks.length;Za++)pb+=ub.sourceLinks[Za].value;for(Za=0;Za<ub.sourceLinks.length;Za++)Ab=ub.sourceLinks[Za],Ab.concentrationOut=Ab.value/pb;for(Za=pb=0;Za<ub.targetLinks.length;Za++)pb+=ub.targetLinks[Za].value;for(Za=0;Za<ub.targetLinks.length;Za++)Ab=
ub.targetLinks[Za],Ab.concenrationIn=Ab.value/pb}})();if(fa.node.x.length&&fa.node.y.length){for(Wa=0;Wa<Math.min(fa.node.x.length,fa.node.y.length,Ha.nodes.length);Wa++)if(fa.node.x[Wa]&&fa.node.y[Wa]){var hb=[fa.node.x[Wa]*la,fa.node.y[Wa]*ka];Ha.nodes[Wa].x0=hb[0]-pa/2;Ha.nodes[Wa].x1=hb[0]+pa/2;sb=Ha.nodes[Wa].y1-Ha.nodes[Wa].y0;Ha.nodes[Wa].y0=hb[1]-sb/2;Ha.nodes[Wa].y1=hb[1]+sb/2}"snap"===fa.arrangement&&(na=Ha.nodes,hb=ja(na),aa(hb));za.update(Ha)}return{circular:sa,key:W,trace:fa,guid:M.randstr(),
horizontal:ra,width:la,height:ka,nodePad:fa.node.pad,nodeLineColor:fa.node.line.color,nodeLineWidth:fa.node.line.width,linkLineColor:fa.link.line.color,linkLineWidth:fa.link.line.width,valueFormat:fa.valueformat,valueSuffix:fa.valuesuffix,textFont:fa.textfont,translateX:ia.x[0]*T.width+T.margin.l,translateY:T.height-ia.y[1]*T.height+T.margin.t,dragParallel:ra?ka:la,dragPerpendicular:ra?la:ka,arrangement:fa.arrangement,sankey:za,graph:Ha,forceLayouts:{},interactionState:{dragInProgress:!1,hovered:!1}}}
function n(T,fa,W){var aa=F(fa.color),ja=fa.source.label+"|"+fa.target.label;fa.trace=T.trace;fa.curveNumber=T.trace.index;return{circular:T.circular,key:ja+"__"+W,traceId:T.key,pointNumber:fa.pointNumber,link:fa,tinyColorHue:J.tinyRGB(aa),tinyColorAlpha:aa.getAlpha(),linkPath:k,linkLineColor:T.linkLineColor,linkLineWidth:T.linkLineWidth,valueFormat:T.valueFormat,valueSuffix:T.valueSuffix,sankey:T.sankey,parent:T,interactionState:T.interactionState,flow:fa.flow}}function k(){return function(T){if(T.link.circular){var fa=
T.link,W=fa.width/2,aa=fa.circularPathData;return"top"===fa.circularLinkType?"M "+aa.targetX+" "+(aa.targetY+W)+" L"+aa.rightInnerExtent+" "+(aa.targetY+W)+"A"+(aa.rightLargeArcRadius+W)+" "+(aa.rightSmallArcRadius+W)+" 0 0 1 "+(aa.rightFullExtent-W)+" "+(aa.targetY-aa.rightSmallArcRadius)+"L"+(aa.rightFullExtent-W)+" "+aa.verticalRightInnerExtent+"A"+(aa.rightLargeArcRadius+W)+" "+(aa.rightLargeArcRadius+W)+" 0 0 1 "+aa.rightInnerExtent+" "+(aa.verticalFullExtent-W)+"L"+aa.leftInnerExtent+" "+(aa.verticalFullExtent-
W)+"A"+(aa.leftLargeArcRadius+W)+" "+(aa.leftLargeArcRadius+W)+" 0 0 1 "+(aa.leftFullExtent+W)+" "+aa.verticalLeftInnerExtent+"L"+(aa.leftFullExtent+W)+" "+(aa.sourceY-aa.leftSmallArcRadius)+"A"+(aa.leftLargeArcRadius+W)+" "+(aa.leftSmallArcRadius+W)+" 0 0 1 "+aa.leftInnerExtent+" "+(aa.sourceY+W)+"L"+aa.sourceX+" "+(aa.sourceY+W)+"L"+aa.sourceX+" "+(aa.sourceY-W)+"L"+aa.leftInnerExtent+" "+(aa.sourceY-W)+"A"+(aa.leftLargeArcRadius-W)+" "+(aa.leftSmallArcRadius-W)+" 0 0 0 "+(aa.leftFullExtent-W)+
" "+(aa.sourceY-aa.leftSmallArcRadius)+"L"+(aa.leftFullExtent-W)+" "+aa.verticalLeftInnerExtent+"A"+(aa.leftLargeArcRadius-W)+" "+(aa.leftLargeArcRadius-W)+" 0 0 0 "+aa.leftInnerExtent+" "+(aa.verticalFullExtent+W)+"L"+aa.rightInnerExtent+" "+(aa.verticalFullExtent+W)+"A"+(aa.rightLargeArcRadius-W)+" "+(aa.rightLargeArcRadius-W)+" 0 0 0 "+(aa.rightFullExtent+W)+" "+aa.verticalRightInnerExtent+"L"+(aa.rightFullExtent+W)+" "+(aa.targetY-aa.rightSmallArcRadius)+"A"+(aa.rightLargeArcRadius-W)+" "+(aa.rightSmallArcRadius-
W)+" 0 0 0 "+aa.rightInnerExtent+" "+(aa.targetY-W)+"L"+aa.targetX+" "+(aa.targetY-W)+"Z":"M "+aa.targetX+" "+(aa.targetY-W)+" L"+aa.rightInnerExtent+" "+(aa.targetY-W)+"A"+(aa.rightLargeArcRadius+W)+" "+(aa.rightSmallArcRadius+W)+" 0 0 0 "+(aa.rightFullExtent-W)+" "+(aa.targetY+aa.rightSmallArcRadius)+"L"+(aa.rightFullExtent-W)+" "+aa.verticalRightInnerExtent+"A"+(aa.rightLargeArcRadius+W)+" "+(aa.rightLargeArcRadius+W)+" 0 0 0 "+aa.rightInnerExtent+" "+(aa.verticalFullExtent+W)+"L"+aa.leftInnerExtent+
" "+(aa.verticalFullExtent+W)+"A"+(aa.leftLargeArcRadius+W)+" "+(aa.leftLargeArcRadius+W)+" 0 0 0 "+(aa.leftFullExtent+W)+" "+aa.verticalLeftInnerExtent+"L"+(aa.leftFullExtent+W)+" "+(aa.sourceY+aa.leftSmallArcRadius)+"A"+(aa.leftLargeArcRadius+W)+" "+(aa.leftSmallArcRadius+W)+" 0 0 0 "+aa.leftInnerExtent+" "+(aa.sourceY-W)+"L"+aa.sourceX+" "+(aa.sourceY-W)+"L"+aa.sourceX+" "+(aa.sourceY+W)+"L"+aa.leftInnerExtent+" "+(aa.sourceY+W)+"A"+(aa.leftLargeArcRadius-W)+" "+(aa.leftSmallArcRadius-W)+" 0 0 1 "+
(aa.leftFullExtent-W)+" "+(aa.sourceY+aa.leftSmallArcRadius)+"L"+(aa.leftFullExtent-W)+" "+aa.verticalLeftInnerExtent+"A"+(aa.leftLargeArcRadius-W)+" "+(aa.leftLargeArcRadius-W)+" 0 0 1 "+aa.leftInnerExtent+" "+(aa.verticalFullExtent-W)+"L"+aa.rightInnerExtent+" "+(aa.verticalFullExtent-W)+"A"+(aa.rightLargeArcRadius-W)+" "+(aa.rightLargeArcRadius-W)+" 0 0 1 "+(aa.rightFullExtent+W)+" "+aa.verticalRightInnerExtent+"L"+(aa.rightFullExtent+W)+" "+(aa.targetY+aa.rightSmallArcRadius)+"A"+(aa.rightLargeArcRadius-
W)+" "+(aa.rightSmallArcRadius-W)+" 0 0 1 "+aa.rightInnerExtent+" "+(aa.targetY+W)+"L"+aa.targetX+" "+(aa.targetY+W)+"Z"}fa=T.link.source.x1;W=T.link.target.x0;var ja=A(fa,W);aa=ja(.5);ja=ja(.5);var ma=T.link.y0-T.link.width/2,ia=T.link.y0+T.link.width/2,ra=T.link.y1-T.link.width/2;T=T.link.y1+T.link.width/2;return"M"+fa+","+ma+"C"+aa+","+ma+" "+ja+","+ra+" "+W+","+ra+"L"+W+","+T+"C"+ja+","+T+" "+aa+","+ia+" "+fa+","+ia+"Z"}}function m(T,fa){var W=F(fa.color),aa=y.nodePadAcross,ja=T.nodePad/2;fa.dx=
fa.x1-fa.x0;fa.dy=fa.y1-fa.y0;var ma=fa.dx,ia=Math.max(.5,fa.dy),ra="node_"+fa.pointNumber;fa.group&&(ra=M.randstr());fa.trace=T.trace;fa.curveNumber=T.trace.index;return{index:fa.pointNumber,key:ra,partOfGroup:fa.partOfGroup||!1,group:fa.group,traceId:T.key,trace:T.trace,node:fa,nodePad:T.nodePad,nodeLineColor:T.nodeLineColor,nodeLineWidth:T.nodeLineWidth,textFont:T.textFont,size:T.horizontal?T.height:T.width,visibleWidth:Math.ceil(ma),visibleHeight:ia,zoneX:-aa,zoneY:-ja,zoneWidth:ma+2*aa,zoneHeight:ia+
2*ja,labelY:T.horizontal?fa.dy/2+1:fa.dx/2+1,left:1===fa.originalLayer,sizeAcross:T.width,forceLayouts:T.forceLayouts,horizontal:T.horizontal,darkBackground:128>=W.getBrightness(),tinyColorHue:J.tinyRGB(W),tinyColorAlpha:W.getAlpha(),valueFormat:T.valueFormat,valueSuffix:T.valueSuffix,sankey:T.sankey,graph:T.graph,arrangement:T.arrangement,uniqueNodeLabelPathId:[T.guid,T.key,ra].join("_"),interactionState:T.interactionState,figure:T}}function a(T){T.attr("transform",function(fa){return H(fa.node.x0.toFixed(3),
fa.node.y0.toFixed(3))})}function g(T){T.call(a)}function h(T){T.attr("width",function(fa){return fa.node.x1-fa.node.x0}).attr("height",function(fa){return fa.visibleHeight})}function r(T){return H(T.translateX,T.translateY)+(T.horizontal?"matrix(1 0 0 1 0 0)":"matrix(0 1 1 0 0 0)")}function l(T,fa,W){T.on(".basic",null).on("mouseover.basic",function(aa){aa.interactionState.dragInProgress||aa.partOfGroup||(W.hover(this,aa,fa),aa.interactionState.hovered=[this,aa])}).on("mousemove.basic",function(aa){aa.interactionState.dragInProgress||
aa.partOfGroup||(W.follow(this,aa),aa.interactionState.hovered=[this,aa])}).on("mouseout.basic",function(aa){aa.interactionState.dragInProgress||aa.partOfGroup||(W.unhover(this,aa,fa),aa.interactionState.hovered=!1)}).on("click.basic",function(aa){aa.interactionState.hovered&&(W.unhover(this,aa,fa),aa.interactionState.hovered=!1);aa.interactionState.dragInProgress||aa.partOfGroup||W.select(this,aa,fa)})}function c(T,fa,W,aa){var ja=D.behavior.drag().origin(function(ma){return{x:ma.node.x0+ma.visibleWidth/
2,y:ma.node.y0+ma.visibleHeight/2}}).on("dragstart",function(ma){if("fixed"!==ma.arrangement&&(M.ensureSingle(aa._fullLayout._infolayer,"g","dragcover",function(ra){aa._fullLayout._dragCover=ra}),M.raiseToTop(this),ma.interactionState.dragInProgress=ma.node,w(ma.node),ma.interactionState.hovered&&(W.nodeEvents.unhover.apply(0,ma.interactionState.hovered),ma.interactionState.hovered=!1),"snap"===ma.arrangement)){var ia=ma.traceId+"|"+ma.key;ma.forceLayouts[ia]?ma.forceLayouts[ia].alpha(1):d(T,ia,ma,
aa);e(T,fa,ma,ia,aa)}}).on("drag",function(ma){if("fixed"!==ma.arrangement){var ia=D.event.x,ra=D.event.y;"snap"===ma.arrangement?(ma.node.x0=ia-ma.visibleWidth/2,ma.node.x1=ia+ma.visibleWidth/2):("freeform"===ma.arrangement&&(ma.node.x0=ia-ma.visibleWidth/2,ma.node.x1=ia+ma.visibleWidth/2),ra=Math.max(0,Math.min(ma.size-ma.visibleHeight/2,ra)));ma.node.y0=ra-ma.visibleHeight/2;ma.node.y1=ra+ma.visibleHeight/2;w(ma.node);"snap"!==ma.arrangement&&(ma.sankey.update(ma.graph),T.filter(x(ma)).call(g),
fa.attr("d",k()))}}).on("dragend",function(ma){if("fixed"!==ma.arrangement){ma.interactionState.dragInProgress=!1;for(var ia=0;ia<ma.node.childrenNodes.length;ia++)ma.node.childrenNodes[ia].x=ma.node.x,ma.node.childrenNodes[ia].y=ma.node.y;"snap"!==ma.arrangement&&q(ma,aa)}});T.on(".drag",null).call(ja)}function d(T,fa,W,aa){z(W.graph.nodes);var ja=W.graph.nodes.filter(function(ma){return ma.originalX===W.node.originalX}).filter(function(ma){return!ma.partOfGroup});W.forceLayouts[fa]=B.forceSimulation(ja).alphaDecay(0).force("collide",
B.forceCollide().radius(function(ma){return ma.dy/2+W.nodePad/2}).strength(1).iterations(y.forceIterations)).force("constrain",f(T,fa,ja,W,aa)).stop()}function e(T,fa,W,aa,ja){window.requestAnimationFrame(function ia(){var ra;for(ra=0;ra<y.forceTicksPerFrame;ra++)W.forceLayouts[aa].tick();ra=W.graph.nodes;for(var wa=0;wa<ra.length;wa++)ra[wa].y0=ra[wa].y-ra[wa].dy/2,ra[wa].y1=ra[wa].y0+ra[wa].dy,ra[wa].x0=ra[wa].x-ra[wa].dx/2,ra[wa].x1=ra[wa].x0+ra[wa].dx;W.sankey.update(W.graph);T.filter(x(W)).call(g);
fa.attr("d",k());0<W.forceLayouts[aa].alpha()?window.requestAnimationFrame(ia):(ra=W.node.originalX,W.node.x0=ra-W.visibleWidth/2,W.node.x1=ra+W.visibleWidth/2,q(W,ja))})}function f(T,fa,W,aa){return function(){for(var ja=0,ma=0;ma<W.length;ma++){var ia=W[ma];ia===aa.interactionState.dragInProgress?(ia.x=ia.lastDraggedX,ia.y=ia.lastDraggedY):(ia.vx=(ia.originalX-ia.x)/y.forceTicksPerFrame,ia.y=Math.min(aa.size-ia.dy/2,Math.max(ia.dy/2,ia.y)));ja=Math.max(ja,Math.abs(ia.vx),Math.abs(ia.vy))}!aa.interactionState.dragInProgress&&
.1>ja&&0<aa.forceLayouts[fa].alpha()&&aa.forceLayouts[fa].alpha(0)}}function q(T,fa){for(var W=[],aa=[],ja=0;ja<T.graph.nodes.length;ja++){var ma=(T.graph.nodes[ja].y0+T.graph.nodes[ja].y1)/2;W.push((T.graph.nodes[ja].x0+T.graph.nodes[ja].x1)/2/T.figure.width);aa.push(ma/T.figure.height)}ba.call("_guiRestyle",fa,{"node.x":[W],"node.y":[aa]},T.trace.index).then(function(){fa._fullLayout._dragCover&&fa._fullLayout._dragCover.remove()})}function t(T){var fa=[],W;for(W=0;W<T.length;W++)T[W].originalX=
(T[W].x0+T[W].x1)/2,T[W].originalY=(T[W].y0+T[W].y1)/2,-1===fa.indexOf(T[W].originalX)&&fa.push(T[W].originalX);fa.sort(function(aa,ja){return aa-ja});for(W=0;W<T.length;W++)T[W].originalLayerIndex=fa.indexOf(T[W].originalX),T[W].originalLayer=T[W].originalLayerIndex/(fa.length-1)}function w(T){T.lastDraggedX=T.x0+T.dx/2;T.lastDraggedY=T.y0+T.dy/2}function x(T){return function(fa){return fa.node.originalX===T.node.originalX}}function z(T){for(var fa=0;fa<T.length;fa++)T[fa].y=(T[fa].y0+T[fa].y1)/
2,T[fa].x=(T[fa].x0+T[fa].x1)/2}var B=b("d3-force"),A=b("d3-interpolate").interpolateNumber,D=b("@plotly/d3"),C=b("@plotly/d3-sankey"),v=b("@plotly/d3-sankey-circular"),y=b("./constants"),F=b("tinycolor2"),J=b("../../components/color"),K=b("../../components/drawing"),M=b("../../lib"),H=M.strTranslate,O=M.strRotate;G=b("../../lib/gup");var I=G.keyFun,L=G.repeat,Q=G.unwrap,Z=b("../../lib/svg_text_utils"),ba=b("../../registry");b=b("../../constants/alignment");var V=b.CAP_SHIFT,S=b.LINE_SPACING;N.exports=
function(T,fa,W,aa,ja){var ma=!1;M.ensureSingle(T._fullLayout._infolayer,"g","first-render",function(){ma=!0});var ia=T._fullLayout._dragCover;W=W.filter(function(ra){return Q(ra).trace.visible}).map(p.bind(null,aa));fa=fa.selectAll("."+y.cn.sankey).data(W,I);fa.exit().remove();fa.enter().append("g").classed(y.cn.sankey,!0).style("box-sizing","content-box").style("position","absolute").style("left",0).style("shape-rendering","geometricPrecision").style("pointer-events","auto").attr("transform",r);
fa.each(function(ra,wa){T._fullData[wa]._sankey=ra;var pa="bgsankey-"+ra.trace.uid+"-"+wa;M.ensureSingle(T._fullLayout._draggers,"rect",pa);T._fullData[wa]._bgRect=D.select("."+pa);T._fullData[wa]._bgRect.style("pointer-events","all").attr("width",ra.width).attr("height",ra.height).attr("x",ra.translateX).attr("y",ra.translateY).classed("bgsankey",!0).style({fill:"transparent","stroke-width":0})});fa.transition().ease(y.ease).duration(y.duration).attr("transform",r);W=fa.selectAll("."+y.cn.sankeyLinks).data(L,
I);W.enter().append("g").classed(y.cn.sankeyLinks,!0).style("fill","none");W=W.selectAll("."+y.cn.sankeyLink).data(function(ra){return ra.graph.links.filter(function(wa){return wa.value}).map(n.bind(null,ra))},I);W.enter().append("path").classed(y.cn.sankeyLink,!0).call(l,fa,ja.linkEvents);W.style("stroke",function(ra){return 1<ra.link.width||0<ra.linkLineWidth?J.tinyRGB(F(ra.linkLineColor)):ra.tinyColorHue}).style("stroke-opacity",function(ra){return 1<ra.link.width||0<ra.linkLineWidth?J.opacity(ra.linkLineColor):
ra.tinyColorAlpha}).style("fill",function(ra){return ra.tinyColorHue}).style("fill-opacity",function(ra){return ra.tinyColorAlpha}).style("stroke-width",function(ra){return 1<ra.link.width||0<ra.linkLineWidth?ra.linkLineWidth:1}).attr("d",k());W.style("opacity",function(){return T._context.staticPlot||ma||ia?1:0}).transition().ease(y.ease).duration(y.duration).style("opacity",1);W.exit().transition().ease(y.ease).duration(y.duration).style("opacity",0).remove();aa=fa.selectAll("."+y.cn.sankeyNodeSet).data(L,
I);aa.enter().append("g").classed(y.cn.sankeyNodeSet,!0);aa.style("cursor",function(ra){switch(ra.arrangement){case "fixed":return"default";case "perpendicular":return"ns-resize";default:return"move"}});aa=aa.selectAll("."+y.cn.sankeyNode).data(function(ra){var wa=ra.graph.nodes;t(wa);return wa.map(m.bind(null,ra))},I);aa.enter().append("g").classed(y.cn.sankeyNode,!0).call(a).style("opacity",function(ra){return!T._context.staticPlot&&!ma||ra.partOfGroup?0:1});aa.call(l,fa,ja.nodeEvents).call(c,W,
ja,T);aa.transition().ease(y.ease).duration(y.duration).call(a).style("opacity",function(ra){return ra.partOfGroup?0:1});aa.exit().transition().ease(y.ease).duration(y.duration).style("opacity",0).remove();ja=aa.selectAll("."+y.cn.nodeRect).data(L);ja.enter().append("rect").classed(y.cn.nodeRect,!0).call(h);ja.style("stroke-width",function(ra){return ra.nodeLineWidth}).style("stroke",function(ra){return J.tinyRGB(F(ra.nodeLineColor))}).style("stroke-opacity",function(ra){return J.opacity(ra.nodeLineColor)}).style("fill",
function(ra){return ra.tinyColorHue}).style("fill-opacity",function(ra){return ra.tinyColorAlpha});ja.transition().ease(y.ease).duration(y.duration).call(h);ja=aa.selectAll("."+y.cn.nodeLabel).data(L);ja.enter().append("text").classed(y.cn.nodeLabel,!0).style("cursor","default");ja.attr("data-notex",1).text(function(ra){return ra.node.label}).each(function(ra){var wa=D.select(this);K.font(wa,ra.textFont);Z.convertToTspans(wa,T)}).style("text-shadow",Z.makeTextShadow(T._fullLayout.paper_bgcolor)).attr("text-anchor",
function(ra){return ra.horizontal&&ra.left?"end":"start"}).attr("transform",function(ra){var wa=D.select(this),pa=Z.lineCount(wa);wa=ra.nodeLineWidth/2+3;pa=((ra.horizontal?ra.visibleHeight:ra.visibleWidth)-ra.textFont.size*((pa-1)*S-V))/2;ra.horizontal&&(wa=ra.left?-wa:wa+ra.visibleWidth);var la=ra.horizontal?"":"scale(-1,1)"+O(90);return H(ra.horizontal?wa:pa,ra.horizontal?pa:wa)+la});ja.transition().ease(y.ease).duration(y.duration)}},{"../../components/color":666,"../../components/drawing":688,
"../../constants/alignment":771,"../../lib":803,"../../lib/gup":800,"../../lib/svg_text_utils":829,"../../registry":931,"./constants":1211,"@plotly/d3":58,"@plotly/d3-sankey":57,"@plotly/d3-sankey-circular":56,"d3-force":166,"d3-interpolate":171,tinycolor2:598}],1216:[function(b,N,G){N.exports=function(p,n){for(var k=[],m=p.cd[0].trace,a=m._sankey.graph.nodes,g=0;g<a.length;g++){var h=a[g];if(!h.partOfGroup){var r=[(h.x0+h.x1)/2,(h.y0+h.y1)/2];"v"===m.orientation&&r.reverse();n&&n.contains(r,!1,g,
p)&&k.push({pointNumber:h.pointNumber})}}return k}},{}],1217:[function(b,N,G){var p=b("../../lib");N.exports=function(n,k){for(var m=0;m<n.length;m++)n[m].i=m;p.mergeArray(k.text,n,"tx");p.mergeArray(k.texttemplate,n,"txt");p.mergeArray(k.hovertext,n,"htx");p.mergeArray(k.customdata,n,"data");p.mergeArray(k.textposition,n,"tp");k.textfont&&(p.mergeArrayCastPositive(k.textfont.size,n,"ts"),p.mergeArray(k.textfont.color,n,"tc"),p.mergeArray(k.textfont.family,n,"tf"));if(k=k.marker){p.mergeArrayCastPositive(k.size,
n,"ms");p.mergeArrayCastPositive(k.opacity,n,"mo");p.mergeArray(k.symbol,n,"mx");p.mergeArray(k.color,n,"mc");if(m=k.line)p.mergeArray(m.color,n,"mlc"),p.mergeArrayCastPositive(m.width,n,"mlw");(k=k.gradient)&&"none"!==k.type&&(p.mergeArray(k.type,n,"mgt"),p.mergeArray(k.color,n,"mgc"))}}},{"../../lib":803}],1218:[function(b,N,G){function p(c){return{valType:"any",dflt:0,editType:"calc"}}function n(c){return{valType:"enumerated",values:["start","middle","end"],dflt:"middle",editType:"calc"}}G=b("../../plots/cartesian/axis_format_attributes").axisHoverFormat;
var k=b("../../plots/template_attributes").texttemplateAttrs,m=b("../../plots/template_attributes").hovertemplateAttrs,a=b("../../components/colorscale/attributes"),g=b("../../plots/font_attributes"),h=b("../../components/drawing/attributes").dash,r=b("../../components/drawing"),l=b("./constants");b=b("../../lib/extend").extendFlat;N.exports={x:{valType:"data_array",editType:"calc+clearAxisTypes",anim:!0},x0:{valType:"any",dflt:0,editType:"calc+clearAxisTypes",anim:!0},dx:{valType:"number",dflt:1,
editType:"calc",anim:!0},y:{valType:"data_array",editType:"calc+clearAxisTypes",anim:!0},y0:{valType:"any",dflt:0,editType:"calc+clearAxisTypes",anim:!0},dy:{valType:"number",dflt:1,editType:"calc",anim:!0},xperiod:p("x"),yperiod:p("y"),xperiod0:{valType:"any",editType:"calc"},yperiod0:{valType:"any",editType:"calc"},xperiodalignment:n("x"),yperiodalignment:n("y"),xhoverformat:G("x"),yhoverformat:G("y"),stackgroup:{valType:"string",dflt:"",editType:"calc"},orientation:{valType:"enumerated",values:["v",
"h"],editType:"calc"},groupnorm:{valType:"enumerated",values:["","fraction","percent"],dflt:"",editType:"calc"},stackgaps:{valType:"enumerated",values:["infer zero","interpolate"],dflt:"infer zero",editType:"calc"},text:{valType:"string",dflt:"",arrayOk:!0,editType:"calc"},texttemplate:k({},{}),hovertext:{valType:"string",dflt:"",arrayOk:!0,editType:"style"},mode:{valType:"flaglist",flags:["lines","markers","text"],extras:["none"],editType:"calc"},hoveron:{valType:"flaglist",flags:["points","fills"],
editType:"style"},hovertemplate:m({},{keys:l.eventDataKeys}),line:{color:{valType:"color",editType:"style",anim:!0},width:{valType:"number",min:0,dflt:2,editType:"style",anim:!0},shape:{valType:"enumerated",values:"linear spline hv vh hvh vhv".split(" "),dflt:"linear",editType:"plot"},smoothing:{valType:"number",min:0,max:1.3,dflt:1,editType:"plot"},dash:b({},h,{editType:"style"}),simplify:{valType:"boolean",dflt:!0,editType:"plot"},editType:"plot"},connectgaps:{valType:"boolean",dflt:!1,editType:"calc"},
cliponaxis:{valType:"boolean",dflt:!0,editType:"plot"},fill:{valType:"enumerated",values:"none tozeroy tozerox tonexty tonextx toself tonext".split(" "),editType:"calc"},fillcolor:{valType:"color",editType:"style",anim:!0},marker:b({symbol:{valType:"enumerated",values:r.symbolList,dflt:"circle",arrayOk:!0,editType:"style"},opacity:{valType:"number",min:0,max:1,arrayOk:!0,editType:"style",anim:!0},size:{valType:"number",min:0,dflt:6,arrayOk:!0,editType:"calc",anim:!0},maxdisplayed:{valType:"number",
min:0,dflt:0,editType:"plot"},sizeref:{valType:"number",dflt:1,editType:"calc"},sizemin:{valType:"number",min:0,dflt:0,editType:"calc"},sizemode:{valType:"enumerated",values:["diameter","area"],dflt:"diameter",editType:"calc"},line:b({width:{valType:"number",min:0,arrayOk:!0,editType:"style",anim:!0},editType:"calc"},a("marker.line",{anim:!0})),gradient:{type:{valType:"enumerated",values:["radial","horizontal","vertical","none"],arrayOk:!0,dflt:"none",editType:"calc"},color:{valType:"color",arrayOk:!0,
editType:"calc"},editType:"calc"},editType:"calc"},a("marker",{anim:!0})),selected:{marker:{opacity:{valType:"number",min:0,max:1,editType:"style"},color:{valType:"color",editType:"style"},size:{valType:"number",min:0,editType:"style"},editType:"style"},textfont:{color:{valType:"color",editType:"style"},editType:"style"},editType:"style"},unselected:{marker:{opacity:{valType:"number",min:0,max:1,editType:"style"},color:{valType:"color",editType:"style"},size:{valType:"number",min:0,editType:"style"},
editType:"style"},textfont:{color:{valType:"color",editType:"style"},editType:"style"},editType:"style"},textposition:{valType:"enumerated",values:"top left;top center;top right;middle left;middle center;middle right;bottom left;bottom center;bottom right".split(";"),dflt:"middle center",arrayOk:!0,editType:"calc"},textfont:g({editType:"calc",colorEditType:"style",arrayOk:!0})}},{"../../components/colorscale/attributes":673,"../../components/drawing":688,"../../components/drawing/attributes":687,
"../../lib/extend":793,"../../plots/cartesian/axis_format_attributes":857,"../../plots/font_attributes":883,"../../plots/template_attributes":926,"./constants":1222}],1219:[function(b,N,G){function p(t,w,x,z,B,A,D){var C=w._length,v=t._fullLayout;t=x._id;var y=z._id,F=v._firstScatter[m(w)]===w.uid;v=(a(w,v,x,z)||{}).orientation;var J=w.fill;x._minDtick=0;z._minDtick=0;var K={padded:!0},M={padded:!0};D&&(K.ppad=M.ppad=D);(D=2>C||B[0]!==B[C-1]||A[0]!==A[C-1])&&("tozerox"===J||"tonextx"===J&&(F||"h"===
v))?K.tozero=!0:(w.error_y||{}).visible||"tonexty"!==J&&"tozeroy"!==J&&(d.hasMarkers(w)||d.hasText(w))||(K.padded=!1,K.ppad=0);if(D&&("tozeroy"===J||"tonexty"===J&&(F||"v"===v)))M.tozero=!0;else if("tonextx"===J||"tozerox"===J)M.padded=!1;t&&(w._extremes[t]=r.findExtremes(x,B,K));y&&(w._extremes[y]=r.findExtremes(z,A,M))}function n(t,w){if(d.hasMarkers(t)){var x=t.marker,z=1.6*(t.marker.sizeref||1);var B="area"===t.marker.sizemode?function(D){return Math.max(Math.sqrt((D||0)/z),3)}:function(D){return Math.max((D||
0)/z,3)};if(h.isArrayOrTypedArray(x.size)){x={type:"linear"};r.setConvert(x);t=x.makeCalcdata(t.marker,"size");x=Array(w);for(var A=0;A<w;A++)x[A]=B(t[A]);return x}return B(x.size)}}function k(t,w){var x=m(w);t=t._firstScatter;t[x]||(t[x]=w.uid)}function m(t){var w=t.stackgroup;return t.xaxis+t.yaxis+t.type+(w?"-"+w:"")}function a(t,w,x,z){if(t=t.stackgroup)if(w=w._scatterStackOpts[x._id+z._id][t],x="v"===w.orientation?z:x,"linear"===x.type||"log"===x.type)return w}var g=b("fast-isnumeric"),h=b("../../lib"),
r=b("../../plots/cartesian/axes"),l=b("../../plots/cartesian/align_period"),c=b("../../constants/numerical").BADNUM,d=b("./subtypes"),e=b("./colorscale_calc"),f=b("./arrays_to_calcdata"),q=b("./calc_selection");N.exports={calc:function(t,w){var x=t._fullLayout,z=r.getFromId(t,w.xaxis||"x"),B=r.getFromId(t,w.yaxis||"y"),A=z.makeCalcdata(w,"x"),D=B.makeCalcdata(w,"y"),C=l(w,z,"x",A),v=l(w,B,"y",D),y=C.vals,F=v.vals,J=w._length,K=Array(J),M=w.ids,H=a(w,x,z,B),O=!1,I;k(x,w);x="x";var L="y";if(H){h.pushUnique(H.traceIndices,
w._expandedIndex);if(I="v"===H.orientation){L="s";var Q="x"}else x="s",Q="y";var Z="interpolate"===H.stackgaps}else{var ba=n(w,J);p(t,w,z,B,y,F,ba)}B=!!w.xperiodalignment;ba=!!w.yperiodalignment;for(z=0;z<J;z++){var V=K[z]={},S=g(y[z]),T=g(F[z]);S&&T?(V[x]=y[z],V[L]=F[z],B&&(V.orig_x=A[z],V.xEnd=C.ends[z],V.xStart=C.starts[z]),ba&&(V.orig_y=D[z],V.yEnd=v.ends[z],V.yStart=v.starts[z])):H&&(I?S:T)?(V[Q]=I?y[z]:F[z],V.gap=!0,Z?(V.s=c,O=!0):V.s=0):V[x]=V[L]=c;M&&(V.id=String(M[z]))}f(K,w);e(t,w);q(K,
w);if(H){for(z=0;z<K.length;)K[z][Q]===c?K.splice(z,1):z++;h.sort(K,function(fa,W){return fa[Q]-W[Q]||fa.i-W.i});if(O){for(z=0;z<K.length-1&&K[z].gap;)z++;A=K[z].s;A||(A=K[z].s=0);for(t=0;t<z;t++)K[t].s=A;for(w=K.length-1;w>z&&K[w].gap;)w--;A=K[w].s;for(t=K.length-1;t>w;t--)K[t].s=A;for(;z<w;)if(z++,K[z].gap){for(t=z+1;K[t].gap;)t++;A=K[z-1][Q];D=K[z-1].s;for(C=(K[t].s-D)/(K[t][Q]-A);z<t;)K[z].s=D+(K[z][Q]-A)*C,z++}}}return K},calcMarkerSize:n,calcAxisExpansion:p,setFirstScatter:k,getStackOpts:a}},
{"../../constants/numerical":779,"../../lib":803,"../../plots/cartesian/align_period":851,"../../plots/cartesian/axes":854,"./arrays_to_calcdata":1217,"./calc_selection":1220,"./colorscale_calc":1221,"./subtypes":1243,"fast-isnumeric":249}],1220:[function(b,N,G){var p=b("../../lib");N.exports=function(n,k){p.isArrayOrTypedArray(k.selectedpoints)&&p.tagSelected(n,k)}},{"../../lib":803}],1221:[function(b,N,G){var p=b("../../components/colorscale/helpers").hasColorscale,n=b("../../components/colorscale/calc"),
k=b("./subtypes");N.exports=function(m,a){k.hasLines(a)&&p(a,"line")&&n(m,a,{vals:a.line.color,containerStr:"line",cLetter:"c"});k.hasMarkers(a)&&(p(a,"marker")&&n(m,a,{vals:a.marker.color,containerStr:"marker",cLetter:"c"}),p(a,"marker.line")&&n(m,a,{vals:a.marker.line.color,containerStr:"marker.line",cLetter:"c"}))}},{"../../components/colorscale/calc":674,"../../components/colorscale/helpers":677,"./subtypes":1243}],1222:[function(b,N,G){N.exports={PTS_LINESONLY:20,minTolerance:.2,toleranceGrowth:10,
maxScreensAway:20,eventDataKeys:[]}},{}],1223:[function(b,N,G){function p(k,m,a,g,h,r,l){h[g]=!0;g={i:null,gap:!0,s:0};g[l]=a;k.splice(m,0,g);m&&a===k[m-1][l]?(a=k[m-1],g.s=a.s,g.i=a.i,g.gap=a.gap):r&&(r=k[m-1],a=(h=k[m+1])?r?r.s+(h.s-r.s)*(a-r[l])/(h[l]-r[l]):h.s:r.s,g.s=a);m||(k[0].t=k[1].t,k[0].trace=k[1].trace,delete k[1].t,delete k[1].trace)}var n=b("./calc");N.exports=function(k,m){var a=m.xaxis;m=m.yaxis;var g=k._fullLayout._scatterStackOpts[a._id+m._id];if(g){var h=k.calcdata,r,l,c,d,e,f;
for(f in g){var q=g[f];var t=q.traceIndices;if(t.length){var w="interpolate"===q.stackgaps;var x=q.groupnorm;if("v"===q.orientation){var z="x";var B="y"}else z="y",B="x";var A=Array(t.length);for(r=0;r<A.length;r++)A[r]=!1;var D=h[t[0]];var C=Array(D.length);for(r=0;r<D.length;r++)C[r]=D[r][z];for(r=1;r<t.length;r++){var v=h[t[r]];for(l=c=0;l<v.length;l++){for(e=v[l][z];e>C[c]&&c<C.length;c++)p(v,l,C[c],r,A,w,z),l++;if(e!==C[c]){for(d=0;d<r;d++)p(h[t[d]],c,e,d,A,w,z);C.splice(c,0,e)}c++}for(;c<C.length;c++)p(v,
l,C[c],r,A,w,z),l++}c=C.length;for(l=0;l<D.length;l++){d=D[l][B]=D[l].s;for(r=1;r<t.length;r++)v=h[t[r]],v[0].trace._rawLength=v[0].trace._length,v[0].trace._length=c,d+=v[l].s,v[l][B]=d;if(x)for(v=("fraction"===x?d:d/100)||1,r=0;r<t.length;r++)d=h[t[r]][l],d[B]/=v,d.sNorm=d.s/v}for(r=0;r<t.length;r++){v=h[t[r]];D=v[0].trace;x=n.calcMarkerSize(D,D._rawLength);B=Array.isArray(x);if(x&&A[r]||B)for(d=x,x=Array(c),l=0;l<c;l++)x[l]=v[l].gap?0:B?d[v[l].i]:d;B=Array(c);d=Array(c);for(l=0;l<c;l++)B[l]=v[l].x,
d[l]=v[l].y;n.calcAxisExpansion(k,D,a,m,B,d,x);v[0].t.orientation=q.orientation}}}}}},{"./calc":1219}],1224:[function(b,N,G){N.exports=function(p){for(var n=0;n<p.length;n++){var k=p[n];if("scatter"===k.type){var m=k.fill;if("none"!==m&&"toself"!==m&&(k.opacity=void 0,"tonexty"===m||"tonextx"===m))for(m=n-1;0<=m;m--){var a=p[m];if("scatter"===a.type&&a.xaxis===k.xaxis&&a.yaxis===k.yaxis){a.opacity=void 0;break}}}}}},{}],1225:[function(b,N,G){var p=b("../../lib"),n=b("../../registry"),k=b("./attributes"),
m=b("./constants"),a=b("./subtypes"),g=b("./xy_defaults"),h=b("./period_defaults"),r=b("./stack_defaults"),l=b("./marker_defaults"),c=b("./line_defaults"),d=b("./line_shape_defaults"),e=b("./text_defaults"),f=b("./fillcolor_defaults");N.exports=function(q,t,w,x){function z(D,C){return p.coerce(q,t,k,D,C)}var B=g(q,t,x,z);B||(t.visible=!1);if(t.visible){h(q,t,x,z);z("xhoverformat");z("yhoverformat");var A=r(q,t,x,z);B=!A&&B<m.PTS_LINESONLY?"lines+markers":"lines";z("text");z("hovertext");z("mode",
B);a.hasLines(t)&&(c(q,t,w,x,z),d(q,t,z),z("connectgaps"),z("line.simplify"));a.hasMarkers(t)&&l(q,t,w,x,z,{gradient:!0});a.hasText(t)&&(z("texttemplate"),e(q,t,x,z));x=[];if(a.hasMarkers(t)||a.hasText(t))z("cliponaxis"),z("marker.maxdisplayed"),x.push("points");z("fill",A?A.fillDflt:"none");"none"!==t.fill&&(f(q,t,w,z),a.hasLines(t)||d(q,t,z));A=(t.line||{}).color;B=(t.marker||{}).color;"tonext"!==t.fill&&"toself"!==t.fill||x.push("fills");z("hoveron",x.join("+")||"points");"fills"!==t.hoveron&&
z("hovertemplate");x=n.getComponentMethod("errorbars","supplyDefaults");x(q,t,A||B||w,{axis:"y"});x(q,t,A||B||w,{axis:"x",inherit:"y"});p.coerceSelectionMarkerOpacity(t,z)}}},{"../../lib":803,"../../registry":931,"./attributes":1218,"./constants":1222,"./fillcolor_defaults":1226,"./line_defaults":1231,"./line_shape_defaults":1233,"./marker_defaults":1237,"./period_defaults":1238,"./stack_defaults":1241,"./subtypes":1243,"./text_defaults":1244,"./xy_defaults":1245}],1226:[function(b,N,G){var p=b("../../components/color"),
n=b("../../lib").isArrayOrTypedArray;N.exports=function(k,m,a,g){k=!1;if(m.marker){var h=m.marker.color,r=(m.marker.line||{}).color;h&&!n(h)?k=h:r&&!n(r)&&(k=r)}g("fillcolor",p.addOpacity((m.line||{}).color||k||a,.5))}},{"../../components/color":666,"../../lib":803}],1227:[function(b,N,G){var p=b("../../plots/cartesian/axes");N.exports=function(n,k,m){var a={},g={_fullLayout:m};m=p.getFromTrace(g,k,"x");k=p.getFromTrace(g,k,"y");a.xLabel=p.tickText(m,m.c2l(n.x),!0).text;a.yLabel=p.tickText(k,k.c2l(n.y),
!0).text;return a}},{"../../plots/cartesian/axes":854}],1228:[function(b,N,G){var p=b("../../components/color"),n=b("./subtypes");N.exports=function(k,m){if("lines"===k.mode)return(m=k.line.color)&&p.opacity(m)?m:k.fillcolor;if("none"===k.mode)return k.fill?k.fillcolor:"";var a=m.mcc||(k.marker||{}).color,g=m.mlcc||((k.marker||{}).line||{}).color;return(m=a&&p.opacity(a)?a:g&&p.opacity(g)&&(m.mlw||((k.marker||{}).line||{}).width)?g:"")?.3>p.opacity(m)?p.addOpacity(m,.3):m:(m=(k.line||{}).color)&&
p.opacity(m)&&n.hasLines(k)&&k.line.width?m:k.fillcolor}},{"../../components/color":666,"./subtypes":1243}],1229:[function(b,N,G){var p=b("../../lib"),n=b("../../components/fx"),k=b("../../registry"),m=b("./get_trace_color"),a=b("../../components/color"),g=p.fillText;N.exports=function(h,r,l,c){var d=h.cd,e=d[0].trace,f=h.xa,q=h.ya,t=f.c2p(r),w=q.c2p(l),x=[t,w];l=e.hoveron||"";var z=-1!==e.mode.indexOf("markers")?3:.5,B=!!e.xperiodalignment,A=!!e.yperiodalignment;if(-1!==l.indexOf("points")&&(r=function(K){var M=
Math.max(z,K.mrc||0),H=f.c2p(K.x)-t;K=q.c2p(K.y)-w;return Math.max(Math.sqrt(H*H+K*K)-M,1-z/M)},c=n.getDistanceFunction(c,function(K){if(B){var M=f.c2p(K.xStart);K=f.c2p(K.xEnd);return t>=Math.min(M,K)&&t<=Math.max(M,K)?0:Infinity}M=Math.max(3,K.mrc||0);var H=1-1/M;K=Math.abs(f.c2p(K.x)-t);return K<M?H*K/M:K-M+H},function(K){if(A){var M=q.c2p(K.yStart);K=q.c2p(K.yEnd);return w>=Math.min(M,K)&&w<=Math.max(M,K)?0:Infinity}M=Math.max(3,K.mrc||0);var H=1-1/M;K=Math.abs(q.c2p(K.y)-w);return K<M?H*K/M:
K-M+H},r),n.getClosest(d,c,h),!1!==h.index)){c=d[h.index];l=f.c2p(c.x,!0);x=q.c2p(c.y,!0);var D=c.mrc||1;h.index=c.i;var C=d[0].t.orientation,v=C&&(c.sNorm||c.s);d="h"===C?v:void 0!==c.orig_x?c.orig_x:c.x;C="v"===C?v:void 0!==c.orig_y?c.orig_y:c.y;p.extendFlat(h,{color:m(e,c),x0:l-D,x1:l+D,xLabelVal:d,y0:x-D,y1:x+D,yLabelVal:C,spikeDistance:r(c),hovertemplate:e.hovertemplate});g(c,e,h);k.getComponentMethod("errorbars","hoverInfo")(c,e,h);return[h]}if(-1!==l.indexOf("fills")&&e._polygons){D=e._polygons;
c=[];C=!1;r=Infinity;d=-Infinity;v=Infinity;var y=-Infinity;for(l=0;l<D.length;l++){var F=D[l];F.contains(x)&&(C=!C,c.push(F),v=Math.min(v,F.ymin),y=Math.max(y,F.ymax))}if(C){v=Math.max(v,0);y=Math.min(y,q._length);x=(v+y)/2;for(l=0;l<c.length;l++)for(C=c[l].pts,D=1;D<C.length;D++){F=C[D-1][1];var J=C[D][1];F>x!==J>=x&&(v=C[D-1][0],y=C[D][0],J-F&&(v+=(y-v)*(x-F)/(J-F),r=Math.min(r,v),d=Math.max(d,v)))}r=Math.max(r,0);d=Math.min(d,f._length);c=a.defaultLine;a.opacity(e.fillcolor)?c=e.fillcolor:a.opacity((e.line||
{}).color)&&(c=e.line.color);p.extendFlat(h,{distance:h.maxHoverDistance,x0:r,x1:d,y0:x,y1:x,color:c,hovertemplate:!1});delete h.index;e.text&&!Array.isArray(e.text)?h.text=String(e.text):h.text=e.name;return[h]}}}},{"../../components/color":666,"../../components/fx":706,"../../lib":803,"../../registry":931,"./get_trace_color":1228}],1230:[function(b,N,G){G=b("./subtypes");N.exports={hasLines:G.hasLines,hasMarkers:G.hasMarkers,hasText:G.hasText,isBubble:G.isBubble,attributes:b("./attributes"),supplyDefaults:b("./defaults"),
crossTraceDefaults:b("./cross_trace_defaults"),calc:b("./calc").calc,crossTraceCalc:b("./cross_trace_calc"),arraysToCalcdata:b("./arrays_to_calcdata"),plot:b("./plot"),colorbar:b("./marker_colorbar"),formatLabels:b("./format_labels"),style:b("./style").style,styleOnSelect:b("./style").styleOnSelect,hoverPoints:b("./hover"),selectPoints:b("./select"),animatable:!0,moduleType:"trace",name:"scatter",basePlotModule:b("../../plots/cartesian"),categories:"cartesian svg symbols errorBarsOK showLegend scatter-like zoomScale".split(" "),
meta:{}}},{"../../plots/cartesian":868,"./arrays_to_calcdata":1217,"./attributes":1218,"./calc":1219,"./cross_trace_calc":1223,"./cross_trace_defaults":1224,"./defaults":1225,"./format_labels":1227,"./hover":1229,"./marker_colorbar":1236,"./plot":1239,"./select":1240,"./style":1242,"./subtypes":1243}],1231:[function(b,N,G){var p=b("../../lib").isArrayOrTypedArray,n=b("../../components/colorscale/helpers").hasColorscale,k=b("../../components/colorscale/defaults");N.exports=function(m,a,g,h,r,l){var c=
(m.marker||{}).color;r("line.color",g);n(m,"line")?k(m,a,h,r,{prefix:"line.",cLetter:"c"}):(m=(p(c)?!1:c)||g,r("line.color",m));r("line.width");(l||{}).noDash||r("line.dash")}},{"../../components/colorscale/defaults":676,"../../components/colorscale/helpers":677,"../../lib":803}],1232:[function(b,N,G){G=b("../../constants/numerical");var p=G.BADNUM;G=G.LOG_CLIP;var n=G+.5,k=G-.5,m=b("../../lib"),a=m.segmentsIntersect,g=m.constrain,h=b("./constants");N.exports=function(r,l){function c(zb){zb=r[zb];
if(!zb)return!1;var La=l.linearized?C.l2p(zb.x):C.c2p(zb.x),Ka=l.linearized?v.l2p(zb.y):v.c2p(zb.y);if(La===p){y&&(La=C.c2p(zb.x,!0));if(La===p)return!1;F&&Ka===p&&(La*=Math.abs(C._m*K*(0<C._m?n:k)/(v._m*J*(0<v._m?n:k))));La*=1E3}if(Ka===p){F&&(Ka=v.c2p(zb.y,!0));if(Ka===p)return!1;Ka*=1E3}return[La,Ka]}function d(zb,La,Ka,ya){Ka-=zb;ya-=La;zb=.5-zb;var Aa=.5-La;La=Ka*Ka+ya*ya;var Ja=Ka*zb+ya*Aa;if(0<Ja&&Ja<La&&(Ka=zb*ya-Aa*Ka,Ka*Ka<La))return!0}function e(zb,La){var Ka=zb[0]/J;zb=zb[1]/K;var ya=
Math.max(0,-Ka,Ka-1,-zb,zb-1);ya&&void 0!==W&&d(Ka,zb,W,aa)&&(ya=0);ya&&La&&d(Ka,zb,La[0]/J,La[1]/K)&&(ya=0);return(1+h.toleranceGrowth*ya)*H}function f(zb,La){var Ka=zb[0]-La[0];zb=zb[1]-La[1];return Math.sqrt(Ka*Ka+zb*zb)}function q(zb,La){for(var Ka=[],ya=0,Aa=0;4>Aa;Aa++){var Ja=pa[Aa];(Ja=a(zb[0],zb[1],La[0],La[1],Ja[0],Ja[1],Ja[2],Ja[3]))&&(!ya||1<Math.abs(Ja.x-Ka[0][0])||1<Math.abs(Ja.y-Ka[0][1]))&&(Ja=[Ja.x,Ja.y],ya&&f(Ja,zb)<f(Ka[0],zb)?Ka.unshift(Ja):Ka.push(Ja),ya++)}return Ka}function t(zb){if(zb[0]<
ma||zb[0]>ia||zb[1]<ra||zb[1]>wa)return[g(zb[0],ma,ia),g(zb[1],ra,wa)]}function w(zb,La){if(zb[0]===La[0]&&(zb[0]===ma||zb[0]===ia)||zb[1]===La[1]&&(zb[1]===ra||zb[1]===wa))return!0}function x(zb,La){var Ka=[];zb=t(zb);La=t(La);if(zb&&La&&w(zb,La))return Ka;zb&&Ka.push(zb);La&&Ka.push(La);return Ka}function z(zb,La,Ka){return function(ya,Aa){var Ja=t(ya),Ta=t(Aa),$a=[];if(Ja&&Ta&&w(Ja,Ta))return $a;Ja&&$a.push(Ja);Ta&&$a.push(Ta);if(ya=2*m.constrain((ya[zb]+Aa[zb])/2,La,Ka)-((Ja||ya)[zb]+(Ta||Aa)[zb]))Ja=
Ja&&Ta?0<ya===Ja[zb]>Ta[zb]?Ja:Ta:Ja||Ta,Ja[zb]+=ya;return $a}}function B(zb){var La=zb[0],Ka=zb[1],ya=La===V[S-1][0],Aa=Ka===V[S-1][1];if(!ya||!Aa)if(1<S){var Ja=La===V[S-2][0],Ta=Ka===V[S-2][1];ya&&(La===ma||La===ia)&&Ja?Ta?S--:V[S-1]=zb:Aa&&(Ka===ra||Ka===wa)&&Ta?Ja?S--:V[S-1]=zb:V[S++]=zb}else V[S++]=zb}function A(zb){V[S-1][0]!==zb[0]&&V[S-1][1]!==zb[1]&&B([na,oa]);B(zb);Ha=null;na=oa=0}function D(zb){W=zb[0]/J;aa=zb[1]/K;la=zb[0]<ma?ma:zb[0]>ia?ia:0;ka=zb[1]<ra?ra:zb[1]>wa?wa:0;if(la||ka){if(S)if(Ha){var La=
za(Ha,zb);1<La.length&&(A(La[0]),V[S++]=La[1])}else sa=za(V[S-1],zb)[0],V[S++]=sa;else V[S++]=[la||zb[0],ka||zb[1]];La=V[S-1];if(la&&ka&&(La[0]!==la||La[1]!==ka)){if(Ha)if(na!==la&&oa!==ka)if(na&&oa){La=zb[0]-Ha[0];var Ka=(zb[1]-Ha[1])/La;La=0<(Ha[1]*zb[0]-zb[1]*Ha[0])/La?[0<Ka?ma:ia,wa]:[0<Ka?ia:ma,ra];B(La)}else B([na||la,oa||ka]);else na&&oa&&B([na,oa]);B([la,ka])}else na-la&&oa-ka&&B([la||na,ka||oa]);Ha=zb;na=la;oa=ka}else Ha&&A(za(Ha,zb)[0]),V[S++]=zb}var C=l.xaxis,v=l.yaxis,y="log"===C.type,
F="log"===v.type,J=C._length,K=v._length,M=l.connectGaps,H=l.baseTolerance,O=l.shape,I="linear"===O,L=l.fill&&"none"!==l.fill,Q=[],Z=h.minTolerance,ba=r.length,V=Array(ba),S=0,T,fa,W,aa;var ja=h.maxScreensAway;var ma=-J*ja,ia=J*(1+ja),ra=-K*ja,wa=K*(1+ja),pa=[[ma,ra,ia,ra],[ia,ra,ia,wa],[ia,wa,ma,wa],[ma,wa,ma,ra]],la,ka,na,oa,sa,za;"linear"===O||"spline"===O?za=q:"hv"===O||"vh"===O?za=x:"hvh"===O?za=z(0,ma,ia):"vhv"===O&&(za=z(1,ra,wa));for(O=0;O<ba;O++)if(ja=c(O)){S=0;var Ha=null;D(ja);for(O++;O<
ba;O++){var Wa=c(O);if(!Wa)if(M)continue;else break;if(I&&l.simplify){var Za=c(O+1);var bb=f(Wa,ja);if(L&&(0===S||S===ba-1)||!(bb<e(Wa,Za)*Z)){var sb=[(Wa[0]-ja[0])/bb,(Wa[1]-ja[1])/bb];var hb=ja;var ub=bb;var pb=T=fa=0;var Ab=!1;bb=Wa;for(O++;O<r.length;O++){var tb=Za;Za=c(O+1);if(!tb)if(M)continue;else break;var vb=[tb[0]-ja[0],tb[1]-ja[1]];var qb=vb[0]*sb[1]-vb[1]*sb[0];T=Math.min(T,qb);fa=Math.max(fa,qb);if(fa-T>e(tb,Za))break;bb=tb;vb=vb[0]*sb[0]+vb[1]*sb[1];vb>ub?(ub=vb,Wa=tb,Ab=!1):vb<pb&&
(pb=vb,hb=tb,Ab=!0)}Ab?(D(Wa),bb!==hb&&D(hb)):(hb!==ja&&D(hb),bb!==Wa&&D(Wa));D(bb);if(O>=r.length||!tb)break;D(tb);ja=tb}}else D(Wa)}Ha&&B([na||Ha[0],oa||Ha[1]]);Q.push(V.slice(0,S))}return Q}},{"../../constants/numerical":779,"../../lib":803,"./constants":1222}],1233:[function(b,N,G){N.exports=function(p,n,k){"spline"===k("line.shape")&&k("line.smoothing")}},{}],1234:[function(b,N,G){var p={tonextx:1,tonexty:1,tonext:1};N.exports=function(n,k,m){var a,g={};var h=!1;var r=-1,l=0,c=-1;for(k=0;k<m.length;k++)n=
m[k][0].trace,(a=n.stackgroup||"")?a in g?a=g[a]:(a=g[a]=l,l++):n.fill in p&&0<=c?a=c:(a=c=l,l++),a<r&&(h=!0),n._groupIndex=r=a;m=m.slice();h&&m.sort(function(d,e){d=d[0].trace;e=e[0].trace;return d._groupIndex-e._groupIndex||d.index-e.index});g={};for(k=0;k<m.length;k++)n=m[k][0].trace,a=n.stackgroup||"",!0===n.visible?(n._nexttrace=null,n.fill in p&&(h=g[a],n._prevtrace=h||null,h&&(h._nexttrace=n)),n._ownfill=n.fill&&("tozero"===n.fill.substr(0,6)||"toself"===n.fill||"to"===n.fill.substr(0,2)&&
!n._prevtrace),g[a]=n):n._prevtrace=n._nexttrace=n._ownfill=null;return m}},{}],1235:[function(b,N,G){var p=b("fast-isnumeric");N.exports=function(n,k){k||(k=2);n=n.marker;var m=n.sizeref||1,a=n.sizemin||0,g="area"===n.sizemode?function(h){return Math.sqrt(h/m)}:function(h){return h/m};return function(h){h=g(h/k);return p(h)&&0<h?Math.max(h,a):0}}},{"fast-isnumeric":249}],1236:[function(b,N,G){N.exports={container:"marker",min:"cmin",max:"cmax"}},{}],1237:[function(b,N,G){var p=b("../../components/color"),
n=b("../../components/colorscale/helpers").hasColorscale,k=b("../../components/colorscale/defaults"),m=b("./subtypes");N.exports=function(a,g,h,r,l,c){var d=m.isBubble(a),e=(a.line||{}).color;c=c||{};e&&(h=e);l("marker.symbol");l("marker.opacity",d?.7:1);l("marker.size");l("marker.color",h);n(a,"marker")&&k(a,g,r,l,{prefix:"marker.",cLetter:"c"});c.noSelect||(l("selected.marker.color"),l("unselected.marker.color"),l("selected.marker.size"),l("unselected.marker.size"));c.noLine||(h=e&&!Array.isArray(e)&&
g.marker.color!==e?e:d?p.background:p.defaultLine,l("marker.line.color",h),n(a,"marker.line")&&k(a,g,r,l,{prefix:"marker.line.",cLetter:"c"}),l("marker.line.width",d?1:0));d&&(l("marker.sizeref"),l("marker.sizemin"),l("marker.sizemode"));c.gradient&&"none"!==l("marker.gradient.type")&&l("marker.gradient.color")}},{"../../components/color":666,"../../components/colorscale/defaults":676,"../../components/colorscale/helpers":677,"./subtypes":1243}],1238:[function(b,N,G){function p(m,a){return 0===m%
k?n(a,1):n(a,0)}var n=b("../../lib").dateTick0,k=b("../../constants/numerical").ONEWEEK;N.exports=function(m,a,g,h,r){r||(r={x:!0,y:!0});r.x&&(m=h("xperiod"))&&(h("xperiod0",p(m,a.xcalendar)),h("xperiodalignment"));r.y&&(r=h("yperiod"))&&(h("yperiod0",p(r,a.ycalendar)),h("yperiodalignment"))}},{"../../constants/numerical":779,"../../lib":803}],1239:[function(b,N,G){function p(q,t,w){t.each(function(x){var z=h(m.select(this),"g","fills");l.setClipUrl(z,w.layerClipId,q);var B=x[0].trace;x=[];B._ownfill&&
x.push("_ownFill");B._nexttrace&&x.push("_nextFill");z=z.selectAll("g").data(x,r);z.enter().append("g");z.exit().each(function(A){B[A]=null}).remove();z.order().each(function(A){B[A]=h(m.select(this),"path","js-fill")})})}function n(q,t,w,x,z,B,A){function D(ka){return M?ka.transition():ka}function C(ka){D(ka).attr("d","M0,0Z")}function v(ka){return ka.filter(function(na){return!na.gap&&na.vis})}function y(ka){return ka.filter(function(na){return na.vis})}function F(ka){return ka.filter(function(na){return!na.gap})}
function J(ka){return ka.id}function K(){return!1}k(q,t,w,x,z);var M=!!A&&0<A.duration,H=w.xaxis,O=w.yaxis,I=x[0].trace,L=I.line,Q=m.select(B),Z=h(Q,"g","errorbars");B=h(Q,"g","lines");t=h(Q,"g","points");z=h(Q,"g","text");a.getComponentMethod("errorbars","plot")(q,Z,w,A);if(!0===I.visible){D(Q).style("opacity",I.opacity);var ba=I.fill.charAt(I.fill.length-1);"x"!==ba&&"y"!==ba&&(ba="");x[0][w.isRangePlot?"nodeRangePlot3":"node3"]=Q;A="";Q=[];if(Z=I._prevtrace){A=Z._prevRevpath||"";var V=Z._nextFill;
Q=Z._polygons}var S,T,fa="",W="",aa=[];var ja=g.noop;Z=I._ownFill;if(c.hasLines(I)||"none"!==I.fill){V&&V.datum(x);if(-1!==["hv","vh","hvh","vhv"].indexOf(L.shape)){var ma=l.steps(L.shape);var ia=l.steps(L.shape.split("").reverse().join(""))}else ma="spline"===L.shape?ia=function(ka){var na=ka[ka.length-1];return 1<ka.length&&ka[0][0]===na[0]&&ka[0][1]===na[1]?l.smoothclosed(ka.slice(1),L.smoothing):l.smoothopen(ka,L.smoothing)}:ia=function(ka){return"M"+ka.join("L")};var ra=function(ka){return ia(ka.reverse())};
aa=d(x,{xaxis:H,yaxis:O,connectGaps:I.connectgaps,baseTolerance:Math.max(L.width||1,3)/4,shape:L.shape,simplify:L.simplify,fill:I.fill});var wa=I._polygons=Array(aa.length);for(ja=0;ja<aa.length;ja++)I._polygons[ja]=f(aa[ja]);if(aa.length){var pa=aa[0][0];var la=aa[aa.length-1];la=la[la.length-1]}ja=function(ka){return function(na){S=ma(na);T=ra(na);fa?ba?(fa+="L"+S.substr(1),W=T+("L"+W.substr(1))):(fa+="Z"+S,W=T+"Z"+W):(fa=S,W=T);c.hasLines(I)&&1<na.length&&(na=m.select(this),na.datum(x),ka?D(na.style("opacity",
0).attr("d",S).call(l.lineGroupStyle)).style("opacity",1):(na=D(na),na.attr("d",S),l.singleLineStyle(x,na)))}}}B=B.selectAll(".js-line").data(aa);D(B.exit()).style("opacity",0).remove();B.each(ja(!1));B.enter().append("path").classed("js-line",!0).style("vector-effect","non-scaling-stroke").call(l.lineGroupStyle).each(ja(!0));l.setClipUrl(B,w.layerClipId,q);aa.length?(Z?(Z.datum(x),pa&&la&&(ba?("y"===ba?pa[1]=la[1]=O.c2p(0,!0):"x"===ba&&(pa[0]=la[0]=H.c2p(0,!0)),D(Z).attr("d","M"+la+"L"+pa+"L"+fa.substr(1)).call(l.singleFillStyle)):
D(Z).attr("d",fa+"Z").call(l.singleFillStyle))):V&&("tonext"===I.fill.substr(0,6)&&fa&&A?("tonext"===I.fill?D(V).attr("d",fa+"Z"+A+"Z").call(l.singleFillStyle):D(V).attr("d",fa+"L"+A.substr(1)+"Z").call(l.singleFillStyle),I._polygons=I._polygons.concat(Q)):(C(V),I._polygons=null)),I._prevRevpath=W,I._prevPolygons=wa):(Z?C(Z):V&&C(V),I._polygons=I._prevRevpath=I._prevPolygons=null);t.datum(x);z.datum(x);(function(ka,na,oa){var sa,za=oa[0].trace;oa=c.hasMarkers(za);var Ha=c.hasText(za);var Wa=za.ids?
J:void 0;var Za=K,bb=K;if(oa||Ha){var sb=r,hb=za.stackgroup,ub=hb&&"infer zero"===q._fullLayout._scatterStackOpts[H._id+O._id][hb].stackgaps;za.marker.maxdisplayed||za._needsCull?sb=ub?y:v:hb&&!ub&&(sb=F);oa&&(Za=sb);Ha&&(bb=sb)}ka=ka.selectAll("path.point");ka=ka.data(Za,Wa);Za=ka.enter().append("path").classed("point",!0);M&&Za.call(l.pointStyle,za,q).call(l.translatePoints,H,O).style("opacity",0).transition().style("opacity",1);ka.order();var pb;oa&&(pb=l.makePointStyleFns(za));ka.each(function(Ab){var tb=
m.select(this),vb=D(tb);(sa=l.translatePoint(Ab,vb,H,O))?(l.singlePointStyle(Ab,vb,za,pb,q),w.layerClipId&&l.hideOutsideRangePoint(Ab,vb,H,O,za.xcalendar,za.ycalendar),za.customdata&&tb.classed("plotly-customdata",null!==Ab.data&&void 0!==Ab.data)):vb.remove()});M?ka.exit().transition().style("opacity",0).remove():ka.exit().remove();ka=na.selectAll("g");ka=ka.data(bb,Wa);ka.enter().append("g").classed("textpoint",!0).append("text");ka.order();ka.each(function(Ab){var tb=m.select(this),vb=D(tb.select("text"));
(sa=l.translatePoint(Ab,vb,H,O))?w.layerClipId&&l.hideOutsideRangePoint(Ab,tb,H,O,za.xcalendar,za.ycalendar):tb.remove()});ka.selectAll("text").call(l.textPointStyle,za,q).each(function(Ab){var tb=H.c2p(Ab.x),vb=O.c2p(Ab.y);m.select(this).selectAll("tspan.line").each(function(){D(m.select(this)).attr({x:tb,y:vb})})});ka.exit().remove()})(t,z,x);V=!1===I.cliponaxis?null:w.layerClipId;l.setClipUrl(t,V,q);l.setClipUrl(z,V,q)}}function k(q,t,w,x,z){q=w.xaxis;w=w.yaxis;var B=m.extent(g.simpleMap(q.range,
q.r2c)),A=m.extent(g.simpleMap(w.range,w.r2c));w=x[0].trace;if(c.hasMarkers(w)&&(w=w.marker.maxdisplayed,0!==w)){q=x.filter(function(y){return y.x>=B[0]&&y.x<=B[1]&&y.y>=A[0]&&y.y<=A[1]});var D=Math.ceil(q.length/w),C=0;z.forEach(function(y,F){y=y[0].trace;c.hasMarkers(y)&&0<y.marker.maxdisplayed&&F<t&&C++});var v=Math.round(C*D/3+Math.floor(C/3)*D/7.1);x.forEach(function(y){delete y.vis});q.forEach(function(y,F){0===Math.round((F+v)%D)&&(y.vis=!0)})}}var m=b("@plotly/d3"),a=b("../../registry"),g=
b("../../lib"),h=g.ensureSingle,r=g.identity,l=b("../../components/drawing"),c=b("./subtypes"),d=b("./line_points"),e=b("./link_traces"),f=b("../../lib/polygon").tester;N.exports=function(q,t,w,x,z,B){var A,D=!z,C=!!z&&0<z.duration,v=e(q,t,w);w=x.selectAll("g.trace").data(v,function(y){return y[0].trace.uid});w.enter().append("g").attr("class",function(y){return"trace scatter trace"+y[0].trace.uid}).style("stroke-miterlimit",2);w.order();p(q,w,t);C?(B&&(A=B()),m.transition().duration(z.duration).ease(z.easing).each("end",
function(){A&&A()}).each("interrupt",function(){A&&A()}).each(function(){x.selectAll("g.trace").each(function(y,F){n(q,F,t,y,v,this,z)})})):w.each(function(y,F){n(q,F,t,y,v,this,z)});D&&w.exit().remove();x.selectAll("path:not([d])").remove()}},{"../../components/drawing":688,"../../lib":803,"../../lib/polygon":815,"../../registry":931,"./line_points":1232,"./link_traces":1234,"./subtypes":1243,"@plotly/d3":58}],1240:[function(b,N,G){var p=b("./subtypes");N.exports=function(n,k){var m=n.cd,a=n.xaxis,
g=n.yaxis,h=[],r=m[0].trace;if(!p.hasMarkers(r)&&!p.hasText(r))return[];if(!1===k)for(r=0;r<m.length;r++)m[r].selected=0;else for(r=0;r<m.length;r++){var l=m[r];var c=a.c2p(l.x);var d=g.c2p(l.y);null!==l.i&&k.contains([c,d],!1,r,n)?(h.push({pointNumber:l.i,x:a.c2d(l.x),y:g.c2d(l.y)}),l.selected=1):l.selected=0}return h}},{"./subtypes":1243}],1241:[function(b,N,G){var p=["orientation","groupnorm","stackgaps"];N.exports=function(n,k,m,a){m=m._scatterStackOpts;var g=a("stackgroup");if(g){var h=k.xaxis+
k.yaxis,r=m[h];r||(r=m[h]={});m=r[g];h=!1;m?m.traces.push(k):(m=r[g]={traceIndices:[],traces:[k]},h=!0);k={orientation:k.x&&!k.y?"h":"v"};for(g=0;g<p.length;g++){r=p[g];var l=r+"Found";if(!m[l]){var c=void 0!==n[r],d="orientation"===r;if(c||h)if(m[r]=a(r,k[r]),d&&(m.fillDflt="h"===m[r]?"tonextx":"tonexty"),c&&(m[l]=!0,!h&&(delete m.traces[0][r],d)))for(r=0;r<m.traces.length-1;r++)l=m.traces[r],l._input.fill!==l.fill&&(l.fill=m.fillDflt)}}return m}}},{}],1242:[function(b,N,G){function p(g,h,r){m.pointStyle(g.selectAll("path.point"),
h,r)}function n(g,h,r){m.textPointStyle(g.selectAll("text"),h,r)}var k=b("@plotly/d3"),m=b("../../components/drawing"),a=b("../../registry");N.exports={style:function(g){var h=k.select(g).selectAll("g.trace.scatter");h.style("opacity",function(r){return r[0].trace.opacity});h.selectAll("g.points").each(function(r){var l=k.select(this);p(l,r.trace||r[0].trace,g)});h.selectAll("g.text").each(function(r){var l=k.select(this);n(l,r.trace||r[0].trace,g)});h.selectAll("g.trace path.js-line").call(m.lineGroupStyle);
h.selectAll("g.trace path.js-fill").call(m.fillGroupStyle);a.getComponentMethod("errorbars","style")(h)},stylePoints:p,styleText:n,styleOnSelect:function(g,h,r){h=h[0].trace;h.selectedpoints?(m.selectedPointStyle(r.selectAll("path.point"),h),m.selectedTextStyle(r.selectAll("text"),h)):(p(r,h,g),n(r,h,g))}}},{"../../components/drawing":688,"../../registry":931,"@plotly/d3":58}],1243:[function(b,N,G){var p=b("../../lib");N.exports={hasLines:function(n){return n.visible&&n.mode&&-1!==n.mode.indexOf("lines")},
hasMarkers:function(n){return n.visible&&(n.mode&&-1!==n.mode.indexOf("markers")||"splom"===n.type)},hasText:function(n){return n.visible&&n.mode&&-1!==n.mode.indexOf("text")},isBubble:function(n){return p.isPlainObject(n.marker)&&p.isArrayOrTypedArray(n.marker.size)}}},{"../../lib":803}],1244:[function(b,N,G){var p=b("../../lib");N.exports=function(n,k,m,a,g){g=g||{};a("textposition");p.coerceFont(a,"textfont",m.font);g.noSelect||(a("selected.textfont.color"),a("unselected.textfont.color"))}},{"../../lib":803}],
1245:[function(b,N,G){var p=b("../../lib"),n=b("../../registry");N.exports=function(k,m,a,g){var h=g("x"),r=g("y");n.getComponentMethod("calendars","handleTraceDefaults")(k,m,["x","y"],a);if(h)k=p.minRowLength(h),r?r=Math.min(k,p.minRowLength(r)):(r=k,g("y0"),g("dy"));else{if(!r)return 0;r=p.minRowLength(r);g("x0");g("dx")}return m._length=r}},{"../../lib":803,"../../registry":931}],1246:[function(b,N,G){function p(f){return{show:{valType:"boolean",dflt:!1},opacity:{valType:"number",min:0,max:1,dflt:1},
scale:{valType:"number",min:0,max:10,dflt:2/3}}}G=b("../scatter/attributes");var n=b("../../components/colorscale/attributes"),k=b("../../plots/cartesian/axis_format_attributes").axisHoverFormat,m=b("../../plots/template_attributes").hovertemplateAttrs,a=b("../../plots/template_attributes").texttemplateAttrs,g=b("../../plots/attributes"),h=b("../../constants/gl3d_dashes"),r=b("../../constants/gl3d_markers"),l=b("../../lib/extend").extendFlat,c=b("../../plot_api/edit_types").overrideAll;b=b("../../lib/sort_object_keys");
var d=G.marker,e=d.line;h=l({width:G.line.width,dash:{valType:"enumerated",values:b(h),dflt:"solid"}},n("line"));N=N.exports=c({x:G.x,y:G.y,z:{valType:"data_array"},text:l({},G.text,{}),texttemplate:a({},{}),hovertext:l({},G.hovertext,{}),hovertemplate:m(),xhoverformat:k("x"),yhoverformat:k("y"),zhoverformat:k("z"),mode:l({},G.mode,{dflt:"lines+markers"}),surfaceaxis:{valType:"enumerated",values:[-1,0,1,2],dflt:-1},surfacecolor:{valType:"color"},projection:{x:p("x"),y:p("y"),z:p("z")},connectgaps:G.connectgaps,
line:h,marker:l({symbol:{valType:"enumerated",values:b(r),dflt:"circle",arrayOk:!0},size:l({},d.size,{dflt:8}),sizeref:d.sizeref,sizemin:d.sizemin,sizemode:d.sizemode,opacity:l({},d.opacity,{arrayOk:!1}),colorbar:d.colorbar,line:l({width:l({},e.width,{arrayOk:!1})},n("marker.line"))},n("marker")),textposition:l({},G.textposition,{dflt:"top center"}),textfont:{color:G.textfont.color,size:G.textfont.size,family:l({},G.textfont.family,{arrayOk:!1})},hoverinfo:l({},g.hoverinfo)},"calc","nested");N.x.editType=
N.y.editType=N.z.editType="calc+clearAxisTypes"},{"../../components/colorscale/attributes":673,"../../constants/gl3d_dashes":776,"../../constants/gl3d_markers":777,"../../lib/extend":793,"../../lib/sort_object_keys":826,"../../plot_api/edit_types":836,"../../plots/attributes":850,"../../plots/cartesian/axis_format_attributes":857,"../../plots/template_attributes":926,"../scatter/attributes":1218}],1247:[function(b,N,G){var p=b("../scatter/arrays_to_calcdata"),n=b("../scatter/colorscale_calc");N.exports=
function(k,m){var a=[{x:!1,y:!1,trace:m,t:{}}];p(a,m);n(k,m);return a}},{"../scatter/arrays_to_calcdata":1217,"../scatter/colorscale_calc":1221}],1248:[function(b,N,G){function p(k,m,a,g){if(!m||!m.visible)return null;m=n.getComponentMethod("errorbars","makeComputeError")(m);for(var h=Array(k.length),r=0;r<k.length;r++){var l=m(+k[r],r);if("log"===g.type){var c=g.c2l(k[r]),d=k[r]-l[0];l=k[r]+l[1];h[r]=[(g.c2l(d,!0)-c)*a,(g.c2l(l,!0)-c)*a];0<d&&(c=g.c2l(d),g._lowerLogErrorBound||(g._lowerLogErrorBound=
c),g._lowerErrorBound=Math.min(g._lowerLogErrorBound,c))}else h[r]=[-l[0]*a,l[1]*a]}return h}var n=b("../../registry");N.exports=function(k,m,a){k=[p(k.x,k.error_x,m[0],a.xaxis),p(k.y,k.error_y,m[1],a.yaxis),p(k.z,k.error_z,m[2],a.zaxis)];a:{for(m=0;m<k.length;m++)if(k[m]){m=k[m].length;break a}m=0}if(0===m)return null;a=Array(m);for(var g=0;g<m;g++){for(var h=[[0,0,0],[0,0,0]],r=0;3>r;r++)if(k[r])for(var l=0;2>l;l++)h[l][r]=k[r][g][l];a[g]=h}return a}},{"../../registry":931}],1249:[function(b,N,
G){function p(J,K){this.scene=J;this.uid=K;this.color=this.delaunayMesh=this.textMarkers=this.errorBars=this.scatterPlot=this.linePlot=null;this.mode="";this.dataPoints=[];this.axesBounds=[[-Infinity,-Infinity,-Infinity],[Infinity,Infinity,Infinity]];this.data=this.textLabels=null}function n(J){for(var K=[0,0,0],M=[[0,0,0],[0,0,0],[0,0,0]],H=[1,1,1],O=0;3>O;O++){var I=J[O];I&&!1!==I.copy_zstyle&&!1!==J[2].visible&&(I=J[2]);I&&I.visible&&(K[O]=I.width/2,M[O]=z(I.color),H[O]=I.thickness)}return{capSize:K,
color:M,lineWidth:H}}function k(J){return null===J||void 0===J?0:-1<J.indexOf("left")?-1:-1<J.indexOf("right")?1:0}function m(J){return null===J||void 0===J?0:-1<J.indexOf("top")?-1:-1<J.indexOf("bottom")?1:0}function a(J){var K=[0,0];if(Array.isArray(J))for(var M=0;M<J.length;M++)K[M]=[0,0],J[M]&&(K[M][0]=k(J[M]),K[M][1]=m(J[M]));else K[0]=k(J),K[1]=m(J);return K}function g(J,K){return K(4*J)}function h(J){return C[J]}function r(J,K,M,H,O){if(x.isArrayOrTypedArray(J)){var I=[];for(var L=0;L<K;L++)I[L]=
void 0===J[L]?H:M(J[L],O)}else I=M(J,x.identity);return I}function l(J,K){function M(na,oa){na=O[na];return v.tickText(na,na.d2l(oa),!0).text}var H=[],O=J.fullSceneLayout,I=J.dataScale,L=O.xaxis,Q=O.yaxis,Z=O.zaxis,ba=K.marker,V=K.line,S=K.x||[],T=K.y||[],fa=K.z||[],W=S.length,aa=K.xcalendar,ja=K.ycalendar,ma=K.zcalendar,ia;for(ia=0;ia<W;ia++){var ra=L.d2l(S[ia],0,aa)*I[0];var wa=Q.d2l(T[ia],0,ja)*I[1];var pa=Z.d2l(fa[ia],0,ma)*I[2];H[ia]=[ra,wa,pa]}if(Array.isArray(K.text))var la=K.text;else if(void 0!==
K.text)for(la=Array(W),ia=0;ia<W;ia++)la[ia]=K.text;var ka=K.texttemplate;if(ka)for(J=J.fullLayout._d3locale,L=(ia=Array.isArray(ka))?Math.min(ka.length,W):W,Q=ia?function(na){return ka[na]}:function(){return ka},la=Array(L),ia=0;ia<L;ia++)Z={x:S[ia],y:T[ia],z:fa[ia]},aa={xLabel:M("xaxis",S[ia]),yLabel:M("yaxis",T[ia]),zLabel:M("zaxis",fa[ia])},ja={},y(ja,K,ia),ma=K._meta||{},la[ia]=x.texttemplateString(Q(ia),aa,J,ja,Z,ma);H={position:H,mode:K.mode,text:la};"line"in K&&(H.lineColor=B(V,1,W),H.lineWidth=
V.width,H.lineDashes=V.dash);"marker"in K&&(ia=A(K),H.scatterColor=B(ba,1,W),H.scatterSize=r(ba.size,W,g,20,ia),H.scatterMarker=r(ba.symbol,W,h,""),H.scatterLineWidth=ba.line.width,H.scatterLineColor=B(ba.line,1,W),H.scatterAngle=0);"textposition"in K&&(H.textOffset=a(K.textposition),H.textColor=B(K.textfont,1,W),H.textSize=r(K.textfont.size,W,x.identity,12),H.textFont=K.textfont.family,H.textAngle=0);ba=["x","y","z"];H.project=[!1,!1,!1];H.projectScale=[1,1,1];H.projectOpacity=[1,1,1];for(ia=0;3>
ia;++ia)if(W=K.projection[ba[ia]],H.project[ia]=W.show)H.projectOpacity[ia]=W.opacity,H.projectScale[ia]=W.scale;H.errorBounds=F(K,I,O);I=n([K.error_x,K.error_y,K.error_z]);H.errorColor=I.color;H.errorLineWidth=I.lineWidth;H.errorCapSize=I.capSize;H.delaunayAxis=K.surfaceaxis;H.delaunayColor=z(K.surfacecolor);return H}function c(J){if(x.isArrayOrTypedArray(J)){var K=J[0];x.isArrayOrTypedArray(K)&&(J=K);return"rgb("+J.slice(0,3).map(function(M){return Math.round(255*M)})+")"}return null}function d(J){return x.isArrayOrTypedArray(J)?
4===J.length&&"number"===typeof J[0]?c(J):J.map(c):null}var e=b("gl-line3d"),f=b("gl-scatter3d"),q=b("gl-error3d"),t=b("gl-mesh3d"),w=b("delaunay-triangulate"),x=b("../../lib"),z=b("../../lib/str2rgbarray"),B=b("../../lib/gl_format_color").formatColor,A=b("../scatter/make_bubble_size_func"),D=b("../../constants/gl3d_dashes"),C=b("../../constants/gl3d_markers"),v=b("../../plots/cartesian/axes"),y=b("../../components/fx/helpers").appendArrayPointValue,F=b("./calc_errors");b=p.prototype;b.handlePick=
function(J){if(J.object&&(J.object===this.linePlot||J.object===this.delaunayMesh||J.object===this.textMarkers||J.object===this.scatterPlot)){var K=J.index=J.data.index;J.object.highlight&&J.object.highlight(null);this.scatterPlot&&(J.object=this.scatterPlot,this.scatterPlot.highlight(J.data));J.textLabel="";if(this.textLabels)if(Array.isArray(this.textLabels)){if(this.textLabels[K]||0===this.textLabels[K])J.textLabel=this.textLabels[K]}else J.textLabel=this.textLabels;J.traceCoordinate=[this.data.x[K],
this.data.y[K],this.data.z[K]];return!0}};b.update=function(J){var K=this.scene.glplot.gl;var M=D.solid;this.data=J;var H=l(this.scene,J);"mode"in H&&(this.mode=H.mode);"lineDashes"in H&&H.lineDashes in D&&(M=D[H.lineDashes]);this.color=d(H.scatterColor)||d(H.lineColor);this.dataPoints=H.position;M={gl:this.scene.glplot.gl,position:H.position,color:H.lineColor,lineWidth:H.lineWidth||1,dashes:M[0],dashScale:M[1],opacity:J.opacity,connectGaps:J.connectgaps};-1!==this.mode.indexOf("lines")?this.linePlot?
this.linePlot.update(M):(this.linePlot=e(M),this.linePlot._trace=this,this.scene.glplot.add(this.linePlot)):this.linePlot&&(this.scene.glplot.remove(this.linePlot),this.linePlot.dispose(),this.linePlot=null);M=J.opacity;J.marker&&J.marker.opacity&&(M*=J.marker.opacity);M={gl:this.scene.glplot.gl,position:H.position,color:H.scatterColor,size:H.scatterSize,glyph:H.scatterMarker,opacity:M,orthographic:!0,lineWidth:H.scatterLineWidth,lineColor:H.scatterLineColor,project:H.project,projectScale:H.projectScale,
projectOpacity:H.projectOpacity};-1!==this.mode.indexOf("markers")?this.scatterPlot?this.scatterPlot.update(M):(this.scatterPlot=f(M),this.scatterPlot._trace=this,this.scatterPlot.highlightScale=1,this.scene.glplot.add(this.scatterPlot)):this.scatterPlot&&(this.scene.glplot.remove(this.scatterPlot),this.scatterPlot.dispose(),this.scatterPlot=null);M={gl:this.scene.glplot.gl,position:H.position,glyph:H.text,color:H.textColor,size:H.textSize,angle:H.textAngle,alignment:H.textOffset,font:H.textFont,
orthographic:!0,lineWidth:0,project:!1,opacity:J.opacity};this.textLabels=J.hovertext||J.text;-1!==this.mode.indexOf("text")?this.textMarkers?this.textMarkers.update(M):(this.textMarkers=f(M),this.textMarkers._trace=this,this.textMarkers.highlightScale=1,this.scene.glplot.add(this.textMarkers)):this.textMarkers&&(this.scene.glplot.remove(this.textMarkers),this.textMarkers.dispose(),this.textMarkers=null);M={gl:this.scene.glplot.gl,position:H.position,color:H.errorColor,error:H.errorBounds,lineWidth:H.errorLineWidth,
capSize:H.errorCapSize,opacity:J.opacity};this.errorBars?H.errorBounds?this.errorBars.update(M):(this.scene.glplot.remove(this.errorBars),this.errorBars.dispose(),this.errorBars=null):H.errorBounds&&(this.errorBars=q(M),this.errorBars._trace=this,this.scene.glplot.add(this.errorBars));if(0<=H.delaunayAxis){M=H.position;var O=H.delaunayColor;H=H.delaunayAxis;var I=(H+1)%3,L=(H+2)%3,Q=[];H=[];var Z;for(Z=0;Z<M.length;++Z){var ba=M[Z];!isNaN(ba[I])&&isFinite(ba[I])&&!isNaN(ba[L])&&isFinite(ba[L])&&(Q.push([ba[I],
ba[L]]),H.push(Z))}I=w(Q);for(Z=0;Z<I.length;++Z)for(L=I[Z],Q=0;Q<L.length;++Q)L[Q]=H[L[Q]];M={positions:M,cells:I,meshColor:O};M.opacity=J.opacity;this.delaunayMesh?this.delaunayMesh.update(M):(M.gl=K,this.delaunayMesh=t(M),this.delaunayMesh._trace=this,this.scene.glplot.add(this.delaunayMesh))}else this.delaunayMesh&&(this.scene.glplot.remove(this.delaunayMesh),this.delaunayMesh.dispose(),this.delaunayMesh=null)};b.dispose=function(){this.linePlot&&(this.scene.glplot.remove(this.linePlot),this.linePlot.dispose());
this.scatterPlot&&(this.scene.glplot.remove(this.scatterPlot),this.scatterPlot.dispose());this.errorBars&&(this.scene.glplot.remove(this.errorBars),this.errorBars.dispose());this.textMarkers&&(this.scene.glplot.remove(this.textMarkers),this.textMarkers.dispose());this.delaunayMesh&&(this.scene.glplot.remove(this.delaunayMesh),this.delaunayMesh.dispose())};N.exports=function(J,K){J=new p(J,K.uid);J.update(K);return J}},{"../../components/fx/helpers":702,"../../constants/gl3d_dashes":776,"../../constants/gl3d_markers":777,
"../../lib":803,"../../lib/gl_format_color":799,"../../lib/str2rgbarray":828,"../../plots/cartesian/axes":854,"../scatter/make_bubble_size_func":1235,"./calc_errors":1248,"delaunay-triangulate":180,"gl-error3d":273,"gl-line3d":281,"gl-mesh3d":315,"gl-scatter3d":334}],1250:[function(b,N,G){function p(l,c,d,e){var f=0,q=d("x"),t=d("y");d=d("z");n.getComponentMethod("calendars","handleTraceDefaults")(l,c,["x","y","z"],e);q&&t&&d&&(f=Math.min(q.length,t.length,d.length),c._length=c._xlength=c._ylength=
c._zlength=f);return f}var n=b("../../registry"),k=b("../../lib"),m=b("../scatter/subtypes"),a=b("../scatter/marker_defaults"),g=b("../scatter/line_defaults"),h=b("../scatter/text_defaults"),r=b("./attributes");N.exports=function(l,c,d,e){function f(z,B){return k.coerce(l,c,r,z,B)}if(p(l,c,f,e)){f("text");f("hovertext");f("hovertemplate");f("xhoverformat");f("yhoverformat");f("zhoverformat");f("mode");m.hasLines(c)&&(f("connectgaps"),g(l,c,d,e,f));m.hasMarkers(c)&&a(l,c,d,e,f,{noSelect:!0});m.hasText(c)&&
(f("texttemplate"),h(l,c,e,f,{noSelect:!0}));e=(c.line||{}).color;var q=(c.marker||{}).color;0<=f("surfaceaxis")&&f("surfacecolor",e||q);for(var t=["x","y","z"],w=0;3>w;++w){var x="projection."+t[w];f(x+".show")&&(f(x+".opacity"),f(x+".scale"))}t=n.getComponentMethod("errorbars","supplyDefaults");t(l,c,e||q||d,{axis:"z"});t(l,c,e||q||d,{axis:"y",inherit:"z"});t(l,c,e||q||d,{axis:"x",inherit:"z"})}else c.visible=!1}},{"../../lib":803,"../../registry":931,"../scatter/line_defaults":1231,"../scatter/marker_defaults":1237,
"../scatter/subtypes":1243,"../scatter/text_defaults":1244,"./attributes":1246}],1251:[function(b,N,G){N.exports={plot:b("./convert"),attributes:b("./attributes"),markerSymbols:b("../../constants/gl3d_markers"),supplyDefaults:b("./defaults"),colorbar:[{container:"marker",min:"cmin",max:"cmax"},{container:"line",min:"cmin",max:"cmax"}],calc:b("./calc"),moduleType:"trace",name:"scatter3d",basePlotModule:b("../../plots/gl3d"),categories:["gl3d","symbols","showLegend","scatter-like"],meta:{}}},{"../../constants/gl3d_markers":777,
"../../plots/gl3d":896,"./attributes":1246,"./calc":1247,"./convert":1249,"./defaults":1250}],1252:[function(b,N,G){G=b("../scatter/attributes");var p=b("../../plots/attributes"),n=b("../../plots/template_attributes").hovertemplateAttrs,k=b("../../plots/template_attributes").texttemplateAttrs,m=b("../../components/colorscale/attributes");b=b("../../lib/extend").extendFlat;var a=G.marker,g=G.line,h=a.line;N.exports={carpet:{valType:"string",editType:"calc"},a:{valType:"data_array",editType:"calc"},
b:{valType:"data_array",editType:"calc"},mode:b({},G.mode,{dflt:"markers"}),text:b({},G.text,{}),texttemplate:k({editType:"plot"},{keys:["a","b","text"]}),hovertext:b({},G.hovertext,{}),line:{color:g.color,width:g.width,dash:g.dash,shape:b({},g.shape,{values:["linear","spline"]}),smoothing:g.smoothing,editType:"calc"},connectgaps:G.connectgaps,fill:b({},G.fill,{values:["none","toself","tonext"],dflt:"none"}),fillcolor:G.fillcolor,marker:b({symbol:a.symbol,opacity:a.opacity,maxdisplayed:a.maxdisplayed,
size:a.size,sizeref:a.sizeref,sizemin:a.sizemin,sizemode:a.sizemode,line:b({width:h.width,editType:"calc"},m("marker.line")),gradient:a.gradient,editType:"calc"},m("marker")),textfont:G.textfont,textposition:G.textposition,selected:G.selected,unselected:G.unselected,hoverinfo:b({},p.hoverinfo,{flags:["a","b","text","name"]}),hoveron:G.hoveron,hovertemplate:n()}},{"../../components/colorscale/attributes":673,"../../lib/extend":793,"../../plots/attributes":850,"../../plots/template_attributes":926,
"../scatter/attributes":1218}],1253:[function(b,N,G){var p=b("fast-isnumeric"),n=b("../scatter/colorscale_calc"),k=b("../scatter/arrays_to_calcdata"),m=b("../scatter/calc_selection"),a=b("../scatter/calc").calcMarkerSize,g=b("../carpet/lookup_carpetid");N.exports=function(h,r){var l=r._carpetTrace=g(h,r);if(l&&l.visible&&"legendonly"!==l.visible){var c;r.xaxis=l.xaxis;r.yaxis=l.yaxis;var d=r._length,e=Array(d),f=!1;for(c=0;c<d;c++){var q=r.a[c];var t=r.b[c];if(p(q)&&p(t)){var w=l.ab2xy(+q,+t,!0),
x=l.isVisible(+q,+t);x||(f=!0);e[c]={x:w[0],y:w[1],a:q,b:t,vis:x}}else e[c]={x:!1,y:!1}}r._needsCull=f;e[0].carpet=l;e[0].trace=r;a(r,d);n(h,r);k(e,r);m(e,r);return e}}},{"../carpet/lookup_carpetid":1001,"../scatter/arrays_to_calcdata":1217,"../scatter/calc":1219,"../scatter/calc_selection":1220,"../scatter/colorscale_calc":1221,"fast-isnumeric":249}],1254:[function(b,N,G){var p=b("../../lib"),n=b("../scatter/constants"),k=b("../scatter/subtypes"),m=b("../scatter/marker_defaults"),a=b("../scatter/line_defaults"),
g=b("../scatter/line_shape_defaults"),h=b("../scatter/text_defaults"),r=b("../scatter/fillcolor_defaults"),l=b("./attributes");N.exports=function(c,d,e,f){function q(x,z){return p.coerce(c,d,l,x,z)}q("carpet");d.xaxis="x";d.yaxis="y";var t=q("a"),w=q("b");if(t=Math.min(t.length,w.length)){d._length=t;q("text");q("texttemplate");q("hovertext");q("mode",t<n.PTS_LINESONLY?"lines+markers":"lines");k.hasLines(d)&&(a(c,d,e,f,q),g(c,d,q),q("connectgaps"));k.hasMarkers(d)&&m(c,d,e,f,q,{gradient:!0});k.hasText(d)&&
h(c,d,f,q);f=[];if(k.hasMarkers(d)||k.hasText(d))q("marker.maxdisplayed"),f.push("points");q("fill");"none"!==d.fill&&(r(c,d,e,q),k.hasLines(d)||g(c,d,q));"tonext"!==d.fill&&"toself"!==d.fill||f.push("fills");"fills"!==q("hoveron",f.join("+")||"points")&&q("hovertemplate");p.coerceSelectionMarkerOpacity(d,q)}else d.visible=!1}},{"../../lib":803,"../scatter/constants":1222,"../scatter/fillcolor_defaults":1226,"../scatter/line_defaults":1231,"../scatter/line_shape_defaults":1233,"../scatter/marker_defaults":1237,
"../scatter/subtypes":1243,"../scatter/text_defaults":1244,"./attributes":1252}],1255:[function(b,N,G){N.exports=function(p,n,k,m,a){n=m[a];p.a=n.a;p.b=n.b;p.y=n.y;return p}},{}],1256:[function(b,N,G){N.exports=function(p,n){var k={};n=n._carpet;p=n.ab2ij([p.a,p.b]);var m=Math.floor(p[0]),a=Math.floor(p[1]);n=n.evalxy([],m,a,p[0]-m,p[1]-a);k.yLabel=n[1].toFixed(3);return k}},{}],1257:[function(b,N,G){var p=b("../scatter/hover"),n=b("../../lib").fillText;N.exports=function(k,m,a,g){function h(d,e){var f=
d.labelprefix&&0<d.labelprefix.length?d.labelprefix.replace(/ = $/,""):d._hovertitle;c.push(f+": "+e.toFixed(3)+d.labelsuffix)}if((m=p(k,m,a,g))&&!1!==m[0].index){a=m[0];if(void 0===a.index)return g=k.xa._length,k=g*(1-a.y0/k.ya._length)/2,g-=k,a.x0=Math.max(Math.min(a.x0,g),k),a.x1=Math.max(Math.min(a.x1,g),k),m;k=a.cd[a.index];a.a=k.a;a.b=k.b;a.xLabelVal=void 0;a.yLabelVal=void 0;g=a.trace;var r=g._carpet,l=g._module.formatLabels(k,g);a.yLabel=l.yLabel;delete a.text;var c=[];g.hovertemplate||(l=
(k.hi||g.hoverinfo).split("+"),-1!==l.indexOf("all")&&(l=["a","b","text"]),-1!==l.indexOf("a")&&h(r.aaxis,k.a),-1!==l.indexOf("b")&&h(r.baxis,k.b),c.push("y: "+a.yLabel),-1!==l.indexOf("text")&&n(k,g,c),a.extraText=c.join("\x3cbr\x3e"));return m}}},{"../../lib":803,"../scatter/hover":1229}],1258:[function(b,N,G){N.exports={attributes:b("./attributes"),supplyDefaults:b("./defaults"),colorbar:b("../scatter/marker_colorbar"),formatLabels:b("./format_labels"),calc:b("./calc"),plot:b("./plot"),style:b("../scatter/style").style,
styleOnSelect:b("../scatter/style").styleOnSelect,hoverPoints:b("./hover"),selectPoints:b("../scatter/select"),eventData:b("./event_data"),moduleType:"trace",name:"scattercarpet",basePlotModule:b("../../plots/cartesian"),categories:"svg carpet symbols showLegend carpetDependent zoomScale".split(" "),meta:{}}},{"../../plots/cartesian":868,"../scatter/marker_colorbar":1236,"../scatter/select":1240,"../scatter/style":1242,"./attributes":1252,"./calc":1253,"./defaults":1254,"./event_data":1255,"./format_labels":1256,
"./hover":1257,"./plot":1259}],1259:[function(b,N,G){var p=b("../scatter/plot"),n=b("../../plots/cartesian/axes"),k=b("../../components/drawing");N.exports=function(m,a,g,h){var r=g[0][0].carpet;a={xaxis:n.getFromId(m,r.xaxis||"x"),yaxis:n.getFromId(m,r.yaxis||"y"),plot:a.plot};p(m,a,g,h);for(a=0;a<g.length;a++)r=g[a][0].trace,r=h.selectAll("g.trace"+r.uid+" .js-line"),k.setClipUrl(r,g[a][0].carpet._clipPathId,m)}},{"../../components/drawing":688,"../../plots/cartesian/axes":854,"../scatter/plot":1239}],
1260:[function(b,N,G){G=b("../../plots/template_attributes").hovertemplateAttrs;var p=b("../../plots/template_attributes").texttemplateAttrs,n=b("../scatter/attributes"),k=b("../../plots/attributes"),m=b("../../components/colorscale/attributes"),a=b("../../components/drawing/attributes").dash,g=b("../../lib/extend").extendFlat;b=b("../../plot_api/edit_types").overrideAll;var h=n.marker,r=n.line,l=h.line;N.exports=b({lon:{valType:"data_array"},lat:{valType:"data_array"},locations:{valType:"data_array"},
locationmode:{valType:"enumerated",values:["ISO-3","USA-states","country names","geojson-id"],dflt:"ISO-3"},geojson:{valType:"any",editType:"calc"},featureidkey:{valType:"string",editType:"calc",dflt:"id"},mode:g({},n.mode,{dflt:"markers"}),text:g({},n.text,{}),texttemplate:p({editType:"plot"},{keys:["lat","lon","location","text"]}),hovertext:g({},n.hovertext,{}),textfont:n.textfont,textposition:n.textposition,line:{color:r.color,width:r.width,dash:a},connectgaps:n.connectgaps,marker:g({symbol:h.symbol,
opacity:h.opacity,size:h.size,sizeref:h.sizeref,sizemin:h.sizemin,sizemode:h.sizemode,colorbar:h.colorbar,line:g({width:l.width},m("marker.line")),gradient:h.gradient},m("marker")),fill:{valType:"enumerated",values:["none","toself"],dflt:"none"},fillcolor:n.fillcolor,selected:n.selected,unselected:n.unselected,hoverinfo:g({},k.hoverinfo,{flags:["lon","lat","location","text","name"]}),hovertemplate:G()},"calc","nested")},{"../../components/colorscale/attributes":673,"../../components/drawing/attributes":687,
"../../lib/extend":793,"../../plot_api/edit_types":836,"../../plots/attributes":850,"../../plots/template_attributes":926,"../scatter/attributes":1218}],1261:[function(b,N,G){function p(r){return r&&"string"===typeof r}var n=b("fast-isnumeric"),k=b("../../constants/numerical").BADNUM,m=b("../scatter/colorscale_calc"),a=b("../scatter/arrays_to_calcdata"),g=b("../scatter/calc_selection"),h=b("../../lib")._;N.exports=function(r,l){var c=Array.isArray(l.locations),d=c?l.locations.length:l._length,e=Array(d);
var f=l.geojson?function(z){return p(z)||n(z)}:p;for(var q=0;q<d;q++){var t=e[q]={};if(c){var w=l.locations[q];t.loc=f(w)?w:null}else{w=l.lon[q];var x=l.lat[q];n(w)&&n(x)?t.lonlat=[+w,+x]:t.lonlat=[k,k]}}a(e,l);m(r,l);g(e,l);d&&(e[0].t={labels:{lat:h(r,"lat:")+" ",lon:h(r,"lon:")+" "}});return e}},{"../../constants/numerical":779,"../../lib":803,"../scatter/arrays_to_calcdata":1217,"../scatter/calc_selection":1220,"../scatter/colorscale_calc":1221,"fast-isnumeric":249}],1262:[function(b,N,G){var p=
b("../../lib"),n=b("../scatter/subtypes"),k=b("../scatter/marker_defaults"),m=b("../scatter/line_defaults"),a=b("../scatter/text_defaults"),g=b("../scatter/fillcolor_defaults"),h=b("./attributes");N.exports=function(r,l,c,d){function e(w,x){return p.coerce(r,l,h,w,x)}var f=e("locations");if(f&&f.length){var q=e("geojson");if("string"===typeof q&&""!==q||p.isPlainObject(q))var t="geojson-id";"geojson-id"===e("locationmode",t)&&e("featureidkey");f=f.length}else f=e("lon")||[],q=e("lat")||[],f=Math.min(f.length,
q.length);f?(l._length=f,e("text"),e("hovertext"),e("hovertemplate"),e("mode"),n.hasLines(l)&&(m(r,l,c,d,e),e("connectgaps")),n.hasMarkers(l)&&k(r,l,c,d,e,{gradient:!0}),n.hasText(l)&&(e("texttemplate"),a(r,l,d,e)),e("fill"),"none"!==l.fill&&g(r,l,c,e),p.coerceSelectionMarkerOpacity(l,e)):l.visible=!1}},{"../../lib":803,"../scatter/fillcolor_defaults":1226,"../scatter/line_defaults":1231,"../scatter/marker_defaults":1237,"../scatter/subtypes":1243,"../scatter/text_defaults":1244,"./attributes":1260}],
1263:[function(b,N,G){N.exports=function(p,n,k,m,a){p.lon=n.lon;p.lat=n.lat;p.location=n.loc?n.loc:null;n=m[a];n.fIn&&n.fIn.properties&&(p.properties=n.fIn.properties);return p}},{}],1264:[function(b,N,G){var p=b("../../plots/cartesian/axes");N.exports=function(n,k,m){var a={};k=m[k.geo]._subplot.mockAxis;n=n.lonlat;a.lonLabel=p.tickText(k,k.c2l(n[0]),!0).text;a.latLabel=p.tickText(k,k.c2l(n[1]),!0).text;return a}},{"../../plots/cartesian/axes":854}],1265:[function(b,N,G){function p(h,r,l,c){if(!h.hovertemplate){var d=
r.hi||h.hoverinfo,e="all"===d?g.hoverinfo.flags:d.split("+");d=-1!==e.indexOf("location")&&Array.isArray(h.locations);var f=-1!==e.indexOf("lon"),q=-1!==e.indexOf("lat");e=-1!==e.indexOf("text");var t=[];d?t.push(r.loc):f&&q?t.push("("+(l.latLabel+", ")+(l.lonLabel+")")):f?t.push(c.lon+(l.lonLabel+"")):q&&t.push(c.lat+(l.latLabel+""));e&&a(r,h,t);return t.join("\x3cbr\x3e")}}var n=b("../../components/fx"),k=b("../../constants/numerical").BADNUM,m=b("../scatter/get_trace_color"),a=b("../../lib").fillText,
g=b("./attributes");N.exports=function(h,r,l){var c=h.cd,d=c[0].trace,e=h.xa,f=h.ya,q=h.subplot,t=q.projection.isLonLatOverEdges,w=q.project;n.getClosest(c,function(B){var A=B.lonlat;if(A[0]===k||t(A))return Infinity;var D=w(A),C=w([r,l]);A=Math.abs(D[0]-C[0]);D=Math.abs(D[1]-C[1]);B=Math.max(3,B.mrc||0);return Math.max(Math.sqrt(A*A+D*D)-B,1-3/B)},h);if(!1!==h.index){var x=c[h.index],z=x.lonlat;e=[e.c2p(z),f.c2p(z)];f=x.mrc||1;h.x0=e[0]-f;h.x1=e[0]+f;h.y0=e[1]-f;h.y1=e[1]+f;h.loc=x.loc;h.lon=z[0];
h.lat=z[1];z={};z[d.geo]={_subplot:q};q=d._module.formatLabels(x,d,z);h.lonLabel=q.lonLabel;h.latLabel=q.latLabel;h.color=m(d,x);h.extraText=p(d,x,h,c[0].t.labels);h.hovertemplate=d.hovertemplate;return[h]}}},{"../../components/fx":706,"../../constants/numerical":779,"../../lib":803,"../scatter/get_trace_color":1228,"./attributes":1260}],1266:[function(b,N,G){N.exports={attributes:b("./attributes"),supplyDefaults:b("./defaults"),colorbar:b("../scatter/marker_colorbar"),formatLabels:b("./format_labels"),
calc:b("./calc"),calcGeoJSON:b("./plot").calcGeoJSON,plot:b("./plot").plot,style:b("./style"),styleOnSelect:b("../scatter/style").styleOnSelect,hoverPoints:b("./hover"),eventData:b("./event_data"),selectPoints:b("./select"),moduleType:"trace",name:"scattergeo",basePlotModule:b("../../plots/geo"),categories:["geo","symbols","showLegend","scatter-like"],meta:{}}},{"../../plots/geo":887,"../scatter/marker_colorbar":1236,"../scatter/style":1242,"./attributes":1260,"./calc":1261,"./defaults":1262,"./event_data":1263,
"./format_labels":1264,"./hover":1265,"./plot":1267,"./select":1268,"./style":1269}],1267:[function(b,N,G){var p=b("@plotly/d3"),n=b("../../lib"),k=b("../../lib/topojson_utils").getTopojsonFeatures,m=b("../../lib/geojson_utils"),a=b("../../lib/geo_location_utils"),g=b("../../plots/cartesian/autorange").findExtremes,h=b("../../constants/numerical").BADNUM,r=b("../scatter/calc").calcMarkerSize,l=b("../scatter/subtypes"),c=b("./style");N.exports={calcGeoJSON:function(d,e){var f=d[0].trace;e=e[f.geo];
var q=e._subplot,t=f._length;if(Array.isArray(f.locations)){var w=f.locationmode,x="geojson-id"===w?a.extractTraceFeature(d):k(f,q.topojson);for(q=0;q<t;q++){var z=d[q];var B="geojson-id"===w?z.fOut:a.locationToFeature(w,z.loc,x);z.lonlat=B?B.properties.ct:[h,h]}}w={padded:!0};if("geojson"===e.fitbounds&&"geojson-id"===f.locationmode)d=a.computeBbox(a.getTraceGeojson(f)),x=[d[0],d[2]],B=[d[1],d[3]];else{x=Array(t);B=Array(t);for(q=0;q<t;q++)z=d[q],x[q]=z.lonlat[0],B[q]=z.lonlat[1];w.ppad=r(f,t)}f._extremes.lon=
g(e.lonaxis._ax,x,w);f._extremes.lat=g(e.lataxis._ax,B,w)},plot:function(d,e,f){e=e.layers.frontplot.select(".scatterlayer");f=n.makeTraceGroups(e,f,"trace scattergeo");f.selectAll("*").remove();f.each(function(q){var t=p.select(this),w=q[0].trace;if(l.hasLines(w)||"none"!==w.fill){var x=m.calcTraceToLineCoords(q);x="none"!==w.fill?m.makePolygon(x):m.makeLine(x);t.selectAll("path.js-line").data([{geojson:x,trace:w}]).enter().append("path").classed("js-line",!0).style("stroke-miterlimit",2)}l.hasMarkers(w)&&
t.selectAll("path.point").data(n.identity).enter().append("path").classed("point",!0).each(function(z){z.lonlat[0]===h&&p.select(this).remove()});l.hasText(w)&&t.selectAll("g").data(n.identity).enter().append("g").append("text").each(function(z){z.lonlat[0]===h&&p.select(this).remove()});c(d,q)})}}},{"../../constants/numerical":779,"../../lib":803,"../../lib/geo_location_utils":796,"../../lib/geojson_utils":797,"../../lib/topojson_utils":832,"../../plots/cartesian/autorange":853,"../scatter/calc":1219,
"../scatter/subtypes":1243,"./style":1269,"@plotly/d3":58}],1268:[function(b,N,G){var p=b("../scatter/subtypes"),n=b("../../constants/numerical").BADNUM;N.exports=function(k,m){var a=k.cd,g=k.xaxis,h=k.yaxis,r=[],l=a[0].trace,c;if(!p.hasMarkers(l)&&!p.hasText(l))return[];if(!1===m)for(c=0;c<a.length;c++)a[c].selected=0;else for(c=0;c<a.length;c++){l=a[c];var d=l.lonlat;if(d[0]!==n){var e=g.c2p(d);var f=h.c2p(d);m.contains([e,f],null,c,k)?(r.push({pointNumber:c,lon:d[0],lat:d[1]}),l.selected=1):l.selected=
0}}return r}},{"../../constants/numerical":779,"../scatter/subtypes":1243}],1269:[function(b,N,G){function p(h,r){var l=r[0].trace,c=r[0].node3;c.style("opacity",r[0].trace.opacity);a(c,l,h);g(c,l,h);c.selectAll("path.js-line").style("fill","none").each(function(d){var e=n.select(this);d=d.trace;var f=d.line||{};e.call(m.stroke,f.color).call(k.dashLine,f.dash||"",f.width||0);"none"!==d.fill&&e.call(m.fill,d.fillcolor)})}var n=b("@plotly/d3"),k=b("../../components/drawing"),m=b("../../components/color");
b=b("../scatter/style");var a=b.stylePoints,g=b.styleText;N.exports=function(h,r){r&&p(h,r)}},{"../../components/color":666,"../../components/drawing":688,"../scatter/style":1242,"@plotly/d3":58}],1270:[function(b,N,G){var p=b("../../plots/attributes");G=b("../scatter/attributes");var n=b("../../plots/cartesian/axis_format_attributes").axisHoverFormat,k=b("../../components/colorscale/attributes"),m=b("../../lib/sort_object_keys"),a=b("../../lib/extend").extendFlat,g=b("../../plot_api/edit_types").overrideAll;
b=b("./constants").DASHES;var h=G.line,r=G.marker,l=r.line;N=N.exports=g({x:G.x,x0:G.x0,dx:G.dx,y:G.y,y0:G.y0,dy:G.dy,xperiod:G.xperiod,yperiod:G.yperiod,xperiod0:G.xperiod0,yperiod0:G.yperiod0,xperiodalignment:G.xperiodalignment,yperiodalignment:G.yperiodalignment,xhoverformat:n("x"),yhoverformat:n("y"),text:G.text,hovertext:G.hovertext,textposition:G.textposition,textfont:G.textfont,mode:{valType:"flaglist",flags:["lines","markers","text"],extras:["none"]},line:{color:h.color,width:h.width,shape:{valType:"enumerated",
values:["linear","hv","vh","hvh","vhv"],dflt:"linear",editType:"plot"},dash:{valType:"enumerated",values:m(b),dflt:"solid"}},marker:a({},k("marker"),{symbol:r.symbol,size:r.size,sizeref:r.sizeref,sizemin:r.sizemin,sizemode:r.sizemode,opacity:r.opacity,colorbar:r.colorbar,line:a({},k("marker.line"),{width:l.width})}),connectgaps:G.connectgaps,fill:a({},G.fill,{dflt:"none"}),fillcolor:G.fillcolor,selected:{marker:G.selected.marker,textfont:G.selected.textfont},unselected:{marker:G.unselected.marker,
textfont:G.unselected.textfont},opacity:p.opacity},"calc","nested");N.x.editType=N.y.editType=N.x0.editType=N.y0.editType="calc+clearAxisTypes";N.hovertemplate=G.hovertemplate;N.texttemplate=G.texttemplate},{"../../components/colorscale/attributes":673,"../../lib/extend":793,"../../lib/sort_object_keys":826,"../../plot_api/edit_types":836,"../../plots/attributes":850,"../../plots/cartesian/axis_format_attributes":857,"../scatter/attributes":1218,"./constants":1272}],1271:[function(b,N,G){function p(t,
w,x){t=t._extremes[w._id];w=a(w,x._bnds,{padded:!0});t.min=t.min.concat(w.min);t.max=t.max.concat(w.max)}var n=b("@plotly/point-cluster"),k=b("../../lib"),m=b("../../plots/cartesian/axis_ids"),a=b("../../plots/cartesian/autorange").findExtremes,g=b("../../plots/cartesian/align_period");G=b("../scatter/calc");var h=G.calcMarkerSize,r=G.calcAxisExpansion,l=G.setFirstScatter,c=b("../scatter/colorscale_calc"),d=b("./convert"),e=b("./scene_update"),f=b("../../constants/numerical").BADNUM,q=b("./constants").TOO_MANY_POINTS;
N.exports=function(t,w){var x=t._fullLayout,z=m.getFromId(t,w.xaxis),B=m.getFromId(t,w.yaxis),A=x._plots[w.xaxis+w.yaxis],D=w._length,C=D>=q,v=2*D,y={},F=z.makeCalcdata(w,"x");var J=B.makeCalcdata(w,"y");var K=g(w,z,"x",F),M=g(w,B,"y",J),H=K.vals,O=M.vals;w._x=H;w._y=O;w.xperiodalignment&&(w._origX=F,w._xStarts=K.starts,w._xEnds=K.ends);w.yperiodalignment&&(w._origY=J,w._yStarts=M.starts,w._yEnds=M.ends);F=Array(v);K=Array(D);for(J=0;J<D;J++)F[2*J]=H[J]===f?NaN:H[J],F[2*J+1]=O[J]===f?NaN:O[J],K[J]=
J;if("log"===z.type)for(J=0;J<v;J+=2)F[J]=z.c2l(F[J]);if("log"===B.type)for(J=1;J<v;J+=2)F[J]=B.c2l(F[J]);C&&"log"!==z.type&&"log"!==B.type?y.tree=n(F):y.ids=K;c(t,w);v=d.style(t,w);v.marker&&(v.marker.positions=F);v.line&&1<F.length&&k.extendFlat(v.line,d.linePositions(t,w,F));if(v.errorX||v.errorY)J=d.errorBarPositions(t,w,F,H,O),v.errorX&&k.extendFlat(v.errorX,J.x),v.errorY&&k.extendFlat(v.errorY,J.y);v.text&&(k.extendFlat(v.text,{positions:F},d.textPosition(t,w,v.text,v.marker)),k.extendFlat(v.textSel,
{positions:F},d.textPosition(t,w,v.text,v.markerSel)),k.extendFlat(v.textUnsel,{positions:F},d.textPosition(t,w,v.text,v.markerUnsel)));A=e(t,A);l(x,w);var I;C?v.marker&&(I=v.marker.sizeAvg||Math.max(v.marker.size,3)):I=h(w,D);r(t,w,z,B,H,O,I);v.errorX&&p(w,z,v.errorX);v.errorY&&p(w,B,v.errorY);v.fill&&!A.fill2d&&(A.fill2d=!0);v.marker&&!A.scatter2d&&(A.scatter2d=!0);v.line&&!A.line2d&&(A.line2d=!0);!v.errorX&&!v.errorY||A.error2d||(A.error2d=!0);v.text&&!A.glText&&(A.glText=!0);v.marker&&(v.marker.snap=
D);A.lineOptions.push(v.line);A.errorXOptions.push(v.errorX);A.errorYOptions.push(v.errorY);A.fillOptions.push(v.fill);A.markerOptions.push(v.marker);A.markerSelectedOptions.push(v.markerSel);A.markerUnselectedOptions.push(v.markerUnsel);A.textOptions.push(v.text);A.textSelectedOptions.push(v.textSel);A.textUnselectedOptions.push(v.textUnsel);A.selectBatch.push([]);A.unselectBatch.push([]);y._scene=A;y.index=A.count;y.x=H;y.y=O;y.positions=F;A.count++;return[{x:!1,y:!1,t:y,trace:w}]}},{"../../constants/numerical":779,
"../../lib":803,"../../plots/cartesian/align_period":851,"../../plots/cartesian/autorange":853,"../../plots/cartesian/axis_ids":858,"../scatter/calc":1219,"../scatter/colorscale_calc":1221,"./constants":1272,"./convert":1273,"./scene_update":1281,"@plotly/point-cluster":59}],1272:[function(b,N,G){N.exports={TOO_MANY_POINTS:1E5,SYMBOL_SDF_SIZE:200,SYMBOL_SIZE:20,SYMBOL_STROKE:1,DOT_RE:/-dot/,OPEN_RE:/-open/,DASHES:{solid:[1],dot:[1,1],dash:[4,1],longdash:[8,1],dashdot:[4,1,1,1],longdashdot:[8,1,1,
1]}}},{}],1273:[function(b,N,G){function p(K,M){var H=K._fullLayout,O=M._length,I=M.textfont,L=M.textposition,Q=Array.isArray(L)?L:[L],Z=I.color;L=I.size;I=I.family;var ba={},V;K=K._context.plotGlPixelRatio;var S=M.texttemplate;if(S){ba.text=[];var T=H._d3locale,fa=(V=Array.isArray(S))?Math.min(S.length,O):O,W=V?function(ra){return S[ra]}:function(){return S};for(V=0;V<fa;V++){var aa={i:V},ja=M._module.formatLabels(aa,M,H),ma={};D(ma,M,V);var ia=M._meta||{};ba.text.push(d.texttemplateString(W(V),
ja,T,ma,aa,ia))}}else Array.isArray(M.text)&&M.text.length<O?ba.text=M.text.slice():ba.text=M.text;if(Array.isArray(ba.text))for(V=ba.text.length;V<O;V++)ba.text[V]="";ba.opacity=M.opacity;ba.font={};ba.align=[];ba.baseline=[];for(V=0;V<Q.length;V++){M=Q[V].split(/\s+/);switch(M[1]){case "left":ba.align.push("right");break;case "right":ba.align.push("left");break;default:ba.align.push(M[1])}switch(M[0]){case "top":ba.baseline.push("bottom");break;case "bottom":ba.baseline.push("top");break;default:ba.baseline.push(M[0])}}if(Array.isArray(Z))for(ba.color=
Array(O),V=0;V<O;V++)ba.color[V]=Z[V];else ba.color=Z;if(d.isArrayOrTypedArray(L)||Array.isArray(I))for(ba.font=Array(O),V=0;V<O;V++)M=ba.font[V]={},M.size=(d.isTypedArray(L)?L[V]:Array.isArray(L)?h(L[V])?L[V]:0:L)*K,M.family=Array.isArray(I)?I[V]:I;else ba.font={size:L*K,family:I};return ba}function n(K){var M=K._length,H=K.marker,O={},I=d.isArrayOrTypedArray(H.symbol);var L=d.isArrayOrTypedArray(H.color);var Q=d.isArrayOrTypedArray(H.line.color),Z=d.isArrayOrTypedArray(H.opacity),ba=d.isArrayOrTypedArray(H.size),
V=d.isArrayOrTypedArray(H.line.width),S;I||(S=x.isOpenSymbol(H.symbol));if(I||L||Q||Z){O.colors=Array(M);O.borderColors=Array(M);Q=q(H,H.opacity,M);Z=q(H.line,H.opacity,M);if(!Array.isArray(Z[0])){var T=Z;Z=Array(M);for(L=0;L<M;L++)Z[L]=T}if(!Array.isArray(Q[0]))for(T=Q,Q=Array(M),L=0;L<M;L++)Q[L]=T;O.colors=Q;O.borderColors=Z;for(L=0;L<M;L++)I&&(S=x.isOpenSymbol(H.symbol[L])),S&&(Z[L]=Q[L].slice(),Q[L]=Q[L].slice(),Q[L][3]=0);O.opacity=K.opacity}else S?(O.color=l(H.color,"uint8"),O.color[3]=0,O.borderColor=
l(H.color,"uint8")):(O.color=l(H.color,"uint8"),O.borderColor=l(H.line.color,"uint8")),O.opacity=K.opacity*H.opacity;if(I)for(O.markers=Array(M),L=0;L<M;L++)O.markers[L]=g(H.symbol[L]);else O.marker=g(H.symbol);S=w(K,1);if(ba||V){K=O.sizes=Array(M);I=O.borderSizes=Array(M);Q=0;if(ba){for(L=0;L<M;L++)K[L]=S(H.size[L]),Q+=K[L];var fa=Q/M}else for(ba=S(H.size),L=0;L<M;L++)K[L]=ba;if(V)for(L=0;L<M;L++)I[L]=H.line.width[L];else for(ba=H.line.width,L=0;L<M;L++)I[L]=ba;O.sizeAvg=fa}else O.size=S(H&&H.size||
10),O.borderSizes=S(H.line.width);return O}function k(K,M){K=K.marker;var H={};if(!M)return H;M.marker&&M.marker.symbol?H=n(d.extendFlat({},K,M.marker)):M.marker&&(M.marker.size&&(H.size=M.marker.size),M.marker.color&&(H.colors=M.marker.color),void 0!==M.marker.opacity&&(H.opacity=M.marker.opacity));return H}function m(K,M,H){var O={};if(!H)return O;H.textfont&&(M={opacity:1,text:M.text,texttemplate:M.texttemplate,textposition:M.textposition,textfont:d.extendFlat({},M.textfont)},H.textfont&&d.extendFlat(M.textfont,
H.textfont),O=p(K,M));return O}function a(K,M,H){H={capSize:2*M.width*H,lineWidth:M.thickness*H,color:M.color};M.copy_ystyle&&(H=K.error_y);return H}function g(K){if("circle"===K)return null;var M=e.symbolNumber(K);var H=e.symbolFuncs[M%100];var O=!!e.symbolNoDot[M%100];M=!!e.symbolNoFill[M%100];var I=x.isDotSymbol(K);if(F[K])return F[K];H=I&&!O?H(1.1*v)+J:H(v);H=r(H,{w:C,h:C,viewBox:[-v,-v,v,v],stroke:M?y:-y});return(F[K]=H)||null}var h=b("fast-isnumeric"),r=b("svg-path-sdf"),l=b("color-normalize"),
c=b("../../registry"),d=b("../../lib"),e=b("../../components/drawing"),f=b("../../plots/cartesian/axis_ids"),q=b("../../lib/gl_format_color").formatColor,t=b("../scatter/subtypes"),w=b("../scatter/make_bubble_size_func"),x=b("./helpers"),z=b("./constants"),B=b("../../constants/interactions").DESELECTDIM,A={start:1,left:1,end:-1,right:-1,middle:0,center:0,bottom:1,top:-1},D=b("../../components/fx/helpers").appendArrayPointValue,C=z.SYMBOL_SDF_SIZE,v=z.SYMBOL_SIZE,y=z.SYMBOL_STROKE,F={},J=e.symbolFuncs[0](.05*
v);N.exports={style:function(K,M){var H={marker:void 0,markerSel:void 0,markerUnsel:void 0,line:void 0,fill:void 0,errorX:void 0,errorY:void 0,text:void 0,textSel:void 0,textUnsel:void 0},O=K._context.plotGlPixelRatio;if(!0!==M.visible)return H;t.hasText(M)&&(H.text=p(K,M),H.textSel=m(K,M,M.selected),H.textUnsel=m(K,M,M.unselected));if(t.hasMarkers(M)&&(H.marker=n(M),H.markerSel=k(M,M.selected),H.markerUnsel=k(M,M.unselected),!M.unselected&&d.isArrayOrTypedArray(M.marker.opacity))){var I=M.marker.opacity;
H.markerUnsel.opacity=Array(I.length);for(K=0;K<I.length;K++)H.markerUnsel.opacity[K]=B*I[K]}if(t.hasLines(M)){H.line={overlay:!0,thickness:M.line.width*O,color:M.line.color,opacity:M.opacity};I=(z.DASHES[M.line.dash]||[1]).slice();for(K=0;K<I.length;++K)I[K]=I[K]*M.line.width*O;H.line.dashes=I}M.error_x&&M.error_x.visible&&(H.errorX=a(M,M.error_x,O));M.error_y&&M.error_y.visible&&(H.errorY=a(M,M.error_y,O));M.fill&&"none"!==M.fill&&(H.fill={closed:!0,fill:M.fillcolor,thickness:0});return H},markerStyle:n,
markerSelection:k,linePositions:function(K,M,H){var O=H.length,I=O/2;if(t.hasLines(M)&&I)if("hv"===M.line.shape){var L=[];for(K=0;K<I-1;K++)isNaN(H[2*K])||isNaN(H[2*K+1])?L.push(NaN,NaN,NaN,NaN):(L.push(H[2*K],H[2*K+1]),isNaN(H[2*K+2])||isNaN(H[2*K+3])?L.push(NaN,NaN):L.push(H[2*K+2],H[2*K+1]));L.push(H[O-2],H[O-1])}else if("hvh"===M.line.shape){L=[];for(K=0;K<I-1;K++)if(isNaN(H[2*K])||isNaN(H[2*K+1])||isNaN(H[2*K+2])||isNaN(H[2*K+3]))isNaN(H[2*K])||isNaN(H[2*K+1])?L.push(NaN,NaN):L.push(H[2*K],H[2*
K+1]),L.push(NaN,NaN);else{var Q=(H[2*K]+H[2*K+2])/2;L.push(H[2*K],H[2*K+1],Q,H[2*K+1],Q,H[2*K+3])}L.push(H[O-2],H[O-1])}else if("vhv"===M.line.shape){L=[];for(K=0;K<I-1;K++)isNaN(H[2*K])||isNaN(H[2*K+1])||isNaN(H[2*K+2])||isNaN(H[2*K+3])?(isNaN(H[2*K])||isNaN(H[2*K+1])?L.push(NaN,NaN):L.push(H[2*K],H[2*K+1]),L.push(NaN,NaN)):(Q=(H[2*K+1]+H[2*K+3])/2,L.push(H[2*K],H[2*K+1],H[2*K],Q,H[2*K+2],Q));L.push(H[O-2],H[O-1])}else if("vh"===M.line.shape){L=[];for(K=0;K<I-1;K++)isNaN(H[2*K])||isNaN(H[2*K+1])?
L.push(NaN,NaN,NaN,NaN):(L.push(H[2*K],H[2*K+1]),isNaN(H[2*K+2])||isNaN(H[2*K+3])?L.push(NaN,NaN):L.push(H[2*K],H[2*K+3]));L.push(H[O-2],H[O-1])}else L=H;O=!1;for(K=0;K<L.length;K++)if(isNaN(L[K])){O=!0;break}H=O||L.length>z.TOO_MANY_POINTS?"rect":t.hasMarkers(M)?"rect":"round";if(O&&M.connectgaps)for(M=L[0],O=L[1],K=0;K<L.length;K+=2)isNaN(L[K])||isNaN(L[K+1])?(L[K]=M,L[K+1]=O):(M=L[K],O=L[K+1]);return{join:H,positions:L}},errorBarPositions:function(K,M,H,O,I){function L(S,T){var fa=T._id.charAt(0),
W=M["error_"+fa];if(W&&W.visible&&("linear"===T.type||"log"===T.type)){W=Q(W);for(var aa={x:0,y:1}[fa],ja={x:[0,1,2,3],y:[2,3,0,1]}[fa],ma=new Float64Array(4*ba),ia=Infinity,ra=-Infinity,wa=0,pa=0;wa<ba;wa++,pa+=4){var la=S[wa];if(h(la)){var ka=H[2*wa+aa],na=W(la,wa),oa=na[0];na=na[1];if(h(oa)&&h(na)){var sa=la+na;ma[pa+ja[0]]=ka-T.c2l(la-oa);ma[pa+ja[1]]=T.c2l(sa)-ka;ma[pa+ja[2]]=0;ma[pa+ja[3]]=0;ia=Math.min(ia,la-oa);ra=Math.max(ra,la+na)}}}V[fa]={positions:H,errors:ma,_bnds:[ia,ra]}}}var Q=c.getComponentMethod("errorbars",
"makeComputeError"),Z=f.getFromId(K,M.xaxis);K=f.getFromId(K,M.yaxis);var ba=H.length/2,V={};L(O,Z);L(I,K);return V},textPosition:function(K,M,H,O){K=M._length;var I={};if(t.hasMarkers(M)){M=H.font;var L=H.align,Q=H.baseline;I.offset=Array(K);for(H=0;H<K;H++){var Z=O.sizes?O.sizes[H]:O.size,ba=Array.isArray(M)?M[H].size:M.size,V=Array.isArray(L)?1<L.length?L[H]:L[0]:L,S=Array.isArray(Q)?1<Q.length?Q[H]:Q[0]:Q;S=A[S];Z=Z?Z/.8+1:0;I.offset[H]=[A[V]*Z/ba,(-S*Z-.5*S)/ba]}}return I}}},{"../../components/drawing":688,
"../../components/fx/helpers":702,"../../constants/interactions":778,"../../lib":803,"../../lib/gl_format_color":799,"../../plots/cartesian/axis_ids":858,"../../registry":931,"../scatter/make_bubble_size_func":1235,"../scatter/subtypes":1243,"./constants":1272,"./helpers":1277,"color-normalize":131,"fast-isnumeric":249,"svg-path-sdf":595}],1274:[function(b,N,G){var p=b("../../lib"),n=b("../../registry"),k=b("./helpers"),m=b("./attributes"),a=b("../scatter/constants"),g=b("../scatter/subtypes"),h=
b("../scatter/xy_defaults"),r=b("../scatter/period_defaults"),l=b("../scatter/marker_defaults"),c=b("../scatter/line_defaults"),d=b("../scatter/fillcolor_defaults"),e=b("../scatter/text_defaults");N.exports=function(f,q,t,w){function x(D,C){return p.coerce(f,q,m,D,C)}var z=f.marker?k.isOpenSymbol(f.marker.symbol):!1,B=g.isBubble(f),A=h(f,q,w,x);A?(r(f,q,w,x),x("xhoverformat"),x("yhoverformat"),A=A<a.PTS_LINESONLY?"lines+markers":"lines",x("text"),x("hovertext"),x("hovertemplate"),x("mode",A),g.hasLines(q)&&
(x("connectgaps"),c(f,q,t,w,x),x("line.shape")),g.hasMarkers(q)&&(l(f,q,t,w,x),x("marker.line.width",z||B?1:0)),g.hasText(q)&&(x("texttemplate"),e(f,q,w,x)),w=(q.line||{}).color,z=(q.marker||{}).color,x("fill"),"none"!==q.fill&&d(f,q,t,x),B=n.getComponentMethod("errorbars","supplyDefaults"),B(f,q,w||z||t,{axis:"y"}),B(f,q,w||z||t,{axis:"x",inherit:"y"}),p.coerceSelectionMarkerOpacity(q,x)):q.visible=!1}},{"../../lib":803,"../../registry":931,"../scatter/constants":1222,"../scatter/fillcolor_defaults":1226,
"../scatter/line_defaults":1231,"../scatter/marker_defaults":1237,"../scatter/period_defaults":1238,"../scatter/subtypes":1243,"../scatter/text_defaults":1244,"../scatter/xy_defaults":1245,"./attributes":1270,"./helpers":1277}],1275:[function(b,N,G){var p=b("../../lib"),n=b("../../components/color"),k=b("../../constants/interactions").DESELECTDIM;N.exports={styleTextSelection:function(m){m=m[0];var a=m.trace,g=m.t;m=g._scene;g=g.index;var h=m.selectBatch[g],r=m.unselectBatch[g],l=m.textOptions[g],
c=m.textSelectedOptions[g]||{},d=m.textUnselectedOptions[g]||{},e=p.extendFlat({},l);if(h.length||r.length){c=c.color;d=d.color;l=l.color;var f=Array.isArray(l);e.color=Array(a._length);for(a=0;a<h.length;a++){var q=h[a];e.color[q]=c||(f?l[q]:l)}for(a=0;a<r.length;a++)q=r[a],h=f?l[q]:l,e.color[q]=d?d:c?h:n.addOpacity(h,k)}m.glText[g].update(e)}}},{"../../components/color":666,"../../constants/interactions":778,"../../lib":803}],1276:[function(b,N,G){var p=b("../scatter/format_labels");N.exports=function(n,
k,m){var a=n.i;"x"in n||(n.x=k._x[a]);"y"in n||(n.y=k._y[a]);return p(n,k,m)}},{"../scatter/format_labels":1227}],1277:[function(b,N,G){var p=b("./constants");G.isOpenSymbol=function(n){return"string"===typeof n?p.OPEN_RE.test(n):100<n%200};G.isDotSymbol=function(n){return"string"===typeof n?p.DOT_RE.test(n):200<n}},{"./constants":1272}],1278:[function(b,N,G){function p(a,g,h,r){var l=a.xa,c=a.ya,d=a.distance,e=a.dxy,f=a.index;g={pointNumber:f,x:g[f],y:h[f]};g.tx=Array.isArray(r.text)?r.text[f]:r.text;
g.htx=Array.isArray(r.hovertext)?r.hovertext[f]:r.hovertext;g.data=Array.isArray(r.customdata)?r.customdata[f]:r.customdata;g.tp=Array.isArray(r.textposition)?r.textposition[f]:r.textposition;if(h=r.textfont)g.ts=k.isArrayOrTypedArray(h.size)?h.size[f]:h.size,g.tc=Array.isArray(h.color)?h.color[f]:h.color,g.tf=Array.isArray(h.family)?h.family[f]:h.family;if(h=r.marker)g.ms=k.isArrayOrTypedArray(h.size)?h.size[f]:h.size,g.mo=k.isArrayOrTypedArray(h.opacity)?h.opacity[f]:h.opacity,g.mx=k.isArrayOrTypedArray(h.symbol)?
h.symbol[f]:h.symbol,g.mc=k.isArrayOrTypedArray(h.color)?h.color[f]:h.color;var q=h&&h.line;q&&(g.mlc=Array.isArray(q.color)?q.color[f]:q.color,g.mlw=k.isArrayOrTypedArray(q.width)?q.width[f]:q.width);(h=h&&h.gradient)&&"none"!==h.type&&(g.mgt=Array.isArray(h.type)?h.type[f]:h.type,g.mgc=Array.isArray(h.color)?h.color[f]:h.color);l=l.c2p(g.x,!0);c=c.c2p(g.y,!0);h=g.mrc||1;if(q=r.hoverlabel)g.hbg=Array.isArray(q.bgcolor)?q.bgcolor[f]:q.bgcolor,g.hbc=Array.isArray(q.bordercolor)?q.bordercolor[f]:q.bordercolor,
g.hts=k.isArrayOrTypedArray(q.font.size)?q.font.size[f]:q.font.size,g.htc=Array.isArray(q.font.color)?q.font.color[f]:q.font.color,g.htf=Array.isArray(q.font.family)?q.font.family[f]:q.font.family,g.hnl=k.isArrayOrTypedArray(q.namelength)?q.namelength[f]:q.namelength;if(q=r.hoverinfo)g.hi=Array.isArray(q)?q[f]:q;if(q=r.hovertemplate)g.ht=Array.isArray(q)?q[f]:q;q={};q[a.index]=g;var t=r._origX,w=r._origY;a=k.extendFlat({},a,{color:m(r,g),x0:l-h,x1:l+h,xLabelVal:t?t[f]:g.x,y0:c-h,y1:c+h,yLabelVal:w?
w[f]:g.y,cd:q,distance:d,spikeDistance:e,hovertemplate:g.ht});g.htx?a.text=g.htx:g.tx?a.text=g.tx:r.text&&(a.text=r.text);k.fillText(g,r,a);n.getComponentMethod("errorbars","hoverInfo")(g,r,a);return a}var n=b("../../registry"),k=b("../../lib"),m=b("../scatter/get_trace_color");N.exports={hoverPoints:function(a,g,h,r){var l=a.cd,c=l[0].t;l=l[0].trace;var d=a.xa,e=a.ya,f=c.x,q=c.y;g=d.c2p(g);h=e.c2p(h);var t=a.distance;if(c.tree){var w=d.p2c(g-t),x=d.p2c(g+t),z=e.p2c(h-t),B=e.p2c(h+t);c="x"===r?c.tree.range(Math.min(w,
x),Math.min(e._rl[0],e._rl[1]),Math.max(w,x),Math.max(e._rl[0],e._rl[1])):c.tree.range(Math.min(w,x),Math.min(z,B),Math.max(w,x),Math.max(z,B))}else c=c.ids;if("x"===r)for(x=!!l.xperiodalignment,z=!!l.yperiodalignment,r=0;r<c.length;r++){w=c[r];B=f[w];B=Math.abs(d.c2p(B)-g);if(x){B=d.c2p(l._xStarts[w]);var A=d.c2p(l._xEnds[w]);B=g>=Math.min(B,A)&&g<=Math.max(B,A)?0:Infinity}if(B<t){t=B;A=q[w];A=e.c2p(A)-h;if(z){var D=e.c2p(l._yStarts[w]);var C=e.c2p(l._yEnds[w]);A=h>=Math.min(D,C)&&h<=Math.max(D,
C)?0:Infinity}C=Math.sqrt(B*B+A*A);D=c[r]}}else for(r=c.length-1;-1<r;r--)w=c[r],B=f[w],A=q[w],B=d.c2p(B)-g,A=e.c2p(A)-h,x=Math.sqrt(B*B+A*A),x<t&&(t=C=x,D=w);a.index=D;a.distance=t;a.dxy=C;return void 0===D?[a]:[p(a,f,q,l)]},calcHover:p}},{"../../lib":803,"../../registry":931,"../scatter/get_trace_color":1228}],1279:[function(b,N,G){G=b("./hover");N.exports={moduleType:"trace",name:"scattergl",basePlotModule:b("../../plots/cartesian"),categories:"gl regl cartesian symbols errorBarsOK showLegend scatter-like".split(" "),
attributes:b("./attributes"),supplyDefaults:b("./defaults"),crossTraceDefaults:b("../scatter/cross_trace_defaults"),colorbar:b("../scatter/marker_colorbar"),formatLabels:b("./format_labels"),calc:b("./calc"),plot:b("./plot"),hoverPoints:G.hoverPoints,selectPoints:b("./select"),meta:{}}},{"../../plots/cartesian":868,"../scatter/cross_trace_defaults":1224,"../scatter/marker_colorbar":1236,"./attributes":1270,"./calc":1271,"./defaults":1274,"./format_labels":1276,"./hover":1278,"./plot":1280,"./select":1282}],
1280:[function(b,N,G){function p(e,f,q,t){var w=e._size,x=w.w*t,z=w.h*t;return[w.l*t+f.domain[0]*x,w.b*t+q.domain[0]*z,e.width*t-w.r*t-(1-f.domain[1])*x,e.height*t-w.t*t-(1-q.domain[1])*z]}var n=b("regl-scatter2d"),k=b("regl-line2d"),m=b("regl-error2d"),a=b("gl-text"),g=b("../../lib"),h=b("../../components/dragelement/helpers").selectMode,r=b("../../lib/prepare_regl"),l=b("../scatter/subtypes"),c=b("../scatter/link_traces"),d=b("./edit_style").styleTextSelection;N.exports=function(e,f,q){if(q.length){var t=
e._fullLayout,w=f._scene,x=f.xaxis,z=f.yaxis;if(w)if(r(e,["ANGLE_instanced_arrays","OES_element_index_uint"])){var B=w.count,A=t._glcanvas.data()[0].regl;c(e,f,q);if(w.dirty){!0===w.error2d&&(w.error2d=m(A));!0===w.line2d&&(w.line2d=k(A));!0===w.scatter2d&&(w.scatter2d=n(A));!0===w.fill2d&&(w.fill2d=k(A));if(!0===w.glText)for(w.glText=Array(B),f=0;f<B;f++)w.glText[f]=new a(A);if(w.glText){if(B>w.glText.length){var D=B-w.glText.length;for(f=0;f<D;f++)w.glText.push(new a(A))}else B<w.glText.length&&
w.glText.splice(B,w.glText.length-B).forEach(function(I){I.destroy()});for(f=0;f<B;f++)w.glText[f].update(w.textOptions[f])}w.line2d&&(w.line2d.update(w.lineOptions),w.lineOptions=w.lineOptions.map(function(I){if(I&&I.positions){for(var L=I.positions,Q=0;Q<L.length&&(isNaN(L[Q])||isNaN(L[Q+1]));)Q+=2;for(var Z=L.length-2;Z>Q&&(isNaN(L[Z])||isNaN(L[Z+1]));)Z-=2;I.positions=L.slice(Q,Z+2)}return I}),w.line2d.update(w.lineOptions));w.error2d&&(f=(w.errorXOptions||[]).concat(w.errorYOptions||[]),w.error2d.update(f));
w.scatter2d&&w.scatter2d.update(w.markerOptions);w.fillOrder=g.repeat(null,B);w.fill2d&&(w.fillOptions=w.fillOptions.map(function(I,L){var Q=q[L];if(I&&Q&&Q[0]&&Q[0].trace){var Z=Q[0];Q=Z.trace;var ba=Z.t,V=w.lineOptions[L],S;Z=[];Q._ownfill&&Z.push(L);Q._nexttrace&&Z.push(L+1);Z.length&&(w.fillOrder[L]=Z);Z=[];ba=V&&V.positions||ba.positions;if("tozeroy"===Q.fill){for(V=0;V<ba.length&&isNaN(ba[V+1]);)V+=2;for(S=ba.length-2;S>V&&isNaN(ba[S+1]);)S-=2;0!==ba[V+1]&&(Z=[ba[V],0]);Z=Z.concat(ba.slice(V,
S+2));0!==ba[S+1]&&(Z=Z.concat([ba[S],0]))}else if("tozerox"===Q.fill){for(V=0;V<ba.length&&isNaN(ba[V]);)V+=2;for(S=ba.length-2;S>V&&isNaN(ba[S]);)S-=2;0!==ba[V]&&(Z=[0,ba[V+1]]);Z=Z.concat(ba.slice(V,S+2));0!==ba[S]&&(Z=Z.concat([0,ba[S+1]]))}else if("toself"===Q.fill||"tonext"===Q.fill){Z=[];S=0;I.splitNull=!0;for(V=0;V<ba.length;V+=2)if(isNaN(ba[V])||isNaN(ba[V+1]))Z=Z.concat(ba.slice(S,V)),Z.push(ba[S],ba[S+1]),Z.push(null,null),S=V+2;Z=Z.concat(ba.slice(S));S&&Z.push(ba[S],ba[S+1])}else if(V=
Q._nexttrace)if(S=w.lineOptions[L+1])if(S=S.positions,"tonexty"===Q.fill){Z=ba.slice();for(L=Math.floor(S.length/2);L--;){ba=S[2*L];var T=S[2*L+1];isNaN(ba)||isNaN(T)||Z.push(ba,T)}I.fill=V.fillcolor}if(Q._prevtrace&&"tonext"===Q._prevtrace.fill){L=w.lineOptions[L-1].positions;ba=Z.length/2;S=[ba];for(V=0;V<L.length;V+=2)(isNaN(L[V])||isNaN(L[V+1]))&&S.push(V/2+ba+1);Z=Z.concat(L);I.hole=S}I.fillmode=Q.fill;I.opacity=Q.opacity;I.positions=Z;return I}}),w.fill2d.update(w.fillOptions))}A=h(t.dragmode);
D=-1<t.clickmode.indexOf("select");for(f=0;f<B;f++){var C=q[f][0];var v=C.trace;var y=C.t,F=y.index;C=v._length;var J=y.x,K=y.y;if(v.selectedpoints||A||D){A||(A=!0);if(v.selectedpoints){var M=w.selectBatch[F]=g.selIndices2selPoints(v),H={};for(v=0;v<M.length;v++)H[M[v]]=1;M=[];for(v=0;v<C;v++)H[v]||M.push(v);w.unselectBatch[F]=M}F=y.xpx=Array(C);y=y.ypx=Array(C);for(v=0;v<C;v++)F[v]=x.c2p(J[v]),y[v]=z.c2p(K[v])}else y.xpx=y.ypx=null}if(A){w.select2d||(w.select2d=n(t._glcanvas.data()[1].regl));if(w.scatter2d){A=
Array(B);for(f=0;f<B;f++)A[f]=w.selectBatch[f].length||w.unselectBatch[f].length?w.markerUnselectedOptions[f]:{};w.scatter2d.update(A)}w.select2d&&(w.select2d.update(w.markerOptions),w.select2d.update(w.markerSelectedOptions));w.glText&&q.forEach(function(I){l.hasText(((I||[])[0]||{}).trace||{})&&d(I)})}else w.scatter2d&&w.scatter2d.update(w.markerOptions);var O={viewport:p(t,x,z,e._context.plotGlPixelRatio),range:[(x._rl||x.range)[0],(z._rl||z.range)[0],(x._rl||x.range)[1],(z._rl||z.range)[1]]};
e=g.repeat(O,w.count);w.fill2d&&w.fill2d.update(e);w.line2d&&w.line2d.update(e);w.error2d&&w.error2d.update(e.concat(e));w.scatter2d&&w.scatter2d.update(e);w.select2d&&w.select2d.update(e);w.glText&&w.glText.forEach(function(I){I.update(O)})}else w.init()}}},{"../../components/dragelement/helpers":684,"../../lib":803,"../../lib/prepare_regl":816,"../scatter/link_traces":1234,"../scatter/subtypes":1243,"./edit_style":1275,"gl-text":355,"regl-error2d":536,"regl-line2d":537,"regl-scatter2d":538}],1281:[function(b,
N,G){var p=b("../../lib");N.exports=function(n,k){var m=k._scene,a={count:0,dirty:!0,lineOptions:[],fillOptions:[],markerOptions:[],markerSelectedOptions:[],markerUnselectedOptions:[],errorXOptions:[],errorYOptions:[],textOptions:[],textSelectedOptions:[],textUnselectedOptions:[],selectBatch:[],unselectBatch:[]},g={fill2d:!1,scatter2d:!1,error2d:!1,line2d:!1,glText:!1,select2d:!1};k._scene||(m=k._scene={},m.init=function(){p.extendFlat(m,g,a)},m.init(),m.update=function(h){var r=p.repeat(h,m.count);
m.fill2d&&m.fill2d.update(r);m.scatter2d&&m.scatter2d.update(r);m.line2d&&m.line2d.update(r);m.error2d&&m.error2d.update(r.concat(r));m.select2d&&m.select2d.update(r);if(m.glText)for(r=0;r<m.count;r++)m.glText[r].update(h)},m.draw=function(){for(var h=m.count,r=m.fill2d,l=m.error2d,c=m.line2d,d=m.scatter2d,e=m.glText,f=m.select2d,q=m.selectBatch,t=m.unselectBatch,w=0;w<h;w++){r&&m.fillOrder[w]&&r.draw(m.fillOrder[w]);c&&m.lineOptions[w]&&c.draw(w);l&&(m.errorXOptions[w]&&l.draw(w),m.errorYOptions[w]&&
l.draw(w+h));if(d&&m.markerOptions[w])if(t[w].length){var x=p.repeat([],m.count);x[w]=t[w];d.draw(x)}else q[w].length||d.draw(w);e[w]&&m.textOptions[w]&&e[w].render()}f&&f.draw(q);m.dirty=!1},m.destroy=function(){m.fill2d&&m.fill2d.destroy&&m.fill2d.destroy();m.scatter2d&&m.scatter2d.destroy&&m.scatter2d.destroy();m.error2d&&m.error2d.destroy&&m.error2d.destroy();m.line2d&&m.line2d.destroy&&m.line2d.destroy();m.select2d&&m.select2d.destroy&&m.select2d.destroy();m.glText&&m.glText.forEach(function(h){h.destroy&&
h.destroy()});m.lineOptions=null;m.fillOptions=null;m.markerOptions=null;m.markerSelectedOptions=null;m.markerUnselectedOptions=null;m.errorXOptions=null;m.errorYOptions=null;m.textOptions=null;m.textSelectedOptions=null;m.textUnselectedOptions=null;m.selectBatch=null;m.unselectBatch=null;k._scene=null});m.dirty||p.extendFlat(m,a);return m}},{"../../lib":803}],1282:[function(b,N,G){var p=b("../scatter/subtypes"),n=b("./edit_style").styleTextSelection;N.exports=function(k,m){var a=k.cd,g=k.xaxis,h=
k.yaxis,r=[],l=a[0].trace,c=a[0].t,d=l._length,e=c.x,f=c.y,q=c._scene,t=c.index;if(!q)return r;var w=p.hasText(l),x=p.hasMarkers(l);if(!0!==l.visible||!x&&!w)return r;l=[];var z=[];if(!1!==m&&!m.degenerate)for(var B=0;B<d;B++)m.contains([c.xpx[B],c.ypx[B]],!1,B,k)?(l.push(B),r.push({pointNumber:B,x:g.c2d(e[B]),y:h.c2d(f[B])})):z.push(B);x&&((k=q.scatter2d,l.length||z.length)?q.selectBatch[t].length||q.unselectBatch[t].length||(m=Array(q.count),m[t]=q.markerUnselectedOptions[t],k.update.apply(k,m)):
(m=Array(q.count),m[t]=q.markerOptions[t],k.update.apply(k,m)));q.selectBatch[t]=l;q.unselectBatch[t]=z;w&&n(a);return r}},{"../scatter/subtypes":1243,"./edit_style":1275}],1283:[function(b,N,G){G=b("../../plots/template_attributes").hovertemplateAttrs;var p=b("../../plots/template_attributes").texttemplateAttrs,n=b("../scattergeo/attributes"),k=b("../scatter/attributes"),m=b("../../plots/mapbox/layout_attributes"),a=b("../../plots/attributes"),g=b("../../components/colorscale/attributes"),h=b("../../lib/extend").extendFlat;
b=b("../../plot_api/edit_types").overrideAll;var r=n.line,l=n.marker;N.exports=b({lon:n.lon,lat:n.lat,mode:h({},k.mode,{dflt:"markers"}),text:h({},k.text,{}),texttemplate:p({editType:"plot"},{keys:["lat","lon","text"]}),hovertext:h({},k.hovertext,{}),line:{color:r.color,width:r.width},connectgaps:k.connectgaps,marker:h({symbol:{valType:"string",dflt:"circle",arrayOk:!0},angle:{valType:"number",dflt:"auto",arrayOk:!0},allowoverlap:{valType:"boolean",dflt:!1},opacity:l.opacity,size:l.size,sizeref:l.sizeref,
sizemin:l.sizemin,sizemode:l.sizemode},g("marker")),fill:n.fill,fillcolor:k.fillcolor,textfont:m.layers.symbol.textfont,textposition:m.layers.symbol.textposition,below:{valType:"string"},selected:{marker:k.selected.marker},unselected:{marker:k.unselected.marker},hoverinfo:h({},a.hoverinfo,{flags:["lon","lat","text","name"]}),hovertemplate:G()},"calc","nested")},{"../../components/colorscale/attributes":673,"../../lib/extend":793,"../../plot_api/edit_types":836,"../../plots/attributes":850,"../../plots/mapbox/layout_attributes":913,
"../../plots/template_attributes":926,"../scatter/attributes":1218,"../scattergeo/attributes":1260}],1284:[function(b,N,G){function p(){return{geojson:r.makeBlank(),layout:{visibility:"none"},paint:{}}}function n(x){var z=x[0].trace,B=z.marker,A=z.selectedpoints,D=g.isArrayOrTypedArray(B.color),C=g.isArrayOrTypedArray(B.size),v=g.isArrayOrTypedArray(B.opacity),y,F;D&&(F=l.hasColorscale(z,"marker")?l.makeColorScaleFuncFromTrace(B):g.identity);var J;C&&(J=d(z));var K;v&&(K=function(Q){Q=a(Q)?+g.constrain(Q,
0,1):0;return z.opacity*Q});var M=[];for(y=0;y<x.length;y++){var H=x[y],O=H.lonlat;if(O[0]!==h){var I={};F&&(I.mcc=H.mcc=F(H.mc));J&&(I.mrc=H.mrc=J(H.ms));K&&(I.mo=K(H.mo));A&&(I.selected=H.selected||0);M.push({type:"Feature",geometry:{type:"Point",coordinates:O},properties:I})}}if(A){var L=c.makeSelectedPointStyleFns(z);for(y=0;y<M.length;y++)x=M[y].properties,L.selectedOpacityFn&&(x.mo=z.opacity*L.selectedOpacityFn(x)),L.selectedColorFn&&(x.mcc=L.selectedColorFn(x)),L.selectedSizeFn&&(x.mrc=L.selectedSizeFn(x))}return{geojson:{type:"FeatureCollection",
features:M},mcc:D||L&&L.selectedColorFn?{type:"identity",property:"mcc"}:B.color,mrc:C||L&&L.selectedSizeFn?{type:"identity",property:"mrc"}:B.size/2,mo:v||L&&L.selectedOpacityFn?{type:"identity",property:"mo"}:z.opacity*B.opacity}}function k(x,z){return g.isArrayOrTypedArray(x)?z?function(B){return a(x[B])?+x[B]:0}:function(B){return x[B]}:x?function(){return x}:m}function m(){return""}var a=b("fast-isnumeric"),g=b("../../lib"),h=b("../../constants/numerical").BADNUM,r=b("../../lib/geojson_utils"),
l=b("../../components/colorscale"),c=b("../../components/drawing"),d=b("../scatter/make_bubble_size_func"),e=b("../scatter/subtypes"),f=b("../../plots/mapbox/convert_text_opts"),q=b("../../components/fx/helpers").appendArrayPointValue,t=b("../../lib/svg_text_utils").NEWLINES,w=b("../../lib/svg_text_utils").BR_TAG_ALL;N.exports=function(x,z){var B=z[0].trace,A=!0===B.visible&&0!==B._length,D="none"!==B.fill,C=e.hasLines(B),v=e.hasMarkers(B),y=e.hasText(B),F=v&&"circle"===B.marker.symbol,J=v&&"circle"!==
B.marker.symbol,K=p(),M=p(),H=p();v=p();var O={fill:K,line:M,circle:H,symbol:v};if(!A)return O;if(D||C)var I=r.calcTraceToLineCoords(z);D&&(K.geojson=r.makePolygon(I),K.layout.visibility="visible",g.extendFlat(K.paint,{"fill-color":B.fillcolor}));C&&(M.geojson=r.makeLine(I),M.layout.visibility="visible",g.extendFlat(M.paint,{"line-width":B.line.width,"line-color":B.line.color,"line-opacity":B.opacity}));F&&(A=n(z),H.geojson=A.geojson,H.layout.visibility="visible",g.extendFlat(H.paint,{"circle-color":A.mcc,
"circle-radius":A.mrc,"circle-opacity":A.mo}));if(J||y){x=x._fullLayout;A=z[0].trace;C=A.marker||{};D=C.symbol;C=C.angle;D="circle"!==D?k(D):m;C="auto"!==C?k(C,!0):m;F=e.hasText(A)?k(A.text):m;H=[];for(I=0;I<z.length;I++)if(K=z[I],K.lonlat[0]!==h){if(M=A.texttemplate){M=Array.isArray(M)?M[I]||"":M;var L=A._module.formatLabels(K,A,x),Q={};q(Q,A,K.i);M=g.texttemplateString(M,L,x._d3locale,Q,K,A._meta||{})}else M=F(I);M&&(M=M.replace(t,"").replace(w,"\n"));H.push({type:"Feature",geometry:{type:"Point",
coordinates:K.lonlat},properties:{symbol:D(I),angle:C(I),text:M}})}v.geojson={type:"FeatureCollection",features:H};g.extendFlat(v.layout,{visibility:"visible","icon-image":"{symbol}-15","text-field":"{text}"});J&&(g.extendFlat(v.layout,{"icon-size":B.marker.size/10}),"angle"in B.marker&&"auto"!==B.marker.angle&&g.extendFlat(v.layout,{"icon-rotate":{type:"identity",property:"angle"},"icon-rotation-alignment":"map"}),v.layout["icon-allow-overlap"]=B.marker.allowoverlap,g.extendFlat(v.paint,{"icon-opacity":B.opacity*
B.marker.opacity,"icon-color":B.marker.color}));y&&(z=f(B.textposition,(B.marker||{}).size),g.extendFlat(v.layout,{"text-size":B.textfont.size,"text-anchor":z.anchor,"text-offset":z.offset}),g.extendFlat(v.paint,{"text-color":B.textfont.color,"text-opacity":B.opacity}))}return O}},{"../../components/colorscale":678,"../../components/drawing":688,"../../components/fx/helpers":702,"../../constants/numerical":779,"../../lib":803,"../../lib/geojson_utils":797,"../../lib/svg_text_utils":829,"../../plots/mapbox/convert_text_opts":910,
"../scatter/make_bubble_size_func":1235,"../scatter/subtypes":1243,"fast-isnumeric":249}],1285:[function(b,N,G){function p(l,c,d){l=d("lon")||[];d=d("lat")||[];d=Math.min(l.length,d.length);return c._length=d}var n=b("../../lib"),k=b("../scatter/subtypes"),m=b("../scatter/marker_defaults"),a=b("../scatter/line_defaults"),g=b("../scatter/text_defaults"),h=b("../scatter/fillcolor_defaults"),r=b("./attributes");N.exports=function(l,c,d,e){function f(t,w){return n.coerce(l,c,r,t,w)}if(p(l,c,f)){f("text");
f("texttemplate");f("hovertext");f("hovertemplate");f("mode");f("below");k.hasLines(c)&&(a(l,c,d,e,f,{noDash:!0}),f("connectgaps"));if(k.hasMarkers(c)){m(l,c,d,e,f,{noLine:!0});f("marker.allowoverlap");f("marker.angle");var q=c.marker;"circle"!==q.symbol&&(n.isArrayOrTypedArray(q.size)&&(q.size=q.size[0]),n.isArrayOrTypedArray(q.color)&&(q.color=q.color[0]))}k.hasText(c)&&g(l,c,e,f,{noSelect:!0});f("fill");"none"!==c.fill&&h(l,c,d,f);n.coerceSelectionMarkerOpacity(c,f)}else c.visible=!1}},{"../../lib":803,
"../scatter/fillcolor_defaults":1226,"../scatter/line_defaults":1231,"../scatter/marker_defaults":1237,"../scatter/subtypes":1243,"../scatter/text_defaults":1244,"./attributes":1283}],1286:[function(b,N,G){N.exports=function(p,n){p.lon=n.lon;p.lat=n.lat;return p}},{}],1287:[function(b,N,G){var p=b("../../plots/cartesian/axes");N.exports=function(n,k,m){var a={};k=m[k.subplot]._subplot.mockAxis;n=n.lonlat;a.lonLabel=p.tickText(k,k.c2l(n[0]),!0).text;a.latLabel=p.tickText(k,k.c2l(n[1]),!0).text;return a}},
{"../../plots/cartesian/axes":854}],1288:[function(b,N,G){function p(h,r,l){if(!h.hovertemplate){var c=(r.hi||h.hoverinfo).split("+"),d=-1!==c.indexOf("all"),e=-1!==c.indexOf("lon"),f=-1!==c.indexOf("lat"),q=r.lonlat,t=[];d||e&&f?t.push("("+(q[1]+", ")+(q[0]+")")):e?t.push(l.lon+(q[0]+"")):f&&t.push(l.lat+(q[1]+""));(d||-1!==c.indexOf("text"))&&a(r,h,t);return t.join("\x3cbr\x3e")}}var n=b("../../components/fx"),k=b("../../lib"),m=b("../scatter/get_trace_color"),a=k.fillText,g=b("../../constants/numerical").BADNUM;
N.exports={hoverPoints:function(h,r,l){var c=h.cd,d=c[0].trace,e=h.xa,f=h.ya,q=h.subplot,t=360*(0<=r?Math.floor((r+180)/360):Math.ceil((r-180)/360)),w=r-t;n.getClosest(c,function(B){var A=B.lonlat;if(A[0]===g)return Infinity;var D=k.modHalf(A[0],360);A=A[1];var C=q.project([D,A]);A=C.x-e.c2p([w,A]);D=C.y-f.c2p([D,l]);B=Math.max(3,B.mrc||0);return Math.max(Math.sqrt(A*A+D*D)-B,1-3/B)},h);if(!1!==h.index){r=c[h.index];var x=r.lonlat;x=[k.modHalf(x[0],360)+t,x[1]];t=e.c2p(x);x=f.c2p(x);var z=r.mrc||
1;h.x0=t-z;h.x1=t+z;h.y0=x-z;h.y1=x+z;t={};t[d.subplot]={_subplot:q};t=d._module.formatLabels(r,d,t);h.lonLabel=t.lonLabel;h.latLabel=t.latLabel;h.color=m(d,r);h.extraText=p(d,r,c[0].t.labels);h.hovertemplate=d.hovertemplate;return[h]}},getExtraText:p}},{"../../components/fx":706,"../../constants/numerical":779,"../../lib":803,"../scatter/get_trace_color":1228}],1289:[function(b,N,G){N.exports={attributes:b("./attributes"),supplyDefaults:b("./defaults"),colorbar:b("../scatter/marker_colorbar"),formatLabels:b("./format_labels"),
calc:b("../scattergeo/calc"),plot:b("./plot"),hoverPoints:b("./hover").hoverPoints,eventData:b("./event_data"),selectPoints:b("./select"),styleOnSelect:function(p,n){n&&n[0].trace._glTrace.update(n)},moduleType:"trace",name:"scattermapbox",basePlotModule:b("../../plots/mapbox"),categories:["mapbox","gl","symbols","showLegend","scatter-like"],meta:{}}},{"../../plots/mapbox":911,"../scatter/marker_colorbar":1236,"../scattergeo/calc":1261,"./attributes":1283,"./defaults":1285,"./event_data":1286,"./format_labels":1287,
"./hover":1288,"./plot":1290,"./select":1291}],1290:[function(b,N,G){function p(a,g){this.type="scattermapbox";this.subplot=a;this.uid=g;this.sourceIds={fill:"source-"+g+"-fill",line:"source-"+g+"-line",circle:"source-"+g+"-circle",symbol:"source-"+g+"-symbol"};this.layerIds={fill:k+g+"-fill",line:k+g+"-line",circle:k+g+"-circle",symbol:k+g+"-symbol"};this.below=null}var n=b("./convert"),k=b("../../plots/mapbox/constants").traceLayerPrefix,m=["fill","line","circle","symbol"];b=p.prototype;b.addSource=
function(a,g){this.subplot.map.addSource(this.sourceIds[a],{type:"geojson",data:g.geojson})};b.setSourceData=function(a,g){this.subplot.map.getSource(this.sourceIds[a]).setData(g.geojson)};b.addLayer=function(a,g,h){this.subplot.addLayer({type:a,id:this.layerIds[a],source:this.sourceIds[a],layout:g.layout,paint:g.paint},h)};b.update=function(a){var g=this.subplot,h=g.map,r=n(g.gd,a),l=g.belowLookup["trace-"+this.uid],c;if(l!==this.below){for(c=m.length-1;0<=c;c--){var d=m[c];h.removeLayer(this.layerIds[d])}for(c=
0;c<m.length;c++)d=m[c],h=r[d],this.addLayer(d,h,l);this.below=l}for(c=0;c<m.length;c++)d=m[c],h=r[d],g.setOptions(this.layerIds[d],"setLayoutProperty",h.layout),"visible"===h.layout.visibility&&(this.setSourceData(d,h),g.setOptions(this.layerIds[d],"setPaintProperty",h.paint));a[0].trace._glTrace=this};b.dispose=function(){for(var a=this.subplot.map,g=m.length-1;0<=g;g--){var h=m[g];a.removeLayer(this.layerIds[h]);a.removeSource(this.sourceIds[h])}};N.exports=function(a,g){var h=g[0].trace,r=new p(a,
h.uid),l=n(a.gd,g);a=r.below=a.belowLookup["trace-"+h.uid];for(h=0;h<m.length;h++){var c=m[h],d=l[c];r.addSource(c,d);r.addLayer(c,d,a)}return g[0].trace._glTrace=r}},{"../../plots/mapbox/constants":909,"./convert":1284}],1291:[function(b,N,G){var p=b("../../lib"),n=b("../scatter/subtypes"),k=b("../../constants/numerical").BADNUM;N.exports=function(m,a){var g=m.cd,h=m.xaxis,r=m.yaxis,l=[],c;if(!n.hasMarkers(g[0].trace))return[];if(!1===a)for(c=0;c<g.length;c++)g[c].selected=0;else for(c=0;c<g.length;c++){var d=
g[c],e=d.lonlat;if(e[0]!==k){var f=[p.modHalf(e[0],360),e[1]];f=[h.c2p(f),r.c2p(f)];a.contains(f,null,c,m)?(l.push({pointNumber:c,lon:e[0],lat:e[1]}),d.selected=1):d.selected=0}}return l}},{"../../constants/numerical":779,"../../lib":803,"../scatter/subtypes":1243}],1292:[function(b,N,G){G=b("../../plots/template_attributes").hovertemplateAttrs;var p=b("../../plots/template_attributes").texttemplateAttrs,n=b("../../lib/extend").extendFlat,k=b("../scatter/attributes");b=b("../../plots/attributes");
var m=k.line;N.exports={mode:k.mode,r:{valType:"data_array",editType:"calc+clearAxisTypes"},theta:{valType:"data_array",editType:"calc+clearAxisTypes"},r0:{valType:"any",dflt:0,editType:"calc+clearAxisTypes"},dr:{valType:"number",dflt:1,editType:"calc"},theta0:{valType:"any",dflt:0,editType:"calc+clearAxisTypes"},dtheta:{valType:"number",editType:"calc"},thetaunit:{valType:"enumerated",values:["radians","degrees","gradians"],dflt:"degrees",editType:"calc+clearAxisTypes"},text:k.text,texttemplate:p({editType:"plot"},
{keys:["r","theta","text"]}),hovertext:k.hovertext,line:{color:m.color,width:m.width,dash:m.dash,shape:n({},m.shape,{values:["linear","spline"]}),smoothing:m.smoothing,editType:"calc"},connectgaps:k.connectgaps,marker:k.marker,cliponaxis:n({},k.cliponaxis,{dflt:!1}),textposition:k.textposition,textfont:k.textfont,fill:n({},k.fill,{values:["none","toself","tonext"],dflt:"none"}),fillcolor:k.fillcolor,hoverinfo:n({},b.hoverinfo,{flags:["r","theta","text","name"]}),hoveron:k.hoveron,hovertemplate:G(),
selected:k.selected,unselected:k.unselected}},{"../../lib/extend":793,"../../plots/attributes":850,"../../plots/template_attributes":926,"../scatter/attributes":1218}],1293:[function(b,N,G){var p=b("fast-isnumeric"),n=b("../../constants/numerical").BADNUM,k=b("../../plots/cartesian/axes"),m=b("../scatter/colorscale_calc"),a=b("../scatter/arrays_to_calcdata"),g=b("../scatter/calc_selection"),h=b("../scatter/calc").calcMarkerSize;N.exports=function(r,l){var c=r._fullLayout,d=l.subplot,e=c[d].radialaxis;
d=c[d].angularaxis;c=e.makeCalcdata(l,"r");var f=d.makeCalcdata(l,"theta"),q=l._length;d=Array(q);for(var t=0;t<q;t++){var w=c[t],x=f[t],z=d[t]={};p(w)&&p(x)?(z.r=w,z.theta=x):z.r=n}f=h(l,q);l._extremes.x=k.findExtremes(e,c,{ppad:f});m(r,l);a(d,l);g(d,l);return d}},{"../../constants/numerical":779,"../../plots/cartesian/axes":854,"../scatter/arrays_to_calcdata":1217,"../scatter/calc":1219,"../scatter/calc_selection":1220,"../scatter/colorscale_calc":1221,"fast-isnumeric":249}],1294:[function(b,N,
G){function p(d,e,f,q){d=q("r");f=q("theta");if(d)f?d=Math.min(d.length,f.length):(d=d.length,q("theta0"),q("dtheta"));else{if(!f)return 0;d=e.theta.length;q("r0");q("dr")}return e._length=d}var n=b("../../lib"),k=b("../scatter/subtypes"),m=b("../scatter/marker_defaults"),a=b("../scatter/line_defaults"),g=b("../scatter/line_shape_defaults"),h=b("../scatter/text_defaults"),r=b("../scatter/fillcolor_defaults"),l=b("../scatter/constants").PTS_LINESONLY,c=b("./attributes");N.exports={handleRThetaDefaults:p,
supplyDefaults:function(d,e,f,q){function t(x,z){return n.coerce(d,e,c,x,z)}var w=p(d,e,q,t);if(w){t("thetaunit");t("mode",w<l?"lines+markers":"lines");t("text");t("hovertext");"fills"!==e.hoveron&&t("hovertemplate");k.hasLines(e)&&(a(d,e,f,q,t),g(d,e,t),t("connectgaps"));k.hasMarkers(e)&&m(d,e,f,q,t,{gradient:!0});k.hasText(e)&&(t("texttemplate"),h(d,e,q,t));q=[];if(k.hasMarkers(e)||k.hasText(e))t("cliponaxis"),t("marker.maxdisplayed"),q.push("points");t("fill");"none"!==e.fill&&(r(d,e,f,t),k.hasLines(e)||
g(d,e,t));"tonext"!==e.fill&&"toself"!==e.fill||q.push("fills");t("hoveron",q.join("+")||"points");n.coerceSelectionMarkerOpacity(e,t)}else e.visible=!1}}},{"../../lib":803,"../scatter/constants":1222,"../scatter/fillcolor_defaults":1226,"../scatter/line_defaults":1231,"../scatter/line_shape_defaults":1233,"../scatter/marker_defaults":1237,"../scatter/subtypes":1243,"../scatter/text_defaults":1244,"./attributes":1292}],1295:[function(b,N,G){var p=b("../../lib"),n=b("../../plots/cartesian/axes");N.exports=
function(k,m,a){var g={},h=a[m.subplot]._subplot;h?(m=h.radialAxis,h=h.angularAxis):(h=a[m.subplot],m=h.radialaxis,h=h.angularaxis);a=m.c2l(k.r);g.rLabel=n.tickText(m,a,!0).text;k="degrees"===h.thetaunit?p.rad2deg(k.theta):k.theta;g.thetaLabel=n.tickText(h,k,!0).text;return g}},{"../../lib":803,"../../plots/cartesian/axes":854}],1296:[function(b,N,G){function p(k,m,a,g){var h=a.radialAxis,r=a.angularAxis;h._hovertitle="r";r._hovertitle="";var l={};l[m.subplot]={_subplot:a};a=m._module.formatLabels(k,
m,l);g.rLabel=a.rLabel;g.thetaLabel=a.thetaLabel;a=k.hi||m.hoverinfo;k=[];m.hovertemplate||(m=a.split("+"),-1!==m.indexOf("all")&&(m=["r","theta","text"]),-1!==m.indexOf("r")&&k.push(h._hovertitle+": "+g.rLabel),-1!==m.indexOf("theta")&&k.push(r._hovertitle+": "+g.thetaLabel),-1!==m.indexOf("text")&&g.text&&(k.push(g.text),delete g.text),g.extraText=k.join("\x3cbr\x3e"))}var n=b("../scatter/hover");N.exports={hoverPoints:function(k,m,a,g){if((m=n(k,m,a,g))&&!1!==m[0].index){a=m[0];if(void 0===a.index)return m;
k=k.subplot;g=a.cd[a.index];var h=a.trace;if(k.isPtInside(g))return a.xLabelVal=void 0,a.yLabelVal=void 0,p(g,h,k,a),a.hovertemplate=h.hovertemplate,m}},makeHoverPointText:p}},{"../scatter/hover":1229}],1297:[function(b,N,G){N.exports={moduleType:"trace",name:"scatterpolar",basePlotModule:b("../../plots/polar"),categories:["polar","symbols","showLegend","scatter-like"],attributes:b("./attributes"),supplyDefaults:b("./defaults").supplyDefaults,colorbar:b("../scatter/marker_colorbar"),formatLabels:b("./format_labels"),
calc:b("./calc"),plot:b("./plot"),style:b("../scatter/style").style,styleOnSelect:b("../scatter/style").styleOnSelect,hoverPoints:b("./hover").hoverPoints,selectPoints:b("../scatter/select"),meta:{}}},{"../../plots/polar":920,"../scatter/marker_colorbar":1236,"../scatter/select":1240,"../scatter/style":1242,"./attributes":1292,"./calc":1293,"./defaults":1294,"./format_labels":1295,"./hover":1296,"./plot":1298}],1298:[function(b,N,G){var p=b("../scatter/plot"),n=b("../../constants/numerical").BADNUM;
N.exports=function(k,m,a){var g=m.layers.frontplot.select("g.scatterlayer"),h={xaxis:m.xaxis,yaxis:m.yaxis,plot:m.framework,layerClipId:m._hasClipOnAxisFalse?m.clipIds.forTraces:null},r=m.radialAxis;m=m.angularAxis;for(var l=0;l<a.length;l++)for(var c=a[l],d=0;d<c.length;d++){var e=c[d],f=e.r;if(f===n)e.x=e.y=n;else{f=r.c2g(f);var q=m.c2g(e.theta);e.x=f*Math.cos(q);e.y=f*Math.sin(q)}}p(k,h,a,g)}},{"../../constants/numerical":779,"../scatter/plot":1239}],1299:[function(b,N,G){G=b("../scatterpolar/attributes");
var p=b("../scattergl/attributes");b=b("../../plots/template_attributes").texttemplateAttrs;N.exports={mode:G.mode,r:G.r,theta:G.theta,r0:G.r0,dr:G.dr,theta0:G.theta0,dtheta:G.dtheta,thetaunit:G.thetaunit,text:G.text,texttemplate:b({editType:"plot"},{keys:["r","theta","text"]}),hovertext:G.hovertext,hovertemplate:G.hovertemplate,line:p.line,connectgaps:p.connectgaps,marker:p.marker,fill:p.fill,fillcolor:p.fillcolor,textposition:p.textposition,textfont:p.textfont,hoverinfo:G.hoverinfo,selected:G.selected,
unselected:G.unselected}},{"../../plots/template_attributes":926,"../scattergl/attributes":1270,"../scatterpolar/attributes":1292}],1300:[function(b,N,G){var p=b("../scatter/colorscale_calc"),n=b("../scatter/calc").calcMarkerSize,k=b("../scattergl/convert"),m=b("../../plots/cartesian/axes"),a=b("../scattergl/constants").TOO_MANY_POINTS;N.exports=function(g,h){var r=g._fullLayout,l=h.subplot,c=r[l].radialaxis;l=r[l].angularaxis;r=h._r=c.makeCalcdata(h,"r");var d=h._theta=l.makeCalcdata(h,"theta");
l=h._length;var e={};l<r.length&&(r=r.slice(0,l));l<d.length&&(d=d.slice(0,l));e.r=r;e.theta=d;p(g,h);g=e.opts=k.style(g,h);var f;l<a?f=n(h,l):g.marker&&(f=2*(g.marker.sizeAvg||Math.max(g.marker.size,3)));h._extremes.x=m.findExtremes(c,r,{ppad:f});return[{x:!1,y:!1,t:e,trace:h}]}},{"../../plots/cartesian/axes":854,"../scatter/calc":1219,"../scatter/colorscale_calc":1221,"../scattergl/constants":1272,"../scattergl/convert":1273}],1301:[function(b,N,G){var p=b("../../lib"),n=b("../scatter/subtypes"),
k=b("../scatterpolar/defaults").handleRThetaDefaults,m=b("../scatter/marker_defaults"),a=b("../scatter/line_defaults"),g=b("../scatter/text_defaults"),h=b("../scatter/fillcolor_defaults"),r=b("../scatter/constants").PTS_LINESONLY,l=b("./attributes");N.exports=function(c,d,e,f){function q(w,x){return p.coerce(c,d,l,w,x)}var t=k(c,d,f,q);t?(q("thetaunit"),q("mode",t<r?"lines+markers":"lines"),q("text"),q("hovertext"),"fills"!==d.hoveron&&q("hovertemplate"),n.hasLines(d)&&(a(c,d,e,f,q),q("connectgaps")),
n.hasMarkers(d)&&m(c,d,e,f,q),n.hasText(d)&&(q("texttemplate"),g(c,d,f,q)),q("fill"),"none"!==d.fill&&h(c,d,e,q),p.coerceSelectionMarkerOpacity(d,q)):d.visible=!1}},{"../../lib":803,"../scatter/constants":1222,"../scatter/fillcolor_defaults":1226,"../scatter/line_defaults":1231,"../scatter/marker_defaults":1237,"../scatter/subtypes":1243,"../scatter/text_defaults":1244,"../scatterpolar/defaults":1294,"./attributes":1299}],1302:[function(b,N,G){var p=b("../scatterpolar/format_labels");N.exports=function(n,
k,m){var a=n.i;"r"in n||(n.r=k._r[a]);"theta"in n||(n.theta=k._theta[a]);return p(n,k,m)}},{"../scatterpolar/format_labels":1295}],1303:[function(b,N,G){var p=b("../scattergl/hover"),n=b("../scatterpolar/hover").makeHoverPointText;N.exports={hoverPoints:function(k,m,a,g){var h=k.cd[0].t,r=h.r;h=h.theta;if((m=p.hoverPoints(k,m,a,g))&&!1!==m[0].index){a=m[0];if(void 0===a.index)return m;k=k.subplot;g=a.cd[a.index];var l=a.trace;g.r=r[a.index];g.theta=h[a.index];if(k.isPtInside(g))return a.xLabelVal=
void 0,a.yLabelVal=void 0,n(g,l,k,a),m}}}},{"../scattergl/hover":1278,"../scatterpolar/hover":1296}],1304:[function(b,N,G){N.exports={moduleType:"trace",name:"scatterpolargl",basePlotModule:b("../../plots/polar"),categories:"gl regl polar symbols showLegend scatter-like".split(" "),attributes:b("./attributes"),supplyDefaults:b("./defaults"),colorbar:b("../scatter/marker_colorbar"),formatLabels:b("./format_labels"),calc:b("./calc"),plot:b("./plot"),hoverPoints:b("./hover").hoverPoints,selectPoints:b("../scattergl/select"),
meta:{}}},{"../../plots/polar":920,"../scatter/marker_colorbar":1236,"../scattergl/select":1282,"./attributes":1299,"./calc":1300,"./defaults":1301,"./format_labels":1302,"./hover":1303,"./plot":1305}],1305:[function(b,N,G){var p=b("@plotly/point-cluster"),n=b("fast-isnumeric"),k=b("../scattergl/plot"),m=b("../scattergl/scene_update"),a=b("../scattergl/convert"),g=b("../../lib"),h=b("../scattergl/constants").TOO_MANY_POINTS;N.exports=function(r,l,c){if(c.length){var d=l.radialAxis,e=l.angularAxis,
f=m(r,l);c.forEach(function(q){if(q&&q[0]&&q[0].trace){var t=q[0];q=t.trace;t=t.t;var w=q._length,x=t.r,z=t.theta,B=t.opts,A,D=x.slice(),C=z.slice();for(A=0;A<x.length;A++)l.isPtInside({r:x[A],theta:z[A]})||(D[A]=NaN,C[A]=NaN);var v=Array(2*w),y=Array(w),F=Array(w);for(A=0;A<w;A++){var J=D[A];if(n(J)){var K=d.c2g(J);var M=e.c2g(C[A],q.thetaunit);J=K*Math.cos(M);K*=Math.sin(M)}else J=K=NaN;y[A]=v[2*A]=J;F[A]=v[2*A+1]=K}t.tree=p(v);B.marker&&w>=h&&(B.marker.cluster=t.tree);B.marker&&(B.markerSel.positions=
B.markerUnsel.positions=B.marker.positions=v);B.line&&1<v.length&&g.extendFlat(B.line,a.linePositions(r,q,v));B.text&&(g.extendFlat(B.text,{positions:v},a.textPosition(r,q,B.text,B.marker)),g.extendFlat(B.textSel,{positions:v},a.textPosition(r,q,B.text,B.markerSel)),g.extendFlat(B.textUnsel,{positions:v},a.textPosition(r,q,B.text,B.markerUnsel)));B.fill&&!f.fill2d&&(f.fill2d=!0);B.marker&&!f.scatter2d&&(f.scatter2d=!0);B.line&&!f.line2d&&(f.line2d=!0);B.text&&!f.glText&&(f.glText=!0);f.lineOptions.push(B.line);
f.fillOptions.push(B.fill);f.markerOptions.push(B.marker);f.markerSelectedOptions.push(B.markerSel);f.markerUnselectedOptions.push(B.markerUnsel);f.textOptions.push(B.text);f.textSelectedOptions.push(B.textSel);f.textUnselectedOptions.push(B.textUnsel);f.selectBatch.push([]);f.unselectBatch.push([]);t.x=y;t.y=F;t.rawx=y;t.rawy=F;t.r=x;t.theta=z;t.positions=v;t._scene=f;t.index=f.count;f.count++}});return k(r,l,c)}}},{"../../lib":803,"../scattergl/constants":1272,"../scattergl/convert":1273,"../scattergl/plot":1280,
"../scattergl/scene_update":1281,"@plotly/point-cluster":59,"fast-isnumeric":249}],1306:[function(b,N,G){G=b("../../plots/template_attributes").hovertemplateAttrs;var p=b("../../plots/template_attributes").texttemplateAttrs,n=b("../scatter/attributes"),k=b("../../plots/attributes"),m=b("../../components/colorscale/attributes"),a=b("../../components/drawing/attributes").dash;b=b("../../lib/extend").extendFlat;var g=n.marker,h=n.line,r=g.line;N.exports={a:{valType:"data_array",editType:"calc"},b:{valType:"data_array",
editType:"calc"},c:{valType:"data_array",editType:"calc"},sum:{valType:"number",dflt:0,min:0,editType:"calc"},mode:b({},n.mode,{dflt:"markers"}),text:b({},n.text,{}),texttemplate:p({editType:"plot"},{keys:["a","b","c","text"]}),hovertext:b({},n.hovertext,{}),line:{color:h.color,width:h.width,dash:a,shape:b({},h.shape,{values:["linear","spline"]}),smoothing:h.smoothing,editType:"calc"},connectgaps:n.connectgaps,cliponaxis:n.cliponaxis,fill:b({},n.fill,{values:["none","toself","tonext"],dflt:"none"}),
fillcolor:n.fillcolor,marker:b({symbol:g.symbol,opacity:g.opacity,maxdisplayed:g.maxdisplayed,size:g.size,sizeref:g.sizeref,sizemin:g.sizemin,sizemode:g.sizemode,line:b({width:r.width,editType:"calc"},m("marker.line")),gradient:g.gradient,editType:"calc"},m("marker")),textfont:n.textfont,textposition:n.textposition,selected:n.selected,unselected:n.unselected,hoverinfo:b({},k.hoverinfo,{flags:["a","b","c","text","name"]}),hoveron:n.hoveron,hovertemplate:G()}},{"../../components/colorscale/attributes":673,
"../../components/drawing/attributes":687,"../../lib/extend":793,"../../plots/attributes":850,"../../plots/template_attributes":926,"../scatter/attributes":1218}],1307:[function(b,N,G){var p=b("fast-isnumeric"),n=b("../scatter/colorscale_calc"),k=b("../scatter/arrays_to_calcdata"),m=b("../scatter/calc_selection"),a=b("../scatter/calc").calcMarkerSize,g=["a","b","c"],h={a:["b","c"],b:["a","c"],c:["a","b"]};N.exports=function(r,l){var c=r._fullLayout[l.subplot].sum,d=l.sum||c,e={a:l.a,b:l.b,c:l.c},
f,q;for(f=0;f<g.length;f++){var t=g[f];if(!e[t]){var w=e[h[t][0]];var x=e[h[t][1]];var z=Array(w.length);for(q=0;q<w.length;q++)z[q]=d-w[q]-x[q];e[t]=z}}d=l._length;q=Array(d);for(f=0;f<d;f++)if(t=e.a[f],z=e.b[f],w=e.c[f],p(t)&&p(z)&&p(w)){t=+t;z=+z;w=+w;x=c/(t+z+w);1!==x&&(t*=x,z*=x,w*=x);var B=t;x=w-z;q[f]={x,y:B,a:t,b:z,c:w}}else q[f]={x:!1,y:!1};a(l,d);n(r,l);k(q,l);m(q,l);return q}},{"../scatter/arrays_to_calcdata":1217,"../scatter/calc":1219,"../scatter/calc_selection":1220,"../scatter/colorscale_calc":1221,
"fast-isnumeric":249}],1308:[function(b,N,G){var p=b("../../lib"),n=b("../scatter/constants"),k=b("../scatter/subtypes"),m=b("../scatter/marker_defaults"),a=b("../scatter/line_defaults"),g=b("../scatter/line_shape_defaults"),h=b("../scatter/text_defaults"),r=b("../scatter/fillcolor_defaults"),l=b("./attributes");N.exports=function(c,d,e,f){function q(B,A){return p.coerce(c,d,l,B,A)}var t=q("a"),w=q("b"),x=q("c");if(t){var z=t.length;w?(z=Math.min(z,w.length),x&&(z=Math.min(z,x.length))):z=x?Math.min(z,
x.length):0}else w&&x&&(z=Math.min(w.length,x.length));if(z){d._length=z;q("sum");q("text");q("hovertext");"fills"!==d.hoveron&&q("hovertemplate");q("mode",z<n.PTS_LINESONLY?"lines+markers":"lines");k.hasLines(d)&&(a(c,d,e,f,q),g(c,d,q),q("connectgaps"));k.hasMarkers(d)&&m(c,d,e,f,q,{gradient:!0});k.hasText(d)&&(q("texttemplate"),h(c,d,f,q));f=[];if(k.hasMarkers(d)||k.hasText(d))q("cliponaxis"),q("marker.maxdisplayed"),f.push("points");q("fill");"none"!==d.fill&&(r(c,d,e,q),k.hasLines(d)||g(c,d,q));
"tonext"!==d.fill&&"toself"!==d.fill||f.push("fills");q("hoveron",f.join("+")||"points");p.coerceSelectionMarkerOpacity(d,q)}else d.visible=!1}},{"../../lib":803,"../scatter/constants":1222,"../scatter/fillcolor_defaults":1226,"../scatter/line_defaults":1231,"../scatter/line_shape_defaults":1233,"../scatter/marker_defaults":1237,"../scatter/subtypes":1243,"../scatter/text_defaults":1244,"./attributes":1306}],1309:[function(b,N,G){N.exports=function(p,n,k,m,a){n.xa&&(p.xaxis=n.xa);n.ya&&(p.yaxis=n.ya);
m[a]?(n=m[a],p.a=n.a,p.b=n.b,p.c=n.c):(p.a=n.a,p.b=n.b,p.c=n.c);return p}},{}],1310:[function(b,N,G){var p=b("../../plots/cartesian/axes");N.exports=function(n,k,m){var a={};k=m[k.subplot]._subplot;a.aLabel=p.tickText(k.aaxis,n.a,!0).text;a.bLabel=p.tickText(k.baxis,n.b,!0).text;a.cLabel=p.tickText(k.caxis,n.c,!0).text;return a}},{"../../plots/cartesian/axes":854}],1311:[function(b,N,G){var p=b("../scatter/hover");N.exports=function(n,k,m,a){if((k=p(n,k,m,a))&&!1!==k[0].index){m=k[0];if(void 0===
m.index)return a=n.xa._length,n=a*(1-m.y0/n.ya._length)/2,a-=n,m.x0=Math.max(Math.min(m.x0,a),n),m.x1=Math.max(Math.min(m.x1,a),n),k;var g=m.cd[m.index];n=m.trace;a=m.subplot;m.a=g.a;m.b=g.b;m.c=g.c;m.xLabelVal=void 0;m.yLabelVal=void 0;var h={};h[n.subplot]={_subplot:a};h=n._module.formatLabels(g,n,h);m.aLabel=h.aLabel;m.bLabel=h.bLabel;m.cLabel=h.cLabel;h=g.hi||n.hoverinfo;g=[];n.hovertemplate||(h=h.split("+"),-1!==h.indexOf("all")&&(h=["a","b","c"]),-1!==h.indexOf("a")&&g.push(a.aaxis._hovertitle+
": "+m.aLabel),-1!==h.indexOf("b")&&g.push(a.baxis._hovertitle+": "+m.bLabel),-1!==h.indexOf("c")&&g.push(a.caxis._hovertitle+": "+m.cLabel));m.extraText=g.join("\x3cbr\x3e");m.hovertemplate=n.hovertemplate;return k}}},{"../scatter/hover":1229}],1312:[function(b,N,G){N.exports={attributes:b("./attributes"),supplyDefaults:b("./defaults"),colorbar:b("../scatter/marker_colorbar"),formatLabels:b("./format_labels"),calc:b("./calc"),plot:b("./plot"),style:b("../scatter/style").style,styleOnSelect:b("../scatter/style").styleOnSelect,
hoverPoints:b("./hover"),selectPoints:b("../scatter/select"),eventData:b("./event_data"),moduleType:"trace",name:"scatterternary",basePlotModule:b("../../plots/ternary"),categories:["ternary","symbols","showLegend","scatter-like"],meta:{}}},{"../../plots/ternary":927,"../scatter/marker_colorbar":1236,"../scatter/select":1240,"../scatter/style":1242,"./attributes":1306,"./calc":1307,"./defaults":1308,"./event_data":1309,"./format_labels":1310,"./hover":1311,"./plot":1313}],1313:[function(b,N,G){var p=
b("../scatter/plot");N.exports=function(n,k,m){var a=k.plotContainer;a.select(".scatterlayer").selectAll("*").remove();a={xaxis:k.xaxis,yaxis:k.yaxis,plot:a,layerClipId:k._hasClipOnAxisFalse?k.clipIdRelative:null};k=k.layers.frontplot.select("g.scatterlayer");p(n,a,m,k)}},{"../scatter/plot":1239}],1314:[function(b,N,G){function p(l){return{valType:"info_array",freeLength:!0,editType:"calc",items:{valType:"subplotid",regex:g[l],editType:"plot"}}}var n=b("../scatter/attributes"),k=b("../../components/colorscale/attributes");
G=b("../../plots/cartesian/axis_format_attributes").axisHoverFormat;var m=b("../../plots/template_attributes").hovertemplateAttrs,a=b("../scattergl/attributes"),g=b("../../plots/cartesian/constants").idRegex,h=b("../../plot_api/plot_template").templatedArray;b=b("../../lib/extend").extendFlat;n=n.marker;var r=n.line;r=b(k("marker.line",{editTypeOverride:"calc"}),{width:b({},r.width,{editType:"calc"}),editType:"calc"});k=b(k("marker"),{symbol:n.symbol,size:b({},n.size,{editType:"markerSize"}),sizeref:n.sizeref,
sizemin:n.sizemin,sizemode:n.sizemode,opacity:n.opacity,colorbar:n.colorbar,line:r,editType:"calc"});k.color.editType=k.cmin.editType=k.cmax.editType="style";N.exports={dimensions:h("dimension",{visible:{valType:"boolean",dflt:!0,editType:"calc"},label:{valType:"string",editType:"calc"},values:{valType:"data_array",editType:"calc+clearAxisTypes"},axis:{type:{valType:"enumerated",values:["linear","log","date","category"],editType:"calc+clearAxisTypes"},matches:{valType:"boolean",dflt:!1,editType:"calc"},
editType:"calc+clearAxisTypes"},editType:"calc+clearAxisTypes"}),text:b({},a.text,{}),hovertext:b({},a.hovertext,{}),hovertemplate:m(),xhoverformat:G("x"),yhoverformat:G("y"),marker:k,xaxes:p("x"),yaxes:p("y"),diagonal:{visible:{valType:"boolean",dflt:!0,editType:"calc"},editType:"calc"},showupperhalf:{valType:"boolean",dflt:!0,editType:"calc"},showlowerhalf:{valType:"boolean",dflt:!0,editType:"calc"},selected:{marker:a.selected.marker,editType:"calc"},unselected:{marker:a.unselected.marker,editType:"calc"},
opacity:a.opacity}},{"../../components/colorscale/attributes":673,"../../lib/extend":793,"../../plot_api/plot_template":843,"../../plots/cartesian/axis_format_attributes":857,"../../plots/cartesian/constants":861,"../../plots/template_attributes":926,"../scatter/attributes":1218,"../scattergl/attributes":1270}],1315:[function(b,N,G){function p(c){var d=c._fullLayout,e=d._glcanvas.data()[0].regl,f=d._splomGrid;f||(f=d._splomGrid=k(e));f.update(n(c))}function n(c){function d(H,O,I,L,Q,Z){I*=e;L*=e;
Q*=e;Z*=e;var ba=O[H+"color"];H=O[H+"width"];O=String(ba+H);O in w?w[O].data.push(NaN,NaN,I,L,Q,Z):w[O]={data:[I,L,Q,Z],join:"rect",thickness:H*e,color:ba,viewport:t,range:t,overlay:!1}}var e=c._context.plotGlPixelRatio,f=c._fullLayout,q=f._size,t=[0,0,f.width*e,f.height*e],w={},x;for(x in f._splomSubplots){var z=f._plots[x],B=z.xaxis;z=z.yaxis;var A=B._gridVals,D=z._gridVals,C=B._offset,v=B._length,y=z._length,F=q.b+z.domain[0]*q.h,J=-z._m,K=-J*z.r2l(z.range[0],z.calendar);if(B.showgrid)for(x=0;x<
A.length;x++){var M=C+B.l2p(A[x].x);d("grid",B,M,F,M,F+y)}if(z.showgrid)for(x=0;x<D.length;x++)A=F+K+J*D[x].x,d("grid",z,C,A,C+v,A);l(c,B,z)&&(M=C+B.l2p(0),d("zeroline",B,M,F,M,F+y));l(c,z,B)&&(A=F+K+0,d("zeroline",z,C,A,C+v,A))}c=[];for(x in w)c.push(w[x]);return c}var k=b("regl-line2d"),m=b("../../registry"),a=b("../../lib/prepare_regl"),g=b("../../plots/get_data").getModuleCalcData,h=b("../../plots/cartesian"),r=b("../../plots/cartesian/axis_ids").getFromId,l=b("../../plots/cartesian/axes").shouldShowZeroLine;
N.exports={name:"splom",attr:h.attr,attrRegex:h.attrRegex,layoutAttributes:h.layoutAttributes,supplyLayoutDefaults:h.supplyLayoutDefaults,drawFramework:h.drawFramework,plot:function(c){var d=c._fullLayout,e=m.getModule("splom"),f=g(c.calcdata,e)[0];a(c,["ANGLE_instanced_arrays","OES_element_index_uint"])&&(d._hasOnlyLargeSploms&&p(c),e.plot(c,{},f))},drag:function(c){var d=c.calcdata,e=c._fullLayout;e._hasOnlyLargeSploms&&p(c);for(var f=0;f<d.length;f++){var q=d[f][0].trace,t=e._splomScenes[q.uid];
if("splom"===q.type&&t&&t.matrix){for(var w=c,x=q._visibleDims,z=t.viewOpts.ranges=Array(t.matrixOptions.data.length),B=0;B<x.length;B++){var A=x[B],D=z[B]=Array(4),C=r(w,q._diag[A][0]);C&&(D[0]=C.r2l(C.range[0]),D[2]=C.r2l(C.range[1]));if(A=r(w,q._diag[A][1]))D[1]=A.r2l(A.range[0]),D[3]=A.r2l(A.range[1])}t.selectBatch.length||t.unselectBatch.length?t.matrix.update({ranges:z},{ranges:z}):t.matrix.update({ranges:z})}}},updateGrid:p,clean:function(c,d,e,f){var q={},t;if(f._splomScenes){for(t=0;t<c.length;t++){var w=
c[t];"splom"===w.type&&(q[w.uid]=1)}for(t=0;t<e.length;t++)if(w=e[t],!q[w.uid]){var x=f._splomScenes[w.uid];x&&x.destroy&&x.destroy();f._splomScenes[w.uid]=null;delete f._splomScenes[w.uid]}}0===Object.keys(f._splomScenes||{}).length&&delete f._splomScenes;f._splomGrid&&!d._hasOnlyLargeSploms&&f._hasOnlyLargeSploms&&(f._splomGrid.destroy(),f._splomGrid=null,delete f._splomGrid);h.clean(c,d,e,f)},updateFx:h.updateFx,toSVG:h.toSVG}},{"../../lib/prepare_regl":816,"../../plots/cartesian":868,"../../plots/cartesian/axes":854,
"../../plots/cartesian/axis_ids":858,"../../plots/get_data":891,"../../registry":931,"regl-line2d":537}],1316:[function(b,N,G){var p=b("../../lib"),n=b("../../plots/cartesian/axis_ids"),k=b("../scatter/calc").calcMarkerSize,m=b("../scatter/calc").calcAxisExpansion,a=b("../scatter/colorscale_calc"),g=b("../scattergl/convert").markerSelection,h=b("../scattergl/convert").markerStyle,r=b("./scene_update"),l=b("../../constants/numerical").BADNUM,c=b("../scattergl/constants").TOO_MANY_POINTS;N.exports=
function(d,e){function f(F,J){J=F.makeCalcdata({v:J.values,vcalendar:e.calendar},"v");for(var K=0;K<J.length;K++)J[K]=J[K]===l?NaN:J[K];x.push(J);z.push("log"===F.type?p.simpleMap(J,F.c2l):J)}var q=e.dimensions,t=e._length,w={},x=w.cdata=[],z=w.data=[],B=e._visibleDims=[],A;for(A=0;A<q.length;A++){var D=q[A];if(D.visible){var C=n.getFromId(d,e._diag[A][0]);var v=n.getFromId(d,e._diag[A][1]);C&&v&&C.type!==v.type?p.log("Skipping splom dimension "+A+" with conflicting axis types"):(C?(f(C,D),v&&"category"===
v.type&&(v._categories=C._categories.slice())):f(v,D),B.push(A))}}a(d,e);p.extendFlat(w,h(e));var y=x.length*t>c?w.sizeAvg||Math.max(w.size,3):k(e,t);for(t=0;t<B.length;t++)A=B[t],D=q[A],C=n.getFromId(d,e._diag[A][0])||{},v=n.getFromId(d,e._diag[A][1])||{},m(d,e,C,v,x[t],x[t],y);d=r(d,e);d.matrix||(d.matrix=!0);d.matrixOptions=w;d.selectedOptions=g(e,e.selected);d.unselectedOptions=g(e,e.unselected);return[{x:!1,y:!1,t:{},trace:e}]}},{"../../constants/numerical":779,"../../lib":803,"../../plots/cartesian/axis_ids":858,
"../scatter/calc":1219,"../scatter/colorscale_calc":1221,"../scattergl/constants":1272,"../scattergl/convert":1273,"./scene_update":1323}],1317:[function(b,N,G){function p(c,d){function e(q,t){return k.coerce(c,d,a.dimensions,q,t)}e("label");var f=e("values");f&&f.length?e("visible"):d.visible=!1;e("axis.type");e("axis.matches")}function n(c,d,e,f){function q(O,I,L,Q){if(O){var Z=O.charAt(0),ba=e._splomAxes[Z];d["_"+Z+"axes"][O]=1;Q.push(O);O in ba||(O=ba[O]={},L&&(O.label=L.label||"",L.visible&&
L.axis&&(L.axis.type&&(O.type=L.axis.type),L.axis.matches&&(O.matches=I))))}}var t=d.dimensions,w=t.length;c=d.showupperhalf;var x=d.showlowerhalf,z=d.diagonal.visible,B,A=Array(w),D=Array(w);for(B=0;B<w;B++){var C=B?B+1:"";A[B]="x"+C;D[B]="y"+C}A=f("xaxes",A);C=f("yaxes",D);var v=d._diag=Array(w);d._xaxes={};d._yaxes={};f=[];D=[];var y=!z&&!x,F=!z&&!c;d._axesDim={};for(B=0;B<w;B++){var J=t[B],K=0===B,M=B===w-1,H=K&&y||M&&F?void 0:A[B];K=K&&F||M&&y?void 0:C[B];q(H,K,J,f);q(K,H,J,D);v[B]=[H,K];d._axesDim[H]=
B;d._axesDim[K]=B}for(B=0;B<f.length;B++)for(t=0;t<D.length;t++)w=f[B]+D[t],B>t&&c?e._splomSubplots[w]=1:B<t&&x?e._splomSubplots[w]=1:B!==t||!z&&x&&c||(e._splomSubplots[w]=1);if(!x||!z&&c&&x)e._splomGridDflt.xside="bottom",e._splomGridDflt.yside="left"}var k=b("../../lib"),m=b("../../plots/array_container_defaults"),a=b("./attributes"),g=b("../scatter/subtypes"),h=b("../scatter/marker_defaults"),r=b("../parcoords/merge_length"),l=b("../scattergl/helpers").isOpenSymbol;N.exports=function(c,d,e,f){function q(B,
A){return k.coerce(c,d,a,B,A)}var t=m(c,d,{name:"dimensions",handleItemDefaults:p}),w=q("diagonal.visible"),x=q("showupperhalf"),z=q("showlowerhalf");r(d,t,"values")&&(w||x||z)?(q("text"),q("hovertext"),q("hovertemplate"),q("xhoverformat"),q("yhoverformat"),h(c,d,e,f,q),e=l(d.marker.symbol),t=g.isBubble(d),q("marker.line.width",e||t?1:0),n(c,d,f,q),k.coerceSelectionMarkerOpacity(d,q)):d.visible=!1}},{"../../lib":803,"../../plots/array_container_defaults":849,"../parcoords/merge_length":1189,"../scatter/marker_defaults":1237,
"../scatter/subtypes":1243,"../scattergl/helpers":1277,"./attributes":1314}],1318:[function(b,N,G){var p=b("../../lib"),n=b("../scatter/colorscale_calc"),k=b("../scattergl/convert").markerStyle;N.exports=function(m,a){var g=a.trace;if(a=m._fullLayout._splomScenes[g.uid])n(m,g),p.extendFlat(a.matrixOptions,k(g)),m=p.extendFlat({},a.matrixOptions,a.viewOpts),a.matrix.update(m,null)}},{"../../lib":803,"../scatter/colorscale_calc":1221,"../scattergl/convert":1273}],1319:[function(b,N,G){G.getDimIndex=
function(p,n){n=n._id;for(var k={x:0,y:1}[n.charAt(0)],m=p._visibleDims,a=0;a<m.length;a++)if(p._diag[m[a]][k]===n)return a;return!1}},{}],1320:[function(b,N,G){var p=b("./helpers"),n=b("../scattergl/hover").calcHover;N.exports={hoverPoints:function(k,m,a){var g=k.cd[0].trace,h=k.scene.matrixOptions.cdata,r=k.xa,l=k.ya;m=r.c2p(m);a=l.c2p(a);var c=k.distance,d=p.getDimIndex(g,r),e=p.getDimIndex(g,l);if(!1===d||!1===e)return[k];d=h[d];h=h[e];var f;for(e=0;e<d.length;e++){var q=h[e],t=r.c2p(d[e])-m;
q=l.c2p(q)-a;t=Math.sqrt(t*t+q*q);if(t<c){c=f=t;var w=e}}k.index=w;k.distance=c;k.dxy=f;return void 0===w?[k]:[n(k,d,h,g)]}}},{"../scattergl/hover":1278,"./helpers":1319}],1321:[function(b,N,G){G=b("../../registry");var p=b("../../components/grid");N.exports={moduleType:"trace",name:"splom",basePlotModule:b("./base_plot"),categories:"gl regl cartesian symbols showLegend scatter-like".split(" "),attributes:b("./attributes"),supplyDefaults:b("./defaults"),colorbar:b("../scatter/marker_colorbar"),calc:b("./calc"),
plot:b("./plot"),hoverPoints:b("./hover").hoverPoints,selectPoints:b("./select"),editStyle:b("./edit_style"),meta:{}};G.register(p)},{"../../components/grid":710,"../../registry":931,"../scatter/marker_colorbar":1236,"./attributes":1314,"./base_plot":1315,"./calc":1316,"./defaults":1317,"./edit_style":1318,"./hover":1320,"./plot":1322,"./select":1324}],1322:[function(b,N,G){var p=b("regl-splom"),n=b("../../lib"),k=b("../../plots/cartesian/axis_ids"),m=b("../../components/dragelement/helpers").selectMode;
N.exports=function(a,g,h){if(h.length)for(g=0;g<h.length;g++){var r,l,c=a,d=h[g][0],e=c._fullLayout,f=e._size,q=d.trace;var t=d.t;d=e._splomScenes[q.uid];var w=d.matrixOptions,x=w.cdata,z=e._glcanvas.data()[0].regl,B=e.dragmode;if(0!==x.length){w.lower=q.showupperhalf;w.upper=q.showlowerhalf;w.diagonal=q.diagonal.visible;var A=q._visibleDims,D=x.length,C=d.viewOpts={};C.ranges=Array(D);C.domains=Array(D);for(r=0;r<A.length;r++){var v=A[r];var y=C.ranges[r]=Array(4),F=C.domains[r]=Array(4);if(l=k.getFromId(c,
q._diag[v][0]))y[0]=l._rl[0],y[2]=l._rl[1],F[0]=l.domain[0],F[2]=l.domain[1];if(v=k.getFromId(c,q._diag[v][1]))y[1]=v._rl[0],y[3]=v._rl[1],F[1]=v.domain[0],F[3]=v.domain[1]}v=c._context.plotGlPixelRatio;r=f.l*v;l=f.b*v;C.viewport=[r,l,f.w*v+r,f.h*v+l];!0===d.matrix&&(d.matrix=p(z));v=-1<e.clickmode.indexOf("select");e=!0;if(m(B)||q.selectedpoints||v){B=q._length;if(q.selectedpoints){l=d.selectBatch=q.selectedpoints;r={};for(v=0;v<l.length;v++)r[l[v]]=!0;l=[];for(v=0;v<B;v++)r[v]||l.push(v);d.unselectBatch=
l}f=t.xpx=Array(D);D=t.ypx=Array(D);for(r=0;r<A.length;r++){v=A[r];if(l=k.getFromId(c,q._diag[v][0]))for(f[r]=Array(B),t=0;t<B;t++)f[r][t]=l.c2p(x[r][t]);if(v=k.getFromId(c,q._diag[v][1]))for(D[r]=Array(B),t=0;t<B;t++)D[r][t]=v.c2p(x[r][t])}if(d.selectBatch.length||d.unselectBatch.length)c=n.extendFlat({},w,d.unselectedOptions,C),q=n.extendFlat({},w,d.selectedOptions,C),d.matrix.update(c,q),e=!1}else t.xpx=t.ypx=null;e&&(w=n.extendFlat({},w,C),d.matrix.update(w,null))}}}},{"../../components/dragelement/helpers":684,
"../../lib":803,"../../plots/cartesian/axis_ids":858,"regl-splom":539}],1323:[function(b,N,G){var p=b("../../lib");N.exports=function(n,k){var m=n._fullLayout;n=k.uid;var a=m._splomScenes;a||(a=m._splomScenes={});m={dirty:!0,selectBatch:[],unselectBatch:[]};var g={matrix:!1,selectBatch:[],unselectBatch:[]},h=a[k.uid];h||(h=a[n]=p.extendFlat({},m,g),h.draw=function(){h.matrix&&h.matrix.draw&&(h.selectBatch.length||h.unselectBatch.length?h.matrix.draw(h.unselectBatch,h.selectBatch):h.matrix.draw());
h.dirty=!1},h.destroy=function(){h.matrix&&h.matrix.destroy&&h.matrix.destroy();h.matrixOptions=null;h.selectBatch=null;h=h.unselectBatch=null});h.dirty||p.extendFlat(h,m);return h}},{"../../lib":803}],1324:[function(b,N,G){var p=b("../../lib"),n=b("../scatter/subtypes"),k=b("./helpers");N.exports=function(m,a){var g=m.cd,h=g[0].trace,r=g[0].t;g=m.scene;var l=g.matrixOptions.cdata,c=m.xaxis,d=m.yaxis,e=[];if(!g)return e;var f=!n.hasMarkers(h)&&!n.hasText(h);if(!0!==h.visible||f)return e;c=k.getDimIndex(h,
c);d=k.getDimIndex(h,d);if(!1===c||!1===d)return e;h=r.xpx[c];r=r.ypx[d];c=l[c];f=l[d];l=[];d=[];if(!1!==a&&!a.degenerate)for(var q=0;q<c.length;q++)a.contains([h[q],r[q]],null,q,m)?(l.push(q),e.push({pointNumber:q,x:c[q],y:f[q]})):d.push(q);m=g.matrixOptions;l.length||d.length?g.selectBatch.length||g.unselectBatch.length||g.matrix.update(g.unselectedOptions,p.extendFlat({},m,g.selectedOptions,g.viewOpts)):g.matrix.update(m,null);g.selectBatch=l;g.unselectBatch=d;return e}},{"../../lib":803,"../scatter/subtypes":1243,
"./helpers":1319}],1325:[function(b,N,G){G=b("../../components/colorscale/attributes");var p=b("../../plots/cartesian/axis_format_attributes").axisHoverFormat,n=b("../../plots/template_attributes").hovertemplateAttrs,k=b("../mesh3d/attributes"),m=b("../../plots/attributes");b=b("../../lib/extend").extendFlat;var a={x:{valType:"data_array",editType:"calc+clearAxisTypes"},y:{valType:"data_array",editType:"calc+clearAxisTypes"},z:{valType:"data_array",editType:"calc+clearAxisTypes"},u:{valType:"data_array",
editType:"calc"},v:{valType:"data_array",editType:"calc"},w:{valType:"data_array",editType:"calc"},starts:{x:{valType:"data_array",editType:"calc"},y:{valType:"data_array",editType:"calc"},z:{valType:"data_array",editType:"calc"},editType:"calc"},maxdisplayed:{valType:"integer",min:0,dflt:1E3,editType:"calc"},sizeref:{valType:"number",editType:"calc",min:0,dflt:1},text:{valType:"string",dflt:"",editType:"calc"},hovertext:{valType:"string",dflt:"",editType:"calc"},hovertemplate:n({editType:"calc"},
{keys:"tubex tubey tubez tubeu tubev tubew norm divergence".split(" ")}),uhoverformat:p("u",1),vhoverformat:p("v",1),whoverformat:p("w",1),xhoverformat:p("x"),yhoverformat:p("y"),zhoverformat:p("z"),showlegend:b({},m.showlegend,{dflt:!1})};b(a,G("",{colorAttr:"u/v/w norm",showScaleDflt:!0,editTypeOverride:"calc"}));["opacity","lightposition","lighting"].forEach(function(g){a[g]=k[g]});a.hoverinfo=b({},m.hoverinfo,{editType:"calc",flags:"x y z u v w norm divergence text name".split(" "),dflt:"x+y+z+norm+text+name"});
a.transforms=void 0;N.exports=a},{"../../components/colorscale/attributes":673,"../../lib/extend":793,"../../plots/attributes":850,"../../plots/cartesian/axis_format_attributes":857,"../../plots/template_attributes":926,"../mesh3d/attributes":1159}],1326:[function(b,N,G){function p(a){var g=a._x,h=a._y,r=a._z,l=a._len,c,d,e=-Infinity,f=Infinity,q=-Infinity,t=Infinity,w=-Infinity,x=Infinity,z="";if(l){var B=g[0];var A=h[0];var D=r[0]}if(1<l){var C=g[l-1];var v=h[l-1];var y=r[l-1]}for(c=0;c<l;c++){e=
Math.max(e,g[c]);f=Math.min(f,g[c]);q=Math.max(q,h[c]);t=Math.min(t,h[c]);w=Math.max(w,r[c]);x=Math.min(x,r[c]);if(!F&&g[c]!==B){var F=!0;z+="x"}if(!J&&h[c]!==A){var J=!0;z+="y"}if(!K&&r[c]!==D){var K=!0;z+="z"}}F||(z+="x");J||(z+="y");K||(z+="z");var M=k.distinctVals(a._x).vals,H=k.distinctVals(a._y).vals,O=k.distinctVals(a._z).vals;z=z.replace("x",(B>C?"-":"+")+"x");z=z.replace("y",(A>v?"-":"+")+"y");z=z.replace("z",(D>y?"-":"+")+"z");if(!l||l<M.length*H.length*O.length)l=0,M=[],H=[],O=[];c=function(ba){return"x"===
ba?g:"y"===ba?h:r};C=function(ba){return"x"===ba?M:"y"===ba?H:O};y=function(ba){return ba[l-1]<ba[0]?-1:1};a=c(z[1]);F=c(z[3]);J=c(z[5]);K=C(z[1]).length;B=C(z[3]).length;C=C(z[5]).length;A=!1;v=y(c(z[1]));D=y(c(z[3]));var I=y(c(z[5]));for(c=0;c<C-1;c++){for(y=0;y<B-1;y++){for(d=0;d<K-1;d++){var L=K*(B*c+y)+d,Q=K*(B*c+(y+1))+d,Z=K*(B*(c+1)+y)+d;a[L]*v<a[K*(B*c+y)+(d+1)]*v&&F[L]*D<F[Q]*D&&J[L]*I<J[Z]*I||(A=!0);if(A)break}if(A)break}if(A)break}A&&(k.warn("Encountered arbitrary coordinates! Unable to input data grid."),
l=0,M=[],H=[],O=[]);return{xMin:f,yMin:t,zMin:x,xMax:e,yMax:q,zMax:w,Xs:M,Ys:H,Zs:O,len:l,fill:z}}function n(a,g){void 0===g&&(g=a.length);if(k.isTypedArray(a))return a.subarray(0,g);for(var h=[],r=0;r<g;r++)h[r]=+a[r];return h}var k=b("../../lib"),m=b("../../components/colorscale/calc");N.exports={calc:function(a,g){g._len=Math.min(g.u.length,g.v.length,g.w.length,g.x.length,g.y.length,g.z.length);g._u=n(g.u,g._len);g._v=n(g.v,g._len);g._w=n(g.w,g._len);g._x=n(g.x,g._len);g._y=n(g.y,g._len);g._z=
n(g.z,g._len);var h=p(g);g._gridFill=h.fill;g._Xs=h.Xs;g._Ys=h.Ys;g._Zs=h.Zs;g._len=h.len;var r=0;if(g.starts){var l=n(g.starts.x||[]);var c=n(g.starts.y||[]);var d=n(g.starts.z||[]);r=Math.min(l.length,c.length,d.length)}g._startsX=l||[];g._startsY=c||[];g._startsZ=d||[];var e=0,f=Infinity,q;for(q=0;q<g._len;q++){var t=g._u[q],w=g._v[q],x=g._w[q];t=Math.sqrt(t*t+w*w+x*x);e=Math.max(e,t);f=Math.min(f,t)}m(a,g,{vals:[f,e],containerStr:"",cLetter:"c"});for(q=0;q<r;q++)a=l[q],h.xMax=Math.max(h.xMax,
a),h.xMin=Math.min(h.xMin,a),a=c[q],h.yMax=Math.max(h.yMax,a),h.yMin=Math.min(h.yMin,a),a=d[q],h.zMax=Math.max(h.zMax,a),h.zMin=Math.min(h.zMin,a);g._slen=r;g._normMax=e;g._xbnds=[h.xMin,h.xMax];g._ybnds=[h.yMin,h.yMax];g._zbnds=[h.zMin,h.zMax]},filter:n,processGrid:p}},{"../../components/colorscale/calc":674,"../../lib":803}],1327:[function(b,N,G){function p(e,f){this.scene=e;this.uid=f;this.data=this.mesh=null}function n(e){var f=e.length;return 2<f?e.slice(1,f-1):2===f?[(e[0]+e[1])/2]:e}function k(e){var f=
e.length;return 1===f?[.5,.5]:[e[1]-e[0],e[f-1]-e[f-2]]}function m(e,f){function q(K,M){var H=t[M],O=w[d[M]];return h.simpleMap(K,function(I){return H.d2l(I)*O})}var t=e.fullSceneLayout,w=e.dataScale,x=f._len;e={};e.vectors=c(q(f._u,"xaxis"),q(f._v,"yaxis"),q(f._w,"zaxis"),x);if(!x)return{positions:[],cells:[]};var z=q(f._Xs,"xaxis"),B=q(f._Ys,"yaxis");x=q(f._Zs,"zaxis");e.meshgrid=[z,B,x];e.gridFill=f._gridFill;if(f._slen)e.startingPositions=c(q(f._startsX,"xaxis"),q(f._startsY,"yaxis"),q(f._startsZ,
"zaxis"));else{for(var A=B[0],D=n(z),C=n(x),v=Array(D.length*C.length),y=0,F=0;F<D.length;F++)for(var J=0;J<C.length;J++)v[y++]=[D[F],A,C[J]];e.startingPositions=v}e.colormap=r(f);e.tubeSize=f.sizeref;e.maxLength=f.maxdisplayed;A=q(f._xbnds,"xaxis");D=q(f._ybnds,"yaxis");C=q(f._zbnds,"zaxis");z=k(z);B=k(B);x=k(x);e=a(e,[[A[0]-z[0],D[0]-B[0],C[0]-x[0]],[A[1]+z[1],D[1]+B[1],C[1]+x[1]]]);x=l(f);e.vertexIntensityBounds=[x.min/f._normMax,x.max/f._normMax];x=f.lightposition;e.lightPosition=[x.x,x.y,x.z];
e.ambient=f.lighting.ambient;e.diffuse=f.lighting.diffuse;e.specular=f.lighting.specular;e.roughness=f.lighting.roughness;e.fresnel=f.lighting.fresnel;e.opacity=f.opacity;f._pad=e.tubeScale*f.sizeref*2;return e}var a=b("gl-streamtube3d"),g=a.createTubeMesh,h=b("../../lib"),r=b("../../lib/gl_format_color").parseColorScale,l=b("../../components/colorscale").extractOpts,c=b("../../plots/gl3d/zip3"),d={xaxis:0,yaxis:1,zaxis:2};b=p.prototype;b.handlePick=function(e){function f(z,B){var A=t[d[B]];return q[B].l2c(z)/
A}var q=this.scene.fullSceneLayout,t=this.scene.dataScale;if(e.object===this.mesh){var w=e.data.position,x=e.data.velocity;e.traceCoordinate=[f(w[0],"xaxis"),f(w[1],"yaxis"),f(w[2],"zaxis"),f(x[0],"xaxis"),f(x[1],"yaxis"),f(x[2],"zaxis"),e.data.intensity*this.data._normMax,e.data.divergence];e.textLabel=this.data.hovertext||this.data.text;return!0}};b.update=function(e){this.data=e;e=m(this.scene,e);this.mesh.update(e)};b.dispose=function(){this.scene.glplot.remove(this.mesh);this.mesh.dispose()};
N.exports=function(e,f){var q=e.glplot.gl,t=m(e,f);q=g(q,t);t=new p(e,f.uid);t.mesh=q;t.data=f;q._trace=t;e.glplot.add(q);return t}},{"../../components/colorscale":678,"../../lib":803,"../../lib/gl_format_color":799,"../../plots/gl3d/zip3":907,"gl-streamtube3d":352}],1328:[function(b,N,G){var p=b("../../lib"),n=b("../../components/colorscale/defaults"),k=b("./attributes");N.exports=function(m,a,g,h){function r(q,t){return p.coerce(m,a,k,q,t)}g=r("u");var l=r("v"),c=r("w"),d=r("x"),e=r("y"),f=r("z");
g&&g.length&&l&&l.length&&c&&c.length&&d&&d.length&&e&&e.length&&f&&f.length?(r("starts.x"),r("starts.y"),r("starts.z"),r("maxdisplayed"),r("sizeref"),r("lighting.ambient"),r("lighting.diffuse"),r("lighting.specular"),r("lighting.roughness"),r("lighting.fresnel"),r("lightposition.x"),r("lightposition.y"),r("lightposition.z"),n(m,a,h,r,{prefix:"",cLetter:"c"}),r("text"),r("hovertext"),r("hovertemplate"),r("uhoverformat"),r("vhoverformat"),r("whoverformat"),r("xhoverformat"),r("yhoverformat"),r("zhoverformat"),
a._length=null):a.visible=!1}},{"../../components/colorscale/defaults":676,"../../lib":803,"./attributes":1325}],1329:[function(b,N,G){N.exports={moduleType:"trace",name:"streamtube",basePlotModule:b("../../plots/gl3d"),categories:["gl3d","showLegend"],attributes:b("./attributes"),supplyDefaults:b("./defaults"),colorbar:{min:"cmin",max:"cmax"},calc:b("./calc").calc,plot:b("./convert"),eventData:function(p,n){p.tubex=p.x;p.tubey=p.y;p.tubez=p.z;p.tubeu=n.traceCoordinate[3];p.tubev=n.traceCoordinate[4];
p.tubew=n.traceCoordinate[5];p.norm=n.traceCoordinate[6];p.divergence=n.traceCoordinate[7];delete p.x;delete p.y;delete p.z;return p},meta:{}}},{"../../plots/gl3d":896,"./attributes":1325,"./calc":1326,"./convert":1327,"./defaults":1328}],1330:[function(b,N,G){G=b("../../plots/attributes");var p=b("../../plots/template_attributes").hovertemplateAttrs,n=b("../../plots/template_attributes").texttemplateAttrs,k=b("../../components/colorscale/attributes"),m=b("../../plots/domain").attributes,a=b("../pie/attributes"),
g=b("./constants");b=b("../../lib/extend").extendFlat;N.exports={labels:{valType:"data_array",editType:"calc"},parents:{valType:"data_array",editType:"calc"},values:{valType:"data_array",editType:"calc"},branchvalues:{valType:"enumerated",values:["remainder","total"],dflt:"remainder",editType:"calc"},count:{valType:"flaglist",flags:["branches","leaves"],dflt:"leaves",editType:"calc"},level:{valType:"any",editType:"plot",anim:!0},maxdepth:{valType:"integer",editType:"plot",dflt:-1},marker:b({colors:{valType:"data_array",
editType:"calc"},line:{color:b({},a.marker.line.color,{dflt:null}),width:b({},a.marker.line.width,{dflt:1}),editType:"calc"},editType:"calc"},k("marker",{colorAttr:"colors",anim:!1})),leaf:{opacity:{valType:"number",editType:"style",min:0,max:1},editType:"plot"},text:a.text,textinfo:{valType:"flaglist",flags:"label;text;value;current path;percent root;percent entry;percent parent".split(";"),extras:["none"],editType:"plot"},texttemplate:n({editType:"plot"},{keys:g.eventDataKeys.concat(["label","value"])}),
hovertext:a.hovertext,hoverinfo:b({},G.hoverinfo,{flags:"label;text;value;name;current path;percent root;percent entry;percent parent".split(";"),dflt:"label+text+value+name"}),hovertemplate:p({},{keys:g.eventDataKeys}),textfont:a.textfont,insidetextorientation:a.insidetextorientation,insidetextfont:a.insidetextfont,outsidetextfont:b({},a.outsidetextfont,{}),rotation:{valType:"angle",dflt:0,editType:"plot"},sort:a.sort,root:{color:{valType:"color",editType:"calc",dflt:"rgba(0,0,0,0)"},editType:"calc"},
domain:m({name:"sunburst",trace:!0,editType:"calc"})}},{"../../components/colorscale/attributes":673,"../../lib/extend":793,"../../plots/attributes":850,"../../plots/domain":882,"../../plots/template_attributes":926,"../pie/attributes":1192,"./constants":1333}],1331:[function(b,N,G){var p=b("../../plots/plots");G.name="sunburst";G.plot=function(n,k,m,a){p.plotBasePlot(G.name,n,k,m,a)};G.clean=function(n,k,m,a){p.cleanBasePlot(G.name,n,k,m,a)}},{"../../plots/plots":917}],1332:[function(b,N,G){function p(f,
q,t){var w=0,x=f.children;if(x){for(var z=x.length,B=0;B<z;B++)w+=p(x[B],q,t);t.branches&&w++}else t.leaves&&w++;f.value=f.data.data.value=w;q._values||(q._values=[]);return q._values[f.data.data.i]=w}var n=b("d3-hierarchy"),k=b("fast-isnumeric"),m=b("../../lib"),a=b("../../components/colorscale").makeColorScaleFuncFromTrace,g=b("../pie/calc").makePullColorFn,h=b("../pie/calc").generateExtendedColors,r=b("../../components/colorscale").calc,l=b("../../constants/numerical").ALMOST_EQUAL,c={},d={},e=
{};G.calc=function(f,q){var t=f._fullLayout,w=q.ids,x=m.isArrayOrTypedArray(w),z=q.labels,B=q.parents,A=q.values,D=m.isArrayOrTypedArray(A),C=[],v={},y={},F=function(W,aa){v[W]?v[W].push(aa):v[W]=[aa];y[aa]=1},J=function(W){return W||"number"===typeof W},K=function(W){return!D||k(A[W])&&0<=A[W]};if(x){x=Math.min(w.length,B.length);var M=function(W){return J(w[W])&&K(W)};var H=function(W){return String(w[W])}}else x=Math.min(z.length,B.length),M=function(W){return J(z[W])&&K(W)},H=function(W){return String(z[W])};
D&&(x=Math.min(x,A.length));for(var O=0;O<x;O++)if(M(O)){var I=H(O),L=J(B[O])?String(B[O]):"",Q={i:O,id:I,pid:L,label:J(z[O])?String(z[O]):""};D&&(Q.v=+A[O]);C.push(Q);F(L,I)}if(!v[""]){B=[];for(var Z in v)y[Z]||B.push(Z);if(1===B.length)Z=B[0],C.unshift({hasImpliedRoot:!0,id:Z,pid:"",label:Z});else return m.warn(["Multiple implied roots, cannot build",q.type,"hierarchy of",q.name+".","These roots include:",B.join(", ")].join(" "))}else if(1<v[""].length){Z=m.randstr();for(B=0;B<C.length;B++)""===
C[B].pid&&(C[B].pid=Z);C.unshift({hasMultipleRoots:!0,id:Z,pid:"",label:""})}try{var ba=n.stratify().id(function(W){return W.id}).parentId(function(W){return W.pid})(C)}catch(W){return m.warn(["Failed to build",q.type,"hierarchy of",q.name+".","Error:",W.message].join(" "))}ba=n.hierarchy(ba);var V=!1;if(D)switch(q.branchvalues){case "remainder":ba.sum(function(W){return W.data.v});break;case "total":ba.each(function(W){var aa=W.data.data,ja=aa.v;if(W.children){var ma=W.children.reduce(function(ia,
ra){return ia+ra.data.data.v},0);if(aa.hasImpliedRoot||aa.hasMultipleRoots)ja=ma;if(ja<ma*l)return V=!0,m.warn(["Total value for node",W.data.data.id,"of",q.name,"is smaller than the sum of its children. \nparent value \x3d",ja,"\nchildren sum \x3d",ma].join(" "))}W.value=ja})}else p(ba,q,{branches:-1!==q.count.indexOf("branches"),leaves:-1!==q.count.indexOf("leaves")});if(!V){q.sort&&ba.sort(function(W,aa){return aa.value-W.value});var S=q.marker.colors||[];Z=!!S.length;if(q._hasColorscale){Z||(S=
D?q.values:q._values);r(f,q,{vals:S,containerStr:"marker",cLetter:"c"});var T=a(q.marker)}else var fa=g(t["_"+q.type+"colormap"]);ba.each(function(W){W=W.data.data;W.color=q._hasColorscale?T(S[W.i]):fa(S[W.i],W.id)});C[0].hierarchy=ba;return C}};G._runCrossTraceCalc=function(f,q){function t(C){var v=C.data.data,y=v.id;!1===v.color&&(z[y]?v.color=z[y]:C.parent?C.parent.parent?v.color=C.parent.data.data.color:(z[y]=v.color=x[B%x.length],B++):v.color=D)}var w=q._fullLayout;q=q.calcdata;var x=w[f+"colorway"],
z=w["_"+f+"colormap"];w["extend"+f+"colors"]&&(x=h(x,"icicle"===f?e:"treemap"===f?d:c));var B=0;for(w=0;w<q.length;w++){var A=q[w][0];if(A.trace.type===f&&A.hierarchy){var D=A.trace.root.color;A.hierarchy.each(t)}}};G.crossTraceCalc=function(f){return G._runCrossTraceCalc("sunburst",f)}},{"../../components/colorscale":678,"../../constants/numerical":779,"../../lib":803,"../pie/calc":1194,"d3-hierarchy":170,"fast-isnumeric":249}],1333:[function(b,N,G){N.exports={CLICK_TRANSITION_TIME:750,CLICK_TRANSITION_EASING:"linear",
eventDataKeys:"currentPath root entry percentRoot percentEntry percentParent".split(" ")}},{}],1334:[function(b,N,G){var p=b("../../lib"),n=b("./attributes"),k=b("../../plots/domain").defaults,m=b("../bar/defaults").handleText;b=b("../../components/colorscale");var a=b.hasColorscale,g=b.handleDefaults;N.exports=function(h,r,l,c){function d(f,q){return p.coerce(h,r,n,f,q)}l=d("labels");var e=d("parents");l&&l.length&&e&&e.length?((l=d("values"))&&l.length?d("branchvalues"):d("count"),d("level"),d("maxdepth"),
d("marker.line.width")&&d("marker.line.color",c.paper_bgcolor),d("marker.colors"),(l=r._hasColorscale=a(h,"marker","colors")||(h.marker||{}).coloraxis)&&g(h,r,c,d,{prefix:"marker.",cLetter:"c"}),d("leaf.opacity",l?1:.7),l=d("text"),d("texttemplate"),r.texttemplate||d("textinfo",Array.isArray(l)?"text+label":"label"),d("hovertext"),d("hovertemplate"),m(h,r,c,d,"auto",{moduleHasSelected:!1,moduleHasUnselected:!1,moduleHasConstrain:!1,moduleHasCliponaxis:!1,moduleHasTextangle:!1,moduleHasInsideanchor:!1}),
d("insidetextorientation"),d("sort"),d("rotation"),d("root.color"),k(r,c,d),r._length=null):r.visible=!1}},{"../../components/colorscale":678,"../../lib":803,"../../plots/domain":882,"../bar/defaults":945,"./attributes":1330}],1335:[function(b,N,G){function p(c,d,e){for(var f=c.data.data,q={curveNumber:d.index,pointNumber:f.i,data:d._input,fullData:d},t=0;t<e.length;t++){var w=e[t];w in c&&(q[w]=c[w])}"parentString"in c&&!r.isHierarchyRoot(c)&&(q.parent=c.parentString);m(q,d,f.i);return q}var n=b("@plotly/d3"),
k=b("../../registry"),m=b("../../components/fx/helpers").appendArrayPointValue,a=b("../../components/fx"),g=b("../../lib"),h=b("../../lib/events"),r=b("./helpers"),l=b("../pie/helpers").formatPieValue;N.exports=function(c,d,e,f,q){var t=f[0],w=t.trace,x=t.hierarchy,z="sunburst"===w.type,B="treemap"===w.type||"icicle"===w.type;"_hasHoverLabel"in w||(w._hasHoverLabel=!1);"_hasHoverEvent"in w||(w._hasHoverEvent=!1);c.on("mouseover",function(A){var D=e._fullLayout;if(!e._dragging&&!1!==D.hovermode){var C=
e._fullData[w.index],v=A.data.data,y=v.i,F=r.isHierarchyRoot(A),J=r.getParent(x,A),K=r.getValue(A),M=function(W){return g.castOption(C,y,W)},H=M("hovertemplate"),O=a.castHoverinfo(C,D,y),I=D.separators;if(H||O&&"none"!==O&&"skip"!==O){if(z){var L=t.cx+A.pxmid[0]*(1-A.rInscribed);var Q=t.cy+A.pxmid[1]*(1-A.rInscribed)}B&&(L=A._hoverX,Q=A._hoverY);var Z={},ba=[],V=[],S=function(W){return-1!==ba.indexOf(W)};O&&(ba="all"===O?C._module.attributes.hoverinfo.flags:O.split("+"));Z.label=v.label;S("label")&&
Z.label&&V.push(Z.label);v.hasOwnProperty("v")&&(Z.value=v.v,Z.valueLabel=l(Z.value,I),S("value")&&V.push(Z.valueLabel));Z.currentPath=A.currentPath=r.getPath(A.data);S("current path")&&!F&&V.push(Z.currentPath);var T=[];O=function(){-1===T.indexOf(fa)&&(V.push(fa),T.push(fa))};Z.percentParent=A.percentParent=K/r.getValue(J);Z.parent=A.parentString=r.getPtLabel(J);if(S("percent parent")){var fa=r.formatPercent(Z.percentParent,I)+" of "+Z.parent;O()}Z.percentEntry=A.percentEntry=K/r.getValue(d);Z.entry=
A.entry=r.getPtLabel(d);!S("percent entry")||F||A.onPathbar||(fa=r.formatPercent(Z.percentEntry,I)+" of "+Z.entry,O());Z.percentRoot=A.percentRoot=K/r.getValue(x);Z.root=A.root=r.getPtLabel(x);S("percent root")&&!F&&(fa=r.formatPercent(Z.percentRoot,I)+" of "+Z.root,O());Z.text=M("hovertext")||M("text");S("text")&&(fa=Z.text,g.isValidTextValue(fa)&&V.push(fa));v={trace:C,y:Q,text:V.join("\x3cbr\x3e"),name:H||S("name")?C.name:void 0,color:M("hoverlabel.bgcolor")||v.color,borderColor:M("hoverlabel.bordercolor"),
fontFamily:M("hoverlabel.font.family"),fontSize:M("hoverlabel.font.size"),fontColor:M("hoverlabel.font.color"),nameLength:M("hoverlabel.namelength"),textAlign:M("hoverlabel.align"),hovertemplate:H,hovertemplateLabels:Z,eventData:[p(A,C,q.eventDataKeys)]};z&&(v.x0=L-A.rInscribed*A.rpx1,v.x1=L+A.rInscribed*A.rpx1,v.idealAlign=0>A.pxmid[0]?"left":"right");B&&(v.x=L,v.idealAlign=0>L?"left":"right");a.loneHover(v,{container:D._hoverlayer.node(),outerContainer:D._paper.node(),gd:e});w._hasHoverLabel=!0}B&&
(D=c.select("path.surface"),q.styleOne(D,A,C,{hovered:!0}));w._hasHoverEvent=!0;e.emit("plotly_hover",{points:[p(A,C,q.eventDataKeys)],event:n.event})}});c.on("mouseout",function(A){var D=e._fullLayout,C=e._fullData[w.index],v=n.select(this).datum();w._hasHoverEvent&&(A.originalEvent=n.event,e.emit("plotly_unhover",{points:[p(v,C,q.eventDataKeys)],event:n.event}),w._hasHoverEvent=!1);w._hasHoverLabel&&(a.loneUnhover(D._hoverlayer.node()),w._hasHoverLabel=!1);B&&(A=c.select("path.surface"),q.styleOne(A,
v,C,{hovered:!1}))});c.on("click",function(A){var D=e._fullLayout,C=e._fullData[w.index],v=z&&(r.isHierarchyRoot(A)||r.isLeaf(A)),y=r.getPtId(A);y=r.isEntry(A)?r.findEntryWithChild(x,y):r.findEntryWithLevel(x,y);y=r.getPtId(y);var F={points:[p(A,C,q.eventDataKeys)],event:n.event};v||(F.nextLevel=y);F=h.triggerHandler(e,"plotly_"+w.type+"click",F);!1!==F&&D.hovermode&&(e._hoverdata=[p(A,C,q.eventDataKeys)],a.click(e,n.event));v||!1===F||e._dragging||e._transitioning||(k.call("_storeDirectGUIEdit",
C,D._tracePreGUI[C.uid],{level:C.level}),A={data:[{level:y}],traces:[w.index]},C={frame:{redraw:!1,duration:q.transitionTime},transition:{duration:q.transitionTime,easing:q.transitionEasing},mode:"immediate",fromcurrent:!0},a.loneUnhover(D._hoverlayer.node()),k.call("animate",e,A,C))})}},{"../../components/fx":706,"../../components/fx/helpers":702,"../../lib":803,"../../lib/events":792,"../../registry":931,"../pie/helpers":1197,"./helpers":1336,"@plotly/d3":58}],1336:[function(b,N,G){var p=b("../../lib"),
n=b("../../components/color"),k=b("../../lib/setcursor"),m=b("../pie/helpers");G.findEntryWithLevel=function(a,g){var h;g&&a.eachAfter(function(r){if(G.getPtId(r)===g)return h=r.copy()});return h||a};G.findEntryWithChild=function(a,g){var h;a.eachAfter(function(r){for(var l=r.children||[],c=0;c<l.length;c++)if(G.getPtId(l[c])===g)return h=r.copy()});return h||a};G.isEntry=function(a){return!a.parent};G.isLeaf=function(a){return!a.children};G.getPtId=function(a){return a.data.data.id};G.getPtLabel=
function(a){return a.data.data.label};G.getValue=function(a){return a.value};G.isHierarchyRoot=function(a){return""===a.data.data.pid};G.setSliceCursor=function(a,g,h){g=h.isTransitioning;g||(g=a.datum(),g=h.hideOnRoot&&G.isHierarchyRoot(g)||h.hideOnLeaves&&G.isLeaf(g));k(a,g?null:"pointer")};G.getInsideTextFontKey=function(a,g,h,r,l){h=h.data.data.i;return p.castOption(g,h,((l||{}).onPathbar?"pathbar.textfont":"insidetextfont")+"."+a)||p.castOption(g,h,"textfont."+a)||r.size};G.getOutsideTextFontKey=
function(a,g,h,r){h=h.data.data.i;return p.castOption(g,h,"outsidetextfont."+a)||p.castOption(g,h,"textfont."+a)||r.size};G.isOutsideText=function(a,g){return!a._hasColorscale&&G.isHierarchyRoot(g)};G.determineTextFont=function(a,g,h,r){if(G.isOutsideText(a,g))a={color:G.getOutsideTextFontKey("color",a,g,h),family:G.getOutsideTextFontKey("family",a,g,h),size:G.getOutsideTextFontKey("size",a,g,h)};else{var l=g.data.data,c=l.i,d=p.castOption(a,c,((r||{}).onPathbar?"pathbar.textfont":"insidetextfont")+
".color");!d&&a._input.textfont&&(d=p.castOption(a._input,c,"textfont.color"));a={color:d||n.contrast(l.color),family:G.getInsideTextFontKey("family",a,g,h,r),size:G.getInsideTextFontKey("size",a,g,h,r)}}return a};G.hasTransition=function(a){return!!(a&&0<a.duration)};G.getMaxDepth=function(a){return 0<=a.maxdepth?a.maxdepth:Infinity};G.isHeader=function(a,g){return!(G.isLeaf(a)||a.depth===g._maxDepth-1)};G.getParent=function(a,g){return G.findEntryWithLevel(a,g.data.data.pid)};G.listPath=function(a,
g){a=a.parent;if(!a)return[];var h=g?[a.data[g]]:[a];return G.listPath(a,g).concat(h)};G.getPath=function(a){return G.listPath(a,"label").join("/")+"/"};G.formatValue=m.formatPieValue;G.formatPercent=function(a,g){var h=p.formatPercent(a,0);"0%"===h&&(h=m.formatPiePercent(a,g));return h}},{"../../components/color":666,"../../lib":803,"../../lib/setcursor":824,"../pie/helpers":1197}],1337:[function(b,N,G){N.exports={moduleType:"trace",name:"sunburst",basePlotModule:b("./base_plot"),categories:[],animatable:!0,
attributes:b("./attributes"),layoutAttributes:b("./layout_attributes"),supplyDefaults:b("./defaults"),supplyLayoutDefaults:b("./layout_defaults"),calc:b("./calc").calc,crossTraceCalc:b("./calc").crossTraceCalc,plot:b("./plot").plot,style:b("./style").style,colorbar:b("../scatter/marker_colorbar"),meta:{}}},{"../scatter/marker_colorbar":1236,"./attributes":1330,"./base_plot":1331,"./calc":1332,"./defaults":1334,"./layout_attributes":1338,"./layout_defaults":1339,"./plot":1340,"./style":1341}],1338:[function(b,
N,G){N.exports={sunburstcolorway:{valType:"colorlist",editType:"calc"},extendsunburstcolors:{valType:"boolean",dflt:!0,editType:"calc"}}},{}],1339:[function(b,N,G){var p=b("../../lib"),n=b("./layout_attributes");N.exports=function(k,m){p.coerce(k,m,n,"sunburstcolorway",m.colorway);p.coerce(k,m,n,"extendsunburstcolors",void 0)}},{"../../lib":803,"./layout_attributes":1338}],1340:[function(b,N,G){function p(D,C,v,y){function F(sa){var za=A.getPtId(sa),Ha=aa[za],Wa=aa[A.getPtId(Z)];if(Wa){var Za=(sa.x1>
Wa.x1?2*Math.PI:0)+ia;sa=sa.rpx1<Wa.rpx1?{x0:sa.x0,x1:sa.x1,rpx0:0,rpx1:0}:{x0:Za,x1:Za,rpx0:sa.rpx0,rpx1:sa.rpx1}}else{var bb,sb=A.getPtId(sa.parent);I.each(function(ub){if(A.getPtId(ub)===sb)return bb=ub});sa=bb.children;var hb;sa.forEach(function(ub,pb){if(A.getPtId(ub)===za)return hb=pb});sa=sa.length;Wa=h(bb.x0,bb.x1);sa={rpx0:S,rpx1:S,x0:Wa(hb/sa),x1:Wa((hb+1)/sa)}}return h(Ha,sa)}function J(sa){var za=aa[A.getPtId(sa)],Ha={x0:sa.x0,x1:sa.x1,rpx0:sa.rpx0,rpx1:sa.rpx1};za||(W?sa.parent?na?(sa=
(sa.x1>na?2*Math.PI:0)+ia,za={x0:sa,x1:sa}):(za={rpx0:S,rpx1:S},l.extendFlat(za,M(sa))):za={rpx0:0,rpx1:0}:za={x0:ia,x1:ia});return h(za,Ha)}function K(sa){var za=aa[A.getPtId(sa)],Ha=sa.transform;za||(za={rpx1:sa.rpx1,transform:{textPosAngle:Ha.textPosAngle,scale:0,rotate:Ha.rotate,rCenter:Ha.rCenter,x:Ha.x,y:Ha.y}},W?sa.parent?na?za.x0=za.x1=sa.x1>na?2*Math.PI:0:l.extendFlat(za,M(sa)):za.x0=za.x1=ia:za.x0=za.x1=ia);var Wa=h(za.transform.textPosAngle,sa.transform.textPosAngle),Za=h(za.rpx1,sa.rpx1),
bb=h(za.x0,sa.x0),sb=h(za.x1,sa.x1),hb=h(za.transform.scale,Ha.scale),ub=h(za.transform.rotate,Ha.rotate),pb=0===Ha.rCenter?3:0===za.transform.rCenter?1/3:1,Ab=h(za.transform.rCenter,Ha.rCenter);return function(tb){var vb=Za(tb),qb=bb(tb),zb=sb(tb),La=Ab(Math.pow(tb,pb));qb=wa(vb,(qb+zb)/2);zb=Wa(tb);vb={pxmid:qb,rpx1:vb,transform:{textPosAngle:zb,rCenter:La,x:Ha.x,y:Ha.y}};d(Q.type,Ha,H);return{transform:{targetX:la(vb),targetY:ka(vb),scale:hb(tb),rotate:ub(tb),rCenter:La}}}}function M(sa){var za=
sa.parent,Ha=aa[A.getPtId(za)],Wa={};Ha?(za=za.children,sa=za.indexOf(sa),za=za.length,Ha=h(Ha.x0,Ha.x1),Wa.x0=Ha(sa/za),Wa.x1=Ha(sa/za)):Wa.x0=Wa.x1=0;return Wa}var H=D._fullLayout,O=!H.uniformtext.mode&&A.hasTransition(y),I=a.select(v).selectAll("g.slice"),L=C[0],Q=L.trace,Z=A.findEntryWithLevel(L.hierarchy,Q.level);v=A.getMaxDepth(Q);y=H._size;var ba=Q.domain,V=y.h*(ba.y[1]-ba.y[0]),S=.5*Math.min(y.w*(ba.x[1]-ba.x[0]),V),T=L.cx=y.l+y.w*(ba.x[1]+ba.x[0])/2,fa=L.cy=y.t+y.h*(1-ba.y[0])-V/2;if(!Z)return I.remove();
var W=null,aa={};O&&I.each(function(sa){aa[A.getPtId(sa)]={rpx0:sa.rpx0,rpx1:sa.rpx1,x0:sa.x0,x1:sa.x1,transform:sa.transform};!W&&A.isEntry(sa)&&(W=sa)});y=n(Z).descendants();ba=Z.height+1;var ja=0,ma=v;L.hasMultipleRoots&&A.isHierarchyRoot(Z)&&(y=y.slice(1),--ba,ja=1,ma+=1);y=y.filter(function(sa){return sa.y1<=ma});var ia=f(Q.rotation);ia&&y.forEach(function(sa){sa.x0+=ia;sa.x1+=ia});var ra=Math.min(ba,v),wa=function(sa,za){return[sa*Math.cos(za),-sa*Math.sin(za)]},pa=function(sa){return l.pathAnnulus(sa.rpx0,
sa.rpx1,sa.x0,sa.x1,T,fa)},la=function(sa){return T+m(sa.rpx1,sa.transform.textPosAngle)[0]*(sa.transform.rCenter||0)+(sa.transform.x||0)},ka=function(sa){return fa+m(sa.rpx1,sa.transform.textPosAngle)[1]*(sa.transform.rCenter||0)+(sa.transform.y||0)};I=I.data(y,A.getPtId);I.enter().append("g").classed("slice",!0);O?I.exit().transition().each(function(){var sa=a.select(this);sa.select("path.surface").transition().attrTween("d",function(za){var Ha=F(za);return function(Wa){return pa(Ha(Wa))}});sa.select("g.slicetext").attr("opacity",
0)}).remove():I.exit().remove();I.order();var na=null;if(O&&W){var oa=A.getPtId(W);I.each(function(sa){null===na&&A.getPtId(sa)===oa&&(na=sa.x1)})}v=I;O&&(v=v.transition().each("end",function(){var sa=a.select(this);A.setSliceCursor(sa,D,{hideOnRoot:!0,hideOnLeaves:!0,isTransitioning:!1})}));v.each(function(sa){var za=a.select(this),Ha=l.ensureSingle(za,"path","surface",function(sb){sb.style("pointer-events","all")});sa.rpx0=(sa.y0-ja)/ra*S;sa.rpx1=(sa.y1-ja)/ra*S;sa.xmid=(sa.x0+sa.x1)/2;sa.pxmid=
wa(sa.rpx1,sa.xmid);sa.midangle=-(sa.xmid-Math.PI/2);sa.startangle=-(sa.x0-Math.PI/2);sa.stopangle=-(sa.x1-Math.PI/2);sa.halfangle=.5*Math.min(l.angleDelta(sa.x0,sa.x1)||Math.PI,Math.PI);sa.ring=1-sa.rpx0/sa.rpx1;sa.rInscribed=k(sa,Q);O?Ha.transition().attrTween("d",function(sb){var hb=J(sb);return function(ub){return pa(hb(ub))}}):Ha.attr("d",pa);za.call(z,Z,D,C,{eventDataKeys:B.eventDataKeys,transitionTime:B.CLICK_TRANSITION_TIME,transitionEasing:B.CLICK_TRANSITION_EASING}).call(A.setSliceCursor,
D,{hideOnRoot:!0,hideOnLeaves:!0,isTransitioning:D._transitioning});Ha.call(w,sa,Q);za=l.ensureSingle(za,"g","slicetext");za=l.ensureSingle(za,"text","",function(sb){sb.attr("data-notex",1)});var Wa=l.ensureUniformFontSize(D,A.determineTextFont(Q,sa,H.font));za.text(G.formatSliceLabel(sa,Z,Q,C,H)).classed("slicetext",!0).attr("text-anchor","middle").call(r.font,Wa).call(c.convertToTspans,D);var Za=r.bBox(za.node());sa.transform=t(Za,sa,L);sa.transform.targetX=la(sa);sa.transform.targetY=ka(sa);var bb=
function(sb,hb){sb=sb.transform;q(sb,hb);sb.fontSize=Wa.size;d(Q.type,sb,H);return l.getTextTransform(sb)};O?za.transition().attrTween("transform",function(sb){var hb=K(sb);return function(ub){return bb(hb(ub),Za)}}):za.attr("transform",bb(sa,Za))})}function n(D){return g.partition().size([2*Math.PI,D.height+1])(D)}function k(D){return 0===D.rpx0&&l.isFullCircle([D.x0,D.x1])?1:Math.max(0,Math.min(1/(1+1/Math.sin(D.halfangle)),D.ring/2))}function m(D,C){return[D*Math.sin(C),-D*Math.cos(C)]}var a=b("@plotly/d3"),
g=b("d3-hierarchy"),h=b("d3-interpolate").interpolate,r=b("../../components/drawing"),l=b("../../lib"),c=b("../../lib/svg_text_utils");N=b("../bar/uniform_text");var d=N.recordMinTextSize,e=N.clearMinTextSize;N=b("../pie/plot");var f=b("../pie/helpers").getRotationAngle,q=N.computeTransform,t=N.transformInsideText,w=b("./style").styleOne,x=b("../bar/style").resizeText,z=b("./fx"),B=b("./constants"),A=b("./helpers");G.plot=function(D,C,v,y){var F=D._fullLayout,J=F._sunburstlayer,K,M=!v,H=!F.uniformtext.mode&&
A.hasTransition(v);e("sunburst",F);C=J.selectAll("g.trace.sunburst").data(C,function(O){return O[0].trace.uid});C.enter().append("g").classed("trace",!0).classed("sunburst",!0).attr("stroke-linejoin","round");C.order();H?(y&&(K=y()),a.transition().duration(v.duration).ease(v.easing).each("end",function(){K&&K()}).each("interrupt",function(){K&&K()}).each(function(){J.selectAll("g.trace").each(function(O){p(D,O,this,v)})})):(C.each(function(O){p(D,O,this,v)}),F.uniformtext.mode&&x(D,F._sunburstlayer.selectAll(".trace"),
"sunburst"));M&&C.exit().remove()};G.formatSliceLabel=function(D,C,v,y,F){var J=v.texttemplate,K=v.textinfo;if(!(J||K&&"none"!==K))return"";var M=F.separators,H=D.data.data;y=y[0].hierarchy;var O=A.isHierarchyRoot(D),I=A.getParent(y,D),L=A.getValue(D);if(!J){var Q=K.split("+");F=function(T){return-1!==Q.indexOf(T)};var Z=[];F("label")&&H.label&&Z.push(H.label);H.hasOwnProperty("v")&&F("value")&&Z.push(A.formatValue(H.v,M));if(!O){F("current path")&&Z.push(A.getPath(D.data));D=0;F("percent parent")&&
D++;F("percent entry")&&D++;F("percent root")&&D++;var ba=1<D;if(D){D=function(T){S=A.formatPercent(V,M);ba&&(S+=" of "+T);Z.push(S)};if(F("percent parent")&&!O){var V=L/A.getValue(I);D("parent")}F("percent entry")&&(V=L/A.getValue(C),D("entry"));F("percent root")&&(V=L/A.getValue(y),D("root"))}}if(F("text")){var S=l.castOption(v,H.i,"text");l.isValidTextValue(S)&&Z.push(S)}return Z.join("\x3cbr\x3e")}J=l.castOption(v,H.i,"texttemplate");if(!J)return"";K={};H.label&&(K.label=H.label);H.hasOwnProperty("v")&&
(K.value=H.v,K.valueLabel=A.formatValue(H.v,M));K.currentPath=A.getPath(D.data);O||(K.percentParent=L/A.getValue(I),K.percentParentLabel=A.formatPercent(K.percentParent,M),K.parent=A.getPtLabel(I));K.percentEntry=L/A.getValue(C);K.percentEntryLabel=A.formatPercent(K.percentEntry,M);K.entry=A.getPtLabel(C);K.percentRoot=L/A.getValue(y);K.percentRootLabel=A.formatPercent(K.percentRoot,M);K.root=A.getPtLabel(y);H.hasOwnProperty("color")&&(K.color=H.color);C=l.castOption(v,H.i,"text");if(l.isValidTextValue(C)||
""===C)K.text=C;K.customdata=l.castOption(v,H.i,"customdata");return l.texttemplateString(J,K,F._d3locale,K,v._meta||{})}},{"../../components/drawing":688,"../../lib":803,"../../lib/svg_text_utils":829,"../bar/style":955,"../bar/uniform_text":957,"../pie/helpers":1197,"../pie/plot":1201,"./constants":1333,"./fx":1335,"./helpers":1336,"./style":1341,"@plotly/d3":58,"d3-hierarchy":170,"d3-interpolate":171}],1341:[function(b,N,G){function p(g,h,r){var l=h.data.data;h=!h.children;var c=l.i,d=m.castOption(r,
c,"marker.line.color")||k.defaultLine;c=m.castOption(r,c,"marker.line.width")||0;g.style("stroke-width",c).call(k.fill,l.color).call(k.stroke,d).style("opacity",h?r.leaf.opacity:null)}var n=b("@plotly/d3"),k=b("../../components/color"),m=b("../../lib"),a=b("../bar/uniform_text").resizeText;N.exports={style:function(g){var h=g._fullLayout._sunburstlayer.selectAll(".trace");a(g,h,"sunburst");h.each(function(r){var l=n.select(this),c=r[0].trace;l.style("opacity",c.opacity);l.selectAll("path.surface").each(function(d){n.select(this).call(p,
d,c)})})},styleOne:p}},{"../../components/color":666,"../../lib":803,"../bar/uniform_text":957,"@plotly/d3":58}],1342:[function(b,N,G){function p(r){return{valType:"boolean",dflt:!1}}function n(r){return{show:{valType:"boolean",dflt:!1},start:{valType:"number",dflt:null,editType:"plot"},end:{valType:"number",dflt:null,editType:"plot"},size:{valType:"number",dflt:null,min:0,editType:"plot"},project:{x:p("x"),y:p("y"),z:p("z")},color:{valType:"color",dflt:k.defaultLine},usecolormap:{valType:"boolean",
dflt:!1},width:{valType:"number",min:1,max:16,dflt:2},highlight:{valType:"boolean",dflt:!0},highlightcolor:{valType:"color",dflt:k.defaultLine},highlightwidth:{valType:"number",min:1,max:16,dflt:2}}}var k=b("../../components/color");G=b("../../components/colorscale/attributes");var m=b("../../plots/cartesian/axis_format_attributes").axisHoverFormat,a=b("../../plots/template_attributes").hovertemplateAttrs,g=b("../../plots/attributes"),h=b("../../lib/extend").extendFlat;b=b("../../plot_api/edit_types").overrideAll;
N=N.exports=b(h({z:{valType:"data_array"},x:{valType:"data_array"},y:{valType:"data_array"},text:{valType:"string",dflt:"",arrayOk:!0},hovertext:{valType:"string",dflt:"",arrayOk:!0},hovertemplate:a(),xhoverformat:m("x"),yhoverformat:m("y"),zhoverformat:m("z"),connectgaps:{valType:"boolean",dflt:!1,editType:"calc"},surfacecolor:{valType:"data_array"}},G("",{colorAttr:"z or surfacecolor",showScaleDflt:!0,autoColorDflt:!1,editTypeOverride:"calc"}),{contours:{x:n("x"),y:n("y"),z:n("z")},hidesurface:{valType:"boolean",
dflt:!1},lightposition:{x:{valType:"number",min:-1E5,max:1E5,dflt:10},y:{valType:"number",min:-1E5,max:1E5,dflt:1E4},z:{valType:"number",min:-1E5,max:1E5,dflt:0}},lighting:{ambient:{valType:"number",min:0,max:1,dflt:.8},diffuse:{valType:"number",min:0,max:1,dflt:.8},specular:{valType:"number",min:0,max:2,dflt:.05},roughness:{valType:"number",min:0,max:1,dflt:.5},fresnel:{valType:"number",min:0,max:5,dflt:.2}},opacity:{valType:"number",min:0,max:1,dflt:1},opacityscale:{valType:"any",editType:"calc"},
_deprecated:{zauto:h({},G.zauto,{}),zmin:h({},G.zmin,{}),zmax:h({},G.zmax,{})},hoverinfo:h({},g.hoverinfo),showlegend:h({},g.showlegend,{dflt:!1})}),"calc","nested");N.x.editType=N.y.editType=N.z.editType="calc+clearAxisTypes";N.transforms=void 0},{"../../components/color":666,"../../components/colorscale/attributes":673,"../../lib/extend":793,"../../plot_api/edit_types":836,"../../plots/attributes":850,"../../plots/cartesian/axis_format_attributes":857,"../../plots/template_attributes":926}],1343:[function(b,
N,G){var p=b("../../components/colorscale/calc");N.exports=function(n,k){k.surfacecolor?p(n,k,{vals:k.surfacecolor,containerStr:"",cLetter:"c"}):p(n,k,{vals:k.z,containerStr:"",cLetter:"c"})}},{"../../components/colorscale/calc":674}],1344:[function(b,N,G){function p(w,x,z){this.scene=w;this.uid=z;this.surface=x;this.data=null;this.showContour=[!1,!1,!1];this.contourStart=[null,null,null];this.contourEnd=[null,null,null];this.contourSize=[0,0,0];this.minValues=[Infinity,Infinity,Infinity];this.maxValues=
[-Infinity,-Infinity,-Infinity];this.dataScaleY=this.dataScaleX=1;this.refineData=!0;this.objectOffset=[0,0,0]}function n(w){for(var x=[],z=0;z<f.length;z++){var B=f[z],A=x,D=A.push;var C=w;if(C<B)B=0;else{for(var v=0;0===Math.floor(C%B);)C/=B,v++;B=v}D.call(A,B)}return x}function k(w,x,z){var B=z[8]+z[2]*x[0]+z[5]*x[1];w[0]=(z[6]+z[0]*x[0]+z[3]*x[1])/B;w[1]=(z[7]+z[1]*x[0]+z[4]*x[1])/B;return w}var m=b("gl-surface3d"),a=b("ndarray"),g=b("ndarray-linear-interpolate").d2,h=b("../heatmap/interp2d"),
r=b("../heatmap/find_empties"),l=b("../../lib").isArrayOrTypedArray,c=b("../../lib/gl_format_color").parseColorScale,d=b("../../lib/str2rgbarray"),e=b("../../components/colorscale").extractOpts;b=p.prototype;b.getXat=function(w,x,z,B){w=l(this.data.x)?l(this.data.x[0])?this.data.x[x][w]:this.data.x[w]:w;return void 0===z?w:B.d2l(w,0,z)};b.getYat=function(w,x,z,B){w=l(this.data.y)?l(this.data.y[0])?this.data.y[x][w]:this.data.y[x]:x;return void 0===z?w:B.d2l(w,0,z)};b.getZat=function(w,x,z,B){var A=
this.data.z[x][w];null===A&&this.data.connectgaps&&this.data._interpolatedZ&&(A=this.data._interpolatedZ[x][w]);return void 0===z?A:B.d2l(A,0,z)};b.handlePick=function(w){if(w.object===this.surface){var x=Math.max(Math.min(Math.round((w.data.index[0]-1)/this.dataScaleX-1),this.data.z[0].length-1),0),z=Math.max(Math.min(Math.round((w.data.index[1]-1)/this.dataScaleY-1),this.data._ylength-1),0);w.index=[x,z];w.traceCoordinate=[this.getXat(x,z),this.getYat(x,z),this.getZat(x,z)];w.dataCoordinate=[this.getXat(x,
z,this.data.xcalendar,this.scene.fullSceneLayout.xaxis),this.getYat(x,z,this.data.ycalendar,this.scene.fullSceneLayout.yaxis),this.getZat(x,z,this.data.zcalendar,this.scene.fullSceneLayout.zaxis)];for(var B=0;3>B;B++){var A=w.dataCoordinate[B];null!==A&&void 0!==A&&(w.dataCoordinate[B]*=this.scene.dataScale[B])}B=this.data.hovertext||this.data.text;Array.isArray(B)&&B[z]&&void 0!==B[z][x]?w.textLabel=B[z][x]:w.textLabel=B?B:"";w.data.dataCoordinate=w.dataCoordinate.slice();this.surface.highlight(w.data);
this.scene.glplot.spikes.position=w.dataCoordinate;return!0}};var f=[2,3,5,7,11,13,17,19,23,29,31,37,41,43,47,53,59,61,67,71,73,79,83,89,97,101,103,107,109,113,127,131,137,139,149,151,157,163,167,173,179,181,191,193,197,199,211,223,227,229,233,239,241,251,257,263,269,271,277,281,283,293,307,311,313,317,331,337,347,349,353,359,367,373,379,383,389,397,401,409,419,421,431,433,439,443,449,457,461,463,467,479,487,491,499,503,509,521,523,541,547,557,563,569,571,577,587,593,599,601,607,613,617,619,631,641,
643,647,653,659,661,673,677,683,691,701,709,719,727,733,739,743,751,757,761,769,773,787,797,809,811,821,823,827,829,839,853,857,859,863,877,881,883,887,907,911,919,929,937,941,947,953,967,971,977,983,991,997,1009,1013,1019,1021,1031,1033,1039,1049,1051,1061,1063,1069,1087,1091,1093,1097,1103,1109,1117,1123,1129,1151,1153,1163,1171,1181,1187,1193,1201,1213,1217,1223,1229,1231,1237,1249,1259,1277,1279,1283,1289,1291,1297,1301,1303,1307,1319,1321,1327,1361,1367,1373,1381,1399,1409,1423,1427,1429,1433,
1439,1447,1451,1453,1459,1471,1481,1483,1487,1489,1493,1499,1511,1523,1531,1543,1549,1553,1559,1567,1571,1579,1583,1597,1601,1607,1609,1613,1619,1621,1627,1637,1657,1663,1667,1669,1693,1697,1699,1709,1721,1723,1733,1741,1747,1753,1759,1777,1783,1787,1789,1801,1811,1823,1831,1847,1861,1867,1871,1873,1877,1879,1889,1901,1907,1913,1931,1933,1949,1951,1973,1979,1987,1993,1997,1999,2003,2011,2017,2027,2029,2039,2053,2063,2069,2081,2083,2087,2089,2099,2111,2113,2129,2131,2137,2141,2143,2153,2161,2179,2203,
2207,2213,2221,2237,2239,2243,2251,2267,2269,2273,2281,2287,2293,2297,2309,2311,2333,2339,2341,2347,2351,2357,2371,2377,2381,2383,2389,2393,2399,2411,2417,2423,2437,2441,2447,2459,2467,2473,2477,2503,2521,2531,2539,2543,2549,2551,2557,2579,2591,2593,2609,2617,2621,2633,2647,2657,2659,2663,2671,2677,2683,2687,2689,2693,2699,2707,2711,2713,2719,2729,2731,2741,2749,2753,2767,2777,2789,2791,2797,2801,2803,2819,2833,2837,2843,2851,2857,2861,2879,2887,2897,2903,2909,2917,2927,2939,2953,2957,2963,2969,2971,
2999];b.calcXnums=function(w){var x,z=[];for(x=1;x<w;x++){var B=this.getXat(x-1,0),A=this.getXat(x,0);z[x-1]=A!==B&&void 0!==B&&null!==B&&void 0!==A&&null!==A?Math.abs(A-B):0}B=0;for(x=1;x<w;x++)B+=z[x-1];for(x=1;x<w;x++)z[x-1]=0===z[x-1]?1:Math.round(B/z[x-1]);return z};b.calcYnums=function(w){var x,z=[];for(x=1;x<w;x++){var B=this.getYat(0,x-1),A=this.getYat(0,x);z[x-1]=A!==B&&void 0!==B&&null!==B&&void 0!==A&&null!==A?Math.abs(A-B):0}B=0;for(x=1;x<w;x++)B+=z[x-1];for(x=1;x<w;x++)z[x-1]=0===z[x-
1]?1:Math.round(B/z[x-1]);return z};G=[1,2,4,6,12,24,36,48,60,120,180,240,360,720,840,1260];var q=G[9],t=G[13];b.estimateScale=function(w,x){x=0===x?this.calcXnums(w):this.calcYnums(w);if(0===x.length)x=void 0;else{for(var z=1,B=0;B<x.length;B++){var A=x[B];if(1>z||1>A)z=void 0;else{z=n(z);A=n(A);for(var D=1,C=0;C<f.length;C++)D*=Math.pow(f[C],Math.max(z[C],A[C]));z=D}}x=z}for(B=1+x;B<q;)B*=2;for(;B>t;){B--;z=x=B;B=n(z);for(A=0;A<f.length;A++)if(0<B[A]){z=f[A];break}B=x/z;B++;B<q&&(B=t)}w=Math.round(B/
w);return 1<w?w:1};b.refineCoords=function(w){var x=this.dataScaleX,z=this.dataScaleY,B=Math.floor(w[0].shape[0]*x+1)|0,A=Math.floor(w[0].shape[1]*z+1)|0,D=1+w[0].shape[0]+1,C=1+w[0].shape[1]+1;D=a(new Float32Array(D*C),[D,C]);x=[1/x,0,0,0,1/z,0,0,0,1];for(z=0;z<w.length;++z){this.surface.padField(D,w[z]);for(var v=C=a(new Float32Array(B*A),[B,A]),y=D,F=k,J=x,K=[0,0],M=v.shape[0],H=v.shape[1],O=0;O<M;O++)for(var I=0;I<H;I++)F(K,[O,I],J),v.set(O,I,g(y,K[0],K[1]));w[z]=C}};b.setContourLevels=function(){var w=
[[],[],[]],x=[!1,!1,!1],z=!1,B,A;for(B=0;3>B;++B)if(this.showContour[B]&&(z=!0,0<this.contourSize[B]&&null!==this.contourStart[B]&&null!==this.contourEnd[B]&&this.contourEnd[B]>this.contourStart[B]))for(x[B]=!0,A=this.contourStart[B];A<this.contourEnd[B];A+=this.contourSize[B]){var D=A*this.scene.dataScale[B];for(var C=w[B],v=!1,y=0;y<C.length;y++)if(D===C[y]){v=!0;break}!1===v&&C.push(D)}if(z){z=[[],[],[]];for(B=0;3>B;++B)this.showContour[B]&&(z[B]=x[B]?w[B]:this.scene.contourLevels[B]);this.surface.update({levels:z})}};
b.update=function(w){var x=this.scene,z=x.fullSceneLayout,B=this.surface,A=c(w),D=x.dataScale,C=w.z[0].length,v=w._ylength;x=x.contourLevels;this.data=w;var y,F,J,K=[];for(y=0;3>y;y++)for(K[y]=[],F=0;F<C;F++)K[y][F]=[];for(F=0;F<C;F++)for(J=0;J<v;J++)K[0][F][J]=this.getXat(F,J,w.xcalendar,z.xaxis),K[1][F][J]=this.getYat(F,J,w.ycalendar,z.yaxis),K[2][F][J]=this.getZat(F,J,w.zcalendar,z.zaxis);if(w.connectgaps)for(w._emptypoints=r(K[2]),h(K[2],w._emptypoints),w._interpolatedZ=[],F=0;F<C;F++)for(w._interpolatedZ[F]=
[],J=0;J<v;J++)w._interpolatedZ[F][J]=K[2][F][J];for(y=0;3>y;y++)for(F=0;F<C;F++)for(J=0;J<v;J++)z=K[y][F][J],K[y][F][J]=null===z||void 0===z?NaN:K[y][F][J]*D[y];for(y=0;3>y;y++)for(F=0;F<C;F++)for(J=0;J<v;J++)z=K[y][F][J],null!==z&&void 0!==z&&(this.minValues[y]>z&&(this.minValues[y]=z),this.maxValues[y]<z&&(this.maxValues[y]=z));for(y=0;3>y;y++)this.objectOffset[y]=.5*(this.minValues[y]+this.maxValues[y]);for(y=0;3>y;y++)for(F=0;F<C;F++)for(J=0;J<v;J++)z=K[y][F][J],null!==z&&void 0!==z&&(K[y][F][J]-=
this.objectOffset[y]);z=[a(new Float32Array(C*v),[C,v]),a(new Float32Array(C*v),[C,v]),a(new Float32Array(C*v),[C,v])];for(y=0;3>y;y++)for(F=0;F<C;F++)for(J=0;J<v;J++)z[y].set(F,J,K[y][F][J]);K={colormap:A,levels:[[],[],[]],showContour:[!0,!0,!0],showSurface:!w.hidesurface,contourProject:[[!1,!1,!1],[!1,!1,!1],[!1,!1,!1]],contourWidth:[1,1,1],contourColor:[[1,1,1,1],[1,1,1,1],[1,1,1,1]],contourTint:[1,1,1],dynamicColor:[[1,1,1,1],[1,1,1,1],[1,1,1,1]],dynamicWidth:[1,1,1],dynamicTint:[1,1,1],opacityscale:w.opacityscale,
opacity:w.opacity};y=e(w);K.intensityBounds=[y.min,y.max];if(w.surfacecolor){y=a(new Float32Array(C*v),[C,v]);for(F=0;F<C;F++)for(J=0;J<v;J++)y.set(F,J,w.surfacecolor[J][F]);z.push(y)}else K.intensityBounds[0]*=D[2],K.intensityBounds[1]*=D[2];if(t<z[0].shape[0]||t<z[0].shape[1])this.refineData=!1;!0===this.refineData&&(this.dataScaleX=this.estimateScale(z[0].shape[0],0),this.dataScaleY=this.estimateScale(z[0].shape[1],1),1===this.dataScaleX&&1===this.dataScaleY||this.refineCoords(z));w.surfacecolor&&
(K.intensity=z.pop());C=[!0,!0,!0];v=["x","y","z"];for(y=0;3>y;++y)D=w.contours[v[y]],C[y]=D.highlight,K.showContour[y]=D.show||D.highlight,K.showContour[y]&&(K.contourProject[y]=[D.project.x,D.project.y,D.project.z],D.show?(this.showContour[y]=!0,K.levels[y]=x[y],B.highlightColor[y]=K.contourColor[y]=d(D.color),B.highlightTint[y]=D.usecolormap?K.contourTint[y]=0:K.contourTint[y]=1,K.contourWidth[y]=D.width,this.contourStart[y]=D.start,this.contourEnd[y]=D.end,this.contourSize[y]=D.size):(this.showContour[y]=
!1,this.contourStart[y]=null,this.contourEnd[y]=null,this.contourSize[y]=0),D.highlight&&(K.dynamicColor[y]=d(D.highlightcolor),K.dynamicWidth[y]=D.highlightwidth));x=A[0].rgb;A=A[A.length-1].rgb;x[0]===A[0]&&x[1]===A[1]&&x[2]===A[2]&&x[3]===A[3]&&(K.vertexColor=!0);K.objectOffset=this.objectOffset;K.coords=z;B.update(K);B.visible=w.visible;B.enableDynamic=C;B.enableHighlight=C;B.snapToData=!0;"lighting"in w&&(B.ambientLight=w.lighting.ambient,B.diffuseLight=w.lighting.diffuse,B.specularLight=w.lighting.specular,
B.roughness=w.lighting.roughness,B.fresnel=w.lighting.fresnel);"lightposition"in w&&(B.lightPosition=[w.lightposition.x,w.lightposition.y,w.lightposition.z])};b.dispose=function(){this.scene.glplot.remove(this.surface);this.surface.dispose()};N.exports=function(w,x){var z=m({gl:w.glplot.gl}),B=new p(w,z,x.uid);z._trace=B;B.update(x);w.glplot.add(z);return B}},{"../../components/colorscale":678,"../../lib":803,"../../lib/gl_format_color":799,"../../lib/str2rgbarray":828,"../heatmap/find_empties":1091,
"../heatmap/interp2d":1094,"gl-surface3d":354,ndarray:483,"ndarray-linear-interpolate":477}],1345:[function(b,N,G){function p(h,r,l,c){h=c("opacityscale");if("max"===h)r.opacityscale=[[0,.1],[1,1]];else if("min"===h)r.opacityscale=[[0,1],[1,.1]];else if("extremes"===h){h=[];for(l=0;32>l;l++)c=l/31,h.push([c,Math.max(0,Math.min(1,.1+.9*(1-Math.pow(Math.sin(1*c*Math.PI),2))))]);r.opacityscale=h}else{a:if(l=0,!Array.isArray(h)||2>h.length||!h[0]||!h[h.length-1]||0!==+h[0][0]||1!==+h[h.length-1][0])h=
!1;else{for(c=0;c<h.length;c++){var d=h[c];if(2!==d.length||+d[0]<l){h=!1;break a}l=+d[0]}h=!0}h||(r.opacityscale=void 0)}}function n(h,r,l){r in h&&!(l in h)&&(h[l]=h[r])}var k=b("../../registry"),m=b("../../lib"),a=b("../../components/colorscale/defaults"),g=b("./attributes");N.exports={supplyDefaults:function(h,r,l,c){function d(z,B){return m.coerce(h,r,g,z,B)}l=d("x");var e=d("y");var f=d("z");if(!f||!f.length||l&&1>l.length||e&&1>e.length)r.visible=!1;else{r._xlength=Array.isArray(l)&&m.isArrayOrTypedArray(l[0])?
f.length:f[0].length;r._ylength=f.length;k.getComponentMethod("calendars","handleTraceDefaults")(h,r,["x","y","z"],c);d("text");d("hovertext");d("hovertemplate");d("xhoverformat");d("yhoverformat");d("zhoverformat");"lighting.ambient lighting.diffuse lighting.specular lighting.roughness lighting.fresnel lightposition.x lightposition.y lightposition.z hidesurface connectgaps opacity".split(" ").forEach(function(z){d(z)});f=d("surfacecolor");var q=["x","y","z"];for(l=0;3>l;++l){var t="contours."+q[l],
w=d(t+".show"),x=d(t+".highlight");if(w||x)for(e=0;3>e;++e)d(t+".project."+q[e]);w&&(d(t+".color"),d(t+".width"),d(t+".usecolormap"));x&&(d(t+".highlightcolor"),d(t+".highlightwidth"));d(t+".start");d(t+".end");d(t+".size")}f||(n(h,"zmin","cmin"),n(h,"zmax","cmax"),n(h,"zauto","cauto"));a(h,r,c,d,{prefix:"",cLetter:"c"});p(h,r,c,d);r._length=null}},opacityscaleDefaults:p}},{"../../components/colorscale/defaults":676,"../../lib":803,"../../registry":931,"./attributes":1342}],1346:[function(b,N,G){N.exports=
{attributes:b("./attributes"),supplyDefaults:b("./defaults").supplyDefaults,colorbar:{min:"cmin",max:"cmax"},calc:b("./calc"),plot:b("./convert"),moduleType:"trace",name:"surface",basePlotModule:b("../../plots/gl3d"),categories:["gl3d","2dMap","showLegend"],meta:{}}},{"../../plots/gl3d":896,"./attributes":1342,"./calc":1343,"./convert":1344,"./defaults":1345}],1347:[function(b,N,G){G=b("../../components/annotations/attributes");var p=b("../../lib/extend").extendFlat,n=b("../../plot_api/edit_types").overrideAll,
k=b("../../plots/font_attributes"),m=b("../../plots/domain").attributes;b=b("../../plots/cartesian/axis_format_attributes").descriptionOnlyNumbers;(N.exports=n({domain:m({name:"table",trace:!0}),columnwidth:{valType:"number",arrayOk:!0,dflt:null},columnorder:{valType:"data_array"},header:{values:{valType:"data_array",dflt:[]},format:{valType:"data_array",dflt:[],description:b("cell value")},prefix:{valType:"string",arrayOk:!0,dflt:null},suffix:{valType:"string",arrayOk:!0,dflt:null},height:{valType:"number",
dflt:28},align:p({},G.align,{arrayOk:!0}),line:{width:{valType:"number",arrayOk:!0,dflt:1},color:{valType:"color",arrayOk:!0,dflt:"grey"}},fill:{color:{valType:"color",arrayOk:!0,dflt:"white"}},font:p({},k({arrayOk:!0}))},cells:{values:{valType:"data_array",dflt:[]},format:{valType:"data_array",dflt:[],description:b("cell value")},prefix:{valType:"string",arrayOk:!0,dflt:null},suffix:{valType:"string",arrayOk:!0,dflt:null},height:{valType:"number",dflt:20},align:p({},G.align,{arrayOk:!0}),line:{width:{valType:"number",
arrayOk:!0,dflt:1},color:{valType:"color",arrayOk:!0,dflt:"grey"}},fill:{color:{valType:"color",arrayOk:!0,dflt:"white"}},font:p({},k({arrayOk:!0}))}},"calc","from-root")).transforms=void 0},{"../../components/annotations/attributes":649,"../../lib/extend":793,"../../plot_api/edit_types":836,"../../plots/cartesian/axis_format_attributes":857,"../../plots/domain":882,"../../plots/font_attributes":883}],1348:[function(b,N,G){var p=b("../../plots/get_data").getModuleCalcData,n=b("./plot");G.name="table";
G.plot=function(k){var m=p(k.calcdata,"table")[0];m.length&&n(k,m)};G.clean=function(k,m,a,g){k=g._has&&g._has("table");m=m._has&&m._has("table");k&&!m&&g._paperdiv.selectAll(".table").remove()}},{"../../plots/get_data":891,"./plot":1355}],1349:[function(b,N,G){var p=b("../../lib/gup").wrap;N.exports=function(){return p({})}},{"../../lib/gup":800}],1350:[function(b,N,G){N.exports={cellPad:8,columnExtentOffset:10,columnTitleOffset:28,emptyHeaderHeight:16,latexCheck:/^\$.*\$$/,goldenRatio:1.618,lineBreaker:"\x3cbr\x3e",
maxDimensionCount:60,overdrag:45,releaseTransitionDuration:120,releaseTransitionEase:"cubic-out",scrollbarCaptureWidth:18,scrollbarHideDelay:1E3,scrollbarHideDuration:1E3,scrollbarOffset:5,scrollbarWidth:8,transitionDuration:100,transitionEase:"cubic-out",uplift:5,wrapSpacer:" ",wrapSplitCharacter:" ",cn:{table:"table",tableControlView:"table-control-view",scrollBackground:"scroll-background",yColumn:"y-column",columnBlock:"column-block",scrollAreaClip:"scroll-area-clip",scrollAreaClipRect:"scroll-area-clip-rect",
columnBoundary:"column-boundary",columnBoundaryClippath:"column-boundary-clippath",columnBoundaryRect:"column-boundary-rect",columnCells:"column-cells",columnCell:"column-cell",cellRect:"cell-rect",cellText:"cell-text",cellTextHolder:"cell-text-holder",scrollbarKit:"scrollbar-kit",scrollbar:"scrollbar",scrollbarSlider:"scrollbar-slider",scrollbarGlyph:"scrollbar-glyph",scrollbarCaptureZone:"scrollbar-capture-zone"}}},{}],1351:[function(b,N,G){function p(e){if(Array.isArray(e)){for(var f=0,q=0;q<e.length;q++)f=
Math.max(f,p(e[q]));return f}return e}function n(e,f){return e+f}function k(e){e=e.slice();var f=Infinity,q=0,t;for(t=0;t<e.length;t++)Array.isArray(e[t])||(e[t]=[e[t]]),f=Math.min(f,e[t].length),q=Math.max(q,e[t].length);if(f!==q)for(t=0;t<e.length;t++)(f=q-e[t].length)&&(e[t]=e[t].concat(m(f)));return e}function m(e){for(var f=Array(e),q=0;q<e;q++)f[q]="";return f}function a(e){return e.calcdata.columns.reduce(function(f,q){return q.xIndex<e.xIndex?f+q.columnWidth:f},0)}function g(e,f){return Object.keys(e).map(function(q){return c({},
e[q],{auxiliaryBlocks:f})})}function h(e,f){for(var q={},t,w=0,x=0,z=r(),B=0,A=0,D=0;D<e.length;D++)if(t=e[D],z.rows.push({rowIndex:D,rowHeight:t}),x+=t,x>=f||D===e.length-1)q[w]=z,z.key=A++,z.firstRowIndex=B,z.lastRowIndex=D,z=r(),w+=x,B=D+1,x=0;return q}function r(){return{firstRowIndex:null,lastRowIndex:null,rows:[]}}var l=b("./constants"),c=b("../../lib/extend").extendFlat,d=b("fast-isnumeric");N.exports=function(e,f){var q=k(f.cells.values),t=function(H){return H.slice(f.header.values.length,
H.length)},w=k(f.header.values);w.length&&!w[0].length&&(w[0]=[""],w=k(w));var x=w.concat(t(q).map(function(){return m((w[0]||[""]).length)})),z=f.domain,B=Math.floor(e._fullLayout._size.w*(z.x[1]-z.x[0])),A=Math.floor(e._fullLayout._size.h*(z.y[1]-z.y[0])),D=f.header.values.length?x[0].map(function(){return f.header.height}):[l.emptyHeaderHeight],C=q.length?q[0].map(function(){return f.cells.height}):[],v=D.reduce(n,0);C=h(C,A-v+l.uplift);D=h(D,v);D=g(D,[]);C=g(C,D);var y={},F=f._fullInput.columnorder.concat(t(q.map(function(H,
O){return O}))),J=x.map(function(H,O){H=Array.isArray(f.columnwidth)?f.columnwidth[Math.min(O,f.columnwidth.length-1)]:f.columnwidth;return d(H)?Number(H):1}),K=J.reduce(n,0);J=J.map(function(H){return H/K*B});t=Math.max(p(f.header.line.width),p(f.cells.line.width));var M={key:f.uid+e._context.staticPlot,translateX:z.x[0]*e._fullLayout._size.w,translateY:e._fullLayout._size.h*(1-z.y[1]),size:e._fullLayout._size,width:B,maxLineWidth:t,height:A,columnOrder:F,groupHeight:A,rowBlocks:C,headerRowBlocks:D,
scrollY:0,cells:c({},f.cells,{values:q}),headerCells:c({},f.header,{values:x}),gdColumns:x.map(function(H){return H[0]}),gdColumnsOriginalOrder:x.map(function(H){return H[0]}),prevPages:[0,0],scrollbarState:{scrollbarScrollInProgress:!1},columns:x.map(function(H,O){y[H]=(y[H]||0)+1;return{key:H+"__"+y[H],label:H,specIndex:O,xIndex:F[O],xScale:a,x:void 0,calcdata:void 0,columnWidth:J[O]}})};M.columns.forEach(function(H){H.calcdata=M;H.x=a(H)});return M}},{"../../lib/extend":793,"./constants":1350,
"fast-isnumeric":249}],1352:[function(b,N,G){function p(k){var m=(k=k.rowBlocks[k.page])?k.rows[0].rowIndex:0;return[m,k?m+k.rows.length:0]}var n=b("../../lib/extend").extendFlat;G.splitToPanels=function(k){var m=[0,0],a=n({},k,{key:"header",type:"header",page:0,prevPages:m,currentRepaint:[null,null],dragHandle:!0,values:k.calcdata.headerCells.values[k.specIndex],rowBlocks:k.calcdata.headerRowBlocks,calcdata:n({},k.calcdata,{cells:k.calcdata.headerCells})}),g=n({},k,{key:"cells1",type:"cells",page:0,
prevPages:m,currentRepaint:[null,null],dragHandle:!1,values:k.calcdata.cells.values[k.specIndex],rowBlocks:k.calcdata.rowBlocks});k=n({},k,{key:"cells2",type:"cells",page:1,prevPages:m,currentRepaint:[null,null],dragHandle:!1,values:k.calcdata.cells.values[k.specIndex],rowBlocks:k.calcdata.rowBlocks});return[g,k,a]};G.splitToCells=function(k){var m=p(k);return(k.values||[]).slice(m[0],m[1]).map(function(a,g){var h="string"===typeof a&&a.match(/[<$&> ]/)?"_keybuster_"+Math.random():"";return{keyWithinBlock:g+
h,key:m[0]+g,column:k,calcdata:k.calcdata,page:k.page,rowBlocks:k.rowBlocks,value:a}})}},{"../../lib/extend":793}],1353:[function(b,N,G){function p(a,g){var h=a.header.values.length;a=(a.columnorder||[]).slice(0,h);var r=a.slice().sort(function(c,d){return c-d});a=a.map(function(c){return r.indexOf(c)});for(var l=a.length;l<h;l++)a.push(l);g("columnorder",a)}var n=b("../../lib"),k=b("./attributes"),m=b("../../plots/domain").defaults;N.exports=function(a,g,h,r){function l(c,d){return n.coerce(a,g,
k,c,d)}m(g,r,l);l("columnwidth");l("header.values");l("header.format");l("header.align");l("header.prefix");l("header.suffix");l("header.height");l("header.line.width");l("header.line.color");l("header.fill.color");n.coerceFont(l,"header.font",n.extendFlat({},r.font));p(g,l);l("cells.values");l("cells.format");l("cells.align");l("cells.prefix");l("cells.suffix");l("cells.height");l("cells.line.width");l("cells.line.color");l("cells.fill.color");n.coerceFont(l,"cells.font",n.extendFlat({},r.font));
g._length=null}},{"../../lib":803,"../../plots/domain":882,"./attributes":1347}],1354:[function(b,N,G){N.exports={attributes:b("./attributes"),supplyDefaults:b("./defaults"),calc:b("./calc"),plot:b("./plot"),moduleType:"trace",name:"table",basePlotModule:b("./base_plot"),categories:["noOpacity"],meta:{}}},{"./attributes":1347,"./base_plot":1348,"./calc":1349,"./defaults":1353,"./plot":1355}],1355:[function(b,N,G){function p(ja){return Math.ceil(ja.calcdata.maxLineWidth/2)}function n(ja,ma){return"clip"+
ja._fullLayout._uid+"_columnBoundaryClippath_"+ma.calcdata.key+"_"+ma.specIndex}function k(ja){return[].concat.apply([],ja.map(function(ma){return ma})).map(function(ma){return ma.__data__})}function m(ja,ma,ia){var ra=ja.selectAll("."+O.cn.scrollbarKit).data(Q.repeat,Q.keyFun);ra.enter().append("g").classed(O.cn.scrollbarKit,!0).style("shape-rendering","geometricPrecision");ra.each(function(pa){var la=pa.scrollbarState;var ka=pa.rowBlocks;ka=M(ka,ka.length-1)+(ka.length?H(ka[ka.length-1],Infinity):
1);la.totalHeight=ka;la.scrollableAreaHeight=pa.groupHeight-B(pa);la.currentlyVisibleHeight=Math.min(la.totalHeight,la.scrollableAreaHeight);la.ratio=la.currentlyVisibleHeight/la.totalHeight;la.barLength=Math.max(la.ratio*la.currentlyVisibleHeight,O.goldenRatio*O.scrollbarWidth);la.barWiggleRoom=la.currentlyVisibleHeight-la.barLength;la.wiggleRoom=Math.max(0,la.totalHeight-la.scrollableAreaHeight);la.topY=0===la.barWiggleRoom?0:pa.scrollY/la.wiggleRoom*la.barWiggleRoom;la.bottomY=la.topY+la.barLength;
la.dragMultiplier=la.wiggleRoom/la.barWiggleRoom}).attr("transform",function(pa){return S(pa.width+O.scrollbarWidth/2+O.scrollbarOffset,B(pa))});ra=ra.selectAll("."+O.cn.scrollbar).data(Q.repeat,Q.keyFun);ra.enter().append("g").classed(O.cn.scrollbar,!0);var wa=ra.selectAll("."+O.cn.scrollbarSlider).data(Q.repeat,Q.keyFun);wa.enter().append("g").classed(O.cn.scrollbarSlider,!0);wa.attr("transform",function(pa){return S(0,pa.scrollbarState.topY||0)});wa=wa.selectAll("."+O.cn.scrollbarGlyph).data(Q.repeat,
Q.keyFun);wa.enter().append("line").classed(O.cn.scrollbarGlyph,!0).attr("stroke","black").attr("stroke-width",O.scrollbarWidth).attr("stroke-linecap","round").attr("y1",O.scrollbarWidth/2);wa.attr("y2",function(pa){return pa.scrollbarState.barLength-O.scrollbarWidth/2}).attr("stroke-opacity",function(pa){return pa.columnDragInProgress||!pa.scrollbarState.barWiggleRoom||ia?0:.4});wa.transition().delay(0).duration(0);wa.transition().delay(O.scrollbarHideDelay).duration(O.scrollbarHideDuration).attr("stroke-opacity",
0);ra=ra.selectAll("."+O.cn.scrollbarCaptureZone).data(Q.repeat,Q.keyFun);ra.enter().append("line").classed(O.cn.scrollbarCaptureZone,!0).attr("stroke","white").attr("stroke-opacity",.01).attr("stroke-width",O.scrollbarCaptureWidth).attr("stroke-linecap","butt").attr("y1",0).on("mousedown",function(pa){var la=I.event.y,ka=this.getBoundingClientRect(),na=pa.scrollbarState;la-=ka.top;ka=I.scale.linear().domain([0,na.scrollableAreaHeight]).range([0,na.totalHeight]).clamp(!0);na.topY<=la&&la<=na.bottomY||
C(ma,ja,null,ka(la-na.barLength/2))(pa)}).call(I.behavior.drag().origin(function(pa){I.event.stopPropagation();pa.scrollbarState.scrollbarScrollInProgress=!0;return pa}).on("drag",C(ma,ja)).on("dragend",function(){}));ra.attr("y2",function(pa){return pa.scrollbarState.scrollableAreaHeight});ma._context.staticPlot&&(wa.remove(),ra.remove())}function a(ja,ma,ia,ra){ia=ia.selectAll("."+O.cn.columnCells).data(Q.repeat,Q.keyFun);ia.enter().append("g").classed(O.cn.columnCells,!0);ia.exit().remove();ia=
g(ia);c(ia);var wa=h(ia);e(wa);wa=l(ia);wa=r(wa);d(wa);f(wa,ma,ra,ja);K(ia)}function g(ja){ja=ja.selectAll("."+O.cn.columnCell).data(W.splitToCells,function(ma){return ma.keyWithinBlock});ja.enter().append("g").classed(O.cn.columnCell,!0);ja.exit().remove();return ja}function h(ja){ja=ja.selectAll("."+O.cn.cellRect).data(Q.repeat,function(ma){return ma.keyWithinBlock});ja.enter().append("rect").classed(O.cn.cellRect,!0);return ja}function r(ja){ja=ja.selectAll("."+O.cn.cellText).data(Q.repeat,function(ma){return ma.keyWithinBlock});
ja.enter().append("text").classed(O.cn.cellText,!0).style("cursor",function(){return"auto"}).on("mousedown",function(){I.event.stopPropagation()});return ja}function l(ja){ja=ja.selectAll("."+O.cn.cellTextHolder).data(Q.repeat,function(ma){return ma.keyWithinBlock});ja.enter().append("g").classed(O.cn.cellTextHolder,!0).style("shape-rendering","geometricPrecision");return ja}function c(ja){ja.each(function(ma,ia){var ra=ma.calcdata.cells.font,wa=ma.column.specIndex;ra={size:t(ra.size,wa,ia),color:t(ra.color,
wa,ia),family:t(ra.family,wa,ia)};ma.rowNumber=ma.key;ma.align=t(ma.calcdata.cells.align,wa,ia);ma.cellBorderWidth=t(ma.calcdata.cells.line.width,wa,ia);ma.font=ra})}function d(ja){ja.each(function(ma){Z.font(I.select(this),ma.font)})}function e(ja){ja.attr("width",function(ma){return ma.column.columnWidth}).attr("stroke-width",function(ma){return ma.cellBorderWidth}).each(function(ma){var ia=I.select(this);aa.stroke(ia,t(ma.calcdata.cells.line.color,ma.column.specIndex,ma.rowNumber));aa.fill(ia,
t(ma.calcdata.cells.fill.color,ma.column.specIndex,ma.rowNumber))})}function f(ja,ma,ia,ra){ja.text(function(wa){var pa=wa.column.specIndex,la=wa.rowNumber,ka=wa.value,na="string"===typeof ka,oa=na&&ka.match(/<br>/i),sa=!na||oa;wa.mayHaveMarkup=na&&ka.match(/[<&>]/);ka="string"===typeof ka&&ka.match(O.latexCheck);na=(wa.latex=ka)?"":t(wa.calcdata.cells.prefix,pa,la)||"";var za=ka?"":t(wa.calcdata.cells.suffix,pa,la)||"";pa=ka?null:t(wa.calcdata.cells.format,pa,la)||null;pa=na+(pa?L(pa)(wa.value):
wa.value)+za;var Ha;wa.wrappingNeeded=!wa.wrapped&&!sa&&!ka&&(Ha=-1!==pa.indexOf(O.wrapSplitCharacter));wa.cellHeightMayIncrease=oa||ka||wa.mayHaveMarkup||(void 0===Ha?-1!==pa.indexOf(O.wrapSplitCharacter):Ha);wa.needsConvertToTspans=wa.mayHaveMarkup||wa.wrappingNeeded||wa.latex;wa.wrappingNeeded?(oa=(" "===O.wrapSplitCharacter?pa.replace(/<a href=/ig,"\x3ca_href\x3d"):pa).split(O.wrapSplitCharacter),oa=" "===O.wrapSplitCharacter?oa.map(function(Wa){return Wa.replace(/<a_href=/ig,"\x3ca href\x3d")}):
oa,wa.fragments=oa.map(function(Wa){return{text:Wa,width:null}}),wa.fragments.push({fragment:O.wrapSpacer,width:null}),wa=oa.join(O.lineBreaker)+O.lineBreaker+O.wrapSpacer):(delete wa.fragments,wa=pa);return wa}).attr("dy",function(wa){return wa.needsConvertToTspans?0:"0.75em"}).each(function(wa){var pa=I.select(this),la=wa.wrappingNeeded?y:F;wa.needsConvertToTspans?ba.convertToTspans(pa,ra,la(ia,this,ma,ra,wa)):I.select(this.parentNode).attr("transform",function(ka){return S(J(ka),O.cellPad)}).attr("text-anchor",
function(ka){return{left:"start",center:"middle",right:"end"}[ka.align]})})}function q(ja,ma,ia){var ra=ma.gdColumnsOriginalOrder;ma.gdColumns.sort(function(wa,pa){return ia[ra.indexOf(wa)]-ia[ra.indexOf(pa)]});ma.columnorder=ia;ja.emit("plotly_restyle")}function t(ja,ma,ia){return Array.isArray(ja)?(ja=ja[Math.min(ma,ja.length-1)],Array.isArray(ja)?ja[Math.min(ia,ja.length-1)]:ja):ja}function w(ja,ma,ia){ja.transition().ease(O.releaseTransitionEase).duration(O.releaseTransitionDuration).attr("transform",
S(ma.x,ia))}function x(ja){return"cells"===ja.type}function z(ja){return"header"===ja.type}function B(ja){return(ja.rowBlocks.length?ja.rowBlocks[0].auxiliaryBlocks:[]).reduce(function(ma,ia){return ma+H(ia,Infinity)},0)}function A(ja,ma,ia){for(var ra=[],wa=0,pa=0;pa<ja.length;pa++){for(var la=ja[pa],ka=la.rows,na=0,oa=0;oa<ka.length;oa++)na+=ka[oa].rowHeight;la.allRowsHeight=na;la=ma;ka=la+ia;la<wa+na&&ka>wa&&ra.push(pa);wa+=na}return ra}function D(ja,ma,ia){var ra=k(ma)[0];if(void 0!==ra){var wa=
ra.rowBlocks,pa=ra.calcdata,la=M(wa,wa.length),ka=ra.calcdata.groupHeight-B(ra),na=pa.scrollY=Math.max(0,Math.min(la-ka,pa.scrollY)),oa=A(wa,na,ka);1===oa.length&&(oa[0]===wa.length-1?oa.unshift(oa[0]-1):oa.push(oa[0]+1));oa[0]%2&&oa.reverse();ma.each(function(sa,za){sa.page=oa[za];sa.scrollY=na});ma.attr("transform",function(sa){sa=M(sa.rowBlocks,sa.page)-sa.scrollY;return S(0,sa)});ja&&(v(ja,ia,ma,oa,ra.prevPages,ra,0),v(ja,ia,ma,oa,ra.prevPages,ra,1),m(ia,ja))}}function C(ja,ma,ia,ra){return function(wa){var pa=
wa.calcdata?wa.calcdata:wa;wa=ma.filter(function(na){return pa.key===na.key});var la=ia||pa.scrollbarState.dragMultiplier,ka=pa.scrollY;pa.scrollY=void 0===ra?pa.scrollY+la*I.event.dy:ra;la=wa.selectAll("."+O.cn.yColumn).selectAll("."+O.cn.columnBlock).filter(x);D(ja,la,wa);return pa.scrollY===ka}}function v(ja,ma,ia,ra,wa,pa,la){ra[la]!==wa[la]&&(clearTimeout(pa.currentRepaint[la]),pa.currentRepaint[la]=setTimeout(function(){var ka=ia.filter(function(na,oa){return oa===la&&ra[oa]!==wa[oa]});a(ja,
ma,ka,ia);wa[la]=ra[la]}))}function y(ja,ma,ia,ra){return function(){var wa=I.select(ma.parentNode);wa.each(function(pa){var la=pa.fragments;wa.selectAll("tspan.line").each(function(Za,bb){la[bb].width=this.getComputedTextLength()});var ka=la[la.length-1].width,na=la.slice(0,-1),oa=[],sa=0,za=pa.column.columnWidth-2*O.cellPad;for(pa.value="";na.length;){var Ha=na.shift();var Wa=Ha.width+ka;sa+Wa>za&&(pa.value+=oa.join(O.wrapSpacer)+O.lineBreaker,oa=[],sa=0);oa.push(Ha.text);sa+=Wa}sa&&(pa.value+=
oa.join(O.wrapSpacer));pa.wrapped=!0});wa.selectAll("tspan.line").remove();f(wa.select("."+O.cn.cellText),ia,ja,ra);I.select(ma.parentNode.parentNode).call(K)}}function F(ja,ma,ia,ra,wa){return function(){if(!wa.settledY){var pa=I.select(ma.parentNode),la=wa.rowBlocks[wa.page],ka=wa.key-la.firstRowIndex,na=la.rows[ka].rowHeight,oa=wa.cellHeightMayIncrease?ma.parentNode.getBoundingClientRect().height+2*O.cellPad:na;na=Math.max(oa,na);na-la.rows[ka].rowHeight&&(la.rows[ka].rowHeight=na,ja.selectAll("."+
O.cn.columnCell).call(K),D(null,ja.filter(x),0),m(ia,ra,!0));pa.attr("transform",function(){var sa=this.parentNode.getBoundingClientRect(),za=I.select(this.parentNode).select("."+O.cn.cellRect).node().getBoundingClientRect(),Ha=this.transform.baseVal.consolidate();sa=za.top-sa.top+(Ha?Ha.matrix.f:O.cellPad);return S(J(wa,I.select(this.parentNode).select("."+O.cn.cellTextHolder).node().getBoundingClientRect().width),sa)});wa.settledY=!0}}}function J(ja,ma){switch(ja.align){case "left":return O.cellPad;
case "right":return ja.column.columnWidth-(ma||0)-O.cellPad;case "center":return(ja.column.columnWidth-(ma||0))/2;default:return O.cellPad}}function K(ja){ja.attr("transform",function(ma){var ia=ma.rowBlocks[0].auxiliaryBlocks.reduce(function(ra,wa){return ra+H(wa,Infinity)},0);ma=H(ma.rowBlocks[ma.page],ma.key);return S(0,ma+ia)}).selectAll("."+O.cn.cellRect).attr("height",function(ma){var ia=ma.rowBlocks[ma.page];return ia.rows[ma.key-ia.firstRowIndex].rowHeight})}function M(ja,ma){var ia=0;for(--ma;0<=
ma;ma--){var ra=ja[ma];var wa=ra.allRowsHeight;if(void 0!==wa)ra=wa;else{for(var pa=wa=0;pa<ra.rows.length;pa++)wa+=ra.rows[pa].rowHeight;ra=ra.allRowsHeight=wa}ia+=ra}return ia}function H(ja,ma){for(var ia=0,ra=0;ra<ja.rows.length&&ja.rows[ra].rowIndex<ma;ra++)ia+=ja.rows[ra].rowHeight;return ia}var O=b("./constants"),I=b("@plotly/d3"),L=b("../../lib").numberFormat,Q=b("../../lib/gup"),Z=b("../../components/drawing"),ba=b("../../lib/svg_text_utils"),V=b("../../lib").raiseToTop,S=b("../../lib").strTranslate,
T=b("../../lib").cancelTransition,fa=b("./data_preparation_helper"),W=b("./data_split_helpers"),aa=b("../../components/color");N.exports=function(ja,ma){var ia=!ja._context.staticPlot;ma=ja._fullLayout._paper.selectAll("."+O.cn.table).data(ma.map(function(ka){ka=Q.unwrap(ka).trace;return fa(ja,ka)}),Q.keyFun);ma.exit().remove();ma.enter().append("g").classed(O.cn.table,!0).attr("overflow","visible").style("box-sizing","content-box").style("position","absolute").style("left",0).style("overflow","visible").style("shape-rendering",
"crispEdges").style("pointer-events","all");ma.attr("width",function(ka){return ka.width+ka.size.l+ka.size.r}).attr("height",function(ka){return ka.height+ka.size.t+ka.size.b}).attr("transform",function(ka){return S(ka.translateX,ka.translateY)});var ra=ma.selectAll("."+O.cn.tableControlView).data(Q.repeat,Q.keyFun);ma=ra.enter().append("g").classed(O.cn.tableControlView,!0).style("box-sizing","content-box");if(ia){var wa="onwheel"in document?"wheel":"mousewheel";ma.on("mousemove",function(ka){ra.filter(function(na){return ka===
na}).call(m,ja)}).on(wa,function(ka){ka.scrollbarState.wheeling||(ka.scrollbarState.wheeling=!0,C(ja,ra,null,ka.scrollY+I.event.deltaY)(ka)||(I.event.stopPropagation(),I.event.preventDefault()),ka.scrollbarState.wheeling=!1)}).call(m,ja,!0)}ra.attr("transform",function(ka){return S(ka.size.l,ka.size.t)});ma=ra.selectAll("."+O.cn.scrollBackground).data(Q.repeat,Q.keyFun);ma.enter().append("rect").classed(O.cn.scrollBackground,!0).attr("fill","none");ma.attr("width",function(ka){return ka.width}).attr("height",
function(ka){return ka.height});ra.each(function(ka){Z.setClipUrl(I.select(this),"clip"+ja._fullLayout._uid+"_scrollAreaBottomClip_"+ka.key,ja)});var pa=ra.selectAll("."+O.cn.yColumn).data(function(ka){return ka.columns},Q.keyFun);pa.enter().append("g").classed(O.cn.yColumn,!0);pa.exit().remove();pa.attr("transform",function(ka){return S(ka.x,0)});ia&&pa.call(I.behavior.drag().origin(function(ka){var na=I.select(this);w(na,ka,-O.uplift);V(this);ka.calcdata.columnDragInProgress=!0;m(ra.filter(function(oa){return ka.calcdata.key===
oa.key}),ja);return ka}).on("drag",function(ka){var na=I.select(this);ka.x=Math.max(-O.overdrag,Math.min(ka.calcdata.width+O.overdrag-ka.columnWidth,I.event.x));k(pa).filter(function(oa){return oa.calcdata.key===ka.calcdata.key}).sort(function(oa,sa){return(ka===oa?I.event.x:oa.x)+oa.columnWidth/2-((ka===sa?I.event.x:sa.x)+sa.columnWidth/2)}).forEach(function(oa,sa){oa.xIndex=sa;oa.x=ka===oa?oa.x:oa.xScale(oa)});pa.filter(function(oa){return ka!==oa}).transition().ease(O.transitionEase).duration(O.transitionDuration).attr("transform",
function(oa){return S(oa.x,0)});na.call(T).attr("transform",S(ka.x,-O.uplift))}).on("dragend",function(ka){var na=I.select(this),oa=ka.calcdata;ka.x=ka.xScale(ka);ka.calcdata.columnDragInProgress=!1;w(na,ka,0);q(ja,oa,oa.columns.map(function(sa){return sa.xIndex}))}));pa.each(function(ka){Z.setClipUrl(I.select(this),n(ja,ka),ja)});wa=pa.selectAll("."+O.cn.columnBlock).data(W.splitToPanels,Q.keyFun);wa.enter().append("g").classed(O.cn.columnBlock,!0).attr("id",function(ka){return ka.key});wa.style("cursor",
function(ka){return ka.dragHandle?"ew-resize":ka.calcdata.scrollbarState.barWiggleRoom?"ns-resize":"default"});var la=wa.filter(z);ma=wa.filter(x);ia&&ma.call(I.behavior.drag().origin(function(ka){I.event.stopPropagation();return ka}).on("drag",C(ja,ra,-1)).on("dragend",function(){}));a(ja,ra,la,wa);a(ja,ra,ma,wa);ia=ra.selectAll("."+O.cn.scrollAreaClip).data(Q.repeat,Q.keyFun);ia.enter().append("clipPath").classed(O.cn.scrollAreaClip,!0).attr("id",function(ka){return"clip"+ja._fullLayout._uid+"_scrollAreaBottomClip_"+
ka.key});ia=ia.selectAll("."+O.cn.scrollAreaClipRect).data(Q.repeat,Q.keyFun);ia.enter().append("rect").classed(O.cn.scrollAreaClipRect,!0).attr("x",-O.overdrag).attr("y",-O.uplift).attr("fill","none");ia.attr("width",function(ka){return ka.width+2*O.overdrag}).attr("height",function(ka){return ka.height+O.uplift});pa.selectAll("."+O.cn.columnBoundary).data(Q.repeat,Q.keyFun).enter().append("g").classed(O.cn.columnBoundary,!0);ia=pa.selectAll("."+O.cn.columnBoundaryClippath).data(Q.repeat,Q.keyFun);
ia.enter().append("clipPath").classed(O.cn.columnBoundaryClippath,!0);ia.attr("id",function(ka){return n(ja,ka)});ia=ia.selectAll("."+O.cn.columnBoundaryRect).data(Q.repeat,Q.keyFun);ia.enter().append("rect").classed(O.cn.columnBoundaryRect,!0).attr("fill","none");ia.attr("width",function(ka){return ka.columnWidth+2*p(ka)}).attr("height",function(ka){return ka.calcdata.height+2*p(ka)+O.uplift}).attr("x",function(ka){return-p(ka)}).attr("y",function(ka){return-p(ka)});D(null,ma,ra)}},{"../../components/color":666,
"../../components/drawing":688,"../../lib":803,"../../lib/gup":800,"../../lib/svg_text_utils":829,"./constants":1350,"./data_preparation_helper":1351,"./data_split_helpers":1352,"@plotly/d3":58}],1356:[function(b,N,G){G=b("../../plots/template_attributes").hovertemplateAttrs;var p=b("../../plots/template_attributes").texttemplateAttrs,n=b("../../components/colorscale/attributes"),k=b("../../plots/domain").attributes,m=b("../pie/attributes"),a=b("../sunburst/attributes"),g=b("./constants");b=b("../../lib/extend").extendFlat;
N.exports={labels:a.labels,parents:a.parents,values:a.values,branchvalues:a.branchvalues,count:a.count,level:a.level,maxdepth:a.maxdepth,tiling:{packing:{valType:"enumerated",values:"squarify binary dice slice slice-dice dice-slice".split(" "),dflt:"squarify",editType:"plot"},squarifyratio:{valType:"number",min:1,dflt:1,editType:"plot"},flip:{valType:"flaglist",flags:["x","y"],dflt:"",editType:"plot"},pad:{valType:"number",min:0,dflt:3,editType:"plot"},editType:"calc"},marker:b({pad:{t:{valType:"number",
min:0,editType:"plot"},l:{valType:"number",min:0,editType:"plot"},r:{valType:"number",min:0,editType:"plot"},b:{valType:"number",min:0,editType:"plot"},editType:"calc"},colors:a.marker.colors,depthfade:{valType:"enumerated",values:[!0,!1,"reversed"],editType:"style"},line:a.marker.line,editType:"calc"},n("marker",{colorAttr:"colors",anim:!1})),pathbar:{visible:{valType:"boolean",dflt:!0,editType:"plot"},side:{valType:"enumerated",values:["top","bottom"],dflt:"top",editType:"plot"},edgeshape:{valType:"enumerated",
values:["\x3e","\x3c","|","/","\\"],dflt:"\x3e",editType:"plot"},thickness:{valType:"number",min:12,editType:"plot"},textfont:b({},m.textfont,{}),editType:"calc"},text:m.text,textinfo:a.textinfo,texttemplate:p({editType:"plot"},{keys:g.eventDataKeys.concat(["label","value"])}),hovertext:m.hovertext,hoverinfo:a.hoverinfo,hovertemplate:G({},{keys:g.eventDataKeys}),textfont:m.textfont,insidetextfont:m.insidetextfont,outsidetextfont:b({},m.outsidetextfont,{}),textposition:{valType:"enumerated",values:"top left;top center;top right;middle left;middle center;middle right;bottom left;bottom center;bottom right".split(";"),
dflt:"top left",editType:"plot"},sort:m.sort,root:a.root,domain:k({name:"treemap",trace:!0,editType:"calc"})}},{"../../components/colorscale/attributes":673,"../../lib/extend":793,"../../plots/domain":882,"../../plots/template_attributes":926,"../pie/attributes":1192,"../sunburst/attributes":1330,"./constants":1359}],1357:[function(b,N,G){var p=b("../../plots/plots");G.name="treemap";G.plot=function(n,k,m,a){p.plotBasePlot(G.name,n,k,m,a)};G.clean=function(n,k,m,a){p.cleanBasePlot(G.name,n,k,m,a)}},
{"../../plots/plots":917}],1358:[function(b,N,G){var p=b("../sunburst/calc");G.calc=function(n,k){return p.calc(n,k)};G.crossTraceCalc=function(n){return p._runCrossTraceCalc("treemap",n)}},{"../sunburst/calc":1332}],1359:[function(b,N,G){N.exports={CLICK_TRANSITION_TIME:750,CLICK_TRANSITION_EASING:"poly",eventDataKeys:"currentPath root entry percentRoot percentEntry percentParent".split(" "),gapWithPathbar:1}},{}],1360:[function(b,N,G){var p=b("../../lib"),n=b("./attributes"),k=b("../../components/color"),
m=b("../../plots/domain").defaults,a=b("../bar/defaults").handleText,g=b("../bar/constants").TEXTPAD;b=b("../../components/colorscale");var h=b.hasColorscale,r=b.handleDefaults;N.exports=function(l,c,d,e){function f(w,x){return p.coerce(l,c,n,w,x)}d=f("labels");var q=f("parents");if(d&&d.length&&q&&q.length){(d=f("values"))&&d.length?f("branchvalues"):f("count");f("level");f("maxdepth");"squarify"===f("tiling.packing")&&f("tiling.squarifyratio");f("tiling.flip");f("tiling.pad");d=f("text");f("texttemplate");
c.texttemplate||f("textinfo",Array.isArray(d)?"text+label":"label");f("hovertext");f("hovertemplate");d=f("pathbar.visible");a(l,c,e,f,"auto",{hasPathbar:d,moduleHasSelected:!1,moduleHasUnselected:!1,moduleHasConstrain:!1,moduleHasCliponaxis:!1,moduleHasTextangle:!1,moduleHasInsideanchor:!1});f("textposition");q=-1!==c.textposition.indexOf("bottom");f("marker.line.width")&&f("marker.line.color",e.paper_bgcolor);var t=f("marker.colors");(c._hasColorscale=h(l,"marker","colors")||(l.marker||{}).coloraxis)?
r(l,c,e,f,{prefix:"marker.",cLetter:"c"}):f("marker.depthfade",!(t||[]).length);t=2*c.textfont.size;f("marker.pad.t",q?t/4:t);f("marker.pad.l",t/4);f("marker.pad.r",t/4);f("marker.pad.b",q?t:t/4);c._hovered={marker:{line:{width:2,color:k.contrast(e.paper_bgcolor)}}};d&&(f("pathbar.thickness",c.pathbar.textfont.size+2*g),f("pathbar.side"),f("pathbar.edgeshape"));f("sort");f("root.color");m(c,e,f);c._length=null}else c.visible=!1}},{"../../components/color":666,"../../components/colorscale":678,"../../lib":803,
"../../plots/domain":882,"../bar/constants":943,"../bar/defaults":945,"./attributes":1356}],1361:[function(b,N,G){var p=b("@plotly/d3"),n=b("../sunburst/helpers"),k=b("../bar/uniform_text").clearMinTextSize,m=b("../bar/style").resizeText,a=b("./plot_one");N.exports=function(g,h,r,l,c){var d=c.type,e=c.drawDescendants;c=g._fullLayout;var f=c["_"+d+"layer"],q,t=!r;k(d,c);h=f.selectAll("g.trace."+d).data(h,function(w){return w[0].trace.uid});h.enter().append("g").classed("trace",!0).classed(d,!0);h.order();
!c.uniformtext.mode&&n.hasTransition(r)?(l&&(q=l()),p.transition().duration(r.duration).ease(r.easing).each("end",function(){q&&q()}).each("interrupt",function(){q&&q()}).each(function(){f.selectAll("g.trace").each(function(w){a(g,w,this,r,e)})})):(h.each(function(w){a(g,w,this,r,e)}),c.uniformtext.mode&&m(g,f.selectAll(".trace"),d));t&&h.exit().remove()}},{"../bar/style":955,"../bar/uniform_text":957,"../sunburst/helpers":1336,"./plot_one":1370,"@plotly/d3":58}],1362:[function(b,N,G){var p=b("@plotly/d3"),
n=b("../../lib"),k=b("../../components/drawing"),m=b("../../lib/svg_text_utils"),a=b("./partition"),g=b("./style").styleOne,h=b("./constants"),r=b("../sunburst/helpers"),l=b("../sunburst/fx");N.exports=function(c,d,e,f,q){var t=q.barDifY,w=q.width,x=q.height,z=q.viewX,B=q.viewY,A=q.pathSlice,D=q.toMoveInsideSlice,C=q.strTransform,v=q.hasTransition,y=q.handleSlicesExit,F=q.makeUpdateSliceInterpolator,J=q.makeUpdateTextInterpolator,K={},M=c._fullLayout;q=d[0];var H=q.trace;q=q.hierarchy;var O=w/H._entryDepth,
I=r.listPath(e.data,"id");q=a(q.copy(),[w,x],{packing:"dice",pad:{inner:0,top:0,left:0,right:0,bottom:0}}).descendants();q=q.filter(function(L){var Q=I.indexOf(L.data.id);if(-1===Q)return!1;L.x0=O*Q;L.x1=O*(Q+1);L.y0=t;L.y1=t+x;return L.onPathbar=!0});q.reverse();f=f.data(q,r.getPtId);f.enter().append("g").classed("pathbar",!0);y(f,!0,K,[w,x],A);f.order();v&&(f=f.transition().each("end",function(){var L=p.select(this);r.setSliceCursor(L,c,{hideOnRoot:!1,hideOnLeaves:!1,isTransitioning:!1})}));f.each(function(L){L._hoverX=
z(L.x1-Math.min(w,x)/2);L._hoverY=B(L.y1-x/2);var Q=p.select(this),Z=n.ensureSingle(Q,"path","surface",function(ba){ba.style("pointer-events","all")});v?Z.transition().attrTween("d",function(ba){var V=F(ba,!0,K,[w,x]);return function(S){return A(V(S))}}):Z.attr("d",A);Q.call(l,e,c,d,{styleOne:g,eventDataKeys:h.eventDataKeys,transitionTime:h.CLICK_TRANSITION_TIME,transitionEasing:h.CLICK_TRANSITION_EASING}).call(r.setSliceCursor,c,{hideOnRoot:!1,hideOnLeaves:!1,isTransitioning:c._transitioning});Z.call(g,
L,H,{hovered:!1});L._text=(r.getPtLabel(L)||"").split("\x3cbr\x3e").join(" ")||"";Q=n.ensureSingle(Q,"g","slicetext");Q=n.ensureSingle(Q,"text","",function(ba){ba.attr("data-notex",1)});Z=n.ensureUniformFontSize(c,r.determineTextFont(H,L,M.font,{onPathbar:!0}));Q.text(L._text||" ").classed("slicetext",!0).attr("text-anchor","start").call(k.font,Z).call(m.convertToTspans,c);L.textBB=k.bBox(Q.node());L.transform=D(L,{fontSize:Z.size,onPathbar:!0});L.transform.fontSize=Z.size;v?Q.transition().attrTween("transform",
function(ba){var V=J(ba,!0,K,[w,x]);return function(S){return C(V(S))}}):Q.attr("transform",C(L))})}},{"../../components/drawing":688,"../../lib":803,"../../lib/svg_text_utils":829,"../sunburst/fx":1335,"../sunburst/helpers":1336,"./constants":1359,"./partition":1368,"./style":1371,"@plotly/d3":58}],1363:[function(b,N,G){var p=b("@plotly/d3"),n=b("../../lib"),k=b("../../components/drawing"),m=b("../../lib/svg_text_utils"),a=b("./partition"),g=b("./style").styleOne,h=b("./constants"),r=b("../sunburst/helpers"),
l=b("../sunburst/fx"),c=b("../sunburst/plot").formatSliceLabel;N.exports=function(d,e,f,q,t){var w=t.width,x=t.height,z=t.viewX,B=t.viewY,A=t.pathSlice,D=t.toMoveInsideSlice,C=t.strTransform,v=t.hasTransition,y=t.handleSlicesExit,F=t.makeUpdateSliceInterpolator,J=t.makeUpdateTextInterpolator;t=t.prevEntry;var K=d._fullLayout,M=e[0].trace,H=-1!==M.textposition.indexOf("left"),O=-1!==M.textposition.indexOf("right"),I=-1!==M.textposition.indexOf("bottom"),L=!I&&!M.marker.pad.t||I&&!M.marker.pad.b,Q=
a(f,[w,x],{packing:M.tiling.packing,squarifyratio:M.tiling.squarifyratio,flipX:-1<M.tiling.flip.indexOf("x"),flipY:-1<M.tiling.flip.indexOf("y"),pad:{inner:M.tiling.pad,top:M.marker.pad.t,left:M.marker.pad.l,right:M.marker.pad.r,bottom:M.marker.pad.b}}).descendants(),Z=Infinity,ba=-Infinity;Q.forEach(function(T){var fa=T.depth;fa>=M._maxDepth?(T.x0=T.x1=(T.x0+T.x1)/2,T.y0=T.y1=(T.y0+T.y1)/2):(Z=Math.min(Z,fa),ba=Math.max(ba,fa))});q=q.data(Q,r.getPtId);M._maxVisibleLayers=isFinite(ba)?ba-Z+1:0;q.enter().append("g").classed("slice",
!0);y(q,!1,{},[w,x],A);q.order();var V=null;if(v&&t){var S=r.getPtId(t);q.each(function(T){null===V&&r.getPtId(T)===S&&(V={x0:T.x0,x1:T.x1,y0:T.y0,y1:T.y1})})}v&&(q=q.transition().each("end",function(){var T=p.select(this);r.setSliceCursor(T,d,{hideOnRoot:!0,hideOnLeaves:!1,isTransitioning:!1})}));q.each(function(T){var fa=r.isHeader(T,M);T._hoverX=z(T.x1-M.marker.pad.r);T._hoverY=I?B(T.y1-M.marker.pad.b/2):B(T.y0+M.marker.pad.t/2);var W=p.select(this),aa=n.ensureSingle(W,"path","surface",function(ja){ja.style("pointer-events",
"all")});v?aa.transition().attrTween("d",function(ja){var ma=F(ja,!1,V||{x0:0,x1:w,y0:0,y1:x},[w,x]);return function(ia){return A(ma(ia))}}):aa.attr("d",A);W.call(l,f,d,e,{styleOne:g,eventDataKeys:h.eventDataKeys,transitionTime:h.CLICK_TRANSITION_TIME,transitionEasing:h.CLICK_TRANSITION_EASING}).call(r.setSliceCursor,d,{isTransitioning:d._transitioning});aa.call(g,T,M,{hovered:!1});T._text=T.x0===T.x1||T.y0===T.y1?"":fa?L?"":r.getPtLabel(T)||"":c(T,f,M,e,K)||"";W=n.ensureSingle(W,"g","slicetext");
W=n.ensureSingle(W,"text","",function(ja){ja.attr("data-notex",1)});aa=n.ensureUniformFontSize(d,r.determineTextFont(M,T,K.font));W.text(T._text||" ").classed("slicetext",!0).attr("text-anchor",O?"end":H||fa?"start":"middle").call(k.font,aa).call(m.convertToTspans,d);T.textBB=k.bBox(W.node());T.transform=D(T,{fontSize:aa.size,isHeader:fa});T.transform.fontSize=aa.size;v?W.transition().attrTween("transform",function(ja){var ma=J(ja,!1,V||{x0:0,x1:w,y0:0,y1:x},[w,x]);return function(ia){return C(ma(ia))}}):
W.attr("transform",C(T))});return V}},{"../../components/drawing":688,"../../lib":803,"../../lib/svg_text_utils":829,"../sunburst/fx":1335,"../sunburst/helpers":1336,"../sunburst/plot":1340,"./constants":1359,"./partition":1368,"./style":1371,"@plotly/d3":58}],1364:[function(b,N,G){N.exports=function a(n,k,m){if(m.swapXY){var g=n.x0;n.x0=n.y0;n.y0=g;g=n.x1;n.x1=n.y1;n.y1=g}m.flipX&&(g=n.x0,n.x0=k[0]-n.x1,n.x1=k[0]-g);m.flipY&&(g=n.y0,n.y0=k[1]-n.y1,n.y1=k[1]-g);if(n=n.children)for(g=0;g<n.length;g++)a(n[g],
k,m)}},{}],1365:[function(b,N,G){N.exports={moduleType:"trace",name:"treemap",basePlotModule:b("./base_plot"),categories:[],animatable:!0,attributes:b("./attributes"),layoutAttributes:b("./layout_attributes"),supplyDefaults:b("./defaults"),supplyLayoutDefaults:b("./layout_defaults"),calc:b("./calc").calc,crossTraceCalc:b("./calc").crossTraceCalc,plot:b("./plot"),style:b("./style").style,colorbar:b("../scatter/marker_colorbar"),meta:{}}},{"../scatter/marker_colorbar":1236,"./attributes":1356,"./base_plot":1357,
"./calc":1358,"./defaults":1360,"./layout_attributes":1366,"./layout_defaults":1367,"./plot":1369,"./style":1371}],1366:[function(b,N,G){N.exports={treemapcolorway:{valType:"colorlist",editType:"calc"},extendtreemapcolors:{valType:"boolean",dflt:!0,editType:"calc"}}},{}],1367:[function(b,N,G){var p=b("../../lib"),n=b("./layout_attributes");N.exports=function(k,m){p.coerce(k,m,n,"treemapcolorway",m.colorway);p.coerce(k,m,n,"extendtreemapcolors",void 0)}},{"../../lib":803,"./layout_attributes":1366}],
1368:[function(b,N,G){function p(m,a){switch(m){case "squarify":return n.treemapSquarify.ratio(a);case "binary":return n.treemapBinary;case "dice":return n.treemapDice;case "slice":return n.treemapSlice;default:return n.treemapSliceDice}}var n=b("d3-hierarchy"),k=b("./flip_tree");N.exports=function(m,a,g){var h=g.flipX,r=g.flipY,l="dice-slice"===g.packing,c=g.pad[r?"bottom":"top"],d=g.pad[h?"right":"left"],e=g.pad[h?"left":"right"],f=g.pad[r?"top":"bottom"];if(l){var q=d;d=c;c=q;q=e;e=f;f=q}m=n.treemap().tile(p(g.packing,
g.squarifyratio)).paddingInner(g.pad.inner).paddingLeft(d).paddingRight(e).paddingTop(c).paddingBottom(f).size(l?[a[1],a[0]]:a)(m);(l||h||r)&&k(m,a,{swapXY:l,flipX:h,flipY:r});return m}},{"./flip_tree":1364,"d3-hierarchy":170}],1369:[function(b,N,G){var p=b("./draw"),n=b("./draw_descendants");N.exports=function(k,m,a,g){return p(k,m,a,g,{type:"treemap",drawDescendants:n})}},{"./draw":1361,"./draw_descendants":1363}],1370:[function(b,N,G){function p(d){return m.isHierarchyRoot(d)?"":m.getPtId(d)}var n=
b("@plotly/d3"),k=b("d3-interpolate").interpolate,m=b("../sunburst/helpers"),a=b("../../lib"),g=b("../bar/constants").TEXTPAD,h=b("../bar/plot").toMoveInsideBar,r=b("../bar/uniform_text").recordMinTextSize,l=b("./constants"),c=b("./draw_ancestors");N.exports=function(d,e,f,q,t){var w=d._fullLayout,x=e[0],z=x.trace,B="icicle"===z.type,A=x.hierarchy,D=m.findEntryWithLevel(A,z.level),C=n.select(f);f=C.selectAll("g.pathbar");C=C.selectAll("g.slice");if(D){var v=m.isHierarchyRoot(D),y=!w.uniformtext.mode&&
m.hasTransition(q),F=m.getMaxDepth(z),J=w._size,K=z.domain,M=J.w*(K.x[1]-K.x[0]);q=J.h*(K.y[1]-K.y[0]);var H=z.pathbar.thickness,O=z.marker.line.width+l.gapWithPathbar;O=z.pathbar.visible?-1<z.pathbar.side.indexOf("bottom")?q+O:-(H+O):0;var I={x0:M,x1:M,y0:O,y1:O+H},L=function(oa,sa,za){var Ha=z.tiling.pad;return oa.x0===sa.x0&&oa.x1===sa.x1&&oa.y0===sa.y0&&oa.y1===sa.y1?{x0:oa.x0,x1:oa.x1,y0:oa.y0,y1:oa.y1}:{x0:oa.x0-Ha-Ha<=sa.x0?0:oa.x0-Ha+Ha>=sa.x1?za[0]:oa.x0,x1:oa.x1+Ha-Ha<=sa.x0?0:oa.x1+Ha+
Ha>=sa.x1?za[0]:oa.x1,y0:oa.y0-Ha-Ha<=sa.y0?0:oa.y0-Ha+Ha>=sa.y1?za[1]:oa.y0,y1:oa.y1+Ha-Ha<=sa.y0?0:oa.y1+Ha+Ha>=sa.y1?za[1]:oa.y1}},Q=null,Z={},ba={},V=null,S=function(oa,sa){return sa?Z[p(oa)]:ba[p(oa)]};x.hasMultipleRoots&&v&&F++;z._maxDepth=F;z._backgroundColor=w.paper_bgcolor;z._entryDepth=D.data.depth;z._atRootLevel=v;var T=-M/2+J.l+J.w*(K.x[1]+K.x[0])/2,fa=-q/2+J.t+J.h*(1-(K.y[1]+K.y[0])/2),W=fa+0,aa=T+0;x=function(oa){return aa+oa};v=function(oa){return W+oa};var ja=aa+0,ma=function(oa){oa.x=
Math.max(ja,oa.x)},ia=z.pathbar.edgeshape;J=function(oa){var sa=aa+Math.max(Math.min(oa.x0,oa.x0),0),za=aa+Math.min(Math.max(oa.x1,oa.x1),M),Ha=W+oa.y0,Wa=W+oa.y1;oa=H/2;var Za={},bb={};Za.x=sa;bb.x=za;Za.y=bb.y=(Ha+Wa)/2;var sb={x:sa,y:Ha};Ha={x:za,y:Ha};za={x:za,y:Wa};sa={x:sa,y:Wa};"\x3e"===ia?(sb.x-=oa,Ha.x-=oa,za.x-=oa,sa.x-=oa):"/"===ia?(za.x-=oa,sa.x-=oa,Za.x-=oa/2,bb.x-=oa/2):"\\"===ia?(sb.x-=oa,Ha.x-=oa,Za.x-=oa/2,bb.x-=oa/2):"\x3c"===ia&&(Za.x-=oa,bb.x-=oa);ma(sb);ma(sa);ma(Za);ma(Ha);ma(za);
ma(bb);return"M"+(sb.x+","+sb.y)+"L"+(Ha.x+","+Ha.y)+"L"+(bb.x+","+bb.y)+"L"+(za.x+","+za.y)+"L"+(sa.x+","+sa.y)+"L"+(Za.x+","+Za.y)+"Z"};var ra=function(oa,sa){var za=oa.x0,Ha=oa.x1,Wa=oa.y0,Za=oa.y1;oa=oa.textBB;var bb=-1!==z.textposition.indexOf("bottom"),sb=-1!==z.textposition.indexOf("top")||sa.isHeader&&!bb?"start":bb?"end":"middle",hb=-1!==z.textposition.indexOf("right"),ub=-1!==z.textposition.indexOf("left")||sa.onPathbar,pb=z[B?"tiling":"marker"].pad;sa.isHeader&&(za+=(B?pb:pb.l)-g,Ha-=(B?
pb:pb.r)-g,za>=Ha&&(za=Ha=(za+Ha)/2),bb?(bb=Za-(B?pb:pb.b),Wa<bb&&bb<Za&&(Wa=bb)):(bb=Wa+(B?pb:pb.t),Wa<bb&&bb<Za&&(Za=bb)));oa=h(za,Ha,Wa,Za,oa,{isHorizontal:!1,constrained:!0,angle:0,anchor:sb,leftToRight:ub?-1:hb?1:0});oa.fontSize=sa.fontSize;oa.targetX=T+oa.targetX;oa.targetY=fa+oa.targetY;if(isNaN(oa.targetX)||isNaN(oa.targetY))return{};za!==Ha&&Wa!==Za&&r(z.type,oa,w);return{scale:oa.scale,rotate:oa.rotate,textX:oa.textX,textY:oa.textY,anchorX:oa.anchorX,anchorY:oa.anchorY,targetX:oa.targetX,
targetY:oa.targetY}},wa=function(oa,sa){for(var za,Ha=0;!za&&Ha<F;)Ha++,(oa=oa.parent)?za=S(oa,sa):Ha=F;return za||{}},pa=function(oa,sa,za,Ha){za=S(oa,sa);oa=sa?I:(sa=S(D,sa))?L(oa,sa,Ha):{};return k(za,oa)};K=function(oa,sa,za,Ha,Wa){var Za=S(oa,sa);Za?Ha=Za:sa?Ha=I:Q?oa.parent?(Wa=V||za)&&!sa?Ha=L(oa,Wa,Ha):(Ha={},a.extendFlat(Ha,wa(oa,sa))):(Ha=a.extendFlat({},oa),B&&("h"===Wa.orientation?Wa.flipX?Ha.x0=oa.x1:Ha.x1=0:Wa.flipY?Ha.y0=oa.y1:Ha.y1=0)):Ha={};return k(Ha,{x0:oa.x0,x1:oa.x1,y0:oa.y0,
y1:oa.y1})};var la=function(oa,sa,za,Ha){var Wa=S(oa,sa),Za={};sa?Ha=Z[p(A)]||I:(za=ba[z.level]||za,Ha=oa.data.depth-D.data.depth<F?L(oa,za,Ha):{});a.extendFlat(Za,{transform:ra({x0:Ha.x0,x1:Ha.x1,y0:Ha.y0,y1:Ha.y1,textBB:oa.textBB,_text:oa._text},{isHeader:m.isHeader(oa,z)})});Wa?Za=Wa:oa.parent&&a.extendFlat(Za,wa(oa,sa));sa=oa.transform;oa.x0!==oa.x1&&oa.y0!==oa.y1&&r(z.type,sa,w);return k(Za,{transform:{scale:sa.scale,rotate:sa.rotate,textX:sa.textX,textY:sa.textY,anchorX:sa.anchorX,anchorY:sa.anchorY,
targetX:sa.targetX,targetY:sa.targetY}})},ka=function(oa,sa,za,Ha,Wa){var Za=Ha[0],bb=Ha[1];y?oa.exit().transition().each(function(){var sb=n.select(this);sb.select("path.surface").transition().attrTween("d",function(hb){var ub=pa(hb,sa,za,[Za,bb]);return function(pb){return Wa(ub(pb))}});sb.select("g.slicetext").attr("opacity",0)}).remove():oa.exit().remove()},na=function(oa){var sa=oa.transform;oa.x0!==oa.x1&&oa.y0!==oa.y1&&r(z.type,sa,w);return a.getTextTransform({textX:sa.textX,textY:sa.textY,
anchorX:sa.anchorX,anchorY:sa.anchorY,targetX:sa.targetX,targetY:sa.targetY,scale:sa.scale,rotate:sa.rotate})};y&&(f.each(function(oa){Z[p(oa)]={x0:oa.x0,x1:oa.x1,y0:oa.y0,y1:oa.y1};oa.transform&&(Z[p(oa)].transform={textX:oa.transform.textX,textY:oa.transform.textY,anchorX:oa.transform.anchorX,anchorY:oa.transform.anchorY,targetX:oa.transform.targetX,targetY:oa.transform.targetY,scale:oa.transform.scale,rotate:oa.transform.rotate})}),C.each(function(oa){ba[p(oa)]={x0:oa.x0,x1:oa.x1,y0:oa.y0,y1:oa.y1};
oa.transform&&(ba[p(oa)].transform={textX:oa.transform.textX,textY:oa.transform.textY,anchorX:oa.transform.anchorX,anchorY:oa.transform.anchorY,targetX:oa.transform.targetX,targetY:oa.transform.targetY,scale:oa.transform.scale,rotate:oa.transform.rotate});!Q&&m.isEntry(oa)&&(Q=oa)}));V=t(d,e,D,C,{width:M,height:q,viewX:function(oa){return T+oa},viewY:function(oa){return fa+oa},pathSlice:function(oa){var sa=T+oa.x0,za=T+oa.x1,Ha=fa+oa.y0;oa=fa+oa.y1;return za-sa&&oa-Ha?"M"+(sa+","+(Ha+0))+"L"+(za-
0+","+Ha)+"L"+(za+","+(oa-0))+"L"+(sa+0+","+oa)+"Z":""},toMoveInsideSlice:ra,prevEntry:Q,makeUpdateSliceInterpolator:K,makeUpdateTextInterpolator:la,handleSlicesExit:ka,hasTransition:y,strTransform:na});z.pathbar.visible?c(d,e,D,f,{barDifY:O,width:M,height:H,viewX:x,viewY:v,pathSlice:J,toMoveInsideSlice:ra,makeUpdateSliceInterpolator:K,makeUpdateTextInterpolator:la,handleSlicesExit:ka,hasTransition:y,strTransform:na}):f.remove()}else f.remove(),C.remove()}},{"../../lib":803,"../bar/constants":943,
"../bar/plot":952,"../bar/uniform_text":957,"../sunburst/helpers":1336,"./constants":1359,"./draw_ancestors":1362,"@plotly/d3":58,"d3-interpolate":171}],1371:[function(b,N,G){function p(h,r,l,c){var d=(c||{}).hovered;c=r.data.data;var e=c.i;c=c.color;var f=a.isHierarchyRoot(r),q=1;if(d)d=l._hovered.marker.line.color,e=l._hovered.marker.line.width;else if(f&&c===l.root.color)q=100,d="rgba(0,0,0,0)",e=0;else if(d=m.castOption(l,e,"marker.line.color")||k.defaultLine,e=m.castOption(l,e,"marker.line.width")||
0,!l._hasColorscale&&!r.onPathbar){var t=l.marker.depthfade;if(t&&(f=k.combine(k.addOpacity(l._backgroundColor,.75),c),!0===t?(t=a.getMaxDepth(l),r=isFinite(t)?a.isLeaf(r)?0:l._maxVisibleLayers-(r.data.depth-l._entryDepth):r.data.height+1):(r=r.data.depth-l._entryDepth,l._atRootLevel||r++),0<r))for(l=0;l<r;l++)c=k.combine(k.addOpacity(f,.5*l/r),c)}h.style("stroke-width",e).call(k.fill,c).call(k.stroke,d).style("opacity",q)}var n=b("@plotly/d3"),k=b("../../components/color"),m=b("../../lib"),a=b("../sunburst/helpers"),
g=b("../bar/uniform_text").resizeText;N.exports={style:function(h){var r=h._fullLayout._treemaplayer.selectAll(".trace");g(h,r,"treemap");r.each(function(l){var c=n.select(this),d=l[0].trace;c.style("opacity",d.opacity);c.selectAll("path.surface").each(function(e){n.select(this).call(p,e,d,{hovered:!1})})})},styleOne:p}},{"../../components/color":666,"../../lib":803,"../bar/uniform_text":957,"../sunburst/helpers":1336,"@plotly/d3":58}],1372:[function(b,N,G){G=b("../box/attributes");var p=b("../../lib/extend").extendFlat;
b=b("../../plots/cartesian/axis_format_attributes").axisHoverFormat;N.exports={y:G.y,x:G.x,x0:G.x0,y0:G.y0,xhoverformat:b("x"),yhoverformat:b("y"),name:p({},G.name,{}),orientation:p({},G.orientation,{}),bandwidth:{valType:"number",min:0,editType:"calc"},scalegroup:{valType:"string",dflt:"",editType:"calc"},scalemode:{valType:"enumerated",values:["width","count"],dflt:"width",editType:"calc"},spanmode:{valType:"enumerated",values:["soft","hard","manual"],dflt:"soft",editType:"calc"},span:{valType:"info_array",
items:[{valType:"any",editType:"calc"},{valType:"any",editType:"calc"}],editType:"calc"},line:{color:{valType:"color",editType:"style"},width:{valType:"number",min:0,dflt:2,editType:"style"},editType:"plot"},fillcolor:G.fillcolor,points:p({},G.boxpoints,{}),jitter:p({},G.jitter,{}),pointpos:p({},G.pointpos,{}),width:p({},G.width,{}),marker:G.marker,text:G.text,hovertext:G.hovertext,hovertemplate:G.hovertemplate,box:{visible:{valType:"boolean",dflt:!1,editType:"plot"},width:{valType:"number",min:0,
max:1,dflt:.25,editType:"plot"},fillcolor:{valType:"color",editType:"style"},line:{color:{valType:"color",editType:"style"},width:{valType:"number",min:0,editType:"style"},editType:"style"},editType:"plot"},meanline:{visible:{valType:"boolean",dflt:!1,editType:"plot"},color:{valType:"color",editType:"style"},width:{valType:"number",min:0,editType:"style"},editType:"plot"},side:{valType:"enumerated",values:["both","positive","negative"],dflt:"both",editType:"calc"},offsetgroup:G.offsetgroup,alignmentgroup:G.alignmentgroup,
selected:G.selected,unselected:G.unselected,hoveron:{valType:"flaglist",flags:["violins","points","kde"],dflt:"violins+points+kde",extras:["all"],editType:"style"}}},{"../../lib/extend":793,"../../plots/cartesian/axis_format_attributes":857,"../box/attributes":966}],1373:[function(b,N,G){function p(h,r,l,c){function d(w){var x=f[w];x="multicategory"===l.type?l.r2c(x):l.d2c(x,0,h[r.valLetter+"calendar"]);return x===g?t[w]:x}var e=h.spanmode,f=h.span||[],q=[r.min,r.max],t=[r.min-2*c,r.max+2*c];c="soft"===
e?t:"hard"===e?q:[d(0),d(1)];e={type:"linear",range:c};k.setConvert(e);e.cleanRange();return c}var n=b("../../lib"),k=b("../../plots/cartesian/axes"),m=b("../box/calc"),a=b("./helpers"),g=b("../../constants/numerical").BADNUM;N.exports=function(h,r){var l=m(h,r);if(l[0].t.empty)return l;for(var c=h._fullLayout,d=k.getFromId(h,r["h"===r.orientation?"xaxis":"yaxis"]),e=Infinity,f=-Infinity,q=0,t=0,w=0;w<l.length;w++){var x=l[w],z=x.pts.map(a.extractVal),B=x;var A=x;var D=A.max-A.min;if(D)if(r.bandwidth)A=
Math.max(r.bandwidth,D/1E4);else{var C=z.length,v=n.stdev(z,C-1,A.mean);A=Math.max(1.059*Math.min(v,(A.q3-A.q1)/1.349)*Math.pow(C,-.2),D/100)}else A=r.bandwidth?r.bandwidth:0;D=B.bandwidth=A;B=x.span=p(r,x,d,D);if(x.min===x.max&&0===D)B=x.span=[x.min,x.max],x.density=[{v:1,t:B[0]}],x.bandwidth=D,q=Math.max(q,1);else{A=B[1]-B[0];C=Math.ceil(A/(D/3));A/=C;if(!isFinite(A)||!isFinite(C))return n.error("Something went wrong with computing the violin span"),l[0].t.empty=!0,l;D=a.makeKDE(x,r,z);x.density=
Array(C);C=0;for(v=B[0];v<B[1]+A/2;C++,v+=A){var y=D(v);x.density[C]={v:y,t:v};q=Math.max(q,y)}}t=Math.max(t,z.length);e=Math.min(e,B[0]);f=Math.max(f,B[1])}e=k.findExtremes(d,[e,f],{padded:!0});r._extremes[d._id]=e;r.width?l[0].t.maxKDE=q:(c=c._violinScaleGroupStats,r=r.scalegroup,(d=c[r])?(d.maxKDE=Math.max(d.maxKDE,q),d.maxCount=Math.max(d.maxCount,t)):c[r]={maxKDE:q,maxCount:t});l[0].t.labels.kde=n._(h,"kde:");return l}},{"../../constants/numerical":779,"../../lib":803,"../../plots/cartesian/axes":854,
"../box/calc":967,"./helpers":1376}],1374:[function(b,N,G){var p=b("../box/cross_trace_calc").setPositionOffset,n=["v","h"];N.exports=function(k,m){var a=k.calcdata,g=m.xaxis;m=m.yaxis;for(var h=0;h<n.length;h++){for(var r=n[h],l="h"===r?m:g,c=[],d=0;d<a.length;d++){var e=a[d],f=e[0].t;e=e[0].trace;!0!==e.visible||"violin"!==e.type||f.empty||e.orientation!==r||e.xaxis!==g._id||e.yaxis!==m._id||c.push(d)}p("violin",k,c,l)}}},{"../box/cross_trace_calc":968}],1375:[function(b,N,G){var p=b("../../lib"),
n=b("../../components/color"),k=b("../box/defaults"),m=b("./attributes");N.exports=function(a,g,h,r){function l(t,w){return p.coerce(a,g,m,t,w)}function c(t,w){return p.coerce2(a,g,m,t,w)}k.handleSampleDefaults(a,g,l,r);if(!1!==g.visible){l("bandwidth");l("side");l("width")||(l("scalegroup",g.name),l("scalemode"));r=l("span");var d;Array.isArray(r)&&(d="manual");l("spanmode",d);d=l("line.color",(a.marker||{}).color||h);h=l("line.width");var e=l("fillcolor",n.addOpacity(g.line.color,.5));k.handlePointsDefaults(a,
g,l,{prefix:""});r=c("box.width");e=c("box.fillcolor",e);var f=c("box.line.color",d),q=c("box.line.width",h);l("box.visible",!!(r||e||f||q))||(g.box={visible:!1});d=c("meanline.color",d);h=c("meanline.width",h);l("meanline.visible",!(!d&&!h))||(g.meanline={visible:!1})}}},{"../../components/color":666,"../../lib":803,"../box/defaults":969,"./attributes":1372}],1376:[function(b,N,G){var p=b("../../lib");G.makeKDE=function(n,k,m){var a=m.length,g=n.bandwidth,h=1/(a*g);return function(r){for(var l=0,
c=0;c<a;c++){var d=(r-m[c])/g;l+=1/Math.sqrt(2*Math.PI)*Math.exp(-.5*d*d)}return h*l}};G.getPositionOnKdePath=function(n,k,m){if("h"===k.orientation){var a="y";var g="x"}else a="x",g="y";m=p.findPointOnPath(n.path,m,g,{pathLength:n.pathLength});n=n.posCenterPx;a=m[a];return[a,"both"===k.side?2*n-a:n]};G.getKdeValue=function(n,k,m){var a=n.pts.map(G.extractVal);return G.makeKDE(n,k,a)(m)/n.posDensityScale};G.extractVal=function(n){return n.v}},{"../../lib":803}],1377:[function(b,N,G){var p=b("../../lib"),
n=b("../../plots/cartesian/axes"),k=b("../box/hover"),m=b("./helpers");N.exports=function(a,g,h,r,l){l||(l={});var c=l.hoverLayer,d=a.cd;l=d[0].trace;var e=l.hoveron,f=-1!==e.indexOf("violins"),q=-1!==e.indexOf("kde"),t=[],w;if(f||q){var x=k.hoverOnBoxes(a,g,h,r);if(q&&0<x.length){var z=a.xa,B=a.ya;if("h"===l.orientation){var A=g;q="y";var D=B;var C="x"}else A=h,q="x",D=z,C="y",z=B;var v=d[a.index];if(A>=v.span[0]&&A<=v.span[1]){var y=p.extendFlat({},a);B=z.c2p(A,!0);var F=m.getKdeValue(v,l,A);v=
m.getPositionOnKdePath(v,l,B);var J=D._offset;D=D._length;y[q+"0"]=v[0];y[q+"1"]=v[1];y[C+"0"]=y[C+"1"]=B;y[C+"Label"]=C+": "+n.hoverLabelText(z,A,l[C+"hoverformat"])+", "+d[0].t.labels.kde+" "+F.toFixed(3);y.spikeDistance=x[0].spikeDistance;d=q+"Spike";y[d]=x[0][d];x[0].spikeDistance=void 0;x[0][d]=void 0;y.hovertemplate=!1;t.push(y);y={stroke:a.color};y[q+"1"]=p.constrain(J+v[0],J,J+D);y[q+"2"]=p.constrain(J+v[1],J,J+D);y[C+"1"]=y[C+"2"]=z._offset+B}}f&&(t=t.concat(x))}-1!==e.indexOf("points")&&
(w=k.hoverOnPoints(a,g,h));a=c.selectAll(".violinline-"+l.uid).data(y?[0]:[]);a.enter().append("line").classed("violinline-"+l.uid,!0).attr("stroke-width",1.5);a.exit().remove();a.attr(y);if("closest"===r)return w?[w]:t;w&&t.push(w);return t}},{"../../lib":803,"../../plots/cartesian/axes":854,"../box/hover":971,"./helpers":1376}],1378:[function(b,N,G){N.exports={attributes:b("./attributes"),layoutAttributes:b("./layout_attributes"),supplyDefaults:b("./defaults"),crossTraceDefaults:b("../box/defaults").crossTraceDefaults,
supplyLayoutDefaults:b("./layout_defaults"),calc:b("./calc"),crossTraceCalc:b("./cross_trace_calc"),plot:b("./plot"),style:b("./style"),styleOnSelect:b("../scatter/style").styleOnSelect,hoverPoints:b("./hover"),selectPoints:b("../box/select"),moduleType:"trace",name:"violin",basePlotModule:b("../../plots/cartesian"),categories:"cartesian svg symbols oriented box-violin showLegend violinLayout zoomScale".split(" "),meta:{}}},{"../../plots/cartesian":868,"../box/defaults":969,"../box/select":976,"../scatter/style":1242,
"./attributes":1372,"./calc":1373,"./cross_trace_calc":1374,"./defaults":1375,"./hover":1377,"./layout_attributes":1379,"./layout_defaults":1380,"./plot":1381,"./style":1382}],1379:[function(b,N,G){G=b("../box/layout_attributes");b=b("../../lib").extendFlat;N.exports={violinmode:b({},G.boxmode,{}),violingap:b({},G.boxgap,{}),violingroupgap:b({},G.boxgroupgap,{})}},{"../../lib":803,"../box/layout_attributes":973}],1380:[function(b,N,G){var p=b("../../lib"),n=b("./layout_attributes"),k=b("../box/layout_defaults");
N.exports=function(m,a,g){k._supply(m,a,g,function(h,r){return p.coerce(m,a,n,h,r)},"violin")}},{"../../lib":803,"../box/layout_defaults":974,"./layout_attributes":1379}],1381:[function(b,N,G){var p=b("@plotly/d3"),n=b("../../lib"),k=b("../../components/drawing"),m=b("../box/plot"),a=b("../scatter/line_points"),g=b("./helpers");N.exports=function(h,r,l,c){function d(t){t=a(t,{xaxis:f,yaxis:q,connectGaps:!0,baseTolerance:.75,shape:"spline",simplify:!0,linearized:!0});return k.smoothopen(t[0],1)}var e=
h._fullLayout,f=r.xaxis,q=r.yaxis;n.makeTraceGroups(c,l,"trace violins").each(function(t){var w=p.select(this);t=t[0];var x=t.t,z=t.trace;if(!0!==z.visible||x.empty)w.remove();else{var B=x.bPos,A=x.bdPos,D=r[x.valLetter+"axis"],C=r[x.posLetter+"axis"],v="both"===z.side,y=v||"positive"===z.side,F=v||"negative"===z.side;t=w.selectAll("path.violin").data(n.identity);t.enter().append("path").style("vector-effect","non-scaling-stroke").attr("class","violin");t.exit().remove();t.each(function(M){var H=
p.select(this),O=M.density,I=O.length,L=C.c2l(M.pos+B,!0),Q=C.l2p(L);if(z.width)var Z=x.maxKDE/A;else Z=e._violinScaleGroupStats[z.scalegroup],Z="count"===z.scalemode?Z.maxKDE/A*(Z.maxCount/M.pts.length):Z.maxKDE/A;var ba;if(y){var V=Array(I);for(ba=0;ba<I;ba++){var S=V[ba]={};S[x.posLetter]=L+O[ba].v/Z;S[x.valLetter]=D.c2l(O[ba].t,!0)}var T=d(V)}if(F){V=Array(I);var fa=0;for(ba=I-1;fa<I;fa++,ba--)S=V[fa]={},S[x.posLetter]=L-O[ba].v/Z,S[x.valLetter]=D.c2l(O[ba].t,!0);fa=d(V)}v?T=T+"L"+fa.substr(1)+
"Z":(L=[Q,D.c2p(O[0].t)],O=[Q,D.c2p(O[I-1].t)],"h"===z.orientation&&(L.reverse(),O.reverse()),T=y?"M"+L+"L"+T.substr(1)+"L"+O:"M"+O+"L"+fa.substr(1)+"L"+L);H.attr("d",T);M.posCenterPx=Q;M.posDensityScale=Z*A;M.path=H.node();M.pathLength=M.path.getTotalLength()/(v?2:1)});var J=z.box;t=J.width;J=(J.line||{}).width;v?(t*=A,J=0):y?(t=[0,A*t/2],J*={x:1,y:-1}[x.posLetter]):(t=[A*t/2,0],J*={x:-1,y:1}[x.posLetter]);m.plotBoxAndWhiskers(w,{pos:C,val:D},z,{bPos:B,bdPos:t,bPosPxOffset:J});m.plotBoxMean(w,{pos:C,
val:D},z,{bPos:B,bdPos:t,bPosPxOffset:J});if(!z.box.visible&&z.meanline.visible)var K=n.identity;K=w.selectAll("path.meanline").data(K||[]);K.enter().append("path").attr("class","meanline").style("fill","none").style("vector-effect","non-scaling-stroke");K.exit().remove();K.each(function(M){var H=D.c2p(M.mean,!0);M=g.getPositionOnKdePath(M,z,H);p.select(this).attr("d","h"===z.orientation?"M"+H+","+M[0]+"V"+M[1]:"M"+M[0]+","+H+"H"+M[1])});m.plotPoints(w,{x:f,y:q},z,x)}})}},{"../../components/drawing":688,
"../../lib":803,"../box/plot":975,"../scatter/line_points":1232,"./helpers":1376,"@plotly/d3":58}],1382:[function(b,N,G){var p=b("@plotly/d3"),n=b("../../components/color"),k=b("../scatter/style").stylePoints;N.exports=function(m){var a=p.select(m).selectAll("g.trace.violins");a.style("opacity",function(g){return g[0].trace.opacity});a.each(function(g){g=g[0].trace;var h=p.select(this),r=g.box||{},l=r.line||{},c=g.meanline||{},d=c.width;h.selectAll("path.violin").style("stroke-width",g.line.width+
"px").call(n.stroke,g.line.color).call(n.fill,g.fillcolor);h.selectAll("path.box").style("stroke-width",l.width+"px").call(n.stroke,l.color).call(n.fill,r.fillcolor);r={"stroke-width":d+"px","stroke-dasharray":2*d+"px,"+d+"px"};h.selectAll("path.mean").style(r).call(n.stroke,c.color);h.selectAll("path.meanline").style(r).call(n.stroke,c.color);k(h,g,m)})}},{"../../components/color":666,"../scatter/style":1242,"@plotly/d3":58}],1383:[function(b,N,G){G=b("../../components/colorscale/attributes");var p=
b("../isosurface/attributes"),n=b("../surface/attributes"),k=b("../../plots/attributes"),m=b("../../lib/extend").extendFlat;b=b("../../plot_api/edit_types").overrideAll;N=N.exports=b(m({x:p.x,y:p.y,z:p.z,value:p.value,isomin:p.isomin,isomax:p.isomax,surface:p.surface,spaceframe:{show:{valType:"boolean",dflt:!1},fill:{valType:"number",min:0,max:1,dflt:1}},slices:p.slices,caps:p.caps,text:p.text,hovertext:p.hovertext,xhoverformat:p.xhoverformat,yhoverformat:p.yhoverformat,zhoverformat:p.zhoverformat,
valuehoverformat:p.valuehoverformat,hovertemplate:p.hovertemplate},G("",{colorAttr:"`value`",showScaleDflt:!0,editTypeOverride:"calc"}),{colorbar:p.colorbar,opacity:p.opacity,opacityscale:n.opacityscale,lightposition:p.lightposition,lighting:p.lighting,flatshading:p.flatshading,contour:p.contour,hoverinfo:m({},k.hoverinfo),showlegend:m({},k.showlegend,{dflt:!1})}),"calc","nested");N.x.editType=N.y.editType=N.z.editType=N.value.editType="calc+clearAxisTypes";N.transforms=void 0},{"../../components/colorscale/attributes":673,
"../../lib/extend":793,"../../plot_api/edit_types":836,"../../plots/attributes":850,"../isosurface/attributes":1154,"../surface/attributes":1342}],1384:[function(b,N,G){function p(l,c,d){this.scene=l;this.uid=d;this.mesh=c;this.name="";this.data=null;this.showContour=!1}var n=b("gl-mesh3d"),k=b("../../lib/gl_format_color").parseColorScale,m=b("../../lib/str2rgbarray"),a=b("../../components/colorscale").extractOpts,g=b("../../plots/gl3d/zip3"),h=b("../isosurface/convert").findNearestOnAxis,r=b("../isosurface/convert").generateIsoMeshes;
b=p.prototype;b.handlePick=function(l){if(l.object===this.mesh){var c=l.data.index,d=this.data._meshY[c],e=this.data._meshZ[c],f=this.data._Ys.length,q=this.data._Zs.length;c=h(this.data._meshX[c],this.data._Xs).id;d=h(d,this.data._Ys).id;e=h(e,this.data._Zs).id;f=l.index=e+q*d+q*f*c;l.traceCoordinate=[this.data._meshX[f],this.data._meshY[f],this.data._meshZ[f],this.data._value[f]];q=this.data.hovertext||this.data.text;Array.isArray(q)&&void 0!==q[f]?l.textLabel=q[f]:q&&(l.textLabel=q);return!0}};
b.update=function(l){function c(f,q,t,w){return q.map(function(x){return f.d2l(x,0,w)*t})}var d=this.scene,e=d.fullSceneLayout;this.data=r(l);d=g(c(e.xaxis,l._meshX,d.dataScale[0],l.xcalendar),c(e.yaxis,l._meshY,d.dataScale[1],l.ycalendar),c(e.zaxis,l._meshZ,d.dataScale[2],l.zcalendar));e=g(l._meshI,l._meshJ,l._meshK);d={positions:d,cells:e,lightPosition:[l.lightposition.x,l.lightposition.y,l.lightposition.z],ambient:l.lighting.ambient,diffuse:l.lighting.diffuse,specular:l.lighting.specular,roughness:l.lighting.roughness,
fresnel:l.lighting.fresnel,vertexNormalsEpsilon:l.lighting.vertexnormalsepsilon,faceNormalsEpsilon:l.lighting.facenormalsepsilon,opacity:l.opacity,opacityscale:l.opacityscale,contourEnable:l.contour.show,contourColor:m(l.contour.color).slice(0,3),contourWidth:l.contour.width,useFacetNormals:l.flatshading};e=a(l);d.vertexIntensity=l._meshIntensity;d.vertexIntensityBounds=[e.min,e.max];d.colormap=k(l);this.mesh.update(d)};b.dispose=function(){this.scene.glplot.remove(this.mesh);this.mesh.dispose()};
N.exports=function(l,c){var d=n({gl:l.glplot.gl}),e=new p(l,d,c.uid);d._trace=e;e.update(c);l.glplot.add(d);return e}},{"../../components/colorscale":678,"../../lib/gl_format_color":799,"../../lib/str2rgbarray":828,"../../plots/gl3d/zip3":907,"../isosurface/convert":1156,"gl-mesh3d":315}],1385:[function(b,N,G){var p=b("../../lib"),n=b("./attributes"),k=b("../isosurface/defaults").supplyIsoDefaults,m=b("../surface/defaults").opacityscaleDefaults;N.exports=function(a,g,h,r){function l(c,d){return p.coerce(a,
g,n,c,d)}k(a,g,h,r,l);m(a,g,r,l)}},{"../../lib":803,"../isosurface/defaults":1157,"../surface/defaults":1345,"./attributes":1383}],1386:[function(b,N,G){N.exports={attributes:b("./attributes"),supplyDefaults:b("./defaults"),calc:b("../isosurface/calc"),colorbar:{min:"cmin",max:"cmax"},plot:b("./convert"),moduleType:"trace",name:"volume",basePlotModule:b("../../plots/gl3d"),categories:["gl3d","showLegend"],meta:{}}},{"../../plots/gl3d":896,"../isosurface/calc":1155,"./attributes":1383,"./convert":1384,
"./defaults":1385}],1387:[function(b,N,G){function p(l){return{marker:{color:r({},n.marker.color,{arrayOk:!1,editType:"style"}),line:{color:r({},n.marker.line.color,{arrayOk:!1,editType:"style"}),width:r({},n.marker.line.width,{arrayOk:!1,editType:"style"}),editType:"style"},editType:"style"},editType:"style"}}var n=b("../bar/attributes");G=b("../scatter/attributes").line;var k=b("../../plots/attributes"),m=b("../../plots/cartesian/axis_format_attributes").axisHoverFormat,a=b("../../plots/template_attributes").hovertemplateAttrs,
g=b("../../plots/template_attributes").texttemplateAttrs,h=b("./constants"),r=b("../../lib/extend").extendFlat;b=b("../../components/color");N.exports={measure:{valType:"data_array",dflt:[],editType:"calc"},base:{valType:"number",dflt:null,arrayOk:!1,editType:"calc"},x:n.x,x0:n.x0,dx:n.dx,y:n.y,y0:n.y0,dy:n.dy,xperiod:n.xperiod,yperiod:n.yperiod,xperiod0:n.xperiod0,yperiod0:n.yperiod0,xperiodalignment:n.xperiodalignment,yperiodalignment:n.yperiodalignment,xhoverformat:m("x"),yhoverformat:m("y"),hovertext:n.hovertext,
hovertemplate:a({},{keys:h.eventDataKeys}),hoverinfo:r({},k.hoverinfo,{flags:"name x y text initial delta final".split(" ")}),textinfo:{valType:"flaglist",flags:["label","text","initial","delta","final"],extras:["none"],editType:"plot",arrayOk:!1},texttemplate:g({editType:"plot"},{keys:h.eventDataKeys.concat(["label"])}),text:n.text,textposition:n.textposition,insidetextanchor:n.insidetextanchor,textangle:n.textangle,textfont:n.textfont,insidetextfont:n.insidetextfont,outsidetextfont:n.outsidetextfont,
constraintext:n.constraintext,cliponaxis:n.cliponaxis,orientation:n.orientation,offset:n.offset,width:n.width,increasing:p("increasing"),decreasing:p("decreasing"),totals:p("intermediate sums and total"),connector:{line:{color:r({},G.color,{dflt:b.defaultLine}),width:r({},G.width,{editType:"plot"}),dash:G.dash,editType:"plot"},mode:{valType:"enumerated",values:["spanning","between"],dflt:"between",editType:"plot"},visible:{valType:"boolean",dflt:!0,editType:"plot"},editType:"plot"},offsetgroup:n.offsetgroup,
alignmentgroup:n.alignmentgroup}},{"../../components/color":666,"../../lib/extend":793,"../../plots/attributes":850,"../../plots/cartesian/axis_format_attributes":857,"../../plots/template_attributes":926,"../bar/attributes":941,"../scatter/attributes":1218,"./constants":1389}],1388:[function(b,N,G){function p(r){return"a"===r||"absolute"===r}function n(r){return"t"===r||"total"===r}var k=b("../../plots/cartesian/axes"),m=b("../../plots/cartesian/align_period"),a=b("../../lib").mergeArray,g=b("../scatter/calc_selection"),
h=b("../../constants/numerical").BADNUM;N.exports=function(r,l){var c=k.getFromId(r,l.xaxis||"x"),d=k.getFromId(r,l.yaxis||"y");if("h"===l.orientation){r=c.makeCalcdata(l,"x");var e=d.makeCalcdata(l,"y");d=m(l,d,"y",e);var f=!!l.yperiodalignment;var q="y"}else r=d.makeCalcdata(l,"y"),e=c.makeCalcdata(l,"x"),d=m(l,c,"x",e),f=!!l.xperiodalignment,q="x";c=d.vals;for(var t=Math.min(c.length,r.length),w=Array(t),x=0,z,B=!1,A=0;A<t;A++){z=r[A]||0;var D=!1;(r[A]!==h||n(l.measure[A])||p(l.measure[A]))&&A+
1<t&&(r[A+1]!==h||n(l.measure[A+1])||p(l.measure[A+1]))&&(D=!0);D=w[A]={i:A,p:c[A],s:z,rawS:z,cNext:D};p(l.measure[A])?(x=D.s,D.isSum=!0,D.dir="totals",D.s=x):n(l.measure[A])?(D.isSum=!0,D.dir="totals",D.s=x):(D.isSum=!1,D.dir=0>D.rawS?"decreasing":"increasing",z=D.s,D.s=x+z,x+=z);"totals"===D.dir&&(B=!0);f&&(w[A].orig_p=e[A],w[A][q+"End"]=d.ends[A],w[A][q+"Start"]=d.starts[A]);l.ids&&(D.id=String(l.ids[A]));D.v=(l.base||0)+x}w.length&&(w[0].hasTotals=B);a(l.text,w,"tx");a(l.hovertext,w,"htx");g(w,
l);return w}},{"../../constants/numerical":779,"../../lib":803,"../../plots/cartesian/align_period":851,"../../plots/cartesian/axes":854,"../scatter/calc_selection":1220}],1389:[function(b,N,G){N.exports={eventDataKeys:["initial","delta","final"]}},{}],1390:[function(b,N,G){var p=b("../bar/cross_trace_calc").setGroupPositions;N.exports=function(n,k){var m=n._fullLayout,a=n._fullData,g=n.calcdata,h=k.xaxis,r=k.yaxis;k=[];var l=[],c=[],d;for(d=0;d<a.length;d++){var e=a[d];if(!0===e.visible&&e.xaxis===
h._id&&e.yaxis===r._id&&"waterfall"===e.type){var f=g[d];"h"===e.orientation?c.push(f):l.push(f);k.push(f)}}f={mode:m.waterfallmode,norm:m.waterfallnorm,gap:m.waterfallgap,groupgap:m.waterfallgroupgap};p(n,h,r,l,f);p(n,r,h,c,f);for(d=0;d<k.length;d++)for(f=k[d],n=0;n<f.length;n++)h=f[n],!1===h.isSum&&(h.s0+=0===n?0:f[n-1].s),n+1<f.length&&(f[n].nextP0=f[n+1].p0,f[n].nextS0=f[n+1].s0)}},{"../bar/cross_trace_calc":944}],1391:[function(b,N,G){function p(d,e,f){d(e+".marker.color",f);d(e+".marker.line.color",
r.defaultLine);d(e+".marker.line.width")}var n=b("../../lib"),k=b("../bar/defaults").handleGroupingDefaults,m=b("../bar/defaults").handleText,a=b("../scatter/xy_defaults"),g=b("../scatter/period_defaults"),h=b("./attributes"),r=b("../../components/color");b=b("../../constants/delta.js");var l=b.INCREASING.COLOR,c=b.DECREASING.COLOR;N.exports={supplyDefaults:function(d,e,f,q){function t(w,x){return n.coerce(d,e,h,w,x)}a(d,e,q,t)?(g(d,e,q,t),t("xhoverformat"),t("yhoverformat"),t("measure"),t("orientation",
e.x&&!e.y?"h":"v"),t("base"),t("offset"),t("width"),t("text"),t("hovertext"),t("hovertemplate"),f=t("textposition"),m(d,e,q,t,f,{moduleHasSelected:!1,moduleHasUnselected:!1,moduleHasConstrain:!0,moduleHasCliponaxis:!0,moduleHasTextangle:!0,moduleHasInsideanchor:!0}),"none"!==e.textposition&&(t("texttemplate"),e.texttemplate||t("textinfo")),p(t,"increasing",l),p(t,"decreasing",c),p(t,"totals","#4499FF"),t("connector.visible")&&(t("connector.mode"),t("connector.line.width")&&(t("connector.line.color"),
t("connector.line.dash")))):e.visible=!1},crossTraceDefaults:function(d,e){function f(x){return n.coerce(t._input,t,h,x)}if("group"===e.waterfallmode)for(var q=0;q<d.length;q++){var t=d[q];var w=t._input;k(w,t,e,f)}}}},{"../../components/color":666,"../../constants/delta.js":773,"../../lib":803,"../bar/defaults":945,"../scatter/period_defaults":1238,"../scatter/xy_defaults":1245,"./attributes":1387}],1392:[function(b,N,G){N.exports=function(p,n){p.x="xVal"in n?n.xVal:n.x;p.y="yVal"in n?n.yVal:n.y;
"initial"in n&&(p.initial=n.initial);"delta"in n&&(p.delta=n.delta);"final"in n&&(p.final=n.final);n.xa&&(p.xaxis=n.xa);n.ya&&(p.yaxis=n.ya);return p}},{}],1393:[function(b,N,G){function p(h,r){var l=h[r.dir].marker;h=l.color;r=l.line.color;l=l.line.width;if(k(h))return h;if(k(r)&&l)return r}var n=b("../../plots/cartesian/axes").hoverLabelText,k=b("../../components/color").opacity,m=b("../bar/hover").hoverOnBars;b=b("../../constants/delta.js");var a=b.INCREASING.SYMBOL,g=b.DECREASING.SYMBOL;N.exports=
function(h,r,l,c,d){function e(B){return n(t,B,f[q+"hoverformat"])}if(r=m(h,r,l,c,d)){c=r.cd;var f=c[0].trace,q=(l="h"===f.orientation)?"x":"y",t=l?h.xa:h.ya;h=c[r.index];c=h.isSum?h.b+h.s:h.rawS;h.isSum||(r.initial=h.b+h.s-c,r.delta=c,r.final=r.initial+r.delta,d=e(Math.abs(r.delta)),r.deltaLabel=0>c?"("+d+")":d,r.finalLabel=e(r.final),r.initialLabel=e(r.initial));var w=h.hi||f.hoverinfo;d=[];if(w&&"none"!==w&&"skip"!==w){var x="all"===w,z=w.split("+");w=function(B){return x||-1!==z.indexOf(B)};h.isSum||
(!w("final")||(l?w("x"):w("y"))||d.push(r.finalLabel),w("delta")&&(0>c?d.push(r.deltaLabel+" "+g):d.push(r.deltaLabel+" "+a)),w("initial")&&d.push("Initial: "+r.initialLabel))}d.length&&(r.extraText=d.join("\x3cbr\x3e"));r.color=p(f,h);return[r]}}},{"../../components/color":666,"../../constants/delta.js":773,"../../plots/cartesian/axes":854,"../bar/hover":948}],1394:[function(b,N,G){N.exports={attributes:b("./attributes"),layoutAttributes:b("./layout_attributes"),supplyDefaults:b("./defaults").supplyDefaults,
crossTraceDefaults:b("./defaults").crossTraceDefaults,supplyLayoutDefaults:b("./layout_defaults"),calc:b("./calc"),crossTraceCalc:b("./cross_trace_calc"),plot:b("./plot"),style:b("./style").style,hoverPoints:b("./hover"),eventData:b("./event_data"),selectPoints:b("../bar/select"),moduleType:"trace",name:"waterfall",basePlotModule:b("../../plots/cartesian"),categories:"bar-like cartesian svg oriented showLegend zoomScale".split(" "),meta:{}}},{"../../plots/cartesian":868,"../bar/select":953,"./attributes":1387,
"./calc":1388,"./cross_trace_calc":1390,"./defaults":1391,"./event_data":1392,"./hover":1393,"./layout_attributes":1395,"./layout_defaults":1396,"./plot":1397,"./style":1398}],1395:[function(b,N,G){N.exports={waterfallmode:{valType:"enumerated",values:["group","overlay"],dflt:"group",editType:"calc"},waterfallgap:{valType:"number",min:0,max:1,editType:"calc"},waterfallgroupgap:{valType:"number",min:0,max:1,dflt:0,editType:"calc"}}},{}],1396:[function(b,N,G){var p=b("../../lib"),n=b("./layout_attributes");
N.exports=function(k,m,a){for(var g=!1,h=0;h<a.length;h++){var r=a[h];if(r.visible&&"waterfall"===r.type){g=!0;break}}g&&(p.coerce(k,m,n,"waterfallmode",void 0),p.coerce(k,m,n,"waterfallgap",.2),p.coerce(k,m,n,"waterfallgroupgap",void 0))}},{"../../lib":803,"./layout_attributes":1395}],1397:[function(b,N,G){function p(r,l,c,d){var e=l.xaxis,f=l.yaxis;k.makeTraceGroups(d,c,"trace bars").each(function(q){var t=n.select(this);q=q[0].trace;t=k.ensureSingle(t,"g","lines");if(q.connector&&q.connector.visible){var w=
"h"===q.orientation,x=q.connector.mode;t=t.selectAll("g.line").data(k.identity);t.enter().append("g").classed("line",!0);t.exit().remove();var z=t.size();t.each(function(B,A){if(A===z-1||B.cNext){var D=[];var C=[];var v=w?e:f,y=w?f:e;D[0]=v.c2p(B.s0,!0);C[0]=y.c2p(B.p0,!0);D[1]=v.c2p(B.s1,!0);C[1]=y.c2p(B.p1,!0);D[2]=v.c2p(B.nextS0,!0);C[2]=y.c2p(B.nextP0,!0);C=w?[D,C]:[C,D];D=C[0];C=C[1];v="";D[0]!==a&&C[0]!==a&&D[1]!==a&&C[1]!==a&&("spanning"===x&&!B.isSum&&0<A&&(v=w?v+("M"+D[0]+","+C[1]+"V"+C[0]):
v+("M"+D[1]+","+C[0]+"H"+D[0])),"between"!==x&&(B.isSum||A<z-1)&&(v=w?v+("M"+D[1]+","+C[0]+"V"+C[1]):v+("M"+D[0]+","+C[1]+"H"+D[1])),D[2]!==a&&C[2]!==a&&(v=w?v+("M"+D[1]+","+C[1]+"V"+C[2]):v+("M"+D[1]+","+C[1]+"H"+D[2])));""===v&&(v="M0,0Z");k.ensureSingle(n.select(this),"path").attr("d",v).call(m.setClipUrl,l.layerClipId,r)}})}else t.remove()})}var n=b("@plotly/d3"),k=b("../../lib"),m=b("../../components/drawing"),a=b("../../constants/numerical").BADNUM,g=b("../bar/plot"),h=b("../bar/uniform_text").clearMinTextSize;
N.exports=function(r,l,c,d){var e=r._fullLayout;h("waterfall",e);g.plot(r,l,c,d,{mode:e.waterfallmode,norm:e.waterfallmode,gap:e.waterfallgap,groupgap:e.waterfallgroupgap});p(r,l,c,d)}},{"../../components/drawing":688,"../../constants/numerical":779,"../../lib":803,"../bar/plot":952,"../bar/uniform_text":957,"@plotly/d3":58}],1398:[function(b,N,G){var p=b("@plotly/d3"),n=b("../../components/drawing"),k=b("../../components/color"),m=b("../../constants/interactions").DESELECTDIM;G=b("../bar/style");
var a=b("../bar/uniform_text").resizeText,g=G.styleTextPoints;N.exports={style:function(h,r,l){r=l?l:p.select(h).selectAll("g.waterfalllayer").selectAll("g.trace");a(h,r,"waterfall");r.style("opacity",function(c){return c[0].trace.opacity});r.each(function(c){var d=p.select(this),e=c[0].trace;d.selectAll(".point \x3e path").each(function(f){if(!f.isBlank){var q=e[f.dir].marker;p.select(this).call(k.fill,q.color).call(k.stroke,q.line.color).call(n.dashLine,q.line.dash,q.line.width).style("opacity",
e.selectedpoints&&!f.selected?m:1)}});g(d,e,h);d.selectAll(".lines").each(function(){var f=e.connector.line;n.lineGroupStyle(p.select(this).selectAll("path"),f.width,f.color,f.dash)})})}}},{"../../components/color":666,"../../components/drawing":688,"../../constants/interactions":778,"../bar/style":955,"../bar/uniform_text":957,"@plotly/d3":58}],1399:[function(b,N,G){function p(f,q,t,w){if(w.enabled){var x=w.target,z=h.nestedProperty(q,x),B=z.get();f=g.getDataConversions(f,q,x,B);f=n(w,f);for(var A=
Array(t.length),D=0;D<t.length;D++)A[D]=f(B,t[D]);z.set(A);"count"===w.func&&h.pushUnique(q._arrayAttrs,x)}}function n(f,q){var t=q.d2c,w=q.c2d;switch(f.func){case "count":return k;case "first":return m;case "last":return a;case "sum":return function(x,z){for(var B=0,A=0;A<z.length;A++){var D=t(x[z[A]]);D!==c&&(B+=D)}return w(B)};case "avg":return function(x,z){for(var B=0,A=0,D=0;D<z.length;D++){var C=t(x[z[D]]);C!==c&&(B+=C,A++)}return A?w(B/A):c};case "min":return function(x,z){for(var B=Infinity,
A=0;A<z.length;A++){var D=t(x[z[A]]);D!==c&&(B=Math.min(B,D))}return Infinity===B?c:w(B)};case "max":return function(x,z){for(var B=-Infinity,A=0;A<z.length;A++){var D=t(x[z[A]]);D!==c&&(B=Math.max(B,D))}return-Infinity===B?c:w(B)};case "range":return function(x,z){for(var B=Infinity,A=-Infinity,D=0;D<z.length;D++){var C=t(x[z[D]]);C!==c&&(B=Math.min(B,C),A=Math.max(A,C))}return-Infinity===A||Infinity===B?c:w(A-B)};case "change":return function(x,z){var B=t(x[z[0]]);x=t(x[z[z.length-1]]);return B===
c||x===c?c:w(x-B)};case "median":return function(x,z){for(var B=[],A=0;A<z.length;A++){var D=t(x[z[A]]);D!==c&&B.push(D)}if(!B.length)return c;B.sort(h.sorterAsc);x=(B.length-1)/2;return w((B[Math.floor(x)]+B[Math.ceil(x)])/2)};case "mode":return function(x,z){for(var B={},A=0,D=c,C=0;C<z.length;C++){var v=t(x[z[C]]);if(v!==c){var y=B[v]=(B[v]||0)+1;y>A&&(A=y,D=v)}}return A?w(D):c};case "rms":return function(x,z){for(var B=0,A=0,D=0;D<z.length;D++){var C=t(x[z[D]]);C!==c&&(B+=C*C,A++)}return A?w(Math.sqrt(B/
A)):c};case "stddev":return function(x,z){var B=0,A=0,D=1,C=c,v;for(v=0;v<z.length&&C===c;v++)C=t(x[z[v]]);if(C===c)return c;for(;v<z.length;v++){var y=t(x[z[v]]);y!==c&&(y-=C,B+=y,A+=y*y,D++)}return(x="sample"===f.funcmode?D-1:D)?Math.sqrt((A-B*B/D)/x):0}}}function k(f,q){return q.length}function m(f,q){return f[q[0]]}function a(f,q){return f[q[q.length-1]]}var g=b("../plots/cartesian/axes"),h=b("../lib"),r=b("../plot_api/plot_schema"),l=b("./helpers").pointsAccessorFunction,c=b("../constants/numerical").BADNUM;
G.moduleType="transform";G.name="aggregate";var d=G.attributes={enabled:{valType:"boolean",dflt:!0,editType:"calc"},groups:{valType:"string",strict:!0,noBlank:!0,arrayOk:!0,dflt:"x",editType:"calc"},aggregations:{_isLinkedToArray:"aggregation",target:{valType:"string",editType:"calc"},func:{valType:"enumerated",values:"count sum avg median mode rms stddev min max first last change range".split(" "),dflt:"first",editType:"calc"},funcmode:{valType:"enumerated",values:["sample","population"],dflt:"sample",
editType:"calc"},enabled:{valType:"boolean",dflt:!0,editType:"calc"},editType:"calc"},editType:"calc"},e=d.aggregations;G.supplyDefaults=function(f,q){function t(v,y){return h.coerce(A[x],D,e,v,y)}var w={},x;if(!h.coerce(f,w,d,"enabled",void 0))return w;q=r.findArrayAttributes(q);var z={};for(x=0;x<q.length;x++)z[q[x]]=1;var B=h.coerce(f,w,d,"groups",void 0);if(!Array.isArray(B)){if(!z[B])return w.enabled=!1,w;z[B]=0}var A=f.aggregations||[];f=w.aggregations=Array(A.length);for(x=0;x<A.length;x++){var D=
{_index:x};B=t("target");var C=t("func");t("enabled")&&B&&(z[B]||"count"===C&&void 0===z[B])?("stddev"===C&&t("funcmode"),z[B]=0,f[x]=D):f[x]={enabled:!1,_index:x}}for(x=0;x<q.length;x++)z[q[x]]&&f.push({target:q[x],func:e.func.dflt,enabled:!0,_index:-1});return w};G.calcTransform=function(f,q,t){if(t.enabled){var w=t.groups,x=h.getTargetArray(q,{target:w});if(x){var z,B={},A={},D=[],C=l(q.transforms,t),v=x.length;q._length&&(v=Math.min(v,q._length));for(z=0;z<v;z++){var y=x[z];var F=B[y];void 0===
F?(B[y]=D.length,F=[z],D.push(F),A[B[y]]=C(z)):(D[F].push(z),A[B[y]]=(A[B[y]]||[]).concat(C(z)))}t._indexToPoints=A;t=t.aggregations;for(z=0;z<t.length;z++)p(f,q,D,t[z]);"string"===typeof w&&p(f,q,D,{target:w,func:"first",enabled:!0});q._length=D.length}}}},{"../constants/numerical":779,"../lib":803,"../plot_api/plot_schema":842,"../plots/cartesian/axes":854,"./helpers":1402}],1400:[function(b,N,G){function p(l,c,d){var e=l.operation,f=l.value,q=Array.isArray(f),t=function(z){return c(z,0,l.valuecalendar)},
w=function(z){return c(z,0,d)},x;-1!==g.indexOf(e)?x=q?t(f[0]):t(f):-1!==h.indexOf(e)?x=q?[t(f[0]),t(f[1])]:[t(f),t(f)]:-1!==r.indexOf(e)&&(x=q?f.map(t):[t(f)]);switch(e){case "\x3d":return function(z){return w(z)===x};case "!\x3d":return function(z){return w(z)!==x};case "\x3c":return function(z){return w(z)<x};case "\x3c\x3d":return function(z){return w(z)<=x};case "\x3e":return function(z){return w(z)>x};case "\x3e\x3d":return function(z){return w(z)>=x};case "[]":return function(z){z=w(z);return z>=
x[0]&&z<=x[1]};case "()":return function(z){z=w(z);return z>x[0]&&z<x[1]};case "[)":return function(z){z=w(z);return z>=x[0]&&z<x[1]};case "(]":return function(z){z=w(z);return z>x[0]&&z<=x[1]};case "][":return function(z){z=w(z);return z<=x[0]||z>=x[1]};case ")(":return function(z){z=w(z);return z<x[0]||z>x[1]};case "](":return function(z){z=w(z);return z<=x[0]||z>x[1]};case ")[":return function(z){z=w(z);return z<x[0]||z>=x[1]};case "{}":return function(z){return-1!==x.indexOf(w(z))};case "}{":return function(z){return-1===
x.indexOf(w(z))}}}var n=b("../lib"),k=b("../registry"),m=b("../plots/cartesian/axes"),a=b("./helpers").pointsAccessorFunction;b=b("../constants/filter_ops");var g=b.COMPARISON_OPS,h=b.INTERVAL_OPS,r=b.SET_OPS;G.moduleType="transform";G.name="filter";G.attributes={enabled:{valType:"boolean",dflt:!0,editType:"calc"},target:{valType:"string",strict:!0,noBlank:!0,arrayOk:!0,dflt:"x",editType:"calc"},operation:{valType:"enumerated",values:[].concat(g).concat(h).concat(r),dflt:"\x3d",editType:"calc"},value:{valType:"any",
dflt:0,editType:"calc"},preservegaps:{valType:"boolean",dflt:!1,editType:"calc"},editType:"calc"};G.supplyDefaults=function(l){function c(f,q){return n.coerce(l,d,G.attributes,f,q)}var d={};if(c("enabled")){var e=c("target");if(n.isArrayOrTypedArray(e)&&0===e.length)return d.enabled=!1,d;c("preservegaps");c("operation");c("value");e=k.getComponentMethod("calendars","handleDefaults");e(l,d,"valuecalendar",null);e(l,d,"targetcalendar",null)}return d};G.calcTransform=function(l,c,d){function e(v,y){for(var F=
0;F<x.length;F++){var J=n.nestedProperty(c,x[F]);v(J,y)}}if(d.enabled){var f=n.getTargetArray(c,d);if(f){var q=d.target,t=f.length;c._length&&(t=Math.min(t,c._length));var w=d.targetcalendar,x=c._arrayAttrs,z=d.preservegaps;if("string"===typeof q){var B=n.nestedProperty(c,q+"calendar").get();B&&(w=B)}l=m.getDataToCoordFunc(l,c,q,f);w=p(d,l,w);var A={};l={};q=0;if(z){var D=function(v){A[v.astr]=n.extendDeep([],v.get());v.set(Array(t))};B=function(v,y){var F=A[v.astr][y];v.get()[y]=F}}else D=function(v){A[v.astr]=
n.extendDeep([],v.get());v.set([])},B=function(v,y){y=A[v.astr][y];v.get().push(y)};e(D);D=a(c.transforms,d);for(var C=0;C<t;C++)w(f[C])?(e(B,C),l[q++]=D(C)):z&&q++;d._indexToPoints=l;c._length=q}}}},{"../constants/filter_ops":775,"../lib":803,"../plots/cartesian/axes":854,"../registry":931,"./helpers":1402}],1401:[function(b,N,G){var p=b("../lib"),n=b("../plot_api/plot_schema"),k=b("../plots/plots"),m=b("./helpers").pointsAccessorFunction;G.moduleType="transform";G.name="groupby";G.attributes={enabled:{valType:"boolean",
dflt:!0,editType:"calc"},groups:{valType:"data_array",dflt:[],editType:"calc"},nameformat:{valType:"string",editType:"calc"},styles:{_isLinkedToArray:"style",target:{valType:"string",editType:"calc"},value:{valType:"any",dflt:{},editType:"calc",_compareAsJSON:!0},editType:"calc"},editType:"calc"};G.supplyDefaults=function(a,g,h){g={};if(!p.coerce(a,g,G.attributes,"enabled",void 0))return g;p.coerce(a,g,G.attributes,"groups",void 0);p.coerce(a,g,G.attributes,"nameformat",1<h._dataLength?"%{group} (%{trace})":
"%{group}");h=a.styles;var r=g.styles=[];if(h)for(a=0;a<h.length;a++){var l=r[a]={};p.coerce(h[a],r[a],G.attributes.styles,"target");var c=p.coerce(h[a],r[a],G.attributes.styles,"value");p.isPlainObject(c)?l.value=p.extendDeep({},c):c&&delete l.value}return g};G.transform=function(a,g){var h,r=[];for(h=0;h<a.length;h++){var l=void 0,c;var d=a[h];var e=g.transform;var f=g.transformIndex;var q=d.transforms[f].groups,t=m(d.transforms,e);if(p.isArrayOrTypedArray(q)&&0!==q.length){var w=p.filterUnique(q),
x=Array(w.length),z=q.length,B=n.findArrayAttributes(d),A=e.styles||[],D={};for(c=0;c<A.length;c++)D[A[c].target]=A[c].value;e.styles&&(l=p.keyedContainer(e,"styles","target","value.name"));A={};var C={};for(c=0;c<w.length;c++){var v=w[c];A[v]=c;C[v]=0;var y=x[c]=p.extendDeepNoArrays({},d);y._group=v;y.transforms[f]._indexToPoints={};var F=null;l&&(F=l.get(v));y.name=F||""===F?F:p.templateString(e.nameformat,{trace:d.name,group:v});F=y.transforms;y.transforms=[];for(v=0;v<F.length;v++)y.transforms[v]=
p.extendDeepNoArrays({},F[v]);for(v=0;v<B.length;v++)p.nestedProperty(y,B[v]).set([])}for(c=0;c<B.length;c++){e=B[c];v=0;for(l=[];v<w.length;v++)l[v]=p.nestedProperty(x[v],e).get();e=p.nestedProperty(d,e).get();for(v=0;v<z;v++)l[A[q[v]]].push(e[v])}for(v=0;v<z;v++)y=x[A[q[v]]],y.transforms[f]._indexToPoints[C[q[v]]]=t(v),C[q[v]]++;for(c=0;c<w.length;c++)v=w[c],y=x[c],k.clearExpandedTraceDefaultColors(y),p.extendDeepNoArrays(y,D[v]||{});d=x}else d=[d];for(f=0;f<d.length;f++)r.push(d[f])}return r}},
{"../lib":803,"../plot_api/plot_schema":842,"../plots/plots":917,"./helpers":1402}],1402:[function(b,N,G){G.pointsAccessorFunction=function(p,n){for(var k,m,a=0;a<p.length;a++){k=p[a];if(k===n)break;k._indexToPoints&&!1!==k.enabled&&(m=k._indexToPoints)}return m?function(g){return m[g]}:function(g){return[g]}}},{}],1403:[function(b,N,G){function p(g,h){switch(g.order){case "ascending":return function(r,l){r=h(r.v);l=h(l.v);return r===a?1:l===a?-1:r-l};case "descending":return function(r,l){r=h(r.v);
l=h(l.v);return r===a?1:l===a?-1:l-r}}}var n=b("../lib"),k=b("../plots/cartesian/axes"),m=b("./helpers").pointsAccessorFunction,a=b("../constants/numerical").BADNUM;G.moduleType="transform";G.name="sort";G.attributes={enabled:{valType:"boolean",dflt:!0,editType:"calc"},target:{valType:"string",strict:!0,noBlank:!0,arrayOk:!0,dflt:"x",editType:"calc"},order:{valType:"enumerated",values:["ascending","descending"],dflt:"ascending",editType:"calc"},editType:"calc"};G.supplyDefaults=function(g){var h=
{};n.coerce(g,h,G.attributes,"enabled",void 0)&&(n.coerce(g,h,G.attributes,"target",void 0),n.coerce(g,h,G.attributes,"order",void 0));return h};G.calcTransform=function(g,h,r){if(r.enabled){var l=n.getTargetArray(h,r);if(l){var c=r.target,d=l.length;h._length&&(d=Math.min(d,h._length));var e=h._arrayAttrs;c=k.getDataToCoordFunc(g,h,c,l);var f=d,q=Array(f);g=Array(f);var t;for(t=0;t<f;t++)q[t]={v:l[t],i:t};q.sort(p(r,c));for(t=0;t<f;t++)g[t]=q[t].i;l=m(h.transforms,r);c={};for(f=0;f<e.length;f++){t=
n.nestedProperty(h,e[f]);var w=t.get(),x=Array(d);for(q=0;q<d;q++)x[q]=w[g[q]];t.set(x)}for(q=0;q<d;q++)c[q]=l(g[q]);r._indexToPoints=c;h._length=d}}}},{"../constants/numerical":779,"../lib":803,"../plots/cartesian/axes":854,"./helpers":1402}],1404:[function(b,N,G){G.version="2.3.1"},{}]},{},[27])(27)})};
shadow$provide[14]=function(xe,Df,jg,Nd){function b(N){return N&&N.__esModule?N:{"default":N}}Object.defineProperty(Nd,"__esModule",{value:!0});Nd["default"]=void 0;xe=b(Df(12));Df=b(Df(13));Df=(0,xe["default"])(Df["default"]);Nd["default"]=Df};
shadow$provide[15]=function(xe,Df,jg,Nd){function b(O,I){var L=O.length;O.push(I);a:for(;;){var Q=L-1>>>1,Z=O[Q];if(void 0!==Z&&0<p(Z,I))O[Q]=I,O[L]=Z,L=Q;else break a}}function N(O){O=O[0];return void 0===O?null:O}function G(O){var I=O[0];if(void 0!==I){var L=O.pop();if(L!==I){O[0]=L;var Q=0,Z=O.length;a:for(;Q<Z;){var ba=2*(Q+1)-1,V=O[ba],S=ba+1,T=O[S];if(void 0!==V&&0>p(V,L))void 0!==T&&0>p(T,V)?(O[Q]=T,O[S]=L,Q=S):(O[Q]=V,O[ba]=L,Q=ba);else if(void 0!==T&&0>p(T,L))O[Q]=T,O[S]=L,Q=S;else break a}}return I}return null}
function p(O,I){var L=O.sortIndex-I.sortIndex;return 0!==L?L:O.id-I.id}function n(O){for(var I=N(v);null!==I;){if(null===I.callback)G(v);else if(I.startTime<=O)G(v),I.sortIndex=I.expirationTime,b(C,I);else break;I=N(v)}}function k(O){H=!1;n(O);if(!M)if(null!==N(C))M=!0,d(m);else{var I=N(v);null!==I&&e(k,I.startTime-O)}}function m(O,I){M=!1;H&&(H=!1,f());K=!0;var L=J;try{n(I);for(F=N(C);null!==F&&(!(F.expirationTime>I)||O&&!Nd.unstable_shouldYield());){var Q=F.callback;if("function"===typeof Q){F.callback=
null;J=F.priorityLevel;var Z=Q(F.expirationTime<=I);I=Nd.unstable_now();"function"===typeof Z?F.callback=Z:F===N(C)&&G(C);n(I)}else G(C);F=N(C)}if(null!==F)var ba=!0;else{var V=N(v);null!==V&&e(k,V.startTime-I);ba=!1}return ba}finally{F=null,J=L,K=!1}}if("object"===typeof performance&&"function"===typeof performance.now){var a=performance;Nd.unstable_now=function(){return a.now()}}else{var g=Date,h=g.now();Nd.unstable_now=function(){return g.now()-h}}if("undefined"===typeof window||"function"!==typeof MessageChannel){var r=
null,l=null,c=function(){if(null!==r)try{var O=Nd.unstable_now();r(!0,O);r=null}catch(I){throw setTimeout(c,0),I;}};var d=function(O){null!==r?setTimeout(d,0,O):(r=O,setTimeout(c,0))};var e=function(O,I){l=setTimeout(O,I)};var f=function(){clearTimeout(l)};Nd.unstable_shouldYield=function(){return!1};xe=Nd.unstable_forceFrameRate=function(){}}else{var q=window.setTimeout,t=window.clearTimeout;"undefined"!==typeof console&&(xe=window.cancelAnimationFrame,"function"!==typeof window.requestAnimationFrame&&
console.error("This browser doesn't support requestAnimationFrame. Make sure that you load a polyfill in older browsers. https://reactjs.org/link/react-polyfills"),"function"!==typeof xe&&console.error("This browser doesn't support cancelAnimationFrame. Make sure that you load a polyfill in older browsers. https://reactjs.org/link/react-polyfills"));var w=!1,x=null,z=-1,B=5,A=0;Nd.unstable_shouldYield=function(){return Nd.unstable_now()>=A};xe=function(){};Nd.unstable_forceFrameRate=function(O){0>
O||125<O?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):B=0<O?Math.floor(1E3/O):5};Df=new MessageChannel;var D=Df.port2;Df.port1.onmessage=function(){if(null!==x){var O=Nd.unstable_now();A=O+B;try{x(!0,O)?D.postMessage(null):(w=!1,x=null)}catch(I){throw D.postMessage(null),I;}}else w=!1};d=function(O){x=O;w||(w=!0,D.postMessage(null))};e=function(O,I){z=q(function(){O(Nd.unstable_now())},I)};f=function(){t(z);z=-1}}var C=
[],v=[],y=1,F=null,J=3,K=!1,M=!1,H=!1;Nd.unstable_IdlePriority=5;Nd.unstable_ImmediatePriority=1;Nd.unstable_LowPriority=4;Nd.unstable_NormalPriority=3;Nd.unstable_Profiling=null;Nd.unstable_UserBlockingPriority=2;Nd.unstable_cancelCallback=function(O){O.callback=null};Nd.unstable_continueExecution=function(){M||K||(M=!0,d(m))};Nd.unstable_getCurrentPriorityLevel=function(){return J};Nd.unstable_getFirstCallbackNode=function(){return N(C)};Nd.unstable_next=function(O){switch(J){case 1:case 2:case 3:var I=
3;break;default:I=J}var L=J;J=I;try{return O()}finally{J=L}};Nd.unstable_pauseExecution=function(){};Nd.unstable_requestPaint=xe;Nd.unstable_runWithPriority=function(O,I){switch(O){case 1:case 2:case 3:case 4:case 5:break;default:O=3}var L=J;J=O;try{return I()}finally{J=L}};Nd.unstable_scheduleCallback=function(O,I,L){var Q=Nd.unstable_now();"object"===typeof L&&null!==L?(L=L.delay,L="number"===typeof L&&0<L?Q+L:Q):L=Q;switch(O){case 1:var Z=-1;break;case 2:Z=250;break;case 5:Z=1073741823;break;case 4:Z=
1E4;break;default:Z=5E3}Z=L+Z;O={id:y++,callback:I,priorityLevel:O,startTime:L,expirationTime:Z,sortIndex:-1};L>Q?(O.sortIndex=L,b(v,O),null===N(C)&&O===N(v)&&(H?f():H=!0,e(k,L-Q))):(O.sortIndex=Z,b(C,O),M||K||(M=!0,d(m)));return O};Nd.unstable_wrapCallback=function(O){var I=J;return function(){var L=J;J=I;try{return O.apply(this,arguments)}finally{J=L}}}};
shadow$provide[17]=function(xe,Df,jg,Nd){jg.exports=Df(15)};
shadow$provide[18]=function(xe,Df,jg,Nd){function b(Y){for(var ha="https://reactjs.org/docs/error-decoder.html?invariant\x3d"+Y,ta=1;ta<arguments.length;ta++)ha+="\x26args[]\x3d"+encodeURIComponent(arguments[ta]);return"Minified React error #"+Y+"; visit "+ha+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function N(Y,ha){G(Y,ha);G(Y+"Capture",ha)}function G(Y,ha){Gc[Y]=ha;for(Y=0;Y<ha.length;Y++)Ic.add(ha[Y])}function p(Y){if(Wc.call(Qd,
Y))return!0;if(Wc.call(wd,Y))return!1;if($c.test(Y))return Qd[Y]=!0;wd[Y]=!0;return!1}function n(Y,ha,ta,Ra){if(null!==ta&&0===ta.type)return!1;switch(typeof ha){case "function":case "symbol":return!0;case "boolean":if(Ra)return!1;if(null!==ta)return!ta.acceptsBooleans;Y=Y.toLowerCase().slice(0,5);return"data-"!==Y&&"aria-"!==Y;default:return!1}}function k(Y,ha,ta,Ra){if(null===ha||"undefined"===typeof ha||n(Y,ha,ta,Ra))return!0;if(Ra)return!1;if(null!==ta)switch(ta.type){case 3:return!ha;case 4:return!1===
ha;case 5:return isNaN(ha);case 6:return isNaN(ha)||1>ha}return!1}function m(Y,ha,ta,Ra,mb,Kb,cc){this.acceptsBooleans=2===ha||3===ha||4===ha;this.attributeName=Ra;this.attributeNamespace=mb;this.mustUseProperty=ta;this.propertyName=Y;this.type=ha;this.sanitizeURL=Kb;this.removeEmptyString=cc}function a(Y){return Y[1].toUpperCase()}function g(Y,ha,ta,Ra){var mb=yd.hasOwnProperty(ha)?yd[ha]:null;(null!==mb?0===mb.type:Ra?0:2<ha.length&&("o"===ha[0]||"O"===ha[0])&&("n"===ha[1]||"N"===ha[1]))||(k(ha,
ta,mb,Ra)&&(ta=null),Ra||null===mb?p(ha)&&(null===ta?Y.removeAttribute(ha):Y.setAttribute(ha,""+ta)):mb.mustUseProperty?Y[mb.propertyName]=null===ta?3===mb.type?!1:"":ta:(ha=mb.attributeName,Ra=mb.attributeNamespace,null===ta?Y.removeAttribute(ha):(mb=mb.type,ta=3===mb||4===mb&&!0===ta?"":""+ta,Ra?Y.setAttributeNS(Ra,ha,ta):Y.setAttribute(ha,ta))))}function h(Y){if(null===Y||"object"!==typeof Y)return null;Y=Ma&&Y[Ma]||Y["@@iterator"];return"function"===typeof Y?Y:null}function r(Y){if(void 0===Ua)try{throw Error();
}catch(ta){var ha=ta.stack.trim().match(/\n( *(at )?)/);Ua=ha&&ha[1]||""}return"\n"+Ua+Y}function l(Y,ha){if(!Y||nb)return"";nb=!0;var ta=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(ha)if(ha=function(){throw Error();},Object.defineProperty(ha.prototype,"props",{set:function(){throw Error();}}),"object"===typeof Reflect&&Reflect.construct){try{Reflect.construct(ha,[])}catch(ad){var Ra=ad}Reflect.construct(Y,[],ha)}else{try{ha.call()}catch(ad){Ra=ad}Y.call(ha.prototype)}else{try{throw Error();
}catch(ad){Ra=ad}Y()}}catch(ad){if(ad&&Ra&&"string"===typeof ad.stack){for(var mb=ad.stack.split("\n"),Kb=Ra.stack.split("\n"),cc=mb.length-1,zc=Kb.length-1;1<=cc&&0<=zc&&mb[cc]!==Kb[zc];)zc--;for(;1<=cc&&0<=zc;cc--,zc--)if(mb[cc]!==Kb[zc]){if(1!==cc||1!==zc){do if(cc--,zc--,0>zc||mb[cc]!==Kb[zc])return"\n"+mb[cc].replace(" at new "," at ");while(1<=cc&&0<=zc)}break}}}finally{nb=!1,Error.prepareStackTrace=ta}return(Y=Y?Y.displayName||Y.name:"")?r(Y):""}function c(Y){switch(Y.tag){case 5:return r(Y.type);
case 16:return r("Lazy");case 13:return r("Suspense");case 19:return r("SuspenseList");case 0:case 2:case 15:return Y=l(Y.type,!1),Y;case 11:return Y=l(Y.type.render,!1),Y;case 22:return Y=l(Y.type._render,!1),Y;case 1:return Y=l(Y.type,!0),Y;default:return""}}function d(Y){if(null==Y)return null;if("function"===typeof Y)return Y.displayName||Y.name||null;if("string"===typeof Y)return Y;switch(Y){case ne:return"Fragment";case re:return"Portal";case we:return"Profiler";case Le:return"StrictMode";case wf:return"Suspense";
case lg:return"SuspenseList"}if("object"===typeof Y)switch(Y.$$typeof){case Ne:return(Y.displayName||"Context")+".Consumer";case kf:return(Y._context.displayName||"Context")+".Provider";case xf:var ha=Y.render;ha=ha.displayName||ha.name||"";return Y.displayName||(""!==ha?"ForwardRef("+ha+")":"ForwardRef");case Cf:return d(Y.type);case ef:return d(Y._render);case Dg:ha=Y._payload;Y=Y._init;try{return d(Y(ha))}catch(ta){}}return null}function e(Y){switch(typeof Y){case "boolean":case "number":case "object":case "string":case "undefined":return Y;
default:return""}}function f(Y){var ha=Y.type;return(Y=Y.nodeName)&&"input"===Y.toLowerCase()&&("checkbox"===ha||"radio"===ha)}function q(Y){var ha=f(Y)?"checked":"value",ta=Object.getOwnPropertyDescriptor(Y.constructor.prototype,ha),Ra=""+Y[ha];if(!Y.hasOwnProperty(ha)&&"undefined"!==typeof ta&&"function"===typeof ta.get&&"function"===typeof ta.set){var mb=ta.get,Kb=ta.set;Object.defineProperty(Y,ha,{configurable:!0,get:function(){return mb.call(this)},set:function(cc){Ra=""+cc;Kb.call(this,cc)}});
Object.defineProperty(Y,ha,{enumerable:ta.enumerable});return{getValue:function(){return Ra},setValue:function(cc){Ra=""+cc},stopTracking:function(){Y._valueTracker=null;delete Y[ha]}}}}function t(Y){Y._valueTracker||(Y._valueTracker=q(Y))}function w(Y){if(!Y)return!1;var ha=Y._valueTracker;if(!ha)return!0;var ta=ha.getValue(),Ra="";Y&&(Ra=f(Y)?Y.checked?"true":"false":Y.value);Y=Ra;return Y!==ta?(ha.setValue(Y),!0):!1}function x(Y){Y=Y||("undefined"!==typeof document?document:void 0);if("undefined"===
typeof Y)return null;try{return Y.activeElement||Y.body}catch(ha){return Y.body}}function z(Y,ha){var ta=ha.checked;return Rb({},ha,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:null!=ta?ta:Y._wrapperState.initialChecked})}function B(Y,ha){var ta=null==ha.defaultValue?"":ha.defaultValue,Ra=null!=ha.checked?ha.checked:ha.defaultChecked;ta=e(null!=ha.value?ha.value:ta);Y._wrapperState={initialChecked:Ra,initialValue:ta,controlled:"checkbox"===ha.type||"radio"===ha.type?null!=ha.checked:
null!=ha.value}}function A(Y,ha){ha=ha.checked;null!=ha&&g(Y,"checked",ha,!1)}function D(Y,ha){A(Y,ha);var ta=e(ha.value),Ra=ha.type;if(null!=ta)if("number"===Ra){if(0===ta&&""===Y.value||Y.value!=ta)Y.value=""+ta}else Y.value!==""+ta&&(Y.value=""+ta);else if("submit"===Ra||"reset"===Ra){Y.removeAttribute("value");return}ha.hasOwnProperty("value")?v(Y,ha.type,ta):ha.hasOwnProperty("defaultValue")&&v(Y,ha.type,e(ha.defaultValue));null==ha.checked&&null!=ha.defaultChecked&&(Y.defaultChecked=!!ha.defaultChecked)}
function C(Y,ha,ta){if(ha.hasOwnProperty("value")||ha.hasOwnProperty("defaultValue")){var Ra=ha.type;if(!("submit"!==Ra&&"reset"!==Ra||void 0!==ha.value&&null!==ha.value))return;ha=""+Y._wrapperState.initialValue;ta||ha===Y.value||(Y.value=ha);Y.defaultValue=ha}ta=Y.name;""!==ta&&(Y.name="");Y.defaultChecked=!!Y._wrapperState.initialChecked;""!==ta&&(Y.name=ta)}function v(Y,ha,ta){if("number"!==ha||x(Y.ownerDocument)!==Y)null==ta?Y.defaultValue=""+Y._wrapperState.initialValue:Y.defaultValue!==""+
ta&&(Y.defaultValue=""+ta)}function y(Y){var ha="";Lb.Children.forEach(Y,function(ta){null!=ta&&(ha+=ta)});return ha}function F(Y,ha){Y=Rb({children:void 0},ha);if(ha=y(ha.children))Y.children=ha;return Y}function J(Y,ha,ta,Ra){Y=Y.options;if(ha){ha={};for(var mb=0;mb<ta.length;mb++)ha["$"+ta[mb]]=!0;for(ta=0;ta<Y.length;ta++)mb=ha.hasOwnProperty("$"+Y[ta].value),Y[ta].selected!==mb&&(Y[ta].selected=mb),mb&&Ra&&(Y[ta].defaultSelected=!0)}else{ta=""+e(ta);ha=null;for(mb=0;mb<Y.length;mb++){if(Y[mb].value===
ta){Y[mb].selected=!0;Ra&&(Y[mb].defaultSelected=!0);return}null!==ha||Y[mb].disabled||(ha=Y[mb])}null!==ha&&(ha.selected=!0)}}function K(Y,ha){if(null!=ha.dangerouslySetInnerHTML)throw Error(b(91));return Rb({},ha,{value:void 0,defaultValue:void 0,children:""+Y._wrapperState.initialValue})}function M(Y,ha){var ta=ha.value;if(null==ta){ta=ha.children;ha=ha.defaultValue;if(null!=ta){if(null!=ha)throw Error(b(92));if(Array.isArray(ta)){if(!(1>=ta.length))throw Error(b(93));ta=ta[0]}ha=ta}null==ha&&
(ha="");ta=ha}Y._wrapperState={initialValue:e(ta)}}function H(Y,ha){var ta=e(ha.value),Ra=e(ha.defaultValue);null!=ta&&(ta=""+ta,ta!==Y.value&&(Y.value=ta),null==ha.defaultValue&&Y.defaultValue!==ta&&(Y.defaultValue=ta));null!=Ra&&(Y.defaultValue=""+Ra)}function O(Y){var ha=Y.textContent;ha===Y._wrapperState.initialValue&&""!==ha&&null!==ha&&(Y.value=ha)}function I(Y){switch(Y){case "svg":return"http://www.w3.org/2000/svg";case "math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}
function L(Y,ha){return null==Y||"http://www.w3.org/1999/xhtml"===Y?I(ha):"http://www.w3.org/2000/svg"===Y&&"foreignObject"===ha?"http://www.w3.org/1999/xhtml":Y}function Q(Y,ha){if(ha){var ta=Y.firstChild;if(ta&&ta===Y.lastChild&&3===ta.nodeType){ta.nodeValue=ha;return}}Y.textContent=ha}function Z(Y,ha,ta){return null==ha||"boolean"===typeof ha||""===ha?"":ta||"number"!==typeof ha||0===ha||Eb.hasOwnProperty(Y)&&Eb[Y]?(""+ha).trim():ha+"px"}function ba(Y,ha){Y=Y.style;for(var ta in ha)if(ha.hasOwnProperty(ta)){var Ra=
0===ta.indexOf("--"),mb=Z(ta,ha[ta],Ra);"float"===ta&&(ta="cssFloat");Ra?Y.setProperty(ta,mb):Y[ta]=mb}}function V(Y,ha){if(ha){if(mc[Y]&&(null!=ha.children||null!=ha.dangerouslySetInnerHTML))throw Error(b(137,Y));if(null!=ha.dangerouslySetInnerHTML){if(null!=ha.children)throw Error(b(60));if(!("object"===typeof ha.dangerouslySetInnerHTML&&"__html"in ha.dangerouslySetInnerHTML))throw Error(b(61));}if(null!=ha.style&&"object"!==typeof ha.style)throw Error(b(62));}}function S(Y,ha){if(-1===Y.indexOf("-"))return"string"===
typeof ha.is;switch(Y){case "annotation-xml":case "color-profile":case "font-face":case "font-face-src":case "font-face-uri":case "font-face-format":case "font-face-name":case "missing-glyph":return!1;default:return!0}}function T(Y){Y=Y.target||Y.srcElement||window;Y.correspondingUseElement&&(Y=Y.correspondingUseElement);return 3===Y.nodeType?Y.parentNode:Y}function fa(Y){if(Y=Ae(Y)){if("function"!==typeof ic)throw Error(b(280));var ha=Y.stateNode;ha&&(ha=hf(ha),ic(Y.stateNode,Y.type,ha))}}function W(Y){Ac?
Kc?Kc.push(Y):Kc=[Y]:Ac=Y}function aa(){if(Ac){var Y=Ac,ha=Kc;Kc=Ac=null;fa(Y);if(ha)for(Y=0;Y<ha.length;Y++)fa(ha[Y])}}function ja(Y,ha){return Y(ha)}function ma(Y,ha,ta,Ra,mb){return Y(ha,ta,Ra,mb)}function ia(){}function ra(){if(null!==Ac||null!==Kc)ia(),aa()}function wa(Y,ha,ta){if(od)return Y(ha,ta);od=!0;try{return Lc(Y,ha,ta)}finally{od=!1,ra()}}function pa(Y,ha){var ta=Y.stateNode;if(null===ta)return null;var Ra=hf(ta);if(null===Ra)return null;ta=Ra[ha];a:switch(ha){case "onClick":case "onClickCapture":case "onDoubleClick":case "onDoubleClickCapture":case "onMouseDown":case "onMouseDownCapture":case "onMouseMove":case "onMouseMoveCapture":case "onMouseUp":case "onMouseUpCapture":case "onMouseEnter":(Ra=
!Ra.disabled)||(Y=Y.type,Ra=!("button"===Y||"input"===Y||"select"===Y||"textarea"===Y));Y=!Ra;break a;default:Y=!1}if(Y)return null;if(ta&&"function"!==typeof ta)throw Error(b(231,ha,typeof ta));return ta}function la(Y,ha,ta,Ra,mb,Kb,cc,zc,ad){var Jd=Array.prototype.slice.call(arguments,3);try{ha.apply(ta,Jd)}catch(Re){this.onError(Re)}}function ka(Y,ha,ta,Ra,mb,Kb,cc,zc,ad){Id=!1;zd=null;la.apply(je,arguments)}function na(Y,ha,ta,Ra,mb,Kb,cc,zc,ad){ka.apply(this,arguments);if(Id){if(Id){var Jd=zd;
Id=!1;zd=null}else throw Error(b(198));ee||(ee=!0,le=Jd)}}function oa(Y){var ha=Y,ta=Y;if(Y.alternate)for(;ha.return;)ha=ha.return;else{Y=ha;do ha=Y,0!==(ha.flags&1026)&&(ta=ha.return),Y=ha.return;while(Y)}return 3===ha.tag?ta:null}function sa(Y){if(13===Y.tag){var ha=Y.memoizedState;null===ha&&(Y=Y.alternate,null!==Y&&(ha=Y.memoizedState));if(null!==ha)return ha.dehydrated}return null}function za(Y){if(oa(Y)!==Y)throw Error(b(188));}function Ha(Y){var ha=Y.alternate;if(!ha){ha=oa(Y);if(null===ha)throw Error(b(188));
return ha!==Y?null:Y}for(var ta=Y,Ra=ha;;){var mb=ta.return;if(null===mb)break;var Kb=mb.alternate;if(null===Kb){Ra=mb.return;if(null!==Ra){ta=Ra;continue}break}if(mb.child===Kb.child){for(Kb=mb.child;Kb;){if(Kb===ta)return za(mb),Y;if(Kb===Ra)return za(mb),ha;Kb=Kb.sibling}throw Error(b(188));}if(ta.return!==Ra.return)ta=mb,Ra=Kb;else{for(var cc=!1,zc=mb.child;zc;){if(zc===ta){cc=!0;ta=mb;Ra=Kb;break}if(zc===Ra){cc=!0;Ra=mb;ta=Kb;break}zc=zc.sibling}if(!cc){for(zc=Kb.child;zc;){if(zc===ta){cc=!0;
ta=Kb;Ra=mb;break}if(zc===Ra){cc=!0;Ra=Kb;ta=mb;break}zc=zc.sibling}if(!cc)throw Error(b(189));}}if(ta.alternate!==Ra)throw Error(b(190));}if(3!==ta.tag)throw Error(b(188));return ta.stateNode.current===ta?Y:ha}function Wa(Y){Y=Ha(Y);if(!Y)return null;for(var ha=Y;;){if(5===ha.tag||6===ha.tag)return ha;if(ha.child)ha.child.return=ha,ha=ha.child;else{if(ha===Y)break;for(;!ha.sibling;){if(!ha.return||ha.return===Y)return null;ha=ha.return}ha.sibling.return=ha.return;ha=ha.sibling}}return null}function Za(Y,
ha){for(var ta=Y.alternate;null!==ha;){if(ha===Y||ha===ta)return!0;ha=ha.return}return!1}function bb(Y,ha,ta,Ra,mb){return{blockedOn:Y,domEventName:ha,eventSystemFlags:ta|16,nativeEvent:mb,targetContainers:[Ra]}}function sb(Y,ha){switch(Y){case "focusin":case "focusout":Od=null;break;case "dragenter":case "dragleave":sf=null;break;case "mouseover":case "mouseout":Vf=null;break;case "pointerover":case "pointerout":Bf.delete(ha.pointerId);break;case "gotpointercapture":case "lostpointercapture":Of.delete(ha.pointerId)}}
function hb(Y,ha,ta,Ra,mb,Kb){if(null===Y||Y.nativeEvent!==Kb)return Y=bb(ha,ta,Ra,mb,Kb),null!==ha&&(ha=Ae(ha),null!==ha&&ig(ha)),Y;Y.eventSystemFlags|=Ra;ha=Y.targetContainers;null!==mb&&-1===ha.indexOf(mb)&&ha.push(mb);return Y}function ub(Y,ha,ta,Ra,mb){switch(ha){case "focusin":return Od=hb(Od,Y,ha,ta,Ra,mb),!0;case "dragenter":return sf=hb(sf,Y,ha,ta,Ra,mb),!0;case "mouseover":return Vf=hb(Vf,Y,ha,ta,Ra,mb),!0;case "pointerover":var Kb=mb.pointerId;Bf.set(Kb,hb(Bf.get(Kb)||null,Y,ha,ta,Ra,mb));
return!0;case "gotpointercapture":return Kb=mb.pointerId,Of.set(Kb,hb(Of.get(Kb)||null,Y,ha,ta,Ra,mb)),!0}return!1}function pb(Y){var ha=Ud(Y.target);if(null!==ha){var ta=oa(ha);if(null!==ta)if(ha=ta.tag,13===ha){if(ha=sa(ta),null!==ha){Y.blockedOn=ha;Pk(Y.lanePriority,function(){dc.unstable_runWithPriority(Y.priority,function(){ol(ta)})});return}}else if(3===ha&&ta.stateNode.hydrate){Y.blockedOn=3===ta.tag?ta.stateNode.containerInfo:null;return}}Y.blockedOn=null}function Ab(Y){if(null!==Y.blockedOn)return!1;
for(var ha=Y.targetContainers;0<ha.length;){var ta=Ia(Y.domEventName,Y.eventSystemFlags,ha[0],Y.nativeEvent);if(null!==ta)return ha=Ae(ta),null!==ha&&ig(ha),Y.blockedOn=ta,!1;ha.shift()}return!0}function tb(Y,ha,ta){Ab(Y)&&ta.delete(ha)}function vb(){for(Gf=!1;0<me.length;){var Y=me[0];if(null!==Y.blockedOn){Y=Ae(Y.blockedOn);null!==Y&&fk(Y);break}for(var ha=Y.targetContainers;0<ha.length;){var ta=Ia(Y.domEventName,Y.eventSystemFlags,ha[0],Y.nativeEvent);if(null!==ta){Y.blockedOn=ta;break}ha.shift()}null===
Y.blockedOn&&me.shift()}null!==Od&&Ab(Od)&&(Od=null);null!==sf&&Ab(sf)&&(sf=null);null!==Vf&&Ab(Vf)&&(Vf=null);Bf.forEach(tb);Of.forEach(tb)}function qb(Y,ha){Y.blockedOn===ha&&(Y.blockedOn=null,Gf||(Gf=!0,dc.unstable_scheduleCallback(dc.unstable_NormalPriority,vb)))}function zb(Y){function ha(mb){return qb(mb,Y)}if(0<me.length){qb(me[0],Y);for(var ta=1;ta<me.length;ta++){var Ra=me[ta];Ra.blockedOn===Y&&(Ra.blockedOn=null)}}null!==Od&&qb(Od,Y);null!==sf&&qb(sf,Y);null!==Vf&&qb(Vf,Y);Bf.forEach(ha);
Of.forEach(ha);for(ta=0;ta<Nf.length;ta++)Ra=Nf[ta],Ra.blockedOn===Y&&(Ra.blockedOn=null);for(;0<Nf.length&&(ta=Nf[0],null===ta.blockedOn);)pb(ta),null===ta.blockedOn&&Nf.shift()}function La(Y,ha){var ta={};ta[Y.toLowerCase()]=ha.toLowerCase();ta["Webkit"+Y]="webkit"+ha;ta["Moz"+Y]="moz"+ha;return ta}function Ka(Y){if(wg[Y])return wg[Y];if(!gg[Y])return Y;var ha=gg[Y],ta;for(ta in ha)if(ha.hasOwnProperty(ta)&&ta in Fg)return wg[Y]=ha[ta];return Y}function ya(Y,ha){for(var ta=0;ta<Y.length;ta+=2){var Ra=
Y[ta],mb=Y[ta+1];mb="on"+(mb[0].toUpperCase()+mb.slice(1));rg.set(Ra,ha);Fi.set(Ra,mb);N(mb,[Ra])}}function Aa(Y){if(0!==(1&Y))return yg=15,1;if(0!==(2&Y))return yg=14,2;if(0!==(4&Y))return yg=13,4;var ha=24&Y;if(0!==ha)return yg=12,ha;if(0!==(Y&32))return yg=11,32;ha=192&Y;if(0!==ha)return yg=10,ha;if(0!==(Y&256))return yg=9,256;ha=3584&Y;if(0!==ha)return yg=8,ha;if(0!==(Y&4096))return yg=7,4096;ha=4186112&Y;if(0!==ha)return yg=6,ha;ha=62914560&Y;if(0!==ha)return yg=5,ha;if(Y&67108864)return yg=
4,67108864;if(0!==(Y&134217728))return yg=3,134217728;ha=805306368&Y;if(0!==ha)return yg=2,ha;if(0!==(1073741824&Y))return yg=1,1073741824;yg=8;return Y}function Ja(Y){switch(Y){case 99:return 15;case 98:return 10;case 97:case 96:return 8;case 95:return 2;default:return 0}}function Ta(Y){switch(Y){case 15:case 14:return 99;case 13:case 12:case 11:case 10:return 98;case 9:case 8:case 7:case 6:case 4:case 5:return 97;case 3:case 2:case 1:return 95;case 0:return 90;default:throw Error(b(358,Y));}}function $a(Y,
ha){var ta=Y.pendingLanes;if(0===ta)return yg=0;var Ra=0,mb=0,Kb=Y.expiredLanes,cc=Y.suspendedLanes,zc=Y.pingedLanes;if(0!==Kb)Ra=Kb,mb=yg=15;else if(Kb=ta&134217727,0!==Kb){var ad=Kb&~cc;0!==ad?(Ra=Aa(ad),mb=yg):(zc&=Kb,0!==zc&&(Ra=Aa(zc),mb=yg))}else Kb=ta&~cc,0!==Kb?(Ra=Aa(Kb),mb=yg):0!==zc&&(Ra=Aa(zc),mb=yg);if(0===Ra)return 0;Ra=31-dh(Ra);Ra=ta&((0>Ra?0:1<<Ra)<<1)-1;if(0!==ha&&ha!==Ra&&0===(ha&cc)){Aa(ha);if(mb<=yg)return ha;yg=mb}ha=Y.entangledLanes;if(0!==ha)for(Y=Y.entanglements,ha&=Ra;0<
ha;)ta=31-dh(ha),mb=1<<ta,Ra|=Y[ta],ha&=~mb;return Ra}function ab(Y){Y=Y.pendingLanes&-1073741825;return 0!==Y?Y:Y&1073741824?1073741824:0}function Db(Y,ha){switch(Y){case 15:return 1;case 14:return 2;case 12:return Y=Nb(24&~ha),0===Y?Db(10,ha):Y;case 10:return Y=Nb(192&~ha),0===Y?Db(8,ha):Y;case 8:return Y=Nb(3584&~ha),0===Y&&(Y=Nb(4186112&~ha),0===Y&&(Y=512)),Y;case 2:return ha=Nb(805306368&~ha),0===ha&&(ha=268435456),ha}throw Error(b(358,Y));}function Nb(Y){return Y&-Y}function ec(Y){for(var ha=
[],ta=0;31>ta;ta++)ha.push(Y);return ha}function ob(Y,ha,ta){Y.pendingLanes|=ha;var Ra=ha-1;Y.suspendedLanes&=Ra;Y.pingedLanes&=Ra;Y=Y.eventTimes;ha=31-dh(ha);Y[ha]=ta}function Cb(Y){return 0===Y?32:31-(ii(Y)/Vi|0)|0}function Qb(Y,ha,ta,Ra){Qc||ia();var mb=Jc,Kb=Qc;Qc=!0;try{ma(mb,Y,ha,ta,Ra)}finally{(Qc=Kb)||ra()}}function yc(Y,ha,ta,Ra){Gi(Jg,Jc.bind(null,Y,ha,ta,Ra))}function Jc(Y,ha,ta,Ra){if(qi){var mb;if((mb=0===(ha&4))&&0<me.length&&-1<Uf.indexOf(Y))Y=bb(null,Y,ha,ta,Ra),me.push(Y);else{var Kb=
Ia(Y,ha,ta,Ra);if(null===Kb)mb&&sb(Y,Ra);else{if(mb){if(-1<Uf.indexOf(Y)){Y=bb(Kb,Y,ha,ta,Ra);me.push(Y);return}if(ub(Kb,Y,ha,ta,Ra))return;sb(Y,Ra)}id(Y,ha,Ra,null,ta)}}}}function Ia(Y,ha,ta,Ra){var mb=T(Ra);mb=Ud(mb);if(null!==mb){var Kb=oa(mb);if(null===Kb)mb=null;else{var cc=Kb.tag;if(13===cc){mb=sa(Kb);if(null!==mb)return mb;mb=null}else if(3===cc){if(Kb.stateNode.hydrate)return 3===Kb.tag?Kb.stateNode.containerInfo:null;mb=null}else Kb!==mb&&(mb=null)}}id(Y,ha,Ra,mb,ta);return null}function Na(){if(ti)return ti;
var Y,ha=Ji,ta=ha.length,Ra,mb="value"in Yh?Yh.value:Yh.textContent,Kb=mb.length;for(Y=0;Y<ta&&ha[Y]===mb[Y];Y++);var cc=ta-Y;for(Ra=1;Ra<=cc&&ha[ta-Ra]===mb[Kb-Ra];Ra++);return ti=mb.slice(Y,1<Ra?1-Ra:void 0)}function ib(Y){var ha=Y.keyCode;"charCode"in Y?(Y=Y.charCode,0===Y&&13===ha&&(Y=13)):Y=ha;10===Y&&(Y=13);return 32<=Y||13===Y?Y:0}function Gb(){return!0}function Hb(){return!1}function $b(Y){function ha(ta,Ra,mb,Kb,cc){this._reactName=ta;this._targetInst=mb;this.type=Ra;this.nativeEvent=Kb;
this.target=cc;this.currentTarget=null;for(var zc in Y)Y.hasOwnProperty(zc)&&(ta=Y[zc],this[zc]=ta?ta(Kb):Kb[zc]);this.isDefaultPrevented=(null!=Kb.defaultPrevented?Kb.defaultPrevented:!1===Kb.returnValue)?Gb:Hb;this.isPropagationStopped=Hb;return this}Rb(ha.prototype,{preventDefault:function(){this.defaultPrevented=!0;var ta=this.nativeEvent;ta&&(ta.preventDefault?ta.preventDefault():"unknown"!==typeof ta.returnValue&&(ta.returnValue=!1),this.isDefaultPrevented=Gb)},stopPropagation:function(){var ta=
this.nativeEvent;ta&&(ta.stopPropagation?ta.stopPropagation():"unknown"!==typeof ta.cancelBubble&&(ta.cancelBubble=!0),this.isPropagationStopped=Gb)},persist:function(){},isPersistent:Gb});return ha}function uc(Y){var ha=this.nativeEvent;return ha.getModifierState?ha.getModifierState(Y):(Y=hl[Y])?!!ha[Y]:!1}function fd(){return uc}function fb(Y,ha){switch(Y){case "keyup":return-1!==Uk.indexOf(ha.keyCode);case "keydown":return 229!==ha.keyCode;case "keypress":case "mousedown":case "focusout":return!0;
default:return!1}}function Pb(Y){Y=Y.detail;return"object"===typeof Y&&"data"in Y?Y.data:null}function fc(Y,ha){switch(Y){case "compositionend":return Pb(ha);case "keypress":if(32!==ha.which)return null;Ej=!0;return pj;case "textInput":return Y=ha.data,Y===pj&&Ej?null:Y;default:return null}}function Fc(Y,ha){if(Zh)return"compositionend"===Y||!Rj&&fb(Y,ha)?(Y=Na(),ti=Ji=Yh=null,Zh=!1,Y):null;switch(Y){case "paste":return null;case "keypress":if(!(ha.ctrlKey||ha.altKey||ha.metaKey)||ha.ctrlKey&&ha.altKey){if(ha.char&&
1<ha.char.length)return ha.char;if(ha.which)return String.fromCharCode(ha.which)}return null;case "compositionend":return Ag&&"ko"!==ha.locale?null:ha.data;default:return null}}function Pc(Y){var ha=Y&&Y.nodeName&&Y.nodeName.toLowerCase();return"input"===ha?!!Hk[Y.type]:"textarea"===ha?!0:!1}function Uc(Y,ha,ta,Ra){W(Ra);ha=Sd(ha,"onChange");0<ha.length&&(ta=new Ki("onChange","change",null,ta,Ra),Y.push({event:ta,listeners:ha}))}function rb(Y){cd(Y,0)}function Jb(Y){var ha=rf(Y);if(w(ha))return Y}
function sc(Y,ha){if("change"===Y)return ha}function nc(){ej&&(ej.detachEvent("onpropertychange",vc),Li=ej=null)}function vc(Y){if("value"===Y.propertyName&&Jb(Li)){var ha=[];Uc(ha,Li,Y,T(Y));Y=rb;if(Qc)Y(ha);else{Qc=!0;try{ja(Y,ha)}finally{Qc=!1,ra()}}}}function Vb(Y,ha,ta){"focusin"===Y?(nc(),ej=ha,Li=ta,ej.attachEvent("onpropertychange",vc)):"focusout"===Y&&nc()}function Wb(Y){if("selectionchange"===Y||"keyup"===Y||"keydown"===Y)return Jb(Li)}function yb(Y,ha){if("click"===Y)return Jb(ha)}function ac(Y,
ha){if("input"===Y||"change"===Y)return Jb(ha)}function Ub(Y,ha){return Y===ha&&(0!==Y||1/Y===1/ha)||Y!==Y&&ha!==ha}function lc(Y,ha){if(Ph(Y,ha))return!0;if("object"!==typeof Y||null===Y||"object"!==typeof ha||null===ha)return!1;var ta=Object.keys(Y),Ra=Object.keys(ha);if(ta.length!==Ra.length)return!1;for(Ra=0;Ra<ta.length;Ra++)if(!Fj.call(ha,ta[Ra])||!Ph(Y[ta[Ra]],ha[ta[Ra]]))return!1;return!0}function tc(Y){for(;Y&&Y.firstChild;)Y=Y.firstChild;return Y}function Rc(Y,ha){var ta=tc(Y);Y=0;for(var Ra;ta;){if(3===
ta.nodeType){Ra=Y+ta.textContent.length;if(Y<=ha&&Ra>=ha)return{node:ta,offset:ha-Y};Y=Ra}a:{for(;ta;){if(ta.nextSibling){ta=ta.nextSibling;break a}ta=ta.parentNode}ta=void 0}ta=tc(ta)}}function kd(Y,ha){return Y&&ha?Y===ha?!0:Y&&3===Y.nodeType?!1:ha&&3===ha.nodeType?kd(Y,ha.parentNode):"contains"in Y?Y.contains(ha):Y.compareDocumentPosition?!!(Y.compareDocumentPosition(ha)&16):!1:!1}function Cd(){for(var Y=window,ha=x();ha instanceof Y.HTMLIFrameElement;){try{var ta="string"===typeof ha.contentWindow.location.href}catch(Ra){ta=
!1}if(ta)Y=ha.contentWindow;else break;ha=x(Y.document)}return ha}function Gd(Y){var ha=Y&&Y.nodeName&&Y.nodeName.toLowerCase();return ha&&("input"===ha&&("text"===Y.type||"search"===Y.type||"tel"===Y.type||"url"===Y.type||"password"===Y.type)||"textarea"===ha||"true"===Y.contentEditable)}function Ad(Y,ha,ta){var Ra=ta.window===ta?ta.document:9===ta.nodeType?ta:ta.ownerDocument;Gj||null==gh||gh!==x(Ra)||(Ra=gh,"selectionStart"in Ra&&Gd(Ra)?Ra={start:Ra.selectionStart,end:Ra.selectionEnd}:(Ra=(Ra.ownerDocument&&
Ra.ownerDocument.defaultView||window).getSelection(),Ra={anchorNode:Ra.anchorNode,anchorOffset:Ra.anchorOffset,focusNode:Ra.focusNode,focusOffset:Ra.focusOffset}),Sj&&lc(Sj,Ra)||(Sj=Ra,Ra=Sd(li,"onSelect"),0<Ra.length&&(ha=new Ki("onSelect","select",null,ha,ta),Y.push({event:ha,listeners:Ra}),ha.target=gh)))}function Nc(Y,ha,ta){var Ra=Y.type||"unknown-event";Y.currentTarget=ta;na(Ra,ha,void 0,Y);Y.currentTarget=null}function cd(Y,ha){ha=0!==(ha&4);for(var ta=0;ta<Y.length;ta++){var Ra=Y[ta],mb=Ra.event;
Ra=Ra.listeners;a:{var Kb=void 0;if(ha)for(var cc=Ra.length-1;0<=cc;cc--){var zc=Ra[cc],ad=zc.instance,Jd=zc.currentTarget;zc=zc.listener;if(ad!==Kb&&mb.isPropagationStopped())break a;Nc(mb,zc,Jd);Kb=ad}else for(cc=0;cc<Ra.length;cc++){zc=Ra[cc];ad=zc.instance;Jd=zc.currentTarget;zc=zc.listener;if(ad!==Kb&&mb.isPropagationStopped())break a;Nc(mb,zc,Jd);Kb=ad}}}if(ee)throw Y=le,ee=!1,le=null,Y;}function Cc(Y,ha){var ta=Te(ha),Ra=Y+"__bubble";ta.has(Ra)||(Sc(ha,Y,2,!1),ta.add(Ra))}function dd(Y){Y[kk]||
(Y[kk]=!0,Ic.forEach(function(ha){jk.has(ha)||Vc(ha,!1,Y,null);Vc(ha,!0,Y,null)}))}function Vc(Y,ha,ta,Ra){var mb=4<arguments.length&&void 0!==arguments[4]?arguments[4]:0,Kb=ta;"selectionchange"===Y&&9!==ta.nodeType&&(Kb=ta.ownerDocument);if(null!==Ra&&!ha&&jk.has(Y)){if("scroll"!==Y)return;mb|=2;Kb=Ra}var cc=Te(Kb),zc=Y+"__"+(ha?"capture":"bubble");cc.has(zc)||(ha&&(mb|=4),Sc(Kb,Y,mb,ha),cc.add(zc))}function Sc(Y,ha,ta,Ra){var mb=rg.get(ha);switch(void 0===mb?2:mb){case 0:mb=Qb;break;case 1:mb=yc;
break;default:mb=Jc}ta=mb.bind(null,ha,ta,Y);mb=void 0;!sd||"touchstart"!==ha&&"touchmove"!==ha&&"wheel"!==ha||(mb=!0);Ra?void 0!==mb?Y.addEventListener(ha,ta,{capture:!0,passive:mb}):Y.addEventListener(ha,ta,!0):void 0!==mb?Y.addEventListener(ha,ta,{passive:mb}):Y.addEventListener(ha,ta,!1)}function id(Y,ha,ta,Ra,mb){var Kb=Ra;if(0===(ha&1)&&0===(ha&2)&&null!==Ra)a:for(;;){if(null===Ra)return;var cc=Ra.tag;if(3===cc||4===cc){var zc=Ra.stateNode.containerInfo;if(zc===mb||8===zc.nodeType&&zc.parentNode===
mb)break;if(4===cc)for(cc=Ra.return;null!==cc;){var ad=cc.tag;if(3===ad||4===ad)if(ad=cc.stateNode.containerInfo,ad===mb||8===ad.nodeType&&ad.parentNode===mb)return;cc=cc.return}for(;null!==zc;){cc=Ud(zc);if(null===cc)return;ad=cc.tag;if(5===ad||6===ad){Ra=Kb=cc;continue a}zc=zc.parentNode}}Ra=Ra.return}wa(function(){var Jd=Kb,Re=T(ta),If=[];a:{var Rd=Fi.get(Y);if(void 0!==Rd){var Fe=Ki,Kf=Y;switch(Y){case "keypress":if(0===ib(ta))break a;case "keydown":case "keyup":Fe=Rk;break;case "focusin":Kf=
"focus";Fe=jj;break;case "focusout":Kf="blur";Fe=jj;break;case "beforeblur":case "afterblur":Fe=jj;break;case "click":if(2===ta.button)break a;case "auxclick":case "dblclick":case "mousedown":case "mousemove":case "mouseup":case "mouseout":case "mouseover":case "contextmenu":Fe=Tk;break;case "drag":case "dragend":case "dragenter":case "dragexit":case "dragleave":case "dragover":case "dragstart":case "drop":Fe=oj;break;case "touchcancel":case "touchend":case "touchmove":case "touchstart":Fe=Fk;break;
case Wh:case pi:case Ui:Fe=kj;break;case xj:Fe=Gk;break;case "scroll":Fe=dl;break;case "wheel":Fe=Zi;break;case "copy":case "cut":case "paste":Fe=cl;break;case "gotpointercapture":case "lostpointercapture":case "pointercancel":case "pointerdown":case "pointermove":case "pointerout":case "pointerover":case "pointerup":Fe=Aj}var tf=0!==(ha&4),td=!tf&&"scroll"===Y,gd=tf?null!==Rd?Rd+"Capture":null:Rd;tf=[];for(var jd=Jd,Zd;null!==jd;){Zd=jd;var ie=Zd.stateNode;5===Zd.tag&&null!==ie&&(Zd=ie,null!==gd&&
(ie=pa(jd,gd),null!=ie&&tf.push(Md(jd,ie,Zd))));if(td)break;jd=jd.return}0<tf.length&&(Rd=new Fe(Rd,Kf,null,ta,Re),If.push({event:Rd,listeners:tf}))}}if(0===(ha&7)){Rd="mouseover"===Y||"pointerover"===Y;Fe="mouseout"===Y||"pointerout"===Y;if(!Rd||0!==(ha&16)||!(Kf=ta.relatedTarget||ta.fromElement)||!Ud(Kf)&&!Kf[di])if(Fe||Rd){Rd=Re.window===Re?Re:(Rd=Re.ownerDocument)?Rd.defaultView||Rd.parentWindow:window;if(Fe){if(Kf=ta.relatedTarget||ta.toElement,Fe=Jd,Kf=Kf?Ud(Kf):null,null!==Kf&&(td=oa(Kf),Kf!==
td||5!==Kf.tag&&6!==Kf.tag))Kf=null}else Fe=null,Kf=Jd;if(Fe!==Kf){tf=Tk;ie="onMouseLeave";gd="onMouseEnter";jd="mouse";if("pointerout"===Y||"pointerover"===Y)tf=Aj,ie="onPointerLeave",gd="onPointerEnter",jd="pointer";td=null==Fe?Rd:rf(Fe);Zd=null==Kf?Rd:rf(Kf);Rd=new tf(ie,jd+"leave",Fe,ta,Re);Rd.target=td;Rd.relatedTarget=Zd;ie=null;Ud(Re)===Jd&&(tf=new tf(gd,jd+"enter",Kf,ta,Re),tf.target=Zd,tf.relatedTarget=td,ie=tf);td=ie;if(Fe&&Kf)b:{tf=Fe;gd=Kf;jd=0;for(Zd=tf;Zd;Zd=Td(Zd))jd++;Zd=0;for(ie=
gd;ie;ie=Td(ie))Zd++;for(;0<jd-Zd;)tf=Td(tf),jd--;for(;0<Zd-jd;)gd=Td(gd),Zd--;for(;jd--;){if(tf===gd||null!==gd&&tf===gd.alternate)break b;tf=Td(tf);gd=Td(gd)}tf=null}else tf=null;null!==Fe&&Ue(If,Rd,Fe,tf,!1);null!==Kf&&null!==td&&Ue(If,td,Kf,tf,!0)}}Rd=Jd?rf(Jd):window;Fe=Rd.nodeName&&Rd.nodeName.toLowerCase();if("select"===Fe||"input"===Fe&&"file"===Rd.type)var Qf=sc;else if(Pc(Rd))if(Oh)Qf=ac;else{Qf=Wb;var cf=Vb}else(Fe=Rd.nodeName)&&"input"===Fe.toLowerCase()&&("checkbox"===Rd.type||"radio"===
Rd.type)&&(Qf=yb);Qf&&(Qf=Qf(Y,Jd))?Uc(If,Qf,ta,Re):(cf&&cf(Y,Rd,Jd),"focusout"===Y&&(cf=Rd._wrapperState)&&cf.controlled&&"number"===Rd.type&&v(Rd,"number",Rd.value));cf=Jd?rf(Jd):window;switch(Y){case "focusin":if(Pc(cf)||"true"===cf.contentEditable)gh=cf,li=Jd,Sj=null;break;case "focusout":Sj=li=gh=null;break;case "mousedown":Gj=!0;break;case "contextmenu":case "mouseup":case "dragend":Gj=!1;Ad(If,ta,Re);break;case "selectionchange":if(Vj)break;case "keydown":case "keyup":Ad(If,ta,Re)}var Lf;if(Rj)a:{switch(Y){case "compositionstart":var Sf=
"onCompositionStart";break a;case "compositionend":Sf="onCompositionEnd";break a;case "compositionupdate":Sf="onCompositionUpdate";break a}Sf=void 0}else Zh?fb(Y,ta)&&(Sf="onCompositionEnd"):"keydown"===Y&&229===ta.keyCode&&(Sf="onCompositionStart");Sf&&(Ag&&"ko"!==ta.locale&&(Zh||"onCompositionStart"!==Sf?"onCompositionEnd"===Sf&&Zh&&(Lf=Na()):(Yh=Re,Ji="value"in Yh?Yh.value:Yh.textContent,Zh=!0)),cf=Sd(Jd,Sf),0<cf.length&&(Sf=new yk(Sf,Y,null,ta,Re),If.push({event:Sf,listeners:cf}),Lf?Sf.data=Lf:
(Lf=Pb(ta),null!==Lf&&(Sf.data=Lf))));if(Lf=bi?fc(Y,ta):Fc(Y,ta))Jd=Sd(Jd,"onBeforeInput"),0<Jd.length&&(Re=new yk("onBeforeInput","beforeinput",null,ta,Re),If.push({event:Re,listeners:Jd}),Re.data=Lf)}cd(If,ha)})}function Md(Y,ha,ta){return{instance:Y,listener:ha,currentTarget:ta}}function Sd(Y,ha){for(var ta=ha+"Capture",Ra=[];null!==Y;){var mb=Y,Kb=mb.stateNode;5===mb.tag&&null!==Kb&&(mb=Kb,Kb=pa(Y,ta),null!=Kb&&Ra.unshift(Md(Y,Kb,mb)),Kb=pa(Y,ha),null!=Kb&&Ra.push(Md(Y,Kb,mb)));Y=Y.return}return Ra}
function Td(Y){if(null===Y)return null;do Y=Y.return;while(Y&&5!==Y.tag);return Y?Y:null}function Ue(Y,ha,ta,Ra,mb){for(var Kb=ha._reactName,cc=[];null!==ta&&ta!==Ra;){var zc=ta,ad=zc.alternate,Jd=zc.stateNode;if(null!==ad&&ad===Ra)break;5===zc.tag&&null!==Jd&&(zc=Jd,mb?(ad=pa(ta,Kb),null!=ad&&cc.unshift(Md(ta,ad,zc))):mb||(ad=pa(ta,Kb),null!=ad&&cc.push(Md(ta,ad,zc))));ta=ta.return}0!==cc.length&&Y.push({event:ha,listeners:cc})}function Ke(){}function ve(Y,ha){switch(Y){case "button":case "input":case "select":case "textarea":return!!ha.autoFocus}return!1}
function zf(Y,ha){return"textarea"===Y||"option"===Y||"noscript"===Y||"string"===typeof ha.children||"number"===typeof ha.children||"object"===typeof ha.dangerouslySetInnerHTML&&null!==ha.dangerouslySetInnerHTML&&null!=ha.dangerouslySetInnerHTML.__html}function Ef(Y){1===Y.nodeType?Y.textContent="":9===Y.nodeType&&(Y=Y.body,null!=Y&&(Y.textContent=""))}function qf(Y){for(;null!=Y;Y=Y.nextSibling){var ha=Y.nodeType;if(1===ha||3===ha)break}return Y}function Ff(Y){Y=Y.previousSibling;for(var ha=0;Y;){if(8===
Y.nodeType){var ta=Y.data;if("$"===ta||"$!"===ta||"$?"===ta){if(0===ha)return Y;ha--}else"/$"===ta&&ha++}Y=Y.previousSibling}return null}function Rf(Y){return{$$typeof:hg,toString:Y,valueOf:Y}}function Ud(Y){var ha=Y[Ci];if(ha)return ha;for(var ta=Y.parentNode;ta;){if(ha=ta[di]||ta[Ci]){ta=ha.alternate;if(null!==ha.child||null!==ta&&null!==ta.child)for(Y=Ff(Y);null!==Y;){if(ta=Y[Ci])return ta;Y=Ff(Y)}return ha}Y=ta;ta=Y.parentNode}return null}function Ae(Y){Y=Y[Ci]||Y[di];return!Y||5!==Y.tag&&6!==
Y.tag&&13!==Y.tag&&3!==Y.tag?null:Y}function rf(Y){if(5===Y.tag||6===Y.tag)return Y.stateNode;throw Error(b(33));}function hf(Y){return Y[Hj]||null}function Te(Y){var ha=Y[mk];void 0===ha&&(ha=Y[mk]=new Set);return ha}function Be(Y){return{current:Y}}function Ie(Y){0>Ii||(Y.current=Yj[Ii],Yj[Ii]=null,Ii--)}function nf(Y,ha){Ii++;Yj[Ii]=Y.current;Y.current=ha}function Zc(Y,ha){var ta=Y.type.contextTypes;if(!ta)return Di;var Ra=Y.stateNode;if(Ra&&Ra.__reactInternalMemoizedUnmaskedChildContext===ha)return Ra.__reactInternalMemoizedMaskedChildContext;
var mb={},Kb;for(Kb in ta)mb[Kb]=ha[Kb];Ra&&(Y=Y.stateNode,Y.__reactInternalMemoizedUnmaskedChildContext=ha,Y.__reactInternalMemoizedMaskedChildContext=mb);return mb}function Bd(Y){Y=Y.childContextTypes;return null!==Y&&void 0!==Y}function Ob(){Ie(oh);Ie(nh)}function Zb(Y,ha,ta){if(nh.current!==Di)throw Error(b(168));nf(nh,ha);nf(oh,ta)}function Mc(Y,ha,ta){var Ra=Y.stateNode;Y=ha.childContextTypes;if("function"!==typeof Ra.getChildContext)return ta;Ra=Ra.getChildContext();for(var mb in Ra)if(!(mb in
Y))throw Error(b(108,d(ha)||"Unknown",mb));return Rb({},ta,Ra)}function Fd(Y){Y=(Y=Y.stateNode)&&Y.__reactInternalMemoizedMergedChildContext||Di;Mi=nh.current;nf(nh,Y);nf(oh,oh.current);return!0}function rd(Y,ha,ta){var Ra=Y.stateNode;if(!Ra)throw Error(b(169));ta?(Y=Mc(Y,ha,Mi),Ra.__reactInternalMemoizedMergedChildContext=Y,Ie(oh),Ie(nh),nf(nh,Y)):Ie(oh);nf(oh,ta)}function pe(){switch(Xk()){case ak:return 99;case Kk:return 98;case Lk:return 97;case Mk:return 96;case Vg:return 95;default:throw Error(b(332));
}}function Hd(Y){switch(Y){case 99:return ak;case 98:return Kk;case 97:return Lk;case 96:return Mk;case 95:return Vg;default:throw Error(b(332));}}function qe(Y,ha){Y=Hd(Y);return Vk(Y,ha)}function Ge(Y,ha,ta){Y=Hd(Y);return Zj(Y,ha,ta)}function oe(){if(null!==$i){var Y=$i;$i=null;nk(Y)}xb()}function xb(){if(!Oi&&null!==Ni){Oi=!0;var Y=0;try{var ha=Ni;qe(99,function(){for(;Y<ha.length;Y++){var ta=ha[Y];do ta=ta(!0);while(null!==ta)}});Ni=null}catch(ta){throw null!==Ni&&(Ni=Ni.slice(Y+1)),Zj(ak,oe),
ta;}finally{Oi=!1}}}function oc(Y,ha){if(Y&&Y.defaultProps){ha=Rb({},ha);Y=Y.defaultProps;for(var ta in Y)void 0===ha[ta]&&(ha[ta]=Y[ta])}return ha}function Yb(Y){var ha=tj.current;Ie(tj);Y.type._context._currentValue=ha}function Bc(Y,ha){for(;null!==Y;){var ta=Y.alternate;if((Y.childLanes&ha)===ha)if(null===ta||(ta.childLanes&ha)===ha)break;else ta.childLanes|=ha;else Y.childLanes|=ha,null!==ta&&(ta.childLanes|=ha);Y=Y.return}}function Yc(Y,ha){Ij=Y;uj=fj=null;Y=Y.dependencies;null!==Y&&null!==Y.firstContext&&
(0!==(Y.lanes&ha)&&(ni=!0),Y.firstContext=null)}function bd(Y,ha){if(uj!==Y&&!1!==ha&&0!==ha){if("number"!==typeof ha||1073741823===ha)uj=Y,ha=1073741823;ha={context:Y,observedBits:ha,next:null};if(null===fj){if(null===Ij)throw Error(b(308));fj=ha;Ij.dependencies={lanes:0,firstContext:ha,responders:null}}else fj=fj.next=ha}return Y._currentValue}function Tc(Y){Y.updateQueue={baseState:Y.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null},effects:null}}function Oc(Y,ha){Y=
Y.updateQueue;ha.updateQueue===Y&&(ha.updateQueue={baseState:Y.baseState,firstBaseUpdate:Y.firstBaseUpdate,lastBaseUpdate:Y.lastBaseUpdate,shared:Y.shared,effects:Y.effects})}function wc(Y,ha){return{eventTime:Y,lane:ha,tag:0,payload:null,callback:null,next:null}}function rc(Y,ha){Y=Y.updateQueue;if(null!==Y){Y=Y.shared;var ta=Y.pending;null===ta?ha.next=ha:(ha.next=ta.next,ta.next=ha);Y.pending=ha}}function pc(Y,ha){var ta=Y.updateQueue,Ra=Y.alternate;if(null!==Ra&&(Ra=Ra.updateQueue,ta===Ra)){var mb=
null,Kb=null;ta=ta.firstBaseUpdate;if(null!==ta){do{var cc={eventTime:ta.eventTime,lane:ta.lane,tag:ta.tag,payload:ta.payload,callback:ta.callback,next:null};null===Kb?mb=Kb=cc:Kb=Kb.next=cc;ta=ta.next}while(null!==ta);null===Kb?mb=Kb=ha:Kb=Kb.next=ha}else mb=Kb=ha;ta={baseState:Ra.baseState,firstBaseUpdate:mb,lastBaseUpdate:Kb,shared:Ra.shared,effects:Ra.effects};Y.updateQueue=ta}else Y=ta.lastBaseUpdate,null===Y?ta.firstBaseUpdate=ha:Y.next=ha,ta.lastBaseUpdate=ha}function ud(Y,ha,ta,Ra){var mb=
Y.updateQueue;Pi=!1;var Kb=mb.firstBaseUpdate,cc=mb.lastBaseUpdate,zc=mb.shared.pending;if(null!==zc){mb.shared.pending=null;var ad=zc,Jd=ad.next;ad.next=null;null===cc?Kb=Jd:cc.next=Jd;cc=ad;var Re=Y.alternate;if(null!==Re){Re=Re.updateQueue;var If=Re.lastBaseUpdate;If!==cc&&(null===If?Re.firstBaseUpdate=Jd:If.next=Jd,Re.lastBaseUpdate=ad)}}if(null!==Kb){If=mb.baseState;cc=0;Re=Jd=ad=null;do{zc=Kb.lane;var Rd=Kb.eventTime;if((Ra&zc)===zc){null!==Re&&(Re=Re.next={eventTime:Rd,lane:0,tag:Kb.tag,payload:Kb.payload,
callback:Kb.callback,next:null});a:{var Fe=Y,Kf=Kb;zc=ha;Rd=ta;switch(Kf.tag){case 1:Fe=Kf.payload;if("function"===typeof Fe){If=Fe.call(Rd,If,zc);break a}If=Fe;break a;case 3:Fe.flags=Fe.flags&-4097|64;case 0:Fe=Kf.payload;zc="function"===typeof Fe?Fe.call(Rd,If,zc):Fe;if(null===zc||void 0===zc)break a;If=Rb({},If,zc);break a;case 2:Pi=!0}}null!==Kb.callback&&(Y.flags|=32,zc=mb.effects,null===zc?mb.effects=[Kb]:zc.push(Kb))}else Rd={eventTime:Rd,lane:zc,tag:Kb.tag,payload:Kb.payload,callback:Kb.callback,
next:null},null===Re?(Jd=Re=Rd,ad=If):Re=Re.next=Rd,cc|=zc;Kb=Kb.next;if(null===Kb)if(zc=mb.shared.pending,null===zc)break;else Kb=zc.next,zc.next=null,mb.lastBaseUpdate=zc,mb.shared.pending=null}while(1);null===Re&&(ad=If);mb.baseState=ad;mb.firstBaseUpdate=Jd;mb.lastBaseUpdate=Re;Lj|=cc;Y.lanes=cc;Y.memoizedState=If}}function ae(Y,ha,ta){Y=ha.effects;ha.effects=null;if(null!==Y)for(ha=0;ha<Y.length;ha++){var Ra=Y[ha],mb=Ra.callback;if(null!==mb){Ra.callback=null;Ra=ta;if("function"!==typeof mb)throw Error(b(191,
mb));mb.call(Ra)}}}function Wd(Y,ha,ta,Ra){ha=Y.memoizedState;ta=ta(Ra,ha);ta=null===ta||void 0===ta?ha:Rb({},ha,ta);Y.memoizedState=ta;0===Y.lanes&&(Y.updateQueue.baseState=ta)}function Ce(Y,ha,ta,Ra,mb,Kb,cc){Y=Y.stateNode;return"function"===typeof Y.shouldComponentUpdate?Y.shouldComponentUpdate(Ra,Kb,cc):ha.prototype&&ha.prototype.isPureReactComponent?!lc(ta,Ra)||!lc(mb,Kb):!0}function Xd(Y,ha,ta){var Ra=!1,mb=Di,Kb=ha.contextType;"object"===typeof Kb&&null!==Kb?Kb=bd(Kb):(mb=Bd(ha)?Mi:nh.current,
Ra=ha.contextTypes,Kb=(Ra=null!==Ra&&void 0!==Ra)?Zc(Y,mb):Di);ha=new ha(ta,Kb);Y.memoizedState=null!==ha.state&&void 0!==ha.state?ha.state:null;ha.updater=qk;Y.stateNode=ha;ha._reactInternals=Y;Ra&&(Y=Y.stateNode,Y.__reactInternalMemoizedUnmaskedChildContext=mb,Y.__reactInternalMemoizedMaskedChildContext=Kb);return ha}function bf(Y,ha,ta,Ra){Y=ha.state;"function"===typeof ha.componentWillReceiveProps&&ha.componentWillReceiveProps(ta,Ra);"function"===typeof ha.UNSAFE_componentWillReceiveProps&&ha.UNSAFE_componentWillReceiveProps(ta,
Ra);ha.state!==Y&&qk.enqueueReplaceState(ha,ha.state,null)}function Ve(Y,ha,ta,Ra){var mb=Y.stateNode;mb.props=ta;mb.state=Y.memoizedState;mb.refs=Zk;Tc(Y);var Kb=ha.contextType;"object"===typeof Kb&&null!==Kb?mb.context=bd(Kb):(Kb=Bd(ha)?Mi:nh.current,mb.context=Zc(Y,Kb));ud(Y,ta,mb,Ra);mb.state=Y.memoizedState;Kb=ha.getDerivedStateFromProps;"function"===typeof Kb&&(Wd(Y,ha,Kb,ta),mb.state=Y.memoizedState);"function"===typeof ha.getDerivedStateFromProps||"function"===typeof mb.getSnapshotBeforeUpdate||
"function"!==typeof mb.UNSAFE_componentWillMount&&"function"!==typeof mb.componentWillMount||(ha=mb.state,"function"===typeof mb.componentWillMount&&mb.componentWillMount(),"function"===typeof mb.UNSAFE_componentWillMount&&mb.UNSAFE_componentWillMount(),ha!==mb.state&&qk.enqueueReplaceState(mb,mb.state,null),ud(Y,ta,mb,Ra),mb.state=Y.memoizedState);"function"===typeof mb.componentDidMount&&(Y.flags|=4)}function vf(Y,ha,ta){Y=ta.ref;if(null!==Y&&"function"!==typeof Y&&"object"!==typeof Y){if(ta._owner){if(ta=
ta._owner){if(1!==ta.tag)throw Error(b(309));var Ra=ta.stateNode}if(!Ra)throw Error(b(147,Y));var mb=""+Y;if(null!==ha&&null!==ha.ref&&"function"===typeof ha.ref&&ha.ref._stringRef===mb)return ha.ref;ha=function(Kb){var cc=Ra.refs;cc===Zk&&(cc=Ra.refs={});null===Kb?delete cc[mb]:cc[mb]=Kb};ha._stringRef=mb;return ha}if("string"!==typeof Y)throw Error(b(284));if(!ta._owner)throw Error(b(290,Y));}return Y}function Oe(Y,ha){if("textarea"!==Y.type)throw Error(b(31,"[object Object]"===Object.prototype.toString.call(ha)?
"object with keys {"+Object.keys(ha).join(", ")+"}":ha));}function Mf(Y){function ha(td,gd){if(Y){var jd=td.lastEffect;null!==jd?(jd.nextEffect=gd,td.lastEffect=gd):td.firstEffect=td.lastEffect=gd;gd.nextEffect=null;gd.flags=8}}function ta(td,gd){if(!Y)return null;for(;null!==gd;)ha(td,gd),gd=gd.sibling;return null}function Ra(td,gd){for(td=new Map;null!==gd;)null!==gd.key?td.set(gd.key,gd):td.set(gd.index,gd),gd=gd.sibling;return td}function mb(td,gd){td=ph(td,gd);td.index=0;td.sibling=null;return td}
function Kb(td,gd,jd){td.index=jd;if(!Y)return gd;jd=td.alternate;if(null!==jd)return jd=jd.index,jd<gd?(td.flags=2,gd):jd;td.flags=2;return gd}function cc(td){Y&&null===td.alternate&&(td.flags=2);return td}function zc(td,gd,jd,Zd){if(null===gd||6!==gd.tag)return gd=af(jd,td.mode,Zd),gd.return=td,gd;gd=mb(gd,jd);gd.return=td;return gd}function ad(td,gd,jd,Zd){if(null!==gd&&gd.elementType===jd.type)return Zd=mb(gd,jd.props),Zd.ref=vf(td,gd,jd),Zd.return=td,Zd;Zd=Dh(jd.type,jd.key,jd.props,null,td.mode,
Zd);Zd.ref=vf(td,gd,jd);Zd.return=td;return Zd}function Jd(td,gd,jd,Zd){if(null===gd||4!==gd.tag||gd.stateNode.containerInfo!==jd.containerInfo||gd.stateNode.implementation!==jd.implementation)return gd=qh(jd,td.mode,Zd),gd.return=td,gd;gd=mb(gd,jd.children||[]);gd.return=td;return gd}function Re(td,gd,jd,Zd,ie){if(null===gd||7!==gd.tag)return gd=Jh(jd,td.mode,Zd,ie),gd.return=td,gd;gd=mb(gd,jd);gd.return=td;return gd}function If(td,gd,jd){if("string"===typeof gd||"number"===typeof gd)return gd=af(""+
gd,td.mode,jd),gd.return=td,gd;if("object"===typeof gd&&null!==gd){switch(gd.$$typeof){case ke:return jd=Dh(gd.type,gd.key,gd.props,null,td.mode,jd),jd.ref=vf(td,null,gd),jd.return=td,jd;case re:return gd=qh(gd,td.mode,jd),gd.return=td,gd}if(Qi(gd)||h(gd))return gd=Jh(gd,td.mode,jd,null),gd.return=td,gd;Oe(td,gd)}return null}function Rd(td,gd,jd,Zd){var ie=null!==gd?gd.key:null;if("string"===typeof jd||"number"===typeof jd)return null!==ie?null:zc(td,gd,""+jd,Zd);if("object"===typeof jd&&null!==jd){switch(jd.$$typeof){case ke:return jd.key===
ie?jd.type===ne?Re(td,gd,jd.props.children,Zd,ie):ad(td,gd,jd,Zd):null;case re:return jd.key===ie?Jd(td,gd,jd,Zd):null}if(Qi(jd)||h(jd))return null!==ie?null:Re(td,gd,jd,Zd,null);Oe(td,jd)}return null}function Fe(td,gd,jd,Zd,ie){if("string"===typeof Zd||"number"===typeof Zd)return td=td.get(jd)||null,zc(gd,td,""+Zd,ie);if("object"===typeof Zd&&null!==Zd){switch(Zd.$$typeof){case ke:return td=td.get(null===Zd.key?jd:Zd.key)||null,Zd.type===ne?Re(gd,td,Zd.props.children,ie,Zd.key):ad(gd,td,Zd,ie);case re:return td=
td.get(null===Zd.key?jd:Zd.key)||null,Jd(gd,td,Zd,ie)}if(Qi(Zd)||h(Zd))return td=td.get(jd)||null,Re(gd,td,Zd,ie,null);Oe(gd,Zd)}return null}function Kf(td,gd,jd,Zd){for(var ie=null,Qf=null,cf=gd,Lf=gd=0,Sf=null;null!==cf&&Lf<jd.length;Lf++){cf.index>Lf?(Sf=cf,cf=null):Sf=cf.sibling;var jf=Rd(td,cf,jd[Lf],Zd);if(null===jf){null===cf&&(cf=Sf);break}Y&&cf&&null===jf.alternate&&ha(td,cf);gd=Kb(jf,gd,Lf);null===Qf?ie=jf:Qf.sibling=jf;Qf=jf;cf=Sf}if(Lf===jd.length)return ta(td,cf),ie;if(null===cf){for(;Lf<
jd.length;Lf++)cf=If(td,jd[Lf],Zd),null!==cf&&(gd=Kb(cf,gd,Lf),null===Qf?ie=cf:Qf.sibling=cf,Qf=cf);return ie}for(cf=Ra(td,cf);Lf<jd.length;Lf++)Sf=Fe(cf,td,Lf,jd[Lf],Zd),null!==Sf&&(Y&&null!==Sf.alternate&&cf.delete(null===Sf.key?Lf:Sf.key),gd=Kb(Sf,gd,Lf),null===Qf?ie=Sf:Qf.sibling=Sf,Qf=Sf);Y&&cf.forEach(function(Qh){return ha(td,Qh)});return ie}function tf(td,gd,jd,Zd){var ie=h(jd);if("function"!==typeof ie)throw Error(b(150));jd=ie.call(jd);if(null==jd)throw Error(b(151));for(var Qf=ie=null,
cf=gd,Lf=gd=0,Sf=null,jf=jd.next();null!==cf&&!jf.done;Lf++,jf=jd.next()){cf.index>Lf?(Sf=cf,cf=null):Sf=cf.sibling;var Qh=Rd(td,cf,jf.value,Zd);if(null===Qh){null===cf&&(cf=Sf);break}Y&&cf&&null===Qh.alternate&&ha(td,cf);gd=Kb(Qh,gd,Lf);null===Qf?ie=Qh:Qf.sibling=Qh;Qf=Qh;cf=Sf}if(jf.done)return ta(td,cf),ie;if(null===cf){for(;!jf.done;Lf++,jf=jd.next())jf=If(td,jf.value,Zd),null!==jf&&(gd=Kb(jf,gd,Lf),null===Qf?ie=jf:Qf.sibling=jf,Qf=jf);return ie}for(cf=Ra(td,cf);!jf.done;Lf++,jf=jd.next())jf=
Fe(cf,td,Lf,jf.value,Zd),null!==jf&&(Y&&null!==jf.alternate&&cf.delete(null===jf.key?Lf:jf.key),gd=Kb(jf,gd,Lf),null===Qf?ie=jf:Qf.sibling=jf,Qf=jf);Y&&cf.forEach(function(bl){return ha(td,bl)});return ie}return function(td,gd,jd,Zd){var ie="object"===typeof jd&&null!==jd&&jd.type===ne&&null===jd.key;ie&&(jd=jd.props.children);var Qf="object"===typeof jd&&null!==jd;if(Qf)switch(jd.$$typeof){case ke:a:{Qf=jd.key;for(ie=gd;null!==ie;){if(ie.key===Qf){switch(ie.tag){case 7:if(jd.type===ne){ta(td,ie.sibling);
gd=mb(ie,jd.props.children);gd.return=td;td=gd;break a}break;default:if(ie.elementType===jd.type){ta(td,ie.sibling);gd=mb(ie,jd.props);gd.ref=vf(td,ie,jd);gd.return=td;td=gd;break a}}ta(td,ie);break}else ha(td,ie);ie=ie.sibling}jd.type===ne?(gd=Jh(jd.props.children,td.mode,Zd,jd.key),gd.return=td,td=gd):(Zd=Dh(jd.type,jd.key,jd.props,null,td.mode,Zd),Zd.ref=vf(td,gd,jd),Zd.return=td,td=Zd)}return cc(td);case re:a:{for(ie=jd.key;null!==gd;){if(gd.key===ie)if(4===gd.tag&&gd.stateNode.containerInfo===
jd.containerInfo&&gd.stateNode.implementation===jd.implementation){ta(td,gd.sibling);gd=mb(gd,jd.children||[]);gd.return=td;td=gd;break a}else{ta(td,gd);break}else ha(td,gd);gd=gd.sibling}gd=qh(jd,td.mode,Zd);gd.return=td;td=gd}return cc(td)}if("string"===typeof jd||"number"===typeof jd)return jd=""+jd,null!==gd&&6===gd.tag?(ta(td,gd.sibling),gd=mb(gd,jd),gd.return=td,td=gd):(ta(td,gd),gd=af(jd,td.mode,Zd),gd.return=td,td=gd),cc(td);if(Qi(jd))return Kf(td,gd,jd,Zd);if(h(jd))return tf(td,gd,jd,Zd);
Qf&&Oe(td,jd);if("undefined"===typeof jd&&!ie)switch(td.tag){case 1:case 22:case 0:case 11:case 15:throw Error(b(152,d(td.type)||"Component"));}return ta(td,gd)}}function ng(Y){if(Y===Zg)throw Error(b(174));return Y}function Sg(Y,ha){nf(Gh,ha);nf(xh,Y);nf(Wg,Zg);Y=ha.nodeType;switch(Y){case 9:case 11:ha=(ha=ha.documentElement)?ha.namespaceURI:L(null,"");break;default:Y=8===Y?ha.parentNode:ha,ha=Y.namespaceURI||null,Y=Y.tagName,ha=L(ha,Y)}Ie(Wg);nf(Wg,ha)}function Og(){Ie(Wg);Ie(xh);Ie(Gh)}function Ah(Y){ng(Gh.current);
var ha=ng(Wg.current),ta=L(ha,Y.type);ha!==ta&&(nf(xh,Y),nf(Wg,ta))}function Kh(Y){xh.current===Y&&(Ie(Wg),Ie(xh))}function rh(Y){for(var ha=Y;null!==ha;){if(13===ha.tag){var ta=ha.memoizedState;if(null!==ta&&(ta=ta.dehydrated,null===ta||"$?"===ta.data||"$!"===ta.data))return ha}else if(19===ha.tag&&void 0!==ha.memoizedProps.revealOrder){if(0!==(ha.flags&64))return ha}else if(null!==ha.child){ha.child.return=ha;ha=ha.child;continue}if(ha===Y)break;for(;null===ha.sibling;){if(null===ha.return||ha.return===
Y)return null;ha=ha.return}ha.sibling.return=ha.return;ha=ha.sibling}return null}function Yg(Y,ha){var ta=Lg(5,null,null,0);ta.elementType="DELETED";ta.type="DELETED";ta.stateNode=ha;ta.return=Y;ta.flags=8;null!==Y.lastEffect?(Y.lastEffect.nextEffect=ta,Y.lastEffect=ta):Y.firstEffect=Y.lastEffect=ta}function sh(Y,ha){switch(Y.tag){case 5:var ta=Y.type;ha=1!==ha.nodeType||ta.toLowerCase()!==ha.nodeName.toLowerCase()?null:ha;return null!==ha?(Y.stateNode=ha,!0):!1;case 6:return ha=""===Y.pendingProps||
3!==ha.nodeType?null:ha,null!==ha?(Y.stateNode=ha,!0):!1;case 13:return!1;default:return!1}}function ah(Y){if(mi){var ha=Ei;if(ha){var ta=ha;if(!sh(Y,ha)){ha=qf(ta.nextSibling);if(!ha||!sh(Y,ha)){Y.flags=Y.flags&-1025|2;mi=!1;$g=Y;return}Yg($g,ta)}$g=Y;Ei=qf(ha.firstChild)}else Y.flags=Y.flags&-1025|2,mi=!1,$g=Y}}function bh(Y){for(Y=Y.return;null!==Y&&5!==Y.tag&&3!==Y.tag&&13!==Y.tag;)Y=Y.return;$g=Y}function Th(Y){if(Y!==$g)return!1;if(!mi)return bh(Y),mi=!0,!1;var ha=Y.type;if(5!==Y.tag||"head"!==
ha&&"body"!==ha&&!zf(ha,Y.memoizedProps))for(ha=Ei;ha;)Yg(Y,ha),ha=qf(ha.nextSibling);bh(Y);if(13===Y.tag){Y=Y.memoizedState;Y=null!==Y?Y.dehydrated:null;if(!Y)throw Error(b(317));a:{Y=Y.nextSibling;for(ha=0;Y;){if(8===Y.nodeType){var ta=Y.data;if("/$"===ta){if(0===ha){Ei=qf(Y.nextSibling);break a}ha--}else"$"!==ta&&"$!"!==ta&&"$?"!==ta||ha++}Y=Y.nextSibling}Ei=null}}else Ei=$g?qf(Y.stateNode.nextSibling):null;return!0}function ch(){for(var Y=0;Y<eh.length;Y++)eh[Y]._workInProgressVersionPrimary=
null;eh.length=0}function bg(){throw Error(b(321));}function og(Y,ha){if(null===ha)return!1;for(var ta=0;ta<ha.length&&ta<Y.length;ta++)if(!Ph(Y[ta],ha[ta]))return!1;return!0}function qg(Y,ha,ta,Ra,mb,Kb){ri=Kb;ag=ha;ha.memoizedState=null;ha.updateQueue=null;ha.lanes=0;bk.current=null===Y||null===Y.memoizedState?vi:jl;Y=ta(Ra,mb);if(ck){Kb=0;do{ck=!1;if(!(25>Kb))throw Error(b(301));Kb+=1;yh=Hh=null;ha.updateQueue=null;bk.current=kl;Y=ta(Ra,mb)}while(ck)}bk.current=dk;ha=null!==Hh&&null!==Hh.next;
ri=0;yh=Hh=ag=null;rk=!1;if(ha)throw Error(b(300));return Y}function ug(){var Y={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};null===yh?ag.memoizedState=yh=Y:yh=yh.next=Y;return yh}function Tg(){if(null===Hh){var Y=ag.alternate;Y=null!==Y?Y.memoizedState:null}else Y=Hh.next;var ha=null===yh?ag.memoizedState:yh.next;if(null!==ha)yh=ha,Hh=Y;else{if(null===Y)throw Error(b(310));Hh=Y;Y={memoizedState:Hh.memoizedState,baseState:Hh.baseState,baseQueue:Hh.baseQueue,queue:Hh.queue,
next:null};null===yh?ag.memoizedState=yh=Y:yh=yh.next=Y}return yh}function Ig(Y,ha){return"function"===typeof ha?ha(Y):ha}function jh(Y){var ha=Tg(),ta=ha.queue;if(null===ta)throw Error(b(311));ta.lastRenderedReducer=Y;var Ra=Hh,mb=Ra.baseQueue,Kb=ta.pending;if(null!==Kb){if(null!==mb){var cc=mb.next;mb.next=Kb.next;Kb.next=cc}Ra.baseQueue=mb=Kb;ta.pending=null}if(null!==mb){mb=mb.next;Ra=Ra.baseState;var zc=cc=Kb=null,ad=mb;do{var Jd=ad.lane;if((ri&Jd)===Jd)null!==zc&&(zc=zc.next={lane:0,action:ad.action,
eagerReducer:ad.eagerReducer,eagerState:ad.eagerState,next:null}),Ra=ad.eagerReducer===Y?ad.eagerState:Y(Ra,ad.action);else{var Re={lane:Jd,action:ad.action,eagerReducer:ad.eagerReducer,eagerState:ad.eagerState,next:null};null===zc?(cc=zc=Re,Kb=Ra):zc=zc.next=Re;ag.lanes|=Jd;Lj|=Jd}ad=ad.next}while(null!==ad&&ad!==mb);null===zc?Kb=Ra:zc.next=cc;Ph(Ra,ha.memoizedState)||(ni=!0);ha.memoizedState=Ra;ha.baseState=Kb;ha.baseQueue=zc;ta.lastRenderedState=Ra}return[ha.memoizedState,ta.dispatch]}function Ug(Y){var ha=
Tg(),ta=ha.queue;if(null===ta)throw Error(b(311));ta.lastRenderedReducer=Y;var Ra=ta.dispatch,mb=ta.pending,Kb=ha.memoizedState;if(null!==mb){ta.pending=null;var cc=mb=mb.next;do Kb=Y(Kb,cc.action),cc=cc.next;while(cc!==mb);Ph(Kb,ha.memoizedState)||(ni=!0);ha.memoizedState=Kb;null===ha.baseQueue&&(ha.baseState=Kb);ta.lastRenderedState=Kb}return[Kb,Ra]}function Wf(Y,ha,ta){var Ra=ha._getVersion;Ra=Ra(ha._source);var mb=ha._workInProgressVersionPrimary;if(null!==mb)Y=mb===Ra;else if(Y=Y.mutableReadLanes,
Y=(ri&Y)===Y)ha._workInProgressVersionPrimary=Ra,eh.push(ha);if(Y)return ta(ha._source);eh.push(ha);throw Error(b(350));}function kh(Y,ha,ta,Ra){var mb=tg;if(null===mb)throw Error(b(349));var Kb=ha._getVersion,cc=Kb(ha._source),zc=bk.current,ad=zc.useState(function(){return Wf(mb,ha,ta)}),Jd=ad[1],Re=ad[0];ad=yh;var If=Y.memoizedState,Rd=If.refs,Fe=Rd.getSnapshot,Kf=If.source;If=If.subscribe;var tf=ag;Y.memoizedState={refs:Rd,source:ha,subscribe:Ra};zc.useEffect(function(){Rd.getSnapshot=ta;Rd.setSnapshot=
Jd;var td=Kb(ha._source);if(!Ph(cc,td)){td=ta(ha._source);Ph(Re,td)||(Jd(td),td=Yd(tf),mb.mutableReadLanes|=td&mb.pendingLanes);td=mb.mutableReadLanes;mb.entangledLanes|=td;for(var gd=mb.entanglements,jd=td;0<jd;){var Zd=31-dh(jd),ie=1<<Zd;gd[Zd]|=td;jd&=~ie}}},[ta,ha,Ra]);zc.useEffect(function(){return Ra(ha._source,function(){var td=Rd.getSnapshot,gd=Rd.setSnapshot;try{gd(td(ha._source));var jd=Yd(tf);mb.mutableReadLanes|=jd&mb.pendingLanes}catch(Zd){gd(function(){throw Zd;})}})},[ha,Ra]);Ph(Fe,
ta)&&Ph(Kf,ha)&&Ph(If,Ra)||(Y={pending:null,dispatch:null,lastRenderedReducer:Ig,lastRenderedState:Re},Y.dispatch=Jd=Xb.bind(null,ag,Y),ad.queue=Y,ad.baseQueue=null,Re=Wf(mb,ha,ta),ad.memoizedState=ad.baseState=Re);return Re}function pg(Y,ha,ta){var Ra=Tg();return kh(Ra,Y,ha,ta)}function Bg(Y){var ha=ug();"function"===typeof Y&&(Y=Y());ha.memoizedState=ha.baseState=Y;Y=ha.queue={pending:null,dispatch:null,lastRenderedReducer:Ig,lastRenderedState:Y};Y=Y.dispatch=Xb.bind(null,ag,Y);return[ha.memoizedState,
Y]}function th(Y,ha,ta,Ra){Y={tag:Y,create:ha,destroy:ta,deps:Ra,next:null};ha=ag.updateQueue;null===ha?(ha={lastEffect:null},ag.updateQueue=ha,ha.lastEffect=Y.next=Y):(ta=ha.lastEffect,null===ta?ha.lastEffect=Y.next=Y:(Ra=ta.next,ta.next=Y,Y.next=Ra,ha.lastEffect=Y));return Y}function uh(Y){var ha=ug();Y={current:Y};return ha.memoizedState=Y}function Bh(){return Tg().memoizedState}function Gg(Y,ha,ta,Ra){var mb=ug();ag.flags|=Y;mb.memoizedState=th(1|ha,ta,void 0,void 0===Ra?null:Ra)}function lh(Y,
ha,ta,Ra){var mb=Tg();Ra=void 0===Ra?null:Ra;var Kb=void 0;if(null!==Hh){var cc=Hh.memoizedState;Kb=cc.destroy;if(null!==Ra&&og(Ra,cc.deps)){th(ha,ta,Kb,Ra);return}}ag.flags|=Y;mb.memoizedState=th(1|ha,ta,Kb,Ra)}function Lh(Y,ha){return Gg(516,4,Y,ha)}function vh(Y,ha){return lh(516,4,Y,ha)}function Ga(Y,ha){return lh(4,2,Y,ha)}function Fa(Y,ha){if("function"===typeof ha)return Y=Y(),ha(Y),function(){ha(null)};if(null!==ha&&void 0!==ha)return Y=Y(),ha.current=Y,function(){ha.current=null}}function Oa(Y,
ha,ta){ta=null!==ta&&void 0!==ta?ta.concat([Y]):null;return lh(4,2,Fa.bind(null,ha,Y),ta)}function Sa(){}function cb(Y,ha){var ta=Tg();ha=void 0===ha?null:ha;var Ra=ta.memoizedState;if(null!==Ra&&null!==ha&&og(ha,Ra[1]))return Ra[0];ta.memoizedState=[Y,ha];return Y}function jb(Y,ha){var ta=Tg();ha=void 0===ha?null:ha;var Ra=ta.memoizedState;if(null!==Ra&&null!==ha&&og(ha,Ra[1]))return Ra[0];Y=Y();ta.memoizedState=[Y,ha];return Y}function Bb(Y,ha){var ta=pe();qe(98>ta?98:ta,function(){Y(!0)});qe(97<
ta?97:ta,function(){var Ra=ei.transition;ei.transition=1;try{Y(!1),ha()}finally{ei.transition=Ra}})}function Xb(Y,ha,ta){var Ra=Vd(),mb=Yd(Y),Kb={lane:mb,action:ta,eagerReducer:null,eagerState:null,next:null},cc=ha.pending;null===cc?Kb.next=Kb:(Kb.next=cc.next,cc.next=Kb);ha.pending=Kb;cc=Y.alternate;if(Y===ag||null!==cc&&cc===ag)ck=rk=!0;else{if(0===Y.lanes&&(null===cc||0===cc.lanes)&&(cc=ha.lastRenderedReducer,null!==cc))try{var zc=ha.lastRenderedState,ad=cc(zc,ta);Kb.eagerReducer=cc;Kb.eagerState=
ad;if(Ph(ad,zc))return}catch(Jd){}finally{}df(Y,mb,Ra)}}function Ib(Y,ha,ta,Ra){ha.child=null===Y?$h(ha,null,ta,Ra):ui(ha,Y.child,ta,Ra)}function gc(Y,ha,ta,Ra,mb){ta=ta.render;var Kb=ha.ref;Yc(ha,mb);Ra=qg(Y,ha,ta,Ra,Kb,mb);if(null!==Y&&!ni)return ha.updateQueue=Y.updateQueue,ha.flags&=-517,Y.lanes&=~mb,vg(Y,ha,mb);ha.flags|=1;Ib(Y,ha,Ra,mb);return ha.child}function hc(Y,ha,ta,Ra,mb,Kb){if(null===Y){var cc=ta.type;if("function"===typeof cc&&!Rh(cc)&&void 0===cc.defaultProps&&null===ta.compare&&void 0===
ta.defaultProps)return ha.tag=15,ha.type=cc,qc(Y,ha,cc,Ra,mb,Kb);Y=Dh(ta.type,null,Ra,ha,ha.mode,Kb);Y.ref=ha.ref;Y.return=ha;return ha.child=Y}cc=Y.child;if(0===(mb&Kb)&&(mb=cc.memoizedProps,ta=ta.compare,ta=null!==ta?ta:lc,ta(mb,Ra)&&Y.ref===ha.ref))return vg(Y,ha,Kb);ha.flags|=1;Y=ph(cc,Ra);Y.ref=ha.ref;Y.return=ha;return ha.child=Y}function qc(Y,ha,ta,Ra,mb,Kb){if(null!==Y&&lc(Y.memoizedProps,Ra)&&Y.ref===ha.ref)if(ni=!1,0!==(Kb&mb))0!==(Y.flags&16384)&&(ni=!0);else return ha.lanes=Y.lanes,vg(Y,
ha,Kb);return Dd(Y,ha,ta,Ra,Kb)}function Ec(Y,ha,ta){var Ra=ha.pendingProps,mb=Ra.children,Kb=null!==Y?Y.memoizedState:null;if("hidden"===Ra.mode||"unstable-defer-without-hiding"===Ra.mode)if(0===(ha.mode&4))ha.memoizedState={baseLanes:0},gf(ha,ta);else if(0!==(ta&1073741824))ha.memoizedState={baseLanes:0},gf(ha,null!==Kb?Kb.baseLanes:ta);else return Y=null!==Kb?Kb.baseLanes|ta:ta,ha.lanes=ha.childLanes=1073741824,ha.memoizedState={baseLanes:Y},gf(ha,Y),null;else null!==Kb?(Ra=Kb.baseLanes|ta,ha.memoizedState=
null):Ra=ta,gf(ha,Ra);Ib(Y,ha,mb,ta);return ha.child}function ld(Y,ha){var ta=ha.ref;if(null===Y&&null!==ta||null!==Y&&Y.ref!==ta)ha.flags|=128}function Dd(Y,ha,ta,Ra,mb){var Kb=Bd(ta)?Mi:nh.current;Kb=Zc(ha,Kb);Yc(ha,mb);ta=qg(Y,ha,ta,Ra,Kb,mb);if(null!==Y&&!ni)return ha.updateQueue=Y.updateQueue,ha.flags&=-517,Y.lanes&=~mb,vg(Y,ha,mb);ha.flags|=1;Ib(Y,ha,ta,mb);return ha.child}function ye(Y,ha,ta,Ra,mb){if(Bd(ta)){var Kb=!0;Fd(ha)}else Kb=!1;Yc(ha,mb);if(null===ha.stateNode)null!==Y&&(Y.alternate=
null,ha.alternate=null,ha.flags|=2),Xd(ha,ta,Ra),Ve(ha,ta,Ra,mb),Ra=!0;else if(null===Y){var cc=ha.stateNode,zc=ha.memoizedProps;cc.props=zc;var ad=cc.context,Jd=ta.contextType;"object"===typeof Jd&&null!==Jd?Jd=bd(Jd):(Jd=Bd(ta)?Mi:nh.current,Jd=Zc(ha,Jd));var Re=ta.getDerivedStateFromProps,If="function"===typeof Re||"function"===typeof cc.getSnapshotBeforeUpdate;If||"function"!==typeof cc.UNSAFE_componentWillReceiveProps&&"function"!==typeof cc.componentWillReceiveProps||(zc!==Ra||ad!==Jd)&&bf(ha,
cc,Ra,Jd);Pi=!1;var Rd=ha.memoizedState;cc.state=Rd;ud(ha,Ra,cc,mb);ad=ha.memoizedState;zc!==Ra||Rd!==ad||oh.current||Pi?("function"===typeof Re&&(Wd(ha,ta,Re,Ra),ad=ha.memoizedState),(zc=Pi||Ce(ha,ta,zc,Ra,Rd,ad,Jd))?(If||"function"!==typeof cc.UNSAFE_componentWillMount&&"function"!==typeof cc.componentWillMount||("function"===typeof cc.componentWillMount&&cc.componentWillMount(),"function"===typeof cc.UNSAFE_componentWillMount&&cc.UNSAFE_componentWillMount()),"function"===typeof cc.componentDidMount&&
(ha.flags|=4)):("function"===typeof cc.componentDidMount&&(ha.flags|=4),ha.memoizedProps=Ra,ha.memoizedState=ad),cc.props=Ra,cc.state=ad,cc.context=Jd,Ra=zc):("function"===typeof cc.componentDidMount&&(ha.flags|=4),Ra=!1)}else{cc=ha.stateNode;Oc(Y,ha);zc=ha.memoizedProps;Jd=ha.type===ha.elementType?zc:oc(ha.type,zc);cc.props=Jd;If=ha.pendingProps;Rd=cc.context;ad=ta.contextType;"object"===typeof ad&&null!==ad?ad=bd(ad):(ad=Bd(ta)?Mi:nh.current,ad=Zc(ha,ad));var Fe=ta.getDerivedStateFromProps;(Re=
"function"===typeof Fe||"function"===typeof cc.getSnapshotBeforeUpdate)||"function"!==typeof cc.UNSAFE_componentWillReceiveProps&&"function"!==typeof cc.componentWillReceiveProps||(zc!==If||Rd!==ad)&&bf(ha,cc,Ra,ad);Pi=!1;Rd=ha.memoizedState;cc.state=Rd;ud(ha,Ra,cc,mb);var Kf=ha.memoizedState;zc!==If||Rd!==Kf||oh.current||Pi?("function"===typeof Fe&&(Wd(ha,ta,Fe,Ra),Kf=ha.memoizedState),(Jd=Pi||Ce(ha,ta,Jd,Ra,Rd,Kf,ad))?(Re||"function"!==typeof cc.UNSAFE_componentWillUpdate&&"function"!==typeof cc.componentWillUpdate||
("function"===typeof cc.componentWillUpdate&&cc.componentWillUpdate(Ra,Kf,ad),"function"===typeof cc.UNSAFE_componentWillUpdate&&cc.UNSAFE_componentWillUpdate(Ra,Kf,ad)),"function"===typeof cc.componentDidUpdate&&(ha.flags|=4),"function"===typeof cc.getSnapshotBeforeUpdate&&(ha.flags|=256)):("function"!==typeof cc.componentDidUpdate||zc===Y.memoizedProps&&Rd===Y.memoizedState||(ha.flags|=4),"function"!==typeof cc.getSnapshotBeforeUpdate||zc===Y.memoizedProps&&Rd===Y.memoizedState||(ha.flags|=256),
ha.memoizedProps=Ra,ha.memoizedState=Kf),cc.props=Ra,cc.state=Kf,cc.context=ad,Ra=Jd):("function"!==typeof cc.componentDidUpdate||zc===Y.memoizedProps&&Rd===Y.memoizedState||(ha.flags|=4),"function"!==typeof cc.getSnapshotBeforeUpdate||zc===Y.memoizedProps&&Rd===Y.memoizedState||(ha.flags|=256),Ra=!1)}return ze(Y,ha,ta,Ra,Kb,mb)}function ze(Y,ha,ta,Ra,mb,Kb){ld(Y,ha);var cc=0!==(ha.flags&64);if(!Ra&&!cc)return mb&&rd(ha,ta,!1),vg(Y,ha,Kb);Ra=ha.stateNode;ll.current=ha;var zc=cc&&"function"!==typeof ta.getDerivedStateFromError?
null:Ra.render();ha.flags|=1;null!==Y&&cc?(ha.child=ui(ha,Y.child,null,Kb),ha.child=ui(ha,null,zc,Kb)):Ib(Y,ha,zc,Kb);ha.memoizedState=Ra.state;mb&&rd(ha,ta,!0);return ha.child}function We(Y){var ha=Y.stateNode;ha.pendingContext?Zb(Y,ha.pendingContext,ha.pendingContext!==ha.context):ha.context&&Zb(Y,ha.context,!1);Sg(Y,ha.containerInfo)}function fg(Y,ha,ta){var Ra=ha.pendingProps,mb=zg.current,Kb=!1,cc;(cc=0!==(ha.flags&64))||(cc=null!==Y&&null===Y.memoizedState?!1:0!==(mb&2));cc?(Kb=!0,ha.flags&=
-65):null!==Y&&null===Y.memoizedState||void 0===Ra.fallback||!0===Ra.unstable_avoidThisFallback||(mb|=1);nf(zg,mb&1);if(null===Y){void 0!==Ra.fallback&&ah(ha);Y=Ra.children;mb=Ra.fallback;if(Kb)return Y=He(ha,Y,mb,ta),ha.child.memoizedState={baseLanes:ta},ha.memoizedState=Tj,Y;if("number"===typeof Ra.unstable_expectedLoadTime)return Y=He(ha,Y,mb,ta),ha.child.memoizedState={baseLanes:ta},ha.memoizedState=Tj,ha.lanes=33554432,Y;ta=Sh({mode:"visible",children:Y},ha.mode,ta,null);ta.return=ha;return ha.child=
ta}if(null!==Y.memoizedState){if(Kb)return Ra=Xf(Y,ha,Ra.children,Ra.fallback,ta),Kb=ha.child,mb=Y.child.memoizedState,Kb.memoizedState=null===mb?{baseLanes:ta}:{baseLanes:mb.baseLanes|ta},Kb.childLanes=Y.childLanes&~ta,ha.memoizedState=Tj,Ra;ta=cg(Y,ha,Ra.children,ta);ha.memoizedState=null;return ta}if(Kb)return Ra=Xf(Y,ha,Ra.children,Ra.fallback,ta),Kb=ha.child,mb=Y.child.memoizedState,Kb.memoizedState=null===mb?{baseLanes:ta}:{baseLanes:mb.baseLanes|ta},Kb.childLanes=Y.childLanes&~ta,ha.memoizedState=
Tj,Ra;ta=cg(Y,ha,Ra.children,ta);ha.memoizedState=null;return ta}function He(Y,ha,ta,Ra){var mb=Y.mode,Kb=Y.child;ha={mode:"hidden",children:ha};0===(mb&2)&&null!==Kb?(Kb.childLanes=0,Kb.pendingProps=ha):Kb=Sh(ha,mb,0,null);ta=Jh(ta,mb,Ra,null);Kb.return=Y;ta.return=Y;Kb.sibling=ta;Y.child=Kb;return ta}function cg(Y,ha,ta,Ra){var mb=Y.child;Y=mb.sibling;ta=ph(mb,{mode:"visible",children:ta});0===(ha.mode&2)&&(ta.lanes=Ra);ta.return=ha;ta.sibling=null;null!==Y&&(Y.nextEffect=null,Y.flags=8,ha.firstEffect=
ha.lastEffect=Y);return ha.child=ta}function Xf(Y,ha,ta,Ra,mb){var Kb=ha.mode,cc=Y.child;Y=cc.sibling;var zc={mode:"hidden",children:ta};0===(Kb&2)&&ha.child!==cc?(ta=ha.child,ta.childLanes=0,ta.pendingProps=zc,cc=ta.lastEffect,null!==cc?(ha.firstEffect=ta.firstEffect,ha.lastEffect=cc,cc.nextEffect=null):ha.firstEffect=ha.lastEffect=null):ta=ph(cc,zc);null!==Y?Ra=ph(Y,Ra):(Ra=Jh(Ra,Kb,mb,null),Ra.flags|=2);Ra.return=ha;ta.return=ha;ta.sibling=Ra;ha.child=ta;return Ra}function Af(Y,ha){Y.lanes|=ha;
var ta=Y.alternate;null!==ta&&(ta.lanes|=ha);Bc(Y.return,ha)}function Pg(Y,ha,ta,Ra,mb,Kb){var cc=Y.memoizedState;null===cc?Y.memoizedState={isBackwards:ha,rendering:null,renderingStartTime:0,last:Ra,tail:ta,tailMode:mb,lastEffect:Kb}:(cc.isBackwards=ha,cc.rendering=null,cc.renderingStartTime=0,cc.last=Ra,cc.tail=ta,cc.tailMode=mb,cc.lastEffect=Kb)}function Mg(Y,ha,ta){var Ra=ha.pendingProps,mb=Ra.revealOrder,Kb=Ra.tail;Ib(Y,ha,Ra.children,ta);Ra=zg.current;if(0!==(Ra&2))Ra=Ra&1|2,ha.flags|=64;else{if(null!==
Y&&0!==(Y.flags&64))a:for(Y=ha.child;null!==Y;){if(13===Y.tag)null!==Y.memoizedState&&Af(Y,ta);else if(19===Y.tag)Af(Y,ta);else if(null!==Y.child){Y.child.return=Y;Y=Y.child;continue}if(Y===ha)break a;for(;null===Y.sibling;){if(null===Y.return||Y.return===ha)break a;Y=Y.return}Y.sibling.return=Y.return;Y=Y.sibling}Ra&=1}nf(zg,Ra);if(0===(ha.mode&2))ha.memoizedState=null;else switch(mb){case "forwards":ta=ha.child;for(mb=null;null!==ta;)Y=ta.alternate,null!==Y&&null===rh(Y)&&(mb=ta),ta=ta.sibling;
ta=mb;null===ta?(mb=ha.child,ha.child=null):(mb=ta.sibling,ta.sibling=null);Pg(ha,!1,mb,ta,Kb,ha.lastEffect);break;case "backwards":ta=null;mb=ha.child;for(ha.child=null;null!==mb;){Y=mb.alternate;if(null!==Y&&null===rh(Y)){ha.child=mb;break}Y=mb.sibling;mb.sibling=ta;ta=mb;mb=Y}Pg(ha,!0,ta,null,Kb,ha.lastEffect);break;case "together":Pg(ha,!1,null,null,void 0,ha.lastEffect);break;default:ha.memoizedState=null}return ha.child}function vg(Y,ha,ta){null!==Y&&(ha.dependencies=Y.dependencies);Lj|=ha.lanes;
if(0!==(ta&ha.childLanes)){if(null!==Y&&ha.child!==Y.child)throw Error(b(153));if(null!==ha.child){Y=ha.child;ta=ph(Y,Y.pendingProps);ha.child=ta;for(ta.return=ha;null!==Y.sibling;)Y=Y.sibling,ta=ta.sibling=ph(Y,Y.pendingProps),ta.return=ha;ta.sibling=null}return ha.child}return null}function Jf(Y,ha){if(!mi)switch(Y.tailMode){case "hidden":ha=Y.tail;for(var ta=null;null!==ha;)null!==ha.alternate&&(ta=ha),ha=ha.sibling;null===ta?Y.tail=null:ta.sibling=null;break;case "collapsed":ta=Y.tail;for(var Ra=
null;null!==ta;)null!==ta.alternate&&(Ra=ta),ta=ta.sibling;null===Ra?ha||null===Y.tail?Y.tail=null:Y.tail.sibling=null:Ra.sibling=null}}function Yf(Y,ha,ta){var Ra=ha.pendingProps;switch(ha.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return null;case 1:return Bd(ha.type)&&Ob(),null;case 3:Og();Ie(oh);Ie(nh);ch();Ra=ha.stateNode;Ra.pendingContext&&(Ra.context=Ra.pendingContext,Ra.pendingContext=null);if(null===Y||null===Y.child)Th(ha)?ha.flags|=4:Ra.hydrate||(ha.flags|=
256);$k(ha);return null;case 5:Kh(ha);var mb=ng(Gh.current);ta=ha.type;if(null!==Y&&null!=ha.stateNode)zk(Y,ha,ta,Ra,mb),Y.ref!==ha.ref&&(ha.flags|=128);else{if(!Ra){if(null===ha.stateNode)throw Error(b(166));return null}Y=ng(Wg.current);if(Th(ha)){Ra=ha.stateNode;ta=ha.type;var Kb=ha.memoizedProps;Ra[Ci]=ha;Ra[Hj]=Kb;switch(ta){case "dialog":Cc("cancel",Ra);Cc("close",Ra);break;case "iframe":case "object":case "embed":Cc("load",Ra);break;case "video":case "audio":for(Y=0;Y<rj.length;Y++)Cc(rj[Y],
Ra);break;case "source":Cc("error",Ra);break;case "img":case "image":case "link":Cc("error",Ra);Cc("load",Ra);break;case "details":Cc("toggle",Ra);break;case "input":B(Ra,Kb);Cc("invalid",Ra);break;case "select":Ra._wrapperState={wasMultiple:!!Kb.multiple};Cc("invalid",Ra);break;case "textarea":M(Ra,Kb),Cc("invalid",Ra)}V(ta,Kb);Y=null;for(var cc in Kb)Kb.hasOwnProperty(cc)&&(mb=Kb[cc],"children"===cc?"string"===typeof mb?Ra.textContent!==mb&&(Y=["children",mb]):"number"===typeof mb&&Ra.textContent!==
""+mb&&(Y=["children",""+mb]):Gc.hasOwnProperty(cc)&&null!=mb&&"onScroll"===cc&&Cc("scroll",Ra));switch(ta){case "input":t(Ra);C(Ra,Kb,!0);break;case "textarea":t(Ra);O(Ra);break;case "select":case "option":break;default:"function"===typeof Kb.onClick&&(Ra.onclick=Ke)}Ra=Y;ha.updateQueue=Ra;null!==Ra&&(ha.flags|=4)}else{cc=9===mb.nodeType?mb:mb.ownerDocument;Y===eb.html&&(Y=I(ta));Y===eb.html?"script"===ta?(Y=cc.createElement("div"),Y.innerHTML="\x3cscript\x3e\x3c/script\x3e",Y=Y.removeChild(Y.firstChild)):
"string"===typeof Ra.is?Y=cc.createElement(ta,{is:Ra.is}):(Y=cc.createElement(ta),"select"===ta&&(cc=Y,Ra.multiple?cc.multiple=!0:Ra.size&&(cc.size=Ra.size))):Y=cc.createElementNS(Y,ta);Y[Ci]=ha;Y[Hj]=Ra;Jj(Y,ha,!1,!1);ha.stateNode=Y;cc=S(ta,Ra);switch(ta){case "dialog":Cc("cancel",Y);Cc("close",Y);mb=Ra;break;case "iframe":case "object":case "embed":Cc("load",Y);mb=Ra;break;case "video":case "audio":for(mb=0;mb<rj.length;mb++)Cc(rj[mb],Y);mb=Ra;break;case "source":Cc("error",Y);mb=Ra;break;case "img":case "image":case "link":Cc("error",
Y);Cc("load",Y);mb=Ra;break;case "details":Cc("toggle",Y);mb=Ra;break;case "input":B(Y,Ra);mb=z(Y,Ra);Cc("invalid",Y);break;case "option":mb=F(Y,Ra);break;case "select":Y._wrapperState={wasMultiple:!!Ra.multiple};mb=Rb({},Ra,{value:void 0});Cc("invalid",Y);break;case "textarea":M(Y,Ra);mb=K(Y,Ra);Cc("invalid",Y);break;default:mb=Ra}V(ta,mb);var zc=mb;for(Kb in zc)if(zc.hasOwnProperty(Kb)){var ad=zc[Kb];"style"===Kb?ba(Y,ad):"dangerouslySetInnerHTML"===Kb?(ad=ad?ad.__html:void 0,null!=ad&&wb(Y,ad)):
"children"===Kb?"string"===typeof ad?("textarea"!==ta||""!==ad)&&Q(Y,ad):"number"===typeof ad&&Q(Y,""+ad):"suppressContentEditableWarning"!==Kb&&"suppressHydrationWarning"!==Kb&&"autoFocus"!==Kb&&(Gc.hasOwnProperty(Kb)?null!=ad&&"onScroll"===Kb&&Cc("scroll",Y):null!=ad&&g(Y,Kb,ad,cc))}switch(ta){case "input":t(Y);C(Y,Ra,!1);break;case "textarea":t(Y);O(Y);break;case "option":null!=Ra.value&&Y.setAttribute("value",""+e(Ra.value));break;case "select":Y.multiple=!!Ra.multiple;Kb=Ra.value;null!=Kb?J(Y,
!!Ra.multiple,Kb,!1):null!=Ra.defaultValue&&J(Y,!!Ra.multiple,Ra.defaultValue,!0);break;default:"function"===typeof mb.onClick&&(Y.onclick=Ke)}ve(ta,Ra)&&(ha.flags|=4)}null!==ha.ref&&(ha.flags|=128)}return null;case 6:if(Y&&null!=ha.stateNode)wi(Y,ha,Y.memoizedProps,Ra);else{if("string"!==typeof Ra&&null===ha.stateNode)throw Error(b(166));ta=ng(Gh.current);ng(Wg.current);Th(ha)?(Ra=ha.stateNode,ta=ha.memoizedProps,Ra[Ci]=ha,Ra.nodeValue!==ta&&(ha.flags|=4)):(Ra=(9===ta.nodeType?ta:ta.ownerDocument).createTextNode(Ra),
Ra[Ci]=ha,ha.stateNode=Ra)}return null;case 13:Ie(zg);Ra=ha.memoizedState;if(0!==(ha.flags&64))return ha.lanes=ta,ha;Ra=null!==Ra;ta=!1;null===Y?void 0!==ha.memoizedProps.fallback&&Th(ha):ta=null!==Y.memoizedState;if(Ra&&!ta&&0!==(ha.mode&2))if(null===Y&&!0!==ha.memoizedProps.unstable_avoidThisFallback||0!==(zg.current&1))0===ih&&(ih=3);else{if(0===ih||3===ih)ih=4;null===tg||0===(Lj&134217727)&&0===(Mj&134217727)||de(tg,zh)}if(Ra||ta)ha.flags|=4;return null;case 4:return Og(),$k(ha),null===Y&&dd(ha.stateNode.containerInfo),
null;case 10:return Yb(ha),null;case 17:return Bd(ha.type)&&Ob(),null;case 19:Ie(zg);Ra=ha.memoizedState;if(null===Ra)return null;Kb=0!==(ha.flags&64);cc=Ra.rendering;if(null===cc)if(Kb)Jf(Ra,!1);else{if(0!==ih||null!==Y&&0!==(Y.flags&64))for(Y=ha.child;null!==Y;){cc=rh(Y);if(null!==cc){ha.flags|=64;Jf(Ra,!1);Kb=cc.updateQueue;null!==Kb&&(ha.updateQueue=Kb,ha.flags|=4);null===Ra.lastEffect&&(ha.firstEffect=null);ha.lastEffect=Ra.lastEffect;Ra=ta;for(ta=ha.child;null!==ta;)Kb=ta,Y=Ra,Kb.flags&=2,Kb.nextEffect=
null,Kb.firstEffect=null,Kb.lastEffect=null,cc=Kb.alternate,null===cc?(Kb.childLanes=0,Kb.lanes=Y,Kb.child=null,Kb.memoizedProps=null,Kb.memoizedState=null,Kb.updateQueue=null,Kb.dependencies=null,Kb.stateNode=null):(Kb.childLanes=cc.childLanes,Kb.lanes=cc.lanes,Kb.child=cc.child,Kb.memoizedProps=cc.memoizedProps,Kb.memoizedState=cc.memoizedState,Kb.updateQueue=cc.updateQueue,Kb.type=cc.type,Y=cc.dependencies,Kb.dependencies=null===Y?null:{lanes:Y.lanes,firstContext:Y.firstContext}),ta=ta.sibling;
nf(zg,zg.current&1|2);return ha.child}Y=Y.sibling}null!==Ra.tail&&Rg()>vk&&(ha.flags|=64,Kb=!0,Jf(Ra,!1),ha.lanes=33554432)}else{if(!Kb)if(Y=rh(cc),null!==Y){if(ha.flags|=64,Kb=!0,ta=Y.updateQueue,null!==ta&&(ha.updateQueue=ta,ha.flags|=4),Jf(Ra,!0),null===Ra.tail&&"hidden"===Ra.tailMode&&!cc.alternate&&!mi)return ha=ha.lastEffect=Ra.lastEffect,null!==ha&&(ha.nextEffect=null),null}else 2*Rg()-Ra.renderingStartTime>vk&&1073741824!==ta&&(ha.flags|=64,Kb=!0,Jf(Ra,!1),ha.lanes=33554432);Ra.isBackwards?
(cc.sibling=ha.child,ha.child=cc):(ta=Ra.last,null!==ta?ta.sibling=cc:ha.child=cc,Ra.last=cc)}return null!==Ra.tail?(ta=Ra.tail,Ra.rendering=ta,Ra.tail=ta.sibling,Ra.lastEffect=ha.lastEffect,Ra.renderingStartTime=Rg(),ta.sibling=null,ha=zg.current,nf(zg,Kb?ha&1|2:ha&1),ta):null;case 23:case 24:return uf(),null!==Y&&null!==Y.memoizedState!==(null!==ha.memoizedState)&&"unstable-defer-without-hiding"!==Ra.mode&&(ha.flags|=4),null}throw Error(b(156,ha.tag));}function wh(Y){switch(Y.tag){case 1:Bd(Y.type)&&
Ob();var ha=Y.flags;return ha&4096?(Y.flags=ha&-4097|64,Y):null;case 3:Og();Ie(oh);Ie(nh);ch();ha=Y.flags;if(0!==(ha&64))throw Error(b(285));Y.flags=ha&-4097|64;return Y;case 5:return Kh(Y),null;case 13:return Ie(zg),ha=Y.flags,ha&4096?(Y.flags=ha&-4097|64,Y):null;case 19:return Ie(zg),null;case 4:return Og(),null;case 10:return Yb(Y),null;case 23:case 24:return uf(),null;default:return null}}function Uh(Y,ha){try{var ta="",Ra=ha;do ta+=c(Ra),Ra=Ra.return;while(Ra)}catch(mb){ta="\nError generating stack: "+
mb.message+"\n"+mb.stack}return{value:Y,source:ha,stack:ta}}function hi(Y,ha){try{console.error(ha.value)}catch(ta){setTimeout(function(){throw ta;})}}function yi(Y,ha,ta){ta=wc(-1,ta);ta.tag=3;ta.payload={element:null};var Ra=ha.value;ta.callback=function(){hj||(hj=!0,wj=Ra);hi(Y,ha)};return ta}function zi(Y,ha,ta){ta=wc(-1,ta);ta.tag=3;var Ra=Y.type.getDerivedStateFromError;if("function"===typeof Ra){var mb=ha.value;ta.payload=function(){hi(Y,ha);return Ra(mb)}}var Kb=Y.stateNode;null!==Kb&&"function"===
typeof Kb.componentDidCatch&&(ta.callback=function(){"function"!==typeof Ra&&(null===Ng?Ng=new Set([this]):Ng.add(this),hi(Y,ha));var cc=ha.stack;this.componentDidCatch(ha.value,{componentStack:null!==cc?cc:""})});return ta}function Vh(Y){var ha=Y.ref;if(null!==ha)if("function"===typeof ha)try{ha(null)}catch(ta){Xh(Y,ta)}else ha.current=null}function Xa(Y,ha){switch(ha.tag){case 0:case 11:case 15:case 22:return;case 1:if(ha.flags&256&&null!==Y){var ta=Y.memoizedProps,Ra=Y.memoizedState;Y=ha.stateNode;
ha=Y.getSnapshotBeforeUpdate(ha.elementType===ha.type?ta:oc(ha.type,ta),Ra);Y.__reactInternalSnapshotBeforeUpdate=ha}return;case 3:ha.flags&256&&Ef(ha.stateNode.containerInfo);return;case 5:case 6:case 4:case 17:return}throw Error(b(163));}function Pa(Y,ha,ta){switch(ta.tag){case 0:case 11:case 15:case 22:ha=ta.updateQueue;ha=null!==ha?ha.lastEffect:null;if(null!==ha){Y=ha=ha.next;do{if(3===(Y.tag&3)){var Ra=Y.create;Y.destroy=Ra()}Y=Y.next}while(Y!==ha)}ha=ta.updateQueue;ha=null!==ha?ha.lastEffect:
null;if(null!==ha){Y=ha=ha.next;do{var mb=Y;Ra=mb.next;mb=mb.tag;0!==(mb&4)&&0!==(mb&1)&&(Ih(ta,Y),Xi(ta,Y));Y=Ra}while(Y!==ha)}return;case 1:Y=ta.stateNode;ta.flags&4&&(null===ha?Y.componentDidMount():(Ra=ta.elementType===ta.type?ha.memoizedProps:oc(ta.type,ha.memoizedProps),Y.componentDidUpdate(Ra,ha.memoizedState,Y.__reactInternalSnapshotBeforeUpdate)));ha=ta.updateQueue;null!==ha&&ae(ta,ha,Y);return;case 3:ha=ta.updateQueue;if(null!==ha){Y=null;if(null!==ta.child)switch(ta.child.tag){case 5:Y=
ta.child.stateNode;break;case 1:Y=ta.child.stateNode}ae(ta,ha,Y)}return;case 5:Y=ta.stateNode;null===ha&&ta.flags&4&&ve(ta.type,ta.memoizedProps)&&Y.focus();return;case 6:return;case 4:return;case 12:return;case 13:null===ta.memoizedState&&(ta=ta.alternate,null!==ta&&(ta=ta.memoizedState,null!==ta&&(ta=ta.dehydrated,null!==ta&&zb(ta))));return;case 19:case 17:case 20:case 21:case 23:case 24:return}throw Error(b(163));}function Mb(Y,ha){for(var ta=Y;;){if(5===ta.tag){var Ra=ta.stateNode;if(ha)Ra=Ra.style,
"function"===typeof Ra.setProperty?Ra.setProperty("display","none","important"):Ra.display="none";else{Ra=ta.stateNode;var mb=ta.memoizedProps.style;mb=void 0!==mb&&null!==mb&&mb.hasOwnProperty("display")?mb.display:null;Ra.style.display=Z("display",mb)}}else if(6===ta.tag)ta.stateNode.nodeValue=ha?"":ta.memoizedProps;else if((23!==ta.tag&&24!==ta.tag||null===ta.memoizedState||ta===Y)&&null!==ta.child){ta.child.return=ta;ta=ta.child;continue}if(ta===Y)break;for(;null===ta.sibling;){if(null===ta.return||
ta.return===Y)return;ta=ta.return}ta.sibling.return=ta.return;ta=ta.sibling}}function bc(Y,ha){if(Hi&&"function"===typeof Hi.onCommitFiberUnmount)try{Hi.onCommitFiberUnmount(Bj,ha)}catch(Kb){}switch(ha.tag){case 0:case 11:case 14:case 15:case 22:Y=ha.updateQueue;if(null!==Y&&(Y=Y.lastEffect,null!==Y)){var ta=Y=Y.next;do{var Ra=ta,mb=Ra.destroy;Ra=Ra.tag;if(void 0!==mb)if(0!==(Ra&4))Ih(ha,ta);else{Ra=ha;try{mb()}catch(Kb){Xh(Ra,Kb)}}ta=ta.next}while(ta!==Y)}break;case 1:Vh(ha);Y=ha.stateNode;if("function"===
typeof Y.componentWillUnmount)try{Y.props=ha.memoizedProps,Y.state=ha.memoizedState,Y.componentWillUnmount()}catch(Kb){Xh(ha,Kb)}break;case 5:Vh(ha);break;case 4:pd(Y,ha)}}function kc(Y){Y.alternate=null;Y.child=null;Y.dependencies=null;Y.firstEffect=null;Y.lastEffect=null;Y.memoizedProps=null;Y.memoizedState=null;Y.pendingProps=null;Y.return=null;Y.updateQueue=null}function ed(Y){return 5===Y.tag||3===Y.tag||4===Y.tag}function nd(Y){a:{for(var ha=Y.return;null!==ha;){if(ed(ha))break a;ha=ha.return}throw Error(b(160));
}var ta=ha;ha=ta.stateNode;switch(ta.tag){case 5:var Ra=!1;break;case 3:ha=ha.containerInfo;Ra=!0;break;case 4:ha=ha.containerInfo;Ra=!0;break;default:throw Error(b(161));}ta.flags&16&&(Q(ha,""),ta.flags&=-17);ta=Y;a:b:for(;;){for(;null===ta.sibling;){if(null===ta.return||ed(ta.return)){ta=null;break a}ta=ta.return}ta.sibling.return=ta.return;for(ta=ta.sibling;5!==ta.tag&&6!==ta.tag&&18!==ta.tag;){if(ta.flags&2)continue b;if(null===ta.child||4===ta.tag)continue b;else ta.child.return=ta,ta=ta.child}if(!(ta.flags&
2)){ta=ta.stateNode;break a}}Ra?hd(Y,ta,ha):md(Y,ta,ha)}function hd(Y,ha,ta){var Ra=Y.tag,mb=5===Ra||6===Ra;if(mb)Y=mb?Y.stateNode:Y.stateNode.instance,ha?8===ta.nodeType?ta.parentNode.insertBefore(Y,ha):ta.insertBefore(Y,ha):(8===ta.nodeType?(ha=ta.parentNode,ha.insertBefore(Y,ta)):(ha=ta,ha.appendChild(Y)),ta=ta._reactRootContainer,null!==ta&&void 0!==ta||null!==ha.onclick||(ha.onclick=Ke));else if(4!==Ra&&(Y=Y.child,null!==Y))for(hd(Y,ha,ta),Y=Y.sibling;null!==Y;)hd(Y,ha,ta),Y=Y.sibling}function md(Y,
ha,ta){var Ra=Y.tag,mb=5===Ra||6===Ra;if(mb)Y=mb?Y.stateNode:Y.stateNode.instance,ha?ta.insertBefore(Y,ha):ta.appendChild(Y);else if(4!==Ra&&(Y=Y.child,null!==Y))for(md(Y,ha,ta),Y=Y.sibling;null!==Y;)md(Y,ha,ta),Y=Y.sibling}function pd(Y,ha){for(var ta=ha,Ra=!1,mb,Kb;;){if(!Ra){Ra=ta.return;a:for(;;){if(null===Ra)throw Error(b(160));mb=Ra.stateNode;switch(Ra.tag){case 5:Kb=!1;break a;case 3:mb=mb.containerInfo;Kb=!0;break a;case 4:mb=mb.containerInfo;Kb=!0;break a}Ra=Ra.return}Ra=!0}if(5===ta.tag||
6===ta.tag){var cc=Y,zc=ta,ad=zc;a:for(;;)if(bc(cc,ad),null!==ad.child&&4!==ad.tag)ad.child.return=ad,ad=ad.child;else{if(ad===zc)break a;for(;null===ad.sibling;){if(null===ad.return||ad.return===zc)break a;ad=ad.return}ad.sibling.return=ad.return;ad=ad.sibling}Kb?(cc=mb,zc=ta.stateNode,8===cc.nodeType?cc.parentNode.removeChild(zc):cc.removeChild(zc)):mb.removeChild(ta.stateNode)}else if(4===ta.tag){if(null!==ta.child){mb=ta.stateNode.containerInfo;Kb=!0;ta.child.return=ta;ta=ta.child;continue}}else if(bc(Y,
ta),null!==ta.child){ta.child.return=ta;ta=ta.child;continue}if(ta===ha)break;for(;null===ta.sibling;){if(null===ta.return||ta.return===ha)return;ta=ta.return;4===ta.tag&&(Ra=!1)}ta.sibling.return=ta.return;ta=ta.sibling}}function Pd(Y,ha){switch(ha.tag){case 0:case 11:case 14:case 15:case 22:var ta=ha.updateQueue;ta=null!==ta?ta.lastEffect:null;if(null!==ta){var Ra=ta=ta.next;do 3===(Ra.tag&3)&&(Y=Ra.destroy,Ra.destroy=void 0,void 0!==Y&&Y()),Ra=Ra.next;while(Ra!==ta)}return;case 1:return;case 5:ta=
ha.stateNode;if(null!=ta){Ra=ha.memoizedProps;var mb=null!==Y?Y.memoizedProps:Ra;Y=ha.type;var Kb=ha.updateQueue;ha.updateQueue=null;if(null!==Kb){ta[Hj]=Ra;"input"===Y&&"radio"===Ra.type&&null!=Ra.name&&A(ta,Ra);S(Y,mb);ha=S(Y,Ra);for(mb=0;mb<Kb.length;mb+=2){var cc=Kb[mb],zc=Kb[mb+1];"style"===cc?ba(ta,zc):"dangerouslySetInnerHTML"===cc?wb(ta,zc):"children"===cc?Q(ta,zc):g(ta,cc,zc,ha)}switch(Y){case "input":D(ta,Ra);break;case "textarea":H(ta,Ra);break;case "select":Y=ta._wrapperState.wasMultiple,
ta._wrapperState.wasMultiple=!!Ra.multiple,Kb=Ra.value,null!=Kb?J(ta,!!Ra.multiple,Kb,!1):Y!==!!Ra.multiple&&(null!=Ra.defaultValue?J(ta,!!Ra.multiple,Ra.defaultValue,!0):J(ta,!!Ra.multiple,Ra.multiple?[]:"",!1))}}}return;case 6:if(null===ha.stateNode)throw Error(b(162));ha.stateNode.nodeValue=ha.memoizedProps;return;case 3:ta=ha.stateNode;ta.hydrate&&(ta.hydrate=!1,zb(ta.containerInfo));return;case 12:return;case 13:null!==ha.memoizedState&&(uk=Rg(),Mb(ha.child,!0));xd(ha);return;case 19:xd(ha);
return;case 17:return;case 23:case 24:Mb(ha,null!==ha.memoizedState);return}throw Error(b(163));}function xd(Y){var ha=Y.updateQueue;if(null!==ha){Y.updateQueue=null;var ta=Y.stateNode;null===ta&&(ta=Y.stateNode=new nl);ha.forEach(function(Ra){var mb=Xg.bind(null,Y,Ra);ta.has(Ra)||(ta.add(Ra),Ra.then(mb,mb))})}}function Ld(Y,ha){return null!==Y&&(Y=Y.memoizedState,null===Y||null!==Y.dehydrated)?(ha=ha.memoizedState,null!==ha&&null===ha.dehydrated):!1}function $d(){vk=Rg()+500}function Vd(){return 0!==
(Pf&48)?Rg():-1!==Cj?Cj:Cj=Rg()}function Yd(Y){Y=Y.mode;if(0===(Y&2))return 1;if(0===(Y&4))return 99===pe()?1:2;0===ci&&(ci=Kj);if(0!==il.transition){0!==si&&(si=null!==Nj?Nj.pendingLanes:0);Y=ci;var ha=4186112&~si;ha&=-ha;0===ha&&(Y=4186112&~Y,ha=Y&-Y,0===ha&&(ha=8192));return ha}Y=pe();0!==(Pf&4)&&98===Y?Y=Db(12,ci):(Y=Ja(Y),Y=Db(Y,ci));return Y}function df(Y,ha,ta){if(50<dj)throw dj=0,cj=null,Error(b(185));Y=Se(Y,ha);if(null===Y)return null;ob(Y,ha,ta);Y===tg&&(Mj|=ha,4===ih&&de(Y,zh));var Ra=
pe();1===ha?0!==(Pf&8)&&0===(Pf&48)?De(Y):(he(Y,ta),0===Pf&&($d(),oe())):(0===(Pf&4)||98!==Ra&&99!==Ra||(null===Ri?Ri=new Set([Y]):Ri.add(Y)),he(Y,ta));Nj=Y}function Se(Y,ha){Y.lanes|=ha;var ta=Y.alternate;null!==ta&&(ta.lanes|=ha);ta=Y;for(Y=Y.return;null!==Y;)Y.childLanes|=ha,ta=Y.alternate,null!==ta&&(ta.childLanes|=ha),ta=Y,Y=Y.return;return 3===ta.tag?ta.stateNode:null}function he(Y,ha){for(var ta=Y.callbackNode,Ra=Y.suspendedLanes,mb=Y.pingedLanes,Kb=Y.expirationTimes,cc=Y.pendingLanes;0<cc;){var zc=
31-dh(cc),ad=1<<zc,Jd=Kb[zc];if(-1===Jd){if(0===(ad&Ra)||0!==(ad&mb)){Jd=ha;Aa(ad);var Re=yg;Kb[zc]=10<=Re?Jd+250:6<=Re?Jd+5E3:-1}}else Jd<=ha&&(Y.expiredLanes|=ad);cc&=~ad}Ra=$a(Y,Y===tg?zh:0);ha=yg;if(0===Ra)null!==ta&&(ta!==pk&&nk(ta),Y.callbackNode=null,Y.callbackPriority=0);else{if(null!==ta){if(Y.callbackPriority===ha)return;ta!==pk&&nk(ta)}15===ha?(ta=De.bind(null,Y),null===Ni?(Ni=[ta],$i=Zj(ak,xb)):Ni.push(ta),ta=pk):14===ha?ta=Ge(99,De.bind(null,Y)):(ta=Ta(ha),ta=Ge(ta,se.bind(null,Y)));
Y.callbackPriority=ha;Y.callbackNode=ta}}function se(Y){Cj=-1;si=ci=0;if(0!==(Pf&48))throw Error(b(327));var ha=Y.callbackNode;if(Ch()&&Y.callbackNode!==ha)return null;var ta=$a(Y,Y===tg?zh:0);if(0===ta)return null;var Ra=ta,mb=Pf;Pf|=16;var Kb=Kg();if(tg!==Y||zh!==Ra)$d(),dg(Y,Ra);do try{for(;null!==hh&&!Wk();)Ee(hh);break}catch(zc){kg(Y,zc)}while(1);uj=fj=Ij=null;sk.current=Kb;Pf=mb;null!==hh?Ra=0:(tg=null,zh=0,Ra=ih);if(0!==(Kj&Mj))dg(Y,0);else if(0!==Ra){2===Ra&&(Pf|=64,Y.hydrate&&(Y.hydrate=
!1,Ef(Y.containerInfo)),ta=ab(Y),0!==ta&&(Ra=$f(Y,ta)));if(1===Ra)throw ha=tk,dg(Y,0),de(Y,ta),he(Y,Rg()),ha;Y.finishedWork=Y.current.alternate;Y.finishedLanes=ta;switch(Ra){case 0:case 1:throw Error(b(345));case 2:Cg(Y);break;case 3:de(Y,ta);if((ta&62914560)===ta&&(Ra=uk+500-Rg(),10<Ra)){if(0!==$a(Y,0))break;mb=Y.suspendedLanes;if((mb&ta)!==ta){Vd();Y.pingedLanes|=Y.suspendedLanes&mb;break}Y.timeoutHandle=lk(Cg.bind(null,Y),Ra);break}Cg(Y);break;case 4:de(Y,ta);if((ta&4186112)===ta)break;Ra=Y.eventTimes;
for(mb=-1;0<ta;){var cc=31-dh(ta);Kb=1<<cc;cc=Ra[cc];cc>mb&&(mb=cc);ta&=~Kb}ta=mb;ta=Rg()-ta;ta=(120>ta?120:480>ta?480:1080>ta?1080:1920>ta?1920:3E3>ta?3E3:4320>ta?4320:1960*al(ta/1960))-ta;if(10<ta){Y.timeoutHandle=lk(Cg.bind(null,Y),ta);break}Cg(Y);break;case 5:Cg(Y);break;default:throw Error(b(329));}}he(Y,Rg());return Y.callbackNode===ha?se.bind(null,Y):null}function de(Y,ha){ha&=~vj;ha&=~Mj;Y.suspendedLanes|=ha;Y.pingedLanes&=~ha;for(Y=Y.expirationTimes;0<ha;){var ta=31-dh(ha),Ra=1<<ta;Y[ta]=
-1;ha&=~Ra}}function De(Y){if(0!==(Pf&48))throw Error(b(327));Ch();if(Y===tg&&0!==(Y.expiredLanes&zh)){var ha=zh,ta=$f(Y,ha);0!==(Kj&Mj)&&(ha=$a(Y,ha),ta=$f(Y,ha))}else ha=$a(Y,0),ta=$f(Y,ha);0!==Y.tag&&2===ta&&(Pf|=64,Y.hydrate&&(Y.hydrate=!1,Ef(Y.containerInfo)),ha=ab(Y),0!==ha&&(ta=$f(Y,ha)));if(1===ta)throw ta=tk,dg(Y,0),de(Y,ha),he(Y,Rg()),ta;Y.finishedWork=Y.current.alternate;Y.finishedLanes=ha;Cg(Y);he(Y,Rg());return null}function yf(){if(null!==Ri){var Y=Ri;Ri=null;Y.forEach(function(ha){ha.expiredLanes|=
24&ha.pendingLanes;he(ha,Rg())})}oe()}function Zf(Y,ha){var ta=Pf;Pf|=1;try{return Y(ha)}finally{Pf=ta,0===Pf&&($d(),oe())}}function Tf(Y,ha){var ta=Pf;Pf&=-2;Pf|=8;try{return Y(ha)}finally{Pf=ta,0===Pf&&($d(),oe())}}function gf(Y,ha){nf(Ok,gj);gj|=ha;Kj|=ha}function uf(){gj=Ok.current;Ie(Ok)}function dg(Y,ha){Y.finishedWork=null;Y.finishedLanes=0;var ta=Y.timeoutHandle;-1!==ta&&(Y.timeoutHandle=-1,Ik(ta));if(null!==hh)for(ta=hh.return;null!==ta;){var Ra=ta;switch(Ra.tag){case 1:Ra=Ra.type.childContextTypes;
null!==Ra&&void 0!==Ra&&Ob();break;case 3:Og();Ie(oh);Ie(nh);ch();break;case 5:Kh(Ra);break;case 4:Og();break;case 13:Ie(zg);break;case 19:Ie(zg);break;case 10:Yb(Ra);break;case 23:case 24:uf()}ta=ta.return}tg=Y;hh=ph(Y.current,null);zh=gj=Kj=ha;ih=0;tk=null;vj=Mj=Lj=0}function kg(Y,ha){do{var ta=hh;try{uj=fj=Ij=null;bk.current=dk;if(rk){for(var Ra=ag.memoizedState;null!==Ra;){var mb=Ra.queue;null!==mb&&(mb.pending=null);Ra=Ra.next}rk=!1}ri=0;yh=Hh=ag=null;ck=!1;Nk.current=null;if(null===ta||null===
ta.return){ih=1;tk=ha;hh=null;break}a:{var Kb=Y,cc=ta.return,zc=ta,ad=ha;ha=zh;zc.flags|=2048;zc.firstEffect=zc.lastEffect=null;if(null!==ad&&"object"===typeof ad&&"function"===typeof ad.then){var Jd=ad;if(0===(zc.mode&2)){var Re=zc.alternate;Re?(zc.updateQueue=Re.updateQueue,zc.memoizedState=Re.memoizedState,zc.lanes=Re.lanes):(zc.updateQueue=null,zc.memoizedState=null)}var If=0!==(zg.current&1),Rd=cc;do{var Fe;if(Fe=13===Rd.tag){var Kf=Rd.memoizedState;if(null!==Kf)Fe=null!==Kf.dehydrated?!0:!1;
else{var tf=Rd.memoizedProps;Fe=void 0===tf.fallback?!1:!0!==tf.unstable_avoidThisFallback?!0:If?!1:!0}}if(Fe){var td=Rd.updateQueue;if(null===td){var gd=new Set;gd.add(Jd);Rd.updateQueue=gd}else td.add(Jd);if(0===(Rd.mode&2)){Rd.flags|=64;zc.flags|=16384;zc.flags&=-2981;if(1===zc.tag)if(null===zc.alternate)zc.tag=17;else{var jd=wc(-1,1);jd.tag=2;rc(zc,jd)}zc.lanes|=1;break a}ad=void 0;zc=ha;var Zd=Kb.pingCache;null===Zd?(Zd=Kb.pingCache=new ml,ad=new Set,Zd.set(Jd,ad)):(ad=Zd.get(Jd),void 0===ad&&
(ad=new Set,Zd.set(Jd,ad)));if(!ad.has(zc)){ad.add(zc);var ie=Nh.bind(null,Kb,Jd,zc);Jd.then(ie,ie)}Rd.flags|=4096;Rd.lanes=ha;break a}Rd=Rd.return}while(null!==Rd);ad=Error((d(zc.type)||"A React component")+" suspended while rendering, but no fallback UI was specified.\n\nAdd a \x3cSuspense fallback\x3d...\x3e component higher in the tree to provide a loading indicator or placeholder to display.")}5!==ih&&(ih=2);ad=Uh(ad,zc);Rd=cc;do{switch(Rd.tag){case 3:Kb=ad;Rd.flags|=4096;ha&=-ha;Rd.lanes|=ha;
var Qf=yi(Rd,Kb,ha);pc(Rd,Qf);break a;case 1:Kb=ad;var cf=Rd.type,Lf=Rd.stateNode;if(0===(Rd.flags&64)&&("function"===typeof cf.getDerivedStateFromError||null!==Lf&&"function"===typeof Lf.componentDidCatch&&(null===Ng||!Ng.has(Lf)))){Rd.flags|=4096;ha&=-ha;Rd.lanes|=ha;var Sf=zi(Rd,Kb,ha);pc(Rd,Sf);break a}}Rd=Rd.return}while(null!==Rd)}eg(ta)}catch(jf){ha=jf;hh===ta&&null!==ta&&(hh=ta.return);continue}break}while(1)}function Kg(){var Y=sk.current;sk.current=dk;return null===Y?dk:Y}function $f(Y,
ha){var ta=Pf;Pf|=16;var Ra=Kg();tg===Y&&zh===ha||dg(Y,ha);do try{for(;null!==hh;)Ee(hh);break}catch(mb){kg(Y,mb)}while(1);uj=fj=Ij=null;Pf=ta;sk.current=Ra;if(null!==hh)throw Error(b(261));tg=null;zh=0;return ih}function Ee(Y){var ha=Oj(Y.alternate,Y,gj);Y.memoizedProps=Y.pendingProps;null===ha?eg(Y):hh=ha;Nk.current=null}function eg(Y){var ha=Y;do{var ta=ha.alternate;Y=ha.return;if(0===(ha.flags&2048)){ta=Yf(ta,ha,gj);if(null!==ta){hh=ta;return}ta=ha;if(24!==ta.tag&&23!==ta.tag||null===ta.memoizedState||
0!==(gj&1073741824)||0===(ta.mode&4)){for(var Ra=0,mb=ta.child;null!==mb;)Ra|=mb.lanes|mb.childLanes,mb=mb.sibling;ta.childLanes=Ra}null!==Y&&0===(Y.flags&2048)&&(null===Y.firstEffect&&(Y.firstEffect=ha.firstEffect),null!==ha.lastEffect&&(null!==Y.lastEffect&&(Y.lastEffect.nextEffect=ha.firstEffect),Y.lastEffect=ha.lastEffect),1<ha.flags&&(null!==Y.lastEffect?Y.lastEffect.nextEffect=ha:Y.firstEffect=ha,Y.lastEffect=ha))}else{ta=wh(ha);if(null!==ta){ta.flags&=2047;hh=ta;return}null!==Y&&(Y.firstEffect=
Y.lastEffect=null,Y.flags|=2048)}ha=ha.sibling;if(null!==ha){hh=ha;return}hh=ha=Y}while(null!==ha);0===ih&&(ih=5)}function Cg(Y){var ha=pe();qe(99,mh.bind(null,Y,ha));return null}function mh(Y,ha){do Ch();while(null!==Qg);if(0!==(Pf&48))throw Error(b(327));var ta=Y.finishedWork;if(null===ta)return null;Y.finishedWork=null;Y.finishedLanes=0;if(ta===Y.current)throw Error(b(177));Y.callbackNode=null;var Ra=ta.lanes|ta.childLanes,mb=Ra,Kb=Y.pendingLanes&~mb;Y.pendingLanes=mb;Y.suspendedLanes=0;Y.pingedLanes=
0;Y.expiredLanes&=mb;Y.mutableReadLanes&=mb;Y.entangledLanes&=mb;mb=Y.entanglements;for(var cc=Y.eventTimes,zc=Y.expirationTimes;0<Kb;){var ad=31-dh(Kb),Jd=1<<ad;mb[ad]=0;cc[ad]=-1;zc[ad]=-1;Kb&=~Jd}null!==Ri&&0===(Ra&24)&&Ri.has(Y)&&Ri.delete(Y);Y===tg&&(hh=tg=null,zh=0);1<ta.flags?null!==ta.lastEffect?(ta.lastEffect.nextEffect=ta,Ra=ta.firstEffect):Ra=ta:Ra=ta.firstEffect;if(null!==Ra){mb=Pf;Pf|=32;Nk.current=null;Ai=qi;cc=Cd();if(Gd(cc)){if("selectionStart"in cc)zc={start:cc.selectionStart,end:cc.selectionEnd};
else a:if(zc=(zc=cc.ownerDocument)&&zc.defaultView||window,(Jd=zc.getSelection&&zc.getSelection())&&0!==Jd.rangeCount){zc=Jd.anchorNode;Kb=Jd.anchorOffset;ad=Jd.focusNode;Jd=Jd.focusOffset;try{zc.nodeType,ad.nodeType}catch(jf){zc=null;break a}var Re=0,If=-1,Rd=-1,Fe=0,Kf=0,tf=cc,td=null;b:for(;;){for(var gd;;){tf!==zc||0!==Kb&&3!==tf.nodeType||(If=Re+Kb);tf!==ad||0!==Jd&&3!==tf.nodeType||(Rd=Re+Jd);3===tf.nodeType&&(Re+=tf.nodeValue.length);if(null===(gd=tf.firstChild))break;td=tf;tf=gd}for(;;){if(tf===
cc)break b;td===zc&&++Fe===Kb&&(If=Re);td===ad&&++Kf===Jd&&(Rd=Re);if(null!==(gd=tf.nextSibling))break;tf=td;td=tf.parentNode}tf=gd}zc=-1===If||-1===Rd?null:{start:If,end:Rd}}else zc=null;zc=zc||{start:0,end:0}}else zc=null;Wj={focusedElem:cc,selectionRange:zc};qi=!1;ek=null;wk=!1;Qe=Ra;do try{Wi()}catch(jf){if(null===Qe)throw Error(b(330));Xh(Qe,jf);Qe=Qe.nextEffect}while(null!==Qe);ek=null;Qe=Ra;do try{for(cc=Y;null!==Qe;){var jd=Qe.flags;jd&16&&Q(Qe.stateNode,"");if(jd&128){var Zd=Qe.alternate;
if(null!==Zd){var ie=Zd.ref;null!==ie&&("function"===typeof ie?ie(null):ie.current=null)}}switch(jd&1038){case 2:nd(Qe);Qe.flags&=-3;break;case 6:nd(Qe);Qe.flags&=-3;Pd(Qe.alternate,Qe);break;case 1024:Qe.flags&=-1025;break;case 1028:Qe.flags&=-1025;Pd(Qe.alternate,Qe);break;case 4:Pd(Qe.alternate,Qe);break;case 8:zc=Qe;pd(cc,zc);var Qf=zc.alternate;kc(zc);null!==Qf&&kc(Qf)}Qe=Qe.nextEffect}}catch(jf){if(null===Qe)throw Error(b(330));Xh(Qe,jf);Qe=Qe.nextEffect}while(null!==Qe);ie=Wj;Zd=Cd();jd=ie.focusedElem;
cc=ie.selectionRange;if(Zd!==jd&&jd&&jd.ownerDocument&&kd(jd.ownerDocument.documentElement,jd)){null!==cc&&Gd(jd)&&(Zd=cc.start,ie=cc.end,void 0===ie&&(ie=Zd),"selectionStart"in jd?(jd.selectionStart=Zd,jd.selectionEnd=Math.min(ie,jd.value.length)):(ie=(Zd=jd.ownerDocument||document)&&Zd.defaultView||window,ie.getSelection&&(ie=ie.getSelection(),zc=jd.textContent.length,Qf=Math.min(cc.start,zc),cc=void 0===cc.end?Qf:Math.min(cc.end,zc),!ie.extend&&Qf>cc&&(zc=cc,cc=Qf,Qf=zc),zc=Rc(jd,Qf),Kb=Rc(jd,
cc),zc&&Kb&&(1!==ie.rangeCount||ie.anchorNode!==zc.node||ie.anchorOffset!==zc.offset||ie.focusNode!==Kb.node||ie.focusOffset!==Kb.offset)&&(Zd=Zd.createRange(),Zd.setStart(zc.node,zc.offset),ie.removeAllRanges(),Qf>cc?(ie.addRange(Zd),ie.extend(Kb.node,Kb.offset)):(Zd.setEnd(Kb.node,Kb.offset),ie.addRange(Zd))))));Zd=[];for(ie=jd;ie=ie.parentNode;)1===ie.nodeType&&Zd.push({element:ie,left:ie.scrollLeft,top:ie.scrollTop});"function"===typeof jd.focus&&jd.focus();for(jd=0;jd<Zd.length;jd++)ie=Zd[jd],
ie.element.scrollLeft=ie.left,ie.element.scrollTop=ie.top}qi=!!Ai;Wj=Ai=null;Y.current=ta;Qe=Ra;do try{for(jd=Y;null!==Qe;){var cf=Qe.flags;cf&36&&Pa(jd,Qe.alternate,Qe);if(cf&128){Zd=void 0;var Lf=Qe.ref;if(null!==Lf){var Sf=Qe.stateNode;switch(Qe.tag){case 5:Zd=Sf;break;default:Zd=Sf}"function"===typeof Lf?Lf(Zd):Lf.current=Zd}}Qe=Qe.nextEffect}}catch(jf){if(null===Qe)throw Error(b(330));Xh(Qe,jf);Qe=Qe.nextEffect}while(null!==Qe);Qe=null;Yk();Pf=mb}else Y.current=ta;if(fi)fi=!1,Qg=Y,aj=ha;else for(Qe=
Ra;null!==Qe;)ha=Qe.nextEffect,Qe.nextEffect=null,Qe.flags&8&&(cf=Qe,cf.sibling=null,cf.stateNode=null),Qe=ha;Ra=Y.pendingLanes;0===Ra&&(Ng=null);1===Ra?Y===cj?dj++:(dj=0,cj=Y):dj=0;ta=ta.stateNode;if(Hi&&"function"===typeof Hi.onCommitFiberRoot)try{Hi.onCommitFiberRoot(Bj,ta,void 0,64===(ta.current.flags&64))}catch(jf){}he(Y,Rg());if(hj)throw hj=!1,Y=wj,wj=null,Y;if(0!==(Pf&8))return null;oe();return null}function Wi(){for(;null!==Qe;){var Y=Qe.alternate;wk||null===ek||(0!==(Qe.flags&8)?Za(Qe,ek)&&
(wk=!0):13===Qe.tag&&Ld(Y,Qe)&&Za(Qe,ek)&&(wk=!0));var ha=Qe.flags;0!==(ha&256)&&Xa(Y,Qe);0===(ha&512)||fi||(fi=!0,Ge(97,function(){Ch();return null}));Qe=Qe.nextEffect}}function Ch(){if(90!==aj){var Y=97<aj?97:aj;aj=90;return qe(Y,Si)}return!1}function Xi(Y,ha){Ak.push(ha,Y);fi||(fi=!0,Ge(97,function(){Ch();return null}))}function Ih(Y,ha){bj.push(ha,Y);fi||(fi=!0,Ge(97,function(){Ch();return null}))}function Si(){if(null===Qg)return!1;var Y=Qg;Qg=null;if(0!==(Pf&48))throw Error(b(331));var ha=Pf;
Pf|=32;var ta=bj;bj=[];for(var Ra=0;Ra<ta.length;Ra+=2){var mb=ta[Ra],Kb=ta[Ra+1],cc=mb.destroy;mb.destroy=void 0;if("function"===typeof cc)try{cc()}catch(ad){if(null===Kb)throw Error(b(330));Xh(Kb,ad)}}ta=Ak;Ak=[];for(Ra=0;Ra<ta.length;Ra+=2){mb=ta[Ra];Kb=ta[Ra+1];try{var zc=mb.create;mb.destroy=zc()}catch(ad){if(null===Kb)throw Error(b(330));Xh(Kb,ad)}}for(zc=Y.current.firstEffect;null!==zc;)Y=zc.nextEffect,zc.nextEffect=null,zc.flags&8&&(zc.sibling=null,zc.stateNode=null),zc=Y;Pf=ha;oe();return!0}
function ij(Y,ha,ta){ha=Uh(ta,ha);ha=yi(Y,ha,1);rc(Y,ha);ha=Vd();Y=Se(Y,1);null!==Y&&(ob(Y,1,ha),he(Y,ha))}function Xh(Y,ha){if(3===Y.tag)ij(Y,Y,ha);else for(var ta=Y.return;null!==ta;){if(3===ta.tag){ij(ta,Y,ha);break}else if(1===ta.tag){var Ra=ta.stateNode;if("function"===typeof ta.type.getDerivedStateFromError||"function"===typeof Ra.componentDidCatch&&(null===Ng||!Ng.has(Ra))){Y=Uh(ha,Y);var mb=zi(ta,Y,1);rc(ta,mb);mb=Vd();ta=Se(ta,1);if(null!==ta)ob(ta,1,mb),he(ta,mb);else if("function"===typeof Ra.componentDidCatch&&
(null===Ng||!Ng.has(Ra)))try{Ra.componentDidCatch(ha,Y)}catch(Kb){}break}}ta=ta.return}}function Nh(Y,ha,ta){var Ra=Y.pingCache;null!==Ra&&Ra.delete(ha);ha=Vd();Y.pingedLanes|=Y.suspendedLanes&ta;tg===Y&&(zh&ta)===ta&&(4===ih||3===ih&&(zh&62914560)===zh&&500>Rg()-uk?dg(Y,0):vj|=ta);he(Y,ha)}function Xg(Y,ha){var ta=Y.stateNode;null!==ta&&ta.delete(ha);ha=0;0===ha&&(ha=Y.mode,0===(ha&2)?ha=1:0===(ha&4)?ha=99===pe()?1:2:(0===ci&&(ci=Kj),ha=Nb(62914560&~ci),0===ha&&(ha=4194304)));ta=Vd();Y=Se(Y,ha);
null!==Y&&(ob(Y,ha,ta),he(Y,ta))}function oi(Y,ha,ta,Ra){this.tag=Y;this.key=ta;this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null;this.index=0;this.ref=null;this.pendingProps=ha;this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null;this.mode=Ra;this.flags=0;this.lastEffect=this.firstEffect=this.nextEffect=null;this.childLanes=this.lanes=0;this.alternate=null}function Lg(Y,ha,ta,Ra){return new oi(Y,ha,ta,Ra)}function Rh(Y){Y=Y.prototype;return!(!Y||
!Y.isReactComponent)}function ai(Y){if("function"===typeof Y)return Rh(Y)?1:0;if(void 0!==Y&&null!==Y){Y=Y.$$typeof;if(Y===xf)return 11;if(Y===Cf)return 14}return 2}function ph(Y,ha){var ta=Y.alternate;null===ta?(ta=Lg(Y.tag,ha,Y.key,Y.mode),ta.elementType=Y.elementType,ta.type=Y.type,ta.stateNode=Y.stateNode,ta.alternate=Y,Y.alternate=ta):(ta.pendingProps=ha,ta.type=Y.type,ta.flags=0,ta.nextEffect=null,ta.firstEffect=null,ta.lastEffect=null);ta.childLanes=Y.childLanes;ta.lanes=Y.lanes;ta.child=Y.child;
ta.memoizedProps=Y.memoizedProps;ta.memoizedState=Y.memoizedState;ta.updateQueue=Y.updateQueue;ha=Y.dependencies;ta.dependencies=null===ha?null:{lanes:ha.lanes,firstContext:ha.firstContext};ta.sibling=Y.sibling;ta.index=Y.index;ta.ref=Y.ref;return ta}function Dh(Y,ha,ta,Ra,mb,Kb){var cc=2;Ra=Y;if("function"===typeof Y)Rh(Y)&&(cc=1);else if("string"===typeof Y)cc=5;else a:switch(Y){case ne:return Jh(ta.children,mb,Kb,ha);case ca:cc=8;mb|=16;break;case Le:cc=8;mb|=1;break;case we:return Y=Lg(12,ta,
ha,mb|8),Y.elementType=we,Y.type=we,Y.lanes=Kb,Y;case wf:return Y=Lg(13,ta,ha,mb),Y.type=wf,Y.elementType=wf,Y.lanes=Kb,Y;case lg:return Y=Lg(19,ta,ha,mb),Y.elementType=lg,Y.lanes=Kb,Y;case ua:return Sh(ta,mb,Kb,ha);case Ba:return Y=Lg(24,ta,ha,mb),Y.elementType=Ba,Y.lanes=Kb,Y;default:if("object"===typeof Y&&null!==Y)switch(Y.$$typeof){case kf:cc=10;break a;case Ne:cc=9;break a;case xf:cc=11;break a;case Cf:cc=14;break a;case Dg:cc=16;Ra=null;break a;case ef:cc=22;break a}throw Error(b(130,null==
Y?Y:typeof Y,""));}ha=Lg(cc,ta,ha,mb);ha.elementType=Y;ha.type=Ra;ha.lanes=Kb;return ha}function Jh(Y,ha,ta,Ra){Y=Lg(7,Y,Ra,ha);Y.lanes=ta;return Y}function Sh(Y,ha,ta,Ra){Y=Lg(23,Y,Ra,ha);Y.elementType=ua;Y.lanes=ta;return Y}function af(Y,ha,ta){Y=Lg(6,Y,null,ha);Y.lanes=ta;return Y}function qh(Y,ha,ta){ha=Lg(4,null!==Y.children?Y.children:[],Y.key,ha);ha.lanes=ta;ha.stateNode={containerInfo:Y.containerInfo,pendingChildren:null,implementation:Y.implementation};return ha}function Ti(Y,ha,ta){this.tag=
ha;this.containerInfo=Y;this.finishedWork=this.pingCache=this.current=this.pendingChildren=null;this.timeoutHandle=-1;this.pendingContext=this.context=null;this.hydrate=ta;this.callbackNode=null;this.callbackPriority=0;this.eventTimes=ec(0);this.expirationTimes=ec(-1);this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0;this.entanglements=ec(0);this.mutableSourceEagerHydrationData=null}function xi(Y,ha,ta){var Ra=3<
arguments.length&&void 0!==arguments[3]?arguments[3]:null;return{$$typeof:re,key:null==Ra?null:""+Ra,children:Y,containerInfo:ha,implementation:ta}}function gi(Y,ha,ta,Ra){var mb=ha.current,Kb=Vd(),cc=Yd(mb);a:if(ta){ta=ta._reactInternals;b:{if(oa(ta)!==ta||1!==ta.tag)throw Error(b(170));var zc=ta;do{switch(zc.tag){case 3:zc=zc.stateNode.context;break b;case 1:if(Bd(zc.type)){zc=zc.stateNode.__reactInternalMemoizedMergedChildContext;break b}}zc=zc.return}while(null!==zc);throw Error(b(171));}if(1===
ta.tag){var ad=ta.type;if(Bd(ad)){ta=Mc(ta,ad,zc);break a}}ta=zc}else ta=Di;null===ha.context?ha.context=ta:ha.pendingContext=ta;ha=wc(Kb,cc);ha.payload={element:Y};Ra=void 0===Ra?null:Ra;null!==Ra&&(ha.callback=Ra);rc(mb,ha);df(mb,cc,Kb);return cc}function kb(Y){Y=Y.current;if(!Y.child)return null;switch(Y.child.tag){case 5:return Y.child.stateNode;default:return Y.child.stateNode}}function R(Y,ha){Y=Y.memoizedState;if(null!==Y&&null!==Y.dehydrated){var ta=Y.retryLane;Y.retryLane=0!==ta&&ta<ha?ta:
ha}}function X(Y,ha){R(Y,ha);(Y=Y.alternate)&&R(Y,ha)}function U(){return null}function da(Y,ha,ta){var Ra=null!=ta&&null!=ta.hydrationOptions&&ta.hydrationOptions.mutableSources||null;ta=new Ti(Y,ha,null!=ta&&!0===ta.hydrate);ha=Lg(3,null,null,2===ha?7:1===ha?3:0);ta.current=ha;ha.stateNode=ta;Tc(ha);Y[di]=ta.current;dd(8===Y.nodeType?Y.parentNode:Y);if(Ra)for(Y=0;Y<Ra.length;Y++){ha=Ra[Y];var mb=ha._getVersion;mb=mb(ha._source);null==ta.mutableSourceEagerHydrationData?ta.mutableSourceEagerHydrationData=
[ha,mb]:ta.mutableSourceEagerHydrationData.push(ha,mb)}this._internalRoot=ta}function va(Y){return!(!Y||1!==Y.nodeType&&9!==Y.nodeType&&11!==Y.nodeType&&(8!==Y.nodeType||" react-mount-point-unstable "!==Y.nodeValue))}function Ca(Y,ha){ha||(ha=Y?9===Y.nodeType?Y.documentElement:Y.firstChild:null,ha=!(!ha||1!==ha.nodeType||!ha.hasAttribute("data-reactroot")));if(!ha)for(var ta;ta=Y.lastChild;)Y.removeChild(ta);return new da(Y,0,ha?{hydrate:!0}:void 0)}function Qa(Y,ha,ta,Ra,mb){var Kb=ta._reactRootContainer;
if(Kb){var cc=Kb._internalRoot;if("function"===typeof mb){var zc=mb;mb=function(){var Jd=kb(cc);zc.call(Jd)}}gi(ha,cc,Y,mb)}else{Kb=ta._reactRootContainer=Ca(ta,Ra);cc=Kb._internalRoot;if("function"===typeof mb){var ad=mb;mb=function(){var Jd=kb(cc);ad.call(Jd)}}Tf(function(){gi(ha,cc,Y,mb)})}return kb(cc)}function lb(Y,ha){var ta=2<arguments.length&&void 0!==arguments[2]?arguments[2]:null;if(!va(ha))throw Error(b(200));return xi(Y,ha,null,ta)}var Lb=Df(3),Rb=Df(0),dc=Df(17);if(!Lb)throw Error(b(227));
var Ic=new Set,Gc={},Xc=!("undefined"===typeof window||"undefined"===typeof window.document||"undefined"===typeof window.document.createElement),$c=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,Wc=
Object.prototype.hasOwnProperty,wd={},Qd={},yd={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(Y){yd[Y]=new m(Y,0,!1,Y,null,!1,!1)});[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(Y){var ha=Y[0];yd[ha]=new m(ha,1,!1,Y[1],null,!1,!1)});["contentEditable","draggable","spellCheck","value"].forEach(function(Y){yd[Y]=
new m(Y,2,!1,Y.toLowerCase(),null,!1,!1)});["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(Y){yd[Y]=new m(Y,2,!1,Y,null,!1,!1)});"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(Y){yd[Y]=new m(Y,3,!1,Y.toLowerCase(),null,!1,!1)});["checked","multiple",
"muted","selected"].forEach(function(Y){yd[Y]=new m(Y,3,!0,Y,null,!1,!1)});["capture","download"].forEach(function(Y){yd[Y]=new m(Y,4,!1,Y,null,!1,!1)});["cols","rows","size","span"].forEach(function(Y){yd[Y]=new m(Y,6,!1,Y,null,!1,!1)});["rowSpan","start"].forEach(function(Y){yd[Y]=new m(Y,5,!1,Y.toLowerCase(),null,!1,!1)});var ge=/[\-:]([a-z])/g;"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(Y){var ha=
Y.replace(ge,a);yd[ha]=new m(ha,1,!1,Y,null,!1,!1)});"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(Y){var ha=Y.replace(ge,a);yd[ha]=new m(ha,1,!1,Y,"http://www.w3.org/1999/xlink",!1,!1)});["xml:base","xml:lang","xml:space"].forEach(function(Y){var ha=Y.replace(ge,a);yd[ha]=new m(ha,1,!1,Y,"http://www.w3.org/XML/1998/namespace",!1,!1)});["tabIndex","crossOrigin"].forEach(function(Y){yd[Y]=new m(Y,1,!1,Y.toLowerCase(),null,!1,!1)});yd.xlinkHref=
new m("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1);["src","href","action","formAction"].forEach(function(Y){yd[Y]=new m(Y,1,!1,Y.toLowerCase(),null,!0,!0)});var be=Lb.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,ke=60103,re=60106,ne=60107,Le=60108,we=60114,kf=60109,Ne=60110,xf=60112,wf=60113,lg=60120,Cf=60115,Dg=60116,ef=60121,hg=60128,ca=60129,ua=60130,Ba=60131;if("function"===typeof Symbol&&Symbol.for){var Da=Symbol.for;ke=Da("react.element");re=Da("react.portal");ne=
Da("react.fragment");Le=Da("react.strict_mode");we=Da("react.profiler");kf=Da("react.provider");Ne=Da("react.context");xf=Da("react.forward_ref");wf=Da("react.suspense");lg=Da("react.suspense_list");Cf=Da("react.memo");Dg=Da("react.lazy");ef=Da("react.block");Da("react.scope");hg=Da("react.opaque.id");ca=Da("react.debug_trace_mode");ua=Da("react.offscreen");Ba=Da("react.legacy_hidden")}var Ma="function"===typeof Symbol&&Symbol.iterator,Ua,nb=!1,eb={html:"http://www.w3.org/1999/xhtml",mathml:"http://www.w3.org/1998/Math/MathML",
svg:"http://www.w3.org/2000/svg"},db,wb=function(Y){return"undefined"!==typeof MSApp&&MSApp.execUnsafeLocalFunction?function(ha,ta,Ra,mb){MSApp.execUnsafeLocalFunction(function(){return Y(ha,ta,Ra,mb)})}:Y}(function(Y,ha){if(Y.namespaceURI!==eb.svg||"innerHTML"in Y)Y.innerHTML=ha;else{db=db||document.createElement("div");db.innerHTML="\x3csvg\x3e"+ha.valueOf().toString()+"\x3c/svg\x3e";for(ha=db.firstChild;Y.firstChild;)Y.removeChild(Y.firstChild);for(;ha.firstChild;)Y.appendChild(ha.firstChild)}}),
Eb={animationIterationCount:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,
floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},Tb=["Webkit","ms","Moz","O"];Object.keys(Eb).forEach(function(Y){Tb.forEach(function(ha){ha=ha+Y.charAt(0).toUpperCase()+Y.substring(1);Eb[ha]=Eb[Y]})});var mc=Rb({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0}),ic=null,Ac=null,Kc=null,Lc=ja,Qc=!1,od=!1,sd=!1;if(Xc)try{var qd={};Object.defineProperty(qd,
"passive",{get:function(){sd=!0}});window.addEventListener("test",qd,qd);window.removeEventListener("test",qd,qd)}catch(Y){sd=!1}var Id=!1,zd=null,ee=!1,le=null,je={onError:function(Y){Id=!0;zd=Y}},Gf=!1,me=[],Od=null,sf=null,Vf=null,Bf=new Map,Of=new Map,Nf=[],Uf="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" "),
gg={animationend:La("Animation","AnimationEnd"),animationiteration:La("Animation","AnimationIteration"),animationstart:La("Animation","AnimationStart"),transitionend:La("Transition","TransitionEnd")},wg={},Fg={};Xc&&(Fg=document.createElement("div").style,"AnimationEvent"in window||(delete gg.animationend.animation,delete gg.animationiteration.animation,delete gg.animationstart.animation),"TransitionEvent"in window||delete gg.transitionend.transition);var Wh=Ka("animationend"),pi=Ka("animationiteration"),
Ui=Ka("animationstart"),xj=Ka("transitionend"),Fi=new Map,rg=new Map,xg=["abort","abort",Wh,"animationEnd",pi,"animationIteration",Ui,"animationStart","canplay","canPlay","canplaythrough","canPlayThrough","durationchange","durationChange","emptied","emptied","encrypted","encrypted","ended","ended","error","error","gotpointercapture","gotPointerCapture","load","load","loadeddata","loadedData","loadedmetadata","loadedMetadata","loadstart","loadStart","lostpointercapture","lostPointerCapture","playing",
"playing","progress","progress","seeking","seeking","stalled","stalled","suspend","suspend","timeupdate","timeUpdate",xj,"transitionEnd","waiting","waiting"],Mh=dc.unstable_now;Mh();var yg=8,dh=Math.clz32?Math.clz32:Cb,ii=Math.log,Vi=Math.LN2,Jg=dc.unstable_UserBlockingPriority,Gi=dc.unstable_runWithPriority,qi=!0,Yh=null,Ji=null,ti=null,ji={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(Y){return Y.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},Ki=$b(ji),ki=Rb({},ji,{view:0,detail:0}),
dl=$b(ki),Ck,Dk,Uj,ik=Rb({},ki,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:fd,button:0,buttons:0,relatedTarget:function(Y){return void 0===Y.relatedTarget?Y.fromElement===Y.srcElement?Y.toElement:Y.fromElement:Y.relatedTarget},movementX:function(Y){if("movementX"in Y)return Y.movementX;Y!==Uj&&(Uj&&"mousemove"===Y.type?(Ck=Y.screenX-Uj.screenX,Dk=Y.screenY-Uj.screenY):Dk=Ck=0,Uj=Y);return Ck},movementY:function(Y){return"movementY"in
Y?Y.movementY:Dk}}),Tk=$b(ik),nj=Rb({},ik,{dataTransfer:0}),oj=$b(nj),yj=Rb({},ki,{relatedTarget:0}),jj=$b(yj),zj=Rb({},ji,{animationName:0,elapsedTime:0,pseudoElement:0}),kj=$b(zj),Qj=Rb({},ji,{clipboardData:function(Y){return"clipboardData"in Y?Y.clipboardData:window.clipboardData}}),cl=$b(Qj),Qk=Rb({},ji,{data:0}),yk=$b(Qk),el={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",
MozPrintableKey:"Unidentified"},fl={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},hl={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"},
Yi=Rb({},ki,{key:function(Y){if(Y.key){var ha=el[Y.key]||Y.key;if("Unidentified"!==ha)return ha}return"keypress"===Y.type?(Y=ib(Y),13===Y?"Enter":String.fromCharCode(Y)):"keydown"===Y.type||"keyup"===Y.type?fl[Y.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:fd,charCode:function(Y){return"keypress"===Y.type?ib(Y):0},keyCode:function(Y){return"keydown"===Y.type||"keyup"===Y.type?Y.keyCode:0},which:function(Y){return"keypress"===
Y.type?ib(Y):"keydown"===Y.type||"keyup"===Y.type?Y.keyCode:0}}),Rk=$b(Yi),hk=Rb({},ik,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),Aj=$b(hk),Ek=Rb({},ki,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:fd}),Fk=$b(Ek),Je=Rb({},ji,{propertyName:0,elapsedTime:0,pseudoElement:0}),Gk=$b(Je),Eh=Rb({},ik,{deltaX:function(Y){return"deltaX"in Y?Y.deltaX:"wheelDeltaX"in Y?-Y.wheelDeltaX:
0},deltaY:function(Y){return"deltaY"in Y?Y.deltaY:"wheelDeltaY"in Y?-Y.wheelDeltaY:"wheelDelta"in Y?-Y.wheelDelta:0},deltaZ:0,deltaMode:0}),Zi=$b(Eh),Uk=[9,13,27,32],Rj=Xc&&"CompositionEvent"in window,Dj=null;Xc&&"documentMode"in document&&(Dj=document.documentMode);var bi=Xc&&"TextEvent"in window&&!Dj,Ag=Xc&&(!Rj||Dj&&8<Dj&&11>=Dj),pj=String.fromCharCode(32),Ej=!1,Zh=!1,Hk={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,
time:!0,url:!0,week:!0},ej=null,Li=null,Oh=!1;if(Xc){if(Xc){var mj="oninput"in document;if(!mj){var Ze=document.createElement("div");Ze.setAttribute("oninput","return;");mj="function"===typeof Ze.oninput}var pf=mj}else pf=!1;Oh=pf&&(!document.documentMode||9<document.documentMode)}var Ph="function"===typeof Object.is?Object.is:Ub,Fj=Object.prototype.hasOwnProperty,Vj=Xc&&"documentMode"in document&&11>=document.documentMode,gh=null,li=null,Sj=null,Gj=!1;ya("cancel cancel click click close close contextmenu contextMenu copy copy cut cut auxclick auxClick dblclick doubleClick dragend dragEnd dragstart dragStart drop drop focusin focus focusout blur input input invalid invalid keydown keyDown keypress keyPress keyup keyUp mousedown mouseDown mouseup mouseUp paste paste pause pause play play pointercancel pointerCancel pointerdown pointerDown pointerup pointerUp ratechange rateChange reset reset seeked seeked submit submit touchcancel touchCancel touchend touchEnd touchstart touchStart volumechange volumeChange".split(" "),
0);ya("drag drag dragenter dragEnter dragexit dragExit dragleave dragLeave dragover dragOver mousemove mouseMove mouseout mouseOut mouseover mouseOver pointermove pointerMove pointerout pointerOut pointerover pointerOver scroll scroll toggle toggle touchmove touchMove wheel wheel".split(" "),1);ya(xg,2);for(var sg="change selectionchange textInput compositionstart compositionend compositionupdate".split(" "),qj=0;qj<sg.length;qj++)rg.set(sg[qj],0);G("onMouseEnter",["mouseout","mouseover"]);G("onMouseLeave",
["mouseout","mouseover"]);G("onPointerEnter",["pointerout","pointerover"]);G("onPointerLeave",["pointerout","pointerover"]);N("onChange","change click focusin focusout input keydown keyup selectionchange".split(" "));N("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" "));N("onBeforeInput",["compositionend","keypress","textInput","paste"]);N("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" "));N("onCompositionStart",
"compositionstart focusout keydown keypress keyup mousedown".split(" "));N("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var rj="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),jk=new Set("cancel close invalid load scroll toggle".split(" ").concat(rj)),kk="_reactListening"+Math.random().toString(36).slice(2),
Ai=null,Wj=null,lk="function"===typeof setTimeout?setTimeout:void 0,Ik="function"===typeof clearTimeout?clearTimeout:void 0,Xj=0,sj=Math.random().toString(36).slice(2),Ci="__reactFiber$"+sj,Hj="__reactProps$"+sj,di="__reactContainer$"+sj,mk="__reactEvents$"+sj,Yj=[],Ii=-1,Di={},nh=Be(Di),oh=Be(!1),Mi=Di,Bj=null,Hi=null,Vk=dc.unstable_runWithPriority,Zj=dc.unstable_scheduleCallback,nk=dc.unstable_cancelCallback,Wk=dc.unstable_shouldYield,Jk=dc.unstable_requestPaint,ok=dc.unstable_now,Xk=dc.unstable_getCurrentPriorityLevel,
ak=dc.unstable_ImmediatePriority,Kk=dc.unstable_UserBlockingPriority,Lk=dc.unstable_NormalPriority,Mk=dc.unstable_LowPriority,Vg=dc.unstable_IdlePriority,pk={},Yk=void 0!==Jk?Jk:function(){},Ni=null,$i=null,Oi=!1,Sk=ok(),Rg=1E4>Sk?ok:function(){return ok()-Sk},il=be.ReactCurrentBatchConfig,tj=Be(null),Ij=null,fj=null,uj=null,Pi=!1,Zk=(new Lb.Component).refs,qk={isMounted:function(Y){return(Y=Y._reactInternals)?oa(Y)===Y:!1},enqueueSetState:function(Y,ha,ta){Y=Y._reactInternals;var Ra=Vd(),mb=Yd(Y),
Kb=wc(Ra,mb);Kb.payload=ha;void 0!==ta&&null!==ta&&(Kb.callback=ta);rc(Y,Kb);df(Y,mb,Ra)},enqueueReplaceState:function(Y,ha,ta){Y=Y._reactInternals;var Ra=Vd(),mb=Yd(Y),Kb=wc(Ra,mb);Kb.tag=1;Kb.payload=ha;void 0!==ta&&null!==ta&&(Kb.callback=ta);rc(Y,Kb);df(Y,mb,Ra)},enqueueForceUpdate:function(Y,ha){Y=Y._reactInternals;var ta=Vd(),Ra=Yd(Y),mb=wc(ta,Ra);mb.tag=2;void 0!==ha&&null!==ha&&(mb.callback=ha);rc(Y,mb);df(Y,Ra,ta)}},Qi=Array.isArray,ui=Mf(!0),$h=Mf(!1),Zg={},Wg=Be(Zg),xh=Be(Zg),Gh=Be(Zg),
zg=Be(0),$g=null,Ei=null,mi=!1,eh=[],bk=be.ReactCurrentDispatcher,ei=be.ReactCurrentBatchConfig,ri=0,ag=null,Hh=null,yh=null,rk=!1,ck=!1,dk={readContext:bd,useCallback:bg,useContext:bg,useEffect:bg,useImperativeHandle:bg,useLayoutEffect:bg,useMemo:bg,useReducer:bg,useRef:bg,useState:bg,useDebugValue:bg,useDeferredValue:bg,useTransition:bg,useMutableSource:bg,useOpaqueIdentifier:bg,unstable_isNewReconciler:!1},vi={readContext:bd,useCallback:function(Y,ha){ug().memoizedState=[Y,void 0===ha?null:ha];
return Y},useContext:bd,useEffect:Lh,useImperativeHandle:function(Y,ha,ta){ta=null!==ta&&void 0!==ta?ta.concat([Y]):null;return Gg(4,2,Fa.bind(null,ha,Y),ta)},useLayoutEffect:function(Y,ha){return Gg(4,2,Y,ha)},useMemo:function(Y,ha){var ta=ug();ha=void 0===ha?null:ha;Y=Y();ta.memoizedState=[Y,ha];return Y},useReducer:function(Y,ha,ta){var Ra=ug();ha=void 0!==ta?ta(ha):ha;Ra.memoizedState=Ra.baseState=ha;Y=Ra.queue={pending:null,dispatch:null,lastRenderedReducer:Y,lastRenderedState:ha};Y=Y.dispatch=
Xb.bind(null,ag,Y);return[Ra.memoizedState,Y]},useRef:uh,useState:Bg,useDebugValue:Sa,useDeferredValue:function(Y){var ha=Bg(Y),ta=ha[0],Ra=ha[1];Lh(function(){var mb=ei.transition;ei.transition=1;try{Ra(Y)}finally{ei.transition=mb}},[Y]);return ta},useTransition:function(){var Y=Bg(!1),ha=Y[0];Y=Bb.bind(null,Y[1]);uh(Y);return[Y,ha]},useMutableSource:function(Y,ha,ta){var Ra=ug();Ra.memoizedState={refs:{getSnapshot:ha,setSnapshot:null},source:Y,subscribe:ta};return kh(Ra,Y,ha,ta)},useOpaqueIdentifier:function(){if(mi){var Y=
!1,ha=Rf(function(){Y||(Y=!0,ta("r:"+(Xj++).toString(36)));throw Error(b(355));}),ta=Bg(ha)[1];0===(ag.mode&2)&&(ag.flags|=516,th(5,function(){ta("r:"+(Xj++).toString(36))},void 0,null));return ha}ha="r:"+(Xj++).toString(36);Bg(ha);return ha},unstable_isNewReconciler:!1},jl={readContext:bd,useCallback:cb,useContext:bd,useEffect:vh,useImperativeHandle:Oa,useLayoutEffect:Ga,useMemo:jb,useReducer:jh,useRef:Bh,useState:function(){return jh(Ig)},useDebugValue:Sa,useDeferredValue:function(Y){var ha=jh(Ig),
ta=ha[0],Ra=ha[1];vh(function(){var mb=ei.transition;ei.transition=1;try{Ra(Y)}finally{ei.transition=mb}},[Y]);return ta},useTransition:function(){var Y=jh(Ig)[0];return[Bh().current,Y]},useMutableSource:pg,useOpaqueIdentifier:function(){return jh(Ig)[0]},unstable_isNewReconciler:!1},kl={readContext:bd,useCallback:cb,useContext:bd,useEffect:vh,useImperativeHandle:Oa,useLayoutEffect:Ga,useMemo:jb,useReducer:Ug,useRef:Bh,useState:function(){return Ug(Ig)},useDebugValue:Sa,useDeferredValue:function(Y){var ha=
Ug(Ig),ta=ha[0],Ra=ha[1];vh(function(){var mb=ei.transition;ei.transition=1;try{Ra(Y)}finally{ei.transition=mb}},[Y]);return ta},useTransition:function(){var Y=Ug(Ig)[0];return[Bh().current,Y]},useMutableSource:pg,useOpaqueIdentifier:function(){return Ug(Ig)[0]},unstable_isNewReconciler:!1},ll=be.ReactCurrentOwner,ni=!1,Tj={dehydrated:null,retryLane:0};var Jj=function(Y,ha){for(var ta=ha.child;null!==ta;){if(5===ta.tag||6===ta.tag)Y.appendChild(ta.stateNode);else if(4!==ta.tag&&null!==ta.child){ta.child.return=
ta;ta=ta.child;continue}if(ta===ha)break;for(;null===ta.sibling;){if(null===ta.return||ta.return===ha)return;ta=ta.return}ta.sibling.return=ta.return;ta=ta.sibling}};var $k=function(){};var zk=function(Y,ha,ta,Ra){var mb=Y.memoizedProps;if(mb!==Ra){Y=ha.stateNode;ng(Wg.current);var Kb=null;switch(ta){case "input":mb=z(Y,mb);Ra=z(Y,Ra);Kb=[];break;case "option":mb=F(Y,mb);Ra=F(Y,Ra);Kb=[];break;case "select":mb=Rb({},mb,{value:void 0});Ra=Rb({},Ra,{value:void 0});Kb=[];break;case "textarea":mb=K(Y,
mb);Ra=K(Y,Ra);Kb=[];break;default:"function"!==typeof mb.onClick&&"function"===typeof Ra.onClick&&(Y.onclick=Ke)}V(ta,Ra);var cc;ta=null;for(Jd in mb)if(!Ra.hasOwnProperty(Jd)&&mb.hasOwnProperty(Jd)&&null!=mb[Jd])if("style"===Jd){var zc=mb[Jd];for(cc in zc)zc.hasOwnProperty(cc)&&(ta||(ta={}),ta[cc]="")}else"dangerouslySetInnerHTML"!==Jd&&"children"!==Jd&&"suppressContentEditableWarning"!==Jd&&"suppressHydrationWarning"!==Jd&&"autoFocus"!==Jd&&(Gc.hasOwnProperty(Jd)?Kb||(Kb=[]):(Kb=Kb||[]).push(Jd,
null));for(Jd in Ra){var ad=Ra[Jd];zc=null!=mb?mb[Jd]:void 0;if(Ra.hasOwnProperty(Jd)&&ad!==zc&&(null!=ad||null!=zc))if("style"===Jd)if(zc){for(cc in zc)!zc.hasOwnProperty(cc)||ad&&ad.hasOwnProperty(cc)||(ta||(ta={}),ta[cc]="");for(cc in ad)ad.hasOwnProperty(cc)&&zc[cc]!==ad[cc]&&(ta||(ta={}),ta[cc]=ad[cc])}else ta||(Kb||(Kb=[]),Kb.push(Jd,ta)),ta=ad;else"dangerouslySetInnerHTML"===Jd?(ad=ad?ad.__html:void 0,zc=zc?zc.__html:void 0,null!=ad&&zc!==ad&&(Kb=Kb||[]).push(Jd,ad)):"children"===Jd?"string"!==
typeof ad&&"number"!==typeof ad||(Kb=Kb||[]).push(Jd,""+ad):"suppressContentEditableWarning"!==Jd&&"suppressHydrationWarning"!==Jd&&(Gc.hasOwnProperty(Jd)?(null!=ad&&"onScroll"===Jd&&Cc("scroll",Y),Kb||zc===ad||(Kb=[])):"object"===typeof ad&&null!==ad&&ad.$$typeof===hg?ad.toString():(Kb=Kb||[]).push(Jd,ad))}ta&&(Kb=Kb||[]).push("style",ta);var Jd;if(ha.updateQueue=Kb)ha.flags|=4}};var wi=function(Y,ha,ta,Ra){ta!==Ra&&(ha.flags|=4)};var ml="function"===typeof WeakMap?WeakMap:Map,nl="function"===typeof WeakSet?
WeakSet:Set,al=Math.ceil,sk=be.ReactCurrentDispatcher,Nk=be.ReactCurrentOwner,Pf=0,tg=null,hh=null,zh=0,gj=0,Ok=Be(0),ih=0,tk=null,Kj=0,Lj=0,Mj=0,vj=0,Nj=null,uk=0,vk=Infinity,Qe=null,hj=!1,wj=null,Ng=null,fi=!1,Qg=null,aj=90,Ak=[],bj=[],Ri=null,dj=0,cj=null,Cj=-1,ci=0,si=0,ek=null,wk=!1;var Oj=function(Y,ha,ta){var Ra=ha.lanes;if(null!==Y)if(Y.memoizedProps!==ha.pendingProps||oh.current)ni=!0;else if(0!==(ta&Ra))ni=0!==(Y.flags&16384)?!0:!1;else{ni=!1;switch(ha.tag){case 3:We(ha);Ei=$g=null;mi=!1;
break;case 5:Ah(ha);break;case 1:Bd(ha.type)&&Fd(ha);break;case 4:Sg(ha,ha.stateNode.containerInfo);break;case 10:Ra=ha.memoizedProps.value;var mb=ha.type._context;nf(tj,mb._currentValue);mb._currentValue=Ra;break;case 13:if(null!==ha.memoizedState){if(0!==(ta&ha.child.childLanes))return fg(Y,ha,ta);nf(zg,zg.current&1);ha=vg(Y,ha,ta);return null!==ha?ha.sibling:null}nf(zg,zg.current&1);break;case 19:Ra=0!==(ta&ha.childLanes);if(0!==(Y.flags&64)){if(Ra)return Mg(Y,ha,ta);ha.flags|=64}mb=ha.memoizedState;
null!==mb&&(mb.rendering=null,mb.tail=null,mb.lastEffect=null);nf(zg,zg.current);if(Ra)break;else return null;case 23:case 24:return ha.lanes=0,Ec(Y,ha,ta)}return vg(Y,ha,ta)}else ni=!1;ha.lanes=0;switch(ha.tag){case 2:Ra=ha.type;null!==Y&&(Y.alternate=null,ha.alternate=null,ha.flags|=2);Y=ha.pendingProps;mb=Zc(ha,nh.current);Yc(ha,ta);mb=qg(null,ha,Ra,Y,mb,ta);ha.flags|=1;if("object"===typeof mb&&null!==mb&&"function"===typeof mb.render&&void 0===mb.$$typeof){ha.tag=1;ha.memoizedState=null;ha.updateQueue=
null;if(Bd(Ra)){var Kb=!0;Fd(ha)}else Kb=!1;ha.memoizedState=null!==mb.state&&void 0!==mb.state?mb.state:null;Tc(ha);var cc=Ra.getDerivedStateFromProps;"function"===typeof cc&&Wd(ha,Ra,cc,Y);mb.updater=qk;ha.stateNode=mb;mb._reactInternals=ha;Ve(ha,Ra,Y,ta);ha=ze(null,ha,Ra,!0,Kb,ta)}else ha.tag=0,Ib(null,ha,mb,ta),ha=ha.child;return ha;case 16:mb=ha.elementType;a:{null!==Y&&(Y.alternate=null,ha.alternate=null,ha.flags|=2);Y=ha.pendingProps;Kb=mb._init;mb=Kb(mb._payload);ha.type=mb;Kb=ha.tag=ai(mb);
Y=oc(mb,Y);switch(Kb){case 0:ha=Dd(null,ha,mb,Y,ta);break a;case 1:ha=ye(null,ha,mb,Y,ta);break a;case 11:ha=gc(null,ha,mb,Y,ta);break a;case 14:ha=hc(null,ha,mb,oc(mb.type,Y),Ra,ta);break a}throw Error(b(306,mb,""));}return ha;case 0:return Ra=ha.type,mb=ha.pendingProps,mb=ha.elementType===Ra?mb:oc(Ra,mb),Dd(Y,ha,Ra,mb,ta);case 1:return Ra=ha.type,mb=ha.pendingProps,mb=ha.elementType===Ra?mb:oc(Ra,mb),ye(Y,ha,Ra,mb,ta);case 3:We(ha);Ra=ha.updateQueue;if(null===Y||null===Ra)throw Error(b(282));Ra=
ha.pendingProps;mb=ha.memoizedState;mb=null!==mb?mb.element:null;Oc(Y,ha);ud(ha,Ra,null,ta);Ra=ha.memoizedState.element;if(Ra===mb)Ei=$g=null,mi=!1,ha=vg(Y,ha,ta);else{mb=ha.stateNode;if(Kb=mb.hydrate)Ei=qf(ha.stateNode.containerInfo.firstChild),$g=ha,Kb=mi=!0;if(Kb){Y=mb.mutableSourceEagerHydrationData;if(null!=Y)for(mb=0;mb<Y.length;mb+=2)Kb=Y[mb],Kb._workInProgressVersionPrimary=Y[mb+1],eh.push(Kb);ta=$h(ha,null,Ra,ta);for(ha.child=ta;ta;)ta.flags=ta.flags&-3|1024,ta=ta.sibling}else Ib(Y,ha,Ra,
ta),Ei=$g=null,mi=!1;ha=ha.child}return ha;case 5:return Ah(ha),null===Y&&ah(ha),Ra=ha.type,mb=ha.pendingProps,Kb=null!==Y?Y.memoizedProps:null,cc=mb.children,zf(Ra,mb)?cc=null:null!==Kb&&zf(Ra,Kb)&&(ha.flags|=16),ld(Y,ha),Ib(Y,ha,cc,ta),ha.child;case 6:return null===Y&&ah(ha),null;case 13:return fg(Y,ha,ta);case 4:return Sg(ha,ha.stateNode.containerInfo),Ra=ha.pendingProps,null===Y?ha.child=ui(ha,null,Ra,ta):Ib(Y,ha,Ra,ta),ha.child;case 11:return Ra=ha.type,mb=ha.pendingProps,mb=ha.elementType===
Ra?mb:oc(Ra,mb),gc(Y,ha,Ra,mb,ta);case 7:return Ib(Y,ha,ha.pendingProps,ta),ha.child;case 8:return Ib(Y,ha,ha.pendingProps.children,ta),ha.child;case 12:return Ib(Y,ha,ha.pendingProps.children,ta),ha.child;case 10:a:{Ra=ha.type._context;mb=ha.pendingProps;cc=ha.memoizedProps;Kb=mb.value;var zc=ha.type._context;nf(tj,zc._currentValue);zc._currentValue=Kb;if(null!==cc)if(zc=cc.value,Kb=Ph(zc,Kb)?0:("function"===typeof Ra._calculateChangedBits?Ra._calculateChangedBits(zc,Kb):1073741823)|0,0===Kb){if(cc.children===
mb.children&&!oh.current){ha=vg(Y,ha,ta);break a}}else for(zc=ha.child,null!==zc&&(zc.return=ha);null!==zc;){var ad=zc.dependencies;if(null!==ad){cc=zc.child;for(var Jd=ad.firstContext;null!==Jd;){if(Jd.context===Ra&&0!==(Jd.observedBits&Kb)){1===zc.tag&&(Jd=wc(-1,ta&-ta),Jd.tag=2,rc(zc,Jd));zc.lanes|=ta;Jd=zc.alternate;null!==Jd&&(Jd.lanes|=ta);Bc(zc.return,ta);ad.lanes|=ta;break}Jd=Jd.next}}else cc=10===zc.tag?zc.type===ha.type?null:zc.child:zc.child;if(null!==cc)cc.return=zc;else for(cc=zc;null!==
cc;){if(cc===ha){cc=null;break}zc=cc.sibling;if(null!==zc){zc.return=cc.return;cc=zc;break}cc=cc.return}zc=cc}Ib(Y,ha,mb.children,ta);ha=ha.child}return ha;case 9:return mb=ha.type,Kb=ha.pendingProps,Ra=Kb.children,Yc(ha,ta),mb=bd(mb,Kb.unstable_observedBits),Ra=Ra(mb),ha.flags|=1,Ib(Y,ha,Ra,ta),ha.child;case 14:return mb=ha.type,Kb=oc(mb,ha.pendingProps),Kb=oc(mb.type,Kb),hc(Y,ha,mb,Kb,Ra,ta);case 15:return qc(Y,ha,ha.type,ha.pendingProps,Ra,ta);case 17:return Ra=ha.type,mb=ha.pendingProps,mb=ha.elementType===
Ra?mb:oc(Ra,mb),null!==Y&&(Y.alternate=null,ha.alternate=null,ha.flags|=2),ha.tag=1,Bd(Ra)?(Y=!0,Fd(ha)):Y=!1,Yc(ha,ta),Xd(ha,Ra,mb),Ve(ha,Ra,mb,ta),ze(null,ha,Ra,!0,Y,ta);case 19:return Mg(Y,ha,ta);case 23:return Ec(Y,ha,ta);case 24:return Ec(Y,ha,ta)}throw Error(b(156,ha.tag));};da.prototype.render=function(Y){gi(Y,this._internalRoot,null,null)};da.prototype.unmount=function(){var Y=this._internalRoot,ha=Y.containerInfo;gi(null,Y,null,function(){ha[di]=null})};var fk=function(Y){if(13===Y.tag){var ha=
Vd();df(Y,4,ha);X(Y,4)}};var ig=function(Y){if(13===Y.tag){var ha=Vd();df(Y,67108864,ha);X(Y,67108864)}};var ol=function(Y){if(13===Y.tag){var ha=Vd(),ta=Yd(Y);df(Y,ta,ha);X(Y,ta)}};var Pk=function(Y,ha){return ha()};ic=function(Y,ha,ta){switch(ha){case "input":D(Y,ta);ha=ta.name;if("radio"===ta.type&&null!=ha){for(ta=Y;ta.parentNode;)ta=ta.parentNode;ta=ta.querySelectorAll("input[name\x3d"+JSON.stringify(""+ha)+'][type\x3d"radio"]');for(ha=0;ha<ta.length;ha++){var Ra=ta[ha];if(Ra!==Y&&Ra.form===
Y.form){var mb=hf(Ra);if(!mb)throw Error(b(90));w(Ra);D(Ra,mb)}}}break;case "textarea":H(Y,ta);break;case "select":ha=ta.value,null!=ha&&J(Y,!!ta.multiple,ha,!1)}};ja=Zf;ma=function(Y,ha,ta,Ra,mb){var Kb=Pf;Pf|=4;try{return qe(98,Y.bind(null,ha,ta,Ra,mb))}finally{Pf=Kb,0===Pf&&($d(),oe())}};ia=function(){0===(Pf&49)&&(yf(),Ch())};Lc=function(Y,ha){var ta=Pf;Pf|=2;try{return Y(ha)}finally{Pf=ta,0===Pf&&($d(),oe())}};var Pj={Events:[Ae,rf,hf,W,aa,Ch,{current:!1}]},gk={findFiberByHostInstance:Ud,bundleType:0,
version:"17.0.2",rendererPackageName:"react-dom"},pl={bundleType:gk.bundleType,version:gk.version,rendererPackageName:gk.rendererPackageName,rendererConfig:gk.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:be.ReactCurrentDispatcher,findHostInstanceByFiber:function(Y){Y=Wa(Y);return null===Y?null:Y.stateNode},
findFiberByHostInstance:gk.findFiberByHostInstance||U,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null};if("undefined"!==typeof __REACT_DEVTOOLS_GLOBAL_HOOK__){var xk=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!xk.isDisabled&&xk.supportsFiber)try{Bj=xk.inject(pl),Hi=xk}catch(Y){}}Nd.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=Pj;Nd.createPortal=lb;Nd.findDOMNode=function(Y){if(null==Y)return null;if(1===Y.nodeType)return Y;var ha=Y._reactInternals;
if(void 0===ha){if("function"===typeof Y.render)throw Error(b(188));throw Error(b(268,Object.keys(Y)));}Y=Wa(ha);return Y=null===Y?null:Y.stateNode};Nd.flushSync=function(Y,ha){var ta=Pf;if(0!==(ta&48))return Y(ha);Pf|=1;try{if(Y)return qe(99,Y.bind(null,ha))}finally{Pf=ta,oe()}};Nd.hydrate=function(Y,ha,ta){if(!va(ha))throw Error(b(200));return Qa(null,Y,ha,!0,ta)};Nd.render=function(Y,ha,ta){if(!va(ha))throw Error(b(200));return Qa(null,Y,ha,!1,ta)};Nd.unmountComponentAtNode=function(Y){if(!va(Y))throw Error(b(40));
return Y._reactRootContainer?(Tf(function(){Qa(null,null,Y,!1,function(){Y._reactRootContainer=null;Y[di]=null})}),!0):!1};Nd.unstable_batchedUpdates=Zf;Nd.unstable_createPortal=function(Y,ha){return lb(Y,ha,2<arguments.length&&void 0!==arguments[2]?arguments[2]:null)};Nd.unstable_renderSubtreeIntoContainer=function(Y,ha,ta,Ra){if(!va(ta))throw Error(b(200));if(null==Y||void 0===Y._reactInternals)throw Error(b(38));return Qa(Y,ha,ta,!1,Ra)};Nd.version="17.0.2"};
shadow$provide[23]=function(xe,Df,jg,Nd){function b(){if("undefined"!==typeof __REACT_DEVTOOLS_GLOBAL_HOOK__&&"function"===typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE)try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(b)}catch(N){console.error(N)}}b();jg.exports=Df(18)};
/*

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/
'use strict';var g,aa=aa||{},ba=this||self;function t(a){var b=typeof a;return"object"!=b?b:a?Array.isArray(a)?"array":b:"null"}function ca(a){return Object.prototype.hasOwnProperty.call(a,da)&&a[da]||(a[da]=++ea)}var da="closure_uid_"+(1E9*Math.random()>>>0),ea=0;function ha(a,b){return new fa(a,b)}function na(a){return 0<a?0x7fffffffffffffff<=a?pa:new fa(a,a/4294967296):0>a?-9223372036854775808>=a?ia:(new fa(-a,-a/4294967296)).negate():ma}
function qa(a,b){if("-"==a.charAt(0))return qa(a.substring(1),b).negate();var c=parseInt(a,b||10);if(9007199254740991>=c)return new fa(c%4294967296|0,c/4294967296|0);if(0==a.length)throw Error("number format error: empty string");if(0<=a.indexOf("-"))throw Error('number format error: interior "-" character: '+a);b=b||10;if(2>b||36<b)throw Error("radix out of range: "+b);c=na(Math.pow(b,8));for(var d=ma,e=0;e<a.length;e+=8){var f=Math.min(8,a.length-e),h=parseInt(a.substring(e,e+f),b);8>f?(f=na(Math.pow(b,
f)),d=d.multiply(f).add(na(h))):(d=d.multiply(c),d=d.add(na(h)))}return d}function oa(a,b){b&=63;if(0==b)return a;var c=a.V;return 32>b?ha(a.ba>>>b|c<<32-b,c>>>b):32==b?ha(c,0):ha(c>>>b-32,0)}
class fa{constructor(a,b){this.ba=a|0;this.V=b|0}toNumber(){return 4294967296*this.V+(this.ba>>>0)}isSafeInteger(){var a=this.V>>21;return 0==a||-1==a&&!(0==this.ba&&-2097152==this.V)}toString(a){a=a||10;if(2>a||36<a)throw Error("radix out of range: "+a);if(this.isSafeInteger()){var b=this.toNumber();return 10==a?""+b:b.toString(a)}b=14-(a>>2);var c=Math.pow(a,b),d=ha(c,c/4294967296);c=this.div(d);d=Math.abs(this.subtract(c.multiply(d)).toNumber());var e=10==a?""+d:d.toString(a);e.length<b&&(e="0000000000000".substr(e.length-
b)+e);d=c.toNumber();return(10==a?d:d.toString(a))+e}isZero(){return 0==this.ba&&0==this.V}isOdd(){return 1==(this.ba&1)}equals(a){return this.ba==a.ba&&this.V==a.V}compare(a){return this.V==a.V?this.ba==a.ba?0:this.ba>>>0>a.ba>>>0?1:-1:this.V>a.V?1:-1}negate(){var a=~this.ba+1|0;return ha(a,~this.V+!a|0)}add(a){var b=this.V>>>16,c=this.V&65535,d=this.ba>>>16,e=a.V>>>16,f=a.V&65535,h=a.ba>>>16;a=(this.ba&65535)+(a.ba&65535);h=(a>>>16)+(d+h);d=h>>>16;d+=c+f;b=(d>>>16)+(b+e)&65535;return ha((h&65535)<<
16|a&65535,b<<16|d&65535)}subtract(a){return this.add(a.negate())}multiply(a){if(this.isZero())return this;if(a.isZero())return a;var b=this.V>>>16,c=this.V&65535,d=this.ba>>>16,e=this.ba&65535,f=a.V>>>16,h=a.V&65535,k=a.ba>>>16;a=a.ba&65535;var l=e*a;var m=(l>>>16)+d*a;var n=m>>>16;m=(m&65535)+e*k;n+=m>>>16;n+=c*a;var p=n>>>16;n=(n&65535)+d*k;p+=n>>>16;n=(n&65535)+e*h;p=p+(n>>>16)+(b*a+c*k+d*h+e*f)&65535;return ha((m&65535)<<16|l&65535,p<<16|n&65535)}div(a){if(a.isZero())throw Error("division by zero");
if(0>this.V){if(this.equals(ia)){if(a.equals(ka)||a.equals(la))return ia;if(a.equals(ia))return ka;var b=1;if(0==b)b=this;else{var c=this.V;b=32>b?ha(this.ba>>>b|c<<32-b,c>>b):ha(c>>b-32,0<=c?0:-1)}b=b.div(a).shiftLeft(1);if(b.equals(ma))return 0>a.V?ka:la;c=this.subtract(a.multiply(b));return b.add(c.div(a))}return 0>a.V?this.negate().div(a.negate()):this.negate().div(a).negate()}if(this.isZero())return ma;if(0>a.V)return a.equals(ia)?ma:this.div(a.negate()).negate();var d=ma;for(c=this;0<=c.compare(a);){b=
Math.max(1,Math.floor(c.toNumber()/a.toNumber()));var e=Math.ceil(Math.log(b)/Math.LN2);e=48>=e?1:Math.pow(2,e-48);for(var f=na(b),h=f.multiply(a);0>h.V||0<h.compare(c);)b-=e,f=na(b),h=f.multiply(a);f.isZero()&&(f=ka);d=d.add(f);c=c.subtract(h)}return d}modulo(a){return this.subtract(this.div(a).multiply(a))}not(){return ha(~this.ba,~this.V)}and(a){return ha(this.ba&a.ba,this.V&a.V)}or(a){return ha(this.ba|a.ba,this.V|a.V)}xor(a){return ha(this.ba^a.ba,this.V^a.V)}shiftLeft(a){a&=63;if(0==a)return this;
var b=this.ba;return 32>a?ha(b<<a,this.V<<a|b>>>32-a):ha(0,b<<a-32)}}const ma=ha(0,0),ka=ha(1,0),la=ha(-1,-1),pa=ha(4294967295,2147483647),ia=ha(0,2147483648);var ra={};function sa(a,b){for(const c in a)b.call(void 0,a[c],c,a)}function ta(a){const b=[];let c=0;for(const d in a)b[c++]=d;return b}function ua(a,b,c){return null!==a&&b in a?a[b]:c}function va(a){const b={};for(const c in a)b[c]=a[c];return b}var wa="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");
function xa(a,b){let c,d;for(let e=1;e<arguments.length;e++){d=arguments[e];for(c in d)a[c]=d[c];for(let f=0;f<wa.length;f++)c=wa[f],Object.prototype.hasOwnProperty.call(d,c)&&(a[c]=d[c])}};function ya(a,b){null!=a&&this.append.apply(this,arguments)}g=ya.prototype;g.pb="";g.set=function(a){this.pb=""+a};g.append=function(a,b,c){this.pb+=String(a);if(null!=b)for(let d=1;d<arguments.length;d++)this.pb+=arguments[d];return this};g.clear=function(){this.pb=""};g.toString=function(){return this.pb};var za={},Aa={},Ca,u={},Da=null,Ea=!0,Fa=null;function Ga(){return new v(null,5,[Ha,!0,Ia,!0,Ja,!1,Ka,!1,La,null],null)}function Ma(){Ea=!1;Da=function(){var a=console.log,b=a.apply,c=console;var d=arguments;var e=d.length;if(0<e){for(var f=Array(e),h=0;h<e;h++)f[h]=d[h];d=f}else d=[];return b.call(a,c,d)}}function x(a){return null!=a&&!1!==a}function Na(a){return a instanceof Array}function Oa(a){return null==a?!0:!1===a?!0:!1}function y(a,b){return a[t(null==b?null:b)]?!0:a._?!0:!1}
function z(a,b){var c=null==b?null:b.constructor;c=x(x(c)?c.$b:c)?c.Ab:t(b);return Error(["No protocol method ",a," defined for type ",c,": ",b].join(""))}function Pa(a){var b=a.Ab;return x(b)?b:B.g(a)}var Qa="undefined"!==typeof Symbol&&"function"===t(Symbol)?Symbol.iterator:"@@iterator";function Ra(a){for(var b=a.length,c=Array(b),d=0;;)if(d<b)c[d]=a[d],d+=1;else break;return c}function Sa(a){function b(d,e){d.push(e);return d}var c=[];return Ta?Ta(b,c,a):Ua.call(null,b,c,a)}
function Va(a){return"symbol"===t(a)||"undefined"!==typeof Symbol&&a instanceof Symbol}function Wa(){}function Xa(){}function Ya(){}function Za(a){if(null!=a&&null!=a.Y)a=a.Y(a);else{var b=Za[t(null==a?null:a)];if(null!=b)a=b.g?b.g(a):b.call(null,a);else if(b=Za._,null!=b)a=b.g?b.g(a):b.call(null,a);else throw z("ICounted.-count",a);}return a}function $a(){}
function ab(a){if(null!=a&&null!=a.ha)a=a.ha(a);else{var b=ab[t(null==a?null:a)];if(null!=b)a=b.g?b.g(a):b.call(null,a);else if(b=ab._,null!=b)a=b.g?b.g(a):b.call(null,a);else throw z("IEmptyableCollection.-empty",a);}return a}function bb(){}function cb(a,b){if(null!=a&&null!=a.ia)a=a.ia(a,b);else{var c=cb[t(null==a?null:a)];if(null!=c)a=c.h?c.h(a,b):c.call(null,a,b);else if(c=cb._,null!=c)a=c.h?c.h(a,b):c.call(null,a,b);else throw z("ICollection.-conj",a);}return a}function db(){}
var eb=function(){function a(d,e,f){var h=D[t(null==d?null:d)];if(null!=h)return h.l?h.l(d,e,f):h.call(null,d,e,f);h=D._;if(null!=h)return h.l?h.l(d,e,f):h.call(null,d,e,f);throw z("IIndexed.-nth",d);}function b(d,e){var f=D[t(null==d?null:d)];if(null!=f)return f.h?f.h(d,e):f.call(null,d,e);f=D._;if(null!=f)return f.h?f.h(d,e):f.call(null,d,e);throw z("IIndexed.-nth",d);}var c=null;c=function(d,e,f){switch(arguments.length){case 2:return b.call(this,d,e);case 3:return a.call(this,d,e,f)}throw Error("Invalid arity: "+
arguments.length);};c.h=b;c.l=a;return c}(),D=function D(a){switch(arguments.length){case 2:return D.h(arguments[0],arguments[1]);case 3:return D.l(arguments[0],arguments[1],arguments[2]);default:throw Error(["Invalid arity: ",B.g(arguments.length)].join(""));}};D.h=function(a,b){return null!=a&&null!=a.N?a.N(a,b):eb(a,b)};D.l=function(a,b,c){return null!=a&&null!=a.ka?a.ka(a,b,c):eb(a,b,c)};D.S=3;function fb(){}
function F(a){if(null!=a&&null!=a.ta)a=a.ta(a);else{var b=F[t(null==a?null:a)];if(null!=b)a=b.g?b.g(a):b.call(null,a);else if(b=F._,null!=b)a=b.g?b.g(a):b.call(null,a);else throw z("ISeq.-first",a);}return a}function gb(a){if(null!=a&&null!=a.ua)a=a.ua(a);else{var b=gb[t(null==a?null:a)];if(null!=b)a=b.g?b.g(a):b.call(null,a);else if(b=gb._,null!=b)a=b.g?b.g(a):b.call(null,a);else throw z("ISeq.-rest",a);}return a}function hb(){}function ib(){}
var kb=function(){function a(d,e,f){var h=jb[t(null==d?null:d)];if(null!=h)return h.l?h.l(d,e,f):h.call(null,d,e,f);h=jb._;if(null!=h)return h.l?h.l(d,e,f):h.call(null,d,e,f);throw z("ILookup.-lookup",d);}function b(d,e){var f=jb[t(null==d?null:d)];if(null!=f)return f.h?f.h(d,e):f.call(null,d,e);f=jb._;if(null!=f)return f.h?f.h(d,e):f.call(null,d,e);throw z("ILookup.-lookup",d);}var c=null;c=function(d,e,f){switch(arguments.length){case 2:return b.call(this,d,e);case 3:return a.call(this,d,e,f)}throw Error("Invalid arity: "+
arguments.length);};c.h=b;c.l=a;return c}(),jb=function jb(a){switch(arguments.length){case 2:return jb.h(arguments[0],arguments[1]);case 3:return jb.l(arguments[0],arguments[1],arguments[2]);default:throw Error(["Invalid arity: ",B.g(arguments.length)].join(""));}};jb.h=function(a,b){return null!=a&&null!=a.na?a.na(a,b):kb(a,b)};jb.l=function(a,b,c){return null!=a&&null!=a.O?a.O(a,b,c):kb(a,b,c)};jb.S=3;function Db(){}
function ec(a,b){if(null!=a&&null!=a.Ra)a=a.Ra(a,b);else{var c=ec[t(null==a?null:a)];if(null!=c)a=c.h?c.h(a,b):c.call(null,a,b);else if(c=ec._,null!=c)a=c.h?c.h(a,b):c.call(null,a,b);else throw z("IAssociative.-contains-key?",a);}return a}function lb(a,b,c){if(null!=a&&null!=a.Sa)a=a.Sa(a,b,c);else{var d=lb[t(null==a?null:a)];if(null!=d)a=d.l?d.l(a,b,c):d.call(null,a,b,c);else if(d=lb._,null!=d)a=d.l?d.l(a,b,c):d.call(null,a,b,c);else throw z("IAssociative.-assoc",a);}return a}
function mb(a,b){if(null!=a&&null!=a.lb)a=a.lb(a,b);else{var c=mb[t(null==a?null:a)];if(null!=c)a=c.h?c.h(a,b):c.call(null,a,b);else if(c=mb._,null!=c)a=c.h?c.h(a,b):c.call(null,a,b);else throw z("IFind.-find",a);}return a}function nb(){}function ob(a,b){if(null!=a&&null!=a.Ub)a=a.Ub(a,b);else{var c=ob[t(null==a?null:a)];if(null!=c)a=c.h?c.h(a,b):c.call(null,a,b);else if(c=ob._,null!=c)a=c.h?c.h(a,b):c.call(null,a,b);else throw z("IMap.-dissoc",a);}return a}
function pb(a){if(null!=a&&null!=a.Yc)a=a.key;else{var b=pb[t(null==a?null:a)];if(null!=b)a=b.g?b.g(a):b.call(null,a);else if(b=pb._,null!=b)a=b.g?b.g(a):b.call(null,a);else throw z("IMapEntry.-key",a);}return a}function qb(a){if(null!=a&&null!=a.Zc)a=a.val;else{var b=qb[t(null==a?null:a)];if(null!=b)a=b.g?b.g(a):b.call(null,a);else if(b=qb._,null!=b)a=b.g?b.g(a):b.call(null,a);else throw z("IMapEntry.-val",a);}return a}function rb(){}
function sb(a,b){if(null!=a&&null!=a.Dc)a=a.Dc(a,b);else{var c=sb[t(null==a?null:a)];if(null!=c)a=c.h?c.h(a,b):c.call(null,a,b);else if(c=sb._,null!=c)a=c.h?c.h(a,b):c.call(null,a,b);else throw z("ISet.-disjoin",a);}return a}function tb(a){if(null!=a&&null!=a.qb)a=a.qb(a);else{var b=tb[t(null==a?null:a)];if(null!=b)a=b.g?b.g(a):b.call(null,a);else if(b=tb._,null!=b)a=b.g?b.g(a):b.call(null,a);else throw z("IStack.-peek",a);}return a}
function ub(a){if(null!=a&&null!=a.rb)a=a.rb(a);else{var b=ub[t(null==a?null:a)];if(null!=b)a=b.g?b.g(a):b.call(null,a);else if(b=ub._,null!=b)a=b.g?b.g(a):b.call(null,a);else throw z("IStack.-pop",a);}return a}function vb(){}function wb(a,b,c){if(null!=a&&null!=a.fb)a=a.fb(a,b,c);else{var d=wb[t(null==a?null:a)];if(null!=d)a=d.l?d.l(a,b,c):d.call(null,a,b,c);else if(d=wb._,null!=d)a=d.l?d.l(a,b,c):d.call(null,a,b,c);else throw z("IVector.-assoc-n",a);}return a}function xb(){}
function G(a){if(null!=a&&null!=a.Ca)a=a.Ca(a);else{var b=G[t(null==a?null:a)];if(null!=b)a=b.g?b.g(a):b.call(null,a);else if(b=G._,null!=b)a=b.g?b.g(a):b.call(null,a);else throw z("IDeref.-deref",a);}return a}function yb(){}function zb(a){if(null!=a&&null!=a.da)a=a.da(a);else{var b=zb[t(null==a?null:a)];if(null!=b)a=b.g?b.g(a):b.call(null,a);else if(b=zb._,null!=b)a=b.g?b.g(a):b.call(null,a);else throw z("IMeta.-meta",a);}return a}
function Ab(a,b){if(null!=a&&null!=a.ga)a=a.ga(a,b);else{var c=Ab[t(null==a?null:a)];if(null!=c)a=c.h?c.h(a,b):c.call(null,a,b);else if(c=Ab._,null!=c)a=c.h?c.h(a,b):c.call(null,a,b);else throw z("IWithMeta.-with-meta",a);}return a}function Bb(){}
var Ug=function(){function a(d,e,f){var h=Cb[t(null==d?null:d)];if(null!=h)return h.l?h.l(d,e,f):h.call(null,d,e,f);h=Cb._;if(null!=h)return h.l?h.l(d,e,f):h.call(null,d,e,f);throw z("IReduce.-reduce",d);}function b(d,e){var f=Cb[t(null==d?null:d)];if(null!=f)return f.h?f.h(d,e):f.call(null,d,e);f=Cb._;if(null!=f)return f.h?f.h(d,e):f.call(null,d,e);throw z("IReduce.-reduce",d);}var c=null;c=function(d,e,f){switch(arguments.length){case 2:return b.call(this,d,e);case 3:return a.call(this,d,e,f)}throw Error("Invalid arity: "+
arguments.length);};c.h=b;c.l=a;return c}(),Cb=function Cb(a){switch(arguments.length){case 2:return Cb.h(arguments[0],arguments[1]);case 3:return Cb.l(arguments[0],arguments[1],arguments[2]);default:throw Error(["Invalid arity: ",B.g(arguments.length)].join(""));}};Cb.h=function(a,b){return null!=a&&null!=a.oa?a.oa(a,b):Ug(a,b)};Cb.l=function(a,b,c){return null!=a&&null!=a.pa?a.pa(a,b,c):Ug(a,b,c)};Cb.S=3;function Eb(){}
function Fb(a,b,c){if(null!=a&&null!=a.mb)a=a.mb(a,b,c);else{var d=Fb[t(null==a?null:a)];if(null!=d)a=d.l?d.l(a,b,c):d.call(null,a,b,c);else if(d=Fb._,null!=d)a=d.l?d.l(a,b,c):d.call(null,a,b,c);else throw z("IKVReduce.-kv-reduce",a);}return a}function Gb(a,b){if(null!=a&&null!=a.G)a=a.G(a,b);else{var c=Gb[t(null==a?null:a)];if(null!=c)a=c.h?c.h(a,b):c.call(null,a,b);else if(c=Gb._,null!=c)a=c.h?c.h(a,b):c.call(null,a,b);else throw z("IEquiv.-equiv",a);}return a}
function Hb(a){if(null!=a&&null!=a.T)a=a.T(a);else{var b=Hb[t(null==a?null:a)];if(null!=b)a=b.g?b.g(a):b.call(null,a);else if(b=Hb._,null!=b)a=b.g?b.g(a):b.call(null,a);else throw z("IHash.-hash",a);}return a}function Ib(){}function Jb(a){if(null!=a&&null!=a.Z)a=a.Z(a);else{var b=Jb[t(null==a?null:a)];if(null!=b)a=b.g?b.g(a):b.call(null,a);else if(b=Jb._,null!=b)a=b.g?b.g(a):b.call(null,a);else throw z("ISeqable.-seq",a);}return a}function Kb(){}function Lb(){}function Mb(){}
function Nb(a,b){if(null!=a&&null!=a.Ec)a=a.Ec(a,b);else{var c=Nb[t(null==a?null:a)];if(null!=c)a=c.h?c.h(a,b):c.call(null,a,b);else if(c=Nb._,null!=c)a=c.h?c.h(a,b):c.call(null,a,b);else throw z("IWriter.-write",a);}return a}function Ob(){}function Pb(a,b,c){if(null!=a&&null!=a.X)a=a.X(a,b,c);else{var d=Pb[t(null==a?null:a)];if(null!=d)a=d.l?d.l(a,b,c):d.call(null,a,b,c);else if(d=Pb._,null!=d)a=d.l?d.l(a,b,c):d.call(null,a,b,c);else throw z("IPrintWithWriter.-pr-writer",a);}return a}
function Qb(a,b){var c=Rb;if(null!=a&&null!=a.Ib)a.Ib(a,b,c);else{var d=Qb[t(null==a?null:a)];if(null!=d)d.l?d.l(a,b,c):d.call(null,a,b,c);else if(d=Qb._,null!=d)d.l?d.l(a,b,c):d.call(null,a,b,c);else throw z("IWatchable.-add-watch",a);}}function Sb(a,b){if(null!=a&&null!=a.Jb)a.Jb(a,b);else{var c=Sb[t(null==a?null:a)];if(null!=c)c.h?c.h(a,b):c.call(null,a,b);else if(c=Sb._,null!=c)c.h?c.h(a,b):c.call(null,a,b);else throw z("IWatchable.-remove-watch",a);}}
function Tb(a){if(null!=a&&null!=a.kb)a=a.kb(a);else{var b=Tb[t(null==a?null:a)];if(null!=b)a=b.g?b.g(a):b.call(null,a);else if(b=Tb._,null!=b)a=b.g?b.g(a):b.call(null,a);else throw z("IEditableCollection.-as-transient",a);}return a}function Ub(a,b){if(null!=a&&null!=a.eb)a=a.eb(a,b);else{var c=Ub[t(null==a?null:a)];if(null!=c)a=c.h?c.h(a,b):c.call(null,a,b);else if(c=Ub._,null!=c)a=c.h?c.h(a,b):c.call(null,a,b);else throw z("ITransientCollection.-conj!",a);}return a}
function Vb(a){if(null!=a&&null!=a.sb)a=a.sb(a);else{var b=Vb[t(null==a?null:a)];if(null!=b)a=b.g?b.g(a):b.call(null,a);else if(b=Vb._,null!=b)a=b.g?b.g(a):b.call(null,a);else throw z("ITransientCollection.-persistent!",a);}return a}function Wb(a,b,c){if(null!=a&&null!=a.cb)a=a.cb(a,b,c);else{var d=Wb[t(null==a?null:a)];if(null!=d)a=d.l?d.l(a,b,c):d.call(null,a,b,c);else if(d=Wb._,null!=d)a=d.l?d.l(a,b,c):d.call(null,a,b,c);else throw z("ITransientAssociative.-assoc!",a);}return a}
function Xb(a,b,c){if(null!=a&&null!=a.Hb)a=a.Hb(a,b,c);else{var d=Xb[t(null==a?null:a)];if(null!=d)a=d.l?d.l(a,b,c):d.call(null,a,b,c);else if(d=Xb._,null!=d)a=d.l?d.l(a,b,c):d.call(null,a,b,c);else throw z("ITransientVector.-assoc-n!",a);}return a}function Yb(a){if(null!=a&&null!=a.yc)a=a.yc(a);else{var b=Yb[t(null==a?null:a)];if(null!=b)a=b.g?b.g(a):b.call(null,a);else if(b=Yb._,null!=b)a=b.g?b.g(a):b.call(null,a);else throw z("IChunk.-drop-first",a);}return a}
function Zb(a){if(null!=a&&null!=a.jc)a=a.jc(a);else{var b=Zb[t(null==a?null:a)];if(null!=b)a=b.g?b.g(a):b.call(null,a);else if(b=Zb._,null!=b)a=b.g?b.g(a):b.call(null,a);else throw z("IChunkedSeq.-chunked-first",a);}return a}function $b(a){if(null!=a&&null!=a.Tb)a=a.Tb(a);else{var b=$b[t(null==a?null:a)];if(null!=b)a=b.g?b.g(a):b.call(null,a);else if(b=$b._,null!=b)a=b.g?b.g(a):b.call(null,a);else throw z("IChunkedSeq.-chunked-rest",a);}return a}
function ac(a){if(null!=a&&null!=a.Eb)a=a.Eb(a);else{var b=ac[t(null==a?null:a)];if(null!=b)a=b.g?b.g(a):b.call(null,a);else if(b=ac._,null!=b)a=b.g?b.g(a):b.call(null,a);else throw z("INamed.-name",a);}return a}function bc(a){if(null!=a&&null!=a.Fb)a=a.Fb(a);else{var b=bc[t(null==a?null:a)];if(null!=b)a=b.g?b.g(a):b.call(null,a);else if(b=bc._,null!=b)a=b.g?b.g(a):b.call(null,a);else throw z("INamed.-namespace",a);}return a}
function cc(a,b){if(null!=a&&null!=a.ya)a=a.ya(a,b);else{var c=cc[t(null==a?null:a)];if(null!=c)a=c.h?c.h(a,b):c.call(null,a,b);else if(c=cc._,null!=c)a=c.h?c.h(a,b):c.call(null,a,b);else throw z("IReset.-reset!",a);}return a}
var Vg=function(){function a(f,h,k,l,m){var n=dc[t(null==f?null:f)];if(null!=n)return n.P?n.P(f,h,k,l,m):n.call(null,f,h,k,l,m);n=dc._;if(null!=n)return n.P?n.P(f,h,k,l,m):n.call(null,f,h,k,l,m);throw z("ISwap.-swap!",f);}function b(f,h,k,l){var m=dc[t(null==f?null:f)];if(null!=m)return m.K?m.K(f,h,k,l):m.call(null,f,h,k,l);m=dc._;if(null!=m)return m.K?m.K(f,h,k,l):m.call(null,f,h,k,l);throw z("ISwap.-swap!",f);}function c(f,h,k){var l=dc[t(null==f?null:f)];if(null!=l)return l.l?l.l(f,h,k):l.call(null,
f,h,k);l=dc._;if(null!=l)return l.l?l.l(f,h,k):l.call(null,f,h,k);throw z("ISwap.-swap!",f);}function d(f,h){var k=dc[t(null==f?null:f)];if(null!=k)return k.h?k.h(f,h):k.call(null,f,h);k=dc._;if(null!=k)return k.h?k.h(f,h):k.call(null,f,h);throw z("ISwap.-swap!",f);}var e=null;e=function(f,h,k,l,m){switch(arguments.length){case 2:return d.call(this,f,h);case 3:return c.call(this,f,h,k);case 4:return b.call(this,f,h,k,l);case 5:return a.call(this,f,h,k,l,m)}throw Error("Invalid arity: "+arguments.length);
};e.h=d;e.l=c;e.K=b;e.P=a;return e}(),dc=function dc(a){switch(arguments.length){case 2:return dc.h(arguments[0],arguments[1]);case 3:return dc.l(arguments[0],arguments[1],arguments[2]);case 4:return dc.K(arguments[0],arguments[1],arguments[2],arguments[3]);case 5:return dc.P(arguments[0],arguments[1],arguments[2],arguments[3],arguments[4]);default:throw Error(["Invalid arity: ",B.g(arguments.length)].join(""));}};dc.h=function(a,b){return null!=a&&null!=a.Vb?a.Vb(a,b):Vg(a,b)};
dc.l=function(a,b,c){return null!=a&&null!=a.Wb?a.Wb(a,b,c):Vg(a,b,c)};dc.K=function(a,b,c,d){return null!=a&&null!=a.Xb?a.Xb(a,b,c,d):Vg(a,b,c,d)};dc.P=function(a,b,c,d,e){return null!=a&&null!=a.Yb?a.Yb(a,b,c,d,e):Vg(a,b,c,d,e)};dc.S=5;function fc(){}function gc(a){if(null!=a&&null!=a.Aa)a=a.Aa(a);else{var b=gc[t(null==a?null:a)];if(null!=b)a=b.g?b.g(a):b.call(null,a);else if(b=gc._,null!=b)a=b.g?b.g(a):b.call(null,a);else throw z("IIterable.-iterator",a);}return a}
function hc(a){this.pd=a;this.o=1073741824;this.J=0}hc.prototype.Ec=function(a,b){return this.pd.append(b)};function ic(a){var b=new ya;a.X(null,new hc(b),Ga());return B.g(b)}var jc="undefined"!==typeof Math&&"undefined"!==typeof Math.imul&&0!==Math.imul(4294967295,5)?function(a,b){return Math.imul(a,b)}:function(a,b){var c=a&65535,d=b&65535;return c*d+((a>>>16&65535)*d+c*(b>>>16&65535)<<16>>>0)|0};function kc(a){a=jc(a|0,-862048943);return jc(a<<15|a>>>-15,461845907)}
function lc(a,b){a=(a|0)^(b|0);return jc(a<<13|a>>>-13,5)+-430675100|0}function mc(a,b){a=(a|0)^b;a=jc(a^a>>>16,-2048144789);a=jc(a^a>>>13,-1028477387);return a^a>>>16}function nc(a){a:{var b=1;for(var c=0;;)if(b<a.length){var d=b+2;c=lc(c,kc(a.charCodeAt(b-1)|a.charCodeAt(b)<<16));b=d}else{b=c;break a}}b=1===(a.length&1)?b^kc(a.charCodeAt(a.length-1)):b;return mc(b,jc(2,a.length))}var oc={},pc=0;
function qc(a){255<pc&&(oc={},pc=0);if(null==a)return 0;var b=oc[a];if("number"===typeof b)a=b;else{a:if(null!=a)if(b=a.length,0<b)for(var c=0,d=0;;)if(c<b){var e=c+1;d=jc(31,d)+a.charCodeAt(c);c=e}else{b=d;break a}else b=0;else b=0;oc[a]=b;pc+=1;a=b}return a}
function rc(a){if(null!=a&&(a.o&4194304||u===a.lc))return a.T(null)^0;if("number"===typeof a){if(x(isFinite(a)))return Math.floor(a)%2147483647;switch(a){case Infinity:return 2146435072;case -Infinity:return-1048576;default:return 2146959360}}else return!0===a?a=1231:!1===a?a=1237:"string"===typeof a?(a=qc(a),0!==a&&(a=kc(a),a=lc(0,a),a=mc(a,4))):a=a instanceof Date?a.valueOf()^0:null==a?0:Hb(a)^0,a}function sc(a,b){return a^b+2654435769+(a<<6)+(a>>2)}
function tc(a,b,c,d,e){this.Cb=a;this.name=b;this.str=c;this._hash=d;this._meta=e;this.o=2154168321;this.J=4096}g=tc.prototype;g.toString=function(){return this.str};g.equiv=function(a){return this.G(null,a)};g.G=function(a,b){return b instanceof tc?this.str===b.str:!1};g.call=function(a){switch(arguments.length-1){case 1:return this.g(arguments[1]);case 2:return this.h(arguments[1],arguments[2]);default:throw Error(["Invalid arity: ",B.g(arguments.length-1)].join(""));}};
g.apply=function(a,b){return this.call.apply(this,[this].concat(Ra(b)))};g.g=function(a){return H.h?H.h(a,this):H.call(null,a,this)};g.h=function(a,b){return H.l?H.l(a,this,b):H.call(null,a,this,b)};g.da=function(){return this._meta};g.ga=function(a,b){return new tc(this.Cb,this.name,this.str,this._hash,b)};g.T=function(){var a=this._hash;return null!=a?a:this._hash=a=sc(nc(this.name),qc(this.Cb))};g.Eb=function(){return this.name};g.Fb=function(){return this.Cb};g.X=function(a,b){return Nb(b,this.str)};
var uc=function uc(a){switch(arguments.length){case 1:return uc.g(arguments[0]);case 2:return uc.h(arguments[0],arguments[1]);default:throw Error(["Invalid arity: ",B.g(arguments.length)].join(""));}};uc.g=function(a){for(;;){if(a instanceof tc)return a;if("string"===typeof a){var b=a.indexOf("/");return 1>b?uc.h(null,a):uc.h(a.substring(0,b),a.substring(b+1,a.length))}if(a instanceof I)a=a.Ba;else throw Error("no conversion to symbol");}};
uc.h=function(a,b){var c=null!=a?[B.g(a),"/",B.g(b)].join(""):b;return new tc(a,b,c,null,null)};uc.S=2;function vc(a){return null!=a?a.J&131072||u===a.vd?!0:a.J?!1:y(fc,a):y(fc,a)}function J(a){if(null==a)return null;if(null!=a&&(a.o&8388608||u===a.bd))return a.Z(null);if(Na(a)||"string"===typeof a)return 0===a.length?null:new K(a,0,null);if(null!=a&&null!=a[Qa])return a=ua(a,Qa).call(a),wc.g?wc.g(a):wc.call(null,a);if(y(Ib,a))return Jb(a);throw Error([B.g(a)," is not ISeqable"].join(""));}
function N(a){if(null==a)return null;if(null!=a&&(a.o&64||u===a.zb))return a.ta(null);a=J(a);return null==a?null:F(a)}function xc(a){return null!=a?null!=a&&(a.o&64||u===a.zb)?a.ua(null):(a=J(a))?a.ua(null):yc:yc}function O(a){return null==a?null:null!=a&&(a.o&128||u===a.Gb)?a.sa():J(xc(a))}
var P=function P(a){switch(arguments.length){case 1:return P.g(arguments[0]);case 2:return P.h(arguments[0],arguments[1]);default:for(var c=[],d=arguments.length,e=0;;)if(e<d)c.push(arguments[e]),e+=1;else break;c=new K(c.slice(2),0,null);return P.C(arguments[0],arguments[1],c)}};P.g=function(){return!0};P.h=function(a,b){return null==a?null==b:a===b||Gb(a,b)};P.C=function(a,b,c){for(;;)if(P.h(a,b))if(O(c))a=b,b=N(c),c=O(c);else return P.h(b,N(c));else return!1};
P.U=function(a){var b=N(a),c=O(a);a=N(c);c=O(c);return this.C(b,a,c)};P.S=2;function zc(a){this.M=a}zc.prototype.next=function(){if(null!=this.M){var a=N(this.M);this.M=O(this.M);return{value:a,done:!1}}return{value:null,done:!0}};function Ac(a){return new zc(J(a))}function Bc(a,b){this.value=a;this.Bb=b;this.fc=null;this.o=8388672;this.J=0}Bc.prototype.Z=function(){return this};Bc.prototype.ta=function(){return this.value};
Bc.prototype.ua=function(){null==this.fc&&(this.fc=wc.g?wc.g(this.Bb):wc.call(null,this.Bb));return this.fc};function wc(a){var b=a.next();return x(b.done)?null:new Bc(b.value,a)}function Cc(a,b){a=kc(a);a=lc(0,a);return mc(a,b)}function Dc(a){var b=0,c=1;for(a=J(a);;)if(null!=a)b+=1,c=jc(31,c)+rc(N(a))|0,a=O(a);else return Cc(c,b)}var Ec=Cc(1,0);function Fc(a){var b=0,c=0;for(a=J(a);;)if(null!=a)b+=1,c=c+rc(N(a))|0,a=O(a);else return Cc(c,b)}var Gc=Cc(0,0);Ya["null"]=!0;Za["null"]=function(){return 0};
Date.prototype.G=function(a,b){return b instanceof Date&&this.valueOf()===b.valueOf()};Gb.number=function(a,b){return a===b};Wa["function"]=!0;yb["function"]=!0;zb["function"]=function(){return null};Hb._=function(a){return ca(a)};function Hc(a){return a+1}function Ic(){this.val=!1;this.o=32768;this.J=0}Ic.prototype.Ca=function(){return this.val};function Jc(a){return a instanceof Ic}function Kc(a){return G(a)}
function Lc(a,b){var c=a.Y(null);if(0===c)return b.I?b.I():b.call(null);for(var d=a.N(null,0),e=1;;)if(e<c){var f=a.N(null,e);d=b.h?b.h(d,f):b.call(null,d,f);if(Jc(d))return G(d);e+=1}else return d}function Mc(a,b,c){var d=a.Y(null),e=c;for(c=0;;)if(c<d){var f=a.N(null,c);e=b.h?b.h(e,f):b.call(null,e,f);if(Jc(e))return G(e);c+=1}else return e}
function Nc(a,b){var c=a.length;if(0===a.length)return b.I?b.I():b.call(null);for(var d=a[0],e=1;;)if(e<c){var f=a[e];d=b.h?b.h(d,f):b.call(null,d,f);if(Jc(d))return G(d);e+=1}else return d}function Oc(a,b,c){var d=a.length,e=c;for(c=0;;)if(c<d){var f=a[c];e=b.h?b.h(e,f):b.call(null,e,f);if(Jc(e))return G(e);c+=1}else return e}function Pc(a,b,c,d){for(var e=a.length;;)if(d<e){var f=a[d];c=b.h?b.h(c,f):b.call(null,c,f);if(Jc(c))return G(c);d+=1}else return c}
function Qc(a){return null!=a?a.o&2||u===a.Qc?!0:a.o?!1:y(Ya,a):y(Ya,a)}function Rc(a){return null!=a?a.o&16||u===a.Ac?!0:a.o?!1:y(db,a):y(db,a)}function Q(a,b,c){var d=R.g?R.g(a):R.call(null,a);if(c>=d)return-1;!(0<c)&&0>c&&(c+=d,c=0>c?0:c);for(;;)if(c<d){if(P.h(Sc?Sc(a,c):Tc.call(null,a,c),b))return c;c+=1}else return-1}
function S(a,b,c){var d=R.g?R.g(a):R.call(null,a);if(0===d)return-1;0<c?(--d,c=d<c?d:c):c=0>c?d+c:c;for(;;)if(0<=c){if(P.h(Sc?Sc(a,c):Tc.call(null,a,c),b))return c;--c}else return-1}function Uc(a,b){this.j=a;this.v=b}Uc.prototype.hasNext=function(){return this.v<this.j.length};Uc.prototype.next=function(){var a=this.j[this.v];this.v+=1;return a};function K(a,b,c){this.j=a;this.v=b;this.meta=c;this.o=166592766;this.J=139264}g=K.prototype;g.toString=function(){return ic(this)};
g.equiv=function(a){return this.G(null,a)};g.indexOf=function(){var a=null;a=function(b,c){switch(arguments.length){case 1:return Q(this,b,0);case 2:return Q(this,b,c)}throw Error("Invalid arity: "+arguments.length);};a.g=function(b){return Q(this,b,0)};a.h=function(b,c){return Q(this,b,c)};return a}();
g.lastIndexOf=function(){function a(c){return S(this,c,R.g?R.g(this):R.call(null,this))}var b=null;b=function(c,d){switch(arguments.length){case 1:return a.call(this,c);case 2:return S(this,c,d)}throw Error("Invalid arity: "+arguments.length);};b.g=a;b.h=function(c,d){return S(this,c,d)};return b}();g.N=function(a,b){a=b+this.v;if(0<=a&&a<this.j.length)return this.j[a];throw Error("Index out of bounds");};g.ka=function(a,b,c){a=b+this.v;return 0<=a&&a<this.j.length?this.j[a]:c};
g.Aa=function(){return new Uc(this.j,this.v)};g.da=function(){return this.meta};g.sa=function(){return this.v+1<this.j.length?new K(this.j,this.v+1,null):null};g.Y=function(){var a=this.j.length-this.v;return 0>a?0:a};g.T=function(){return Dc(this)};g.G=function(a,b){return Vc.h?Vc.h(this,b):Vc.call(null,this,b)};g.ha=function(){return yc};g.oa=function(a,b){return Pc(this.j,b,this.j[this.v],this.v+1)};g.pa=function(a,b,c){return Pc(this.j,b,c,this.v)};g.ta=function(){return this.j[this.v]};
g.ua=function(){return this.v+1<this.j.length?new K(this.j,this.v+1,null):yc};g.Z=function(){return this.v<this.j.length?this:null};g.ga=function(a,b){return b===this.meta?this:new K(this.j,this.v,b)};g.ia=function(a,b){return Wc.h?Wc.h(b,this):Wc.call(null,b,this)};K.prototype[Qa]=function(){return Ac(this)};function Xc(a){return 0<a.length?new K(a,0,null):null}Gb._=function(a,b){return a===b};
var Yc=function Yc(a){switch(arguments.length){case 0:return Yc.I();case 1:return Yc.g(arguments[0]);case 2:return Yc.h(arguments[0],arguments[1]);default:for(var c=[],d=arguments.length,e=0;;)if(e<d)c.push(arguments[e]),e+=1;else break;c=new K(c.slice(2),0,null);return Yc.C(arguments[0],arguments[1],c)}};Yc.I=function(){return Zc};Yc.g=function(a){return a};Yc.h=function(a,b){return null!=a?cb(a,b):new $c(null,b,null,1,null)};
Yc.C=function(a,b,c){for(;;)if(x(c))a=Yc.h(a,b),b=N(c),c=O(c);else return Yc.h(a,b)};Yc.U=function(a){var b=N(a),c=O(a);a=N(c);c=O(c);return this.C(b,a,c)};Yc.S=2;function R(a){if(null!=a)if(null!=a&&(a.o&2||u===a.Qc))a=a.Y(null);else if(Na(a))a=a.length;else if("string"===typeof a)a=a.length;else if(null!=a&&(a.o&8388608||u===a.bd))a:{a=J(a);for(var b=0;;){if(Qc(a)){a=b+Za(a);break a}a=O(a);b+=1}}else a=Za(a);else a=0;return a}
function ad(a,b,c){for(;;){if(null==a)return c;if(0===b)return J(a)?N(a):c;if(Rc(a))return D(a,b,c);if(J(a))a=O(a),--b;else return c}}function Tc(a){switch(arguments.length){case 2:return Sc(arguments[0],arguments[1]);case 3:return T(arguments[0],arguments[1],arguments[2]);default:throw Error(["Invalid arity: ",B.g(arguments.length)].join(""));}}
function Sc(a,b){if("number"!==typeof b)throw Error("Index argument to nth must be a number");if(null==a)return a;if(null!=a&&(a.o&16||u===a.Ac))return a.N(null,b);if(Na(a)){if(-1<b&&b<a.length)return a[b|0];throw Error("Index out of bounds");}if("string"===typeof a){if(-1<b&&b<a.length)return a.charAt(b|0);throw Error("Index out of bounds");}if(null!=a&&(a.o&64||u===a.zb)||null!=a&&(a.o&16777216||u===a.Cc)){if(0>b)throw Error("Index out of bounds");a:for(;;){if(null==a)throw Error("Index out of bounds");
if(0===b){if(J(a)){a=N(a);break a}throw Error("Index out of bounds");}if(Rc(a)){a=D(a,b);break a}if(J(a))a=O(a),--b;else throw Error("Index out of bounds");}return a}if(y(db,a))return D(a,b);throw Error(["nth not supported on this type ",B.g(Pa(null==a?null:a.constructor))].join(""));}
function T(a,b,c){if("number"!==typeof b)throw Error("Index argument to nth must be a number.");if(null==a)return c;if(null!=a&&(a.o&16||u===a.Ac))return a.ka(null,b,c);if(Na(a))return-1<b&&b<a.length?a[b|0]:c;if("string"===typeof a)return-1<b&&b<a.length?a.charAt(b|0):c;if(null!=a&&(a.o&64||u===a.zb)||null!=a&&(a.o&16777216||u===a.Cc))return 0>b?c:ad(a,b,c);if(y(db,a))return D(a,b,c);throw Error(["nth not supported on this type ",B.g(Pa(null==a?null:a.constructor))].join(""));}
var H=function H(a){switch(arguments.length){case 2:return H.h(arguments[0],arguments[1]);case 3:return H.l(arguments[0],arguments[1],arguments[2]);default:throw Error(["Invalid arity: ",B.g(arguments.length)].join(""));}};H.h=function(a,b){return null==a?null:null!=a&&(a.o&256||u===a.Xc)?a.na(null,b):Na(a)?null!=b&&b<a.length?a[b|0]:null:"string"===typeof a?null!=b&&-1<b&&b<a.length?a.charAt(b|0):null:y(ib,a)?jb(a,b):null};
H.l=function(a,b,c){return null!=a?null!=a&&(a.o&256||u===a.Xc)?a.O(null,b,c):Na(a)?null!=b&&-1<b&&b<a.length?a[b|0]:c:"string"===typeof a?null!=b&&-1<b&&b<a.length?a.charAt(b|0):c:y(ib,a)?jb(a,b,c):c:c};H.S=3;var U=function U(a){switch(arguments.length){case 3:return U.l(arguments[0],arguments[1],arguments[2]);default:for(var c=[],d=arguments.length,e=0;;)if(e<d)c.push(arguments[e]),e+=1;else break;c=new K(c.slice(3),0,null);return U.C(arguments[0],arguments[1],arguments[2],c)}};
U.l=function(a,b,c){if(null!=a&&(a.o&512||u===a.rd))a=a.Sa(null,b,c);else if(null!=a)a=lb(a,b,c);else{a=[b,c];b=[];for(c=0;;)if(c<a.length){var d=a[c],e=a[c+1],f=bd(b,d);-1===f?(f=b,f.push(d),f.push(e)):b[f+1]=e;c+=2}else break;a=new v(null,b.length/2,b,null)}return a};U.C=function(a,b,c,d){for(;;)if(a=U.l(a,b,c),x(d))b=N(d),c=N(O(d)),d=O(O(d));else return a};U.U=function(a){var b=N(a),c=O(a);a=N(c);var d=O(c);c=N(d);d=O(d);return this.C(b,a,c,d)};U.S=3;
var cd=function cd(a){switch(arguments.length){case 1:return cd.g(arguments[0]);case 2:return cd.h(arguments[0],arguments[1]);default:for(var c=[],d=arguments.length,e=0;;)if(e<d)c.push(arguments[e]),e+=1;else break;c=new K(c.slice(2),0,null);return cd.C(arguments[0],arguments[1],c)}};cd.g=function(a){return a};cd.h=function(a,b){return null==a?null:ob(a,b)};cd.C=function(a,b,c){for(;;){if(null==a)return null;a=cd.h(a,b);if(x(c))b=N(c),c=O(c);else return a}};
cd.U=function(a){var b=N(a),c=O(a);a=N(c);c=O(c);return this.C(b,a,c)};cd.S=2;function dd(a){var b="function"===typeof a;return b?b:null!=a?u===a.Pc?!0:a.Fc?!1:y(Wa,a):y(Wa,a)}function ed(a,b){this.B=a;this.meta=b;this.o=393217;this.J=0}g=ed.prototype;g.da=function(){return this.meta};g.ga=function(a,b){return new ed(this.B,b)};g.Pc=u;
g.call=function(a){switch(arguments.length-1){case 0:return this.I();case 1:return this.g(arguments[1]);case 2:return this.h(arguments[1],arguments[2]);case 3:return this.l(arguments[1],arguments[2],arguments[3]);case 4:return this.K(arguments[1],arguments[2],arguments[3],arguments[4]);case 5:return this.P(arguments[1],arguments[2],arguments[3],arguments[4],arguments[5]);case 6:return this.xa(arguments[1],arguments[2],arguments[3],arguments[4],arguments[5],arguments[6]);case 7:return this.Pa(arguments[1],
arguments[2],arguments[3],arguments[4],arguments[5],arguments[6],arguments[7]);case 8:return this.za(arguments[1],arguments[2],arguments[3],arguments[4],arguments[5],arguments[6],arguments[7],arguments[8]);case 9:return this.Qa(arguments[1],arguments[2],arguments[3],arguments[4],arguments[5],arguments[6],arguments[7],arguments[8],arguments[9]);case 10:return this.Ea(arguments[1],arguments[2],arguments[3],arguments[4],arguments[5],arguments[6],arguments[7],arguments[8],arguments[9],arguments[10]);
case 11:return this.Fa(arguments[1],arguments[2],arguments[3],arguments[4],arguments[5],arguments[6],arguments[7],arguments[8],arguments[9],arguments[10],arguments[11]);case 12:return this.Ga(arguments[1],arguments[2],arguments[3],arguments[4],arguments[5],arguments[6],arguments[7],arguments[8],arguments[9],arguments[10],arguments[11],arguments[12]);case 13:return this.Ha(arguments[1],arguments[2],arguments[3],arguments[4],arguments[5],arguments[6],arguments[7],arguments[8],arguments[9],arguments[10],
arguments[11],arguments[12],arguments[13]);case 14:return this.Ia(arguments[1],arguments[2],arguments[3],arguments[4],arguments[5],arguments[6],arguments[7],arguments[8],arguments[9],arguments[10],arguments[11],arguments[12],arguments[13],arguments[14]);case 15:return this.Ja(arguments[1],arguments[2],arguments[3],arguments[4],arguments[5],arguments[6],arguments[7],arguments[8],arguments[9],arguments[10],arguments[11],arguments[12],arguments[13],arguments[14],arguments[15]);case 16:return this.Ka(arguments[1],
arguments[2],arguments[3],arguments[4],arguments[5],arguments[6],arguments[7],arguments[8],arguments[9],arguments[10],arguments[11],arguments[12],arguments[13],arguments[14],arguments[15],arguments[16]);case 17:return this.La(arguments[1],arguments[2],arguments[3],arguments[4],arguments[5],arguments[6],arguments[7],arguments[8],arguments[9],arguments[10],arguments[11],arguments[12],arguments[13],arguments[14],arguments[15],arguments[16],arguments[17]);case 18:return this.Ma(arguments[1],arguments[2],
arguments[3],arguments[4],arguments[5],arguments[6],arguments[7],arguments[8],arguments[9],arguments[10],arguments[11],arguments[12],arguments[13],arguments[14],arguments[15],arguments[16],arguments[17],arguments[18]);case 19:return this.Na(arguments[1],arguments[2],arguments[3],arguments[4],arguments[5],arguments[6],arguments[7],arguments[8],arguments[9],arguments[10],arguments[11],arguments[12],arguments[13],arguments[14],arguments[15],arguments[16],arguments[17],arguments[18],arguments[19]);case 20:return this.Oa(arguments[1],
arguments[2],arguments[3],arguments[4],arguments[5],arguments[6],arguments[7],arguments[8],arguments[9],arguments[10],arguments[11],arguments[12],arguments[13],arguments[14],arguments[15],arguments[16],arguments[17],arguments[18],arguments[19],arguments[20]);case 21:return this.kc(arguments[1],arguments[2],arguments[3],arguments[4],arguments[5],arguments[6],arguments[7],arguments[8],arguments[9],arguments[10],arguments[11],arguments[12],arguments[13],arguments[14],arguments[15],arguments[16],arguments[17],
arguments[18],arguments[19],arguments[20],arguments[21]);default:throw Error(["Invalid arity: ",B.g(arguments.length-1)].join(""));}};g.apply=function(a,b){return this.call.apply(this,[this].concat(Ra(b)))};g.I=function(){return this.B.I?this.B.I():this.B.call(null)};g.g=function(a){return this.B.g?this.B.g(a):this.B.call(null,a)};g.h=function(a,b){return this.B.h?this.B.h(a,b):this.B.call(null,a,b)};g.l=function(a,b,c){return this.B.l?this.B.l(a,b,c):this.B.call(null,a,b,c)};
g.K=function(a,b,c,d){return this.B.K?this.B.K(a,b,c,d):this.B.call(null,a,b,c,d)};g.P=function(a,b,c,d,e){return this.B.P?this.B.P(a,b,c,d,e):this.B.call(null,a,b,c,d,e)};g.xa=function(a,b,c,d,e,f){return this.B.xa?this.B.xa(a,b,c,d,e,f):this.B.call(null,a,b,c,d,e,f)};g.Pa=function(a,b,c,d,e,f,h){return this.B.Pa?this.B.Pa(a,b,c,d,e,f,h):this.B.call(null,a,b,c,d,e,f,h)};g.za=function(a,b,c,d,e,f,h,k){return this.B.za?this.B.za(a,b,c,d,e,f,h,k):this.B.call(null,a,b,c,d,e,f,h,k)};
g.Qa=function(a,b,c,d,e,f,h,k,l){return this.B.Qa?this.B.Qa(a,b,c,d,e,f,h,k,l):this.B.call(null,a,b,c,d,e,f,h,k,l)};g.Ea=function(a,b,c,d,e,f,h,k,l,m){return this.B.Ea?this.B.Ea(a,b,c,d,e,f,h,k,l,m):this.B.call(null,a,b,c,d,e,f,h,k,l,m)};g.Fa=function(a,b,c,d,e,f,h,k,l,m,n){return this.B.Fa?this.B.Fa(a,b,c,d,e,f,h,k,l,m,n):this.B.call(null,a,b,c,d,e,f,h,k,l,m,n)};g.Ga=function(a,b,c,d,e,f,h,k,l,m,n,p){return this.B.Ga?this.B.Ga(a,b,c,d,e,f,h,k,l,m,n,p):this.B.call(null,a,b,c,d,e,f,h,k,l,m,n,p)};
g.Ha=function(a,b,c,d,e,f,h,k,l,m,n,p,q){return this.B.Ha?this.B.Ha(a,b,c,d,e,f,h,k,l,m,n,p,q):this.B.call(null,a,b,c,d,e,f,h,k,l,m,n,p,q)};g.Ia=function(a,b,c,d,e,f,h,k,l,m,n,p,q,r){return this.B.Ia?this.B.Ia(a,b,c,d,e,f,h,k,l,m,n,p,q,r):this.B.call(null,a,b,c,d,e,f,h,k,l,m,n,p,q,r)};g.Ja=function(a,b,c,d,e,f,h,k,l,m,n,p,q,r,w){return this.B.Ja?this.B.Ja(a,b,c,d,e,f,h,k,l,m,n,p,q,r,w):this.B.call(null,a,b,c,d,e,f,h,k,l,m,n,p,q,r,w)};
g.Ka=function(a,b,c,d,e,f,h,k,l,m,n,p,q,r,w,A){return this.B.Ka?this.B.Ka(a,b,c,d,e,f,h,k,l,m,n,p,q,r,w,A):this.B.call(null,a,b,c,d,e,f,h,k,l,m,n,p,q,r,w,A)};g.La=function(a,b,c,d,e,f,h,k,l,m,n,p,q,r,w,A,C){return this.B.La?this.B.La(a,b,c,d,e,f,h,k,l,m,n,p,q,r,w,A,C):this.B.call(null,a,b,c,d,e,f,h,k,l,m,n,p,q,r,w,A,C)};g.Ma=function(a,b,c,d,e,f,h,k,l,m,n,p,q,r,w,A,C,E){return this.B.Ma?this.B.Ma(a,b,c,d,e,f,h,k,l,m,n,p,q,r,w,A,C,E):this.B.call(null,a,b,c,d,e,f,h,k,l,m,n,p,q,r,w,A,C,E)};
g.Na=function(a,b,c,d,e,f,h,k,l,m,n,p,q,r,w,A,C,E,M){return this.B.Na?this.B.Na(a,b,c,d,e,f,h,k,l,m,n,p,q,r,w,A,C,E,M):this.B.call(null,a,b,c,d,e,f,h,k,l,m,n,p,q,r,w,A,C,E,M)};g.Oa=function(a,b,c,d,e,f,h,k,l,m,n,p,q,r,w,A,C,E,M,W){return this.B.Oa?this.B.Oa(a,b,c,d,e,f,h,k,l,m,n,p,q,r,w,A,C,E,M,W):this.B.call(null,a,b,c,d,e,f,h,k,l,m,n,p,q,r,w,A,C,E,M,W)};
g.kc=function(a,b,c,d,e,f,h,k,l,m,n,p,q,r,w,A,C,E,M,W,ja){return fd.Wc?fd.Wc(this.B,a,b,c,d,e,f,h,k,l,m,n,p,q,r,w,A,C,E,M,W,ja):fd.call(null,this.B,a,b,c,d,e,f,h,k,l,m,n,p,q,r,w,A,C,E,M,W,ja)};function gd(a,b){return"function"===typeof a?new ed(a,b):null==a?null:Ab(a,b)}function hd(a){var b=null!=a;return(b?null!=a?a.o&131072||u===a.$c||(a.o?0:y(yb,a)):y(yb,a):b)?zb(a):null}
var id=function id(a){switch(arguments.length){case 1:return id.g(arguments[0]);case 2:return id.h(arguments[0],arguments[1]);default:for(var c=[],d=arguments.length,e=0;;)if(e<d)c.push(arguments[e]),e+=1;else break;c=new K(c.slice(2),0,null);return id.C(arguments[0],arguments[1],c)}};id.g=function(a){return a};id.h=function(a,b){return null==a?null:sb(a,b)};id.C=function(a,b,c){for(;;){if(null==a)return null;a=id.h(a,b);if(x(c))b=N(c),c=O(c);else return a}};
id.U=function(a){var b=N(a),c=O(a);a=N(c);c=O(c);return this.C(b,a,c)};id.S=2;function jd(a){return null==a||Oa(J(a))}function kd(a){return null==a?!1:null!=a?a.o&8||u===a.td?!0:a.o?!1:y(bb,a):y(bb,a)}function ld(a){return null==a?!1:null!=a?a.o&4096||u===a.Bd?!0:a.o?!1:y(rb,a):y(rb,a)}function md(a){return null!=a?a.o&16777216||u===a.Cc?!0:a.o?!1:y(Kb,a):y(Kb,a)}function nd(a){return null==a?!1:null!=a?a.o&1024||u===a.yd?!0:a.o?!1:y(nb,a):y(nb,a)}
function od(a){return null!=a?a.o&67108864||u===a.Ad?!0:a.o?!1:y(Mb,a):y(Mb,a)}function pd(a){return null!=a?a.o&16384||u===a.Cd?!0:a.o?!1:y(vb,a):y(vb,a)}function qd(a){return null!=a?a.J&512||u===a.sd?!0:!1:!1}function rd(a,b,c,d,e){for(;0!==e;)c[d]=a[b],d+=1,--e,b+=1}var sd={};function td(a){return null==a?!1:!1===a?!1:!0}function ud(a){var b=dd(a);return b?b:null!=a?a.o&1||u===a.ud?!0:a.o?!1:y(Xa,a):y(Xa,a)}
function Wg(a){return"number"===typeof a&&!isNaN(a)&&Infinity!==a&&parseFloat(a)===parseInt(a,10)}function vd(a,b){return null!=a&&(a.o&512||u===a.rd)?a.Ra(null,b):y(Db,a)?ec(a,b):H.l(a,b,sd)===sd?!1:!0}function xd(a,b){var c=J(b);return c?(b=N(c),c=O(c),Ta?Ta(a,b,c):Ua.call(null,a,b,c)):a.I?a.I():a.call(null)}function yd(a,b,c){for(c=J(c);;)if(c){var d=N(c);b=a.h?a.h(b,d):a.call(null,b,d);if(Jc(b))return G(b);c=O(c)}else return b}
function zd(a,b){a=gc(a);if(x(a.hasNext()))for(var c=a.next();;)if(a.hasNext()){var d=a.next();c=b.h?b.h(c,d):b.call(null,c,d);if(Jc(c))return G(c)}else return c;else return b.I?b.I():b.call(null)}function Ad(a,b,c){for(a=gc(a);;)if(a.hasNext()){var d=a.next();c=b.h?b.h(c,d):b.call(null,c,d);if(Jc(c))return G(c)}else return c}
function Ua(a){switch(arguments.length){case 2:return Bd(arguments[0],arguments[1]);case 3:return Ta(arguments[0],arguments[1],arguments[2]);default:throw Error(["Invalid arity: ",B.g(arguments.length)].join(""));}}function Bd(a,b){return null!=b&&(b.o&524288||u===b.ad)?b.oa(null,a):Na(b)?Nc(b,a):"string"===typeof b?Nc(b,a):y(Bb,b)?Cb(b,a):vc(b)?zd(b,a):xd(a,b)}
function Ta(a,b,c){return null!=c&&(c.o&524288||u===c.ad)?c.pa(null,a,b):Na(c)?Oc(c,a,b):"string"===typeof c?Oc(c,a,b):y(Bb,c)?Cb(c,a,b):vc(c)?Ad(c,a,b):yd(a,b,c)}function Cd(a,b,c){return null!=c?Fb(c,a,b):b}function Dd(a){return a}function Ed(a,b,c,d){a=a.g?a.g(b):a.call(null,b);c=Ta(a,c,d);return a.g?a.g(c):a.call(null,c)}function Fd(a){a=(a-a%2)/2;return 0<=a?Math.floor(a):Math.ceil(a)}
function Gd(a){a-=a>>1&1431655765;a=(a&858993459)+(a>>2&858993459);return 16843009*(a+(a>>4)&252645135)>>24}var B=function B(a){switch(arguments.length){case 0:return B.I();case 1:return B.g(arguments[0]);default:for(var c=[],d=arguments.length,e=0;;)if(e<d)c.push(arguments[e]),e+=1;else break;c=new K(c.slice(1),0,null);return B.C(arguments[0],c)}};B.I=function(){return""};B.g=function(a){return null==a?"":[a].join("")};
B.C=function(a,b){for(a=new ya(B.g(a));;)if(x(b))a=a.append(B.g(N(b))),b=O(b);else return a.toString()};B.U=function(a){var b=N(a);a=O(a);return this.C(b,a)};B.S=1;function Vc(a,b){if(md(b))if(Qc(a)&&Qc(b)&&R(a)!==R(b))a=!1;else a:for(a=J(a),b=J(b);;){if(null==a){a=null==b;break a}if(null!=b&&P.h(N(a),N(b)))a=O(a),b=O(b);else{a=!1;break a}}else a=null;return td(a)}function $c(a,b,c,d,e){this.meta=a;this.first=b;this.ib=c;this.count=d;this.H=e;this.o=65937646;this.J=8192}g=$c.prototype;
g.toString=function(){return ic(this)};g.equiv=function(a){return this.G(null,a)};g.indexOf=function(){var a=null;a=function(b,c){switch(arguments.length){case 1:return Q(this,b,0);case 2:return Q(this,b,c)}throw Error("Invalid arity: "+arguments.length);};a.g=function(b){return Q(this,b,0)};a.h=function(b,c){return Q(this,b,c)};return a}();
g.lastIndexOf=function(){function a(c){return S(this,c,this.count)}var b=null;b=function(c,d){switch(arguments.length){case 1:return a.call(this,c);case 2:return S(this,c,d)}throw Error("Invalid arity: "+arguments.length);};b.g=a;b.h=function(c,d){return S(this,c,d)};return b}();g.da=function(){return this.meta};g.sa=function(){return 1===this.count?null:this.ib};g.Y=function(){return this.count};g.qb=function(){return this.first};g.rb=function(){return this.ua(null)};
g.T=function(){var a=this.H;return null!=a?a:this.H=a=Dc(this)};g.G=function(a,b){return Vc(this,b)};g.ha=function(){return Ab(yc,this.meta)};g.oa=function(a,b){return xd(b,this)};g.pa=function(a,b,c){return yd(b,c,this)};g.ta=function(){return this.first};g.ua=function(){return 1===this.count?yc:this.ib};g.Z=function(){return this};g.ga=function(a,b){return b===this.meta?this:new $c(b,this.first,this.ib,this.count,this.H)};g.ia=function(a,b){return new $c(this.meta,b,this,this.count+1,null)};
$c.prototype[Qa]=function(){return Ac(this)};function Hd(a){this.meta=a;this.o=65937614;this.J=8192}g=Hd.prototype;g.toString=function(){return ic(this)};g.equiv=function(a){return this.G(null,a)};g.indexOf=function(){var a=null;a=function(b,c){switch(arguments.length){case 1:return Q(this,b,0);case 2:return Q(this,b,c)}throw Error("Invalid arity: "+arguments.length);};a.g=function(b){return Q(this,b,0)};a.h=function(b,c){return Q(this,b,c)};return a}();
g.lastIndexOf=function(){function a(c){return S(this,c,R(this))}var b=null;b=function(c,d){switch(arguments.length){case 1:return a.call(this,c);case 2:return S(this,c,d)}throw Error("Invalid arity: "+arguments.length);};b.g=a;b.h=function(c,d){return S(this,c,d)};return b}();g.da=function(){return this.meta};g.sa=function(){return null};g.Y=function(){return 0};g.qb=function(){return null};g.rb=function(){throw Error("Can't pop empty list");};g.T=function(){return Ec};
g.G=function(a,b){return(null!=b?b.o&33554432||u===b.xd||(b.o?0:y(Lb,b)):y(Lb,b))||md(b)?null==J(b):!1};g.ha=function(){return this};g.oa=function(a,b){return xd(b,this)};g.pa=function(a,b,c){return yd(b,c,this)};g.ta=function(){return null};g.ua=function(){return yc};g.Z=function(){return null};g.ga=function(a,b){return b===this.meta?this:new Hd(b)};g.ia=function(a,b){return new $c(this.meta,b,null,1,null)};var yc=new Hd(null);Hd.prototype[Qa]=function(){return Ac(this)};
function Id(a,b,c,d){this.meta=a;this.first=b;this.ib=c;this.H=d;this.o=65929452;this.J=8192}g=Id.prototype;g.toString=function(){return ic(this)};g.equiv=function(a){return this.G(null,a)};g.indexOf=function(){var a=null;a=function(b,c){switch(arguments.length){case 1:return Q(this,b,0);case 2:return Q(this,b,c)}throw Error("Invalid arity: "+arguments.length);};a.g=function(b){return Q(this,b,0)};a.h=function(b,c){return Q(this,b,c)};return a}();
g.lastIndexOf=function(){function a(c){return S(this,c,R(this))}var b=null;b=function(c,d){switch(arguments.length){case 1:return a.call(this,c);case 2:return S(this,c,d)}throw Error("Invalid arity: "+arguments.length);};b.g=a;b.h=function(c,d){return S(this,c,d)};return b}();g.da=function(){return this.meta};g.sa=function(){return null==this.ib?null:J(this.ib)};g.T=function(){var a=this.H;return null!=a?a:this.H=a=Dc(this)};g.G=function(a,b){return Vc(this,b)};g.ha=function(){return yc};
g.oa=function(a,b){return xd(b,this)};g.pa=function(a,b,c){return yd(b,c,this)};g.ta=function(){return this.first};g.ua=function(){return null==this.ib?yc:this.ib};g.Z=function(){return this};g.ga=function(a,b){return b===this.meta?this:new Id(b,this.first,this.ib,this.H)};g.ia=function(a,b){return new Id(null,b,this,null)};Id.prototype[Qa]=function(){return Ac(this)};
function Wc(a,b){return null==b?new $c(null,a,null,1,null):null!=b&&(b.o&64||u===b.zb)?new Id(null,a,b,null):new Id(null,a,J(b),null)}function I(a,b,c,d){this.Cb=a;this.name=b;this.Ba=c;this._hash=d;this.o=2153775105;this.J=4096}g=I.prototype;g.toString=function(){return[":",B.g(this.Ba)].join("")};g.equiv=function(a){return this.G(null,a)};g.G=function(a,b){return b instanceof I?this.Ba===b.Ba:!1};
g.call=function(a){switch(arguments.length-1){case 1:return this.g(arguments[1]);case 2:return this.h(arguments[1],arguments[2]);default:throw Error(["Invalid arity: ",B.g(arguments.length-1)].join(""));}};g.apply=function(a,b){return this.call.apply(this,[this].concat(Ra(b)))};g.g=function(a){return H.h(a,this)};g.h=function(a,b){return H.l(a,this,b)};g.T=function(){var a=this._hash;return null!=a?a:this._hash=a=sc(nc(this.name),qc(this.Cb))+2654435769|0};g.Eb=function(){return this.name};g.Fb=function(){return this.Cb};
g.X=function(a,b){return Nb(b,[":",B.g(this.Ba)].join(""))};function Jd(a){if(null!=a&&(a.J&4096||u===a.Bc))return a.Fb(null);throw Error(["Doesn't support namespace: ",B.g(a)].join(""));}var Kd=function Kd(a){switch(arguments.length){case 1:return Kd.g(arguments[0]);case 2:return Kd.h(arguments[0],arguments[1]);default:throw Error(["Invalid arity: ",B.g(arguments.length)].join(""));}};
Kd.g=function(a){if(a instanceof I)return a;if(a instanceof tc)return new I(Jd(a),Ld.g?Ld.g(a):Ld.call(null,a),a.str,null);if(P.h("/",a))return new I(null,a,a,null);if("string"===typeof a){var b=a.split("/");return 2===b.length?new I(b[0],b[1],a,null):new I(null,b[0],a,null)}return null};
Kd.h=function(a,b){a=a instanceof I?Ld.g?Ld.g(a):Ld.call(null,a):a instanceof tc?Ld.g?Ld.g(a):Ld.call(null,a):a;b=b instanceof I?Ld.g?Ld.g(b):Ld.call(null,b):b instanceof tc?Ld.g?Ld.g(b):Ld.call(null,b):b;return new I(a,b,[x(a)?[B.g(a),"/"].join(""):null,B.g(b)].join(""),null)};Kd.S=2;function Md(a,b,c){this.meta=a;this.Kb=b;this.M=null;this.H=c;this.o=32374988;this.J=1}g=Md.prototype;g.toString=function(){return ic(this)};g.equiv=function(a){return this.G(null,a)};
function Nd(a){null!=a.Kb&&(a.M=a.Kb.I?a.Kb.I():a.Kb.call(null),a.Kb=null);return a.M}g.indexOf=function(){var a=null;a=function(b,c){switch(arguments.length){case 1:return Q(this,b,0);case 2:return Q(this,b,c)}throw Error("Invalid arity: "+arguments.length);};a.g=function(b){return Q(this,b,0)};a.h=function(b,c){return Q(this,b,c)};return a}();
g.lastIndexOf=function(){function a(c){return S(this,c,R(this))}var b=null;b=function(c,d){switch(arguments.length){case 1:return a.call(this,c);case 2:return S(this,c,d)}throw Error("Invalid arity: "+arguments.length);};b.g=a;b.h=function(c,d){return S(this,c,d)};return b}();g.da=function(){return this.meta};g.sa=function(){this.Z(null);return null==this.M?null:O(this.M)};g.T=function(){var a=this.H;return null!=a?a:this.H=a=Dc(this)};g.G=function(a,b){return Vc(this,b)};
g.ha=function(){return Ab(yc,this.meta)};g.oa=function(a,b){return xd(b,this)};g.pa=function(a,b,c){return yd(b,c,this)};g.ta=function(){this.Z(null);return null==this.M?null:N(this.M)};g.ua=function(){this.Z(null);return null!=this.M?xc(this.M):yc};g.Z=function(){Nd(this);if(null==this.M)return null;for(var a=this.M;;)if(a instanceof Md)a=Nd(a);else return this.M=a,J(this.M)};g.ga=function(a,b){var c=this;return b===this.meta?c:new Md(b,function(){return c.Z(null)},this.H)};
g.ia=function(a,b){return Wc(b,this)};Md.prototype[Qa]=function(){return Ac(this)};function Od(a){this.buf=a;this.end=0;this.o=2;this.J=0}Od.prototype.add=function(a){this.buf[this.end]=a;return this.end+=1};Od.prototype.chunk=function(){var a=new Pd(this.buf,0,this.end);this.buf=null;return a};Od.prototype.Y=function(){return this.end};function Pd(a,b,c){this.j=a;this.off=b;this.end=c;this.o=524306;this.J=0}g=Pd.prototype;g.Y=function(){return this.end-this.off};
g.N=function(a,b){return this.j[this.off+b]};g.ka=function(a,b,c){return 0<=b&&b<this.end-this.off?this.j[this.off+b]:c};g.yc=function(){if(this.off===this.end)throw Error("-drop-first of empty chunk");return new Pd(this.j,this.off+1,this.end)};g.oa=function(a,b){return Pc(this.j,b,this.j[this.off],this.off+1)};g.pa=function(a,b,c){return Pc(this.j,b,c,this.off)};function Qd(a,b,c,d){this.chunk=a;this.$a=b;this.meta=c;this.H=d;this.o=31850732;this.J=1536}g=Qd.prototype;g.toString=function(){return ic(this)};
g.equiv=function(a){return this.G(null,a)};g.indexOf=function(){var a=null;a=function(b,c){switch(arguments.length){case 1:return Q(this,b,0);case 2:return Q(this,b,c)}throw Error("Invalid arity: "+arguments.length);};a.g=function(b){return Q(this,b,0)};a.h=function(b,c){return Q(this,b,c)};return a}();
g.lastIndexOf=function(){function a(c){return S(this,c,R(this))}var b=null;b=function(c,d){switch(arguments.length){case 1:return a.call(this,c);case 2:return S(this,c,d)}throw Error("Invalid arity: "+arguments.length);};b.g=a;b.h=function(c,d){return S(this,c,d)};return b}();g.da=function(){return this.meta};g.sa=function(){return 1<Za(this.chunk)?new Qd(Yb(this.chunk),this.$a,null,null):null==this.$a?null:Jb(this.$a)};g.T=function(){var a=this.H;return null!=a?a:this.H=a=Dc(this)};
g.G=function(a,b){return Vc(this,b)};g.ha=function(){return yc};g.ta=function(){return D(this.chunk,0)};g.ua=function(){return 1<Za(this.chunk)?new Qd(Yb(this.chunk),this.$a,null,null):null==this.$a?yc:this.$a};g.Z=function(){return this};g.jc=function(){return this.chunk};g.Tb=function(){return null==this.$a?yc:this.$a};g.ga=function(a,b){return b===this.meta?this:new Qd(this.chunk,this.$a,b,this.H)};g.ia=function(a,b){return Wc(b,this)};g.zc=function(){return null==this.$a?null:this.$a};
Qd.prototype[Qa]=function(){return Ac(this)};function Rd(a,b){return 0===Za(a)?b:new Qd(a,b,null,null)}function Sd(a,b){a.add(b)}function Td(a,b){if(Qc(b))return R(b);var c=0;for(b=J(b);;)if(null!=b&&c<a)c+=1,b=O(b);else return c}
var Ud=function Ud(a){if(null==a)return null;var c=O(a);return null==c?J(N(a)):Wc(N(a),Ud.g?Ud.g(c):Ud.call(null,c))},Vd=function Vd(a){switch(arguments.length){case 0:return Vd.I();case 1:return Vd.g(arguments[0]);case 2:return Vd.h(arguments[0],arguments[1]);default:for(var c=[],d=arguments.length,e=0;;)if(e<d)c.push(arguments[e]),e+=1;else break;c=new K(c.slice(2),0,null);return Vd.C(arguments[0],arguments[1],c)}};Vd.I=function(){return Tb(Zc)};Vd.g=function(a){return a};
Vd.h=function(a,b){return Ub(a,b)};Vd.C=function(a,b,c){for(;;)if(a=Ub(a,b),x(c))b=N(c),c=O(c);else return a};Vd.U=function(a){var b=N(a),c=O(a);a=N(c);c=O(c);return this.C(b,a,c)};Vd.S=2;
function Wd(a,b,c){var d=J(c);if(0===b)return a.I?a.I():a.call(null);c=F(d);var e=gb(d);if(1===b)return a.g?a.g(c):a.call(null,c);d=F(e);var f=gb(e);if(2===b)return a.h?a.h(c,d):a.call(null,c,d);e=F(f);var h=gb(f);if(3===b)return a.l?a.l(c,d,e):a.call(null,c,d,e);f=F(h);var k=gb(h);if(4===b)return a.K?a.K(c,d,e,f):a.call(null,c,d,e,f);h=F(k);var l=gb(k);if(5===b)return a.P?a.P(c,d,e,f,h):a.call(null,c,d,e,f,h);k=F(l);var m=gb(l);if(6===b)return a.xa?a.xa(c,d,e,f,h,k):a.call(null,c,d,e,f,h,k);l=F(m);
var n=gb(m);if(7===b)return a.Pa?a.Pa(c,d,e,f,h,k,l):a.call(null,c,d,e,f,h,k,l);m=F(n);var p=gb(n);if(8===b)return a.za?a.za(c,d,e,f,h,k,l,m):a.call(null,c,d,e,f,h,k,l,m);n=F(p);var q=gb(p);if(9===b)return a.Qa?a.Qa(c,d,e,f,h,k,l,m,n):a.call(null,c,d,e,f,h,k,l,m,n);p=F(q);var r=gb(q);if(10===b)return a.Ea?a.Ea(c,d,e,f,h,k,l,m,n,p):a.call(null,c,d,e,f,h,k,l,m,n,p);q=F(r);var w=gb(r);if(11===b)return a.Fa?a.Fa(c,d,e,f,h,k,l,m,n,p,q):a.call(null,c,d,e,f,h,k,l,m,n,p,q);r=F(w);var A=gb(w);if(12===b)return a.Ga?
a.Ga(c,d,e,f,h,k,l,m,n,p,q,r):a.call(null,c,d,e,f,h,k,l,m,n,p,q,r);w=F(A);var C=gb(A);if(13===b)return a.Ha?a.Ha(c,d,e,f,h,k,l,m,n,p,q,r,w):a.call(null,c,d,e,f,h,k,l,m,n,p,q,r,w);A=F(C);var E=gb(C);if(14===b)return a.Ia?a.Ia(c,d,e,f,h,k,l,m,n,p,q,r,w,A):a.call(null,c,d,e,f,h,k,l,m,n,p,q,r,w,A);C=F(E);var M=gb(E);if(15===b)return a.Ja?a.Ja(c,d,e,f,h,k,l,m,n,p,q,r,w,A,C):a.call(null,c,d,e,f,h,k,l,m,n,p,q,r,w,A,C);E=F(M);var W=gb(M);if(16===b)return a.Ka?a.Ka(c,d,e,f,h,k,l,m,n,p,q,r,w,A,C,E):a.call(null,
c,d,e,f,h,k,l,m,n,p,q,r,w,A,C,E);M=F(W);var ja=gb(W);if(17===b)return a.La?a.La(c,d,e,f,h,k,l,m,n,p,q,r,w,A,C,E,M):a.call(null,c,d,e,f,h,k,l,m,n,p,q,r,w,A,C,E,M);W=F(ja);var Ba=gb(ja);if(18===b)return a.Ma?a.Ma(c,d,e,f,h,k,l,m,n,p,q,r,w,A,C,E,M,W):a.call(null,c,d,e,f,h,k,l,m,n,p,q,r,w,A,C,E,M,W);ja=F(Ba);Ba=gb(Ba);if(19===b)return a.Na?a.Na(c,d,e,f,h,k,l,m,n,p,q,r,w,A,C,E,M,W,ja):a.call(null,c,d,e,f,h,k,l,m,n,p,q,r,w,A,C,E,M,W,ja);var wd=F(Ba);gb(Ba);if(20===b)return a.Oa?a.Oa(c,d,e,f,h,k,l,m,n,p,
q,r,w,A,C,E,M,W,ja,wd):a.call(null,c,d,e,f,h,k,l,m,n,p,q,r,w,A,C,E,M,W,ja,wd);throw Error("Only up to 20 arguments supported on functions");}function Xd(a){return null!=a&&(a.o&128||u===a.Gb)?a.sa():J(xc(a))}function Yd(a,b,c){return null==c?a.g?a.g(b):a.call(a,b):Zd(a,b,F(c),Xd(c))}function Zd(a,b,c,d){return null==d?a.h?a.h(b,c):a.call(a,b,c):$d(a,b,c,F(d),Xd(d))}function $d(a,b,c,d,e){return null==e?a.l?a.l(b,c,d):a.call(a,b,c,d):ae(a,b,c,d,F(e),Xd(e))}
function ae(a,b,c,d,e,f){if(null==f)return a.K?a.K(b,c,d,e):a.call(a,b,c,d,e);var h=F(f),k=O(f);if(null==k)return a.P?a.P(b,c,d,e,h):a.call(a,b,c,d,e,h);f=F(k);var l=O(k);if(null==l)return a.xa?a.xa(b,c,d,e,h,f):a.call(a,b,c,d,e,h,f);k=F(l);var m=O(l);if(null==m)return a.Pa?a.Pa(b,c,d,e,h,f,k):a.call(a,b,c,d,e,h,f,k);l=F(m);var n=O(m);if(null==n)return a.za?a.za(b,c,d,e,h,f,k,l):a.call(a,b,c,d,e,h,f,k,l);m=F(n);var p=O(n);if(null==p)return a.Qa?a.Qa(b,c,d,e,h,f,k,l,m):a.call(a,b,c,d,e,h,f,k,l,m);
n=F(p);var q=O(p);if(null==q)return a.Ea?a.Ea(b,c,d,e,h,f,k,l,m,n):a.call(a,b,c,d,e,h,f,k,l,m,n);p=F(q);var r=O(q);if(null==r)return a.Fa?a.Fa(b,c,d,e,h,f,k,l,m,n,p):a.call(a,b,c,d,e,h,f,k,l,m,n,p);q=F(r);var w=O(r);if(null==w)return a.Ga?a.Ga(b,c,d,e,h,f,k,l,m,n,p,q):a.call(a,b,c,d,e,h,f,k,l,m,n,p,q);r=F(w);var A=O(w);if(null==A)return a.Ha?a.Ha(b,c,d,e,h,f,k,l,m,n,p,q,r):a.call(a,b,c,d,e,h,f,k,l,m,n,p,q,r);w=F(A);var C=O(A);if(null==C)return a.Ia?a.Ia(b,c,d,e,h,f,k,l,m,n,p,q,r,w):a.call(a,b,c,d,
e,h,f,k,l,m,n,p,q,r,w);A=F(C);var E=O(C);if(null==E)return a.Ja?a.Ja(b,c,d,e,h,f,k,l,m,n,p,q,r,w,A):a.call(a,b,c,d,e,h,f,k,l,m,n,p,q,r,w,A);C=F(E);var M=O(E);if(null==M)return a.Ka?a.Ka(b,c,d,e,h,f,k,l,m,n,p,q,r,w,A,C):a.call(a,b,c,d,e,h,f,k,l,m,n,p,q,r,w,A,C);E=F(M);var W=O(M);if(null==W)return a.La?a.La(b,c,d,e,h,f,k,l,m,n,p,q,r,w,A,C,E):a.call(a,b,c,d,e,h,f,k,l,m,n,p,q,r,w,A,C,E);M=F(W);var ja=O(W);if(null==ja)return a.Ma?a.Ma(b,c,d,e,h,f,k,l,m,n,p,q,r,w,A,C,E,M):a.call(a,b,c,d,e,h,f,k,l,m,n,p,
q,r,w,A,C,E,M);W=F(ja);var Ba=O(ja);if(null==Ba)return a.Na?a.Na(b,c,d,e,h,f,k,l,m,n,p,q,r,w,A,C,E,M,W):a.call(a,b,c,d,e,h,f,k,l,m,n,p,q,r,w,A,C,E,M,W);ja=F(Ba);Ba=O(Ba);if(null==Ba)return a.Oa?a.Oa(b,c,d,e,h,f,k,l,m,n,p,q,r,w,A,C,E,M,W,ja):a.call(a,b,c,d,e,h,f,k,l,m,n,p,q,r,w,A,C,E,M,W,ja);b=[b,c,d,e,h,f,k,l,m,n,p,q,r,w,A,C,E,M,W,ja];for(c=Ba;;)if(c)b.push(F(c)),c=O(c);else break;return a.apply(a,b)}
function fd(a){switch(arguments.length){case 2:return be(arguments[0],arguments[1]);case 3:return ce(arguments[0],arguments[1],arguments[2]);case 4:var b=arguments[0];var c=arguments[1],d=arguments[2],e=arguments[3];b.U?(c=Wc(c,Wc(d,e)),d=b.S,e=2+Td(d-1,e),b=e<=d?Wd(b,e,c):b.U(c)):b=Zd(b,c,d,J(e));return b;case 5:return de(arguments[0],arguments[1],arguments[2],arguments[3],arguments[4]);default:b=[];e=arguments.length;for(c=0;;)if(c<e)b.push(arguments[c]),c+=1;else break;b=new K(b.slice(5),0,null);
return ee(arguments[0],arguments[1],arguments[2],arguments[3],arguments[4],b)}}function be(a,b){if(a.U){var c=a.S,d=Td(c+1,b);return d<=c?Wd(a,d,b):a.U(b)}b=J(b);return null==b?a.I?a.I():a.call(a):Yd(a,F(b),Xd(b))}function ce(a,b,c){if(a.U){b=Wc(b,c);var d=a.S;c=Td(d,c)+1;return c<=d?Wd(a,c,b):a.U(b)}return Yd(a,b,J(c))}function de(a,b,c,d,e){return a.U?(b=Wc(b,Wc(c,Wc(d,e))),c=a.S,e=3+Td(c-2,e),e<=c?Wd(a,e,b):a.U(b)):$d(a,b,c,d,J(e))}
function ee(a,b,c,d,e,f){return a.U?(f=Ud(f),b=Wc(b,Wc(c,Wc(d,Wc(e,f)))),c=a.S,f=4+Td(c-3,f),f<=c?Wd(a,f,b):a.U(b)):ae(a,b,c,d,e,Ud(f))}function fe(a){return null!=a&&(a.o&64||u===a.zb)?be(ge,a):a}
function he(){if("undefined"===typeof za||"undefined"===typeof Aa||"undefined"===typeof Ca)Ca=function(a){this.jd=a;this.o=393216;this.J=0},Ca.prototype.ga=function(a,b){return new Ca(b)},Ca.prototype.da=function(){return this.jd},Ca.prototype.hasNext=function(){return!1},Ca.prototype.next=function(){return Error("No such element")},Ca.prototype.remove=function(){return Error("Unsupported operation")},Ca.$b=!0,Ca.Ab="cljs.core/t_cljs$core18731",Ca.mc=function(a){return Nb(a,"cljs.core/t_cljs$core18731")};
return new Ca(ie)}var je={},ke={};function le(a){this.Db=je;this._next=a}le.prototype.hasNext=function(){this.Db===je?(this.Db=ke,this._next=J(this._next)):this.Db===this._next&&(this._next=O(this.Db));return null!=this._next};le.prototype.next=function(){if(this.hasNext())return this.Db=this._next,N(this._next);throw Error("No such element");};le.prototype.remove=function(){return Error("Unsupported operation")};
function me(a,b){for(;;){if(null==J(b))return!0;var c=N(b);c=a.g?a.g(c):a.call(null,c);if(x(c))b=O(b);else return!1}}function ne(a){for(var b=Dd;;)if(a=J(a)){var c=N(a);c=b.g?b.g(c):b.call(null,c);if(x(c))return c;a=O(a)}else return null}
function oe(a,b){return new Md(null,function(){var c=J(b);if(c){if(qd(c)){for(var d=Zb(c),e=R(d),f=new Od(Array(e)),h=0;;)if(h<e){var k=function(){var l=D(d,h);return a.g?a.g(l):a.call(null,l)}();null!=k&&f.add(k);h+=1}else break;return Rd(f.chunk(),oe(a,$b(c)))}e=function(){var l=N(c);return a.g?a.g(l):a.call(null,l)}();return null==e?oe(a,xc(c)):Wc(e,oe(a,xc(c)))}return null},null)}function pe(a){this.state=a;this.ra=this.vc=this.meta=null;this.J=16386;this.o=6455296}g=pe.prototype;
g.equiv=function(a){return this.G(null,a)};g.G=function(a,b){return this===b};g.Ca=function(){return this.state};g.da=function(){return this.meta};g.Zb=function(a,b){for(var c=J(this.ra),d=null,e=0,f=0;;)if(f<e){var h=d.N(null,f),k=T(h,0,null);h=T(h,1,null);h.K?h.K(k,this,a,b):h.call(null,k,this,a,b);f+=1}else if(c=J(c))qd(c)?(d=Zb(c),c=$b(c),k=d,e=R(d),d=k):(d=N(c),k=T(d,0,null),h=T(d,1,null),h.K?h.K(k,this,a,b):h.call(null,k,this,a,b),c=O(c),d=null,e=0),f=0;else break};
g.Ib=function(a,b,c){this.ra=U.l(this.ra,b,c);return this};g.Jb=function(a,b){return this.ra=cd.h(this.ra,b)};g.T=function(){return ca(this)};function qe(a){return new pe(a)}function re(a,b){if(a instanceof pe){var c=a.vc;if(null!=c&&!x(c.g?c.g(b):c.call(null,b)))throw Error("Validator rejected reference state");c=a.state;a.state=b;null!=a.ra&&a.Zb(c,b);return b}return cc(a,b)}
var se=function se(a){switch(arguments.length){case 2:return se.h(arguments[0],arguments[1]);case 3:return se.l(arguments[0],arguments[1],arguments[2]);case 4:return se.K(arguments[0],arguments[1],arguments[2],arguments[3]);default:for(var c=[],d=arguments.length,e=0;;)if(e<d)c.push(arguments[e]),e+=1;else break;c=new K(c.slice(4),0,null);return se.C(arguments[0],arguments[1],arguments[2],arguments[3],c)}};
se.h=function(a,b){if(a instanceof pe){var c=a.state;b=b.g?b.g(c):b.call(null,c);a=re(a,b)}else a=dc(a,b);return a};se.l=function(a,b,c){if(a instanceof pe){var d=a.state;b=b.h?b.h(d,c):b.call(null,d,c);a=re(a,b)}else a=dc(a,b,c);return a};se.K=function(a,b,c,d){if(a instanceof pe){var e=a.state;b=b.l?b.l(e,c,d):b.call(null,e,c,d);a=re(a,b)}else a=dc(a,b,c,d);return a};se.C=function(a,b,c,d,e){return a instanceof pe?re(a,de(b,a.state,c,d,e)):dc(a,b,c,d,e)};
se.U=function(a){var b=N(a),c=O(a);a=N(c);var d=O(c);c=N(d);var e=O(d);d=N(e);e=O(e);return this.C(b,a,c,d,e)};se.S=4;function te(a){this.state=a;this.o=32768;this.J=0}te.prototype.Ca=function(){return this.state};
var ue=function ue(a){switch(arguments.length){case 1:return ue.g(arguments[0]);case 2:return ue.h(arguments[0],arguments[1]);case 3:return ue.l(arguments[0],arguments[1],arguments[2]);case 4:return ue.K(arguments[0],arguments[1],arguments[2],arguments[3]);default:for(var c=[],d=arguments.length,e=0;;)if(e<d)c.push(arguments[e]),e+=1;else break;c=new K(c.slice(4),0,null);return ue.C(arguments[0],arguments[1],arguments[2],arguments[3],c)}};
ue.g=function(a){return function(b){return function(){function c(k,l){l=a.g?a.g(l):a.call(null,l);return b.h?b.h(k,l):b.call(null,k,l)}function d(k){return b.g?b.g(k):b.call(null,k)}function e(){return b.I?b.I():b.call(null)}var f=null,h=function(){function k(m,n,p){var q=null;if(2<arguments.length){q=0;for(var r=Array(arguments.length-2);q<r.length;)r[q]=arguments[q+2],++q;q=new K(r,0,null)}return l.call(this,m,n,q)}function l(m,n,p){n=ce(a,n,p);return b.h?b.h(m,n):b.call(null,m,n)}k.S=2;k.U=function(m){var n=
N(m);m=O(m);var p=N(m);m=xc(m);return l(n,p,m)};k.C=l;return k}();f=function(k,l,m){switch(arguments.length){case 0:return e.call(this);case 1:return d.call(this,k);case 2:return c.call(this,k,l);default:var n=null;if(2<arguments.length){n=0;for(var p=Array(arguments.length-2);n<p.length;)p[n]=arguments[n+2],++n;n=new K(p,0,null)}return h.C(k,l,n)}throw Error("Invalid arity: "+arguments.length);};f.S=2;f.U=h.U;f.I=e;f.g=d;f.h=c;f.C=h.C;return f}()}};
ue.h=function(a,b){return new Md(null,function(){var c=J(b);if(c){if(qd(c)){for(var d=Zb(c),e=R(d),f=new Od(Array(e)),h=0;;)if(h<e)Sd(f,function(){var k=D(d,h);return a.g?a.g(k):a.call(null,k)}()),h+=1;else break;return Rd(f.chunk(),ue.h(a,$b(c)))}return Wc(function(){var k=N(c);return a.g?a.g(k):a.call(null,k)}(),ue.h(a,xc(c)))}return null},null)};
ue.l=function(a,b,c){return new Md(null,function(){var d=J(b),e=J(c);if(d&&e){var f=N(d);var h=N(e);f=a.h?a.h(f,h):a.call(null,f,h);d=Wc(f,ue.l(a,xc(d),xc(e)))}else d=null;return d},null)};ue.K=function(a,b,c,d){return new Md(null,function(){var e=J(b),f=J(c),h=J(d);if(e&&f&&h){var k=N(e);var l=N(f),m=N(h);k=a.l?a.l(k,l,m):a.call(null,k,l,m);e=Wc(k,ue.K(a,xc(e),xc(f),xc(h)))}else e=null;return e},null)};
ue.C=function(a,b,c,d,e){return ue.h(function(f){return be(a,f)},function k(h){return new Md(null,function(){var l=ue.h(J,h);return me(Dd,l)?Wc(ue.h(N,l),k(ue.h(xc,l))):null},null)}(Yc.C(e,d,Xc([c,b]))))};ue.U=function(a){var b=N(a),c=O(a);a=N(c);var d=O(c);c=N(d);var e=O(d);d=N(e);e=O(e);return this.C(b,a,c,d,e)};ue.S=4;function ve(a,b){return new Md(null,function(){a:for(var c=a,d=b;;)if(d=J(d),0<c&&d)--c,d=xc(d);else break a;return d},null)}
function we(a){return ue.l(function(b){return b},a,ve(2,a))}var xe=function xe(a){switch(arguments.length){case 0:return xe.I();case 1:return xe.g(arguments[0]);case 2:return xe.h(arguments[0],arguments[1]);case 3:return xe.l(arguments[0],arguments[1],arguments[2]);default:throw Error(["Invalid arity: ",B.g(arguments.length)].join(""));}};xe.I=function(){return Zc};xe.g=function(a){return a};
xe.h=function(a,b){return null!=a?null!=a&&(a.J&4||u===a.Sc)?Ab(Vb(Ta(Ub,Tb(a),b)),hd(a)):Ta(cb,a,b):Ta(Yc,a,b)};xe.l=function(a,b,c){return null!=a&&(a.J&4||u===a.Sc)?Ab(Vb(Ed(b,Vd,Tb(a),c)),hd(a)):Ed(b,Yc,a,c)};xe.S=3;
var ye=function ye(a,b,c){var e=J(b);b=N(e);var f=O(e);if(f){e=U.l;var h=H.h(a,b);c=ye.l?ye.l(h,f,c):ye.call(null,h,f,c);a=e.call(U,a,b,c)}else a=U.l(a,b,c);return a},ze=function ze(a){switch(arguments.length){case 3:return ze.l(arguments[0],arguments[1],arguments[2]);case 4:return ze.K(arguments[0],arguments[1],arguments[2],arguments[3]);case 5:return ze.P(arguments[0],arguments[1],arguments[2],arguments[3],arguments[4]);case 6:return ze.xa(arguments[0],arguments[1],arguments[2],arguments[3],arguments[4],
arguments[5]);default:for(var c=[],d=arguments.length,e=0;;)if(e<d)c.push(arguments[e]),e+=1;else break;c=new K(c.slice(6),0,null);return ze.C(arguments[0],arguments[1],arguments[2],arguments[3],arguments[4],arguments[5],c)}};ze.l=function(a,b,c){var d=J(b);b=N(d);if(d=O(d))a=U.l(a,b,ze.l(H.h(a,b),d,c));else{d=U.l;var e=H.h(a,b);c=c.g?c.g(e):c.call(null,e);a=d.call(U,a,b,c)}return a};
ze.K=function(a,b,c,d){var e=J(b);b=N(e);if(e=O(e))a=U.l(a,b,ze.K(H.h(a,b),e,c,d));else{e=U.l;var f=H.h(a,b);c=c.h?c.h(f,d):c.call(null,f,d);a=e.call(U,a,b,c)}return a};ze.P=function(a,b,c,d,e){var f=J(b);b=N(f);if(f=O(f))a=U.l(a,b,ze.P(H.h(a,b),f,c,d,e));else{f=U.l;var h=H.h(a,b);c=c.l?c.l(h,d,e):c.call(null,h,d,e);a=f.call(U,a,b,c)}return a};
ze.xa=function(a,b,c,d,e,f){var h=J(b);b=N(h);if(h=O(h))a=U.l(a,b,ze.xa(H.h(a,b),h,c,d,e,f));else{h=U.l;var k=H.h(a,b);c=c.K?c.K(k,d,e,f):c.call(null,k,d,e,f);a=h.call(U,a,b,c)}return a};ze.C=function(a,b,c,d,e,f,h){var k=J(b);b=N(k);return(k=O(k))?U.l(a,b,ee(ze,H.h(a,b),k,c,d,Xc([e,f,h]))):U.l(a,b,ee(c,H.h(a,b),d,e,f,Xc([h])))};ze.U=function(a){var b=N(a),c=O(a);a=N(c);var d=O(c);c=N(d);var e=O(d);d=N(e);var f=O(e);e=N(f);var h=O(f);f=N(h);h=O(h);return this.C(b,a,c,d,e,f,h)};ze.S=6;
function Ae(a,b){this.aa=a;this.j=b}function Be(a){return new Ae(a,[null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null])}function Ce(a){return new Ae(a.aa,Ra(a.j))}function De(a){a=a.s;return 32>a?0:a-1>>>5<<5}function Ee(a,b,c){for(;;){if(0===b)return c;var d=Be(a);d.j[0]=c;c=d;b-=5}}
var Fe=function Fe(a,b,c,d){var f=Ce(c),h=a.s-1>>>b&31;5===b?f.j[h]=d:(c=c.j[h],null!=c?(b-=5,a=Fe.K?Fe.K(a,b,c,d):Fe.call(null,a,b,c,d)):a=Ee(null,b-5,d),f.j[h]=a);return f};function Ge(a,b){throw Error(["No item ",B.g(a)," in vector of length ",B.g(b)].join(""));}function He(a,b){if(b>=De(a))return a.tail;var c=a.root;for(a=a.shift;;)if(0<a){var d=a-5;c=c.j[b>>>a&31];a=d}else return c.j}function Ie(a,b){return 0<=b&&b<a.s?He(a,b):Ge(b,a.s)}
var Je=function Je(a,b,c,d,e){var h=Ce(c);if(0===b)h.j[d&31]=e;else{var k=d>>>b&31;b-=5;c=c.j[k];a=Je.P?Je.P(a,b,c,d,e):Je.call(null,a,b,c,d,e);h.j[k]=a}return h},Ke=function Ke(a,b,c){var e=a.s-2>>>b&31;if(5<b){b-=5;var f=c.j[e];a=Ke.l?Ke.l(a,b,f):Ke.call(null,a,b,f);if(null==a&&0===e)return null;c=Ce(c);c.j[e]=a;return c}if(0===e)return null;c=Ce(c);c.j[e]=null;return c};function Le(a,b,c,d,e,f){this.v=a;this.base=b;this.j=c;this.ma=d;this.start=e;this.end=f}
Le.prototype.hasNext=function(){return this.v<this.end};Le.prototype.next=function(){32===this.v-this.base&&(this.j=He(this.ma,this.v),this.base+=32);var a=this.j[this.v&31];this.v+=1;return a};function Me(a,b,c){return new Le(b,b-b%32,b<R(a)?He(a,b):null,a,b,c)}function Ne(a,b,c,d){return c<d?Oe(a,b,Sc(a,c),c+1,d):b.I?b.I():b.call(null)}
function Oe(a,b,c,d,e){var f=c;c=d;for(d=He(a,d);;)if(c<e){var h=c&31;d=0===h?He(a,c):d;h=d[h];f=b.h?b.h(f,h):b.call(null,f,h);if(Jc(f))return G(f);c+=1}else return f}function V(a,b,c,d,e,f){this.meta=a;this.s=b;this.shift=c;this.root=d;this.tail=e;this.H=f;this.o=167666463;this.J=139268}g=V.prototype;g.lb=function(a,b){return 0<=b&&b<this.s?new Pe(b,He(this,b)[b&31]):null};g.toString=function(){return ic(this)};g.equiv=function(a){return this.G(null,a)};
g.indexOf=function(){var a=null;a=function(b,c){switch(arguments.length){case 1:return Q(this,b,0);case 2:return Q(this,b,c)}throw Error("Invalid arity: "+arguments.length);};a.g=function(b){return Q(this,b,0)};a.h=function(b,c){return Q(this,b,c)};return a}();
g.lastIndexOf=function(){function a(c){return S(this,c,R(this))}var b=null;b=function(c,d){switch(arguments.length){case 1:return a.call(this,c);case 2:return S(this,c,d)}throw Error("Invalid arity: "+arguments.length);};b.g=a;b.h=function(c,d){return S(this,c,d)};return b}();g.na=function(a,b){return this.O(null,b,null)};g.O=function(a,b,c){return"number"===typeof b?this.ka(null,b,c):c};
g.mb=function(a,b,c){a=0;for(var d=c;;)if(a<this.s){var e=He(this,a);c=e.length;a:for(var f=0;;)if(f<c){var h=f+a,k=e[f];d=b.l?b.l(d,h,k):b.call(null,d,h,k);if(Jc(d)){e=d;break a}f+=1}else{e=d;break a}if(Jc(e))return G(e);a+=c;d=e}else return d};g.ic=u;g.N=function(a,b){return Ie(this,b)[b&31]};g.ka=function(a,b,c){return 0<=b&&b<this.s?He(this,b)[b&31]:c};
g.fb=function(a,b,c){if(0<=b&&b<this.s)return De(this)<=b?(a=Ra(this.tail),a[b&31]=c,new V(this.meta,this.s,this.shift,this.root,a,null)):new V(this.meta,this.s,this.shift,Je(this,this.shift,this.root,b,c),this.tail,null);if(b===this.s)return this.ia(null,c);throw Error(["Index ",B.g(b)," out of bounds  [0,",B.g(this.s),"]"].join(""));};g.Aa=function(){return Me(this,0,this.s)};g.da=function(){return this.meta};g.Y=function(){return this.s};g.qb=function(){return 0<this.s?this.N(null,this.s-1):null};
g.rb=function(){if(0===this.s)throw Error("Can't pop empty vector");if(1===this.s)return Ab(Zc,this.meta);if(1<this.s-De(this))return new V(this.meta,this.s-1,this.shift,this.root,this.tail.slice(0,-1),null);var a=He(this,this.s-2),b=Ke(this,this.shift,this.root);b=null==b?X:b;var c=this.s-1;return 5<this.shift&&null==b.j[1]?new V(this.meta,c,this.shift-5,b.j[0],a,null):new V(this.meta,c,this.shift,b,a,null)};g.T=function(){var a=this.H;return null!=a?a:this.H=a=Dc(this)};
g.G=function(a,b){if(b instanceof V)if(this.s===R(b))for(a=this.Aa(null),b=b.Aa(null);;)if(a.hasNext()){var c=a.next(),d=b.next();if(!P.h(c,d))return!1}else return!0;else return!1;else return Vc(this,b)};g.kb=function(){return new Qe(this.s,this.shift,Re.g?Re.g(this.root):Re.call(null,this.root),Se.g?Se.g(this.tail):Se.call(null,this.tail))};g.ha=function(){return Ab(Zc,this.meta)};g.oa=function(a,b){return Ne(this,b,0,this.s)};
g.pa=function(a,b,c){a=0;for(var d=c;;)if(a<this.s){var e=He(this,a);c=e.length;a:for(var f=0;;)if(f<c){var h=e[f];d=b.h?b.h(d,h):b.call(null,d,h);if(Jc(d)){e=d;break a}f+=1}else{e=d;break a}if(Jc(e))return G(e);a+=c;d=e}else return d};g.Sa=function(a,b,c){if("number"===typeof b)return this.fb(null,b,c);throw Error("Vector's key for assoc must be a number.");};g.Ra=function(a,b){return Wg(b)?0<=b&&b<this.s:!1};
g.Z=function(){if(0===this.s)return null;if(32>=this.s)return new K(this.tail,0,null);a:{var a=this.root;for(var b=this.shift;;)if(0<b)b-=5,a=a.j[0];else{a=a.j;break a}}return Te?Te(this,a,0,0):Ue.call(null,this,a,0,0)};g.ga=function(a,b){return b===this.meta?this:new V(b,this.s,this.shift,this.root,this.tail,this.H)};
g.ia=function(a,b){if(32>this.s-De(this)){a=this.tail.length;for(var c=Array(a+1),d=0;;)if(d<a)c[d]=this.tail[d],d+=1;else break;c[a]=b;return new V(this.meta,this.s+1,this.shift,this.root,c,null)}a=(c=this.s>>>5>1<<this.shift)?this.shift+5:this.shift;c?(c=Be(null),c.j[0]=this.root,d=Ee(null,this.shift,new Ae(null,this.tail)),c.j[1]=d):c=Fe(this,this.shift,this.root,new Ae(null,this.tail));return new V(this.meta,this.s+1,a,c,[b],null)};
g.call=function(a){switch(arguments.length-1){case 1:return this.g(arguments[1]);case 2:return this.h(arguments[1],arguments[2]);default:throw Error(["Invalid arity: ",B.g(arguments.length-1)].join(""));}};g.apply=function(a,b){return this.call.apply(this,[this].concat(Ra(b)))};g.g=function(a){return this.N(null,a)};g.h=function(a,b){return this.ka(null,a,b)};
var X=new Ae(null,[null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null]),Zc=new V(null,0,5,X,[],Ec);function Ve(a,b){var c=a.length;a=b?a:Ra(a);if(32>c)return new V(null,c,5,X,a,null);var d=a.slice(0,32);b=32;for(var e=(new V(null,32,5,X,d,null)).kb(null);;)if(b<c)d=b+1,e=Vd.h(e,a[b]),b=d;else return Vb(e)}V.prototype[Qa]=function(){return Ac(this)};
function We(a){return x(Xe.g?Xe.g(a):Xe.call(null,a))?new V(null,2,5,X,[Ye.g?Ye.g(a):Ye.call(null,a),Ze.g?Ze.g(a):Ze.call(null,a)],null):pd(a)?gd(a,null):Na(a)?Ve(a,!0):Vb(Ta(Ub,Tb(Zc),a))}var $e=function $e(a){for(var c=[],d=arguments.length,e=0;;)if(e<d)c.push(arguments[e]),e+=1;else break;c=0<c.length?new K(c.slice(0),0,null):null;return $e.C(c)};$e.C=function(a){return a instanceof K&&0===a.v?Ve(a.j,!Na(a.j)):We(a)};$e.S=0;$e.U=function(a){return this.C(J(a))};
function af(a,b,c,d,e){this.Da=a;this.node=b;this.v=c;this.off=d;this.meta=e;this.H=null;this.o=32375020;this.J=1536}g=af.prototype;g.toString=function(){return ic(this)};g.equiv=function(a){return this.G(null,a)};g.indexOf=function(){var a=null;a=function(b,c){switch(arguments.length){case 1:return Q(this,b,0);case 2:return Q(this,b,c)}throw Error("Invalid arity: "+arguments.length);};a.g=function(b){return Q(this,b,0)};a.h=function(b,c){return Q(this,b,c)};return a}();
g.lastIndexOf=function(){function a(c){return S(this,c,R(this))}var b=null;b=function(c,d){switch(arguments.length){case 1:return a.call(this,c);case 2:return S(this,c,d)}throw Error("Invalid arity: "+arguments.length);};b.g=a;b.h=function(c,d){return S(this,c,d)};return b}();g.da=function(){return this.meta};g.sa=function(){if(this.off+1<this.node.length){var a=this.Da;var b=this.node,c=this.v,d=this.off+1;a=Te?Te(a,b,c,d):Ue.call(null,a,b,c,d);return null==a?null:a}return this.zc()};
g.T=function(){var a=this.H;return null!=a?a:this.H=a=Dc(this)};g.G=function(a,b){return Vc(this,b)};g.ha=function(){return yc};g.oa=function(a,b){return Ne(this.Da,b,this.v+this.off,R(this.Da))};g.pa=function(a,b,c){return Oe(this.Da,b,c,this.v+this.off,R(this.Da))};g.ta=function(){return this.node[this.off]};g.ua=function(){if(this.off+1<this.node.length){var a=this.Da;var b=this.node,c=this.v,d=this.off+1;a=Te?Te(a,b,c,d):Ue.call(null,a,b,c,d);return null==a?yc:a}return this.Tb(null)};g.Z=function(){return this};
g.jc=function(){var a=this.node;return new Pd(a,this.off,a.length)};g.Tb=function(){var a=this.v+this.node.length;if(a<Za(this.Da)){var b=this.Da,c=He(this.Da,a);return Te?Te(b,c,a,0):Ue.call(null,b,c,a,0)}return yc};g.ga=function(a,b){return b===this.meta?this:bf?bf(this.Da,this.node,this.v,this.off,b):Ue.call(null,this.Da,this.node,this.v,this.off,b)};g.ia=function(a,b){return Wc(b,this)};
g.zc=function(){var a=this.v+this.node.length;if(a<Za(this.Da)){var b=this.Da,c=He(this.Da,a);return Te?Te(b,c,a,0):Ue.call(null,b,c,a,0)}return null};af.prototype[Qa]=function(){return Ac(this)};
function Ue(a){switch(arguments.length){case 3:var b=arguments[0],c=arguments[1],d=arguments[2];return new af(b,Ie(b,c),c,d,null);case 4:return Te(arguments[0],arguments[1],arguments[2],arguments[3]);case 5:return bf(arguments[0],arguments[1],arguments[2],arguments[3],arguments[4]);default:throw Error(["Invalid arity: ",B.g(arguments.length)].join(""));}}function Te(a,b,c,d){return new af(a,b,c,d,null)}function bf(a,b,c,d,e){return new af(a,b,c,d,e)}
function cf(a,b,c,d,e){this.meta=a;this.ma=b;this.start=c;this.end=d;this.H=e;this.o=167666463;this.J=139264}g=cf.prototype;g.lb=function(a,b){if(0>b)return null;a=this.start+b;return a<this.end?new Pe(b,jb(this.ma,a)):null};g.toString=function(){return ic(this)};g.equiv=function(a){return this.G(null,a)};
g.indexOf=function(){var a=null;a=function(b,c){switch(arguments.length){case 1:return Q(this,b,0);case 2:return Q(this,b,c)}throw Error("Invalid arity: "+arguments.length);};a.g=function(b){return Q(this,b,0)};a.h=function(b,c){return Q(this,b,c)};return a}();
g.lastIndexOf=function(){function a(c){return S(this,c,R(this))}var b=null;b=function(c,d){switch(arguments.length){case 1:return a.call(this,c);case 2:return S(this,c,d)}throw Error("Invalid arity: "+arguments.length);};b.g=a;b.h=function(c,d){return S(this,c,d)};return b}();g.na=function(a,b){return this.O(null,b,null)};g.O=function(a,b,c){return"number"===typeof b?this.ka(null,b,c):c};
g.mb=function(a,b,c){a=this.start;for(var d=0;;)if(a<this.end){var e=d,f=D(this.ma,a);c=b.l?b.l(c,e,f):b.call(null,c,e,f);if(Jc(c))return G(c);d+=1;a+=1}else return c};g.N=function(a,b){return 0>b||this.end<=this.start+b?Ge(b,this.end-this.start):D(this.ma,this.start+b)};g.ka=function(a,b,c){return 0>b||this.end<=this.start+b?c:D(this.ma,this.start+b,c)};
g.fb=function(a,b,c){a=this.start+b;if(0>b||this.end+1<=a)throw Error(["Index ",B.g(b)," out of bounds [0,",B.g(this.Y(null)),"]"].join(""));b=this.meta;c=U.l(this.ma,a,c);var d=this.start,e=this.end;a+=1;a=e>a?e:a;return df.P?df.P(b,c,d,a,null):df.call(null,b,c,d,a,null)};g.Aa=function(){return null!=this.ma&&u===this.ma.ic?Me(this.ma,this.start,this.end):new le(this)};g.da=function(){return this.meta};g.Y=function(){return this.end-this.start};
g.qb=function(){return this.start===this.end?null:D(this.ma,this.end-1)};g.rb=function(){if(this.start===this.end)throw Error("Can't pop empty vector");var a=this.meta,b=this.ma,c=this.start,d=this.end-1;return df.P?df.P(a,b,c,d,null):df.call(null,a,b,c,d,null)};g.T=function(){var a=this.H;return null!=a?a:this.H=a=Dc(this)};g.G=function(a,b){return Vc(this,b)};g.ha=function(){return Ab(Zc,this.meta)};
g.oa=function(a,b){return null!=this.ma&&u===this.ma.ic?Ne(this.ma,b,this.start,this.end):Lc(this,b)};g.pa=function(a,b,c){return null!=this.ma&&u===this.ma.ic?Oe(this.ma,b,c,this.start,this.end):Mc(this,b,c)};g.Sa=function(a,b,c){if("number"===typeof b)return this.fb(null,b,c);throw Error("Subvec's key for assoc must be a number.");};g.Ra=function(a,b){return Wg(b)?0<=b&&b<this.end-this.start:!1};
g.Z=function(){var a=this;return function d(c){return c===a.end?null:Wc(D(a.ma,c),new Md(null,function(){return d(c+1)},null))}(a.start)};g.ga=function(a,b){return b===this.meta?this:df.P?df.P(b,this.ma,this.start,this.end,this.H):df.call(null,b,this.ma,this.start,this.end,this.H)};g.ia=function(a,b){a=this.meta;b=wb(this.ma,this.end,b);var c=this.start,d=this.end+1;return df.P?df.P(a,b,c,d,null):df.call(null,a,b,c,d,null)};
g.call=function(a){switch(arguments.length-1){case 1:return this.g(arguments[1]);case 2:return this.h(arguments[1],arguments[2]);default:throw Error(["Invalid arity: ",B.g(arguments.length-1)].join(""));}};g.apply=function(a,b){return this.call.apply(this,[this].concat(Ra(b)))};g.g=function(a){return this.N(null,a)};g.h=function(a,b){return this.ka(null,a,b)};cf.prototype[Qa]=function(){return Ac(this)};
function df(a,b,c,d,e){for(;;)if(b instanceof cf)c=b.start+c,d=b.start+d,b=b.ma;else{if(!pd(b))throw Error("v must satisfy IVector");if(0>c||d<c||d>R(b))throw Error("Index out of bounds");return new cf(a,b,c,d,e)}}function ef(a,b){return a===b.aa?b:new Ae(a,Ra(b.j))}function Re(a){return new Ae({},Ra(a.j))}
function Se(a){var b=[null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null];rd(a,0,b,0,a.length);return b}var ff=function ff(a,b,c,d){c=ef(a.root.aa,c);var f=a.s-1>>>b&31;if(5===b)a=d;else{var h=c.j[f];null!=h?(b-=5,a=ff.K?ff.K(a,b,h,d):ff.call(null,a,b,h,d)):a=Ee(a.root.aa,b-5,d)}c.j[f]=a;return c};function Qe(a,b,c,d){this.s=a;this.shift=b;this.root=c;this.tail=d;this.J=88;this.o=275}g=Qe.prototype;
g.eb=function(a,b){if(this.root.aa){if(32>this.s-De(this))this.tail[this.s&31]=b;else{a=new Ae(this.root.aa,this.tail);var c=[null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null];c[0]=b;this.tail=c;this.s>>>5>1<<this.shift?(b=[null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null],c=this.shift+
5,b[0]=this.root,b[1]=Ee(this.root.aa,this.shift,a),this.root=new Ae(this.root.aa,b),this.shift=c):this.root=ff(this,this.shift,this.root,a)}this.s+=1;return this}throw Error("conj! after persistent!");};g.sb=function(){if(this.root.aa){this.root.aa=null;var a=this.s-De(this),b=Array(a);rd(this.tail,0,b,0,a);return new V(null,this.s,this.shift,this.root,b,null)}throw Error("persistent! called twice");};
g.cb=function(a,b,c){if("number"===typeof b)return this.Hb(null,b,c);throw Error("TransientVector's key for assoc! must be a number.");};
g.Hb=function(a,b,c){var d=this;if(d.root.aa){if(0<=b&&b<d.s)return De(this)<=b?d.tail[b&31]=c:(a=function k(f,h){h=ef(d.root.aa,h);if(0===f)h.j[b&31]=c;else{var l=b>>>f&31;f=k(f-5,h.j[l]);h.j[l]=f}return h}(d.shift,d.root),d.root=a),this;if(b===d.s)return this.eb(null,c);throw Error(["Index ",B.g(b)," out of bounds for TransientVector of length",B.g(d.s)].join(""));}throw Error("assoc! after persistent!");};g.Y=function(){if(this.root.aa)return this.s;throw Error("count after persistent!");};
g.N=function(a,b){if(this.root.aa)return Ie(this,b)[b&31];throw Error("nth after persistent!");};g.ka=function(a,b,c){return 0<=b&&b<this.s?this.N(null,b):c};g.na=function(a,b){return this.O(null,b,null)};g.O=function(a,b,c){if(this.root.aa)return"number"===typeof b?this.ka(null,b,c):c;throw Error("lookup after persistent!");};
g.call=function(a){switch(arguments.length-1){case 1:return this.g(arguments[1]);case 2:return this.h(arguments[1],arguments[2]);default:throw Error(["Invalid arity: ",B.g(arguments.length-1)].join(""));}};g.apply=function(a,b){return this.call.apply(this,[this].concat(Ra(b)))};g.g=function(a){return this.na(null,a)};g.h=function(a,b){return this.O(null,a,b)};function gf(){this.o=2097152;this.J=0}gf.prototype.equiv=function(a){return this.G(null,a)};gf.prototype.G=function(){return!1};var hf=new gf;
function jf(a,b){return td(nd(b)&&!od(b)?R(a)===R(b)?(null!=a?a.o&1048576||u===a.wd||(a.o?0:y(Eb,a)):y(Eb,a))?Cd(function(c,d,e){return P.h(H.l(b,d,hf),e)?!0:new Ic},!0,a):me(function(c){return P.h(H.l(b,N(c),hf),N(O(c)))},a):null:null)}function kf(a){this.M=a}kf.prototype.next=function(){if(null!=this.M){var a=N(this.M),b=T(a,0,null);a=T(a,1,null);this.M=O(this.M);return{value:[b,a],done:!1}}return{value:null,done:!0}};function lf(a){this.M=a}
lf.prototype.next=function(){if(null!=this.M){var a=N(this.M);this.M=O(this.M);return{value:[a,a],done:!1}}return{value:null,done:!0}};
function bd(a,b){if(b instanceof I)a:{var c=a.length;b=b.Ba;for(var d=0;;){if(c<=d){a=-1;break a}if(a[d]instanceof I&&b===a[d].Ba){a=d;break a}d+=2}}else if("string"===typeof b||"number"===typeof b)a:for(c=a.length,d=0;;){if(c<=d){a=-1;break a}if(b===a[d]){a=d;break a}d+=2}else if(b instanceof tc)a:for(c=a.length,b=b.str,d=0;;){if(c<=d){a=-1;break a}if(a[d]instanceof tc&&b===a[d].str){a=d;break a}d+=2}else if(null==b)a:for(b=a.length,c=0;;){if(b<=c){a=-1;break a}if(null==a[c]){a=c;break a}c+=2}else a:for(c=
a.length,d=0;;){if(c<=d){a=-1;break a}if(P.h(b,a[d])){a=d;break a}d+=2}return a}function Pe(a,b){this.key=a;this.val=b;this.H=null;this.o=166619935;this.J=0}g=Pe.prototype;g.lb=function(a,b){switch(b){case 0:return new Pe(0,this.key);case 1:return new Pe(1,this.val);default:return null}};
g.indexOf=function(){var a=null;a=function(b,c){switch(arguments.length){case 1:return Q(this,b,0);case 2:return Q(this,b,c)}throw Error("Invalid arity: "+arguments.length);};a.g=function(b){return Q(this,b,0)};a.h=function(b,c){return Q(this,b,c)};return a}();
g.lastIndexOf=function(){function a(c){return S(this,c,R(this))}var b=null;b=function(c,d){switch(arguments.length){case 1:return a.call(this,c);case 2:return S(this,c,d)}throw Error("Invalid arity: "+arguments.length);};b.g=a;b.h=function(c,d){return S(this,c,d)};return b}();g.na=function(a,b){return this.ka(null,b,null)};g.O=function(a,b,c){return this.ka(null,b,c)};g.N=function(a,b){if(0===b)return this.key;if(1===b)return this.val;throw Error("Index out of bounds");};
g.ka=function(a,b,c){return 0===b?this.key:1===b?this.val:c};g.fb=function(a,b,c){return(new V(null,2,5,X,[this.key,this.val],null)).fb(null,b,c)};g.da=function(){return null};g.Y=function(){return 2};g.Yc=function(){return this.key};g.Zc=function(){return this.val};g.qb=function(){return this.val};g.rb=function(){return new V(null,1,5,X,[this.key],null)};g.T=function(){var a=this.H;return null!=a?a:this.H=a=Dc(this)};g.G=function(a,b){return Vc(this,b)};g.ha=function(){return null};
g.oa=function(a,b){return Lc(this,b)};g.pa=function(a,b,c){return Mc(this,b,c)};g.Sa=function(a,b,c){return U.l(new V(null,2,5,X,[this.key,this.val],null),b,c)};g.Ra=function(a,b){return 0===b||1===b};g.Z=function(){return new K([this.key,this.val],0,null)};g.ga=function(a,b){return gd(new V(null,2,5,X,[this.key,this.val],null),b)};g.ia=function(a,b){return new V(null,3,5,X,[this.key,this.val,b],null)};
g.call=function(a){switch(arguments.length-1){case 1:return this.g(arguments[1]);case 2:return this.h(arguments[1],arguments[2]);default:throw Error(["Invalid arity: ",B.g(arguments.length-1)].join(""));}};g.apply=function(a,b){return this.call.apply(this,[this].concat(Ra(b)))};g.g=function(a){return this.N(null,a)};g.h=function(a,b){return this.ka(null,a,b)};function Xe(a){return null!=a?a.o&2048||u===a.zd?!0:!1:!1}function mf(a,b,c){this.j=a;this.v=b;this._meta=c;this.o=32374990;this.J=0}g=mf.prototype;
g.toString=function(){return ic(this)};g.equiv=function(a){return this.G(null,a)};g.indexOf=function(){var a=null;a=function(b,c){switch(arguments.length){case 1:return Q(this,b,0);case 2:return Q(this,b,c)}throw Error("Invalid arity: "+arguments.length);};a.g=function(b){return Q(this,b,0)};a.h=function(b,c){return Q(this,b,c)};return a}();
g.lastIndexOf=function(){function a(c){return S(this,c,R(this))}var b=null;b=function(c,d){switch(arguments.length){case 1:return a.call(this,c);case 2:return S(this,c,d)}throw Error("Invalid arity: "+arguments.length);};b.g=a;b.h=function(c,d){return S(this,c,d)};return b}();g.da=function(){return this._meta};g.sa=function(){return this.v<this.j.length-2?new mf(this.j,this.v+2,null):null};g.Y=function(){return(this.j.length-this.v)/2};g.T=function(){return Dc(this)};
g.G=function(a,b){return Vc(this,b)};g.ha=function(){return yc};g.oa=function(a,b){return xd(b,this)};g.pa=function(a,b,c){return yd(b,c,this)};g.ta=function(){return new Pe(this.j[this.v],this.j[this.v+1])};g.ua=function(){return this.v<this.j.length-2?new mf(this.j,this.v+2,null):yc};g.Z=function(){return this};g.ga=function(a,b){return b===this._meta?this:new mf(this.j,this.v,b)};g.ia=function(a,b){return Wc(b,this)};mf.prototype[Qa]=function(){return Ac(this)};
function nf(a,b){this.j=a;this.v=0;this.s=b}nf.prototype.hasNext=function(){return this.v<this.s};nf.prototype.next=function(){var a=new Pe(this.j[this.v],this.j[this.v+1]);this.v+=2;return a};function v(a,b,c,d){this.meta=a;this.s=b;this.j=c;this.H=d;this.o=16647951;this.J=139268}g=v.prototype;g.lb=function(a,b){a=bd(this.j,b);return-1===a?null:new Pe(this.j[a],this.j[a+1])};g.toString=function(){return ic(this)};g.equiv=function(a){return this.G(null,a)};
g.keys=function(){return Ac(of.g?of.g(this):of.call(null,this))};g.entries=function(){return new kf(J(J(this)))};g.values=function(){return Ac(pf.g?pf.g(this):pf.call(null,this))};g.has=function(a){return vd(this,a)};g.get=function(a,b){return this.O(null,a,b)};
g.forEach=function(a){for(var b=J(this),c=null,d=0,e=0;;)if(e<d){var f=c.N(null,e),h=T(f,0,null);f=T(f,1,null);a.h?a.h(f,h):a.call(null,f,h);e+=1}else if(b=J(b))qd(b)?(c=Zb(b),b=$b(b),h=c,d=R(c),c=h):(c=N(b),h=T(c,0,null),f=T(c,1,null),a.h?a.h(f,h):a.call(null,f,h),b=O(b),c=null,d=0),e=0;else return null};g.na=function(a,b){return this.O(null,b,null)};g.O=function(a,b,c){a=bd(this.j,b);return-1===a?c:this.j[a+1]};
g.mb=function(a,b,c){a=this.j.length;for(var d=0;;)if(d<a){var e=this.j[d],f=this.j[d+1];c=b.l?b.l(c,e,f):b.call(null,c,e,f);if(Jc(c))return G(c);d+=2}else return c};g.Aa=function(){return new nf(this.j,2*this.s)};g.da=function(){return this.meta};g.Y=function(){return this.s};g.T=function(){var a=this.H;return null!=a?a:this.H=a=Fc(this)};
g.G=function(a,b){if(nd(b)&&!od(b))if(a=this.j.length,this.s===b.Y(null))for(var c=0;;)if(c<a){var d=b.O(null,this.j[c],sd);if(d!==sd)if(P.h(this.j[c+1],d))c+=2;else return!1;else return!1}else return!0;else return!1;else return!1};g.kb=function(){return new qf(this.j.length,Ra(this.j))};g.ha=function(){return Ab(ie,this.meta)};g.oa=function(a,b){return zd(this,b)};g.pa=function(a,b,c){return Ad(this,b,c)};
g.Ub=function(a,b){if(0<=bd(this.j,b)){a=this.j.length;var c=a-2;if(0===c)return this.ha(null);c=Array(c);for(var d=0,e=0;;){if(d>=a)return new v(this.meta,this.s-1,c,null);P.h(b,this.j[d])?d+=2:(c[e]=this.j[d],c[e+1]=this.j[d+1],e+=2,d+=2)}}else return this};
g.Sa=function(a,b,c){a=bd(this.j,b);if(-1===a){if(this.s<rf){a=this.j;for(var d=a.length,e=Array(d+2),f=0;;)if(f<d)e[f]=a[f],f+=1;else break;e[d]=b;e[d+1]=c;return new v(this.meta,this.s+1,e,null)}return Ab(lb(xe.h(sf,this),b,c),this.meta)}if(c===this.j[a+1])return this;b=Ra(this.j);b[a+1]=c;return new v(this.meta,this.s,b,null)};g.Ra=function(a,b){return-1!==bd(this.j,b)};g.Z=function(){var a=this.j;return 0<=a.length-2?new mf(a,0,null):null};
g.ga=function(a,b){return b===this.meta?this:new v(b,this.s,this.j,this.H)};g.ia=function(a,b){if(pd(b))return this.Sa(null,D(b,0),D(b,1));a=this;for(b=J(b);;){if(null==b)return a;var c=N(b);if(pd(c))a=lb(a,D(c,0),D(c,1)),b=O(b);else throw Error("conj on a map takes map entries or seqables of map entries");}};
g.call=function(a){switch(arguments.length-1){case 1:return this.g(arguments[1]);case 2:return this.h(arguments[1],arguments[2]);default:throw Error(["Invalid arity: ",B.g(arguments.length-1)].join(""));}};g.apply=function(a,b){return this.call.apply(this,[this].concat(Ra(b)))};g.g=function(a){return this.na(null,a)};g.h=function(a,b){return this.O(null,a,b)};var ie=new v(null,0,[],Gc),rf=8;
function tf(a,b,c){a=b?a:Ra(a);if(!c){c=[];for(b=0;;)if(b<a.length){var d=a[b],e=a[b+1];-1===bd(c,d)&&(c.push(d),c.push(e));b+=2}else break;a=c}return new v(null,a.length/2,a,null)}v.prototype[Qa]=function(){return Ac(this)};function qf(a,b){this.qa={};this.len=a;this.j=b;this.o=259;this.J=56}g=qf.prototype;g.Y=function(){if(this.qa)return Fd(this.len);throw Error("count after persistent!");};g.na=function(a,b){return this.O(null,b,null)};
g.O=function(a,b,c){if(this.qa)return a=bd(this.j,b),-1===a?c:this.j[a+1];throw Error("lookup after persistent!");};g.eb=function(a,b){if(this.qa){if(Xe(b))return this.cb(null,Ye.g?Ye.g(b):Ye.call(null,b),Ze.g?Ze.g(b):Ze.call(null,b));if(pd(b))return this.cb(null,b.g?b.g(0):b.call(null,0),b.g?b.g(1):b.call(null,1));a=J(b);for(b=this;;){var c=N(a);if(x(c))a=O(a),b=Wb(b,Ye.g?Ye.g(c):Ye.call(null,c),Ze.g?Ze.g(c):Ze.call(null,c));else return b}}else throw Error("conj! after persistent!");};
g.sb=function(){if(this.qa)return this.qa=!1,new v(null,Fd(this.len),this.j,null);throw Error("persistent! called twice");};g.cb=function(a,b,c){if(this.qa){a=bd(this.j,b);if(-1===a){if(this.len+2<=2*rf)return this.len+=2,this.j.push(b),this.j.push(c),this;a=uf.h?uf.h(this.len,this.j):uf.call(null,this.len,this.j);return Wb(a,b,c)}c!==this.j[a+1]&&(this.j[a+1]=c);return this}throw Error("assoc! after persistent!");};
g.call=function(a){switch(arguments.length-1){case 1:return this.g(arguments[1]);case 2:return this.h(arguments[1],arguments[2]);default:throw Error(["Invalid arity: ",B.g(arguments.length-1)].join(""));}};g.apply=function(a,b){return this.call.apply(this,[this].concat(Ra(b)))};g.g=function(a){return this.O(null,a,null)};g.h=function(a,b){return this.O(null,a,b)};function uf(a,b){for(var c=Tb(sf),d=0;;)if(d<a)c=Wb(c,b[d],b[d+1]),d+=2;else return c}function vf(){this.val=!1}
function wf(a,b){return a===b?!0:a===b||a instanceof I&&b instanceof I&&a.Ba===b.Ba?!0:P.h(a,b)}function xf(a,b,c){a=Ra(a);a[b]=c;return a}function yf(a,b){var c=Array(a.length-2);rd(a,0,c,0,2*b);rd(a,2*(b+1),c,2*b,c.length-2*b);return c}function zf(a,b,c,d){a=a.tb(b);a.j[c]=d;return a}function Af(a,b,c){for(var d=a.length,e=0,f=c;;)if(e<d){c=a[e];if(null!=c){var h=a[e+1];c=b.l?b.l(f,c,h):b.call(null,f,c,h)}else c=a[e+1],c=null!=c?c.Ob(b,f):f;if(Jc(c))return c;e+=2;f=c}else return f}
function Bf(a){this.j=a;this.v=0;this.ab=this.Pb=null}Bf.prototype.advance=function(){for(var a=this.j.length;;)if(this.v<a){var b=this.j[this.v],c=this.j[this.v+1];null!=b?b=this.Pb=new Pe(b,c):null!=c?(b=gc(c),b=b.hasNext()?this.ab=b:!1):b=!1;this.v+=2;if(b)return!0}else return!1};Bf.prototype.hasNext=function(){var a=null!=this.Pb;return a?a:(a=null!=this.ab)?a:this.advance()};
Bf.prototype.next=function(){if(null!=this.Pb){var a=this.Pb;this.Pb=null;return a}if(null!=this.ab)return a=this.ab.next(),this.ab.hasNext()||(this.ab=null),a;if(this.advance())return this.next();throw Error("No such element");};Bf.prototype.remove=function(){return Error("Unsupported operation")};function Cf(a,b,c){this.aa=a;this.bitmap=b;this.j=c;this.J=131072;this.o=0}g=Cf.prototype;
g.tb=function(a){if(a===this.aa)return this;var b=Gd(this.bitmap),c=Array(0>b?4:2*(b+1));rd(this.j,0,c,0,2*b);return new Cf(a,this.bitmap,c)};g.Mb=function(){return Df?Df(this.j):Ef.call(null,this.j)};g.Ob=function(a,b){return Af(this.j,a,b)};g.ub=function(a,b,c,d){var e=1<<(b>>>a&31);if(0===(this.bitmap&e))return d;var f=Gd(this.bitmap&e-1);e=this.j[2*f];f=this.j[2*f+1];return null==e?f.ub(a+5,b,c,d):wf(c,e)?f:d};
g.Za=function(a,b,c,d,e,f){var h=1<<(c>>>b&31),k=Gd(this.bitmap&h-1);if(0===(this.bitmap&h)){var l=Gd(this.bitmap);if(2*l<this.j.length){a=this.tb(a);b=a.j;f.val=!0;c=2*(l-k);f=2*k+(c-1);for(l=2*(k+1)+(c-1);0!==c;)b[l]=b[f],--l,--c,--f;b[2*k]=d;b[2*k+1]=e;a.bitmap|=h;return a}if(16<=l){k=[null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null];k[c>>>b&31]=Ff.Za(a,b+5,c,d,e,f);for(e=d=0;;)if(32>
d)0===(this.bitmap>>>d&1)?d+=1:(k[d]=null!=this.j[e]?Ff.Za(a,b+5,rc(this.j[e]),this.j[e],this.j[e+1],f):this.j[e+1],e+=2,d+=1);else break;return new Gf(a,l+1,k)}b=Array(2*(l+4));rd(this.j,0,b,0,2*k);b[2*k]=d;b[2*k+1]=e;rd(this.j,2*k,b,2*(k+1),2*(l-k));f.val=!0;a=this.tb(a);a.j=b;a.bitmap|=h;return a}l=this.j[2*k];h=this.j[2*k+1];if(null==l)return l=h.Za(a,b+5,c,d,e,f),l===h?this:zf(this,a,2*k+1,l);if(wf(d,l))return e===h?this:zf(this,a,2*k+1,e);f.val=!0;f=b+5;d=Hf?Hf(a,f,l,h,c,d,e):If.call(null,a,
f,l,h,c,d,e);e=2*k;k=2*k+1;a=this.tb(a);a.j[e]=null;a.j[k]=d;return a};
g.Ya=function(a,b,c,d,e){var f=1<<(b>>>a&31),h=Gd(this.bitmap&f-1);if(0===(this.bitmap&f)){var k=Gd(this.bitmap);if(16<=k){h=[null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null];h[b>>>a&31]=Ff.Ya(a+5,b,c,d,e);for(d=c=0;;)if(32>c)0===(this.bitmap>>>c&1)?c+=1:(h[c]=null!=this.j[d]?Ff.Ya(a+5,rc(this.j[d]),this.j[d],this.j[d+1],e):this.j[d+1],d+=2,c+=1);else break;return new Gf(null,k+1,h)}a=Array(2*
(k+1));rd(this.j,0,a,0,2*h);a[2*h]=c;a[2*h+1]=d;rd(this.j,2*h,a,2*(h+1),2*(k-h));e.val=!0;return new Cf(null,this.bitmap|f,a)}var l=this.j[2*h];f=this.j[2*h+1];if(null==l)return k=f.Ya(a+5,b,c,d,e),k===f?this:new Cf(null,this.bitmap,xf(this.j,2*h+1,k));if(wf(c,l))return d===f?this:new Cf(null,this.bitmap,xf(this.j,2*h+1,d));e.val=!0;e=this.bitmap;k=this.j;a+=5;a=Jf?Jf(a,l,f,b,c,d):If.call(null,a,l,f,b,c,d);c=2*h;h=2*h+1;d=Ra(k);d[c]=null;d[h]=a;return new Cf(null,e,d)};
g.Lb=function(a,b,c,d){var e=1<<(b>>>a&31);if(0===(this.bitmap&e))return d;var f=Gd(this.bitmap&e-1);e=this.j[2*f];f=this.j[2*f+1];return null==e?f.Lb(a+5,b,c,d):wf(c,e)?new Pe(e,f):d};
g.Nb=function(a,b,c){var d=1<<(b>>>a&31);if(0===(this.bitmap&d))return this;var e=Gd(this.bitmap&d-1),f=this.j[2*e],h=this.j[2*e+1];return null==f?(a=h.Nb(a+5,b,c),a===h?this:null!=a?new Cf(null,this.bitmap,xf(this.j,2*e+1,a)):this.bitmap===d?null:new Cf(null,this.bitmap^d,yf(this.j,e))):wf(c,f)?new Cf(null,this.bitmap^d,yf(this.j,e)):this};g.Aa=function(){return new Bf(this.j)};var Ff=new Cf(null,0,[]);function Kf(a){this.j=a;this.v=0;this.ab=null}
Kf.prototype.hasNext=function(){for(var a=this.j.length;;){if(null!=this.ab&&this.ab.hasNext())return!0;if(this.v<a){var b=this.j[this.v];this.v+=1;null!=b&&(this.ab=gc(b))}else return!1}};Kf.prototype.next=function(){if(this.hasNext())return this.ab.next();throw Error("No such element");};Kf.prototype.remove=function(){return Error("Unsupported operation")};function Gf(a,b,c){this.aa=a;this.s=b;this.j=c;this.J=131072;this.o=0}g=Gf.prototype;
g.tb=function(a){return a===this.aa?this:new Gf(a,this.s,Ra(this.j))};g.Mb=function(){return Lf?Lf(this.j):Mf.call(null,this.j)};g.Ob=function(a,b){for(var c=this.j.length,d=0;;)if(d<c){var e=this.j[d];if(null!=e){b=e.Ob(a,b);if(Jc(b))return b;d+=1}else d+=1}else return b};g.ub=function(a,b,c,d){var e=this.j[b>>>a&31];return null!=e?e.ub(a+5,b,c,d):d};
g.Za=function(a,b,c,d,e,f){var h=c>>>b&31,k=this.j[h];if(null==k)return a=zf(this,a,h,Ff.Za(a,b+5,c,d,e,f)),a.s+=1,a;b=k.Za(a,b+5,c,d,e,f);return b===k?this:zf(this,a,h,b)};g.Ya=function(a,b,c,d,e){var f=b>>>a&31,h=this.j[f];if(null==h)return new Gf(null,this.s+1,xf(this.j,f,Ff.Ya(a+5,b,c,d,e)));a=h.Ya(a+5,b,c,d,e);return a===h?this:new Gf(null,this.s,xf(this.j,f,a))};g.Lb=function(a,b,c,d){var e=this.j[b>>>a&31];return null!=e?e.Lb(a+5,b,c,d):d};
g.Nb=function(a,b,c){var d=b>>>a&31,e=this.j[d];if(null!=e){a=e.Nb(a+5,b,c);if(a===e)d=this;else if(null==a)if(8>=this.s)a:{e=this.j;a=e.length;b=Array(2*(this.s-1));c=0;for(var f=1,h=0;;)if(c<a)c!==d&&null!=e[c]?(b[f]=e[c],f+=2,h|=1<<c,c+=1):c+=1;else{d=new Cf(null,h,b);break a}}else d=new Gf(null,this.s-1,xf(this.j,d,a));else d=new Gf(null,this.s,xf(this.j,d,a));return d}return this};g.Aa=function(){return new Kf(this.j)};
function Nf(a,b,c){b*=2;for(var d=0;;)if(d<b){if(wf(c,a[d]))return d;d+=2}else return-1}function Of(a,b,c,d){this.aa=a;this.gb=b;this.s=c;this.j=d;this.J=131072;this.o=0}g=Of.prototype;g.tb=function(a){if(a===this.aa)return this;var b=Array(2*(this.s+1));rd(this.j,0,b,0,2*this.s);return new Of(a,this.gb,this.s,b)};g.Mb=function(){return Df?Df(this.j):Ef.call(null,this.j)};g.Ob=function(a,b){return Af(this.j,a,b)};
g.ub=function(a,b,c,d){a=Nf(this.j,this.s,c);return 0>a?d:wf(c,this.j[a])?this.j[a+1]:d};
g.Za=function(a,b,c,d,e,f){if(c===this.gb){b=Nf(this.j,this.s,d);if(-1===b){if(this.j.length>2*this.s)return b=2*this.s,c=2*this.s+1,a=this.tb(a),a.j[b]=d,a.j[c]=e,f.val=!0,a.s+=1,a;c=this.j.length;b=Array(c+2);rd(this.j,0,b,0,c);b[c]=d;b[c+1]=e;f.val=!0;d=this.s+1;a===this.aa?(this.j=b,this.s=d,a=this):a=new Of(this.aa,this.gb,d,b);return a}return this.j[b+1]===e?this:zf(this,a,b+1,e)}return(new Cf(a,1<<(this.gb>>>b&31),[null,this,null,null])).Za(a,b,c,d,e,f)};
g.Ya=function(a,b,c,d,e){return b===this.gb?(a=Nf(this.j,this.s,c),-1===a?(a=2*this.s,b=Array(a+2),rd(this.j,0,b,0,a),b[a]=c,b[a+1]=d,e.val=!0,new Of(null,this.gb,this.s+1,b)):P.h(this.j[a+1],d)?this:new Of(null,this.gb,this.s,xf(this.j,a+1,d))):(new Cf(null,1<<(this.gb>>>a&31),[null,this])).Ya(a,b,c,d,e)};g.Lb=function(a,b,c,d){a=Nf(this.j,this.s,c);return 0>a?d:wf(c,this.j[a])?new Pe(this.j[a],this.j[a+1]):d};
g.Nb=function(a,b,c){a=Nf(this.j,this.s,c);return-1===a?this:1===this.s?null:new Of(null,this.gb,this.s-1,yf(this.j,Fd(a)))};g.Aa=function(){return new Bf(this.j)};function If(a){switch(arguments.length){case 6:return Jf(arguments[0],arguments[1],arguments[2],arguments[3],arguments[4],arguments[5]);case 7:return Hf(arguments[0],arguments[1],arguments[2],arguments[3],arguments[4],arguments[5],arguments[6]);default:throw Error(["Invalid arity: ",B.g(arguments.length)].join(""));}}
function Jf(a,b,c,d,e,f){var h=rc(b);if(h===d)return new Of(null,h,2,[b,c,e,f]);var k=new vf;return Ff.Ya(a,h,b,c,k).Ya(a,d,e,f,k)}function Hf(a,b,c,d,e,f,h){var k=rc(c);if(k===e)return new Of(null,k,2,[c,d,f,h]);var l=new vf;return Ff.Za(a,b,k,c,d,l).Za(a,b,e,f,h,l)}function Pf(a,b,c,d,e){this.meta=a;this.nodes=b;this.v=c;this.M=d;this.H=e;this.o=32374988;this.J=0}g=Pf.prototype;g.toString=function(){return ic(this)};g.equiv=function(a){return this.G(null,a)};
g.indexOf=function(){var a=null;a=function(b,c){switch(arguments.length){case 1:return Q(this,b,0);case 2:return Q(this,b,c)}throw Error("Invalid arity: "+arguments.length);};a.g=function(b){return Q(this,b,0)};a.h=function(b,c){return Q(this,b,c)};return a}();
g.lastIndexOf=function(){function a(c){return S(this,c,R(this))}var b=null;b=function(c,d){switch(arguments.length){case 1:return a.call(this,c);case 2:return S(this,c,d)}throw Error("Invalid arity: "+arguments.length);};b.g=a;b.h=function(c,d){return S(this,c,d)};return b}();g.da=function(){return this.meta};g.sa=function(){if(null==this.M){var a=this.nodes,b=this.v+2;return Qf?Qf(a,b,null):Ef.call(null,a,b,null)}a=this.nodes;b=this.v;var c=O(this.M);return Qf?Qf(a,b,c):Ef.call(null,a,b,c)};
g.T=function(){var a=this.H;return null!=a?a:this.H=a=Dc(this)};g.G=function(a,b){return Vc(this,b)};g.ha=function(){return yc};g.oa=function(a,b){return xd(b,this)};g.pa=function(a,b,c){return yd(b,c,this)};g.ta=function(){return null==this.M?new Pe(this.nodes[this.v],this.nodes[this.v+1]):N(this.M)};
g.ua=function(){var a=this,b=null==a.M?function(){var c=a.nodes,d=a.v+2;return Qf?Qf(c,d,null):Ef.call(null,c,d,null)}():function(){var c=a.nodes,d=a.v,e=O(a.M);return Qf?Qf(c,d,e):Ef.call(null,c,d,e)}();return null!=b?b:yc};g.Z=function(){return this};g.ga=function(a,b){return b===this.meta?this:new Pf(b,this.nodes,this.v,this.M,this.H)};g.ia=function(a,b){return Wc(b,this)};Pf.prototype[Qa]=function(){return Ac(this)};
function Ef(a){switch(arguments.length){case 1:return Df(arguments[0]);case 3:return Qf(arguments[0],arguments[1],arguments[2]);default:throw Error(["Invalid arity: ",B.g(arguments.length)].join(""));}}function Df(a){return Qf(a,0,null)}function Qf(a,b,c){if(null==c)for(c=a.length;;)if(b<c){if(null!=a[b])return new Pf(null,a,b,null,null);var d=a[b+1];if(x(d)&&(d=d.Mb(),x(d)))return new Pf(null,a,b+2,d,null);b+=2}else return null;else return new Pf(null,a,b,c,null)}
function Rf(a,b,c,d,e){this.meta=a;this.nodes=b;this.v=c;this.M=d;this.H=e;this.o=32374988;this.J=0}g=Rf.prototype;g.toString=function(){return ic(this)};g.equiv=function(a){return this.G(null,a)};g.indexOf=function(){var a=null;a=function(b,c){switch(arguments.length){case 1:return Q(this,b,0);case 2:return Q(this,b,c)}throw Error("Invalid arity: "+arguments.length);};a.g=function(b){return Q(this,b,0)};a.h=function(b,c){return Q(this,b,c)};return a}();
g.lastIndexOf=function(){function a(c){return S(this,c,R(this))}var b=null;b=function(c,d){switch(arguments.length){case 1:return a.call(this,c);case 2:return S(this,c,d)}throw Error("Invalid arity: "+arguments.length);};b.g=a;b.h=function(c,d){return S(this,c,d)};return b}();g.da=function(){return this.meta};g.sa=function(){var a=this.nodes,b=this.v,c=O(this.M);return Sf?Sf(a,b,c):Mf.call(null,a,b,c)};g.T=function(){var a=this.H;return null!=a?a:this.H=a=Dc(this)};
g.G=function(a,b){return Vc(this,b)};g.ha=function(){return yc};g.oa=function(a,b){return xd(b,this)};g.pa=function(a,b,c){return yd(b,c,this)};g.ta=function(){return N(this.M)};g.ua=function(){var a=this.nodes;var b=this.v,c=O(this.M);a=Sf?Sf(a,b,c):Mf.call(null,a,b,c);return null!=a?a:yc};g.Z=function(){return this};g.ga=function(a,b){return b===this.meta?this:new Rf(b,this.nodes,this.v,this.M,this.H)};g.ia=function(a,b){return Wc(b,this)};Rf.prototype[Qa]=function(){return Ac(this)};
function Mf(a){switch(arguments.length){case 1:return Lf(arguments[0]);case 3:return Sf(arguments[0],arguments[1],arguments[2]);default:throw Error(["Invalid arity: ",B.g(arguments.length)].join(""));}}function Lf(a){return Sf(a,0,null)}function Sf(a,b,c){if(null==c)for(c=a.length;;)if(b<c){var d=a[b];if(x(d)&&(d=d.Mb(),x(d)))return new Rf(null,a,b+1,d,null);b+=1}else return null;else return new Rf(null,a,b,c,null)}function Tf(a,b){this.va=a;this.Oc=b;this.seen=!1}
Tf.prototype.hasNext=function(){return!this.seen||this.Oc.hasNext()};Tf.prototype.next=function(){if(this.seen)return this.Oc.next();this.seen=!0;return new Pe(null,this.va)};Tf.prototype.remove=function(){return Error("Unsupported operation")};function Uf(a,b,c,d,e,f){this.meta=a;this.s=b;this.root=c;this.wa=d;this.va=e;this.H=f;this.o=16123663;this.J=139268}g=Uf.prototype;g.lb=function(a,b){return null==b?this.wa?new Pe(null,this.va):null:null==this.root?null:this.root.Lb(0,rc(b),b,null)};
g.toString=function(){return ic(this)};g.equiv=function(a){return this.G(null,a)};g.keys=function(){return Ac(of.g?of.g(this):of.call(null,this))};g.entries=function(){return new kf(J(J(this)))};g.values=function(){return Ac(pf.g?pf.g(this):pf.call(null,this))};g.has=function(a){return vd(this,a)};g.get=function(a,b){return this.O(null,a,b)};
g.forEach=function(a){for(var b=J(this),c=null,d=0,e=0;;)if(e<d){var f=c.N(null,e),h=T(f,0,null);f=T(f,1,null);a.h?a.h(f,h):a.call(null,f,h);e+=1}else if(b=J(b))qd(b)?(c=Zb(b),b=$b(b),h=c,d=R(c),c=h):(c=N(b),h=T(c,0,null),f=T(c,1,null),a.h?a.h(f,h):a.call(null,f,h),b=O(b),c=null,d=0),e=0;else return null};g.na=function(a,b){return this.O(null,b,null)};g.O=function(a,b,c){return null==b?this.wa?this.va:c:null==this.root?c:this.root.ub(0,rc(b),b,c)};
g.mb=function(a,b,c){a=this.wa?b.l?b.l(c,null,this.va):b.call(null,c,null,this.va):c;Jc(a)?b=G(a):null!=this.root?(b=this.root.Ob(b,a),b=Jc(b)?Kc.g?Kc.g(b):Kc.call(null,b):b):b=a;return b};g.Aa=function(){var a=this.root?gc(this.root):he();return this.wa?new Tf(this.va,a):a};g.da=function(){return this.meta};g.Y=function(){return this.s};g.T=function(){var a=this.H;return null!=a?a:this.H=a=Fc(this)};g.G=function(a,b){return jf(this,b)};g.kb=function(){return new Vf(this.root,this.s,this.wa,this.va)};
g.ha=function(){return Ab(sf,this.meta)};g.Ub=function(a,b){if(null==b)return this.wa?new Uf(this.meta,this.s-1,this.root,!1,null,null):this;if(null==this.root)return this;a=this.root.Nb(0,rc(b),b);return a===this.root?this:new Uf(this.meta,this.s-1,a,this.wa,this.va,null)};
g.Sa=function(a,b,c){if(null==b)return this.wa&&c===this.va?this:new Uf(this.meta,this.wa?this.s:this.s+1,this.root,!0,c,null);a=new vf;b=(null==this.root?Ff:this.root).Ya(0,rc(b),b,c,a);return b===this.root?this:new Uf(this.meta,a.val?this.s+1:this.s,b,this.wa,this.va,null)};g.Ra=function(a,b){return null==b?this.wa:null==this.root?!1:this.root.ub(0,rc(b),b,sd)!==sd};g.Z=function(){if(0<this.s){var a=null!=this.root?this.root.Mb():null;return this.wa?Wc(new Pe(null,this.va),a):a}return null};
g.ga=function(a,b){return b===this.meta?this:new Uf(b,this.s,this.root,this.wa,this.va,this.H)};g.ia=function(a,b){if(pd(b))return this.Sa(null,D(b,0),D(b,1));a=this;for(b=J(b);;){if(null==b)return a;var c=N(b);if(pd(c))a=lb(a,D(c,0),D(c,1)),b=O(b);else throw Error("conj on a map takes map entries or seqables of map entries");}};
g.call=function(a){switch(arguments.length-1){case 1:return this.g(arguments[1]);case 2:return this.h(arguments[1],arguments[2]);default:throw Error(["Invalid arity: ",B.g(arguments.length-1)].join(""));}};g.apply=function(a,b){return this.call.apply(this,[this].concat(Ra(b)))};g.g=function(a){return this.na(null,a)};g.h=function(a,b){return this.O(null,a,b)};var sf=new Uf(null,0,null,!1,null,Gc);Uf.prototype[Qa]=function(){return Ac(this)};
function Vf(a,b,c,d){this.aa={};this.root=a;this.count=b;this.wa=c;this.va=d;this.o=259;this.J=56}function Wf(a,b,c){if(a.aa){if(null==b)a.va!==c&&(a.va=c),a.wa||(a.count+=1,a.wa=!0);else{var d=new vf;b=(null==a.root?Ff:a.root).Za(a.aa,0,rc(b),b,c,d);b!==a.root&&(a.root=b);d.val&&(a.count+=1)}return a}throw Error("assoc! after persistent!");}g=Vf.prototype;g.Y=function(){if(this.aa)return this.count;throw Error("count after persistent!");};
g.na=function(a,b){return null==b?this.wa?this.va:null:null==this.root?null:this.root.ub(0,rc(b),b)};g.O=function(a,b,c){return null==b?this.wa?this.va:c:null==this.root?c:this.root.ub(0,rc(b),b,c)};
g.eb=function(a,b){a:if(this.aa)if(Xe(b))a=Wf(this,Ye.g?Ye.g(b):Ye.call(null,b),Ze.g?Ze.g(b):Ze.call(null,b));else if(pd(b))a=Wf(this,b.g?b.g(0):b.call(null,0),b.g?b.g(1):b.call(null,1));else for(a=J(b),b=this;;){var c=N(a);if(x(c))a=O(a),b=Wf(b,Ye.g?Ye.g(c):Ye.call(null,c),Ze.g?Ze.g(c):Ze.call(null,c));else{a=b;break a}}else throw Error("conj! after persistent");return a};
g.sb=function(){if(this.aa){this.aa=null;var a=new Uf(null,this.count,this.root,this.wa,this.va,null)}else throw Error("persistent! called twice");return a};g.cb=function(a,b,c){return Wf(this,b,c)};g.call=function(a){switch(arguments.length-1){case 1:return this.g(arguments[1]);case 2:return this.h(arguments[1],arguments[2]);default:throw Error(["Invalid arity: ",B.g(arguments.length-1)].join(""));}};g.apply=function(a,b){return this.call.apply(this,[this].concat(Ra(b)))};
g.g=function(a){return this.na(null,a)};g.h=function(a,b){return this.O(null,a,b)};var ge=function ge(a){for(var c=[],d=arguments.length,e=0;;)if(e<d)c.push(arguments[e]),e+=1;else break;c=0<c.length?new K(c.slice(0),0,null):null;return ge.C(c)};ge.C=function(a){for(var b=J(a),c=Tb(sf);;)if(b){a=O(O(b));var d=N(b);b=N(O(b));c=Wb(c,d,b);b=a}else return Vb(c)};ge.S=0;ge.U=function(a){return this.C(J(a))};function Xf(a,b){this.R=a;this._meta=b;this.o=32374988;this.J=0}g=Xf.prototype;g.toString=function(){return ic(this)};
g.equiv=function(a){return this.G(null,a)};g.indexOf=function(){var a=null;a=function(b,c){switch(arguments.length){case 1:return Q(this,b,0);case 2:return Q(this,b,c)}throw Error("Invalid arity: "+arguments.length);};a.g=function(b){return Q(this,b,0)};a.h=function(b,c){return Q(this,b,c)};return a}();
g.lastIndexOf=function(){function a(c){return S(this,c,R(this))}var b=null;b=function(c,d){switch(arguments.length){case 1:return a.call(this,c);case 2:return S(this,c,d)}throw Error("Invalid arity: "+arguments.length);};b.g=a;b.h=function(c,d){return S(this,c,d)};return b}();g.da=function(){return this._meta};g.sa=function(){var a=(null!=this.R?this.R.o&128||u===this.R.Gb||(this.R.o?0:y(hb,this.R)):y(hb,this.R))?this.R.sa():O(this.R);return null==a?null:new Xf(a,null)};g.T=function(){return Dc(this)};
g.G=function(a,b){return Vc(this,b)};g.ha=function(){return yc};g.oa=function(a,b){return xd(b,this)};g.pa=function(a,b,c){return yd(b,c,this)};g.ta=function(){return this.R.ta(null).key};g.ua=function(){var a=(null!=this.R?this.R.o&128||u===this.R.Gb||(this.R.o?0:y(hb,this.R)):y(hb,this.R))?this.R.sa():O(this.R);return null!=a?new Xf(a,null):yc};g.Z=function(){return this};g.ga=function(a,b){return b===this._meta?this:new Xf(this.R,b)};g.ia=function(a,b){return Wc(b,this)};Xf.prototype[Qa]=function(){return Ac(this)};
function of(a){return(a=J(a))?new Xf(a,null):null}function Ye(a){return pb(a)}function Yf(a,b){this.R=a;this._meta=b;this.o=32374988;this.J=0}g=Yf.prototype;g.toString=function(){return ic(this)};g.equiv=function(a){return this.G(null,a)};g.indexOf=function(){var a=null;a=function(b,c){switch(arguments.length){case 1:return Q(this,b,0);case 2:return Q(this,b,c)}throw Error("Invalid arity: "+arguments.length);};a.g=function(b){return Q(this,b,0)};a.h=function(b,c){return Q(this,b,c)};return a}();
g.lastIndexOf=function(){function a(c){return S(this,c,R(this))}var b=null;b=function(c,d){switch(arguments.length){case 1:return a.call(this,c);case 2:return S(this,c,d)}throw Error("Invalid arity: "+arguments.length);};b.g=a;b.h=function(c,d){return S(this,c,d)};return b}();g.da=function(){return this._meta};g.sa=function(){var a=(null!=this.R?this.R.o&128||u===this.R.Gb||(this.R.o?0:y(hb,this.R)):y(hb,this.R))?this.R.sa():O(this.R);return null==a?null:new Yf(a,null)};g.T=function(){return Dc(this)};
g.G=function(a,b){return Vc(this,b)};g.ha=function(){return yc};g.oa=function(a,b){return xd(b,this)};g.pa=function(a,b,c){return yd(b,c,this)};g.ta=function(){return this.R.ta(null).val};g.ua=function(){var a=(null!=this.R?this.R.o&128||u===this.R.Gb||(this.R.o?0:y(hb,this.R)):y(hb,this.R))?this.R.sa():O(this.R);return null!=a?new Yf(a,null):yc};g.Z=function(){return this};g.ga=function(a,b){return b===this._meta?this:new Yf(this.R,b)};g.ia=function(a,b){return Wc(b,this)};Yf.prototype[Qa]=function(){return Ac(this)};
function pf(a){return(a=J(a))?new Yf(a,null):null}function Ze(a){return qb(a)}var Zf=function Zf(a){for(var c=[],d=arguments.length,e=0;;)if(e<d)c.push(arguments[e]),e+=1;else break;c=0<c.length?new K(c.slice(0),0,null):null;return Zf.C(c)};Zf.C=function(a){return x(ne(a))?Bd(function(b,c){return Yc.h(x(b)?b:ie,c)},a):null};Zf.S=0;Zf.U=function(a){return this.C(J(a))};function $f(a){for(var b=ie,c=J(ag);;)if(c){var d=N(c),e=H.l(a,d,bg);b=P.h(e,bg)?b:U.l(b,d,e);c=O(c)}else return Ab(b,hd(a))}
function cg(a){this.Bb=a}cg.prototype.hasNext=function(){return this.Bb.hasNext()};cg.prototype.next=function(){if(this.Bb.hasNext())return this.Bb.next().key;throw Error("No such element");};cg.prototype.remove=function(){return Error("Unsupported operation")};function dg(a,b,c){this.meta=a;this.hb=b;this.H=c;this.o=15077647;this.J=139268}g=dg.prototype;g.toString=function(){return ic(this)};g.equiv=function(a){return this.G(null,a)};g.keys=function(){return Ac(J(this))};g.entries=function(){return new lf(J(J(this)))};
g.values=function(){return Ac(J(this))};g.has=function(a){return vd(this,a)};g.forEach=function(a){for(var b=J(this),c=null,d=0,e=0;;)if(e<d){var f=c.N(null,e),h=T(f,0,null);f=T(f,1,null);a.h?a.h(f,h):a.call(null,f,h);e+=1}else if(b=J(b))qd(b)?(c=Zb(b),b=$b(b),h=c,d=R(c),c=h):(c=N(b),h=T(c,0,null),f=T(c,1,null),a.h?a.h(f,h):a.call(null,f,h),b=O(b),c=null,d=0),e=0;else return null};g.na=function(a,b){return this.O(null,b,null)};g.O=function(a,b,c){a=mb(this.hb,b);return x(a)?pb(a):c};g.Aa=function(){return new cg(gc(this.hb))};
g.da=function(){return this.meta};g.Y=function(){return Za(this.hb)};g.T=function(){var a=this.H;return null!=a?a:this.H=a=Fc(this)};g.G=function(a,b){if(a=ld(b))if(a=R(this)===R(b))try{return Cd(function(c,d){return(c=vd(b,d))?c:new Ic},!0,this.hb)}catch(c){if(c instanceof Error)return!1;throw c;}else return a;else return a};g.kb=function(){return new eg(Tb(this.hb))};g.ha=function(){return Ab(fg,this.meta)};g.Dc=function(a,b){return new dg(this.meta,ob(this.hb,b),null)};g.Z=function(){return of(this.hb)};
g.ga=function(a,b){return b===this.meta?this:new dg(b,this.hb,this.H)};g.ia=function(a,b){return new dg(this.meta,U.l(this.hb,b,null),null)};g.call=function(a){switch(arguments.length-1){case 1:return this.g(arguments[1]);case 2:return this.h(arguments[1],arguments[2]);default:throw Error(["Invalid arity: ",B.g(arguments.length-1)].join(""));}};g.apply=function(a,b){return this.call.apply(this,[this].concat(Ra(b)))};g.g=function(a){return this.na(null,a)};g.h=function(a,b){return this.O(null,a,b)};
var fg=new dg(null,ie,Gc);dg.prototype[Qa]=function(){return Ac(this)};function eg(a){this.wb=a;this.J=136;this.o=259}g=eg.prototype;g.eb=function(a,b){this.wb=Wb(this.wb,b,null);return this};g.sb=function(){return new dg(null,Vb(this.wb),null)};g.Y=function(){return R(this.wb)};g.na=function(a,b){return this.O(null,b,null)};g.O=function(a,b,c){return jb(this.wb,b,sd)===sd?c:b};
g.call=function(a){switch(arguments.length-1){case 1:return this.g(arguments[1]);case 2:return this.h(arguments[1],arguments[2]);default:throw Error(["Invalid arity: ",B.g(arguments.length-1)].join(""));}};g.apply=function(a,b){return this.call.apply(this,[this].concat(Ra(b)))};g.g=function(a){return jb(this.wb,a,sd)===sd?null:a};g.h=function(a,b){return jb(this.wb,a,sd)===sd?b:a};
function gg(a){if(ld(a))return gd(a,null);a=J(a);if(null==a)return fg;if(a instanceof K&&0===a.v){a=a.j;for(var b=a.length,c=Tb(fg),d=0;;)if(d<b)Ub(c,a[d]),d+=1;else break;return Vb(c)}for(c=Tb(fg);;)if(null!=a)b=O(a),c=Ub(c,F(a)),a=b;else return Vb(c)}function Ld(a){if(null!=a&&(a.J&4096||u===a.Bc))return a.Eb(null);if("string"===typeof a)return a;throw Error(["Doesn't support name: ",B.g(a)].join(""));}
function hg(a,b){if("string"===typeof b)return a=a.exec(b),null!=a&&P.h(a[0],b)?1===a.length?a[0]:We(a):null;throw new TypeError("re-matches must match against a string.");}
function ig(a,b,c,d,e,f,h){var k=Fa;Fa=null==Fa?null:Fa-1;try{if(null!=Fa&&0>Fa)return Nb(a,"#");Nb(a,c);if(0===La.g(f))J(h)&&Nb(a,function(){var r=jg.g(f);return x(r)?r:"..."}());else{if(J(h)){var l=N(h);b.l?b.l(l,a,f):b.call(null,l,a,f)}for(var m=O(h),n=La.g(f)-1;;)if(!m||null!=n&&0===n){J(m)&&0===n&&(Nb(a,d),Nb(a,function(){var r=jg.g(f);return x(r)?r:"..."}()));break}else{Nb(a,d);var p=N(m);c=a;h=f;b.l?b.l(p,c,h):b.call(null,p,c,h);var q=O(m);c=n-1;m=q;n=c}}return Nb(a,e)}finally{Fa=k}}
function kg(a,b){b=J(b);for(var c=null,d=0,e=0;;)if(e<d){var f=c.N(null,e);Nb(a,f);e+=1}else if(b=J(b))c=b,qd(c)?(b=Zb(c),d=$b(c),c=b,f=R(b),b=d,d=f):(f=N(c),Nb(a,f),b=O(c),c=null,d=0),e=0;else return null}function lg(a){if(null==Da)throw Error("No *print-fn* fn set for evaluation environment");Da.call(null,a)}var mg={'"':'\\"',"\\":"\\\\","\b":"\\b","\f":"\\f","\n":"\\n","\r":"\\r","\t":"\\t"};function ng(a){return['"',B.g(a.replace(/[\\"\b\f\n\r\t]/g,function(b){return mg[b]})),'"'].join("")}
function og(a,b){return(a=td(H.h(a,Ja)))?(a=null!=b?b.o&131072||u===b.$c?!0:!1:!1)?null!=hd(b):a:a}
function pg(a,b,c){if(null==a)return Nb(b,"nil");if(og(c,a)){Nb(b,"^");var d=hd(a);qg.l?qg.l(d,b,c):qg.call(null,d,b,c);Nb(b," ")}if(a.$b)return a.mc(b);if(null!=a?a.o&2147483648||u===a.la||(a.o?0:y(Ob,a)):y(Ob,a))return Pb(a,b,c);if(!0===a||!1===a)return Nb(b,B.g(a));if("number"===typeof a)return Nb(b,isNaN(a)?"##NaN":a===Number.POSITIVE_INFINITY?"##Inf":a===Number.NEGATIVE_INFINITY?"##-Inf":B.g(a));if(null!=a&&a.constructor===Object)return Nb(b,"#js "),d=ue.h(function(f){return new Pe(null!=hg(/[A-Za-z_\*\+\?!\-'][\w\*\+\?!\-']*/,
f)?Kd.g(f):f,a[f])},ta(a)),rg.K?rg.K(d,qg,b,c):rg.call(null,d,qg,b,c);if(Na(a))return ig(b,qg,"#js ["," ","]",c,a);if("string"===typeof a)return x(Ia.g(c))?Nb(b,ng(a)):Nb(b,a);if("function"===typeof a){var e=a.name;c=x(function(){var f=null==e;return f?f:/^[\s\xa0]*$/.test(e)}())?"Function":e;return kg(b,Xc(["#object[",c,x(!1)?[' "',B.g(a),'"'].join(""):"","]"]))}if(a instanceof Date)return c=function(f,h){for(f=B.g(f);;)if(f.length<h)f=["0",f].join("");else return f},kg(b,Xc(['#inst "',c(a.getUTCFullYear(),
4),"-",c(a.getUTCMonth()+1,2),"-",c(a.getUTCDate(),2),"T",c(a.getUTCHours(),2),":",c(a.getUTCMinutes(),2),":",c(a.getUTCSeconds(),2),".",c(a.getUTCMilliseconds(),3),"-",'00:00"']));if(a instanceof RegExp)return kg(b,Xc(['#"',a.source,'"']));if(Va(a))return kg(b,Xc(["#object[",a.toString(),"]"]));if(x(function(){var f=null==a?null:a.constructor;return null==f?null:f.Ab}()))return kg(b,Xc(["#object[",a.constructor.Ab.replace(/\//g,"."),"]"]));e=function(){var f=null==a?null:a.constructor;return null==
f?null:f.name}();c=x(function(){var f=null==e;return f?f:/^[\s\xa0]*$/.test(e)}())?"Object":e;return null==a.constructor?kg(b,Xc(["#object[",c,"]"])):kg(b,Xc(["#object[",c," ",B.g(a),"]"]))}function qg(a,b,c){var d=sg.g(c);return x(d)?(c=U.l(c,tg,pg),d.l?d.l(a,b,c):d.call(null,a,b,c)):pg(a,b,c)}
function ug(a,b){if(jd(a))b="";else{var c=B,d=c.g,e=new ya,f=new hc(e);qg(N(a),f,b);a=J(O(a));for(var h=null,k=0,l=0;;)if(l<k){var m=h.N(null,l);Nb(f," ");qg(m,f,b);l+=1}else if(a=J(a))h=a,qd(h)?(a=Zb(h),k=$b(h),h=a,m=R(a),a=k,k=m):(m=N(h),Nb(f," "),qg(m,f,b),a=O(h),h=null,k=0),l=0;else break;b=d.call(c,e)}return b}function vg(a){var b=U.l(Ga(),Ia,!1);lg(ug(a,b));x(Ea)?(a=Ga(),lg("\n"),a=(H.h(a,Ha),null)):a=null;return a}function wg(a){return a instanceof tc?uc.h(null,Ld(a)):Kd.h(null,Ld(a))}
function xg(a){if(x(!1)){var b=J(a),c=J(b),d=N(c);O(c);T(d,0,null);T(d,1,null);c=null==a?null:null!=a&&(a.o&4||u===a.Tc)?a.ha(null):(null!=a?a.o&4||u===a.Tc||(a.o?0:y($a,a)):y($a,a))?ab(a):null;for(a=null;;){d=a;b=J(b);a=N(b);var e=O(b),f=a;a=T(f,0,null);b=T(f,1,null);if(x(f))if(a instanceof I||a instanceof tc)if(x(d))if(P.h(d,Jd(a)))c=U.l(c,wg(a),b),a=d,b=e;else return null;else if(d=Jd(a),x(d))c=U.l(c,wg(a),b),a=d,b=e;else return null;else return null;else return new V(null,2,5,X,[d,c],null)}}else return null}
function yg(a,b,c,d,e){return ig(d,function(f,h,k){var l=pb(f);c.l?c.l(l,h,k):c.call(null,l,h,k);Nb(h," ");f=qb(f);return c.l?c.l(f,h,k):c.call(null,f,h,k)},[B.g(a),"{"].join(""),", ","}",e,J(b))}function rg(a,b,c,d){var e=nd(a)?xg(a):null,f=T(e,0,null);e=T(e,1,null);return x(f)?yg(["#:",B.g(f)].join(""),e,b,c,d):yg(null,a,b,c,d)}te.prototype.la=u;te.prototype.X=function(a,b,c){Nb(b,"#object[cljs.core.Volatile ");qg(new v(null,1,[zg,this.state],null),b,c);return Nb(b,"]")};K.prototype.la=u;
K.prototype.X=function(a,b,c){return ig(b,qg,"("," ",")",c,this)};Md.prototype.la=u;Md.prototype.X=function(a,b,c){return ig(b,qg,"("," ",")",c,this)};Pe.prototype.la=u;Pe.prototype.X=function(a,b,c){return ig(b,qg,"["," ","]",c,this)};Pf.prototype.la=u;Pf.prototype.X=function(a,b,c){return ig(b,qg,"("," ",")",c,this)};mf.prototype.la=u;mf.prototype.X=function(a,b,c){return ig(b,qg,"("," ",")",c,this)};Bc.prototype.la=u;Bc.prototype.X=function(a,b,c){return ig(b,qg,"("," ",")",c,this)};
af.prototype.la=u;af.prototype.X=function(a,b,c){return ig(b,qg,"("," ",")",c,this)};Id.prototype.la=u;Id.prototype.X=function(a,b,c){return ig(b,qg,"("," ",")",c,this)};Uf.prototype.la=u;Uf.prototype.X=function(a,b,c){return rg(this,qg,b,c)};Rf.prototype.la=u;Rf.prototype.X=function(a,b,c){return ig(b,qg,"("," ",")",c,this)};cf.prototype.la=u;cf.prototype.X=function(a,b,c){return ig(b,qg,"["," ","]",c,this)};dg.prototype.la=u;dg.prototype.X=function(a,b,c){return ig(b,qg,"#{"," ","}",c,this)};
Qd.prototype.la=u;Qd.prototype.X=function(a,b,c){return ig(b,qg,"("," ",")",c,this)};pe.prototype.la=u;pe.prototype.X=function(a,b,c){Nb(b,"#object[cljs.core.Atom ");qg(new v(null,1,[zg,this.state],null),b,c);return Nb(b,"]")};Yf.prototype.la=u;Yf.prototype.X=function(a,b,c){return ig(b,qg,"("," ",")",c,this)};V.prototype.la=u;V.prototype.X=function(a,b,c){return ig(b,qg,"["," ","]",c,this)};Hd.prototype.la=u;Hd.prototype.X=function(a,b){return Nb(b,"()")};v.prototype.la=u;
v.prototype.X=function(a,b,c){return rg(this,qg,b,c)};Xf.prototype.la=u;Xf.prototype.X=function(a,b,c){return ig(b,qg,"("," ",")",c,this)};$c.prototype.la=u;$c.prototype.X=function(a,b,c){return ig(b,qg,"("," ",")",c,this)};var Ag=null;function Bg(a){null==Ag&&(Ag=qe(0));return uc.g([B.g(a),B.g(se.h(Ag,Hc))].join(""))}function Cg(){}
function Dg(a){if(null!=a&&null!=a.Vc)a=a.Vc(a);else{var b=Dg[t(null==a?null:a)];if(null!=b)a=b.g?b.g(a):b.call(null,a);else if(b=Dg._,null!=b)a=b.g?b.g(a):b.call(null,a);else throw z("IEncodeJS.-clj-\x3ejs",a);}return a}function Eg(a,b){return(null!=a?u===a.Uc||(a.Fc?0:y(Cg,a)):y(Cg,a))?Dg(a):"string"===typeof a||"number"===typeof a||a instanceof I||a instanceof tc?b.g?b.g(a):b.call(null,a):ug(Xc([a]),Ga())}
var Fg=function Fg(a){for(var c=[],d=arguments.length,e=0;;)if(e<d)c.push(arguments[e]),e+=1;else break;c=1<c.length?new K(c.slice(1),0,null):null;return Fg.C(arguments[0],c)};
Fg.C=function(a,b){b=fe(b);var c=H.l(b,Gg,Ld),d=function h(f){if(null==f)return null;if(null!=f?u===f.Uc||(f.Fc?0:y(Cg,f)):y(Cg,f))return Dg(f);if(f instanceof I)return c.g?c.g(f):c.call(null,f);if(f instanceof tc)return B.g(f);if(nd(f)){var k={};f=J(f);for(var l=null,m=0,n=0;;)if(n<m){var p=l.N(null,n),q=T(p,0,null);p=T(p,1,null);q=Eg(q,d);p=h(p);k[q]=p;n+=1}else if(f=J(f))qd(f)?(m=Zb(f),f=$b(f),l=m,m=R(m)):(m=N(f),l=T(m,0,null),m=T(m,1,null),l=Eg(l,d),m=h(m),k[l]=m,f=O(f),l=null,m=0),n=0;else break;
return k}if(kd(f)){k=[];f=J(ue.h(h,f));l=null;for(n=m=0;;)if(n<m)q=l.N(null,n),k.push(q),n+=1;else if(f=J(f))l=f,qd(l)?(f=Zb(l),n=$b(l),l=f,m=R(f),f=n):(f=N(l),k.push(f),f=O(l),l=null,m=0),n=0;else break;return k}return f};return d(a)};Fg.S=1;Fg.U=function(a){var b=N(a);a=O(a);return this.C(b,a)};var Hg=null;function Ig(){null==Hg&&(Hg=qe(new v(null,3,[Jg,ie,Kg,ie,Lg,ie],null)));return Hg}
function Mg(a,b,c){var d=P.h(b,c);if(d)return d;d=Lg.g(a);d=d.g?d.g(b):d.call(null,b);if(!(d=vd(d,c))&&(d=pd(c)))if(d=pd(b))if(d=R(c)===R(b)){d=!0;for(var e=0;;)if(d&&e!==R(c))d=Mg(a,b.g?b.g(e):b.call(null,e),c.g?c.g(e):c.call(null,e)),e+=1;else return d}else return d;else return d;else return d}function Ng(a){var b=G(Ig());a=H.h(Jg.g(b),a);return J(a)?a:null}function Og(a,b,c,d){se.h(a,function(){return G(b)});se.h(c,function(){return G(d)})}
var Pg=function Pg(a,b,c){var e=function(){var f=G(c);return f.g?f.g(a):f.call(null,a)}();e=x(x(e)?e.g?e.g(b):e.call(null,b):e)?!0:null;if(x(e))return e;e=function(){for(var f=Ng(b);;)if(0<R(f)){var h=N(f);Pg.l?Pg.l(a,h,c):Pg.call(null,a,h,c);f=xc(f)}else return null}();if(x(e))return e;e=function(){for(var f=Ng(a);;)if(0<R(f)){var h=N(f);Pg.l?Pg.l(h,b,c):Pg.call(null,h,b,c);f=xc(f)}else return null}();return x(e)?e:!1};function Qg(a,b,c,d){c=Pg(a,b,c);return x(c)?c:Mg(d,a,b)}
var Rg=function Rg(a,b,c,d,e,f,h,k){var m=Ta(function(p,q){var r=T(q,0,null);T(q,1,null);if(Mg(G(c),b,r)){p=null==p||Qg(r,N(p),e,G(c))?q:p;if(!Qg(N(p),r,e,G(c)))throw Error(["Multiple methods in multimethod '",B.g(a),"' match dispatch value: ",B.g(b)," -\x3e ",B.g(r)," and ",B.g(N(p)),", and neither is preferred"].join(""));return p}return p},null,G(d)),n=function(){var p;if(p=null==m)p=G(d),p=p.g?p.g(k):p.call(null,k);return x(p)?new V(null,2,5,X,[k,p],null):m}();if(x(n)){if(P.h(G(h),G(c)))return se.K(f,
U,b,N(O(n))),N(O(n));Og(f,d,h,c);return Rg.za?Rg.za(a,b,c,d,e,f,h,k):Rg.call(null,a,b,c,d,e,f,h,k)}return null};function Sg(a,b){throw Error(["No method in multimethod '",B.g(a),"' for dispatch value: ",B.g(b)].join(""));}function Tg(){var a=uc.h("plotly-pyclj.server","set-default-args"),b=Xg,c=Yg,d=jl,e=gm,f=hm,h=Zg,k=$g;this.name=a;this.D=h;this.hd=k;this.hierarchy=b;this.dc=c;this.md=d;this.cc=e;this.Sb=f;this.o=4194305;this.J=4352}g=Tg.prototype;
g.call=function(a){switch(arguments.length-1){case 0:return this.I();case 1:return this.g(arguments[1]);case 2:return this.h(arguments[1],arguments[2]);case 3:return this.l(arguments[1],arguments[2],arguments[3]);case 4:return this.K(arguments[1],arguments[2],arguments[3],arguments[4]);case 5:return this.P(arguments[1],arguments[2],arguments[3],arguments[4],arguments[5]);case 6:return this.xa(arguments[1],arguments[2],arguments[3],arguments[4],arguments[5],arguments[6]);case 7:return this.Pa(arguments[1],
arguments[2],arguments[3],arguments[4],arguments[5],arguments[6],arguments[7]);case 8:return this.za(arguments[1],arguments[2],arguments[3],arguments[4],arguments[5],arguments[6],arguments[7],arguments[8]);case 9:return this.Qa(arguments[1],arguments[2],arguments[3],arguments[4],arguments[5],arguments[6],arguments[7],arguments[8],arguments[9]);case 10:return this.Ea(arguments[1],arguments[2],arguments[3],arguments[4],arguments[5],arguments[6],arguments[7],arguments[8],arguments[9],arguments[10]);
case 11:return this.Fa(arguments[1],arguments[2],arguments[3],arguments[4],arguments[5],arguments[6],arguments[7],arguments[8],arguments[9],arguments[10],arguments[11]);case 12:return this.Ga(arguments[1],arguments[2],arguments[3],arguments[4],arguments[5],arguments[6],arguments[7],arguments[8],arguments[9],arguments[10],arguments[11],arguments[12]);case 13:return this.Ha(arguments[1],arguments[2],arguments[3],arguments[4],arguments[5],arguments[6],arguments[7],arguments[8],arguments[9],arguments[10],
arguments[11],arguments[12],arguments[13]);case 14:return this.Ia(arguments[1],arguments[2],arguments[3],arguments[4],arguments[5],arguments[6],arguments[7],arguments[8],arguments[9],arguments[10],arguments[11],arguments[12],arguments[13],arguments[14]);case 15:return this.Ja(arguments[1],arguments[2],arguments[3],arguments[4],arguments[5],arguments[6],arguments[7],arguments[8],arguments[9],arguments[10],arguments[11],arguments[12],arguments[13],arguments[14],arguments[15]);case 16:return this.Ka(arguments[1],
arguments[2],arguments[3],arguments[4],arguments[5],arguments[6],arguments[7],arguments[8],arguments[9],arguments[10],arguments[11],arguments[12],arguments[13],arguments[14],arguments[15],arguments[16]);case 17:return this.La(arguments[1],arguments[2],arguments[3],arguments[4],arguments[5],arguments[6],arguments[7],arguments[8],arguments[9],arguments[10],arguments[11],arguments[12],arguments[13],arguments[14],arguments[15],arguments[16],arguments[17]);case 18:return this.Ma(arguments[1],arguments[2],
arguments[3],arguments[4],arguments[5],arguments[6],arguments[7],arguments[8],arguments[9],arguments[10],arguments[11],arguments[12],arguments[13],arguments[14],arguments[15],arguments[16],arguments[17],arguments[18]);case 19:return this.Na(arguments[1],arguments[2],arguments[3],arguments[4],arguments[5],arguments[6],arguments[7],arguments[8],arguments[9],arguments[10],arguments[11],arguments[12],arguments[13],arguments[14],arguments[15],arguments[16],arguments[17],arguments[18],arguments[19]);case 20:return this.Oa(arguments[1],
arguments[2],arguments[3],arguments[4],arguments[5],arguments[6],arguments[7],arguments[8],arguments[9],arguments[10],arguments[11],arguments[12],arguments[13],arguments[14],arguments[15],arguments[16],arguments[17],arguments[18],arguments[19],arguments[20]);case 21:return this.kc(arguments[1],arguments[2],arguments[3],arguments[4],arguments[5],arguments[6],arguments[7],arguments[8],arguments[9],arguments[10],arguments[11],arguments[12],arguments[13],arguments[14],arguments[15],arguments[16],arguments[17],
arguments[18],arguments[19],arguments[20],arguments[21]);default:throw Error(["Invalid arity: ",B.g(arguments.length-1)].join(""));}};g.apply=function(a,b){return this.call.apply(this,[this].concat(Ra(b)))};g.I=function(){var a=this.D.I?this.D.I():this.D.call(null),b=ah(this,a);x(b)||Sg(this.name,a);return b.I?b.I():b.call(null)};g.g=function(a){var b=this.D.g?this.D.g(a):this.D.call(null,a),c=ah(this,b);x(c)||Sg(this.name,b);return c.g?c.g(a):c.call(null,a)};
g.h=function(a,b){var c=this.D.h?this.D.h(a,b):this.D.call(null,a,b),d=ah(this,c);x(d)||Sg(this.name,c);return d.h?d.h(a,b):d.call(null,a,b)};g.l=function(a,b,c){var d=this.D.l?this.D.l(a,b,c):this.D.call(null,a,b,c),e=ah(this,d);x(e)||Sg(this.name,d);return e.l?e.l(a,b,c):e.call(null,a,b,c)};g.K=function(a,b,c,d){var e=this.D.K?this.D.K(a,b,c,d):this.D.call(null,a,b,c,d),f=ah(this,e);x(f)||Sg(this.name,e);return f.K?f.K(a,b,c,d):f.call(null,a,b,c,d)};
g.P=function(a,b,c,d,e){var f=this.D.P?this.D.P(a,b,c,d,e):this.D.call(null,a,b,c,d,e),h=ah(this,f);x(h)||Sg(this.name,f);return h.P?h.P(a,b,c,d,e):h.call(null,a,b,c,d,e)};g.xa=function(a,b,c,d,e,f){var h=this.D.xa?this.D.xa(a,b,c,d,e,f):this.D.call(null,a,b,c,d,e,f),k=ah(this,h);x(k)||Sg(this.name,h);return k.xa?k.xa(a,b,c,d,e,f):k.call(null,a,b,c,d,e,f)};
g.Pa=function(a,b,c,d,e,f,h){var k=this.D.Pa?this.D.Pa(a,b,c,d,e,f,h):this.D.call(null,a,b,c,d,e,f,h),l=ah(this,k);x(l)||Sg(this.name,k);return l.Pa?l.Pa(a,b,c,d,e,f,h):l.call(null,a,b,c,d,e,f,h)};g.za=function(a,b,c,d,e,f,h,k){var l=this.D.za?this.D.za(a,b,c,d,e,f,h,k):this.D.call(null,a,b,c,d,e,f,h,k),m=ah(this,l);x(m)||Sg(this.name,l);return m.za?m.za(a,b,c,d,e,f,h,k):m.call(null,a,b,c,d,e,f,h,k)};
g.Qa=function(a,b,c,d,e,f,h,k,l){var m=this.D.Qa?this.D.Qa(a,b,c,d,e,f,h,k,l):this.D.call(null,a,b,c,d,e,f,h,k,l),n=ah(this,m);x(n)||Sg(this.name,m);return n.Qa?n.Qa(a,b,c,d,e,f,h,k,l):n.call(null,a,b,c,d,e,f,h,k,l)};g.Ea=function(a,b,c,d,e,f,h,k,l,m){var n=this.D.Ea?this.D.Ea(a,b,c,d,e,f,h,k,l,m):this.D.call(null,a,b,c,d,e,f,h,k,l,m),p=ah(this,n);x(p)||Sg(this.name,n);return p.Ea?p.Ea(a,b,c,d,e,f,h,k,l,m):p.call(null,a,b,c,d,e,f,h,k,l,m)};
g.Fa=function(a,b,c,d,e,f,h,k,l,m,n){var p=this.D.Fa?this.D.Fa(a,b,c,d,e,f,h,k,l,m,n):this.D.call(null,a,b,c,d,e,f,h,k,l,m,n),q=ah(this,p);x(q)||Sg(this.name,p);return q.Fa?q.Fa(a,b,c,d,e,f,h,k,l,m,n):q.call(null,a,b,c,d,e,f,h,k,l,m,n)};g.Ga=function(a,b,c,d,e,f,h,k,l,m,n,p){var q=this.D.Ga?this.D.Ga(a,b,c,d,e,f,h,k,l,m,n,p):this.D.call(null,a,b,c,d,e,f,h,k,l,m,n,p),r=ah(this,q);x(r)||Sg(this.name,q);return r.Ga?r.Ga(a,b,c,d,e,f,h,k,l,m,n,p):r.call(null,a,b,c,d,e,f,h,k,l,m,n,p)};
g.Ha=function(a,b,c,d,e,f,h,k,l,m,n,p,q){var r=this.D.Ha?this.D.Ha(a,b,c,d,e,f,h,k,l,m,n,p,q):this.D.call(null,a,b,c,d,e,f,h,k,l,m,n,p,q),w=ah(this,r);x(w)||Sg(this.name,r);return w.Ha?w.Ha(a,b,c,d,e,f,h,k,l,m,n,p,q):w.call(null,a,b,c,d,e,f,h,k,l,m,n,p,q)};
g.Ia=function(a,b,c,d,e,f,h,k,l,m,n,p,q,r){var w=this.D.Ia?this.D.Ia(a,b,c,d,e,f,h,k,l,m,n,p,q,r):this.D.call(null,a,b,c,d,e,f,h,k,l,m,n,p,q,r),A=ah(this,w);x(A)||Sg(this.name,w);return A.Ia?A.Ia(a,b,c,d,e,f,h,k,l,m,n,p,q,r):A.call(null,a,b,c,d,e,f,h,k,l,m,n,p,q,r)};
g.Ja=function(a,b,c,d,e,f,h,k,l,m,n,p,q,r,w){var A=this.D.Ja?this.D.Ja(a,b,c,d,e,f,h,k,l,m,n,p,q,r,w):this.D.call(null,a,b,c,d,e,f,h,k,l,m,n,p,q,r,w),C=ah(this,A);x(C)||Sg(this.name,A);return C.Ja?C.Ja(a,b,c,d,e,f,h,k,l,m,n,p,q,r,w):C.call(null,a,b,c,d,e,f,h,k,l,m,n,p,q,r,w)};
g.Ka=function(a,b,c,d,e,f,h,k,l,m,n,p,q,r,w,A){var C=this.D.Ka?this.D.Ka(a,b,c,d,e,f,h,k,l,m,n,p,q,r,w,A):this.D.call(null,a,b,c,d,e,f,h,k,l,m,n,p,q,r,w,A),E=ah(this,C);x(E)||Sg(this.name,C);return E.Ka?E.Ka(a,b,c,d,e,f,h,k,l,m,n,p,q,r,w,A):E.call(null,a,b,c,d,e,f,h,k,l,m,n,p,q,r,w,A)};
g.La=function(a,b,c,d,e,f,h,k,l,m,n,p,q,r,w,A,C){var E=this.D.La?this.D.La(a,b,c,d,e,f,h,k,l,m,n,p,q,r,w,A,C):this.D.call(null,a,b,c,d,e,f,h,k,l,m,n,p,q,r,w,A,C),M=ah(this,E);x(M)||Sg(this.name,E);return M.La?M.La(a,b,c,d,e,f,h,k,l,m,n,p,q,r,w,A,C):M.call(null,a,b,c,d,e,f,h,k,l,m,n,p,q,r,w,A,C)};
g.Ma=function(a,b,c,d,e,f,h,k,l,m,n,p,q,r,w,A,C,E){var M=this.D.Ma?this.D.Ma(a,b,c,d,e,f,h,k,l,m,n,p,q,r,w,A,C,E):this.D.call(null,a,b,c,d,e,f,h,k,l,m,n,p,q,r,w,A,C,E),W=ah(this,M);x(W)||Sg(this.name,M);return W.Ma?W.Ma(a,b,c,d,e,f,h,k,l,m,n,p,q,r,w,A,C,E):W.call(null,a,b,c,d,e,f,h,k,l,m,n,p,q,r,w,A,C,E)};
g.Na=function(a,b,c,d,e,f,h,k,l,m,n,p,q,r,w,A,C,E,M){var W=this.D.Na?this.D.Na(a,b,c,d,e,f,h,k,l,m,n,p,q,r,w,A,C,E,M):this.D.call(null,a,b,c,d,e,f,h,k,l,m,n,p,q,r,w,A,C,E,M),ja=ah(this,W);x(ja)||Sg(this.name,W);return ja.Na?ja.Na(a,b,c,d,e,f,h,k,l,m,n,p,q,r,w,A,C,E,M):ja.call(null,a,b,c,d,e,f,h,k,l,m,n,p,q,r,w,A,C,E,M)};
g.Oa=function(a,b,c,d,e,f,h,k,l,m,n,p,q,r,w,A,C,E,M,W){var ja=this.D.Oa?this.D.Oa(a,b,c,d,e,f,h,k,l,m,n,p,q,r,w,A,C,E,M,W):this.D.call(null,a,b,c,d,e,f,h,k,l,m,n,p,q,r,w,A,C,E,M,W),Ba=ah(this,ja);x(Ba)||Sg(this.name,ja);return Ba.Oa?Ba.Oa(a,b,c,d,e,f,h,k,l,m,n,p,q,r,w,A,C,E,M,W):Ba.call(null,a,b,c,d,e,f,h,k,l,m,n,p,q,r,w,A,C,E,M,W)};
g.kc=function(a,b,c,d,e,f,h,k,l,m,n,p,q,r,w,A,C,E,M,W,ja){var Ba=ee(this.D,a,b,c,d,Xc([e,f,h,k,l,m,n,p,q,r,w,A,C,E,M,W,ja])),wd=ah(this,Ba);x(wd)||Sg(this.name,Ba);return ee(wd,a,b,c,d,Xc([e,f,h,k,l,m,n,p,q,r,w,A,C,E,M,W,ja]))};function bh(a,b){var c=ch;se.K(c.dc,U,a,b);Og(c.cc,c.dc,c.Sb,c.hierarchy)}function ah(a,b){P.h(G(a.Sb),G(a.hierarchy))||Og(a.cc,a.dc,a.Sb,a.hierarchy);var c=G(a.cc);c=c.g?c.g(b):c.call(null,b);return x(c)?c:Rg(a.name,b,a.hierarchy,a.dc,a.md,a.cc,a.Sb,a.hd)}g.Eb=function(){return ac(this.name)};
g.Fb=function(){return bc(this.name)};g.T=function(){return ca(this)};"undefined"!==typeof console&&Ma();Ma();var zg=new I(null,"val","val",128701612),dh=new I(null,"on-change","on-change",-732046149),eh=new I(null,"render","render",-1408033454),Vl=new I(null,"flex","flex",-1425124628),fh=new I(null,"layout","layout",-2120940921),gh=new I(null,"msg-format","msg-format",2026575331),Wl=new I(null,"button","button",1456579943),hh=new I(null,"auto-run","auto-run",1958400437),Ja=new I(null,"meta","meta",1499536964),ih=new I(null,"displayName","displayName",-809144601),jh=new I(null,"on-dispose","on-dispose",2105306360),
kh=new I(null,"data","data",-232669377),lh=new I(null,"getDerivedStateFromError","getDerivedStateFromError",166658477),Xl=new I(null,"align-items","align-items",-267946462),mh=new I(null,"green","green",-945526839),Yl=new I(null,"space-between","space-between",1908176695),Zl=new I(null,"margin-left","margin-left",2015598377),nh=new I(null,"constructor","constructor",-1953928811),oh=new I(null,"handlers","handlers",79528781),ph=new I(null,"childContextTypes","childContextTypes",578717991),qh=new I(null,
"input","input",556931961),rh=new I(null,"\x3e","\x3e",-555517146),Kg=new I(null,"descendants","descendants",1824886031),sh=new I(null,"on-key-press","on-key-press",-399563677),th=new I(null,"class","class",-2030961996),uh=new I(null,"numeric","numeric",-1495594714),vh=new I(null,"label","label",1718410804),wh=new I(null,"title","title",636505583),$l=new I(null,"on-click","on-click",1632826543),xh=new I(null,"cljsLegacyRender","cljsLegacyRender",-1527295613),yh=new I(null,"color","color",1011675173),
zh=new I(null,"port","port",1534937262),Ah=new I(null,"reagentRender","reagentRender",-358306383),Bh=new I(null,"name","name",1843675177),am=new I(null,"padding","padding",1660304693),Ch=new I(null,"getInitialState","getInitialState",1541760916),sg=new I(null,"alt-impl","alt-impl",670969595),bm=new I(null,"center","center",-748944368),Dh=new I(null,"on-set","on-set",-140953470),Eh=new I(null,"display","display",242065432),Fh=new I(null,"path","path",-188191168),bg=new I("cljs.core","not-found","cljs.core/not-found",
-1572889185),$g=new I(null,"default","default",-1987822328),Gh=new I(null,"no-cache","no-cache",1588056370),Hh=new I(null,"transit","transit",359458387),Ih=new I(null,"\x3c\x3e","\x3c\x3e",1280186386),Ka=new I(null,"dup","dup",556298533),Jh=new I(null,"margin","margin",-995903681),Kh=new I(null,"displaylogo","displaylogo",1531477828),La=new I(null,"print-length","print-length",1931866356),Lh=new I(null,"useResizeHandler","useResizeHandler",-1748859262),Mh=new I(null,"json","json",1279968570),Ha=new I(null,
"flush-on-newline","flush-on-newline",-151457939),Nh=new I(null,"component-did-update","component-did-update",-1468549173),Oh=new I(null,"reagent-render","reagent-render",-985383853),Ph=new I(null,"displayModeBar","displayModeBar",-1187531817),Qh=new I(null,"function-components","function-components",1492814963),Rh=new I(null,"hierarchy","hierarchy",-1053470341),Sh=new I(null,"on-write","on-write",31519475),Th=new I(null,"key","key",-1516042587),Uh=new I(null,"toImageButtonOptions","toImageButtonOptions",
-347346271),Vh=new I(null,"componentWillUnmount","componentWillUnmount",1573788814),Wh=new I(null,"scale","scale",-230427353),Xh=new I(null,"contextType","contextType",1033066077),Yh=new I(null,"form","form",-1624062471),Jg=new I(null,"parents","parents",-2027538891),Zh=new I(null,"getDerivedStateFromProps","getDerivedStateFromProps",-991834739),$h=new I(null,"validator","validator",-1966190681),ai=new I(null,"red","red",-969428204),bi=new I(null,"div","div",1057191632),ci=new I(null,"value","value",
305978217),tg=new I(null,"fallback-impl","fallback-impl",-1501286995),di=new I(null,"display-name","display-name",694513143),ei=new I(null,"height","height",1025178622),Ia=new I(null,"readably","readably",1129599760),fi=new I(null,"contextTypes","contextTypes",-2023853910),Gg=new I(null,"keyword-fn","keyword-fn",-64566675),gi=new I(null,"on-blur","on-blur",814300747),hi=new I(null,"shouldComponentUpdate","shouldComponentUpdate",1795750960),ii=new I(null,"for","for",-1323786319),ji=new I(null,"config",
"config",994861415),ki=new I(null,"id","id",-1388402092),li=new I(null,"width","width",-384071477),mi=new I(null,"component-will-unmount","component-will-unmount",-2058314698),ni=new I(null,"inline","inline",1399884222),oi=new I(null,"className","className",-1983287057),pi=new I(null,"autosize","autosize",-724145344),cm=new I(null,"justify-content","justify-content",-1990475787),Zg=new I(null,"format","format",-1306924766),qi=new I(null,"editable","editable",1930280326),dm=new I(null,"margin-right",
"margin-right",809689658),ri=new I(null,"type","type",1174270348),si=new I(null,"style","style",-496642736),ti=new I(null,"callback","callback",-705136228),Lg=new I(null,"ancestors","ancestors",-776045424),jg=new I(null,"more-marker","more-marker",-14717935);var ui={},vi={},wi=[];function xi(a,b){var c=vi[a];if(void 0!==c)return c;try{wi.push(a);var d=ui[a],e=shadow$provide[a];if(void 0===d){if(void 0===e)throw"Module not provided: "+a;d={exports:{}};ui[a]=d}if(e){delete shadow$provide[a];try{e.call(d,ba,xi,d,d.exports)}catch(h){throw console.warn("shadow-cljs - failed to load",a),h;}if(b){var f=b.globals;if(f)for(a=0;a<f.length;a++)window[f[a]]=d.exports}}}finally{wi.pop()}return d.exports}xi.cache={};xi.resolve=function(a){return a};var yi=xi(3,{});var zi=xi(14,{});function Ai(a,b,c){var d=R(a);if(c>=d)return-1;!(0<c)&&0>c&&(c+=d,c=0>c?0:c);for(;;)if(c<d){if(P.h(Sc(a,c),b))return c;c+=1}else return-1}function Bi(a,b,c){var d=R(a);if(0===d)return-1;0<c?(--d,c=d<c?d:c):c=0>c?d+c:c;for(;;)if(0<=c){if(P.h(Sc(a,c),b))return c;--c}else return-1}function Ci(a,b){if(md(b))if(Qc(a)&&Qc(b)&&R(a)!==R(b))a=!1;else a:for(a=J(a),b=J(b);;){if(null==a){a=null==b;break a}if(null!=b&&P.h(N(a),N(b)))a=O(a),b=O(b);else{a=!1;break a}}else a=null;return td(a)}
function Di(a,b){var c=a.Y(null);if(0===c)return b.I?b.I():b.call(null);for(var d=a.N(null,0),e=1;;)if(e<c){var f=a.N(null,e);d=b.h?b.h(d,f):b.call(null,d,f);if(Jc(d))return G(d);e+=1}else return d}function Ei(a,b,c){var d=a.Y(null),e=c;for(c=0;;)if(c<d){var f=a.N(null,c);e=b.h?b.h(e,f):b.call(null,e,f);if(Jc(e))return G(e);c+=1}else return e};var Fi={};function Gi(a){return"number"===typeof a||"string"===typeof a||!0===a||!1===a||null==a}function Hi(a,b,c,d){var e=null!=d?d.g?d.g(a):d.call(null,a):null;return null==e?Gi(a)?a:null!=a&&a.constructor===Object?new Ii(null,a,b,c,d,!0,null,null,null):Na(a)?new Ji(null,b,c,d,a,null):a:e}function Ki(a){return Gi(a)?a:a instanceof Ii?a.obj:a instanceof Ji?a.j:a}var Li=ie;
function Mi(a,b,c,d,e){var f=new te(Tb(Li));sa(a,function(h,k){var l=f.Ca(null);k=b.g?b.g(k):b.call(null,k);h=x(e)?Hi(h,b,c,d):h;l=Wb(l,k,h);return f.state=l});return Vb(G(f))}function Ni(a,b,c,d,e,f,h){h=f[h];f=b.g?b.g(h):b.call(null,h);a=a[h];b=e?Hi(a,b,c,d):a;return new Pe(f,b)}function Oi(a,b){return a instanceof I&&b===Kd||"string"===typeof a&&b===Dd}function Pi(a,b){return Gi(a)||!(nd(a)&&!(a instanceof Ii)||pd(a)&&!(a instanceof Ji))&&Oa(x(b)?(null!=a?a.constructor===Object:!1)||Na(a):b)}
function Qi(a,b,c,d,e,f){this.qa=!0;this.obj=a;this.F=b;this.A=c;this.transform=d;this.W=e;this.Wa=f;this.o=259;this.J=56}g=Qi.prototype;g.na=function(a,b){if(this.qa)return a=this.obj[this.A.g?this.A.g(b):this.A.call(null,b)],this.W?Hi(a,this.F,this.A,this.transform):a;throw Error("lookup after persistent!");};g.O=function(a,b,c){if(this.qa)return a=ua(this.obj,this.A.g?this.A.g(b):this.A.call(null,b),c),this.W&&a!==c?Hi(a,this.F,this.A,this.transform):a;throw Error("lookup after persistent!");};
g.Y=function(){return null==this.Wa?this.Wa=R(ta(this.obj)):this.Wa};g.eb=function(a,b){a:if(x(this.qa))if(Xe(b))a=this.cb(null,pb(b),qb(b));else if(pd(b))a=this.cb(null,b.g?b.g(0):b.call(null,0),b.g?b.g(1):b.call(null,1));else for(a=J(b),b=this;;){var c=N(a);if(x(c))a=O(a),b=Wb(b,pb(c),qb(c));else{a=b;break a}}else throw Error("conj! after persistent!");return a};
g.sb=function(){if(this.qa)return this.qa=!1,new Ii(null,this.obj,this.F,this.A,this.transform,this.W,null,this.Wa,null);throw Error("persistent! called twice");};g.cb=function(a,b,c){if(this.qa){if(!Oi(b,this.F)||!Pi(c,this.W))return Wb(Tb(Mi(this.obj,this.F,this.A,this.transform,this.W)),b,c);this.obj[this.A.g?this.A.g(b):this.A.call(null,b)]=this.W?Ki(c):c;this.Wa=null;return this}throw Error("assoc! after persistent!");};
g.call=function(a){switch(arguments.length-1){case 1:return this.g(arguments[1]);case 2:return this.h(arguments[1],arguments[2]);default:throw Error(["Invalid arity: ",B.g(arguments.length-1)].join(""));}};g.apply=function(a,b){return this.call.apply(this,[this].concat(Ra(b)))};g.g=function(a){if(this.qa)return a=this.obj[this.A.g?this.A.g(a):this.A.call(null,a)],this.W?Hi(a,this.F,this.A,this.transform):a;throw Error("lookup after persistent!");};
g.h=function(a,b){if(this.qa)return a=ua(this.obj,this.A.g?this.A.g(a):this.A.call(null,a),b),this.W&&a!==b?Hi(a,this.F,this.A,this.transform):a;throw Error("lookup after persistent!");};function Ri(a,b,c,d,e,f,h){this.obj=a;this.F=b;this.A=c;this.transform=d;this.W=e;this.j=f;this.v=0;this.s=h}Ri.prototype.hasNext=function(){return this.v<this.s};Ri.prototype.next=function(){var a=Ni(this.obj,this.F,this.A,this.transform,this.W,this.j,this.v);this.v+=1;return a};
function Si(a,b,c,d,e,f,h,k){this.obj=a;this.F=b;this.A=c;this.transform=d;this.W=e;this.j=f;this.v=h;this.meta=k;this.o=2179858686;this.J=8192}g=Si.prototype;g.toString=function(){return ic(this)};g.equiv=function(a){return this.G(null,a)};g.indexOf=function(){var a=null;a=function(b,c){switch(arguments.length){case 1:return Ai(this,b,0);case 2:return Ai(this,b,c)}throw Error("Invalid arity: "+arguments.length);};a.g=function(b){return Ai(this,b,0)};a.h=function(b,c){return Ai(this,b,c)};return a}();
g.lastIndexOf=function(){function a(c){return Bi(this,c,R(this))}var b=null;b=function(c,d){switch(arguments.length){case 1:return a.call(this,c);case 2:return Bi(this,c,d)}throw Error("Invalid arity: "+arguments.length);};b.g=a;b.h=function(c,d){return Bi(this,c,d)};return b}();g.N=function(a,b){a=b+this.v;if(0<=a&&a<this.j.length)return Ni(this.obj,this.F,this.A,this.transform,this.W,this.j,a);throw Error("Index out of bounds");};
g.ka=function(a,b,c){a=b+this.v;return 0<=a&&a<this.j.length?Ni(this.obj,this.F,this.A,this.transform,this.W,this.j,a):c};g.X=function(a,b,c){return ig(b,qg,"("," ",")",c,this)};g.da=function(){return this.meta};g.sa=function(){return this.v+1<this.j.length?new Si(this.obj,this.F,this.A,this.transform,this.W,this.j,this.v+1,null):null};g.Y=function(){var a=this.j.length-this.v;return 0>a?0:a};g.T=function(){return Dc(this)};g.G=function(a,b){return Ci(this,b)};g.ha=function(){return yc};
g.oa=function(a,b){return Di(this,b)};g.pa=function(a,b,c){return Ei(this,b,c)};g.ta=function(){return Ni(this.obj,this.F,this.A,this.transform,this.W,this.j,this.v)};g.ua=function(){return this.v+1<this.j.length?new Si(this.obj,this.F,this.A,this.transform,this.W,this.j,this.v+1,null):yc};g.Z=function(){return this};g.ga=function(a,b){return b===this.meta?this:new Si(this.obj,this.F,this.A,this.transform,this.W,this.j,this.v,b)};g.ia=function(a,b){return Wc(b,this)};
function Ii(a,b,c,d,e,f,h,k,l){this.meta=a;this.obj=b;this.F=c;this.A=d;this.transform=e;this.W=f;this.Va=h;this.Wa=k;this.H=l;this.o=2164131599;this.J=139268}g=Ii.prototype;g.lb=function(a,b){a=ua(this.obj,this.A.g?this.A.g(b):this.A.call(null,b),Fi);return a===Fi?null:new Pe(b,this.W?Hi(a,this.F,this.A,this.transform):a)};g.toString=function(){return ic(this)};g.equiv=function(a){return this.G(null,a)};g.keys=function(){return Ac(of(this))};g.entries=function(){return new kf(J(J(this)))};
g.values=function(){return Ac(pf(this))};g.has=function(a){return vd(this,a)};g.get=function(a,b){return this.O(null,a,b)};g.forEach=function(a){for(var b=J(this),c=null,d=0,e=0;;)if(e<d){var f=c.N(null,e),h=T(f,0,null);f=T(f,1,null);a.h?a.h(f,h):a.call(null,f,h);e+=1}else if(b=J(b))qd(b)?(c=Zb(b),b=$b(b),h=c,d=R(c),c=h):(c=N(b),h=T(c,0,null),f=T(c,1,null),a.h?a.h(f,h):a.call(null,f,h),b=O(b),c=null,d=0),e=0;else return null};
g.na=function(a,b){a=this.obj[this.A.g?this.A.g(b):this.A.call(null,b)];return this.W?Hi(a,this.F,this.A,this.transform):a};g.O=function(a,b,c){a=ua(this.obj,this.A.g?this.A.g(b):this.A.call(null,b),c);return this.W&&a!==c?Hi(a,this.F,this.A,this.transform):a};
g.mb=function(a,b,c){var d=this;try{var e=new te(c);sa(d.obj,function(f,h){var k=e.Ca(null);h=d.F.g?d.F.g(h):d.F.call(null,h);f=d.W?Hi(f,d.F,d.A,d.transform):f;k=b.l?b.l(k,h,f):b.call(null,k,h,f);k=e.state=k;if(Jc(k))throw k;return null});return G(e)}catch(f){a=f;if(Jc(a))return G(a);throw a;}};g.X=function(a,b,c){return rg(this,qg,b,c)};g.Aa=function(){null==this.Va&&(this.Va=ta(this.obj));return new Ri(this.obj,this.F,this.A,this.transform,this.W,this.Va,this.Y(null))};g.da=function(){return this.meta};
g.Y=function(){return null==this.Wa?(null==this.Va&&(this.Va=ta(this.obj)),this.Wa=this.Va.length):this.Wa};g.T=function(){var a=this.H;return null!=a?a:this.H=a=Fc(this)};g.G=function(a,b){return jf(this,b)};g.kb=function(){return new Qi(va(this.obj),this.F,this.A,this.transform,this.W,this.Wa)};g.ha=function(){return new Ii(this.meta,{},this.F,this.A,this.transform,this.W,[],0,null)};g.oa=function(a,b){return Cb(this.Z(null),b)};
g.pa=function(a,b,c){return this.mb(null,function(d,e,f){e=new Pe(e,f);return b.h?b.h(d,e):b.call(null,d,e)},c)};g.Ub=function(a,b){a=this.meta;var c=va(this.obj);delete c[this.A.g?this.A.g(b):this.A.call(null,b)];return new Ii(a,c,this.F,this.A,this.transform,this.W,null,null,null)};
g.Sa=function(a,b,c){if(Oi(b,this.F)&&Pi(c,this.W)){a=this.meta;var d=va(this.obj);d[this.A.g?this.A.g(b):this.A.call(null,b)]=this.W?Ki(c):c;b=new Ii(a,d,this.F,this.A,this.transform,this.W,null,null,null)}else b=lb(gd(Mi(this.obj,this.F,this.A,this.transform,this.W),this.meta),b,c);return b};g.Ra=function(a,b){return vd(this,b)};g.Z=function(){null==this.Va&&(this.Va=ta(this.obj));return 0<this.Va.length?new Si(this.obj,this.F,this.A,this.transform,this.W,this.Va,0,null):null};
g.ga=function(a,b){return b===this.meta?this:new Ii(b,this.obj,this.F,this.A,this.transform,this.W,this.Va,this.Wa,this.H)};g.ia=function(a,b){a:if(pd(b))a=this.Sa(null,D(b,0),D(b,1));else for(a=this,b=J(b);;){if(null==b)break a;var c=N(b);if(pd(c))a=lb(a,D(c,0),D(c,1)),b=O(b);else throw Error("conj on a map takes map entries or seqables of map entries");}return a};
g.call=function(a){switch(arguments.length-1){case 1:return this.g(arguments[1]);case 2:return this.h(arguments[1],arguments[2]);default:throw Error(["Invalid arity: ",B.g(arguments.length-1)].join(""));}};g.apply=function(a,b){return this.call.apply(this,[this].concat(Ra(b)))};g.g=function(a){a=this.obj[this.A.g?this.A.g(a):this.A.call(null,a)];return this.W?Hi(a,this.F,this.A,this.transform):a};
g.h=function(a,b){a=ua(this.obj,this.A.g?this.A.g(a):this.A.call(null,a),b);return this.W&&a!==b?Hi(a,this.F,this.A,this.transform):a};function Ti(a,b,c,d){this.qa=!0;this.j=a;this.F=b;this.A=c;this.transform=d;this.J=88;this.o=275}g=Ti.prototype;g.eb=function(a,b){if(this.qa)return Pi(b,!0)?(this.j.push(Ki(b)),this):Ub(Tb(We(this.j)),b);throw Error("conj! after persistent!");};
g.sb=function(){if(this.qa)return this.qa=!1,new Ji(null,this.F,this.A,this.transform,this.j,null);throw Error("persistent! called twice");};g.cb=function(a,b,c){if("number"===typeof b)a=this.Hb(null,b,c);else throw Error([B.g("TransientArrayVector"),"'s key for assoc! must be a number."].join(""));return a};
g.Hb=function(a,b,c){if(this.qa){if(Pi(c,!0)){if(0<=b&&b<this.j.length)return this.j[b]=Ki(c),this;if(b===this.j.length)return this.eb(null,c);throw Error(["Index ",B.g(b)," out of bounds for TransientArrayVector of length",B.g(this.j.length)].join(""));}return Xb(Tb(We(this.j)),b,c)}throw Error("assoc! after persistent!");};g.Y=function(){if(this.qa)return this.j.length;throw Error("count after persistent!");};
g.N=function(a,b){if(this.qa)return Hi(this.j[b],this.F,this.A,this.transform);throw Error("nth after persistent!");};g.ka=function(a,b,c){return 0<=b&&b<this.j.length?this.N(null,b):c};g.na=function(a,b){return this.O(null,b,null)};g.O=function(a,b,c){return"number"===typeof b?this.ka(null,b,c):c};
g.call=function(a){switch(arguments.length-1){case 1:return this.g(arguments[1]);case 2:return this.h(arguments[1],arguments[2]);default:throw Error(["Invalid arity: ",B.g(arguments.length-1)].join(""));}};g.apply=function(a,b){return this.call.apply(this,[this].concat(Ra(b)))};g.g=function(a){return this.na(null,a)};g.h=function(a,b){return this.O(null,a,b)};function Ui(a,b,c,d,e){this.F=a;this.A=b;this.transform=c;this.j=d;this.v=0;this.s=e}Ui.prototype.hasNext=function(){return this.v<this.s};
Ui.prototype.next=function(){var a=Hi(this.j[this.v],this.F,this.A,this.transform);this.v+=1;return a};function Vi(a,b,c,d,e,f){this.F=a;this.A=b;this.transform=c;this.j=d;this.v=e;this.meta=f;this.o=2179858686;this.J=8192}g=Vi.prototype;g.toString=function(){return ic(this)};g.equiv=function(a){return this.G(null,a)};
g.indexOf=function(){var a=null;a=function(b,c){switch(arguments.length){case 1:return Ai(this,b,0);case 2:return Ai(this,b,c)}throw Error("Invalid arity: "+arguments.length);};a.g=function(b){return Ai(this,b,0)};a.h=function(b,c){return Ai(this,b,c)};return a}();
g.lastIndexOf=function(){function a(c){return Bi(this,c,R(this))}var b=null;b=function(c,d){switch(arguments.length){case 1:return a.call(this,c);case 2:return Bi(this,c,d)}throw Error("Invalid arity: "+arguments.length);};b.g=a;b.h=function(c,d){return Bi(this,c,d)};return b}();g.N=function(a,b){a=b+this.v;if(0<=a&&a<this.j.length)return Hi(this.j[a],this.F,this.A,this.transform);throw Error("Index out of bounds");};
g.ka=function(a,b,c){a=b+this.v;return 0<=a&&a<this.j.length?Hi(this.j[a],this.F,this.A,this.transform):c};g.X=function(a,b,c){return ig(b,qg,"("," ",")",c,this)};g.da=function(){return this.meta};g.sa=function(){return this.v+1<this.j.length?new Vi(this.F,this.A,this.transform,this.j,this.v+1,null):null};g.Y=function(){var a=this.j.length-this.v;return 0>a?0:a};g.T=function(){return Dc(this)};g.G=function(a,b){return Ci(this,b)};g.ha=function(){return yc};g.oa=function(a,b){return Di(this,b)};
g.pa=function(a,b,c){return Ei(this,b,c)};g.ta=function(){return Hi(this.j[this.v],this.F,this.A,this.transform)};g.ua=function(){return this.v+1<this.j.length?new Vi(this.F,this.A,this.transform,this.j,this.v+1,null):yc};g.Z=function(){return this};g.ga=function(a,b){return b===this.meta?this:new Vi(this.F,this.A,this.transform,this.j,this.v,b)};g.ia=function(a,b){return Wc(b,this)};
function Ji(a,b,c,d,e,f){this.meta=a;this.F=b;this.A=c;this.transform=d;this.j=e;this.H=f;this.o=2315150111;this.J=141316}g=Ji.prototype;g.lb=function(a,b){return 0<=b&&b<this.j.length?new Pe(b,Hi(this.j[b],this.F,this.A,this.transform)):null};g.toString=function(){return ic(this)};g.equiv=function(a){return this.G(null,a)};
g.indexOf=function(){var a=null;a=function(b,c){switch(arguments.length){case 1:return Ai(this,b,0);case 2:return Ai(this,b,c)}throw Error("Invalid arity: "+arguments.length);};a.g=function(b){return Ai(this,b,0)};a.h=function(b,c){return Ai(this,b,c)};return a}();
g.lastIndexOf=function(){var a=null;a=function(b,c){switch(arguments.length){case 1:return Bi(this,b,R(this));case 2:return Bi(this,b,c)}throw Error("Invalid arity: "+arguments.length);};a.g=function(b){return Bi(this,b,R(this))};a.h=function(b,c){return Bi(this,b,c)};return a}();g.na=function(a,b){return this.O(null,b,null)};g.O=function(a,b,c){return"number"===typeof b?this.ka(null,b,c):c};
g.mb=function(a,b,c){a=0;for(var d=c;;)if(a<this.j.length){c=this.j.length;var e;a:for(e=0;;)if(e<c){var f=e+a,h=Hi(this.j[e],this.F,this.A,this.transform);d=b.l?b.l(d,f,h):b.call(null,d,f,h);if(Jc(d)){e=d;break a}e+=1}else{e=d;break a}if(Jc(e))return G(e);a+=c;d=e}else return d};g.N=function(a,b){if(0<=b&&b<this.j.length)return Hi(this.j[b],this.F,this.A,this.transform);throw Error(["No item ",B.g(b)," in vector of length ",B.g(this.j.length)].join(""));};
g.ka=function(a,b,c){return 0<=b&&b<this.j.length?Hi(this.j[b],this.F,this.A,this.transform):c};g.X=function(a,b,c){return ig(b,qg,"["," ","]",c,this)};g.fb=function(a,b,c){if(0<=b&&b<this.j.length)return Pi(c,!0)?(a=Ra(this.j),a[b]=Ki(c),new Ji(this.meta,this.F,this.A,this.transform,a,null)):wb(We(this.j),b,c);if(b===this.j.length)return this.ia(null,c);throw Error(["Index ",B.g(b)," out of bounds  [0,",B.g(this.j.length),"]"].join(""));};
g.Aa=function(){return new Ui(this.F,this.A,this.transform,this.j,this.j.length)};g.da=function(){return this.meta};g.Y=function(){return this.j.length};g.qb=function(){return 0<this.j.length?this.N(null,this.j.length-1):null};g.rb=function(){if(0===this.j.length)throw Error("Can't pop empty vector");if(1===this.j.length)return this.ha(null);var a=Ra(this.j);return new Ji(this.meta,this.F,this.A,this.transform,a.slice(0,a.length-1),null)};g.T=function(){var a=this.H;return null!=a?a:this.H=a=Dc(this)};
g.G=function(a,b){a:if(b instanceof Ji)if(this.j.length===R(b))for(a=this.Aa(null),b=gc(b);;)if(a.hasNext()){var c=a.next(),d=b.next();if(!P.h(c,d)){a=!1;break a}}else{a=!0;break a}else a=!1;else a=Ci(this,b);return a};g.kb=function(){return new Ti(Ra(this.j),this.F,this.A,this.transform)};g.ha=function(){return new Ji(this.meta,this.F,this.A,this.transform,[],null)};g.oa=function(a,b){return Di(this,b)};g.pa=function(a,b,c){return Ei(this,b,c)};
g.Sa=function(a,b,c){if("number"===typeof b)a=this.fb(null,b,c);else throw Error("Vector's key for assoc must be a number.");return a};g.Ra=function(a,b){return Wg(b)?0<=b&&b<this.j.length:!1};g.Z=function(){return 0<this.j.length?new Vi(this.F,this.A,this.transform,this.j,0,null):null};g.ga=function(a,b){return b===this.meta?this:new Ji(b,this.F,this.A,this.transform,this.j,this.H)};
g.ia=function(a,b){return Pi(b,!0)?(a=Ra(this.j),a[a.length]=Ki(b),new Ji(this.meta,this.F,this.A,this.transform,a,null)):cb(We(this.j),b)};g.call=function(a){switch(arguments.length-1){case 1:return this.g(arguments[1]);case 2:return this.h(arguments[1],arguments[2]);default:throw Error(["Invalid arity: ",B.g(arguments.length-1)].join(""));}};g.apply=function(a,b){return this.call.apply(this,[this].concat(Ra(b)))};g.g=function(a){return this.N(null,a)};g.h=function(a,b){return this.ka(null,a,b)};
function Wi(a){return a instanceof I?a.Ba:null}function Xi(a){return a instanceof Ii?a.obj:a instanceof Ji?a.j:Fg.C(a,Xc([Gg,Wi]))};var Yi="undefined"!=typeof Object.keys?function(a){return Object.keys(a)}:function(a){return ta(a)},Zi="undefined"!=typeof Array.isArray?function(a){return Array.isArray(a)}:function(a){return"array"===t(a)};function $i(){Math.round(15*Math.random()).toString(16)};function aj(){this.idx=0;this.cache=[]}aj.prototype.write=function(a){1936==this.idx&&(this.idx=0);this.cache[this.idx]=a;this.idx++;return a};aj.prototype.read=function(a){return this.cache[2===a.length?a.charCodeAt(1)-48:44*(a.charCodeAt(1)-48)+(a.charCodeAt(2)-48)]};aj.prototype.clear=function(){this.idx=0};var bj=1;function cj(a,b){if(null==a)return null==b;if(a===b)return!0;if("object"===typeof a){if(Zi(a)){if(Zi(b)&&a.length===b.length){for(var c=0;c<a.length;c++)if(!cj(a[c],b[c]))return!1;return!0}return!1}if(a.Ta)return a.Ta(b);if(null!=b&&"object"===typeof b){if(b.Ta)return b.Ta(a);c=0;var d=Yi(b).length,e;for(e in a)if(a.hasOwnProperty(e)&&(c++,!b.hasOwnProperty(e)||!cj(a[e],b[e])))return!1;return c===d}}return!1}function dj(a,b){return a^b+2654435769+(a<<6)+(a>>2)}var ej={},fj=0;
function gj(a){var b=0;if(null!=a.forEach)a.forEach(function(h,k){b=(b+(hj(k)^hj(h)))%4503599627370496});else for(var c=Yi(a),d=0;d<c.length;d++){var e=c[d],f=a[e];b=(b+(hj(e)^hj(f)))%4503599627370496}return b}function ij(a){var b=0;if(Zi(a))for(var c=0;c<a.length;c++)b=dj(b,hj(a[c]));else a.forEach&&a.forEach(function(d){b=dj(b,hj(d))});return b}
function hj(a){if(null==a)return 0;switch(typeof a){case "number":return a;case "boolean":return!0===a?1:0;case "string":var b=ej[a];if(null!=b)a=b;else{for(var c=b=0;c<a.length;++c)b=31*b+a.charCodeAt(c),b%=4294967296;fj++;256<=fj&&(ej={},fj=1);a=ej[a]=b}return a;case "function":return b=a.transit$hashCode$,b||(b=bj,"undefined"!=typeof Object.defineProperty?Object.defineProperty(a,"transit$hashCode$",{value:b,enumerable:!1}):a.transit$hashCode$=b,bj++),b;default:return a instanceof Date?a.valueOf():
Zi(a)?ij(a):a.Xa?a.Xa():gj(a)}};var jj="undefined"!=typeof Symbol?Symbol.iterator:"@@iterator";function kj(a,b){this.tag=a;this.rep=b;this.ea=-1}kj.prototype.toString=function(){return"[TaggedValue: "+this.tag+", "+this.rep+"]"};kj.prototype.equiv=function(a){return cj(this,a)};kj.prototype.equiv=kj.prototype.equiv;kj.prototype.Ta=function(a){return a instanceof kj?this.tag===a.tag&&cj(this.rep,a.rep):!1};kj.prototype.Xa=function(){-1===this.ea&&(this.ea=dj(hj(this.tag),hj(this.rep)));return this.ea};
function lj(a,b){return new kj(a,b)}var mj=qa("9007199254740991"),nj=qa("-9007199254740991");fa.prototype.equiv=function(a){return cj(this,a)};fa.prototype.equiv=fa.prototype.equiv;fa.prototype.Ta=function(a){return a instanceof fa&&this.equals(a)};fa.prototype.Xa=function(){return this.ba};function oj(a){this._name=a;this.ea=-1}oj.prototype.toString=function(){return":"+this._name};oj.prototype.namespace=function(){var a=this._name.indexOf("/");return-1!=a?this._name.substring(0,a):null};
oj.prototype.name=function(){var a=this._name.indexOf("/");return-1!=a?this._name.substring(a+1,this._name.length):this._name};oj.prototype.equiv=function(a){return cj(this,a)};oj.prototype.equiv=oj.prototype.equiv;oj.prototype.Ta=function(a){return a instanceof oj&&this._name==a._name};oj.prototype.Xa=function(){-1===this.ea&&(this.ea=hj(this._name));return this.ea};function pj(a){this._name=a;this.ea=-1}
pj.prototype.namespace=function(){var a=this._name.indexOf("/");return-1!=a?this._name.substring(0,a):null};pj.prototype.name=function(){var a=this._name.indexOf("/");return-1!=a?this._name.substring(a+1,this._name.length):this._name};pj.prototype.toString=function(){return this._name};pj.prototype.equiv=function(a){return cj(this,a)};pj.prototype.equiv=pj.prototype.equiv;pj.prototype.Ta=function(a){return a instanceof pj&&this._name==a._name};
pj.prototype.Xa=function(){-1===this.ea&&(this.ea=hj(this._name));return this.ea};function qj(a,b,c){var d="";c=c||b+1;for(var e=8*(7-b),f=(new fa(255,0)).shiftLeft(e);b<c;b++,e-=8,f=oa(f,8)){var h=oa(a.and(f),e).toString(16);1==h.length&&(h="0"+h);d+=h}return d}function rj(a,b){this.high=a;this.low=b;this.ea=-1}rj.prototype.toString=function(){var a=this.high,b=this.low;var c=qj(a,0,4)+"-";c+=qj(a,4,6)+"-";c+=qj(a,6,8)+"-";c+=qj(b,0,2)+"-";return c+=qj(b,2,8)};
rj.prototype.equiv=function(a){return cj(this,a)};rj.prototype.equiv=rj.prototype.equiv;rj.prototype.Ta=function(a){return a instanceof rj&&this.high.equals(a.high)&&this.low.equals(a.low)};rj.prototype.Xa=function(){-1===this.ea&&(this.ea=hj(this.toString()));return this.ea};Date.prototype.Ta=function(a){return a instanceof Date?this.valueOf()===a.valueOf():!1};Date.prototype.Xa=function(){return this.valueOf()};function sj(a,b){this.entries=a;this.type=b||0;this.idx=0}
sj.prototype.next=function(){if(this.idx<this.entries.length){var a={value:0===this.type?this.entries[this.idx]:1===this.type?this.entries[this.idx+1]:[this.entries[this.idx],this.entries[this.idx+1]],done:!1};this.idx+=2;return a}return{value:null,done:!0}};sj.prototype.next=sj.prototype.next;sj.prototype[jj]=function(){return this};function tj(a,b){this.map=a;this.type=b||0;this.keys=uj(this.map);this.idx=0;this.bucket=null;this.jb=0}
tj.prototype.next=function(){if(this.idx<this.map.size){null!=this.bucket&&this.jb<this.bucket.length||(this.bucket=this.map.map[this.keys[this.idx]],this.jb=0);var a={value:0===this.type?this.bucket[this.jb]:1===this.type?this.bucket[this.jb+1]:[this.bucket[this.jb],this.bucket[this.jb+1]],done:!1};this.idx++;this.jb+=2;return a}return{value:null,done:!0}};tj.prototype.next=tj.prototype.next;tj.prototype[jj]=function(){return this};
function vj(a,b){if(a instanceof Y&&(b instanceof Z||b instanceof Y)){if(a.size!==b.size)return!1;for(var c in a.map)for(var d=a.map[c],e=0;e<d.length;e+=2)if(!cj(d[e+1],b.get(d[e])))return!1;return!0}if(a instanceof Z&&(b instanceof Z||b instanceof Y)){if(a.size!==b.size)return!1;a=a.fa;for(e=0;e<a.length;e+=2)if(!cj(a[e+1],b.get(a[e])))return!1;return!0}if(null!=b&&"object"===typeof b&&(e=Yi(b),c=e.length,a.size===c)){for(d=0;d<c;d++){var f=e[d];if(!a.has(f)||!cj(b[f],a.get(f)))return!1}return!0}return!1}
function wj(a){return null==a?"null":aa.isArray(a)?"["+a.toString()+"]":aa.isString(a)?'"'+a+'"':a.toString()}function xj(a){var b=0,c="TransitMap {";a.forEach(function(d,e){c+=wj(e)+" \x3d\x3e "+wj(d);b<a.size-1&&(c+=", ");b++});return c+"}"}function yj(a){var b=0,c="TransitSet {";a.forEach(function(d){c+=wj(d);b<a.size-1&&(c+=", ");b++});return c+"}"}function Z(a){this.fa=a;this.ca=null;this.ea=-1;this.size=a.length/2;this.xc=0}Z.prototype.toString=function(){return xj(this)};
Z.prototype.inspect=function(){return this.toString()};Z.prototype.convert=function(){if(this.ca)throw Error("Invalid operation, already converted");if(8>this.size)return!1;this.xc++;return 32<this.xc?(this.ca=zj(this.fa,!1,!0),this.fa=[],!0):!1};Z.prototype.clear=function(){this.ea=-1;this.ca?this.ca.clear():this.fa=[];this.size=0};Z.prototype.clear=Z.prototype.clear;Z.prototype.keys=function(){return this.ca?this.ca.keys():new sj(this.fa,0)};Z.prototype.keys=Z.prototype.keys;
Z.prototype.vb=function(){if(this.ca)return this.ca.vb();for(var a=[],b=0,c=0;c<this.fa.length;b++,c+=2)a[b]=this.fa[c];return a};Z.prototype.keySet=Z.prototype.vb;Z.prototype.entries=function(){return this.ca?this.ca.entries():new sj(this.fa,2)};Z.prototype.entries=Z.prototype.entries;Z.prototype.values=function(){return this.ca?this.ca.values():new sj(this.fa,1)};Z.prototype.values=Z.prototype.values;
Z.prototype.forEach=function(a){if(this.ca)this.ca.forEach(a);else for(var b=0;b<this.fa.length;b+=2)a(this.fa[b+1],this.fa[b])};Z.prototype.forEach=Z.prototype.forEach;Z.prototype.get=function(a,b){if(this.ca)return this.ca.get(a);if(this.convert())return this.get(a);for(var c=0;c<this.fa.length;c+=2)if(cj(this.fa[c],a))return this.fa[c+1];return b};Z.prototype.get=Z.prototype.get;
Z.prototype.has=function(a){if(this.ca)return this.ca.has(a);if(this.convert())return this.has(a);for(var b=0;b<this.fa.length;b+=2)if(cj(this.fa[b],a))return!0;return!1};Z.prototype.has=Z.prototype.has;Z.prototype.set=function(a,b){this.ea=-1;if(this.ca)this.ca.set(a,b),this.size=this.ca.size;else{for(var c=0;c<this.fa.length;c+=2)if(cj(this.fa[c],a)){this.fa[c+1]=b;return}this.fa.push(a);this.fa.push(b);this.size++;32<this.size&&(this.ca=zj(this.fa,!1,!0),this.fa=null)}};Z.prototype.set=Z.prototype.set;
Z.prototype["delete"]=function(a){this.ea=-1;if(this.ca)return a=this.ca.delete(a),this.size=this.ca.size,a;for(var b=0;b<this.fa.length;b+=2)if(cj(this.fa[b],a))return a=this.fa[b+1],this.fa.splice(b,2),this.size--,a};Z.prototype.clone=function(){var a=zj();this.forEach(function(b,c){a.set(c,b)});return a};Z.prototype.clone=Z.prototype.clone;Z.prototype[jj]=function(){return this.entries()};Z.prototype.Xa=function(){if(this.ca)return this.ca.Xa();-1===this.ea&&(this.ea=gj(this));return this.ea};
Z.prototype.Ta=function(a){return this.ca?vj(this.ca,a):vj(this,a)};function Y(a,b,c){this.map=b||{};this._keys=a||[];this.size=c||0;this.ea=-1}Y.prototype.toString=function(){return xj(this)};Y.prototype.inspect=function(){return this.toString()};Y.prototype.clear=function(){this.ea=-1;this.map={};this._keys=[];this.size=0};Y.prototype.clear=Y.prototype.clear;function uj(a){return null!=a._keys?a._keys:Yi(a.map)}
Y.prototype["delete"]=function(a){this.ea=-1;this._keys=null;for(var b=hj(a),c=this.map[b],d=0;d<c.length;d+=2)if(cj(a,c[d]))return a=c[d+1],c.splice(d,2),0===c.length&&delete this.map[b],this.size--,a};Y.prototype.entries=function(){return new tj(this,2)};Y.prototype.entries=Y.prototype.entries;Y.prototype.forEach=function(a){for(var b=uj(this),c=0;c<b.length;c++)for(var d=this.map[b[c]],e=0;e<d.length;e+=2)a(d[e+1],d[e],this)};Y.prototype.forEach=Y.prototype.forEach;
Y.prototype.get=function(a,b){var c=hj(a);c=this.map[c];if(null!=c)for(b=0;b<c.length;b+=2){if(cj(a,c[b]))return c[b+1]}else return b};Y.prototype.get=Y.prototype.get;Y.prototype.has=function(a){var b=hj(a);b=this.map[b];if(null!=b)for(var c=0;c<b.length;c+=2)if(cj(a,b[c]))return!0;return!1};Y.prototype.has=Y.prototype.has;Y.prototype.keys=function(){return new tj(this,0)};Y.prototype.keys=Y.prototype.keys;
Y.prototype.vb=function(){for(var a=uj(this),b=[],c=0;c<a.length;c++)for(var d=this.map[a[c]],e=0;e<d.length;e+=2)b.push(d[e]);return b};Y.prototype.keySet=Y.prototype.vb;Y.prototype.set=function(a,b){this.ea=-1;var c=hj(a),d=this.map[c];if(null==d)this._keys&&this._keys.push(c),this.map[c]=[a,b],this.size++;else{c=!0;for(var e=0;e<d.length;e+=2)if(cj(b,d[e])){c=!1;d[e]=b;break}c&&(d.push(a),d.push(b),this.size++)}};Y.prototype.set=Y.prototype.set;
Y.prototype.values=function(){return new tj(this,1)};Y.prototype.values=Y.prototype.values;Y.prototype.clone=function(){var a=zj();this.forEach(function(b,c){a.set(c,b)});return a};Y.prototype.clone=Y.prototype.clone;Y.prototype[jj]=function(){return this.entries()};Y.prototype.Xa=function(){-1===this.ea&&(this.ea=gj(this));return this.ea};Y.prototype.Ta=function(a){return vj(this,a)};
function zj(a,b,c){a=a||[];b=!1===b?b:!0;if((!0!==c||!c)&&64>=a.length){if(b){var d=a;a=[];for(b=0;b<d.length;b+=2){var e=!1;for(c=0;c<a.length;c+=2)if(cj(a[c],d[b])){a[c+1]=d[b+1];e=!0;break}e||(a.push(d[b]),a.push(d[b+1]))}}return new Z(a)}d={};e=[];var f=0;for(b=0;b<a.length;b+=2){c=hj(a[b]);var h=d[c];if(null==h)e.push(c),d[c]=[a[b],a[b+1]],f++;else{var k=!0;for(c=0;c<h.length;c+=2)if(cj(h[c],a[b])){h[c+1]=a[b+1];k=!1;break}k&&(h.push(a[b]),h.push(a[b+1]),f++)}}return new Y(e,d,f)}
function Aj(a){this.map=a;this.size=a.size}Aj.prototype.toString=function(){return yj(this)};Aj.prototype.inspect=function(){return this.toString()};Aj.prototype.add=function(a){this.map.set(a,a);this.size=this.map.size};Aj.prototype.add=Aj.prototype.add;Aj.prototype.clear=function(){this.map=new Y;this.size=0};Aj.prototype.clear=Aj.prototype.clear;Aj.prototype["delete"]=function(a){a=this.map.delete(a);this.size=this.map.size;return a};Aj.prototype.entries=function(){return this.map.entries()};
Aj.prototype.entries=Aj.prototype.entries;Aj.prototype.forEach=function(a){var b=this;this.map.forEach(function(c,d){a(d,b)})};Aj.prototype.forEach=Aj.prototype.forEach;Aj.prototype.has=function(a){return this.map.has(a)};Aj.prototype.has=Aj.prototype.has;Aj.prototype.keys=function(){return this.map.keys()};Aj.prototype.keys=Aj.prototype.keys;Aj.prototype.vb=function(){return this.map.vb()};Aj.prototype.keySet=Aj.prototype.vb;Aj.prototype.values=function(){return this.map.values()};
Aj.prototype.values=Aj.prototype.values;Aj.prototype.clone=function(){var a=Bj();this.forEach(function(b){a.add(b)});return a};Aj.prototype.clone=Aj.prototype.clone;Aj.prototype[jj]=function(){return this.values()};Aj.prototype.Ta=function(a){if(a instanceof Aj){if(this.size===a.size)return cj(this.map,a.map)}else return!1};Aj.prototype.Xa=function(){return hj(this.map)};
function Bj(a){a=a||[];for(var b={},c=[],d=0,e=0;e<a.length;e++){var f=hj(a[e]),h=b[f];if(null==h)c.push(f),b[f]=[a[e],a[e]],d++;else{f=!0;for(var k=0;k<h.length;k+=2)if(cj(h[k],a[e])){f=!1;break}f&&(h.push(a[e]),h.push(a[e]),d++)}}return new Aj(new Y(c,b,d))};function Cj(a){this.str=a}
function Dj(a){this.options=a||{};this.handlers={};for(var b in this.defaults.handlers)this.handlers[b]=this.defaults.handlers[b];for(b in this.options.handlers){a:{switch(b){case "_":case "s":case "?":case "i":case "d":case "b":case "'":case "array":case "map":a=!0;break a}a=!1}if(a)throw Error('Cannot override handler for ground type "'+b+'"');this.handlers[b]=this.options.handlers[b]}this.Kc=null!=this.options.preferStrings?this.options.preferStrings:this.defaults.Kc;this.rc=null!=this.options.preferBuffers?
this.options.preferBuffers:this.defaults.rc;this.pc=this.options.defaultHandler||this.defaults.pc;this.Ua=this.options.mapBuilder;this.yb=this.options.arrayBuilder}
Dj.prototype.defaults={handlers:{_:function(){return null},"?":function(a){return"t"===a},b:function(a,b){if(b&&!1===b.rc||"undefined"==typeof ba.Buffer)if("undefined"!=typeof Uint8Array){if("undefined"!=typeof atob)var c=atob(a);else{a=String(a).replace(/=+$/,"");if(1==a.length%4)throw Error("'atob' failed: The string to be decoded is not correctly encoded.");b=0;for(var d,e=0,f="";d=a.charAt(e++);~d&&(c=b%4?64*c+d:d,b++%4)?f+=String.fromCharCode(255&c>>(-2*b&6)):0)d="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/\x3d".indexOf(d);
c=f}a=c.length;b=new Uint8Array(a);for(d=0;d<a;d++)b[d]=c.charCodeAt(d);c=b}else c=lj("b",a);else c=new ba.Buffer(a,"base64");return c},i:function(a){"number"===typeof a||a instanceof fa||(a=qa(a,10),a=0<a.compare(mj)||0>a.compare(nj)?a:a.toNumber());return a},n:function(a){return lj("n",a)},d:function(a){return parseFloat(a)},f:function(a){return lj("f",a)},c:function(a){return a},":":function(a){return new oj(a)},$:function(a){return new pj(a)},r:function(a){return lj("r",a)},z:function(a){a:switch(a){case "-INF":a=
-Infinity;break a;case "INF":a=Infinity;break a;case "NaN":a=NaN;break a;default:throw Error("Invalid special double value "+a);}return a},"'":function(a){return a},m:function(a){a="number"===typeof a?a:parseInt(a,10);return new Date(a)},t:function(a){return new Date(a)},u:function(a){a=a.replace(/-/g,"");var b,c;var d=b=0;for(c=24;8>d;d+=2,c-=8)b|=parseInt(a.substring(d,d+2),16)<<c;var e=0;d=8;for(c=24;16>d;d+=2,c-=8)e|=parseInt(a.substring(d,d+2),16)<<c;var f=ha(e,b);b=0;d=16;for(c=24;24>d;d+=2,
c-=8)b|=parseInt(a.substring(d,d+2),16)<<c;e=0;for(c=d=24;32>d;d+=2,c-=8)e|=parseInt(a.substring(d,d+2),16)<<c;return new rj(f,ha(e,b))},set:function(a){return Bj(a)},list:function(a){return lj("list",a)},link:function(a){return lj("link",a)},cmap:function(a){return zj(a,!1)}},pc:function(a,b){return lj(a,b)},Kc:!0,rc:!0};
Dj.prototype.decode=function(a,b,c,d){if(null==a)return null;switch(typeof a){case "string":return 3<a.length?c?d=!0:(d=a.charAt(1),d="~"===a.charAt(0)?":"===d||"$"===d||"#"===d:!1):d=!1,d?(a=Ej(this,a),b&&b.write(a,c),b=a):b="^"===a.charAt(0)&&" "!==a.charAt(1)?b.read(a,c):Ej(this,a),b;case "object":if(Zi(a))if("^ "===a[0])if(this.Ua)if(17>a.length&&this.Ua.fromArray){d=[];for(c=1;c<a.length;c+=2)d.push(this.decode(a[c],b,!0,!1)),d.push(this.decode(a[c+1],b,!1,!1));b=this.Ua.fromArray(d,a)}else{d=
this.Ua.init(a);for(c=1;c<a.length;c+=2)d=this.Ua.add(d,this.decode(a[c],b,!0,!1),this.decode(a[c+1],b,!1,!1),a);b=this.Ua.finalize(d,a)}else{d=[];for(c=1;c<a.length;c+=2)d.push(this.decode(a[c],b,!0,!1)),d.push(this.decode(a[c+1],b,!1,!1));b=zj(d,!1)}else b=Fj(this,a,b,c,d);else{c=Yi(a);var e=c[0];if((d=1==c.length?this.decode(e,b,!1,!1):null)&&d instanceof Cj)a=a[e],c=this.handlers[d.str],b=null!=c?c(this.decode(a,b,!1,!0),this):lj(d.str,this.decode(a,b,!1,!1));else if(this.Ua)if(16>c.length&&this.Ua.fromArray){var f=
[];for(d=0;d<c.length;d++)e=c[d],f.push(this.decode(e,b,!0,!1)),f.push(this.decode(a[e],b,!1,!1));b=this.Ua.fromArray(f,a)}else{f=this.Ua.init(a);for(d=0;d<c.length;d++)e=c[d],f=this.Ua.add(f,this.decode(e,b,!0,!1),this.decode(a[e],b,!1,!1),a);b=this.Ua.finalize(f,a)}else{f=[];for(d=0;d<c.length;d++)e=c[d],f.push(this.decode(e,b,!0,!1)),f.push(this.decode(a[e],b,!1,!1));b=zj(f,!1)}}return b}return a};Dj.prototype.decode=Dj.prototype.decode;
function Fj(a,b,c,d,e){if(e){var f=[];for(e=0;e<b.length;e++)f.push(a.decode(b[e],c,d,!1));return f}f=c&&c.idx;if(2===b.length&&"string"===typeof b[0]&&(e=a.decode(b[0],c,!1,!1))&&e instanceof Cj)return b=b[1],f=a.handlers[e.str],null!=f?f=f(a.decode(b,c,d,!0),a):lj(e.str,a.decode(b,c,d,!1));c&&f!=c.idx&&(c.idx=f);if(a.yb){if(32>=b.length&&a.yb.fromArray){f=[];for(e=0;e<b.length;e++)f.push(a.decode(b[e],c,d,!1));return a.yb.fromArray(f,b)}f=a.yb.init(b);for(e=0;e<b.length;e++)f=a.yb.add(f,a.decode(b[e],
c,d,!1),b);return a.yb.finalize(f,b)}f=[];for(e=0;e<b.length;e++)f.push(a.decode(b[e],c,d,!1));return f}function Ej(a,b){if("~"===b.charAt(0)){var c=b.charAt(1);if("~"===c||"^"===c||"`"===c)return b.substring(1);if("#"===c)return new Cj(b.substring(2));var d=a.handlers[c];return null==d?a.pc(c,b.substring(2)):d(b.substring(2),a)}return b};function Gj(a){this.decoder=new Dj(a)}function Hj(a,b){this.qd=a;this.options=b||{};this.cache=this.options.cache?this.options.cache:new aj}Hj.prototype.read=function(a){var b=this.cache;a=this.qd.decoder.decode(JSON.parse(a),b);this.cache.clear();return a};Hj.prototype.read=Hj.prototype.read;(8|3&Math.round(14*Math.random())).toString(16);$i();$i();$i();$i();$i();$i();$i();$i();$i();$i();$i();$i();$i();$i();$i();$i();$i();$i();$i();$i();$i();$i();$i();$i();$i();$i();$i();$i();$i();$i();function Ij(a,b){if("json"===a||"json-verbose"===a||null==a)return a=new Gj(b),new Hj(a,b);throw Error("Cannot create reader of type "+a);};fa.prototype.G=function(a,b){return this.equiv(b)};rj.prototype.G=function(a,b){return this.equiv(b)};kj.prototype.G=function(a,b){return this.equiv(b)};fa.prototype.lc=u;fa.prototype.T=function(){return hj(this)};rj.prototype.lc=u;rj.prototype.T=function(){return rc(this.toString())};kj.prototype.lc=u;kj.prototype.T=function(){return hj(this)};rj.prototype.la=u;rj.prototype.X=function(a,b){return Nb(b,['#uuid "',B.g(this.toString()),'"'].join(""))};
function Jj(a){for(var b=Fg(cd.h(null,oh)),c=J(ta(b)),d=null,e=0,f=0;;)if(f<e){var h=d.N(null,f);a[h]=b[h];f+=1}else if(c=J(c))d=c,qd(d)?(c=Zb(d),f=$b(d),d=c,e=R(c),c=f):(c=N(d),a[c]=b[c],c=O(d),d=null,e=0),f=0;else break;return a}function Kj(){}Kj.prototype.init=function(){return Tb(ie)};Kj.prototype.add=function(a,b,c){return Wb(a,b,c)};Kj.prototype.finalize=function(a){return Vb(a)};Kj.prototype.fromArray=function(a){return tf.l?tf.l(a,!0,!0):tf.call(null,a,!0,!0)};function Lj(){}
Lj.prototype.init=function(){return Tb(Zc)};Lj.prototype.add=function(a,b){return Vd.h(a,b)};Lj.prototype.finalize=function(a){return Vb(a)};Lj.prototype.fromArray=function(a){return Ve.h?Ve.h(a,!0):Ve.call(null,a,!0)};
function Mj(){return Ij(Ld(Mh),Jj({handlers:Fg(Zf.C(Xc([new v(null,6,["$",function(a){return uc.g(a)},":",function(a){return Kd.g(a)},"set",function(a){return xe.h(fg,a)},"list",function(a){return xe.h(yc,a.reverse())},"cmap",function(a){for(var b=0,c=Tb(ie);;)if(b<a.length){var d=b+2;c=Wb(c,a[b],a[b+1]);b=d}else return Vb(c)},"with-meta",function(a){return gd(a[0],a[1])}],null),cd.h(oh.g(null),$g)]))),defaultHandler:$g.g(oh.g(null)),mapBuilder:new Kj,arrayBuilder:new Lj,prefersStrings:!1}))};function Nj(a,b,c){var d=RegExp,e=b.source,f=x(b.ignoreCase)?"gi":"g";f=x(b.multiline)?[f,"m"].join(""):f;b=x(b.Fd)?[f,"u"].join(""):f;return a.replace(new d(e,b),c)}
function Oj(a){return function(){function b(d){var e=null;if(0<arguments.length){e=0;for(var f=Array(arguments.length-0);e<f.length;)f[e]=arguments[e+0],++e;e=new K(f,0,null)}return c.call(this,e)}function c(d){d=we(d);if(P.h(R(d),1))return d=N(d),a.g?a.g(d):a.call(null,d);d=We(d);return a.g?a.g(d):a.call(null,d)}b.S=0;b.U=function(d){d=J(d);return c(d)};b.C=c;return b}()}
function Pj(a,b,c){if("string"===typeof b)return a.replace(new RegExp(String(b).replace(/([-()\[\]{}+?*.$\^|,:#<!\\])/g,"\\$1").replace(/\x08/g,"\\x08"),"g"),c);if(b instanceof RegExp)return"string"===typeof c?Nj(a,b,c):Nj(a,b,Oj(c));throw["Invalid match arg: ",B.g(b)].join("");}function Qj(a){var b=new ya;for(a=J(a);;)if(null!=a)b.append(B.g(N(a))),a=O(a),null!=a&&b.append(" ");else return b.toString()}
function Rj(a){var b=/-/;a="/(?:)/"===B.g(b)?Yc.h(We(Wc("",ue.h(B,J(a)))),""):We(B.g(a).split(b));if(1<R(a))a:for(;;)if(""===(null==a?null:tb(a)))a=null==a?null:ub(a);else break a;return a};var Sj={};var Tj={},Uj="undefined"!==typeof window&&null!=window.document,Vj=new dg(null,new v(null,2,["aria",null,"data",null],null),null);function Wj(a){return 2>R(a)?a.toUpperCase():[a.substring(0,1).toUpperCase(),a.substring(1)].join("")}function Xj(a){if("string"===typeof a)return a;a=Ld(a);var b=Rj(a),c=J(b);b=N(c);c=O(c);return x(Vj.g?Vj.g(b):Vj.call(null,b))?a:ce(B,b,ue.h(Wj,c))}
function Yj(a){var b=function(){var c=function(){var d=dd(a);if(d){d=a.displayName;if(x(d))return d;d=a.name;return"string"===typeof d&&J(d)?d:null}return d}();if(x(c))return c;c=function(){var d=null!=a?a.J&4096||u===a.Bc?!0:!1:!1;return d?Ld(a):d}();if(x(c))return c;c=hd(a);return nd(c)?Bh.g(c):null}();return x(b)?Pj(B.g(b),"$","."):null}function Zj(a){return a instanceof I||a instanceof tc}
var ak=function ak(a){switch(arguments.length){case 0:return ak.I();case 1:return ak.g(arguments[0]);case 2:return ak.h(arguments[0],arguments[1]);default:for(var c=[],d=arguments.length,e=0;;)if(e<d)c.push(arguments[e]),e+=1;else break;c=new K(c.slice(2),0,null);return ak.C(arguments[0],arguments[1],c)}};ak.I=function(){return null};ak.g=function(a){return kd(a)?(a=oe(function(b){return x(b)?Zj(b)?Ld(b):b:null},a),J(a)?Qj(a):null):Zj(a)?Ld(a):a};
ak.h=function(a,b){return x(a)?x(b)?[B.g(ak.g(a))," ",B.g(ak.g(b))].join(""):ak.g(a):ak.g(b)};ak.C=function(a,b,c){return Ta(ak,ak.h(a,b),c)};ak.U=function(a){var b=N(a),c=O(a);a=N(c);c=O(c);return this.C(b,a,c)};ak.S=2;var bk=!1;function ck(a){if(nd(a))try{var b=H.h(a,Th)}catch(c){b=null}else b=null;return b}
function dk(a){var b=Th.g(hd(a));if(x(b))return b;b=ck(T(a,1,null));if(x(b))return b;b=T(a,0,null);switch(b instanceof I?b.Ba:null){case "\x3e":case "f\x3e":return ck(T(a,2,null));case "r\x3e":return a=T(a,2,null),null==a?null:a.key;default:return null}};var ek=0;function fk(a){return setTimeout(a,16)}var gk=Uj?function(){var a=window;return function(){var b=a.requestAnimationFrame;if(x(b))return b;b=a.webkitRequestAnimationFrame;if(x(b))return b;b=a.mozRequestAnimationFrame;if(x(b))return b;b=a.msRequestAnimationFrame;return x(b)?b:fk}().bind(a)}():fk;function hk(a,b){return a.oc-b.oc}function ik(){return null}function jk(a){for(var b=a.length,c=0;;)if(c<b){var d=a[c];d.I?d.I():d.call(null);c+=1}else return null}
function kk(a,b,c){b.push(c);return a.schedule()}function lk(){this.ec=!1}g=lk.prototype;g.flush_after_render=function(){var a=this.Qb;if(null==a)return null;this.Qb=null;return jk(a)};g.queue_render=function(a){null==this.bc&&(this.bc=[]);return kk(this,this.bc,a)};g.schedule=function(){function a(){return b.run_queues()}var b=this;if(this.ec)return null;this.ec=!0;return gk.g?gk.g(a):gk.call(null,a)};g.flush_before_flush=function(){var a=this.Rb;if(null==a)return null;this.Rb=null;return jk(a)};
g.flush_queues=function(){this.flush_before_flush();ik();this.flush_render();return this.flush_after_render()};g.run_queues=function(){this.ec=!1;return this.flush_queues()};g.add_before_flush=function(a){null==this.Rb&&(this.Rb=[]);return kk(this,this.Rb,a)};g.add_after_render=function(a){null==this.Qb&&(this.Qb=[]);return kk(this,this.Qb,a)};
g.flush_render=function(){var a=this.bc;if(null==a)return null;this.bc=null;a:{a.sort(hk);for(var b=a.length,c=0;;)if(c<b){var d=a[c];!0===d.cljsIsDirty&&d.forceUpdate();c+=1}else break a}return null};var mk=new lk;function nk(a){if(x(a.cljsIsDirty))return null;a.cljsIsDirty=!0;return mk.queue_render(a)};function ok(a){if(null!=a&&null!=a.nd)a=a.id;else{var b=ok[t(null==a?null:a)];if(null!=b)a=b.g?b.g(a):b.call(null,a);else if(b=ok._,null!=b)a=b.g?b.g(a):b.call(null,a);else throw z("Compiler.get-id",a);}return a}function pk(a,b){if(null!=a&&null!=a.Lc)a=a.Lc(a,b);else{var c=pk[t(null==a?null:a)];if(null!=c)a=c.h?c.h(a,b):c.call(null,a,b);else if(c=pk._,null!=c)a=c.h?c.h(a,b):c.call(null,a,b);else throw z("Compiler.as-element",a);}return a}
function qk(a,b,c,d,e){if(null!=a&&null!=a.Mc)a=a.Mc(a,b,c,d,e);else{var f=qk[t(null==a?null:a)];if(null!=f)a=f.P?f.P(a,b,c,d,e):f.call(null,a,b,c,d,e);else if(f=qk._,null!=f)a=f.P?f.P(a,b,c,d,e):f.call(null,a,b,c,d,e);else throw z("Compiler.make-element",a);}return a};var rk=function rk(a){switch(arguments.length){case 1:return rk.g(arguments[0]);case 2:return rk.h(arguments[0],arguments[1]);default:for(var c=[],d=arguments.length,e=0;;)if(e<d)c.push(arguments[e]),e+=1;else break;c=new K(c.slice(2),0,null);return rk.C(arguments[0],arguments[1],c)}};rk.g=function(a){return a};rk.h=function(a,b){return R(a)<R(b)?Ta(function(c,d){return vd(b,d)?id.h(c,d):c},a,a):Ta(id,a,b)};rk.C=function(a,b,c){return Ta(rk,a,Yc.h(c,b))};
rk.U=function(a){var b=N(a),c=O(a);a=N(c);c=O(c);return this.C(b,a,c)};rk.S=2;var sk;function tk(a,b){b.fd=null;a:{var c=sk;sk=b;try{var d=a.I?a.I():a.call(null);break a}finally{sk=c}d=void 0}a=b.fd;b.nb=!1;a:{c=b.xb;var e=null==a?0:a.length,f=e===(null==c?0:c.length);if(f)for(f=0;;){var h=f===e;if(h){c=h;break a}if(a[f]===c[f])f+=1;else{c=!1;break a}}else c=f}c||b._update_watching(a);return d}function uk(a){var b=sk;if(null!=b){var c=b.fd;null==c?b.fd=[a]:c.push(a)}}function vk(a,b,c){a.ra=U.l(a.ra,b,c);return a.wc=null}
function wk(a,b){a.ra=cd.h(a.ra,b);return a.wc=null}function xk(a,b,c){var d=a.wc;d=null==d?a.wc=Cd(function(l,m,n){l.push(m);l.push(n);return l},[],a.ra):d;for(var e=d.length,f=0;;)if(f<e){var h=d[f],k=d[f+1];k.K?k.K(h,a,b,c):k.call(null,h,a,b,c);f=2+f}else return null}function yk(a,b,c,d){Nb(a,["#object[reagent.ratom.",B.g(c)," "].join(""));a:{c=sk;sk=null;try{var e=d;break a}finally{sk=c}e=void 0}qg(e,a,b);return Nb(a,"]")}var zk=null;
function Ak(a,b,c,d){this.state=a;this.meta=b;this.vc=c;this.ra=d;this.o=2154201088;this.J=114690}g=Ak.prototype;g.X=function(a,b,c){return yk(b,c,"RAtom",new v(null,1,[zg,this.Ca(null)],null))};g.da=function(){return this.meta};g.T=function(){return ca(this)};g.G=function(a,b){return this===b};g.ya=function(a,b){a=this.state;this.state=b;null!=this.ra&&xk(this,a,b);return b};g.Vb=function(a,b){return this.ya(null,b.g?b.g(this.state):b.call(null,this.state))};
g.Wb=function(a,b,c){return this.ya(null,b.h?b.h(this.state,c):b.call(null,this.state,c))};g.Xb=function(a,b,c,d){return this.ya(null,b.l?b.l(this.state,c,d):b.call(null,this.state,c,d))};g.Yb=function(a,b,c,d,e){return this.ya(null,de(b,this.state,c,d,e))};g.Zb=function(a,b){xk(this,a,b)};g.Ib=function(a,b,c){return vk(this,b,c)};g.Jb=function(a,b){return wk(this,b)};g.ga=function(a,b){return new Ak(this.state,b,this.vc,this.ra)};g.Ca=function(){uk(this);return this.state};
var Bk=function Bk(a){switch(arguments.length){case 1:return Bk.g(arguments[0]);default:for(var c=[],d=arguments.length,e=0;;)if(e<d)c.push(arguments[e]),e+=1;else break;c=new K(c.slice(1),0,null);return Bk.C(arguments[0],c)}};Bk.g=function(a){return new Ak(a,null,null,null)};Bk.C=function(a,b){var c=fe(b);b=H.h(c,Ja);c=H.h(c,$h);return new Ak(a,b,c,null)};Bk.U=function(a){var b=N(a);a=O(a);return this.C(b,a)};Bk.S=1;
function Ck(a,b,c,d){var e=b.tc;e=null==e?ie:e;var f=e.h?e.h(c,null):e.call(null,c,null);if(null!=f)return G(f);if(null==sk)return a.I?a.I():a.call(null);f=function(){function k(){var l=cd.h(b.tc,c);b.tc=l;null!=d&&(d.sc=null);return null}return Dk.l?Dk.l(a,jh,k):Dk.call(null,a,jh,k)}();var h=G(f);b.tc=U.l(e,c,f);null!=d&&(d.sc=f);return h}function Ek(a){this.ja=Fk;this.path=a;this.ra=this.state=this.sc=null;this.o=2153807872;this.J=114690}g=Ek.prototype;
g._peek=function(){var a=sk;sk=null;try{return this.Ca(null)}finally{sk=a}};g._set_state=function(a,b){if(a===b)return null;this.state=b;return null!=this.ra?xk(this,a,b):null};g.X=function(a,b,c){return yk(b,c,"RCursor",new v(null,2,[zg,this.Ca(null),Fh,this.path],null))};g.T=function(){return rc(new V(null,2,5,X,[this.ja,this.path],null))};g.G=function(a,b){return b instanceof Ek&&P.h(this.path,b.path)&&P.h(this.ja,b.ja)};
g.ya=function(a,b){this._set_state(this.state,b);(null!=this.ja?this.ja.o&32768||u===this.ja.Rc||(this.ja.o?0:y(xb,this.ja)):y(xb,this.ja))?P.h(this.path,Zc)?re(this.ja,b):se.K(this.ja,ye,this.path,b):this.ja.h?this.ja.h(this.path,b):this.ja.call(null,this.path,b);return b};g.Vb=function(a,b){a=this.ya;var c=this._peek();b=b.g?b.g(c):b.call(null,c);return a.call(this,null,b)};g.Wb=function(a,b,c){a=this.ya;var d=this._peek();b=b.h?b.h(d,c):b.call(null,d,c);return a.call(this,null,b)};
g.Xb=function(a,b,c,d){a=this.ya;var e=this._peek();b=b.l?b.l(e,c,d):b.call(null,e,c,d);return a.call(this,null,b)};g.Yb=function(a,b,c,d,e){return this.ya(null,de(b,this._peek(),c,d,e))};g.Zb=function(a,b){xk(this,a,b)};g.Ib=function(a,b,c){return vk(this,b,c)};g.Jb=function(a,b){return wk(this,b)};
g.Ca=function(){var a=this,b=this,c=a.state,d=function(){var e=a.sc;return null==e?(e=(null!=a.ja?a.ja.o&32768||u===a.ja.Rc||(a.ja.o?0:y(xb,a.ja)):y(xb,a.ja))?function(){var f=G(a.ja);return Ta(H,f,a.path)}:function(){return a.ja.g?a.ja.g(a.path):a.ja.call(null,a.path)},Ck(e,a.ja,a.path,b)):G(e)}();b._set_state(c,d);return d};
function Gk(a){if(null!=a&&null!=a.uc)a=a.uc(a);else{var b=Gk[t(null==a?null:a)];if(null!=b)a=b.g?b.g(a):b.call(null,a);else if(b=Gk._,null!=b)a=b.g?b.g(a):b.call(null,a);else throw z("IDisposable.dispose!",a);}return a}function Rb(a,b,c,d){return a._handle_change(b,c,d)}function Hk(a){this.f=a;this.state=null;this.nb=!0;this.Ic=!1;this.hc=this.bb=this.ra=this.xb=null;this.o=2153807872;this.J=114690}g=Hk.prototype;g._peek_at=function(){var a=sk;sk=null;try{return this.Ca(null)}finally{sk=a}};
g._handle_change=function(a,b,c){return b===c||this.nb?null:null==this.bb?(this.nb=!0,null==zk&&(zk=[],!1===mk.ec&&mk.schedule()),zk.push(this)):!0===this.bb?this._run(!1):this.bb.g?this.bb.g(this):this.bb.call(null,this)};
g._update_watching=function(a){var b=gg(a),c=gg(this.xb);this.xb=a;a=J(rk.h(b,c));for(var d=null,e=0,f=0;;)if(f<e){var h=d.N(null,f);Qb(h,this);f+=1}else if(a=J(a))d=a,qd(d)?(a=Zb(d),f=$b(d),d=a,e=R(a),a=f):(a=N(d),Qb(a,this),a=O(d),d=null,e=0),f=0;else break;b=J(rk.h(c,b));c=null;for(e=d=0;;)if(e<d)a=c.N(null,e),Sb(a,this),e+=1;else if(b=J(b))c=b,qd(c)?(b=Zb(c),d=$b(c),c=b,a=R(b),b=d,d=a):(a=N(c),Sb(a,this),b=O(c),c=null,d=0),e=0;else return null};
g._queued_run=function(){return this.nb&&null!=this.xb?this._run(!0):null};g._try_capture=function(a){try{return this.hc=null,tk(a,this)}catch(b){return this.hc=this.state=a=b,this.nb=!1}};g._run=function(a){var b=this.state;a=x(a)?this._try_capture(this.f):tk(this.f,this);this.Ic||(this.state=a,null==this.ra||P.h(b,a)||xk(this,b,a));return a};
g._set_opts=function(a){var b=fe(a);a=H.h(b,hh);var c=H.h(b,Dh),d=H.h(b,jh);b=H.h(b,Gh);null!=a&&(this.bb=a);null!=c&&(this.ld=c);null!=d&&(this.Jc=d);return null!=b?this.Ic=b:null};g.X=function(a,b,c){return yk(b,c,"Reaction",new v(null,1,[zg,this.Ca(null)],null))};g.T=function(){return ca(this)};g.G=function(a,b){return this===b};
g.uc=function(){var a=this.state,b=this.xb;this.bb=this.state=this.xb=null;this.nb=!0;b=J(gg(b));for(var c=null,d=0,e=0;;)if(e<d){var f=c.N(null,e);Sb(f,this);e+=1}else if(b=J(b))c=b,qd(c)?(b=Zb(c),e=$b(c),c=b,d=R(b),b=e):(b=N(c),Sb(b,this),b=O(c),c=null,d=0),e=0;else break;null!=this.Jc&&this.Jc(a);a=this.Dd;if(null==a)return null;b=a.length;for(c=0;;)if(c<b)d=a[c],d.g?d.g(this):d.call(null,this),c+=1;else return null};g.ya=function(a,b){a=this.state;this.state=b;this.ld(a,b);xk(this,a,b);return b};
g.Vb=function(a,b){a=this.ya;var c=this._peek_at();b=b.g?b.g(c):b.call(null,c);return a.call(this,null,b)};g.Wb=function(a,b,c){a=this.ya;var d=this._peek_at();b=b.h?b.h(d,c):b.call(null,d,c);return a.call(this,null,b)};g.Xb=function(a,b,c,d){a=this.ya;var e=this._peek_at();b=b.l?b.l(e,c,d):b.call(null,e,c,d);return a.call(this,null,b)};g.Yb=function(a,b,c,d,e){return this.ya(null,de(b,this._peek_at(),c,d,e))};g.Zb=function(a,b){xk(this,a,b)};g.Ib=function(a,b,c){return vk(this,b,c)};
g.Jb=function(a,b){a=jd(this.ra);wk(this,b);return!a&&jd(this.ra)&&null==this.bb?this.uc(null):null};g.Ca=function(){var a=this.hc;if(null!=a)throw a;(a=null==sk)&&(Ik.I?Ik.I():Ik.call(null));a&&null==this.bb?this.nb&&(a=this.state,this.state=this.f.I?this.f.I():this.f.call(null),null==this.ra||P.h(a,this.state)||xk(this,a,this.state)):(uk(this),this.nb&&this._run(!1));return this.state};
function Ik(){for(;;){var a=zk;if(null==a)return null;zk=null;for(var b=a.length,c=0;;)if(c<b)a[c]._queued_run(),c+=1;else break}}ik=Ik;function Dk(a){for(var b=[],c=arguments.length,d=0;;)if(d<c)b.push(arguments[d]),d+=1;else break;c=1<b.length?new K(b.slice(1),0,null):null;b=arguments[0];var e=fe(c);c=H.h(e,hh);d=H.h(e,Dh);e=H.h(e,jh);b=new Hk(b);b._set_opts(new v(null,3,[hh,c,Dh,d,jh,e],null));return b}var Jk=Dk(null);
function Kk(a,b){var c=Lk,d=Jk,e=tk(a,d);null!=d.xb&&(Jk=Dk(null),d._set_opts(c),d.f=a,d.bb=function(){return nk.g?nk.g(b):nk.call(null,b)},b.cljsRatom=d);return e};var Mk;function Nk(a,b){var c=b.argv;if(null==c){c=X;a=a.constructor;a:for(var d=ta(b),e=d.length,f=ie,h=0;;)if(h<e){var k=d[h];f=U.l(f,Kd.g(k),ua(b,k));h+=1}else break a;b=new V(null,2,5,c,[a,f],null)}else b=c;return b}function Ok(a){var b;if(b=dd(a))a=null==a?null:a.prototype,b=null!=(null==a?null:a.ob);return b}
function Pk(a,b){for(;;){var c=a.ob,d=!0===a.cd?c.call(a,a):function(){var e=Nk(a,a.props);switch(R(e)){case 1:return c.call(a);case 2:return c.call(a,Sc(e,1));case 3:return c.call(a,Sc(e,1),Sc(e,2));case 4:return c.call(a,Sc(e,1),Sc(e,2),Sc(e,3));case 5:return c.call(a,Sc(e,1),Sc(e,2),Sc(e,3),Sc(e,4));default:return c.apply(a,Sa(e).slice(1))}}();if(pd(d))return pk(b,d);if(ud(d))d=Ok(d)?function(e,f,h,k,l){return function(){function m(p){var q=null;if(0<arguments.length){q=0;for(var r=Array(arguments.length-
0);q<r.length;)r[q]=arguments[q+0],++q;q=new K(r,0,null)}return n.call(this,q)}function n(p){return pk(f,ce($e,l,p))}m.S=0;m.U=function(p){p=J(p);return n(p)};m.C=n;return m}()}(a,b,c,null,d):d,a.ob=d;else return d}}var Lk=new v(null,1,[Gh,!0],null);
function Qk(a,b){switch(a instanceof I?a.Ba:null){case "getDefaultProps":throw Error("getDefaultProps not supported");case "getDerivedStateFromProps":return function(c,d){var e=b.call,f=c.argv;null!=f&&(c=T(f,1,null),c=nd(c)?c:null);return e.call(b,null,c,d)};case "getInitialState":return function(c){var d=c.ed;d=null!=d?d:c.ed=Bk.g(null);return re(d,b.call(c,c))};case "getSnapshotBeforeUpdate":return function(c,d){return b.call(this,this,Nk(this,c),d)};case "componentWillReceiveProps":return function(c){return b.call(this,
this,Nk(this,c))};case "UNSAFE_componentWillReceiveProps":return function(c){return b.call(this,this,Nk(this,c))};case "shouldComponentUpdate":return function(c){var d=bk;if(x(d))return d;d=this.props.argv;var e=c.argv,f=null==d||null==e;if(null==b){if(f)return f;try{return!P.h(d,e)}catch(h){return!1}}else return f?b.call(this,this,Nk(this,this.props),Nk(this,c)):b.call(this,this,d,e)};case "componentWillUpdate":return function(c,d){return b.call(this,this,Nk(this,c),d)};case "UNSAFE_componentWillUpdate":return function(c,
d){return b.call(this,this,Nk(this,c),d)};case "componentDidUpdate":return function(c,d,e){return b.call(this,this,Nk(this,c),d,e)};case "componentWillMount":return function(){return b.call(this,this)};case "UNSAFE_componentWillMount":return function(){return b.call(this,this)};case "componentDidMount":return function(){return b.call(this,this)};case "componentWillUnmount":return function(){var c=ua(this,"cljsRatom");null!=c&&Gk(c);this.cljsIsDirty=!1;return null==b?null:b.call(this,this)};case "componentDidCatch":return function(c,
d){return b.call(this,this,c,d)};default:return null}}var Rk=new v(null,2,[hi,null,Vh,null],null),Sk=function(a){var b=qe(ie);return function(c){var d=H.h(G(b),c);if(null!=d)return d;d=a.g?a.g(c):a.call(null,c);se.K(b,U,c,d);return d}}(function(a){if("string"===typeof a)return a;a=Ld(a);a=Pj(a,/(unsafe|UNSAFE)[-_]/,"UNSAFE_");a=Rj(a);var b=J(a);a=N(b);b=O(b);return ce(B,a,ue.h(Wj,b))});function Tk(a){return Cd(function(b,c,d){return U.l(b,Kd.g(Sk(c)),d)},ie,a)}
function Uk(a,b){var c=function(){var h=Ah.g(a);return x(h)?h:eh.g(a)}(),d=null==Ah.g(a),e=function(){var h=ih.g(a);if(x(h))return h;h=Yj(c);return x(h)?h:B.g(Bg("reagent"))}(),f=Cd(function(h,k,l){var m=U.l,n=Qk(k,l);return m.call(U,h,k,x(n)?n:l)},ie,a);return U.C(f,ih,e,Xc([xh,d,Ah,c,eh,function(){var h=this,k=ua(h,"cljsRatom");h.cljsIsDirty=!1;return null==k?Kk(function(){a:{var l=Mk;Mk=h;try{var m=Pk(h,b);break a}finally{Mk=l}m=void 0}return m},h):k._run(!1)}]))}
function Vk(a){return Cd(function(b,c,d){c=Ld(c);b[c]=d;return b},{},a)}function Wk(a,b){return Uk(Zf.C(Xc([Rk,Tk(a)])),b)}var ag=new V(null,5,5,X,[ph,fi,Xh,Zh,lh],null);
function Xk(a,b){function c(k,l,m){yi.Component.call(this,k,l,m);x(h)&&(h.h?h.h(this,k):h.call(null,this,k));x(f)&&(this.state=f.g?f.g(this):f.call(null,this));this.oc=ek+=1;return this}a=Wk(a,b);b=Vk(ee(cd,a,ih,Ch,nh,Xc([eh,Ah,ag])));var d=Vk($f(a)),e=ih.g(a),f=Ch.g(a),h=nh.g(a);xa(c.prototype,yi.Component.prototype,b);x(eh.g(a))&&(c.prototype.render=eh.g(a));x(Ah.g(a))&&(c.prototype.ob=Ah.g(a));x(xh.g(a))&&(c.prototype.cd=xh.g(a));xa(c,yi.Component,d);x(e)&&(c.displayName=e,c.Ab=e,c.mc=function(k){return Nb(k,
e)});c.$b=!0;return c.prototype.constructor=c}function Yk(a,b,c){a=ok(a);return b[a]=c}
function Zk(a,b){for(;;){var c=b.ob,d=b.argv,e=be(c,d);if(pd(e))return pk(a,e);if(ud(e))c=Ok(e)?function(f,h,k,l,m,n){return function(){function p(r){var w=null;if(0<arguments.length){w=0;for(var A=Array(arguments.length-0);w<A.length;)A[w]=arguments[w+0],++w;w=new K(A,0,null)}return q.call(this,w)}function q(r){return pk(f,ce($e,n,r))}p.S=0;p.U=function(r){r=J(r);return q(r)};p.C=q;return p}()}(a,b,c,null,d,e):e,b.ob=c;else return e}}
function $k(a,b){var c=b.argv,d=b.ob;b=yi.useState(0);T(b,0,null);var e=T(b,1,null),f=yi.useRef();x(f.current)||function(){var k={forceUpdate:function(){return e.g?e.g(Hc):e.call(null,Hc)}};k.oc=ek+=1;k.constructor=d;k.ob=d;return f.current=k}();var h=f.current;b=ua(h,"cljsRatom");yi.useEffect(function(){return function(){var k=ua(h,"cljsRatom");return null==k?null:Gk(k)}},[]);h.argv=c;h.cljsIsDirty=!1;return null==b?Kk(function(){a:{var k=Mk;Mk=h;try{var l=Zk(a,h);break a}finally{Mk=k}l=void 0}return l},
h):b._run(!1)}function al(a,b){a=a.argv;b=b.argv;var c=!1===bk;if(c)try{return P.h(a,b)}catch(d){return!1}else return c}function bl(a,b){function c(e){return $k(a,e)}var d=ua(b,ok(a));if(x(d))return d;c.displayName=Yj(b);d=yi.memo(c,al);Yk(a,b,d);return d};var cl=new dg(null,new v(null,6,["url",null,"tel",null,"text",null,"textarea",null,"password",null,"search",null],null),null);
function dl(a,b,c,d){var e=fe(ie);e=H.h(e,Sh);if(a===document.activeElement&&vd(cl,a.type)&&"string"===typeof b&&"string"===typeof c){var f=a.value;if(!P.h(f,c))return mk.add_after_render(function(){return el.g?el.g(d):el.call(null,d)});c=R(f)-a.selectionStart;c=R(b)-c;d.ac=b;a.value=b;dd(e)&&(e.g?e.g(b):e.call(null,b));a.selectionStart=c;return a.selectionEnd=c}d.ac=b;a.value=b;return dd(e)?e.g?e.g(b):e.call(null,b):null}
function el(a){if(x(a.nc)){a.Gc=!1;var b=a.dd,c=a.ac,d=a.qc;return P.h(b,c)?null:dl(d,b,c,a)}return null}function fl(a,b,c){a.ac=c.target.value;x(a.Gc)||(a.Gc=!0,mk.add_after_render(function(){return el(a)}));return b.g?b.g(c):b.call(null,c)}
function gl(a){var b=Mk;if(x(function(){var f=null!=a;return f?(f=a.hasOwnProperty("onChange"),x(f)?a.hasOwnProperty("value"):f):f}())){var c=a.value;c=null==c?"":c;var d=a.onChange,e=a.ref;x(b.nc)||(b.nc=!0,b.ac=c);x(b.Nc)||(b.Nc=dd(e)?function(f){b.qc=f;return e.g?e.g(f):e.call(null,f)}:x(x(e)?e.hasOwnProperty("current"):e)?function(f){b.qc=f;return e.current=f}:function(f){return b.qc=f});b.dd=c;delete a.value;a.defaultValue=c;a.onChange=function(f){return fl(b,d,f)};a.ref=b.Nc}}
var hl=new v(null,4,[di,"ReagentInput",Nh,el,mi,function(a){return a.nc=null},Oh,function(a,b,c,d,e){gl(c);return qk(e,a,b,c,d)}],null);var il={},im,kl=/([^\s\.#]+)(?:#([^\s\.#]+))?(?:\.([^\s#]+))?/,ll={"class":"className","for":"htmlFor",charset:"charSet"};function ml(a,b){return a.hasOwnProperty(b)?ua(a,b):null}function nl(a,b,c){if(Zj(b)){var d=ml(ll,Ld(b));null==d?(d=Xj(b),b=Ld(b),b=ll[b]=d):b=d}c=ol.g?ol.g(c):ol.call(null,c);a[b]=c;return a}
function ol(a){return"object"!==t(a)?a:Zj(a)?Ld(a):nd(a)?Cd(nl,{},a):kd(a)?Fg(a):ud(a)?function(){function b(d){var e=null;if(0<arguments.length){e=0;for(var f=Array(arguments.length-0);e<f.length;)f[e]=arguments[e+0],++e;e=new K(f,0,null)}return c.call(this,e)}function c(d){return be(a,d)}b.S=0;b.U=function(d){d=J(d);return c(d)};b.C=c;return b}():Fg(a)}var pl={};function ql(a,b,c){if(Zj(b)){var d=ml(pl,Ld(b));null==d?(d=Xj(b),b=Ld(b),b=pl[b]=d):b=d}c=ol(c);a[b]=c;return a}
function rl(a){return"object"!==t(a)?a:Zj(a)?Ld(a):nd(a)?Cd(ql,{},a):kd(a)?Fg(a):ud(a)?function(){function b(d){var e=null;if(0<arguments.length){e=0;for(var f=Array(arguments.length-0);e<f.length;)f[e]=arguments[e+0],++e;e=new K(f,0,null)}return c.call(this,e)}function c(d){return be(a,d)}b.S=0;b.U=function(d){d=J(d);return c(d)};b.C=c;return b}():Fg(a)}
function sl(a,b,c,d,e){switch(R(b)-e){case 0:return yi.createElement(c,d);case 1:return yi.createElement(c,d,pk(a,T(b,e,null)));default:return yi.createElement.apply(null,Cd(function(f,h,k){h>=e&&f.push(pk(a,k));return f},[c,d],b))}}function tl(a,b,c,d){this.tag=a;this.id=b;this.className=c;this.custom=d}function ul(a,b,c){var d=ua(a,ok(c));null==d?Ok(a)?a=Yk(c,a,a):(d=hd(a),d=U.l(d,Oh,a),d=Xk(d,c),a=Yk(c,a,d)):a=d;c={};c.argv=b;b=dk(b);null!=b&&(c.key=b);return yi.createElement(a,c)}
function vl(a,b,c,d){var e={};e.ob=a;var f=R(b);c=df(null,b,c|0,f|0,null);e.argv=c;b=dk(b);null!=b&&(e.key=b);return yi.createElement(bl(d,a),e)}function wl(a,b,c){var d;if(d=dd(a))d=null==a?null:a.prototype,d=null!=(null==d?null:d.render);return d?ul(a,b,c):vl(a,b,1,c)}var xl={};
function yl(a,b,c,d){var e=a.tag,f=T(b,c,null),h=null==f||nd(f),k=function(){var m=h?f:null;var n=th.g(m);n=x(n)?U.l(m,th,ak.g(n)):m;var p=a.id;m=a.className;p=null!=p&&null==ki.g(n)?U.l(n,ki,p):n;if(x(m)){var q=U.l,r=ak.h,w=th.g(n);n=x(w)?w:oi.g(n);m=q.call(U,p,th,r.call(ak,m,n))}else m=p;m=x(a.custom)?rl(m):ol(m);return x(m)?m:{}}();c+=h?1:0;a:switch(e){case "input":case "textarea":var l=!0;break a;default:l=!1}if(l)return l=function(){var m=d.od;if(x(m))return m;m=Xk(hl,d);return d.od=m}(),pk(d,
gd(new V(null,6,5,X,[l,b,e,k,c,d],null),hd(b)));l=ck(hd(b));null!=l&&(k.key=l);return qk(d,b,e,k,c)}function zl(a,b){return Sa(ue.h(function(c){return pk(b,c)},a))}
function Al(a,b,c){null==b&&console.error("vec-to-elem",ug(Xc([a]),Ga()));var d=T(a,0,null);switch(d instanceof I?d.Ba:null){case "\x3e":return c=T(a,1,null),yl(new tl(c,null,null,null),a,2,b);case "r\x3e":c=T(a,1,null);d=T(a,2,null);d=x(d)?d:{};var e=ck(hd(a));null!=e&&(d.key=e);return qk(b,a,c,d,3);case "f\x3e":return vl(T(a,1,null),a,2,b);case "\x3c\x3e":return d=T(a,1,null),c=null==d||nd(d),d=ol(c?d:null),d=x(d)?d:{},c=1+(c?1:0),e=dk(a),null!=e&&(d.key=e),qk(b,a,yi.Fragment,d,c);default:if(Zj(d)||
"string"===typeof d)a:for(;;)switch(c=T(a,0,null),c=Ld(c),d=c.indexOf("\x3e"),d){case -1:d=ml(xl,c);if(null==d){var f=O(hg(kl,Ld(c)));d=T(f,0,null);e=T(f,1,null);f=T(f,2,null);f=null==f?null:Pj(f,/\./," ");var h=d.indexOf("-");h=!P.h(-1,h);d=new tl(d,e,f,h);c=xl[c]=d}else c=d;a=yl(c,a,1,b);break a;case 0:a=null;break a;default:a=gd(new V(null,2,5,X,[c.substring(0,d),U.l(gd(a,null),0,c.substring(d+1))],null),hd(a))}else a=c.l?c.l(d,a,b):c.call(null,d,a,b);return a}}
var Bl=function(a){var b=Bg("G__"),c=x(Qh.g(a))?wl:ul;if("undefined"===typeof Sj||"undefined"===typeof Tj||"undefined"===typeof il||"undefined"===typeof im)im=function(d,e,f,h){this.opts=d;this.id=e;this.Hc=f;this.kd=h;this.o=393216;this.J=0},im.prototype.ga=function(d,e){return new im(this.opts,this.id,this.Hc,e)},im.prototype.da=function(){return this.kd},im.prototype.nd=function(){return this.id},im.prototype.Lc=function(d,e){d=this.Hc;return"object"!==t(e)?e:pd(e)?Al(e,this,d):(null==e?0:null!=
e?e.o&64||u===e.zb||(e.o?0:y(fb,e)):y(fb,e))?zl(e,this):Zj(e)?Ld(e):(null!=e?e.o&2147483648||u===e.la||(e.o?0:y(Ob,e)):y(Ob,e))?ug(Xc([e]),Ga()):e},im.prototype.Mc=function(d,e,f,h,k){return sl(this,e,f,h,k)},im.$b=!0,im.Ab="reagent.impl.template/t_reagent$impl$template21127",im.mc=function(d){return Nb(d,"reagent.impl.template/t_reagent$impl$template21127")};return new im(a,b,c,ie)}(ie);var Cl=qe(null),Dl=Bk.g(null);function El(a){return function(b){b=b.data;return a.g?a.g(b):a.call(null,b)}}function Fl(a,b){vg(Xc(["attempting to connect websocket"]));var c=new WebSocket(a);c.onerror=function(d){console.error(d);P.h(c.readyState,WebSocket.CLOSED)?(re(Dl,!1),d=re(Cl,null)):d=null;return d};if(x(c))return c.onmessage=El(b),re(Cl,c),re(Dl,!0),vg(Xc(["Websocket connection established with: ",a]));throw Error("Websocket connection failed!");};var Gl=xi(23,{});var Hl=qe(ie);function Il(a,b,c){var d=bk;bk=!0;try{Gl.render(a.I?a.I():a.call(null),b,function(){var e=bk;bk=!1;try{return se.K(Hl,U,b,a),mk.flush_after_render(),null!=c?c.I?c.I():c.call(null):null}finally{bk=e}})}finally{bk=d}}
function Jl(){var a=new V(null,4,5,X,[bi,new v(null,1,[si,new v(null,1,[am,20],null)],null),new V(null,5,5,X,[bi,new v(null,1,[si,new v(null,4,[Eh,Vl,li,"100%",cm,Yl,Xl,bm],null)],null),new V(null,1,5,X,[Kl],null),new V(null,1,5,X,[Ll],null),new V(null,3,5,X,[bi,new v(null,1,[si,new v(null,2,[Eh,Vl,dm,20],null)],null),new V(null,1,5,X,[em],null)],null)],null),new V(null,1,5,X,[Ml],null)],null),b=document.getElementById("app");Ik();var c=dd(Bl)?new V(null,2,5,X,[Bl,Bl],null):new V(null,2,5,X,[Bl,ti.g(Bl)],
null),d=T(c,0,null);c=T(c,1,null);Il(function(){return pk(d,dd(a)?a.I?a.I():a.call(null):a)},b,c)};var Nl=function Nl(a,b){return nd(a)?xe.h(a,function(){return function f(e){return new Md(null,function(){for(;;){var h=J(e);if(h){if(qd(h)){var k=Zb(h),l=R(k),m=new Od(Array(l));return function(){for(var r=0;;)if(r<l){var w=D(k,r),A=T(w,0,null),C=T(w,1,null);w=m;var E=X,M=A;A=a.g?a.g(A):a.call(null,A);A=Nl.h?Nl.h(A,C):Nl.call(null,A,C);w.add(new V(null,2,5,E,[M,A],null));r+=1}else return!0}()?Rd(m.chunk(),f($b(h))):Rd(m.chunk(),null)}var n=N(h),p=T(n,0,null),q=T(n,1,null);return Wc(new V(null,2,
5,X,[p,function(){var r=a.g?a.g(p):a.call(null,p),w=q;return Nl.h?Nl.h(r,w):Nl.call(null,r,w)}()],null),f(xc(h)))}return null}},null)}(b)}()):b},Ol=Bk.g(Zc),fm=Bk.g(1);
function Pl(a,b){x(G(Cl))&&P.h(G(Cl).readyState,WebSocket.OPEN)&&(vg(Xc(["Stopping chan"])),x(G(Cl))&&G(Cl).close(1E3,"Disconnected"),re(Dl,null));return Fl(["ws://localhost:",B.g(a),"/ws"].join(""),function(c){var d=x(b)?b:Hh,e=function(){switch(d instanceof I?d.Ba:null){case "json":return function(f){return JSON.parse(f)};default:return function(f){return Mj().read(f)}}}();console.log("Message:",e.g?e.g(c):e.call(null,c));return se.l(Ol,Yc,e.g?e.g(c):e.call(null,c))})}
var Fk=Bk.g(new v(null,1,[gh,Hh],null)),Ql=new Ek(new V(null,1,5,X,[gh],null));function Rl(a){return new V(null,3,5,X,[vh,new v(null,2,[ii,"port",si,new v(null,1,[yh,x(a)?mh:ai],null)],null),"Backend port: "],null)}
function Sl(){var a=Bk.g(!1),b=Bk.g(G(new Ek(new V(null,1,5,X,[zh],null)))),c=Bk.g(G(Ql));return function(){return new V(null,2,5,X,[qh,new v(null,7,[ki,zh,ci,G(b),Bh,zh,ri,uh,dh,function(d){re(b,d.target.value);return re(a,!1)},gi,function(d){d=d.target.value;return J(d)&&Oa(G(a))?(re(a,!0),Pl(d,G(c))):null},sh,function(d){var e=d.target.value;se.K(Fk,U,zh,e);return P.h(d.key,"Enter")?(d.preventDefault(),Pl(e,G(c)),re(a,!0)):null}],null)],null)}}
function Kl(){return new V(null,4,5,X,[Yh,new v(null,1,[si,new v(null,2,[Jh,10,Eh,ni],null)],null),new V(null,2,5,X,[Rl,G(Dl)],null),new V(null,1,5,X,[Sl],null)],null)}
function em(){return new V(null,4,5,X,[Ih,new V(null,3,5,X,[Wl,new v(null,2,[si,new v(null,1,[dm,10],null),$l,function(){return se.h(fm,function(a){var b=R(G(Ol));a+=1;return b<a?b:a})}],null),""],null),new V(null,3,5,X,[Wl,new v(null,1,[$l,function(){return se.h(fm,function(a){--a;return 1>a?1:a})}],null),""],null),new V(null,3,5,X,[Wl,new v(null,2,[si,new v(null,1,[Zl,10],null),$l,function(){return re(Ol,Zc)}],null),"\ud83d\uddd1"],null)],null)}
function Ll(){return new V(null,3,5,X,[bi,new v(null,1,[si,new v(null,1,[Eh,ni],null)],null),G(new Ek(new V(null,1,5,X,[gh],null)))],null)}var Tl=new v(null,4,[Uh,new v(null,4,[Zg,"png",ei,560,li,960,Wh,2],null),Ph,"hover",qi,!0,Kh,!1],null),ch,Yg=qe(ie),jl=qe(ie),gm=qe(ie),hm=qe(ie),Xg=H.l(ie,Rh,Ig.I?Ig.I():Ig.call(null));ch=new Tg;bh($g,function(a){return ch.g(U.l(a,Zg,Hh))});
bh(Hh,function(a){a=fe(a);a=H.h(a,kh);return U.l(ye(ze.l(ye(a,new V(null,1,5,X,[si],null),new v(null,2,[li,"100%",ei,"100%"],null)),new V(null,1,5,X,[ji],null),function(b){return Nl(Tl,b)}),new V(null,2,5,X,[fh,pi],null),!0),Lh,!0)});bh(Mh,function(a){a=fe(a);a=H.h(a,kh);ra.Ed(a,"style",{width:"100%",height:"100%"});var b=Xi(Nl(Tl,Hi(a.config,Kd,Wi,null)));a.config=b;a.layout.autosize=!0;a.useResizeHandler=!0;return a});
function Ul(a,b){var c=function(){var e=new v(null,1,[fh,new v(null,1,[wh,"Loading Test"],null)],null);return P.h(b,Mh)?Xi(e):e}(),d=ch.g(new v(null,2,[kh,x(a)?a:c,gh,b],null));return new V(null,2,5,X,[Ih,new V(null,3,5,X,[bi,new v(null,1,[si,new v(null,2,[ei,"90vh",li,"100%"],null)],null),function(){switch(b instanceof I?b.Ba:null){case "json":return yi.createElement(zi.default,d);case "transit":return new V(null,3,5,X,[rh,zi.default,d],null);default:return new V(null,2,5,X,[bi,"Invalid message format"],
null)}}()],null)],null)}function Ml(){var a=X;a:{var b=G(fm),c=G(Ol),d=J(c);for(b=J(ve(b,c));;)if(b)d=O(d),b=O(b);else break a}return new V(null,3,5,a,[Ul,N(d),G(Ql)],null)};try{Pl(8987,Hh),Jl()}catch(a){throw console.error("An error occurred when calling (plotly-pyclj.server/main)"),a;};
}).call(this);